# StackOverflow 问答 10002000-10002999

# ios - 带有故事板和 ARC 的 iOS：控制器属性未初始化

> ID：10002002
> 
> 赞同：0
> 
> 时间：2012-04-03T21:56:10.557
> 
> 标签：ios, ios5, properties, storyboard, automatic-ref-counting

这个问题很容易解释，但对我来说很难解决。我有一个从未初始化的属性。

首先，我使用 iCarousel 自定义类来为我的应用显示一些图像。在它的一种委托方法（它用来知道哪个视图将在某个索引处显示的方法）中，我使用以下代码：

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{
   if(!view)
   {
      CustomController* controller = [self.storyboard instantiateViewControllerWithIdentifier: "identifier"]; 
      //BTW, the CustomController is initialized properly. Its instance is not nil after the initialization.
      controller.imageView.image = [UIImage imageNamed: "something.png"];
      view = controller.view;
   }

   return view;       
} 
```

如您所见，我在轮播中显示的视图是具有自己的控制器的自定义视图。我使用 storyboard 方法初始化它，然后我只是在我的 imageView 属性中设置图像，很明显，这是一个 UIImageView。

不要兴奋地说我没有初始化我的 imageView，因为我的“CustomController”类中有一个自定义 getter。像这样：

//接口（.h）

```
...

@property (nonatomic, strong) UIImageView* imageView;

... 
```

//实现（.m）

```
...

@synthesize imageView = _imageView;

...

- (UIImageView*) imageView
{
   if(!_imageView)
      _imageView = [[UIImageView alloc] init];
   return _imageView;
}

... 
```

信不信由你，即使我在“_imageView = [[UIImageVIew alloc] init];”中放了一个断点......程序执行该行但_imageView仍然为零。为什么？

我不想知道“如何设置我的属性”，所以请不要为此提供解决方法......我想知道的是“为什么我的属性从未设置并且始终保持为零”，我在做什么错误的？。

我也尝试将我的 imageView 用作 IBOutlet ......但即使我将它链接到 Interface Builder 中的 imageView 并在“viewDidLoad”之后检查它的值，它仍然保持为零。

PS：顺便说一句，我正在使用 ARC（是的，我知道在标题中...... xD）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:26:04.850

好吧，看起来答案就是 borrrden 所说的，问题出在 LLDB 调试器上。实际上，我的属性已初始化，但调试器没有像那样检测到它，如果我将其更改为 GDB，我可以看到它毕竟不是 nil。此外，我的子视图控制器的插座也有问题的原因是因为我没有使用 iOS5 中的视图控制器容器方法（DidMoveParentViewController 和那些）。

有点棘手。

# javascript - Captcha IMG/数字组合

> ID：10002003
> 
> 赞同：0
> 
> 时间：2012-04-03T21:56:12.943
> 
> 标签：javascript, javascript-events

我正在尝试用 Javascript 创建验证码，但遇到了问题。我希望 CAPTCHA 随机显示声明的图像之一，然后根据图像上的文本验证用户输入。到目前为止，我有下面的代码，它没有显示任何内容。

```
<script type="text/javascript"> 
    var "<img src="images/ci0.jpg" />" = 56777;
    var "<img src="images/ci1.jpg" />" = 67646;      
    var "<img src="images/ici2.jpg" />" = 77666;           
 var code = ci0, ci1, ci2;
 document.getElementById("txtCaptcha").value = code;
  document.getElementById("txtCaptchaDiv").innerHTML = code;
  </script> 
```

HTML

```
 <div id="left">

         <label for="code">Enter code next  <span id="txtCaptchaDiv" style="color:#F00"></span><br />
<!-- this is where the script will place the generated code -->
          <input type="hidden" id="txtCaptcha" /></label>

          </div><!-- End Left -->
        <div id="righty">
        <span id="spryconfirm1">
        <label>
          <input type="text" name="checker" id="checker" />
        </label>
        <span class="confirmRequiredMsg">You must enter the Code.</span><span class="confirmInvalidMsg">The values don't match.</span></span>

        </div><!-- End righty -->  

       </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T22:06:39.300

顺便说一句，我认为您应该使用[reCAPTCHA](http://www.google.com/recaptcha)，因为在您自己创建 CAPTCHA 验证器之前还有很长的路要走。这不仅是客户端的问题，也是您已经忽略的服务器端的问题。

获取 reCAPTCHA 嵌入代码并在您的 HTML 中使用它。

# java - 如何指定特定的 JAXB 实现？

> ID：10002006
> 
> 赞同：21
> 
> 时间：2012-04-03T21:56:20.597
> 
> 标签：java, jakarta-ee, jboss, jaxb

好像我过去已经这样做过一次，但我找不到任何关于我为使其工作所做的工作的参考。

我有一个 Web 应用程序，我想在其中指定与我的 Web 服务器/jre 提供的 JAXB 实现不同的 JAXB 实现。我从 maven 下载了适当的工件，并看到 jar 已正确打包在我的 war 中，但是，当我启动我的 web 应用程序时，我看到它仍在使用捆绑的 JRE 实现。

我隐约记得有关我可以配置的属性文件的一些内容，但找不到有关如何配置它的参考。此外，如果我要使用的实现是相同的（只是一个较新的版本），则类名将与打包在 JRE 中的相同。如何指定我想使用我的 WAR 中捆绑的那些？

**编辑**

我目前在 JBoss 7.0.2 上运行，使用 Oracle JDK 1.6_0_27，JRE 附带的 JAXB RI（我认为它是 v2.1）。我正在尝试升级到 JAXB RI 2.2.5（在 MvnRepository 上找到）。

今天早上我做了更多的挖掘工作，并在我的日志中发现了一条奇怪的错误消息：

```
09:43:18,325 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-12) Class Path entry jaxb-api.jar in "/C:/servers/jboss-as-7.0.2.Final/standalone/deployments/LendingSimulationServiceEAR.ear/LendingSimulationService.war/WEB-INF/lib/jaxb-impl-2.2.5.jar"  does not point to a valid jar for a Class-Path reference.
09:43:18,325 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-12) Class Path entry activation.jar in "/C:/servers/jboss-as-7.0.2.Final/standalone/deployments/LendingSimulationServiceEAR.ear/LendingSimulationService.war/WEB-INF/lib/jaxb-impl-2.2.5.jar"  does not point to a valid jar for a Class-Path reference.
09:43:18,326 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-12) Class Path entry jsr173_1.0_api.jar in "/C:/servers/jboss-as-7.0.2.Final/standalone/deployments/LendingSimulationServiceEAR.ear/LendingSimulationService.war/WEB-INF/lib/jaxb-impl-2.2.5.jar"  does not point to a valid jar for a Class-Path reference.
09:43:18,326 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-12) Class Path entry jaxb1-impl.jar in "/C:/servers/jboss-as-7.0.2.Final/standalone/deployments/LendingSimulationServiceEAR.ear/LendingSimulationService.war/WEB-INF/lib/jaxb-impl-2.2.5.jar"  does not point to a valid jar for a Class-Path reference. 
```

我觉得很奇怪。我不确定它在哪里找到这些信息。更多研究在 MANIFEST.MF 中发现了这一行：

```
Class-Path: jaxb-api.jar activation.jar jsr173_1.0_api.jar jaxb1-impl.jar 
```

所以现在我比以往任何时候都更加困惑。看起来 jaxb 实现依赖于 api、activation、jsr 和 jaxb1 实现 jar。但是它们没有在 jaxb pom 中列出。在网上稍微挖掘了一下，我发现了[这个链接](http://jaxb.java.net/guide/Migrating_JAXB_2_0_applications_to_JavaSE_6.html)，它讨论了如何在 Java6SE 环境中使用 JAXB 2.2。不幸的是，这似乎也不起作用。我仍然收到上述警告消息。

我正在使用以下代码段列出正在运行的 JAXB 实现；也许这是不正确的？

```
/**
 * Print the JAXB Implementation information
 */
public static void outputJaxpImplementationInfo() {
    logger.debug(getImplementationInfo("DocumentBuilderFactory", DocumentBuilderFactory.newInstance().getClass()));
    logger.debug(getImplementationInfo("XPathFactory", XPathFactory.newInstance().getClass()));
    logger.debug(getImplementationInfo("TransformerFactory", TransformerFactory.newInstance().getClass()));
    logger.debug(getImplementationInfo("SAXParserFactory", SAXParserFactory.newInstance().getClass()));
}

/**
 * Get the JAXB implementation information for a particular class
 * @param componentName
 * @param componentClass
 * @return
 */
private static String getImplementationInfo(String componentName, Class componentClass) {
    CodeSource source = componentClass.getProtectionDomain().getCodeSource();
    return MessageFormat.format(
            "{0} implementation: {1} loaded from: {2}",
            componentName,
            componentClass.getName(),
            source == null ? "Java Runtime" : source.getLocation());
} 
```

此代码段生成以下日志：

```
10:28:27,402 INFO  [stdout] (MSC service thread 1-14) 2012-04-04 10:28:27,402 DEBUG cws.cs.lendingsimulationservice.util.JAXBUtil  - DocumentBuilderFactory implementation: __redirected.__DocumentBuilderFactory loaded from: file:/C:/servers/jboss-as-7.0.2.Final/jboss-modules.jar
10:28:27,403 INFO  [stdout] (MSC service thread 1-14) 2012-04-04 10:28:27,403 DEBUG cws.cs.lendingsimulationservice.util.JAXBUtil  - XPathFactory implementation: __redirected.__XPathFactory loaded from: file:/C:/servers/jboss-as-7.0.2.Final/jboss-modules.jar
10:28:27,404 INFO  [stdout] (MSC service thread 1-14) 2012-04-04 10:28:27,404 DEBUG cws.cs.lendingsimulationservice.util.JAXBUtil  - TransformerFactory implementation: __redirected.__TransformerFactory loaded from: file:/C:/servers/jboss-as-7.0.2.Final/jboss-modules.jar
10:28:27,406 INFO  [stdout] (MSC service thread 1-14) 2012-04-04 10:28:27,406 DEBUG cws.cs.lendingsimulationservice.util.JAXBUtil  - SAXParserFactory implementation: __redirected.__SAXParserFactory loaded from: file:/C:/servers/jboss-as-7.0.2.Final/jboss-modules.jar 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-03T23:19:20.010

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB 2 (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

要指定除默认值之外的 JAXB (JSR-222) 实现，您需要包含一个`jaxb.properties`在与域类相同的包中调用的文件。以下是`jaxb.properties`用于指定 JAXB 的 MOXy 实现的文件示例：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-22T08:21:09.973

[可以使用Java Endorsed Standards Override Mechanism](http://docs.oracle.com/javase/6/docs/technotes/guides/standards/)从特定库加载 JAXB 实现。[指南Using JAXB 2.1/2.2 with JavaSE 6](https://jaxb.java.net/guide/Migrating_JAXB_2_0_applications_to_JavaSE_6.html)中也建议了这一点。

或者，在您的应用程序服务器中，您可以将应用程序的类加载器策略修改为最后一个父级，以便首先在与您的应用程序捆绑的库中查找类，然后再在 JRE 中进行搜索。

# mysql - 如何限制一次插入 INSERT INTO 的记录数

> ID：10002016
> 
> 赞同：1
> 
> 时间：2012-04-03T21:57:00.437
> 
> 标签：mysql, mysql5

我想像这样插入我的数据库。但是表格中可能有 200k+ 条记录。我想将插入分成 10,000 个左右的组，我怎样才能只在 MySQL 中有效地做到这一点？

```
INSERT INTO `slugs` (`sku`, `tablename`)
select `SKU`, 'tableA'
from `tableA`
WHERE `SKU` NOT IN
(select `sku` from `slugs` where `tablename` = 'tableA'); 
```

示例代码： [http ://sqlfiddle.com/#!2/a75a1/8](http://sqlfiddle.com/#!2/a75a1/8)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:11:05.663

在末尾添加 a`LIMIT 10000`并运行它，直到插入的行数 = 0。

如果不是一次性的，您可以在一个循环的过程中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T22:23:08.353

尝试这个：

```
SET @rank=0;
select rank
, IF(MOD(rank,10000)=0,CONCAT(IF(MOD(rank,10000)=1,CONCAT("insert ignore into table values (""",NAME,""",""",SKU,""")"),CONCAT(",(""",NAME,""",""",SKU,""")")),";"),IF(MOD(rank,10000)=1,CONCAT("insert ignore into table values (""",NAME,""",""",SKU,""")"),CONCAT(",(""",NAME,""",""",SKU,""")"))) as insert_statement
from (
SELECT @rank:=@rank+1 AS rank,NAME,SKU
from tablea 
) der 
```

# request - signed_request 中缺少页面数组

> ID：10002018
> 
> 赞同：1
> 
> 时间：2012-04-03T21:57:05.347
> 
> 标签：request, facebook-php-sdk, signed

我在 heroku 上创建并托管了一个页面选项卡应用程序。当普通用户单击页面上的选项卡时，页面会加载并要求用户登录。我按下登录按钮并加载页面，但签名的请求缺少页面数组。

```
Facebook Object ( 
   [appId:protected] => 110227059110031 
   [appSecret:protected] => 365d05bfd0eac475a2b91c88c9bc8136 
   [user:protected] => 100003680202334 
   [signedRequest:protected] => Array ( 
         [algorithm] => HMAC-SHA256 
         [code] => 2.AQDVPZFl6Emi1.3600.1333494000.003680202334|Chl0OfvzKbOA_8sAi1J3h3xeqwk 
         [issued_at] => 1333489589 
         [user_id] => 100003680202334 ) 
   [state:protected] => 
   [accessToken:protected] => 
   [fileUploadSupport:protected] => ) 
```

它缺少 [page] => Array ([id] => 125391070851681 [liked] => [admin] => 1)

如果我使用开发人员帐户进入页面，它会显示页面数组。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:05:01.310

这通常发生在您使用 http 访问 facebook 但 facebook 使用 https 或其他方式加载您的应用程序的内容时。如果您使用 heroku 提供的模板应用程序，只需注释掉代码的“强制 https”部分。

# r - 将数据框拆分为多个输出文件

> ID：10002021
> 
> 赞同：16
> 
> 时间：2012-04-03T21:57:32.903
> 
> 标签：r, split, dataframe

我有大数据集（但以下是小数据集）。我可以拆分数据框，然后我想输出到与用于拆分的 lavel 对应的多个文本文件。

```
mydata <- data.frame (var1 = rep(c("k", "l", "c"), each = 5), var2 = rnorm(5), 
      var3 = rnorm(5))
mydata    
   var1       var2       var3
1     k  0.5406022  0.3654706
2     k -0.6356879 -0.9160001
3     k  0.2946240 -0.1072241
4     k -0.2609121  0.1036626
5     k  0.6206579  0.6111655
6     l  0.5406022  0.3654706
7     l -0.6356879 -0.9160001
8     l  0.2946240 -0.1072241
9     l -0.2609121  0.1036626
10    l  0.6206579  0.6111655
11    c  0.5406022  0.3654706
12    c -0.6356879 -0.9160001
13    c  0.2946240 -0.1072241
14    c -0.2609121  0.1036626
15    c  0.6206579  0.6111655 
```

现在拆分

```
> spt1 <- split(mydata, mydata$var1) 

> spt1

$c
   var1       var2       var3
11    c  0.5406022  0.3654706
12    c -0.6356879 -0.9160001
13    c  0.2946240 -0.1072241
14    c -0.2609121  0.1036626
15    c  0.6206579  0.6111655

$k
  var1       var2       var3
1    k  0.5406022  0.3654706
2    k -0.6356879 -0.9160001
3    k  0.2946240 -0.1072241
4    k -0.2609121  0.1036626
5    k  0.6206579  0.6111655

$l
   var1       var2       var3
6     l  0.5406022  0.3654706
7     l -0.6356879 -0.9160001
8     l  0.2946240 -0.1072241
9     l -0.2609121  0.1036626
10    l  0.6206579  0.6111655 
```

`outputc`我想以、`outputk`和的名义写表`outputl`。因此输出是公共前缀，后跟用于分组变量的标签名称。

```
write.table (spt1) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-03T22:11:04.740

在 spt1 的名称上使用 lapply 将允许我们访问 spt1 中的数据帧以及我们可以在 paste 中使用的名称来创建我们的文件。

```
lapply(names(spt1), function(x){write.table(spt1[[x]], file = paste("output", x, sep = ""))}) 
```

如果需要，您可以在粘贴中添加通用扩展名。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-05-19T16:03:35.300

您还可以使用非常快速的`data.table`解决方案。在这种情况下，无需将 拆分`dataframe`为`list`.

```
library(data.table) # v1.9.7 (devel version)

setDT(mydata) # convert your dataframe into a data.table

# save files
  mydata[, fwrite(.SD, paste0("output", var1,".csv")), by = var1] 
```

如果你想保留`var1`输出，你可以这样做：

```
mydata[, fwrite(copy(.SD)[, var1 := var1] paste0("output", var1,".csv")), by = var1] 
```

附言。请注意，此答案使用`fwrite`，它仍处于开发版本中`data.table`。[转到此处获取安装说明](https://github.com/Rdatatable/data.table/wiki/Installation)。您可以简单地使用`write.csv`or `write.table`，但是您可能想要一个快速的解决方案，以防您处理大型数据集，并且`fwrite`肯定[是最快的替代方案之一](https://stackoverflow.com/questions/10505605/speeding-up-the-performance-of-write-table)。

# iphone - 从父视图中删除图像

> ID：10002026
> 
> 赞同：0
> 
> 时间：2012-04-03T21:57:57.147
> 
> 标签：iphone, objective-c, uitableview, uinavigationcontroller

在我的 iPhone 应用程序中，我有一个表格视图，如果该对象的“isConfirmed”值为真，我会在其中向单元格添加刻度图像。进入详细视图时，我可以编辑确认的值，并且在弹出回主表视图时，我需要查看更新，而不仅仅是在我重新查看主表时。

所以我在我的方法中使用了这段代码`tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`：

```
UIImageView *tickImg = nil;

    //If confirmed add tick to visually display this to the user
    if ([foodInfo.isConfirmed boolValue])
    {
        tickImg = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"ConfirmedTick.png"]];
        [tickImg setFrame:CGRectMake(0, 0, 32, 44)];
        [cell addSubview:tickImg];
    }
    else 
    {
        [tickImg removeFromSuperview];
    } 
```

这是做什么的，它成功地将刻度图像添加到我的具有真实值的单元格中`isConfirmed`，当进入对象的详细视图并将其设置为 TRUE 并重新调整时，刻度出现，但是我无法让它工作其他，所以如果有勾号并且我进入详细视图未确认它，勾号不会消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:12:42.747

这是如果`[foodInfo.isConfirmed boolValue]`为 false 时执行的代码：

```
UIImageView *tickImg = nil;
[tickImg removeFromSuperview]; 
```

显然这不起作用——tickImg 没有指向 UIImageView。您需要以某种方式保存对 UIImageView 的引用。您可以将 tickImg 变量添加到类的标题或使其成为属性或其他东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:12:43.527

你在打电话 [self.tableView reloadData]; 对VC的看法WillAppear：？

此外，您用于配置单元的方法容易出错。由于 tableView 正在重用单元格，因此当您将其出列时，您无法确定单元格处于什么状态。

更好的方法是一致地构建单元：

```
static NSString *CellIdentifier = @"MyCell";
UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    // always create a tick mark
    UIImageView *tickImg = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"ConfirmedTick.png"]];
    tickImg.tag = kTICK_IMAGE_TAG;
    tickImg.frame = CGRectMake(0, 0, 32, 44);
    [cell addSubview:tickImg];
}

// always find it
UIImageView *tickImg = (UIImageView *)[cell viewWithTag:kTICK_IMAGE_TAG];

// always show or hide it based on your model
tickImg.alpha = ([foodInfo.isConfirmed boolValue])? 1.0 : 0.0;

// now your cell is in a consistent state, fully initialized no matter what cell
// state you started with and what bool state you have 
```

# git - 如何检查特定文件夹对应的存储库

> ID：10002030
> 
> 赞同：1
> 
> 时间：2012-04-03T21:58:13.110
> 
> 标签：git

我的机器上有几个非常相似的文件夹，它们对应于存储在 github 上的不同存储库。

如何查看特定文件夹对应的git地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:01:21.727

您可以`git remote -v`在文件夹中运行以列出在本地存储库中注册的远程。'origin' 遥控器是由 'git clone' 设置的，所以这就是你要找的那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:02:21.977

您可以使用：

```
git remote show origin 
```

# java - 比较Java中的整数值，奇怪的行为

> ID：10002037
> 
> 赞同：26
> 
> 时间：2012-04-03T21:58:50.980
> 
> 标签：java

与我同行 ..

```
Integer x = 23;
Integer y = 23;

if (x == y)
    System.out.println("what else");      // All is well as expected
else
    System.out.println("..."); 
```

尽管

```
Integer x = someObject.getIndex();
Integer y = someOtherObject.getSomeOtherIndex();

if (x == y)
    System.out.println("what else");  
else
    System.out.println("...");        // Prints this 
```

嗯...我尝试转换为 int

```
int x = someObject.getIndex();
int y = someOtherObject.getSomeOtherIndex()

if (x == y)       
    System.out.println("what else");   // works fine
else
    System.out.println("..."); 
```

它们都是整数吗？

```
System.out.println(x.getClass().getName());              // java.lang.Integer
System.out.println(y.getClass().getName());              // java.lang.Integer
System.out.println(someObject.getIndex());               // java.lang.Integer
System.out.println(someOtherObject.getSomeOtherIndex()); // java.lang.Integer 
```

**你们有什么感想？什么可以解释这样的事情？**

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-03T22:00:40.073

您正在比较`Integer`值，即参考值。您将通过自动装箱提出这些参考。对于某些值（保证为 -128 到 127），JRE 维护`Integer`对象缓存。对于更高的值，它不会。从[JLS 的第 5.1.7 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.7)：

> 如果被装箱的值 p 是真、假、一个字节或 \u0000 到 \u007f 范围内的一个字符，或者一个介于 -128 和 127（含）之间的 int 或短数字，则令 r1 和 r2 为p 的任意两个拳击转换。r1 == r2 总是如此。
> 
> 理想情况下，对给定的原始值 p 进行装箱将始终产生相同的参考。在实践中，使用现有的实现技术这可能是不可行的。上述规则是一种务实的妥协。上面的最后一个条款要求某些常见的值总是被装箱到无法区分的对象中。实现可能会懒惰地或急切地缓存这些。对于其他值，此公式不允许程序员对装箱值的身份进行任何假设。这将允许（但不要求）共享部分或全部这些引用。
> 
> 这确保了在最常见的情况下，行为将是期望的行为，而不会造成过度的性能损失，尤其是在小型设备上。例如，内存限制较少的实现可能会缓存所有 char 和 short 值，以及 -32K 到 +32K 范围内的 int 和 long 值。

`Integer`道德：当您对潜在`int`价值感兴趣时，不要比较参考资料。首先使用`.equals()`或获取`int`值。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-03T22:02:09.367

要正确比较整数，您需要通过强制转换或调用它们来使用`.equals()`或比较它们的原始值。`int``intValue()`

Using`==`检查两个 Integer 是否是*相同的 Object*，而不是检查它们是否包含*相同的数值*。

```
 Integer a = new Integer(1);
    Integer b = new Integer(1);

    System.out.println(a.equals(b));                  //true
    System.out.println((int)a == (int)b);             //true
    System.out.println(a.intValue() == b.intValue()); //true
    System.out.println(a == b);                       //false 
```

**编辑**以说明 JLS 关于自动装箱的 Jon 的观点：

```
 Integer a = 1;
    Integer b = 1;
    System.out.println(a.equals(b));                  //true
    System.out.println((int)a == (int)b);             //true
    System.out.println(a.intValue() == b.intValue()); //true
    System.out.println(a == b);                       //true 
```

相对：

```
 Integer a = 128;
    Integer b = 128;
    System.out.println(a.equals(b));                  //true
    System.out.println((int)a == (int)b);             //true
    System.out.println(a.intValue() == b.intValue()); //true
    System.out.println(a == b);                       //false 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T22:02:02.787

`==`当您在两个整数上使用时，听起来自动装箱很时髦。

`Integer`如果您使用该方法，我会假设它在使用时可以正常工作`equals()`？无论如何，这将是我的猜测。

您没有使用 java 1.4 还是什么？

# php - 需要帮助匹配 PHP 数组中的精确字符串

> ID：10002047
> 
> 赞同：1
> 
> 时间：2012-04-03T21:59:39.153
> 
> 标签：php, arrays, preg-match, strpos

我有一个文本文件，其中包含项目编号（每行一个）。当我们的条形码扫描仪扫描一个项目时，如果它在订单中存在，它就会被放入这个文本文件中（它存储在一个数组中......只有项目编号，没有别的）。

发生的事情是，如果我有两个项目编号：

C0DB-9700-W C0DB-9700-WP

如果我先扫描 C0DB-9700-W 项目，那么我可以正常扫描第二个项目，但如果我先扫描 C0DB-9700-WP，它认为我已经扫描了 C0DB-9700-W，因为该项目是我已经扫描过的项目的前缀。

我知道 strpos 只检查第一次出现。我正在使用以下代码：

`if (strpos($file_array, $submitted ) !==FALSE) {`

我改用：

`if (preg_match('/'.$submitted.'/', $file_array)) {`

我认为通过使用 preg_match 我可以克服这个问题，但显然不是。我只想让 PHP 对照数组中的项目（我从文件中获取）检查我给它的 EXACT 字符串，看看它是否已经被扫描。在我看来这并不难，但显然我在这里遗漏了一些东西。我怎样才能哄 PHP 寻找整个字符串，而不是在它找到足够好的东西（或者至少它认为足够好的东西）时放弃？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T22:01:41.393

只需使用[in_array](http://us.php.net/manual/en/function.in-array.php)：

```
if (in_array($submitted, $file_array)) 
```

仅供参考，您的正则表达式缺少开始/结束锚点（第二个参数需要是字符串，而不是数组）：

```
preg_match('/^'.$submitted.'$/', $subject) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T22:02:08.803

包含匹配 for 并没有什么*不准确*的地方。您正在寻找的是一个正则表达式，它确保您想要的字符串本身就是一个完整的单词：`C0DB-9700-WP``C0DB-9700-W`

```
if (preg_match('/\\b'.$submitted.'\\b/', $file_array)) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T22:04:58.740

对于一组项目`$file_array`：

```
if (in_array($submitted, $file_array)) {
    // Do something...
} 
```

尽管在您的示例中，您的示例看起来像是`$file_array`一个字符串，因此您希望这样做：

```
$file_array = explode("\n", $file_array); 
```

# javascript - jQuery ajax 成功事件奇怪地不适用于 ajaxSetup

> ID：10002048
> 
> 赞同：2
> 
> 时间：2012-04-03T21:59:42.783
> 
> 标签：javascript, jquery, ajax

**背景：**

*   使用 jQuery 1.7 客户端
*   PHP服务器端
*   使用带有 json_encode php 函数的 json 响应
*   内容类型标头是正确的，其中任何一个都有效：text/plain、text/x-json、application/json。
*   我的 php 代码没有抛出任何错误
*   我正在开发 Firefox 11
*   我正在使用 js 控制台和其他 Web 的开发人员工具
*   HTTP/1.1 200 正常

在这段 Javascript 代码中，该`success`事件永远不会被触发：

```
$.ajaxSetup({cache:false,
        success:function(d) {
            console.log("ok from setup with data "+d.toSource())
        },
        complete:function(xhr,ts){
            console.log("Ajax finished reponse:"+xhr.responseText)
        },
        error:function(jqXHR, textStatus, errorThrown){
            console.log("Error")
        }
});
$.getJSON("test2.php",{},function(data){
    //some code here
}); 
```

当我这样做时，它可以工作：

```
$.ajaxSetup({cache:false,                
        complete:function(xhr,ts){
            console.log("Ajax completado con:"+xhr.responseText)
        },
        error:function(jqXHR, textStatus, errorThrown){
            console.log("Error")
        }
});
$.getJSON("test2.php",{},
     function(data){
            //some code here
     }).success(function(d){
            console.log("success applied directly, data "+d.toSource())
        }
); 
```

在这两种情况下，总是会触发完整事件，而永远不会触发错误。 **但是，在第二个代码中，成功被触发。** 显然`.get()`方法是一样的。

### PHP代码：

```
<?php header("Content-Type:application/json;charset=utf-8");
    //or whatever text/x-json text/plain, even text/html, jquery do the dirty job
echo json_encode(array("stat"=>"1")) ?> 
```

**我的目标：**

1.  我想向所有 ajax 请求触发相同的成功事件
2.  我想在我的成功事件中使用请求返回的 json*数据*，如果可能的话，无需*再次将原始 jqXHR responseText 转换为 json*

这个问题很奇怪，有什么想法吗？

* * *

我阅读了所有这些问题：

*   [Ajax 成功事件不起作用](https://stackoverflow.com/questions/1969476/ajax-success-event-not-working)
*   [AjaxSetup 从不执行成功函数](https://stackoverflow.com/questions/7390454/ajaxsetup-never-execute-the-success-function)
*   [jQuery ajaxSetup 方法是否不适用于 $.get 或 $.post？](https://stackoverflow.com/questions/2542939/does-jquery-ajaxsetup-method-not-work-with-get-or-post)
*   [$.ajax 函数成功：不触发](https://stackoverflow.com/questions/1407905/ajax-functions-success-not-firing)

而且我很确定它们都不是我的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T22:18:57.193

看看 ajaxSetup 文档：[http ://api.jquery.com/jQuery.ajaxSetup/](http://api.jquery.com/jQuery.ajaxSetup/)

> 注意：全局回调函数应该使用它们各自的全局 Ajax 事件处理方法来设置——.ajaxStart()、.ajaxStop()、.ajaxComplete()、.ajaxError()、.ajaxSuccess()、.ajaxSend()——而不是在内部$.ajaxSetup() 的选项对象。

我认为那是你的问题。

更新

如果您希望您的 ajax 处理程序对于页面上的*任何*ajax 请求都是全局的，请执行以下操作：

```
$(document).ajaxSuccess(function(d){
    console.log("ok from setup with data "+d.toSource());
}); 
```

# jquery - Jquery Country/State Json 等

> ID：10002053
> 
> 赞同：0
> 
> 时间：2012-04-03T21:59:57.957
> 
> 标签：jquery

我想要完成的是以下内容：

我有一个国家盒子。

```
<select class="country singleListBox" name="Country">
    <option value="UNITED STATES">UNITED STATES</option>
    <% Call GetCountry %>
</select> 
```

GetCountry 所做的只是用客户端启用的国家/地区填充它。

我有一个状态框。

```
<select class="autoship singleListBox" name="State">
    <option value="active">Utah</option>
</select> 
```

我有一个构建 JSON 的页面，该页面将包含所选国家/地区的州列表，或者返回一个空值。

这是它看起来不为空的样子：

```
{
    "regions": [
        {
            "region": "AK"
        },
        {
            "region": "AL"
        },
        {
            "region": "AR"
        },
        {
            "region": "AS"
        },
        {
            "region": "AZ"
        },
        {
            "region": "CA"
        },
        {
            "region": "CO"
        },
        {
            "region": "CT"
        },
        {
            "region": "DE"
        },
        {
            "region": "DC"
        },
        {
            "region": "FM"
        },
        {
            "region": "FL"
        },
        {
            "region": "GA"
        },
        {
            "region": "GU"
        },
        {
            "region": "HI"
        },
        {
            "region": "ID"
        },
        {
            "region": "IL"
        },
        {
            "region": "IN"
        },
        {
            "region": "IA"
        },
        {
            "region": "KS"
        },
        {
            "region": "KY"
        },
        {
            "region": "LA"
        },
        {
            "region": "ME"
        },
        {
            "region": "MH"
        },
        {
            "region": "MD"
        },
        {
            "region": "MA"
        },
        {
            "region": "MI"
        },
        {
            "region": "MN"
        },
        {
            "region": "MS"
        },
        {
            "region": "MO"
        },
        {
            "region": "MT"
        },
        {
            "region": "NE"
        },
        {
            "region": "NV"
        },
        {
            "region": "NH"
        },
        {
            "region": "NJ"
        },
        {
            "region": "NM"
        },
        {
            "region": "NY"
        },
        {
            "region": "NC"
        },
        {
            "region": "ND"
        },
        {
            "region": "MP"
        },
        {
            "region": "OH"
        },
        {
            "region": "OK"
        },
        {
            "region": "OR"
        },
        {
            "region": "PW"
        },
        {
            "region": "PA"
        },
        {
            "region": "PR"
        },
        {
            "region": "RI"
        },
        {
            "region": "SC"
        },
        {
            "region": "SD"
        },
        {
            "region": "TN"
        },
        {
            "region": "TX"
        },
        {
            "region": "UT"
        },
        {
            "region": "VT"
        },
        {
            "region": "VI"
        },
        {
            "region": "VA"
        },
        {
            "region": "WA"
        },
        {
            "region": "WV"
        },
        {
            "region": "WI"
        },
        {
            "region": "WY"
        },
        {
            "region": "AA"
        },
        {
            "region": "AE"
        },
        {
            "region": "AP"
        }
    ]
} 
```

这是它看起来像空的样子：

```
{
    "regions": [
        {
            "region": "empty"
        }
    ]
} 
```

我想要做的是，当他们更改它发布到我的 json 页面的 Country 的值时，并吐回找到的区域，或者留下字符串值为空的区域。

对我来说，诀窍是如果它返回一个我需要将其构建到上述`select -> option`部分的区域列表。但是如果它返回空，那么我需要一个`input box here of type text`来代替`select -> option`.

实现这一目标的最佳方式/最佳实践是什么？当他们更改国家/地区时，我可以处理 JSON 的发布，我认为我会遇到麻烦的部分是当区域为空时切换输入的选择。

我试图将其解析为一个 jquery 对象，但没有取得多大成功。

```
$('select[name=Country]').change(function () {
                console.log(this.value);
                $.getJSON('message_center_getRegions.asp', { country: this.value }, function (json) {
                var options = '';
                var obj = $.parseJSON(json);
                console.log('count' + obj.regions.count);
                console.log(json); 
            }) 
```

我`console.log(json)`和它显示了一个具有 62 个不同区域的对象。当我选择一个我在数据库中没有区域的国家时，它正确地将其显示为空。我似乎无法让 obj 不为 null`console.log('count' + obj.regions.count);`说`obj is null`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:04:10.377

理想情况下，如果没有区域，则响应不应返回

```
"regions" : [ { "region" : "empty" } ] 
```

它应该只返回一个像这样的空列表

```
"regions" : [] 
```

现在，当您将 JSON 解析为 Javascript 对象时，`regions.count`将为 0。

所以，

```
// parse response into JS object

if (regions.count > 0)
{
    //create select element here
}
else
{
    //input element here
} 
```

# asp.net - 将表从另一个数据库添加到 ASP.NET 动态数据 + 实体框架

> ID：10002057
> 
> 赞同：0
> 
> 时间：2012-04-03T22:00:28.560
> 
> 标签：asp.net, entity-framework, dynamic-data, asp.net-dynamic-data

我在另一个数据库中有一个表，我想通过 ASP.NET 动态数据构建并合并到我现有的实体模型中 - 有没有办法做到这一点？（例如，使用视图或其他机制，或者通过 ad-hoc SQL 或存储过程自定义视图、编辑或插入操作？）

我不想复制整个 DynamicData 子文件夹结构并仅为一个表创建另一个实体模型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:16:25.917

我能够通过使用 DefiningQuery 在 .edmx 文件的 SSDL 和 CSDL 部分手动创建实体，然后为我的实体类定义 EntitySets 来解决这个问题

我还使用 CommandText 属性将插入/更新/删除函数元素添加到带有内联 SQL 的 SSDL

此时我已经足够让 Designer 将 CRUD 方法映射到我定义的这些内联 SQL 函数

这有点棘手，但它很有效，而且一般方法开辟了许多我没有想到的可能性

# django - Django：鸭子打字友好的接受记录或记录的输入方式

> ID：10002062
> 
> 赞同：1
> 
> 时间：2012-04-03T22:00:35.413
> 
> 标签：django, duck-typing

我有这样的功能：

```
def foo(bar):
    ... 
```

现在`bar`可以是 Django 记录，也可以是指向记录的 slug。我需要这种灵活性，以便当我手头有实际记录时可以调用这个函数，或者从一个更通用的函数调用这个函数，该函数只有 bar 作为字符串可用（从数据库中提取）。

我意识到我可以做类似的事情：

```
def foo(bar):
    try:
        bar.pk
    except AttributeError:
        bar = Bar.objects.get(slug=bar)
    ... 
```

但这似乎一点也不优雅*。*

如果可以的话，我想避免使用 isinstance。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T23:05:20.840

根据定义，您不使用 Duck Typing。Duck Typing 说：“如果它说话像鸭子，看起来像鸭子，那就是鸭子。”

Duck Typing 意味着您可以将两个完全不同类的对象传递给该方法并使其工作，因为它们都实现了相同的方法/属性（或优雅地处理丢失的方法/属性）。这意味着该方法从不关心它得到什么类型，只关心传递给它的任何对象都具有它期望使用的属性。

在您的情况下，您有时想传递一个对象和一个可用于在其他时间查找所述对象的字符串。这与 Duck Typing 无关。

isinstance 是解决这个问题的正确方法。在这种情况下，这是解决问题的最清晰方法，其他任何事情都会变得更复杂，更难理解，好处是 0。您可以在属性或 hasattr 上使用 try/except，但这可能会让任何未来的开发人员更加困惑。Duck Typing 很棒，它取代了强制转换各种子类以匹配某些特定功能，但在这种情况下，Duck Typing 并不适用。

简而言之。只需使用 isinstance。对于您的情况，这是正确的（pythonic）方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:07:07.813

我不确定这是一种糟糕的处理方式，但如果我想做类似的事情，我可能会使用`hasattr`：

```
def foo(bar):
    if hasattr(bar,"pk"):
        bar.pk
    else:
        # I include the str in case some other object with a __str__ happens
        # to come through.
        bar = Bar.objects.get(slug=str(bar)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T01:45:48.813

这是另一种方法，可以帮助您执行相同的其他功能。我假设您使用的模型名称是“项目”。

```
def slug_resilient_decorator(class_type):

    def slug_resilient_wrapper(obj):

            if obj.has_attr('pk'):
                    return obj
            else:
                    return class_type.objects.get(slug=obj)

    return wrapper

@slug_resilient_decorator(Item)
def slug_resilient_detail_view(obj):

    ... 
```

# jquery - jquery - 防止这种竞争条件

> ID：10002063
> 
> 赞同：1
> 
> 时间：2012-04-03T22:00:36.313
> 
> 标签：jquery

我在页面上有一堆文本框和一个提交按钮。我已经连接了文本框的 TextChanged 事件以执行服务器端方法。用户在文本框中输入值，跳到下一个文本框（触发 textchanged 事件），最后单击调用另一个服务器端方法的提交按钮。所有功能都是异步的。只有在 textchange 方法完成后才需要执行 submit 方法，因为它们共享相同的数据。问题是有时 textchange 方法需要稍长的时间才能完成，并且在 textchange 函数完成之前触发了 submit 方法。我该如何防止这种情况？如何锁定/排队功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:04:45.037

不要锁定或排队任何东西！只需禁用提交按钮，直到更改事件 + ajax 完成。

```
$('#submitBtn').attr('disabled', 'disabled'); 
```

或者对于 jQuery 1.6+：

```
$('#submitBtn').prop('disabled', true); 
```

当更改 ajax 完成时：

```
$('#submitBtn').attr('disabled', '');//or $('#submitBtn').prop('disabled', false) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:25:11.780

看看 Ben Alman 的 jQuery Queuing 插件[http://benalman.com/projects/jquery-message-queuing-plugin/](http://benalman.com/projects/jquery-message-queuing-plugin/)从它的声音可能是你需要的。

# android - Android Gallery 总是将 RESULT_CANCELED 返回到 onActivityResult

> ID：10002065
> 
> 赞同：2
> 
> 时间：2012-04-03T22:00:38.920
> 
> 标签：android, image, android-intent, gallery

首先，这不是结果代码过早返回的常见问题。在这种情况下，只有在库中挑选了一个项目后才会返回它。

在我的测试用例中，我使用以下代码调用 Gallery：

```
Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(intent,  SELECT_PICTURE); 
```

在 onActivityResult 中有：

```
if (resultCode == Activity.RESULT_OK) {
    if (requestCode == SELECT_PICTURE) {
        Uri selectedImageUri = data.getData();
        pathText.setText(selectedImageUri.getPath());
    }
} else {
    pathText.setText("Result not OK - code is " + resultCode);
} 
```

pathText 只是我放入的一个 TextView，用于在测试用例中显示结果。在实际应用中，路径有不同的用途。

如果我使用 ACTION_PICK 而不是 _GET_CONTENT 我会立即收到其他人报告的失败。清单中没有 launchMode 标记（一些帖子建议该区域存在问题）。

也许这里有一个线索。在 Toshiba Thrive 上，使用图库、文件管理器或鱼缸照片库不会出现此错误。在 Kindle Fire 上，Quickoffice 还能够正确返回图像路径。该错误仅出现在 Kindle 的内置图库中。在“Motorola Droid(2.3.4) , HTC EVO (2.3)”上也观察到了该错误。

请问，如何以适用于所有这些设备的方式从图库中获取图像路径？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-01-01T18:33:10.523

当我在清单中为该活动设置 launchMode="singleInstance" 时，我在其中一项活动中遇到了同样的问题。当我删除该属性时它工作正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T08:35:19.663

我认为，如果您未在返回结果代码的意图中指定，默认情况下图库不会返回结果代码。您可以通过在代码中添加此代码段来指定返回结果代码的意图，如下所示：

```
Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
intent.putExtra("return-data", true); //added snippet
startActivityForResult(Intent.createChooser(intent, "Select Picture"),SELECT_PICTURE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T22:05:21.660

嗨史蒂夫试试这似乎适用于我的壁纸项目

```
Intent intent = new Intent();
        intent.setType("image/*");
        intent.setAction(Intent.ACTION_GET_CONTENT);
        startActivityForResult(Intent.createChooser(intent, "Select Picture"),SELECT_PICTURE); 
```

# php - PHP 检查数组与 Post

> ID：10002069
> 
> 赞同：0
> 
> 时间：2012-04-03T22:00:46.703
> 
> 标签：php, arrays, post

PHP 脚本如何检查一个值是否在数组中？我希望它检查密码输入是否等于数组中的密码。

例如，如果 $input == "pass1" 或 "pass2" 或 "pass3"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T22:04:15.327

来自php手册：

> bool in_array ( mixed $needle , array $haystack [, bool $strict = FALSE ] ) 除非设置了严格，否则使用松散比较搜索 haystack 中的针。

```
if(in_array($input, $somearray)){ .. } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:03:50.977

用于检查变量是否在数组中的 PHP 函数是[`in_array`](http://php.net/manual/en/function.in-array.php).

像这样：

```
if (in_array($input, array("pass1", "pass2", "pass3")) {
 // do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T22:05:50.453

几乎复制了 Marc B 在他的评论中所说的内容，示例代码是

```
<?php
$os = array("Mac", "NT", "Irix", "Linux");
if (in_array("Irix", $os)) {
echo "Got Irix";
}
if (in_array("mac", $os)) {
echo "Got mac";
}
?> 
```

在此示例中，第二个 if 将失败，因为数组中不包含“mac”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T22:05:56.447

有几种方法。`in_array`是一个，`foreach`是另一个。我不知道哪个更快，但您可以这样做`foreach`：

```
foreach ($array as $a) {
 if ($a == "correct password") {
  //do something
 }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-30T16:20:12.357

这是另一种方式，

```
if(count(array_intersect(array($input), array("pass1", "pass2", "pass3"))) > 0){
     //do stuff
} 
```

# c++ - 打印并计算排列数（不使用stl next_permutation）

> ID：10002073
> 
> 赞同：2
> 
> 时间：2012-04-03T22:01:17.790
> 
> 标签：c++, algorithm, stl

我是一名 C 程序员，并试图在 C++ 方面做得更好。我想实现一个置换函数（不使用 STL 算法）。我想出了以下算法（出于我的 C 思维方式），但是

```
a) it crashes for k > 2 (I suppose because the element that the iterator 
   points to, gets deleted, is inserted back and then incremented).
b) erase/insert operation seem unnecessary. 
```

你们中间的 C++ 专家将如何实现它？

```
template <class T>
class Ordering {
    public:
          Ordering(int n);
          int combination(int k);
          int permutation(int k);
    private:
          set<T> elements;
          vector<T> order;
}

template <class T>
int Ordering<T>::permutation (int k) {
    if (k > elements.size()) {
        return 0;
    }

    if (k == 0) {
        printOrder();
        return 1;
    }

    int count = 0;
    for (typename set<T>::iterator it = elements.begin();
        it != elements.end();
        it++
    )
    {
        order[k-1] = *it;
        elements.erase(*it);
        count += permutation(k-1);
        elements.insert(*it);
    }
    return count;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T22:33:57.883

问题在于您对集合的迭代`elements`。您尝试增加已删除的迭代器。那是行不通的。

如果你坚持使用这种方法，你必须`it`在调用之前存储 , 的后继`set::erase`。这意味着您必须将 for 循环的增量部分移动*到*循环中。

像这样：

```
for (typename set<T>::iterator it = elements.begin();
    it != elements.end();
    /* nothing here */
)
{
    order[k-1] = *it;
    typename set<T>::iterator next = it;
    ++next;
    elements.erase(*it);
    count += permutation(k-1);
    elements.insert(order[k-1]);
    it = next;
} 
```

* * *

编辑：从您的集合中临时“删除”对象的一种可能方法是使用 a`std::set<std::pair<T,bool>>`并简单地写入`it->second = false`and after `it->second = true`。然后，在迭代时，您可以*跳过*第二个值为 的条目`false`。这增加了一些开销，因为您在下降时必须做更多的工作。但是插入+删除元素每次都会增加对数开销，这可能更糟。

如果您使用（自定义）链接列表（也许您甚至可以`std::list`这样做），您可以非常便宜地删除和重新插入对象。

# c++ - 从 STL 映射迭代器中获取字段

> ID：10002074
> 
> 赞同：2
> 
> 时间：2012-04-03T22:01:18.717
> 
> 标签：c++, map, iterator, std-pair

我有一个地图容器来存储某些对象，以及它们的名称和类型：

```
typedef std::map<std::string, std::pair<ObjType, ObjBase*> > ObjContainer; 
```

但是，在代码的许多部分中，都有这样的结构：

```
ObjContainer::iterator it = mObjContainer.find(name);
if (it != mObjContainer.end()) {
    if (it->second.second) {
        it->second.second->setObj2Default();
        delete it->second.second;
        it->second.second = 0;
    }
} 
```

显然，很多“it->second.second”不是很清楚，而且无法维护。如果以后改了，比如多支持一个领域，就全断了。因此，我试图通过函数来​​更改它们以访问字段，如下所示：

```
ObjBase*& getObjPtr(ObjContainer::iterator it) {
    return it->second.second;
} 
```

同样，还有函数 getObjName 和 getObjType。

还有人建议我让迭代器返回这些字段会更清楚：

```
 it.objPtr();
 it.objName();
 it.objType(); 
```

但我认为不应继承 STL 迭代器以具有这些功能，对吗？除了为地图创建一个包装器并拥有自己的带有这些函数的迭代器外，我没有其他方法可以做到这一点。

那么，最合适的选择是什么？有没有其他方法可以解决我没有看到的这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T22:10:46.707

如果最大的问题是可维护性，我会将 std::pair 替换为将 ObjType 和 ObjBase* 包装为一个的自定义类/结构。

*   在组合中添加新字段很容易
*   访问结构字段 ObjType 和 ObjPair 很容易
*   为处理 ObjType 和 ObjPair 的类编写 getter/setter/其他函数很容易

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T22:08:57.180

我只是制作指针（或引用）的本地副本 - 无论如何它可能会被优化：

```
ObjContainer::iterator const it = mObjContainer.find(name);
if (it != mObjContainer.end())
{
    ObjBase * & p = it->second.second;
    if (p) { p->foo(); delete p; p = NULL; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T22:09:31.247

使用引用来简化语法。

```
ObjContainer::iterator it = mObjContainer.find(name);
if (it != mObjContainer.end()) {
    std::pair<ObjType, ObjBase*> & ref = it->second;
    if (ref.second) { // ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T22:35:37.457

我首先会问自己 ObjType 在那里是否是强制性的。如果目的只是说明该对的第二个 ObjBase* 参数实际指向的是哪种类，请使用`dynamic_cast`并删除该对。

```
typedef std::map<std::string, ObjBase*> ObjContainer; 
```

代码中不再有`second.second`：

```
ObjContainer::iterator it = mObjContainer.find(name);
if (it != mObjContainer.end()) {
    if (it->second) {
        it->second->setObj2Default();
        delete it->second;
        it->second = NULL;
    }
} 
```

当您需要测试对象的实际类型时：

```
ObjContainer::iterator it = mObjContainer.find(name);
if (it != mObjContainer.end()) {
    if (ChildObj* p_Child = dynamic_cast<ChildObj*>(it->second)) {
        // Work on p_Child...
    }
} 
```

# javascript - 在 JavaScript 中使用“this”的明确方式

> ID：10002079
> 
> 赞同：1
> 
> 时间：2012-04-03T22:01:45.777
> 
> 标签：javascript, javascript-objects

我开始在 JavaScript 中定义类，我对关键字 有很多麻烦`this`。

这是我想做的一个例子：

```
function MyMap() {

    this.map = new google.maps.Map(....);

    google.maps.event.addListener(this.map, 'idle', function() {
        this.mapIdle();    // PROBLEM: "this" undefined
    });

    this.mapIdle = function() {
        google.maps.event.addListener(marker, 'click', function() {
            $("button").click(function() {
                $.ajax({
                    success: function() {
                        this.map.clearInfoWindows(); // PROBLEM: "this" undefined
                    }
                });
            });
        });
    }
} 
```

正如您在评论中看到的，在`this`这里不起作用，因为它**在一个闭包**中使用。

我已经开始使用以下[解决方法](https://stackoverflow.com/questions/229080/class-methods-as-event-handlers-in-javascript)：

```
var that = this;
google.maps.event.addListener(this.map, 'idle', function() {
    that.mapIdle();
}); 
```

甚至你必须在你[的回调函数周围定义一个回调](https://stackoverflow.com/questions/4466098/pass-in-local-variable-to-callback-function)函数（说真的！！）。

这是**极其丑陋**的，并不适用于任何地方。当我得到很多嵌套的 lambda 函数（如我给出的示例中）时，我不知道如何使用类属性。

**最好和最正确的方法是什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T22:22:18.710

最简单的方法是定义一个`self`变量（或者`that`，如果您不介意非语义变量名称），如您已经提到的：

```
function MyMap() {
   var self = this;

   // in nested functions use self for the current instance of MyMap
} 
```

请注意，您必须为添加到原型的方法再次执行此操作（如果它们使用嵌套函数）：

```
MyMap.prototype.myMethod = function() {
   var self = this;
   // use self in nested functions
}; 
```

您还应该阅读该[`.bind()`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)，注意它不适用于 IE <= 8。

您链接到的关于围绕回调定义回调的问题是解决一个不同的问题，即设置适当的闭包结构以允许嵌套在循环内的函数访问适当的循环计数器值。这与问题无关`this`。（并且可以在需要时轻松地与该`self`技术相结合。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:08:29.173

如果您使用的是 jQuery，`$.proxy`这很方便：

[http://api.jquery.com/jQuery.proxy/](http://api.jquery.com/jQuery.proxy/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T22:12:35.023

您可以将对象和函数分配给局部变量，然后将它们包含在回调函数的闭包中：

```
function MyMap() {

  var map = new google.maps.Map(....);

  var mapIdle = function() {
    google.maps.event.addListener(marker, 'click', function() {
      $("button").click(function() {
        $.ajax({
          success: function() {
            map.clearInfoWindows();
          }
        });
      });
    });
  };

  this.map = map;
  this.mapIdle = mapIdle; // Is this needed?

  google.maps.event.addListener(this.map, 'idle', function() {
    mapIdle();
  });

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-03T23:56:03.493

在 JavaScript 中，`this`每个函数调用都会重新分配。

这只是您在 JavaScript 中必须注意的事情。一开始可能会令人困惑，但是一旦您了解了一些简单的规则，它实际上就非常简单了。

如果是类似的方法调用`myObj.doSomething()`，那么`this`会自动设置为`myObj`inside of `doSomething()`。

如果要`this`在进行函数调用时显式控制 的值，可以使用`doSomething.apply()`或`doSomething.call()`来控制`this`函数内部设置的内容。这就是事件处理程序回调的作用。它们显式设置`this`为指向创建事件的对象（这非常有用）。您可以阅读有关MDN 的[`.apply()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)更多信息。[`.call()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)

如果你只是调用一个常规函数，那么`this`将被设置为在浏览器中是对象的全局`window`对象。

所有回调函数的值都会被`this`弄乱，因为每个函数调用都会发生变化`this`。由于您的事件处理程序是回调，而成功处理程序是 Ajax 函数中的回调，您应该期望`this`不会从周围的代码中保留 的值。有一些使用代理或绑定函数的变通方法，但通常`this`在闭包中捕获之前的值并使用类似`var self = this;`.

在您的情况下，当您想从事件处理程序外部访问`this`指针时，正确的做法是将其保存到您可以在事件处理程序中访问的局部变量中，甚至在事件中的 Ajax 调用中处理程序。没有更清洁的方法可以做到这一点。这样，您就可以访问`this`来自事件或 Ajax 调用的`this`指针以及来自调用对象的指针，如下所示：

```
 var self = this;
    self.mapIdle = function() {
        google.maps.event.addListener(marker, 'click', function() {
            $("button").click(function() {
                $.ajax({
                    success: function() {
                        self.map.clearInfoWindows(); // PROBLEM: "this" undefined
                    }
                });
            });
        });
    }
} 
```

# c++ - 使用虚函数进行类型转换

> ID：10002082
> 
> 赞同：7
> 
> 时间：2012-04-03T22:02:08.487
> 
> 标签：c++, casting, virtual

在下面的代码中，pC == pA：

```
class A
{
};

class B : public A
{
public:
    int i;
};

class C : public B
{
public:
    char c;
};

int main()
{
    C* pC = new C;
    A* pA = (A*)pC;

    return 0;
} 
```

但是当我在 B 中添加一个纯虚函数并在 C 中实现它时，pA != pC：

```
class A
{
};

class B : public A
{
public:
    int i;
    virtual void Func() = 0;
};

class C : public B
{
public:
    char c;
    void Func() {}
};

int main()
{
    C* pC = new C;
    A* pA = (A*)pC;

    return 0;
} 
```

为什么在这种情况下 pA 不等于 pC？他们不是都指向内存中的同一个“C”对象吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T22:37:03.867

您会看到指针的不同值，因为新的虚函数导致将 vtable 指针注入到您的对象中。VC++ 将 vtable 指针放在对象的开头（这是典型的，但纯粹是内部细节）。

让我们在 A 中添加一个新字段，以便于解释。

```
class A {
public:
    int a;
};
// other classes unchanged 
```

现在，在内存中，您的`pA`和`A`看起来像这样：

```
pA --> | a      |          0x0000004 
```

将 B 和 C 添加到混合物中后，您将得到以下结果：

```
pC --> | vtable |          0x0000000
pA --> | a      |          0x0000004
       | i      |          0x0000008
       | c      |          0x000000C 
```

如您所见，`pA`它指向的是 vtable*之后*的数据，因为它对 vtable 或如何使用它一无所知，甚至不知道它在那里。 `pC`确实知道vtable，所以它直接指向表，这简化了它的使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T22:11:32.700

指向对象的指针可以**转换**为指向基对象的指针，反之亦然，但转换不一定是微不足道的。基指针与派生指针具有不同的*值*是完全可能的，而且通常是必要的。这就是为什么你有一个强大的类型系统和转换。如果所有指针都相同，那么您也不需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T22:13:55.867

这是我的假设，基于这个问题。

1）您有一个案例，您从 C 转换为 A 并且您得到了预期的行为。
2）您添加了一个虚拟函数，并且该强制转换不再有效（因为您不能再在强制转换到 A 之后直接从 A 中提取数据，您获得的数据对您来说毫无意义）。

如果这些假设是真的，那么您遇到的困难是在 B 中插入虚拟表。这意味着类中的数据不再与基类中的数据完美对齐（因为在类中添加了字节，对您隐藏的虚拟表）。一个有趣的测试是检查 sizeof 以观察未知字节的增长。

要解决此问题，您不应直接从 A 转换为 C 来收集数据。您应该在 A 中添加一个由 B 和 C 继承的 getter 函数。

鉴于您在评论中的更新，我认为您应该阅读[这篇](http://en.wikipedia.org/wiki/Virtual_method_table)文章，它解释了虚拟表和内存布局，以及它如何依赖于编译器。该链接更详细地解释了我上面解释的内容，但给出了指针为不同值的示例。真的，我知道你为什么问错了这个问题，但似乎信息仍然是你想要的。从 C 到 A 的转换考虑了此时的虚拟表（注意 C-8 是 4，在 32 位系统上，我相信这将是虚拟表所需的地址大小）。

# ssas - MDX - 每个日期的总销售额排名前 X 的销售人员

> ID：10002086
> 
> 赞同：0
> 
> 时间：2012-04-03T22:02:11.767
> 
> 标签：ssas, mdx

我正在尝试这样做，但是在我的多维数据集中使用 MDX：

```
select
    *
from
(
    select 
        Date, SalesPerson, TotalSales, row_number() over(partition by Date order by TotalSales desc) as Num
    from SalesFact as ms
) as x
where
    Num < 5
order by
    Date, SalesPerson, Num desc 
```

假设我有一个具有以下尺寸的立方体：

日期（年、月、日） - 日期始终为每月 1 日 SalesPerson

事实表有三列——Date、SalesPerson、TotalSales——即那个人在那个月的销售量。

我希望每个月查看排名前 5 位的销售人员，以及他们的每个 TotalSales。前 5 名销售人员可能会因一个月而异。

我可以使用如下所示的查询获得一个月的结果：

```
select
      [Measures].[TotalSales] on columns,
      (
            subset
            (
                  order
                  (
                        [SalesPerson].children,
                        [Measures].[TotalSales], 
                        bdesc
                  ),
                  0,
                  5
            )
      ) on rows
from
      Hypercube
where 
      (
            [Date].[Date].&[2009-03-01T00:00:00]
      ) 
```

我所追求的是将 Date 和 SalesPerson 放在行上，将 TotalSales 放在列上的查询。

我想看看每个月，每个月的前 5 名销售人员，以及他们的销售额。

当我尝试这样做时，它似乎没有按每个日期过滤/分组销售人员（每个日期获得前 5 个）。返回的值到处都是，包括非常低的值和空值。值得注意的是，每个日期的 SalesPerson 列表都是相同的，尽管 TotalSales 变化很大。

```
select
    [Measures].[TotalSales] on columns,
    (
        [Date].[Hierarchy].[Date].members,
        subset
        (
            order
            (
                [SalesPerson].children,
                [Measures].[TotalSales], 
                bdesc
            ),
            0,
            5
        )
    ) on rows
from
    Hypercube 
```

似乎“子集”内的所有内容都需要按当前 [Date].[Hierarchy].[Date] 过滤，但使用 CurrentMember 会产生交叉连接/轴错误：

```
select
    [Measures].[TotalSales] on columns,
    (
        [Date].[Hierarchy].[Date].members,
        subset
        (
            order
            (
                ([SalesPerson].children, [Date].[Hierarchy].CurrentMember),
                [Measures].[TotalSales], 
                bdesc
            ),
            0,
            5
        )
    ) on rows
from
    Hypercube 
```

> 错误：正在执行查询... 查询 (3, 2) Hierarchy 层次结构在 Crossjoin 函数中多次使用。
> 
> 执行完成

我已经尝试了最后一个查询的几种变体，但没有运气。

希望这些答案对其他刚接触 MDX 的人也有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T18:30:59.477

我最终发现了如何做我正在寻找的东西。解决方案围绕使用 Generate 函数展开，从 MSDN 上的基本示例开始，将维度和度量修改为我的立方体中的维度和度量，这让我朝着正确的方向前进。

来自[http://msdn.microsoft.com/en-us/library/ms145526.aspx](http://msdn.microsoft.com/en-us/library/ms145526.aspx)

有没有更好的办法？

另外，要小心尝试将集合重构到 with 块中。当对集合进行评估/更改其范围时，这似乎会发生变化，并将改变结果。

```
with

set
Dates as
{
    [Date].[Hierarchy].[Date].&[2009-02-01T00:00:00],
    [Date].[Hierarchy].[Date].&[2009-03-01T00:00:00],
    [Date].[Hierarchy].[Date].&[2009-04-01T00:00:00]
}

select
    Measures.[TotalSales]
    on columns,
    generate
    (
        Dates,
        topcount
        (
            [Date].Hierarchy.CurrentMember
            *
            [SalesPerson].Children,
            5,
            Measures.[TotalSales]
        )
    )
    on rows
from
    Hypercube 
```

# shell - shell 数组循环在 1 后停止

> ID：10002087
> 
> 赞同：1
> 
> 时间：2012-04-03T22:02:16.927
> 
> 标签：shell, loops

我不知道为什么这个循环在第一项之后停止。有人可以指出我的方向吗？谢谢！

```
#! /bin/sh

colors[0]="teal"
colors[1]="purple"
colors[2]="pink"
colors[3]="red"
colors[4]="green"
colors[5]="darkblue"
colors[6]="skyblue"

for color in ${colors}
do
    echo $color
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:06:50.250

尝试将其更改为以下内容：

```
for color in "${colors[@]}"
do
    echo $color
done 
```

删除引号适用于您的示例，但如果有任何单一颜色的空格（例如`"sky blue"`）则无效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T22:09:02.493

执行此操作的众多方法之一是使用`for`循环。这里的附加信息是如何获取数组的大小。

```
#Get the size of the array
nColors=${#colors[*]}
for (( Idx = 0; Idx < $nColors; ++Idx  )); do
    echo "${colors[$Idx]}"
done 
```

# java - 按下长按钮重复一个动作

> ID：10002089
> 
> 赞同：5
> 
> 时间：2012-04-03T22:02:33.423
> 
> 标签：java, android, button, textview, repeat

假设您有一个`TextView`显示像 0 这样的数字，而您有一个`Button`. 现在，如果用户按下按钮，TextView 中的数字将增加一（这我知道该怎么做），但如果用户按下按钮并且不释放它，那么`TextView`应该增加数字，这应该重复它只要用户不释放`Button`. 换句话说：只要用户按住按钮，如何一遍又一遍地增加数字？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T22:08:04.137

一种通用方法（不是特定于 Android）是分别检测 press 和 release 事件。按下事件会启动一个周期性任务（`Runnable`或`Thread`），它会增加计数器（假设每秒 5 次，或每 200 毫秒一次）。释放事件停止周期性任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T22:23:20.267

您需要在收到事件时安排异步重复事件，并在收到事件时`mousePressed`停止它`mouseReleased`。

在 Java 中有很多方法可以处理这个问题。我喜欢使用`java.util.concurrent`非常灵活的类。不过有几点要记住：

如果您的异步事件没有在 Event Dispatch Thread 上发生，您需要`JButton`使用`SwingUtilities.invokeLater()`.

```
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.ScheduledFuture;
import java.util.concurrent.TimeUnit;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class Frame
{
    public static void main( String[] args )
    {
        JFrame frame = new JFrame( );
        final JButton button = new JButton( "0" );

        final ScheduledExecutorService executor = Executors.newScheduledThreadPool( 1 );

        button.addMouseListener( new MouseAdapter( )
        {
            int counter = 0;
            ScheduledFuture<?> future;

            @Override
            public void mousePressed( MouseEvent e )
            {
                Runnable runnable = new Runnable( )
                {
                    public void run( )
                    {
                        SwingUtilities.invokeLater( new Runnable( )
                        {
                            public void run( )
                            {
                                button.setText( String.valueOf( counter++ ) );
                            }
                        } );
                    }
                };

                future = executor.scheduleAtFixedRate( runnable, 0, 200, TimeUnit.MILLISECONDS );
            }

            @Override
            public void mouseReleased( MouseEvent e )
            {
                if ( future != null )
                {
                    future.cancel( true );
                }
            }

        } );

        frame.add( button );
        frame.setSize( 400, 400 );
        frame.setVisible( true );
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T22:15:16.940

1.  `View.OnLongClickListener`为您的按钮设置一个
2.  给你的活动一个[`Runnable`](http://developer.android.com/reference/java/lang/Runnable.html)，并在你加载活动时初始化（但不要启动它）
3.  让 OnLongClickListener 执行其更新文本框的常规异步任务并检查自首次单击以来的时间
4.  创建一个在触摸事件被释放时[`OnTouchListener`](http://developer.android.com/reference/android/view/View.OnTouchListener.html)暂停的。`Runnable`

我知道这是一个粗略的草案，但这是一个非常有用的模式，可以重用和修改，所以值得你将爪子投入其中......

# javascript - HTML5 画布幻灯片放映问题

> ID：10002095
> 
> 赞同：1
> 
> 时间：2012-04-03T22:02:54.527
> 
> 标签：javascript, html, canvas, slideshow

我有一个幻灯片，我通过来自链接的呼叫触发。幻灯片运行良好。我在停止和清除幻灯片时遇到问题。我有一个临时链接，我正在调用停止显示的 stopShow 函数，但没有清除它，因此我可以重新显示其他项目。

```
// JavaScript Document

    var imagePaths = ["_sites/BBB_homepage.png","_sites/CabezonKidsDental_homepage.png","_sites/djer_homepage.png","_sites/enchanted_homepage.png","_sites/JoeSSausage_homepage.png","_sites/MMCS_homepage.png","_sites/mySRB.png","_sites/PHCP_homepage.png","_sites/smilesforkidsnm_homepage.png","_sites/t2consulting_homepage.png","_sites/Upward_homepage.png","_sites/Webb_based_homepage.png"];
    var showCanvas = null;
    var showCanvasCtx = null;
    var img = document.createElement("img");
    var currentImage = 0;
    var revealTimer;
    var stopShow = 0;
    var slideTImer;

    function slideShow() {
        if (!stopShow){
            showCanvas = document.getElementById('Canvas1');
            showCanvasCtx = showCanvas.getContext('2d');

            //clear canvas
            showCanvasCtx.clearRect(0,0,showCanvasCtx.canvas.width,showCanvasCtx.canvas.height);

            //set image size and call switch function
            img.setAttribute('width','500');
            img.setAttribute('height','400');
            switchImage();

            //start the animation
            slideTimer = setInterval(switchImage,3000);
        }
    }

    function switchImage() {
        //set img element source property to images in slideshow
        img.setAttribute('src',imagePaths[currentImage++]);
            //if past the last image, loop
            if (currentImage >= imagePaths.length)
                currentImage = 0;

            //fade into image by 10th of full saturation
            showCanvasCtx.globalAlpha = 0.1;
            revealTimer = setInterval(revealImage,100);
    }

    function revealImage() {
        showCanvasCtx.save();
        showCanvasCtx.drawImage(img,100,0,500,400);
        showCanvasCtx.globalAlpha += 0.1;
        if (showCanvasCtx.globalAlpha >= 1.0) clearInterval(revealTimer);
        showCanvasCtx.restore();
    }

    function stopSlideShow() {
        //alert('stop show');
        clearInterval(slideTimer);
        clearInterval(revealTimer);
        stopShow=1;

        showCanvas = document.getElementById('Canvas1');
            showCanvasCtx = showCanvas.getContext('2d');

            //clear canvas
            showCanvasCtx.clearRect(0,0,showCanvasCtx.canvas.width,showCanvasCtx.canvas.height);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:24:34.460

通过 `if (!stopShow){`在 stopSlideShow 函数中删除调用并清除画布，该函数可以按需要工作。有必要在 stopSlideShow 函数中将 globalAlpha 设置为 1。结束代码如下所示：

```
// JavaScript Document

    var imagePaths = ["_sites/BBB_homepage.png","_sites/CabezonKidsDental_homepage.png","_sites/djer_homepage.png","_sites/enchanted_homepage.png","_sites/JoeSSausage_homepage.png","_sites/MMCS_homepage.png","_sites/mySRB.png","_sites/PHCP_homepage.png","_sites/smilesforkidsnm_homepage.png","_sites/t2consulting_homepage.png","_sites/Upward_homepage.png","_sites/Webb_based_homepage.png"];
    var showCanvas = null;
    var showCanvasCtx = null;
    var img = document.createElement("img");
    var currentImage = 0;
    var revealTimer;
    var stopShow = 0;
    var slideTImer;

    function slideShow() {
            showCanvas = document.getElementById('Canvas1');
            showCanvasCtx = showCanvas.getContext('2d');

            //clear canvas
            showCanvasCtx.clearRect(0,0,showCanvas.width,showCanvas.height);

            //set image size and call switch function
            img.setAttribute('width','500');
            img.setAttribute('height','400');
            switchImage();

            //start the animation
            slideTimer = setInterval(switchImage,3000);
    }

    function switchImage() {
        //set img element source property to images in slideshow
        img.setAttribute('src',imagePaths[currentImage++]);
            //if past the last image, loop
            if (currentImage >= imagePaths.length)
                currentImage = 0;

            //fade into image by 10th of full saturation
            showCanvasCtx.globalAlpha = 0.1;
            revealTimer = setInterval(revealImage,100);
    }

    function revealImage() {
        showCanvasCtx.save();
        showCanvasCtx.drawImage(img,100,0,500,400);
        showCanvasCtx.globalAlpha += 0.1;
        if (showCanvasCtx.globalAlpha >= 1.0) clearInterval(revealTimer);
        showCanvasCtx.restore();
    }

    function stopSlideShow() {
        //alert('stop show');
        clearInterval(slideTimer);
        clearInterval(revealTimer);
        stopShow=1;
        img.setAttribute('src',100);

        showCanvas = document.getElementById('Canvas1');
            showCanvasCtx = showCanvas.getContext('2d');
            showCanvasCtx.globalAlpha=1;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:31:51.007

这是错误的！

```
showCanvasCtx.canvas.width 
```

画布的对象模型是这样工作的：

画布 -> 上下文

宽度和高度参数不在上下文中，而是在画布本身中。因此，考虑到您在代码中以这种方式获取它们：

```
showCanvas = document.getElementById('Canvas1');
showCanvasCtx = showCanvas.getContext('2d'); 
```

你应该像这样得到画布的尺寸：

```
showCanvas.width
showCanvas.height 
```

# android - 更改 Android SDK 版本会导致崩溃

> ID：10002097
> 
> 赞同：0
> 
> 时间：2012-04-03T22:03:02.183
> 
> 标签：android, string, sockets, networking, sdk

我有一个与服务器连接并通信的 Android 应用程序。该应用程序最初是使用 minSdk 版本 8 (Android 2.2) 构建的，并且运行良好。我有一台运行 4.03 的设备，所以我决定创建一个 minSdk 15 版本。这导致我的应用程序每次尝试连接到服务器时都会崩溃。

我尽可能地剥离了应用程序以找到问题的根源。我将问题缩小到初始化 Socket 的函数。每当此函数尝试运行应用程序时，应用程序就会崩溃。

如果我将 minSdk 版本更改为 8，它可以完美运行。但它不适用于我尝试过的任何其他版本（10、14、15）。我不知道版本中发生了什么变化，但这只适用于 misSdk 8 似乎很奇怪。什么可能导致这个或什么可以改变？

这是一些代码：

```
// Function that seems to cause problems
public void openConnection(){
    try{
        s = new Socket(InetAddress.getByName("192.168.1.84"),1500);
    }catch(IOException e){
e.printStackTrace();
    }
}
// Button handler
public void myClickHandler(View view){
    switch(view.getId()){
    case R.id.ConnectButton:
        this.openConnection();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:07:22.840

我不能肯定地说（发布你的 logcat 输出！），但我最好的猜测是你正试图在 UI 线程上建立连接，而 ICS 正在使你的应用程序崩溃（因为它应该是因为尝试连接到网络UI 线程上的服务器几乎可以肯定您的应用程序将无法正常运行）。确保您使用`AsyncTask`或 进行连接`Thread`。我见过很多有类似问题的开发人员，通常与这个问题有关。

# c# - 使用 Metro 风格的 GridView 而不分组

> ID：10002100
> 
> 赞同：2
> 
> 时间：2012-04-03T22:03:30.043
> 
> 标签：c#, xaml, windows-runtime

我有一个这样的简单集合：

```
资源
 - 饲料（具有“标题”属性）
   - 物品（其他类别的收藏品）
```

我想将 GridView 用于 Metro-Style XAML 项目，并且我想将标题绑定到 Feed 的 Title 属性，并将集合的项目绑定到组的 ItemSource。我很困惑（因为 XAML 绑定失败不会显示在输出窗口或其他源中）。

我不想创建一个 IGrouping 或 IGroupInfo 来将数据硬塞到控件中。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T22:37:42.743

您可以通过启用本机调试来显示绑定失败。我在这里写了[http://www.kelvinhammered.com/?p=150](http://www.kelvinhammered.com/?p=150)

# opengl - glUniformMatrix4fv 是否会立即复制传入指针指向的数据？

> ID：10002103
> 
> 赞同：3
> 
> 时间：2012-04-03T22:03:53.670
> 
> 标签：opengl, opengl-es

glUniformMatrix4fv 是否会立即复制传入指针指向的数据？如果没有，它什么时候制作副本？是 glDrawElements 还是 glDrawArrays 调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T22:15:50.187

是的，它在 glUniformMatrix4fv 调用期间复制数据。

# java - Java 窗口的 Windows 注册类是什么？

> ID：10002117
> 
> 赞同：3
> 
> 时间：2012-04-03T22:05:27.587
> 
> 标签：java, c++, windows

我正在编写一个检索 Java 窗口并将其设置为最大化的 C++ 应用程序。我想知道 Java 窗口的注册类是干什么用的`FindWindow(LPCTSTR lpClassName, LPCTSTR lpWindowName);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:19:09.477

在 JRE 1.6 中，顶级应用程序窗口的 Win32 Window 类名称设置为`SunAwtFrame`. 在 1.6 之前，它是从 Java 类名继承的。这里有一些[细节](http://www.java.net/node/659065)。

# ios - 创建图像变形应用程序的最佳方法？

> ID：10002118
> 
> 赞同：-1
> 
> 时间：2012-04-03T22:05:28.190
> 
> 标签：ios, image-processing

我也想将用户的肤色更改为蓝色，就像我不知道该怎么做的头像一样？我尝试了各种方法来实现肤色变化，但无法做到。我试图找到肤色像素，然后用蓝色替换它们，但随后整个皮肤变成了完全蓝色。我想让皮肤变成蓝色，但看起来像下巴、鼻子等的所有阴影一样真实，因此蓝色可能会变暗或变浅，具体取决于脸部。

我用过：

```
for (int i = 0; i < bytesInContext; i += 4) {

            int alpha =  data[i]; 
            int red = data[i+1]; 
            int green = data[i+2]; 
            int blue = data[i+3];

        if(((red>140)&&(red<190))||(green>120)&&(green<190)||(blue>150)&&(blue<150)){

                data[i]=255; 
                data[i+1]=13; 
                data[i+2]=43; 
                data[i+3]=63;

            } 
```

请谁能告诉我是否有其他方法可以创建此类应用程序以及如何将用户的皮肤更改为蓝色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:54:12.303

这实际上不是一个问题，而是一个问题。

要将皮肤颜色更改为蓝色，可以使用 OpenCV 等库。将图像转换为 HSV 颜色空间，并将 H（色调）通道中的值增加 80 左右，您可能会得到想要的结果。

要制作头像，您可以使用 Viola-Jones 人脸检测算法（也存在于 OpenCV 中）从用户图片中仅提取人脸，然后在其周围和顶部添加您选择的图像。不过，如果它看起来很可怕，我不会感到惊讶。

祝你好运。

# asp.net - 捕捉用户在网页上所做的事情的能力

> ID：10002119
> 
> 赞同：0
> 
> 时间：2012-04-03T22:05:41.220
> 
> 标签：asp.net, user-input, user-experience

是否有工具可以在我的网站上捕获实际用户体验。我想捕获诸如 customerid、他们点击的按钮、他们的 cookie 中的信息、查询字符串等等等。有没有一种工具可以插入我的网站，为网页提供这些信息并转储到sql server 表中的好列？我希望能够……</p>

1.  浏览日志。

2.  选择一个特定的日志条目

3.  放大该日志条目并查看更详细的信息，如查询字符串、cookie 数据等。

4.  能够捕获异常发生时用户在该页面上所做的所有信息。

可能吗？有什么工具可以解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T23:51:19.720

本文介绍了使用[Google In-Page Analytics](http://www.iblogzone.com/2011/05/google-in-page-analytics-personalized-heatmap.html)为用户点击您的网页的位置生成热图，但这是汇总的，而不是针对特定用户的。除了页面的正常点击 GA 记录之外，您还可以使用类似于[跟踪出站链接](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55527)的技术添加基于客户端交互的自定义​​点击。我们将它与[GA 漏斗](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55580)一起使用，通过注册表单跟踪进度。

[出于多种原因，安装 ELMAH](http://code.google.com/p/elmah/)非常有用，如果您还没有配置，将非常值得。

我发现[WebLog Expert](http://www.weblogexpert.com/info/IISLogs.htm)非常适合在聚合级别分析 IIS 日志。

我不知道有任何一种产品可以完成所有三个元素，并且在每个用户级别上都没有特别好。

# avfoundation - 使用 AVFoundation 类时如何在 iOS 中找到错误代码

> ID：10002124
> 
> 赞同：2
> 
> 时间：2012-04-03T22:06:07.583
> 
> 标签：avfoundation

我正在使用 AVFoundation 库编写视频应用程序。

基本上，我正在将视频录制到文件中，并在录制完成时收听以下事件。

```
- (void)captureOutput:(AVCaptureFileOutput *)captureOutput didFinishRecordingToOutputFileAtURL:(NSURL *)outputFileURL fromConnections:(NSArray *)connections error:(NSError *)error
{
   switch([error code] {
        //handle different AV foundation errors such as 
        case AVErrorMaximumFileSizeReached:
        { //do something }
        case AVErrorMaximumDurationReached:
        { //do something }            
        case AVErrorDiskFull:
        { //do something }
   }
} 
```

当我在低磁盘空间手机中运行我的应用程序时，我收到了一个奇怪的错误`-12670`。我想这与 diskfull 类似，但是，我在`AVError.h`.

有什么简单的方法可以找到随机错误代码对应的宏吗？（我需要找到这个错误到底是什么的文档）

这很令人困惑，我在互联网上搜索，找不到知道整个故事的人。

问候，霍华德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-26T00:05:49.173

这是一个古老的错误问题，但这是我的答案。如果您仔细查看 NSError，它确实显示错误代码是 -11807 ( [AVErrorDiskFull](https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVFoundation_ErrorConstants/Reference/reference.html#//apple_ref/doc/uid/TP40009935) )。确保您没有查看 OSStatus 错误。[您可以在此处](https://stackoverflow.com/questions/2196869/how-do-you-convert-an-iphone-osstatus-code-to-something-useful)找到有关 OSStatus 错误的更多信息。

下面是一个 NSError 的例子：

```
Error Domain=AVFoundationErrorDomain 
Code=-11807 "Operation Stopped" 
UserInfo=0x16eabcf0 {NSLocalizedRecoverySuggestion=There is not enough available space to continue the file writing. Make room by deleting existing videos or photos., 
AVErrorRecordingSuccessfullyFinishedKey=false, 
NSLocalizedDescription=Operation Stopped, 
NSUnderlyingError=0x16e9e720 
"The operation couldn’t be completed. (OSStatus error -12670.)"}* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T10:52:05.810

从文档

[https://developer.apple.com/documentation/avfoundation/avfoundation_constants?language=objc](https://developer.apple.com/documentation/avfoundation/avfoundation_constants?language=objc)

这里有一些填充文字供您娱乐。

# powershell - 清理远程机器的临时目录：如何识别正在使用的文件？（电源外壳）

> ID：10002132
> 
> 赞同：1
> 
> 时间：2012-04-03T22:06:58.133
> 
> 标签：powershell

我有许多远程机器的临时目录已满。（是 Selenium / webdriver 网格遥控器）。我有一个 powershell 脚本，用于标识需要清理的文件和目录。使用的命令看起来像这样（不包括各种机器和目录的复杂性）：

```
gci $env:TEMP -Recurse| Remove-Item -ErrorAction Continue -Recurse 
```

问题是当某些文件正在使用时，这需要很长时间。在本地，我可以加入句柄的输出（解析会有点难看），但在远程机器上会更复杂。除其他外，我需要验证 WinRM 是否配置正确、句柄是否在路径中等。

有没有更简单的方法来识别文件正在使用中？理想情况下，可以通过 Powershell（包括 .NET）进行过滤。我熟悉各种其他脚本语言（ruby、python、perl）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:26:18.303

我发现列出打开文件的最佳工具是[SysInternals 工具 handle.exe](http://technet.microsoft.com/en-us/sysinternals/bb896655) ，例如：

```
$openFiles = @(handle $env:TEMP | Foreach {($_ -split ": ")[3]} | Select -Unique) 
```

# ruby - 检测方法何时被链接

> ID：10002133
> 
> 赞同：2
> 
> 时间：2012-04-03T22:07:00.870
> 
> 标签：ruby

我正在寻找一些方法链接。我有以下代码：

```
class MyClass

  attr_accessor :handler

  def do_a
    puts 'i just did a'
    self.handler = 'a'
    self
  end

  def do_b_if_a
    puts 'i just did b' if handler == 'a'
  end

 end 
```

所以以下工作：

```
irb > test = MyClass.new
=> #<MyClass:0x007fa44ced9a70 @handler=nil>
irb > test.do_a
'i just did a'
irb > test.do_a.do_b_if_a
'i just did a'
'i just did b' 
```

我不想工作的是当我第一次调用 do_a 它设置处理程序时，这意味着现在可以随时调用 do_b_if_a。但我只希望它在与 do_a 链接时被调用，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:17:20.747

通常，您不想关心（在大多数情况下，您甚至不*知道*）是否以某种方式调用了您的方法。那就是疯狂。魔术调用序列使调试和测试时间变得非常糟糕。

但是，您可以做什么......而不是`do_a`return `self`，在它周围包裹一个定义`do_b`的装饰器，然后返回装饰器。那时，您的原件`MyClass`不能`do_b`，因为它不知道如何操作。但是从`do_a`罐头里回来的东西。

（现在，您仍然可以说 like`a = test.do_a`和 then `a.do_b`，但如果不自己解析 Ruby 代码，您将无法真正解决这个问题。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:27:21.677

正如 cHao 所说，您不应该尝试方法调用模式。但我也可以想到另一种方法来做到这一点：

```
def do_a
  puts "i just did a"
  do_b_if_a(true)
end

def do_b_if_a(did_a=false)
  puts "i just did b" if did_a
end

do_a       # prints "i just did a"
do_b_if_a  # does nothing 
```

当然，你*可以*打电话`do_b_if_a(true)`，但它只会让它更灵活;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T22:45:46.177

我认为您在错误的地方跟踪状态。最好使用类似于 ActiveRecord 的查询接口的东西，例如：

```
class MyClass
  attr_accessor :handler

  def do_a
    puts 'i just did a'
    with_handler 'a'
  end

  def do_b_if_a
    puts 'i just did b' if handler == 'a'
  end

private

  def with_handler(h)
    o = dup
    o.handler = h
    o
  end

end 
```

这样你总是有一个 MyClass 的实例，但你有一个一次性的副本来跟踪它的历史。这类似于[cHao 的](https://stackoverflow.com/users/319403/chao)方法，但它不需要额外的装饰器类，因为 MyClass 可以装饰自己。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T02:39:32.180

不会让你一直到那里，但你可以定义为在被调用`do_b_if_a`时添加的单例方法：`to_a`

```
class MyClass

  def do_a
    puts 'i just did a'
    self.tap{|s| def s.do_b_if_a; puts 'i just did b' end}
  end

 end 
```

如果您想根据调用堆栈采取某些操作，您可以查看[Kernel.caller 。](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-caller)但是，如果您没有充分的理由这样做，您可能会被其他开发人员打脸，哈哈。

# ios - 可能有一个 UINavigationController 用于不填充整个超级 UIView 的 UITableView

> ID：10002138
> 
> 赞同：1
> 
> 时间：2012-04-03T22:07:09.857
> 
> 标签：ios, xcode, uinavigationcontroller, storyboard

这是在带有故事板的 iOS5 上。

我想`UINavigationController`在`UITableView`下面有一个，但是当我尝试“嵌入”选项时，它会将它添加到 Red `UIView`，而不是桌子本身。由于很多原因，这不是最佳的。我想要做的事情是不可能的：拥有一个带有自己的导航控制器的表格子视图？

哦-当我在这里时-`UINavigationControllers`无法在情节提要中调整大小是怎么回事？我只能设置“表单”“页面”或“完整” - 当我将其设置为“自由格式”时，我无法输入任何值来调整它的大小

![在此处输入图像描述](../Images/75d786a4ad187d2057e927589a6f7dfa.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T22:13:46.537

> 由于很多原因，这不是最佳的

实际上，由于很多原因，您尝试做的事情毫无意义。UINavigationController 在其中嵌入了一个 UIViewController 的实例（在 Storyboard 中）。换句话说，导航控制器的根视图控制器必须是视图控制器。由于 UITableView 是 UIView 的子类，因此您不能将其嵌入到 UINavigationController 中。此外，你永远不会想要。UINavigationController 管理视图控制器的层次结构。你想实现什么，你**认为**你需要将 UITableView 放在 UINavigationController 中？您可能想要实现的是将表视图所在的视图控制器放置在 UINavigationController 内，在这种情况下，您在 IB 中看到的结果是正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:15:25.443

UINavigationController 是一个视图*控制器*，而不是一个视图，所以你不能将它嵌入到一个视图中。

你应该可以用一点代码得到你想要的：你不能将它嵌入到 Xcode 中，但是你可以分别设置 UINavigationController 和红色视图，然后像这样写几行：

```
navigationController.view.frame = CGRectMake(20, 20, 280, 300);
[redView addSubview:navigationController.view]; 
```

# ruby-on-rails - 在 Rails 3.2 中使用“error_messages”？（引发“未定义方法”错误）

> ID：10002140
> 
> 赞同：12
> 
> 时间：2012-04-03T22:07:19.607
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我在 Rails 3.2 功能测试中收到以下错误：

> ActionView::Template::Error: # <ActionView::Helpers::FormBuilder:0x007ff8ad00d3b0> 的未定义方法 `error_messages'

创建错误的视图代码：

```
<%= form_for [@camp, @program] do |f| %>
  <%= f.error_messages %> # problematic code
  <%= f.label :name %>
<% end %> 
```

这是我的控制器中调用上述视图代码的代码：

```
render :action => "edit", :status => :bad_request 
```

这是我正在运行的测试：

```
test "update a program with a bad request" do
  put :update, 
    :id => programs(:traditional).to_param, 
    :program => {
      :min_age => "a" 
    },
    :camp_id => camps(123).uri

  assert_response :bad_request
end 
```

有没有人知道为什么这个错误发生在 Rails 3.2 应用程序中？

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-04T00:40:19.647

尝试使用以下代码迭代所有错误（如果有）。

```
<%= form_for [@camp, @program] do |f| %>
   <% @program.errors.full_messages.each do |msg| %>
      <p><%= msg %></p>
   <% end %>
<%= f.label :name %>
<% end %> 
```

# installation - WIX 补丁更新 XML 配置文件

> ID：10002146
> 
> 赞同：1
> 
> 时间：2012-04-03T22:07:53.250
> 
> 标签：installation, wix

假设我创建了一个安装 Windows 服务和 XML 配置文件的 WIX 安装程序。然后将其安装在客户端上。

在开发的后期，我需要从 XML 配置文件中添加/删除一些元素。我可以创建一个 WIX PATCH 来简单地更新该 XML 配置文件中的节点而不完全覆盖当前设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T02:27:27.690

创建补丁时，您获取源 .MSI 和更新的 .MSI 并在它们之间进行比较，这将成为您的补丁。所以我想只要节点的更新反映在补丁中就可以了。

也就是说，您也可以通过重大升级来做到这一点。安装配置文件时，可以将安装程序设置为不覆盖当前文件。如果您在安装时编辑该配置文件（例如使用 xmlfile 或 xmlconfig 操作），您可以对执行这些修改的组件设置条件。

另一种选择是在安装时读取配置文件（如果存在）。卸载旧版本时它将被删除，安装新版本时您可以安装缓存的值。

# ajax - 如何访问部分视图的视图模型的父级的父级？

> ID：10002150
> 
> 赞同：0
> 
> 时间：2012-04-03T22:08:05.743
> 
> 标签：ajax, asp.net-mvc-3, partial-views

在 asp.net mvc3 中，如果我有一个顶视图：

```
@model BuilderVM
@using (Ajax.BeginForm("TaskSelector", ajaxOpts))
{
}
<div id="here"></div> 
```

在从 Ajax 表单发布帖子之后，使用`id="here"`从操作返回的 div 中的部分视图进行更新（即。在该 div 中，生成下一个部分视图：`TaskSelector``public action TaskSelector(BuilderVM m){var vm = new SelectorVM();vm.property=m.property;return PartialView(vm);}`

```
@model SelectorVM
@using (Ajax.BeginForm("Choices", ajaxOpts))
{
}
<div id="selected"></div> 
```

然后从该局部视图中，下一个局部视图在 div 内更新`id="selected"`。

```
@model ChooserVM
@using (Ajax.BeginForm("Ender", ajaxOpts))
{
}
<div id="ended"></div> 
```

如何，从动作“安德”

```
public ActionResult Ender (ChooserVM vm)
{
 //access BuilderVM.SomeProperty
} 
```

我可以访问 BuilderVM 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T22:41:28.597

简短的回答：你没有。除非数据存储在会话中，否则无法访问。

# dependency-injection - 需要帮助使用 Unity DI 实现命令处理程序/总线

> ID：10002154
> 
> 赞同：1
> 
> 时间：2012-04-03T22:08:47.100
> 
> 标签：dependency-injection, unity-container, structuremap, cqrs

伙计们，我正在尝试将遗留的棕地应用程序重构为带有命令和用于域修改的命令总线的 CQRS 架构。

该应用程序很可能在 Asp.Net MVC3 中实现。我的雇主更喜欢在 MVC 应用程序中使用 Unity for DI。

我能找到的任何显示命令/总线解析的依赖容器的示例都是基于 Structuremap 或 Autofac，但是我需要在此实现中使用 Unity。有没有人以这种方式使用 Unity 或知道任何示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:13:17.573

你认为你到底在哪里需要容器？也许[这篇文章](http://blog.ploeh.dk/2011/09/19/MessageDispatchingWithoutServiceLocation.aspx)包含一些有用的信息。

它描述了一种与容器无关的处理命令的方式。

* * *

**更新**

你的意思是你想要这样的东西：

```
var builder = new ConfigurationBuilder();
var convention = new CommandHandlerConvention().WithTransaction().WithDeadlockRetry();
builder.Extension<DecoratorExtension>();
builder.Scan(x =>
{
    x.With(convention);
    x.AssemblyContainingType(typeof(BarCommand));
});
var container = new UnityContainer();
container.AddExtension(builder);
ICommandHandler<BarCommand> barHandler = container.Resolve<ICommandHandler<BarCommand>>("BarHandler");
var command = new BarCommand();
barHandler.Handle(command);
Assert.AreEqual("-->Retry-->Transaction-->BarHandler", command.HandledBy); 
```

该注册使用 Unity 的自定义配置引擎，该引擎提供了 StructureMap 配置的许多功能。

* * *

**更新2**

代码示例是我[在 codeplex 上的宠物项目](http://tecx.codeplex.com)的一部分。上面的代码片段可以在*TecX.Unity.Configuration.Test*项目中找到。

# c++ - C++ MFC - 在 MFC DLL 和 WTL exe 之间共享数据？

> ID：10002157
> 
> 赞同：0
> 
> 时间：2012-04-03T22:09:06.580
> 
> 标签：c++, mfc, wtl

我有一个 MFC 项目，它提供了用于操作复杂数据结构的 GUI 界面（我们称之为 ComplicatedClass）。我有一个 WTL 项目需要大量使用这个类。我希望能够只管理此类的一个实例，并且不希望每个项目都有自己的 ComplicatedClass 副本。

如果我希望这些项目共享此类的一个实例，我将如何以安全可靠的方式进行此操作？对我来说，唯一的选择似乎是基本上拥有该类的两份副本（一份由 MFC 项目管理，一份由 WTL 方管理）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T15:23:54.207

你不需要两份。您没有提及您的应用程序的结构，但我假设 MFC 项目是一个 .exe，而 WTL 项目是一个 dll。从采用 ComplicatedClass* 的 dll 中导出一个函数，并将其存储在您的 dll 中使用。我在这里假设 ComplicatedClass 没有任何 UI 数据 - 即，没有 CWnd 派生的对象。如果是这样，您需要小心地正确包装您的 HWND，或者坚持只使用 win32 消息传递（即，仅使用 ::SendMessage）。

这只是一般建议，您的问题对于其他任何问题都不够具体。例如，我不明白您为什么得出结论说您必须拥有两个副本。如果您只是将指针从一个传递到另一个，它们都可以访问它们。

# html - 居中位置：当视口达到指定宽度时固定 div

> ID：10002158
> 
> 赞同：0
> 
> 时间：2012-04-03T22:09:08.363
> 
> 标签：html, css, center, css-position

我正在为我的网站创建一个布局，其中侧边栏固定在视口的右侧，宽度为 30%（内容在其左侧），直到浏览器窗口达到一定宽度，此时我想要内容和侧边栏居中，不再随浏览器窗口增长（因为在非常大的宽度下变得难以阅读）。这是正在使用的html的一个想法：

```
<body>
<div id=sidebar>sidebar content</div>
<div id=content>articles, images, etc</div> 
```

以下是一些用于格式化的基本 HTML：

```
#sidebar {
    width: 30%;
    position: fixed;
    right: 0;
    top: 0;
    background-color: gray;
}
#content {
    width: 70%;
    margin-right: 30%;
    max-width: 49em;
} 
```

此时，当内容宽度超过 49em 时，它会粘在页面的右侧，从而在它与固定侧边栏之间产生越来越大的间隙。我想要的是让它达到 49em 的最大宽度，让侧边栏达到 21em（所以它们仍然是 70:30）并保持固定，但是让整个 70em 的宽度位于视口的中心。

我还希望侧边栏的背景颜色从内容的边缘到屏幕右侧的整个路径（即包含 div 将侧边栏和内容居中，最大宽度为 70em工作，因为侧边栏的背景只会进入包含 div 而不是视口的边缘）。那个并不那么重要，因为在 body 元素上放置某种带纹理的背景可能看起来不错，以使其看起来好像页面“坐在”某个带纹理的表面上（不理想，但很好）。我只是无法在保持侧边栏固定位置的同时使侧边栏和内容居中。

谢谢！

更新：这是我正在寻找的非常粗略的示意图：

|A|B|C|D|

B 是最大宽度为 49em 的内容区域。C 是最大宽度为 21em 的侧边栏，它必须有固定的定位。A 和 D 将是边距（视口宽度和 70em 之间差异的一半）。D 的背景必须与侧边栏的颜色相同（灰色）。A的背景必须是白色的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:27:01.237

这个方案满足你的大部分需求，但是你需要提供内容+侧边栏的宽度（本例中我放了70em）

**HTML：**

```
<div id="container">
    <div id="content">articles, images, etc</div>
    <div id="sidebar">sidebar content</div>
</div> 
```

**CSS：**

```
#sidebar {
    width: 29%; background-color: gray; border: 1px gold solid;
    float: left;
    position: fixed; right: 0; top: 0;
}

#content {
    width: 69%; max-width: 49em; border: 1px silver solid;
    float: left;
}

#container {
    max-width: 70em;
    margin: 0px auto;
}​ 
```

[jsFiddle 在这里](http://jsfiddle.net/BUn2y/4/)。（中间框左右拖动即可测试）​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:14:35.100

像这样的东西：

```
<body>
    <div id="wrapper">
        <div id="sidebar">sidebar content</div>
        <div id="content">articles, images, etc</div>
    </div>
</body> 
```

使用与此类似的 CSS：

```
body { background:url(imageForSidebar.png) right top repeat-y; }
#wrapper {
    max-width:1000px;
    margin:0 auto;
    background:#FFF url(imageForSidebar.png) -66% top repeat-y;
    position:relative;
}
#sidebar {
    width:30%;
    float:right;
    position: fixed;
}
#content { margin-right:30%; } 
```

身体上的背景图像会一直处理到屏幕边缘。您将使用足够大的背景图像来执行此操作，但又足够小以使其被`#wrapper`背景覆盖。包装器上的背景图像以类似的方式工作，但在这种情况下，它只是确保侧边栏图像始终延伸到内容的底部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-28T07:49:28.577

您可以将媒体查询添加到您的 CSS

```
//your normal css
#sidebar {
width: 30%;
position: fixed;
right: 0;
top: 0;
background-color: gray;}

//media query (you can add max and min width of the sceen or one of both)
@media screen and (min-width:500px) { 
    #sidebar{
       //css you want to apply when when width is changed
 }
} 
```

# jquery-ui - JQuery UI Slider - “值”未设置句柄的起始位置

> ID：10002160
> 
> 赞同：0
> 
> 时间：2012-04-03T22:09:16.507
> 
> 标签：jquery-ui, jquery-ui-slider

我希望以下代码在 0-250 范围内的“30”处开始我的滑块，但事实并非如此。

```
$(function() {
  $( "#slider" ).slider({
  value: 30,
  min: 0, 
  max: 250,
  step: 1, 
  slide: function(event, ui){
    $("#edit-varprice").val(ui.value + ".00");
  }  
  });
}); 
```

图片： http: [//gallery.twardnw.com/var/albums/Misc/Screen%20shot%202012-04-03%20at%203.06.59%20PM.png ?m=1333490924](http://gallery.twardnw.com/var/albums/Misc/Screen%20shot%202012-04-03%20at%203.06.59%20PM.png?m=1333490924)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:37:18.163

它对我来说工作正常。请参阅[**jsFiddle 演示**](http://jsfiddle.net/neo108/xDqRa/4/)。

也许您缺少其他内容或在代码的其他部分中执行某些操作，您可以发布完整的代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:18:02.977

尝试从您选择的选项中删除该值，然后使用以下命令添加它：

```
$( "#slider" ).slider( "option", "value", 40 ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T22:18:48.250

你能把你的最大值降低到 50，看看滑块手柄是否偏移，如果是，那么它工作得很好。在图像中，它看起来有点偏移。30/250 仅为 12%，可能具有欺骗性。

# php - php 在比较之前转义所有字符

> ID：10002161
> 
> 赞同：0
> 
> 时间：2012-04-03T22:09:17.493
> 
> 标签：php, tags, escaping

我需要一些有效的方法来转义字符串中的所有特殊字符。例如，我的字符串

```
I need some effective way(1) [2] for $10 + e 
```

应转换为

```
I need some effective way\(1\) \[2\] for \$10 \+ e 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T22:14:05.863

尝试`quotemeta`：

[http://uk3.php.net/manual/en/function.quotemeta.php](http://uk3.php.net/manual/en/function.quotemeta.php)

# antlr - Antlr 贪心选项

> ID：10002164
> 
> 赞同：1
> 
> 时间：2012-04-03T22:09:29.893
> 
> 标签：antlr, antlr3

（我根据@Bart Kiers 的第一条评论编辑了我的问题 - 谢谢！）

我有以下语法：

```
SPACE : (' '|'\t'|'\n'|'\r')+ {$channel = HIDDEN;};
START : 'START:';
STRING_LITERAL  : ('"' .* '"')+;
rule    :  START STRING_LITERAL; 
```

我想解析如下语言：'START: "abcd" START: "img src="test.jpg""' （字符串文字可能在字符串文字中）。
如果字符串文字中有字符串文字，则上面定义的语法不起作用，因为对于语言 'START: "img src="test.jpg""'，词法分析器将其翻译成以下标记： START('START:') STRING_LITERAL("img src=") test.jpg。
有什么方法可以定义适合我的问题的语法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T06:57:50.923

这里有几件事是错误的：

*   您不能`fragment`在解析器规则中使用规则。您的语法永远不会创建`START`标记；
*   解析器规则中的`.`char (DOT-char) 匹配*任何标记*，而在词法分析器规则中，它匹配*任何字符*；
*   如果您让`.*`匹配贪婪（并且您已经定义了一个与字符串文字匹配的正确词法分析器规则），则输入`START: "abcd" START: "img src="test.jpg""`中将包含一个大字符串：（`"abcd" START: "img src="test.jpg""`将匹配第一个和最后一个引号）。

因此，您不能使用相同的引号将字符串文字嵌入到字符串文字中。词法分析器无法确定引号是否意味着关闭字符串，或者它是否是（新）嵌入字符串的开始。你需要在你的语法中改变它。

# c++ - 数组输入/输出问题？

> ID：10002166
> 
> 赞同：-5
> 
> 时间：2012-04-03T22:09:32.280
> 
> 标签：c++, arrays

我正在尝试学习 C++，但在编写一个简单的程序时遇到了问题。我想要的是一个函数，它将采用一个整数输入参数，创建一个存储在从 0 到该数字的数组中的数字序列，并且这些数字是一个总和。例如，给定 7 个输出 0 1 2 3 4 5 6 7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:27:59.863

您说您想填充一个数组，在其中插入一个值，例如“7”，该数组将从 0 填充到 7。

这很容易做到：

```
#include <stdio.h>
#include <malloc.h>

int main() {

int i = 0, num = 0; //declare variables
scanf("%d", &num);
int *myArray = (int *)malloc(sizeof(int)*(num+1)); //malloc for array

for (i = 0; i <= num; i++){
    myArray[i] = i;  //fill array as you asked
    printf("%d", myArray[i]);   //print out tested values: 01234567
}

free(myArray);
return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:15:53.417

C风格：

```
#include <stdio.h>
#include <malloc.h>
int main()
{
     int num;
     scanf("%d", &num);
     int *arr = (int *)malloc(sizeof(int)*(num+1));
     int i;
     for(i = 0; i <= num; i++)
         arr[i] = i; //This is the array
     return 0;
} 
```

C++ 风格：

```
 #include <vector>
 #include <iostream>
 using namespace std;
 int main(int argc, char ** argv)
 {
      int num;
      cin >> num;
      vector<int> arr;
      for(int i = 0; i <= num; i++)
           arr.push_back(i);
      return 0;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T22:12:11.043

通过帮助您，从这里开始并填写空白：

```
#include <vector>

std::vector<int> make_sequence(int last)
{
    std::vector<int> result;
    // <fill this in>
    return result;
}

int main()
{
    // <probably do something useful here too...>
    return 0;
} 
```

不过，您将不得不自己做一些事情，这就是 StackOverflow 处理类似家庭作业的问题的方式 :)

# python - python的Pandas数据支柱用于什么？

> ID：10002181
> 
> 赞同：1
> 
> 时间：2012-04-03T22:10:49.247
> 
> 标签：python, pandas

pandas 中至少有四个数据支柱。

->切片
->日期帧
->日期矩阵
->面板

这些的用例是什么。这些文件似乎突出了 slice 和 DataFrame。请给出用例的例子。我知道文档的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T22:24:11.493

3 个主要的数据结构是 Series（1 维）、DataFrame（2D）和 Panel（3D）（http://pandas.pydata.org/pandas-docs/stable/dsintro.html）。DataFrame 就像系列的集合，而 Panel 就像 DataFrame 的集合。在许多问题领域（统计学、经济学、社会科学……）中，这些是要处理的 3 种主要数据。

[http://pandas.pydata.org/pandas-docs/stable/overview.html](http://pandas.pydata.org/pandas-docs/stable/overview.html)

此外，DataMatrix 已被弃用。在 pandas >= 0.4.0 中，DataMatrix 只是 DataFrame 的别名。

# c# - 尝试在 WPF 中绘制矩形立方体的边缘但不成功

> ID：10002182
> 
> 赞同：2
> 
> 时间：2012-04-03T22:10:59.857
> 
> 标签：c#, wpf, 3d, line, edges

我正在尝试仅绘制和显示矩形立方体的边缘或侧面，但使用 WPF 仍然没有成功。它位于我想在 Windows 窗体 (c#) 应用程序中显示的用户控件内。正如我所看到的，WPF 中的 3D 对象是使用三角形制作的，所以我尝试使用矩形来绘制线条，其中矩形的宽度很小（足以被识别为立方体的边缘或侧面）但它没有显示正确。这是我正在使用的代码：

```
<UserControl x:Class="Spatial_and_Temporal_Research.BoundingBoxes"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" DataContext="{Binding}" Height="509" Width="739" FontFamily="Times New Roman">
        <Grid>

            <!-- Place a Label control at the top of the view. -->
            <Label 
                    HorizontalAlignment="Center" 
                    TextBlock.TextAlignment="Center" 
                    FontSize="20" 
                    Foreground="Red" 
                    Content="Model: Cone"/>

            <!-- Viewport3D is the rendering surface. -->
            <Viewport3D Name="myViewport" >

                <!-- Add a camera. -->
                <Viewport3D.Camera>
                    <PerspectiveCamera 
                            FarPlaneDistance="20" 
                            LookDirection="-6, -5, -4" 
                            UpDirection="0,1,0" 
                            NearPlaneDistance="1" 
                            Position="6 5 4"
                            FieldOfView="45" />

                </Viewport3D.Camera>

                <!-- Add models. -->
                <Viewport3D.Children>

                    <ModelVisual3D>
                        <ModelVisual3D.Content>

                            <Model3DGroup >
                                <Model3DGroup.Children>

                                    <!-- Lights, MeshGeometry3D and DiffuseMaterial objects are added to the ModelVisual3D. -->
                                    <AmbientLight Color="White" />

                                    <!-- Define a red cone. -->
                                    <GeometryModel3D>

                                        <GeometryModel3D.Geometry>
                                            <MeshGeometry3D 
        Positions="-0.55 -0.5 -0.5  -0.45 -0.5 -0.5  -0.55 -0.5 0.5  -0.45 -0.5 0.5  -0.55 0.5 -0.5  -0.45 0.5 -0.5  -0.55 0.5 0.5  -0.45 0.5 0.5  0.45 -0.5 -0.5  0.55 -0.5 -0.5  0.45 -0.5 0.5  0.55 -0.5 0.5  -0.5 -0.55 -0.5  -0.5 -0.45 -0.5  0.5 -0.55 -0.5  0.5 -0.45 -0.5  -0.5 -0.55 0.5  -0.5 -0.45 0.5  0.5 -0.55 0.5  0.5 -0.45 0.5  0.45 0.5 -0.5  0.55 0.5 -0.5  0.45 0.5 0.5  0.55 0.5 0.5  -0.5 0.45 -0.5  -0.5 0.55 -0.5  0.5 0.45 -0.5  0.5 0.55 -0.5  -0.5 0.45 0.5  -0.5 0.55 0.5  0.5 0.45 0.5  0.5 0.55 0.5"

         TriangleIndices="0 2 3  3 1 0  4 6 7  7 5 4  1 0 4  4 5 1  3 2 6  6 7 3  8 10 11  11 9 8  13 12 14  14 15 13  17 16 18  18 19 17  20 22 23  23 21 20  17 16 20  20 21 17  19 18 22  22 23 19  25 24 26  26 27 25  29 28 30  30 31 29"                                       
             >

                                            </MeshGeometry3D>
                                        </GeometryModel3D.Geometry>

                                        <GeometryModel3D.Material>
                                            <DiffuseMaterial>
                                                <DiffuseMaterial.Brush>
                                                    <SolidColorBrush 
                                Color="Red" 
                                Opacity="1.0"/>
                                                </DiffuseMaterial.Brush>
                                            </DiffuseMaterial>
                                        </GeometryModel3D.Material>                            

                                    </GeometryModel3D>

                                </Model3DGroup.Children>
                            </Model3DGroup>

                        </ModelVisual3D.Content>

                    </ModelVisual3D>

                </Viewport3D.Children>

            </Viewport3D>
        </Grid>

</UserControl> 
```

我正在考虑尝试其他图形库，例如 opengl 或 gdi+。如果您知道如何在 wpf 中绘制 3D 线，请举例说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-12T22:39:04.197

无论您绘制什么，都需要对其进行细分，因为 WPF 本质上是绘制三角形。

因此，要将线建模为一组镶嵌曲面，首先将线视为*实体*，或者更具体地说，将其视为具有小横截面的长矩形棱柱。如果您以这种方式考虑线条，您将拥有一个六边形实体（包括线条的两个“端盖”，如果您甚至想要它们），您可以定义适当的三角形，WPF 会很好地呈现它。

肯定有点麻烦，但绝对可行。

如果在 WPF 中有更好的方法可以做到这一点，我很想听听。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-02T14:24:25.440

如果您想渲染 3D 对象的网格，有些人推荐使用 Helixtoolkit 插件。但是这个插件中包含的“linevisual3D”非常糟糕......

我鼓励您不要考虑 3D 棱镜（如 SlimsGhost 所说），而是考虑 2D 矩形，然后使用背面材料属性使其双向可见。我已经对此进行了编码，它工作得很好（比 Helix Linevisual3D 更好）

PS：如果这真的引起了兴趣，我可以在另一个专用线程中发布该方法。

# javascript - 计算绘图 Y 轴标签值

> ID：10002188
> 
> 赞同：2
> 
> 时间：2012-04-03T22:11:22.247
> 
> 标签：javascript, plot, label, axis-labels

我正在尝试使用 HTML 5 的 canvas 元素在 javascript 中创建一个绘图函数。我遇到的问题是如何计算 Y 轴的标签。

例如，当你看到一个从 4 到 96 的数字数组时，对我来说，大多数逻辑标签的范围是 0 到 100，步长为 10。

给定一个具有更高类别数字的数组，最大值为 2375，我将使用的最大标签为 2500。

现在，你如何计算这些东西？我一直在寻找解决方案，但还没有找到。

在此先感谢，巴特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T22:18:47.160

不幸的是，没有简单的方法可以做你想做的事。如果你知道你想要一定数量的滴答声（例如十个），你总是可以将最大值除以滴答声的数量。问题是你会有非常可怕的刻度标签。例如，对于 2375，您将每 237.5 个单位有一个刻度，而您可能希望每 250 个刻度有一个刻度，这要“更好”得多。获得这些漂亮的圆形刻度值的唯一方法是具有如下逻辑：

```
if( maxValue < 100 ) {
  tickValue = 10;
else if( maxValue < 500 ) {
  tickValue = 50;
else if( maxValue < 1000 ) {
  tickValue = 100;
else if( maxValue < 1500 ) {
  tickValue = 150;
} // ...etc 
```

# java - 如何在java中清除输入流

> ID：10002189
> 
> 赞同：3
> 
> 时间：2012-04-03T22:11:23.837
> 
> 标签：java

我有来自蓝牙设备的数据，数据存储在输入流中。我从输入流中获取数据并使用 Jfreechart 生成图形。每当我关闭蓝牙设备时，数据就会不断来自输入流，并且会继续生成图形。

当我关闭蓝牙设备时，我需要停止数据和图形。

我正在使用 Java。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T22:21:22.240

每个 InputStream 都有一个`close()`方法可以完全满足您的需求……如果您可以检测到设备已关闭，那就是。

[关于此的文档。](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#close%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:12:53.843

参考链接：[关闭java InputStream](https://stackoverflow.com/questions/3991577/closing-java-inputstreams)

这也解决了我的问题。

```
 Properties props = new Properties();
    InputStream fis = new FileInputStream("message.properties");
    try {
        props.load(fis);
        //omitted.
    } catch (Exception ex) {
        //omitted.
    } finally {
        try {
            fis.close();
            fis=null;
        } catch (IOException ioex) {
            //omitted.
        }

} 
```

# facebook - 更改永久链接结构时是否可以保持社交分享数量？

> ID：10002191
> 
> 赞同：2
> 
> 时间：2012-04-03T22:11:41.107
> 
> 标签：facebook, wordpress, twitter, social, permalinks

该站点的当前结构是 www.mysite.com/2012/Post-Name，但出于 SEO 目的，我想将其更改为 www.mysite.com/Post-Name。通过 WP 管理员很容易，但问题就在这里。我想保留 Twitter、Facebook、Google+ 和 LinkedIn 的社交数量。

我的第一个想法：创建当前帖子的静态版本（目前只有 11 个），这将保持 url 相同。这种方法的问题是这些帖子不再是帖子，因此它们不会出现在类别档案中。它还需要大量时间来转换然后将代码硬编码到循环中。

有没有人能够做到这一点，或者你有什么建议吗？任何帮助将不胜感激。

谢谢你的时间。

巴特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-16T07:40:40.983

经过几周的研究，我想出了这个方法......

如果您想更改永久链接结构并为您的旧帖子保留 Facebook 点赞，以下方法似乎是唯一可行的方法。（301 重定向不会转移 Facebook 喜欢的框数 - [http://www.stateofdigital.com/the-problem-social-buttons-301-redirects](http://www.stateofdigital.com/the-problem-social-buttons-301-redirects)）

1.  记录所有旧帖的网址
2.  安装“自定义永久链接”插件 - [https://wordpress.org/plugins/custom-permalinks/](https://wordpress.org/plugins/custom-permalinks/)
3.  更改永久链接结构
4.  将旧帖子的永久链接（新的永久链接结构）更改回它们的 URL（旧的永久链接结构） - 这样您的新帖子将遵循新的永久链接结构，而旧帖子将保留其旧的永久链接结构
5.  取回 Facebook 赞！

如果您有很多帖子，这将花费很多时间，但它确实有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:08:16.363

我刚刚就这个问题发表了一篇文章。我遇到了同样的问题，并使用以下方法取回了我的 twitter/facebook 计数。

[http://lutfitorla.com/post/keeping-sharethis-digg-digg-social-counts-after-a-wordpress-permalink-change/](http://lutfitorla.com/post/keeping-sharethis-digg-digg-social-counts-after-a-wordpress-permalink-change/)

在此之前我使用了 ShareThis wordpress 插件。我做了一个 wordpress 永久链接更改，从我的地址中删除了 www 并切换到 diggdigg 社交插件。有很多步骤，所以你可以在那里检查。

希望这可以帮助您和其他有同样问题的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-14T14:19:15.817

我相信这对任何人都会有所帮助，我没有尝试过，但值得一读。逻辑很简单，读这个。

```
global $wp_query;
$post = $wp_query->post; //get post content
$id = $post->ID; //get post id
$postlink = get_permalink($id); //get post link
$commentcount = $post->comment_count; //get post comment count
$title = trim($post->post_title); // get post title

//HACK BY JOAO
$sharing_url = get_permalink();

$url_change_id = "1020";
$post_id = $id; 

if ($post_id < $url_change_id) {
$url_id_postfix = "/?p=" . $post_id;

$sharing_url = "http://example.com".$url_id_postfix;
}

$link = explode(DD_DASH,$postlink); //split the link with '#', for comment link
$url = $link[0];

$url = $sharing_url; 
```

所以这希望能为你们解决它，任何问题随时提出！ [http://joaogarin.com/article/changeing-permalinks-wordpress-keeping-social-proof](http://joaogarin.com/article/changing-permalinks-wordpress-keeping-social-proof)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T22:26:57.587

在使用 Twitter / Facebook API 时，我曾经研究过它们如何处理各种 URL 缩短器（例如，如果它们将共享计数归因于原始 URL）。至少在当时，他们处理了那些使用 301 重定向来指示最终原始 URL 的缩短器。

我建议您也这样做 - 确保您有从旧 URL 到新 URL 的 301（永久）重定向。（我很确定应该有一个 WP 插件）。然后，希望 Facebook 和 Twitter 都相应地更新他们的最终 URL，并且您将合并两个 URL 的分数。

# css - div#name vs #name

> ID：10002192
> 
> 赞同：6
> 
> 时间：2012-04-03T22:11:46.630
> 
> 标签：css, naming-conventions

我知道在样式表中 div#name 和 #name 做同样的事情。就我个人而言，我已经开始使用 div#name 进行大多数样式设置，原因是它稍微快一些，这意味着我可以通过查看 CSS 更轻松地识别 HTML 元素。

然而，我似乎看到的所有大型网站都使用#name over div#name（包括堆栈溢出）

事实上，我发现很难找到许多使用 div#name 而不是#name 的网站

做我缺少的#name 有什么好处吗？是否有任何理由在我还不知道的 div#name 上使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T22:15:42.883

由于不需要该`div`部分（因为每个页面都是唯一的），因此可以使用较小的 CSS 文件将其删除。更小的 CSS 文件意味着更快的 HTTP 请求和页面加载时间。`div#name``ID`

正如 NickC 所指出的，缺少`div`允许人们在不破坏样式规则的情况下更改元素的 HTML 标记。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T22:16:04.377

由于 ID 在页面上必须是唯一的，因此您遇到的大多数 ID 在您的样式表中只会出现一次，因此不必费心包含它将出现在哪个元素上是有意义的。排除它还会在您的样式表中节省一些字符，这对于每天访问数百万次的大型网站来说可以节省相当多的带宽。

如果 ID 为“name”的划分可能与 ID 为“name”的跨度不同（其中它会在一种类型的页面上显示一个划分，而在另一种类型的页面上显示一个跨度，则包含元素名称是一个优势。页）。不过，这非常罕见，而且我从未亲自遇到过这样做的网站。通常他们只是为他们使用不同的ID。

确实包含元素名称更快，但是在*ID 选择器*上包含它和排除它之间的速度差异非常非常小。比站点通过排除它节省的带宽要小得多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-03T22:18:33.227

代码可维护性和可读性的问题。

当声明`element#foo`代码样式变得僵硬时——如果想要更改文档的结构或替换元素类型，则还必须更改样式表。

如果声明`#foo`我们将更好地遵守“关注点分离”和“KISS”原则。

另一个重要的问题是 CSS 文件会被几个字符缩小，这可能会在大型样式表上构建许多字符。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-03T22:19:35.310

由于 id like`#name`对页面来说应该是唯一的，因此本身没有理由将元素与它一起放置。***但是，`div#name`将具有更高的优先级***，这可能（或可能不）需要。请参阅[this fiddle](http://jsfiddle.net/bmmpf/)，其中以下内容`#name`不会覆盖`div#name`.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-03T22:31:11.440

我猜想在 id 选择器中包含元素名称实际上会*更慢* ——浏览器通常会散列带有 id 属性的元素，以便更快地查找元素。添加元素名称会增加一个额外的步骤，这可能会减慢它的速度。

您可能希望将元素名称与 id 一起使用的原因之一是您需要创建更强大的选择器。例如，您有一个基本样式表：

```
#titlebar {
     background-color: #fafafa;
} 
```

但是，在一些页面上，您包含另一个样式表，其中包含这些页面独有的一些样式。如果你想覆盖基本样式表中的样式，你可以加强你的选择器：

```
div#titlebar {
    background-color: #ffff00;
} 
```

此选择器更具体（具有更高的[特异性](http://www.w3.org/TR/CSS21/cascade.html#specificity)），因此它将覆盖基本样式。

您希望将元素名称与 id 一起使用的另一个原因是，如果不同的页面对相同的 id 使用不同的元素。例如，当没有合适的链接时使用跨度而不是链接：

```
a#productId {
     color: #0000ff;
}
span#productId {
    color: #cccccc;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-03T22:15:46.237

**仅使用 #name**：

那么第一个明显的优势是编辑 HTML（模板或其他）的人不会在不知道 CSS 的情况下通过更改元素来破坏 CSS。

对于所有新的 HTML5 元素，元素名称已经变得更加可互换，仅出于语义目的（例如，将 a 更改`<div>`为更具语义的`<header>`或`<section>`）。

**使用 div#name**：

你说“理由是它稍微快一点”。如果没有来自渲染引擎开发人员自己的一些确凿事实，我什至会犹豫做出这个假设。

首先，引擎很可能会按 ID 存储元素的哈希表。这意味着创建更具体的标识符不太可能提高速度。

其次，更重要的是，这样的实现细节会因浏览器而异，并且随时可能发生变化，因此即使您有硬数据，也不应该让它成为您开发的因素。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-03T22:30:43.097

我使用 div#name 是因为代码在 CSS 文件中更具可读性。

我也像这样构建我的 CSS：

```
ul
{
    margin: 0;
    padding: 0;
}
ul.Home
{
    padding: 10px 0;
}
ul#Nav
{
    padding: 0 10px;
} 
```

所以我开始通用，然后变得更具体。

这对我来说很有意义。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-25T15:30:23.540

链接 div 名称：http: [//jsfiddle.net/wWUU7/1/](http://jsfiddle.net/wWUU7/1/)

**CSS：**

```
<style>
div[name=DIVNAME]{
color:green;
cursor:default;
font-weight:bold;
}

div[name=DIVNAME]:hover{
color:blue;
cursor:default;
font-weight:bold;
}
</style> 
```

**HTML：**

```
<div name="DIVNAME">Hover This!</div> 
```

**Css 选择器列表：http:** [//www.w3schools.com/cssref/css_selectors.asp](http://www.w3schools.com/cssref/css_selectors.asp)

# ios - 更改 GKTurnBasedMatch 的“轮到你”和“游戏结束”通知中的文本？

> ID：10002193
> 
> 赞同：4
> 
> 时间：2012-04-03T22:11:47.550
> 
> 标签：ios, notifications, game-center, gamekit, multiplayer

我正在使用 GameKit 和 GKTurnBasedMatch 实现基于回合的多人游戏。游戏结束时，玩家会收到“游戏结束”通知；当轮到玩家时，他们会收到“轮到你”的通知。这些通知通过使用 GKTurnBasedMatch 自动发生。

是否可以更改这些通知显示的文本或图标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T15:53:14.343

`message`是的，您可以在调用结束回合的任何函数之前通过设置属性来更改文本：

要设置自定义消息：

```
myTurnBasedMatch.message = @"It's now your turn!" 
```

让 Game Center 选择消息：

```
myTurnBasedMatch.message = @"" // or = nil 
```

一旦你开始设置`message`自己，你需要每次都设置它（否则将使用之前的消息，即使在不同的情况下，比如有人赢得比赛）。

# asp.net - 动态 Facebook 开放图元标签 - 如何为标签添加前缀？

> ID：10002194
> 
> 赞同：0
> 
> 时间：2012-04-03T22:11:53.807
> 
> 标签：asp.net, facebook

我正在使用 DotNetNuke 内容管理系统，并正在为它创建一个自定义模块。我想动态生成打开的图元标记并将其写入该`<head>`部分。那部分我可以完成，但现在我需要添加`<head>`标签的“前缀”部分，即看起来像这样：

```
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns# YOUR_NAMESPACE: http://ogp.me/ns/apps/YOUR_NAMESPACE#"> 
```

你如何以编程方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:57:23.157

明白了：Page.Header.Attributes.Add("prefix", "og: ogp.me/ns# fb: ogp.me/ns/fb# thedynoroom: ogp.me/ns/fb/thedynoroom#";)

# c# - 终止进程需要 WQL "SELECT *..."？

> ID：10002207
> 
> 赞同：0
> 
> 时间：2012-04-03T22:13:04.710
> 
> 标签：c#, .net, wmi, wql

我正在编写代码以在指定时间后终止特定进程。我正在使用以下代码（为帖子简化）：

```
ManagementObjectSearcher searcher = new ManagementObjectSearcher("SELECT Name, CreationDate FROM Win32_Process WHERE Name = 'foo'"); 

foreach (ManagementObject process in searcher.Get())
{
    process.InvokeMethod("Terminate", null);
} 
```

问题 - 尝试执行终止时使用 WQL 语句`SELECT Name, CreationDate`引发异常：

```
"Operation is not valid due to the current state of the object." 
```

...但是，使用`SELECT *`工作并终止该过程。为什么会这样——结果集中是否需要特定的 WMI 列？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T23:04:52.323

当您执行 WMI 方法时，将执行 WMI 内部搜索[WMI 对象路径](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394566%28v=vs.85%29.aspx)以识别该方法上的实例。

在这种情况下，对于[`Win32_Process`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394372%28v=vs.85%29.aspx)WMI 类，WMI 对象路径如下所示`Win32_Process.Handle="8112"`，因此，正如您所见，该`Handle`属性是 WMi 对象路径的一部分，并且必须包含在您的 WQL 语句中，

检查这个样本。

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;
//this will all the notepad running instances

namespace GetWMI_Info
{
    class Program
    {

        static void Main(string[] args)
        {
            try
            {
                string ComputerName = "localhost";
                ManagementScope Scope;                

                if (!ComputerName.Equals("localhost", StringComparison.OrdinalIgnoreCase)) 
                {
                    ConnectionOptions Conn = new ConnectionOptions();
                    Conn.Username  = "";
                    Conn.Password  = "";
                    Conn.Authority = "ntlmdomain:DOMAIN";
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), Conn);
                }
                else
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), null);

                Scope.Connect();
                ObjectQuery Query = new ObjectQuery("SELECT Handle FROM Win32_Process Where Name='notepad.exe'");
                ManagementObjectSearcher Searcher = new ManagementObjectSearcher(Scope, Query);

                foreach (ManagementObject WmiObject in Searcher.Get())
                {
                    WmiObject.InvokeMethod("Terminate", null);

                }
            }
            catch (Exception e)
            {
                Console.WriteLine(String.Format("Exception {0} Trace {1}",e.Message,e.StackTrace));
            }
            Console.WriteLine("Press Enter to exit");
            Console.Read();
        }
    }
} 
```

# python - 从联合身份生成唯一的数据存储密钥

> ID：10002209
> 
> 赞同：2
> 
> 时间：2012-04-03T22:13:40.327
> 
> 标签：python, google-app-engine, authentication

我需要一个唯一的数据存储密钥，用于通过 openid 使用谷歌应用程序引擎的 python 2.7 运行时进行身份验证的用户。

我应该使用`User.federated_identity()`or`User.federated_provider() + User.federated_identity()`吗？

换句话说，`User.federated_identity()`对于所有提供商或仅对一个特定提供商来说是唯一的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T06:13:19.663

`User.federated_identity()`“返回用户的 OpenID 标识符。”，根据定义是唯一的（它是唯一标识用户的 URL）。

# ios - 旧项目中新文件的本地化会破坏应用程序

> ID：10002210
> 
> 赞同：0
> 
> 时间：2012-04-03T22:13:42.993
> 
> 标签：ios, localization, xcode4.2

晚上好

我想在我现有的应用程序中添加一个新的一年，一个新的卷作为 plist 文件。该应用程序已本地化为 4 种语言，因此新文件也必须本地化。语言是“英语”、“德语”、“法语”和“意大利语”。

但是当我这样做时，Xcode 在现有的“German.lproj”旁边创建了一个目录“de.lproj”，法语和意大利语的行为相同，但英语不一样。旧的本地化文件现在位于目录“German.lproj”中，新生成的 plist 位于名为“de.lproj”的文件夹中。

然后应用程序将不再识别本地化字符串，除了英文版本。

如何在不破坏其余部分的情况下向该项目添加新的本地化文件？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T23:01:31.193

您应该使用[Localization Suite](http://www.loc-suite.org/)来管理您的翻译。这样，您可以让 loc-suite 扫描原始 .plist 文件中的更改，并告诉您哪些已翻译，哪些未翻译。Loc-suite 还可以更新您的本地化 .plist 文件并删除无效条目。

不过，这个问题在 stackoverflow 上有点偏离主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:06:06.183

最后我解决了这样的问题：

1.  对 Finder中的每个本地化文件（`plist`和`strings`文件）进行备份，并将它们收集到每种语言的文件夹中。
2.  在 Xcode 中，删除这些文件的所有本地化，以便唯一剩下的语言是`English`.
3.  在 Finder 中，删除项目文件夹中的旧`lproj`目录，但`English.lproj`.
4.  在 Xcode 中，为每个文件添加以前删除的本地化。将文件内容复制到新生成的本地化文件中。

也许这可以帮助某人。

# tinymce - tinymce 无法在 Firefox 上运行

> ID：10002219
> 
> 赞同：5
> 
> 时间：2012-04-03T22:14:06.740
> 
> 标签：tinymce

我有三个使用 tinymce 作为文本区域的文本区域。它们都在 chrome 中工作，但在 Firefox 上不工作。我正在使用 php 代码从 mysql 加载文本。第一个 textarea 加载正常并且工作正常，但另外两个短暂地闪烁内容然后它就消失了。我无法在框中插入任何东西。这是脚本：

```
<!-- Load TinyMCE -->
<script type="text/javascript"
src="functions/tinymce/jscripts/tiny_mce/jquery.tinymce.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('textarea.tinymce').tinymce({
        // Location of TinyMCE script
        script_url : 'functions/tinymce/jscripts/tiny_mce/tiny_mce.js',

        // General options
plugins : '-examples', // - tells TinyMCE to skip the loading of the plugin
mode : "textareas",
theme : "advanced",
theme_advanced_buttons1 :
"mylistbox,mysplitbutton,bold,italic,underline,separator,strikethrough,justifyleft,
justifycenter,justifyright,justifyfull,bullist,numlist,undo,redo,link, 
unlink",
theme_advanced_buttons2 : "code,forecolor,backcolor",
theme_advanced_buttons3 : "",
theme_advanced_toolbar_location : "top",
theme_advanced_toolbar_align : "left",
theme_advanced_statusbar_location : "bottom"

    });

    $('textarea.tinymce2').tinymce({
        // Location of TinyMCE script
        script_url : 'functions/tinymce/jscripts/tiny_mce/tiny_mce.js',

        // General options
plugins : '-examples', // - tells TinyMCE to skip the loading of the plugin
mode : "textareas",
theme : "advanced",
theme_advanced_buttons1:
"mylistbox,mysplitbutton,bold,italic,underline,separator,strikethrough,justifyleft,
justifycenter,justifyright,justifyfull,bullist,numlist,undo,redo,link,unlink",
theme_advanced_buttons2 : "code,forecolor,backcolor",
theme_advanced_buttons3 : "",
theme_advanced_toolbar_location : "top",
theme_advanced_toolbar_align : "left",
theme_advanced_statusbar_location : "bottom"

    }); 

    $('textarea.tinymce3').tinymce({
        // Location of TinyMCE script
        script_url : 'functions/tinymce/jscripts/tiny_mce/tiny_mce.js',

        // General options
plugins : '-examples', // - tells TinyMCE to skip the loading of the plugin
mode : "textareas",
theme : "advanced",
theme_advanced_buttons1:
"mylistbox,mysplitbutton,bold,italic,underline,separator,strikethrough,justifyleft,
justifycenter,justifyright,justifyfull,bullist,numlist,undo,redo,link,unlink",
theme_advanced_buttons2 : "code,forecolor,backcolor",
theme_advanced_buttons3 : "",
theme_advanced_toolbar_location : "top",
theme_advanced_toolbar_align : "left",
theme_advanced_statusbar_location : "bottom"

    }); 

});
</script>
 <!-- /TinyMCE --> 
```

任何想法如何解决这一问题？谢谢兰迪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T22:15:49.577

这是 tinyMCE 或最新 FF 更新中的错误。

无论哪种方式，解决方法都是更改一些 CSS 值（例如，通过拖动使可编辑内容区域变大/变小）以使其重绘内容。

在 TinyMCE 错误跟踪器上也有[一张关于它的票。](http://www.tinymce.com/develop/bugtracker_view.php?id=5082)在修复该错误之前，您将不得不寻求解决方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-19T05:34:45.080

你的 javascript 已关闭。如果您使用的是 Web 开发人员工具插件，请检查浏览器的左上角并单击禁用 > 禁用 javascript > 取消选中禁用所有脚本。那可行。

# c# - 大型静态对象列表的数据绑定选项？

> ID：10002222
> 
> 赞同：2
> 
> 时间：2012-04-03T22:14:29.143
> 
> 标签：c#, wpf, data-binding

我是 WPF 新手，对其强大的数据绑定功能感到惊讶。但是，在阅读了大量文章后，我不确定我的项目应该使用哪个选项。

=========== 项目详细信息（涉及查看本地存储的推文存档）：

*   数据由本地存储的 Twitter 推文组成——超过 17,000 条推文以 JSON 格式存储在单个文件中（项目未使用或不需要 Internet 连接）。

*   我正在使用 JSON.Net 解析文件中的 JSON，每条推文的数十个 JSON 名称/值对都分配给推文对象列表（将每条推文的 JSON 数据转换为推文对象）。

*   我的程序将使用两个控件来显示数据。

**WPF 控件 #1（类似于电子表格）**：以网格模式和文本格式显示每个 Tweet 行（将有 17,000 多行数据）。因为有几十个字段，所以用户可以选择在有限数量的列（5 左右）中显示哪些字段，这些列将是可见的（例如，日期、发件人、文本等）。用户可以搜索（通过 Linq）、排序和选择推文行。

**WPF 控件 #2**：以与在 Twitter 中出现的相同格式/外观显示在控件 #1 中选择的每条推文（例如，漂亮的颜色、基本文本、链接等在一个小矩形中 - Twitter 发布了一个标准推文应该如何出现）。如果在控件 #1 中未选择任何推文，则它会通过滚动显示所有 17,000 多条推文。

绑定：当用户选择控件#1 中的推文行时，控件#2 会立即更新以仅以漂亮的图形格式显示选定的推文，反之亦然（即，在控件中选择推文#图 2 显示了控件#1) 中所选推文的数据。还有一个用于选择日期的日历，这将导致相关联的推文显示在控件#1 和控件#2 中。

我正在考虑将 CollectionViewSource 用于控件#1，但是，这似乎不正确，因为**用户从不删除推文或将推文添加到推文对象列表中**。但是，尝试使用 17,000 多个数据行并绑定到控件 #2 中显示的推文来滚动、排序和保持一切顺利运行，对于其他选项来说处理可能太多了（我确实了解某些选项如何在必要时是虚拟的）。也许 DataGrid 是要走的路？

==== **问题：我应该为 WPF 控件 #1 和 #2 使用什么？**

控件 #1 的选项包括：CollectionViewSource、DataGrid、ListView、ListBox

控制#2 的选项包括： ? ListBox 托管图像？

感谢您的时间、考虑和帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T02:31:55.913

如果您不进行编辑，请转到 ListView GridView（支持列）并绑定到 List（现在 List 可能是 LINQ 的动态输出，但它仍然是一个 List）。CollectionViewSource 并不是真正的编辑——它是关于过滤和排序的——如果你要使用 LINQ，那么为什么要把 CollectionViewSource 放在图片中。多主控 A 主控 B 和 B 主控 A 有点存在 - 也许重新考虑这个逻辑。使用虚拟化可以完成 17000 条推文。

# javascript - 返回复选框值的 obj

> ID：10002223
> 
> 赞同：0
> 
> 时间：2012-04-03T22:14:32.620
> 
> 标签：javascript, jquery, forms

我正在尝试获取复选框名称和值的对象。假设我有这个表格：

```
<form>
<input type="checkbox" name="email" />
<input type="checkbox" name="name" />
<input type="checkbox" name="hi" /> 
```

并假设检查了第一个和第三个，我想要这个 obj：

```
{ email: 1, name: 0, hi: 1 } 
```

这是我尝试过的：

```
$(':checkbox').map(function() { return this.name + '=' + (this.checked ? 1 : 0) } }).get(); 
```

这给了我：

```
['email=1', 'name=0', 'hi=1'] 
```

但我不知道从这里做什么。

我要解决这个问题了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T22:25:57.773

根据[方法 doco](http://api.jquery.com/map/)，返回[“`.map()`](http://api.jquery.com/map/)`.map()`一个 jQuery 包装的数组”。鉴于您想要一个对象，您可以改为执行以下操作：

```
var checkboxes = {};
$(':checkbox').each(function() {
    checkboxes[this.name] = this.checked ? 1 : 0;
}); 
```

请注意，如果您有同名的复选框（就 html 表单而言是有效的），那么您的对象将只保留每个名称的最后一个复选框的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:24:50.143

您可以尝试使用关联数组语法设置属性：`ob["property"] = ...`

看到这个工作小提琴：http: [//jsfiddle.net/tuando/JwYFz/](http://jsfiddle.net/tuando/JwYFz/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T22:27:51.593

是的，你这样做是非常错误的。从您的使用来看，您`'='`似乎希望该函数返回 JavaScript 代码，然后使用`eval`. 这不是 JavaScript 的运作方式。由于您要连接`this.name`字符串和数字，因此 JavaScript 会执行其隐式[类型强制](http://blog.jeremymartin.name/2008/03/understanding-loose-typing-in.html)并从函数返回一个字符串，因此您会得到一个字符串数组。

**该`.map()`函数将始终返回一个数组**；对于不返回数组的杂项操作，您应该使用泛型`.each()`迭代器。

这是一个快速插件，可以满足您的需求。

```
$.fn.serializeCheckboxes = function() {

    var ret = {};
    this.each(function(ix,elm) {
        ret[elm.name] = elm.checked ? 1 : 0;
    });
    return ret;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-03T22:28:33.393

试试这个：

```
$('input[type="checkbox"]').each(function() {
        var name = $(this).attr('name');
        obj[name] = $(this).is(':checked') ? 1 : 0;
 }); 
```

[http://jsfiddle.net/T7fja/1/](http://jsfiddle.net/T7fja/1/)

# javascript - 一个神秘的填充物破坏了我的设计的原因？

> ID：10002225
> 
> 赞同：1
> 
> 时间：2012-04-03T22:14:53.090
> 
> 标签：javascript, twitter, padding, alignment

在过去的几个小时里，我一直试图解决这个问题，但没有成功。如果你看看这个[页面](http://ftfranes.com/mliad2/)。

在标题为“最新推文”的左侧，推文列表中有一个神秘的左侧填充。我可以向你保证，我没有为它添加任何样式来填充......无论如何我都不知道。

在过去的几个小时前，在我对页面进行重大更改之前，它看起来很完美。这是应该如何对齐的[屏幕截图。](https://i.imgur.com/vSHcZ.png)

![截屏](../Images/e42f810d561e6e049fea79012cfc6094.png)

现在是晚上 11.15，我累了，我想看权力的游戏。有人可以帮我解决这个问题，这样我就可以结束了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:19:51.350

你有`margin-left: 15px;`。`.projects li`

这就是导致向右移动的原因......

也许您将它添加到视频列表中，但它影响了推文列表，因为两者都在该`projects`元素下。

添加`.projects .sidebar_left li{margin-left:0}`修复它..

* * *

**更新**

或者更好，因为您已经为他们`#twitter_update_list li`添加了规则`margin-left:0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:26:50.860

Gaby 击败了我来发布答案，但是您可能会发现它自己使用 Google Chrome 检查元素 - 您可以单击一个元素，它会告诉您该元素具有什么样式，如下所示：

```
.projects li {
width: 202px;
display: block;
float: left;
margin-right: 15px;
margin-left: 15px;
margin-bottom: 40px;
} 
```

更好的是，您似乎能够实时测试样式更改。很酷，其实。

# ruby - nginx 魔法子域 - 需要 yoda 的帮助

> ID：10002226
> 
> 赞同：0
> 
> 时间：2012-04-03T22:15:03.770
> 
> 标签：ruby, nginx

我计划为 ruby​​ 开发提供一些免费的托管服务。目前我必须手动编辑 nginx 以在创建用户时添加子域以指向他的目录 /home/$user/www/public

所以对于用户 yoda 我有这样的东西

```
server {
      listen 80;
      server_name yoda.jedi.am;
   root /home/yoda/www/public;   
   passenger_enabled on;
} 
```

现在假设我添加用户 obione 无论如何都可以将 nginx 设置为使用 root /home/user/www/public 自动服务器 user.jedi.am 并且如果不能重定向到主 root ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T22:03:24.870

尝试更多类似的东西：

```
 server {
            listen 80;
            server_name ~^(.*)\.jedi\.am$
            if ($hostname ~ ^(.*)\.jedi\.am$) {
                    set $user $1;
            }
            if ( ! -d /home/$user/www/public ) {
                    rewrite . http://jedi.am/ redirect;
            }
            root /home/$user/www/public;
            passenger_enabled on;
    } 
```

未经测试，但这个或类似的东西应该可以工作。

# php - Linkify 正则表达式函数 PHP 大胆火球法

> ID：10002227
> 
> 赞同：4
> 
> 时间：2012-04-03T22:15:04.883
> 
> 标签：php, regex, linkify

所以，我知道有很多关于 SO 的相关问题，但没有一个是我正在寻找的。我正在尝试实现一个 PHP 函数，它将文本 URL 从用户生成的帖子转换为链接。我在页面底部使用来自 Daring Fireball 的“改进的”正则表达式：http: [//daringfireball.net/2010/07/improved_regex_for_matching_urls](http://daringfireball.net/2010/07/improved_regex_for_matching_urls) 该函数不返回任何内容，我不知道为什么。

```
<?php
if ( false === function_exists('linkify') ):   
  function linkify($str) {
$pattern = '(?xi)\b((?:https?://|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:\'".,<>?«»“”‘’]))';     
return preg_replace($pattern, "<a href=\"\\0\" rel=\"nofollow\" target=\"_blank\">\\0</a>", $str);      
}
endif;
?> 
```

有人可以帮我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-03T22:18:33.083

尝试这个：

```
$pattern = '(?xi)\b((?:https?://|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`\!()\[\]{};:\'".,<>?«»“”‘’]))';     
return preg_replace("!$pattern!i", "<a href=\"\\0\" rel=\"nofollow\" target=\"_blank\">\\0</a>", $str); 
```

PHP 的`preg`函数确实需要[分隔符](http://de3.php.net/manual/en/regexp.reference.delimiters.php)。末尾的`i`使其不区分大小写

## 更新

如果您`#`用作分隔符，则不需要转义`!`模式中的 ，因为使用原始模式字符串（模式没有 a `#`）：`"#$pattern#i"`

## 更新 2

要确保链接正确，请执行以下操作：

```
$pattern = '(?xi)\b((?:https?://|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:\'".,<>?«»“”‘’]))';
return preg_replace_callback("#$pattern#i", function($matches) {
    $input = $matches[0];
    $url = preg_match('!^https?://!i', $input) ? $input : "http://$input";
    return '<a href="' . $url . '" rel="nofollow" target="_blank">' . "$input</a>";
}, $str); 
```

这现在将附加`http://`到 url，这样浏览器就不会认为它是相对链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-08T02:30:02.183

[我只是想从d_inevitable](https://stackoverflow.com/users/1238764/d-inevitable)上面的答案中使用相同的正则表达式从字符串中获取 url，并且不希望将它们变成链接或关心字符串的其余部分，我只想要字符串中的 url 所以这就是我所做的。希望能帮助到你。

```
/**
 * Returns the urls in an array from a string.
 * This dos NOT return the string, only the urls with-in.
 */
function get_urls($str){

    $regex = '(?xi)\b((?:https?://|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:\'".,<>?«»“”‘’]))';
    preg_match_all("#$regex#i", $str, $matches);
    $urls = $matches[0];
    return $urls;

} 
```

# java - org.hibernate.ObjectNotFoundException：不存在具有给定标识符的行：单表查询

> ID：10002228
> 
> 赞同：2
> 
> 时间：2012-04-03T22:15:07.567
> 
> 标签：java, sql-server, hibernate

我正在使用hibernate做一个简单的查询。没有连接。我要做的就是从表中检索最大 id。该服务运行了几个月，但突然，在过去的两周内，我收到了可怕的 No row with the given identifier exists 错误。即使此表包含数百万行。这怎么可能发生？

这是进行查找的服务：

```
try {
    session = HibernateUtils.beginTransaction("mydatabase");
    criteria = session.createCriteria(MyClass.class);
    criteria.setMaxResults(1);
    Order order = Order.desc("id");
    criteria.addOrder(order);
    myclass = (MyClass) criteria.uniqueResult();
    } catch (HibernateException e_) {
        e_.printStackTrace();
        String msg = "Problem getting maximum id from myclass table "
            +  e_.getCause();
    LOG.error(msg);
    throw new DataBaseAccessException(msg);
    }finally {
        try {
            HibernateUtils.closeSessions();
        } catch (Exception e_) {
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T02:05:13.447

即使您正在对没有连接的单个表进行查询，查看查询中涉及的底层模型也很重要。如果该模型具有连接列并且关联的外键不存在于连接表中，则休眠将失败。

在这种情况下，底层模型如下： 有一个连接列 cid 映射到另一个表 code_table。但是code_table中没有对应的条目与icdtable中正在查询的值。尽管查询仅在 icdtable 上进行，但底层模型与另一个表连接的事实要求表之间存在数据完整性，而不仅仅是在执行查询的表中。

```
@Entity
@Table (name="icdtable", catalog="emscribedx")
public class Icdtable {
private Long _icdid;
private Long _cid;
private String _icdcode; //TODO: add this to hibernate mappings ('PN' or 'NN')
private String _status;
private String _create_date;
private String _kstatus;
private int _enterorder;
private String _poa;
private String _ppoa;
private String _userid;
private Code_table _code_table1;
private List<Proceduredetail> _proceduredetails;

@Id
@Column (name = "icdid")
public Long getIcdid() {
    return _icdid;
}
public void setIcdid(Long icdid_) {
    _icdid = icdid_;
}

@Column (name = "cid")
public Long getCid() {
    return _cid;
}
public void setCid(Long cid_) {
    _cid = cid_;
}

@Column (name = "icdcode")
public String getIcdcode() {
    return _icdcode;
}
public void setIcdcode(String icdcode_) {
    _icdcode = icdcode_;
}

@Column (name = "status")
public String getStatus() {
    return _status;
}
public void setStatus(String status_) {
    _status = status_;
}

@Column (name = "create_date")
public String getCreate_date() {
    return _create_date;
}
public void setCreate_date(String createDate_) {
    _create_date = createDate_;
}

@Column (name = "kstatus")
public String getKstatus() {
    return _kstatus;
}
public void setKstatus(String kstatus_) {
    _kstatus = kstatus_;
}

@Column (name = "enterorder")
public int getEnterorder() {
    return _enterorder;
}
public void setEnterorder(int enterorder_) {
    _enterorder = enterorder_;
}

@Column (name = "poa")
public String getPoa() {
    return _poa;
}
public void setPoa(String poa_) {
    _poa = poa_;
}

@Column (name = "ppoa")
public String getPpoa() {
    return _ppoa;
}
public void setPpoa(String ppoa_) {
    _ppoa = ppoa_;
}

@Column (name = "userid")
public String getUserid() {
    return _userid;
}
public void setUserid(String userid_) {
    _userid = userid_;
}

@ManyToOne
@JoinColumn(name = "cid", insertable=false, updatable=false)
public Code_table getCode_table() {
    return _code_table1;
}
public void setCode_table(Code_table code_table_) {
    _code_table1 = code_table_;
}

@OneToMany (mappedBy = "icdtable", targetEntity = Proceduredetail.class, cascade =  CascadeType.ALL)
public List<Proceduredetail> getProceduredetails() {
    return _proceduredetails;
}
public void setProceduredetails(List<Proceduredetail> proceduredetails_) {
    _proceduredetails = proceduredetails_;
} 
```

# actionscript-3 - 不确定如何在检测到碰撞后从舞台上删除对象及其阵列

> ID：10002229
> 
> 赞同：0
> 
> 时间：2012-04-03T22:15:12.310
> 
> 标签：actionscript-3

场景：在 Main 中，Bullet 类的实例被生成并添加到舞台，而到数组 bltarray 中，Enemy 类的实例被生成，添加到舞台并添加到 nmearray。这工作正常。

问题似乎是偶然出现的，即它可以工作，然后很快就突然不起作用，当它不起作用时，我收到输出错误的垃圾邮件并且分数显示不断上升，注意它是子弹和敌人的同一个实例。

```
Bullet instance98 hit Enemy instance45
ArgumentError: Error #2025: The supplied DisplayObject must be a child of the caller.
at flash.display::DisplayObjectContainer/removeChild()
at Main/everyframe()
Bullet instance98 hit Enemy instance45
ArgumentError: Error #2025: The supplied DisplayObject must be a child of the caller.
at flash.display::DisplayObjectContainer/removeChild()
at Main/everyframe() 
```

我不明白的是，

我正在使用的代码如下（也在主代码中）

```
for (var j=0;j<bltarray.length;j++){
    if (bltarray[j].hitTestObject(nmearray[i])){
        trace("Bullet "+bltarray[j].name+" hit Enemy "+nmearray[i].name);
            score += 1;
            scorevalue.text = score.toString();
            // Remove dead objects from stage
            stage.removeChild(nmearray[i]);
            stage.removeChild(bltarray[j]);
            // Remove reference to objects from array
            nmearray.splice(i,1);
            bltarray.splice(j,1);
            trace('nmearray length:'+nmearray.length)
    }
} 
```

子弹和敌人类都有自己的 REMOVED_FROM_STAGE 事件侦听器来删除其他事件侦听器。

当我这样做时，这个错误也会偶尔弹出。

```
TypeError: Error #2007: Parameter hitTestObject must be non-null.
at flash.display::DisplayObject/_hitTest()
at flash.display::DisplayObject/hitTestObject()
at Main/everyframe() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T22:31:34.327

在 for 循环期间进行拼接时，您可能会遇到一个常见问题。基本上，当你从一个数组中拼接一个元素时，下一个元素会立即被推到那个位置，导致你的 for 循环实际上并没有检查每个元素。

尝试将您的 for 循环切换到反向 for 循环，看看会发生什么：

```
for (var j=bltarray.length-1;j >= 0;j--){
//do stuff
} 
```

**编辑：**将 for 循环固定为 length-1

# xcode4.2 - 为什么我的所有索引值都没有显示在这个索引表视图中？

> ID：10002232
> 
> 赞同：0
> 
> 时间：2012-04-03T22:15:21.227
> 
> 标签：xcode4.2

在我的应用程序中有大约 40 个几乎相同的表视图，这似乎是一个非常奇怪的表视图。其中一个不会显示所有索引值，无论我放什么，它总是至少下降一个值，即最后一个值，无论有多少。[例如只有值“A”，它将显示“A”，带有“A”和“B”，只显示“A”，带有“A”，“B”和“C”，它只显示“A”和“B”。在调试模式下，Xcode 表示数组具有相关数量的对象，但即便如此它们也不会显示！你以前见过这个吗？？

```
- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {

    NSMutableArray *tempArray = [[NSMutableArray alloc] initWithObjects:

                             @"A",
                             @"B",
                             @"C",
                             @"D",
                             @"E",
                             @"G",
                             @"H",
                             @"I",
                             @"J",
                             @"K",
                             @"L",
                             @"M",
                             @"N",
                             @"O",
                             @"P",
                             @"S",
                             nil];

return tempArray;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:21:14.793

故事板中的窗口视图尺寸没有正确排列 - 毕竟是一个简单的解释！:-)

# java - 所有 Java 版本的 Jar 文件？

> ID：10002237
> 
> 赞同：0
> 
> 时间：2012-04-03T22:15:49.790
> 
> 标签：java, jar

我一直在开发 Java 游戏，最近想看看其他人是否可以下载并玩它。在使用 Eclipse 并将游戏制作成一个可运行的 jar 文件并将库提取到项目中后，我让几个人下载并尝试玩。所有人都有同样的问题，罐子打不开。可以作为我网站上的小程序，或者只是一个桌面应用程序。他们会得到一些类错误，当我在网上查找时，这意味着他们需要更新他们的 Java 版本。有没有办法让我的 jar 文件可以被大多数（如果不是所有的 Java 版本）使用？

**问题**：jar 文件无法被其他人打开。获取类错误

**假设**：Eclipse 导致了问题

**其他信息**：我使用 jre7 和 jdk1.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:20:06.710

我并没有声称自己是 Little Willis 的专业人士，但是在编写游戏时，你必须记住，如果你正在为类似 jre7 的东西编写代码，如果用户只有 jre5，你可能会发现问题，因为他们可能会更新库信息失踪。但是，我没有；相信这是你问题的根源。只是我以前错过的东西。

你能发布他们得到的错误吗？

**编辑**jahroy 原始帖子底部的评论和 Jack Edmonds 给出的步骤，概述了我所说的问题以及如何解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:30:54.930

默认情况下，Eclipse 可能正在为 Java 1.7 编译。如果您的用户使用较低版本的 Java，您的程序将无法运行。您需要更改目标 Java 版本。在日食中，

1.  右键单击您的项目
2.  点击“属性...”
3.  点击“Java Compiler”（它在旁边），
4.  确保选中“启用项目特定设置”。
5.  将所有显示“1.7”的下拉菜单更改为“1.4”（或您想要支持的最旧的 Java 版本）。

重新生成 .jar 并且它应该可以工作（或者至少您的用户应该停止收到版本错误）。

当您使用较低版本的 Java 时，请注意某些语言功能和类可能不再可用。幸运的是，如果您不小心使用了这些新功能中的任何一个，您将会遇到编译器错误。

您还应该发布用户遇到的确切错误。

# git - git checkout --track origin/branch 和 git checkout -b branch origin/branch 的区别

> ID：10002239
> 
> 赞同：269
> 
> 时间：2012-04-03T22:15:53.300
> 
> 标签：git, branch, git-branch, git-checkout

有人知道这两个用于切换和跟踪远程分支的命令之间的区别吗？

```
git checkout -b branch origin/branch
git checkout --track origin/branch 
```

我认为两者都跟踪远程分支，以便我可以将更改推送到原始分支，对吗？

有什么实际区别吗？

* * *

## 回答 #1

> 赞同：355
> 
> 时间：2012-04-03T22:39:05.570

这两个命令具有相同的效果（[感谢 Robert Siemer 指出的答案](https://stackoverflow.com/a/29784240/825924)）。

当使用不同名称的本地分支时，实际差异就出现*了*：

*   `git checkout -b mybranch origin/abranch`将创建`mybranch`和跟踪`origin/abranch`
*   `git checkout --track origin/abranch`只会创建' `abranch`'，而不是具有不同名称的分支。

（也就是说，[正如](https://stackoverflow.com/questions/10002239/difference-between-git-checkout-track-origin-branch-and-git-checkout-b-branch/10002469#comment82673579_10002469)[Sebastian Graf](https://stackoverflow.com/users/388010/sebastian-graf)所评论的，如果本地分支*不*存在。
如果存在，则需要`git checkout -B abranch origin/abranch`）

* * *

注意：使用 Git 2.23（2019 年第三季度），将使用**[新命令`git switch`](https://stackoverflow.com/a/57066202/6309)**：

```
git switch -c <branch> --track <remote>/<branch> 
```

> 如果分支存在于多个遥控器中并且其中一个由`checkout.defaultRemote`配置变量命名，我们将使用该分支来消除歧义，即使它`<branch>`在所有遥控器中不是唯一的。
> 将其设置为例如，如果不明确但存在于“原点”远程上，`checkout.defaultRemote=origin`则始终从那里签出远程分支。`<branch>`

这里，' `-c`' 是新的 ' `-b`'。

* * *

首先，一些背景：**跟踪**意味着本地分支将其上游设置为远程分支：

```
# git config branch.<branch-name>.remote origin
# git config branch.<branch-name>.merge refs/heads/branch 
```

* * *

`git checkout -b branch origin/branch`将要：

*   创建/重置`branch`到引用的点`origin/branch`。
*   创建分支`branch`（使用[`git branch`](http://git-scm.com/docs/git-branch)）并跟踪远程跟踪分支`origin/branch`。

> **当本地分支从远程跟踪分支启动时，Git 会设置分支（特别是`branch.<name>.remote`和`branch.<name>.merge`配置条目）**，以便`git pull`从远程跟踪分支适当地合并。
> 可以通过全局`branch.autosetupmerge`配置标志更改此行为。可以使用`--track`and`--no-track`选项覆盖该设置，稍后使用 git branch 进行更改`--set-upstream-to`。

* * *

并且`git checkout --track origin/branch`会做同样的事情[`git branch --set-upstream-to`](https://git-scm.com/docs/git-branch#git-branch--ultupstreamgt)）：

```
 # or, since 1.7.0
 git branch --set-upstream upstream/branch branch
 # or, since 1.8.0 (October 2012)
 git branch --set-upstream-to upstream/branch branch
 # the short version remains the same:
 git branch -u upstream/branch branch 
```

它还将为“ `branch`”设置上游。

（注意： git1.8.0 将弃用`git branch --set-upstream`并将其替换为`git branch -u|--set-upstream-to`：参见[git1.8.0-rc1announce](http://git.661346.n2.nabble.com/ANNOUNCE-Git-v1-8-0-rc1-tc7568792.html)）

* * *

为本地分支注册上游分支将：

*   告诉 git显示**和****中的两个分支之间的关系`git status``git branch -v`**。
*   **签出新分支时，****`git pull` *不带参数***指示从上游拉取。

有关更多信息，请参阅“[如何使现有的 git 分支跟踪远程分支？](https://stackoverflow.com/questions/520650/how-do-you-make-an-existing-git-branch-track-a-remote-branch) ”。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2015-04-21T22:23:12.673

**完全没有区别！**

1)`git checkout -b branch origin/branch`

如果有 no`--track`和 no `--no-track`，`--track`则假定为默认值。可以通过设置更改默认值`branch.autosetupmerge`。

实际上，1) 的行为类似于`git checkout -b branch --track origin/branch`.

2)`git checkout --track origin/branch`

“作为方便”，`--track`没有`-b`暗示`-b`，并且参数`-b`被猜测为“分支”。猜测是由配置变量驱动的`remote.origin.fetch`。

实际上，2) 的行为类似于`git checkout -b branch --track origin/branch`.

**如您所见：没有区别。**

但它变得更好：

3)`git checkout branch`

也相当于`git checkout -b branch --track origin/branch`if “branch” 尚不存在但 “origin/branch” 存在¹。

* * *

所有三个命令都将“branch”的“upstream”设置为“origin/branch”（否则它们会失败）。

Upstream 用作无参数 , 的参考点`git status`，`git push`因此`git merge`（`git pull`如果这样配置（这是默认值或几乎默认值））。

例如`git status`，如果配置了上游，则告诉您落后或领先上游多远。

`git push`配置为从 git 2.0 开始默认将当前分支推送到上游^(2 。)

^(¹ ...如果“origin”是唯一具有“branch”的遥控器</sup>
^(²默认（命名为“simple”）*也*强制两个分支名称相等))

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-26T16:51:43.317

[这本书](http://git-scm.com/book/en/Git-Branching-Remote-Branches#Tracking-Branches)似乎表明这些命令产生相同的效果：

> 简单的例子就是你刚才看到的例子，运行 git checkout -b [branch] [remotename]/[branch]。如果您有 Git 1.6.2 或更高版本，您还可以使用 --track 简写：

```
$ git checkout --track origin/serverfix 
Branch serverfix set up to track remote branch serverfix from origin. 
Switched to a new branch 'serverfix' 
```

> 要使用与远程分支不同的名称设置本地分支，您可以轻松地使用具有不同本地分支名称的第一个版本：

```
$ git checkout -b sf origin/serverfix 
```

当您的 bash 或 oh-my-zsh git 完成能够`origin/serverfix`为您提取名称时，这特别方便 - 只需附加`--track`(或`-t`) 即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-11T09:46:32.757

您无法使用此命令创建新分支

```
git checkout --track origin/branch 
```

如果您有未暂存的更改。

这是示例：

```
$ git status
On branch master
Your branch is up to date with 'origin/master'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

        modified:   src/App.js

no changes added to commit (use "git add" and/or "git commit -a")

// TRY TO CREATE:

$ git checkout --track origin/new-branch
fatal: 'origin/new-branch' is not a commit and a branch 'new-branch' cannot be created from it 
```

但是，您可以使用以下命令轻松创建具有未暂存更改的新分支`git checkout -b`：

```
$ git checkout -b new-branch
Switched to a new branch 'new-branch'
M       src/App.js 
```

# c++ - 解析类似于 C++ 的东西

> ID：10002245
> 
> 赞同：0
> 
> 时间：2012-04-03T22:16:19.947
> 
> 标签：c++, parsing

我想解析一个语法类似于 c++ 源代码的输入文件。该文件将包含以下组件：

```
//It will have comments.
//It will be able to recursively open other files.
include OtherInputFile.txt
//It will resolve scope
ObjectName::MemberVariable = 0.0;
OtherObjectName
{
  MemberVariable1 = 1.0;
  MemberVariable2 = 2.0;
} 
```

问题是，我不知道自己在做什么。我想我需要的是关于解析的教科书章节，以使自己了解可用的技术或算法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T22:50:49.780

存在许多构建解析器的工具：

*   [lex](http://en.wikipedia.org/wiki/Lex_%28software%29)和[yacc](http://en.wikipedia.org/wiki/Yacc)

*   [弯曲](http://westes.github.io/flex/manual/)和[野牛](http://www.gnu.org/software/bison/)

*   [蚂蚁](http://www.antlr.org/)

*   [提升::精神](http://boost-spirit.com/home/)

*   [可可/R](http://www.ssw.uni-linz.ac.at/Research/Projects/Coco/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:50:24.150

> 我想解析一个语法类似于 C++ 源代码的输入文件

祈祷它没有模板、预处理器、运算符重载和多重继承。否则你就有麻烦了。

> 我不知道我在做什么

调查 Lex/Yacc。阅读有关解析的书或 google 主题（“如何制作语言”）。其中一些工具有教程和文档链接。我可以发誓我看过 bison 或 yacc 或 lexx 教程，其中提到了名为“如何编写编译器”或类似的书，但那是很久以前的事了，我不记得那是什么工具，或者这本书叫什么。

原理基本相同：定义语言语法（C++标准在附录之一中有语言语法示例），将输入文件拆分为标记（如果标记与语法不匹配则抛出错误），然后对标记进行分类（它是什么？打开括号，标识符，函数名称？）并从这些标记中构建一棵树，然后将其转换为相应的语言对象/函数调用等。根据您的语言的复杂性，您可以跳过大部分步骤并使用一堆正则表达式。

# sdk - 最新 Rally 版本 - 无法查询投资组合属性

> ID：10002246
> 
> 赞同：2
> 
> 时间：2012-04-03T22:16:20.340
> 
> 标签：sdk, rally

我有一个自定义应用程序，它使用 Cardboard 对象来显示投资组合项目。我们一直在为看板状态使用自定义属性，但在最新版本中，Rally 添加了一个名为“状态”的投资组合项目的标准属性，它基本上完成了我们的自定义属性所做的事情。问题是虽然 Cardboard 对象会将此属性作为参数来构建列，但它永远不会显示任何数据。这些列都显示为空。我注意到这个属性与以前的简单下拉列表不同，因为它有两个不同的选项“主题”和“功能”。也许这会有所不同，当通过这种类型的下拉菜单时，Cardboard 无法正确查询？？？这是调用的简单版本：

```
 var dropdownAttribute = "State";
    if (stateDropdown !== null) {
        dropdownAttribute = stateDropdown.getValue();
    } 
    var cardboardConfig = {
         types: ["PortfolioItem", "HierarchicalRequirement", "Feature"],
         attribute: dropdownAttribute,
         fetch:"Name,FormattedID,Owner,ObjectID,ClassofService",
         query : fullQuery,
         cardRenderer: PriorityCardRenderer
    };

    if (cardboard) {
        cardboard.destroy();
    }
    cardboard = new rally.sdk.ui.CardBoard(cardboardConfig, rallyDataSource);
    cardboard.display(dojo.body()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T00:18:58.413

新的 State 字段实际上是对新域对象的引用。我们添加了对象，以便我们可以为每种类型[的](https://rally1.rallydev.com/slm/doc/webservice/body.jsp#Type)投资组合项目类型提供不同的看板状态。

您所看到的是所有类型的投资组合项目（主题功能）的所有状态的完整列表。

如果您想重新创建当前的应用程序，您需要在 Portfolio Item 和 Hierarchical Requirement 上添加一个新的自定义字段，该字段的名称不是 State。目前，分层需求确实有对新状态对象的引用，但这是我们计划在未来探索的内容。

# validation - Codeigniter 覆盖默认验证消息

> ID：10002248
> 
> 赞同：0
> 
> 时间：2012-04-03T22:17:02.433
> 
> 标签：validation, codeigniter

我正在尝试覆盖验证消息默认值，据我所知，这应该很容易，只需放置一个名为：

```
application/language/english/MY_form_validation_lang.php 
```

这个文件的内容是：

```
<?php

$lang['required']           = "required."; 
```

我已经这样做了，但它并没有覆盖默认值，更糟糕的是它正在工作，所以不知道我是如何关闭它的。

我也尝试过直接从我的自定义库/MY_Form_validation.php 类中加载它，但那里仍然没有运气。

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed.');

class MY_Form_validation extends CI_Form_validation {

    function __construct()
    {
        parent::__construct();
        $this->CI->lang->load('MY_form_validation');
    }
} 
```

该文件正在加载，因为我可以从那里看到回声，但没有任何消息被覆盖。我还注意到我的自定义验证函数正在加载。所以它正在加载文件但不应用它们或一些奇怪的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:36:29.000

`form_validation_lang.php` 你的文件名不应该 `MY_form_validation_lang.php`检查[codeiginter 语言类文档](http://codeigniter.com/user_guide/libraries/language.html)

# android - RowAdapter 删除动态添加到 ListView 的随机行？

> ID：10002252
> 
> 赞同：0
> 
> 时间：2012-04-03T22:17:24.540
> 
> 标签：android, listview, android-linearlayout, android-adapter

我正在尝试从`ListView`.

中的每个元素`ListView`都是一个`LinearLayout`. 我可以添加和删除行，但是每当我这样做时，行的顺序都是混乱的，并且不一定要删除正确的行。我检查了`ArrayList<LinearLayout> rows`每次添加一行时我的大小都在增加，但调用`getItem(position)`始终为空。我认为这是导致问题的原因，但为什么要添加空布局`rows`？

**编辑**：我将 ArrayAdapter 参数从 LinearList 更改为 Row，这是一个简单的对象，其中包含两个 EditText 字段的 getter 和 setter。这已经解决了 null 问题，但同样的问题仍然存在 - 随机行被删除。在`getView()`下面，Logcat 显示`position = 0`在我的删除按钮的每种情况下`onClick()`。Logcat 还显示 L​​istView 中的每个视图都被随机分配一个位置。

我的新适配器代码：

```
public class RowAdapter extends ArrayAdapter<Row>{

    private ArrayList<Row> rows;

    public RowAdapter(Context context, int textViewResourceId, ArrayList<Row> rows) {
        super(context, textViewResourceId, rows);
        this.rows = rows;
    }

    public Row getItem(int position){
        return rows.get(position);
    }

    public int getCount(){
        return rows.size();
    }

    public static class ViewHolder {
        public EditText name;
        public EditText value;
        public Button delete; 
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        ViewHolder viewHolder;

        if(v == null){
            LayoutInflater li = (LayoutInflater)getContext().
                    getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = li.inflate(R.layout.row, parent, false);

            viewHolder = new ViewHolder();

            viewHolder.name = (EditText)v.findViewById(R.id.editAttrName);
            viewHolder.value = (EditText)v.findViewById(R.id.editAttrValue);

            viewHolder.delete = (Button)v.findViewById(R.id.btnDelete);
            viewHolder.delete.setTag(position);
            viewHolder.delete.setOnClickListener(new AdapterView.OnClickListener() {
                @Override
                public void onClick(View v) {
                    int position = (Integer) v.getTag();
                    Log.e("RowAdapter", "position = " + position);
                    Row row = getItem(position);
                    rows.remove(row);
                    notifyDataSetChanged();
                }   
            });

            v.setTag(viewHolder);
        } else {
            viewHolder = (ViewHolder)v.getTag();
        }
        Log.e("RowAdapter", "row " + v.toString() + ", position = " + position);    
        Row row = getItem(position);

        if(row != null) {

            EditText editText1 = (EditText)v.findViewById(R.id.editAttrName);
            EditText editText2 = (EditText)v.findViewById(R.id.editAttrValue);

            String text1 = editText1.getText().toString();
            String text2 = editText2.getText().toString();
            if(viewHolder.name != null) {
                viewHolder.name.setText(text1);
            }
            if(viewHolder.value != null) {
                viewHolder.value.setText(text2);
            }

        }

        return v;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:51:51.713

我认为您不需要创建一个函数`public Row getItem(int position)`，因为`ArrayAdapter<T>`它提供了一个名为`getItemAtPosition(int position)`. 还要确保当您调用`getItemAtPosition(int position)`活动视图时是列表视图，或者您拥有列表视图的句柄，以便您可以这样做`view.getItemAtPosition(position)`，否则您会得到`null`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T23:56:35.647

您的问题可能是 Adapters 旨在包含*模型*列表，而不是视图列表。视图应该由您的`getView()`方法生成。所以你真正想要的是创建一个`Row`代表一行的类，然后你可以在`getView()`.

# macos - Cocoa (OS X) 小字体 - 字距看起来很糟糕

> ID：10002254
> 
> 赞同：21
> 
> 时间：2012-04-03T22:17:42.897
> 
> 标签：macos, cocoa, text, fonts, kerning

我有一个 Cocoa OS X 应用程序，可以创建用于打印的 PDF。我有一个问题，当我使用小字体时，字距调整似乎全错了。这是一个屏幕截图。这是我的应用程序使用 Helvetica 6 点输出的 PDF 的放大图。 ![可怕的字距输出](../Images/24336e4fbea354fdfda0bd4fb2ce2e7d.png)

如您所见，字距调整很糟糕，有些字符相互接触，而另一些则相距甚远。

我使用的代码基本上是这样的（这是一个为我重现问题的简化示例）：

```
NSString* dateStr = @"Printed 04/03/2012";
NSFont* detailsFont = [NSFont fontWithName:@"Helvetica" size:6];
NSMutableAttributedString* printedDate = [[NSMutableAttributedString alloc] initWithString:dateStr];
[printedDate addAttribute:NSFontAttributeName value:detailsFont range:NSMakeRange(0, [dateStr length])];
NSRect printedDateRect = NSMakeRect(0, 0, theWidth, 10);
[printedDate drawInRect:printedDateRect]; 
```

这不是 Helvetica 独有的，它发生在我尝试过的所有字体中，尽管它在某些字体中比其他字体更明显。如果我使用更大的尺寸，比如 10，它看起来不错。来自其他应用程序（例如 Text Edit）的 6 点 Helvetica 看起来不错。我需要做什么才能正确呈现 6 点文本？

编辑添加：我刚刚注意到，TrueType 字体比 PostScript 字体更糟糕。遗憾的是，我没有想要使用的许多字体的 PostScript 版本，因此避免使用 TrueType 并不是一个真正的选择。

我正在运行 OS X 10.7.3 和 XCode 4.2.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T16:34:20.193

我认为printedDateRect 的大小不正确。要检查这一点，请尝试使用`- (void)drawAtPoint:(NSPoint)point`.

只是一个提示...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T12:03:37.703

如果你在一个单元格中得到这个，你可能想尝试字体大小的变化并在单元格内返回额外的行。试试这个方法。

```
 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    cell.autoresizingMask = UIViewAutoresizingFlexibleHeight;
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    cell.textLabel.font = [UIFont boldSystemFontOfSize:11];
    cell.textLabel.numberOfLines = 13; 
```

# ajax - LoadingElementDuration 没有完全动画

> ID：10002255
> 
> 赞同：1
> 
> 时间：2012-04-03T22:17:53.947
> 
> 标签：ajax, asp.net-mvc-3, razor

使用时

```
AjaxOptions ajaxOpts = new AjaxOptions
{
    UpdateTargetId = "Entry",
    LoadingElementDuration = 5000,
    LoadingElementId = "Remove"
}; 
```

和

```
<div id="Remove">
@using (Ajax.BeginForm("Data", ajaxOpts))
{
}
</div>
<div id="Entry"></div> 
```

div“删除”上的动画调用大约需要 60 毫秒，而不是 5000 毫秒。这是因为它只在请求期间进行动画处理而忽略了实际的加载元素持续时间？为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T22:07:06.087

元素加载的持续时间将超过加载时间，因此如果加载时间比动画速度快，它会非常快。

# jquery - jQuery 在 if 语句中使用“this”

> ID：10002256
> 
> 赞同：12
> 
> 时间：2012-04-03T22:17:56.393
> 
> 标签：jquery, if-statement, this

我正在使用一个`if`语句来确定一个元素是否有任何子元素。如果它没有任何孩子，我只想对那个元素做点什么。

这是我正在尝试做的事情的前提：

```
if ($("#div a").children().length > 0){
    $(this).hide();
} 
```

所以如果一个`<a>`标签没有孩子，我想对那个特定的元素（或多个也没有孩子的元素）做点什么。

问题是`this`尚未定义，因为它是一个`if`声明。

我可能完全错过了一些东西，但我不太确定如何做到这一点。任何意见，将不胜感激

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-03T22:20:18.290

**编辑：**添加[**了演示**](http://jsfiddle.net/skram/bxDNq/4/)链接

您可以使用`.filter`来检查条件并调用`.hide`过滤器结果。见下文，

```
$("#div a").filter(function () {
  return ($(this).children().length > 0)
}).hide(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-10-09T00:02:51.997

你可以使用 each 来遍历元素

```
$('input').each(function(){
  if ($(this).val()) {
    $(this).addClass('has-value');
  }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-03T22:21:11.380

简单的解决方案是将元素放在变量中。

```
var elem = $("#div a");
if (elem.children().length > 0){
    elem.hide();
} 
```

# c++ - 类中的可变变量：“'volatile'之前的预期不合格ID”？

> ID：10002259
> 
> 赞同：4
> 
> 时间：2012-04-03T22:18:12.090
> 
> 标签：c++, class, syntax, arduino, volatile

我`static volatile`在我的类中定义了两个变量`ADC`。该类写为：（裁剪以节省空间）

```
#pragma once

#include "../PeriodicProcess/PeriodicProcess.h"
#include <stdint.h>
#include <stdlib.h>

class ADC
{
private:
    static inline unsigned char SPI_transfer(unsigned char data);
    void read(uint32_t tnow);

    static const unsigned char adc_cmd[9];
    static volatile uint32_t _sum[8];
    static volatile uint16_t _count[8];

public:
    ADC();
    void raw();
    void init(PeriodicProcess * scheduler);
    double ch(uint8_t c);
    bool available(const uint8_t *channelNumbers);
    uint32_t ch6(const uint8_t *channelNumbers, double *result);
}; 
```

但是编译项目会在第 10、29、39 和 44 行的 cpp 文件中引发错误：

ADC.cpp 到目前为止：

```
#include "ADC.h"
extern "C" {
    // AVR LibC Includes
    #include <inttypes.h>
    #include <stdint.h>
    #include <avr/interrupt.h>
}
#include "Arduino.h"

const unsigned char ADC::adc_cmd[9] = { 0x87, 0xC7, 0x97, 0xD7, 0xA7, 0xE7, 0xB7, 0xF7, 0x00 };

#define bit_set(p,m)   ((p) |= ( 1<<m))
#define bit_clear(p,m) ((p) &= ~(1<<m))

// We use Serial Port 2 in SPI Mode
#define ADC_DATAOUT     51    // MOSI
#define ADC_DATAIN      50    // MISO
#define ADC_SPICLOCK    52    // SCK
#define ADC_CHIP_SELECT 33    // PC4   9 // PH6  Puerto:0x08 Bit mask : 0x40

// DO NOT CHANGE FROM 8!!
#define ADC_ACCEL_FILTER_SIZE 8

#define TCNT2_781_HZ   (256-80)
#define TCNT2_1008_HZ  (256-62)
#define TCNT2_1302_HZ  (256-48)

unsigned char ADC::SPI_transfer(unsigned char data)
{
    // Put data into buffer, sends the data
    UDR2 = data;
    // Wait for data to be received
    while ( !(UCSR2A & (1 << RXC2)) );
    // Get and return received data from buffer
    return UDR2;
}

ADC::ADC()
{
    //Do nothing
}

void ADC::read(uint32_t tnow)
{
    uint8_t ch;

    bit_clear(PORTC, 4);                            // Enable Chip Select (PIN PC4)
    ADC_SPI_transfer(adc_cmd[0]);                       // Command to read the first channel

    for (ch = 0; ch < 8; ch++) {
        uint16_t v;

        v = ADC_SPI_transfer(0) << 8;            // Read first byte
        v |= ADC_SPI_transfer(adc_cmd[ch + 1]);  // Read second byte and send next command

        if (v & 0x8007) {
            // this is a 12-bit ADC, shifted by 3 bits.
            // if we get other bits set then the value is
            // bogus and should be ignored
            continue;
        }

        if (++_count[ch] == 0) {
            // overflow ... shouldn't happen too often
            // unless we're just not using the
            // channel. Notice that we overflow the count
            // to 1 here, not zero, as otherwise the
            // reader below could get a division by zero
            _sum[ch] = 0;
            _count[ch] = 1;
        }
        _sum[ch] += (v >> 3);
    }

    bit_set(PORTC, 4);                  // Disable Chip Select (PIN PC4)
}

void ADC::init(AP_PeriodicProcess * scheduler)
{
    pinMode(ADC_CHIP_SELECT, OUTPUT);

    digitalWrite(ADC_CHIP_SELECT, HIGH);  // Disable device (Chip select is active low)

    // Setup Serial Port2 in SPI mode
    UBRR2 = 0;
    DDRH |= (1 << PH2); // SPI clock XCK2 (PH2) as output. This enable SPI Master mode
    // Set MSPI mode of operation and SPI data mode 0.
    UCSR2C = (1 << UMSEL21) | (1 << UMSEL20); // |(0 << UCPHA2) | (0 << UCPOL2);
    // Enable receiver and transmitter.
    UCSR2B = (1 << RXEN2) | (1 << TXEN2);
    // Set Baud rate
    UBRR2 = 2;  // SPI clock running at 2.6MHz

    // get an initial value for each channel. This ensures
    // _count[] is never zero
    for (uint8_t i=0; i<8; i++) {
        uint16_t adc_tmp;
        adc_tmp  = ADC_SPI_transfer(0) << 8;
        adc_tmp |= ADC_SPI_transfer(adc_cmd[i + 1]);
        _count[i] = 1;
        _sum[i]   = adc_tmp;
    }

    last_ch6_micros = micros();

    scheduler->register_process( AP_ADC_ADS7844::read );

}

// Read one channel value
double ADC::ch(uint8_t c)
{
    uint16_t count;
    uint32_t sum;

    // Ensure we have at least one value
    while (_count[c] == 0); // Waiting while

    // grab the value with interrupts disabled, and clear the count
    cli();
    count = _count[c];
    sum   = _sum[c];
    _count[c] = 0;
    _sum[c]   = 0;
    sei();

    return ((double)sum)/count;
}

// See if Ch6() can return new data
bool ADC::available(const uint8_t *channelNumbers)
{
    uint8_t i;

    for (i=0; i<6; i++)
    {
        if (_count[channelNumbers[i]] == 0)
        {
            return false;
        }
    }
    return true;
}

// Read 6 channel values
// this assumes that the counts for all of the 6 channels are
// equal. This will only be true if we always consistently access a
// sensor by either Ch6() or Ch() and never mix them. If you mix them
// then you will get very strange results
uint32_t ADC::ch6(const uint8_t *channelNumbers, double *result)
{
    uint16_t count[6];
    uint32_t sum[6];
    uint8_t i;

    // Ensure we have at least one value
    for (i=0; i<6; i++)
    {
        while (_count[channelNumbers[i]] == 0); // Waiting while
    }

    // Grab the values with interrupts disabled, and clear the counts
    cli();
    for (i=0; i<6; i++)
    {
        count[i] = _count[channelNumbers[i]];
        sum[i]   = _sum[channelNumbers[i]];
        _count[channelNumbers[i]] = 0;
        _sum[channelNumbers[i]]   = 0;
    }
    sei();

    // Calculate averages. We keep this out of the cli region
    // to prevent us stalling the ISR while doing the
    // division. That costs us 36 bytes of stack, but I think its
    // worth it.
    for (i = 0; i < 6; i++)
    {
        result[i] = (sum[i] + count[i]) / (double)count[i];
    }

    // Return number of microseconds since last call
    uint32_t us = micros();
    uint32_t ret = us - last_ch6_micros;
    last_ch6_micros = us;
    return ret;
} 
```

* * *

错误报告提供：

```
ADC.cpp:10: error: expected unqualified-id before 'volatile'
ADC.cpp:10: error: expected `)' before 'volatile'
ADC.cpp:10: error: expected `)' before 'volatile'
ADC.cpp:29: error: expected unqualified-id before 'volatile'
ADC.cpp:29: error: expected `)' before 'volatile'
ADC.cpp:29: error: expected `)' before 'volatile'
ADC.cpp:39: error: expected unqualified-id before 'volatile'
ADC.cpp:39: error: expected `)' before 'volatile'
ADC.cpp:39: error: expected `)' before 'volatile'
ADC.cpp:44: error: expected unqualified-id before 'volatile'
ADC.cpp:44: error: expected `)' before 'volatile'
ADC.cpp:44: error: expected `)' before 'volatile' 
```

这里有什么问题？为什么它指向我的常量静态定义？为什么它讨厌我的 3 个类方法？为什么在该行上不存在 volatile 的情况下期望 volatile 为 ')'？为什么它**期待**一个*不合格的ID*（不应该反过来）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:53:39.430

`ADC`显然是 AVR 库下的保留字。我更改了班级名称，所有错误都消失了。一个不正确的类名所有的麻烦！

资料来源：我在第 9 篇文章中找到了答案：[http](http://www.arduino.cc/cgi-bin/yabb2/YaBB.pl?num=1283472517) ://www.arduino.cc/cgi-bin/yabb2/YaBB.pl?num= 1283472517。

# algorithm - Kullback-Leibler 散度作为直方图距离函数

> ID：10002261
> 
> 赞同：2
> 
> 时间：2012-04-03T22:18:31.370
> 
> 标签：algorithm, image-processing, f#, statistics, histogram

我想使用 Jensen-Shannon 散度作为直方图距离函数。我正在实现一个简单的图像相似性搜索，直方图是标准化的 RGB 颜色分布。

我对 Kullback-Leibler 散度公式（JS 所基于）有一个问题：当 Pi 或 Qi 为零时，我应该返回什么？

这是 F# 中的实现：

```
let dKL p q =
    Array.map2 (fun pi qi -> if pi = 0\. then ?   // ?
                             elif qi = 0\. then ? // ?
                             else pi * log (pi / qi)) p q
    |> Array.sum 
```

以及使用它的 Jensen-Shannon 距离：

```
let dJS p q =
    let m = Array.map2 (fun pi qi -> (pi + qi) / 2.) p q
    (dKL p m) / 2\. + (dKL q m) / 2. 
```

[维基百科](http://en.wikipedia.org/wiki/Kullback%E2%80%93Leibler_divergence)说它应该在 pi=0 且 qi>0 时返回 0，并且在 qi=0 时没有定义，但对于直方图距离来说它没有多大意义。在这种情况下，什么值是有意义的？

## 编辑

这是根据 Whatang 的答案的正确版本，以供将来参考：

```
let dKL p q =
    Array.map2 (fun pi qi -> if pi = 0\. && qi = 0\. then 0.
                             else pi * log (pi / qi)) p q
    |> Array.sum 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T23:44:57.163

由于您使用它来构建 Jensen-Shannon 散度，因此`qi`在计算 Kullback-Leibler 散度时您可以等于零的唯一方法是该`pi`值也为零。这是因为您实际上是在计算 和 的平均值`dKL(p,m)`，`dKL(q,m)`其中`m=(p+q)/2`。所以`mi=0`意味着`pi=0`和`qi=0`。

扩展`dKL`to be的定义`p log p - p log m`，并使用约定/限制，`0 log 0 = 0`您会发现没有问题：当also is`m`时只能为零。`p`

长话短说，当您`dKL`从`dJS`第二个子句调用时，`elif qi = 0`将永远不会执行：将您喜欢的任何内容放在那里（除非您`dKL`要从其他地方调用，否则将其设为零可能是个好主意）。

# c++ - C++ makefile 多个头文件一个 cpp

> ID：10002268
> 
> 赞同：1
> 
> 时间：2012-04-03T22:18:55.607
> 
> 标签：c++

我有编译错误。我有一个 cpp 文件和许多标题。对于makefile，我认为我需要列出所有头文件。LinkedBinaryTree.h 包含所有其他头文件的包含。这是我写的：

```
 all: hw4a

 hw4a: LinkedBinaryTree.cpp linkedBinaryTree.h booster.h arrayQueue.  binaryTree.h        binaryTreeNode.h myExceptions.h queue.h
 g++ -o hw4a LinkedBinaryTree.cpp LinkedBinaryTree.h booster.h arrayQueue.h binaryTree.h     binaryTreeNode.h myExceptions.h queue.h 

clean:
rm hw4a 
```

有人告诉我 O 只需要这样做：

```
g++ LinkedBinaryTree.cpp -o bst.exe 
```

哪一个是正确的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:27:20.820

后者是正确的：`g++ -o result.exe source.cpp`. 你*不能*在编译器命令中包含头文件，因为它们已经被预处理器自动包含了。

当然头文件仍然是*依赖项*，必须在makefile中列出。这就是为什么有一个特殊的通用语法来仅引用第*一个*引用：

```
.phony: all clean

all: result.exe

result.exe: main.o
    $(CXX) -o $@ $+

main.o: main.cpp class1.hpp lib2.hpp
    $(CXX) -c -o $@ $< 
```

这`$+`意味着“所有依赖项”（重复；`$^`也扩展到所有依赖项但唯一），因为您需要链接，而`$<`仅表示“第一个依赖项”，因为您需要编译。

当你使用它时，在你的编译器命令上撒上大量的警告标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:23:18.077

你被告知了什么。应包括包含，而不是作为单独的单元编译。

# c# - 将充满“INSERT INTO xxx VALUES”的文件转换为 Bulk Insert 可以解析的内容

> ID：10002277
> 
> 赞同：1
> 
> 时间：2012-04-03T22:20:17.533
> 
> 标签：c#, sql, sql-server-2008, bulkinsert, insert-into

这是我的第一个问题“[将“SQL”导出到 T-SQL](https://stackoverflow.com/questions/9982577/) ”的后续内容。

我正在使用我无法控制且无法更改的第 3 方程序。该程序会将其内部数据库导出为一组，`.sql`每个数据库的格式为：

```
INSERT INTO [ExampleDB] ( [IntField] , [VarcharField], [BinaryField])
VALUES
(1 , 'Some Text' , 0x123456),
(2 , 'B' , NULL),
--(SNIP, it does this for 1000 records)
(999, 'E' , null);
(1000 , 'F' , null);

INSERT INTO [ExampleDB] ( [IntField] ,  [VarcharField] , BinaryField)
VALUES
(1001 , 'asdg', null),
(1002 , 'asdf' , 0xdeadbeef),
(1003 , 'dfghdfhg' , null),
(1004 , 'sfdhsdhdshd' , null),
--(SNIP 1000 more lines) 
```

这种模式一直持续到`.sql`文件达到导出期间设置的文件大小，导出文件按`EXPORT_PATH\%Table_Name%\Export#.sql`其中 # 是从 1 开始的计数器分组。

目前我有大约 1.3GB 的数据，我有它以 1MB 的块导出（26 个表中的 1407 个文件，除了 5 个表之外的所有表只有一个文件，最大的表有 207 个文件）。

现在我只有一个简单的 C# 程序，它将每个文件读入 ram 然后调用[ExecuteNonQuery](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)。问题是我平均 60 秒/文件，这意味着它需要大约 23 小时才能完成整个导出。

我假设如果我如何格式化要使用 BULK INSERT 而不是 INSERT INTO 加载的文件，它可能会更快。有没有简单的方法可以做到这一点，或者我必须编写某种查找和替换并保持我的手指交叉，它不会在某些极端情况下失败并炸毁我的数据。

任何其他关于如何加快插入速度的建议也将不胜感激。

* * *

**更新：**

我最终进行了[解析并执行了 SqlBulkCopy 方法](https://stackoverflow.com/questions/10013197)。它从 1 个文件/分钟开始。1 文件/秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:43:50.103

显然，您的数据总是用括号括起来，并以左括号开头。您可能希望使用此规则来[`split`](http://msdn.microsoft.com/en-us/library/tabh47cf.aspx)( `RemoveEmptyEntries`) 每一行并将其加载到 DataTable 中。然后，您可以使用[`SqlBulkCopy`](http://msdn.microsoft.com/en-us/library/ex21zs8x.aspx)一次将所有内容复制到数据库中。

这种方法不一定是故障安全的，但肯定会更快。

**编辑**：这是获取每个表的架构的方法：

```
private static DataTable extractSchemaTable(IEnumerable<String> lines)
{
    DataTable schema = null;
    var insertLine = lines.SkipWhile(l => !l.StartsWith("INSERT INTO [")).Take(1).First();
    var startIndex = insertLine.IndexOf("INSERT INTO [") + "INSERT INTO [".Length;
    var endIndex = insertLine.IndexOf("]", startIndex);
    var tableName = insertLine.Substring(startIndex, endIndex - startIndex);
    using (var con = new SqlConnection("CONNECTION"))
    {
        using (var schemaCommand = new SqlCommand("SELECT * FROM " tableName, con))
        {
            con.Open();
            using (var reader = schemaCommand.ExecuteReader(CommandBehavior.SchemaOnly))
            {
                schema = reader.GetSchemaTable();
            }
        }
    }
    return schema;
} 
```

然后你只需要迭代文件中的每一行，检查它是否`(`以`Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries)`. 然后您可以将结果数组添加到创建的模式表中。

像这样的东西：

```
var allLines = System.IO.File.ReadAllLines(path);
DataTable result = extractSchemaTable(allLines);
for (int i = 0; i < allLines.Length; i++)
{
    String line = allLines[i];
    if (line.StartsWith("("))
    {
        String data = line.Substring(1, line.Length - (line.Length - line.LastIndexOf(")")) - 1);
        var fields = data.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries);
        // you might need to parse it to correct DataColumn.DataType
        result.Rows.Add(fields);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T23:19:13.590

好吧，这是我的“解决方案”，用于帮助将数据转换为 DataTable 或其他方式（在[LINQPad](http://www.linqpad.net/)中运行）：

```
var i = "(null, 1 , 'Some''\n Text' , 0x123.456)";
var pat = @",?\s*(?:(?<n>null)|(?<w>[\w.]+)|'(?<s>.*)'(?!'))";
Regex.Matches(i, pat,
      RegexOptions.IgnoreCase | RegexOptions.Singleline).Dump(); 
```

每个值组应该运行一次匹配（例如`(a,b,etc)`）。结果的解析（例如转换）留给调用者，我没有测试它[太多]。我建议*首先*创建正确类型的 DataTable —— 尽管可以将所有内容“作为字符串”传递给数据库？-- 然后使用列中的信息来帮助提取过程（可能使用[类型转换器](http://msdn.microsoft.com/en-us/library/system.componentmodel.typeconverter.aspx)）。对于捕获：`n`为空，`w`为单词（例如数字），`s`为字符串。

快乐编码。

# objective-c - 在 iOS 中获取自动日期

> ID：10002282
> 
> 赞同：0
> 
> 时间：2012-04-03T22:20:54.143
> 
> 标签：objective-c, ios

在 iOS 中可以手动更改日期和时间。现在我使用日期来验证应用程序的许可证。有没有办法获得自动日期而不是由用户设置。如果不可能，你能建议另一种方法来达到同样的效果吗？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:25:27.183

使用 NTP（网络时间协议）远程服务，但您必须为 ios 实现客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T06:37:36.080

您可能对这个问题感兴趣：[iPhone 网络时间协议](https://stackoverflow.com/questions/2269532/network-time-protocol-for-iphone)

更具体地说，这是 NTP 的开源包装器： [http ://code.google.com/p/ios-ntp/](http://code.google.com/p/ios-ntp/)

# c++ - boost::signals2 插槽作为非静态函数成员？

> ID：10002283
> 
> 赞同：7
> 
> 时间：2012-04-03T22:20:59.357
> 
> 标签：c++, boost, non-static, boost-signals2

我最近一直在玩`boost::signals2`学习目的，我想知道我是否可以将信号连接到位于类中的**非静态插槽（就像我在 Qt 中一样）。**考虑以下：

```
class Worker {
    typedef boost::signals2::signal<void (const std::string &)> SendMessage;
public:
    typedef SendMessage::slot_type SendMessageSlotType;
    boost::signals2::connection connect(const SendMessageSlotType &slot) {
        return send_message.connect(slot);
    }
private:
    SendMessage send_message;
};

class Controller {
public:
    Controller() {
        worker.connect(&Controller::print);
    }
private:
    static void print(const std::string &message) {
        std::cout << message << std::endl;
    }

    Worker worker;
}; 
```

现在我想做`Controller::print`一个非静态成员。`boost::thread`例如，这可以使用`boost::bind`; 有什么办法可以做到这一点`boost::signals2`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-03T23:14:48.253

只是：

```
class Controller {
public:
    Controller() {
        worker.connect(boost::bind(&Controller::print, this, _1));
    }
private:
    void print(const std::string &message) {
        std::cout << message << std::endl;
    }

    Worker worker;
}; 
```

# asp.net-mvc-3 - 无法加载文件或程序集“EntityFramework”错误

> ID：10002286
> 
> 赞同：8
> 
> 时间：2012-04-03T22:21:20.130
> 
> 标签：asp.net-mvc-3, entity-framework

> 无法加载文件或程序集 'EntityFramework, Version=4.3.1.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

当我将此代码添加到我的项目中时，我只会收到此错误：

```
private IUserRepository repository;

        public SearchController(IUserRepository repo)
        {
            repository = repo;
        } 
```

我想这是有道理的，因为我为此使用了 EntityFramework。我现在才确定如何修复这个错误。

我看过这个链接： http: [//msdn.microsoft.com/en-us/library/e74a18c4.aspx](http://msdn.microsoft.com/en-us/library/e74a18c4.aspx) 虽然我不知道如何使用这个程序？（它总是空白）。

我认为这个错误可能与我的数据库是由 dotnet-host.com 托管的事实有关，并且当它与在线数据库交互时，有一些本地引用会中断。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-03T22:32:37.550

错误告诉您的是，您的项目引用了与运行时不同的 EntityFramework.dll 版本。

检查您在项目中引用了哪个版本的 EntityFramework.dll（更新您的问题）。

确保将所有相关的 dll 和 *.manifest 复制到应用程序的 bin 文件夹中。

由于它是外部主机，您可能需要通过 WebMatrix 包管理器安装 EntityFramework。如果你这样做，你可以按照[这个教程](http://www.mikesdotnetting.com/Article/182/Entity-Framework-Code-First-Development-With-WebMatrix)。

1.  只需确保在您用于开发的主机站点上安装相同版本的 EntityFramework，或者
2.  将您的程序集引用更改为`Specific Version = false`EntityFramework dll（注意我不确定它是否会工作，因为我总是尝试使用相同的版本进行开发和部署，所以也许有人可以确认？）。

# android - Android Manifest 中的错误（sdk 版本）

> ID：10002287
> 
> 赞同：1
> 
> 时间：2012-04-03T22:21:22.163
> 
> 标签：android, manifest, uses

我的清单中出现错误，我不知道为什么，请您帮忙

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.kaoticravers.djimmenze"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />
    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" android:testOnly="false" android:debuggable="false">
        <activity
            android:name=".startingmain"
            android:screenOrientation="portrait"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

在控制台中，当我尝试在模拟器中运行我的应用程序时，我收到此错误：

[2012-04-03 23:10:31 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] C:\Users\mark\workspace\KR Radio app\AndroidManifest.xml 的解析器异常：元素类型“manifest”后面必须跟属性说明，“>”或“/>”。

[2012-04-03 23:10:31 - KR Radio 应用程序] XML 文件中的错误：正在中止构建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T10:07:48.623

**我也有同样的问题，问题**下有以前的错误日志，所以我删除了那些对问题进行排序的日志

# apache - 防止（停止）Apache 记录特定的 AJAX / XmlHttpRequests？

> ID：10002289
> 
> 赞同：5
> 
> 时间：2012-04-03T22:21:33.470
> 
> 标签：apache, .htaccess, xmlhttprequest, logging

我正在一个网站上工作，该网站的主要思想是在一个循环（或类似循环的构造）中执行大量**xmlHttpRequests 。**但问题是，每次我从**javascript**访问服务器上的文件时，它都会登录**服务器上的访问日志**。随着时间的推移，访问日志文件变得如此之大，它会减慢进一步的请求。

有没有办法告诉 apache（我猜）如果它是正确的，不要记录对这个文件的访问？（我正在向该文件发送带有密码（总是不同）的get。）对该文件的访问将来自不同的IP。我不想停止所有的记录，只是“批准”的记录。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-03T22:31:29.413

没问题。只需查看[Apache 文档](http://httpd.apache.org/docs/current/logs.html)中的示例（如果您将来碰巧遇到与 apache 相关的问题，您可能想查看的地方）。例如：

```
# Mark requests for the AJAX call
SetEnvIf Request_URI "^/myajaxscript\.php.*$" dontlog
SetEnvIf Request_URI "^/myotherajaxscript\.php$" dontlog
# Log what remains
CustomLog logs/access_log common env=!dontlog 
```

# nlp - 用最重的词拆分句子

> ID：10002290
> 
> 赞同：3
> 
> 时间：2012-04-03T22:21:47.537
> 
> 标签：nlp, combinatorics

我正在开发一款游戏，我需要找到特定句子的最大权重。

假设我有句子“the quick brown fox”，并假设只有单个单词具有定义的权重：“the”-> 10、“quick”-> 5、“brown”-> 3、“fox”-> 8

在这种情况下，问题是微不足道的，因为解决方案包括添加每个单词的权重。

现在假设我们还添加了双词，所以除了上面的词，我们还有 "the quick" -> 5, "quick brown" -> 10, "brown fox" -> 1

我想知道单字和双字的哪个组合提供了最大的权重，在这种情况下是“the”、“quick brown”、“fox”

我的问题是，除了明显的蛮力方法之外，还有其他可能的方法来获得解决方案吗？不用说，我正在寻找一些最佳方法来实现更大的句子。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T03:17:38.723

You can look at [Integer Linear Program](http://en.wikipedia.org/wiki/Linear_programming) libraries like [lp_solve](http://lpsolve.sourceforge.net/). In this case, you will want to maximize the scores, and your objective function will contain the weights. Then you can subject it to constraints, like you cannot have "quick brown" and "brown" at the same time.

For word alignment, this was used in this [paper](http://www.cs.columbia.edu/~kapil/documents/acl11alignment.pdf), but your problem is way simpler than that, but you can browse through the paper to get an idea on how ILP was used. There's probably other algorithms other than ILP that can be used to solve this optimally, but ILP can solve it optimally and efficiently for small problems.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-19T10:22:01.350

"the" -> 10, "quick" -> 5, "brown" -> 3, "fox" -> 8 对于上面的单个单词，我将取一个数组 [10,5,3,8] 来表示单词0,1,2,3 遍历列表，如果两个分数的组合小于组合分数，例如 10+5 >5 the + quick >the quick 5+3 < 10 quick brown > quick + brown 。标记这个等等

在标记组合解决方案时，沿连续范围标记它们。例如，如果单词分数是 words = [1,2,5,3,1,4,6,2,6,8] 和 [4,6,9,7,8,2,9,1,2] 标记范围（包括两端）是 [0,1],[2,5],[6,7]

伪代码如下

从 0 遍历到 word length - 1

```
if number not in range :
add word[number] to overall sum.
else:
if length of range = 1 :
    add combined_word_score [ lower_end_number]
 else if length of range = 2 :
    add combined_word_score [ lower_end_number+next number]
else if length of range > 2 and is odd number :
    add max (alternate_score_starting at lower_end_number , 
              word[lower_end]+word[higher_end]+alternate_score_starting at 
                next_number)
else if length of range > 2 and is even number :
     add max (alternate_score_starting at lower_end_number +word[higher_end],
              word[lower_end]+alternate_score_starting at 
                next_number). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:43:37.070

这感觉像是一个动态编程问题。

我可以想象句子的 k 个单词并排放置，每个单词之间都有一个灯泡（即总共 k-1 个灯泡）。如果一个灯泡打开，这意味着它旁边的单词是一个短语的一部分，如果它关闭，它们不是。因此，这些灯泡的任何配置都表示可能的权重组合。当然，许多配置甚至是不可能的，因为我们没有他们需要的短语的任何分数。所以 k-1 个灯泡意味着我们最多有 2^(k-1) 个可能的答案可供我们通过。

我们可以认识到每个计算的某些部分可以重用于其他计算，而不是蛮力强制它，所以对于 (The)(quick)(brown fox ... lazy dog) 和 (The quick)(brown fox 。 ..lazy dog)，我们可以只计算一次 (brown fox ...lazy dog) 的最高分，记住它并在下次看到它时重复使用它而无需做任何额外的工作。

在我们开始之前，我们应该首先去掉只能有 1 个可能值的灯泡（假设我们没有短语 'brown fox' 或任何包含该短语的更大的短语，然后是 'brown 之间的灯泡' 和 'fox' 总是必须关闭）.. 每个移除的灯泡都会将解决方案空间减半。

如果 w1、w2、w3 是单词，那么灯泡就是 w1w2、w2w3、w3w4 等。所以

```
Optimal(w1w2 w2w3 w3w4 ...) = max(Optimal(w2w3 w3w4 ...) given w1w2 is on, Optimal(w2w3 w3w4 ...) given w1w2 is off) 
```

（警告如果我们遇到无法解决的问题，我们只需返回 MIN_INT 并且事情应该会解决）

我们可以像这样解决问题，但是如果我们对接近灯泡的顺序很聪明，我们可能会节省更多时间。也许先攻击中心灯泡可能会有所帮助。我不确定这部分。

# python - 如何在不指定完整路径的情况下可移植地运行 Python 脚本

> ID：10002291
> 
> 赞同：13
> 
> 时间：2012-04-03T22:21:49.257
> 
> 标签：python, windows, shell, posix

是否有一种可移植的方式从 shell 运行 python 脚本而不编写其完整路径？

例如在 Linux 中，我想在我的主目录中

```
cd ~ 
```

能够运行名为 run.py 的 python 脚本，即 ~/long/path/to/run.py，但我想通过简单地键入来运行它

```
python run.py 
```

代替

```
python ~/long/path/to/run.py 
```

我希望某种搜索路径列表包含几个目录，就像 PATH 变量一样，以便 python run.py 运行它在其中一个目录中遇到的第一个 run.py。

我曾考虑将 run.py 转换为可执行文件并将其目录添加到系统 PATH 变量中，但找不到使 python 脚本可执行的可移植方式。

**编辑**

一年后问了之后，我有点不那么菜鸟了，我发现我的问题不是很清楚，也没有多大意义，所以在提出问题后，我会澄清一些事情。

1) 便携。

当我问这个时，我说便携式。但是在这种情况下，便携是什么意思并不清楚，我也没有过多强调。

*   平台：应该在 POSIX（Linux、MacOS 等）和 Windows 上工作

*   这仍然没有多大意义，因为 windows 使用`cmd.exe`，而 POSIX 使用`sh`，因此每个人都可以使用不同的语法运行命令。因此，假设最便携的方法是将相同的输入提供给`sh`和`cmd.exe`，在这两种情况下运行 python 脚本。在这种情况下，您可以从 ANSI C`system`函数运行相同的命令，该函数`sh`在 POSIX 和`cmd`Windows 上使用。ANSI C 是 Windows 和 POSIX 通用的少数东西之一，在这种情况下这个问题是有道理的。

2) 可执行

接下来，短语`turning run.py into an executable`, 不是很清楚。通过我说的Linux策略`chmod +x run.py`，添加一个shebang `#!/usr/bin/env python`，并在系统中添加它的目录添加~/long/path/to/PATH环境变量。但这不适用于 Windows，因为 Windows 不支持像 Linux 这样的可执行文件元数据属性，而且 /usr/bin/env 不一定存在于 Windows 中。

3) 扩展

最后，在我的脑海中，我希望有一个解决方案，它不指定运行什么样的文件，这样如果有一天我们决定制作它，比如说，一个 perl 文件，任何接口都不会改变。

因此，写入`run.py`会很糟糕，因为它会指定文件类型；能写会更好`run`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-03T22:28:56.950

如果包含的目录`run.py`在模块搜索路径上（例如，`PYTHONPATH`环境变量），您应该能够像这样运行它：

```
python -m run 
```

以下是有关`-m`命令行选项的文档：

> **-m** `module-name`
> 搜索`sys.path`命名模块并将相应的`.py`文件作为脚本运行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-03T22:25:58.660

您可以通过添加使 python 脚本可执行

```
#!/usr/bin/env python 
```

到文件的开头，并使用`chmod +x`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-06T08:32:53.270

**澄清编辑后回答**

与@FJ 建议的方法相比，我更喜欢以下方法，因为它不需要用户指定文件类型。请注意，这在原始问题中没有指定，因此他对原始问题的回答是正确的。

让我们调用该文件`pytest.py`以避免与可能的现有`run`程序发生冲突。

在 POSIX (MacOs, linux) 上做 @Petr 所说的，这是基于 @alberge 所说的：

*   `chmod +x`
*   添加社邦`#!/usr/bin/env python`
*   创建一个目录并将其添加到路径中。Linux 上的通常位置是： ~/bin/ 单个用户，`/usr/local/bin/`所有用户
*   符号链接（`cp -s`）你的 PATH 下的文件，使用 basename`pytest`而不是`pytest.py`

在窗户上：

*   创建一个目录并将其添加到 PATH。AFAIK，没有传统的地方，那为什么不`C:\bin\`呢`~\bin\`？
*   添加`.PY`到`PATHEXT`环境变量，以便 Windows 将具有 python 扩展名的文件识别为可运行文件，而无需您键入扩展名
*   将 python 文件与`python.exe`解释器关联（Windows 资源管理器 > 右键单击​​ > 选中“始终使用所选程序”）。python 安装程序上有一个选项可以为您执行此操作。
*   `pytest` *带有*扩展名的符号链接到目录下`PATH`（使用 Windows Explorer 或`mklink name dest`cmd 中的 Link Shell Extension ）

现在`system( "pytest" );`应该在两个系统中都可以工作（`sh`在 Linux 下，`cmd`在 Windows 下）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T22:34:47.120

1.  使 python 文件可执行（如上面所说的“alberge”）
2.  创建一些目录并将此目录放入您的 PATH 变量中
3.  在此目录中，创建指向您的 python 脚本的链接

# javascript - 使用 javascript 操作网页

> ID：10002295
> 
> 赞同：-2
> 
> 时间：2012-04-03T22:22:28.840
> 
> 标签：javascript, html, forms, webpage

对于我的问题，我将使用一个示例。假设有人想要创建一个 HTML 表单，该表单将根据用户在表单中提交的任何请求来操作或创建网页。该表单将利用 javascript 来完成此操作。一个人怎么能做到这一点？此外，我不只是在寻找一种颜色选择；我想创建一个根据表单中提交的任何请求更改/创建 bg 颜色的表单（即不仅仅是红色背景的选项，而是多种颜色或装饰选项）。感谢您提供任何信息。

布兰登

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T22:25:25.580

通常表单提交仅用于与服务器的 POST 或 GET 通信。如果您想使用某些动态内容的点击功能`<input type="button" onclick="jsfunction()">`或调用 jsfunction() 的锚标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:28:25.527

你可以使用这样的东西：

HTML：

```
<div id="foo"> I'm a div! </div> 
```

JavaScript：

```
document.getElementById('foo').style.backgroundColor="red"; 
```

JavaScript 样式命令与 CSS 属性的名称略有不同。您可以进行快速谷歌搜索以找到它们的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T22:46:39.010

你可以使用 jQuery 来简化你的工作：

javascript

```
document.getElementById('foo').style.backgroundColor="red"; 
```

变成

```
$('#foo').css('background-color', 'red') 
```

另一个优点是，后者中的 css 属性名称与 HTML 中的名称相同。

[阅读有关 jQuery 的更多信息](http://api.jquery.com/css/#css2)

# c - 宏化参数

> ID：10002296
> 
> 赞同：4
> 
> 时间：2012-04-03T22:22:34.003
> 
> 标签：c, visual-c++, macros, c-preprocessor, variadic-macros

我有一个带有许多“宏化”参数集的系统（“#define name value,value,value”形式的宏）。我想将这些传递给宏，但是当我这样做时出现错误。

例子：

```
void fn(int a, int b, int c){ return; }

#define MACRO_1(a, b, c) fn(a, b, c)
#define MACRO(...) MACRO_1(__VA_ARGS__)
#define PARAM1 1
#define PARAM2 2, 2
#define PARAM3 3, 3, 3

int main(int argc, char * argv[]){
   MACRO(0,0,0);
   MACRO(PARAM1,1, 1);
   MACRO(PARAM2,2);
   MACRO(PARAM3);
   return 0;
} 
```

在 Visual CI 中得到：

```
1>c:\main.c(10): warning C4003: not enough actual parameters for macro 'MACRO_1'
1>c:\main.c(10): error C2059: syntax error : ','
1>c:\main.c(11): warning C4003: not enough actual parameters for macro 'MACRO_1'
1>c:\main.c(11): error C2059: syntax error : ','
1>c:\main.c(12): warning C4003: not enough actual parameters for macro 'MACRO_1'
1>c:\main.c(12): error C2059: syntax error : ','
1>c:\main.c(13): warning C4003: not enough actual parameters for macro 'MACRO_1'
1>c:\main.c(13): error C2059: syntax error : ',' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T22:33:25.547

这是 Visual C++ 编译器中的一个错误。`__VA_ARGS__`当作为另一个宏的参数出现时，编译器不会正确扩展可变参数包。

解决方法是使用额外的间接层来强制可变参数包在`MACRO_1`被调用之前展开：

```
#define MACRO_1(a, b, c) fn(a, b, c)
#define MACRO_1_(args_list) MACRO_1 args_list
#define MACRO(...) MACRO_1_((__VA_ARGS__)) 
```

此问题存在 Microsoft Connect 错误： [可变参数宏替换](https://web.archive.org/web/20170911043403/https://connect.microsoft.com/VisualStudio/feedback/details/380090/variadic-macro-replacement)（Wayback Machine）。如果此问题对您很重要，请支持该错误报告。

# ios - Cordova (1.5) 到 PhoneGap (1.4.1) 降级

> ID：10002298
> 
> 赞同：1
> 
> 时间：2012-04-03T22:22:46.437
> 
> 标签：ios, cordova

我在 PG1.5 插件不兼容方面遇到了很多问题，我想降级，有人知道如何在 xcode 上做到这一点吗？只有一个安装程序，我不想把一切都搞砸。

此外，我似乎在任何地方都找不到 1.4.1 的软件包可以下载。这真的让我发疯。

或者，如果有人知道适用于 1.5 的低延迟音频插件版本，我会很高兴。

感谢您的时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T06:14:12.683

您可以从 github 安装 1.4.1 及旧版本，只需下载标记为 1.4.1 的版本

[https://github.com/phonegap/phonegap/tags](https://github.com/phonegap/phonegap/tags)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T06:18:49.787

我建议你升级到 1.6.0RC1 而不是降级......只要去这里[https://github.com/apache/incubator-cordova-ios](https://github.com/apache/incubator-cordova-ios)

构建一个 .dmg 文件并升级到 1.6.0 并享受 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T05:03:55.693

您安装它的软件包也有一个卸载程序。用它来删除科尔多瓦。然后你可以愉快地继续使用phonegap的早期版本。
如果你愿意，两者也可以共存。

# c# - 如何从控制台应用程序将文件上传到 ASP.NET MVC

> ID：10002299
> 
> 赞同：7
> 
> 时间：2012-04-03T22:22:54.447
> 
> 标签：c#, asp.net-mvc-3, file-upload, console-application, webclient

我正在尝试让控制台应用程序将 XML 文件发送到在 ASP.NET MVC 3 中开发的 Web 应用程序，并接收另一个 XML 作为响应。

控制台应用程序中返回的错误是：

> 远程服务器返回错误：(500) 内部服务器错误。

当我让 Fiddler2 运行时，我看到了这个错误：

> 你调用的对象是空的。

控制台应用程序中的代码是：

```
static void Main(string[] args)
{
    var wc = new WebClient();
    byte[] response = wc.UploadFile("http://mysite.com/Tests/Test", "POST", "teste.xml");
    string s = System.Text.Encoding.ASCII.GetString(response);
    Console.WriteLine(s);
    Console.ReadKey();
} 
```

MVC 控制器中的代码是：

```
[HttpPost]
public ActionResult Test(HttpPostedFileBase file)
{
    XElement xml = XElement.Load(new System.IO.StreamReader(file.InputStream));
    var test = new MyTest();
    return File(test.RunTest(xml), "text/xml", "testresult.xml");
} 
```

`RunTest()`效果很好，因为当我通过表单上传文件时此方法有效（在具有相同名称的方法中，使用方法 GET）。`RunTest()`返回带有响应的 XML。

当我调试 MVC 应用程序时，我看到了问题：变量`file`为空！

我该如何解决？我必须在控制台应用程序中进行哪些更改才能真正发送文件？还是改变MVC方法的情况？

而且，在尝试使用之前`WebClient`，我在这里尝试了这段代码：http: [//msdn.microsoft.com/en-us/library/debx8sh9.aspx](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)，并且得到了相同的结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-03T22:27:45.370

您的问题是 WebClient.UploadFile 没有使用名为“file”的输入来发布 enctype 设置为 multipart/form-data 的表单，以便 MVC 映射到。尝试将您的服务器端方法更改为：

```
[HttpPost]
public ActionResult Test()
{
    var file = Request.Files[0] as HttpPostedFile;
    XElement xml = XElement.Load(new System.IO.StreamReader(file.InputStream));
    var test = new MyTest();
    return File(test.RunTest(xml), "text/xml", "testresult.xml");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T19:16:07.987

如果有人有稍微不同但相关的问题：

我还必须使用函数`UploadData`而不是`UploadFile`. 在这种情况下，而不是在控制器中写入：

```
var file = Request.Files[0] as HttpPostedFile;
XElement xml = XElement.Load(new System.IO.StreamReader(file.InputStream)); 
```

可以简单地写：

```
XElement xml = XElement.Load(new System.IO.StreamReader(Request.InputStream)); 
```

更轻松！;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T22:31:14.903

您需要通过上传的文件传递参数名称。这对于 WebClient 是不可能的。

查看

[使用webclient上传文件时如何指定form参数](https://stackoverflow.com/questions/4237260/how-to-specify-form-parameter-when-using-webclient-to-upload-file)

[发送 multipart/form-data 内容类型请求](https://stackoverflow.com/questions/3274968/send-multipart-form-data-content-type-request/3275002#3275002)

# ruby-on-rails-3 - 带有 Heroku 部署的“未初始化的常量用户（NameError）”

> ID：10002302
> 
> 赞同：2
> 
> 时间：2012-04-03T22:23:06.873
> 
> 标签：ruby-on-rails-3, heroku, devise, omniauth

我用 Mongoid、Devise 和 Omniauth 构建了一个用于 Facebook 登录的基本 Rails 应用程序。我在本地运行它没有问题，但是当我尝试推送到 Heroku 时，我收到了这个错误：

```
"/app/app/controllers/Users/omniauth_callbacks_controller.rb:1:in `': uninitialized     constant Users (NameError)" 
```

运气不好，我已经用谷歌搜索了这个地狱。我已经提交了用户模型，我已经运行了“heroku run rake db:migrate”等。没有运气。这是我的堆栈。

```
Ruby 1.9.2
Rails 3.2.1 
```

宝石文件：

```
require 'rbconfig'
HOST_OS = RbConfig::CONFIG['host_os']
source 'https://rubygems.org'
gem 'rails', '3.2.1'
group :assets do
gem 'sass-rails',   '~> 3.2.3'
gem 'coffee-rails', '~> 3.2.1'
gem 'uglifier', '>= 1.0.3'
end
gem 'jquery-rails'

gem "bson_ext", ">= 1.6.1"
gem "mongoid"
gem "devise"
gem "zurb-foundation"
gem "omniauth"
gem 'omniauth-facebook'
gem 'gravatar_image_tag' 
```

Gemfile.lock:

```
GEM
remote: https://rubygems.org/
specs:
actionmailer (3.2.1)
  actionpack (= 3.2.1)
  mail (~> 2.4.0)
actionpack (3.2.1)
  activemodel (= 3.2.1)
  activesupport (= 3.2.1)
  builder (~> 3.0.0)
  erubis (~> 2.7.0)
  journey (~> 1.0.1)
  rack (~> 1.4.0)
  rack-cache (~> 1.1)
  rack-test (~> 0.6.1)
  sprockets (~> 2.1.2)
activemodel (3.2.1)
  activesupport (= 3.2.1)
  builder (~> 3.0.0)
activerecord (3.2.1)
  activemodel (= 3.2.1)
  activesupport (= 3.2.1)
  arel (~> 3.0.0)
  tzinfo (~> 0.3.29)
activeresource (3.2.1)
  activemodel (= 3.2.1)
  activesupport (= 3.2.1)
activesupport (3.2.1)
  i18n (~> 0.6)
  multi_json (~> 1.0)
addressable (2.2.7)
arel (3.0.2)
bcrypt-ruby (3.0.1)
bson (1.6.1)
bson_ext (1.6.1)
  bson (~> 1.6.1)
builder (3.0.0)
coffee-rails (3.2.2)
  coffee-script (>= 2.2.0)
  railties (~> 3.2.0)
coffee-script (2.2.0)
  coffee-script-source
  execjs
coffee-script-source (1.2.0)
devise (2.0.4)
  bcrypt-ruby (~> 3.0)
  orm_adapter (~> 0.0.3)
  railties (~> 3.1)
  warden (~> 1.1.1)
erubis (2.7.0)
execjs (1.3.0)
  multi_json (~> 1.0)
faraday (0.7.6)
  addressable (~> 2.2)
  multipart-post (~> 1.1)
  rack (~> 1.1)
gravatar_image_tag (1.0.0)
hashie (1.2.0)
hike (1.2.1)
i18n (0.6.0)
journey (1.0.3)
jquery-rails (2.0.2)
  railties (>= 3.2.0, < 5.0)
  thor (~> 0.14)
json (1.6.6)
mail (2.4.4)
  i18n (>= 0.4.0)
  mime-types (~> 1.16)
  treetop (~> 1.4.8)
mime-types (1.18)
mongo (1.6.1)
  bson (~> 1.6.1)
mongoid (2.4.7)
  activemodel (~> 3.1)
  mongo (~> 1.3)
  tzinfo (~> 0.3.22)
multi_json (1.2.0)
multipart-post (1.1.5)
oauth2 (0.5.2)
  faraday (~> 0.7)
  multi_json (~> 1.0)
omniauth (1.0.3)
  hashie (~> 1.2)
  rack
omniauth-facebook (1.2.0)
  omniauth-oauth2 (~> 1.0.0)
omniauth-oauth2 (1.0.0)
  oauth2 (~> 0.5.0)
  omniauth (~> 1.0)
orm_adapter (0.0.7)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
  rack (>= 0.4)
rack-ssl (1.3.2)
  rack
rack-test (0.6.1)
  rack (>= 1.0)
rails (3.2.1)
  actionmailer (= 3.2.1)
  actionpack (= 3.2.1)
  activerecord (= 3.2.1)
  activeresource (= 3.2.1)
  activesupport (= 3.2.1)
  bundler (~> 1.0)
  railties (= 3.2.1)
railties (3.2.1)
  actionpack (= 3.2.1)
  activesupport (= 3.2.1)
  rack-ssl (~> 1.3.2)
  rake (>= 0.8.7)
  rdoc (~> 3.4)
  thor (~> 0.14.6)
rake (0.9.2.2)
rdoc (3.12)
  json (~> 1.4)
sass (3.1.15)
sass-rails (3.2.5)
  railties (~> 3.2.0)
  sass (>= 3.1.10)
  tilt (~> 1.3)
sprockets (2.1.2)
  hike (~> 1.2)
  rack (~> 1.0)
  tilt (~> 1.1, != 1.3.0)
thor (0.14.6)
tilt (1.3.3)
treetop (1.4.10)
  polyglot
  polyglot (>= 0.3.1)
tzinfo (0.3.32)
uglifier (1.2.4)
  execjs (>= 0.3.0)
  multi_json (>= 1.0.2)
warden (1.1.1)
  rack (>= 1.0)
zurb-foundation (2.2.0.2)
  jquery-rails (>= 1.0)
  rails (~> 3.1)

PLATFORMS
ruby

DEPENDENCIES
 bson_ext (>= 1.6.1)
 coffee-rails (~> 3.2.1)
 devise
 gravatar_image_tag
 jquery-rails
 mongoid
 omniauth
 omniauth-facebook
 rails (= 3.2.1)
 sass-rails (~> 3.2.3)
 uglifier (>= 1.0.3)
 zurb-foundation 
```

控制器：

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def facebook
  # You need to implement the method below in your model
@user = User.find_for_facebook_oauth(request.env["omniauth.auth"], current_user)

if @user.persisted?
  flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Facebook"
  sign_in_and_redirect @user, :event => :authentication
else
  session["devise.facebook_data"] = request.env["omniauth.auth"]
  redirect_to new_user_registration_url
end
end
end 
```

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T19:37:53.090

我有这个问题；我知道这是一个迟到的答案，但我想为需要它的人添加这个。

确保您的 OmniauthCallbacksController 在`users`文件夹中。`"app/controllers/users/omniauth_callbacks_controller.rb"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-25T20:58:32.877

只是想我会补充一点，我遇到了这个问题，并且上述解决方案对我不起作用。事实证明，在我的情况下，Devise 将用户子文件夹的名称（/app/app/controllers/Users）大写。从 git 中删除文件夹，然后用正确的“users”（/app/app/controllers/users）小写名称读取它解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-27T10:37:09.743

不太可能，但是如果您使用“rails generate scaffold”或“rails generate controller”来创建控制器，则需要“git add -A”将所有新创建的文件添加到您的存储库中。(1) git add -A (2) git commit -m "new files added" (3) git push [假设你也在使用远程仓库] (4) git push heroku master (5) heroku run rake db:迁移

这将是一个“新手错误”，但会解释上面的错误。别问我怎么知道的！

# android - 为收到的每封电子邮件获取 2 个 SQLite 记录

> ID：10002310
> 
> 赞同：0
> 
> 时间：2012-04-03T22:23:40.307
> 
> 标签：android, sqlite, email

我对 android 和一般编程很陌生。我有一个使用 K9 电子邮件客户端的电子邮件接收器。我正在检查电子邮件的格式是否正确，并获取电子邮件的内容并将其输入到手机上的 SQLite 数据库中。接收器工作正常。问题是，当我发送格式正确的消息时，它会从第一封电子邮件中生成 2 条记录。如果我在不删除第一条消息的情况下发送另一条消息，它会记录 4 条第二条消息。第三个记录了 6 条记录，等等。我知道我可能缺少一些明显的东西，但我找不到问题所在。

这是代码：

```
 public class EmailReceiver extends BroadcastReceiver{
private JobsData jobs;
public static final Uri k9uri = Uri.parse("content://com.fsck.k9.messageprovider/inbox_messages/");
static String[] messages_projection = new String[] {"subject", "preview", "unread"};

@Override
public void onReceive(Context context, Intent intent) {
    try {
        Context mContext = context;
        Cursor curSt = mContext.getContentResolver().query(k9uri, messages_projection, "unread='true'", null, null);
        curSt.moveToFirst();
        String preview = null;
        String subject = null;
        jobs = new JobsData(context);
        int i = 0;
        while (!curSt.isAfterLast()) {
            subject = curSt.getString(0);
            boolean test = subject.startsWith("JOB# ");
            if (test) {
                boolean check = true;
                try {
                    for (int k = 5; k < subject.length(); k++) {
                        if (!Character.isDigit(subject.charAt(k))) {
                            check = false;
                            break;
                        }
                    }
                } catch (Exception e) {
                } finally {
                }

                if (check) {
                    preview = curSt.getString(1);
                    compareDb(subject.substring(7), preview, context);
                }

            }
            curSt.moveToNext();
        }
        curSt.close();
    } catch (Exception e) {
        Toast toast = Toast.makeText(context, e.toString(), Toast.LENGTH_LONG);
        toast.show();
    }

    if (emails != null) {

     }
}

private void compareDb (String jobNo, String preview, Context context) {
    try {
    String[] dbJobs = new String[] {"JobNo"};
    SQLiteDatabase db = jobs.getReadableDatabase();
    Cursor dbCur = db.query(tableName, dbJobs, null, null, null, null, null);
    dbCur.moveToFirst();
    while (!dbCur.isAfterLast()) {
        if (!jobNo.equals(dbCur.getString(0))) {
            jobExtractor(preview, jobNo, context);
        }
        dbCur.moveToNext();
    }
    dbCur.close();
    } catch (Exception e){
        Toast toast = Toast.makeText(context, e.toString(), Toast.LENGTH_LONG);
        toast.show();

    }
}

private void addJobs(Job job){
    SQLiteDatabase db = jobs.getWritableDatabase();
    ContentValues values = new ContentValues();
        values.put(custName, job.getCustName());
        values.put(jobNumber, job.getJobNumber());
        values.put(jobType, job.getJobType());
        values.put(address, job.getAddress());
        values.put(zip, job.getZip());
        values.put(contact, job.getContact());
        values.put(contactNumber, job.getContactNumber());
        values.put(problem, job.getProblem());

    db.insertOrThrow(tableName, null, values);
    db.close();

} 
```

“jobextractor”方法工作正常，所以我没有包括它。如果有人可以帮助我，我将不胜感激。

谢谢

只是一个旁注。我也希望它只查看未读电子邮件，但这也不起作用。目前不是主要问题，但如果您对此有答案，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:55:03.053

我发现了问题。

```
while (!dbCur.isAfterLast()) { 
    if (!jobNo.equals(dbCur.getString(0))) { 
        jobExtractor(preview, jobNo, context); 
    } 
    dbCur.moveToNext(); 
} 
```

问题就在这里。我正在检查工作编号是否与数据库中的现有记录匹配。它遍历表中的每条记录，并为每条不匹配的记录添加一个新作业。我用布尔检查替换了 jobExctractor 行，如果检查在循环后返回 true，我没有添加作业。

# sql - 不插入新记录

> ID：10002313
> 
> 赞同：1
> 
> 时间：2012-04-03T22:23:49.850
> 
> 标签：sql, oracle, plsql

我有一个名为“报告”的表格，其中包含报告 ID 及其各自的扩展代码。目前，例如，每个 ID 的唯一扩展名是“TXT”。我正在尝试在每个现有的报告 ID 中插入一个新的扩展名 ('RTF')。这是我的代码：

```
merge into report a
      using (select x.rpt_id as value1, 'RTF' as value2
             from report x
             where x.extension <> 'RTF') b
      on (a.rpt_id = b.value1)
when not matched then
      insert values (b.value1, b.value2); 
```

我没有收到任何错误，但没有插入任何内容...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:27:59.400

在运行语句之前发布数据样本（当然只是一个样本）以及在运行语句之后发布所需的数据会很有帮助。

听起来你正在寻找类似的东西

```
INSERT INTO report( rpt_id, extension )
  SELECT rpt_id, 'RTF'
    FROM report
   WHERE extension != 'RTF' 
```

如果主键实际上是对`rpt_id`and组合的复合约束`extension`，并且您的目标是获取 N 个报告的表，每个报告的`TXT`扩展`rpt_id`名为.

```
SQL> create table report(
  2    rpt_id number,
  3    extension varchar2(3),
  4    constraint extension_pk primary key( rpt_id, extension )
  5  );

Table created.

SQL> insert into report values( 1, 'TXT' );

1 row created.

SQL> insert into report values( 2, 'TXT' );

1 row created.

SQL> insert into report values( 3, 'TXT' );

1 row created.

SQL> insert into report values( 4, 'TXT' );

1 row created.

SQL> insert into report values( 5, 'TXT' );

1 row created.

SQL> select * from report;

    RPT_ID EXT
---------- ---
         1 TXT
         2 TXT
         3 TXT
         4 TXT
         5 TXT

SQL> insert into report( rpt_id, extension )
  2    select rpt_id, 'RTF'
  3      from report
  4     where extension != 'RTF';

5 rows created.

SQL> select * from report;

    RPT_ID EXT
---------- ---
         1 RTF
         1 TXT
         2 RTF
         2 TXT
         3 RTF
         3 TXT
         4 RTF
         4 TXT
         5 RTF
         5 TXT

10 rows selected. 
```

根据您收到的错误，显然主键未在 and 的组合上`rpt_id`定义`extension`。

# math - 计算矩阵的最小值和最大值

> ID：10002319
> 
> 赞同：0
> 
> 时间：2012-04-03T22:24:52.690
> 
> 标签：math, matrix

这个问题可能已经结束，因为它听起来很模糊，但我真的在问这个，因为我不知道或者我的数学背景不够。

我正在尝试实现一个挑战，其中一部分挑战需要我计算矩阵的最小值和最大值。我对矩阵实现及其操作没有任何问题，但是矩阵**的**最小值和最大值是多少？考虑到 3x3 矩阵是 9 个数字中最小的最小数字，最大是最大的数字还是其他？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:30:12.283

这真的取决于。最大值可以是最大条目，或者具有最大绝对值的条目，或者它可以是相对于某个范数最大的行 (col) 向量。

# css - 带花车的最小高度黑客

> ID：10002326
> 
> 赞同：0
> 
> 时间：2012-04-03T22:25:37.997
> 
> 标签：css

我正在尝试做类似[min-height hack 的](http://peterned.home.xs4all.nl/examples/css/layout1.css)事情，但是我有两个似乎与之冲突的浮点数：

[http://jsfiddle.net/redconservatory/vqFVU/1/](http://jsfiddle.net/redconservatory/vqFVU/1/)

我的“内部容器” div 非常短，我希望它尽可能多地占用（或至少，更多空间）而不以像素为单位设置高度，因为我的页面内容会因页面而异......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:29:56.850

设置`overflow:auto`而不是`visible`, 以便`.innercontainer`扩展以适应其内容。

演示在[http://jsfiddle.net/gaby/vqFVU/2/](http://jsfiddle.net/gaby/vqFVU/2/)

* * *

如果您还想要一个粘性页脚，请查看[http://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:36:01.083

[http://jsfiddle.net/vqFVU/4/](http://jsfiddle.net/vqFVU/4/)

javascript是最简单的方法。你不能用纯 CSS 做到这一点，因为每个客户端都可以有不同大小的窗口。

# mysql - MobiLink 同步脚本生成

> ID：10002327
> 
> 赞同：0
> 
> 时间：2012-04-03T22:25:39.947
> 
> 标签：mysql, sqlanywhere, mobilink

我使用 MySQL 作为统一数据库，使用 SQLAnywhere 作为远程数据库。我正在尝试使用 MobiLink 同步所有数据。

我刚刚成功地从本教程中运行了数据库同步：[http](http://www.sybase.com/detail?id=1056497) ://www.sybase.com/detail?id=1056497 。当 MobiLink 同步数据时，统一 (MySQL) 数据库上的所有更改都是通过触发器进行的（带有触发器的脚本附在本教程中）。

我的问题是：有没有办法在 Sybase Central 中或以任何其他快速方式生成包含所有触发器的脚本？当我创建自己的数据库模式时，是否需要编写所有脚本？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T16:32:53.810

Yes, you can use the MobiLink plug-in in Sybase Central to create a [synchronization model](http://dcx.sybase.com/index.html#1201/en/mlstart/mg-about-model-mode-7782.html).

[Other ways to get help with SQL Anywhere and MobiLink.](http://dcx.sybase.com/index.html#1201/en/sausinghelp/uh-findoutmore.html)

# jquery - IE 下的 jQuery Uniform Radios/Checkboxes

> ID：10002328
> 
> 赞同：0
> 
> 时间：2012-04-03T22:25:46.887
> 
> 标签：jquery, internet-explorer, uniform

我的 jQuery Uniformed 单选按钮和复选框在 IE 9 和 8 中都有问题。

出于某种原因，它们似乎堆叠在彼此之上或其他东西之上。

我没有要显示的代码，因为没有什么超出规范的实现，但是您可以在我的实时沙箱上看到一个示例：

[http://sandbox.tsdapps.com/account/register](http://sandbox.tsdapps.com/account/register)

如果您在 IE 中查看它，int Newsletter 部分有两个空白单选按钮。其中之一已被选中，但似乎在演示文稿中的空白下方。条款复选框也是如此，如果您选中它，您可以看到底层元素被选中，因为复选标记的尖端重叠并且在框的右上角可见。

我到处搜索试图自己解决这个问题，但我找不到任何东西。github 问题门户网站有大约 100 个未解决的问题，而且似乎已经死了，所以我来了。

任何帮助将不胜感激。

谢谢。

-文斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-12T11:42:24.647

该代码在 IE8 中不能很好地工作，因为 IE8（以及据我所知的 IE9）不支持伪 css 类`:after`。`:before`但是您可以通过添加特定于 IE 且仅在 IE 浏览器中加载的 css 和 js 文件并添加一些额外代码来实现所需的行为。

首先简单地对用户隐藏`checkbox`，以避免复选框位于统一跨度之上。

```
#some_holder_dom_node span>input[type='checkbox'] {
  visibility: hidden;
} 
```

一旦复选框被隐藏，我们需要手动处理它的选中/取消选中操作并使用其他元素触发事件，例如：

```
(function(){
  $(document).on('click', '#some_holder_dom_node div.checker>span', function(){
    $(this).find('input:checkbox').trigger('click');
  });
}()); 
```

我使用了简单的 JS 和 CSS，但您可以使用 scss 或 sass 来节省一些 css 规则的输入，以及 CoffeeScript 或其他处理 JS 的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:59:47.140

尝试获取您的样式和脚本文件，并使用默认的统一设置：

[http://jsfiddle.net/AKfN8/2/](http://jsfiddle.net/AKfN8/2/)

哪个在 IE 中运行良好...

所以似乎是 Modernizer 打破了它，这就是我添加它时发生的事情：

[http://jsfiddle.net/AKfN8/11/](http://jsfiddle.net/AKfN8/11/)

所以我的猜测是您正在使用可能会破坏 Uniform 的 Modernizr HTML5 输入标签扩展。您可以尝试删除modernizr 来测试它吗？:)

如果是，您可能希望在没有输入扩展的情况下进行构建。

# php - 从 mysql 数据库中按天在数组中添加元素

> ID：10002332
> 
> 赞同：0
> 
> 时间：2012-04-03T22:26:03.067
> 
> 标签：php, mysql, arrays, date

我怎样才能让数据库中的记录值在数组中像这样排序。假设我要添加日期。

```
array
 [0] => array=>'id'=>'26' 'date'=>'26'

 [1] => array=>'id'=>'27' 'date'=>'27',
        array=>'id'=>'28' 'date'=>'27',
        array=>'id'=>'29' 'date'=>'27'

 [2] => array=>'id'=>'30' 'date'=>'29'

 [3] => array=>'id'=>'31' 'date'=>'31',
        array=>'id'=>'32' 'date'=>'31',
        array=>'id'=>'33' 'date'=>'31' 
```

基本上，如果下一个 id 包含一个月中具有相同日期（天数）的记录，我想将一个数组添加到同一个索引。否则正常添加。

现在，我的功能是添加记录的行，而不是按照我想要的格式对其进行排序。

我希望它采用这种格式的原因是，我需要运行 foreach，如果 1 天包含 2 条记录，那么它会将另一条记录附加`<li>`到我的无序列表中。

```
public function getArticles()
{
        $sql = 'CALL getArticles()';        
        $articles = Array();

        if (Model::getConnection()->multi_query($sql)) {
            do {
                if ($result = Model::getConnection()->store_result()) {
                    while ($row = $result->fetch_assoc()) {     
                        array_push($articles,$row);                         
                    }
                $result->free();
                } 
            } while (Model::getConnection()->next_result());
        }
        return $articles;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T22:29:51.050

我不知道您的某些代码在做什么，但我认为这是重要的部分。

```
while ($row = $result->fetch_assoc()) {     
    if (!isset($articles[$row['date']])) {
        $articles[$row['date']] = array();
    }
    $articles[$row['date']][] = $row;                        
} 
```

唯一的区别是您的数组将被键入`date`而不是从零递增。如果你真的想重新索引它，你可以做......

```
array_values($articles); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T01:08:35.387

正如 saveer 指出的那样，您的代码中有很多我不知道的功能，所以我添加了注释以指示该过程的下落：

```
// Start of your loop

// $value is what you're getting from the DB...

$array_search = array_search($value,$main_array);

if($array_search)
{
   // If this value already exists, we need to add
   // this value in +1 of its current value
   $main_array[$array_search][] = $value + 1;
}
else
{
   // Make a new array key and add in the value
   $main_array[] = $value;
}

// End of your loop 
```

# java - 如何在链表中创建根节点？

> ID：10002333
> 
> 赞同：1
> 
> 时间：2012-04-03T22:26:09.510
> 
> 标签：java, memory, linked-list

我正在尝试学习 Java 中的链表，并对下面的代码有一些疑问：

```
public class List {
    Node root;
    public List() {
        // constructor
    }

    public int pop() {
        // pop logic
    }

    public int push(int data) {
        // push logic
    }
} 
```

我想要一个 List 类，用于将数据弹出和推送到链接列表中。但是，由于列表在实例化时没有任何默认数据，存储对根节点的引用的最佳方式是什么？

在 C 中，我只会有一个指针，例如：

```
Node * root; 
```

但是由于 Java 没有指针，所以会有一个简单的声明，如：

```
Node root; 
```

……可以接受吗？我有一段时间没有使用 Java，但是没有为声明为类变量的对象分配内存会导致潜在的内存问题？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T22:29:13.797

是的，一个简单的声明`Node root`是可以接受的。它实际上不是一个指针，而是一个可以潜在地引用任何`Node`.

Java 中的引用在概念上等同于 C 指针，但灵活性较差并且使用更简单的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:47:23.510

是的，`Node root;`绝对没问题。只要确保你不改变`root`. 为了使用它，创建另一个变量，用于遍历路径：`Node start = root;`这种方式`root`保持不变。

```
I haven't used Java in a while, but doesn't allocating memory to an object declared as a class variable cause potential memory issues? 
```

不，它没有。虽然简单地写入`Node root;`不会分配任何内存，`root = new Node();`但确实如此。请注意，`class members`在 java 中是静态的，非静态成员是`global variables`. 在java中为全局变量分配内存是一种常见的做法。例如，您实际存储列表的变量*将*是一个全局变量，您*必须*为其分配内存。

Java 具有强大的内存管理系统，因此您不会太容易遇到内存问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T22:29:40.633

是的，

```
Node root; 
```

是可以接受的。Java 中的每个非原始对象（包括原始数组或对象数组）实际上都是对对象的引用，因此它在很多方面都类似于 C 指针。

它实际上很像一个指针，这个声明本身并没有真正创建一个对象。它是一个还没有指向任何东西的引用，如果你`root`在将它分配给`new Node()`第一个之前尝试使用，你会得到一个`NullPointerException`.

# python - 如何在 60 秒后在 Python 中运行一项任务，但只运行一次

> ID：10002334
> 
> 赞同：0
> 
> 时间：2012-04-03T22:26:13.907
> 
> 标签：python, wxpython, python-2.7

我在 Python 中有一个任务，我第一次运行这个任务，我想在 60 秒后运行相同的任务，但最后一次只有一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T15:12:05.467

第一次直接调用任务，第二次从计时器调用。调用`wx.CallLater`不会阻塞，因此应用程序在计时器运行时保持响应。

```
do_task()
wx.CallLater(60 * 1000, do_task) 
```

见[http://www.wxpython.org/docs/api/wx.CallLater-class.html](http://www.wxpython.org/docs/api/wx.CallLater-class.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:34:33.467

如果你想在有间隙的情况下完成两次，最简单的方法就是[睡](http://docs.python.org/library/time.html#time.sleep)一会儿：

```
from time import sleep

do_task()
sleep(60)
do_task() 
```

请注意，如果您需要精确的 60 秒，这可能不合适。

> 实际的挂起时间可能少于请求的时间，因为任何捕获的信号都会在执行该信号的捕获例程后终止 sleep()。此外，由于系统中其他活动的调度，暂停时间可能比请求的时间长任意量。

在这种情况下，您可能希望存储睡眠前的时间并进行比较，以确保经过了正确的时间，例如，但在大多数情况下，它不需要那么精确。

请注意，这会暂停执行，如果您想在其他事情发生的情况下执行此操作，则需要查看线程。

# c++ - 如何为许多短任务设计线程

> ID：10002336
> 
> 赞同：4
> 
> 时间：2012-04-03T22:26:26.170
> 
> 标签：c++, multithreading, algorithm

我想使用多线程来加速我的程序，但不确定哪种方式是最佳的。

假设我们有 10000 个小任务，完成其中一个可能只需要 0.1 秒。现在我有一个 12 核的 CPU，我想用 12 个线程让它更快。

据我所知，有两种方法：

1.任务池

总是有 12 个线程在运行，每个线程在完成当前工作后从任务池中获取一个新任务。

2.单独的任务

通过将 10000 个任务分成 12 个部分，每个线程在一个部分上工作。

问题是，如果我使用任务池，当多个线程尝试访问任务池时，锁定/解锁是浪费时间。但是第二种方式并不理想，因为一些线程提前完成，总时间取决于最慢的线程。

我想知道你是如何处理这种工作的，还有其他最好的方法吗？谢谢你。

编辑：请注意，数字 10000 只是举例，在实践中，它可能是 1e8 或更多任务，每个任务 0.1 也是平均时间。

EDIT2：感谢您的所有回答 :] 很高兴知道各种选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T22:38:53.013

因此，这两种方法之间的一种中间方式是分成 100 批，每批 100 个任务，让核心一次从任务池中挑选一批 100 个任务。

也许如果您对单个任务的单个内核中的执行时间的随机性进行建模，并获得互斥锁时间的估计值，您可能能够找到最佳批量大小。

但是如果没有太多的工作，我们至少有以下引理：

最慢的线程最多只能比其他线程多 100*.1 = 10 秒。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T16:01:46.767

任务池始终是这里的最佳解决方案。这不仅是最佳时间，也是代码的可理解性。您永远不应强迫您的任务符合完全不相关的标准，即具有与核心相同数量的子任务 - 您的任务与此无关（通常），并且当您更换机器等时，这种分离不会扩展. 为最终任务协作合并子任务中的结果需要开销，并且通常会使简单的任务变得困难。

但是你不应该担心任务池锁的使用。 如果您确定有必要，**可以使用无锁队列。**但首先确定。如果您关心时间，请使用适当的方法来加快您的任务，并将您的努力放在您将获得最大收益的地方。分析您的代码。为什么你的任务需要 0.1 秒？他们是否使用了低效的算法？循环展开有帮助吗？如果您通过 profiling 找到代码中的热点，您可能会发现锁是您最不必担心的问题。如果您发现一切都在尽可能快地运行，并且您希望额外的一秒钟来移除锁，请使用您最喜欢的搜索引擎在互联网上搜索“lockfree queue”和“waitfree queue”。比较和交换使原子列表变得容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T05:28:38.303

问题中建议的两种方式都将表现良好并且彼此相似（在简单的情况下，任务持续时间可预测且相对较长）。如果目标系统类型已知且可用（并且如果性能确实是最重要的问题），则应根据原型设计和测量来选择方法。

对于与内核数量匹配的最佳线程数，不一定要对自己产生偏见。如果这是一个普通的服务器或桌面系统，会有各种系统进程在这里启动，你可能会看到你的 12 个线程在处理器之间浮动，这会损害内存缓存。

您还应该检查一些关键的非衡量因素：这些小任务是否需要任何资源来执行？这些资源是否会带来额外的潜在延迟（阻塞）或竞争？是否有其他应用程序争夺 CPU 能力？是否需要扩展应用程序以适应不同的执行环境、任务类型或用户交互模型？

如果所有问题的答案是否定的，这里有一些您可以衡量和考虑的其他方法。

*   仅使用 10 或 11 个线程。您会观察到小幅减速，甚至小幅加速（额外的内核将为 OS 进程提供服务，因此与 12 个线程相比，其余的线程关联将变得更加稳定）。系统上的任何并发交互活动都将*大大*提高响应能力。

*   准确创建 12 个线程，但为每个线程显式设置不同的处理器关联掩码，以在线程和处理器之间施加 1-1 映射。这在最简单的接近学术的情况下是很好的，除了 CPU 和共享内存之外没有其他资源。您不会看到跨进程的线程长期迁移。缺点是算法与特定机器紧密耦合；在另一台机器上，它可能表现得非常糟糕，以至于根本无法完成（因为一个不相关的实时任务永远阻塞了你的一个线程）。

*   创建 12 个线程，平均分配任务。让每个线程在超过 40% 和超过 80% 负载时再次降级自己的优先级。这将改善您的进程内部的负载平衡，但如果您的应用程序与其他受 CPU 限制的进程竞争，它将表现不佳。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T11:41:41.083

每个工作线程可能有自己的小任务队列，容量不超过一两个内存页。当队列大小变小（容量的一半）时，它应该向某个管理器线程发送一个信号以填充更多任务。如果队列是按批次组织的，那么只要当前批次不为空，工作线程就不需要进入临界区。避免关键部分将为您提供额外的实际工作周期。每个队列两个批次就足够了，在这种情况下，一个批次可以占用一个内存页，因此队列占用两个。

内存页的要点是线程不必跳过整个内存来获取数据。如果所有数据都在一个位置（一个内存页），则可以避免缓存未命中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-03T22:49:25.337

100 毫秒/任务 - 按原样堆积它们 - 池开销将是微不足道的。

哦..

1E8 个任务 @ 0.1 秒/任务 = 10,000,000 秒 = 2777.7r 小时 = 115.7 天

这远远超过补丁星期二重新启动之间的间隔。

即使您在 Linux 上运行它，您也应该批量输出并将其刷新到磁盘，以使作业可以重新启动。

是否涉及数据库？如果是这样，你应该告诉我们！

# mysql - 我的 SQL。在单个列中查找倍数

> ID：10002339
> 
> 赞同：1
> 
> 时间：2012-04-03T22:26:39.520
> 
> 标签：mysql

关系：产品（制造商，型号，类型）笔记本电脑（型号，价格，速度，内存，高清，屏幕）PC（型号，价格，速度，内存，高清）打印机（型号，价格，颜色，价格）

我正在尝试寻找彼此共享高清尺寸的电脑。所以基本上找出与另一台电脑共享高清尺寸的电脑的型号。

我试过的：

```
SELECT DISTINCT hd FROM pc; 
```

这给了我所有的高清尺寸。我不确定如何确定这些数字是否在关系中出现两次。

我认为它类似于

```
SELECT DISTINCT hd FROM pc WHERE hd IN (SELECT hd FROM pc); 
```

但我不知道怎么说“IN MULTIPLE TIMES”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:28:56.477

您可以使用[`GROUP BY`and`HAVING`](http://dev.mysql.com/doc/refman/5.0/en/select.html)子句来完成此操作：

```
SELECT hd, COUNT(*) AS occurrences
FROM pc
GROUP BY hd
HAVING COUNT(*) > 1 
```

# c# - 使用 .Net 打印文件

> ID：10002346
> 
> 赞同：0
> 
> 时间：2012-04-03T22:27:01.627
> 
> 标签：c#, .net

我正在尝试使用以下代码通过 .NET 打印....

[http://support.microsoft.com/kb/322091](http://support.microsoft.com/kb/322091)

```
OpenFileDialog ofd = new OpenFileDialog();
if( DialogResult.OK == ofd.ShowDialog(this) )
{
    // Allow the user to select a printer.
    PrintDialog pd  = new PrintDialog();
    pd.PrinterSettings = new PrinterSettings();
    if( DialogResult.OK == pd.ShowDialog(this) )
    {
        // Print the file to the printer.
        RawPrinterHelper.SendFileToPrinter(pd.PrinterSettings.PrinterName, ofd.FileName);
    }
} 
```

打印机对话框窗口打开，打印作业在队列中，但是，没有任何打印内容……我可以打印。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:30:15.810

在这里查看`Print()`扩展方法：[https ://stackoverflow.com/a/5751106/353147](https://stackoverflow.com/a/5751106/353147)

# asp.net - 无法响应。重定向（网址）；有许多查询参数

> ID：10002347
> 
> 赞同：0
> 
> 时间：2012-04-03T22:27:01.787
> 
> 标签：asp.net, redirect, query-string, sitecore

无论我做什么，分隔查询字符串参数的“&”都会被**编码。**

```
// sitecore ASP.NET server side ascx code...
string url = string.Format("http://other-domain.com/?a={0}&b={1}", "1", "2");
Response.Redirect(url);
// ... 
```

给我的浏览器地址：

```
http://other-domain.com/?a=1&amp;b=2 
```

这不是我想要的，我只是想要：

```
http://other-domain.com/?a=1&b=2 
```

是 Response.Redirect() 对我的“&”进行 HTML 编码吗？

我如何让它不理会那个分隔符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:27:42.113

我确定一件事：这**不是**由 Response.Redirect() 或您发布的任何其他代码引起的。

实际代码中可能还有其他问题。

# x86-64 - 带 x86-64 组件的谐波系列

> ID：10002349
> 
> 赞同：0
> 
> 时间：2012-04-03T22:27:11.287
> 
> 标签：x86-64, nasm, calculus

试图计算谐波级数。

现在我正在输入我想要添加的数字。

当我输入一个像 1.2 这样的小数字时，程序只是停止，没有崩溃，它似乎在进行计算。

但是它永远不会完成程序

这是我的代码

```
denominator:
xor r14,r14             ;zero out r14 register
add r14, 2              ;start counter at 2
fld1                    ;load 1 into st0
fxch    st2
denomLoop:
fld1    
mov [divisor], r14              ;put 1 into st0
fidiv   dword [divisor]         ;divide st0 by r14
inc r14             ;increment r14
fst qword [currentSum]      ;pop current sum value into currentSum
jmp addParts
addParts:
fld qword [currentSum]
fadd    st2     ;add result of first division to 1
fxch    st2             ;place result of addition into st2
fld qword [realNumber]          ;place real number into st0
;compare to see if greater than inputed value
fcom    st2             ;compare st0 with st2
fstsw   ax              ;needed to do floating point comparisons on FPU
sahf                    ;needed to do floating point comaprisons on FPU
jg  done                ;jump if greater than
jmp denomLoop           ;jump if less than 
```

该代码基本上是计算 1/2 或 1/3 或 1/4 并将其添加到运行总和，然后比较以查看我是否达到了高于我输入的值，一旦它应该退出循环

你们看到我的错误了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:55:09.313

这条线似乎很可疑：

```
fst qword [currentSum]      ;pop current sum value into currentSum 
```

与注释相反，`fst`将堆栈顶部存储到内存中而不弹出它。如果你想`fstp`弹出它，你想要。

总的来说，您的程序的堆栈行为似乎很可疑——它将各种东西推入 fp 堆栈，但从不弹出任何东西。经过几次迭代后，堆栈将溢出并回绕。根据您的设置，如果您没有启用例外，您将获得例外或获得虚假值。

# bash - “set keymap vi”有什么作用？

> ID：10002356
> 
> 赞同：18
> 
> 时间：2012-04-03T22:27:47.620
> 
> 标签：bash, shell

我想为我的终端提供类似 vim 的导航，所以我添加了：

```
set editing-mode vi
set keymap vi 
```

以我的[文件](http://vim.wikia.com/wiki/Use_vi_shortcuts_in_terminal)`.inputrc`为基础。添加 vi 导航。有什么作用，为什么我需要它？`editing-mode vi``keymap vi`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-03T23:04:51.553

来自`man readline`（我的重点）：

> 合法的键映射名称集是 emacs、emacs-standard、emacs-meta、emacs-ctlx、vi、vi-move、vi-command 和 vi-insert。 **vi 等价于 vi 命令**

因此，在您`inputrc`的模式中，您可以为不同的模式指定不同的键绑定，例如，在`command`模式中，您可以使用 拉取上一个命令中的最后一个参数`Alt``p`，但是此键绑定在模式中无效`insert`（无论如何，在这个简单的设置中）：

```
set editing-mode vi

set keymap vi-command
# these are for vi-command mode
"\e[A": history-search-backward
"\e[B": history-search-forward
"\ep": yank-last-arg

set keymap vi-insert
# these are for vi-insert mode
"\e[A": history-search-backward
"\e[B": history-search-forward
Control-l: clear-screen
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-08-17T06:13:06.707

**TL;博士**

如果您不想更改/添加默认键盘映射中的绑定，则不需要`keymap vi`.

什么`keymap vi`是声明在该点之后列出的任何绑定都适用于该键映射（与和*完全相同*的键映射）。`vi-command``vi-move`

如果您想更改插入键映射（例如，添加`Ctrl-A`绑定以在您键入时转到行首），您需要在`keymap vi-insert`一行下方执行此操作。

如果您想了解有关`vi`模式和地图的更多信息，请跳至标题`editing-mode vi`（最后一个）。

可是等等！不过，可能需要一些背景信息：例如，an`editing-mode`和 a之间的区别`keymap`。

特别有用的是混合`emacs`键盘映射的概念，用于插入文本，同时仍然很容易`vi-command`进行更改。

**`editing-mode`a 和 a 和有什么不一样`keymap`？**

只有*两个*`editing-mode`s：（`emacs`默认）和`vi`.

[GNU Readline 库文档](https://cnswww.cns.cwru.edu/php/chet/readline/rluserman.html)说：

> ```
> editing-mode
>     The editing-mode variable controls which default set of key bindings is
>     used. By default, Readline starts up in Emacs editing mode, where the
>     keystrokes are most similar to Emacs. This variable can be set to either
>     `emacs' or `vi'. 
> ```

`editing-mode`注意和之间的区别`keymap`：在`editing-mode vi`这两个（是的，只有两个，请继续阅读）中，键映射被交换进出以模拟`vi`编辑器的不同模式。*所有*这些`emacs`都在同一时间运行`editing-mode emacs`（稍后解释）。

那么`editing-mode`实际上是做什么的呢？它只是将 shell 启动时的活动键盘映射设置为`emacs`或`vi-insert`。

**什么是独特的键盘映射？**

> ```
> Acceptable keymap names are emacs, emacs-standard, emacs-meta, emacs-ctlx,
> vi, vi-move, vi-command, and vi-insert.
> 
> vi is equivalent to vi-command; emacs is equivalent to emacs-standard. 
> ```

虽然没有记录，但`vi`/`vi-command`和`vi-move`键映射也是等价的：

```
+ravi@boxy:~$ diff <(bind -pm vi) <(bind -pm vi-move)
+ravi@boxy:~$ 
```

这给我们留下了：`emacs`, `emacs-meta`, `emacs-ctlx`, `vi`, 和`vi-insert`作为唯一的键映射来解释。区分键盘映射可能最好通过检查它们来完成......

**什么是键盘映射默认绑定？**

要查看（示例）emacs（默认）的默认键绑定，请使用：

```
INPUTRC=~/dev/null bash -c 'bind -pm emacs' | grep -v '^# 
```

您可以在上面的示例中替换`emacs`为任何其他键盘映射名称。

有很多行说`self-insert`或`do-lowercase-version`不是很有用，所以删除它们：

```
INPUTRC=~/dev/null bash -c 'bind -pm emacs' | grep -vE '^#|: (do-lowercase-version|self-insert)$' | sort 
```

**各种键盘映射有什么区别`emacs`？**

TL;DR：它们是对应用于`editing-mode emacs`.

如果你将第二条命令的输出放到名为`emacs-standard`, `emacs-meta`, `emacs-ctlx`, , 的文件中`vi-command`，并`vi-insert`为它们对应`keymap`的 s ，你可以发现：

没有映射的命令`emacs-meta`，`emacs-ctlx`也没有出现在`emacs-standard`：

```
$ comm -13 <(sed -r 's/.*: (\S+)/\1/' emacs-standard|sort) <(sed -r 's/.*: (\S+)/\1/' emacs-ctlx|sort)
$ comm -13 <(sed -r 's/.*: (\S+)/\1/' emacs-standard|sort) <(sed -r 's/.*: (\S+)/\1/' emacs-meta|sort)
$ 
```

所以`emacs`/`emacs-standard`是两者的行为功能超集`emacs-ctlx`和`emacs-meta`这意味着：

```
keymap emacs
"\eg": glob-expand-word
"\C-x\C-r": re-read-init-file 
```

在功能上等同于：

```
keymap emacs-meta
"g": glob-expand-word

keymap emacs-ctlx
"\C-r": re-read-init-file 
```

你可能会争辩说第二种形式更容易阅读。

**插入文本：`emacs`vs`vi-insert`**

`emacs-standard`not in 中有 28 个命令`vi-insert`

```
+ravi@boxy:~/lib/readline$ comm -12 vi-insert emacs-standard |wc -l
28
+ravi@boxy:~/lib/readline$ 
```

`emacs`/`emacs-standard`基本上是`vi-insert`. 因此，对于键入文本，最好使用`emacs-standard`键盘映射`vi-insert`，只要您可以轻松地在[和](https://unix.stackexchange.com/questions/303637/readline-how-do-i-change-from-emacs-to-vi-command-with-a-binding)[之间切换`emacs``vi-command`](https://unix.stackexchange.com/questions/303637/readline-how-do-i-change-from-emacs-to-vi-command-with-a-binding)。

`vi-insert`not in中唯一的附加绑定`emacs-standard`是：

```
+ravi@boxy:~/lib/readline$ comm -23 vi-insert emacs-standard 
"\C-d": vi-eof-maybe
"\C-n": menu-complete
"\C-p": menu-complete-backward
"\e": vi-movement-mode 
```

这四个中的前三个与`emacs`绑定冲突：

```
"\C-d": delete-char
"\C-n": next-history
"\C-p": previous-history 
```

我解决如下：

```
set keymap emacs
"\e": "kj" # see https://unix.stackexchange.com/questions/303631/how-can-i-setup-a-hybrid-readline-with-emacs-insert-mode-and-vi-command-mode
"\C-d": delete-char # eof-maybe: ^D does nothing if there is text on the line
"\C-n": menu-complete
"\C-p": menu-complete-backward
"\C-y": previous-history # historY
"\e\C-y": previous-history 
```

## **`editing-mode vi`**

正如我们在上面看到的`vi`，`vi-command`和`vi-move`是*同一个*键映射：

```
+ravi@boxy:~$ diff <(bind -pm vi) <(bind -pm vi-move)
+ravi@boxy:~$ 
```

请注意，总共只有*两个*不同的地图，默认情况下与`editing-mode vi`.

当 in 时`editing-mode vi`，`keymap`使用的 s 是`vi`//`vi-command`和`vi-move`（`vi-insert`起始键映射）。一次只有这两张地图中的一张处于活动状态。

`editing-mode vi`只是在 shell 启动时设置一个默认的键盘映射，标记为`vi-insert`. 同样，一次只有一个键盘映射处于活动状态。此`vi-insert`键盘映射将大多数键映射到，`self-insert`因此当您按下键盘上的塑料按钮时，印在其上的符号会出现在屏幕上。

`vi-insert`键盘映射允许自己通过使用命令交换到称为//的文本操作键盘映射，默认`vi-command`绑定`vi`到键盘映射中的键。`vi-move``vi-movement-mode``ESC``vi-insert`

实际上，即使是`emacs`键盘映射也可以`vi`通过使用命令将类似文本操作的键盘映射设置为活动状态`vi-movement-mode`，就像上面提到的混合解决方案一样。

**或者用更简单的语言...**

默认情况下，当键盘映射处于活动状态时，按下`ESC`可更改为键盘映射。`vi-command``vi-insert`

键盘映射使用标准的`vi-command`单个按键，如`a`,`b`和`c`来移动文本并与之交互，就像`vi`编辑器的默认或命令模式一样。通常没有`Ctrl`+`key`组合。您不能在此模式下插入文本；字母键映射到编辑/移动命令。要输入文本，请切换到`vi-insert`键盘映射（例如：按下`i`“插入”）。

输入文本是使用键盘映射完成的，如果你的文件中`vi-insert`有，它在 shell 启动时是活动的。通过按下“插入”来切换到键盘映射（或以许多其他方式启动进入）。`editing-mode vi``.inputrc``vi-insert``i``vi-command``vi`

除非您了解`vi`编辑器，否则一开始您可能会发现`vi-command`键很难使用，但如果您熟练使用它，您可以像大胡子巫师一样编辑文本。

# c++ - 在 range[x,y] 中整数的二进制补码表示中计数 1

> ID：10002359
> 
> 赞同：1
> 
> 时间：2012-04-03T22:27:55.510
> 
> 标签：c++, algorithm, binary

我的问题与论坛中的上一个问题有关 - [范围内整数的二进制补码二进制表示中的 1 的数量对](https://stackoverflow.com/questions/7942732/number-of-1s-in-the-twos-complement-binary-representations-of-integers-in-a-ran) 我来说没有“添加评论”。所以我在这里问它问题是计算1 以 2 的补码形式记下所有数字，这些数字在两个输入数字指定的范围内 解决方案发布在[https://gist.github.com/1285119](https://gist.github.com/1285119) 如下

```
long long solve(int a)
  {
  if(a == 0) return 0 ;
  if(a % 2 == 0) return solve(a - 1) + __builtin_popcount(a) ;
  return ((long long)a + 1) / 2 + 2 * solve(a / 2) ;
  }

 long long solve(int a,int b)
 {
  if(a >= 0)
  {
   long long ret = solve(b) ;
   if(a > 0) ret -= solve(a - 1) ;
   return ret ;
   }
 long long ret = (32LL * -(long long)a) - solve(~a) ;
 if(b > 0) ret += solve(b) ;
 else if(b < -1)
 {
  b++ ;
  ret -= (32LL * -(long long)b) - solve(~b) ;
 }
return ret ;
} 
```

当输入为4时 //测试用例数

-1 //第一个数字 -2 //第二个数字 输出 0

-1 -3 输出 -31

-3 -5 输出 -30 //1 的个数怎么能是 -30

1 2 输出 2

由于代码作为 Codesprint 解决方案发布在 InterviewStreet 上，并且在这个论坛上获得了高度投票的答案。它应该是正确的。谁能解释一下 long long ret = (32LL * -(long long)a) - solve(~a) in solve(int a,int b) 这行背后的逻辑以及#define INF (int)1e9 的目的是什么//不使用时设置无穷大的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T22:54:19.667

您输入的错误结果

```
-1 -2
-1 -3
-3 -5 
```

是因为程序假定这两个限制是按升序输入的，不做检查，因此输入不符合预期会产生错误的结果。一个简单的

```
if (b < a) {
    int temp = a;
    a = b;
    b = temp;
} 
```

在开头`int solve(int a, int b)`将使它返回正确的输入结果以任何顺序输入。

背后的逻辑`long long ret = (32LL * -(long long)a) - solve(~a)`是（在二进制补码中）`n`is的按位补码`~n = (-n)-1`。`a`从到的数字（包括 0 或 1）的总位数`-1`是`32 * |a|`if `a < 0`。从该计数中，我们减去这些数字中 0 位的总数，即按位补码中 1 位的总数。这些按位补码是从 0 到 的数字`|a| - 1 = ~a`，包括 0 和 1，其中 1 位的计数由 给出`solve(|a| - 1) = solve(~a)`。

# apache-flex - 软键盘导致视图在 flex 移动应用程序中反弹

> ID：10002367
> 
> 赞同：0
> 
> 时间：2012-04-03T22:28:37.197
> 
> 标签：apache-flex, mobile, bounce, soft-keyboard

有一个灵活的移动应用程序，在登录表单中设置了几个文本输入。当软键盘出现时，视图会向上平移，然后“取消平移”和“重新平移”，从而产生这种奇怪的反弹效果。

有谁知道如何或为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:54:08.657

我有同样的问题。我最终通过将`softKeyboardBehavior`app.xml 中的属性更改为`none`而不是`pan`. 我更喜欢 default 的外观`pan`，但也没有任何效果，而且没有弹跳。

# c# - 创建类并从 c# 编译它

> ID：10002368
> 
> 赞同：1
> 
> 时间：2012-04-03T22:28:41.347
> 
> 标签：c#

我正在使用 c# 创建一个自定义代码生成器......这个生成器现在只从数据库的表中创建业务实体。但现在我想要的是创建一个包含这些类的项目，并在创建之后......从项目中生成 dll。

有没有办法完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:41:44.753

您可以使用[CSharpCodeProvider](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)将代码编译为 DLL，如下所示（在互联网某处找到）：

```
public static bool CompileCSharpCode(String sourceFile, String outFile)
        { 
            // Obtain an ICodeCompiler from a CodeDomProvider class.
            CSharpCodeProvider provider = new CSharpCodeProvider(); 
            ICodeCompiler compiler = provider.CreateCompiler(); // Build the parameters for source compilation. 
            CompilerParameters cp = new CompilerParameters(); // Add an assembly reference. 
            cp.ReferencedAssemblies.Add("System.dll"); // Generate an class library instead of // a executable. 
            cp.GenerateExecutable = false; // Set the assembly file name to generate. 
            cp.OutputAssembly = outFile; // Save the assembly as a physical file. 
            cp.GenerateInMemory = false; // Invoke compilation. 
            CompilerResults cr = compiler.CompileAssemblyFromFile(cp, sourceFile);
            if (cr.Errors.Count > 0)
            { // Display compilation errors. 
                Console.WriteLine("Errors building {0} into {1}", sourceFile, cr.PathToAssembly);
                foreach (CompilerError ce in cr.Errors)
                {
                    Console.WriteLine(" {0}", ce.ToString());
                    Console.WriteLine();
                }
            }
            else
            {
                Console.WriteLine("Source {0} built into {1} successfully.", sourceFile, cr.PathToAssembly);
            } // Return the results of compilation. 
            if (cr.Errors.Count > 0) { return false; } else { return true; }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:35:14.927

生成所有内容后，您可以使用反射并使用[emit](http://msdn.microsoft.com/en-us/library/3y322t50.aspx)或使用[Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)类来调用 c# 编译器。

# objective-c - 为什么我的文本字段不能保存到我的单例中？

> ID：10002369
> 
> 赞同：-2
> 
> 时间：2012-04-03T22:28:42.297
> 
> 标签：objective-c, ios

我发现，我认为是一个不错的关于单例类的示例[项目](http://www.iphonedevsdk.com/forum/iphone-sdk-development/54859-sharing-data-between-view-controllers-other-objects.html)。

我的问题是：

怎么了

**- (void)textFieldDidEndEditing:(UITextField *)textField**

在 RootViewController.m 和 SecondViewController.m 内部（大约第 45 行）？我了解它是如何工作的，但我不知道它是如何被调用或使用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:43:46.947

它们由**代表团**触发。如果您检查 nib（在 IB 中），您将看到它已委托第一响应者或类（RootViewController 或 SecondViewController）。

所以它的作用是在用户按下 OK 按钮触发上述方法（定义为 UITextFieldDelegate 协议）时监听文本字段。

# php-extension - 让 ZVAL 在 SAPI 中持久化？

> ID：10002372
> 
> 赞同：1
> 
> 时间：2012-04-03T22:28:53.170
> 
> 标签：php-extension, php-internals

ZVAL 通常是使用 emalloc 创建的，因此它在页面请求结束时被销毁。有没有办法获取现有的 ZVAL 并使其在 SAPI 中持续存在（相当于 pemalloc）？用 pemalloc 创建 ZVAL 怎么样？

理想情况下，我想做的（在 PHP 代码中）是这样的：

```
class Object
{
    public $foo;
}

if(!($object = persist("object")))
{
   $object = persist("object", new Object());
}

$object->foo[] = "bar";

print count($object->foo); 
```

每个请求`count`都会返回 +1（假设每次都使用相同的 PHP“worker”——我使用的是 PHP-FPM）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:02:55.333

你基本上是在描述[http://lxr.php.net/opengrok/xref/PHP_5_3/ext/sysvshm/sysvshm.c#242](http://lxr.php.net/opengrok/xref/PHP_5_3/ext/sysvshm/sysvshm.c#242)

在不复制 shm 中已有的功能的情况下，您可以获得的最接近的是[https://github.com/flavius/php-persist](https://github.com/flavius/php-persist)。问题：在 prefork/多进程 SAPI（如 apache 的）中，来自同一客户端的不同请求可能最终在不同的进程中，因此，您将看到不同的数据（在 Linux + Firefox 上尝试每次都进行硬刷新在浏览器中）。

**注意**：这是一个正在进行的工作，目前它只保留一个整数。添加一个数组应该是微不足道的。欢迎补丁。它仍然需要反序列化部分，并实际使用`persist()`' 的第一个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-05T07:49:17.177

zend_object 不能持久，因此你不能这样做。像 APC 这样的扩展将对象序列化到内存中。

# python - 使用 tinter 制作自定义消息框

> ID：10002383
> 
> 赞同：1
> 
> 时间：2012-04-03T22:29:38.957
> 
> 标签：python, tkinter

我希望在 tkinter 中制作一个三向消息框。比如“你想要巧克力牛奶、柠檬水还是雪碧”，然后是底部三个按钮。顺便说一句，是否可以在计数时使 python “淘汰”数字。所以说我要从 10 计数到 60，我可以让 python 每 7 和 8 跳过一次吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T22:56:41.260

(1) 消息框是指这样的意思吗？ [http://www.java2s.com/Code/Python/GUI-Tk/Creatingasimpledialog.htm](http://www.java2s.com/Code/Python/GUI-Tk/Creatingasimpledialog.htm)

(2)

```
 for i in range(6):
    for j in range(10):
        if j in [7,8]: continue
        print i*10+j 
```

如果以 7 或 8 结尾，则打印所有 0-59 跳过的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-20T01:33:30.137

您可以使用 PyMsgBox 来执行此操作。安装它`pip install pymsgbox`。该文档位于[https://pymsgbox.readthedocs.io/en/latest/](https://pymsgbox.readthedocs.io/en/latest/)

做你的例子的代码是：

```
>>> import pymsgbox
>>> drink_choice = pymsgbox.confirm('What drink do you want?', 'Title', ['Chocolate milk', 'Lemonade', 'Sprite']) 
```

# javascript - 在 SkyDrive 上创建文件

> ID：10002390
> 
> 赞同：2
> 
> 时间：2012-04-03T22:30:05.260
> 
> 标签：javascript, rest, onedrive

我正在尝试使用 JavaScript 在 SkyDrive 上创建一个新文件。

到目前为止，我最接近的事情是创建一个文件，但没有任何内容。

```
function upload() {
            WL.api({
                path: "me/skydrive/files/testfile8.txt",
                method: "PUT",
                body: "Some file content"
            }, function (response) {onError(response) });

                function onError(response) {

                $("#status").html(response.error) 
                }

        } 
```

有谁知道如何在 SkyDrive 上创建一个新文件并将一个字符串作为文件内容传递。

我也尝试过使用 Ajax

```
 $.ajax({                   
                type : "PUT",
                url: "https://apis.live.net/v5.0/me/skydrive/files/HelloWorld.txt?access_token=" + ACCESS_TOKEN,
                data: "SOMEDATA",                    
                processData: false,                                        
                success: function() { alert('Success!' );},
                error: function(a,b,c) { alert('Error!' + a + b + c); }
            }); 
```

这只是返回一个内部服务器错误，让我很无助:)

有人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-17T08:31:38.557

很抱歉回复一个旧帖子。

下面的代码怎么样？

它会创建一个名为“hello.txt”的文件，其中包含字符串“Hello, world!”。在您的 SkyDrive 文件夹中。

```
var CLIENT_ID = '!!!!!!!!CLIENT ID!!!!!!!!';
var REDIRECT_URI = '!!!!!!!REDIRECT URI!!!!!!!';
var filename = 'hello.txt';
var content = 'Hello, world!';
var access_token = '';
WL.init({
    client_id: CLIENT_ID,
    redirect_uri: REDIRECT_URI
}).then(function (response) {
    return WL.login({scope: ['wl.signin', 'wl.skydrive', 'wl.skydrive_update']});
}).then(function (response) {
    access_token = response.session.access_token;
    return WL.api({path: 'me/skydrive'});
}).then(function (response) {
    var url = response.upload_location + filename + '?access_token=' + access_token;
    var xhr = new XMLHttpRequest();
    xhr.open('PUT', url);
    xhr.onload = function () {
        alert('success:', xhr.responseText);
    };
    xhr.onerror = function (error) {
        alert('XHR error:', xhr.responseText);
    };
    xhr.send(new Blob([content]));
}, function (error) {
    alert('error:', error);
}); 
```

顺便说一句，[这个线程](http://social.msdn.microsoft.com/Forums/live/en-US/5e259b9c-8e9e-40d7-95c7-722ef5bb6d38/upload-file-to-skydrive-using-javascript?forum=messengerconnect)也可以帮助你。

# xcode - 在 OSX 10.6.8 上安装 XCode 3.2.5 会产生错误 - “操作无法完成。CSSMERR_TP_CERT_EXPIRED”

> ID：10002393
> 
> 赞同：5
> 
> 时间：2012-04-03T22:30:17.060
> 
> 标签：xcode, osx-snow-leopard

在 OSX 10.6.8 上安装 XCode 3.2.5 时，我在 /private/var/log/install.log 中收到以下错误消息

> 安装预检失败：错误域=PKInstallErrorDomain 代码=102 UserInfo=0x1d9a30““iPhoneSDKTools.pkg”包不受信任。” 基础错误=（错误域=NSOSStatusErrorDomain Code=-21 47409654 UserInfo=0x1dbe90“操作无法完成。CSSMERR_TP_CERT_EXPIRED”）

为其他在不同版本的 XCode 上搜索的人添加问题和答案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-20T19:59:23.400

我在安装从 Apple 下载的 XCode 3.2.6 版本时也遇到了问题，检查了日志并得到了“不受信任”的错误，并在这里找到了发现包签名问题的方法。不过，其中一些工具仅适用于 Lion，其中大部分是 catch 22，因为我们使用的是 10.6，因此必须使用 Xcode 3.2.6...

**无论如何，长话短说，将系统日期更改回 2012 年 2 月（在 2012 年 3 月证书到期之前）然后安装....**对我来说很好，这样一个简单的解决方案 - 太长了...

编辑：对不起，只是点击查看您关于日期/时间的链接，我直接去了重新包装器。如果没问题，我会把它留在这里，因为它可以直接回答像我这样刚刚在 Google 等上找到它的人的问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T22:32:53.470

我在最近的[stackoverflow](https://stackoverflow.com/questions/9883247/cant-update-xcode-4-2-error-please-consult-var-log-install-log-for-more-detai)帖子中找到了 XCode 4.2 的解决方案。

按照说明将图像展平也适用于 XCode 3.2.5： http:
[//managingosx.wordpress.com/2012/03/24/fixing-packages-with-expired-signatures/](http://managingosx.wordpress.com/2012/03/24/fixing-packages-with-expired-signatures/)

# svn - 在 svn 1.7.4 中撤销提交

> ID：10002396
> 
> 赞同：0
> 
> 时间：2012-04-03T22:30:35.793
> 
> 标签：svn

我尝试了通常的方法来反向合并意外提交：

```
svn merge -rBAD_REV:BAD_REV-1 . 
```

并且很不安地得到了一个关于mergeinfo的消息作为回应。文件内容没有实际恢复到以前的版本。

我去另一棵树上进行了修复，在那里我可以使用 svn 1.6.x，但我最终想知道：它是在做正确的事情而不告诉我，还是配方改变了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:37:02.550

那应该仍然是正确的，但是请尝试从源代码树的顶层而不是文件目录中执行此操作。或者尝试使用该`--ignore-ancestry`标志来跳过有关 mergeinfo 的警告（在您的情况下这应该不是问题，除非有人碰巧从 BAD_REV 修订版创建了一个分支）。

# debugging - windows环境下加载符号文件调试交叉编译的VLC（Linux中的mingw）项目（Cygwin）

> ID：10002398
> 
> 赞同：2
> 
> 时间：2012-04-03T22:30:38.367
> 
> 标签：debugging, gdb, cygwin, mingw, cross-compiling

我在 windows 环境下使用 gdb 调试 vlc.exe 时遇到问题。我按照[http://wiki.videolan.org/Win32Compile](http://wiki.videolan.org/Win32Compile)上的说明，在linux下成功编译打包VLC。

该程序运行良好，我也在项目文件夹中获得了符号表。但是我不能让 gdb 加载必要的符号文件来设置断点和东西。

在 vlc 文件夹下，目标文件列在 like

./win32/*/*/*.o

并且可执行文件存储在

./win32/vlc-2.1.0-git/vlc.exe

Cygwin shell 中的“gdb vlc.exe”加载的有用符号不多。

我尝试了符号表命令来加载特定的符号文件。它加载文件，我可以在中断提示中看到该功能。但是当我运行程序时，我收到了警告：

无法插入断点 1。

访问内存地址 0x2800 时出错：输入/输出错误。

有没有办法为 gdb 提供符号文件，以便我可以像在 linux 环境中一样调试它？

如果有人对我为什么这样做感兴趣，这里有一点背景。

我正在研究 VLC 代码库，了解它对 DXVA2 接口的包装。该项目非常庞大且复杂，其中包含许多试图模仿 C++ 继承和封装的函数指针，这使得它难以理解。

我的目的是单步调试 DXVA2 (Microsoft DirectX Video Acceleration 2) h264 路径上的 VLC 源代码，该路径仅在 windows 平台上运行。AFAIK vlc 没有可用于编译和调试的 IDE 项目文件。我选择交叉编译是因为 VLC 网站建议这样做，我想如果我能得到符号文件、源代码和可执行文件，我就可以调试它。

帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T00:19:11.570

我找到了解决方案。

gdb 需要知道在哪里加载符号文件，这可以使用 path 函数或在 path 中添加符号文件位置来完成。

gdb 还需要知道在哪里加载源文件，这可以做目录功能或指定程序何时启动。

这就是我所做的：

将此添加到我的 .bashrc 文件中：

```
PATH=$PATH:[vlc proj folder]

export PATH 
```

然后像这样启动 gdb：

```
gdb `find [vlc proj folder] -type d -printf '-d %p '` vlc.exe 
```

:)

# sql - 从字符串转换日期和/或时间时转换失败

> ID：10002401
> 
> 赞同：9
> 
> 时间：2012-04-03T22:30:55.357
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个相当简单的分页查询，用于从表中获取行

```
ALTER PROCEDURE mytable.[news_editor_paginate]
    @count int,
    @start int,
    @orderby int
AS
BEGIN
    SET NOCOUNT ON;
    SELECT TOP (@count) * FROM 
    (  
        SELECT news_edits.*,
        ROW_NUMBER() OVER (
            ORDER BY CASE 
                WHEN @orderby = 0 THEN news_edits.[time]
                WHEN @orderby = 1 THEN news_edits.lastedit
                WHEN @orderby = 2 THEN news_edits.title
                END
            DESC
        ) AS num
        FROM news_edits
    ) AS a
    WHERE num > @start
END 
```

该`@orderby`参数决定结果应按哪一列排序。

`news_edit.[time]`并且`news_edits.lastedit`都是日期时间字段。但是`news_edits.title`是一个varchar字段。

查询对于两个日期时间字段都运行良好，但是当`@orderby = 2`我收到以下错误时：

*“从字符串转换日期和/或时间时转换失败。”*

我遇到的问题是我没有尝试转换任何东西？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-03T22:33:19.380

[您需要将您的语句`ORDER BY`分成多个`CASE`语句：](http://pranayamr.blogspot.com/2010/11/sql-server-casewhen-return-type.html)

```
ORDER BY 
    CASE WHEN @orderby = 0 THEN news_edits.[time] END DESC,
    CASE WHEN @orderby = 1 THEN news_edits.lastedit END DESC,
    CASE WHEN @orderby = 2 THEN news_edits.title END DESC 
```

这是因为单个`CASE`语句要求所有分支都具有兼容的数据类型。由于您的字符串`CASE`无法转换为从另一个返回的日期时间`CASE`，因此您会收到转换错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:40:32.693

由于您没有显式转换“按大小写...”值，SQL Server 推断它是一个日期时间（根据第一种情况的类型）。

您的问题的解决方案是将日期转换为允许您按其排序的字符串格式，有点像“yyyyMMddhhmmss”。如果这样做，所有“按大小写...”值都将是字符并且它会起作用。

或者，您可以有两个选择，并使用 if 选择其中一个。if 的第一部分用于日期，第二部分用于标题。

# ruby - 只加载 Ruby 中正在使用的类？

> ID：10002405
> 
> 赞同：2
> 
> 时间：2012-04-03T22:31:16.663
> 
> 标签：ruby, class, require, ruby-1.9.3

如果我加载`x.rb`，[则加载该文件中的所有类](https://stackoverflow.com/questions/10001106/does-requiring-a-gem-load-everything-including-things-i-dont-use/10001223#10001223)。是否可以检查并查看正在使用哪些类并仅加载这些类？

假设 x.rb 包含 Hello 和 Goodbye 类，而我的程序只使用 Hello 类，是否可以只加载 Hello 类？

对检查文档的脚本感到满意，并输出一个只有 Hello 类和使用它的代码的 .rb ......如果不存在，这将是一个有趣的 github 项目，但我认为它超出了我的技能集 atm .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:54:51.307

当类在自己的单独文件中定义时，您*可以*使用[`autoload`](http://www.ruby-doc.org/core-1.9.2/Kernel.html#method-i-autoload)¹² 方法：

```
autoload :Hello,   'x/hello'
autoload :Goodbye, 'x/goodbye' 
```

当您编写 时`Hello`，您实际上是在访问`Hello`常量。如果未定义常量，则用于自动要求文件`autoload`。`const_missing`

请注意，我们仍然在这里处理文件。的内容`x/hello.rb`将被简单地读取和评估。该代码可以运行任何操作。它可以是`require`其他文件。它可以定义一百万个其他类。

那是因为源代码实际上只是文本。对于解释型语言尤其如此。例如，[在 Java 中，每个“编译单元”通常只能声明一个公共类型](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.6)。在 Ruby 中，没有这样的东西。

* * *

¹ [Matz 强烈反对这种做法](http://bugs.ruby-lang.org/issues/5653)

²[关于 Ruby Inside 的文章`autoload`](http://www.rubyinside.com/ruby-techniques-revealed-autoload-1652.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:52:09.263

注意：我误读了问题的一部分，而另一部分以某种方式回避了我……我一定是在处理多项任务。无论如何，这个答案只回答了一半的问题，而且是错误的；只是说。

好的，这可能是一种昂贵的方法，但试试这样的方法：

```
$ cat definer.rb
class Foo
  def greet(person)
    puts "Hello, #{person}!"
  end
end
Bar = Class.new

$ cat finder.rb
$LOAD_PATH << File.dirname "."
before = Object.constants
require 'definer'
after = Object.constants
print (before - after).join(" ")

$ cat looker.rb
differences = `ruby finder.rb`.split(" ")
puts "The following constants will be defined when finder.rb is loaded: #{differences.join(", ")}" 
```

现在为了更清洁和方式，您可以使用套接字。我会举一个例子。

# python - 如何在 virtualenv 中安装哪些程序需要“sudo”？

> ID：10002406
> 
> 赞同：2
> 
> 时间：2012-04-03T22:31:24.197
> 
> 标签：python, ubuntu, virtualenv

我正在尝试安装[kivy](http://kivy.org)，它在[文档](http://kivy.org/docs/installation/installation-ubuntu.html)中说：

```
$ sudo apt-get install python-setuptools python-pygame python-opengl \
  python-gst0.10 python-enchant gstreamer0.10-plugins-good cython python-dev \
  build-essential libgl1-mesa-dev libgles2-mesa-dev
$ sudo easy_install kivy 
```

但是我不想使用`sudo`我喜欢将我的项目组织在 virtualenv 中，所以如何在不使用`sudo`. `apt-get install`除非我使用`sudo`. 而且我在`pip`. 例如，假设我想安装`easy_install`在 virtualenv 中，该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:52:47.080

当您使用 virtualenv 并开始运行时，您可以使用安装在那里的 easy_install / pip。这不需要 sudo，因为它直接安装到 virtualenv。

换句话说 - 它只是工作。你试过吗？

这里有一个简单的例子[http://www.arthurkoziel.com/2008/10/22/working-virtualenv/](http://www.arthurkoziel.com/2008/10/22/working-virtualenv/)

*   `sudo easy_install virtualenv` （你需要的最后一个 sudo）

*   `virtualenv kivydir`

*   `source kivydir/bin/activate`

*   `easy_install kivy`（安装到 kivydir）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T00:05:59.113

我认为没有 sudo/root 访问权限就无法安装 kivy 的依赖包。

安装它们后，请按照 Andrew's [answer](https://stackoverflow.com/a/10002598/754042)中概述的步骤进行操作。

# r - 跨多行的列名？

> ID：10002408
> 
> 赞同：2
> 
> 时间：2012-04-03T22:31:29.067
> 
> 标签：r, xts, zoo

我正在导入一个 csv 文件，该文件由一个交叉表和两行层次结构中的列名组成。当我在 R 中获取表格时，结果如下所示：

```
 alpha  X.1  X.2 beta  X.1  X.2  X.3 gamma  X.1
    var1 var2 var3 var1 var2 var3 var4  var1 var4
1     21   50    5   22   48    6    8    25    8 
2     27   50    5   24   48    6    8    33    8 
3     26   50    5   28   48    6    8    33    8 
4     25   50    5   28   48    6    8    20    8 
```

这里， alpha、`beta`和`gamma`都是层次结构的一级，而`var1`、`var2`、`var3`和`var4`是第二级。

我想要它做的是得到如下输出，其中行名是连接的，但也要记住数据的结构。

```
 alpha_var1  alpha_var2  alpha_var3 beta_var1  beta_var2  beta_var3  beta_var4 gamma_var1  gamma_var4
1          21          50           5        22         48          6          8         25           8 
2          27          50           5        24         48          6          8         33           8 
3          26          50           5        28         48          6          8         33           8 
4          25          50           5        28         48          6          8         20           8 
```

这里有什么想法吗？一直找不到任何东西来处理这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:35:50.720

这似乎有效，虽然`xts`对于该功能的使用似乎有点笨拙`na.locf()`，但我知道它有效并且经常使用它，所以这就是我使用的。

```
library(xts)
#Read in data without headers
x <- read.delim("Book1.txt", skip = 2, header = FALSE)
#Read in header files transposing them into columns
headers <- data.frame(t(read.delim("Book1.txt", nrows = 2, header = FALSE)), stringsAsFactors = FALSE)

#Create a now column with the value of alpha, beta, gama or NA
headers$vals <- with(headers, ifelse(grepl("[abg]", X1), X1, NA))
#Fill down the values above
headers$vals <- na.locf(headers$vals)
#Paste column names together
colnames(x) <- with(headers, paste(vals, X2, sep = "_"))
#Resulting object
x

 alpha_var1 alpha_var2 alpha_var3 beta_var1 beta_var2 beta_var3 beta_var4 gamma_ var1 gamma_var4
1         21         50          5        22        48         6         8          25          8
2         27         50          5        24        48         6         8          33          8
3         26         50          5        28        48         6         8          33          8
4         25         50          5        28        48         6         8          20          8 
```

# c++ - 简单的循环，哪一个我会获得更高的性能，推荐哪一个？在循环内部或外部定义变量？

> ID：10002410
> 
> 赞同：1
> 
> 时间：2012-04-03T22:31:30.537
> 
> 标签：c++, c, algorithm

循环外的变量

```
int number = 0;
for(int i = 0; i < 10000; i++){
     number = 3 * i;
     printf("%d",number);
} 
```

或循环内的变量

```
for(int i = 0; i < 10000; i++){
     int number = 3 * i;
     printf("%d",number);
} 
```

推荐哪一款，哪一款性能更好？

**编辑：**

这只是展示我的意思的一个例子，我只想知道在循环内和循环外定义一个变量是否意味着相同的事情，或者有区别。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T22:37:48.397

是时候尽早学习一些东西了：面对 printf，您可以对此类内容进行的任何优化都将无关紧要。

Printf 会非常非常慢。你可以将数学增加五倍，并且没有可测量的速度下降。这只是打印到终端的性质。

至于您编辑过的问题，在循环中或输出中定义它没有区别。设想

```
for (i = 0; i < 500; i++) {
  int a = i * 3;
} 
```

和

```
int forloop::a; // This doesn't work, the idea is to show it just changes the scope
for (i = 0; i < 500; i++) {
  a = i * 3;
} 
```

它们将产生相同的代码，除非您开始需要在定义它的循环之外使用该变量，因为它是在循环的本地范围内定义的。所以......更像这样：

```
int forloop::a;    // Still not valid code, just trying to show an explanation
namespace forloop {
for (i = 0; i < 500; i++) {
  a = i * 3;
}
} // namespace forloop 
```

如果不清楚，请告诉我，我会更详细地介绍或以不同方式解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T23:05:24.023

您确实有一个 C++ 标记，并且您在问题中提到了“声明字符串”。因此可能存在性能差异（是的， printf 可能会淹没它）。声明一个非简单变量意味着调用一个构造函数，这可能意味着大量的工作。在这种情况下，在循环内声明它可能会在看似无辜的声明中隐藏重要的工作。

一般来说，答案是，如果你真的关心性能——并且只将示例代码视为两个地方之间声明变量的差异的示例——那么对于非简单变量，最好在循环之外声明它，除非语义在每次迭代时都需要一个新版本的临时变量。

如果性能是一个问题，可能还有很多其他地方首先要查看，但一个考虑因素总是将循环不变量移出循环，特别是如果您更容易判断它是不变的，而不是编译器。看起来像声明的东西，在 C++ 中就属于这一类。

如果，对于（愚蠢的）例子，你有

```
int k = 43;
for ( int i = 0; i < N; ++i )
    {
    int j = 17 + k; // k was previously defined outside the loop, but doesn't change in it
    l = j * j; // l was also declared outside the loop
    } 
```

任何优秀的优化编译器都可以识别出 k 是常量，并且 j 总是被分配 60，而 l 被分配了 3600 N 次，并且可以简单地删除循环并用对 l 的单个分配替换。这里 k 和 j 都是循环不变量。

但是一个不太好的编译器可能会错过该链中的一个链接，并最终创建循环。

当你有

```
 Foo k( 43 );  // a class that takes an int argument to its constructor
 for( int i = 0; i < N; ++i )
    {
    Bar j( k ); // a Bar takes an int argument, adds 17 and stores it.
    l = j.squared();
    } 
```

相同的不变量。如果不查看 bar 的工作原理，就不容易检测到；如果构造函数和 squared 方法不是内联的，我们只是让它变慢了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-03T22:53:32.457

不要一开始就用性能来打扰你：在一切之前让它安全。

我只想引用**Scott Meyers (Effective C++)**来表达您的担忧： **“尽可能推迟声明”**。因此，第二种模式更安全。

例子：

```
int j = 0;
for(int i = 0; i < 10000; i++){
    j = 3 * i;
    printf("%d",j);
}
...
// Use of j out of control!!!
int k = j * 5; 
```

现在使用第二种模式：

```
for(int i = 0; i < 10000; i++){
    int j = 3 * i;
    printf("%d",j);
}
...
// j not declared at this point.
// You get informed of the mistake at compile time, which is far much better.
int k = j * 5; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T22:34:02.000

在这种情况下， printf("%d", i * 3) 将比定义变量更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-03T22:50:18.173

要回答您的问题而不是吹毛求疵：

两种变体之间的区别在于，您`number`在不同的“变量环境”中声明变量——我的意思是范围发生了变化。变量环境由您的花括号给出`{ ... }`。每次像这样打开一个新的大括号`{ ... { ... } ... }`时，都会在旧的大括号中声明一个新的变量环境，这意味着，如果你`numbers`这样声明：

`{ ... { int numbers; ... } ... }`

此变量仅在最内部的环境中可见或存在。所以

`{ ... { int numbers; ... } ... do_something(numbers); ... }`

将给出编译器错误。

对于您对性能的担忧：这两种变体都没有更好的性能。大多数（如果不是所有）编译器都会给出相同的程序集。

# reporting-services - 导出为 CSV 时的列可见性

> ID：10002411
> 
> 赞同：2
> 
> 时间：2012-04-03T22:31:33.080
> 
> 标签：reporting-services, ssrs-2008

有人可以告诉我为什么这不起作用吗？

我将“列可见性”设置为“根据表达式显示或隐藏”

表达式如下：

=IIF(Globals!RenderFormat.Name = "CSV",True,False)

保存为 CSV，列显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T21:02:25.363

对于 CSV 呈现方法，格式选项（例如可见性表达式）将被忽略。CSV 呈现方法本质上是数据流，因此您可以通过将 DataElementOutput 从默认值 Auto 更改为 NoOutput 来抑制不想包含在 CSV 文件中的元素。

# html - Getting a movie to play seamlessly on my site (without controls or a frame)

> ID：10002418
> 
> 赞同：0
> 
> 时间：2012-04-03T22:32:47.337
> 
> 标签：html, css, movieclip

I want a short movie clip to play when visitors arrive at my site. I want the video area to show up without movie controls, and without any kind of border frame, so that it just looks like a moving picture. What's the best way to do that?

I'm not overly concerned with browser support. I don't want to use Flash.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:12:09.520

You can easily do this with the HTML5 video element and a little bit of javascript. You can embed the video into the page using:

```
<video id="video">
<source src="movie.mp4" type="video/mp4" />
Your browser does not support the video tag.
</video> 
```

Just replace the src and type with your information. As for the Javascript, you can use the following:

```
var video = document.getElementById("video");
video.removeAttribute("controls"); 
```

This is, of course, assuming your video element's ID is "video".

# ruby-on-rails-3.1 - Rails 3.1 - github.com 中缺少 Thumbs_up gem...它去哪儿了？

> ID：10002421
> 
> 赞同：0
> 
> 时间：2012-04-03T22:33:02.300
> 
> 标签：ruby-on-rails-3.1, github, gem

我想查看`thumbs_up`gem 文档。我看到的所有参考资料都指向： [https](https://github.com/brady8/thumbs_up) ://github.com/brady8/thumbs_up ，但是今天当我转到该 URL 时出现 404 错误。有谁知道发生了什么事？thumbs_up gem 移动到其他地方了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:35:25.233

它仍在[RubyGems](https://rubygems.org/gems/thumbs_up)上，但它可能不是最新版本。

编辑：经过更多挖掘，它在 GitHub 上有[相当多的网络。](https://github.com/dfischer/thumbs_up/network)最近更新的分叉是[tarnacious](https://github.com/tarnacious/thumbs_up)，但[布查德的 repo](https://github.com/bouchard/thumbs_up)分叉最多。Bouchard 似乎[经常更新](https://github.com/bouchard/thumbs_up/commits/master)，所以这是一个好兆头。

# c# - 将多个字段绑定到 MVC 3 视图模型的同一属性

> ID：10002430
> 
> 赞同：3
> 
> 时间：2012-04-03T22:34:32.937
> 
> 标签：c#, asp.net-mvc-3

我目前正在尝试弄清楚如何将 MVC 3 视图中的多个字段绑定到视图模型上的 1 个属性，以及在尝试实现这一点时推荐什么。

使用一个例子来说明准备某事所需的分钟数（仅）。

表单可能如下所示：

准备时间 - 小时：[1] 分钟：[30]

并且提交的表单值需要转换为分钟并绑定到 ViewModel 的 PreparationTimeInMinutes 属性。

视图模型属性：

```
public short PreparationTimeInMinutes { get; set; } 
```

并且 View 是对 ViewModel 的强类型，目前具有以下内容：

```
<div class="editor-label">
    @Html.LabelFor(model => model.PreparationTimeInMinutes)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.PreparationTimeInMinutes)
    @Html.ValidationMessageFor(model => model.PreparationTimeInMinutes)
</div> 
```

为了实现这一目标，我开始考虑以下几件事。

1.  将 PrepareTimeInMinutes 属性更改为具有小时和分钟属性的 ViewModel 并为其创建编辑器和显示模板，以便 MVC3 可以整理绑定和验证？
2.  准备时间使用 javascript 和隐藏字段。
3.  其他一些方法可以让您使用 MVC 模型绑定来做这种事情？

有没有人对这类事情的最佳实践有任何建议？或者如果我很遥远。

请告诉我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:18:35.993

Javascript 还不错，但不是真正的 MVCish。我认为更好的方法是使用这两个字段的视图模型或使用编辑器/显示模板创建一个新类。

我同意 SLaks；您可以创建一个自定义模型绑定器来处理这个问题，但这可能是矫枉过正。[我根据这篇文章](http://www.hanselman.com/blog/SplittingDateTimeUnitTestingASPNETMVCCustomModelBinders.aspx)为一个日期和两次的类型创建了一个自定义活页夹，尽管我的要简单得多。但是如果你只是想练习或者了解更多关于模型绑定的知识，它是可行的。

编辑：抱歉，以防万一您决定尝试 ModelBinder 路线，该示例有点旧（可能是 MVC 1？！）。我忘记了必须进行额外的修改。 [这些](http://www.longcloudtech.com/Blogs/Yankiwi/post/2010/04/21/Updating-Scott-Hanselmane28099s-DateTime-Custom-Model-Binder-%28DateAndTimeModelBinder%29.aspx) [链接](https://stackoverflow.com/questions/4149805/valueprovider-does-not-contain-a-definition-for-trygetvalue)应该有助于更新该示例。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:39:36.950

您应该使用第一个选项。
这正是编辑器模板的用途。

如果需要，您可以创建自定义 ModelBinder 将两个 POST 值绑定到一个数字（以及类似的编辑器模板），并将属性应用于属性以选择该 ModelBinder。
但是，这可能是矫枉过正。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T23:17:51.357

谢谢斯拉克斯。

使用第一个选项，我在视图模型中执行了以下操作

```
public TimeInMinutesViewModel PreparationTimeInMinutes { get; set; } 
```

制作了这个视图模型

```
 public class TimeInMinutesViewModel {
    public string Label { get; set; }
    public short Hours { get; set; }
    public short Minutes { get; set; }
} 
```

和这个编辑器模板

```
@model TimeInMinutesViewModel

<div>@Html.LabelFor(x => x.Label)</div>
<div class="editor-label">@Html.LabelFor(x => x.Hours)</div>
<div class="editor-field">@Html.EditorFor(x => x.Hours)</div>
<div class="editor-label">@Html.LabelFor(x => x.Minutes)</div>
<div class="editor-field">@Html.EditorFor(x => x.Minutes)</div> 
```

并且在视图中

```
@Html.EditorFor(model => model.PreparationTimeInMinutes)
@Html.ValidationMessageFor(model => model.PreparationTimeInMinutes) 
```

我还没有对此进行测试，我可能需要对标签进行一些更改，但这看起来可能适用于我想使用这种方法的 2 个不同的属性。

我现在遇到的问题是能够将这些映射到我的实体属性，它是一个短整数。

我正在使用 AutoMapper，所以我希望这将与自定义类型转换器一起使用，至少在 1 个方向上，但我不确定两个方向:(

# html - 将 div 包装到新行导致有趣的行为

> ID：10002433
> 
> 赞同：1
> 
> 时间：2012-04-03T22:34:36.620
> 
> 标签：html, css, row

如果`div`下面的任何嵌套 s 的长度比相邻的 s 长`div`，则`div`s 不会“正确”换行到下一行。

如果不将每一行划分在它自己的 div 中，有没有办法强制 div #5（在下面的示例中）落在 div 下面，`#1`即使`div` `#1`它比其他的高？

```
<style type="text/css">
  .video-item {
    margin: 10px 29px 20px 0px;
    width: 208px;
    float: left;
    overflow: hidden;
  }
</style>

<div style="width: 948px;">
  <div class="video-item">1<br>This is what happens when Description is too long... </div>
  <div class="video-item">2<br>Description</div>
  <div class="video-item">3<br>Description</div>
  <div class="video-item">4<br>Description</div>
  <div class="video-item">5<br>Description</div>
  <div class="video-item">6<br>Description</div>
  <div class="video-item">7<br>Description</div>
  <div class="video-item">8<br>Description</div>
  <div class="video-item">9<br>Description</div>
  <div class="video-item">10<br>Description</div>
</div>
```

带有偶数描述的示例：
[![带有偶数描述的示例](../Images/ef73a9fb408a4b0725d548d472b0a1aa.png)](https://i.stack.imgur.com/seq5U.png)

不均匀描述的示例：
[![描述不均的示例](../Images/79563b2991840a9792bdc1dbf74fb89d.png)](https://i.stack.imgur.com/vPlRw.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:38:45.370

您需要`clear`在 div 上设置 CSS 样式，以使其恢复正常流程：

```
<style type="text/css">
    .video-item {
        margin: 10px 29px 20px 0px; 
        width: 208px; 
        float: left;
        overflow: hidden; 
    }
    .clear {
        clear: left;
    }
</style>

<div style="width: 948px;">
    <div class="video-item">1<br>This is what happens when Description is too long...         </div>
    <div class="video-item">2<br>Description</div>
    <div class="video-item">3<br>Description</div>
    <div class="video-item">4<br>Description</div>
    <div class="video-item clear">5<br>Description</div>
    <div class="video-item">6<br>Description</div>
    <div class="video-item">7<br>Description</div>
    <div class="video-item">8<br>Description</div>
    <div class="video-item clear">9<br>Description</div>
    <div class="video-item">10<br>Description</div>
</div> 
```

使用 CSS3，您可以`:nth-child`更动态地实现这一点：

```
.video-item:nth-child(4n+1) {
    clear: left;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:42:26.433

另一种解决方案是像这样强制元素的高度：（但@Pete 解决方案更优雅）

```
.video-item {
    margin: 10px 29px 20px 0px; 
    width: 208px; 
    float: left;
    overflow: hidden; 
    height: 70px;
} 
```

[jsFiddle在这里](http://jsfiddle.net/vk3x9/)

# java - 为 Java 安装 openCSV。我该如何处理 .gz 文件？

> ID：10002436
> 
> 赞同：0
> 
> 时间：2012-04-03T22:34:57.083
> 
> 标签：java, eclipse, netbeans, opencsv

我正在尝试`openCSV`为 java 安装并从 sourceForge 下载文件。不幸的是，它是一个 . `gz`文件，我不知道如何处理它。

（如何让 .jar 文件添加到路径中？）

有什么建议么？

我正在使用带有 netbeans 和 eclipse 的 Windows 7 机器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:40:45.160

使用[7-zip](http://www.7-zip.org/)或[winrar](http://www.rarlab.com/)或[Winzip](http://www.winzip.com)解压 tar.gz 的内容。如果你有 cygwin，并且 cygwin bin 目录在你的路径环境变量中，你可以使用命令行来执行这个：

```
tar xvzf thefile.tar.gz 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T00:51:45.667

It sounds like you need some clarification about the file format:

*   .tar is a file format for storing collections of files for distribution or archiving

*   .gz is the file extension for files compressed using gzip

Open the tar.gz archive in [7-zip](http://www.7-zip.org/) and drill into the folder tree until you find the opencsv-2.3 folder and then extract.

# google-app-engine - JDO，无主关系和一次持久化多个对象

> ID：10002437
> 
> 赞同：0
> 
> 时间：2012-04-03T22:34:59.593
> 
> 标签：google-app-engine, jdo

我想在一次创建的两个具有持久性的类之间建立无主关系。这种关系必须是无主的，因为我的应用程序不能真正保证我想要保留的两个实例将永远留在同一个实体组中。我的关系是双向的一对多：

```
// in first class
@Persistent
private Set<Key> instancesOfSecondClass;

// in second class
@Persistent
private Key instanceOfFirstClass; 
```

然后，在一次 servlet`doPost()`调用中，我需要为每个这些类保留一个实例。我实际上做了一个很好的方法来维持双方的关系。首先，`Key`id（我用...</p>

```
@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private Key id; 
```

... 作为无处不在的主键）被添加到第一类的 Set 中，然后在第二类的实例上调用一个便捷方法来通知此更改并相应地更新一个 Key 属性，比较旧值、空检查和所有内容。事实上，当实例是新鲜的时，我还没有任何 Key，所以我需要先通过`pm.makePersistent()`调用来保持它们，然后进行分配并等待`pm.close()`稍后发生。

但是，真正发生的事情非常令人困惑。运行 servlet 后（其唯一目的是返回`Key`这两个实例的序列化 s 以供其他地方使用），我去检查数据存储查看器并查看：

*   第一类的实例得到了持久化（实际上，在我调用实例的那一刻`NullPointerException`起，这里又出现了一个问题）`org.datanucleus.store.mapped.mapping.PersistenceCapableMapping.postInsert(PersistenceCapableMapping.java:1039)``pm.makePersistent()``Set<Key>`
*   第二类的实例得到了持久化（到目前为止一切都很好）
*   第二类的实例对`Key`第一个实例的引用保持不变，是的
*   第一个实例上的键集是……等待它……为空

本地数据存储仅显示空白空间，而在线数据存储显示`<null>`，即使我的类构造函数（带参数的构造函数）`HashSet<T>`为关系创建了一个新实例。

使用 Google App Engine for Java 1.6.4，也发生在 1.6.3 中。

花了一整天的时间试图解决这个问题，将事务放在中间，使用两个`PersistenceManager`s，不同的持久调用顺序，启用跨组事务，没有任何帮助。

一般来说，我很乐意找到一种工作方式来创建和更新两个独立实体组中的两个实例，它们之间存在无主关系，无论可能存在不一致（根据可能的更新频率，我不会那么担心） ）。

同时，我发现了另外两种可能的解决方案，但还没有尝试过：1.不仅创建两个，而且创建四个`PersistenceManager`（一个创建第一个实例，第二个创建第二个实例，第三个更新关系的一侧，第四次更新关系的第二方），或者 2\. 分离实例并在更新后使它们再次持久化。现在不知道该走哪条路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:13:55.570

插件的 v2 提供了“真正的”无主关系，以前不需要这个 Key hackery。如果您设置了多个实体组标志，则可以将双方持久保存在同一事务中，或者您可以将它们持久保存为非事务性的。

只需查看想法的测试[http://code.google.com/p/datanucleus-appengine/source/browse/trunk/tests/com/google/appengine/datanucleus/jdo/JDOUnownedOneToManyTest.java](http://code.google.com/p/datanucleus-appengine/source/browse/trunk/tests/com/google/appengine/datanucleus/jdo/JDOUnownedOneToManyTest.java)

我无法控制他们的文档中的内容，只是他们的代码中的内容；-)

# html - 将 index.html 设为默认值，但如果输入则允许访问 index.php

> ID：10002439
> 
> 赞同：59
> 
> 时间：2012-04-03T22:35:13.610
> 
> 标签：html, .htaccess

我的 .htaccess 文件中有以下行：

```
DirectoryIndex index.html index.php 
```

每次我去 index.php 时，它都会带我去 index.html。是否可以同时允许两者，但将 index.html 保留为访问 www.domain.com 的用户的默认值？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-04-10T03:23:24.697

默认情况下，DirectoryIndex 设置为：

```
DirectoryIndex index.html index.htm default.htm index.php index.php3 index.phtml index.php5 index.shtml mwindex.phtml 
```

Apache 将按顺序查找上述每个文件，并在访问者仅请求目录时提供它找到的第一个文件。如果网络服务器在当前目录中没有找到与 DirectoryIndex 指令中的名称匹配的文件，则将向浏览器显示目录列表，显示当前目录中的所有文件。

顺序应该是`DirectoryIndex index.html index.php`// 默认是 index.html

**参考：** [这里](http://support.modwest.com/content/1/147/en/how-can-i-show-a-default-page-other-than-indexhtml.html)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-06-17T19:57:08.383

如果您使用的是 WordPress，现在有一个过滤器挂钩可以解决此问题：

```
remove_filter('template_redirect', 'redirect_canonical'); 
```

（把这个放在你的主题中`functions.php`）

这告诉WordPress不要重定向`index.php`回根页面，而是坐在它所在的位置。这样，`index.html`可以指定为默认页面，`.htaccess`并且可以与`index.php`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-02-25T09:35:26.987

我同意@TheAlpha 接受的答案，Apache 从左到右读取 DirectoryIndex 目标文件，如果第一个文件存在，apche 提供它，如果它不存在，则下一个文件用作目录的索引。因此，如果您有以下指令：

```
DirectoryIndex file1.html file2.html 
```

Apache 将 /file.html 用作索引，如果要将 /file2.html 设置为索引，则需要更改文件的顺序

```
DirectoryIndex file2.html file1.html 
```

您还可以使用 RewriteRule 设置索引文件

```
RewriteEngine on

RewriteRule ^$ /index.html [L] 
```

上面的 RewriteRule 会将您的主页重写为 /index.html 重写发生在内部，因此[http://example.com/](http://example.com/)会向您显示 index.html 的内容。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-01T12:56:42.747

> DirectoryIndex index.html index.htm default.htm index.php index.php3 index.phtml index.php5 index.shtml mwindex.phtml

**它没有任何手段吗？** 你可能只需要像这样添加！

```
<IfModule dir_module>
    DirectoryIndex index.php index.html index.htm
</IfModule> 
```

[![在此处输入图像描述](../Images/f173498df4b3f7ada8647174df3a41a8.png)](https://i.stack.imgur.com/NnQAs.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-13T23:17:13.677

**你好，**

嗯，上面提到的方法我都试过了！它的工作是肯定的，但不完全是我想要的方式。我想通过我们的进一步操作**将默认页面扩展重定向**到主域。

**这是我如何做到的......**

```
# Accesible Index Page
<IfModule dir_module>
 DirectoryIndex index.php index.html
 RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.(html|htm|php|php3|php5|shtml|phtml) [NC]
 RewriteRule ^index\.html|htm|php|php3|php5|shtml|phtml$ / [R=301,L]
</IfModule> 
```

上面的代码简单地捕获任何 index.* 并将其重定向到主域。

谢谢

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-10T11:51:16.157

```
RewriteEngine on
RewriteRule ^(.*)\.html$ $1.php%{QUERY_STRING} [L] 
```

将这两行放在 .htaccess 文件的顶部。它将在您的 .php 页面的 URL 中显示 .html。

```
RewriteEngine on
RewriteRule ^(.*)\.php$ $1.html%{QUERY_STRING} [L] 
```

使用它在您的 .html 页面的 URL 中显示 .php。

# vba - 确定给定页面中没有字符出现

> ID：10002443
> 
> 赞同：0
> 
> 时间：2012-04-03T22:35:38.227
> 
> 标签：vba, ms-word

我面临在 Word 文档中断断续续地散落空白页的前景，我想将其丢弃。但我需要先在 VBA 中识别它们。如果我单击工作表，每个插入符号所在的位置都有点。

但我不知道如何从那里进步。如何通过VBA指示Word识别工作表是否有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:30:03.427

这些线路上的某些东西可能适合。

```
ActiveDocument.Repaginate
j = ActiveDocument.BuiltInDocumentProperties(wdPropertyPages)

For i = j To 1 Step -1
    NotEmpty = True
    Selection.GoTo What:=wdGoToPage, Which:=wdGoToNext, Name:=CStr(i)
    Selection.GoTo What:=wdGoToBookmark, Name:="\page"
    If Selection.Characters.Count < 3 Then
        NotEmpty = False
        For Each c In Selection.Characters
            If Asc(c) > 13 Then
                ''Possibly not empty
                NotEmpty = True
            End If
        Next
    End If
    If NotEmpty = False Then
        Selection.Delete
    End If
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-02T03:07:17.707

现在是 2020 年。从上面略微修改的版本。就我而言，我需要检查 `sel.Characters.Count <= 3`. 谢谢！

```
Public Function DeleteBlankPages()
Dim i, j, notEmpty, c
Dim sel As Selection

myWordDoc.Activate

ActiveDocument.Repaginate

Set sel = ActiveDocument.ActiveWindow.Selection

j = ActiveDocument.BuiltinDocumentProperties(wdPropertyPages)

For i = j To 1 Step -1
    notEmpty = True
    sel.GoTo What:=wdGoToPage, Which:=wdGoToNext, Name:=CStr(i)
    sel.GoTo What:=wdGoToBookmark, Name:="\page"

    'Debug.Print "Page", i, " count", sel.Characters.Count

    If sel.Characters.Count <= 3 Then
        notEmpty = False
        For Each c In sel.Characters
            If Asc(c) > 13 Then
                ''Possibly not empty
                notEmpty = True
            End If
        Next
    End If

    If notEmpty = False Then
        sel.Delete
    End If
Next 
```

结束功能

# jquery - 刷新/重新加载内容后，div滚动到顶部

> ID：10002444
> 
> 赞同：0
> 
> 时间：2012-04-03T22:35:39.023
> 
> 标签：jquery, html, scroll, refresh

每 5 秒刷新一次 Div。div 的滚动设置为滚动，以便用户可以滚动，但是当刷新发生时，div 滚动会回到顶部。有什么想法可以在 div 刷新后保持滚动位置？

这是我的CSS：

```
#alerts_container {
    height: 150px;
    width: 250px;
    overflow: scroll;
    overflow-x: hidden;
    border-right-width: 1px;
    border-right-style: solid;
    border-right-color: #666;
} 
```

JS：

```
refresh_alerts = setInterval(function (){
    $('#leftside div#alerts_container').load('staffhome.php #alerts_container' );
}, 5000) 
```

HTML：

```
 <div id='alerts_container'>
  <?php 
   include_once('includes/my_alerts.php'); 
  ?> 
 </div> 
```

使用 SKS 的答案让这对我有用，但我确实不得不稍微更改他的代码：

```
var isScrolling = false;
var lastScrollPos = 0;
var counter = 0;
$(function() {
    $('#alerts_container').bind("scroll", function (){
       isScrolling = true;
    });
    refresh_alerts = setInterval(refreshContent, 5000);
    function refreshContent() {
        lastScrollPos = $('#alerts_container').scrollTop();
        if (!isScrolling) {
            $('#alerts_wrapper').load('staffhome.php #alerts_container', function () {
             $('#alerts_container').scrollTop(lastScrollPos);
            });
        }
      isScrolling = false;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:50:01.863

您应该在滚动处理程序中使用滚动高度`.scrollTop`，然后在之后设置它`.load`

[**演示**](http://jsfiddle.net/skram/hRreU/8/)- 尝试一直向下滚动并等待 5 秒以更新新内容。

以下是演示的摘要，

```
var lastScrollPos = 0;
$('#scrollingDiv').on('scroll', function() {
    lastScrollPos = this.scrollTop;
}); 
```

并在`.load`回调中

```
$('#leftside div#alerts_container').load('staffhome.php #alerts_container' , function () {
   $(this).scrollTop(lastScrollPos);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:50:13.643

我认为，如果您不替换内容而仅将新信息附加到可以简单工作的容器中。

[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

[http://api.jquery.com/append/](http://api.jquery.com/append/)

# c - C libcurl 打印网页内容

> ID：10002446
> 
> 赞同：-1
> 
> 时间：2012-04-03T22:35:44.420
> 
> 标签：c, curl, libcurl

当谈到 C 时，我完全是菜鸟，但我在这里找到了这个 curl 示例[http://curl.haxx.se/libcurl/c/getinmemory.html](http://curl.haxx.se/libcurl/c/getinmemory.html)

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>

    #include <curl/curl.h>

    struct MemoryStruct {
      char *memory;
      size_t size;
    };

    static size_t
    WriteMemoryCallback(void *contents, size_t size, size_t nmemb, void *userp)
    {
      size_t realsize = size * nmemb;
      struct MemoryStruct *mem = (struct MemoryStruct *)userp;

      mem->memory = realloc(mem->memory, mem->size + realsize + 1);
      if (mem->memory == NULL) {
        /* out of memory! */ 
        printf("not enough memory (realloc returned NULL)\n");
        exit(EXIT_FAILURE);
      }

      memcpy(&(mem->memory[mem->size]), contents, realsize);
      mem->size += realsize;
      mem->memory[mem->size] = 0;

      return realsize;
    }

    int main(void)
    {
      CURL *curl_handle;

      struct MemoryStruct chunk;

      chunk.memory = malloc(1);  /* will be grown as needed by the realloc above */ 
      chunk.size = 0;    /* no data at this point */ 

      curl_global_init(CURL_GLOBAL_ALL);

      /* init the curl session */ 
      curl_handle = curl_easy_init();

      /* specify URL to get */ 
      curl_easy_setopt(curl_handle, CURLOPT_URL, "http://www.example.com/");

      /* send all data to this function  */ 
      curl_easy_setopt(curl_handle, CURLOPT_WRITEFUNCTION, WriteMemoryCallback);

      /* we pass our 'chunk' struct to the callback function */ 
      curl_easy_setopt(curl_handle, CURLOPT_WRITEDATA, (void *)&chunk);

      /* some servers don't like requests that are made without a user-agent
         field, so we provide one */ 
      curl_easy_setopt(curl_handle, CURLOPT_USERAGENT, "libcurl-agent/1.0");

      /* get it! */ 
      curl_easy_perform(curl_handle);

      /* cleanup curl stuff */ 
      curl_easy_cleanup(curl_handle);

      /*
       * Now, our chunk.memory points to a memory block that is chunk.size
       * bytes big and contains the remote file.
       *
       * Do something nice with it!
       *
       * You should be aware of the fact that at this point we might have an
       * allocated data block, and nothing has yet deallocated that data. So when
       * you're done with it, you should free() it as a nice application.
       */ 

      printf("%lu bytes retrieved\n", (long)chunk.size);

      if(chunk.memory)
        free(chunk.memory);

      /* we're done with libcurl, so clean it up */ 
      curl_global_cleanup();

      return 0;
    } 
```

它对我来说很完美，但是是否可以稍微调整一下这个东西，让它打印内容而不是网页内容的大小？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:42:25.540

你有没有尝试过：

```
printf("%lu bytes retrieved\n", (long)chunk.size);

printf("%s", chunk.memory); 
```

你可能会感到惊讶。

# javascript - event.preventDefault() 在 Android 上的按键事件中不起作用

> ID：10002450
> 
> 赞同：2
> 
> 时间：2012-04-03T22:36:03.247
> 
> 标签：javascript, jquery, android

大多数 Web 开发人员都知道，要将数字限制为表单输入，您可以执行以下操作：

```
$(function() {
    $("#foobar").keypress(function(e) {
    if($.inArray(e.which, range(48, 57)) == -1) {
        e.preventDefault();
        return false;
    }
    });
});

function range(start, end) {
    var range = [];

    for(var i = start; i <= end; i++) {
        range.push(i);
    }

    return range;
} 
```

不幸的是，这并不能在使用默认浏览器的 Android 上完成工作。（~~iPhone 和~~其他 Android 浏览器尚未经过测试，因此它们可能会遇到同样的问题。在没有此问题的 iPhone 4S 上进行了测试。）

在 Android 上，假设您首先输入“f”。没发生什么事。惊人的。等一下。然后键入“a”。发生什么了？“f”被放入输入字段！您键入“c”，“a”被放入该字段。等等。无论先前输入的字符是什么，这就是输入该字段的内容。

[**这是一个演示该问题的 jsFiddle。**](http://jsfiddle.net/HW794/)

小提琴在桌面上工作正常，但在 Android（手机或模拟器）上试试。我已经使用 Android 2.3.6 和 2.2 进行了测试。

有人遇到过这个吗？任何方向将不胜感激！目前，解决方法是立即删除非数字字符（在`keyup`事件中）。

**更新：** 这是一个显示正在达到[**的小提琴。**](http://jsfiddle.net/49v2W/8/)`preventDefault()`问题似乎是，而不是阻止，它只是延迟（直到下一个事件）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T00:10:38.193

一种完全不同的方法是使用`<input type="number">`并依赖浏览器来提供适当的界面/过滤（移动浏览器容易出现这种情况）。老实说，它不会修复代码，但应该绕过看起来像错误的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T23:05:50.810

一个疯狂的猜测：也许机器人会在`keydown`舞台上注册输入。你可以尝试这两个事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T23:34:51.163

好的，我玩了一点，这在我的安卓上运行良好：

```
var reserved = [0,8]

$(function()
{
    $("#foobar").keypress(function(e)
    {
        if($.inArray(e.which, reserved) < 0 && ((e.which < 48) || (e.which > 57)))
        {
            e.preventDefault();
            return false;
        }
    });
}); 
```

[http://jsfiddle.net/HW794/1/embedded/result/](http://jsfiddle.net/HW794/1/embedded/result/)

可能机器人不喜欢对 fn 的调用？（范围）

# actionscript-3 - 泡泡龙游戏Actionscript：通过静态类型类的引用定义ToString()方法

> ID：10002451
> 
> 赞同：0
> 
> 时间：2012-04-03T22:36:22.113
> 
> 标签：actionscript-3, flash, math, random

您好，我这里有一个泡泡爆破游戏的动作脚本代码。游戏开始时，气泡从游戏顶部落到底部，并在 30 秒内点击或弹出气泡最多的分数保留。

气泡的大小由代码中的 initialize 方法定义，并使用 ToString() 来计算分数。ToString 给了我一个 1061: Call to a possible undefined method Random through a reference with static type uint。这个错误我无法弄清楚它来自哪里。

如果任何有 AS3 经验的人能给我一些错误的指点，我将不胜感激。谢谢你。

```
package  {
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.media.Sound;

    public class Ball extends MovieClip{

        static public var burstCounter: uint;
        private var vx: Number;
        private var vy: Number;
        private var gravity: Number;
        private var stageWidth;
        private var stageHeight;
        private var bubble:Ball = new Ball();
        private var score: uint=0;

        public function Ball() {
            bubble.addEventListener(Event.ADDED_TO_STAGE, initialize)
            bubble.addEventListener(MouseEvent.CLICK, burst)
            bubble.addEventListener(Event.ENTER_FRAME, dropping)
        }

        public function initialize (e:Event):void
        {
            bubble.x = Math.random() * stageWidth;
            bubble.y = 0;

            stageWidth = stage.stageWidth;
            stageHeight = stage.stageHeight;

            bubble.vx = Math.random() * 2 - 1;
            bubble.vy = Math.random() * 2 + 1;
            gravity = 0.1;

            var sizeScale = Math.random() * 1.2 + .6;
            bubble.scaleX = bubble.scaleY = sizeScale;
            score = (10 / sizeScale);
            scoreValue.text = score.ToString();

            var colorTran = new ColorTransform();
            colorTran.color = Math.random() * 0xFFFFFF;
            transform.colorTransform = colorTran;
            addChild(bubble);
        }
        function dropping(e: Event) :void
        {
            x += vx;
            y += vy;
            vy += gravity;

            if((x<0) || (x>stageWidth) || (y<0) || (y>stageHeight))
            {
                if(parent != null)
                {
                    parent.removeChild(this);
                }
                removeEventListener(Event.ENTER_FRAME, dropping)
            }
        }
        function burst (e:Event):void
        {
            var ballonPopping: Sound = new BalloonPopping();
            bubble.removeEventListener(Event.ADDED_TO_STAGE, initialize);
            bubble.removeEventListener(Event.ENTER_FRAME, dropping);
            removeChild(bubble);

            ballonPopping.play();

            burstCounter += score;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:42:09.790

换一个试试`Math.random()`...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:42:18.693

您需要更改每次出现的

```
Math.Random() 
```

至

```
Math.random() 
```

注意小写的 r

或者...因为您似乎刚刚为 ToString() 编辑了这个问题

尝试

```
toString() 
```

注意错误的相似程度。你要调用一个在这两个上都不存在的方法。大小写很重要 VAR 与 var 不同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T22:56:17.827

`uint`也没有 ToString() 方法，但它有一个 toString()。

大小写在方法名称中很重要。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T23:11:07.460

> 请注意，在命名和调用属性或方法时，大小写*确实很重要。*

ActionScript`pascalCasing`用于其成员，包括成员`static`。常量使用`ALL_CAPS`.

我想不出 ActionScript 中的任何类成员都`CamelCasing`像您一直在做的那样使用 - 据我所知，没有。

# ruby - ruby 中的变量和表达式

> ID：10002453
> 
> 赞同：1
> 
> 时间：2012-04-03T22:36:30.310
> 
> 标签：ruby

我正在尝试创建一个 ruby​​ 程序，其中输入三个数字并取它们的总和，但如果任何数字相同，它们不计入总和。例如 (4,5,4) = 5 我的问题在于我的表达方式。如果我输入相同的数字，我会得到各种组合的多个输出。例如输入 5,5,5 = 15,5,0

```
if a != b or c then
  puts a+b+c
elsif b != a or c then
  puts a+b+c
elsif c != a or b then 
  puts a+b+c
end

if a == b then
  puts c
elsif a == c then
  puts b
elsif b == c then
  puts a
end

if a == b and c then
  puts 0
elsif b == a and c then
  puts 0
elsif c == a and b then
  puts 0
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:58:35.283

用两个漂亮的不言自明的单线解决它

```
array = [a,b,c]

array = array.keep_if {|item| array.count(item) == 1 }
array.inject(0){|sum,item| sum + item} 
```

- 第一行使用您的参数创建一个数组。
- 第二行只保留计数等于 1 的项目（删除出现多次的项目），并将其存储在数组中。
-第三行总结了所有剩余的元素。

瞧，红宝石的方式:)

# java - 使用 keytool 将属性添加到 .jks

> ID：10002458
> 
> 赞同：1
> 
> 时间：2012-04-03T22:37:13.333
> 
> 标签：java, certificate, keytool, jks

我正在使用 keytool 生成一个 .jks，一切正常。

我正在使用这个命令：

```
keytool -import -keystore KEYSTORE.jks -storepass "secret" -file MYCERT.crt 
```

问题是我不知道如何**将“主题唯一标识符”添加**到我正在生成的证书中。

据此：[http](http://en.wikipedia.org/wiki/X.509) ://en.wikipedia.org/wiki/X.509 （在**证书**部分的结构中）该属性是可选的，但我需要它来处理这种情况。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:56:00.493

在 X509 证书中，除签名外，所有内容均已签名。这意味着在证书生成期间必须包含主题唯一标识符，然后再由颁发者签名。

请注意，唯一标识符是不推荐使用的元素（x509 v2）；在 X509 v3 证书中，主题密钥标识符和授权密钥标识符扩展用于类似目的。

当前 RFC 定义 X509 证书配置文件 ( [RFC 5280](https://www.rfc-editor.org/rfc/rfc5280) ) 指定：

> 符合此配置文件的 CA 不得生成具有唯一标识符的证书。符合此配置文件的应用程序应该能够解析包含唯一标识符的证书，但没有与唯一标识符相关的处理要求。

# jquery - 创建一个通过 jquery 插件动画的模态

> ID：10002464
> 
> 赞同：0
> 
> 时间：2012-04-03T22:38:21.710
> 
> 标签：jquery, plugins, jquery-animate, modal-dialog

我想创建一个可自定义的 jQuery 模态，通过单击主 html 页面触发进出动画（css 颜色更改 + 淡入和淡出）。我知道如何将选项变量传递给 jquery 插件，但我不确定如何在插件中设置动画。例如：使用内联 jquery 你可以说：

`<script> $("#modal").animate({color: 'red', width: 300}).fadeIn('fast'); </script>`

我如何能够在插件中进行这些相同的更改？这是一段代码（试图使用 Jeff Ways 的 jQuery 插件教程：

```
var mybigmodal= {
        init: function( options, elem) {
            var self = this;

            self.elem = elem;
            self.$elem = $( elem );

           if ( typeof options === 'string') {
                var w = 400;
                var h = 600;
           } else {
                //object was passed
                self.options = $.extend( {}, $.fn.mymodal.options, options)

          }

          self.mshow();
        },

        mshow: function() { //show the modal via animation?

          $('#lightbox-pane').fadeIn(50).animate({
              width: 50}, 150).animate({
                  width: 100},200);
          }
        }; 
    }); 
```

我不需要有人为我编写代码，我只是想知道我做错了什么，以便使这些相同的动画发生在内联时非常简单..

*我真的很想让用户能够使用自定义宽度或颜色等选项。*

（我知道这可能是一个新手基本问题，但任何帮助将不胜感激！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T22:58:17.517

你可以在你的插件代码中尝试这样的事情：

首先将您的插件选项扩展为

```
var options = $.extend({
            height : "250",
            width : "500",
            color: "red",
            title:"Modal Box Demo",
            description: "Example of how to create a modal box.",
            top: "20%",
            left: "35%",

        },prop);

       $('#modal').animate({top:'toggle'},80); 
```

# javascript - 将按钮 onclick 事件绑定到主干视图

> ID：10002466
> 
> 赞同：0
> 
> 时间：2012-04-03T22:38:43.733
> 
> 标签：javascript, backbone.js

我在 Backbone 中有一个正在处理的示例单页应用程序。这个想法是我有一个按钮可以触发视图的刷新。我试图让事件处理程序记住“this”作为主干视图，而不是调用它的元素。不管我读了多少文档，我似乎都无法克服这个心理障碍。

在我看来，我有

```
initialize: function() {'
  //i am trying to say, call render on this view when the button is clicked. I have tried all of these calls below.
  //this.$("#add-tweet-button").click(this.render); 
  //this.$("#add-button").bind("click", this.render);

} 
```

当调用渲染函数时，“this”元素就是按钮。我知道我缺少什么很容易，有人可以帮我解决吗？另外，这听起来像编码约定吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T23:06:23.807

如果您使用 View 的“ [delegateEvents](http://documentcloud.github.com/backbone/#View-delegateEvents) ”功能，则会为您处理范围界定：

```
var yourView = Backbone.View.extend({

  events: {
    "click #add-tweet-button" : "render"
  },

  render: function() {
    // your render function
    return this;
  }
}); 
```

这仅适用于 View 的 El“下方”的元素。但是，您的示例显示了 this.$(...)，所以我假设是这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T06:55:07.423

@Edward M Smith 是对的，尽管如果您需要处理 View 范围之外的元素的 jquery 事件，您可以这样写：

```
var yourView = Backbone.View.extend({

    initialize: function() {
        var self = this;
        $("button").click(function () {
              self.render.apply(self, arguments);
        });

    },

    render: function(event) {
        // this is your View here...
    }       

}); 
```

# ocaml - 如何在 OCaml 中保存和更改变量的值？

> ID：10002471
> 
> 赞同：9
> 
> 时间：2012-04-03T22:39:06.343
> 
> 标签：ocaml, variable-assignment, mutation

这可能是一个非常新手的问题，但我没有找到答案。我需要存储，例如一个列表，然后在同一个指针下用另一个替换它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-03T23:07:48.143

它可以通过[*参考*](http://caml.inria.fr/pub/docs/manual-ocaml/manual003.html#toc8)来完成：

```
let fact n =
  let result = ref 1 in (* initialize an int ref *)
  for i = 2 to n do
    result := i * !result (* reassign an int ref *)
   done;
  !result 
```

您不会经常看到引用，因为您可以在递归或高阶函数中使用不可变值来做同样的事情：

```
let fact n =
   let rec loop i acc =
      if i > n then acc
      else loop (i+1) (i*acc) in
   loop 2 1 
```

无副作用的解决方案是首选，因为它们更容易推理并且更容易确保正确性。

# php - 包含本地主机的绝对路径

> ID：10002473
> 
> 赞同：2
> 
> 时间：2012-04-03T22:39:22.450
> 
> 标签：php, include, localhost

全部。

我的问题是关于我在尝试为我的 DOCTYPE 部分添加通用 php 模板时遇到的问题。我的 DOCTYPE 包含（恰当地命名为 doctype.php）位于 /template 目录中，还包括指向我希望所有页面都可以访问的 CSS 和 JS 文件的调用。

因此，当我尝试写入这些文件（CSS 和 JS 文件）的绝对路径时会遇到问题。目前，我正在尝试：

```
<script type="text/javascript" src="<?php echo $_SERVER['DOCUMENT_ROOT'] . '/file/extension/to/javascript/file.js'; ?>"></script> 
```

和

```
<link rel="stylesheet" type="text/css" href="<?php echo $_SERVER['DOCUMENT_ROOT'] . 'file/extension/to/css/file.css'; ?>" 
```

我正在我的本地主机上通过 WAMP 运行应用程序。看一下源代码，似乎链接指向适当的文件（c:/wamp/www/examplesite/path/to/file/file.ext），一切都应该很好。但它不是...

JavaScript 不可访问且样式表无法正常工作。我不知道该怎么办。

我也尝试过： - 在不使用 PHP 的情况下编写绝对路径 - 创建 PHP 变量来保存文档根目录，然后连接适当的目录路径来访问文件。

有什么建议么？当我将目录结构上传到我的在线服务器而不是我当前的本地主机时，这将如何变化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T23:11:13.840

您可能想尝试 $_SERVER['HTTP_REFERER'] 。它为您提供了您正在寻找的路径。

在我使用 WAMP 的本地机器上，我曾经`<?php print_r($_SERVER); ?>`查看它给出的值。

此外，片段中可能存在一些拼写错误。例如，在您给出的第一个示例中，您不需要前导 /。

例如：

```
<script type="text/javascript" src="<?php echo $_SERVER['HTTP_REFERER'] . 'file/extension/to/javascript/file.js'; ?>"></script>
<link rel="stylesheet" type="text/css" href="<?php echo $_SERVER['HTTP_REFERER'] . 'file/extension/to/css/file.css'; ?>"></link> 
```

或者由于在某些情况下无法信任 HTTP_REFERER，您可能需要创建一个函数来构建绝对路径的基本部分。

```
<?php
function getAddress() {
    $protocol = (isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] == 'on') ? 'https' : 'http';
    $filenamepattern = '/'.basename(__FILE__).'/';
    return $protocol.'://'.$_SERVER['HTTP_HOST'].preg_replace($filenamepattern,"",$_SERVER['REQUEST_URI']);
 } 
?> 
```

然后像这样调用它：

```
<script type="text/javascript" src="<?php echo getAddress() . 'file/extension/to/javascript/file.js'; ?>"></script>
<link rel="stylesheet" type="text/css" href="<?php echo getAddress() . 'file/extension/to/css/file.css'; ?>"></link> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T23:11:33.680

当您应该使用 URL（例如：[http://localhost/some/path/to/ ）时，您使用文件路径（例如：C:\some\path\to\file）指向本地计算机上的文件文件](http://localhost/some/path/to/file)）。HTML 由客户端的浏览器解析，因此当它尝试访问不是 URL 的路径时，它不能。

而不是使用 $_SERVER['DOCUMENT_ROOT'] 您可以使用绝对 URL，例如

```
<script type="text/javascript" src="/path/to/my/file.js"></script> 
```

其中“/path”文件夹是您的基本 Web 目录，或者您可以根据包含 doctype.php 文件的文件所在的当前目录使用相对 URL。我建议不要做后者，因为跟踪它是一件很痛苦的事情。

如果您使用相对 URL，则在将代码移动到新主机时应该没有问题，只要目录结构保持不变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T23:10:06.287

当然，任何类型的资源（JS、CSS、图像等）都必须通过 http(s) 请求访问，因此不可能通过绝对路径直接访问它们。想想这种方法的安全隐患。因此，您始终必须使用相对于您的 Web 根目录的 Web 路径。

例如：

```
<script type="text/javascript" src="http://localhost/myproject/media/ja/file.js"></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T23:13:39.003

您在页面中包含文件的方式错误，您应该改用 HTTP URL：

```
<script type="text/javascript" src="/file/extension/to/javascript/file.js"></script> 
```

或者，如果您更喜欢使用带有主机名的变量：

```
<script type="text/javascript" src="http://<?php echo $_SERVER['HTTP_HOST']; ?>/file/extension/to/javascript/file.js"></script> 
```

# json - 将 JSON 传递给 Web2py 中的视图的问题

> ID：10002474
> 
> 赞同：0
> 
> 时间：2012-04-03T22:39:29.163
> 
> 标签：json, web2py

编写了一个非常简单的函数来从 espn api 中提取数据并显示在默认/索引中。然而，默认/索引是一个空白页。

在这一点上，我什至没有尝试解析 JSON - 我只是想在我的浏览器上看到一些东西。

默认.py：

```
import urllib2
import json

#espn_uri being pulled from models/db.py

def index():
    r = urllib2.Request(espn_uri) 
    opener = urllib2.build_opener()    
    f = opener.open(r)
    status = json.load(f)

    return dict(status) 
```

默认/index.html：

```
{{status}} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T01:41:12.977

尝试：返回字典（状态=状态）

return dict(status) 有效，因为 status 它本身就是一个 dict，而 dict(status) 只是复制它。但它可能没有名为 status 的键，或者至少没有什么有趣的。

是的，你需要=。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-09T01:56:15.480

正如 JLundell 建议的那样，首先通过字典返回配对数据：

```
return dict(my_status=status) 
```

其次，正如您已经制定的那样，使用以下内容来访问返回的，而不是 index.html 中的局部变量。确保在此处使用等号，否则不会显示任何内容

```
{{=my_status}} 
```

对于 JSON，您可以使用返回数据

```
return my_status.json() 
```

其他几个选项可用于将数据作为列表返回，或返回 HTML。

最后，我建议您使用 jQuery 和 AJAX ($.ajax)，以便将 AJAX 返回值轻松分配给 JS 对象。这也将允许您以 JS 函数的形式处理成功或错误。

# iphone - iOS - AppDelegate 中的访问导航控制器

> ID：10002477
> 
> 赞同：1
> 
> 时间：2012-04-03T22:39:40.860
> 
> 标签：iphone, ios, uinavigationcontroller, uitabbarcontroller

我已经使用 Storyboards 构建了我的应用程序。我有一个 UITabBarController 和一个 NavigationController 嵌入它。我正在尝试使用色调自定义我的应用程序，并且我已经成功地为 Tabbar 设置了自定义颜色。我能够从 rootViewController 访问标签栏，但是我无法访问导航栏。无论如何我可以轻松访问它吗？我的 AppDelegate 代码示例如下。

谢谢

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:  (NSDictionary *)launchOptions
{
    self.tabBarController = (UITabBarController*)self.window.rootViewController;
    UITabBar *tabBar = self.tabBarController.tabBar;
    [tabBar setSelectedImageTintColor:[UIColor greenColor]];
    tabBar.tintColor = [UIColor colorWithRed:0.4 green:0.522 blue:0.129 alpha:1];

    //This bit doesnt work
    UINavigationController *navCon = self.tabBarController.navigationController;
    navCon.navigationBar.tintColor = [UIColor colorWithRed:0.384 green:0.259 blue:0.161     alpha:1];

    return YES;    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:57:18.590

如果您正在使用导航控制器，则希望它们嵌入由选项卡栏控制器管理的视图控制器。

尝试`NSLog(@"%@", [self.tabBarController viewControllers]);`查看它是否列出了导航控制器或您的自定义控制器。例如，我创建了两个由我的标签栏触发的视图控制器，一个有导航，一个没有导航，上面的行显示：

```
 (
     "<UINavigationController: 0x6a35f20>",
     "<SecondViewController: 0x6a39500>" ) 
```

所以，我可以得到我的`[[self.tabBarController viewControllers] objectAtIndex:0]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T23:06:24.170

假设您没有使用 IBOutlet，我建议您可以将它们与 XIB 文件一起使用。例如，在头文件中：

```
IBOutlet UINavigationBar *aNavBar; 
```

然后在 .m 中，切换：

```
UINavigationController *navCon = self.tabBarController.navigationController;
navCon.navigationBar.tintColor = [UIColor colorWithRed:0.384 green:0.259 blue:0.161     alpha:1]; 
```

和：

```
[aNavBar setTintColor:[UIColor colorWithRed:0.384 green:0.259 blue:0.161     alpha:1]]; 
```

你去吧！我做的很快，所以告诉我它是否有效。
-***贾斯汀 A。***

# jquery - 使用幻灯片动画的 jQuery UI 显示在动画开始之前跳转到全高

> ID：10002479
> 
> 赞同：0
> 
> 时间：2012-04-03T22:39:52.957
> 
> 标签：jquery, jquery-ui, jquery-effects, jquery-slide-effects

我正在尝试创建一个简单的消息，该消息滑入并在滑入时“优雅地”将其下方的内容向下滑动。我遇到的问题是消息下方的内容没有优雅地滑动，而是“跳跃”在动画开始之前到消息的完整高度。当消息被隐藏时也是如此 - 消息向上滑动，但高度保持不变，直到动画完成，然后内容弹回原位。

超级简化的 JSFiddle：http: [//jsfiddle.net/U94qD/2/](http://jsfiddle.net/U94qD/2/)

代码（以防 JSFiddle 宕机）：

HTML：

```
<div class="slide" style="display:none;">Sliding Something into place</div>
<div>This is always shown, but jumps down when the slide animation starts instead of sliding down with the element as it's displayed and it stays in place as the div above hides instead of sliding smoothly with it.</div> 
```

JS：

```
setTimeout(function() {
    show();
}, 500);

function show() {
    $(".slide").show('slide', {
        direction: 'up'
    }, 1000, function() {
        hide();
    });
}

function hide() {
    setTimeout(function() {
        $(".slide").hide('slide', {
            direction: 'up'
        }, 1000);
    });
} 
```

**注意：**我尝试使用“slideDown”和“slideUp”方法，但动画的功能不同。不是向下滑动内容，而是调整 div 的高度以显示内容，这就是我所说的“盲”动画，而不是“幻灯片”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:35:11.187

除了在后台修改 jQuery UI 之外，我能看到的唯一解决方案是使用额外的容器“手动”构建动画。我在这里创建了一个[示例](http://jsfiddle.net/U94qD/6/)（[http://jsfiddle.net/U94qD/6/](http://jsfiddle.net/U94qD/6/)），其中右侧的第三组动画显示了我在第一个示例中的预期效果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T09:20:27.807

试试这个 HTML：

```
<div><div class="slide">Sliding Something into place</div></div>
<div>This is always shown, but jumps down when the slide animation starts instead of sliding down with the element as it's displayed and it stays in place as the div above hides instead of sliding smoothly with it.</div> 
```

而这个jQuery：

```
setTimeout(
function() {
show();}, 
500);
var current_height = $(".slide").height();
$(".slide").parent().css("height",current_height);
 $(".slide").hide();
function show() {
$(".slide").show('slide', {
    direction: 'up'
}, 1000, function() {
    hide();
});
}
function hide() {
setTimeout(function() {
    $(".slide").hide('slide', {
        direction: 'up'
    }, 1000);
});
} 
```

# git - 从克隆到原始推送

> ID：10002482
> 
> 赞同：0
> 
> 时间：2012-04-03T22:40:25.370
> 
> 标签：git, gitorious

我的团队已经从 github 切换到 gitorious，我在学习曲线上苦苦挣扎。我克隆了核心存储库并创建了自己的沙箱。然后，我将核心设置为上游，并在我的沙箱中进行了所有更改。我把所有东西都拉了出来，让它没有冲突，但我不知道现在如何将我的更改推回原来的核心。我尝试使用gitorious 内置的合并请求功能。当我使用该 GUI 创建合并请求时，我应该选择提交范围的底部是空白的，因此当我尝试提交时它会引发错误。

有人可以为我解释一个工作流程，我如何将沙箱中的更改推回核心？我试着用类似的东西推动它：

`git push git@git.site.com:site-core/core.git`

看起来一切正常，没有错误，但我没有看到它出现在 gitorious 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:15:39.617

在 Gitorious 合并请求 Web UI 中，您必须同时选择源 repo+源分支和目标 repo+目标分支。对于要在提交范围中显示的任何内容（在您的情况下为空白），源中必须有尚未在目标中的提交。

# mysql - mysql 的距离矩阵，基于以前的半正弦距离计算解决方案

> ID：10002489
> 
> 赞同：0
> 
> 时间：2012-04-03T22:41:07.437
> 
> 标签：mysql, matrix, distance, self-join

这个问题是自我回答的，以帮助需要在 MySQL 中创建距离矩阵的人，它支持诸如“从距离中选择 id2，其中 id1=10 和 type1=0 和 type2=1 和距离<10”这样的查询，可以找到对象类型 1 在类型 0 的对象 10 的 10 附近。

*代码假定表结构类似于[Mysql Haversine distance 计算中描述的表结构](https://stackoverflow.com/questions/574691/mysql-great-circle-distance-haversine-formula/7284463#7284463)*

如果您发现自己需要 mysql 中的距离矩阵，这里是它的视图定义：

```
select o1.object_id AS id1,o1.object_type AS type1,o2.object_id AS id2,o2.object_type AS type2,geodistance_km_by_obj(o1.object_id,o1.object_type,o2.object_id,o2.object_type) AS distance from (Coordinates o1 join Coordinates o2) where ((o1.object_id,o1.object_type) <> (o2.object_id,o2.object_type)) 
```

其中`geodistance_km_by_obj`函数是一些距离计算函数，例如基于标题中链接的半正弦计算。

```
CREATE FUNCTION geodistance_km_by_obj(object_id1 INT, object_type1 TINYINT, object_id2 INT, object_type2 TINYINT)
RETURNS float
LANGUAGE SQL
DETERMINISTIC
READS SQL DATA
SQL SECURITY INVOKER
COMMENT 'returns distance in km'
BEGIN
declare sl1 float;
declare cc1 float;
declare cs1 float;
declare sl2 float;
declare cc2 float;
declare cs2 float;

select sin_lat,cos_cos,cos_sin into sl1, cc1, cs1 from Coordinates where object_id=object_id1 and object_type=object_type1;
select sin_lat,cos_cos,cos_sin into sl2, cc2, cs2 from Coordinates where object_id=object_id2 and object_type=object_type2;
return cast(round(acos(sl1*sl2 + cc1*cc2 + cs1*cs2)*6371,0) as decimal);
END 
```

# c# - 测量 .NET 对象的大小

> ID：10002490
> 
> 赞同：2
> 
> 时间：2012-04-03T22:41:13.713
> 
> 标签：c#, asp.net, caching, .net-4.0

我正在用 .NET 4.0 C# 编写应用程序。我将对象放在 .net httpruntime 缓存中，并希望在其上生成一些统计信息。我想知道对象放入缓存之前的大小以及缓存中的大小。我该如何衡量这个？放入缓存时是否序列化，如果是，使用什么类型的序列化？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T22:46:30.247

HTTP 运行时缓存根本不序列化数据，它只是将其放在哈希表中：

[ASP.net HttpRuntime.Cache 使用的默认序列化是什么](https://stackoverflow.com/questions/2162943/what-is-the-default-serialization-used-by-the-asp-net-httpruntime-cache)

有几种方法可以获取或估计内存中 .NET 对象的大小：

[如何获取内存中的对象大小？](https://stackoverflow.com/questions/605621/how-to-get-object-size-in-memory)

[https://stackoverflow.com/a/1128674/141172](https://stackoverflow.com/a/1128674/141172)

无法直接知道 .NET 对象消耗的字节数：

[http://blogs.msdn.com/b/cbrumme/archive/2003/04/15/51326.aspx](http://blogs.msdn.com/b/cbrumme/archive/2003/04/15/51326.aspx)

# artificial-intelligence - 人工智能 - 机器学习

> ID：10002491
> 
> 赞同：5
> 
> 时间：2012-04-03T22:41:20.193
> 
> 标签：artificial-intelligence, machine-learning

我刚刚读完人工智能现代方法第三版。由珀特诺维格。我用这本书主要是作为介绍，并了解更多关于人工智能的一般概念。我很快就会和我的一位教授一起参加一个机器学习研究小组，我想知道是否有人知道一些好书来了解更多关于机器学习的知识（尤其是神经网络，但不仅仅是它）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T23:33:40.773

[以下是我最近完成的一门课程](http://ibug.doc.ic.ac.uk/courses/machine-learning-course-395/)的阅读清单中的一些摘录：

### 核心教科书

[机器学习](http://www.cs.cmu.edu/%7Etom/mlbook.html)Tom Mitchell，McGraw-Hill Press，1997

### 神经网络

D. Chen 和 P. Burrell，“[基于案例的推理系统和人工神经网络：评论（pdf 文件）](/media/uploads/documents/courses/CBR+ANN-2001.pdf) ”，在*神经计算与应用*，第一卷。10，没有。3，第 264-276 页，2001 年（版权所有 2001 Springer）。

MF Valstar 和 M. Pantic，“[视频中面部动作和情绪的生物学与逻辑启发编码（pdf 文件）](/media/uploads/documents/ICME06-ValstarPantic-FINAL.pdf) ”，*Proc。IEEE国际会议。关于多媒体和博览会（ICME '06）*，加拿大多伦多，2006 年 7 月（版权所有 2006 IEEE 出版社）。

S. Petridis 和 M. Pantic，“[笑声和言语之间的视听歧视（pdf 文件）](/media/uploads/documents/ICASSP-2008-PetridisPantic-FINAL-CAMERA.pdf) ”，在*Proc。IEEE国际会议。声学、语音和信号处理 (ICASSP'08)*，第 5117-5120 页，美国拉斯维加斯，2008 年 4 月（版权所有 © 2008 IEEE Press）。

### 优秀书籍

RO Duda、PE Hart 和 DG Stork 的*[模式分类，John Wiley Press，2005。](http://eu.wiley.com/WileyCDA/WileyTitle/productCd-0471056693.html)*

[模式识别和机器学习](http://research.microsoft.com/en-us/um/people/cmbishop/prml/)，Christopher Bishop，Springer，2006

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-03T23:54:27.533

您可能想查看这些免费的在线课程：

*   [加州理工学院机器学习入门课程](http://work.caltech.edu/telecourse.html)（2012 年 4 月 3 日开始；持续 8 周）
*   [Coursera的机器学习简介](https://www.coursera.org/course/ml)（应该很快开始，但尚未公布日期；持续 10 周）
*   Coursera[机器学习简介（已完成；历时 10 周）](http://www.ml-class.org)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-03T23:22:41.917

[统计学习的要素](http://www-stat.stanford.edu/~tibs/ElemStatLearn/)

这本书（链接网页中有免费的 PDF）是对机器学习领域的优秀且几乎详尽的评论。我知道这听起来有点自以为是，但这很好。

顺便说一句，尽管 Norvig 和 Russell 的书非常好，但它几乎没有提供任何关于机器学习的内容。因此，如果您不确定自己的数学背景，PDF 将是一个艰难的阅读。

# jquery - jQuery Mobile 使用什么版本的 jQuery？

> ID：10002495
> 
> 赞同：1
> 
> 时间：2012-04-03T22:41:43.477
> 
> 标签：jquery, jquery-mobile

[文档](http://jquerymobile.com/demos/1.0.1/docs/about/getting-started.html)说要使用 1.6.4，但我们现在使用的是 1.7.2。

我可以在 jQuery Mobile 中使用最新版本的 jQuery 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:52:31.370

**你当然可以**，但如果你想得到完全跨平台的支持，那就不行了。它适用于大多数浏览器，但这不是一个好主意。

我从经验中知道，将 jQuery Core 1.7.1 与 jQuery Mobile 1.0 一起使用，您可以在 BlackBerry OS 中获得白屏（当然是 5，我认为也是 6）。

我确实成功地将 jQuery Core 1.7.1 与适用于 Android 和 iOS 的 jQuery Mobile 1.0 一起使用（我没有发现任何问题）。

我强烈建议坚持 jQuery Mobile 团队建议的组合。事实上，如果你想开始在 jQuery Mobile 中使用 jQuery Core 1.7+，我建议使用 jQuery 1.1.0 RC-1。它还不是最终版本，但它有一些非常好的更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:55:18.447

如果您使用的是 1.0.x，请使用 Jquery 1.6.4。您只能将 Jquery 1.7.2 用于 JQM 1.1RC1。

# mysql - 使用 2 个表的结果从第 3 个表中获取信息

> ID：10002496
> 
> 赞同：2
> 
> 时间：2012-04-03T22:41:44.443
> 
> 标签：mysql, sql

嗨，我有这样的表：

**Persons: person_id, name** 那么我有很多语言表，其中包含人们所说的语言，这些表本身只有 ID。例如：

**英文：person_id**

然后我还有一个表格，其中包含他们教的学校，例如分解为表格：

**哈佛：person_id**

为了让那些在哈佛教书并且会说英语的人，我使用以下查询：

```
SELECT * FROM english LEFT JOIN havard.person_id = english.person_id 
```

这将返回会说英语并在哈佛任教的人的 ID。如何使用该结果从 person 表中获取这些人的姓名？使用 php 很容易，但我想知道它是否也可以使用 mysql。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:49:48.247

这是一个我相信可以回答您的问题的查询：

```
SELECT person.name
FROM 
    english 
    JOIN harvard ON havard.person_id = english.person_id
    JOIN persons ON persons.person_id = harvard.person_id 
```

但是，我**强烈**建议您反对您当前的表结构。你不应该有很多语言表，也不能有很多学校表。这将完全无法维护......

相反，您应该有一个语言表和一个学校表。这样一来，将新语言或学校添加到您的表中就不需要更改架构或代码。

要处理多对多关系，您可以使用类似于以下的模式：

**语**

*   ID
*   姓名

**学校**

*   ID
*   姓名

**Language_Person**

*   语言_ID
*   Person_ID

**School_Person**

*   School_ID
*   Person_ID

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:53:12.537

SELECT person.name FROM (english INNER JOIN harvard ON havard.person_id = english.person_id) INNER JOIN people ON persons.person_id = harvard.person_id WHERE persons.person_id = "

# php - 安装 PHP-Payments 时遇到问题

> ID：10002499
> 
> 赞同：2
> 
> 时间：2012-04-03T22:41:58.923
> 
> 标签：php, codeigniter, failed-installation

我最近安装了 Sparks（CI 包管理器），现在我正在尝试安装一个名为：codeigniter-payments 的 spark，位于[http://getsparks.org/packages/codeigniter-payments/versions/HEAD/show](http://getsparks.org/packages/codeigniter-payments/versions/HEAD/show)

查看 spark 文件夹和网站上的一些阅读内容，似乎这个 spark 依赖于[http://payments.calvinfroedge.com/index.html上的 PHPPayments](http://payments.calvinfroedge.com/index.html)

当我尝试运行我的代码时，我遇到了以下错误消息： Parse error: syntax error, unexpected T_STATIC in /home/a3374546/public_html/codeigniter/sparks/codeigniter-payments/0.1.4/src/php-payments/lib/第 21 行的 payment_utility.php

此错误指向以下代码行：

```
//Ignore classes that should be ignored
foreach(static::$autoload_ignore as $ignore)
{
    if(strpos($class, $ignore) !== false) return;
} 
```

此外，我不得不更改一些文件引用，例如：

```
dirname(__DIR__) 
```

至

```
dirname(dirname(__FILE__)) 
```

我想问一下 PHPPayments 和扩展 codeigniter-payments 是否依赖 PHP 5.3.X 才能工作？在相关说明中，是否可以进行更改以使其与 5.2.X 一起使用。

根据 000webhost.com（我的主机），他们运行的版本是：PHP 版本 5.2.17

编辑：添加系统信息：

阿帕奇版本。2.2.19 (Unix)

PHP 版本 5.2.* -> 如上所述，php info 说明版本 5.2.17

MySQL版本。5.1

Codeigniter 版本：2.1.0

Codeigniter 付款：0.1.4

PHP 付款：67202cf *不确定这是否是版本 # 但这是 zip 文件末尾的 #

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:31:56.067

确实是版本不兼容。

# actionscript-3 - 使用远程数据在本地调试 swf

> ID：10002502
> 
> 赞同：0
> 
> 时间：2012-04-03T22:42:12.937
> 
> 标签：actionscript-3, cross-domain, flash-cs5

我正在尝试在 Flash Professional CS5.5 中调试 swf，方法是运行 debug-> Debug Movie -> In Flash Professional。当我这样做时，我会看到 Adob​​e Flash Player 安全窗口。它表示您正在尝试连接到服务器的 IP 地址（例如 203.22.35.101）。我已经打开了设置并在 Advanced->Trusted Location Settings... 下添加了该 IP，但这没有帮助。有谁知道如何启用它？顺便说一句：如果我运行 -> 控制 -> 测试影片 -> 在 Flash Professional 中它工作正常，但我无法调试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:18:03.853

嵌入式调试器不是很方便。尝试[节肢动物](http://arthropod.stopp.se/index2.php/?page_id=3)或其他调试器。这将解决您的调试问题。

# php - 使用 PHP 将文本从 MySQL 传递到 Javascript 函数时遇到问题

> ID：10002503
> 
> 赞同：1
> 
> 时间：2012-04-03T22:42:14.603
> 
> 标签：php, javascript, mysql, html

所以这就是问题所在。我在 MySQL DB 中有数据作为文本。数据通过 mysql_real_escape_string 插入。我对向用户显示的数据没有任何问题。

在某些时候，我想将这些数据传递给一个名为 foo 的 javascript 函数。

```
// This is a PHP block of code
// $someText is text retrieved from the database

echo "<img src=someimage.gif onclick=\"foo('{$someText}')\">"; 
```

如果 $someText 中的数据有换行符，例如：

```
Line 1
Line 2
Line 3 
```

javascript 中断，因为 html 输出是

```
<img src=someimage.gif onclick="foo('line1
line2
line3')"> 
```

所以问题是，如何将 $someText 传递给我的 javascript foo 函数，同时保留换行符和回车符但不破坏代码？

==================================================== ==========================================

像这样使用json之后：

```
echo "<img src=someimage.gif onclick=\"foo($newData)\">"; 
```

它正在输出这样的 HTML：

```
onclick="foo("line 1<br \/>\r\nline 2");"> 
```

显示图像后跟 \r\nline 2");">

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:51:40.150

`json_encode()`是要走的路：

```
$json = json_encode($someText); # this creates valid JS
$safe = HtmlSpecialChars($json); # this allows it to be used in an HTML attribute
echo "<img src=someimage.gif onclick=\"foo($safe)\">"; 
```

你可以在这里看到一个演示：http: [//codepad.org/TK45YErZ](http://codepad.org/TK45YErZ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:48:18.530

如果我没有解释得很糟糕，你可以这样做：

```
// This is a PHP block of code
// $someText is text retrieved from the database

echo "<img src=someimage.gif onclick=\"foo('{".trim( preg_replace( '/\s+/', ' ',$someText ) )."}')\">"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T23:26:41.383

通过将 JavaScript 从 HTML 中提取出来，您可以省去很多麻烦：

```
<img id="myImage" src="someimage.gif"/>
<script type="text/javascript">
    var str = <?php echo json_encode($json); ?>;
    document.getElementById('myImage').addEventListener(
        'click',
        function() {
            foo(str);
        }
    );
</script> 
```

或者类似的东西...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T23:38:27.180

只有 json_encode() 足以转义新行

```
echo "<img src=someimage.gif onclick=\"foo(".json_encode($newData).")\">"; 
```

# javascript - 如何通过 PHP 脚本 jQuery 一个 XML 文件并正确解析它？

> ID：10002510
> 
> 赞同：0
> 
> 时间：2012-04-03T22:43:06.200
> 
> 标签：javascript, jquery, xml, ajax, parsing

我已经尝试了几种方法让我的 xml 脚本在 java 中解析，但我想不通！

我有 2 个文件。如果调用 mysql_get.php，它会返回一个 XML 脚本。post_alert.html 通过 jQuery $.post(..) 从 mysql_get.php 获取 XML 脚本，如下所示：

```
function init2() {

    var response;
    $.post("mysql_get.php", function (data) {
        response = data;
        alert(response)
    });
    var xml;
    xml = $.parseXML(response);
    alert($(response).find("item").each(function () {
        $(this).attr("id")
    }));
} 
```

在点击一个调用 init2() 的按钮后，我得到了 xml 样式的响应消息，正如我在警报弹出窗口中看到的那样。

```
<?xml version="1.0" encoding="uft-8"?>
<root>
<collection collection="locationPoint">
    <item id="1">
        <latitude>23.4442</latitude>
        <longitude>51.2341</longitude>
    </item>

    <item id="2">
        <latitude>2849.24</latitude>
        <longitude>213.132</longitude>
    </item>
</collection> 
```

但是除了我希望正确解析之外，警报不会弹出“1”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:47:35.820

这里有几件事： 你的 xml 文件的第 1 行应该是 UTF-8 而不是 UFT-8 第 2 行应该被删除，否则请确保你有一个结束标签，无效的 xml

然后是一个小例子，希望对您有所帮助：

```
<html>
    <head>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script>
    </head>
    <body>
        <div id="dc"></div>
    </body>
    <script type="text/javascript">
        $(document).ready(function() {
            $.ajax({
                url: 'mysql_get.php',
                type: 'post',
                dataType: 'xml',
                success: function(data) {
                    $(data).find('item').each(function () {
                        $('#dc').append($(this).attr('id') + '<br/>')
                    });
                },
                error: function(data) {
                    $('#dc').html('error');
                }
            });
        });
    </script>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:57:17.220

**AJAX**中的 A代表异步。无论响应状态如何，调用之后的代码`$.post(..)`都会立即执行。[`$.post`](http://api.jquery.com/jQuery.post/)

您必须**在**调用中移动`var xml..`-code 。 此外，仅循环遍历元素，而不返回 ID。用于创建由 id 组成的对象，并获取它的数组表示。**`$.post`
[`.each()`](http://api.jquery.com/each/)[`.map()`](http://api.jquery.com/map/)[`.toArray()`](http://api.jquery.com/toArray/)**

 **```
function init2() {
    $.post("mysql_get.php", function(data) {
        var response = data;
        var xml = $($.parseXML(response));
        alert(response.find("item").map(function () {
            return $(this).attr("id")
        }).toArray() );
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T00:20:42.497

看看[使用 jQuery 进行 XML 操作](http://www.fatihacet.com/lab/xml/)**

# php - 用正则表达式PHP中的另一个字符替换字符

> ID：10002512
> 
> 赞同：0
> 
> 时间：2012-04-03T22:43:21.450
> 
> 标签：php, regex, wordpress, expression

目前，这是我拥有的 preg_replace 字符串。

```
$mtg_post['post_content'] = preg_replace("[^\\x20-\\x7e]", "",$ability); 
```

这是 $ability 中包含的数据的示例。

```
At the beginning of your upkeep, put a doom counter on Armageddon Clock.£At the 
beginning of your draw step, Armageddon Clock deals damage equal to the number 
of doom counters on it to each player.£{4}: Remove a doom counter from Armageddon  
Clock. Any player may activate this ability but only during any upkeep step. 
```

我想用 2xreturn 或新段落替换 £ 字符？在正则表达式中，所以该行看起来像这样，但不太确定如何实现这一点。

```
At the beginning of your upkeep, put a doom counter on Armageddon Clock.

At the beginning of your draw step, Armageddon Clock deals damage equal 
to the number of doom counters on it to each player.

{4}: Remove a doom counter from Armageddon Clock. Any player may activate 
     this ability but only during any upkeep step. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T22:45:41.817

这里不需要正则表达式，只需使用`str_replace()`：

```
$out = str_replace("£", "\n\n", $in); 
```

# javascript - 你应该避免使用 jQuery 和/或 jQueryUI 吗？

> ID：10002513
> 
> 赞同：0
> 
> 时间：2012-04-03T22:43:30.527
> 
> 标签：javascript, jquery, jquery-ui

这些库的速度导致每次我重新加载它时页面都会闪烁（如果我不使用它们就不会这样做）。我也觉得在网上发布时超过0.9秒的速度是不能接受的。如果这是本地主机上的速度，从服务器到客户端的行进距离为 0 米，那么我害怕考虑发布后需要的时间。

如果您真的不需要 jQuery 和 jQueryUI 库，那么您通常应该避免使用它们吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T22:45:58.993

根据定义，jQuery 和 jQuery-UI 并不慢。

滥用这些*可能会*减慢页面速度 - 你真的需要一百个闪亮的效果吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:47:35.447

实际上，这取决于您使用的 JQuery 库版本。缩小版可以加快网页速度。在本地拥有它们也是一个优点，但您不会拥有更新版本（当您使用 cdn 时，您可以获得最新版本）。

你加载什么样的外部数据？他们都在使用 AJAX 调用吗？您通常的服务器连接是什么？

这些是你应该关注的问题。

# smartgwt - 智能 GWT 购买许可证。

> ID：10002514
> 
> 赞同：0
> 
> 时间：2012-04-03T22:43:33.290
> 
> 标签：smartgwt

我目前使用 GWT，想澄清一下 smart GWT 是否可以免费用于商业用途？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:24:29.073

@Sanika，SmartGWT 提供免费和付费版本，例如 SmartGWT LGPL、SmartGWTEE、SmartGWTPro 和 SmartClient。此[链接](http://www.smartclient.com)可以帮助您决定应该使用的版本。

# image - 图像旋转+水平或垂直翻转

> ID：10002516
> 
> 赞同：0
> 
> 时间：2012-04-03T22:43:43.233
> 
> 标签：image, html, canvas, matrix

我正在开发一个 html5 画布图像应用程序，您可以在其中进行基本转换，如 90º 旋转、水平和垂直翻转。

我使用以下矩阵来绘制图像：

```
matrix.scale(flipHorizontal, flipVertical); // Where each flip could be 1 or -1
matrix.rotateZ(angle); // Angle could be 0,90,180 or 270º 
```

一开始一切看起来都很好，但是当我旋转 90º 并在水平翻转之后，它就像垂直翻转一样。

知道如何解决吗？

[例如 http://img688.imageshack.us/img688/1570/73811955.jpg](http://img688.imageshack.us/img688/1570/73811955.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-10T17:01:03.953

试试这个插件

演示：[http ://dmadan.in/imageflip.html](http://dmadan.in/imageflip.html)

来源：[https ://github.com/dmadan86/imageflip](https://github.com/dmadan86/imageflip)

它适用于 css3 和 Canvas。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:30:02.753

无法从您提供的代码段中看出。可能是函数内部或调用函数时出错。可能与轴的处理方式有关。水平翻转是 y（垂直轴）的反射。旋转后，图像的 y 轴现在是水平的，因此除非您正确处理轴，否则“水平翻转”将反映在现在水平的 y 轴上，从而生成给定的图像。

# node.js - Nginx 无法从 Node/Express 应用程序发送完整文件

> ID：10002518
> 
> 赞同：3
> 
> 时间：2012-04-03T22:43:48.440
> 
> 标签：node.js, nginx, express

将大文件 (1.5gb) 发送到连接速度 < 2mbps 的客户端会导致浏览器仅接收 1.08gb 的数据，但认为下载已完成。更快的连接接收完整的 1.5gb 文件。

我的 Express.js 应用程序确定要发送哪个文件并使用以下`response#download`方法进行响应：

```
app.get('/download-the-big-file', function(request, response) {
  var file = {
    name: 'awesome.file',
    path: '/files/123-awesome.file'
  };

  response.header("X-Accel-Redirect: " + file.path);

  response.download(file.path, file.name);
}); 
```

请注意，我将 X-Accel-Redirect 标头设置为利用[NginxXsendfile](http://wiki.nginx.org/NginxXSendfile)

我的 Nginx 配置：

```
server {

    client_max_body_size 2g;
    server_name localhost;

    location / {
        proxy_pass http://127.0.0.1:8000/;
    }

    location /files {
        root /media/storage;
        internal;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T20:29:23.507

我相信最初的问题源于 Node（可能在 Node 的 I/O 循环中发送大文件），并且我认为 Nginx 正确地从 Node 下载的假设是不正确的。我有几个错误意味着 NginxXSendfile 无法正常工作，而 Node 仍在处理响应。

我有一个语法错误：
要设置响应标头，这是正确的语法：

```
response.header('X-Accel-Redirect', file.path); 
```

使用上述标头时不应设置响应的正文（doh！）。
使用 Express/Connect/Node 仅`#send`响应带有 X-Accel-Redirect 标头的响应，并将 Content-Disposition 设置为`response#attachment`：

```
response.attachment(file.name);
response.send(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-12T16:58:36.203

`Content-Disposition`除了_`X-Accel-Redirect`

Express.js 代码：

```
app.get('/files/test.txt', function (req, res) {
  res.setHeader('X-Accel-Redirect', '/files/test.txt');
  res.attachment('text.txt');
  res.send();
}); 
```

Nginx 配置文件（/etc/nginx/sites-available/default）

```
server {

    location /files {
      internal;
      root   /home/user;
    }
} 
```

这为文件提供服务`test.txt`，在`/home/user/files`（即`/home/user/files/test.txt`）。

# iphone - 从 XIB 创建时如何构造 UIImage？

> ID：10002529
> 
> 赞同：4
> 
> 时间：2012-04-03T22:45:14.957
> 
> 标签：iphone, ios, interface-builder, xib, nib

我正在尝试对 XIB 做一些花哨的事情，其中​​包括想要以某种方式获取和存储从 xib 加载的图像的路径。为此，我创建了一些类别并进行了一些方法调配以覆盖所有 UIImage 构造函数以在调用其父构造函数之前保存它们的路径。

但是由于Apple的黑盒BS及其所有XIB东西，当我通过[UIViewController initWithNib ...]创建UIImageView时，似乎没有一个暴露的UIImage构造函数被调用。

有人知道发生了什么函数调用或他们是如何做到的吗？我找不到任何信息来揭示 initWithNib 在幕后实际所做的事情。

谢谢！

编辑：如果您处于类似情况，您可以尝试使用自动填充图像路径的accessibilityLabel / accessibilityHint。唯一的问题是需要启用可访问性或这些值为零。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:53:37.827

我知道从 Nib 构造的对象正在根据 NSCoding 协议取消归档；`initWithCoder:`在这种情况下，您需要覆盖。

您可以使用 swizzling 替换 UIImageView 的`initWithCoder:`方法，然后四处窥探以查看图像名称或路径是否在任何编码器的键中可用。这可能比破解 UIImage 本身更有效，因为据我们所知 UIImageView 可能正在使用您无权访问的自定义子类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:51:52.520

这些`initWith...`方法用于以*编程*方式创建`UIImageView`对象。

听起来你想捕捉从 XIB 文件实例化的东西。那将是父类`UIView`的[`[initWithCoder:]`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSCoding/initWithCoder%3a)方法。

正如[`UIView`文档所说](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/cl/UIView)：

> initWithCoder： - 如果您从 Interface Builder nib 文件加载视图并且您的视图需要自定义初始化，请实施此方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T23:01:40.283

你们都接近正确-我尝试这样做，`UIImageView`这对`initWithCoder`你们都建议有效。但是，由于某种原因，UIImage 没有被`initWithCoder`调用，而是使用`initWithCGImageStored:(CGImageRef)cgImage scale:(CGFloat)scale orientation:(UIImageOrientation)orientation`.

如果并且当我真的按照我的意愿走出这条路时，我会把它贴在这里。谢谢大佬帮忙

# c# - ASP.NET SlideShowExtender 从 Web 服务中检索图像，但执行时什么也不做

> ID：10002534
> 
> 赞同：1
> 
> 时间：2012-04-03T22:45:54.620
> 
> 标签：c#, asp.net, sql-server, ajax, database

所以在我的 ASP.NET 解决方案的默认页面上，我有一个 SlideShowExtender 对象，它链接到一个从 MSSQL 数据库中检索幻灯片的 WebMethod。通过调试，我可以确认 Slide 对象是从所述数据库成功创建的，但是一旦页面加载，SlideShow 元素什么也不做。

以下是我的代码；我提前感谢收到的任何回复。谢谢你。

**编辑：**我忘了提到我已经验证了图片 URL 的完整性；他们是正确的。

**Default.aspx（Default.aspx.cs 只是一个带有空 Page_Load 方法的标准代码隐藏）：**

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
CodeBehind="Default.aspx.cs" Inherits="Dissertation._Default" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<asp:ToolkitScriptManager ID="scrptman" runat="server"></asp:ToolkitScriptManager>
        <asp:Image ID="imgBanner" Width="800" Height="300" runat="server"/>
        <br />
        <asp:Label ID="lblDesc" runat="server"></asp:Label>
        <asp:SlideShowExtender ID="sldShow" runat="server"   
        TargetControlID="imgBanner" 
        SlideShowServicePath="~/BannerImages.asmx"
        SlideShowServiceMethod="GetPhotos"   
        AutoPlay="true"    
        ImageDescriptionLabelID="lblDesc" 
        Loop="true" />
</asp:Content> 
```

**BannerImages.asmx.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Data.SqlClient;
using System.Configuration;
using AjaxControlToolkit;

namespace Dissertation
{
/// <summary>
/// Summary description for BannerImages
/// </summary>
/// 
[System.Web.Script.Services.ScriptService]
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
public class BannerImages : System.Web.Services.WebService
{

    [WebMethod]
    [System.Web.Script.Services.ScriptMethod]
    public Slide[] GetPhotos()
    {
        List<Slide> images = new List<Slide>();
        ConnectionStringSettings settings = System.Configuration.ConfigurationManager.ConnectionStrings["Database"];
        SqlConnection conn = new SqlConnection(settings.ConnectionString);
        SqlCommand cmd = new SqlCommand("Select * from sol_bannerData", conn);
        SqlDataReader read = null;
        try
        {
            conn.Open();
            read = cmd.ExecuteReader();

            while(read.Read())
            {
                images.Add(new Slide(Server.MapPath("~/cms/uploads/banners/" + read["ImageURL"].ToString()), "", read["Description"].ToString()));
            }
        }
        catch(SqlException err)
        {
            images.Clear();
            images.Add(new Slide("", "", "Images could not be loaded: " + err.Message));
            return images.ToArray();
        }
        finally
        {
            if(read != null) read.Close();
            if(conn != null) conn.Close();
        }
        Slide[] toReturn = images.ToArray();
        return toReturn;

    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:12:41.000

问题解决了; 我改用 jquery.cycle.all 。

# r - 如何用查找表中的值标签替换数字代码？

> ID：10002536
> 
> 赞同：9
> 
> 时间：2012-04-03T22:45:57.560
> 
> 标签：r, replace, variable-assignment, dataframe, rename

这个问题与[这个问题](https://stackoverflow.com/questions/8433523/creating-a-new-variable-from-a-lookup-table)有关，但并不完全相同。

假设我有这个数据框，

```
df <- data.frame(
                id = c(1:6),
                profession = c(1, 5, 4, NA, 0, 5)) 
```

和一个字符串，其中包含有关职业代码的人类可读信息。说，

```
profession.code <- c(
                     Optometrists=1, Accountants=2, Veterinarians=3, 
                     `Financial analysts`=4,  Nurses=5) 
```

现在，我正在寻找最简单的方法来将 中的值替换 `df$profession`为`profession.code`. 最好不使用特殊库，除非它显着缩短代码。

我希望我的最终结果是

```
df <- data.frame(
                id = c(1:6),
                profession = c("Optometrists", "Nurses", 
                "Financial analysts", NA, 0, "Nurses")) 
```

任何帮助将不胜感激。

谢谢，埃里克

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-03T23:02:31.957

你可以这样做：

```
df <- data.frame(id = c(1:6),
                 profession = c(1, 5, 4, NA, 0, 5))

profession.code <- c(`0` = 0, Optometrists=1, Accountants=2, Veterinarians=3, 
                     `Financial analysts`=4,  Nurses=5)

df$profession.str <- names(profession.code)[match(df$profession, profession.code)]
df
#   id profession     profession.str
# 1  1          1       Optometrists
# 2  2          5             Nurses
# 3  3          4 Financial analysts
# 4  4         NA               <NA>
# 5  5          0                  0
# 6  6          5             Nurses 
```

请注意，我必须`0`在您的向量中添加一个条目`profession.code`来解释这些零。

编辑：这是一个更新的解决方案来解释 Eric 在下面的评论，即数据可能包含任意数量的没有相应描述的职业代码：

```
match.idx <- match(df$profession, profession.code)
df$profession.str <- ifelse(is.na(match.idx),
                            df$profession,
                            names(profession.code)[match.idx]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T01:25:26.257

我玩过它，这是我目前使用该`car`软件包的解决方案。

```
pLoop <- function(v) paste(profession.code[v],"='", names(profession.code[v]),"';") 
library(car)
df$profession<- recode(df$profession, paste(sapply(1:5, pLoop),collapse=""))

df
# id           profession
#  1         Optometrists 
#  2               Nurses 
#  3   Financial analysts 
#  4                 <NA>
#  5                    0
#  6               Nurses 
```

如果有人对解决方案有其他建议，仍然很感兴趣。我宁愿只使用 R 中的基本函数来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-19T11:36:30.977

我个人喜欢这个`arules`包处理这个问题的方式，使用这个`decode`函数。从文档中：

```
library(arules)
data("Adult")

## Example 1: Manual decoding
## get code
iLabels <- itemLabels(Adult)
head(iLabels)

## get undecoded list and decode in a second step
list <- LIST(Adult[1:5], decode = FALSE)
list

decode(list, itemLabels = iLabels) 
```

优点是该软件包还提供了功能`encode`和`recode`. 我相信他们各自的目的很简单。

# objective-c - NSInvocation & NSError - __autoreleasing & memory crasher

> ID：10002538
> 
> 赞同：4
> 
> 时间：2012-04-03T22:46:05.230
> 
> 标签：objective-c, automatic-ref-counting, nsinvocation

在学习 NSInvocations 时，我对内存管理的理解似乎存在差距。

这是一个示例项目：

```
@interface DoNothing : NSObject
@property (nonatomic, strong) NSInvocation *invocation;
@end

@implementation DoNothing
@synthesize invocation = _invocation;

NSString *path = @"/Volumes/Macintosh HD/Users/developer/Desktop/string.txt";

- (id)init
{
    self = [super init];
    if (self) {

        SEL selector = @selector(stringWithContentsOfFile:encoding:error:);
        NSInvocation *i = [NSInvocation invocationWithMethodSignature:[NSString methodSignatureForSelector:selector]];

        Class target = [NSString class];
        [i setTarget:target];
        [i setSelector:@selector(stringWithContentsOfFile:encoding:error:)];

        [i setArgument:&path atIndex:2];

        NSStringEncoding enc = NSASCIIStringEncoding;
        [i setArgument:&enc atIndex:3];

        __autoreleasing NSError *error;
        __autoreleasing NSError **errorPointer = &error;
        [i setArgument:&errorPointer atIndex:4];

        // I understand that I need to declare an *error in order to make sure
        // that **errorPointer points to valid memory. But, I am fuzzy on the
        // __autoreleasing aspect. Using __strong doesn't prevent a crasher.

        [self setInvocation:i];
    }

    return self;
}

@end 
```

当然，我在这里所做的只是建立一个调用对象作为 NSString 类方法的属性

```
+[NSString stringWithContentsOfFile:(NSString \*)path encoding:(NSStringEncoding)enc error:(NSError \**)error] 
```

这是有道理的，尤其是在阅读[了这篇博文之后](http://lapcatsoftware.com/blog/2007/04/01/invoking-errors/)，关于为什么我需要通过声明并将地址分配给 **errorPointer 来处理 NSError 对象。有点难以掌握的是这里发生的 __autoreleasing 和内存管理。

**errorPointer 变量不是对象，因此它没有保留计数。它只是存储指向 NSError 对象的内存地址的内存。我知道 stringWith... 方法将分配、初始化和自动释放 NSError 对象，并设置 *errorPointer = 分配的内存。正如您稍后将看到的，NSError 对象变得不可访问。这是...

*   ...因为自动释放池已经耗尽？
*   ...因为ARC填写了对stringWith ...的alloc + init的“释放”调用？

那么让我们来看看调用是如何“工作”的

```
int main(int argc, const char * argv[])
{
    @autoreleasepool {

        NSError *regularError = nil;
        NSString *aReturn = [NSString stringWithContentsOfFile:path
                                                      encoding:NSASCIIStringEncoding
                                                         error:&regularError];

        NSLog(@"%@", aReturn);

        DoNothing *thing = [[DoNothing alloc] init];
        NSInvocation *invocation = [thing invocation];

        [invocation invoke];

        __strong NSError **getErrorPointer;
        [invocation getArgument:&getErrorPointer atIndex:4];
        __strong NSError *getError = *getErrorPointer;  // CRASH! EXC_BAD_ACCESS

        // It doesn't really matter what kind of attribute I set on the NSError
        // variables; it crashes. This leads me to believe that the NSError
        // object that is pointed to is being deallocated (and inspecting with
        // NSZombies on, confirms this).

        NSString *bReturn;
        [invocation getReturnValue:&bReturn];
    }
    return 0;
} 
```

这让我大开眼界（有点令人不安），因为我以为我知道在内存管理方面我到底在做什么！

为了解决我的崩溃，我能做的最好的事情就是从 init 方法中拉出 NSError *error 变量，并使其成为全局变量。这需要我在 **errorPointer 上将属性从 __autoreleasing 更改为 __strong。但是，很明显，这种修复并不理想，尤其是考虑到一个操作队列中可能会多次重用 NSInvocations。它也只是*有点*证实了我对 *error 正在被释放的怀疑。

作为最终的 WTF，我尝试使用 __bridge casts 玩了一下，但是 1\. 我不确定这是否是我需要的，以及 2\. 置换后我找不到一个有效的。

我希望有一些见解可以帮助我更好地理解为什么这一切都没有点击。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T23:34:46.620

这实际上是一个非常简单的错误，与自动引用计数无关。

在`-[DoNothing init]`中，您正在使用指向堆栈变量的指针初始化调用的错误参数：

```
__autoreleasing NSError *error;
__autoreleasing NSError **errorPointer = &error;
[i setArgument:&errorPointer atIndex:4]; 
```

在 中`main`，您正在获取相同的指针并取消引用它：

```
__strong NSError **getErrorPointer;
[invocation getArgument:&getErrorPointer atIndex:4];
__strong NSError *getError = *getErrorPointer; 
```

但是当然，此时所有存在的局部变量都`-[DoNothing init]`不再存在，并且尝试从其中读取会导致崩溃。

# ruby - 如何在ruby中对子数组进行排序

> ID：10002540
> 
> 赞同：0
> 
> 时间：2012-04-03T22:46:17.197
> 
> 标签：ruby, sorting

我需要对以下内容进行排序，任何想法表示赞赏：

```
a=[
    ["****************1************","20120210 08:04:05,404 DEBUG MQReceiver - Receive message "<FIXML>","\n"],
    ["****************3************","20120210 08:04:00,404 DEBUG MQReceiver - Sent message "<FIXML>","\n"],
    ["****************2************","20120210 08:03:05,404 DEBUG MQReceiver - Allocated message "<FIXML>","\n"],
] 
```

如何按时间或按步骤 1、2、3 对该数组进行排序 - 通常 a.sort{|x,y| x<=>y} 在这里不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T00:08:12.047

如果您尝试按两个标准进行排序，请执行

```
a.sort_by do |item|
  time = parse_time_from_string(item[1])
  step = parse_step_from_string(item[0])
  [time, step]
end 
```

# php - 选择列值相同的行

> ID：10002542
> 
> 赞同：0
> 
> 时间：2012-04-03T22:46:25.470
> 
> 标签：php, mysql, rows, file-management

我有一个名为“files”的表，用于存储 file_id。基本上，我网站上的用户可以将文件上传到我的网站，当用户上传文件时，该文件的所有信息都会上传到我的表中。

无论如何，我正在开发一个**文件管理器**，用户可以在其中看到他们上传的所有文件、编辑文件名、删除文件等。

我是如何做到这一点的，当文件上传时，用户的**唯一 ID**与具有唯一文件 ID 的行一起上传。

所以我为我的文件管理器要做的就是将用户的 id 与其中许多行都说用户 id 匹配，然后在文件管理器页面上显示每个文件**。**

最简单的方法是什么？

这是我所得到的。不太好，我知道。

```
$checkfiles = mysql_query("SELECT * FROM repository WHERE userid = '$useridtemp'") or die(mysql_error()); 
$fileinfo = mysql_fetch_array($checkfiles); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:49:35.657

你基本上在那里：

```
$user_id_safe = AddSlashes($useridtemp);
$result = mysql_query("SELECT * FROM repository WHERE userid = '$user_id_safe'");
while ($row = mysql_fetch_array($result)){
    # this loop will run once for each found row, in $row
    print_r($row);
} 
```

只需为用户 id 添加一个转义符以避免 sql 注入攻击，并循环返回的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:54:02.460

这将在表格中打印文件，并带有**删除**和**编辑**按钮。显然，这种方法可能是删除文件最不安全的方法......但我认为这只是教育，是吗？无论如何，它是一些东西。

```
echo '<table>';
foreach($fileinfo as $file) {
    echo '<tr>';
    // Print File info
    echo '<td>'.$file['filename'].'</td>';
    // Print Buttons
    echo '<td><a href="edit.php?id='.$file['id'].'"><img/></a></td>';
    echo '<td><a href="delete.php?id='.$file['id'].'"><img/></a></td>';
    echo '</tr>';
}
echo '</table>'; 
```

我将图像留空。[您必须自己找到一些图标。](http://iconfinder.com)

# c++ - Code::Blocks 中缺少源文件？

> ID：10002546
> 
> 赞同：0
> 
> 时间：2012-04-03T22:47:12.420
> 
> 标签：c++, codeblocks

我是一名初级程序员，所以我真的不太了解 IDE 或它们的工作原理。一段时间以来，我一直想迁移到 Code::Blocks IDE。我想测试一个wxWidgets项目，但是在设置的过程中，它要求我选择wxWidgets的位置，并说它必须包含常见的“include”和“lib”文件夹。然后我意识到在主“CodeBlocks”程序文件夹中没有这些文件夹中的任何一个。我尝试重新安装它（使用“标准”安装选项），但无济于事；问题仍然存在。然而，奇怪的是，包含 iostream 或 stdio.h 的简单控制台应用程序确实可以毫无错误地工作。现在，我并不是真的很想*使用*wxWidgets，***这是安装错误还是 wxWidgets 错误？***

# asp.net - IE8 兼容模式 Asp.net 菜单填充问题

> ID：10002551
> 
> 赞同：6
> 
> 时间：2012-04-03T22:47:56.653
> 
> 标签：asp.net, css

我遇到了 ASP.net 垂直菜单的问题，在某些 IE8 模式和其他 IE 浏览器中，它会将我的菜单项更改为在每个菜单项的底部有一个额外的空间，如下所示。

（左边不好，右边好）。这只是IE。

![坏的](../Images/767e911cd38449c9503c0113b89c378c.png) _____________________ ![好的](../Images/dd592cd4ffe3b8689dcc6064b814ead5.png)

我做了一个边距：-1px；对于底部和顶部并得到以下内容并仍然添加空间，如下所示。

![在此处输入图像描述](../Images/20c447dabec7ed79b6d4a5e86d953ed5.png)

这是我的CSS：

```
 .SideStaticMenuStyle a, 
 .SideStaticMenuStyle a:visited,
 .SideStaticMenuStyle a:active
 {
    color: #000000;     
    text-decoration: none;
    font-weight: normal;
    font-family: verdana;
    font-size: 12px;
    white-space:normal;
 }
 .SideStaticMenuStyle a:hover 
{
    color: #ffffff;     
    text-decoration: none;
    font-size: 12px;        
    font-weight: normal;
    font-family:  verdana;
 }

 .SideStaticMenuStyle td
 {
    background-color: #c2d0e9;
    width: 160px;
    line-height:14px;
 }

 .SideStaticSelectedStyle td,
 .SideStaticSelectedStyle a, 
 .SideStaticSelectedStyle a:visited,
 .SideStaticSelectedStyle a:active,
 .SideStaticSelectedStyle a:hover
 {
color: #ffffff;     
text-decoration: none;
font-weight: bold;
font-family: verdana;
font-size: 11px;
white-space:normal;
background-color: #6C85B0;
 }

 .SideStaticHoverStyle td
 {
    font-weight: normal;
    font-family:  verdana;
    background-color: #6c85b0;
    color: #ffffff;
}
 .SideStaticHoverStyle td:hover a 
 {
           color: #ffffff;
      }

 .SideStaticMenuItemStyle
 {
    font-weight: normal;
    font-family:  verdana;
    border-bottom: solid 1px #012754;
    border-left: solid 1px #012754;
    border-right: solid 1px #012754;
     border-collapse:collapse;
 }
 .SideStaticMenuItemStyle td
 {      
    padding: 2px 2px 2px 3px;
    text-align: left;
    font-weight: normal;
    font-family:  verdana;
  }
 .SideStaticHoverStyle
 {
    font-weight: normal;
    font-family: verdana;
 } 
```

这是我的 HTML：

```
<asp:Menu ID="Menu2" runat="server"  Orientation="Vertical" ItemWrap="true">
            <DataBindings>
                <asp:MenuItemBinding DataMember="MenuItem" TextField="Title" NavigateUrlField="URL" />
            </DataBindings>
            <StaticMenuStyle CssClass="SideStaticMenuStyle" />
            <StaticSelectedStyle CssClass="SideStaticSelectedStyle" ItemSpacing="0px" />
            <StaticMenuItemStyle CssClass="SideStaticMenuItemStyle" ItemSpacing="0px" />
            <DynamicHoverStyle CssClass="SideDynamicHoverStyle" />
            <DynamicMenuStyle CssClass="SideDynamicMenuStyle" />
            <DynamicSelectedStyle CssClass="SideDynamicSelectedStyle" />
            <DynamicMenuItemStyle CssClass="SideDynamicMenuItemStyle" />
            <StaticHoverStyle CssClass="SideStaticHoverStyle" />
        </asp:Menu> 
```

页面生成代码：

```
 <table id="ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2" class="SideStaticMenuStyle ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2_5 ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2_2" cellpadding="0" cellspacing="0" border="0">
    <tr onmouseover="Menu_HoverStatic(this)" onmouseout="Menu_Unhover(this)" onkeyup="Menu_Key(this)" id="ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2n1">
        <td><table class="SideStaticMenuItemStyle ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2_4" cellpadding="0" cellspacing="0" border="0" width="100%">
            <tr>
                <td style="width:100%;"><a class="ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2_1 SideStaticMenuItemStyle ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2_3" href="servicelink.aspx" target="_self" style="border-style:none;font-size:1em;">ServiceLink</a></td>
            </tr>
        </table></td>
    </tr><tr style="height:0px;">
        <td></td>
    </tr><tr style="height:0px;">
        <td></td>
    </tr><tr onmouseover="Menu_HoverStatic(this)" onmouseout="Menu_Unhover(this)" onkeyup="Menu_Key(this)" id="ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2n2">
        <td><table class="SideStaticMenuItemStyle ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2_4" cellpadding="0" cellspacing="0" border="0" width="100%">
            <tr>
                <td style="width:100%;"><a class="ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2_1 SideStaticMenuItemStyle ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2_3" href="fnpc.aspx" target="_self" style="border-style:none;font-size:1em;">Fidelity National Property and Casualty</a></td>
            </tr>
        </table></td>
    </tr><tr style="height:0px;">
        <td></td>
    </tr><tr style="height:0px;">
        <td></td>
    </tr><tr onmouseover="Menu_HoverStatic(this)" onmouseout="Menu_Unhover(this)" onkeyup="Menu_Key(this)" id="ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2n3">
        <td><table class="SideStaticMenuItemStyle ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2_4" cellpadding="0" cellspacing="0" border="0" width="100%">
            <tr>
                <td style="width:100%;"><a class="ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2_1 SideStaticMenuItemStyle ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2_3" href="ceridiancorp.aspx" target="_self" style="border-style:none;font-size:1em;">Ceridian Corporation</a></td>
            </tr>
        </table></td>
    </tr><tr style="height:0px;">
        <td></td>
    </tr><tr style="height:0px;">
        <td></td>
    </tr><tr onmouseover="Menu_HoverStatic(this)" onmouseout="Menu_Unhover(this)" onkeyup="Menu_Key(this)" id="ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2n4">
        <td><table class="SideStaticMenuItemStyle ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2_4" cellpadding="0" cellspacing="0" border="0" width="100%">
            <tr>
                <td style="width:100%;"><a class="ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2_1 SideStaticMenuItemStyle ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2_3" href="remy.aspx" target="_self" style="border-style:none;font-size:1em;">Remy International, Inc.</a></td>
            </tr>
        </table></td>
    </tr><tr style="height:0px;">
        <td></td>
    </tr><tr style="height:0px;">
        <td></td>
    </tr><tr onmouseover="Menu_HoverStatic(this)" onmouseout="Menu_Unhover(this)" onkeyup="Menu_Key(this)" id="ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2n5">
        <td><table class="SideStaticMenuItemStyle ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2_4" cellpadding="0" cellspacing="0" border="0" width="100%">
            <tr>
                <td style="width:100%;"><a class="ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2_1 SideStaticMenuItemStyle ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2_3" href="abrh.aspx" target="_self" style="border-style:none;font-size:1em;">American Blue Ribbon Holdings, LLC</a></td>
            </tr>
        </table></td>
    </tr><tr style="height:0px;">
        <td></td>
    </tr><tr style="height:0px;">
        <td></td>
    </tr><tr onmouseover="Menu_HoverStatic(this)" onmouseout="Menu_Unhover(this)" onkeyup="Menu_Key(this)" id="ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2n6">
        <td><table class="SideStaticMenuItemStyle ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2_4" cellpadding="0" cellspacing="0" border="0" width="100%">
            <tr>
                <td style="width:100%;"><a class="ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2_1 SideStaticMenuItemStyle ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2_3" href="cascade.aspx" target="_self" style="border-style:none;font-size:1em;">Cascade Timberlands</a></td>
            </tr>
        </table></td>
    </tr><tr style="height:0px;">
        <td></td>
    </tr>
</table><a id="ctl00_ContentPlaceHolder1_ctl00_ctl06_ctl00_Menu2_SkipLink"></a>
    </td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T00:00:27.510

在那些实际包含文本的标签之间有一些额外的 TR 和 TD 标签。如果你删除这些，你应该没问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T16:05:52.047

问题在于您的`<asp:Menu />`控件的标记。`ItemSpacing="0"`是`<StaticMenuItemStyle />`什么创建了这些额外的`<tr />`标签。删除它，它们就会消失：

```
<asp:Menu ID="Menu2" runat="server"  Orientation="Vertical" ItemWrap="true">
    <DataBindings>
        <asp:MenuItemBinding DataMember="MenuItem" TextField="Title" NavigateUrlField="URL" />
    </DataBindings>
    <StaticMenuStyle CssClass="SideStaticMenuStyle" />
    <StaticSelectedStyle CssClass="SideStaticSelectedStyle" />
    <StaticMenuItemStyle CssClass="SideStaticMenuItemStyle" />
    <DynamicHoverStyle CssClass="SideDynamicHoverStyle" />
    <DynamicMenuStyle CssClass="SideDynamicMenuStyle" />
    <DynamicSelectedStyle CssClass="SideDynamicSelectedStyle" />
    <DynamicMenuItemStyle CssClass="SideDynamicMenuItemStyle" />
    <StaticHoverStyle CssClass="SideStaticHoverStyle" />
</asp:Menu> 
```

这是我的本地机器的屏幕截图，我在其中显示它已修复：

![在此处输入图像描述](../Images/9a4386a75a139663d79835de4f131e6d.png)

# java - 浏览.jdb 输出？

> ID：10002552
> 
> 赞同：3
> 
> 时间：2012-04-03T22:48:15.157
> 
> 标签：java, database, jdb, crawler4j

我正在运行[crawler4j](http://code.google.com/p/crawler4j/)，输出到目录`/frontier/`。该目录下的文件是

*   00000000.jdb
*   je.info.0
*   je.info.lck
*   杰尔克

.jdb 文件是唯一包含数据的文件，其他三个文件的字节数为零。我不确定如何处理这些数据。java 程序捕获了我想要的数据，但现在我不知道如何浏览我检索到的数据。（我在 Mac 上，所以任何跨平台或用于 OSX 的东西都是可取的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:44:27.513

我查看了 crawler4j 的源代码，它看起来像是在使用 Berkeley DB。[有关如何访问这些文件的详细信息，请搜索 StackOverflow。](https://stackoverflow.com/search?q=berkeley%20db)

# jsf-2 - 组件在 ui:repeat 中具有相同的 id

> ID：10002555
> 
> 赞同：5
> 
> 时间：2012-04-03T22:48:51.557
> 
> 标签：jsf-2, primefaces, composite-component, uirepeat

不幸的是，如果您尝试动态创建选项卡，primefaces AccordionPanel 在 2.2.1 版中不能很好地工作。这是我的情况，如果用户单击添加图标，我需要创建手风琴，如果他单击 x 图标，我需要删除。没问题，我已经创建了自己的复合组件，就像你在这里看到的那样：

```
<c:interface>
    <c:attribute name="titulo" default="" required="false" />
    <c:attribute name="renderizar" default="true" required="false" />
    <c:attribute name="width" required="false" default="300"/>
    <c:facet name="extra" required="false" />
</c:interface>

<c:implementation>
    <h:outputStylesheet library="css" name="hrgiAccordion.css" target="head" />
    <h:outputStylesheet library="css" name="clearfix.css" target="head" />
    <h:outputScript library="js" name="hrgiAccordion.js" target="head" />
    <h:panelGroup layout="block" rendered="#{cc.attrs.renderizar}"
    styleClass="hrgi-accordion clearfix" style="width: #{cc.attrs.width}px;">
        <div class="hrgi-cabecalho-accordion clearfix"
            onclick="abrirAccordion(this)">
            <h:outputLabel value="#{cc.attrs.titulo}" />
            <c:renderFacet name="extra" required="false"/>
        </div>
        <h:panelGroup layout="block" class="hrgi-conteudo-accordion clearfix">
            <c:insertChildren />
        </h:panelGroup>
    </h:panelGroup>
</c:implementation> 
```

它工作正常，但我有一些具体的需求......手风琴选项卡的内容是一些选择和一个带有 inputField 和微调器（由我再次创建）的动态表，你可以在这里看到用户界面：

![弹出式表单](../Images/8db4734e79e8a998ad3478783378ad74.png)

当用户在微调器中插入值时，标签“Total das parcelas”应该更新，但它只会在对话框只有一个手风琴选项卡时更新！查看生成的 html 代码，我发现不同手风琴选项卡中的微调器是相等的！可能这就是我无法更新值的原因。这是此对话框的代码：

```
<ui:composition template="../templates/popupSubmit.xhtml">
<ui:param name="titulo" value="#{vendaMsg['popup.forma_pagamento.titulo']}"/>
<ui:param name="popup" value="#{modeloPopupFormaPagamento}"/>
<ui:param name="controladorPopup" value="#{controladorPopupFormaPagamento}"/>
<ui:define name="cabecalho">
    <h:panelGroup id="cabecalhoValores" binding="#{cabecalhoValores}" layout="block">
        <h:outputLabel value="#{vendaMsg['popup.forma_pagamento.total_prevenda']}" />
        <h:outputLabel value="#{preVendaBean.valorLiquido}">
            <f:convertNumber currencySymbol="R$" maxFractionDigits="2"
                             minFractionDigits="2" type="currency" currencyCode="BRL"/>
        </h:outputLabel>
        <hrgi:separador/>
        <h:outputLabel value="#{vendaMsg['popup.forma_pagamento.total_parcelas']}" />
        <h:outputLabel value="#{controladorPopupFormaPagamento.calcularTotalParcelas()}">
            <f:convertNumber currencySymbol="R$" maxFractionDigits="2"
                             minFractionDigits="2" type="currency" currencyCode="BRL"/>
        </h:outputLabel>
    </h:panelGroup>
</ui:define>
<ui:define name="conteudo">
    <h:panelGroup layout="block" styleClass="clearfix hrgi-div-form">
        <h:panelGroup id="painelFormasDePagamento" binding="#{painelFormasDePagamento}" layout="block">
            <ui:repeat id="repeticao" var="formaPagamento" value="#{modeloPopupFormaPagamento.formasDePagamento}">
                <hrgi:accordion titulo="#{vendaMsg['popup.forma_pagamento.aba_acordeon.titulo']}" width="380">
                    <f:facet name="extra">
                        <p:commandLink action="#{controladorPopupFormaPagamento.removerForma(formaPagamento)}"                                           
                                       update=":#{painelFormasDePagamento.clientId}" global="false">
                            <h:graphicImage library="img" name="remover.png"/>
                        </p:commandLink>
                    </f:facet>
                    <h:panelGroup layout="block" class="clearfix">
                        <h:panelGroup id="painelSelecaoForma" layout="block">
                            <h:outputLabel value="#{vendaMsg['popup.forma_pagamento.forma_pagamento']}"/>
                            <h:selectOneMenu value="#{formaPagamento.idFormaPagamento}"                                                                 valueChangeListener="#{controladorPopupFormaPagamento.processarMudancaFormaPagamento}">
                                <f:selectItems value="#{selectItemFormasPagamento.itens}"/>
                                <f:attribute value="#{formaPagamento}" name="formaPagamento"/>
                                <f:ajax event="change" render="painelSelecaoForma painelParcelasFormaPagamento" execute="painelSelecaoForma"/>
                            </h:selectOneMenu>
                            <h:outputLabel value="#{vendaMsg['popup.forma_pagamento.plano_pagamento']}"                                       />
                            <h:selectOneMenu value="#{formaPagamento.idPlanoPagamento}"                                        valueChangeListener="#{controladorPopupFormaPagamento.processarMudancaPlanoPagamento}">
                                <f:selectItems value="#{controladorPopupFormaPagamento.recuperarCarregador(formaPagamento).itens}"/>
                                <f:attribute value="#{formaPagamento}" name="formaPagamento"/>
                                <f:ajax event="change" render="painelParcelasFormaPagamento"/>
                            </h:selectOneMenu>
                        </h:panelGroup>
                        <h:panelGroup id="painelParcelasFormaPagamento" layout="block">
                            <p:dataTable id="tabela" value="#{formaPagamento.parcelas}" var="parcela"
                                         emptyMessage="#{msgGerais['gerais.sem_dados']}"
                                         scrollable="#{formaPagamento.parcelas.size()>2}"
                                         height="76">
                                <p:column headerText="#{vendaMsg['popup.forma_pagamento.tabela.numero_parcela']}">
                                    <h:outputText value="#{formaPagamento.parcelas.indexOf(parcela)+1}"/>
                                </p:column>
                                <p:column headerText="#{vendaMsg['popup.forma_pagamento.tabela.vencimento_parcela']}">
                                    <hrgi:editableDate value="#{parcela.dataVencimento}" editable="true"/>
                                </p:column>
                                <p:column headerText="#{vendaMsg['popup.forma_pagamento.tabela.valor_parcela']}">
                                    <hrgi:spinner id="valor"
                                            dinheiro="true" fator="0.01" local="pt-BR"
                                            value="#{parcela.valor}">
                                        <f:ajax event="change" execute="@form"
                                                render=":#{cabecalhoValores.clientId}"/>
                                        <f:convertNumber currencySymbol="R$" maxFractionDigits="2"
                                                         minFractionDigits="2" type="currency" currencyCode="BRL"
                                                         for="input"/>
                                    </hrgi:spinner>
                                </p:column>
                            </p:dataTable>
                        </h:panelGroup>
                    </h:panelGroup>
                </hrgi:accordion>
            </ui:repeat>
        </h:panelGroup>
        <p:commandLink immediate="true" action="#{controladorPopupFormaPagamento.adicionarForma}"
                       update="painelFormasDePagamento" global="false">
            <h:graphicImage library="img" name="adicionar_48.png"/>
        </p:commandLink>
    </h:panelGroup>
</ui:define>
</ui:composition> 
```

在此图像中，您可以看到发生了什么，primefaces 数据表中的组件 id 未附加 ui:repeat 索引：

![html检查器](../Images/cf98a86fa6aa9d7df54e31d86d2cc981.png)

我怎么解决这个问题？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T11:44:32.167

这是一个 Mojarra 错误，当您将`UIData`组件嵌套在`UIRepeat`. 我曾经将其报告为[issue 1830](http://java.net/jira/browse/JAVASERVERFACES-1830)。到目前为止它还没有修复，它在[MyFaces](http://myfaces.apache.org)中按预期工作。在`UIRepeat`Mojarra 中，它在很多方面都被破坏了，但在 MyFaces 中却很完美。

如果您想/需要坚持使用 Mojarra 并因此无法用 MyFaces 替换它，请考虑将其替换`UIRepeat`为完全值得`UIData`的组件。[例如Tomahawk's](http://myfaces.apache.org/tomahawk) [`<t:dataList>`](http://myfaces.apache.org/tomahawk-project/tomahawk20/tagdoc/t_dataList.html)不会生成任何额外的标记，是一个很好的`<ui:repeat>`替代品。或者您可以使用 PrimeFaces'[`<p:dataList>`](http://www.primefaces.org/showcase/ui/dataListUnordered.jsf)并使用一些 CSS 隐藏列表项目符号`list-style-type: none`。

**更新**：报告的问题已在 Mojarra 2.1.12 和 2.2.0-m06 中修复。因此，如果可以，请至少升级到该版本。

# ios - 提交给 Apple 之前的 iPhone 应用程序源代码组织

> ID：10002558
> 
> 赞同：2
> 
> 时间：2012-04-03T22:49:06.580
> 
> 标签：ios, app-store, appstore-approval

我即将将我的 iPhone 应用程序提交到应用程序商店，我想知道：是否有一个标准来组织我的源代码（目录、目录的命名、哪个文件到哪个文件夹等）？实际上，我什至会向 Apple 提交源代码吗？也许我错过了，但我认为指南中没有提到源代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T22:54:10.900

1.  您无需将源代码提交给 Apple，只需将使用您的分发证书签名的二进制应用程序提交。
2.  当您通过 Application Loader 应用程序提交二进制文件时，会对二进制文件进行一些静态分析。理论上，此时应该捕获未记录的 API 调用。如果什么都没抓到，Apple 肯定会抓到它们并通知你。

通常，未记录的 API 调用以下划线为前缀。`_`并非所有人都遵循此约定，但您可以在源代码中搜索以or开头的方法和函数`__`。谷歌搜索任何有问题的代码符号可能会产生至少一些关于该方法或函数是否受支持以及它的作用的信息。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T23:12:08.547

第一点已经回答了。

对于第二点，我想建议使用名为“Validate Built Product”的 Xcode 功能。一旦您提交您的应用程序，此选项将在您的应用程序上执行与 Apple 自己相同的测试。

![在此处输入图像描述](../Images/391511e18fcefe4112819d1942b88444.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T22:53:24.207

1.  您不必向 Apple 提交任何源代码。
2.  如果不检查所有代码，就没有真正的方法可以检查，只需提交它，看看会发生什么！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T12:52:00.720

1.代码没有提交给苹果。仅提交应用程序的二进制文件。您可以从您的 iTunes 连接帐户单独发送您的应用程序流。

1.  确保您的应用遵守应用审查说明的所有要点。特别是数据存储策略。

# svn - SlikSvn：'svn' 在 cmd.exe 中未被识别为内部或外部命令

> ID：10002564
> 
> 赞同：0
> 
> 时间：2012-04-03T22:49:36.287
> 
> 标签：svn, path, cmd

电脑：安装了windows 7 64bit
SlikSvn。系统变量*PATH*的 bin 文件夹设置正确：

```
 ...; C:\Program Files\SlikSvn\bin; ... 
```

如果我在“运行”对话框中输入“svn”（通过按 WIN+R），我可以看到 svn.exe 在 cmd 窗口中被调用。
如果我在“运行”对话框中键入“cmd”，则会打开一个 cmd 窗口。在该窗口中，输入 svn 会显示错误：

```
 'svn' is not recognized as an internal or external command 
```

在 cmd 窗口中 键入*PATH命令会显示正确的路径，如环境变量中所示。*

我什至在其中添加了一个带有“C:\Program Files\SlikSvn\bin”的新系统变量“SVNPATH”，但它也不起作用。

有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T23:05:04.527

您真的在分号和`C:`问题之间有空格吗：

```
...; C:\Program Files\SlikSvn\bin; ...
    ^ 
```

如果是这样，那可能是您的问题（Windows 在搜索路径字段时不会修剪此类空白）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T16:44:12.977

I solved this by quoting the path in PATH like so: "C:\Program Files\SlikSvn\bin\svn". One would think Windows would allow file paths with spaces but apparently not!

# asp.net - ASP.NET webforms 维护列表 跨回发

> ID：10002566
> 
> 赞同：0
> 
> 时间：2012-04-03T22:49:47.360
> 
> 标签：asp.net, list, viewstate, session-variables

您好，我有一个小`List<string>`东西，我想在一个页面上跨回发维护。该列表不会包含超过 10 个项目，每个项目最多 40 个字符（无敏感数据）。

我知道有人问过类似的问题，但我对将其存储在`ViewState`or中有些矛盾`Session`。我听说即使很小的字符串值也会导致 ViewState 值的大小大幅增加。我想遍历 List 并使用 Linq 来查询它，但我最好使用`string[]`数组，这个 List（大小不大）可以存储`ViewState`还是应该存储它`Session`？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:16:42.733

我会更关心 this 的范围`List<>`。如果它仅限于这一页，那么我认为使用`ViewState`;是完全可以接受的。这正是它的本意。

`Session`但是，如果您需要在多个页面上保留它，那么评估or会更有意义`Cache`。

我还要记住每个用户的列表是否不同，或者是否可以在多个用户之间共享。在那种情况下，我会倾向于`Cache`.

最后，我可能会因为这个而被遗忘，但您也可以查看使用[SessionPageStatePersister](http://msdn.microsoft.com/en-us/library/system.web.ui.sessionpagestatepersister.aspx)类将 存储`ViewState`在服务器端内存中的选项。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:57:09.607

如果您不滥用它，那么在 ViewState 中存储东西并不是一个糟糕的主意。如果列表很小并且只在一页上有意义，那就去吧。

只要记住 ViewState 是可以被篡改的，所以如果你不想让客户端知道它，那么你就是黄金。否则将其存储在 Session 中。

# java - 在循环中从mysql中检索最后n行

> ID：10002568
> 
> 赞同：2
> 
> 时间：2012-04-03T22:49:48.623
> 
> 标签：java, mysql

这是场景。我有 2 个 PC 客户端（客户端 CA 和 CB）和 1 个 MYSQL 服务器（S1）。CA 不断地在 S1 上生成和存储数据，CB 从 S1 获取数据并用它生成图形。

CB 需要一直从 S1 轮询记录，这就是为什么我在 while 循环中拥有它。如何检索循环中的最后 n 条记录而不会从以前的查询中获取重复项？IE

n = 100,

CA 插入 100 条记录，CB 获取最后 100 条记录

CA 插入 50 条记录，CB 获取最后 100 条记录。其中 50 条记录与之前的查询相同，

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:06:05.537

我假设您在“create_time”列中存储了一些带有数据的时间戳：

```
SELECT * FROM my_table WHERE create_time > time_modified_on_every_iteration ORDER BY create_time LIMIT 0, 100 
```

你的循环：

```
Date lastDate = some_very_old_date;
while(true) {
  rows = sql_query.getData(time_modified_on_every_iteration = lastDate);
  iter = rows.iterator()
  while (iter.hasNext()) {
    // do stuff with current row
    if(!iter.hasNext()) {
      // last cycle
      lastDate = iter.current.getCreate_time();
    }
  }
} 
```

为不精确的语法道歉，这是关于这个想法的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:56:45.550

向表中添加一个字段，用于跟踪插入记录的时间。

接下来，让 CB 客户端跟踪它检索到的最近时间步长，然后将其选择限制为仅比上次提取时间更新的记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T00:31:56.330

如果您有可能在同一秒内创建多个记录，我建议使用自动递增的 id 而不是时间戳。然后，对于给出的时间戳示例，您可以简单地查询 id 大于最后收到的记录的记录 -

```
SELECT * FROM tbl WHERE id > last_received_id ORDER BY id ASC LIMIT 100; 
```

# java - 简单的 XML 框架和 Android - 奇怪的类属性

> ID：10002575
> 
> 赞同：0
> 
> 时间：2012-04-03T22:50:38.050
> 
> 标签：java, android, simple-framework

我正在尝试将 Simple XML 库与 Android 一起使用并遇到一些错误（[http://pastebin.com/7Nrk1esD](http://pastebin.com/7Nrk1esD)），主要错误是：

```
"org.eclipse.persistence.indirection.IndirectList in loader dalvik.system.PathClassLoader..." 
```

休息服务器也使用必须反序列化的模型来生成必要的 XML，还有一些 JPA 注释，如下所示：

```
@OneToMany
@ElementList(required = false)
private List<Substance> substances = new ArrayList<>(); 
```

此行产生以下 xml 输出：

```
<substances class="org.eclipse.persistence.indirection.IndirectList">
...
</substances> 
```

在这里，我现在看到了错误的来源——Android 不知道 org.eclipse.persistence！但我现在的问题是：为什么会产生 line *class="...IndirectList"*以及如何更改它以避免 Android 应用程序中的错误？

PS：我使用的是简单的 2.6.2

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T21:09:26.860

[在这里](https://stackoverflow.com/questions/8862548/simple-xml-framework-on-android-class-attribute)找到答案：

```
Strategy strategy = new TreeStrategy("clazz", "len");
Serializer serializer = new Persister(strategy); 
```

但是我只在 Android 客户端中使用这个片段来反序列化而不是序列化服务器中的模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:09:57.857

试试这个

```
@OneToMany
@Path("substances")
@ElementList(required = false, inline=false)
private List<Substance> substances = new ArrayList<>(); 
```

这应该有效。

# ruby-on-rails - 网站迁移后，index.html 不再自动加载

> ID：10002577
> 
> 赞同：0
> 
> 时间：2012-04-03T22:50:48.173
> 
> 标签：ruby-on-rails, apache, redirect, joyent

感谢您的任何帮助，您可以提供！

我们刚刚将我们的网站迁移到了新服务器。它位于运行 Sun/Oracle Solaris 的 Joyent Cloud 上，除了 PHP 之外，它还有 Ruby。它在 MySQL 和 Apache 上运行。

之前，我们进行了一些设置，以便当我导航到“example.com/community”时，我的浏览器会找到“example.com/community/index.html”，然后元刷新将我适当地重定向到“example.com/社区板”

现在，当我导航到“example.com/community”时，我收到“找不到文件”错误。但是，如果我导航到“example.com/community/index.html”，该站点将按预期工作。

我认为这是 Apache 中的一个问题，但我不是 100% 确定。有没有办法解决这个问题？一步一步的建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T01:02:51.290

在您的站点配置（例如 /etc/apache2/sites-available/example.com）中，您需要确保您有一个[DirectoryIndex](http://httpd.apache.org/docs/2.0/mod/mod_dir.html)指令。您的配置应类似于：

```
<VirtualHost xx.xxx.xxx.xx>
    ServerName example.com
    DocumentRoot /path/to/webroot
    DirectoryIndex index.html
</VirtualHost> 
```

然后只需确保执行“/etc/init.d/apache2 restart”就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:53:20.023

这是我的开发人员所说的。没完全看懂解释，不知道能不能回答后续问题！“对于旧的 mongrel 集群，Apache 会将“/community”识别为一个目录，静默转发到“/community/”，然后它会获取转发的 index.html 文件。使用 Phusion Passenger，”我猜我们是现在使用，“如果“/community”不是常规文件，Apache 会直接向乘客发送请求，并且乘客返回 404 错误。作为修复，我们在社区文件夹中禁用了乘客，从而解决了问题。

# android - 如何处理未完成的android子活动

> ID：10002584
> 
> 赞同：1
> 
> 时间：2012-04-03T22:51:31.083
> 
> 标签：android, android-activity, android-intent

我有一个 Android 应用程序，我希望其他应用程序能够通过意图启动。这允许其他应用程序与我的交互并提供初始输入等。

调用 App（称之为 App-A）执行以下操作：

```
Intent intent = new Intent("com.myapp.dosomething");
intent.putExtra("com.myapp.value1", "1.25");
intent.putExtra("com.myapp.value2", "bob");

startActivity(intent); 
```

我的活动从意图过滤器开始：

```
<intent-filter>
<action android:name="com.myapp.dosomething" />
<category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

如果用户通过我的应用程序的正常流程，一切正常。用户做一些事情，然后当我知道用户完成时，我在我的活动上调用 finish()。一切都是花花公子。

但是，如果在我的应用程序中执行操作的部分过程中，用户点击主页按钮而不是完成任务，我们最终会遇到一个主要问题。如果他们尝试从启动器重新启动 App-A，则会弹出我的应用程序。如果不强制终止我的应用程序，用户将永远无法返回 App-A。更糟糕的是，我的应用程序专门设计为在启动之间不保留任何数据，并且当以这种方式重新启动时，它也不会获得最初传入的任何额外数据，因此我的应用程序无法知道另一个应用程序是还在等我的。

如何进行设置以使 App-A 不会坐在那里等待我的应用程序？无论我的应用程序做什么，它都应该能够继续运行。如果我的应用程序崩溃或没有返回值，我不希望调用应用程序永远挂起。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T00:38:42.710

最后：如果您的应用程序启动并且没有发送必要的数据，那么您描述的场景可能刚刚发生，所以立即完成并指示错误（假设您的应用程序是使用 startActivityForResult 调用的，您可以发送一个指示错误的结果代码）。您不再需要询问您的内容，等待您的应用程序无论如何都不会获取其数据，并且用户可能会被带回他们期望的应用程序。

最后：调用应用程序应添加标志：

```
 intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET); 
```

此标志从活动堆栈中清除被调用的应用程序，以便用户在下次重新启动调用应用程序时到达预期的位置。

基本上，您可以尽力处理这种情况，但调用应用程序有责任添加此标志并适当地处理这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T16:07:20.897

在对此进行了很多混乱之后，似乎启动标志之类的东西确实无济于事。唯一真正的解决方案是跟踪我的应用程序何时从外部启动，并确保在这种情况下应用程序暂停时始终关闭完成。

通过始终完成 onPause，我确保调用应用程序始终得到某种响应。在操作中断的情况下，我只是将“取消”的结果传回。

# python - 验证日期（格式和值）

> ID：10002587
> 
> 赞同：1
> 
> 时间：2012-04-03T22:51:46.020
> 
> 标签：python, regex, validation, date, if-statement

我读了这个并且很感兴趣：[Validating date format using regular expression](https://stackoverflow.com/questions/8173548/validating-date-format-using-regular-expression)

所以我开始编写自己版本的日期验证功能，我想我很接近，但并不完全，我想要一些建议和提示。我花了很多时间尝试调整功能。

```
import re
import datetime

# Return True if the date is in the correct format
def checkDateFormat(myString):
    isDate = re.match('[0-1][0-9]\/[0-3][0-9]\/[1-2][0-9]{3}', myString)
    return isDate

# Return True if the date is real date, by real date it means,
# The date can not be 00/00/(greater than today)
# The date has to be real (13/32) is not acceptable
def checkValidDate(myString):
    # Get today's date
    today = datetime.date.today()
    myMaxYear = int(today.strftime('%Y'))

    if (myString[:2] == '00' or myString[3:5] == '00'):
        return False

    # Check if the month is between 1-12
    if (int(myString[:2]) >= 1 or int(myString[:2]) <=12):
        # Check if the day is between 1-31
        if (int(myString[3:5]) >= 1 or int(myString[3:2]) <= 31):
            # Check if the year is between 1900 to current year
            if (int(myString[-4:]) <= myMaxYear):
                return True
    else:
        return False

testString = input('Enter your date of birth in 00/00/0000 format: ')

# Making sure the values are correct
print('Month:', testString[:2])
print('Date:', testString[3:5])
print('Year:', testString[-4:])

if (checkDateFormat(testString)):
    print('Passed the format test')
    if (checkValidDate(testString)):
        print('Passed the value test too.')
    else:
        print('But you failed the value test.')
else:
    print("Failed. Try again") 
```

**问题1：**`int(myString[3:5])`当我想比较它是否有效时，还有其他方法（更好）吗？感觉我的方法很重复，而且这个函数必须要00/00/0000，不然会坏掉。因此，从这个意义上说，该功能并不是那么有用。尤其是我处理我的方式`00/01/1989`，只是简单地比较`if`他们确实是`00`。

**问题2：**有很多`if`语句，不知道有没有更好的方法来编写这个测试？

我想了解更多关于 python 编程的知识，任何建议或建议将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T23:12:16.417

像 python 中的许多东西一样，已经有检查日期的基本功能。假设您不只是将其作为一项学术练习，那么验证日期的最直接方法就是尝试创建它。

```
import datetime

minyear = 1900
maxyear = datetime.date.today().year

mydate = '12/12/2000'
dateparts = mydate.split('/')
try:
    if len(dateparts) != 3:
       raise ValueError("Invalid date format")
    if int(dateparts[2]) > maxyear or int(dateparts[2]) < minyear:
       raise ValueError("Year out of range")
    dateobj = datetime.date(int(dateparts[2]),int(dateparts[1]),int(dateparts[0]))
except:
    // handle errors 
```

如果给 datetime.date 一个无效的日期，它会抱怨，例如：

```
datetime.date(2000,45,23)

Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    datetime.date(2000,45,23)
ValueError: month must be in 1..12 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-31T16:22:52.927

```
from dateutil.parser import *
parse("1993-09-01")
datetime.datetime(1993, 9, 1, 0, 0) 
```

如果格式不正确，则会引发 ValueError，您可以使用 try..catch 捕获它们，以免应用程序意外关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T13:53:46.190

我知道学术练习有一些价值。我不会劝阻他们。

我还认为学习 Python 的很大一部分是发现已经解决了哪些问题。我有这样的想法有几个原因。首先，我认为重新发明轮子是浪费时间。我也有机会学习代码和解决问题的不同方法。最后，我认为一个长期存在的解决方案不太可能天真地对待主题中的怪癖。

考虑到这一点，我推荐 dateutil 库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-02T15:38:35.157

根据上面的一些答案，我编写了一小段代码，它以以下格式验证日期：DD/MM/YYYY。

```
date = "29/02/2016"

min_year = 1900
max_year = min_year + 200

days_31 = ['01', '03', '05', '07', '08', '10', '12']
days_30 = ['04', '06', '10', '11']
days_28 = ['02']

month_dict = {'01':'January',
      '02':'February',
      '03':'March',
      '04':'April',
      '05':'May',
      '06':"June",
      '07':'July',
      '08':'August',
      '09':'September',
      '10':'October',
      '11':'November',
      '12':'December'}

def validate(day, month, leap_year_or_not):
    if leap_year_or_not:
        max_day = 29
    else:
        max_day=28
    if month in days_28:
        if day > max_day:
            print "Invalid day: %s for month %s" %(day, month_dict[month])
            return False
        else:
            return True
    elif month in days_30:
        if day > 30:
            print "Invalid day: %s for month %s" %(day, month_dict[month])
            return False
        else:
            return True
    elif month in days_31:
        if day <= 31:
            return True
        else:
            print "Invalid day: %s for month %s" %(day, month_dict[month])
            return False
    else:
        print "Invalid month:%s, Invalid day:%s" %(month, day)
        return False

if len(date)!= 10:
    print "Invalid Format. Please enter date in DD/MM/YYYY"
else:
    day, month, year = date.split("/")
    if len(day) != 2:
        print "Length of day in not 2\. Please enter day as 01 for first!" 
    elif len(month) != 2:
        print "Length of month in not 2\. Please enter month as 01 for January!"
    elif len(year) != 4:
        print "Length of year in not 4\. Please enter year as 2001!"
    else:
        day=int(day)
        month=int(month)
        year=int(year)
        if day < 1 or day > 31:
            print "Day %s is not in range [1-31]" %str(day)
        else:
            if month < 1 or month > 12:
                print "Month %s is not in range [1-12]" %str(month)
            else:
                if year < min_year or year > max_year:
                    print "Year is not in range [%s-%s]" (str(min_year), str(max_year))
            else:
                if year%4 == 0:
                    leap_year = True
                else:
                    leap_year = False
                valid_day_month = validate(day, str(month).zfill(2), leap_year) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-01-09T03:11:56.823

```
import time
import datetime
self.date = raw_input('Enter the date to travel in (yyyy-mm-dd) format: ')
try:
    valid_date = time.strptime(self.date, '%Y-%m-%d')
    today_date=str(datetime.date.today())
    if self.date<today_date:
        print "date got over"
    else:
        print " "
except ValueError:
print('Invalid date!') 
```

# c# - Microsoft 语音识别 - 我必须添加什么参考？

> ID：10002591
> 
> 赞同：8
> 
> 时间：2012-04-03T22:52:12.493
> 
> 标签：c#, speech-recognition, kinect

我正在尝试制作一个使用 Microsoft Speech Recognition API（使用 Kinect）的 C# 程序，但我很难开始。我有使用语句

```
using Microsoft.Speech.AudioFormat;
using Microsoft.Speech.Recognition; 
```

但它给了我错误“名称空间'Microsoft'中不存在类型或名称空间名称'Speech'。您是否缺少程序集引用？”

有谁知道要添加什么？System.Speech 不能解决问题。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-03T23:03:32.437

确保将此程序集添加到您的项目中：C:\Program Files\Microsoft SDKs\Speech\v11.0\Assembly\Microsoft.Speech.dll。

更多细节可以在[MSDN上找到](http://msdn.microsoft.com/en-us/library/hh855387.aspx)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-04T01:00:46.880

我认为存在一些混淆，因为您使用的是 Kinect SDK，这里的一些答案与相关的 SDK（.net 中的 System.Speech 和随各种 Microsoft 服务器产品和服务器语音平台一起分发的 Microsoft.Speech）有关. 从您在其他答案中的评论看来，Kinect SDK 使用 Microsoft.Speech 命名空间，并且您的应用程序必须引用 Kinect SDK 附带的 Microsoft.Speech.dll。

只是为了帮助澄清一些事情（我希望）：

System.Speech 是核心 .net API 和实现它的识别器，包含在 Windows 7 中。它是客户端或桌面识别器，可以针对特定用户进行培训，并包括听写语法。

Microsoft.Speech 是一个类似但有点不同的 .net API。实现 Microsoft.Speech 的识别器是各种服务器产品的一部分，例如[UCMA](http://www.microsoft.com/download/en/details.aspx?id=15417)和[Microsoft Server Speech Platform](http://www.microsoft.com/download/en/details.aspx?id=27226)。

正如您所指出的，Microsoft.Speech 也是用于 Kinect 识别器的 API。这记录在评论[Speech C# How To (Kinect)](http://msdn.microsoft.com/en-us/library/hh855387.aspx)中提到的 MSDN 链接 Philipp Schmid 中。我没有使用过 Kinect，但这是有道理的，因为识别器不需要说话者培训。

这些资源有点过时，因为早于 Kinect，但它们可能会有所帮助：

Microsoft.Speech 和 System.Speech 相似，但不同。请参阅[System.Speech.Recognition 和 Microsoft.Speech.Recognition 有什么区别？](https://stackoverflow.com/questions/2977338/what-is-the-difference-between-system-speech-recognition-and-microsoft-speech-re)

要开始使用 .NET 演讲，几年前在[http://msdn.microsoft.com/en-us/magazine/cc163663.aspx](http://msdn.microsoft.com/en-us/magazine/cc163663.aspx)上发表了一篇非常好的文章。这可能是迄今为止我发现的最好的介绍性文章。它有点过时了，但很有帮助。（AppendResultKeyValue 方法在 beta 之后被删除。）本文展示了 System.Speech 命名空间，但其中大部分可以直接映射到 Microsoft.Speech。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-04T13:29:37.530

你需要这样做，这对我有用。

从以下位置导入 Microsoft.Speech.dll：

```
C:\Windows\assembly\GAC_MSIL\Microsoft.Speech\11.0.0.0__31bf3856ad364e35\Microsoft.Speech.dll 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-03T23:03:14.720

请尝试使用`System.Speech.Recognition`命名空间。`Microsoft.Speech.Recognition`命名空间是 Office Communications Server 产品的一部分。

帮助链接：[System.Speech.Recognition](http://msdn.microsoft.com/en-us/library/ms554855%28v=vs.85%29.aspx)

Office Communications Server（UCMA 应用程序）[UCMA 语音 SDK](http://msdn.microsoft.com/en-us/library/dd266409%28v=office.13%29.aspx)

# arrays - applescript 重复循环会立即反映变化吗？

> ID：10002594
> 
> 赞同：0
> 
> 时间：2012-04-03T22:52:33.597
> 
> 标签：arrays, loops, applescript

我正在编写一个脚本来打开一个目录中的多个文件夹，但它没有按计划工作。我已经尝试过勾勒它并一步一步地走一遍，假装我是执行它的计算机，但是当我运行它时，结果却大不相同。

它使用重复和重复很多。只要某个数组（我的意思是列表）中有任何内容，重复就会重复，并且重复在第一个重复的内部，它会重复它自己的循环，当时数组中的所有内容。

现在，repeat with 循环的动作之一是更改数组。我认为这不会改变循环吗？

例子

（折叠列表为 A、B、C）

```
repeat until {}
repeat with folder_name in foldList
do something
set foldList to 1, 2, 3
end repeat
end repeat 
```

我会认为这样做是将第一个循环作为“A”进行迭代，但在结束之前它会将 foldList 更改为 1、2、3。所以我认为不是通过下一个循环作为“B”会改为“1”。

但如果它这样做了，那么我认为我的手动演练不会有太大的偏差。因此，我假设在 Applescript 中，当您重复使用时，无论更改列表，您都会在第一个列表的最后一项上结束循环（在替换列表之前）。这是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:17:18.643

这将帮助您找到每个循环的价值。

```
set foldList to {"A", "B", "C"}
repeat 3 times
repeat with folder_name in foldList
    display dialog folder_name
    set foldList to {1, 2, 3}
end repeat
end repeat 
```

版本 2：

```
set foldList to {"A", "B", "C"}
repeat 3 times
repeat with i from 1 to count of foldList
    display dialog item i of foldList
    set foldList to {1, 2, 3}
end repeat
end repeat 
```

# php - mod_rewrite /p/about => ?p=about

> ID：10002596
> 
> 赞同：-3
> 
> 时间：2012-04-03T22:52:41.040
> 
> 标签：php, mod-rewrite

我有一个关于 mod_rewrite 的具体问题：

当用户调用时：

> **www.test.com/p/about**

网络服务器应该在内部调用

> **www.test.com/?p=about**

访问网站的子页面。

但在地址栏中它仍然应该说

> **www.test.com/p/about**

这对 mod_rewrite 有可能吗？

**我没有解决的解决方案：**

1.  尝试

    > RewriteRule ^/?([-a-zA-Z0-9_+]+)$ index.php?p=$1 [L]

错误的效果，因为它只适用于：test.com/about，但我需要 test.com/p/about！

1.  尝试

    > 重写规则 ^p/([a-zA-Z]+)$ index.php?p=$1

错误：它重定向正确，但 html 文件上的路径错误：例如。/img/pic.png 现在是 /p/img/pic.png

非常感谢，斯蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:55:53.893

是的，这可以通过 mod_rewrite 实现：

```
RewriteRule ^p/([a-zA-Z]+)$ index.php?p=$1 
```

或者，更一般地说：

```
RewriteRule ^([a-zA-Z]+)/([a-zA-Z]+)$ index.php?$1=$2 
```

见：[http ://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

# node.js - 我无法让 npm 模块与 require 一起工作？

> ID：10002599
> 
> 赞同：0
> 
> 时间：2012-04-03T22:52:48.547
> 
> 标签：node.js, npm

我看到了其他问题，但我真的找不到答案来让它发挥作用。所以这里是：

节点 0.6.6 npm 1.1.15 win7 64bit

我做了什么：

*   安装**节点**“C:\Program Files (x86)\nodejs”
*   安装的**npm**解压到“C:\Program Files (x86)\nodejs”
*   从 cmd 运行：**npm install express；// 安装成功**（也安装了 -g, global）
*   在“C:\Users\Totty\node_modules”中创建了一个名为**express的文件夹，其中包含一些内容**
*   创建了**我的应用程序**：

    var app = require('express').createServer();

    app.get('/', function(req, res){ res.send('hello world'); });

    app.listen(3000);

*   运行我的应用程序：**节点“D:\Totty\NodeJS\projects\express01”**

*   收到错误：**找不到模块“快递”**

node.js:201 抛出 e；// process.nextTick 错误，或第一次滴答时发生“错误”事件 ^ 错误：在 Function._resolveFilename (module.js:334:11) at Function._load (module.js:279:25) 处找不到模块“express”在 Module.require (module.js:357:17) 在 Object.require (module.js:368:17) (D:\Totty\NodeJS\projects\express01\main.js:2:11) 在 Module._compile (module.js:432:26) 在 Object..js (module.js:450:10) 在 Module.在 Array.0 (module.js:470:10) 的 Function._load (module.js:310:12) 处加载 (module.js:351:31)

我想我必须对我的脚本/节点“说”才能查看“C:\Users\Totty\node_modules”文件夹，但我不知道如何......

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:15:58.683

尝试在您的应用程序文件夹中本地安装它：

```
cd D:\Totty\NodeJS\projects\express01
npm install express 
```

# python-3.x - 有没有更好的方法来标记 Python 3 中的空列表？

> ID：10002602
> 
> 赞同：0
> 
> 时间：2012-04-03T22:53:03.447
> 
> 标签：python-3.x, empty-list

我正在开发一个 Python 3 程序，它将实现顺序访问主文件。我有打开文件的代码工作正常，我发现自己使用哨兵值来防止空的主文件（在我遍历每一行之后）。有没有更 Pythonic 的方法来防止空列表？

`translist`是交易清单（即 1 Brown 123 Main St.）。 `masterlist`是主文件中当前名称-地址对的列表（即 Charlie 134 South St.）。

毫不犹豫地批评我的 python，这是我用它编写的第一个非一次性程序。还有，这个程序还没有完成，我还在计划实施修改和删除。

```
while(translist): #is not empty
    currentTransactions = [] #reset current transaction list
    currentTransactions.append(translist.pop(0)) #get the first transaction
    name = getName(currentTransactions[0])   

    #collect all transactions with same name
    for item in translist:
        if(getName(item) in name): #if names match
            currentTransactions.append(item) #add to the list of current transactions

    #then filter out the current transactions from the transactions list
    translist = [line for line in translist if line not in currentTransactions]

    #get ready to apply the current transaction
    if(masterlist):
        currentRecord = masterlist.pop(0)
    else: #the code should continue, but only insertions are valid
        currentRecord = -1 #sentinel value
        continue
    delete = bool() #false   

    if(currentRecord == -1 or getName(currentRecord) > name): 
        thisTransaction = currentTransactions.pop(0) #get the first transaction
        thisType = getTransactionType(thisTransaction) #and its type
        if(thisType == "insert"):
            masterlist = currentRecord.append(masterlist) #sticks the current record back on the front
            currentRecord = format(thisTransaction) #then prep for writing

    while(currentRecord != -1 and getName(currentRecord) < name): #while the name in the master list is not in our transactions
        masterfile.write(currentRecord)   #write it
        if masterlist: #is not empty
            currentRecord = masterlist.pop(0) #then move on to the next
    if not delete:
        masterfile.write(currentRecord) 
```

提前致谢！如果您需要更多信息或程序的完整代码，请发布。

# c++ - 检查 c++ 库的不同 stl 链接以追踪 gcc/osx 上的 std::vector 析构函数崩溃？

> ID：10002604
> 
> 赞同：5
> 
> 时间：2012-04-03T22:53:09.980
> 
> 标签：c++, macos, gcc, stl, linker

所以我最近开始研究一个大型软件项目，它使用 llvm-gcc 编译器在 OSX 上链接了几个静态和动态库。

我对 stl 有严重的问题。具体来说，非常简单的代码会崩溃。例如，在我的主项目中，以下代码会崩溃：

```
{
    std::vector< unsigned int > testvec;
    testvec.resize( 1 );
    testvec[0] = 0;
} 
```

退出范围时，它会在 std::vector< unsigned int > 析构函数内部崩溃，抛出一个 SIGABRT 并说尚未分配正在释放的内存。具体来说：

```
malloc: *** error for object 0x135e8fc30: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug 
```

这只发生在发布版本中 - 调试版本工作得很好。

我最好的猜测是，其中一个外部库与另一个使用不同内部存储器布局的 STL 版本相关联，因此它试图释放大小或类似的东西。

我已经在我链接的所有库上运行了 nm，其中一些库具有外部 stl 符号（具体来说，std::vector< unsigned int > 析构函数在 nm 输出中用 S 标记）。但我不知道哪一个是罪魁祸首。

有没有办法检查 .a 或 dylib 文件以追踪哪些文件链接到不同版本的 STL？

[编辑]

这看起来像是[两个静态库，两个不同的向量实现中描述的情况的真实示例，链接器会做什么？](https://stackoverflow.com/questions/1948204) 事实证明，链接器做了可怕、可怕的事情.. :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T04:43:13.200

我相信[`otool -L`](https://developer.apple.com/library/mac/#documentation/darwin/reference/manpages/man1/otool.1.html)这就是你要找的。这将列出程序使用的共享库。

您还应该检查您的包含路径。这似乎不太可能，但可能`#include <vector>`会引入非标准包含，其定义与标准库中的定义不匹配。

# java - 如何使用动画 gif 作为 JFrame 标题栏图标

> ID：10002610
> 
> 赞同：3
> 
> 时间：2012-04-03T22:53:40.900
> 
> 标签：java, animation, icons, jframe, titlebar

是否可以使用动画 .gif 图像作为 JFrame 的图标？

例子：

```
public class myFrame extends JFrame
{
    java.net.URL imgURL = getCLass().getResource("/icons/AnimatedGif.gif");
    ImageIcon icon = new ImageIcon(imgURL);

    this.setIconImage(icon.getImage());
    icon.setImageObserver(this);

    ...
} 
```

这种方法对我不起作用。应用程序在使 JFrame 可见之前挂起。尽管使用常规的 .gif 图标，但一切正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T00:53:16.080

不久前，我尝试通过将图标图像设置为动画 gif 来使 JFrame 的图标动画化。我永远无法让它发挥作用。不过，我想出了一个解决方法。不保证正确性或线程安全。

基本思想是有一个单独的线程来处理图标动画。该线程的工作是不断设置框架的图标图像。

这是一个演示框架：

```
import java.awt.EventQueue;
import javax.swing.JFrame;

public class FrameWithAnimatedIcon extends JFrame
{
public static void main(String[] args)
{
    final FrameWithAnimatedIcon frame = new FrameWithAnimatedIcon();
    EventQueue.invokeLater(new Runnable()
    {
        public void run()
        {
            try
            {
                frame.setVisible(true);
            } catch(Exception e)
            {
                e.printStackTrace();
            }
        }
    });

    IconAnimator animator = new IconAnimator(frame, Images.images, 250);
    animator.run();
}

public FrameWithAnimatedIcon()
{
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 450, 300);

}
} 
```

这是图标动画师类：

```
import java.awt.Image;
import java.util.ArrayList;
import javax.swing.JFrame;

public class IconAnimator
{

JFrame           frame = null;
ArrayList<Image> images;
long             msBetweenImages;

public IconAnimator(JFrame frame, ArrayList<Image> images, long msBetweenImages)
{
    this.frame = frame;
    this.images = images;
    this.msBetweenImages = msBetweenImages;
}

public void run()
{
    while(true)
    {
        for(Image image : images)
        {
            try
            {
                frame.setIconImage(image);

                Thread.sleep(msBetweenImages);

            } catch(InterruptedException e)
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            if(frame == null)
            {
                return;
            }
        }
    }
}
} 
```

使用这个 IconAnimator 类，我可以给它目标帧、图像列表和图像之间的时间，它会为 JFrame 图标设置动画。我想这段代码可能不是“最佳实践”材料，但是，它可以工作。关于实现的附带说明，我创建了一个名为 Images 的单独类，它只是将我的图像加载到 ArrayList 中。每张图片为 16x16。该类的列表声明如下所示：

```
public static ArrayList<Image> images = new ArrayList<Image>(){{
   add(Toolkit.getDefaultToolkit().getImage(
       Images.class.getResource("/toolbarButtonGraphics/development/Bean16.gif")));

   add(Toolkit.getDefaultToolkit().getImage(
           Images.class.getResource   ("/toolbarButtonGraphics/development/Application16.gif"))); 

   add(Toolkit.getDefaultToolkit().getImage(
           Images.class.getResource("/toolbarButtonGraphics/development/Applet16.gif"))); 

   add(Toolkit.getDefaultToolkit().getImage(
           Images.class.getResource("/toolbarButtonGraphics/development/WebComponent16.gif"))); 
}}; 
```

# c - 如何使用 netsnmp_query_walk() 或 netsnmp_query_get()？

> ID：10002612
> 
> 赞同：2
> 
> 时间：2012-04-03T22:53:49.717
> 
> 标签：c, linux, net-snmp

我已成功使用以下内容从本地 snmpd 读取一些简单的 SNMP 值：

```
snmp_open( &session )
snmp_pdu_create( SNMP_MSG_GET );
snmp_add_null_var( pdu, oid, len ); // multiple lines like this
snmp_sync_response( ss, pdu, &response );
for ( netsnmp_variable_list *vars = response->variables; vars; vars = vars->next_variable )
{
    // look at vars->name, vars->name_length, and vars->val.integer
} 
```

虽然这适用于一些简单的整数标量，但我还需要阅读一些表格。我已经在 snmp_add_null_var() 中尝试了表的 OID 和表条目的 oid，但是 snmp_sync_response() 返回一个错误代码，指示找不到 OID。

所以浏览头文件我遇到了这些调用。我怀疑其中之一可能是我想要使用的：

1.  `netsnmp_query_walk()`
2.  `netsnmp_query_get()`

但是，我不知道如何使用它们。这是我尝试过的：

```
netsnmp_variable_list *vb = (netsnmp_variable_list*)SNMP_MALLOC_TYPEDEF( netsnmp_variable_list );
if ( vb == NULL ) ...
snmp_set_var_objid( vb, oid, len );
int rc = netsnmp_query_walk( vb, ss );
//int rc = netsnmp_query_get( vb, ss ); 
```

...但是在这一点上， rc 总是 == -1 我猜这意味着有一个错误。我该如何使用这些，或者，我应该使用更好的 API 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T01:15:01.253

我怀疑有几个问题。首先是这一行：

```
snmp_pdu_create( SNMP_MSG_GET ); 
```

如果我考虑使用`SNMP_MSG_GETBULK`. 但事实证明，我连接的 SNMP 服务器仅支持 SNMPv1，而 GETBULK 特定于 SNMPv2+，所以我没有费心去挖掘。

相反，我发现如何使用 GETNEXT，它可用于一次遍历表一个变量。以下是代码的工作原理：

```
oid = ....; // start with a known OID, like the table you want to read
while ( true )
{
    pdu = snmp_pdu_create( SNMP_MSG_GETNEXT );
    snmp_add_null_var( pdu, oid, len );
    status = snmp_synch_response( ss, pdu, reply );
    if ( status != STAT_SUCCESS )
    {
        // either an error, or there is nothing left to read
        snmp_free_pdu( reply );
        break;
    }
    for ( netsnmp_variable_list *vars=reply->variables; vars; vars=vars->next_variable )
    {
        // make sure you remember this OID so you know what to use
        // when you get back to the top of the while() loop
        oid = ...vars->name[], vars->name_length...;

        // do something with this snmp value, such as:
        std::cout << oid << ": " << *vars->val.integer << std::endl;
    }
    snmp_free_pdu( reply );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:19:39.327

对于 snmpget 使用这一行 => pdu = snmp_pdu_create( SNMP_MSG_GET ); 对于 snmpwalk 使用这一行 => pdu = snmp_pdu_create( SNMP_MSG_GETNEXT ); 其余代码相同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-23T21:30:03.127

在查看了 snmpwalk 的代码后，我得到了一个如何在代码中执行此操作的简单示例。

```
#include <net-snmp/net-snmp-config.h>
#include <net-snmp/net-snmp-includes.h>
#include <string.h>

void
snmp_get_and_print(netsnmp_session * ss, oid * theoid, size_t theoid_len)
{
    netsnmp_pdu    *pdu, *response;
    netsnmp_variable_list *vars;
    int             status;

    pdu = snmp_pdu_create(SNMP_MSG_GET);
    snmp_add_null_var(pdu, theoid, theoid_len);

    status = snmp_synch_response(ss, pdu, &response);
    if (status == STAT_SUCCESS && response->errstat == SNMP_ERR_NOERROR) {
        for (vars = response->variables; vars; vars = vars->next_variable) {
            print_variable(vars->name, vars->name_length, vars);
        }
    }
    if (response) {
        snmp_free_pdu(response);
    }
}

int main(int argc, char ** argv)
{
    netsnmp_session session, *ss;
    netsnmp_pdu *pdu, *response;
    netsnmp_variable_list *vars;

    oid             name[MAX_OID_LEN];
    size_t          name_length;
    oid             root[MAX_OID_LEN];
    size_t          rootlen;
    oid             end_oid[MAX_OID_LEN];
    size_t          end_len = 0;
    int             count;
    int             running;

    int status = STAT_ERROR;;

    init_snmp("snmpwalk");

    snmp_sess_init( &session );
    session.peername = strdup("SNMP.device.domain");

    //session.version = SNMP_VERSION_1;
    session.version = SNMP_VERSION_2c;

    session.community = "public";
    session.community_len = strlen(session.community);

    SOCK_STARTUP;
    ss = snmp_open(&session);

    if (!ss) {
      snmp_sess_perror("ack", &session);
      SOCK_CLEANUP;
      exit(1);
    }

    rootlen = MAX_OID_LEN;
    if (snmp_parse_oid("RFC1213-MIB::ifIndex", root, &rootlen) == NULL) {
        snmp_perror("RFC1213-MIB::ifIndex");
        exit(1);
    }

    memmove(end_oid, root, rootlen*sizeof(oid));
    end_len = rootlen;
    end_oid[end_len-1]++;

    memmove(name, root, rootlen * sizeof(oid));
    name_length = rootlen;

    running = 1;

    while (running) {
        // create PDU for GETNEXT request and add object name to request
        pdu = snmp_pdu_create(SNMP_MSG_GETNEXT);
        snmp_add_null_var(pdu, name, name_length);

        status = snmp_synch_response(ss, pdu, &response);

        if (status == STAT_SUCCESS) {
            if (response->errstat == SNMP_ERR_NOERROR) {
                // check resulting variables
                for (vars = response->variables; vars;
                     vars = vars->next_variable) {
                    if (snmp_oid_compare(end_oid, end_len,
                        vars->name, vars->name_length) <= 0) {
                        //not part of this subtree
                        running = 0;
                        continue;
                    }
                    print_variable(vars->name, vars->name_length, vars);
                    memmove((char *) name, (char *) vars->name,
                       vars->name_length * sizeof(oid));
                    name_length = vars->name_length;
                }
            }
        }
        if (response)
            snmp_free_pdu(response);
    }

    snmp_close(ss);

    SOCK_CLEANUP;
    return (0);

} // main() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-29T14:44:28.983

我花了一段时间才弄清楚这一点，因为该函数的文档很少。不管你是对的，它比使用较低级别的函数要优雅得多。

您只需打开会话，初始化一个 NULL varlist，然后使用 snmp_varlist_add_variable 填充 oid 和 oid_len。

```
ss = snmp_open(&session);
if (!ss) {
    snmp_sess_perror("snmp_open", &session);
    exit(STATUS_UNKNOWN);
}

/* Walk Indexes */
snmp_varlist_add_variable(&hrprload_var, hrprload_oid, hrprload_len, ASN_NULL, NULL, 0);

query_status = netsnmp_query_walk(hrprload_var, ss);
if (query_status != SNMP_ERR_NOERROR) {
    if (query_status == STAT_TIMEOUT) {
        fprintf(stderr, "Timeout: No Response from %s\n", ss->peername);
    } else {
        fprintf(stderr, "Error in packet: %s\n", snmp_api_errstring(ss->s_snmp_errno));
    }
    exit(STATUS_UNKNOWN);
} 
```

现在您可以使用已填充查询结果的 varlist。比乱搞 PDU 要干净得多。

# php - Kohana 3.2 - 我想获得不同的日期

> ID：10002613
> 
> 赞同：0
> 
> 时间：2012-04-03T22:53:54.220
> 
> 标签：php, kohana, kohana-orm, kohana-3.2

所以我有一张桌子，上面有以下内容：

1.  ID
2.  transaction_timestamp (TIMESTAMP CURRENT_TIMESTAMP)

我想使用 Kohana ORM 从交易时间戳中获取不同的日期我有一个名为`Model_Transactions`

如果我这样做

```
Model_Transactions::factory('transactions')->find_all(); 
```

我得到所有数据。我将如何只获得不同的日期，因为我会将它用作档案。我不希望用户单击存档并返回一个空白表。

例如：用户点击“2012 年 4 月 1 日”，因为 4 月 1 日没有交易，有一个空白表，我想避免这些情况，如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T00:16:53.340

ORM 模型应该代表表中的单个条目。使用 ORM find_all() 它会想要选择表中的所有属性。由于您的 id 应该是唯一的，因此每一行本质上都是不同的。

如果您只想获取不同 transaction_timestamp 值的列表，您可以在模型中添加一个方法来检索它。就像是：

```
public function get_distinct_timestamps()
{
    return DB::select('transaction_timestamp')
            ->from($this->_table_name)
            ->distinct('transaction_timestamp')
            ->execute()
            ->as_array();
} 
```

然后你可以使用：

```
$timestamps = Model::factory('transactions')->get_distinct_timestamps();
foreach($timestamps as $timestamp)
{
    $value = $timestamp['transaction_timestamp'];
} 
```

当然这只是一个例子。您可能不想返回一个数组。但您不仅限于使用 ORM 查询方法。

获取具有不同 transaction_timestamp 的 ORM 对象的另一个选项是：

```
Model_Transactions::factory('transactions')
    ->group_by('transaction_timestamp')
    ->find_all(); 
```

# php - Zend MVC 页面结构和布局链接的路径

> ID：10002617
> 
> 赞同：0
> 
> 时间：2012-04-03T22:54:13.023
> 
> 标签：php, zend-framework

我有一个使用布局的工作 zend mvc 应用程序，并且此布局使用外部样式表和脚本。站点中的每个页面都有自己的控制器，每个页面的页面特定内容都在其 index.phtml 文件中。布局有效，并且所有脚本/样式表都正确应用于每个控制器的 index.phtml。

例如，主页是“mvcProject/”，它调用索引控制器的索引操作，该操作使用对应于索引控制器的 index.phtml 文件。此外，关于我们的页面是“mvcProject/about”，它调用about 控制器并显示views/about/index.phtml。主观上我觉得这种结构效率低下。这个网站的内容只有html，我看不出为什么每个页面都需要自己的控制器。

因此，我尝试只使用一个控制器来达到相同的目的，即具有相同的架构，方法是在单个索引控制器中为每个页面提供自己的操作。所以现在“关于我们”页面是“mvcProject/index/about”，以便索引控制器会调用将使用views/index/about.phtml 文件的about 操作。

这种方法破坏了布局中所有指向外部脚本/样式表的链接。布局仍然有效，但链接的路径都不起作用。显然，这是一个与路径相关的问题，但我对 zend 还是比较陌生，所以我不确定如何解决这个问题。因此，我回去并再次给每个页面它自己的控制器。

所以我的问题有两个方面：我是否需要关注避免给每个页面提供自己的控制器的臃肿，如果我确实需要缩小这个结构，我需要调整什么来纠正链接的路径？感谢您的考虑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:28:21.663

现在忽略关于框架/控制器数量的讨论是过分的。您的脚本/css 失败的原因确实是路径问题。如果您正在使用布局助手，那么您应该在视图中使用 headLink 和 headScript 对象。

这是我在开发时设置所需的脚本和 css 文件的首选方式。

**引导程序.php**

```
protected function _initView()
{
    // Initalise the view
    $view = new Zend_View();
    $view->doctype('HTML5');

    // Get config options for the UI
    $ui = $this->getApplication()->getOption('ui');

    $view->headTitle($ui['title']);

    foreach ($ui['stylesheet'] as $stylesheet) {
        $view->headLink()->appendStylesheet($stylesheet);
    }

    foreach ($ui['script'] as $script) {
        $view->headScript()->appendFile($script);
    }

    $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper(
            'ViewRenderer'
    );
    $viewRenderer->setView($view);

    return $view;
} 
```

**配置/应用程序.ini**

```
ui.title = "My Awesome Web App"
ui.stylesheet[] = "/extjs/resources/css/ext-all.css"
ui.stylesheet[] = "/resources/css/hod.css"
ui.stylesheet[] = "/resources/css/icons.css"
ui.stylesheet[] = "/resources/bootstrap/css/bootstrap.css"
ui.script[] = "extjs/ext-debug.js"
ui.script[] = "app.js" 
```

**布局/default.phtml**

```
<?php echo $this->doctype(); ?>
<html>
<head>
    <?php
    echo $this->headTitle();
    echo $this->headMeta();
    echo $this->headStyle();
    echo $this->headScript();
    echo $this->headLink();
    ?>
</head>

<body>
    <?php echo $this->layout()->content; ?>
</body>
</html> 
```

这允许您在开发模式下设置您需要的所有脚本，并在配置中设置生产中的缩小脚本，而无需编写任何额外的代码。

回到矫枉过正的问题。我认为即使您没有与数据库的连接以及应用程序中的所有花里胡哨，从维护的角度来看，使用框架仍然是最好的方法（一旦您掌握了) 如果您的页面超过 5 或 6 页。除非您的网站将看到大量流量并且每个字节或毫秒都很重要，否则我认为降低框架增加的小开销的可维护性没有意义。

同样的逻辑也适用于我的控制器。当它们有助于明确划分工作功能时，我不明白为什么要减少它们的数量。另外，除非您更改路由器 site.com/index/about 看起来比 site.com/about 更丑 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:34:12.837

我不确定您的路径和 url 是如何在您的视图中创建的，但是您使用 baseUrl 助手吗？$this->baseUrl( [文件] )

# c# - 如何从锚标签回发

> ID：10002623
> 
> 赞同：0
> 
> 时间：2012-04-03T22:54:38.217
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我有一个 achor 标记，我想从该标记回发到我的控制器操作。

```
@using (Html.BeginForm("ActionName","Home",FormMethod.Post))
        {        
            <div class="toolbar_button">                        
                @{

                    var Route = Url.Action("ActionName", "Home");
                    var Anchor = MvcHtmlString.Create(String.Format("<a href=\"\"><img src=\"../../Content/Images/image.png\"></img>stringname</a>"));
                 }
                @Anchor
            </div>
        } 
```

我确实有一个控制器功能，它定义了

```
[HttpPost]
public ActionResult ActionName(viewModel)
{
} 
```

每当我单击锚标记时，它都不会执行此操作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:58:11.350

如果页面上只有一个表单，则可以将 onclick 处理程序添加到 A-tag：document.forms[0].submit()

实现此目的的另一种首选方法是添加类型为 submit 的输入元素：

```
<input type="submit" value="Submit Form" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T23:02:35.653

您不能使用纯链接发布。

这里有一些选项：

*   提交表单（使用提交按钮或 JavaScript - 在表单上调用提交 - 等）
*   AJAX... 示例：[http ://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# charts - 使用 VBA 将多个数据系列添加到 Excel 图表

> ID：10002624
> 
> 赞同：4
> 
> 时间：2012-04-03T22:54:38.757
> 
> 标签：charts, excel, vba

假设我有我的数据行，我想从中创建一个图表（x，y 散点图）。

```
date    1.1\. 1.2\. 1.3\. 1.4 1.5
set1    12  36  12  23  33
set2    44  22  11  1   13
set3    54  5   56  56  34
set4    1   2   6   12  33 
```

如何将 set1、set2 和 set4 而不是 set3 添加到图表中，而不必一个接一个地单独选择它们？

对于 x 范围（日期），我可以做

```
Dim xrange As Range
Set xrange = Application.InputBox("select x-range", "Get Range", Type:=8) 
```

但是对数据集（选择多行）做同样的事情是行不通的，因为散点图中的每个系列都需要一个单独的范围

```
 ActiveChart.SeriesCollection(1).XValues = xrange
   ActiveChart.SeriesCollection(1).Values = "=Sheet1!$4:$4" 
```

但我有多个数据集的选择。我需要一种方法来从我的输入框选择中拆分范围并将它们写入唯一变量。然后我会使用上述方法为每个 xrange + 变量对添加一个新系列。

有没有办法做到这一点？

潜在的答案不需要坚持我上面发布的内容，欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T23:56:22.320

设置源数据范围。Excel 将自动为您创建系列。在下面的示例中，我将 A 列为 X，将 B 列为 Y1，将 D 列为 Y2：

```
ActiveChart.SetSourceData Source:=Range("A1:B4,D1:D4") 
```

# r - ggplot2 0.9.0 自动从情节图例中删除未使用的因子水平？

> ID：10002627
> 
> 赞同：40
> 
> 时间：2012-04-03T22:55:17.483
> 
> 标签：r, ggplot2

我最近从 0.8.9 版本升级到 ggplot2 0.9.0，现在我知道我的情节图例只显示情节中使用的因子水平（它省略了未使用的因子水平）。在它包含图例中的所有因子水平之前。我正在运行 Windows 7 和 R 2.15.0（今天之前的 2.14.2）。

其他人也发现这个吗？有没有办法让未使用的因子水平显示在我的情节图例中？

```
library(ggplot2)

df <- data.frame(fruit = rep(c("apple", "orange"), times=11), 
                 year = 1990:2011, 
                 qty = rnorm(22, 100, 20))

# This plot only gives "apple" in the legend now.
# Before, I used to get both "apple" and "orange". 
qplot(year, qty, data = subset(df, fruit=="apple"), colour = fruit) 
```

qplot() 在传说中曾经给我“苹果”和“橙色”（即使只有“苹果”的点）。现在我只在传说中得到“苹果”。

出现这种情况的原因 - 我正在制作许多数据集子集的图，我希望图例跨图标准化（通常我会欣赏未使用的级别被自动删除而不必键入 droplevels()，但这是一个情况下我想要那些未使用的级别）。如果这只是我的计算机本地的问题，我们深表歉意。

* * *

**编辑**：请注意，从 R 4.0.0 开始，上述代码不再产生 a`df$fruit`作为因素，这会改变`ggplot`下面问题和答案中的行为。重现使用：

```
df <- data.frame(
  fruit = factor(rep(c("apple", "orange"), times=11)), 
  year = 1990:2011, 
  qty = rnorm(22, 100, 20)
) 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-03T23:04:55.320

是的，您想添加`drop = FALSE`到您的色标：

```
ggplot(subset(df,fruit == "apple"),aes(x = year,y = qty,colour = fruit)) + 
    geom_point() + 
    scale_colour_discrete(drop = FALSE) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-08-18T21:23:22.093

第二种方法是使用`limits`参数显式定义所需的条目：

```
ggplot(subset(df,fruit == "apple"),aes(x = year,y = qty,colour = fruit)) + 
    geom_point() + 
    scale_colour_discrete(limits = c("apple", "orange")) 
```

# python - wxPython 应用程序在 OSX 中完全不可见

> ID：10002631
> 
> 赞同：0
> 
> 时间：2012-04-03T22:55:35.800
> 
> 标签：python, user-interface, wxpython

我有一个使用 wxPython 作为 GUI 的 Python 应用程序。它在 Windows XP 机器上运行良好，但我需要在我的 Mac 上处理它。

在 OSX 上，运行 main.py 可以工作，它会打开一个名为“Python”的窗口（并保持进程在终端中运行）。但是，在 XP 中 Python 窗口有 GUI 的地方，OSX 版本是完全不可见的。什么都没有显示（但应用程序肯定是打开的。在“不可见窗口”中按回车会导致终端中的预期响应）

我可能需要添加/修改什么才能使任何内容实际显示在 OSX 上？除了指定的字体（'MS Shell Dig 2'）外，窗口初始化代码似乎都与操作系统无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:38:57.903

你有一个`wx.Panel`作为你的框架的主要孩子吗？在主框架中创建一个面板，并将其余控件添加到该面板而不是框架本身。我记得有一些与您类似的问题以这种方式解决。

快速展示这个想法的东西：

```
import wx

class MainWindow(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)
        self.panel = wx.Panel(self)
        # Add other controls to the main panel, not the frame
        self.text = wx.TextCtrl(self.panel) 
        self.Show()

app = wx.App(False)
win = MainWindow(None)
app.MainLoop() 
```

# c# - 从 Unity 中的另一个脚本访问对象的位置

> ID：10002634
> 
> 赞同：3
> 
> 时间：2012-04-03T22:55:59.417
> 
> 标签：c#, unity3d

我正在用一个球和一个球员做一场比赛。到目前为止，我为球制作了一个球体，为玩家制作了一个正方形（稍后会制作模型）。我为玩家附加了一个运动脚本，以便它可以向各个方向移动，但我希望他能够在碰到球时捡起球。为此，我假设在球脚本中，在碰撞函数中，我必须将其位置更改为玩家的位置。所以我想知道：从球脚本中访问球员坐标的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T21:40:19.503

我希望我对你的理解是正确的。为了得到你会做的职位：

```
GameObject player = GameObject.Find ("Player");
Transform playerTransform = player.transform;
// get player position
Vector3 position = playerTransform.position; 
```

但是要捡起并带走球，您应该做育儿：

```
// ...
transform.parent = playerTransform;
// take care to disable physics while ball is under control of the player
rigidbody.isKinematic = true; 
```

这样您就不必在每次更新或固定更新时自己移动球了。如果球员后来丢球，只需通过设置球的`transform.parent = null`and来反转`isKinematic = false`。

# python - 用 'None' 替换子字符串 None

> ID：10002642
> 
> 赞同：0
> 
> 时间：2012-04-03T22:56:52.240
> 
> 标签：python, replace

我想在已经包含两者的 JSON 文件中将任何更改`None`为（注意单引号）。`'None'`

```
type: None or
type: 'None' 
```

我试过`"s/[']?None[']?/'None'/g"`了，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T23:06:41.783

既然您将 all 更改`None`为，那么仅使用该 json 字符串`'None'`会不会更容易？`str.replace`我会在两个过程中运行它，首先更改`'None'`为`None`，然后将所有更改`None`为`'None'`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T23:04:43.203

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T23:19:12.513

```
s/([^'])?(None)([^'])?/$1'$2'$3/g 
```

# mysql - MySQL将每个元组与相同关系中的其他元组进行比较

> ID：10002645
> 
> 赞同：0
> 
> 时间：2012-04-03T22:57:15.593
> 
> 标签：mysql, sql

关系：产品（制造商，型号，类型）笔记本电脑（型号，价格，速度，内存，高清，屏幕）PC（型号，价格，速度，内存，高清）打印机（型号，价格，颜色，价格）

我试图找到共享相同速度和相同内存的电脑。

我试过的：

```
SELECT model FROM pc WHERE pc.speed = pc.speed AND pc.ram = pc.ram; 
```

这又是（如果您从今天开始看到我的问题列表），这是错误的语法。

我想将 pc 中的每个元组与 pc 中的每个元组进行比较，并根据 pc 的速度和 ram 共享另一个来创建一个新的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:01:04.757

```
SELECT pc1.model, pc2.model 
FROM 
    pc pc1 
    JOIN pc pc2 
        ON pc1.speed = pc2.speed 
        AND pc1.ram = pc2.ram
        AND pc1.model <> pc2.model 
```

请注意，这将为每个匹配返回两行...`A <-> B`和`B <-> A`​​. 如果您想防止这种情况发生，您可以将查询更改为以下内容：

```
SELECT pc1.model, pc2.model 
FROM 
    pc pc1 
    JOIN pc pc2 
        ON pc1.speed = pc2.speed 
        AND pc1.ram = pc2.ram
        AND pc1.model > pc2.model 
```

# properties - 属性标题复制属性与继承自 MKAnnotation 的属性不匹配

> ID：10002647
> 
> 赞同：7
> 
> 时间：2012-04-03T22:57:16.033
> 
> 标签：properties, copy, title

这些是调用警告的行：@property (nonatomic, retain) NSString *Title; @property (nonatomic, 保留) NSString *Subtitle;

我的警告是：property 'title' 'copy' 属性与从 'MKAnnotation' 继承的属性不匹配

有任何想法吗？

提前致谢！

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface MapAnnotation : NSObject <MKAnnotation> {
    CLLocationCoordinate2D coordinate;
    NSString *title;
    NSString *subtitle;
    int listIndex;
}

@property (nonatomic) CLLocationCoordinate2D coordinate;
@property (nonatomic, retain) NSString *Title; 
@property (nonatomic, retain) NSString *Subtitle; 
@property (nonatomic) int listIndex;

@end 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-01T13:17:28.160

改变：

> @property (nonatomic, 保留) NSString *Title;

进入：

> @property (nonatomic, copy) NSString *title;

# php - 在 PHP 中，如何调用插入字符串的函数？

> ID：10002652
> 
> 赞同：16
> 
> 时间：2012-04-03T22:58:06.497
> 
> 标签：php

假设字符串是：

```
$str="abcdefg foo() hijklmopqrst"; 
```

如何让 php 调用 foo() 并将返回的字符串插入到该字符串中？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-11-25T20:27:49.543

如果您正在调用某个类的方法，则可以使用普通的变量扩展。例如：

```
<?php
class thingie {

  public function sayHello() {
    return "hello";
  }

}

$t = new thingie();
echo "thingie says: {$t->sayHello()}"; 
```

这将输出：

> thingie 说：你好

请注意，调用周围的大括号*是*必需的。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-03T22:59:57.587

只需使用这个：

```
$str = "abcdefg".foo()."hijklmnopqrstuvwxyz"; 
```

它将在字符串创建期间调用函数。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-05-03T12:08:59.823

```
function foo()
{
    return 'Hi';
}
$my_foo = 'foo';
echo "{$my_foo()}"; 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-04-03T23:08:26.020

```
$str="abcdefg foo() hijklmopqrst";
function foo() {return "bar";}

$replaced = preg_replace_callback("~([a-z]+)\(\)~", 
     function ($m){
          return $m[1]();
     }, $str); 
```

输出：

```
$replaced == 'abcdefg bar hijklmopqrst'; 
```

这将允许任何小写字母作为函数名。如果您需要任何其他符号，请将它们添加到模式中，即`[a-zA-Z_]`.

要**非常**小心您允许调用哪些函数。您至少应该检查 $m[1] 是否包含列入白名单的函数以不允许远程代码注入攻击。

```
$allowedFunctions = array("foo", "bar" /*, ...*/);

$replaced = preg_replace_callback("~([a-z]+)\(\)~", 
     function ($m) use ($allowedFunctions) {
          if (!in_array($m[1], $allowedFunctions))
              return $m[0]; // Don't replace and maybe add some errors.

          return $m[1]();
     }, $str); 
```

对`"abcdefg foo() bat() hijklmopqrst"`输出进行测试`"abcdefg bar bat() hijklmopqrst"`。

白名单方法的优化（从允许的函数名称动态构建模式，即`(foo|bar)`.

```
$allowedFunctions = array("foo", "bar");

$replaced = preg_replace_callback("~(".implode("|",$allowedFunctions).")\(\)~", 
     function ($m) {
          return $m[1]();
     }, $str); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-04-03T22:59:42.273

```
$foo = foo();
$str = "abcdefg {$foo} hijklmopqrst"; 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-02-07T14:03:10.557

要从双引号字符串中评估任意表达式，您可以推测变量函数：

```
<?php
// A user function
function foo() {
    return 'bar';
}

/**
 * The hack
 *
 * @param $v mixed Value
 * return mixed Value (untouched)
 */
$_ = function ( $v ) {
    return $v;
};

// Happy hacking
echo "Foo is {$_( foo() )} and the sum is {$_( 41 + 1 )}...{$_( str_repeat( ' arrh', 3 ) )}!"; 
```

结果：

```
Foo is bar and the sum is 42... arrrh arrrh arrrh! 
```

参考：

*   [https://secure.php.net/manual/en/functions.variable-functions.php](https://secure.php.net/manual/en/functions.variable-functions.php)
*   [https://secure.php.net/manual/it/language.types.string.php#language.types.string.parsing](https://secure.php.net/manual/it/language.types.string.php#language.types.string.parsing)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-10-18T06:30:13.123

它仍然不可能，有可用的黑客，但不是我推荐的，而是建议坚持使用老式点运算符，即`$str="abcdefg ". foo() ." hijklmopqrst";`

根据[复杂（卷曲）语法文档](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing.complex)

> 注意：
> {$} 中的函数、方法调用、静态类变量和类常量自 PHP 5 起就可以使用。但是，访问的值将被解释为定义字符串的范围内的变量名。使用单个花括号 ({}) 将无法访问函数或方法的返回值或类常量或静态类变量的值。

# dsl - 有哪些流行的 DSL？

> ID：10002658
> 
> 赞同：0
> 
> 时间：2012-04-03T22:58:27.517
> 
> 标签：dsl

我正在寻找流行的领域特定语言。我相信 CSS 是其中之一，而 XML/HTML 可能会合而为一？（尽管这似乎比语言更多的数据）。我唯一能想到的另一个是星际争霸地图编辑器......

有哪些流行的领域特定语言？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T16:34:48.013

特定领域语言的诀窍是您为特定问题领域定义自己的语言。或者，正如 Kerzhner (2009) 所说，*“DSL 是一种专门用于描述特定问题域的语言。”* [1]

从这个角度来看，HTML 是一个不好的例子，因为只有少数人为有问题的领域定义了 HTML，但更多的人将它用作设计网站的标准语言。

因此，问题也可能是：***是否有流行的语言来定义 DSL？***这些是定义其他语言的语言，即元语言。我认为围绕 Eclipse-Modeling Framework (EMF) 和 OMG 的 Meta-Object-Facility 的语言是最常见的两种语言。然而，GrGen 的元建模能力也令人印象深刻，而且可能更容易学习。

顺便说一句：在 Soley，我们正在构建用于开发特定领域语言的软件。[Soley Studio](https://www.soley.io/en/pr-soley-studio/)是一个集成开发环境，用于定义可用于建模和数据分析的基于图形的特定领域语言。

* * *

[1]：Kerzhner, AA 和 Paredis, CJJ (2009)。使用领域特定语言为基于模型的系统工程获取设计综合知识。ASME 2009 国际设计工程技术会议和计算机与工程信息会议，IDETC/CIE 2009。美国圣地亚哥。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T23:14:59.783

[SuperCollider](http://supercollider.sourceforge.net/)，或者特别是 SuperCollider 客户端 (sclang)，被认为是用于实时音频合成和算法组合的 DSL。此外，还有其他客户端实现，包括[ScalaCollider](https://github.com/Sciss/ScalaCollider)和[Overtone](http://overtone.github.com/)，它们分别使用 Scala 和 Clojure 与 SuperCollider 服务器通信。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-03T23:08:54.157

来自[维基百科](http://en.wikipedia.org/wiki/Domain-specific_language)：

> 特定领域语言的示例包括
> 
> *   HTML,
> *   儿童标志，
> *   Verilog 和 VHDL 硬件描述语言，
> *   Mata 用于矩阵编程，
> *   Mathematica 和 Maxima 用于符号数学，
> *   电子表格公式和宏，
> *   用于关系数据库查询的 SQL，
> *   用于创建解析器的 YACC 语法，
> *   用于指定词法分析器的正则表达式，
> *   用于创建图表语言的通用 Eclipse 建模系统，
> *   Csound 用于声音和音乐合成，
> *   以及 GraphViz 和 GrGen 的输入语言，用于图形布局和图形重写的软件包。

# excel - 下标超出范围

> ID：10002659
> 
> 赞同：2
> 
> 时间：2012-04-03T22:58:28.777
> 
> 标签：excel, vba, loops

我想看看为什么我会遇到这个问题。

```
Private Sub test()

Dim Row As Integer

For Row = 1 To 100

   'Loop through SummaryRange and ignore blanks but get document type'
    Dim documentTypes As String

    Dim myDocument As String, Column As Integer

    Column = 2

   'First get range from Summary'
    Sheets("Sheet1").Active

    If ActiveSheet.Cells(Row, Column).Value <> "" Then documentTypes = documentTypes + "," + ActiveSheet.Cells(Row, Column).Value

    Sheets("Sheet12").Active

    ActiveSheet.Range("B17").Value = documentTypes

Next Row

End Sub 
```

我试图遍历不同工作表中的范围，然后获取值，然后将它们连接成一个字符串并输出该字符串。

编辑：

删除了 SummaryRange，摆脱了超出范围的问题，但带来了一个`Object doesn't support this property or method`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:04:26.663

尝试改变

```
SummaryRange.Range("Row:Column").Value 
```

到

```
SummaryRange.Range(Row:Column).Value 
```

更新：尝试以下

```
Dim range As Range
Dim row As Range
Dim cell As Range

Set range = Range("B1:B100")

For Each row In range.Rows
   For Each cell in row.Cells

      'processing code
      'documentTypes = documentTypes + "," + cell.Value

      'etc...

   Next cell
Next row 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T00:33:33.537

尝试改变：

```
 Sheets("Sheet1").Active 
```

到：

```
 Sheets("Sheet1").Activate 
```

这同样适用于：

```
 Sheets("Sheet12").Active 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T01:09:42.577

虽然 bouvierr 已经回答了您现有的问题，但我注意到您实际上可以避免循环并更有效地做到这一点

此行
`strOut = Join(Application.Transpose(ws.Range("B1:B100")), ",")`
生成一个由 B1:B100 中的所有值组成的字符串，以逗号分隔

由于某些值可能为空，因此生成的字符串可能看起来像这样 `test,1,2,3,,,3,,afaff,,,,,,,,,,,`

所以我使用正则表达式将多个清理`,`为一个`'`

```
Sub QuickGrab()
Dim ws As Worksheet
Dim objRegex
Dim strOut As String

Set ws = Sheets("Sheet1")
strOut = Join(Application.Transpose(ws.Range("B1:B100")), ",")

Set objRegex = CreateObject("vbscript.regexp")
With objRegex
    .Pattern = ",{2,}"
    .Global = True
    strOut = .Replace(strOut, ",")
End With

MsgBox strOut
End Sub 
```

# c - 将一个链表指向另一个链表

> ID：10002660
> 
> 赞同：0
> 
> 时间：2012-04-03T22:58:28.717
> 
> 标签：c, pointers, linked-list, structure

我试图将一个结构中的指针指向另一个结构的节点。我已经被困在这10个小时了。有人可以帮我修复我的代码吗？我在`curr_users -> playlist = p_playlists;`. 我指错了吗？

```
struct playlist_ {
  int album;
  int track_num;
  struct playlist_ *next;
};
typedef struct playlist_  playlists;

struct users_ {
  int user_ID;
  struct playlist_ *playlist;
  struct users_ *next;
};
typedef struct users_ users;

int transaction(FILE *transaction_file,album *all_album){
  int transaction_id,i;
  int album_ID,
      account_number,
      add_playlist_user,
      add_playlist_album,
      add_playlist_track;

  users *head_users,*curr_users,*p_users,*users_pointer;
  playlists *head_playlists,*curr_playlists,*p_playlists,*playlist_pointer;

  head_users = NULL;

  fscanf(transaction_file,"%d\n",&account_number);

  /*Checks for empty list, if true creates the first user*/
  if( !(head_users)){
    p_users = malloc(sizeof(users ));
    p_users -> user_ID = account_number;
    head_users = p_users;
    head_users -> next = NULL;
    users_pointer = head_users;

  /*If list is not empty create new user and puts it in front of list*/
  }else{
    p_users = malloc(sizeof(users));
    p_users -> user_ID = account_number;
    curr_users = p_users;
    curr_users -> next = head_users;
    head_users = curr_users;
    users_pointer = head_users;
    }
  /*Create an empty playlist for user and set everything to null*/

  p_playlists = malloc(sizeof(playlists *));
  curr_playlists = p_playlists;
  curr_playlists -> album = 5;
  curr_playlists -> track_num = 5;
  curr_playlists -> next = NULL;
  curr_users -> playlist = p_playlists; 
```

运行此代码时收到的错误消息：

```
Program received signal SIGSEGV, Segmentation fault.
0x00011050 in transaction (transaction_file=0xff3675cc, all_album=0x226b0)
    at functions.c:94
94            curr_users -> playlist = p_playlists; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:09:18.190

人们已经给出了答案，但我想我会通过一个建议让它更完整：

为了尽量减少混乱，确保你做对了，并在某些更改的情况下尽量减少维护工作，请始终`malloc`像这样使用：

```
type *pointer = malloc(count * sizeof(*pointer)); 
```

请注意，在这种情况下，`type`of`pointer`只被提及一次。如果它发生变化，您无需接触其余代码。此外，`sizeof(*pointer)`始终正确显示可以存在于`pointer`.

* * *

现在回到您的代码，您是否注意到您有以下局部变量：

```
users *head_users, *curr_users, *p_users, *users_pointer; 
```

未初始化，您正在检查

```
if( !(head_users)) 
```

? 既然你的评论说`if list is empty, create the first user`，我猜你需要的是全局化，或者在程序启动时将它`head_users`传递给`transaction`并初始化它。`NULL`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T23:05:35.417

错误似乎在这一行：

```
p_playlists = malloc(sizeof(playlists *)); 
```

您为指向`playlist_`结构的指针分配了足够的内存，而没有为整个`playlist_`结构分配足够的内存。将行更改为：

```
p_playlists = malloc(sizeof(playlists)); 
```

为`playlist_`结构分配足够的内存。

**编辑**
如下面的评论所示，您还需要`curr_users`在`else`块中分配一些东西。然后，除非您的程序中出现任何其他错误，否则它应该可以工作:)

# html - 列出图片中的项目定位

> ID：10002664
> 
> 赞同：0
> 
> 时间：2012-04-03T22:58:41.943
> 
> 标签：html, css, positioning, html-lists

谁能帮我理解如何定位以下布局？这似乎很简单。 ![在此处输入图像描述](../Images/fcbbed1a48739fa238bad25c8da6d025.png)

我有这个代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css">

#container
{
    width:730px;
    margin:0 auto;
    }
#big_img
{
    width:270px;
    height:270px;
    float:left; 
}
ul
{
    list-style-type:none;
    float:left;
    padding:0;
}
 ul li
{
    display:inline;
    float:left;
    margin-right:9px;
    margin-top:0;
    margin-bottom:9px;
}
 li a img
{   
    width:130px;
    height:130px;
    border:1px solid #dcd9d9;
}

</style>

</head>

<body>

<div id="container">
  <div id="big_img"><img src="images/new-cat.jpg"/></div>
  <ul>
    <li><img src="images/ballpools.jpg"/></li>
    <li><img src="images/ballpools.jpg"/></li>
    <li><img src="images/ballpools.jpg"/></li>
    <li><img src="images/ballpools.jpg"/></li>
    <li><img src="images/ballpools.jpg"/></li>
    <li><img src="images/ballpools.jpg"/></li>
    <li><img src="images/ballpools.jpg"/></li>
    <li><img src="images/ballpools.jpg"/></li>
    <li><img src="images/ballpools.jpg"/></li>
    <li><img src="images/ballpools.jpg"/></li>
    <li><img src="images/ballpools.jpg"/></li>
    <li><img src="images/ballpools.jpg"/></li>           
  </ul>
</div> 
</body>
</html> 
```

结果，列表项显示在 IMG 下。但我需要它们，如图所示。

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:04:58.103

你需要把这种`float`风格带出你的`ul`课堂：

```
ul {
    list-style-type:none;
    padding:0;
} 
```

`float`in导致整个`ul`列表作为一个大元素浮动，这迫使它低于`img`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T23:06:57.833

您必须删除 float: left; 来自#big_img 和 ul

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T23:08:40.797

这看起来接近您想要的：（您不必使用列表）

**HTML：**

```
​&lt;div id="container">
  <div id="bigimage"></div>
  <div class="smallimage"></div>
  <div class="smallimage"></div>
  <div class="smallimage"></div>
  <div class="smallimage"></div>
  <div class="smallimage"></div>
  <div class="smallimage"></div>
  <div class="smallimage"></div>
  <div class="smallimage"></div>
  <div class="smallimage"></div>
  <div class="smallimage"></div>
  <div class="smallimage"></div>
​&lt;/div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**CSS：**

​</p>

```
#container {
  width:730px;
}

#bigimage {
    width:270px;
    height:270px;
    background-color: red;
    float: left;
    margin: 7px;
}

.smallimage {
    border:1px solid green;
    width:130px;
    height:130px;
    float: left;
    margin: 5px;
}​ 
```

[jsFiddle在这里](http://jsfiddle.net/fDkXw/1/)

# ruby - Ruby (rails) 从 Google Apps 打开电子邮件并获取附件图片

> ID：10002666
> 
> 赞同：0
> 
> 时间：2012-04-03T22:59:03.630
> 
> 标签：ruby, gmail, google-apps

我在 Google Apps 中有一个电子邮件帐户，我用它来接收附有一张图片的电子邮件。我想编写一个脚本，从该帐户获取电子邮件并获取每封电子邮件的附件图片，然后将其上传到服务器。

我的问题是：在 Ruby 中推荐的方法是什么？我假设它使用 IMAP 使用 OAuth。但是，我正在寻找这样做的图书馆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:43:39.737

我以前使用过[https://github.com/nu7hatch/gmail](https://github.com/nu7hatch/gmail)并且它运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T23:03:26.133

看看：[https ://github.com/dcparker/ruby-gmail](https://github.com/dcparker/ruby-gmail)

# android - 使用 android 应用程序获取有关用户错误的信息

> ID：10002667
> 
> 赞同：0
> 
> 时间：2012-04-03T22:59:10.930
> 
> 标签：android, google-play

我想知道当用户有错误信息时是否可以收到错误信息。所以它可以在进一步的版本中修复。这是因为，我没有所有设备来测试我的应用程序。我以前从未在 android 市场上发布过应用程序，所以我现在不太了解它是如何工作的。还。我想知道如果应用程序通过蓝牙共享会发生什么，这会增加我的下载量吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:09:33.497

第一个问题：ACRA 可能是最好的崩溃报告解决方案，请参阅[http://code.google.com/p/acra/](http://code.google.com/p/acra/)

第二：您可以通过 apk 或 html/qr 代码共享您的应用程序。通过使用 html/qr 代码，接收者必须下载应用程序（从市场）。如果您共享一个与市场无关的 apk

# ruby-on-rails - 在表格中时，twitter bootstrap 输入追加下拉按钮出现在输入的错误一侧

> ID：10002669
> 
> 赞同：5
> 
> 时间：2012-04-03T22:59:11.520
> 
> 标签：ruby-on-rails, twitter-bootstrap

**下面的 html 本身可以正常工作，但是当放在表格 td 中时，下拉按钮会出现在输入的左侧，而它应该在右侧。**它应该类似于此页面的“扩展表单控件”部分中的附加按钮示例：http: [//twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)

这两个项目都有正确的形状。IE。圆角和直边在正确的边上，但由于按钮位于输入的左侧，直边不对齐。它是彼此相邻的圆角。我希望它们出现在标记中，输入与下拉按钮并排，看起来像是连接在一起的。即使尝试使用“input-prepend”类（不是那种方式）它也不会改变。

**注意：我通过最新版本的 twitter-bootstrap-rails gem 在 Rails 应用程序中使用 twitter bootstrap。**

```
<div class="btn-group input-append">    
    <input class="span2" id="fruit_selection" name="fruit" />           
    <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">Fruit <span class="caret"></span></a> 
    <ul class="dropdown-menu">
        <li><a href="#">apple</a></li>
        <li><a href="#">orange</a></li>
        <li><a href="#">banana</a></li>
    </ul>   
</div> 
```

*   我拥有的唯一 css 是 twitter bootstrap 和 jquery ui 附带的。
*   它在 safari 和 firefox 中是一样的。
*   它在表单标签内。
*   我已经尝试了我能想到的尽可能多的 div、span、类（追加、前置、btw-group、add-on、control-group 等）的组合。

**我做错了吗？我可以添加任何额外的 CSS 来使其正常工作吗？任何帮助，将不胜感激。**

对于奖励积分：**附加和前置**示例（[http://twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)）在我的网站上无论是在表内还是表外都不起作用。我只能使用其中一种，不能同时使用两种。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T01:11:11.657

我知道您现在要做什么，您想使用输入而不是带有下拉组的按钮。查看引导程序的文档，我发现该设置没有解决方案，尽管您可以通过复制按钮行为并创建自己的类来支持带有下拉组的输入来轻松模拟自己的设置，如下所示：

**CSS**

```
.btn-group .input:first-child {
    border-bottom-left-radius: 4px;
    border-top-left-radius: 4px;
    margin-left: 0;
}

.btn-group .input {
    float: left;
    position: relative;
} 
```

有了这个 CSS，您所要做的就是`.input`在输入字段中包含该类，它应该可以工作：

**HTML**

```
<div class="btn-group">    
    <input class="span2 input" id="fruit_select" name="fruit" />            
    <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">Fruit <span class="caret"></span></a>
    <ul class="dropdown-menu">
        <li><a href="#">apple</a></li>
        <li><a href="#">orange</a></li>
        <li><a href="#">banana</a></li>
    </ul>
</div> 
```

[演示](http://jsfiddle.net/N6vGZ/2/show)，[在这里](http://jsfiddle.net/N6vGZ/2/)编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T00:56:25.270

尝试将您的列表包装在一个以类作为控制组的 div 中 - 下面给出了一个示例。我知道你提到你尝试过控制组，但再试一次。经过大量的试验和错误后，这段代码对我有用。祝你好运。

```
<div class="control-group">
  <div class="controls">  
    <ul class="dropdown-menu">
        <li><a href="#">apple</a></li>
        <li><a href="#">orange</a></li>
        <li><a href="#">banana</a></li>
    </ul>   
  </div>
</div> 
```

# windows - 在启动期间在 Windows 机器上设置 IP 地址

> ID：10002670
> 
> 赞同：1
> 
> 时间：2012-04-03T22:59:27.373
> 
> 标签：windows, batch-file, ip-address, arp, netsh

我是一个 Linux 人。我有一个非常具体的问题，我试图在 Windows 机器上解决，所以请原谅我在这里的无知。

问题（无法重新定义）：我有一台具有 3 个 NIC 的 Windows 机器。每次启动时，我都需要一种方法来动态自动设置其 IP 地址。这台机器每次开机都会有不同的地址信息。机器在启动时将有一个由名称/值对组成的文件（即一个充满“=”条目的文件）。我需要使用从批处理文件运行的标准 Windows 命令提示符命令来执行所有这些任务。我没有 VB 或任何可用的东西。

最大的问题：我认为，如果 Windows 对其网络接口的命名具有确定性，这将容易得多。如果是，我可以解析这个文件并简单地设置，比如使用 netsh 设置“本地连接 2”的 IP 地址。不过，就目前而言，Windows 有时会改变它用于物理 NIC 的名称。那么今天的“本地连接2”可能明天就是“本地连接”。所以，我必须想办法在启动过程中通过使用 MAC 地址并找到相应的 NIC 来确定这些事情。如果没有 grep、awk 等，从 ipconfig 输出中获取这些信息变得越来越困难。

我尝试过/完成的事情： (1) 我通过本地组策略编辑器添加了一个 Windows 设置启动脚本，弄清楚了如何在 Windows 启动期间启动我的批处理文件。(2) 我已经弄清楚如何从批处理文件中解析我的名称/值对文件并获取令牌。(3) 我试过用arp命令设置ip映射。很明显，这只是将数据包正确地路由到接口。但是，一旦数据包到达接口，它们就会被丢弃，因为数据包是用于 NIC 不属于的网络的。这对我没有好处。我需要为网卡设置 IP 地址。

我当前的计划/我需要帮助：（1）解析我的名称/值对文件（2）在名称/值对文件中找到与mac地址对应的网卡名称（3）使用netsh设置这些卡的 ip 地址 (4) 全部从批处理文件中执行 (5) 尽量不要抱怨我没有使用 Linux 机器:-)

任何帮助是极大的赞赏。

# javascript - 这两个特定的 JavaScript 函数有什么区别？

> ID：10002671
> 
> 赞同：3
> 
> 时间：2012-04-03T22:57:09.380
> 
> 标签：javascript

> **可能重复：**
> [这两个功能之间的区别？(“function x” vs “var x = function”)](https://stackoverflow.com/questions/114525/the-difference-between-the-two-functions-function-x-vs-var-x-function)
> [JavaScript: var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)

```
var test = function() {
    var a = 20;
    var b = 30;

    return a + b;
};

function Add() {
    var a = 20;
    var b = 30;

    return a + b;
} 
```

这两个功能有什么区别？如果我调用 add() 或 test() 它们都会给我相同的结果。具体是`var`做什么的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T23:05:05.060

函数声明语法不能在块语句中使用。

合法的：

```
function a() {
    function b() {

    }
} 
```

非法的：

```
function a() {
    if (c) {
        function b() {

        }
    }
} 
```

你可以这样做：

```
function a() {
    var b;
    if (c) {
        b = function() {

        };
    }
} 
```

对于我们中间的语言书呆子，您需要参考规范的第 12.1、13.1 和 14 节。您将找到以下语法说明。

**12.1 块**

**句法**

块：
    **{** StatementList [opt] **}**

StatementList :
    声明
    StatementList 声明

**13 功能定义**

**句法**

FunctionDeclaration：
    **函数**标识符**（** FormalParameterList [opt] **）{** FunctionBody **}**

FunctionExpression :
    **函数**标识符[opt] **(** FormalParameterList [opt] **) {** FunctionBody **}**

FormalParameterList :
    标识符
    FormalParameterList **,**标识符

功能体：
    源元素

**14 程序**

**句法**

程序：
    SourceElements [opt]

源元素：
    源
    元素源元素源元素

SourceElement :
    声明
    函数声明

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T23:12:38.567

他们是不同的。如果你在声明之前调用使用 var 声明的函数，它会抛出一个错误，因为它还没有被声明。

```
test(); // Undefined
var test = function() {
    ...
}; 
```

但是，它可以随时调用并在运行时定义。

```
test(); // OK
function test() {
    ...
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T23:04:40.893

不同之处在于，在第一种情况下，您有一个匿名函数，而在第二种情况下，您有一个函数声明。在大多数情况下，这种差异并不重要。重要的地方是

1.  在调试器中，命名函数有时可以更容易地在堆栈跟踪和
2.  变量提升导致*整个*函数声明被“移动”到其包含函数的顶部，所以

    富(1, 2); var foo = function (a, b) { return a+b; }

相当于

```
var foo;
foo(1, 2);
foo = function (a, b) {
    return a+b;
} 
```

（你可以看到它为什么会失败。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T23:10:20.173

您可以在定义之前调用 Add()，但不能在定义之前调用 test()。

另请参阅[var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-03T23:12:13.153

这`var`意味着您将变量分配给匿名函数。如果要将函数分配给变量，则可以这样做：

```
var test = function Add() {
    var a = 20;
    var b = 30;

    return a + b;
}; 
```

您必须命名您正在使用的功能。

您不必将函数分配给变量，但如果您想保留函数中的数据，那么您应该将函数分配给变量，因此您将使用上面的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-03T23:13:12.197

您分配的第一个函数是变量测试变量的匿名函数。然后变量 test 成为 test() 函数。

# asp.net-mvc - 使 MVC 控制器 [actionresults] 更加模块化？

> ID：10002674
> 
> 赞同：0
> 
> 时间：2012-04-03T22:59:51.613
> 
> 标签：asp.net-mvc, abstraction, modular, code-reuse

正如我的用户名所示，我是一个 MVC 菜鸟，希望更好地理解编码 MVC/OOP 概念。

因此，以 PayPals 支付系统为例，我有一个带有三个 ActionResult 的 PayPalController：IPN、PDT 和 Checkout。[这些都是非常基本的东西——几乎是 RobConn 教程的抄本]。我注意到大部分代码将保持静态，只有一部分用户特定代码被添加到不同的网站情况。我想要实现的是一种使控制器更可重用的方法；例如，编码人员只需为 IPN 验证、IPN 不成功等编写代码。立即想到的是在这些点调用空函数，以便编码人员可以在需要时填充它们，但这似乎对我来说有点太简单了。我不太了解接口和抽象[目前正在阅读它们]，但不知何故我觉得答案就在它们之中？

所以基本上，解决这种情况的最佳方法是什么以及为什么。谢谢你，MVC新手

# android - 安卓。要求用户提示密码才能挂载 sdcard

> ID：10002677
> 
> 赞同：0
> 
> 时间：2012-04-03T23:00:27.213
> 
> 标签：android, security, operating-system, usb

我需要配置/编程我的三星 Galaxy 标签，以便如果有人插入 USB 线，如果他想访问文件（在他的计算机上），他将需要输入正确的密码。如果他没有密码，他只能为设备充电。

我将把它借给一些人（项目的一部分），我需要对他们隐藏一些文件，但我的应用程序需要这些文件才能工作。另外文件太大了，无法内部存储，我必须使用 SD 卡。

编辑：参考评论。平板电脑将被特殊密封，以防止 SDCard 弹出

任何和所有的见解都表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T02:31:00.277

您不能在不修改固件的情况下执行此操作。加密您的文件以获得*一些*保护。不是 100%，因为加密密钥需要在应用程序中才能工作。

# actionscript-3 - 如果 Unity 和 Flash 在浏览器中共存，它们可以相互通信吗？

> ID：10002678
> 
> 赞同：0
> 
> 时间：2012-04-03T23:00:39.820
> 
> 标签：actionscript-3, browser, communication, unity3d, bidirectional

换句话说，如果两者都存在于网页上，并且两者都设置了一些公开的方法来相互交谈，那么 Unity 中的 Flash 触发方法可以吗？

JavaScript 会成为两者之间通信的中间人吗？

我在想 Flash 会使用 ExternalInterface 而 Unity 会使用其他东西（我对它还不够熟悉）。

只是好奇这在理论上是否可行。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T01:25:10.753

看起来 unity 有与 JavaScript 对话的方法，类似于 as3。用JS肯定是可以的

```
Application.ExternalCall( "SayHello", "The game says hello!" ); 
```

[http://unity3d.com/support/documentation/Manual/Unity%20Web%20Player%20and%20browser%20communication.html](http://unity3d.com/support/documentation/Manual/Unity%20Web%20Player%20and%20browser%20communication.html)

# bash - rsync 文件作为用户使用 ssh 密钥

> ID：10002680
> 
> 赞同：1
> 
> 时间：2012-04-03T23:00:54.873
> 
> 标签：bash, cron, rsync

我正在尝试将一些文件同步到我拥有的备份主机上。
我希望能够以 cron 用户（在本例中名为 cron_user）的身份执行此操作。
目标主机在 ~/.ssh/authorized_keys 文件中有一个带有 IP 地址的“发件人”行，我已将私有 DSA 密钥复制到用户保护目录（在封装的 ssh -i 命令中指定）。

我仍然收到提示输入密码。有没有其他方法可以解决这个问题，或者我是否遗漏了一些绕过需要密码并引用我指定的 ssh 密钥的东西？

```
sudo rsync  --timeout=3600 -azO  -e 'ssh -i /var/cron_user/cron_user' /tmp/bacup1-$(date'+%Y-%m-%d' ).tgz /tmp/backup2$(date '+%Y-%m-%d' ).tgz cron_user@hbackup00:/database/backups/app_backup/ 
```

经过进一步调查，使用 -v 表明它不允许使用基于 IP 的密钥：

```
 IP: debug1: Remote: Your host '10.5.122.118' is not permitted to use this key for login. 
```

虽然我在 /home/user_cron/.ssh/authorized_keys 文件中列出了 IP：

```
 [root@hbackup00 user]# cat ~cron_user/.ssh/authorized_keys 
 from="10.5.112.42,10.5.122.118,10.5.100.200,10.5.100.205,10.5.99.223,10.4.99.229,10.4.99.223,10.4.100.182" ssh-dss 
```

我是否缺少允许该用户在没有密码的情况下进行身份验证的东西？我已经使用 ssh -i 从此处列出的其他主机调用相同的密钥文件进行了测试，没有问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:22:52.973

以下是一些帮助您调试的建议：

*   直接试试`ssh`，不用`rsync`。这将有助于隔离问题——如果它仍然失败，您需要测试的东西就更少了，如果它有效，那么您知道正在执行的`ssh`调用`rsync`与您认为的不同，您可以对其进行调查。

*   打开服务器上的日志记录。在`/etc/ssh/sshd_config`，设置`LogLevel VERBOSE`或更高。（参见`sshd_config`手册页。）有时服务器会记录它不与客户端共享的有趣信息。

*   在您的客户端命令行中打开更高的日志记录，使用`-vvv`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T16:59:59.723

sshd 是被傀儡控制的。哦！

# arrays - shell 脚本语法：引用数组的变量名

> ID：10002688
> 
> 赞同：1
> 
> 时间：2012-04-03T23:01:52.140
> 
> 标签：arrays, bash, shell, variables

这很接近，但我无法引用循环中的第二个数组。语法应该是什么样的？$item 返回“1”而不是“a、b、c 或 d”

```
colors=( teal purple pink red green darkblue skyblue )
teal=( a b c d )

for color in ${colors[@]}
do
    echo $color

    for item in ${#{$color}[@]}
    do
        echo $item
    done

done 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T23:30:38.417

你可以这样做：

mkt.sh

```
colors=( teal purple pink red green darkblue skyblue )
teal=( a b c d )
purple=( x y z )

for color in ${colors[@]}
do
    echo color: $color

    declare -a 'vals=("${'"$color"'[@]}")'
    for item in ${vals[@]}
    do
        echo "-- $item"
    done
done 
```

跑步：

```
$ ./mkt.sh 
color: teal
-- a
-- b
-- c
-- d
color: purple
-- x
-- y
-- z
color: pink
color: red
color: green
color: darkblue
color: skyblue
$ 
```

学分：

*   [http://wiki.bash-hackers.org/syntax/arrays](http://wiki.bash-hackers.org/syntax/arrays)，**间接部分**

# jquery - 关于使用jQuery处理视频HTML5视频的几个问题

> ID：10002689
> 
> 赞同：4
> 
> 时间：2012-04-03T23:01:52.330
> 
> 标签：jquery, video

我有一个人们可以观看视频的页面。他们选择他们想看的视频，点击一个元素，视频就开始了。视频使用`<video>`标签。如果有人开始观看视频，然后选择另一个视频，则旧视频会继续播放。我希望他们*正在*观看的视频停止并重置为 0。这是我为 jQuery 准备的内容：

```
 $(function(){
          $('#video_1,#video_2,#video_3,#video_4,#video_5,#video_6').hide();

          $('.icon_1').click(function(){
                $('#video_2,#video_3,#video_4,#video_5,#video_6').fadeOut(function(){
                $('#video_1').fadeIn();
                });
          });

          $('.icon_2,.icon_3,.icon_4,.icon_5,.icon_6').click(function(){
                $('#video_1').get(0).pause();
                $('#video_1').get(0).currentTime = 0;
            });

          $('.icon_2').click(function(){
                $('#video_1,#video_3,#video_4,#video_5,#video_6').fadeOut(function(){
                $('#video_2').fadeIn();
                });
          });

          $('.icon_1,.icon_3,.icon_4,.icon_5,.icon_6').click(function(){
            $('#video_2').get(0).pause();
            $('#video_2').get(0).currentTime = 0;
    }); 
```

对于 html：

```
<div id="video_1">
<div id="mediaplayer">cadillac</div>
    <video class="video_1" width="100%" height="100%" autoplay="autoplay" controls="controls">
        <source src="videos/cadillac_x264.mp4" type="video/mp4" />
    <object data="videos/cadillac_x264.mp4" width="100%" height="100%">
</object> 
</video>
</div>

<div id="video_2">
<div id="mediaplayer2">nike</div>
    <video class="video_2" width="100%" height="100%" autoplay="autoplay" controls="controls">
    <source src="videos/Nike_Pretty - Computer_x264.mp4" type="video/mp4" />
<object data="videos/Nike_Pretty - Computer_x264.mp4" width="100%" height="100%">
</object> 
</video>
</div> 
```

所以，我想你明白我在做什么：当用户点击`.icon_#`他们正在查看的视频之外的任何内容时，它会暂停并将他们*正在*查看的视频重置为 0，然后播放他们点击的视频。

问题是它不起作用。我点击的第一个视频只是播放。

顺便说一句，我已经编写了 jQuery 的其余部分，我希望其中两个能够工作。我可以从那里得到它。

和平！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:27:48.983

这是我作为 jsfiddle 发布的一个解决方案，供您使用：http: [//jsfiddle.net/trpeters1/EyZdy/11/](http://jsfiddle.net/trpeters1/EyZdy/11/)

这里有更好的 jsfiddles，可以容纳任意数量的视频：http: [//jsfiddle.net/trpeters1/EyZdy/23/](http://jsfiddle.net/trpeters1/EyZdy/23/) （视频嵌套在 click btn 中，使用 find()）

[http://jsfiddle.net/trpeters1/EyZdy/28/](http://jsfiddle.net/trpeters1/EyZdy/28/) （视频没有嵌套在click btn中，匹配数据属性）

```
here's the HTML:

<div class="icon" data-id="1" >cadillac</div>
<div class="icon" data-id="2">nike</div>
<div class="icon" data-id="3">cheerios</div>

<div class="video" data-id="1" >
<video class="video" width="50%" height="50%"  controls="controls" poster="http://www.birds.com/wp-content/uploads/home/bird.jpg" > 
```

```
<div class="video" data-id="2" >
<video class="video" width="50%" height="50%"  controls="controls" poster="http://www.logobird.com/wp-content/uploads/2011/03/new-google-chrome-logo.jpg"> 
```

```
<div class="video" data-id="3" >
<video class="video" width="50%" height="50%"  controls="controls" poster="http://cheerioscoupons.info/wp-content/uploads/_Cheerios-Coupons-1-300x283.jpg"> 
```

​ ​ 这是 JS：

```
$('div.video').hide();

$('.icon').click(function(){
  var id=$(this).data('id'),
    thisDiv=$("div.video[data-id='" + id +"']"),
    thisVideo=$("div.video[data-id='" + id +"']").find('video');

   $('div.video').not(thisDiv).fadeOut();
   $('video').not(thisVideo).get(0).pause();
   $('video').not(thisVideo).get(0).currentTime = 0;
   thisDiv.fadeIn();      
   thisVideo.get(0).play();   
}); 
```

# algorithm - 在比 O(n^2) 时间更快的时间内用 O(1) 额外内存重新排列数组

> ID：10002690
> 
> 赞同：3
> 
> 时间：2012-04-03T23:02:05.380
> 
> 标签：algorithm

假设我有以下数组：

```
1, 4, 5, 2, 3 
```

我需要重新安排它

```
5, 1, 4, 2, 3 
```

只有额外的空间；一`int`。

我想出了一种解决方案来解决它。但它很`O(n^2)`复杂。

谁能提供更快的解决方案？

谢谢

编辑：对不起，不是旋转阵列。

我需要将原始数组更改为结果数组。顺序可以是任意的。我只需要制作 A -> B。有人告诉我 B。

谢谢

编辑 2"

让它更清楚。数组 B 不固定。我们需要为此找到一个通用的解决方案。

更新：

谢谢你们。似乎这是一个脑筋急转弯问题。哈哈 :D

我的朋友被亚马逊面试官问过这个问题。哈哈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:21:54.287

在我看来，这只是对数组进行排序的一种特殊情况，其中排序顺序相当随意。因此，最佳算法的时间复杂度为 O(n log n)，而使用进行就地排序的算法（以非稳定排序为代价）的空间复杂度为 O(1)。如果*平均*O(n log n) 是可以的，就地[合并排序](http://en.wikipedia.org/wiki/Merge_sort)将符合要求，就地[快速排序也将符合要求。](http://en.wikipedia.org/wiki/Quicksort)

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T23:48:51.180

此解决方案使用 O(1) 空间工作。

```
>>> def arrayswap(source, dest):
...     for i in range(len(dest)):
...         source[source.index(dest[i])], source[i] = source[i], source[source.index(dest[i])]
... 
>>> a = [1, 4, 5, 2, 3]
>>> b = [5, 1, 4, 2, 3]
>>> arrayswap(a, b)
>>> a
[5, 1, 4, 2, 3] 
```

如果不使用 python 的元组打包，source[i] 或 source[source.index(dest[i])] 之一的值可以存储在 int 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T23:21:54.023

似乎您只是将前三个元素向左移动（环绕）。

所以，忽略索引 3 和 4。

```
 int temp = array[0]
  array[0] = array[1]
  array[1] = array[2]
  array[2] = temp 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-03T23:07:21.160

你可以这样做：

```
temp = arr[0];
arr[0] = arr[2];
arr[2] = arr[4];
arr[4] = arr[1];
arr[1] = arr[3];
arr[3] = temp; 
```

### 编辑：

要将数组 a 重新排列为数组 b，您可以这样做：

```
for (var i = 0; i < a.length; i++) {
  for (var j = i + 1; a[i] != b [i]; j++) {
    var temp = a[i];
    a[i] = a[j];
    a[j] = temp;
  } 
```

}

演示：http: [//jsfiddle.net/Guffa/5sKdM/](http://jsfiddle.net/Guffa/5sKdM/)

我不确定这个大 O 是什么，但对于示例数据，它进行了 7 次比较和 2 次交换，所以这绝对比 O(n ² ) 好。

另外，我不确定究竟什么算作“额外空间”，所以我不知道这是否满足一个额外空间的要求，但如果不满足，当前接受的答案也不...*

# .net - 以编程方式添加静态 IP

> ID：10002691
> 
> 赞同：1
> 
> 时间：2012-04-03T23:02:08.793
> 
> 标签：.net, c#-4.0, windows-server-2008, ip, netsh

我正在编写一个小型应用程序来自动化我们在设置新机器时每天必须做的很多事情。我现在有多达 18 个新盒子要设置，所以我真的需要添加这个小功能，它可以让我更轻松地添加 IP 地址。

我的基于块号生成子网的函数工作正常，但我希望能够输入类似 192.168.1.10/29 的内容并将所有 5 个 IP 地址添加到 NIC。我添加IP的功能很好，但我的问题是......

我需要像这样手动编码吗？（显然是伪代码而不是工作示例）

```
int 29block = 5
int 28block = 12

for (i = 0; i<29block; i++)
{
     string ip = ipinputbox.text;
     ip = ip + 2 + i; // 2 being the value to compensate for gateway/etc.
     AddIpAddress(ip);
} 
```

![在此处输入图像描述](../Images/4bf967cf660f1fb29dba7a2ada7979bd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T00:04:00.070

我创建了一个可以解释子网地址并返回由该子网表示的地址的可枚举集合的类。因此，例如， ip 子网`192.168.1.10/29`应返回`192.168.1.10`属于 代表的子网（`/29`即掩码）之后（包括）的所有地址`255.255.255.248`。此子网中有 6 台有效主机，`.9`到`.14`. 所以返回的列表将是

```
192.168.1.10
192.168.1.11
192.168.1.12
192.168.1.13
192.168.1.14 
```

这是我正在使用的示例代码（在 LINQPad 中）：[http://pastebin.com/d6EE2bpj](http://pastebin.com/d6EE2bpj)，以及测试代码生成的示例输出：

```
==192.168.1.10/29==
192.168.1.10
192.168.1.11
192.168.1.12
192.168.1.13
192.168.1.14
==72.26.196.160/29==
72.26.196.161
72.26.196.162
72.26.196.163
72.26.196.164
72.26.196.165
72.26.196.166 
```

该代码根据子网大小动态生成位掩码，因此对于任何起始 IP 地址和任何子网大小，它都应该是完全通用的。

# iphone - 如何使用 Objective-C 在 iOS 中捕获屏幕截图的子集？

> ID：10002693
> 
> 赞同：0
> 
> 时间：2012-04-03T23:02:23.707
> 
> 标签：iphone, objective-c, ios, screenshot

如何在 iOS 设备上使用 Objective-C 仅捕获整个屏幕的子集？

我找到了以下代码：

```
UIWindow *screenWindow = [[UIApplication sharedApplication] keyWindow];
UIGraphicsBeginImageContext(screenWindow.frame.size);
[screenWindow.layer renderInContext:UIGraphicsGetCurrentContext()]
UIImage *screenshot = UIGraphicsGetImageFromCurrentImageContext(); 
```

效果很好，但我只想从整个窗口的一部分创建图像。我该怎么做呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-03T23:31:47.183

代替

> UIGraphicsBeginImageContext(screenWindow.frame.size);

和

> UIGraphicsBeginImageContext（CGSizeMake（宽度，高度））；

# postgresql - 为什么空日期会导致交叉表功能失败？

> ID：10002697
> 
> 赞同：0
> 
> 时间：2012-04-03T23:02:44.917
> 
> 标签：postgresql

我在 postgres 的交叉表函数中发现了一个我无法解释的奇怪行为，但希望其他人可以......

我正在使用的交叉表功能的版本需要首先构建一个初步表。

此 SQL 成功创建了初步表：

```
SELECT 
    ST.studyabrv||' '||S.labid||' '||S.subjectid||' '||S.box::varchar||' '||S.well AS "rowname",
    M.marker AS "bucket", 
    G.allele1||' '||G.allele2 AS "bucket_value" 
INTO TABLE ct 
FROM 
    geno.gmarkers M, 
    geno.genotypes G, 
    geno.gsamples S, 
    geno.guploads U, 
    geno.gibg_studies ST 
WHERE 
    G.markers_id=M.id 
    AND G.gsamples_id=S.id 
    AND S.guploads_id=U.id 
    AND U.ibg_study_id=ST.id 
    AND ( M.id=5 OR M.id=6 OR M.id=2 OR M.id=4 OR M.id=3) 
    AND ( S.labid='CL100001' OR S.labid='CL100002' OR S.labid='CL100003' OR S.labid='CL100004' OR S.labid='CL100005' OR S.labid='CL100006' OR S.labid='CL100007' OR S.labid='CL100008' OR S.labid='CL100009' OR S.labid='CL100010' OR S.labid='CL100011' OR S.labid='CL100012' OR S.labid='CL100013' OR S.labid='CL100014' OR S.labid='CL100015') 
ORDER BY box,well; 
```

产生如下输出：

```
 rowname          |  bucket   | bucket_value 
--------------------------+-----------+--------------
 LTS CL100001 10011 1 A01 | 5HTTLPR-T | S La
 LTS CL100001 10011 1 A01 | 5HTTLPR-D | 14 16
 LTS CL100001 10011 1 A01 | DAT1      | 440 480
 LTS CL100001 10011 1 A01 | DRD4      | 475 475
 LTS CL100001 10011 1 A01 | Caspi     | 351 351
 LTS CL100009 10420 1 A02 | Caspi     |  
 LTS CL100009 10420 1 A02 | 5HTTLPR-T | La Lg
 LTS CL100009 10420 1 A02 | 5HTTLPR-D | 16 16
 LTS CL100009 10420 1 A02 | DAT1      | 440 480
 LTS CL100009 10420 1 A02 | DRD4      | 475 475
... 
```

但是，如果我尝试包含一个全部为空的日期列，如：

```
SELECT 
    ST.studyabrv||' '||S.labid||' '||S.subjectid||' '||S.box::varchar||' '||S.well||' '||G.run_date::text AS "rowname", 
    M.marker AS "bucket", 
    G.allele1||' '||G.allele2 AS "bucket_value" 
INTO TABLE ct 
FROM 
    geno.gmarkers M, 
    geno.genotypes G, 
    geno.gsamples S, 
    geno.guploads U, 
    geno.gibg_studies ST 
WHERE 
    G.markers_id=M.id 
    AND G.gsamples_id=S.id 
    AND S.guploads_id=U.id 
    AND U.ibg_study_id=ST.id 
    AND ( M.id=5 OR M.id=6 OR M.id=2 OR M.id=4 OR M.id=3) 
    AND ( S.labid='CL100001' OR S.labid='CL100002' OR S.labid='CL100003' OR S.labid='CL100004' OR S.labid='CL100005' OR S.labid='CL100006' OR S.labid='CL100007' OR S.labid='CL100008' OR S.labid='CL100009' OR S.labid='CL100010' OR S.labid='CL100011' OR S.labid='CL100012' OR S.labid='CL100013' OR S.labid='CL100014' OR S.labid='CL100015') 
ORDER BY box,well; 
```

这将产生输出：

```
 rowname |  bucket   | bucket_value 
---------+-----------+--------------
         | 5HTTLPR-T | S La
         | 5HTTLPR-D | 14 16
         | DAT1      | 440 480
         | DRD4      | 475 475
         | Caspi     | 351 351
         | Caspi     |  
         | 5HTTLPR-T | La Lg
         | 5HTTLPR-D | 16 16 
```

如您所见，将 run_date 列添加到“rowname”复合列的末尾会呈现整个复合空白......这太疯狂了。如果我用虚拟数据填充 run_date，它会显示出来......但如果它是空白或 null，这会导致“行名”变为空白。

我无法判断这是否是 postgres 中的错误，但如果可能的话，我想解决这个奇怪的结果。

TIA，瑞克斯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T00:25:44.657

您应该将其`null`视为一种`unknown`价值。`null`值不是数字或字符串，因此您不能像操作它们一样对它们进行操作。因此，您应该确保使用一些会返回非空值的函数，例如`coalesce()`从左到右返回第一个非空参数并强制将*默认*值作为最右边的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T00:00:09.163

```
|| coalesce(G.run_date, '')::text 
```

# css - 如何使引导表行可点击？

> ID：10002704
> 
> 赞同：69
> 
> 时间：2012-04-03T23:03:42.437
> 
> 标签：css, html, twitter-bootstrap

我可以自己破解这个，但我认为 bootstrap 有这个能力。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-04-04T00:19:02.823

使用 jQuery 非常简单。v2.0`table`在所有表上使用该类。

```
$('.table > tbody > tr').click(function() {
    // row was clicked
}); 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-07-25T10:36:43.843

有一个[javascript 插件](http://jasny.github.com/bootstrap/javascript#rowlink)可以将此功能添加到 bootstrap。

包括在内时`rowlink.js`，您可以执行以下操作：

```
<table data-link="row">
  <tr><td><a href="foo.html">Foo</a></td><td>This is Foo</td></tr>
  <tr><td><a href="bar.html">Bar</a></td><td>Bar is good</td></tr>
</table> 
```

表格将被转换，以便可以单击整行而不是仅单击第一列。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-03-18T17:56:01.190

该代码将任何具有`data-href`属性集的引导表行转换为可点击元素

注意：`data-href`attribute 是一个有效的`tr`属性 (HTML5)，`href`tr 元素上的属性不是。

```
$(function(){
    $('.table tr[data-href]').each(function(){
        $(this).css('cursor','pointer').hover(
            function(){ 
                $(this).addClass('active'); 
            },  
            function(){ 
                $(this).removeClass('active'); 
            }).click( function(){ 
                document.location = $(this).attr('data-href'); 
            }
        );
    });
}); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-25T09:41:43.963

我用模态窗口向你展示我的例子......你创建你的模态并给它一个 id 然后在你的表格中你有 tr 部分，只需在下面看到的第一行添加（不要忘记在第一行设置这个

```
<tr onclick="input" data-toggle="modal" href="#the name for my modal windows" >
 <td><label>Some value here</label></td>
</tr> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-05-25T00:25:40.283

```
<tr height="70" onclick="location.href='<%=site_adres2 & urun_adres%>'"
    style="cursor:pointer;"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T00:26:11.853

可能是您在单击表格行时尝试附加功能。

```
var table = document.getElementById("tableId");
var rows = table.getElementsByTagName("tr");
for (i = 0; i < rows.length; i++) {
    rows[i].onclick = functioname(); //call the function like this
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-08T18:06:32.643

您可以使用 bootstrap css 以这种方式使用。如果已经分配给任何行，只需删除活动类并重新分配给当前行。

```
 $(".table tr").each(function () {
        $(this).attr("class", "");
    });
    $(this).attr("class", "active"); 
```

# ios - 错误更改 CCScene

> ID：10002708
> 
> 赞同：0
> 
> 时间：2012-04-03T23:04:02.377
> 
> 标签：ios, ipad, ios5, cocos2d-iphone

我是 cocos2d 的初学者，但我在 Objective-C 和 iphoneSdk 方面有一些经验。但是我的应用程序中有一个问题，我无法弄清楚错误是什么..

我有一个 CCLayer (Anime)，它向玩家显示一个小动画，然后它启动另一个 CCLayer (Level)：

日本动画片：

```
-(id) init{

    if( (self=[super init])) {

CCSpriteFrameCache* frameCache = [CCSpriteFrameCache sharedSpriteFrameCache]; 
[frameCache addSpriteFramesWithFile:@"Anime.plist"];  

CCSprite * backgound = [CCSprite spriteWithSpriteFrameName:@"Back.png"];
backgound.anchorPoint=ccp(0,0);
[self addChild:backgound z:-1];

CCSprite *body = [CCSprite spriteWithSpriteFrameName:@"Body1.png"];
[self addChild:body z:0];

CCSprite *bMoved = [CCSprite spriteWithSpriteFrameName:@"Gigante1.png"];
[self addChild:bMoved z:1];      

NSMutableArray *nuvemAnim = [[NSMutableArray alloc] init];
        for (int i = 1; i < 41; i++) {
            NSString *frameNames = [NSString stringWithFormat:@"Gigante%i.png",i];
            [nuvemAnim addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] 
                                  spriteFrameByName:frameNames]];

        }    

        CCAnimation *gigAnim = [CCAnimation animationWithFrames:nuvemAnim  delay:1.0f/24.0f];
        CCAnimate* animate = [CCAnimate actionWithAnimation:gigAnim];   

        [bMoved runAction:[CCSequence actions:
                         [CCDelayTime actionWithDuration:1],
                         animate,
                         [CCDelayTime actionWithDuration:1],
                         [CCCallFunc actionWithTarget:self selector:@selector(changeCCScene)],
                           nil]];

    }
return self; 
```

在 Level I 中，使用 CCSpriteFrameCache 来创建角色的动画，

等级：

```
-(id) init{
if( (self=[super init])) {

    self.isTouchEnabled=YES;

    CCSpriteFrameCache* frameCache = [CCSpriteFrameCache sharedSpriteFrameCache]; 
   [frameCache addSpriteFramesWithFile:@"Level3.plist"]; 

    CCSprite * backgound = [CCSprite spriteWithSpriteFrameName:@"Fundo9.png"];
    backgound.anchorPoint=ccp(0,0);
    [self addChild:backgound z:-1];

    CCSprite man = [CCSprite spriteWithSpriteFrameName:@"Man1.png"];
    [self man z:0];

    eAnim = [[NSMutableArray alloc] init];
    for (int i = 2; i < 178; i++) {
        NSString *frameNames = [NSString stringWithFormat:@Man%i.png",i];
        [eAnim addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] 
                                spriteFrameByName:frameNames]];

    } 
```

但在控制台中给我这种类型的错误对于所有帧都无限

```
2012-04-03 23:37:51.987 GigV1[1432:10a03] cocos2d: WARNING: an alias with name Man12.png already exists
2012-04-03 23:37:51.988 GigV1[1432:10a03] cocos2d: WARNING: an alias with name Man155.png already exists 
```

任何想法为什么会发生这种情况？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:35:22.990

您在此行中缺少引号：

`NSString *frameNames = [NSString stringWithFormat:@Man%i.png",i];`

应该是在之后`@`和之前的开场报价`Man%i`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:00:09.383

您正在从 Anime.plist 和 Level3.plist 加载精灵帧：

```
CCSpriteFrameCache* frameCache = [CCSpriteFrameCache sharedSpriteFrameCache]; 
[frameCache addSpriteFramesWithFile:@"Anime.plist"]; 

[frameCache addSpriteFramesWithFile:@"Level3.plist"]; 
```

此警告表明您正在添加更多具有相同名称的精灵帧：

```
WARNING: an alias with name Man12.png already exists 
```

要解决此问题，您有三个选择：

1.  确保不要在两个不同的纹理图集中使用相同的精灵帧名称（相同的图像）
2.  在从另一个纹理图集加载精灵帧之前，从缓存中卸载不需要的精灵帧
3.  忽略警告

# java - 了解 Apache Camel 动态路由

> ID：10002710
> 
> 赞同：3
> 
> 时间：2012-04-03T23:04:17.580
> 
> 标签：java, apache-camel

我设置了一个简单的动态路由器：

```
 public String slip(String body, @Header(Exchange.SLIP_ENDPOINT) String previous) {
                if (previous == null) {
                    return "mock:a";
                } 
                    else if (body.contains("status=2") ) {
                    return "mock:b";
                }
                    else if (body.contains("status=3") ) {
                    return "mock:c";
                }

                // no more so return null
                return null;
            } 
```

模拟 a,b,c 是带有自定义处理器的路由。

```
public void process(Exchange exchange) throws Exception {
        String str_request = "";
        String str_requestNew = "";

        str_request = (String) exchange.getIn().getBody();

        if(str_request.contains("status=1"))
            str_requestNew = "status=2";
    } 
```

1.  如何通过 Java DSL 在自定义处理器中的路由之间更新消息正文。exchange.getOut().setBody(newreq); ?

2.  我是否需要创建一个新的生产者并将消息发送回动态路由器？ProducerTemplate 模板 = exchange.getContext().createProducerTemplate(); 模板.sendBody(myDynamicRouterEndpoint, newreq); 或者如果通过方法 1 进行，我的路由器是否会拾取新主体。

还是我的逻辑一起存在巨大缺陷？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T05:35:36.210

你可以像你在1中描述的那样做。

如果使用 bean 组件就更简单了。然后你可以有一个普通的java方法来读取和设置正文：

公共字符串doSomething（字符串体）{}

这将获取参数中的主体，返回值将是新的主体。这也使您的 bean 独立于 Camel。

# knockout.js - 淘汰赛中的跟踪列表重叠

> ID：10002712
> 
> 赞同：0
> 
> 时间：2012-04-03T23:04:24.467
> 
> 标签：knockout.js

我有一个应用程序，其中对象可能位于多个列表之一中。一个列表的 UI 需要将每个项目标记为在*其他*列表之一上。

我实现的一个非常简化的版本是这样的：

```
function Item(id, panel) {
    var that = this;
    this.id = id;
    this.viewModel = panel;
    this.isSelected = ko.computed(function(){
        return panel.isSelected(that);
    });
}

function Panel() {
    var that = this;

    //my two lists
    this.all = ko.observableArray();
    this.selected = ko.observableArray();

    this.isSelected = function(item){
        return _(that.selected()).find(function(thing){
            console.log("iterating");
            return thing.id == item.id;
        });
    };
}

var panel = new Panel();
ko.applyBindings(panel);

//add some things to the list
for(var i=0; i<40; i++){
    var item = new Item(i, panel)
    panel.all.push(item);
    //let's select some of them. note it's actually a different object
    if (i % 2 == 0){
        panel.selected.push(new Item(i, panel));
    }
};
​ 
```

小提琴在这里：http: [//jsfiddle.net/89j52/5/](http://jsfiddle.net/89j52/5/)

因此，除了将项目提供给面板的参考之外，它的表现也很糟糕。这是因为每次您将另一个项目添加到选定列表时，它都会重新计算*所有*项目的选定状态；注意它打印了多少次“迭代”。我明白为什么会这样，但很痛苦。

现在很明显，我每次添加时都不*需要*检查每个项目。例如，我可以为项目存储一个查找表，然后在将某些内容添加到所选列表时更新正确的查找表。但我不知道如何将其与 Knockout 的可观察/计算的东西结合起来，并使 UI 更新无缝。我应该如何在 Knockout 的习语中解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:51:06.013

如果您将*isSelected*转换为常规 observable（未计算）并在每次将项目添加到选定列表时直接更新它会怎样：

```
function select(item){
    panel.selected.push(item);
    var itemInAll = _(panel.all()).find(function(thing){
        return thing.id === item.id;
    });
    itemInAll.isSelected(true);
} 
```

不是很优雅，但绝对更有效率。您也不需要在*Item中保留对**面板*的引用。这是完整的代码：http: [//jsfiddle.net/89j52/9/](http://jsfiddle.net/89j52/9/)

# jquery - 如何在 Rails 中使用形式略有不同的模型？

> ID：10002713
> 
> 赞同：0
> 
> 时间：2012-04-03T23:04:25.723
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

考虑一个具有 2 种类型的模型：A 和 B。这两种类型都将颜色存储为字符串。A 型可以是蓝色或红色。B 型可以是白色或黑色。

显示类型 A 的表单时，有一个包含 [blue, red] 的 HTML 选择列表。对于类型 B，选择列表包含 [white, black]。

为同一模型显示这两个不同选择的最佳方法是什么？

打开类型不起作用，因为当您创建新模型时，没有类型。

您是否需要有两个创建按钮，每个类型一个？还是应该将其设计为两个独立的模型，继承自一个通用的基本模型？

我考虑了基于类型选择的选择的 AJAX (jQuery) 更新。这似乎是一个简单问题的非常复杂的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:43:00.743

我建议[optgroup](http://www.w3schools.com/tags/tag_optgroup.asp)。

```
<select>
  <optgroup label="type A">
    <option value="blue">Blue</option>
    <option value="red">Red</option>
  </optgroup>
  <optgroup label="type B">
    <option value="black">Black</option>
    <option value="white">White</option>
  </optgroup>
</select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T01:36:33.257

绝对应该在模型的验证中执行颜色类型限制。为了使视图与您的模型保持一致，我建议使用一些 javascript：

```
<select class="type-select">
  <option value="TypeA">Type A</option>
  <option value="TypeB">Type B</option>
</select>

<select class="type-A-opts">
  <option value="blue">Blue</option>
  <option value="red">Red</option>
</select>
<select class="type-B-opts" style="display:none" >
  <option value="black">Black</option>
  <option value="white">White</option>
</select>

<script>
  $(".type-select").change(function(){
    var cur_value = $(this).attr("value");
    if(cur_value == "TypeA"){
      $(".type-A-opts").show();
      $(".type-B-opts").hide();
    }else{
      $(".type-A-opts").hide();
      $(".type-B-opts").show();
    }
  });
</script> 
```

# svn - Tortoise SVN - 文件添加到回购的日期/作者的关键字

> ID：10002715
> 
> 赞同：0
> 
> 时间：2012-04-03T23:04:28.553
> 
> 标签：svn, properties, tortoisesvn

是否有一组 SVN 关键字可以解析在 SVN 中添加（即创建）文件时的作者和日期属性？$Date$ 和 $Author$ 似乎只解析为最后一次提交的用户/日期。

我已经浏览了 SVN 文档、here 和 Google，但找不到明确的答案。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:39:32.557

[关键字替换](http://svnbook.red-bean.com/en/1.7/svn.advanced.props.special.keywords.html)的目的是始终更新到最后一次提交。

如果您只想要原始作者和日期，那么您可以`svn:keywords`在第一次替换发生后删除关键字或属性。

# git - 如何忽略除一两个目录之外的所有文件？

> ID：10002728
> 
> 赞同：3
> 
> 时间：2012-04-03T23:05:11.147
> 
> 标签：git

我已经查看了与此相关的所有以前的 stackoverflow 问题，但没有找到与我想要做的匹配的答案。

我正在为内容管理系统开发一个组件和一个模板。我所有的组件文件都在一个名为“components/com_rhgallery/”的子目录中，我所有的模板文件都在一个名为“templates/rhgallery/”的子目录中

我想在根目录有一个*存储*库和一个“.gitignore”文件。我宁愿不使用 git 的子模块功能，因为这些对于我需要的东西来说太过分了。

理想情况下，我想创建一个 gitignore 文件，该文件忽略项目中的所有内容，除了目录“components/com_rhgallery”和“templates/rhgallery/”的内容

由于 git 的工作方式，以下简单的解决方案不起作用：

```
*
!components/com_rhgallery/
!templates/rhgallery/ 
```

Linus（他自己！）在一篇帖子中建议强制添加文件或目录，但这仅适用于要添加少量文件并且目录结构为静态失败的情况。

所以，我的问题是，你将如何创建一个 gitignore 文件来完成这个相对简单的任务，即确保只跟踪这两个目录中的那些文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:19:21.813

我相信

```
.gitignore :
*
!/components/com_rhgallery/*
!/templates/rhgallery/*

components/com_rhgallery/.gitignore :
!*
templates/rhgallery/.gitignore :
!* 
```

可能会解决您的问题。

# android - 在相同布局中重用图像

> ID：10002734
> 
> 赞同：0
> 
> 时间：2012-04-03T23:05:43.683
> 
> 标签：android, eclipse, android-image

我想知道是否可以在相同的布局上多次重复使用相同的图像视图。

示例：我正在为 Eclipse 中的 android 开发井字游戏。我已经绘制了表格，x's，o's 以提供更多的视觉吸引力。我想重用 x's o's 而不是创建 x1..x9 和 o1..o9 我可以重用 imageview 并指定我希望它定位的位置吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T23:21:05.137

不，恐怕你不能......但更现实的是，你不只是想要 square1...square9 并设置该正方形的源吗？例如，类似：

```
public void onClick(View v) {
  ImageView square = (ImageView) v;
  if(lastClickWasO) {
    square.setImageResource(R.drawable.x);
    lastClickWasO = false;
  }
  else {
    square.setImageResource(R.drawable.o);
    lastClickWasO = true;
  }
} 
```

# ember.js - emberjs：当我尝试使用动作助手时，我得到 - Handlebars 错误：在对象上找不到属性“动作”

> ID：10002737
> 
> 赞同：0
> 
> 时间：2012-04-03T23:06:02.407
> 
> 标签：ember.js

我一直在尝试将动作助手与 ember 一起使用。我收到以下错误：Handlebars error: Could not find property 'action' on object 。

我想我在这里的简化视图中遵循了示例：

```
<script type="text/x-handlebars" data-template-name="user-edit">
    <p><a href="#" {{action "showUsersList"}}>Back</a></p>
</script> 
```

视图对象：

```
App.UserEditView = Ember.View.extend({
    templateName: 'user-edit',
    userBinding: 'App.usersController.selectedUser',
    tagName: 'span',
    didInsertElement: function () {
        $('h1').html('Edit User');
        document.title = 'Edit User';
    },
    showUsersList: function(event) {
        App.usersController.showUsersList();
    }
}); 
```

知道为什么我不能像示例中那样使用动作助手吗？

谢谢，罗伯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:29:50.023

您也可以简单地创建视图并将其附加到文档中。您不需要第二个车把模板。

```
App.UserEditView = Ember.View.create({
    templateName: 'user-edit',
    userBinding: 'App.usersController.selectedUser',
    tagName: 'span',
    didInsertElement: function () {
        $('h1').html('Edit User');
        document.title = 'Edit User';
    },
    showUsersList: function(event) {
        App.usersController.showUsersList();
    }
}).append(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T03:26:54.490

我删除了一些特定于应用程序的逻辑，但让你的动作助手在[这个小提琴中工作](http://jsfiddle.net/dgeb/Qpkz5/273/)

**车把**：

```
<script type="text/x-handlebars" data-template-name="user-edit">
    <p><a href="#" {{action "showUsersList"}}>Back</a></p>
</script>

<script type="text/x-handlebars" >
  {{view App.UserEditView}}
</script>​ 
```

**JavaScript**：

```
App = Ember.Application.create({});

App.UserEditView = Ember.View.extend({
    templateName: 'user-edit',
    tagName: 'span',
    showUsersList: function(event) {
        alert('hi');
    }
});​ 
```

# ipad - 自定义输入视图（拆分键盘）

> ID：10002745
> 
> 赞同：7
> 
> 时间：2012-04-03T23:06:43.467
> 
> 标签：ipad, ios5, keyboard, inputview

我为 iPhone 创建了一个自定义输入视图，并决定将其转换为也可以在 iPad 上工作。我想让它像拆分键盘一样显示，因为它只有几个键。问题是，iPad 在当前版本中内置了 Undocking 键盘，使我的键盘在脱离时显示奇怪。如何防止我的自定义输入视图脱离或告诉 iOS 它是一个拆分键盘，因此它不会在底部显示该行。

![在此处输入图像描述](../Images/61ebfeab6fb5336cdb01c7ac100d2963.png)

键盘是具有清晰背景颜色的 UIView。由于 UIView 的子视图是键盘的两侧。取消停靠时，整个键盘的清晰 UIView 下方会显示一条线。我要么想摆脱这条线，要么阻止脱离。

谢谢！

# c# - 使用结构映射替换泛型类型参数中的抽象类型

> ID：10002748
> 
> 赞同：2
> 
> 时间：2012-04-03T23:07:02.980
> 
> 标签：c#, generics, abstract-class, structuremap

我有以下带有泛型类型参数的类。

```
public class ContentService<T> : IContentService where T : DataString, new()
{       
    public ContentService(IEnvironment environment, 
                          ILogger logger)
    {
        _environment = environment;
        _logger = logger;
    }
...
} 
```

DataString 是一个抽象类，每当我的应用程序创建 ContentService 的实例时，我希望 Structure Map 使用具体的实现 (XmlDataString)。当我这样做时，结构图已经在注入 IEnvironment 和 ILogger 的具体实现：

版本 1：

```
_contentService = ObjectFactory.GetInstance<ContentService<DataString>>(); 
```

...但是当我逐步执行时，ContentService 是使用 DataString 类型参数创建的，而不是 XmlDataString。我在 web.config 中有这三个设置默认实例的条目：

*   IEnvironment -> 测试环境
*   ILogger -> Log4NetLogger
*   数据字符串-> XmlDataString

Structure Map 站点对泛型有[此](http://structuremap.net/structuremap/Generics.htm)说法，但我似乎无法将该示例与我的实际问题联系起来。

这种方法有效，但我失去了构造函数参数的自动连接，它看起来很丑：版本 2：

```
Type typeOfDataString = ObjectFactory.GetInstance<DataString>().GetType();
Type genericClass = typeof(ContentService<>);
Type constructedClass = genericClass.MakeGenericType(typeOfDataString);
_contentService = (IContentService)Activator.CreateInstance(constructedClass, 
            ObjectFactory.GetInstance<IEnvironment>(), 
            ObjectFactory.GetInstance<ILogger>()); 
```

谁能告诉我我在第一个版本中做错了什么，或者我如何改进第二个版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:09:06.823

首先，当您编写 时`ObjectFactory.GetInstance<ContentService<DataString>>()`，您无法`ContentService<XmlDataString>`返回，因为这是一种不同的、不兼容的类型。

但似乎你真的想要`IContentService`，所以写下：`ObjectFactory.GetInstance<IContentService>()`。这将返回`IContentService`您注册的实现，因此您应该这样做：`ContentService<XmlDataString>`注册`IContentService`. `XmlDataString`您注册的事实`DataString`与此无关。

If you have problems representing the generic type `ContentService<XmlDataString>` in web.config, I think using the .Net representation of generic types (and not that of C#) should work. In your case, that would be something like `ContentService`1[[XmlDataString]]`, probably with added namespaces and possibly assemblies too.

# javascript - svg 仅克隆缩放组的形状

> ID：10002749
> 
> 赞同：0
> 
> 时间：2012-04-03T23:07:19.577
> 
> 标签：javascript, svg

我创建了一个组，然后缩放。我只想复制缩放组的形状而不是其他属性。特别是我想摆脱转换后的矩阵。我需要一个独立于缩放组的新组。我不知道是否可以这样做？这里的代码：

车组：

```
<svg id="game" version="1.1" xmlns="http://www.w3.org/2000/svg"
xmlns:xlink="http://www.w3.org/1999/xlink" onload="loadFunction()" >
    <!-- Car -->
    <g id="exCar" x="50" y="500"   transform="" >
        <path id="front" d="M 40 500  Q 110 450 110 500 L 40 500" fill="pink" stroke="black" />
        <path id="window" d="M 40 500 L 50 530 L 100 530 L 110 500 L 40 500 "stroke="black" />
        <path id="sides" d="M 40 500 L 40 580 L 50 560 Q 55 550 50 530 L 40 500 M 110 500 L 110 580 L 100 560 Q 95 550 100 530 L 110 500" fill="pink" stroke="black" />
        <path id ="back" d="M 40 580 L 100 560  L 40 580" fill="pink" stroke="blue" />
        <path id="wheels" d="M 40 475 L 30 475 L 30 500 L 40 500 z M 110 475 L 120 475 L 120 500 L 110 500 z M 40 545 L 30 545 L 30 570 L 40 570 z" fill="yellow" stroke="black" />
        <image id="carpicture2" x="50" y="455" xlink:href="img.jpg"></image>
        <text id="carName" x="50" y="575"></text>
    </g>
</svg> 
```

调用函数的按钮：

```
<rect x="120" y="600" width="80" height="30" stroke:#FF0066"  onclick="cloning()"/> 
```

复制功能：

```
function cloning() {
    var newCar = document.getElementById("exCar").cloneNode(true);
    newCar.setAttribute("x", 400);
    newCar.setAttribute("y", 600);
    document.getElementById("game").appendChild(newCar);
    alert("!!!!");
}; 
```

缩放：

```
document.getElementById("exCar").setAttribute(
        "transform",
        "matrix(" + result / 100 + ",0,0," + result / 100 + ","
                + (x - (result / 100 * x)) + "," + (y - (result / 100 * y))
                + ")"); 
```

（结果是从滑块计算出来的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:02:30.213

好的，我想我现在明白了这个问题，你正在点击克隆，所以 exCar 在那个时候已经被缩放了。

我想唯一的选择是清除克隆函数内的转换矩阵：

```
newCar.setAttribute("transform", "matrix(1,0,0,1,0,0)"); 
```

并进行翻译：

```
newCar.setAttribute("transform", "translate(350,100)"); 
```

[http://jsfiddle.net/mihaifm/ZR4r8/5/](http://jsfiddle.net/mihaifm/ZR4r8/5/)

# java - Java/Serializable - 仅覆盖已更改的对象

> ID：10002753
> 
> 赞同：1
> 
> 时间：2012-04-03T23:07:27.850
> 
> 标签：java, serialization

是否可以从文件中反序列化对象，然后将其中的少数序列化到同一个文件中？当然，前后对象的数量必须相同。我不想将新对象添加到文件中，而是覆盖更改的对象。例如，我从文件“file.ser”中获得了大约 1000 个对象。我将它们反序列化，只更改 3 并希望将它们覆盖到同一个文件中。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:37:26.670

不，您必须重新创建文件。对象流确实是一个流，而不仅仅是一组记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T23:58:29.383

简短的回答是否定的，您不能只在文件中“就地”覆盖更改的对象。

当您创建 时`ObjectOutputStream`，甚至在您将对象写入其中之前，流都会将一些[幻数标记字节](http://docs.oracle.com/javase/6/docs/platform/serialization/spec/protocol.html)写入底层流。`ObjectInputStream`当你创建一个字节时，这些字节会被自动消耗掉。这是流标头。

此外，当您使用 编写对象时`ObjectOutputStream.writeObject()`，您不仅仅是*将该*对象序列化为隔离。流跟踪它之前序列化的对象引用（除非您调用[`reset()`](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html#reset%28%29)），而不是完整地写出对象，它会写一个*句柄*，指向写回真实对象的位置。

最后，写入流的对象之间没有块对齐或填充——它们是连续写入的。

所有这一切都意味着，如果您更改对象，您所做的结构更改（对不同对象的引用等）意味着句柄可能不同，并且对象的长度可能不同。由于没有发生块对齐，因此您不能将对象写回同一位置，因为您所做的更改（可能）会影响长度并且不会相同，这意味着您会踩到另一个物体的顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:47:18.843

如果您关心速度，我一直发现 Java 非常快。阅读整篇文章可能不会受到太多惩罚 - 尝试一些分析。

您可以尝试用 Google Protocol Buffers 等替代方法替换 Java 序列化。

ProtoBuf 非常快速且非常节省空间。

# javascript - 如何让用户更改 jQuery UI 滑块的选项？

> ID：10002754
> 
> 赞同：0
> 
> 时间：2012-04-03T23:07:33.527
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-ui-slider

我的页面上有一个 jQuery UI 滑块。它开始于：

```
$( "#slider" ).slider({
    value: 6,
    min: 6,
    max: 120,
    step: 6
}); 
```

哪个工作正常。

我旁边有一个选择元素，其中有 6、12 和 24 作为选项。我想要完成的是让用户选择 12，滑块的步长、最小值和值都变为 12（24 相同）。我已经尝试构建一个函数：

```
$('#dropdown').change(function(){
    $( "#slider" ).slider( "option", "value", $(this).val() );
    $( "#slider" ).slider( "option", "min", $(this).val() );
    $( "#slider" ).slider( "option", "step", $(this).val() );
    $( "#slider" ).slider( "option", "max", 120 );
}); 
```

然而，所有这一切都是转到值 12，然后在单击滑块时，它一直跳到末尾 (120) 并停留在那里。

我是否需要销毁滑块并从头开始重新制作？

**编辑＃1：**

我刚刚下载了 Firebug 并使用控制台检查了滑块，所有值都返回正确（min=12，value=12，step=12，max=120）。有谁知道为什么它如此固执和跳跃/坚持到底？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:42:48.490

发现问题。`<select>` 在使用它来更改滑块的选项之前，您需要将值从 解析为int。

> ```
> $('#dropdown').change(function()
> {
>     var currentVal =  parseInt($("#slider").slider("value"));
>     var newOptions = parseInt($(this).val());
>     $( "#slider" ).slider( "value", currentVal);
>     $( "#slider" ).slider( "option", "min", newOptions );
>     $( "#slider" ).slider( "option", "step", newOptions );
>     $( "#slider" ).slider( "option", "max", 120 );
> }); 
> ```

# 工作示例

[http://jsfiddle.net/DigitalBiscuits/VSBCT/1/](http://jsfiddle.net/DigitalBiscuits/VSBCT/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T23:54:54.973

执行是正确的。但是你可以缓存结果

```
$('#dropdown').change(function(){
    var val = this.value;
    $( "#slider" ).slider( "option", "value", val );
    $( "#slider" ).slider( "option", "min", val );
    $( "#slider" ).slider( "option", "step", val );
    $( "#slider" ).slidYou can er( "option", "max", 120 );
}); 
```

# java - 如何避免重置 java Scanner 位置

> ID：10002756
> 
> 赞同：-1
> 
> 时间：2012-04-03T23:07:43.343
> 
> 标签：java, regex, java.util.scanner

我有一些看起来或多或少像这样的代码：

```
while(scanner.hasNext())
{
    if(scanner.findInLine("Test") !=null) {
    //do some things
    }else{
    scanner.nextLine();
    }
} 
```

我用它来解析一个~10MB 的文本文件。问题是，如果我在 while() 和scanner.nextLine() 上设置断点，我可以看到有时扫描仪位置（在调试窗口中）会回到零。我认为这导致我某种循环爆炸，因为 findInLine() 中的正则表达式从零开始，查看一些文本，推进位置，然后它随机设置回零，所以它必须重新- 再次解析所有文本。

有什么想法可能导致这种情况吗？我是否以正确的方式这样做？

谢谢

一些附加信息：

Scanner 是从 InputStream 实例化的。调试后，似乎有一个 Scanner 使用的 HeapCharBuffer，它一次只允许 1024 个字符，然后重置。有没有办法避免这种情况，或者做不同的事情？这似乎是可以扫描的少量字符。

德里克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T00:45:24.603

你正在混合`Scanner.hasNext()`和`Scanner.nextLine()`。不要那样做；他们以不同的方式处理标记化。

`hasNext()`与`next()`或`hasNextLine()`与一起使用`nextLine()`

# r - 使用三个“拼图”填充数据集

> ID：10002758
> 
> 赞同：2
> 
> 时间：2012-04-03T23:07:50.000
> 
> 标签：r

我有三个数据框，第一个（带有列标题，但没有行编号）看起来像

```
ID    1   2   3
 A   12  NA  NA
 B   NA   7  NA
 C   NA  NA  22 
```

第二个可能看起来像

```
ID    1   2   3
 A   NA   6  NA
 B   NA  NA  29
 C   43  NA  NA 
```

最后，第三个看起来像

```
ID    1   2   3
 A   NA  NA  32
 B    5  NA  NA
 C   NA   2  NA 
```

第一列是 ID 列，对于所有三个数据框都是相同的。最后三列代表相同的变量（1、2 和 3）。观察 A 的记录，变量 1 仅在其中一个数据集中。观测值 A 的记录也是如此，变量 2，但它位于不同的数据集中。

如何将这些数据集合并在一起以获得类似

```
ID    1   2   3
 A   12   6  32
 B    5   7  29
 C   43   2  22 
```

抱歉，我没有更好的方法来描述这个问题。如果有人可以分享它的术语，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T00:57:19.313

I'm not sure if you can do this directly with data frames, but it is very easy to convert them to matrices first if not:

```
x <- matrix(c(12,NA,NA,NA,7,NA,NA,NA,22),3,3)
y <- matrix(c(NA,NA,43,6,NA,NA,NA,29,NA),3,3)
z <- matrix(c(NA,5,NA,NA,NA,2,32,NA,NA),3,3)
b <- matrix(0,3,3)
b[!is.na(x)] <- x[!is.na(x)]
b[!is.na(y)] <- y[!is.na(y)]
b[!is.na(z)] <- z[!is.na(z)]
b
     [,1] [,2] [,3]
[1,]   12    6   32
[2,]    5    7   29
[3,]   43    2   22 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T23:28:53.033

[我没有想出它，](https://stat.ethz.ch/pipermail/r-help/attachments/20090307/410492a4/attachment.pl)但是：

```
merge.new<-function(...,col.ID){
    inter<-merge(...)
    inter<-inter[order(inter[col.ID]),] #merged data sorted by ID

    #total columns and rows for the target dataframe
    total.row<-length(unique(inter[[col.ID]]))
    total.col<-dim(inter)[2]
    row.ID<-unique(inter[[col.ID]])
    target<-matrix(NA,total.row,total.col)
    target<-as.data.frame(target)
    names(target)<-names(inter)

    for (i in 1:total.row){
        inter.part<-inter[inter[col.ID]==row.ID[i],] #select all rows with the same ID
        for (j in 1:total.col){
            if (is.na(inter.part[1,j])){
                if(is.na(inter.part[2,j])) {target[i,j]=NA}
                else {target[i,j]=inter.part[2,j]}
            }
            else {target[i,j]=inter.part[1,j]}

        }
    }
print(paste("total rows=",total.row))
print(paste("total columns=",total.col))
return(target)
} 
```

如果您的数据被命名为一、二和三：

```
> one
  ID  1  2  3
2  A 12 NA NA
3  B NA  7 NA
4  C NA NA 22
> two
  ID  1  2  3
2  A NA  6 NA
3  B NA NA 29
4  C 43 NA NA
> three
  ID  1  2  3
2  A NA NA 32
3  B  5 NA NA
4  C NA  2 NA
> merge.new(merge.new(one, two, all=TRUE, col.ID=1), three, all=TRUE, col.ID=1)
[1] "total rows= 3"
[1] "total columns= 4"
[1] "total rows= 3"
[1] "total columns= 4"
  ID  1 2  3
1  A 12 6 32
2  B  5 7 29
3  C 43 2 22
> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T00:51:46.677

Nice title! This is quite similar to [R - Vector/ Array Addition](https://stackoverflow.com/questions/9900690/r-vector-array-addition/9900741#comment12631875_9900741)

You can turn your data into a multi-dimensional array then sum or take the mean across the "puzzle piece" dimension:

```
df1 <- read.table(text="ID    1   2   3
A   12  NA  NA
B   NA   7  NA
C   NA  NA  22", header = TRUE)

df2 <- read.table(text="ID    1   2   3
A   NA   6  NA
B   NA  NA  29
C   43  NA  NA", header = TRUE)

df3 <- read.table(text="ID    1   2   3
A   NA  NA  32
B    5  NA  NA
C   NA   2  NA", header = TRUE)

# gather inputs and remove common ID column
lists  <- list(df1, df2, df3)
pieces <- lapply(lists, '[', , -1)

# turn data into a multi-dimensional array
a <- array(unlist(pieces), dim = c(nrow(df1),
                                   ncol(df1) - 1,
                                   length(pieces)))

# compute sums across pieces
rowSums(a, na.rm = TRUE, dims = 2)
# [,1] [,2] [,3]
# [1,]   12    6   32
# [2,]    5    7   29
# [3,]   43    2   22 
```

Then you're only left with pasting the ID column back.

# regex - Apache ModRewrite 模式未存储

> ID：10002759
> 
> 赞同：0
> 
> 时间：2012-04-03T23:07:50.130
> 
> 标签：regex, bash, mod-rewrite, lamp

我无法弄清楚为什么以下不起作用

```
RewriteCond ${foobar:test:$1} ^
RewriteRule ^/?(.*)$ /check.php?url=$1 [L] 
```

`foobar`是一个程序（简单的 bash 脚本），我在其中写入文件以查看输入是什么。`check.php`是一个简单的 php 脚本，它显示`GET`. 这是我将正则表达式 ( `$1`) 传递给 shell 脚本和 php 脚本时得到的结果：

```
url                          check.php             foobar

www.example.com/index.html   index.html            test:
www.example.com/index.php    index.php             test:
www.example.com/test.html    test.html             test: 
```

基本上，模式在 RewriteRule 中被识别，但不是 foobar 的参数。

注意：shell 脚本没有任何问题。相反，如果我这样称呼它，`${foobar:test:abc123}`则输出为“ `test:abc123`”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:23:07.570

在我看来，我的观点是：

```
RewriteCond ${foobar:test:$1} ^ 
```

第一个**`$1`**是无意义的，因为**`$1`**应该引用以前的表达式，例如：

```
RewriteRule ^/?(.*)$ /check.php?url=$1 [L] 
```

所以我不明白这是如何工作的，如果有什么工作，那就……奇怪了。

见[http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap)

也许是这样的：

```
RewriteRule ^(.*)$ ${foobar:test:$1} [R,L,NC] 
```

可以工作。

# jquery - jQuery 图像褪色由于未知原因无法正常工作...？

> ID：10002763
> 
> 赞同：1
> 
> 时间：2012-04-03T23:08:44.873
> 
> 标签：jquery, html, opacity, fade

就在我以为我已经完成了一晚的工作时，另一个问题是让我保持清醒。

看来我以某种方式打破了我在缩略图上使用的淡入淡出。如果你去这里： http: [//ftfranes.com/mliad2/](http://ftfranes.com/mliad2/) 当你将鼠标悬停在缩略图上时，它应该会淡出。

给你一个想法，这是脚本的一个工作版本：[http://nothingcantuochme.com/stackoverflow.php#download_page](http://nothingcantuochme.com/stackoverflow.php#download_page) 正如你所看到的，悬停与淡入淡出效果很好。请注意这个混乱，我只是添加它来演示。

有没有人可以帮助我解决这个问题？如果我告诉你我并没有完全迷失，我会撒谎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:28:52.120

```
$(function() {
    // JUST CHANGE THE SELECTOR
    // MAY NEED TO REFINE IF IT AFFECTS OTHER ELEMENTS
    $('.image > a').each(function() {
    /*$(this).append('<div style="position:absolute; top:5px; left:5px; width:200px; height:150px; background:red;"></div>');*/
        $(this).hover(function(){
            $(this).find('img').stop().animate({
                opacity: 0.8
            })
        },function(){

            $(this).find('img').stop().animate({
                opacity: 1
            })
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T23:26:11.457

我的想法是，Javascript 在处理过程中停止。检查您的调试控制台。

错误：未捕获的异常：错误： http: [//www.facebook.com](http://www.facebook.com)获取属性 Proxy.InstallTrigger的权限被拒绝

如果您的淡出脚本在此代码之后，则该脚本将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T23:30:42.160

好的，据我所知，问题就在这里。

```
<a href="http://vimeo.com/24849072" class="vimeo_nothingcan"> <img alt="" src="images/nothingcan.png"> </a> 
```

您的链接的类名称不正确。在 script.js 文件中，它指定类必须是 vimeo、youtube zoom 等......您需要将您的类重命名为“vimeo nothingcan”，不带下划线。

检查 script.js 的第 680 行

您在评论中提到的功能设置为事件“​​onclick”。您需要编辑绑定到“悬停”的 680 上的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T23:46:42.320

script.js 678 中的选择器：

```
$('a.zoom, a.vimeo, a.youtube, a.vimeo_final') 
```

但是在您的页面中，该课程是`a.vimeo_nothingcan`

尝试在该行的选择器中添加：“a.vimeo_nothingcan”：

```
$('a.zoom, a.vimeo, a.youtube, a.vimeo_final,a.vimeo_nothingcan') 
```

# python - python中的字符串变体-它们是什么意思？

> ID：10002764
> 
> 赞同：0
> 
> 时间：2012-04-03T23:08:53.837
> 
> 标签：python

这是一个完整的菜鸟问题....

但是为什么python中的一些字符串显示为：

```
{u'foobar: u'bar} 
```

而其他人则显示为：

```
{foobar: bar} 
```

它们是等价的吗？你如何在两者之间转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T23:19:52.290

**不，它们不等效**

字符串前面的“u”表示它是 Unicode。Unicode 被设计为一个扩展字符集，以适应非英语的语言。您可以阅读这段有趣且非技术性的 Unicode 历史。

[http://www.reigndesign.com/blog/love-hotels-and-unicode/](http://www.reigndesign.com/blog/love-hotels-and-unicode/)

正如 Lattyware 所提到的，在 Python 3.x 中，所有字符串都是 Unicode。

如果您使用的是 Python 2.x，尤其是在 Web 上，那么确保您的程序正确处理 Unicode 是值得的。很多人喜欢抱怨不支持 Unicode 的网站。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T23:13:07.707

`u`前缀表示字符串是 Unicode ..

[http://docs.python.org/reference/lexical_analysis.html](http://docs.python.org/reference/lexical_analysis.html)

请参阅第 2.4.1 节：

> 'u' 或 'U' 前缀使字符串成为 Unicode 字符串。Unicode 字符串使用 Unicode Consortium 和 ISO 10646 定义的 Unicode 字符集。下面描述的一些额外的转义序列在 Unicode 字符串中可用。在 Python 2 中，前缀 'b' 或 'B' 被忽略；它表示文字应该成为 Python 3 中的字节文字（例如，当代码使用 2to3 自动转换时）。'u' 或 'b' 前缀后面可能跟有 'r' 前缀。

如您所见，Python 将能够自动比较各种编码的字符串：

```
>>> a = u'Hello'
>>> b = 'Hello'
>>> c = ur'Hello'
>>> a == b
True
>>> b == c
True 
```

[您可以通过参考文档](http://docs.python.org/howto/unicode.html)了解更多关于 Python 中的 Unicode 字符串（以及如何转换或编码字符串）的信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-03T23:13:21.703

Using`u'string'`定义字符串是 unicode 类型。

```
>>> type('hi')
<type 'str'>
>>> type(u'hi')
<type 'unicode'> 
```

您可以在[uncode 文档页面](http://docs.python.org/howto/unicode.html#python-2-x-s-unicode-support)中阅读所有相关信息。

# css - 使用 LESS：编译缩小版和非缩小版的 CSS

> ID：10002767
> 
> 赞同：1
> 
> 时间：2012-04-03T23:09:09.343
> 
> 标签：css, compiler-construction, less

首先让我问一下是否有人知道像 simpLESS 或 LESS.app 这样的编译器，它可以将 LESS 编译成缩小版和非缩小版的 CSS？或者是否有人修改了这些程序中的任何一个以保存两者（一个用于生产，一个用于开发）。

在一个非常大的网站上工作，现在能够实现 LESS，这为我们节省了大量时间，但也需要改变工作流程。我希望经历过类似事情的人会知道可能的解决方案。

另外，还没有看过LESSphp ...也许有机会在本地配置它以编译我们想要的东西。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:49:34.913

SimpLESS 有一个标志，可以通过放入`//simpless:!minify`LESS 文件来关闭缩小。然后，您可以通过链接另一个 LESS 文件轻松设置缩小和非缩小。你会希望你的文件看起来像这样：

**main.min.less**

```
Body{
    color:#000;
}

/*Here goes all your LESS, imports of other LESS files etc*/ 
```

**main.less**

```
//simpless:!minify
@import "main.less"; 
```

轻松观看这两个文件。所做的任何更改都会使其重新编译两个版本。然后你会得到`main.css`哪个不是缩小的，`main.min.css`哪个是缩小的。

# winapi - WM_GESTURE：检索所有手指？

> ID：10002768
> 
> 赞同：1
> 
> 时间：2012-04-03T23:09:14.023
> 
> 标签：winapi, touch, gesture-recognition, gestures

我正在使用 WM_GESTURE 来操纵我的 3D 场景，如果我用 1 根手指平移或用 2 根手指平移，我想执行不同的手势。

我知道我可以自己触摸并做所有事情，但我喜欢使用手势，因为它可以正确解释所有触摸并将它们转换为手势。

在收到 GID_PAN 事件后，如何检测用户是使用 1 根手指还是 2 根手指及其位置？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T15:49:44.180

我已经找到答案了。

在尝试在这里发布问题之前一整天都想弄清楚之后，现在我找到[了这个链接](https://web.archive.org/web/20121105223518/http://www.webworldarticles.com/e/a/title/Use-the-Pan-Gesture-to-Move-an-Object/)，它解释了`ullArguments`. 当我平移时，它将存储手指之间的距离。因此，如果是单指平移，则 ullArguments 将为 0；否则，它将是一个正数。

# python - 需要使用 python/django 从网页 ssh 到远程机器

> ID：10002771
> 
> 赞同：0
> 
> 时间：2012-04-03T23:09:19.407
> 
> 标签：python, django, ssh

我获得了一个 python 脚本，它可以远程登录到某些设备，或者如果设备在实验室中，则 ssh 到防火墙机器，然后它将远程登录到设备，并运行命令，返回输出以进行更多处理。

我把这个脚本绑定到一个 Django Web 应用程序中，这样我就可以从浏览器中填写一个包含目标系统信息的表单并让它显示结果。如果我从命令行启动这个 Web 应用程序，然后从浏览器（python manage.py 应用程序）访问它，一切正常。

但是，如果我将其设置为在“生产”模式下运行，使用带有 Apache 的虚拟主机，SSH 会失败。我怀疑这是在 root 或某个 Web 帐户下运行的，并且无法通过 SSH 连接到防火墙。

有人可以建议我如何让它工作吗？我在防火墙机器上没有任何权限，所以我无法设置 SSH 在某个 Web 帐户下运行。

在使用 SSH 的情况下，我是否需要从用户那里收集用户名和密码，然后将其传递给 ssh，或者是否有其他方法可以将 telnet 信息和命令传递给设备？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T00:14:14.297

你很近。这里的问题可能是您的 Web 服务器作为非特权用户（不是 root）运行，例如`www`or`www-data`或`nobody`（取决于您的操作系统）。虽然该用户可能可以运行 SSH 二进制文件，但这样做时`nobody`，它可能没有主目录，找不到您的 .ssh 目录，也找不到`.ssh/id_rsa` 它需要的密钥文件（例如）用于身份验证。

你有很多选择。让您的私钥可用于 Web 服务器软件，然后启动 ssh 并`-i`选择身份文件。或者在您使用该`-F`选项指定的 SSH 配置文件中执行此操作。或者使用 启动 ssh `sudo`，并让您的 Web 服务器软件能够以其他（shell）用户身份运行 ssh。

我无法提供更具体的答案，因为您没有在问题中提供具体信息。操作系统、示例代码等

希望这可以帮助。

哦，您还应该考虑不这样做，并找到其他解决方案。可以通过 SSH 访问防火墙的 Web 应用程序，甚至是内部应用程序？对我来说，这听起来像是最终灾难的秘诀。:-)

# windows-phone-7 - 如何像 WP7 浏览器的地址一样水平滚动文本框

> ID：10002772
> 
> 赞同：1
> 
> 时间：2012-04-03T23:09:33.633
> 
> 标签：windows-phone-7, textbox, scroll

我的 Wp7 应用程序中有一个 TextBox，它可以包含比可视屏幕容纳更多的数据。我想让用户能够通过滚动来实际阅读文本。这是浏览器地址栏的工作方式。只需左右滑动文本即可阅读。点击文本，您进入编辑模式（即使在编辑模式下，用户也可以滑动文本）。我需要这是一个 TextBox 而不是 TextBlock，因为我也需要在这个字段上输入数据。

有人对如何在浏览器中完成此操作有任何想法吗？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:01:59.653

您可以使用以下内容滚动整个文本框控件，而不是文本框中的文本：-

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <ScrollViewer Grid.Row="0"
                      VerticalScrollBarVisibility="Disabled"
                      HorizontalScrollBarVisibility="Visible">
            <TextBox Text="Some really long sample text which we are going to scroll" />
        </ScrollViewer>
    </Grid> 
```

希望这可以帮助。

# ios5 - 将 UIManagedDocument 从沙盒移动到 iCloud

> ID：10002776
> 
> 赞同：1
> 
> 时间：2012-04-03T23:09:46.477
> 
> 标签：ios5, icloud, uimanageddocument, icloud-api

我的总体问题是如何将现有的`UIMangedDocument`（具有核心数据 sql 存储）从本地沙箱移动到 iCloud。

我在网上阅读的所有内容都在告诉我使用`NSFileManager`'s `setUbiquitous:itemAtURL:destinationURL:error:`. 但是，当这样做时，我注意到它`persistantStore`被复制到我认为是错误的云中。考虑到这个问题，我开始认为我应该在云中创建一个新文档，然后手动插入现有记录（因为沙箱中的现有数据库没有任何事务日志）。

那么，我的思路是正确的，还是将`persistantStore`那里复制的内容用作起点（因此，如果连接了另一台设备，它将下载`persistantStore`作为基础，然后应用之后发生的任何新事务）？

第二个相关问题（只是为了确认我对工作原理的理解`UIManagedDocument`），如果我要创建一个文档（在云中），添加一条记录并更新同一记录 100,000 次，然后在新设备上打开此文档，会不会必须将 100,001 个事务应用到新数据库吗？似乎一个被大量使用的文档将继续消耗云上的空间，即使该文档具有最少的数据但有很多更新。

# tfs - TFS 2010：WorkItem.Save 再次触发 WorkItemChangedEvent

> ID：10002780
> 
> 赞同：0
> 
> 时间：2012-04-03T23:10:10.373
> 
> 标签：tfs, event-handling

我最好从解释我正在尝试做的事情的高级概述开始（以防万一我要解决这个可怕的错误）：在 TFS 中，我们有一个包含“优先级”字段的“故事”工作项。在任何给定时间，我们可能有 20-30 个具有优先级的故事。例如，我们可能有 20 个完全优先的故事（1 到 20），然后想要创建一个新的故事，这应该是我们新的首要任务。所以，我希望能够给它优先级 1，然后有一个服务器端插件，它将更新所有其他故事的优先级，这样我最终得到 1 到 21（1 是我们的新故事刚刚创建）。

为此，我为 TFS 2010 创建了一个订阅 WorkItemChangedEvent 的服务器端插件。判断优先级是否已更新是足够聪明的，因此在这种情况下它只会更改工作项。我遇到的问题是，如果我更改优先级并运行 WorkItem.Save()，它会再次触发 WorkItemChangedEvent，并且优先级已更改，因此逻辑为真，它会再次更新并保存。

早些时候，我创建了一个服务器端插件，将其中一个日期时间字段的时间更新为 00:00:00（如果它还不是 00:00:00）并注意到了这种行为。这不是太大的问题，因为在第二次运行时，什么都不会发生，因为时间已经是 00:00:00。但是在这种尝试更新一大堆工作项的优先级的情况下，它是一个交易破坏者。有没有办法阻止 WorkItem.Save() 触发 WorkItemChangedEvent？也许另一种方法可以完全做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:16:41.480

我知道解决此问题的最简单方法是添加特定评论，然后检查工作项的评论/历史记录项，以查看您上次更新它作为您正在进行的更改的一部分。

此外，请查看以下[帖子，了解如何创建服务以使其保持稳定](http://blogs.microsoft.co.il/blogs/assafstone/archive/2011/07/29/how-to-write-a-robust-tfs-server-plugin-with-job-extensions.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T13:56:57.810

我通过检查更改者身份是否是服务身份，在我自己的扩展中解决了这个问题。如果是，则跳过逻辑。

这似乎是一个比标记数据更优雅的解决方案。

```
var workItemChangedArgs = notificationEventArgs as WorkItemChangedEvent;
var identityService = requestContext.GetService<IdentityService>();
var changerIdentity = identityService.ReadIdentities(
    requestContext,
    new List<IdentityDescriptor> {
        IdentityHelper.CreateDescriptorFromSid(workItemChangedArgs.ChangerSid)
    },
    QueryMembership.Expanded,
    null).Single();
if (!IdentityHelper.IsServiceIdentity(requestContext, changerIdentity)) {
    // Do stuff….
} 
```

# java - 用于人工智能中对手预测的神经网络

> ID：10002782
> 
> 赞同：-2
> 
> 时间：2012-04-03T23:10:27.923
> 
> 标签：java, artificial-intelligence, machine-learning, neural-network

目前我正在做一个项目，我正在为游戏创建一个 AI 播放器。我正在使用 UCT 算法，我计划添加对对手移动的预测。为此，我想使用神经网络，但遇到了一些问题：

1.  已经有一些数据我想为默认玩家构建一个基本的神经网络，即我以前从未见过的玩家。问题是我想更新这个网络，以便它适应每个特定的对手。我曾尝试搜索在线神经网络算法，但到目前为止还不是很成功。你能给我一些建议如何实施吗？如何在不完全从头开始训练的情况下根据新数据更新参数？

2.  编码是用 Java 完成的，我尝试使用 Weka 来处理我拥有的数据。然而，我在那里找到的唯一神经网络分类器是多层感知器。我熟悉单层感知器，我知道它的输出不是概率（与对数线性或朴素贝叶斯分类器相反）。多层感知器也不是生成器吗？如果是这样，使用它输出的这些“分数”作为概率有多不准确？我应该使用不同的神经网络算法吗？如果是这样，是否有可用的 Java 库？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T23:09:29.087

好的，所以我对此有更多了解并进行了更多研究，我决定按以下步骤进行：

1.  由于我没有找到更好的方法，我将使用通常的反向传播算法对新的训练值执行 1 个更新步骤。据我所知，使用新值进行 1 次更新是其他一些算法中的常用方法，当人们将它们转换为在线学习时。不过，找到正确的学习率可能会很有趣。由于这种方法每次移动只会进行 1 次更新，因此不需要对反向传播进行太多优化，因此我将编写自己的解决方案并且不会使用任何库。

2.  在这里，我可能会放弃 Weka 工具，而尝试使用 FANN 库。由于我在计算默认参数后不需要使用它，因此它实际上是用不同的语言实现的并不重要。

如果您知道更好的解决方案，请告诉我。谢谢。

# c# - 我需要显示我的 ListViewItems 的整个文本（未截断）

> ID：10002783
> 
> 赞同：1
> 
> 时间：2012-04-03T23:10:45.413
> 
> 标签：c#, .net, winforms, listview, listviewitem

我正在显示的 ListViewItems 分类在 ListView 中的 ListView Groups 中，只显示它们的 Text 属性，并在此被截断（即使它们是特定组中的唯一项目，并且有英亩和公顷的屏幕空间可用） .

我希望他们确实显示他们的 Text 属性，但要完整地显示，而不是截断。

我以这种方式分配 ListViewItem 文本属性：

```
public LegacyApplication(String AAppName, String ATitle, String ADesc, String AIconFileName, String APathOfExe) {
  . . .
  base.Text = ATitle;
  . . .
} 
```

我做错了什么或做错了什么？是否有一些我不知道的属性会控制 ListViewItem 上文本的外观？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-05T09:01:55.817

Windows 资源管理器还为修剪的文本设置工具提示，它还使用 ListView 控件。您可以通过处理 MouseMove 事件并使用 ListView.GetItemAt(...) 来找出鼠标正在移动的项目来模仿它的行为。或者，您可以使用 ItemMouseHover 事件，但是我发现 MouseMove 对用户更友好，因为用户不必实际悬停并等待工具提示弹出...。

我使用以下逻辑来模仿 Windows 资源管理器的行为（此示例只是草稿，可能包含错误）：

```
 //get the item at the current mouse location.
     ListViewItem item = myListView.GetItemAt(e.X, e.Y);
     if (item != null)
     {
        using (Graphics graphics = this.myListView.CreateGraphics())
        {
           var itemTextWidth = graphics.MeasureString(item.Text, item.Font).Width;
           if (itemTextWidth > myListView.Width)
           {
              if (!item.Equals(itemsToolTip.Tag) && !itemsToolTip.Active)
              {
                 //Set the tooltip , tag it with the item and set it as active ... 
              }
              // Adjacent ' text trimmed' list view items.  
              else if (!item.Equals(itemsToolTip.Tag))
              {
                 //set the tooltip as none active.
              }
           }
           else//None trimmed list view items.
           {
              //clear the tooltip and set it as none active
           }
        }
     }
     else
     {
        //clear the tooltip and set it as none active
     }
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T02:17:17.307

不确定这是否适合您的情况，但也许您可以尝试使用[AutoResizeColumn 方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.autoresizecolumn.aspx)；设置为`ColumnContent`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-04T10:04:01.267

我知道这是一个老问题，但我确信 Dr.Wilys 对 AutoResizeColumn 的回答应该是正确的，所以稍微探索了一下......

将输出写入列表视图（我的是批量 sql 服务器操作的输出）后，我更新了列表视图（此处为 lstResults）：

```
lstResults.AutoResizeColumn(0, ColumnHeaderAutoResizeStyle.HeaderSize);
lstResults.AutoResizeColumn(1, ColumnHeaderAutoResizeStyle.ColumnContent); 
```

这对我有用...注意我的视图类型是**Details**，我没有尝试过其他的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T02:04:46.767

如果您想要 ListView 中的多行文本，请查看[ObjectListView](http://www.codeproject.com/KB/list/objectlistview.aspx)（一个围绕 .NET WinForms ListView 的开源包装器）。这解决了与所有者绘图相关的许多问题（以及其他 ListView 烦恼）。

我会将此作为评论，但它是答案，并且有一个可爱的屏幕截图：[WinForms ListView 控件上的多行列表项？](https://stackoverflow.com/questions/1673963/multi-line-list-items-on-winforms-listview-control)

然后，如果您有任何疑虑，请查看后续内容： [如何使用 ObjectListView 在列中对文本进行 wordWrap](https://stackoverflow.com/questions/2653781/how-to-wordwrap-the-text-in-a-column-using-objectlistview)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-07T15:58:12.743

我发现最好的解决方案是使用 View = View.Tile。

这会显示大部分文本；我的解决方法是将文本分配给每个项目的工具提示，以便在仍未显示全文的情况下，用户可以悬停并进入视线。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-06-25T10:26:04.990

@Ahmad 答案的充实版本（对不适合的项目使用工具提示）：

```
 void SetTooltipForNonFittingItems(ListView listView)
    {
        var tooltip = new ToolTip();
        listView.MouseMove += (_1, e) =>
        {
            ListViewItem item = listView.GetItemAt(e.X, e.Y);
            if (item != null)
            {
                using (Graphics graphics = listView.CreateGraphics())
                {
                    var itemTextWidth = graphics.MeasureString(item.Text, item.Font).Width;
                    if (itemTextWidth > listView.Width)
                    {
                        if (!item.Equals(tooltip.Tag))
                        {
                            tooltip.Active = true;
                            tooltip.Tag = item;
                            // as written, the tooltip covers the item
                            // if you prefer to show it at the location of the cursor,
                            // use listView.PointToClient(Cursor.Position)
                            tooltip.Show(item.Text, listView, item.Position);
                        }
                    }
                    else
                    {
                        tooltip.Tag = null;
                        tooltip.Active = false;
                    }
                }
            }
            else
            {
                tooltip.Tag = null;
                tooltip.Active = false;
            }
        };
    } 
```

# msbuild - tfsbuild --- 如何输出到 2 个不同的源

> ID：10002785
> 
> 赞同：0
> 
> 时间：2012-04-03T23:10:54.233
> 
> 标签：msbuild, tfsbuild

我使用 tfsbuild 有一段时间了。按照我们目前的结构，它一直运作良好，但现在情况不同了。我知道 tfs 构建输出到 sln 文件和 builddropbox 中提到的那个。但我担心的是我想将每个解决方案文件的二进制文件输出到其不同的目录而不是一个平面结构。有没有办法我们可以做到这一点。我正在使用 tfsbuild 并根据要求修改构建定义。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:35:42.340

试试看这个帖子

[http://lajak.wordpress.com/2011/07/30/customize-binaries-folder-in-tfs-team-build-part-2/](http://lajak.wordpress.com/2011/07/30/customize-binaries-folder-in-tfs-team-build-part-2/)

# css - 如何缩写表格元素的长 Selenium CSS 代码？

> ID：10002788
> 
> 赞同：1
> 
> 时间：2012-04-03T23:11:18.813
> 
> 标签：css, css-selectors, selenium-rc, selenium-chromedriver

我在缩写以下 selenium CSS 代码时遇到问题，该代码在多个表中包含元素。下面的代码给了我两个复选框。

```
table[id$=gridReports]>tbody>tr:nth-of-type(2)>td:nth-of-type(2)>table[id$=panelReportInformation]>tbody>tr:nth-of-type(2)>td>table[id$=panelReportContent]>tbody>tr:nth-of-type(2)>span[id$=reportCheckBox] input 
```

我不能使用此代码，因为还有另一个具有相同跨度和复选框的表。唯一的区别是它在不同的行中。因此，如果我将代码放入另一个复选框，它将如下所示。

```
table[id$=gridReports]>tbody>tr:nth-of-type(3)>td:nth-of-type(2)>table[id$=panelReportInformation]>tbody>tr:nth-of-type(2)>td>table[id$=panelReportContent]>tbody>tr:nth-of-type(2)>span[id$=reportCheckBox] input 
```

所以唯一的区别是每个表的 nth-of-type(i) 。那么如何缩短css代码呢？

是否有任何我可以缩短的选项，例如 table[id$=gridReports]>tbody>tr:nth-of-type(i) 后跟 span[id$=reportCheckBox] 输入。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T04:01:14.403

你可以通过缩小你的宇宙来缩短它

```
el = driver.find_element_by_css_selector("table[id$=gridReports]>tbody>tr:nth-of-type(3)")
el.find_element_by_css_selector("span[id$=reportCheckBox] input") 
```

或者

```
els = driver.find_elements_by_css_selector("span[id$=reportCheckBox] input")
for el in els:
    el.click() 
```

这是在 python 中，但在所有绑定中的想法相同，因为您可以将 webelement 请求链接到以前的 webdriver 元素

# hibernate - 用于 NOT IN 的 Grails 命名查询

> ID：10002796
> 
> 赞同：0
> 
> 时间：2012-04-03T23:12:21.230
> 
> 标签：hibernate, grails, criteria, named-query

试图想出一种简洁的方法来创建带有 NOT IN 子句的命名查询。限制类似乎没有“不在”构造。有人知道这样做的好方法吗？

**解决方案**：

```
static namedQueries = {
        activeOnly {
            eq 'active', true
        }
        open {
            ne 'state', this.STATE_COMPLETED
        }
        my { user ->
            or {
                eq 'createdBy', user
                eq 'reviewer', user
                eq 'assignee', user
                eq 'requestedFor', user
                ilike 'notifyList', "%$user%"
            }
        }
        topLevel {
            not {'in'('type', [RequestType.Part])}
        }
    } 
```

注意：必须引用“in”这个词，因为它是保留的。

这些命名查询可以这样使用：

```
Request.activeOnly.open.topLevel.list(params) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:18:17.487

也许是这样的：

```
Book.findAll("from Book b where b.author not in (?)", ['Borges', 'Sabato', 'Cortazar']) 
```

或使用标准

```
Book.withCriteria {
    not {
        'in'('author', ['Borges', 'Sabato', 'Cortazar'])
    }
} 
```

[http://grails.org/doc/1.3.x/ref/Domain%20Classes/createCriteria.html](http://grails.org/doc/1.3.x/ref/Domain%20Classes/createCriteria.html) - “in”标准方法的文档也有一个链式“not”方法。

# sql-server - 覆盖 SQL Server 中 bigint 数据类型的最大值

> ID：10002798
> 
> 赞同：3
> 
> 时间：2012-04-03T23:12:29.880
> 
> 标签：sql-server, sql-server-2008, tsql, constraints

数据库管理员是否可以覆盖数据类型可以保存的最大值`bigint`（使其小于文档中列出的值）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-03T23:14:17.147

是的，您可以在列上设置检查约束

例子

```
ALTER TABLE SomeTable
ADD CONSTRAINT chkMaxValue CHECK (SomeCol < 123456 );
GO 
```

您也可以使用触发器来限制它，但这太过分了

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-03T23:16:35.463

不，但您可以自己创建一个检查，以便值不会超过某个值，如下所示：

```
create table test_bigint(
my_value bigint check (my_value <100)
) 
```

# git - 语义版本控制如何融入 git 工作流程

> ID：10002803
> 
> 赞同：7
> 
> 时间：2012-04-03T23:13:19.550
> 
> 标签：git, versioning

我目前在使用 git 的语义版本控制时遇到问题。

我们在[http://nvie.com/posts/a-successful-git-branching-model/使用 git 版本控制模型](http://nvie.com/posts/a-successful-git-branching-model/)

我们还希望遵循[http://semver.org/中概述的语义版本控制指南](http://semver.org/)

这是我们的一个示例用例。

```
Release branch: ----1----2----3----4 <- tag v1.2        ----7---8---9 <- tag v1.3
                   /                \                  /             \
Develop branch: --0--------5---------4--6-----------------------------9-- 
```

这是我们的示例用例：

*   开发在发布和开发时并行发生
*   发布已准备就绪，我们将其标记为 v1.2。我们为更改 1、2、3、4 生成发行说明。
*   我们将发布合并回开发。
*   当我们准备再次为另一个版本开发分支时，我们可以。但是，标签 v1.2 指向 4，因此如果我们查询 v1.2 和 v1.3 之间的更改，5 的发行说明实际上会丢失

我们想要做的是能够搜索自创建标签 v1.2 以来所有新添加的签入，这些签入新合并到标签 v1.3 中，以便我们可以确定我们的组件的版本凹凸 (xyz) 类型需要制作。

如果 5 恰好是一个重大更改，但从 v1.2 开始的所有内容都不是，我们将错误地碰撞次要版本，因为签入 5 不在构建中。

有人对如何解决这个问题有任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T01:09:06.437

我想这取决于您如何“查询更改”。但是，如果您的意思是 using`git log v1.2..v1.3`或类似的东西，那么这应该会*准确地*显示您想要的内容，即包括提交 5。

# php - 对象而不是全局命名空间上的 parse_str

> ID：10002810
> 
> 赞同：0
> 
> 时间：2012-04-03T23:14:43.417
> 
> 标签：php, security

通常使用`parse_str('name=me&hungry=yes')`将产生一个变量`$name`并`hungry`分别等于`'me'`和`'yes'`。

使用这个函数的问题是我通过用户输入运行它，并且因为这个变量被放在全局命名空间中，所以确保我不能受到任何攻击而感到不舒服。

有没有办法让这个功能只将值放入给定的变量中？例如类似的东西`parse_str('name=me&hungry=yes', $obj)`将使`obj`等于

```
array('name' => 'me', 'hungry' => 'yes'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:19:02.660

不仅例如，而且确切地说。请参阅[`parse_str`^(*Docs*)](http://php.net/parse_str)，尤其是示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T23:23:59.950

的第二个参数`parse_str()`将是一个参数数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T23:43:06.873

`parse_str($string,$newarray)`

$newarray 是您可以从那里处理的数组

# c# - C# 在 DataRow 中插入 ArrayList

> ID：10002811
> 
> 赞同：1
> 
> 时间：2012-04-03T23:14:47.727
> 
> 标签：c#

我想在 Datarow 中插入一个数组列表。

使用此代码，

```
 ArrayList array=new ArrayList();
      foreach (string s in array) 
      {
           valuesdata.Rows.Add(s);
      } 
```

但我的数据表必须只有一个数据行。我的代码创建了八个数据行。我试过，

```
valuesdata.Rows.Add(array); 
```

但它不起作用。那应该是

```
valuesdata.Rows.Add(array[0],array[1],array[2],array[3]....); 
```

我怎么解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T23:37:33.437

试试这个：

```
 ArrayList array = new ArrayList();

        String[] arrayB = new String[array.Count];
        for (int i = 0; i < array.Count; i++)
        {
            arrayB[i] = array[i].ToString();
        }

        valuesdata.Rows.Add(arrayB); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T23:35:33.407

试试这样：

```
//1 - declare the array ArrayList object
ArrayList array = new ArrayList();

//2 - here add some elements into your array object

//3 - convert the ArrayList to string array and pass it as ItemArray to Rows.Add
valuesdata.Rows.Add(array.ToArray(typeof(string))); 
```

# image - wordpress 中的缩略图插件

> ID：10002813
> 
> 赞同：1
> 
> 时间：2012-04-03T23:14:58.810
> 
> 标签：image, wordpress, thumbnails

wordpress 中是否有任何插件可以在主页上以小缩略图显示文章图像？即我想在主页上以缩略图大小的图像显示文章图像（可能是任何大小）。

先感谢您。

# c# - 如何动态创建绑定代理？

> ID：10002817
> 
> 赞同：0
> 
> 时间：2012-04-03T23:15:11.577
> 
> 标签：c#, .net, winforms, data-binding

我有一个配置对象，它有一个`enum`，我想将一堆`RadioButton`' 绑定到同一个属性。正如我看到自己有时会重复它一样，我试图提出一个将多个项目绑定到同一个属性的通用解决方案。我找到的解决方案是创建一个执行表达式的代理。请参阅下面的代码。

```
public enum GenderEnum
{
    Male,
    Female
}

public class DataClass
{
    public GenderEnum Gender { get; set; }
}

class ExpressionBinder<T>
{
    public Func<T> Getter;
    public Action<T> Setter;

    public T Value
    {
        get { return Getter.Invoke(); }
        set { Setter.Invoke(value); }
    }
    public ExpressionBinder(Func<T> getter, Action<T> setter)
    {
        Getter = getter;
        Setter = setter;
    }
} 
```

我可以这样使用它：

```
radioMale.Tag = GenderEnum.Male;
radioFemale.Tag = GenderEnum.Female;

var proxyM = new ExpressionBinder<bool>(
    () => DataObj.Gender == (GenderEnum)radioMale.Tag,
    (val) => { if (val) DataObj.Gender = (GenderEnum)radioMale.Tag; });

var proxyF = new ExpressionBinder<bool>(
    () => DataObj.Gender == (GenderEnum)radioFemale.Tag,
    (val) => { if (val) DataObj.Gender = (GenderEnum)radioFemale.Tag; });

radioMale.DataBindings.Add("Checked", proxyM, "Value");
radioFemale.DataBindings.Add("Checked", proxyF, "Value"); 
```

这只是一个例子，我想保持简单。但这种方法实际上是**可行**的。问题是：

我想将比较和设置表达式封装在派生类中。

```
class ComparisonBinder : ExpressionBinder {} 
```

不幸的是，我只能说我想如何使用它。

```
radioMale.DataBindings.Add("Checked", 
    new ComparisonBinder<ConfigClass>((c) c.Gender, GenderEnum.Male), 
    "Value");
radioFemale.DataBindings.Add("Checked", 
    new ComparisonBinder<ConfigClass>((c) c.Gender, GenderEnum.Female),
    "Value"); 
```

那么，您将如何实施呢？如果需要，请随意更改我的 ExpressionBinder 类。

* * *

**最终代码**

（再次编辑：您不能使用对象类型省略 TValue 参数。在转换 lambda 表达式期间，编译器将添加对 . 的调用`Convert()`。）

```
class ComparisonBinder<TSource, TValue> : ExpressionBinder<bool>
{
    private TSource instance;
    private TValue comparisonValue;
    private PropertyInfo pInfo;

    public ComparisonBinder(TSource instance, Expression<Func<TSource, TValue>> property, TValue comparisonValue)
    {
        pInfo = GetPropertyInfo(property);

        this.instance = instance;
        this.comparisonValue = comparisonValue;

        Getter = GetValue;
        Setter = SetValue;
    }

    private bool GetValue()
    {
        return comparisonValue.Equals(pInfo.GetValue(instance, null));
    }

    private void SetValue(bool value)
    {
        if (value)
        {
            pInfo.SetValue(instance, comparisonValue,null);
        }
    }

    /// <summary>
    /// Adapted from surfen's answer (http://stackoverflow.com/a/10003320/219838)
    /// </summary>
    private PropertyInfo GetPropertyInfo(Expression<Func<TSource, TValue>> propertyLambda)
    {
        Type type = typeof(TSource);

        MemberExpression member = propertyLambda.Body as MemberExpression;

        if (member == null)
            throw new ArgumentException(string.Format(
                "Expression '{0}' refers to a method, not a property.",
                propertyLambda));

        PropertyInfo propInfo = member.Member as PropertyInfo;
        if (propInfo == null)
            throw new ArgumentException(string.Format(
                "Expression '{0}' refers to a field, not a property.",
                propertyLambda));

        if (type != propInfo.ReflectedType &&
            !type.IsSubclassOf(propInfo.ReflectedType))
            throw new ArgumentException(string.Format(
                "Expresion '{0}' refers to a property that is not from type {1}.",
                propertyLambda,
                type));

        return propInfo;
    }
} 
```

**用法：**

```
radioMale.DataBindings.Add("Checked", 
    new ComparisonBinder<DataClass,GenderEnum>(DataObj, (x) => x.Gender, GenderEnum.Male), "Value");
radioFemale.DataBindings.Add("Checked", 
    new ComparisonBinder<DataClass,GenderEnum>(DataObj, (x) => x.Gender, GenderEnum.Female), "Value"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T00:23:04.007

我认为这可以使用`PropertyInfo`一些 lambda 魔术来完成：

```
class ComparisonBinder<TSource,TValue> : ExpressionBinder<bool>
{
    public ComparisonBinder(TSource source, Expression<Func<TSource, bool>> propertyLambda, TValue comparisonValue) :base(null,null)
    {
         var propertyInfo = GetPropertyInfo<TSource,bool>(source, propertyLambda);
         this.Getter = () => comarisonValue.Equals((TValue)propertyInfo.GetValue(source));
         this.Setter = (bool value) => { if(value) propertyInfo.SetValue(source, comparisonValue); };
    }
} 
```

用法：

```
radioMale.DataBindings.Add("Checked", 
    new ComparisonBinder<ConfigClass, GenderEnum>(config, c => c.Gender, GenderEnum.Male), 
    "Value");
radioFemale.DataBindings.Add("Checked", 
    new ComparisonBinder<ConfigClass, GenderEnum>(config, c => c.Gender, GenderEnum.Female),
    "Value"); 
```

我尚未对其进行测试，但希望您能够修复任何错误并使用此解决方案。

GetPropertyInfo()：复制自[https://stackoverflow.com/a/672212/724944](https://stackoverflow.com/a/672212/724944)

```
public PropertyInfo GetPropertyInfo<TSource, TProperty>(
    TSource source,
    Expression<Func<TSource, TProperty>> propertyLambda)
{
    Type type = typeof(TSource);

    MemberExpression member = propertyLambda.Body as MemberExpression;
    if (member == null)
        throw new ArgumentException(string.Format(
            "Expression '{0}' refers to a method, not a property.",
            propertyLambda.ToString()));

    PropertyInfo propInfo = member.Member as PropertyInfo;
    if (propInfo == null)
        throw new ArgumentException(string.Format(
            "Expression '{0}' refers to a field, not a property.",
            propertyLambda.ToString()));

    if (type != propInfo.ReflectedType &&
        !type.IsSubclassOf(propInfo.ReflectedType))
        throw new ArgumentException(string.Format(
            "Expresion '{0}' refers to a property that is not from type {1}.",
            propertyLambda.ToString(),
            type));

    return propInfo;
} 
```

# java - java中的简单数组

> ID：10002818
> 
> 赞同：0
> 
> 时间：2012-04-03T23:15:18.403
> 
> 标签：java, arrays

我需要在我的主要方法中创建以下内容。创建一个大小为 100 的双精度数组。编写一个循环将数字 150.0 - 249.0 存储在 100 位置。

```
public class Lab6_2 { 
  public static void main(String[] args) { 
        double[] values; 
        values = new double [100]; 
        double i = 0; 
        for(double i = 150.0; i<249.0;i++){ 
            System.out.println(values[99]); 
        } 
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:41:37.303

首先，填充数组和打印元素是不相关的问题，所以我会在代码中将它们分开，*首先*填充数组，*然后*打印它。Java 提供了一种打印整个数组的方法，因此删除当前的打印语句并将这一行放在循环*之后：*

```
System.out.println(Arrays.toString(array)); 
```

即使您决定仍然每行打印一个元素（就像现在一样），您仍然应该在单独的循环中执行此操作。

接下来，您需要为循环中的每个元素分配一个值，而您目前没有这样做。您必须根据其索引计算元素值，在这种情况下很容易：

```
array[i] = i + 150; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T23:29:47.213

你可以这样做：

```
public static void whatever() {
    double value = 150.0d;
    double array[] = new double [100];

    for (int i = 0; i < array.length; i++) {
        array[i] = value;
        System.out.println("Index: " + i + " Value: " + value++);
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T00:25:24.093

您的代码只有一个问题。您正确生成了浮点值，但您的代码不会将这些值存储在数组中。

为了将浮点值存储在数组中的正确位置，您需要更改什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T03:00:17.913

您的代码有几个问题。你声明`i`了两次，这是你不应该做的。此外，您将`i`其用作迭代器，因此它应该是 a `int`，而不是 a`double`并且您应该在 for 语句中声明它。它也应该从 0 开始，而不是 150，并且只要它小于数组的长度就继续，因为虽然数组的长度是 100，但最后一个元素实际上是 99。

您的作业也不完全清楚，但听起来您应该将数字 150.0 - 249.0 存储在数组的每个元素中？但是你的 for 循环所做的只是将数组的最后一个元素打印 100 次，而那个元素是空的，因为你从来没有在里面放任何东西。

要为数组分配一个数字，您只需编写：

```
myArray[0] = somevalue; 
```

这将为数组中的第一个元素分配一些值。但是您想遍历数组的元素，而不是`0`使用`i`.

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-03T23:23:55.760

我对 java 并不完全熟悉，但我知道 C++ 并且它们非常相似。

```
double array[] = new double[100];
double value = 150.0;
for (int i = 0; i < 100; i++) {
    array[i] = value+i;
    System.out.println(value+i);
} 
```

希望有帮助。

您上面的问题是您以 150.0.0 开头。您需要使用一个计数器变量来增加您的数组。您只是打印数组的第 99 个元素（您从未设置过）99 次。

# xpages - 单击带有部分刷新的按钮问题时的 XPages 更多字段

> ID：10002820
> 
> 赞同：0
> 
> 时间：2012-04-03T23:15:26.990
> 
> 标签：xpages

根据 Tim Tripcony 的建议，我在下面实现了一个简单的 xpage，它允许我扩展 no。用户单击“添加更多”按钮时显示的字段数。当“添加更多”按钮进行部分刷新并扩展编号时，我遇到了部分刷新不记得数据的问题。的行。

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" dojoForm="true">
    <xp:this.data>
        <xp:dominoDocument var="newDoc" formName="frmAddMore"></xp:dominoDocument>
    </xp:this.data>
    <xp:this.afterPageLoad><![CDATA[#{javascript:viewScope.rowCount = new java.lang.Integer(5);}]]></xp:this.afterPageLoad>
    <xp:div id="parentDiv">
        <xp:repeat indexVar="fieldSuffix" value="#{viewScope.rowCount}"
            rows="#{viewScope.rowCount}" var="row">
            <xp:div>
                <xp:inputText id="KeyNo">
                    <xp:this.value><![CDATA[#{newDoc["KeyNo_#{fieldSuffix}"]}]]></xp:this.value>
                </xp:inputText>
                <xp:inputText id="Qty">
                    <xp:this.value><![CDATA[#{newDoc["Quantity_#{fieldSuffix}"]}]]></xp:this.value>
                </xp:inputText>
            </xp:div>
        </xp:repeat>
        <xp:button value="Add More" id="btnAddMore"
            execMode="partial">
            <xp:eventHandler event="onclick" submit="true"
                execMode="partial" execId="parentDiv" refreshMode="partial" refreshId="parentDiv">
                <xp:this.action><![CDATA[#{javascript:viewScope.rowCount = new java.lang.Integer(viewScope.rowCount + 5);}]]></xp:this.action>
                <xp:this.script>
                    <xp:executeClientScript
                        script="dojo.window.scrollIntoView(dojo.byId('#{id:btnAddMore}').id);">
                    </xp:executeClientScript>
                </xp:this.script>
            </xp:eventHandler>
        </xp:button>
    </xp:div>
</xp:view> 
```

我在这里想念什么？

我还注意到 dojo.window.scrollIntoView 客户端 JS 函数不起作用？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:27:11.517

如果没有刷新保存数据的内容，则部分刷新不会丢失数据。部分刷新和完全刷新之间的唯一区别是，部分只发生在页面的一个区域，在这个例子中，你刷新了包含所有控件的“parentDiv”，所以 parentDiv 将被完全重新加载。

例如，如果您在哪里部分刷新 inputText“KeyNo”，这个会丢失其数据，但输入文本“Qty”不会，因为“Qty”正在被刷新触及。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T05:05:42.997

在您的代码中，我看不到数据实际保存在文档上的位置。因此，每当刷新行数据时，它都会遍历字段并从中检索数据。因为没有保存数据，所以您丢失了用户输入的数据。

向部分刷新添加一个简单的保存操作，它应该可以工作。如果您愿意，请禁用验证，仅当用户单击某种保存按钮时才进行验证。

# php - 如何发布具有多部分/表单数据编码的数组？

> ID：10002821
> 
> 赞同：21
> 
> 时间：2012-04-03T23:15:27.863
> 
> 标签：php, apache, http, post, multipartform-data

在 GET 参数字符串或“x-www-form-urlencoded”POST 请求中，可以通过用括号命名参数来指定参数数组（例如“name[]”）。

是否有“正确”（或至少是广泛使用的约定）方式来指定具有“multipart/form-data”POST 请求的参数数组？

以下是正确的吗？

```
Content-Type: multipart/form-data; boundary=--abc

--abc
Content-Disposition: form-data; name="name[]"

first index
--abc
Content-Disposition: form-data; name="name[]"

second index 
```

如果它因平台而异，我对 Apache/PHP 的约定感兴趣。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-03T23:35:40.860

如果你想要一个关联的数组，你可以在表单字段的名称中传递索引：

```
Content-Type: multipart/form-data; boundary=--abc

--abc
Content-Disposition: form-data; name="name[first]"

first value
--abc
Content-Disposition: form-data; name="name[second]"

second value 
```

然后在 php 级别 print_r($_POST) 会给你

> `Array ( [name] => Array ( [first] => 'first value', [second] => 'second value' ) )`

如果你只是一个普通的有序数组，那么和你一样：

```
Content-Type: multipart/form-data; boundary=--abc

--abc
Content-Disposition: form-data; name="name[]"

first index
--abc
Content-Disposition: form-data; name="name[]"

second index 
```

然后在 php 级别 print_r($_POST) 会给你

> `Array ( [name] => Array ( [0] => 'first index', [1] => 'second index' ) )`

名称中带有 [] 的参数在服务器端转换为数组是 PHP 特有的功能 ( [http://www.php.net/manual/en/faq.html.php#faq.html.arrays](http://www.php.net/manual/en/faq.html.php#faq.html.arrays) )。

至于多部分编码，您可以在 RFC 中找到更多信息：[http ://www.ietf.org/rfc/rfc1867.txt](http://www.ietf.org/rfc/rfc1867.txt)

# playframework - 玩！- 期望方法控制器中的堆栈映射帧

> ID：10002824
> 
> 赞同：3
> 
> 时间：2012-04-03T23:15:50.827
> 
> 标签：playframework

我正在为我的 Play 使用安全模块！应用程序并让它在某一时刻工作，但由于某种原因，我做了一些事情让它停止工作。我收到以下错误：

> 发生执行异常验证错误：在方法控制器中期望堆栈映射帧。安全 $Security.authentify(Ljava/lang/String;Ljava/lang/String;)Z 在偏移量 33
> 
> 在 {module:secure}/app/controllers/Secure.java 中（大约第 61 行）

我看到了下面的帖子，但是，即使我**使用**的是Java 7，它看起来也像 Play！现在可以与 7 一起使用。我正在使用 Play 1.2.4。

[验证错误；期望方法 controllers.Secure$Security.authentify 中的堆栈映射帧](https://stackoverflow.com/questions/6704169/verifyerror-expecting-a-stack-map-frame-in-method-controllers-securesecurity-a)

这是我的安全控制器：

```
package controllers;

import models.*;

public class Security extends Secure.Security {

    public static boolean authenticate(String username, String password) {
        User user = User.find("byEmail", username).first();
        return user != null && user.password.equals(password);
    }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:44:34.180

seems to be a common issue with 1.7 (cobertura has the same issue).

Down grade to 1.6, do a play clean and it starts working for me again.

# javascript - Javascript 运行函数 点击

> ID：10002826
> 
> 赞同：0
> 
> 时间：2012-04-03T23:15:55.983
> 
> 标签：javascript

当用户单击下拉菜单中的`<option>`某个选项时，有没有办法执行 javascript 函数？`<select>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T23:19:54.697

`<select>`元素支持`onchange`事件。

[http://w3schools.com/jsref/event_onchange.asp](http://w3schools.com/jsref/event_onchange.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T23:26:41.863

您的 HTML 将如下所示：

```
<select onchange="functionName(this.value)">
    <option value="1"> 1 </option>
    <option value="2"> 2 </option>
    <option value="3"> 3 </option>
</select>​ 
```

在您的 JavaScript 中，您将拥有一个函数 ( ex: `functionName()`)，并且您将使用该函数来测试每种情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T00:07:29.027

这里：

```
elem.onclick = function ( e ) {
    if ( e.target.tagName.toLowerCase() === 'option' ) {
        // an <option> element was clicked
        // do your thing
    }
}; 
```

`elem`您的 SELECT 元素在哪里。

**现场演示：http:** [//jsfiddle.net/vBB7a/](http://jsfiddle.net/vBB7a/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-03T23:19:58.063

您可以使用该`change`事件来检查用户单击了哪个选项，然后执行您想要的代码。

在jQuery中：

```
$('#yourSelect').change(function(){
    var item = $(this).val();

    if (item === "Specified Choice")
    {
        //do your stuff here
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-03T23:23:55.260

您需要挂钩元素的`onchange`事件`<select>`，并检查值。你试过吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-03T23:24:59.233

在您的内部，您`<option>`可以使用该`onclick`事件来指定要执行的 javascript 函数。

例如

```
<option onclick="yourFunction()"> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-03T23:49:18.717

在您的项目中使用 Jquery..

HTML 代码：

```
<select id="myselect">
    <option value="">Select</option>
    <option value="1">StactOverFlow</option>
    <option value="2">SuperUser</option>
    <option value="3">Another 1</option>
    <option value="4">Another 2</option>
    <option value="5">Another 3</option>
</select> 
```

jQuery代码：

```
$("#myselect").bind('change', function(){
    switch($(this).val()){
        case "1":
            click_action_1();
            break;

        case "2":
            click_action_2();
            break;

        case "3":
            click_action_3();
            break;
    }
});

function click_action_1(){
    alert('Hi 1');
}         

function click_action_2(){
    alert('Hi 2');
}      

function click_action_3(){
    alert('Hi 3');
}
​ 
```

您甚至可以使用`<option>` Watch in Action 执行新的 javascript 函数：http: [//jsfiddle.net/extremerose71/PnfCk/8/](http://jsfiddle.net/extremerose71/PnfCk/8/)

享受！...

# richtextbox - 在richtextbox的文本之间插入段落并更改添加段落的字体和颜色

> ID：10002827
> 
> 赞同：2
> 
> 时间：2012-04-03T23:15:57.567
> 
> 标签：richtextbox

我的文本在richtextbox 中：

```
<Parag1 Level="One">
First text of parag1\. Second text of parag1.
</Parag1>
<Parag2 Level="Two">
First text of parag2\. Second text of parag2.
</Parag2>
<Parag3 Level="Footer">
First text of parag3\. Second text of parag3.
</Parag3>
<Parag4 Level="Three">
First text of parag4\. Second text of parag4.
</Parag4> 
```

所有一级、二级、三级标签的字体为 Arial，Size = 9，Color = Red 示例：`<Parag1 Level="One">`或`</Parag4>`

一、二、三级标签之间的文本字体为 MicrosoftNewRomans，大小 = 12，颜色 = 黑色 示例：`First text of parag2\. Second text of parag2.`

具有级别页脚的标签之间的文本字体为 Tahoma，大小 = 10，颜色 = 蓝色示例：`First text of parag3\. Second text of parag3.`

我想在标签 3 和 4 之间添加这一段。示例：

```
 <NewParag5 Level="Footer">
This tags between 3 and 4.
</NewParag5> 
```

问题：如何为段落的单独部分使用相同的字体和颜色。这意味着在不更改其他文本的字体和颜色的情况下，我可以将段落插入richtextbox，然后将标签的字体或颜色更改为红色，将文本更改为蓝色。

请帮助我获取 c# 和 winforms Richtextbox。

谢谢。

问题2：如何在文本之间添加段落，段落部分的字体和颜色设置为标记字体样式和文本保存前样式（字体和颜色）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:14:25.017

我会尝试这种方法： `RadioButton`。

如果您将其中一些添加到您的解决方案中，您可以检查输入的文本是否为标签、段落等。

例如

```
 if(tagRadioButton.Checked)
       {
          //Colors , Fonts Selection logic.
       } 
```

如果您不想使用任何单选按钮，则可以在估算的字符串中搜索关键字并根据估算的内容更改颜色和字体。我相信你可以找到一个很好的教程，但是因为我不太擅长字符串操作。

希望这可以帮助。

# python - Doctest 的输出与 shell 的输出不同

> ID：10002828
> 
> 赞同：0
> 
> 时间：2012-04-03T23:16:00.167
> 
> 标签：python, linked-list, doctest

在 doctest 和 shell 中使用相同的代码会产生不同的输出。
我有一个名为 a() 的函数，它运行了一些测试。
这些相同的测试用于 doctest (test() )。
使用 a() 我得到 OBJECT-BLANKLINE-OBJECT 而 test() 给我一个错误并且只显示第一个 OBJECT。
这是 doctest 模块中的缺陷吗？

这是顶部带有 a() 和 test() 的整个文件：

```
'''
>>> u1 = User("luis@fc.up.pt", "simples")
>>> u2 = User("ana@fc.up.pt", "complicada")
>>> u2.askFriend(u1)
>>> u1.recvRequest(u2)
>>> u1.confirmFriend(u2)
>>> p1 = Post(u1, "O ultimo post", "http://www.wikipedia.org")
>>> p2 = Post(u2, "A ultima resposta", "http://www.google.com")
>>> c = Comments()
>>> c.add(p1)
>>> c.add(p2)
>>> f1 = c.search(user="ana@fc.up.pt")
>>> print(f1)
A ultima resposta
http://www.google.com
0 Gosto, 0 Nao gosto
>>> f2 = c.search(likes=1)
>>> print(f2)
<BLANKLINE>
>>> f3 = c.search(text='post')
>>> print(f3)
O ultimo post
http://www.wikipedia.org
0 Gosto, 0 Nao gosto
<BLANKLINE>
A ultima resposta
http://www.google.com
0 Gosto, 0 Nao gosto
'''

def test():
    import doctest
    doctest.testmod()

def a():
    u1 = User("luis@fc.up.pt", "simples")
    u2 = User("ana@fc.up.pt", "complicada")
    u2.askFriend(u1)
    u1.recvRequest(u2)
    u1.confirmFriend(u2)
    p1 = Post(u1, "O ultimo post", "http://www.wikipedia.org")
    p2 = Post(u2, "A ultima resposta", "http://www.google.com")
    c = Comments()
    c.add(p1)
    c.add(p2)
    f3 = c.search(text="post")
    print(f3)

import string

class User:

    def __init__(self,email,passwd):
        self.email = email
        self.passwd = passwd
        self.name = None
        self.year = None
        self.active = True
        self.recv = [] 
        self.conf = []
        self.setPassword(self.passwd)

    def __str__(self):
        if self.name == None and self.active == True:
            return str(self.email) + ':' + 'ativa'

        elif self.name != None and self.active == True:
            return str(self.name) + ':' + str(self.email) + ':' + 'ativa'

        elif self.name != None and self.active == False:
            return str(self.name) + ':' + str(self.email) + ':' + 'inativa'

        else:
            return str(self.email) + ':' + 'inativa'

    def getEmail(self):
        return self.email

    def setPassword(self,passwd):
        abc = string.ascii_lowercase
        cifra = abc[3:] + abc[:3]
        dec = list(passwd)
        passwdCif = ""
        for i in dec:
            cif = cifra[abc.find(i)]
            passwdCif += cif
        self.passwd = passwdCif

    def getPassword(self):
        return self.passwd

    def setName(self,name):
        self.name = name

    def getName(self):
        return self.name

    def setBirth(self,year,month,day):
        self.year = year
        self.month = month
        self.day = day

    def getBirth(self):
        if self.year == None:
            return None
        else:
            return '(' + str(self.year) + ', ' + str(self.month) + ', ' + str(self.day) + ')'

    def isActive(self):
        if self.active == True:
            return True
        else:
            return False

    def setActive(self):
        self.active = True

    def setInactive(self):
        self.active = False

    def askFriend(self,u):
        self.conf.append(u)

    def recvRequest(self,u):
        self.recv.append(u)

    def confirmFriend(self,u):
        if len(self.recv) == 0:
            return None
        else:
            for i in self.recv:
                if i == u:
                    self.recv.remove(i)
                    self.conf.append(i)
                else:
                    return None

    def isFriend(self,u):
        if u in self.conf:
            return True
        elif self == u:
            return True
        else:
            return False

    def showPending(self):
        if len(self.recv) == 0:
            return None
        else:
            for i in self.recv:
                print i

    def showFriends(self):
        if len(self.conf) == 0:
            return None
        else:
            for i in self.conf:
                print i

class Post():
    def __init__(self,u,text='',link=None):
        self.u = u
        self.text = text
        self.link = link
        self.seg = None
        self.ant = None
        self.likeList = []
        self.dislikeList = []

    def __str__(self):
        if self.link == None:
            return str(self.text) + '\n' + str(len(self.likeList)) + ' Gosto, ' + str(len(self.dislikeList)) + ' Nao gosto'
        else:
            return str(self.text) + '\n' + str(self.link) + '\n' + str(len(self.likeList)) + ' Gosto, ' + str(len(self.dislikeList)) + ' Nao gosto'

    def updateText(self,text):
        self.text = text

    def updateLink(self,link):
        self.link = link

    def like(self,u):
        if (u in self.u.conf) or (u == self.u):
            if u in self.dislikeList:
                self.dislikeList.remove(u)
                self.likeList.append(u)
            elif u in self.likeList:
                return None
            else:
                self.likeList.append(u)
        else:
            return None

    def dislike(self,u):
        if (u in self.u.conf) or (u == self.u):
            if u in self.likeList:
                self.likeList.remove(u)
                self.dislikeList.append(u)
            elif u in self.dislikeList:
                return None
            else:
                self.dislikeList.append(u)
        else:
            return None

class Comments():
    def __init__(self, u=None, text='', link=None):
        self.u = u
        self.text = text
        self.link = link
        self.topo = None
        self.fim = None

    def __str__(self):
        actual = self.topo
        s = ''
        if actual == None:
            return ''
        while actual != None:
            if actual.seg == None:
                s += str(actual)
                actual = actual.seg
            elif actual.seg != None:
                s += str(actual) + '\n' + '\n'
                actual = actual.seg
        return s

    def add(self,comment):
        if self.topo == None:
            comment.ant = None
            comment.seg = None
            self.topo = comment
            self.fim = comment
        else:
            comment.ant = None
            comment.seg = self.topo
            self.topo.ant = comment
            self.topo = comment

    def remove(self,comment):
        actual = self.topo
        if (self.topo == self.fim) and (self.topo == comment):
            self.topo = None
            self.fim = None
            actual = None
        while actual!=None:
            if actual == comment:
                if actual.ant == None:
                    self.topo = actual.seg
                    actual.seg.ant = None
                elif actual.seg == None:
                    self.fim = actual.ant
                    actual.ant.seg = None
                else:
                    actual.seg.ant = actual.ant
                    actual.ant.seg = actual.seg
                break
            else:
                actual = actual.seg

    def countLike(self):
        count = 0
        actual = self.topo
        while actual != None:
            if len(actual.likeList) >= 1:
                count += 1
                actual = actual.seg
            else:
                actual = actual.seg
        return count

    def showRecentComments(self,n):
        count = 1
        actual = self.topo
        sC = ''
        if actual == None:
            return None
        while actual != None:
            if count < n:
                if actual.seg == None:
                    sC += str(actual)
                    count += 1
                    actual = actual.seg
                else:
                    sC += str(actual) + '\n' + '\n'
                    count += 1
                    actual = actual.seg
            elif count == n:
                sC += str(actual)
                count += 1
                actual = actual.seg
            elif count > n:
                break 
        print sC

    def search(self, user=None, likes=None, dislikes=None, text=None):
        result = []
        actual = self.topo
        cR = Comments()
        if actual == None:
            return None

        while actual != None:
            if user != None:
                if actual.u.email != user:
                    actual = actual.seg
                elif actual.u.email == user:
                    result.append(actual)
                    actual = actual.seg
            elif user == None:
                break
        actual = self.topo

        while actual != None:
            if likes != None:
                if likes > len(actual.likeList):
                    actual = actual.seg
                elif likes <= len(actual.likeList):
                    if actual in result:
                        actual = actual.seg
                    else:
                        result.append(actual)
                        actual = actual.seg
            elif likes == None:
                break
        actual = self.topo

        while actual != None:
            if dislikes != None:
                if dislikes > len(actual.dislikeList):
                    actual = actual.seg
                elif dislikes <= len(actual.dislikeList):
                    if actual in result:
                        actual = actual.seg
                    else:
                        result.append(actual)
                        actual = actual.seg
            elif dislikes == None:
                break
        actual = self.topo

        while actual != None:
            if text != None:
                if text not in actual.text:
                    actual = actual.seg
                elif text in actual.text:
                    if actual in result:
                        actual = actual.seg
                    else:
                        result.append(actual)
                        actual = actual.seg
            elif text == None:
                break
        if len(result) != 0:
            for i in result:
                cR.add(i)
        return cR 
```

这是我使用 a() 和 test() 得到的输出：

```
>>> a()
O ultimo post
http://www.wikipedia.org
0 Gosto, 0 Nao gosto

A ultima resposta
http://www.google.com
0 Gosto, 0 Nao gosto
>>> test()
**********************************************************************
File "__main__", line 22, in __main__
Failed example:
    print(f3)
Expected:
    O ultimo post
    http://www.wikipedia.org
    0 Gosto, 0 Nao gosto
    <BLANKLINE>
    A ultima resposta
    http://www.google.com
    0 Gosto, 0 Nao gosto
Got:
    A ultima resposta
    http://www.google.com
    0 Gosto, 0 Nao gosto
**********************************************************************
1 items had failures:
   1 of  16 in __main__
***Test Failed*** 1 failures.
>>> 
```

我还想为我之前问得很糟糕的问题道歉。
希望这个可以帮助我和其他人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T16:04:24.130

你的 doctest 和你的函数之间有一个明显的区别：虽然你的函数 a 这样做：

```
# previous code
c.add(p2)
f3 = c.search(text="post")
print(f3) 
```

你的 doctest 这样做：

```
# previous code
c.add(p2)
f1 = c.search(user="ana@fc.up.pt")
print(f1)
f2 = c.search(likes=1)
print(f2)
f3 = c.search(text='post')
print(f3) 
```

我不知道那里到底发生了什么，但可能你应该编写你的函数来做同样的事情。如果结果仍然不同，则说明 doctest 有问题，否则您的代码有问题。

**编辑：**

现在我开始明白为什么你是麻烦了，而且是deeeeeeeep麻烦。它从搜索功能顶部的这一行开始：

```
actual = self.topo 
```

我认为您不知道 Python 分配属性的方式。稍后在您的代码中更改实际，然后再次将 self.topo 分配给实际：

```
actual.seg = "somevalue" # sorry, i can't remember what you did"
actual = self.topo 
```

**第二行完全没有意义，因为实际已经是 self.topo！这不是 self.topo 的值，而是 self.topo。**

而不是写

```
actual.seg = "somevalue" 
```

你可以写

```
self.topo.seg = "somevalue" 
```

两条线的作用完全相同。所以当你认为你正在改变一些独立的属性`actual`时，你真的一直在改变 self.topo。这意味着`actual`在函数的每次开始时它都不相等，但总是具有它在最后一次运行时的值`c.search`。

我刚刚看到您也在其他一些函数中执行此操作，这意味着您每次调用此类函数时都会更改 Comments 实例 c 的状态。当然，这会导致每个测试的输出不同。

为了使这更容易理解，下面是一个带有列表的示例：

```
>>> a_list = ['one','two','three']
>>> b_list = a_list
>>> b_list.pop()
'three'
>>> a_list
['one', 'two'] 
```

如您所见：尽管我确实从 b_list 中弹出了元素，但它也从 a_list 中消失了。这是因为该语句的`b_list = a_list`字面意思是 b_list 现在与 a_list 相同。

希望这可以帮助。

# reporting-services - SSRS 2008 TextBox 的隐藏属性计算结果为真，无论如何都导出为 CSV

> ID：10002833
> 
> 赞同：1
> 
> 时间：2012-04-03T23:16:48.380
> 
> 标签：reporting-services, ssrs-2008

我在报告中有一个列，它的可见性由表达式控制。

```
=IIF(UCase(CStr(Fields!Condition.Value)) = "C",True,False) 
```

当条件为真时，列隐藏，当条件为假时，列可见。当我导出到 Excel 和 PDF 时，呈现的内容会尊重此表达式的计算结果，并适当地显示该列。

另一方面，CSV 导出列，无论条件评估为。我已经尝试将此表达式放在列可见性、文本框可见性和许多其他地方。我把它放在哪里都没有关系，CSV 会导出它。

我知道您可以使用 RenderFormat.Name = "CSV" 来控制 CSV 输出，但这似乎是一种全有或全无的方法。我有时需要它来导出到 CSV，有时则不需要。我真的只需要这个表达式来工作。

这是 SSRS 2008 中的一个缺陷并且根本不可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T14:12:47.080

CSV 导出的处理方式与大多数 SSRS 导出有很大不同：大多数渲染指令都被忽略了。它被认为是“数据导出”而不是渲染输出。

但文本单元格的“DataElementOutput”属性将控制单元格的内容是否放置在 .csv 中（文本框属性窗格 -> 仅数据部分 -> DataElementOutput）

# ruby - Ruby：使用其中一个数组的值对 2 个数组进行排序

> ID：10002835
> 
> 赞同：1
> 
> 时间：2012-04-03T23:17:14.807
> 
> 标签：ruby, arrays, sorting

我正在用 ruby​​ 创建一个简单的游戏，我有两个数组存储高分：`$HS_Points`和`$HS_Names`. 我将高分保存在两个文件中，我想对点进行一点编码（点转换为`.to_s(23)`）。我想按降序对名称和分数进行排序并将它们限制为 10。所以，我需要：

*   检查玩家得分的点数是否高于高分的点数（在索引 0 到 9 上）。
*   如果收到的分数足以让玩家进入前 10 名，则将分数和姓名放在该位置，将其他位置向下推一位。

简单`points_array.sort`不会这样做，因为它只会对点进行排序，让名称按原样排列。

任何想法如何解决这个问题？我希望尽可能简单地回答。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T00:06:36.183

像这样的东西？

```
names = ['Alice', 'Bob', 'Carol']
points = [22, 11, 33] 
```

## 压缩

您可能需要[Array#zip](http://ruby-doc.org/core-1.9.3/Array.html#method-i-zip)方法：

```
pairs = names.zip(points)
#=> [["Alice", 22], ["Bob", 11], ["Carol", 33]] 
```

## 种类

要按数组字段排序，请比较该对的两个字段。

按名称分类：

```
pairs.sort{|x,y| x[0] <=> y[0] }  
#=> [["Alice", 22], ["Bob", 11], ["Carol", 33]] 
```

按分数排序：

```
pairs.sort{|x,y| x[1] <=> y[1] }  
#=> [["Bob", 11], ["Alice", 22], ["Carol", 33]] 
```

## 排序方式

另一种排序方法是#sort_by 方法而不是比较块（感谢 Niklas B.）

按名称分类：

```
pairs.sort_by(&:first) 
#=> [["Alice", 22], ["Bob", 11], ["Carol", 33]] 
```

按分数排序：

```
pairs.sort_by(&:last)
#=> [["Bob", 11], ["Alice", 22], ["Carol", 33]] 
```

## 选择

只选择高分以上的玩家：

```
pairs.select{|x| x[1] >20 }
#=> [["Alice", 22], ["Carol", 33]] 
```

## 解压

解压：

```
pairs.map(&:first)
#=> ["Alice", "Bob", "Carol"]

pairs.map(&:last)
#=> [22, 11, 33] 
```

这些想法可能会为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:03:11.303

不要将名称和分数存储在单独的变量中；它们是绑定在一起的，所以它们的数据应该绑定在一起。

例如，尝试 $HighScores，它是一个带有 :name 元素和 :value 元素的哈希数组，例如：

```
$HighScores = [  
   { :name => "Bob", :score => 234 },
   { :name => "Mark", :score => 2 },   
] 
```

然后你可以添加一个高分：

```
$HighScores << { :name => "New Guy", :score => 50000 } 
```

然后对它们重新排序并在一个语句中获得前 10 名：

```
$HighScores = $HighScores.sort { |a,b| b[:score] <=> a[:score] }[0,10] 
```

如果分数是 base-23 编码的，这仍然有效。（但你为什么这样做？）

您可能还应该将它们保存到单个文件中。为了使这更容易，请考虑使用[Marshal](http://www.ruby-doc.org/core-1.9.3/Marshal.html)模块。

# android - Android ListView：如何选择一个项目？

> ID：10002839
> 
> 赞同：3
> 
> 时间：2012-04-03T23:17:57.643
> 
> 标签：android, android-widget, android-listview

我在创建 ListView 时遇到问题：我希望在单击某个项目时将其选中。

我的代码如下：

```
protected void onResume() {
...
ListView lv = getListView(); 
lv.setOnItemSelectedListener(new OnItemSelectedListener() 
{
    public void onItemSelected(AdapterView<?> adapterView, View view, int pos, long id) {
        Log.v(TAG, "onItemSelected(..., " + pos + ",...) => selected: " + getSelectedItemPosition());
    }
    public void onNothingSelected(AdapterView<?> adapterView) {
        Log.v(TAG, "onNothingSelected(...) => selected: " + getSelectedItemPosition());
    }
});
lv.setOnItemClickListener(new OnItemClickListener()
{
    public void onItemClick(AdapterView<?> adapterView, View view, int pos, long id) {
        lv.setSelection(pos);               
        Log.v(TAG, "onItemClick(..., " + pos + ",...) => selected: " + getSelectedItemPosition());              
    }
});
...
} 
```

当我运行它并单击例如第二项（即 pos=1）时，我得到：

```
04-03 23:08:36.994: V/DisplayLists(663): onItemClick(..., 1,...) => selected: -1 
```

即，即使使用正确的参数调用 OnItemClickListener 并调用 setSelection(1)，也没有选择项目（因此也永远不会调用 OnItemSelectedListener.onItemSelected(...) 并且 getSelectedItemPosition() 在setSelection(1)-调用。

我错过了什么？

迈克尔

PS.：我的列表**确实**有> = 2个元素......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-03T23:25:40.380

这里缺少的元素是`choiceMode`. 这没有很好的[记录](http://developer.android.com/reference/android/widget/AbsListView.html#setChoiceMode%28int%29)，但默认情况下，android 中的 ListViews（以及从 AbsListView 继承的任何东西，如 GridView 等）默认情况下不允许选择，但可以启用它 - 无论是在 XML 中还是在代码中：

在 XML 中：

```
<ListView
  ...
  android:choiceMode="singleChoice" /> 
```

代码：

```
mListView.setChoiceMode(AbsListView.CHOICE_MODE_SINGLE); 
```

请注意，一旦您执行此操作，android 将为`setSelection()`您服务，因此您无需自己跟踪它。那时你的 onClickListener 只是为了保存选择，我什至不打扰 OnSelectedItemListener ：

```
@Override
public void onItemClick(final AdapterView<?> list, final View v,
    final int position, final long id) {
  Participant p = mAdapter.getParticipantForId(id);
  eventManager.fire(new ParticipantSelectedEvent(p));
  pxList.smoothScrollToPosition(position); // Make sure selection is plainly visible
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T05:19:24.127

尝试这个： -

```
 ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> parent, View view,
          int position, long id) {

          // selected item
          String product = ((TextView) view).getText().toString();

         Toast.makeText(getApplicationContext(), "Selected Item :" +product, Toast.LENGTH_SHORT).show();

      }
    }); 
```

希望它会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T23:26:57.147

我才意识到，我完全离开了。在触摸模式下，选择一个项目根本没有意义。您只需在单击时直接对其进行操作（并调用 OnClickListener *）*。我刚刚开始意识到，Android 可以处理所有这些不同的设备，它们有方向控制按钮、触摸屏等。很难想象，如何在不使用的设备上完成操作到或不能测试。

# ios - 来自 NSString 的 NSUrl？

> ID：10002842
> 
> 赞同：0
> 
> 时间：2012-04-03T23:18:24.200
> 
> 标签：ios, nsurl, afnetworking

很难`NSString`进入`NSURL`

```
NSURL *url = [NSURL URLWithString:@"http://.../social.php"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];

AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    for(id entry in JSON)
    {
        strTwitter= [entry valueForKeyPath:@"str1"];
        strFacebook =[entry valueForKeyPath:@"str2"];
        CCLOG(@"twitter: %@", strTwitter);
    }
} failure:nil];

[operation start]; 
```

别处...

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString: strTwitter]]; 
```

然后我崩溃`NSURL`了`EXC_BAD_ACCESS`

在`mainMenu.h`：

```
@interface mainMenuLayer : CCLayer
{
    NSString *strTwitter;
} 
```

CCLOG 打印 URL 很好 - 没有空格；有 https 等...？

。H

```
#import "cocos2d.h"

#import "menuHome.h"
#import "menuMenu.h"
#import "AFJSONRequestOperation.h"

@interface mainMenuLayer : CCLayer
{
    CCSprite *Background;
    CCSprite *logoBackground;
    CCSprite *logoName;
    menuHome *theMenuHome1;
    menuMenu *theMenuMenu1;

    CGSize size;
    CCMenu *bottomMenu;
    CCMenu *bottomMenu2;
    CCMenuItemImage *menuHouse;
    CCMenuItemImage *menuMenu2;
    CCMenuItemImage *menuPictures;
    CCMenuItemImage *menuContact;
    CCMenuItemImage *menuMore;    
    CCMenuItemImage *menuTemp;  

    CCMenuItemImage *menuTwitter;
    CCMenuItemImage *menuFacebook;
    CCMenuItemImage *menuWebsite;
    CCMenuItemImage *menuAbout;
    CCMenuItemImage *menuBlank;

    NSString *strTwitter;
    NSString *strFacebook;

    NSInteger moreVisible;

}
// returns a CCScene that contains the HelloWorldLayer as the only child
+(CCScene *) scene;

-(void) funcHome;
-(void) funcMore;
-(void) funcMenu2;

+(mainMenuLayer*) sharedMenuScene;
@end 
```

.m

```
#import "mainMenu.h"
#import "constants.h"

@interface mainMenuLayer ()
@property(nonatomic, strong) NSString *strTwitter;
@end

// HelloWorldLayer implementation
@implementation mainMenuLayer

@synthesize strTwitter;

static mainMenuLayer *sharedMenuScene;

+(mainMenuLayer*) sharedMenuScene {
    NSAssert(sharedMenuScene != nil, @"not yet initilized");
    return sharedMenuScene;
}

+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    mainMenuLayer *layer = [mainMenuLayer node];

    // add layer as a child to scene
    [scene addChild: layer];

    // return the scene
    return scene;
}

// on "init" you need to initialize your instance
-(id) init
{
    // always call "super" init
    // Apple recommends to re-assign "self" with the "super" return value
    if( (self=[super init])) {

        sharedMenuScene = self;
        // create and initialize a Label
        self.isTouchEnabled = YES;

        [[CCDirector sharedDirector]enableRetinaDisplay:YES];

        // ask director the the window size
        size = [[CCDirector sharedDirector] winSize];
        moreVisible = 0;

        //theMenuHome1.position = ccp(0.0f, 0.0f);

        logoBackground = [CCSprite spriteWithFile:@"logo_bg_640x120.png"];    
        [self addChild:logoBackground z: depthLevelMenu];
        logoBackground.position = ccp( size.width / 2, size.height - 30);

        logoName = [CCSprite spriteWithFile:@"res_name.png"];    
        [self addChild:logoName z: depthLevelMenuLogo];
        logoName.position = ccp( size.width / 2, size.height - 30);

        Background = [CCSprite spriteWithFile:@"background.png"];    
        [self addChild:Background z: depthLevelBackground];
        Background.position = ccp( size.width / 2, size.height / 2);

        menuHouse = [[CCMenuItemImage itemFromNormalImage:@"home_128x100_unselect.png" selectedImage:@"home_128x100_select.png" target:self selector:@selector(funcHome:)]retain];

        menuHouse.position =  ccp( 32, 25 );

        menuContact = [[CCMenuItemImage itemFromNormalImage:@"contact_128x100_unselect.png" selectedImage:@"contact_128x100_select.png" target:self selector:@selector(funcHome:)]retain];

        menuContact.position =  ccp( 96, 25 );

        menuMenu2 = [[CCMenuItemImage itemFromNormalImage:@"menu_128x100_unselect.png" selectedImage:@"menu_128x100_select.png" target:self selector:@selector(funcHome:)]retain];

        menuMenu2.position =  ccp( 160, 25 );

        menuPictures = [[CCMenuItemImage itemFromNormalImage:@"photos_128x100_unselect.png" selectedImage:@"photos_128x100_select.png" target:self selector:@selector(funcHome:)]retain];

        menuPictures.position =  ccp( 224, 25 );

        menuMore = [[CCMenuItemImage itemFromNormalImage:@"more_128x100_unselect.png" selectedImage:@"more_128x100_select.png" target:self selector:@selector(funcMore:)]retain];

        menuMore.position =  ccp( 288, 25 );

        bottomMenu = [CCMenu menuWithItems: menuHouse, menuContact, menuMenu2, menuPictures, menuMore, nil];
        bottomMenu.position =  CGPointZero;

        [self addChild: bottomMenu z:depthLevelMenu];
        [menuHouse selected];

        [self getSettings];
    }
    return self;
}

-(void) getSettings
{
    NSURL *url = [NSURL URLWithString:@"http://.../social.php"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        for(id entry in JSON)
        {
            strTwitter= [entry valueForKeyPath:@"str1"];
            strFacebook =[entry valueForKeyPath:@"str2"];
            CCLOG(@"twitter: %@", strTwitter);
        }
    } failure:nil];

    [operation start];

}

-(void) funcMenu2: (id) sender
{
    CCLOG(@"funcMenu2 Called");
    [menuTwitter unselected];
    [menuFacebook unselected];
    [menuWebsite unselected];
    [menuAbout unselected];
    [menuBlank unselected];
    [menuMore unselected];

    if(sender == menuTwitter)
    {
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString: strTwitter]]; 
        CCLOG(@"url: %@", strTwitter);

        CCLOG(@"Twitter Selected");
        [sender selected];

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T23:21:19.407

strTwitter 是如何实例化的？好像是提前发布的

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString: strTwitter]]; 
```

陈述

为 strTwitter 创建一个私有属性（将其放入您的 .m 文件中：

```
@interface mainMenuLayer ()
    @property(nonatomic, strong) NSString *strTwitter;
@end 
```

然后在下面`@implementation mainMenuLayer`：

```
@synthesize strTwitter; 
```

另一个注意事项是，您应该养成在定义类时使用正确大小写的习惯：MainMenuLayer vs mainMenuLayer

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T01:17:13.577

更改“strTwitter= [entry valueForKeyPath:@"str1"];" 至

self.strTwitter= [entry valueForKeyPath:@"str1"];

这将确保它被自动生成的设置器保留。您分配 strTwitter 的方式回避了 setter，只是将未保留的对象分配给它。我习惯在分配时调用“self.{property} = {some value}”。

# flash - 在文本字段中输入方程并进行处理？[动作脚本 3.0]

> ID：10002850
> 
> 赞同：1
> 
> 时间：2012-04-03T23:19:30.673
> 
> 标签：flash, numbers

我想知道他们是否可以在文本字段中输入诸如“5 * 5”之类的内容。

然后在输入时，文档将获取数据库并能够返回 25。

我很困惑，因为您输入到文本字段的内容必须是 a`String`并且当您使用`Number()`转换器时系统会感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T00:43:34.000

您需要在操作符处拆分字符串（使用正则表达式），然后保留这些操作符。

我自己没有耐心做这件事，但你也需要优先考虑某些操作（先乘法再加法等）。

我已经编写了一些代码来帮助您入门 - 请注意，它仅适用于当前形式的非常简单的算法：

```
// Finds +, - and *.
var operators:RegExp = /\+|\-|\*/g;
var numbers:RegExp = /\d+/g;

/**
 * Attempts to work with a mathematical formula provided as string.
 * @param str Subject string.
 */
function work(str:String):Number
{
    var ops:Array = str.match(operators);   // List of operators in order.
    var nums:Array = str.match(numbers);    // List of numbers in order.

    var command:Array = [];
    var cmbLen:int = Math.max(ops.length, nums.length);

    for(var i:int = 0; i < cmbLen; i++)
    {
        if(nums[i]) command.push(nums[i]);
        if(ops[i]) command.push(ops[i]);
    }

    // Begin performing the command.
    var val:Number = 0;
    var queuedOperator:String = "";

    for(i = 0; i < command.length; i++)
    {
        // Apply initial value;
        if(i == 0)
            val = Number(command[i]);

        // Work.
        if(i % 2 == 0)
        {
            var num:Number = Number(command[i]);

            // Operate if required.
            if(queuedOperator.length > 0)
            {
                switch(queuedOperator)
                {
                    case "+": val += num; break;
                    case "-": val -= num; break;
                    case "*": val *= num; break;
                }
            }

            queuedOperator = command[i + 1] as String || "";
        }
    }

    return val;
} 
```

和一些测试：

```
trace(work("7 + 10")); // 17
trace(work("5 * 5")); // 25
trace(work("12 - 4")); // 8

trace(work("10 + 5 + 1")); // 16 
```

随意在此基础上添加更多运算符（只需将它们添加到中`operators`）并按`command`优先级排序。添加`()`括号将开始变得有趣，但随着时间的推移，我确信可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T03:10:50.150

**这是使用RegExp**的另一个解决方案。这可以使用以下符号计算整数和小数：`^`, `%`, `/`, `*`, `+`, `-`。您也可以使用括号，例如`2^(10/(2+3-2))`.

在*测试电影*模式下，您需要从控制菜单中选择*禁用键盘快捷键*选项以查看结果。

 *```
import flash.text.TextField;
import flash.text.TextFieldType;
import flash.text.TextFormat;
import flash.text.TextFieldAutoSize;
import flash.events.KeyboardEvent;
import flash.ui.Keyboard;

var tf:TextField = new TextField();
tf.addEventListener(KeyboardEvent.KEY_DOWN,tfKeyDown);
tf.defaultTextFormat = new TextFormat('_sans',24);
tf.autoSize = TextFieldAutoSize.LEFT;
tf.wordWrap = true;
tf.type = TextFieldType.INPUT;
tf.border = true;
tf.x = (stage.stageWidth - 300) * .5;
tf.y = 100;
tf.width = 200;
addChild(tf);
stage.focus = tf;

function tfKeyDown(e:KeyboardEvent):void {
    if (e.keyCode == Keyboard.ENTER) {
        e.preventDefault();
        trace('Input:',tf.text);
        trace('Result:',calculate(tf.text,7));
        trace('-----------------------');
    }
}

function calculate(str:String,maxDecimalCount:int=int.MAX_VALUE):Number {

    var num:String = '-?[0-9]*\\.?[0-9]+';
    var numRX:RegExp = new RegExp(num,'g');
    var rx:RegExp, i:int;

    // normalize minuses and eliminate spaces
    str = str.replace(/--/g,'+').replace(/\s/g,'');

    // calculate parenthesized equations
    while (/\(([^\(\)]+)\)/.test(str)) {
        str = str.replace(/\(([^\(\)]+)\)/g,function() {
            return calculate(String(arguments[1]),int.MAX_VALUE).toString();
        });
    }

    // exponential --> x^y
    rx = new RegExp(num+'(\\^'+num+')+','g');
    str = str.replace(rx,function() {
        var nums = String(arguments[0]).match(numRX);
        var res:Number = Math.pow(Number(nums[0]),Number(nums[1]));
        for (i = 2; i < nums.length; i++) res = Math.pow(res,Number(nums[i]));
        //trace('^ ['+nums+'] =',res);
        return res;
    });
    // modulus --> x%y
    rx = new RegExp(num+'(%'+num+')+','g');
    str = str.replace(rx,function() {
        var nums = String(arguments[0]).match(numRX);
        var res:Number = Number(nums[0]);
        for (i = 1; i < nums.length; i++) res %= Number(nums[i]);
        //trace('% ['+nums+'] =',res);
        return res;
    });
    // divide --> x/y
    rx = new RegExp(num+'(/'+num+')+','g');
    str = str.replace(rx,function() {
        var nums = String(arguments[0]).match(numRX);
        var res:Number = Number(nums[0]);
        for (i = 1; i < nums.length; i++) res /= Number(nums[i]);
        //trace('/ ['+nums+'] =',res);
        return res;
    });
    // multiply --> x*y
    rx = new RegExp(num+'(\\*'+num+')+','g');
    str = str.replace(rx,function() {
        var nums = String(arguments[0]).match(numRX);
        var res:Number = Number(nums[0]);
        for (i = 1; i < nums.length; i++) res *= Number(nums[i]);
        //trace('* ['+nums+'] =',res);
        return res;
    });
    // add or subtract --> x+y or x-y
    rx = new RegExp(num+'([\\+\\-]'+num+')+','g');
    str = str.replace(rx,function() {
        var nums = String(arguments[0]).match(numRX);
        var res:Number = Number(nums[0]);
        for (i = 1; i < nums.length; i++) res += Number(nums[i]);
        //trace('+- ['+nums+'] =',res);
        return res;
    });

    var res:Number = Number(str);
    // if the result is not a number...
    if (isNaN(res)) {
        throw new Error('Please input a valid equation using numbers and the following signs: ()^%/*+-');
    }
    // if the remainder needs to be shortened...
    if (maxDecimalCount < int.MAX_VALUE &&
        int(res) != res && String(res).split('.')[1].length > maxDecimalCount) {
        res = Math.round(res * Math.pow(10,maxDecimalCount)) / Math.pow(10,maxDecimalCount);
    }
    return res; 

} 
```*

# sql-server - 对照 informationschema.columns 检查数据

> ID：10002852
> 
> 赞同：0
> 
> 时间：2012-04-03T23:19:37.220
> 
> 标签：sql-server, sql-server-2008

我需要验证下表中的数据。（**更新：**在表的插入和更新触发器中`M`）

```
create table M (Column_Name sysname primary key, FirstValue varchar(8000)) 
```

该表有一个触发器来确保 的所有值`Column_Name`都在`(select column_name from information_schema.columns where table_name = 'T')`.

什么是保证可以毫无问题`M.FirstValue`地插入的最佳方法。`T`是否有任何第三方函数接受`(Value, Data_type, Max_..._length, etc)`可以提供数据类型信息的参数`information_schema.columns`？

* * *

** 我试图确保 FirstValue 中的值可以插入到名称存储在 Column_Name 列中的列中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:08:21.297

感谢您澄清您的问题。没有内置的函数或过程可以做到这一点，因此您可能必须自己编写。一种方法是尝试`CAST`将值设为与列相同的数据类型。如果你得到一个转换错误，你知道一个`INSERT`会失败。

但是，确实没有简单可靠的方法，因为即使该值与数据类型兼容，`CHECK`表上也可能存在约束或触发器，阻止它因其他原因被插入。而且由于您将所有值存储为字符串，因此总是存在潜在的问题，例如转换为 datetime 对您来说很好，但由于不同的语言或日期格式选项而对其他人失败。

# javascript - Backbone 集合的 URL 取决于初始化函数

> ID：10002853
> 
> 赞同：0
> 
> 时间：2012-04-03T23:19:40.297
> 
> 标签：javascript, backbone.js

我有一个 Backbone 集合，其 URL 取决于初始化函数。当我创建这个 Backbone 集合的一个实例时，我传入一个 ID 来过滤模型的哪些实例出现。以下是该集合的代码：

```
 var GoalUpdateList = Backbone.Collection.extend({

    // Reference the Goal Update model
    model: GoalUpdate,

    // Do HTTP requests on this endpoint
    url: "http://localhost:8000/api/v1/goal_update/?goal__id=" + this.goal_id + "&format=json",

    // Set the goal ID that the goal update list corresponds to
    initialize: function(goal_id) {
      this.goal_id = goal_id;
      console.log(this.goal_id);
      console.log(this.url);
    },

  }); 
```

当然，这是行不通的。`this.goal_id`被视为未定义。我猜是因为 URL 是在初始化函数运行之前设置的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T23:25:38.200

您可以使用`url`动态构建 URL 的函数。

```
url: function() {
  return "http://localhost:8000/api/v1/goal_update/?goal__id=" + this.goal_id + "&format=json";
}, 
```

# php - PHP的非递归动态二叉树

> ID：10002859
> 
> 赞同：2
> 
> 时间：2012-04-03T23:20:14.067
> 
> 标签：php, html-table

我尝试将二叉树创建为非递归构建的 html-table。字段的顺序应该是这样的：

```
C1  C2  C3

         7
     3
         8
 1
         9
     4
        10

        11
     5
        12
 2
        13
     6
        14 
```

C1 代表 col 1，C2 代表 col2 等。以下代码以递归方式创建一个表，但这不是我想要的！

```
<?php 
$cols = 4; 
$counter = 0;
$lines = pow(2,$cols); 

echo '<table border=1 style="border:1px solid black;"> ';

    for($i = 0; $i < $lines; $i++){
        echo '<tr>';
            for($j = 0; $j < $cols; $j++){
                $rowspan = $lines/pow(2,$j+1);
                    if(0 === $i%$rowspan) {
                        $counter++;
                        echo '<td rowspan='.$rowspan.'>'.$counter;
                    }
            }
    }

echo '</table>';
?> 
```

我希望有人能给我一个提示如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T00:12:53.233

使用此表达式计算行的值：`($i / $rowspan + pow(2,$j+1) - 1)`其中`$i / $rowspan`是当前级别中从`0`第一行开始的行数，`pow(2,$j+1) - 1`是级别的第一个值，即`7`第三级别。

```
$cols = 4;
$lines = pow(2,$cols);

echo '<table border=1 style="border:1px solid black;">';

    for($i = 0; $i < $lines; $i++){
        echo '<tr>';
            for($j = 0; $j < $cols; $j++){
                $rowspan = $lines/pow(2,$j+1);
                    if(0 === $i%$rowspan) {
                         echo "<td rowspan='$rowspan'>".
                             ($i/$rowspan + pow(2,$j+1)-1).
                         "</td>";
                    }
            }
    }

echo '</table>'; 
```

输出您想要的结果。希望你的老师现在不会恨我！;-)

`($i/$lines + 1 ) * pow(2,$j+1) - 1`如果您不想依赖 $rowspan，您可以选择使用该行的值。

# bigdata - 并行计算：分布式系统与多核处理器？

> ID：10002860
> 
> 赞同：2
> 
> 时间：2012-04-03T23:20:14.233
> 
> 标签：bigdata

我只是想知道为什么需要为大规模并行处理创建分布式系统的所有麻烦，而我们可以创建每台机器支持数百或数千个内核/CPU（甚至是 GPGPU）的单个机器？

所以基本上，你为什么要在机器网络上进行并行处理，而在一台支持多核的机器上以更低的成本和更可靠的方式完成并行处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:34:00.303

我认为它只是更便宜。这些机器今天可用，无需发明新的东西。

下一个问题将是主板的复杂性，想象一下 1 MB 上有 10 个 CPU - 这么多链接！如果其中一个 CPU 死机，它可能会摧毁整台机器。

你当然可以为 GPGPU 编写程序，但并不像为 CPU 编写程序那么容易。有很多限制，例如。每个核心的缓存真的很小，如果有的话，你不能在核心之间进行通信（或者你可以，但它非常昂贵）等等。

由于使用历史悠久，连接多台计算机更稳定、更可扩展且更便宜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:24:37.627

彼得所说的。当您向单个机器添加内核时，通信开销会增加。如果内存在内核之间共享，那么共享内存的锁定架构和缓存会产生越来越大的开销。

如果您没有共享内存，那么实际上您正在使用不同的机器，即使它们都在同一个盒子中。

因此，通常最好在没有共享内存的情况下开发非常大规模的应用程序。而且通常也是可能的——尽管通信开销通常仍然很大。

鉴于这种情况，构建高度多核的单个机器几乎没有用处 - 尽管确实存在一些，例如 nvidia tesla ......

# string - 使用 grep 查找字符串

> ID：10002862
> 
> 赞同：1
> 
> 时间：2012-04-03T23:20:53.637
> 
> 标签：string, search, grep

如何在文件中找到所有字母数字字符串，并且可能包含符号`_`或`#`并以十六进制代码 0x00 结尾。我尝试使用 grep 和以下选项，但它似乎不起作用：

```
-z [a-zA-Z0-9_]* 
```

## 更新

这是我尝试提取的一些字符串的示例，如您所见，它们以十六进制代码 0x00 结尾，长度各不相同，尽管此特定示例未显示它们可以包含 0-9，但下划线 (_ ) 或哈希 (#)。

[http://i42.tinypic.com/23kos5w.jpg](http://i42.tinypic.com/23kos5w.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:24:14.507

> 当我运行它时，我得到的只是'二进制文件/cygdrive/d/dump.bin 匹配'？我在cygwin中使用grep。– Twisted89 4 月 4 日 10:09

[MrJames](https://stackoverflow.com/a/10002955)的回答不包括`-a`. 再加上他`\w`的括号根本不起作用。

```
grep -Eaoz "(\w|_|#)*" FILE 
```

# java - 应该对这个 JDialog 片段进行哪些改进？

> ID：10002866
> 
> 赞同：1
> 
> 时间：2012-04-03T23:21:11.903
> 
> 标签：java, swing, jtable, jdialog

我写了一个小函数，它将在对话框中显示一个表格，并正在寻找关于清理什么以及在处理摆动时什么是更好的编程实践的建议。

可以对我的代码进行哪些改进

```
//constraints for panel to fill out the frame
GridBagConstraints grid = new java.awt.GridBagConstraints();
grid.fill = java.awt.GridBagConstraints.BOTH;
grid.weightx = 1.0;
grid.weighty = 1.0;

//create jtable based on a table model created from an array
JTable table = new JTable(testModel);       //a method creates my test model
table.add(table.getTableHeader(), BorderLayout.PAGE_START);
TableRowSorter<TableModel> sorter = new TableRowSorter<TableModel>(testModel);
table.setRowSorter(sorter);

//add scrollpane for visibility
JScrollPane jscrollpane = new JScrollPane(table);
table.setFillsViewportHeight(true);

//add the scrollpane to a panel
JPanel panel = new JPanel();
panel.setLayout(new GridBagLayout());
panel.add(jscrollpane, grid);

//create for use with the dialog
JFrame frame = new JFrame();

JDialog dialog = new JDialog(frame, "My Test Dialog", true); 
dialog.add(panel);
dialog.pack();
dialog.setLocationRelativeTo(null);    //added as advice of Stripies
dialog.setVisible(true); 
```

我对所有建设性的批评持开放态度，因为我的目标是学习使用 swing 编程的正确技术。

为了澄清，我正在寻找是否可以取出任何东西或改进其中的任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T20:06:13.567

> 使用有什么好处`setLocationByPlatform(true)`？

使用`setLocationRelativeTo(null)`是示例、演示和实用程序的便捷选择。质量应用程序会保留用户的首选位置，可能会在`java.util.Preferences`. 由于用户的体验因平台而异，`setLocationByPlatform(true)`因此代表实施者为满足该期望所做的最大努力。当尚不存在首选项时，它是默认位置的更好选择。

# c - 我应该使用什么积压值？

> ID：10002868
> 
> 赞同：17
> 
> 时间：2012-04-03T23:21:51.200
> 
> 标签：c, sockets, listen, backlog

我读的[人2听](http://linux.die.net/man/2/listen)。

我不明白什么是积压值，它说

> backlog 参数定义了 sockfd 的挂起连接队列可以增长到的最大长度

对，我如何定义什么是最佳价值？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-03T23:29:03.360

基本上，`listen()`积压影响的是，如果您的应用程序没有立即建立连接，那么有多少传入连接可以排队`accept()`。对于大多数应用程序来说，这并不是特别重要。大多数系统使用的最大值是 128，通过它通常是安全的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T23:31:52.570

这是试图连接的客户之间的斗争。将接受请求推送到队列中，然后接受线程将它们吸走。通常，线程获胜。我通常设置为 32，但它通常不是一个重要的参数。

# asp.net - 当用户通过单击保存按钮保存新表单时如何在我的 Web 表单上显示保存确认消息

> ID：10002875
> 
> 赞同：1
> 
> 时间：2012-04-03T23:22:22.353
> 
> 标签：asp.net, webforms

我对 ASP.NET 很陌生。我正在处理其他一些开发人员的 Web 表单。我被要求修复一个错误，上面写着：

> 向表单添加信息后（第一次或更新时），用户单击“保存”按钮时不显示成功消息

页面顶部有一个带有 ID 的标签`lblMsgs`

```
<asp:Label ID="lblMsgs" runat="server"> 
```

我已将此添加到代码后面的适当位置：

```
lblMsgs.Text = "Message Text"; 
```

现在，我的问题是如何修改 HTML 或后面的代码，以确保单击“保存”按钮时，代码会检查数据是否已保存到数据库并在 Web 表单上显示保存成功消息。

您能否通过使用我上面的标签 ID 给出代码示例来提供帮助？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T23:31:33.550

在您的保存按钮处理程序上，您可以添加数据是否有效的验证逻辑。

```
protected void ValidateSave(object o, EventArgs e){
    if (Page.IsValid) {
         // Save to DB and notify of update status
         var success = SomeDBMethod.Update...
         if (success){
             DoAlert("Saved Successfully!");
         }
    }
    else { lblMsgs.Text = "Failed"; }
}

// Call client-side alert
private void DoAlert(string message) {
    ClientScriptManager cs = Page.ClientScript;

    var x = "alertScript";
    if (!cs.IsStartupScriptRegistered(cstype, x))
    {
      String script = string.Format"alert('{0}', message);";
      cs.RegisterStartupScript(cstype, x, script, true);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T23:27:37.323

这是一个非常模糊的问题，但如果您正在寻找数据验证，您应该查看内置的 ASP.NET 验证器。这可以进行客户端/服务器端数据验证。至于基于成功更新数据库向用户返回消息，这将是特定于解决方案的，具体取决于您使用的数据层类型。

# c++ - 结构初始化不匹配的变量

> ID：10002877
> 
> 赞同：0
> 
> 时间：2012-04-03T23:22:50.413
> 
> 标签：c++, c

我对这是在做什么感到困惑：

```
#define AIR_LP 1

tw_lptype airport_lps[] = {
  {
    AIR_LP, sizeof(Airport_State),
    (init_f) Airport_StartUp,
    (event_f) Airport_EventHandler,
    (revent_f) Airport_RC_EventHandler,
    (final_f) Airport_Statistics_CollectStats,
    (statecp_f) NULL
  },
  { 0 },
}; 
```

和

```
struct tw_lptype
{
  init_f init;
  event_f event;
  revent_f revent;
  final_f final;
  map_f map;
  size_t state_sz;
}; 
```

我想我对结构声明 AIR_LP 和 sizeof(Airport_state) 中的前两个变量感到困惑，我了解其余所有部分在做什么，所以如果有人可以给我一些关于这两个部分将要做什么的信息会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T23:29:32.923

不知道所涉及的类型很难回答您的问题。您遇到的问题是，当您的结构有 6 个属性时，您的初始化对结构有 7 个属性。`AIR_LP, sizeof(Airport_State),`与初始化的其余部分不同，它们是单独的元素，初始化的其余部分由一个类型转换后跟一个值组成。

# ruby - 将循环用于带有 If/Else/Esif 的提示

> ID：10002880
> 
> 赞同：1
> 
> 时间：2012-04-03T23:23:17.760
> 
> 标签：ruby

我开始：

```
 puts "Hello there, and what's your favorite number?"
    favnum = gets.to_i
    puts "Your favorite number is #{favnum}?" " A better favorite number is #{favnum + 1}!"
    puts "Now, what's your favorite number greater than 10?"
    favnumOverTen = gets.to_i
    if favnumOverTen < 10
        puts "Hey! I said GREATER than 10! Try again buddy."
    else
        puts "Your favorite number great than 10 is #{favnumOverTen}?"
        puts "A bigger and better number over 10 is #{favnumOverTen * 10}!"
puts "It's literally 10 times better!"
    end 
```

这很好用，但是如果用户输入的数字小于 10，程序就会结束。我希望用户被提示再试一次，直到他们输入一个大于 10 的数字。我应该用循环来做到这一点吗？

这就是我所尝试的，但显然它是错误的：

```
 puts "Hello there, and what's your favorite number?"
    favnum = gets.to_i
    puts "Your favorite number is #{favnum}?" " A better favorite number is #{favnum + 1}!"
    puts "Now, what's your favorite number greater than 10?"
    favnumOverTen = gets.to_i
    if favnumOverTen < 10
    loop.do
        puts "Hey! I said GREATER than 10! Try again buddy."
        favnumOverTen = gets.to_i
    until favnumOverTen > 10
    else
        puts "Your favorite number great than 10 is #{favnumOverTen}?"
        puts "A bigger and better number over 10 is #{favnumOverTen * 10}!"
puts "It's literally 10 times better!"
    end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T00:06:08.213

这是一种比前两种方法短一点的方法：

```
puts "Now, what's your favorite number greater than 10?"
until (favnumOverTen = gets.to_i) > 10
  puts "Hey! I said GREATER than 10! try again buddy."
end 
```

这是有效的，因为赋值返回分配给变量的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T23:57:03.083

更好的解决方案是一次获得最喜欢的数字 10，然后像这样开始`until`循环检查`favnumOverTen > 10`：

```
puts "What is your favorite number greater than 10?"
favnumOverTen = gets.to_i
until favnumOverTen > 10 do
  puts "Hey! I said GREATER than 10! Try again buddy."
  favnumOverTen = gets.to_i
end 
```

这样，如果初始条目大于 10，则永远不会执行 until 循环（为您节省`if`语句）。

另外，正如您所知道的，使用驼峰式大小写（即`favnumOverTen`应该是`favnum_over_ten`）不被认为是惯用的 Ruby。

# function - 从 .net 中的 Generic T 获取 SqlCommand 类型

> ID：10002882
> 
> 赞同：0
> 
> 时间：2012-04-03T23:23:19.637
> 
> 标签：function, generics, c#-2.0

我创建了一个名为 的通用函数`ExecuteProcedure<T>(T command, string parameters)`，现在在`ExecuteProcedure`我要转换的函数内部`T into SqlCommand`，这样我就可以使用`SqlCommand's`如下属性`Parameters.Add()`是我的代码。

```
T could be SqlCommand or SqlDataAdapter 
```

这是我的代码：

```
public void ExecuteProcedure<T>(T command, string parameters)
{
    using (connection)
    {
        if (typeof(T) == typeof(SqlCommand))
        {
           //how to convert into SqlCommand Here to use command.CommandType Property below.
        }
        command.CommandType = CommandType.StoredProcedure;
        foreach (string param in parameters.Split(','))
        {
            SqlParameter par = new SqlParameter(param, param.Substring(1, param.Length - 1));
            command.Parameters.Add(par);
        }

        connection.Open();
        command.ExecuteNonQuery();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T23:56:46.017

您可以使用此代码将 T 转换为 SqlCommand

```
SqlCommand cmd = (SqlCommand)Convert.ChangeType(command, typeof(SqlCommand)); 
```

无论如何感谢@Chris

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T23:28:26.797

我相信你所要做的就是：

```
SqlCommand cmd = (SqlCommand)(object)command; 
```

# regex - 如何将正则表达式从 OR 转换为 XOR

> ID：10002884
> 
> 赞同：1
> 
> 时间：2012-04-03T23:23:41.683
> 
> 标签：regex, xor

我希望评估类似于以下的结构：

> **房子是绿色的，但我最喜欢的颜色是蓝红和黄**

我用这样的正则表达式确定房子的颜色：

> **房子\s+(\w\s*)+(?=(青色|绿色|红色|蓝色))**

它有什么作用？此表达式返回下一个匹配项：

> **房子是绿色的，但我最喜欢的颜色是蓝色**

也就是说，返回字符类颜色列表中字符串中的最后一个匹配项，即直到出现红色，但您看到的第一个颜色是绿色。

我应该怎么办？我正在寻找的是只取列表中提到的第一种颜色并停止查找，即告诉我房子颜色是绿色的，没有别的。

Q1：如何循环遍历字符串，直到只出现一个且只有一个您指示的表达式，即如何将表达式（青色或绿色或蓝色或红色）转换为行为类似于 XOR 的列表。重要：只使用正则表达式，即没有任何como.NET背景语言、Java、PERL等...

Q2：有没有我错过的使用正则表达式的替代方法。也就是说，我走的路是对的吗？

先谢谢大家了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:38:28.727

它返回最新的比赛，因为你`(\w\s*)+`是*贪婪*的；它尽可能匹配（即一直到“红色”之前）。

您可以将其更改为非贪婪使用`+?`而不是`+`

```
the house\s+(\w\s*)+?(?=(cyan|green|red|blue)) 
```

但我认为你可以做得更好。

为什么`(\w\s*)+`您可能一次只匹配一个字母！为什么不匹配整个单词而不是`(\w+\s+)+`.

另外，为什么不直接匹配第一种颜色呢？

```
the\s+house\s+(\w+\s+)+?(cyan|green|red|blue) 
```

然后捕获组 2（第二组括号）将包含第一次出现的青色、绿色、红色或蓝色（即您的颜色列表）。请注意`+?`确保单词正则表达式是非贪婪的，这意味着它不会吞噬“青色”、“绿色”、“红色”或“蓝色”的实例。

你甚至可以做

```
house.*?\b(cyan|green|red|blue) 
```

那里`.*?`是非贪婪的，只是吞噬一切，直到第一种颜色。例如，这是一个“单词边界”，只是确保正则表达式与“desi **red**`\b` ”中的“red”不匹配。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T23:37:13.720

这就是我在 python 中的做法，我不确定其他语言是否具有 .seach 功能。

“我正在寻找的是只取列表中提到的第一种颜色并停止寻找，”

```
s='The house is green but my favorite colors are blue red and yellow'
import re
print re.search('(cyan|green|red|blue)',s,).group(1)
print re.match('The house is (cyan|green|red|blue)',s,).group(1)#or if u had to use the .match 
```

请注意（青色|绿色|红色|蓝色）中缺少空格。

它打印这个：

```
green
green 
```**

# php - php - 在消息正文中显示电子邮件变量

> ID：10002891
> 
> 赞同：0
> 
> 时间：2012-04-03T23:24:03.273
> 
> 标签：php, phpmailer

我正在为时事通讯设置选择加入列表。下面是我的 php 脚本，它正在运行，但是当我收到电子邮件时，我在邮件中看不到电子邮件地址，只有这个：

电子邮件：

如何让电子邮件变量显示在电子邮件中？

编辑：我使用 jquery/ajax 发布表单，这就是表单中没有帖子和操作的原因。

**PHP** (newsletter.php)

```
<?php 

$to = "newsletter@example.com";
$subject = "Send me the newsletter";

$email = $_POST['email'];

$email = filter_var($email , FILTER_SANITIZE_EMAIL);

$message = "Email: $email";

mail($to, $subject, $message, "From: no-reply@example.com");

?> 
```

**HTML**

```
<form id="newsletter_signup">
<input type="text" name="email" id="email" placeholder="Email Address" /><input type="submit" value="Submit" class="submit_button" />
</form> 
```

**jQuery**

```
$.ajax({
          type: "POST",
          url: "newsletter.php",
          data: $("input#email").val(),
          success: function() {
        $('#signup').html("<div id='message'></div>");
        $('#message').html("<h3>Blah, blah, blah!</h3>")
        .css({color:"#00000", fontFamily: "Arial", fontSize: "12px"})
        .hide()
      }
     }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T01:49:55.093

试试这个：

```
$.ajax({
          type: "POST",
          url: "newsletter.php",
          data: {"email" : $("input#email").val()},
          success: function() {
        $('#signup').html("<div id='message'></div>");
        $('#message').html("<h3>Blah, blah, blah!</h3>")
        .css({color:"#00000", fontFamily: "Arial", fontSize: "12px"})
        .hide()
      }
     }); 
```

另请查看 jQuery 序列化方法（您只需键入`data: $("form").serialize()`）。 [http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T23:27:37.790

你的 from 应该是

```
<form id="newlsetter_signup" method="POST" action=""> 
```

# objective-c - 如何使用 ParseKit 框架查找解析错误

> ID：10002892
> 
> 赞同：4
> 
> 时间：2012-04-03T23:24:03.590
> 
> 标签：objective-c, parsekit

我想知道是否有办法让 PKParser 在遇到语法错误之前返回到程序集的解析程度。

参考： http: [//parsekit.com/](http://parsekit.com/)

我使用的语法基本上描述了前缀符号表达式语言。

例如：

给定您的标准前缀符号表达式语法和字符串“(+ a - bc))”，我想检索匹配的 [(,+,a]，因此我可以让用户了解在哪里寻找修复他们的错误，但 completeMatchFor 和 bestMatchFor 不返回任何我可以用来查找此信息的内容。

理想情况下，我想说一个'（'是预期的，但对于像我正在使用的那样简单的语法来说，这不是必需的。

从作为用户手册提到的书中，似乎我需要为此创建一个自定义解析器，但我希望我可能只是错过了框架中的某些内容。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T05:51:21.510

[ParseKit](http://parsekit.com)的开发者在这里。

ParseKit 中有两个功能可用于帮助提供用户可读的提示，描述输入中遇到的解析错误。

1.  `-[PKParser bestMatchFor:]`
2.  `PKTrack`班级_

听起来您知道该`-bestMatchFor:`方法，即使在这种情况下它没有按照您的预期进行。

我认为这`PKTrack`门课在这里会更有帮助。正如Metsker[的书中](https://rads.stackoverflow.com/amzn/click/com/0201719622)所描述的，除了它的子解析器是必需的，并且当它的所有子解析器都不匹配时，会抛出一个错误（带有有用的错误消息）。`PKTrack``PKSequence`

因此，这是您的示例输入的语法：

```
@start         = '(' expr ')' | expr;
expr           = ('+' | '-') term term;
term           = '(' expr ')' | Word; 
```

任何连续列出的作品都是一个序列——但也可以是一个轨道。

将这些 Sequences 更改为 Tracks 的好处是，`NSException`如果输入不匹配，则会抛出人类可读的解析错误消息。缺点是您现在必须将工厂生成的解析器的所有用法包装在一个 try/catch 块中以捕获这些 Track 异常。

当前（或至少在此之前）的问题是`PKParserFactory`从未使用 Tracks 生成解析器。相反，它总是使用序列。

所以我*刚刚在*[谷歌代码](http://parsekit.googlecode.com/)的主干头中添加了一个新选项（你需要更新）。

```
#define USE_TRACK 0 
```

在

```
PKParserFactory.m 
```

`0`默认情况下。如果将此定义更改为`1`，将使用轨道而不是序列。所以给定上面的语法和这样的无效输入：

```
(+ a - b c)) 
```

这个客户代码：

```
NSString *g = // fetch grammar above
PKParser *p = [[PKParserFactory factory] parserFromGrammar:g assembler:self];
NSString *s = @"(+ a - b c))";

@try {
    PKAssembly *res = [p parse:s];
    NSLog(@"res %@", res);
}
@catch (NSException *exception) {
    NSLog(@"Parse Error:%@", exception);
} 
```

你会得到一个很好的人类可读错误：

```
Parse Error:

After : ( + a
Expected : Alternation (term)
Found : - 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T13:23:41.813

我也在纠结这个问题。为了`-bestMatchFor:`有助于识别错误情况，在 的公共接口中应该有方法`PKAssembly`指示是否有更多的标记/字符要解析。`-completeMatchFor:`能够确定错误状态，因为它可以访问私有`-hasMore`方法。也许`PKAssembly`的`-hasMore`方法应该是公开的。

我看了看，`PKTrack`但由于我想以编程方式处理错误，所以它对我没有用。

我的结论是我要么编写自己的自定义 Track 解析器，要么更改框架并公开`-hasMore`. 还有其他处理错误的方法吗？

在找到更好的错误检测方法之前，我已将以下内容添加到包含自定义解析器实现的文件中：

```
@interface PKAssembly ()
- (BOOL)hasMore;
- (id)peek;
@end

@implementation PMParser
...
@end 
```

在我的解析方法中：

```
PKAssembly*     a     = [PKTokenAssembly assemblyWithString:s];
PKAssembly*     best  = [self bestMatchFor:a];
PMParseNode*    node  = nil;
BOOL            error = NO;
NSUInteger      errorOffset = 0;

if (best == nil)  // Anything recognized?
{   
    error = YES;
}
else
{
    if ([best hasMore])  // Partial recognition?
    {
        PKToken*    t = [best peek];

        error       = YES;
        errorOffset = t.offset;
    }

    node = [best pop];
} 
```

如果发生错误，`errorOffset`将包含无法识别的令牌的位置。

# php - grep 用于 PHP 函数，但不包括类方法和粘贴的 javascript

> ID：10002894
> 
> 赞同：1
> 
> 时间：2012-04-03T23:24:18.457
> 
> 标签：php, wordpress, function, grep

我正在通过 WP 核心 grep'ping，试图编写一个 grep 语句来查找所有 PHP 函数，同时排除任何类方法或 Javascript 函数。

这就是我现在所拥有的：

`grep -r --include=*.php 'function [A-Za-z_]\+(.\+)' .`

这会从类方法和 JS 函数中返回被污染的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:30:40.333

You might probably want to try [http://phpxref.sourceforge.net/](http://phpxref.sourceforge.net/) I passed the entire WordPress code into PHPXref a couple of years back and was able to get the complete list of functions, classes etc.

# epub - 两栏，平行文，epub，可以吗？

> ID：10002895
> 
> 赞同：6
> 
> 时间：2012-04-03T23:24:21.667
> 
> 标签：epub

我正在尝试制作双语电子书。我希望它在两列中排版，一种语言在左边，另一种在右边。

这可能与 epub 规格有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T17:36:39.200

这是很有可能的，有两种不同的方式：

1.  列（由 wikisource epub 导出使用）：
    *   您可以尝试使用此页面的可打印版本（当然选择 epub）：[http://fr.wikisource.org/wiki/Trait%C3%A9_de_la_r%C3%A9forme_de_l%E2%80%99entendement_%28bilingue%29](http://fr.wikisource.org/wiki/Trait%C3%A9_de_la_r%C3%A9forme_de_l%E2%80%99entendement_%28bilingue%29)
    *   在我的 Kobo 上，常规的 epub 引擎会拧紧单元格（单元格的末尾，如果不在显示中，将被忽略......）所以你需要将你的 epub 文件重命名为 .kepub.epub 用于 adobe 引擎（我猜) 使用，并使用正确的显示器。
2.  行间：
    *   使用一个简单的 css 技巧（display:inline-table），您可以在另一个之下有不同的行/单词。
    *   我已经很容易地制作了带有中文，拼音和翻译的中文版本。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T23:30:17.593

我会使用一个简单的表。

如果您正在考虑 CSS 列属性：它在 iBooks 上不可靠，甚至在基于 ADE 的设备上都没有实现。

# python - 用元组单例键定义字典

> ID：10002897
> 
> 赞同：0
> 
> 时间：2012-04-03T23:24:26.787
> 
> 标签：python, dictionary, tuples

要在 python 中定义单例，请使用 singleton = ('singleton')，Python 字典可以使用元组作为键，如

[（'一'，'二'）：5]

但是有没有可能做

[（'单例'），：5]

不知何故？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T23:28:15.263

是的，你可以这样做——但不能使用`('Singleton')`. 你必须使用`('Singleton',)`.

这样做的原因是 Python 会将单个项目周围的单个括号解释为仅仅是项目本身。添加逗号会强制执行元组解释。

```
>>> d = {}
>>> d[('Thing')] = "one"
>>> d.keys()
['Thing']
>>> d[('Thing',)] = "another"
>>> d
{'Thing': 'one', ('Thing',): 'another'} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T23:28:45.450

向 python 表示“singleton”是一个使其工作的元组：

```
>>> a = {}
>>> a[('singleton',)] = 5
>>> a
{('singleton',): 5} 
```

# spring - Spring BeanFactoryPostProcessor 可以找到没有名称的嵌套 bean 吗？

> ID：10002898
> 
> 赞同：0
> 
> 时间：2012-04-03T23:24:39.963
> 
> 标签：spring

我正在尝试编写一个 Spring BeanFactoryPostProcessor，它可以找到任何定义了 init 方法的 bean。我很幸运地找到了具有名称的 bean，但没有像以下示例中的目标 bean 那样嵌套无名 bean：

```
<bean id="aclDao" class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
    <property name="transactionManager"><ref bean="transactionManager"/></property>
    <property name="target">
        <bean class="com.vidsys.dao.impl.acl.ACLDaoImpl" init-method="init">
            <property name="sessionFactory"><ref local="sessionFactory"/></property>
        </bean>
    </property>
    <property name="transactionAttributes">
    <props>
    <prop key="*">PROPAGATION_REQUIRED</prop>
    </props>
  </property>
</bean> 
```

当我在 BeanFactoryPostProcessor 中列出 bean 时，我似乎只得到了名称如下代码的bean：

```
public class BeanInitializationFinder implements BeanFactoryPostProcessor, Ordered {
  @Override
  public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory)
    throws BeansException {

      //String[] beanDefs = BeanFactoryUtils.beanNamesIncludingAncestors(beanFactory);
      String[] beanDefs = beanFactory.getBeanDefinitionNames();
      for(String defName : beanDefs) {
          BeanDefinition def = beanFactory.getBeanDefinition(defName);
          if(null == def.getBeanClassName() || !(def instanceof AbstractBeanDefinition)) 
              return;
          }
          AbstractBeanDefinition abd = (AbstractBeanDefinition) def;
          try {
              if(abd.getFactoryMethodName() == null && abd.getFactoryBeanName() == null) 
                  Class<?> beanClass = Class.forName(abd.getBeanClassName()); 
                  if(InitializingBean.class.isAssignableFrom(beanClass) || null != abd.getInitMethodName()) {
                        beansWithInits.add(defName);
                  }
              }
          }
          catch(Exception e) {
              throw new BeanIntrospectionException("Failed to instrospect bean defs", e);
          }
      }
  }

} 
```

我想获取所有具有 init 方法的 bean，包括无名的嵌套 bean。我可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:00:22.640

您可以检索嵌套的 BeanDefinition，但不能通过`beanFactory.getBeanDefinition`. 获得嵌套 bean 定义的唯一方法是通过`PropertyValues`父级`BeanDefinition`- 您需要遍历图表。

例如（并且缺少任何空值检查）：

```
BeanDefinition parentDef = beanFactory.getBeanDefinition(defName);
for (PropertyValue property : parentDef.getPropertyValues().getPropertyValues()) {
    Object value = property.getValue();
    if (value instanceof BeanDefinitionHolder) {
        BeanDefinition nestedDef = ((BeanDefinitionHolder)value).getBeanDefinition();
    }
} 
```

鉴于图遍历与访问者模式配合得很好，您可以子类化`org.springframework.beans.factory.config.BeanDefinitionVisitor`以更简洁的方式执行此操作。

# php - 用图像替换字符串

> ID：10002899
> 
> 赞同：0
> 
> 时间：2012-04-03T23:24:44.177
> 
> 标签：php, xml, wordpress

我正在寻找一种用图像替换某些字符串的方法。所有字符串都包含在 {} 中，当代码看到 [} 时，将读取里面的内容，它等于的内容将成为特定的图像。我没有最模糊的如何实现这一点，并希望有人能给我一个例子。

这是我的示例以更好地解释：

```
{1} is replaced with an image 
```

因此，当代码看到 {} 时，它将激活。现在它不会干扰代码的其他部分，它仅限于 1 个字符且仅限于某些字符。这是为了更具体的魔法卡施放成本。所以它也会受到限制......

B、U、R、G、W、X、T，例如 1-99

================================

所以......像这样的东西？

```
$image_string = '{R}{R}{R}{3}

$Mana_symbol ='BURGWXT1-99';

$output = preg_replace_all('/\{([' . $Mana_symbol. '])\}/', '<img src="\1.png"/>', $string);

switch ($output)
{
    case ('B'):
        $mana = '<img src = "black_mana.png"/>';
        break;
    case ('U'):
        $mana = '<img src = "blue_mana.png"/>';
        break;
    case ('G'):
        $mana = '<img src = "green_mana.png"/>';
        break;
    case ('R'):
        $mana = '<img src = "red_mana.png"/>';
        break;
    case ('W'):
        $mana = '<img src = "white_mana.png"/>';
        break;
    case ('1'):
        $mana = '<img src = "1_colorless_mana.png"/>';
        break;
    case ('2'):
        $mana = '<img src = "2_colorless_mana.png"/>';
        break;
    case ('3'):
        $mana = '<img src = "3_colorless_mana.png"/>';
        break;

        ....etc.... 
```

我不应该使用 preg_replace_all 吗，因为会有多个实例？就像上面的例子中的 $image_string 一样，它将替换字符串中匹配的所有出现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T23:35:05.653

这是一个使用正则表达式的示例（请参阅[http://www.php.net/pcre](http://www.php.net/pcre)）：

假设您的图像被称为`x.png`标签`{x}`：

```
<?php

$string = '{1} is replaced with an image';

// Use a regular expression
// The codes below will be placed into a character class
$validCodes = 'BURGWXT0-9';

// This array contains the image transforms
$images = array(
    'B' => 'black_mana.png',
    'U' => 'blue_mana.png',
    // ...
);

// Use preg replace to insert the images
$string = preg_replace_callback(
    '/\{([' . $validCodes . ']+)\}/',
    function($m) use ($images) {
        if (isset($images[$m[1]])) {
            return '<img src="' . $images[$m[1]] . '"/>';
        }
        return '';
    },
    $string
);

echo $string;

?> 
```

请询问您是否需要进一步说明。

**编辑**

我添加了一种机制，您可以通过填充数组来添加自己的转换。

`preg_replace`并且`preg_replace_callback`都将替换他们在字符串中找到的所有出现。

请注意，我使用的匿名函数仅在 PHP 5.3.0+ (http://php.net/manual/en/functions.anonymous.php) 中可用。

**编辑 2**

我刚刚意识到正则表达式的字符类不会捕获您的所有字符，并且您需要在字符类之后使用 + 来捕获您的一些代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T23:37:20.350

您可以使用正则表达式来解析所有 {}，然后 str_replace 它们

`preg_match_all('/{(1|2|3|99|a)}/', "{1} is replaced with an image{a} {99}", $match)`

# ruby-on-rails - 在 Rails 中捕获异常并 POST 到单独的 Rails 应用程序

> ID：10002900
> 
> 赞同：0
> 
> 时间：2012-04-03T23:24:50.613
> 
> 标签：ruby-on-rails, ruby-on-rails-3, exception, exception-handling

我正在开发一个显示服务器状态、站点统计信息等的仪表板应用程序，并且我还希望添加 Rails 应用程序异常跟踪。

我想要创建自己的主要原因基本上是因为我想要一个集成版本，它只是一个页面，显示我的服务器和应用程序上发生的一切。

仪表板应用程序是一个 Rails 应用程序，它有一个`app_exceptions`控制器和模型，具有以下内容：`app_id` `environment` `host` `message` `user_agent`.

是否可以将所有异常消息（很像 Airbrake 等）抛出到此仪表板应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T23:34:25.967

一种方法是在您的应用程序控制器中使用rescue_from 来调用一个POST 到您的仪表板API 的方法。

```
class ApplicationController < ActionController::Base
rescue_from Exception, :with => :postNotification 
```

[从信息中救援](http://api.rubyonrails.org/classes/ActiveSupport/Rescuable/ClassMethods.html)

在您的 :with 方法定义中，定义一个变量空间，您可以 POST 将 var 传递给您的仪表板 API，您可以在仪表板一侧进行分析/显示，以便为您提供最大的游戏空间，以了解您想要处理的异常信息和：

```
def postNotification(e)
   postToDashboardAPI(e)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:30:39.270

只是一个更新，我现在正在使用 rails_exception_handler gem - [https://github.com/Sharagoz/rails_exception_handler](https://github.com/Sharagoz/rails_exception_handler)

有了这个我可以很容易地发布到我的仪表板应用程序:)

# listview - 从 QML ListView 中的 TextEdit 获取数据

> ID：10002902
> 
> 赞同：1
> 
> 时间：2012-04-03T23:25:05.610
> 
> 标签：listview, qml, textedit

我有一个问题，我找不到解决方案，希望你能在这里找到它：我用它的模型和它的委托等做了一个 ListView，像这样：

```
Item {
id: creation;   width: parent.width ; height: parent.height
.....
ListView {
        id: mainViewLiist
        model: CreationModel {id: modelCreation}
        delegate: delegateCreation
        width: parent.width; height: parent.height;  x: -(screen.width * 1.5);
        cacheBuffer: 100;
    }
} 
```

委托包括 Text、TextEdit 等......像这样：

```
Component {
id: creationDelegate
Item {
    id: itemCreate
   ....
     Row {
                id: rowSerie
                spacing: 5
                Text {
                    id: seriesLabel
                    text: "Series:"
                    ....
                }

                TextEdit {
                    id: seriesTextEdit
                    text: ""
                    ....
                  }
           }
     .... 
    }
....
} 
```

在同一个项目“creation”中，还有一个带有两个按钮的 ToolBar，如下所示：

```
ToolBar { id: toolBarCreation; height: 40;
    width: parent.width;
    opacity: 1.0
    button1Label: "Back"
    button2Label: "Create"
    onButton1Clicked:
    {
      ...
    }
    onButton2Clicked:
    {
        ...
    }
  } 
```

我想要的是：当我单击第二个按钮“创建”时，我只想用 console.log(arg1,...) 显示在 TextEdit 中写入的内容，称为 listView 中每个项目的“seriesTextEdit” . 例如，如果我的列表视图包含 10 个项目，并且用户在所有项目的所有 TexTedit 中插入了一个值，我如何访问这些数据？非常感谢，贾马科

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T18:44:29.570

ListView 可能是使用错误的类，因为它会破坏不在可见区域中的项目并创建可见的新项目。如果您不希望使用中继器。

无论如何，您可以使用 ListView.contentItem.children 访问 ListView 的子项。我试过了，它包含一个额外的元素（可能是标题）。

我建议在列表项委托的根目录中为 TextEdit 文本（在我的示例中为 seriesName）设置一个别名属性。可能您需要相同的索引，因为如前所述，ListView 可能不包含所有模型项的元素。然后你可以使用循环来获取文本。

```
print(mainViewLiist.contentItem.children.length);
for (var i = 0, l = mainViewLiist.contentItem.children.length; i < l; i++) {
    var child = mainViewLiist.contentItem.children[i];
    print(i, ": ", child, "=", child.text);
} 
```

# android - 仅在横向中显示的操作项？

> ID：10002903
> 
> 赞同：0
> 
> 时间：2012-04-03T23:25:13.600
> 
> 标签：android, android-4.0-ice-cream-sandwich, actionbarsherlock, android-actionbar

我只是想知道是否有可能仅在设备处于横向模式时才显示操作栏图标？在纵向中，我有一个用于特定任务的屏幕按钮，但为了利用横向的所有屏幕空间，该按钮不适合。所以我想知道是否可以将它放在操作栏中，但只有在设备处于横向时才需要。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T23:40:30.790

当活动处于横向时，您可以定义一个特定的菜单 XML，方法是将其放在`/res/menu-land`文件夹中。

# java - 用 sed 搜索和替换

> ID：10002904
> 
> 赞同：0
> 
> 时间：2012-04-03T23:25:22.040
> 
> 标签：java, sed

上周我不小心将我的 eclipse 项目的所有字符串都外部化了。我需要恢复这一点，我唯一的希望是 sed。我尝试创建脚本，但可悲地失败了，因为我是 sed 的新手，这将是一个非常复杂的操作。我需要做的是：

文件中的字符串`class.java`目前采用以下格式（方法）`Messages.getString(<key>)`。例子 ：

```
 if (new File(DataSource.DEFAULT_VS_PATH).exists()) {
        for (int i = 1; i <= c; i++) {
            if (!new File(DataSource.DEFAULT_VS_PATH
                    + Messages.getString("VSDataSource.89") + i).exists()) { //$NON-NLS-1$
                getnewvfspath = DataSource.DEFAULT_VS_PATH
                        + Messages.getString("VSDataSource.90") + i; //$NON-NLS-1$
                break;
            }
        }
    } 
```

键和匹配字符串以`messages.properties`以下格式保存在文件中。

```
VSDataSource.92=No of rows in db = 
VSDataSource.93=Verifying db entry : 
VSDataSource.94=DB is open
VSDataSource.95=DB is closed
VSDataSource.96=Invalid db entry for 
VSDataSource.97=\ removed.
key=string 
```

所以我需要这种格式的java文件：

```
 if (new File(DataSource.DEFAULT_VS_PATH).exists()) {
        for (int i = 1; i <= c; i++) {
            if (!new File(DataSource.DEFAULT_VS_PATH
                    + "String 2" + i).exists()) { //$NON-NLS-1$
                getnewvfspath = DataSource.DEFAULT_VS_PATH
                        + "String 1" + i; //$NON-NLS-1$
                break;
            }
        }
    } 
```

我怎样才能做到这一点`sed`？或者有没有更简单的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T00:31:18.277

这可能对你有用（GNU sed？）：

```
sed 's|^\([^=]*\)=\(.*\)|s@Messages.getString("\1")@"\2"@g|;s/\\/\\\\/g' messages.properties |
sed -i -f - *.java 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T23:59:44.893

重复我对这个问题的评论 - 我认为 Java 问题最好用 Java 解决:) 虽然这可以说是由你引起的 Eclipse 帮助问题:)

制作一个 Java 程序，您可以在其中：

*   读取属性，
*   遍历你所有的项目 .java 文件，
*   对于每个文件：
    *   逐行读取每个文件，
    *   使用正则表达式替换所有字符串，从加载的属性中键入，
    *   读完所有行后保存。

不是2分钟的工作，但很容易。

但是如果你真的想使用 sed ;)

mkt.sh

```
$ cat mkt.sh
# Test structure
rm -rf a b
mkdir a
mkdir b
cat > a/A.java <<EOF
my plans for replace
this will be left alone 
EOF
cat > b/B.java <<EOF
propery ginger
broccoli tomato potato
EOF

display() {
  for i in a/A.java b/B.java; do
    echo --- $i
    cat $i
  done
}

display

# Prop change
echo 'echo --- Replacing in: $1' > replace.sh
sed -r 's/([^=]+)=(.+)/sed -i '\''s#\1#\2#'\'' $1/' sample.properties >> replace.sh
chmod u+x replace.sh

# Replace
find -type f -name "*.java"|xargs -n1 ./replace.sh

# Test
display 
```

跑：

```
$ ./mkt.sh 
--- a/A.java
my plans for replace
this will be left alone 
--- b/B.java
propery ginger
broccoli tomato potato
--- Replacing in: ./a/A.java
--- Replacing in: ./b/B.java
--- a/A.java
my plans for world domination
this will be left alone 
--- b/B.java
propery ginger
steak tomato potato 
```

这应该在您的 .java 文件上正常工作，但之前**请**制作副本；）如果`#`在字符串中，您将遇到一些问题，但您可以通过从属性文件中删除这些，进行替换，将它们带回并更改来解决这个问题这一行：

```
sed -r 's/([^=]+)=(.+)/sed -i '\''s#\1#\2#'\'' $1/' sample.properties >> replace.sh 
```

例如：

```
sed -r 's/([^=]+)=(.+)/sed -i '\''s+\1+\2+'\'' $1/' sample.properties >> replace.sh 
```

where`+`不是剩余的字符。有点麻烦，但是...

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T00:10:46.540

制作.awk：

```
BEGIN {
    FS="=";
    print "for i in *.java"
    print "do"
    print "sed \\"
}

{
    msg = "Messages.getString(\"" $1 "\")";
    gsub("/","\\/",$2);
    print "-e 's/" msg "/\"" $2 "\"/g' \\"
}

END {
    print "$i > $$"
    print "mv $$ $i"
    print "done" 
} 
```

跑：

```
awk -f makesed.awk yourpropertiesfile.dat > process.sh 
```

这为您提供了一个 shell 脚本：

```
for i in *.java
do
sed \
-e 's/Messages.getString("VSDataSource.92")/"No of rows in db "/g' \
-e 's/Messages.getString("VSDataSource.93")/"Verifying db entry : "/g' \
-e 's/Messages.getString("VSDataSource.94")/"DB is open"/g' \
-e 's/Messages.getString("VSDataSource.95")/"DB is closed"/g' \
-e 's/Messages.getString("VSDataSource.96")/"Invalid db entry for "/g' \
-e 's/Messages.getString("VSDataSource.97")/"\ removed."/g' \
$i > $$
mv $$ $i
done 
```

然后进入您各自的 Java 目录并运行：

```
sh process.sh 
```

这将“修复”该目录中的所有 java 文件。

如果您的属性文件很长，您很可能会遇到 sed 的命令行限制。只需将文件分成块，直到脚本满意为止。

显然，这不适用于任何转义字符，如果您的消息中有“=”，您也会遭受一些痛苦。如果你傻到在没有备份的代码上运行它，那么你当然应该得到发生在你身上的任何事情。

但这应该是一个好的开始。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-03T23:36:34.233

你不需要编程任何东西。右键单击您修改的文件之一，然后选择“替换为 >”、“本地历史记录中的上一个”。根据需要重复。

# java - tuProlog 未知行为

> ID：10002906
> 
> 赞同：2
> 
> 时间：2012-04-03T23:25:26.690
> 
> 标签：java, prolog, tuprolog

我正在使用 tuProlog 将 Prolog 与 Java 集成，为此我定义了一个`prolog.pl`包含以下代码的文件：

```
go:-write('hello world!'),nl. 
```

然后，在我的 Java 项目中，我有一个调用它的主类：

```
Prolog engine = new Prolog();

Theory theory = new Theory(new FileInputStream("prolog.pl"));

try {
           engine.setTheory(theory);
        } catch (InvalidTheoryException ex) {

        }
SolveInfo solution = engine.solve("go.");

if (solution.isSuccess()) {

    System.out.println(solution.getSolution());
} 
```

这段代码应该输出'hello world'，但是，它输出'go'，为什么会有这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T05:58:26.267

终于发现行为一点都不飘忽：）

解决方案是在调用 Solve 方法之前添加此代码。

```
engine.addOutputListener(new OutputListener() {
        @Override
        public void onOutput(OutputEvent e) {
            finalResult += e.getMsg();

        }
}); 
```

`finalResult`只是一个全局变量，其中包含 Prolog 写指令产生的返回字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:50:50.527

您的解决方案（正确）是成功的 Prolog 查询（go/0），您所期望的（'hello world！'）是内置的输出，因此您应该检查 Java 引擎的“stdout”。

否则，将您的程序编码为“返回”变量中的信息。

```
go(X) :- X = 'hello world!'. 
```

然后 tuProlog 将提供访问实例变量的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T06:43:03.480

我不了解 tuProlog/Java，但是当从 PHP 调用 Swi-Prolog 时，我必须将 'halt' 作为谓词的最后语句，以告诉 Prolog 退出并将控制权返回给 php。

```
go:-write('hello world!'),nl, halt. 
```

# jquery - 是否可以指定 Jquery File Upload 只回发一次（对于多个文件）？

> ID：10002907
> 
> 赞同：0
> 
> 时间：2012-04-03T23:25:27.187
> 
> 标签：jquery, asp.net, asp.net-mvc, asp.net-mvc-3, file-upload

当我上传多个文件（每个 blueimp jquery 文件上传）时，每个文件都会输入一次 [httppost] 操作。是否可以使用枚举文件容器指定一个且只有一个回发以进行迭代？

看法：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="@Url.Content("~/Scripts/jquery.ui.widget.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.iframe-transport.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.fileupload.js")" type="text/javascript"></script>

<input id="fileupload" type="file" name="files" multiple="multiple"/> 
```

控制器：

```
public ActionResult Index()
{
    return View();
}

[HttpPost]
public ActionResult Index(IEnumerable<HttpPostedFileBase> files)
{
    // This is posted back for every file that gets uploaded...I would prefer it only post back once
    // with a collection of files to iterate.  Is this possible?
    foreach (var file in files) // There is only ever one file in files
    {
        var filename = Path.Combine(Server.MapPath("~/App_Data"), file.FileName);
        file.SaveAs(filename);
    }
    return View();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:24:20.273

jquery 代码：动态创建文件上传数量。

```
<script type="text/javascript">
$(function() {
    $("#num").append("<option value='0'>select file num...</option>");
    for (var i = 1; i <= 20; i++) {
        $("#num").append("<option value='" + i + "'>" + i + "</option>");
    }
    $("#num").change(function() {
        var num= $("#num").val();
        $("#files").html("");
        for (var i = 0; i < num; i++) {
            $("#files").append("<p><input type='file' name='file_"+i+"'></p>");
        }
    });
});
</script>

// Html codes
<% Html.BeginForm("Upload", "Home", FormMethod.Post, new { @enctype = "multipart/form-data", @id =    "form" }); %>
    <select id="num"></select>
    <div id="files"></div>
    <input type="submit" value="Submit"><%= ViewData["result"] %>
<% Html.EndForm(); %> 
```

控制器代码：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Upload()
{
  foreach (string name in Request.Files)
  {
    var file = Request.Files[name];
    file.SaveAs(Server.MapPath("~/" + file.FileName));
  }
  ViewData["result"] = "success.";
  return View();
} 
```

# java - 从 XML 保存/加载 jFreechart TimeSeriesCollection 图表

> ID：10002910
> 
> 赞同：2
> 
> 时间：2012-04-03T23:25:44.300
> 
> 标签：java, xml, jfreechart, dynamic-data

我正在使用这个示例，它将[rondom](http://www.java2s.com/Code/Java/Chart/JFreeChartDynamicDataDemo.htm)动态数据放入 TimeSeriesCollection 图表中。

![首次运行应用程序时的数据](../Images/6f325f7a3a5ca78a18f1cc32b59c8df2.png)

![过了一会儿，我就不能像第一张照片那样拥有旧数据了](../Images/064e16e552eeb1f822fafc731686f137.png)

我的问题是我找不到如何：

1-仅通过实现水平滚动条，在它们通过视图区域的左边界（因为数据点从右到左移动）时跟踪旧数据（**最后一小时）。**

2-当我想拥有**所有**数据历史记录时，XML 是保存数据的好选择吗？

```
public class DynamicDataDemo extends ApplicationFrame  {
    /** The time series data. */
    private TimeSeries series;

    /** The most recent value added. */
    private double lastValue = 100.0;

public DynamicDataDemo(final String title) {

    super(title);
    this.series = new TimeSeries("Random Data", Millisecond.class);
    final TimeSeriesCollection dataset = new TimeSeriesCollection(this.series);
    final JFreeChart chart = createChart(dataset);

    final ChartPanel chartPanel = new ChartPanel(chart);

    final JPanel content = new JPanel(new BorderLayout());
    content.add(chartPanel);
    chartPanel.setPreferredSize(new java.awt.Dimension(500, 270));
    setContentPane(content);

}

private JFreeChart createChart(final XYDataset dataset) {
    final JFreeChart result = ChartFactory.createTimeSeriesChart(
        "Dynamic Data Demo", 
        "Time", 
        "Value",
        dataset, 
        true, 
        true, 
        false
    );
    final XYPlot plot = result.getXYPlot();
    ValueAxis axis = plot.getDomainAxis();
    axis.setAutoRange(true);
    axis.setFixedAutoRange(60000.0);  // 60 seconds
    axis = plot.getRangeAxis();
    axis.setRange(0.0, 200.0); 
    return result;
}

public void go() {

        final double factor = 0.90 + 0.2 * Math.random();
        this.lastValue = this.lastValue * factor;
        final Millisecond now = new Millisecond();
        System.out.println("Now = " + now.toString());
        this.series.add(new Millisecond(), this.lastValue);

}

public static void main(final String[] args) throws InterruptedException {

    final DynamicDataDemo demo = new DynamicDataDemo("Dynamic Data Demo");
    demo.pack();
    RefineryUtilities.centerFrameOnScreen(demo);
    demo.setVisible(true);

    while(true){

        demo.go();
        Thread.currentThread().sleep(1000);
    }

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T02:00:32.277

1.  该[示例](http://www.java2s.com/Code/Java/Chart/JFreeChartDynamicDataDemo.htm)使用在最大项目年龄和计数中指定的[默认值。](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/data/time/TimeSeries.html#line.169)[`TimeSeries`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/data/time/TimeSeries.html)您需要更改它们以满足您的要求。

2.  XML 很好，但是对于高速率来说它很庞大；相应地计划。

另请参阅此[示例](https://stackoverflow.com/a/5048863/230513)，该示例`javax.swing.Timer`用于避免阻塞事件调度线程。

# jquery - 浮动元素上的jquery偏移不正确

> ID：10002912
> 
> 赞同：0
> 
> 时间：2012-04-03T23:25:58.857
> 
> 标签：jquery, offset

我有一堆图像，每个图像都应用了`float: left`属性。它们受到`400px`宽度区域的限制，迫使它们进入 4 X 4 的网格。如果我尝试获取它们的位置，它们总是不正确的。这是什么原因造成的？你可以在这里看到我想要做什么：http: [//dev.redemptionconnect.com/cards/browse](http://dev.redemptionconnect.com/cards/browse)。单击其中一张图片以了解我的意思。弹出的对话框应该在您单击的图像上方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T00:01:07.283

在我看来，您应该检查实际浮动元素的偏移量：底层`<img>`. 实际上，它们在浮动时与链接的内联布局性质分离，将链接留在`top:0;left:0`.

您也可以摆脱`<a>`并将该单击事件应用于图像。或者`float:left`，`<a>`无论您喜欢什么。

# vector - 对向量进行归一化需要什么？

> ID：10002918
> 
> 赞同：53
> 
> 时间：2012-04-03T23:26:51.117
> 
> 标签：vector, normalizing

试图更多地理解向量。

对向量进行归一化需要什么？

如果我有一个向量，N = (x, y, z)

当你规范化它时你实际上得到了什么 - 我明白你必须除以 x/|N| 是/|N| &z/|N|。我的问题是，我们为什么要做这件事，我的意思是我们从这个等式中得到什么？

这样做的意义或“内部”目的是什么。

有点数学问题，我很抱歉，但我真的不清楚这个话题。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2015-07-11T18:17:42.350

对于任何向量`V = (x, y, z)`，`|V| = sqrt(x*x + y*y + z*z)`给出向量的长度。

当我们对一个向量进行归一化时，我们实际上计算`V/|V| = (x/|V|, y/|V|, z/|V|)`.

很容易看出，归一化向量的长度为 1。这是因为：

```
| V/|V| | = sqrt((x/|V|)*(x/|V|) + (y/|V|)*(y/|V|) + (z/|V|)*(z/|V|))
          = sqrt(x*x + y*y + z*z) / |V|
          = |V| / |V|
          = 1 
```

因此，我们可以将归一化向量称为单位向量（即具有单位长度的向量）。

任何向量，当归一化时，只会改变它的大小，而不是它的方向。此外，指向同一方向的每个向量都被归一化为同一向量（因为幅度和方向唯一地定义了一个向量）。因此，单位向量对于提供方向非常有用。

但是请注意，上述所有讨论都是针对 3 维笛卡尔坐标`(x, y, z)`的。但笛卡尔坐标的真正含义是什么？

事实证明，要在 3D 空间中定义一个向量，我们需要一些参考方向。这些参考方向被规范地称为**i**、**j**、**k**（或 i、 j 、 k 上面有小大写字母 - 称为“i cap”、“j cap”和“k cap”）。我们认为的任何向量`V = (x, y, z)`实际上都可以写为`V = xi + yj + zk`。（注意：我不再用大写字母来称呼它们，我只会称它们为 i、j、k）。i、j 和 k 是 X、Y 和 Z 方向上的单位向量，它们形成一组相互正交的单位向量。它们是所有笛卡尔坐标几何的基础。

还有其他形式的坐标（例如圆柱坐标和球坐标），虽然它们的坐标不像 那样直接理解`(x, y, z)`，但它们也是由一组 3 个相互正交的单位向量组成，这些单位向量构成了 3 个坐标相乘的基础产生一个向量。

所以，上面的讨论清楚地表明我们需要单位向量来定义其他向量，但你为什么要关心呢？

因为有时，只有量级很重要。那是当您使用“常规”数字时（例如 4 或 1/3 或 3.141592653 - 不，对于所有强迫症怪胎，我不会把 Pi 放在那里 - 这将保持一个终止小数，因为我是邪恶的化身）。你不想扔到一个讨厌的方向，是吗？我的意思是，说我要4公斤西瓜面向西方真的有意义吗？当然，除非你是一些疯狂的狂热分子。

其他时候，只有方向很重要。你只是不在乎量级，或者量级太大而无法理解（有点像无限，只是没有人真正知道无限到底是什么——万岁伟大的无限，因为他有无限的无限......对不起，有点忘乎所以）。在这种情况下，我们使用向量的归一化。例如，说我们有一条面向北 4 公里的线没有任何意义。说我们有一条面向北方的线更有意义。那你怎么办？你摆脱了4公里。你破坏了规模。你所剩下的就是北方（冬天来了）。经常这样做，你将不得不给你正在做的事情一个名字和符号。您不能只称其为“忽略大小”。那太粗鲁了。你是数学家

顺便说一句，因为我提到了笛卡尔坐标，所以这里是强制性的 XKCD：![XKCD](../Images/14bff6aa1a4f913381cea130ae259e14.png)

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2017-07-31T08:20:48.210

阅读[有关单位向量、归一化和点积的](http://docs.godotengine.org/en/stable/learning/features/math/vector_math.html)[Godot 游戏引擎](https://godotengine.org/) 文档确实很有意义。这是这篇文章：

**单位向量**

好的，所以我们知道什么是向量。它有方向和幅度。我们也知道如何在 Godot 中使用它们。下一步是学习单位向量。任何长度为 1 的向量都被视为单位向量。在 2D 中，想象绘制一个半径为 1 的圆。该圆包含所有存在的二维单位向量：

[![在此处输入图像描述](../Images/cb3189069709bd4f743536063c6a021e.png)](https://i.stack.imgur.com/Lzdi1.png)

那么，单位向量有什么特别之处呢？单位向量是惊人的。换句话说，单位向量有几个非常有用的属性。

迫不及待地想了解更多关于单位向量奇妙特性的信息，但一步一步来。那么，如何从正则向量创建单位向量呢？

**正常化**

取任何向量并在保持其方向的同时将其幅度减小到 1.0 称为归一化。归一化是通过将向量的 x 和 y（以及 3D 中的 z）分量除以其大小来执行的：

```
var a = Vector2(2,4)
var m = sqrt(a.x*a.x + a.y*a.y)
a.x /= m
a.y /= m 
```

正如您可能已经猜到的那样，如果向量的大小为 0（这意味着它不是向量，而是原点也称为零向量），则会发生除以零，并且宇宙会经历第二次大爆炸，除了极性相反然后返回. 结果，人类是安全的，但 Godot 会打印一个错误。记住！Vector(0,0) 无法归一化！

当然，Vector2 和 Vector3 已经提供了一种方法来做到这一点：

```
a = a.normalized() 
```

**点积**

好的，点积是向量数学中最重要的部分。如果没有点积，Quake 就不会被制作出来。这是本教程中最重要的部分，因此请务必正确掌握。大多数试图理解向量数学的人在这里放弃了，因为尽管它很简单，但他们无法从中得出正面或反面。为什么？这就是为什么，这是因为...

点积采用两个向量并返回一个标量：

```
var s = a.x*b.x + a.y*b.y 
```

是的，差不多就是这样。将向量 a 中的 x 乘以向量 b 中的 x。对 y 执行相同操作并将其相加。在 3D 中几乎相同：

```
var s = a.x*b.x + a.y*b.y + a.z*b.z 
```

我知道，这完全没有意义！你甚至可以使用内置函数来做到这一点：

```
var s = a.dot(b) 
```

两个向量的顺序无关紧要，`a.dot(b)`返回与 相同的值`b.dot(a)`。

这就是绝望开始的地方，书籍和教程向您展示了这个公式：

`A ⋅ B = ∥A∥ ∥B∥ cos(θ)`

你意识到是时候放弃制作 3D 游戏或复杂的 2D 游戏了。这么简单的事情怎么会这么复杂？其他人将不得不制作下一个塞尔达或使命召唤。毕竟，自上而下的 RPG 看起来并没有那么糟糕。是的，我听说有人对 Steam 上的其中一个做了很好的决定...

所以这是你的时刻，这是你发光的时刻。不放弃！在这一点上，本教程将急转直下，重点关注点积的有用之处。这就是为什么它有用。我们将一一关注点积的用例，以及现实生活中的应用。没有更多没有任何意义的公式。一旦你了解了它们的用途，公式就会变得有意义。

侧板 点积的第一个有用且最重要的属性是检查侧边的内容。假设我们有任意两个向量，a 和 b。任何方向或大小（无原点）。不管它们是什么，但让我们假设我们计算它们之间的点积。

```
var s = a.dot(b) 
```

该操作将返回一个浮点数（但由于我们处于向量世界中，我们称它们为标量，从现在开始将继续使用该术语）。这个数字将告诉我们以下信息：

如果数字大于零，则两者都朝向同一方向（它们之间的角度小于 90°）。如果数字小于零，则两者都朝相反的方向看（它们之间的角度> 90°）。如果数字为零，则向量的形状为 L（它们之间的角度为 90°）。

[![在此处输入图像描述](../Images/388d5fdf5b08e071aa609d8a039dedc1.png)](https://i.stack.imgur.com/ZFdFL.png)

因此，让我们考虑一个真实的用例场景。想象 Snake 正在穿过一片森林，然后附近有一个敌人。我们如何快速判断敌人是否看到发现了 Snake？为了发现他，敌人必须能够看到 Snake。让我们说，然后：

Snake 在位置 A。敌人在位置 B。敌人面向方向向量 F。

[![在此处输入图像描述](../Images/ee2ab26825c811135cea8a5303e0cd99.png)](https://i.stack.imgur.com/N9JLG.png)

因此，让我们创建一个从守卫 (B) 到 Snake (A) 的新向量 BA，方法是将两者相减：

```
var BA = A - B 
```

[![在此处输入图像描述](../Images/5b0e85e1a3a888a6638057641950a20c.png)](https://i.stack.imgur.com/CjQ14.png)

理想情况下，如果守卫直视蛇，为了进行眼神交流，它会在与向量 BA 相同的方向上进行。

如果 F 和 BA 之间的点积大于 0，那么就会发现 Snake。发生这种情况是因为我们将能够判断守卫面向他：

```
if (BA.dot(F) > 0):
    print("!") 
```

到目前为止，Snake 似乎是安全的。

与单位向量对齐 好的，所以现在我们知道两个向量之间的点积将让我们知道它们是朝向同一侧、相反侧还是彼此垂直。

无论大小如何，这对所有向量都适用，因此单位向量也不例外。但是，将相同的属性与单位向量一起使用会产生更有趣的结果，因为添加了一个额外的属性：

如果两个向量都面向完全相同的方向（彼此平行，它们之间的角度为 0°），则结果标量为 1。如果两个向量都面向完全相同的方向（彼此平行，但它们之间的角度）为 180°），得到的标量为 -1。这意味着单位向量之间的点积总是在 1 到 -1 的范围内。所以又...

如果它们的角度为0°，点积为1。如果它们的角度为90°，则点积为0。如果它们的角度为180°，则点积为-1。呃……这奇怪的熟悉……以前见过……在哪里？

让我们取两个单位向量。第一个是向上的，第二个也是，但是我们将它从上（0°）一直旋转到下（180°）......

[![在此处输入图像描述](../Images/3f94f058932e399cafe33ea353380035.png)](https://i.stack.imgur.com/nqEvN.png)

在绘制结果标量时！

[![在此处输入图像描述](../Images/b81cbff1cbb3ee35e1301124e66a32e9.png)](https://i.stack.imgur.com/cy0ig.png)

啊哈！现在一切都说得通了，这是一个余弦函数！

我们可以这样说，那么，作为一项规则......

两个单位向量之间的点积是这两个向量之间夹角的余弦值。因此，要获得两个向量之间的角度，我们必须这样做：

```
var angle_in_radians = acos( a.dot(b) ) 
```

这有什么用？那么直接获得角度可能没有那么有用，但是能够分辨出角度是有用的参考。一个例子是在运动学角色演示中，当角色向某个方向移动时，我们会撞到一个物体。如何判断我们击中的是不是地板？

通过将碰撞点的法线与先前计算的角度进行比较。

这样做的美妙之处在于，相同的代码在 3D 中的工作方式完全相同且无需修改。矢量数学在很大程度上与维度数量无关，因此添加或删除轴只会增加很少的复杂性。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-03T23:49:30.857

这有点像问我们为什么要乘以数字。它总是出现。

我们使用的笛卡尔坐标系是正交基（由相互正交的长度为 1 的向量组成，基意味着任何向量都可以由这些向量的唯一组合表示），当您要旋转基时（当您环顾四周时，会出现在视频游戏机制中）您使用行和列是正交向量的矩阵。

一旦你开始在线性代数中使用矩阵，你就会需要正交向量。例子太多了，不一一列举。

归根结底，我们*不需要*归一化向量（就像我们*不需要*汉堡包一样，我们可以没有它们，但谁会去呢？），但类似的模式`v / |v|`经常出现，以至于人们决定给它一个名字和一个特殊的符号（向量上的 ^ 表示它是一个标准化向量）作为快捷方式。

归一化向量（也称为单位向量）基本上是生活中的事实。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-03T23:29:50.147

您将其长度设为 1 - 找到指向同一方向的单位向量。

这对于各种目的很有用，例如，如果您将向量与单位向量进行点积，则您将获得该向量在单位向量方向上的分量的长度。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-03T23:54:15.797

法线应该仅用作方向向量。它们用于照明计算，这需要归一化的法线向量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-25T05:43:27.153

我看到帖子很老了，但我仍然想回答它，因为我没有看到明确的答案，为什么我们要规范化。向量归一化的原因是要找到向量的确切大小以及它在另一个向量上的投影。

示例=向量 a 在 b 上的投影是 b.cos(theta)

[在此处输入图像描述](https://i.stack.imgur.com/VGBJl.png)

但在点积的情况下，两个向量 a 和 b 的点积是 abcos(theta)

这意味着点积是 a 超过 b 乘以 a 的投影。因此，我们将它除以 a 以归一化以找到投影的确切长度，即 (b.cos(theta))。希望很清楚。

# android - 我不能为 Andengine 从 1.6 传递到 2.3.3

> ID：10002920
> 
> 赞同：0
> 
> 时间：2012-04-03T23:27:11.270
> 
> 标签：android, 2d, andengine

我有一本书叫做“Learning Android Game Programming-Rick Rogers”。但是他们的例子是为 android 1.6 编写的。所以我不能为 android 2.3.3 运行他们的代码。当我尝试为 2.3.3 运行时，它会创建一个错误（强制关闭）..我使用 eclipse for java。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T01:18:42.907

如果您可以从 Eclipse 发布您的 logcat，那就太好了，请注意，为旧版本的 Android 编写的代码可能在较新的版本中使用已弃用/不存在的方法，但总是有等效的方法。:)

# c# - 使用 if 语句来微观管理堆栈

> ID：10002922
> 
> 赞同：4
> 
> 时间：2012-04-03T23:27:37.703
> 
> 标签：c#

是否应该使用 if 语句来帮助堆栈的内存释放？

示例 A：

```
 var objectHolder = new ObjectHolder();
        if (true)
        {
            List<DefinedObject> objectList;
            using (var sr = new GenericStreamReader<DefinedObject>())
            {
                objectList= sr.Get().ToList();
            }
            if (true)
            {
                var DOF = new DefinedObjectFactory();
                objectHolder.DefinedObjects = DOF.DefineObjects(objectList);
            }
        }
        //example endpoint 
```

示例 B：

```
 var objectHolder = new ObjectHolder();
        List<DefinedObject> objectList;
        using (var sr = new GenericStreamReader<DefinedObject>())
        {
         objectList= sr.Get().ToList();
        }
        var DOF = new DefinedObjectFactory();
        objectHolder.DefinedObjects = DOF.DefineObjects(objectList);
        //example endpoint 
```

当到达示例端点时，示例 A 在堆栈上的占用空间会比在示例 B 中到达示例端点时更轻吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T00:12:24.903

首先，基于堆栈的分配系统的全部*意义*在于您*不需要*以任何方式对其进行优化。别担心。jitter 完全能够意识到永远不会再读取或写入本地，并且如果它认为这是最好的做法，则可以重新使用其存储。让抖动发挥作用；它不需要你的帮助。(*)

而是编写程序，使局部变量*对读者有意义*。这就是你应该优化的。

最后，永远不需要说“if (true) { }”来引入新的作用域。只需引入一个新范围。完全合法的说法是：

```
void M()
{
    { // new scope
    }

    { // another one
    }
} 
```

* * *

(*) 在某些情况下，jitter 需要您的帮助，那就是 local 引用堆上的一个对象，该对象包含*将由非托管代码*使用的资源。抖动不知道非托管代码将使用对象的资源，并且可能会决定没有人再使用该对象并尽早清理它。然后，对象的终结器可能会在非托管代码使用资源时释放*终结器线程上的资源！***一个对象不能仅仅因为一个局部变量持有它而保证活着。**如果局部变量不再被读取，那么抖动可以重新使用它的存储并告诉垃圾收集器收集引用的对象是安全的，这可能会使非托管代码崩溃。您可以使用`KeepAlive`来提示特定对象需要保持活动状态而不被优化掉的抖动。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-03T23:33:27.903

`if(true)`将在优化构建中编译出来（变量寿命短于整个方法的唯一构建）-因此您建议的两个版本之间绝对没有区别。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-03T23:48:50.233

根据用法，我假设`DefinedObjectFactory`是一个类，而不是一个结构。因此，堆栈上唯一的东西是对`DefinedObjectFactory`. 实际对象在堆上，由垃圾收集器控制。

您可能节省的唯一堆栈空间是单个指针的空间，因此不值得。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-03T23:40:34.597

即使这确实有所作为，我认为您很可能担心的是错误的事情。堆栈空间分配真的是您的应用程序的问题吗？

一般来说，为了微优化而在代码中做“聪明”的事情通常是不值得的。以最干净和最直接的方式编写代码通常是一个更好的主意。之后，如果你发现你确实有一些性能/可扩展性问题（基于做实际测量），你可以选择重写/优化瓶颈部分。

大多数时候，您会发现代码的干净/直接/可读版本执行得很好。如果没有，问题可能不在您认为的地方。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-03T23:41:54.657

关于取消分配和垃圾收集，您只能保证一件事 - 它会在某个阶段发生。

正如其他人所说，你的 if(true) 唯一能实现的就是被 Jitter 优化。

您已经在使用 using(..) { } 模式，因此我将重构您的代码以支持这一点，而不是使用 if(true) 块：

```
if (true)
{
   var DOF = new DefinedObjectFactory();
   objectHolder.DefinedObjects = DOF.DefineObjects(objectList);
} 
```

到：

```
using (var DOF = new DefinedObjectFactory())
{
   objectHolder.DefinedObjects = DOF.DefineObjects(objectList);
} 
```

看看这是否有帮助。

您可以*尝试*另一种方法，但绝对不建议将其用于生产代码，因为您不应该抢占内存管理器，但这只是添加一个调用

```
GC.Collect(); 
```

当你退出你的街区。

我认为它不会有帮助，但它可能会向您展示为什么通常不值得担心范围和取消分配。

# android - Switch:case 用于从 gridview 菜单重定向到其他活动

> ID：10002928
> 
> 赞同：1
> 
> 时间：2012-04-03T23:28:16.763
> 
> 标签：android

它只是不会从菜单中打开任何开关盒的下一个活动。从菜单中单击或触摸任何项目（位置）应打开相关活动。示例代码或更正会有所帮助。谢谢！

```
 Menu.java
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.options);
    GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(new ImageAdapter(this));

    gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, 
 longid) {
            switch (position) {
            case 0:
                 Intent intent = new Intent("mjour.fyp.CAMERA");
                    startActivity(intent);
                   break;

        }
            return;
            } 
```

ImageAdapter.java

```
 public class ImageAdapter extends BaseAdapter {
private Context mContext;

public ImageAdapter(Context c) {
    mContext = c;
}

public int getCount() {
    return mThumbIds.length;
}

public Object getItem(int position) {
    return null;
}

public long getItemId(int position) {
    return 0;
}

// create a new ImageView for each item referenced by the Adapter
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);
    } else {
        imageView = (ImageView) convertView;
    }

    imageView.setImageResource(mThumbIds[position]);
    return imageView;
}

// references to our images
private Integer[] mThumbIds = {
        R.drawable.camera, R.drawable.camera,
        R.drawable.camera, R.drawable.camera,
        R.drawable.camera, R.drawable.camera,
        R.drawable.camera, R.drawable.camera,

}; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T00:56:13.323

Can you try:

```
Intent intent = new Intent(Main.this, CAMERA.class);
startActivity(intent); 
```

# java - 如何平移和缩放 JComponent？

> ID：10002931
> 
> 赞同：3
> 
> 时间：2012-04-03T23:28:39.853
> 
> 标签：java, swing, jung

我正在尝试为图形编程构建用户界面。我想使用[JUNG](http://jung.sourceforge.net/)来处理绘图的图形方面。我不想使用 Graphics2D 绘制所有小部件，而是希望尽可能频繁地使用 Swing 小部件以利用 Swing 的事件架构。

我希望能够平移、缩放、旋转绘制图形的画布，但只要它们大到可以看到，仍然保留操纵 Swing 小部件的能力。我还希望小部件根据我选择的 JUNG 布局算法自动布局。

**如何组合 Graphics2D 绘图和 Swing 组件？**

我知道 JComponents 会使用他们的`paint()`方法来处理自己的绘制。我难以理解的是如何创建可能受 Graphics2D 转换影响的 Swing 对象，并且仍然保留其所有事件处理。我不能只显示组件的图像。该组件必须是活动的。

我尝试子类化一个小部件并将 AffineTransform 添加到传递给父`paint`方法的图形对象。它旋转小部件，但剪裁似乎已关闭。

有什么建议么？目前，如果可以的话，我想避免添加另一个库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:47:43.653

[JXLayer](https://jxlayer.dev.java.net/)项目具有将整个 UI 转换为不同比例的实现。

你可能想看看[这个演示](http://www.pbjar.org/blogs/jxlayer/version_2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T01:00:27.720

例如，[`JDigit extends JButton`](https://stackoverflow.com/a/4151403/230513)并覆盖`paintComponent()`以缩放到其封闭的大小`Container`。为了速度，该组件使用预渲染字形，但`deriveFont()`速度稍慢。`Icon`通过实现接口可以获得类似的结果。此[示例](https://sites.google.com/site/drjohnbmatthews/buttons)将按钮网格缩放到几个预先确定的大小，并且此[示例](https://sites.google.com/site/drjohnbmatthews/scaledview)完全放弃组件，缩放图形上下文和所有内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T22:03:52.557

根据我的研究，使用[Piccolo2D](http://www.piccolo2d.org/)可以平移和缩放 Swing 元素。使用 JUNG 的图形布局算法来布局图形和 Piccolo2D PSwing 节点，我可以生成一个可用的、可以通过算法布局的、可缩放和可平移的 Swing 组件图形。

# python - 查找和替换特定块中的版本

> ID：10002937
> 
> 赞同：0
> 
> 时间：2012-04-03T23:29:09.527
> 
> 标签：python, sed

我的项目中有一些 pom 文件，结构如下

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
     <parent>
             <artifactId>xparent</artifactId>
             <groupId>y</groupId>
             <version>2.0.0</version>
     </parent>
     <modelVersion>4.0.0</modelVersion>
     <artifactId>someparent</artifactId>
     <version>x.x.x-needs_change</version>
     <packaging>pom</packaging>
     <name>some name</name>
     <description>some description</description>
     <url>myurl</url>

    <modules>
        <module>mymodules</module>
    </modules>

    <properties>
        <my.version>x.x.x-needs_change</my.version>
    </properties>

    <dependencies>
    <dependency>
    <groupId>hhhhh</groupId>
    <artifactId>hhhhh</artifactId>
    <version>x.x.x-should not change</version>
    </dependency>
   </dependencies>
</project> 
```

我正在使用 sed 将当前版本作为输入并将其更改为给定的新版本。但我不想在依赖块中更改版本。我该怎么做呢？

我不想走 Maven 版本插件路线。我试过了，它不符合我的要求。

我更喜欢 sed / python 脚本。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:58:53.883

你可以试试：

```
sed -e '/<dependencies>/,/<\/dependencies>/ !{ 
       s!<version>[0-9.]\+</version>!<version>'"$NEWVERSION"'</version>!
       }' MY_FILE 
```

说“找到和之间的`/<dependencies>/,/<\/dependencies>/`所有线”。`<dependencies>``</dependencies>`

后面的`!`内容是“在**除**那些行之外的所有地方执行以下操作（即对*除*between`<dependencies>`和之外的所有行执行此操作`</dependencies>`）”。

上面写着“`s!<version>[0-9.]\+</version>!<version>'"$NEWVERSION"'</version>!`替换`<version>...</version>`为`<version>$NEWVERSION</version>`，其中`$NEWVERSION`是一些包含新版本号的环境变量。

用引号 ( `'"$NEWVERSION"'`) 放屁是因为我想要 sed 命令的主要部分使用单引号（所以我不必担心感叹号和反斜杠），但我*确实*想要`$NEWVERSION`扩展。

修改以适合您的脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T07:23:20.020

要解析和修改 XML - 您确实应该使用可识别 xml 的解析器，例如[lxml](http://lxml.de/parsing.html)而不是文本工具，例如`sed`或`awk`

我假设您的 POM 文件确实是有效的 POM 文件，即它们也具有封闭`<project>`标签。

```
>>> t = """<project>
... <parent>
... <artifactID> </artifactID>
... <groupID> </groupID>
... <version>2.0.0</version>
... </parent>
... 
... <properties>
... <version>2.0.0</version>
... </properties>
... 
... <dependencies>
... <dependency>
... <version>2.0.0</version>
... </dependency>
... </dependencies></project>
... """
>>> from lxml import etree
>>> r = etree.fromstring(t)
>>> r.xpath("//parent/version")[0].text = "3.0"
>>> r.xpath("//properties/version")[0].text = "3.0"
>>> print(etree.tostring(r))
<project>
<parent>
<artifactID> </artifactID>
<groupID> </groupID>
<version>3.0</version>
</parent>

<properties>
<version>3.0</version>
</properties>

<dependencies>
<dependency>
<version>2.0.0</version>
</dependency>
</dependencies></project> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T07:09:46.143

```
nawk '{
      a=$0;
      getline;
      if($0!~/depend/ && a!~/version/)
      {gsub(/2.0.0/,"1.0.0",$0);print a"\n"$0}
      else print a"\n"$0 
      }' file3 
```

下面是测试：

```
pearl.302> cat file3
    <parent>
    <aritifactID> </artifactID>
    <groupID> </groupID>
    <version>2.0.0</version>
    </parent>

    <properties>
    <version>2.0.0</version>
    </properties>

    <dependencies>
    <dependency>
    <version>2.0.0</version>
    </dependency>
    </dependencies>
pearl.303> nawk '{a=$0;
                  getline;
                  if($0!~/depend/ && a!~/version/)
                  {gsub(/2.0.0/,"1.0.0",$0);print a"\n"$0}
                  else print a"\n"$0 }' file3
    <parent>
    <aritifactID> </artifactID>
    <groupID> </groupID>
    <version>1.0.0</version>
    </parent>

    <properties>
    <version>1.0.0</version>
    </properties>

    <dependencies>
    <dependency>
    <version>2.0.0</version>
    </dependency>
    </dependencies> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T13:12:29.920

```
awk -v change=1 -v newver=2.3.4 '
  change && /version/ {sub(/>[^<]+/, ">" newver)} 
  /<\/?dependencies>/ {change = !change} 
  {print}
' 
```

# facebook - 如何通过 API 确定 Facebook 应用程序的“代表我发帖”设置？

> ID：10002941
> 
> 赞同：0
> 
> 时间：2012-04-03T23:29:39.990
> 
> 标签：facebook, facebook-graph-api

由于最近[facebook 上的政策更改，](https://developers.facebook.com/bugs/365176053526578)我现在需要知道用户将我的应用程序设置为的“代表我的帖子”设置，但我似乎无法弄清楚如何查询此参数。这是我在“应用程序设置”下谈论的设置：

[https://img.skitch.com/20120404-mye28nbkn8f3w4kkfsbb6unb1p.jpg](https://img.skitch.com/20120404-mye28nbkn8f3w4kkfsbb6unb1p.jpg)

有没有办法得到这个设置？我已经检查了我/权限，但它不在那里。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:59:42.737

解决方案是通过 FQL 从 'privacy_setting' 获取它，如下所述：

[https://developers.facebook.com/docs/reference/fql/privacy_setting/](https://developers.facebook.com/docs/reference/fql/privacy_setting/)

# objective-c - 释放或自动释放对象

> ID：10002943
> 
> 赞同：0
> 
> 时间：2012-04-03T23:29:46.077
> 
> 标签：objective-c, memory-management

我在理解这段代码时遇到了问题：

```
- (void)subnetMaskByNumberOfSubnetBits:(id)sender{

    // ------- Sets the subnet mask when the user selects the number of bits

    NSNumberFormatter *stringToNumber = [[NSNumberFormatter alloc] init];//TURN A STRING INTO A NUMBER
    NSNumber *selectedAmountOfBits = [[NSNumber alloc] init];//CONTAINS THE SELECTED NUMBER OF BITS

        selectedAmountOfBits = [stringToNumber numberFromString:[sender objectValueOfSelectedItem]];

        [self changeSubnetMaskUsingNumberOfMaskBits:selectedAmountOfBits];

        //RELEASE
        [stringToNumber release];
        [selectedAmountOfBits release];
} 
```

由于我发布了`selectedAmountOfBits`. `alloc`我使用and初始化了对象`init`。为什么我不需要释放它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:35:23.753

问题是您将对象分配给 selectedAmountOfBits**两次**。

```
NSNumber *selectedAmountOfBits = [[NSNumber alloc] init]; 
```

分配一个您拥有的新 NSNumber 对象并将其分配给`selectedAmountOfBits`.

```
selectedAmountOfBits = [stringToNumber numberFromString:[sender objectValueOfSelectedItem]]; 
```

将一个**新**的自动释放对象分配给`selectedAmountOfBits`. 这意味着当你这样做时`[selectedAmountOfBits release]`，你实际上是在尝试释放一个你不拥有的对象。您还泄漏了您创建的原始 NSNumber，因为您丢失了对它的任何引用。

解决方案是删除 alloc/init 行，保留自动释放的 NSNumber，并摆脱释放它的行。最终代码应如下所示：

```
- (void)subnetMaskByNumberOfSubnetBits:(id)sender{

    // ------- Sets the subnet mask when the user selects the number of bits

    NSNumberFormatter *stringToNumber = [[NSNumberFormatter alloc] init];//TURN A STRING INTO A NUMBER
        NSNumber *selectedAmountOfBits = [stringToNumber numberFromString:[sender objectValueOfSelectedItem]];

        [self changeSubnetMaskUsingNumberOfMaskBits:selectedAmountOfBits];

        //RELEASE
        [stringToNumber release];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T23:37:30.960

原始代码中存在一些问题，我在下面添加了 //!i 注释：

```
- (void)subnetMaskByNumberOfSubnetBits:(id)sender{
    NSNumberFormatter *stringToNumber = [[NSNumberFormatter alloc] init];

    //!i: The [[NSNumber alloc] init] is unnecessary.  You are creating a pointer to a dummy number
    //    that is immediately overwritten in the next line
    NSNumber *selectedAmountOfBits = [[NSNumber alloc] init];

    //!i: At this point, you overwrite the pointer stored in selectedAmountOfBits to point to a new
    //    NSNumber, returned by numberFromString:, and in the autorelease pool
        selectedAmountOfBits = [stringToNumber numberFromString:[sender objectValueOfSelectedItem]];

    //!i: you are now leaking the number allocated via [[NSNumber alloc] init], as you no longer have
    //    a variable tracking the pointer to it

    [self changeSubnetMaskUsingNumberOfMaskBits:selectedAmountOfBits];

    [stringToNumber release];

    //!i: You are calling -release on the number that is in the autorelease pool, not on the
    //    original number you allocated via [[NSNumber alloc] init]
    [selectedAmountOfBits release];
} 
```

您可以按如下方式解决此问题：

```
- (void)subnetMaskByNumberOfSubnetBits:(id)sender{
    NSNumberFormatter *stringToNumber = [[NSNumberFormatter alloc] init];
    NSNumber *selectedAmountOfBits = [stringToNumber numberFromString:[sender objectValueOfSelectedItem]];

    [self changeSubnetMaskUsingNumberOfMaskBits:selectedAmountOfBits];

    //!i: You still need the -release here, as stringToNumber points to the
    //    NSNumberFormatter that you created using alloc/init
    [stringToNumber release];
} 
```

# ios - XCode 4.2 和 ipod 第二代

> ID：10002947
> 
> 赞同：0
> 
> 时间：2012-04-03T23:29:52.733
> 
> 标签：ios, xcode, xcode4, ios-4.2

我正在尝试在运行 iOS 4.2.1 的旧第二代 iPod Touch 上运行我的应用程序，以在非视网膜设备上对其进行测试。

看来我已正确设置了所有证书和配置文件，一切都适用于运行 iOS 5.0 的第 4 代 iPod Touch。

但是，它既不会在 iPod 屏幕上显示我的应用程序，也不会在 Xcode 中显示 iPod 已安装的应用程序列表。没有来自 Xcode 的任何明确警告。

你能告诉我是否应该降级到 Xcode 3 以便在旧设备上运行和测试我的应用程序，还是我做错了什么？我应该在哪里检查？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:48:53.223

@borrrden 是正确的，这样的设备很好（实际上，我自己在一个设备上进行了测试，实际上是使用 Xcode 4.3.x）。

我的第一个猜测（虽然看起来很奇怪你不会得到错误）是你只为 armv7 构建，它在某些时候成为 Xcode 中的默认值（不记得这是在 4.2 还是 4.3 中）。如果您针对该范围的硬件，您需要确保您的“有效架构”和相关的构建设置包括 armv6 和 armv7。

# c - C - 在递归方法中管理调用堆栈

> ID：10002948
> 
> 赞同：3
> 
> 时间：2012-04-03T23:30:00.933
> 
> 标签：c, recursion, stack-overflow, quicksort, callstack

我是新来的，有一个问题困扰着我。我是初学者，所以请不要嘲笑我。我想对大量元素进行递归快速排序，比如说 100000。我知道这会导致堆栈溢出。过去几天我一直在谷歌搜索，试图找到一种管理调用堆栈的方法。我可以真的找不到好的信息来源。我的想法是删除每个递归调用的返回地址，除了最后一个，它将返回到第一个函数调用。我不知道这是否可能，或者它是否是这个问题的另一种解决方案。

PS：我想保持快速排序递归。

对不起，如果我的问题看起来很傻，但我很高兴任何相关的答案。对不起，我的英语不好。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T23:34:22.847

**使用递归算法解决堆栈空间不足问题的标准方法是迭代地实现它。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T23:44:48.410

请注意，数组中的 100000 个项目什么都不是；这只会导致嵌套调用 17 个函数深：

```
$ echo "l(100000)/l(2)" | bc -l
16.60964047443681173951 
```

那就是`log(N)/log(2)`-`log(2)`将其转换为对数基数 2。

任何支持递归函数调用的平台几乎肯定能够处理 17 个嵌套调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T23:41:03.703

如果堆栈空间是一个问题，但内存通常不是问题，您可以通过使用自己的堆分配堆栈轻松地将递归实现转换为迭代实现。也就是说，不是进行递归函数调用，而是将您关心的参数推送到您自己的堆栈数据结构中。然后，您可以遍历您的堆栈并处理每组参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T08:41:35.210

听起来您正在尝试进行尾递归，已在此处讨论过；

[C中的尾递归](https://stackoverflow.com/questions/3935501/tail-recursion-in-c)

# scala - 这种类型的错过匹配如何？

> ID：10002953
> 
> 赞同：0
> 
> 时间：2012-04-03T23:30:39.290
> 
> 标签：scala

嗨，我是 Scala 的新手，正在尝试运行此代码：

```
 class Number(x : Int){
        var number = x

        def inc(): Int = {
            number => number + 1
        }
  } 
```

但我收到以下错误：solution.scala:12: error: missing parameter type number => number + 1 我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:33:49.227

本质上，您可以明确地说出您期望的类型：

```
def inc(): Int = {
            number: Int => number + 1
} 
```

**但是**这不会编译，因为你定义的是函数，所以：

```
def inc(): (Int) => Int = {
  // some function that takes Int, calls it `number` and increment   
  number: Int => number + 1
} 
```

会更接近，
**但**
它没有意义和注意，你定义的数字与`number`类内的变量没有任何共同点——这就是为什么 Scala 编译器不能为你推断类型。

我想你想写这样的东西：

```
 def inc(): Int = {number += 1; number;}
    // will take effect on number field 
```

或者

```
 def inc(num: Int): Int = num + 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:45:02.760

或者简单地说：

```
def inc = (x: Int) => x + 1 
```

由于 Int 返回类型是推断出来的，所以不需要指定它

至于处理问题中的可变性，inc(1)、inc(5) 等本身就是传递给类实例的数字的转换表示（即它们等同于“var number”，但不可变）。根据我们在这里看到的，没有真正需要可变性......

# haskell - 插入新绑定时是否复制了整个地图？

> ID：10002956
> 
> 赞同：18
> 
> 时间：2012-04-03T23:30:55.800
> 
> 标签：haskell

我想更好地了解例如Data.Map 的实习生。当我在 Map 中插入一个新绑定时，由于数据的不变性，我得到一个与旧数据结构相同的新数据结构加上新绑定。

我想了解这是如何实现的。编译器最终是否通过复制整个数据结构来实现这一点，例如数百万个绑定？通常可以说可变数据结构/数组（例如 Data.Judy）或命令式编程语言在这种情况下表现更好吗？在字典/键值存储方面，不可变数据有什么优势吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-03T23:41:28.367

`Map`建立在树数据结构之上。基本上，构造了一个新*值*`Map`，但它几乎完全由指向*旧*结构的指针填充。由于 Haskell 中的值永远不会改变，因此这是一种安全且非常重要的优化，称为*共享*。

 ***这意味着您可以拥有相同数据结构的许多相似版本，但只有*不同*的树的分支会被重新存储；其余的只是指向分支原始副本的指针。当然，如果你扔掉旧的*，*`Map`你改变的分支将被垃圾收集器回收。

 *共享是不可变数据结构性能的关键。您可能会发现[这篇 Wikipedia 文章](http://en.wikipedia.org/wiki/Persistent_data_structure)很有帮助；它有一些启发性的图表，显示了修改后的数据如何通过共享来表示。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-03T23:48:50.250

不[。文档`Data.Map.insert`](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Map.html#v%3ainsert)说明插入需要*O(log n)*时间。如果它必须复制整个结构，就不可能满足这个界限。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-04T00:16:30.627

Data.Map 不复制旧地图；它（懒惰地）分配 O(log N) 个新节点，这些节点指向（并因此共享）大部分旧地图。

因为“更新”地图不会破坏旧版本，所以这种数据结构在构建并发算法时为您提供了更大的自由。****

# c# - C# 中的惰性字典属性

> ID：10002957
> 
> 赞同：8
> 
> 时间：2012-04-03T23:31:05.067
> 
> 标签：c#, properties, lazy-initialization

我有一个属性是字典的类：

```
public class Entity 
{
    public Dictionary<string, string> Name { get; set; }
} 
```

我想切换此属性以使用延迟初始化。我尝试了以下方法：

```
public class Entity 
{
    private Lazy<Dictionary<string, string>> name = new Lazy<Dictionary<string, string>>(() => new Dictionary<string, string>(StringComparer.OrdinalIgnoreCase));
    public Dictionary<string, string> Name
    {
        get => name;
        set => name = value;
    }
} 
```

这当然是一个错误，因为 Name 和 name 有不同的类型。不过，对于我的一生，我无法弄清楚如何正确指定这一点。我真正想要的只是让 Name 在我访问它之前保持为空，然后在第一次读取或写入时创建它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-03T23:34:15.343

您可以使用初始化`Lazy`，但是您想要的非常简单，您可以简单地执行此操作

```
private Dictionary<string, string> _name;
public Dictionary<string, string> Name
{
    get
    {
        if (_name == null)
            _name = new Dictionary<string, string>();
        return _name;
    }
    set _name = value;
} 
```

编辑：请注意，这种方法会有一些线程安全问题。检查这对您来说是否是个问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-03T23:41:24.667

`name.Value`是只读的。试试这个：

```
public class Entity 
{
    private Lazy<Dictionary<string, string>> name = 
        new Lazy<Dictionary<string, string>>(
            () => new Dictionary<string, string>(StringComparer.OrdinalIgnoreCase));

    public Dictionary<string, string> Name => name.Value;
} 
```

# javascript - 无法在 JQuery Ajax 返回时刷新 reCaptcha

> ID：10002961
> 
> 赞同：5
> 
> 时间：2012-04-03T23:31:28.023
> 
> 标签：javascript, jquery, ajax, cors, recaptcha

我有一段时间试图让 Ajax 在 JQuery AJAX 回调上自动刷新。我有一个评论框，消息在验证 reCaptcha 后立即刷新，如果 reCaptcha 可以自动刷新以防有人想在之后立即添加另一条评论，那就太好了。这是我的返回函数：

```
 $.post(url, formData, function(data) {
        if (returnString.match(/^Error:/)) {
          $("#interactionResults").html(data).show().fadeOut(6000);
        }
        else if (postNumber == 0) {
          $('#newCommentDisplay').html(returnString).show();
          $.post("http://www.google.com/recaptcha/api", "Recaptcha:reload()");   
        } 
```

当我使用：

```
$.post("http://www.google.com/recaptcha/api", "Recaptcha:reload()"); 
```

我收到一个错误：

```
XMLHttpRequest cannot load http://www.google.com/recaptcha/api. Origin http://localhost:8888 is not allowed by Access-Control-Allow-Origin. 
```

很公平，所以我尝试用这条线来改变这条线：

```
$('#recaptcha_reload_btn').trigger('click'); 
```

仍然没有发生任何事情。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-24T17:06:07.047

在我的 html 中，我有：

```
<div class="g-recaptcha" id='recaptcha' data-sitekey="xxxxxxxxxx"></div> 
```

我用`grecaptcha.reset();`

例如： if (typeof $('#recaptcha') != "undefined") { grecaptcha.reset(); }

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-23T02:16:53.233

利用

```
jQuery("#recaptcha_reload").click(); 
```

“#recaptcha_reload”，图像本身，是触发器。#recaptcha_reload_btn 将不起作用，因为 a-tag 不是触发器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T20:35:51.980

```
Recaptcha.reload(); 
```

（Recaptcha 已加载）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-24T11:22:45.497

如果您使用的是新的 recaptcha 2.0，请使用以下代码：

```
ScriptManager.RegisterStartupScript(this, this.GetType(), "CaptchaReload", "$.getScript(\"https://www.google.com/recaptcha/api.js\", function () {});", true); 
```

对于简单的 javascript

```
<script>$.getScript(\"https://www.google.com/recaptcha/api.js\", function () {});</script> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-04T00:13:30.287

您尚未将点击处理程序绑定到您的元素。来自 jQuery 文档：

> .trigger( eventType [, extraParameters] )
> 
> 描述：执行所有附加到给定事件类型的匹配元素的处理程序和行为。

如果您在调用触发器之前没有将处理程序附加到您的元素，则没有要执行的单击处理程序。

**编辑：**

当您编写时，`$('#recaptcha_reload_btn').bind('click');`您实际上设置了一个点击处理程序，但它什么也不做。你必须告诉那个 clickhandler 要做什么：

```
$('#recaptcha_reload_btn').bind('click',function() {
    alert('you just clicked me');
}; 
```

如果您不设置回调处理程序，则事件只是注册但不会触发任何操作。将此与此问题的解决方案结合使用[Reload an iframe with jQuery](https://stackoverflow.com/questions/4249809/reload-an-iframe-with-jquery)，您应该让您的 recaptcha 做您想做的事情：

```
$('#recaptcha_reload_btn').bind('click',function() {
    var iframe = document.getElementById('#recaptcha'); //use your own selector here!
    iframe.src = iframe.src;
}; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-19T06:39:14.367

```
$( "#recaptcha_reload_btn" ).click(); 
```

# c# - 认证服务器

> ID：10002968
> 
> 赞同：1
> 
> 时间：2012-04-03T23:32:16.483
> 
> 标签：c#, asp.net, authentication

我目前正在为游戏构建身份验证服务器。基本上我的计划是客户端将连接到我们的服务器，他们将对客户端进行身份验证，然后向客户端发出票证。只要票证有效，客户端就可以加入服务器。除了身份验证之外，我还想在他们的个人资料上显示用户统计信息和其他内容。我以前没有对 ASP.NET 做过任何事情，但我认为这是正确的方法。我想知道是否有人知道我可以从哪里开始与 ASP.NET Web 应用程序进行通信。因为我以前没有使用过 ASP.NET，这一步是不是太大了？我应该从更小的东西开始吗？

**编辑：** 好的，所以我现在有一个简单的 WCF 服务，但我无法准确理解如何使用它。我如何实际使用我创建的服务在控制台应用程序和 ASP 网站之间交换数据？任何人都知道创建 WCF 服务然后实际展示如何将其实现到项目中的教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T01:22:43.763

另一种选择是使用其他人的身份验证服务器。即 Facebook、Messenger (Live.com)、Google 如果您同意使用他们的用户列表，则都提供 OAuth 身份验证。

附带的好处是您无需担心个人信息（即儿童帐户需要您想要的更多照顾:)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T23:57:36.470

什么样的游戏？它是在您的网站上玩的游戏还是客户端应用程序？如果它是一个网站，那么您真正需要的只是一个登录页面。否则，是的，WCF。

# php - while 循环和数组导致 echo 不起作用

> ID：10002969
> 
> 赞同：0
> 
> 时间：2012-04-03T23:32:18.023
> 
> 标签：php, javascript, html

我的代码有两个问题：

问题1：

对于 questionId，它没有显示正确的问题编号。假设我有 2 个问题。那么对于问题 1，questionId 应该是 '1' 但它会显示 '3' 另一个例子是，如果我有 7 个问题，那么对于问题 1，questionId 应该是 '1' 但它会显示 '8'。

如何解决这个问题？

问题2：

我的 $questionsql 只回显 1 个问题，即使我有多个问题要回显。我做错了什么，我可以显示所有问题，而不仅仅是 1 个问题。

例子：

如果我有两个问题是：

```
Question 1: 

SessionId   QuestionId   QuestionContent    OptionId

ABV         1            What is my name?   O6   

Question 2: 

SessionId   QuestionId   QuestionContent    OptionId

ABV         2            What is my age?   O9 
```

然后在 echo $questionsql 它应该显示：

INSERT INTO Question (SessionId, QuestionId, QuestionContent, OptionId) VALUES ('ABV' ,'1','What is my name?','O6'), ('ABV' ,'2','我的年龄？ ','O9')

但它没有显示上面的内容，而是显示下面的内容，这是不正确的，因为它显示了错误的问题编号，并且只显示了 1 个问题，这是最新添加的问题。

插入问题（SessionId，QuestionId，QuestionContent，OptionId）值（'ABV'，'3'，'我的年龄是多少？'，'O9'）

更新

下面是代码，如何解决这两个问题：

```
 foreach($_POST['questionText'] as $i => $question)
{

      $insertquestion = array();

$options[] = $_POST['gridValues'];

switch ($options[$i]){

    case "3": 
    $selected_option = "A-C";
    break;

    case "4": 
    $selected_option = "A-D";
    break;

    case "5": 
    $selected_option = "A-E";
    break;

    default:
    $selected_option = "";
    break;

}      

$optionquery = "SELECT OptionId FROM Option_Table WHERE (OptionType = '". mysql_real_escape_string($selected_option)."')";

 $optionrs = mysql_query($optionquery);
 $optionrecord = mysql_fetch_array($optionrs);
 $optionid = $optionrecord['OptionId']; 

    $insertquestion[] = "'". mysql_real_escape_string( $_SESSION['id'] ) . ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '') ."' ,'". mysql_real_escape_string( $_POST['num_questions'] ) ."','".  mysql_real_escape_string( $question ) ."','".  mysql_real_escape_string( $optionid ) ."'";

    $questionsql = "INSERT INTO Question (SessionId, QuestionId, QuestionContent, OptionId) 
    VALUES (" . implode('), (', $insertquestion) . ")";

    $i++;

    }

echo($questionsql); 
```

下面是表格代码。它的工作原理是用户在文本区域（'name='questionText'）中输入一个问题并输入一个选项（name='gridValues'），然后他们将它们两个附加到一个表格行中（表格形式为 which id ='qandatbl'）。这是问题1。然后他们对第二个问题再次做同样的事情，然后是第三个等等。请仔细看这个，很容易理解:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T00:57:04.987

Okay, basically there are two problems here. The first is that on every cycle of your primary loop, you're resetting `$i`. You need to make it the key way you find the value you want:

```
foreach($_POST['questionText'] as $i => $question)
{

   $insertquestion = array();

   $options[] = $_POST['gridValues'];

   switch ($options[$i]){

   ... 
```

I'm assuming here that your `gridValues` input and your `questionText` input correspond to one another, i.e. for the first gridValue you also want the first questionText.

The second thing which seems wrong is that you're assembling your SQL query as an array. What you need to do is make a separate query for each iteration of your loop:

```
 $insertquestion = "'". mysql_real_escape_string( $_SESSION['id'] ) . ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '') ."' ,'". mysql_real_escape_string( $_POST['num_questions'] ) ."','".  mysql_real_escape_string( $question ) ."','".  mysql_real_escape_string( $optionid ) ."'";

   $questionsql = "INSERT INTO Question (SessionId, QuestionId, QuestionContent, OptionId) 
  VALUES (" . implode('), (', $insertquestion) . ")";

   $i++;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T23:45:10.373

您在语句`$i=0;`之前和循环内部进行设置，因此您最终只创建了数组中的第一个元素。`switch``foreach`

不用担心！我一直这样做！

# php - 不是来自 Doctrine 的有效实体或映射的超类错误

> ID：10002972
> 
> 赞同：5
> 
> 时间：2012-04-03T23:33:27.070
> 
> 标签：php, doctrine, doctrine-orm

我正在尝试设置 Doctrine (2.2.1) 以与我的网站一起使用，我按照入门指南进行操作，但出现以下错误：

```
Fatal error: Uncaught exception 'Doctrine\ORM\Mapping\MappingException' with message 'Class   DocumentField is not a valid entity or mapped super class.' in C:\inetpub\sites\hd\Doctrine\ORM\Mapping\MappingException.php:147 Stack trace: #0 C:\inetpub\sites\hd\Doctrine\ORM\Mapping\Driver\AnnotationDriver.php(165) {...} 
```

`DocumentField`定义如下（在 root/Doctrine/entities/DocumentField.php 中：

```
<?php
/** @Entity **/
/** @Table(name="DocumentFields") */
class DocumentField
{
    /** @Id @GeneratedValue @Column(type="integer") **/
    protected $id;
    /** @var @Column(type="string") **/
    protected $fieldName;
    /** @var @Column(type="integer") **/
    protected $fieldType;
    /** @var @Column(type="integer") **/
    protected $required;

    public function getId() {
        return $this->id;
    }

    public function getName() {
        return $this->fieldName;
    }

    public function setName($name) {
        $this->fieldName = $name;
    }

    public function getType() {
        return $this->fieldType;
    }

    public function setType($type) {
        $this->fieldType = $type;
    }

    public function getRequired() {
        return $this->required;
    }

    public function setRequired($value) {
        $this->required = $value;
    }
} 
```

?>

页面中包含这样的教义：

```
/* Load Doctorine ORM */
require "$root/Doctrine/ORM/Tools/Setup.php";
$lib = "$root/";
Doctrine\ORM\Tools\Setup::registerAutoloadDirectory($lib);
require "doctrine-configure.php"; 
```

`doctrine-configure.php`文件 ：

```
//if ($applicationMode == "development") {
    $cache = new \Doctrine\Common\Cache\ArrayCache;
//} else {
//    $cache = new \Doctrine\Common\Cache\ApcCache;
//}

$config = new Configuration;
$config->setMetadataCacheImpl($cache);
$driverImpl = $config->newDefaultAnnotationDriver($GLOBALS["BASE_PATH"].'\\Doctrine\\entities');
$config->setMetadataDriverImpl($driverImpl);
$config->setQueryCacheImpl($cache);
$config->setProxyDir($GLOBALS["BASE_PATH"].'\\Doctrine\\proxies');
$config->setProxyNamespace('Helpdesk\Proxies');

//if ($applicationMode == "development") {
    $config->setAutoGenerateProxyClasses(true);
//} else {
//    $config->setAutoGenerateProxyClasses(false);
//}

$connectionOptions = array(
    'driver' => 'pdo_sqlsrv',
    'user' => '{user}',
    'password' => '{pass}',
    'host' => 'sql1',
    'dbname' => 'HD'
);

$entityManager = EntityManager::create($connectionOptions, $config); 
```

?>

最后是导致崩溃的代码：

```
require "$root/Doctrine/entities/DocumentField.php";
$field = new DocumentField();
$field->setName("Hello World");
$field->setType(1);
$field->setRequired(1);
$entityManager->persist($field);
$entityManager->flush(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T13:58:42.880

每个 Doctrine 注释实际上是一个类的实例的表示，因此如果您不在此类命名空间内，则必须为每个注释指定一个命名空间（\Doctrine\ORM\Mapping），就像您正在实例化其中一个类一样自己。

试试这种方式：

```
<?php

use \Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="DocumentFields")
 */
class DocumentField
{
    /**
     * @ORM\Id
     * @ORM\GeneratedValue
     * @ORM\Column(type="integer")
     */
    protected $id;

    /**
     * @ORM\Column(type="string")
     */
    protected $fieldName;

    /**
     * @ORM\Column(type="integer")
     */
    protected $fieldType;

    /**
     * @ORM\Column(type="integer")
     */
    protected $required;

    // ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T14:18:05.417

```
<?php
// bootstrap or config.php
require __DIR__ . '/../vendor/autoload.php';

use Doctrine\ORM\Tools\Setup;
use Doctrine\ORM\EntityManager;
use Doctrine\ORM\Mapping\Driver\AnnotationDriver;
use Doctrine\Common\Annotations\AnnotationReader;
use Doctrine\Common\Annotations\AnnotationRegistry;

$paths = array('PATH_WITH_ENTITIES');
$isDevMode = false;

// the connection configuration
$dbParams = array(
    'driver'   => 'pdo_mysql',
    'user'     => 'USER',
    'password' => 'PASS',
    'host'     => 'HOST',
    'dbname'   => 'DB',
);

$classLoader = new Doctrine\Common\ClassLoader('Application\Entity',__DIR__.'/../admin/module/Application/src/');
$classLoader->register();

$config = Setup::createAnnotationMetadataConfiguration($paths, $isDevMode);

$driver = new AnnotationDriver(new AnnotationReader(), $paths);

// registering noop annotation autoloader - allow all annotations by default
AnnotationRegistry::registerLoader('class_exists');
$config->setMetadataDriverImpl($driver);

$em = EntityManager::create($dbParams, $config);
?> 
```

# html - 需要自动创建 html 家谱

> ID：10002976
> 
> 赞同：0
> 
> 时间：2012-04-03T23:33:47.513
> 
> 标签：html

我需要自动化（这是一个词吗？）在 html 中创建家谱。我对这门语言了解不多，所以我需要一个简单的代码（或它的指南）来允许我创建一个简单的家谱。只是基本的东西，比如一个人的姓名和出生日期的框和一个指向其亲属（孩子、父母和兄弟）的箭头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T00:06:20.630

正如`automate`这里使用的术语。我想您正在尝试创建 HTML 元素，而实际上没有在 HTML 页面中使用它。因此，这是一种您可以随后创建 HTML 和树结构的方法。

```
var div = $("<div />")
div.append("<div id='another' />")
div.append("<div id='next' />")
div.appendTo($('body')); 
```

这将创建一个 div，将另外两个 div 放入其中，并附加在 body 标记中。

# java - Java-每当在 JList 中选择文件时如何增加变量？

> ID：10002979
> 
> 赞同：1
> 
> 时间：2012-04-03T23:34:05.733
> 
> 标签：java, selection, increment, jlist

我遇到的问题是我在 JList 中有一个包含 10 个文件的列表。在 JButton 上，我有“附加文件 0”。我想要实现的是，当用户单击 JList 中的文件时，变量 fileCount（代表“0”）将增加。这是代码：

```
@Override
public void mouseClicked(MouseEvent arg0) {
        int idx = list_fileListing.getSelectedIndex();
        String eFiles[] = ig.getListOfFiles();

       if(idx == list_fileListing.getSelectedIndex()){
    fileCount++;
    }
} 
```

基本上，如果选择了一个文件，则增加 fileCount。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:40:15.340

该类`JButton`具有`setText()`与许多其他 Swing 组件类类似的方法。您可以使用此方法覆盖当前位于`JButton`.

前任：

```
if(idx == list_fileListing.getSelectedIndex())
{
    fileCount++;
    yourButtonName.setText("attached file(s) " + fileCount);
} 
```

希望这可以帮助。

# macos - g++ 不适用于 Lion

> ID：10002981
> 
> 赞同：6
> 
> 时间：2012-04-03T23:34:17.403
> 
> 标签：macos, compilation, g++, osx-lion

我已经搜索并收到了相同的答案，但我相信我的答案不同我在我的 Mac 上安装了 Xcode（4.3.2），当我尝试编译我的 .cpp 文件时，它显示“找不到命令”有什么建议吗？

我如何尝试编译；
`g++ -o program code.cpp`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-03T23:41:46.893

您需要通过 XCode 的“下载”首选项选项卡安装“命令行工具”包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T00:10:35.043

打开 Xcode >> 首选项... >> 下载和下载命令行工具

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-03T23:39:30.117

我用

```
make code 
```

它会找到一个编译器，编译 code.cpp 并将输出留在代码中。它告诉我编译器的名称......（它是 g++）。

如果您键入“which g++”，您会找到旧别名吗？

你的路径中有 /usr/bin 吗？

如果你这样做了，并且 /usr/bin/g++ 没有找到，请检查你是否不仅下载了 Xcode，还下载了命令行实用程序，这些实用程序现在在开发人员页面上单独下载。

# javascript - 制作占用空间很小的“简单”折线图的最佳方法是什么？jQuery？帆布？

> ID：10002984
> 
> 赞同：1
> 
> 时间：2012-04-03T23:34:23.953
> 
> 标签：javascript, jquery, css, canvas, linegraph

我正在尝试创建如下图所示的折线图。 ![线形图](../Images/de64a4104374252233abe55dbe9c495e.png)

它需要有一个非常轻的重量（以 kb 为单位），并且需要有我可以悬停的点（关于该点的工具提示，如图像中所示）。我不需要饼图或类似的东西，只需要像上面这样的折线图。

我只是不确定如何最好地去做，我不知道画布，我假设尝试用画布做我需要的事情可能会非常复杂。我非常了解 jQuery。

我想知道：是否有一个非常轻量级的框架/插件可以让我只做图像中的基本要素？如果没有，你会如何建议使用 jQuery 来解决这个问题？

我所需要的只是绘制的线条，以及可以触发悬停的点，我可以处理工具提示以及所有这些，我只是想弄清楚如何绘制与网格匹配的所有线条，并将小圆圈元素放在正确的位置。

非常感谢。ps：对我来说轻量级不超过几kb，因为我希望它们是交互式的（不仅仅是静态图像），但我不会有那么多我需要一个巨大的jquery插件，只是小东西。

另外：我正在努力使它具有响应性，并缩小以适合手机屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T00:46:46.283

Google Chart API 非常可靠且易于使用。这是一个简单的折线图示例 [http://code.google.com/apis/ajax/playground/?type=visualization#line_chart](http://code.google.com/apis/ajax/playground/?type=visualization#line_chart)

您还可以与您创建的图表进行交互：

[https://google-developers.appspot.com/chart/interactive/docs/basic_interactivity](https://google-developers.appspot.com/chart/interactive/docs/basic_interactivity)

[https://google-developers.appspot.com/chart/interactive/docs/events](https://google-developers.appspot.com/chart/interactive/docs/events)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T23:45:43.503

SVG 听起来就像您正在寻找的一样。您可以使用诸如 JQuery SVG 或 Raphael（基于 Prototype.js）之类的库来简化它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T00:43:27.247

查看[谷歌图表](https://developers.google.com/chart/)。它看起来像完美的东西。它不使用闪光灯，所以它比一些小，并且有工具提示。作为奖励，您可以使用网络上的实时数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T00:09:51.020

如果您不打算对图表进行任何操作。使用名为[pChart的 PHP 库](http://pchart.sourceforge.net/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-03T23:41:43.153

对于我通常会使用的那种东西，我不知道你能做你想做的事情[有多轻巧](http://code.google.com/p/flot/)。

# iphone - 检查视图是否在运行时加载

> ID：10002988
> 
> 赞同：17
> 
> 时间：2012-04-03T23:35:02.670
> 
> 标签：iphone, objective-c, ios, view

有什么方法可以让我在不检查视图控制器的源代码的情况下看到加载的视图（例如，viewDidLoad、viewWillAppear 等）

或者如何在运行时/动态检查是否加载了任何视图以获取子视图。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-04T00:03:39.250

如果你有一个视图控制器的实例，你可以问它：

```
viewController.isViewLoaded 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-03T23:44:43.353

我不完全清楚您所说的“加载”是什么意思。根据您对“已加载”的定义，您可以：

*   检查视图是否是`nil`（加载的最广泛定义，尽管这将取决于在释放视图时是否有人取消视图，以免您得到 EXC_BAD_ACCESS）。

*   检查`[view superview]`视图是否有超级视图。

*   检查`[view window]`视图是否是窗口的一部分（“在屏幕上”的先决条件）

*   假设有一个对应的 UIViewController，查询控制器的`isViewLoaded`属性，看它是否已经将视图加载到内存中。这特别有助于查看生命周期问题。

可能还有其他对“已加载”的解释以及您可以检查的其他内容，但这些是我最先想到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T23:52:08.623

不太确定您的用例，但如果您只想查询视图层次结构，这可能会有所帮助。

```
- (UIView *)viewWithTag:(NSInteger)tag 
```

1.  标记您感兴趣的所有视图，例如。标记某些感兴趣的观点；“ImportantView1”、“ImportantView2”、...

2.  您需要一个（父）视图来进行上述 API 调用

3.  该调用*将*查询（父）视图和*所有*子视图。

4.  按您的自定义标签名称过滤视图。（如果标签以“ImportantView”开头）

# ios - 安装 XCode 4.2、4.3 和 3.2

> ID：10002991
> 
> 赞同：0
> 
> 时间：2012-04-03T23:35:13.513
> 
> 标签：ios, xcode4, compatibility, xcode3.2

如何同时安装 XCode 4.2、4.3 和 3.2？似乎我需要他们都为不同的 ios 版本开发。

我已经安装了 4.2，但我需要它来在新 iPad 上测试我的应用程序，并使用 Xcode 4.3，我想在旧的 iPod Touch 第二代上测试我的应用程序，所以我可能需要 XCode 3.2 来这样做......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T23:45:53.210

我没有看到 30 秒前的问题，所以我会在这里回答这个问题。

只需安装一个版本的 Xcode（最新版本，4.3），然后将项目设置中的“最低部署版本”字段设置为 iOS 3.0 或 4.0 或 5.0 或您想要支持的任何最低 iOS 版本（不要做任何API 比您正式支持的版本更新……例如，iOS 3 和 4 上没有“UIStoryboard”的东西）。