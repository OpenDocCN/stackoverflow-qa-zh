# StackOverflow 问答 10891000-10891999

# javascript - 您如何将 googol 存储在数据库中（以及其他非常大的数字）？

> ID：10891004
> 
> 赞同：0
> 
> 时间：2012-06-05T02:57:45.863
> 
> 标签：javascript, database, numbers

如何有效地存储从 say`10^-100`到的非常大和非常小的数字`10^100`，以便您可以使用它们在 JavaScript 等编程语言中计算值。

JavaScript存储`10^100`为`1e+101`，有没有办法在数据库中做到这一点？这些数字通常不会那么大，但我想用诸如此类的数据进行计算`10^-34 * 2^16`，所以数据库应该（我认为）将这些存储为数字......

这是如何运作的？您如何存储这种规模的数字，以便您可以使用它们进行计算？

通过“数据库”，我一般都在想。我目前正在玩弄 MongoDB 和 Neo4j。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T03:05:50.337

数据库本身不支持原生数字格式的任意大小的数字。您对数字类型的一般上限通常是 8 个字节，这与 googol 相差无几。

您必须将数字存储为字符串（效率最低，最容易使用，可以根据需要尽可能精确），作为任意长度的字节数组（更高效，更难使用，仍然是任意精度），或以科学记数法（最有效、更难使用且精度有限）。

不幸的是，前两个确实消除了进行任何服务器端计算的可能性，因为不存在可以支持有效值范围的本机数字类型。所有计算都必须使用合适的数字类型在客户端完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T03:03:59.540

如果我是你，我会将数值与指数分开。我个人没有使用 MongoDB 或 Neo4j 的经验，但是在 MySQL 中（我确信它们有类似的术语）我会创建一个带有 VARCHAR（文本）列的表，该列具有您在程序中想要的任何精度（或有多少个唯一数字）和另一个长度为 3 的 VARCHAR 列（对于最大指数 999）。你可以修改你认为合适的值，但这就是我能想到的。如果您想要更灵活的大小值，我会使用 PHP 而不是使用数据库将数字存储在服​​务器的文件系统上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T03:07:17.930

你可以使用 double 类型。

[MySQL DOUBLE[(M,D)]](http://dev.mysql.com/doc/refman/5.6/en/numeric-type-overview.html)

> 一个正常大小（双精度）的浮点数。允许的值为 -1.7976931348623157E+308 到 -2.2250738585072014E-308、0 和 2.2250738585072014E-308 到 1.7976931348623157E+308。这些是基于 IEEE 标准的理论限制。根据您的硬件或操作系统，实际范围可能会稍小一些。

# xslt - 通过 xsl 根据子元素的部分值修改元素

> ID：10891011
> 
> 赞同：1
> 
> 时间：2012-06-05T03:00:09.790
> 
> 标签：xslt, xslt-1.0

我有以下 XML 1.0 代码

```
<oldEle userlabel="label1">
    <ele1>%02d.jpeg</ele1>
</oldEle>

<oldEle userlabel="label2">
    <ele1>%02d.tiff</ele1>
</oldEle> 
```

我想使用 xsl v1.0 将每个 oldEle 的 oldEle 更改为 jpeg 和 tiff。本质上我希望 xsl 这样做：

```
<JPEG userlabel="label1">
    <ele1>%02d.jpeg</ele1>
</JPEG>

<TIFF userlabel="label2">
    <ele1>%02d.tiff</ele1>
</TIFF> 
```

我尝试了以下方法，但它不起作用：

```
<xsl:template match="/oldEle">
    <xsl:for-each select="/oldEle">
    <xsl:if test="contains(/oldEle/ele1,'jpeg')">
        <JPEG>
          <xsl:apply-templates select="@*|node()"/>
        </JPEG>      
    </xsl:if>      
    </xsl:for-each>
</xsl:template> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:30:19.383

如果您可以保证**ele1**元素将只包含一个句号，您可以使用 xpath 函数**substring-after**提取文件扩展名，然后使用**xsl:element**函数创建一个具有该名称的新元素

```
<xsl:element name="{substring-after(ele1, '.')}"> 
```

但是需要额外的复杂性，因为您也需要将其转换为大写，而在 XSLT1.0 中，这将通过繁琐的**translate**函数来实现

```
<xsl:element 
   name="{translate(
     substring-after(ele1, '.'), 
     'abcdefghijklmnopqrstuvwxyz', 
     'ABCDEFGHIJKLMNOPQRSTUVWXYZ')}"> 
```

另一件需要注意的事情是，您正在匹配`/oldEle`这意味着**oldEle**是您的 XML 的根元素。由于您在格式良好的 XML 中只能有一个根元素，因此这可能不是您想要的。

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="oldEle[contains(ele1, '.')]">
      <xsl:element name="{translate(substring-after(ele1, '.'), 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ')}">
         <xsl:apply-templates select="@*|node()"/>
      </xsl:element>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于以下 XML 时

```
<root>
   <oldEle userlabel="label1">
      <ele1>%02d.jpeg</ele1>
   </oldEle>
   <oldEle userlabel="label2">
      <ele1>%02d.tiff</ele1>
   </oldEle>
</root> 
```

以下是输出

```
<root>
   <JPEG userlabel="label1">
      <ele1>%02d.jpeg</ele1>
   </JPEG>
   <TIFF userlabel="label2">
      <ele1>%02d.tiff</ele1>
   </TIFF>
</root> 
```

**但是，如果ele1**包含多个句号，XSLT 将会失败。例如，考虑以下 XML

```
<root>
   <oldEle userlabel="label1">
      <ele1>test.image1.jpeg</ele1>
   </oldEle>
   <oldEle userlabel="label2">
      <ele1>test.image2.tiff</ele1>
   </oldEle>
</root> 
```

在这种情况下，在 XSLT1.0 中，您可能需要一个递归命名模板来提取文件扩展名。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="oldEle[contains(ele1, '.')]">
      <xsl:variable name="extension">
         <xsl:call-template name="getExtension">
            <xsl:with-param name="text" select="ele1"/>
         </xsl:call-template>
      </xsl:variable>

      <xsl:element name="{translate($extension, 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ')}">
         <xsl:apply-templates select="@*|node()"/>
      </xsl:element>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template name="getExtension">
      <xsl:param name="text"/>
      <xsl:param name="delimiter" select="'.'"/>
      <xsl:choose>
         <xsl:when test="contains($text, $delimiter)">
            <xsl:call-template name="getExtension">
               <xsl:with-param name="text" select="substring-after($text, $delimiter)"/>
               <xsl:with-param name="delimiter" select="$delimiter"/>
            </xsl:call-template>
         </xsl:when>
         <xsl:otherwise>
            <xsl:value-of select="$text"/>
         </xsl:otherwise>
      </xsl:choose>
   </xsl:template>
</xsl:stylesheet> 
```

这也会产生相同的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:20:34.720

**这是一个*非递归*且更高效的 XSLT 1.0 解决方案，它可以成功地与任意数量的图像格式扩展一起工作，假设它们是静态已知的**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <my:suffixes>
  <s>jpeg</s><s>JPEG</s>
  <s>tiff</s><s>TIFF</s>
  <s>giv</s><s>GIV</s>
  <s>png</s><s>PNG</s>
 </my:suffixes>

 <xsl:variable name="vSufs" select="document('')/*/my:suffixes/s"/>

 <xsl:template match="node()|@*" name="identity">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="*">
   <xsl:variable name="vSufFound" select=
    "$vSufs[position() mod 2 = 1]
         [substring(translate(current()/ele1, ., ''),
                    string-length(translate(current()/ele1, ., ''))
                    )
         =
          '.'
         ]"/>
   <xsl:choose>
     <xsl:when test="not($vSufFound)">
      <xsl:call-template name="identity"/>
     </xsl:when>
     <xsl:otherwise>
       <xsl:element name="{$vSufFound/following-sibling::s[1]}">
         <xsl:apply-templates select="node()|@*"/>
       </xsl:element>
     </xsl:otherwise>
   </xsl:choose>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<t>
    <oldEle userlabel="label1">
        <ele1>%02d.jpeg</ele1>
    </oldEle>
    <oldEle userlabel="label2">
        <ele1>%02d.tiff</ele1>
    </oldEle>
</t> 
```

**产生了想要的正确结果：**

```
<t>
   <JPEG userlabel="label1">
      <ele1>%02d.jpeg</ele1>
   </JPEG>
   <TIFF userlabel="label2">
      <ele1>%02d.tiff</ele1>
   </TIFF>
</t> 
```

**当应用于以下 XML 文档时（其中的字符串值中存在多个点字符`ele`**：

```
<root>
    <oldEle userlabel="label1">
        <ele1>test.image1.jpeg</ele1>
    </oldEle>
    <oldEle userlabel="label2">
        <ele1>test.image2.tiff</ele1>
    </oldEle>
</root> 
```

**再次产生正确的结果：**

```
<root>
   <JPEG userlabel="label1">
      <ele1>test.image1.jpeg</ele1>
   </JPEG>
   <TIFF userlabel="label2">
      <ele1>test.image2.tiff</ele1>
   </TIFF>
</root> 
```

**说明**：

在此转换中，我们使用以下 XPath 1.0 表达式来实现标准 XPath 2.0`ends-with($t, $suf)`函数：

```
$suf = substring($t, string-length($t) - string-length($suf) +1) 
```

# c - makes pointer from integer without a cast with strcpy

> ID：10891012
> 
> 赞同：2
> 
> 时间：2012-06-05T03:00:11.460
> 
> 标签：c

I can't figure out what I'm doing wrong. I am learning C so sorry if this is obviously wrong, but I'm trying to use [uthash](http://uthash.sourceforge.net/) to make a hash map of stocks and their prices. But when I add stocks to my hash map, I get the above error.

What I did was take the example from their site and ran it to make sure it worked, once it worked as expected I changed the values to fit my problem. In the original code, the variable `id` in the struct was an integer but I changed it to a char(instead of number, I wanted to use the stock ticker as the key), then I started to the following errors:

```
../src/stackCsamples.c:87: warning: passing argument 1 of '__builtin_object_size' makes pointer from integer without a cast
../src/stackCsamples.c:87: warning: passing argument 1 of '__builtin_object_size' makes pointer from integer without a cast
../src/stackCsamples.c:87: warning: passing argument 1 of '__builtin___strcpy_chk' makes pointer from integer without a cast
../src/stackCsamples.c:87: warning: passing argument 1 of '__inline_strcpy_chk' makes pointer from integer without a cast
../src/stackCsamples.c:89: warning: passing argument 1 of 'strlen' makes pointer from integer without a cast
../src/stackCsamples.c:89: warning: passing argument 1 of 'strlen' makes pointer from integer without a cast
../src/stackCsamples.c:89: warning: passing argument 1 of 'strlen' makes pointer from integer without a cast 
```

The problem seems to be with two lines here(87) which is `strcpy(s->id, user_id);` and (89) which is: `HASH_ADD_STR( users, id, s );`

How am I using both of these wrong? I looked strcpy up and it looks like it takes 3 items, but when I add the size I still get errors.

Here's a snippet of the parts I think are relevant:

```
#include <stdio.h>   /* gets */
#include <stdlib.h>  /* atoi, malloc */
#include <string.h>  /* strcpy */
#include "uthash.h"

struct my_struct {
    char id;                    /* key */
    float price;
    UT_hash_handle hh;         /* makes this structure hashable */
};

struct my_struct *users = NULL;

void new_stock(char *user_id, float price) {
    struct my_struct *s;

    s = (struct my_struct*)malloc(sizeof(struct my_struct));
    strcpy(s->id, user_id);
    s->price = price;
    HASH_ADD_STR( users, id, s );  /* id: name of key field */
}

int main() {
    printf("starting..");
    new_stock("IBM", 10.2);
    new_stock("goog", 2.2);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T03:04:04.347

With this line:

```
strcpy(s->id, user_id); 
```

You are trying to copy a string onto a char. Note that both arguments to strcpy are to be **pointers** to chars: `char *`.

Furthermore, note that you'll also need to make some space in memory for s->id, as a `char[]` or a `char *`. Hint: you've made space for the struct, but that only includes enough space for a **single character** for `id`.

If you want to use C then you should get a copy of [K&R](http://books.google.com/books/about/C_Programming_Language_2E.html?id=kWrfMAAACAAJ), but failing that, you might spend some time reviewing [this](http://en.wikipedia.org/wiki/C_string_handling).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T03:12:19.767

You need to provide enough space in the structure for the user ID array, or dynamically allocate enough space. For instance, you might do:

```
enum { MAX_ID_LEN = 32 };
struct my_struct
{
    char id[MAX_ID_LEN];                    /* key */
    float price;
    UT_hash_handle hh;         /* makes this structure hashable */
}; 
```

Then you could use:

```
strcpy(s->id, user_id); 
```

as long as you've checked that `user_id` is not longer than 31 characters plus null before hand. If you've not done that check, you should. If you refuse to do that check and don't mind truncating overlong user ID strings, then you could use:

```
strncpy(s->id, user_id, sizeof(s->id) - 1);
s->id[sizeof(s->id)-1] = '\0'; 
```

This ensures null termination; just using `strncpy()` alone does not. Beware, if the string (`s->id`) was much longer, you could find your code wasting time zeroing out the tail end of the string.

* * *

The residual warnings about `strlen()` are hidden by the `HASH_ADD_STR()` macro, but likely come from the same problem as the `strcpy()` warnings did — the `s->id` field was not a character pointer or a character array. The amended structure will likely quash those warnings too. For us to be sure, you'd have to show the definition of `HASH_ADD_STR()` and any macros it invokes.

# html - html href 到 https。但它不起作用

> ID：10891018
> 
> 赞同：1
> 
> 时间：2012-06-05T03:00:46.810
> 
> 标签：html, https, href

我是链接到 https 网站的用户。像这样：

```
<a href="https://site/#create/new/?"> 
```

但是当我点击链接时，它无法指向正确的页面，而是直接指向`https://site/#create%2fnew%2f%3f` 如何解决这个问题？有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:12:58.213

Adaman 的意思是 #create... 是 page 的片段标识符`/site/index.[html|htm|php]`。你确定网址正确吗？它应该类似于以下内容：`https://example.com/create/new/`？

# iphone - 导航项未出现在视图控制器上

> ID：10891019
> 
> 赞同：14
> 
> 时间：2012-06-05T03:01:46.623
> 
> 标签：iphone, ios, uiviewcontroller, uinavigationcontroller, uinavigationitem

我很抱歉我是 iPhone 编程的新手。

我创建了一个 Master-Detail Iphone 应用程序（因此导航控制器随项目一起提供）。我继续使用我通过 masterviewcontroller 上的 UIBarButtonItem 创建的新视图控制器。然而，与detailviewcontroller（项目附带）不同，我似乎无法让navigationitem（或navigationbar？）显示在视图上，即使它出现在我的故事板的场景列表中。

这是一些代码和屏幕截图：

在我的 masterviewcontroller.m viewdidload() 函数中

```
UIBarButtonItem *settingsButton = [[UIBarButtonItem alloc] initWithTitle:@"Settings" style:normal target:self action:@selector(goToSettings:)];
self.navigationItem.leftBarButtonItem = settingsButton; 
```

在我的 masterviewcontroller.m

```
- (IBAction)goToSettings:(id)sender{    
    [self performSegueWithIdentifier:@"SettingsSegue" sender:self];
} 
```

我尝试在我创建的新 viewcontroller.m 类的 viewDidLoad 函数中为导航项添加标题（在此[链接](https://stackoverflow.com/questions/3420862/back-navigation-button-not-showing-up-in-pushed-view-controller)中提到但它不起作用）

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    self.navigationItem.title = @"Settings";
    self.navigationItem.leftBarButtonItem = self.editButtonItem;
} 
```

但它仍然出现在我的故事板中（它出现在场景下的列表中，但不在视图的显示中）

所以我的问题是为什么它现在出现了，我该如何得到它？我想要一个后退按钮，例如主-详细信息项目附带的详细视图控制器。

编辑#1

我添加了一个检查导航控制器是否为 nil 并且它不是 nil（从未输入 if 语句）我还尝试将导航项更改为 back 并删除，但没有一个有效。

```
if(self.navigationItem == nil)
{
    [ self.navigationItem init];
}
self.navigationItem.title = @"Settings";
self.navigationItem.leftBarButtonItem = self.navigationItem.backBarButtonItem; 
```

现在我有足够的声誉来显示图像，我可以显示导航项显示在列表中但未显示在视图中

![在此处输入图像描述](../Images/019501970f3c6ea7c742edd4c7bee440.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-05T23:47:22.163

由于我的 segue 的“风格”，导航项目没有出现。

将场景从主视图控制器移动到设置视图控制器的 segue 设置为“模态”。它必须设置为“推”。这是从实用程序窗格上的情节提要完成的

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-23T18:29:15.710

你必须通过这样做来改变你的 Segue 风格：

*   在情节提要中选择 Segue；
*   转到属性检查器（在右侧窗格选项卡上）；
*   将 Style 属性更改为 Push。

它将使屏幕从右向左滚动，并且导航栏将出现滑动。使用 Modal，屏幕从底部到顶部，不会让导航栏出现。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-27T18:31:56.680

我的问题是导航控制器不是“初始视图控制器”

所以我不得不这样做

![在此处输入图像描述](../Images/b8a08663fac966280bb31bf0097559f0.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T03:29:22.543

您已验证 viewDidLoad 方法中列出的导航控制器不为零？

假设您确实有一个`self.navigationItem`非零的 a ，那么您似乎错误地将您的设置`self.navigationItem.leftBarButtonItem`为 a `editButtonItem`，而是尝试将其全部删除！

如果删除它不能解决问题，请尝试：

```
self.navigationItem.leftBarButtonItem = self.navigationItem.backBarButtonItem; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-15T18:07:32.757

请检查您的视图控制器是否是导航控制器的根视图控制器。您不能直接将视图控制器呈现为模态视图控制器。您必须将您的视图控制器作为导航控制器的根视图控制器，然后将您的导航控制器呈现为模态视图控制器。

```
// Create the root view controller for the navigation controller
// The new view controller configures a Cancel and Done button for the
// navigation bar.
YourViewController *addController = [[YourViewController alloc]
                   init];

// Configure the YourViewController.

// Create the navigation controller and present it.
UINavigationController *navigationController = [[UINavigationController alloc]
                         initWithRootViewController:addController];
[self presentViewController:navigationController animated:YES completion: nil]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-20T08:17:38.860

你需要有一个**导航控制器**和一个视图控制器。

“导航控制器管理界面顶部的导航栏和界面底部的可选工具栏。导航栏始终存在并由导航控制器本身管理，它使用由提供的内容更新导航栏它的子视图控制器。当*isToolbarHidden*属性为 false 时，导航控制器类似地使用最顶层视图控制器提供的内容更新工具栏。 [https://developer.apple.com/documentation/uikit/uinavigationcontroller](https://developer.apple.com/documentation/uikit/uinavigationcontroller)

[![在此处输入图像描述](../Images/ea5f5b58018dd57cf51e3a20a24ba44a.png)](https://i.stack.imgur.com/p75MB.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-11T01:26:03.980

导航项也出现在视图控制器场景中，您可以在那里查找并编辑它

# php - 确定具有最高和最低值的变量

> ID：10891027
> 
> 赞同：-4
> 
> 时间：2012-06-05T03:04:03.333
> 
> 标签：php

例如，如果我有：

```
$person1 = "10";
$person2 = "-";
$person3 = "5"; 
```

我需要确定数字最高的人并在他们的字符串前面加上“W”，还需要确定数字最低的人并在他们的字符串前面加上“L”

我正在尝试输出：

```
$person1 = "W10";
$person2 = "-";
$person3 = "L5"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T03:42:18.383

```
$persons = array(10, '-', '12', 34 ) ; //array of persons, you define this
$max_index = array_search($max = max($persons), $persons);
$min_index = array_search($min = min($persons), $persons);
$persons[$max_index] = 'W' . $persons[$max_index];
$persons[$min_index] = 'L' . $persons[$min_index];

print_r($persons); 
```

希望有帮助。它应该为您提供有关使用哪些功能的提示。和平丹纽尔

# 解决方案 2

```
foreach((array)$persons as $index=>$value){
        if(!is_numeric($value))continue;
        if(!isset($max_value)){
                $max_value = $value;
                $max_index = $index;
        }
        if(!isset($min_value)){
                $min_value = $value;
                $min_index = $index;
        }
        if( $max_value < $value ){
                $max_value = $value;
                $max_index = $index;
        }
        if( $min_value > $value ){
                $min_value = $value;
                $min_index = $index;
        }
}

@$persons[$max_index] = 'W'.$persons[$max_index];//@suppress some errors just in case
@$persons[$min_index] = 'L'.$persons[$min_index];

print_r($persons); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:12:17.967

我会将每个变量放入一个数组中，然后使用数组排序函数。

```
$people = array (
   'person1' => $person1,
   'person2' => $person2,
   'person3' => $person3
);

asort($people);

$f = key($people);

end($people);
$l = key($people);

$people[$f] = 'L' . $people[$f];
$people[$l] = 'W' . $people[$l]; 
```

然后可以通过使用来参考第 1 个人的分数`$people_sorted['person1']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T03:36:14.050

**这是一个适用于任何**人组合的有效解决方案：

```
$people = array (
   'person1' => 4,
   'person2' => 10,
   'person3' => 0
);

arsort( $people); // Sort the array in reverse order

$first = key( $people); // Get the first key in the array

end( $people);
$last = key( $people); // Get the last key in the array

$people[ $first ] = 'W' . $people[ $first ];
$people[ $last  ] = 'L' . $people[ $last ];

var_dump( $people); 
```

**输出：**

```
array(3) {
 ["person2"]=>
  string(3) "W10"
  ["person1"]=>
  int(4)
  ["person3"]=>
  string(2) "L0"
} 
```

# sql-server-2008 - SQL Server IMAGE 数据类型转换问题

> ID：10891032
> 
> 赞同：0
> 
> 时间：2012-06-05T03:04:36.500
> 
> 标签：sql-server-2008, sql-server-2000, data-conversion, datalength

我们正在将旧的 SQL Server 2000 数据库转换为 SQL Server 2008。两者都将二进制文件（JPG、BMP、DOC 和 PDF）存储在一个`IMAGE`列中（我知道数据类型已被弃用，但不能更改它） .

数据插入新系统，基本

```
INSERT INTO [image] Values (SELECT [image] from legacy_db); 
```

基本上是直`IMAGE`推`IMAGE`。

转换进展顺利。在新系统上，JPG、BMP 和 DOC 文件类型打开时没有问题。PDF 是一场噩梦。

我们发现，对于 PDF 记录，已移动到 SQL Server 2008 中的许多行`DATALENGTH()`比 SQL Server 2000 数据库中的相同行更长。

有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T03:08:21.887

我不确定这个`DATALENGTH()`问题，但作为一种解决方法，如果 PDF 文件在 2000 数据库中是正确的（我假设您已经验证了这一点），您可以尝试从应用程序中提取这些值并将它们重新保存在新的应用程序中的表，而不仅仅是执行 INSERT/SELECT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:58:48.167

通过编写函数来定位 PDF 的 BOF 标记和 EOF 标记解决了这个问题（可能有多个 EOF 标记，所以你必须找到最后一个）。将两个偏移量之间的字节填充到一个新的字节数组中，并使用新的字节数组更新 BLOB 字段。在此之后，PDF 在新系统中打开。

# mysql - 查询关联表的外键

> ID：10891037
> 
> 赞同：1
> 
> 时间：2012-06-05T03:04:58.353
> 
> 标签：mysql, associations

假设我有以下模型：

```
Customer(customer_id (PK), firstName, lastName, email)
Item(item_id (PK), name, description)
Orders(orders_id (PK), customer_id (FK), item_id (FK), promotion_id (FK)),
Promotion(promotion_id (PK), date, gift_id (FK))
Gift(gift_id (PK), name, description) 
```

现在，假设我有以下要求：

> 检索所有客户的所有订单（未分组）的列表以及关联的项目和礼品的名称列。

困难的部分是关联表orders有一个一对多表（促销）的外键列，而他又拥有礼物的外键；我有以下有效的查询，但我发现应该有一种比做很多这样的连接更优雅的方法来解决问题：

```
select concat(c.firstName, ' ', c.lastName) as customerName,
       i.name, g.name
from   customer as c
left join orders as o on c.customer_id = o.customer_id
inner join item as i on o.item_id = i.item_id
inner join promotion as p on o.promotion_id = p.promotion_id
inner join gift as g on p.gift_id = g.gift_id; 
```

我如何以更优雅的方式解决查询？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:16:44.527

可以去掉`INNER`关键字，因为joins默认是inner的，`AS`关键字是可选的；还因为您的列名在连接中是相同的，您可以简单地使用`USING`而不是`ON`：

```
SELECT CONCAT_WS(' ', c.firstName, c.lastName) customerName,
       i.name, g.name
FROM   customer    c
  LEFT JOIN orders o USING (customer_id)
  JOIN item        i USING (item_id)
  JOIN promotion   p USING (promotion_id)
  JOIN gift        g USING (gift_id) 
```

实际上，如果这些是连接表中唯一具有相同名称的列，则可以更进一步并使用`NATURAL`连接（尽管我不喜欢这样，因为它隐藏了架构更改时发生的情况）：

```
SELECT CONCAT_WS(' ', c.firstName, c.lastName) customerName,
       i.name, g.name
FROM   customer            c
  NATURAL LEFT JOIN orders o
  NATURAL JOIN item        i
  NATURAL JOIN promotion   p
  NATURAL JOIN gift        g 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:10:46.507

我认为这非常优雅。连接非常优雅，经常被误解。

# android - 无法连接到 Facebook

> ID：10891038
> 
> 赞同：0
> 
> 时间：2012-06-05T03:05:19.743
> 
> 标签：android, facebook

从我的应用程序连接到 Facebook 时遇到问题。我已经通过安卓模拟器成功连接、登录并发布到 Facebook，但是当我将它导出到我的物理设备（安卓智能手机和平板电脑）时它失败了。我不知道问题可能是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:29:51.420

模拟器是否使用与实体手机相同的操作系统版本？手机是否有实际的互联网连接（您的应用程序是否会检查它）？

只要您的计算机有互联网，android 模拟器就会“神奇地”连接到互联网。您的实际手机可能没有很好的互联网信号，或者可能只是有很多延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:01:23.667

请更新您的应用程序的以下代码。

```
public void loginAndPostToWall() {
    facebook.authorize(this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH,
            new LoginDialogListener());
} 
```

# php - 在javascript中爆炸新行

> ID：10891040
> 
> 赞同：3
> 
> 时间：2012-06-05T03:05:31.223
> 
> 标签：php, javascript

如何将下面的 php 代码转换为 javascript？我用谷歌搜索，发现与 st.replace(/,/g,"\n") 有关系，但如何将它应用于变量？我对javascript知之甚少，并试图学习它。

```
$items = explode("\n", $model); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T03:07:02.827

答案是：

```
items = model.split("\n") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T03:07:30.530

不，您正在搜索返回[Array的](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array)[[ *String* ]`.split("\n")`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)。您找到的[替换](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)将类似于.`implode("\n", explode(",", $model))`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-05T03:07:32.063

基本等效的代码是：

```
var model = 'some string...';
var items = model.split('\n'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-05T03:08:53.250

```
var yourArray = [];
var yourString = 'a,b,c,d,e';
yourArray = yourString.split(','); 
```

# c# - 在 asp.net 和 C# 中实现单点登录

> ID：10891042
> 
> 赞同：0
> 
> 时间：2012-06-05T03:05:57.557
> 
> 标签：c#, asp.net, single-sign-on

目前我有一个代码模块，其中包含验证用户凭据所需的代码，它还包括 AD 用户验证。现在，如果用户从公司的网络域浏览应用程序，我需要在不提示用户输入用户名和密码的情况下自动登录。

可以通过单点登录来完成吗？如果可以，如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:26:36.537

我相信最简单的方法是使用集成 Windows 身份验证并确保您的计算机连接到域，然后将计算机设置为让您的主机位于 IE 的“Intranet”区域，因此您的凭据将被传递。如果这不是一个选项，不妨看看 ADFS 或 OAuth，您可以在其中使用 Cookie、令牌、声明、标头等在许多站点上实施 SSO。

谢谢！

[http://technet.microsoft.com/en-us/library/cc754628(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc754628(v=ws.10).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:43:53.797

是的，你可以通过cookie实现sso，如果你在IE浏览器的iframe中有跨域请求，请记得在设置cookie时在http响应头中添加P3P

# php - SlickGrid 错误：Slick.Editors.Text 不是构造函数

> ID：10891043
> 
> 赞同：0
> 
> 时间：2012-06-05T03:06:08.713
> 
> 标签：php, jquery, cakephp, slickgrid

我正在尝试在 CakePHP 项目的编辑页面上实现 SlickGrid，当页面加载时，我在 javascript 控制台中收到此错误：

```
slick.grid.js:2173TypeError:'Slick.Editors.Text is not a constructor' (evaluating 'new (editor || getEditor(activeRow, activeCell))') 
```

数据在我页面的网格中正确呈现，但是当我单击一个单元格进行编辑时，它只是变成白色，我无法输入任何内容。如果我单击另一个单元格，该单元格将变为白色，而第一个单元格将保持白色。

这是我的 php/jQuery 代码：

```
<?php echo $this->Html->script("/js/slickgrid/lib/jquery-1.7.min.js"); ?>
<?php echo $this->Html->script("/js/slickgrid/lib/jquery.event.drag-2.0.min.js"); ?>
<?php echo $this->Html->script("/js/slickgrid/lib/jquery-ui-1.8.16.custom.min.js"); ?>
<?php echo $this->Html->script("/js/slickgrid/slick.core.js"); ?>
<?php echo $this->Html->script("/js/slickgrid/slick.grid.js"); ?>
<?php echo $this->Html->script("/js/slickgrid/slick.editors.js"); ?>
<?php echo $this->Html->script("/js/slickgrid/slick.formatters.js"); ?>
<?php echo $this->Html->script("/js/slickgrid/slick.dataview.js"); ?>
<?php echo $this->Html->script("/js/slickgrid/plugins/slick.cellselectionmodel.js"); ?>
<?php echo $this->Html->script("/js/slickgrid/plugins/slick.cellrangedecorator.js"); ?>
<?php echo $this->Html->script("/js/slickgrid/plugins/slick.cellrangeselector.js"); ?>
<?php echo $this->Html->script("/js/slickgrid/plugins/slick.rowselectionmodel.js"); ?>

<?php  // Setup rows and cols array for grid

    $columns = array();
    foreach($route['Stop'] as $stop) {
        $columns[] = array( "name"   => $stop['name'],
                            "field"  => $stop['id'],
                            "id"     => $stop['id'],
                            "editor" => "Slick.Editors.Text");
    }

    $tripId = 1;
    $thisTrip['id'] = $tripId;
    foreach($route['RouteTrip'] as $routeTrip) {
        if($routeTrip['trip_id'] != $tripId) {
            $rows[] = $thisTrip;
            $tripId = $routeTrip['trip_id'];
            $thisTrip['id'] = $tripId;
        }
        else {
            $thisTrip[$routeTrip['stop_id']] = $routeTrip['time'];
        }
    }
?>

<?php 
        echo $this->Html->scriptBlock('

            var rows = '.json_encode($rows).';
            var columns = '.json_encode($columns).';
            var options = { rowHeight:21,
                            defaultColumnWidth:100,
                            editable:true,
                            enableAddRow:true,
                            enableCellNavigation:true,
                            asyncEditorLoading:false,
                            autoHeight:true,
                            autoEdit:true
                          };

            slickgrid = new Slick.Grid($("#scheduleTable"), rows, columns, options);
            slickgrid.setSelectionModel(new Slick.CellSelectionModel());
            slickgrid.updateRowCount();
            slickgrid.render();
        ');
?> 
```

$rows 和 $columns 格式正确，每列都有一个“editor”属性，其值为“Slick.Editors.Text”。

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T03:28:20.443

当我开始使用 slickgrid 时，我最初也遇到了这个错误。

**错误是因为您将编辑器指定为字符串而不是类。因此，删除 "editor" => "Slick.Editors.Text" 中的双引号并给出 "editor" => Slick.Editors.Text**

这为我解决了错误。希望这个解决方案也能解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:36:51.023

包括 slick.editors.js 文件。

另外，确保编辑器被指定为一个类，而不是一个字符串（我不熟悉 PHP，所以从源代码中对我来说并不明显，但我怀疑是这种情况）。

# mysql - 根据上次登录的 SQL 语句发送会员提醒

> ID：10891044
> 
> 赞同：2
> 
> 时间：2012-06-05T03:06:13.503
> 
> 标签：mysql

成员表列 [id, email, join_date]

会员登录表列 [m_id, date]

每次用户登录时，都会在成员登录表中创建一个新行。

我正在尝试在他们 30 天未登录时向他们发送电子邮件提醒。我坚持尝试根据他们上次登录的时间从列出的表中获取用户列表 [电子邮件地址]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:16:55.240

```
SELECT DISTINCT members.email, MAX(member_login.date_login)
FROM   members
INNER JOIN member_login
ON members.id = member_login.m_id
group by members.email
having MAX(member_login.date_login) < CURDATE - INTERVAL 30 DAYS 
```

# c# - c#中的线程构建分布式DFS

> ID：10891047
> 
> 赞同：1
> 
> 时间：2012-06-05T03:06:43.973
> 
> 标签：c#, multithreading, distributed-computing, depth-first-search, tpl-dataflow

我一直在尝试在 C# 中实现分布式深度优先搜索。我已经成功到了一定程度，但出现了同步错误。我无法纠正错误。我想要做的是让每个节点使用任务并行数据流相互通信，从而在 DFS 中实现并行性。下面是我的代码：

```
public class DFS
{
static List<string> traversedList = new List<string>();

static List<string> parentList = new List<string>();
static Thread[] thread_array;
static BufferBlock<Object> buffer1 = new BufferBlock<Object>();

public static void Main(string[] args)
{

    int N = 100;
    int M = N * 4;
    int P = N * 16;

    Stopwatch stopwatch = new Stopwatch();
    stopwatch.Start();

    List<string> global_list = new List<string>();

    StreamReader file = new StreamReader(args[args.Length - 2]);

    string text = file.ReadToEnd();

    string[] lines = text.Split('\n');

    string[][] array1 = new string[lines.Length][];

    for (int i = 0; i < lines.Length; i++)
    {
        lines[i] = lines[i].Trim();
        string[] words = lines[i].Split(' ');

        array1[i] = new string[words.Length];

        for (int j = 0; j < words.Length; j++)
        {
            array1[i][j] = words[j];
        }
    }

    StreamWriter sr = new StreamWriter("E:\\Newtext1.txt");

    for (int i = 0; i < array1.Length; i++)
    {
        for (int j = 0; j < array1[i].Length; j++)
        {
            if (j != 0)
            {
                sr.Write(array1[i][0] + ":" + array1[i][j]);
                Console.WriteLine(array1[i][0] + ":" + array1[i][j]);
                sr.Write(sr.NewLine);
            }
        }

    }
    int start_no = Convert.ToInt32(args[args.Length - 1]);
    thread_array = new Thread[lines.Length];
    string first_message = "root";
    buffer1.Post(first_message);
    buffer1.Post(array1);
    buffer1.Post(start_no);
    buffer1.Post(1);

    for (int t = 1; t < lines.Length; t++)
    {
        Console.WriteLine("thread" + t);
        thread_array[t] = new Thread(new ThreadStart(thread_run));
        thread_array[t].Name = t.ToString();
        lock (thread_array[t])
        {
            Console.WriteLine("working");
            thread_array[t].Start();
            thread_array[t].Join();
        }

    }
    stopwatch.Stop();

    Console.WriteLine(stopwatch.Elapsed);
    Console.ReadLine();
}

private static void dfs(string[][] array, int point)
{
    for (int z = 1; z < array[point].Length; z++)
    {
        if ((!traversedList.Contains(array[point][z])))
        {
            traversedList.Add(array[point][z]);
            parentList.Add(point.ToString());
            dfs(array, int.Parse(array[point][z]));
        }

    }
    return;

}
public static void thread_run()
{
    try
    {
        string parent;
        string[][] array1;
        int point;
        int id;
        parent = (string)buffer1.Receive();
        array1 = (string[][])buffer1.Receive();
        point = (int)buffer1.Receive();
        id = (int)buffer1.Receive();
        object value;
        Console.WriteLine("times");

        if (Thread.CurrentThread.Name.Equals(point.ToString()))
        {
            if (!traversedList.Contains(point.ToString()))
            {
                Console.WriteLine("Node:" + point + " Parent:" + parent + " Id:" + id);
                traversedList.Add(point.ToString());
                parent = point.ToString();
                for (int x = 1; x < array1[point].Length; x++)
                {
                    Console.WriteLine("times");
                    if (buffer1.TryReceive(out value))
                    {
                        array1 = (string[][])value;
                    }
                    if (buffer1.TryReceive(out value))
                    {
                        id = (int)buffer1.Receive();
                    }
                    id++;
                    buffer1.Post(parent);
                    buffer1.Post(array1);
                    buffer1.Post(x);
                    buffer1.Post(id);
                    Console.WriteLine("times");
                    Monitor.PulseAll(Thread.CurrentThread);
                }

                //return;
            }
            else
            {
                buffer1.Post(parent);
                buffer1.Post(array1);
                buffer1.Post(point);
                buffer1.Post(id);
                Console.WriteLine("working 1");
                Monitor.PulseAll(Thread.CurrentThread);
            }
        }
        else
        {
            Console.WriteLine("working 2");
            Monitor.Wait(Thread.CurrentThread);
        }
        //Console.WriteLine(parent);
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.Message);
    }

}

} 
```

![在此处输入图像描述](../Images/be640fb943433f8b0b19f988a6252e5d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T08:12:36.510

您的代码存在各种问题。

不正确使用锁定和从多个线程“接触” traversedList 是最明显的问题。

更重要的是，您的代码并没有真正使用 Dataflow，它以类似于 ConcurrentQueue 或任何其他并发集合的方式使用 BufferBlock。数据流的重点是使用[ActionBlocks](http://msdn.microsoft.com/en-us/library/hh194684%28v=vs.110%29)而不是线程来简化处理。默认情况下，操作块将仅使用单个线程进行处理，但您可以通过[DataflowBlockOptions](http://msdn.microsoft.com/en-us/library/hh194751%28v=vs.110%29)类指定任意数量的线程。

ActionBlock 有自己的输入和输出缓冲区，因此您不必为了缓冲而添加额外的 BufferBlock。

将多个相关值传递给一个块是另一个问题，因为它可能导致错误并使代码混乱。创建一个数据结构来保存所有值不需要任何成本。

假设您使用此类来保存处理消息：

```
 public class PointMessage
    {
        public string Message { get; set; }
        public string[][] Lines{get;set;}
        public int Point { get; set; }
        public int ID { get; set; }
    } 
```

您可以创建一个 ActionBlock 来处理这些消息，如下所示：

```
static ActionBlock<PointMessage> _block;
...
var options = new ExecutionDataflowBlockOptions { MaxDegreeOfParallelism = ExecutionDataflowBlockOptions.Unbounded };
_block=new ActionBlock<PointMessage>(msg=>ProcessMessage(msg),options); 
```

并像这样处理每条消息：

```
 private static void ProcessMessage(PointMessage arg)
    {
        if (...)
        {
            ...
            arg.ID++;
            _block.Post(arg);
        }
        else
        {
             ...
            _block.Post(arg);
        }
    } 
```

如果您的函数返回一个值，您可以使用[TransformBlock](http://msdn.microsoft.com/en-us/library/hh194782%28v=vs.110%29)而不是 ActionBlock。

我不明白你的代码做了什么，所以我不会尝试使用 DataFlow 重写它。如果你把它清理一下，它会更容易提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T04:41:06.477

问题是线程需要拥有监视器才能调用等待。因此，您需要锁定 Monitor.PulseAll 以及 Monitor.Wait 以确保您不会再遇到此类错误。

如果您需要我向您解释锁定，请打开另一个问题，我会完整解释！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T06:29:44.260

编辑：忽略我的帖子-改为阅读@PanagiotisKanavos 的帖子...

这不会编译，但会为您设置使用锁的正确方向：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Threading;

public class DFS
{
    static List<string> traversedList = new List<string>();

    static List<string> parentList = new List<string>();
    static Thread[] thread_array;
    //static BufferBlock<Object> buffer1 = new BufferBlock<Object>();

    public static void Main(string[] args)
    {

        int N = 100;
        int M = N * 4;
        int P = N * 16;

        Stopwatch stopwatch = new Stopwatch();
        stopwatch.Start();

        List<string> global_list = new List<string>();

        StreamReader file = new StreamReader(args[args.Length - 2]);

        string text = file.ReadToEnd();

        string[] lines = text.Split('\n');

        string[][] array1 = new string[lines.Length][];

        for (int i = 0; i < lines.Length; i++)
        {
            lines[i] = lines[i].Trim();
            string[] words = lines[i].Split(' ');

            array1[i] = new string[words.Length];

            for (int j = 0; j < words.Length; j++)
            {
                array1[i][j] = words[j];
            }
        }

        StreamWriter sr = new StreamWriter("E:\\Newtext1.txt");

        for (int i = 0; i < array1.Length; i++)
        {
            for (int j = 0; j < array1[i].Length; j++)
            {
                if (j != 0)
                {
                    sr.Write(array1[i][0] + ":" + array1[i][j]);
                    Console.WriteLine(array1[i][0] + ":" + array1[i][j]);
                    sr.Write(sr.NewLine);
                }
            }

        }
        int start_no = Convert.ToInt32(args[args.Length - 1]);
        thread_array = new Thread[lines.Length];
        string first_message = "root";
        //buffer1.Post(first_message);
        //buffer1.Post(array1);
        //buffer1.Post(start_no);
        //buffer1.Post(1);

        for (int t = 1; t < lines.Length; t++)
        {
            Console.WriteLine("thread" + t);
            thread_array[t] = new Thread(new ThreadStart(thread_run));
            thread_array[t].Name = t.ToString();
            lock (thread_array[t])
            {
                Console.WriteLine("working");
                thread_array[t].Start();
                thread_array[t].Join();
            }

        }
        stopwatch.Stop();

        Console.WriteLine(stopwatch.Elapsed);
        Console.ReadLine();
    }

    private static void dfs(string[][] array, int point)
    {
        for (int z = 1; z < array[point].Length; z++)
        {
            if ((!traversedList.Contains(array[point][z])))
            {
                traversedList.Add(array[point][z]);
                parentList.Add(point.ToString());
                dfs(array, int.Parse(array[point][z]));
            }

        }
        return;

    }

    bool busy;
    private readonly object syncLock = new object();

    public static void thread_run()
    {
        try
        {
            string parent;
            string[][] array1;
            int point;
            int id;
            //parent = (string)buffer1.Receive();
            //array1 = (string[][])buffer1.Receive();
            //point = (int)buffer1.Receive();
            //id = (int)buffer1.Receive();
            object value;
            Console.WriteLine("times");

            if (Thread.CurrentThread.Name.Equals("Point.ToString()"))
            {
                if (!traversedList.Contains("Point.ToString()"))
                {
                    for (int x = 1; x < 99999; x++)
                    {
                        Console.WriteLine("times");
                        //if (buffer1.TryReceive(out value))
                        //{
                        //    array1 = (string[][])value;
                        //}
                        //if (buffer1.TryReceive(out value))
                        //{
                        //    id = (int)buffer1.Receive();
                        //}
                        //id++;
                        //buffer1.Post(parent);
                        //buffer1.Post(array1);
                        //buffer1.Post(x);
                        //buffer1.Post(id);
                        Console.WriteLine("times");

                        lock (syncLock)
                        {
                            while (busy)
                            {
                                busy = false;
                                Monitor.PulseAll(Thread.CurrentThread);
                            }
                            busy = true; // we've got it!
                        }

                    }

                    //return;
                }
                else
                {
                    //buffer1.Post(parent);
                    //buffer1.Post(array1);
                    //buffer1.Post(point);
                    //buffer1.Post(id);
                    lock (syncLock)
                    {
                        while (busy)
                        {
                            busy = false;
                            Monitor.PulseAll(Thread.CurrentThread);
                        }
                        busy = true; // we've got it!
                    }
                }
            }
            else
            {
                Console.WriteLine("working 2");
                lock (syncLock)
                {
                    while (busy)
                    {
                        Monitor.Wait(Thread.CurrentThread);
                    }
                    busy = true; // we've got it!
                }

            }
            //Console.WriteLine(parent);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }

    }

} 
```

# html - 从 html 到 html 的实时内容

> ID：10891048
> 
> 赞同：0
> 
> 时间：2012-06-05T03:06:45.300
> 
> 标签：html, xcode, uiwebview, live

我正在使用 UIWebView 显示来自我的组织数据（公开和合法）的数据，但是，例如，我只想从 html 文件中提取特定数据，而不是提取整个 URL。例如，我想拉出 html 的“新闻”部分，并且我希望用户只停留在该页面中，而不是让他们进入网站的其他部分（例如主页、联系我们）并允许他们查看关于 HTML 文件的 PDF 文章。我四处询问并阅读了 DOM 和屏幕抓取，但似乎提取的数据存储在数据库中。

有什么方法可以将带有 PDF URL 的 HTML“新闻”部分拉到我的自定义 HTML 文件中，并且它会实时更新（也许每 30 秒它会刷新并从网站中提取信息，以便内容和列表PDF 是最新的）（例如添加到主网站的 3 篇新文章中，我的自定义 HTML 文件也将刷新并从网站提取信息并更新我的文章列表）

如果有人可以向我指出一种允许 HTML 到 HTML 数据传递（实时）的特定方法，那就太好了，我可以去做更多的研究。目前非常迷茫和困惑，因为这是我第一次这样做。任何帮助/反馈将不胜感激:)

编辑：例如，谷歌地图或谷歌搜索。我不想使用整个谷歌网页，只是拿我想要的重要的东西，比如搜索结果或地图显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T01:15:14.033

这将涉及您的大量学习——您必须学习 HTML/DOM/JavaScript 和 iOS/UIWebVIew。

让我们暂时离开实时刷新部分，稍后我将发布另一个答案或对其进行编辑。这也不容易（查看我今天早些时候发布的关于会影响您的后台执行问题的帖子，除非更新仅发生在前台 [iOS 运行代码每天一次](https://stackoverflow.com/questions/10903568/ios-run-code-once-a-day/10904172#10904172)）

你将不得不做这样的事情。请注意，我从未尝试过这个，也没有看到有人在这里发帖，但理论上它应该可以工作，但正如我所说的那样，会有很多学习，以及大量的试验和错误。当您不熟悉这些事情时，这是一项艰巨的任务。

1) 下载 html 页面并将其加载到 UIWebView 中，但 UIWebView 是隐藏的，因此用户看不到它。

2）当页面加载后，它的 dom 就可以访问了。

3) 您可以使用 Javascript 访问 DOM 并查找您想要的部分。如何在 UIWebView 中注入和运行 Javascript 可以在一个单独的问题中回答（如果包含所有确切的详细信息，这个答案会变得太长）。

4）删除dom中你不感兴趣的部分。或者使用use events来只显示你感兴趣的部分，jQuery在这里可能会有所帮助。

5) 显示 UIWebView

或者，可以将 HTML 保存到文件中，并且可以使用字符串解析来搜索您要查找的位并从中创建一个新的文本 html 文件。我认为这会变得非常混乱，最好利用 UIWebView 将解析 HTML 页面并为您创建 dom 的事实。

# php - 我应该如何从外部 javascript 文件中引用 php 文件

> ID：10891061
> 
> 赞同：0
> 
> 时间：2012-06-05T03:08:02.867
> 
> 标签：php, javascript, url, filesystems, relative-path

所以只是一个普遍的问题：如果我有一个像这样的文件结构，我在根文件夹中有一个索引页面以及一个脚本文件夹，并且在脚本文件夹中有两个脚本，一个是在索引页面中引用的 JS，以及从 js 脚本引用的另一个 PHP：

根文件夹：
--> index.html
--> scripts/
-----> myscript.js
-----> myscript.php

我应该如何使用相对 url 从 js 脚本访问 php 脚本？

会是：`./myscript.php`还是`./scripts/myscript.php`

换句话说，是索引文件或 js 文件中的相对 url。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T03:14:11.313

由于 javascript 在页面范围内运行，而不是在其物理位置中运行，因此 PHP 的 URL 将在路径名中包含 /scripts/。

# php - 在 Joomla 中安装 JomSocial 时出错

> ID：10891067
> 
> 赞同：0
> 
> 时间：2012-06-05T03:08:30.917
> 
> 标签：php, joomla, xampp, joomla-extensions

当我`JomSocial`在我的`Joomla`项目中安装我的`Extension Manager`.

它说`Installing component was successful.`但是我收到了这个错误

```
Strict Standards: Only variables should be assigned by reference in C:\xampp\htdocs\project\administrator\components\com_community\install.community.php on line 39 
```

实际上我是 Joomla 的新手，我对这个错误一无所知。任何人都可以帮助我处理我的情况吗？

提前致谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:21:28.047

确保 joomla 版本和 Joomsocial 版本相互兼容....

# jquery - jquery effect .shake() 在不同的浏览器中奇怪地触发

> ID：10891073
> 
> 赞同：1
> 
> 时间：2012-06-05T03:09:13.607
> 
> 标签：jquery, jquery-animate

我的`.shake()`效果是为我提供跨多个浏览器的业务。例如，在 Chrome 中，如果我快速悬停，我会遇到队列堆积问题。如果我尝试`.stop()`在我的摇晃效果之前实现，元素将开始向下摇晃，然后在动画未完成且元素完全不合适的情况下挂在那里。在 IE 中，动画不止一次触发（即使我没有快速进出悬停）。烦人的是，如果我将鼠标放在链接上，它会一遍又一遍地触发动画。

我尝试过使用 .stop() 及其真/假参数的不同变体。我还尝试在动画的每个步骤上使用 queue:false 。我什至尝试将 .shake 效果与 times:0 放在函数的 mouseleave 部分（结果很有趣）。不知道接下来要尝试什么。

我的代码在下面，但[这里有一个链接到有抖动问题的菜单](http://heatherwaltersonline.com/alabamabunkers/services_offered.html)。

```
$(document).ready(function () {
    $('.shake').hover(function () {
        $(this).animate({
            'color': '#fc0'
        }, 150).effect('shake', {
            times: 1,
            distance: 12,
            direction: 'down'
        }, 50);
    }, function () {
        $(this).animate({
            'color': '#8a600f'
        }, 500);
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T03:28:43.163

我的第一个想法是`.stop(true,true)`在 each 之前添加`.animate()`，但你说你已经尝试过了。

您可以测试该元素当前是否为动画，并且仅在需要时排队一个新动画：

```
$('.shake').hover(function() {
    var $this = $(this);
    if (!$this.is(":animated")) {
       $this.animate({
            'color': '#fc0'
       },150).effect(
            'shake', {
            times:1,
            distance:12,
            direction: 'down'
       }, 50 );
    }
}, function () {
    $(this).animate({
       'color': '#8a600f'
    },500); 
}); 
```

有关更多信息，请参阅[`:animated`选择器 doco](http://api.jquery.com/animated-selector/)。

# android - Android ad-hoc APK 安装是否会获得 google play 市场更新？

> ID：10891074
> 
> 赞同：0
> 
> 时间：2012-06-05T03:09:19.640
> 
> 标签：android, apk, google-play

每当我收到免费版本的支持请求时，我都会提供指向专业版非 DRM APK 的礼貌链接。这些临时 APK 安装是否通过应用程序 ID 以某种方式链接到 google play 市场并知道获取更新，或者临时安装是否及时冻结？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:22:21.513

付费应用和受管理的应用内购买与用户的 Google 帐户相关联，所以我认为这应该行不通。但是，如果您`adb install`是付费应用程序，Market/Play 应用程序会将其显示为“已安装”，因此您可能会收到更新通知。假设它允许您实际更新，如果您发布的应用程序使用 LVL，您应该会收到许可错误，因为该应用程序未与用户的 Google 帐户链接。如果没有，它可能只是工作。当你升级你的应用程序时测试它以确保。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:25:32.767

我认为至少如果有人从您的链接安装，他们仍然能够从市场上获得更新。只要您对市场和链接使用相同的 apk。

我认为它会起作用，因为如果我有一个市场签名的 apk 并使用 adb 安装它，或者手动将它放在 sdcard 上，或者下载它。一旦安装好，我就可以去市场从那里安装并更换它。

但是我不知道它是否会收到更新的通知提醒，但我怀疑只要您在清单中相应地设置版本，它就会得到。

我也不知道如果你有应用程序购买或他们现在提供的其他一些花哨的计费功能，它会如何工作。

# java - 需要电子表格计算器的正则表达式

> ID：10891076
> 
> 赞同：-1
> 
> 时间：2012-06-05T03:09:55.790
> 
> 标签：java, regex

我正在构建一个计算器，它可以对电子表格中的单元格进行操作，并且需要一个正则表达式来表示它的一部分。

我需要解析的内容如下：

*   数字：整数。
*   单元格名称：命名为“字母字符”+“数字”，即。A1、B2...
*   操作：+、-、*、/

一个例子是这样的：

```
23 A4 * 2 B5 / 
```

在这里，我希望这些组是：23、A4、*、2、B5、/

这应该不难，但操作让我失望。

想要一个正则表达式而不只是分割空格的原因是为了验证。我正在寻找一些非常具体的东西，所以我认为正则表达式是最好的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:25:21.983

> 在这里，我希望这些组是：23、A4、*、2、B5、/

```
String[] groups = "23 A4 * 2 B5 / ".split(" "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:10:11.533

从一些研究和上面的评论来看，看起来正则表达式可能不是做我想做的最好的方法。

我将不得不尝试拆分，然后循环遍历所有拆分组以进行验证。

# php - 循环 PHP 从下拉框形成选定的时间

> ID：10891078
> 
> 赞同：0
> 
> 时间：2012-06-05T03:10:22.320
> 
> 标签：php, javascript, html

```
<div id="form1" />
   <form name="choice">
       <table> 
           <tr>
               <td>
                   Number of new types you want to add
               </td>
               <td>
                   <select name="<?php echo $num; ?>">
                    <option value="1" selected>1 row</option>
                    <option value="2">2 rows</option>
                    <option value="3">3 rows</option>
                    <option value="4">4 rows</option>
                    <option value="5">5 rows</option>                        
                    </select>
                   <div class='inputs'></div>
               </td>
           </tr>

       </table>
   </form>            

    <form name="myForm" action="addAccessories.php"  method="post" onsubmit="return validateForm(this);">
        <table border="1">
            <tr> 
                <th>Barcode<em>*</em></th>
                <th>Description<em>*</em></th>
                <th>Minimum required stock<em>*</em></th>
                <th>Current stock</th>
            </tr>    
            <?php
                echo $num;
            ?>
            <tr>                    
                <td><input type="text"  name="bar_code/></td>

                <div class="ui-widget">                                
                <td><input name="description/></td>                
                </div>

                <td><input type="text"  name="minimum_required_stock" /></td>
                <td><input type="text"  name="num_stock" value="0"></td>

            <tr>
                <td> </td> 
                <td> <button data-theme="b" id="submit" type="submit">Add   accessories</button></td>
            </tr>
        </table>
    </form> 
```

大家好， 在这段代码中，我有 2 个表单，1 个是下拉框，有 5 个选项和一个用于文本输入的表单。理论上，如果我选择选项 value="3"，文本表单将循环 3 次并获得 3 组文本输入。但是，到目前为止，我还没有成功地做到这一点。另外，如何访问 addAccessories.php 文件中的这 3 组数据？

我很欣赏关于这个话题的任何意见。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:23:13.950

阅读您的问题，听起来您想要编写这样的代码，以便当表单选择中的选择发生更改时，您可以更改表单 myform 中的行数。这在 php 中是不可能的，因为这将是客户端机器上的运行时更改。你可以用javascript写这个。您将需要从表单选择中调用的代码，以调整表单 myform 中的 DOM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:26:48.970

您可以使用纯 PHP 解决方案并重建页面——但这很笨重而且速度很慢（这对于宠物项目来说可能很好）。通常我们会使用 Javascript 和 AJAX 来完成这样的事情。

# knockout.js - 淘汰赛映射似乎打破了下拉的值绑定

> ID：10891082
> 
> 赞同：3
> 
> 时间：2012-06-05T03:10:35.620
> 
> 标签：knockout.js, knockout-mapping-plugin

当为视图模型使用 KO 映射插件，然后绑定到选择时，未设置该值。

**jsFiddle：**

[http://jsfiddle.net/JerryClinesmith/pCn9E/](http://jsfiddle.net/JerryClinesmith/pCn9E/)

**HTML：**

```
<h1>With ko.mapping (manager not set)</h1>
<div id="option-mapping">
    <select data-bind="options: availManagers, value: manager, optionsText: 'name', optionsCaption: 'Pick one'"></select>
    <div data-bind="text: json"></div>
</div>

<h1>Without ko.mapping (manager is set)</h1>
<div id="option-no-mapping">
    <select data-bind="options: availManagers, value: manager, optionsText: 'name', optionsCaption: 'Pick one'"></select>
    <div data-bind="text: json"></div>
</div>​ 
```

**JavaScript：**

```
var origData = {
manager: {},
availManagers: [
    {id: 1, name: 'Tom'},
    {id: 2, name: 'Joe'},
    {id: 3, name: 'James'}]
};

var ViewModel = function(data) {
    var self = this;

    ko.mapping.fromJS(data, {}, self);

    self.json = ko.computed(function() {
        return ko.toJSON(ko.mapping.toJS(self));
    });
};

var ViewModelNoMapping = function(data) {
    var self = this;

    self.manager = ko.observable(data.manager);
    self.availManagers = ko.observableArray(data.availManagers);

    self.json = ko.computed(function() {
        var obj = ko.toJS(self);
        delete obj.json;
        return ko.toJSON(obj);
    });
};

var vm = new ViewModel(origData);
var vm2 = new ViewModelNoMapping(origData);
ko.applyBindings(vm, document.getElementById('option-mapping'));
ko.applyBindings(vm2, document.getElementById('option-no-mapping'));​ 
```

没有映射插件的视图模型似乎可以按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:25:21.670

我之前用空白对象遇到过同样的问题，它似乎没有创建一个可观察的......这意味着 manager 是一个普通对象，这意味着计算永远不会触发。

例如，将其更改为...（注意：我将 manager: {} 更改为 manager: '' 然后给它一些转换为可观察的东西。然后使事情顺利进行...也将转换为 json 函数，因为另一个似乎没有显示经理的价值观。

```
 manager: '',
    availManagers: [
        {
        id: 1,
        name: 'Tom'},
    {
        id: 2,
        name: 'Joe'},
    {
        id: 3,
        name: 'James'}]
};

var ViewModel = function(data) {
    var self = this;
    //self.manager = ko.observable();
    ko.mapping.fromJS(data, {}, self);
    self.json = ko.computed(function() {
         var obj = ko.toJS(self);
        delete obj.json;
        return ko.toJSON(obj);
    });
}; 
```

我不确定这是否是映射插件中的错误，既没有转换为可观察对象，也没有转换为正确的 json 进行显示。

为了确认，我下载了映射插件并编写了测试：-

```
test('mapping an object creates a observable', function () {
    var data = {
        a : {}      
    };

    var mapped = ko.mapping.fromJS(data);  
  equal(ko.isObservable(mapped.a), true);
}); 
```

结果

```
failed
Expected:   true
Result:     false
Diff:   true false 
Source:     at Object.<anonymous> (file:///C:/OpenSourceReps/Knockout/mapping/spec/mappingBehaviors.js:1635:3) 
```

# search - 在多个文本文件中立即搜索字符串的算法

> ID：10891086
> 
> 赞同：0
> 
> 时间：2012-06-05T03:11:35.333
> 
> 标签：search, full-text-search

我正在编写一个帮助系统，我想以现代方式实现搜索，例如它现在可以在 Google 搜索中使用：当用户只开始输入查询字母时，他会立即得到结果，并且每个下一个字母都会产生结果集更详细。

索引文本并以这种方式搜索的算法是什么？

维基百科或/和其他链接都可以，无需浪费时间进行详细解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:27:44.020

作为一种实用的方法，我认为您可以使用像[lucene](http://lucene.apache.org/core/)这样的库，它可以帮助您处理有关全文索引的大部分事情。

# c++ - c ++递归导致分段错误（与单词的AND和OR查询）

> ID：10891089
> 
> 赞同：0
> 
> 时间：2012-06-05T03:11:51.610
> 
> 标签：c++, recursion, segmentation-fault

我的项目让我使用带括号的单词表达式并检查输入文件的出现位置。如 (Blue AND Black) file1 (Dark AND (Sky AND (Flower OR Roses))) file2

ETC

当涉及到更简单的表达式时，我的程序可以工作，比如（蓝色或黑色），但是当我执行更复杂的操作时，我会遇到分段错误。

这是包含错误的 .cpp 文件我确定错误必须发生在 doQuery 或 doMultipleQuery 中（我没有包括包含和不重要的函数）

```
void WordSearch::doQuery(string query,string *result,int &size){
  int temp = 0, i = 0;

  MultiQuery thisQuery;
  thisQuery.parse_string(query);
  string word1 = thisQuery.getOperand1();
  string word2 = thisQuery.getOperand2();
  string op = thisQuery.getOperator();

  if (thisQuery.getSize(query) < 5) {
    List *list1;
    int index = 0, list1_size = 0;
    string temp[MAX_SIZE];  
    list1 = wordlist->search(word1);
    if (list1 != NULL){
      list1->all(temp, list1_size);
      while(index < list1_size){
        result[size] = temp[index];
        size++;
    index++;
      }

if(size == 0){
      result[size]="No Such File";
      size++;
    }

sort(result,result+size);
  }
  else
  cout<<"Wrong query";
return;
}

if (op=="AND") {
  size=0;
  and_operation(wordlist,word1,word2,size,result);
  sort(result,result+size);
} 
else if(op=="OR") {
  size=0;
  or_operation(wordlist,word1,word2,size,result);
  sort(result,result+size);
}
return;
} 

void WordSearch::doMultipleQuery(string query,string *result,int &size){
  MultiQuery thisQuery;
  thisQuery.parse_string(query);
  string operand1 = thisQuery.getOperand1();
  string operand2 = thisQuery.getOperand2();
  string oper = thisQuery.getOperator();
  int op1_size = thisQuery.getSize(operand1);
  int op2_size = thisQuery.getSize(operand2);
  string *temp1, *temp2;
  int index1 = 0, index2 = 0, size1 = 0, size2 = 0;

  if (thisQuery.getSize(query) <= 5) // ( Red AND Blue )
    doQuery(query, result, size);

  if (oper == "AND"){ // Files need to include both
    if (op1_size < 5 && op2_size >= 5){ // ( Pink OR ( Blue AND Black ) )
  string op1Temp = "( " + operand1 + " )";
      doQuery(op1Temp, temp1, size1);       
  doMultipleQuery(operand2, temp2, size2);
  while (index2 < size2) {
    while (index1 < size1){
      if (temp2[index2] == temp1[index1]){
    string tempString = temp2[index2];
    result[size] = tempString;
        size++;
      }
      index1++;
    }
      index2++;
      }
    }     
    if (op1_size >= 5 && op2_size < 5){ // ( ( Blue AND Black ) OR Pink )
  string op2Temp = "( " + operand2 + " )";
      doQuery(op2Temp, temp2, size2);   
  doMultipleQuery(operand1, temp1, size1);
  while (index1 < size1) {
    while (index2 < size2){
      if (temp1[index1] == temp2[index2]){
    string tempString = temp1[index1];
    result[size] = tempString;
    size++;
      }
      index2++;
    }
      index1++;
    }
  }   
  if (op1_size >= 5 && op2_size >= 5){ // ( ( Flower AND Red ) OR ( Pink AND Blue ) )
    doMultipleQuery(operand1, temp1, size1);
    doMultipleQuery(operand2, temp2, size2);
  while (index1 < size1) {
    while (index2 < size2){
      if (temp1[index1] == temp2[index2]){
    string tempString = temp1[index1];
    result[size] = tempString;
    size++;
      }
      index2++;
        }
        index1++;
  }
}  
}   

if (oper == "OR")   { // Files only need to include one
  if (op1_size < 5 && op2_size >= 5){ // ( Pink OR ( Blue AND Black ) )
  string op1Temp = "( " + operand1 + " )";
  doQuery(op1Temp, temp1, size1);
  doMultipleQuery(operand2, temp2, size1);
  while (index2 < size2){
result[size] = temp2[index2];
index2++;
size++;
  }
  while (index1 < size1){
result[size] = temp1[index1];
index1++;
size++;
  }
}   
if (op1_size >= 5 && op2_size < 5){ // ( ( Blue AND Black ) OR Pink )
  string op2Temp = "( " + operand2 + " )";
  doQuery(op2Temp, temp2, size2);   
  doMultipleQuery(operand1, temp1, size1);
  while (index2 < size2){
result[size] = temp2[index2];
index2++;
size++;
  }
  while (index1 < size1){
result[size] = temp1[index1];
index1++;
size++;
  }
}   
if (op1_size >= 5 && op2_size >= 5){ // ( ( Flower AND Red ) OR ( Pink AND Blue ) )
  doMultipleQuery(operand1, temp1, size1);
  doMultipleQuery(operand2, temp2, size2);
  while (index2 < size2){
result[size] = temp2[index2];
index2++;
size++;
  }
  while (index1 < size1){
result[size] = temp1[index1];
index1++;
size++;
  }
}
}   
sort(result,result+size);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:43:51.140

由于您的代码非常复杂且令人费解，因此可能还有其他错误，但突出的是您从未为结果数组分配内存。
看`doMultipleQuery`：

```
string *temp1, *temp2;
int index1 = 0, index2 = 0, size1 = 0, size2 = 0;

if (thisQuery.getSize(query) <= 5) // ( Red AND Blue )
    doQuery(query, result, size);

if (oper == "AND"){ // Files need to include both
    if (op1_size < 5 && op2_size >= 5){ // ( Pink OR ( Blue AND Black ) )
        string op1Temp = "( " + operand1 + " )";
    doQuery(op1Temp, temp1, size1);   // <-- temp1 is uninitialized here       
doMultipleQuery(operand2, temp2, size2);  // <-- temp2 is uninitialized here 
```

它会更好地使用`std::vector`并将`push_back`结果放在它上面。

# c# - 从另一个页面获取 TextBox 值

> ID：10891091
> 
> 赞同：0
> 
> 时间：2012-06-05T03:12:17.557
> 
> 标签：c#, asp.net

> **可能重复：**
> [asp.net 将值传递到下一页](https://stackoverflow.com/questions/8241470/asp-net-pass-a-value-into-next-page)

我正在使用文本框向用户请求数量，并在使用它进行计算后，我想在另一页的标签上显示结果。

这是confirm.aspx.cs的代码

```
public partial class confirm : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (Request.Cookies["user"] != null)
        {
            Label2.Text = Server.HtmlEncode(Request.Cookies["user"]["userName"]);
            Label3.Text = Server.HtmlEncode(Request.Cookies["user"]["email"]);
            Label1.Text = Server.HtmlEncode(Request.Cookies["user"]["items"]);

        }
    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        Session.Add("TextBox1Value", TextBox1.Text);
        Response.Redirect("total.aspx");

    }
} 
```

这是另一个页面的代码，total.aspx.cs

```
public partial class total : System.Web.UI.Page
{
    int totalprice;
    protected void Page_Load(object sender, EventArgs e)
    {
        //Label1.Text = Server.HtmlEncode(Request.Cookies["confirm"]["quantity"]);
        int quantity = Session["TextBox1Value"];

        if (Request.Cookies["user"]["items"] == "Tyres")
        {
            totalprice = 20 * quantity;

            Label2.Text = totalprice.ToString();
        }
    }
} 
```

我在任何地方都可能是错的，或者对我该怎么做有任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:15:43.117

您需要将其转换为`integer`类型以进行计算。

```
 if(Session["TextBox1Value"]!=null)
 {
   string strQuantity = Session["TextBox1Value"].ToString();
   int quantity=Convert.ToInt32(strQuantity);
   //now you can use quantity to do all your calculations
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:18:07.767

将值从一页传递到另一页有不同的方法。

我对同一主题的回答之一将帮助您了解详细信息。

请参考[将值传递到下一页](https://stackoverflow.com/questions/8241470/asp-net-pass-a-value-into-next-page/8241577)

# algorithm - 交换整数效率

> ID：10891097
> 
> 赞同：1
> 
> 时间：2012-06-05T03:13:30.477
> 
> 标签：algorithm, swap

简单地，

```
X = Integer
Y = Another Integer

Z ( If used ,Integer Temp ) 
```

最有效的方法是什么？

**方法一：**

```
Z = X
X = Y
Y = Z 
```

**方法二：**

```
X ^= Y
Y ^= X
X ^= Y 
```

* * *

**编辑我** [*装配视图*]

**方法一：**

```
MOV  
MOV  
MOV 
```

**方法二：**

```
TEST ( AND )  
JZ  
XOR  
XOR  
XOR 
```

**备注：**

*   `MOV`那么慢`XOR`
*   `TEST`,`JZ`用于`XOR`平等安全
*   `方法我使用额外的寄存器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T03:16:53.420

在大多数情况下，使用临时变量（通常是汇编级别的寄存器）是最佳选择，也是编译器倾向于生成的。

> 在大多数实际场景中，使用临时寄存器的普通交换算法效率更高。XOR 交换可能可行的有限情况包括： 在指令集编码允许 XOR 交换以较少字节数编码的处理器上；在具有高寄存器压力的区域中，它可以允许寄存器分配器避免溢出寄存器。在可用 RAM 非常有限的微控制器中。因为这些情况很少见，所以大多数优化编译器不会生成 XOR 交换代码。

[http://en.wikipedia.org/wiki/XOR_swap_algorithm](http://en.wikipedia.org/wiki/XOR_swap_algorithm)

此外，如果将相同的变量作为两个参数传递，则 XOR Swap 实现会失败。正确的实现（来自同一链接）将是：

```
void xorSwap (int *x, int *y) {
     if (x != y) {
         *x ^= *y;
         *y ^= *x;
         *x ^= *y;
     }
 } 
```

> 请注意，代码不会立即交换传递的整数，而是首先检查它们的地址是否不同。这是因为，如果地址相等，算法将折叠成三倍 *x ^= *x 导致零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T17:57:34.927

试试这种交换号码的方法

整数a，b；

a=a+b-(b=a);

# iphone - UITableview clipsToBounds

> ID：10891100
> 
> 赞同：0
> 
> 时间：2012-06-05T03:14:13.833
> 
> 标签：iphone, ipad, ios5

我正在创建一个 iPad 视图，它有一个表格视图作为子视图。tableview 只占屏幕的一小部分，位于屏幕中间附近，它包含一些菜单项。我希望人们将要上下滚动这个 tableview 但是我不喜欢单元格如何消失在硬边上。当我将 clipsToBounds 设置为 false 时，我得到了我想要的，因为硬边不再存在，但是当 tableview 需要该单元格进行回收时，顶部/底部单元格消失。当单元格向上滚动到表格视图的边界时，是否有一种通用技术可以避免这种硬边缘？我正在考虑在父容器视图上添加渐变 alpha 蒙版，但它似乎有点过头了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T05:00:57.987

对此没有硬性规定，但你当然可以做任何你觉得最好的事情。在浮动 tableView 的情况下，我会做的是使用层给它一个漂亮的边框。它很容易编码（2~3行）。把边缘弄圆，让它漂亮。

如果你想投下阴影，它会变得有点复杂但可能。只需绘制一个矩形的贝塞尔曲线路径（您希望阴影出现的位置）。分配那个 CALayer shadowPath。然后将其添加到表中。

您还可以对 alpha 进行渐变，使其看起来像阴影。

但是我建议您设置`clipsToBounds`，`YES`因为否则它看起来很糟糕，因为桌子在您视图中的某个地方“浮动”。

# php - HTML / PHP - 如何“将组件打包成多部分文档”？

> ID：10891103
> 
> 赞同：1
> 
> 时间：2012-06-05T03:14:31.777
> 
> 标签：php, html, performance, header, multipart

似乎是一个直截了当的问题，但一定有我遗漏的东西。

仔细阅读著名的雅虎“高性能前端”建议，我遇到了这个短语

> 将组件打包到多部分文档中

然后是简短的简介，并没有真正详细说明事情的操作方法。

我知道有一个多部分标题，并且电子邮件是使用多部分边界拆分的，但进一步的搜索并没有透露更多信息……有人能解释一下这到底意味着什么以及它适用于什么情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T03:21:41.497

我相信多部分文档只适用于 IE；这个想法是将 HTML 和所有图像打包到一个文档中（例如 mime 电子邮件的工作方式）。

另见：[http ://en.wikipedia.org/wiki/MHTML](http://en.wikipedia.org/wiki/MHTML)

我不会走这条路；我认为最好只是积极地缓存您的外部脚本、图像和样式表。它只是更实用，在大多数情况下会产生相同的性能。

# linux - HDFS 是如何将多个文件同时写入低层本地文件系统的？

> ID：10891107
> 
> 赞同：0
> 
> 时间：2012-06-05T03:14:34.333
> 
> 标签：linux, asynchronous, hadoop, hdfs

在我完全理解之前，我想知道如果 HDFS 同时写入许多文件，它是如何保持高性能的。

例如，当前一个数据节点有100个文件可供读写。我认为它不会只使用几个线程来执行正常的同步 IO 操作。HDFS 是创建 100 个工作线程来处理它们，还是使用一些没有这么多线程的异步 IO 机制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:04:05.950

是的，datanode 将使用 100 个线程为请求提供服务。一个 Hadoop HDFS 数据节点对它在任何时候服务的文件数量都有一个上限。上限参数是 dfs.datanode.max.xcievers。默认上限为 256。

# nfa - 将 RE 转换为 NFA

> ID：10891110
> 
> 赞同：1
> 
> 时间：2012-06-05T03:15:29.453
> 
> 标签：nfa

哪一种是显示 RE 联合 0+1 的正确方法？我看到了这两种方式，但我认为两者都是正确的。如果两者都是正确的，为什么要把事情复杂化？

![在此处输入图像描述](../Images/e8376ca505a14048f1ba1c0805150c2e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T03:32:12.040

正如你所说，它们都是正确的。

第一个看起来像是使用一组标准规则生成的——在这种情况下，它是矫枉过正的（而且看起来很傻），但在更复杂的情况下，遵循简单的规则比把整个事情都记在脑子里更容易从头开始编写等效的 NFA。

通常，可以重写 NFA，使其具有单个最终状态（显然已经只有一个开始状态）。

然后，这种形式的两个 NFA 可以以这样一种方式组合，即它们在组合时接受的语言是它们单独接受的语言的联合——这对应`+`于正则表达式中的 or ()。要以这种方式组合 NFA，只需创建一个新节点作为起始状态并将其与 ε-transitions 连接到两个 NFA 的起始状态。

然后，为了将 NFA 整齐地结束在单个最终状态（以便我们可以根据需要将此 NFA 递归地用于其他联合），我们创建一个额外的节点作为统一的最终状态并 ε-连接旧的最终状态状态（失去最终状态）。

使用上面的一般规则，很容易得出第一个图（两个 NFA 结合在一起，第一个匹配`0`，另一个`1`）——第二个很容易通过常识得出，因为它是一个非常简单的正则表达式 ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T08:58:48.473

第一个构造属于带有 e-moves 的 NFA 类，它是一般 NFA 类的扩展。e-moves 让您无需输入即可进行转换。对于转移函数，重要的是仅使用电子转移来计算从给定状态可到达的状态集。显然，添加 e-moves 并不允许 NFA 接受非常规语言，因此它最终相当于 NFA，然后是 DFA。

Thompson 的构造算法使用带有 e-moves 的 NFA 从任何正则表达式构建自动机。它提供了一种从正则表达式构建自动机的标准方法，可以方便地自动构建。

# asp.net - 在自动生成解密密钥的情况下，如何使用加密密码迁移 SQL 成员资格数据库？

> ID：10891113
> 
> 赞同：0
> 
> 时间：2012-06-05T03:15:45.830
> 
> 标签：asp.net, sql-server, asp.net-membership

有一个服务器，其中 machine.config 声明以下内容：

```
<machineKey validationKey="AutoGenerate,IsolateApps" decryptionKey="AutoGenerate,IsolateApps" validation="SHA1"/> 
```

未指定解密密钥，它是自动生成的。我正在将其移至新服务器。如何迁移解密和验证密钥，以便可以在新服务器上使用数据库？

这些密钥仅用于 Viewstate 和 Cookie Auth 还是用于生成加密密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:11:27.763

它们在运行时自动生成，无法迁移。它只会影响在运行时生成的身份验证票/视图状态，而不影响您存储的密码，这些密码应该有自己的盐，与数据库中的哈希分开存储。

如果您需要在场中添加更多服务器，最好为迁移生成自己的。

# java - Diffie Hellman 密钥协议每次 JAVA 生成不同的密钥

> ID：10891119
> 
> 赞同：1
> 
> 时间：2012-06-05T03:17:05.583
> 
> 标签：java, bouncycastle, diffie-hellman

我遇到了 Diffie Hellman 实施的问题。我正在使用此代码 [http://www.java2s.com/Tutorial/Java/0490__Security/DiffieHellmanKeyAgreement.htm](http://www.java2s.com/Tutorial/Java/0490__Security/DiffieHellmanKeyAgreement.htm)

这实际上是我正在阅读的一本书的一个例子。但我不明白为什么要`generateSecret()`为每个`KeyAgreement`. 我注意到该函数会创建不同的键，即使我用相同的`KeyAgreement`两次调用它！如果有人有什么建议我会很高兴的！

谢谢你的时间！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T18:28:43.750

我认为示例的一部分

```
private static BigInteger g512 = new BigInteger("1234567890", 16);
private static BigInteger p512 = new BigInteger("1234567890", 16); 
```

完全是假的。 `p`需要是素数并且`g`需要是生成器。当我尝试运行该示例时，出现异常。 [这](http://www.exampledepot.com/egs/javax.crypto/KeyAgree.html)似乎是一个更合理的例子（但我自己还没有测试过）。

基本上，DH 交换的有趣输入是`p,g`需要生成并且必须具有一些独特属性的 ( ) 对。显然，上面的示例仅显示了不会产生正确运行的算法的占位符值（`p`不能等于`g`并且`p`应该是素数，而在示例中它显然可以被 10 整除）。我链接到的示例显示了如何使用库来生成正确的 ( `p, g`) 对。

还值得注意的是，DH 参数生成通常是与生成密钥分开的步骤。虽然 DH 参数有些私密，但它们不像您的私钥那样敏感，可以生成一次然后重复使用。

**（编辑：[示例](http://www.exampledepot.com/egs/javax.crypto/GenDhParams.html)）**

```
AlgorithmParameterGenerator paramGen = AlgorithmParameterGenerator.getInstance("DH");
paramGen.init(512); // number of bits
AlgorithmParameters params = paramGen.generateParameters();
DHParameterSpec dhSpec = params.getParameterSpec(DHParameterSpec.class);

BigInteger p512 = dhSpec.getP();
BigInteger g512 = dhSpec.getG();
int l = dhSpec.getL();
... 
```

# asp.net - 在一台 Web 服务器上验证的表单也希望在另一台服务器上进行验证

> ID：10891129
> 
> 赞同：-2
> 
> 时间：2012-06-05T03:19:13.633
> 
> 标签：asp.net, forms-authentication

我们在我们的域上使用表单身份验证（IIS 7 和 ASP.Net 3.5），`www.ourbusiness.com`并且没有问题。我们现在希望添加一些额外的 ASP.Net 服务器，这些服务器将位于稍微不同的域上`newapp.ourbusiness.com`——并且希望在 www.ourbusiness.com 上通过身份验证的人将在 newapp.ourbusiness 上进行身份验证。 com。

我已经看到有关如何解决此问题的分散报告，但有人可以提供额外的指导吗？例如，我的理解是，我们希望所有服务器使用相同的机器密钥，以便一个盒子上的身份验证 cookie 对所有其他盒子都有好处，这是我们已经在`www.ourbusiness.com`域上做的事情。但我不确定还需要什么，或者是否有文章解释了所涉及的步骤。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T03:22:28.407

您可以自己处理创建`FormsAuthenticationTicket`and `HttpCookie`。这样您就可以设置 cookie 的域来处理您的子域。就像您说的那样，您的服务器也需要具有相同的机器密钥。

```
 FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1,
        username,
        DateTime.Now,
        DateTime.Now.AddMinutes(30),
        isPersistent,
        userData,
        FormsAuthentication.FormsCookiePath);

      // Encrypt the ticket.
      string encTicket = FormsAuthentication.Encrypt(ticket);

      // Create the cookie.
      var cookie = new HttpCookie(FormsAuthentication.FormsCookieName, encTicket) 
      cookie.Domain = ".ourbusiness.com";
      Response.Cookies.Add(cookie); 
```

# objective-c - 从结果类型为“UITableView *”的函数返回“UITableViewCell *__strong”的不兼容指针类型

> ID：10891131
> 
> 赞同：0
> 
> 时间：2012-06-05T03:20:20.933
> 
> 标签：objective-c, ios, uitableview

我正在`tableView`以下列方式加载搜索结果，但我收到一条警告，抱怨指针类型不兼容。

我下面的代码有什么错误？

```
// Our tableView containing the search results.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (searchResults == nil) {
        return 0;
    } else {
        return [searchResults count];
    }
}
- (UITableView *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"SearchResultCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [searchResults objectAtIndex:indexPath.row];
    return cell;
}
// END tableView

- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{
    NSLog(@"The search text is: '%@'", searchBar.text);
    searchResults = [NSMutableArray arrayWithCapacity:10];
    for (int i = 0; i < 3; i++) {
        [searchResults addObject:[NSString stringWithFormat:@"Fake Result %d for '%@'", i, searchBar.text]];
    }
    [self.tableView reloadData];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T03:26:56.120

的返回类型`tableView:cellForRowAtIndexPath:`不正确。它应该`UITableViewCell *`代替`UITableView *`.

# android - android服务、广播和活动

> ID：10891132
> 
> 赞同：1
> 
> 时间：2012-06-05T03:20:36.177
> 
> 标签：android, service, android-activity, broadcastreceiver

目前我有三个类：活动（A）、广播接收器（B）和服务（C）。

假设 A 绑定到 C，现在，B 从系统中获得了新的意图。

B可以直接绑定到C（完全相同）吗？

* * *

我发现broadcastReceiver中有一个peekService方法。

我的问题是我可以在广播接收器中绑定正在运行的服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T03:50:22.270

如果您已经动态注册了您的接收器，那么您可以从该方法`Context.registerReceiver()`绑定到一个。`Service``onReceive`

但是，如果您在清单中声明了您的，那么您不应该从该方法`BroadcastReceiver`绑定到服务。`onReceive()`你可以*开始*- 你只是不能绑定到`Service`它，因为它`bindService()`是异步的。[Android 开发指南](http://developer.android.com/reference/android/content/BroadcastReceiver.html#ReceiverLifecycle)和[onReceive](http://developer.android.com/reference/android/content/BroadcastReceiver.html#onReceive%28android.content.Context,%20android.content.Intent%29)文档中有关此的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T07:22:21.957

我发现使用 peekService 可以绑定正在运行的服务。

像这样

```
IBinder ib = peekService(context, new Intent(context,
                    xxxxService.class)); 
```

((xxxxService.class)ib)。在这里做任何事...

# jquery - 在提交验证

> ID：10891133
> 
> 赞同：0
> 
> 时间：2012-06-05T03:20:39.817
> 
> 标签：jquery

我需要帮助提交一个表单，其中我有检查电子邮件是否存在于下拉列表中，同时提交它显示警报消息的表单但也提交表单，当没有显示警报消息时，只需要提交表单

```
$(document).on('click', '#Records', function (event) {
    $("#dropval select option:selected").each(function () {
        var z = $(this).val();
        //alert(z);
        if(z != 'email') {
            alert('please select Email');
            e.preventDefault();
            return false;
        } else {
            return true;
        }
    });
});
});

   <form  name="search" method="post" action="sample1.php" >
  <div id="dropval">

  <select name="select3[1]" class="mySelects" >
  <option value="None"  selected > None</option>
  <option value="email" >email</option>
  <option value="firstname" >firstname</option>
  <option value="lastname" >lastname</option>
  <option value="mobile" >mobile</option>
  </select>
  <select name="select3[2]" class="mySelects" >
  <option value="None" selected > None</option>
  <option value="email" >email</option>
  <option value="firstname" >firstname</option>
  <option value="lastname" >lastname</option>
  <option value="mobile" >mobile</option>
  </select>
  <select name="select3[3]" class="mySelects" >
  <option value="None" selected > None</option>
  <option value="email" >email</option>
  <option value="firstname" >firstname</option>
  <option value="lastname" >lastname</option>
  <option value="mobile" >mobile</option>
  </select>
  <select name="select3[4]" class="mySelect" >
  <option value="None"  selected> None</option>
  <option value="email" >email</option>
  <option value="firstname" >firstname</option>
  <option value="lastname" >lastname</option>
  <option value="mobile" >mobile</option>
  </select>
  </div>
  <input type="submit" value="submit" id="Records">
  </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:24:49.783

如果您在表单提交而不是按钮单击上调用您的函数，它应该可以解决您的问题，因为此处返回 false 会阻止表单提交。

```
$('#formName').on('submit', function() {
    //Validation code here
    if(valid == false) {
        return false; //Stops the form from submitting
    } else {
        return true; //Allows the form to submit
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:25:08.067

```
$(document).on('click', '#Records', function(event) {
    $("#dropval select option:selected").each( function (){
        var z = $(this).val();
        //alert(z);
        if(z!='email'){
            alert('please select Email');
            event.preventDefault(); // 'e' was undefined before, as you named your variable 'event'. This would have been causing an error and code below would not have been executed - as a result, your form would have been submitted after the alert.
            return false;
        }
     });
}); 
```

附带说明一下，将事件绑定到`document`诸如此类`click`是低效的。尝试将其绑定到更亲近的父级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T03:43:33.350

试试这个：

```
$('#formy').bind('submit', function(event){
    var success = false;

    $("#dropval select option:selected").each(function () {
        var z = $(this).val();
        if(z == 'email') {
            success = true;
        }
    });

    return success;
}); 
```

您在循环中返回，这不会对提交做任何事情。

# sencha-touch-2 - Sencha Touch 2.0 是否支持在他们的工具 SDK 中访问麦克风（在手机上）？

> ID：10891135
> 
> 赞同：-2
> 
> 时间：2012-06-05T03:20:49.117
> 
> 标签：sencha-touch-2

Sencha Touch 的工具 SDK 支持将您的 HTML5+JS+CSS3 包装到本机应用程序中（我假设在某种程度上类似于 PhoneGap）。它提供了对相机等移动功能的一些有限访问。但我找不到：

是否支持访问手机上的麦克风？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T18:03:19.113

我只是想说不，但我认为它太短了

[http://www.sencha.com/forum/showthread.php?207849-Is-there-a-microphone-(for-recording)-control-available-in-sencha-touch-2](http://www.sencha.com/forum/showthread.php?207849-Is-there-a-microphone-(for-recording)-control-available-in-sencha-touch-2)

[http://www.sencha.com/forum/showthread.php?183880-How-to-record-audio-in-a-sencha-app&highlight=microphone](http://www.sencha.com/forum/showthread.php?183880-How-to-record-audio-in-a-sencha-app&highlight=microphone)

您需要使用 PhoneGap/Cordova

希望这可以帮助

# iphone - 增加 tabBarItem 图像大小

> ID：10891138
> 
> 赞同：1
> 
> 时间：2012-06-05T03:21:33.710
> 
> 标签：iphone, ios, uitabbar, uitabbaritem

好的，所以我像这样以编程方式将图像添加到我的 tabbaritems

```
self.button1.image = [UIImage imageNamed:@"156-controlpad.png"]; 
```

我想知道是否有一种方法可以将图像的大小从 30x30“它们通常是”增加到更大的东西，比如 45x45 .. 还是只需要更大的图像？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:35:09.560

您必须在 App Window 上添加图像条。

# c# - 如何在全屏模式下使用 Foxit/Adobe 打开 PDF 文件？

> ID：10891141
> 
> 赞同：0
> 
> 时间：2012-06-05T03:22:21.387
> 
> 标签：c#, pdf, adobe-reader, foxit-reader

我需要从我的 C# 应用程序中使用 Foxit Reader 或 Adob​​e Reader 在全屏模式下打开一个 PDF 文件。手动，我`F11`在 Foxit Reader 和`CTRL+L`Adob​​e Reader 上打字。这会将当前文件视图更改为“全屏”模式。但是以编程方式，我不知道该怎么做！提前致谢。

当我打开pdf文件时：

```
Process.Start(filename); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T03:49:06.507

此外，除了使用其他解决方案之外，您还可以使用 WebBrowser 控件打开 Windows 窗体（或 WPF 窗口）并将其指向 PDF 文件。PDF 文件将在 Web 浏览器控件中打开。只需将 Windows 窗体属性设置为无边框最大化，这应该是在不弄乱进程的情况下获得所需内容的关键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T03:33:03.960

运行后，您可以使用[SendKeys](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send.aspx)发送`F11`或发送`CTRL+L`到 PDF 应用程序。

或者，Foxit 或 Adob​​e 可能支持命令行参数以全屏模式打开。如果您不介意更改为[SumatraPDF](http://blog.kowalczyk.info/software/sumatrapdf/free-pdf-reader.html)，我知道您可以通过`-presentation $file.pdf`- 在演示文稿（全屏）模式下打开 PDF 文件。有关详细信息，请参阅[手册](http://blog.kowalczyk.info/software/sumatrapdf/manual.html)。

# macos - 在 Mac Lion 上安装 Postgresql

> ID：10891144
> 
> 赞同：3
> 
> 时间：2012-06-05T03:22:35.037
> 
> 标签：macos, postgresql, homebrew

[我在ruby​​ on rails 教程](http://ruby.railstutorial.org/chapters/static-pages#code%3apages_controller_spec_exercise)中做一个练习，其中涉及安装 postgresql。按照教程中链接的rails cast的说明，我做了

```
brew install postgresql 
```

这出错了。在网上搜索，在一个[论坛](https://github.com/mxcl/homebrew/issues/10157)上找到了一个建议做的帖子

```
brew unlink ossp-uuid && brew link ossp_uuid 
```

我不知道这是为了什么。命令失败（我认为第一部分成功）。错误：

无法符号链接文件：/usr/local/Cellar/ossp-uuid/1.6.2/share/man/man3/uuid.3 /usr/local/share/man/man3 不可写。您应该更改其权限。

这是关于什么的？为什么我们需要创建这个符号链接？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T05:46:12.520

您不需要 sudo 来使用 brew [read here](https://github.com/mxcl/homebrew/wiki/Installation)。

主要问题是您自己对 /usr/local 文件夹执行这些操作的权限。试试这个（确保您以管理员角色登录）：

`sudo chmod go+w /usr/local`

然后再试一次：

`brew unlink ossp-uuid && brew link ossp-uuid`

和：

`brew install postgresql`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-05T03:56:49.410

您可能需要在命令之前使用 sudo。

或者，可以从其站点的安装程序安装 postgres： [Mac OS X 安装程序](http://www.postgresql.org/download/macosx/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-05T08:44:34.933

Postgresql 已经安装在 Lion 上。

# r - 如何在 R 包中自动加载数据？

> ID：10891146
> 
> 赞同：24
> 
> 时间：2012-06-05T03:23:13.767
> 
> 标签：r, package

这可能是一个简单的答案，已经回答了很多次。我只是缺乏寻找答案的术语。

我正在创建一个包。当包加载时，我想立即访问数据集。

所以可以说 DICTIONARY 是一个数据集。

我希望能够做`DICTIONARY`而不是`data(DICTIONARY)`让它加载。我该怎么做呢？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-05T04:46:14.143

来自 R-exts.pdf（[在线资源](https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Data-in-packages)）：

> 'data' 子目录用于存放数据文件，可以通过延迟加载或使用 data() 加载。（由“DESCRIPTION”文件中的“LazyData”字段进行选择：默认情况下不这样做。）

将以下内容添加到说明文件中即可：

```
LazyData: true 
```

# c++ - 未更改的 C++ 文件的目标代码在重新编译时发生更改的可能原因是什么？

> ID：10891151
> 
> 赞同：3
> 
> 时间：2012-06-05T03:24:01.987
> 
> 标签：c++, compiler-construction, operating-system

这真的不是我的问题。这是我在quora上发现的一个休眠问题。一个答案是一些头文件可能已经改变，但问题的作者声称他们没有。我很想听听这里的人怎么说:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T03:26:14.867

*   更改的头文件
*   不同的编译器
*   不同的命令行选项
*   目标代码中的时间戳
*   非确定性代码生成器或优化器
*   配置文件更改后的配置文件驱动优化
*   操作系统提供的服务变化引起的不确定性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T03:43:55.880

您没有提到平台，但如果它是 .NET，那么它可能与 Eric Lippert 在此处描述的 C# 编译器中发生的情况类似：http: [//ericlippert.com/2012/05/31/past -性能是未来结果的无保证/](http://ericlippert.com/2012/05/31/past-performance-is-no-guarantee-of-future-results/)

# silverlight - silverlight SaveFileDialog 不显示

> ID：10891152
> 
> 赞同：0
> 
> 时间：2012-06-05T03:24:04.780
> 
> 标签：silverlight, iis-7, windows-server-2008-r2

我有一个 silverlight 应用程序，我在其中使用 SaveFileDialog 它在开发/测试机器上运行良好，但是当我将它移动到客户端测试机器时，这是一个带有 Widnows Server 2008 的 VM，我将它部署在 IIS 上，并从同一台机器。

SaveFileDialog 不显示我正在通过 Citrix 访问 VM

知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T03:27:09.157

如果不是用户启动的 SaveFileDialog 将抛出 SecurityException，例如通过完成下载。我不确定这背后的逻辑，但请检查以确保 SaveFileDialog 始终直接从用户操作启动的 EventHandler 显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:40:06.247

谢谢约翰。实际上是Citrix问题，因为客户端可以看到saveFileDialog，但我看不到它。但最好检查一下 John 提到的关于检查安全异常的内容

# android - 适用于 Android 2.3+ 的软参考

> ID：10891154
> 
> 赞同：1
> 
> 时间：2012-06-05T03:24:16.557
> 
> 标签：android, soft-references

我有一个应用程序可以加载大量位图以形成一个大的位图。

我使用软引用来允许正确存储这些位图。您可以在 android OS < 2.3 上毫无问题地滚动它们但是，一旦您达到 2.3 或更高版本，Android 的软参考集合变得更加激进。由于发生这种情况，该应用程序在这些较新的手机上运行非常缓慢。

我在这里看到这是一个记录在案的问题：

[http://code.google.com/p/android/issues/detail?id=20015](http://code.google.com/p/android/issues/detail?id=20015)

有人知道解决这个问题的好方法吗？应用程序在较新的手机上运行得更差，这太荒谬了！谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:45:45.010

软引用和弱引用在 android 3.0 以上以不同的方式处理。所以最好不要将它们用于位图。您可以使用其他方法，如缩小位图、磁盘缓存、内存缓存等。有关如何处理位图的更多详细信息，请参阅[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

# asp.net - 多域的集成 Windows 身份验证

> ID：10891156
> 
> 赞同：13
> 
> 时间：2012-06-05T03:24:28.460
> 
> 标签：asp.net, iis, dns, windows-server-2003

我有一个带有集成 Windows 身份验证的域 A 用户的 Asp.net 网站。

现在来自域 B 的用户需要访问该网站。

但是B域用户在访问网站时会弹出窗口输入认证信息

我的问题是：

如何配置 IIS 或 Windows Server 以允许域 B 用户访问网站而无需弹出窗口进行身份验证，就像来自域 A 的用户一样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T07:36:00.500

1.  检查您是否配置了信任

通过尝试将域 B 中的域用户添加到 IIS 站点所在的文件系统来验证这一点。

1.  验证来自域 B 的正确用户组是否有权访问您的 IIS 站点所在的文件系统。（如果不使用域 B 中的域用户）。

2.  验证从域 B 进行测试的用户是否具有正确的组成员身份。

如果运行 Kerberos 身份验证。

如果您有 kerberos 票证，请使用命令“klist ticket”检查用户所在的客户端

# java - XACML 标识符是什么意思？

> ID：10891161
> 
> 赞同：1
> 
> 时间：2012-06-05T03:24:54.030
> 
> 标签：java, xml, xacml, xacml2

例如，“urn:oasis:names:tc:xacml:1.0:subject:session-start-time”是什么意思？我怎么知道会话开始时间的格式？是 yyyy-MM-dd 还是 yyyy/MM/dd？我在绿洲的文档中找不到任何信息。请告诉我，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T16:32:11.917

session-start-time 属性将表示在 subject-id 中标识的用户的会话何时开始。我猜这很可能是在用户进行身份验证时。

虽然规范没有明确说明属性是什么 DataType，但我会假设它是`http://www.w3.org/2001/XMLSchema#dateTime`类型。

您可以在此处找到此类型的定义：http: [//www.w3.org/TR/xmlschema-2/#dateTime](http://www.w3.org/TR/xmlschema-2/#dateTime)；一个例子是“2002-10-10T12:00:00-05:00”

# grails - 如何在带有 if-else 语句的 grails 中使用提交按钮？

> ID：10891165
> 
> 赞同：1
> 
> 时间：2012-06-05T03:25:11.737
> 
> 标签：grails, button, groovy, tags

我现在正在研究一个`grails project`. 我的`<g:submitButton>`标签有问题，我正在使用网络流。我想要做的是如果用户的输入为 1，则继续使用下一页`<g:submitButton>`，如果输入为 0，则显示一个带有选项 OK 和 Cancel 按钮的弹出窗口。如果单击 Ok 按钮，用户将重定向到某个页面，如果单击取消按钮，则相同。

有没有人试过这个？

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:15:54.813

我猜您的表单标签中需要一些 javascript 来实现此功能。搜索“html form onsubmit”，你会发现一些很好的资源。

# php - 将自己的断言添加到 phpUnit 时组织参数的最佳方式

> ID：10891169
> 
> 赞同：3
> 
> 时间：2012-06-05T03:25:29.500
> 
> 标签：php, phpunit

几乎所有的 phpUnit 断言都是三个参数：

1.  预期结果
2.  实际价值
3.  失败时打印的可选消息

（有些，例如`assertTrue()`，有一个隐含的预期结果，所以只有两个参数。）

但是，如果预期结果不那么干净怎么办？它可能是可选参数，也可能只是需要测试的值不止一个。作为一个具体的例子，我有`assertTimestamp($expected_time,$actual_time,$tolerance=0,$msg='')`容忍允许一点时钟漂移的地方。（我还使用它来测试数据库中创建的时间戳，以断言该记录是在过去 30 秒内创建的，即由当前单元测试运行中的前一个函数创建的。）

这看起来合理吗？即总是推`$msg`到最后，并保持*实际*作为第二个参数。`assertTag`有一个`isHTML`标志，最后出现在 . 之后`$msg`。

作为一个更复杂的例子，我有一个函数，它接受一个 json 字符串作为`$actual`参数。它运行`json_decode`，提取一些值，并检查每个值。我目前有这样的事情：

```
function assertJsonPersonFromDBResponse($name,$gender,$age,$actual,$expectSomething=false,$msg='') 
```

你会做不同的事情吗？我现在想知道是否最好将所有预期参数（包括可选标志）压缩到第一个参数中，这将是一个关联数组：

```
function assertJsonPersonFromDBResponse($expected,$actual,$msg='')
...
$this->assertJsonPersonFromDBResponse(array('name'=>'Darren','age'=>21,
    'gender'=>'M','expectSomething'=>true),$s); 
```

那感觉更干净。但是对于这种情况是否存在现有的约定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:24:05.113

我通过 phpunit 代码库看到的模式是：

```
[$expected (if needed)], $actual, $message = '', [other optional paramters] 
```

例如，看看[**`Framework/Assert.php file`**](https://github.com/sebastianbergmann/phpunit/blob/3.6/PHPUnit/Framework/Assert.php#L435)

```
public static function assertEquals(
    $expected, 
    $actual, 
    $message = '', 
    $delta = 0, 
    $maxDepth = 10, 
    $canonicalize = FALSE, 
    $ignoreCase = FALSE
) 
```

或者更准确地说，因为 $actual 可以由多个变量组成（例如类和属性）：

```
[$allExpectedParamsIfNeeded], $allActualParams, $message='', [$allOtherSwitches] 
```

例如：

```
public static function assertAttributeInternalType(
    $expected,
    $attributeName,
    $classOrObject,
    $message = ''
) 
```

或者

```
public static function assertSelectRegExp(
    $selector,
    $pattern,
    $count,
    $actual,
    $message = '',
    $isHtml = TRUE
) 
```

* * *

## 断言的一般建议：

尽量减少参数的数量并尽可能使用更多的断言函数：

```
$this->assertStuff($a, $b, true, false, 'Oh dear', 6, true); 
```

对我来说只是不可读和混乱。

有

```
$this->assertStuffForSpecificCaseWithSubcaseSix($a, $b, 'Oh dear'); 
```

至少在每个使用它的地方都是“内联文档”。

# windows - 如何在 linux bash 中恢复 windows chk-files 扩展

> ID：10891173
> 
> 赞同：3
> 
> 时间：2012-06-05T03:26:28.783
> 
> 标签：windows, linux, bash, file-recovery

扫描磁盘后，我在“found.000”之类的文件夹中有很多 CHK 文件，...

我可以使用 file 命令找出扩展名：

```
for i in /media/Daten/found.*/*.chk ; do file $i; done 
```

如何使用它来重建这些文件的所有文件扩展名？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T03:35:56.807

此技术不适用于所有文件。我曾经用它来帮助数据恢复。

```
for i in /media/Daten/found.*/*.chk; do mv "$i" "$i".$(grep $(file -bi $i | awk '{print $1}' | sed 's/;//') /etc/mime.types | head -1 | awk '{print $2}'); done 
```

它的工作方式是在命令中使用 mime 类型功能，`file`然后为它 greps /etc/mime.types，选择列表中的第一个扩展名，然后将文件重命名为该扩展名。

这个命令会进行批量重命名，它会先移动然后再提问，所以要 100% 确定你在正确的目录上运行它。

下次不要使用 chkdsk 来恢复文件。您可能会损坏它们，无法修复。chkdsk 将 OM NOM NOM 您的数据，然后打嗝。在 chkdsk 之前，请始终使用恢复软件取回所需的文件。

通常，这些文件被命名为 .CHK，而不是 .chk（仅供参考。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T22:19:11.200

要恢复特定文件类型，请先查看其中的内容。在 OS X 上测试：

```
file --mime -b /media/Daten/FOUND.*/*.CHK | sort | uniq

application/octet-stream; charset=binary
application/ogg; charset=binary
application/pdf; charset=binary
application/zip; charset=binary
audio/x-wav; charset=binary
image/jpeg; charset=binary
image/png; charset=binary
video/3gpp; charset=binary 
```

然后，对于您要保留的类型：

```
mkdir /tmp/renamed

for f in /media/Daten/FOUND.*/*.CHK
do file --mime $f \
  | perl -n -e \
  '/^([^.]*).*(3gpp|jpeg|ogg|png|wav)/ && print "$1.CHK /tmp/renamed/$1.$2\n"' \
  | xargs cp
done 
```

这使用`file --mime`（或`file -I`，或`file -i`在 Linux 上）来确定 MIME 类型，然后将带有文件名和 MIME 类型的行传递给 Perl，Perl 使用正则表达式来捕获基本名称（like `FILE0001`）和文件类型（like `jpeg`）并打印一行，如`FILE0001.CHK /tmp/renamed/FILE0001.jpeg`. 最后，该行被传递给`cp`.

（`\`在下一行继续单行命令。）

# objective-c - 如何实现 didSelectViewController

> ID：10891182
> 
> 赞同：3
> 
> 时间：2012-06-05T03:27:29.347
> 
> 标签：objective-c, uitabbarcontroller

当有人在标签之间切换时，我想捕捉事件。我的 appdelegate 文件中有以下两个函数：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UITabBarController * uitbc = [storyboard instantiateViewControllerWithIdentifier:@"tabbarcontroller"];
    uitbc.delegate = self;
    [self.window addSubview:uitbc.view];

    return YES;
}

- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
    NSLog(@"switching");
} 
```

但`NSLog(@"switching");`永远不会开火。`uitbc.delegate = self;`xcode 对“将 appdelegate const__strong 传递给不兼容类型 id 的参数”这一行发出警告。

我究竟做错了什么？我只是按照此处找到的公认答案，除了我正在实例化我的 tabbarcontroller 表单故事板：

[如何获取在iphone上切换标签菜单的事件](https://stackoverflow.com/questions/2041982/how-to-get-the-event-that-switch-tab-menu-on-iphone)

**更新** 根据 skram 的建议，我为我的 appdelegate 写了这个，但 NSLOG(Switching) 仍然没有触发：

```
@interface johnAppDelegate : UIResponder <UITabBarControllerDelegate> 
```

我还更新了我的 didFinishLauchingWithOptions：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
tabBarController = self.window.rootViewController.tabBarController;
tabBarController.delegate = self;
[window addSubview:tabBarController.view];
} 
```

好在没有崩溃。我也不再发出关于不兼容类型的警告。但是，didSelectViewController 仍然没有触发。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T00:45:17.720

在我的 appdelegate.h 文件中，我更改了行

```
@interface wscAppDelegate : UIResponder <UIApplicationDelegate> 
```

到

```
@interface wscAppDelegate : UIResponder <UIApplicationDelegate,UITabBarControllerDelegate> 
```

然后在 viewDidLoad 函数的 CustomTabBarController 中，我添加了以下几行：

```
wscAppDelegate *appDelegate = (wscAppDelegate *)[[UIApplication sharedApplication] delegate];
self.delegate = appDelegate; 
```

然后在 appdelegate.m 文件中，我添加了这个函数

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{

NSLog(@"hooray this works");

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-07T07:39:43.587

我也为此苦苦挣扎，但我的 UITabBarNavigationController 离 AppDelegate 设置它还很远，真正使它工作的唯一方法**不是**在 UITabBarController 子类本身的 viewDidLoad 中执行它，而是在它的：

```
-(void)viewDidLayoutSubviews {
    [ super viewDidLayoutSubviews ];
    self.delegate = self;
} 
```

这解决了它。或者，您可以在任何选项卡栏控制的视图控制器中执行此操作，但这感觉不对。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T03:40:12.567

您需要您的 AppDelegate 符合**`UITabBarControllerDelegate`**协议。见下文..

```
@interface YourAppDelegate : UIResponder <UITabBarControllerDelegate> 
```

# python - Django 通用视图基于日期的 URLconf

> ID：10891183
> 
> 赞同：0
> 
> 时间：2012-06-05T03:27:40.463
> 
> 标签：python, django, datetime, django-generic-views

试图自学 Django 但遇到了障碍。通用视图似乎是一个好主意，但我个人觉得文档有时有点神秘（也许我很拘谨）。所以我一直在尝试使用基于日期的泛型视图，特别是ArchieveIndexView。

我什至尝试过一些非 djangoproject.com 的示例，但仍然有问题。我使用了[本网站提供的示例。](http://martinogden.me/2011/03/27/quick-look-django-13-class-based-views/)

这是我目前的`project/urls.py`.
我也在这一点上，不担心模式匹配，只是想让它工作。

```
from django.conf.urls import patterns, include, url
from django.views.generic.dates import ArchiveIndexView
from blog.models import Entry

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^$', ArchiveIndexView.as_view('date_field': 'pub_date', 'queryset': Entry.objects.all())),

    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    url(r'^admin/', include(admin.site.urls)),
) 
```

使用此设置，我在描述 ArchiveIndexView 类的行中不断收到 Invalid Syntax 错误。如果我注释掉这一行，问题就会消失。如果我将 URL 与其相应的应用程序解耦，我会得到同样的错误。

该错误表明我只是有一些不合适的东西，逗号或其他东西，但我还没有得出结论它是什么。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:01:12.117

使用下面的代码

```
from django.conf.urls import patterns, include, url
from django.views.generic.dates import ArchiveIndexView
from blog.models import Entry

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^$', ArchiveIndexView.as_view({'date_field': 'pub_date', 'queryset': Entry.objects.all()})),

    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    url(r'^admin/', include(admin.site.urls)),
) 
```

您似乎忘记了 url(r'^$', ArchiveIndexView.as_view('date_field': 'pub_date', 'queryset': Entry.objects.all())) 行中 dict 所需的 {} 大括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T11:59:54.533

啊。由于湿婆的一点推动，我解决了我自己的问题。

字典有效，但仅适用于`extra_content`论点。它就像在我试图复制的网站上完成的那样，并在文档中添加了额外的内容，所以我一直忽略这个明显的问题。

```
from django.conf.urls import patterns, include, url
from django.views.generic.dates import ArchiveIndexView
from blog.models import Entry

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^$', ArchiveIndexView.as_view(date_field='pub_date', queryset=Entry.objects.all())),

    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    url(r'^admin/', include(admin.site.urls)),
) 
```

只需要在上面睡觉...

# webrequest - HttpWebRequest 模拟来自 firebug 的请求总是失败

> ID：10891188
> 
> 赞同：0
> 
> 时间：2012-06-05T03:28:30.807
> 
> 标签：webrequest

我有一个古怪的问题。我正在尝试使用 WebRequest 和 WebClient 自动访问网站。我在 Firebug 中观察到了所有发布请求标头键值对和发布的数据字符串（请求标头和发布选项卡）。然后我用 WebRequest 模拟了这样的请求，并将所有的 header 参数和发布的数据放在那里。但是，当我从这个请求实例执行 GetResponse() 时，我总是得到一个错误页面，上面说缺少一些 sessionID。

实际上，我已经注意将先前（打开登录页面的第一步）响应的会话 cookie 放在请求的 Header 的 cookie 字段中。而且我可以通过模拟请求登录页面（第一页）来获得正确的响应，但无法通过此身份验证页面。我的post数据是userid=John&password=123456789&domain=highmark。并且浏览器执行的认证页面请求每次都成功。

我是否在请求中遗漏了一些萤火虫可能无法显示的内容。如果是，您能否给我一些关于可以检查浏览器发送的整个请求的工具的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:49:34.957

我已经解决了这个问题。问题是我设置了 httpWebRequest 实例的 AllowAutoRedirect=true。因此，效果是当我从服务器获得第一个响应时，httpWebRequest 将不断发出另一个请求，请求在响应标头的 Location 字段中回复的不同 url。

HttpWebRequest 类的缺陷是当它被重定向时，它没有在下一个请求头中包含 Set-Cookies(Response's Header Field) 的cookie，因此服务器会拒绝这样的页面请求并可能再次重定向到另一个不同的页面.

并且 httpWebRequest.GetResponse() 方法仅在设置 AllowAutoRedirect=true 下返回最后响应的页面。我得到了与我预期完全不同的反应。

同样在这个解决过程中，我需要感谢一个区分 Http Traffic 检查工具：**IEInspector Http Analyzer** (http://www.ieinspector.com/httpanalyzer/)。这个工具的最大特点是它不仅可以检查来自浏览器的 http 流量，还可以检查**你的进程的 httpWebRequest 所做的**。它还可以以文本格式显示这些请求和响应的原始流。虽然是商业软件，但可以试用15天。我对它告诉我的内容（格式良好的细节）非常满意，我也喜欢购买它。

# python - Django 整数和小数域乘法

> ID：10891196
> 
> 赞同：0
> 
> 时间：2012-06-05T03:29:44.713
> 
> 标签：python, django

我试图弄清楚如何将十进制字段值乘以整数字段值。

这是我的模型：

```
class OrderItem(models.Model):
    order = models.ForeignKey(Order, editable=False)
    product = models.ForeignKey('products.Product')
    qty = models.IntegerField()
    original_price = models.DecimalField(max_digits=20, decimal_places=2)
    sale_price = models.DecimalField(max_digits=20, decimal_places=2)
    tax = models.DecimalField(max_digits=20, decimal_places=2)
    total = models.DecimalField(max_digits=2, decimal_places=2, null=True, blank=True, editable=False)
    total_tax = models.DecimalField(max_digits=2, decimal_places=2, null=True, blank=True, editable=False)
    picked = models.IntegerField(null=True, blank=True)
    user = models.ForeignKey('auth.User', editable=False)
    created = models.DateTimeField(auto_now_add=True)
    modified = models.DateTimeField(auto_now=True) 
```

我正在尝试将“sale_price”列与“qty”列相乘，但出现以下错误：

```
Invalid literal for Decimal: u'180.00180.00' 
```

使用此代码：

```
def orderItemPs(sender, instance=False, **kwargs):
    #figure out the total
    instance.total = decimal.Decimal(int(instance.qty) * instance.sale_price)
    instance.total_tax = decimal.Decimal(int(instance.qty) * instance.tax)
    #disconnect
    post_save.disconnect(orderItemPs, sender=OrderItem)
    instance.save()
    #reconnect
    post_save.connect(orderItemPs, sender=OrderItem) 
```

我不确定我做错了什么。

干杯，Sn0rcha！

**更新：**更多信息。

我已将触发 post_save 函数的代码更改为以下代码。

```
order_item = OrderItem(order=form, product=Product.objects.get(pk=products[i]), qty=int(qtys[i]), original_price=decimal.Decimal(original_prices[i]), tax=decimal.Decimal(taxs[i]), user=request.user, sale_price=decimal.Decimal(sale_prices[i])) 
```

以确保我在保存模型之前正确地转换了表单值。我将后保存功能中的两行更改为：

```
instance.total = decimal.Decimal(instance.qty * instance.sale_price)
instance.total_tax = decimal.Decimal(instance.qty * instance.tax) 
```

但是现在我得到了错误：

```
quantize result has too many digits for current context 
```

我正在使用 POSTGres 并不是说​​它结束时是一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:55:17.170

我猜`int(instance.qty)`is`2`和`instance.sale_price`is `'180.00'`-- 一个字符串，而不是一个数值，当乘以 2 时，它只是复制了字符串：

```
>>> decimal.Decimal(2 * '180.00')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Frameworks/EPD64.framework/Versions/7.2/lib/python2.7/decimal.py", line 548, in __new__
    "Invalid literal for Decimal: %r" % value)
  File "/Library/Frameworks/EPD64.framework/Versions/7.2/lib/python2.7/decimal.py", line 3844, in _raise_error
    raise error(explanation)
decimal.InvalidOperation: Invalid literal for Decimal: '180.00180.00' 
```

是如何`sale_price`设置的？我希望 Django 将其转换为十进制，但它有可能以某种方式存储为字符串吗？

# c++ - C++ 类 - 我的程序有什么问题？

> ID：10891197
> 
> 赞同：0
> 
> 时间：2012-06-05T03:29:48.207
> 
> 标签：c++, class, linked-list, this

Insert 是一种将项目附加到我的链表末尾的方法。

无法弄清楚如何为 Node 为空的情况编写代码，我只想添加它。

```
struct Node{
       int data;
       Node *next;

       Node(int data):data(data),next(NULL){}

       void insert(int data){
            if (this==NULL){
               this=new Node(data); // compiler is complaining here.
                                    // how would I go about setting the value of this (which is presently NULL) to a new Node?
            }
       }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T03:36:21.233

你不能给***这个***指针赋值，这是一个特殊的关键字，应该总是指向一个有效的内存块。通过查看您的使用情况，您是否想说：

```
void insert(int data){
            if (!next){
               next = new Node(data);

            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T03:38:19.167

像这样的东西：

```
void insert(int data)
{
    Node* newNode = new Node(data);

    if (next!=NULL)
        newNode->next = next;
    next = newNode;
} 
```

您不能直接分配给“this”；您需要考虑的是如何表示一个空列表，很可能是：

```
Node* head = 0; 
```

所以你添加第一个节点

```
head = new Node(data); 
```

# android - 应用程序发明者离线

> ID：10891198
> 
> 赞同：0
> 
> 时间：2012-06-05T03:29:51.123
> 
> 标签：android, download

Android有一个名为appinventor的开发工具，你必须在线才能使用它还是有下载或离线选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T03:44:32.330

App Inventor 被麻省理工学院接管，它的[新家就在这里](http://www.appinventor.mit.edu/)，我几乎可以肯定，至少它过去需要互联网连接，因为它是在浏览器中运行的。因此，除非您在本地网络上使用托管您需要互联网访问的服务器。

我最近没有玩过它，但我只是偷看了它，它看起来确实是一样的（在浏览器中操作，将所有内容同步到云）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T12:16:53.467

App Inventor 2 可以在您的机器上本地运行。您必须分叉并克隆 Git 存储库。

[本地设置 App Inventor 2 的说明](http://josmas.github.io/contributingToAppInventor2/#/)

# python - 如何返回在基于 Python 的 TKinter 中按下的按钮实例

> ID：10891200
> 
> 赞同：2
> 
> 时间：2012-06-05T03:29:56.367
> 
> 标签：python, tkinter

当按下按钮时，我正在尝试访问 Tkinter 中按钮的标签。这涉及返回对按下的目标按钮的引用。

目前，由于我必须输入参数，这是通过将`command`选项绑定到`lambda`函数来完成的，即

```
button['command'] = lambda: fun_to_call(arg) 
```

有没有办法返回实例？我检查了 TKDocs 并没有涵盖。另外，我尝试使用单独的字符串列表来获取标签。但是，它只返回列表的最后一个元素（我相信这是由于 lambda 函数在创建按钮实例时没有将特定元素绑定到列表。我之前使用此列表来生成按钮列表。）

简而言之，一个基于事件的函数绑定到返回其父级（按下的按钮）的按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T03:55:05.593

```
def add_callback(control, fun):
    def inner():
        return fun(control)
    control['command'] = inner

...

def test_callback(button):
    print "button instance:", button

b = Button(text="click me")
add_callback(b, test_callback) 
```

更具声明性：

```
def with_callback(control, fun):
    def inner():
        return fun(control)
    control['command'] = inner
    return control

...
b = with_callback(Button(text="click me"), test_callback) 
```

# php - PHP MySQL - 当一个或多个字段值更改时更新数据库的简单方法

> ID：10891202
> 
> 赞同：0
> 
> 时间：2012-06-05T03:30:12.313
> 
> 标签：php, mysql

我对数据库更新活动有一点问题。

**案例研究**：

我使用 PHP 编辑创建了一个表单，并执行查询以检索要更新的记录的值。脚本节选：

```
<?php
  $row = mysql_fetch_assoc(mysql_query("SELECT id, field_1, field_2 FROM mytable WHERE id = $editid"));
?>

 ...

<form action="" method="post">
  FIELD 1 <input type = "text" name = "f1v" value = "<? Php echo $ row ['field_1'];?>" />
  FIELD 2 <input type = "text" name = "f2v" value = "<? Php echo $ row ['field_2'];?>" />
  <input type="submit" />
</form>

....
// When the form posted

if ($_POST)
{
   $f1v = $ _POST['f1v'];
   $f2v = $ _POST['f2v'];

   mysql_query("UPDATE mytable SET field_1 = '$f1v', field_2 = '$f2v' WHERE id = $editid") or die ();

   // Redirect form
} 
```

在这种情况下，我希望在提交表单时，有活动来检查一个或多个字段值是否发生变化。它的逻辑大概是这样的：

```
if ($ _POST)
{    
    // Compare
   if the submitted value is different from the existing value in the record
   {
      Updated record
   }
   else
   {
      Do not update record
   }       
    // Redirect form
} 
```

你有什么简单的方法吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T03:36:21.937

不要费心检查。只需确保条目有效并将其放入即可。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T04:07:53.583

使用字段的当前值保留两个隐藏字段。提交表单后，检查提交的值是否与隐藏字段值不同。

# javascript - 匿名函数中的变量范围

> ID：10891203
> 
> 赞同：0
> 
> 时间：2012-06-05T03:30:35.540
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 函数中的匿名函数在 JavaScript 中填充数组，`getJSON()`如下所示。

```
$(document).ready(function() {

    function Link(url, title) {
        this.url = url;
        this.title = title;
    }
    var links = [];

    $.getJSON("http://reddit.com/r/programming/.json?jsonp=?", function(data) {
        $.each(data.data.children, function(i, item) {
            var title = item.data.title;
            var url = item.data.url;

            links.push(new Link(url, title));
        })
    });

    for(var i=0; i< links.length; i++) {
        var output = "<a href='" + k + "'>" + links[k] + "</a>";
        $('<p>' + link + '</p>').appendTo('#content');
    }

}); 
```

但是，当我点击 for 循环时，链接数组显示为空。这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T03:33:53.690

试试看：

```
 $(document).ready(function() {

        function Link(url, title) {
            this.url = url;
            this.title = title;
        }

        $.getJSON("http://reddit.com/r/programming/.json?jsonp=?", function(data) {
            var links = [];
            $.each(data.data.children, function(i, item) {
                var title = item.data.title;
                var url = item.data.url;

                links.push(new Link(url, title));
            })
            for(var i=0; i< links.length; i++) {
                var output = "<a href='" + k + "'>" + links[k] + "</a>";
                $('<p>' + link + '</p>').appendTo('#content');
            }
        });

    }); 
```

您的循环可能在您的回调之前执行；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T03:35:16.663

那是因为`$.getJSON`是异步方法。即使在`$.getJSON`到达`for`循环之后代码执行也会继续，此时您的异步请求尚未完成。您应该在`$.getJSON`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T03:39:32.410

这个 jsFiddle [http://jsfiddle.net/cArYg/2/](http://jsfiddle.net/cArYg/2/)显示了在 getJson 回调之前发生的迭代

# c# - 用另一个填充下拉列表

> ID：10891208
> 
> 赞同：1
> 
> 时间：2012-06-05T03:31:49.167
> 
> 标签：c#, linq, linq-to-xml

如果我们在 DDL 中选择国家名称，我将用另一个 DDL 填充相应的状态必须出现在另一个 DDL 下面是我的代码

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    string  st = (DropDownList1.SelectedIndex).ToString();

    XDocument main = XDocument.Load((Server.MapPath(@"XMLFile1.xml")));

    var query = from user in main.Descendants("country")
                 where st == user.Element("state").Value
                 select user;

    DropDownList2.DataSource = query;
    DropDownList2.DataBind();

} 
```

但我无法在另一个 DDL 中填充状态，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:19:37.567

我已将您的查询更改为：

```
var query = from user in main.Root.Descendants("country")
            where user.Elements("state").Any() && user.Elements("state").First().Value == st 
            select user; 
```

请注意，我取了 Root 元素的后代并检查国家/地区是否存在 state 元素，然后使用给定值检查 state 值。如果找到匹配，将选择国家元素。

而且这将返回 XMleelements，您不能直接将它们绑定到`DataSource`，从该查询中您可以选择国家名称和其他内容，最后将其转换为列表或数组。上面的结果可以直接绑定到 DropDownList

这是示例 xml：

```
<?xml version="1.0" encoding="utf-8" ?>
<countries>
  <country>Test1</country>
  <country name ="A">
    <state>Test2</state>
  </country>
  <country name ="B">
    <state>Test2</state>
  </country>
  <country name ="C">
    <state>Test3</state>
  </country>
</countries> 
```

加载xml

```
XDocument main = XDocument.Load("input.xml"); 
```

从国家元素属性中获取国家名称

```
var countryNames = (from user in main.Root.Descendants("country")
                    where user.Elements("state").Any() && user.Elements("state").First().Value == "Test2"
                    select user.Attribute("name").Value).ToList(); 
```

## 编辑：

你的 XML：

```
<country>
  <name>India</name>
  <state>
    <text>Maharashtra</text>
    <text>Kashmir</text>
    <text>Goa</text>
  </state>
</country> 
```

更新代码：

```
var countryNames = (from user in main.Descendants("country")
                    where user.Elements("state").Descendants("text").Any(s => s.Value == st)
                    select user.Element("name").Value).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:36:02.680

改用这个：

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
     string  st = DropDownList1.SelectedValue;

     XDocument main = XDocument.Load((Server.MapPath(@"XMLFile1.xml")));

    var query = from user in main.Descendants("country")
                 where st == user.Element("state").Value
                 select user;

    DropDownList2.DataSource = query;
    DropDownList2.DataBind();

} 
```

您使用的是项目的索引 (1/2/3/4/5)，而不是值，我对其进行了更改，以便您使用值（显示成员）而不是该项目的索引。

# css - -webkit-transform 有两个背景层？

> ID：10891209
> 
> 赞同：0
> 
> 时间：2012-06-05T03:31:55.157
> 
> 标签：css, hardware-acceleration, background-position, webkit-transform

我有一个具有两个半透明背景的 div 动画：

```
/* The animated background DIV. */
@-webkit-keyframes wind /*Keyframes*/
{
    0%
    {
        background-position: 0px 0px, 0px 0px;
    }
    100%
    {
        background-position: 370px 370px, 424px 242px;
    }
} 
```

你注意到逗号了吗？这是因为我用

```
#animatedBkg
{
    background-image: url('1.png'), url('2.png');
} 
```

这两个文件都包含 Alpha 通道。

现在，我想在 iPhone 上加速这段代码。因此，我已将 CPU 加载程序替换`background-position`为`-webkit-transform: translate()`：

```
/* The animated background DIV. */
@-webkit-keyframes wind /*Keyframes*/
{
    0%
    {
        -webkit-transform: translate(0px, 0px), translate(0px, 0px);
    }
    100%
    {
        -webkit-transform: translate(370px, 370px), translate(424px, 242px);
    }
} 
```

它根本不起作用。但是如果我删除逗号，两个 bkg 层都会同步移动（似乎只有第一个`translate()`有效），但**更**平滑。实际上，速度差异太大了，我无法返回`background-image`。

除了制作两个`divs: #animatedBkg1`和之外还有其他选择`#animatedBkg2`吗？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:27:44.980

好吧，因为翻译是*移动一个对象*，而背景位置是*一个对象属性*，所以看起来需要 2 个 div。这意味着#animatedBkg1 和#animatedBkg2。

# javascript - 从对象数组中获取对象

> ID：10891210
> 
> 赞同：2
> 
> 时间：2012-06-05T03:32:00.593
> 
> 标签：javascript

如果我有一个看起来像这样的数组；

```
markers[56] = { label: "One" };
markers[62] = { label: "Two" };
markers[87] = { label: "Three" };
markers[125] = { label: "Four" }; 
```

现在我有一些 JS；

```
for (var thisMarker in markers) {
  //What goes here so I can access the "label" property?
} 
```

我知道这很简单，但稍后会有更多属性添加到对象中，而不仅仅是“标签”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T03:34:17.017

我相信你可以像这样访问它，

```
for (var thisMarker in markers) {
  alert(markers[thisMarker].label);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:38:55.987

```
for(var thisMarker in markers){
//this will give you the label-     markers[thisMarker].label 
} 
```

# database - Redis：如何设置一个键等于另一个键的值？

> ID：10891213
> 
> 赞同：11
> 
> 时间：2012-06-05T03:32:19.690
> 
> 标签：database, redis

REDIS 中是否有任何快速命令可以让我执行以下操作

我想将键 Y 的值设置为等于键 X 的值。

我该如何从 Redis Client 执行此操作。

我使用标准的 Redis-cli 客户端。

基本上我正在寻找以下等价物 -

```
 Y.Val() = X.Val() 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-06T13:45:50.247

您可以使用 Lua 脚本执行此操作：

```
redis.call('SET', KEYS[2], redis.call('GET', KEYS[1])); return 1; 
```

1.  KEYS1 是源密钥
2.  KEYS2 是目标键

下面的示例使用[SCRIPT LOAD](http://redis.io/commands/script-load)创建脚本并使用[EVALSHA](http://redis.io/commands/eval)调用它并传递以下参数：

1.  从脚本加载返回的 SHA1
2.  a 2 表示将要传递的键的数量
3.  源密钥
4.  目标键。

输出：

```
redis 127.0.0.1:6379> set src.key XXX
OK
redis 127.0.0.1:6379> get src.key
"XXX"
redis 127.0.0.1:6379> SCRIPT LOAD "redis.call('SET', KEYS[2], redis.call('GET', KEYS[1])); return 1;"
"1119c244463dce1ac3a19cdd4fda744e15e02cab"
redis 127.0.0.1:6379> EVALSHA 1119c244463dce1ac3a19cdd4fda744e15e02cab 2 src.key target.key
(integer) 1
redis 127.0.0.1:6379> get target.key
"XXX" 
```

与简单地执行 GET 然后 s SET 相比，它似乎确实有很多东西，但是一旦您加载了脚本（并记住了 SHA1），您就可以重复使用它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-10-11T07:32:41.397

如果您不想加载脚本，那么下面将作为单个命令工作。

```
 127.0.0.1:6379> eval "return redis.call('SET', KEYS[2], redis.call('GET', KEYS[1]))" 2 key1 key2
   OK 
```

请注意，应该已经设置了 key1 值，否则您将收到以下错误

> Lua redis() 命令参数必须是字符串或整数

所以检查如下并设置

```
127.0.0.1:6379> GET key1
(nil)
127.0.0.1:6379> SET key1 hello
OK 
```

现在它将起作用。

如果您想将地图复制到另一个新的地图键

```
eval "return redis.call('HMSET', KEYS[2], unpack(redis.call('HGETALL', KEYS[1])))" 2 existingMapKey newMapKey 
```

另一种方法是在插入时间本身时，您可以使用 MSET 将值插入两个键。

```
redis> MSET key1 "Hello" key2 "Hello"
"OK"
redis> GET key1
"Hello"
redis> GET key2
"Hello" 
```

当然，这不会解决已创建密钥时的复制问题。

另请注意，在 redis 中，没有办法不止一个键引用同一个值对象。所有这些解决方法都会创建重复的值对象。因此，如果其中一个值被更新，将不会反映在另一个值对象中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-04-06T12:30:26.280

从 6.2.0 开始，您有一个 COPY 命令：

[https://redis.io/commands/copy](https://redis.io/commands/copy)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T03:38:49.567

不，没有快速命令可以做到这一点。您必须先`GET`获取源键的值，然后再`SET`获取新键的值。

来源：[http ://redis.io/commands#string](http://redis.io/commands#string)

# c# - 带有线条的 C# 组合框

> ID：10891214
> 
> 赞同：2
> 
> 时间：2012-06-05T03:32:27.240
> 
> 标签：c#, winforms

这是与我之前所做的不同的方法。

在我的组合所有者绘制的组合框中，绘制 3 条线（实线、虚线、虚线）以使用从较早的 colpr 选择器下拉列表中选择的颜色进行绘制

```
this.DrawMode = DrawMode.OwnerDrawVariable;
            this.DropDownStyle = ComboBoxStyle.DropDownList;
     protected override void OnDrawItem(DrawItemEventArgs e)
        {
            e.DrawBackground();  
            int startX = e.Bounds.Left + 5;
            int startY = (e.Bounds.Y);
            Point p1=new Point(startX,startY);
            int endX = e.Bounds.Right - 5;
            int endY = (e.Bounds.Y);
             ComboBoxItem item = (ComboBoxItem)this.Items[e.Index];
            Point p2=new Point(endX,endY);
            base.OnDrawItem(e);
            Pen SolidmyPen = new Pen(item.foreColor, 1);
            Pen DashedPen = new Pen(item.foreColor, 1);
            DashedPen.DashStyle = System.Drawing.Drawing2D.DashStyle.Dash;
            Pen DashDot = new Pen(item.foreColor, 1);
            DashDot.DashStyle = System.Drawing.Drawing2D.DashStyle.DashDot;
           // Pen DashedPen = new Pen(item.foreColor, (Int32)this.Items[e.Index]);

            Bitmap myBitmap = new Bitmap(item.Picture);
            Graphics graphicsObj;
            graphicsObj = Graphics.FromImage(myBitmap);
            switch (e.Index)
            {
                case 0:
                    graphicsObj.DrawLine(SolidmyPen, p1, p2);
                    break;
                case 1:
                    graphicsObj.DrawLine(DashedPen, p1, p2);
                    break;
                case 2:
                    graphicsObj.DrawLine(DashDot, p1, p2);
                    break;

            } 
```

这就是我想要做的。在组合框中绘制 3 条线（实线、虚线、虚线）。

我在组合框中看不到任何线条，除了一些蓝色是选定的颜色

感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T11:26:09.093

尝试这个。

我启动了一个新的 winforms 应用程序。创建了一个基于 ComboBox 的类，添加了您的代码并对其进行了一些修改。我认为您的主要问题在于您的位图部分。您创建一个新位图，然后在其上绘制，但您从不使用您创建的位图。如果您希望保留您创建的代码，您必须添加到方法 item.Picture=myBitmap 的末尾。但我认为这会再次调用 ondrawitem 并且您将处于无限循环中。无需根据 item.Picture 创建图形对象，只需使用在 DrawItemEventArgs 中为您创建的图形对象。

```
e.Graphics 
```

这就是我所做的，我想我清理了一下。您可能已经知道，但您应该始终使用 {..} 将钢笔、画笔和图形包裹起来，就像我在下面演示的那样。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }
}

public class MyComboBox : ComboBox
{
    public MyComboBox()
    {
    this.DrawMode = DrawMode.OwnerDrawVariable;
        this.DropDownStyle = ComboBoxStyle.DropDownList;
    }
    protected override void OnDrawItem(DrawItemEventArgs e)
    {
        e.DrawBackground();
        //I removed you int startX... endy... stuff, unless you want to keep it for readability there is no need
        Point p1 = new Point(e.Bounds.Left + 5, e.Bounds.Y + 5);
        Point p2 = new Point(e.Bounds.Right - 5, e.Bounds.Y + 5);

        //I am not sure why you would want to call the base.OnDrawItem, feel free to uncomment it if you wish though
        //base.OnDrawItem(e);

        switch (e.Index)
        {
            case 0:
                using ( Pen SolidmyPen = new Pen(e.ForeColor, 1))
                e.Graphics.DrawLine(SolidmyPen, p1, p2);
                break;
            case 1:
                using (Pen DashedPen = new Pen(e.ForeColor, 1))
                {
                    DashedPen.DashStyle = System.Drawing.Drawing2D.DashStyle.Dash;
                    e.Graphics.DrawLine(DashedPen, p1, p2);
                }
                break;
            case 2:
                using (Pen DashDot = new Pen(e.ForeColor, 1))
                {
                    DashDot.DashStyle = System.Drawing.Drawing2D.DashStyle.DashDot;
                    e.Graphics.DrawLine(DashDot, p1, p2);
                }
                break;

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T18:24:04.313

我使用类似的方法来绘制一个组合框。但是 GDI+ 不断抛出异常。这适用于 Windows XP，但不适用于 Windows 7。

所以我不得不用一个hack来修复它。

我添加了一个计时器来触发一个事件，在表单最初显示 100 毫秒后。此事件显示组合框列表中的第一项。

```
private void timer1_Tick(object sender, EventArgs e)
{
    // Use a short 100 ms delay before showing the default items 
    // in the dropdown lists
    predefinedComboBox.SelectedIndex = 0;

    // Disable the timer
    timer1.Enabled = false;
} 
```

布局事件为时过早。控件尚未准备好绘制。所以抛出了异常。我不确定可以使用哪些其他事件来达到预期的效果。

# java - 如何使用 bash 在 linux 系统上构建/运行 java 项目？

> ID：10891216
> 
> 赞同：2
> 
> 时间：2012-06-05T03:33:01.777
> 
> 标签：java, linux, bash

所以我现在在 intellij 有一个 java 项目。我试图让它在 linux 系统上通过 ssh 运行。

我已经上传了类文件，但是除非我取出所有包声明并重建项目，否则该项目将不会运行。

使用 bash 构建/运行 java 项目的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:21:35.850

确保您的一个 java 文件中有一个入口 main 方法，然后使用 java xxxx -cp yourjarpaths 启动您的程序。你也可以使用ant或者maven来启动你的项目，在bash中，你可以运行“ant xxx”或者“maven xxxx”来启动jvm

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T04:26:49.873

虽然您可以使用命令行使用[javac](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html)和[java](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html)命令构建和运行 java 程序，但您应该考虑为您的项目使用[Maven](http://maven.apache.org/)或[Ant](http://ant.apache.org/)或任何其他构建管理器。当您开始在项目中拥有外部依赖项时，这将特别有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T03:39:08.947

运行 java 程序的唯一方法是调用[java](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/java.html)命令行。

构建它是javac，但如果你上传了类文件，这意味着它已经编译了

# delphi - 将附件添加到绑定到 Evernote 电子邮件地址的电子邮件会破坏带有 Indy TIdSMTP 组件的 HTML 内容类型声明

> ID：10891223
> 
> 赞同：3
> 
> 时间：2012-06-05T03:33:49.400
> 
> 标签：delphi, smtp, evernote, indy-9

我有一个 Delphi 6 应用程序，它生成电子邮件，我发送到我的 Evernote 电子邮件地址，这是一个用于通过电子邮件发送文档的特殊电子邮件地址，以便它们自动存储到我的 Evernote 帐户中。

**我已经使用 Indy 9.x TIdSMTP**组件成功创建了 HTML 文档并将它们发送到我的 Evernote 电子邮件地址。我将**Content-Type**设置为' *text/html* '。只要*我不*向电子邮件添加任何附件，它就可以正常工作。一旦我添加了附件，关于生成的电子邮件的某些内容就会使 Evernote 网络界面将电子邮件解释为**原始 HTML**. 换句话说，我在文档显示区域中看到原始 HTML，就好像我在浏览器中完成了“查看源代码”一样，而不是看到呈现的网页。我添加的电子邮件附件是一个 AVI 文件和一个 WAV 文件（如果重要的话）。当我添加附件时，它们都正确显示在 Evernote 网络显示区域的电子邮件底部。

重复一遍，只要我不添加附件，文档就会在 Evernote 网络界面中显示为漂亮的网页。如果我添加附件，我会看到原始 HTML。谁能建议我可以尝试解决此问题的方法？我在下面附上了我用来将生成的文档发送到我的 Evernote 电子邮件地址的代码。**名为body**的变量包含一个完全格式化的 HTML 文档。

**更新**：我将电子邮件发送到非 Evernote 电子邮件地址，以便我可以看到原始电子邮件消息。我发现添加附件会使 TIdSMTP 将它生成的多部分电子邮件的第一部分的 Content-Type 更改回“text/plain”，尽管事实上我在代码中将其设置为“text/html”时我创建消息。我将查看 Indy 的源代码，看看我是否能找出问题所在。

```
function easySendEmail(
                theIdSmtp               : TIdSmtp;
                destEMailAddress        : string;
                subject                 : string;
                body                    : string;
                emailServerSettings     : TEmailServerSettingsRecord;
                aryAttachmentFilenames  : TDynamicStringArray;
                connectTimeOut_ms       : integer;
                bUseEHLO                : boolean;
                authLoginType           : TAuthenticationType): boolean;
var
    IdMsg: TIdMessage;
    aryAttachments: TDynamicIdAttachmentArray;
    i: integer;
begin
    aryAttachments := nil;
    IdMsg := nil;

    destEMailAddress := Trim(destEMailAddress);

    if destEMailAddress = '' then
       raise Exception.Create('(TframeEmailServerSettings.easySendEmail) The destination E-mail address is empty.');

    subject := Trim(subject);

    if subject = '' then
        raise Exception.Create('(TframeEmailServerSettings.easySendEmail) The subject line is empty.');

    body := Trim(body);

    if body = '' then
        raise Exception.Create('(TframeEmailServerSettings.easySendEmail) The message body is empty.');

    try
        with emailServerSettings do
        begin
            // Build a test message and send it.
            IdMsg := TIdMessage.Create(nil);
            IdMsg.Recipients.EMailAddresses := destEMailAddress;
            {
                Most SMTP servers require the sending E-mail address as the
                user name for the authentication.  However, if we
                encounter one that doesn't work this way then re-using
                the authentication user name as the From address
                will not work.
            }
            IdMsg.From.Name    := APPLICATION_NAME_EVERMAIL;
            IdMsg.From.Address := user_name;
            IdMsg.Subject := subject;
            IdMsg.Body.Text := body;

            IdMsg.ContentType :=  'text/html';
            // IdMsg.ContentType :=  'text/plain';

            theIdSmtp.Host := host;
            theIdSmtp.Username := user_name;
            theIdSmtp.Password := password;
            theIdSmtp.Port := port_number;
            // Use EHLO method.
            theIdSmtp.UseEhlo := true;
            // Login method of authentication.
            theIdSmtp.AuthenticationType := atLogin;

            // Add the attachments.

            // >>> If I comment out the code below the document shows
            //  up as a rendered web page in the Evernote web interface.
            //  If I uncomment it and therefore add attachments, the
            //  document shows up as raw HTML.
            {
            if Length(aryAttachmentFilenames) > 0 then
            begin
                SetLength(aryAttachments, Length(aryAttachmentFilenames));

                for i := Low(aryAttachmentFilenames) to High(aryAttachmentFilenames) do
                    // Add each attachment.
                    aryAttachments[i] := TIdAttachment.Create(IdMsg.MessageParts, aryAttachmentFilenames[i]);
            end; // if Length(aryAttachmentFilenames) > 0 then
            }

            // Connect to the desired SMTP server.  N second time-out.
            theIdSmtp.Connect(connectTimeOut_ms);

            // Send it.
            theIdSmtp.Send(IdMsg);

            // If we got here than the test succeeded.  Set the flag
            //  indicating the current settings are valid.
            Result := true;
        end; // with mergeEditsWithOriginal do

    finally
        theIdSmtp.Disconnect;

        if Assigned(IdMsg) then
            IdMsg.Free;
    end; // try
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T18:46:49.293

存在附件时，您的代码设置不`TIdMessage`正确。试试这个：

```
function easySendEmail( 
                theIdSmtp               : TIdSmtp; 
                destEMailAddress        : string; 
                theSubject              : string; 
                theBody                 : string; 
                emailServerSettings     : TEmailServerSettingsRecord; 
                aryAttachmentFilenames  : TDynamicStringArray; 
                connectTimeOut_ms       : integer; 
                bUseEHLO                : boolean; 
                authLoginType           : TAuthenticationType): boolean; 
var 
  IdMsg: TIdMessage; 
  i: integer; 
begin 
  destEMailAddress := Trim(destEMailAddress); 
  if destEMailAddress = '' then 
    raise Exception.Create('(TframeEmailServerSettings.easySendEmail) The destination E-mail address is empty.'); 

  theSubject := Trim(theSubject); 
  if theSubject = '' then 
    raise Exception.Create('(TframeEmailServerSettings.easySendEmail) The subject line is empty.'); 

  theBody := Trim(theBody); 
  if theBody = '' then 
    raise Exception.Create('(TframeEmailServerSettings.easySendEmail) The message body is empty.'); 

  IdMsg := TIdMessage.Create(nil); 
  try 
    with emailServerSettings do 
    begin 
      // Build a test message and send it. 
      IdMsg.Recipients.EMailAddresses := destEMailAddress; 
      { 
        Most SMTP servers require the sending E-mail address as the 
        user name for the authentication.  However, if we 
        encounter one that doesn't work this way then re-using 
        the authentication user name as the From address 
        will not work. 
      } 
      IdMsg.From.Name    := APPLICATION_NAME_EVERMAIL; 
      IdMsg.From.Address := user_name; 
      IdMsg.Subject := theSubject; 

      // Add the attachments. 
      if Length(aryAttachmentFilenames) > 0 then 
      begin 
        with TIdText.Create(IdMsg.MessageParts, nil) do
        begin
          Body.Text := 'An HTML viewer is required to see this message'; 
          ContentType := 'text/plain';
        end; 

        with TIdText.Create(IdMsg.MessageParts, nil) do
        begin
          Body.Text := theBody; 
          ContentType := 'text/html';
        end; 

        // Add each attachment. 
        for i := Low(aryAttachmentFilenames) to High(aryAttachmentFilenames) do 
          TIdAttachment.Create(IdMsg.MessageParts, aryAttachmentFilenames[i]); 

        IdMsg.ContentType := 'multipart/mixed'; 
      end else
      begin
        IdMsg.Body.Text := theBody; 
        IdMsg.ContentType := 'text/html'; 
      end; // if Length(aryAttachmentFilenames) > 0 then 

      theIdSmtp.Host := host; 
      theIdSmtp.Username := user_name; 
      theIdSmtp.Password := password; 
      theIdSmtp.Port := port_number; 
      // Use EHLO method. 
      theIdSmtp.UseEhlo := true; 
      // Login method of authentication. 
      theIdSmtp.AuthenticationType := atLogin; 

      // Connect to the desired SMTP server.  N second time-out. 
      theIdSmtp.Connect(connectTimeOut_ms); 
      try
        // Send it. 
        theIdSmtp.Send(IdMsg); 

        // If we got here than the test succeeded.  Set the flag 
        //  indicating the current settings are valid. 
        Result := true; 

      finally
        theIdSmtp.Disconnect; 
      end;
    end; // with emailServerSettings do 
  finally 
    IdMsg.Free; 
  end; // try 
end; 
```

# double - 精度的含义。双重类型的范围

> ID：10891228
> 
> 赞同：2
> 
> 时间：2012-06-05T03:34:10.923
> 
> 标签：double, ieee-754, floating

首先，请允许我承认我是一位经验丰富的程序员，拥有超过 10 年的编程经验。但是，我在这里要问的问题是，从那时起我就一直困扰着我，大约十年前我第一次拿起一本关于 C 的书。

下面是一本关于 Python 的书的摘录，解释了 Python 的浮点类型。

> 浮点数使用机器上浮点数的本机双精度（64 位）表示来表示。通常这是 IEEE 754，它提供大约 17 位精度和一个在 –308 到 308 范围内的指数。这与 C 中的 double 类型相同。

我一直不明白的是这句话的意思

> " ... 提供大约 17 位精度和 –308 到 308 范围内的指数 ..."

我的直觉在这里误入歧途，因为我可以理解精度的含义，但是范围与此有何不同。我的意思是，如果一个浮点数可以表示最多 17 位的值（即最大值为 1,000,000,000,000,000,00 - 1），那么指数怎么可能是 +308。如果指数是 10，那不会是 308 位数字，如果指数是 2，那不是一个粗略的 100 位数字。

我希望，我能够表达我的困惑。

问候 Vaid，阿布舍克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T04:22:55.913

假设我们用两位精度写 1500。这意味着我们已经足够精确地将 1500 与 1600 和 1400 区分开来，但还不足以将 1500 与 1510 或 1490 区分开来。区分这些数字需要三位数的精度。

即使我写了四位数字，浮点表示也不一定包含所有这些数字。1500 是 1.5 * 10^3。在具有两位精度的十进制浮点表示中，仅存储数字的前两位和指数，我将写为 (1.5, 3)。

为什么“真实”数字和占位符零之间存在区别？因为它告诉我们我们可以多精确地表示数字，也就是说，*由于逼近而损失了多少数值*。我们可以区分 1500 = (1.5, 3) 和 1500+100 = (1.6, 3)。但是如果我们增加指数，我们无法区分 15000 = (1.5, 4) 和 15000+100 = (1.51, 4)。充其量，我们可以用两位小数的精度来近似 +/- 10% 内的数字。无论指数有多大或多小，这都是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-16T16:31:27.720

数字的常规十进制表示掩盖了这个问题。相反，如果人们以标准化的科学记数法来考虑它们以将尾数和指数分开，那么区别是立竿见影的。标准化是通过缩放尾数直到它在 0.0 和 1.0 之间并调整指数以避免比例损失来实现的。

数字的精度是尾数中的位数。浮点数具有有限数量的位来表示这部分值。它决定了区分大小相似的数字的准确程度。

范围确定指数的允许值。在您的示例中，-308 到 308 的范围独立于尾数值表示，并受分配用于存储范围的浮点数中的位数限制。

这两个值可以独立变化以适应。例如，在许多图形管道中，更小的值用截断的值表示，这些值被缩放以适应甚至 16 位。

数值方法库花费大量精力来确保不超过这些限制以保持计算的正确性。临时使用通常不会遇到这些限制。

IEEE 754 中的选择被认为是精度和范围之间的合理权衡。32 位单曲具有相似但不同的限制。问题[在 16、32 和 64 位 IEEE-754 系统中可以表示哪些数字范围？](https://stackoverflow.com/questions/872544/what-range-of-numbers-can-be-represented-in-a-16-32-and-64-bit-ieee-754-syste?rq=1)提供了更长的摘要和进一步的链接以供更多研究。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-05T03:49:30.140

从[Wiki](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)中，预计双精度浮点数的精度为 17 位或 17 SF。指数可以在 -1022 到 1023 的范围内。
它们的 -308 到 308 似乎是一个错误，或者是一个没有完全解释的想法。

# ssl - SSL客户端-hello，消息体结构

> ID：10891229
> 
> 赞同：-4
> 
> 时间：2012-06-05T03:34:12.310
> 
> 标签：ssl

我正在尝试手动使用 SSL，而不使用 libs 作为 OpenSSL 等...而且我在第一步中遇到了来自客户端的 Hello 消息的错误。

来自[技术网](http://technet.microsoft.com/en-us/library/cc785811%28v=ws.10%29.aspx)：

```
It must consist of:
ClientVersion 3,1
ClientRandom[32]
SessionID: None (new session)
Suggested Cipher Suites:
   TLS_RSA_WITH_3DES_EDE_CBC_SHA
   TLS_RSA_WITH_DES_CBC_SHA
Suggested Compression Algorithm: NONE 
```

在我的代码（ C/C++ ）中，我以这种方式创建了消息：

```
char *request = "ClientVersion 3,1\r\nClientRandom[32]\r\n
SessionID: None (new session)\r\n
Suggested Cipher Suites:\r\n
TLS_RSA_WITH_3DES_EDE_CBC_SHA\r\n
TLS_RSA_WITH_DES_CBC_SHA\r\n
Suggested Compression Algorithm: NONE\r\n"; 
```

但是在 recv() 函数之后，结果为 0，那么我的消息结构有什么问题？

PS 在 HTTP-proto 中有一个地方，什么时候必须是 double \r\n （拆分标题和正文消息），可能是，一定有这样的东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T10:01:56.550

您需要好好看看[RFC 2246](http://www.ietf.org/rfc/rfc2246.txt)，而不仅仅是编造一些东西。例如，消息元素之间的换行符是您的想象。

但是为什么你认为你可以“手动”使用 SSL 是一个谜。你不能，你也不需要。重新实现 SSL 是一项重大任务，您没有资源去做。使用您的库：OpenSSL、JSSE 等。

# java - 理论：列表声明 Object list = new ArrayList();

> ID：10891234
> 
> 赞同：-2
> 
> 时间：2012-06-05T03:35:50.603
> 
> 标签：java

我即将参加一场考试，我正在学习..我正在考虑一种优雅的方式来回答以下问题，我目前的答案将类似于（基于stackoverflow上这个[答案的信息）](https://stackoverflow.com/questions/2516778/java-how-to-have-an-arraylist-as-instance-variable-of-an-object)

> 上面的初始化是不可能的，它会编译但在声明中缺少一个标识符，并且其他函数如添加、删除将不可用。

问题..

> 考虑以下代码片段。是否可以将 ArrayList 的实例分配给在第 1 行中声明为 Object 的变量？解释。

```
 Object strings = new ArrayList();

  strings.toString(); 
```

还有什么其他方法可以回答这个问题？您能否提供维基百科/资源，以便我可以进一步研究编译器如何将其转换为字节码？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T03:41:39.843

> **考虑以下代码片段。是否可以将 ArrayList 的实例分配给在第 1 行中声明为 Object 的变量？解释。**

```
 Object strings = new ArrayList();

   strings.toString(); 
```

是的，有可能。 `Object`是一种超类型`ArrayList`（实际上，Object 是所有Java 引用类型的超类型）。将变量声明为实际分配的类型的超类型是合法的。

当您`List`使用 的具体实现定义 a 时，会发生类似的情况`ArrayList`：

```
 List<String> list = new ArrayList<String>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T03:43:13.060

它确实可以编译（你试过了吗？）但生成的 ArrayList 很难使用，因为它被声明为一个对象。例如，该行：

```
strings.add("hello"); 
```

不会编译，因为 add() 没有为 Object 类型定义。然而，

```
((List)strings).add("hello"); 
```

编译。

# javascript - 根据从 BG 页面传递的消息在内容脚本中设置变量 - chrome 扩展

> ID：10891240
> 
> 赞同：0
> 
> 时间：2012-06-05T03:36:25.133
> 
> 标签：javascript, variables, syntax, google-chrome-extension, message-passing

我已经从我的内容脚本发送了一个请求，并成功地从我的后台页面收到了响应。现在我想在我的内容脚本中设置一个变量 - 基于响应。这就是我遇到麻烦的地方。应该很简单......我想我一定是语法错误。这是我的内容脚本中的内容：

```
chrome.extension.sendRequest({greeting: "hello"}, function(response) {
  console.log(response.farewell);
if (response.farewell == "goodbye") {
      wasPolite = "yes";
}
else if (response.farewell == "goaway") {
      wasPolite = "no";
    }
else {
wasPolite = "maybe";
}
});
alert(wasPolite); 
```

控制台显示`goaway`为响应，但`wasPoite`仍未定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:14:22.927

如果你定义：

```
var wasPolite = ''; 
```

之前：

```
chrome.extension.... 
```

它仍然没有提醒正确的值然后我会问**chrome.extension.sendRequest()**函数是异步的吗？如果是这样，您可能会在请求有时间回调之前提醒 wasPolite。@Ruup 可能在轨道上暗示 wasPolite 只有在 sendRequest 实际完成后才会有它的值，从而触发回调

# php - 如何在构建整个页面时提示浏览器显示部分 html？

> ID：10891242
> 
> 赞同：0
> 
> 时间：2012-06-05T03:36:39.333
> 
> 标签：php, html, facebook

在 Facebook 画布应用程序中，当 facebook-sdk 连接以授权应用程序/用户时，我想快速显示一些静态标题和横幅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:59:24.773

> 当 facebook-sdk 连接以授权应用程序/用户时。

这意味着您正在执行什么具体操作？

为了从 Facebook 加载 JS SDK 没有延迟，您应该异步加载它 - 例如，请参阅[docs](https://developers.facebook.com/docs/reference/javascript/)。

如果 XFBML 标记渲染正在减慢页面构建速度，那么您可以使用将其解析为 false 的选项对其进行初始化，并在内容加载后稍后调用 FB.XFBML.parse。

如果这不能令人满意地回答您的问题 - 请改进问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:55:21.293

如果您认为连接到 Facebook API 并获取信息需要时间，请使用[输出控制功能](http://www.php.net/manual/en/intro.outcontrol.php)。

> 输出控制功能允许您控制何时从脚本发送输出。这在几种不同的情况下很有用，尤其是当您需要在脚本开始输出数据后将标头发送到浏览器时。输出控制函数不影响使用 header() 或 setcookie() 发送的标头，仅影响诸如 echo() 之类的函数和 PHP 代码块之间的数据。

或者

如果您想在要求用户授权应用程序之前显示一些信息，您可以简单地不要在加载时要求用户授权。根据某些用户操作，您可以请求授权。

# windows - MySQL 5.5。Windows 上的安装未正确显示在注册表中

> ID：10891246
> 
> 赞同：1
> 
> 时间：2012-06-05T03:37:15.610
> 
> 标签：windows, mysql-python

我正在尝试让`Django`MySQL 在我的 Windows 7 机器上工作。为此，我需要 mySQLDB 接口。当我尝试安装“mySQLDB 接口”时，它会在`HKEY_LOCAL_MACHINE`. 但在我的注册表中，它显示在`HKEY_CURRENT_USER/SOFTWARE/MySQL AB/MySQL Server 5.5`.

我的 SQL 实例似乎工作正常。

MySQLDB 安装程序不知何故需要这个`HKEY_LOCAL_MACHINE`（我认为），因为它不允许我完成安装。它向我抛出了这个错误。

```
Traceback (most recent call last):
File "setup.py", line 15, in <module>
metadata, options = get_config()
File "C:\Blah\Software\MySQL-python-1.2.3\setup_windows.
py", line 8, in get_config
mysql_root, dummy = _winreg.QueryValueEx(serverKey,'Location')
WindowsError: [Error 2] The system cannot find the file specified 
```

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:34:33.063

您可以在`site.cfg`. 或者，您可以从 SourceForge下载[Windows MSI包。](https://sourceforge.net/projects/mysql-python/files/latest/download)（不，发布问题时它不存在。）

# xml - 使用 XSLT 排除 XML 空节点

> ID：10891248
> 
> 赞同：4
> 
> 时间：2012-06-05T03:37:38.783
> 
> 标签：xml, xslt

我有一些非常简单的 XML。我正在重新创建一些 XML，并将一些样板文本添加到最终的 XML 文件中，以便在完成后导入 InDesign。

这就是问题所在：并非所有 XML 字段都在每条记录中都使用。因此，当 XSLT 添加样板文本时，它甚至出现在不包含 XML 元素的记录中。

我尝试使用选择 >> when >> else 来查找元素，如果存在则使用该元素，或者如果该元素不在记录中，则忽略样板并插入 NOTHING。

以下是一些示例 XML 数据：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <story>
        <CL>
            <CityDescription>City One</CityDescription>
            <BK>
                <CompanyName>Corporate Name</CompanyName>
                <address>123 Main St</address>
                <HoldingCo>Company Name</HoldingCo>
                <TotalAssets>128,319,000</TotalAssets>
                <TotalLiabilities>117,059,000</TotalLiabilities>
                <TotalDeposits>89,847,000</TotalDeposits>
                <EquityCapital>11,260,000</EquityCapital>
            </BK>
            <BK>
                <CompanyName>Smaller Company</CompanyName>
                <address>123 Central St</address>
            </BK>
        </CL>
        <CL>
            <CityDescription>City Two</CityDescription>
            <BK>
                <CompanyName>Corporate Name Three</CompanyName>
                <address>123 High St</address>
                <HoldingCo>Company Name</HoldingCo>
                <TotalAssets>128,319,000</TotalAssets>
                <TotalLiabilities>117,059,000</TotalLiabilities>
                <TotalDeposits>89,847,000</TotalDeposits>
                <EquityCapital>11,260,000</EquityCapital>
            </BK>
            <BK>
                <CompanyName>Smaller Company Four</CompanyName>
                <address>123 Jones St</address>
            </BK>
        </CL>
    </story>
</root> 
```

这是我尝试使用的 XSLT，但它甚至在不包含元素的记录中添加了“Holding Co：”和“Total Assets：”：

```
<?xml version="1.0" encoding="UTF-8"?><!-- DWXMLSource="Testing.xml" -->
<!DOCTYPE xsl:stylesheet  [
]>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="XML" />
<xsl:template match="/">

<root>
    <story>
        <xsl:for-each select="root/story/CL">
            <CityDescription><xsl:value-of select="CityDescription"/></CityDescription><xsl:text>
            </xsl:text>
            <xsl:for-each select="BK">
                <CompanyName><xsl:value-of select="CompanyName"/></CompanyName><xsl:text>
                </xsl:text>
                <address><xsl:value-of select="address"/></address><xsl:text>
                </xsl:text>
                <HoldingCo><xsl:text>Holding Co: </xsl:text><xsl:value-of select="HoldingCo"/></HoldingCo><xsl:text>
                </xsl:text>
                <TotalAssets><xsl:text>Total Assets: </xsl:text><xsl:value-of select="TotalAssets"/></TotalAssets><xsl:text>
                </xsl:text>
                <TotalLiabilities><xsl:text>Total Liabilities: </xsl:text><xsl:value-of select="TotalLiabilities"/></TotalLiabilities><xsl:text>
                </xsl:text>
                <TotalDeposits><xsl:text>Total Deposits: </xsl:text><xsl:value-of select="TotalDeposits"/></TotalDeposits><xsl:text>
                </xsl:text>
                <EquityCapital><xsl:text>Total Assets: </xsl:text><xsl:value-of select="EquityCapital"/></EquityCapital><xsl:text>
                </xsl:text>
            </xsl:for-each>
        </xsl:for-each>
    </story>
</root>
</xsl:template>
</xsl:stylesheet> 
```

我尝试使用选择>>当>>否则基本上忽略元素，等它们没有出现在数据中，但我的输出只显示“否则”内容。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T04:36:26.630

```
Here's the problem: not all XML fields are being used in every record. So, when the XSLT adds the boilerplate text it appears even in the records that don't include the XML elements. 
```

**这就是模板的用途——在 XSLT 中不使用模板就像在 OO 编程语言中不使用类一样**。

**这个简单的转换（注意没有使用单个条件指令）**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes" />
    <xsl:strip-space elements="*"/>

    <xsl:variable name="vNL" select="'&#xA;'"/>
    <xsl:template match="/">
        <root>
            <story>
              <xsl:apply-templates select="root/story/CL"/>
            </story>
        </root>
    </xsl:template>

    <xsl:template match="CL">
      <xsl:apply-templates select="CityDescription"/>
      <xsl:apply-templates select="BK"/>
    </xsl:template>

    <xsl:template match="CityDescription | CompanyName | address">
        <xsl:element name="{name()}">
            <xsl:value-of select="."/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="BK">
      <xsl:value-of select="$vNL"/>
      <xsl:apply-templates select="CompanyName"/>
      <xsl:apply-templates select="address"/>
      <xsl:apply-templates select="HoldingCo"/>
      <xsl:apply-templates select="TotalAssets"/>
      <xsl:apply-templates select="TotalLiabilities"/>
      <xsl:apply-templates select="TotalDeposits"/>
      <xsl:apply-templates select="EquityCapital"/>
    </xsl:template>

    <xsl:template match="HoldingCo">
        <HoldingCo>
            <xsl:text>Holding Co: </xsl:text>
            <xsl:value-of select="."/>
        </HoldingCo>
    </xsl:template>

    <xsl:template match="TotalAssets">
        <TotalAssets>
            <xsl:text>Total Assets: </xsl:text>
            <xsl:value-of select="."/>
        </TotalAssets>
    </xsl:template>

    <xsl:template match="TotalLiabilities">
        <TotalLiabilities>
            <xsl:text>Total Liabilities: </xsl:text>
            <xsl:value-of select="."/>
        </TotalLiabilities>
    </xsl:template>

    <xsl:template match="TotalDeposits">
        <TotalDeposits>
            <xsl:text>Total Deposits: </xsl:text>
            <xsl:value-of select="."/>
        </TotalDeposits>
    </xsl:template>

    <xsl:template match="EquityCapital">
        <EquityCapital>
            <xsl:text>Total Assets: </xsl:text>
            <xsl:value-of select="."/>
        </EquityCapital>
    </xsl:template>

    <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<root>
    <story>
        <CL>
            <CityDescription>City One</CityDescription>
            <BK>
                <CompanyName>Corporate Name</CompanyName>
                <address>123 Main St</address>
                <HoldingCo>Company Name</HoldingCo>
                <TotalAssets>128,319,000</TotalAssets>
                <TotalLiabilities>117,059,000</TotalLiabilities>
                <TotalDeposits>89,847,000</TotalDeposits>
                <EquityCapital>11,260,000</EquityCapital>
            </BK>
            <BK>
                <CompanyName>Smaller Company</CompanyName>
                <address>123 Central St</address>
            </BK>
        </CL>
        <CL>
            <CityDescription>City Two</CityDescription>
            <BK>
                <CompanyName>Corporate Name Three</CompanyName>
                <address>123 High St</address>
                <HoldingCo>Company Name</HoldingCo>
                <TotalAssets>128,319,000</TotalAssets>
                <TotalLiabilities>117,059,000</TotalLiabilities>
                <TotalDeposits>89,847,000</TotalDeposits>
                <EquityCapital>11,260,000</EquityCapital>
            </BK>
            <BK>
                <CompanyName>Smaller Company Four</CompanyName>
                <address>123 Jones St</address>
            </BK>
        </CL>
    </story>
</root> 
```

**产生想要的正确结果：**

```
<root>
   <story>
      <CityDescription>City One</CityDescription>

      <CompanyName>Corporate Name</CompanyName>
      <address>123 Main St</address>
      <HoldingCo>Holding Co: Company Name</HoldingCo>
      <TotalAssets>Total Assets: 128,319,000</TotalAssets>
      <TotalLiabilities>Total Liabilities: 117,059,000</TotalLiabilities>
      <TotalDeposits>Total Deposits: 89,847,000</TotalDeposits>
      <EquityCapital>Total Assets: 11,260,000</EquityCapital>

      <CompanyName>Smaller Company</CompanyName>
      <address>123 Central St</address>
      <CityDescription>City Two</CityDescription>

      <CompanyName>Corporate Name Three</CompanyName>
      <address>123 High St</address>
      <HoldingCo>Holding Co: Company Name</HoldingCo>
      <TotalAssets>Total Assets: 128,319,000</TotalAssets>
      <TotalLiabilities>Total Liabilities: 117,059,000</TotalLiabilities>
      <TotalDeposits>Total Deposits: 89,847,000</TotalDeposits>
      <EquityCapital>Total Assets: 11,260,000</EquityCapital>

      <CompanyName>Smaller Company Four</CompanyName>
      <address>123 Jones St</address>
   </story>
</root> 
```

由于 的子元素`BK`是按文档顺序处理的，因此匹配模板可以简化为：

```
<xsl:template match="BK">
    <xsl:value-of select="$vNL"/>
    <xsl:apply-templates/>
</xsl:template> 
```

这同样适用于模板匹配`CL`——它可以被替换为：

```
<xsl:template match="CL">
    <xsl:apply-templates/>
</xsl:template> 
```

最后，可以完全删除该模板，因为它完全复制了匹配任何元素的 XSLT*内置模板。*

**因此，这些重构之后的转换是**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes" />
    <xsl:strip-space elements="*"/>

    <xsl:variable name="vNL" select="'&#xA;'"/>
    <xsl:template match="/">
        <root>
            <story>
              <xsl:apply-templates select="root/story/CL"/>
            </story>
        </root>
    </xsl:template>

    <xsl:template match="CityDescription | CompanyName | address">
        <xsl:element name="{name()}">
            <xsl:value-of select="."/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="BK">
        <xsl:value-of select="$vNL"/>
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="HoldingCo">
        <HoldingCo>
            <xsl:text>Holding Co: </xsl:text>
            <xsl:value-of select="."/>
        </HoldingCo>
    </xsl:template>

    <xsl:template match="TotalAssets">
        <TotalAssets>
            <xsl:text>Total Assets: </xsl:text>
            <xsl:value-of select="."/>
        </TotalAssets>
    </xsl:template>

    <xsl:template match="TotalLiabilities">
        <TotalLiabilities>
            <xsl:text>Total Liabilities: </xsl:text>
            <xsl:value-of select="."/>
        </TotalLiabilities>
    </xsl:template>

    <xsl:template match="TotalDeposits">
        <TotalDeposits>
            <xsl:text>Total Deposits: </xsl:text>
            <xsl:value-of select="."/>
        </TotalDeposits>
    </xsl:template>

    <xsl:template match="EquityCapital">
        <EquityCapital>
            <xsl:text>Total Assets: </xsl:text>
            <xsl:value-of select="."/>
        </EquityCapital>
    </xsl:template>

    <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**说明**：

指令：

```
<xsl:apply-templates select="someChildName"/> 
```

`someChildName`如果存在子节点，则仅应用模板（执行处理） 。

# c++ - C++ 树 AVL 平衡

> ID：10891251
> 
> 赞同：2
> 
> 时间：2012-06-05T03:38:01.970
> 
> 标签：c++, avl-tree, tree-balancing

我的树的平衡部分遇到了问题。我在递归插入后调用了 checkBal。如果我尝试添加 5、2 和 4，它会检查 2 的平衡并继续回到 5，然后进入右旋转的 rotateLeft 部分，这是正确的。但是第二行的 rotateLeft 函数出错。

这个实现有什么问题？我到处搜索并将我所做的与人们谈论它是如何完成的方式进行比较。我终于让一切正常了。最后我忘记将 N 设置为 K 了。

```
//==============================================================================
//===== Set Balance ============================================================
sNode<T>* checkBal(sNode<T> *locRoot)
{
    // Make sure to check the children are balanced as well.
    if (locRoot->left != NULL)
        locRoot->left = checkBal(locRoot->left);
    if (locRoot->right != NULL)
        locRoot->right = checkBal(locRoot->right);

    if(getHeight(locRoot->left) - getHeight(locRoot->right) > 1)
    {
        if(getHeight(locRoot->left->right) > getHeight(locRoot->left->left))
            locRoot->left = rotateRight(locRoot->left);
        locRoot = rotateLeft(locRoot);
    }
    else if(getHeight(locRoot->right) - getHeight(locRoot->left) > 1)
    {
        if(getHeight(locRoot->right->left) > getHeight(locRoot->right->right))
            locRoot->right = rotateLeft(locRoot->right);
        locRoot = rotateRight(locRoot);
    }
    updateHeights(locRoot);
    return locRoot;
}
    /*
        Extream cases of balancing a tree requires a double rotation
            A
             \
              D
             /
            B

        'A' is the current root
        If right->left (grandchild) is larger then the right->right (grandchild)
        First Right rotate the child then left rotate the parent

        left > right by 2 or more
            left.left < left.right  (Double Right Rotation)
            left.left >= left.right (Single Right Rotation)
        right > left by 2 or more
            right.right < right.left (Double Left Rotation)
            right.right >= right.left (Single Left Rotation)
    */

sNode<T>* rotateRight(sNode<T> *N) const
{
/*
      N           K
     / \         / \
   (a)  K  =>   N  (c)
       / \     / \
     (b) (c) (a) (b)
*/
    // K is going to be our new Parent
    // Move (c) from K->right to N->left
    // Set K->right to be N
    // Return the new parent node to update the one above.
    sNode<T> *K = N->right;
    N->right = K->left;        
    K->left = N;
    return N = K;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T04:48:45.127

```
rotateRight(locRoot->left); 
```

应该，

```
rotateRight(locRoot->right); 
```

但这仍然是一个错误的实现。=p

你应该对根的左侧和右侧有不同的实现。
试着看[维基百科的动画](http://upload.wikimedia.org/wikipedia/commons/f/f5/AVL_Tree_Rebalancing.svg)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:35:21.370

在搞砸了一段时间后，我得到了它的工作。我的解决方案如下。

```
//==============================================================================
//===== AVL Balance ============================================================
sNode<T>* checkBal(sNode<T> *locRoot)
{
    // Go all the way down to the leaf nodes.
    if (locRoot->left != NULL)
        locRoot->left = checkBal(locRoot->left);
    if (locRoot->right != NULL)
        locRoot->right = checkBal(locRoot->right);

    // Before we do anything lets update the parent/child heights
    updateHeights(locRoot);

    if(getHeight(locRoot->left) - getHeight(locRoot->right) > 1)
    {
        // If it needs a double left rotate first rotate the left child right
        if(getHeight(locRoot->left->right) > getHeight(locRoot->left->left))
            locRoot->left = rotateRight(locRoot->left);
        locRoot = rotateLeft(locRoot);
    }
    else if(getHeight(locRoot->right) - getHeight(locRoot->left) > 1)
    {
        // If it needs a double right rotate first rotate the right child left
        if(getHeight(locRoot->right->left) > getHeight(locRoot->right->right))
            locRoot->right = rotateLeft(locRoot->right);
        locRoot = rotateRight(locRoot);
    }
    // Update the new heights
    updateHeights(locRoot);
    return locRoot;
}
    /*
        Extream cases of balancing a tree requires a double rotation
            A
             \
              D
             /
            B

        'A' is the current root
        If right->left (grandchild) is larger then the right->right (grandchild)
        First Right rotate the child then left rotate the parent

        left > right by 2 or more
            left.left < left.right  (Double Right Rotation)
            left.left >= left.right (Single Right Rotation)
        right > left by 2 or more
            right.right < right.left (Double Left Rotation)
            right.right >= right.left (Single Left Rotation)
    */

sNode<T>* rotateRight(sNode<T> *N) const
{
/*
      N           K
     / \         / \
   (a)  K  =>   N  (c)
       / \     / \
     (b) (c) (a) (b)
*/
    // K is going to be our new Parent
    // Move (c) from K->right to N->left
    // Set K->right to be N
    // Return the new parent node to update the one above.
    sNode<T> *K = N->right;
    N->right = K->left;        
    K->left = N;
    return N = K;
}

sNode<T>* rotateLeft(sNode<T> *N) const
{
/*
         N            K
    / \          / \
       K  (a)  =>  (b)  N
      / \              / \
    (b) (c)          (c) (a)
*/
    sNode<T> *K = N->left;
    N->left = K->right;        
    K->right = N;
    return N = K;
} 
```

# qt - 我不能用 QPainter 绘制 QVideoWidget

> ID：10891254
> 
> 赞同：2
> 
> 时间：2012-06-05T03:38:26.960
> 
> 标签：qt, phonon, qpainter

我正在尝试在播放视频时绘制字符串，例如字幕...我有一个 Phonon::QVideoWidget，在它的构造函数中我这样做：

```
painter = new QPainter(this); 
```

我已经覆盖了绘画事件，仅用于测试：

```
void MyVideoWidget::paintEvent(QPaintEvent* event)
{
    painter->drawLine(0, 0, 1, 1);
    //painter-> anything shows
} 
```

所以当我启动我的播放器时，我看不到 QPainter 所做的任何事情，只有普通视频播放任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:32:12.087

在函数`QPainter`中创建本地实例更为常见。`paintEvent()`

```
QPainter painter(this); 
```

这导致`begin()`和`end()`方法被自动调用。这些是`QPainter`正常工作所必需的。您可以尝试在 中手动调用它们`paintEvent()`，看看是否有区别。

您可能会尝试在视频上覆盖文本的另一件事是创建一个`QLabel`in 代码并将您的视频小部件设为其父级。这不需要子类化视频小部件或覆盖绘制事件。

# python - 使用 Sqlite3 和 Python 2.7 将数据库添加到 Django 项目

> ID：10891255
> 
> 赞同：9
> 
> 时间：2012-06-05T03:38:40.817
> 
> 标签：python, database, django, python-2.7

我正在尝试使用 Sqlite3 和 Python 2.7 将数据库添加到 Django 项目。

这就是我的 setting.py 的样子：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'dev.db',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

它允许我创建数据库并要求我创建超级用户：

```
You just installed Django's auth system, which means you don't have any superusers defined. Would you like to create one now? (yes/no): 
```

当我输入是时，它给了我这个错误消息。

错误信息：

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/Users/IMAC/work3/env/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/Users/IMAC/work3/env/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Users/IMAC/work3/env/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/Users/IMAC/work3/env/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/Users/IMAC/work3/env/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/Users/IMAC/work3/env/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 110, in handle_noargs
    emit_post_sync_signal(created_models, verbosity, interactive, db)
  File "/Users/IMAC/work3/env/lib/python2.7/site-packages/django/core/management/sql.py", line 189, in emit_post_sync_signal
    interactive=interactive, db=db)
  File "/Users/IMAC/work3/env/lib/python2.7/site-packages/django/dispatch/dispatcher.py", line 172, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/Users/IMAC/work3/env/lib/python2.7/site-packages/django/contrib/auth/management/__init__.py", line 73, in create_superuser
    call_command("createsuperuser", interactive=True, database=db)
  File "/Users/IMAC/work3/env/lib/python2.7/site-packages/django/core/management/__init__.py", line 150, in call_command
    return klass.execute(*args, **defaults)
  File "/Users/IMAC/work3/env/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/Users/IMAC/work3/env/lib/python2.7/site-packages/django/contrib/auth/management/commands/createsuperuser.py", line 70, in handle
    default_username = get_default_username()
  File "/Users/IMAC/work3/env/lib/python2.7/site-packages/django/contrib/auth/management/__init__.py", line 105, in get_default_username
    default_username = get_system_username()
  File "/Users/IMAC/work3/env/lib/python2.7/site-packages/django/contrib/auth/management/__init__.py", line 85, in get_system_username
    return getpass.getuser().decode(locale.getdefaultlocale()[1])
  File "/Users/IMAC/work3/env/lib/python2.7/locale.py", line 496, in getdefaultlocale
    return _parse_localename(localename)
  File "/Users/IMAC/work3/env/lib/python2.7/locale.py", line 428, in _parse_localename
    raise ValueError, 'unknown locale: %s' % localename
ValueError: unknown locale: UTF-8 
```

我该如何解决上面的错误？为什么它不允许我添加超级用户？我应该怎么办？这个问题可能是因为我运行的是 Python 2.7 吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-05T09:00:20.333

在执行 python manage.py syncdb 之前输入这个

```
export LC_CTYPE=en_US.UTF-8
export LC_ALL=en_US.UTF-8 
```

这将解决错误。顺便说一句，我使用的是 /usr/bin/python 中的 mac os x python。

将其添加到 ./.bash_profile 文件中，以便它自动调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:47:48.180

实际上，我最近在 Windows 上遇到了这个问题。这是一个技巧，而不是修复或答案，但它可能会帮助您解决问题：

把它放在你的 manage.py 脚本的顶部

```
import os
os.environ.setdefault('LANG','en_US') 
```

[http://keeyai.com/2012/02/17/django-deployment-create-superuser-fails-with-locale-error/](http://keeyai.com/2012/02/17/django-deployment-create-superuser-fails-with-locale-error/)

# c++ - C：在同一个项目中使用文件中的函数

> ID：10891261
> 
> 赞同：0
> 
> 时间：2012-06-05T03:39:14.220
> 
> 标签：c++, c, function, header, using

我的问题与直接示例无关，而更像是一个整体问题。当我使用 C++ 进行编码时，我发现（在查看了一些线程之后）为了使用来自同一项目中不同文件的函数，我要么需要一个头文件。因此，例如，如果我在一个名为“main.cpp”的文件中有主函数，并且我想在另一个名为“problem1.cpp”的文件中使用一个函数“prob1()”，我将需要使用标题文件。

令我困惑的是为什么我不必担心用 C 编程？当我用 C 编程时，为了使用来自不同文件的函数，我可以直接调用该函数。

任何帮助/解释表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T03:55:03.993

您的 C 编译器可以隐式声明该函数，但您应该自己这样做。如果您打开警告，您会看到如下内容：

```
file1.c: warning: implicit declaration of function ‘func_from_f2’ 
```

在*编译**file1.c*时，这个隐式*声明*将用于创建一个目标文件，然后在*链接*时您只需要希望函数确实存在并且声明正确，以便目标文件可以成功链接在一起。

 ***如果没有，*链接器*会在某处给你一个错误：

```
undefined reference to `func_from_f2' 
```

您也不一定需要头文件，您可以简单地在源文件中包含函数的*声明*/原型（该`#include`指令基本上为您执行此操作）。IE。以下将在没有警告的情况下正常工作：

**文件1.c**

```
void func_from_f2(void);

int main(void)
{
   func_from_f2();

   return 0;
} 
```

**文件2.c**

```
#include <stdio.h>

void func_from_f2(void)
{
   puts("hello");
} 
```

但是，通常最好的做法是使用头文件：

**文件1.c**

```
#include "file2.h"

int main(void)
{
   func_from_f2();

   return 0;
} 
```

**文件2.h**

```
#ifndef FILE2_H
#define FILE2_H

void func_from_f2(void);

#endif 
```

**文件2.c**

```
#include <stdio.h>
#include "file2.h"

void func_from_f2(void)
{
   puts("hello");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T03:43:53.430

在 C 语言中，如果您没有提供正确的原型，编译器会猜出正确的原型。它经常猜错，然后你的程序就会中断。

无论是 C 还是 C++，在头文件中提出声明总是一个好主意，该头文件也将`#include`d 放入实现文件中，编译器可以在其中检查不匹配。***

# django - 模板标签 if

> ID：10891265
> 
> 赞同：0
> 
> 时间：2012-06-05T03:40:13.617
> 
> 标签：django

我得到两个变量：

```
post = Post.objects.get(pk=post_id)
rated = Rated.objects.filter(username=request.user,rated=True) 
```

通过 django-mptt 魔法`post.comment_root.get_descendants`转换为`node`.

在模板中我尝试使用：

```
{% if node in rated %}
    X
{% else %}
    Y
{% endif %} 
```

，但总是得到 Y。为什么？

PS：对不起我的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:43:12.353

我的猜测是，它为`post.comment_root.get_descendants`您提供了一个`Comment`s 的查询集。A`Comment`永远不会在 的查询集中`Rated`，因为它们是不同的类型。您需要将苹果与苹果进行比较。

# iphone - 使用 NSDateComponents 精确计时

> ID：10891270
> 
> 赞同：0
> 
> 时间：2012-06-05T03:41:56.307
> 
> 标签：iphone, ios, nsdate, nscalendar

我正在尝试建立一个倒计时，它显示要走的秒数。

下面的示例设置为 10 秒，但输出为 8 秒。

```
NSDate *currentDate = [NSDate date];
NSDate *finishDate = [NSDate dateWithTimeInterval:10 sinceDate:currentDate];

NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *components = [calendar components:NSSecondCalendarUnit|NSMinuteCalendarUnit|NSHourCalendarUnit | NSDayCalendarUnit| NSMonthCalendarUnit | NSYearCalendarUnit
                                           fromDate:currentDate
                                             toDate:finishDate
                                            options:0];
NSInteger hour_ = [components hour];   
NSInteger minute_ = [components minute];
NSInteger second_ = [components second]; 
```

日志

```
currentDate = 2012-06-05 03:13:10 +0000
finishDate_ = 2012-06-05 03:13:19 +0000
second_ = 8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:14:12.507

好吧，我只是复制并粘贴了您的代码。我在底部添加了这些行：

```
NSLog(@"%@", currentDate);
NSLog(@"%@", finishDate);
NSLog(@"%d, %d, %d", hour_, minute_, second_); 
```

它运行良好，在运行 iOS 5.1 的 iPad 模拟器上使用 Xcode 4.3.2：

```
2012-06-05 00:19:34.341 Testing App[59813:fb03] 2012-06-05 04:19:34 +0000
2012-06-05 00:19:34.342 Testing App[59813:fb03] 2012-06-05 04:19:44 +0000
2012-06-05 00:19:34.343 Testing App[59813:fb03] 0, 0, 10 
```

你在使用不同的版本吗？

# objective-c - 不要备份到 iCloud 但仍然被拒绝

> ID：10891271
> 
> 赞同：16
> 
> 时间：2012-06-05T03:41:58.633
> 
> 标签：objective-c, ios, app-store, storage, icloud

在我的应用程序中，我必须存储核心数据数据库和音频文件，所以我将它们解码以将它们放在 Documents 目录中。为了防止他们备份，当我第一次启动应用程序时，我把**不要备份标志像这样**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
 [self addSkipBackupAttributeToItemAtURL:[self applicationDocumentsDirectory]];
}
    - (NSURL *)applicationDocumentsDirectory
{
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
}
- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{
  if (&NSURLIsExcludedFromBackupKey == nil) { // iOS <= 5.0.1
    const char* filePath = [[URL path] fileSystemRepresentation];

    const char* attrName = "com.apple.MobileBackup";
    u_int8_t attrValue = 1;

    int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
    return result == 0;
  } else { // iOS >= 5.1
    return [URL setResourceValue:[NSNumber numberWithBool:YES] forKey:NSURLIsExcludedFromBackupKey error:nil];
  }
} 
```

但它似乎不起作用 - 我仍然被拒绝：

> 我们发现您的应用未遵循 App Store 审核指南所要求的 iOS 数据存储指南。
> 
> 特别是，我们发现在启动和/或内容下载时，您的应用程序存储 3.6 MB。要检查您的应用存储了多少数据：
> 
> *   安装并启动您的应用
> *   转到设置 > iCloud > 存储和备份 > 管理存储
> *   如有必要，点击“显示所有应用”
> *   检查您应用的存储空间

另一个问题是我无法检查 - 我没有看到我的应用程序

> 设置 > iCloud > 存储和备份 > 管理存储

也许问题只出在我在这里没有考虑的 5.0 上？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T06:51:15.650

问题在于 iOS 5.0，在这个 iOS 中你不应该放置 dont backup 标志 dont back up 标志是在 ios 5.0.1 中引入的 我们的应用确实遇到了类似的问题，它已经被拒绝了好几次所以我们不得不做处理不同 iOS 的解决方法 我们需要支持 iOS < 5.0、iOS 5.0 和 iOS > 5.0

所以在联系苹果之后，除了在不同的iOS上有不同的路径，我们没有找到任何解决方案

我们有一个这样的函数：

```
+ (NSString*) savePath
{
    NSString *os5 = @"5.0";

    NSString *currSysVer = [[UIDevice currentDevice] systemVersion];
    NSString *path = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];

    if ([currSysVer compare:os5 options:NSNumericSearch] == NSOrderedAscending) //lower than 4
    {
        return path;
    }
    else if ([currSysVer compare:os5 options:NSNumericSearch] == NSOrderedDescending) //5.0.1 and above
    {        
        return path;
    }
    else // IOS 5
    {
        path = [NSHomeDirectory() stringByAppendingPathComponent:@"Library/Caches"];
        return path;
    }

    return nil;
} 
```

我们使用并仍在使用此功能。

请阅读更多

> iOS 5.0
> 
> 在 iOS 5.0 上无法从备份中排除数据。如果您的应用程序必须支持 iOS 5.0，那么您需要将应用程序数据存储在缓存中以避免备份该数据。iOS 会在必要时从 Caches 目录中删除您的文件，因此如果数据文件被删除，您的应用程序将需要正常降级。

[http://developer.apple.com/library/ios/#qa/qa1719/_index.html](http://developer.apple.com/library/ios/#qa/qa1719/_index.html)

# android - 如何从 CursorAdapter 覆盖 getItemId(int pos) 方法？

> ID：10891272
> 
> 赞同：5
> 
> 时间：2012-06-05T03:41:59.570
> 
> 标签：android, android-cursoradapter

由于此处的另一个答案，我收到了这个问题，但没有解释如何做我所问 [的如何在使用自定义适配器时获取 onItemClick(ListView) 中的行的 ID？](https://stackoverflow.com/questions/4826683/how-to-get-the-id-of-the-row-in-onitemclicklistview-when-using-a-custom-adapte)

在那个问题中接受的答案是我需要的，因为我也在制作自己的自定义适配器（CursorAdapter），因此我会遇到同样的问题。问题是我不知道如何做到这一点。我正在查看文档，但不确定如何从游标访问 _id 列。由于 Doc 没有常量，我们可以从我那里获得该信息。任何解决它的帮助将不胜感激。

编辑：我不清楚我的问题是什么，但只是想澄清一下，就像标题一样，我如何覆盖我创建的 CursorAdapter 自定义类中的 getItemId() 方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T03:55:43.493

假设您没有 Cursor 作为适配器的成员：

```
@Override
public long getItemId(int position) {
    Cursor cursor = getCursor();
    cursor.moveToPosition(position);
    return cursor.getLong(mCursor.getColumnIndex("_id"));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T04:13:01.293

我知道这并不能回答提出的问题，但 Sam 解决了这个问题。我想我会发布这个，因为 OP 部分似乎有些混乱。

以下是`onListItemClick`来自包含使用自定义光标适配器创建的列表的活动的方法：

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // Your code here
} 
```

`long id`是单击的行中包含的数据的行 ID（当列表由游标适配器提供时）。无需覆盖`getItemId`.

`getItemId`如果您执行诸如将不同行中的信息放入单行之类的操作，则只需覆盖（根据我的经验）。只要列表行的所有数据都来自数据库中的同一行，就没有必要那么麻烦。

我想您可能需要使用它的另一次是，如果您从游标中获取数据并将其放入数组中，然后使用数组适配器......但这似乎很迂回......

# java - 无法找出正确的参数形式 - 从 Java 中的静态嵌套类中调用方法

> ID：10891274
> 
> 赞同：0
> 
> 时间：2012-06-05T03:42:33.990
> 
> 标签：java, android, static, nested-class

我正在测试从 Java Android 示例站点复制的代码。当用户单击当前活动的一行时，我正在尝试对其进行修改以启动新活动。所以我正在使用 Intent 方法，但我无法弄清楚如何将当前 View 实例参数引用到 Intent 方法。

我尝试了几十种组合，并花了 2 天时间研究。这对我认识的许多人来说似乎很基础，但我很抱歉，这是我学习 Java、Eclipse 和 Android SDK（目标 = API 8）的第 2 周

```
 public class CustomListViewDemo extends ListActivity {
private EfficientAdapter adap;
private static String[] data = new String[] { "0", "1" };
private static String[] TitleString = new String[] { "Title1", "Title2" };
private static String[] DetailString = new String[] { "Detail1", "Detail2" };

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);
    adap = new EfficientAdapter(this);
    setListAdapter(adap);
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    Toast.makeText(this, "Click-" + String.valueOf(position),
            Toast.LENGTH_SHORT).show();
}

public static class EfficientAdapter extends BaseAdapter implements
        Filterable {
    private LayoutInflater mInflater;
    private Bitmap mIcon1;
    private Context context;

    public EfficientAdapter(Context context) {
        // Cache the LayoutInflate to avoid asking for a new one each time.
        mInflater = LayoutInflater.from(context);
        this.context = context;
    }

    /**
     * Make a view to hold each row.
     * 
     */
    public View getView(final int position, View convertView,
            ViewGroup parent) {
        ViewHolder holder;

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.adaptor_content, null);

            holder = new ViewHolder();
            holder.textLine = (TextView) convertView
                    .findViewById(R.id.textLine);
            holder.buttonLine = (Button) convertView
                    .findViewById(R.id.buttonLine);
            holder.DbuttonLine = (Button) convertView
                    .findViewById(R.id.DbuttonLine);
            holder.textLine2 = (TextView) convertView
                    .findViewById(R.id.textLine2);

            convertView.setOnClickListener(new OnClickListener() {
                private int pos = position;

                @Override
                public void onClick(View v) {
                    // Toast.makeText(context, "Click-" +
                    // String.valueOf(pos),
                    // Toast.LENGTH_SHORT).show();

        // ******************** ERROR IS LINE BELOW *********
                    // "No enclosing instance of the type CustomListViewDemo is accessible in scope"
                    Intent i = new Intent(CustomListViewDemo.this, IntentA.class);
                    startActivity(i);

                }
            });

            holder.buttonLine.setOnClickListener(new OnClickListener() {
                private int pos = position;

                @Override
                public void onClick(View v) {
                    Toast.makeText(context,
                            "Delete-" + String.valueOf(pos),
                            Toast.LENGTH_SHORT).show();

                }
            });

            holder.DbuttonLine.setOnClickListener(new OnClickListener() {
                private int pos = position;

                @Override
                public void onClick(View v) {
                    Toast.makeText(context,
                            "Details-" + String.valueOf(pos),
                            Toast.LENGTH_SHORT).show();

                }
            });

            convertView.setTag(holder);
        } else {
            // Get the ViewHolder back to get fast access to the TextView
            // and the ImageView.
            holder = (ViewHolder) convertView.getTag();
        }

        holder.textLine.setText(TitleString[position]
                + String.valueOf(position));
        holder.textLine2.setText(DetailString[position]
                + String.valueOf(position));

        return convertView;
    }

    static class ViewHolder {
        TextView textLine;
        TextView textLine2;
        Button buttonLine;
        Button DbuttonLine;

    }

    @Override
    public Filter getFilter() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return data.length;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return data[position];
    }

} 
```

}

我已经看过很多关于如何引用嵌套类的外部成员的示例，但没有找到一个很好的示例来查找外部类的视图实例以用作方法参数。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:49:48.860

```
CustomListViewDemo.this 
```

为了`this`工作，你需要一个实例。

在静态嵌套类中，没有外部实例。

您必须将类设置为“非静态”，或者显式传递对您要在此处使用的 CustomListViewDemo 实例的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:49:50.607

如果您查看文档，您正在调用的构造函数 ( `new Intent(CustomListViewDemo.this, IntentA.class)`) 是这个：

```
public Intent (Context packageContext, Class<?> cls) 
```

由于您已经存储了一个上下文，您可以通过使用`new Intent(this.context, IntentA.class)`来解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T03:56:38.630

`EfficientAdapter`是一个静态类，所以你不一定有一个`CustomListViewDemo`可以使用的实例。静态意味着可以在*没有*实例的情况下使用该类，因此您的错误

```
"No enclosing instance of the type CustomListViewDemo is accessible in scope" 
```

您在这里有两个选择。

1) 遵循 dmon 的建议并使用您存储的上下文：

```
Intent i = new Intent(context, IntentA.class); 
```

2）不要制作`EfficientAdapter`静态类（让它成为静态的原因是什么？）

# ruby - Gem date_validator 不工作 Ruby 1.9.3 Rails 3.2.1

> ID：10891275
> 
> 赞同：4
> 
> 时间：2012-06-05T03:42:44.093
> 
> 标签：ruby, ruby-on-rails-3, gem

我刚刚安装了这个 gem：

```
gem install 'date_validation' 
```

而且我可以看到它已正确安装，因为它在我使用时出现在列表中：

```
gem list 
```

但是当我尝试将字段表单的内容验证为日期时，我收到此错误：

```
ArgumentError in ProductesController#new
Unknown validator: 'DateValidator' 
```

我使用此代码来验证：

```
validates :data_caducitat, :date => { :after => Proc.new { Time.now } } 
```

知道可能是什么问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:29:20.513

Rails 3 的简单日期验证器。与 Ruby 1.8.7、1.9.2 和 Rubinius 1.2.2 兼容。

这就是他们在[https://github.com/codegram/date_validator上写的](https://github.com/codegram/date_validator)

可能是与 1.9.3 版本不兼容

* * *

改用这个。

[https://github.com/adzap/validates_timeliness](https://github.com/adzap/validates_timeliness)

为我工作！

# asp.net - CrossPagePostback：原始页面加载了两次

> ID：10891279
> 
> 赞同：0
> 
> 时间：2012-06-05T03:43:10.683
> 
> 标签：asp.net, vb.net

我有一个使用 CrossPagePostback 的 ASP.NET 4.0 应用程序。我刚刚注意到我的原始页面被加载了两次，但我找不到原因。这是一般逻辑：

**BasePage.vb：**

```
Public Class BasePage
    Inherits System.Web.UI.Page

Protected Overrides Sub OnPreInit(e As System.EventArgs)
    If IsCrossPagePostBack Then Exit Sub
    ...
    Common code
    ...
    MyBase.OnPreInit(e)
End Sub

Protected Overrides Sub OnInit(e As System.EventArgs)
    If IsCrossPagePostBack Then Exit Sub
    ...
    Common code
    ...
    MyBase.OnInit(e)
End Sub

Protected Overrides Sub OnLoad(e As System.EventArgs)
    If IsCrossPagePostBack Then Exit Sub
    ...
    Common code
    ...
    MyBase.OnLoad(e)
End Sub

End Class 
```

**Page1.vb.aspx：**

```
Public Class _Page1
    Inherits BasePage

Private Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    ...
    Page1 specific code
    ...
End Sub

End Class 
```

**Page2.vb.aspx：**

```
Public Class _Page2
    Inherits BasePage

Private Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    ...
    Page2 specific code
    ...
End Sub

End Class 
```

在 Page1.aspx 中，我有一个 ASP LinkBut​​ton，其中 PostBackUrl 设置为 Page2.aspx。我在 BasePage.vb 中的 OnPreInit、OnInit 和 OnLoad 中设置断点。当在 Page1.aspx 中单击 LinkBut​​ton 时，所有 3 个页面事件都会为 Page1.aspx 触发 - IsCrossPagePostBack=True，这是我对原始页面的期望。然后为 Page2.aspx 和 IsCrossPagePostback=False 触发所有 3 个页面事件，这又是预期的。

我希望此时两个页面都完成触发这些页面事件。我什至可以看到 Page2.aspx 已呈现并且在我的浏览器中可见，但由于某种原因再次触发 Page1.aspx 页面事件，这次 IsCrossPagePostback=False 允许为原始页面运行不需要的代码。

如果您不设置断点并调试此代码，您将永远不会知道它正在发生。发生这种情况没有任何明显的不利影响，除了它会花费处理时间而且我知道这是错误的。我只是无法确定是什么导致 Page1.aspx 在加载 Page2.aspx 后再次加载。

在我的调用堆栈窗口中没有调用者，只有一行包含当前的 Sub（OnPreInit、OnInit 或 OnLoad）。

我已经逐步跟踪了代码。我明白 Page2.aspx 已完全加载，然后再次出现在 Page1.aspx 的页面事件中。

我还在 Page2.aspx 中有一个 LinkBut​​ton 控件，它的 PostBackUrl 设置为 Page1.aspx - 但没有这个问题。

有谁知道可能导致这种情况或如何调试它？我看过一些帖子说空的 img 标签会导致它，但这不是这里的问题。

**编辑：**

经过一整夜的调试和研究，我确定我最初的 CrossPagePostback 问题实际上是由缺少图像的 IMG 标签引起的。这对我来说是个大问题，因为 IMG SRC= URL 来自我无法控制的 REST 响应中收到的数据。

REST 响应包含大量数据，其中一些是与产品相关的图像的 URL。图像对于页面信息至关重要。有数以百万计的产品，碰巧我在一个缺少图像的产品上注意到了这个问题。99.99% 的产品都有有效的图片 URL，所以这不会是一个常见的问题。

然而，我真的不希望我的原始页面加载两次，我想阻止它发生。如果目标页面中的 IMG SRC= 损坏，CrossPagePostback 场景中的原始页面将加载两次，这是一个错误吗？有修复吗？？

我打算做更多的研究，但我想我会立即发布我的问题的后续内容。任何人都知道解决方案/修复？我已经阅读了关于 SO 的类似帖子，丢失的图像 src 将导致原始 CrossPagePostback 页面加载两次。答案似乎总是正确的 src URL 或使图像可用，这样就不会发生这种情况。不幸的是，我没有这些选项中的任何一个 - img SRC 是绝对正确的，正如收到的 REST 响应中提供的那样，并且图像不是我的，它应该位于 REST 响应中指定的远程服务器上。

除了在渲染我的页面之前检查每个图像的存在之外，我不知道有什么解决方法。检查存在不是一个好的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T11:45:24.930

经过一整夜的调试和研究，我确定我最初的 CrossPagePostback 问题实际上是由缺少图像的 IMG 标签引起的。这对我来说是个大问题，因为 IMG SRC= URL 来自我无法控制的 REST 响应中收到的数据。

REST 响应包含大量数据，其中一些是与产品相关的图像的 URL。图像对于页面信息至关重要。有数以百万计的产品，碰巧我在一个缺少图像的产品上注意到了这个问题。99.99% 的产品都有有效的图片 URL，所以这不会是一个常见的问题。

然而，我真的不希望我的原始页面加载两次，我想阻止它发生。如果目标页面中的 IMG SRC= 损坏，CrossPagePostback 场景中的原始页面将加载两次，这是一个错误吗？有修复吗？？

我打算做更多的研究，但我想我会立即发布我的问题的后续内容。任何人都知道解决方案/修复？

谢谢。

# php - 这种编码叫什么？

> ID：10891281
> 
> 赞同：3
> 
> 时间：2012-06-05T03:43:18.757
> 
> 标签：php

我在数据库的 Wordpress 中看到它，现在在 cookie 中看到类似的东西。什么样的解析器解析这个：

```
a:4:{s:14:"clientsorderby";s:9:"firstname";s:12:"clientsorder";s:4:"DESC";s:13:"ordersorderby";s:2:"id";s:11:"ordersorder";s:4:"DESC";} 
```

我明白了，它的 a=array:x=number of children s=string:x=number of characters。

php 中是否有针对这种事情的内置解析器？他们为什么使用这种方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T03:44:06.257

它是 PHP 内置的[`serialize()`](http://php.net/serialize)，可以用“解码”[`unserialize()`](http://php.net/unserialize)

这是一个例子：

```
$serialized = 'a:4:{s:14:"clientsorderby";s:9:"firstname";s:12:"clientsorder";s:4:"DESC";s:13:"ordersorderby";s:2:"id";s:11:"ordersorder";s:4:"DESC";}';
$unserialized = unserialize( $serialized);

var_dump( $unserialized); 
```

**输出：**

```
array(4) {
  ["clientsorderby"]=>
  string(9) "firstname"
  ["clientsorder"]=>
  string(4) "DESC"
  ["ordersorderby"]=>
  string(2) "id"
  ["ordersorder"]=>
  string(4) "DESC"
} 
```

# android - Android Array List 未捕获的异常

> ID：10891282
> 
> 赞同：0
> 
> 时间：2012-06-05T03:43:21.983
> 
> 标签：android, arrays, exception

我正在尝试将我的数据库中的位置列表拉入一个数组列表，稍后我可以用它来创建一个对话框，但是当我调用下面的方法时，我可以看到下面的错误。谁能看到我做错了什么以及为什么我在捕捉它时会得到一个未捕获的异常？我非常感谢您的帮助！

```
public void allLocations() {

    try{
        Cursor mCursor = mDb.rawQuery("SELECT * FROM " + TABLE_LOCATION, null);
        ArrayList<String> mArrayList = new ArrayList<String>();
        mCursor.moveToFirst();
        while(!mCursor.isAfterLast()) {
             mArrayList.add(mCursor.getString(mCursor.getColumnIndex(LOCATION)));
             mCursor.moveToNext();
        }
    }catch (SQLiteException e){
        Log.e("All Locations", "Error getting locations: " + e.toString());
    }
} 
```

// 错误

```
06-05 03:36:29.345: D/dalvikvm(2110): GC_EXTERNAL_ALLOC freed 655 objects / 51272 bytes in 77ms
06-05 03:36:30.185: V/one(2110): locationSelection
06-05 03:36:31.805: D/AndroidRuntime(2110): Shutting down VM
06-05 03:36:31.805: W/dalvikvm(2110): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
06-05 03:36:31.825: E/AndroidRuntime(2110): FATAL EXCEPTION: main
06-05 03:36:31.825: E/AndroidRuntime(2110): java.lang.NullPointerException
06-05 03:36:31.825: E/AndroidRuntime(2110):     at com.myapp.sqlite.Location.allLocations(Location.java:137)
06-05 03:36:31.825: E/AndroidRuntime(2110):     at com.myapp.Options.displayLocations(Options.java:178)
06-05 03:36:31.825: E/AndroidRuntime(2110):     at com.myapp.Options$1.onClick(Options.java:69)
06-05 03:36:31.825: E/AndroidRuntime(2110):     at android.view.View.performClick(View.java:2408)
06-05 03:36:31.825: E/AndroidRuntime(2110):     at android.view.View$PerformClick.run(View.java:8816)
06-05 03:36:31.825: E/AndroidRuntime(2110):     at android.os.Handler.handleCallback(Handler.java:587)
06-05 03:36:31.825: E/AndroidRuntime(2110):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-05 03:36:31.825: E/AndroidRuntime(2110):     at android.os.Looper.loop(Looper.java:123)
06-05 03:36:31.825: E/AndroidRuntime(2110):     at android.app.ActivityThread.main(ActivityThread.java:4627)
06-05 03:36:31.825: E/AndroidRuntime(2110):     at java.lang.reflect.Method.invokeNative(Native Method)
06-05 03:36:31.825: E/AndroidRuntime(2110):     at java.lang.reflect.Method.invoke(Method.java:521)
06-05 03:36:31.825: E/AndroidRuntime(2110):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-05 03:36:31.825: E/AndroidRuntime(2110):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-05 03:36:31.825: E/AndroidRuntime(2110):     at dalvik.system.NativeStart.main(Native Method) 
```

//整个班级

```
public class Location {

    private DatabaseHelper mDbHelper;
    private SQLiteDatabase mDb;
    private final Context mCtx;

    private static final String location = ("CREATE TABLE " + TABLE_LOCATION
            + " (" + LOCATION + " TEXT," + LOCATION_ID + " TEXT " + ");");

    private static class DatabaseHelper extends SQLiteOpenHelper {

        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL(location);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_NAME);
            onCreate(db);

        }
    }

    public Location(Context ctx) {
        this.mCtx = ctx;
    }

    public Location open() throws SQLException {
        this.mDbHelper = new DatabaseHelper(this.mCtx);
        this.mDb = this.mDbHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        this.mDbHelper.close();
    }

    public long addLocation(String locations, String location_id) {

        ContentValues values = new ContentValues();

        values.put(LOCATION, locations);
        values.put(LOCATION_ID, location_id);

        return this.mDb.insert(TABLE_LOCATION, null, values);
    }

    public String getLocation(long l) throws SQLException {

        String[] columns = new String[] { LOCATION, LOCATION_ID };
        Cursor c = mDb.query(TABLE_LOCATION, columns, null, null, null, null,
                null);
        String result = "";

        int gLocation = c.getColumnIndex(LOCATION);
        int gLocationID = c.getColumnIndex(LOCATION_ID);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            result = result + c.getString(gLocation) + " "
                    + c.getString(gLocationID) + " " + "\n";
        }
        return result;
    }

    /** Delete all from the location table */
    public void deleteAllLocations() {
        mDb.delete(TABLE_LOCATION, null, null);
    }

    /** Check that there are locations stored */
    public boolean countLocation() {

        Cursor count = mDb.rawQuery("SELECT COUNT(*) FROM " + TABLE_LOCATION,
                null);

        if (count == null) {
            return true;
        }
        return false;
    }

    public void allLocations() {

        try{
            Cursor mCursor = mDb.rawQuery("SELECT * FROM " + TABLE_LOCATION, null);
            ArrayList<String> mArrayList = new ArrayList<String>();
            mCursor.moveToFirst();
            while(!mCursor.isAfterLast()) {
                 mArrayList.add(mCursor.getString(mCursor.getColumnIndex(LOCATION)));
                 mCursor.moveToNext();
            }
        }catch (SQLiteException e){
            Log.e("All Locations", "Error getting locations: " + e.toString());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T03:47:18.193

mDb 至少在此处显示的代码中为空。

您是否有其他代码正在初始化 mDb 引用？

**编辑 ：]**

实际上可能需要在使用此类的 Activity 类中进行更改。

在任何其他方法之前，您需要确保在您的活动中调用 location.open()。

# java - 如何在 Java 中创建一个新进程？

> ID：10891285
> 
> 赞同：1
> 
> 时间：2012-06-05T03:43:33.927
> 
> 标签：java, process, runtime.exec, processbuilder

我们需要从 Java 创建一个新进程。我知道我们可以通过使用创建新的子流程`ProcessBuilder`，`Runtime.exec`但我们的要求是创建一个完整的新流程。换句话说，我们不想让生成的进程在 JVM 退出时退出。

有谁知道我们如何使用 Java API 或 3 ^(rd)方框架来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:09:23.993

我制作了一个测试 java 程序，它产生了另一个进程。当 java 程序退出时，生成的进程仍然存在。那么问题是什么？无论如何，如果遇到麻烦，您总是可以生成一个 shell (.bat) 文件并从中生成您的进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:00:01.330

不要认为这可以在没有 OS 帮助的情况下独立完成。但是，这里有一个类似的线程讨论相同的内容。

[如何从 Java 程序启动完全独立的进程](https://stackoverflow.com/questions/931536/how-do-i-launch-a-completely-independent-process-from-a-java-program)

# ruby - 使用 MacRuby 转换图像

> ID：10891288
> 
> 赞同：1
> 
> 时间：2012-06-05T03:43:53.967
> 
> 标签：ruby, image, macruby, scripting-bridge

有人知道如何用 MacRuby（或普通 ruby​​）转换图像吗？我想'ScriptingBridge' 框架将能够处理它。

另外，我宁愿不使用 ImageMagick 或类似的东西（不过，更轻的就可以了）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:42:03.703

你可以用 MacRuby 做到这一点：

```
 framework 'AppKit'

 input_file_path = "/Users/username/Desktop/input_file.png"
 img_data = NSData.dataWithContentsOfFile(input_file_path)
 bitmap = NSBitmapImageRep.imageRepWithData(img_data)

 new_data = bitmap.representationUsingType(NSJPEGFileType, properties: nil)  # NSBMPFileType, NSGIFFileType, NSJPEGFileType, NSPNGFileType, or NSTIFFFileType.

 output_file_path = "/Users/username/Desktop/output_file.jpeg"
 new_data.writeToFile(output_file_path, atomically: true) 
```

大功告成，NSBitmapImageRep#representationUsingType:properties: 可以为 bmp、gif、jpeg、png 或 tiff 采用 NSBMPFileType、NSGIFFileType、NSJPEGFileType、NSPNGFileType 或 NSTIFFFileType

# html - 防止浮动左div转到新行

> ID：10891293
> 
> 赞同：13
> 
> 时间：2012-06-05T03:44:47.873
> 
> 标签：html, css

我有 4 个 div 设置为向左浮动，但最后的 div 不断在一个较小的屏幕上换行两个新行，这真的让我很烦……我希望它们随着屏幕尺寸缩放，所以它们总是保持在同一行不管屏幕大小......我尽量不使用桌子（这很诱人，因为他们对此很可靠！！！）

我想知道如何解决这个烦人的问题，以便无论屏幕大小如何，它们都始终保持原位？

我有这个作为我的 CSS：

```
.wrapper{
    margin:0 auto;
    width: 80%;
    display: table-cell;
}
.gridf{
    float:left;
    margin-right:3px;
    width:200px;
    min-height:200px;
    border:1px solid white;
}
.grid{
    float:left;
    margin-left: 3px;
    margin-right:3px;
    width:200px;
    min-height:200px;
    border:1px solid white;
}
.gridl{
    float:left;
    margin-left: 3px;
    width:200px;
    min-height:200px;
    border:1px solid white;
} 
```

我的 HTML：

```
<div style="overflow: hidden;">

 <div class="wrapper">

        <div class="gridf"></div>
        <div class="grid"></div>
        <div class="grid"></div>
        <div class="gridl"></div>

 </div> 

</div> 
```

请帮忙 :D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T04:10:06.027

您的包装器是一个百分比宽度容器，带有 4 个固定宽度的浮动子元素。

包装器的宽度取决于视口的宽度。如果视口变窄到包装器的宽度小于 4 个子元素宽度的总和，那么它们自然不会全部适合，因此会包装。

解决方法是确保您的包装器不会变得小于孩子的组合。

因此，将子元素的宽度、边框和边距相加，然后给包装器一个与其`min-width`相等的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T04:39:07.433

嗨，我认为你应该检查一下这个演示

```
.wrapper {
  margin: 0 auto;
  width: 80%;
  border: solid 1px red;
  overflow: hidden;
}
.gridf,
.grid,
.gridl {
  Background: green;
  width: 24%;
  min-height: 100px;
  float: left;
  margin: 2px 0;
}
.gridf {} .grid {
  margin: 2px 1%;
}
.gridl {
  background: yellow;
}
```

```
<div class="wrapper">

  <div class="gridf">One</div>
  <div class="grid">Two</div>
  <div class="grid">Three</div>
  <div class="gridl">Four</div>

</div>
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-31T19:03:54.977

尽管这是一篇旧帖子，但我认为我也遇到的问题是您希望所有这些单元格的大小都是固定的，而不是 %，对吧？您选择的解决方案更改了您指定的初始格式`width:200px;`

好吧，我建议看这里：http: [//jsfiddle.net/gn2bg/](http://jsfiddle.net/gn2bg/)

我做的唯一一件事就是在你的单元格周围添加内部包装：

```
.inwrapper{
    float:left;
    overflow: hidden;
    min-width: 830px;
} 
```

和这样的新html：

```
<div class="wrapper">
  <div class="inwrapper">
    <div class="gridf"></div>
    <div class="grid"></div>
    <div class="grid"></div>
    <div class="gridl"></div>
  </div>
</div> 
```

请注意，您的包装器需要 80% 的空间。然而，inwrapper 告诉它它的大小是固定的 - 830px（所有内部 div 大小加上填充空间的总和。）这种方式 inwrapper 使用“肘部”来拉伸宽度，并覆盖这 80% 的“包装器”

我了解您已经决定什么是您的最佳解决方案。我将把这个回复留给未来需要准确回答你的确切问题的任何人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T03:52:53.693

您可以尝试从包装器中删除表格单元格显示规则，并在子 div 上设置百分比（或最小宽度），**[例如 jsFiddle 示例](http://jsfiddle.net/j08691/5GrKU/)**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T03:55:04.570

这应该够了吧 ：

```
 <div class="wrapper">
     <div style="width:850px">
        <div class="gridf"></div>
        <div class="grid"></div>
        <div class="grid"></div>
        <div class="gridl"></div>
     </div>
 </div> 
```

这将在任何浏览器上得到支持。 [http://jsfiddle.net/5GrKU/3/](http://jsfiddle.net/5GrKU/3/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T04:14:31.063

**HTML**

```
<div style="overflow: hidden;">

 <div class="wrapper">

        <div class="gridf"></div>
        <div class="grid"></div>
        <div class="grid"></div>
        <div class="gridl"></div>

 </div>

</div> 
```

**CSS**

```
.wrapper{
    margin:0 auto;
    width: 80%;
    display: inline;
}
.gridf{
    float:left;
    margin-right:3px;
    width:20%;
    min-height:200px;
    border:1px solid red;
}
.grid{
    float:left;
    margin-left: 3px;
    margin-right:3px;
    width:20%;
    min-height:200px;
    border:1px solid red;
}
.gridl{
    float:left;
    margin-left: 3px;
    width:20%;
    min-height:200px;
    border:1px solid red;
} 
```

供您参考，我还添加了演示的 URL。[http://jsfiddle.net/sg8FE/](http://jsfiddle.net/sg8FE/)

**更新**

只需更改`display:inline`包装类以`display:block`休息一切都是正确的，并且 div 居中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-05T06:50:53.893

通过在您的内部 div 中提供固定宽度，无论视口的大小如何，您都在强制它们具有该宽度。并且将外部 div 的宽度设置为 80%，您将随着视口的宽度缩小其大小。您需要为所有这些 div 提供固定宽度或为所有 div 提供相对宽度。

# yii - 在 YIi 中建立关系时的条件

> ID：10891294
> 
> 赞同：3
> 
> 时间：2012-06-05T03:45:00.583
> 
> 标签：yii

代理人：

`agent_id (primary key)`

用户：

```
f_id (foreign key)
type 
```

我以这种方式创建了关系

```
public function relations() {
    return array(
        'user' => array(self::HAS_ONE, 'Users', 'f_id'),
    );
} 
```

但我想添加更多条件，例如仅*`type=3`*在用户表中加入。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-14T14:48:47.077

如果您使用它，则不会出现“未定义属性“CHasOneRelation.0”之类的错误：

```
public function relations()
{
    return array(
        'user' => array(
            self::HAS_ONE, 
            'Users', 
            'f_id',
            'on' => 'user.ref_type = :type', 
            'params' => array(':type' => 3))
    );
} 
```

见这个链接：[http ://www.yiiframework.com/forum/index.php/topic/10185-using-relations-and-conditions/](http://www.yiiframework.com/forum/index.php/topic/10185-using-relations-and-conditions/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-05T03:57:24.063

在您的关系上添加条件

```
public function relations() {
    return array(
        'user' => array(self::HAS_ONE, 'Users', 'f_id', array(
            'condition' => 'user.type = :type',
            'params' => array(':type'=>3)
        )),
    );
} 
```

[http://www.yiiframework.com/doc/guide/1.1/en/database.arr#relational-query-options](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#relational-query-options)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T13:52:00.297

您应该创建一个函数来获取用户而不是使用延迟加载，即使您不使用此关系也会使用更多查询。

```
public function getUser(){
    return Users::model()->find(array(
        'condition'=>'type = :type', 
        'params' => array(':type'=>3)
    ));  
} 
```

通过使用它，您可以使用缓存功能来缓存关系不支持的查询。

```
public function getUser(){
    return Users::model()->cache(1000)->find(array(
        'condition'=>'type = :type', 
        'params' => array(':type'=>3)
    ));  
} 
```

# prolog - 为什么我的列表没有被填充？

> ID：10891296
> 
> 赞同：1
> 
> 时间：2012-06-05T03:46:18.020
> 
> 标签：prolog

对于一个任务，我们被要求写一个`route/3`成功的谓词，如果有一条路线 from `Start`to `Finish`, visit town 在列表中`Visits`。

我想出了一个解决方案的想法，但由于某种原因，`Visits`列表在终止后总是空的`route`，我不知道为什么会这样。我不是在寻找问题的解决方案，只是为我指明正确的方向。

到目前为止，这是我的代码：

请注意，我的调用`write`只是出于调试原因。

```
road('Wellington', 'Palmerston North', 143).
road('Palmerston North', 'Wanganui', 74).
road('Palmerston North', 'Napier', 178).
road('Palmerston North', 'Taupo', 259).
road('Wanganui', 'Taupo', 231).
road('Wanganui', 'New Plymouth', 163).
road('Wanganui', 'Napier', 252).
road('Napier', 'Taupo', 147).
road('Napier', 'Gisborne', 215).
road('New Plymouth', 'Hamilton', 242).
road('New Plymouth', 'Taupo', 289).
road('Taupo', 'Hamilton', 153).
road('Taupo', 'Rotorua', 82).
road('Taupo', 'Gisborne', 334).
road('Gisborne', 'Rotorua', 291).
road('Rotorua', 'Hamilton', 109).
road('Hamilton', 'Auckland', 126).

route(Start, Start, Visits) :-
    write(Visits), nl.

route(Start, Finish, Visits) :-
    write(Visits),nl,
    road(Finish, From, _),
    route(Start, From, [From | Visits]).

test :-
    Visits = [],
    route('Auckland', 'Wellington', Visits),
    write(Visits). 
```

运行时的输出`test.`：

```
1 ?- 测试。
[]
[北帕默斯顿]
[旺格努伊，北帕默斯顿]
[陶波、旺格努伊、北帕默斯顿]
[汉密尔顿、陶波、旺格努伊、北帕默斯顿]
[奥克兰、汉密尔顿、陶波、旺格努伊、北帕默斯顿]
[]
真的 。
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:41:20.153

Prolog 中的变量是*统一*的，不是*赋值*的。当然，这个论点是你课程的一部分。

然后`Visits`在`test`开始时保留您“分配”的空列表（累加器）。您应该向 中添加（或更好地插入）一个`route`包含构建列表的参数。就像是

```
test :-
    route('Auckland', 'Wellington', [], Visits),
    write(Visits). 
```

# ios - UITextField 自动开始编辑模式

> ID：10891298
> 
> 赞同：1
> 
> 时间：2012-06-05T03:46:35.060
> 
> 标签：ios, uitextfield, uidatepicker

我`UITextFields`在一个`UITableView`（3 个单独的行）中有三个。前两个是标准`UITextFields`的，需要文本输入，但第三个需要数据输入并与`UIDatePicker`.

问题陈述：当屏幕加载时，第三个文本字段自动开始编辑并弹出日期选择器。这很烦人。我只希望屏幕在执行任何操作之前等待用户开始输入。请在下面找到我的`viewDidLoad`代码。非常感谢您的帮助/见解

```
- (void)viewDidLoad
{
[super viewDidLoad];

[scrollView setContentSize:CGSizeMake(320, 910)];

expirationDatePicker.hidden = YES;
expirationDatePicker.date = [NSDate date];
[expirationDatePicker addTarget:self
                         action:@selector(changeDateValue:)
               forControlEvents:UIControlEventValueChanged];

[self configureView];
}

- (void)configureView
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);  
    NSString *documentsPath = [paths objectAtIndex:0]; //Get the docs directory 
    NSString *filePath = [documentsPath stringByAppendingPathComponent:[self.detailItem cardName]];
    filePath = [filePath stringByAppendingPathExtension:@".png"];
    NSData *pngData = [NSData dataWithContentsOfFile:filePath];
    imgPickerButton.imageView.image = [UIImage imageWithData:pngData];
} 
```

附件是屏幕加载后立即截取的屏幕截图。您可以看到第三个文本字段已进入编辑模式。

![文本字段的屏幕截图](../Images/810dcb8ae8d0d68b3c785d289b0e4e2a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T03:58:24.250

我会这样做的一种方法是将您的日期文本字段转换为自定义 UITableViewCell 中的 UIButton 并在用户触摸按钮时调出日期选择器。

当用户选择完日期后，更改按钮的标题以反映日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:10:36.403

好的 - 发现了问题。在我的表格视图中，我有自定义 UITableViewCells 并且在那些自定义单元格中，出于某种原因，我有这种方法 -

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];
    [self.textField becomeFirstResponder];
} 
```

这导致各个 tableviewcells 中的文本字段自动进入编辑模式。一旦我删除了这段代码，它就停止了。

# javascript - 如何使用 Valums Ajax File-Uploader 触发上传文件？

> ID：10891305
> 
> 赞同：5
> 
> 时间：2012-06-05T03:48:25.237
> 
> 标签：javascript, jquery, html, ajax

使用 Valums Ajax 文件上传器时，如何触发上传？

默认行为是在用户选择文件后立即开始上传。我想防止这种情况发生，而是在用户选择文件后单击单独的“上传”按钮时触发上传。

我查看了代码，发现上传从`change`附加到文件输入的事件开始。我首先添加`return false;`到`onSubmit`函数，然后将点击事件附加到触发更改事件的另一个按钮：

```
$('#startUpload').on('click', function() {  
    // some conditionals
    $('input[name="file"]').trigger('change');  
}); 
```

那是行不通的。它只是再次打开文件菜单。

如何防止在用户选择文件后立即发生上传，而是在用户单击另一个按钮时触发它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T19:39:13.960

为此，您必须修改 file-uploader.js 文件。在第 309 行，修改 onChange 函数以返回 false。然后在它上面添加如下函数，这样代码就变成了：

```
startUpload: function(){
    this._onInputChange(this._button.getInput());
},
_createUploadButton: function(element){
    var self = this;

    return new qq.UploadButton({
        element: element,
        multiple: this._options.multiple && qq.UploadHandlerXhr.isSupported(),
        onChange: function(input){
            return false;
        }
    });
}, 
```

然后在您的 HTML 文件中，在您的按钮单击或任何其他事件中，调用

```
uploader.startUpload(); 
```

其中 uploader 是您的 qq.FileUploader() 对象的名称。

希望有帮助:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T07:57:09.013

Valums Ajax 文件上传器现在支持此功能。您可以对文件进行排队并在按钮单击时触发上传

```
 var uploader2 = new qq.FileUploader({
    element: $('#manualUploadModeExample')[0],
    action: "success.html",
    autoUpload: false,
    demoMode: true,
    uploadButtonText: "Select Files"
});

$('#triggerUpload').click(function() {
    uploader2.uploadStoredFiles();
}); 
```

有关更多信息，请查看此链接：[valuems file uploder](http://fineuploader.com/)

# c++ - 需要地图但只需要知道是否包含？

> ID：10891306
> 
> 赞同：1
> 
> 时间：2012-06-05T03:48:27.067
> 
> 标签：c++

我想知道是否有更适合我需要的结构。

我需要一本字典或字符串（单词）。我只需要知道一个给定的单词是否在字典中。

制作字符串，字符串的映射似乎很浪费内存。有没有更好的办法？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T03:49:53.040

使用`std::set<string>`. 您可以使用`std::set::find`来检查一个单词是否存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:50:12.450

你想要的是一个`std::set< std::string >`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T03:56:33.763

Naveen 和 K-ballo 的答案是正确的。在为您的需求选择正确的 STL 容器时，这里有一些内容可能会对您有所帮助。注意：这不考虑 C++11 类型，但它会帮助您开始使用 STL：![在此处输入图像描述](../Images/3da4c8c5254b527e85fb002d22a6d8e8.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T03:58:02.750

的替代方案`std::set`是`std::unordered_set`。第一个通常实现为红黑树（对数复杂度），第二个是哈希表（平均常数时间复杂度）。`unordered_set`在 C++11、C++03 TR1 和 Boost 中可用。

# mysql - 加入 IF 条件？

> ID：10891312
> 
> 赞同：1
> 
> 时间：2012-06-05T03:49:30.593
> 
> 标签：mysql, join

我有我的主表，我有 2 个要加入的表。如果员工是男性，我想加入表 A，如果员工是女性，我想加入表 B。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T03:54:59.200

怎么样

```
 SELECT ....
  FROM main JOIN A ON ...
  WHERE male
UNION ALL
  SELECT ....
  FROM main JOIN B ON ...
  WHERE female 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T03:55:58.780

您仍然可以连接两个表，但使用`CASE`语句来决定从哪个表中读取。

```
SELECT CASE WHEN Table.Field = 'Male' THEN A.Field ELSE B.Field END AS Something
  FROM Table
  LEFT JOIN A on condition
  LEFT JOIN B on condition 
```

# asp.net-mvc - 远程连接到细胞的笔记本电脑，有人吗？

> ID：10891316
> 
> 赞同：0
> 
> 时间：2012-06-05T03:49:54.507
> 
> 标签：asp.net-mvc, mobile, silverlight-4.0, cloud, remote-desktop

我们需要一种解决方案，使我们能够通过互联网访问连接到手机的笔记本电脑。

大多数 VNC 类型的解决方案不允许这样做，因为手机就像路由器一样，没有我们可以访问的 IP 地址，而且手机不允许端口转发。

有谁知道远程桌面应用程序可以在客户端通过网络浏览器激活，然后通过网络浏览器控制远程机器。此外，我们需要能够在 Web 端完成品牌化，因为我们希望将解决方案集成到我们的自定义站点中。

如果有人有任何方向可以帮助我们进入，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:01:10.620

您的 Web 应用程序可以动态创建和提供指向相关笔记本电脑的 .rdp 文件。这里有一篇有趣的文章：

[http://www.perthstreetbikes.com/forum/f40/nerdy-tips-starting-vnc-rdp-hyperlink-125321/](http://www.perthstreetbikes.com/forum/f40/nerdy-tips-starting-vnc-rdp-hyperlink-125321/)

Web 应用程序需要知道每台笔记本电脑的当前 IP 地址（可能他们正在旅行/移动）。为了实现这一点，您可以在每台笔记本电脑上编写并安装一个简单的签到服务，只要 IP 发生变化，该服务就会使用笔记本电脑名称和当前 IP 给家里打电话。

请注意，一些远程位置（例如酒店）可能会阻止 RDP 端口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T02:05:49.167

VPN（虚拟专用网络）配置可以解决这个问题。

通过 Tether 连接到 VPN 主机的笔记本电脑 TCP 连接。VPN 为笔记本电脑中的虚拟网络适配器（由 VPN 客户端提供）分配一个 IP 地址。VPN 上的任何机器（或桥接到 VPN 网络）都可以访问 VPN 上的任何其他机器。不会有端口阻塞，因为网络连接是通过隧道进行的。

VPN 的配置会有些密集。最小配置是在主机和所有客户端上硬编码 VPN IP 地址。然后客户端将能够通过 IP 相互联系。这将允许 VNC 正常工作，理论上其他连接（如 FTP 或 Windows 网络）也能正常工作（尽管速度缓慢取决于链接速度）。

我相信有适用于 VPN 的 Microsoft 解决方案。如果我没记错的话，VPN 客户端是 Windows XP 内置的。我从未使用过他们的解决方案，我认为服务器端内置于 Windows 2003 及更高版本。

[http://en.wikipedia.org/wiki/Virtual_private_network](http://en.wikipedia.org/wiki/Virtual_private_network)

[http://technet.microsoft.com/en-us/network/bb545442.aspx](http://technet.microsoft.com/en-us/network/bb545442.aspx)

编辑：VPN 服务器本身需要位于静态 IP 上（如果是动态 IP，则可能是动态 DNS 服务），并且可以直接或通过端口转发从 Internet 访问。我不知道是否有提供 VPN 的服务。根据需求和预算，解决方案多种多样。

# r - 如何将 llply() 或 lapply() 应用于由 llply() 或 lapply() 生成的列表组件

> ID：10891321
> 
> 赞同：0
> 
> 时间：2012-06-05T03:51:14.297
> 
> 标签：r

我`cl_tabulate`用来获取有关 2009 年 KDD Cup 样本数据的一些统计数据。`df.trainbase`这是我正在使用的数据的示例部分...

```
 > sample <- df.trainbase[4100:4110,220:223]
    > sample
      Var220  Var221  Var222     Var223
      4100 qcEoI0_    oslk fXLavGi LM8l689qOp
      4101 OTg4K41    oslk N9WHLT9 LM8l689qOp
      4102 54petck    oslk eEfa_vf LM8l689qOp
      4103 m_dAM23    oslk nFzwuDg LM8l689qOp
      4104 ROeipLp    zCkv K2SqEo9 LM8l689qOp
      4105 4UxGlow    oslk catzS2D LM8l689qOp
      4106 rDm6pd1    oslk Q53Rkup LM8l689qOp
      4107 XqwYlW4    oslk sMvE4Qn LM8l689qOp
      4108 EncOVQC    oslk 8AGQQMs LM8l689qOp
      4109 b0v7gqP d0EEeJi 80xXg6w LM8l689qOp
      4110 3aBfc8E    oslk aXcOEra LM8l689qOp

    > tabs <- llply(sample,cl_tabulate) 
```

选项卡列表如下所示（显示 2 个列表元素）：

```
 > tabs
      $Var220
       values counts
    1  qcEoI0_      1
    2  OTg4K41      1
    3  54petck      1
    4  m_dAM23      1
    5  ROeipLp      1
    6  4UxGlow      1
    7  rDm6pd1      1
    8  XqwYlW4      1
    9  EncOVQC      1
    10 b0v7gqP      1
    11 3aBfc8E      1

    $Var221
     values counts
    1    oslk      9
    2    zCkv      1
    3 d0EEeJi      1 
```

我可以获得指定列表元素（即数据列）的最流行级别值的数量，如下所示：

```
 > max(tabs[[1]]$counts)

      [1] 37216 
```

但是如何获得`max(tabs[[i]]$counts)`所有人`i`（例如，`llply()`如果可能，使用）？我需要最流行级别的值以及每列出现的次数：

理想情况下，最终结果是每个变量的简单行，带有变量名称、最普遍的因子值和出现次数——以 Var196 为例：

```
 Var196   1K8T    49550 
```

是否可以将嵌套列表（例如上面的“选项卡”）传递给`llply()`并将其指向结构的列级别“下方”的某个元素？我没看到。

...解决方案（如下）是使用`melt()`

```
 > m = melt(tabs, id="values")
    > m <- m[-2]
    > m

    values value     L1
    1     qcEoI0_     1 Var220
    2     OTg4K41     1 Var220
    3     54petck     1 Var220
    4     m_dAM23     1 Var220
    5     ROeipLp     1 Var220
    6     4UxGlow     1 Var220
    7     rDm6pd1     1 Var220
    8     XqwYlW4     1 Var220
    9     EncOVQC     1 Var220
    10    b0v7gqP     1 Var220
    11    3aBfc8E     1 Var220
    12       oslk     9 Var221
    13       zCkv     1 Var221
    ... 
```

这正是我所需要的。

# wordpress - 如何将“名称”属性添加到侧边栏中的链接

> ID：10891322
> 
> 赞同：1
> 
> 时间：2012-06-05T03:51:14.483
> 
> 标签：wordpress

我需要为侧边栏中的所有链接添加“名称”属性。例如;

前

```
<li id="menu-item-573" class="gallery-menu-top menu-item menu-item-type-custom menu-item-object-custom menu-item-573"><a href="#">WEDDINGS</a></li> 
```

后

```
<li id="menu-item-573" class="gallery-menu-top menu-item menu-item-type-custom menu-item-object-custom menu-item-573"><a name="Weddings" href="#">WEDDINGS</a></li> 
```

**名称="婚礼"**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-05T03:59:44.187

如果可以将此类添加到侧边菜单UL“侧边栏”；并且 name 属性的值总是与链接的内容相匹配，那么这应该可以工作：

```
 $('.sidebar a').each(function(i, item){   
     var value = item.textContent;        
      $(item).attr('name', value );            
  }); 
```

这是一个工作示例= [http://jsfiddle.net/4SNv4/](http://jsfiddle.net/4SNv4/) -

编辑抱歉刚刚注意到这是一个文字新闻问题：所以你可能没有能力做上述事情。

# database - 将设置存储在数据库中以决定是否强制登录？

> ID：10891324
> 
> 赞同：0
> 
> 时间：2012-06-05T03:52:09.930
> 
> 标签：database, login, setting

我想动态管理我的网站。我已经建立了用于存储用户级别的数据库并成功检查了对页面的访问。现在我只想决定是否强制登录。将页面与其“needLogin”布尔字段一起存储在数据库中是否很好，这样每次用户访问页面时，数据库都会决定是否强制登录？我也很困惑决定是在前端还是后端强制登录？有没有更好的办法？

# c++ - 是否需要清除 STL 向量

> ID：10891325
> 
> 赞同：0
> 
> 时间：2012-06-05T03:52:25.863
> 
> 标签：c++, vector, stl

一个快速的问题 - 可能是风格。是否需要在不再需要向量时清除/清空向量，或者当不再需要容器时，您是否可以简单地依靠 STL 自行清理。

在这种情况下，我说的是不包含指针或其他需要删除的对象的基本向量，例如。

```
std::vector<double> myVector;
// use it
// finished with it
// use clear?
myVector.clear(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T03:56:47.057

清除向量没有任何好处，因为它不能保证放弃其存储。见`capacity()`。

如果您真的关心向量使用的内存，可以使用一个小技巧将其替换为空向量：

```
std::vector<double>().swap(myVector); 
```

当然，最简单的方法是让向量超出范围，它将自动销毁，并释放其所有存储空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T03:54:32.740

当向量对象超出范围时，与其关联的资源将被恢复。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T03:54:59.217

无需调用`clear`，`vector`会自行处理。`clear`仅在您想再次使用该对象但想删除其所有内容时使用。

# android - 如何在内部类中获取意图数据

> ID：10891327
> 
> 赞同：0
> 
> 时间：2012-06-05T03:52:50.873
> 
> 标签：android, android-intent

我有一项活动，其中有一些来自以前活动的数据：

```
final int pictureId = intent.getIntExtra("my.picture.id",0);
    final String headerId = intent.getStringExtra("my.header.id");
    final String bodyId = intent.getStringExtra("my.body.id"); 
```

在这个活动中，我有私人课程，我想在其中获取图片 ID 等数据，但我不知道如何。我如何在课堂上获取这些数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T03:56:54.473

在您的私人类的构造函数中添加一个参数。

```
public class YourActivity extends Activity {

PrivateClass mPrivateClass

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mPrivateClass= new PrivateClass(getIntent());
} 
```

您的私人课程将如下所示。

```
private class PrivateClass
{
    PrivateClass(Intent mIntent)
    {
       final int pictureId = intent.getIntExtra("my.picture.id",0);
       final String headerId = intent.getStringExtra("my.header.id");
       final String bodyId = intent.getStringExtra("my.body.id");
    }
} 
```

# php - PHP选择/搜索问题

> ID：10891330
> 
> 赞同：-3
> 
> 时间：2012-06-05T03:53:23.307
> 
> 标签：php, mysql

因此，我正在构建一个搜索站点，其中有一个 PHP/mySQL 搜索和一个 javascript“显示每页结果数”的 HTML 选择，它与用户希望的每页数量一起提交，然后刷新搜索页面。不幸的是，当我加载页面时出现三个错误。刚刚`if (isset($_POST['select'])){ $total_pages == $_POST['select'];}`设置`$total_pages = 12`它工作正常吗？

*   注意：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 36 行的 /Users/Me/Sites/mySite/search.php 中的第 1 行的 '' 附近使用正确的语法
*   警告：mysql_num_rows() 期望参数 1 是资源，布尔值在第 37 行的 /Users/Me/Sites/mySite/search.php 中给出
*   警告：在第 104 行的 /Users/Me/Sites/mySite/search.php 中除以零

这是代码：

```
<?php

    $q = mysql_real_escape_string(ucfirst(trim($_REQUEST['searchquery'])));

        if (isset($q)){
        if (isset($_GET['page'])) $page = $_GET['page']; else $page = 1;
        if (isset($_POST['select'])){ $total_pages == $_POST['select'];} //Here edit the amount per page 
        $record_start = ($page * $total_pages) - $total_pages;
            REQUIRE('config.php');

            $result = mysql_query("SELECT * FROM companies WHERE company_name LIKE '%$q%' OR company_description LIKE '%$q%' OR cat1 LIKE '%$q' OR cat2 LIKE '%$q' OR cat3 LIKE '%$q' OR company_phone LIKE '%$q' ORDER by company_name LIMIT $record_start,$total_pages") or trigger_error(mysql_error());
            $rows = mysql_num_rows($result);

            $total_results = mysql_result(mysql_query("SELECT COUNT(*) as Num FROM companies"),0); 
            echo "
            <h4>Search for &quot;$q&quot;</h4>
             <div class='right'>
                <div class='textad1'>
                    <center>

                        <form name='form1' method='post'>
                            Results per Page:
                            <select name='select' onChange='document.form1.submit()'>
                                <option value='10'";if($_REQUEST['select'] == 12) {echo "selected='selected'";} echo">12</option>
                                <option value='15'";if($_REQUEST['select'] == 18) {echo "selected='selected'";} echo">18</option>
                                <option value='25'";if($_REQUEST['select'] == 32) {echo "selected='selected'";} echo">32</option>
                            </select>
                        </form>

                   </center>
                </div>
                <div class='divider'></div>
            </div>
            <div class='left'>

            <ul>";
        while($row = mysql_fetch_array($result)) 
```

如果您需要更多代码，我会很快为您提供。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:38:51.953

我认为你的代码应该是这样的，

```
require('config.php');
$q = mysql_real_escape_string(ucfirst(trim($_REQUEST['searchquery'])));

    if (isset($q)){
    if (isset($_GET['page'])) $page = $_GET['page']; else $page = 1;
    if (isset($_POST['select'])){ $total_pages = $_POST['select'];} //Here edit the amount per page 
    $record_start = ($page * $total_pages) - $total_pages;

        $result = mysql_query("SELECT * FROM companies WHERE company_name LIKE '%$q%' OR company_description LIKE '%$q%' OR cat1 LIKE '%$q' OR cat2 LIKE '%$q' OR cat3 LIKE '%$q' OR company_phone LIKE '%$q' ORDER by company_name LIMIT $record_start,$total_pages") or trigger_error(mysql_error());
        $rows = mysql_num_rows($result);

        $total_results = mysql_result(mysql_query("SELECT COUNT(*) as Num FROM companies"),0); 

//code continuation 
```

# ruby-on-rails - 在另一个表中查找具有两条特定记录的记录

> ID：10891331
> 
> 赞同：6
> 
> 时间：2012-06-05T03:53:25.770
> 
> 标签：ruby-on-rails

我有一个`Product`模型`has_and_belongs_to_many :taxons`，我想找到特定分类单元中的所有产品。

例如，如果一个产品同时属于“Ruby on Rails”和“衬衫”分类，我希望该产品在数据集中返回，但如果它只属于“Ruby on Rails”或“衬衫”*则不*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-05T04:23:51.827

不久前我遇到了这个问题，幸好有一个很好的解决方案。

```
def self.has_taxons(taxons)
  id = arel_table[:id]
  Product.joins(:taxons).where(taxons: { name: taxons }).group(id).having(id.count.eq(taxons.size))
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T06:47:28.470

@samuel 的这个答案正是我想要的，但我希望在通过 Taxon1 AND Taxon2 和 TaxonN 过滤时仍然能够为搜索提供关键字。我不需要进行 Taxon1 OR Taxon2 搜索，因此我进行了以下自定义。可能有一种不那么老套的方法来做到这一点，但它对我来说非常有用。

我在 /app/models/spree/product_decorator.rb 中添加了一个新的产品范围

```
Spree::Product.class_eval do
    add_search_scope :in_all_taxons do |*taxons|
        taxons = get_taxons(taxons)
        id = arel_table[:id]
        joins(:taxons).where(spree_taxons: { id: taxons }).group(id).having(id.count.eq(taxons.size))
    end
end 
```

然后通过将新范围添加到 /app/models/spree/base_decorator.rb 来使用它

```
Spree::Core::Search::Base.class_eval do
    def get_base_scope
        base_scope = Spree::Product.active
        base_scope = base_scope.in_all_taxons(taxon) unless taxon.blank?
        base_scope = get_products_conditions_for(base_scope, keywords)
        base_scope = add_search_scopes(base_scope)
        base_scope
    end
end 
```

现在我可以使用标准搜索助手来检索产品（这意味着我仍然可以提供关键字等以及多个分类单元）：

```
# taxon_ids is an array of taxon ids
@searcher = build_searcher(params.merge(:taxon => taxon_ids))
@products = @searcher.retrieve_products 
```

这对我有用，感觉很轻松。但是，我愿意接受更好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T03:59:51.290

假设性能不是要求：

```
a = Taxon.find_by_name!('Ruby on Rails').products.pluck(:id)
b = Taxon.find_by_name!('Shirts').products.where(:id => a) 
```

# javascript - Javascript将日期从短格式转换为长格式

> ID：10891334
> 
> 赞同：0
> 
> 时间：2012-06-05T03:54:25.473
> 
> 标签：javascript, date

我正在使用以下代码：

```
var date="May-02-2012";
var startDate = date; 
var tmp = startDate.split('-'); 
tmp.splice(1, 0, ','); 
var convertedStartDate = new Date(tmp.join(' ')); 
var month = convertedStartDate.getMonth() + 1 
var day = convertedStartDate.getDate(); 
var year = convertedStartDate.getFullYear(); 
var shortStartDate = ('0' + day).slice(-2) + "-" + ('0' + month).slice(-2) + "-" + ('0' + year).slice(-2); 
return(shortStartDate); 
```

上面的代码允许我将 May-02-2012 转换为 02-05-12

但是，我现在需要将其从 02-05-12 转换回 May-02-2012

但是我搞不定。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T03:57:08.097

如果你不介意使用一个库，我发现这个库工作得很好：[http ://www.datejs.com/](http://www.datejs.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T03:57:37.343

我推荐[javascript 日期格式](http://blog.stevenlevithan.com/archives/date-time-format)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T05:00:25.527

只要格式与您指定的相同，就不会太难。以下不做任何测试，所以如果格式错误，可能会出错。但是，如果你给它错误的格式，任何函数都会如此。

```
var s = '02-05-12';

function toWeirdDate(s) {
   var months = 'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec'.split(' ');
   var bits = s.split('-');
   return months[--bits[1]] + '-' + bits[0] + '-20' + bits[2];
}

alert(toWeirdDate(s)); // May-02-2012 
```

# arrays - 如何在数组中添加条件语句？- MATLAB

> ID：10891364
> 
> 赞同：0
> 
> 时间：2012-06-05T03:58:02.080
> 
> 标签：arrays, matlab, matrix

我正在通过将 2 个坐标链接在一起来进行映射，并且我的数据库很大。因此，我只展示我所做的部分工作。

***问题：*** 我想把起点和终点号加在一起。如果大于 1,000,000，则距离将为 100。否则距离将保持不变。然后我希望它将它存储在一个数组中。

非常感谢您的回复。谢谢 ：）

**编码**

```
clear;
N = xlsread('RegionAll.xlsx',2);
M = xlsread('RegionAll.xlsx',1); % List of Coordinates     
distance  = distance(M(start,3:4), M(to,3:4)); % Coordinates
distancekm = deg2km(distance);
sum = N(:,1)+N(:,2);

%Problem a below
for l = 1:625
    sum = N(l,1)+N(l,2);
    if (sum>1000000)
        a = 100;
    else
        a = distancekm(l,1);
    end;
end 
```

**变量 N 中的**Excel 数据样本****

 **```
Start   Stop    Distance    
13054   13055   0.017749628
13055   13001   0.152363674
560601  13043   0.063200318
560601  13042   0.036090789
560601  13041   0.021083981
560601  13037   0.04975146
560604  13031   0.047614849
560604  13030   0.051513765
560604  13029   0.076687991
560604  560605  0.060676069
560605  560606  0.046497332 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:14:36.070

首先对第 1 列和第 2 列求和，将结果存储在`SumMatrix`：

```
SumMatrix = N(:,1) + N(:,2); 
```

然后使用逻辑寻址替换其中的所有`> 1000000`值：`SumMatrix``100`

```
SumMatrix(SumMatrix > 1000000) = 100; 
```**

# c# - 扫描文档并转换为关键文本

> ID：10891367
> 
> 赞同：-1
> 
> 时间：2012-06-05T03:58:34.187
> 
> 标签：c#, c++, .net

我正在尝试找到一种方法来使用我的扫描仪扫描“纸质文档”，然后尝试使用 C# 或 C++ 等编程语言来找出页面上打印的字母以将它们转换为普通文本。

换句话说，我正在尝试实现“扫描图像中的密钥”功能，以便将纸质文档转换为电子文档，以便使用记事本之类的工具打开。谁能给我一些建议，好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T04:02:08.630

听起来你想做的是像 OCR 或光学字符识别之类的东西。这当然不是一个简单的研究领域，但这个 wiki 页面应该让您开始了解这些概念及其含义：

[https://en.wikipedia.org/wiki/Optical_character_recognition](https://en.wikipedia.org/wiki/Optical_character_recognition)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:33:21.490

您可以创建一个应用程序来扫描您的图像并使用类似于 Leadtools 的第 3 方工具包对它们进行 OCR。有关更多信息，请参阅此[链接](http://support.leadtools.com/CS/forums/36579/ShowPost.aspx)：

# postgresql - Postgres 表列名限制？

> ID：10891368
> 
> 赞同：69
> 
> 时间：2012-06-05T03:58:42.880
> 
> 标签：postgresql, create-table

我在 psql 中这样做了：

```
CREATE TABLE IF NOT EXISTS apiss (skey TEXT, time INTEGER, user TEXT, ip TEXT); 
```

我明白了

```
ERROR:  syntax error at or near "user" LINE 1: ...BLE IF NOT EXISTS apiss (skey TEXT, time INTEGER, user TEXT,... 
```

我愿意：

```
CREATE TABLE IF NOT EXISTS apiss (skey TEXT, time INTEGER, userd TEXT, ip TEXT); 
```

有用。
注意 userd 而不是 user。

表可以具有的列名是否有一些限制？(postgresql v9.1.3)

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-06-05T04:04:12.357

这是 PostgreSQL 中一个很好的保留字表：
[http ://www.postgresql.org/docs/current/static/sql-keywords-appendix.html](http://www.postgresql.org/docs/current/static/sql-keywords-appendix.html)

最好避免将这些词用作表名或列名。
但是，另一种方法是将标识符括在双引号中，例如：

```
CREATE TABLE IF NOT EXISTS apiss (
    skey TEXT, 
    time INTEGER, 
    "user" TEXT, 
    ip TEXT); 
```

此外，Postgres 为每个表保留系统列名供内部使用：“每个表都有几个系统列，这些列是系统隐式定义的。因此，这些名称不能用作用户定义列的名称。”

[https://www.postgresql.org/docs/current/ddl-system-columns.html](https://www.postgresql.org/docs/current/ddl-system-columns.html)

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2015-08-03T14:30:59.723

在我的公司，我必须扫描整个数据库以查找保留字。我在帮助下解决了任务

```
select * from pg_get_keywords() 
```

# perl - 如何解析具有特定格式数据的文本文件并使用 perl 将其存储在哈希中

> ID：10891370
> 
> 赞同：-2
> 
> 时间：2012-06-05T03:58:50.010
> 
> 标签：perl, hash, text-parsing

我有一个文本文件，其中包含以下格式的一些数据

```
%app_lookup_strings = (
                      common => {
                                  password => "password: ",
                                  select_action => "Select action => ",
                                  mgt_close => "BSA_MgtClose",
                                }, 
```

我必须从文本文件中读取这些数据并将其存储回哈希中。我需要知道如何解析具有此类数据的文本文件，并将其以类似的哈希方式存储，如上所示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:06:51.837

如果您的文本文件只包含一个哈希，最直接的解决方案是：

```
#!/usr/bin/env perl
use strict;
use warnings;
use Data::Dumper;

my %hash = do 'text.file';

print Dumper \%hash; 
```

输出：

```
$VAR1 = {
          'common' => {
                        'mgt_close' => 'BSA_MgtClose',
                        'password' => 'password: ',
                        'select_action' => 'Select action => '
                      }
        }; 
```

# javascript - javascript重定向确实可以正常工作

> ID：10891371
> 
> 赞同：0
> 
> 时间：2012-06-05T03:59:06.477
> 
> 标签：javascript, redirect

我有一个链接，当用户单击它时会显示一个确认框。如果用户点击是，那么它将引导他们到指定的页面，否则它会停留在同一页面上。这是我的链接和我的功能代码：

```
<script type='text/javascript'>
   function checkDelete(){
      var i = confirm("Are you sure you want to delete?");
      if(i){
         return true;
      }else{
         return false;
      }
   }
</script>
<a href="operation.php?action=delete&id=<?php echo $id?>" onclick='checkDelete'>Delete</a> 
```

问题是即使我单击“否”或取消按钮，它也不会停留在同一页面上。它总是重定向到页面 operation.php。但是，如果我在 onclick 上编写内联 javascript 代码，它仍然可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:00:59.160

你有几个问题：

JavaScript 代码`checkDelete`只是引用变量`checkDelete`；它什么也不做。您可能打算调用它，并进一步返回调用它的结果：

```
// in onclick
return checkDelete(); 
```

您使用`if`with`return`语句是多余的。只需返回结果`confirm`：

```
function checkDelete() {
    return confirm('...');
} 
```

此时，您甚至可以内联它：

```
// in onclick
return confirm('...'); 
```

内联 JavaScript 通常是不受欢迎的。最好从 JavaScript 绑定事件处理程序。例如，如果您的链接的 ID 为`delete_link`，您可以使用：

```
// should only be run when delete_link exists
// (e.g. in a DOM ready handler or a script after delete_link)
// this code does not accommodate for older versions of Internet Explorer
document.getElementById('delete_link').addEventListener('click', function(e) {
    if(!confirm('...')) {
        e.preventDefault();
    }
}, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T04:01:08.747

试试`onclick="return checkDelete();"`。当您尝试使用 JavaScript 时，使用适当的 JavaScript 表达式会有所帮助；）

同时，尝试改成`checkDelete`这样：

```
function checkDelete() {return confirm("Are you sure you want to delete?");} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T04:01:51.837

尝试：

```
<a href="operation.php?action=delete&id=<?php echo $id?>" onclick='return checkDelete();'>Delete</a>

<script type='text/javascript'>
   function checkDelete(){
      var i = confirm("Are you sure you want to delete?");
      if(i){
         return true;
      }else{
         return false;
      }
   }
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T04:01:53.920

`<a href=''>`标签总是重定向到目标。返回`false`和取消操作的概念仅在您提交表单时适用。

# php - PHP 从 foreach 语句中排除特定变量值

> ID：10891379
> 
> 赞同：3
> 
> 时间：2012-06-05T04:00:44.270
> 
> 标签：php, foreach

我正在尝试从需要的表单中排除字段。目前整个数组支付通过这个为每个语句运行。我试图使字段 extra、extra2 和 extra3 不被要求。如果为空，则可以将其设置为 null 或定义为任何字符串。这是我目前拥有的：

```
 foreach($p as $key => $value) {
    $value = trim($value);
    if($value == '') {
      $keyName = preg_replace('/([A-Z])/', " $1", $key);
      $this->_errors['Payment ' . $keyName] = __('Payment ','cart66') . $keyName . __(' required','cart66');
      $this->_jqErrors[] = "payment-$key";
    } 
```

这是我尝试过的，但无济于事：

```
 foreach($p as $key => $value) {
    $value = trim($value);
    if($value == '' && $p != 'extra' || 'extra2' || 'extra3') {
      $keyName = preg_replace('/([A-Z])/', " $1", $key);
      $this->_errors['Payment ' . $keyName] = __('Payment ','cart66') . $keyName . __(' required','cart66');
      $this->_jqErrors[] = "payment-$key";
    }
else if ($p['extra'] == '') {
 $_p['extra'] = NULL; 
}
else if ($p['extra2'] == '') {
 $_p['extra2'] = NULL; 
}
else if ($p['extra3'] == '') {
 $_p['extra3'] = NULL; 
} 
```

}

这是我的语法不是吗？数据库本身设置为接受 null 并且不是主要的或唯一的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T04:06:15.297

一种好方法是在循环顶部检查并继续，如果你在一个应该被排除的字段上。

```
$exclude = array('field1', 'field2', ...);
foreach ($p as $key => $value)
{
    if (in_array($key, $exclude)) { continue; }

    // your code... 
} 
```

# iptables - iptables 端口重定向不适用于 localhost

> ID：10891380
> 
> 赞同：5
> 
> 时间：2012-06-05T04:00:45.777
> 
> 标签：iptables

我通过以下方式将端口 80 重定向到端口 8000：

```
iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 8000 
```

其他主机可以通过 80 端口访问我的网络服务器，但是当我访问 127.0.0.1:80 时，重定向无法在本地主机中工作。

端口方向可以用于环回网络适配器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T05:40:12.670

该`nat`表用于[网络地址转换](http://en.wikipedia.org/wiki/Network_address_translation)，仅用于外部接口。您还必须将规则添加到处理内部通信的表中。

# go - 学习go，想搞清楚exec包。我可以通过哪些方式改进我的代码？

> ID：10891381
> 
> 赞同：1
> 
> 时间：2012-06-05T04:00:49.083
> 
> 标签：go

编写了一个调用“ls”的简单程序，然后通过正则表达式过滤以“s”结尾的文件传递每一行。ls 仅用于学习 exec 包的目的。我怎样才能改进下面的代码更正确/简洁/go-ish？

```
package main

import (
    "bufio"
    "fmt"
    "os/exec"
    "regexp"
)

func main() {

    cmd := exec.Command("ls")
    stdout, _ := cmd.StdoutPipe()
    s := bufio.NewReader(stdout)
    cmd.Start()

    go cmd.Wait()

    for {
        l, _, err := s.ReadLine()
        if err != nil {
            break
        }

        if m, err := regexp.Match(".*s$", l); m && err == nil {
            fmt.Println(string(l))
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:30:23.137

标准文档中的[Cmd.Output 示例](http://golang.org/pkg/os/exec/#example_Cmd_Output)非常简洁。它不进行任何文本处理，但它显示了如何执行命令并通过单个函数调用获取输出。

这是一种将该示例与您的示例相结合的方法，

```
package main

import (
    "bytes"
    "fmt"
    "log"
    "os/exec"
    "regexp"
)

func main() {
    out, err := exec.Command("ls").Output()
    if err != nil {
        log.Fatal(err)
    }
    fmt.Print(string(bytes.Join(regexp.MustCompile(".*s\n").FindAll(out, -1), nil)))
} 
```

如果目标是对软件包有一个广泛的了解，请尝试一些功能和方法来了解它们的不同功能。试验命令参数。试验 Cmd 结构的不同字段。尽量不要对正则表达式等其他包过于分心，只需寻找最简单的示例即可使用包功能。

当然，如果您看到如何在实际应用程序中使用 exec 功能，请尝试一下。您将更深入地了解该功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T14:59:20.263

为此类示例添加错误检查并停止使用正则表达式。

对于任何大于缓冲区大小的输入数据，ReadLine 将不可避免地在某个时候返回 isPrefix 设置为 true。ReadString('\n') 做你想做的事——读到行尾，不管它是否适合缓冲区，按原样扩展输出字符串。这也意味着你可能会得到一个任意长的字符串。对 ReadLine() 有利的一面是，它确实会为您从行尾删除“\n”或“\r\n”，因此在使用 ReadString() 时，我们必须自己做。

```
package main

import (
    "bufio"
    "fmt"
    "os/exec"
    "io"
)

func main() {
    var err error
    var out io.Reader

    // Create a command object
    cmd := exec.Command("ls")

    // Obtain a pipe to receive the stdout of the command
    out, err = cmd.StdoutPipe(); if err != nil {
        panic(err)
    }

    // Start the child process
    err = cmd.Start(); if err != nil {
        panic(err)
    }

    // bufio.Reader allows us to read all bytes until newline
    s := bufio.NewReader(out)
    for {
        var line string
        line, err = s.ReadString('\n')
        if err == io.EOF && len(line) == 0 {
            // Good end of file with no partial line
            break
        }
        if err == io.EOF {
            err := fmt.Errorf("Last line not terminated: %q", line)
            panic(err)
        }
        if err != nil {
            panic(err)
        }
        line = line[:len(line)-1]       // drop the '\n'
        if line[len(line)-1] == '\r' {
            line = line[:len(line)-1]   // drop the '\r'
        }
        if line[len(line)-1] == 's' {   // Finally check for lines ending in 's'
            fmt.Println(line)
        }
    }

    // Wait for the result of the command; also closes our end of the pipe
    err = cmd.Wait()
    if err != nil {
        panic(err)
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:05:58.830

例如，

```
package main

import (
    "bufio"
    "errors"
    "fmt"
    "io"
    "os/exec"
)

func main() {
    cmd := exec.Command("ls")
    stdout, err := cmd.StdoutPipe()
    if err != nil {
        fmt.Println(err)
        return
    }
    ls := bufio.NewReader(stdout)
    err = cmd.Start()
    if err != nil {
        fmt.Println(err)
        return
    }
    for {
        line, isPrefix, err := ls.ReadLine()
        if isPrefix {
            fmt.Println(errors.New("isPrefix: true"))
            return
        }
        if err != nil {
            if err != io.EOF {
                fmt.Println(err)
                return
            }
            break
        }
        fmt.Println(string(line))
    }
    err = cmd.Wait()
    if err != nil {
        fmt.Println(err)
        return
    }
} 
```

输出（取决于您的目录内容）：

```
bench.go
temp.go 
```

# c# - 如何在 C# 中使方法在启动时运行

> ID：10891388
> 
> 赞同：0
> 
> 时间：2012-06-05T04:01:43.343
> 
> 标签：c#, .net, visual-studio-2010, visual-studio

我正在尝试制作一种在我第一次打开应用程序时绘制图片框背景的方法。有没有办法做到这一点？

我试过这个

```
private void Form1_Load(object sender, EventArgs e)
{
    DrawBackground();

}

public void DrawBackground() 
        {
            Graphics SimWindow = pictureBoxSimDisplay.CreateGraphics();

            SolidBrush brush = new SolidBrush(Color.Green);

            SimWindow.FillRectangle(brush, 0, 211, 491,5);
        } 
```

但它不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T04:09:44.913

我会亲自重写 Forms [OnPaint](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onpaint.aspx)方法，这样，当重新绘制 Form 时，包括初始加载在内，您在其上绘制的背景将被重新绘制，如果您要添加图像或位图，则应使用 Form Load 事件作为其他人已经说过。

从上面的链接：

> 每次绘制表单时，都会重写 OnPaint 方法以重新绘制图像；否则图像只会持续到下一次重绘

.

* * *

试试这个。我发现使用 OnPaint 方法在初始加载时有点不稳定，但是如果我使用 Timer(100ms) 使表单无效，它每次都可以正常工作。

```
protected override void OnPaint(PaintEventArgs e)
{
    base.OnPaint(e);
    DrawBackground();

}

public void DrawBackground()
{
    Graphics SimWindow = pictureBoxSimDisplay.CreateGraphics();
    SolidBrush brush = new SolidBrush(Color.Green);
    SimWindow.FillRectangle(brush, 0, 211, 491, 5);
    SimWindow.Dispose(); // Don't forget to dispose your Graphic Object
}

private void Form1_Load(object sender, EventArgs e)
{
    timer1.Start();
}

private void timer1_Tick(object sender, EventArgs e)
{
    timer1.Stop();
    Invalidate();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T04:03:45.020

如果您在 WinForms (?) 中执行此操作，是否有任何理由不能在主窗体的 OnLoad 方法中执行此操作？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T04:05:03.123

你是说你想在应用程序运行时做点什么吗？如果是这样，那么只需在您的 Main()/OnLoad() 中完成所有操作。如果您说要在机器启动时执行此操作，请在此添加一些 windows 标签！:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T04:08:53.473

如果您使用的是表单，您可以在 [Design] 窗口中双击您的表单，它会带您进入“Form1”_Load 方法，在该方法中代码在表单加载时运行。

# ajax - 什么是实现基于网络的游戏最安全的技术

> ID：10891391
> 
> 赞同：1
> 
> 时间：2012-06-05T04:01:57.460
> 
> 标签：ajax, flash, html, actionscript

我正在尝试开发一个基于网络的（并且可以在平板电脑等便携式设备上运行）游戏，2 名玩家可以玩，我想知道最安全的技术。

安全意味着性能在不同平台上都可以。

我知道 flash/actionscript，但我觉得 flash 很快就会死掉（Windows 8、iPad 不支持）

HTML5 似乎是跨平台的选择，但我在 HTML5 中体验过的游戏性能并不好，例如 Angry Birds 会减慢我的系统速度。我有这些规格：

```
Windows 7
Intel(R) Atom(TM) CPU N450
1.66GHZ
2GB Memory
Browser: Chrome, Firefox

Note: Most of my audience could have a lesser specifications. 
```

我也使用 Canvas 和 g2d 在 HTML5 中尝试了一些绘画（10 x 10 的正方形），但我得到了同样糟糕的性能

*   **有没有办法可以改进我的 HTML5 以更好地执行**
*   纯 jQuery/Ajax 呢？
*   或者我可以使用其他工具。

**更新：**

表示 Internet Explorer 仍将支持 Flash： *但 IE8 也不支持 Flash。IE7、IE6等也没有。Flash 支持一直是通过 Adob​​e 插件提供的，我看不出有什么理由不能继续使用 IE9。*以下链接中的详细信息：

*   [http://www.v3.co.uk/v3-uk/news/1983302/microsoft-clarifies-position-ie9-flash-support](http://www.v3.co.uk/v3-uk/news/1983302/microsoft-clarifies-position-ie9-flash-support)
*   [http://www.guardian.co.uk/technology/blog/2010/apr/30/microsoft-ie9-html5-video](http://www.guardian.co.uk/technology/blog/2010/apr/30/microsoft-ie9-html5-video)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T04:17:51.273

通常当人们说 Flash 正在消亡时，他们的意思是 Flash 是互联网上视频的消亡平台。

我不觉得 HTML5 或基于浏览器的 javascript 速度不够快，无法与预先编译成字节码的 flash 竞争游戏开发，而且不会很快。

它有望在某一天到达那里，但它远没有那么快，或者在其中开发游戏是可行的。

1.  Flash游戏在这一点上更快
2.  它们更容易跨站点共享，如果您想“窃取”一个 Flash 游戏，除非它受到特别保护，那么只需获取一个文件即可。这在“赞助”或“基于广告”的收入模式中通常是可取的，并且是主要的收入来源。

然而，闪存变得越来越笨拙，越来越没有吸引力。我严重怀疑这是基于网络游戏开发的未来，flash 可能会消亡，只是不会很快......

编辑：所以总的来说，由于与其他平台相比，flash 的学习曲线非常短，并且从它迁移到基于 javascript 的游戏开发将非常容易，因为 flash actionscript 和 javascript 非常相似，我仍然建议将它作为游戏此时的开发技术。

另外，完全披露，我做了几年的 Flash 游戏开发人员，我确实编写了很多 javascript，但我从未在其中构建过完整的游戏（虽然我尝试了几次，但当时速度还不够快）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T01:06:26.713

**使用闪存。**

我认为您通过过度夸大和消息灵通的消息来源告诉您 Flash 将“消亡”，从而对 Flash 产生了错误的印象。

他们的意思是；Flash 对于基于 Web 的应用程序、视频甚至是基本的动画内容变得不那么有用了。Flash 仍然对基于网络的游戏有着巨大的影响力。

有大量网站通过托管 Flash 游戏内容赚取大量收入，以下是一些：

*   [孔雷盖特](http://www.kongregate.com/)
*   [装甲游戏](http://armorgames.com/)
*   [新地](http://newgrounds.com/)
*   [疯狂的猴子游戏](http://www.crazymonkeygames.com/)
*   [麻糬传媒](http://mochimedia.com/)

像这样的公司不会在一夜之间消亡，甚至会在相当长的一段时间内消亡。

Flash 游戏开发人员也有大量的资源，而且学习曲线非常低。这意味着即使是新手，您也可以在短时间内创建游戏。Adobe 和许多其他地方提供了大量用于游戏开发的文章和工具，例如：

*   [Adobe 游戏](http://gaming.adobe.com/)
*   [用于游戏的 Adob​​e Flash Player 高级功能](http://www.adobe.com/devnet/flashplayer/articles/premium-features.html)
*   [Adobe 推出游戏高级功能](http://blogs.adobe.com/digitalmedia/2012/03/adobe-introduces-premium-features-for-gaming-with-flash-player-11-2-announces-collaboration-with-unity-technologies-2/)
*   [AS3 游戏引擎 - 2D 和 3D](http://www.adobe.com/devnet/games/gaming_engines.html)
*   [八哥框架](http://gamua.com/starling/)
*   [Flixel - Flash 游戏库](http://flixel.org/)

Flash 游戏的开发也有很大的动力，因为上面列出的许多网站（Kongretate、Armorgames 等）[提供大量现金来赞助您的 Flash 游戏](http://armorgames.com/page/sponsorship)。您还可[以为您的游戏赢得奖励](http://www.kongregate.com/contests?haref=hp_devcontest)作为额外现金。许多网站甚至为您提供他们从与您的游戏在同一页面上显示的广告获得的收入的一部分。

Flash 将继续在游戏领域蓬勃发展，我认为您无需担心它会在短期内突然变得多余。

* * *

我只能看到使用 HTML5/JavaScript 的几个优点：

*   它是免费的——您不需要专门的软件来创建 HTML5/JavaScript 应用程序。
*   它在移动设备上受支持-也就是说，您将不得不重新开发游戏的某些部分以支持触摸控制等，这很烦人，而且往往会导致放弃移动版本。此外，移动设备上的 JavaScript 渲染性能真的很差（帧速率会很低）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T13:43:59.333

Checkout WebGL，虽然它还没有在所有平板电脑上支持，但看起来它最终可能会支持（我相信最近在 iPad 上，但仅用于广告，通过 Firefox 在 android 上工作）

[http://www.chromeexperiments.com/webgl](http://www.chromeexperiments.com/webgl)

Flash 的一个可能的替代品，虽然它还没有:)

# jquery - 我可以从我在 jquery 中给出的 url 获取路径吗？

> ID：10891394
> 
> 赞同：1
> 
> 时间：2012-06-05T04:02:13.507
> 
> 标签：jquery

在我请求我设置的 url 后，我想要路径名。

假设我把 [http://www.abc.com](http://www.abc.com)

然后服务器会自动将我返回到[http://www.abc.com/sessionId/folder/default.aspx](http://www.abc.com/sessionId/folder/default.aspx)

我需要在 jquery 中获取返回 url。

无论如何都要这样做吗？

我尝试 ajax get/post 来获取响应头位置，它总是得到空值。

是我在下面显示的参考代码

```
 $.ajax({
    type: 'POST',
    url: '/echo/html',
    data: {},
    dataType: "json",
    success: function(res,status,XHR) { 
        //var location = XHR..getResponseHeader('Location');
          alert(XHR.getResponseHeader('Content-Type'));
          alert(XHR.getResponseHeader('Location'));
    },
    error: function(jqXHR) { }
    });​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:04:20.447

```
var result = 'http://www.abc.com/sessionId/folder/default.aspx',
    request = 'http://www.abc.com';

console.log(result.substring(request.length)); // /sessionId/folder/default.aspx 
```

[http://jsfiddle.net/zerkms/zNN4D/](http://jsfiddle.net/zerkms/zNN4D/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T04:12:08.003

您可以为此使用位置对象：

[http://www.w3schools.com/jsref/obj_location.asp](http://www.w3schools.com/jsref/obj_location.asp)

从 url 创建一个：

```
var url = document.createElement('a');
url.href = "http://www.abc.com/sessionId/folder/default.aspx";
console.log(url.pathname); // this is what you need. 
```

该链接显示了更多选项，从协议到哈希等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T04:16:46.200

```
var url = 'http://www.abc.com/sessionId/folder/default.aspx',
    cutting = 'http://www.abc.com';

console.log(url.replace(cutting,'')); 
```

**[演示](http://jsfiddle.net/zNN4D/1/)**

此外，如果您愿意，可以遵循@zerkms 的解决方案。

# python - Django多对多循环引用？

> ID：10891396
> 
> 赞同：3
> 
> 时间：2012-06-05T04:02:49.550
> 
> 标签：python, django

从概念上讲，我想要的是：

```
class Child:
    guardians = models.ManyToManyField(Guardian)

class Guardian:
    children = models.ManyToManyField(Child) 
```

申请是针对学校的。任何一位父母（监护人）都可以有多个孩子，任何孩子都可以有多个监护人。现在，我不能像在 C++ 中那样在 python 中转发声明。

最干净和最好的方法是什么？我是否需要第三个“关系”类来表示这些联系（这是我想要的）？但在我重新发明轮子之前，我想问一下。看起来这应该很容易......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T09:36:53.130

我不确定我是否理解这个问题。

通过做这个：

```
class Child:
    guardians = models.ManyToManyField('Guardian', related_name='children')

class Guardian:
    .... some other fields
    # children = models.ManyToManyField(Child)  <--- not needed 
```

就像说“一个孩子可以有很多监护人，一个监护人可以有很多孩子”。您不必在两种模型中都声明它。

无论如何，django 在幕后创建了第三个（中间）表。因为这是在 RDBMS 中建模多对多关系的方式。

您想要**显式**创建中间模型的唯一原因是当您必须添加描述特定多对多关系的额外信息时。IE

```
class Child:
    guardians = models.ManyToManyField('Guardian', 
        through='ChildGuardianMembership', related_name='children')

class Guardian:
    .... some other fields

class ChildGuardianMembership:
    child = models.ForeignKey(Child)
    guardian = models.ForeignKey(Guardian)
    created_at = models.DateTimeField(auto_now_add=True) # When was this relationship established? 
```

在这种情况下，您必须注意，由于您声明了一个显式中间模型，因此这是在创建监护人和孩子之间的关系时使用的模型。

例如

```
ChildGuardianMembership.objects.create(child=child_inst, guardian=guardian_inst) 
```

[此处](https://docs.djangoproject.com/en/1.4/topics/db/models/#extra-fields-on-many-to-many-relationships)描述了在 many2many 关系（如上所述）上添加额外字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T04:05:40.777

除非明确禁用，否则关系已经是双向的。

# jboss - JBoss 管理控制台无法加载 - 缺少 Log4J jar？

> ID：10891397
> 
> 赞同：0
> 
> 时间：2012-06-05T04:03:11.900
> 
> 标签：jboss, log4j

我下载了 JBoss 5.1 并解压到

```
~/jboss/ 
```

这样 JBoss 安装到：

```
~/jboss/jboss-5.1.0.GA/ 
```

我使用 jboss/jboss-5.1.0.GA/bin 中的以下命令运行默认部署

```
./run.sh -c default 
```

当 JBoss 启动时 (http://127.0.0.1:8080/)，没有部署 admin-console。日志文件：

```
jboss/jboss-5.1.0.GA/server/default/log 
```

显示以下信息：

```
DEPLOYMENTS IN ERROR:
  Deployment "vfsfile:/Users/jackwootton/jboss/jboss-5.1.0.GA/server/default/deploy/admin-console.war/" is in error due to the following reason(s): org.jboss.deployers.spi.DeploymentException: URL file:/Users/jackwootton/jboss/jboss-5.1.0.GA/server/default/tmp/az6n6v-tjilfb-h32fokxn-1-h32fosuo-v/admin-console.war/ deployment failed
  Deployment "vfszip:/Users/jackwootton/jboss/jboss-5.1.0.GA/server/default/deploy/quartz-ra.rar/" is in error due to the following reason(s): org.apache.commons.logging.LogConfigurationException: User-specified log class 'org.apache.commons.logging.impl.Log4JLogger' cannot be found or is not useable. 
```

Log4J jar 文件存在于：

```
jboss/jboss-5.1.0.GA/lib/jboss-logging-log4j.jar 
```

我有三个问题：

1.  我是否正确理解了问题（即管理控制台找不到所需的 Log4j JAR 文件，因此未部署）？

2.  我能做些什么来解决这个问题？

3.  为什么开箱即用的部署首先会出现这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T04:38:42.570

问题是类路径中缺少 jars。我将以下 jar 文件（位于 JBoss 安装的 lib 目录中）添加到我的类路径中：

```
concurrent.jar  getopt.jar  jaxb-impl.jar   log4j-boot.jar  trove.jar
dom4j.jar   javassist.jar   jaxb-xjc.jar    osgi.core.jar   wstx.jar 
```

由于我使用的是 Mac OS XI，[因此在 StackOverflow 上添加了有关将 jars 添加到 classpath 的帖子](https://stackoverflow.com/questions/1675765/adding-to-the-classpath-on-osx)。

一个提示：我最初将所有 JBoss jar 添加到我的类路径 (jboss-XXX.jar) 中，但这导致 JBoss 在 /Library/Java/Extensions 中查找配置文件。

# asp.net-mvc - MVC3, jQuery, Form submit：多次提交

> ID：10891399
> 
> 赞同：0
> 
> 时间：2012-06-05T04:03:30.737
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有以下 jQuery 代码来拦截表单提交并将其转换为 Ajax 调用：

```
$("form.section_change").off("submit").on("submit", function () {
    var section = $(this).attr("data-section");
    var initializer = $(this).attr("data-initfunc");
    $.ajax({
        url: this.action,
        type: this.method,
        data: $(this).serialize(),
        error: function (a, b) {
            debugger;
        },
        success: function (result) {
            $("div#" + section).html(result);
            bindExtenders();
            if (initializer != null) {
                var func = window[initializer];
                func();
            }
        }
    });
    return false;
}); 
```

从概念上讲，发生的事情是 ajax 调用返回 html，该 html 用于替换表单标记内的 div。bindExtenders() 函数调用“重新绑定”jQuery 绑定，包括此代码段描述的绑定。初始化函数是运行指定 javascript 函数的可选项目。

当我第一次在页面上提交表单时，回调只被调用一次，正如预期的那样。但是，在随后的提交中，回调被多次调用（通常是两次，但有时不止一次）。

我想弄清楚如何做到这一点，所以回调只被调用一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:28:52.740

你可以这样做：

```
$('body').on('submit', 'form.section_change', function() {
// ...
}); 
```

这样你就不需要重新绑定。看这里：[jQuery](http://api.jquery.com/on/)

# iphone - 对基于文档的 iPhone 应用指南感到困惑

> ID：10891400
> 
> 赞同：1
> 
> 时间：2012-06-05T04:03:34.713
> 
> 标签：iphone, ios, xcode, document-based

我正在编写我的第一个 iPhone 应用程序之一 - 一种简单的方式来记住有关人的事情。我正在关注名为“iOS[的基于文档的应用程序编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/DataManagement/Conceptual/DocumentBasedAppPGiOS/Introduction/Introduction.html)”的 iOS 文档，并且我已经到了查询本地设备和 iCloud 以检测和加载文档的地步。在指南中，他们使用了一个自定义类，并且由于他们没有显示该类的代码，我对它应该是什么样子感到困惑。他们给出了自定义类“FileRepresentation”的描述：

> 示例应用程序现在有一个自定义模型对象数组 (_fileList)，其中封装了每个应用程序文档的名称和文件 URL。（FileRepresentation 是这些对象的自定义类。）

***谁能举例说明“FileRepresentation”的类实现是什么样的？***

[部分是“管理文档的生命周期](http://developer.apple.com/library/ios/#DOCUMENTATION/DataManagement/Conceptual/DocumentBasedAppPGiOS/ManageDocumentLifeCycle/ManageDocumentLifeCycle.html#//apple_ref/doc/uid/TP40011149-CH4-SW1)”页面上的清单4-3和4-4 ：

**清单 4-3**

```
-(void)viewDidLoad {
    [super viewDidLoad];
    // set up Add and Edit navigation items here....
    if (self.documentsInCloud) {
        _query = [[NSMetadataQuery alloc] init];
        [_query setSearchScopes:[NSArray arrayWithObjects:NSMetadataQueryUbiquitousDocumentsScope, nil]];
        [_query setPredicate:[NSPredicate predicateWithFormat:@"%K LIKE '*.txt'", NSMetadataItemFSNameKey]];
        NSNotificationCenter* notificationCenter = [NSNotificationCenter defaultCenter];
        [notificationCenter addObserver:self selector:@selector(fileListReceived)
            name:NSMetadataQueryDidFinishGatheringNotification object:nil];
        [notificationCenter addObserver:self selector:@selector(fileListReceived)
            name:NSMetadataQueryDidUpdateNotification object:nil];
        [_query startQuery];
    } else {
        NSArray* localDocuments = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:
            [self.documentsDir path] error:nil];
        for (NSString* document in localDocuments) {
            [_fileList addObject:[[[FileRepresentation alloc] initWithFileName:[document lastPathComponent]
            url:[NSURL fileURLWithPath:[[self.documentsDir path]
            stringByAppendingPathComponent:document]]] autorelease]];
        }
    }
} 
```

**清单 4-4**

```
-(void)fileListReceived {
     NSString* selectedFileName=nil;
     NSInteger newSelectionRow = [self.tableView indexPathForSelectedRow].row;
     if (newSelectionRow != NSNotFound) {
        selectedFileName = [[_fileList objectAtIndex:newSelectionRow] fileName];
     }
     [_fileList removeAllObjects];
     NSArray* queryResults = [_query results];
     for (NSMetadataItem* result in queryResults) {
         NSString* fileName = [result valueForAttribute:NSMetadataItemFSNameKey];
         if (selectedFileName && [selectedFileName isEqualToString:fileName]) {
             newSelectionRow = [_fileList count];
         }
         [_fileList addObject:[[[FileRepresentation alloc] initWithFileName:fileName
             url:[result valueForAttribute:NSMetadataItemURLKey]] autorelease]];
     }
     [self.tableView reloadData];
     if (newSelectionRow != NSNotFound) {
         NSIndexPath* selectionPath = [NSIndexPath indexPathForRow:newSelectionRow inSection:0];
         [self.tableView selectRowAtIndexPath:selectionPath animated:NO scrollPosition:UITableViewScrollPositionNone];
     }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T04:54:31.947

对于将来看到这一点的人，这是我通过查看其他类如何实现其`init`功能得出的结论：

```
#import "FileRepresentation.h"

@implementation FileRepresentation

@synthesize fileName = _fileName, fileUrl=_fileUrl;

-(id) initWithFileName:(NSString*)fileName url:(NSURL*)url
{
    self = [super init];
    if(self){
        self.fileName = fileName;
    }
    return self;
}

@end 
```

# silverlight - Silverlight 5 和 nUnit

> ID：10891403
> 
> 赞同：0
> 
> 时间：2012-06-05T04:03:47.280
> 
> 标签：silverlight, nunit

我目前使用的是为与 Silverlight 4 运行时一起工作而构建的 nUnit 2.5.x 版本。它工作得非常好，但我们现在正计划迁移到 Silverlight 5。我无法找到已构建为与 Silverlight 5 运行时一起使用的 nUnit 版本。有谁知道这是否存在，或者是否有其他选择？我考虑过 MSTest，但我们当前的测试使用了很多 TestCase 和 ValueSource 属性。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-16T06:07:07.397

以防其他人偶然发现这一点，nUnitLite 支持 Silverlight 5。nUnitLite 有一个 NuGet 包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:23:32.787

不知道您在哪里找到可以与 SL4 一起工作（？？）的 NUnit 2.5（如何？？），但这就是我为 SL5 应用程序进行单测试所做的

*   创建完整的 .NET Framework 4 应用程序（不是“客户端配置文件”）
*   添加了对 SL5 项目（对 .DLL 文件）和 NUnit 库的引用
*   编译（会有很多错误）

    主要问题是 SL .DLL 文件搜索正在运行的程序集（例如：`System.Windows.dll`，`System.Windows.Browser.dll`在非常糟糕的情况下它会搜索`mscorlib.dll`SL 版本）。您应该从 .NET 项目中引用它。

    实际上，从 .NET 项目中引用正确的 SL 程序集是最有问题的部分——一旦你完成了它——你可以毫无问题地运行常规的 NUnit 测试。

    *   注意 DependencyObject 的 multiplay 重新定义并选择 .NET Framework 版本：在 SL 和 .NET 项目中定义 NUnit（或 else）标志以及`#if NUnit`所有*有问题* `INotifyDataErrorInfo`的 ,`IComamnd`等接口
    *   如果无法从 .NET 项目中引用 SL 程序集，只需在本地将其复制到 \Debug 文件夹即可运行 NUnit 测试

    *   祝你好运。没那么容易

# java - 在没有管理员权限的情况下安装 JDK

> ID：10891405
> 
> 赞同：44
> 
> 时间：2012-06-05T04:04:16.617
> 
> 标签：java, installation, limited-user

我正在尝试在办公室笔记本电脑上安装 JDK，但它说我需要管理员权限。我只能在工作时访问我自己的帐户。

如何在没有管理员权限的情况下安装 Java 开发工具包？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2014-06-13T11:38:54.363

从 Java SE 7u21 开始，Oracle 提供了一个所谓的*Server JRE*供下载。这是一个标准的 .tar.gz 存档，您可以在计算机上的任何位置提取它。虽然下载名为*JRE*，但它包含一个“普通”JDK 子目录（包括 javac 编译器等）。

指示：

*   [从Java 下载站点](http://www.oracle.com/technetwork/java/javase/downloads/index.html)下载“Server JRE”
*   提取 .tar.gz
*   将*bin*子目录添加到 PATH

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-07-21T18:24:29.483

Oracle 在**更新 102**中更改了包格式，正如[**@Webrjn**](https://stackoverflow.com/users/503025/weberjn)在此问题的先前答案中所指出的那样，但 unpack 方法仍然适用于另外两个解压缩操作：

[![在此处输入图像描述](../Images/718ce50367f5f89a1d9a23d00fd3ec3c.png)](https://i.stack.imgur.com/7KPV4.png)

1.  JDK 的安装可执行文件是一个压缩文件，因此只需将其与 7z 解压缩到您想要的任何文件夹即可。
2.  转到目录 **`.rsrc/1033/JAVA_CAB10/`**。
3.  唯一的文件是**`111`**，它也是一个包含 tools.zip 的压缩文件。解压即可获得**`tools.zip`**。
4.  **`tools.zip`**因此，现在通过解压缩到所需的 java 安装路径来执行原始解包过程。
5.  打开 Windows 命令提示符并运行：

    ```
    for /r %i in (*.pack) do .\bin\unpack200.exe -r -v %i %~pi%~ni.jar 
    ```

    该**`unpack200`**程序在文件末尾抱怨垃圾，但解压后的 jar 经 7z 测试正常。

6.  Java 源**`src.zip`**代码**`110`**位于**`.rsrc/1033/JAVA_CAB9`**.

顺便说一句，更新101只包含tools.zip文件，可以用之前的解压方法安装。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-11-13T04:52:15.903

这是在没有管理员权限或没有管理员密码的情况下安装 java 的解决方法。为此，您需要安装不需要管理员权限的 cygwin。在 utils 中确保选择 cabextract.exe 来安装它。

启动 cygwin bash 外壳。

键入 cabextract jdk1.6.exe <-- jdk 文件名

这会将所有文件提取到当前目录中。

将 tools.zip 移动到新目录并使用 cygwin 或 Windows 资源管理器解压缩。这将是您的 java 目录。

提示：尝试替换 7zip 而不是 cabextract 和 cygwin。如果它有效，它会快得多。

编辑：这不会为您提供具有最新版本 jdk 6 和 7 的工作 JDK。许多 jar 文件（例如 rt.jar）是压缩的，因此需要使用 unpack200 对其进行解压缩。

只需通过每个目录查找扩展名为 .pack 的文件并使用 unpack200 解压缩它们，例如： .\jre\bin\unpack200 .\jre\lib\rt.pack .\jre\lib\rt.jar

这允许您运行 java 程序，但是我仍然遇到 Eclipse 问题，因为注释存在一些问题，因此可能缺少另一个步骤。

[在超级用户上这个类似问题](https://superuser.com/questions/333647/how-to-install-java-on-a-windows-machine-without-having-admin-right)的答案中，有一个脚本可以自动查找所有 .pack 文件并将它们解压缩到正确的文件夹中。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-06-18T06:06:59.823

以下是在没有管理员权限的情况下在 Windows 7 上安装 JDK 的所有步骤。

1.  您需要该`cabextract`程序来提取安装程序文件。我尝试了 7zip，但它没有正确提取驾驶室。相反，我使用了 cygwin。您可以`setup.exe`从他们的网站获取该程序，但您必须重命名它，因为 Windows 假定任何称为“设置”的内容都需要管理员权限。我将其重命名为`cygwin.exe`. 运行那个。它会问你在哪里安装。我选择了`cygwin`我的主目录中的目录。当弹出窗口询问您要安装哪些程序时，在搜索栏中键入“cabinstall”。展开“存档”部分并确保“cabinstall”未设置为“跳过”。（单击“跳过”文本，直到显示最高数字。）继续安装。这需要几分钟。

2.  可选：添加`cygwin\bin`到您的路径。从控制面板、用户帐户、更改我的环境变量、编辑 PATH 执行此操作。

3.  下载 JDK。我下载了 jdk-6u45-windows-x64.exe。

4.  在该文件所在的目录中：`mkdir tmp`

5.  `cd tmp`

6.  `cabextract ..\jdk-6u45-windows-x64.exe`

7.  为实际的 JDK 创建一个新目录。我`jdk`在我的主目录中使用过。

8.  将文件提取`tools.zip`到其中。它带有 Java 运行时，因此您不需要原始 cab 中的其他文件，例如`jre.msi`.

9.  解压所有`.pack`文件。您可以通过`bin/unpack200`在它们上运行程序来手动执行此操作，或者使用 bash（如果您在上面安装了 cygwin）：

    1.  `bash`

    2.  `for f in $(../cygwin/bin/find . -name "*.pack"); do bin/unpack200 $f ${f%.*}.jar; done`

10.  添加`jdk/bin`到您的 PATH（参见上面的步骤 2）。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-03-25T13:27:54.793

1.  下载 JDK
2.  使用 7 ZIP 解压（解压 exe 文件） [![在此处输入图像描述](../Images/89ca285b7a3f2edaefa9997c7a359758.png)](https://i.stack.imgur.com/OINvN.png)

它包含单个文件 tools.zip，其中包含我们需要的所有文件。将 tools.zip 解压缩到所需的 JDK 目录（例如“D:\JavaJDK\”）。3\. 打开包装

现在我们需要解压几个用 pack200 打包的文件。我们通过在 JDK 目录（例如“D:\JavaJDK\”）内的控制台窗口中执行此脚本来做到这一点：

```
for /R %f in (.\*.pack) do @"%cd%\bin\unpack200" -r -v -l "" "%f" "%~pf%~nf.jar" 
```

请注意，您必须将 unpack200 二进制文件（“D:\JavaJDK\bin\unpack200”）的路径调整到您选择的目录。

4.  恭喜您现在拥有一个工作的、可移植的 JDK！ [![在此处输入图像描述](../Images/364da5b4c8b5b2e8d9d778113f0c0b5f.png)](https://i.stack.imgur.com/BcDgT.png)

参考：[这个链接](https://www.whitebyte.info/programming/java/how-to-install-a-portable-jdk-in-windows-without-admin-rights)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-05T04:09:49.727

我猜你在Windows上。没有管理员权限是不能安装Oracle提供的JDK的。您可以做的是将它安装在另一台机器上（或找到安装它的机器）并复制 jdk 目录。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-07-20T08:50:52.563

jdk-8u102-windows-x64.exe no longer works with the unpack method, Oracle seem to have changed the package format.

[![enter image description here](../Images/f1b5e57ab62caec772c653345ed33c64.png)](https://i.stack.imgur.com/mvWUq.png)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-06-05T04:16:47.390

如果您可以将其安装在任何其他机器上，那么此解决方案将对您有所帮助。

*   将其安装在另一台机器上。
*   将 jdk 文件夹带到您的机器上，并将系统和类路径变量设置为您复制 jdk 文件夹的路径。您应该能够运行您的程序。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-07-30T20:36:08.420

也许一个不错的选择是使用 OpenJDK，[这](https://github.com/alexkasko/openjdk-unofficial-builds)是一个非官方的 windows 构建，因此您可以将 Zip 文件提取下载到任何文件夹并为您的 windows 用户设置 JAVA_HOME。我以这种方式运行 Android Studio。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-06-05T04:14:19.927

[http://www.ehow.com/how_6012601_install-java-admin-privileges.html](http://www.ehow.com/how_6012601_install-java-admin-privileges.html)

给你，伙计，祝你好运。这对我有用。

# 上面链接的说明

1 将便携式 USB 驱动器插入家用计算机的 USB 插槽。

2 在您的家用计算机上，导航到资源部分中的“下载 Java JDK”链接。

3 单击红色的“下载”按钮。当要求登录时，单击“跳过此步骤”。单击“保存文件”将文件下载到您的计算机。

4 双击您下载的“.exe”文件以开始 Java SE 6 的安装向导。单击“接受”许可协议。

5 在“自定义设置”页面上，单击“源代码”、“公共 JRE”和“Java DB”旁边的小硬盘驱动器按钮，并为每个按钮选择“现在不要安装此功能”。

6 单击右下角的“更改...”按钮，然后从下拉菜单中的“查找范围：”下选择您的便携式 USB 驱动器。单击右上角的“创建新文件夹”按钮（文件夹图标），并将新文件夹命名为“JDK”。选择 JDK 文件夹并单击“确定”。

7 单击“下一步”并等待 Java 安装。

8 通过转到“开始”、“程序”、“附件”“记事本”打开记事本。

9 在记事本中，复制粘贴以下两行批处理脚本：set Path=%~d0\JDK\bin;%PATH% cmd

10 单击“文件”、“另存为”，导航到 USB 驱动器根目录，键入“RunMeForJava.bat”作为文件名，然后单击“保存”。

11 将 USB 驱动器插入您没有管理员权限的计算机，然后双击 USB 根目录中的“.bat”文件。将打开一个命令提示符窗口。键入“javac”（不带引号）以查看 Java 是否正常工作并已完全安装。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-07-30T08:50:50.020

[Lawrence](https://stackoverflow.com/a/17161610/773874)提出的方法有效，但您也可以使用`7-zip`并[`git bash`](http://git-scm.com/)完成整个事情，而不会遇到太多麻烦。

注意：`git bash`带有一些 gnu 实用程序并且`unpack200`是其中之一。

不过，还有另一件小事要做。`src.zip`解压后自带的文件`JDK`不存在所以你可以下载Linux`tar.gz`版本并解压两次，`7-zip`然后将丢失的`src.zip`文件复制到windows unpacked `JDK`。

没有`src.zip`JDK 并不是什么大问题，但它可以让您轻松访问一些 JDK 源代码，例如`Intellij IDEA`.

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-12-12T13:52:24.483

为了在**没有管理员权限**的情况下在 Windows 上轻松安装 Java JDK ，您可以使用[https://aws.amazon.com/corretto/](https://aws.amazon.com/corretto/)。它包含一个便携式`amazon-corretto-<version>-windows-x64-jdk.zip`文件，您只需下载并解压缩即可。

1.  从 amazon.com 下载便携式 zip 文件，例如[https://d3pxv6yz143wms.cloudfront.net/8.232.09.1/amazon-corretto-8.232.09.1-windows-x64-jdk.zip](https://d3pxv6yz143wms.cloudfront.net/8.232.09.1/amazon-corretto-8.232.09.1-windows-x64-jdk.zip)

2.  将其解压缩到一个文件夹中，例如`C:\Users\John\programs`

3.  设置 JAVA_HOME 变量，例如`set JAVA_HOME=C:\Users\John\programs\jdk1.8.0_232`

4.  将“bin”文件夹的路径添加到 PATH：例如`set PATH = %PATH%; %JAVA_HOME%\bin`

5.  测试安装是否适用`javac -version`

***备注#1。***我正在使用 Amazon Corretto 提出这种替代技术，因为其他建议的答案需要 7-zip，您需要管理权限才能安装，而且我没有找到 7-zip 的简单可移植 .zip 版本。

***备注#2。***`my-cmd.cmd`您可以通过包含所需变量的文件来设置环境

```
rem # PROMPT is an optional question of taste ;-)
prompt [$P]$_$$$S
rem # VARIABLE(S)
set JAVA_HOME=C:\Users\UW31RY\programs\jdk1.8.0_232
rem # PATH
set PATH=C:\WINDOWS;C:\WINDOWS\system32;%JAVA_HOME%\bin
rem # Clear the screen!
cls 
```

并创建一个`%windir%\system32\cmd.exe /K "my-cmd.cmd"`作为`Target:`值的快捷方式，以及包含该`my-cmd.cmd`文件作为`Start in:`值的文件夹，例如`C:\Users\John\work`.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-01-14T09:43:56.423

@Lawrence 使用 Cygwin 做得很好。让我在不使用任何外部工具的情况下向您展示类似的步骤。

**在没有管理员权限的系统上使用实用程序安装：**

这适用于没有管理员权限的系统上的 Windows 7 或更高版本

1.  下载最新版本的 JDK：你可以在这里找到它[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)
2.  使用 7zip 工具将可执行文件解压缩到一个目录中。再次提取其中的内部`tools.zip`文件。
3.  转到`..\jre\bin`使用`SHIFT`和`Right Click`打开`Command Prompt`。
4.  键入`unpack200 SRC DST`。SRC 的替换：`*.pack`在解压的目录中搜索文件，复制粘贴文件的目录位置，`.pack`DST 的替换：使用相同的`.pack`文件路径，并将文件名替换为`.jar`
5.  对目录中所有`.pack`可用的文件执行此操作。（JDK8u65 有 6-8 个文件）
6.  启动Eclipse，选择一个项目，点击`Alt+Enter`，点击`Build Path`
7.  转到`Libraries`，删除可用的系统 JRE（如果有）。点击，然后`Add Library`选择，点击，点击。单击，然后选择。`JRE System Library``NEXT``Alternate JRE``Installed JREs``Add``Standard VM``NEXT``Directory`
8.  现在选择您在步骤 2 中执行的提取的 JDK 的目录位置，然后单击`FINISH`，`APPLY`然后`OK`

您必须很好地运行该项目而无需实际安装 JDK。干杯!

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-09-24T12:27:46.510

我尝试了几种安装方式，但是有一个常见的问题：

在最坏的情况下，**如果任何安装都需要管理员权限，那么您将无法使用 7zip，因为没有可移植版本的 7zip。**但是，在 Windows 10 和更高版本的 Windows 7 中（如果我没记错的话），**可以在没有任何程序安装的情况下提取 zip 文件**：只需`.zip`使用“Windows 资源管理器”打开文件并提取它们。但是，这只适用于普通的 zip 文件，不适用于 JDK 安装程序。

所以，我尝试了另一种方法并且它有效（对于 oracle jdk 1.8-191）：**您可以在您有权限的其他 PC 上安装 JDK，将其传递给您的公司 PC，并将其设置为要使用的 JDK**。

1.  只需在您具有管理员权限的另一台 PC 中安装 JDK，例如您在家中的 PC
2.  压缩该`JAVA_HOME`文件夹（ 的父文件夹`bin`），将其复制到 USB 驱动程序，然后将其带到您的公司。
3.  在您拥有完全访问权限的文件夹中解压缩，例如`C:\Users\<your_name>\java`（因为某些公司也限制粘贴到`Program Files`其他地方或其他地方，但绝不会限制您在个人用户文件夹中执行的操作
4.  将`JAVA_HOME`变量设置为那里（如果您不允许这样做，请跳过）。这同样适用于设置`java`路径（添加`bin\java`到 PATH 变量）
5.  打开 Intellij IDEA 或 Eclipse，在 IDE 中设置新的 JDK 以指向那里。
6.  编写一个简单的 Hello World 程序进行验证。

我发现这是因为当我查看 JDK 安装程序时，我看到的结构与 JDK 文件夹中的结构非常相似。所以我怀疑安装只包括将内容提取到文件夹中，加上一些我们可以手动完成的配置。看来我的理论被证明了。

# javascript - 使用 KineticJS 删除绘制的对象

> ID：10891406
> 
> 赞同：0
> 
> 时间：2012-06-05T04:04:19.923
> 
> 标签：javascript, html, canvas, kineticjs

希望这里有一个简单的问题：

假设我使用 KineticJS 画了一条线，如下所示：

```
var redLine = new Kinetic.Line({
      points: [73, 70, 340, 23, 450, 60, 500, 20],
      stroke: "red",
      strokeWidth: 15,
      lineCap: "round",
      lineJoin: "round"
    }); 
```

它已被添加到已添加到舞台的图层中。

但是现在我需要完全删除这条线，就好像它从来没有对某些用户事件做出反应一样。我该怎么做呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-16T14:13:25.590

`container.remove()`从它的父容器中删除它，同时从**这个**`container.removeChildren()`容器中删除所有**子**容器。它们都不接受任何参数。

记得删除后重绘图层。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-17T16:29:03.417

layer.remove() 删除您的图层...要删除单个形状，请使用 shape.remove()，我在任何地方都找不到它的文档...但显然它有效...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T23:27:15.113

我最好的解决方案是使用一种简单的方法：shape.hide(); 这种方法隐藏了形状，并且从您的绘图中“删除”它，您将不再看到它，但我认为形状仍然存在，不完全确定。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-06-05T04:14:54.490

假设你有一个像下面这样的层：

```
var layer = new Kinetic.Layer(....); 
```

`redLine`从图层中删除你的写：

```
layer.remove(redLine); 
```

# git - 推送到远程服务器和 Github

> ID：10891409
> 
> 赞同：5
> 
> 时间：2012-06-05T04:05:06.633
> 
> 标签：git

摘要：我想在本地编辑文件，然后推送到 Github 和我的 Web 服务器。

我已经毫无问题地设置了两个遥控器，所以现在我可以做到这一点；但是，我必须在本地签出分支 A，并在服务器上签出分支 B。然后我必须通过 SSH 连接到服务器并签出分支 A（我想要的那个）。我真的不想要或不需要第二个分支，但是许多帖子建议您不能或不应该推送到非裸存储库。一定会有更好的办法。即使只使用 rsync 也会比这更容易（我做了一段时间）。

奇怪的是，这在 Github 上从未发生过。几乎我所有的仓库都只有一个分支，我从来没有收到过这个警告。

警告消息说您可以设置`receive.denyCurrentBranch`为忽略，但我不知道它有多安全/理智。我希望有人能理解我模糊的描述（这是由于我对 git 的了解有限）并知道最佳解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T06:42:00.753

在您的 Web 服务器上的裸仓库上设置接收后挂钩会更容易。
这样，这个钩子可以：

*   更改目录并将新更改拉到实际的非裸仓库
*   结帐你想要的分支

请参阅“ [Git Post-Receive Hook for Website Staging](https://stackoverflow.com/questions/3838727/git-post-receive-hook-for-website-staging) ”和“[使用 Git 管理网站](http://toroid.org/ams/git-website-howto)”中的工作：

```
$ mkdir /var/www/www.example.org
$ cat > hooks/post-receive
#!/bin/sh
GIT_WORK_TREE=/var/www/www.example.org git checkout -f
$ chmod +x hooks/post-receive 
```

（注意：有趣的事实，你可以[同时推送到两个不同的远程仓库](https://stackoverflow.com/a/3195446/6309)）

# c# - 存根模拟的“ISession”对象时抛出异常

> ID：10891415
> 
> 赞同：3
> 
> 时间：2012-06-05T04:07:11.290
> 
> 标签：c#, nhibernate, rhino-mocks

我有以下代码尝试存根`ISession.Query<UnitModel>()`。

```
var unitList = new List<UnitModel>()
            {
                new UnitModel(){Name = "meters", Symbol="m"},
                new UnitModel(){Name="grams", Symbol="g"}
            };

MockRepository.GenerateMock<ISession>().Stub(x => x.Query<UnitModel>()).Return(unitList.AsQueryable<UnitModel>()); 
```

运行时，这会引发异常：

```
System.InvalidOperationException : Type 'System.Linq.EnumerableQuery`1[[MIB.DomainModels.UnitModel, MIB, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]' doesn't match the return type 'NHibernate.Engine.ISessionImplementor' for method 'ISession.GetSessionImplementation();' 
```

我在这里做错了什么？我应该如何处理存根`ISession.Query<UnitModel>()`？

NHibernate 3.3.0.4000

编辑： `UnitModel`类：

```
public class UnitModel
{
    public virtual string Name { get; set; }
    public virtual string Symbol { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T12:30:06.790

嘲笑`ISession`通常是昂贵和痛苦的。

`Query<T>`，特别是，是一个在内部调用的扩展方法`ISession.GetSessionImplementation()`，所以你必须模拟它才能使用它（这很重要，实际上将你与特定的实现细节联系在一起）

有两个更好的选择：

1.  实现一个存储库接口，该接口具有由 NHibernate 会话支持的实现，并且可以轻松模拟
    *   优点：功能强大，没有限制
    *   缺点：当您需要访问特定的 NH 功能时，您可能会发现自己受限于自己的抽象或重新发明轮子
2.  使用内存或干净的数据库进行测试
    *   优点：设置工作少得多，您可以访问所有 NH 功能
    *   缺点：如果您使用不同的数据库引擎，某些查询可能会有不同的行为。

除非您已经在使用存储库，否则我的建议是使用 #2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T04:36:34.670

在您的 UnitModel 类中实现 ISessionImplementor，然后 VisualStudio 应该警告您缺少方法...虽然我不确定它是否有太大帮助，因为 ISessionImplementor 是一个内部接口，我很确定您不应该使用它！

# asp.net - 授予 IIS 用户帐户在项目的 App_Data 目录中创建目录的权限

> ID：10891420
> 
> 赞同：0
> 
> 时间：2012-06-05T04:07:50.023
> 
> 标签：asp.net, asp.net-mvc-3, c#-4.0, iis-7

我有一个情况请继续阅读。

为了让 IIS 工作进程（运行我的 Web 应用程序的进程）在 App_data 文件夹（在我的网站根目录）内创建文件夹，我已授予 IIS 用户帐户（应用程序池标识）的权限。我的工作进程在此用户帐户。

因此，当应用程序运行时，会调用 Global.asax 中的 Application_Start 方法，并且该目录是由 Application w/o 问题创建的。

现在的问题是，每次构建和部署站点时，是否会在 webroot 中重新创建整个文件夹结构？我认为在构建和部署过程中只替换文件夹内的文件。请澄清？

如果是这样，那么我必须再次将权限应用于 App_data 文件夹，以便让 IIS 工作进程通过该 IIS 用户帐户再次创建目录。

请澄清疑问。我的问题已解决，如果我不需要在每次构建和部署站点时再次为 App_data 设置权限。

在此先感谢 S。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:14:31.357

我从未尝试过但发现了这个。他提供了一种在部署时设置权限的方法：

> [http://sedodream.com/2011/11/08/SettingFolderPermissionsOnWebPublish.aspx](http://sedodream.com/2011/11/08/SettingFolderPermissionsOnWebPublish.aspx)

# android - 更改位图中的特定颜色，Android

> ID：10891423
> 
> 赞同：0
> 
> 时间：2012-06-05T04:08:06.880
> 
> 标签：android, paint, android-canvas

假设我有 3 个**BITMAPS**，上面有 2 种颜色。

1.  红和白
2.  蓝色和白色
3.  绿色和白色

现在我只想用任何颜色分别更改 3 幅图像中的红色、蓝色和绿色。例如：黑色。

我采取什么方法？

我读到了关于更换颜色的文章，我成功地更换了特定的颜色。例如：我可以通过指定要更改的颜色来分别替换 red 、 blue 和 green 。

但是我如何使它通用？你能建议任何方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-03T17:37:49.833

您可以在此处使用该方法： [将位图中的黑色替换为红色](https://stackoverflow.com/questions/7237915/replace-black-color-in-bitmap-with-red) ，然后在 if 语句中添加更多测试。

```
int [] allpixels = new int [ myBitmap.getHeight()*myBitmap.getWidth()];

myBitmap.getPixels(pixels, 0, myBitmap.getWidth(), 0, 0,myBitmap.getWidth(),myBitmap.getHeight());

for(int i =0; i<myBitmap.getHeight()*myBitmap.getWidth();i++){

    if( allpixels[i] == Color.RED || allpixels[i] == Color.BLUE || allpixels[i] == Color.GREEN)
         allpixels[i] = Color.BLACK;
}

myBitmap.setPixels(allpixels, 0, myBitmap.getWidth(), 0, 0, myBitmap.getWidth(), myBitmap.getHeight()); 
```

然后你可以把它变成一个以颜色数组作为参数的函数。

# c++ - 为什么启动Drive实例时基类和Drive类具有相同的虚拟指针但有2个vtable

> ID：10891424
> 
> 赞同：1
> 
> 时间：2012-06-05T04:08:12.650
> 
> 标签：c++, inheritance, pointers, virtual, vtable

```
#include <iostream>
using namespace std;

class Base {
public:
    Base() {
        cout << "In Base" << endl;
        cout << "Virtual Pointer = " << (int*)this << endl;
        cout << "Address of Vtable = "
        << (int*)*(int*)this << endl;
        cout << "Value at Vtable = "
        << (int*)*(int*)*(int*)this << endl;
        cout << endl;
    }

    virtual void f1() { cout << "Base::f1" << endl; }
};

class Drive : public Base {
public:
    Drive() {
        cout << "In Drive" << endl;
        cout << "Virtual Pointer = "
        << (int*)this << endl;
        cout << "Address of Vtable = "
        << (int*)*(int*)this << endl;
        cout << "Value at Vtable = "
        << (int*)*(int*)*(int*)this << endl;
        cout << endl;
    }

    virtual void f1() { cout << "Drive::f2" << endl; }
};

int main() {
Drive d;
return 0; 
```

}

这个程序的输出是

```
In Base
Virtual Pointer = 0012FF7C
Address of Vtable = 0046C08C
Value at Vtable = 004010F0

In Drive
Virtual Pointer = 0012FF7C
Address of Vtable = 0046C07C
Value at Vtable = 00401217 
```

按照代码，我可以看到，当我创建一个 Drive 对象时，Base 构造函数也运行并显示与 Drive 的虚拟指针相同的虚拟指针地址：0012FF7C。奇怪的是，当我在 Base 和 Drive 类的构造函数中取消引用该地址时，它指向不同的值，这意味着有两个 vtable，一个在 0046C08C，另一个在 0046C07C。当 1 指针指向 2 地址时，它在 Drive 对象的结构和 c 语言中都很难理解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T04:12:23.070

随着对象构造的发生，它分步进行。第一步是初始化基类，在这个过程中，对象*就是*基对象——vtable 将反映基类的方法。当构造进展到派生类时，vtable 被更新为派生类的 vtable。

这都是由 C++ 标准规定的，当然，除了该标准不强制实现 vtables。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T04:17:07.670

您刚刚见证了 C++ 编译器如何实现 C++ 标准规定的规则。在`Base`构造函数运行时，对虚拟方法的任何调用都需要分派给`Base`实现，即使`Drive`重写它们也是如此。为了实现这一点，您的 C++ 编译器显然使对象的 vtable 指针指向`Base`vtable。当`Base`构造函数完成并在`Drive`构造函数中继续执行时，vtable 指针被更新为指向`Drive`vtable。

这最终成为实现它的便捷方式。编译器生成*调用*虚方法的指令的其余代码不需要更改以检测是否需要特殊的构造函数行为。它可以像往常一样在 vtable 中查看。更改 vtable 指针是在构造函数运行时更改对象的有效运行时类型的快速方法。

您可能会发现析构函数以类似的方式工作，但相反。如果您构造一个`Base`对象而不是一个`Drive`对象，您可能会看到与您在对象的`Base`构造函数中所做的相似的地址`Drive`。

# java - 如何正确使用 Google Calendar API 的 Events.Insert 命令？

> ID：10891425
> 
> 赞同：23
> 
> 时间：2012-06-05T04:08:19.713
> 
> 标签：java, google-api, google-calendar-api

所以我一直在使用调用 Google API 的 REST 方法。我需要将事件插入到我拥有其 ID 的特定日历中。这是我发送的 POST 请求：

地址： [https](https://www.googleapis.com/calendar/v3/calendars/) ://www.googleapis.com/calendar/v3/calendars/ {calendarID}/events

身体：

```
Authorization:  Bearer {access_token}
{
 "end": {
  "dateTime": "2012-08-30T12:30:00",
  "timeZone": "America/Chicago"
 },
 "start": {
  "dateTime": "2012-08-30T14:00:00",
  "timeZone": "America/Chicago"
 },
 "summary": "E E 306",
 "colorId": "9"
 "kind": "calendar#event"
} 
```

这是我不断得到的回应：

```
{
 "error":{
  "errors":[
   {
    "domain":"calendar",
    "reason":"timeRangeEmpty",
    "message":"The specified time range is empty.",
    "locationType":"parameter",
    "location":"timeMax"
   }
  ],
  "code":400,
  "message":"The specified time range is empty."
 }
} 
```

我不明白我可能做错了什么。我已经输入了所有必要的数据，它要求我提供一个事件甚至不存在的参数。我也找不到关于这个特定问题的任何文档。有人看到我缺少的东西吗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-05T04:08:19.900

在问这个问题的过程中，我的脸被拍得很厉害，我想我已经给自己造成了脑损伤。事实证明，我找不到有关此问题的任何文档的原因是因为它非常愚蠢。

它给我这样一个有趣的错误的原因是因为在我正在测试的复制粘贴中，**我翻转了开始和结束时间**。所以，我告诉谷歌日历输入一个在它开始之前就结束的事件，这通常不会很好地结束。

**长话短说**，如果您在尝试插入事件时遇到涉及“timeMax”参数的错误，请检查您的开始和结束时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-05T05:46:53.107

dateTimes 必须在 RFC3339 上，如下所述：

[https://developers.google.com/google-apps/calendar/v3/reference/events](https://developers.google.com/google-apps/calendar/v3/reference/events)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-01T17:52:41.667

```
{
 "end": {
  "dateTime": "2014-04-01T10:00:00-06:00"
 },
 "start": {
  "dateTime": "2014-04-02T10:00:00-06:00"
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-07T05:03:14.197

比较开始和结束日期时间，开始总是小于结束。还将 dateTime 格式更改为“2018-03-07T18:00:00+05:30”。

在IOS中，我使用

此日期时间格式的代码：

```
let dateTimeFormatter = DateFormatter()
dateTimeFormatter = Locale(identifier: "en_US_POSIX")
dateTimeFormatter = "yyyy-MM-dd'T'HH:mm:ssZZZZZ"
dateTimeFormatter = TimeZone(secondsFromGMT: 0)
let dateTimeString = dateTimeFormatter.string(from: YOUR_DATE_TIME) 
```

此日期格式代码：

```
let dateFormatter = DateFormatter()
dateFormatter.dateFormat = "yyyy-MM-dd"
let dateString = dateFormatter.string(from: YOUR_DATE) 
```

一个键和它的值就足够了，剩下的两个键不需要，即你有'dateTime'键值，那么就不需要'date'和'timeZone'键。如果你想设置 'timeZone' 它是可选的，但只有一个来自 'date' 和 'dateTime' 就足够了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-29T20:59:12.153

**通常在开始 > 结束**时会遇到此问题

 **示例：您正在指定开始和结束日期，如下所示：

开始：2020-10-10T13:30:00+5:30（即 2020 年 10 月 10 日 @1:30PM） 结束：2020-10-10T13:00:00+5:30（即 2020 年 10 月 10 日 @1:00PM）

结束时间应大于开始时间。

```
{
"summary": "some summary",
"description": "some description",
"location": "some location",
"end":  {"dateTime" : "2020-10-10T13:30:00+5:30"},
"start" : { "dateTime" : "2020-10-10T13:00:00+5:30"},
} 
```**

# javascript - 需要操作全局变量，但不能在 Ajax 中。需要解决这个问题

> ID：10891427
> 
> 赞同：0
> 
> 时间：2012-06-05T04:08:42.340
> 
> 标签：javascript, jquery

[http://pastebin.com/x5UnA1sE](http://pastebin.com/x5UnA1sE)

这是我陷入困境的代码的一点粘贴。

我正在尝试在 jQuery.get 回调函数中操作全局变量“数据”，以便格式化数据并在需要的地方返回此数据。

然而，这个全局变量在回调函数中根本没有被操纵，这很可能是由于 Ajax 是异步的。

如何从数据库中获取我需要的信息并最终将其返回到变量中，就像我在这段代码中尝试做的那样？

任何方向将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:33:01.080

我认为你错过了要点`asynchroneus`并且`callback` 你知道这些话，但你不知道如何处理这些行为。

asynchreus 意味着你必须使用回调 -» 意味着你的代码必须是高效的，你不要把事情一个接一个地放在后面。你有函数，所有这些函数都做一件事，当它们完成它们应该做的事情时调用指定的回调。

您要做的不是期望从您的 mapPoints 返回，而是`callback`在您完成操作数据时调用一个函数。

只是一个使用回调的小例子

```
function displayPoint(data) {
    //display all the points
}

function callServer(callback {
    ajaxCall(url, function(data) { dataHandler(data, callback); } );
}

function dataHandler(data, callback) {
    // modify data

    callback(data);
}

// process
callServer(displayPoint); 

/***
call callServer by passing displayPoint as callback
callServer will perform the ajax call.
The result will be handle by the anonymus function.
This function just call the dataHandler function, passing it the datas from the server, and the callback function given to callServer ( so displayPoint )
dataHandler will modify the datas, then call the callback function, passing it the datas.

YOU DON'T NEED GLOBAL VAR ANYMORE, and that is a really good thing
***/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T04:12:08.233

如果您访问`callback`函数内部的数据变量怎么办？

```
function mapPoints()
{
    var url = '../common/ajax/get_map_points.php'; 
    var map = {}; 
     $.get( url, map, recieve_map_points,function(data){
          console.log(data);         
          return data;
     });       
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T04:21:03.497

如果你做这样的事情会更好

```
function mapPoints() {
    var url = '../common/ajax/get_map_points.php'; 
        map = {}; 

     $.get( url, map, recieve_map_points,function(data){
         getMyData(data);  // call function when you receive data
     });       
}

function getMyData(data) {
  // make something with data
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T04:33:41.293

我将详细说明Shyju所说的内容。

首先，ajax 是否是异步的不是问题。您始终可以通过使用`asynch: false`和拥有同步请求来禁用它。

这里的问题是您希望如何访问和操作返回到服务器的数据。这是关键部分。

让我们分解在哪里进行更改

```
$.get( url, map, receive_map_points){}); 
```

在上面的回调中，必须使用函数声明来访问，你不能用你自己创建的另一个函数替换这个声明，相反，你可以命名对象，并将它传递给另一个函数来操作对象中保存的数据. 这里的关键要素是我们需要确保我们`send the object back as a JSON encoded array`.

```
jQuery.get( url, map, function(data){
  //access the data as a json object, extract what we need
  var ddoc = data.doc;
  var dtextrank = data.textrank;

  //pass the newly created data to our function, and have the function extract what it needs.
  receive_map_points(ddoc, dtextrank);
});

function receive_map_points(doc, textrank){
  //same code you used originally.
} 
```

正如您在上面看到的，我们不需要更改 receive_map_points 函数中的任何代码，但我们确实需要更改`data being sent back to the function as a JSON encoded array`php 中的示例：

```
json_encode(array("doc" => "something", "textrank" => "something else")); 
```

希望这可以帮助。

# java - JAVA和python中的Windows排序顺序

> ID：10891434
> 
> 赞同：0
> 
> 时间：2012-06-05T04:09:27.447
> 
> 标签：java, python, windows, sorting, compare

我的 Windows XP 中有以下文件。其中按以下方式按名称顺序排序。

```
test_1a.play
test_1AA.play
test_1aaa.play
test_1AB.play
test_1AC.play
test-_1AAAA.play 
```

如果我在 java 中读取这些文件并执行 Collections.sort(listofFiles) 或 python 并执行 listofFiles.sort() 我得到以下命令

```
test-_1AAAA.play
test_1AA.play
test_1AB.play
test_1AC.play
test_1a.play
test_1aaa.play 
```

在 GUI 中，我需要按窗口排序的顺序显示文件。具有上述名称的文件夹按默认排序机制排序。只有文件是无序的。所以我正在寻找一种在 Windows 中用于 java 和 python 的比较方法。**谁能帮我用比较器来解决这个问题**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:25:38.970

试试看：

```
 Collections.sort(files,new Comparator<File>()
    {
        Collator myCollator = Collator.getInstance();
        @Override
        public int compare(File o1, File o2)
        {
            return myCollator.compare(o1.getName(),o2.getName());
        }
    }); 
```

不同之处在于 Windows 不区分大小写。如果您查看[Collat​​or](http://docs.oracle.com/javase/6/docs/api/java/text/Collator.html)的文档，它会说：

> Collat​​or 类执行对区域设置敏感的字符串比较。

你只需要做一个比较器。如果您的 List 不是文件列表，而是字符串列表，则更容易，因为比较器已经存在：[http ://docs.oracle.com/javase/6/docs/api/java/lang/String.html# CASE_INSENSITIVE_ORDER](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#CASE_INSENSITIVE_ORDER)

# cocos2d-iphone - cocos2d version2.0单例无效

> ID：10891435
> 
> 赞同：0
> 
> 时间：2012-06-05T04:09:28.077
> 
> 标签：cocos2d-iphone, singleton

我用cocos2d version2.0建游戏，没用ARC，发现一个问题：单例无效。

我用了两个单例宏，问题一样。

```
#ifndef SINGLETON_INTERFACE
#define SINGLETON_INTERFACE(CLASSNAME)                  \
    +(CLASSNAME*) sharedManager;
#endif

#ifndef SINGLETON_IMPLEMENTATION
#define SINGLETON_IMPLEMENTATION(CLASSNAME)             \
                                                        \
+(CLASSNAME*) sharedManager {                           \
    static dispatch_once_t pred;                        \
    static CLASSNAME* shared##CLASSNAME = nil;          \
    dispatch_once( &pred, ^{                            \
    shared##CLASSNAME = [[self alloc] init]; });        \
    return shared##CLASSNAME;                           \
}                                                           
#endif 
```

或者

```
#ifndef SINGLETON_INTERFACE
#define SINGLETON_INTERFACE(CLASSNAME)              \
    +(CLASSNAME*) sharedManager;
#endif

#ifndef SINGLETON_IMPLEMENTATION            
#define SINGLETON_IMPLEMENTATION(CLASSNAME)         \
\
static CLASSNAME* shared##CLASSNAME = nil;          \
\
+(CLASSNAME*) sharedManager                         \
{                                                   \
    if (shared##CLASSNAME != nil) {                 \
        return shared##CLASSNAME;                   \
    }                                               \
\
    @synchronized(self) {                           \
        if (shared##CLASSNAME == nil) {             \
            shared##CLASSNAME = [[self alloc] init];\
        }                                           \
    }                                               \
\
    return shared##CLASSNAME;                       \
}                                                   \
\
+(id) allocWithZone:(NSZone*)zone                   \
{                                                   \
    @synchronized(self) {                           \
        if (shared##CLASSNAME == nil) {             \
            shared##CLASSNAME = [super allocWithZone:zone]; \
            return shared##CLASSNAME;               \
        }                                           \
    }                                               \
    NSAssert(NO, @ "[" #CLASSNAME " alloc] explicitly called on singleton class.");   \
    return nil;                                     \
}                                                   \
\
-(id) copyWithZone:(NSZone*)zone                    \
{                                                   \
    return self;                                    \
}                                                   \
\
-(id) retain                                        \
{                                                   \
    return self;                                    \
}                                                   \
\
-(unsigned) retainCount                             \
{                                                   \
    return UINT_MAX;                                \
}                                                   \
\
-(oneway void) release                              \
{                                                   \
}                                                   \
\
-(id) autorelease                                   \
{                                                   \
    return self;                                    \
}
#endif 
```

利用：

```
[[CCDirector sharedDirector] replaceScene:[MenuScene sharedManager]]; 
```

MenuScene 再次显示，但任何按钮（CCMenu）或其他元素（CCNode）都没有响应。我的意思是第一次调用，场景一切正常，再次调用时，场景显示但菜单或其他元素没有响应。但是在cocos2d v1.0 运行非常好。

///////////////////////////////////////// ///////////////

我在没有“[super cleanup]”的情况下覆盖了“cleanup”，如下所示：

```
-(void) dealloc
{   
    [super cleanup];
    [super dealloc];
}

-(void) cleanup 
{
    //
} 
```

现在，运行单例的场景没问题，但它安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:34:18.223

问题可能在于 CCDirector 对场景的子节点执行“清理”操作。

cocos2d v2.0 在几种情况下增加了对块的使用，这些块在“清理”期间被释放，无论你的单例是否留在内存中。

从 v2.0 迁移指南：

> 将清理标志设置为 YES 可能会在您的应用程序逻辑中产生副作用，该逻辑仍在对已释放资源进行隐式引用。CCMenuItems，它在内部使用块来启动操作，可能会出现问题并且不启动操作，假设您已经从其父节点中删除了项目并激活了清理标志并将其添加回来，这是一个明显的迹象之一。只需将标志更改为 NO 就足够了。

迁移指南：[http ://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:migrate_to_v2.0#ccsprite](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:migrate_to_v2.0#ccsprite)

* * *

副手，我建议你：

*   找到一种方法来安全地防止对您的单身孩子进行“清理”。
*   或者：将所有内容作为您显示/隐藏的 CCLayer 的子项保存在内存中，而不是使用场景机制。
*   或者：不要使用单例，每次都重新创建你的场景。

# hash - 探测每个 R'th 位置以进行散列

> ID：10891446
> 
> 赞同：2
> 
> 时间：2012-06-05T04:10:35.583
> 
> 标签：hash, probing

我在讲座中好奇的一些事情：

假设我们要探测函数 x mod 10 和 R = 2 的每个 Rth 位置。现在散列 4、14、114、1114 和 11114：

*   4 将进入插槽 4。
*   14 会首先尝试进入插槽 4，但看到它已满，它将进入插槽 6，然后 (+R)。
*   114 会发现插槽 4 已满，进入插槽 6 (+R)，但由于已满，它将进入插槽 0 (+2R)。

但是对于 1114 来说，它似乎永远在继续——无论它去哪里，它总是会遇到一个完整的插槽。在这种情况下会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:53:34.587

对于开放寻址哈希表上不可解决的哈希冲突，有三种替代方案：

1.  用不同的散列函数重新散列整个表，并希望不会发生新的无法解决的散列冲突。
2.  调整表的大小（以及这可能导致的所有操作），以保证更多可能的插槽。
3.  为无法解决的哈希冲突保留一个单独的列表。

这些选项都不好。

您应该做的是结合哈希表大小仔细选择您的探测方法。如果您的表大小是奇数，并且具有相同的恒定步长，那么当表中仍有空间时，您将不会遇到此问题。

流行的组合包括使用素数大小的哈希表进行二次探测，如果表小于半满则保证插入成功，以及[使用三角形数和 2 哈希表的幂进行二次探测，](https://stackoverflow.com/a/2349774/1157317)如果表不满则保证插入. 2 大小哈希表的力量有很多优点，唯一的缺点是它们对哈希算法的质量无情。

# node.js - Node.js 护照跳过策略

> ID：10891447
> 
> 赞同：0
> 
> 时间：2012-06-05T04:11:16.597
> 
> 标签：node.js, passport.js

这个咖啡脚本护照实现看起来就像我的例子，但每次都失败并且从不打印“尝试策略”。我只是被重定向到“/失败”。我尝试命名策略并在 (req, res, next) 处理程序中执行它。我还验证了发布的表单在这些字段中发送了用户名和密码，并尝试根据示例使用策略中的映射重命名它们，但无济于事。关于我忽略的任何提示？

```
pass = require 'passport'
strat = require('passport-local').Strategy
exp = require 'express'
app = exp.createServer()

# Configure strategy
pass.use new strat (username, password, done) ->
    #Logic to find user
    console.log("Trying out the strategy")
    user = {nm:username,ps:password}
    done(null,user)

app.configure () ->
    app.use (req,res,next) ->
        console.log("GOT A REQ")
        next()
    app.use pass.initialize()

ops = { failureRedirect: '/fail' }
app.post '/auth', pass.authenticate('local',ops), (req, res, next) ->
    console.log "what about here"

app.listen 1337 
```

**解决** 方法 修改 express 配置：

```
app.configure () ->
    app.use exp.bodyParser() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T01:24:07.720

原来这个问题是由于我对快递的无知。我正在发送用户名和密码，但没有解析它 - app.configure 需要 express.bodyParser() 才能使用这些策略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T17:04:09.080

如果您被重定向到 /fail，这表明 Passport 正在处理请求并且身份验证不成功。也许是一个愚蠢的建议，但你是在发布一个带有`username`和`password`字段的表单吗？如果其中任何一个都不存在，则这是本地策略中的主要失败案例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T04:29:03.690

我发现咖啡脚本的内容令人难以置信的混乱阅读（也许也发布编译后的 JS 版本，除非有人比我更好地阅读咖啡渣）。无论如何，假设您调用 pass.authenticate 的语法是正确的（我通常使用处理响应的自定义回调来调用它），突出的两件事是：

1）您没有 passport.serializeUser 和 deserializeUser 设置。

2) 除非您使用 session:false 调用身份验证并进行自己的会话设置，否则我认为需要加载和配置连接/快速会话。

# php - 如何使用php从mysql结果中获取数组格式

> ID：10891453
> 
> 赞同：0
> 
> 时间：2012-06-05T04:12:11.043
> 
> 标签：php, mysql, arrays

我想从 mysql 数据库中获取数组格式。例如，让我有**名称表**。

*名称表*

```
Id    name

1    jone
2    smith
3   waiyan 
```

我想得到这个数据数组形式。

```
$name=array('jone','smith','waiyan');(//I want to get this format) 
```

怎样才能得到这个结果？我是 php 的初学者。请回答我。谢谢你的贡献。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T04:17:17.550

像这样的东西：

```
$sth = mysql_query("SELECT name FROM your_table");
$rows = array();
while($r = mysql_fetch_assoc($sth)) {
    $rows[] = $r["name"];
    //OR
    array_push($rows, $r['name']);
}
print_r($rows); 
```

参见：[mySQL PHP](http://php.net/manual/en/function.mysql-fetch-assoc.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T04:21:03.513

在此处查看有关 mysql 函数的信息：http: [//jp2.php.net/manual/en/ref.mysql.php](http://jp2.php.net/manual/en/ref.mysql.php)

对于您要询问的特定任务，应该这样做：

```
$result = msql_query('YOUR QUERY'); // returns a result resource
if ($result === false)  
{
    // handle the error
}

$names = array();
// get each row from your result one-by-one
while ($row = mysql_fetch_assoc($result))
{
    $names[] = $row['name']; // the keys in $row are named like your mysql columns
} 
```

# sql - 如何编写此 CTE 查询？

> ID：10891456
> 
> 赞同：1
> 
> 时间：2012-06-05T04:12:26.477
> 
> 标签：sql, sql-server, sql-server-2008, rdbms, common-table-expression

您好，我想根据其他表中存在的值更新 1 个表。我可以使用 Join 来编写更新语句，事实上我已经编写了它并且它使用 Join 工作。但出于好奇，我想使用 CTE。我写了以下查询，但它似乎不起作用。谁能告诉我问题是什么？CTE 是否强制要求最后的 Select 语句？为什么我不能写更新语句？

```
WITH cte(uid, col1)
As
(
    Select uid, col1
        From [User]
)
Update t2
    Set col1 = cte.col1
        Where uid = cte.uid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:17:56.020

您仍然需要重新加入您的 CTE，就像这样

```
WITH cte([uid], col1)
As
(
    Select [uid], col1
        From [User]
)
Update t2
    Set col1 = cte.col1
    FROM t2 inner join cte cte 
    on t2.[uid] = cte.[uid] 
```

**编辑我想您可以通过使用**[旧式](http://msdn.microsoft.com/en-us/library/ms190014%28v=sql.105%29.aspx)SQL WHERE 连接来避免使用“JOIN”关键字，但这并不是一个很好的做法。

```
...        
FROM t2, cte cte 
WHERE t2.[uid] = cte.[uid] 
```

另请注意，您也可以通过 CTE 进行更新，就像视图一样，只要您只更新一个表即可。

```
WITH cte(userCol1, t2Col1)
As
(
    Select [u].col1 as userCol1, t2.col1 as t2Col1
        From [User] u
        inner join t2
         ON u.[uid] = t2.[uid]
)
Update cte
    Set t2Col1 = userCol1 
```

# php - 如何将用户设置合并到 RSS 提要中？

> ID：10891463
> 
> 赞同：0
> 
> 时间：2012-06-05T04:14:15.283
> 
> 标签：php, mysql, authentication, rss

我希望拥有动态生成的 RSS 提要（我可以这样做）但基于用户偏好设置。因此，例如，如果用户想在他们的 RSS 中只看到带有特定标签的图片，他们的 RSS 提要就会显示它们。

我想做的事情有两个问题：

1.  它不可能是一个简单的基于用户 ID 的系统，因为可能不允许某些用户访问某些项目，所以我不希望他们的提要显示它们。使用基于用户 ID 的系统意味着某人可以输入随机用户编号，直到他们得到一个他们不应该看到的东西。
2.  大多数 RSS 阅读器无法使用 cookie，因此存储在那里的登录数据将无法使用。

生成这个的系统是基于 PHP 和 MySQL 的。

对于可以做到这一点的安全系统，每个人都有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:26:29.073

如果它对互联网开放，那么基本上没有办法保护 rss。伤心。

您可以做的是在 rss 上提供最少（非关键）数据，然后在单击 rss 链接以获取详细信息时执行标准登录 cookie 内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T04:19:24.363

如何使用`UUID`它们以使它们是独一无二的，并且任何用户都不容易随机生成`UUID`您系统的有效值？

# python - Django将字段添加到模型 - 字段未显示在表单上

> ID：10891465
> 
> 赞同：0
> 
> 时间：2012-06-05T04:14:21.660
> 
> 标签：python, django, dynamic, django-cms, modelform

我整晚都在寻找这个问题的答案，但似乎找不到问题所在。

我正在将自定义 CMS 移植到 Django，基本上它具有以下结构：

*   一个条目有 1 个布局
*   一个布局有很多部分

因此，在用户创建并输入之后，当他们编辑它时，我想显示该布局中包含的所有部分。

所以我从条目中获取布局 ID，循环并获取部分，并尝试将它们添加到表单中。

当我调试它时，看起来一切都被添加到字段对象中，但它不会显示在表单上，​​除非我预定义字段，这会破坏目的

我在这里遵循了几个示例并获得了以下代码：

```
class EntryChangeForm(forms.ModelForm):

def __init__(self, *args, **kwargs):
    super(EntryChangeForm, self).__init__(*args, **kwargs)
    layout = Layout.objects.filter(id=self.instance.layout_id)
    layout_sections = Section.objects.filter(layout_id=layout)
    for section in layout_sections:
        self.fields['section_%d' % section.id] = models.CharField(max_length=200, verbose_name=section.section_label)
        current_section = Data.objects.filter(page_id=self.instance.id, section_id=section.id, content_table_id=2)
        if current_section:
            self.fields['section_%d' % section.id.initla] = current_section.text
        else:
            self.fields['section_%d' % section.id].initial = "" 
```

我调试和打印 self.fields 的示例

```
 {'layout': 
<django.forms.models.ModelChoiceField object at 0x1c30b50>, 
'uid': <django.forms.fields.IntegerField object at 0x1c30c50>, 
'url': <django.forms.fields.CharField object at 0x1c30cd0>, 
'url_301': <django.forms.fields.CharField object at 0x1c30d50>, 
'name': <django.forms.fields.CharField object at 0x1c30dd0>, 
'page_title': <django.forms.fields.CharField object at 0x1c30e50>, 
'meta_description': 
<django.forms.fields.CharField object at 0x1c30ed0>, 
'meta_keywords': <django.forms.fields.CharField object at 0x1c30f50>, 
'order_fld': <django.forms.fields.CharField object at 0x1c30fd0>, 
'user_id': <django.forms.fields.IntegerField object at 0x1c32090>, 
'author': <django.forms.models.ModelChoiceField object at 0x1c32110>, 
'date_active': <django.forms.fields.SplitDateTimeField object at 0x1c32210>, 
'date_added': <django.forms.fields.SplitDateTimeField object at 0x1c32290>, 'date_modified': <django.forms.fields.SplitDateTimeField object at 0x1c32390>, 'date_expires': <django.forms.fields.SplitDateTimeField object at 0x1c32490>, 'date_published': <django.forms.fields.SplitDateTimeField object at 0x1c32590>, 'is_active': <django.forms.fields.TypedChoiceField object at 0x1c32690>, 'hide_from_dropdown': <django.forms.fields.TypedChoiceField object at 0x1c32790>, 'is_featured': 
<django.forms.fields.TypedChoiceField object at 0x1c32810>, 
'in_sitemap': <django.forms.fields.TypedChoiceField object at 0x1c32890>, 
'admin_user_id': <django.forms.fields.IntegerField object at 0x1c32910>, 'show_large_photo': <django.forms.fields.TypedChoiceField object at 0x1c32990>, 'is_featured_on_homepage': <django.forms.fields.TypedChoiceField object at 0x1c32a10>, 'capitalize_first_letter': <django.forms.fields.TypedChoiceField object at 0x1c32a90>, 'display_share_box': <django.forms.fields.TypedChoiceField object at 0x1c32b10>, 'display_subscribe_box': <django.forms.fields.TypedChoiceField object at 0x1c32b90>, 'is_commenting_enabled': <django.forms.fields.TypedChoiceField object at 0x1c32c10>, 'legacy_import':
 <django.forms.fields.TypedChoiceField object at 0x1c32c90>, 
'section': <django.db.models.fields.CharField>, 
'section_3': <django.db.models.fields.CharField>, 
'section_2': <django.db.models.fields.CharField>, 
'section_4': <django.db.models.fields.CharField>}

{'layout': 
<django.forms.models.ModelChoiceField object at 0x1c30b50>, 
'uid': <django.forms.fields.IntegerField object at 0x1c30c50>, 
'url': <django.forms.fields.CharField object at 0x1c30cd0>, 
'url_301': <django.forms.fields.CharField object at 0x1c30d50>,
'name': <django.forms.fields.CharField object at 0x1c30dd0>, 
'page_title': <django.forms.fields.CharField object at 0x1c30e50>, 
'meta_description': <django.forms.fields.CharField object at 0x1c30ed0>, 
'meta_keywords': <django.forms.fields.CharField object at 0x1c30f50>, 
'order_fld': <django.forms.fields.CharField object at 0x1c30fd0>, 
'user_id': <django.forms.fields.IntegerField object at 0x1c32090>, 
'author': <django.forms.models.ModelChoiceField object at 0x1c32110>, 
'date_active': <django.forms.fields.SplitDateTimeField object at 0x1c32210>, 
'date_added': <django.forms.fields.SplitDateTimeField object at 0x1c32290>, 'date_modified': <django.forms.fields.SplitDateTimeField object at 0x1c32390>, 'date_expires': <django.forms.fields.SplitDateTimeField object at 0x1c32490>, 'date_published': <django.forms.fields.SplitDateTimeField object at 0x1c32590>, 'is_active': <django.forms.fields.TypedChoiceField object at 0x1c32690>, 'hide_from_dropdown': <django.forms.fields.TypedChoiceField object at 0x1c32790>, 'is_featured': <django.forms.fields.TypedChoiceField object at 0x1c32810>, 
'in_sitemap': <django.forms.fields.TypedChoiceField object at 0x1c32890>, 
'admin_user_id': <django.forms.fields.IntegerField object at 0x1c32910>, 'show_large_photo': <django.forms.fields.TypedChoiceField object at 0x1c32990>, 'is_featured_on_homepage': <django.forms.fields.TypedChoiceField object at 0x1c32a10>, 'capitalize_first_letter': <django.forms.fields.TypedChoiceField object at 0x1c32a90>, 'display_share_box': <django.forms.fields.TypedChoiceField object at 0x1c32b10>, 'display_subscribe_box': <django.forms.fields.TypedChoiceField object at 0x1c32b90>, 'is_commenting_enabled': <django.forms.fields.TypedChoiceField object at 0x1c32c10>, 'legacy_import': <django.forms.fields.TypedChoiceField object at 0x1c32c90>, 
'section': <django.db.models.fields.CharField>, 
'section_3': <django.db.models.fields.CharField>, 
'section_2': <django.db.models.fields.CharField>, 
'section_4': <django.db.models.fields.CharField>} 
```

我可以看到我添加的字段与模型中已经存在的字段的明显差异：`'legacy_import': <django.forms.fields.TypedChoiceField object at 0x1c32c90>, 'section': <django.db.models.fields.CharField>,` 但不知道如何纠正这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T10:01:09.257

这是一个表单，而不是模型，因此您要添加表单字段，而不是模型字段。

```
self.fields['section_%d' % section.id] = forms.CharField(max_length=200, label=section.section_label) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:27:23.150

找到了答案。

[https://code.djangoproject.com/ticket/12238](https://code.djangoproject.com/ticket/12238)

显然，向 ModelForms 添加字段存在错误。

将上面链接评论中的更改应用到 options.py 似乎已经解决了这个问题，并且这些字段现在显示在表单上。

> 与此同时，我通过更新 contrib/admin/options.py 解决了这个问题：
> 
> ```
> def get_fieldsets(self, request, obj=None):
>     "Hook for specifying fieldsets for the add form."
>     if self.declared_fieldsets:
>         return self.declared_fieldsets
>     #form = self.get_form(request, obj)
>     #return [(None, {'fields': form.base_fields.keys()})]
>     form = self.get_form(request, obj)(instance=obj)
>     return [(None, {'fields': form.fields.keys()})] 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T07:16:25.733

如果您没有在模型中定义主键，则可能会根据您的 django 环境设置自动创建名为 id 的列或其他内容作为主键。或者如果您直接在 db 中定义了一些列，但要做到这一点，您需要在 django 模型中编写它们的映射。要查看您的模型 sql，只需转到终端并键入：

```
# python manage.py sql [appname] 
```

现在会有 django 为你生成的表 sql。所以你可以看到列。

# qt - qt延迟关闭像素图

> ID：10891466
> 
> 赞同：0
> 
> 时间：2012-06-05T04:14:26.830
> 
> 标签：qt, pixmap

嗨Qt大师..

我想让我的标签（像素图）关闭关闭关闭很快，我该​​怎么做？

我尝试使用此代码：

```
Sleeper::sleep(2);
    ui->label->setPixmap(QPixmap("C:/Users/EVAN/Pictures/New folder/85.png"));
    Sleeper::sleep(2);
    ui->label->setPixmap(QPixmap("C:/Users/EVAN/Pictures/New folder/87.png"));
    Sleeper::sleep(2);
    ui->label->setPixmap(QPixmap("C:/Users/EVAN/Pictures/New folder/85.png"));
    Sleeper::sleep(2);
    ui->label->setPixmap(QPixmap("C:/Users/EVAN/Pictures/New folder/87.png")); 
```

那不是工作吗？我该如何解决？谢谢大家

* * *

这就是问题 ：

```
if(I==4)
        {
            QTimer *timer1 = new QTimer(this);
            connect(timer1, SIGNAL(timeout()), this, SLOT(OnTimer()));
            timer1->start(1000);
            blink=true;
            port->write(send);
        }
else if(I==5)
        {
            ui->label->setPixmap(QPixmap("../../picture/green.png"));
            port->write(send);
        } 
```

..................................................

```
void traffic1::OnTimer()
{

        ui->label->setPixmap(QPixmap(blink ? "../../picture/dark.png" : "../../picture/yellow.png"));
        blink = !blink;

} 
```

当 I=4 时，Qtimer 正常运行，但当 I=5 时，Qtimer 仍然有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T04:18:50.620

首先添加一个布尔成员变量`bool blink;`，创建一个 QTimer 并将它的`timeout()`信号连接到一个槽函数，如下所示：

```
// constructor:
YourClass::YourClass()
{
       QTimer *timer = new QTimer(this);
       connect(timer, SIGNAL(timeout()), this, SLOT(OnTimer()));
       timer->start(1000);
       blink = false;
} 
```

...........

```
void YourClass::OnTimer()
{
  ui->label->setPixmap(QPixmap(blink ? "C:/Users/EVAN/Pictures/New folder/85.png" : "C:/Users/EVAN/Pictures/New folder/87.png"));
  blink = !blink;
} 
```

**编辑**：如果你想控制你的计时器，你应该首先在类的标题中声明它

```
class YourClass
{
  QTimer *timer;
   ...
}; 
```

当你想创建它时：

```
YourClass::YourClass()
{
       timer = new QTimer(this);
       connect(timer, SIGNAL(timeout()), this, SLOT(OnTimer()));
       timer->start(1000);
       blink = false;
} 
```

停止它：

```
 timer->stop(); 
```

# yii - 如何在yii中拆分表单以实现单个表单的部分提交

> ID：10891475
> 
> 赞同：2
> 
> 时间：2012-06-05T04:15:54.403
> 
> 标签：yii, form-submit, yii-components, yii-events

我有一个包含有关用户信息的所有字段的模型。并使用 crud 生成器创建视图并修改视图、表单视图，如下所示

在这里，我隐藏了编辑配置文件部分，当用户单击编辑时，它会显示弹出窗口和编辑字段选项。现在的问题是，当我提交时它会提交整个表单，但我只需要提交已编辑的部分，还有一个问题是，当我编辑某些内容然后取消表单时，它仍然保持编辑的值并保存，然后当我提交任何表格的其他部分。请建议我如何实现表单的部分提交

```
<?php $form=$this->beginWidget('CActiveForm', array(
'id'=>'my-form',
'enableAjaxValidation'=>true,
'htmlOptions'=>array('enctype'=>'multipart/form-data'),
'action' => Yii::app()->createUrl('/userprofile/editprofile&id='.$model->id),
)); 
?>
<h4>Edit Profile Pic</h4>
<div>
<?php echo CHtml::fileField('profilePic'); ?>
<div id="editpic"></div>
<div class="btns" id="uploadbutton">            
<?php echo CHtml::ajaxSubmitButton('Update', $this->createUrl('/rageprofile/editprofile&id='.$model->id), array('update'=>'#targetdiv'));?>
</div>
</div>
<div class="editbutton">&#9998; Edit</div>
<div class="eitit edly einfo" style="z-index:9001;" >
<span class="close">&#10006;</span>
<h4>Basic Info</h4>
<?php echo $form->labelEx($model,'firstName'); ?>
<?php echo $form->textField($model,'firstName',array('size'=>30,'maxlength'=>30)); ?>
<?php echo $form->error($model,'firstName'); ?>
<?php echo $form->labelEx($model,'middleName'); ?>
<?php echo $form->textField($model,'middleName',array('size'=>30,'maxlength'=>30)); ?>
<?php echo $form->error($model,'middleName'); ?>
<?php echo $form->labelEx($model,'lastName'); ?>
<?php echo $form->textField($model,'lastName',array('size'=>30,'maxlength'=>30)); ?>
<?php echo $form->error($model,'lastName'); ?><br>
<?php echo $form->labelEx($model,'DOB'); ?>
<?php echo $form->textField($model,'d_o_b',array('size'=>30,'maxlength'=>30)); ?>
<?php echo $form->error($model,'d_o_b'); ?><br>
<?php echo $form->textField($model,'m_o_b',array('size'=>30,'maxlength'=>30)); ?>
<?php echo $form->error($model,'m_o_b'); ?><br>
<?php echo $form->textField($model,'y_o_b',array('size'=>30,'maxlength'=>30)); ?>
<?php echo $form->error($model,'y_o_b'); ?><br>
<?php echo $form->labelEx($model,'City'); ?>
<?php echo $form->textField($model,'city',array('size'=>30,'maxlength'=>30)); ?>
<?php echo $form->error($model,'city'); ?><br>
<?php echo $form->labelEx($model,'State'); ?>
<?php echo $form->textField($model,'state',array('size'=>30,'maxlength'=>30)); ?>
<?php echo $form->error($model,'state'); ?><br>
<?php echo $form->labelEx($model,'Country'); ?>
<?php echo $form->textField($model,'country',array('size'=>30,'maxlength'=>30)); ?>
<?php echo $form->error($model,'country'); ?><br>
<?php echo CHtml::ajaxSubmitButton('Update', $this->createUrl('/rageprofile/editprofile&id='.$model->id), array('update'=>'#targetdiv'));?>
</div>
</div>
</div>
<?php $this->endWidget(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:19:08.503

你试图得到两个不同的东西：

1.  拆分表格
2.  避免向服务器发送空输入

首先，您可以尝试以下两个选项之一：

1.  创建各种表单，每个表单都有自己的 ajaxSubmitButton 发送数据到服务器
2.  保持表单完整，但不要使用 ajaxSubmitButon，而是使用各种普通的“CHtml::htmlButton”并在他的 $htmlOptions 数组中指定要在 onclick 事件中调用的自定义 js 函数。这些 js 函数（例如，每个按钮一个）将从某些输入而不是其他输入中收集数据，并将负责通过 ajax 将数据发送到控制器。

对于第二件事，您可以使用 'onclick' 处理程序中的 js 函数，正如我之前所说，或者您可以只修改一点代码来执行以下操作：使用 jQuery ajax 的 'beforeSend' 和 'complete' 处理程序调用（CHtml::ajaxSubmitButton 中的$ajaxOptions）在发送前为空的字段中创建属性“禁用”，并在完成后将其删除。ajax 提交按钮使用的“序列化”jquery 调用不会对那些“禁用”的属性进行编码。

# c# - 将多个属性的值分配给对象

> ID：10891477
> 
> 赞同：0
> 
> 时间：2012-06-05T04:16:41.297
> 
> 标签：c#, .net

我有一个对象，它之前在基类中初始化过。在继承的类中，我使用这个对象并为它分配多属性的值。例子：

```
this.Chart.X = 10;
this.Chart.Y = 10;
this.Chart.Width = 20;
this.Chart.Height = 20;
this.Chart.Background = Color.Red; 
```

但是，我必须多次重复“this.Chart”。如何避免这种情况。请注意，我不想再次重新创建此对象，因为在基类中，它已使用一些常见值进行了初始化。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T04:36:39.287

如果你真的很想节省一些打字，你可以编写一个函数来做到这一点：

```
static void InitializeChart(Chart c) {
  c.X = 10;  
  c.Y = 10;  
  c.Width = 20;  
  c.Height = 20;  
  c.Background = Color.Red; 
} 
```

或者只是将图表分配给局部变量：

```
 var c = this.Chart;
  c.X = 10;  
  c.Y = 10;  
  c.Width = 20;  
  c.Height = 20;  
  c.Background = Color.Red; 
```

如果您可以控制基类，另一种方法是为其提供一些初始化参数，并在构造图表时将属性设置为正确的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T04:38:04.763

您可以为`Chart`实现[流畅的接口](http://en.wikipedia.org/wiki/Fluent_interface)创建一组扩展方法。它将摆脱一些重复的代码，因此您的示例可能类似于：

```
this.Chart.X(10).Y(10).Width(20).Height(20).Background(Color.Red); 
```

而你甚至不需要`this`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-05T04:23:15.977

您可以像这样使用字段初始值设定项：

```
this.chart = new Chart {X = 10, Y = 10, Width = 20, Height = 20, Background = Color.Red}; 
```

它为您省去了做事的麻烦，this.chart.X = blah, this.chart.Y = blah...

# asp.net-mvc - 无法在 MVC4 新增页面上的智能感知中访问 Html 帮助程序类

> ID：10891478
> 
> 赞同：0
> 
> 时间：2012-06-05T04:16:42.203
> 
> 标签：asp.net-mvc, visual-studio, razor, asp.net-mvc-4, visual-studio-2012

嗯，所以我不是 MVC 专家，我似乎无法在这里找到不同之处，所以我一直在问。

我在我的 MVC4 应用程序（在 VS11 中）中添加了名为 test (test.cshtml) 的页面，它可以工作，但我似乎无法访问智能感知中的 Html 类。如果我输入，例如@Html.BeginForm()，它会以红色下划线显示，就像一个错误一样，当我输入@Html 时。没有智能感知。我可以在其他页面中看到它（例如 about.cshtml） - 他们使用 @html.Whatever() 但我不知道如何告诉我的新页面我想使用这些类？我错过了一些东西。

我发现这个[Html Helper Not Working on nested Site Master page](https://stackoverflow.com/questions/1989921/html-helper-not-working-on-nested-site-master-page)但这真的不一样 - 这是带有 Razor 的 MVC4 所以我认为你甚至没有页面背后的代码？

我不知道——我希望我不会像我说的那样听起来很愚蠢。我不是真正的 MVC 家伙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:27:08.357

ASP.NET MVC 4 和 Visual Studio 2012 中的区域存在问题（尽管可能只是 QU1）。打开位于**Areas目录中的****Web.config文件，将****__*****版本*****__.0.0**的实例替换为**System.Web.WebPages.Razor**的**2.0.0.0**和**System.Web.Mvc**的**4.0.0.0**。

# php - 读取文件内容的前半部分并回显，然后读取后半部分

> ID：10891482
> 
> 赞同：1
> 
> 时间：2012-06-05T04:16:50.560
> 
> 标签：php

我有一个文本文件，其中列出了曲目的名称，然后在双空格之后列出了艺术家。为了让我从 Last.fm 获取专辑封面，我必须在 URL 中同时包含标题和艺术家，例如`http://ws.audioscrobbler.com/2.0/?method=track.getinfo&track=TRACK TITLE&artist=ARTIST`. 由于艺术家和曲目标题不在单独的文件中，有没有一种方法可以让我得到双倍空格之前的部分并称之为 $title 和双倍空格之后的部分并称之为 $artist，所以我可以回应它进入网址？

这是我目前必须获取的文件内容：

```
<?php
$current = file_get_contents('RBDS%20Text.txt');
echo $current;
?> 
```

谢谢！

编辑：

所以文本文件输出“曲目标题[双空格]艺术家”

对于 Last.FM，我必须在 URL 中`track=TRACK TITLE&artist=ARTIST`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:21:36.537

使用`explode`.

```
$current = file_get_contents("RBDS%20Text.txt");
$chunks = explode("  ", $current, 2);
$title = $chunks[0];
$artist = $chunks[1]; 
```

以上唯一的问题是，如果标题包含双空格，则可能会遇到问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T04:22:00.203

如果我理解你，你想要这样的东西：

```
list($title, $track) = explode('  ', trim(file_get_contents('RBDS%20Text.txt')), 2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T04:22:23.783

```
<?php
// build $url here
$result = file_get_contents($url);
list($title, $artist) = explode("  ", $result); 
```

您现在可以通过`$title`和访问您的变量`$artist`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T04:30:00.893

首先，我们的数据...

```
[ghoti@pc ~]$ cat RBDS_Text.txt 
My first song  Crazy Bad Band
Thriller  Michael Jackson 
```

接下来，一个 PHP 脚本：

```
[ghoti@pc ~]$ cat rbds.php 
#!/usr/local/bin/php
<?php

$lines = file("RBDS_Text.txt");

$fmt="http://ws.audioscrobbler.com/2.0/?method=track.getinfo&track=%s&artist=%s";

foreach ($lines as $line) {
        $data=explode("  ",$line);
        printf($fmt, urlencode($data[0]), urlencode($data[1]));
        print "\n";
} 
```

最后，运行中的脚本：

```
[ghoti@pc ~]$ ./rbds.php 
http://ws.audioscrobbler.com/2.0/?method=track.getinfo&track=My+first+song&artist=Crazy+Bad+Band%0A
http://ws.audioscrobbler.com/2.0/?method=track.getinfo&track=Thriller&artist=Michael+Jackson%0A
[ghoti@pc ~]$ 
```

如果您想将这些 URL 用于某事，您可以通过将`printf()`行替换为[`$varname=sprintf(...)`](http://php.net/sprintf).

# android - Google Play 没有显示我的平板电脑应用？

> ID：10891486
> 
> 赞同：1
> 
> 时间：2012-06-05T04:17:14.027
> 
> 标签：android, tablet, google-play

我也想展示我的平板电脑应用程序，需要遵循哪些必要步骤才能让我的应用程序也被列为平板电脑。我的应用程序已经被列为手机。我在这里遗漏了什么吗？请提供您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T04:52:30.243

将以下代码写入您的 Androidmanifest.xml 文件

```
<supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T04:28:12.913

查看给出的步骤**地址兼容性问题和在**`Manifest.xml` **查看和更新​​清单设置** 中所做的所有更改[http://developer.android.com/guide/publishing/preparing.html](http://developer.android.com/guide/publishing/preparing.html)

如何支持多屏？[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

此步骤也将间接导致您的平板电脑应用程序显示。

# android - Android - 如何在tabhost中自动切换标签

> ID：10891488
> 
> 赞同：0
> 
> 时间：2012-06-05T04:17:20.423
> 
> 标签：android, android-tabhost

我有一个带有 3 个标签的标签主机。在选项卡 3 中，我有一个活动：`testActivity`。在这个活动中，我有一个按钮。当我在选项卡 3 中单击此按钮时，我希望选项卡主机在选项卡 1 中切换。它应该自动切换；我没有点击标签 1。我该怎么做？

```
public class TabhostActivity extends Activity{
public TabHost tabHost;
private Resources res;
Intent intent;
TabHost.TabSpec spec;
private LocalActivityManager mLocalActivityManager;
protected int currentTab;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tabhost);
    tabHost = (TabHost) findViewById(R.id.tabhost);
    mLocalActivityManager = new LocalActivityManager(this, false);
    mLocalActivityManager.dispatchCreate(savedInstanceState);
    tabHost.setup(mLocalActivityManager);
    res = getResources();
    intent = new Intent().setClass(this, SpinnerActivity.class);
    spec = tabHost.newTabSpec("artists");

    spec.setIndicator("Sinner", null);
    spec.setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, SonAndroidActivity.class);
    spec = tabHost.newTabSpec("MAIN");
    spec.setIndicator("MAIN",res.getDrawable(R.drawable.ios_logo));
    spec.setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, testActiviy.class);
    spec = tabHost.newTabSpec("Spinner");
    spec.setIndicator("TEST", null);
    spec.setContent(intent);
    tabHost.addTab(spec);
}

    tabHost.setOnTabChangedListener(new OnTabChangeListener() {

        @Override
        public void onTabChanged(String tabId) {
            Log.v("tag", "click:" + tabHost.getCurrentTab());
            currentTab = tabHost.getCurrentTab();                   
} 
```

和活动活动选项卡 3：

```
public class testActiviy extends TabhostActivity{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
      // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.test);
    }

    public void btn_onClick(View v)
    {   
        tabHost.setCurrentTab(0);
        Log.v("tag", "clickkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk");    
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:20:59.120

首先尝试在您的`onClick`方法中使用对您的 tabHost 的引用`getParent()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T04:27:42.620

```
public void btn_onClick(View v)
{
    LocalActivityManager l = new LocalActivityManager ();
    l.tabHost.setCurrentTab(0);
} 
```

# magento - 带有事件和自定义变量的谷歌分析问题

> ID：10891489
> 
> 赞同：0
> 
> 时间：2012-06-05T04:17:34.397
> 
> 标签：magento, google-analytics

我对谷歌分析有疑问。

这是我的代码：

```
<script>
   function trackRegister()
  {
      if(dataForm.validator.validate()) {
        _gaq.push(["_setCustomVar",4,"Type","Besogende-med-Konto",1]);  
        _gaq.push(['_trackEvent', 'ActivateVisitorProfileTracking', 'ActivateVisitorProfileTracking']);
        _gaq.push(['_trackEvent', 'Konto-oprettet', 'Engage', 'Personlig-Konto-Oprettet']);         
      }

  } 
```

我在点击提交按钮时调用 trackRegister 函数，然后页面将被重定向到结果页面，但我只在谷歌分析报告上收到 ActivateVisitorProfileTracking 事件。但我不知道为什么。任何人都可以帮助我吗？感谢您的帮助：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:48:56.407

根据您对如何调用它的描述，听起来您的页面可能在您的第二个 _trackEvent 调用有机会执行之前被重定向。尝试将重定向包装在 setTimeout 中，或使用代码包装 GA 代码以检测 GA 调用的状态，并且仅在返回完成时重定向

# javascript - 如何通过按键盘上的 Enter 按钮使我的 Google Maps api v3 地址搜索栏正常工作？

> ID：10891490
> 
> 赞同：2
> 
> 时间：2012-06-05T04:17:35.887
> 
> 标签：javascript, onclick, onkeyup

我正在开发一个网页，我只想做一些对用户更友好的东西。我有一个功能强大的 Google Maps api v3 和一个地址搜索栏。目前，我必须使用鼠标选择搜索来初始化地理编码功能。如何通过按键盘上的输入按钮并单击搜索按钮使地图返回地标？我只是想让它尽可能用户友好。

这是我为地址栏创建的 javascript 和 div：

```
var geocoder;
    function initialize() {
    geocoder = new google.maps.Geocoder (); 
    function codeAddress () {
        var address = document.getElementById ("address").value;
        geocoder.geocode ( { 'address': address}, function(results, status)  {
        if (status == google.maps.GeocoderStatus.OK)  {
            map.setCenter(results [0].geometry.location);
            marker.setPosition(results [0].geometry.location);
            map.setZoom(14);
            } 
        else {
            alert("Geocode was not successful for the following reason: " + status);
                }
        }); 
                            }

           function initialize() {
        document.getElementById("address").focus(); }
    function setFocusOnSearch() {
        document.getElementById("search").focus(); }
    function codeAddress() {
        document.getElementById("address").focus(); }

    <body onload="initialize()">
                    <div id="geocoder">
        <input id="address" type="textbox" value="" "onblur="setFocusOnSearch()">
        <input id="search" type="button" value="Search" onclick="codeAddress()">
    </div>
                  </body> 
```

预先感谢您的帮助

![在此处输入图像描述](../Images/41a2e748c7d6490e418d3282827bc444.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-13T20:41:01.643

您需要 3 个简单的步骤：

**1）等待DOM**被加载/初始化地图（你已经这样做了）

```
<body onload="initialize()"> 
```

***然后在初始化函数中：***

**2）将焦点设置**到地址字段

```
document.getElementById('address').focus(); 
```

**3) 监听地址字段的`keyup`事件**并捕捉*回车*键码/调用`codeAddress`函数

```
// Bind key-up event listener for address field
document.getElementById("address").addEventListener('keyup', function (event) {

    // Check the event key code
    if (event.keyCode == 13) {

        // Key code 13 == Enter key was pressed (and released)
        codeAddress();
    }
}); 
```

使用`onlick`/ `onkeyup` [HTML 事件属性](https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers.onkeyup)或[从您的 javascript 添加事件侦听器，](https://developer.mozilla.org/en/docs/Web/API/EventTarget.addEventListener)但不要同时使用这两种方法。

`[JSFiddle demo](http://jsfiddle.net/upsidown/bojuopyf/)`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T22:13:21.770

如果我是你，我会将焦点设置为“搜索”按钮。

因此，如果我理解正确，您必须输入地址并单击搜索才能进行地理编码。

因此，为了使其尽可能用户友好，我将在加载正文期间将焦点设置为地址文本框。

然后，当您跳出地址框时，在 onleave/onblur 事件触发后，我会将焦点设置为搜索按钮。然后，您只需按 Enter 键，它就会进行地理编码。

总而言之，您需要添加这两个。：

body onload -> setfocus 到地址文本框

地址文本框 onblur/onleave -> 设置焦点到搜索按钮

第三个建议是在搜索按钮触发后将焦点设置回地址文本框，以便在不离开键盘的情况下重新开始整个过程​​。

这是有关将重点放在负载上的链接。休假也很容易使用。

[加载网页时如何自动将焦点设置到文本框？](https://stackoverflow.com/questions/45827/how-do-you-automatically-set-the-focus-to-a-textbox-when-a-web-page-loads)

这是关于 onblur 的链接。

[http://www.w3schools.com/jsref/event_onblur.asp](http://www.w3schools.com/jsref/event_onblur.asp)

更新以帮助您更多。

好的，这是一个关于如何在纯 javascript 中使用 onblur 等的演示页面，通常我会使用 jquery，但我会保持简单。我尝试将其粘贴，但没有奏效。

![在此处输入图像描述](../Images/3ed1bdb3b0c803610c6d224af2d7e68c.png)

好的，最后一次也是最后一次尝试，您的代码应该看起来像这样，但是需要更改 javascript 标签才能正确。

```
 <javascript tags>
    var geocoder;

  function initialize() {
    geocoder = new google.maps.Geocoder (); 
    //Set focuse to address textbox
    document.getElementById("address").focus(); 
    }

    function codeAddress () {
        var address = document.getElementById ("address").value;
        geocoder.geocode ( { 'address': address}, function(results, status)  {
        if (status == google.maps.GeocoderStatus.OK)  {
            map.setCenter(results [0].geometry.location);
            marker.setPosition(results [0].geometry.location);
            map.setZoom(14);
            } 
        else {
            alert("Geocode was not successful for the following reason: " + status);
                }
        }); 
        //Either way set focus to address textbox
        document.getElementById("address").focus();
                            }

    function setFocusOnSearch() {
        //Set focus to search button now that you have left address textbox
        document.getElementById("search").focus(); }

    <javascript tags end>

    <body onload="initialize()">
                    <div id="geocoder">
        <input id="address" type="textbox" value="" "onblur="setFocusOnSearch()">
        <input id="search" type="button" value="Search" onclick="codeAddress()">
    </div>
                  </body> 
```

# vhdl - 我可以在 VHDL 中使用条件常量吗？

> ID：10891491
> 
> 赞同：1
> 
> 时间：2012-06-05T04:17:40.553
> 
> 标签：vhdl

我有一个实体，它有一个`fs_in_khz`可以是 5、10 或 2 的通用整数参数：

```
entity test_control_source is
    generic(
        -- This should only be 5, 10 or 20
        fs_in_khz : integer := 20
    ); 
```

如果我可以利用 VHDL 的特性并简单地将类型限制为这些值，那就太好了，也许使用类似的东西：

```
type control_source_freq is (F5_KHZ, F10_KHZ, F20_KHZ);
...
entity test_control_source is
generic(
    -- This should only be 5, 10 or 20
    fs_in_khz : control_source_freq := F20_KHZ
); 
```

然而，后来在这个实体的架构中，我有

```
architecture source_behaviour of test_control_source is
    constant cs_period : integer := 5000 * clock_rate / fs_in_khz;
begin
    ... 
```

我更喜欢在使用它的进程之外计算这个参数，而不是在需要的地方重复计算。我可以限制我的`fs_in_khz`通用参数的允许值*并将*我的常量`cs_period`排除在使用它的过程之外吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T10:24:22.600

按照您的建议，在包中创建您的枚举类型

还要创建一个名为的函数，该函数`calculate_period`接受`clock_rate`您的`fs`类型并返回适当的整数。

或者，`assert`使用该泛型向组件添加一些语句并验证它的值是否正确。使用您的综合工具对此进行测试，看看如果断言触发会发生什么 - 通常，即使您使用`severity failure`它也会发出警告！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:22:48.853

一种可能的解决方案是`F_KHZ`在一个**包**中声明常量，并`cs_period`在声明`F_KHZ`. 但是，这不会限制 的值`F_KHZ`，但您只需在一个地方更改它，就不太可能出错。这当然是假设你需要你的`F_KHZ`常量在整个架构中是相同的。

# java - Java：与 DataInputStream 中的 dis.read() 和 dis.readUTF() 的区别

> ID：10891494
> 
> 赞同：3
> 
> 时间：2012-06-05T04:18:04.917
> 
> 标签：java, sockets, serversocket, datainputstream

简单的问题。

`dis.read()`和有什么区别`dis.readUTF()`？

例如，`dis.read()`只读取字节数组和`dis.readUTF()`访问`String`类型。

这是正确的吗？

如果服务器有实现`dis.readUTF()`，它不能读取字节流？

```
@Override
public void run() {
    // TODO Auto-generated method stub
    while(mEnabled)
    {
        if (!mFileReceive) {
            try {
                // read
                String tmpStr = dis.readUTF();
                // here come `dis.readUTF()` <- it is can not read byte array?

                mStringBuffer += tmpStr;

                if (tmpStr.length() >= 4096)
                    continue;
                System.out.println("Print : " + mStringBuffer);

                parse = new ParseJSON(null, mStringBuffer.toString());
                // Ack Message
                if (mAckEnabled) {
                    mFileName = "{opcode:0x06,ACK:C" + parse.getParsedData().get("ACK").substring(1) + "}";
                    dos.writeUTF(mFileName);
                    dos.flush();
                    System.out.println("Ack Message Send : " + mFileName);
                    mFileName = null;
                }
                if (parse.getParsedData().get("opcode").equals("155")) {
                    mFileReceive = true;
                }
                parse.clear();
                parse = null;

            } catch (IOException e) {
                // TODO Auto-generated catch block
                System.out.println("ServerThread disconnect");
                break;
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:44:18.073

readUTF() 从流中读取以修改的 UTF-8 格式编码的 Unicode 字符串的表示形式；然后这个字符串作为字符串返回。

您应该使用以字节数组作为参数的读取方法。这是它的解释：

**public final int read(byte[] b) 抛出 IOException**

从包含的输入流中读取一些字节并将它们存储到缓冲区数组中 b。实际读取的字节数以整数形式返回。

# android - 获取 Facebook 凭据

> ID：10891497
> 
> 赞同：0
> 
> 时间：2012-06-05T04:18:17.677
> 
> 标签：android, facebook

我的应用程序中有“使用 facebook 登录”选项，它需要从他的 facebook 帐户（如果已登录）获取用户 ID、名字、姓氏、电子邮件、个人资料图片、性别并将其发送到服务器。我搜索了一段时间，但无法理解解决方案。我怎样才能做到这一点？链接到一些例子会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:36:14.407

可能这些链接会帮助你

[Android-Hackbook](http://developers.facebook.com/docs/guides/mobile/android_hackbook/)

[好友列表](https://stackoverflow.com/questions/5789882/i-want-to-list-of-facebook-friend)

# app-store - 处于 App Purchases 状态 向 Appstore 提交申请后准备提交

> ID：10891498
> 
> 赞同：1
> 
> 时间：2012-06-05T04:18:20.750
> 
> 标签：app-store, in-app-purchase

我已经开发了一个非消耗性应用内购买 iOS 应用程序。我已经为应用内购买获取了捆绑标识符，并编写了代码并提交到 appstore... 提交应用程序后，它在 In 中显示的状态-App Purchases 在提交的申请中“Manage In-App Purchases”一栏是“Ready to submit”。如何提交In-App Purchase 申请... 之后有没有必要先提交免费申请应用内购买应用程序..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:42:37.133

1.  提交申请（我的假代码）
2.  拒绝申请（测试能力）
3.  提交应用内购买
4.  可以测试应用内购买。
5.  提交正确的申请代码。

# sql - 如何从强类型数据集创建 sql 数据库

> ID：10891501
> 
> 赞同：0
> 
> 时间：2012-06-05T04:18:53.027
> 
> 标签：sql, visual-studio-2010, xsd, ddl, strongly-typed-dataset

我正在寻找一种简单的方法来将我在 Visual Studio 中开发的数据库模式作为强类型数据集（xsd 文件）传输到相应的 sql server 数据库中。愚蠢的我，我以为这个过程是直截了当的，但我不知道该怎么做。我假设我可以逐列复制表格，但这似乎很容易出错。有谁知道这样执行模式传输的方法？也许是一个将 xsd 文件转换为相应的 sql server ddl 文件的工具？

最后的想法是，一旦我在两个数据存储之间传输了模式传输的移动数据，这将是直截了当的，它只是让模式同步，这让我很难过......

谢谢，基思

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:38:03.520

为什么不直接在 SQL Server 中实现数据模型？！它更常见和设计，我认为这就是为什么微软没有为这种情况提供任何向导或工具的原因。您也可以将数据模型制作为脚本或 .sql 文件，它们可以通过 SVN 进行管理，并且只要您需要模型实现，您就可以起诉它们。

# java - 如何访问在 JBoss 服务器上运行的 java 项目的方法？

> ID：10891502
> 
> 赞同：0
> 
> 时间：2012-06-05T04:19:09.383
> 
> 标签：java, methods, jboss

我有 java 项目及其一些 JAR、WAR 文件。我已经在服务器上部署了 WAR 文件。当我部署它时，我可以访问该链接

```
http://localhost:8080/prj-name/ 
```

在浏览器中，也能够访问该项目。

除了这个项目，我得到了一个链接： `http://localhost:8080/prj-name/rest/application.wadl`with this project，我必须在访问方法时引用这个文件。我所做的是使用 wadl2java 工具将 wadl 文件转换为 Java Stub。Java 存根只不过是接口。

但是当我试图从 URL 访问该方法时，我在浏览器中收到错误为 HTTP 401 Unauthorized。我在链接中输入的方法为：

```
http://localhost:8080/prj-name/?method=method-name&param=value 
```

所以我的问题是，如果我想从 JBoss 服务器中运行的项目中调用该方法，那么我应该如何访问该方法？引用 Java Stub 而不是 wadl 文件是正确的方法吗？

请指教

# iphone - iOS中检测来电的后台应用程序

> ID：10891503
> 
> 赞同：0
> 
> 时间：2012-06-05T04:19:10.760
> 
> 标签：iphone, objective-c, xcode, ios4

我需要在 iOS 中编写一个后台应用程序来监听 iPhone 上的来电。

可能吗？任何人都可以提出一些好的建议吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T04:21:31.703

这将非常违反 Apple 的隐私政策，这样的应用程序不可能获得批准。

[不过，有一些通话录音应用程序可以](http://itunes.apple.com/us/app/callrec.me/id343580672?mt=8)[绕过这个限制，](http://reviews.cnet.co.uk/mobile-phones/how-to-record-calls-on-an-iphone-for-free-50005584/)但它们使用第三方服务并且没有实际的内置 iPhone API。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-26T11:15:20.623

您可以使用 CTCallCenter 的 CTCallState 属性在 applicationWillEnterForeground 中执行此操作。不要忘记导入 CoreTelephony 框架。这是一个例子：

```
#import <CoreTelephony/CTCall.h>
#import <CoreTelephony/CTCallCenter.h>
#import <CoreTelephony/CTCarrier.h>
#import <CoreTelephony/CTTelephonyNetworkInfo.h>

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    [callCenter setCallEventHandler:^(CTCall *call) {
        if ([[call callState] isEqual:CTCallStateIncoming] || [[call callState] isEqual:CTCallStateDialing]) {

            if ([viewController isPlaying])
            {
                NSLog(@"Call was started.");
            }
        } else if ([[call callState] isEqual:CTCallStateDisconnected]) {
            if (callWasStarted)
            {
               NSLog(@"Call was ended.");
            }
        }
    }];
} 
```

# java - struts中的令牌无效

> ID：10891506
> 
> 赞同：0
> 
> 时间：2012-06-05T04:19:26.610
> 
> 标签：java, jakarta-ee, struts, struts-1

这是我正在使用的代码片段

```
if (isTokenValid(request)) 
                {
                    logger.debug("Add data to owner table");
                    System.out.println("Add data to owner table");

                    j=db.addRole(menuform);

                    if (j == 1)
                        menuform.reset(mapping, request);
                    else
                        request.setAttribute("recordModifyCount", 0);

                    message.add("recordmodify", new ActionMessage("record.insert", j));
                }
                else
                {
                    System.out.println("Token not valid Add owner");
                    logger.debug("Token not valid Add owner");

                    //message.add("recordmodify", new ActionMessage("record.insert", 0));
                    //forward=mapping.findForward("searchAllMenuPage");
                } 
```

当我单击添加按钮时调用它第一次单击它工作正常但第二次和之后它进入 else 块即“令牌无效添加所有者”请帮助我为什么它进入 else 块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:45:47.470

你需要先调用`saveToken()`，Struts框架会生成一个`token/key`in request/session。下次你发出请求时，你可以检查这个token是否有效。一旦你调用了isTokenValid，你也需要调用`resetToken()`方法。

```
if (isTokenValid(request)) {
.................
................
resetToken(request);
} 
```

[防止多次点击](http://www.techfaq360.com/viewTutorial.jsp?tutorialId=62)

# node.js - Web App 技术选择

> ID：10891509
> 
> 赞同：-1
> 
> 时间：2012-06-05T04:20:09.917
> 
> 标签：node.js, web-applications, websocket, socket.io, mongrel2

我目前正在 ember.js 中编写用户界面，并且在有关传输技术和服务器端脚本的服务器端决策方面需要一些帮助。

应用程序计划通过添加一些用于处理用户权限和存储输入输出的数据库糖来简单地包装对少数服务器端脚本的调用。

用户必须登录才能正确使用应用程序。

我期待工作用户的高并发性，因为我可以在服务器上使用更多的并行线程，所以我不完全确定是否必须使用 Node.js+socket.io。

一半的请求将是对数据库请求的简单请求，另一半将需要另一个服务器端脚本的更多计算时间（最多 5 秒）。

我很可能会使用 MongrelDB 作为数据库。

我最大的问题：

*   今天技术上使用纯 websockets 是安全的，还是更好地优雅降级 Socket.io？
*   node.js 会在多核机器上很好地扩展，还是我应该使用带有 python 后端的 Mongrel2 之类的东西？
*   如果某些响应真的很长，python 后端会处理大并发吗？
*   如何使用 node.js+socket.io 处理登录用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:41:15.517

1.  最好有优雅的降级——因为 websocket 协议仍在快速变化中。
2.  对于缩放，我使用 Redis 发布/订阅，但您可以使用集群模块进行多核。
3.  不知道。
4.  我正在使用 RedisStorage 从连接到 socket.io 共享会话。您只能将 RedisStorage 用于处理登录用户。

# java - Java：扫描仪在换行处停止

> ID：10891511
> 
> 赞同：1
> 
> 时间：2012-06-05T04:20:53.260
> 
> 标签：java, java.util.scanner

我正在尝试扫描文本文件并将它们添加到地图中，地图和一切正常。**但是，当涉及到文本文件中的“输入”或空白行时，扫描仪似乎停止了。这是我的问题**

这是我的扫描仪/映射器代码块

```
class OneButtonListener implements ActionListener
{
    @Override
    public void actionPerformed(ActionEvent evt)
    {
        final JFileChooser oneFC = new JFileChooser();
        oneFC.showOpenDialog(AnalysisFrame.this);
        String newLine = null;
        oneFC.getName(null);
        int returnVal = 0;
        File fileOne = oneFC.getSelectedFile();

        Scanner input = null;        
        try {
            input = new Scanner(fileOne);
        } 
        catch (FileNotFoundException ex) {
            Logger.getLogger(AnalysisFrame.class.getName()).log(Level.SEVERE, null,
                            ex);
        }                       
        inputText = input.nextLine(); 
        String[] words = inputText.split("[ \n\t\r,.;:!?(){}]");

        for(int i = 0; i < words.length; i++){
            key = words[i].toLowerCase(); 

            if (words[i].length() > 1){
                if (mapOne.get(key) == null){
                    mapOne.put(key, 1);
                }
                else {
                    value1 = mapOne.get(key).intValue();
                    value1++;
                    apOne.put(key, value1);
                }
            } 
         }
     }
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:27:13.947

您应该在循环内扫描，直到到达文件末尾，例如：

```
StringBuilder builder = new StringBuilder();
while(input.hasNextLine()){
    builder.append(input.nextLine());
    builder.append(" "); // might not be necessary
}
String inputText = builder.toString(); 
```

使用的替代方法`split`是使用带有and 的[Delimiter](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#useDelimiter%28java.util.regex.Pattern%29 "分隔符")`Scanner`使用`hasNext()`and`next()`代替`hasNextLine()`and `nextLine()`。尝试一下，看看它是否有效。

例如：

```
scanner.useDelimiter("[ \n\t\r,.;:!?(){}]");
ArrayList<String> tokens = new ArrayList<String>();
while(scanner.hasNext()){
    tokens.add(scanner.next());
}

String[] words = tokens.toArray(new String[0]); // optional 
```

另外在旁注中，没有必要`JFileChooser`每次都创建：

```
class OneButtonListener implements ActionListener
{
    private final JFileChooser oneFC = new JFileChooser();

    @Override
    public void actionPerformed(ActionEvent evt)
    { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T04:27:32.910

很长一段时间没有使用 Java，我可能会走得很远，但看起来你只调用 `inputText = input.nextLine();`了一次，所以你只得到一行是有道理的。大概你想`nextLine()`在一个循环中调用，以便它不断给你行，直到它到达文件的末尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T05:27:11.240

```
String contentsOfWholeFile = new Scanner(file).useDelimiter("\\Z").next(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T07:01:11.010

在`split("[ \n\t\r,.;:!?(){}]")` 添加**`\f`**

# iphone - 如何在uiscrollview中滑动图像时添加短声音

> ID：10891522
> 
> 赞同：-1
> 
> 时间：2012-06-05T04:22:08.627
> 
> 标签：iphone, ios, uiscrollview, audio

如何在 uiscrollview 中添加声音，同时用不同的声音刷不同的图像。请帮我。谢谢问候拉詹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:31:50.793

滚动停止时，您可以检查页面是否已更改。If Changed than play sound else 没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:43:21.747

你必须使用`UIScrollViewDelegate`方法来实现你可以使用的这个任务

`scrollViewDidEndDecelerating:`为了实现这一点，使用一个 ivar 来存储当前的显示位置，`UIScrollView`并在这种方法中使用`contentOffset.x`属性的`UIScrollView`你可以实现你所需要的。

是的，你需要用来`AVAudioPlayer`播放声音。认为这会对您有所帮助。快乐编码:)

享受编码:)

# sql - 添加第二个 CASE WHEN 列完全更改查询结果？

> ID：10891524
> 
> 赞同：0
> 
> 时间：2012-06-05T04:22:28.300
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有以下查询：

# 1

```
SELECT TOP 1
    CASE WHEN latency=-1
        THEN 'Down'
        ELSE 'Up'
    END AS status
FROM
    @pings_temp
ORDER BY datetime DESC; 
```

# 2

```
SELECT TOP 1
    CASE WHEN latency=-1
        THEN 'Down'
        ELSE 'Up'
    END AS status,
    CASE WHEN latency=-1
        THEN
        (
            SELECT TOP 1
                datetime
            FROM
                @downtimes_temp
            ORDER BY
                datetime DESC
        )
        ELSE NULL
    END AS datetime
FROM
    @pings_temp
ORDER BY datetime DESC; 
```

第一个应该只产生“ *Up* ”，第二个应该在第一列中产生“ *Up* ”，在第二列中产生**NULL**。

但是，这不会发生。第一个查询完全按照它应该的方式执行，但是将第二列添加到 SELECT 会使查询变得疯狂，导致它从看似随机的列中读出“ *Down ”和日期。*

这是[来自同一个 T-SQL 批处理的两个结果的图像](http://i.imgur.com/cmKeK.png)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T04:29:50.940

第二种情况的错误可能是由您的 ORDER BY 子句引起的，因为引擎无法评估 NULL 值的顺序。

# spree - 我如何将没有 id 的 html 标签与 deface 匹配

> ID：10891530
> 
> 赞同：0
> 
> 时间：2012-06-05T04:23:52.957
> 
> 标签：spree

试图在配置菜单中向表中添加一列，该表有一个空`<th> </th>`的外观，但是当我添加列时，它会在此之后添加它，所以看起来很难看，添加它

```
Deface::Override.new(:virtual_path => "spree/admin/user_groups/index",
    :name         => "minimum_order_column",
    :insert_after => "code[erb-loud]:contains('description')",
    :partial      => "spree/admin/user_groups/minimum_order_column") 
```

第一个奇怪的事情是它在那个空的 th 之后添加它，但如果我可以删除它似乎很容易解决

`admin/user_groups`来自[spree_user_groups](https://github.com/levymetal/spree_user_groups)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:27:27.707

Deface 通常使用 CSS 选择器来完成这项肮脏的工作。

你应该能够做到`th[3]`或`th:last`发现`<th>`

* * *

[http://deface.heroku.com/](http://deface.heroku.com/)是帮助测试选择器的好工具。

# django - 避免在 django1.4 和 postgresql 8.1 中返回与 bug #10467 相关的 postgresql 语句

> ID：10891532
> 
> 赞同：2
> 
> 时间：2012-06-05T04:24:33.343
> 
> 标签：django, postgresql, django-settings, django-database, django-postgresql

几天前，我在 django1.4 中使用管理功能编写了一个项目，目的是为从遗留系统迁移到新系统的调试数据制作 CRUD（迁移并不完全成功），我使用 django 编写它1.4 并在我的笔记本电脑中使用生产数据库的副本，但在我的 linux 中我使用 postgresql9.1，因此，当我尝试将项目配置为原始服务器（postgresql8.1）中的测试数据库时，我在`syncdb`和`migrate`陈述：

```
File "/home/diegueus9/webapps/fixsysandinos/local/lib/python2.7/site-packages/django/db/backends/util.py", line 40, in execute
    return self.cursor.execute(sql, params)
  File "/home/diegueus9/webapps/fixsysandinos/local/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 52, in execute
    return self.cursor.execute(query, args)
django.db.utils.DatabaseError: syntax error at or near "RETURNING"
LINE 1: ...") VALUES (E'permission', E'auth', E'permission') RETURNING ... 
```

所以，我做了一些研究，我在 django 中找到了票[#10467](https://code.djangoproject.com/ticket/10467)（目前已关闭），它说使用 statment RETURNING 在 postgresql 8.1 中引入了一个错误，因为它直到 8.2 才支持该语法（我认为） ，该错误在 8 个月前显示为已关闭，但我认为在某些时候被重新引入。在票的线程中说问题可能与自动提交行为有关，并谈到`connection.features.can_return_id_from_insert`.

所以问题是：

这是一个必须重新打开的错误？我必须禁用自动提交行为并承担风险（我不希望如此）或者通过我可以设置`connection.features.can_return_id_from_insert`的设置`False`并以这种方式实现我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T16:09:18.050

当升级数据库或降级您的 django 版本不是一个选项，因为是客户端的要求，您仍然可以**在您自己的责任下**`can_return_id_from_insert`使用 django1.4，您可以`False`在第 77 行禁用 RETURN 语句设置`django.db.backends.postgresql_psycopg2.base`。但这会影响行为django 所以你真的必须或应该使用类似[virtualenvwrapper的东西](http://www.doughellmann.com/projects/virtualenvwrapper/)

# android - 解析 Excel 文件中的字符串以翻译 Android 应用程序

> ID：10891533
> 
> 赞同：2
> 
> 时间：2012-06-05T04:24:36.310
> 
> 标签：android, excel

为了翻译我的 android 应用程序，我有一个包含英语、西班牙语、法语和更多语言的 Excel 文件，每种语言都有数百个用于应用程序的字符串。

将字符串名称和 XML 文件中的字符串分开然后从 Excel 文件中为每种语言创建新的已翻译 strings.xml 文档的最佳方法是什么？是否有可以自动执行此过程的服务或工具？

# sql - SQL HELP：如何从表中获取 2 个最大值

> ID：10891535
> 
> 赞同：-3
> 
> 时间：2012-06-05T04:24:50.837
> 
> 标签：sql

我想在我的表中选择前两个 int 值

例如，假设我的表看起来像这样

```
(Name,Int)

(a,1)

(b,2)

(c,2)

(d,5) 
```

我的结果查询将返回 d、b 和 c

我不确定我将如何处理这个问题，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:27:40.550

2 或 3 个值？问题说两个？？？

```
select top 3 Name
from MyTable
order by IntCol desc 
```

这是作业吗？[注意：将列命名为“Int”是一个非常糟糕的选择。选择有意义的东西]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T10:17:23.870

这取决于不同的rdbms。您可以随时执行此 sql：

```
select name from tab order by int desc limit 3; 
```

在像 oracle 这样的 rdbms 中，它变得更加困难

```
select * from (
 select name from tab order by int
)
where rownum<=3; 
```

# java - 引用超类的首选方式（类型化语言）

> ID：10891536
> 
> 赞同：0
> 
> 时间：2012-06-05T04:24:55.833
> 
> 标签：java, c++, haxe

这个问题实际上出现了不少。以这个实例模型视图为例。我有 2 个对象。模拟对象和渲染对象。

ObjectRSim 类（Object，指定为 Render Sim）类似于：

```
class ObjectRSsim {
   var simObject:ObjectSim;
} 
```

ObjectRSim，使用 ObjectSim 的属性/失效。

有继承 ObjectRSim 和 ObjectSim 的对象：

PosObjectRSim 和 PosObjectSim（位置对象..）

```
class PosObjectRSim extends ObjectRSim {
   var posSimObject:PosObjectSim;
} 
```

或者...

```
class ObjectRSim {
   var simObject:Dynamic; //Dynamic is untyped Type from haxe, the compiler does not check calls to a Dynamic object. 
} 
```

我应该在 ObjectRSim 层次结构类中引用 ObjectSim 继承层次结构中的每种类型，还是应该只使用 simObject:Dynamic？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:22:45.277

在这种情况下使用 Dynamic 是完全错误的。它通常很慢（对于我猜除了 javascript 之外的每个 haxe 目标），没有内联，并且通常仅用于与底层平台交互或使用序列化（YAML、JSON 等）。

谈到解决问题...

如果没有计划数千个这样的对象，我可能只是低级类对象的另一个字段。从 OOP 的角度来看，这不是最清晰的方法，但它经常为我带来更简单和更清晰的代码。

铸造是另一种选择（我个人不喜欢）。

参数化可能是处理这个问题的最好方法，但我不确定我们是否已经在 haxe 中进行了类型限制参数化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:41:34.827

参数化依赖类和依赖成员。

# clojure - Clojure 中 print 函数的等效方案

> ID：10891547
> 
> 赞同：2
> 
> 时间：2012-06-05T04:26:00.227
> 
> 标签：clojure, scheme, racket

我正在查看来自 Clojure 的 Scheme (Dr-Scheme)。

在 Clojure 我可以输入

```
(print 'a 'b 'c) 
```

并且该`print`函数计算出这是任意数量的非字符串参数并将它们打印出来，并用空格分隔。

在 Scheme 中，`print`函数需要一个参数。

有没有办法在 Scheme 中获得相当于 Clojure 的打印功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T04:46:09.013

有趣......你可以很容易地推出其中之一，但我不确定我是否需要它。例如：

```
#lang racket

(define (print-many . args)
  (display
   (apply
    string-append
    (add-between (map print-to-string args) " "))))

(define (print-to-string arg) (format "~v" arg))

(print-many 3 4 5 'b '(3 3 4)) 
```

不过，总的来说，我认为如果您为用户生成输出，您将希望更好地控制输出，如果您不为用户生成输出，您也会很高兴拍打它周围的一对parens并使其成为一个列表。

这有什么用例？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T09:35:40.330

也许您正在寻找`trace`？

```
#lang racket

(define (foo x y)
  (+ x y))

(define (bar x)
  (+ (foo 1 x)
     (foo 2 (+ x 1))))

(require racket/trace)
(trace foo) 
```

然后在交互窗口中：

```
> (bar 3)

>(foo 1 3)
<4
>(foo 2 4)
<6
10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T11:06:01.667

我使用这组定义来打印由新行分隔的多个参数：

```
(define (println x) (display x) (newline))
(define (printlist l) (begin
                        (println (car l))
                        (if (not (null? (cdr l))) (printlist (cdr l)))))  
(define (multiprint  . args) (begin
                                (if (not (null? args)) (printlist args) 
                                    (println "Error: multiprint requires at least one argument")))) 
```

# iphone - 使用 id 作为函数的属性或参数

> ID：10891548
> 
> 赞同：0
> 
> 时间：2012-06-05T04:26:02.217
> 
> 标签：iphone, objective-c

所以我不确定这是如何工作的。我简要查看了一位同事的 C#（我不是 .NET 开发人员），我看到很多传递给方法的东西都是符合接口的类对象。这在objective-c中也有好处吗？

例如，我在使用 MapKit API 并创建了自己的符合 MKAnnotation 协议的类，因此我可以为放置在地图上的典型图钉提供自定义视图和一些额外属性。我打算使用我创建的这个类，

```
Address : NSObject 
```

与我在地图上放置图钉时的 MKPlacemark 类相反。在我的其他视图控制器和模型类中，我是否这样做：

```
@property (nonatomic, strong) id <MKAnnotation> object; //1 
```

或者

```
@property (nonatomic, strong) Address *object; //2 
```

我从示例 1 开始，但是当我实际上需要 Address 对象的一些属性时，我发现自己不得不对对象进行类型转换，这似乎有什么意义，或者我错过了重点？所以我想我的最终问题是，1 还是 2 更好，在什么情况下？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:30:50.837

我会选择选项 3，它看起来像这样：

```
Address : NSObject <MKAnnotation> 
```

然后在实现类时，实现符合`MKAnnotation`协议所需的方法。

这样，您就可以两全其美。

协议与 C# 或 Java 等语言中的接口非常相似。主要区别之一是能够要求某些方法而其他方法是可选的。由于 Objective-C 是一种动态语言，因此您会看到许多调用，例如`[foo responseToSelector:@selector(someSelector:)]`. 如果`-someSelector:`被标记为可选，您需要检查接收者是否“响应”该消息。但是，如果它被标记为必需，如果您没有实现该方法，编译将引发警告。查看[Objective-C 语言参考](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/introduction/introobjectivec.html "Objective-C 语言参考")以获取更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T04:39:41.197

您不能对 id 类型使用强关键字，请改用：

```
@property (nonatomic, assign, readwrite) id<MyDelegate> delegate; 
```

# objective-c - 如何知道需要多线程的作业何时完成？

> ID：10891549
> 
> 赞同：1
> 
> 时间：2012-06-05T04:26:06.497
> 
> 标签：objective-c, xcode4.3

我做的一件事是：

```
-(void)GrabbingProcess:(void (^)())block;
{
    self.OtherGrabbingIndicator +=1;
    block();
    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 2 * NSEC_PER_SEC), dispatch_get_current_queue(), ^{
        self.OtherGrabbingIndicator -=1;
    });
} 
```

每次我想在后台运行可能需要很长时间的东西时，我都会做类似的事情

[Grabclass grab] GrabbingProcess: ^{ //做一些事情抓取数据等 }];

有许多这样的功能和许多这样的数据。例如，起初我会获取所有企业 ID。然后我会在单独的线程上获取有关业务的所有详细信息。

我想知道所有这些线程何时完成并发布合适的通知。

我的解决方案的问题是，一段时间后，self.OtherGrabbingIndicator 的值通常会徘徊在 2 或 3 左右，即使所有这些线程都已完成，也永远不会下降。

不知何故有些 self.OtherGrabbingIndicator +=1; “泄露”并且与 self.OtherGrabbingIndicator -=1 不匹配。我想知道这种泄漏怎么会发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:07:44.793

如果您想异步运行块，然后找出它们何时完成，则合适的工具是[`dispatch_group`](https://developer.apple.com/library/mac/documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/doc/uid/TP40008079-CH2-SW19). 您可以使用 将块分派到特定的组和队列中`dispatch_group_async()`，该组将跟踪块何时完成。然后，您可以在组上同步等待完成`dispatch_group_wait()`或注册一个块以在组完成时调用`dispatch_group_notify()`。

* * *

上述解决方案不起作用的原因是因为您没有以线程安全的方式访问/更改计数器。以下是会导致问题的一系列微不足道的事件：

**开始**：self.OtherGrabbingIndicator 为 1
**线程 A**：读取 self.OtherGrabbingIndicator
**线程 B**：读取 self.OtherGrabbingIndicator
**线程 A**：增加读取值并写回 self.OtherGrabbingIndicator
**线程 B**：增加读取值并写回 self.OtherGrabbingIndicator
**End** : self.OtherGrabbingIndicator 为 2

即使两个线程试图增加它，只有一个“成功”，你最终失去了另一个增量。这也可能在递减期间发生。如果您使用调度组，这个问题就会消失。

* * *

作为旁注，您永远不应该使用`dispatch_get_current_queue()`. 这是一个永远不应该在实际代码中使用的调试功能。主要原因是因为您不只是在一个队列上运行，而是同时在整个队列层次结构上运行，但此功能只能告诉您一个队列。此外，您可能正在某人的私人队列上运行，您当然不应该自己分派到该队列上。

# android - 带有异步 ImageView 加载的 Android GridView stretchMode

> ID：10891550
> 
> 赞同：0
> 
> 时间：2012-06-05T04:26:19.373
> 
> 标签：android, gridview, imageview

我将以下 GridView 定义为 w/stretchMode 设置为“columnWidth”。

```
<GridView android:id="@+id/grid"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:columnWidth="160dp"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:stretchMode="columnWidth"
    android:listSelector="@drawable/list_selector"
/> 
```

GridView 中的每个项目的结构如下。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent" 
    android:layout_height="wrap_content"
    android:padding="2dp"
>
    <FrameLayout
        android:layout_width="match_parent" 
        android:layout_height="wrap_content"
    >
        <ImageView android:id="@+id/videoGridItemImage"
            android:layout_width="match_parent" 
            android:layout_height="wrap_content"
            android:adjustViewBounds="true"
        />
        <TextView android:id="@+id/videoGridItemDuration"
            android:layout_width="wrap_content"  
            android:layout_height="wrap_content"    
            android:layout_gravity="bottom"    
            android:background="#88000000"
            android:textColor="#F1F1F1"
            android:textAppearance="@android:style/TextAppearance.Small"
            android:padding="2dp"
        />
    </FrameLayout>
    <TextView android:id="@+id/videoGridItemTitle" 
        android:layout_width="match_parent" 
        android:layout_height="wrap_content"
        android:gravity="left"
        android:textAppearance="@android:style/TextAppearance.Medium"
        android:textColor="#F1F1F1"
        android:maxLines="1"
        android:background="#88000000"
        android:paddingLeft="2dp"
        android:paddingRight="2dp"
    />
    <TextView android:id="@+id/videoGridItemSubtitle" 
        android:layout_width="match_parent" 
        android:layout_height="wrap_content"
        android:gravity="left"
        android:textStyle="italic"
        android:textColor="#666"
        android:textAppearance="@android:style/TextAppearance.Small" 
        android:maxLines="1"
        android:background="#88000000"
        android:paddingLeft="2dp"
        android:paddingRight="2dp"
    />
</LinearLayout> 
```

在 GridView 的适配器中，我通过将 ImageView 的 url 和引用传递给专用类来异步加载和显示图像。该类将图像下载到位图中，然后使用 setImageBitmap() 更新 ImageView。此工作流程按预期运行；但是，我的图像并没有填满 ImageView 的整个宽度。左侧/右侧有少量填充物。我意识到我可以使用 scaleType="fitXY"，但这并不理想，因为它会扭曲图像。将 ImageView 的 src 属性设置为本地图像可以很好地使用stretchMode="columnWidth"。我的猜测是 ImageView 正在缩放到原始 columnWidth 而不是拉伸/动态宽度。有没有人知道为什么会发生这种情况和/或如何解决？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:45:07.227

你有两个选择：

1.  将 ImageView 的 layout_width 设置为 wrap_content。ImageView 将根据图像的大小调整大小，并且您的列将相应调整。

2.  将 ImageView 的 scaleType 设置为 centerCrop。这将尝试使图像适合图像视图而不倾斜它，并且只会切断任何不适合的多余部分。这不会留下任何空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T23:10:02.993

我遇到过同样的问题。我的解决方案是在图像下载之前覆盖 ImageView（在我的情况下）FrameLayout 以设置它的高度。我想在我的 GridView 中强制执行方形图块，并像这样完成：

```
public class SquareFrameLayout extends FrameLayout {

  public SquareFrameLayout(Context context) {
    super(context);
  }
  public SquareFrameLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
  }
  public SquareFrameLayout(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
  }

  @Override
  protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, widthMeasureSpec);
  }
} 
```

每个 GridView 项目是这样的：

```
<com.my.client.ui.layout.SquareFrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/discovery_tile"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

  <ImageView
    android:id="@+id/my_image"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="centerCrop"
    android:cropToPadding="true"
    android:contentDescription="@string/my_desc" />

</com.my.client.ui.layout.SquareFrameLayout> 
```

然后在 GridView 我用这个：

```
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="com.my.client.ui.MyFragment"
    android:id="@+id/my_gridview"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:numColumns="3"
    android:verticalSpacing="0px"
    android:horizontalSpacing="0px"
    android:stretchMode="columnWidth"
    android:gravity="fill" /> 
```

# jquery - 我如何检查所有嵌套复选框的 ul

> ID：10891551
> 
> 赞同：2
> 
> 时间：2012-06-05T04:26:23.930
> 
> 标签：jquery, html, css

# 问题：

我有一个类别列表，其中某些类别有子类别，我正在尝试创建一个 ALL 类别，单击该类别时，将检查同一类别中的所有兄弟复选框。

例如; 单击**MUSIC**类别下的**ALL将检查****`blues, jazz, rock n roll`**

 **# 代码：

**HTML：**

```
<ul name="events-categories" id="events-categories">
    <li><input type="checkbox" name="category-events" value="185" placeholder="" id="category-185" class="events-category"> CONVENTIONS
        <ul class="event-children">
            <li><input type="checkbox" name="child-category-all" value="" class="events-child-category-all">ALL</li>
            <li><input type="checkbox" name="child-category-190" value="190" id="child-category-190" class="child events-child-category">SCIENCE</li>
            <li><input type="checkbox" name="child-category-191" value="191" id="child-category-191" class="child events-child-category">TECHNOLOGY</li>
        </ul>
    </li>
    <li><input type="checkbox" name="category-events" value="184" placeholder="" id="category-184" class="events-category"> MUSIC
        <ul class="event-children">
            <li><input type="checkbox" name="child-category-all" value="" class="events-child-category-all">ALL</li>
            <li><input type="checkbox" name="child-category-189" value="189" id="child-category-189" class="child events-child-category">BLUES</li>
            <li><input type="checkbox" name="child-category-188" value="188" id="child-category-188" class="child events-child-category">JAZZ</li>
            <li><input type="checkbox" name="child-category-187" value="187" id="child-category-187" class="child events-child-category">ROCK N ROLL</li>
        </ul>
    </li>
    <li><input type="checkbox" name="category-events" value="186" placeholder="" id="category-186" class="events-category"> TRIBUTES</li>
</ul>​ 
```

**CSS：**

```
.event-children {
    margin-left: 20px;
    list-style: none;
    display: none;
}​ 
```

**到目前为止的jQuery：**

```
/**
 * left sidebar events categories
 * toggle sub categories
 */
$('.events-category').change( function(){
    console.log('showing sub categories');
    var c = this.checked;
    if( c ){
        $(this).next('.event-children').css('display', 'block');
    }else{
        $(this).next('.event-children').css('display', 'none');
    }
});

$('.events-child-category-all').change( function(){
    var c = this.checked;
    if( c ){
        $(this).siblings(':checkbox').attr('checked',true);
    }else{
        $(this).siblings(':checkbox').attr('checked',false);
    }
});​ 
```

jsfiddle：http: [//jsfiddle.net/SENV8/](http://jsfiddle.net/SENV8/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T04:33:33.737

```
$('.events-child-category-all').change( function(){
    $(this).parent().siblings().find(':checkbox').attr('checked', this.checked);
});​ 
```

[http://jsfiddle.net/SENV8/3/](http://jsfiddle.net/SENV8/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T04:31:45.930

你需要的是这个，因为那些`checkboxes`不是`siblings`

```
$('.events-child-category-all').change( function(){
    var c = this.checked;
    if( c ){
        $(this).closest('.event-children').find(':checkbox').attr('checked',true);
    }else{
        $(this).closest('.event-children').find(':checkbox').attr('checked',false);
    }
});​ 
```

[工作小提琴](http://jsfiddle.net/joycse06/SENV8/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T04:32:03.600

也许是这样的：

```
$(".events-child-category-all").click(function() {
   $(this).closest("ul").find("input[type=checkbox]").prop("checked",this.checked);
}); 
```

该[`.closest()`方法](http://api.jquery.com/closest/)遍历 DOM 树以查找匹配元素，在本例中查找复选框所在的“ul”。

如果您使用的 jQuery 版本早于 1.6，您将需要`.attr()`使用[`.prop()`](http://api.jquery.com/prop/).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T04:32:10.050

[http://jsfiddle.net/ahren/SENV8/2/](http://jsfiddle.net/ahren/SENV8/2/)

```
$('.events-child-category-all').change( function(){
    var c = this.checked;
    if( c ){
        $(this).parent().siblings().find(':checkbox').prop('checked',true);
    }else{
        $(this).parent().siblings().find(':checkbox').prop('checked',false);
    }
});​ 
```

触发`siblings`的输入没有。`change`您首先需要上一级到 parent `li`，然后抓住它`siblings`，并使用它`find()`来获取他们的复选框。或者你可以使用`children()`而不是`find()`**

# python - 来自连接的 SQLAlchemy 声明性属性（单个属性，而不是整个对象）

> ID：10891552
> 
> 赞同：9
> 
> 时间：2012-06-05T04:26:41.900
> 
> 标签：python, orm, sqlalchemy, declarative

我希望创建从另一个表填充的对象的映射属性。

使用 SQLAlchemy 文档示例，我希望在 Address 类上存在一个 user_name 字段，以便可以轻松查询和访问（无需第二次往返数据库）

例如，我希望能够查询和过滤，`user_name` `Address.query.filter(Address.user_name == 'wcdolphin').first()` 并且还可以访问`user_name`所有地址对象的属性，而不会降低性能，并让它像预期的属性一样正确地持久化写入`__tablename__`

```
class User(Base):
    __tablename__ = 'users'

    id = Column(Integer, primary_key=True)
    name = Column(String(50))
    addresses = relation("Address", backref="user")

class Address(Base):
    __tablename__ = 'addresses'

    id = Column(Integer, primary_key=True)
    email = Column(String(50))
    user_name = Column(Integer, ForeignKey('users.name'))#This line is wrong 
```

我该怎么做呢？

我发现文档相对难以理解，因为它似乎不符合大多数示例，尤其是 Flask-SQLAlchemy 示例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T06:07:04.213

您可以`join`在查询对象上使用 a 来执行此操作，无需直接指定此属性。所以你的模型看起来像：

```
from sqlalchemy import create_engine, Column, Integer, String, ForeignKey
from sqlalchemy.orm import sessionmaker, relation
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()
engine = create_engine('sqlite:///')
Session = sessionmaker(bind=engine)

class User(Base):
    __tablename__ = 'users'
    id = Column(Integer, primary_key=True)
    name = Column(String(50))
    addresses = relation("Address", backref="user")

class Address(Base):
    __tablename__ = 'addresses'
    id = Column(Integer, primary_key=True)
    email = Column(String(50))
    user_id = Column(Integer, ForeignKey("users.id"))

Base.metadata.create_all(engine) 
```

过滤用户名后的地址查询如下所示：

```
>>> session = Session()
>>> session.add(Address(user=User(name='test')))
>>> session.query(Address).join(User).filter(User.name == 'test').first()
<__main__.Address object at 0x02DB3730> 
```

**编辑**：由于您可以从地址对象直接访问用户，因此无需直接将属性引用到 Address 类：

```
>>> a = session.query(Address).join(User).filter(User.name == 'test').first()
>>> a.user.name
'test' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T22:30:01.413

如果您确实希望 Address 具有启用 SQL 的“User.name”版本而无需显式加入，则需要使用相关子查询。这适用于所有情况，但在数据库端（尤其是 MySQL）往往效率低下，因此与使用常规 JOIN 相比，SQL 端可能会降低性能。运行一些 EXPLAIN 测试可能有助于分析可能产生的影响。

相关 column_property() 的另一个示例位于[http://docs.sqlalchemy.org/en/latest/orm/mapped_sql_expr.html#using-column-property](http://docs.sqlalchemy.org/en/latest/orm/mapped_sql_expr.html#using-column-property)。

对于“设置”事件，相关子查询表示只读属性，但事件可用于拦截更改并将其应用于父用户行。下面介绍了两种方法，一种使用常规身份映射机制，如果用户行不存在，则会导致加载，另一种直接向行发出更新：

```
from sqlalchemy import *
from sqlalchemy.orm import *
from sqlalchemy.ext.declarative import declarative_base

Base= declarative_base()

class User(Base):
    __tablename__ = 'users'

    id = Column(Integer, primary_key=True)
    name = Column(String(50))
    addresses = relation("Address", backref="user")

class Address(Base):
    __tablename__ = 'addresses'

    id = Column(Integer, primary_key=True)
    user_id = Column(Integer, ForeignKey('users.id'))
    email = Column(String(50))

Address.user_name = column_property(select([User.name]).where(User.id==Address.id))

from sqlalchemy import event
@event.listens_for(Address.user_name, "set")
def _set_address_user_name(target, value, oldvalue, initiator):
    # use ORM identity map + flush
    target.user.name = value

    # use direct UPDATE
    #object_session(target).query(User).with_parent(target).update({'name':value})

e = create_engine("sqlite://", echo=True)
Base.metadata.create_all(e)

s = Session(e)
s.add_all([
    User(name='u1', addresses=[Address(email='e1'), Address(email='e2')])
])
s.commit()

a1 = s.query(Address).filter(Address.user_name=="u1").first()
assert a1.user_name == "u1"

a1.user_name = 'u2'
s.commit()

a1 = s.query(Address).filter(Address.user_name=="u2").first()
assert a1.user_name == "u2" 
```

# javascript - JavaScript 在 Maximo 中强制执行 OnChange

> ID：10891556
> 
> 赞同：2
> 
> 时间：2012-06-05T04:27:24.297
> 
> 标签：javascript, internet-explorer, jakarta-ee, dom-events, maximo

我目前正在为 Maximo 开发一个 Bookmarklet，它是一个 Java EE 应用程序，我需要填充一些输入框。

通常，当用户将数据输入框中时，他们会单击一个按钮，然后弹出一个弹出窗口，然后搜索要添加到脚本中的值。或者他们可以输入名称并点击制表符/输入，然后将其转换为大写字母并在后台执行一些操作（不确定它到底做了什么）。

我目前使用

```
Javascript: $('mx1354').value = "KHBRARR"; $('mx1354').ov= "KHBRARR"; 
```

但它不像我需要的那样工作。它将输入框设置为所需的值，但它不运行后台功能，因此当我点击保存按钮时，它不会将其识别为任何更改并丢弃我放入框中的内容。

我怎么能模拟一个选项卡/输入按钮被按下？

到目前为止，我已经尝试调用 onchange、focus/blur 和 click 函数（不是 100% 确定我是否正确调用它们）。

dojo 库是应用程序的一部分，所以我不确定是否可以使用它，如果它是功能或者 jQuery 是否会导致冲突。

PS这需要在IE中运行。

OnChange 函数：

```
function tb_(event)
{
    event = (event) ? event : ((window.event) ? window.event : "");
    if(DESIGNMODE)
        return;
    var ro = this.readOnly;
    var exc=(this.getAttribute("exc")=="1");
    switch(event.type)
    {
        case "mousedown":
            if(getFocusId()==this.id)
                this.setAttribute("stoptcclick","true");
            break;
        case "mouseup":
            if (isIE() && !hasFocus(this)) 
            {
                this.focus();
            }
            if (isBidiEnabled) 
            {
                adjustCaret(event, this); // bidi-hcg-AS
            }
            break;
        case "blur":
            input_onblur(event,this);
            if (isBidiEnabled)                                      // bidi-hcg-SC
                input_bidi_onblur(event, this);
            break;
        case "change":
            if(!ro)
                input_changed(event,this);
            break;
        case "click":
            if(overError(event,this))
                showFieldError(event,this,true);
            var liclick=this.getAttribute("liclick");
            var li=this.getAttribute("li");
            if(li!="" && liclick=="1")
            {
                frontEndEvent(getElement(li),'click');
            }

            if(this.getAttribute("stoptcclick")=="true")
            {
                event.cancelBubble=true;
            }
            this.setAttribute("stoptcclick","false");
            break;
        case "focus":
            input_onfocus(event,this);
            if (isBidiEnabled)                      // bidi-hcg-SC
                input_bidi_onfocus(event, this);
            this.select();
            break;
        case "keydown":
            this.setAttribute("keydown","true");
            if(!ro)
            {
                if(isBidiEnabled)
                    processBackspaceDelete(event,this); // bidi-hcg-AS
                if(hasKeyCode(event, 'KEYCODE_DELETE') || hasKeyCode(event, 'KEYCODE_BACKSPACE'))
                {
                    getHiddenForm().elements.namedItem("changedcomponentvalue").value = this.value;                     
                }
                if((hasKeyCode(event, 'KEYCODE_TAB') || hasKeyCode(event, 'KEYCODE_ESC')))
                {
                    var taMatch = dojo.attr(this, "ta_match");
                    if(taMatch) {
                        if(taMatch.toLowerCase().indexOf(this.value.toLowerCase()) == 0) 
                        {
                            console.log("tamatch="+taMatch);
                            this.value = taMatch;
                            input_keydown(event, this);
                            dojo.attr(this, {"prekeyvalue" : ""});
                            input_forceChanged(this);
                            inputchanged = false;
                            return; // don't want to do input_keydown again so preKeyValue will work
                        }
                    }
                    if(this.getAttribute("PopupType"))
                    {
                        var popup = dijit.byId(dojohelper.getPopupId(this));
                        if (popup)
                        {
                            dojohelper.closePickerPopup(popup);
                            if(hasKeyCode(event, 'KEYCODE_ESC'))
                            {
                                if (event.preventDefault)
                                {  
                                    event.preventDefault();  
                                }
                                else
                                {  
                                    event.returnValue  = false;  
                                }  

                                return;
                            }
                        }
                    }
                }
                input_keydown(event,this);
                datespin(event,this);
            }
            else if(hasKeyCode(event,'KEYCODE_ENTER') || (hasKeyCode(event,'KEYCODE_DOWN_ARROW') && this.getAttribute("liclick")))
            {
                var lbId = this.getAttribute("li");
                frontEndEvent(getElement(lbId), 'click');
            }
            else if(hasKeyCode(event,KEYCODE_BACKSPACE))
            {
                event.cancelBubble=true;
                event.returnValue=false;
            }
            break;
        case "keypress":
            if(!ro)
            {
                if(event.ctrlKey==false && hasKeyCode(event,'KEYCODE_ENTER'))
                {
                    var db = this.getAttribute("db");
                    if(db!="")
                    {
                        sendClick(db);
                    }
                }
            }
            break;
        case "keyup":
            var keyDown = this.getAttribute("keydown");
            this.setAttribute("keydown","false");
            if(event.ctrlKey && hasKeyCode(event,'KEYCODE_SPACEBAR'))
            {
                if(showFieldError(event,this,true))
                {
                    return;
                }
                else
                {
                    menus.typeAhead(this,0);
                }
            }
            if(!ro)
            {
                if(isBidiEnabled)
                    processBidiKeys(event,this); // bidi-hcg-AS

                numericcheck(event,this);   
                var min = this.getAttribute("min");
                var max = this.getAttribute("max");

                if(min && max && min!="NONE" || max!="NONE")
                {
                    if(min!="NONE" && parseInt(this.value)<parseInt(min))
                    {
                        this.value=min;
                        getHiddenForm().elements.namedItem("changedcomponentvalue").value = this.value;                     
                        this.select();
                        return false;
                    }

                    if(max!="NONE" && parseInt(this.value)>parseInt(max))
                    {
                        this.value=max;
                        getHiddenForm().elements.namedItem("changedcomponentvalue").value = this.value;
                        this.select();
                        return false;
                    }
                }
                var defaultButton = false;
                if(event.ctrlKey==false && hasKeyCode(event,'KEYCODE_ENTER'))
                {
                    var db = this.getAttribute("db");
                    if(db!="")
                    {
                        defaultButton=true;
                    }
                }
                input_changed(event,this);                  
            }
            else
            {
                setFocusId(event,this);
            }
            if(showFieldHelp(event, this))
            {
                return;
            }
            if(keyDown=="true" && hasKeyCode(event, 'KEYCODE_ENTER') && !event.ctrlKey && !event.altKey)
            {
                menus.typeAhead(this,0);
                return;
            }
            if(!hasKeyCode(event, 'KEYCODE_ENTER|KEYCODE_SHIFT|KEYCODE_CTRL|KEYCODE_ESC|KEYCODE_ALT|KEYCODE_TAB|KEYCODE_END|KEYCODE_HOME|KEYCODE_RIGHT_ARROW|KEYCODE_LEFT_ARROW')
                    && !event.ctrlKey && !event.altKey)
            {
                menus.typeAhead(this,0);
            }
            break;
        case "mousemove":
            overError(event,this);
            break;
        case "cut":
        case "paste":
            if(!ro)
            {
                var fldInfo = this.getAttribute("fldInfo");
                if(fldInfo)
                {
                    fldInfo = dojo.fromJson(fldInfo);
                    if(!fldInfo.query || fldInfo.query!=true)
                    {
                        setButtonEnabled(saveButton,true);
                    }
                }
                window.setTimeout("inputchanged=true;input_forceChanged(dojo.byId('"+this.id+"'));", 20);
            }
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-22T13:58:14.887

一段时间后，我发现为了通过 JavaScript 对页面进行更改，您需要提交一个隐藏的表单，以便它可以在后端进行验证。

这是我用来更改输入字段值的代码。

```
 cc : function(e,v){
            e.focus(); //Get focus of the element
            e.value = v; //Change the value
            e.onchange(); //Call the onchange event
            e.blur(); //Unfocus the element
            console.log("TITLE === "+e.title);
            if(e.title.indexOf(v) != -1) {
                return true; //The value partially matches the requested value. No need to update
            } else {
                //Generate an hidden form and submit it to update the page with the new value
                var hiddenForm = getHiddenForm();
                var inputs = hiddenForm.elements;
                inputs.namedItem("changedcomponentid").value = e.id;
                inputs.namedItem("changedcomponentvalue").value = v;
                inputs.namedItem("event").value = "X"; //Send a Dummy Event so the script see's its invalid and sets the right Event
                submitHidden();
            }
            //Value isn't set to the required value so pass false
            return false;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-11T10:24:08.290

运行这个

```
input_changed(null,document.getElementById('IDHERE')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T10:05:47.997

在 maximo 7.5 中，我构建了一个自定义查找

当我单击彩色超链接时，调用 java 脚本将值更新回父表单值或更新但保存值或未更新

```
 function riskmatrix_setvalue(callerId, lookupId, value,bgrColor,targetid){       
   if (document.getElementById(callerId).readOnly){
    sendEvent('selectrecord', lookupId);
    return;
}
textBoxCaller = document.getElementById(callerId);

//dojo.byId(callerId).setAttribute("value", value);
//dojo.byId(callerId).setAttribute("changed", true);
//dojohelper.input_changed_value(dojo.byId(callerId),value);
//textBoxCaller.style.background = bgrColor;
//var hiddenForm = getHiddenForm();
//if(!hiddenForm)
 //       return;
//var inputs = hiddenForm.elements;
//inputs.namedItem("event").value = "setvalue";
//inputs.namedItem("targetid").value = dojo.byId(callerId).id;
//inputs.namedItem("value").value = value;
//sendXHRFromHiddenForm();
textBoxCaller.focus(); //Get focus of the element
textBoxCaller.value = value; //Change the value
textBoxCaller.onchange(); //Call the onchange event
textBoxCaller.blur(); //Unfocus the element
//Generate an hidden form and submit it to update the page with the new value
var hiddenForm = getHiddenForm();
var inputs = hiddenForm.elements;
inputs.namedItem("changedcomponentid").value = textBoxCaller.id;
inputs.namedItem("changedcomponentvalue").value = value;
inputs.namedItem("event").value = "X"; //Send a Dummy Event so the script see's its invalid and sets the right Event
submitHidden();
sendEvent("dialogclose",lookupId);

 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-08T23:56:09.810

# 描述

我对@Steven10172 的[完美解决方案](https://stackoverflow.com/a/16693743/8965861)做了一点改动，并把它变成了一个**Javascript 可重用函数**。

将此作为单独的答案，因为我对**添加**此内容的原始答案的编辑被拒绝:)

我还必须将行**更改**`e.onchange()`为`e.onchange(e)`，否则**文本框处理程序**（`tb_(eventOrComponent)`函数）会**抛出** `TypeError: textbox.getAttribute is not a function`.

* * *

## 代码

```
var setFakeValue = function(e,v){
    console.log("Changing value for element:", e, "\nNew value:", v);

    e.focus(); //Get focus of the element
    e.value = v; //Change the value
    e.onchange(e); //Call the onchange event
    e.blur(); //Unfocus the element

    if(e.title.indexOf(v) != -1) {
        return true; //The value partially matches the requested value. No need to update
    }
    else {
        //Generate an hidden form and submit it to update the page with the new value
        var hiddenForm = getHiddenForm();
        var inputs = hiddenForm.elements;
        inputs.namedItem("changedcomponentid").value = e.id;
        inputs.namedItem("changedcomponentvalue").value = v;
        inputs.namedItem("event").value = "X"; //Send a Dummy Event so the script see's its invalid and sets the right Event
        submitHidden();
    }
    //Value isn't set to the required value so pass false
    return false;
} 
```

* * *

## 用法

```
setFakeValue(html_element, new_value); 
```

* * *

# 有趣的事实

我花了很多时间寻找以编程方式更改`<input>`Maximo 中的值的解决方案...在某些时候我真的很沮丧，放弃并开始认为这是不可能的...

前段时间我试图毫无期望地搜索，一段时间后我找到了解决方案......[**在这里**](https://stackoom.com/question/jhOG/JavaScript%E5%BC%BA%E5%88%B6Maximo%E4%B8%AD%E7%9A%84OnChange)......

现在...正如您所看到的，这实际上只是 StackOverflow 的完整副本，包括问题和解决方案（用纯文本标记赞），但是中文...这让我很好奇，经过一番搜索后我发现了这个在 StackOverflow 上发帖。

高五到 Chrome 内置网页翻译器，让您了解该页面上的内容^^

# c++ - Boost directory_iterator 错误：运算符不匹配！=

> ID：10891561
> 
> 赞同：2
> 
> 时间：2012-06-05T04:27:52.643
> 
> 标签：c++, boost

我刚刚开始接触 C++ boost 库。我遇到了 directory_iterator 和 recursive_directory_iterator 的问题。当我尝试编译以下代码时，我总是得到一个不匹配的运算符！=。我也试过==无济于事。

```
const boost::filesystem::recursive_directory_iterator end();
for(boost::filesystem::recursive_directory_iterator i(p); i != end; i++){
    if(boost::filesystem::is_regular_file(i->status())){
        cout << i->path().filename() << endl;
    }
} 
```

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T04:35:56.653

`const boost::filesystem::recursive_directory_iterator end()`没有定义变量`end`，而是为函数声明了一个函数原型，`end`该函数返回 a`const boost::filesystem::recursive_directory_iterator`并且不接受任何参数（搜索“C++ most vexing parse”以了解为什么会发生这种情况）。将其更改为`const boost::filesystem::recursive_directory_iterator end;`.

# c - MSVC 中的伪寄存器

> ID：10891566
> 
> 赞同：0
> 
> 时间：2012-06-05T04:28:43.060
> 
> 标签：c, visual-c++

Borland C 具有伪寄存器 _AX、_BX、_FLAGS 等，可在“C”代码中用于将寄存器保存到临时变量。

是否有任何 MSVC 等价物？我尝试了@AX、@BX 等，但是编译器（MSVC1.5）给出了错误（'40' unrecognized symbol）。

我正在开发一个 16 位预启动应用程序，但无法使用 . 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:42:21.700

如果只在寄存器和变量之间移动值，则不需要伪寄存器。例子：

```
int a = 4;
int b = 999;
__asm
{
    mov eax, a; // eax equals to 4
    mov b, eax; // b equals to eax
}
// b equals to 4 now 
```

编辑：要将标志复制到变量中并再次返回标志，您可以使用`LAHF`和`SAHF`说明。例子：

```
int flags = 0;
__asm
{
  lahf;
  mov flags, eax;
}
 flags |= (1 << 3);
__asm
{
  mov eax, flags;
  sahf;
  // 4th bit of the flag is set
} 
```

# algorithm - 压缩/合并数字组合的算法

> ID：10891569
> 
> 赞同：3
> 
> 时间：2012-06-05T04:29:05.573
> 
> 标签：algorithm, combinations

使用赛马投注场景，假设我有多个单独的投注来预测比赛的前 4 名完赛者（superfecta）。

投注方式如下...

```
1/2/3/4  
1/2/3/5  
1/2/4/3  
1/2/4/5  
1/2/5/3  
1/2/5/4 
```

我想要做的是尽可能地组合或浓缩这些单独的组合。上面的赌注，都可以浓缩成1条线……

```
1/2/3,4,5/3,4,5 
```

但如果我从列表中删除最后一个赌注：1/2/5/4 ...

```
1/2/3/4  
1/2/3/5  
1/2/4/3  
1/2/4/5  
1/2/5/3 
```

浓缩的赌注现在必须是 2 行：

```
1/2/3,4/3,4,5  
1/2/5/3 
```

算法会是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T21:43:29.230

我发现用漂亮的图片来思考这种事情是最容易的。我们试着建立一些图表怎么样？

## 第一个例子

```
1/2/3/4  
1/2/3/5  
1/2/4/3  
1/2/4/5  
1/2/5/3  
1/2/5/4 
```

...可能看起来像这样，以图表形式：

![前例1](../Images/4a1aa296e6f2a9533a29a8c700a55f77.png)

从上到下的每条路径（例如`1->2->4->3`）对应于初始格式中的一行。

如果我们从该图开始，那么（也许）我们可以在该图上运行一个小算法，以您正在寻找的方式简化它。这是我们将尝试的：

*   从图表顶部开始，逐级向下移动。（第一级仅包含蓝色节点`1`。）
*   对于当前级别中的每个节点，计算子节点的数量。如果只有一个孩子，则跳过该节点。（由于蓝色节点`1`只有一个孩子，我们将跳到绿色节点`2`。）
*   对于多个孩子中的每一个，构造一个包含该孩子及其孙子的集合。（红色节点`3`有一个集合`{3,4,5}`，红色`4`有一个集合`{3,4,5}`，红色`5`有一个集合`{3,4,5}`。）
*   如果这些集合中的任何一个相同，**则将关联的孩子/孙子替换为包含孩子的单个节点，指向包含集合的孙子**。（因为所有三个红色节点都有相同的集合，所以它们都被替换了。）

![示例 1 之后](../Images/c5d1c328c4bb5af9e7080767347dc319.png)

* * *

## 第二个例子

```
1/2/3/4  
1/2/3/5  
1/2/4/3  
1/2/4/5  
1/2/5/3 
```

...可能看起来像这样，以图表形式：

![前面的例子2](../Images/df2205c05129ac6ad4b0cbac22f9dcd5.png)

红色节点`3`和`4`具有相同的集合（即`{3,4,5}`），因此它们被替换。红色节点与红色节点和`5`没有相同的集合，所以我们不理会它。`3``4`

![示例 2 之后](../Images/508ba3d0778e21d03cee0a96bf0849d2.png)

和以前一样，通过简化树的每条路径代表输出的一行。

*（我没有介绍如果在有曾孙时替换子/孙会发生什么。可能是您实际上应该从底行开始并向上工作。）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T10:37:26.507

由 F#

```
open System
open System.Collections.Generic

let data =
  [|
    "1/2/3/4"
    "1/2/3/5"
    "1/2/4/3"
    "1/2/4/5"
    "1/2/5/3"
    "1/2/5/4"
  |]
let conv (xs:string []) =
  let xs = xs |> Array.map (fun x -> x.Split('/'))
  let len = xs.[0] |> Array.length
  let sa = Array.init len (fun _ -> new SortedSet<string>())
  xs |> Array.iter (fun xa -> xa |> Array.iteri (fun i x -> sa.[i].Add(x) |>ignore))
  String.Join("/", sa |> Array.map (fun x -> if Seq.length x = 1 then Seq.head x else String.Join(",", x |> Seq.toArray)))

let _ = 
  conv data |> printfn "%s"
//result:1/2/3,4,5/3,4,5

  //use 0-3 and 4 element of data
  [|data.[0..3]; data.[4..4] |]
  |> Array.map (fun x -> conv x)
  |> Array.iter (printfn "%s")
(* result:
1/2/3,4/3,4,5
1/2/5/3
*) 
```

# ios - 如何在 MKCircle 中创建文本叠加（iOS MapKit 叠加）

> ID：10891571
> 
> 赞同：2
> 
> 时间：2012-06-05T04:29:48.960
> 
> 标签：ios, overlay, mapkit

我已经广泛搜索了一个合适的解决方案，但还没有找到任何解决方案。

```
-(MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id)overlay 
{
    MKCircleView* circleView = [[[MKCircleView alloc] initWithOverlay:overlay] autorelease];
    circleView.fillColor=[UIColor redColor];
    return circleView;
}

-(void)overlay{
    MKCircle *circleOverlay;

    CLLocationCoordinate2D coords = CLLocationCoordinate2DMake(1.303819,103.7689956); //giza
    circleOverlay=[MKCircle circleWithCenterCoordinate:coords radius:200];
    [self.mapView addOverlay:circleOverlay];

} 
```

有没有一种简单的方法可以在这个圈子中添加文字？

# javascript - 将 3rd 方库与 requirejs 一起使用

> ID：10891574
> 
> 赞同：0
> 
> 时间：2012-06-05T04:30:16.797
> 
> 标签：javascript, box2d, requirejs, google-closure-compiler

嗨，我尝试使用 requirejs 来组织我的代码，但我需要使用一个使用 google-closure-compiler 的库，该库是 box2djs，您可以从

[https://github.com/leonidax/pl.git](https://github.com/leonidax/pl.git)

我发现代码调用了诸如goog.require()之类的函数

我可以通过使用 RequireJS 来使用这个库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:01:27.783

哦，你是在要求一堆伤害。

闭包库和 google 依赖模型（goog.require 等）紧密相连。

您最好在任何地方使用闭包工具并尝试破解复合解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T22:50:55.547

我确实让谷歌闭包库和 RequireJS 一起工作。只要确保 Closure 的东西在 RequireJS 的东西之前。

```
<script src='../externalJS/requirejs/require.js'></script>
<script src="../externalJS/closure-library-read-only/closure/goog/base.js"></script>

<script>

    goog.require('goog.structs');
    goog.require('goog.structs.PriorityQueue');

    // i just had to make sure that the closure lib stuff came before the requirejs stuff

    requirejs([
        'loaders_parsers/requiredLibrarys',
    ]); 
```

# c# - MVC3 - 部分视图中的多个 Ajax 表单在刷新时都填充了相同的数据

> ID：10891575
> 
> 赞同：4
> 
> 时间：2012-06-05T04:30:44.043
> 
> 标签：c#, asp.net-mvc-3, jquery

我正在学习 MVC3 并构建一个小的“待办事项”网站作为学习练习，所以我对我完全走错路的想法持开放态度！

无论如何，我有一个与常规回发完美配合的页面。我正在尝试使用 jQuery 和 UnobtrusiveAjax 对其进行 Ajax 处理，并且一切在技术上仍然正常工作（数据被传递到控制器并保存在我的数据库中）。问题是在我替换的元素中，每个表单的字段都填充了我刚刚在一个表单上传递的值。

索引.cshtml

```
@model WebUI.Models.HomeViewModel

@{
    ViewBag.Title = "Index";
    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
}

<h2>My Goals</h2>
...snip...
<div id="goal_div">
@foreach (var goal in Model.Goals)
{
    Html.RenderPartial("GoalDetail", goal);
}
</div> 
```

目标细节.cshtml

```
@model Domain.Entities.Goal
<div class="goal" id='goal_id@(Model.ID)'>
    <h4>@Model.Name</h4>
    <p>@DateTime.Now.ToString()</p>
    <p class="goal_description">@Model.Progress % complete</p>
    <ul>
        @foreach (var task in Model.Tasks)
        {
            using (Ajax.BeginForm("UpdateTask", "Home", new AjaxOptions { UpdateTargetId = "goal_id" + Model.ID }))
            {
                @Html.HiddenFor(g => g.ID)
                @Html.Hidden("TaskID", task.ID)
                <li class="task">
                    @Html.CheckBox("IsComplete", task.IsComplete) 
                    @Html.TextBox("TaskName", task.Name)
                    @task.Name
                    <input class="actionButtons" type="submit" value="Update task" />
                </li>
            }
        }
        <li>
        @using (Html.BeginForm("AddTask", "Home"))
        {
            @Html.HiddenFor(g => g.ID)
            @Html.Editor("TaskName")
            <input class="actionButtons" type="submit" value="Add task" />
        }
        </li>
    </ul>
</div> 
```

家庭控制器.cs

```
public class HomeController : Controller
{
    private IGoalRepository Repository;

    public HomeController(IGoalRepository repo)
    {
        Repository = repo;
    }

    public ViewResult Index()
    {
        HomeViewModel viewModel = new HomeViewModel();
        viewModel.Goals = Repository.Goals;
        return View(viewModel);
    }

    public ActionResult AddTask(int ID, string TaskName)
    {
        bool success = Repository.SaveTask(ID, 0, TaskName, DateTime.Today, false);
        return RedirectToAction("Index");
    }

    public ActionResult UpdateTask(int ID, int TaskID, bool IsComplete, string TaskName)
    {
        bool success = Repository.SaveTask(ID, TaskID, TaskName, DateTime.Today, IsComplete);
        Goal updatedGoal = Repository.Goals.FirstOrDefault(g => g.ID == ID);
        return PartialView("GoalDetail", updatedGoal);
    }

    public ActionResult AddGoal(string Name, DateTime Enddate)
    {
        bool success = Repository.SaveGoal(0, Name, DateTime.Today, Enddate);
        return RedirectToAction("Index");
    }

    public ActionResult UpdateGoal(int GoalID, string Name, DateTime Enddate)
    {
        bool success = Repository.SaveGoal(GoalID, Name, DateTime.Today, Enddate);
        return RedirectToAction("Index");
    }
} 
```

我有时间只是为了确保 AJAX 刷新确实发生了，你会明白为什么我有两次任务名称。

这是我第一次加载页面时看到的： ![前](../Images/b40c8b03d8f72f173af6ab683aa1fa70.png)

然后我选中第一个目标的第二个任务的复选框，将其重命名为“更新任务#2”，然后单击更新按钮。这就是发生这种情况的时候： ![后](../Images/457e62fe0fb1d68675df82732234beb7.png)

看到不属于表单的任务名称都是正确的（暂时忽略重新排序），并且进度值已正确更新（它只需要完成的任务并除以任务总数），我有不知道为什么所有的表单值都被替换了。甚至 AddTask 表单也已填写，尽管我还没有更改该表单以使用 Ajax。这两天我一直在寻找原因，结果一无所获。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:37:27.857

After even more searching, I finally discovered the issue. Basically, it has to do with the way ModelState works in MVC. Reading [this help thread](http://forums.asp.net/p/1527149/3687407.aspx) and [this article](http://blogs.msdn.com/b/simonince/archive/2010/05/05/asp-net-mvc-s-html-helpers-render-the-wrong-value.aspx) really helped me understand what was happening with my page. I ended up calling ModelState.Clear() in my controller right before returning the partial view, but [this SO question and answer](https://stackoverflow.com/questions/594600/possible-bug-in-asp-net-mvc-with-form-values-being-replaced) suggests another method.

# cakephp - CakePHP 1.3 和 Uploadifive/Uploadify - 将上传文件名更改为随机字符串

> ID：10891578
> 
> 赞同：0
> 
> 时间：2012-06-05T04:31:09.143
> 
> 标签：cakephp, cakephp-1.3

我以某种方式在我的 CakePHP 应用程序中实现了 UPLOADIFIVE。一切似乎都很好，包括上传多个文件和在数据库中插入正确的信息。

根据以下代码，我想上传并保存每个带有随机名称的文件，并考虑当前日期或类似的东西。

我怎么能做到这一点？

在我的`Photos Controller`我有以下功能：

```
// This function is called at every file upload. It uploads the file onto the server
// and save the corresponding image name, etc, to the database table `photos`.
function upload() {
    $uploadDir = '/img/uploads/photos/';

    if (!empty($_FILES)) {
        debug($_FILES);

        $tempFile   = $_FILES['Filedata']['tmp_name'][0];
        $uploadDir  = $_SERVER['DOCUMENT_ROOT'] . $uploadDir;
        $targetFile = $uploadDir . $_FILES['Filedata']['name'][0];

        // Validate the file type
        $fileTypes = array('jpg', 'jpeg', 'gif', 'png'); // Allowed file extensions
        $fileParts = pathinfo($_FILES['Filedata']['name'][0]);

        // Validate the filetype
        if (in_array($fileParts['extension'], $fileTypes)) {

            // Save the file
            move_uploaded_file($tempFile,$targetFile);

            $_POST['image'] = $_FILES['Filedata']['name'][0];           

            $this->Photo->create();
            if ($this->Photo->save($_POST)) {
                $this->Session->setFlash($targetFile, 'default', array('class' => 'alert_success'));
                $this->redirect(array('action' => 'index'));
            }
        } else {
            // The file type wasn't allowed
            //echo 'Invalid file type.';
            $this->Session->setFlash(__('The photo could not be saved. Please, try again.', true));
        }
    }
} 
```

在我的`View file - admin_add.ctp`我添加了以下功能

```
$('#file_upload').uploadifive({
    'auto' : false,
    'uploadScript' : '/photos/upload',
    'buttonText' : 'BROWSE FILES',
    'method'   : 'post',
    'onAddQueueItem' : function(file) {
        this.data('uploadifive').settings.formData = { 'photocategory_id' : $('#PhotoPhotocategoryId').val() };
    }
}); 

<input type="file" name="file_upload" id="file_upload" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:50:40.043

```
function upload() {
$uploadDir = '/img/uploads/photos/';

if (!empty($_FILES)) {
    debug($_FILES);

 //   $tempFile   = $_FILES['Filedata']['tmp_name'][0];
    $uploadDir  = $_SERVER['DOCUMENT_ROOT'] . $uploadDir;
    $targetFile = $uploadDir . $_FILES['Filedata']['name'][0];

    // Validate the file type
    $fileTypes = array('jpg', 'jpeg', 'gif', 'png'); // Allowed file extensions
    $fileParts = pathinfo($_FILES['Filedata']['name'][0]);

    // Validate the filetype
    if (in_array($fileParts['extension'], $fileTypes)) {

        // Save the file

     $tempFile    = time()."_".basename($_FILES['Filedata']['name'][0]);
     $_POST['image'] = $tempFile;

        move_uploaded_file($tempFile,$targetFile);

        $this->Photo->create();
        if ($this->Photo->save($_POST)) {
            $this->Session->setFlash($targetFile, 'default', array('class' => 'alert_success'));
            $this->redirect(array('action' => 'index'));
        }
    } else {
        // The file type wasn't allowed
        //echo 'Invalid file type.';
        $this->Session->setFlash(__('The photo could not be saved. Please, try again.', true));
    }
   }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:26:06.487

`Chetanspeed`非常感谢您迅速提供帮助。根据他的解决方案，我能够使其工作。下面是对我有用的代码，它与`Chetanspeed`

```
function upload() {
    $uploadDir = '/img/uploads/photos/';

    if (!empty($_FILES)) {

        $tempFile   = $_FILES['Filedata']['tmp_name'][0]; // Temp file should not be changed since it contains the physical location of the file /tmp/file.jpg
        $uploadDir  = $_SERVER['DOCUMENT_ROOT'] . $uploadDir;
        $randomString = time(); // Save this random string to a variable
        $targetFile = $uploadDir . $randomString."_".basename($_FILES['Filedata']['name'][0]); //randomString is added to target...

        // Validate the file type
        $fileTypes = array('jpg', 'jpeg', 'gif', 'png'); // Allowed file extensions
        $fileParts = pathinfo($_FILES['Filedata']['name'][0]);

        // Validate the filetype
        if (in_array($fileParts['extension'], $fileTypes)) {

                            //image name posted to database containing the randomString generated from time...thanks Chetanspeed
            $_POST['image'] = $randomString."_".basename($_FILES['Filedata']['name'][0]);

            move_uploaded_file($tempFile,$targetFile);      

            $this->Photo->create();
            if ($this->Photo->save($_POST)) {
                $this->Session->setFlash($targetFile, 'default', array('class' => 'alert_success'));
                $this->redirect(array('action' => 'index'));
            }
        } else {
            // The file type wasn't allowed
            //echo 'Invalid file type.';
            $this->Session->setFlash(__('The photo could not be saved. Please, try again.', true));
        }
    }
} 
```

# jquery - $.each - 在继续之前等待 JSON 请求

> ID：10891579
> 
> 赞同：0
> 
> 时间：2012-06-05T04:31:11.450
> 
> 标签：jquery, json, each

我对以下代码有疑问：

jQuery.each 正在加速而不等待 JSON 请求完成。因此，“thisVariationID”和“thisOrderID”变量会被循环的最新迭代重置，然后才能在较慢的 getJSON 函数中使用。

有没有办法让 .each 的每次迭代都等到 getJSON 请求和回调函数完成，然后再进行下一次迭代？

```
$.each($('.checkStatus'), function(){
            thisVariationID = $(this).attr('data-id');
            thisOrderID = $(this).attr('id');
            $.getJSON(jsonURL+'?orderID='+thisOrderID+'&variationID='+thisVariationID+'&callback=?', function(data){
                if (data.response = 'success'){
                //show the tick. allow the booking to go through
                    $('#loadingSML'+thisVariationID).hide();
                    $('#tick'+thisVariationID).show();
                }else{
                //show the cross. Do not allow the booking to be made
                    $('#loadingSML'+thisVariationID).hide();
                    $('#cross'+thisVariationID).hide();
                    $('#unableToReserveError').slideDown();
                    //disable the form
                    $('#OrderForm_OrderForm input').attr('disabled','disabled');
                }
            })
        }) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T04:37:28.280

您需要使用 1)。非异步调用（如下代码所示）：

```
$.ajax({
    url:jsonURL, 
    dataType:'json', 
    data:{orderID:thisOrderID, variationID:thisVariationID},
    async:false,
    success:function()
    {
        // do stuff.
    } 
```

2）。如果您使用 jsonp 跨站点，则需要链接调用而不是使用每个调用。使用 each 构建一个数据数组，然后开始调用 json，每次迭代都在回调中使用之前的数据。

* * *

补充：为了澄清操作，一个跨站点实现，它设置要处理的项目列表，然后单独处理它们。

我已经破解了大部分普通的旧 Javascript，认为在这种情况下更容易阅读：

```
var items = [];
function setUp()
{
    items = [];  // clear in case this gets recalled.
    $('.checkStatus').each(function(idx, el){
         values.push({variationID:$(el).data('id'), orderID:$(el).attr('id')});
    }
    if (items.length > 0)
    {
        consume();
    }
}
function handleResponse(data)
{
    // do your data handling and formatting here.
    if (items.length >= 0) consume();
}
function consume()
{
    var thisOrder = items.pop();
    $.ajax({
        url:jsonURL, 
        dataType:'jsonp', 
        data:{orderID:thisOrder.orderID, variationID:thisOrder.variationID},
        async:false,
        success:handleResponse
    });
}
setUp(); 
```

请注意，尽管这些都位于它们所在的全局名称空间中，但它们可以轻松地位于闭包或函数内部（即，将整个事物包装在 $(document).ready() 中）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T04:50:58.607

两件事改变了两个快速修复：

1.  在变量之前使用`var`以使它们成为本地而不是全局。这样，您将获得每次迭代的新变量实例。`var`除非您真的打算污染全局命名空间，否则请始终使用：

    ```
     var thisVariationID = $(this).attr('data-id');
        var thisOrderID = $(this).attr('id'); 
    ```

2.  用于`==`比较而不是`=`;)

    ```
     if (data.response == 'success'){ 
    ```

在修复这些您似乎忽略的问题后，您的代码很可能会开始按预期工作。但是，如果您愿意进行更剧烈的更改，您也可以使用[Deferreds](http://api.jquery.com/category/deferred-object/)。

要并行执行一堆提取：

```
var fetches = $('.checkStatus').map(function () {
    var thisVariationID = $(this).attr('data-id'),
        thisOrderID = $(this).attr('id');

    return $.getJSON(/* blah blah */);
});

fetches = $.when.apply($, fetches);

fetches.done(function () {
    // all parallel fetches done
}); 
```

序列化获取：

```
var fetching = $.when();

$('.checkStatus').each(function () {
    var thisVariationID = $(this).attr('data-id'),
        thisOrderID = $(this).attr('id');

    fetching = fetching.pipe(function () {
        return $.getJSON(/* blah blah */);
    });
});

fetching.done(function () {
    // last fetch done
}); 
```

矫枉过正？也许。但它是灵活的，有时可能值得拥有字面意思是“当我的提取完成时”的代码的语法糖。

（注意：上面的实现是一个乐观的实现，仅用于说明目的。在实际实现中，您还应该处理失败。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T04:35:22.493

您只需要停用异步机制。看看这里：[https ://stackoverflow.com/a/933718/1343096](https://stackoverflow.com/a/933718/1343096)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T04:37:47.557

看到我的评论我不知道为什么它去那里而不是回答。这里它是同步的，所以它等待响应。

[jQuery：在继续之前可以等待 $.get 完成加载吗？](https://stackoverflow.com/questions/1761417/jquery-possible-to-wait-for-get-to-finish-loading-before-continuing)

# javascript - 在primefaces中使用javascript从selectOnemenu中获取选定的值并打开一个对话框

> ID：10891586
> 
> 赞同：0
> 
> 时间：2012-06-05T04:32:11.660
> 
> 标签：javascript, ajax, jsf-2, jquery-selectors, primefaces

我们如何`<p:selectOneMenu>`使用 JavaScript/jQuery 获取 PrimeFaces 的选定值？

我试图以这种方式获取它，但它没有进入 if 条件，这意味着元素的 ID 不正确。

```
<h:head> 
    <script> 
        function showDialog() { 
            alert("insdie function"); 
            if($('#someSelect').val() == 'India') { 
                dlg.show(); 
                alert("after function"); 
            } 
            alert("outside function"); 
        }   
    </script> 
</h:head> 
<h:body> 
    <h:form> 
        <p:panel> 
            <h:panelGrid columns="2"> 
                <p:selectOneMenu 
                    id="someSelect" 
                    value="#{testController.countryName}" 
                    <f:selectItem itemLabel="Select One" itemValue="" /> 
                    <f:selectItems value="#{addPatientProfileBB.patStatusSelect}" 
                        itemLabel="#{testController.countryName}" 
                        itemValue="#{testController.countryNameId}" /> 
                    <p:ajax process="someSelect" update="dialog" oncomplete="showDialog()"/> 
                </p:selectOneMenu> 
            </h:panelGrid> 

            <p:dialog id="dialog" header="Login" widgetVar="dlg"> 
                <h:form> 
                    <h:panelGrid columns="2" cellpadding="5"> 
                        <h:outputLabel for="username" value="Username:" /> 
                        <p:inputText id="username" required="true" label="username" /> 
                    </h:panelGrid> 
                </h:form> 
            </p:dialog> 
        </p:panel>  
    </h:form> 
</h:body> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T05:04:11.863

JSF 在网络服务器上运行并生成发送到网络浏览器的 HTML。JavaScript/jQuery 在 webbrowser 上运行，看不到任何 JSF 源代码，只能看到其 HTML 输出。

在浏览器中打开页面，右键单击并*查看源代码*（[或在 PrimeFaces 展示网站上](http://www.primefaces.org/showcase/ui/selectOneMenu.jsf)）。您会看到实际`<select>`元素的前缀是父元素的 ID`<h:form>`和后缀的单词`_input`（因为`<p:selectOneMenu>`基本上会生成 a`<div><ul><li>`以实现普通 无法实现的花哨外观`<select>`，因此它被隐藏了）。

所以，如果你给父表单一个固定的 ID（这样 JSF 不会自动生成一个），那么下面的 JSF 代码

```
<h:form id="form">
    <p:selectOneMenu id="someSelect" ...> 
```

`<select>`将按如下方式生成 HTML ：

```
<select id="form:someSelect_input"> 
```

您需要**完全**使用该 ID 来从 DOM 中获取元素。

```
$("#form\\:someSelect_input"); 
```

或者

```
$("[id='form:someSelect_input']"); 
```

### 也可以看看：

*   [如何使用 jQuery 选择 JSF 组件？](https://stackoverflow.com/questions/7927716/how-to-select-primefaces-ui-or-jsf-components-using-jquery)

* * *

**与具体问题无关**，您还有另一个问题`<p:dialog>`。它包含另一个`<h:form>`，因此您实际上是在嵌套 HTML 中[非法](http://validator.w3.org)的表单！将整个放在表格之外，如下所示`<p:dialog>` *：*

```
<h:form>
    <p:selectOneMenu ... />
</h:form>
<p:dialog>
    <h:form>
        ...
    </h:form>
</p:dialog> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-05T05:04:21.827

尝试改变

```
if($('#someSelect').val() == 'India') { 
```

进入

```
if($("select[name$='someSelect_input'] option:selected").val() == 'India') { 
```

**编辑**

您可以通过更改来改进选择器

```
name$='someSelect_input' 
```

进入

```
name='yourFormName\\:someSelect_input' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-19T19:17:42.153

我我的朋友。我找到了以下解决方案。

```
<h:head> 
    <script> 
        function showDialog() {
            alert(PF('selectWV').getSelectedValue());
            if (PF('selectWV').getSelectedValue() == "b") {
                PF('buttonWV').jq.show();
            } else {
                PF('buttonWV').jq.hide();
            }
        }  
    </script> 
</h:head> 
<h:body> 
    <h:form> 
        <p:panel> 
            <h:panelGrid columns="2"> 
                <h:form>
            <p:selectOneMenu style="width:150px" id="id" widgetVar="selectWV">  
                <f:selectItem itemLabel="Select" itemValue="a"></f:selectItem>
                <f:selectItem itemLabel="Other" itemValue="b"></f:selectItem>
                <p:ajax process="id" update="dos" oncomplete="showDialog()"/>
            </p:selectOneMenu>
            <p:commandButton value="Register" widgetVar="buttonWV"
                style="display: none" />
        </h:form>
            </h:panelGrid> 
        </p:panel>  
    </h:form> 
</h:body> 
```

# python - 捕获异常并将其输出到 django 的消息系统

> ID：10891588
> 
> 赞同：2
> 
> 时间：2012-06-05T04:32:29.667
> 
> 标签：python, django, exception-handling

所以我注意到 Django 有一个很好的消息框架。它有 5 个不同的级别（信息、错误、调试、警告和成功）。

将异常一直传播到视图级别并报告其中一些异常会非常好。

库文件

```
def read_file(user, filename, **kwargs):
   try:
     with open(...):
        return f.read()
   except Exception, e:
     raise e 
```

实用程序

```
def wrapper_read_file(user, filename, **kwargs):
   try:
      if user.is_authenticated and user.belongs('admin'):
          lib.read_file(...)
      else:
          raise Exception("Unauthenticated user!!!")
   except Exception, e:
      raise e 
```

视图.py

```
def my_view(request):
   [..] do something here
   try:
     result = wrapper_read_file(...)
     return render(request, 'hello.html', {'result': result})
   except Exception, e:
     if isinstance(e, IOError):
         if e.errno==errno.ENOENT:
         messages.add_message(request, message.ERROR, 'File does not exist.')
     elif isinstance(e, OSError):
         messages.add_message(request, message.ERROR, 'You don't have sufficient permission to open the file.')
     return render(request, 'hello.html', {'hello_world': 'hello_world'} 
```

Django 知道如何渲染，`messages`而我有能力做到这一点。所以会显示`messages`。

你认为我的异常处理看起来合理吗？有什么替代建议吗？我对 Python 错误异常处理很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T11:21:04.740

您可能不想捕获*所有*异常。这可能会掩盖其他错误，并且会执行诸如阻止 Ctrl-C 工作之类的事情。相反，只捕获您想要处理的异常。

```
try:
    # action that may throw an exception
except IOError, e: # Will only catch IOErrors
    if e.errno == errno.ENOENT:
        messages.add_message(request, messages.ERROR, "File not found")
    else:
        raise e    # Re-raise other IOErrors
except OSError, e: # Will only catch OSErrors
    messages.add_message(request, messages.ERROR, "Insufficient permissions")

return render(request, 'hello.html', {}) 
```

**更新**：添加了第二个 except 子句来处理其他另一种异常类型。请注意，这仍然可能是不够的，因为这使得（大）假设*所有* `OSErrors`都是权限相关的。

# python - 在长时间运行的 Python 进程中迭代大型数据集 - 内存问题？

> ID：10891589
> 
> 赞同：4
> 
> 时间：2012-06-05T04:32:32.147
> 
> 标签：python, memory, large-data

我正在开发一个长时间运行的 Python 程序（其中一部分是 Flask API，另一个是实时数据获取器）。

我的两个长时间运行的进程都经常迭代（API 甚至可能每秒执行数百次）在大型数据集（对某些经济系列的逐秒观察，例如价值 1-5MB 的数据甚至更多）。他们还在序列等之间进行插值、比较和计算。

在迭代/作为参数传递/处理这些大型数据集时，为了让我的流程保持活力，我可以练习哪些技术？例如，我应该使用 gc 模块并手动收集吗？

**更新**

我最初是一名 C/C++ 开发人员，用 C++ 编写部件没有问题（甚至会喜欢）。我只是有 0 经验这样做。我该如何开始？

任何意见，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:24:56.890

使用大型数据集不一定会导致内存复杂化。只要您在查看和操作数据时使用合理的方法，您通常可以节俭地使用内存。

在构建处理数据的模型时，您需要考虑两个概念。

1.  **执行给定计算需要访问的最小数据元素是什么？** 例如，您可能有一个 300GB 的文本文件，其中填充了数字。如果您要计算数字的平均值，请一次读取一个数字以计算运行平均值。在此示例中，最小元素是文件中的单个数字，因为这是我们数据集中在任何时间点都需要考虑的唯一元素。

2.  **您如何为您的应用程序建模，以便在计算期间一次一个地迭代地访问这些元素？** 在我们的示例中，我们不会一次读取整个文件，而是一次从文件中读取一个数字。使用这种方法，我们使用少量内存，但可以处理任意大的数据集。与其在内存中传递对数据集的引用，不如传递数据集的*视图*，它知道如何按需从其中加载特定元素（一旦使用就可以释放）。这在原理上类似于缓冲，并且是许多迭代器采用的方法（例如，`xrange`的`open`文件对象等）。

In general, the trick is understanding how to break your problem down into tiny, constant-sized pieces, and then stitching those pieces together one by one to calculate a result. You'll find these tenants of data processing go hand-in-hand with building applications that support massive parallelism, as well.

Looking towards `gc` is jumping the gun. You've provided only a high-level description of what you are working on, but from what you've said, there is no reason you need to complicate things by poking around in memory management yet. Depending on the type of analytics you are doing, consider investigating `numpy` which aims to lighten the burden of heavy statistical analysis.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T04:59:29.023

如果不真正研究您的数据/算法，很难说，但以下方法似乎是通用的：

1.  确保您没有内存泄漏，否则它迟早会杀死您的程序。为它使用[objgraph](http://mg.pov.lt/objgraph/) - 很棒的工具！阅读文档——它包含了你在 python 程序中可能遇到的内存泄漏类型的很好的例子。

2.  尽可能避免复制数据。例如 - 如果您需要处理部分字符串或进行字符串转换 - 不要创建临时子字符串 - 使用索引并尽可能长时间保持只读状态。它可以使您的代码更复杂且更少“pythonic”，但这是优化的成本。

3.  小心使用 gc - 它可以让你处理一段时间不负责任，同时没有增加任何价值。阅读[文档](http://docs.python.org/library/gc.html)。简而言之：只有在有真正理由这样做时才应该直接使用 gc，例如 Python 解释器在分配大的临时整数列表后无法释放内存。

4.  认真考虑重写 C++ 的关键部分。现在就开始考虑这个令人不快的想法，以便在数据变大时做好准备。严重的是，它通常以这种方式结束。你也可以试试[Cython](http://www.cython.org/)，它可以加速迭代本身。

# javascript - 试图将javascript压缩成for循环

> ID：10891598
> 
> 赞同：1
> 
> 时间：2012-06-05T04:33:42.047
> 
> 标签：javascript, jquery, for-loop

我有以下代码，我试图将其压缩为**for 循环**，但没有运气：

```
$("#motion1-sub1-1").hover( function () {
$("#motion1-sub1-1 div").show();
  }, 
  function () { $("#motion1-sub1-1 div").hide();
  }
);
$("#motion1-sub1-2").hover( function () {
$("#motion1-sub1-2 div").show();
  }, 
  function () { $("#motion1-sub1-2 div").hide();
  }
);
$("#motion1-sub1-3").hover( function () {
$("#motion1-sub1-3 div").show();
  }, 
  function () { $("#motion1-sub1-3 div").hide();
  }
);
$("#motion1-sub1-4").hover( function () {
$("#motion1-sub1-4 div").show();
  }, 
  function () { $("#motion1-sub1-4 div").hide();
  }
);
$("#motion1-sub1-5").hover( function () {
$("#motion1-sub1-5 div").show();
  }, 
  function () { $("#motion1-sub1-5 div").hide();
  }
); 
```

这是必须压缩上述代码的**for 循环**代码：

```
for (var i = 1; i <= 5; i++) {
 $("motion1-sub1-" +  i).hover( function () { $("motion1-sub1-" +  i + "div").show();
  }, 
  function () { $("motion1-sub1-" +  i + "div").hide();
  }
);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T04:36:24.527

不需要 for 循环，只需绑定到具有特定 id 模式的元素，并使用`this`从悬停函数中引用它们：

```
$("[id^='motion1-sub1-']").hover(
    function(){
        $("div", this).show();
    },
    function(){
        $("div", this).hide();
    }
); 
```

我不知道我们要绑定什么类型的元素，但是您应该将该标签作为选择器的一部分提供。例如，如果这是`div`我们正在悬停的，请修改选择器以包括：

```
$("div[id^='motion1-sub1-']") 
```

或者更短、更干的版本：

```
$("[id^='motion1-sub1-']").on("mouseenter mouseleave", function(e){
    $("div", this).toggle( e.type === "mouseenter" );
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T04:37:04.183

给你所有的 div 一个motion-sub 类然后做

```
$(".motion-sub").hover(function() {
    $(this).show() }, function() { $(this).hide(); }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T04:39:48.450

您在`motion1-sub1-x div`选择器之前缺少一个空格`div`

```
 $("motion1-sub1-" +  i + " div") 
```

# ruby-on-rails - 尝试编写通用 AWS::S3 上传控制器时未初始化的常量 UploadsController::Bucket

> ID：10891603
> 
> 赞同：0
> 
> 时间：2012-06-05T04:35:05.263
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-s3, amazon-web-services

我正在尝试为我的 rails 项目编写一个通用的 Amazon S3 上传器（主要用于图像）。[我能够按照http://amazon.rubyforge.org/](http://amazon.rubyforge.org/)在控制台中设置环境。

我能够按照控制台中的指南进行操作。但是，当我将它应用到我的 rails 项目时遇到了麻烦。当我尝试访问我的新视图时，我收到以下错误：

```
NameError in UploadsController#new 
uninitialized constant UploadsController::Bucket 
```

这是我的控制器：

```
class UploadsController < ApplicationController
require 'aws/s3'

  def new
    photo_bucket = Bucket.find('photos')
    @photos = photo_bucket.objects
  end

  def create
    file = 'black-flowers.jpg'
    S3Object.store(file, open(file), 'photos')
  end
end 
```

在我的控制器中，我的新操作将包含上传表单和所有照片的列表。

我的创建操作只会保存文件。我还没有弄清楚表单中的参数将如何传递到控制器中，所以忽略“black-flowers.jpg”行。

我的猜测是我没有在控制器中建立连接。

**如何建立连接或修复此错误？**

感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T04:43:34.477

`Bucket`在这种情况下，它不是顶级常量。您可能想要`AWS::S3::Bucket`new 的常量，我假设`S3Object`.

请注意，您可能还想为此查看[Fog 库](https://github.com/fog/fog "多雾路段")。

您还没有弄清楚 params 将如何传递的事实意味着您可能还想先在没有 S3 的情况下完成 Rails 教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-27T01:03:15.217

我有一个类似的问题，只需检查所有需要的文件并重新启动服务器即可解决

# jquery - jQuery自动完成在输入文本上填充数组

> ID：10891606
> 
> 赞同：0
> 
> 时间：2012-06-05T04:35:25.917
> 
> 标签：jquery, jquery-autocomplete

这是填充文件源给出的相同数组的代码；

```
$("#input-search").autocomplete({
        source: function(request, response) {
            $.ajax({
            url: "SearchList.igx",
            data: { name: request.term, maxResults: 10 },
            //dataType: "json", 
            type: "GET",
            success: function(data){
                response(data);
                }
            });
        },
        select: function(event, ui) {
            $('#input-search').val(ui.item.value);
        },
        cache: false,

    }); 
```

这是填充的 SearchList.igx；

```
[{label:"John Doe", value:"0123"},{label:"Joshua Poe", value:"0124"}] 
```

是这样的观点：

![动态搜索自动完成](../Images/b66e3319d799429c06db88261a71bcd8.png)

如何将其视为填充的建议文本，例如某些自动完成输出视图？

# java - 在 Android 开发中使用 DecimalFormat

> ID：10891607
> 
> 赞同：0
> 
> 时间：2012-06-05T04:35:32.973
> 
> 标签：java, android, eclipse

我已经研究了解决这个问题的方法，我对 java 还是很陌生，只是在研究它，我有点想先进入它，然后遇到了问题。我遇到的问题是我想更改我正在制作的这个“提示计算器”输出的小数位数，并且我还希望它使用 $ 符号以货币格式格式化。我的代码在下面我正在使用

```
public class TipCalculatorActivity extends Activity {

      DecimalFormat money = new DecimalFormat("$0.00");
      EditText costofmeal, tippercent;
      TextView tiptotal, totalbill; 
      Button calctipbtn;
      BigDecimal costNum, percentNum, billNum;

      /** Called when the activity is first created. */
      @Override
      public void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            calctipbtn = (Button) findViewById(R.id.calctipbtn);
            costofmeal = (EditText) findViewById(R.id.CostofMeal); 
            tippercent = (EditText) findViewById(R.id.PercentTipText);
            tiptotal = (TextView) findViewById(R.id.tiptotal);       
            totalbill = (TextView) findViewById(R.id.totalbill);   
            calctipbtn.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // TODO Auto-generated method stub
                costNum = new BigDecimal(costofmeal.getText().toString());
                percentNum = new BigDecimal(tippercent.getText().toString());

                tiptotal.setText(costNum.multiply(percentNum).toString());
                System.out.println(money.format(tiptotal));

                costNum = new BigDecimal(costofmeal.getText().toString());
                billNum = new BigDecimal(tiptotal.getText().toString());

                totalbill.setText(costNum.add(billNum).toString());
                System.out.println(money.format(totalbill));
            }
          });   
     }
} 
```

我的思维方法基本上是我可以得到方程的输出，然后我可以使用`money.format`并调用`textview`我使用的，它会将它格式化为`DecimalFormat`我所拥有的。相反，当我点击计算按钮时，应用程序强制关闭，我得到的日志错误是

```
06-04 21:32:57.242: D/AndroidRuntime(1905): Shutting down VM

06-04 21:32:57.242: W/dalvikvm(1905): threadid=1: thread exiting with uncaught exception    (group=0x40015578)

06-04 21:32:57.257: E/AndroidRuntime(1905): FATAL EXCEPTION: main

06-04 21:32:57.257: E/AndroidRuntime(1905): java.lang.IllegalArgumentException

06-04 21:32:57.257: E/AndroidRuntime(1905):     at java.text.NumberFormat.format(NumberFormat.java:308)

06-04 21:32:57.257: E/AndroidRuntime(1905):     at 
java.text.DecimalFormat.format(DecimalFormat.java:714)

06-04 21:32:57.257: E/AndroidRuntime(1905):     at java.text.Format.format(Format.java:93)

06-04 21:32:57.257: E/AndroidRuntime(1905):     at com.verge.tipcalc.TipCalculatorActivity$1.onClick(TipCalculatorActivity.java:50)

06-04 21:32:57.257: E/AndroidRuntime(1905):     at android.view.View.performClick(View.java:2537)

06-04 21:32:57.257: E/AndroidRuntime(1905):     at android.view.View$PerformClick.run(View.java:9157)

06-04 21:32:57.257: E/AndroidRuntime(1905):     at 
android.os.Handler.handleCallback(Handler.java:587)

06-04 21:32:57.257: E/AndroidRuntime(1905):     at android.os.Handler.dispatchMessage(Handler.java:92)

06-04 21:32:57.257: E/AndroidRuntime(1905):     at android.os.Looper.loop(Looper.java:130)

06-04 21:32:57.257: E/AndroidRuntime(1905):     at android.app.ActivityThread.main(ActivityThread.java:3687)

06-04 21:32:57.257: E/AndroidRuntime(1905):     at java.lang.reflect.Method.invokeNative(Native Method)

06-04 21:32:57.257: E/AndroidRuntime(1905):     at java.lang.reflect.Method.invoke(Method.java:507)

06-04 21:32:57.257: E/AndroidRuntime(1905):     at 
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)

06-04 21:32:57.257: E/AndroidRuntime(1905):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)

06-04 21:32:57.257: E/AndroidRuntime(1905):     at dalvik.system.NativeStart.main(Native Method) 
```

我想要做的就是将`totalbill`和舍入`tiptotal`到小数点后 2 位，并将其格式化为我尝试过的 3-4 种方法，但都没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:49:56.040

l 你需要这样做——

```
DecimalFormat money = new DecimalFormat("00.00");
money.setRoundingMode(RoundingMode.UP);// you can also use DOWN here if you dont need to round up the decimal.
.
.
System.out.println(money.format(new Double(totalbill.getText()))); 
```

我认为你错过的重要的是`new Double(totalbill.getText())`。您不能直接传递 totalBill，因为它是 textView。您需要将其解析为 Double 或 Flot，然后将其传递给格式化程序。

也`$`可以稍后附加到文本中。

```
totalbill.setText("$" + totalbill.getText()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T04:41:30.927

你可以试试这个代码

像这样转换您的 BigDecimal 值，使其十进制值最多为 2 位

```
 BigDecimal bd = new BigDecimal( costNum);
   bd = bd.setScale(2, BigDecimal.ROUND_HALF_UP); 
```

# crystal-reports-2008 - 基于页码的组抑制

> ID：10891608
> 
> 赞同：0
> 
> 时间：2012-06-05T04:35:37.777
> 
> 标签：crystal-reports-2008

我有一份保修声明，只需要在报告的第二页打印。我尝试使用选择专家，抑制（无向下钻取）。我在其中添加了 PageNumber<>2 公式。但是，当我运行我的报告时，它会为所有页面保留整个部分。

我是水晶报告的新手！请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:46:21.517

如果您总是只想在最后一页打印该语句，您可以将它放在报表的报表页脚中。仅供参考，报告页脚将是报告中的最后一部分，始终打印在报告的最后一页上。

如果不是这种情况，那么我需要更多信息，例如 1\. 该报告有多少页？2\. 它会一直包含超过 2 页吗？3\. 我想知道您放置保修声明的部分？

# visual-studio-2010 - Intellisense 使用 _$getActiveXObject 自动完成 jQuery $

> ID：10891610
> 
> 赞同：0
> 
> 时间：2012-06-05T04:35:59.240
> 
> 标签：visual-studio-2010, visual-studio, intellisense

我正在使用 Visual Studio 2012 RC。每次我键入`$`然后继续键入`(`以启动 jQuery 选择器时，Visual Studio 都会毫无帮助地自动完成 `_$getActiveXObject`将我变成一个**尖叫的疯子**的语句。

有没有办法禁用它？我无法想象它`_$getActiveXObject`会比 jQuery 使用更多，这让我感到困惑，为什么这将是默认的智能感知行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:25:18.580

Visual Studio 2012 为 jQuery 提供了更新的 IntelliSense 文件。如果您通过 NuGet 检索 jQuery，您应该会自动获取它。

# r - 从 R 传递值（在 SPSS 中运行）以打开 SPSS 数据集

> ID：10891617
> 
> 赞同：1
> 
> 时间：2012-06-05T04:36:28.350
> 
> 标签：r, spss

在这里对 R 完全陌生。我在 SPSS 中运行 R 来解决 SPSS 数据集中的一些复杂多项式。我设法将 R 的结果返回到 SPSS，但这是一个非常不优雅的过程：

```
begin program R.
z  <- polyroot(unlist(spssdata.GetDataFromSPSS(variables=c("qE","qD","qC","qB","qA"),cases=1),use.names=FALSE))
otherVals <- spssdata.GetDataFromSPSS(variables=c("b0","b1","Lc","tInv","sR","c0","c1","N2","xBar","DVxSq"),cases=1)
b0<-unlist(otherVals["b0"],use.names=FALSE)
b1<-unlist(otherVals["b1"],use.names=FALSE)
Lc<-unlist(otherVals["Lc"],use.names=FALSE)
tInv<-unlist(otherVals["tInv"],use.names=FALSE)
sR<-unlist(otherVals["sR"],use.names=FALSE)
c0<-unlist(otherVals["c0"],use.names=FALSE)
c1<-unlist(otherVals["c1"],use.names=FALSE)
N2<-unlist(otherVals["N2"],use.names=FALSE)
xBar<-unlist(otherVals["xBar"],use.names=FALSE)
DVxSq<-unlist(otherVals["DVxSq"],use.names=FALSE)
z2 <- Re(z[abs(c(abs(b0+b1*Re(z)-tInv*sR*sqrt(1/(c0+c1*Re(z))^2+1/N2+(Re(z)-xBar)^2/DVxSq))-Lc))==min(abs(c(abs(b0+b1*Re(z)-tInv*sR*sqrt(1/(c0+c1*Re(z))^2+1/N2+(Re(z)-xBar)^2/DVxSq))-Lc)))])
varSpec1 <- c("Xd","Xd",0,"F8","scale")
dict <- spssdictionary.CreateSPSSDictionary(varSpec1)
spssdictionary.SetDictionaryToSPSS("results", dict)
new = data.frame(z2)
spssdata.SetDataToSPSS("results", new)
spssdictionary.EndDataStep( )
end program. 
```

老实说，它主要是从一些相关的例子拼凑而成的，看起来比它应该的要复杂。我必须使用 R 创建的新数据集并使用我的原始数据集运行 MATCH FILES。我要做的就是a）将数字从SPSS拉到R中，b）操纵它们——在这种情况下，找到一个符合某些标准的多根——，c）将结果直接放回SPSS数据集中，而不会弄乱任何之前的数据。

我是否遗漏了一些能让这更简单的东西？请记住，在此尝试之外，我的 R 经验为零，但我在 SPSS 和 matlab 编程方面有不错的经验。

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T23:09:22.453

SPSS 中的 R 可以创建新的 SPSS 数据集，但不能修改现有数据集。在很多情况下，来自 R 的数据在维度上与活动的 SPSS 数据集不一致。因此，您需要使用上面的 api 创建字典和数据框，然后在需要匹配时在 SPSS 端执行任何适当的操作。您可能希望通过建议@us.ibm.com 提交 SPSS 增强请求

# tomcat - Tomcat 和 spring-security 中的 Web 应用程序和 REST 服务 SSO

> ID：10891620
> 
> 赞同：5
> 
> 时间：2012-06-05T04:36:43.593
> 
> 标签：tomcat, spring-security, single-sign-on

我正在使用部署在同一个 tomcat 实例中的两个不同的 Web 应用程序。一种是 Web 应用程序，另一种是 REST 服务。当用户登录到 Web 应用程序并调用 REST 服务时，REST 应该对使用 Web 应用程序登录的用户进行身份验证。我如何在tomcat中实现SSO>如果有人实现了它，请帮助mw。

**更新：** 我在我的第一个 Web 应用程序中实现了 Spring Security 和 J2EEPreAuthentication 机制。此应用程序使用 DOJO（JavaScript 框架）调用第二个应用程序（REST 服务）。

**更新：** 我找到了解决方案。请在下面阅读我的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T09:48:00.453

我们可以在传统的 Web 应用程序和非基于 Web 的应用程序（如 RESTful Web 服务）之间实现 SSO。此示例显示了用于在 Web 应用程序和 RESTful Web 服务之间实现 SSO 的示例代码。以下是`spring-security.xml`文件中的配置

```
<security:http create-session="never" use-expressions="true" 
                   auto-config="false" 
                   entry-point-ref="preAuthenticatedProcessingFilterEntryPoint" >

        <security:intercept-url pattern="/**" access="permitAll"/>
        <security:intercept-url pattern="/admin/**" access="hasRole('tomcat')"/>
        <security:intercept-url pattern="/**" access="hasRole('tomcat')"/>
        <security:custom-filter position="PRE_AUTH_FILTER" ref="preAuthFilter"/>
        <!-- Required for Tomcat, will prompt for username / password twice otherwise -->
        <security:session-management session-fixation-protection="none"/>
    </security:http>

    <bean id="preAuthenticatedProcessingFilterEntryPoint"
                class="org.springframework.security.web.authentication.Http403ForbiddenEntryPoint"/>

    <bean id="preAuthFilter"
                class="org.springframework.security.web.authentication.preauth.j2ee.J2eePreAuthenticatedProcessingFilter">
        <property name="authenticationManager" ref="appControlAuthenticationManager"/>
        <property name="authenticationDetailsSource"
                        ref="j2eeBasedPreAuthenticatedWebAuthenticationDetailsSource"/>
    </bean> 

    <security:authentication-manager alias="appControlAuthenticationManager">
        <security:authentication-provider ref="preAuthenticatedAuthenticationProvider"/>
    </security:authentication-manager>

    <bean id="preAuthenticatedAuthenticationProvider"
                class="org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationProvider">
        <property name="preAuthenticatedUserDetailsService" ref="inMemoryAuthenticationUserDetailsService"/>
    </bean>

    <bean id="j2eeBasedPreAuthenticatedWebAuthenticationDetailsSource"
                class="org.springframework.security.web.authentication.preauth.j2ee.J2eeBasedPreAuthenticatedWebAuthenticationDetailsSource">
        <property name="mappableRolesRetriever" ref="webXmlMappableAttributesRetriever"/>
        <property name="userRoles2GrantedAuthoritiesMapper" ref="simpleAttributes2GrantedAuthoritiesMapper"/>
    </bean>

    <bean id="webXmlMappableAttributesRetriever"
                class="org.springframework.security.web.authentication.preauth.j2ee.WebXmlMappableAttributesRetriever"/>

    <bean id="simpleAttributes2GrantedAuthoritiesMapper"
                class="org.springframework.security.core.authority.mapping.SimpleAttributes2GrantedAuthoritiesMapper">
        <property name="attributePrefix" value=""/>
    </bean>

    <bean id="inMemoryAuthenticationUserDetailsService"
                class="com.org.InMemoryAuthenticationUserDetailsService"/> 
```

上面的代码在 Web 应用程序中。同样的代码也可以在 REST 项目的 spring security xml 文件中。将以下代码添加到`web.xml`文件中：

```
<security-constraint>
        <web-resource-collection>
            <web-resource-name>Wildcard means whole app requires authentication</web-resource-name>
            <url-pattern>/*</url-pattern>
            <http-method>GET</http-method>
            <http-method>POST</http-method>
        </web-resource-collection>
        <auth-constraint>
            <role-name>tomcat</role-name>
        </auth-constraint>

        <user-data-constraint>
            <!-- transport-guarantee can be CONFIDENTIAL, INTEGRAL, or NONE -->
            <transport-guarantee>NONE</transport-guarantee>
        </user-data-constraint>
    </security-constraint>
    <login-config>
        <auth-method>FORM</auth-method>
        <form-login-config>
            <form-login-page>/login.jsp</form-login-page>
            <form-error-page>/error.jsp</form-error-page>
        </form-login-config>
    </login-config> 
```

上面的代码应该只存在于普通的 Web 应用程序中。`server.xml`然后在 tomcat 的文件中启用 SSO 阀。Tomcat 使用基于 cookie 的 SSO 登录。会话 ID 存储在 cookie 中。如果您的浏览器禁用了 cookie，则 SSO 将不起作用。

希望这个解释有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:59:03.723

Tomcat 提供开箱即用的 SSO 功能（通过配置），但它使用自己的身份验证机制。我不相信您可以将 Tomcat 的容器管理的 SSO 与应用程序管理的（在本例中为 Spring）身份验证机制混合使用。

您应该研究 Spring 的 SSO 功能（如果存在）。

# windows-7 - 在 Windows 7 上使用 XAMPP 设置 phpstorm 4

> ID：10891621
> 
> 赞同：3
> 
> 时间：2012-06-05T04:36:52.237
> 
> 标签：windows-7, xampp, phpstorm

我需要帮助使用位于默认位置 c:\xampp\htdocs 的 XAMPP 设置 phpstorm (4.0)。我在 c:\xampp\htdocs\projectname 中创建所有项目。

以下是我已经做过的事情：

*   通过转到设置然后 PHP（主菜单）设置 PHP 解释器

![在此处输入图像描述](../Images/2f3d0d458be227eb8d1ef46d56f71a56.png)

*   转到 PHP > 服务器，然后

![在此处输入图像描述](../Images/9ab5619d8b6383588cfddfa6902f7254.png)

*   要设置运行配置，我已完成以下操作：

![在此处输入图像描述](../Images/2adfb1d3cf97cb81984ad2112caa1e52.png)

现在，当我使用上述配置运行时，它只会将我带到浏览器中的 localhost，而不是我正在编辑的文件（[http://localhost](http://localhost)而不是 localhost/myproject/myfile.php）。

我错过了什么？我阅读了 phpstorm 的帮助主题并搜索了很多，但仍然无法弄清楚。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T20:36:45.177

原来你不需要设置运行配置。答案在于在设置的部署选项卡中设置映射。

（假设您在 c:\xampp\htdocs 中创建项目）

为此，请转到设置 (Ctrl + Alt + S)，然后选择部署： ![在此处输入图像描述](../Images/0906d872c947b09f924639046962fa4a.png)

在映射选项卡下，它应该如下所示： ![在此处输入图像描述](../Images/3fbe5103f4ed7acfa72de409be0c1f4a.png)

之后，您可以通过此菜单在浏览器中查看文件：

![在此处输入图像描述](../Images/966cb851f1b66846628b965f8ae63166.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T04:48:38.490

检查[这个问题](https://stackoverflow.com/q/7739076/104891)的答案。如果需要调试，推荐的方法[是零配置调试](http://blog.jetbrains.com/webide/2011/02/zero-configuration-debugging-with-xdebug-and-phpstorm-2-0/)。

# html - 相同的字体、字符间距和行高，但结果不同

> ID：10891623
> 
> 赞同：2
> 
> 时间：2012-06-05T04:36:55.337
> 
> 标签：html, css

CSS3 中@font-face 的引入允许网页设计师使用在所有浏览器中看起来相同的字体。这就是我在[jsFiddle](http://jsfiddle.net/yxGWT/1/)中使用以下代码尝试之前的想法：

**HTML**：

```
<div>
    The_Quick_Brown<br>
    Fox_Jumps_Over<br>
    The_Lazy_Dog
</div> 
```

**CSS**：

```
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 400;
  src: url('http://themes.googleusercontent.com/static/fonts/opensans/v6/cJZKeOuBrn4kERxqtaUH3T8E0i7KZn-EPnyo3HZu7kw.woff') format('woff');
}

div {
    display: block;
    width: 496px;
    height: 86px;
    font-size: 1.3em;
    font-family: 'Open Sans';
    font-style: normal;
    margin: 0;
    border: 0;
    padding: 0;
    background: cyan;
    letter-spacing: 1.44em;
    line-height: 1.44;
    overflow: hidden;
} 
```

![火狐12.0](../Images/0e7e0b3b0ea89f9d2f9bc66f06e0f861.png)

这是 Firefox 12.0 的视图。注意'brown'中部分被遮挡的'o'，'dog'中'g'的位置和底部边缘的下划线'_'。

![谷歌浏览器 19.0](../Images/712e476752369af8ff2ec6f81914bde3.png)

这是来自 Google Chrome 19.0 的视图。

尽管明确设置`letter-spacing`和`line-height`对于相同的字体，为什么结果仍然不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T06:35:48.863

你的代码是正确的。问题是您的浏览器/每个浏览器（具体来说是浏览器渲染引擎）以不同的方式渲染内容。您可能不会一直从每个浏览器获得完全相同的输出。功能和所有其他功能可能相同，但在呈现网页方面几乎总是一个不同的故事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:36:26.240

在这个问题上我们没有什么可做的。它完全取决于浏览器的文本渲染引擎。每个浏览器都以不同的方式呈现文本。

# mysql - Mysql事务问题

> ID：10891625
> 
> 赞同：1
> 
> 时间：2012-06-05T04:37:06.220
> 
> 标签：mysql, transactions, pdo

在直接的 mysql 脚本中，我会做这样的交易：

```
START TRANSACTION;
SELECT @A:=SUM(salary) FROM table1 WHERE type=1;
UPDATE table2 SET summary=@A WHERE type=1;
COMMIT; 
```

我对事务在 PDO 中的工作方式有点困惑。看起来有 beginTransaction() 和 commit() 方法 - 所以我不确定这些只是简单的 SQL 的便利包装器吗？还是他们在幕后做更多的工作？

换句话说 - 下面的这些例子本质上是一样的吗？

示例 1：

```
$dbh->exec( 'START TRANSACTION' );
//...do some db work here...
$dbh->exec( "COMMIT" ); 
```

示例 2：

```
$dbh->beginTransaction();
//...do some db work here...
$dbh->commit(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T04:44:48.890

功能方面两者都是相同的，但是 beginTransaction() 和 commit() 是 PDO 函数，可确保与所有数据库的兼容性，并且可能有一些数据库可能会在 START TRANSACTION 时出错，但 PDO 方法将始终有效。

# python - 使用 PIL 在 django 中调整上传文件的大小

> ID：10891626
> 
> 赞同：3
> 
> 时间：2012-06-05T04:37:20.930
> 
> 标签：python, django, file-upload, resize, python-imaging-library

我正在使用 PIL 使用此方法调整上传文件的大小：

```
def resize_uploaded_image(buf):
  imagefile = StringIO.StringIO(buf.read())
  imageImage = Image.open(imagefile)

  (width, height) = imageImage.size
  (width, height) = scale_dimensions(width, height, longest_side=240)

  resizedImage = imageImage.resize((width, height))
return resizedImage 
```

然后我使用此方法在我的主视图方法中获取 resizedImage ：

```
image = request.FILES['avatar']
resizedImage = resize_uploaded_image(image)
content = django.core.files.File(resizedImage)
acc = Account.objects.get(account=request.user)
acc.avatar.save(image.name, content) 
```

但是，这给了我“读取”错误。

痕迹：

> 异常类型：/myapp/editAvatar 处的 AttributeError 异常值：读取

知道如何解决这个问题吗？我已经玩了好几个小时了！谢谢！

尼库尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T14:30:02.670

以下是如何获取一个类文件对象，将其作为 PIL 中的图像进行操作，然后将其转换回类文件对象：

```
def resize_uploaded_image(buf):
    image = Image.open(buf)

    (width, height) = image.size
    (width, height) = scale_dimensions(width, height, longest_side=240)

    resizedImage = image.resize((width, height))

    # Turn back into file-like object
    resizedImageFile = StringIO.StringIO()
    resizedImage.save(resizedImageFile , 'PNG', optimize = True)
    resizedImageFile.seek(0)    # So that the next read starts at the beginning

    return resizedImageFile 
```

请注意，`thumbnail()`PIL 图像已经有一个方便的方法。这是我在自己的项目中使用的缩略图代码的变体：

```
def resize_uploaded_image(buf):
    from cStringIO import StringIO
    import Image

    image = Image.open(buf)

    maxSize = (240, 240)
    resizedImage = image.thumbnail(maxSize, Image.ANTIALIAS)

    # Turn back into file-like object
    resizedImageFile = StringIO()
    resizedImage.save(resizedImageFile , 'PNG', optimize = True)
    resizedImageFile.seek(0)    # So that the next read starts at the beginning

    return resizedImageFile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T11:27:07.560

您最好保存上传的图像，然后根据需要在模板中显示和调整大小。这样您就可以在运行时调整图像大小。[sorl-thumbnail](https://github.com/sorl/sorl-thumbnail)是 djano 应用程序，您可以使用它来调整模板图像大小，它易于使用，您也可以在视图中使用它。以下是此应用程序的[示例](http://thumbnail.sorl.net/examples.html)。

# php - iframe 无法在 Firefox 中加载

> ID：10891628
> 
> 赞同：0
> 
> 时间：2012-06-05T04:37:24.003
> 
> 标签：php, javascript

我有一个包含多个 iframe 的网页。这些 ifrmaes 试图加载一些 Web 表单。我的问题是，这些表单没有在 Firefox 中加载，但在 IE8 和 chrome 中运行良好。

有什么想法可以解决这个问题吗？

以下是代码片段。它的作用是动态创建多个 iframe。

```
foreach ($references as $key => $reference) {
  <iframe scrolling='no' onload='javascript:resizeIframe(this);' id="refForm_<?php echo $reference->getRecruitmentReferenceFormData()->getId(); ?>" style="display:block;margin-left:auto;margin-right:auto;" src="<?php echo url_for('recruitment/viewReferenceForm') . '?id=' . $reference->getRecruitmentReferenceFormData()->getId(); ?>" id="rightMenu" name="rightMenu" height="1000px" frameborder="0"></iframe>
  <?php
}

function resizeIframe (obj) {
    var size = obj.contentWindow.document.body.offsetHeight;
    size = size + 900;

    obj.style.height = obj.contentWindow.document.body.offsetHeight + 'px';
    obj.style.height = obj.contentWindow.document.body.scrollHeight + 'px';
    obj.style.width = obj.contentWindow.document.body.scrollWidth + 'px';  
} 
```

# html - 如何在 html 中创建课程然后导出到 Moodle

> ID：10891632
> 
> 赞同：1
> 
> 时间：2012-06-05T04:37:57.913
> 
> 标签：html, moodle

我对此完全陌生。我想将 PDF 文件转换为 HTML 格式，然后我必须创建交互式在线课程应用程序，学生可以通过 Internet 下载该应用程序。有什么办法吗，或者我如何将这个 html 内容导出到 Moodle。我真的被这个打动了…………

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:32:34.433

大多数 PDF 文件在某种程度上是图形而不是可编辑的文档。正是由于这个原因，您不能直接将它们转换为 HTML 或 moodle。如果您的 PDF 文件具有可选择的文本，您可能只想复制文本并将其粘贴到 word 中或直接粘贴到 moodle。

# iphone - 不小心从 XCode 3.2.5 中删除了类...请帮助我请

> ID：10891635
> 
> 赞同：0
> 
> 时间：2012-06-05T04:38:15.373
> 
> 标签：iphone, objective-c, xcode

意外地，我的 classes 文件夹被 xcode(project) 的引用删除了。我尝试从垃圾中恢复它们，但它不存在于垃圾中。我如何使用 svn 进行备份。但是在我尝试运行项目时检查了整个项目之后，它会给出一个错误

> 2012-06-05 12:58:14.299 Lisnx [1285:207] Interface Builder 文件中的未知类 LisnxAppDelegate。2012-06-05 12:58:14.301 Lisnx [1285:207] Interface Builder 文件中的未知类 LisnxViewController。2012-06-05 12:58:14.304 Lisnx [1285:207] *** 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类不符合键值编码的键 viewController 。***第一次抛出调用堆栈：( 0 CoreFoundation 0x0119dbe9**Experfippreprocess + 185 1 libobjc.a.dylib 0x012f25c2 objc_exception_throw + 47 2 corefoundation 0x0119db21 - [nsexception exceed] + 17 3 foundation 0x000756cf _nssetusingkeyvaluesetter + 135 4 foundation 0x0007563d - [nsobject（nskeyvaluecoding）setvalue：] + 285 5 uikit 0x004f48d6 - [ UIRuntimeOutletConnection 连接] + 112 6 CoreFoundation 0x011142cf -[NSArray makeObjectsPerformSelector:] + 239 7 UIKit 0x004f32ed -[UINib instantiateWithOwner:options:] + 1041 8 UIKit 0x004f5081 -[NSBundle(UISBundleAdditions) loadNibNamed:owner:options:] + 168 9 UIKit 0x002ff943 -[UIApplication _loadMainNibFile] + 172 10 UIKit 0x003004ca -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 291 11 UIKit 0x0030adb2 -[UIApplication handleEvent:withNewEvent:] + 10033 12 -[Kit UI UIApplication sendEvent:] + 71 13 UIKit 0x00308732 _UIApplicationHandleEvent + 7576 14 GraphicsServices 0x01ad3a36 PurpleEventCallback + 1550 15 CoreFoundation 0x0117f064 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION] + 71 13 UIKit 0x00308732 _UIApplicationHandleEvent + 7576 14 GraphicsServices 0x01ad3a36 PurpleEventCallback + 1550 15 CoreFoundation 0x0117f064 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION**+ 52 16的CoreFoundation 0x010df6f7 __CFRunLoopDoSource1 + 215 17的CoreFoundation 0x010dc983 __CFRunLoopRun + 979 18的CoreFoundation 0x010dc240 CFRunLoopRunSpecific + 208 19的CoreFoundation 0x010dc161 CFRunLoopRunInMode + 97 20的UIKit 0x002fffa8 - [UIApplication的_run] + 636 21的UIKit 0x0030c42e UIApplicationMain + 1160 22 Lisnx 0x00002528主+ 102 23 Lisnx 0x000024b9 start + 53 ) 在抛出“NSException”实例后调用终止

请一些人帮助我摆脱这个问题。我会感谢他的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T04:43:25.070

您很可能只是删除了类的**引用**。查看您的项目文件夹以确保它们仍然存在。如果是，只需将它们复制回您的项目浏览器。

只要您在收到对话框时没有选择“**移至废纸篓”，就可以了。**如果您选择了**Remove References**，那么文件仍然在您计算机上的项目文件夹中，请先查看那里。

**Remove References**仅意味着 Xcode 将从您的项目中删除类或文件，而不是将它们删除到垃圾箱中。

![在此处输入图像描述](../Images/18a40d050e7c806654cc8da2785404d2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:59:47.877

我只是轻松地阅读了这个异常。只需进入项目导航器右键单击它，然后从现有源添加文件。添加所有这些类并构建它成功工作。

# html - 用静态 HTML 网站替换 Tomcat 服务器上的网站

> ID：10891638
> 
> 赞同：3
> 
> 时间：2012-06-05T04:38:35.060
> 
> 标签：html, linux, tomcat, ssh

我为我的客户制作了一个小型静态网站，现在他们希望我用静态网站替换他们目前的动态网站。他们在远程位置安装了带有 SSH 的 Ubuntu。他们现有的网站在 Tomcat6 服务器上运行，站点根目录位于“/var/lib/tomcat6/webapps/ROOT/”中。

我的网站仅包含静态 HTML 页面。如何用我制作的网站重新配置/替换当前网站？我应该停止服务器并用我的文件替换站点根目录中的文件吗？

添加更新的 web.xml：

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
   version="2.5">

  <display-name>Welcome to OneLearn</display-name>
  <description>
     Welcome to OneLearn
  </description>
  <session-config>
    <session-timeout>60</session-timeout>
  </session-config>

<servlet>
<servlet-name>HelloServlet</servlet-name>
<servlet-class>HelloServlet</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>HelloServlet</servlet-name>
<url-pattern>/HelloServlet</url-pattern>
</servlet-mapping>

<servlet>
<servlet-name>linegraph</servlet-name>
<servlet-class>com.FlexiApps.graphs.LineGraphServlet</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>linegraph</servlet-name>
<url-pattern>/linegraph</url-pattern>
</servlet-mapping>

<servlet>
<servlet-name>piechart</servlet-name>
<servlet-class>com.FlexiApps.graphs.PiechartServlet</servlet-class>
</servlet>

<servlet-mapping>
ssawqfxz<servlet-name>piechart</servlet-name>
<url-pattern>/piechart</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>welcome</servlet-name>
    <servlet-class>com.FlexiApps.utils.welcome</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>welcome</servlet-name>
    <url-pattern>/welcome</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.html</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.jpg</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.png</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.css</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.js</url-pattern>
</servlet-mapping>

<welcome-file-list>
        <welcome-file>index.html</welcome-file>
</welcome-file-list>

<jsp-config>
  <taglib>
    <taglib-uri>http://jakarta.apache.org/taglibs/log-1.0</taglib-uri>
    <taglib-location>/WEB-INF/lib/taglibs-log.tld</taglib-location>
  </taglib>
</jsp-config>

      <listener>
  <listener-class>
    org.apache.commons.fileupload.servlet.FileCleanerCleanup
  </listener-class>
</listener>

</web-app> 
```

即使在添加了欢迎文件并添加了建议的 servlet 映射之后，tomcat 似乎也没有检测到任何添加到 ROOT 文件夹的新文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:41:51.237

我找到了解决我的问题的方法：

1.  我在 Windows 的 Eclipse 上安装了 Tomcat6。
2.  我创建了一个动态 Web 项目。
3.  将我所有的静态内容放在 WebContent 文件夹中。
4.  运行服务器以验证一切正常。
5.  从项目中导出 WAR 文件，选中“针对特定服务器运行时优化”选项，运行时为“Apache Tomcat v6.0”。
6.  我清理了 ftp linux 服务器上的 /var/lib/tomcat6/webapps/ROOT 文件夹，并将所有其他设置重置为默认值。
7.  在 ROOT 文件夹中提取 WAR 文件。
8.  *使用： /etc/init.d/tomcat6 restart 重新*启动tomcat6
**   我可以在“http://myIP:8080/”下成功看到我的静态网站*   我希望tomcat6 在没有这个端口号的情况下工作。以下链接非常有用：[http ://bhou.wordpress.com/2012/03/09/how-to-install-and-configure-tomcat-6-in-ubuntu-server/](http://bhou.wordpress.com/2012/03/09/how-to-install-and-configure-tomcat-6-in-ubuntu-server/)*   通过输入“http://myIP/”可以导航到我的静态网站*

 *Eclipse 生成的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>StaticWebsite</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
</web-app> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T04:43:38.517

如果它是服务器上运行的唯一站点，最简单的方法是如前所述将文件复制到相同位置并使用与其起始站点相同的名称命名起始站点，在这种情况下，您不需要更改配置。否则请查看此链接：[Tomcat 6: How to change the ROOT application](https://stackoverflow.com/questions/715506/tomcat-6-how-to-change-the-root-application)

**编辑**（[从这里](http://wiki.apache.org/tomcat/EditDefaultJSPPage)）：

默认 Tomcat 主页的内容来自名为 org.apache.jsp.index_jsp 的 ROOT webapp servlet。您在 $CATALINA_HOME/webapps/ROOT/index.jsp 中看到的页面已被预编译为一个类文件 (org.apache.jsp.index_jsp.class)，该类文件存储在 ROOT webapp 的 JAR 文件 (catalina-root.jar) 中WEB-INF/lib 目录。由于这个 servlet，如果您更改它，Tomcat 将不会查看 ROOT Web 应用程序的 index.jsp 文件的内容。

更改 index.jsp 页面内容的最简单方法**是从 ROOT webapp 中删除这个 index_jsp servlet**。删除 index_jsp servlet 并重新启动 Tomcat 后，Tomcat 将在 ROOT 目录中看到 index.jsp 文件并将其即时编译为类文件。您现在可以编辑 ROOT/index.jsp 文件并通过重新加载“ [http://localhost:8080/](http://localhost:8080/) ”页面使这些更改立即生效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T04:46:11.607

[http://www.java-only.com/LoadTutorial.javaonly?id=26](http://www.java-only.com/LoadTutorial.javaonly?id=26)

这个博客似乎提供了关于使用 tomcat 提供静态内容的分步说明。*

# extjs - 如何更改 TabPanel extjs 的像素位置？

> ID：10891639
> 
> 赞同：-1
> 
> 时间：2012-06-05T04:38:35.530
> 
> 标签：extjs, extjs4, extjs3, extjs-mvc

谁能告诉如何在 extjs 中更改 Tabpanel 的像素位置

拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T10:51:22.850

问题不清楚，说说你做了什么？

如果您想将标签面板放在中心，请使用布局。如果您使用边框布局，请将其放在中心区域。检查[http://docs.sencha.com/ext-js/4-1/#!/example/layout/border.html](http://docs.sencha.com/ext-js/4-1/#!/example/layout/border.html)

# javascript - jQuery：删除浏览器生成的标题属性

> ID：10891642
> 
> 赞同：1
> 
> 时间：2012-06-05T04:39:18.163
> 
> 标签：javascript, jquery

我正在尝试删除浏览器生成的标题框，该标题框与具有标题属性的锚点一起出现。我想这样做的原因是它不会干扰我的工具提示 jQuery。

截至目前，我正在删除悬停时的标题属性，但在将自己从悬停状态中删除后，它不会重新分配它。怎么来的？

[http://jsfiddle.net/fj4xz/5/](http://jsfiddle.net/fj4xz/5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T04:44:28.290

那是因为

```
var title 
```

是在 HandlerIn 函数中，而不是在处理程序 out 中定义。最简单的解决方案是将 de var title 放在悬停函数之外，并将其分配到悬停处理程序中。

编辑：删除 Photon 所述的变量也是一种解决方案。我强烈建议您使用 vars。如果未定义全局变量，您的代码很快就会变得混乱且无法维护。但那只是我的个人意见。

[http://jsfiddle.net/RubenJonker/fj4xz/6/](http://jsfiddle.net/RubenJonker/fj4xz/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T04:45:06.077

那是因为您的`title`变量在`mouseenter`函数内，但您在`mouseleave`. 您应该将`title`变量移到`hover`方法之外。

```
var title;
$('a.tooltip').hover(function() {
    title = $(this).attr('title');
    var offset = $(this).offset();
    var width = $(this).outerWidth();
    var height = $(this).outerHeight();
    $content = $('<div class="tooltip">' + title + '</div>').fadeIn('fast');
    $(this).append($content);
    $(this).attr('title', '');
    $content.offset({
        top: offset.top + height,
        left: offset.left + (width - $content.outerWidth()) / 2
    });
}, function() {
    $(this).find('div').fadeOut('fast');
    $(this).attr('title', title);
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T04:45:15.050

你在那里声明`var title = $(this).attr('title');`你的第一个函数，但你的第二个函数不知道`title`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T04:45:40.687

它不会重新分配 title 值的原因是因为您在第一个函数中声明了 title 变量，这超出了第二个函数的范围。如果要保留原始标题值，则需要以第二个函数可以访问它的方式执行此操作。

相反，请尝试将其添加到数据值：

```
$(this).data("originalTitle", $(this).attr("title")); 
```

然后在你的第二个函数中重新分配它：

```
$(this).attr("title", $(this).data("originalTitle")); 
```

我会避免在页面上`title`设置和获取*n 个*链接的通用变量。将值存储为元素本身的数据对我来说似乎是一种更好的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T05:02:33.640

just **remove** all **var** declarations before variable name

it will become global variable [See this](http://jsfiddle.net/fj4xz/5/)

```
 $('a.tooltip').hover(function() {
        title = $(this).attr('title');
         offset = $(this).offset();
         width = $(this).outerWidth();
         height = $(this).outerHeight();
        $content = $('<div class="tooltip">' + title + '</div>').fadeIn('fast');
        $(this).append($content);
        $(this).attr('title', '');
        $content.offset({ top: offset.top+height, left: offset.left+(width-$content.outerWidth())/2 });
    }, function() {
        $(this).find('div').fadeOut('fast');
        $(this).attr('title', title);
    });​ 
```

# regex - Regex for uppercase Unicode does not match "Ó"?

> ID：10891643
> 
> 赞同：7
> 
> 时间：2012-06-05T04:39:26.417
> 
> 标签：regex, perl, unicode, utf-8

It seems that it does not recognize the accented Ó as uppercase

```
#!/usr/bin/env perl
use strict;
use warnings;
use 5.14.0;
use utf8;
use feature 'unicode_strings';

" SIMÓN " =~ /^\s+(\p{Upper}+)/u;
print "$1\n"; 
```

returns

```
SIM 
```

Perl should be able to use Unicode data, which already tags Ó as uppercase. From emacs `describe-char`

```
character code properties: customize what to show
  name: LATIN CAPITAL LETTER O WITH ACUTE
  old-name: LATIN CAPITAL LETTER O ACUTE
  general-category: Lu (Letter, Uppercase)
  decomposition: (79 769) ('O' '́') 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T05:13:23.333

You're missing `use open ':std', ':locale';` to properly encode your output.

If that doesn't work, your file isn't encoded using UTF-8 even though you tell Perl it is.

# jquery - 当它是颜色框中的最后一个图像时如何禁用下一个按钮

> ID：10891647
> 
> 赞同：0
> 
> 时间：2012-06-05T04:39:50.920
> 
> 标签：jquery, colorbox

我希望能够在颜色框中显示最后一个图像时禁用（不可点击）“下一步”按钮，这样它就不会返回到第一个图像。

“上一个”按钮也是如此。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T04:44:41.730

在您的颜色框设置中设置`loop`为`false`

[http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)检查此页面上的循环功能。

# html - facebook喜欢/发送按钮滑出身体后面/隐藏

> ID：10891650
> 
> 赞同：3
> 
> 时间：2012-06-05T04:40:04.747
> 
> 标签：html, css, facebook, facebook-like

当人们点击我标题中的点赞按钮或“发送”按钮时，新的“滑块”动作会下降，但会下降到标题下方的内容后面。

我试过给 facebook div 一个 1000 的 z-index，但似乎没有任何效果。[要查看操作中的错误，请在网站http://healthysurprise.com](http://healthysurprise.com)上按赞或发送

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T04:56:36.800

嗨，我喜欢一个人认为，如果你`**overflow:hidden**`在`.navbar-inner` css 类中删除而不是你的问题是入围名单

一样喜欢

```
.navbar-inner{
overflow:hidden;  // Remove this line in your css file 
} 
```

# android - 将字符串 0'-1" 写入 sqlite android 数据库

> ID：10891661
> 
> 赞同：0
> 
> 时间：2012-06-05T04:42:27.493
> 
> 标签：android, database, sqlite, insert, double-quotes

我似乎无法做到这一点，所以我问我在代码中忽略了什么。这是我的代码中的内容：

```
newLeaseData = "INSERT INTO " + enterLogLN + " (Date, "
            + "StockTank1Ft, StockTank1Inch, StockTank2Ft, StockTank2Inch, "
            + "StockTank3Ft, StockTank3Inch, StockTank4Ft, StockTank4Inch, "
            + "Change1, Change2, Change3, Change4) VALUES " 
            + "(" + today + ", '" + valueT1Ft + "', '" + valueT1Inch + "', '" + valueT2Ft 
            + "', '" + valueT2Inch + "', '" + valueT3Ft + "', '" + valueT3Inch 
            + "', '" + valueT4Ft + "', '" + valueT4Inch + "', " + difTotalT1 
            + ", " + difTotalT2 + ", " + difTotalT3 + ", " + difTotalT4 + ")"; 
```

一切正常，直到我得到字符串：difTotalT1、difTotalT2、difTotalT3 和 difTotalT4。每个字符串都设置为： 0'-1" 、 0'-2" 、 0'-3" 或 0'-4" ，当我尝试执行命令时：

```
myDataBase.execSQL(EnterLogDataOilActivity.newLeaseData); 
```

我的应用程序因此 logcat 错误而崩溃：

06-05 04:36:23.824: E/AndroidRuntime(1127): android.database.sqlite.SQLiteException: "'-1", 0'" 附近: 语法错误: INSERT INTO about (Date, StockTank1Ft, StockTank1Inch, StockTank2Ft, StockTank2Inch，StockTank3Ft，StockTank3Inch，StockTank4Ft，StockTank4Inch，Change1，Change2，Change3，Change4）值（'05_05_12'，'0'，'1'，'0'，'2'，'0'，'3'，'0' ', '4', 0'-1", 0'-2", 0'-3", 0'-4")

感谢您的帮助，我知道它必须很简单。我也尝试用单引号括住每个 difTotalT1 字符串，但这也不起作用（即 difTotalT1 = "'" + difTotalT1 + "'";）

这是我用来在 sqlite 中创建表的字符串：

```
newLeaseTable = "create table '" + leaseName + "' (_id integer primary key autoincrement,"
            + " Date TEXT, StockTank1Ft NUMERIC, StockTank1Inch NUMERIC,"
            + " StockTank2Ft NUMERIC, StockTank2Inch NUMERIC, StockTank3Ft NUMERIC,"
            + " StockTank3Inch NUMERIC, StockTank4Ft NUMERIC, StockTank4Inch NUMERIC,"
            + " Change1 TEXT, Change2 TEXT, Change3 TEXT, Change4 TEXT, User TEXT);"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:47:23.753

尝试以下方式，

```
String singleQuote = "'";
char doubleQuote = '"'; 
```

现在将您的变量与上述变量连接起来，如下所示

```
String Change3 = "0" + singleQuote + "-3" + doubleQuote;  // result = 0'-3" in variable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T04:51:07.397

你必须用反斜杠转义引号，即

```
difTotal = "0\\\'-1\\\""; 
```

当您使用它插入 MySQL 时，这会导致 diffTotal 为“0\'-1\””。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T03:03:48.753

我无法让它工作，所以我将我的 var 从一个字符串更改为一个 int，然后对其进行设置，以便它以不同的方式显示它。感谢您的帮助

# javascript - 从对象引用 requestanimationframe 时出错

> ID：10891662
> 
> 赞同：1
> 
> 时间：2012-06-05T04:42:33.737
> 
> 标签：javascript, requestanimationframe

我正在尝试在 Firefox 中调用 mozRequestAnimationFrame，但我不断收到错误消息。这是我的代码：

```
var obj={
    animFrame:mozRequestAnimationFrame
}

var animF=mozRequestAnimationFrame;

function a(){
 console.log('a called');   
}

animF(a);

obj.animFrame(a); 
```

错误发生在`obj.animFrame(a);`我收到以下错误消息：

> WrappedNative原型对象的非法操作

我在 SO：[requestAnimationFrame](https://stackoverflow.com/questions/6065169/requestanimationframe-with-this-keyword)上找到了这个线程 ，然后发现 requestanimationframe 可能没有正确的“this”上下文，所以我尝试了

```
obj.animFrame(a).bind(window); 
```

但仍然收到相同的错误消息。那么为什么会出现错误呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T05:23:41.787

我不知道为什么需要将指向`requestAnimationFrame`( `mozRequestAnimationFrame`) 的指针保存到某个对象中，但请尝试下一个代码以避免错误：

```
var obj={
    animFrame:mozRequestAnimationFrame.bind(window)
}

function a(){
 console.log('a called');   
}

obj.animFrame(a); 
```

# web-applications - 使用智能手机和 ipad 相机制作 _web_ 应用程序的选项

> ID：10891663
> 
> 赞同：0
> 
> 时间：2012-06-05T04:42:39.103
> 
> 标签：web-applications, cordova, smartphone

我目前正在考虑是否可以将其作为网络应用程序（不是本机应用程序或电话间隙应用程序，而是在智能手机/平板电脑浏览器中运行的 javascript/HTML5 应用程序）：

1.  用户拍照
2.  用户在服务器上分享图片并发表评论。

据我所知，网络应用程序无法访问设备的相机或相机胶卷，那么我有什么选择呢？

我目前最好的想法是建立一个邮件服务，用户可以将照片作为邮件发送，所以我的问题是：

1）我的假设是否正确？2) 有比邮件服务更好的主意吗？3）如果我决定采用原生方式，是否可以制作一个可以访问相机和照片的phonegap应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:47:51.077

是的，您可以创建一个可以访问设备相机胶卷的 Web 应用程序。不过，有一个问题。虽然照片上传适用于 Android，但它目前不适用于现有的 iOS Safari 浏览器。用户必须下载另一个浏览器才能上传图像（我相信 iCab 浏览器允许上传）。这可能会破坏交易，具体取决于您的用户是谁。如果您正在为公众构建，您不能很好地告诉他们使用不同的浏览器。如果您正在构建内部应用程序，您可能会侥幸成功。

这是此类应用程序的示例，这似乎正是您想要完成的：[http ://www.crazybikes.com/mrcjava/servlet/CBB2E.M07050s](http://www.crazybikes.com/mrcjava/servlet/CBB2E.M07050s)

**需要注意的一件事：**该示例应用程序看起来会有所不同，具体取决于用于访问它的设备。换句话说，如果在 PC 上访问该应用程序，它将看起来像一个 PC 应用程序。但是，如果您从智能手机访问它，它看起来就像一个智能手机应用程序。为了获得完整的体验，我建议通过智能手机访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:36:32.187

如果您谈论“在智能手机/平板电脑浏览器中运行的 javascript/HTML5 应用程序”，您是指语言环境部署的文件还是网络托管的文件？

如果您想使用网络托管文件，我会给用户上传照片的可能性。比处理电子邮件容易得多...如果是已部署的文件，我来自 WP7，但据我所知，至少 android 具有相同的功能，iOS 也应该是可能的，您可以使用浏览器控件和本机之间的桥梁应用程序来使用相机。但这正是PhoneGap 所做的……所以我更喜欢使用PhoneGap 而不必为我自己做这件事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T13:54:21.437

查看 Auriga 上传控制（免费），我用它在 iPad 上拍照并上传到我的网络服务器。一个缺点是您无法以编程方式访问相机胶卷，因此我无法在上传后以编程方式从相机胶卷中删除图片。

# python - __del__ 方法在涉及循环引用时不执行

> ID：10891664
> 
> 赞同：1
> 
> 时间：2012-06-05T04:42:41.910
> 
> 标签：python, circular-reference, del

我发现`__del__`当涉及循环引用时，自定义方法似乎没有执行。

这是一个示例代码：

```
class DelClass():
        def __init__(self,a):
            self.prop = a 

        def __del__(self):
            print 'del'

if __name__ == "__main__":

    dc1 = DelClass(None)
    dc2 = DelClass(dc1)#dc2 referring to dc1
    dc1.prop = dc2#dc1 referring to dc2, thus creating circular reference
    del dc1#not executing the custom __del__ method

    dc = DelClass(1)
    del dc#executing the custom __del__ method 
```

为什么会发生这种情况？

**编辑：** 感谢 BrenBarn。我找到了原因。

`del something`仅将引用计数减`something`1。

`__del__`只有当引用计数达到 0 时才会执行。

这是一个测试代码：

```
import gc

class DelClass():
    def __init__(self,name,a):
        self.name = name
        self.prop = a

    def __del__(self):
        print '#####deleting',self.name

dc1 = DelClass("dc1",None)
dc2 = DelClass("dc2",dc1)#dc2 referring to dc1
dc1.prop = dc2#dc1 referring to dc2, thus creating circular reference
print "before deleting dc1,reference count:",len(gc.get_referrers(dc1))
del dc1#not executing the custom __del__ method
print "after deleting dc1, reference count:",len(gc.get_referrers(dc2.prop))
print "deleting the reference held by dc2"
del dc2.prop
print dc2 
```

输出是：

```
before deleting dc1,reference count: 2
after deleting dc1, reference count: 1
deleting the reference held by dc2
#####deleting dc1
<__main__.DelClass instance at 0x9316dec>
#####deleting dc2 
```

又出现了一个问题：

为什么输出中的最后一行（`#####deleting dc2`）会发生？

发生了一些隐式`del`操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T04:47:57.370

阅读[垃圾收集器](http://docs.python.org/library/gc.html#gc.garbage)的[文档`__del__`](http://docs.python.org/reference/datamodel.html#object.__del__)。 不会做你可能认为它会做的事情，. 在执行 a 时不一定会调用，并且在循环引用的情况下可能永远不会调用。所做的就是将引用计数减 1。`__del__``del``__del__``del``del`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-26T16:49:28.080

自 python 3.4 以来，这不再是真的。参见[PEP-442](https://www.python.org/dev/peps/pep-0442/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T05:25:34.910

阅读此[链接](https://stackoverflow.com/questions/6104535/i-dont-understand-this-python-del-behaviour)。我想这会对你有所帮助。

> `del`不打电话`__del__`
> 
> `del`以您使用的方式删除局部变量。`__del__`当对象被销毁时调用。Python 作为一门语言不保证它什么时候会销毁一个对象。

----更新编辑----

回答`Some implicit del operation happens?`

阅读此[链接](https://stackoverflow.com/a/9796689/379941)将对您有所帮助

> Python 不保证什么时候`__del__`被调用，或者它是否被调用。事实上，`__del__`如果对象是引用循环的一部分，则不太可能调用方法，因为即使整个循环被清理干净，Python 也无法决定在哪里中断循环以及`__del__`方法的顺序（如果有）应该被调用。由于`__del__`'s 相当古怪的语义（为了调用`__del__`对象的引用计数暂时增加，并且该`__del__`方法可以通过将引用存储在其他地方来防止对象的破坏），在其他实现中发生的事情有点废话。（我不记得当前 Jython 中的确切细节，但它在过去已经改变了几次。）
> 
> 也就是说，在 CPython 中，如果`__del__`被调用，它会在引用计数降至零时立即调用（因为引用计数是`__del__` 调用方法的唯一方式，而 CPython 调用的唯一机会`__del__`是在实际引用计数发生更改时。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T04:46:58.447

因为垃圾收集器无法知道哪个可以安全地先被删除。

# drupal-7 - 如何在 drupal 多站点环境中同步内容类型、分类、菜单？

> ID：10891668
> 
> 赞同：1
> 
> 时间：2012-06-05T04:43:47.343
> 
> 标签：drupal-7

我有一个 drupal 7 多站点设置。例如，我有 site1.com 和 site2.com。我为 site1.com 手动创建了一个新的内容类型（我们称之为“书籍”），并希望与 site2.com 同步/共享它，而无需在 site2.com 中手动重新创建“书籍”。我怎么能做到这一点？非常感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-05-14T01:28:34.080

使用[Features](https://www.drupal.org/project/features)，它将您的内容类型导出为代码，以便您可以轻松地在站点之间导出它。

# facebook - 画布演示（runwithfriends）总是重定向到我自己的 GAE 下的主页

> ID：10891670
> 
> 赞同：0
> 
> 时间：2012-06-05T04:44:16.740
> 
> 标签：facebook, google-app-engine

我正在使用[runwithfriends](http://apps.facebook.com/runwithfriends)示例应用程序来学习画布编程和 GAE。我可以将示例代码上传到 GAE，而不会出现任何错误。这是我的 config.py 和 app.yaml 文件：

### 配置文件：

```
# Facebook Application ID and Secret.
FACEBOOK_APP_ID = ''
FACEBOOK_APP_SECRET = ''

# Canvas Page name.
FACEBOOK_CANVAS_NAME = 'blah'

# A random token for use with the Real-time API.
FACEBOOK_REALTIME_VERIFY_TOKEN = 'RANDOM TOKEN'

# The external URL this application is available at where the Real-time API will
# send it's pings.
EXTERNAL_HREF = 'http://blah.appspot.com'

# Facebook User IDs of admins. The poor mans admin system.
ADMIN_USER_IDS = [''] 
```

### 应用程序.yaml

```
application: blah
version: 1
runtime: python
api_version: 1

handlers:
- url: /(.*\.(html|css|js|gif|jpg|png|ico))
  static_files: static/\1
  upload: static/.*
  expiration: "1d"

- url: .*
  script: main.py

- url: /task/.*
  script: main.py
  login: admin 
```

在他们的 GAE 上访问演示应用程序就可以了。当我采用[完全相同的代码](https://github.com/fbsamples/runwithfriends)时，除了需要在我自己的 GAE 帐户下运行的更改之外，该应用程序将无法运行。我可以使用我的帐户登录应用程序，该应用程序会显示在我的应用程序菜单下。所以，OAuth 很好。每次我访问主页时，我总是被重定向到显示我使用该应用程序的 iframe（无法显示该图像，当我键入此内容时，runwithfriends 应用程序已超出配额）但不会转到此 iframe：

![runwithfriends 应用程序窗口](../Images/6f03dc6db2bbdd807b2626f8dc9a6e90.png)

一点也不。

我已经查看并了解了 url 路由的工作原理：

```
def main():
    routes = [
        (r'/', RecentRunsHandler),
        (r'/user/(.*)', UserRunsHandler),
        (r'/run', RunHandler),
        (r'/realtime', RealtimeHandler),

        (r'/task/refresh-user/(.*)', RefreshUserHandler),
    ]
    application = webapp.WSGIApplication(routes,
        debug=os.environ.get('SERVER_SOFTWARE', '').startswith('Dev'))
    util.run_wsgi_app(application) 
```

所有的处理程序都在那里，看起来像是正确的 post/get 方法。我的 GAE 实例中也没有记录任何错误，例如 404 或 405。当我第一次使用`http://localhost:8080`时，我看到很多 200 秒，没有别的。

我开始使用 dev_appengine.py，但由于我的 HTTPS 安全设置，不得不将开发转移到 GAE。我暂时禁用了 HTTPS，但无论如何仍然总是被重定向到 apps.facebook.com/path，并且无法将我的所有开发都保留在 dev_appengine.py 中。不知道是不是和我的问题有关。

由于演示有效（当不超过配额时），我确定问题出在我自己的 GAE 实例，或 FB 中的配置以使用我的 GAE，我只是一辈子都想不通。我正在使用带有 PyDev 和 GAE 插件的 Eclipse。

### 更新

添加应用程序的 FB 配置和登录应用程序后显示的窗口。

沙盒：

![沙盒](../Images/4fa34f90c07d73eebe7a18d028361b3b.png)

重定向： ![重定向](../Images/3f63148f54e5c4eb2053d5e26a5c310c.png)

在我的 GAE 下运行，这是唯一返回的页面：

![只显示页面](../Images/625d8259481d45e7d3cc19f746f40617.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:57:48.907

你能发布你的错误实际上是什么样的吗？

听起来您没有正确设置 FB 重定向。或者您的 FB 可能设置在沙盒中，并且您正尝试使用非沙盒用户访问您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:13:59.073

我决定删除我的测试 FB 应用程序并重新创建它。当我去输入我的密钥/秘密值时，我发现了我的错误。我的问题是我的 FB APP ID 和 SECRET - 单引号之间都有一个空格，如下所示：

```
# Facebook Application ID and Secret.
FACEBOOK_APP_ID = ' xxxxxxxxxxxxxxxxx'
FACEBOOK_APP_SECRET = ' xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' 
```

有空间把事情搞砸了，一旦我在 conf.py 中输入新值，我发现了额外的空间。正确的常量声明：

```
# Facebook Application ID and Secret.
FACEBOOK_APP_ID = 'xxxxxxxxxxxxxxxxx'
FACEBOOK_APP_SECRET = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' 
```

测试 FB 应用程序现在可以工作了。

# ruby - 为什么 .rvmrc 不能在 Ubuntu 上运行？

> ID：10891673
> 
> 赞同：0
> 
> 时间：2012-06-05T04:44:21.283
> 
> 标签：ruby, rake, rvm

我正在尝试让 Ruby 和 RVM 在我的 Ubuntu 系统上运行，但我遇到了奇怪的行为。我是 Ruby 的新手，所以我可能错过了一些基本的东西。

我将 octopress 克隆到一个文件夹中，其中有一个`.rvmrc`文件包含：

```
rvm use 1.9.2 
```

问题是当我进入文件夹时，文件没有被考虑在内。如果我运行：

```
ruby --version 
```

我得到：

```
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux] 
```

我试过了：

```
./.rvmrc 
```

和：

```
rvm reload 
```

它似乎工作，因为我得到：

```
Using /usr/share/ruby-rvm/gems/ruby-1.9.2-p320
Running /usr/share/ruby-rvm/hooks/after_cd
Using /usr/share/ruby-rvm/gems/ruby-1.9.2-p320 
```

因此。但是，`ruby --version`再次运行不会改变任何事情。

真正奇怪的是，如果我使用`ssh`.

[我使用“在 Linux 上安装 RVM](http://ruby.about.com/od/rubyversionmanager/ss/installrvmlinux_4.htm) ”安装了 Rake 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:53:28.960

由于最近 RVM 预期加载方式的变化（该链接中的方法不正确 IIRC），您可能会遇到问题。按照[https://rvm.io/rvm/upgrading/](https://rvm.io/rvm/upgrading/)中的步骤操作。此外，用于`rvm get stable --auto`正确配置您的 bash 脚本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T19:54:27.740

终于在这里找到了解决方案：

[使用 RVM 安装了 Ruby 1.9.3，但命令行不显示 ruby​​ -v](https://stackoverflow.com/questions/9056008/installed-ruby-1-9-3-with-rvm-but-command-line-doesnt-show-ruby-v/9056395#9056395)

感谢 Jim 将我指向文档。我在那里发现了很多很棒的东西:)。

# makefile - makefile - 如何将所有子目录中的对象链接在一起？

> ID：10891680
> 
> 赞同：0
> 
> 时间：2012-06-05T04:44:49.623
> 
> 标签：makefile

我正在为一个项目编写一个 makefile 框架。比如说，我在顶部目录中有一个 main.c，还有许多子目录，每个子目录都包含一个 C 文件。为了将所有目标文件链接到goter，我在顶部makefile中分配了一个初始值：

```
export TARGET_LIST := main.o 
```

在每个子目录中，我将它们附加到列表中：

```
# sub1/Makefile
TARGET := a.o                                                                                                                                                          
TARGET_LIST += $(TARGET) 
```

返回顶部目录时，TARGET_LIST 仍然在 main.o 中。我确定所有子目录都已输入。有什么好的方法可以做到这一点吗？

顶级makefile：

```
all: main

export TOP_DIR = $(shell pwd)
export TARGET_LIST := main.o
SUBDIRS := a b c d

CFLAGS := -Iinc

all:main

main:main.o subdirs
        cc $(TARGET_LIST) -o $@ $(CFLAGS)

subdirs: $(patsubst %, _dir_%, $(SUBDIRS))

$(patsubst %, _dir_%, $(SUBDIRS)) :
        $(MAKE) -C $(patsubst _dir_%, %, $@) $(TGT) 
```

规则.make：

```
all:$(TARGET)

%.o:%.c
        @echo $(TARGET_LIST)
        $(CC) -c $^ -o $@ $(CFLAGS) $(LDFLAGS) 
```

子目录生成文件：

```
TARGET := a.o
TARGET_LIST += $(TARGET)
CFLAGS := 
LDFLAGS := 

include $(TOP_DIR)/Rules.make 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:53:44.773

帮自己一个忙，如果可以的话，使用高级构建系统。几乎任何东西都比手写的 Makefile 更好。例如[CMake](http://cmake.org)、[SCons](http://scons.org)或[waf](http://code.google.com/p/waf/)是一些更受欢迎的替代品。

# winapi - 将 IDirect3DSurface 的数据复制到另一个使用两个 Directx 设备创建的 IDirect3DSurface

> ID：10891683
> 
> 赞同：0
> 
> 时间：2012-06-05T04:45:09.470
> 
> 标签：winapi, directx, direct3d, directx-9, direct3d9

有一个带有自己的 Direct3D 设备的窗口，我们称之为 mainWindow。mainWindow 及其东西是由其他人创建的。他们给了我一些他们在主窗口上绘制的 Direct3D 表面（IDirect3DSurface9 指针）。
我已经从他们的一个回调中启动了一个线程，并使用 winAPI 创建了我自己的窗口。[（我在这个](https://stackoverflow.com/q/10513716/1123507)问题上有一点类似的情况）
我想在我的窗口上绘制那些 RTT 输出。所以我试图将表面复制到我在自己的directx设备中创建的表面/纹理中，该设备在我的窗口上绘制。

我在尝试这样做时发现的一些东西，

*   这可以使用`D3DXSaveSurfaceToFileInMemory(...)`和`D3DXCreateTextureFromFileInMemory(...)`函数轻松完成。
*   `StrechRect(...)`功能不适用于使用两个设备创建的两个表面。

我尝试锁定表面并将数据从一个复制到另一个，但它似乎不起作用。但我会再试一次。（同时锁定两个不同设备的表面是否非法？）

你们有什么方法知道或建议这样做吗？

---编辑---
MSDN说（[链接到页面](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174363%28v=vs.85%29.aspx)）

> 在 Windows Vista 中，CreateTexture 可以从系统内存指针创建纹理，从而允许应用程序更灵活地使用、分配和删除系统内存。例如，一个应用程序可以传递一个 GDI 系统内存位图指针并围绕它获得一个 Direct3D 纹理接口。将系统内存指针与 CreateTexture 一起使用具有以下限制。
> 
> *   纹理的间距必须等于宽度乘以每个像素的字节数。
> *   仅支持具有单个 mipmap 级别的纹理。Levels 参数必须为 1。
> *   Pool 参数必须是 D3DPOOL_SYSTEMMEM。
> *   pSharedHandle 参数必须是指向可以保存系统内存点的缓冲区的有效指针；*pSharedHandle 必须是指向系统内存的有效指针，其大小以纹理宽度 * 纹理高度 * 纹理格式的每像素字节数为单位。

我找不到以这种方式创建纹理的任何示例，但我尝试这样做，我得到的只是一个充满噪音的输出，没有别的。如果有人可以帮助我，我想我的问题会在一定程度上得到解决....msdn在这里所说的有什么好的例子..？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T04:55:16.547

如果你在 vista/win7/win8，你可以使用[Sharing_Resources](http://msdn.microsoft.com/en-us/library/windows/desktop/bb219800%28v=vs.85%29.aspx#Sharing_Resources)然后你就不需要任何副本了。

# tridion - 如何在 Tridion 中获取当前登录用户的用户 ID？

> ID：10891689
> 
> 赞同：2
> 
> 时间：2012-06-05T04:45:46.737
> 
> 标签：tridion, tridion-2011

我在 Tridion 中实现了一个功能区工具栏按钮。作为其中的一部分，我需要遍历一些需要有效会话的组件。

要在 Tridion 中创建会话，我需要一个用户 ID。如何获取当前用户的用户 ID（windows 用户 ID）？

下面的命令会帮助我们获取用户信息吗？如果是这样，请让我知道该命令的用法。

```
getJsonUserSettings(); 
```

提前致谢。早期反应表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:51:06.157

在 c# 中，您可以使用`Tridion.Web.UI.Core.Utils.GetUserName()`

这将返回用户的登录名，您需要 - 例如 - 来模拟。

我在 Chrome 的控制台中摸索了几秒钟，然后想出了这个用户名——可能有更简单的方法。

```
Tridion.ContentManager.UserSettings.getInstance().getUserName() 
```

编辑：正如弗兰克所说，这是[如何在 JavaScript 代码中检索当前登录用户的 TCM URI 的副本？](https://stackoverflow.com/questions/10171158/how-can-i-retrieve-tcm-uri-of-the-currently-logged-in-user-in-javascript-code)

在发布之前开始搜索并不是一个坏主意......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T06:06:53.463

Try this way to get the User ID:

```
Tridion.UI.UserSettings.getJsonUserSettings(true).User["@ID"] 
```

# c# - 过程或函数指定了太多参数 #2

> ID：10891693
> 
> 赞同：5
> 
> 时间：2012-06-05T04:46:09.443
> 
> 标签：c#

嗨，我尝试将数据插入数据库，使用类文件。我有两个类，其中一个是 Material.cs 和 DataAccessLayer.cs。但是执行我的代码时出现错误，例如**Procedure or function sp_insert_componet has too many arguments specified.""**

//来自 Material.cs

```
private string strCREATEDBY;
private string strCREATEDDATE;
private string strUPDATEDBY;
private string strUPDATEDDATE;
private string strSTATUS;

public string Createdby
{
    get
    {
        return strCREATEDBY;
    }
    set
    {
        strCREATEDBY = value;
    }
}
public string Createddate
{
    get
    {
        return strCREATEDDATE;
    }
    set
    {
        strCREATEDDATE = value;
    }
}
public string Updateddate
{
    get
    {
        return strUPDATEDDATE;
    }
    set
    {
        strUPDATEDDATE = value;
    }
}
public string Updatedby
{
    get
    {
        return strUPDATEDBY;
    }
    set
    {
        strUPDATEDBY = value;
    }
}
public string Status
{
    get
    {
        return strSTATUS;
    }
    set
    {
        strSTATUS = value;
    }
}

//Maingroup
//created by : ramya
//created date:15.2.2012
private string strIDENTIFY;
private string strNO;
private string strNAME;
private string strMAINIDENTIFICATION;

public string Identification
{
    get
    {
        return strIDENTIFY;
    }
    set
    {
        strIDENTIFY = value;
    }
}
public string NO
{
    get
    {
        return strNO;
    }
    set
    {
        strNO = value;
    }
}
public string NAME
{
    get
    {
        return strNAME;
    }
    set
    {
        strNAME = value;
    }
}
public string Mainidentify
{
    get
    {
        return strMAINIDENTIFICATION;
    }
    set
    {
        strMAINIDENTIFICATION = value;
    }
}
private string strItemtype;
public string Itemtype
{
    get
    {
        return strItemtype;
    }
    set
    {
        strItemtype = value;
    }
}
private string strSitename;
public string Sitename
{
    get
    {
        return strSitename;
    }
    set
    {
        strSitename = value;
    }
}

public int Savecomponent()
{
    objDL.Addparam("@Createdby", Createdby);
    objDL.Addparam("@Createddate", Createddate);
    objDL.Addparam("@Sitecode", NO);
    objDL.Addparam("@Itemtype", Itemtype);
    objDL.Addparam("@Status", Status);
    objDL.Addparam("@Maingroupsno", Mainidentify);
    objDL.Addparam("@Subgroupsno", Identification);
    objDL.Addparam("@Componetcode",NAME);
    objDL.Addparam("@Sitename", Sitename);
    int save = objDL.insert("sp_insert_componet");
    if (save > 0)
    {
        return 1;
    }
    else
    {
        return 0;
    }
} 
```

//来自DataAccessLayer.cs

```
public int insert(string strInsert)
{
    try
    {
        Con.Open();
        cmd.Connection = Con;
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.CommandText = strInsert;
        int RetInsert = cmd.ExecuteNonQuery();
        return RetInsert;
    }
    catch (Exception ex)
    {
        throw ex;
    }
    //got error in this finally block

    finally
    {
        Con.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T04:48:20.237

您正在指定存储过程不期望的参数。删除任何未由存储过程定义的参数

确保块中的每个参数

```
objDL.Addparam("@Createdby", Createdby);
objDL.Addparam("@Createddate", Createddate);
objDL.Addparam("@Sitecode", NO);
objDL.Addparam("@Itemtype", Itemtype);
objDL.Addparam("@Status", Status);
objDL.Addparam("@Maingroupsno", Mainidentify);
objDL.Addparam("@Subgroupsno", Identification);
objDL.Addparam("@Componetcode",NAME);
objDL.Addparam("@Sitename", Sitename); 
```

在存储过程中有对应的参数。删除过程中未定义的任何参数

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T23:33:09.787

如果参数的数量相同，则尝试检查它们的类型。

> **参数类型必须与表中相同**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-11T11:21:46.387

如果使用不同的数据库环境，请检查您的数据库连接。

我遇到了这个问题，因为我的配置文件指向了错误的数据库，该数据库具有相同的 SP 和不同的参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T04:48:47.967

问题是您在存储过程中定义的输入参数较少`sp_insert_componet`。

将 C# 代码中的参数数量与存储过程中的参数数量进行比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-06T11:28:39.327

不，即使参数完全相同，您也会收到此错误，对于 SQL Server 上的存储过程中的 SQL INSERT。

事实证明，您还必须在存储过程中为要插入新记录的表的 PRIMARY KEY 定义一个参数。在我的情况下，@CompanyID 没有作为参数传递，但没有定义它，就会发生“参数过多”错误。如果有帮助的话，CompanyID 字段的“身份”设置为“true”，它会随着每条新记录而增加。

更改程序 [dbo].[FormViewCompanies_Insert](

@CompanyID 作为 INT。/* 不作为参数传递 */

@MemberID AS INT, /* 作为参数传递*/@ChapterID AS INT, /*作为参数传递 */ ...

# iphone - 如何在uiscrollview中滑动图像时添加短声音

> ID：10891700
> 
> 赞同：0
> 
> 时间：2012-06-05T04:46:55.483
> 
> 标签：iphone, ios, uiscrollview, audio

> **可能重复：**
> [如何在 uiscrollview 中滑动图像时添加短声音](https://stackoverflow.com/questions/10891522/how-to-add-short-sounds-while-swiping-images-in-uiscrollview)

这是我的代码

在这里，我想在滑动图像时添加声音。

```
int x,y,count;
    but=[[NSMutableArray alloc]initWithObjects:[UIImage imageNamed:@"top2.png"],[UIImage imageNamed:@"top1.png"],[UIImage imageNamed:@"top3.png"],[UIImage imageNamed:@"top4.png"],[UIImage imageNamed:@"top5.png"],[UIImage imageNamed:@"top6.png"],[UIImage imageNamed:@"top7.png"],[UIImage imageNamed:@"top8.png"],nil];

    x=0;
    y=0;
    count=0;
    for (int i=0; i<=7; i++) {
        count++;
        for (int i=7; i>=0; i--) {
            count--;

            UIButton *but2=[[UIButton alloc]initWithFrame:CGRectMake(x, y, 320, 141)];

            //[but setImage:[UIImage imageNamed:@"mzl.jpg" ]forState:UIControlStateNormal];
            [but2 setImage:[but objectAtIndex:i] forState:UIControlStateNormal];
            NSLog(@"%@",but);

            x=x+320;
            // x=0;
            //y=0;

            if(count==8)
            {
                //count++;
            }
            //[scr addSubview:images];
            //[images release];
            [scrollview1 addSubview:but2];
        }
    }
    scrollview1.pagingEnabled=TRUE;
    [scrollview1 setContentSize:CGSizeMake(x, y)]; 
```

# android - 在 Moto Xoom 中获得 545 X 320 的屏幕分辨率

> ID：10891702
> 
> 赞同：1
> 
> 时间：2012-06-05T04:47:01.830
> 
> 标签：android, android-3.0-honeycomb, screen-resolution, motorola, motorola-droid

将 Moto Xoom 更新到 3.2 后，我的屏幕分辨率是 545 X 320 而不是 1280 X 800？

这是正常的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:56:54.400

将此行放入清单文件并检查它是否解决了您的问题：

```
<supports-screens android:smallScreens="true" android:normalScreens="true" android:largeScreens="true" android:anyDensity="true"/> 
```

把它放在**清单**元素中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:39:54.033

通过放置以下代码行并使用 Android 3.2 目标进行编译解决了该问题。

```
<supports-screens android:largeScreens="true"
             android:smallScreens="true"
             android:anyDensity="true"
             android:normalScreens="true"
             android:xlargeScreens="true"/> 
```

# javascript - 具有嵌套数组的绝对无引用数组副本

> ID：10891706
> 
> 赞同：2
> 
> 时间：2012-06-05T04:47:20.107
> 
> 标签：javascript, arrays, reference, deep-copy

起初我以为`arr.slice(0)`是在做一个*深度*未引用的副本，但它实际上只是在做一个*浅层*的未引用副本，所以如果数组包含嵌套数组，[它们仍然被引用](https://stackoverflow.com/questions/10458356/unreferenced-array-not-so-unreferenced-after-slice)：

```
var a = [1,2]
var b = [3,4]
var c = [a,b]
var d = c.slice(0)
d[0] === a       // true, which means it is the /same/ object
d[0][0] = "Hi!"
a                // ["Hi!", 2] 
```

[[（示例来源）](https://stackoverflow.com/a/10458391/908879)]

当您知道数组的结构时，提供的链接上的解决方案相当容易（只需`.slice(0)`再次嵌套数组即可解决问题），但如果您不知道嵌套数组的结构如何，它会变得复杂。

我的第一个想法是在所有层面上循环整个事情，直到找不到~~大批~~目的。

*   这种方法可以接受吗？
*   是否有一些我缺少的内置功能？

我简直不敢相信我需要为复制一个愚蠢的数组做所有这些

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T05:05:55.937

就像 nonnb 建议的那样，序列化/反序列化周期将导致深层复制。你可以这样做：

```
//a is some array with arbitrary levels of nesting.
var c = JSON.parse(JSON.stringify(a)); 
```

# android - 如何创建 ExpandableListView

> ID：10891709
> 
> 赞同：-1
> 
> 时间：2012-06-05T04:47:45.743
> 
> 标签：android, expandablelistview

我想创建 ExpandableListView。它包含 2 行，行子是 textviews & imagebutton & toggle button。单击图像按钮时，子视图应显示到特定的选定行。

我应该如何使用 ExpandableListView 做到这一点？

我的问题是我必须在一行中设置 2 行，并且应该保持在 for 循环中。我应该如何使用 ExpandableListView 执行此操作。？每行又有 2 行。这是我正在动态添加的...以前我是用 tablelayout 完成的，但我没有按照我的要求得到正确的结果。

所以有些人在这个论坛上建议，最好使用 listview 而不是 tablelayout ..

谁能帮帮我吗..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:57:10.310

您可以使用布局充气器来设置任意数量的行。我认为，您不必动态地执行此操作。

# java - 创建并向其添加数据后无法“读取”文本文件

> ID：10891712
> 
> 赞同：1
> 
> 时间：2012-06-05T04:48:01.160
> 
> 标签：java, swing, io

我收到了有关如何附加文本文件的帮助，但现在看来我已经破坏了其他东西。我无法“读取”该文件。

我想做的是：

1.  从 GUI 文本字段输入数据
2.  单击保存按钮（创建文件并将数据附加到 .txt 文件）
3.  能够从文件读回面板

我又在做蠢事了，我害怕。

下面是我的 GUI、CreateTextFile 和 ReadTextFile 的 java 代码

```
import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.SQLException;

import javax.swing.*;

public class DonorGUI extends JFrame
{

    // Components
    private JPanel panel;
    private JTextArea results;
    private JButton entryButton;
    private JButton exitButton;
    private JButton clearButton;
    private JButton saveButton;
    private JButton openButton;
    private JTextField donorField;
    private JTextField charityField;
    private JTextField pledgeField;

    //create variables
    String[] donorName = new String[20];
    String[] charityName = new String[20];
    double[] donationAmt = new double[20];
    int i = 0;

    // Constants for the window size
    private final int WINDOW_WIDTH = 750;
    private final int WINDOW_HEIGHT = 525;

    //Constructor
    public DonorGUI(){

        // Set the title.
        setTitle("Wounded Warrior Donation Tracker.");

        // Specify what happens when the close button is clicked.
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // Build the panel that contains the other components.
        buildPanel();

        // Add the panel to the content pane.
        add(panel);

        // Size and display the window.
        setSize(WINDOW_WIDTH, WINDOW_HEIGHT);
        setVisible(true);
    }

    //The buildPanel method creates a panel containing other components.
    private void buildPanel(){

        // Create labels to display instructions.
        JLabel message1 = new JLabel("Name of the Donor:");
        JLabel message2 = new JLabel("Name of the Charity:");
        JLabel message3 = new JLabel("Amount of the Pledge:");

        //instantiate the results area
        results = new JTextArea(25,60);
        results.setEditable(false);
        results.setWrapStyleWord(true);
        results.setLineWrap(true);
        results.setBorder(BorderFactory.createLoweredBevelBorder());

        // Create text fields to receive user input
        donorField = new JTextField(10);
        charityField = new JTextField(10);
        pledgeField = new JTextField(10);

        //create the user buttons to cause action
        entryButton = new JButton("Enter Donation.");
        entryButton.addActionListener(new EntryButtonListener());
        exitButton = new JButton("EXIT");
        exitButton.addActionListener(new ExitButtonListener());
        clearButton = new JButton ("Clear Fields");
        clearButton.addActionListener(new ClearButtonListener());
        saveButton = new JButton ("Save");
        saveButton.addActionListener(new SaveButtonListener());
        openButton = new JButton ("Open");
        openButton.addActionListener(new OpenButtonListener());

        // Create a panel.
        panel = new JPanel();
        panel.setBackground(Color.orange);

        //set the LayoutManager
        panel.setLayout(new FlowLayout());

        // Add the labels, text fields, and button to the panel.
        panel.add(message1);
        panel.add(donorField);
        panel.add(message2);
        panel.add(charityField);
        panel.add(message3);
        panel.add(pledgeField);
        panel.add(results);
        panel.add(entryButton);
        panel.add(clearButton);
        panel.add(saveButton);
        panel.add(openButton);
        panel.add(exitButton);      
    }
    private class EntryButtonListener implements ActionListener {

        public void actionPerformed(ActionEvent e) {

            donorName[i] = donorField.getText();
            charityName[i] = charityField.getText();
            if (donationAmt(pledgeField.getText())) {
                  donationAmt[i] = Double.parseDouble(pledgeField.getText());
            }else{
                donorField.setText("");
                charityField.setText("");
                pledgeField.setText("");
            }
            results.append(donorName[i]+" "+charityName[i]+" "+donationAmt[i]+"\n ");
            donorField.setText("");
            charityField.setText("");
            pledgeField.setText("");
            i++;
        } 
    }
    public boolean donationAmt(String amount) {

        if(amount==null || amount=="" || amount.length()<1){  //checking for empty field
            JOptionPane.showMessageDialog(null, "Please enter amount pledged");
            return false;
        }
        for(int i = 0; i < amount.length(); i++){  //verifying dollar amount entered as number
                if (!Character.isDigit(amount.charAt(i)) && amount.charAt(i)!='.'){ 
                    JOptionPane.showMessageDialog(null, "Invalid input.");
                    return false;
                } 
        }
        return true;

    }  
    private class ClearButtonListener implements ActionListener {

        public void actionPerformed (ActionEvent e) {
            donorField.setText("");
            charityField.setText("");
            pledgeField.setText("");
            }
    }
    private class ExitButtonListener implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            System.exit(0);
        }
    }
    private class SaveButtonListener implements ActionListener {

        public void actionPerformed(ActionEvent e) {

            CreateTextFile cr = new CreateTextFile();
            cr.openFile();
            cr.addRecords(donorName, charityName, donationAmt);
            cr.closeFile();

            JavaDBClass db = new JavaDBClass();

        }

    }
    private class OpenButtonListener implements ActionListener {

        public void actionPerformed(ActionEvent e) {

            ReadTextFile read = new ReadTextFile();
            read.openFile();
            DonorGUI donor = read.readRecords();
            read.closeFile();           
            JavaDBClass db = new JavaDBClass(donor);
            for(int i = 0;i<donor.donationAmt.length;i++){

                try {
                    results.append(db.showTable()[i]+"\n");
                } catch (SQLException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }

            }
        }

    }

    /* Application method */
    public static void main(String[] args){

        DonorGUI rpc = new DonorGUI();
    }
} 
```

创建文本文件 JAVA 代码：

```
/** This will create a text file based on user input and save it as donations.txt.
 * 
 */
import java.io.FileNotFoundException;
import java.util.Formatter;
import java.util.FormatterClosedException;
import java.util.NoSuchElementException;

public class CreateTextFile {

    //object that outputs text to a file
    private Formatter output;

    //try opening a file
    public void openFile(){

        try
        {
            output = new Formatter(new FileOutputStream("C:/temp/donations.txt", true));
        }
        catch (SecurityException securityException)
        {
            System.out.println("You cannot write to this file.");
        }
        catch (FileNotFoundException notFoundException)
        {
            System.out.println("You couldn't open or find the file.");
        }

    }
    //try writing to the file
    public void addRecords(String[] donor, String[] charity, double[] donation){

                try{
                     for (int j=0; j<donor.length; j++) {
                         if (donor[j] != null) {
                            output.format("\n%s %s %.2f",donor[j],charity[j],donation[j]);

                           }
                     }
              }

              catch (FormatterClosedException formatterClosedException){

                     System.out.println("You couldn't write to this file.");

              }

              catch (NoSuchElementException elementException){

                     System.out.println("Invalid Input.");

              }

       }
    //try closing the file
    public void closeFile(){
        if(output!=null)
            output.close();
    }
} 
```

阅读文本文件 JAVA 代码：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class ReadTextFile {

    private Scanner input;

    //try to open the file
    public void openFile(){
        try{
            input = new Scanner(new File("C:/temp/donations.txt"));
        }
        catch (FileNotFoundException fileNotFoundException)
        {
            System.out.println("File not found.");
            System.exit(1);
        }
    }
    //try to read from the file
    public DonorGUI readRecords(){

        DonorGUI gui = new DonorGUI();

        while(input.hasNext())
        {
            for(int j = 0;j<20;j++){
            gui.donorName[j] = input.next();
            gui.charityName[j] = input.next();
            gui.donationAmt[j] = input.nextDouble();
            }
        }
        return gui;

    }
    //try to close the file
    public void closeFile(){
        if(input!=null)
            input.close();

    }
} 
```

收到的错误：

```
Exception in thread "AWT-EventQueue-0" java.util.InputMismatchException
    at java.util.Scanner.throwFor(Scanner.java:840)
    at java.util.Scanner.next(Scanner.java:1461)
    at java.util.Scanner.nextDouble(Scanner.java:2387)
    at ReadTextFile.readRecords(ReadTextFile.java:39)
    at DonorGUI$OpenButtonListener.actionPerformed(DonorGUI.java:191)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6288)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
    at java.awt.Component.processEvent(Component.java:6053)
    at java.awt.Container.processEvent(Container.java:2041)
    at java.awt.Component.dispatchEventImpl(Component.java:4651)
    at java.awt.Container.dispatchEventImpl(Container.java:2099)
    at java.awt.Component.dispatchEvent(Component.java:4481)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4577)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)
    at java.awt.Container.dispatchEventImpl(Container.java:2085)
    at java.awt.Window.dispatchEventImpl(Window.java:2478)
    at java.awt.Component.dispatchEvent(Component.java:4481)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:643)
    at java.awt.EventQueue.access$000(EventQueue.java:84)
    at java.awt.EventQueue$1.run(EventQueue.java:602)
    at java.awt.EventQueue$1.run(EventQueue.java:600)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
    at java.awt.EventQueue$2.run(EventQueue.java:616)
    at java.awt.EventQueue$2.run(EventQueue.java:614)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:613)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
BUILD SUCCESSFUL (total time: 8 seconds) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:31:02.670

在`openFile()`方法中：

```
input = new Scanner(new FileInputStream("C:/temp/donations.txt")); 
```

在`readRecords()`方法中：

```
try {
  int j=0;
  while (input.hasNextLine()){
    String line=input.nextline().trim();
    if (!line.equals("")){
      String inp[]=line.split("\s");
      gui.donorName[j] = inp[0];
      gui.charityName[j] = inp[1];
      gui.donationAmt[j++] = Double.parseDouble(inp[2]);
    }
    if (j==20){break;} //don't understand why you need this but see it in your code
  }
}catch (Exception e){
   e.printStackTrace();
} 
```

# jquery - 选中单选按钮时追加Jquery

> ID：10891713
> 
> 赞同：1
> 
> 时间：2012-06-05T04:48:02.850
> 
> 标签：jquery, radio-button, append

我不知道为什么，但希望有人可以用下面的代码帮助我。

```
 <script src="/jquery-1.7.2.min.js"></script>
    <script>
    $(".static_class").click(function(){
        if($(this).val()==="expanded") 
            $(".widget_prev").append("<p>expanded</p>"); 
        else $(".widget_prev").append("<p>minified</p>");
    });
    </script>

    <div>
    <input type="radio" name="ad_window" selected="selected" value="expanded" class="static_class" />Ad Window Expanded
    <br />
    <input type="radio" name="ad_window" value="minified" class="static_class" />Ad Window Minimized
    <b>Widget Preview: </b>
    <div class="widget_prev"></div>
    </div> 
```

似乎无法附加文本。想知道问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:51:40.167

确保在绑定点击事件之前等待元素进入 DOM。在下文中，我使用的是 的缩写形式`$(document).ready()`，即`$(function(){ /* ... */ });`

```
$(function(){

  $(".static_class").on("click", function(e){
      $("<p>").text(function(){
          return $(e.target).val() === "expanded" ? "expanded" : "minified" ;
      }).appendTo(".widget_prev");
  });

}); 
```

小提琴：http: [//jsfiddle.net/jonathansampson/drkCK/](http://jsfiddle.net/jonathansampson/drkCK/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T04:52:03.270

`jquery`将您的代码包装在`$(document).ready({});`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T04:50:54.600

将脚本放在单选按钮/div 下方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T04:53:58.543

把代码放进`$(function(){//here});` 去试试这个更聪明的方法

```
 <script>
$(function(){    $(".static_class").click(function(){
                 $(".widget_prev").append("<p>"+this.value+"</p>"); 
                 });
});
        </script> 
```

# database - 我可以在其他人使用访问后端文件时编辑它吗？

> ID：10891715
> 
> 赞同：2
> 
> 时间：2012-06-05T04:48:14.473
> 
> 标签：database, ms-access, backend

在其他人使用 Access 数据库的后端文件时，我可以编辑多少？我的理解是你不能，但我想在我承诺很多深夜之前确认这一点。关于“我可以编辑多少”，我的意思是诸如向表中添加字段、删除它们、添加新表等任务。

此外，这与使用 SQL Server 后端相比如何？

如果不明显，我的数据库是拆分的，我目前一次只有少量用户（1-2）。我正在使用 Access 2007

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:12:29.087

我不会编辑实时后端，但是，您可以在空副本上进行大部分或可能全部更改，只需使用一点 SQL 和 VBA 将实时数据附加到各种表中。

# asp.net - 将 get set 属性放在另一个文件中

> ID：10891725
> 
> 赞同：0
> 
> 时间：2012-06-05T04:49:06.810
> 
> 标签：asp.net, .net, c#-4.0

在这里我开发了一些功能。但在那之后我看到那里发生了一些未实现的异常。还有一些设置属性。这是代码，

```
 private void modifyMessage()
    {
        char [] characters_to_removed_from_end = { ' ' };
        String trimmedString = this.message_in.TrimEnd(characters_to_removed_from_end);
        trimmedString = Regex.Replace(trimmedString, @"s\+", "");

        trimmedString = rearrangeMessage(trimmedString);
    } 
```

之后自动生成下面的代码，

```
 private string rearrangeMessage(string trimmedString)
    {
        throw new NotImplementedException();
    }

    public string message_in { get; set; }
    public string rearrangeMessage { get; set; }
} 
```

我可以将第二个代码放在另一个文件中吗？或者这里发生了什么？

使用完整代码编辑后....

```
 using System;
 using System.Collections.Generic;
 using System.Linq;
 using System.Web;
 using System.Web.UI;
 using System.Web.UI.WebControls;
 using System.Configuration;
 using System.Data.SqlClient;
 using System.Text.RegularExpressions;

namespace ViltraSMS.SMSFunction
{
public partial class MooseSeen : System.Web.UI.UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    { 
        // return SMS
string username =     System.Configuration.ConfigurationManager.AppSettings["username"].ToString();
        string password = System.Configuration.ConfigurationManager.AppSettings["password"].ToString();

        int source = int.Parse(Request.QueryString["msisdn"]);
        int dest = int.Parse(Request.QueryString["shortcode"]);
        string message_in = Request.QueryString["msg"];

    }

    //singleton pattern
    internal static ConnectionFactory newinstance()
    {
        try
        {
            return new ConnectionFactory(ConfigurationManager.ConnectionStrings["myConString"].ConnectionString);
        }
        catch (Exception)
        {
            throw;
        }

    }

    private void modifyMessage()
    {
        char [] characters_to_removed_from_end = { ' ' };
        String trimmedString = this.message_in.TrimEnd(characters_to_removed_from_end);
        trimmedString = Regex.Replace(trimmedString, @"s\+", "");

        trimmedString = rearrangeMessage(trimmedString);
    }

    private string rearrangeMessage(string trimmedString)
    {
        throw new NotImplementedException();
    }

    public string message_in { get; set; }
    public string rearrangeMessage { get; set; }

    private String rearrangeMessage(String modifiedMessage)
    {
        char[] characters_to_removed_from_end = { ' ' };
        modifiedMessage = modifiedMessage.TrimEnd(characters_to_removed_from_end);
        modifiedMessage = Regex.Replace(modifiedMessage, @"\n", "");
        modifiedMessage = Regex.Replace(modifiedMessage, @"\r", "");
        //0d & 0a not done

      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:52:43.833

做你的课`partial`。您可以将一个类的定义拆分为多个文件`partial class`

[http://msdn.microsoft.com/en-us/library/wa80x488(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/wa80x488(v=vs.80).aspx)

# jquery - 菜单上的 jQuery 数组

> ID：10891729
> 
> 赞同：0
> 
> 时间：2012-06-05T04:49:24.200
> 
> 标签：jquery, arrays, list

我正在使用与此类似的 HTML 结构

```
<ul class="top-level">
   <li><a href="#"></a>
       <ul class="dropdown">
          <li><a href="#"></a>
          </li>
       <ul>
   <li>
</ul> 
```

像这样使用 jQuery

```
$(".top-level").on("click", "a", function() {
  $(this).next("ul.dropdown").toggle(); // Show / hide the corresponding sub-menu
}); 
```

除了单击一个链接以拉下一个下拉菜单后，当我单击另一个顶级链接以拉下另一个下拉菜单时，第一个下拉菜单不会消失。有没有办法选择 .dropdown 中的所有其他元素，除了我想要的元素并要求它们隐藏自己？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T04:57:15.010

```
$(".top-level").on("click", "a", function() {
  var theDrop = $(this).next("ul.dropdown"); //convert dropdown in question to var
  theDropState = theDrop.is(':visible'); //record current state of dropdown
  $("ul.dropdown").hide(); //hide all dropdowns
  if(!theDropState){ theDrop.show(); } //if state was invisible, show dropdown
}); 
```

此方法是无状态的，并且每次都会设置正确的条件。使用切换可能会`$('ul.dropdown').toggle();`导致所有下拉菜单同时显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T04:52:35.920

像这样使用它

```
$(".top-level").on("click", "a", function(e) {
  e.preventDefault();
  $('ul.dropdown').hide(); 
  $(this).next("ul.dropdown").toggle(); // Show / hide the corresponding sub-menu
}); 
```

如果您单击已打开的下拉菜单，它将首先隐藏然后再次出现。避免像这样修改它

```
$(".top-level").on("click", "a", function(e) {
    e.preventDefault();
    if($(this).next("ul.dropdown").is('visible'))
      return;
    // as the target drop down is already visible do nothing and return      
    $('ul.dropdown').hide(); 
    $(this).next("ul.dropdown").toggle(); 
         // Show / hide the corresponding sub-menu
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-05T04:57:21.203

您可以先隐藏任何可见的下拉列表。然后你继续并显示你当前正在点击。

```
$(".top-level").on("click", "a", function() {
     $('ul.dropdown').fadeOut(100); //hide any visible drop down first
     $(this).next("ul.dropdown").toggle(); // Show / hide the corresponding sub-menu
}); 
```

希望这就是你想要的。

# java - 基于JSoup中的父元素获取元素

> ID：10891730
> 
> 赞同：1
> 
> 时间：2012-06-05T04:49:34.143
> 
> 标签：java, html, parsing, jsoup

在下面的 XML 中，我希望能够获取第一个标题标签的内容，而不是第二个。不幸的是，代码打印了两个标题标签的内容......

任何帮助都会非常感谢！

```
String feedXMLString = "<entry><title>title 1</title><source><title>title 2</title></source></entry>";
    Document feedXML = Jsoup.parse(feedXMLString);

    NodeTraversor feedXMLTraversor = new NodeTraversor(new NodeVisitor() {

          @Override
          public void tail(Node node, int depth) {
              if (node instanceof Element) {

                  String tagName = ((Element) node).tagName();                    
                  String parentTagName = ((Element) node).parent().tagName();

                  if (tagName.equals("title")) {          
                      if (parentTagName.equals("entry")) {
                          String title = ((Element) node).ownText();
                          System.out.println(title);
                      }
                  }
              }
          }

          @Override
          public void head(Node node, int depth) { 
          }
        });
    feedXMLTraversor.traverse(feedXML.body()); 
```

输出是

```
title 1
title 2 
```

我只是希望它是标题 1。我假设第二个标题的父标签是`<source>`，但由于某种原因 JSoup 似乎认为它是`<entry>`

谢谢！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T11:16:10.853

为什么不使用 Jsoup API 的选择器部分？它更容易使用，更干净，而且我敢打赌它也会更快。我个人使用的是这个：

```
//The line you already had
Document doc = Jsoup.parse(feedXMLString);

//This will get you all the titles
Elements elems = doc.select("title");

//And now you can proceed in various ways:
String title1stWay = elems.first().text();
String title2ndWay = elems.get(0).text(); 
```

看看这里：[Jsoup 选择器 API](http://jsoup.org/cookbook/extracting-data/selector-syntax)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T05:11:08.563

尝试添加（下 `String tagName ,String parentTagName...`）

```
int numOfParents = ((Element) node).parents().size(); 
```

和改变

```
if (parentTagName.equals("entry")) 
```

进入

```
if (parentTagName.equals("entry") && (numOfParents == 1)) 
```

?

# wpf - 用于延迟播放视频的 wpf 应用程序

> ID：10891732
> 
> 赞同：2
> 
> 时间：2012-06-05T04:49:47.723
> 
> 标签：wpf, .net-4.0

我有一个使用表达式编码器 4 和框架 4.0 广播视频的 wpf 应用程序，但是我在广播时有 15 秒的延迟。有什么建议可以减少广播时的延迟。

下面是代码

private void button1_Click(object sender, RoutedEventArgs e) { try { EncoderDevice video = null; EncoderDevice 音频 = null;

```
 GetSelectedVideoAndAudioDevices(out video, out audio);
            StopJob();

            if (video == null)
            {
                return;
            }
            StopJob();
            _job = new LiveJob();
            if (video != null && audio != null)
            {
                //StopJob();
                _deviceSource = null;

                _deviceSource = _job.AddDeviceSource(video, audio);
                _job.ActivateSource(_deviceSource);

                // Finds and applys a smooth streaming preset        
                //_job.ApplyPreset(LivePresets.VC1HighSpeedBroadband4x3);

                // Creates the publishing format for the job
                PullBroadcastPublishFormat format = new PullBroadcastPublishFormat();
                format.BroadcastPort = 9090;
                format.MaximumNumberOfConnections = 50;

                // Adds the publishing format to the job
                _job.PublishFormats.Add(format);

                // Starts encoding
                _job.StartEncoding();
            }
            //webCamCtrl.StartCapture();
        }
        catch (Exception ex)
        {
            WriteLogFile(this.GetType().Name, "button1_Click", ex.Message.ToString());
        }

    } 
```

# jquery - 检测 iPad 全屏 web-app

> ID：10891735
> 
> 赞同：4
> 
> 时间：2012-06-05T04:49:58.107
> 
> 标签：jquery, ipad, web-applications, mobile-safari

所以 iPad 的全屏网络应用功能非常酷，但我有一个问题。

ipad的状态栏覆盖了部分页面！只是一点点，但它仍然是一个问题。我想在`body`元素顶部添加填充以解决此问题，但仅限于全屏 Web 应用程序模式。

我不知道如何检测到这一点。有没有人找到一种方法在顶部添加填充，以便全屏 Web 应用程序没有重叠？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T05:14:09.203

看看这个楼盘...

```
var isRanFromHomeScreen = navigator.standalone; 
```

这将告诉您您的应用程序是否已添加到主屏幕并从那里运行。

# jquery - Safari jquery ajax 重定向

> ID：10891740
> 
> 赞同：4
> 
> 时间：2012-06-05T04:50:39.463
> 
> 标签：jquery

我正在对外部服务器进行 $.ajax 调用。该服务器返回一个重定向，重定向页面返回一些 json。这在 FF 和 Chrome 上运行良好，但 Safari 和 Opera 不喜欢它。

这是我的 $.ajax 代码：

```
$.ajax(
{
    url:url,
    dataType:"json",
    success:function(data)
    {
        console.log("success");
    },
    complete:function()
    {
        console.log("complete");
    }
}); 
```

在 Firefox 和 chrome 中，这可以正常工作 - 我的每个 ajax 响应都调用了“成功”。然而，在 safari 和歌剧中，从不叫“成功”，只叫“完成”。网络请求控制台为我提供了以下信息：

```
resolve.json    GET 302 application/json
1817995.json    GET (canceled)  undefined 
```

其中 1717995.json 是从 resolve.json 发送的重定向。我不确定为什么取消请求（如响应所示）。

任何人都可以在这方面提供一些帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:14:40.443

恕我直言，这是一个跨域（起源）问题。默认情况下，您的浏览器不执行跨浏览器 ajax 请求。您应该尝试使用 jsonp 而不是 json：

```
dataType:"jsonp" 
```

但这只有在服务器支持 jsonp 时才有效（在这种情况下，您还需要指定回调函数的名称）。

如果不支持 jsonp，您可以从您的服务器创建代理。基本上它甚至不需要。而不是重定向只是从第 3 方服务器“下载”文件并将其作为响应输出。

如果可以，这只适用于较新的浏览器，那么你可以试试[这个](https://stackoverflow.com/questions/667519/firefox-setting-to-enable-cross-domain-ajax-request)（这是更好的解决方案，然后是服务器端“代理”恕我直言）

# android - Android：takePicture() 没有声音

> ID：10891742
> 
> 赞同：20
> 
> 时间：2012-06-05T04:50:52.070
> 
> 标签：android, camera, default

我正在使用课堂上的`takePicture()`方法`Camera`。它拍了照片，但它没有声音！我的客户想要 Android 发出的默认点击声音。

我看过其他线程，似乎问题在于禁用声音，而不是相反！为什么我的应用程序没有发出点击声？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-05T05:02:05.120

我也有这个问题。我通过使用以下代码解决了它：以下用于调用takePicture：

```
clickButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(final View view) {
                mCamera.takePicture(shutterCallback, null, onPicTaken);
            }
        }); 
```

现在ShutterCallBack：

```
private final ShutterCallback shutterCallback = new ShutterCallback() {
        public void onShutter() {
            AudioManager mgr = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
            mgr.playSoundEffect(AudioManager.FLAG_PLAY_SOUND);
        }
    }; 
```

现在从相机拍照后做任何事情：

```
 /**
     * This will be called after taking picture from camera.
     */
    final transient private PictureCallback onPicTaken = new PictureCallback() {
        /**
         * After taking picture, onPictureTaken() will be called where image
         * will be saved.
         * 
         */
        @Override
        public void onPictureTaken(final byte[] data, final Camera camera) {
         } 
```

这将在单击捕获按钮时播放声音。

谢谢 ：）

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-09-24T14:16:33.413

如果你想让相机播放默认的安卓声音，你必须给它一个*空*的快门回调。

```
ShutterCallback shutterCallback = new ShutterCallback() {
    @Override
    public void onShutter() { 
        /* Empty Callbacks play a sound! */
    }
};

mCamera.takePicture(shutterCallback , null, onPicTaken); 
```

在 HTC One SV 和三星 Galaxy XCover 2 上测试。

你给回调一个空的快门回调，然后它播放默认声音。

如果您`takePicture`使用 null调用，`ShutterCallback`相机将不会播放任何声音。

Shrikant 的答案是有效的，但可能会出现意想不到的行为，因为`mgr.playSoundEffect();`它不打算`AudioManager.FLAG_PLAY_SOUND`像[文档所述的](http://developer.android.com/reference/android/media/AudioManager.html#playSoundEffect%28int%29)那样被调用。

# matlab - MATLAB：幂函数曲线拟合

> ID：10891749
> 
> 赞同：0
> 
> 时间：2012-06-05T04:51:17.247
> 
> 标签：matlab

我想知道幂多项式*y* = *x* ^(*m*)的 MATLAB 代码形式。我通过将此曲线拟合到一组数据来要求*m*
的数值。我的初始程序如下：

 *```
load A   
N = A(:, 1);
t = A(:, 2);    
p = polyfit(log(N), log(t), 1);    
f = (p, t);    
plot(t, N, '-', t, f, '-'); 
```

`polyfit`我唯一的疑问是，用于曲线拟合的上述函数适用于不适合我的数据集的方程*y* = *bx* ^(*m*)，我需要*b* = 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T17:18:09.673

[polyfit](http://www.mathworks.se/help/techdoc/ref/polyfit.html)的第三个参数是多项式的次数，在你的情况下是*m*。

您可以将大于*m*的参数传递给*polyfit*。然后，如果您对模型的假设是正确的，*p[m + 1]*将是*p*的最大组成部分（并且接近 1），而其他应该接近于零。*

# java - What is the sense in giving names to constructors

> ID：10891761
> 
> 赞同：6
> 
> 时间：2012-06-05T04:52:47.873
> 
> 标签：java, c++, constructor, abstraction

I have been using C++ and Java for several years now. One thing which I can't seem to understand is that why do we need to provide constructors of a class a name? For instance, if I have to define a class `FOO` in C++/Java, I'll be forced to provide `FOO` as the constructor name. However, since constructor is never explicitly called, what is the sense in compiler forcing me to provide it a name after all.

The abstraction paradigm dictates, we hide unnecessary details from programmers. This is the reason, constructors don't have a return type, since it's already well-defined what a constructor has to return. In the same spirit, why can't we just give a generic name to constructors of all classes - for instance anything meaningful, like `initialize()` or maybe just nothing and just arguments `( [arg [,arg]] )`

I hope, I'm able to express myself. If someone have any definitive answers, kindly let me know.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T05:17:49.420

In C++ constructors do not have names(C++03 12.1), however since constructors are essentially defined as functions, it was logical to name them in some way.
Naming them anything other than the class name would have added new keywords and hence eventually they were named same as the class name.
In short, It was a logical decision which avoided new keywords and at the same time ensured intuitiveness.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T05:11:05.140

From the C++ standard (12.1) (emphasis mine):

> Constructors **do not** have names. A special declarator syntax is used to declare or define the constructor. The syntax uses:
> 
> *   an optional decl-specifier-seq in which each decl-specifier is either a function-specifier or constexpr,
> *   the constructor’s class name, and
> *   a parameter list

In C++, you are not providing a name, you are writing special syntax which was decided by the language creators to declare a constructor.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T04:58:17.093

it's a standard for the language, if you want to have a generic name for constructor then try to learn another language or maybe create your own language. =p

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T05:26:01.757

For Java and C++, the constructor name must be the same as the class name. Besides, you know it is a constructor, because it does not declare a return type. This way to declare a constructor helps you to declare a method which name is `__init__`, `initialize`, or `__constructor`. This is not possible in Python, for example, because it uses `__init__` as constructor name.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T05:04:24.723

Constructors are special member function and constructor always returns the memory address created by 'new' operator. Since one function returns only one thing at a time so no other value can return from constructor. It is the java standard to define a constructor name same as the class name.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T05:11:38.657

*First*, you don't have to write a constructor. if you don't write one - the compiler will create a default constructor for you.

*second*, sometimes you do have to use one (for example, if you have final class variables they have to be initialized upon creation of the object). In this case you have to write a constructor and you will use it when you instantiate the object.

```
public class Foo {
    final int a;

    public Foo (int val){
        this.a = val
    }
}

Foo foo = new Foo (23); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-05T06:10:31.797

You are right about your line of thought. The syntax Java adopted is just a historical artifact.

In newer languages that support OOP, this redundancy is generally absent. Scala calls it `this`*, F# calls it `new`*, Python calls it `__init__`, Ruby calls it `initialize` etc.

* * *

[* Auxiliary constructors anyway. The primary constructors in these languages are class arguments themselves.]

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-06-05T04:54:29.417

since you can't call the constructor explicitly, what's the purpose of giving a special name to it? and about constuctors having a name same with the class: constructing can only be performed in a function so constructor is a function. and since it's a special function, among other class functions it should have a special signature. language designers wanted them to be named same with the class.

# java - 使用 JodaTime 自动将秒转换为年/天/小时/分钟？

> ID：10891762
> 
> 赞同：2
> 
> 时间：2012-06-05T04:52:58.213
> 
> 标签：java, jodatime

当 x 超过 3600 秒时，有没有办法将 'x' 秒转换为 y 小时和 z 秒？同样，当 x 超过 60 但小于 3600 秒时，使用 JodaTime？我知道我必须在 PeriodFormatter 中指定我需要的内容，但我不想指定它 - 我想要一个基于秒值的格式化文本。

这类似于您在论坛上发帖的方式，然后您的帖子最初将显示为“10 秒前发布”。1 分钟后，您会看到“1 分钟 20 秒前发布”，几周、几天、几年也是如此。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-05T07:30:48.633

我不确定你为什么不想在`PeriodFormatter`. `JodaTime`不知道您想如何将句点显示为字符串，因此您需要通过`PeriodFormatter`.

由于 3600 秒是 1 小时，因此正确使用格式化程序会自动为您执行此操作。这是一个代码示例，在同一格式化程序上使用了许多不同的输入，应该可以达到您想要的结果。

```
 Seconds s1 = Seconds.seconds(3601);
    Seconds s2 = Seconds.seconds(2000);
    Seconds s3 = Seconds.seconds(898298);
    Period p1 = new Period(s1);
    Period p2 = new Period(s2);
    Period p3 = new Period(s3);

    PeriodFormatter dhm = new PeriodFormatterBuilder()
        .appendDays()
        .appendSuffix(" day", " days")
        .appendSeparator(" and ")
        .appendHours()
        .appendSuffix(" hour", " hours")
        .appendSeparator(" and ")
        .appendMinutes()
        .appendSuffix(" minute", " minutes")
        .appendSeparator(" and ")
        .appendSeconds()
        .appendSuffix(" second", " seconds")
        .toFormatter();

    System.out.println(dhm.print(p1.normalizedStandard()));
    System.out.println(dhm.print(p2.normalizedStandard()));
    System.out.println(dhm.print(p3.normalizedStandard())); 
```

产生输出::

> 1小时1秒
> 
> 33 分 20 秒
> 
> 3天9小时31分38秒

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-26T08:25:29.170

我喜欢上一个答案，但这个选项看起来更具可读性：

```
PeriodFormat.getDefault().print(new Period(0, 0, yourSecondsValue, 0)
    .normalizedStandard()) 
```

# c++ - Rcpp：比较从 R 数据帧派生的字符串的巧妙方法？

> ID：10891763
> 
> 赞同：1
> 
> 时间：2012-06-05T04:53:10.297
> 
> 标签：c++, string, r, dataframe, rcpp

在 Rcpp 处理字符串时有些头疼，查看了“如何测试 Rcpp::CharacterVector 元素是否相等”，但情况比这要复杂一些。

为了说明，假设我们有一个 200 行的名称和标记数据框，随机生成：

```
df = data.frame(name = paste("Person",
                             sample(LETTERS[1:10],200,rep=TRUE),sep=""), 
                mark = pmax(pmin(round(rnorm(200,60,15)),100),0), 
                stringsAsFactors=FALSE) 
```

我发现以下内联代码（使用 Rcpp）正确计算出所有行的标记总和，其中命名的人是数据框中给出的第一人（即 R 中的 df$name[1]，或等效名称[0] 在 Rcpp 代码中）：

```
library(inline)

fastfunc_good1 <- cxxfunction(
    signature(DFin = "data.frame"),
    plugin = "Rcpp",
    body = '
        Rcpp::DataFrame DF(DFin);
        Rcpp::CharacterVector name = DF["name"];
        Rcpp::IntegerVector mark = DF["mark"];
        Rcpp::CharacterVector targetname(1);
        Rcpp::CharacterVector thisname(1);      

        int n = name.length();
        int tot = 0;
        targetname = name[0];
        std::string s_targetname = as<std::string>(targetname);

        for (int i = 0; i < n; i++) {
            thisname=name[i];
            std::string s_thisname = as<std::string>(thisname);
            if (s_thisname == s_targetname) {
                tot = tot + mark[i];
            }
        }

        return(Rcpp::wrap(tot));
        ') 
```

现在，我真的想尽可能地简化这一点，因为必须定义一个单独的变量来表示 name[] 中的值，强制转换为 std::string，然后进行比较，这很麻烦。必须有某种方法来简化符号，使其看起来更像以下内容（应该注意它不起作用！）...

```
fastfunc_bad1 <- cxxfunction(
    signature(DFin = "data.frame"),
    plugin = "Rcpp",
    body = '
        Rcpp::DataFrame DF(DFin);
        Rcpp::CharacterVector name = DF["name"];
        Rcpp::IntegerVector mark = DF["mark"];

        int n = name.length();
        int tot = 0;

        for (int i = 0; i < n; i++) {
            if (name[i] == name[0]) {
                tot = tot + mark[i];
            }
        }

        return(Rcpp::wrap(tot));
        ') 
```

这个迷你学习项目的最终目标是让我弄清楚如何遍历 df$name 中的唯一名称，计算每个名称的标记总和，并将所有内容（唯一名称和相应的总和）作为一个整洁的数据框返回. 我已经从其他示例中弄清楚了如何构建和返回最终数据框的大部分细节——只是上面描述的字符串让我头疼。非常感谢您的任何指点！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T09:43:08.180

您可以使用 Rcpp::as 将 R 对象转换为 C++ 容器。以下对我有用。

```
fastfunc_good2 <- cxxfunction(
    signature(DFin = "data.frame"),
    plugin = "Rcpp",
    body = '
        Rcpp::DataFrame DF(DFin);
        std::vector<std::string> name = Rcpp::as<std::vector<std::string> >(DF["name"]);
        std::vector<int> mark = Rcpp::as<std::vector<int> >(DF["mark"]);

        int n = name.size();
        int tot = 0;

        for (int i = 0; i < n; i++) {
            if (name[i] == name[0]) {
                tot = tot + mark[i];
            }
        }

        return(Rcpp::wrap(tot));
        ')

> fastfunc_good1(df)
[1] 1040

> fastfunc_good2(df)
[1] 1040 
```

# spf - SPF - 多台服务器

> ID：10891765
> 
> 赞同：0
> 
> 时间：2012-06-05T04:53:20.820
> 
> 标签：spf

我正在尝试创建 SPF 记录并希望得到一些建议。

我们有 3 台服务器，s1.example.com s2.example.com s3.example.com

到目前为止，我已经构建了这个：“v=spf1 include:s1.example.com include:s2.example.com include:s3.example.com include:amazonses.com include:_spf.google.com ~all

我应该使用 include: 还是 a: 用于 3 个服务器？

我可以去 include:example.com 获取所有 3 个吗？

我对亚马逊/谷歌很满意，因为这是他们为我提供的

任何意见将是有益的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:00:58.760

v=spf1 a:s1.example.com a:s2.example.com a:s3.example.com 包括：amazonses.com 包括：_spf.google.com ~all

# spring-integration - Spring Integration的Interceptors调用的类能知道连接拦截器的通道吗？

> ID：10891772
> 
> 赞同：1
> 
> 时间：2012-06-05T04:53:54.517
> 
> 标签：spring-integration

```
<channel id="simResMsgSndChannel">
    <interceptors>
        <wire-tap channel="simResLogger" />
    </interceptors>
</channel>

<service-activator input-channel="simResLogger"
    ref="simResLoggingService" />
<beans:bean id="simResLoggingService" class="com.sds.afi.log.SimResLoggingService" /> 
```

在“com.sds.afi.log.SimResLoggingService”类中，我想知道“simResMsgSndChannel”。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:07:26.770

您可以使用配置中的 message-history 元素跟踪消息历史记录。检查[这个](http://static.springsource.org/spring-integration/docs/2.0.0.RC1/reference/html/message-history.html)链接

# javascript - OnClick 事件在 google chrome 和 safari 中不起作用

> ID：10891774
> 
> 赞同：1
> 
> 时间：2012-06-05T04:54:04.517
> 
> 标签：javascript, onclick

我在我的蛋糕应用程序中使用了 onclick() javascript 事件。但这在 google chrome 和 safari 中不起作用。这是我的代码

```
<select name="ovwear" >
            <option>--Select Category--</option>
            <?php
            $i = 1; 

            foreach($styleDetail as $key=>$val) { ?>

            <option onClick="catDetail(<?php echo $val['shop_style_categories']['cat_id'].",".$val['shop_style_categories']['parent_id'] ?>);" value="<?php echo $i;?>">Category <?php echo $i;?></option>

            <?php $i++; } ?>

            </select> 
```

这是功能：

```
<script type="text/javascript">
    function catDetail(cat_id,parent_id){
        //alert("called here");
        var cat_id = cat_id;
        var parent_id = parent_id;
            jQuery.ajax({
                          type: "POST",
                          url: "/admin/shop/styledata",
                          data:"cat_id=" + cat_id,
                          dataType: "html",
                          success: function(data) {
                            $("#alertt").html(data);
                         } 
            });
    }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T04:57:37.043

```
onclick has to be on `<select` instead of `<option`

<select name="ovwear"  onClick=..... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T04:55:51.293

我认为你不能附加一个`onclick`on `<option>`。`onchange`改用on更好`<select>`。

由于您使用的是 jQuery，因此请利用 using[`.on()`](http://api.jquery.com/on/)附加处理程序。此外，`data-*`为标签上的自定义数据使用属性。[此答案](https://stackoverflow.com/a/4564711/575527)中的更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T05:09:36.307

您正在使用 jQuery，因此，您应该*使用*jQuery。您应该绑定到 select 元素本身的 change 事件，并将这些相关值存储为数据属性：

```
<?php
    $o =  "";
    for ( $i = 0; $i < count( $styleDetail ); $i++ ) {
        $o .= sprintf("<option data-cat-id='%s' data-parent-id='%s'>%s</option>",
                       $styleDetail[$i]['shop_style_categories']['cat_id'],
                       $styleDetail[$i]['shop_style_categories']['parent_id'],
                       "Category " . $i+1 );
    }
?>
<select name="ovwear"><?php echo $o; ?></select> 
```

接下来，我们需要绑定数据：

```
<script>
    $(function(){
        $("select[name='ovwear']").on("change", function(){
            var selected = $("option:selected", this);
            $.ajax({
                type: "POST",
                url: "/admin/shop/styledata",
                data: { 'cat_id':$(selected).data("cat-id") },
                dataType: "html",
                success: function(data) {
                    $("#alert").html(data);
                }
            });
        });
    });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T04:56:46.637

您应该将 onclick 事件放在选择元素上而不是选项上。

# sencha-touch-2 - sencha touch 2 数字字段分隔符

> ID：10891778
> 
> 赞同：1
> 
> 时间：2012-06-05T04:54:16.630
> 
> 标签：sencha-touch-2

我有一个 ST2 应用程序，其中包含电话号码的数字字段：

```
 {
                    xtype: 'numberfield',
                    id: 'Phone',
                    name: 'Phone',
                    cls: "detailText",
                    label: 'Phone:'
            } 
```

我在 Android 和 iPhone 上都运行了这个。如果我输入“555123987”的电话号码，Android 将显示“555123987”，而 iPhone 将显示“555,123,987”。

如何删除逗号？

我正在使用数字字段，因为用户在应用程序的其他地方使用该字段的内容来拨打电话。有没有另一种方法可以阻止垃圾字符进入那里而不看 keydown 或其他东西？也许以某种方式使用带有正则表达式的文本字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:24:50.783

您可以将 ui 配置设置为`text`( **`ui: 'text'`**)。像这样：

```
xtype: 'numberfield',
ui: 'text',
label: 'Phone',
name: 'phone' 
```

这是防止逗号在 iPhone 上自动进入的一种快速方法。但这并不妨碍用户输入他们自己的“垃圾”字符。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T08:05:29.263

我想你可以看看这个人提供的代码。

[http://www.sencha.com/forum/showthread.php?125935-Number-field-with-currency-symbol-thousand-separator-with-international-support](http://www.sencha.com/forum/showthread.php?125935-Number-field-with-currency-symbol-thousand-separator-with-international-support)

似乎有一个`useThousandSeparator`可以设置的使用属性。

希望这可以帮助

# android - Android 重启应用

> ID：10891781
> 
> 赞同：7
> 
> 时间：2012-06-05T04:54:30.447
> 
> 标签：android, restart, uncaughtexceptionhandler

当崩溃发生在 android 中时，我正在尝试重新启动应用程序`Thread.UncaughtExceptionHandler`。我可以使用当前活动堆栈作为新进程重新启动应用程序吗？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:18:22.733

一种方法是覆盖 Activity 中的 onPause 方法来终止应用程序。像这样：

```
public class MyActivity extends Activity {
    @Override
    public void onPause() {
        finish();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:50:41.540

据我所知，一旦你杀死你的进程，垃圾收集器就会运行，属于你的应用程序的所有消耗内存的对象都将被释放，即所有对象都将具有空值。因此，无法使用先前进程的活动堆栈跟踪启动应用程序。

# objective-c - Objective-C，如何将文件名传递给 C 函数？

> ID：10891783
> 
> 赞同：1
> 
> 时间：2012-06-05T04:54:52.777
> 
> 标签：objective-c, c, arguments

我正在尝试将 NSString 传递给 C 函数，尽管它似乎不接受（或忽略）参数。任何帮助将不胜感激 - 谢谢。

```
int copyfiles(int argc, const char **argv)
{
    if(argc < 2 || argc > 3)
    {
        puts("usage: copy file [outfile]");
        return 1;
    }

    const char *infile = argv[1];
    char *outfile;
    if(argc > 2)
    {
        outfile = strdup(argv[2]);
        expect(outfile, "allocate");
    }
...
}

@implementation MyApplication 

@synthesize window;

    - (void)copy:(NSString *)pathToFile
    {
     NSString *pathToFile = @"/path/to/file";
     copyfiles((int)(const char *)[pathToFile UTF8String],(const char **)[pathToFile UTF8String]);
    } 
```

我没有收到任何错误，但输出给了我“用法：复制文件 [outfile]”，所以我显然没有正确转换参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T04:59:12.773

看看你对 的调用`copyfiles`，特别*是为什么*你将一个字符串传递给一个需要一个整数作为其第一个参数的函数。

您需要向该函数传递一个参数*计数*，然后是参数列表的指针。

例如，您可以使用以下 C 代码调用它（未经测试，但您应该了解总体思路）：

```
const char *args[] = {"copy", "fromfile", "tofile", NULL};
copyfiles (sizeof(args) / sizeof(*args) - 1, args); 
```

第一行创建一个字符指针数组（更准确地说，是 C 字符串），最后包含 ISO C 标准规定的 NULL。

第二行传递两个参数，第一个是数组的大小减一（列表中“真实”参数的数量），第二个是数组本身。

在您的特定情况下，您似乎使用的是单一文件名种类，您应该从以下内容开始：

```
char *args[3];
args[0] = "copy";
args[1] = [pathToFile UTF8String]; // watch out for auto-release here?
args[2] = NULL;
copyfiles (2, args); 
```

因为您的 C 函数需要`main`-like 行为，其中第一个参数是“程序”名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T04:58:51.967

我不了解你，但我认为在你对“”的函数调用中“”的结果***不会***`(int)(const char *)[pathToFile UTF8String]`是`copyfiles`2或 3。你在哪里找到了基于此实现的示例代码？

 *无论如何，将那个疯狂的演员更改为常数 2（因为你所经过的只是一条路径），看看你是否有更好的结果。*

# blackberry - 如何从 COD 文件中提取 JAD 文件？

> ID：10891786
> 
> 赞同：0
> 
> 时间：2012-06-05T04:55:19.057
> 
> 标签：blackberry, jad

我向 Blackberry 的 RAPC 编译器提供了一个 JAR 文件和一个 JAD 文件。它生成了一个 COD 文件。**JAD 文件**包含我试图提取的业务逻辑相关属性（与 MIDlet-Name 等经典属性相反）。

**假设一个人只能访问 COD 文件，有没有办法从这个 COD 文件中提取 JAD 文件？**

PS：我无权访问分配给 RAPC 的 JAD。因此问题:)

PS2：关于如何为黑莓创建 JAD 文件的链接/教程/示例没有回答问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:15:11.543

您可以手动制作自己的 JAD，也可以使用“ **BlackBerry Desktop Manager** ”：

[http://www.ehow.com/how_7846156_create-jad-cod-alx.html](http://www.ehow.com/how_7846156_create-jad-cod-alx.html)

这是 JAD 的示例：

```
Manifest-Version: 1.0
RIM-COD-Module-Name: YourProjectName
RIM-COD-Module-Dependencies: net_rim_cldc,net_rim_pdap,net_rim_bbapi_invoke
MIDlet-Jar-Size: 133911__your_JAR_size_in_byte
MIDlet-1: ,img/icon.png,
RIM-COD-Creation-Time: 1319628844__maybe_unneccessary
MIDlet-Jar-URL: YourProjectName.jar
RIM-COD-URL: YourProjectName.cod
RIM-COD-Size: 45832__your_COD_size_in_byte
MicroEdition-Configuration: CLDC-1.1
MIDlet-Version: 1.0.0
MIDlet-Name: YourProjectName
MIDlet-Vendor: BlackBerry Developer
MicroEdition-Profile: MIDP-2.0
RIM-MIDlet-Flags-1: 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T02:03:58.867

不。

（最多填写 30 个字符）

# xcode - 我已经更新了我的艺术资产，但 Xcode 仍在使用旧文件

> ID：10891792
> 
> 赞同：0
> 
> 时间：2012-06-05T04:56:08.037
> 
> 标签：xcode, file-management

我有一个 cocos2d 游戏项目。我在一个名为 Graphics/iPhone（适用于 iPhone）和 Graphics/iPad（适用于 iPad）的目录中有一堆 pvr、png、plist 文件。目录是文件夹引用，而不是组。我没有使用 svn，而是使用 Dropbox 来备份数据。

我使用 Photoshop 对我的一些 PNG 文件进行了一些修改，但 Xcode 仍然使用以前构建的旧艺术资源。这是我尝试过的：

1.  产品 > 清洁。什么都不做。
2.  从项目中删除了整个 Graphics 目录。哇，它还在运行！当我删除了所有图形后，它怎么还能运行？不管怎样，我把它们加回来了。还是不行。
3.  卸载了我 iPad 上的应用程序。虽然它适用于模拟器并且我可以看到更新的艺术资产，但它不适用于我的 iPad。
4.  重新启动 Xcode。解决不了任何问题。

任何人都可以给我一些可能出错的指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:03:19.723

你的意思是，资源文件是对Dropbox的引用？

我会尝试，至少，在开发时将它们保持在本地，我相信 Dropbox 有一些缓存算法可以防止它们从不同的来源访问。（我知道您可能会通过直接打开保管箱来看到新图像，但同样，这只是一个猜测，我会尝试）

我之前有一些类似的，我做了你所做的一切，加上删除 cocos2d 并再次添加，并且工作正常。

祝你好运，我知道这很烦人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:26:16.307

要为您的构建更新所有艺术资产，您必须：

1.  在 Xcode 中，转到 Product > Clean Build Folder...

2.  然后从您的 iPhone 设备中删除该应用程序。

执行这两个步骤后，已删除的旧艺术资产不再用于构建。

# shell - 如何在 shell 脚本的条件下比较 md5 哈希值？

> ID：10891800
> 
> 赞同：3
> 
> 时间：2012-06-05T04:56:51.060
> 
> 标签：shell

代码下方的问题。

```
#!/bin/sh

check() {   
    dir="$1"
    chsum1=`find ~/folder -type f -exec cat {} \; | md5` 
    chsum2=$chsum1

    for (( ; 0x$chsum1 == 0x$chsum2;  ))
    do
        echo "hello"
        sleep 10
        chsum2=`find ~/folder -type f -exec cat {} \; | md5`
    done

echo "hello"
#eval $2
}

check $* 
```

目标是：使代码有效。它能做什么？将 md5 应用于文件夹，然后比较 md5 值。它保持一个循环，直到值不同（这意味着文件夹上发生了某些事情），因此在 10 秒后 md5 计算哈希值应该不同，然后代码结束。

**两个问题**。

1.  请注意，那里有一个评论。如果您取消注释 while 并注释 for，您会注意到代码停止工作。为什么？我尝试了不同的组合以使其发挥作用。我用引号括起来，使用了 -eq、=、== 等。没有任何效果。我怎样才能让它与一个整体一起工作？
2.  现在的代码方式，如果它运行，那么我得到的输出是：

> （（：d41d8cd98f00b204e9800998ecf8427e == 97329acaae00bdf66e30ac53b49e10​​36：值对于基数太大（错误标记为“97329acaae00bdf66e30ac53b49e10​​36”）

```
Thus, how can I fix this is the second question and why this is happening. 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:07:14.847

`for`您在（更新的）发布的代码中遇到的问题是当循环工作时您正在使用`while`循环。

以下代码适用于我。我只是将`for`循环更改为`while`循环。

```
#!/bin/sh

check() {
        dir="$1"
        chsum1=`find ~/NASAtest -type f -exec cat {} \; | md5`
        chsum2=$chsum1

        while [ $chsum1 == $chsum2 ]
        do
                echo "hello"
                sleep 10
                chsum2=`find ~/NASAtest -type f -exec cat {} \; | md5`
        done

        echo "hello"
        #eval $2
}

check $* 
```

while 循环不起作用的原因是您在方括号和表达式之间缺少空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-13T22:20:17.083

您可以通过将 Z 放在值前面并作为字符串进行比较来消除您正在比较的变量的格式或类型的混淆（值对于基数来说太大）。

```
# read or operation to define $file1 & $file2 here ...
  val1=`md5sum ${file1} | awk '{print $1}'`
  val2=`md5sum ${file2} | awk '{print $1}'`
  tmpval="Z${val1}" ; val1="${tmpval}"
  tmpval="Z${val2}" ; val2="${tmpval}"
  if [[ "$val1" -eq "$val2" ]] ; then
    # files are the same, do operation here ..
  fi
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T05:08:05.223

> 而 [$chsum1 == $chsum2] 做一些事情结束

这需要看起来像这样（包括换行符）

```
while [ $chsum1 == $chsum2 ]
do
 (perform some stuff)
done 
```

请注意方括号和`do`/`done`块周围的空格，而不是`end`.

# mongodb - 如何在mongodb的内部数组中返回部分数组匹配？

> ID：10891805
> 
> 赞同：2
> 
> 时间：2012-06-05T04:57:24.067
> 
> 标签：mongodb, nosql

我正在展示一个 mongodb 集合文档结构的示例。在进行我展示的查询时，我还展示了我的预期结果。

文件结构::

```
{ 
  _id : "132423423", 
  name : "hi_code", 
  my_entries : [ 
        { 
          e_id : "12345", 
          e_name : "f1", 
          e_posted : "2010-05-01", 
        }, 
        { 
          e_id : "12346", 
          e_name : "f2", 
          e_posted : "2010-06-01", 
        }, 
        { 
          e_id : "12346", 
          e_name : "f3", 
          e_posted : "2010-03-02", 
        } 
   ] 
} 
```

查询结构::

```
db.myCollection.find( { my_entries : { $elemMatch : { e_posted : "2010-06-01", 
e_name : "f2" } } } ) 
```

预期结果：：

```
{ 
  _id : "132423423", 
  name : "hi_code", 
  my_entries : [ 
        { 
          e_id : "12346", 
          e_name : "f2", 
          e_posted : "2010-06-01", 
        }
   ] 
} 
```

我不想为此使用 map reduce，因为我正在处理大型数据库，这会降低性能，只想通过查找查询使其成为可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T05:24:45.720

您的实际结果是与查询匹配的整个文档。

您期望只返回文档的一部分，但无法指定在 2.0 中只返回匹配的数组元素。

从 2.2 版开始（下一个生产版本目前作为不稳定的开发版本 2.1 可用），您将能够使用聚合框架来取回您在本示例中想要的内容。

2.2 还支持[$elemMatch 作为投影运算符](http://docs.mongodb.org/manual/reference/projection/elemMatch/)- 请注意，这将最多返回**一个**匹配的数组元素。

使用聚合框架，您可以执行以下操作：

```
db.myCollection.aggregate( [
     {$match : { my_entries : { $elemMatch : { e_posted : "2010-06-01", e_name : "f2" } } } },
     {$unwind : "$my_entries"},
     {$match : { my_entries : { e_posted : "2010-06-01", e_name : "f2" } } }
] ) 
```

这将返回与所有 my_entries 数组中匹配的条目一样多的文档。如果要将它们分组，则需要`{$group:}`在管道末尾添加一个条目。

# objective-c - 如何在 UIView 中获取 X-Scale 和 Y-Scale？

> ID：10891807
> 
> 赞同：1
> 
> 时间：2012-06-05T04:58:01.343
> 
> 标签：objective-c, ios

如果我在 myView 中有很多子视图（所有视图都是 UIView 的实例）并且我设置了每个子视图的变换，可能是它的 setScale、旋转等。如何知道我设置的每个子视图的 xscale 和 yscale？

例如：

```
 subview1.transform = CGAffineTransformMakeScale(xscale1, yscale1);
  subview1.transform = CGAffineTransformRotate(subview1.transform, angle1);
  subview2.transform = CGAffineTransformMakeScale(xscale2, yscale2);
  subview2.transform = CGAffineTransformRotate(subview2.transform, angle2);
   .
   .
  subviewx.transform = CGAffineTransformMakeScale(xscalex, yscalex);
  subviewx.transform = CGAffineTransformRotate(subviewx.transform, angle3); 
```

从示例用户在 subview.transform 中设置的内容，我需要在用户设置后知道 xscale 和 yscale。我认为这是要解决的一些方程式，请帮助我。^_^

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:52:28.407

从文档[CGAffineTransform](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html)中记下该函数`CGAffineTransform CGAffineTransformMakeScale ( CGFloat sx, CGFloat sy );`。您可以像这样获得视图的比例

```
view.transform = CGAffineTransformConcat(CGAffineTransformMakeScale(2.0, 0.5), CGAffineTransformMakeRotation(M_PI_4));
CGFloat xScale = view.transform.a / cosf(M_PI_4);
CGFloat yScale = view.transform.d  / cosf(M_PI_4); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T05:10:39.530

您可以通过以下代码获得子视图的 x 和 y 比例：

```
for (UIView *subview in self.yourView.subviews)
{

        CGRect framelb1=subview.frame;
        NSNumber *num;
        NSNumber *ynum;
        num =[NSNumber numberWithInt:framelb1.origin.x];//x-value of subview
        ynum =[NSNumber numberWithInt:framelb1.origin.y];//y-value of subview
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T18:37:51.790

One approach is to apply the transform on `CGRect` and then compare with the original `CGRect` :

```
CGRect transformedBounds = CGRectApplyAffineTransform(self.bounds, self.transform);
CGFloat currScale = transformedBounds.size.width/ self.bounds.size.width; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T05:05:24.273

you can get all subviews of view by -

```
NSArray *subViews = myView.subviews; 
```

Now at the time of creation of your child views you can set tag property to them, and here on the basis o tag you can fetch individual view and perform task that you want.

# facebook - Devise 和 Facebook-Omniauth 缺少 client_id

> ID：10891811
> 
> 赞同：3
> 
> 时间：2012-06-05T04:58:27.443
> 
> 标签：facebook, ruby-on-rails-3, devise, omniauth

这是我的 Facebook 的 initializers/devise.rb 代码：

```
require "omniauth-facebook"
config.omniauth :facebook, "app_key", "app_secret" 
```

我补充说：

`devise :omniauthable`进入我希望能够使用 Facebook 的模型。

当我单击此链接时：

```
<%= link_to "Sign in with Facebook", user_omniauth_authorize_path(:facebook) %> 
```

我得到：

带有消息的**OAuthException ：**`"message": "Missing client_id parameter.",`

请注意，app_key 和 app_secret 是我可以在我的 Facebook 应用程序上看到的，但我没有放在这里。

在单击“使用 facebook 登录”链接时重定向的 URL 上，我看到 client_id 参数为空：

[https://graph.facebook.com/oauth/authorize?response_type=code&client_id&](https://graph.facebook.com/oauth/authorize?response_type=code&client_id&)

但为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:12:48.700

将此添加到您的 devise.rb 文件中

```
require "omniauth-facebook"
config.omniauth :facebook, "APP_ID", "APP_SECRET" 
```

不要忘记重新启动您的应用程序以进行更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T05:06:11.480

我从来没有直接用设计完成它。但这也适用于设计。

[RailsCasts 上的 Omniauth 播客](http://railscasts.com/episodes/235-omniauth-part-1)

或者，如果您仍然想坚持使用设计内置的 omiauth，请尝试找到一种方法为其提供应用程序 ID 和应用程序密码。我很确定您必须在 config/initializers/ 的 devise.rb 中提供它

# javascript - 比较属性时的奇怪结果

> ID：10891814
> 
> 赞同：0
> 
> 时间：2012-06-05T04:58:48.777
> 
> 标签：javascript, equals

您能否解释一下以下内容。试图比较对象属性：`v`和`rowData`对象的新名称。得到了返回值`report3`，`report2`但是在比较时`(rowData.newName === v.newName)`这些值是相等的？？！！请参阅下面的控制台消息

值是字符串，属于不同的对象。

```
console.log('== 表的新名称 ==');
console.log(v.nameNew); // 这是report3
console.log('== 行数据的新名称 ==');
控制台.log(rowData.nameNew); // 这是report2
console.log('== 白痴证明测试');
console.log(rowData.newName === v.newName);

```

控制台日志：

```
== VALE OF TABLE 的新名称 ==
报告3
== 行数据的新名称 ==
报告2
== 白痴证明测试
真的

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T05:02:48.107

不确定您是否输入错误，但您登录

```
console.log(v.nameNew); 
```

然后你比较

```
v.newName 
```

如果您犯了一个错误并且实际上是在比较正确的变量，您能否发布更多代码（您如何声明它们并分配它们）

# c++ - C++ 不通过其他方法保存更改

> ID：10891815
> 
> 赞同：0
> 
> 时间：2012-06-05T04:58:49.977
> 
> 标签：c++, linked-list, operator-overloading

我正在尝试在 C++ 中实现一个链表类，但我遇到了问题。我有添加新节点的 += 运算符。

链表类接口：

```
template <typename Type>

class LinkedList {
public:
    LinkedList<Type>* head;
//  linked list stracture
    Type data;
    LinkedList<Type>* next;
//  others ....
    size_t length;
public:
    LinkedList();
    ~LinkedList();
    void initializeHead(LinkedList<Type>* headPtr);
    size_t size() const;
    LinkedList& operator+=(const Type& add);
    void operator-=(const Type& remove);
    LinkedList<Type>& operator[] (const size_t index) const;
    bool operator== (const LinkedList<Type> &versus) const;
    friend ostream& operator<< (ostream& out,LinkedList& obj);
}; 
```

在这里我有 += 重载工具：

```
template <typename Type> LinkedList<Type>& LinkedList<Type>::operator +=(const Type& add) {
    // head ptr - :)
    LinkedList<Type>* p = head->next;
    // go to the end
    while(p) p = p->next;
    // now on end - create new..!!!
    try {
        p = new LinkedList<Type>;
    } catch (bad_alloc& e) {
        cout << "There\'s an allocation error....";
    } catch (...) {
        cout << "An unknown error.." << endl;
    }// fill and done
    p->data = add;
    p->next = NULL;
    // increment length .........
    ++head->length;
    // done ............
    return *p;
} 
```

另外，我有“数组”访问重载方法：

```
template <typename Type> LinkedList<Type>& LinkedList<Type>::operator [](const size_t index) const {
    if(index < 0 || index >= length) // invaild argument
        throw  exception();
    // continue
    LinkedList<Type>* p = head;
    for(size_t i = 0; i < index; ++i) p = p->next; // we are at what we want
    return *p;
} 
```

一切正常 - 我检查了挖掘机，

问题是 - += 没有将新节点保存在“head->next”中，出于某种原因，在完成 += 方法之后，head->next 等于 null。

有人知道为什么新分配不链接到 head->next 吗？

非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:04:19.233

在 `while(p) p = p->next;`p 为 NULL之后

接下来你做`p = new LinkedList<Type>;`了，但你没有将 p 链接到头部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:05:03.160

代替：

```
// go to the end
while(p) p = p->next; 
```

你需要：

```
head->next = p; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T05:35:04.327

正如其他答案所说，当您尝试添加时，您会超出列表。尝试这样的事情：

```
template <typename Type> LinkedList<Type>& LinkedList<Type>::operator +=(const Type& add)
{
    LinkedList<Type> *last;

    // Find the last node in the list
    for (last = head; last != 0 && last->next != 0; last = last->next)
    {
    }

    // `last` now points to the last node in the list, or is zero
    // If zero (i.e. NULL) then list is empty

    if (last == 0)
    {
        head = new LinkedList<Type>;
        head->next = 0;
        head->data = add;
        head->length = 0;
    }
    else
    {
        last->next = new LinkedList<Type>;
        last->next->next = 0;
        last->next->data = add;
    }

    // We can safely use `head` as we are sure it won't be zero
    head->length++;

    // Return the added node
    return (last != 0 ? *last->next : *head);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T05:52:36.987

您也可以使用临时变量来存储最后一个节点，然后最后一个节点将指向新节点。

这是示例代码。您需要处理一些情况，例如添加第一个节点等。

```
LinkedList<Type>* temp = NULL;
while(p) 
{
  temp = p;
  p = p->next;   
}  

try 
{             
  p = new LinkedList<Type>;         
  temp->next = p;
} 
```

# unix - 如何将 cat 命令的值存储在变量 var 中？

> ID：10891817
> 
> 赞同：7
> 
> 时间：2012-06-05T04:59:04.103
> 
> 标签：unix

我试图找到一个字符串在文件中重复的次数，同时我必须将它存储在一个变量中。

当我使用命令 ( `cat filename | grep -c '123456789'`) 时，它会正确显示计数，但是当我使用以下命令时，它会显示为未找到命令。

```
var =$(cat filename | grep -c '123456789')
echo $var 
```

你能让我知道我哪里错了吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-05T05:01:31.347

Don't use spaces around the `=` sign:

```
var=$(cat filename | grep -c '123456789') 
```

Read at least the [Bash Prog Intro Howto](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO.html)

But you've got a useless use of `cat` so code simply

```
 var=$(grep -c '123456789' filename) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-05T05:35:59.113

请记住，grep 可以直接读取文件。您可以避免**[无用地使用 cat](http://partmaps.org/era/unix/award.html#cat)**。

在您问题的示例中，由于等号前的空格，导致出现***command not found错误。***试试这个：

```
var=$(grep -c '123456789' filename) 
```

或者如果您使用的是 bash：

```
read var < <(grep -c '123456789' filename) 
```

或（为了完整性）在 csh/tcsh 中：

```
setenv var `grep -c '123456789' filename` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T05:03:40.160

Using backquotes will also work:

```
varx=`( cat filename| grep -c '123456789' )` 
```

I.e., the `$` is not required, you can assign the output of various commands to variables through the use of backquotes.

For instance:

```
$ pwd
/home/user99

$ cur_dir=`pwd`
$ echo $cur_dir
/home/user99 
```

# c - 在 epoll 中区分文件描述符类型

> ID：10891818
> 
> 赞同：0
> 
> 时间：2012-06-05T04:59:10.030
> 
> 标签：c, epoll

我有一个网络客户端库，我将它放在一起读取/写入某些网络套接字。

有一个线程执行网络 I/O 并响应来自公开客户端 API 的请求。这些客户端 API 请求将从 FIFO 队列中弹出。

为了让线程得到请求，当我的主循环在 epoll_wait 上被阻塞时，我想我应该使用一个 eventfd，我可以用 epoll_ctl 添加它。

所以问题是如果 epoll 只是用 EPOLLIN 通知，我如何区分推送到我的 FIFO 队列和网络 I/O 的事件？

编辑：我应该补充一点，我不想将事件 fd 存储在数据成员中，而是使用 ptr 成员。我想我需要将 fd 存储在该结构内的某个位置。

我可以简单地检查触发事件是否 = 我的事件文件描述符，因此也从我的 fifo 读取，如果它不相等，那么它一定是网络事件？这安全吗？或者是否有最佳实践方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:24:46.517

是的，您必须比较文件描述符。[手册页](http://linux.die.net/man/7/epoll)中的示例就是这样做的。

# xps - 以编程方式将 OneNote 部分转换为 XPS

> ID：10891820
> 
> 赞同：1
> 
> 时间：2012-06-05T04:59:16.860
> 
> 标签：xps, onenote

我需要一种以编程方式将 OneNote 部分文件 (.one) 转换为 XPS 格式的方法。我知道 Excel 和 Word 是如何工作的，但`Interop.OneNote`有所不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:51:05.650

您将使用该`Publish`功能（[http://msdn.microsoft.com/en-us/library/gg649853.aspx](http://msdn.microsoft.com/en-us/library/gg649853.aspx)），例如：

```
using Microsoft.Office.Interop.Onenote;

...

Application onApp = new Application();
string sectionid = "your section id here..."; //could also be a page or notebook id
string path = "your filepath here..."; //e.g. C:\Users\MyUsername\Documents\hi.xps
onApp.Publish(sectionid, path, PublishFormat.pfXPS); 
```

# magento - Magento 管理员 > 系统 > 配置 > 高级 > 系统 - 致命错误

> ID：10891826
> 
> 赞同：0
> 
> 时间：2012-06-05T05:00:09.883
> 
> 标签：magento, configuration, php

当我尝试访问系统 > 配置 > 高级 > 系统时出现此错误

致命错误：在第 421 行的 /home/server/public_html/store/app/code/core/Mage/Adminhtml/Block/System/Config/Form.php 中的非对象上调用成员函数 toOptionArray()

我找到了这个答案：[致命错误：调用成员函数 toOptionArray()](https://stackoverflow.com/questions/10773148/fatal-error-call-to-a-member-function-tooptionarray)

但是，需要根据该答案替换的代码与该文件（Form.php）中的代码不同：

```
 if ($method) {
                if ($fieldType == 'multiselect') {
                    $optionArray = $sourceModel->$method();
                } else {
                    $optionArray = array();
                    foreach ($sourceModel->$method() as $value => $label) {
                        $optionArray[] = array('label' => $label, 'value' => $value);
                    }
                }
            } else {
                $optionArray = $sourceModel->toOptionArray($fieldType == 'multiselect');
            }
            $field->setValues($optionArray);
        }
    }
}
return $this; 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:24:44.573

If you look in Form.php from line 398 to 425 you have almost the same code. The code from your answer isn't a fix, is just a way to help you determine your real problem, so you can use that code:

```
if(is_object($sourceModel)){
    $field->setValues($sourceModel->toOptionArray($fieldType == 'multiselect'));
} else {
    Mage::log($e->source_model);
} 
```

And then you would have to look into the Magento log file to see what happened. Also you can try to log debug_print_backtrace(); Probably your problem comes from a badly written extension.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-09T11:54:47.283

以下步骤应该可以解决错误：-

1.  **禁用编译**( `System -> Tools -> Compilation`)
2.  **刷新缓存**( `System -> Cache Management`)

# java - utf-8 不可见字符

> ID：10891831
> 
> 赞同：1
> 
> 时间：2012-06-05T05:00:46.520
> 
> 标签：java, mysql, perl, utf-8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:06:31.700

I'm assuming that you are sending POST parameters.

I think that the most likely cause of your initial problem is one of the following:

1.  If the parameters are being sent in the HTTP request body, your Perl front-end is probably not setting the encoding in the content type header of the request. The webserver is probably to assuming ISO-8859-1\. The solution to this is to set the request content type properly.

2.  If the parameters are sent in the HTTP request URL, your web server is using the wrong characterset when decoding the request parameters. The solution to this is going be web-server specific ...

It sounds like there might also be a character set problem in talking to the database, but that might just be a consequence of earlier mangling.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:02:57.933

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T05:19:41.980

使用来自[Apache Commons Lang的](http://commons.apache.org/lang/)[StringEscapeUtils](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/StringEscapeUtils.html)：

```
import static org.apache.commons.lang.StringEscapeUtils.escapeHtml;
// ...
String source = "The less than sign (<) and ampersand (&) must be escaped before using them in HTML";
String escaped = escapeHtml(source); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T05:14:24.943

我们在其中一个项目中也遇到过类似的问题。所以我们不得不编写一个小程序来将这些`utf8`字符转换为`html encoded`并存储到数据库中。

# ios - How to Tell iOS Paypal Mobile Payment Library Version?

> ID：10891835
> 
> 赞同：0
> 
> 时间：2012-06-05T05:01:16.400
> 
> 标签：ios, paypal

I'm referencing the demo against the library I have and there seem to be some differences. I just want to make sure I'm not working with something deprecated or outdated.

The header file for each in PayPal.h says:

```
//
//  PayPal.h
//
//  MPL Library - Developer Interface
//
//  Created by Paypal 2010
//  Modified by:
//          DiZoglio, James(jdizoglio) on 5/10/11.
//
//  Copyright 2011 Paypal. All rights reserved.
//
// 
```

In particular, I'm noticing that the library has:

```
+(PayPal*)getInstance; 
```

while the demo has:

```
+(PayPal*)getPayPalInst; 
```

I guess this question is mainly for PayPal, and in particular James DiZoglio, but I appreciate any help anyone who has integrated this with their iOS app can offer. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:08:52.787

[您总是可以使用 Cocoa 的 " `respondsToSelector:`" 方法](https://stackoverflow.com/questions/1135366/class-method-equivalent-of-respondstoselector)来查看 PayPal 库是否响应 " `getInstance`" 或 " `getPayPalInst`" API。

同时，提交错误或向开发人员支持@PayPal 发送消息，看看您是否可以让他们帮助您解决困惑。

# mercurial - 在 mercurial 中使用默认分支切换分支

> ID：10891837
> 
> 赞同：4
> 
> 时间：2012-06-05T05:01:20.887
> 
> 标签：mercurial, branch, rename

在我正在工作的存储库中，我们有时创建了一个命名分支，以在某个问题中尝试不同的方法。我们也继续在默认分支中工作。

既然命名分支已经成熟，可以这么说，我们想将该分支设为默认分支，并为（旧）默认分支提供不同的名称。

这样的事情可能吗？

我发现了这个问题，[Mercurial：我可以重命名一个分支吗？](https://stackoverflow.com/questions/4378684/mercurial-can-i-rename-a-branch)我可以成功重命名默认分支，但是之后当我尝试将命名分支重命名为默认时，它失败并出现错误

```
abort: a branch of the same name already exists 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T05:08:34.677

是的你可以。

您需要关闭所有分支，然后为它们提供所需的名称

PS：好像你只需要`-f`在分支命令中添加标志

示例场景

```
hg init
echo "123" > file
hg addremove
hg commit -m "init default"

hg branch new
echo "new" >> file
hg commit -m "init new"

hg up default
echo "default" >> file
hg commit -m "default 2nd"
hg commit --close-branch -m "close default"

hg up new
hg commit --close-branch -m "close new"

hg branches # none

hg log # see where to update if haven't saved id/hash somewhere

hg up 3 # this changset was the "close default" one
hg branch new -f
hg commit -m "new new"

hg up 4 # the changeset we closed "new" at
hg branch default -f
hg commit -m "new default" 
```

结果：

![在此处输入图像描述](../Images/3f5bc3fc1afb0e8a88e1bf3ffc7ed172.png)

```
>hg log -G
o  changeset:   6:af87a53292cf
|  tag:         tip
|  parent:      4:700a73ac7cad
|  user:        Ivan Kurnosov
|  date:        Tue Jun 05 17:22:27 2012 +1200
|  summary:     new default
|
| @  changeset:   5:4ee990605ba1
| |  branch:      new
| |  parent:      3:6ebccfc3e630
| |  user:        "Ivan Kurnosov
| |  date:        Tue Jun 05 17:18:01 2012 +1200
| |  summary:     new new
| |
o |  changeset:   4:700a73ac7cad
| |  branch:      new
| |  parent:      1:4a149d3fe86e
| |  user:        "Ivan Kurnosov
| |  date:        Tue Jun 05 17:15:18 2012 +1200
| |  summary:     close new
| |
| o  changeset:   3:6ebccfc3e630
| |  user:        "Ivan Kurnosov
| |  date:        Tue Jun 05 17:14:49 2012 +1200
| |  summary:     close default
| |
| o  changeset:   2:92669a82423b
| |  parent:      0:05657f61324b
| |  user:        "Ivan Kurnosov
| |  date:        Tue Jun 05 17:13:07 2012 +1200
| |  summary:     default 2nd
| |
o |  changeset:   1:4a149d3fe86e
|/   branch:      new
|    user:        "Ivan Kurnosov
|    date:        Tue Jun 05 17:12:30 2012 +1200
|    summary:     init new
|
o  changeset:   0:05657f61324b
   user:        "Ivan Kurnosov
   date:        Tue Jun 05 17:11:51 2012 +1200
   summary:     init default 
```

# ios - Error compiling tweak in theos

> ID：10891846
> 
> 赞同：1
> 
> 时间：2012-06-05T05:02:07.820
> 
> 标签：ios, objective-c-2.0, cydia, tweak

I set a simple tweak using theos following the tutorial [here](http://brandontreb.com/beginning-jailbroken-ios-development-your-first-tweak/). However when I run make with the headers from [here](https://github.com/Fr0stDev/SpringBoard-iOS5-Headers), I get

```
Making all for tweak WelcomeWagon...
 Preprocessing Tweak.xm...
 Compiling Tweak.xm...
In file included from Tweak.xm:1:
/opt/theos//include/SpringBoard/SpringBoard.h:7:26: error: UIApplication.h: No such file or directory
cc1objplus: warnings being treated as errors
In file included from /opt/theos//include/SpringBoard/UIApplicationDelegate-Protocol.h:7,
                 from /opt/theos//include/SpringBoard/SpringBoard.h:9,
                 from Tweak.xm:1:
/opt/theos//include/SpringBoard/NSObject-Protocol.h:7: warning: duplicate declaration for protocol ‘NSObject’
In file included from /opt/theos//include/SpringBoard/SpringBoard.h:9,
                 from Tweak.xm:1:
/opt/theos//include/SpringBoard/UIApplicationDelegate-Protocol.h:11: warning: duplicate declaration for protocol ‘UIApplicationDelegate’
/opt/theos//include/SpringBoard/UIApplicationDelegate-Protocol.h:35: error: duplicate property declaration ‘window’
make[2]: *** [obj/Tweak.xm.o] Error 1
make[1]: *** [internal-library-all_] Error 2
make: *** [WelcomeWagon.all.tweak.variables] Error 2 
```

After some searching around I also found that some people were using Ryan Petrich's dumped headers, so I emptied the include folder and put his headers in and ran make, with this as the output

```
Making all for tweak WelcomeWagon...
 Preprocessing Tweak.xm...
 Compiling Tweak.xm...
In file included from /opt/theos//include/QuartzCore/QuartzCore-Structs.h:11,
                 from /opt/theos//include/QuartzCore/CAValueFunction.h:9,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/QuartzCore.framework/Headers/CoreAnimation.h:30,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/QuartzCore.framework/Headers/QuartzCore.h:9,
                 from /opt/theos//include/UIKit/UIKit-Structs.h:15,
                 from /opt/theos//include/UIKit/UIGestureRecognizer.h:6,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UISwipeGestureRecognizer.h:9,
                 from /opt/theos//include/UIKit/UISwipeGestureRecognizer.h:10,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UITableView.h:11,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UIPickerView.h:11,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UIAccessibilityAdditions.h:10,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UIAccessibility.h:12,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UIKit.h:10,
                 from /opt/theos//Prefix.pch:4,
                 from <command-line>:0:
/opt/theos//include/IOSurface/IOSurface.h:20:36: error: IOSurface/IOSurfaceAPI.h: No such file or directory
In file included from /opt/theos//include/IOSurface/IOSurface.h:21,
                 from /opt/theos//include/QuartzCore/QuartzCore-Structs.h:11,
                 from /opt/theos//include/QuartzCore/CAValueFunction.h:9,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/QuartzCore.framework/Headers/CoreAnimation.h:30,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/QuartzCore.framework/Headers/QuartzCore.h:9,
                 from /opt/theos//include/UIKit/UIKit-Structs.h:15,
                 from /opt/theos//include/UIKit/UIGestureRecognizer.h:6,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UISwipeGestureRecognizer.h:9,
                 from /opt/theos//include/UIKit/UISwipeGestureRecognizer.h:10,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UITableView.h:11,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UIPickerView.h:11,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UIAccessibilityAdditions.h:10,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UIAccessibility.h:12,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UIKit.h:10,
                 from /opt/theos//Prefix.pch:4,
                 from <command-line>:0:
/opt/theos//include/IOSurface/IOSurfaceAccelerator.h:20: error: ‘IOSurfaceRef’ has not been declared
/opt/theos//include/IOSurface/IOSurfaceAccelerator.h:20: error: ‘IOSurfaceRef’ has not been declared
In file included from /opt/theos//include/QuartzCore/QuartzCore-Structs.h:11,
                 from /opt/theos//include/QuartzCore/CAValueFunction.h:9,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/QuartzCore.framework/Headers/CoreAnimation.h:30,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/QuartzCore.framework/Headers/QuartzCore.h:9,
                 from /opt/theos//include/UIKit/UIKit-Structs.h:15,
                 from /opt/theos//include/UIKit/UIGestureRecognizer.h:6,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UISwipeGestureRecognizer.h:9,
                 from /opt/theos//include/UIKit/UISwipeGestureRecognizer.h:10,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UITableView.h:11,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UIPickerView.h:11,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UIAccessibilityAdditions.h:10,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UIAccessibility.h:12,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UIKit.h:10,
                 from /opt/theos//Prefix.pch:4,
                 from <command-line>:0:
/opt/theos//include/IOSurface/IOSurface.h:27: error: variable or field ‘IOSurfaceFlushProcessorCaches’ declared void
/opt/theos//include/IOSurface/IOSurface.h:27: error: ‘IOSurfaceRef’ was not declared in this scope
In file included from /opt/theos//include/QuartzCore/CAValueFunction.h:9,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/QuartzCore.framework/Headers/CoreAnimation.h:30,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/QuartzCore.framework/Headers/QuartzCore.h:9,
                 from /opt/theos//include/UIKit/UIKit-Structs.h:15,
                 from /opt/theos//include/UIKit/UIGestureRecognizer.h:6,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UISwipeGestureRecognizer.h:9,
                 from /opt/theos//include/UIKit/UISwipeGestureRecognizer.h:10,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UITableView.h:11,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UIPickerView.h:11,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UIAccessibilityAdditions.h:10,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UIAccessibility.h:12,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/Headers/UIKit.h:10,
                 from /opt/theos//Prefix.pch:4,
                 from <command-line>:0:
/opt/theos//include/QuartzCore/QuartzCore-Structs.h:196: error: ‘IOSurfaceRef’ does not name a type
In file included from /opt/theos//include/UIKit/UIKit2.h:52,
                 from /opt/theos//include/MessageUI/MessageUI-Structs.h:8,
                 from /opt/theos//include/MessageUI/ComposeRecipient.h:9,
                 from /opt/theos//include/ChatKit/CKMailComposeRecipient.h:6,
                 from /opt/theos//include/ChatKit/ChatKit.h:41,
                 from /opt/theos//include/SpringBoard/SpringBoard-Structs.h:13,
                 from /opt/theos//include/SpringBoard/SpringBoard.h:8,
                 from Tweak.xm:1:
/opt/theos//include/UIKit/UIImage2.h:85: error: expected type-specifier before ‘IOSurfaceRef’
/opt/theos//include/UIKit/UIImage2.h:85: error: expected `)' before ‘IOSurfaceRef’
/opt/theos//include/UIKit/UIImage2.h:85: error: expected `;' before ‘)’ token
/opt/theos//include/UIKit/UIImage2.h:86: error: expected type-specifier before ‘IOSurfaceRef’
/opt/theos//include/UIKit/UIImage2.h:86: error: expected `)' before ‘IOSurfaceRef’
/opt/theos//include/UIKit/UIImage2.h:86: error: expected `;' before ‘)’ token
/opt/theos//include/UIKit/UIImage2.h:91: error: expected type-specifier before ‘IOSurfaceRef’
/opt/theos//include/UIKit/UIImage2.h:91: error: expected `)' before ‘IOSurfaceRef’
/opt/theos//include/UIKit/UIImage2.h:91: error: expected `;' before ‘)’ token
In file included from /opt/theos//include/UIKit/UIKit2.h:448,
                 from /opt/theos//include/MessageUI/MessageUI-Structs.h:8,
                 from /opt/theos//include/MessageUI/ComposeRecipient.h:9,
                 from /opt/theos//include/ChatKit/CKMailComposeRecipient.h:6,
                 from /opt/theos//include/ChatKit/ChatKit.h:41,
                 from /opt/theos//include/SpringBoard/SpringBoard-Structs.h:13,
                 from /opt/theos//include/SpringBoard/SpringBoard.h:8,
                 from Tweak.xm:1:
/opt/theos//include/UIKit/UIWindow2.h:19: error: expected type-specifier before ‘IOSurfaceRef’
/opt/theos//include/UIKit/UIWindow2.h:19: error: expected `)' before ‘IOSurfaceRef’
/opt/theos//include/UIKit/UIWindow2.h:19: error: expected `;' before ‘)’ token
/opt/theos//include/UIKit/UIWindow2.h:20: error: expected type-specifier before ‘IOSurfaceRef’
/opt/theos//include/UIKit/UIWindow2.h:20: error: expected `)' before ‘IOSurfaceRef’
/opt/theos//include/UIKit/UIWindow2.h:20: error: expected `;' before ‘)’ token
/opt/theos//include/UIKit/UIWindow2.h:21: error: expected type-specifier before ‘IOSurfaceRef’
/opt/theos//include/UIKit/UIWindow2.h:21: error: expected `)' before ‘IOSurfaceRef’
/opt/theos//include/UIKit/UIWindow2.h:21: error: expected `;' before ‘)’ token
/opt/theos//include/UIKit/UIWindow2.h:116: error: expected type-specifier before ‘IOSurfaceRef’
/opt/theos//include/UIKit/UIWindow2.h:116: error: expected `)' before ‘IOSurfaceRef’
/opt/theos//include/UIKit/UIWindow2.h:116: error: expected `;' before ‘)’ token
/opt/theos//include/UIKit/UIWindow2.h:117: error: expected type-specifier before ‘IOSurfaceRef’
/opt/theos//include/UIKit/UIWindow2.h:117: error: expected `)' before ‘IOSurfaceRef’
/opt/theos//include/UIKit/UIWindow2.h:117: error: expected `;' before ‘)’ token
make[2]: *** [obj/Tweak.xm.o] Error 1
make[1]: *** [internal-library-all_] Error 2
make: *** [WelcomeWagon.all.tweak.variables] Error 2 
```

Could anyone tell me what I'm doing wrong? Thanks in advance.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-15T14:42:54.847

我今天发现当前版本的 Ryan Petrich 的转储标头存在同样的问题。

最后我发现解决方案是，

1.  导入转储的 Springboard 标头

2.  将 /System/Library/Frameworks/IOSurface.framework/Headers/IOSurfaceAPI.h 复制到 /opt/theos/include/IOSurface。原因在IOSurface/IOSurface.h！

3.  如果您运行的是 OS X Lion 或更高版本，您可能需要在 /opt/theos/include/IOSurface/IOSurfaceAPI.h 中注释掉以下行：

```
    /* 这个调用让你得到一个 xpcobject_t，它持有对 IOSurface 的引用。
    注意：任何从 IOSurfaceRef 创建的实时 XPC 对象都会隐式增加 IOSurface 的全局使用
    计数一，直到对象被销毁。*/
    // xpc_object_t IOSurfaceCreateXPCObject(IOSurfaceRef aSurface)
    // IOSFC_AVAILABLE_STARTING(_MAC_10_7, __IPHONE_NA);

    /* 此调用允许您获取通过 IOSurfaceCreatePort() 创建的 xpcobject_t 并从中重新创建 IOSurfaceRef。*/
    // IOSurfaceRef IOSurfaceLookupFromXPCObject(xpc_object_t xobj)
    // IOSFC_AVAILABLE_STARTING(_MAC_10_7, __IPHONE_NA);

```

试试看！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T00:48:04.297

我今天刚刚在 2013 年 2 月 13 日做了这个，发现上面的内容有点帮助。有点脑子和谷歌的帮助，我发现你需要做的是：

1.) 获取标题 - 使用 Google 搜索“Ryan Petrich 的转储标题”，这将引导您：[https ://github.com/rpetrich/iphoneheaders](https://github.com/rpetrich/iphoneheaders)

2.) 使用 git 克隆 repo：git clone [https://github.com/rpetrich/iphoneheaders](https://github.com/rpetrich/iphoneheaders)

3.）运行make（由于theos的安装位置在/ opt下，我发现我需要以sudo make的方式运行make。）

4.) 对于每个“找不到错误文件”，我将包含文件复制到我的项目中。

5.) 我相信你的项目文件夹中应该有以下文件夹： AccountSettings IOKit SpringBoard ActorKit IOSurface TelephonyUI AppSupport JavaScriptCore Tutorial.plist Availability2.h MIME Tweak.xm ChatKit Makefile Tweak.xm.original CoreFoundation MediaPlayer UIKit CoreGraphics Message WebCore DAVKit MessageUI WebKit DataAccess MusicLibrary control Foundation PhotoLibrary obj GraphicsServices QuartzCore theos

6.）您需要从上面的答案中执行＃2“将/System/Library/Frameworks/IOSurface.framework/Headers/IOSurfaceAPI.h复制到/opt/theos/include/IOSurface。原因在IOSurface/IOSurface.h ！”

7.）您还需要从上面的答案中进行编辑“如果您正在运行 OS X Lion，您可能需要在 /opt/theos/include/IOSurface/IOSurfaceAPI.h 中注释掉以下行：”

```
/* This call lets you get an xpcobject_t that holds a reference to the IOSurface.
Note: Any live XPC objects created from an IOSurfaceRef implicity increase the IOSurface's global use
count by one until the object is destroyed. */
// xpc_object_t IOSurfaceCreateXPCObject(IOSurfaceRef aSurface)
// IOSFC_AVAILABLE_STARTING(_MAC_10_7, __IPHONE_NA);

/* This call lets you take an xpcobject_t created via IOSurfaceCreatePort() and recreate an IOSurfaceRef from it. */
// IOSurfaceRef IOSurfaceLookupFromXPCObject(xpc_object_t xobj)
// IOSFC_AVAILABLE_STARTING(_MAC_10_7, __IPHONE_NA); 
```

在我的 IOSurfaceAPI.h 中仅供参考，这些是第 252/253 行周围的行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:08:06.593

您不需要导入转储的 Springboard 标头。

# objective-c - 当我将一个字符串粘贴到 Xcode 中时，我总是会收到一个错误，并且必须重新输入它

> ID：10891850
> 
> 赞同：0
> 
> 时间：2012-06-05T05:03:13.273
> 
> 标签：objective-c, xcode, syntax-error

每次我将一行包含字符串的代码粘贴到 Xcode 中时，都会发生这种情况。例如，当我将其粘贴到 Xcode 中时：

```
simonLabel.text = @"Good Job!"; 
```

我收到一条错误消息，提示“程序中有一个意外的'@'”

如果我删除所有内容并完全按照我粘贴的方式重新键入，我不会收到错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-10T11:39:33.733

那里可能会出现太多问题：

1.  `"`可以是您期望的不同角色

2.  `（空格）可以是您期望的不同字符`

`*   看不见的字符。您在编辑器中根本看不到的东西，但他们通过复制粘贴到达了那里。` 

 `所有这些问题都可能发生，因为

1.  您从具有不同编码的网站（或从非常糟糕的作家网站）复制它
2.  您可以从智能编辑器（例如 MS Word、Open Office）中复制它，它会替换一些字符以匹配区域设置（例如引号）或根据语法和自动换行替换/添加空格（例如不间断空格）。`

# php - imagecreatefromstring 的对面在哪里

> ID：10891853
> 
> 赞同：0
> 
> 时间：2012-06-05T05:03:29.347
> 
> 标签：php

我有一个字符串中的图像`$data`。我需要调整该图像的大小，因此将其转换为`image`with `imagecreatefromstring`。如何将调整大小的图像恢复为`$data`变量？我发现的都是`imagepng`同类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:04:43.527

[`imagepng`](http://www.php.net/imagepng)与[输出缓冲](http://www.php.net/book.outcontrol)一起使用：

```
ob_start();
imagepng($image);
$data = ob_get_clean(); 
```

# android - android中的评分栏问题

> ID：10891856
> 
> 赞同：0
> 
> 时间：2012-06-05T05:04:00.917
> 
> 标签：android

我正在制作应用程序，其中我在列表视图上显示速率栏并显示其他 2 个小部件。我在这个适配器中遇到了一些问题，当我对任何**列表项**进行评分并向下滚动列表并返回顶部时，被评分的项目很明显，该特定项目上没有评分显示

假设我给第一个项目 3 星并向下滚动并返回它，它变成了 0

这是我的代码:::

```
package com.AppFavorits;

import java.util.ArrayList;

import android.content.Context;
import android.graphics.drawable.Drawable;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.RatingBar;
import android.widget.TextView;
import android.widget.Toast;

public class ListViewCustomAdapter extends BaseAdapter {

    public Context context;
    LayoutInflater inflator;
    ArrayList<Comment> appname;
    ArrayList<Comment> Packagenm;
    Drawable[] alIcon;
    static float[] rating;

    public ListViewCustomAdapter(Context context, ArrayList<Comment> appname,
            ArrayList<Comment> Packagenm, Drawable[] alIcon) {
        super();

        this.context = context;
        this.appname = appname;
        this.Packagenm = Packagenm;
        this.alIcon = alIcon;
        inflator = LayoutInflater.from(context);
        rating = new float[appname.size()];

        // Log.i("Parse adapter ", " Date adapter -> " +
        // arr_ScheduledDepartureTime[1]);

    }

    public int getCount() {
        // TODO Auto-generated method stub
        return appname.size();

    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return appname.get(position);
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    public static class ViewHolder {
        ImageView imgvFavrowiconappicon;
        TextView txvxFavrowiconappname;
        RatingBar ratingBar1;

    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        // View vi=convertView;
        // View view = null;
        ViewHolder viewholder;

        if (convertView == null) {
            viewholder = new ViewHolder();
            convertView = inflator.inflate(R.layout.outbox_list_item, null);
            viewholder.ratingBar1 = (RatingBar) convertView
                    .findViewById(R.id.ratingBar1);
            RatingBar.OnRatingBarChangeListener l = new RatingBar.OnRatingBarChangeListener() {
                public void onRatingChanged(RatingBar ratingBar, float rating,
                        boolean fromTouch) {
                    /*
                     * Integer myPosition=(Integer)ratingBar.getTag(); RowModel
                     * model=getModel(myPosition);
                     * 
                     * model.rating=rating;
                     * 
                     * LinearLayout parent=(LinearLayout)ratingBar.getParent();
                     * TextView label=(TextView)parent.findViewById(R.id.label);
                     */

                    // label.setText(model.toString());
                    Log.i("TAg", "rate" + rating);
                }
            };

            viewholder.ratingBar1.setOnRatingBarChangeListener(l);

            viewholder.txvxFavrowiconappname = (TextView) convertView
                    .findViewById(R.id.txvxFavrowiconappname);
            viewholder.imgvFavrowiconappicon = (ImageView) convertView
                    .findViewById(R.id.imgvFavrowiconappicon);
            // viewholder.ratingBar1 = (RatingBar)
            // convertView.findViewById(R.id.ratingBar1);
            convertView.setTag(viewholder);

        } else {
            viewholder = (ViewHolder) convertView.getTag();

        }

        viewholder.imgvFavrowiconappicon.setImageDrawable(alIcon[position]);
        viewholder.txvxFavrowiconappname.setText(appname.get(position)
                .toString());

        viewholder.ratingBar1.setTag(new Integer(position));
        viewholder.ratingBar1.setRating(0);
        /*
         * viewholder.ratingBar1.setOnTouchListener(new OnTouchListener() {
         * 
         * @Override public boolean onTouch(View v, MotionEvent event) { if
         * (event.getAction() == MotionEvent.ACTION_UP) { // TODO perform your
         * action here } return true; } });
         */
        return convertView;

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:10:12.193

您`getItemId()`在适配器类中的方法应该返回`position`not `0`。

```
public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    } 
```

**更新：**

我最近添加[**了带有 CheckBox Scrolling Issue 的 ListView**](http://www.lalit3686.blogspot.in/2012/06/today-i-am-going-to-show-how-to-deal.html)。同样应该适用于此，只需尝试使用其中`position`的 ratingbar并将当前等级设置为它。`onRatingChanged()``ratingBar.getTag();`

# c# - CloudBlob.DownloadToStream 返回 null

> ID：10891857
> 
> 赞同：15
> 
> 时间：2012-06-05T05:04:04.397
> 
> 标签：c#, azure, cloud, blob, azure-storage

我正在尝试通过流从 cloudBlob 下载文件。我参考这篇文章[CloudBlob](http://jeanpaulva.com/category/azure/)

这是下载blob的代码

```
public Stream DownloadBlobAsStream(CloudStorageAccount account, string blobUri)
{
    Stream mem = new MemoryStream();
    CloudBlobClient blobclient = account.CreateCloudBlobClient();
    CloudBlockBlob blob = blobclient.GetBlockBlobReference(blobUri);

    if (blob != null)
        blob.DownloadToStream(mem);

    return mem;
} 
```

以及将其转换为字节数组的代码

```
 public static byte[] ReadFully(Stream input)
    {
        byte[] buffer = new byte[16 * 1024];
        using (MemoryStream ms = new MemoryStream())
        {
            int read;
            while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
            {
                ms.Write(buffer, 0, read);
            }
            return ms.ToArray();
        }
    } 
```

但我总是得到空值。以下是流文件的内容。

![在此处输入图像描述](../Images/0ac744e21a76d029ce52fad902c33764.png)

这有什么问题？请帮忙。

**编辑**

`ReadFully`不允许在方法内部设置Position为0 ，所以我把它放在里面`DownloadBlobAsStream`

现在应该可以了：

```
public Stream DownloadBlobAsStream(CloudStorageAccount account, string blobUri)
{
    Stream mem = new MemoryStream();
    CloudBlobClient blobclient = account.CreateCloudBlobClient();
    CloudBlockBlob blob = blobclient.GetBlockBlobReference(blobUri);

    if (blob != null)
        blob.DownloadToStream(mem);
    mem.Position = 0;   
    return mem;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-05T06:22:55.797

您的问题是您的输入流指针设置为结束（参见屏幕截图，长度和位置都显示相同的值），这就是为什么当您阅读它时，您总是得到空值。您需要使用**Stream.Position = 0**将输入流指针设置为 0 ，如下所示：

```
public static byte[] ReadFully(Stream input)
{
    byte[] buffer = new byte[16 * 1024];

    input.Position = 0; // Add this line to set the input stream position to 0

    using (MemoryStream ms = new MemoryStream())
    {
        int read;
        while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
        {
            ms.Write(buffer, 0, read);
        }
        return ms.ToArray();
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-08-09T22:49:32.390

在 CloudBlob 对象上使用 OpenRead() 方法怎么样？

```
public static string ReadFully(string blobUri, string itemUri)
{
    // e.g. itemUri == "foo.txt"
    //   if there is a folder "bar" with foo.txt, provide instead: "bar/foo.txt"
    CloudBlobContainer cloudBlobContainer = new CloudBlobContainer(new Uri(blobUri));
    CloudBlob blobReference = cloudBlobContainer.GetBlobReference(itemUri);

    using (var stream = blobReference.OpenRead())
    {
        using (StreamReader reader = new StreamReader(stream))
        {
            return reader.ReadToEnd();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-08T15:02:31.013

我已经尝试实现上面的代码，但令我惊讶的是，该函数`GetBlockBlobReference`不存在`CloudBlobClient`于`CloudBlockBlob`.

也许DLL会随着时间而改变。

因此，我向您介绍我的改编：

```
public class BlobStorageHelper
{
    private readonly CloudBlobClient _blobClient;
    protected readonly CloudStorageAccount StorageAccount;
    public string _containerName { get; set; }

    public BlobStorageHelper()

    {
        _blobClient = base.StorageAccount.CreateCloudBlobClient();
        _containerName = ConfigurationManager.AppSettings["StorageContainerName"];
        StorageAccount = CloudStorageAccount.Parse(ConfigurationManager.AppSettings["StorageConnectionString"]);
    }

    protected Stream DownloadBlobAsStream(string blobUri)
    {
        CloudStorageAccount account = this.StorageAccount;
        CloudBlockBlob blob = GetBlockBlobReference(account, blobUri);

        Stream mem = new MemoryStream();
        if (blob != null)
        {
            blob.DownloadToStream(mem);                
        }

        return mem;
    }

    private CloudBlockBlob GetBlockBlobReference(CloudStorageAccount account, string blobUri)
    {
        string blobName = blobUri.Substring(blobUri.IndexOf("/" + _containerName + "/")).Replace("/" + _containerName + "/", "");
        CloudBlobClient blobclient = account.CreateCloudBlobClient();
        CloudBlobContainer container = _blobClient.GetContainerReference(_containerName);
        container.CreateIfNotExists();
        CloudBlockBlob blob = container.GetBlockBlobReference(blobName);
        return blob;
    }

    public byte[] DownloadBlobAsByeArray(string blobUri)
    {
        Stream inputStream = DownloadBlobAsStream(blobUri);

        byte[] buffer = new byte[16 * 1024];

        inputStream.Position = 0; // Add this line to set the input stream position to 0

        using (MemoryStream ms = new MemoryStream())
        {
            int read;
            while ((read = inputStream.Read(buffer, 0, buffer.Length)) > 0)
            {
                ms.Write(buffer, 0, read);
            }
            return ms.ToArray();
        }
    }

} 
```

# java - 如何测量视图的渲染时间？

> ID：10891860
> 
> 赞同：0
> 
> 时间：2012-06-05T05:04:21.933
> 
> 标签：java, android

我正在使用 a`ChartEngine`创建散点图。每个散点图是一个`View`.
我将如何测量渲染所需的时间`View`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:12:59.710

像这样

```
class MyView extends View {

    @Override
    protected void onDraw(Canvas canvas) {
        Time t = new Time();
        t.setToNow();
        long timeStart = t.toMillis(false);

        super.onDraw(canvas);

        t.setToNow();
        long timeToDraw = t.toMillis(false) - timeStart;

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T05:13:30.407

您可以在将记录器重定向到控制器中的视图之前放置一个记录器并打印时间戳，还可以在最后放置另一个记录器并再次打印时间戳，您可以比较两个时间戳，差异将是渲染时间。

# javascript - Javascript confirm box with yes or no button

> ID：10891863
> 
> 赞同：-2
> 
> 时间：2012-06-05T05:04:31.897
> 
> 标签：javascript

I have to save record depend on the user response either `yes` or `no` , in java script i need confirm box with `yes` and `no` button. If i press save button all records should be Save, other wise focus on particular control like `textbox`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:11:56.323

```
 <button onclick="myFunction()">Try it</button> 
       <p id="demo"></p>
       <script type="text/javascript">
          function myFunction(){
             var x;
             var r=confirm("Press a button!");
             if (r==true){
                 x="You pressed OK!";
             }
             else{
                 x="You pressed Cancel!";
             }
             document.getElementById("demo").innerHTML=x;
         }
      </script> 
```

您可以使用默认值，例如 ok 或 cancel，而不是 yes 或 no。

# php - 如何在 $this->fetch() cakephp 2.1 上指定值

> ID：10891864
> 
> 赞同：2
> 
> 时间：2012-06-05T05:04:35.520
> 
> 标签：php, cakephp, view, controller

我们都知道 $content_for_layout 现在在 cakephp 2.1 中被弃用并改为 $this->fetch('content');

无论我们把 fetch('content') 放在哪里，都会看到布局为标签的视图的内容。

我的问题是，例如我有一个视图 navigation()，该视图的内容将放在 $this->fetch('nav_view') 上，而对于视图 main_board()，内容将放在 $this->fetch ('main_board'),

这两个提取将在相同的布局上输出。是否可以？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T14:09:47.360

在您的视图/元素/助手中的某处：

```
$this->start('nav_view');
// render your 'nav_view' stuff here
echo $this->element('...');
$this->end(); 
```

渲染与内容相同：

```
// in layout
$this->fetch('nav_view'); 
```

显然，这现在记录在食谱中，在[Using view blocks](http://book.cakephp.org/2.0/en/views.html#using-view-blocks)下。

# php - 从 JSON 网页解析值

> ID：10891872
> 
> 赞同：0
> 
> 时间：2012-06-05T05:06:14.367
> 
> 标签：php, javascript, html

使用 javascript 或 php，如何从网页中获取值？这是我试图解析的 JSON：

> {"error":[""],"templateHtml":"", "_visitor_conversationsUnread":"0","_visitor_alertsUnread":"0"}

我正在尝试获取“_visitor_alertsUnread”的值。我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:23:31.313

您可以使用正则表达式、使用 json 解码或简单索引来解析它。但是，在这三个中，json 是最干净和正确的方法。

1）JSON解码：

```
$page = file_get_contents($url);
$json_arr = json_decode($string,true);
return $json_arr['_visitor_alertsUnread']; 
```

2）正则表达式：

```
$page = file_get_contents($url);
$pattern = ".*?_visitor_alertsUnread\\\":\\\"(\\d)\\\"";
preg_match($pattern, $page, $matches);
return $matches[1]; 
```

3）索引：

```
$page = file_get_contents($url);
$needle = "_visitor_alertsUnread";
$startpos = strrpos($page, $needle) + strlen($needle) + 3;
$endpos = strrpos($page, "\"", $startpos);
return substr($page, $startpos, $endpos); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:17:35.020

响应采用 JSON 格式。

如果您只想获取 _visitor_alertsUnread 的值，那么您可以执行类似的操作。

```
var JSONObj = {"error":["Security error occurred. Please press back, refresh the page, and try again."],"templateHtml":"\n\n\n\n\t</a>\n\t\n\t\tThe following error occurred:</h2>\n\t\t\n\t\t\n\t\t\n\t\t\tSecurity error occurred. Please press back, refresh the page, and try again.</label>\n\t\t\n\t\t</div>\n\t\n</div>","_visitor_conversationsUnread":"0","_visitor_alertsUnread":"0"};

alert(JSONObj._visitor_alertsUnread); 
```

# c# - Apply datatemplate to custom object?

> ID：10891873
> 
> 赞同：0
> 
> 时间：2012-06-05T05:06:19.613
> 
> 标签：c#, wpf

Assuming I have a class derived from Shape. I'm looking for way how to implement support for binding it with datatemplate. A datatemplate looking something like this:

```
<DataTemplate>    
  <Grid x:Name="grid">
        <Path x:Name="path" Data="F1 M 0.0692474,6.76634C -2.5902,6.76634 -4.91351,8.20551 -6.16436,10.3475L 0.0665311,-10.3179L 6.29167,10.3284C 5.03818,8.19696 2.72079,6.76634 0.0692474,6.76634 Z " />
  </Grid>
</DataTemplate> 
```

It's clear for me how to apply Datatemplate to controls, such as buttons, textboxs, listviews and so on.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:36:36.067

`TemplatePartAttribute`做你喜欢 的事。有关如何编写支持模板的自定义控件以及如何在其中混合形状的信息，[请参阅本教程。](http://www.abhisheksur.com/2011/07/writing-reusable-custom-control-in-wpf.html)

# php - 关于 PHP 中的标头错误

> ID：10891874
> 
> 赞同：1
> 
> 时间：2012-06-05T05:06:24.677
> 
> 标签：php

我正在开发一个 PHP 项目，我试图使用标头（位置：something.php）从一个页面重定向到另一个页面。它在本地机器上工作正常，但是当上传到服务器时，出现以下错误：

```
Warning: Cannot modify header information - headers already sent by (output started at /homepages/4/d404449574/htdocs/yellowandred_in/newTest/editHome.php:15) in /homepages/4/d404449574/htdocs/yellowandred_in/newTest/editHome.php on line 43 
```

我已经尝试过`include`, `include_once`，但它给出了其他错误，例如`require`：`require_once`

```
Cannot redeclare logged_in() (previously declared in C:\wamp\www\ynrNewVersion-1\editHome.php:3) in C:\wamp\www\ynrNewVersion-1\adminIndex.php on line 5 
```

我的代码

```
<?php
session_start();
function logged_in() {
  return isset($_SESSION['username']);
}

function confirm_logged_in() {
  if (!logged_in()) {
    include "error404.php";
    exit;
  }
}

confirm_logged_in();
require_once("connection.php");

$query="select * from home";
$homeInfo = mysql_query($query, $connection);
$result = mysql_fetch_array($homeInfo);

$content = $result['content'];
$rssFeeds = $result['rssFeeds'];
$message = "";
if(isset($_POST['submit'])){
  $content = $_POST['content'];
  $rssFeeds = $_POST['rssFeeds'];
  if($content == "" || $rssFeeds == ""){
    $message = "Please enter into all the fields";
  } else {
    $query = "UPDATE home SET content='$content',rssFeeds='$rssFeeds' WHERE id=1 LIMIT 1";
    $result = mysql_query($query,$connection);
    if(!$result){
      echo "error".mysql_error();
    }
    if ($result == 1) {
      header("Location:adminIndex.php");
    } else {
      $message = "Error Occurred";
    }
  }
}
if(isset($_POST['cancel'])){
  header("Location:adminIndex.php");
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:24:08.927

问题是您在标头功能之前有回声。

```
if(!$result){
  echo "error".mysql_error();
} 
```

在你的两个标题（“位置：adminIndex.php”）之前，你不能回显任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:09:34.357

在 PHP 页面顶部使用 ob_start()；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T05:10:19.460

您需要在标头函数之后放置一个 exit() 或 die() - 否则脚本的其余部分将继续执行。

重定向可以采用相对或绝对 URL。问题在于冒号前的空格。试试这样：

```
header("Location: adminIndex.php");
die(); 
```

# php - 如何从回调函数返回控制或在中间array_filter处理中中断数组的处理

> ID：10891875
> 
> 赞同：5
> 
> 时间：2012-06-05T05:06:28.647
> 
> 标签：php, arrays

一旦条件满足数组的一个元素，我们可以中断回调的执行吗？

前任 。

```
$a = array(1,2,3,4,5);
foreach($a as $val){

    if ($val == 3){
      break;
    }

} 
```

如果我们为它写回调，它将如下所示

```
$result = array_filter($a, function(){
      if ($val == 3){
          return true;
        }
}); 
```

在回调中，它将遍历所有数组元素，尽管在 3 处满足条件。其余两个元素 4、5 也将通过回调

我想要这样的回调函数，它将打破回调一个所需的条件匹配并停止执行其余元素

有可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T06:32:11.553

您可以使用[静态变量](http://php.net/manual/language.variables.scope.php)来做到这一点。静态变量在回调函数内部具有局部范围，但在调用之间保留其值。

就其值而言，它的行为类似于全局变量，但具有局部范围：

```
$callback = function($val)
{
    static $filter = false;

    if ($val == 3) {
        $filter = true;
    }

    return $filter;        
}; 
```

此回调将返回`false`直到`$val == 3`. 然后它将返回`true`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T06:54:31.263

我不认为你可以用 array_filter 实现这一点，但你可以这样做：

```
$a = array(1,2,3,4,5);
try {
    array_walk($a, function($value, $key) use(&$a) {
        if ($value == 3){
            throw new Exception("condition match");
        }
        unset($a[$key]);
    });
}
catch(Exception $e) { }
var_dump($a); 
```

# javascript - 多选下拉选项值只取一个词

> ID：10891887
> 
> 赞同：0
> 
> 时间：2012-06-05T05:08:33.817
> 
> 标签：javascript, jquery, html, json

我在表格中有一个多选下拉菜单

```
<td>
<select multiple="multiple" name="multiple" id="multiple" class="required">

</select>
</td> 
```

选项值由 json 数据填充。

```
for(var i=0;i<jsonString.length;i++){

            var name=jsonString[i].Name;
            $('#multiple').append('<option value=' + name + '>' + name + '</option>'); 
        } 
```

当用户开始选择时，我试图在段落中显示每个选定的项目

```
<script>
function displayVals() {
  var multipleValues = $("#multiple").val() || [];
  $("p").html( " <b>Selected Properties:</b> " + 
  multipleValues.join(", "));
        }
 $("select").change(displayVals);
 displayVals();

</script> 
```

但是在该段落中，每个选择我只得到一个单词，而不是完整的名称。（说如果我选择“一些文本”，我只会得到“一些”）。有人可以指出错误在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:36:50.377

使用 JSON 数据填充时

```
<option values= > instead of `<option value> 
```

现在对我来说工作得很好。`

# facebook - 使用 perl 的表单和 POST

> ID：10891889
> 
> 赞同：-2
> 
> 时间：2012-06-05T05:08:35.473
> 
> 标签：facebook, perl, forms, http, post

我有这个应该填写[http://faceoook.com/recover.php](http://faceoook.com/recover.php)上的电子邮件表格 ，如您所知，您可以通过电子邮件、姓名或电话号码进行搜索。所以我试图通过电子邮件搜索，并在搜索完成后获取该页面的内容以查看是否找到了配置文件，但代码似乎不起作用。

```
use HTTP::Request::Common;
use LWP::UserAgent;
$email="blabla\@hotmail.com";
my %data=(email=>$email);

my $user_agent = 'Mozilla/6.0';
my $Browser = LWP::UserAgent->new;
$Browser->agent($user_agent);
$ua=$Browser->post('https://www.facebook.com/recover.php',\%data);
if($ua->content=~/couldn\'t/){        #"couldn't" is part of the message displayed when                
print "Not Found";                    # input doesn't match
}
elsif ($ua->content=~/name/) {
print "Found";
}
else {
print "Not found"; 
}

$result=$ua->content;
open FILE,">","me.txt" or die $!;
print FILE $result;
close FILE; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:41:40.293

*   `use strict`
*   使其在下编译`strict`
*   查看手册页，**您的代码**`LWP::UserAgent`存在问题，您必须自己发现，以便记住
***   根据手册页中使用的约定检查您的变量名称*   查看方法（考虑到 Facebook 有一个 API，IIRC）*   无需转义正则表达式中的单引号**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:09:51.033

您应该将您的请求发布到表单操作字段中的 URL（当您使用显示表单的页面的 URL 时）。

还将任何隐藏字段添加到您的`%data`.

查看页面的 HTML 代码（或使用某种*形式的检查*器）以获取正确的 URL 和隐藏字段（javascript 代码，如果存在，可能会使事情进一步复杂化）。

然后`use strict`（`use warnings`以及）正如 Lumi 已经说过的那样。**

# ruby-on-rails - AWS::S3::Bucket:Class 的未定义方法“find”

> ID：10891891
> 
> 赞同：3
> 
> 时间：2012-06-05T05:08:41.087
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-s3

我正在为我的 rails 项目实施 Amazon S3 上传器。

我正在尝试访问一个存储桶，以便我可以将所有图像分配给一个变量并列出它们。

当我尝试在上传控制器中查看我的新操作时，我不断收到以下错误：

```
undefined method `find' for AWS::S3::Bucket:Class 
```

这是我的 uploads_controller.rb

```
class UploadsController < ApplicationController
require 'aws/s3'

  def new

    photo_bucket = AWS::S3::Bucket.find('photos')
    @photos = photo_bucket.objects
  end
end 
```

find 方法记录在这里[http://amazon.rubyforge.org/](http://amazon.rubyforge.org/)。

关于这里发生了什么的任何线索？

谢谢。

这是我的 Gemfile：

```
gem 'paperclip'
gem 'aws-s3'
gem 'aws-sdk'
gem 'rails', '3.2.0'
gem 'bcrypt-ruby', '3.0.1'
gem 'nokogiri'
gem 'kaminari'
gem 'acts-as-taggable-on', '~> 2.2.2'
gem 'omniauth-twitter'
gem 'omniauth-facebook'
gem "friendly_id", "~> 4.0.1" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T11:19:31.817

您不能同时使用 aws-s3 和 aws-sdk，因为它们会相互冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:00:50.013

在这里工作。如果您转到控制台并执行以下操作会发生什么：

```
require 'aws/s3'
AWS::S3::Bucket.methods.find_all{|m| m=~/find/ } 
```

? 我正在使用 aws-s3 0.6.3。如果仍然没有这样的方法，那么也许 aws-sdk 是罪魁祸首？我以前从未使用过它。

# javascript - 将模型的 urlRoot 覆盖到函数失败

> ID：10891894
> 
> 赞同：2
> 
> 时间：2012-06-05T05:08:50.167
> 
> 标签：javascript, backbone.js

当我尝试覆盖模型的 urlRoot 属性并对该模型进行提取时，urlRoot 实际上将整个函数作为字符串返回。这是被覆盖的 urlRoot 的样子：

```
urlRoot: function() {
  return "test";
}, 
```

它返回以下内容： `http://localhost:8000/items/function%20()%20%7B%20%20%20%20%20%20return%20%22test%22;%20%20%20%20%7D`

另外，URL 的 items 部分来自哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T05:20:40.627

URLRoot 应为**静态字符串**

*   在施工期间定义或

*   在运行时

`function`如果逻辑在于 url 的构造，您可以覆盖 URl 。

### 例子

```
Backbone.Model.extend({

..
urlRoot:"test",
url:function(){

return this.urlRoot + "/" + this.cid;

},
..

}): 
```

# ios - 如何为 UIImageView 优化图像

> ID：10891902
> 
> 赞同：1
> 
> 时间：2012-06-05T05:09:48.420
> 
> 标签：ios, xcode, image, optimization, uiimage

我有一个加载图像的`ScrollView`多个s。它在加载图像时运行得非常流畅。`UIImageView``.jpg`

如何优化图像以使 iOS 更快地加载它们？使用哪个工具？具体格式和设置是什么？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:26:26.323

将它们作为 png 并使用“imageNamed”方法预加载它们。此方法将缓存它们，从而加快加载速度。但它也知道如何处理内存，这意味着如果您的内存不足，它将卸载它们。

或者，根据大小，您可以创建这些图像的缩略图版本以供显示。这就是图像选择器非常流畅地显示大量图像的方式。

阅读此问题/答案：[如何将图像加载到 iphone 系统缓存中？](https://stackoverflow.com/questions/3207847/how-can-i-load-images-into-the-iphone-system-cache)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:18:45.303

使用缓存的图像。第一次可能需要时间，但之后会更快。

# yii - 从不属于我所在的当前控制器的表中获取最后插入的 id

> ID：10891903
> 
> 赞同：0
> 
> 时间：2012-06-05T05:09:58.547
> 
> 标签：yii

我需要从不属于*当前模型*或*当前数据库连接*的表中获取最后插入的 ID ：现在我在表中（pdtlisting），但我想从表中获取最后插入的 id（deallisting）。我怎么才能得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:26:28.597

尝试这个..

它适用于 mySql..

```
LAST_INSERT_ID() 
```

**或者**

它的 PHP ..

```
mysql_insert_id()

All the last_insert_id functions (be they PHP wrappers or the native mySQL one) typically refer to the last ID created using the current database connection. The last login was probably not created during the same request you are showing the table in, so this method won't work for you.

Use a normal SELECT to find out the newest login instead - e.g. by using ORDER by creationtime DESC LIMIT 1. 
```

**或者** 在 Yii 中，你可以像这样找到最后插入的 id ..

```
Yii::app()->db->getLastInsertID(); 
```

你也可以参考这个链接..

[http://www.yiiframework.com/doc/api/1.0/CActiveRecord#primaryKey-detail](http://www.yiiframework.com/doc/api/1.0/CActiveRecord#primaryKey-detail)

# web-services - 如果我删除，是否有必要定义 AnnotationMethodHandlerAdapter ?

> ID：10891905
> 
> 赞同：0
> 
> 时间：2012-06-05T05:10:03.740
> 
> 标签：web-services, spring, spring-mvc, url-mapping

如[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html中所述](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html)

> Spring 3 引入了一个 mvc XML 配置命名空间，它简化了 Web 应用程序中 Spring MVC 的设置。无需注册 AnnotationMethodHandlerAdapter 等低级 bean，您可以简单地使用命名空间及其更高级别的构造。这通常是首选，除非您需要在 bean 级别对配置进行更细粒度的控制。

我已经使用了我的自定义 DefaultAnnotationHandlerMapping，所以我需要`</mvc:annotation-driven>`从 xml 配置中删除，以避免配置被 `</mvc:annotation-driven>`.

是否有必要声明 bean`AnnotationMethodHandlerAdapter`或者这将设置为默认值？

请建议。

# ajax - 在动作决定上将错误返回给 ajax

> ID：10891909
> 
> 赞同：0
> 
> 时间：2012-06-05T05:10:21.140
> 
> 标签：ajax, ruby-on-rails-3, jquery

我有一个看起来像这样的控制器动作 -

```
 def upvote
      @post = Post.find(params[:id])
      if user_has_rated_post?

        # I want to interrupt AJAX here

        redirect_to[:forum, @post.question], :notice => "You already voted for this post"
      else
        @post.upvote
        add_rating_to_post(1, @post)
        @post.save

        redirect_to[:forum, @post.question], :notice => "Post Up Voted"
      end
    end 
```

我有一个 AJAX 调用来对一个帖子进行投票，它工作得很好，除非我需要它来停止 AJAX 调用，如果第一个条件是 user_has_rated_post？满足。

所以问题是我如何中断或强制错误返回 AJAX，或者我应该尝试以另一种方式解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:05:35.647

是的，您必须返回 jQuery（或您的 AJAX 解决方案）解释为错误的内容。然后你将不得不在 javascript 代码中处理这个错误（或者如果合适的话什么也不做）。我认为任何高于 400 的东西按照惯例都被认为是错误的。查看 HTTP 状态代码列表并选择最适合您的一个[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)。在这里，我敢打赌 403 - 服务器理解请求，但拒绝执行。你总是可以只渲染 500，但我认为最好是具体的。

# javascript - JavaScript：为什么我在使用文字对象自定义方法时不断收到此错误？

> ID：10891922
> 
> 赞同：0
> 
> 时间：2012-06-05T05:12:29.283
> 
> 标签：javascript, arrays, methods, object-literal

`ctx`与其他画布属性一起预定义。我不想用大量代码轰炸页面。

我正在构建一组文字对象，它们有一个方法。当我尝试调用该方法时，它说它未定义，如下所示：

```
var enemiesArray = [];

function createEnemy(ene) {
    for (e = 0; e <= ene; e++) {
        var t = Math.floor(Math.random() * 291)
        var p = Math.floor(Math.random() * 101)
        var enemies = {
            x: t,
            y: p,
            hp: 20,
            dir: 0,
            damageImage: function () {
                return "bomber4.png";
            }
        }
        enemiesArray.push(enemies);
    }
}
//an interval is set to call the following function:
function drawEnemey() {
    for (zdp in enemiesArray) {
        img = new Image();
        img.src = "Images/" + enemiesArray[zdp].damageImage(); //this is where I get the    error.
        img.style.width = "20px";
        ctx.drawImage(img, enemiesArray[zdp].x, enemiesArray[zdp].y);
        //move from side to side
        if (enemiesArray[zdp].dir == 0) {
            //move left
            enemiesArray[zdp].x -= 1;
            if (enemiesArray[zdp].x <= 0) enemiesArray[zdp].dir = 1;
        } else {
            //move right
            enemiesArray[zdp].x += 1;
            if (enemiesArray[zdp].x >= 290) enemiesArray[zdp].dir = 0;
        }
        //check if they are hit
    }
} 
```

我不明白的是，当我按原样运行代码时，`enemiesArray[zdp].x`通过`enemiesArray[zdp].dir`定义，但`enemiesArray[zdp].damageImage()`不是。

# qt - 从 QThread 启动 QProcess

> ID：10891923
> 
> 赞同：0
> 
> 时间：2012-06-05T05:12:30.520
> 
> 标签：qt, qthread, qprocess

我在 Qt 中使用 QThreads，我需要从 Qt 线程中启动命令行可执行文件并在线程的上下文中运行它。

我已经使用了下面提到的代码，它似乎运行良好。但是，我想知道是否允许这种用法，因为我们是从 QThread 中启动 QProcess。

```
void Help_Menu_Thread::run()
{
    Insert_Log("INFO::Help file referred by Admin");
    QProcess HelpStart;
    HelpStart.execute("c:\\windows\\hh.exe LPRS_help.chm");
    HelpStart.close();
} 
```

等待你的回复。

问候，

索拉布·G。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:15:19.877

只要您的主程序不必等待 qprocess 的输出或完成，就可以安全地使用这种方式。`HelpStart.waitForFinished()`此 helpstart 进程将从作为其父进程的线程开始独立运行。但是如果您在调用之前使用它会更安全`HelpStart.close();`

# java - 未捕获的 SyntaxError：意外的令牌 <

> ID：10891927
> 
> 赞同：0
> 
> 时间：2012-06-05T05:13:05.100
> 
> 标签：java, spring, spring-mvc, file-upload, ajax-upload

我`ajaxupload.js`从[这里](https://github.com/valums/ajax-upload)使用，我看到文件上传工作正常。但我得到`<pre style="word-wrap: break-word; white-space: pre-wrap;">{"id":"006","path":"006.png"}</pre>`了回应。

我认为响应应该是公正`{"id":"006","path":"006.png"}`的，但由于某些原因它被包裹起来`<pre>`，因此`Uncaught SyntaxError: Unexpected token <`.

我正在使用spring mvc 3，tomcat。我正在使用`java.io.Writer`将响应写为`writer.write(json.toString());`

有人可以帮我理解这个错误以及如何解决它吗？

谢谢。

**更新**：

**代码**：

```
<form id="app-form" class="cols" action="#" method="POST">
    <fieldset class="w50">                              
        <!--  set of form fields -->
    </fieldset>   
    <fieldset class="w50">                              
        <button id="uploadButton" class="csbutton-grey" >Upload</button>
        <ul id="locationImages"></ul>
    </fieldset>
<div style="float: left;">
    <button type="submit" class="cool-button">Submit</button>
</div>
</form>

$(document).ready(function(){
    var button = $('#uploadButton'), interval;

    new AjaxUpload(button, {
        action: 'uploadImage', 
        name: 'qqfile',
        responseType: "json",
        onSubmit : function(file, ext){
            this.disable();
            console.log("file - " + file);
            console.log("ext - " + ext);
            if (! (ext && /^(jpg|png|jpeg|gif)$/.test(ext))){
                alert('Error: invalid file extension');
                return false; 
            }
            else {
                $.ajax({
                    type:"GET",
                    url:"file",
                    data:'file='+file,
                    success:function(data, textStatus, jqXHR){
                        console.log(jqXHR.status);
                        console.log(data);
                    },
                    error:function(jqXHR, textStatus, errorThrown) {
                        console.log(jqXHR.status);
                    },
                });                 
            }
        },
        onComplete: function(file, response){
            this.enable();
            console.log("file - " + file);
            console.log("response.id - " + response.id + ", response.path - " + response.path);
            $('<li></li>').appendTo('#locationImages').text(file);                      
        }
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:23:56.890

如果要将 JSON 发送到客户端，请使用[Jackson](http://jackson.codehaus.org/)。Spring MVC 对它有原生支持。像这样创建一个 bean 类：

```
public class Result{
private String id;
private String path;
public Result(String id, String path){
this.id=id;this.path=path;}
public Result(){}
// add getters and setters
} 
```

现在像这样创建你的控制器方法

```
@ResponseBody // this is important
@RequestMapping("/path/to/mapping")
public Result someMethodName(SomeParameter param1, SomeParameter param2){
    // do something here
    return new Result(id, path);
} 
```

只要您的类路径中有 Jackson 并通过 配置了 Spring 应用程序`<mvc:annotation-config />`，这将自动将您的响应对象序列化为正确的 JSON（包括正确的 mime 类型）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T06:55:53.220

您是否像在 AjaxUpload 中一样设置了`responseType`属性？`json`

# php - 我可以使用 Wordpress 作为 API 将内容加载到我的网站吗？

> ID：10891931
> 
> 赞同：0
> 
> 时间：2012-06-05T05:13:40.947
> 
> 标签：php, wordpress

我正在使用 Wordpress 来管理我网站中的帖子，但我不想使用 Wordpress 模板/可视化。我将仅使用它来管理内容并进行一些编程以在我的网站中显示内容。

好吧，我可以访问 Wordpress 数据库并使用我自己的查询加载内容。但我想知道使用 Wordpress 在我的网站和 Wordpress 数据库之间建立桥梁是否可行。

简单来说，我想知道 Wordpress 是否提供了已经管理数据库连接、查询和返回一些对象的方法`getAllPosts()`，`getAllComments`或者我需要在我的应用程序中构建它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:37:35.047

不是原生 wordpress，但通过插件这是非常“可行的”。示例：[http](http://code.google.com/p/wordpress-posts-api/) ://code.google.com/p/wordpress-posts-api/声称可以为帖子执行您想要的操作，您也可以扩展以加载评论 - 或者您可能会找到一个确切的插件想要稍微搜索一下。

我从来没有真正使用过其他人为此编写的内容，但已经构建了类似的功能来公开 XML 提要的帖子等（例如，然后显示在 Flash 中）。如果你从别人的插件开始并扩展，相对容易。

只是一个警告 - 这些插件非常适合在完整的 WordPress 环境中运行，因此很容易运行。缺点是它们在完整的 WordPress 环境中运行，因此在高压力下效率低下。如果您要锤击它，我会先编写一个缓存缓冲区，并且仅在缓存到期时才对 WordPress 进行完整调用。

# c# - 在不使用 OData 约定的情况下传递查询字符串参数？

> ID：10891935
> 
> 赞同：8
> 
> 时间：2012-06-05T05:14:07.213
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api, asp.net-mvc-routing

有没有办法在不使用此处概述的 OData 约定的情况下将查询字符串参数传递给 ASP.NET MVC4 Web Api 控制器？

[http://www.asp.net/web-api/overview/web-api-routing-and-actions/paging-and-querying](http://www.asp.net/web-api/overview/web-api-routing-and-actions/paging-and-querying)

我有一些使用 Dapper 构建的存储库方法，它们不支持 IQueryable，并且希望能够在不使用 OData 约定的情况下手动对它们进行分页，但是每当我尝试使用传统的 ASP.NET 方式时，我都会收到“找不到路由”错误。

例如，这是一条路线：

```
context.Routes.MapHttpRoute(
           name: "APIv1_api_pagination",
           routeTemplate: "api/v1/{controller}/{id}",
           defaults: new { area = AreaName, controller = "category", offset = 0, count = 100}); 
```

这是要匹配的签名

```
public class CategoryController : ApiController
{
    // GET /api/<controller>
    public HttpResponseMessage Get(int id, int offset = 0, int count = 0) 
```

每当我通过以下查询时：

`http://localhost/api/v1/category/1?offset=10`

我收到以下错误：

> 在与请求匹配的控制器“类别”上未找到任何操作。

关于如何在 ASP.NET MVC4 Web Api 中合理使用查询字符串的任何建议？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T09:27:06.790

当您开始使用查询字符串时，您实际上会使用其参数调用控制器的精确方法。我更喜欢你改变你的路由器，比如：

```
context.Routes.MapHttpRoute(
       name: "APIv1_api_pagination",
       routeTemplate: "api/v1/{controller}/{action}/{id}",
       defaults: new { area = AreaName, controller = "category", offset = 0, count = 100}); 
```

然后将您的方法更改为

```
public HttpResponseMessage Items(int id, int offset = 0, int count = 0); 
```

从现在开始，每当您查询喜欢

```
http://localhost/api/v1/category/Items?id=1&offset=10&count=0 
```

它会运行。

在写这篇文章时，我想到了另一种方法。我不知道它是否有效，但尝试更改您的路由器

```
context.Routes.MapHttpRoute(
       name: "APIv1_api_pagination",
       routeTemplate: "api/v1/{controller}/{id}/{offset}/{count}",
       defaults: new { area = AreaName, controller = "category", offset = RouteParameter.Optional, count = RouteParameter.Optional}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T19:32:29.953

在这种情况下，我遇到的问题是我的 WebApi 控制器实例上有多个 GET 重载。当我删除这些（并将所有内容压缩为一个 Get 方法，该方法具有更多可选参数和方法本身内部的控制流）时，一切都按预期工作。

# c# - 如何获取 Adob e Reader 完整路径（包括可执行文件名）？

> ID：10891939
> 
> 赞同：9
> 
> 时间：2012-06-05T05:14:20.437
> 
> 标签：c#, adobe-reader

这是可能的？我需要获取 Adob​​e Reader 的完整路径，包括可执行文件名称。我在 Windows 注册表上寻找，我越接近发现没有可执行文件名称的完整路径。提前致谢。

我的代码：

```
var adobe = Registry.LocalMachine.OpenSubKey("Software").OpenSubKey("Adobe").OpenSubKey("Acrobat Reader");
var version = adobe.GetSubKeyNames().First();
var path = adobe.OpenSubKey(version).OpenSubKey("installer").GetValue("path"); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-05T05:45:11.023

其中之一应该为你做：

```
 var adobe = Registry.LocalMachine
                        .OpenSubKey("Software")
                        .OpenSubKey("Microsoft")
                        .OpenSubKey("Windows")
                        .OpenSubKey("CurrentVersion")
                        .OpenSubKey("App Paths")
                        .OpenSubKey("AcroRd32.exe");

    var path = adobe.GetValue("");

    var adobeOtherWay = Registry.LocalMachine
                                .OpenSubKey("Software")
                                .OpenSubKey("Classes")
                                .OpenSubKey("acrobat")
                                .OpenSubKey("shell")
                                .OpenSubKey("open")
                                .OpenSubKey("command");

    var pathOtherWay = adobeOtherWay.GetValue(""); 
```

选择一个并运行它;）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T09:50:06.227

我发现“adobeOtherWay”解决方案存在问题。如果安装了 Adob​​e Acrobat（不是阅读器），那么路径将指向 Acrobat.exe 而不是阅读器的 exe。（我想在上面发表评论，但没有足够的声誉）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-09T01:23:01.420

我正在使用：HKEY_CLASSES_ROOT\Software\Adobe\Acrobat\Exe 它为我提供了已安装 Acrobat Reader 的完整路径和 exe 名称，正是您所需要的。

# c# - 如何检查 Form 对象是否直到使用 C# 运行

> ID：10891946
> 
> 赞同：0
> 
> 时间：2012-06-05T05:14:55.037
> 
> 标签：c#, winforms

比方说，我这里有 2 个 WinForm，分别是 Form1 和 Form2。然后我隐藏了 Form1。我想知道如何在 Form2 中编写代码来检测 Form1 对象是否仍在运行。

我试图使用`Form1.ActiveForm`，但它似乎给了我 NULL 值。有更好的想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:24:11.837

您可以使用我的方法获取任何活动表单：

```
public static Form IsFormAlreadyOpen(Type FormType)
{
   foreach (Form OpenForm in Application.OpenForms)
   {
      if (OpenForm.GetType() == FormType)
         return OpenForm;
   }

   return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:21:24.990

在我看来，您正在尝试将 Form1 作为静态实例访问，除非您以这种方式创建 Form1，否则您将无法访问它，这可能就是您从函数中获取 NULL 值的原因。如果你想从 Form2 中引用 Form1，那么你需要给它传递一个引用。

表格1：

```
public class Form1
{
   public Form1()
   {
   }    
} 
```

表格2：

```
public class Form2
{
   private Form1 _frm1;

   public Form2(Form1 frm1)
   {
       _frm1 = frm1;
   }
} 
```

现在，当您创建 Form2 的实例时，您将其声明为...

```
Form2 frm2 = new Form2(frm1); 
```

其中 frm1 是 Form1 的实例。

现在，当您需要从 Form2 引用 Form1 时，您可以通过 _frm1 引用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T05:25:05.800

如果您的意思是运行“仍在内存中”，那么您可以

*   只需测试对表单的引用：`if(form1 != null)`

*   之后，您可以测试是否被隐藏：`if(form1.Visible)`

*   并可能最小化：`if(form1.WindowState != FormWindowState.Minimized)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T05:28:00.643

如果您想检查您的表单是否已关闭（并因此被丢弃），您可以尝试从该表单调用一个方法并捕获`ObjectDisposedException`.

```
try 
{ 
    Form1.SomeMethod();
} 
catch (ObjectDisposedException ex) 
{ 
    // Form has been closed
} 
```

如果表单尚未关闭，并且您想检查它是否可见，则可以使用它的[“可见”属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.visible.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T05:39:47.083

```
private Form GetForm()
        {
            Form mdiParent = this.MdiParent;
            Form1 objForm
            foreach (Form frm in mdiParent.MdiChildren)
            {
                objForm = frm as Form1;
                if (objForm != null)
                {

                   objForm.Activate();
                   return objForm;

                }
            }

            return null;
        } 
```

# wordpress - 我在哪里可以回显 ?s=words 类型搜索的搜索 SQL？

> ID：10891948
> 
> 赞同：0
> 
> 时间：2012-06-05T05:15:02.987
> 
> 标签：wordpress

我正在尝试调试 Search Everything 插件，该插件以前在站点上对我有用，但在当前站点上不起作用（返回零结果）。如果我能看到正在执行什么 sql，我就能更好地了解哪里出了问题。这是用于帖子和页面等的普通搜索框类型搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T10:46:49.410

SQL在[wp-includes/query.php](http://core.trac.wordpress.org/browser/tags/3.3.2/wp-includes/query.php#L2177)`get_posts()`的函数中生成。如果该链接没有将您带到正确的位置，请在函数中搜索.`if ( !empty($q['s']) )`

看起来`posts_search`过滤器是在该块之后立即调用的，因此您可以挂钩以将生成的 SQL 转储到文件中（如果回显不起作用）。

# parsing - JavaCC 语法冲突

> ID：10891950
> 
> 赞同：1
> 
> 时间：2012-06-05T05:15:18.937
> 
> 标签：parsing, parser-generator, javacc

我有一个大致这样定义的语法。

```
TOKEN:{
        <T_INT: "int"> |
        <T_STRING: ["a"-"z"](["a"-"z"])*>
}

SKIP: { " " | "\t" | "\n" | "\r" }

/** Main production. */
SimpleNode Start() : {}
{
        (LOOKAHEAD(Declaration()) Declaration() | Function())
  { return jjtThis; }
}

void Declaration() #Decl: {}
{
        <T_INT> <T_STRING> ";"
}

void Function() #Func: {}
{
        <T_STRING> "();"
} 
```

这适用于以下内容：

```
int a;
foo(); 
```

但是当我尝试`int();`对我来说是合法的并且应该由 Function() 解析时，它会改为声明。我该如何解决这个“冲突”？我尝试了各种组合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:45:50.793

JavaCC 常见问题解答部分的标题为“[如何处理未保留的关键字](http://www.engr.mun.ca/~theo/JavaCC-FAQ/javacc-faq-moz.htm#tth_sEc4.19)？”。

我要做的是允许关键字替代标识符，即

```
(<T_STRING> | <T_INT>) "();" 
```

当有许多关键字时，创建一个`Identifier`允许所有关键字以及通用标识符令牌的产品可能是有益的。

顺便说一句，您可能想要`"(" ")" ";"`而不是`"();"`.

# lua - Lua中表和元表的区别

> ID：10891957
> 
> 赞同：4
> 
> 时间：2012-06-05T05:16:33.633
> 
> 标签：lua, coronasdk

Corona 中的表和元表有什么区别？元表的类型有哪些？我如何以及在哪里可以使用它们？使用表和元表的主要目的是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-05T07:25:51.887

Lua 中的表是可用于创建动态结构化数据的主要数据类型。其他语言有数组、列表、字典（键值存储），在 Lua 中你只有表。您可以对基本表执行的唯一操作是使用`tab[key]`语法索引和存储值，即：

```
local tab = {}
tab['key1'] = 'Hello' -- storing a value using a string key
tab.key2 = 'World'    -- this is syntax sugar, equivalent to previous
print(tab.key1, tab['key2'])  -- indexing, the syntax is interchangable 
```

您不能对基本表做任何其他事情，例如添加它们：

```
local v1={x=0,y=0}
local v2={x=1,y=1}
print(v1+v2)
--> stdin:1: attempt to perform arithmetic on local 'v1' (a table value) 
```

*元表*允许您修改表的行为，指定在添加、相乘、连接 () 等表时应执行的操作`..`。元表只是一个表，其中包含具有特殊键的函数，也称为*元方法*。您可以使用 将元表分配给表`setmetatable()`。例如：

```
local Vector = {} -- this will be the metatable for vectors

function Vector.__add(v1, v2) -- what to do when vectors are added
    -- create a new table and assign it a Vector metatable
    return setmetatable({x=v1.x+v2.x, y=v1.y+v2.y}, Vector)
end
function Vector.__tostring(v) -- how a vector should be displayed
    -- this is used by tostring() and print()
    return '{x=' .. v.x .. ',y=' .. v.y .. '}'
end

local v1 = setmetatable({x=1, y=2}, Vector)
local v2 = setmetatable({x=3, y=4}, Vector)

-- vectors are added and the resulting vector is printed
print(v1 + v2) --> {x=4,y=6} 
```

如果你想更好地理解元表，你绝对应该[阅读关于元表的 Lua 编程章节](http://www.lua.org/pil/13.html)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-05T07:59:19.923

Lua（Corona 所基于的语言）将元表用于不同目的。

手册中的相关条目是[第 2.8 节](http://www.lua.org/manual/5.1/manual.html#2.8)。可以在[此处](http://nova-fusion.com/2011/06/30/lua-metatables-tutorial/)或[此处](http://lua-users.org/wiki/MetamethodsTutorial)找到一个不错的教程。

元表与其他表一样只是一个表，但在另一个表上设置为元表（我将进一步将其称为基表，以在两个表之间产生差异）。

元表可以包含任何内容，但特殊键（以双下划线开头）是有趣的键。在特殊情况下将调用此表中此键设置的值。哪个场合取决于哪​​个键。最有趣的是：

*   `__index`: 每当基表中的键被查找但不存在时都会使用。这可以包含将在其中查找键的表，也可以包含将传递原始表和键的函数。这可用于在表上实现方法（OOP 风格）、重定向、失败案例、设置默认值等
*   `__newindex`：每当要在表中分配新键时都会使用（以前为 nil）。如果它是一个表，则将在该表中分配键。如果它是一个函数，该函数将传递原始表、键和值。这可用于控制对表的访问、预处理数据、重定向分配。
*   `__call`：使您可以设置要调用的函数，如果您使用例如。`table()`.
*   `__add,__sub,__mul,__div,__mod`用于实现二进制操作，
*   `__unm`用于实现一元运算，
*   `__concat`用于实现连接（.. 运算符）
*   `__len`用于实现长度运算符 (#)
*   `__eq,__lt,__le`用于实现比较

使用 __index & co. 时要知道的一件小事：在这些方法中，您应该使用 rawget 和 rawset 以防止每次再次调用元方法，从而导致循环。举个小例子：

```
t={1,2,3}  -- basetable
mt={} -- metatable
mt.__index=function(t,k)
    print("__index event from "..tostring(t).." key "..k)
    return "currently unavailable"
end
mt.__newindex=function(t,k,v)
    print("__newindex event from "..tostring(t).." key: "..k.." value: "..v)
    if type(k)=="string" then
        rawset(t,k,v:reverse())
    else
        rawset(t,k,v)
    end
end
mt.__call=function(t,...)
    print("call to table "..tostring(t).." with arguments: ".. table.concat({...},','))
    print("All elements of the table:")
    for k,v in pairs(t) do print(k,v) end
end
setmetatable(t,mt)

t[4]="foo" -- this will run the __newindex method
print(t[5]) -- this will run the __index method
t("foo","bar")
-- Multiple fall through example:
t={}
mt={}
mt2={}
setmetatable(t,mt)  -- metatable on base table
setmetatable(mt,mt2) -- second layer of metatable
mt.__index=function(t,k) print('key '..k..' not found in '..namelookup[t]) return getmetatable(t)[k] end -- tries looking nonexistant indexes up in mt.
mt2.__index=mt.__index -- function was written portably, reuse it.

t[1]='A'
mt[2]='B'
mt2[3]='C'
namelookup={[t]="t",[mt]="mt",[mt2]="mt2"}
print(t[1],t[2],t[3],t[4]) 
```

现在这些只是愚蠢的例子，你可以做更复杂的事情。看例子，看一下[Programming in Lua](http://www.lua.org/pil/)中的相关章节，进行实验。并尽量不要混淆;）

# qt4 - 如何在 QGraphicsView 中适合 QGraphicsScene

> ID：10891962
> 
> 赞同：12
> 
> 时间：2012-06-05T05:17:23.737
> 
> 标签：qt4

我想将 a`QGraphicsScene`放入`QGraphicsView`不同尺寸的 a 中，这样它会根据视图的大小缩小或扩大，并且不应该有任何滚动条。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-10-08T22:43:45.927

这对我有用：

```
void MyGraphicsView::zoomToFit()
{
    fitInView(scene()->sceneRect(), Qt::KeepAspectRatio);
} 
```

您可能需要[调整](http://qt-project.org/doc/qt-5/qrectf.html#adjusted)场景矩形以留出一点边距；可能看起来更好，具体取决于您的内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T07:37:32.917

像下面这样缩放视图做需要的事情：

```
view->scale(frameWidth / sceneWidth, frameHeight / sceneHeight); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-05T07:21:33.360

```
view->setSceneRect(0,0,view->frameSize().width(),view->frameSize().height()); 
```

将这段代码与`resizeevent`of连接起来`Qgraphicsview`

如果您设置的场景矩形大小大于视图滚动条，则会出现。否则，如果您将 scen rect 设置为等于或小于视图框架宽度，则不会出现滚动条。

然后我猜 [QGraphicsView::fitInView()](http://qt-project.org/doc/qt-4.8/qgraphicsview.html#fitInView)是你的解决方案。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-07T00:31:42.430

我知道这不能回答问题，但在搜索如何将内容适合视图时，这是谷歌的顶部。很简单：

```
def fit_contents(self):
    items = self.scene().items()
    rects = [item.mapToScene(item.boundingRect()).boundingRect() for item in items]
    rect = min_bounding_rect(rects)
    self.setSceneRect(rect) 
```

其中 min_bounding_rect 是：

```
def min_bounding_rect(rectList):
if rectList == []:
    return None

minX = rectList[0].left()
minY = rectList[0].top()
maxX = rectList[0].right()
maxY = rectList[0].bottom()

for k in range(1, len(rectList)):
    minX = min(minX, rectList[k].left())
    minY = min(minY, rectList[k].top())
    maxX = max(maxX, rectList[k].right())
    maxY = max(maxY, rectList[k].bottom())

return QRectF(minX, minY, maxX-minX, maxY-minY) 
```

# c# - db 未填充通用列表

> ID：10891964
> 
> 赞同：0
> 
> 时间：2012-06-05T05:17:33.233
> 
> 标签：c#, asp.net, sql

我正在尝试填充通用集合但遇到问题。我正在尝试填充 myBookings，它应该存储一个列表。下面的方法应该用正确的列表填充 myBookings 但由于某种原因，当我计算结果（int c）时，我得到的返回值为 0。谁能看到我做错了什么？

// 。CS

```
public partial class _Default : System.Web.UI.Page
{    
    iClean.Bookings myBookings = new iClean.Bookings();
    iClean.Booking myBooking = new iClean.Booking();
    iClean.Controller myController = new iClean.Controller();

    ListItem li = new ListItem();

    protected void Page_Load(object sender, EventArgs e)
    {
        CurrentFname.Text = Profile.FirstName;
        CurrentUname.Text = Profile.UserName;
        CurrentLname.Text = Profile.LastName;

        myBookings.AllBookings = this.GetBookings();

        int c = myBookings.AllBookings.Count();

        Name.Text = c.ToString();
        Address.Text = myBooking.Address;
        Phone.Text = myBooking.Phone;
        Date.Text = myBooking.DueDate.ToString();
        Comments.Text = myBooking.Comments;        
    }

    public List<iClean.Booking> GetBookings()
    {
        List<iClean.Booking> bookings = new List<iClean.Booking>();
        ArrayList records = this.Select("Bookings", "");
        for (int i = 0; i < records.Count; i++)
        {
            iClean.Booking tempBooking = new iClean.Booking();
            Hashtable row = (Hashtable)records[i];
            tempBooking.ID = Convert.ToInt32(row["ID"]);
            tempBooking.Name = Convert.ToString(row["ClientName"]);
            tempBooking.Address = Convert.ToString(row["ClientAddress"]);
            tempBooking.Phone = Convert.ToString(row["ClientPhone"]);

            tempBooking.DueDate = Convert.ToDateTime(row["Bookingdate"]);
            tempBooking.Completed = Convert.ToBoolean(row["Completed"]);
            tempBooking.Paid = Convert.ToBoolean(row["Paid"]);
            tempBooking.Cancelled = Convert.ToBoolean(row["Cancelled"]);
            tempBooking.ReasonCancelled = Convert.ToString(row["ReasonCancelled"]);
            tempBooking.ContractorPaid = Convert.ToBoolean(row["ContractorPaid"]);
            tempBooking.Comments = Convert.ToString(row["Comments"]);

            tempBooking.Windows = Convert.ToBoolean(row["Windows"]);
            tempBooking.Gardening = Convert.ToBoolean(row["Gardening"]);
            tempBooking.IndoorCleaning = Convert.ToBoolean(row["IndoorCleaning"]);

            bookings.Add(tempBooking);
        }

        return bookings;
    }

    public ArrayList Select(string table, string conditions)
    {
        // Create something to hosue the records.
        ArrayList records = new ArrayList();

        try
        {
            // Open a connection.
            OleDbConnection myConnection = new OleDbConnection(this.getConnectionString());
            myConnection.Open();

            // Generate the SQL
            string sql = "SELECT * FROM " + table;
            if (conditions != "") { sql += " WHERE " + conditions; }

            // Console.WriteLine("Select SQL: " + sql); // In case we need to debug

            // Run the SQL
            OleDbCommand myCommand = new OleDbCommand(sql, myConnection);
            OleDbDataReader myReader = myCommand.ExecuteReader();

            // Go through the rows that were returned ...
            while (myReader.Read())
            {
                // ... create Hashtable to keep the columns in, ...
                Hashtable row = new Hashtable();

                // ... add the fields ...
                for (int i = 0; i < myReader.FieldCount; i++)
                {
                    row.Add(myReader.GetName(i), myReader[i]);
                }

                // ... and store the row.
                records.Add(row);
            }

            // Make sure to close the connection
            myConnection.Close();
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        }

        return records;
    }

    public string getConnectionString()
    {
        string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=IQQuotes.accdb;";

        return connectionString;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:27:03.597

只是一个猜测，但试试这个：

```
public List<iClean.Booking> GetBookings()
{
    List<iClean.Booking> bookings = new List<iClean.Booking>();
    ArrayList records = this.Select("Bookings", "");
    iClean.Booking tempBooking = new iClean.Booking();
    for (int i = 0; i < records.Count; i++)
    {
        tempBooking = new iClean.Booking();
        Hashtable row = (Hashtable)records[i];
        tempBooking.ID = Convert.ToInt32(row["ID"]);
        tempBooking.Name = Convert.ToString(row["ClientName"]);
        tempBooking.Address = Convert.ToString(row["ClientAddress"]);
        tempBooking.Phone = Convert.ToString(row["ClientPhone"]);

        tempBooking.DueDate = Convert.ToDateTime(row["Bookingdate"]);
        tempBooking.Completed = Convert.ToBoolean(row["Completed"]);
        tempBooking.Paid = Convert.ToBoolean(row["Paid"]);
        tempBooking.Cancelled = Convert.ToBoolean(row["Cancelled"]);
        tempBooking.ReasonCancelled = Convert.ToString(row["ReasonCancelled"]);
        tempBooking.ContractorPaid = Convert.ToBoolean(row["ContractorPaid"]);
        tempBooking.Comments = Convert.ToString(row["Comments"]);

        tempBooking.Windows = Convert.ToBoolean(row["Windows"]);
        tempBooking.Gardening = Convert.ToBoolean(row["Gardening"]);
        tempBooking.IndoorCleaning = Convert.ToBoolean(row["IndoorCleaning"]);

        bookings.Add(tempBooking);
    }

    return bookings;
} 
```

# android - 如何在 Android 中异步显示来自服务器的图像？

> ID：10891971
> 
> 赞同：0
> 
> 时间：2012-06-05T05:18:26.653
> 
> 标签：android

我在 Android 中显示来自服务器的图像。为此，我已经阅读了教程*[Android Load Image From URL Example](http://www.androidpeople.com/android-load-image-url-example)*。这是非常有帮助的。但是显示来自服务器的图像需要 5 分钟。所以我想异步显示图像。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:41:41.037

**以下片段将为您提供帮助。**

**下载Helper.java**

```
public interface DownloadHelper
{
    public void OnSucess(Bitmap bitmap);
    public void OnFailure(String response);
} 
```

**MainActivity.java**

```
public class GalleryExample extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);

        DownloadHelper downloadHelper = new DownloadHelper()
        {
            @Override
            public void OnSucess(Bitmap bitmap)
            {
                ImageView imageView=(ImageView)findViewById(R.id.imageView);
                imageView.setImageBitmap(bitmap);
            }

            @Override
            public void OnFailure(String response)
            {
                Toast.makeText(context, response, Toast.LENGTH_LONG).show();
            }
        };
        new MyTask(this,downloadHelper).execute("image url");
    } 
```

**我的任务.java**

```
public class DownloadTask extends AsyncTask<String, Integer, Object>
{
    private Context context;
    private DownloadHelper downloadHelper;
    private ProgressDialog dialog;

    public DownloadTask(Context context,DownloadHelper downloadHelper)
    {
        this.context = context;

    }

    @Override
    protected void onPreExecute()
    {
        dialog = new ProgressDialog(context);
        dialog.setTitle("Please Wait");
        dialog.setMessage("Fetching Data!!");
        dialog.setCancelable(false);
        dialog.show();
        super.onPreExecute();
    }

    @Override
    protected Object doInBackground(String... params)
    {
        URL aURL = new URL(myRemoteImages[position]);
        URLConnection conn = aURL.openConnection();
        conn.connect();
        InputStream is = conn.getInputStream();

        BufferedInputStream bis = new BufferedInputStream(is);
        /* Decode url-data to a bitmap. */
        Bitmap bm = BitmapFactory.decodeStream(bis);
        bis.close();
        is.close();
        return bm;
    }

    @Override
    protected void onPostExecute(Object result)
    {
        dialog.dismiss();
        if (result != null)
        {
            downloadHelper.OnSucess((Bitmap)result);
        } 
        else
        {
            downloadHelper.OnFailure("Error in Downloading Data!!");
        }
        super.onPostExecute(result);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T05:46:32.347

尝试*[延迟加载](https://github.com/thest1/LazyList)*中的示例链接。

# android - 当应用程序进入钛背景时，android服务无法正常工作

> ID：10891973
> 
> 赞同：1
> 
> 时间：2012-06-05T05:18:41.610
> 
> 标签：android, service, titanium-mobile

嗨，我尝试按照他们的教程使用 Titanium 开发一个简单的 Android 服务应用程序。当应用程序处于前台时它运行良好，但是当我按下后退按钮时它会杀死应用程序并且我的服务没有运行。
下面是我使用的代码和应用程​​序进入后台时得到的日志。请让我知道我哪里出错了。（我正在使用带有 Android Runtime v8/Rhino 的 Titanium SDK 2.0.1.GA2 和 Android SDK 2.2]。

我的 app.js 文件：

```
var intent = Titanium.Android.createServiceIntent( { url: 'logservice.js' } );
// Service should run its code every 10 seconds.
intent.putExtra('interval', 10000);
 // A message that the service should 'echo'
intent.putExtra('message_to_echo', 'Titanium rocks!');

var service = Titanium.Android.createService(intent);
service.addEventListener('resume', function(e) {
Titanium.API.info('Service code resumes, iteration ' + e.iteration);
});
service.addEventListener('pause', function(e) {
Titanium.API.info('Service code pauses, iteration ' + e.iteration);
/* if (e.iteration === 3) {
    Titanium.API.info('Service code has run 3 times, will now stop it.');
    service.stop();
} */
});
service.start(); 
```

我的 logservice.js 文件是：

```
var service = Titanium.Android.currentService;
var intent = service.intent;
var message = intent.getStringExtra("message_to_echo");
Titanium.API.info("Hello World!  I am a Service.  I have this to say: " + message); 
```

我在 tiapp.xml 中包含了该服务标签

这是我按下后退按钮时得到的日志：

```
W/KeyCharacterMap(  322): No keyboard for id 0
W/KeyCharacterMap(  322): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
E/TiBaseActivity(  322): (main) [62040,92891] Layout cleanup.
D/dalvikvm(  322): GC_FOR_MALLOC freed 9526 objects / 480272 bytes in 115ms
D/dalvikvm(  322): GC_FOR_MALLOC freed 12770 objects / 693152 bytes in 80ms
D/dalvikvm(  322): GC_FOR_MALLOC freed 8846 objects / 508872 bytes in 77ms
D/dalvikvm(  322): GC_FOR_MALLOC freed 8976 objects / 512112 bytes in 78ms
D/EventEmitter(  322): callHandler function not available for resume
W/TiAnalyticsSvc(  322): (Thread-15) [29966,122857] Analytics Service Started
I/TiAnalyticsSvc(  322): (Thread-15) [69,122926] Sending 1 analytics events.
D/dalvikvm(  322): GC_FOR_MALLOC freed 7386 objects / 436936 bytes in 87ms
D/NativeCrypto(  322): Freeing OpenSSL session
D/dalvikvm(  322): GC_FOR_MALLOC freed 1581 objects / 89648 bytes in 71ms
I/dalvikvm-heap(  322): Grow heap (frag case) to 3.588MB for 87396-byte allocation
D/dalvikvm(  322): GC_FOR_MALLOC freed 12 objects / 712 bytes in 76ms
D/dalvikvm(  322): GC_FOR_MALLOC freed 956 objects / 49400 bytes in 88ms
I/dalvikvm-heap(  322): Grow heap (frag case) to 3.624MB for 87396-byte allocation
D/dalvikvm(  322): GC_FOR_MALLOC freed 0 objects / 0 bytes in 75ms
W/TiAnalyticsSvc(  322): (Thread-15) [3772,126698] Stopping Analytics Service
D/SntpClient(   60): request time failed: java.net.SocketException: Address family not     supported by protocol 
```

# opengl - OpenGL中的纵横比拉伸

> ID：10891977
> 
> 赞同：3
> 
> 时间：2012-06-05T05:19:22.730
> 
> 标签：opengl, aspect-ratio

我在使用全屏模式时遇到了一些问题。我可以将我的窗口设置为 800x600，但是当我全屏显示该分辨率时，它会拉伸。我认为这是因为纵横比发生了变化。我怎样才能解决这个问题？

编辑#1

这是我看到的屏幕截图。

[![图片](../Images/c43870cc7c6acf11ab15390ab1e42ab1.png)](https://i.stack.imgur.com/0pcx1.png)

左：800x600

右：1366x768

编辑#2

每次我重新调整窗口大小 (WM_SIZE) 时都会调用我的 initGraphics 函数。

```
void initGraphics(int width, int height) {
    float aspect = (float)width / (float)height;
    glViewport(0, 0, width, height);
    glEnable(GL_TEXTURE_2D);
    glEnable(GL_BLEND); //Enable alpha blending
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glClearColor(0.0, 0.0, 0.0, 1.0);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluOrtho2D(0.0, width, height * aspect, 0.0);
    glMatrixMode(GL_MODELVIEW);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T05:28:42.470

**解决方案：** 真正的问题最终是您误用了 gluOrtho2D 函数。而不是使用这个：

```
gluOrtho2D(0.0, width, height * aspect, 0.0); 
```

您需要将其切换为正确的形式：

```
gluOrtho2D(0.0, width, 0.0, height); 
```

后者会创建一个 2D 正交投影，填充视口的整个宽度和高度，因此不会发生拉伸。

**原始答案：**

您需要修改投影以考虑新的纵横比。

确保您首先设置`glViewport`为新的窗口大小。设置视口后，您需要通过调用将矩阵模式切换为投影，`glMatrixMode`然后最终计算新的纵横比`width / height`并将新的纵横比传递给`gluPerspective`. 你也可以使用直接`glFrustum`而不是`gluPerspective`你可以找到源`gluPerspective`来实现相同的效果`glFrustum`。

像这样的东西：

```
 float aspectRatio = width / height;
    glMatrixMode(GL_PROJECTION_MATRIX);
    glLoadIdentity();
    gluPerspective(fov, aspectRatio, near, far); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T05:32:04.453

调整窗口大小后，您需要调整投影矩阵以反映新的纵横比。如果您使用的是经典 OpenGL，请将矩阵模式切换到 GL_PROJECTION，加载单位矩阵，然后调用 glOrtho 或 gluPerspective 并使用按纵横比缩放的垂直维度（假设您希望图像的水平扩展与它相同与原始窗口一起使用）。

# ios - ios崩溃[_UIBackgroundTaskInfo fireExpirationHandler]

> ID：10891979
> 
> 赞同：1
> 
> 时间：2012-06-05T05:19:59.937
> 
> 标签：ios, crash

从 crashlytics 得到这个崩溃报告，知道如何破译这个吗？我认为这与我正在做的一些后台任务有关。我正在使用 restkit 的后台继续选项。Crashlytics 还告诉我，当这种情况发生时，只有 12% 的用户会关注应用程序。

```
0    libobjc.A.dylib    objc_msgSend + 15
1    UIKit ✭            -[_UIBackgroundTaskInfo fireExpirationHandler] + 48
2    UIKit              -[UIApplication handleEvent:withNewEvent:] + 1288
3    UIKit              -[UIApplication sendEvent:] + 54
4    UIKit              _UIApplicationHandleEvent + 5826
5    GraphicsServices   PurpleEventCallback + 882
6    CoreFoundation     __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 38
7    CoreFoundation     __CFRunLoopDoSource1 + 140
8    CoreFoundation     __CFRunLoopRun + 1370
9    CoreFoundation     CFRunLoopRunSpecific + 300
10   CoreFoundation     CFRunLoopRunInMode + 104
11   GraphicsServices   GSEventRunModal + 136
12   UIKit              UIApplicationMain + 1080 
```

# android - 更改数据库中存储日期值的日期格式？

> ID：10891981
> 
> 赞同：0
> 
> 时间：2012-06-05T05:20:10.933
> 
> 标签：android, sqlite, datetime

`yyyy-MM-dd HH:mm:ss`我有一个以格式存储值的数据库。

当我检索值时，我希望它们以`dd-MM-yyyy HH:mm AM/PM`格式显示。我一开始就无法改变我存储它们的方式。

我正在使用游标从数据库中获取结果，然后将它们添加到列表中，然后 listadapter 使用该列表来填充列表视图。

由于 Cursor 返回一个字符串，我如何更改返回值的格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:22:42.857

您可以将[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)与“ `dd-MM-yyyy HH:mm a`”之类的模式一起使用。

```
Date mDate= new Date(System.currentTimeMillis());
SimpleDateFormat mDateFormat= new SimpleDateFormat("dd-MM-yyyy HH:mm a");
System.out.println(mDateFormat.format(mDate)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T05:37:29.713

不要以任何特定格式将日期保存到数据库。您应该以毫秒的形式保存日期，然后使用[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)将其更改为任何所需的格式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T06:16:05.833

你会想做这样的事情：

```
//Retrieve date from database
SimpleDateFormat origFormat= new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
String stringDateFromDB = getDateFromDatabase();

//Store it as a date object
Date date = origFormat.parse(stringDateFromDB);

//Output it as a string that uses the new format
SimpleDateFormat newFormat= new SimpleDateFormat("dd-MM-yyyy HH:mm AM/PM");
String desiredDateFormat = newFormat.format(date); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T06:05:03.883

try as given below

```
Date c_date;
SimpleDateFormat outputFormat= new SimpleDateFormat("dd-MM-yyyy HH:mm a");
c_date=(Date)outputFormat.parse(Date_Database); 
```

where

```
Date_Database= your date which is in String format which u have retraived from database 
```

# java - 如何在java中更新浏览器缓存

> ID：10891986
> 
> 赞同：0
> 
> 时间：2012-06-05T05:20:41.043
> 
> 标签：java, spring, caching, spring-mvc

我正在尝试在我的应用程序中实现浏览器缓存，它工作正常，但我无法将新更新的部分添加到浏览器缓存中。只是我只想将那部分更新到浏览器缓存中，该缓存正在现有缓存​​中进行更新。

用于缓存的代码是：

```
<bean id="springSecurityFilterChain"
class="org.springframework.web.servlet.mvc.WebContentInterceptor">
    <property name="cacheSeconds" value="2100" />
    <property name="useExpiresHeader" value="true" />
    <property name="useCacheControlHeader" value="true" />
    <property name="useCacheControlNoStore" value="true" />
    <property name="cacheMappings">
        <props>

            <prop key="/**/*.html">2592000</prop>
            <prop key="/**/*.htm">2592000</prop>
            <prop key="/**/*.jpg">2592000</prop>
            <prop key="/**/*.gif">2592000</prop>
            <prop key="/**/*.css">2592000</prop>
            <prop key="/**/*.js">2592000</prop>
        </props>
    </property>
</bean> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:58:04.517

我遇到`@Cacheable`了spring框架中可用的注释。我认为这正是您想要实现的目标。我从未在我的应用程序中使用过它，但已经研究过它。

有关详细信息和示例，请参阅此[链接](http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/cache.html)。

此外，Spring Framework 还为此提供了另一个功能，称为`ShallowETagHeaderFilter`. 请参阅此[链接](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/filter/ShallowEtagHeaderFilter.html)以了解更多信息。

希望这对您有所帮助。干杯。

# iphone - 当用户改变当前位置时，核心位置框架的哪个函数被调用？

> ID：10891997
> 
> 赞同：1
> 
> 时间：2012-06-05T05:22:31.437
> 
> 标签：iphone, ios5, gps, xcode4.2, core-location

我在我的应用程序中使用核心位置框架我想询问当用户更改其当前位置时调用核心位置框架的哪个功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:26:07.567

当有新位置可用时调用此方法。如果没有以前的位置可用， oldLocation 可能为零。

```
- (void)locationManager:(CLLocationManager *)manager
        didUpdateToLocation:(CLLocation *)newLocation
        fromLocation:(CLLocation *)oldLocation; 
```