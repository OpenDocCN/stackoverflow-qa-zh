# StackOverflow 问答 10873000-10873999

# ruby - 在 Sinatra 路由中捕获类型

> ID：10873006
> 
> 赞同：0
> 
> 时间：2012-06-03T18:55:43.367
> 
> 标签：ruby, sinatra

我的 Sinatra 应用程序中有这条路线：

```
post ':type/new' do
  data = JSON.parse request.body.read
  id = $database.add_instance(params[:type], data['content'])
  id.to_json
end 
```

现在，当我发布到`/wombat/new`它返回 404，建议我添加`post '/wombat/new'`到我的路线。

为什么它不匹配那条路线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T19:12:36.370

尝试

```
post '/:type/new' do
  ... 
```

（注意前导`/`）。

# c# - MyUserControl 不能是 XAML 文件的根，因为它是使用 XAML 定义的

> ID：10873008
> 
> 赞同：14
> 
> 时间：2012-06-03T18:55:47.950
> 
> 标签：c#, wpf, xaml

> **可能重复：**
> [从 WPF 中的 UserControl 继承](https://stackoverflow.com/questions/269106/inheriting-from-a-usercontrol-in-wpf)

我正在尝试创建一个 WPF 用户控件，该控件派生自另一个我也已定义的用户控件。

```
<myNamespace:NavigationControl
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
xmlns:myNamespace="clr-namespace:myNamespace" mc:Ignorable="d"
x:Class="myNamespace.WelcomeScreen"
x:Name="UserControl"
d:DesignWidth="640" d:DesignHeight="480"> 
```

这是 WelcomeScreen.cs 的样子：

```
public partial class WelcomeScreen : NavigationControl
{
    public WelcomeScreen()
    {
        this.InitializeComponent();
    }
} 
```

当我编译这个时，我得到以下错误：

> “myNamespace.NavigationControl”不能是 XAML 文件的根，因为它是使用 XAML 定义的。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-03T18:59:56.307

请参阅 MS 知识库文章： http: [//support.microsoft.com/kb/957231](http://support.microsoft.com/kb/957231)。不支持在 XAML 中派生用户控件；您必须在代码中派生用户控件。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-03T18:59:18.660

你不应该这样做，错误告诉你。

此外，使用 XAML 您设置了`Content`，如果您在派生控件中再次设置它，您将丢失之前定义的所有内容。如果您想要继承和可重用性，请使用自定义控件（并创建相应的`ControlTemplate`）。

# browser-automation - 编写自动化端到端用户场景的有效方法是什么？

> ID：10873009
> 
> 赞同：1
> 
> 时间：2012-06-03T18:55:51.190
> 
> 标签：browser-automation, scenarios

在自动化用户场景时，我们通常涵盖端到端的用户流程。单元测试建议每个测试方法应该是独立的，并且只测试一件事。但是在系统验收测试中情况有所不同，因为我们必须涵盖通过应用程序的用户流程。

考虑一个电子商务应用程序，其中用户旅程通常遵循以下步骤：

1 - 访问主页
2 - 搜索产品
3 - 选择产品
4 - 将产品添加到购物车
5 - 点击结帐
6 - 登录
7 - 输入付款详情
8 - 提交订单
9 - 等待确认

现在这些步骤中的每一个都需要在我们浏览用户旅程时进行验证。因此，测试方法存在依赖性，例如第 3 步依赖于第 2 步，这破坏了单元测试实践。此外，如果我们将所有步骤都放在一种测试方法中，那么如果测试失败，就不容易检测到哪里出了问题。如果我们想隔离每个测试方法，使它们彼此独立，我们必须一遍又一遍地重复初始步骤。

我过去所做的是使用 TestNG 来提供对以前测试方法的这种依赖。我想知道如何在您的测试中处理用户旅程。

您如何处理测试中的用户旅程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:03:28.733

[硒](http://seleniumhq.org/)对此有好处。它有一个 Firefox 插件，允许您“记录”您在浏览器中执行的端到端测试，以后可以回放。您还可以修改/手动编码测试。还支持以各种语言（例如，我们使用 C#）修改和运行测试，因此您可以将各种逻辑和条件编码到测试流程中。

查看您的测试步骤，我认为它应该是一个基本的实现（理论上 - 在实践中，您可能需要进行一些调整以确保 HTML 元素选择器每次运行都是正确的）。

1.  打开网址
2.  在文本框中输入文本并单击按钮
3.  点击链接
4.  点击一个按钮
5.  点击一个按钮
6.  在两个文本框中输入文本并单击一个按钮
7.  在各种文本框中输入文本
8.  点击一个按钮
9.  （代码集成，检查电子邮件？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:22:41.013

[Chromium Browser Automation](https://chrome.google.com/webstore/detail/jmbmjnojfkcohdpkpjmeeijckfbebbon?utm_source=chrome-ntp-icon)，也是很好的解决方案。您还可以在 Chromium 浏览器自动化网站上查看文档和教程： http: [//chrome-automation.com/](http://chrome-automation.com/)。

# java - 可以使用 GPS 预测预计到达时间的 Android 应用程序的设计和开发

> ID：10873014
> 
> 赞同：0
> 
> 时间：2012-06-03T18:56:07.603
> 
> 标签：java, android, algorithm, gps

我的项目是设计一个 Android 应用程序，该应用程序将安装在校车上，这样我就可以在校车晚点时向家长发送自动短信。

我需要计算下一站的预计到达时间，还需要创建一个 mySql 数据库模式来存储这些点。

计算 ETA 的算法是什么样的？我应该如何设计我的数据库模式？

我在这里偶然发现了这篇研究论文（[http://ntl.bts.gov/lib/17000/17500/17573/PB2001102278.pdf](http://ntl.bts.gov/lib/17000/17500/17573/PB2001102278.pdf)），但它只讨论了算法。

此外，该研究论文非常古老，因此它使用的是现在不存在的技术。

我该怎么做？服务器端不是问题，因为它已经使用[openGTS](http://opengts.sourceforge.net/)完成了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:00:17.950

只需将您到达某个位置的时间与您到达该位置的通常时间进行比较。如果您迟到 X 分钟，假设您将迟到大约 X 分钟到达路线上的每个后续位置。

# php - 如何获取此 MySQL 查询中每个结果的计数？

> ID：10873015
> 
> 赞同：0
> 
> 时间：2012-06-03T18:56:12.117
> 
> 标签：php, mysql, count

我有一个表格，其中每一行都跟踪有关单击链接的详细信息。此查询显示用户单击链接时所在的前 5 个页面：

```
$pop_pages = ("SELECT url FROM clicks WHERE link = '$link_id' GROUP BY url ORDER BY url ASC LIMIT 5");

foreach($pop_pages as $page) {

$page_string = $page_string."<li>".$page->url."</li>";

} 
```

这将列出前 5 个最常点击的 URL。如何添加在此查询中被点击的次数？

就像是：

```
$page_string = $page_string."<li>".$page->url." (X clicks)</li>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T18:58:26.970

试试这个：

```
$pop_pages = ("SELECT url, count(url) as c FROM clicks WHERE link = '$link_id' GROUP BY url ORDER BY url ASC LIMIT 5");

foreach($pop_pages as $page) {

$page_string = $page_string."<li>".$page->url." (".$page->c." clicks)</li>";

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:06:42.417

你可以这样做：

```
$pop_pages = ("SELECT url, COUNT(*) as count FROM clicks WHERE link = '$link_id' GROUP BY url ORDER BY url ASC LIMIT 5");

foreach($pop_pages as $page) {

  $page_string = $page_string."<li>".$page->url." (".$page->count." clicks)</li>";

} 
```

# cgi - 在 Web 服务器上启动应用程序

> ID：10873019
> 
> 赞同：1
> 
> 时间：2012-06-03T18:57:06.987
> 
> 标签：cgi

如果我想使用 CGI 脚本在运行 Web 服务器的机器上启动应用程序，我该怎么做？例如，我想在单击链接时运行命令行音频播放器。我能够设置一个启动 mplayer 的简单 cgi 脚本，但它只在浏览器中显示输出，主机上没有实际的音频播放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T19:04:07.850

// 编辑：现在我明白了，你想要做什么。在 php 中它会是这样的：

```
system("mplayer /tmp/yourfile.mp3 &"); 
```

perl 中的功能[应该很相似](http://www.perlhowto.com/executing_external_commands)。

# delphi - 与 JulianDateToDateTime() 一起使用的当前时间值（即 Now()）？

> ID：10873025
> 
> 赞同：2
> 
> 时间：2012-06-03T18:57:52.017
> 
> 标签：delphi, delphi-2010, vcl

我正在尝试将**Now()**返回的值转换为 double ，然后在不同的函数中使用它，即。

```
procedure TForm1.FormCreate(Sender: TObject);
begin
    MyFunction_1(Now);
end;

procedure MyFunction_1(TheTime : Double);
begin
    MyFunction_2(TheTime);
end;

procedure MyFunction_1(ModificationDate : Double);
begin
    if JulianDateToDateTime(ModificationDate) < 12345 then
       ...
end; 
```

但问题是，当前时间值没有正确传递。一个简单的测试`JulianDateToDateTime(Now);`返回这样的东西：

```
0/0/0000 16:10:16 
```

我很确定这是非常基本的东西，我只是不知道它是什么

请问有什么帮助吗？！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T19:18:05.973

你是在倒退。:-)

`JulianDateToDateTime`将儒略日期作为参数并返回 TDateTime。它不以 TDateTime 作为参数；这就是为什么你得到错误的结果。我想你的意思是走另一条路（`DateTimeToJulianDate`）。

来自德尔福文档：

> 调用 JulianDateToDateTime 将儒略日期转换为相应的 TDateTime 值
> 
> 调用 DateTimeToJulianDate 将 TDateTime 值转换为相应的儒略日期。

这是一个显示差异的快速示例：

```
uses DateUtils;

procedure TForm2.FormShow(Sender: TObject);
var
  TodaysDate: TDateTime;
  JDate: TDateTime;
begin
  TodaysDate := Date;
  JDate := DateTimeToJulianDate(TodaysDate);
  ShowMessage('Today: ' + FloatToStr(TodaysDate) + #13 +
              'JDate: ' + FloatToStr(JDate) );
end; 
```

这是输出：

![JulianDateToDateTime 示例](../Images/515d3ca6b68fb788e08f3755562f816e.png)

请注意，再添加一个`TDateTime`类型变量并尝试使用`JulianDateToDateTime`会引发范围异常：

```
BadDate: TDateTime;
...

BadDate := JulianDateToDateTime(TodaysDate);   // raises exception 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T19:26:36.103

[`Now()`](http://www.delphibasics.co.uk/RTL.asp?Name=Now)返回一个`TDateTime`时间戳，它是一个`Double`，在单元中定义`System`：

```
TDateTime = type Double; 
```

如果要将其转换为儒略日期，则需要将其输入[`DateTimeToJulianDate`](http://docwiki.embarcadero.com/Libraries/en/System.DateUtils.DateTimeToJulianDate)：

```
DateTimeToJulianDate(Now) 
```

# php - DOM Scrape 不工作 PHP

> ID：10873028
> 
> 赞同：2
> 
> 时间：2012-06-03T18:58:15.633
> 
> 标签：php, html, parsing, dom, scrape

我只是想知道为什么这对我不起作用。我想要做的是去掉 m4v 文件。我有一个类似的脚本适用于我网站上的图像，它将剥离图像，上传到目录和数据库并链接。但我不能让它以同样的方式工作。谢谢你的帮助

```
<?php

include('simple_html_dom.php');

$html = file_get_html("http://www.mysitesvids.com/m/videos/view/36821");
$element = $html->find("file:");
$result = $element->innertext;

?> 
```

这是网站上的代码

```
<script type="text/javascript" language="javascript">
jwplayer ('embedFlashPlayer').setup         ({flashplayer:'/swf/jwplayer5.swf',id:'moviePlayer',width:602,height:404,
    file:'http://davesvideos.mysitevids.com/media/b0e9ec18eb567ce41dce906cee7e1c9f/4fcbb164/videos/m/634276.m4v',
image:'/media/80eb2eaca3c58f002be8ab5bda476e91/4fcbb164/videos/p/64/634276.jpg',
provider:'http',controlbar:'bottom',stretching:'uniform',abouttext:'mysite',aboutlink:'http://www.eroprofile.com/'});

glbUpdViews ('0','634276','0','0');
ajaxActive = false;
cmtLoad ('video', '634276', '', '');
ajaxActive = false;
cmtReply ('video', '634276', '0');

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T19:20:17.997

从 SimpleHtmlDom 的文档中，`find()`仅匹配 html 元素，因此您无法使用 'file:' 搜索`find()`，您可以这样做：

```
$script = $html->find('script')->innertext 
```

并应用正则表达式匹配 *.mv4 文件`$script`。

或者，您可以将正则表达式匹配直接应用于文件内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:32:46.960

使用正则表达式会更容易解决：

```
preg_match( "/file:'(.+?)'/", $html, $matches );

if ( $matches ) {
    echo $matches[1];
} 
```

我假设您在页面上没有此字符串模式的其他实例。如果您这样做了，并且您只想匹配 m4v，您可以修改表达式以查找该扩展名：

```
preg_match( "/file:'(.+?\.m4v)'/", $html, $matches );

if ( $matches ) {
    echo $matches[1];
} 
```

# sql-server - 如何在保证结果中有 Y 个特定行的同时选择 X 个随机行？

> ID：10873030
> 
> 赞同：7
> 
> 时间：2012-06-03T18:58:34.597
> 
> 标签：sql-server, sql-server-2008, select, random

假设一个表结构：

```
Create Table Question
{
ID int pk,
Category varchar
Stem varchar,
AnswerA varchar,
...
AnswerD varchar,
Correct char,
isMandatory bit

} 
```

对于给定的类别，大约有 50 个问题。可以有 1-10 个必填问题。

我需要选择所有强制性问题，然后随机选择足够多的其他问题来制作一个包含 20 个问题的问题集。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T19:12:23.557

好的，这个怎么样

```
select top 20 * from question
where category = @category
order by isMandatory desc, newid() 
```

请参阅接受的答案以了解数据库表中的 newid()[随机记录 (T-SQL)背后的原因](https://stackoverflow.com/questions/191342/random-record-from-a-database-table-t-sql)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-03T19:12:27.227

```
;WITH T 
     AS (SELECT *, 
                ROW_NUMBER() 
                  OVER (PARTITION BY Category 
                            ORDER BY isMandatory DESC, CRYPT_GEN_RANDOM(4)) RN 
         FROM   Question) 
SELECT * 
FROM   T 
WHERE  RN < = 20 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T19:07:14.333

```
 Declare @number_of_nonmandat INT

   Select @number_of_nonmandat=count(1)
   FROM Question
   where isMandatory =1

   SET @number_of_nonmandat=20-number_of_nonmandat;

    IF(@number_of_nonmandat>0)
    BEGIN
         Select *
         FROM Question
         where isMandatory =1
           UNION 
         SELECT TOP (@number_of_nonmandat)  *
         FROM Question
         where isMandatory<>1
         ORDER BY newID()
    END
    ELSE 
    BEGIN
        Select top 20 *
         FROM Question
         where isMandatory =1

    END 
```

# php - 如何防止在包含的文件中包含两次相同的文件？

> ID：10873031
> 
> 赞同：1
> 
> 时间：2012-06-03T18:58:36.360
> 
> 标签：php, include, require

在主`index.php`文件中，`header.php`包含。这两个文件都必须插入`session.php,` `database.php`等才能运行。但是当包含 header.php 时，有两个相同的**require/include 文件**，所以有两个相同的函数，查询。这会导致文件中出现一些问题。
这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-03T18:59:36.607

使用`include_once`而不是`include`.

> include_once 语句在脚本执行期间包含并评估指定的文件。这是一种类似于 include 语句的行为，唯一的区别是**如果文件中的代码已经被包含，它将不会再次被包含**。顾名思义，它将仅包含一次。

[http://php.net/manual/en/function.include-once.php](http://php.net/manual/en/function.include-once.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-06T12:17:49.503

这是一个很老的问题，但我要回答这个问题，因为如果您正在寻找这个问题的答案，搜索引擎会指向这里。

您不能信任用户，他们使用`include_once`或`require_once`功能始终加载您的脚本。为了避免多次加载相同的脚本，您可以定义特定的常量并验证它是否已经定义。

您的脚本文件（test.php）：

```
<?php
if(defined('MY_UNIQUE_SCRIPT')){
    return true;
}

const MY_UNIQUE_SCRIPT = true;

echo __FILE__.PHP_EOL; 
```

如果你调试它：

```
<?php
//Lets debug it
include 'test.php';
include 'test.php';
require 'test.php';
require 'test.php';
include 'test.php'; 
```

您的脚本仅加载一次，所有其他包含尝试都将被忽略。

基于一个示例，您可以实现更完美地满足您需求的类似解决方案。

# git - Heroku Git - 致命：远程端意外挂断

> ID：10873032
> 
> 赞同：15
> 
> 时间：2012-06-03T18:58:36.970
> 
> 标签：git, ssh, github, rsa

```
Microsoft Windows [Version 6.1.7600]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

E:\Windows\system32>heroku login
Enter your Heroku credentials.
Email: mymail@yahoo.com
Password (typing will be hidden):
Found existing public key: E:/Users/Stewie/.ssh/id_rsa.pub
Uploading SSH public key E:/Users/Stewie/.ssh/id_rsa.pub... failed
 !    Fingerprint already exists. Please use one SSH key per Heroku account

E:\Windows\system32>git clone git@heroku.com:sharp-winter-5732.git -o heroku
Cloning into 'sharp-winter-5732'...

 !  Your key with fingerprint f2:a2:f9:4a:c4:16:5b:f1:5a:21:cb:d8:c4:d2:18:ef is
 not authorized to access sharp-winter-5732.

fatal: The remote end hung up unexpectedly

E:\Windows\system32> 
```

为什么我一直有这个错误？我应该怎么办？不要给我减分，因为我已经看过

[https://help.github.com/articles/set-up-git](https://help.github.com/articles/set-up-git)

并给我

```
E:\Windows\system32>git config --global user.name "Stewie"

E:\Windows\system32>git config --global user.email "mymail@yahoo.com"

E:\Windows\system32>git config --global credential.helper cache
warning: credential.helper has multiple values
error: cannot overwrite multiple values with a single value
Use a regexp, --add or --replace-all to change credential.helper.

E:\Windows\system32>git config --global credential.helper 'cache --timeout=3600'

E:\Windows\system32>git clone git@heroku.com:sharp-winter-5732.git -o heroku
Cloning into 'sharp-winter-5732'...

!  Your key with fingerprint f2:a2:f9:4a:c4:16:5b:f1:5a:21:cb:d8:c4:d2:18:ef is
not authorized to access sharp-winter-5732.

fatal: The remote end hung up unexpectedly

E:\Windows\system32> 
```

我也试过

[GitHub：权限被拒绝（公钥）。致命：远端意外挂断](https://stackoverflow.com/questions/3617113/github-newbie-problems-permission-denied-publickey-fatal-the-remote-end)

我不知道该怎么办 ....

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-03T19:06:09.597

你的钥匙好像有问题。也许您需要将当前密钥上传到 he heroku

```
heroku keys:add 
```

“管理您的 SSH 密钥”中的详细信息：[https ://devcenter.heroku.com/articles/keys](https://devcenter.heroku.com/articles/keys)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T19:12:57.413

[部署 heroku 代码时权限被拒绝（公钥）。致命：远端意外挂断](https://stackoverflow.com/questions/4269922/permission-denied-publickey-when-deploying-heroku-code-fatal-the-remote-end)

在此链接中，我遇到了同样的问题，以下步骤对我有用：

```
 ->heroku login
       abc@gmail.com & password
    ->cd C:\Users\yourusername\.ssh
    ->ssh-keygen -t rsa -f id_rsa 
```

如果它要求任何密码短语不要使用空白，填写密码短语但不要忘记它。

```
 ->heroku keys:add "id_rsa.pub" 
```

将目录更改为工作区，然后

```
 ->git clone git@heroku.com:stark-dawn-1234.git -o heroku 
```

使用您在上面设置的密码。

# php - 事务和 PHP

> ID：10873034
> 
> 赞同：1
> 
> 时间：2012-06-03T18:58:43.920
> 
> 标签：php, transactions

我一直在尝试制作这样的功能，以确保单击时所有值都成功存储在数据库的多个表中。我读了一篇关于它的文章，它说：

“ PHP中没有这样的方法，我们必须使用直接SQL。（在PHP PDO中有这样的方法。）”

请让我知道是否可以仅在 sql 查询中嵌入开始事务和结束事务，因为我从未在 PDO 上工作过，我唯一的想法是在一个 SQL 查询中对表进行多次插入。

**粗略的想法**

```
<?php
$sql = " 
Begin Transaction
insert into .............
insert into ...........
End Transaction "
mysql_query($sql) ?> 
```

* * *

我找到的解决方案：

```
mysql_select_db($database_dany, $dany);
  if (mysql_query('BEGIN')) {
    if (
        mysql_query($query1)  &&
        mysql_query($query2)  &&
        mysql_query($query3) &&
        mysql_query($insertSQL) 
        )
        $result = mysql_query('COMMIT'); // both queries looked OK, save
    else
    {
        mysql_query('ROLLBACK'); // problems with queries, no changes
        echo "There are some problemo!!!";
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T19:12:34.403

您可以使用以下语法插入多行：

```
INSERT ALL
   INTO mytable (column1, column2, column3) VALUES ('val1.1', 'val1.2', 'val1.3')
   INTO mytable (column1, column2, column3) VALUES ('val2.1', 'val2.2', 'val2.3')
   INTO mytable (column1, column2, column3) VALUES ('val3.1', 'val3.2', 'val3.3')
SELECT * FROM dual; 
```

如果您想了解更多信息，请查看此链接[http://www.techonthenet.com/oracle/questions/insert_rows.php](http://www.techonthenet.com/oracle/questions/insert_rows.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:01:00.330

这将根据您使用的数据库而有所不同。有关该主题的 mysql 文档页面：http: [//dev.mysql.com/doc/refman/5.5/en/commit.html](http://dev.mysql.com/doc/refman/5.5/en/commit.html)

```
 START TRANSACTION;
 SELECT @A:=SUM(salary) FROM table1 WHERE type=1;
 UPDATE table2 SET summary=@A WHERE type=1;
 COMMIT; 
```

# python - 更改 StyledTextCtrl 的字体颜色

> ID：10873036
> 
> 赞同：0
> 
> 时间：2012-06-03T18:59:09.477
> 
> 标签：python, wxpython, wxwidgets

我正在尝试更改以下 StyledTextCtrl 的默认字体颜色，我已经对此进行了一段时间的测试并更改了十六进制代码值，但是我似乎无法让它更改颜色。（我希望它是紫色的）。当前默认颜色为黑色。

当我添加

```
self.StyleSetForeground(wx.stc.STC_STYLE_DEFAULT,wx.Colour(230, 230, 250)) 
```

它改变了行号的颜色。（在 StyledTextCtrl 的一侧，它显示了您所在的行）。

有谁知道解决方案，或者可能是什么导致了冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T07:33:59.833

`self.StyleSetForeground(wx.stc.STC_STYLE_DEFAULT,wx.Colour(230, 230, 250))`只会改变**默认样式**的颜色。

您的代码使用许多不同的样式，每种样式都指定了自己的颜色。请注意以下代码中的“前”参数：

```
self.StyleSetSpec(stc.STC_P_COMMENTLINE,
    "fore:#007F00,face:%(other)s,size:%(size)d" % faces) 
```

您的行号似乎使用默认样式，而所有其他文本都使用自己的样式。我不明白样式是在哪里设置的，所以我无法解释为什么行号不使用`wx.stc.STC_STYLE_LINENUMBER`.

因此，要么删除`self.StlyeSetSpec()`调用，要么在初始化程序的末尾包含你的`self.StyleSetForeground()`调用（不要忘记调用`self.StyleClearAll()`以将所有文本重置为默认样式）。

# android - 在浏览器/webview 中使用 Facebook Mobile 身份验证

> ID：10873037
> 
> 赞同：0
> 
> 时间：2012-06-03T18:59:12.647
> 
> 标签：android, facebook, webview

我已将 Facebook 登录到我的手机。我的应用程序使用 webview，并且在该 webview 中有一个类似 facebook 的按钮。然后我点击它，它再次要求登录。不能用手机登录吗？我不能将我的手机授权传递给 webview

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:06:08.700

[该线程](https://stackoverflow.com/questions/4593061/how-to-retrieve-an-facebook-authtoken-from-the-accounts-saved-on-android)讨论了使用`AccountManager`Android 或[Facebook SDK](https://github.com/facebook/facebook-android-sdk)来做你想做的事情。

# ruby - Ruby PHP解析库？

> ID：10873044
> 
> 赞同：3
> 
> 时间：2012-06-03T18:59:50.377
> 
> 标签：ruby, parsing

我需要从 ruby​​ 中的 PHP 文件中提取一些静态数据。我环顾四周，但找不到任何实用工具。

有谁知道可以让我从 PHP 源文件中获取 AST 的 Ruby 库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:11:06.893

由于您的服务器上有 php，您可以使用[PHP-Parser](https://github.com/nikic/PHP-Parser)解析您的 php 文件，然后输出解析结果（以易于阅读的格式，例如 json）供 ruby​​ 读取和使用。

尽管如果您可以使用正则表达式解决方案（例如，如果您只需要获取一些常量变量值），那么这样做可能是可以的。根据输入的 php 文件的复杂程度以及需要提取的数据量，很难知道。

# python - 在 Google App Engine (python) 上的特定时间间隔后执行后端操作/任务

> ID：10873049
> 
> 赞同：0
> 
> 时间：2012-06-03T19:00:28.903
> 
> 标签：python, google-app-engine, scheduled-tasks, backend, task-queue

我希望我的 GAE 应用程序在特定时间间隔（比如每 6 小时）后进行一些后端处理并将结果上传/更新到数据存储。因此，每当用户使用我的应用程序（并且基本上从数据存储中请求这些值）时，他们都会从数据存储中获取最近/更新的值。

这将如何在谷歌应用引擎中实现？如果有人可以指导我正确的方向和/或为我提供与在 python 中执行此类操作相关的信息，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:01:35.547

看一下 Cron 任务或使用特定的 ETA 设置任务队列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T23:07:16.853

正如@PanoJee 所说，Cron 是您要寻找的。看看[Python Cron](https://developers.google.com/appengine/docs/python/config/cron)，它包含您需要的所有信息。

# php - 使用 onclick 调用分配一个 php 变量总是分配第二个 onclick

> ID：10873057
> 
> 赞同：0
> 
> 时间：2012-06-03T19:01:37.040
> 
> 标签：php, onclick

我有这些 onclicks，当单击时，将在头部实例化的 $table 的值更改为 `$table = 'dust_devils';` 默认的dust_devils

```
<span onclick = <?php $table = 'dust_devils';?>> Dust Devils </span> <br />
<span onclick = <?php $table = 'fire_giants';?>> Fire Giants </span> 
```

这些连接到我的函数 `function getLog($table){...}` 以便从我的数据库中获取特定的表。

但是，当我的页面加载时，它会自动加载到最后一个作业。在这种情况下，它是 fire_giants。

有人知道这里有什么问题吗？

* * *

编辑：除了服务器端+客户端不交互的事实。有一个默认值，它不遵循声明的 SERVER 端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:22:58.240

你必须做这样的事情。

```
<span onClick = "load('FireGiants')">Fire Giants</span> 
```

使用 Jquery/javascript 随便

```
<script>
function load(type){
  $.AJAX({
      Method:"post",
      url:"getTable.php",
      data : {"type" : type},
      success : function(d) {
          $('#AREATOAPPEND').append(d);
      }
  });

}
</script> 
```

使用一个只为点击功能进行渲染的 php 页面。

```
 <?php
 $type = $_POST['type'];

 //Do Table Generation

 echo 'Table for this type';
 ?> 
```

或者您可以通过 JSON 或其他方式将整个结构传递给表，然后在客户端即时渲染它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:05:30.993

您忘记了在将页面发送到浏览器之前，所有 PHP 都在服务器上进行评估和执行。

如果您在浏览器中查看 HTML 源代码（通常按 Ctrl+U），您将看到我在说什么。

# mysql - 使用有效但失败，为什么？

> ID：10873061
> 
> 赞同：0
> 
> 时间：2012-06-03T19:02:16.360
> 
> 标签：mysql, sql

以下查询有效：

```
SELECT 
    SUM(sales), 
    date
FROM 
    sales
    INNER JOIN
    exchange_rates
    USING(date) 
```

但这失败了：

```
SELECT 
    SUM(sales), 
    date
FROM 
    sales
    INNER JOIN
    exchange_rates
    ON sales.date = exchange_rates.date 
```

为什么会失败——我以为它们是一样的？我将如何解决第二个查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T19:18:10.167

通常，如果您使用该`USING`子句，则您要加入的列不需要在`SELECT`列表中使用别名。数据库知道该列没有歧义——没有可能`sales.date`与`exchange_rates.date`. `ON`另一方面，如果您使用该子句，则可能会产生歧义。显然，在这种情况下，您人类知道没有歧义，只是语法不能保证这一点。

```
SELECT 
    SUM(sales), 
    sales.date
FROM 
    sales
    INNER JOIN
    exchange_rates
    ON sales.date = exchange_rates.date
GROUP BY sales.date 
```

`GROUP BY`应该可以工作（为了明确起见，我也添加了）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T19:06:31.853

尝试在实际的 select 语句中调用 Date 的别名？

```
SELECT SUM(s.sales), e.date FROM sales s INNER JOIN exchange_rates e ON s.date = e.date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T19:13:37.797

如果您的日期列也包含时间，则它们极不可能匹配以便加入。你有没有尝试过这样的事情？

```
INNER JOIN 
exchange_rates
ON DATE_FORMAT(sales.date,'%c,%e %m) = DATE_FORMAT(exchange_rates.date,'%c,%e %m) 
```

# iframe - 在 Google Chrome 扩展程序中播放获利的 YouTube 歌曲。我有什么选择吗？

> ID：10873063
> 
> 赞同：2
> 
> 时间：2012-06-03T19:02:54.587
> 
> 标签：iframe, google-chrome-extension, youtube, youtube-api, youtube-javascript-api

我在开发 Google Chrome 扩展程序时遇到了巨大的障碍。任何被货币化（例如有广告）的 YouTube 歌曲都不会播放。

这记录在这里： [https ://developers.google.com/youtube/flash_api_reference_as2#Events](https://developers.google.com/youtube/flash_api_reference_as2#Events)

以及这里：[https ://stackoverflow.com/questions/4852490/some-videos-not-playing-through-youtube-api](https://stackoverflow.com/questions/4852490/some-videos-not-playing-through-youtube-api)

以前，我一直在使用 YouTube 的 Flash API。在我尝试部署我的扩展之前，这很有效。那时我遇到了巨大的安全问题，由于权限不足而锁定了应用程序。因此，我重写了播放器以使用 iFrame API 而不是 Flash API。

iFrame API 使我能够成功部署而没有任何 Flash 安全问题，但现在我无法播放任何带有广告的歌曲。

有谁知道解决这个问题？

编辑：

我的扩展可以在这里下载：[http ://www.meomixes.com/](http://www.meomixes.com/)

扩展的来源可以在这里看到：http: [//github.com/MeoMix/YouPod](http://github.com/MeoMix/YouPod)

例如，这首歌对我来说非常适合：[http ://www.youtube.com/watch?v=QXtPoNfOYSo](http://www.youtube.com/watch?v=QXtPoNfOYSo)

但是，这首歌在播放时会出错：[http ://www.youtube.com/watch?v=_dfVAAWbLUY](http://www.youtube.com/watch?v=_dfVAAWbLUY)

请注意，第二首歌曲已被货币化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T15:26:06.933

First, I initialised the player and loaded the video:

[![player = new YT.Player(getFrameID('MusicHolder'));player.loadVideoById('_dfVAAWbLUY')](../Images/6c5d2d119bca415794ea335af715988c.png)](https://i.stack.imgur.com/Zww9W.png)

As you can see, the player refused to embed the video, because the player is too small. So, I changed the size of the player, and tried again:

[![$('iframe').width(640).height(390);player.loadVideoById('_dfVAAWbLUY');](../Images/d49f2df9f0b1f884d0eef40e5e03fe1d.png)](https://i.stack.imgur.com/AVyc5.png)

The video started playing. I've tested the same code in an extension, and the problem also disappeared.

So, create the dummy frame as follows:

```
<iframe
    width="640"
    height="390"
    src="http://www.youtube.com/embed/dummy?enablejsapi=1"
></iframe> 
```

Some more debugging information:

*   In the previous screenshots, `http://localhost:8000/` is the root directory of the chrome extension. I used `python -m SimpleHTTPServer` to create the server.
*   I intercepted the messages between the frame and the page, and found that error code 150 was thrown. According to the [documentation](https://developers.google.com/youtube/js_api_reference#Events), this "is the same as 101", and "the 101 error code is broadcast when the video requested does not allow playback in the embedded players."

[![player = new YT.Player(getFrameID('MusicHolder'));onmessage=console.log.bind(console);player.loadVideoById('_dfVAAWbLUY')](../Images/77265b21b33c80dbae525858faf18a62.png)](https://i.stack.imgur.com/PZKDF.png)

# objective-c - loadNibNamed 加载到不同的 IBOutlets？

> ID：10873064
> 
> 赞同：1
> 
> 时间：2012-06-03T19:02:54.697
> 
> 标签：objective-c, cocoa-touch, interface-builder, iboutlet

我有一个非常奇怪的问题，还没有解决它。

此类定义：

```
@interface EngineViewController : UIViewController
{
}
@property (nonatomic,readonly) IBOutlet GameView* vGameView;
@property (nonatomic,readonly) IBOutlet MainMenu* vMainMenu;
@property (nonatomic,readonly) IBOutlet CountryOverlay* vCountryOverlay;
@end 
```

在 init 方法中，我有以下代码：

```
if (![[NSBundle mainBundle] loadNibNamed:@"EngineViewController" owner:self options:nil])
{
    NSLog(@"Failed to load menu nib!");
    return NO;
}

// init
[self.view addSubview:vMainMenu]; 
```

问题是，vMainMenu 为 nil，vGameView 为 0x1，并且 MainMenu 类实例被分配给 vCountryOverlay（而不是 vMainMenu）。

是的，在 Xib 中，我将 EngineViewController 作为文件所有者，并将 vMainMenu 插座设置为 UIView（MainMenu 类）+ 未设置其他插座。

我不知道该尝试什么。我尝试创建一个空的 xib，将文件所有者设置为 EngineViewController 并再次设置该 vMainMenu 插座。我还尝试在开头添加一个新的“虚拟”插座属性。尝试从应用程序的不同部分调用 loadNibNamed，始终相同。

但是当我创建一个新的、干净的项目、新的笔尖、设置所有者、制作了一些插座并做同样的事情时，它工作得很好。

为什么 loadNibNamed 会导致第一个出口设置为 0x1 并“偏移”其他出口，将当前出口的实例设置为下一个出口？知道要尝试什么吗？

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:24:28.237

UIViewController 的默认 init 方法可能会做一些棘手的事情。你应该使用

```
- (id) init {
   self = [self initWithNibNamed:@"EngineViewController" ....];
   if (self) { ... }
   return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:40:58.173

好的。问题出在（gdb）调试器中。它显示错误符号的错误数据。数据已正确加载到 IBOutlets，崩溃问题在其他地方。非常感谢您尝试帮助我。

在这些情况下，先尝试使用 NSLog。:P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T20:08:19.830

您是否介意为您的属性尝试以下声明：

```
@property (nonatomic,retain) IBOutlet GameView* vGameView;
@property (nonatomic,retain) IBOutlet MainMenu* vMainMenu;
@property (nonatomic,retain) IBOutlet CountryOverlay* vCountryOverlay; 
```

# python - 使用装饰器将所有 Unicode 字符串转换为二进制字符串是一种好习惯吗？

> ID：10873070
> 
> 赞同：1
> 
> 时间：2012-06-03T19:03:29.860
> 
> 标签：python, unicode, decorator

最近我写了一个小脚本来通过 telnet 连接到服务器（由于某种原因，所有特定程序都拒绝连接）。程序是这样的：

```
import telnetlib
tn = telnetlib.Telnet('www.google.com',80)
tn.write('GET / HTTP/1.0\n')
tn.write('Host: www.google.com\n')
tn.write('User-agent: Chrome\n\n')
out = tn.read_all()
print(out) 
```

它在 Python 2.x 中完美运行。但后来我开始在 Python 3.x 中使用它并遇到问题，即 Python 3.x 中的所有字符串都是 Unicode 对象。所以我开始思考如何解决这个问题，并提出了一个使用装饰器的解决方案。

实际上，我可以`b`在每个字符串之前放置（只有少数字符串）。但我想把它当作一个巨大的代码片段（只是为了训练和使用良好的代码实践）。

使用装饰器的解决方案如下：

```
def to_binary(f):
    def wrapper(self, *args):
        s,*args = args
        s = s.encode() #this line performs conversion to binary string
        return f(self, s, *args)
    return wrapper

telnetlib.Telnet.write = to_binary(telnetlib.Telnet.write) 
```

我的问题是：

这是我将来在项目中使用的好解决方案吗？或者我最好在每个字符串前面加上`tn.write`with `b`，或者甚至使用其他东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T19:04:53.833

这是一个糟糕的解决方案，如果没有其他原因，它复制了[`codecs`](http://docs.python.org/py3k/library/codecs.html#streamwriter-objects)模块中的一个类所做的事情。

# xml - 检测xml as2中的节点

> ID：10873073
> 
> 赞同：0
> 
> 时间：2012-06-03T19:03:37.887
> 
> 标签：xml, flash, actionscript-2

所以到目前为止我有这个代码

```
var my_xml = new XML();
my_xml.ignoreWhite = true;
my_xml.onLoad = onXMLLoaded;

function reloadXML(){ 
my_xml.load("direktno.xml");
}
my_xml.load("direktno.xml");
function onXMLLoaded() { 
 if (my_xml.childNodes) {
 _root.main.ma4.minutegoal1.text = my_xml.firstChild
 }

 if (my_xml.childNodes[1]) {

    _root.main.navigator._visible = true;
} else {

    _root.main.navigator._visible = false;
}
} 
```

基本上我是从 SWF 文件中的 XML 文件加载数据。这是 XML：

```
<game>
<minute>67</minute>
<score1>1</score1>
<score2>3</score2>
</game>

<game>
<minute>67</minute>
<score1>1</score1>
<score2>3</score2>
</game> 
```

所以现在有两个 childNodes `<game>`如您所见，我正在检查`(my_xml.childNodes[1])`，在我的情况下，有，所以`navigator`显示。但是在它显示出来之后，我必须在里面做一个按钮，当它被按下时，将内容从第二个加载`childNode`到`_root.main.ma4.minutegoal1.text`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:37:47.017

在 Actionscript 2 中，您需要使用[Xpath API](http://www.informit.com/articles/article.aspx?p=459947)。如果您希望能够使用如图所示的点表示法，即 e4x，则需要使用 Actionscript 3。

# c# - 检索修改后的变量值

> ID：10873075
> 
> 赞同：3
> 
> 时间：2012-06-03T19:03:54.973
> 
> 标签：c#, ironruby, dynamic-language-runtime

我有一个 IronRuby 脚本，它通过`ScriptScope`.

我想在修改后检索变量的值，但我得到了旧值。

这是我的代码：

```
var engine = Ruby.CreateEngine();
var scope = engine.Runtime.CreateScope();

scope.SetVariable("y", 11);

var source = engine.CreateScriptSourceFromString("y=33; puts y;", SourceCodeKind.Statements);
source.Execute(scope); 
```

上面的代码执行并输出`33`到控制台，就OK了。

但是，我尝试在上述代码之后添加以下行：

```
Console.WriteLine(scope.GetVariable("y")); 
```

它输出`11`，这是原始值。

有没有办法获得新的变量值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:28:18.390

使用 IronPython，为了检索一个值，我使用这样的代理对象。

```
public class ScriptProxy
{
    private int _result;

    public int Result
    {
        get { return this._result; }
        set { this._result = value; }
    }
} 
```

我调用 SetVariable 来传递 ScriptObject 的一个实例：

```
ScriptEngine pyEngine = Python.CreateEngine();
ScriptScope pyScope = pyEngine.CreateScope();

ScriptProxy proxy = new ScriptProxy();
pyScope.SetVariable("proxy", proxy); 
```

在您的脚本中，您可以设置结果：

```
proxy.Result=33; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:29:47.397

Setvariable是改变输入

例如

如果你有 y = y + 1

在 DLR 之前，您会先制作脚本“y = 11”，然后是“y = y + 1”，如果您想再次运行 y = 15，您将构建一个新脚本，将 y 初始化为 15，然后它会被再次解释。

发生的事情是 y = 33 被 y = 11 取代，setvariable 是这样您可以对不同的输入使用相同的编译脚本

# mongodb - 如何在 mongodb 中进行“不在”操作？

> ID：10873077
> 
> 赞同：1
> 
> 时间：2012-06-03T19:04:07.710
> 
> 标签：mongodb, database-schema, schema-design

我有两个系列——购物者（某一天在店里的每个人）和海滩游客（某一天在海滩上的每个人）。每天都有条目，人们可以在海滩上，或者购物，或者两者都做，或者任何一天都不做。我现在想查询 - 过去 7 天内没有去海滩的所有购物者。

我是 Mongo 的新手，所以我的模式设计可能不适合 nosql 数据库。我看到了关于 join 的类似问题，并且在大多数情况下，建议进行非规范化。因此，我能想到的一种解决方案是创建集合 - 活动、日期索引、嵌入用户的操作。所以像

```
{
   user_id
   date
   actions {
      [action_type, ..]
   }
} 
```

现在插入变得昂贵，因为现在我必须在插入之前进行查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T19:18:56.137

几点建议。

找出您将要运行的所有查询，以及您需要存储的所有数据类型。例如，您是否希望在未来增加活动，或者海滩和购物会是全部吗？

考虑您将拥有多少写入与读取，哪些必须更快。

确定您的文档将如何随着时间的推移而增长，以确保您的架构在长期内具有可扩展性。

这是一种可能的方法，如果您永远只有这两个活动。每个用户每天一条记录。

```
{ user: "user1",
  date: "2012-12-01",
  shopped: 0,
  beached: 1
} 
```

现在，无论您有两个还是十个活动，您的查询都变得更加简单。

当有新活动出现时，您总是必须根据它更新正确的记录。如果您认为您可以将一条记录附加到您的集合中，指示用户、日期、活动，那么您的插入会快得多，但是您的查询现在必须对用户、日期*和*活动进行大量的查询工作。

使用建议的模式，这是插入/更新语句：

`db.coll.update({"user":"username", "date": "somedate"}, {"shopped":{$inc:1}}, true)`

这就是说：“对于某个日期的用户名，将他们的购物属性增加 1，并在它不存在时创建它，即[“upsert”](http://www.mongodb.org/display/DOCS/Updating#Updating-%7B%7Bupserts%7D%7D)（这是最后一个“真”参数）。

这是针对在特定日期多次执行活动 1 但未执行任何活动 2 的所有用户的查询。

`db.coll.find({"date":"somedate","shopped":0,"danced":{$gt:1}})`

小心选择单个文档可以具有连续且无限增长的模式。

例如，将所有内容存储在日期和活动数组不断增长的用户集合中就会遇到这个问题。[请参阅此处](http://docs.mongodb.org/manual/use-cases/storing-comments/?highlight=fragmentation)突出显示的部分以对此进行解释 - 请记住，大型文档将不断进入您的工作数据集中，如果它们很大并且其中包含大量无用（旧）数据，那将损害您的性能应用程序，以及磁盘上的数据碎片。

请记住，您不必将所有数据放入一个集合中。最好有一个用户集合，其中包含该用户的一组固定属性，您可以在其中跟踪他们有多少朋友或关于他们的其他半稳定信息，并且还有一个 user_activity 集合，您可以在其中添加每个用户每天的记录什么他们所做的活动。数据的数量或规范化或非规范化与您将在其上运行的查询类型密切相关，这就是为什么弄清楚这些是我提出的第一个建议的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:14:57.487

> 现在插入变得昂贵，因为现在我必须在插入之前进行查询。

请记住，即使使用 RDBMS，当表上有索引时（即通常），插入也可能（相对）昂贵。我认为在 Mongo 中使用嵌入式文档在这方面并没有太大的不同。

对于查询，正如 Asya Kamsky 建议的那样，您可以使用[$nin 运算符](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24nin)来查找没有去海滩的每个人。例如：

```
db.people.find({ 
    actions: { $nin: ["beach"] }
}); 
```

不过，在这种情况下，使用嵌入式文档可能不是最好的方法。我认为最好的方法是拥有一个“平面”活动集合，其中包含如下文档：

```
{
    user_id
    date
    action
} 
```

然后你可以运行这样的查询：

```
var start = new Date(2012, 6, 3);
var end = new Date(2012, 5, 27);
db.activities.find({ 
    date: {$gte: start, $lt: end }, 
    action: { $in: ["beach", "shopping" ] } 
}); 
```

最后一步是在您的客户端驱动程序上，查找存在“购物”记录但不存在“海滩”活动记录的用户 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T19:38:13.267

一种可能的结构是使用嵌入的文档数组（*用户*集合）：

```
{
    user_id: 1234,
    actions: [ 
        { action_type: "beach", date: "6/1/2012" },
        { action_type: "shopping", date: "6/2/2012" }
    ]
},
{ another user } 
```

然后你可以做一个这样的查询，使用[$elemMatch](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24elemMatch)来查找符合特定条件的用户（在本例中，是最近三天购物的人：

```
var start = new Date(2012, 6, 1);
db.people.find( { 
    actions : { 
        $elemMatch : { 
            action_type : { $in: ["shopping"] }, 
            date : { $gt : start } 
        } 
    } 
}); 
```

对此进行扩展，您可以使用 $and 运算符来查找过去三天内所有去购物但没有去海滩的人：

```
var start = new Date(2012, 6, 1);
db.people.find( {  
    $and: [
        actions : { 
            $elemMatch : { 
                action_type : { $in: ["shopping"] }, 
                date : { $gt : start } 
            } 
        },
        actions : { 
            $not: {
                $elemMatch : { 
                    action_type : { $in: ["beach"] }, 
                    date : { $gt : start } 
                } 
            }
        }
    ]
}); 
```

# vba - Word VBA：表格单元格范围到文本文件

> ID：10873080
> 
> 赞同：4
> 
> 时间：2012-06-03T19:04:39.523
> 
> 标签：vba, ms-word

我想在 word 文档中复制这样的表格[并](http://www.allmusic.com/album/heroes-mw0002315317)仅提取曲目标题和作曲家。范围的选择按计划进行：

```
Dim myCells As Range
With ActiveDocument
    Set myCells = .Range(Start:=.Tables(1).Cell(2, 3).Range.Start, _
        End:=.Tables(1).Cell(.Tables(1).Rows.Count, 3).Range.End)
    myCells.Select
End With 
```

现在，当我手动复制此选择并将其粘贴到记事本中时，我得到了我想要的：

```
Title
Composer
Title
Composer
etc. 
```

但是，我想将此选择自动写入文本文件。当我尝试这样做时，所有内容都塞在一行文本中，并且到处都会弹出小方块（段落符号？）。

使用 VBA 如何获得手动复制的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T19:24:41.810

试试这个

```
Sub Allmusic()
    Dim filesize As Integer
    Dim FlName As String, tempStr As String
    Dim i As Long
    Dim MyAr() As String

    '~~> Name of Output File
    FlName = "C:\Sample.Txt"

    '~~> Get a free file handle
    filesize = FreeFile()

    '~~> Open your file
    Open FlName For Output As #filesize

    With ActiveDocument
        For i = 2 To .Tables(1).Rows.Count

            '~~> THIS LINE WILL NOT REFLECT CORRECTLY IN THE BROWSER
            '~~> PLEASE REFER TO THE SCREENSHOT OR THE ATTACHED FILE
            tempStr = Replace(.Tables(1).Cell(i, 3).Range.Text, "", "")

            If InStr(1, tempStr, Chr(13)) Then
                MyAr = Split(tempStr, Chr(13))
                Print #filesize, MyAr(0)
                Print #filesize, MyAr(1)
            Else
                Print #filesize, tempStr
            End If
            Print #filesize, ""
        Next i
    End With

    Close #filesize
End Sub 
```

**快照**

![在此处输入图像描述](../Images/77d6bf5d7844047bc369bfdb990feec7.png)

**样本文件**

[http://sdrv.ms/Mo7Xel](http://sdrv.ms/Mo7Xel)

下载文件并运行程序`Sub Allmusic()`

**输出**

![在此处输入图像描述](../Images/64273bfc9afb00af0dd6fab4c6642008.png)

# php - 如何制作 Facebook 风格的个人资料 URL？

> ID：10873089
> 
> 赞同：1
> 
> 时间：2012-06-03T19:05:37.333
> 
> 标签：php, facebook, url, styles, social-networking

我正在制作一个小型社交网络，并且想知道如何制作 facebook 风格的个人资料网址。例如：

**我当前的网址样式：** www.website.com/user.php ?id=username

**我想要的 Facebook 风格网址：** www.website.com/username

我想知道这是否可以用php创建？会更容易记住。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:08:22.517

查看 .htaccess

```
RewriteRule ^profile/([^\.]+)$ profile.php?user=$1 [QSA,L] 
```

会让你转到 example.com/profile/username?1=1&2=2&3=3 等

资源：

www.htaccess-guide.com/

www.htaccessbasics.com/

www.javascriptkit.com/howto/htaccess.shtml

en.wikipedia.org/wiki/Htaccess

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:08:01.630

您打开 .htaccess 文件并修改内容：

[http://www.javascriptkit.com/howto/htaccess.shtml](http://www.javascriptkit.com/howto/htaccess.shtml)

# html - 如何从 NSData 字节转换俄语文本？

> ID：10873095
> 
> 赞同：0
> 
> 时间：2012-06-03T19:06:22.633
> 
> 标签：html, character-encoding, nsstring, char, nsdata

我有个问题。如何从 NSData 转换俄语文本？

```
NSURL *url = [NSURL URLWithString:@"http://pda.somesite"];
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request setAllowCompressedResponse:YES];
[request startSynchronous];
NSLog(@"response %@",[request responseString]); 
```

**响应（空）**

```
NSLog(@"Length %i", [[request responseData] length]); 
```

**长度 11733**

```
char * dataChar = [[request responseData] bytes];
NSLog(@"%s",dataChar); 
```

//这里我有拉丁文本，但是俄罗斯的符号是这样**的 –ñ–∏–≤–æ–µ –æ–±—â–µ–Ω–∏–µ —Å —Ä–µ–∞–ª—å –Ω—ã–º–∏ –ª—é–¥—å–º–∏ —Å–æ –≤—Å–µ–≥–æ –º–∏—Ä–∞！**

```
NSData * newData = [NSData dataWithBytes:dataChar length:127]; 
```

取前 127 个字符。如果这里取超过 127 结果为 Null！！为什么？我在 127 之后没有特殊符号。如果我从 127 到 255 取符号，这个文本也可以。

```
NSString * data = [[NSString alloc] initWithUTF8String:[newData bytes]]; 
```

俄罗斯符号看起来不错，但我有 127 个字符长的字符串

```
 NSString * str = [NSString stringWithUTF8String:dataChar];//str -> (null)
 NSString * str127 = [NSString stringWithUTF8String:[newData bytes]];//OK but 127 characters 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:04:45.777

替换这个

```
char * dataChar = [[request responseData] bytes];
NSLog(@"%s",dataChar); 
```

有了这个

```
NSString *message = [NSString stringWithCString:[[request responseData] bytes] encoding:NSUTF8StringEncoding];
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"" message:message delegate:nil cancelButtonTitle:nil otherButtonTitles:@"Ok", nil];
[alert show]; 
```

然后你看，一切正常

# php - 递归数组

> ID：10873107
> 
> 赞同：-3
> 
> 时间：2012-06-03T19:07:34.553
> 
> 标签：php, arrays, recursion

我已经花了几个小时来解决这个问题，但没有任何可用的结果。也许有人可以帮我解决这个问题，我想在一个类中使用它，所以我想构建一个方法，将数组作为输入，将重建数组作为输出

我有这个数组：

```
 Array
     (
         [0] => Array
             (
                 [5] => 0-5
                 [8] => 0-8
                 [9] => 0-9
                 [10] => 0-10
             )

         [10] => Array
             (
                 [11] => 10-11
                 [12] => 10-12
             )

         [11] => Array
             (
                 [13] => 11-13
             )

         [12] => Array
             (
                 [14] => 12-14
             )

     ) 
```

这个数组应该被转换成这个：

```
 Array
     (
         [0] => 0-5
         [1] => 0-8
         [2] => 0-9
         [3] => Array
             (
                 [0] => 0-10
                 [1] => Array
                     (
                         [0] => 10-11
                         [1] => Array
                             (
                                 [0] => 11-13
                             )

                         [2] => 10-12
                         [3] => Array
                             (
                                 [0] => 12-14
                             )

                     )

             )

     ) 
```

EDIT1：示例的值也是数组，我想处理一些操作。例如 0-9 是一个动作并停止，但 0-10 有孩子。如果 0-10 完成并返回 true 或 false，则下一个孩子被解雇。如果为真 10-11 否则为 10-12。这是我第一次上这个论坛，很抱歉给您带来不便

EDIT2：也许这个例子有帮助，这是 JSON 中发布的字符串。我在数据库中有几条规则，这将有助于为工作挑选合适的文章。

```
 $postdata = '{"next":false, 
                  "data":{"name":"patrick",
                          "etc":"etc",
                         "MotionDetection":"yes",
                         "nameOfTheRoom": ["Room1","Room2","Room3"],  
                         "havePets":"yes"}';

 Array
 (
     [0] => 0-5
     [1] => 0-8
     [2] => 0-9
     [3] => Array
         (
             [0] => "yes" // MotionDetection
             [1] => Array
                 (
                     [0] => "yes" // Have Pets
                     [1] => Array
                         (
                             [0] => "CountRecords" // Count nameOfTheRoom
                             [1] => "insertArticle A"
                         )

                     [2] => "No" // Have Pets
                     [3] => Array
                         (
                             [0] => "CountRecords" // Count nameOfTheRoom
                             [1] => "insertArticle B"
                         )

                 )

         )

 ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T19:47:27.030

尝试这个：

```
function transform_arr(&$newarr, &$arr)
{
  if(count($newarr) == 0)
  {
    if(!isset($arr[0]))
    {
       return;
    }

    $newarr = $arr[0];
  }

  $newarr2 = array();
  $k = 0;
  foreach( $newarr as $i => $value )
  {
     if( isset($arr[$i]) )
     {
       $newarr2[$k++] = $value;
       $newarr2[$k++] = $arr[$i];

       if(is_array($newarr2[$k - 1])) transform_arr($newarr2[$k - 1], $arr);
     }
     else
     {
       $newarr2[$k++] = $value;
     }
  }
  $newarr = $newarr2;
}

$arr = array( 
  0 => array( 5=> '0-5', 8 => '0-8', 9 => '0-9', 10 => '0-10'),
  10 => array( 11 => '10-11', 12 => '10-12'),
  11 => array( 13 => '11-13'),
  12 => array( 14 => '12-14') );

$newarr = array();
transform_arr($newarr, $arr);

var_dump($arr);
echo '<br/>';
var_dump($newarr); 
```

结果：

```
  [0]=>
  数组（4）{
    [5]=>
    字符串（3）“0-5”
    [8]=>
    字符串（3）“0-8”
    [9]=>
    字符串（3）“0-9”
    [10]=>
    字符串（4）“0-10”
  }
  [10]=>
  数组（2）{
    [11]=>
    字符串（5）“10-11”
    [12]=>
    字符串（5）“10-12”
  }
  [11]=>
  数组（1）{
    [13]=>
    字符串（5）“11-13”
  }
  [12]=>
  数组（1）{
    [14]=>
    字符串（5）“12-14”
  }
}

数组（5）{
  [0]=>
  字符串（3）“0-5”
  [1]=>
  字符串（3）“0-8”
  [2]=>
  字符串（3）“0-9”
  [3]=>
  字符串（4）“0-10”
  [4]=>
  数组（4）{
    [0]=>
    字符串（5）“10-11”
    [1]=>
    数组（1）{
      [0]=>
      字符串（5）“11-13”
    }
    [2]=>
    字符串（5）“10-12”
    [3]=>
    数组（1）{
      [0]=>
      字符串（5）“12-14”
    }
  }
}

```

# android - 在横向时检测屏幕上的点击

> ID：10873111
> 
> 赞同：0
> 
> 时间：2012-06-03T19:08:32.080
> 
> 标签：android, user-interface, android-layout, android-scrollview

我在检测 GUI 上的屏幕点击时遇到了一些问题。纵向工作但横向失败，见下文。

我有一个 GUI ( `Fragment`)，其中包含一些说明 + 图像。用户需要点击屏幕上的任意位置才能继续。为了捕获点击/点击事件，我放入了一个`View`（顶视图），它填充了整个屏幕并位于其他元素上，然后我在这个视图上监听点击，它工作正常。

问题是在横向模式下，文本和图像占据了很大的空间。所以整个事情现在都包裹在一个`ScrollView`. 这就是问题的开始。当`ScrollView`它处于活动状态时（即您可以滚动/滚动条可见），我在顶部的视图（顶视图）消失了。似乎在横向模式下，a 中内容的高度`ScrollView`正在改变。作为一个实验，我`View`用 a替换了 ，`Button`并且当它可用时，它`Button`从纵向填充屏幕变为横向模式下的正常高度。`ScrollView`

有没有一种方法可以检测到用户在屏幕上的点击，它与`ScrollView`控件作为顶部元素一起使用。我尝试以多种方式重新排列 GUI，但没有成功，并且我尝试将`onClick`事件处理程序添加到 中`ScrollView`，但也没有成功。

我的布局在下面，注意我的顶视图是半透明的红色，所以我可以看到它覆盖的区域。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:fillViewport="true"
android:clickable="true" >

<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/txtInstructions"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal|center_vertical"
            android:padding="10dp"
            android:text="@string/instructions"
            android:textColor="@color/blue"
            android:textSize="20sp" />

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:adjustViewBounds="true"
            android:maxWidth="250dp"
            android:padding="20dp"
            android:src="@drawable/main_camera" />
    </LinearLayout>

    <View
        android:id="@+id/view_to_listen_for_touch"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#88FF0000"
        android:clickable="true" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:57:55.837

有效的一件事（虽然看起来更像是一个 hack（很丑））是以编程方式`View`在代码中添加特殊的（在`onCreate`方法中）并根据 parent`RelativeLayout`的确切尺寸设置其尺寸。这是一段代码：

```
//...
        final RelativeLayout parent = (RelativeLayout) findViewById(R.id.ff);
        final View layer = new View(this);
        layer.setBackgroundColor(Color.parseColor("#88FF0000"));
        // the ScrollView really doesn't like this View ,using this without the
        // runnable will not work
        layer.setLayoutParams(new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.MATCH_PARENT,
                RelativeLayout.LayoutParams.MATCH_PARENT));
        layer.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Toast.makeText(getApplicationContext(), "SDFD",
                        Toast.LENGTH_SHORT).show();
            }
        });
        parent.addView(layer);
        // this is required because if we use directly the getWidth/getHeight we
        // will get 0/0
        layer.post(new Runnable() {

            @Override
            public void run() {
                layer.setLayoutParams(new RelativeLayout.LayoutParams(parent
                        .getWidth(), parent.getHeight()));
            }
        });
//... 
```

# javascript - 显示labjs、labjs回调的进度条

> ID：10873114
> 
> 赞同：0
> 
> 时间：2012-06-03T19:08:58.187
> 
> 标签：javascript, labjs, dynamic-script-loading

如何跟踪到目前为止已加载的脚本，以便在使用 labjs (http://labjs.com/) 时显示进度条？`wait()`不起作用，因为那样它就不会并行加载下一个资源。基本上我正在寻找某种我可以绑定的非阻塞回调函数。这在labjs中存在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:00:12.280

1.  `wait()`不影响 LABjs 的并行加载……它总是尽可能地并行加载（浏览器允许）。`wait()`只影响脚本的执行。如果在两次`script()`调用之间插入它，它会确保第二个脚本将“等待”第一个脚本在执行之前完成执行。

2.  不，对于脚本的加载完成没有公开的 API，因为浏览器在脚本完成加载时不会公开一致的 API（仅当它执行时：“onload”，就像那个名字一样令人困惑）。

现在，您**可以**使用每个脚本之间的调用来做一个进度表`wait()`，但它会告诉您一些与您所要求的略有不同的东西：脚本**执行**的百分比，而不是脚本**下载**的百分比。根据您的需要，这可能是完全可以接受的。

# facebook - 如何重新加载现有的 facebook like 按钮而不重新创建它？

> ID：10873117
> 
> 赞同：3
> 
> 时间：2012-06-03T19:09:51.143
> 
> 标签：facebook, xfbml

我想在我的页面中动态刷新一个 fb:like 插件。

例如，进入 index.html，我有：

```
<fb:like id="fbtest" href="http://www.urltest.com" send="true" width="450" show_faces="true"></fb:like> 
```

（Facebook 已初始化，一切正常。）

然后，我想动态更改这个like 按钮的URL。所以，使用 jQuery，我会这样做：

```
$('#fbtest').attr('href', 'http://www.urltest2.com').empty().off().removeData();
FB.XFBML.parse(); 
```

而且它不起作用......它仅在我**删除**fb:like 标记并重新创建它时才起作用（完全相同的 DOM ！）。

正如您在此处看到的：[使用 JavaScript 动态更新 FB:Like URL](https://stackoverflow.com/questions/2764129/update-fblike-url-dynamically-using-javascript)，所有描述的方法都重新创建了 fb:like 标记...我需要**刷新**现有的 fb:like...而不是重新创建它。是否可以 ？

编辑：这是一个用于测试的小提琴:-)：http: [//jsfiddle.net/nRTkS/](http://jsfiddle.net/nRTkS/)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T22:49:14.083

不，我不认为这是可能的。
该`FB.XFBML.parse`方法，顾名思义，只是解析：

```
This function parses and renders XFBML markup in a document on the fly 
```

一旦一个插件已经被渲染，它就不会被重新渲染，否则行为可能会有点奇怪，例如，如果您在同一页面上有多个插件，您将 url 属性更改为类似插件的一个，然后调用`FB.XFBML.parse`这将重新渲染整个文档和其中的插件。

所以是的，您可以确保在将要开始的元素传递给该方法时调用该方法，或者 sdk 可以只为每个插件维护一个状态并仅在更改时重新渲染，但这一切都比只需从 dom 中删除插件，输入新`fb:like`标签，然后调用`FB.XFBML.parse`.

现在，我相信这是真正的原因，但这只是一个猜测。
sdk 在包含实际插件的插件容器内创建一个 iftame。
为了更改类似操作的 url，需要进行跨域通信（对于 fb sdk），我认为只能在一个方向上进行，即从插件到包含页面（因此[edge.create 事件](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T23:13:12.280

你当然可以这样做：

```
var iframe = $("iframe", "#fbtest");
iframe[0].src = iframe[0].src.replace(/&href=(.*?)&/, "&href=" + encodeURIComponent(url) +"&"); 
```

# apache - 我怎样才能只为主页制作一个内部/不可见的mod重写

> ID：10873118
> 
> 赞同：0
> 
> 时间：2012-06-03T19:09:58.237
> 
> 标签：apache, mod-rewrite

我有一些不同的 mod 重写，它们运行良好。但最简单的不是那么好。我只是不想在不可见的索引上显示子页面。

所以[http://foliodock.com](http://foliodock.com)显示[http://foliodock.com/blog/index.php?p=4](http://foliodock.com/blog/index.php?p=4)但仍然只在浏览器栏中显示域。当前的代码是

```
 RewriteRule ^$ blog/index.php?p=4 [L] 
```

在实时站点上，它显示了 foliodock.com/blog/home 在我的 wordpress 博客中启用重定向的原因，但是如果我停用它们， blog/index.php?p=4 就会显示出来。

我该如何做这个重定向隐形或内部？

我在主根目录中有一些额外的重定向和索引文件，所以我不能虚拟主机到博客文件夹等。

完整的重定向是

```
# force trailing slash
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://%{HTTP_HOST}/$1/ [L,R=301]

# force not to use www
RewriteCond %{HTTPS} !=on
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^ http://%1%{REQUEST_URI} [R=301,L]

# Rewrite Base Url to Blog
RewriteRule ^$ blog/index.php?p=4 [L]

# Skip pier, thumb and blog
RewriteRule ^(pier|timthumb|blog)($|/) $ [L]

# load the index file
RewriteRule ^([^/]*)/$ index.html [L]
RewriteRule ^([^/]*)/([^/]*)/$ /index.html [L] 
```

对不起这个愚蠢的问题，但我似乎是盲目的？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:08:48.403

我只需要为客户解决这个问题。

```
 # make homepage the wordpress index
  RewriteCond %{REQUEST_URI} ^(|/)$
  Rewriterule ^(.*)$ /wordpress/ [L] 
```

这使得主页重定向（不可见）到 wordpress 索引页面。我在 Zend 项目中使用它，所以这个条件和规则先于使 zend 工作的重写条件和规则。

一句警告，重写规则不是我的专业领域；在生产服务器上使用它之前彻底测试它。

# javascript - RoR 渲染部分 Tabindex

> ID：10873121
> 
> 赞同：0
> 
> 时间：2012-06-03T19:10:28.280
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3

我有一些代码

`= link_to "Log In", "" = render :partial => "user/session/new"`

我不仅在单击登录时尝试触发此操作，而且当您点击键盘上的选项卡时...我如何在 RoR 中执行此操作

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-25T12:11:50.240

您可以使用`link_to`Rails 中可用的标签来执行您想要链接到您可以接受的事情，您可以提供控制器的路径。

例如：

```
 <%= link_to "Sign-In", new_user_session_path, :class => "dropdown-toggle", :data => {:toggle=>"dropdown"} %> 
```

这类似于

```
 <a href="users/sessions/new" class="dropdown-toggle" data-toggle="dropdown">Sign-In</a> 
```

# javascript - “this”在 .each() 中不能与 .find() 一起使用？

> ID：10873123
> 
> 赞同：2
> 
> 时间：2012-06-03T19:10:30.747
> 
> 标签：javascript, jquery

我正在尝试使用`this`内部访问一个对象`.each()`并希望`.find()`使用它执行但在控制台中它说`.find`是未定义的函数。

```
data=$(data);
$("tr", data).each(function(){
    var est = this.find(".estname a").html;
}); 
```

我也试过这个：

```
data=$(data);
$("tr", data).each(function(){
    var est = $(this).find(".estname a").html;
}); 
```

在控制台中它显示`function()`而不是任何对象:(

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-03T19:11:31.090

它应该是：

```
var est = $(this).find(".estname a").html(); 
```

函数后面有括号`html`。

# php - facebook 应用程序身份验证后 $_GET 数组始终为空

> ID：10873124
> 
> 赞同：0
> 
> 时间：2012-06-03T19:10:48.483
> 
> 标签：php, facebook, facebook-graph-api, facebook-authentication

我正在尝试对我正在使用 atm 的应用程序进行身份验证。该应用程序将基于选项卡。我现在在尝试对应用程序进行身份验证时遇到无限循环。身份验证过程是这样的：

```
if (!isset($_REQUEST["code"])) {
            $_SESSION['state'] = md5(uniqid(rand(), TRUE)); //CSRF protection
            $dialog_url = "http://www.facebook.com/dialog/oauth?client_id="
                    . $appId . "&redirect_uri=" . urlencode($redirectUri) . "&state="
                    . $_SESSION['state'];

            echo("<script> top.location.href='" . $dialog_url . "'</script>");
            exit;
        }

        if ($_REQUEST['state'] == $_SESSION['state']) {
            $code = $_GET["code"];
            $token_url = "https://graph.facebook.com/oauth/access_token?"
                    . "client_id=" . $appId . "&redirect_uri=" . urlencode($redirectUri)
                    . "&client_secret=" . $appSecret . "&code=" . $code;

            $response = @file_get_contents($token_url);
            $params = null;
            parse_str($response, $params);

            $graph_url = "https://graph.facebook.com/me?access_token="
                    . $params['access_token'];

            $user = json_decode(file_get_contents($graph_url));
            echo("Hello " . $user->name);
        } else {
            echo("The state does not match. You may be a victim of CSRF.");
        } 
```

$redirectUri 现在设置为“http://www.facebook.com/pages/DummyPage/PAGE_ID?sk=app_APP_ID”但是一旦我被重定向回来，在身份验证之后，我无法读取 $_GET 或 $_REQUEST 数组因为它们是空的（即使我可以看到我在 auth. 之后获得的 url 中包含“代码”、“状态”等）。这将导致无限循环，因为我被困在第一个 if 语句中。

这里有趣的是，当我将 $redirectUri 更改为我的应用程序所在的 url 时——现在我正在 localhost 上测试它——所以我输入了“http://localhost/test/index.php”——无限循环不会发生，因为我被重定向到 facebook 之外，我可以从 $_GET 数组中读取。

验证时我需要留在 Facebook 上。你们知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T08:00:06.590

请将[Facebook PHP SDK](https://github.com/facebook/facebook-php-sdk)用于您现在正在尝试的事情。

它使事情变得容易得多，并且您可能会在更短的时间内达到目标。

或者

如果你想手动做并且有兴趣学习内部，你需要检查[页面选项卡身份验证](https://developers.facebook.com/docs/authentication/pagetab/)和[签名请求](https://developers.facebook.com/docs/authentication/signed_request/)

# android - 为什么向上按钮的背景与操作栏的其余部分不同

> ID：10873125
> 
> 赞同：0
> 
> 时间：2012-06-03T19:10:52.533
> 
> 标签：android, actionbarsherlock, android-actionbar

我一直在使用 actionbarsherlock 并且在设置背景时遇到问题，这就是我设置背景的方式

```
BitmapDrawable actionbar_background =(BitmapDrawable)getResources().getDrawable(R.drawable.actionbar);
        actionbar_background.setTileModeY(TileMode.REPEAT);
        getSupportActionBar().setBackgroundDrawable(actionbar_background);
        getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

但问题是向上按钮在背景中似乎有阴影或色调，在真实设备中看起来真的很丑，这就是我的意思：

[http://dl.dropbox.com/u/35866688/Screen%20Capture.PNG](http://dl.dropbox.com/u/35866688/Screen%20Capture.PNG)

任何人都可以提出什么问题

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:02:32.587

删除`actionbar_background.setTileModeY(TileMode.REPEAT);`似乎解决了问题，动作栏已经知道重复图像。

虽然我仍然不确定 setTilemodeY 是如何导致问题的。欢迎任何有解释的人

# php - dd/mm/yyyy 格式，但是如何将 d/m/yyyy 格式转换为 Ymd

> ID：10873126
> 
> 赞同：-2
> 
> 时间：2012-06-03T19:10:59.467
> 
> 标签：php, time

我们如何格式化

```
12/4/2012 to 20120412 
```

和

```
4/11/2012 to 20121104 
```

或者

```
5/4/2012 to 20120405 
```

使用 php？

我有使用`strtotime()`和

```
$date = new DateTime('4/11/2012');
$date = $date->format('Ymd'); 
```

但他们都失败**了，php中有解决这个问题的函数**吗？或者我们必须使用正则表达式之类的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T19:29:00.310

如果您将文档阅读到`strtotime()`，您会看到它对日期是否为格式做出了`dd mm yyyy`假设`mm dd yyyy`。

简而言之，假设会根据字符串是否包含连字符或斜杠作为分隔符而改变。不幸的是，编写这两种格式的人都使用连字符和斜杠，因此总会有一些示例被`strtotime()`.

正因为如此，这两种格式都不是理想的，因为它们两者之间存在歧义。最好的选择是以不那么模糊的格式向程序提供日期。

您可以在调用之前对输入字符串进行字符串替换以将分隔符设置为预期格式`strtotime()`。不是一个很好的解决方案，但它确实有效。

如果您无法更改输入格式，并且您确定将收到哪种格式，则可以使用 [ `DateTime::createFromFormat`] 方法而不是`strtotime()`. 这会按原样解析日期字符串 `strtotime()`，但采用特定的格式字符串，因此您可以准确地告诉它您所期望的，从而消除歧义。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:32:14.097

这应该有效：

```
function x($string) {
    $array = explode('/', $string);
    $a = $array[0];
    $b = $array[1];
    $c = $array[2];
    if (( (int)$a - 10) < 0) { $a = "0$a"; }
    if (( (int)$b - 10) < 0) { $b = "0$a"; }
    return "{$c}{$b}{$a}";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T19:14:47.227

您所有的日期示例都是模棱两可的，可能是日期`DMY`或`MDY`日期。您将需要自己解析日期，类似于

```
list($d, $m, $y) = explode('/', $date);
// compose your output from $d, $m and $y 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T19:17:54.347

```
$dateTime = strtotime('12/4/2012');
$output   = date('Ymd',$dateTime); 
```

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

# android - 在 LinearLayout 中包装 ListView

> ID：10873128
> 
> 赞同：3
> 
> 时间：2012-06-03T19:11:23.243
> 
> 标签：android, android-layout, listview, android-linearlayout

我正在尝试制作一个`TextView`顶部、`ListView`中间和`Button`底部的屏幕。我希望它`TextView`始终位于屏幕顶部，而按钮始终位于底部，然后`ListView`介于两者之间。当`ListView`超出“中间空间”时，我希望滚动功能仅在`TextView`和之间`Button`。通过我的尝试，它只是扩展到`TextView`and之外`Button`。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/paper" >

<TextView
    android:id="@+id/tvLOL"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:text="Standardvarer"
    android:textSize="40dp" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/tvLOL"
    android:layout_alignBottom="@+id/bNyVare"
    android:orientation="vertical" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />
</LinearLayout>

<Button
    android:id="@+id/bNyVare"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:text="Tilføj ny vare"
    android:textSize="30dp" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T19:18:08.603

看看这是否有帮助（如果你只用它来包装，则应该删除包装（并将 layout_above/below 移动到`LinearLayout`）：`ListView``ListView``ListView`

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/paper" >

<TextView
    android:id="@+id/tvLOL"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:text="Standardvarer"
    android:textSize="40dp" />

<Button
    android:id="@+id/bNyVare"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:text="Tilføj ny vare"
    android:textSize="30dp" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/tvLOL"
    android:layout_above="@id/bNyVare"
    android:orientation="vertical" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
</LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T00:07:35.800

只是@Luksprog 的替代解决方案，尽管这绝对是更复杂布局的方法。我会放弃`LinearLayout`它周围的`ListView`东西，因为它不会添加任何东西，除了视图层次结构中不必要的复杂性。

您的问题中描述的相对简单的布局也可以使用 a`LinearLayout`作为根和权重来编写，`ListView`以动态填充`TextView`和之间的所有空间`Button`。这个重量也将`Button`一直推到底部，而不会将其推开。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:background="@drawable/paper" android:orientation="vertical">

    <TextView android:id="@+id/tvLOL" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:layout_gravity="center_horizontal"
        android:text="Standardvarer" android:textSize="40dp" />

    <ListView android:id="@android:id/list" android:layout_width="fill_parent"
        android:layout_height="0dp" android:layout_weight="1" />

    <Button android:id="@+id/bNyVare" android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:text="Tilføj ny vare"
        android:textSize="30dp" />

</LinearLayout> 
```

# javascript - 在此示例中，switch 语句是否从顶部开始比较案例？

> ID：10873136
> 
> 赞同：1
> 
> 时间：2012-06-03T19:12:20.447
> 
> 标签：javascript, switch-statement

我发现这个例子使范围与 switch 语句一起工作：

```
function GetText(value)
{
    var result;

    switch (true)
    {
        case ((value >= 26) && (value <= 50)):
            result = ">= 26.";
            break;

        case ((value >= 1) && (value <= 25)):
            result = "Between 1 and 25.";
            break;

        case (value == 0):
            result = "Equals Zero.";
            break;

    }

    return result;
} 
```

但是，如果我修改代码并删除对值的第二次检查，该示例仍然有效：

```
function GetText(value)
{
    var result;

    switch (true)
    {
        case ((value >= 26)):
            result = ">= 26 .";
            break;

        case ((value >= 1)):
            result = "Between 1 and 25.";
            break;

        case (value == 0):
            result = "Equals Zero.";
            break;

    }

    return result;
} 
```

所以如果我通过了 29，即使我有两个`true`案例，第一个也会被选中。我的问题是 switch 语句在大多数编程语言中是如何工作的，它将从顶部开始比较，或者仅在这种情况下进行比较（这样写是好还是坏？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T19:16:49.323

`switch`语句从上到下检查匹配。

来自[关于 switch 语句的 MDN 文档](https://developer.mozilla.org/en/JavaScript/Reference/Statements/switch)：

> 如果找到匹配项，程序将执行相关的语句。如果多个案例与提供的值匹配，则选择第一个匹配的案例，即使案例彼此不相等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:37:17.680

我会做这样的事情（用`if`和`else if`链）：

```
function GetText(value) {
    var result;

    if (value == 0) {
        result = "Equals Zero.";
    } else if (value <= 25) {
        result = "Between 1 and 25.";
    } else if (value <= 50) {
        result = "Between 26 and 50.";
    }

    return result;
} 
```

# objective-c - xcode xib文件中文件所有者的需求是什么？我可以在没有文件所有者的情况下做同样的事情吗？

> ID：10873138
> 
> 赞同：5
> 
> 时间：2012-06-03T19:12:25.147
> 
> 标签：objective-c, xcode, xib, nib

为什么我应该设置文件所有者的类标识而不是 nib 中显示的自定义对象的类标识并从中建立连接？如果我将文件的所有者设置为 nil 会发生什么？对我来说，nil 文件的所有者一切正常，那么从它进行连接的尊重是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-03T20:06:53.737

NIB 表示归档对象图。您可以加载它，该对象图将被重构。事情，您通常希望/需要将新加载的对象图挂接到程序的现有对象图中。您不希望它与其他事物分开，与其他事物脱节。

新加载的对象图可以通过几种方式连接到程序对象图的其余部分。一种方法是NIB 中可用的代理对象集。应用程序对象有一个。另一个这样的代理对象是文件的所有者。代理对象是在 NIB 中具有表示但实际上不包含在 NIB 中的事物。与 NIB 中的其他对象不同，代理表示的对象不是在加载 NIB 时创建的，而是在加载 NIB 之前存在的。代理允许在这些预先存在的对象和 NIB 中的对象之间建立连接。这就是 NIB 中的新对象图可以连接到程序的现有对象图的方式。

MainMenu NIB 是不寻常的。它是由 Cocoa 在应用程序启动时自动加载的，这意味着（不可能，真的）预先存在的对象并不多。该 NIB 通常还包含一个应用程序委托的实例，它是一种协调控制器。但是，通常其他类型的 NIB 不会包含协调控制器。（它们确实包含中介控制器，例如`NSArrayController`，但这是不同的。）相反，协调控制器通常是在代码中创建的，并且通常它们负责加载 NIB。

例如，您将使用 an`NSWindowController`作为窗口的协调控制器。窗口将在 NIB 中定义。窗口控制器将在代码中实例化——无论哪个代码决定应该创建一个窗口——并且它将加载 NIB。它也将是 NIB 的文件所有者。它将管理NIB 的窗口和顶级对象。

如果您将 File's Owner 设置为`nil`，那么 a) 您此时可能正在处理非常简单的 NIB，并且 b) 您可能正在从您加载的 NIB 中泄漏顶级对象。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-03T19:25:57.767

文件的所有者是包含该视图的所有 IBOutlets 和 IBActions 的文件。例如，如果您有一个类“ViewController”并且它包含一个`IBOutlet UIButton *button`and `-(IBAction)changeViewWhenButtonPressed: (id) sender`，那么连接插座和操作的唯一方法是将“ViewController”设置为视图的文件所有者。

我相对确定 Class Identity 是 File's Owner 的同义词。

**此外，这些链接可能会有所帮助：**

[iPhone SDK - xCode 中的文件所有者和第一响应者是什么？](https://stackoverflow.com/questions/3768602/what-actually-is-file-owner-and-first-responder-in-iphone-sdk-xcode)

[文件所有者定义](http://forum.soft32.com/mac/File-owner-clarification-Cocoa-issues-ftopict45411.html)

[什么是文件的所有者](http://crazyviraj.blogspot.com/2009/05/cocoa-what-is-files-owner-in-nib.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-03T20:10:07.207

“文件的所有者”是 nib 中的对象可以引用 nib 之外的对象的方式，反之亦然。（还有一些更复杂的方法可以做到这一点，但它们并不经常使用。）如果您不需要这样做，则不需要使用文件的所有者。

对于主应用程序，文件的所有者是 Application 对象。如果您的所有应用程序逻辑都在自定义类中，并且在 nib 中实例化，并且如果您使用“第一响应者”发送到应用程序的操作消息，则您可能不需要与其建立连接。还行吧。

如果您有一个文档窗口或弹出框或其他东西，文件的所有者通常是正在查看的对象，因此能够将 ui 附加到它是很有用的。您可能会多次加载同一个 nib，每个 nib 都由该类的不同实例“拥有”——不同的文档或检查对象或其他东西。

（从根本上说，文件的所有者就是在 nib-loading 方法中传递给“所有者：”参数的任何对象。）

# sencha-touch - Sencha Touch 2 活动：绘画 vs 表演？

> ID：10873143
> 
> 赞同：2
> 
> 时间：2012-06-03T19:12:41.213
> 
> 标签：sencha-touch, sencha-touch-2

我有一个关于`show`事件的问题。在我的应用程序中，我正在处理`painted`我的面板事件，如下所示：

```
Ext.define('mvcTest.controller.Test', {
    extend: 'Ext.app.Controller',
    config: {
    refs: {
            panel: '#testpanel'
    },
    control:{
                panel: {
                    painted: 'onPainted'        
                }
        }
    },
    onPainted: function(){
        alert('painted');
    }
}); 
```

文档说，还有一个“显示”事件，但它根本没有被触发：

```
Ext.define('mvcTest.controller.Test', {
    extend: 'Ext.app.Controller',
    config: {
    refs: {
            panel: '#testpanel'
    },
    control:{
                panel: {
                    show: 'onShow'        
                }
        }
    },
    onShow: function(comp, obj){
        alert('show');
    }
}); 
```

为什么这不起作用？我知道，警报是错误的方式，但这不是问题。谢谢，迈克

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T09:32:23.467

看来您的控制器没有错误。关键原因可能在于您的应用程序的另一部分，但是……好吧，根据我的经验：

*   `painted`事件直截了当。每次您的视图真正呈现在屏幕上时，都会`painted`启动。（注意：`painted`在视图的子组件完全呈现之前触发事件。换句话说，`painted`首先是 DOM 生成，其次。）

*   `show`事件不一定会触发，尤其是对于视图的初始化时间。`show`当您首先以某种方式**隐藏**视图并稍后**显示时，事件会触发。**

只是经验，可能会有所不同。但希望它可能对你有所帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-03T19:30:10.790

您**无法在控制器中处理“绘制”事件**，因为它没有冒泡。

*来自 sencha docs：*此事件不可用于事件委托。相反，“painted”仅在您明确添加至少一个侦听器时才会触发，因为性能原因。您可以通过在面板中定义一个侦听器来处理它。

```
Ext.define('MyApp.view.MyPanel', {
  extend: 'Ext.Panel',
  config: {
  },
  listeners: {
    painted: function (element, options) {
      console.log("I've painted");
    }
  }
}); 
```

但是“show”事件可以在控制器中处理。检查您的应用程序的另一部分是否看到该控制器。（您是否提供了对您的控制器的参考？您的面板的 id 是否正确？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-07T10:39:29.033

我知道这是一个旧线程，但有人可能会发现它很有用：Sencha 最初不会触发事件“显示”和“绘制”。您需要首先触发它。

使用此代码段来监听来自控制器的事件：

```
Ext.define('MyApp.view.MyPanel', {
  extend: 'Ext.Panel',
  config: {
  },
  listeners: {
    painted: function (element, options) {
      this.fireEvent('painted', [element, options])
    }
  }
}); 
```

# php - "foo" 和 "bar" 常用于 php.net 和其他网站

> ID：10873144
> 
> 赞同：-1
> 
> 时间：2012-06-03T19:12:49.967
> 
> 标签：php

> **可能重复：**
> [“foo”的真正含义是什么？](https://stackoverflow.com/questions/53609/what-does-foo-really-mean)

[在php.net](http://php.net/)之类的语句`$foo="bar"`或其他此类语句中遇到这种情况很常见。是否有任何意义，`foo`或者`bar`它们只是随着时间的推移而演变的约定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T19:14:30.667

没有人完全确定这两个术语的起源，但有一些[理论](http://en.wikipedia.org/wiki/Foobar#History_and_etymology)。

这很像`Hello, world!`。它只是流行起来。

# c - 仅从程序计数器获取代码行信息？

> ID：10873147
> 
> 赞同：3
> 
> 时间：2012-06-03T19:13:06.800
> 
> 标签：c, debugging, cpu-registers, postmortem-debugging

首先，我不能使用调试器[1]。但是我可以访问程序的程序计数器，也可以用我需要的所有标志编译二进制文件（用 C 编写）。我什至可以更改代码（尽管我不想这样做）。给定一台 PC，我希望能够知道它对应的是哪条线路。

我确信必须有一种自动化的、实用的、快速的方法来做到这一点。但我没有成功。

编辑：忘了提：Lin​​ux系统，二进制文件是PPC，主机是i386。我确实可以使用 PPC 硬件。

[1] 正在模拟应用程序，并且它是交叉编译的，我在主机模拟器中有一个 gdb。但我无法在模拟的来宾应用程序上连接 gdbserver。而且真正的硬件不是一个选择，我正在尝试基于模拟器构建一个模拟器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T20:42:01.210

如果二进制文件是使用调试信息编译的，那么您可以使用 PC 通过探索包含调试信息的 ELF 部分来找到源代码中的正确位置。不过，自动化、快速和实用并不是这个过程中想到的术语！

# java - Java：转换问题

> ID：10873148
> 
> 赞同：-5
> 
> 时间：2012-06-03T19:13:15.397
> 
> 标签：java, string

> **可能重复：**
> [如何从文件内容创建 Java 字符串](https://stackoverflow.com/questions/326390/how-to-create-a-java-string-from-the-contents-of-a-file)

我正在制作一个 java 程序来读取文件并创建有趣的文件。我想知道如何从文件中读取并将其设置为字符串变量。或者将扫描仪变量转换为字符串变量，这里以编码的一部分为例：

```
 private Scanner x;
    private JLabel label;
    private String str;

    public void openfile(String st){

        try{
            x = new Scanner(new File(st));
        }
        catch(Exception e){
            System.out.println("Error: File Not Found");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:17:42.900

这是一个强大的oneliner。

```
String contents = new Scanner(file).useDelimiter("\\Z").next(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:20:42.217

这样做的好方法是使用 Apache commons IOUtils 将 inputStream 复制到 StringWriter 中......类似于

```
StringWriter writer = new StringWriter();
IOUtils.copy(inputStream, writer, encoding);
String theString = writer.toString(); 
```

或者，如果您不想混合使用 Streams 和 Writers，则可以使用 ByteArrayOutputStream

[http://commons.apache.org/io/api-1.4/org/apache/commons/io/IOUtils.html#toString%28java.io.InputStream,%20java.lang.String%29](http://commons.apache.org/io/api-1.4/org/apache/commons/io/IOUtils.html#toString%28java.io.InputStream,%20java.lang.String%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T19:20:26.420

或者你甚至可以试试这个：

```
 ArrayList <String> theWord = new ArrayList <String>();
            //while it has next ..
            while(x.hasNext()){
                //Initialise str with word read
                String str=x.next();
                //add to ArrayList
                theWord.add(str);

            }
            //print the ArrayList
            System.out.println(theWord);

        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T19:20:59.237

这是一个如何将文件读入字符串的示例：

```
public String readDocument(File document)
        throws SystemException {
    InputStream is = null;
    try {
        is = new FileInputStream(document);
        long length = document.length();
        byte[] bytes = new byte[(int) length];
        int offset = 0;
        int numRead = 0;
        while (offset < bytes.length && (numRead = is.read(bytes, offset, bytes.length - offset)) >= 0) {
            offset += numRead;
        }
        if (offset < bytes.length) {
            throw new SystemException("Could not completely read file: " + document.getName());
        }
        return new String(bytes);
    } catch (FileNotFoundException e) {
        LOGGER.error("File not found exception occurred", e);
        throw new SystemException("File not found exception occurred.", e);
    } catch (IOException e) {
        LOGGER.error("IO exception occurred while reading file.", e);
        throw new SystemException("IO exception occurred while reading file.", e);
    } finally {
        if (is != null) {
            try {
                is.close();
            } catch (IOException e) {
                LOGGER.error("IO exception occurred while closing stream.", e);
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T19:25:20.333

```
BufferedReader in =new BufferedReader(new FileReader(filename));
    String strLine;
    while((strLine=in.readLine())!=null){
    //do whatever you want with that string here
    } 
```

# regex - Emacs 组织模式链接格式

> ID：10873149
> 
> 赞同：3
> 
> 时间：2012-06-03T19:13:26.140
> 
> 标签：regex, emacs, org-mode

我在 emacs 中使用 org-mode 来创建结构化文档，但我真正感兴趣并希望用于其他领域的功能之一是链接的格式化方式。比如说我想创建一个到另一个位置的链接以谷歌为例我可以简单地写

`[[http://www.google.com][To Google]]`一旦我完成第二个方括号，它就会变成这样`To Google`，但底层结构仍然完好无损，如果我删除第二个方括号，它只会再次扩展。

我已经下载了源代码，但我似乎无法找到它的实现位置。如果有人知道它是如何实现的，我将非常感谢您的解释。我想它可以用正则表达式复制，但我相当无能。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T05:15:19.303

你可以从这里挖掘：`C-h f org-activate-bracket-links RET`.

`C-h f org-toggle-link-display RET`也是`C-h f org-link-display-format RET`很好的起点。

# c++ - 如果一个程序是由 system() 或 CreateProcess() 从另一个程序启动的，如何防止 Ctrl+Break/Ctrl+C 关闭两个程序？

> ID：10873155
> 
> 赞同：5
> 
> 时间：2012-06-03T19:14:11.387
> 
> 标签：c++, windows, console

这是测试示例：

(1)。做无限循环的简单程序：

```
#include <iostream>
using namespace std;

int main() {
  int counter = 0;
  while (1) cout << ++counter << ": endless loop..." <<endl;
} 
```

(2)。`system()`另一个通过命令启动上述示例的程序：

```
#include <iostream>
#include <windows.h>

using namespace std;

int main() {
  system("endless_loop.exe");
  cout << "back to main program" << endl;
} 
```

在`Ctrl+Break`此程序上执行时，文本`back to main program`不显示。如何将此组合键限制在进程内部并将执行指针返回到主应用程序？

另一件事是我并不总是能够控制内部程序的源代码，所以我不能在那里改变东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T06:40:42.907

添加这个::

```
#include <signal.h>

 ...

signal (SIGINT, SIG_IGN); 
```

调用后`signal()`，程序忽略 Ctrl-Break。`fork()`在 Linux 上，忽略信号通过/传播到子进程`exec()`。

`exec()`由于 O/S + 运行时库的工作方式，我希望 Windows 重置默认信号处理。因此，如果您希望孩子忽略*Break*，请将上面的代码也添加到其中。

# python - Python 交互式 CLI 应用程序？

> ID：10873157
> 
> 赞同：15
> 
> 时间：2012-06-03T19:14:29.883
> 
> 标签：python, command-line-interface

我什至不确定这些会叫什么？我曾经在 VAX-VMS 上运行的 ADA 中编写它们！

我想制作一个简单的菜单驱动应用程序，它可以让我显示菜单并使用光标键在它们周围导航、选择项目并在应用程序中导航。所有完全基于旧学校文本。

我希望能够接管整个终端窗口并在不同的地方显示内容。

这在 Python 中可能吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-03T19:17:07.670

查看 Python HOWTO 关于[Curses Programming with Python](http://docs.python.org/howto/curses.html)的内容，这里是[库参考](http://docs.python.org/library/curses.html)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-23T18:13:45.150

另一个易于使用的库是`Urwid`- 控制台用户界面库。

[http://excess.org/urwid/](http://excess.org/urwid/)

[http://excess.org/urwid/examples.html](http://excess.org/urwid/examples.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T19:15:49.470

是的，看看不同的`curses`实现。

# c++ - C++ wstringstream << NULL

> ID：10873168
> 
> 赞同：0
> 
> 时间：2012-06-03T19:15:36.430
> 
> 标签：c++, stream, null, wchar-t, wstring

我遇到了 wstringstream 的问题。当我这样做时

```
 std::wstringstream ss;
    wchar_t* str = NULL;
    ss << str; 
```

应用程序因错误而崩溃

```
Unhandled exception at 0x53e347af (msvcr100d.dll) in stringstr.exe: 0xC0000005: Access violation reading location 0x00000000. 
```

例如，这很好用：

```
ss << NULL;
wchar_t* str = L"smth";
ss << &str; 
```

str 并不总是有价值，有时它可能是 NULL，当它为 NULL 时，我想将 0 放入流中。如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T19:17:38.410

如果为空，则不输出空`wchar_t`指针：

```
( str ? ss << str : ss << 0 ); 
```

请注意，这不起作用：

```
ss << ( str ? str : 0 ) 
```

由于隐式条件运算符返回类型是其两个表达式的通用类型，因此它仍将返回空`wchar_t`指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T19:21:06.257

在输出到字符串流之前检查（如已经建议的那样）

```
if (str == NULL) {
    ss << 0;
} else {
    ss << str;
} 
```

# c++ - 编译器可以识别模板元编程中的递归问题吗？

> ID：10873179
> 
> 赞同：3
> 
> 时间：2012-06-03T19:17:13.053
> 
> 标签：c++, templates, computation-theory, tmp

在模板元编程中，如果递归被错误地实现并导致无限循环，语言编译器可以检测到它吗？还是编译器会遇到最终的堆栈溢出和崩溃？我敢打赌，编译器无法检测到这一点，因为这样做会违反停止问题的不可判定性。

我的结论正确吗？当然我可以用一段代码来试试这个，但我想在这种情况下听到更多合格的想法。

编辑：谢谢大家，我大致知道我对 tmp 计算理论方面的推断没有错。我也明白编译器实现可以有任意的递归深度限制（当然我重申我可以测试第二部分，但这只是我的观点）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T19:22:40.280

您通常无法检测到这种无限递归；模板元编程具有图灵能力，并且这种检测将相当于解决停机问题。与图灵难题一样，这并不意味着您无法检测到某些情况。

我认为编译器倾向于具有标准建立的模板可以嵌套的最小级别数，以及他们将诊断嵌套太深的最大数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T19:26:13.180

该标准规定，实施可以（并且有效地将）限制一些数量，其中包括：

> 附件 B
> 
> *   递归嵌套模板实例化，包括模板参数推导期间的替换 (14.8.2)

一旦达到此数量的预定义限制，编译器很可能会退出，并带有适当的错误消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T19:22:11.280

模板元编程是图灵完备的，所以是的，任何能够在所有情况下检测到无限循环（不会错误地将终止循环分类为无限）的编译器都能够解决停止问题。

但就像常规代码一样，可以检测到*一些无限循环。*不过，我认为任何编译器都不会检查，而是会在超过某个最大递归深度时抱怨。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T19:33:50.957

### 是的，通常可以检测到

尽管停机问题在一般情况下是不可判定的，但对于许多（如果不是最具体的情况）来说，它肯定是可判定的。

还有一个简单明了的方法：*限制允许的递归量*。

因此，一般来说，答案是第一个：*它检测到无限循环*。

（如果您可以接受在某些情况下出错，则很容易检测到不会停止的程序。毕竟，*任何*编译器都不允许无限递归。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T19:33:58.123

你是正确的。在不限制模板元编程的递归堆栈帧的情况下检测无限递归将意味着找到停止问题的替代解决方案。

有一些特殊情况在理论上是可以检测到的。例如，如果您可以确保递归的引用透明性，并且如果最后一个函数调用接收到与实际参数相同的参数，那么您将处于无限递归调用中。C++ 对模板元编程不提供参考透明度保证。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-03T19:47:34.037

当然，由于引用透明性，检测无限循环是可能的。这是微不足道的，但我没有测试哪个编译器可以做到这一点。

另一方面，如果递归生成无限的不同模板实例化（不在实例化级别上循环），则不太可能或不可能检测到。这是由于 Turung 的完整性。

对于每个模板实例化，编译器将生成一个有限树图，其中每个节点都是一个模板实例化。一旦编译器检测到后边/由于循环而导致图不是树，它应该中止。无限图/树（停止问题）可能会被检测到超时/有限的图大小。

# qt - QT 的可扩展输入列表

> ID：10873198
> 
> 赞同：0
> 
> 时间：2012-06-03T19:19:06.233
> 
> 标签：qt, list, user-interface, show-hide

我正在尝试制作一个 GUI，因此当您增加“文章”计数时，会显示更多文章输入。例如，如果我将文章计数更改为 2，我希望为文章 2 显示另一组输入，如果文章计数更改为 3，则将有三组输入，但因为这样会消耗更多空间比窗口有，它会开始滚动。

我正在考虑使用树、列表或表格小部件之一，但我不确定这是否是我应该去的正确方向。谁能把我推向正确的方向？

这是一张图片，因为我的描述不好。

![图片在这里](../Images/64059a76aaf4fcaa03f60dfee1c69f1a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T21:05:04.993

您应该将一篇文章所需的所有小部件放入一个自定义小部件中。每当更改旋转框（插槽中的代码）时，您都可以将此类自定义小部件的一个实例添加/删除到滚动区域。

在这个自定义小部件类的构造函数中（我们称之为`ArticleWidget`），您应该在自定义小部件中定义信号，通知其子小部件中所做的更改。在您的自定义小部件中连接这些：

```
ArticleWidget::ArticleWidget(QWidget *parent) :
        QWidget(parent)
{
    ui->setupUi(this); // when you use QtDesigner to design the widget

    // propagate signals from my inner widgets to myself:
    connect(ui->title, SIGNAL(textChanged(QString)),
            SIGNAL(titleChanged(QString)));
} 
```

在外部小部件中，每当创建此类自定义小部件时，请将其信号连接到您的处理槽：

```
void OuterWidget::articleCountChanged(int)
{
    ...
    if(/*increased*/)
    {
        ArticleWidget *article = new ArticleWidget(this);
        connect(article, SIGNAL(titleChanged(QString)),
                SLOT(art_titleChanged(QString)));
        ui->scrollAreaViewport->layout()->addWidget(article);
    }
    ...
} 
```

您可以使用以下方式访问文章小部件`sender()`：

```
void OuterWidget::art_titleChanged(QString)
{
    ArticleWidget *articleWidget = qobject_cast<ArticleWidget*>(sender());
    Q_ASSERT(articleWidget); // make sure the signal comes from an ArticleWidget

    // if you want to store articles in a vector of custom types,
    // you could give this type a pointer to the widget, so you can
    // find the index if you have the widget pointer:
    foreach(Article *article, articles)
        if(article->widget == articleWidget)
            article->title = title; // make some changes
} 
```

此代码假定您将所有文章保存在类似于以下的结构中：

```
struct ArticleData
{
    ArticleWidget *widget;
    QString title;
    ...
}; 
```

并在您的外部小部件类中包含它们的向量：

```
QVector<ArticleData*> articles; 
```

# node.js - 如何处理 Mongoose DB 连接中断

> ID：10873199
> 
> 赞同：14
> 
> 时间：2012-06-03T19:19:39.510
> 
> 标签：node.js, mongodb, mongoose

我一直在评估 Mongoose（node.js 的 ORM，它使用 MongoDB 进行持久存储）。

我想做的是确保应用程序启动时数据库未启动时应用程序可以运行，并且还可以智能地处理数据库下降。

目前我的测试应用程序在这两种情况下都不起作用：

```
var mongoose_connection = mongoose.createConnection(DATABASE_URL, {server:{poolSize:4}}); 
```

然后我在制作模型时使用该连接。

如果数据库在应用程序启动时关闭，则实例上的任何 save() 调用都会静默失败，不会出现错误。如果数据库恢复，他们永远不会被写入。

所以我需要检测到连接从未发生过，并让应用程序能够在运行时告诉它，以便我能以某种方式处理它。

当应用程序启动后数据库出现故障时，虽然 save() 调用仍然不会导致错误，但它们会排队并在数据库返回时写入。

这似乎很好，除了我想挂接到 API 以在数据库关闭时获取事件并查询排队的保存数量。在某些时候，我可能有太多排队的事件，以至于我只想停止制作新的事件并让应用程序退出。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-05T22:45:05.227

案例 #1：db 在应用程序启动时关闭。有一个小错误阻止了我现在正在修复的这个用例。但是，这是解决方法：

```
var db = mongoose.createConnection();
db.on('error', function (err) {
  if (err) // couldn't connect

  // hack the driver to allow re-opening after initial network error
  db.db.close();

  // retry if desired
  connect();
});

function connect () {
  db.open('localhost', 'dbname');
}

connect(); 
```

[https://gist.github.com/2878607](https://gist.github.com/2878607)

一个丑陋但有效的要点。首先关闭 mongo，然后运行这个 gist。

注意连接失败。

然后启动 mongo 并查看所有排队的插入完成并转储到控制台。将开始写入和查找。

关闭 mongo，注意插入和查找正在尝试，但没有执行回调。

重启蒙哥。请注意，所有排队的插入和查找都已完成。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-24T21:38:19.297

如果您宁愿在数据库关闭时对服务器的所有请求都失败，则本机驱动程序确实会发出重新连接事件，该事件可以在中间件中感知。

这可以正常工作并发出重新连接事件（mongodb native driver 1.3.23）

```
mongoose.connection.db.on('reconnect', function (ref) {
    connected=true;
    console.log('reconnect to mongo server.');
}); 
```

所以我的 dbconnection 中间件寻找已连接/错误/重新连接（有些事件是多余的，但不会造成伤害！） PS。最初的连接失败仍需要通过重试来处理，如上面 aaronheckmann 的回答。

```
mongoose.connection.on('open', function (ref) {
    connected=true;
    console.log('open connection to mongo server.');
});

mongoose.connection.on('connected', function (ref) {
    connected=true;
    console.log('connected to mongo server.');
});

mongoose.connection.on('disconnected', function (ref) {
    connected=false;
    console.log('disconnected from mongo server.');
});

mongoose.connection.on('close', function (ref) {
    connected=false;
    console.log('close connection to mongo server');
});

mongoose.connection.on('error', function (err) {
    connected=false;
    console.log('error connection to mongo server!');
    console.log(err);
});

mongoose.connection.db.on('reconnect', function (ref) {
    connected=true;
    console.log('reconnect to mongo server.');
}); 
```

# r - R - 在数据框的子集中查找所有唯一值

> ID：10873203
> 
> 赞同：2
> 
> 时间：2012-06-03T19:20:16.093
> 
> 标签：r, duplicates, unique

我有一个包含两列的数据框。第一列定义数据的子集。我想在第二列中找到仅出现在第一列的一个子集中的所有值。

例如，来自：

```
df=data.frame(
  data_subsets=rep(LETTERS[1:2],each=5),
  data_values=c(1,2,3,4,5,2,3,4,6,7))

data_subsets data_values
      A           1
      A           2
      A           3
      A           4
      A           5
      B           2
      B           3
      B           4
      B           6
      B           7 
```

我想提取以下数据框。

```
data_subsets   data_values
    A              1
    A              5
    B              6
    B              7 
```

我一直在玩，`duplicated`但我似乎无法让它发挥作用。任何帮助表示赞赏。有许多主题解决了类似的问题，我希望我在搜索中没有忽略答案！

*编辑*

我修改了@Matthew Lundberg 计算元素数量并从数据框中提取的方法。由于某种原因，他的方法不适用于我拥有的数据框，所以我想出了这个，它不太优雅但可以完成工作：

```
counts=rowSums(do.call("rbind",tapply(df$data_subsets,df$data_values,FUN=table)))
extract=names(counts)[counts==1]
df[match(extract,df$data_values),] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T19:33:10.970

首先，找到 df$data_values 中每个元素的计数：

```
 x <- sapply(df$data_values, function(x) sum(as.numeric(df$data_values == x)))

> x
 [1] 1 2 2 2 1 2 2 2 1 1 
```

现在提取行：

```
> df[x==1,]
   data_subsets data_values
1             A           1
5             A           5
9             B           6
10            B           7 
```

请注意，您错过了上面的“A 5”。没有“B 5”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T20:04:36.547

你有正确的想法`duplicated`。诀窍是结合`fromLast = TRUE`和`fromLast = FALSE`选项以获得非重复行的完整列表。

```
!duplicated(df$data_values,fromLast = FALSE)&!duplicated(df$data_values,fromLast = TRUE)
 [1]  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE  TRUE 
```

用这个向量索引你的 data.frame 给出：

```
df[!duplicated(df$data_values,fromLast = FALSE)&!duplicated(df$data_values,fromLast = TRUE),]
   data_subsets data_values
1             A           1
5             A           5
9             B           6
10            B           7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T23:07:55.607

P Lapointe 答案的一个变体是

```
df[! df$data_values %in% df[duplicated( unique(df)$data_values ), ]$data_values,] 
```

`unique()`处理数据中的某些行可能相同的可能性（不在您的测试数据中），如果相同的行没有出现在不同的（或不同的其他列）中，您希望将它们保留`data_values`一次`data_sets`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-25T04:55:24.337

您可以使用“dplyr”和“explore”库来克服这个问题。

```
library(dplyr)
library(explore)

df=data.frame(
  data_subsets=rep(LETTERS[1:2],each=5),
  data_values=c(1,2,3,4,5,2,3,4,6,7))

df  %>% describe(data_subsets)

######## output ########
#variable = data_subsets
#type     = character
#na       = 0 of 10 (0%)
#unique   = 2
# A       = 5 (50%)
# B       = 5 (50%) 
```

# c++ - OpenCV 2.4：对 cvRand 的未定义引用

> ID：10873206
> 
> 赞同：1
> 
> 时间：2012-06-03T19:20:26.163
> 
> 标签：c++, ubuntu, opencv, kalman-filter

我找不到我必须包含在我的代码中以使编译器识别 cvRand （以及所有其他相关函数，例如 cvRandInit ... ）的文件。这很奇怪，因为过去这段代码一直按原样工作。一定是 OpenCV2.4 的问题。

此外，当我右键单击 cvRand（我使用 Qt Creator）并要求跟随光标下的符号时，IDE 会打开一个名为 compat.hpp 的文件。我有几个名为 compat.hpp 的文件，所以我不知道我必须包括哪一个。我的操作系统是 Ubuntu 11.04。

到目前为止，我包括了 core.hpp、highgui.hpp 和 cv.h。

我对此进行了谷歌搜索，但找不到任何相关问题......所以我想这不是问题，我只是想念一些愚蠢的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T19:56:29.687

包含显然是正确的，我认为它必须是一个 lib 问题，通过猜测我发现我必须添加 libopencv_legacy.so。现在一切正常，谢谢stackoverflow。

# ruby-on-rails - 尝试在个人资料页面上显示用户信息时出现 NoMethodError

> ID：10873210
> 
> 赞同：0
> 
> 时间：2012-06-03T19:20:57.940
> 
> 标签：ruby-on-rails, devise, profile, nomethoderror

我正在尝试使用带有设计的注册/登录系统制作一个简单的个人资料页面。我可以注册、登录和重定向到个人资料页面没有问题，但是，当我尝试将与用户相关的变量插入到他们的个人资料页面时，我一直遇到 NoMethodError。我不想使用 current_user 来显示信息，因为每个个人资料页面都必须显示该特定用户信息。我到处寻找解决方案，但我不知道为什么这不起作用。这是所有代码：

index.html.erb

```
<p class="notice"><%= notice %></p>
<p class="alert"><%= alert %></p>
<div id="user_nav">
  <% if user_signed_in? %>
    Signed in as <%= current_user.email %>. Not you?
    <%= link_to "Sign out", destroy_user_session_path, :method => :delete %>
  <% else %>
    <%= link_to "Sign up", new_user_registration_path %> or <%= link_to "sign in", new_user_session_path %>
  <% end %>
</div> 
```

显示.html.erb

```
<%= @user.firstname %>
You are signed in 
```

用户控制器

```
class UsersController < ApplicationController
  def show
    @user = User.find_by_username(params[:id])
  end
end 
```

用户.rb

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :username, :firstname, :lastname
end 
```

路由.rb

```
Test1::Application.routes.draw do
  devise_for :users
  resources :user
  authenticated :user do
  root :to => 'users#show'
  end
  root :to => 'home#index'
end 
```

错误信息

```
NoMethodError in Users#show

Showing /Documents/Aptana Studio 3 Workspace/test1/app/views/users/show.html.erb where line #1 raised:

undefined method `firstname' for nil:NilClass
Extracted source (around line #1):

1: <%= @user.firstname %>
2: You are signed in
Rails.root: /Documents/Aptana Studio 3 Workspace/test1

Application Trace | Framework Trace | Full Trace
app/views/users/show.html.erb:1:in `_app_views_users_show_html_erb___52288684_2184635920' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:40:15.370

我很确定它应该是：

```
@user = User.find(params[:id]) 
```

# javascript - Knockout.js：函数参数未定义

> ID：10873214
> 
> 赞同：2
> 
> 时间：2012-06-03T19:21:06.837
> 
> 标签：javascript, parameters, knockout.js, undefined, revealing-module-pattern

我有一个非常简单的例子，它不起作用。

jsfiddle：http: [//jsfiddle.net/ThomasDeutsch/8hzhp/3/](http://jsfiddle.net/ThomasDeutsch/8hzhp/3/)

```
// My Model
function Customer(id, name, lastname) {
    this.Id = ko.observable(id);
    this.Name = ko.observable(name);
    this.LastName = ko.observable(lastname);
}

// My ViewModel
ViewModel = (function () {
    var getName = ko.computed(function (x) {
        return x.Name();
    });

    return {
        getName: getName(new Customer(1, "Thomas", "D"))
    };
})();

ko.applyBindings(ViewModel);​ 
```

**问题：**参数（x）未定义

**目标：**返回被调用对象的名称属性 - 我想使用 x 作为属性，以便我可以使用任何具有可观察名称属性的对象调用此函数

*代码说明：这是使用带有 knockout.js 的显示模块模式完成的。Name-property 是一个 ko.observable() - 所以需要 ()。*

**问题**：为什么 x 未定义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T19:38:16.463

让我问问你。你认为 x 是在哪里定义的？

您正在调用 getName 并传递一个客户，但 getName 不需要参数。

如果你像这样重写你的函数，它将起作用：

```
var getName = function(x) { return ko.computed( function() {
    return x.Name();
})}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:41:45.670

您正在尝试更改可观察的“getName”的值，但由于它是计算出来的，因此在您指定应如何处理之前，这是未定义的行为。

我认为最好的解决方案是引入另一个存储客户的 observable。

```
var ViewModel = (function() {
    // Observable for the customer
    var customer = ko.observable(new Customer(1, "Thomas", "D"));

    // The computed observable, using the other one
    var getName = ko.computed(function() {
        return customer().Name();
    });

    // If you only need to access the name, its sufficient
    // to export only that observable. However, this is still
    // read-only.
    return {
        getName: getName
    };
})(); 
```

如果你想让它可写，你可以为计算的 observable 定义一个 setter：

```
var getName = ko.computed({
    read: function() {
        return customer().Name();
    },
    write: function(n) {
        customer().Name(n);
    }
}); 
```

（这不是一个最有意义的例子，但那是因为你在这里并不需要计算的 observable）

# android - Android 4.0蓝牙配对：每次都需要输入密码

> ID：10873215
> 
> 赞同：2
> 
> 时间：2012-06-03T19:21:08.317
> 
> 标签：android, bluetooth, passwords, connection, android-4.0-ice-cream-sandwich

我在使用 Android 4 (ICS) 时遇到问题 我的蓝牙应用程序连接到串行设备就像在 Android 3 上的魅力一样。

但是，在使用 Android 4 时，每次我连接到（已经配对的）设备时，它都会显示“配对”对话框。

用户必须一遍又一遍地重新输入相同的密码。有什么方法可以抑制 Android 4 中的这种行为吗？它是一个新的错误吗？有解决办法吗？BluetoothDevice 是否需要对 Android 4 进行某种适应？我究竟做错了什么？

```
 /**
 * Start the ConnectThread to initiate a connection to a remote bluetoothDevice.
 */
public synchronized InitResponse init() {
    if (D) Log.d(TAG, "init to: " + bluetoothDevice);

    setState(State.CONNECTING);

    try {
        if (D) Log.i(TAG, "Trying to create RfcommSocket using reflection");
        Method m = bluetoothDevice.getClass().getMethod("createRfcommSocket",
                new Class[] { int.class });
        bluetoothSocket = (BluetoothSocket)m.invoke(bluetoothDevice, 1);
    } catch (Exception e) {
        if (D) Log.w(TAG, "Reflection failed.", e);
        if (D) Log.i(TAG, "Trying to create RfcommSocket using UUID");
        try {
            bluetoothSocket = bluetoothDevice.createRfcommSocketToServiceRecord(READER_UUID);
        } catch (IOException e2) {
            Log.e(TAG, "create() failed", e2);
            disconnect();
            return InitResponse.READER_NOT_FOUND;
        }
    }

    if (D) Log.i(TAG, "Bluetooth Socket: " + bluetoothSocket);
    if (D) Log.i(TAG, "Trying to connect.");

    try {
        bluetoothAdapter.cancelDiscovery();
        if (D) Log.i(TAG, "Cancelled discovery.");
        if (D) Log.i(TAG, "Attempting to connect.");
        bluetoothSocket.connect();                   // Causes pairing dialog everytime I call it.
    } catch (IOException e) {
        if (D) Log.w(TAG, "Error while connecting.");
        // Close the socket
        try {
            bluetoothSocket.close();
        } catch (IOException e2) {
            Log.e(TAG, "unable to close() socket during connection failure", e2);
        } finally {
            disconnected();
        }
        return InitResponse.CONNECTION_ERROR;
    }

    if(D) Log.d(TAG, "Connected to bluetoothReader " + bluetoothDevice + " established.");

    try {
        inputStream = bluetoothSocket.getInputStream();
        if(D) Log.d(TAG, "Input Stream: " + inputStream);
        outputStream = bluetoothSocket.getOutputStream();
        if(D) Log.d(TAG, "Output Stream: " + outputStream);
    } catch (IOException e) {
        Log.e(TAG, "Temp sockets not created", e);
        disconnected();
        return InitResponse.CONNECTION_ERROR;
    }

    if (D) Log.i(TAG, "Setting state to CONNECTED");

    setState(State.CONNECTED);
    if (D) Log.i(TAG, "Init successfull.");
    return InitResponse.SUCCESS;
} 
```

提前致谢

顺便说一句：如何确保在连接之前停止从平板电脑到此蓝牙设备的所有其他连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:41:08.193

有类似问题：[无法在 Android ICS 上进行蓝牙连接](https://stackoverflow.com/questions/11082819/bluetooth-connection-on-android-ics-not-possible/11135399#11135399)

尝试获取不安全的套接字：

```
bluetoothSocket = bluetoothDevice.createInsecureRfcommSocketToServiceRecord(READER_UUID); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T17:56:37.627

我不认为这是您的软件的问题。在我拿到带有 ICS 的手机后，我发现 RunKeeper 和 Polar BT 心率监测器也出现了同样的问题。我在 HTC Desire 上使用股票 ROM 或 CM7 时没有遇到过这个问题。

# ios - 多次使用 UIView（使用 xib 创建）作为同一视图的子视图

> ID：10873228
> 
> 赞同：0
> 
> 时间：2012-06-03T19:22:37.520
> 
> 标签：ios, uiview, xib

我的要求是我想创建一个视图，该视图必须多次（每月 12 次）添加到滚动视图中，并使用 pagecontrol 加载不同的数据。

具体要求是使用滚动视图/页面控件，上一页/下一页可见。

我已经通过手动创建视图成功地做到了这一点，但是当我减少添加视图的 alpha 时，添加到它的所有 ui 组件的 alpha 都会减少。

因此我需要使用 xib 创建视图。但是使用 xib 实例化的视图只会被添加到滚动视图中一次。剩下的页面只是空白。

任何关于如何在此处进行的想法都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T20:38:23.190

回到手动创建视图，但不是向其中添加 ui 控件，而是创建另一个父视图并将您创建的视图和另一个 ui 视图作为子视图添加到此父视图，

现在，当您降低视图上的 alpha 时，其他 ui 控件将不会受到影响，因为它们不会是该视图的子项。

因此，您的新视图安排将是：

```
Parent View -> your created view (the one that you want to change its alpha)
            -> other ui controls 
```

所以你的视图不会是其他 ui 控件的父级

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:39:37.800

您将必须创建相同 UIView 类的不同实例并在 UIScrollView 上添加为子视图。对于 alpha，为父视图设置的 alpha 将覆盖其所有子视图。

# c# - 是否存在类似于 Java 泛型类转换的 C# 泛型类转换？

> ID：10873235
> 
> 赞同：2
> 
> 时间：2012-06-03T19:23:43.073
> 
> 标签：c#, generics

下面的代码是我用于 java 程序将泛型转换为特定的代码。我知道 C# 中没有通配符，但希望有人能指出正确的方向，因为我可以将代码修改为类似于 java：

```
public <T extends GameComponent<?>>T getComponent(int id, Class<T> type){
    return type.cast(components.get(id));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T19:27:20.090

看起来像：

```
public T GetComponent<T>(int id) where T : GameComponent
{
    return components[id] as T;
} 
```

感谢评论中的每个人，帮助我解决我的解决方案（因为我很遥远）。没有你们，我不可能在这里。我会想念你的。

<3

但真的，谢谢 :D

# winapi - 何时（以及如何）布局 Win32 窗口的子窗口以响应调整大小？

> ID：10873236
> 
> 赞同：3
> 
> 时间：2012-06-03T19:23:48.447
> 
> 标签：winapi, visual-c++, window-resize

调整窗口大小时，Windows 会发送几条消息：

*   WM_GETMINMAXINFO
*   WM_ENTERSIZEMOVE
*   WM_EXITSIZEMOVE
*   WM_NCCALCSIZE
*   WM_SIZING
*   WM_SIZE
*   WM_WINDOWPOSCHANGING
*   WM_WINDOWPOSCHANGED

可能还有更多。

如果我想在调整窗口大小时重新定位孩子，我应该*在哪里*以及*如何*做？
我正在寻找“最佳”方法——即问题*最少且闪烁*最少的方法。

我*目前的*方法是在内部执行所有重新定位`WM_NCCALCSIZE`，使用`DeferWindowPos`.
但是，我也尝试过在内部处理它`WM_WINDOWPOSCHANGED`......但无论我在哪里处理它，似乎*总是*至少有*一个*“时刻”当窗口被绘制在中间状态时，窗口的大小有已更改，但其内容尚未调整大小。

我还想避免的另一个影响*：*在孩子已经移动*之后再移动它。*我不希望用户看到控件因为我的更改而向下滑动然后*备份*——它应该具有尽可能少的瞬态影响。

我这样做正确吗？有没有更好的地方可以布置窗户的孩子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T20:36:03.427

您应该在 WM_SIZE 消息中重新定位窗口，因为这是窗口在完成任务之前收到的最后一个窗口...要重新定位窗口，您可以使用 MoveWindow

# c - 如何将指针传递给字符串数组（char *p[]）？

> ID：10873238
> 
> 赞同：1
> 
> 时间：2012-06-03T19:24:08.470
> 
> 标签：c, cstring

我想处理一个字符串数组，所以它是一个字符数组的数组

我已经定义了这样的字符串

```
char que1[4][LEN_STRING]={{'\0'}}; 
```

我想将它们传递给函数

```
void print_results(char *pqueries[],document p_docs[]); 
```

使用一个简单的

```
 print_results(que1,indoc); 
```

导致“预期的 'char **' 但参数的类型为 'char (*)[30]'”

我什至不确定我实际上是否定义了函数签名正确，

帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:27:17.787

数组数组与指针数组不同。请参阅 C 常见问题解答更多详细信息：[http](http://c-faq.com/aryptr/pass2dary.html) ://c-faq.com/aryptr/pass2dary.html 。

一种解决方案是修改您的函数以采用固定宽度的字符串：

```
void print_results(char (*pqueries)[LEN_STRING],document p_docs[]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T20:15:03.060

因为它是一个 chars 数组的数组，你可以将它衰减为一个指针数组（每个指针代表 char 数组的位置），因此使用这个： char **que1;

```
 for(int z = 0;z<4;z++)
        {
           *que1[z] = malloc(LEN_STRING*(sizeof(char));
           memset(que1[z], '\0', (size_t)LEN_STRING);

         } 
```

你现在可以这样称呼：

```
print_results(que1,indoc); 
```

print_results(que1,indoc) 的定义将是：

```
void print_results(char **pqueries,document p_docs[]);
{

//access *[pqueries] in a for loop for each stored character

} 
```

rgds，软软的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T20:46:50.170

正确的声明/定义将是

```
void print_results(char pqueries[][LEN_STRING],document p_docs[]);
void print_results(char pqueries[][LEN_STRING],document p_docs[])
{
  ...
  sprintf(pqueries[0],"%.*s",LEN_STRING-1,"blah0");
  ...
  sprintf(pqueries[3],"%.*s",LEN_STRING-1,"blah3");
} 
```

# android - 应用程序大小明显大于预期？

> ID：10873243
> 
> 赞同：4
> 
> 时间：2012-06-03T19:24:41.063
> 
> 标签：android, size, bin

我几乎完成了我的应用程序的编写，我担心应用程序的大小。除了**876KB res**文件夹和**1,08 MB assets**之外，项目中的其余文件只是 src 中的源代码（src 大约 80KB）。该应用程序可以从 Web 下载约 160KB 的文件。从应用程序信息（在应用程序设置中），说如下：

```
 Total ............5.89MB 
 App ..............1.79MB
 USB Storage app.. 4.09MB
 Data ............12.00KB
 SD Card.......... 0.00 B 
```

该应用程序保存在 SD 卡上。问题是，有没有办法减小这个尺寸？我已经压缩了我正在使用的图像，我觉得很奇怪，项目中文件夹的大小，应用程序需要 6 MB 的空间。

另外，当应用程序在 SD 卡中时，应用程序的大小怎么会变大？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T17:43:39.750

考虑在您[的应用程序中使用](http://tools.android.com/recent/proguardimprovements)[proguard](http://developer.android.com/tools/help/proguard.html) 。使用最新的工具，proguard 默认是开启的。 此外，在混淆之前不要考虑应用程序的大小。 ActionBarSherlock 为您的 apk 大小增加了大约 200KB，而不是 MB。

# iphone - 从块中呈现视图控制器不会动画

> ID：10873245
> 
> 赞同：-1
> 
> 时间：2012-06-03T19:24:52.563
> 
> 标签：iphone, objective-c, ios, xcode

我在用`SVPullToRefresh`

```
__weak InventorySearch *safeSelf = self;

[self.tableView addPullToRefreshWithActionHandler:^{
    [safeSelf refresh];   
 }]; 
```

方法 refresh 做了一些设置工作，然后调用`[self presentmodalviewcontroller:controller animated:YES];`

然而，视图没有动画，只是立即呈现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:31:38.833

代替

```
 [safeSelf refresh]; 
```

尝试这个

```
[safeSelf performSelectorOnMainThread:@selector(refresh) withObject:nil waitUntilDone:NO]; 
```

# python - Django filter() 查找类型文档

> ID：10873249
> 
> 赞同：9
> 
> 时间：2012-06-03T19:25:22.463
> 
> 标签：python, django, filter, lookup

我查看了 Django 的文档并在 Google 上搜索了该短语的每个变体，但我找不到任何准确描述查找类型行为的文档。

```
app.objects.filter(column__lookuptype=criteria) 
```

我找到了关于我*可以*使用哪些查找类型的文档，但没有找到它们的作用或如何使用它们。例如，我完全不知道它是做什么`__gte`的，但我也找不到关于它做什么的好的文档。

是否有我忽略的文档？

任何指向正确方向的指针将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-03T19:35:06.617

它们在 Django 中被称为“字段查找”。字段查找具有非常全面的文档：[https ://docs.djangoproject.com/en/dev/ref/models/querysets/#id4](https://docs.djangoproject.com/en/dev/ref/models/querysets/#id4)

这些都有很好的记录：

*   [`exact`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#exact)
*   [`iexact`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#iexact)
*   [`contains`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#contains)
*   [`icontains`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#icontains)
*   [`in`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#in)
*   [`gt`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#gt)
*   [`gte`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#gte)
*   [`lt`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#lt)
*   [`lte`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#lte)
*   [`startswith`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#startswith)
*   [`istartswith`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#istartswith)
*   [`endswith`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#endswith)
*   [`iendswith`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#iendswith)
*   [`range`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#range)
*   [`year`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#year)
*   [`month`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#month)
*   [`day`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#day)
*   [`week_day`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#week-day)
*   [`isnull`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#isnull)
*   [`search`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#search)
*   [`regex`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#regex)
*   [`iregex`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#iregex)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:34:33.983

[“字段查找”文档](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#field-lookups)。

# android - ListView 不显示默认按下的颜色

> ID：10873250
> 
> 赞同：1
> 
> 时间：2012-06-03T19:25:33.580
> 
> 标签：android, listview, dialog

我添加了一个自定义对话框，里面只有一个简单的 listView。

按下项目时，我没有得到选择颜色（通常出现在列表视图中，无需任何额外设置）。点击监听器工作等。但不是颜色。

还尝试显式设置选择器：

```
list.setSelector(R.color.blue); 
```

但它不会发生任何事情。还尝试为列表设置不同的背景颜色，仍然没有选择颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:06:17.857

您创建的颜色资源可能有问题，因为我能够更改选择嵌入在自定义对话框中的列表项的颜色，使用`list.setSelector(R.color.blue);`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T03:05:55.930

好的，我回答这个问题迟到了，但我找到了实际答案，以防将来有人在寻找答案。这里的其他两个答案不起作用。

所以我有一个 ListView，它有一个自定义 ListView 行，以 drawables 作为背景。这样做可以使默认的 PRESSED 灰色高光不会闪烁并打开，就像您在长按时一样。发生的事情是 ListView 正在在视图下方绘制选择器（如果有的话）。以下是您修复它的方法：

在 onCreate 中：

```
// this sets the selector/pressed drawable or you could use a color or whatever
listView.setSelector(getResources().getDrawable(R.drawable.listviewrow_pressed));

// this draws the selector drawable/color on top
listView.setDrawSelectorOnTop(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:31:58.190

我有同样的问题。通过添加修复它：

```
StateListDrawable drawable = new StateListDrawable();
drawable.addState(new int[] { android.R.attr.state_pressed }, new ColorDrawable(Color.BLUE));
view.setBackgroundDrawable(drawable); 
```

to`ListView`的适配器`getView()`方法。

# objective-c - PhoneGap device.uuid (VS.) iPad [[UIDevice currentDevice] uniqueIdentifier]

> ID：10873257
> 
> 赞同：1
> 
> 时间：2012-06-03T19:26:32.550
> 
> 标签：objective-c, ipad, cordova, uniqueidentifier

我正在寻找一种从 PhoneGap 和本机 Objective-C 环境中的 iPad 获取设备 UUID 的方法。问题是PhoneGap 只给了我设备UUID 的散列版本。例如：

```
1) device.uuid = E0AB7C8C-EFEE-4EB1-9B8F-A543575390A0
2) [[UIDevice currentDevice] uniqueIdentifier] = 75579DE5-98C7-53B6-B2AD-7F348662CB5D 
```

但是因为我需要两个值相同，所以我需要以下解决方案之一 1）如何像 PhoneGap 在 Objective-C 中一样对 [device uniqueIdentifier] 进行哈希处理。2) 如何从 PhoneGap (JavaScript) 获取原始（非散列）设备的 UUID。

有人知道如何实现这一目标吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T00:11:20.220

`uniqueIdentifier`自 iOS 5 起已弃用。您根本不应该再使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T00:41:38.750

由于 PhoneGap 是开源的，您可以自己查看它是如何生成 UUID 的。

这是 PhoneGap 使用的方法（复制自`1.7.0`）。我还复制了 Apache 许可证，以防万一。

```
/*
 Licensed to the Apache Software Foundation (ASF) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  The ASF licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.
 */

- (NSString*) uniqueAppInstanceIdentifier
{
    // full path to the app folder
    NSString* bundlePath = [[[NSBundle mainBundle] bundlePath]
        stringByDeletingLastPathComponent];

    // return only the folder name (a GUID)
    return [bundlePath lastPathComponent];
} 
```

# cocoa - EDMessage.framework 错误

> ID：10873259
> 
> 赞同：1
> 
> 时间：2012-06-03T19:26:40.750
> 
> 标签：cocoa, xcode4, frameworks

我将我的 MacOS 项目链接到 EDMessage.framework。现在我得到这个错误：

```
Apple Mach-O Linker (Id) Error:

in /Users/.../EDMessage 17/EDCommon.framework/EDCommon, truncated fat file. Slice from 847872 to 1189136 is past end of file with length 1048576 for architecture x86_64 
```

知道如何解决这个问题吗？

（我使用 Xcode 4.3.2）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:47:29.213

“官方”论坛上正在讨论类似的问题：http: [//www.mulle-kybernetik.com/forum/viewtopic.php? f=5&t=273](http://www.mulle-kybernetik.com/forum/viewtopic.php?f=5&t=273)

# .net - AutoCAD 信息框功能

> ID：10873263
> 
> 赞同：0
> 
> 时间：2012-06-03T19:27:22.113
> 
> 标签：.net, autocad, autocad-plugin

我想在 AutoCAD 中创建信息框功能。就像您将某些功能悬停在 Google 地球中一样，它会向您显示带有图片的信息框。

[像这样的东西](http://i.stack.imgur.com/9Efb2.jpg)

我正在考虑使用调色板，但我不确定如何将其调整为看起来像信息框。

我打算创建 .NET 插件。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T21:56:40.603

**好吧，我发现我认为最好的方法是使用 AutoCAD 工具提示。这是代码片段：

```
Autodesk.Windows.ComponentManager.ToolTipOpened +=
            (s, e) =>
            {       
                Autodesk.Internal.Windows.ToolTip tooltip =
                s as Autodesk.Internal.Windows.ToolTip;
                if (tooltip != null)
                {                     
                        var image = new System.Windows.Controls.Image();
                        var bitmapImage = new BitmapImage();
                        bitmapImage.BeginInit();
                        bitmapImage.UriSource = new Uri(@"C:/index.jpeg");
                        bitmapImage.EndInit();
                        image.Source = bitmapImage;
                        tooltip.Height = image.Height;
                        tooltip.Width = image.Width;
                        tooltip.Content = image;
                }
            }; 
```

我现在看起来很好。:)**

正如我在下面的评论中所说，这里是此解决方案的屏幕截图

![在此处输入图像描述](../Images/684339e4aac2c42b9c578d2211555d18.png)

您可能会注意到，工具提示不在几何体附近，我选择了粉红色的。那是我的最后一个问题。我的流程是，当我选择对象时，我得到了 win 表单 listBox，它为我提供了几个连接到该实体的图像文件。当我选择一个时，它会打开工具提示，但它似乎相对于列表框对话框。我无法找到如何手动设置工具提示位置的解决方案。有什么建议么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T07:20:41.543

您可以使用 PointMonitor 来检测鼠标移动：[http ://through-the-interface.typepad.com/through_the_interface/2009/07/providing-information-on-autocad-objects-in-a-tooltip-using-net .html](http://through-the-interface.typepad.com/through_the_interface/2009/07/providing-information-on-autocad-objects-in-a-tooltip-using-net.html)

为了显示图像，您可以在调色板中使用 WPF：http: [//through-the-interface.typepad.com/through_the_interface/2009/08/hosting-wpf-content-inside-an-autocad-palette.html](http://through-the-interface.typepad.com/through_the_interface/2009/08/hosting-wpf-content-inside-an-autocad-palette.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T23:54:51.430

使用 PointMonitor，检测您关注的实体是否在光标位置下，并在适用时弹出您自己的窗口，将图像保存在列表框、组合框等中，更加可控和灵活。该窗口可以是您选择的 WPF 或 WinForm。

这绝对是可行的，并且一些应用程序已经相当成熟地使用了这些技术。必须考虑一些协调转换的东西，例如从窗口像素到AutoCAD显示系统，从DCS到WCS，来回。

现在，唯一剩下的可能就是性能了。希望以下提示对您有所帮助。

1.  缓存之前的实体 ID。如果光标仍悬停在其上，则什么也不做，只保留上一个图像。
2.  如果用户将光标从一个实体快速移动到另一个实体，则可能不需要丢弃前一个窗口并创建一个新窗口。替换图像应该足够了，而且很好。
3.  提供相同图像的不同分辨率，如缩略图、预览或精细，并在不同时间显示它们，例如如果光标悬停短于 1 秒，则仅显示缩略图，如果超过 5 秒则显示精细图片。
4.  最好给用户一些配置这些的方法。

# ios - iOS 应用程序 - 使用各种元素分离代码和内容

> ID：10873265
> 
> 赞同：0
> 
> 时间：2012-06-03T19:27:41.723
> 
> 标签：ios, sqlite, core-data, uiwebview

我是 iOS 应用程序开发的新手。我一直在阅读 Apple Developer 网站上的文档以及阅读 Internet 上的参考资料，但我似乎仍然找不到任何解释如何将内容与应用程序分开以使内容本身易于更新的内容。我见过的开源 iOS 示例将所有硬编码内容写入实现文件。尽管我已经阅读了 Core Data，但我不确定这是否是最适合我的用例的框架。我想制作一个基本的应用程序，它只包含许多视图，每个视图都包含各种类型的 UI 元素，如 HTML 中所见的那些，例如 H1、H2、H3、P、UL 和 IMG。使用 Core Data，我假设我必须以某种方式将我的数据（内容）保存到 SQLite 数据库文件中，然后让应用程序读取它，这不会很乏味吗？除了首先填充它之外，我将如何更新 SQLite 数据库？

重申一下，我只是想知道，实现这一目标的最佳方法是什么，并且仍然能够相对轻松地更新内容，而无需转到内容硬编码的文件。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:37:00.707

更简单的方法是将它们放入 plist 文件中，然后将它们读取为 NSDictionaries 请阅读[Plist Array to NSDictionary](https://stackoverflow.com/questions/1343121/plist-array-to-nsdictionary) 并将[Plist (NSString) Parse Plist (NSString) into NSDictionary](https://stackoverflow.com/questions/1072308/parse-plist-nsstring-into-nsdictionary)以获取更多信息

# objective-c - 未收到远程控制事件

> ID：10873267
> 
> 赞同：2
> 
> 时间：2012-06-03T19:27:47.843
> 
> 标签：objective-c, ios, ios5

我正在尝试为我的应用程序使用锁定屏幕/现在播放控件，但没有收到任何事件。文档使它看起来非常简单，所以当我没有得到任何结果时我有点惊讶。我的应用需要接收远程控制事件，以便在设备上播放音频之外的其他用途。我试图通过使用 NSLog 打印出一些确认来对此进行测试。我是否需要使用文档中未提及的音频或媒体框架？我没有收到任何警告或错误，所以我认为这不应该有任何问题...任何有关远程控制事件未注册原因的见解将不胜感激

以下是相关代码：

```
- (void)viewDidAppear:(BOOL)animated{
    [super viewDidAppear:animated];

    //Register for lock screen controls
    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    [self becomeFirstResponder];
}

- (void)viewWillDisappear:(BOOL)animated{
    [super viewWillDisappear:animated];

    //Unregister lock screen controls
    [[UIApplication sharedApplication] endReceivingRemoteControlEvents];
    [self resignFirstResponder];
}

- (BOOL)canBecomeFirstResponder{
    return YES;
}

//Lock screen controls
- (void)remoteControlReceivedWithEvent:(UIEvent *)event{
    NSLog(@"RECEIVED");
    if (event.type == UIEventTypeRemoteControl) {

        switch (event.subtype) {

            case UIEventSubtypeRemoteControlTogglePlayPause:
                NSLog(@"RECEIVED");
                break;

            case UIEventSubtypeRemoteControlPreviousTrack:
                NSLog(@"RECEIVED");
                break;

            case UIEventSubtypeRemoteControlNextTrack:
                NSLog(@"RECEIVED");
                break;

            default:
                break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T21:50:14.703

除了 Jojas 提到的内容之外，您还需要确保您有一个活跃的音频会话。查看 [AVAudioSession setActive:withFlags:error:]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:57:31.073

您是否已经确保您的应用程序设置的每个状态`ReceivingRemoteControlEvents`都很好？

您应该通过AppDelegate 中的[UIApplicationDelegate](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html)寻找必要的协议。看来您需要在`applicationWillResignActive`and中实现`applicationDidBecomeActive`。

但是，Apple 有关于[App States and Multitasking](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW3)的文档。我认为它将帮助您根据自己的目的处理应用程序状态。

希望对你有帮助！

# javascript - 逆向工程表格提交

> ID：10873268
> 
> 赞同：0
> 
> 时间：2012-06-03T19:27:53.180
> 
> 标签：javascript, jquery, forms

我正在使用托管购物车系统来管理电子商务平台。系统使用表单提交将项目添加到用户的购物车。我想编写一个 javascript 库来允许我使用 JS 将东西添加到购物车，但我需要查看平台提交的内容，以便我可以适当地复制它。

任何建议如何最好地嗅出默认表单信息正在提交到表单以便我可以通过 jquery 复制它？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T19:29:57.273

打开浏览器的控制台；Chrome 有它内置的，Firefox 有 Firebug。

整个请求将在网络选项卡中可见。

另一个更复杂的选择是设置一个简单的本地代理并转储请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T19:30:21.417

您可以使用[TamperData](https://addons.mozilla.org/en-US/firefox/addon/tamper-data/)。这是一个很好的 Firefox 插件，可以让您查看和编辑这些数据。

如果你有的话，Firebug 和它的衍生产品也有这个功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T19:30:32.250

使用控制台在 firefox 上的 Firebug 并打开“persist”，它会告诉您在页面发布和内容之后发生了什么。:)

# smtp - SMTP 中带有纯文本、HTML 和附件的电子邮件的正确电子邮件格式？

> ID：10873269
> 
> 赞同：4
> 
> 时间：2012-06-03T19:28:03.530
> 
> 标签：smtp

**问题：**

我试图复制 yahoo 和 hotmail 使用的基于 SMTP 的标头/电子邮件并通过 Telnet 发送它们，但我收到的电子邮件不显示包含的附件​​，但它确实正确显示了消息。

**我怀疑是什么原因造成的：**

我相信我的电子邮件格式不正确，尽管在网上搜索了许多文章（以及试图掌握复杂且难以阅读的 RFC），但我没有找到任何有用或简洁的文章来解释如何使用这三种方法（Plain 、HTML 和附件）在 SMTP 中正确。我花了几天时间尝试更改代码，但我要么*只*得到消息（没有附件），要么得到整个 SMTP 数据主体显示（包括边界、html 代码等）。

**我希望通过这个问题实现的目标：**

我希望有人可以查看我在下面收集的信息，并能够告诉我我遗漏了什么（或者电子邮件的格式究竟有多不正确）。

**调试信息：**

我将发送到 SMTP 服务器的信息的副本提供给文件，并将信息粘贴到 pastebin（删除/编辑了任何个人信息 - Base64 编码附件只是从 IMAP 获得的另一封电子邮件的文本文件):

**将信息逐字（减去控制字符）发送到 SMTP 服务器：**

[http://pastebin.com/QYwzWT0S](http://pastebin.com/QYwzWT0S)

**我在电子邮件客户端中看到的内容（注意没有附件）：**

[http://i45.tinypic.com/29b1zci.jpg](http://i45.tinypic.com/29b1zci.jpg)

**下载电子邮件时 IMAP 看到的内容（注意格式不正确）：**

[http://pastebin.com/zv3PBr8N](http://pastebin.com/zv3PBr8N)

**正确格式的电子邮件在 IMAP 中应该是什么样子：**

[http://pastebin.com/3yBySbxU](http://pastebin.com/3yBySbxU)

我怀疑 SMTP 误解了我发送的内容，这就是 IMAP 尝试检索电子邮件时缺少 multipart/alternative 的原因。我到底做错了什么？服务器期望什么？

[感谢您的支持-我可以重新启用链接！]

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T02:57:37.163

我清理了多部分边界说明符并得到了这个，它适用于我的服务器（我在这里省略了 SMTP 命令）：

```
From: "Edited Out" <editedout@yahoo.com> 
To: "Edited Out" <editedout@yahoo.com> 
Subject: Testing 4
MIME-Version: 1.0
Content-Type: multipart/alternative;
  boundary="boundary-type-1234567892-alt"

--boundary-type-1234567892-alt
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Testing the text to see if it works!

--boundary-type-1234567892-alt
Content-Type: text/html; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<html>Does this actually work?</html>

--boundary-type-1234567892-alt
Content-Transfer-Encoding: base64
Content-Type: text/plain;name="Here2.txt"
Content-Disposition: attachment;filename="Here2.txt"

KiAxMyBGRVRDSCAoQk9EWVtURVhUXSB7NjU5fQ0KLS1fZjZiM2I1ZWUtMjA3YS00ZDdiLTg0NTgtNDY5YmVlNDkxOGRhXw0    KQ29udGVudC1UeXBlOiB0ZXh0L3BsYWluOyBjaGFyc2V0PSJpc28tODg1OS0xIg0KQ29udGVudC1UcmFuc2Zlci1FbmNvZG    luZzogcXVvdGVkLXByaW50YWJsZQ0KDQoNCkp1c3Qgc2VlaW5nIHdoYXQgdGhpcyBhY3R1
YWxseSBjb250YWlucyEgCQkgCSAgIAkJICA9DQoNCi0tX2Y2YjNiNWVlLTIwN2EtNGQ3Yi04NDU4LTQ2OWJlZTQ5MThkYV8    NCkNvbnRlbnQtVHlwZTogdGV4dC9odG1sOyBjaGFyc2V0PSJpc28tODg1OS0xIg0KQ29udGVudC1UcmFuc2Zlci1FbmNvZG    luZzogcXVvdGVkLXByaW50YWJsZQ0KDQo8aHRtbD4NCjxoZWFkPg0KPHN0eWxlPjwhLS0N
Ci5obW1lc3NhZ2UgUA0Kew0KbWFyZ2luOjBweD0zQg0KcGFkZGluZzowcHgNCn0NCmJvZHkuaG1tZXNzYWdlDQp7DQpmb25    0LXNpemU6IDEwcHQ9M0INCmZvbnQtZmFtaWx5OlRhaG9tYQ0KfQ0KLS0+PC9zdHlsZT48L2hlYWQ+DQo8Ym9keSBjbGFzcz    0zRCdobW1lc3NhZ2UnPjxkaXYgZGlyPTNEJ2x0cic+DQpKdXN0IHNlZWluZyB3aGF0IHRo
aXMgYWN0dWFsbHkgY29udGFpbnMhIAkJIAkgICAJCSAgPC9kaXY+PC9ib2R5Pg0KPC9odG1sPj0NCg0KLS1fZjZiM2I1ZWU    tMjA3YS00ZDdiLTg0NTgtNDY5YmVlNDkxOGRhXy0tDQopDQpmbHlubmNvbXB1dGVyIE9LIEZFVENIIGNvbXBsZXRlZA

--boundary-type-1234567890-alt-- 
```

多部分电子邮件中的边界说明符是不太可能出现在电子邮件正文/附件中的任意文本。当它在前面出现两个破折号时，表示新部分的开始（包括第一部分。当它在开头和结尾出现两个破折号时，表示邮件的结尾。

您的原始邮件在邮件中间（就在 之后`<html>Does this actually work?</html>`）有这个“结束边界”标记，并且有两个不同的边界标记（`--boundary-type-1234567890`和`--boundary-type-1234567892-alt`）。这就解释了为什么附件被遗漏了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T14:41:49.610

事实证明，这个问题非常微妙。

Hotmail 传统上（[这是我基于它的原始电子邮件](http://pastebin.com/3yBySbxU)），对电子邮件的多个部分使用术语“多部分/替代”。我在电子邮件中使用了“multipart/alternative”。

事实证明，雅虎不喜欢“多部分/替代”，并且只会在使用“多部分/混合”一词时正确显示纯文本、html 和附件（因为我注意到雅虎兼容的电子邮件使用这个词而不是替代词） ，结合 ejdyksen 的建议（尽管这两个建议都不适用于雅虎的服务器）。

虽然从技术上讲，这是“正确”的答案，但我会选择 ejdyksen 的答案，因为他的努力表明这是一些服务器端的技术问题（他的 SMTP 服务器和 hotmail 都显示了附件，而雅虎没有）。礼貌地支持 ejdyksen 的回答，因为他做了大部分的跑腿工作。

# ruby-on-rails - 收集rails 3中所有路线的第一段

> ID：10873271
> 
> 赞同：0
> 
> 时间：2012-06-03T19:28:27.627
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, routes, ruby-on-rails-3.2

我正在尝试实现第一段是配置文件别名或 ID 的路由：

```
resources :profiles, :path => '' do
    ...
end 
```

而且我需要验证其他（更高）路线的第一段尚未采用别名。我现在拥有的是：

```
validates :alias, :exclusion => {:in => Rails.application.routes.routes.map{|r| r.path.spec.to_s.split('(').first.split('/').second}.compact.uniq },
                  .... 
```

在开发中一切正常。在生产`Rails.application.routes.routes.map...`中返回空数组。但仅在模型内部验证，如果我将它放在某个地方只是为了测试它会按预期返回所有路线的第一段数组。我做错了什么或者也许有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:23:36.517

我猜你有时间问题。当您的模型在生产模式下加载时，您的路由表`Rails.application.routes`可能尚未构建；但是，在开发模式下，您的模型可能会在每次请求时重新加载，因此`Rails.application.routes`将在您的模型加载和`validates`调用时填充：

```
validates :alias, :exclusion => { :in => Rails.application.routes.routes.map { ... } } 
```

被执行。

一个简单的解决方案是切换到验证方法：

```
class Model < ActiveRecord::Base
    validate :alias_isnt_a_route, :if => :alias_changed?

private

    def alias_isnt_a_route
        routes = Rails.application.routes.routes.map { ... }
        if(routes.include?(alias))
            errors.add(:alias, "Alias #{alias} is already used for a route")
    end
end 
```

这样，您在`Rails.application.routes`需要检查别名之前不会查看，到那时，路线将已加载。当然，如果您愿意，您可以缓存路由前缀列表。

您还需要在应用程序的初始化阶段添加一些完整性检查。您的生产环境中的某个人可能会在您在开发`'pancakes'`时添加路线时添加，例如，作为他们的别名`/pancakes`：您的验证将错过这个新的冲突。像这样简单的东西：

```
config.after_initialize do
    Rails.application.reload_routes! # Make sure the routes have been loaded.
    # Compare all the existing aliases against the route prefixes and raise an
    # exception if there is a conflict.
end 
```

在你的`config/application.rb`就足够了。

# ruby-on-rails - Rails 创建应用内链接到非平凡路线的方式？

> ID：10873272
> 
> 赞同：1
> 
> 时间：2012-06-03T19:28:30.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, routes

我一直在研究[路由](http://guides.rubyonrails.org/routing.html)文档，似乎只发现了这个所需信息的一半。

如果我创建一条如下所示的路线：

```
match 'attendances/new/:class_date/:student_id' 
```

恐怕我完全不清楚如何创建一个`link_to`能够满足上述要求的适当咒语。

例如，创建此 URL 似乎没有问题：

```
http://localhost:3000/attendances/new?class_date=2012-05-07&student_id=5 
```

但我还没有找到合适的文档来解释如何创建这个：

```
http://localhost:3000/attendances/new/2012-05-07/5 
```

有人可以提供一个有用的例子和/或一个讨论如何做到这一点的文档链接吗？

我意识到在`link_to`这里尝试使用可能完全不合适。而且我意识到我可以拼凑一些代码来制作适当的链接，但我怀疑这样做会完全错过一些更好的 Ruby-on-Rails 方式来做到这一点。

编辑：更正了`match`上面的建议路线。

编辑2：继续“mu太短”的建议，这是我的routes.rb现在的样子：

```
NTA::Application.routes.draw do
  resources :students

  resources :libraries

  resources :year_end_reviews

  resources :notes

  resources :ranktests

  resources :attendances

  match 'attendances/new/:class_date/:student_id', :as => :add_attendance

  resources :ranks

  get "home/index"

  root :to => "home#index"

end 
```

这是相关的观点：

```
<% today = Date.today %>
<% first_of_month = today.beginning_of_month %>
<% last_of_month = today.end_of_month %>
<% date_a = first_of_month.step(last_of_month, 1).to_a %>
<h2><%= today.strftime("%B %Y") %></h2>

<table id="fixedcolDT">
<thead>
  <tr>
    <th>Name</th>
    <% date_a.each do |d| %>
      <th><%= d.day %></th>
    <% end %>
  </tr>
</thead>

<tbody>
<% @students.each do |s| %>
  <tr>
    <td><%= s.revfullname %></td>
    <% date_a.each do |d| %>
      <% student_attend_date = Attendance.find_by_student_id_and_class_date(s.id, d) %>
        <% if student_attend_date.nil? %>
          <td><%= link_to "--", add_attendance_path(d, s.id) %></td>
        <% else %>
          <td><%= student_attend_date.class_hours %></td>
        <% end %>
    <% end %>
  </tr>
<% end %>
</tbody>
</table> 
```

这是我在初始重新加载后得到的（在尝试重新启动 WEBrick 之前）：

```
ArgumentError

missing :controller
Rails.root: /Users/jim/Documents/rails/NTA.new

Application Trace | Framework Trace | Full Trace
config/routes.rb:15:in `block in <top (required)>'
config/routes.rb:1:in `<top (required)>'
This error occurred while loading the following files:
   /Users/jim/Documents/rails/NTA.new/config/routes.rb 
```

如果有兴趣，我会粘贴尝试重新启动 WEBrick 失败后得到的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T19:43:35.490

首先，您要为路线命名，以便获得适当的辅助方法：

```
match ':attendances/:new/:class_date/:student_id' => 'controller#method', :as => :route_name 
```

这将生成两种可用于构建 URL 的方法：

1.  `route_name_path`: URL 的路径，无方案，主机名，...
2.  `route_name_url`: 完整的 URL，包括方案、主机名、...

这些方法将按顺序将它们的参数用于路由的参数值，因此您可以说：

```
<%= link_to 'Pancakes!', route_name_path(att, status, date, id) %> 
```

and `:attendances`would be `att`, `:new`would be`status`等。或者，您可以将 Hash 传递给方法并直接使用参数名称：

```
<%= link_to 'Pancakes!', route_name_url(
    :attendances => att,
    :new         => status,
    :class_date  => date,
    :student_id  => id
) %> 
```

# ruby-on-rails - 第 7 章 Ruby on Rails users_controller.rb 错误

> ID：10873278
> 
> 赞同：0
> 
> 时间：2012-06-03T19:29:12.990
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

我按照第 7 章 Ruby on Rails 教程中的所有说明进行操作，当我最终运行 $ Bundle exec rspec spec/ 时，会显示一系列错误。我仔细检查了我的代码是否有任何拼写错误或遗漏了任何符号。一切似乎都很好。您能否解释一下错误并告诉我哪里出错了？？？谢谢

**USER_PAGES_SPEC.RB**

```
require 'spec_helper'

describe "User pages" do

  subject { page }

  describe "signup page" do
  before {visit signup_path}

    it { should have_selector('h1',    text: 'Sign ') }
    it { should have_selector('title', text: full_title('Sign up')) }
  end

 describe "profile page" do
    let(:user) { FactoryGirl.create(:user) }

    before { visit user_path(user) }

    it { should have_selector('h1',    text: user.name) }
    it { should have_selector('title', text: user.name) }
  end

   describe "signup" do

    before { visit signup_path }

    let(:submit) { "Create my account" }

    describe "with invalid information" do
      it "should not create a user" do
        expect { click_button submit }.not_to change(User, :count)
      end
    end

    describe "with valid information" do
      before do
        fill_in "Name",         with: "Example User"
        fill_in "Email",        with: "user@example.com"
        fill_in "Password",     with: "foobar"
        fill_in "Confirmation", with: "foobar"
      end

      it "should create a user" do
        expect { click_button submit }.to change(User, :count).by(1)
      end

      describe "after saving a user" do
        before {click_button submit}

        let (:user) {user.find_by_email("user@example.com")}

        it {should have_selector('title', text:user.name)}
    end
  end
end
end 
```

**USER_CONTROLLER.RB**

```
class UsersController < ApplicationController

  def show
    @user = User.find(params[:id])
  end

  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])

    if @user.save

    sign_in @user

    flash[:success] = "Welcome to the Sample App!"

    redirect_to @user

    else

     render 'new'
    end
  end
end 
```

**命令行上显示的错误**

```
 3) User pages signup page
 ←[31mFailure/Error:←[0m ←[31mit { should have_selector('title', text: full_ 
```

title('Sign up')) }←[0m ←[31mNoMethodError:←[0m ←[31mundefined方法`full_title' for #<RSpec::Core::ExampleGroup::Neste d_2::Nested_1:0x461b260>←[0m ←[36m # ./spec/requests/user_pages_spec.rb:11:in`块（3级）在'←[0m

4) 用户页面配置文件页面←[31mFailure/Error:←[0m ←[31mit { should have_selector('title', text: user.name) }←[0m ←[31mexpected css "title" with text "Michael Hartl" to return something←[ 0m ←[36m # ./spec/requests/user_pages_spec.rb:19:in `block (3 levels) in '←[0m

5) 使用有效信息注册的用户页面应该创建一个用户 ←[31mFailure/Error:←[0m ←[31mexpect { click_button submit }.to change(User, :count).by(1)←[0m ←[31mNoMethodError:← [0m ←[31mundefined method `sign_in' for #<UsersController:0x45a8f00>←[0m ←[36m # ./app/controllers/users_controller.rb:14:in`create'←[0m ←[36m # (eval):2:in `click_button'←[0m ←[36m # ./spec/requests/user_pages_spec.rb:43:in`block (5 levels) in '←[0m ←[36m # ./spec/requests/user_pages_spec.rb:43:in ` '←[0m中的块（4级）

6) 保存用户后用户页面注册信息有效 ←[31mFailure/Error:←[0m ←[31mbefore {click_button submit}←[0m ←[31mNoMethodError:←[0m ←[31mundefined method `sign_in' for #<UsersController:0x46341c0>←[0m ←[36m # ./app/controllers/users_controller.rb:14:in`create'←[0m ←[36m] # (eval):2:in `click_button'←[0m ←[36m # ./spec/requests/user_pages_spec.rb:47:in`block (5 levels) in '←[0m

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T07:07:37.067

> 1) 未定义的方法 full_title

你定义了吗？

> 2) 期望带有文本“Michael Hartl”的css“title”返回一些东西

你还没有`<title>Michael Hartl</title>`输出html。

> 3, 4) 未定义的方法sign_in

你在哪里定义的？

更正您的代码，所有测试都将通过。

# java - 组装分散数据的设计模式？

> ID：10873280
> 
> 赞同：1
> 
> 时间：2012-06-03T19:29:18.707
> 
> 标签：java, design-patterns

我正在设计一个在标准行/列类型输出中组装分散数据的系统。

每列可以：

*   存在于一个独立的系统中。
*   可以分页。
*   可以排序。
*   每列可以包含数百万行。

和系统：

*   需要可扩展，以便可以输出不同列的不同表。
*   最终的域对象是已知的（行）。
*   密钥在所有系统中都是不变的。

我目前的实现计划是每列设计两个类（或实现两个接口的一个类列）。接口将：

1.  实现分页和排序。
2.  实施“装饰”

这个想法是表构造函数将接收有关当前排序列和页面的信息。然后它将返回表的适当键列表。该信息将用于创建域对象行列表，然后将其依次传递给每个列“装饰”实现，以便可以依次添加每个列信息。

我想我的问题是——推荐什么样的设计模式——或者人们将使用替代设计决策来组装具有公共键和变量列的分散数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T21:15:03.713

我不确定我是否完全理解您要做什么，但根据我收集的信息，您希望以一种允许您稍后从中制作结构化表格的方式存储任意数据行。在这种情况下（假设您使用 Java）我会做一个非常简单的`Column`接口，它只有一个“值”属性：

```
public interface Column {
    String value;
} 
```

然后，您可以通过实现来制作列`Column`：

```
public class Key implements Column {
    String value = new String();

    public Key(String keyValue){
        this.value = keyValue;
    }
} 
```

因此，您可以创建一个名为`DataRow`（或任何您喜欢的）的类，其对象将包含实际数据。例如，您可以在该类中有一个允许您添加数据的方法：

```
public class DataRow {

    List<Column> data = new ArrayList<Column>();

    public DataRow(String key){
        this.setColumn(new Key(key));
    }

    public void setColumn(Column columnData) {
        this.data.add(columnData);
    }

    public Column getColumn(Class column){
        for(Column c : this.data){
            if(c.getClass().equals(column)){
                return c;
            }
        }
        return null;
    }

} 
```

如您所见，您可以`setColumn()`通过给它一个新`Column`对象来调用该方法。这将允许您向`DataRow`对象添加任何您喜欢的任何类型的数据。然后，要制作一些表，您可以有一个函数，该函数采用 a `List`of`DataRows`和 a `List`of 类，然后仅返回具有指定行中的数据的对象：

```
public List<DataRow> createTable(List<DataRow> data, List<Class<? extends Column>> columns){
    List<DataRow> table = new ArrayList<DataRow>();
    for(DataRow row : data){
        DataRow ret = new DataRow(row.getColumn(Key.class).value);
        for(Class column : columns){
            if(row.getColumn(column.getClass()) != null )ret.setColumn(row.getColumn(column.getClass()));
        }
        table.add(ret);
    }
    return table;
} 
```

这将允许您使用您的数据“创建”表，以及要包含在表中的列。

请注意，我编写此代码是为了传达一个想法，目前它非常混乱。但我希望这会对你有所帮助。

# facebook-graph-api - 即使提供应用程序访问令牌，apprequests 对象也会引发“需要访问令牌”错误

> ID：10873281
> 
> 赞同：1
> 
> 时间：2012-06-03T19:29:21.137
> 
> 标签：facebook-graph-api, apprequests

我正在尝试获取有关我的应用程序发送的应用程序请求的信息（请参阅[https://developers.facebook.com/docs/reference/api/user/#apprequests](https://developers.facebook.com/docs/reference/api/user/#apprequests)），但即使在提供了我的应用程序访问令牌之后，我也得到了每当我尝试访问 Graph API 中的 apprequest 对象时，此响应：

```
{
  "error": {
    "message": "An access token is required to request this resource.", 
    "type": "OAuthException", 
    "code": 104
  }
} 
```

我通过向以下 URL 发出 GET 请求来检索我的应用程序访问令牌：

[https://graph.facebook.com/oauth/access_token?client_id=APP_KEY&client_secret=APP_SECRET&grant_type=client_credentials](https://graph.facebook.com/oauth/access_token?client_id=APP_KEY&client_secret=APP_SECRET&grant_type=client_credentials)

然后我尝试通过点击访问 apprequest 对象

[https://graph.facebook.com/REQUEST_ID?access_token=APP_ACCESS_TOKEN](https://graph.facebook.com/REQUEST_ID?access_token=APP_ACCESS_TOKEN)

当我点击这个 URL 时，我得到了上面定义的错误。我在 URL 中提供了 access_token，所以这个错误要么是错误，要么是我误解了文档，但我认为是 Facebook 博客文章（参见[https://developers.facebook.com/blog/post/464/](https://developers.facebook.com/blog/post/464/) ) 以与我上面完全相同的方式获取 apprequest 信息（获取应用访问令牌，通过点击 Graph API 请求 apprequest）。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:44:23.703

我刚才也有同样的问题。可能你现在已经解决了，但无论如何我都会为到达这里的每个人回复。

如果您注意到 $apprequest_utl 您会看到它类似于

[https://graph.facebook.com/USER_ID/apprequests?message=Request_Message&data=somedata&access_token=ACCESSTOKEN&method=post](https://graph.facebook.com/USER_ID/apprequests?message=Request_Message&amp;data=somedata&amp;access_token=ACCESSTOKEN&amp;method=post)

在这里，应该是“&”实际上是“&”，无论如何它是相同的，但不适用于具有 php 函数 file_get_contents 的 facebook 应用程序。相反，使用 curl 并且一切正常！

```
<?php 

function app_request ($request_string,$app_id,$app_secret,$user_id,$type) {

  $token_url = "https://graph.facebook.com/oauth/access_token?" .
    "client_id=" . $app_id .
    "&client_secret=" . $app_secret .
    "&grant_type=client_credentials";

  $app_access_token = file_get_contents($token_url);

  $request_string=utf8_encode($request_string);

  $apprequest_url ="https://graph.facebook.com/" .
    $user_id .
    "/apprequests?message=" .
    $request_string . 
    "&data=" .
    $type . 
    "&" .
    $app_access_token . "&method=post";

  $result = curl($apprequest_url);
  echo "Request id number: " . $result;

}

  function curl($url){

        $curl = curl_init($url);
        curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
        curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0);
        curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);
        curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);
        return curl_exec($curl);
        curl_close($curl);

}

//Call the function and make the app request!
app_request("Test",$APP_ID,$APP_SECRET,$USER_ID,"Test");

?> 
```

# mysql - 求和条件语句

> ID：10873284
> 
> 赞同：5
> 
> 时间：2012-06-03T19:29:46.690
> 
> 标签：mysql, sql

我有以下查询，它给了我销售额的总和：

```
SELECT SUM(sales)
FROM 
    (SELECT sales FROM ...) combined 
```

我现在需要在伪代码中添加基于某些扣除税收的货币的条件减法，如下所示：

```
SELECT SUM(sales) - (SUM(sales) IF currency IN ('jpy', 'aud') * 0.05)
FROM 
    (SELECT sales FROM ...) combined 
```

我将如何创建这个条件 SUM 或子查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T19:46:55.783

您可以在求和时应用因子：

```
SELECT SUM(CASE WHEN currency IN ('jpy', 'aud') 
                THEN sales * 0.95
                ELSE sales
            END)
FROM combined 
```

[CASE](http://dev.mysql.com/doc/refman/5.0/en/case-statement.html)有两种形式。这个检查是否在 WHEN 评估为 true 之后给出的布尔表达式。如果是这样，它返回的销售额减少了 5%；如果不是，则在 ELSE 之后返回表达式。您可以组合 WHEN...THEN 对。第一个计算结果为 true 的表达式在 THEN 之后返回表达式。

您可能已经按照您在问题中的建议执行此操作，方法是从 JPY 和 AUD 中减去 TAX，如下所示：

```
SELECT SUM(sales) 
     - ifnull (SUM(CASE WHEN currency IN ('jpy', 'aud') 
                        THEN sales * 0.05
                    END), 0)
FROM combined 
```

但这对查询没有任何帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T20:00:25.403

由于只有两种选择，您还可以使用该[`IF()`](http://dev.mysql.com/doc/refman/5.6/en/control-flow-functions.html#function_if)功能：

```
SELECT SUM(sales * IF(currency IN ('jpy', 'aud'), 0.95, 1))
FROM combined 
```

另一种方法是使用隐式布尔转换为`0`或`1`像这样：

```
SELECT SUM(sales * (1 - currency IN ('jpy', 'aud') * 0.05)) 
```

布尔表达式将`currency IN ('jpy', 'aud')`隐式转换为`0`（当为假时）或`1`（当为真），相应地，这将导致结果为`sales * (1 - 0)`or `sales * (1 - 0.05)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T19:33:52.330

```
select sum(sales) - case when (currency in ('jpy', 'aud') then (Sum(sales) * .05) else 0 end 
```

（TSQL 还是 mysql？）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T19:42:51.870

我认为亚历克斯是正确的。我假设您不能混合使用 jpy 和 usd 等，因此需要按货币分组，即

```
SELECT currency, 
       SUM(sales) * (1 - CASE WHEN currency IN ('jpy', 'aud') 
                            THEN .05 -- 5% Tax
                         ELSE 
                            0 -- No tax
                         END)
FROM
(
    SELECT 'aud' as currency, 10.00 as sales
    UNION 
    SELECT 'usd' as currency, 20.00 as sales
    UNION
    SELECT 'gbp' as currency, 30.00 as sales
    UNION 
    SELECT 'jpy' as currency, 40.00 as sales
) salesdata
GROUP BY currency 
```

退货

```
aud 9.50
gbp 30.00
jpy 38.00
usd 20.00 
```

jpy 和 aud 总额减 5%

# regex - Bash，查找和替换 - 重用变量？

> ID：10873286
> 
> 赞同：1
> 
> 时间：2012-06-03T19:29:51.843
> 
> 标签：regex, bash, sed

我正在 bash 中构建一个脚本，它会查找对其他文件的引用（例如 html 文件中对 img 源 (image.jpg) 的引用）

问题是我正在使用 sed 替换所有包含（在本例中）**“/some/random/directory/image.jpg”的实例**

“ **some/random/directory/image.jpg”**每次都会有所不同，所以当涉及到我的 sed 行时，我需要使用正则表达式，但是为了找到要替换的行，我需要包含**image.jpg** .

所以例如我的 sed 线就像

```
sed 's/\/some\/random\/directory\/image.jpg/images\/image.jpg/g' 
```

但是我如何得到 find 中的内容的结尾并将其放入替换中？（在这个例子中，它是**image.jpg**。有没有办法让它成为一个变量？

这是我现在的脚本：

```
#!/bin/bash

cd /home/username/www/immrqbe/

for file in $(grep -rlI ".jpg" *)
do
sed -e "s/\".*\/.*.jpg//ig" $file > /tmp/tempfile.tmp
mv /tmp/tempfile.tmp /home/username/www/immrqbe/$file
done 
```

这显然不是功能完整的，因为我需要帮助，但是您知道我希望如何完成它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T21:33:37.847

您正在寻找的东西在正则表达式的世界中被称为***反向引用。***您想*引用*以前匹配的字符串。

使用 sed 有几种方法可以做到这一点，但您要使用的是分组机制：`\(`和`\)`. sed 在两者之间找到的任何内容`\(`都`\)`将被放入一个组中，您可以使用`\n`where`n`是您要使用的组的编号从左到右引用该组。

所以，在你的例子中，你想要：

```
sed 's/".*\/\(.\+\.jpg\)"/\1/ig' file 
```

您的文件名将在`\(.\+\.jpg\)`组中，然后您可以`\1`在替换部分中使用它来引用它。

* * *

作为旁注，请注意，只要您不希望 shell 扩展引用字符串中的变量，您可以使用单引号并避免转义模式中的双引号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T19:55:53.680

使用括号捕获匹配项，然后使用反斜杠引用它。

```
sed -e 's/".*\/\(.*.jpg\)/\1/ig' 
```

# perl - 如何影响 Perl IPC::Open3 输出的宽度？

> ID：10873290
> 
> 赞同：3
> 
> 时间：2012-06-03T19:30:21.167
> 
> 标签：perl, terminal, ipcopen3

我有以下 Perl 代码，并希望它完全按照`/bin/ls`在终端中调用的方式显示。例如，在一个大小为 100 列的终端上，它会在插入换行符之前打印多达 100 个字符的输出。相反，此代码每行输出打印 1 个文件。我觉得这涉及为`IO::Pty`实例分配一些终端设置，但我已经尝试过这种变体，但没有运气。

**更新：**我`<$READER>`用一个调用替换了，`sysread`希望原始代码可能只是有缓冲问题，但从接收的输出`sysread`仍然是每行一个文件。

**更新：**我添加了显示我尝试通过该`clone_winsize_from`方法更改 IO::Pty 大小的代码。这并没有导致输出有任何不同。

**更新：**据我所知（通过阅读 1.12 版的 IPC::open3 代码），您似乎无法在不`open3`创建管道而不是`dup`文件句柄的情况下传递 IO::Handle 类型的变量。这意味着在调用它`isatty`时不返回真值，然后强制自己进入“每行一个文件”模式。`ls``ls`

我想我只需要自己做一个 fork/exec 并处理 I/O 重定向。

```
#!/usr/bin/env perl
use IPC::Open3;
use IO::Pty;
use strict;

my $READER = IO::Pty->new();
$READER->slave->clone_winsize_from(\*STDIN);

my $pid = open3(undef, $READER, undef, "/bin/ls");

while(my $line = <$READER>)
{
    print $line;
}
waitpid($pid, 0) or die "Error waiting for pid: $!\n";

$READER->close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T06:00:27.370

我认为`$READER`被创建的管道覆盖`open3`，这可以通过更改来避免

```
my $READER = ...;
my $pid = open3(undef, $READER, undef, "/bin/ls"); 
```

至

```
local *READER = ...;
my $pid = open3(undef, '>&READER', undef, "/bin/ls"); 
```

请参阅[文档](http://search.cpan.org/perldoc?IPC%3a%3aOpen3)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T22:09:57.570

您可以通过`-C`选项来`ls`强制它使用列输出（不`IO::Pty`涉及）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T21:59:11.470

[IO::Pty 文档](http://search.cpan.org/~rgiersig/IO-Tty-1.02/Pty.pm)描述了一种方法`clone_winsize_from(\*FH)`。您可以尝试克隆您实际 pty 的尺寸。

我看到您正在设置`pty`唯一`stdout`的子进程。您可能还需要将其设置为它`stdin`- 当子进程向其发送“查询终端大小”转义序列时`stdout`，它需要在其上接收响应`stdin`。

# apache - 错误消息“禁止您无权访问/在此服务器上”

> ID：10873295
> 
> 赞同：547
> 
> 时间：2012-06-03T19:30:34.973
> 
> 标签：apache, configuration, httpd.conf, http-status-code-403

我自己配置​​了我的 Apache，并尝试在虚拟主机上加载[phpMyAdmin ，但我收到：](http://en.wikipedia.org/wiki/PhpMyAdmin)

> 403 Forbidden 您无权访问此服务器上的 /

我的 httpd.conf

```
#
# This is the main Apache HTTP server configuration file.  It contains the
# configuration directives that give the server its instructions.
# See <URL:http://httpd.apache.org/docs/2.2> for detailed information.
# In particular, see 
# <URL:http://httpd.apache.org/docs/2.2/mod/directives.html>
# for a discussion of each configuration directive.
#
# Do NOT simply read the instructions in here without understanding
# what they do.  They're here only as hints or reminders.  If you are unsure
# consult the online docs. You have been warned.  
#
# Configuration and logfile names: If the filenames you specify for many
# of the server's control files begin with "/" (or "drive:/" for Win32), the
# server will use that explicit path.  If the filenames do *not* begin
# with "/", the value of ServerRoot is prepended -- so "logs/foo.log"
# with ServerRoot set to "C:/Program Files (x86)/Apache Software Foundation/Apache2.2" will be interpreted by the
# server as "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/logs/foo.log".
#
# NOTE: Where filenames are specified, you must use forward slashes
# instead of backslashes (e.g., "c:/apache" instead of "c:\apache").
# If a drive letter is omitted, the drive on which httpd.exe is located
# will be used by default.  It is recommended that you always supply
# an explicit drive letter in absolute paths to avoid confusion.

#
# ServerRoot: The top of the directory tree under which the server's
# configuration, error, and log files are kept.
#
# Do not add a slash at the end of the directory path.  If you point
# ServerRoot at a non-local disk, be sure to point the LockFile directive
# at a local disk.  If you wish to share the same ServerRoot for multiple
# httpd daemons, you will need to change at least LockFile and PidFile.
#
ServerRoot "C:/Program Files (x86)/Apache Software Foundation/Apache2.2"

#
# Listen: Allows you to bind Apache to specific IP addresses and/or
# ports, instead of the default. See also the <VirtualHost>
# directive.
#
# Change this to Listen on specific IP addresses as shown below to 
# prevent Apache from glomming onto all bound IP addresses.
#
#Listen 12.34.56.78:80
Listen 127.0.0.1:80

Include conf/vhosts.conf

#
# Dynamic Shared Object (DSO) Support
#
# To be able to use the functionality of a module which was built as a DSO you
# have to place corresponding `LoadModule' lines at this location so the
# directives contained in it are actually available _before_ they are used.
# Statically compiled modules (those listed by `httpd -l') do not need
# to be loaded here.
#
# Example:
# LoadModule foo_module modules/mod_foo.so
#
LoadModule actions_module modules/mod_actions.so
LoadModule alias_module modules/mod_alias.so
LoadModule asis_module modules/mod_asis.so
LoadModule auth_basic_module modules/mod_auth_basic.so
#LoadModule auth_digest_module modules/mod_auth_digest.so
#LoadModule authn_alias_module modules/mod_authn_alias.so
#LoadModule authn_anon_module modules/mod_authn_anon.so
#LoadModule authn_dbd_module modules/mod_authn_dbd.so
#LoadModule authn_dbm_module modules/mod_authn_dbm.so
LoadModule authn_default_module modules/mod_authn_default.so
LoadModule authn_file_module modules/mod_authn_file.so
#LoadModule authnz_ldap_module modules/mod_authnz_ldap.so
#LoadModule authz_dbm_module modules/mod_authz_dbm.so
LoadModule authz_default_module modules/mod_authz_default.so
LoadModule authz_groupfile_module modules/mod_authz_groupfile.so
LoadModule authz_host_module modules/mod_authz_host.so
#LoadModule authz_owner_module modules/mod_authz_owner.so
LoadModule authz_user_module modules/mod_authz_user.so
LoadModule autoindex_module modules/mod_autoindex.so
#LoadModule cache_module modules/mod_cache.so
#LoadModule cern_meta_module modules/mod_cern_meta.so
LoadModule cgi_module modules/mod_cgi.so
#LoadModule charset_lite_module modules/mod_charset_lite.so
#LoadModule dav_module modules/mod_dav.so
#LoadModule dav_fs_module modules/mod_dav_fs.so
#LoadModule dav_lock_module modules/mod_dav_lock.so
#LoadModule dbd_module modules/mod_dbd.so
#LoadModule deflate_module modules/mod_deflate.so
LoadModule dir_module modules/mod_dir.so
#LoadModule disk_cache_module modules/mod_disk_cache.so
#LoadModule dumpio_module modules/mod_dumpio.so
LoadModule env_module modules/mod_env.so
#LoadModule expires_module modules/mod_expires.so
#LoadModule ext_filter_module modules/mod_ext_filter.so
#LoadModule file_cache_module modules/mod_file_cache.so
#LoadModule filter_module modules/mod_filter.so
#LoadModule headers_module modules/mod_headers.so
#LoadModule ident_module modules/mod_ident.so
#LoadModule imagemap_module modules/mod_imagemap.so
LoadModule include_module modules/mod_include.so
#LoadModule info_module modules/mod_info.so
LoadModule isapi_module modules/mod_isapi.so
#LoadModule ldap_module modules/mod_ldap.so
#LoadModule logio_module modules/mod_logio.so
LoadModule log_config_module modules/mod_log_config.so
#LoadModule log_forensic_module modules/mod_log_forensic.so
#LoadModule mem_cache_module modules/mod_mem_cache.so
LoadModule mime_module modules/mod_mime.so
#LoadModule mime_magic_module modules/mod_mime_magic.so
LoadModule negotiation_module modules/mod_negotiation.so
#LoadModule proxy_module modules/mod_proxy.so
#LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
#LoadModule proxy_balancer_module modules/mod_proxy_balancer.so
#LoadModule proxy_connect_module modules/mod_proxy_connect.so
#LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
#LoadModule proxy_http_module modules/mod_proxy_http.so
#LoadModule proxy_scgi_module modules/mod_proxy_scgi.so
#LoadModule reqtimeout_module modules/mod_reqtimeout.so
#LoadModule rewrite_module modules/mod_rewrite.so
LoadModule setenvif_module modules/mod_setenvif.so
#LoadModule speling_module modules/mod_speling.so
#LoadModule ssl_module modules/mod_ssl.so
#LoadModule status_module modules/mod_status.so
#LoadModule substitute_module modules/mod_substitute.so
#LoadModule unique_id_module modules/mod_unique_id.so
#LoadModule userdir_module modules/mod_userdir.so
#LoadModule usertrack_module modules/mod_usertrack.so
#LoadModule version_module modules/mod_version.so
#LoadModule vhost_alias_module modules/mod_vhost_alias.so
LoadModule php5_module "c:/Program Files/php/php5apache2_2.dll" 

<IfModule !mpm_netware_module>
<IfModule !mpm_winnt_module>
#
# If you wish httpd to run as a different user or group, you must run
# httpd as root initially and it will switch.  
#
# User/Group: The name (or #number) of the user/group to run httpd as.
# It is usually good practice to create a dedicated user and group for
# running httpd, as with most system services.
#
User daemon
Group daemon

</IfModule>
</IfModule>

# 'Main' server configuration
#
# The directives in this section set up the values used by the 'main'
# server, which responds to any requests that aren't handled by a
# <VirtualHost> definition.  These values also provide defaults for
# any <VirtualHost> containers you may define later in the file.
#
# All of these directives may appear inside <VirtualHost> containers,
# in which case these default settings will be overridden for the
# virtual host being defined.
#

#
# ServerAdmin: Your address, where problems with the server should be
# e-mailed.  This address appears on some server-generated pages, such
# as error documents.  e.g. admin@your-domain.com
#
ServerAdmin webmaster@somenet.com

#
# ServerName gives the name and port that the server uses to identify itself.
# This can often be determined automatically, but we recommend you specify
# it explicitly to prevent problems during startup.
#
# If your host doesn't have a registered DNS name, enter its IP address here.
#
#ServerName www.somenet.com:80

#
# DocumentRoot: The directory out of which you will serve your
# documents. By default, all requests are taken from this directory, but
# symbolic links and aliases may be used to point to other locations.
#
DocumentRoot "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/htdocs"

#
# Each directory to which Apache has access can be configured with respect
# to which services and features are allowed and/or disabled in that
# directory (and its subdirectories). 
#
# First, we configure the "default" to be a very restrictive set of 
# features.  
#
<Directory />
    Options FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
</Directory>

#
# Note that from this point forward you must specifically allow
# particular features to be enabled - so if something's not working as
# you might expect, make sure that you have specifically enabled it
# below.
#

#
# This should be changed to whatever you set DocumentRoot to.
#
<Directory "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/htdocs">
    #
    # Possible values for the Options directive are "None", "All",
    # or any combination of:
    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
    #
    # Note that "MultiViews" must be named *explicitly* --- "Options All"
    # doesn't give it to you.
    #
    # The Options directive is both complicated and important.  Please see
    # http://httpd.apache.org/docs/2.2/mod/core.html#options
    # for more information.
    #
    Options Indexes FollowSymLinks

    #
    # AllowOverride controls what directives may be placed in .htaccess files.
    # It can be "All", "None", or any combination of the keywords:
    #   Options FileInfo AuthConfig Limit
    #
    AllowOverride None

    #
    # Controls who can get stuff from this server.
    #
    Order allow,deny
    Allow from all

</Directory>

#
# DirectoryIndex: sets the file that Apache will serve if a directory
# is requested.
#
<IfModule dir_module>
    DirectoryIndex index.html index.php
</IfModule>

#
# The following lines prevent .htaccess and .htpasswd files from being 
# viewed by Web clients. 
#
<FilesMatch "^\.ht">
    Order allow,deny
    Deny from all
    Satisfy All
</FilesMatch>

#
# ErrorLog: The location of the error log file.
# If you do not specify an ErrorLog directive within a <VirtualHost>
# container, error messages relating to that virtual host will be
# logged here.  If you *do* define an error logfile for a <VirtualHost>
# container, that host's errors will be logged there and not here.
#
ErrorLog "logs/error.log"

#
# LogLevel: Control the number of messages logged to the error_log.
# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
#
LogLevel warn

<IfModule log_config_module>
    #
    # The following directives define some format nicknames for use with
    # a CustomLog directive (see below).
    #
    LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
    LogFormat "%h %l %u %t \"%r\" %>s %b" common

    <IfModule logio_module>
      # You need to enable mod_logio.c to use %I and %O
      LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio
    </IfModule>

    #
    # The location and format of the access logfile (Common Logfile Format).
    # If you do not define any access logfiles within a <VirtualHost>
    # container, they will be logged here.  Contrariwise, if you *do*
    # define per-<VirtualHost> access logfiles, transactions will be
    # logged therein and *not* in this file.
    #
    CustomLog "logs/access.log" common

    #
    # If you prefer a logfile with access, agent, and referer information
    # (Combined Logfile Format) you can use the following directive.
    #
    #CustomLog "logs/access.log" combined
</IfModule>

<IfModule alias_module>
    #
    # Redirect: Allows you to tell clients about documents that used to 
    # exist in your server's namespace, but do not anymore. The client 
    # will make a new request for the document at its new location.
    # Example:
    # Redirect permanent /foo http://www.somenet.com/bar

    #
    # Alias: Maps web paths into filesystem paths and is used to
    # access content that does not live under the DocumentRoot.
    # Example:
    # Alias /webpath /full/filesystem/path
    #
    # If you include a trailing / on /webpath then the server will
    # require it to be present in the URL.  You will also likely
    # need to provide a <Directory> section to allow access to
    # the filesystem path.

    #
    # ScriptAlias: This controls which directories contain server scripts. 
    # ScriptAliases are essentially the same as Aliases, except that
    # documents in the target directory are treated as applications and
    # run by the server when requested rather than as documents sent to the
    # client.  The same rules about trailing "/" apply to ScriptAlias
    # directives as to Alias.
    #
    ScriptAlias /cgi-bin/ "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/cgi-bin/"

</IfModule>

<IfModule cgid_module>
    #
    # ScriptSock: On threaded servers, designate the path to the UNIX
    # socket used to communicate with the CGI daemon of mod_cgid.
    #
    #Scriptsock logs/cgisock
</IfModule>

#
# "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/cgi-bin" should be changed to whatever your ScriptAliased
# CGI directory exists, if you have that configured.
#
<Directory "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/cgi-bin">
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all
</Directory>

#
# DefaultType: the default MIME type the server will use for a document
# if it cannot otherwise determine one, such as from filename extensions.
# If your server contains mostly text or HTML documents, "text/plain" is
# a good value.  If most of your content is binary, such as applications
# or images, you may want to use "application/octet-stream" instead to
# keep browsers from trying to display binary files as though they are
# text.
#
DefaultType text/plain

<IfModule mime_module>
    #
    # TypesConfig points to the file containing the list of mappings from
    # filename extension to MIME-type.
    #
    TypesConfig conf/mime.types

    #
    # AddType allows you to add to or override the MIME configuration
    # file specified in TypesConfig for specific file types.
    #
    #AddType application/x-gzip .tgz
    #
    # AddEncoding allows you to have certain browsers uncompress
    # information on the fly. Note: Not all browsers support this.
    #
    #AddEncoding x-compress .Z
    #AddEncoding x-gzip .gz .tgz
    #
    # If the AddEncoding directives above are commented-out, then you
    # probably should define those extensions to indicate media types:
    #
    AddType application/x-compress .Z
    AddType application/x-gzip .gz .tgz

    #
    # AddHandler allows you to map certain file extensions to "handlers":
    # actions unrelated to filetype. These can be either built into the server
    # or added with the Action directive (see below)
    #
    # To use CGI scripts outside of ScriptAliased directories:
    # (You will also need to add "ExecCGI" to the "Options" directive.)
    #
    #AddHandler cgi-script .cgi

    # For type maps (negotiated resources):
    #AddHandler type-map var

    #
    # Filters allow you to process content before it is sent to the client.
    #
    # To parse .shtml files for server-side includes (SSI):
    # (You will also need to add "Includes" to the "Options" directive.)
    #
    #AddType text/html .shtml
    #AddOutputFilter INCLUDES .shtml

    AddType application/x-httpd-php .php 
</IfModule>

#
# The mod_mime_magic module allows the server to use various hints from the
# contents of the file itself to determine its type.  The MIMEMagicFile
# directive tells the module where the hint definitions are located.
#
#MIMEMagicFile conf/magic

#
# Customizable error responses come in three flavors:
# 1) plain text 2) local redirects 3) external redirects
#
# Some examples:
#ErrorDocument 500 "The server made a boo boo."
#ErrorDocument 404 /missing.html
#ErrorDocument 404 "/cgi-bin/missing_handler.pl"
#ErrorDocument 402 http://www.somenet.com/subscription_info.html
#

#
# MaxRanges: Maximum number of Ranges in a request before
# returning the entire resource, or one of the special
# values 'default', 'none' or 'unlimited'.
# Default setting is to accept 200 Ranges.
#MaxRanges unlimited

#
# EnableMMAP and EnableSendfile: On systems that support it, 
# memory-mapping or the sendfile syscall is used to deliver
# files.  This usually improves server performance, but must
# be turned off when serving from networked-mounted 
# filesystems or if support for these functions is otherwise
# broken on your system.
#
#EnableMMAP off
#EnableSendfile off

# Supplemental configuration
#
# The configuration files in the conf/extra/ directory can be 
# included to add extra features or to modify the default configuration of 
# the server, or you may simply copy their contents here and change as 
# necessary.

# Server-pool management (MPM specific)
#Include conf/extra/httpd-mpm.conf

# Multi-language error messages
#Include conf/extra/httpd-multilang-errordoc.conf

# Fancy directory listings
#Include conf/extra/httpd-autoindex.conf

# Language settings
#Include conf/extra/httpd-languages.conf

# User home directories
#Include conf/extra/httpd-userdir.conf

# Real-time info on requests and configuration
#Include conf/extra/httpd-info.conf

# Virtual hosts
#Include conf/extra/httpd-vhosts.conf

# Local access to the Apache HTTP Server Manual
#Include conf/extra/httpd-manual.conf

# Distributed authoring and versioning (WebDAV)
#Include conf/extra/httpd-dav.conf

# Various default settings
#Include conf/extra/httpd-default.conf

# Secure (SSL/TLS) connections
#Include conf/extra/httpd-ssl.conf
#
# Note: The following must must be present to support
#       starting without SSL on platforms with no /dev/random equivalent
#       but a statically compiled-in mod_ssl.
#
<IfModule ssl_module>
SSLRandomSeed startup builtin
SSLRandomSeed connect builtin
</IfModule>

PHPIniDir "c:/Program Files/php" 
```

和 vhosts.conf：

```
NameVirtualHost 127.0.0.1:80

<VirtualHost 127.0.0.1:80>
    DocumentRoot i:/projects/webserver/__tools/phpmyadmin/
    ServerName dbadmin.tools
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：687
> 
> 时间：2012-07-02T07:19:26.807

# 2016 年 10 月更新

4年前，由于这个答案被许多人用作参考，虽然这些年来我从安全角度学到了很多东西，但我觉得我有责任澄清一些重要的注意事项，并且我已经相应地更新了我的答案。

最初的答案是正确的，但对于某些生产环境来说并不安全，另外我想解释一下您在设置环境时可能遇到的一些问题。

**如果您正在寻找快速解决方案并且安全不是问题，即开发环境，请跳过并阅读原始答案**

许多情况会导致**403 Forbidden**：

* * *

## A. 目录索引（来自`mod_autoindex.c`）

当您访问一个目录并且在该目录中没有找到默认文件 **并且**`Options Indexes`未为此目录启用Apache时。

### A.1。`DirectoryIndex`选项示例

`DirectoryIndex index.html default.php welcome.php`

### A2。`Options Indexes`选项

如果设置，如果没有找到默认文件，apache将列出目录内容（来自上面的选项）

### 如果以上条件都不满足

您将收到**403 Forbidden**

### 建议

*   **除非真的**需要，否则不应允许目录列表。
*   将默认索引限制为`DirectoryIndex`最小。
*   如果要修改，请将修改限制为仅需要的目录，例如，使用`.htaccess`文件，或将修改放在`<Directory /my/directory>`指令中

* * *

## B.`deny,allow`指令 (Apache 2.2)

*@Radu、@Simon A. Eugster 在评论中提到* 您的请求被这些指令拒绝、列入黑名单或列入白名单。

我不会发布完整的解释，但我认为一些示例可以帮助您理解，简而言之，请记住以下规则：

**如果两者都匹配，则最后一个指令将获胜**

## `Order allow,deny`

如果两个指令都匹配，则拒绝将获胜（即使在 conf`allow`之后写了一个指令）`deny`

## `Order deny,allow`

如果两个指令都匹配，则允许将获胜

### 示例 1

```
Order allow,deny
Allow from localhost mydomain.com 
```

只有 localhost 和 *.mydomain.com 可以访问它，所有其他主机都被拒绝

### 示例 2

```
Order allow,deny
Deny from evil.com
Allow from safe.evil.com # <-- has no effect since this will be evaluated first 
```

所有请求都被拒绝，最后一行可能会欺骗您，但请记住，如果与最后一个获胜规则（这里拒绝是最后一个）都匹配，则与写入相同：

```
Order allow,deny
Allow from safe.evil.com
Deny from evil.com # <-- will override the previous one 
```

### 示例 4

```
Order deny,allow
Allow from site.com
Deny from untrusted.site.com # <-- has no effect since this will be matched by the above `Allow` directive 
```

接受来自所有主机的请求

### 示例 4：公共站点的典型示例（除非列入黑名单，否则允许）

```
Order allow,deny
Allow from all
Deny from hacker1.com
Deny from hacker2.com 
```

### 示例 5：典型的 Intranet 和安全站点（除非列入白名单，否则拒绝）

```
Order deny,allow
Deny from all
Allow from mypc.localdomain
Allow from managment.localdomain 
```

* * *

## C.`Require`指令（Apache 2.4）

Apache 2.4 使用了一个名为的新模块`mod_authz_host`

`Require all granted`=> 允许所有请求

`Require all denied`=> 拒绝所有请求

`Require host safe.com`=> 只允许来自 safe.com

* * *

## D. 文件权限

大多数人做错的一件事是配置文件权限，

黄金法则是

**未经许可开始并根据您的需要添加**

在 Linux 中：

*   目录应该有`Execute`权限

*   文件应该有`Read`权限

*   是的，你是对的 不要添加`Execute`文件权限

例如，我使用这个脚本来设置文件夹权限

```
# setting permissions for /var/www/mysite.com

# read permission ONLY for the owner 
chmod -R /var/www/mysite.com 400 

# add execute for folders only
find /var/www/mysite.com -type d -exec chmod -R u+x {} \;

# allow file uploads 
chmod -R /var/www/mysite.com/public/uploads u+w

# allow log writing to this folder
chmod -R /var/www/mysite.com/logs/ 
```

*我将此代码作为示例发布，在其他情况下设置可能会有所不同*

* * *

* * *

# 原始答案

我遇到了同样的问题，但我通过在**httpd.conf**的全局目录设置或**httpd-vhosts.conf**的特定目录块中设置**选项**指令来解决它：

 ****```
Options Indexes FollowSymLinks Includes ExecCGI 
```

默认情况下，您的全局目录设置为`(httpd.conf line ~188)`：

```
<Directory />
    Options FollowSymLinks
    AllowOverride All
    Order deny,allow
    Allow from all
</Directory> 
```

将选项设置为： `Options Indexes FollowSymLinks Includes ExecCGI`

最后，它应该如下所示：

```
<Directory />
    #Options FollowSymLinks
    Options Indexes FollowSymLinks Includes ExecCGI
    AllowOverride All
    Order deny,allow
    Allow from all
</Directory> 
```

还可以尝试更改`Order deny,allow`和换`Allow from all`行`Require all granted`。

### 附录

## 目录索引源代码（为简洁起见，删除了一些代码）

```
if (allow_opts & OPT_INDEXES) {
     return index_directory(r, d);
} else {
        const char *index_names = apr_table_get(r->notes, "dir-index-names");

        ap_log_rerror(APLOG_MARK, APLOG_ERR, 0, r, APLOGNO(01276)
                      "Cannot serve directory %s: No matching DirectoryIndex (%s) found, and "
                      "server-generated directory index forbidden by "
                      "Options directive",
                       r->filename,
                       index_names ? index_names : "none");
        return HTTP_FORBIDDEN;
    } 
```

* * *

## 回答 #2

> 赞同：193
> 
> 时间：2013-02-03T10:59:48.993

我知道这个问题已经解决，但我碰巧自己解决了同样的问题。

的原因

> Forbidden 您无权访问此服务器上的 /

实际上是 .apache 目录的默认配置`httpd.conf`。

```
#
# Each directory to which Apache has access can be configured with respect
# to which services and features are allowed and/or disabled in that
# directory (and its subdirectories). 
#
# First, we configure the "default" to be a very restrictive set of 
# features.  
#
<Directory "/">
    Options FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all          # the cause of permission denied
</Directory> 
```

只需更改`Deny from all`为即可`Allow from all`解决权限问题。

或者，更好的方法是在虚拟主机配置上指定单个目录权限。

```
<VirtualHost *:80>
    ....

    # Set access permission
    <Directory "/path/to/docroot">
        Allow from all
    </Directory>

    ....
</VirtualHost> 
```

然而，从**Apache-2.4**开始，访问控制是使用新模块完成的`mod_authz_host`（[从 2.2 升级到 2.4](http://httpd.apache.org/docs/2.4/upgrading.html)）。`Require`因此，应该使用新指令。

```
<VirtualHost *:80>
    ....

    # Set access permission
    <Directory "/path/to/docroot">
        Require all granted
    </Directory>

    ....
</VirtualHost> 
```

* * *

## 回答 #3

> 赞同：137
> 
> 时间：2013-01-31T10:28:54.487

托管在默认 /var/www/ 之外的目录的一个常见问题是 Apache 用户不仅需要对托管站点的目录和子目录的权限。Apache 需要所有目录的权限，一直到托管站点的文件系统的根目录。Apache 在安装时会自动获得分配给 /var/www/ 的权限，因此如果您的主机目录直接位于其下方，那么这不适用于您。编辑：Daybreaker 报告说他的 Apache 安装时没有对默认目录的正确访问权限。

例如，您有一台开发机器，您的站点目录是：

```
/username/home/Dropbox/myamazingsite/ 
```

你可能认为你可以逃脱：

```
chgrp -R www-data /username/home/Dropbox/myamazingsite/
chmod -R 2750 /username/home/Dropbox/myamazingsite/ 
```

因为这给了 Apache 访问您网站目录的权限？嗯，这是正确的，但这还不够。Apache 需要目录树的所有权限，因此您需要做的是：

```
chgrp -R www-data /username/
chmod -R 2750 /username/ 
```

显然，我不建议在不分析该目录结构中的内容的情况下，将生产服务器上的 Apache 访问权限授予完整的目录结构。对于生产，最好保留默认目录或其他仅用于保存 Web 资产的目录结构。

Edit2：正如 u/chimeraha 指出的那样，如果您不确定您在使用权限做什么，最好将您的站点目录移出您的主目录，以避免可能将您自己锁定在您的主目录之外。

* * *

## 回答 #4

> 赞同：66
> 
> 时间：2014-07-10T00:09:53.527

Apache 2.4 中的一些配置参数已更改。我在设置[Zend Framework 2](https://en.wikipedia.org/wiki/Zend_Framework#Requirements)应用程序时遇到了类似的问题。经过一番研究，解决方案如下：

***不正确的配置***

```
<VirtualHost *:80>
    ServerName zf2-tutorial.localhost
    DocumentRoot /path/to/zf2-tutorial/public
    SetEnv APPLICATION_ENV "development"
    <Directory /path/to/zf2-tutorial/public>
        DirectoryIndex index.php
        AllowOverride All
        Order allow,deny #<-- 2.2 config
        Allow from all #<-- 2.2 config
    </Directory>
</VirtualHost> 
```

***正确配置***

```
<VirtualHost *:80>
    ServerName zf2-tutorial.localhost
    DocumentRoot /path/to/zf2-tutorial/public
    SetEnv APPLICATION_ENV "development"
    <Directory /path/to/zf2-tutorial/public>
        DirectoryIndex index.php
        AllowOverride All
        Require all granted #<-- 2.4 New configuration
    </Directory>
</VirtualHost> 
```

如果您计划从 Apache 2.2 迁移到 2.4，这里有一个很好的参考：[http ://httpd.apache.org/docs/2.4/upgrading.html](http://httpd.apache.org/docs/2.4/upgrading.html)

* * *

## 回答 #5

> 赞同：45
> 
> 时间：2015-06-05T15:06:38.903

使用**Apache 2.2**

```
Order Deny,Allow
Allow from all 
```

使用**Apache 2.4**

```
Require all granted 
```

来自[http://httpd.apache.org/docs/2.4/en/upgrading.html](http://httpd.apache.org/docs/2.4/en/upgrading.html)

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2014-07-21T19:35:34.127

在使用**Apache 2.4的****Ubuntu 14.04**上，我执行了以下操作：

 **在文件**apache2.conf**（在 下`/etc/apache2`）中添加以下内容：

```
<Directory /home/rocky/code/documentroot/>
  Options Indexes FollowSymLinks
  AllowOverride None
  Require all granted
</Directory> 
```

并重新加载服务器：

```
sudo service apache2 reload 
```

编辑：这也适用于带有 Apache 2.4 的 OS X Yosemite。最重要的一行是

> 要求所有授予

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2013-02-27T06:53:03.730

如果您使用的是[WAMP](http://en.wikipedia.org/wiki/WAMP)服务器，请尝试以下操作：

*   单击任务栏上的 WAMP 服务器图标

*   选择上**线选项**

*   您的服务器将自动重启

*   然后尝试访问您的本地网站

* * *

## 回答 #8

> 赞同：21
> 
> 时间：2014-11-26T17:06:21.610

[如果您在SELinux](http://en.wikipedia.org/wiki/Security-Enhanced_Linux)上使用 CentOS，请尝试：

```
sudo restorecon -r /var/www/html 
```

查看更多：[https ://www.centos.org/forums/viewtopic.php?t=6834#p31548](https://www.centos.org/forums/viewtopic.php?t=6834#p31548)

* * *

## 回答 #9

> 赞同：17
> 
> 时间：2012-12-28T20:52:40.103

我通过将用户添加到`httpd.conf`.

```
# User/Group: The name (or #number) of the user/group to run httpd as.
# It is usually good practice to create a dedicated user and group for
# running httpd, as with most system services.
#
#User daemon
User my_username
Group daemon 
```

* * *

## 回答 #10

> 赞同：14
> 
> 时间：2012-06-04T13:47:00.903

这篇文章[在 Apache 2.2 上创建虚拟主机](http://foundationphp.com/tutorials/apache22_vhosts.php)帮助我（第 9 点）获得顶级虚拟主机目录的权限。

我只需将此行添加到我的 vhosts.conf 文件中：

```
<Directory I:/projects/webserver>
    Order Deny,Allow
    Allow from all
</Directory> 
```

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2012-12-18T01:58:49.413

我遇到了同样的错误，多年来一直无法解决问题。如果您碰巧在包含[SELinux](http://en.wikipedia.org/wiki/Security-Enhanced_Linux)（例如[CentOS](http://en.wikipedia.org/wiki/CentOS) ）的 Linux 发行版上，您需要确保为您的文档根文件正确设置 SELinux 权限，否则您将收到此错误。这是与标准文件系统权限完全不同的一组权限。

我碰巧使用了教程*[Apache and SELinux](http://beginlinux.com/server_training/web-server/976-apache-and-selinux)*，但是一旦你知道要寻找什么，似乎就有很多。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2014-10-06T14:51:04.053

如果您使用的是 MAMP Pro，解决此问题的方法是选中-选项卡`Indexes`下的复选框。 `Hosts``Extended`

在 MAMP Pro v3.0.3 中是这样的： ![在此处输入图像描述](../Images/f6499212a49d4193605f34f36fdd372c.png)

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2012-12-02T11:59:02.470

还有另一种方法可以解决这个问题。假设您想访问存在于的目录“subphp” `/var/www/html/subphp`，并且您想使用它访问它`127.0.0.1/subphp`并且您收到如下错误：

> 您无权访问此服务器上的 /subphp/。

然后将目录权限从“无”更改为“访问文件”。命令行用户可以使用[chmod](http://en.wikipedia.org/wiki/Chmod)命令更改权限。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2014-07-31T21:29:33.143

我有同样的问题，但由于我将 apache 上的路径更改为 var/www 之外的文件夹，我开始遇到问题。

我通过在 var/www/html > home/dev/project 中创建一个符号链接来修复它，这似乎可以解决问题，而无需更改任何权限......

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2016-08-19T01:22:24.420

我使用 Mac OS X，就我而言，我只是忘记在 apache 中启用 php，我需要做的就是取消注释其中的一行`/etc/apache2/httpd.conf`：

```
LoadModule php5_module libexec/apache2/libphp5.so 
```

有关详细信息，请参阅[本文](http://osxdaily.com/2012/09/10/enable-php-apache-mac-os-x/)。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2014-06-05T16:39:06.263

（在 Windows 和 Apache 2.2.x 中）

“禁止”错误也是未定义虚拟主机的结果。

正如 Julien 所说，如果您打算使用 virtual `hosts.conf`，请转到 httpd 文件并取消注释以下行：

```
#Include conf/extra/httpd-vhosts.conf 
```

然后添加您的虚拟主机定义`conf/extra/httpd-vhosts.conf`并重新启动 Apache。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2015-05-11T15:59:24.720

我遇到了这个问题，我的解决方案是 www-data 没有拥有正确的文件夹，而是将它设置为让其中一个用户拥有它。（我试图做一些花哨但错误的诡计来让 ftp 玩得很好。）

运行后：

```
chown -R www-data:www-data /var/www/html 
```

机器再次开始提供数据。您可以通过以下方式查看当前谁拥有该文件夹

```
ls -l /var/www/html 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2017-01-25T16:04:15.990

## *此解决方案不允许所有人*

我只想更改我的公共目录 www，并从我的 PC 和通过 Wifi 连接的移动设备访问它。我有 Ubuntu 16.04。

1.  因此，首先，我修改了**/etc/apache2/sites-enabled/000-default.conf** 并为我的新公共目录 DocumentRoot "/media/data/XAMPP/htdocs" 更改了 DocumentRoot /var/www/html 行

2.  然后我修改了/etc/apache2/apache2.conf，我把localhost的权限，和我的手机，这次我用的是IP地址，我知道它不是完全安全的，但对我的目的来说还可以。

    ```
    <Directory/>
        Options FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from localhost 10.42.0.11
    </Directory> 
    ```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2015-04-28T09:54:36.667

试试这个，不要添加任何东西`Order allow,deny`和其他东西：

```
AddHandler cgi-script .cgi .py 
ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
<Directory "/usr/lib/cgi-bin">
    AllowOverride None
    Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
    Require all granted
    Allow from all
</Directory> 
```

```
sudo a2enmod cgi
sudo service apache2 restart 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2017-10-14T03:54:15.740

```
 I changed 
    Order Deny,Allow
    Deny From All      in .htaccess to   " Require all denied "    and restarted apache but it did not help. 
```

ubuntu 中 apache2.conf 的路径是 /etc/apache2/apache.conf

然后我在 apache2.conf 中添加了以下几行，然后我的文件夹工作正常

```
 <Directory /path of required folder>
            Options Indexes FollowSymLinks
            AllowOverride All
            Require all granted
       </Directory>

   and run  " Sudo service apache2 restart " 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2018-07-16T17:34:25.830

我知道这个问题已经有几个答案，但我认为有一个非常微妙的方面，虽然提到了，但在之前的答案中没有得到足够的强调。

在检查 Apache 配置或您的文件的权限之前，让我们做一个更简单的检查，以确保组成您要访问的文件的完整路径的**每个**目录（例如文档根目录中的 index.php 文件）不仅Web 服务器用户可读但也**可执行**。

例如，假设您的文档根目录的路径是“/var/www/html”。你必须确保所有的“var”、“www”和“html”目录都可以被网络服务器用户（可读和）执行。在我的情况下（Ubuntu 16.04），我错误地将“x”标志从“html”目录中删除到“others”组，因此权限如下所示：

```
drwxr-xr-- 15 root root 4096 Jun 11 16:40 html 
```

如您所见，Web 服务器用户（在这种情况下适用“其他”权限）没有对“html”目录的*执行*访问权限，这正是问题的根源。发出后：

```
chmod o+x html 
```

命令，问题解决了！

在以这种方式解决之前，我实际上已经尝试了该线程中的所有其他建议，并且由于该建议隐藏在我几乎偶然发现的评论中，我认为在这里突出显示和扩展它可能会有所帮助。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2013-03-21T05:28:34.057

我只有一个特定的控制器有同样的问题——这真的很奇怪。我在 CI 文件夹的根目录中有一个文件夹，该文件夹与我试图访问的控制器同名......因此，CI 将请求定向到该目录而不是控制器本身。

删除此文件夹（有点错误）后，一切正常。

更清楚地说，这是它的样子：

```
/ci/controller/register.php

/ci/register/ 
```

我不得不删除`/ci/register/`.

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2014-07-18T00:56:39.167

更改配置文件后不要忘记`Restart All Services`.

我浪费了三个小时的时间。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2013-08-05T15:54:00.833

检查您放置文件的确切位置，不要将它们嵌套在 Documents 文件夹中。

例如，我犯了一个错误，将我的代码放在前面提到的 Documents 文件夹中，这是行不通的，因为 Documents 明确地只对您可用，而不是 APACHE。尝试将其上移一个目录，您可能看不到此问题。

从以下位置移动文件夹：

/用户/您的用户名/文档/代码

到这里：/Users/YOURUSERNAME/code

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2013-09-18T14:46:43.503

只是为了在我遇到这个问题时带来另一个贡献：

我配置了一个我不想配置的 VirtualHost。我已经注释掉了包含虚拟主机的行，并且它起作用了。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2015-06-25T18:06:56.467

您可以像以下代码一样更改`youralias.conf`文件：

```
Alias /Quiz/ "h:/MyServer/Quiz/" 
 <Directory "h:/MyServer/Quiz/">
   Options Indexes FollowSymLinks
   AllowOverride all
   <IfDefine APACHE24>
     Require local
   </IfDefine>
   <IfDefine !APACHE24>
    Order Deny,Allow
    Deny from all
    Allow from localhost ::1 127.0.0.1
   </IfDefine>
 </Directory> 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2016-11-10T09:55:42.590

我们启用了 modsec，检查站点的错误日志以获取 modsec ID，然后在 vhost 中输入文件的位置匹配（或者我猜是 .htaccess）：

```
 <LocationMatch "/yourlocation/index.php">
    <IfModule security2_module>
        SecRuleRemoveById XXXXXXX
    </IfModule>
</LocationMatch> 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2017-04-29T18:36:52.003

RiggsFolly 在其他地方为我回答了这个问题，简单地说：

在您的 apache conf 文件夹中编辑文件：**httpd-vhost.conf**：

在目录嵌套中添加这一行：

```
Require ip 192.168.1 
```

重新启动服务器、apache 或 Wamp 或任何你有的。

就是这样，现在您所有的 HOME 设备（在 ip 范围 192.168.1.xxx 中）都可以看到您的 PC 服务器。请注意，您只添加 ip 号的前 3 部分）。

有任何问题，请退出防火墙进行测试。

要查看您的网络设备 ip 号码，请下载适用于 PC 的“IP Scanner”软件（周围有很多免费软件）或适用于安卓的软件，从 Play 商店获取 Fing。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2016-06-08T18:17:22.323

在运行 docker build 之前，我在使用[SSHFS](https://en.wikipedia.org/wiki/SSHFS)从本地文件系统挂载 VirtualBox 来宾中的文件时遇到了这个问题。最后，“修复”是将所有文件复制到 VirtualBox 实例，而不是从 SSHFS 挂载内部构建，然后从那里运行构建。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2017-04-07T13:51:19.720

**权限错误**

像我这样的一些非常菜鸟用户在页面中设置了不正确的权限时会遇到这个问题（特别是“其他”用户没有**读取权限**）。例如，假设您尝试访问 index.html，并且您收到上述错误。要修复，请键入：

```
chmod o+r index.html 
```

然后再次上传到服务器。错误消失。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2017-04-03T20:32:48.387

只是为了在这个不断增长的列表中添加另一个潜在的问题，我的问题（运行 CentOS 6.8）是一个特定的虚拟主机，它在不同的服务器上运行良好，问题原来是使用 mod_rewrite 的错误 .htaccess 文件：

在 .htaccess 中，这导致了 403 错误： `<IfModule mod_rewrite.c> RewriteEngine On RewriteBase / </IfModule>`

添加**FollowSymLinks**作为第一行解决了这个问题： `<IfModule mod_rewrite.c> Options +FollowSymLinks RewriteEngine On RewriteBase / </IfModule>`

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2015-11-15T05:59:14.897

请记住，在这种情况下要配置的正确文件不是 phpMyAdmin 别名中的 httpd.conf，而是`bin/apache/your_version/conf/httpd.conf`.

查找以下行：

```
DocumentRoot "c:/wamp/www/"

#
# Each directory to which Apache has access can be configured with respect
# to which services and features are allowed and/or disabled in that
# directory (and its subdirectories).
#
# First, we configure the "default" to be a very restrictive set of
# features.
#
<Directory />
    Options FollowSymLinks
    AllowOverride None
    Order deny,allow
    Allow from all
</Directory> 
```

确保将其设置为`Allow from all`...

如果没有，phpMyAdmin 甚至可以工作，但不是你的根目录和它下面的其他文件夹。另外，记得重启WAMP然后上线...

这解决了我的头痛。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2016-06-25T17:39:37.803

***WORKING方法（除非没有其他问题）***

**默认情况下，Apache 不限制来自[IPv4](http://en.wikipedia.org/wiki/IPv4)（通用外部 IP 地址）的访问**

受限制的是 ' `httpd.conf`' 中给出的命令。

全部替换

```
<Directory />
    AllowOverride none
    Require all denied
</Directory> 
```

和

```
<Directory />
    AllowOverride none
    # Require all denied
</Directory> 
```

因此消除了对*Apache*的所有限制。

替换`Require local`为C `Require all granted`: */wamp/www/*目录。

```
<Directory "c:/wamp/www/">
    Options Indexes FollowSymLinks
    AllowOverride all
    Require all granted
    # Require local
</Directory> 
```

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2016-07-22T20:47:44.213

这很荒谬，但是当我尝试下载的文件不在文件系统上时，我得到了 403 Forbidden。在这种情况下，apache 错误不是很准确，并且在我简单地将文件放在它应该在的位置之后，整个事情都起作用了。******

# android - 移动应用程序开发

> ID：10873301
> 
> 赞同：3
> 
> 时间：2012-06-03T19:32:31.743
> 
> 标签：android, iphone, html, mobile, web

我最近进入了移动世界。我想开发一个将部署在多个平台上的移动应用程序。我想开发一次 - 所以我要用 html5 开发整个应用程序。我希望所有网页都在我的服务器上，并且我会不断地更改和更新它们。是否有一种工具可以为您生成一个简单的应用程序，该应用程序将包含一个 IFrame 到我的网页 - 所以它可以从几个“市场”下载。我知道我可以制作一个完全网络应用程序 - 但我需要“包装”实际应用程序。免费工具将受到欢迎 - 但如果有便宜的替代品 - 它们也受到欢迎。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:49:05.773

用于开发跨平台移动应用程序的好工具，最好的将是 [PhoneGap/Cordova](http://phonegap.com/)以及使用此工具进行开发的技术是

*   HTML5
*   CSS3
*   Javascript

使用此工具，您还可以访问该设备。它支持的平台包括

*   安卓
*   苹果手机
*   黑莓
*   塞班
*   棕榈
*   视窗手机

使用这项技术，您可以构建应用程序并部署到应用程序市场、google play 等。使用这种技术构建的流行应用程序是 Diary..Android/iphone。
PhoneGap API 支持的硬件特定功能包括：

*   地理位置
*   振动
*   加速度计
*   声音
*   通讯录
*   联系

探索更多访问[Phonegap/Cordova 的文档和演示。](http://docs.phonegap.com/en/1.7.0/index.html)它也是一个免费工具..

# ios - MPMusicPlayerController 队列问题

> ID：10873302
> 
> 赞同：1
> 
> 时间：2012-06-03T19:32:42.880
> 
> 标签：ios, mpmediaitemcollection, mpmediaplayercontroller

我的 MPMusicPlayerController 有一些问题。它是一个 iPodMusicPlayer，而不是一个 appmusicplayer。我的问题是我无法让队列以正确的顺序播放。让我进一步解释一下：

我使用 iPod 选择器选择媒体收藏，然后将其添加到音乐播放器的队列中。完成此操作后，我会在表格视图中显示集合中的项目。然后用户可以“播放”这个队列。但是，由于某种原因，当我尝试使用 ipod 控件浏览播放列表时，队列似乎顺序不正确。这是一些代码：

媒体选择器调用此方法：

```
-(void)updatePlayerQueueWithMediaCollection:(MPMediaItemCollection *)collection {

if (collection) {

    // If there's no playback queue yet...

    if (self.userMediaItemCollection == nil) {
        [self setUserMediaItemCollection: collection];
        [self.musicPlayer setQueueWithItemCollection:self.userMediaItemCollection];
    } else {
        BOOL wasPlaying = NO;
        if (self.musicPlayer.playbackState == MPMusicPlaybackStatePlaying) {
            wasPlaying = YES;
        }

        // Save the now-playing item and its current playback time.

        MPMediaItem *nowPlayingItem        = self.musicPlayer.nowPlayingItem;
        NSTimeInterval currentPlaybackTime = self.musicPlayer.currentPlaybackTime;

        // Combine the previously-existing media item collection with the new one

        NSMutableArray *combinedMediaItems =
        [[self.userMediaItemCollection items] mutableCopy];
        NSArray *newMediaItems = [collection items];
        [combinedMediaItems addObjectsFromArray: newMediaItems];

        [self setUserMediaItemCollection:[MPMediaItemCollection collectionWithItems:(NSArray *) combinedMediaItems]];

        [self.musicPlayer setQueueWithItemCollection: self.userMediaItemCollection];

        // Restore the now-playing item and its current playback time.

        self.musicPlayer.nowPlayingItem      = nowPlayingItem;
        self.musicPlayer.currentPlaybackTime = currentPlaybackTime;

        if (wasPlaying) {
            [self.musicPlayer play];
        }
    }
}
int i = 0; 
for (MPMediaItem *item in [self.userMediaItemCollection items]){
    NSLog(@"playback queue item %i has title %@",i, [item valueForKey:MPMediaItemPropertyTitle] );
    i++;
} 
```

}

很简单，这是直接取自苹果的。底部的 NSLog 会注销队列，它看起来是正确的。

从这里用户可以单击播放按钮来播放队列。我是这样设置的：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

NSIndexPath *indexPath = [self.tableView indexPathForCell:sender];

if ([segue.destinationViewController respondsToSelector:@selector(setNowPlayingItem:)]) {
    NSArray *items = [[MusicPlayerManager sharedMusicPlayer].userMediaItemCollection items];
    [segue.destinationViewController performSelector:@selector(setNowPlayingItem:) withObject:[items objectAtIndex:indexPath.row]];
}

if ([segue.destinationViewController respondsToSelector:@selector(setTrackList:)]) {
    [segue.destinationViewController performSelector:@selector(setTrackList:) withObject:[MusicPlayerManager sharedMusicPlayer].userMediaItemCollection];
    NSLog(@"tracklist from tltbvc looks like %@", [MusicPlayerManager sharedMusicPlayer].userMediaItemCollection);
} 
```

}

在目标视图控制器中，setNowPlayingItem 方法如下所示：

```
-(void) setNowPlayingItem:(MPMediaItem *)nowPlayingItem {
    _nowPlayingItem = nowPlayingItem;
    [MusicPlayerManager sharedMusicPlayer].musicPlayer.nowPlayingItem = nowPlayingItem;
    [[MusicPlayerManager sharedMusicPlayer].musicPlayer play];
    NSLog(@"index of now playing item %i", [[MusicPlayerManager sharedMusicPlayer].musicPlayer indexOfNowPlayingItem]);
} 
```

这会从 tableview 索引路径播放正确的歌曲，但由于某种原因，索引不再匹配它在表中的位置。如果行索引 0 中的歌曲是 ABC，则播放器播放 ABC，但退出不再为 0 的 indexOfNowPlayingItem。当我尝试向前和向后跳过时，队列中的顺序不再保持。我不知道是怎么回事

非常感谢任何帮助，很抱歉包含这么多代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T20:42:15.093

哇，由于某种原因，它已设置为随机播放。真丢人 这解决了一切：

```
 sharedMusicPlayer.musicPlayer.shuffleMode = MPMusicShuffleModeOff; 
```

# colorbox - 使用 colorbox 作为大型模式菜单

> ID：10873304
> 
> 赞同：0
> 
> 时间：2012-06-03T19:32:52.250
> 
> 标签：colorbox

对于客户，如果您愿意，我需要设计一个模式菜单... 一个包含两个项目的菜单栏，单击其中一个项目会打开一个模式窗口，其中包含更多链接和一个关闭按钮。我想我会调整颜色框，使用内联 HTML 选项，并在导航下方给它一个固定的位置，以达到预期的效果。但是，我确实有几个问题：

1.  有没有办法通过单击关闭按钮而不是单击页面上的任何位置来强制用户关闭颜色框？

2.  当单击其中一个链接从而打开模式窗口时，它会使页面的其余部分变暗，但是我确实需要活动菜单看起来“已启用”，我发现实现此目的的最简单方法是添加相同的 div在隐藏的 div 元素中，并将其放置在原始链接的顶部，但只需给它一个更亮的背景颜色。复制原始导航项是否是一种不必要的复杂处理方式（抱歉，如果最后一点不是很清楚）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:00:10.360

简短的回答是肯定的（我认为）。对于#1，您需要将**OverLayClose**参数设置为 false；对于#2，改变插件外观的最好方法是修改它的 CSS 样式表。您应该考虑编辑**#cboxOverlay**的规则，而不是添加更多内容。

这一切都在插件的 doc-o 中，网址为[http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

所以去吧。

# objective-c - Objective-C：“+(CCScene *)function { ... } 是什么意思？

> ID：10873307
> 
> 赞同：-1
> 
> 时间：2012-06-03T19:33:08.833
> 
> 标签：objective-c, cocos2d-iphone

> **可能重复：**
> [Objective C 中方法旁边的加号和减号是什么意思？](https://stackoverflow.com/questions/2097294/what-do-the-plus-and-minus-signs-mean-in-objective-c-next-to-a-method)

当我继续了解 iOS 时，我在`+(CCScene *)function {...}`我正在使用的示例代码的早期代码中遇到了这个问题。我知道方法是在Obj-C中用 a 实现的`-`，如下面的方法：`-(ObjectType*)function {...}`，但我很好奇，`+`在明显的函数实现之前表示什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T19:34:41.927

实例方法（或者更确切地说是 Objective-C 中的消息）以`-`. 类方法以`+`. 不同之处在于，实例消息可以发送到某个类的对象，而类消息已发送到类本身。

假设您有一个名为 Country 的类。然后您可能有一个实例消息`name`or `area`，它将返回您的 Country 实例的名称或区域。

```
NSString *name = [someCountry name];
// name could be "Germany" or "France" for instance. 
```

您可能还有一条`numberOfCountries`类消息，它将返回 Country 实例的总数。

```
int totalCount = [Country numberOfCountries]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:38:54.110

“+”表示类方法，“-”表示实例方法。因此，`+(CCScene *)function {...}`是一个类方法。

实例方法对对象进行操作并可以访问其实例变量，而类方法对整个类进行操作并且无法访问特定实例的变量（除非您将实例作为参数传入）。

有关更多信息，请参阅Stackoverflow 上的“[类与实例方法？ ”。](https://stackoverflow.com/q/1053592/)

# c# - DataReader - 返回一个可枚举/可查询的会比返回一个列表更高效吗？

> ID：10873310
> 
> 赞同：1
> 
> 时间：2012-06-03T19:33:23.233
> 
> 标签：c#, .net

如果数据读取器在接收到数据时释放数据，那么使用枚举应该允许该数据立即从数据访问函数发送回调用者。

如果我使用基于列表的方法，那么调用者将等待接收所有数据，因为必须“枚举”整个阅读器才能转换为列表。

这种理解是否正确，因此在使用数据读取器编写数据访问代码时避免使用列表返回集合*通常更快吗？*

我的意思是可能在使用读取器的数据访问函数中使用 yield return 与初始化对象列表并将对象添加到然后返回的列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:38:57.977

这是正确的。由于延迟评估，它不仅是即时的，而且还可以防止不必要的内存分配，因为您一次只处理一行。

大量数据最好留在数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:47:34.360

取决于你的意思是更快

我将其视为批量与端到端。

例如，如果您想在阅读器中显示为该行创建的实例。然后返回 IEnumerable 会给你一个机会，并且没有不幸的口吃等待你枚举的所有实例来创建。

另一个问题是您返回的任何东西的生命周期。如果它一经处理就会超出范围，那么 IEnumerable 就是要走的路，因为 List 意味着为所有这些分配内存，而 IEnumerable 一次就足够了。

另一个问题是处理一个列举的项目需要多长时间，从来没有让我觉得让读者在相当长的时间内保持开放是个好主意，我一直坚信客户的小而快与数据库的交互。

所以总的来说，我所说的方式是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T19:41:15.700

这是您在谈论的两个不同的概念；一种需要在连接模式下工作（流式方法，它将尽快返回结果），而另一种将获取结果并释放连接。我不认为更快是一个准确的术语。如果您有 N 条记录，它们不会更快地到达客户端，尤其是在需要任何额外计算的情况下。客户端可能会更快地看到*一些*结果，但可能不会看到整个列表（这可以在每个特定情况下轻松衡量），并且您必须从代码中支付额外的性能，以保持调用者同步结果（类似于并发集合）。
例如，在 Web 环境中，这是可以做到的，但是代码编写/管理和同步的成本非常高，我认为在大多数情况下不值得付出努力。

# javascript - 如何为不仅仅是文本自定义 Bootstrap 预输入布局/功能？

> ID：10873312
> 
> 赞同：14
> 
> 时间：2012-06-03T19:33:42.023
> 
> 标签：javascript, html, css, twitter-bootstrap

我正在为我的网站开发搜索功能，我正在使用 Bootstrap 的 typeahead 来显示结果。到现在为止还挺好。但我想要的是扩展功能，以便我可以添加图像和其他一些项目，比如描述等。根据这篇文章，这是可能的：[custom typeahead](https://github.com/twitter/bootstrap/issues/)。

基本上我需要这样的东西作为每个结果项：

```
<div class="resultContainer">
  <div class="resultImage"><img /></div>
  <div class="resultDesc"></div>
  <div class="resultLabel"></div>
</div> 
```

现在是：

```
<li><a href="#"></a></li> 
```

这甚至不适用于比预输入宽度更长的文本。因此文本不会转到下一行，因此不适合`<li>`. 如何使用我想要的自定义布局？（顺便说一句，我有一个结果数组。每个子数组包含 img、desc 等）。这就是我现在所拥有的： ![在此处输入图像描述](../Images/46b080a006cc98b4e5f5b78f8f07f7ac.png)

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-03T20:03:17.510

使用[`highlighter`](http://twitter.github.com/bootstrap/javascript.html#typeahead)方法：

```
$('.typeahead').typeahead({
    highlighter: function(item){
        return "<div>.......</div>";
    }
}); 
```

> 用于突出显示自动完成结果的方法。接受单个参数项并具有预先输入实例的范围。应该返回 html。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-17T16:57:55.600

mgadda 的答案巧妙地解决了如何使用自定义数据增强渲染项目的问题。不幸的是，一旦选择了一个项目，这个元数据就不再可用，因为引导程序的`select()`方法调用你`updater()`的值是从 DOM 中获取的，而不是你加载的字符串：

```
var val = this.$menu.find('.active').attr('data-value'); 
```

解决此问题的一种方法是将所需的元数据设置为 DOM 元素`highlighter()`，然后在`updater()`. 由于我们只需要一个整数，我们为图像标签本身设置一个 ID，然后在更新程序中，根据仍然可见的图像标签找到它：

```
$('.your_textboxes').typeahead({
  highlighter: function(item) {
    return('<img src="' + item.friend.img + '" id="klid_' + item.friend.id + '" />' + item);
  },
  updater: function(val) {
    var klid = $('ul.typeahead li.active:visible a img');
    if (klid && klid.length) {
      klid = klid[0].id.substr(5);
      // do stuff with metadata...
    }
    return(val);
} 
```

需要更多元数据？将荧光笔包裹在一个跨度中，或添加一些隐藏的表单字段。

不过，这感觉很笨拙。如果有人有更清洁的解决方案，我很乐意看到它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-17T22:53:25.007

Typeahead 期望从源回调传递到进程回调的所有内容都是字符串。不幸的是，这意味着您的荧光笔回调在一定程度上限制了它可以生成的 HTML 类型，因为您只能修改这么多的字符串。

但是，您可以定义您的源方法，使其返回通常的字符串对象数组，每个字符串对象都有一个额外的数据属性，其中包含在荧光笔中生成 HTML 所需的所有数据。

```
$('.typeahead').typeahead
  source: (query, processCallback)->
    $.get '/users', q: query, (data)->
      processCallback data.map (user)->
        item = new String("#{user.first_name} #{user.last_name}")
        item.data = user
        item 
```

在这种形式中，`item`将作为字符串在 typeahead 的内部传递，当它最终到达您的自定义荧光笔时，您可以使用 data 属性构建更复杂的 html：

```
$('.typeahead').typeahead
  highlighter: (item)->
    "<img src=\"#{item.data.avatar_url}\" /> #{item}" 
```

# gtk - 是否可以在 gtk 中更改框的方向？

> ID：10873321
> 
> 赞同：0
> 
> 时间：2012-06-03T19:35:07.100
> 
> 标签：gtk, vala

我做了一个类，其父类是 gtk.box in vala。不支持链接到盒子构造函数，那么，如何在构造函数中设置盒子的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T00:54:20.473

虽然调用`this.set_orientation (Gtk.Orientation.VERTICAL)`可能有效，但更正确的方法是`orientation`在构造时设置属性，就像 Gtk.Box 默认构造函数一样。在 Vala，你会做这样的事情：

```
public class MyBox : Gtk.Box {
  public MyBox () {
    GLib.Object (orientation: Gtk.Orientation.VERTICAL);
  }
} 
```

在 C 级别，这与仅仅调用有点不同`set_orientation`......它会生成有点像这样的东西（为了清楚起见进行了简化）：

```
MyBox* my_box_new () {
  return g_object_new (GTK_TYPE_BOX, "orientation", GTK_ORIENTATION_VERTICAL, NULL);
} 
```

另一方面，调用`set_orientation`（或设置属性）会生成如下内容：`orientation`

```
MyBox* my_box_new () {
  MyBox* self = g_object_new (GTK_TYPE_BOX, NULL);
  gtk_box_set_orientation (GTK_BOX(self), GTK_ORIENTATION_VERTICAL);
  return self;
} 
```

不同之处在于，对于第一个版本，方向将*在*实例化期间正确设置（换句话说，在每个祖先类的构造块期间），而对于第二个版本，对象将首先以错误的方向创建，然后方向会改变。我不确定这种差异对 Gtk.Box 是否重要，但在某些情况下它非常重要，因此养成以正确方式进行操作的习惯可能是个好主意。

如果您不确定我所说的“构造块”是什么意思，请查看 Vala Tutorial on [GObject-Style Construction](https://live.gnome.org/Vala/Tutorial#GObject-Style_Construction)中的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T21:24:05.520

```
set_orientation(Orientation.VERTICAL); 
```

# testing - rspec - 重定向到 Group.last 去错误的记录

> ID：10873330
> 
> 赞同：0
> 
> 时间：2012-06-03T19:36:28.580
> 
> 标签：testing, rspec, rspec2, factory-bot

39 次测试通过，但 1 次失败。

> ```
> Expected response to be a redirect to <http://test.host/groups/11> 
> but was a redirect to <http://test.host/groups/12> 
> ```

我创建了一条新记录并尝试重定向到`show`它，但我是一条“关闭”记录。

看起来可能有点缓存/重新加载问题？

我的 rspec 测试：

```
describe "POST #create" do

  ...

  context "with valid attributes" do
    it "creates a new group" do
      expect{
        post :create, group: FactoryGirl.attributes_for(:group)
      }.to change(Group,:count).by(1)
    end

    it "redirects to the new group" do
      post :create, group: FactoryGirl.attributes_for(:group)
      response.should redirect_to Group.last
    end
  end

  ... 
```

我的代码：

```
 # POST /groups
  # POST /groups.xml
  def create
    @group = Group.new(params[:group])

    respond_to do |format|
      if @group.save
        flash[:notice] = 'Group was successfully created.'
        format.html { redirect_to(@group) }
        format.xml  { render :xml => @group, :status => :created, :location => @group }
      else
        format.html { render :action => "new" }
        format.xml  { render :xml => @group.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

结果：

计数发生变化（测试通过），但直接敌人是**最后一条**记录，即我得到：

```
 Failure/Error: response.should redirect_to Group.last
   Expected response to be a redirect to <http://test.host/groups/11> 
   but was a redirect to <http://test.host/groups/12> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T21:23:39.763

答案是模型（组）按组名排序作为默认范围。

修复只是`Group.unscoped.last`在测试中使用！

# python - 在 python 中转义 HTML。应用引擎

> ID：10873331
> 
> 赞同：1
> 
> 时间：2012-06-03T19:36:44.493
> 
> 标签：python, google-app-engine, jinja2

> **可能重复：**
> [将 html 传递给模板](https://stackoverflow.com/questions/3206344/passing-html-to-template)

我正在使用 jinja2 模板。我使用它的**自动转义**功能来转义所有用户输入。但我正在创建 wiki，所以对于 wiki 页面的内容，我不想逃避用户输入。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T19:39:30.147

将内容标记为安全：

```
{{ content|safe }} 
```

从[文档](http://jinja.pocoo.org/docs/templates/#working-with-automatic-escaping)：

> **使用自动转义**
> 
> 启用自动转义后，默认情况下所有内容都会被转义，但明确标记为安全的值除外。这些可以由应用程序标记，也可以使用`|safe`过滤器在模板中标记。

# java - Scanner 如何在运行时抛出异常？

> ID：10873332
> 
> 赞同：-3
> 
> 时间：2012-06-03T19:36:47.403
> 
> 标签：java, exception, exception-handling, java.util.scanner

比如哪些错误会导致 Scanner 抛出异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T19:41:25.717

`Scanner`可以抛出属于该类后代的异常`RuntimeException`。

例如，调用方法`NoSuchElementException`时会抛出一个，`nextLine()`并且没有下一行。请阅读文档[`java.util.Scanner`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)

# java - Java速度与内存占用“较量”

> ID：10873334
> 
> 赞同：3
> 
> 时间：2012-06-03T19:36:52.017
> 
> 标签：java

我有一个关于 Java 的一般性问题。

什么是更好的？

情况1：

```
a = method1(7);
b = method2(a);
c = method3(b); 
```

或者

```
c = method3(method2(method1(7))); 
```

案例2：

```
String a = method1(1);
String b = method2(2);
String c = method3(3);
String d = a+b+c; 
```

或者

```
String d = method1(1)+method2(2)+method3(3); 
```

我想知道在速度方面什么会更好......我猜第二种方式（两种方式）在内存占用方面更好，但我一直想知道一个是否比另一个更快，或者它们是否需要相同的时间来执行. 我正在编写一个多次调用相同函数的程序，所以每一毫秒都很重要！

如果他们可以在其他类别中竞争（除了速度等），也告诉我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T19:40:17.057

执行速度不会有明显差异。将临时变量用于中间结果的代码之间的唯一区别是您可以在调试器中看到中间值。此外，如果在调用目标函数后没有使用中间变量的值，编译器很有可能会优化这些变量，生成相同的字节码。

# android - Android 应用内计费购买虚拟商品的可用性流程

> ID：10873340
> 
> 赞同：4
> 
> 时间：2012-06-03T19:37:30.133
> 
> 标签：android, in-app-purchase, in-app-billing

我刚刚为他们的应用内计费下载了 Android 示例，但我不明白他们希望我如何创建用户流。我有几篇文章想在我的应用程序中设置为高级。

我应该在文章上设置一个按钮并在上面写上“Article_name .99”之类的内容，然后在他们点击后将其带到付款屏幕吗？如果他们已经为这篇文章付费，我该如何监控呢？

或者我应该把他们带到我的应用程序的“购买”屏幕，让他们选择他们要购买的东西并确认？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T06:17:55.043

首先，请务必阅读并理解有关[应用内计费的大量开发指南文章](http://developer.android.com/guide/market/billing/index.html)。

其次，您可以使用您认为最合适的任何流程。您描述的流程似乎适合您的情况：免费文章具有“免费”或“阅读”按钮且高级文章具有价格的文章列表，单击付费文章的价格会打开计费窗口引导他们完成购买流程，然后在成功购买后转到文章。

您可以有一个单独的付费内容区域，或者您可以使用订阅，这样用户可以按月或按年付费访问所有高级内容。应用内计费支持所有这些。没有“正确”的方式，只有您作为开发人员认为最适合您的应用程序的方式。

最后，您应该使用所谓的“托管”购买类型，其中购买与用户的 Google 帐户相关联并由 Google 记住。您仍然应该让应用程序自行存储它并允许用户查看他们购买的文章。但是在托管模式下，如果用户卸载然后重新安装您的应用程序，或者如果他们在另一台设备上安装该应用程序，您的应用程序可以查询 Google 的服务器以获取过去的购买记录，并允许用户查看他们已经购买的高级文章。

# java - 如果/否则未正确处理？（爪哇）

> ID：10873341
> 
> 赞同：0
> 
> 时间：2012-06-03T19:37:50.927
> 
> 标签：java, if-statement

这是代码。

```
import java.lang.reflect.*;

class Invoke {
    public static void main(String[] args) {
        int ret;

        if (args.length<2) {
            System.out.println("Usage: Invoke <class> <method>");
            return;
        }

        if (args.length == 2) {
                ret = 2
        } else {
            System.out.println("Additional parameters not yet supported.");
            return;
        }

        System.out.println("Results: " + ret);
    }
} 
```

问题是，即使我用类似的东西运行程序......

`java -cp Invoke;HelloJava4 Invoke HelloJava4 param1 param2 param3`

...它仍然将“param1 param2 param3”识别为一个参数。注意：我的系统的类路径设置为`C:\JavaSource`，所以`-cp Invoke;HelloJava4`让它在 Invoke 和 HelloJava4 目录中搜索 Invoke.class 和 HelloJava4.class

如果我这样做`System.out.println(args.length);`，它将输出给定的正确数量的参数，但是当我使用以下`if`语句检查它时，它运行`if`代码块，而不是`else`代码块。

```
if (args.length == 2) {
    ret = 2
} else {
    System.out.println("Additional parameters not supported yet.");
    return;
} 
```

是什么赋予了？：使困惑：

这是未经编辑的完整代码：

```
import java.lang.reflect.*;

class Invoke {
    public static void main(String[] args) {
        Object ret;

        for (String arg : args)
            System.out.println(arg);

        System.out.println("Count: " + args.length + " \n");

        if (args.length<2) {
            System.out.println("Usage: Invoke <class> <method>");
            return;
        }

        try {
            Class theClass = Class.forName(args[0]);

            Method theMethod = theClass.getMethod(args[1]);
            if (args.length == 2) {
                System.out.println("Invoking method " + args[1] + " within class " + args[0]);
                ret = theMethod.invoke(null);
            } else {
                // pass parameters to .invoke() if more than two args are given
                // for now, just exit...

                System.out.println("Parameter passing not yet supported.");
                return;
            }

            System.out.println("Invoked static method: " + args[1] 
            + " of class: " + args[0]
            + " with no args\nResults: " + ret);
        } catch (ClassNotFoundException e) {
            System.out.println("Class (" + args[0] + ") not found.");
        } catch (NoSuchMethodException e2) {
            System.out.println("Class (" + args[0] + ") found, but method does not exist.");
        } catch (IllegalAccessException e3) {       
            System.out.println("Class (" + args[0] + ") and method found, but method is not accessible.");
        } catch (InvocationTargetException e4) {
            System.out.println("Method threw exception: " + e4.getTargetException() );
        }
    }
} 
```

这是它给出的确切输出：

```
C:\JavaSource>cd invoke

C:\JavaSource>javac invoke.java
Note: invoke.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.

C:\JavaSource>cd ..

C:\JavaSource>java -cp Invoke;HelloJava4 Invoke HelloJava4 param1 param2 p
aram3
HelloJava4
param1
param2
param3
Count: 4

Class (HelloJava4) found, but method does not exist. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T20:23:00.440

在您未经编辑的代码中，从这一行抛出异常。

```
Method theMethod = theClass.getMethod(args[1]); 
```

它甚至没有达到参数数量的 if/else 条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T19:49:05.313

> java -cp Invoke;HelloJava4 调用 HelloJava4 参数 1 参数 2 参数 3

那是不对的。我不知道您使用什么操作系统或什么外壳来执行该行。

我不认为：

> -cp 调用；HelloJava4

是正确的。（我之所以这么说是因为您遇到了不可重现的问题。）

要进行验证，请执行您提供给我们的代码片段，而不使用任何 -cp 或 -classpath。

编辑：如果我们假设 -cp 参数是正确的。这意味着 jvm 从类路径中的目录 Invoke 和 HelloJava4 启动（-cp/-classpath 覆盖指定类路径的环境变量），jvm 将在目录 Invoke 和 HelloJava4 中查找 Invoke 类。这意味着您可能正在执行另一个类，而不是您认为的。

您的示例代码位于默认包中。只需转到源文件所在的目录并执行：

```
javac Invoke.java
java -cp . Invoke param1 param2 param3 [...] 
```

（重点说当前目录在类路径中......）

你应该会看到不同的结果。

# html - 如何在 JEditorPane 中提取 html 标记中的内容并将其附加到另一个 JEditorPane 的？

> ID：10873342
> 
> 赞同：1
> 
> 时间：2012-06-03T19:38:06.607
> 
> 标签：html, string, append, extract, jeditorpane

我有 2 个 JEditorPane。我想从一个 JEditorPane 的正文中获取文本并将其附加到另一个 JEditorPane。使用 .getText() 从第一个 JEditorPane 打印输出是：

```
<html>
  <head>

  </head>
  <body>
    Here is some <b>bold text</b>
  </body>
</html> 
```

我想在正文中获取整个字符串，包括粗体标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T15:27:41.310

```
String out = outgoingMsg.getText().replaceAll("</*html>|</*head>|</*body>|\n|\r", "");
    out = out.trim(); 
```

这将删除 html、head、body 开始和结束标记以及不必要的新行和前导和尾随空格。

# layout - Capabilities.screenDPI：在模拟器上正确，在设备上错误

> ID：10873352
> 
> 赞同：1
> 
> 时间：2012-06-03T19:39:21.583
> 
> 标签：layout, actionscript, flex-mobile, multiscreen

我正在制作我的应用程序多屏（flex 移动）。基本上我想知道我什么时候使用平板电脑或智能手机。因此我想知道以英寸为单位的屏幕尺寸。我在 Desire HD（4.3 英寸）上对此进行了测试。我的问题是：当我使用 Capabilities.screenDPI 时，模拟器显示正确的值（217），但是当我在我的设备上运行它时，它给了我一个错误的 DPI 值（240），宽度和高度是正确的。基于该 dpi，我得到了错误的屏幕尺寸（3.887 英寸！= 4.3 英寸）。再次在模拟器上一切正常。设备模拟器配置了正确的值，只有当我在真实设备（没有模拟器）上运行它时，我得到一个错误的 DPI 值。

我正在使用以下代码进行计算：

```
var screenX:Number = stage.stageWidth;
var screenY:Number = stage.stageHeight;
var pixels:Number = (screenX*screenX) + (screenY*screenY);
var screenSize:Number = Math.sqrt(pixels)/Capabilities.screenDPI;

return (screenSize >= 6) ? "tablet" : "phone" 
```

为了节省您的时间，我将给出 Desire HD 的值：

> 480 x 800 像素，4.3 英寸（~217 ppi 像素密度）

使用的公式很简单 ~ 毕达哥拉斯：a2 + b2 = c2 -> sqrt(c)/dpi = 以英寸为单位的屏幕尺寸。

基于 Adob​​e，DPI 或 PPI 值可以“互换”使用。（[Adobe，帮助](http://help.adobe.com/en_US/flex/mobileapps/WS19f279b149e7481c682e5a9412cf5976c17-8000.html)）。我没有找到任何关于 dpi 值与 ppi 值不同的信息，或者在 flex 中是否有可能使用 ppi 属性的任何信息。

所以在我的真实设备上我得到：

> 480 x 800 像素，3.89" (~240 dpi)。

**另一个注意事项：** 我已经看到 flex mobile 中有 3 个默认常量。可能是直接扔进其中之一吗？（我不怀疑，因为我直接调用 Capabilities.screenDPI）。

```
DPIClassification.DPI_160
DPIClassification.DPI_240
DPIClassification.DPI_320 
```

**我的意思是：如何确定它是平板电脑还是手机（以便切换到另一种布局）？你不能走这`applicationDPI`条路，因为它与三星 Galaxy S3 (1280x720, 319 PPI) 或 Apple iPad 3 (2048×1536, 264 PPI) 等新设备混在一起。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T08:55:08.127

要在模拟器模式下检测屏幕大小，您可以这样使用 SystemManager 对象：

```
var root:DisplayObject = SystemManager.getSWFRoot(this); // this is any object of the application not only display object
screenX = root.stage.fullScreenWidth;
screenY = root.stage.fullScreenHeight; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:00:13.460

我知道这是一个旧线程，但我想你们会想知道我是如何处理它的——我终于把它修好了。

```
protected function resizeHandler(event:ResizeEvent):void
            {
                var screenX:Number = Capabilities.screenResolutionX;
                var screenY:Number = Capabilities.screenResolutionY;
                var osType:String = Capabilities.os;
                var limitNumber:Number = 960;
                var pixelCheck:Number = screenX * screenY;
                var pixels:Number = (screenX*screenX) + (screenY*screenY);
                var screenSize:Number = Math.sqrt(pixels)/Capabilities.screenDPI;

                isPortrait = height > width;
                //isTablet = screenX > limitNumber || screenY > limitNumber;
                isTablet = screenSize >= 6;
                var isDesktop:Boolean = height > limitNumber || width > limitNumber;

                if (osType.toUpperCase() == "WINDOWS 7"){
                    this.currentState = (isPortrait ? "portrait" : "landscape") + (isDesktop ? "Tablet" : "Phone");
                }else {
                    this.currentState = (isPortrait ? "portrait" : "landscape") + (isTablet ? "Tablet" : "Phone");
                }

                //DEBUGGING CODE BELOW

                debugger.text = "screen X: " + screenX.toString() + " screen Y: " + screenY.toString() + "\n pixels: " + pixels.toString() + "\n screenSize: " + screenSize.toString() + "\n capabilities.screenDPI: " + Capabilities.screenDPI.toString() + "\n current state: " + this.currentState + /*"\n IsDesktop: " + isDesktop.toString() + */ " IsTablet: " + isTablet.toString() + "\n OS Type" + osType;

                //currentState = (isPortrait ? "portrait" : "landscape") + (isTablet ? "Tablet" : "Phone");

            } 
```

从上面的代码可以看出，我正在处理两种不同的情况。1 - 当我在本地 PC 上使用模拟器时，系统总是认为我处于平板电脑模式（因为它为我的显示器的屏幕 X 和屏幕 Y 值返回非常大的值）。所以我用 isDesktop 标志来处理它。

然后，我使用屏幕尺寸值来给我平板电脑和手机。目前（2013 年 2 月）没有屏幕尺寸低于 6 的平板电脑，也没有高于它的手机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T20:08:41.500

Flex [applicationDPI](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/Application.html#applicationDPI)属性将返回 160（对于大多数平板电脑）、240（对于大多数智能手机）和 320（对于 iPhone 4/4S）。

这是为了让开发人员的生活“更轻松”而发生的事情。为设备的特定 DPI 构建的任何东西都可能无法很好地扩展到其他设备/平台。我认为这三个值之一的 applicationDPI 是 Fl​​ex 的事情，但 Flex 完全有可能只是从 AIR 继承它。

归根结底，我认为没有任何方法可以使用 DPI 值来确定您的应用程序是在平板电脑还是手机上运行。因为我上面指定的值不是通用的。这有点像猜谜游戏。

我很惊讶这在模拟器中完全有效，我希望返回的值是来自您的计算机显示器的值，而不是智能手机应该是的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T21:03:17.933

你可以尝试类似的东西

```
var isItATablet:Boolean = screenHeight > 960 || screenWidth > 960;
var isItReallyATablet:Boolean = isTablet && screenDPI >= 240; // I think this doesn't work as is, but you get the idea.. 
```

如果屏幕高度或宽度大于 960 像素并且 DPI 较低，则可能您使用的是平板电脑。

这不是 100% 准确的，还没有测试过，但是在 2 个设备上，只是尝试使用不同的设备，看看它是否在大多数情况下猜测设备的类型

# java - Java JPanel 坐标系

> ID：10873355
> 
> 赞同：-1
> 
> 时间：2012-06-03T19:39:48.503
> 
> 标签：java, window, coordinates, jlabel

我无法显示此 JLabel，其中包含特定坐标 (40,80) 处的图像。谁能告诉我我在这里做错了什么？

```
import java.awt.Image;
import java.awt.Toolkit;
import javax.swing.*;

public class Window extends JFrame{
//the pictures
JLabel guy = new JLabel(new ImageIcon("tester.gif"));
JPanel panel = new JPanel();

Window(){

    super("WindowTitleThing");
    setSize(700,600);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    guy.setAlignmentX(40);
    guy.setAlignmentY(80);

    add(panel);
    panel.add(guy);

    setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:46:30.433

这不是 setAlignmentX 和 setAlignmentY 的工作方式或它们的用途。它们获得 0.0f、0.5f 或 1.0f 的浮点值，以帮助容纳组件的容器决定放置它的位置。请阅读这些方法的 API。

无论如何，与其根据硬编码的数字放置组件，从长远来看，您会发现使用布局管理器会更好，并让它们设置组件的首选大小和位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:47:44.707

我没有看到您在代码中的某处设置了 JPanel 的布局管理器。当您使用 Swing 时，每个容器都有一个 LayoutManager 来处理在相应容器上放置组件（请参阅[http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)了解如何使用布局管理器）。

如果您想将组件放置在固定坐标处，就像您的情况一样，您应该在 JPanel 上设置绝对布局：

```
panel.setLayout(null); 
```

然后您可以使用 setBounds 方法放置要添加的组件：

```
guy.setBounds(x,y,width,length); 
```

虽然我会为更大的 UI 使用布局管理器。

# iphone - iPhone - 创建触发方法

> ID：10873357
> 
> 赞同：0
> 
> 时间：2012-06-03T19:39:58.470
> 
> 标签：iphone, ios, ipad

我正在从头开始创建我的自定义控件。像 UIScrollView 一样，我必须有一个在控件开始滑动时触发的委托方法，例如 scrollViewDidScroll。

我想在 touchesMoved 中调用一次，检查每一次移动的变化，但我做了一些类似测试的事情，它非常昂贵并且让 touchesMoved 变慢。

第二种方法是创建一个 NSTimer，每 x 毫秒触发一个方法，以查看控件是否在另一个位置，然后触发该方法，但我不确定，因为 if 将不断检查控件，即使消耗 CPU控制不动。

最好的方法是什么？你们会怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:50:47.483

也许计时器方法是正确的，如果您要计算弹跳和减速，我建议您在触摸开始时启动计时器并在触摸结束或触摸结束后 3-4 秒停止它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:47:33.857

我真的认为您不应该重新发明轮子并从头开始编写自定义控件。子类 UIControl。它有3种方法

```
- (BOOL)beginTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event
- (BOOL)continueTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event
- (void)endTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event 
```

您可以在其中执行检查并解雇您的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T19:51:37.897

您可以使用 UIGestureControl 代替 touchesMoved: ，创建您的委托方法并将您的 didScroll: 方法传递给委托

# javascript - 如何使用jQuery获取选定/活动选项卡的href？

> ID：10873363
> 
> 赞同：2
> 
> 时间：2012-06-03T19:40:39.280
> 
> 标签：javascript, jquery

我有以下 HTML 代码：

```
 <div id="filter-bar">
        <ul>
            <li><a href="#image" class="current"><?php _e('Image','sofa'); ?></a></li>
            <li><a href="#text"><?php _e('Text','sofa'); ?></a></li>
            <li><a href="#video"><?php _e('Video','sofa'); ?></a></li>
        </ul>
    </div> 
```

如何获取具有当前类的列表的 href 值？例如，我怎样才能让它返回`image`？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T19:41:45.140

您可以使用`attr`or`prop`方法：

```
$("#filter-bar .current").attr("href"); 
```

或者

```
$("#filter-bar .current").prop("href"); 
```

`href`您可以通过以下方式获得没有哈希`#`符号的“纯” ：

```
var href = $("#filter-bar .current").attr("href");
href = href.substring(href.indexOf("#") + 1); 
```

**演示：http:** [//jsfiddle.net/BJd7p/](http://jsfiddle.net/BJd7p/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:41:56.970

使用它来获取href，没有`#`它将`image`用于您的标记，这就是您想要的

```
$('#filter-bar a.current').attr('href').split('#')[1]; 
```

阅读[$.attr](http://api.jquery.com/attr/)

[工作小提琴](http://jsfiddle.net/joycse06/kaNt2/)

# python - shutil.rmtree() 说明

> ID：10873364
> 
> 赞同：55
> 
> 时间：2012-06-03T19:40:43.777
> 
> 标签：python, python-2.7, shutil

我已阅读此功能的文档，但是，我认为我没有正确理解它。如果有人可以告诉我我缺少什么，或者我是正确的，那将是一个很大的帮助。以下是我的理解：

使用该`shutil.rmtree(path)`函数，它只会删除指定的目录，而不是整个路径。IE：

`shutil.rmtree('user/tester/noob')`

使用这个，它只会删除'noob'目录对吗？不是完整的路径？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-06-03T20:01:00.467

如果 noob 是一个目录，该`shutil.rmtree()`函数将删除`noob`它下面的所有文件和子目录。也就是说，`noob`是要移除的树的根。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-06-03T19:58:46.693

这肯定只会删除指定路径中的最后一个目录。试试看：

```
mkdir -p foo/bar
python
import shutil
shutil.rmtree('foo/bar') 
```

...只会删除`'bar'`.

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-11-11T09:31:25.067

这里有一些误解。

想象一棵这样的树：

```
 - user
   - tester
     - noob
   - developer
     - guru 
```

如果你想删除`user`，就这样做`shutil.rmtree('user')`。这也将删除`user/tester`，`user/tester/noob`因为它们在里面`user`。但是，它也会删除`user/developer`and `user/developer/guru`，因为它们也在里面`user`。

如果`rmtree('user/tester/noob')`会删除`user`and `tester`，如果消失了，你的意思是如何`user/developer`存在`user`？

* * *

还是您的意思是[http://docs.python.org/2/library/os.html#os.removedirs](http://docs.python.org/2/library/os.html#os.removedirs)之类的？

它尝试删除每个已删除目录的父目录，直到由于目录不为空而失败。所以在我的示例树中，`os.removedirs('user/tester/noob')`会先删除`noob`，然后它会尝试删除`tester`，这没关系，因为它是空的，但它会停止`user`并让它不理会，因为它包含`developer`我们不想删除的 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-05T11:23:13.000

```
**For Force deletion using rmtree command in Python:**

[user@severname DFI]$ python
Python 2.7.13 (default, Aug  4 2017, 17:56:03)
[GCC 4.4.7 20120313 (Red Hat 4.4.7-18)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import shutil
>>> shutil.rmtree('user/tester/noob')

But what if the file is not existing, it will throw below error:

>>> shutil.rmtree('user/tester/noob')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/shutil.py", line 239, in rmtree
    onerror(os.listdir, path, sys.exc_info())
  File "/usr/local/lib/python2.7/shutil.py", line 237, in rmtree
    names = os.listdir(path)
OSError: [Errno 2] No such file or directory: 'user/tester/noob'
>>>

**To fix this, use "ignore_errors=True" as below, this will delete the folder at the given if found or do nothing if not found**

>>> shutil.rmtree('user/tester/noob', ignore_errors=True)
>>>

Hope this helps people who are looking for force  folder deletion using rmtree. 
```

# c# - 有 asp.net 小提琴吗？

> ID：10873367
> 
> 赞同：61
> 
> 时间：2012-06-03T19:40:54.883
> 
> 标签：c#, asp.net, .net, asp.net-mvc

类似于[jsfiddle](http://jsfiddle.net)，有没有一个asp.net fiddle 网站供我们分享asp.net code fiddles？它将极大地帮助 asp.net 开发人员。当前在 SO 上发布 asp.net 代码的方式对读者不太友好。我希望有一些东西可以让这更容易。如果没有类似的东西（因为我做了一些搜索但找不到）。由于 c# 不是后期绑定语言，这在技术上是否可以开发。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-06-03T19:53:00.447

~~您可以使用 compilr.com 之类的网站，但是，它需要付费帐户（截至 2013 年 6 月）才能创建项目，但人们可以匿名查看。这很整洁。~~（*编译器关闭*）

~~示例： [http ://compilr.com/cravecode/test-share/main.cs](http://compilr.com/cravecode/test-share/main.cs)~~

## ~~更新 1~~

~~我还会[查看 coderun.com/ide](http://www.coderun.com/ide/)~~（不再可用）

## 更新 2

检查具有上下文菜单的[dotnetfiddle.net](http://dotnetfiddle.net)（由@wulfbane 指出）。

## 更新 3 (2017-03-19)

保持答案更新，我现在使用：

*   [https://csharppad.com](https://csharppad.com)
*   [http://rextester.com](http://rextester.com) **（有一个非常简洁的协作功能）**
*   [https://dotnetfiddle.net](https://dotnetfiddle.net)

您可能还想检查[Ideone](http://ideone.com)（没有上下文菜单）

# python - Ruby 的 VCR 库是否有 python 替代品？

> ID：10873368
> 
> 赞同：21
> 
> 时间：2012-06-03T19:41:06.520
> 
> 标签：python, testing, integration-testing, vcr

我想使用[Ruby 的 VCR 库](https://github.com/myronmarston/vcr)或[JVM 的 Betamax](http://freeside.co/betamax/)的令人敬畏的“记录/播放”机制。是否有以相同方式工作的 Python 库？如果不是，您如何测试您的 REST 客户端调用，而不用担心测试缓慢且不稳定？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-04T00:39:29.453

过去几年开发了一个名为[VCR.py的 VCR 的 Python 端口。](https://github.com/kevin1024/vcrpy)

如果您已经知道如何使用 VCR 并且对它感到满意，您还可以考虑运行本地 ruby​​ 代理服务器（使用类似 rack 之类的东西）并将 VCR 加载到其中。然后你可以测试任何语言的代码......只要确保 HTTP 请求是通过你的本地服务器代理的。这是[VCR 的机架中间件](https://www.relishapp.com/myronmarston/vcr/v/2-2-0/docs/middleware/rack)的主要用途之一。我以前用它来测试非 ruby​​ 代码，效果很好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-08-01T06:11:39.357

betamax和[VCR.py](http://betamax.readthedocs.io/en/latest/)[都已](https://github.com/kevin1024/vcrpy)在其他答案中提出。我想指出一个差异，它可能决定你可以使用哪一个。

Betamax 期望您在为测试设置它时传递一个预先创建的[requests.Session对象。](http://docs.python-requests.org/en/master/user/advanced/#session-objects)这意味着会话对象必须来自测试内部，而不是来自被测代码。从文档中：

```
with Betamax(self.session) as vcr:
    vcr.use_cassette('user')
    resp = self.session.get('https://api.github.com/user',
                            auth=('user', 'pass'))
    assert resp.json()['login'] is not None 
```

就我而言，会话对象是在我需要测试的代码中创建的。在这种情况下，betamax 是毫无疑问的。

另一方面，VCR.py 在较低级别修补了 Python 的 HTTP 堆栈，因此可以完美运行：

```
import requests
import vcr

def my_func():
    session = requests.Session()
    response = session.get('https://stackoverflow.com/')
    print(response.text[:200])

def test_my_func():
    with vcr.use_cassette('/tmp/cassette.yaml'):
        my_func() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-27T08:51:53.707

还有一个用于 python 的[betamax](http://betamax.readthedocs.io/en/latest/)，我会全心全意地推荐。

# ruby - 了解红宝石奎因

> ID：10873379
> 
> 赞同：6
> 
> 时间：2012-06-03T19:42:05.913
> 
> 标签：ruby, heredoc, quine

我在 Wikipedia 上找到了这个代码块作为 Ruby 中 quine（打印自身的程序）的示例。

```
puts <<2*2,2
puts <<2*2,2
2 
```

但是，我不明白它是如何工作的。特别是，我没有得到的是，当我删除最后一行时，我收到了这个错误：

> 语法错误，意外 $end，需要 tSTRING_CONTENT 或 tSTRING_DBEG 或 tSTRING_DVAR 或 tSTRING_END

这些行会发生什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T19:49:35.567

`<<something`语法以*here-document*开头，通过 Perl 从 UNIX shell 借用 - 它基本上是一个多行字符串文字，从 the 之后的`<<`行开始，以 . 开头的行结束`something`。

所以在结构上，程序就是这样做的：

```
puts str*2,2 
```

...也就是说，打印两份`str`后跟数字 2。

但它不是变量`str`，而是通过一个此处文档包含一个文字字符串，其结尾标记也是数字 2：

```
puts <<2*2,2
puts <<2*2,2
2 
```

所以它打印出字符串的两个副本`puts <<2*2,2`，然后是一个 2。（并且由于用于打印它们的方法是`puts`，所以这些内容中的每一个都会自动附加一个换行符。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T19:46:09.530

在 ruby​​ 中，您可以定义字符串

```
str = <<DELIMITER
  long string
  on several
  lines
DELIMITER 
```

我想从这里，你可以猜到其余的:)

# c# - 获取日期与星期几

> ID：10873380
> 
> 赞同：1
> 
> 时间：2012-06-03T19:42:16.480
> 
> 标签：c#, asp.net

我有什么：

```
<%# ((DateTime)Eval("StartDate")).ToShortDateString() %> 
```

我需要什么输出：

> 星期六，2012 年 6 月 28 日

用于获取此内容的正确格式字符串是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T19:46:11.683

试试这个：

```
<%# ((DateTime)Eval("StartDate")).ToString("dddd, MM/dd/yyyy") %> 
```

链接以供进一步参考：[自定义时间和日期格式](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T20:43:39.377

[微软在MSDN](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)上很好地解释了这一点：

```
<%# ((DateTime)Eval("StartDate")).ToString("dddd, MM/dd/yyyy") %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T19:46:57.663

试用`"dddd, MM/dd/yyyy"`

请参阅MSDN 上的[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

# c++ - 将字符串写入和读取到二进制文件 C++

> ID：10873382
> 
> 赞同：11
> 
> 时间：2012-06-03T19:42:45.287
> 
> 标签：c++, string, file, malloc

我在将字符串写入二进制文件时遇到问题。这是我的代码：

```
ofstream outfile("myfile.txt", ofstream::binary);
std::string text = "Text";
outfile.write((char*) &text, sizeof (string));
outfile.close(); 
```

然后，我尝试阅读它，

```
char* buffer = (char*) malloc(sizeof(string));
ifstream infile("myfile.txt", ifstream::binary);    
infile.read(buffer, sizeof (prueba));
std::string* elem = (string*) buffer;
cout << *elem;
infile.close(); 
```

我只是无法让它工作。对不起，我只是绝望。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-05-04T19:03:12.190

要将 std::string 写入二进制文件，您需要先保存字符串长度：

```
std::string str("whatever");
size_t size=str.size();
outfile.write(&size,sizeof(size));
outfile.write(&str[0],size); 
```

要读入它，请反转该过程，首先调整字符串的大小，以便您有足够的空间：

```
std::string str;
size_t size;
infile.read(&size, sizeof(size));
str.resize(size);
infile.read(&str[0], size); 
```

因为字符串具有可变大小，除非您将该大小放入文件中，否则您将无法正确检索它。您可以依赖保证在 c-string 或等效 string::c_str() 调用末尾的 '\0' 标记，但这不是一个好主意，因为

1.  您必须逐个字符地读取字符串字符以检查 null
2.  std::string 可以合法地包含一个空字节（尽管它确实不应该，因为对 c_str() 的调用会令人困惑）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-03T19:51:46.640

线

```
outfile.write((char*) &text, sizeof (string)); 
```

是不正确的

`sizeof(string)`不返回字符串的长度，它返回字符串类型的大小（以字节为单位）。

也不要将文本转换为`char*`使用 C 转换，您可以通过使用适当的成员函数来获取 char*`text.c_str()`

你可以简单地写

```
outfile << text; 
```

反而。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-03T19:52:46.310

*   你为什么使用指向`std::string`类的指针？
*   您不应该使用`sizeof`with `std::string`，因为它返回`std::string`对象的大小，而不是内部字符串的实际大小。

你应该试试：

```
string text = "Text";
outfile.write(text.c_str(), text.size()); 
```

或者

```
outfile << text; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T19:49:04.800

可能也应该`c_str()`用来获取 char 指针，而不是那种直接的疯狂演员。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-22T11:18:36.593

我有同样的问题。我在这里找到了完美的答案：[Write file in binary format](https://stackoverflow.com/questions/43602649/write-file-in-binary-format/43602935#43602935)

关键问题：在写出时使用 string::length 获取字符串的长度，在读取字符串之前使用 resize()。对于阅读和写作，使用 mystring.c_str() 代替字符串本身。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-21T13:21:58.797

您的代码错误 您用于写入和读取文件的方式错误 文件扩展名错误 您正在尝试读取文本文件`.txt` 正确代码

**写入文件**

```
std::string text = "Text";
ofstream outfile("myfile.dat", ofstream::binary | ios::out);
outfile.write(&text,sizeof (string));//can take type
outfile.write(&text,sizeof (text));//can take variable name
outfile.close(); 
```

**读取文件**

```
char* buffer = (char*) malloc(sizeof(string));
ifstream infile("myfile.dat", ifstream::binary | ios::in);    
infile.read(buffer, sizeof (prueba));
std::string* elem = (string*) buffer;
cout << *elem;
infile.close(); 
```

试试这个它会工作

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-25T05:07:56.577

试试这个代码片段。

```
/* writing string into a binary file */

  fstream ifs;
  ifs.open ("c:/filename.exe", fstream::binary | fstream::in | fstream::out);

  if (ifs.is_open())
  {
   ifs.write("string to binary", strlen("string to binary")); 
   ifs.close();
  } 
```

[这](http://cplus.about.com/od/learning1/ss/random_2.htm)是一个很好的例子。

# ios - CALayer 性能不佳？

> ID：10873392
> 
> 赞同：2
> 
> 时间：2012-06-03T19:44:07.953
> 
> 标签：ios, performance, calayer, lag

我已经为这个问题苦苦挣扎了好几个星期了。无论如何，CALayer的很糟糕。它们会造成如此多的延迟，让我的 UI 看起来更糟。

几乎我有一个简单的 UITableView，我已经最大限度地提高了效率，滚动时的所有延迟都来自 3 行代码：

```
CALayer *imageLayer2 = [cell.imageView layer];
[imageLayer2 setMasksToBounds:YES];
[imageLayer2 setCornerRadius:10.0]; 
```

我试图将 setMaskToBounds 设置为 NO，但是没有圆角应用于我的 UIImageView。出于某种奇怪的原因，iPad 上的这个问题似乎比 iPhone 上的更糟，但我现在只能坚持寻找解决方法。此代码也在我的 cellForRowAtIndexPath 中，但仅在需要新单元格时才执行，因此并不总是调用它。

无论如何，你建议我做什么而不是使用 CALayers 来摆脱这种滞后？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:41:58.530

我认为这里的问题是因为每次`cellForRowAtIndex`调用时你都在这样做。我的建议是，已经使用蒙版和圆角半径存储图像，当您再次真正需要时，您要求模型检索图像而不是再次计算它。,`cellForRowAtIndex`是一个明智的选择，您应该避免在其中进行昂贵的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T03:40:59.233

我发现如果你使用 UIImage 的 CGImageRef，它比直接使用 UIImage 快得多。

试试这个：

```
CALayer *imageLayer2.contents = (id)[cell.imageView image].CGImage;
[imageLayer2 setMasksToBounds:YES];
[imageLayer2 setCornerRadius:10.0]; 
```

Although I would actually get rid of the ImageView completely and just deal with CALayers and UIImages (Assuming you don't care about accessibility)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T19:57:30.433

好吧，如果您愿意弄乱图像本身，则可以将其设为圆形，然后按原样使用，要将矩形图像更新为圆形矩形，请查看此答案 [如何将方形图像掩蔽成图像iPhone SDK中的圆角？](https://stackoverflow.com/questions/996292/how-to-mask-a-square-image-into-an-image-with-round-corners-in-the-iphone-sdk)

# c++ - SetPixel 函数 [C++]

> ID：10873394
> 
> 赞同：0
> 
> 时间：2012-06-03T19:44:15.137
> 
> 标签：c++, pixel

为什么当我调用 SetPixel 函数在 iTunes 中设置像素时，它确实向我显示了该特定应用程序中的像素（就像它应该的那样），而在为 Windows Media Player 调用相同的函数时它根本不显示。此外，此功能似乎也不适用于全屏窗口。为什么会有这种巨大的多样性？任何解释将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T20:01:32.330

如前所述，很容易得不到你期望的结果，因为它不是你的窗口，你最终无法控制它的作用！

*您可以*做的两件事（一件显然比另一件更好）是：

*   用于`GetDC (NULL)`获取屏幕设备上下文的句柄。用于[`ClientToScreen`](http://msdn.microsoft.com/en-us/library/ms928584)计算像素在屏幕上的位置。`SetPixel`用那个手柄打电话。不过，这将很快得到解决。

*   使用适当的颜色键创建您自己的顶层、弹出式、透明（对消息）、分层窗口。用于[`ClientToScreen`](http://msdn.microsoft.com/en-us/library/ms928584)计算屏幕的位置，并可能[`ScreenToClient`](http://msdn.microsoft.com/en-us/library/ms932582)确保它正确进入您的窗口（理论上应该与屏幕具有相同的客户端尺寸）。将像素绘制到您的窗口上，您将控制它何时离开。

如果使用第二个，您的扩展窗口样式应该是：

```
WS_EX_TOPMOST | WS_EX_TRANSPARENT | WS_EX_LAYERED 
```

并且您的正常窗口样式应该是：

```
WS_POPUP | WS_VISIBLE 
```

可以使用[`GetSystemMetrics`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724385%28v=vs.85%29.aspx)值`SM_CXSCREEN`和找到尺寸`SM_CYSCREEN`。

要设置颜色键，请使用[`SetLayeredWindowAttributes`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633540%28v=vs.85%29.aspx)：

```
SetLayeredWindowAttributes (hwnd, RGB (red, green, blue), 0, LWA_COLORKEY); 
```

其中`red`、`green`和`blue`构成窗口的背景颜色，并且永远不应显示为实际颜色。这样你的背景就不会被绘制，给用户带来不明显的差异，但是当任何东西被绘制时，它就会出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T20:07:39.497

在控件上绘图应在控件的 WM_PAINT 处理程序中完成。由于它不是您的控制，因此您无法直接访问消息循环。这意味着，如果控件无效，您的像素将消失。

经常播放视频或更新其内容的应用程序将使每一帧的控件无效。这迫使控件更新得非常快。

我认为透明覆盖窗口是这里的唯一方法。除非您可以连接到消息循环并在控件处理后对 WM_PAINT 处理程序做出反应......

# php - PHP检查用户是否查看了特定页面

> ID：10873396
> 
> 赞同：3
> 
> 时间：2012-06-03T19:45:35.420
> 
> 标签：php, mysql

我目前正在用 PHP 构建 Web 应用程序，客户端希望在其中登录用户。将存在层次结构，因此新用户不会拥有更高定位用户的特权。特权用户将能够发布文章和文件供用户查看。

这是我的问题：管理员或特权用户如何检查谁查看了文章或下载了文件。这可以通过 PHP 实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:49:11.617

当然这是可能的，但你很可能不会开箱即用。您需要存储任何给定用户服务器端的访问历史记录。您可以通过简单地将用户 ID、URL 和时间存储在数据库中的单独表中来做到这一点。类似于以下内容：

```
 5 | '/filedownload.php?file=cake-instructions.php' | 2012-02-15 08:23:11
 8 | '/company-information'                         | 2012-02-15 08:15:01 
```

每当用户访问 url 时，您将他们的 id、该 url 和当前时间存储在数据库中。如果管理员想要执行查询以查看谁在何时查看了什么内容，那么他​​们就可以很容易地访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T20:01:45.893

假设您有一个名为 的表`Article`，您可以在该表中存储一个变量，比如说`nr_of_views`。每次用户查看文章/页面时，获取文章的 id 并增加`nr_of_views`变量。类似的东西。

# magento - 清理 Magento Modman 符号链接

> ID：10873397
> 
> 赞同：5
> 
> 时间：2012-06-03T19:45:35.760
> 
> 标签：magento

我使用 modman 弄乱了我的 Magento 安装，现在我有数百个未使用的符号链接分散在源代码中。

如何删除这些符号链接并进行清理？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T19:50:38.463

如果您只想删除所有符号链接，请从 Web 根目录运行以下命令：

```
 find . -type l -exec rm {} \; 
```

如果您想删除所有符号链接并让 modman 仅重新创建应该存在的符号链接，那么：

```
modman repair 
```

# javascript - 将构造函数从单独的文件加载到 Chrome 扩展选项页面

> ID：10873402
> 
> 赞同：1
> 
> 时间：2012-06-03T19:46:46.050
> 
> 标签：javascript, google-chrome-extension

我正在制作一个带有选项页面的 Chrome 扩展程序（在我的清单中声明）。我在一个单独的文件中有一个像这样定义的对象：

```
function MyObject() {
    …
} 
```

我使用“导出”它：

```
window.MyExtension = {};
window.MyExtension.MyObject = MyObject; 
```

然后我可以使用以下方法在我的扩展主文件中构造其他对象：

```
new MyExtension.MyObject(); 
```

它工作正常。

但我想在我的选项页面中使用这个对象。我看到脚本没有加载，所以我尝试创建一个脚本标签并将其附加到正文中。因为我可以看到 console.log() 输出，所以脚本被执行，但我无法在我的选项页面中使用“new MyObject”构造一个对象。我怀疑这是因为沙盒或类似的东西，脚本中定义 MyObject 的窗口对象不应该与我的选项页面中的相同。

但是我怎么能得到对 MyObject 的引用呢？但是，我可以复制粘贴我需要的代码并且它会工作，但是 DRY 呢……我不敢相信没有好的方法可以做到这一点。

希望我解释得很好。谢谢，

cGuille.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T19:55:24.940

不要使用 包含它`chrome.extension.getURL()`，因为您的选项页面*在*您的扩展程序中。像这样做：

```
<script src="myscript.js"></script> 
```

这应该有效。;)

# php - PHP写入文件不写入文件

> ID：10873407
> 
> 赞同：2
> 
> 时间：2012-06-03T19:47:28.017
> 
> 标签：php

我希望我的 php 文件将一些文本写入我创建的文本文件，但没有写入任何内容。

这是代码：

```
<?php
    error_reporting(E_ALL);
    ini_set('display_errors', '1');

    if (isset($_POST['comment']))
    {
        $comment = $_POST['comment'];

        $myFile = "testFile.txt";
        $fh = fopen($myFile, 'w') or die("can't open file");
        $stringData = $comment;
        fwrite($fh, $stringData);
        fclose($fh);
    }
    else
    {
        $comment = 'no comment';

        $myFile = "testFile.txt";
        $fh = fopen($myFile, 'w') or die("can't open file");
        $stringData = $comment;
        fwrite($fh, $stringData);
        fclose($fh);
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T19:58:37.807

检查文件权限。

如果这是问题，请尝试更改权限：

```
chmod("testFile.txt", 0644); 
```

# c# - 第二次点击时从客户端检测到潜在危险的 Request.Form 值

> ID：10873414
> 
> 赞同：1
> 
> 时间：2012-06-03T19:47:39.293
> 
> 标签：c#, linq-to-xml

当我在页面最初加载后执行以下代码时，我没有收到错误，但是当我更改下拉列表的值`ddlMode`并再次执行时，我收到错误：

`A potentially dangerous Request.Form value was detected from the client (txtXML="<Root...").`

我做了 SecurityElement.Escape 并修复了它，但它显示了转义的 XML，我不想像这样显示它。这是按钮单击事件中的相关代码：

```
XElement xml = new XElement("Root",
                    new XAttribute("T", "Test"),
                    new XAttribute("S", ddlMode.SelectedValue),
                    new XAttribute("E", Guid.NewGuid().ToString()),
                    new XAttribute("F", DateTime.Now.ToLongTimeString()),
                    new XElement("HRS",
                        new XElement("HR",
                            new XElement("RP"),
                            new XElement("RSS",
                                new XElement("RS",
                                    new XElement("PN",
                                        new XElement("GV", txtFirstName.Text),
                                        new XElement("SN", txtLastName.Text)))))));

            txtXML.Text = xml.ToString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T01:10:41.217

假设 ddlMode 将 AutoPostback 设置为 true。你最好做

```
txtXML.Text = HttpUtility.HtmlEncode(xml.ToString()); 
```

这将正确编码诸如被解释为恶意标记的左右尖括号之类的内容。

# linux - 如何在当前或另一个终端窗口中获 取 at 命令的输出

> ID：10873417
> 
> 赞同：2
> 
> 时间：2012-06-03T19:47:52.937
> 
> 标签：linux, io

我正在尝试使用 Linux`at`命令，但似乎我可以看到输出的唯一方法是将其重定向到文件，如下所示：

```
# at now + 1 minute
warning: commands will be executed using /bin/sh
at> date > afile.txt
at> <EOT> 
```

这可以按预期工作，但是有没有办法让命令（`date`在本例中）在终端屏幕上打印输出或打开另一个并在那里输出而不是文件？

我基本上是在尝试安排诸如同步和构建之类的事情。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-03T19:52:15.790

```
$ tty
/dev/pts/9
$ at now + 1 minute
at> date | tee /dev/pts/9
at> <EOT>
$ dim. juin  3 21:51:00 CEST 2012 
```

或者打开一个新终端：

```
$ at now + 1 minute
at> DISPLAY=:0 /usr/bin/xterm -hold -e 'date'
at> <EOT> 
```

或使用`zenity`对话框：

```
$ at now + 1 minute
at> DISPLAY=:0 /usr/bin/zenity --info --text "$(date)"
at> <EOT> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T19:53:33.837

而不是`... > afile.txt at>`使用`> /dev/stdout 2> /dev/stderr`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-29T14:28:36.830

使用`tty`每个终端中的命令来识别它们：

```
$ tty
/dev/pts/0

$ tty
/dev/pts/1 
```

假设这些 TTY，要将第一个的标准输出重定向到第二个，请在第一个终端中运行：

```
exec 1>/dev/pts/1 
```

> 注意：现在**每个命令输出**都将显示在 pts/1

要恢复 pts/0 的默认行为标准输出：

```
exec 1>/dev/pts/0 
```

请参阅[此视频](https://www.youtube.com/watch?v=hqVQxehmfuo)进行演示。

# debugging - 如何获取程序当前功能？

> ID：10873419
> 
> 赞同：-1
> 
> 时间：2012-06-03T19:48:33.367
> 
> 标签：debugging, assembly, ollydbg

是否可以在汇编中使用 ollydbg 调试器程序来查找正在执行的程序当前函数？

这样做的原因是因为我创建的应用程序在特定时间以 70% 的计算机使用率运行，我想看看为什么会这样以及它做了什么来获得计算机使用率

我知道我可以使用源调试器，这会更容易，但在这种情况下，不幸的是我不能，需要使用像 ollydbg 这样的调试器来解决这个问题，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T17:33:15.690

正如之前的评论之一所提到的，这对于分析器（例如 Intel 的 VTune、AMD CodeAnalyst 或 Visual Studio 的分析工具）来说确实是一项更好的工作。

但是，如果您仍然希望在 OllyDbg 中找到源代码，使用调试符号正确编译的可执行文件将在主反汇编区域下方显示执行代码行。

![带有调试符号的可执行文件的 OllyDbg 源代码显示](../Images/351efa766095dce10cf848d96f278b81.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-03T06:31:35.293

取决于，如果您的代码是已编译的代码（.exe）以找到您需要使用调试信息编译它的确切功能，例如 GCC 编译器 -g 选项

完成此操作后，您可以使用 GDB 读取您编写的确切代码并`list`在加载程序后调试它的输入

例子：

```
gcc -g test test.c
gdb -q ./test
[...]
(gdb) list 
```

# java - Java：在循环路径中移动标签

> ID：10873420
> 
> 赞同：2
> 
> 时间：2012-06-03T19:48:35.040
> 
> 标签：java, image, swing, jlabel, trigonometry

我正在编写一个类似精灵的模拟，我需要在圆形路径中移动带有图像的标签。我有4个起点；西、北、东和南。标签应以顺时针方向移动。

这是我写的，效果很好，除了南北位置逆时针旋转。原因是，我使用了单独的三角公式来处理方向 2 和 4。

```
 int xstart = 450 
    int ystart = 325;
    int h = 0;
    double theta = -0.1047;

    for (int p = 0;; p++)
    {
        int xocir = xstart;
        int yocir = ystart;
        int pocir = 0; // perpendicular and base of outer circle
        int bocir = 0;

        if (direction == 1)//west - clockwise
        {
            pocir = (int) (Math.cos(theta) * (h + 300));
            bocir = (int) (Math.sin(theta) * (h + 300));
        }
        else if (direction == 2)//north - counter-clockwise
        {
            pocir = (int) (Math.sin(theta) * (h + 300));//reversed sin,cos
            bocir = (int) (Math.cos(theta) * (h + 300));
        }
        else if (direction == 3)//east - clockwise
        {
            pocir = (int) (Math.cos(theta) * (h - 300));
            bocir = (int) (Math.sin(theta) * (h - 300));
        }
        else if (direction == 4)//south - counter-clockwise
        {
            pocir = (int) (Math.sin(theta) * (h - 300));
            bocir = (int) (Math.cos(theta) * (h - 300));
        }

        xocir = xocir - pocir;
        yocir = yocir - bocir;
        theta = theta - 0.005;

        setBounds(xocir, yocir, 65, 65);
            } 
```

有没有更有效的方法来解决这个问题？也许是一个更简单的触发方法。我能做些什么来确保所有的运动都是顺时针的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T20:04:43.117

只需使用顺时针 if 语句之一，而不是根据方向使用不同的方程。起始位置由 theta 的初始值和使用的参数方程控制。

设
*x* = `circleCenterX - (int) (Math.sin(theta) * radius)`,
*y* = `circleCenterY - (int) (Math.cos(theta) * radius)`,
`circleCenterX`= 450,
`circleCenterY`= 325 和
`radius`= 300。

```
If theta = 0 deg, then
(x,y) = (450 - sin(0) * 300, 325 - cos(0) * 300)
      = (450, 25) which is north of (450, 325)

If theta = 90 deg, then
(x,y) = (450 - sin(90) * 300, 325 - cos(90) * 300)
      = (150, 325) which is west of (450, 325)

If theta = 180 deg, then
(x,y) = (450 - sin(180) * 300, 325 - cos(180) * 300)
      = (450, 625) which is south of (450, 325)

If theta = 270 deg, then
(x,y) = (450 - sin(270) * 300, 325 - cos(270) * 300)
      = (750, 325) which is east of (450, 325) 
```

下面的类封装了这个想法：

```
import java.awt.Dimension;
import java.util.Timer;
import java.util.TimerTask;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

public class RotatingLabel extends JLabel {
    private static final long serialVersionUID = 474652899660954020L;
    private final int circleCenterX;
    private final int circleCenterY;
    private final int radius;
    private double theta;
    private final double thetaIncrement;

    public RotatingLabel(String text, //
            int circleCenterX, int circleCenterY, int radius, //
            double initialTheta, double thetaIncrement) {
        super(text);
        this.circleCenterX = circleCenterX;
        this.circleCenterY = circleCenterY;
        this.radius = radius;
        this.theta = initialTheta;
        this.thetaIncrement = thetaIncrement;
        rotate();
    }

    public void rotate() {
        setBounds( //
                this.circleCenterX - (int) (Math.sin(this.theta) * this.radius), //
                this.circleCenterY - (int) (Math.cos(this.theta) * this.radius), //
                (int) getPreferredSize().getWidth(), (int) getPreferredSize().getHeight());
        this.theta -= this.thetaIncrement;
    }

    public static void main(String[] args) {
        double initialTheta = Math.toRadians(0); // start north
        // double initialTheta = Math.toRadians(90); // start west
        // double initialTheta = Math.toRadians(180); // start south
        // double initialTheta = Math.toRadians(270); // start east

        final RotatingLabel label = new RotatingLabel("Foo Bar", //
                450, // circleCenterX
                325, // circleCenterY
                300, // radius
                initialTheta, //
                0.005); // thetaIncrement

        JFrame frame = new JFrame();
        frame.setSize(new Dimension(800, 700));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(label);
        frame.setVisible(true);

        Timer timer = new Timer();
        timer.scheduleAtFixedRate(new TimerTask() {
            @Override
            public void run() {
                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        label.rotate();
                    }
                });
            }
        }, 0, 1000l / 60l); // 60 frames per second
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T20:37:05.460

同样，只需对所有象限使用一个方程。例如，这段代码显示了 4 个 JLabel，每个象限一个（每个从其邻居旋转 Math.PI/2），并且使用相同的方程来旋转*所有*标签：

```
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;

public class RotateLabels extends JPanel{
   private static final int PREF_W = 600;
   private static final int PREF_H = PREF_W;
   private static final int TIMER_DELAY = 30;
   protected static final double DELTA_THETA = Math.PI / 120;
   private JLabel[] labels = new JLabel[4];
   private double theta = -Math.PI / 4.0;

   public RotateLabels() {
      setLayout(null);
      for (int i = 0; i < labels.length; i++) {
         labels[i] = new JLabel("Label " + (i + 1));
         labels[i].setSize(labels[i].getPreferredSize());
         add(labels[i]);
      }
      setAllLabelLocations();
      new Timer(TIMER_DELAY, new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            theta += DELTA_THETA;
            setAllLabelLocations();
         }
      }).start();
   }

   private void setAllLabelLocations() {
      for (int i = 0; i < labels.length; i++) {
         setLabelLocation(labels[i], i);
      }
      repaint();
   }

   private void setLabelLocation(JLabel label, int i) {
      double radius = PREF_W / 3.0;
      int w = label.getWidth();
      int h = label.getHeight();

      double angle = theta + i * Math.PI / 2.0;
      double centerX = radius * Math.cos(angle);
      double centerY = radius * Math.sin(angle);

      int x = (int)(centerX - w / 2.0) + PREF_W / 2;
      int y = (int)(centerY - h / 2.0) + PREF_H / 2;
      label.setLocation(x, y);
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   private static void createAndShowGui() {
      JFrame frame = new JFrame("Rotate");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(new RotateLabels());
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

请注意，此代码效率不高。如果我要“真正地”创建这个，我可能会创建一个位置查找表，以避免在程序运行期间发生的所有浮点计算。

或更一般地说：

```
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.*;

@SuppressWarnings("serial")
public class RotateLabels2 extends JPanel{
   private static final int PREF_W = 600;
   private static final int PREF_H = PREF_W;
   private static final int TIMER_DELAY = 10;
   protected static final double DELTA_THETA = Math.PI / 420;
   private static final int LABEL_COUNT = 12;
   private JLabel[] labels = new JLabel[LABEL_COUNT];
   private double theta = -Math.PI / 4.0;

   public RotateLabels2() {
      setLayout(null);
      for (int i = 0; i < labels.length; i++) {
         labels[i] = new JLabel("Label " + (i + 1));
         labels[i].setSize(labels[i].getPreferredSize());
         add(labels[i]);
      }
      setAllLabelLocations();
      new Timer(TIMER_DELAY, new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            theta += DELTA_THETA;
            setAllLabelLocations();
         }
      }).start();
   }

   private void setAllLabelLocations() {
      for (int i = 0; i < labels.length; i++) {
         setLabelLocation(labels[i], i);
      }
      repaint();
   }

   private void setLabelLocation(JLabel label, int i) {
      double radius = PREF_W / 3.0;
      int w = label.getWidth();
      int h = label.getHeight();

      double angle = theta + i * 2 * Math.PI / labels.length;
      double centerX = radius * Math.cos(angle);
      double centerY = radius * Math.sin(angle);

      int x = (int)(centerX - w / 2.0) + PREF_W / 2;
      int y = (int)(centerY - h / 2.0) + PREF_H / 2;
      label.setLocation(x, y);
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   private static void createAndShowGui() {
      JFrame frame = new JFrame("Rotate");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(new RotateLabels2());
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# javascript - 关于用户列表连接/断开聊天的处理

> ID：10873421
> 
> 赞同：0
> 
> 时间：2012-06-03T19:48:47.867
> 
> 标签：javascript, html, listbox, chat

对不起满口标题！

基本上，我现在正在编写一些代码，其中包括一个聊天室。我想知道如何最好地处理加入和离开的人。

我正在使用 HTML 和 Javascript 执行此操作，并且想知道当有人离开或加入时，将整个更新的人员列表发送给其他所有人，或者只发送加入或离开的人的姓名是否“更好”。

基本上，假设某人离开了一个 10 人的聊天室。（房间通常有 10 人或更少的人）。服务器将更新后的 9 人列表发送给所有其他客户端并从列表框中删除所有项目并重新填充它是更明智的做法，还是应该向每个人发送一条消息说“此人加入/离开”然后每个客户都可以相应地更新他们的用户列表框。

据我所知，在 Javascript 中，您不能只转到列表框中的项目并将其删除。您必须遍历整个列表框，并在找到所需的项目后将其删除。在这种情况下，我想在我的情况下，发送整个更新列表可能会更好，因为一个房间里通常不会超过 10 人，而且更安全，用户不会因为陌生而彼此不同步连接问题。真的是这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T20:00:58.300

这个决定完全依赖于实现。

从基本的角度来看，发送一个完整的列表更加防弹，以保持列表的一致性，以及更容易维护和实施。

仅将更改发送到客户端的浏览器将在两端提供更少的带宽使用，并且如果实施得当就足够了。

但是，如果带宽不是问题并且您的项目是中小型项目，我会选择第一个选项，它更容易实施和维护 - 除非您正在寻找挑战或制作应用程序对于**大量**用户，然后选择第二个选项。

最终，决定取决于程序员的良心。

**编辑：**由于这与代码没有直接关系，也许这个问题更适合[程序员](https://softwareengineering.stackexchange.com/)？

# wordpress - 自定义页面网址

> ID：10873431
> 
> 赞同：0
> 
> 时间：2012-06-03T19:49:47.640
> 
> 标签：wordpress

我正在转换一个旧网站，使用 CMS 之类的 Wordpress。

我正在创建页面，但所有页面都是在`http://domain/page-permalink`其上创建的，我需要它`http://domain/category/page-permalink`

页面不能包含类别，所以我不知道如何克隆旧的 URL 结构。

有办法吗？我需要创建页面的 URL，`category/page-permalink`因为我需要“类别”来显示特定的菜单和图像。

我可以为每个类别页面使用不同的模板，但仍然需要使用包含该类别的个性化 URL。

有任何想法吗 ？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:05:09.970

如果您配置[漂亮的永久链接](http://codex.wordpress.org/Using_Permalinks)，它将允许您自定义永久链接结构。这是我在我的 URL 中放置子目录的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T20:00:45.800

可以向您的页面添加自定义分类。

这将在页面上注册分类，将此代码放在 after_setup_theme add_action 中的函数中：

```
register_taxonomy('pagecats',array (
  0 => 'page',
),array( 'hierarchical' => true, 'label' => 'Page Categories','show_ui' => true,'query_var' => true,'rewrite' => true,'singular_label' => 'Page Category') ); 
```

# c# - 无法让 AspNetCacheProfile 在 WCF 4.0 服务中工作

> ID：10873432
> 
> 赞同：4
> 
> 时间：2012-06-03T19:49:50.947
> 
> 标签：c#, wcf, c#-4.0, caching

我在 .svc 文件中使用以下代码创建了一个非常基本的 WCF 服务应用程序：

```
using System.Collections.Generic;
using System.ServiceModel;
using System.ServiceModel.Activation;
using System.ServiceModel.Web;

namespace NamesService
{
    [ServiceContract]
    [ServiceBehavior(InstanceContextMode=InstanceContextMode.Single)]
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class NamesService
    {
        List<string> Names = new List<string>();

        [OperationContract]
        [AspNetCacheProfile("CacheFor60Seconds")]
        [WebGet(UriTemplate="")]
        public List<string> GetAll()
        {
            return Names;
        }

        [OperationContract]
        public void Save(string name)
        {
            Names.Add(name);
        }
    }
 } 
```

web.config 看起来像这样：

```
<?xml version="1.0"?>
<configuration>
<system.web>
    <compilation debug="true" targetFramework="4.0" />
</system.web>
<system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior>
                <serviceMetadata httpGetEnabled="true"/>
                <serviceDebug includeExceptionDetailInFaults="false"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="true" />
</system.serviceModel>
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer>
<system.web>
    <caching>
        <outputCache enableOutputCache="true"/>
        <outputCacheSettings>
            <outputCacheProfiles>
                <add name="CacheFor60Seconds" location="Server" duration="60" varyByParam="" />
            </outputCacheProfiles>
        </outputCacheSettings>
    </caching>
</system.web> 
```

如您所见，GetAll 方法已使用 AspNetCacheProfile 进行修饰，并且 cacheProfileName 指的是 web.config 的“ChacheFor60Seconds”部分。

我在 WCF 测试客户端中运行以下序列：

1) 使用参数“Fred”调用 Save

2) Call GetAll -> "Fred" 按预期返回。

3) 使用参数“Bob”调用 Save

4) 调用 GetAll -> 这次返回“Fred”和“Bob”。

我期望在第二次调用 GetAll 时只返回“Fred”，因为它应该返回步骤 (2) 中的缓存结果。

我无法弄清楚问题是什么，所以请提供一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T22:15:02.877

您正在尝试缓存没有任何参数的完整结果，因此您的设置应该是

```
 <outputCacheSettings>
    <outputCacheProfiles>
        <add name="CacheFor60Seconds" location="Server" duration="60"
        varyByParam="none" />
    </outputCacheProfiles>
 </outputCacheSettings> 
```

**编辑：**

```
[OperationContract]
[AspNetCacheProfile("CacheFor60Seconds")]
[WebGet]
public List<string> GetAll()
{
    return Names;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T12:24:48.847

您的`web.config`配置文件有一个双节`<system.web>`，尝试合并它们。

# prolog - Prolog数独前。高水平

> ID：10873434
> 
> 赞同：0
> 
> 时间：2012-06-03T19:49:59.970
> 
> 标签：prolog, sudoku

写数独求解器的学校作业。我已将问题分解为几个步骤。“main”函数的代码如下。至于每个单独的步骤，它们都有效，但我想知道如何将列表中的未绑定变量与我计算的数字统一起来。然后，我希望通过此列表以在下次通话中使用。如果问题不完全清楚，请告诉我，我会详细说明。谢谢

代码：

我知道下面的代码是错误的，因为我认为我只是通过了我原来的数独列表。数独列表是列表的列表，例如

```
 [[1,_,_,8,_,4,_,_,_],
  [_,2,_,_,_,_,4,5,6],
  [_,_,3,2,_,5,_,_,_],
  [_,_,_,4,_,_,8,_,5],
  [7,8,9,_,5,_,_,_,_],
  [_,_,_,_,_,6,2,_,3],
  [8,_,1,_,_,_,7,_,_],
  [_,_,_,1,2,3,_,8,_],
  [2,_,5,_,_,_,_,_,9]] 
```

代码：

```
fill(List) :- 
    findVar(V,List,0,X,Y,Sub), % Find a variable to bind
    difference([1,2,3,4,5,6,7,8,9],Sub,Choices), % Find numbers not yet in row
    random(Choices,N), % Select random number from available numbers
    V = N,
    check(List,X,Y), % Check for correctness
    fill(List). 
```

# java - 无法在“/usr/bin/java/bin/java”中找到可执行文件 (-1)

> ID：10873437
> 
> 赞同：69
> 
> 时间：2012-06-03T19:50:39.400
> 
> 标签：java, macos, javac

我的 mac osx 10.7.3 中的 Java 有一个可悲的问题。以前我安装了它，它工作正常。随着时间的推移对 .bash_profile 和 .profile 文件进行了一些更改后，我遇到了类似的错误

```
Unable to locate an executable at "/usr/bin/java/bin/java" 
```

每当我尝试在终端中运行“javac”或“java”时。

`echo $PATH`给出如下输出：

```
/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/Users/sabya/Documents/Play_Framework/play-2.0:/usr/X11/bin:/usr/local/git/bin:/usr/local/mysql/bin 
```

我的 .bash_profile 看起来像：

```
alias start_mysql="/Library/StartupItems/MySQLCOM/MySQLCOM start"
alias stop_mysql="/Library/StartupItems/MySQLCOM/MySQLCOM stop"
export JAVA_HOME=/usr/bin/java 
```

的输出`which java`

```
/usr/bin/java 
```

它困扰了我很长时间，卸载和安装 java 并没有帮助我的运气。

我是 Mac 的新手，需要帮助来解决这个问题。

在发布这个问题之前谷歌搜索并看到了 SOF，但没有找到任何特定于我的问题的内容。

谢谢

萨比亚

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-06-03T19:54:26.957

最肯定的，`export JAVA_HOME=/usr/bin/java`是罪魁祸首。此环境变量应指向 JDK 或 JRE 安装目录。谷歌搜索显示 MacOS X 的最佳选择似乎是`export JAVA_HOME=/Library/Java/Home`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-05-17T22:01:15.757

```
export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home 
```

因为：

```
 $ find /Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home -name java*
/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/bin/java
/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/bin/javac
/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/bin/javadoc
/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/bin/javafxpackager
/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/bin/javah
/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/bin/javap
/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/bin/javapackager
/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/javafx-src.zip
/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/jre/bin/java 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-03T20:01:26.677

`JAVA_HOME`不是**java 可执行文件的名称**。但是在该目录中，安装了 java。可执行文件应该是`$JAVA_HOME/bin/java`.

该`which`命令对您没有帮助。它不会为您提供 java 主页，但很可能这只是安装在非常不同目录中的 java 的包装器或符号链接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-12T07:25:51.307

我遇到了同样的问题，在阅读了这篇文章后，我仔细检查`JAVA_HOME`了`.bash_profile`. 它实际上是：

```
export JAVA_HOME=$(which java) 
```

正如[Anony-Mousse](https://stackoverflow.com/users/1060350/anony-mousse)所解释的那样，它就是可执行文件。将其更改为：

```
export=/Library/Java/Home 
```

解决了这个问题，但理解为什么它在配置文件中以这种方式被重视仍然很有趣。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-22T00:24:34.890

在 MacOS Catalina 中，运行

```
sudo nano ~/.bash_profile 
```

在*bash_profile*中，添加：

```
export JAVA_HOME=$(/usr/libexec/java_home)
source ~/.bash_profile 
```

通过运行*java --version进行验证*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-27T05:32:52.400

对我来说，当我下载`macOS Compressed Archive`了哪个底层目录包含

```
jdk-11.0.8.jdk
- Contents
  - Home
    - bin
    - ...
  - MacOS
  - _CodeSignature 
```

所以，要解决这个问题，JAVA_HOME 应该直接指向 /Path-to-JDK/Contents/Home。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-09T07:47:58.067

对于那些使用较新版本的 java：`jhat`自 Java 9 以来已被删除。来源：[https ://www.infoq.com/news/2015/12/OpenJDK-9-removal-of-HPROF-jhat/](https://www.infoq.com/news/2015/12/OpenJDK-9-removal-of-HPROF-jhat/)

同一篇文章建议改用[Java VisualVM](https://visualvm.github.io/download.html)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-24T18:52:33.317

我遇到了同样的问题。用以下几行更新 bash_profile 为我解决了这个问题：

```
export JAVA_HOME='/usr/'

export PATH=${JAVA_HOME}/bin:$PATH 
```

# linux - 通配符虚拟主机 Ubuntu

> ID：10873439
> 
> 赞同：0
> 
> 时间：2012-06-03T19:51:13.597
> 
> 标签：linux, apache, ubuntu, vhosts, virtual-hosts

我正在寻找在 Ubuntu 中设置通配符虚拟主机。我已经很容易地在 WAMP 设置上进行了设置，但是我对 Linux 的了解还不够，无法知道设置有何不同。

目标是能够创建如下文件夹：

```
site.weblocal
site2.weblocal
site3.weblocal
etc..... 
```

无需每次添加单独的虚拟主机。有人推荐过dnsmasq吗？

任何提示将非常感谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T15:35:16.003

对于 Ubuntu，它很简单

```
sudo apt-get install dnsmasq
sudo echo "address=/weblocal/127.0.0.1" >> /etc/dnsmasq.d/weblocal
sudo /etc/init.d/dnsmasq restart 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-06T05:35:16.543

sudo apt-get install dnsmasq

须藤 gedit /etc/dnsmasq.conf

添加这一行“地址=/.weblocal/127.0.0.1”

然后使用以下命令重新启动 dnsmasq

须藤服务 dnsmasq 重启

# python - PIP 和 virtualenv 的问题

> ID：10873440
> 
> 赞同：2
> 
> 时间：2012-06-03T19:51:25.517
> 
> 标签：python, virtualenv, pip

每当我在桌面上创建一个文件夹并在终端上运行“virtualenv venv”时，一切正常。但是，当我尝试在我的“文档”文件夹中创建一个文件夹并运行“virtualenv venv”时，出现以下错误？任何建议为什么？

```
Andrews-MacBook-Pro:Python Virtualenv AndrewParkPhotography$ cd myproject
Andrews-MacBook-Pro:myproject AndrewParkPhotography$ ls
Andrews-MacBook-Pro:myproject AndrewParkPhotography$ virtualenv venv
New python executable in venv/bin/python
Installing setuptools............done.
Installing pip...
  Error [Errno 2] No such file or directory while executing command /Users/AndrewParkPho...env/bin/easy_install /Library/Python/2.7/...pport/pip-1.1.tar.gz
...Installing pip...done.
Traceback (most recent call last):
  File "/usr/local/bin/virtualenv", line 8, in <module>
    load_entry_point('virtualenv==1.7.1.2', 'console_scripts', 'virtualenv')()
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 928, in main
    never_download=options.never_download)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 1042, in create_environment
    install_pip(py_executable, search_dirs=search_dirs, never_download=never_download)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 640, in install_pip
    filter_stdout=_filter_setup)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 966, in call_subprocess
    cwd=cwd, env=env)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 672, in __init__
    errread, errwrite)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 1202, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T20:14:57.850

在这里找到答案（[不能通过 pip 与 Virtualenv 安装](https://stackoverflow.com/questions/7911003/cant-install-via-pip-with-virtualenv-in-osx)）

在没有空格的路径中创建您的 virtualenv 环境。这就是它发生的原因：

创建环境时，它会设置一个 bin 目录。在那个 bin 目录中是所有与环境相关的可执行文件。有些是脚本。您可能知道，hashbangs 用于告诉系统使用什么解释器来运行脚本。您可能会经常在脚本顶部看到这一点：

```
#!/usr/bin/env python 
```

如果脚本位于 /tmp/test.py，则告诉系统运行此命令来执行脚本：

```
/usr/bin/env python /tmp/test.py 
```

在您的情况下， virtualenv 正在创建这样的脚本：

```
#!/tmp/oh no/bin/python 
```

当系统尝试执行它时，它会尝试使用参数 no/bin/python 和 /tmp/test.py 执行命令 /tmp/oh。/tmp/oh 不存在，所以失败

# ios - 如何让应用保持纵向模式

> ID：10873441
> 
> 赞同：1
> 
> 时间：2012-06-03T19:51:25.703
> 
> 标签：ios, xcode

当我运行它时，我似乎无法将我的应用程序保持在纵向模式，我将支持的设备方向设置为仅纵向并且它仍然旋转，所有帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T19:52:14.753

在所有视图控制器中写这个

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return NO;
} 
```

同样在 project-info.plist

更改键的值

```
<key>UISupportedInterfaceOrientationss</key>
<array>
    <string>UIInterfaceOrientationPortrait</string>
    <string>UIInterfaceOrientationLandscapeLeft</string>
    <string>UIInterfaceOrientationLandscapeRight</string>
</array> 
```

至

```
<key>UISupportedInterfaceOrientationss</key>
<array>
    <string>UIInterfaceOrientationPortrait</string>
</array> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:05:19.817

将此写入所有视图控制器：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

# jquery - 函数执行后需要通过改变TD背景

> ID：10873453
> 
> 赞同：0
> 
> 时间：2012-06-03T19:53:02.987
> 
> 标签：jquery, hover, row, html-table

我有一个脚本，它非常适合在满足条件时更改表格的 TR 和 TD 背景。

但是 CSS 背景悬停不适用于这些行。

有没有办法通过这些行的悬停工作来保持我的背景变化？

这是我当前的 CSS，它适用于不受条件函数影响的行。

```
table.tablesorterPRINT  tr.odd:hover td {background-color: #6F0;cursor:pointer;} 
```

埃里克

```
if(qty<=min) { $(this).parent('tr').children('td').css('background' , 'red').css('color' , '#FFF');}
if(qty>=max) { $(this).parent('tr').children('td').css('background' , 'red').css('background' , '#FFF'); } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T19:59:28.537

当您通过 JavaScript 更改背景颜色时，新样式将由`style`元素上的属性应用。

该`style`属性优先于 a`class`或中的定义`id`。

你需要做的，就是设置`:hover`一个`!important`符号，告诉浏览器无论如何，这就是`hover`你想要的样式。

```
table.tablesorterPRINT  tr.odd:hover td {
  background-color: #6F0!important;
  cursor:pointer;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:59:17.647

添加`!important`到`:hover`属性以强制它覆盖内联样式。

或者，更好的是，使用类而不是样式：

```
tr.BadRow td {
    background: red;
}

$(this).parent().addClass('BadRow'); 
```

# java - 当对象实现 Serializable 时，Restlet/Jackson 的工作方式不同

> ID：10873455
> 
> 赞同：0
> 
> 时间：2012-06-03T19:53:21.297
> 
> 标签：java, jackson, restlet

我正在使用带有杰克逊转换器的 Restlet 发送一个带有一些原始字段的对象。到目前为止，它工作得很好。但是后来我需要我的对象来实现 Serializable，因为我需要将它存储在 GAE 的 memcache 中。出于某种原因 - 当类实现 Serializable 时，事情就停止了。

Restlet 发送与以前不同的字符串表示形式，我什至无法在服务器中打印该字符串。我尝试逐个打印它的字节值，第一个数字是：

```
0xfffd 0xfffd 0x0000 0x0005 0x0073 0x0072 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:37:21.610

发生的事情是您将**DefaultConverter**应用于返回值而不是 JacksonConverter 的结果。DefaultConverter 将 Serializable 对象转换为 ObjectRepresentation，它是一种二进制表示（对象的序列化形式）。在没有请求特定媒体类型的情况下，转换器逻辑将 Serializable 视为同样可转换为 ObjectRepresentation 或 JacksonRepresentation，并且由于转换器的排序方式，它选择前者。

有几种方法可以解决这个问题。最简单的方法是在请求中明确指定所需的媒体类型 (MediaType.APPLICATION_JSON)。

更强大的解决方案是将 JacksonConverter 替换为您自己的自定义版本，该版本对 null Variant 的评分高于当前值 0.5。如果您想覆盖当前为每次转换创建新 ObjectMapper 的 JacksonRepresentation 行为，或者如果您想使用 Jackson 2.0，则无论如何您都需要这样做。在 restlet-discuss 列表中搜索我关于如何完成此操作的帖子。（特派尔斯）

这种行为很可能已在最近的版本中得到修复，而且我知道与此相关的问题正在进行中，因此在采取任何行动之前，请在问题跟踪器中搜索 JacksonConverter。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T16:13:19.653

这可能不是您正在寻找的东西，但它足够相似，我认为它可能有用。

我正在使用 Restlet/Android 访问我在 Restlet/GAE 中构建的 API。在某些时候，我不得不更改代表系统中基本对象的 pojo 类来实现 Serializable。当我这样做时，我从服务器获取这些对象的尝试开始失败，出现 415 错误。为了解决 Restlet 对发送哪个表示的混淆，我添加了：

Engine.getInstance().getRegisteredConverters().add(0, new JacksonConverter());

在做我的帖子（）之前。还有一些额外的讨论： [http://restlet-discuss.1400322.n2.nabble.com/Restlet-Android-Object-representation-selection-application-x-java-serialized-object-vs-application--td6876345。 html](http://restlet-discuss.1400322.n2.nabble.com/Restlet-Android-Object-representation-selection-application-x-java-serialized-object-vs-application--td6876345.html)

我意识到我没有使用原语——关键的联系是，一旦我添加了可序列化，事情就坏了。

# shell - 如何提取此自定义程序的 ppl？

> ID：10873456
> 
> 赞同：1
> 
> 时间：2012-06-03T19:53:24.370
> 
> 标签：shell, unix

我有一个程序，当我运行时，它会在命令行中打印如下内容：

```
file test.test: 427 sentences, 2433 words, 1186 OOVs
0 zeroprobs, logprob= -4914.55 ppl= 862.603 ppl1= 8731.65 
```

但我只想将数字 862.603 保存在环境变量中。如何从程序的输出中提取该单个数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T20:59:49.580

到目前为止我看到的每个答案都有一些不足，所以我想我会继续添加这个：

有几种方法可以做到这一点。

我首选的方法是使用 grep 的 perl 扩展 ( `-P`)：

```
var=$(myProgram | grep -oP 'ppl=\s*\K\d+\.\d+') 
```

该`-o`标志告诉 grep 只打印匹配的字符串，在这种情况下就是您要查找的数字。

请注意，这（几乎）与 sputnick 的解决方案相同，但我已将其调整为直接通过管道而不是从文件中读取您的程序。

我更喜欢这种解决方案，因为您本质上是想搜索 grep 擅长的特定字符串。唯一的问题是您还想做一个lookbehind，这仅在 perl regex 扩展中受支持。

所以，如果你的 grep 不支持 perl 正则表达式扩展，我会使用 sed：

```
var=$(myProgram | sed 's/ppl=\s*\(\d\+\.\d\+\)/\1/') 
```

这假设 gnu sed，这很常见。如果您没有 gnu sed，请使用以下命令：

```
var=$(myProgram | sed 's/ppl=[ \t]*\([0-9]\{1,\}\.[0-9]\{1,\})/\1/') 
```

这里的底线是，您绝对***不需要***多个管道来完成这项任务。打开管道意味着开始新的流程，这很昂贵。通常，在 shell 中编码时，您希望打开尽可能少的管道来完成您的任务。

* * *

^(编辑)

只是要指出：如果您有可用的 perl 扩展，sputnick 的答案现在几乎正是您想要的。现在他和我之间的唯一区别是一个小的正则表达式更改（无论如何，您最终可能不得不调整自己以满足您的需求）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T20:03:24.550

```
$ var=$(<YOUR_COMMAND> | grep -oP "ppl= \K\d+\.\d+")
$ echo $var
862.603 
```

如果您的发行版缺少该`grep -P`选项，则应安装`pcregrep`

**编辑**：帖子编辑以更好地满足您的需求：我在文件上使用 grep，现在这是您的命令。

**Edit2**：这是一种`awk`方法：

```
var=$(
    <YOUR_COMMAND> |
        awk '
            /ppl=/{
                for (i=0; i<NF; i++) {
                    if ($(i) ~ "ppl=" && $(i) > 1) {
                        print $(i+1)
                    }
                }
            }'
        )
echo $var 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T20:05:43.390

试试这个：

```
var=`./program | grep 'ppl=' | cut -d= -f3 | sed 's/ //g' | sed 's/ppl1//g'` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T19:56:17.440

`$ MY_ENV_VAR="$(myprogram |grep 'ppl= '|sed -r 's:^.*ppl= ([0-9\.]+).*:\1:'`)"

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T20:00:36.173

You could use `fgrep` to get only the line you want, and `awk` to get only the number you want:

```
program | fgrep ppl= | awk '{ print $6 }' 
```

# .net - 找不到本地主机 Microsoft Visual Studio

> ID：10873457
> 
> 赞同：1
> 
> 时间：2012-06-03T19:53:29.243
> 
> 标签：.net, visual-studio-2010, debugging, localhost

我无法调试/测试我的 .Net 网站。我不断收到找不到本地主机的错误。它曾经工作正常，但过去几天它出现了错误。任何帮助将不胜感激。很抱歉下图中的混淆，因为您可以看到端口号与 VS 中显示的端口号不同。我试图打开一个不同的项目并运行它，所以我得到了错误的图片。

![在此处输入图像描述](../Images/7b68cdcf5affdba48ac27af87f9701a8.png)

![在此处输入图像描述](../Images/3edaa48ec500dd8c798ceea2677973a9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:26:17.783

检查您的项目属性。转到网页并查看 VS 使用哪个服务器来运行您的项目。
通常这是具有自动端口选择功能的 Visual Studio 开发服务器。
接下来检查应用程序栏右下角附近的通知区域。在这里，有一个小的向上箭头，其中包含 Visual Studio 开发服务器的图标。如果您将鼠标悬停在图标上，您可以看到开发服务器使用的端口。这两个端口应该相同。

在其他情况下，如果您选择了本地 IIS 或其他服务器，则需要安装这些服务器并使其可用并在应用程序的同一端口上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:58:57.153

从浏览器的 url 中，地址绑定到端口 49974。有时当此端口不再可用时，您会收到此错误。转到您的 Visual Studio 并再次按 F5。

# logging - Log4j 多日志文件和常用代码的日志记录

> ID：10873465
> 
> 赞同：0
> 
> 时间：2012-06-03T19:54:27.153
> 
> 标签：logging, log4j

我必须根据所使用的服务记录到单独的日志文件。因此，假设我有 service1 和 service2，并且日志将分别转到 service1.log 和 service2.log。

问题是这两个服务都使用了一些通用代码。现在我如何制作日志，以便如果任何服务调用公共代码然后登录到该特定日志文件。

我创建记录器的方式是

```
private static final Logger logger = Logger.getLogger(ClassName.class); 
```

我想处理这个问题的方法是将一个字符串（记录器名称）传递给公共代码并在方法级别而不是类创建记录器。

例子：

```
someMethodInCommonCode(String loggerName) {
  Logger logger = Logger.getLogger(loggerName);
} 
```

我读过 log4j 维护记录器的缓存，所以我猜在方法中创建记录器不会是开销。

是的，我不喜欢记录器名称被传递。那么有没有一种方法或任何配置可以实现上述场景或任何其他想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T01:24:49.577

您可以使用 log4j 的*嵌套/映射诊断上下文*（NDC 或 MDC）功能。本质上，这些是“带外”信息，它们存储在每个线程的基础上，并在执行日志操作时自动附加到日志事件中。NDC 中的信息可以输出到日志文件或用于在 appender 之间路由日志消息，这正是您所需要的。[您可以在 log4j 的官方 wiki 上](http://wiki.apache.org/logging-log4j/NDCvsMDC)找到有关这些的更多信息。

You can store the service name or some other identifier into the NDC in your services, before calling the common code. Then you can configure a log4j filter to route the common log messages to the appropriate output file according to the service name found in the NDC. The common code doesn't even need to be modified.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T20:57:10.657

如果您的服务在不同的线程中运行，您可以检查当前线程并相应地选择记录器

# c# - 在应用程序启动时自动保存和检索背景图像

> ID：10873471
> 
> 赞同：0
> 
> 时间：2012-06-03T19:55:18.400
> 
> 标签：c#, windows-phone-7

在我的 windows phone 7 应用程序中，我创建了一个可以在 no 上更改背景的按钮。的计数。默认情况下，我有一个背景图像。我需要的是，如果用户更改了背景（使用上面的按钮），我希望该图像应该由独立存储保存或记住。然后当应用程序再次启动时，该特定图像（由用户上次选择）应该是我的应用程序的背景图像。现在的问题是，我无法检索图像（但能够保存它），并且不知道如何在应用程序启动时自动将该图像作为背景图像（不想使用任何按钮来保存或检索，必须是自动的）。有谁能够帮我？非常感谢您的辛勤工作！

```
private void button1_Click(object sender, RoutedEventArgs e)
    {
        string imguri = "";

        click_count = click_count % 4;
        switch (click_count)
        {
            case 0: imguri = "Images/image4.png"; break;
            case 1: imguri = "Images/image3.jpg"; break;
            case 2: imguri = "Images/image2.png"; break;
            case 3: imguri = "Images/image1.jpg"; break;

        }
        click_count++;

        BitmapImage bitmapImage = new BitmapImage(new Uri(imguri, UriKind.Relative));
        ImageBrush imageBrush = new ImageBrush();
        imageBrush.ImageSource = bitmapImage;
        var app = Application.Current as App;
        this.LayoutRoot.Background = imageBrush;
        app.appbrush = imageBrush;
        app.backchanged = true;

        string filename = "Images/app.jpg";
        StreamResourceInfo sr = Application.GetResourceStream(new Uri(filename, UriKind.Relative));

        bitmapImage.SetSource(sr.Stream);
        WriteableBitmap wb = new WriteableBitmap(bitmapImage);

        using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            myIsolatedStorage.CreateDirectory("Images");

            if (myIsolatedStorage.FileExists(filename))
            {
                myIsolatedStorage.DeleteFile(filename);
            }
            IsolatedStorageFileStream filestream = myIsolatedStorage.CreateFile(filename);
            Extensions.SaveJpeg(wb, filestream, wb.PixelWidth, wb.PixelHeight, 0, 100);
            filestream.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:29:35.343

尝试使用此代码加载图像并将其分配给背景：

```
IsolatedStorageFile Store = IsolatedStorageFile.GetUserStoreForApplication();

if (Store.FileExists("Images/app.jpg"))
{
    try
    {
        using (IsolatedStorageFileStream Stream = new IsolatedStorageFileStream(Path, FileMode.Open, FileAccess.Read, Store))
        {
            if (Stream.Length > 0)
            {
                BitmapImage Image = new BitmapImage();
                Image.SetSource(Stream);
                this.LayoutRoot.Background = Image;
            }
        }
    }
    catch (Exception)
    {            
    }
} 
```

# java - 如何在 NetBeans 中切换 Subversion 存储库？

> ID：10873473
> 
> 赞同：2
> 
> 时间：2012-06-03T19:55:43.483
> 
> 标签：java, svn, version-control, netbeans

我一直在将 NetBeans 用于一个项目并在 riouxsvn.com 上托管一个 Subversion 存储库，但最近服务器刚刚宕机，此后一直如此。由于服务器已关闭，我无法使用其*从 URL 导入*功能将其导入汇编。所以现在我需要在 assembla.com 的新存储库中检查代码，但是使用菜单选项*Team* > *Relocate*会出现以下错误：

> org.tigris.subversion.javahl.ClientException: svn: ' [https://subversion.assembla.com/svn/opmtoolset](https://subversion.assembla.com/svn/opmtoolset) '的存储库有 uuid '36c7bd81-9045-4dfa-9d2c-2ba0fa0ee7f3'，但 WC 有 '7f9aa1f8 -8c2b-44dd-b220-ac62e04eeab0'
> 
> 您可能正试图重新定位到错误的存储库。您的工作副本是从另一个副本创建的。再次检查 URL。
> 
> 您还可以签出目标存储库并创建一个新的工作副本。

我了解基本信息，但我不确定如何解决它。我知道我现在有两个存储库（新的存储库显然是空的）并且 UUID 不同，但我希望告诉 NetBeans 我要重新定位将是可行的方法。

所以我的问题是：有没有办法告诉 NetBeans 我想为我的存储库使用一个新的 URL？

次要问题：如果存储库（显然）没有按照我期望的方式工作，我该如何解决这个问题？我是否在 NetBeans 中创建一个新项目并在新主机上再次签入所有代码？在这种情况下，NetBeans 中的*Relocate*函数有什么作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T19:23:08.040

**有没有办法告诉 Netbeans 我想为我的存储库使用一个新的 url？**是的，如果旧存储库仍然可用，请使用 Netbeans Relocate 功能。如果旧存储库不再可用，则无法换出存储库 URL 并继续使用相同的工作副本。您必须创建一个访问新存储库的新工作副本。[但是，您可以按照Jim Garrison](https://stackoverflow.com/users/18157/jim-garrison)的建议，通过删除 .svn 目录的所有实例来改造当前的工作副本。然后，在 Netbeans 中，使用 Team->Subversion->Check into Repository 并输入新的存储库 url。

**如果存储库（显然）也没有按照我期望的方式工作，我该如何解决这个问题？**工作副本链接到存储库。如果要更改存储库，则需要对工作副本进行更改。或者，您可以使用 Netbeans 提供的 Relocate 功能，因为旧存储库仍然可用。此外，您可以使用上面提到的改造解决方案，而不是在 Netbeans 中创建新项目。

**我是否在 Netbeans 中创建一个新项目并在新主机上再次签入所有代码？**您*可以*在 Netbeans 中创建一个新项目并将所有源文件复制到新项目中。之后，您可以将新项目签入新存储库，从而创建一个新的工作副本。但是，正如上面已经解释的那样，如果您遵循改造解决方案，则*无需*创建新项目。

**在这种情况下，Netbeans 中的“重定位”功能是做什么的？**Netbeans 中的重定位功能解决了在工作副本上更改存储库的问题，但仅在旧存储库仍然可用时才有效。它不能将工作副本重新定位到存储库中，而只需将一个存储库移动到另一个存储库，从而节省您手动传输的工作量。它不适用于这种情况，因为第一个存储库不再可用。如果您正在使用的存储库脱机，您**将**丢失历史记录，并且您需要像第一次一样将代码签入新的存储库**。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T22:52:47.153

如果您的原始存储库永远消失了，那么您需要做的是将当前工作副本签入新存储库作为新源。最简单的方法是

1.  对当前源进行完整备份
2.  删除工作副本中任何位置的所有 .svn 目录
3.  在新存储库中创建顶级目录并签出
4.  移动旧树（到新的顶级目录）
5.  `svn add`新存储库的源
6.  报到

正如 ChristopheD 指出的那样，你会失去你的历史，但这已经过去了。

# mysql - 为什么我不能从 Coldfusion8 插入 MySQL 表？

> ID：10873476
> 
> 赞同：0
> 
> 时间：2012-06-03T19:56:08.147
> 
> 标签：mysql, coldfusion, insert

我正在使用 Coldfusion8 和 MySQL，并试图插入表中。

但是，无论我是否使用 cfquery，它都不起作用：

```
<cfquery datasource="dns" result="some">
    INSERT INTO users(iln)
    VALUES("1234567890123")
</cfquery>
<cfdump output="path.txt" var="#some#"> 
```

或存储过程：

```
<cfstoredproc procedure="proc_insert_user" datasource="dns">
   <cfprocparam type="In" cfsqltype="cf_sql_varchar" value="1234567890123" maxlength="13">
</cfstoredproc> 
```

使用 MySQL 内部的过程：

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_insert_user`(IN `user_iln` VARCHAR(13))
  LANGUAGE SQL
  NOT DETERMINISTIC
  MODIFIES SQL DATA
  SQL SECURITY INVOKER
  COMMENT ''
  BEGIN
     INSERT INTO users (iln)
     VALUES(user_iln);
  END 
```

如果我从 MySQL 内部运行该过程，它就可以工作。但是从 Coldfusion 我无法访问数据库。如果我在 cfquery/storedProc 之前和之后设置一个标志，两个标志都会显示，所以我假设没有错误（我也没有得到任何错误）

**问题**：我想我在 MySQL/Coldfusion 中缺少一些设置。如果是这样，我应该从哪里开始搜索？

感谢帮助！

**编辑**：
当我尝试如上所述插入记录时，表 ID 不断增加，但没有显示新记录。所以正在创建 ID，但我看不到任何记录。不确定这是否有帮助。

**EDIT2：**
我在 Cfquery 中添加了一个结果参数。如果我转储结果，我会得到：

```
CACHED: false
EXECUTIONTIME: 60
GENERATED_KEY: 42
RECORDCOUNT: 1
SQL: INSERT INTO teilnehmer(iln)
VALUES("1234567891231") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T07:47:00.100

**愚蠢的我......我在CFtransaction**中有上述 INSERT 数据库调用，之后有一些语句，其中一个包含错误，这导致所有先前的转换语句都被还原。所以我猜这些记录根本就没有进入数据库，只有 id-key 随着存储过程的调用而增加。

# symfony - 使用“getParent()”覆盖模板似乎不起作用

> ID：10873480
> 
> 赞同：4
> 
> 时间：2012-06-03T19:57:04.273
> 
> 标签：symfony, twig, fosuserbundle

我是 Symfony2 的新手，我正在关注 Symfony FOSUserBundle 的 YouTube 教程（FTW！）。

在我的情况下，大约在 7.40 分钟左右，它说要添加一个名为 getParent() 的方法

```
<?php
//src\Monse\UserBundle\UserBundle.php

namespace Monse\UserBundle;

use Symfony\Component\HttpKernel\Bundle\Bundle;

class UserBundle extends Bundle{

    public function getParent(){

        return 'FOSUserBundle';
    }
} 
```

我的 layout.html.twig 看起来像这样

```
{# src\Monse\UserBundle\Resources\views\layout.html.twig #}
{% extends '::base.html.twig' %}
{% block body %}
{{block('fos_user_content')}}
{% endblock %} 
```

可悲的是，它不起作用，我不知道我做错了什么。感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T15:02:29.500

您是否在内核中启用了捆绑包？

```
<?php
// app/AppKernel.php

public function registerBundles()
{
    $bundles = array(
        // ...
        new FOS\UserBundle\FOSUserBundle(),
        new Monse\UserBundle\UserBundle(),
    );
} 
```

编辑：您可以重命名您的捆绑包 MonseUserBundle 以便能够将父 FOSUserBundle 与覆盖它的捆绑包区分开来：

```
<?php
//src\Monse\UserBundle\MonseUserBundle.php

namespace Monse\UserBundle;

use Symfony\Component\HttpKernel\Bundle\Bundle;

class MonseUserBundle extends Bundle{

    public function getParent(){

        return 'FOSUserBundle';
        }
    } 
```

现在使用这个：

```
<?php
    // app/AppKernel.php

    public function registerBundles()
    {
        $bundles = array(
            // ...
            new FOS\UserBundle\FOSUserBundle(),
            new Monse\UserBundle\MonseUserBundle(),
        );
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T19:42:15.137

实际上这解决了它（来自原始文档）：

```
{# src\Monse\UserBundle\Resources\views\layout.html.twig #}
{% extends '::base.html.twig' %}
{% block body %}
{% block fos_user_content %}{% endblock %}
{% endblock %} 
```

# objective-c - 是否可以通过 Objective-C 中的网络连接以数据包的形式发送对象？

> ID：10873482
> 
> 赞同：0
> 
> 时间：2012-06-03T19:57:23.383
> 
> 标签：objective-c, network-programming, nsdata, xcode4.3, outputstream

目前，我可以通过执行以下操作来编写和接收包含*字符串*的数据：

```
NSString *anyString = @"anyString";
NSData *data = [anyString dataUsingEncoding:NSUTF8StringEncoding];
[self.outputStream write:[data bytes] maxLength:[data length]]; 
```

但是是否可以将一个*对象*放入数据中并将其写入输出流？如果是这样，怎么做？如果不可能，我是否应该通过套接字传递一个唯一标识符（NSString）并与我的对象列表进行比较，直到找到匹配项？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:04:17.297

您可以实现`NSCoding`协议。然后，您可以序列化您的对象`NSKeyedArchiver`并用于`JSONKit`将数据传输到远程服务器。

# java - 抛出异常或返回 null

> ID：10873485
> 
> 赞同：6
> 
> 时间：2012-06-03T19:57:31.513
> 
> 标签：java, exception, coding-style, null

如果我有下面的功能，有两种选择

```
private MyObject findBlank() {
    for (int i = 0; i < pieces.length; i++) {
        if(pieces[i].isBlank()){
            return pieces[i];
        }
    }
    return null;
}

private MyObject findBlank() {
    for (int i = 0; i < pieces.length; i++) {
        if(pieces[i].isBlank()){
            return pieces[i];
        }
    }
    throw new NoSuchFieldError("No blank piece found!");
} 
```

从这个方法中我知道它**应该总是返回一个**“片段”之一的对象`isBlank() == true`，最后返回 null 只是为了取悦编译器。既然是这种情况，如果我的代码返回 null，我的代码无论如何都不会工作，这是正确的请抛出异常吗？

我的选择是：

1.  返回 null 并且应用程序将在某些极端情况下获得 NullPointerException
2.  返回 null 并使用 (myObject != null) 检查包装该方法的使用
3.  抛出一个异常，这将在运行时将其炸毁

我想我要问的是，这是抛出异常的正确位置吗？也就是说，如果它进入这种情况，我无能为力。这是归类为“异常”还是我应该检查我的方法返回的内容（这使我的代码看起来很糟糕）。如果我知道它不应该返回 null 那么我应该抛出异常对吗？

另外我将如何选择什么异常，或者扩展一个并抛出我自己的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T20:00:40.700

> 我想我要问的是，这是抛出异常的正确位置吗？

如果这是一个*特殊*情况，那么是的。*如果预期*可能找不到任何符合条件的东西，那么情况并不*例外*，您应该返回`null`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T19:59:36.567

是的，您应该抛出 a[`RuntimeException`](http://docs.oracle.com/javase/7/docs/api/java/lang/RuntimeException.html)来表示不应该发生的“异常”情况。[`IllegalStateException`](http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html)可能符合要求。确保包含一条消息，其中包含任何可以帮助您找到错误（如果它被抛出）的信息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-03T20:18:02.530

关于你的选择，问问自己是否

1.  `null`在这个方法返回一个意外的值（即）之后，让你的程序在某个时候崩溃是个好主意吗？
2.  如果屏蔽`null`返回值，究竟会隐藏什么？
3.  仅仅因为值错误就立即炸毁是个好主意吗？

就我个人而言，我会选择选项 2 或 3，这取决于我是否更喜欢问题 2 或 3 的答案。选项 1 绝对是一个坏主意，尤其是在它不应该发生的情况下。如果程序在您的函数返回后抛出 NPE 方式，您将很难弄清楚它的`null`来源。特别是如果它发生在您完成此特定功能的几个月后。

如果你选择抛出异常，你会立即看到*哪里*出错了，你可以直接去那里找出出错的*原因。*在调用函数中返回`null`并检查它也可以工作，但前提是你不会默默地失败，而是实际做一些事情来正确处理问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-06T06:15:37.470

[使用Null Object 模式](https://en.wikipedia.org/wiki/Null_Object_pattern)可能是个好主意。

`Provide an object as a surrogate for the lack of an object of a given type. The Null Object provides intelligent do nothing behavior, hiding the details from its collaborators`

因此，在这种情况下，您不必使用异常或返回 null。您始终可以返回预期的返回类型对象。诀窍是当您没有要返回的内容时，您可以返回与预期返回类型相同的类型，而不是返回`null`或抛出异常。`Null object`

本[文档](https://www.tutorialspoint.com/design_pattern/null_object_pattern.htm)有一些示例和说明。和你有类似的情况，由设计模式解决。

```
public class CustomerFactory {

  public static final String[] names = {"Rob", "Joe", "Julie"};

  public static AbstractCustomer getCustomer(String name){   
    for (int i = 0; i < names.length; i++) {
       if (names[i].equalsIgnoreCase(name)){
         return new RealCustomer(name);
       }
    }
    return new NullCustomer();
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-09T07:12:42.947

除了大多数答案之外，我想指出，如果您关心**性能，那么****异常比返回 null 慢得多**

看看这段代码：

```
class Main {
    public static void main(String[] args) {
        testException();
        testNull();
    }

    public static void testException() {
        long st = System.currentTimeMillis();
        for(int i=0;i<10000000;i++) {
            try{
                exp();
            } catch(Exception e) {

            }
        }
        long et = System.currentTimeMillis();
        System.out.println("Time taken with exceptions : "+(et-st));
    }

    public static void testNull() {
        long st = System.currentTimeMillis();
        for(int i=0;i<10000000;i++) {
            returnNull();
        }
        long et = System.currentTimeMillis();
        System.out.println("Time taken with null : "+(et-st));
    }

    public static void exp() throws Exception {
        throw new Exception();
    }

    public static Object returnNull() {
        return null;
    }
} 
```

我机器上的结果是：

```
Time taken with exceptions : 7526
Time taken with exceptions : 5 
```

如果抛出异常在您的代码中是一种罕见的情况并且不会经常发生，那么在这两种情况下所花费的时间几乎相同。

您将不得不权衡**性能与可维护性/可读性。**

[在此处](https://stackoverflow.com/questions/175532/should-a-retrieval-method-return-null-or-throw-an-exception-when-it-cant-prod?answertab=active#tab-top)阅读有关它的更多信息

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-21T18:58:56.410

返回 null 大部分时间会借鉴合同视图中丢失的信息，如果从生产者那里获取 null，消费者无法知道错误响应的原因是什么。

查看您的第一个代码，外部代码有两种情况得到 NULLPointerException： 1\. 碎片为空 2\. 碎片没有这样的元素

所以 return null 会误导外部代码进行进一步的操作，它会引起潜在的问题。

并谈谈返回 nullObject（非 null）和异常之间的区别，主要区别是 PROBABILITY，这意味着： 1\. 如果空情况的概率更大，它应该返回 nullObject 以便所有外部代码都可以/应该显式处理它们. 2、如果空的情况概率较小，为什么不抛出异常让final call函数直接处理。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-11T20:09:30.790

我相信正确的答案取决于调用该方法的代码。有两种情况：

1.  调用代码不确定对象是否存在，并且将有代码专门处理它不存在的情况。

2.  调用代码确信该对象存在，实际上如果它不存在，逻辑上就会存在其他一些深层问题，在这种情况下您所能做的就是放弃并报告错误。

在实践中，我经常使用命名约定来区分它们：

```
private MyObject findBlankOrNull() {
    for (int i = 0; i < pieces.length; i++) {
        if(pieces[i].isBlank()){
            return pieces[i];
        }
    }
    return null;
}

private MyObject findBlankOrFail() throws Exception {
    MyObject obj = findBlankOrNull();
    if (obj != null) {
        return obj;
    }
    throw new NoSuchFieldError("No blank piece found!");
} 
```

请注意，`OnFail`始终可以构造版本调用另一个版本，然后抛出异常而不是返回 null。本质上，您所做的是插入 Exception throw 代替 return null 以确保不返回 null，因此您不需要任何代码来在调用站点测试 null。

我写了一篇关于这个主题的博文： [返回 Null 还是 Exception？](https://agiletribe.wordpress.com/2019/05/11/return-null-or-exception/) 更详细地介绍了它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-03T20:01:48.890

*应该总是返回一个对象*或*返回 null*
并且
*应用程序会`NullPointerException`在某些极端情况下*
得到一个这两者是矛盾的。

如果你真的确定你总是有`pieces[i].isBlank()`然后扔`IllegalStateException`

否则按您的要求处理。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-03T20:04:08.450

如果您的数组应始终具有要返回的有效值，则应引发异常作为后备。（在您的示例中为 2sd 案例）

最终，您可以声明自己的异常种类（类）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-03T20:25:45.697

我建议使用我刚才在[另一个答案](https://stackoverflow.com/questions/10810162/missing-value-in-java/10870252#10870252)中谈到的`Maybe`（也称为）数据类型。`Option`

此数据类型在[Functional Java](http://functionaljava.org/)[中可用](http://functionaljava.googlecode.com/svn/artifacts/3.0/javadoc/fj/data/Option.html)。

**用法：**

```
private Option<MyObject> findBlank() {
    for (int i = 0; i < pieces.length; i++) {
        if(pieces[i].isBlank()){
            return Option.some(pieces[i]);
        }
    }
    return Option.none();
} 
```

* * *

**边注：**

您的`findBack`方法可以推广到将谓词作为参数的方法，并找到并返回满足它的第一个元素。

不出所料，[Functional Java 也已经具备了这一点](http://functionaljava.googlecode.com/svn/artifacts/3.0/javadoc/fj/data/List.html#find%28fj.F%29)。

让我们暂时假设它`pieces`是一个[`fj.data.List`](http://functionaljava.googlecode.com/svn/artifacts/3.0/javadoc/fj/data/List.html). 然后你的方法可以重写为：

```
private Option<MyObject> findBlank() {
  return pieces.find(new F1<MyObject, Boolean>() {
    public Boolean f(MyObject p) {
      return p.isBlank();
    }
  });
} 
```

* * *

**另一个旁注：**

也许上面的代码看起来很粗糙。[IntelliJ IDEA 的“闭包折叠”在这里可以提供一些帮助](https://imgur.com/a/p89Nl)。

# backbone.js - 事件触发两次

> ID：10873486
> 
> 赞同：8
> 
> 时间：2012-06-03T19:57:38.563
> 
> 标签：backbone.js, backbone-events, backbone-views

我正在声明这样的视图：

```
var VirtualFileSelectorView = Backbone.View.extend({
    selected: function() {
        console.log("selected function");
    },

    initialize: function() {
        // Shorthand for the application namespace
        var app = brickpile.app;
        // bind to the selected event
        app.bind('selected', this.selected, this);
    }
}); 
```

然后我实例化这个视图的两个实例，就像你在这里看到的那样：http: [//cl.ly/H5WI](http://cl.ly/H5WI)

The problem is that when the *event selected* is fired the *function selected* is called twice?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T17:43:49.680

阅读评论线程后，我想我已经了解如何帮助您解决问题：

在您的代码中，两个视图都在侦听同一个*全局事件*，因此它们都将同时响应，并且您希望能够`selected()`独立触发每个视图。

执行此操作的常用方法是将 View 与 Model 关联，并且 View 正在侦听该 Model 上的事件，因此为一个 Model 触发的事件只会影响与其关联的 View。

此模式如下所示：

```
// code simplified and not tested
var MyView = Backbone.View.extend({
  initialize: function( opts ){
    this.model = opts.model;
    this.model.on( "selected", this.selected, this );
  },

  selected: function( model ){
    // ...
  }
})

var oneModel = new MyModel();
var oneView = new MyView({ model: oneModel }); 
```

`selected`现在您只需要在需要时在每个模型上触发事件。

### 更新

这种模式非常常见，Backbone 会`View.model`为您关联参考，因此您可以`View.initialize`像这样实现：

```
initialize: function(){
  this.model.on( "selected", this.selected, this );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T20:38:18.163

正如您声明的两个实例，`VirtualFileSelectorView`您有两个*选定*事件的*观察者*。

 *即使您*重用*旧 View 实例的引用来引用新 View 实例，旧实例仍然存在，因为仍然有指向它的引用。

这是 Backbone 中一个非常普遍的问题，我认为人们开始称其为*“ghosts Views”*。

要解决这个问题，您必须处理View*绑定*`unbind`的所有事件，在您的示例中，您可以执行以下操作：

 *```
app.virtualFileSelectorView.off( null, null, this ); 
```

Derick Bailey 有一篇[关于这件事的优秀帖子](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)。

另外，怀着谦虚的态度，我想链接到我所做的[*一项*关于这件事](https://stackoverflow.com/questions/10429648/backbone-js-how-to-unbind-from-events-on-model-remove/10433015#10433015)的研究，以试图理解这种顽强的行为。**

# java - 面试问题之一的问题

> ID：10873487
> 
> 赞同：0
> 
> 时间：2012-06-03T19:57:47.917
> 
> 标签：java, algorithm

问题是：

我们有两个长度为 100 的数组。最初，它们都包含 n 个元素（其中 n<100）。

`Array1`包含名称。

`Array2`包含数字。

要求用户输入名称。程序检查输入的名称是否存在于`Array1`. 如果是，它会从 打印相应的数字`Array2`。

如果否，名称将保存在末尾，`Array1`并要求用户输入一个数字，该数字将保存在末尾`Array2`。

我被困在“如果找不到名字”部分。如何在数组末尾输入新值？

到目前为止，我已经创建了这段代码：

```
public void askUser(String[] arr1, int[] arr2) {
    System.out.println("Enter the name:");
    String namedInput = new Scanner(System.in).nextLine();
    List<String> namesList = Arrays.asList(arr1);

    if(namesList.contains(namedInput)){
        System.out.println("Yes, the name is present. And the subsequent number is: " + arr2[namesList.indexOf(namedInput)]);
    }else{
        System.out.println("Nope, the name is not present");
        System.out.println("The name "+namedInput+" will be added in the list, please enter the corresponding number: ");
        int numInput = new Scanner(System.in).nextInt();
        // How to save the name and number in the first available indice.
    }
    askUser(arr1, arr2);

} 
```

PS：请建议您是否有任何其他优化方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T20:37:06.717

因此，如果您确实需要为此使用 Array，只需记住名称-数字对的当前数量即可。

说一开始你有 n 对姓名-号码，下次当你得到一个新的时，就这样做

```
 if (n < 100) {
        arr1[n] = newName;
        arr2[n] = newNumber;
        n++; 
    }
    else {
        // take care of this invalid case
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T19:59:41.277

一种更简单（更好）的方法是使用 java [Hashtable](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Hashtable.html)（**键**：名称，**值**：数字）。

检查键是否已经存在，否则插入键值对。

有一些示例代码显示了如何在链接文档中使用 Hashtable。

# android - Tty驱动程序从adb访问android？

> ID：10873488
> 
> 赞同：2
> 
> 时间：2012-06-03T19:57:51.570
> 
> 标签：android, adb, tty

我们可以`dev/tty`从 中访问该文件夹`adb`吗？你能直接找到一个资源来理解android中的dev文件夹吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-03T11:24:38.790

是的，您可以通过**ADB**命令访问 Android 上的*/dev/tty 。*您需要您的 Android 具有 root 访问权限。然后在 GNU/Linux 或 Windows 上，安装 adb 并执行

 **```
adb shell 
```

现在执行 su，因为 Android 上的 /dev/tty 需要超级用户权限。

```
su
cd /dev/
ls 
```**

# python - 从 Numpy 矩阵创建 R 矩阵

> ID：10873496
> 
> 赞同：2
> 
> 时间：2012-06-03T19:58:47.907
> 
> 标签：python, r, rpy2

我将如何使用 rpy2 从 numpy 矩阵创建 R 矩阵？我已经尝试过`robjects.r.matrix([the numpy matrix])`，但它不适用于 np 矩阵（或数组）。

# c# - 依赖属性 - storage, Grid.Row

> ID：10873498
> 
> 赞同：0
> 
> 时间：2012-06-03T19:59:04.647
> 
> 标签：c#, wpf, xaml

我正在尝试详细了解 WPF。到目前为止，我不知道两件事是如何工作的：

**1.依赖属性（DP）存储在哪里？**

我的猜测：DP 是静态的，所以这个对象（DP）对于从类派生的所有具有这个 DP 的对象都是相同的。我想 DP 有自己的存储，其中 DP 保存使用此 DP 的所有对象的值。Mb sth like dictionary...

**2.Grid如何将一个对象（例如Button）分配给它自己的行（详细）？**

我的猜测：

`Button Grid.Row="1" (in XAML)`

SetRow（来自 Grid）将被执行。PropertyChangedCallback（在元数据中初始化）也将被触发。我想 Grid 将通过此 Callback 中的某些代码分配 Button，但这对我来说毫无意义...... Callback 将获得 DepedencyObject（= Grid 实例）和 EventArgs（= 值）。网格如何知道哪个对象更改了附加依赖属性？网格应该有自己的对象位置存储......网格如何保存这些信息？

提前感谢您的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:03:52.670

1.  是的，有某种静态字典将对象与其值相关联（在各种级别、样式、本地值等。值是通过[优先级](https://msdn.microsoft.com/en-us/library/ms743230%28v=vs.100%29.aspx)确定的）。内部对您来说应该无关紧要。
2.  错误，设置属性的依赖对象被传递给回调，而不是网格。（反正没有直接找到网格实例，然后通过 找到网格实例`VisualTreeHelper.GetParent`）。该机制可能通过`Grid.Children`在布局过程中循环并获取它们的属性来确定所有内容应该去哪里。

# javascript - 你如何编辑 HTMLGreasemonkey 的元素？有一个名为“Pokemon Showdown”的口袋妖怪战斗模拟器。客户端是封闭源代码，因此我无法向服务器添加层。我想编辑最后的战斗下拉列表以添加一个层。我要更改： <select id="lobby-format" onchange="return rooms['lobby'].formSelectFormat()"><option value="randombattle" selected="selected" &g<="" h1="">ID：10873505 赞同：0 时间：2012-06-03T19:59:44.717 标签：javascript, drop-down-menu, greasemonkey, html-select 回答 #1 赞同：2 时间：2012-06-03T20:26:48.340 好的，试试这个： var opt = document.createElement("option"); var content = document.createTextNode("PU (unrated)"); opt.appendChild(content); var attr = document.createAttribute("value"); attr.nodeValue = "pu"; opt.setAttributeNode(attr); var targetEl = document.getElementById("lobby-format"); targetEl.appendChild(opt); 这只会增加一个选项，但我想你明白了。 回答 #2 赞同：0 时间：2012-06-03T20:46:31.200 这是一个脚本，它使用 jQuery 的强大功能在目标点添加选项（在 jsBin测试）： // ==UserScript== // @name _Add new options at select points // @include http://play.pokemonshowdown.com/* // @include http://jsbin.com/azeveh* // @require http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js // ==/UserScript== var selectNode = $("#lobby-format"); selectNode .find ("option[value='nu']") .after ('<option value="pu">PU (unrated)</option>'); selectNode .find ("option[value='lc']") .after ('<option value="bwcup">BW Cup (unrated)</option>'); OP 的特定站点使用 AJAX 来添加<select>. 要补偿 AJAX，请使用该waitForKeyElements实用程序。像这样： // ==UserScript== // @name _Add new options at select points, AJAX compensated. // @include http://jsbin.com/azeveh* // @include http://play.pokemonshowdown.com/* // @require http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js // @require https://gist.github.com/raw/2625891/waitForKeyElements.js // ==/UserScript== waitForKeyElements ("#lobby-format option[value='nu']", AddOption_1); waitForKeyElements ("#lobby-format option[value='lc']", AddOption_2); function AddOption_1 (jNode) { jNode.after ('<option value="pu">PU (unrated)</option>'); } function AddOption_2 (jNode) { jNode.after ('<option value="bwcup">BW Cup (unrated)</option>'); }</option></select>

# python-2.7 - Python - generators, iterators, and speed

> ID：10873509
> 
> 赞同：0
> 
> 时间：2012-06-03T20:00:34.057
> 
> 标签：python-2.7, generator

[Edited to reflect the comments so far, and my further reading.]

Question: I'm confused why the following three versions of the eta function,all written in python, are all about the same speed, namely linear in "bound", and with similar constants.

As a bit of background: I needed a reasonably fast version of the eta function for a computation. The definition of the eta function can be found [here](http://en.wikipedia.org/wiki/Dedekind_eta_function). Before giving the three functions, we need a simple helper function.

```
def chi(n): # Dirichlet character                                                     
    n = n%12
    if n == 1 or n == 11:
        return 1
    if n == 5 or n == 7:
        return -1
    return 0 
```

Now the three versions that are puzzling me. First we have the obvious one-liner, direct from a definition of eta in terms of Jacobi theta functions.

```
def eta_Dedekind_theta(tau, bound = 50):
    assert tau.imag > 0
    r = Exp(Pi*I*tau/12)
    # sum_1^infty chi(n) r^(n^2)                                                      
    return sum([chi(n)*r**(n**2) for n in range(1,bound+1)]) 
```

Second we have the obvious modification of the one-liner: replace the list comprehension with a generator expression.

```
def eta_Dedekind_theta_round(tau, bound = 50):
    assert tau.imag > 0
    r = Exp(Pi*I*tau/12)
    # sum_1^infty chi(n) r^(n^2)                                                      
    return sum((chi(n)*r**(n**2) for n in range(1,bound+1))) 
```

But this version is ever so slightly *slower* - why does replacing the list comprehension with a generator slow things down? Finally, here is the version I coded first. I thought this was very clever, as it avoids exponentiation with quadratically large exponent.

```
def eta_Dedekind_theta_clever(tau, bound = 50):
    assert tau.imag > 0
    r = Exp(Pi*I*tau/12)
    r2 = r**2
    lin = 1
    quad = r
    sum = 0
    # sum_1^infty chi(n) r^(n^2)                                                      
    for n in range(1, bound+1):
        sum = sum + chi(n)*quad # n^2                                                 
        lin = lin*r2 # 2n                                                             
        quad = quad*lin*r # n^2 + 2n + 1 = (n+1)^2                                    
    return sum 
```

Indeed, this version is ever so slightly faster than both of the previous. But I thought that this would be linear while the one-liners would be very slow due to the cost of exponentiation. But that is not the case: timings show that *all* of them are linear in "bound" with roughly similar constants. I guess I don't understand the cost of operations in python.

# objective-c - 动画的 UIView 子视图

> ID：10873514
> 
> 赞同：0
> 
> 时间：2012-06-03T20:00:55.300
> 
> 标签：objective-c, ios, animation, core-animation, subview

我的目标是为我的 UI 设置动画，我正在使用 UIView 动画。问题是我一次需要多个动画，但显然我一次只能执行一个 UIView 动画。我之前已经问过这个主题的问题（[多个 UIView 动画](https://stackoverflow.com/questions/10792026/multiple-uiview-animations)），所有响应者都说我必须使用类似的方法为动画设置一个委托，`animationDidStop:performSelector:`但我想知道是否可以改为将子视图添加到主视图并同时执行动画在每个子视图上。此外，我无法执行背靠背动画，我想也许我可以在 view1 上执行动画，然后在 view2 上执行动画而无需委托。

例如：

```
//Header
@property (nonatomic, strong) UIView *view1;
@property (nonatomic, retain) UIView *view2;

//Implementation
@synthesize view1;
@synthesize view2;

//ViewDidLoad
view1 = [[UIView alloc]initWithFrame:CGRectMake(0,0,480,640)];
view2 = [[UIView alloc]initWithFrame:CGRectMake(0,0,480,640)];

view1.backgroundColor = [UIColor clearColor];
view2.backgroundColor = [UIColor clearColor];

[performAnimationsOn View1]; //I don't know the code I would put here because the code 
                             //I usually use is [UIView beginAnimation:@"animation"
                             //context:nil]; but that is a class method and I am not
                             //sure how to perform an animation on a specific subview.
[performAnimationsOn View2]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T20:04:34.163

我在这里看不到问题，如果您需要同时为两个不同的视图设置动画，请执行以下操作：

```
//First add these subviews
[self.view addSubview:view1];
[self.view addSubview:view2];

[UIView beginAnimations:@"Animation1" context:nil];
[UIView setAnimationDidStopSelector:@selector(animationDidStop:finished:context:)];
[UIView setAnimationDelegate:self];
[UIView setAnimationDuration:1];
//Do something with view 1 move, change alpha, change transformation etc..    
[UIView commitAnimations]; 
```

还添加以下功能

```
- (void) animationDidStop:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context
{
    if ([animationID isEqualToString:@"Animation1"]) {
        [UIView beginAnimations:@"Animation2" context:nil];
        [UIView setAnimationDidStopSelector:@selector(animationDidStop:finished:context:)];
        [UIView setAnimationDelegate:self];
        [UIView setAnimationDuration:1];
        //Do something with view 2 move, change alpha, change transformation etc..    
        [UIView commitAnimations];
    }
    else if ([animationID isEqualToString:@"Animation2"]) {
        [UIView beginAnimations:@"Animation3" context:nil];
        [UIView setAnimationDidStopSelector:@selector(animationDidStop:finished:context:)];
        [UIView setAnimationDelegate:self];
        [UIView setAnimationDuration:1];
        //Do something with view 3 move, change alpha, change transformation etc..    
        [UIView commitAnimations];
    }
    //And so on.....
} 
```

动画应按顺序发生

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T20:49:28.780

这听起来像是您可能会考虑使用 CABasicAnimations 和可能的 CAAnimation 组来执行动画的情况。

当您使用 UIView beginAnimationsContext 时，您在上下文范围内修改的隐式属性（例如，在您调用 [UIView commitAnimations] 之前）将同时进行动画处理。

使用 CABasicAnimations 稍微复杂一些，但可以适应您想要的行为类型。例如，您可以将动画添加到特定视图（而不是它们的层）。

这是一个简单的[教程](http://www.informit.com/articles/article.aspx?p=1431312&seqNum=5)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T21:54:35.770

您可以使用多种方法并让 animationDidStop 方法依次调用每个动画，正如另一张海报所建议的那样。

但是，使用新的基于块的动画方法（如 animateWithDuration:animations:completion）更简洁、更容易。

该方法允许您传入一个完成块，该块在动画完成后执行。然后，该代码可以调用序列中的下一个动画。

如果需要，动画块可以同时为多个视图设置动画。（对于这个问题，beginAnimations/commitAnimations 也是如此。您只需在 beginAnimations 和 commitAnimations 调用之间对多个视图应用更改。

# c++ - 螺纹泄漏的症状

> ID：10873519
> 
> 赞同：1
> 
> 时间：2012-06-03T20:01:36.003
> 
> 标签：c++, c, multithreading, pthreads, memory-leaks

我有一个 C++ 应用程序没有调用`pthread_join`并且有 O（运行时间）线程。我的问题是 - 这将如何影响服务器任务的运行状况？在 C++ 任务崩溃或无法启动新线程之前，是否有固定数量的线程？这会表现为错误代码`pthread_create`吗？它只是泄漏内存还是会减慢其余应用程序的处理时间？

线程正在完成（顶级函数正在返回），只是没有被`pthread_join`编辑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T20:04:46.057

POSIX 手册说[`pthread_create`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_create.html)可以返回`EAGAIN`：

> 系统缺乏创建另一个线程所需的资源，或者 **系统对进程 {} 中的线程总数施加的限制`PTHREAD_THREADS_MAX`将被超出**。

一个简单的解决方法是使用[`pthread_detach`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_detach.html)或使用属性和标记分离的线程`pthread_attr_setdetachstate`。然后当他们死时，他们只是被收集起来。

# php - 使用 ajax 保存 wordpress 设置 api 选项，

> ID：10873537
> 
> 赞同：7
> 
> 时间：2012-06-03T20:04:03.303
> 
> 标签：php, ajax, wordpress, options

我一直在努力解决这个问题已经有一段时间了。我有一个主题的选项页面，并注册了一个选项。

每次用户按下保存按钮时，我一直在尝试通过 ajax 更新选项，这是我的代码。

JS：

```
 function save_main_options_ajax() {

        $('.main-options-form').submit( function () { 

            var b       =  $(this).serialize(),
                optdata =  { action : "wp_ajax_main_options_save", data: b };

            $.post( ajaxurl, b, function (response) {
                if (response == 1 ) { alert('sucess'); }
                else { alert(optdata);}
            });
            return false;               
        });
    }
save_main_options_ajax(); 
```

php：

```
 function main_options_save_ajax() { 

        check_ajax_referer('_wpnonce', '_wpnonce' );

        $data = $_POST;
        unset($data['option_page'], $data['action'], $data['_wpnonce'], $data['_wp_http_referer']);

        if ( update_option('main_options', $data ) )
        { die(1); }
        else { die (0); }           
}
add_action('wp_ajax_main_options_save', 'main_options_save_ajax' ); 
```

我在萤火虫中看到的响应是 0。我不确定我在这里缺少什么，我已经尝试了一些变化，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T20:17:25.053

在使用设置 API 时，找到了一种通过 ajax 保存设置的方法。

我在代码中犯的主要错误是我使用了错误的 url 路径。

`ajaxurl`而不是使用在 wordpress 中进行 ajax 调用时通常使用的标准；我们使用您的设置 api 表单的操作调用，即`options.php`.

因为我们使用这个 url 路径，所以不需要 php 函数来处理请求，因为 options.php 会为我们处理所有这些。

因此，我们只需要处理在我的实例中看起来像这样的 js 函数。

```
 function save_main_options_ajax() {
           $('.main-options-form').submit( function () {
                var b =  $(this).serialize();
                $.post( 'options.php', b ).error( 
                    function() {
                        alert('error');
                    }).success( function() {
                        alert('success');   
                    });
                    return false;    
                });
            }
 save_main_options_ajax(); 
```

就是这样，保存后我得到了成功警报，我的选项被保存了。

**注意：**我只注意到一个特点。在完成`POST`请求并显示成功警报后，该页面会`GET`请求您的选项页面的页面版本，该页面版本已将参数`&settings-updated=true`添加到 url 的末尾。

我不知道这是否值得担心，我没有遇到任何问题，但从长远来看，这可能是需要考虑的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T04:21:14.053

尝试将 action value 从 更改`wp_ajax_main_options_save`为`main_options_save`。Wordpress 会`wp_ajax_`自动将前缀添加到您的操作值中，例如`wp_ajax_{your_posted_action}`.

[在此处](http://www.garyc40.com/2010/03/5-tips-for-using-ajax-in-wordpress/)阅读 5 个出色的提示，了解更多最佳实践。

# php - 如何找到此代码在 Joomla 中的位置？

> ID：10873544
> 
> 赞同：0
> 
> 时间：2012-06-03T20:04:50.347
> 
> 标签：php, joomla

当我创建一个网站时，我在完成订单时发现了一个数字，并且无法在来源中找到它。通常我只是搜索必要的短语\句子或单词，但我无法通过搜索“1”找到它。

我怎样才能找到它的位置？

![在此处输入图像描述](../Images/23034c0b8f8f8860d2297c1a66e545a6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:15:10.823

它应该在美德玛特组件中，但在不知道你的 html 的情况下，我只能猜测

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T04:11:21.737

我会搜索：
1\. 模板
2\. 文章
3\. 模块/插件
4\. 祝你好运

# javascript - 检查是否在卸载前保存了更改

> ID：10873546
> 
> 赞同：2
> 
> 时间：2012-06-03T20:05:15.573
> 
> 标签：javascript, dom-events, onbeforeunload, onunload

我有以下 JavaScript

**编辑：包括更改已保存的分配**

```
 var changesSaved = true;

    $(document).ready(function () {

        $(".applyChanges").click(function (e) {
            e.preventDefault();
            var id = (this).id;
            var dayofweek = document.getElementById("dayofweek" + id).value;
            var hour = document.getElementById("hour" + id).value;
            var duration = document.getElementById("duration" + id).value;
            $.ajax({
                url: '@Url.Action("ApplyChanges")',
                type: 'POST',
                data: {
                    id: id,
                    dayofweek: dayofweek,
                    hour: hour,
                    duration: duration
                },
                success: function (data) {
                    $('#Calendar').fullCalendar('refetchEvents')
                    $('#Calendar2').fullCalendar('refetchEvents')
                    changesSaved = false;
                }
            });
        });
    });

window.onbeforeunload = function () {
    if (changesSaved == true) {
        return true;
    } else {
        return ("You havent saved your changes. Are you sure you want to leave the page?")
    }
} 
```

但无论`changesSaved`设置什么，都会提示消息。

实际上我实际得到的是以下内容：

![在此处输入图像描述](../Images/11faa2418976fa60fbb9cd08a6ae4884.png)

或者如果`changesSaved`设置为 false，则改为 false。

我不能这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T20:09:42.357

```
<body onbeforeunload="return bye()">

function bye(){
    if(changesSaved) {
        return "You havent saved your changes."
    }
} 
```

我就是这样做的。

或在纯 JavaScript 中：

```
window.onbeforeunload = function() {
    if (changesSaved) {
        return "You haven't saved your changes.";
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T20:10:04.563

```
window.onbeforeunload = function () {
     var changesSaved = confirm("You havent saved your changes. Are you sure you want to leave the page?");
    if (changesSaved) {
        return true;
    } else {
        return false;
    } 
```

# ruby-on-rails - Rails + Delayed Job：存储自定义作业类的正确位置在哪里？

> ID：10873550
> 
> 赞同：20
> 
> 时间：2012-06-03T20:06:02.387
> 
> 标签：ruby-on-rails, ruby, delayed-job, directory-structure

我是 delay_job 的新手，我开始编写自己的“自定义作业”。每个自定义作业基本上只是一个常规的 ruby​​ 类，但我不确定这些自定义作业类通常存储在项目目录结构中的什么位置。

我在想lib，但此时lib似乎是一个垃圾抽屉：/（也许没关系）

谢谢！！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-03T20:46:29.133

常见的方法是在文件`jobs`夹下创建文件`app`夹。但是您唯一应该关心的是它们是您的文件，因此请以您认为最适合自己的方式进行操作。

# android - 有没有可能制作/创建这样我丢失的密钥库？

> ID：10873558
> 
> 赞同：0
> 
> 时间：2012-06-03T20:06:47.133
> 
> 标签：android, keystore

不幸的是，我的硬盘坏了，我丢失了所有数据！我的密钥库包括在内。我在市场上发布了一些应用程序，我想继续更新它们。知道我知道旧密钥库的密码，是否有可能制作这样的旧密钥库。请帮忙。非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T20:09:01.030

不。

下次您应该使用备份服务/系统。自己通过电子邮件发送密钥可能也足以保护它。

# php - PHP 变量弄乱了 img 输入

> ID：10873559
> 
> 赞同：1
> 
> 时间：2012-06-03T20:06:49.683
> 
> 标签：php, stripslashes

在我的代码中，我让 PHP 将变量写入文本文件。

```
$stringData = '<p class="blogcontent">' . $content . '</p>';
fwrite($fh, $stringData); 
```

变量`$content`包括这个`<img src="bpictures/blue.jpg" width="200" />`

但是当变量被写入文本文件时，它被写入其中。

```
<img src=\"bpictures/blue.jpg\" width=\"200\" /> 
```

并且它导致图像在返回到 html 时不起作用。我尝试过使用`echo stripslashes($content);`，但这不起作用，有什么方法可以将我在变量中的直接代码写入文本文件？我在谷歌上找不到答案。

内容是如何制作的。

```
<span class="addblog">Content (Include img tags from below):</span> <textarea cols="90" rows="50" name="bcontent">  </textarea> <br /> 
```

提交时。

```
$content = $_POST["bcontent"]; 
```

代码还有更多内容，但这就是大部分影响内容的全部内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T20:16:08.037

问题是您启用了[magic_quotes 。](http://php.net/manual/en/security.magicquotes.php)

如果你不能在**php.ini**上禁用它们，你可以使用我在stackoverflow上找到的这个函数，然后在运行时禁用：

```
<?php
if (get_magic_quotes_gpc()) {
    function stripslashes_gpc(&$value)
    {
        $value = stripslashes($value);
    }
    array_walk_recursive($_GET, 'stripslashes_gpc');
    array_walk_recursive($_POST, 'stripslashes_gpc');
    array_walk_recursive($_COOKIE, 'stripslashes_gpc');
    array_walk_recursive($_REQUEST, 'stripslashes_gpc');
}
?> 
```

* * *

[在这里](https://stackoverflow.com/questions/10440698/php-escaping-quotes-automatically-when-using-fwrite)找到与此主题相关的原始帖子！

那里还有其他解决方案，但这是我使用过的解决方案。

* * *

## 已编辑

从上面的链接一个简单的解决方案来处理`$_POST`：

```
if (get_magic_quotes_gpc()) {
  $content = stripslashes($_POST['bcontent']);
}else{
  $content = $_POST['bcontent'];
} 
```

# sql-server - 迁移到 SQL Server 2012 的访问权限

> ID：10873560
> 
> 赞同：1
> 
> 时间：2012-06-03T20:06:51.087
> 
> 标签：sql-server, ms-access, ms-access-2007, data-migration, database-migration

对于一个项目，我需要将一个Access数据库迁移到SQL server 2012 express，我找到了一些方法来做到这一点，比如使用Microsoft up-sizing，但是这个问题不是很技术，只是为了找出替代方法，数据库在访问包含机密数据，所以我不允许查看数据，我想知道是否有任何程序可以帮助我在不查看数据库本身的情况下实现迁移以及如何验证两者中的数据是否准确。我没有数据库背景，所以具体的方向和资源很有用。我不知道如何搜索特定的方法（用于迁移）所以给我一些方法，这样我就可以继续我的研究了。（

> DB：Access 2007 目标：SQL server express 2012。SQL server 2012 中有什么工具可以实现这个吗？如何在不查看数据的情况下检查数据（表、查询、关系、数据本身是否迁移正确以及如何处理数据格式问题）（不允许）我正在寻找一种自动方式。

感谢您的帮助和考虑

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T22:01:11.673

Microsoft 为 Microsoft Access 97 及更高版本到 SQL Server 2005-2012 和 Azure 提供迁移助手。请参阅[http://www.microsoft.com/en-us/download/confirmation.aspx?id=28763](http://www.microsoft.com/en-us/download/confirmation.aspx?id=28763)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T20:14:03.717

在 SQL 2012 实例上创建数据库。右键单击该数据库并选择任务/导入数据。选择一个访问数据库作为源。编辑映射，使其符合您的喜好，然后导入。迄今为止最简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T06:43:49.647

当您想从 SQL SERVER 2008 R2 客户端（SSMS 2008）到 SQL SERVER 2012 实例创建/编辑数据库图或编辑表时，您将收到如下所示的错误：

> 此后端版本不支持设计数据库图表或表格。（MS 可视化数据库工具）

SQL Server 2008 R2似乎不支持SQL Server 2012 Database Diagram Table Modify。解决方案：安装 SQL SERVER 2012 以访问以下链接中的功能

[http://www.microsoft.com/en-us/download/details.aspx?id=29062](http://www.microsoft.com/en-us/download/details.aspx?id=29062)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-27T12:22:20.783

1.  SQL server 迁移助手很有帮助。
2.  SQL 服务器导入数据选择源作为 MS Access（MS Jet 数据库引擎）并选择目标作为 SQL Server，如果需要，可以使用单个表列的映射。我都试过了，而且效果很好。

# php - strftime 在 PHP 中使首字母大写（大写）

> ID：10873562
> 
> 赞同：6
> 
> 时间：2012-06-03T20:07:02.343
> 
> 标签：php, strftime

我有代码：

```
<?php echo strftime("%Y %B %e, %A")?> 
```

在某些语言中，我得到：

> 2012 年 3 月，多明戈

我希望所有单词的第一个字母都是大写（大写），所以它看起来像：

> 2012 Junio 3，多明戈

我在网上没有找到任何答案，有人知道吗？:)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-03T20:09:33.423

尝试`echo ucwords(strftime("%Y %B %e, %A"));`

[http://php.net/manual/en/function.ucwords.php](http://php.net/manual/en/function.ucwords.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-03T20:12:05.663

```
echo ucwords(strftime("%Y %B %e, %A")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T20:09:23.083

ucwords 是你的功能： http: [//php.net/manual/en/function.ucwords.php](http://php.net/manual/en/function.ucwords.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-04T13:58:10.167

尝试像这样设置输出的样式：

```
strftime('<span style="text-transform: capitalize;">%Y %B %e, %A</span>') 
```

或者

```
echo '<span style="text-transform: capitalize;">' . strftime('%Y %B %e, %A') . '</span>'; 
```

这样您就可以选择要大写的单词。我猜你的情况`ucwords`是可行的，因为你希望所有的单词都以大写字母开头。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T20:15:20.287

```
$ php -a
Interactive shell

php > $x = strftime("%Y %B %e, %A");
php > $str = explode(" ", $x);
php > foreach ($str as $i) { print ucfirst($i) . " "; };
2012 June  3, Sunday 
php > 
```

# clojure - Clojure 程序源代码元数据是否存在，是否可以轻松访问？

> ID：10873566
> 
> 赞同：1
> 
> 时间：2012-06-03T20:08:04.580
> 
> 标签：clojure

我的问题是 Clojure 程序源代码元数据是否存在，是否易于访问？

我正在考虑编写一个函数包装器，它可以接受一个要调用的函数、一个调试标志和任意文本（例如，源代码中的调用位置）以在设置调试标志时打印。清除后，只会调用该函数。

我想知道是否可以从当前运行的函数中收集到，而不是硬编码一个位置。我不知道这样的信息是否可用。否则，我当然可以在调用该函数的任何位置提供任意位置信息。

以下是此类函数的示例：

```
(defn test-fn
    []
    (println "This is a test function."))

(defn fn-call-loc
    [fn dbg-flag & locate-info]
    (if (= 1 dbg-flag)
        (println locate-info))
    (fn))

repl-test.core=> (fn-call-loc test-fn 1 "Called from main.")
(Called from main.)
This is a test function.
nil
repl-test.core=> 
```

我的问题不是我的硬编码“从主调用。”，是否有关于调用 fn-call-loc 位置位置的可用元数据？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-19T03:24:10.320

有讨论元数据的[元数据 clojure.org 文档](http://clojure.org/metadata)页面。为了做你想做的事，我会像这样改变 fn-call-loc ：

```
(defn fn-call-loc
  [fv dbg-flag]
  (if dbg-flag
    (let [n (-> (:ns (meta fv)) (.getName))
          f (:name (meta fv))
          l (:line (meta fv))]
      (println (str "Called from " n "/" f " which is defined on line " l))))
  (fv)) 
```

你这样称呼它：

```
(fn-call-loc #'test-fn true) 
```

或这个：

```
(fn-call-loc (var test-fn) true) 
```

不过也有一些陷阱。

*   在 fn-call-loc 中将所有“fv”实例更改为“fn”，您的结果可能来自 clojure.core，而不是您的命名空间。
*   如果你直接传递一个符号，你会得到一个异常。需要 Var 对象，请参阅[（var 符号）clojure.org 文档](http://clojure.org/special_forms#Special%20Forms--%28var%20symbol%29)和阅读器文档页面[中的 Var-quote 。](http://clojure.org/reader#The%20Reader--Macro%20characters)
*   可能还有一些我现在想不出来的。

This might be a good place for a macro but I think that's another question.

# ruby - 不能在 Ruby 中使用拆分

> ID：10873571
> 
> 赞同：0
> 
> 时间：2012-06-03T20:08:54.173
> 
> 标签：ruby

我正在尝试`split`在 Ruby 中使用，但出现此错误：

> `importantFuncs'：为 nil:NilClass (NoMethodError) 调用私有方法`split'

我尝试添加`require String`and `require string`，但都没有工作。

```
require 'socket'
class IRC
    def initialize(ip, port)
        @s = TCPSocket.new(ip, port)
        print 'Now connected to ip ', ip, ' at port ', port, "\n"
    end
    def getPacket()
        line = @s.gets
        puts line
    end
    def closeConnection()
        @s.close
    end
    def sendPacket(packet)
        @s.write(packet)
    end
    def importantFuncs(nick)
        sendPacket("NICK #{nick}")
        z = getPacket
        @m = z.split(':')
        sendPacket("NICK #{nick}")
    end
    #def joinChannel(
end
ip = '127.0.0.1'
port = '6667'
i = IRC.new(ip, port)
i.importantFuncs('test')
i.getPacket 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T20:13:41.660

您的`getPacket`方法返回`nil`而不是 string `line`。

这是因为在 Ruby 中，每个方法都默认返回一个值。这个值将是方法中最后一条语句的值。您也可以像在其他编程语言中一样使用`return`语句来重新定义这种行为，但在 Ruby 中并不经常使用。

```
def getPacket()
  line = @s.gets
  puts line # returns nil, and whole method returns nil too
end 
```

所以，你应该`@s.gets`在这个方法中做最后一个表达式

```
def getPacket()
  @s.gets
end 
```

或添加`line`到最后，如果你真的需要打印这个`line`

```
def getPacket()
  line = @s.gets
  puts line
  line
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T20:11:50.310

您的`getPacket`方法返回`nil`. 您可能希望它返回`line`或其他东西。只需添加`return line`到`getPacket`.

# .net - 在 VB.NET 中为 WinForms 禁用的文本框中启用滚动条

> ID：10873583
> 
> 赞同：2
> 
> 时间：2012-06-03T20:10:17.457
> 
> 标签：.net, vb.net, winforms, textbox, scroll

我试图允许在 Multiline-TextBox 中滚动，即使 TextBox 设置为

```
textbox.Enabled = False 
```

这是不可能的，因为滚动条也被*Enabled* -Command 禁用。

这里的默认解决方案是设置

```
textbox.ReadOnly = True
textbox.Enabled = True 
```

但这对我来说并没有真正的作用。使用*ReadOnly*，我仍然可以选择 TextBox 的文本并将光标放在其中。但由于我在同一个表单上有正常（非*多*行文本框）和其他控件，我不希望这种情况发生。我希望与所有其他禁用的文本框具有完全相同的行为。

对于其他所有内容，例如模仿禁用文本框的颜色等，*ReadOnly* -Property 有一个合法的解决方法，但我找不到任何用于选择文本和放置光标的方法。

**更新：**

[有了这里](https://stackoverflow.com/questions/3524754/scrollbar-flicker-when-calling-enablescrollbar)的一些提示，我尝试使用 WIN32 API，但它没有按预期工作：

```
Imports System.Windows.Forms
Imports System.Runtime.InteropServices

Public Class TestTextBox
    Inherits TextBox

    Private Class Native
        <DllImport("user32.dll")> _
        Friend Shared Function EnableScrollBar(ByVal hWnd As IntPtr, ByVal wSBflags As UInteger, ByVal wArrows As UInteger) As Boolean
        End Function
        <DllImport("User32.dll")> _
        Friend Shared Function SendMessage(ByVal hWnd As IntPtr, ByVal msg As UInteger, ByVal wparam As Integer, ByVal lparam As Integer) As Integer
        End Function

        Public Const WM_SETREDRAW As Long = &HB
        Public Const ESB_ENABLE_BOTH As UInteger = 0
        Public Const SB_VERT As UInteger = 1
    End Class

    Public Sub Change() 'Gets called by a Button in my example.
        'Native.SendMessage(Me.Handle, Native.WM_SETREDRAW, New IntPtr(0), IntPtr.Zero)
        Native.EnableScrollBar(Me.Handle, Native.SB_VERT, Native.ESB_ENABLE_BOTH)
        'Native.SendMessage(Me.Handle, Native.WM_SETREDRAW, New IntPtr(1), IntPtr.Zero)
        Me.PerformLayout()
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T17:34:52.690

我认为这应该有效。HideCaret 确保插入符号在文本框为只读的情况下隐藏。其他 WM 拦截阻止用户使用鼠标或键盘选择任何内容。

```
Imports System.Runtime.InteropServices

Public Class CustomTextbox
    Inherits System.Windows.Forms.TextBox

    Private Const WM_KEYDOWN = &H100
    Private Const WM_SYSKEYDOWN = &H104
    Private Const WM_MOUSEMOVE = &H200

    <DllImport("user32.dll")> _
    Private Shared Function HideCaret(ByVal hwnd As IntPtr) As Integer
    End Function

    Protected Overrides Sub OnGotFocus(ByVal e As System.EventArgs)
        If Me.ReadOnly Then HideCaret(Me.Handle)
        MyBase.OnGotFocus(e)
    End Sub

    Protected Overrides Sub WndProc(ByRef m As System.Windows.Forms.Message)
        If Me.ReadOnly And (m.Msg = WM_MOUSEMOVE) Or _
                           (m.Msg = WM_KEYDOWN) Or _
                           (m.Msg = WM_SYSKEYDOWN) Then Exit Sub
        MyBase.WndProc(m)
    End Sub
End Class 
```

# clojure - 在 Clojure 中从分层树结构创建 id 哈希映射的优雅方法

> ID：10873584
> 
> 赞同：2
> 
> 时间：2012-06-03T20:10:20.007
> 
> 标签：clojure, functional-programming

我正在编写一些 Clojure 代码，其中我有一个像这样的实体树：

```
foo1
 +-- bar1
 | +-- baz1
 | +-- baz2
 +-- bar2
   +-- baz3
foo2
 +-- bar3
   +-- baz4 
```

万一我荒谬的 ASCII 艺术没有意义，我有一个**foos**列表，每个都可以有零个或多个**bar**，每个可能有零个或多个**bazes**。

我要做的是生成一个哈希映射，其中键是**baz** ID，值是**bar** ID；即上图将是：

```
{"baz1" "bar1", "baz2" "bar1", "baz3" "bar2", "baz4" "bar3"} 
```

我的数据结构如下所示：

```
(def foos [
  {:id "foo1" :bars [
    {:id "bar1" :bazes [
      {:id "baz1"}
      {:id "baz2"}
    ]}
    {:id "bar2" :bazes [
      {:id "baz3"}
    ]}
  ]}
  {:id "foo2" :bars [
    {:id "bar3" :bazes [
      {:id "baz4"}
    ]}
  ]}
]) 
```

这是我构建 baz-to-bar 映射的代码：

```
(defn- baz-to-bar [foos]
  (let [b2b-list (flatten (for [f foos] (flatten (for [bar (:bars c)] (flatten (for [baz (:bazes bar)] [(:id baz) (:id bar)]))))))
        b2b-map (if (not (empty? b2b-list)) (apply hash-map b2b-list))]
    (if b2b-map [:b2b (for [baz (keys b2b-map)] (entry-tag baz (b2b-map baz)))]))) 
```

它有效，但非常迟钝。

谁能在 Clojure 中提出一种更优雅、更有希望地道的方式来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T21:52:12.137

```
(into {} (for [foo foos
               {bar-id :id :as bar} (:bars foo)
               {baz-id :id} (:bazes bar)]
           {baz-id bar-id})) 
```

# c++ - 单独的 cpp 文件中的模板化函数定义

> ID：10873588
> 
> 赞同：0
> 
> 时间：2012-06-03T20:11:02.900
> 
> 标签：c++, templates

> **可能重复：**
> [为什么模板类的实现和声明应该在同一个头文件中？](https://stackoverflow.com/questions/3749099/why-should-the-implementation-and-the-declaration-of-a-template-class-be-in-the)
> [模板类成员函数实现是否总是必须放在 C++ 的头文件中？](https://stackoverflow.com/questions/8662517/do-template-class-member-function-implementations-always-have-to-go-in-the-heade)

我在这里犯了一些愚蠢的错误，但我看不出是什么。

这编译：

```
//start of header.h
namespace ns
{
    class A
    {
    public:
        template <class t>t func();
    };
    template<class t> t A::func()
    {
        t a;
        return a;
    }
}
//end of header.h 
```

//imp.cpp 的开始

//imp.cpp 结束

但以下没有：

```
//start of header.h
namespace ns
{
    class A
    {
    public:
        template <class t>t func();
    };
}
//end of header.h

//start of imp.cpp
#include "header.h"
using namespace ns;

template<class t> t A::func()
{
    t a;
    return a;
} 
```

//imp.cpp 结束

错误是：错误LNK2019：函数_main中引用的未解析的外部符号“public：int __thiscall ns::A::func(void)”(??$func@H@A@ns@@QAEHXZ)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T20:12:59.500

模板必须在头文件中实现，因为它们在实例化之前无法编译。

看到这个答案： [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T20:19:46.723

您应该阅读[将 C++ 模板函数定义存储在 .CPP 文件](https://stackoverflow.com/questions/115703/storing-c-template-function-definitions-in-a-cpp-file)中。模板专业化还有其他情况 - 它更像普通函数（在 .hpp 中声明，在 .cpp 中定义）。如果您想在标题中进行专门化，您应该记住添加内联（因为 ODR）。

[http://en.wikipedia.org/wiki/One_Definition_Rule[ODR][1]](http://en.wikipedia.org/wiki/One_Definition_Rule[ODR][1])

# css - 尝试使用 jquerymobile 放置内联 elts

> ID：10873589
> 
> 赞同：0
> 
> 时间：2012-06-03T20:11:08.650
> 
> 标签：css, jquery-mobile

[http://jsfiddle.net/ca11111/WEuzB/](http://jsfiddle.net/ca11111/WEuzB/)

我试着让评论和作者出现在同一行，作者+删除按钮右浮动

但是 jquery-mobile 很复杂，任何帮助或建议将不胜感激

谢谢

**在这里更新**：http : [//jsfiddle.net/ca11111/WEuzB/8/](http://jsfiddle.net/ca11111/WEuzB/8/)几乎不错

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T21:00:01.497

试试这个 - [http://jsfiddle.net/WEuzB/5/](http://jsfiddle.net/WEuzB/5/)

```
<div style="width:100%; overflow:hidden;">
    <div style="display:inline-block; float:left; height:40px; line-height:40px;">how you?</div>
    <div style="display:inline-block; float:right;">
        <b>Sarah Pink</b>
        <a href="" type="button" data-inline="true" data-iconpos="notext" data-icon="delete"></a>
    </div>
</div> 
```

**更新**- 缩小高度 - [http://jsfiddle.net/WEuzB/10/](http://jsfiddle.net/WEuzB/10/)

CSS

```
.ui-li-static.ui-li { padding: 0 15px !important } /* need to redefine a jquery set style */ 
```

HTML

```
<div style="width:100%; overflow:hidden;">
    <div style="display:inline-block; float:left; height:40px; line-height:40px;">how you?</div>
    <div style="display:inline-block; float:right;">
        <b style="display:inline-block; float:left; height:40px; line-height:40px;">Sarah Pink</b>
        <a href="" type="button" data-inline="true" data-iconpos="notext" data-icon="delete"></a>
    </div>
</div> 
```

# java - 在每种情况下都使用具有一系列值的 switch 语句？

> ID：10873590
> 
> 赞同：102
> 
> 时间：2012-06-03T20:11:14.623
> 
> 标签：java, if-statement, switch-statement

在 Java 中，是否可以编写一个 switch 语句，其中每个 case 包含多个值？例如（尽管显然以下代码不起作用）：

```
switch (num) {
    case 1 .. 5:
        System.out.println("testing case 1 to 5");
        break;
    case 6 .. 10:
        System.out.println("testing case 6 to 10");
        break;
} 
```

我认为这可以在Objective C中完成，Java中有类似的东西吗？还是我应该只使用`if`,`else if`语句？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-06-03T20:49:46.767

Java 没有这种东西。为什么不只做以下事情？

```
public static boolean isBetween(int x, int lower, int upper) {
  return lower <= x && x <= upper;
}

if (isBetween(num, 1, 5)) {
  System.out.println("testing case 1 to 5");
} else if (isBetween(num, 6, 10)) {
  System.out.println("testing case 6 to 10");
} 
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2012-06-03T20:12:51.280

`switch`使用语句最接近这种行为的是

```
switch (num) {
case 1:
case 2:
case 3:
case 4:
case 5:
     System.out.println("1 through 5");
     break;
case 6:
case 7:
case 8:
case 9:
case 10:
     System.out.println("6 through 10");
     break;
} 
```

使用`if`语句。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2013-09-28T01:00:29.877

另一种选择是通过除法来使用数学运算，例如：

```
switch ((int) num/10) {
    case 1:
        System.out.println("10-19");
        break;
    case 2:
        System.out.println("20-29");
        break;
    case 3:
        System.out.println("30-39");
        break;
    case 4:
        System.out.println("40-49");
        break;
    default:
        break;
} 
```

但是，正如您所看到的，这只能在每种情况下固定范围时使用。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-06-03T20:14:44.370

我认为你不能在 Java 中做到这一点。最好的办法是将代码放在范围的最后一个案例中。

```
switch (num) {
  case 1: case 2: case 3: case 4: case 5: 
     System.Out.Println("testing case 1 to 5");
     break;
  case 6: case 7: case 8: case 9: case 10:
     System.Out.Println("testing case 6 to 10");
     break;
  default:
     //
} 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2018-03-04T16:00:45.187

我知道这篇文章很旧，但我相信这个答案值得一些认可。没有必要避免 switch 语句。这可以在 java 中完成，但通过 switch 语句，而不是案例。它涉及使用三元运算符。

```
public class Solution {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int num = Integer.parseInt(sc.nextLine());

        switch ((1 <= num && num <= 5 ) ? 0 :
                (6 <= num && num <= 10) ? 1 : 2) {

            case 0:
                System.out.println("I'm between one and five inclusive.");
                break;
            case 1:
                System.out.println("I'm between 6 and 10 inclusive.");
                break;
            case 2:
                System.out.println("I'm not between one and five or 6 and 10 inclusive.");
                break;
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2014-07-30T06:32:34.860

```
 case 1: case 2: case 3: case 4: case 5: 
         System.out.println("testing case 1 to 5");
         break;
  case 6: case 7: case 8: case 9: case 10:
         System.out.println("testing case 6 to 10");
         break;
  default:
         System.out.println("default"); 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-01-08T05:27:48.163

如果您必须使用开关，请尝试此操作。

```
public static int range(int num){ 
    if ( 10 < num && num < 20)
        return 1;
    if ( 20 <= num && num < 30)
        return 2;
    return 3;
}

public static final int TEN_TWENTY = 1;
public static final int TWENTY_THIRTY = 2;

public static void main(String[]args){
    int a = 110;
    switch (range(a)){
        case TEN_TWENTY: 
            System.out.println("10-20"); 
            break;
        case TWENTY_THIRTY: 
            System.out.println("20-30"); 
            break;
        default: break;
    }
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2016-04-16T08:27:35.530

或者您可以按预期使用您的单独案例并使用您的默认案例将范围指令指定为：

```
switch(n) {
    case 1 : System.out.println("case 1"); break;
    case 4 : System.out.println("case 4"); break;
    case 99 : System.out.println("case 99"); break;
    default :
        if (n >= 10 && n <= 15)
            System.out.println("10-15 range"); 
        else if (n >= 100 && n <= 200)
            System.out.println("100-200 range");
        else
            System.out.println("Your default case");
        break;   
} 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2019-04-30T03:03:12.110

从 Java 12 开始支持它。查看[JEP 354](http://openjdk.java.net/jeps/354)。这里没有“范围”的可能性，但也很有用。

```
switch (day) {
    case MONDAY, FRIDAY, SUNDAY -> System.out.println(6);//number of letters
    case TUESDAY                -> System.out.println(7);
    case THURSDAY, SATURDAY     -> System.out.println(8);
    case WEDNESDAY              -> System.out.println(9);
} 
```

您也应该能够在整数上实现它。请注意，您的 switch 语句必须是详尽的（使用`default`关键字，或在 case 语句中使用所有可能的值）。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-06-03T20:14:32.970

不，你不能那样做。你能做的最好的就是

```
case 1:
case 2:
case 3:
case 4:
case 5: 
  System.Out.Println("testing case 1 to 5");
break; 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2012-06-03T20:15:56.897

可以使用switch 语句允许的*fall through*`case`机制将多个条件分组在同一语句中，这在[Java 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)中有所提及，并在第[14.11 节中详细说明。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.11)[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)的[switch 语句](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.11)。

 *以下代码片段取自教程中的示例，它计算每个月的天数（从第 1 个月到第 12 个月编号）：

```
switch (month) {
    case 1: case 3: case 5:
    case 7: case 8: case 10:
    case 12:
        numDays = 31;
        break;
    case 4: case 6:
    case 9: case 11:
        numDays = 30;
        break;
    case 2:
        if (((year % 4 == 0) && 
             !(year % 100 == 0))
             || (year % 400 == 0))
            numDays = 29;
        else
            numDays = 28;
        break;
    default:
        System.out.println("Invalid month.");
        break;
} 
```

如您所见，要在单个语句中涵盖一系列值，`case`唯一的选择是逐个列出每个可能的值。作为一个额外的例子，这里是如何实现问题中的伪代码：

```
switch(num) {
    case 1: case 2: case 3: case 4: case 5:
        System.out.println("testing case 1 to 5");
        break;
    case 6: case 7: case 8: case 9: case 10:
        System.out.println("testing case 6 to 10");
        break;
} 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2016-01-17T18:57:31.297

这是一个美丽而简约的方式

```
(num > 1 && num < 5) ? first_case_method() 
                     : System.out.println("testing case 1 to 5")
                     : (num > 5 && num < 7)  ? System.out.println("testing case 5 to 7") 
                     : (num > 7 && num < 8)  ? System.out.println("testing case 7 to 8") 
                     : (num > 8 && num < 9)  ? System.out.println("testing case 8 to 9") 
                     : ... 
                     : System.out.println("default"); 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2013-12-22T03:24:53.773

您可以使用 an`enum`来表示您的范围，

```
public static enum IntRange {
  ONE_TO_FIVE, SIX_TO_TEN;
  public boolean isInRange(int v) {
    switch (this) {
    case ONE_TO_FIVE:
      return (v >= 1 && v <= 5);
    case SIX_TO_TEN:
      return (v >= 6 && v <= 10);
    }
    return false;
  }

  public static IntRange getValue(int v) {
    if (v >= 1 && v <= 5) {
      return ONE_TO_FIVE;
    } else if (v >= 6 && v <= 10) {
      return SIX_TO_TEN;
    }
    return null;
  }
} 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2016-05-26T19:37:30.920

使用`NavigableMap`实现，例如[`TreeMap`.](http://docs.oracle.com/javase/8/docs/api/java/util/TreeMap.html)

```
/* Setup */
NavigableMap<Integer, Optional<String>> messages = new TreeMap<>();
messages.put(Integer.MIN_VALUE, Optional.empty());
messages.put(1, Optional.of("testing case 1 to 5"));
messages.put(6, Optional.of("testing case 6 to 10"));
messages.put(11, Optional.empty());

/* Use */
messages.floorEntry(3).getValue().ifPresent(System.out::println); 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2014-05-18T09:20:31.397

@missingfaktor 的答案确实是正确的，但有点过于复杂。代码比它可能更冗长（至少对于连续间隔），并且需要重载/强制转换和/或长、浮点、整数等参数化

```
if (num < 1)
    System.Out.Println("invalid case: " + num); // you should verify that anyway
else if (num <= 5)
    System.Out.Println("1 to 5");
else if (num <= 10)
    System.Out.Println("6 to 10");
else if (num <= 42)
    System.Out.Println("11 to 42");
else    
    System.Out.Println("43 to +infinity"); 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2021-05-17T13:31:06.387

在阅读了所有评论后，我没有看到有人提到[增强的开关](https://docs.oracle.com/en/java/javase/13/language/switch-expressions.html)，在这种情况下你可以有多个值 ->

```
switch(value){
   case 1,2,3,4:
      //dosth
      break;
   case 7,9,10,23:
      //dosth
      break;
} 
```

并且由于在您的情况下，每种情况下只有一个表达式，因此您可以执行以下操作而无需`break`每种情况->

```
switch (value) {
    case 1, 2, 3, 4 -> System.out.println("one of 1,2,3,4 matched");
    case 7, 9, 10, 23 -> System.out.println("one of 7,9,10,23 matched");
} 
```

这是 Java 中增强开关的众多附加好处之一。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-04-16T06:56:08.617

对于 0..100 范围内的输入数字

```
int n1 = 75; // input value
String res; int n=0; 
int[] a ={0,20,35,55,70,85,101};

for(; n1>=a[n]; n++);
switch(6-n+1) {
  case 1: res="A"; break;
  case 2: res="B"; break;
  case 3: res="C"; break;
  case 4: res="D"; break;
  case 5: res="E"; break;
  default:res="F";
}
System.out.println(res); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-04-28T20:39:59.163

Java 不支持这种类型的行为。但是，如果您有一个需要此功能的大型项目，请考虑在您的项目中混合 Groovy 代码。Groovy 代码被编译成字节码，可以用 JVM 运行。我工作的公司使用 Groovy 编写服务类，使用 Java 编写其他所有内容。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-08-01T01:09:36.943

出色的贡献。如果它仍然有用，我找到了一个选项来分析字符串中是否有不同于字母和空格的字符：

```
string name = scEntry.nextLine();
int len = name.length(); 
int s = 0;
do { 
     int asc = name.codePointAt(s);
     switch ((asc == 32) ? 0 : (64 < asc && asc < 91) ? 1 : 
             (96 < asc && asc < 123) ? 2 : 99) {
         case 0, 1, 2 -> {
                  s++; 
                  break;
         }
         case 99 -> {
           s = 0;
           System.out.println("Type in only letters [A-Za-z]
                             or spaces");
           System.out.print("Type the user name again: ");
           name = scEntry.nextLine();
           len = name.length();
           break;
         }
} while (s < len);
s = 0; 
```

在这个例子中，字母的 ASCII 码和“空格”ASCII 码被分组并用数字 0、1 或 2 表示。与上述不同的 ASCII 码被分组在值“99”中，所以我可以将有关它们的任何信息告知用户。*

# javascript - JSON参数获取

> ID：10873591
> 
> 赞同：2
> 
> 时间：2012-06-03T20:11:17.550
> 
> 标签：javascript, jquery, json

我正在尝试构建一个应用程序，该应用程序使用使用 PHP 生成的 JSON，然后使用 JavaScript 进行管理。

目前它没有按预期工作，我不知道为什么。

代码片段：

```
$(document).ready(function(){

      var projects = <?= $json; ?>;
      $(window).bind('hashchange', function(){

         var potential = window.location.hash.substring(1);

         $.each(projects, function(i,project){

            if (project.permalink == potential)
            {
               alert(project.title);
               $('#title').text(project.title);
               $('#agency').text(project.agency);
            }
            else
            {
               alert('potential: ' + potential + '. project.permalink: ' + project.permalink);
            }
        });
      });
   }); 
```

因此，在更改 URL 的哈希部分后，我检查了永久链接是否列在我拥有的 JSON 块中。（永久链接值）。警报说这`project.permalink`是未定义的。

PHP 变量 $json 是使用 PHP 数组和 json_encode() 函数创建的。

JSON在这里：

```
 var projects = [{"hand-made-cards":{"id":"3","title":"Hand Made Cards","type":"","description":"","website_url":"http:\/\/northumberlhand-made.co.uk","agency":"-","permalink":"hand-made-cards","position":"1","added_by":"1","updated_by":"1","deleted_by":"0","published":"1","deleted":"0","datetime_added":"2012-06-03 16:42:14","datetime_updated":"2012-06-03 17:44:37","datetime_deleted":"0000-00-00 00:00:00","rel_id":"13"}},{"olive-design":{"id":"2","title":"Olive Design","type":"","description":"Olive Design website description. What happened here?","website_url":"http:\/\/olive-design.co.uk","agency":"Gardiner Richardson","permalink":"olive-design","position":"2","added_by":"1","updated_by":"1","deleted_by":"0","published":"1","deleted":"0","datetime_added":"2012-06-03 16:41:31","datetime_updated":"2012-06-03 17:43:50","datetime_deleted":"0000-00-00 00:00:00","rel_id":"14"}},{"riba-microsite":{"id":"1","title":"RIBA Microsite","type":"","description":"Some info abou the RIBA MS.","website_url":"http:\/\/ram.grtest.com","agency":"Gardiner Richardson","permalink":"riba-microsite","position":"3","added_by":"1","updated_by":"1","deleted_by":"0","published":"1","deleted":"0","datetime_added":"2012-06-03 16:40:55","datetime_updated":"2012-06-03 17:43:29","datetime_deleted":"0000-00-00 00:00:00","rel_id":"15"}}]; 
```

更新的 JSON 在这里，正如我所建议的那样，我已经删除了包装每个对象的附加对象：

```
 var projects = [[{"id":"3","title":"Hand Made Cards","type":"","description":"","website_url":"http:\/\/northumberlhand-made.co.uk","agency":"-","permalink":"hand-made-cards","position":"1","added_by":"1","updated_by":"1","deleted_by":"0","published":"1","deleted":"0","datetime_added":"2012-06-03 16:42:14","datetime_updated":"2012-06-03 17:44:37","datetime_deleted":"0000-00-00 00:00:00","rel_id":"13"}],[{"id":"2","title":"Olive Design","type":"","description":"Olive Design website description. What happened here?","website_url":"http:\/\/olive-design.co.uk","agency":"Gardiner Richardson","permalink":"olive-design","position":"2","added_by":"1","updated_by":"1","deleted_by":"0","published":"1","deleted":"0","datetime_added":"2012-06-03 16:41:31","datetime_updated":"2012-06-03 17:43:50","datetime_deleted":"0000-00-00 00:00:00","rel_id":"14"}],[{"id":"1","title":"RIBA Microsite","type":"","description":"Some info abou the RIBA MS.","website_url":"http:\/\/ram.grtest.com","agency":"Gardiner Richardson","permalink":"riba-microsite","position":"3","added_by":"1","updated_by":"1","deleted_by":"0","published":"1","deleted":"0","datetime_added":"2012-06-03 16:40:55","datetime_updated":"2012-06-03 17:43:29","datetime_deleted":"0000-00-00 00:00:00","rel_id":"15"}]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T20:20:27.680

实际上，您的 JSON 中有一个没有多大意义的额外级别：每个项目都包含在一个附加对象中（为了清楚起见，重新缩进了 JSON）：

```
[
    {
        "hand-made-cards": {
            "id":"3",
            "title":"Hand Made Cards",
            "type":"",
            "description":"",
            "website_url":"http:\/\/northumberlhand-made.co.uk",
            "agency":"-",
            "permalink":"hand-made-cards",
            "position":"1",
            "added_by":"1",
            "updated_by":"1",
            "deleted_by":"0",
            "published":"1",
            "deleted":"0",
            "datetime_added":"2012-06-03 16:42:14",
            "datetime_updated":"2012-06-03 17:44:37",
            "datetime_deleted":"0000-00-00 00:00:00",
            "rel_id":"13"
        }
    },

    {
        "olive-design": {
            "id":"2",
            "title":"Olive Design",
            "type":"",
            "description":"Olive Design website description. What happened here?",
            "website_url":"http:\/\/olive-design.co.uk",
            "agency":"Gardiner Richardson",
            "permalink":"olive-design",
            "position":"2",
            "added_by":"1",
            "updated_by":"1",
            "deleted_by":"0",
            "published":"1",
            "deleted":"0",
            "datetime_added":"2012-06-03 16:41:31",
            "datetime_updated":"2012-06-03 17:43:50",
            "datetime_deleted":"0000-00-00 00:00:00",
            "rel_id":"14"
        }
    },
    ... (snip) ... 
```

我的猜测是您的 PHP 代码中生成的 JSON 错误，需要更改它以在 JSON 数组的顶层生成每个项目，而不是包装在附加对象中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T20:22:10.440

查看您的 JSON 数据。你有一个对象列表...

```
[{"hand-made-cards":{key:val,...}}, 
 {"olive-design":{key:val,...}}]; 
```

你真的希望`{key:val,...}`作为列表的成员`projects`。目前，您有一个对象列表，其中每个对象都有一个键：值对。`project.hand-made-cards.permalink`您可以通过做或引用正确的值，`project.olive-design.permalink`但这可能不是您想要做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T20:18:13.967

根据您的示例 json: projects[0]["hand-made-cars"].permalink 已定义，但是当您在项目上执行 each 时，您会“循环”数组（在我的示例中有 0 )，并且您可能想要遍历项目 [0]，或者似乎更好地修复 json，并且不要在哈希周围添加数组，所以它看起来像：

```
projects = {"hand-made-cars":{...}, "other-cars": {...}} 
```

此外，如果你的 $json 是 json_encode 的输出，那么看看[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)你会看到有第二个参数。您可能想要使用 JSON_FORCE_OBJECT。

# javascript - HTML5 Canvas 能够在绘制图像后放大/缩小吗？

> ID：10873594
> 
> 赞同：4
> 
> 时间：2012-06-03T20:12:23.960
> 
> 标签：javascript, jquery, html, canvas, zooming

我的应用基于用户将图像放置在画布上（通过我创建的使用 lineTo() 和 arc() 来创建复杂形状的函数），然后让他们缩小，以便更深入地了解他们所做的事情. 类似地，他们可以加载其他人的创建并放大以在较低级别查看所有这些对象的详细外观。

这可能吗？当我想到缩放时，我在想谷歌地图类型的缩放。

如果不可能，是否有其他解决方案，例如使用常规图像和调整页面的一部分？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T20:31:59.477

所以这就是你的想法：[`scale()`](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Transformations#Scaling)。

```
ctx.save();
ctx.scale(2,2);    //zoom-in
doMyComplexShape();
ctx.restore(); 
```

# java - 无法从对象转换为布尔值

> ID：10873595
> 
> 赞同：20
> 
> 时间：2012-06-03T20:12:31.397
> 
> 标签：java, jsp, servlets, session-variables

**这是我收到的错误，**

```
org.apache.jasper.JasperException: Unable to compile class for JSP: 

    An error occurred at line: 13 in the jsp file: /index.jsp
    Cannot cast from Object to boolean 
```

这是我的代码：

**控制器小服务程序**

```
if(authentication.verifyCredentials(request.getParameter("username"), 
   request.getParameter("password")))
{
        session.setAttribute("username", request.getParameter("username"));
        session.setAttribute("loggedIn", true);
        dispatcher.forward(request, response);   
} 
```

*这个我也试过*

```
session.setAttribute("loggedIn", new Boolean(true)); 
```

**JSP**

```
<% 
    if(session.getAttribute("loggedIn") != null)
    {
        if(((boolean)session.getAttribute("loggedIn")))
        {
            response.sendRedirect("Controller"); 
        }
    }   
%> 
```

*是的，我进行了研究，也看到了以前的 stackoverflow[帖子](https://stackoverflow.com/questions/2206598/how-to-cast-object-to-boolean)；但是我仍然无法解决我的问题。请协助。*

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-03T20:17:19.533

尝试将其转换为`Boolean`（可为空）而不是`boolean`在 JSP 中：

```
if(((Boolean)session.getAttribute("loggedIn")))
{
    response.sendRedirect("Controller"); 
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-03T20:15:42.510

尝试

```
 if(((Boolean)session.getAttribute("loggedIn"))) 
```

代替：

```
 if(((boolean)session.getAttribute("loggedIn"))) 
```

属性必须被视为`Boolean`，而不是原始类型

# wcf - 图 api 发布分数导致 403 被禁止，但仅适用于某些用户？

> ID：10873599
> 
> 赞同：0
> 
> 时间：2012-06-03T20:13:01.123
> 
> 标签：wcf, facebook-graph-api

所以我成功地让我的应用程序使用我的帐户将分数发布到 Facebook。但是当我去实施排行榜时，我尝试使用我妻子的帐户。当它尝试提交她的分数时，它返回“远程服务器返回错误：（403）禁止”。经过验证的我的工作仍然正常。可以重复复制。

这是 WCF 服务。

```
<WebGet()>
<OperationContract()> _
Public Function postMyScore(id, score) As String
    'post user score using user's id, score and app's access_token
    Dim URL As String = "https://graph.facebook.com/" + id + "/scores"
    Dim webProxy As New System.Net.WebProxy(proxyURLremoved, True)
    Dim appToken = getAuthCode()

    Using client As New Net.WebClient
        client.Proxy = webProxy
        Dim reqparm As New Specialized.NameValueCollection
        reqparm.Add("score", score)
        reqparm.Add("access_token", appToken)
        Dim responsebytes = client.UploadValues(URL, "POST", reqparm)
        Dim responsebody = (New Text.UTF8Encoding).GetString(responsebytes)
        Return responsebody
    End Using

End Function 
```

**同样，当我以我的身份登录时，上述方法有效，但当我使用我妻子的帐户登录时则无效**

当我尝试使用 Graph API Explorer 复制帖子时，我收到以下错误（可能是出于安全考虑）

```
{
  "error": {
    "message": "(#240) Requires a valid user is specified (either via the session or via the API parameter for specifying the user.", 
    "type": "OAuthException", 
    "code": 240
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:56:58.310

我将 OAuth 对话框的 App Center 中的权限部分与登录按钮的 data-perms 属性混淆了。它们不是一回事；）

现在我的登录按钮看起来像这样，一切正常。

```
 <div id="fbLogin"><fb:login-button data-perms="publish_actions,friends_games_activity,user_games_activity" show-faces="false" width="200" max-rows="1"></fb:login-button></div> 
```

显然，应用程序所有者默认拥有所有权限。

# c - 如何有效地定义一个 128 位常量？

> ID：10873600
> 
> 赞同：5
> 
> 时间：2012-06-03T20:13:17.037
> 
> 标签：c, visual-studio, optimization, sse, intrinsics

我正在使用 MS Visual Studio 中的 SSE2 指令集。我正在使用它对 16 位数据进行一些计算。

假设我有 8 个值加载到 SSE 寄存器中。我想为`42`所有这些添加一个常量（例如）。这是我希望我的代码看起来的样子。

```
__m128i values; // 8 values, 16 bits each
const __m128i my_const_42 = ???; // What should i write here?
values = _mm_add_epi16(values, my_const_2); // Add 42 to the 8 values 
```

现在，我如何定义常量？以下两种方式可行，但一种效率低下，另一种难看。

1.  `my_const_42 = _mm_set_epi16(42, 42, 42, 42, 42, 42, 42, 42)`- 编译器生成 8 个命令来“构建”常量
2.  `my_const_42 = {42, 0, 42, 0, 42, 0, 42, 0, 42, 0, 42, 0, 42, 0, 42, 0}`- 很难理解发生了什么；更改`42`为 eg`-42`并非易事

有什么方法可以更方便地表达 128 位常量吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T20:57:06.767

百分之九十的战斗是找到正确的内在。MSDN 库组织得很好，从[这个页面](http://msdn.microsoft.com/en-us/library/26td21ds)开始。从那里，像这样向下钻取：

*   您知道要使用“MMX、SSE 和 SSE2 Intrinsics”，请单击该链接
*   你知道你想使用“Streaming SIMD Extensions 2”，点击那个链接
*   下一个有吸引力的链接是“整数内存和初始化”，因为你不想要浮点
*   您将获得两个相关链接，加载和设置操作
*   加载只会让你找到你已经找到的

套装是金色的，流行起来`_mm_set1_epi16 (short w)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T02:47:21.843

在 SSE（或 NEON）中创建常量的注意事项。与指令执行相比，从内存加载数据非常慢。如果您需要一个可以通过代码创建的常量，那么这是更快的选择。以下是通过代码创建的一些常量示例：

```
 xmmTemp = _mm_cmpeq_epi16(xmmA, xmmA); // FFFF
 xmmTemp = _mm_slli_epi16 (mmxTemp, 7); // now it has 0xFF80 (-128)

 xmmTemp = _mm_cmpeq_epi16(xmmA, xmmA); // FFFF
 xmmTemp = _mm_slli_epi16 (mmxTemp, 15); // 0x8000
 xmmTemp = _mm_srli_epi16 (mmxTemp, 11); // 0x10 (positive 16) 
```

# java - 为什么要以 -1 作为参数来实例化 Date ？

> ID：10873606
> 
> 赞同：21
> 
> 时间：2012-06-03T20:14:23.267
> 
> 标签：java, datetime

我知道这可能是一个显而易见的问题，但我正在查看这段代码：

```
private Date lastActivity = new Date(-1); 
```

我很好奇这是做什么的 - [Date 类](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html)有六个不同的构造函数，只有一个可以接受一个参数`long`，如下所示：

```
public Date(long date) 
```

哪一个：

> 分配一个 Date 对象并将其初始化以表示自称为“纪元”的标准基准时间（即 1970 年 1 月 1 日 00:00:00 GMT）以来的指定毫秒数。

那么 -1 只是一个占位符吗？我感谢任何提示或建议。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-03T20:21:17.287

它是`January 1, 1970, 00:00:00 GMT` ***负一毫秒***（负数是纪元开始后的日期）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-03T20:16:49.193

通常这样做是为了获得一个“众所周知的”日期，也许是为了验证或比较（所有“真实日期”都大于这个日期），作为一个“标记对象”来指示日期确实未知/非法/待定但是您出于某种原因不想使用 null ，或者可能用于单元测试。

好的，为我所谓的“标记值”查找更合适的术语，我得到哨兵值、标志值、跳闸值、流氓值、信号值或虚拟数据。在此处查看[维基百科文章](http://en.wikipedia.org/wiki/Sentinel_value)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-04T02:00:28.013

> 那么 -1 只是一个占位符吗？我感谢任何提示或建议。

可能不是在通常使用术语占位符的意义上。（那是代表……或为……别的东西占有一席之地的东西。）

它更有可能是一个代表计算目的的边界条件的值。在这种特殊情况下，变量名称`lastActivity`似乎暗示了这一点。我想这是确定“活动”的最新时间的某种算法的一部分......并且该`Date(-1)`对象将被视为“从未发生过活动”。他们也可以使用`null`or 标志来表示这一点……但是使用“时髦”的 Date 对象可能会稍微简化算法的逻辑。

“哨兵价值”是一个很好的术语……但“标记价值”不太好，因为它实际上并没有标记任何东西。

（从某种意义上说，选择`-1`是任意的。它可以是任何值……只要它不对应于算法可能遇到的时间点。`-1`如果时间点总是在 UNIX 时代之后...... 1970 年 1 月 1 日。但如果它可能必须处理历史日期，那么可能`Long.MIN_VALUE`会更好。无论哪种方式......这在你的家庭作业中都可能没有实际意义。）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-04T06:13:39.850

这称为[哨兵值](http://en.wikipedia.org/wiki/Sentinel_value)。它的意义通常是表示数据不可用，一系列数据已经结束等。通过使用特定的、明显无效的值，您可以节省维护单独`isValid`或`isFinished`字段的工作。

对于这是否是好的做法，意见不一。当约定非常有名时，例如在`\0`终止 C 字符串的 ASCII 中，它被普遍接受。在其他情况下，您通常可能会扩大未来被认为是“有效”的范围，然后在处理遗留数据时您将陷入困境。它也违反了单一责任原则：那条数据可以代表两条完全不同的信息，这会损害可维护性，因为代码阅读器可能没有意识到隐藏的潜在特殊含义，并且类型系统无法帮助您发现它.

# mysql - 如果数据总和超过一定数量，则用于从链接表中获取数据的 SQL

> ID：10873615
> 
> 赞同：0
> 
> 时间：2012-06-03T20:15:38.190
> 
> 标签：mysql

我正在制作某种评估应用程序，它几乎完成了，但我遇到了相当复杂的 SQL 查询。

首先是我正在使用的链接表（MySQL）：

**表 1：USERS（用户列表）**

用户名 | 姓名 | 姓氏 | 电子邮件

* * *

**表2：事件（事件列表）**

事件ID | **事件类型ID** | 事件名称 | 事件描述

* * *

**表 3：EVENT_TYPE（事件类型列表，每个都有一个人参与时获得的分数）**

事件类型ID | number_of_point

* * *

**表 4：USER_EVENT（用户和事件 ID 的列表以及乘法因子）**

用户事件ID | 用户名 | 事件ID | 因素

* * *

获取所需数据的函数是：**function getUsersWithPoints($number_of_points_for_threshold)**

* * *

它需要做的是获取姓名，姓氏，电子邮件总点数和所有事件用户已经为事件中的总点数等于或大于 $number_of_points_for_threshold 的所有用户，但必须间接获取数据，而不获取它在另一个表中。

提前致谢。

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:23:10.250

我认为解决问题的一种方法是将每个用户的总积分存储在一个表中（它可能是你的用户表）。每当您有活动时，您都应该更新该用户的总积分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T20:37:21.087

首先，我假设 USER_EVENT 将 event_typeID 作为列。我不能在其他任何地方引用 event_typeID。尝试这样的事情：

```
SELECT name, surname, email, sum(number_of_point) 
FROM user, user_event, event_type 
WHERE user.userID = user_event.userID AND user_event.event_typeID = event_type.event_typeID 
GROUP BY user.userID
HAVING sum(number_of_point) > :threshold
ORDER BY name ASC 
```

确保您在 user_event.userID 和 user_event.event_typeID 上有索引

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T21:56:25.340

一点都不复杂，就用这个：

```
SELECT name, surname, email, SUM(sum_points) AS total_points
FROM (SELECT userID, (SUM(factor) * number_of_point) AS sum_points
      FROM USER_EVENT AS ue INNER JOIN EVENT AS e ON ue.eventID = e.eventID
      INNER JOIN EVENT_TYPE AS et ON e.event_typeID = et.event_typeID
      GROUP BY userID, event_typeID, number_of_point) AS sub
INNER JOIN USERS AS u ON sub.userID = u.userID
GROUP BY u.userID, name, surname, email
HAVING total_points >= $number_of_points_for_threshold 
```

**更新：**首先，此查询考虑了每个用户有多少事件（不仅仅是他有多少不同的事件），其次，您希望如何实现这一点，您需要连接所有名称（并且分别所有描述）一起 - 只需使用不同的查询：

```
SELECT e.event_name, e.event_description, ue.factor, (ue.factor * et.number_of_point) AS sum_points
FROM USER_EVENT AS ue INNER JOIN EVENT AS e ON ue.eventID = e.eventID
INNER JOIN EVENT_TYPE AS et ON e.event_typeID = et.event_typeID
WHERE ue.userId = @userId 
```

# ios - 从 tabBar 选择不同视图时 iOS5 Storyboard Landscape/Portrait 按钮位置/iAd 问题

> ID：10873621
> 
> 赞同：0
> 
> 时间：2012-06-03T20:16:11.077
> 
> 标签：ios, storyboard, uitabbar, viewcontroller, landscape-portrait

我创建了一个二进制时钟并正在使用

```
willAnimateToInterfaceOrientation: duration: 
```

方法来放置纵向或横向的开/关按钮。我有两个选项卡，第一个是二进制时钟本身，第二个是如何读取时钟的说明。

这就是问题所在。iPad 的主屏幕自动从纵向切换到横向，因此我可以以任一方向启动我的应用程序。另一方面，iPhone 仅以纵向显示其主屏幕。这很好，但是当我启动我的应用程序时，按下任一选项卡按钮，然后更改方向，而屏幕（时钟或指令）更改方向，选择另一个选项卡按钮以先前方向显示该内容。在同一个视图（时钟或指令）中，方向更改可以完美执行，但是从一个视图切换到另一个视图时，在更改方向后，内容无法正确显示。

换句话说，假设我在 iPad 上以横向方式启动我的应用程序。默认情况下，显示二进制时钟视图。如果我更改为纵向，时钟会按预期变化。如果我当时保持 iPad 处于纵向模式，按下指令选项卡按钮，内容和 iAd 横幅（或有时只是 iAd 横幅）以横向显示。到目前为止，唯一的解决方案是将方向从当前设置更改为另一个设置，然后再返回，但这很难接受。

调用视图并正确显示内容时，我可以使用其他方法来检查方向吗？显然我所拥有的工作不正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:53:57.850

如果您根据方向在视图上动态移动事物，则必须在两个位置检查当前方向：

1.  在`willAnimate`... 方法中，这没关系。当发生旋转并且主 VC 视图可见时调用此方法。

2.  在`viewWillAppear`方法中！

如果在 VC 不可见时改变方向，`willAnimate`则不会调用 ... 方法。因此，在显示视图之前，您应该检查设备方向并正确设置视图/子视图。

只需使用`[[UIDevice currentDevice] orientation];`方法 in`viewWillAppear`检查当前方向并正确设置视图

# html - 将 Core Data 与 HTML 关联到打印时遇到问题

> ID：10873626
> 
> 赞同：1
> 
> 时间：2012-06-03T20:16:34.917
> 
> 标签：html, objective-c, core-data, printing, nsattributedstring

似乎没有大量内容可以描述我如何打印出我的核心数据信息。我看过一些文章或帖子提倡使用 NSAttributedString、NSTextView 或框架 WebKit 和 AppKit。

我只是在关联所有概念时遇到了麻烦。我已将核心数据转换为我认为是 NSAttributedString 中的 HTML 样式的字符串。我能用它做什么？我已经尝试过 NSTextView 函数“-insertText”，这样我就可以使用“-print”函数，但是当我尝试这样做时我的程序崩溃了，给了我这个错误：

```
 -[__NSTaggedDate insertText:]: unrecognized selector sent to instance 0xffffffffffffffff 
```

任何帮助，将不胜感激。在我的程序中，我希望能够打印多个表格以及发票式收据。

# apache-flex - 更新 itemrenderer 数据提供者

> ID：10873628
> 
> 赞同：0
> 
> 时间：2012-06-03T20:16:38.473
> 
> 标签：apache-flex, actionscript, combobox, itemrenderer, dataprovider

我正在创建一个开源应用程序来管理我所在县的环境资源。

我在数据网格上使用的 itemrenderer（组合框）的数据提供程序有问题。该应用程序可以工作，但我收到一条警告，说 itemrenderer 数据提供程序不会在使用 setter 更新时重新分配数据。即使我不需要重新分配组合框 itemrenderer 数据提供者，作为最佳实践我想解决这个警告。

这是我用来获取 dataprovider 数据的常用代码，它是从 itemrenderer 的 parentDocument 中的 Web 服务结果填充的数组集合：

```
    //为组合框itemrenderer设置农民arrayCollection值
    [可绑定]
    私人 var _acFarmers:ArrayCollection=new ArrayCollection;
    公共函数集 acFarmers(acFarmers:ArrayCollection):void{
        _acFarmers=acFarmers;

    }
    //获取机器ArrayCollection值
    公共函数获取 acFarmers():ArrayCollection{
        返回_acFarmers；
    }

```

这是 datagrid itemrenderer 的代码（仅显示 datagrid 感兴趣的列）：

```
<mx:DataGridColumn headerText="Agricoltore" dataField="farmerId" width="200" rendererIsEditor="true" editable="false">

            <mx:itemRenderer>

                <fx:Component id="cmpCmbFarmers">

                        <mx:HBox>

                        <s:ComboBox width="200" 
                                    id="cmbFarmers"
                                    dataProvider="{outerDocument.acFarmers}" 
                                    labelField="companyName" 
                                    change="onSelectionChange(event)"

                                    >
                            <fx:Script>
                                <![CDATA[
                                    import mx.controls.dataGridClasses.DataGridListData;
                                    import mx.controls.listClasses.BaseListData;
                                    import mx.events.ListEvent;

                                    private var _ownerData:Object;

                                    private function setSelected():void {

                                    }

                                    override public function set data(value:Object):void{
                                        if(value != null)  {
                                            super.data=value;
                                            _ownerData=value;

                                            if(value.collectingMachineId!==null){
                                                for each(var dp:Object in cmbFarmers.dataProvider){
                                                    var dpFarmerId:String=dp.farmerId
                                                    var dataFarmerId:String=value.farmerId;
                                                    if(dpFarmerId==dataFarmerId){
                                                        cmbFarmers.selectedItem=dp;
                                                    }
                                                }
                                            } else {
                                                cmbFarmers.selectedIndex=0;
                                                data.farmerId=cmbFarmers.selectedItem.farmerId;
                                            }
                                        }
                                    }

                                    import spark.events.IndexChangeEvent;

                                    protected function onSelectionChange(event:IndexChangeEvent):void
                                    {

                                        data.farmerId=cmbFarmers.selectedItem.farmerId;
                                    }     

                                ]]>
                            </fx:Script>
                            </s:ComboBox>

                        </mx:HBox>

            </fx:Component> 
            </mx:itemRenderer>

            </mx:DataGridColumn> 
```

如果我在调用 datagrid 数据服务并在服务响应时设置 datagrid arraycollection 之前调用 itemrenderer 服务以获取组合框数据，则此代码有效。

但是会显示一条警告，因为组合框数据提供者在对其数据提供者 (_acFarmers) 设置函数后不会得到更改。

这是我对整个项目的唯一警告，但我没有设法解决它。

我真的很感激任何帮助。

谢谢

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T05:33:04.140

您必须将`[Bindable]`metatag 放在 setter 而不是 above 之上`_acFarmers`。因为现在您的`acFarmers`财产不是数据绑定的来源。

或者更好地使用公共变量而不是 getter 和 setter，因为您没有在其中实现其他操作。

[关于数据绑定的链接](http://livedocs.adobe.com/flex/3/html/help.html?content=metadata_3.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T13:25:39.357

尝试使用 dataChangeEvent 您可以将 dataChange 事件与项目渲染器或项目编辑器一起使用。每次数据属性更改时，Flex 都会调度 dataChange 事件。

```
<mx:ItemRenderer dataChange="someFunction()"> 
```

或者

```
dataToDisplay.addEventListener( FlexEvent.DATA_CHANGE, dataChange ); 
```

# sql - 基于选择更新表的相关查询

> ID：10873634
> 
> 赞同：0
> 
> 时间：2012-06-03T20:17:30.427
> 
> 标签：sql, many-to-many, subquery

我有这些表`Genre`和`Songs`. 顺便说一句，显然存在多对多的关系，因为一种流派可以（显然）有很多歌曲，而一首歌可能属于多种流派（比如说有一首歌xyz，它属于说唱，也可以属于嘻哈）。我有这个表`GenreSongs`作为多对多关系映射这两个，因为它包含`GenreID`和`SongID`列。因此，我应该这样做，在此`Genre`表中添加一个名为的列，该列`SongsCount`将包含该类型的歌曲数量。我可以更改表以添加一列，还可以创建一个查询来计算歌曲的数量，

```
SELECT GenreID, Count(SongID) FROM GenreSongs GROUP BY GenreID 
```

现在，这给了我们所需的内容，即每种流派的歌曲数量，但我如何使用此查询来更新我创建的列 ( `SongsCount`)。一种方法是运行此查询并查看结果，然后手动更新该列，但我相信每个人都会同意这不是一种编程方式。我开始认为我需要创建一个带有子查询的查询，该查询`GenreID`将从外部查询中获取值，然后从内部查询（相关查询）中计算其值，但我什么也做不了。有人可以帮我做这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:44:08.633

制作一个名为 SongsCount 的表显然是糟糕的设计（冗余数据和更新开销）。而是将此查询用于单个结果：

```
SELECT ID, ..., (SELECT Count(*) FROM GenreSongs WHERE GenreID = X) AS SongsCount FROM Genre WHERE ID = X 
```

这适用于多个结果（效率更高）：

```
SELECT ID, ..., SongsCount FROM (SELECT GenreID, Count(*) AS SongsCount FROM GenreSongs GROUP BY GenreID) AS sub RIGHT JOIN Genre AS g ON sub.GenreID = g.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T20:50:51.527

如何解决这个问题取决于数据的大小和更新频率。这里有一些场景。

如果您的歌曲更新非常频繁并且您的表格非常大，那么您可能希望在 Genre 中有一个包含计数的列，并使用 Songs 表上的触发器更新该列。

或者，您可以在 Genre 上的 GenreSong 表上建立索引。然后是以下查询：

```
select count(*)
from GenreSong gs
where genre = <whatever> 
```

应该跑得很快。

如果您的歌曲不经常更新或成批更新（比如每晚或每周），那么您可以将歌曲计数更新为批次的一部分。您的查询可能如下所示：

```
update Genre
    set SongCnt = cnt
    from (select Genre, count(*) as cnt from GenreCount gc group by Genre) gc
    where Genre.genre = gc.Genre 
```

还有一种可能性是您根本不需要存储该值。您可以将其作为动态计算的视图/查询的一部分。

关系数据库非常灵活，而且做事的方式通常不止一种。正确的方法在很大程度上取决于您要完成的工作。

# java - 在画布顶部设置透明面板

> ID：10873635
> 
> 赞同：1
> 
> 时间：2012-06-03T20:17:45.710
> 
> 标签：java, user-interface, transparency, jpanel

我有一个画布，当鼠标进入它时，我想要一些透明的 Jpanel，其中包含一些显示在我的画布顶部的组件。我为此使用了 JlayeredPane；但是正如您在下面的示例中看到的，当我想在画布顶部显示透明面板时，通过将其添加到上层的 jLayeredPane，它的背景显示为画布下方面板的颜色。

```
public class NewClass {
    public static void main(String[] args) {
        JFrame frame = new JFrame();
frame.setSize(200 , 200);
JLayeredPane layeredPane = new JLayeredPane();
frame.setContentPane(layeredPane);
JPanel canvasPanel = new JPanel();
canvasPanel.setLayout(new GridLayout()); 
canvasPanel.setBackground(Color.RED);
Canvas canvas = new Canvas();
canvas.setBackground(Color.BLACK);
canvasPanel.add(canvas);
layeredPane.add(canvasPanel , JLayeredPane.PALETTE_LAYER);
canvasPanel.setSize(200 , 200);

JPanel transparentPanel = new JPanel();
transparentPanel.setSize(100 , 100);
transparentPanel .setOpaque(false);
transparentPanel.add(new JButton("button"));

layeredPane.add(transparentPanel , JLayeredPane.DRAG_LAYER);

frame.setVisible(true);

    }
} 
```

如何在画布上显示透明面板，使其背景看起来像画布？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:14:46.780

我不明白这个问题，当我运行代码时，它导致按钮位于黑色背景上的红色方块顶部

如果不适合您，请尝试将`transparentPanel`背景颜色设置为红色（与 相同`canvasPanel`）

虽然这可能不适用于非坚实的背景

# objective-c - iPhone / iOS 上的 Objective C 中的基本数学

> ID：10873637
> 
> 赞同：-4
> 
> 时间：2012-06-03T20:18:09.797
> 
> 标签：objective-c, ios, math, division, rounding

由于某些原因，我需要将 Double Value 的 Integer 和 Fraction 部分作为两个单独的整数。

例如：值 12.34 拆分为整数 12 和 34。

根据我的数学基础知识，这可以通过我现在使用的这个表达式轻松完成：

```
double aValue = 2.4f;
int aInt = (int)aValue;    
int aFract = (int)((aValue - aInt) * 100.0f ); 
```

到目前为止它有效，但它有奇怪的输出行为。

例如，传递 2.30000 会得到 '2' 和 '29' 而不是 '2' 和 '30'。

如果我将 aInt 和 aFract 声明为 Double，则处理结果会正确地产生“2.0000”和“30.0000”，但将“30.0000”转换为整数会再次“有趣地”产生“29”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T20:25:16.680

如果您要转换一些（小于 100 左右的小数）而不是在循环内，那么转换为字符串会更准确，您不会陷入不准确

会是这样的

```
double aValue = 2.3;
NSString *str = [NSString stringWithFormat:@"%f", aValue];
NSArray *arr = [str componentsSeparatedByString:@"."]; 
```

现在 arr 包含 2 和 3 请记住，一个好的程序员是一个懒惰的程序员

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-03T20:20:35.073

您在数字表示方面遇到了不准确的情况。截断前加 0.125 左右。

# java - 两个 JTextEdit 上的 GroupLayout.linkSize() 使它们的大小为零

> ID：10873638
> 
> 赞同：0
> 
> 时间：2012-06-03T20:18:11.563
> 
> 标签：java, swing, jtextfield, grouplayout

我正在编写一个 Java 程序（下面的最小可编译示例），并且我试图通过排列一些元素来美化用户界面。如果你运行这个，你可以看到，如果我能把它们做成相同的大小`d_ip`，`d_pword`看起来会好很多。而且我希望它们即使在您调整窗口大小时也能动态保持相同的大小。

GroupLayout 有一种`linkSize()`方法可以让您链接不相关对象的大小。这适用于按钮和标签。但是对于 JTextField，这是一场灾难。即使我将其中一个的最小尺寸设置为很大，它仍然坚持将尺寸设置为零。

我还尝试过诸如告诉 GroupLayout 水平最小和首选尺寸是否有效`GroupLayout.DEFAULT_SIZE`或`GroupLayout.PREFERRED_SIZE`无济于事的事情。谁能告诉我是否有任何方法可以强制 JTextField 与 linkSize 一起正常工作？

请注意，要打开 linkSize，有一行标有注释，您需要取消注释。当您这样做时，JTextField 的宽度会变得混乱。此外，尝试添加`d_username`到链接对象列表。现在，即使存在“紧张”，您可能会说，要使用户名/密码行水平与窗口的宽度一致，字段的大小为零并且不会调整大小。

谢谢！

```
package textfield;

import java.awt.Container;
import java.awt.Dimension;
import javax.swing.ButtonGroup;
import javax.swing.GroupLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JRadioButton;
import javax.swing.JTextField;
import javax.swing.SwingConstants;
import javax.swing.UIManager;

public class TextField extends JFrame {
    JTextField d_mount, d_ip, d_share, d_username, d_pword;
    JRadioButton nfs, smb;
    JButton save, revert;

    TextField() {
        Container pane = this.getContentPane();

        JLabel lmount = new JLabel("Mount Point:");
        JLabel ltype = new JLabel("Share Type:");
        JLabel lip = new JLabel("IP Address:");
        JLabel lshare = new JLabel("Remote Share:");
        JLabel lusername = new JLabel("Username:");
        JLabel lpassword = new JLabel("Password:");

        d_mount = new JTextField();
        nfs = new JRadioButton("NFS");
        smb = new JRadioButton("SMB");
        ButtonGroup group = new ButtonGroup();
        group.add(nfs);
        group.add(smb);
        d_ip = new JTextField();
        d_share = new JTextField();
        d_username = new JTextField();
        d_pword = new JTextField();

        d_ip.setMinimumSize(new Dimension(200, 0));

        save = new JButton("Save");
        revert = new JButton("Revert");

        GroupLayout layout = new GroupLayout(pane);
        pane.setLayout(layout);

        layout.setVerticalGroup(
            layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(lmount)
                    .addComponent(d_mount)
                    )
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(ltype)
                    .addComponent(nfs)
                    .addComponent(smb)
                //    )
                //.addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(lip)
                    .addComponent(d_ip)
                    )
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(lshare)
                    .addComponent(d_share)
                    )
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE, true)
                    .addComponent(lusername)
                    .addComponent(d_username)
                    .addComponent(lpassword)
                    .addComponent(d_pword)
                )
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(revert)
                    .addComponent(save)
                )
            );
        layout.setHorizontalGroup(
            layout.createParallelGroup()
                .addGroup(layout.createSequentialGroup()
                    .addGroup(layout.createParallelGroup(GroupLayout.Alignment.TRAILING)
                        .addComponent(lmount)
                        .addComponent(ltype)
                        .addComponent(lshare)
                        .addComponent(lusername)
                        )
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                        .addComponent(d_mount)
                        .addGroup(layout.createSequentialGroup()
                            .addComponent(nfs)
                            .addComponent(smb)
                            .addGap(20, 20, Integer.MAX_VALUE)
                            .addComponent(lip)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(d_ip, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            )
                        .addComponent(d_share)
                        .addGroup(layout.createSequentialGroup()
                            .addComponent(d_username, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                            .addComponent(lpassword)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(d_pword, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            )
                        )
                    )
                .addGroup(layout.createSequentialGroup()
                    .addGap(0, 0, Integer.MAX_VALUE)
                    .addComponent(revert)
                    .addComponent(save)
                    )
            );

        // ****** ADD THIS LINE BACK IN ******
        //layout.linkSize(SwingConstants.HORIZONTAL, d_pword, d_ip);

        pack();
        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    }

    public static void main(String[] args) {
        try {         
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());     
        }      catch (Exception e) {        
        }

        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TextField().setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T01:58:14.537

直接的解决方案是建议以列为单位的大小。即。

```
d_pword = new JTextField(15); 
```

笔记：

*   我不同意这两个字段对齐时 GUI 看起来最好。它们之间没有逻辑联系，因此链接大小似乎无关紧要且具有误导性。
*   该`d_pword`字段应为[`JPasswordField`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JPasswordField.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:15:24.103

潜在的问题可能是，如果您 linkSize 两个对象，它们本质上都变得不可调整大小。

那就是如果这本书说的是真的：

[http://books.google.com/books?id=kELcexu0pAcC&pg=PA67&lpg=PA67&dq=grouplayout+linksize+resIzable&source=bl&ots=Syy_LnNd4W&sig=cLGV96RAJeYEeV2ZDt_bmeBZqCM&hl=en&sa=X&ei=bdDMT9mMJMms2gW8m6z1DA&ved=0CFMQ6AEwAw#v=onepage&q=grouplayout%20linksize%20resIzable&f=错误的](http://books.google.com/books?id=kELcexu0pAcC&pg=PA67&lpg=PA67&dq=grouplayout+linksize+resIzable&source=bl&ots=Syy_LnNd4W&sig=cLGV96RAJeYEeV2ZDt_bmeBZqCM&hl=en&sa=X&ei=bdDMT9mMJMms2gW8m6z1DA&ved=0CFMQ6AEwAw#v=onepage&q=grouplayout%20linksize%20resIzable&f=false)

# c# - 找到知道纬度/经度/航向/速度的下一个位置

> ID：10873640
> 
> 赞同：4
> 
> 时间：2012-06-03T20:18:17.203
> 
> 标签：c#, algorithm, gps

知道**小数纬度**，**小数经度**，**速度（公里/小时）**，**航向** 如何在 60 秒后找到汽车的**下一个位置？**有什么算法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T20:23:07.413

这可能会有所帮助：

```
distance_traveled = speed * time 
```

然后，使用航向作为角度（三角函数）计算速度的 x 和 y 分量：

```
speed_x=distance_traveled * Math.Cos(heading/180*Math.PI)
speed_y=distance_traveled * Math.Sin(heading/180*Math.PI) 
```

接下来，看看如何将 lat/long 映射为某种形式的 x/y 坐标，添加 speed_x 和 speed_y，然后再次转换为 lat/long。

最后一个比较棘手，看这里：[http ://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

事实上，您会在那篇文章中找到所有内容！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T03:20:02.713

我找到了更准确的公式
此代码对我有用：
1\. 首先我们必须计算距离（速度 * 时间）。
2\. 在我的程序中，我将距离转换为 KM，因为我也在 KM 中使用地球半径。
const double radiusEarthKilometres = 6371.01f;

```
 kmDistance = kmSpeed * (timer1.Interval / 1000f) / 3600f;

            var distRatio = kmDistance / radiusEarthKilometres;
            var distRatioSine = Math.Sin(distRatio);
            var distRatioCosine = Math.Cos(distRatio);

            var startLatRad = deg2rad(lat0);
            var startLonRad = deg2rad(lon0);

            var startLatCos = Math.Cos(startLatRad);
            var startLatSin = Math.Sin(startLatRad);

            var endLatRads = Math.Asin((startLatSin * distRatioCosine) + (startLatCos * distRatioSine * Math.Cos(angleRadHeading)));

            var endLonRads = startLonRad
                + Math.Atan2(Math.Sin(angleRadHeading) * distRatioSine * startLatCos,
                    distRatioCosine - startLatSin * Math.Sin(endLatRads));

            newLat = rad2deg(endLatRads);
            newLong = rad2deg(endLonRads); 
```

# hibernate - JPQL 多对多条件查询

> ID：10873641
> 
> 赞同：1
> 
> 时间：2012-06-03T20:18:20.673
> 
> 标签：hibernate, jpa, jpa-2.0, jpql

我有两个实体：新闻和标签与多对多关系。新闻有一个日历字段。我有一些带有一些标签 ID 和日历的 long 数组。我想获取所有在 ids 数组中指定的至少有一个标签的新闻，并且只有那些日历比我拥有的更新的日历。实现它的最佳方法是什么？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T20:25:06.673

```
select n from News n inner join n.tags tag
where tag.id in (:tagIds)
and n.theCalendarField > :calendarParam 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T05:49:02.160

您没有显示的是`tagIds`. 根据预期的消息，它是数组。因为您要与 Long 进行比较，所以参数的类型应该是以下之一：long、Long 或`List<Long>`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T19:01:38.013

JB Nizet 和 Mikko Maunu 的综合答案：

```
SELECT DISTINCT n FROM News n INNER JOIN n.tags t
WHERE t.id IN (:tagIds) AND n.timestamp > :timestamp 
```

它需要传递 List ，数组不会。

# c++ - 优化渲染到纹理的过程

> ID：10873642
> 
> 赞同：3
> 
> 时间：2012-06-03T20:18:39.003
> 
> 标签：c++, 3d, glsl

我正在开发一个渲染到纹理的过程，该过程涉及使用多个相机来渲染整个几何场景。然后通过将每个几何体的顶点坐标转换为顶点着色器中的屏幕坐标（我在这里使用 GLSL），将这些相机的输出组合并直接映射到屏幕。

该过程运行良好，但我发现了一个小问题：我创建的每个 RTT 相机都会创建与屏幕输出尺寸相同的纹理。也就是说，如果我的视口大小为 1024x1024，即使几何图形占据屏幕的 256x256 部分，每个 RTT 相机也会在 1024x1024 纹理中渲染 256x256 几何图形。

解决方案似乎相当简单 - 调整 RTT 相机纹理大小以匹配几何体占用的实际屏幕区域，但我不知道该怎么做。也就是说，我如何（例如）确定一个几何图形占据了屏幕的 256x256 区域，以便我可以相应地将 RTT 相机的输出纹理设置为 256x256 像素？

我使用的 API (OpenSceneGraph) 使用轴对齐的边界框，所以我不走运..

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:10:52.323

为什么不走运？你不能使用轴对齐的边界框来计算面积吗？

我的想法：

*   取边界框的 8 个角点并将它们投影到相机的图像平面上。
*   对于图像平面上生成的 2d 点，您可以再次确定轴对齐的 2d 边界框

这应该是几何图形可以占用的空间的正确上限。

# c++ - C++动态分配程序崩溃

> ID：10873644
> 
> 赞同：2
> 
> 时间：2012-06-03T20:19:33.187
> 
> 标签：c++, malloc

我有一段非常简单的代码，有 2 个结构和一个动态分配。程序在“nume”初始化时崩溃。

```
typedef struct{
    int key;
    string name;
} TElement;

typedef struct nod {
   int cheie;
   string nume;
   struct nod *stg, *dr;
} NOD; 
```

当我尝试这样做时

```
void ABC::inserare_element(TElement e){
    NOD *p, *q;
    int n;
    /* construction nod p*/
    n=sizeof (NOD);
    p=(NOD*)malloc(n);
    p->cheie = e.key;
    p->nume = e.name; // on this line the program crashes 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T20:22:28.597

`malloc()`不会调用 的构造函数`NOD`，这意味着不会调用 的构造函数，`nume`从而导致尝试在未构造`std::string::operator=`/未初始化的`std::string`: 上使用`new`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T20:27:53.090

这里有高级 C++ 对象的热门组合，例如`std::string`C 风格的内存分配，例如`malloc`. 问题是 C++ 的`new`运算符不仅分配内存，还调用高级对象的构造函数。您面临的问题是`nume`类型对象`std::string`未正确初始化，因此您会遇到导致崩溃的未定义行为。那是因为你很幸运。如果程序确实在工作，但会产生奇怪的、意想不到的结果，情况可能会更糟。

为了让它像你想要的那样工作，你可以简单地使用`new`而不是`malloc`. 例如：

```
p = new NOD; 
```

如果碰巧你真的需要使用`malloc`或其他不关心 C++ 对象的内存管理 API，那么你必须`nume`手动调用构造函数，使用放置 new。例如：

```
p = (NOD*)malloc(n);
new ((void *)&p->nume) std::string(); 
```

如果你这样做 - 不要忘记调用析构函数，否则你最终会出现内存泄漏。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-03T20:26:01.333

您应该使用 new 而不是 malloc。malloc 是一个 C 函数，它只分配一块内存。使用 new 会调用你类的默认构造函数，此时也会调用字符串构造函数。

# barcode - 将 EAN-8 转换为 EAN-13

> ID：10873652
> 
> 赞同：5
> 
> 时间：2012-06-03T20:20:58.437
> 
> 标签：barcode, ean-13

我有一个 8 位 EAN 代码，我想将其转换为 EAN-13 代码。
你知道如何计算这个的任何算法吗？

还是只是在 EAN-8 的开头添加五个零？
例如 EAN-8(1234 5678) 变成 EAN-13(00000 1234 5678)？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-03-20T16:02:04.900

向有效的 EAN-8 添加五个前导零将为您提供有效的 EAN-13。

EAN-8 只是 GTIN-8 的另一个名称，EAN-13 是 GTIN-13 的另一个名称。您始终可以将较短的 GTIN 转换为较长的 GTIN，方法是用零填充它们，请参阅[http://en.wikipedia.org/wiki/Global_Trade_Item_Number#Format](http://en.wikipedia.org/wiki/Global_Trade_Item_Number#Format)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T14:47:27.600

EAN-8 是 EAN-13 的简化版本，由 7 位数字和 1 个校验位组成。

EAN-8 和 EAN-13 之间没有可用的转换，抱歉 :(

# apache - 在已建立的 Apache/PHP 环境中使用 Tornado 进行套接字 RPC

> ID：10873654
> 
> 赞同：0
> 
> 时间：2012-06-03T20:21:06.283
> 
> 标签：apache, nginx, lighttpd, tornado, long-polling

我们已经建立了一个带有 Flash 前端的 Apache/PHP 站点。我们将开始需要实现某种套接字通信或“长轮询”，以将更新推送到 Flash 应用程序。由于这对于 Apache 或 PHP 来说显然不是一个好情况，所以我想在这方面的功能上使用 Tornado，但我也不想在另一个端口上运行 Tornado，因为 Flash 应用程序将在客户端机器上运行，我们不想处理阻止套接字连接的限制性防火墙。

理想情况下，我想运行一个代理，它可以将大多数请求转发给 Apache，并将其他请求转发给 Tornado。我看到了一些使用 Apache 作为第一联系代理的建议，在必要时将请求转发到 Tornado，但我也看到这降低了 Tornado 的许多异步功能。

我想，为什么不使用 Tornado 作为 80 端口的第一个联系人并将其代理回 Apache？我根本找不到任何东西，我想知道这是否可能？

另一种选择是使用 lighttpd 之类的东西作为代理，让它决定是将东西传递给 Apache 还是 Tornado，但是这种设置有意义吗？或者 Nginx 呢？

对我对事物的理解的任何建议、建议或更正将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:33:56.387

这称为反向代理，很容易配置 nginx 来执行此操作。（lighttpd 应该也能很好地完成这项工作，但我没有使用它的经验）。

tornado 文档有一个[示例 nginx 配置](http://www.tornadoweb.org/documentation/overview.html#running-tornado-in-production)

使用反向代理时要注意的一件事是，与上游服务器的连接现在将来自代理，而不是客户端。事实上的标准是将有关原始请求的信息放在某些 http 标头中。在 tornado 文档的示例中，**X-Real-IP**标头设置为原始客户端的 IP，**X-Scheme**设置为原始请求的方案（例如 http/https）。

这可能需要对您的上游服务器进行一些修改。对于龙卷风，这是通过将 xheaders 参数设置为 True来构造[HTTPServer来完成的。](http://www.tornadoweb.org/documentation/httpserver.html#module-tornado.httpserver)这将指示服务器尝试从 X-headers 中提取 IP 地址和方案。请注意，如果您将其与不在设置适当标头的反向代理后面的服务器一起使用，则您可能会受到 IP 地址欺骗。

# javascript - jQuery 最佳实践

> ID：10873662
> 
> 赞同：3
> 
> 时间：2012-06-03T20:22:27.497
> 
> 标签：javascript, jquery

好的，伙计们，这里有三个问题。他们都很菜鸟，但我只是想了解你们对他们的看法。

**1)**在编写 jquery 脚本时，我应该包含类型吗？

IE：

```
<script type="text/javascript" charset="utf-8">
  //Jquery here
</script> 
```

还是只是一个开始和结束脚本标签可以接受？

**2)**我知道在结束 body 标记之前包含所有 JQuery 是最佳实践，但这是否也意味着我在 body 之前也包含实际的 jquery.js 文件？

**3）**如果我的页面依赖 jquery 来查看它应该如何（不仅仅是动作事件/ajax/等）。例如，我正在使用一个名为 datatables 的 jquery 插件，它对我指定的数据库进行排序并自动分页/排序/等。我发现因为我在 DOM 加载后包含了所有脚本，所以我看到数据表的原始格式，直到我的 datatables.js 文件和相应的构造函数加载。在我的身体加载之前包括这个是否可以接受，这样就不会发生这种情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T20:24:51.813

1.  包含 type( `type="text/javascript"`) 是最佳实践，尽管在 HTML5 中它不是必需的，因为它是默认设置。在 HTML 4 中这是强制性的，但所有现代浏览器都会像未指定一样读取脚本内容`javascript`，但根据规范它仍然无效。您可以在这里阅读更多内容：[哪个更好：<script type="text/javascript">...</script> 或 <script>...</script>](https://stackoverflow.com/q/4243577/601179)
2.  将 jQuery 脚本放在头部是一个不错的选择，但这不是强制性的，它必须高于使用 jQuery 库的所有其他脚本。
3.  关于插件，如果不看你的代码，并且不知道插件是如何工作的，很难说清楚。您可以尝试将所有脚本移至`<head>`，看看它是否对您有帮助。（如果插件等待 DOM 准备好，它可能仍然具有相同的效果。）

# r - 为 df 中的特定行识别具有 5 个最高值和 5 个最低值的向量

> ID：10873664
> 
> 赞同：0
> 
> 时间：2012-06-03T20:22:40.103
> 
> 标签：r

我有一个数据框，如下所示：

```
 group     respondent nteachers totalq3 totalq4 totalq5 totalq6 totalq7
1       2            You         2       5       4       4       5       5
2       2  Your Teachers         2      10       8       9      10      10
119  1001 All Principals        NA      NA      NA      NA      NA      NA
120  1002   All Teachers        NA      NA      NA      NA      NA      NA 
```

除了 totalq7（通过 totalq53）还有其他向量，但这个数据片段应该足够了。

我需要的是某种方式来识别向量totalq3 到totalq53，按照“你的老师”的值的降序排列。然后我标记“你的老师”的 5 个具有最高值的向量，并将这 5 个输出到 xtable。最后，必须重复该过程以识别“Your Teachers”中具有最小值的 5 个向量。

这里的诀窍是什么？任何和所有提示将不胜感激。

阿尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T20:37:14.093

```
inc <- order(data[data$respondent == 'Your Teachers',-(1:3)])
dec <- order(data[data$respondent == 'Your Teachers',-(1:3)], decreasing = T)
xtable(data[,3+inc[1:5]])
xtable(data[,3+dec[1:5]]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T23:11:53.017

对于名为“dat”的数据框，这将是按“dat”第二行的顺序排列的列名。

```
names(dat)[-(1:3)][order( dat[2, -(1:3)]) ] 
```

因此，最高的五个受访者值将在：

```
 tail( names(dat)[-(1:3)][order( dat[2, -(1:3)]) ], 5) 
```

以及具有五个最低值的列名：

```
head( names(dat)[-(1:3)][order( dat[2, -(1:3)]) ], 5) 
```

要获得通过 xtable 的简化数据集，只需使用“heads or tails”：

```
 dat[ , head( names(dat)[-(1:3)][order( dat[2, -(1:3)]) ], 5) ] 
```

这是测试集：

```
dat <- read.table(text="    group     respondent nteachers totalq3 totalq4 totalq5 totalq6 totalq7
1       2            'You'         2       5       4       4       5       5
2       2  'Your Teachers'         2      10       8       9      10      10
119  1001 'All Principals'        NA      NA      NA      NA      NA      NA
120  1002   'All Teachers'        NA      NA      NA      NA      NA      NA", header=TRUE) 
```

# java - 将 Serializable 对象作为参数传递时出现 GWT SerializationException

> ID：10873665
> 
> 赞同：1
> 
> 时间：2012-06-03T20:22:41.400
> 
> 标签：java, gwt, serialization

`SerializationException`当作为参数传递 `ArrayList<MyObject>`给 RPC servlet 方法时，我得到了。类`MyObject`仅包含 2 个类型为`String`和的字段`Serializable`。我将值作为( )和传递到`Serializable`字段中。所以在字段内部，我总是可以序列化 100% 的类型。为什么会引发这个异常？`Boolean``checkBox.getValue``String(textBox.getValue)``Date(dateBox.getValue)``Serializable`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:59:04.073

我认为您不能使用 Serializable 作为 GWT RPC 的类型，同样我也不能使用 Object 实例。GWT 无法正确处理它。此外，您想要使用 RPC 序列化的对象应该具有默认构造函数，即使它是空的。将您的代码和异常消息粘贴到问题中。

# java - 在 JFrame 关闭时终止正在运行的线程

> ID：10873668
> 
> 赞同：7
> 
> 时间：2012-06-03T20:22:51.227
> 
> 标签：java, multithreading, swing, jframe, windowlistener

`JFrame`当用户关闭窗口时如何调用额外的操作？我必须停止现有的线程。

据我了解，`setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);`导致框架关闭并停止其线程。之后应该关闭线程`JFrame.EXIT_ON_CLOSE`吗？

客户：

```
static boolean TERMINATE = false;
public static void main(String[] args) {
// some threads created
 while(true) {

                if(TERMINATE){
                         // do before frame closed
                    break;
                         }
              }

}
    private static JPanel startGUI(){
            JFrame f = new JFrame();
            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            JPanel gui = new JPanel();
             f.add( gui);
             f.setSize(500,500);
             f.setVisible(true);
             return gui;
        } 
```

* * *

我需要关闭线程正在使用的套接字。这样做的最佳做法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T20:24:23.443

使用`JFrame.EXIT_ON_CLOSE`实际上终止了 JVM ( [`System.exit`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#exit%28int%29))。所有正在运行的线程将自动停止。

如果要在 a`JFrame`即将关闭时执行某些操作，请使用 a [`WindowListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/windowlistener.html)。

```
JFrame frame = ...
frame.addWindowListener(new WindowAdapter() {
    @Override
    public void windowClosing(WindowEvent e) {
        // close sockets, etc
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T20:26:33.230

*   您必须`WindowListener`在`JFrame`.

*   在`windowClosing`方法内部，您可以提供所需的代码。

例如：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class ClosingFrame extends JFrame {

    private JMenuBar MenuBar = new JMenuBar();
    private JFrame frame = new JFrame();
    private static final long serialVersionUID = 1L;
    private JMenu File = new JMenu("File");
    private JMenuItem Exit = new JMenuItem("Exit");

    public ClosingFrame() {
        File.add(Exit);
        MenuBar.add(File);
        Exit.addActionListener(new ExitListener());
        WindowListener exitListener = new WindowAdapter() {

            @Override
            public void windowClosing(WindowEvent e) {
                int confirm = JOptionPane.showOptionDialog(frame,
                        "Are You Sure to Close this Application?",
                        "Exit Confirmation", JOptionPane.YES_NO_OPTION,
                        JOptionPane.QUESTION_MESSAGE, null, null, null);
                if (confirm == 0) {
                    System.exit(1);
                }
            }
        };
        frame.addWindowListener(exitListener);
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.setJMenuBar(MenuBar);
        frame.setPreferredSize(new Dimension(400, 300));
        frame.setLocation(100, 100);
        frame.pack();
        frame.setVisible(true);
    }

    private class ExitListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            int confirm = JOptionPane.showOptionDialog(frame,
                    "Are You Sure to Close this Application?",
                    "Exit Confirmation", JOptionPane.YES_NO_OPTION,
                    JOptionPane.QUESTION_MESSAGE, null, null, null);
            if (confirm == 0) {
                System.exit(1);
            }
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                ClosingFrame cf = new ClosingFrame();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-23T17:06:23.377

您可以在 JFrame 上设置默认关闭操作

```
JFrame frame = new JFrame("My Frame");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

# perl - HTTP::Proxy：如何禁止某些域

> ID：10873669
> 
> 赞同：1
> 
> 时间：2012-06-03T20:22:58.553
> 
> 标签：perl, http-headers, http-proxy

我正在使用[HTTP::Proxy](http://search.cpan.org/~book/HTTP-Proxy-0.25/lib/HTTP/Proxy.pm)，但我无法理解如何使其在某些域中失败。

这是一些代码。

```
use HTTP::Proxy;
use HTTP::Proxy::BodyFilter::simple;
use HTTP::Proxy::HeaderFilter::simple;
use Getopt::Long;

my $port = 3128;
my $fail_at;

my $ret = GetOptions ( "port=i" => \$port,
            "fail=s" => \$fail_at );

my @fail_at = split(/,/, $fail_at);

my $proxy = HTTP::Proxy->new;
$proxy->port( $port );

my $fail_filter = HTTP::Proxy::HeaderFilter::simple->new(
        sub { $_[1]->header( HEADERS_HERE ); }
);

foreach my $url (@fail_at) {
    $proxy->push_filter(
        host => $url,
        response => $fail_filter
    );
}

$proxy->start; 
```

你能帮我理解我必须写什么来代替 HEADER_HERE 吗？我试过了，`Status => '403 Forbidden'`但没有用。我可以修改http响应的每一行，但第一行。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:04:11.617

见[方法`code``HTTP::Response`](http://p3rl.org/HTTP%3a%3aResponse#r-code)。[_](http://p3rl.org/HTTP%3a%3aResponse#r-code)

```
use HTTP::Status qw(HTTP_FORBIDDEN);
⋮
my $fail_filter 
  = HTTP::Proxy::HeaderFilter::simple->new(sub {
    $_[2]->code(HTTP_FORBIDDEN);
}); 
```

# c# - 矩形 ArgumentOutOfRangeException 每像素碰撞

> ID：10873677
> 
> 赞同：-4
> 
> 时间：2012-06-03T20:23:43.350
> 
> 标签：c#, exception

我一直在尝试解决这个问题，但我真的看不出代码有什么问题。它与我的其他矩形完全相同，但它不起作用。

工作代码：这里的一切工作正常（或多或少）

```
private void UpdateCollision()
    {
        // Uses built in rectangle intersect function to determine overlapping
        Rectangle rectangle1;
        Rectangle rectangle2;
        Rectangle rectangle3;

        // Creates 1 rectangle for player
        rectangle1 = new Rectangle((int)player.Position.X, (int)player.Position.Y, player.Width, player.Height);

        // Sets collision btw objs
        for (int i = 0; i < enemies.Count; i++)
        {
            for (int j = 0; j < enemies2.Count; j++)
            {
                rectangle2 = new Rectangle((int)enemies[i].Position.X, (int)enemies[i].Position.Y, enemies[i].Width, enemies[i].Height);
                rectangle3 = new Rectangle((int)enemies2[j].Position.X, (int)enemies2[j].Position.Y, enemies2[j].Width, enemies2[j].Height);

                // Determines collision
                if (IntersectPixels(rectangle1, playerTextureData, rectangle2, enemyTextureData) && player.PlayerAnimation.Active == true)
                {
                    player.Health -= enemies[i].Damage;
                    enemies[i].Health = 0;

                    if (player.Health == 0)
                        AddMyExplosion(player.Position);
                }

                if (IntersectPixels(rectangle1, playerTextureData, rectangle3, enemy2TextureData) && player.PlayerAnimation.Active == true)
                {
                    player.Health -= enemies2[j].Damage;
                    enemies2[j].Health = 0;

                    if (player.Health == 0)
                        AddMyExplosion(player.Position);
                }
            }
        } 
```

非工作代码：弹出异常的行是定义rectangle3的地方

```
// Proj obj collision
        for (int i = 0; i < projectiles.Count; i++)
        {

            for (int j = 0; j < enemies.Count; j++)
            {
                for (int k = 0; k < enemies2.Count; k++)
                {

                    // Creates col det rectangles
                    rectangle1 = new Rectangle((int)projectiles[i].Position.X - projectiles[i].Width / 2, (int)projectiles[i].Position.Y - projectiles[i].Height / 2, projectiles[i].Width, projectiles[i].Height);
                    rectangle2 = new Rectangle((int)enemies[j].Position.X - enemies[j].Width / 2, (int)enemies[j].Position.Y - enemies[j].Height / 2, enemies[j].Width, enemies[j].Height);
                    rectangle3 = new Rectangle((int)enemies2[k].Position.X - enemies2[k].Width / 2, (int)enemies[k].Position.Y - enemies2[k].Height / 2, enemies2[k].Width, enemies2[k].Height);
                    //Rectangle 3 is not working//

                    // Determines col
                    if (IntersectPixels(rectangle1, projectileTextureData, rectangle2, enemyTextureData))
                    {
                        enemies[j].Health -= projectiles[i].Damage;
                        AddImpact(projectiles[i].Position);
                        impactSound.Play();
                        projectiles[i].Active = false;
                    }

                    if (IntersectPixels(rectangle1, projectileTextureData, rectangle3, enemy2TextureData))
                    {
                        enemies2[j].Health -= projectiles[i].Damage;
                        AddImpact(projectiles[i].Position);
                        impactSound.Play();
                        projectiles[i].Active = false;
                    }
                }
            }
        }
    } 
```

因此，如果有人可以帮助我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T20:32:48.203

错字。更改此行：

```
rectangle3 = new Rectangle((int)enemies2[k].Position.X - enemies2[k].Width / 2, (int)enemies[k].Position.Y - enemies2[k].Height / 2, enemies2[k].Width, enemies2[k].Height); 
```

对此：

```
rectangle3 = new Rectangle((int)enemies2[k].Position.X - enemies2[k].Width / 2, (int)enemies2[k].Position.Y - enemies2[k].Height / 2, enemies2[k].Width, enemies2[k].Height); 
```

# c# - 根据 WP7 上的文化信息转换日期和时间

> ID：10873678
> 
> 赞同：0
> 
> 时间：2012-06-03T20:23:44.353
> 
> 标签：c#, datetime, windows-phone-7.1, currency, cultureinfo

我正在尝试根据用户设置的文化信息来格式化我的应用程序的日期和时间，但是，我看到的每个帮助资源都不断建议我必须在代码中手动输入每个文化区域设置。例如，如果我想要 en-UK，我将不得不手动添加 new CultureInfo("en-UK"); 使用新 CultureInfo("en-UK"); 之类的东西。

有没有办法直接在手机上使用当前设置的文化，而无需我实际输入 rtc 文化信息？可能像“date = ConvertToLocalCultureFormat(date);”这样的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T20:36:25.493

我不知道这是否适用于 WinPhone7，但你可以使用

```
 CultureInfo.CurrentCulture.Name 
```

返回当前线程的 CurrentCulture 的名称（en-UK 或您的应用程序在其中运行的任何内容）

[请参阅参考](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.currentculture.aspx)

然而，这不应该是必要的。如果您以这种方式将日期时间转换为字符串：

```
 DateTime dt = DateTime.Now;
  // Converts dt, formatted using the ShortDatePattern
  // and the CurrentThread.CurrentCulture.
  string dateInString = dt.ToString("d"); 
```

您应该在手机的正确 CultureInfo 中获得转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T20:45:07.223

要使用当前文化格式化任何内容，您根本不需要做任何特别的事情。不包含特定格式或区域性的所有格式的重载使用默认区域性。

例如，该`Date.ToString()`方法将调用重载 with`this.ToString(CultureInfo.CurrentCulture)`以获取应用程序的当前文化设置并用于格式化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T20:45:00.057

您阅读了哪些建议您必须手动指定当前文化的帮助资源？

无[`DateTime.ToString()`](http://msdn.microsoft.com/en-us/library/k494fzbf%28v=vs.95%29.aspx)参数方法自动使用从当前文化派生的格式信息。

> 此方法使用从当前区域性派生的格式信息。特别是，它结合了由属性返回的对象的属性`ShortDatePattern`和`LongTimePattern`属性返回的自定义格式字符串。`DateTimeFormatInfo``Thread.CurrentThread.CurrentCulture.DateTimeFormat`

```
DateTime exampleDate = new DateTime(2008, 5, 1, 18, 32, 6);
string s = exampleDate.ToString();
// Gives "5/1/2008 6:32:06 PM" when the current culture is en-US.
// Gives "01/05/2008 18:32:06" when the current culture is fr-FR.
// Gives "2008/05/01 18:32:06" when the current culture is ja-JP. 
```

# jquery - 用jquery在iPad上触发触摸事件的正确方法是什么

> ID：10873680
> 
> 赞同：8
> 
> 时间：2012-06-03T20:23:54.503
> 
> 标签：jquery, ipad, triggers

我尝试了以下（.myviewer 是一个 div）...

```
$('.myviewer').click();

  and
$('.myviewer').trigger('touchstart');

  and
$('.myviewer').trigger('click'); 
```

都可以在电脑上工作，但不能在 iPad 上工作。我究竟做错了什么？

这是 html 页面的主体的样子......

```
<body>
    <div class="myviewer" onclick="window.open('myPDFFile.pdf');">Programmatically clicked</div>
</body> 
```

为了解决这个问题，这里是我的 jquery 代码......

```
$(document).ready(function() {
var isMobile = {
    Android : function() {
        return navigator.userAgent.match(/Android/i) ? true : false;
    },
    BlackBerry : function() {
        return navigator.userAgent.match(/BlackBerry/i) ? true : false;
    },
    iOS : function() {
        return navigator.userAgent.match(/iPhone|iPad|iPod/i) ? true : false;
    },
    Windows : function() {
        return navigator.userAgent.match(/IEMobile/i) ? true : false;
    },
    any : function() {
        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Windows());                               }
}; 

if(isMobile.any()) {
    $('.myviewer').clck();  //this does works on computers but not on iPad
}else {
    var markup = "<object   data='myPDFFile.pdf#toolbar=1&amp;navpanes=1&amp;scrollbar=0&amp;page=1&amp;view=FitH' type='application/pdf' width='100%' height='100%'> </object>";
    $('.myviewer').append(markup);
}; 
```

});

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-03T22:02:59.980

为了`.trigger`做任何事情，你必须先绑定事件，你还没有做过。`onclick=""`不算。

要首先绑定事件，请使用：

```
$(document).ready(function() {
    $('.myviewer').on( "touchstart", function(){
        $(this).remove();
    });

    var isMobile = { //...your original code continues here 
```

然后你可以稍后触发它：

```
$('.myviewer').trigger('touchstart'); 
```

# php - 引号应该保存在 MySQL 中吗？

> ID：10873681
> 
> 赞同：0
> 
> 时间：2012-06-03T20:23:55.010
> 
> 标签：php, mysql

我正在开发一个门户网站，我对在 MySQL 表中保存数据有以下几个问题：

1.  我应该保存 varchar 字段转义吗？我现在使用 mysql_real_escape_string() 来避免字符串注入。

2.  为什么我应该不转义地保存它们（这是由这个网站上的一个人提出的）以及这对于单引号和双引号等字符如何工作。它不会破坏 SQL 命令吗？

轻松谈论这个话题。

最后一件事......在使用mysql_real_escape_string之前我使用了addslashes和stripslashes，它对我有用（当然，mysql-injection恶意代码的机会，我最近发现并记录了自己）......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T20:44:58.500

任何程序员**必须**学习的最基本的东西就是**上下文**的含义。

我来这里做什么？如果你知道上下文的含义，你就不会问这个问题。现在（我希望）你知道了，你不会问如​​何显示`<test>`为 HTML，或者如何将变量传递给 javascript。

那么这到底是怎么一回事呢？这真的很容易。上下文是一个简单的事实，系统中的某些东西在其他地方可能意味着完全不同的东西。

例如，在您的情况下，PHP 字符串可能意味着与 MySQL 完全不同的东西。您不能只传递字符串并期望一切顺利进行 - 它不会。因此，既然您知道上下文的含义，您就需要知道其他重要的事情。您总是需要将旧上下文中的值转换为新上下文。**总是。**

同样，在您的情况下，它是`mysql_real_escape_string()`，但只是一个警告；转换函数是**特定于上下文的**，因此，例如，您不能使用`mysql_real_escape_string()`将字符串从 PHP 传递到 Javascript。同样，您不能只使用`addslashes()`并期望它起作用。**事实上，我认为 addlashes() 是一个完全无用且具有误导性的函数。**除非您非常确定自己在做什么，否则不要使用**它**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T20:27:54.200

> 我应该保存 varchar 字段转义吗？

不，您应该转义数据，以便 SQL 中具有特殊含义的字符（在数据中）不会给您带来问题。

一旦它通过SQL并存储在数据库中，它将不再被转义。

> 我现在使用 mysql_real_escape_string() 来避免字符串注入。

不要那样做，而是使用[准备好的语句和参数化查询](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

> 我正在使用addslashes和stripslashes

`addslashes`是逃避的基本形式。除非您确切知道数据的目标是什么，否则这是没有意义的。你应该使用更具体的东西存在这样的东西（你是 - mysql_real_escape_string）

`stripslashes`做相反的事情`addslashes`。将它们一起使用是完全没有意义的。

# grails - Grails - 如何在每次保存之前执行代码？

> ID：10873682
> 
> 赞同：7
> 
> 时间：2012-06-03T20:24:16.750
> 
> 标签：grails, grails-orm, grails-domain-class

`save()`在每次调用域类之前，是否有一种好的/标准方法来执行一些通用代码？

例如，我的域

```
class Page {

    String url
    Boolean processed
    Date date
    Integer urlCrc 
} 
```

我的表单只有 3 个第一个字段，我想在`urlCrc`每次`save()`调用该方法时进行计算。我不能只覆盖保存方法，因为它是注入的。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-03T20:35:53.090

您可以使用 GORM 事件 - 请参阅[文档](http://grails.org/doc/latest/guide/GORM.html#eventsAutoTimestamping)。因为默认情况下`validate()`在每次`save()`我使用它之前都会调用它。

```
class Page {
    //your defs here

    def beforeValidate() {
        this.urlCrc = yourComputationHere
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-03T10:20:01.213

```
class Page {
    def beforeInsert() {
        this.beforeUpdate()
    }
    def beforeUpdate() {
        this.urlCrc = 'calculate something'
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-23T18:18:29.103

GORM 文档中涵盖了该主题：

6.5 高级 GORM 特性

[6.5.1 事件和自动时间戳](http://grails.github.io/grails-doc/3.0.x/guide/GORM.html#eventsAutoTimestamping)

# c# - 在 2D 图形窗格上缩放信号

> ID：10873686
> 
> 赞同：0
> 
> 时间：2012-06-03T20:25:13.787
> 
> 标签：c#, winforms, algorithm, graphics, 2d

我正在挠头想办法在 2D 图形窗格上缩放信号。故事是：我将我的应用程序连接到微控制器，并以固定的时间间隔读取数据值（电压点）。现在我想在我的图形窗格上绘制它。例子：

![在此处输入图像描述](../Images/0db6db900f75afc485e244fd548071f5.png)

所以在图片中你在时间 0 看到的电压也是 0，这样继续下去，在 6 个数据点之后，我将清除窗格并重做整个工作。

问题是，我如何将这个电压转换为像素值，记住我希望图形窗格的中间是我的信号 0，就像正常的笛卡尔图一样。有人可以帮我弄清楚这种情况下的缩放算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T20:41:31.750

看起来像简单的数学：只需将 width/2 添加到您传递给绘图函数的所有 X 坐标中。假设您有一个包含 6 个点的数组，您可以执行以下操作：

```
var g = this.CreateGraphics();
var points = new Point[6]{new Point(0, 0), new Point(10, 10), new Point(30, 0), new Point(40,20), new Point(50, 0), new Point(60,30)};
for (int i = 0; i < points.Length-1; i++)
{
    g.DrawLine(Pens.Black, points[i].X + Width / 2, Height / 2 - points[i].Y, points[i + 1].X + Width / 2, Height / 2 - points[i + 1].Y);
} 
```

或者，您可以调用`TranslateTransform`函数将所有进一步的绘图移动到 X 和 Y 轴的某个量。例子：

```
var g = this.CreateGraphics();
var points = new Point[6]{new Point(0, 0), new Point(10, 10), new Point(30, 0), new Point(40,20), new Point(50, 0), new Point(60,30)};
g.TranslateTransform(Width / 2, 0, System.Drawing.Drawing2D.MatrixOrder.Append);
for (int i = 0; i < points.Length-1; i++)
{
    g.DrawLine(Pens.Black, points[i].X, Height / 2 - points[i].Y, points[i + 1].X, Height / 2 - points[i + 1].Y);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T23:11:32.137

也许这会很有用（记住 scale 和 translate 函数正在改变数组中的点）：

```
private void pictureBox1_Paint(object sender, PaintEventArgs e)
{
    var points = new PointF[6] { new PointF(0, 0), new PointF(30, 3), new PointF(90, 0), new PointF(190, 3.1f), new PointF(270, -0.5f), new PointF(360, 3.5f) };

    float maxX = (from p in points select p).Max(t => t.X);
    float maxY = (from p in points select p).Max(t => t.Y);            

    float xSizeToFit = pictureBox1.Width;
    float ySizeToFit = pictureBox1.Height/2;
    float scaleX = xSizeToFit / maxX;
    float scaleY = ySizeToFit / maxY;

    // scale to fit to given size
    ScalePoints(points, scaleX, scaleY);
    // translate to center
    TranslatePoints(points, this.pictureBox1.Width / 2 - 0.5f * xSizeToFit, this.pictureBox1.Height / 2 + 0.5f * ySizeToFit);

    DrawAxis(e.Graphics, this.pictureBox1.Size);
    e.Graphics.DrawLines(Pens.Black, points);                
}

private void TranslatePoints(PointF[] points, float transX, float transY)
{
    for (int i = 0; i < points.Length; i++)
    {
        points[i].X += transX;
        points[i].Y = transY - points[i].Y;
    }
}

private void ScalePoints(PointF[] points, float scaleX, float scaleY)
{
    for (int i = 0; i < points.Length; i++)
    {
        points[i].X *= scaleX;
        points[i].Y *= scaleY;
    }
}

public void DrawAxis(Graphics g, Size size)
{
    //x
    g.DrawLine(Pens.Black, 0, size.Height / 2, size.Width, size.Height / 2);
    //y
    g.DrawLine(Pens.Black, size.Width / 2, size.Height, size.Width / 2, 0);           
}

private void pictureBox1_Resize(object sender, EventArgs e)
{
    pictureBox1.Invalidate();
} 
```

# mysql - 元信息如何保存在 WPSC metabox 中？

> ID：10873687
> 
> 赞同：0
> 
> 时间：2012-06-03T20:25:14.430
> 
> 标签：mysql, wordpress, updating, saving-data, meta-boxes

我正在向 WPeCommerce 插件添加一些特定功能，但在编辑帖子页面的元框中保存信息时遇到了问题。我注意到的是直接保存**元信息**而不调用函数 update_option(); 输入名称有点像这种类型：“meta[_wpsc_sku]”，所以基本上我添加了具有相同类型的新元框：“meta[_custom_meta_key]”。问题是当我用 jQuery 删除元框中的这个输入字段时，数据库中的元键/值不会被删除。那么，我该如何接管这些东西呢？如果没有传递 $_POST[meta[_custom_meta_key]]，我如何清理值并删除它们？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T20:09:19.150

好的，我找到了解决方案。保存此类元信息的函数位于第 41 行的文件**/wpsc-admin/includes/product-functions.php**中，名为**wpsc_admin_submit_product**。

# pagination - Sencha Touch 2 分页插件记录数

> ID：10873693
> 
> 赞同：1
> 
> 时间：2012-06-03T20:25:44.003
> 
> 标签：pagination, sencha-touch-2

使用 ListPaging 插件时，如何设置记录总数或向插件发出所有记录已加载的信号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T23:22:22.227

我在文档中找到了这个：

[http://docs.sencha.com/touch/2-0/#!/api/Ext.plugin.ListPaging-cfg-noMoreRecordsText](http://docs.sencha.com/touch/2-0/#!/api/Ext.plugin.ListPaging-cfg-noMoreRecordsText)

你可能想看看源代码，了解 Sencha 是如何处理它的。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T00:01:03.060

我需要做的就是用我的 json 提要返回变量“total”。如果我要返回一个名称数组 ["bob","jim","mark"]，我需要返回 {"names":[...], "total": 3} 然后将我的 rootProperty 设置为 "names " 在我商店代理的 reader 属性中。

[http://docs.sencha.com/touch/2-0/#!/api/Ext.data.reader.Json-cfg-rootProperty](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.reader.Json-cfg-rootProperty)

# android - Foursquare 放置 JSON 数据未显示在列表视图中

> ID：10873695
> 
> 赞同：0
> 
> 时间：2012-06-03T20:25:46.280
> 
> 标签：android, json, listview, foursquare

我正在尝试将 Foursquare 位置解析到 android 应用程序中，我取得了成功，因为我可以在 Logcat 中查看数据，但 listview 没有显示任何数据。

这是代码：[http ://dl.dropbox.com/u/16910648/foursquare-places](http://dl.dropbox.com/u/16910648/foursquare-places)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T22:54:08.697

您应该在此处发布您的代码，因为它更具可读性。我在你的代码中找不到任何明显的东西，除了问题可能是你的场地列表。我不确定 SimpleAdapter 是否可以正确处理带有 HashMaps 的 ArrayList。您是否尝试将任何其他信息放入适配器？

尝试将前缀字符串 [] 放入您的适配器，看看是否出现任何问题，或者将您自己的适配器写入 ListView，这就是我的建议。

# search - 有没有办法在 Vim 中的文件中移动类似于 Emacs 的 Isearch？

> ID：10873704
> 
> 赞同：0
> 
> 时间：2012-06-03T20:27:40.883
> 
> 标签：search, vim

我已经使用 Vim 有一段时间了，我觉得我终于可以“流利”使用它了，但是我看到的一些功能列表、视频和其他东西（尤其是 Tim Visher 在 Emacs 系列中的 Vimgolf）真的说服我尝试 Emacs。

所以在过去的一周里，我几乎只使用 Emacs。我真的很怀念我在 Vim 中熟悉的一些概念（主要是动作移动风格，诸如此类`ci"`），但我在 Emacs 中真正学会喜欢的一件事是使用 Isearch 移动文件的方式。

例如，如果我想移动到调用函数*fn*的行，并且在该点和我想移动到的位置之间还有 2 个其他 'fn' 实例，我会做`C-s fn C-s C-s`. 如果我想在 Vim 中做同样的事情，我必须做类似的事情`/fn <CR> n n :noh <CR>`，这没有什么好，所以我可能只是检查行号并做`#G wwwww...`.

所以我的问题是：有没有办法通过 Vim 中的搜索来模拟 Emacs 移动的效率？它不必使用搜索，我只是在寻找除了我上面描述的繁琐的 go-to-line 和转发几个单词之外的东西。

编辑：[Effective Emacs](https://sites.google.com/site/steveyegge2/effective-emacs)中的第 4 项很好地描述了我想要完成的工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T23:20:23.660

您的链接中描述的正是我在 Vim 中的主要移动方式：`/foo<CR>nn`增量前向搜索和`?bar<CR>nn`增量后向搜索。

我看不出什么更有效，`<C-s>foo<C-s><C-s>`并且`<C-r>foo<C-r><C-r>`：那是更多的击键！

无论如何，我认为这`:set hlsearch`是你的问题。如果所有匹配项都包含在视口中，那没关系，但是一旦隐藏了*一些*匹配项，它就变得无用了。我没有，`set hlsearch`所以`/foo<CR>`对我来说与无能完全相反。

好吧，另一个问题是在同一个文件中有（至少）三个同名的函数……</p>

Vim 有很棒的文本对象：`}`或者`]m`在第一次查看某些代码时非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T10:29:37.510

您可以使用此键盘映射来模拟 Emacs：`cnoremap <C-s> <Cr>/<C-p>`.

尽管 Vim 有比搜索更好的移动方式。你试过ctags吗？

我还推荐[EasyMotion](http://www.vim.org/scripts/script.php?script_id=3526)插件，以便在文本的可见区域快速移动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T20:29:39.430

我想你正在寻找

```
set incsearch 
```

你可以把它和

```
set hlsearch 
```

以获得更好的结果。

另请查看“*”，它非常棒。

# google-chrome - 如何在 Google Chrome 中为扩展程序设置“闹钟和时钟”类别？

> ID：10873705
> 
> 赞同：3
> 
> 时间：2012-06-03T20:27:41.070
> 
> 标签：google-chrome, google-chrome-extension, browser-extension

如果那里有相关经验的人，我有一个关于 Google Chrome 扩展开发的问题。

我已经为 Google Chrome 创建了一个计时器扩展，但是当我想发布它时，仪表板中没有“闹钟和时钟”类别。我能找到的最接近的是“生产力”。但我希望我的扩展名列在[闹钟和时钟](https://chrome.google.com/webstore/category/app/90-alarms-and-clocks)下。

这是我在**Developer Dashboard > Edit Item**中看到的：

![在此处输入图像描述](../Images/ff7d3470aca2b5353b4f061d34755482.png)

我真的在“其他类别”中输入了“闹钟和时钟”，但它也没有帮助。[人们如何设置您可以在Chrome 网上应用店中](https://chrome.google.com/webstore/category/home)看到的“实用程序”、“教育”等类别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:26:32.583

我知道 Google 员工会审核扩展程序的宣传图片。这种质量控制还可能包括设置详细的类别。帮助他们选择使用`Additional categories (comma-separated):`选项。它的描述是：

> 输入描述您的项目的其他类别。我们将使用它们来改进我们的类别选择。

# c++ - 鲁棒地找到 N 个直径相同的圆：替代暴力破解 Hough 变换阈值

> ID：10873710
> 
> 赞同：16
> 
> 时间：2012-06-03T20:27:55.967
> 
> 标签：c++, algorithm, image-processing, opencv, computer-vision

我正在开发应用程序来跟踪培养皿（或其他圆形容器）中的小动物。在进行任何跟踪之前，前几帧用于定义区域。每道菜都会匹配一个圆形的独立静态区域（即在跟踪过程中不会更新）。用户可以请求程序尝试从原始图像中查找菜肴并将其用作区域。

以下是示例： ![在此处输入图像描述](../Images/88dd30837b4e27cb00ba307ca74037c9.png) ![在此处输入图像描述](../Images/05b2222f2c53477cede336f57f6a4c5e.png)

为了执行此任务，我正在使用**Hough Circle Transform**。但实际上，不同的用户会有非常不同的设置和图像，我不想让用户手动定义参数。我也不能只猜测所有参数。

但是，我得到了我想使用的其他信息：

我知道要检测的确切圆圈数。

*   所有圆圈的尺寸几乎相同。
*   圆圈不能重叠。
*   我对圆圈的最小和最大尺寸有一个粗略的了解。
*   圆圈必须完全在图片中。

因此，我可以将要定义的参数数量缩小为一个：**阈值**。使用这些信息并考虑到我要找到 N 个圆圈，**我当前的解决方案是测试许多阈值值并保持标准偏差最小**的圆圈（因为所有圆圈都应该具有相似的大小）：

```
//at this point, minRad and maxRad were calculated from the size of the image and the number of circles to find.
//assuming circles should altogether fill more than 1/3 of the images but cannot be altogether larger than the image.
//N is the integer number of circles to find.
//img is the picture of the scene (filtered).

//the vectors containing the detected circles and the --so far-- best circles found.
std::vector<cv::Vec3f> circles, bestCircles;

//the score of the --so far-- best set of circles
double bestSsem = 0;

 for(int t=5; t<400 ; t=t+2){
//Apply Hough Circles with the threshold t
    cv::HoughCircles(img, circles, CV_HOUGH_GRADIENT, 3, minRad*2, t,3, minRad, maxRad );

    if(circles.size() >= N){
//call a routine to give a score to this set of circles according to the similarity of their radii
        double ssem = scoreSetOfCircles(circles,N);
//if no circles are recorded yet, or if the score of this set of circles is higher than the former best
        if( bestCircles.size() < N ||  ssem > bestSsem){
//this set become the temporary best set of circles
                bestCircles=circles;
                bestSsem=ssem;
        }
    }
} 
```

和：

```
 //the methods to assess how good is a set of circle (the more similar the circles are, the higher is ssem)
    double scoreSetOfCircles(std::vector<cv::Vec3f> circles, int N){
    double ssem=0, sum = 0;
        double mean;
        for(unsigned int j=0;j<N;j++){
            sum = sum + circles[j][2];
        }
        mean = sum/N;
        for(unsigned int j=0;j<N;j++){
            double em = mean - circles[j][2];
            ssem = 1/(ssem + em*em);
        }
    return ssem; 
```

}

通过执行第二遍，我已经达到了更高的准确度，其中我重复了这个算法，使用第一遍的结果缩小了 [minRad:maxRad] 间隔。

例如 minRad2 = 0.95 * 最佳圆的平均半径和 maxRad2 = 1.05 * 最佳圆的平均半径。

到目前为止，我使用这种方法取得了相当好的结果。但是，它很慢而且很脏。我的问题是：

*   您可以使用任何替代算法以更清洁/更快的方式解决此问题吗？
*   或者你有什么建议来改进这个算法？
*   你认为我应该研究广义霍夫变换吗？

感谢您的回答和建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T21:02:22.940

以下方法应该非常适合您的情况：

1.  二值化您的图像（您可能需要在多个阈值级别上执行此操作，以使算法独立于照明条件）
2.  寻找轮廓
3.  对于每个轮廓计算力矩
4.  按区域过滤它们以删除太小的轮廓
5.  按圆度过滤轮廓：

    ```
    double area = moms.m00;
    double perimeter = arcLength(Mat(contours[contourIdx]), true);
    double ratio = 4 * CV_PI * area / (perimeter * perimeter); 
    ```

    `ratio`接近 1 会给你圈子。

6.  计算每个圆的半径和中心

    ```
    center = Point2d(moms.m10 / moms.m00, moms.m01 / moms.m00); 
    ```

并且您可以添加更多过滤器以提高鲁棒性。

实际上，您可以在 OpenCV 中找到整个过程的实现。看看`SimpleBlobDetector`类和`findCirclesGrid`函数是如何实现的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-03T21:48:28.177

在当前算法中，最突出的是`for(int t=5; t<400; t=t+2)`循环。尝试记录一些测试图像的得分值。图`score(t)`与`t`. 运气好的话，它要么建议一个较小的范围，`t`要么是一条具有单个最大值的平滑曲线。[在后一种情况下，您可以使用爬山](http://en.wikipedia.org/wiki/Hill_climbing)方法将所有`t`值的循环更改为更智能的搜索。

即使它相当嘈杂，您也可以先循环遍历 30 的倍数，然后最好将其中的 1 或 2 个循环遍历附近的 2 的倍数。

此外，在您的评分功能中，您应该取消任何具有重叠圆圈的结果，并可能惩罚过度间隔的圆圈。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T16:19:57.963

You don't explain why you are using a black background. Unless you are using a telecentric lens (which seems unlikely, given the apparent field of view), and ignoring radial distortion for the moment, the images of the dishes will be ellipses, so estimating them as circles may lead to significant errors.

All and all, it doesn't seem to me that you are following a good approach. If the goals is simply to remove the background, so you can track the bugs inside the dishes, then your goal should be just that: find which pixels are background and mark them. The easiest way to do that is to take a picture of the background without dishes, under the same illumination and camera, and directly detect differences with the picture with the images. A colored background would be preferable to do that, with a color unlikely to appear in the dishes (e.g. green or blue velvet). So you'd have reduced the problem to bluescreening (or chroma keying), a classic technique in machine vision as applied to visual effects. Do a google search for "matte petro vlahos assumption" to find classic algorithms for solving this problem.

# java - QueryParameter Javabean 的良好数据类型

> ID：10873711
> 
> 赞同：0
> 
> 时间：2012-06-03T20:28:04.023
> 
> 标签：java, sql, prepared-statement

**我的问题是**：Javabean 应该支持哪些数据类型来填充[`PreparedStatement`](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)？

我正在为[Java Helper Library](https://github.com/kentcdodds/Java-Helper)编写 SQLHelper 。我正在编写的一个类是一个`QueryParameter`Javabean，它拥有一个类型和一个值。它的主要用途是与`HelperQuery`Javabean 相关联，并且准备好的语句将在对以下方法的调用中填充它们：

`fillStatement(preparedStatement, helperQuery.getParams());`

```
public void fillStatement(PreparedStatement pstmt, QueryParameter... params) throws SQLException {
  for (int i = 1; i <= params.length; i++) {
    QueryParameter param = params[i - 1];
    switch (param.getType()) {
      case QueryParameter.CLOB:
        pstmt.setClob(i, (Clob) clob);
        break;
      case QueryParameter.STRING:
        pstmt.setString(i, (String) param.getValue());
        break;
      case QueryParameter.YOU_GET_THE_IDEA:
        //...;
        break;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T20:28:04.337

查看[PreparedStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html) javadoc 并支持`setSomething`那里的每种数据类型。他们是：

```
Array, AsciiStream, BigDecimal, BinaryStream, Blob, Boolean, Byte,
Bytes, CharacterStream, Clob, Date, Double, Float, Int, Long,
NCharacterStream, NClob, NString, Null, Object, Ref, RowId, Short,
SQLXML, String, Time, Timestamp, and URL 
```

# android - 是否有一种属性或方法可以在对用户隐藏的 Android 视图中存储值？

> ID：10873714
> 
> 赞同：1
> 
> 时间：2012-06-03T20:28:23.940
> 
> 标签：android

我不确定Android是否有这个，或者是否有这样做的方法。我查看了文档，但没有看到任何专门用于此用途的内容。是否有可能有用的首选方法？非常感谢任何帮助。

我需要它用于包含 TextView 成员的议程列表。但是当用户单击一个时，我需要一种访问该议程信息的方法，例如从数据库中存储一个 ID 以引用该事件信息，但我需要对用户隐藏它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T20:33:26.877

使用`setTag()`and `getTag()`，您可以将它传递给您喜欢的任何类型的 Object。

这是[参考](http://developer.android.com/reference/android/view/View.html#setTag%28%29)。

**从评论中添加**

我相信查询数据库几次而不是让一个 Cursor 保存*所有内容*是最简单的。

例如，如果我们有一个包含如下列的表：`events(_id, name, startTime, endTime, people, etc)`. 您可以打电话`SELECT * FROM events`，但如果您只想了解一两个事件的详细信息，这似乎太过分了。`SELECT _id, name FROM events`在 ListView中查询和存储它更有意义。然后你可以拥有：

```
listView.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        detailCursor = database.rawQuery(`SELECT * FROM events WHERE _id = ?`, new String[] { id });
        // Display this event's details somehow
    }
} 
```

像这样的辅助光标是最简单的。您不会为已使用的事件详细信息分配内存，并且这些重复的次要查询不会造成重大的性能损失。在这种情况下，我不会在 View 的标签中存储任何内容，通用光标（带有每个事件的 id 和名称）和详细光标应该为您提供所需的一切。

希望有帮助。

# eclipse - 获取方法帮助，同时使用 Eclipse Pydev

> ID：10873716
> 
> 赞同：1
> 
> 时间：2012-06-03T20:28:36.763
> 
> 标签：eclipse, pydev

我想知道，使用`Eclipse's PyDev plugin`，为什么文档并不总是出现？

![在此处输入图像描述](../Images/1ddeb3221ea7bc38a15db34bac931a40.png)

和....相比

![在此处输入图像描述](../Images/19379d1f2aa7b2514d1624fc081d0d11.png)

**有没有办法设置`Eclipse`为“始终显示可用的模块以及附加的帮助”？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:45:05.827

问题在于，根据每个上下文，PyDev 类型推理引擎可能知道或不知道您在说什么……在第一种情况下，它知道您正在处理一个字符串，因此可以正确地向您显示。其次，word 可能是一些参数，所以它不能真正正确地找到 swapcase——尽管如果你做了一个 assert isinstance(word, str)，它应该可以工作。

# python - 正则表达式匹配 - 为什么这不匹配并返回 None？

> ID：10873719
> 
> 赞同：1
> 
> 时间：2012-06-03T20:29:30.180
> 
> 标签：python, regex

我不明白为什么这个简单的正则表达式匹配不返回匹配对象。它返回 None 我做错了什么？

我是一个完全新手（昨天开始），想编写一个小程序来搜索文件夹树中的某些文件，打开这些文件并在这些文件中找到某些行，然后将这些行打印到一个新文件中。为了完成第一步，我想匹配 os.walk 返回的文件名并将它们与特定模式匹配。所以现在我正在检查正则表达式是如何工作的，据我了解，下面的代码应该会匹配，但是当我打印 a 时，我得到了 None。我不明白为什么，它不应该返回任何以 9 开​​头的文件吗？

```
import os, fnmatch, re
pattern = re.compile(r'^9')
teststring= "9-ZnPc.dat"
a=pattern.match(teststring, re.I)
print a

Output: None 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T20:33:30.963

因为你应该传递`re.I`to `compile()`，而不是`match()`。

```
>>> pattern = re.compile(r'^9', re.I)
>>> a=pattern.match(teststring)
>>> print a
<_sre.SRE_Match object at 0x1140168> 
```

# php - 选项卡空间问题

> ID：10873724
> 
> 赞同：0
> 
> 时间：2012-06-03T20:29:58.453
> 
> 标签：php

我通过 mySQL 制作了一个简单的查询系统，它显示了 100 条记录，我将它们提取到我的游戏中，但我对 PHP 中的代码有疑问。

我希望每行之间有 5char 空间所以我必须使用制表符空间`\t\t\t\t\t`（他们我得到不同的结果：

`2Char string + 5char space = 7Char`和`10Char string + 5Char space = 15Char`

```
$query = "SELECT * FROM `scores` ORDER by `score` DESC LIMIT 100";
$result = mysql_query($query) or die('Query failed: ' . mysql_error());

$num_results = mysql_num_rows($result);  

for($i = 0; $i < $num_results; $i++)
{
     $row = mysql_fetch_array($result);
     echo $i+1 . "-" . "\t\t Name: " .$row['name'] . "\t\t\t\t Device: " . $row['device'] . "\n \t\t Difficulty: " . $row['level']. "\t\t\t\t Score: " . $row['score'] . "\n\n";
} 
```

**代码输出**

```
1- Name: James   Device: HTC OneX
  Difficulty: Hard    Score: 5760

2-  Name:  Erika_S      Device: PC
  Difficulty:  Normal       Score: 13780

... 
```

**我想要的输出**

```
1- Name: James          Device: HTC OneX
   Difficulty: Hard     Score: 5760

2- Name: Erika_S        Device: PC
   Difficulty: Normal   Score: 13780
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T20:41:10.087

`Tab`实际上是一个字符，但以用户想要的方式显示。例如，当您在 IDE 中为 1 个选项卡选择 8 个空格时，您将得到它。有一个很棒的概念叫做[弹性制表](http://nickgravgaard.com/elastictabstops/)位，但它只是一个概念——太可悲了。

结论：你不能按照你描述的那样做`tab`。

你可以做什么：

*   用 计算所需的空格和硬编码`&nbsp;`，但它很脏，你不应该这样做。
*   使用 html 表格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T20:45:35.107

而不是 $row['...'] 使用 sprintf("%-15s", $row['...'])，但在每个地方你都需要将数字 (-15) 调整为真正的数字需要

```
<?php
$s = 'monkey';
$t = 'many monkeys';

printf("[%s]\n",      $s); // standard string output
printf("[%10s]\n",    $s); // right-justification with spaces
printf("[%-10s]\n",   $s); // left-justification with spaces
printf("[%010s]\n",   $s); // zero-padding works on strings too
printf("[%'#10s]\n",  $s); // use the custom padding character '#'
printf("[%10.10s]\n", $t); // left-justification but with a cutoff of 10 characters
?>
The above example will output:
[monkey]
[    monkey]
[monkey    ]
[0000monkey]
[####monkey]
[many monke] 
```

[在http://www.php.net/manual/en/function.sprintf.php](http://www.php.net/manual/en/function.sprintf.php)阅读更多内容

如果您不能使用 printf，您可以轻松地创建自己的函数来执行类似的操作，并且足以满足您的需要：

```
function add_spaces($str, $total_len) {
    return $str . substr("                           ", 0, $total_len - strlen($str));
} 
```

# c# - 用于数据列表的数据源无效

> ID：10873727
> 
> 赞同：0
> 
> 时间：2012-06-03T20:30:40.693
> 
> 标签：c#, asp.net, visual-studio-2008

关于此错误可能源于何处的任何建议？

```
 "An invalid data source is being used for DataList1\. A valid data source must implement either IListSource or IEnumerable." 
```

这段代码因错误而突出显示：

```
DataList1.DataSource = FilmsAccess.GetFilmDetails(filmId); 
```

GetFilmDetails 方法调用存储过程并返回一个表，其中包含我在 .aspx 数据列表中指定的所有字段（这是“数据绑定”到此方法的）。提前致谢。安娜

编辑：请检查我自己对此的回答。我在那里澄清了解决方案，并提出了另一个相关问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T21:05:03.410

感谢大家！“TheGeekYouNeed”，你让我意识到了一件非常重要的事情！GetFilmDetails 方法实际上并不返回一个表，而是一个结构。我让它返回一张桌子，所以现在它可以工作了！- 我喜欢通过这些建议，我被教导要注意哪些细节，而最初我不知道从哪里开始调试。非常有帮助！

现在，我有一个更相关的问题：有人可以帮助理解为什么如果返回的数据类型是结构而不是表，则会引发此错误？我指定：

1.  该结构有field1、field2、field3等...
2.  该表在 column1、column2 等中具有完全相同的信息。
3.  字段和列名的名称完全相同。aspx 中对它们的引用类似于：Eval("field1").ToString()。

# objective-c - 如何为 CCLabelTTF 的字体大小设置动画？

> ID：10873728
> 
> 赞同：0
> 
> 时间：2012-06-03T20:30:58.430
> 
> 标签：objective-c, animation, cocos2d-iphone, font-size

我想在 CCLabelTTF 上执行动画，其中字体大小正在动画。我不想使用`CCScaleTo`，因为（当然）质量很差。有没有人知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T21:44:42.013

恐怕您无法在 CCLabelTTF 上设置字体大小的动画，您可以为标签设置所需的最大字体大小，然后使用 setScale 或 CCScaleTo。但是请注意，CCLabelTTF 比 CCLabelBMFont 慢，我认为最好用 bmGlyph 之类的任何程序渲染位图字体，然后使用 CCLabelBMFont，看看[cocos2d 参考](http://www.cocos2d-iphone.org/api-ref/0.99.5/interface_c_c_label_b_m_font.html)。但是无论如何，您都必须缩放标签。

# fullcalendar - fullcalendar qtip2 eventClick（用于编辑）

> ID：10873730
> 
> 赞同：1
> 
> 时间：2012-06-03T20:31:15.560
> 
> 标签：fullcalendar, qtip2

我能够在 dayClick (fullcalendar) 上创建一个 qtip2 并保存该事件的数据。现在我试图单击事件以再次加载 qtip2，但没有任何反应。我已将 editable 设置为 false （否则 eventClick 将永远无法工作）。

我希望能够重新打开一个 qtip2 事件，以便对其进行编辑....提前致谢

（注意：DayClick qtip2 效果很好）

```
$('#calendar').fullCalendar({
            // put your options and callbacks here

            aspectRatio: 1.3,    

            editable: false,
            draggable: true,                
            selectable: true,
            selectHelper: true,
            unselectAuto: false,
            disableResizing:true,

            header: {                    
                right: 'today prev,next',
                center: 'title',
                left: 'agendaDay,agendaWeek,month'
            },

            events: "json_events.php",                                              

            eventClick: function(event, jsEvent, view) {

                //alert(event.title);       

                $(this).qtip({    
                    content: {    
                        title: { text: event.title },
                        text: "<span class='title'>Start: </span>" + ($.fullCalendar.formatDate(event.start, 'hh:mmtt')) + "<br><span class='title'>Description: </span>" + event.description + "<br /><input type='button' value='Update' class='button' />"   
                    },
                    position: {
                        at: 'top center',
                        // Position the tooltip above the link
                        my: 'bottom center',
                        adjust: {
                            y: -2,
                            resize: false // We'll handle it manually
                        },
                        viewport: calendar,
                        container: calendar
                    },
                    show: {
                        solo: true
                    },                         
                    style: { 
                        width: 200,
                        padding: 5,
                        color: 'black',
                        textAlign: 'left',
                        border: {
                            width: 1,
                            radius: 3
                        },
                        tip: 'bottom-middle',
                        classes: 'daytooltip ui-tooltip-dark ui-tooltip-shadow',
                        tip: {
                            width: 20, height: 8
                        }                        
                    } 
                });     //element.qtip                    

            },

            dayClick: function(date, allDay, jsEvent, view) { 
                   var month=new Array();
                    month[0]="January";
                    month[1]="February";
                    month[2]="March";
                    month[3]="April";
                    month[4]="May";
                    month[5]="June";
                    month[6]="July";
                    month[7]="August";
                    month[8]="September";
                    month[9]="October";
                    month[10]="November";
                    month[11]="December"; 

                   var monthNum=new Array();
                    monthNum[0]="01";
                    monthNum[1]="02";
                    monthNum[2]="03";
                    monthNum[3]="04";
                    monthNum[4]="05";
                    monthNum[5]="06";
                    monthNum[6]="07";
                    monthNum[7]="08";
                    monthNum[8]="09";
                    monthNum[9]="10";
                    monthNum[10]="11";
                    monthNum[11]="12";  

                    var allday = "<label for='allday'><input type='checkbox' id='allday' onClick='enabledisable(this.checked)' /><span>All Day Event</span></label>"
                    var thisDay = month[date.getMonth()] + '/' + date.getDate() + '/' + date.getFullYear();
                    var thisDayDBFormat = date.getFullYear() + '-' + monthNum[date.getMonth()] + '-' + date.getDate();

                    var sHours = "<select id='startTimeHour' name='startTimeHour' class='dropdown-menu-time-qtip' >" +                                                               
                                    "<option value='01'>01</option>" +
                                    "<option value='02'>02</option>" +
                                    "<option value='03'>03</option>" +                        
                                    "<option value='04'>04</option>" +
                                    "<option value='05'>05</option>" +
                                    "<option value='06' selected>06</option>" +
                                    "<option value='07'>07</option>" +                        
                                    "<option value='08'>08</option>" +
                                    "<option value='09'>09</option>" +
                                    "<option value='10'>10</option>" +
                                    "<option value='11'>11</option>" +                        
                                    "<option value='12'>12</option>" +                                       
                                    "</select>";
                    var sMins = "<select id='startTimeMin' name='startTimeMin' class='dropdown-menu-time-qtip' >" +
                                    "<option value='00' selected>00</option>" +
                                    "<option value='15'>15</option>" +
                                    "<option value='30'>30</option>" +
                                    "<option value='45'>45</option>" + 
                                    "</select>";                              
                    var sAM_PM = "<select id='startTimeAMPM' name='startTimeAMPM' class='dropdown-menu-time-qtip' >" +
                                    "<option value='AM'>AM</option>" +
                                    "<option value='PM' selected>PM</option>" +                                        
                                    "</select>";                                                    

                    var eHours = "<select id='endTimeHour' name='endTimeHour' class='dropdown-menu-time-qtip' >" +                                        
                                    "<option value='01'>01</option>" +
                                    "<option value='02'>02</option>" +
                                    "<option value='03'>03</option>" +
                                    "<option value='04'>04</option>" +
                                    "<option value='05'>05</option>" +
                                    "<option value='06'>06</option>" +
                                    "<option value='07' selected>07</option>" +
                                    "<option value='08'>08</option>" +
                                    "<option value='09'>09</option>" +
                                    "<option value='10'>10</option>" +
                                    "<option value='11'>11</option>" +   
                                    "<option value='12'>12</option>" +                                        
                                    "</select>";
                     var eMins = "<select id='endTimeMin' name='endTimeMin' class='dropdown-menu-time-qtip' >" +
                                    "<option value='00' selected>00</option>" +
                                    "<option value='15'>15</option>" +
                                    "<option value='30'>30</option>" +
                                    "<option value='45'>45</option>" + 
                                    "</select>";                              
                    var eAM_PM = "<select id='endTimeAMPM' name='endTimeAMPM' class='dropdown-menu-time-qtip' >" +
                                    "<option value='AM'>AM</option>" +
                                    "<option value='PM' selected>PM</option>" +                                        
                                    "</select>";                          

                    $(this).qtip({
                    overwrite: true,
                    content: {                            
                        title: {
                            text: 'Create Event / Add Menu Item: ', // + month[date.getMonth()] + '/' + date.getDate() + '/' + date.getFullYear(),
                            button: true
                        },
                        //text: $('#fxx').html() // this html was on the form

                        //text: "<span id='event-create' ><ul><li><input type='checkbox' />All Day</li><li><input type='radio' />input:radio</li><li><select><option>Select</option><option>Foo</option><option>Bar</option></select></li><li></li><li><input type='text' value=" + month[date.getMonth()] + '/' + date.getDate() + '/' + date.getFullYear() + "/></li><li><textarea>textarea</textarea></li></ul><input type='button' class='button' value='Create Event' /></span>"
                        text: "<div id='event-create'>" +                                
                                "<fieldset>" +
                                    "Create a Generic Event OR add a Menu (meal) Event from your Personal Menu!" +
                                    "<br />" +
                                    "<label>When:</label><span>" + thisDay + "</span>" +
                                    "<br />" +                                        
                                    "<form action='.' method='post' name='create_event'>" +
                                        "<input type='hidden' name='action' value='save_event' />" +
                                        "<input type='hidden' name='eventDate' value='" + thisDayDBFormat + "' />" +
                                        "<label for='eventName'>Name:</label><input type='text' name='eventName' value='' title='Letters, numbers, and underscore!' size='30' />" +
                                        "<br />" +
                                        "<label for='eventLocation'>Location:</label><input type='text' name='eventLocation' value='' title='Letters, numbers, and underscore!' size='30' />" +                                                                                                                                   
                                        "<div id='event-create-time'>" +
                                            "<input type='checkbox' name='eventAllDay' onClick='enabledisable(this.checked)' /><span>&nbsp;&nbsp;All Day Event</span><br />" +
                                            "Start: " + sHours + " " + sMins + " " + sAM_PM + "<br />" +
                                            "End:&nbsp;&nbsp;" + eHours + " " + eMins + " " + eAM_PM + 
                                        "</div>" +
                                        "<br />" +
                                        "<input type='submit' id='event-button' name='btnSaveGenericEvent' class='button150' value='Create Generic Event' />" +                                                                                    
                                        "<input type='submit' id='event-button' name='btnSaveMenuEvent' class='button150' value='Create Menu Event' />" +                                         
                                    "</form>" + 
                                "</fieldset>" +
                            "</div>"
                            //"<a href='#' onclick=" + '"' + "document['my_personal_menu'].submit()" + '"' + " >My Personal Menu >></a>" +
                    },
                    position: {
                        at: 'top center',
                        // Position the tooltip above the link
                        my: 'bottom center',
                        adjust: {
                            y: -2,
                            resize: false // We'll handle it manually
                        },
                        viewport: calendar,
                        container: calendar
                    },

                    // NOTE: originally, tooltip opened as modal (gray background) and had to close with 'x' button
                    // Settings were "show: Modal: on: true AND hide: 'false'
                    //
                    // To have tooltip popup on each day click AND have any previous tooltip go away (like google calendar)
                    // Settings "show: modal: on: false AND hide: 'true'"
                    show: {
                        ready: true,
                        event: false,
                        modal: {
                            // 'true' = Make it modal (darken the rest of the page)...
                            on: false,                                
                            blur: false // ... but don't close the tooltip when clicked
                        }
                    },
                    // 'false' = does not hide when clicking outside
                    // 'unfocus' = will hide when clicking outside tooltip IF modal 'on: false' (above)
                    hide: 'unfocus',
                    style: {
                        classes: 'daytooltip ui-tooltip-dark ui-tooltip-shadow ui-tooltip-default width400',
                        tip: { width: 20, height: 8 }                                                 
                    }
                })
                .qtip('show');
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-23T20:34:18.783

我遇到了同样的问题，并从 Craig 那里找到了解决方案：

`overwrite`尝试附加一个设置为的 qTip `false`，并在通话结束时更新其内容：

```
$('#calendar').fullCalendar({
    eventClick: function(calEvent, jsEvent, view) {
        $(this).qTip({
           overwrite: false,
           content: 'Loading...',
           show: { ready: true }
        })
        .qtip('option', 'content.text', newContent);
    }
}); 
```

# android - 检测对文件系统的访问？

> ID：10873731
> 
> 赞同：-1
> 
> 时间：2012-06-03T20:31:54.147
> 
> 标签：android, file, controls

我想做一个防病毒软件，但要检测应用程序何时在 SD 卡上创建文件。但我找不到一种方法来检测 FS 上的访问记录或由其他应用程序创建文件。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T20:40:23.253

使用`FileObserver`. [这](http://www.roman10.net/android-fileobserverthe-underlying-inotify-mechanism-and-an-example/)是一个描述。

但是，请注意`FileObserver`API 不允许您阻止文件操作。您只能在事后对它们做出反应。到那时，已经写入文件的应用程序可能已经消失了。

如果您的意图是创建一个强大的通用防病毒软件（或了解如何创建一个），您将需要采取更艰难的方式。了解`avflt`和`redirfs` [内核模块](https://stackoverflow.com/questions/6368995/loading-a-custom-kernel-module)，学习[root](http://en.wikipedia.org/wiki/Rooting_%28Android_OS%29)设备并加载这些模块。

如果成功，您将能够使用[libav](http://www.redirfs.org/svn/redirfs/trunk/doc/libav/libav.txt)库，可靠地检测调用进程 ( `av_event.pid`)，并能够延迟或可靠地拒绝您不喜欢的请求。

由于生根的各种问题，您通常仍无法很好地推销您的防病毒软件，但从技术上讲，这是完成一般任务的唯一合理方法。

# grails - 为 Grails 石英作业创建自定义范围

> ID：10873735
> 
> 赞同：1
> 
> 时间：2012-06-03T20:32:37.080
> 
> 标签：grails

有没有人设法在 Grails 中创建自定义范围？

我在 BootStrap.groovy（注入 grailsApplication）中做到了这一点：

grailsApplication.mainContext.getBeanFactory().registerScope('simpleThread', new SimpleThreadScope())

在我的 spring/resources.groovy 中，我有：

```
myContext(MyContext) { bean ->
    bean.scope = 'simpleThread'
} 
```

然后将其注入到我的所有域对象中。

这似乎有效......但是有关于使用 SimpleThreadScope 的对象没有被破坏的警告......我想知道这是否安全。

我这样做是因为我不能使用 Request 范围，因为我们触发了 Quartz 作业（使用 Grails 插件），并且请求被破坏了。

我们在常规 Web 请求和使用 Quartz 的异步请求中都使用这个上下文对象...

# c++ - 游戏循环帧率控制问题

> ID：10873740
> 
> 赞同：1
> 
> 时间：2012-06-03T20:33:01.253
> 
> 标签：c++, frame-rate, game-loop

无论如何，这让我发疯了，通常的故事，试图保证在我的非常简单的游戏中在任何运行它的 Windows 机器上都具有相同的速度。我通过指定 1/60 值来做到这一点，然后确保框架无法运行，直到该值自上次调用以来及时通过。由于某种原因，我遇到的问题是 1/60 等于 30hz，我必须将其设置为 1/120 才能获得 60hz。它也不会在 60hz 上爆炸，它会快一点。

如果我把它贴在这里，有人可以告诉我他们是否发现任何问题？或者更精确的方式来做到这一点？

```
float controlFrameRate = 1./60 ;

while (gameIsRunning)
{
    frameTime += (system->getElapsedTime()-lastTime);
    lastTime = system->getElapsedTime();

    if(frameTime > controlFrameRate)
    {
        gameIsRunning = system->update();

        //do stuff with the game

        frameTime = .0f;                   
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T20:43:29.720

不要调用`getElapsedTime`两次，两次调用可能会有细微差别。相反，存储它的值，然后重用它。此外，不要将 frameTime 设置为 0，而是从中减去 controlFrameRate，这样，如果一帧需要更长的时间，下一帧将通过缩短一点来弥补。

```
while (gameIsRunning)
{
    float elapsedTime = system->getElapsedTime();

    frameTime += (elapsedTime-lastTime);
    lastTime = elapsedTime;

    if(frameTime > controlFrameRate)
    {
        gameIsRunning = system->update();

        //do stuff with the game

        frameTime -= controlFrameRate;
    }
} 
```

我不确定您必须将速率设置为 1/120 的问题，您在这里使用什么计时 API？

# php - 在纯 PHP5 中创建 MySQL 转储

> ID：10873741
> 
> 赞同：4
> 
> 时间：2012-06-03T20:33:07.260
> 
> 标签：php, mysql, backup, mysqldump

我正在为我的项目创建一个备份脚本，该脚本将通过 cron 执行。

现在我正在使用：

```
<?php
include("config.php");

/* Misc */
$pathtobackup = realpath('.');
$backupfolder = realpath("backup");
$sqlfilename = "SQLDUMP-".date("d-m-Y--H-i").".sql";
$backupfilename = "BACKUP-".date("d-m-Y--H-i").".zip";
$backupfilepath = $backupfolder."/".$backupfilename;

/* Systemcall */
exec("/usr/bin/mysqldump -u{$mysqluser} -p{$mysqlpw} -h {$mysqlserver} {$mysqldb}", $sqldata, $fp);

$sqldump = implode("\n", $sqldata);

if ($fp!=0){
    die("could not create mysql dump\n");
}

/* Create Zip */
$zip = new ZipArchive();

if ($zip->open($backupfilepath, ZIPARCHIVE::CREATE)!==TRUE) {
    die("cannot open <{$backupfilepath}>\n");
}

$path = realpath('.');

$iterator  = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($pathtobackup, FilesystemIterator::SKIP_DOTS));

foreach($iterator as $name=>$object){

    $zip->addFile($name);

}

$zip->addFromString($sqlfilename, $sqldump);

if ($zip->close()!==TRUE) {
    die("cannot write <{$backupfilepath}>\n");
}

?> 
```

但我想用纯 PHP 创建 MySQL Dump 以使其更兼容并能够在其他服务器上使用它，而其他服务器无法使用`system`和`mysqldump`.

我希望您知道不使用 150 文件库的解决方案 :)

问候，弗雷德里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T20:46:39.390

如果您真的必须这样做，那么在`mysql`创建此类脚本时应该考虑以下几个查询：

`SHOW TABLES`- 返回所有数据库表名

`SHOW CREATE TABLE table_name`返回用于创建表的 sql 查询

`SHOW PROCEDURE STATUS`和`SHOW FUNCTION STATUS`- 返回存储过程和函数的列表

`SHOW CREATE PROCEDURE procedure_name`和`SHOW CREATE FUNCTION function_name`-return 用于创建存储过程和函数的查询

其余的是通常`SELECT`和`INSERT`查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-27T23:07:19.977

看看这里：[https](https://github.com/ifsnop/mysqldump-php) ://github.com/ifsnop/mysqldump-php ！它是用 php 编写的原生解决方案，带有测试，支持存储过程、触发器、视图 hexblob、正则表达式......

您可以使用 composer 安装它，它就像这样做一样简单：

```
<?php

use Ifsnop\Mysqldump as IMysqldump;

try {
    $dump = new IMysqldump\Mysqldump('database', 'username', 'password');
    $dump->start('storage/work/dump.sql');
} catch (\Exception $e) {
    echo 'mysqldump-php error: ' . $e->getMessage();
}

?> 
```

它支持高级用户，从原始 mysqldump 复制了许多选项。

所有选项都在 github 页面上进行了解释，但或多或​​少是自动解释的（文档中的小片段）：

```
$dumpSettingsDefault = array(
    'include-tables' => array(),
    'exclude-tables' => array(),
    'compress' => 'None',
    'no-data' => false,
    'add-drop-database' => false,
    'add-drop-table' => false,
    'single-transaction' => true,
    'lock-tables' => false,
    'add-locks' => true,
    'extended-insert' => true,
    'disable-foreign-keys-check' => false,
    'where' => '',
    'no-create-info' => false
); 
```

# nssavepanel - 找不到名为“ToolbarArrangeByTemplate”的图像

> ID：10873746
> 
> 赞同：2
> 
> 时间：2012-06-03T20:34:53.030
> 
> 标签：nssavepanel

我在 Xcode 的日志窗格中系统地收到此错误，说：每次运行 NSOpenPanel 或 NSSavePanel 时都找不到名为“ToolbarArrangeByTemplate”的图像。

有人收到同样的信息吗？这似乎是 Xcode 4.3.2 中的一个问题。互联网并没有带来任何相关的东西。文档中未引用此名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T23:35:17.610

在我的应用程序的本地化版本中，即使在 Xcode 4.3.3 中，我也会收到相同的消息。

这是“打开/保存”面板中按钮中的图像：

![ToolbarArrangeByTemplate 图像在其打开/保存面板按钮中。](../Images/d41a5e109b476887c742bd6e0e448788.png)

苹果似乎无意中将该图像设置为本地化，但没有添加任何本地化。这显然是一个错误，因为它是一个根本不需要任何本地化的象形图图标......</p>

让我们希望 Apple 在 Mountain Lion 中修复它。有人应该在这里提交一个错误……但这并没有什么坏处，它只是污染了一点我们的日志和用户的……</p>

# java - 当我输入 JTextArea 时如何显示自动完成？

> ID：10873748
> 
> 赞同：10
> 
> 时间：2012-06-03T20:35:01.110
> 
> 标签：java, swing, tooltip, jtextarea

我需要在用户输入时显示建议（自动完成）`JTextArea`，有点像手机 T9。

我不知道如何在`myTextAreaKeyTyped()`事件中做到这一点。

这个应用程序是一个打字助手。它显示键盘上不存在的字符变体。EG 你按'A'，它会显示Â:1, Á:2 ,À:3…如果你按1,2 或3，'A' 将被替换。它已经完成了，但变体显示在`JLabel`底部的a 中我的`JFrame`，因为我不知道该怎么做。

你能帮帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-04T15:32:45.313

这是一个让自己受到启发的片段。您可能需要重新组织一些代码以使其更易于维护，但它应该为您提供要点。

基本上，我们监听关键事件（我发现它与监听文档事件无关，例如，如果用户粘贴一些文本，我不希望出现建议面板），并且当插入符号至少有 2在字符后面，我们提出一些建议，使用包含建议 JList 的弹出菜单（这里的建议确实没有意义，但将其绑定到字典不会太难）。至于您提到的快捷方式，这样做应该不会太难。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Point;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JPopupMenu;
import javax.swing.JTextArea;
import javax.swing.ListSelectionModel;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.text.BadLocationException;

public class Test {

    public class SuggestionPanel {
        private JList list;
        private JPopupMenu popupMenu;
        private String subWord;
        private final int insertionPosition;

        public SuggestionPanel(JTextArea textarea, int position, String subWord, Point location) {
            this.insertionPosition = position;
            this.subWord = subWord;
            popupMenu = new JPopupMenu();
            popupMenu.removeAll();
            popupMenu.setOpaque(false);
            popupMenu.setBorder(null);
            popupMenu.add(list = createSuggestionList(position, subWord), BorderLayout.CENTER);
            popupMenu.show(textarea, location.x, textarea.getBaseline(0, 0) + location.y);
        }

        public void hide() {
            popupMenu.setVisible(false);
            if (suggestion == this) {
                suggestion = null;
            }
        }

        private JList createSuggestionList(final int position, final String subWord) {
            Object[] data = new Object[10];
            for (int i = 0; i < data.length; i++) {
                data[i] = subWord + i;
            }
            JList list = new JList(data);
            list.setBorder(BorderFactory.createLineBorder(Color.DARK_GRAY, 1));
            list.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
            list.setSelectedIndex(0);
            list.addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    if (e.getClickCount() == 2) {
                        insertSelection();
                    }
                }
            });
            return list;
        }

        public boolean insertSelection() {
            if (list.getSelectedValue() != null) {
                try {
                    final String selectedSuggestion = ((String) list.getSelectedValue()).substring(subWord.length());
                    textarea.getDocument().insertString(insertionPosition, selectedSuggestion, null);
                    return true;
                } catch (BadLocationException e1) {
                    e1.printStackTrace();
                }
                hideSuggestion();
            }
            return false;
        }

        public void moveUp() {
            int index = Math.min(list.getSelectedIndex() - 1, 0);
            selectIndex(index);
        }

        public void moveDown() {
            int index = Math.min(list.getSelectedIndex() + 1, list.getModel().getSize() - 1);
            selectIndex(index);
        }

        private void selectIndex(int index) {
            final int position = textarea.getCaretPosition();
            list.setSelectedIndex(index);
            SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                    textarea.setCaretPosition(position);
                };
            });
        }
    }

    private SuggestionPanel suggestion;
    private JTextArea textarea;

    protected void showSuggestionLater() {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                showSuggestion();
            }

        });
    }

    protected void showSuggestion() {
        hideSuggestion();
        final int position = textarea.getCaretPosition();
        Point location;
        try {
            location = textarea.modelToView(position).getLocation();
        } catch (BadLocationException e2) {
            e2.printStackTrace();
            return;
        }
        String text = textarea.getText();
        int start = Math.max(0, position - 1);
        while (start > 0) {
            if (!Character.isWhitespace(text.charAt(start))) {
                start--;
            } else {
                start++;
                break;
            }
        }
        if (start > position) {
            return;
        }
        final String subWord = text.substring(start, position);
        if (subWord.length() < 2) {
            return;
        }
        suggestion = new SuggestionPanel(textarea, position, subWord, location);
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                textarea.requestFocusInWindow();
            }
        });
    }

    private void hideSuggestion() {
        if (suggestion != null) {
            suggestion.hide();
        }
    }

    protected void initUI() {
        final JFrame frame = new JFrame();
        frame.setTitle("Test frame on two screens");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel(new BorderLayout());
        textarea = new JTextArea(24, 80);
        textarea.setBorder(BorderFactory.createLineBorder(Color.DARK_GRAY, 1));
        textarea.addKeyListener(new KeyListener() {

            @Override
            public void keyTyped(KeyEvent e) {
                if (e.getKeyChar() == KeyEvent.VK_ENTER) {
                    if (suggestion != null) {
                        if (suggestion.insertSelection()) {
                            e.consume();
                            final int position = textarea.getCaretPosition();
                            SwingUtilities.invokeLater(new Runnable() {
                                @Override
                                public void run() {
                                    try {
                                        textarea.getDocument().remove(position - 1, 1);
                                    } catch (BadLocationException e) {
                                        e.printStackTrace();
                                    }
                                }
                            });
                        }
                    }
                }
            }

            @Override
            public void keyReleased(KeyEvent e) {
                if (e.getKeyCode() == KeyEvent.VK_DOWN && suggestion != null) {
                    suggestion.moveDown();
                } else if (e.getKeyCode() == KeyEvent.VK_UP && suggestion != null) {
                    suggestion.moveUp();
                } else if (Character.isLetterOrDigit(e.getKeyChar())) {
                    showSuggestionLater();
                } else if (Character.isWhitespace(e.getKeyChar())) {
                    hideSuggestion();
                }
            }

            @Override
            public void keyPressed(KeyEvent e) {

            }
        });
        panel.add(textarea, BorderLayout.CENTER);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (InstantiationException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (UnsupportedLookAndFeelException e) {
            e.printStackTrace();
        }
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test().initUI();
            }
        });
    }

} 
```

# xcode - 从同一 ViewController 中的 UITableView 加载 UIWebView 不起作用

> ID：10873752
> 
> 赞同：0
> 
> 时间：2012-06-03T20:35:34.613
> 
> 标签：xcode, uitableview, uiwebview, horizontal-scrolling

我正在开发一个 iPad 应用程序，但我在加载 webview 时遇到了问题。我`ViewController`在顶部有一个水平滚动表格视图。在这个表视图中，另一个表视图被添加为子视图并旋转 90 度，然后将自定义单元格加载到其中。这给了我水平滚动效果。然后 UIWebview 就在 tableview 的正下方。表格视图由新闻文章填充，我想在选择文章时加载整个网页。除了`UIWebView`不加载外，一切正常。我已经尝试了我能想到的一切，但不知道为什么。

一切的安排方式有点复杂，所以我会尽力解释一切。UIWebView 所在的主 Viewcontroller 使用 Horizo​​ntalTableViewController 作为其类。tableview 使用 Horizo​​ntalTableCell 作为它的类。这是我用来加载 UIWebView 的代码：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

[tableView deselectRowAtIndexPath:indexPath animated:YES];

NSString *loadURL;
loadURL=[[[NSString alloc] initWithString:urlString]stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
NSURL* url = [NSURL URLWithString:loadURL];

[self.horizontalTableViewController.webView loadRequest:[NSURLRequest requestWithURL:url]];

 NSLog(@"Load URL = %@",loadURL);

} 
```

从日志中我可以看到 url 是正确的，但 UIWebView 保持空白并且没有加载。我已将 webview 设置为 Horizo​​ntalTableViewController 中的 Outlet。

视图层次结构是：

```
2012-06-04 10:22:08.568 Bandz[21211:fb03] *** Printing out all the subviews of     HorizontalTableViewController (UIViewController) ***
2012-06-04 10:22:08.570 Bandz[21211:fb03]    [0]: class: 'UITableView'
2012-06-04 10:22:08.570 Bandz[21211:fb03]       [0]: class: 'UIImageView'
2012-06-04 10:22:08.571 Bandz[21211:fb03]       [1]: class: 'UIImageView'
2012-06-04 10:22:08.571 Bandz[21211:fb03]    [1]: class: 'UINavigationBar'
2012-06-04 10:22:08.572 Bandz[21211:fb03]       [0]: class: 'UINavigationBarBackground'
2012-06-04 10:22:08.572 Bandz[21211:fb03]       [1]: class: 'UINavigationItemView'
2012-06-04 10:22:08.572 Bandz[21211:fb03]       [2]: class: 'UINavigationButton'
2012-06-04 10:22:08.573 Bandz[21211:fb03]          [0]: class: 'UIButtonLabel'
2012-06-04 10:22:08.573 Bandz[21211:fb03]    [2]: class: 'UIWebView'
2012-06-04 10:22:08.574 Bandz[21211:fb03]       [0]: class: '_UIWebViewScrollView'
2012-06-04 10:22:08.575 Bandz[21211:fb03]          [0]: class: 'UIImageView'
2012-06-04 10:22:08.575 Bandz[21211:fb03]          [1]: class: 'UIImageView'
2012-06-04 10:22:08.576 Bandz[21211:fb03]          [2]: class: 'UIImageView'
2012-06-04 10:22:08.576 Bandz[21211:fb03]          [3]: class: 'UIImageView'
2012-06-04 10:22:08.577 Bandz[21211:fb03]          [4]: class: 'UIImageView'
2012-06-04 10:22:08.595 Bandz[21211:fb03]          [5]: class: 'UIImageView'
2012-06-04 10:22:08.595 Bandz[21211:fb03]          [6]: class: 'UIImageView'
2012-06-04 10:22:08.596 Bandz[21211:fb03]          [7]: class: 'UIImageView'
2012-06-04 10:22:08.596 Bandz[21211:fb03]          [8]: class: 'UIImageView'
2012-06-04 10:22:08.597 Bandz[21211:fb03]          [9]: class: 'UIImageView'
2012-06-04 10:22:08.597 Bandz[21211:fb03]          [10]: class: 'UIWebBrowserView' 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:50:43.297

如果我正确理解这种情况，您不应该使用完全不同的视图控制器。如果可能的话，视图控制器中的视图控制器绝不是一个好主意。创建一个没有控制器的 UITableView（或子类）。然后为 UITableView 创建一个属性并在您的 didSelectRowAtIndex 中设置它的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T20:51:57.070

目前尚不清楚您为什么要在 中执行此`tableView:didSelectRowAtIndexPath:`操作，因为该方法仅在用户点击表格中的一行时才会调用。应该调用将某些东西放入单元格的代码`tableView:cellForRowAtIndexPath:`。

但是，对于您的设计，您将遇到问题。您的视图控制器中有两个表视图，并且它们的委托都设置为`self`，然后在`tableView:...`您实现的任何方法中，您都需要检查`tableView`参数，以便知道哪个表视图正在进行调用。

最后，您的`HorizontalTableViewController`课程以某种方式包含您`UIWebView`，但它看起来不像您在问题中的描述。也发布该位的代码 - 可能是您没有实例化 Web 视图。

# android - 使用 strings.xml 还是仅使用布局文件中的文本更好？

> ID：10873755
> 
> 赞同：0
> 
> 时间：2012-06-03T20:35:59.627
> 
> 标签：android, text

我正在开发一个包含大量文本的应用程序。

那么，从 a 中获取应用程序的所有文本是一种更好的做法`strings.xml`，还是我可以将文本粘贴到布局文件中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T20:37:17.493

始终使用`strings.xml`或类似的本地化文件进行开发。这将使生活变得更加轻松。

# inheritance - 类方法中的“super”关键字

> ID：10873758
> 
> 赞同：6
> 
> 时间：2012-06-03T20:36:42.717
> 
> 标签：inheritance, smalltalk, class-method

我正在学习 Smalltalk 的基础知识。有一个`super`关键字用于从子类方法中的超类调用方法：

```
Object subclass: # A
   test
      ^1

A subclass: # B
   test
      ^2
   callSuper
      ^super test 
```

所以`B new callSuper`评估为`1`。

好的。这很清楚。

所以现在，我为类定义了一堆类方法`B`：

```
createNew1
    ^super new
createNew2
    ^self new
create
    ^self
createSuper
    ^super 
```

它们分别评估为`a B`、`a B`和`B`一个错误（这向我表明这`super`不是对子类的强制转换，而是一种消息调度程序）。

`B`尽管有`super`关键字，为什么我会得到类的实例？`a B`和对象有什么区别`B`？我开始认为该`B`对象是 class 的一个特殊的单例实例（就像`static`在其他语言中实现的属性一样）`B`，但是 - 我已经检查过了，它的 class 是 a`B`并且 subclass 是 an `A`。

**`super`类方法中关键字的语义是什么？**它与对象方法内部的语义有何不同？`self`调用内部类方法可以获得的对象到底是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T22:09:22.580

`self`并且`super`总是引用同一个对象，即当前的接收者。唯一的区别是在接收者的类和定义该方法的超类中`self`开始查找以下方法发送。`super`

[有关详细信息，请参见Pharo by Example](http://gforge.inria.fr/frs/download.php/25599/PBE1-2009-10-28.pdf)的第 5 章。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T23:44:00.650

你对第一个例子的回答是错误的。`B new callSuper`返回 1\. Lukas 给出了 super 语义的准确定义。它基本上是“self”的别名，它修改了发送给它的消息的方法查找。`self message`将开始在接收者的类中查找方法，`super message`将开始在定义包含`super message`表达式的方法的类的超类中搜索（因此在这种情况下接收者的类不相关）。

在您的第二个示例中`super new`并`self new`最终调用相同的方法（在行为层次结构中的某处定义），因为在这两种情况下这是最接近的方法定义。但是，如果您将 createNew 方法重命名为 new，那么`new ^self new`将是一个无限循环，而`new ^super new`调用 Behavior 方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T03:10:15.443

self 和 super 在类或对象中的含义相同，因为类*是*对象...

#createNew1 & #createNew2 是等价的。正如 Lukas 解释的那样，super 仅仅意味着“在我的超类而不是我的类中开始方法查找”。由于您没有在 A 或 B 中定义 #new，因此您将查找超类，最终找到 Behavior>>#new，无论您是从 A 还是 B 开始。#new 从调用 #basicNew 开始，它创建并返回B 的一个新实例（即“a B”）。

在#create & #createSuper 中，由于您没有查找任何内容，因此 self 和 super 再次等价，意思是“返回当前对象”（您指的是后者的错误是什么？）。现在这部分令人困惑。由于 Smalltalk 中的一切都是对象，因此这包括类本身。所以在这个上下文中，“当前对象”是 B，它是元类“B 类”的唯一实例。如果你真的有兴趣理解，我会一遍又一遍地阅读[Pharo By Example](http://gforge.inria.fr/frs/download.php/25599/PBE1-2009-10-28.pdf)的第 13 章，直到它有意义为止（我还没有达到这一点，哈哈）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-04T08:15:28.047

尽管所有其他答案在技术上都是正确的，但我将自己回答这个问题。那是因为我知道元类，而且似乎我脑子里有一个正确的语义`super`，但我仍然得到了意想不到的结果。

原来**我误解了**Smalltalk 中的继承基础以及方法的调用方式。

我在想，对于这样的代码......

```
Object subclass: #A
    test
        ^'A'
    getTest
        ^self test

A subclass: # B
    test
        ^'B'
    runTest
        ^super getTest 
```

...表达式`B new runTest`被评估为`'A'`- 这意味着，来自超类的方法在向上转换的对象中进行评估。

**但事实并非如此。**

它被评估为`'B'`，因为没有向上转换，并且当我们在超类方法中调用任何方法时 - 搜索从对象的真实类开始，而不是评估方法来自的类。

结果，调用`^self new`and `^super new`，虽然没有`new`在任何类中定义 a ，但具有相同的效果 - 因为它们最终都在 的上下文中调用*Behaviour 的* `new`实现`self`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T21:21:17.493

是的，我想你现在明白了......
当你从 B 类发送 ^super new 时，你仍然向 B 类发送消息，只是消息是（超级新的）......
所以你创建了一个 B 的实例，
除非当然，如果您要定义

```
A class>>new
    ^A basicNew 
```

# ruby - Ruby 没有在 mac os x 上启动

> ID：10873759
> 
> 赞同：2
> 
> 时间：2012-06-03T20:36:47.650
> 
> 标签：ruby, macos, rvm

当我尝试在终端上使用 ruby​​ 时，没有任何反应。最后几天我用过它，一切正常，但现在不行了。我安装了 rvm 和 1.9.3 版本的 ruby​​。当我使用 启动脚本时它可以工作`ruby myscript.rb`，并且我尝试安装 rails 但是当我输入时`gem install rails`出现错误： `/Users/romainberger/.rvm/rubies/ruby-1.9.3-p194/bin/gem:4: warning: Insecure world writable dir /Users/romainberger/.rvm/gems/ruby-1.9.3-p194 in PATH, mode 040777`

由于没有输出，我不知道问题出在哪里。有人有想法吗？

谢谢

**编辑：** `rvm info`

```
ruby-1.9.3-p194:

system:
uname:       "Darwin romain.home 11.3.0 Darwin Kernel Version 11.3.0: Thu Jan 12 18:47:41 PST 2012; root:xnu-1699.24.23~1/RELEASE_X86_64 x86_64"
bash:        "/bin/bash => GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin11)"
zsh:         "/bin/zsh => zsh 4.3.11 (i386-apple-darwin11.0)"

rvm:
version:      "rvm 1.14.1 (master) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"
updated:      "1 day 11 hours 59 minutes 3 seconds ago"

ruby:
interpreter:  "ruby"
version:      "1.9.3p194"
date:         "2012-04-20"
platform:     "x86_64-darwin11.3.0"
patchlevel:   "2012-04-20 revision 35410"
full_version: "ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.3.0]"

homes:
gem:          "/Users/romainberger/.rvm/gems/ruby-1.9.3-p194"
ruby:         "/Users/romainberger/.rvm/rubies/ruby-1.9.3-p194"

binaries:
ruby:         "/Users/romainberger/.rvm/rubies/ruby-1.9.3-p194/bin/ruby"
irb:          "/Users/romainberger/.rvm/rubies/ruby-1.9.3-p194/bin/irb"
gem:          "/Users/romainberger/.rvm/rubies/ruby-1.9.3-p194/bin/gem"
rake:         "/Users/romainberger/.rvm/gems/ruby-1.9.3-p194@global/bin/rake"

environment:
PATH:         "/Users/romainberger/.rvm/gems/ruby-1.9.3-p194/bin:/Users/romainberger/.rvm/gems/ruby-1.9.3-p194@global/bin:/Users/romainberger/.rvm/rubies/ruby-1.9.3-p194/bin:/Users/romainberger/.rvm/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/local/git/bin"
GEM_HOME:     "/Users/romainberger/.rvm/gems/ruby-1.9.3-p194"
GEM_PATH:     "/Users/romainberger/.rvm/gems/ruby-1.9.3-p194:/Users/romainberger/.rvm/gems/ruby-1.9.3-p194@global"
MY_RUBY_HOME: "/Users/romainberger/.rvm/rubies/ruby-1.9.3-p194"
IRBRC:        "/Users/romainberger/.rvm/rubies/ruby-1.9.3-p194/.irbrc"
RUBYOPT:      ""
gemset:       "" 
```

`gem info`给我：

```
ERROR:  While executing gem ... (RuntimeError)
Unknown command info 
```

要启动 ruby​​，我只需键入`ruby`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:28:46.633

要修复 gem 警告，请使用：

```
chmod -R go-w /Users/romainberger/.rvm/ 
```

它将递归地删除组和其他人的写权限（继续为用户写）。

您可以在 RVM 网站上查看与 RVM 相关的资源：[https ://rvm.io/](https://rvm.io/)

# objective-c - nib 中顶级对象的加载顺序

> ID：10873761
> 
> 赞同：0
> 
> 时间：2012-06-03T20:36:57.893
> 
> 标签：objective-c, cocoa, interface-builder, nib, appkit

nib文件中顶级对象的加载顺序是随机的还是可以确定的？我认为它会按照我在 Interface Builder 中放入对象的顺序加载对象。但情况似乎并非总是如此。

我想创建一个类似于 Interface Builder 的检查器视图，其中不同的部分具有交替的背景颜色。我计划通过在我的笔尖中将这些部分排序为顶级视图，然后根据加载顺序对它们进行着色来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T20:57:56.973

根据文档，加载顺序未定义：

> 无法保证 nib 加载代码调用对象的 awakeFromNib 方法的顺序。在 OS X 中，Cocoa 尝试最后调用 File's Owner 的 awakeFromNib 方法，但不保证该行为。如果您需要在加载时进一步配置 nib 文件中的对象，最合适的时间是在您的 nib-loading 调用返回之后。此时，所有对象都已创建、初始化并可供使用。

请参阅[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html)

无论如何，依靠诸如加载顺序之类的东西来确定视觉布局似乎是一个非常不可靠的想法。我会改为使用 NSTableView / UITableView，它将为您完成布局、交替行颜色等。（在 Mac 上，您可能需要基于视图的表格视图）。如果您出于某种原因需要自定义解决方案，请在代码中动态加载和添加视图，您可以完全控制它们在父级中的顺序和位置。

# vb.net - 在带有 VB.NET 2010 的 DLL 中使用串行端口

> ID：10873767
> 
> 赞同：0
> 
> 时间：2012-06-03T20:37:37.303
> 
> 标签：vb.net, serial-port

我正在尝试在 VB.NET 2010 中构建一个用于控制自动售货机的 DLL。在第一次调用 DLL 以打开和设置 comport 的函数时，它会很好地打开它，但如果再次调用 DLL，即使端口仍处于打开状态，它也不知道端口已打开。我可以检查另一个程序并显示端口已打开，如果我尝试再次调用 DLL 以打开端口，则会收到端口已打开的错误。任何想法如何设置它以便它可以工作。

我需要在一个调用中打开并配置 com 端口，使其保持打开状态，然后在另一个调用中使用 com 端口与机器中的设备通信，而不关闭 com 端口，直到需要关闭它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T21:07:36.307

您可以在打开的连接列表中使用静态（共享）字段，并在使用 COM 端口之前对其进行检查。

确保即使应用程序崩溃，所有打开的端口都将使用 Dispose 方法关闭。

# wordpress - 更改字体大小

> ID：10873773
> 
> 赞同：0
> 
> 时间：2012-06-03T20:38:23.450
> 
> 标签：wordpress, fonts

我正在尝试更改我网站上子类别的字体大小。它是基于 wordpress 的网站，具有高级新闻主题。有人告诉我这可以在 php 下的 cPanel 上完成。但是我对脚本不是很好，所以我不想更改任何可能损害我的网站的东西，网址是[http://worldtownimports.com](http://worldtownimports.com)。我已经尝试过更改 css 中的大小，但没有任何影响。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T20:45:34.133

你想使用 CSS 是对的。在 Wordpress 中，您可以编辑主题文件，包括 css。

我建议在 Wordpress 中编辑文件时将其从编辑器中复制出来并粘贴到计算机上的编辑器中进行更改，然后将它们全部粘贴回去。

要进行此更改，您需要调整`font-size`这些元素的属性。在这种情况下，您要更改`#objectClassifieds a`; 这出现在第 318 行。

完整的线路是。

```
#objectClassifieds a { text-decoration:none; } 
```

您可以将`font-size: ;`属性添加到它，以 px、百分比、ems 或任何其他标准提供您的字体。

（假设的子类别，其中网站类别下的标签块，如飞机、飞机零件等）

# android - 使用 OpenGL ES 绘制纹理

> ID：10873774
> 
> 赞同：1
> 
> 时间：2012-06-03T20:38:37.310
> 
> 标签：android, opengl-es

我正在为 Android 开发 2D 游戏，我正在使用 Mario Zechner 的《Beginning Android Games》一书中所讲述的框架。所以我的框架设计得很好，并且使用了 OpenGL 1.1。它类似于 libgdx。

当我将我的纹理彼此相邻放置在我的 2d 表面时，有一些空间大小为 1 px。但这个问题只发生在我的平板电脑上。我的手机上没有这样的问题。就像这张图片：

![我的问题](../Images/649b678266e1b01f958dd452b72bf817.png)

可能是什么问题？我不能从一周内解决它。

更新：

```
 batcher.beginBatch(Assets.ground);
      konum =(int) (dunya.myMan.position.x/500);
      for(int i=konum;i<8+konum;i++)
      batcher.drawSprite(500*i, 61, 500, 122, Assets.groundRegion);

      batcher.endBatch(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:58:32.137

您可能正在通过非整数值转换四边形，这可能会导致纹理偏离中心进行采样，并可能导致一些类似的伪影。

如果您确保所有 2d 翻译都与屏幕像素对齐，我认为您不会再看到问题了。

# objective-c - 完成块未执行

> ID：10873776
> 
> 赞同：1
> 
> 时间：2012-06-03T20:38:50.560
> 
> 标签：objective-c, ios, core-data, block

这是与块的调用：

```
[VacationHelper openVacationWithName:vacationName
                usingBlock:^(UIManagedDocument *vacationDocument) {
   NSLog(@"vacationDocument.description:%@", vacationDocument.description);
}]; 
```

在接收方法的.h中：

```
typedef void (^completion_block_t)(UIManagedDocument *vacationDocument); 
```

在 .m 中：

```
+ (void)openVacationWithName:(NSString *)vacationName
                  usingBlock:(completion_block_t)completionBlock;
{
    NSLog(@"Opening Vacation Document");

    // Get documents directory and path.
    NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    url        = [url URLByAppendingPathComponent:vacationName];

    // Create the document and open if a match exists on file.
    UIManagedDocument *vacationDocument = [[UIManagedDocument alloc] initWithFileURL:url];
    if ([[NSFileManager defaultManager] fileExistsAtPath:[url path]]) {
        NSLog(@"vacationDocument.documentState:%i", vacationDocument.documentState);
        [vacationDocument openWithCompletionHandler:^(BOOL success) {
            if (success) NSLog(@"Document was opened.");
            else NSLog (@"Couldn't open document at %@", url);
        }];
    } else {

        // No match exists, so save the document to file.
        [vacationDocument saveToURL:url forSaveOperation:UIDocumentSaveForCreating
                  completionHandler:^(BOOL success) {
                      if (success) NSLog(@"Document was created.");
                      else NSLog(@"Couldn't create document at %@", url);
                  }];
    }
    NSLog(@"Exiting helper.");
} 
```

我的问题是为什么执行没有到达调用中传递的块`openVacationWithName:`？我从来没有见过写的 NSLog。

我怀疑这`openVacationWithName:`还没有完成，但是“退出助手”的 NSLog。确实打印。任何指导表示赞赏。仅供参考，这是用于 iTunes U/Stanford CS193P 作业 #6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T20:47:10.810

你不是`completionBlock`在里面打电话`openVacationWithName:usingBlock:`。也许您想在方法结束时执行此操作：

```
 ...
  if (completionBlock) {
    completionBlock(vacationDocument);
  }

  NSLog(@"Exiting helper.");
} 
```

（在这种情况下，也许只返回 更有意义`UIManagedDocument`）

或者也许`completionHandler`在方法中的那些 s`openWithCompletionHandler:`和`saveToUrl:forSaveOperation:completionHandler:`：

```
... ^(BOOL success) {
  if (success) {
    NSLog(@"Document was created.");
  }
  else {
    NSLog(@"Couldn't create document at %@", url);
  }

  if (completionBlock) {
    completionBlock(vacationDocument);
  }
} ... 
```

# python - 在 python 中，如何检查文件名是否以 '.html' 或 '_files' 结尾？

> ID：10873777
> 
> 赞同：0
> 
> 时间：2012-06-03T20:38:51.103
> 
> 标签：python, html

在 python 中，如何检查文件名是否以 '.html' 或 '_files' 结尾？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-03T20:41:57.503

您可能想知道文件*名*是否以这些字符串结尾，而不是文件 istelf：

```
if file_name.endswith((".html", "_files")):
    # whatever 
```

要测试文件是否以这些字符串之一结尾，您可以执行以下操作：

```
with open(file_name) as f:
    f.seek(-6, 2)           # only read the last 6 characters of the file
    if f.read().endswith((".html", "_files")):
        # whatever 
```

# python - Python中一些棘手的字符串操作

> ID：10873780
> 
> 赞同：2
> 
> 时间：2012-06-03T20:39:26.803
> 
> 标签：python, string, replace

我在 Python 中有这个字符串：

```
s = "foo(a) foo(something), foo(stuff)\n foo(1)" 
```

我想用它的内容替换每个 foo 实例：

```
s = "a something, stuff\n 1" 
```

字符串 s 不是常量，并且 foo 的内容每次都会改变。我使用 regex、split 和 regex 做了一些事情，但是得到了一个非常大的函数。我怎样才能以简单明了的方式做到这一点？提前Thks。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T20:47:01.380

```
>>> x = "foo(a) foo(something), foo(stuff)\n foo(1)"
>>> re.sub(r'foo\(([^)]*)\)', r'\1', x)
u'a something, stuff\n 1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T21:45:18.217

由于您说 foo 的内容不包含括号，因此 Regex 似乎确实不需要。你为什么不这样做：

```
>>> s = "foo(a) foo(something), foo(stuff)\n foo(1)"
>>> s = s.replace('foo(','')
>>> s = s.replace(')','')
>>> print s
'a something, stuff\n 1' 
```

请参阅[Python：string.replace 与 re.sub](https://stackoverflow.com/questions/5668947/python-string-replace-vs-re-sub)

# sql-server - 检查sql server中分层sql表是否存在子级

> ID：10873782
> 
> 赞同：2
> 
> 时间：2012-06-03T20:39:42.007
> 
> 标签：sql-server, lazy-loading, hierarchy

我正在将所有第一级/根单元加载到我的 Treeview 中。

一个单元是否有孩子决定了树视图是否显示“+”。

为了使这个符号在单元名称的左侧可用，我需要在我的 SQL 服务器上检查每个单元是否有子单元。我不需要计数，只要孩子是否存在就足够了。

我什至知道曾经有一个非常好的关于同一主题的 SO 解决方案，但我无法通过搜索找到这个解决方案。

我将不胜感激该解决方案或任何有用的链接:)

代码如下：

```
public IEnumerable<Unit> GetRootUnits(int templateId)
{
    List<Unit> units = new List<Unit>();

    using (var con = new SqlConnection(_connectionString))
    using (var cmd = new SqlCommand())
    {
        cmd.Connection = con;
        cmd.CommandText = "SELECT UnitId, ParentId, Name, TemplateId, HasChildren FROM Unit WHERE ParentId Is NULL AND TemplateId = @TemplateId";
        con.Open();

        var p1 = new SqlParameter("@TemplateId", templateId);
        cmd.Parameters.Add(p1);

        using (var reader = cmd.ExecuteReader())
        {
            while (reader.Read())
            {
                Unit unit = new Unit();
                unit.Id = Convert.ToInt32(reader["UnitId"]);
                unit.Name = reader["Name"].ToString();
                unit.TemplateId = Convert.ToInt32(reader["TemplateId"]);
                unit.ParentId = null;
                unit.IsLazy = Convert.ToBoolean(reader["HasChildren"]);
                units.Add(unit);
            }
        }
    }        
    return units;
} 
```

更新：

我试过这个：

```
 SELECT Unit.UnitId, Unit.ParentId, Unit.Name, Unit.TemplateId,
      case when Exists(select null from Unit u2 where u2.ParentID = unit.UnitID)
     then 1
     else 0
     end as HasChildren
  FROM [ITMS].[dbo].[Unit] 
```

我的测试数据：

```
1   NULL    unitroot1   1
2   NULL    unitroot2   1
3   NULL    unitroot3   1
4   NULL    unitroot4   1
5   NULL    unitroot5   1
6   NULL    unitroot6   1
7   NULL    unitroot7ffds fasddfasfds fsdadsffdsa fasdadsf  1
8   NULL    flfsaklfakl 1
9   NULL    flk43053094 1
10  NULL    sdaklr0340  1
11  NULL    3405303 1
12  NULL    543ß5ß343   1
13  NULL    54ß53ß534   1
14  NULL    45o345jo435jo   1
15  NULL    as435l5l54lk5   1
16  NULL    543095454j34    1
17  NULL    45354   1
18  NULL    kl  1
19  NULL    43534   1
20  NULL    5435    1
21  NULL    1   1
22  NULL    12  1
23  NULL    bla 1
24  7   childrenOfUnitRoot7 this is a scrolling test    1
25  24  blubb   1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T02:34:56.090

如果您想获取父母是否有孩子的信息并在`HasChildren`列中返回该信息，您可以使用存在：

```
case when exists (select null from Unit u2 where u2.ParentID = unit.UnitID)
     then 1
     else 0
     end as HasChildren 
```

或者，您可以[申请 apply](http://technet.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)：

```
SELECT Unit.UnitId, Unit.ParentId, Unit.Name, Unit.TemplateId, 
       isnull(c.HasChildren, 0) HasChildren
  FROM Unit 
 -- Get first child record. Returns null record if not found.
 OUTER APPLY
 (
   select top 1
          1 as HasChildren
     from Unit u2
    where u2.ParentID = Unit.UnitID
 ) c
 WHERE Unit.ParentId Is NULL 
   AND Unit.TemplateId = @TemplateId 
```

第三种选择是加入其自身`Unit`的派生版本`Unit`：

```
SELECT Unit.UnitId, Unit.ParentId, Unit.Name, Unit.TemplateId, 
    -- If c.ParentID is not null we know that there must be
    -- at least one child for this UnitID
       case when c.ParentID is not null then 1 else 0 end HasChildren
  FROM Unit 
  LEFT JOIN
  (
    select distinct ParentID
      from Unit
  ) c
    ON Unit.UnitID = c.ParentID
  WHERE Unit.ParentId Is NULL 
    AND Unit.TemplateId = @TemplateId 
```

最后，如果这是 Sql Server 2008，则有[HierarchyId 数据类型](http://msdn.microsoft.com/en-us/library/bb677290.aspx)。我没用过，所以不能给你第一手的印象，但绝对值得一看。

# c++ - 使用不完整类型的 make_shared

> ID：10873783
> 
> 赞同：0
> 
> 时间：2012-06-03T20:40:00.657
> 
> 标签：c++, stl, shared-ptr, incomplete-type, make-shared

我正在尝试切换我的代码以使用`make_shared<type>()`但我有很多不完整的类型（在创建时完成）并且想知道是否有 make_shared 可以使用不完整的类型或允许我传递删除器类型。

我环顾四周，没有找到任何与此相关的帖子，所以要么这行得通吗？？或者我忽略了一些基本的东西。

```
#define NEW_PARAMS(Type, ...)   ::std::shared_ptr<Type>(new (Type)(__VA_ARGS__), ::std::default_delete<Type>()) 
```

以上是我用来创建新对象的宏。想将其转换为

```
#define NEW_PARAMS(Type, ...)   ::std::make_shared<Type>(__VA_ARGS__, ::std::default_delete<Type>()) 
```

**编辑：**只是为了澄清我想问一下我是否可以将删除器类型传递给`shared_ptr`创建的`make_shared`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T20:48:04.110

不，`make_shared`不能将删除器对象传递给`shared_ptr`它创建的对象。通常，您不需要这样做。由于它使用`new`（专门放置`new`）来创建指针，因此需要通过调用析构函数将其删除。因此，您无能为力，因为`make_shared`直接管理内存。

# php - 从数据库显示的图像

> ID：10873785
> 
> 赞同：0
> 
> 时间：2012-06-03T20:40:31.437
> 
> 标签：php, mysql, image, image-gallery

我正在尝试使用下一个上一个按钮显示数据库中的图像。

这是我的代码：

```
<?PHP
session_start();
$page = "voting.php";
include ('dbconnect.php');
$q = "SELECT * FROM vote_frames";
$r = mysql_query($q);
while($row = mysql_fetch_array($r)){
    $i_array[] = $row['frame_pic'];
    $i_array1[] = $row['frame_pic1'];
    $i_array2[] = $row['frame_pic2'];
    $id_array[] = $row['frame_id'];
}
$fpp = 1;
$num_images = count($i_array);
$image_path = "frames/";
$y = $fpp;
if(!isset($_GET['first'])){
        $first = 0;
    }else{
        $first = (int) $_GET['first'];
}
$x = $num_images - 1;
$z = $x - $y;
if($first>$z) {
    $first = $z;
}
$last = $first + $fpp;
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
</head>
<body>

<div>
                <?PHP
                $i = $first;
                $prev = $first-1;
                $next = $first +1;
                if($prev<0){ $prev = 0; }
                ?><a href="<?PHP echo $page; ?>?first=<?PHP echo $prev; ?>">Previous</a><?PHP
                while($i<$last) { 
                    $f = $image_path . $i_array[$i];
                    $f1 = $image_path . $i_array1[$i];
                    $f2 = $image_path . $i_array2[$i];
                    ?>
                    <img src="<?PHP echo $f; ?>">
                    <img src="<?PHP echo $f1; ?>">
                    <img src="<?PHP echo $f2; ?>">
                    <?PHP 
                    $i++; 
                }
                ?><a href="<?PHP echo $page; ?>?first=<?PHP echo $next; ?>"><Next</a><?PHP
                ?>

</div>
</body>
</html> 
```

图像正在显示，但具有最后一条记录未显示的奇怪行为。实际上，当我回显当前显示记录的 id 时，它会显示下一个的 id，因此记录具有下一个的 id。

我知道我可以用 jquery 做到这一点而没有任何问题，但我必须使用一种方法在会话中存储当前显示图片的 id，以便我可以在下图中显示当前显示及其下一张图片的投票计数。

有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T21:11:10.547

这里的这部分非常神秘，为什么你这样写？我假设您已经测试了几种方法来做到这一点，但是......清理代码，同时纠正或测试它。这样一来，阅读起来就不会太神秘了。

```
$fpp = 1;
$num_images = count($i_array);
$image_path = "frames/";
$y = $fpp;
if(!isset($_GET['first'])){
        $first = 0;
    }else{
        $first = (int) $_GET['first'];
}
$x = $num_images - 1;
$z = $x - $y;
if($first>$z) {
    $first = $z;
}
$last = $first + $fpp; 
```

还有你的问题`$x`是图像数量减一，并且`$z`是`$x`负数`$y`（这是一，神秘的是）。`$z`这意味着`number of images minus 2`. 这就是为什么最后一个记录没有显示。清理该代码，它开始工作，它很容易修复，但我会把它留给你作为练习。

# php - Firefox 扩展 - 使用 XMLHttpRequest 的 cookie 访问不起作用

> ID：10873790
> 
> 赞同：0
> 
> 时间：2012-06-03T20:41:37.933
> 
> 标签：php, html, firefox, cookies, xmlhttprequest

我有一个使用 Jetpack 构建器创建的 Firefox 扩展。

会发生什么，是我在页面上的用户登录时设置了一个 cookie（PHP）。cookie 的内容是用于识别用户的特殊密钥，该密钥可以获取用户的某些信息，以便插件工作。

我从 Firefox 插件向与登录页面相同的服务器上的 php 页面发出 XMLHttpRequest。该页面必须读取 cookie，并据此检索数据。

问题是，该 cookie 没有被 php 页面读取。整个过程在 Chrome 中有效，但在 FF 中无效。问题不应该是跨域的，因为访问 cookie 的 PHP 页面与设置 cookie 的登录 PHP 位于同一域中。

请帮助...谢谢！:)

PS这是我的XMLHttpRequest：

```
function getData() {
                client = new XMLHttpRequest();
                try{
                    //SHOULD I INCLUDE THE CODE IN 'TRY' IN HERE?
                    client.open('GET','https://www.istyla.com/Popup/themes.php');                   
                } catch (e){
                    alert( "error while opening " + e.message );
                }

                client.onreadystatechange = function(){
                    if (client.readyState ==4){
                            user_data = client.responseText;
                            if(document.domain == "facebook.com"     || document.domain == "www.facebook.com") {
                                addCSS(user_data);
                            }
                    }
                }

                client.send(null);
} getData(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T21:02:30.413

在发送之前，您可以尝试将此代码添加到您的请求中（从[https://addons.mozilla.org/sl/firefox/files/browse/134669/file/modules/sendtophone.js#L173复制）。](https://addons.mozilla.org/sl/firefox/files/browse/134669/file/modules/sendtophone.js#L173)

```
// To send correctly cookies.
// Force the request to include cookies even though this chrome code
// is seen as a third-party, so the server knows the user for which we are
// requesting favorites (or anything else user-specific in the future).
// This only works in Firefox 3.6; in Firefox 3.5 the request will instead
// fail to send cookies if the user has disabled third-party cookies.
try {
  req.channel.QueryInterface(Ci.nsIHttpChannelInternal).
  forceAllowThirdPartyCookie = true;
}
catch(ex) { /* user is using Firefox 3.5 */ } 
```

# php - 从查询 MySQL 中的 SELECT WHERE IN 中提取值

> ID：10873793
> 
> 赞同：1
> 
> 时间：2012-06-03T20:42:03.050
> 
> 标签：php, mysql, database

[这是对同一张表 Mysql](https://stackoverflow.com/questions/10854529/reduce-select-queries-on-the-same-table-mysq)上的最小化选择查询的跟进。我没有得到关于如何提取以下查询返回的单个数组值的完整答案：

```
$result = mysqli_query("SELECT * FROM u_settings WHERE setting IN
 ('username', 'password','email','tag','active','version','time','warn','dis')"); 
```

我如何从**`$result`**数组中提取我想要的任何值，因为将返回许多具有相同列的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T20:48:31.940

```
$result = mysql_query("SELECT * FROM u_settings WHERE setting IN
 ('username', 'password','email','tag','active','version','time','warn','dis')");

while($row = mysql_fetch_assoc($result))
    $settings[$row['setting']] = $row['u_settings'];

print_r($settings); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T20:48:51.070

使用[`mysql_fetch_assoc()`](http://us.php.net/mysql_fetch_assoc)或。[`mysql_fetch_array()`](http://us.php.net/mysql_fetch_array)_`$result`

**注意：**我鼓励您升级到[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)，而不是[现在已弃用](http://news.php.net/php.internals/53799)的mysql_* 函数。

# html - 如何在悬停时将下拉菜单定位到所需位置？

> ID：10873796
> 
> 赞同：1
> 
> 时间：2012-06-03T20:42:32.570
> 
> 标签：html, css, drop-down-menu, menu

我想创建这个菜单，在悬停时会出现一个下拉菜单，通常我可以毫无困难地将 UL 设置为 top:100%。然而这一次我需要它进一步下降，但它需要精确，所以它是跨浏览器友好的。因此，我尝试为 UL 容器设置一个 margin-top:17px 以将其推离顶部，这很有效，但是一旦我将鼠标悬停在它上面，下拉菜单就会关闭。我在示例中添加了一个红色边框，以显示我希望下拉 UL 顶部从哪里开始。

请看一下->[示例链接](http://jsfiddle.net/BZpLf/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T20:51:31.657

您应该使用`padding-top`而不是`margin-top`（因为边距在元素之外并中断悬停事件）：

```
#main-nav ul ul {display:none;position:absolute;top:100%;left:0;padding-top:17px;min-width:150px;}

#main-nav ul ul li {background-color:#000;opacity:0.8;filter:alpha(opacity=80);} 
```

此外，您需要将背景声明从`ul`to移动，`li`因为`padding`会将项目移动到所需位置，但背景会显示错误（在 parent 下方`li`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T20:51:18.617

尝试更改`margin-top`为`padding-top`- [http://jsfiddle.net/BZpLf/2/](http://jsfiddle.net/BZpLf/2/)

```
#main-nav ul ul {display:none;position:absolute;top:100%;left:0;padding-top:17px;min-width:150px;background-color:#272727;opacity:0.8;filter:alpha(opacity=80);} 
```

背景颜色也从更改`#000`为`#272727`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T20:56:43.257

而不是替换`margin-top`为`padding-top`（这需要更改背景设置），只需添加一个间隔元素来弥合 parent`li`和 dropdown之间的差距`ul`。看我的[演示](http://jsfiddle.net/BZpLf/4/)。

请注意`ul`.

或者，如果您不想添加额外的元素，请`:after`在父`li` `a`元素上使用伪选择器，请参阅我的[第二个演示](http://jsfiddle.net/BZpLf/5/)。这是额外的 CSS（就是这样，不需要更多更改）：

```
#main-nav > ul > li:hover > a:after { 
  content: ""; 
  display: block; 
  min-height: 17px;
  position: absolute;
  top: 100%;
  left:0;
  min-width:150px;
} 
```

# asp.net-mvc - 按 .ashx 文件显示图像

> ID：10873800
> 
> 赞同：0
> 
> 时间：2012-06-03T20:43:03.947
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我通常使用 thumbnail.ashx 文件来显示图像。问题是如果我在索引视图中使用它，它可以工作，但如果我在编辑视图中使用它，它不会。img 标签的 src 从

```
http://domain/Thumbnail.ashx?id=17 (right) 
```

至

```
http://domain/mycontroller/edit/Thumbnail.ashx?id=17 (wrong) 
```

我需要向表格添加另一条路线吗？它可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:44:30.430

您需要使用绝对路径（以 开头`/`）。

# php - MySQL 错误访问拒绝用户使用密码 NO

> ID：10873803
> 
> 赞同：2
> 
> 时间：2012-06-03T20:43:45.967
> 
> 标签：php, mysql, mysql-error-1045

我不断收到此错误：

```
Warning: mysql_query() [function.mysql-query]: Access denied for user 'mcabinet'@'localhost' (using password: NO) in /home/mcabinet/public_html/games/db_edit/airportmadness4.php on line 3

Warning: mysql_query() [function.mysql-query]: A link to the server could not be established in /home/mcabinet/public_html/games/db_edit/airportmadness4.php on line 3
No Database found. 
```

这是我的整个 .php 页面：

```
<?php
include("../templates/base/template2/mysql_connect.php");

$gametitle = "Airport Madness TEST";
$gamedescription = "DESCRIPtion testing a description. LOL !";
$image1url = "http://website-gamesite.com/games/images/lhfdsjk.jpg";
$categorycode = "adv";
$gametitle2 = "airportmadnesstest";

mysql_query("INSERT INTO Games VALUES (null,'$gametitle','$gamedescription','$image1url','$categorycode','0','$gametitle2'") or die ("Error Inserting Values into the Games Table");

?> 
```

谢谢！我刚开始使用 PHP 和 MySQL。

编辑：这是包含文件的内容：

```
<?php

$db_host = "localhost";
$db_username = "mcabinet_admin";
$db_password = "4jf8ido9A";
$db_name = "mcabinet_games";

@mysql_connect($db_host,$db_username,$db_password) or die ('MySQL Not found // Could Not Connect.');
@mysql_select_db("$db_name") or die ("No Database found.");

?> 
```

使用您的提示进行编辑后，我仍然收到错误消息。

编辑：我做了更多的改变。这很奇怪，因为当我从数据库中获取内容时，内容显示正常，但仍然显示错误。当我运行单独的脚本，尝试添加行时，它甚至不会连接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T20:46:40.343

尝试将包含移动到第一个查询行上方！像这样

```
<?php
  include("../templates/base/template2/mysql_connect.php");
  $query = mysql_query("SELECT * FROM Games WHERE id = '1' "); 
```

要做一个 MySQL 请求，你需要先连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T22:21:46.370

这是问题所在：

```
mysqli_connect('$db_host','$db_username','$db_password')
    or die ('MySQL Not found // Could Not Connect.'); 
```

这应该是：

```
mysql_connect($db_host, $db_username, $db_password)
    or die ('MySQL Not found // Could Not Connect.'); 
```

由于您已经对字符串进行了单引号，因此您最终会传递`'$db_host'`(etc) 的字符串文字，而不是您想要的值。

此外，您似乎`mysqli`正在使用`mysql`. 我猜想使用其中一个是值得的——它们是两个不同的库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T20:47:39.710

您应该在运行查询**之前**建立连接：

```
1) $link = mysqli_connect($host, $username, $password)
2) mysqli_select_db($link, $db_name);
3) $result = mysqli_query($link, $query); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-03T22:11:24.427

尝试这个：

```
<?php
$db_host = "localhost";
$db_username = "mcabinet_admin";
$db_password = "4jf8ido9A";
$db_name = "mcabinet_games";

mysql_connect($db_host,$db_username,$db_password) or die ('MySQL Not found // Could Not Connect.');
mysql_select_db("$db_name") or die ("No Database found.");

$gametitle = "Airport Madness TEST";
$gamedescription = "DESCRIPtion testing a description. LOL !";
$image1url = "http://website-gamesite.com/games/images/lhfdsjk.jpg";
$categorycode = "adv";
$gametitle2 = "airportmadnesstest";

mysql_query("INSERT INTO Games VALUES (null,'$gametitle','$gamedescription','$image1url','$categorycode','0','$gametitle2'") or die ("Error Inserting Values into the Games Table");

?> 
```

此外，您的用户似乎被设置为不在 phpmyadmin 中使用密码，这是正确的吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T00:44:22.950

解决！！！修复：

简单更改：

```
mysql_query("INSERT INTO Games VALUES (null,'$gametitle','$gamedescription','$image1url','$categorycode','0','$gametitle2'") or die ("Error Inserting Values into the Games Table"); 
```

至：

```
mysql_query("INSERT INTO Games VALUES (null,'$gametitle','$gamedescription','$image1url','$categorycode','0','$gametitle2')") or die ("Error Inserting Values into the Games Table"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-04T15:52:59.883

一个有趣的场景是这样的

```
<h1>Some heading</h1>
<?php
    insert_data(a1,b1);
?>
<h2>other html stuff</h2>
<?php
    include('database_connnection.php'); <--- problem is this line

    function insert_data(a1,b1)
    {
         Query = "Insert INTO MYTABLE VALUES(a1,b1)";
    }
?> 
```

上面的代码将给出错误，因为 insert_data() 函数在调用 include(database...) 之前被调用，因为它在代码的更下方，因此你会得到错误。修复方法是将 include(database) 移动到函数内部或在调用 insert_data 查询之前

```
<?php

    function insert_data(a1,b1)
    {
         include('database_connnection.php');
         Query = "Insert INTO MYTABLE VALUES(a1,b1)";
    }
?> 
```

# ruby-on-rails - Rails SMTP 错误

> ID：10873804
> 
> 赞同：3
> 
> 时间：2012-06-03T20:43:54.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3, smtp, actionmailer

尝试在我的 Rails 应用程序中设置 Mandril SMTP .. 当我去注册一个新用户时，我收到以下错误：

```
Net::SMTPFatalError in RegistrationsController#create

554 5.7.1 <nkeating@lion.lmu.edu>: Relay access denied 
```

[山魈设置指南](http://help.mandrill.com/customer/portal/articles/456751-web-frameworks)说`"# In a controller: YourMailer.email_name.deliver"`..我不确定如何配置它，我的注册控制器中没有任何东西。

下面的完整跟踪

```
/Users/nelsonkeating/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/smtp.rb:954:in `check_response'
/Users/nelsonkeating/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/smtp.rb:923:in `getok'
/Users/nelsonkeating/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/smtp.rb:866:in `rcptto'
/Users/nelsonkeating/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/smtp.rb:847:in `block in rcptto_list'
/Users/nelsonkeating/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/smtp.rb:845:in `each'
/Users/nelsonkeating/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/smtp.rb:845:in `rcptto_list'
/Users/nelsonkeating/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/smtp.rb:666:in `send_message'
mail (2.4.4) lib/mail/network/delivery_methods/smtp.rb:145:in `block in deliver!'
/Users/nelsonkeating/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/smtp.rb:526:in `start'
mail (2.4.4) lib/mail/network/delivery_methods/smtp.rb:144:in `deliver!'
mail (2.4.4) lib/mail/message.rb:2034:in `do_delivery'
mail (2.4.4) lib/mail/message.rb:229:in `block in deliver'
actionmailer (3.2.3) lib/action_mailer/base.rb:414:in `block in deliver_mail'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.3) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `instrument'
actionmailer (3.2.3) lib/action_mailer/base.rb:412:in `deliver_mail'
mail (2.4.4) lib/mail/message.rb:229:in `deliver'
devise (2.1.0) lib/devise/models/confirmable.rb:128:in `send_on_create_confirmation_instructions'
activesupport (3.2.3) lib/active_support/callbacks.rb:420:in `_run__2902994895577254923__create__297803661615302062__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_create_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
activerecord (3.2.3) lib/active_record/callbacks.rb:268:in `create'
activerecord (3.2.3) lib/active_record/persistence.rb:344:in `create_or_update'
activerecord (3.2.3) lib/active_record/callbacks.rb:264:in `block in create_or_update'
activesupport (3.2.3) lib/active_support/callbacks.rb:414:in `_run__2902994895577254923__save__297803661615302062__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
activerecord (3.2.3) lib/active_record/callbacks.rb:264:in `create_or_update'
activerecord (3.2.3) lib/active_record/persistence.rb:84:in `save'
activerecord (3.2.3) lib/active_record/validations.rb:50:in `save'
activerecord (3.2.3) lib/active_record/attribute_methods/dirty.rb:22:in `save'
activerecord (3.2.3) lib/active_record/transactions.rb:241:in `block (2 levels) in save'
activerecord (3.2.3) lib/active_record/transactions.rb:295:in `block in with_transaction_returning_status'
activerecord (3.2.3) lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
activerecord (3.2.3) lib/active_record/transactions.rb:208:in `transaction'
activerecord (3.2.3) lib/active_record/transactions.rb:293:in `with_transaction_returning_status'
activerecord (3.2.3) lib/active_record/transactions.rb:241:in `block in save'
activerecord (3.2.3) lib/active_record/transactions.rb:252:in `rollback_active_record_state!'
activerecord (3.2.3) lib/active_record/transactions.rb:240:in `save'
devise (2.1.0) app/controllers/devise/registrations_controller.rb:15:in `create'
actionpack (3.2.3) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.3) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.3) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.3) lib/active_support/callbacks.rb:436:in `_run__1577789481977373940__process_action__3613823028843665787__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.3) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
activerecord (3.2.3) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.3) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.3) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.3) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:36:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/mapper.rb:40:in `call'
journey (1.0.3) lib/journey/router.rb:68:in `block in call'
journey (1.0.3) lib/journey/router.rb:56:in `each'
journey (1.0.3) lib/journey/router.rb:56:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:600:in `call'
rack-pjax (0.5.9) lib/rack/pjax.rb:12:in `call'
client_side_validations (3.1.4) lib/client_side_validations/middleware.rb:18:in `call'
warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
warden (1.1.1) lib/warden/manager.rb:34:in `catch'
warden (1.1.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:35:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/head.rb:14:in `call'
remotipart (1.0.2) lib/remotipart/middleware.rb:30:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.3) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `_run__329187641558693815__call__297803661615302062__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.3) lib/rails/engine.rb:479:in `call'
railties (3.2.3) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
thin (1.3.1) lib/thin/connection.rb:80:in `block in pre_process'
thin (1.3.1) lib/thin/connection.rb:78:in `catch'
thin (1.3.1) lib/thin/connection.rb:78:in `pre_process'
thin (1.3.1) lib/thin/connection.rb:53:in `process'
thin (1.3.1) lib/thin/connection.rb:38:in `receive_data'
eventmachine (0.12.10) lib/eventmachine.rb:256:in `run_machine'
eventmachine (0.12.10) lib/eventmachine.rb:256:in `run'
thin (1.3.1) lib/thin/backends/base.rb:61:in `start'
thin (1.3.1) lib/thin/server.rb:159:in `start'
rack (1.4.1) lib/rack/handler/thin.rb:13:in `run'
rack (1.4.1) lib/rack/server.rb:265:in `start'
railties (3.2.3) lib/rails/commands/server.rb:70:in `start'
railties (3.2.3) lib/rails/commands.rb:55:in `block in <top (required)>'
railties (3.2.3) lib/rails/commands.rb:50:in `tap'
railties (3.2.3) lib/rails/commands.rb:50:in `<top (required)>'
script/rails:6:in `require'
script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T00:37:45.403

您是否在任何地方定义了 ActionMailer smtp 设置？您可以将它们放在 config/initializers/setup_mail.rb 中。

setup_mail.rb

```
ActionMailer::Base.smtp_settings = {  
  :address   => "smtp.mandrillapp.com",
  :port      => 587,
  :user_name => "MANDRILL_USERNAME",
  :password  => "MANDRILL_SMTP_PASS"

} 
```

在您的 config/environments/production.rb 中：

```
 config.action_mailer.delivery_method = :smtp
  config.action_mailer.perform_deliveries = true
  config.action_mailer.raise_delivery_errors = false
  config.action_mailer.default :charset => "utf-8" 
```

# c++ - 在 C++ 中重写迭代器

> ID：10873806
> 
> 赞同：1
> 
> 时间：2012-06-03T20:44:00.007
> 
> 标签：c++, iterator, linked-list

我制作了一个通用的抽象链表（AbstractList），它包含 Data*，并具有内部类 Iterator。然后，我为 Job 类对象创建了一个从 AbstractList 派生的链表，称为 JobList。

问题是，我无法在 AbstractList 的 Iterator 类中实现 operator*，因为它必须返回抽象的 Data。

所以，我认为我必须在派生类 JobList 中实现它，但我不能。这是代码，我哪里出错了？

```
class AbstractList
{
protected:
....//Node code
....

Node *m_head;
int m_len;

public:
    class Iterator
    {
    private:
        Node *curr;
    public:
        Iterator(Node* nd): curr(nd){}
        Iterator(const Iterator& it) {curr=it.curr;}
        Iterator operator++() {curr=curr->getNext(); return *this;}
        bool operator==(const Iterator& other) {return curr==other.curr;}
        bool operator!=(const Iterator& other) {return curr!=other.curr;}
       //here I should implement operator *, but I can't, so I do it in JobList
    };
    Iterator begin() {return Iterator(m_head);}

    AbstractList();
    ~AbstractList();

    virtual void setNewNode(Data*)=0;
    Data *getFirst() const {return m_head->getData();}
}; 
```

和派生类 JobList：

```
class JobList: public AbstractList
{
public:
    void setNewNode(Job*);
    Job *getFirst() const {return (Job*)AbstractList::GetFirst();}

    //here I want to implement operator*, but everything I've tried failed.
    //How should it be done?
}; 
```

编辑：我试图将以下代码放在 AbstractList 的迭代器中：

```
Data *operator*() {return curr->getData();} 
```

而派生类JobList中的这段代码：

```
Job *Iterator::operator*() {return (Job*)Iterator::operator*} 
```

但是我得到以下错误：'JobList'：类包含显式覆盖'*'，但不是从包含函数声明的接口派生的。

# java - JNLP：无法将参数传递给 main

> ID：10873808
> 
> 赞同：1
> 
> 时间：2012-06-03T20:44:15.860
> 
> 标签：java, jnlp, java-web-start

我写了一个程序，它只输出 args[0]。如果没有 args 传递给 main，那么它将输出“Hello World”

```
class test {
public test(String str) {
    System.out.println(str);
}
public static void main(String[] args){
    if (args == null || args.length == 0) {
        args = new String[] { "Hello World" };
    }
    new test(args[0]);
}} 
```

在.jnlp文件中，对应部分写为：

```
<application-desc main-class="test"/>
  <argument>TEST1</argument>
</application-desc> 
```

但是，运行此 jnlp 后，它会输出“Hello World”

谁能帮我弄清楚是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:26:36.050

我通过删除`/`in解决了它`<application-desc main-class="test"/>`

# c++ - 何时调用构造函数？

> ID：10873812
> 
> 赞同：2
> 
> 时间：2012-06-03T20:44:50.453
> 
> 标签：c++, constructor, global

假设我们有一个 C++ 类

```
class X {
    int i;
public:
    X(int y): i(y) {}
};

X r(10);

int main() {
    return 0;
} 
```

所以我们有一个全局对象 r。我的问题是，在编译时或运行时调用全局或静态对象的构造函数时？因为程序的执行从main函数开始。直到那时所有的全局对象都应该被初始化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T20:47:34.827

当然不是在编译时。它在运行时调用，在`main`进入之前。然后初始化所有全局变量和静态变量（不包括方法范围的静态变量）。

# javascript - .before 插入多个元素

> ID：10873813
> 
> 赞同：0
> 
> 时间：2012-06-03T20:44:56.217
> 
> 标签：javascript, jquery

我有一个元素`var destination`，我试图在它之前插入多个元素。我使用`.before`但我多次使用它，因为我正在移动多个元素。

有没有办法改进这段代码，并一次移动所有元素？我正在移动一个元素`moveElement`、它之前的元素，以及其他一些`myClass`使用`each()`. 任何减少数量的方法`destination.before()`

```
destination.before(moveElement.prev());
destination.before(moveElement);
$('div.myClass').each(function(){
   destination.before($(this));
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T20:46:31.803

[`before`](http://api.jquery.com/before/)接受一个 jquery 对象，因此您可以构造一个包含所有元素的 jQuery 对象。

```
destination.before(moveElement.prev().add(moveElement).add('div.myClass')); 
```

[`add`文档：](http://api.jquery.com/add/)

> 描述：将元素添加到匹配元素的集合中。

# python - 在对象python中查找变量的平均值

> ID：10873819
> 
> 赞同：2
> 
> 时间：2012-06-03T20:45:38.760
> 
> 标签：python, numpy

如何迭代一组对象以最有效的方式找到它们的平均值？这仅使用一个循环（可能除了 Numpy 中的循环），但我想知道是否有更好的方法。目前，我正在这样做：

```
scores = []
ratings= []
negative_scores = []
positive_scores = []

for t in text_collection:
 scores.append(t.score)
 ratings.append(t.rating)
 if t.score < 0:
    negative_scores.append(t.score)
 elif t.score > 0:
    positive_scores.append(t.score)

print "average score:", numpy.mean(scores)
print "average rating:", numpy.mean(ratings)
print "average negative score:", numpy.mean(negative_scores)
print "average positive score:", numpy.mean(positive_scores) 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T21:21:43.300

```
import numpy as np
scores, ratings = np.array([(t.score, t.rating) for t in text_collection]).T

print 'average score: ', np.mean(scores)
print 'average rating: ', np.mean(ratings)
print 'average positive score: ', np.mean(scores[scores > 0])
print 'average negative score: ', np.mean(scores[scores < 0]) 
```

编辑：

要检查是否真的有任何负分，你可以这样：

```
if np.count_nonzero(scores < 0):
    print 'average negative score: ', np.mean(scores[scores < 0]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T20:53:02.913

你介意为你想从集合中获取的每个项目循环吗？效率略低，但更清晰：

```
avg_score = numpy.mean([t.score for t in text_collection])
avg_rating = numpy.mean([t.rating for t in text_collection])
avg_neg_score = numpy.mean([t.rating for t in text_collection if t.score < 0])
avg_pos_score = numpy.mean([t.rating for t in text_collection if t.score > 0]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T21:15:06.727

您可以通过简单的操作从 avg_neg_score 和 avg_pos_score 获得 avg_score：

```
nneg = len(negative_scores)
npos = len(positive_scores)
avg_score = (avg_neg_score * nneg + avg_pos_score * npos) / (nneg + npos) 
```

编辑：如果您通过迭代 text_collection 创建数组，这将更有效（假设您只想要手段）：

```
n = len(text_collection)
(npos, sumpos) = (0, 0)
(nneg, sumneg) = (0, 0)
sumrating = 0
for t in text_collection:
    sumrating += t.rating
    if t.score < 0:
        sumneg += t.score
        nneg += 1
    else:
        sumpos += t.score
        npos += 1
avg_score = (sumneg + sumpos) / n
avg_neg_score = sumneg / nneg
avg_pos_score = sumpos / npos
avg_rating = sumrating / n 
```

编辑2：固定：avg_neg_rating 到 avg_neg_score ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T21:03:52.010

如果你有 NumPy 可用，我认为这是你最好的选择。它完全符合您的要求，并且有一个可以自我记录您正在做的事情的名称。

如果你想要一个纯 python 解决方案：

```
def mean(seq):
    i = 0
    sum = 0.0
    for x in seq:
        sum += x
        i += 1
    if i == 0:
        raise ValueError, "cannot take mean of zero-length sequence"
    return sum / i 
```

我写它来处理任何序列，包括计算值的生成器表达式之类的东西。所以它只运行一次序列，并且它有自己的计数器，所以它知道有多少。如果您确定您只想取列表的平均值：

```
def list_mean(lst):
    if len(lst) == 0:
        raise ValueError, "cannot take mean of zero-length list"
    return float(sum(lst)) / len(lst) 
```

如果您在迭代器或生成器表达式上调用它，`len()`则将不起作用并且您将收到`TypeError`异常。

# python - 如何将 2D float numpy 数组转换为 2D int numpy 数组？

> ID：10873824
> 
> 赞同：360
> 
> 时间：2012-06-03T20:46:28.470
> 
> 标签：python, numpy

如何将真正的 numpy 数组转换为 int numpy 数组？尝试直接使用映射到数组，但它不起作用。

* * *

## 回答 #1

> 赞同：469
> 
> 时间：2012-06-03T20:48:30.130

使用[`astype`](https://docs.scipy.org/doc/numpy-1.14.0/reference/generated/numpy.ndarray.astype.html)方法。

```
>>> x = np.array([[1.0, 2.3], [1.3, 2.9]])
>>> x
array([[ 1\. ,  2.3],
       [ 1.3,  2.9]])
>>> x.astype(int)
array([[1, 2],
       [1, 2]]) 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2012-06-03T21:09:39.893

一些用于如何控制舍入的 numpy 函数：[rint](http://docs.scipy.org/doc/numpy/reference/generated/numpy.rint.html#numpy.rint)、[floor](http://docs.scipy.org/doc/numpy/reference/generated/numpy.floor.html#numpy.floor)、[trunc](http://docs.scipy.org/doc/numpy/reference/generated/numpy.trunc.html#numpy.trunc)、[ceil](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ceil.html)。取决于你希望如何四舍五入浮点数，向上，向下，或到最近的整数。

```
>>> x = np.array([[1.0,2.3],[1.3,2.9]])
>>> x
array([[ 1\. ,  2.3],
       [ 1.3,  2.9]])
>>> y = np.trunc(x)
>>> y
array([[ 1.,  2.],
       [ 1.,  2.]])
>>> z = np.ceil(x)
>>> z
array([[ 1.,  3.],
       [ 2.,  3.]])
>>> t = np.floor(x)
>>> t
array([[ 1.,  2.],
       [ 1.,  2.]])
>>> a = np.rint(x)
>>> a
array([[ 1.,  2.],
       [ 1.,  3.]]) 
```

要将其中一种转换为 int 或 numpy 中的其他类型之一，[astype](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.astype.html)（由 BrenBern 回答）：

```
a.astype(int)
array([[1, 2],
       [1, 3]])

>>> y.astype(int)
array([[1, 2],
       [1, 2]]) 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-02-01T07:33:09.387

你可以使用`np.int_`：

```
>>> x = np.array([[1.0, 2.3], [1.3, 2.9]])
>>> x
array([[ 1\. ,  2.3],
       [ 1.3,  2.9]])
>>> np.int_(x)
array([[1, 2],
       [1, 2]]) 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-04-06T08:04:42.000

如果您不确定您的输入将是一个 Numpy 数组，您可以使用`asarray`with`dtype=int`而不是`astype`：

```
>>> np.asarray([1,2,3,4], dtype=int)
array([1, 2, 3, 4]) 
```

如果输入数组已经具有正确的 dtype，`asarray`则避免数组复制而`astype`没有（除非您指定`copy=False`）：

```
>>> a = np.array([1,2,3,4])
>>> a is np.asarray(a)  # no copy :)
True
>>> a is a.astype(int)  # copy :(
False
>>> a is a.astype(int, copy=False)  # no copy :)
True 
```

# c++ - const char* 作为模板的参数

> ID：10873829
> 
> 赞同：0
> 
> 时间：2012-06-03T20:46:37.293
> 
> 标签：c++, templates

```
/* Find an item in an array-like object
 * @param val the val to search for
 * @param arr an array-like object in which to search for the given value
 * @param size the size of the array-like object
 * @return the index of the val in the array if successful, -1 otherwise
 */
template < class T>
int mybsearch(T val, T const arr[], const int &size) 
```

当我尝试使用 const char* 和字符串数组调用此模板函数时，编译器会抱怨... `mybsearch("peaches", svals, slen)`，我该如何修改模板原型以适应这种情况？

这是字符串数组

```
 string svals[] = { "hello", "goodbye", "Apple", "pumpkin", "peaches" };
  const int slen = sizeof(svals)/sizeof(string); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T21:40:56.517

因为`T`被推断为`const char*`，您正在尝试使用 进行`const char* const[]`初始化`string[]`。这是行不通的（只有当参数类型基本相同时，数组才能传递给函数 - 除了限定符 - 作为参数类型）。

你可以

*   一致地使用 C 字符串，例如：

    ```
    const char* svals[] = { "hello", "goodbye", "Apple", "pumpkin", "peaches" }; 
    ```

    *不*推荐。

*   一致地使用 C++ 字符串

    ```
    mybsearch(string("peaches"), svals, slen) 
    ```

*   将参数与 mybsearch 解耦（这样您就可以搜索类型与数组类型不同的元素，只要它们具有可比性）

    ```
    template < class T, class U>
    int mybsearch(T val, U const arr[], const int &size) 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T20:50:17.577

*（问题得到扩展后完全改变了答案）*

问题是您搜索的值是 a `const char *`，但您搜索的数组是`std::string`s 的数组。（好吧，我希望您`using std`在代码中有所保留，并且您使用的是标准字符串而不是您自己的。）

您需要像这样调用它：

mybsearch（字符串（“桃子”），svals，slen）

# typo3 - 更新存储库的问题

> ID：10873830
> 
> 赞同：1
> 
> 时间：2012-06-03T20:46:39.210
> 
> 标签：typo3

我在更新存储库时遇到问题。
全新安装 Typo3 后，我单击“扩展管理器 -> 导入扩展 -> 检索/更新”。30 秒后，我收到一个异常，即最大值。已超过执行时间，仅添加了 347 个扩展，底部显示“第 1 页，共 31 页”，但所有扩展应该存在的实际字段仍然为空。
当我将最大执行时间设置为 90 并再次尝试时，我收到相同的异常并且扩展的数量没有改变。
即使我搜索扩展程序，它也只会显示“正在搜索”而没有任何结果。

我在本地服务器 (XAMPP) 上使用最新版本的 Typo3 (4.7.1)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:24:05.197

也许使用不同的 TER-Mirror。在扩展管理器的设置选项卡中更改它。

检查存储信息的表 cache_extensions。检查添加了哪些扩展。如果您对某些临时文件夹有疑问，请检查您的安装工具 ->“基本配置”？检查您的内存设置 - 只需提高它们。并检查您的 php 错误日志以获取一些提示。

如果你有另一个工作的 TYPO3 安装，你可以从那里导入表 cache_extensions。应该工作（但我自己从来没有做过）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T07:20:51.563

在带有“Import Extensions”的新 Debian 服务器上遇到了类似的问题，缺少“php5-curl”包。

```
apt-get install php5-curl 
```

希望它可以帮助某人。

# ios - arc4random_uniform() 的操作系统要求

> ID：10873839
> 
> 赞同：7
> 
> 时间：2012-06-03T20:47:53.313
> 
> 标签：ios, c, macos, bsd, arc4random

如何找出使用的最低操作系统要求`arc4random_uniform()`？它是在 BSD 中定义的吗？如果是这样，来自哪个版本？它可以在任何 Mac OS X 版本上运行吗？iOS版本怎么样？有什么官方的地方可以找到这些东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T21:00:54.400

如果您查看[`stdlib.h`](http://opensource.apple.com/source/Libc/Libc-763.13/include/stdlib.h)它的定义位置，它会说：

```
u_int32_t arc4random_uniform(u_int32_t /*upper_bound*/) __OSX_AVAILABLE_STARTING(__MAC_10_7, __IPHONE_4_3); 
```

所以它可以从桌面版的 Lion 和 iPhone 上的 iOS 4.3 获得。

# php - PHP xpath从特定ID的网页中提取值

> ID：10873842
> 
> 赞同：4
> 
> 时间：2012-06-03T20:48:24.397
> 
> 标签：php, xpath

我需要一些关于 xpath 的帮助来从 html 页面中提取价值 $283。

这是我的PHP

```
$html = file_get_contents("https://test.com/testpage.php");
$html = tidy_repair_string($html);
$doc = new DomDocument();
$doc->loadHtml($html);
$xpath = new DomXPath($doc);

$avg = $xpath->evaluate('string(//*[@id="Average"]/@value)');
echo $avg; 
```

这是HTML

```
<div class="List">
    <span class="bold">Avg</span> 
    <span id="Average">$283</span>
</div> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T20:50:48.163

试试这个 XPath 表达式：

```
//div[@class="List"]/span[@id="Average"] 
```

或者简单地说：

```
//*[@id='Average'] 
```

这是一个完整的工作代码：

```
<?php
$doc = new DOMDocument();
$doc->loadHTMLFile('http://127.0.0.1/test.html');

$xpath = new DOMXpath($doc);

$elements = $xpath->query("//*[@id='Average']");

if (!is_null($elements)) {
    foreach ($elements as $element) {
        $nodes = $element->childNodes;
        foreach ($nodes as $node) {
            echo $node->nodeValue. "\n";
        }
    }
}
?> 
```

只需将 URL 替换为您自己的。

# javascript - 无法让 slickgrid 将数据保存到隐藏字段

> ID：10873846
> 
> 赞同：0
> 
> 时间：2012-06-03T20:48:53.860
> 
> 标签：javascript, php, slickgrid, jquery-1.7

首先，我已经看到了很多这样的问题的答案，但没有似乎适用于我的示例代码。我浏览了项目 wiki 页面上的示例，但似乎没有一个适用于我，我可以看到。我不是求这个偷懒，而是三天后，我真的很茫然……

我在表单中实例化一个网格，然后在提交时，我需要将表单数据保存到序列化的隐藏输入字段（或将其转换为模态，但不知道如何执行此操作，尽管这听起来像是完美的解决方案.. .

***HTML***

```
<form id="myGridForm" action="" method="post">
    <div style="position:relative; overflow:visible; margin:25px 0 0 0;">
        <div id="loader" style="position:absolute; z-index:997;top: 62px; left:200px;"><img src="images/loading.gif" border="0" /></div>
        <div id="dateInput" style="position:relative;z-index:997;visibility:hidden;"><p><label for="datepicker">Date: </label><input type="text" id="datepicker" name='datepicker'size="30"/></p>
            <!-- jQuery DatePicker shows here -->
        </div>
        <div id="myGrid" style="height:400px;width:902px; float:left;" >
            <!-- #myGrid.slickGrid goes here -->
        </div>

    </div>

    <div class="options-panel">
        <h2>Instructions:</h2>
        <ul>
            <li>Select the date by clicking the date image above the table</li>
            <li>Enter your event data (you can enter multiple events for that date)</li>
            <li>To add another event, hit your <em>TAB</em> key and a new row will be created</li>
            <li>When you're all done for this date, click the <em>Commit Changes</em> button to have your events saved to the site</li>
        </ul>

        <h2>Options:</h2>

    <input type="hidden" name="p" id="p" value="<?=$_POST['p']?>" />
    <input type="hidden" name="k" id="k" value="<?=$_POST['k']?>" />
    <input type="hidden" name="i" id="i" value="<?=$_POST['i']?>" />
    <input type="hidden" name="d" id="d" value="<?=$_POST['d']?>" />
    <input type="hidden" name="gridData" id="gridData" />
       <div id="submitButton" style="visibility:hidden;"> <button type="submit">Submitter</button></div>
        <a href="javascript: submitform()">Search</a>

    </div>
</form> 
```

***.js 脚本正在加载***

```
js/slickGrid/lib/firebugx.js
js/jquery-ui-1.8.20.custom.min.js.php
js/json2.js.php
js/slickGrid/plugins/slick.cellrangedecorator.js
js/slickGrid/plugins/slick.cellrangeselector.js
js/slickGrid/plugins/slick.cellselectionmodel.js
js/slickGrid/slick.formatters.js
js/slickGrid/slick.editors.js 
```

***实例化网格的代码，然后使其可见（嵌套以解决依赖关系）***

```
<script>
var grid;   // initalize grid globally so it can be accessed outside of this function
    $.getScript("js/slickGrid/jquery.event.drag-2.0.min.js",function(){
        $.getScript("js/slickGrid/slick.core.js",function(){
            $.getScript("js/slickGrid/slick.grid.js",function(){

                        $.holdReady(false);

                        var columns = [
                        { id: "VisitDate", name: "VisitDate", field: "VisitDate", width: 120, cssClass: "cell-title", editor: Slick.Editors.Text },
                        { id: "VisitTime", name: "VisitTime", field: "VisitTime", width: 100, editor: Slick.Editors.Text },
                        { id: "PrimaryComplaint", name: "PrimaryComplaint", field: "PrimaryComplaint", width: 100, cssClass: "cell-right", editor: Slick.Editors.Text },
                        ];

                        var data = [
                            {
                            "VisitDate": "11/30/2009",
                            "VisitTime": "0117",
                            "PrimaryComplaint": "General malaise "
                            },
                            {
                            "VisitDate": "02/08/2010",
                            "VisitTime": "0930",
                            "PrimaryComplaint": "General malaise "
                            }
                        ];

                        var options = {
                        editable: true,
                        enableAddRow: true,
                        enableCellNavigation: true,
                        asyncEditorLoading: false,
                        forceFitColumns: true
                        };

                        // grid = new Slick.Grid($("#acs-work"), returnObj.source, columns, options);
                        //var $tabs = $('#tabset').tabs();
                        //var selected = $tabs.tabs('option', 'selected') + 1; // => 0[edit]
                        //var panelstr = "#panel" + selected;
                        //to load dynamic data
                        // PROTO: grid = new Slick.Grid($(panelstr), returnObj.source, columns, options); 
                        grid = new Slick.Grid("#myGrid", data, columns, options); 

                            $('#loader').hide();
                           $('#dateInput').css({opacity: 0.0, visibility: "visible"}).animate({opacity: 1.0},"slow");
                           $('#myGrid').css({opacity: 0.0, visibility: "visible"}).animate({opacity: 1.0},"slow");
                           $('#submitButton').css({opacity: 0.0, visibility: "visible"}).animate({opacity: 1.0},"slow");

            }).fail(function(jqxhr, settings, exception) {  document.write('FAILED: '+exception); });
        }).fail(function(jqxhr, settings, exception) {  document.write('FAILED: '+exception) });//console.log( textstatus );
    }).fail(function(jqxhr, settings, exception) {  document.write('FAILED: '+exception) });//console.log( textstatus );

            $.getScript("js/jquery.calendarPicker.js"); 

</script> 
```

***页面末尾的最终脚本（页脚）***

```
<script>
    $.holdReady(true);
    console.log('json2 Loadstatus: '+json2Loaded);
</script>

<? //Instantiate   slickGrid jQueryUI widget ?>
<script>
$(document).ready(function(){

    $(function() {
        $( "#datepicker" ).datepicker({ numberOfMonths: [2, 3] });

            $( "#datepicker" ).datepicker( "option", "showAnim", "clip");
    });
});

    //Hide loading image div and show loaded jQuery modules
$('#myGridForm').submit(function() {

    //var gridDtaHolder = $('#myGrid').getData();
    //alert ($('input').val( $('myGridForm').serialize() ) );
    //alert ($('#myGrid').serialize() );
    //gridDtaHolder = JSON.stringify();
    //grid.getEditController().commitCurrentEdit();
    //$('#myGridData').val( $('grid-canvas').serialize() );
    console.log ( ' myGrid data1: '+ $('grid').data() );
    console.log ( ' myGrid data2: '+ $('#myGrid').data() );
    var datum = $('#myGrid').data();
    console.log ( ' myGrid data3: '+  $('datum').serialize() );
    //$("#myGridData").val( $('datum').serialize() );
    $("input[name='gridData']").val($.JSON.encode(data));

  // stops submit ie. return false;
});
</script> 
```

正如您所看到的，我一直在尝试从网格中获取数据，所有警报和控制台日志测试都试图实现我在 SO 上找到的各种答案。但是，没有人发布此工作应用程序的最终代码示例。一旦我得到它的工作，我计划将它提交到 mbielman 的示例页面，以尝试帮助这么多用户遇到的问题。另外，如果有人可以向我展示如何将网格实例化为模态，那也将是很好的信息:)

目前，我的日志回复以下内容，请参阅脚本末尾提交功能中写入日志的命令。看来我可以从中获取一个对象`console.log ( ' myGrid data2: '+ $('#myGrid').data() );`，我似乎无法对它做任何事情，否则它为空，甚至不知道如何将它显示到屏幕上以查看调试内容...

***萤火虫控制台输出***

```
myGrid data1: null
myGrid data2: [object Object]
myGrid data3:
data is undefined 
```

请注意，虽然我是许多语言的相当高级的程序员，但 javascript/jQuery 的一些语法/属性让我非常困惑。因此，您可以花任何额外的时间来解释出了什么问题，如何做得更好，参考链接，这将是非常棒的，因为我真的想更好地使用这种语言。再一次，很抱歉这篇文章很长，如果你到了这里，我真的很感谢你的时间。我试图尽可能彻底，以便其他人在遇到与我一样多的麻烦时有一个彻底的参考点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:40:00.260

您正在尝试网格中的数据。不。数据在您的`data`JavaScript 变量中（尽管您也可以通过 获取它`grid.getData()`）。使用您喜欢的任何机制来序列化所有或部分数据并将其发送到服务器。

此外，不要尝试将 SlickGrid 当作 jQuery 小部件来使用 - 它不是。SlickGrid 的所有 API 都是通过您创建的 JavaScript 对象`var grid = new Slick.Grid(...)`而不是通过 jQuery 小部件语义（例如`$("#myGrid").xxx()`）公开的。

# vim - 如何在 Vim 中搜索百分号 (%)？

> ID：10873847
> 
> 赞同：10
> 
> 时间：2012-06-03T20:49:18.680
> 
> 标签：vim, replace

我正在尝试对看起来像这样的旧式 PHP 标记进行全局查找和替换：

```
<%= $username %> 
```

但是，当我尝试在 Vim 中进行搜索和替换时，我收到“E71：\% 后的无效字符”警告和“E476：无效命令”警告：

```
:%s/\<\%/other val/c 
```

我也试过：

```
:%s/\<\\%/other val/c     " two escapes, returns no matches 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-03T21:01:03.313

此搜索中没有任何内容需要转义，`:%s/<%/<?php/g`完全按预期工作，替换`<%`为`<?php`到处。

# javascript - 在 removeChild 后 Ontouchstart 事件不会触发

> ID：10873850
> 
> 赞同：0
> 
> 时间：2012-06-03T20:49:42.830
> 
> 标签：javascript, ipad, html

我在尝试为 iPad 编写 JavaScript 时发现了一个问题。我没有在其他 HTML5 触摸浏览器上测试过这个，所以我不知道这是 iPad / Mobile Safari 错误还是更普遍的错误。

问题是，如果一个对象附加了一个 ontouchstart 事件侦听器，它最初可以正常工作，但是在我将它从其父容器中删除并再次添加后，它就停止工作了。

这是一个最小的工作示例：

```
<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="utf-8" />
<title>Test</title>
<script type="text/javascript">
    window.onload = function(e) {
        document.getElementById("btn").onclick = clickBtn;
        document.getElementById("touch").ontouchstart = touchDiv;
    }

    function clickBtn(e) {
        var cnt = document.getElementById("container");
        var tdv = document.getElementById("touch");
        cnt.removeChild(tdv);
        cnt.appendChild(tdv);
    }

    function touchDiv(e) {
        var sp = document.getElementById("sp");         
        sp.innerHTML += "*";
    }
</script>
</head>
<body>
<div id=container>
<div style="width: 200px; height: 200px; background-color: red;" id="touch">Touch this</div>
</div>
<button id="btn">Test</button>
<span id=sp></span>
</body>
</html> 
```

（为方便起见，我也把它放在这里：[http](http://dl.dropbox.com/u/8100013/test.html) ://dl.dropbox.com/u/8100013/test.html 。）如果您在 iPad 上触摸红色方块，则会在旁边的文本中添加一个“*”按钮以显示触发了 touchstart 事件。按下按钮会从其父容器中删除红色方块并再次添加它。在那之后，至少在我的 iPad 上，不再添加“*”字符，所以似乎 touchstart 没有触发。

有谁知道发生了什么？我承认我是 Javascript/HTML5 的新手，所以我可能会遗漏一些明显的东西，但是在带有鼠标的 PC 上的相同情况下，mousedown 事件在删除和重新插入对象后工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T21:24:06.230

移除 dom 元素的父元素也会移除*所有*附加的事件。但我认为如果不是`.removeChild`, you `document.body.appendChild`，它就不会发生。

# c++ - C++ 动态扩展数组

> ID：10873853
> 
> 赞同：3
> 
> 时间：2012-06-03T20:50:13.070
> 
> 标签：c++, arrays, multidimensional-array

在 C++ 中，你可以分配一个数组而不告诉它数组有多大吗？我正在模拟一个杂货结帐程序，我打算使用多维来实现这一点，因为输入需要如下：“请输入产品编号和数量”110111 4（第一个是产品编号，第二个是数量）。

由于第二个值，下面会引发错误

```
#include <iostream>
#include <fstream>
#include "checkout.h"
using namespace std;

int main()
{
    Checkout check;
    int choice;
    int array_size = 0;
    int max = 10;
    int* product_info = new int[max][1];

    do{
        cout << "Please Enter Item Number and Quantity: ";
        cin >> product_info[array_size][array_size];
    }while(!choice == 0);

    system("pause");
    return 0;
} 
```

编辑***我意识到数组 cin 在这个例子中被搞砸了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T20:55:07.860

二维数组对于这项任务似乎不是很有效，数组会非常稀疏。

您可以根据需要动态增长它，但只能在一个维度（您可以选择作为编码时间）中，另一个必须永久固定，这充其量是一半的解决方案。

在您的程序中，您使用声明为已绑定的一维`1`。这意味着允许的索引范围仅从`0`到`0`，因此该维度不会真正存在。

所以你只需要一个像一维数组这样的东西（按产品 ID 索引；数量将放在数组*内*，而不是作为它的第二维）；在您的应用程序中，a`vector`代替数组（如注释中所示）将为您处理动态方面（重新分配），因此您现在甚至不必关心向量有多大。

以下是您可以如何声明结构，除了 POS 代码（项目的 ID）通常太大而无法放入`int`实际应用程序中，并且数量可能并不总是真正的整数。

```
struct transaction_line
{
    int poscode;
    int quantity;
};

std::vector<transaction_line> transaction; 
```

# php - 如何使用 php 显示 rss api 页面？

> ID：10873855
> 
> 赞同：-1
> 
> 时间：2012-06-03T20:50:18.997
> 
> 标签：php, parsing, rss

> **可能重复：**
> [使用 PHP 解析 RSS/Atom 提要的最佳方法](https://stackoverflow.com/questions/250679/best-way-to-parse-rss-atom-feeds-with-php)

如何获取并显示此页面的内容？ [http://www.journaltocs.ac.uk/api/articles/corrosion+metal](http://www.journaltocs.ac.uk/api/articles/corrosion+metal)

这是一个免费的 api，我想使用它。我知道一些 php 中的 xml 解析，但我需要对这个页面进行一些解释。

那是一个RSS页面吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T20:58:06.717

是的，那是一个 RSS 页面。

您可以查看许多现有问题以获得进一步的指导。例如：

[使用 PHP 解析 RSS/Atom 提要的最佳方法](https://stackoverflow.com/questions/250679/best-way-to-parse-rss-atom-feeds-with-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T20:58:39.977

不`simplexml_load_file()`应该是答案吗？并使用该功能，然后打印它漂亮？

# c++ - C++ Map 不适合我

> ID：10873861
> 
> 赞同：-2
> 
> 时间：2012-06-03T20:51:00.660
> 
> 标签：c++, map, file-descriptor

我有一个问题，我有一个`map` 我想存储数据的地方。我将对添加到地图，但是当我尝试获取它时 - 它的类似数据没有被存储。我的代码：

```
typedef std::map<unsigned long, int> SocketsTableType;
SocketsTableType ClientTable;

inline void AddClient(unsigned long id, int fd)
{
    ClientTable.insert(std::pair<unsigned long, int>(id, fd));
}

inline int GetDescriptorByClient(unsigned long id)
{
    SocketsTableType::const_iterator it;

    for (it = ClientTable.begin(); it != ClientTable.end(); ++it)
    {
        if (it->first == id)
        {
            return it->second;
        }
    }
    return 0;
}

int main()
{
 AddClient(223322, 12);
 int fd = GetDescriptorByClient(223322);
 if(fd >= 0)
 {
   // NEVER HERE
 }

} 
```

我的代码有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T20:56:42.213

您的代码中有错误。它甚至不会编译。任何地方都没有`addClient`声明函数。此外，您忘记包含必要的头文件。好吧，下面的程序就像一个魅力：

```
#include <map>
#include <cstdio>

typedef std::map<unsigned long, int> SocketsTableType;

SocketsTableType ClientTable;

inline void AddClient(unsigned long id, int fd)
{
    ClientTable.insert(std::pair<unsigned long, int>(id, fd));
}

inline int GetDescriptorByClient(unsigned long id)
{
    SocketsTableType::const_iterator it;

    for (it = ClientTable.begin(); it != ClientTable.end(); ++it)
    {
        if (it->first == id)
        {
            return it->second;
        }
    }
    return 0;
}

int main()
{
    AddClient(223322, 12);
    int fd = GetDescriptorByClient(223322);
    if(fd >= 0)
    {
        printf("Found it! FD=%d\n", fd);
    }
} 
```

# web-services - 我应该如何开始实施 RESTful Web 服务？

> ID：10873864
> 
> 赞同：2
> 
> 时间：2012-06-03T20:51:26.660
> 
> 标签：web-services, rest, tomcat

我的老板让我在我们的一些产品上实现一个 RESTful Web 服务。我们是一家初创公司，我是唯一分配给这项任务的人。

我对 Web 服务一无所知，更不用说 RESTful Web 服务了。

所以我想开始。

因为我不知道我们提供什么服务，所以我可以假设以下产品：

用户只需键入带有 x 和 y 参数的 url，我的服务返回 x*y 的结果。我想这是一个非常基本的 RESTful Web 服务，对吧？请忽略有多少用户将访问它等细节。我可以假设很多用户都会得到我们的服务。

我该如何开始，我需要学习什么？

我应该在服务器端设置一个 Tomcat + 一个 RESTful 托管软件吗？

请给我一些指导和提示。

谢谢

* * *

我认为 Google Reader API / Facebook API / Twitter API 是我将要实现的 RESTful 服务的一个很好的例子。谷歌和其他公司是如何做到这一点的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T20:56:26.130

您没有指定语言，这很困难，但是有许多框架可以帮助您创建 RESTful 服务。

对于 java，Jersey (http://jersey.java.net/) 是一个不错的选择，既然您提到了 Tomcat，我假设您将使用 Java。

通过遵循这些教程，您将构建简单的服务，然后您可以开始添加更多的复杂性。

您可能想阅读以下内容：

[http://ajaxpatterns.org/RESTful_Service](http://ajaxpatterns.org/RESTful_Service)

了解`REST`.

例如，何时使用 GET、POST 或 PUT，以及出现各种错误时应使用哪些响应代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T20:58:22.280

好消息：只要您声称它是 RESTful，您所做的任何事情都将是 RESTful。坏消息：您有点自己定义服务，因为没有“标准”方式来执行 RESTful 服务。从第 1 项开始。

如果您的 Web 服务*真的*像乘法运算一样简单，那它将是一个位于 url yourcompany.com/service/multiply 的网页，它可以接受 2 个参数，也许是老式的 GET 方式（GET yourcompany.com/service /multiply?x=7&y=6) 或作为两个 POST 参数，然后生成仅包含一个字符串“42”的响应。现在，随着您的请求变得越来越复杂，您可以将它们格式化为简单的 XML：

```
<multiply>
  <arg value="6">
  <arg value="7">
</multiply> 
```

和回应

```
<response value="42"/> 
```

或任何你的感觉。或者也许是 JSON。您还需要确保为每个方法调用指定应使用的 HTTP 方法，并确保它们有意义（例如 PUT 用于上传，DELETE 用于删除）。你明白了。RESTful 不是一种规范，它是一种思考 Web 服务的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T22:02:21.170

我将从了解什么是 RESTful 服务开始，因为当您不了解需求是什么时，平台将无济于事。

您可以先阅读以下内容： http: [//www.ibm.com/developerworks/webservices/library/ws-restful/](http://www.ibm.com/developerworks/webservices/library/ws-restful/) ，然后使用您决定实施服务的编程语言搜索 RESTful 服务

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-23T15:31:00.263

WCF REST 的简单示例。

```
[ServiceContract]
public interface IService1
{

    [WebGet(UriTemplate = "contact/{PID}", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    [OperationContract]
    Person GetContact(string PID);

    //[WebInvoke(Method = "POST", UriTemplate = "person")]
    [OperationContract]
    [WebInvoke(UriTemplate = "/create", Method = "POST")]
    void SaveContact(Person person);

    [WebGet(UriTemplate = "/")]//RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)
    [OperationContract]
    List<Person> GetAllContacts();

    [OperationContract]
    [WebInvoke(UriTemplate = "/{id}", Method = "PUT")]
    void UpdateProduct(string id, Person person);

    [OperationContract]
    [WebInvoke(UriTemplate = "/{id}", Method = "DELETE")]
    void DeleteProduct(string id);

    [OperationContract]
    [WebInvoke(UriTemplate = "UploadFile")]
    void UploadFile(Stream stream); 
}

// Use a data contract as illustrated in the sample below to add composite types to service operations.
 [DataContract(Namespace = "")]
public class Person
{
    [DataMember]
    public string PersonId { get; set; }

    [DataMember]
    public string PersonName { get; set; }

}

Service Implementation : 
public class Service1 : IService1
    {
        public Person GetContact(string PID)
        {
            return new Person(){PersonId=PID, PersonName=PID+".Name"};
        }

        public void SaveContact(Person person)
        {
            int a = 0;
        }

        public void UpdateProduct(string id, Person person)
        {
            int b = 0;
        }

        public List<Person> GetAllContacts()
        {
            List<Person> lstPerson = new List<Person>();
            for (int i = 0; i < 10; i++)
            {
                Person p = new Person();
                p.PersonId = i.ToString();
                p.PersonName = i + "Person";
                lstPerson.Add(p);
            }
            return lstPerson;
        }

        public void DeleteProduct(string id)
        {
            int c = 0;
        }

        public void UploadFile( System.IO.Stream stream)
        {
            object obj = stream;
        }
    }

Call Rest service using WebRequest :

class Program
    {
        static void Main(string[] args)
        {
            new Program().GetContacts();
            //new Program().AddContacts();
            //new Program().Update();
            //new Program().Delete();
        }

        public void GetContacts()
        {
            WebRequest req = WebRequest.Create(@"http://localhost:60517/Service1.svc/");

            req.Method = "GET";

            HttpWebResponse resp = req.GetResponse() as HttpWebResponse;
            if (resp.StatusCode == HttpStatusCode.OK)
            {
                using (Stream respStream = resp.GetResponseStream())
                {
                    StreamReader reader = new StreamReader(respStream, Encoding.UTF8);
                    Console.WriteLine(reader.ReadToEnd());
                }
            }
            else
            {
                Console.WriteLine(string.Format("Status Code: {0}, Status Description: {1}", resp.StatusCode, resp.StatusDescription));
            }
            Console.Read();
        }

        public void AddContacts()
        {
            WebRequest req = WebRequest.Create(@"http://localhost:60517/Service1.svc/create");

            req.Method = "POST";
            req.ContentType = @"application/xml; charset=utf-8";
            WriteProductXml(req, "11", "Asif");

            HttpWebResponse resp = req.GetResponse() as HttpWebResponse;
            Console.WriteLine(string.Format("Status Code: {0}, Status Description: {1}", resp.StatusCode, resp.StatusDescription));
            Console.Read();
        }

        public static void WriteProductXml(WebRequest req, string name, string description)
        {
            StringBuilder builder = new StringBuilder();
            builder.AppendLine("<Person>");
            builder.AppendLine("<PersonId>" + description + "</PersonId>");
            builder.AppendLine("<PersonName>" + name + "</PersonName>");
            builder.AppendLine("</Person>");

            req.ContentLength = Encoding.UTF8.GetByteCount(builder.ToString());

            using (Stream stream = req.GetRequestStream())
            {
                stream.Write(Encoding.UTF8.GetBytes(builder.ToString()), 0, Encoding.UTF8.GetByteCount(builder.ToString()));
            }
        }

        public void Update()
        {
            WebRequest req = WebRequest.Create(@"http://localhost:60517/Service1.svc/1");

            req.Method = "PUT";
            req.ContentType = @"application/xml; charset=utf-8";
            WriteProductXmlUpdate(req, "11", "Asif");

            HttpWebResponse resp = req.GetResponse() as HttpWebResponse;
            Console.WriteLine(string.Format("Status Code: {0}, Status Description: {1}", resp.StatusCode, resp.StatusDescription));
            Console.Read();
        }

        public static void WriteProductXmlUpdate(WebRequest req, string name, string description)
        {
            StringBuilder builder = new StringBuilder();
            builder.AppendLine("<Person>");
            builder.AppendLine("<PersonId>" + description + "</PersonId>");
            builder.AppendLine("<PersonName>" + name + "</PersonName>");
            builder.AppendLine("</Person>");

            req.ContentLength = Encoding.UTF8.GetByteCount(builder.ToString());

            using (Stream stream = req.GetRequestStream())
            {
                stream.Write(Encoding.UTF8.GetBytes(builder.ToString()), 0, Encoding.UTF8.GetByteCount(builder.ToString()));
            }
        }

        public void Delete()
        {
            WebRequest req = WebRequest.Create(@"http://localhost:60517/Service1.svc/1");

            req.Method = "DELETE";

            HttpWebResponse resp = req.GetResponse() as HttpWebResponse;
            Console.WriteLine(string.Format("Status Code: {0}, Status Description: {1}", resp.StatusCode, resp.StatusDescription));
            Console.Read();
        }

    } 
```

# mysql - mysql ERROR 1071 (Specified key was too long; max key length is 1000 bytes) in simple dump-import setting

> ID：10873870
> 
> 赞同：2
> 
> 时间：2012-06-03T20:52:12.950
> 
> 标签：mysql, mysql-error-1071

在服务器 1 上转储 mysql 数据库

```
$ mysql --version
mysql  Ver 14.14 Distrib 5.1.54, for debian-linux-gnu (x86_64) using readline 6.2
$ mysqldump -u root -p db > db.sql 
```

在服务器 2 上导入

```
$ mysql --version
mysql  Ver 14.12 Distrib 5.0.95, for unknown-linux-gnu (x86_64) using readline 5.1
$ mysql -u root -p db < db.sql
ERROR 1071 (42000) at line 807: Specified key was too long; max key length is 1000 bytes 
```

我知道关于这个错误有很多问题和答案，但它仍然让我感到困惑。

会不会是版本问题？我怀疑没有。

如果我使用 --force 选项运行它，它会变得更加奇怪：

```
ERROR 1071 (42000) at line 807: Specified key was too long; max key length is 1000 bytes
ERROR 1146 (42S02) at line 847: Table 'db.users' doesn't exist
ERROR 1146 (42S02) at line 848: Table 'db.users' doesn't exist
ERROR 1146 (42S02) at line 849: Table 'db.users' doesn't exist
ERROR 1146 (42S02) at line 850: Table 'db.users' doesn't exist 
```

到底是怎么回事？

我的意思是除了解决这个问题之外，我还想了解哪些设置会影响简单的转储导入操作，以及为什么这些设置不能在我的转储文件中明确显示并设置为导入。

我更喜欢不必调试实际错误，这必须在高层次上解决。

更新：解决方案，弗雷德里克为我指出了正确的方向。基本上我的转储试图用 INNODB 引擎设置 db，但是服务器 2 上的 mysql 在 /etc/my.cnf

```
[mysqld]
skip-innodb 
```

通过简单地删除此选项并重新启动 mysqld，我的导入运行没有呱呱叫。我很伤心这样一个简单的事情，比如一个不可用的引擎不值得警告或错误，而不是因为默默地退回到 myISAM 而导致的密钥长度问题。唔。那么是时候切换到 posgresql 了吗？蒙哥？:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T21:29:18.653

听起来 innodb 在第二台机器上被禁用，所以 mysql 默默地回退到具有不同限制的 myisam：每个键 1000 字节而不是 3500

上次我看到这样的事情是因为配置问题：mysql 无法在启动时设置 innodb，因此它禁用了 innodb。检查你的 mysql 错误日志，它应该标记在启动过程中遇到的任何问题。例如，如果`innodb_log_file_size`设置与日志文件的大小不匹配（`ib_logfile0`, `ib_logfile1`, ...） ，innodb 将拒绝初始化

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-06-13T15:46:21.740

这对我有用。

```
mysql -u USERNAME -p

use DATABASENAME;

set global innodb_large_prefix=on;
set global innodb_file_format=Barracuda;
set global innodb_file_per_table=true; 
```

[错误：“#1071 – 指定的密钥太长；导入 mysql db 时最大密钥长度为 767 字节](https://hungnhotblog.wordpress.com/2016/10/06/error-1071-specified-key-was-too-long-max-key-length-is-767-bytes-when-import-mysql-db/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T11:44:37.140

此外，如果您的系统是 64 位并且您从 yum 运行 MySQL（存储库默认），当您尝试从其他系统恢复数据库时会看到此错误。我不知道为什么“yum install mysql mysql-devel mysql-server”，它们只是以 32 位运行。

所以，在这种情况下，请从 Percona 或 Marina 安装和使用 MySQL（当然是 64 位版本）

# apache - Mod-rewrite 的多条规则

> ID：10873871
> 
> 赞同：0
> 
> 时间：2012-06-03T20:52:34.660
> 
> 标签：apache

我试图了解 Mod-rewrite 规则是如何工作的。

我现在有这个，第一条规则有效，第二条规则无效。这里的解决方案是什么？

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f  
RewriteRule ^([^/\.]+)/?$ ?page=project&name=$1 [NC,L]
RewriteRule ^([^/\.]+)/?$ index.php?category=$1 [NC,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:55:33.263

您的第一条规则中有一个`L`标志，这意味着“最后一条规则，停止重写并且不评估任何其他规则”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-30T15:01:39.100

由于两个 rewriteRules 中的正则表达式模式相同，第二条规则不起作用。所以规则 1 将首先执行跳过下面的其他类似规则。

为了避免这种混淆，您可以简单地更改第二条规则的**路径名**和**模式**。

```
 RewriteRule ^path2/([^/.]+)/?$ 
```

这接受以下格式的路径名：

```
 /path2/foo 
```

**改写**

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f  
RewriteRule ^([^/\.]+)/?$ ?page=project&name=$1 [NC,L]
RewriteRule ^path2/([^/\.]+)/?$ index.php?category=$1 [NC,L] 
```

# ios - 从未调用过 iOS 设备令牌回调

> ID：10873877
> 
> 赞同：2
> 
> 时间：2012-06-03T20:53:02.977
> 
> 标签：ios, xcode

尝试在我的应用程序中提取设备令牌时，我感到非常难过。到目前为止，我有

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    //register for push notifications
    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)]; 
```

接着

```
-(void)application:(UIApplication *)app didRegisterForRemoteNotificationsWith:DeviceToken:(NSData *)deviceToken 
{
    NSString *str = [deviceToken description]; 
    NSLog(@"%@", str); 
}

- (void)application:(UIApplication*)application didFailToRegisterForRemoteNotificationsWithError:(NSError*)error
{
    NSLog(@"Failed to get token, error: %@", error);
} 
```

这是交易。

我的 iOS 模拟器：我明白了

```
 Failed to get token, error: Error Domain=NSCocoaErrorDomain Code=3010 "remote notifications are not supported in the simulator" UserInfo=0x5813d20 {NSLocalizedDescription=remote notifications are not supported in the simulator} 
```

正如预期的那样。

在我运行 iOS 4.2 的第二代 iPod Touch 上，从来没有调用任何回调。我的同事运行 iOS 5.1.1 的 iPhone 4s 也是如此

最后，在运行 iOS.5.1.1 的另一位同事 iPhone 4 上，似乎返回设备令牌是“com.apple.mobileconfig”......这很奇怪。

我已验证我的设备上的应用程序已启用通知。我还验证了我的应用标识符包在 xCode 中的设置是否正确。

**编辑：**我不知道发生了什么，但是，在发布这个帖子几天后，我将 iPhone 4 插入我的 mac，设备令牌回调刚刚开始在调试模式下工作，然后也在其他人的设备上工作。我对配置文件进行了一些更改（必须添加新设备的 UDID 等），这样可能会出现一些故障。不太确定。

**EDIT2：**在 didRegister 回调中似乎有一个额外的冒号，就在`DeviceToken`...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T21:07:12.107

来自[技术说明 TN2265 故障排除推送通知](http://developer.apple.com/library/ios/technotes/tn2265/_index.html#//apple_ref/doc/uid/DTS40010376-CH1-TNTAG21)（强调我的）：

> 没有委托回调
> 
> 当安装第一个支持推送的应用程序时，iOS 或 Mac OS X 会尝试与系统上所有支持推送的应用程序共享的推送服务建立持久的网络连接。**如果既没有委托回调`application:didRegisterForRemoteNotificationsWithDeviceToken:`也没有`application:didFailToRegisterForRemoteNotificationsWithError:`调用，则表示该连接尚未建立。**
> 
> **这不一定是错误情况。**该系统可能根本没有互联网连接，因为它超出了任何手机信号塔或 Wi-Fi 接入点的范围，或者它可能处于飞行模式。您的应用程序不应将此视为错误，而应正常继续，仅禁用依赖于推送通知的功能。
> 
> 请记住，网络可用性可能会经常变化。一旦与推送服务的持久连接成功，将调用前面提到的应用程序委托方法之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:29:05.353

```
-(void)application:(UIApplication *)app didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken 
```

不是

```
-(void)application:(UIApplication *)app didRegisterForRemoteNotificationsWith:DeviceToken:(NSData *)deviceToken 
```

注意第二个不正确的版本中的额外冒号......愚蠢的错误。

故事寓意：小心复制和粘贴:)

# android - Android：检索我自己的联系信息，例如显示名称、电话号码、电子邮件地址和其他个人数据

> ID：10873879
> 
> 赞同：1
> 
> 时间：2012-06-03T20:53:20.527
> 
> 标签：android, local, profile

我正在尝试访问我的 OWN 联系信息（我的本地个人资料），例如显示名称、电话号码、电子邮件地址和其他个人数据（地址、IM、网站、笔记等）。我没有尝试使用联系人选择器等访问可用的联系人信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:47:59.553

在 ICS 之前，Android 平台不支持此功能。不过有一些方法：

1.  获取设备谷歌帐户电子邮件并检查该帐户的设备。如果联系人包含具有该电子邮件地址的帐户，则表示该帐户是设备所有者帐户。

2.  如果您使用 ICS，**ContactsContract.Profile**可以为您获取所有者配置文件数据。

3.  如果您的 sim 卡支持，请从电话管理器获取 sim 卡的 GSM 号码，并在联系人中查找该号码以获取设备所有者的联系方式。

# git - 如何在 git add --patch 中使用 --color-words？

> ID：10873882
> 
> 赞同：61
> 
> 时间：2012-06-03T20:54:17.410
> 
> 标签：git

比较文件时，我更喜欢使用`git diff --color-words`. 有没有办法在使用`git add --patch`or时使它成为差异的默认格式`git add --interactive`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-06-14T16:19:40.367

基于 VonC 所说的：

从 Git 2.9 开始，您可以在以下期间使用此命令为单词着色`add --patch`：

```
git -c interactive.diffFilter="git diff --color-words" add -p 
```

这会将调用的`interactive.diffFilter`变量设置为，`add -p`而不影响进一步的调用。对我来说这是理想的，因为我通常想`add -p`正常运行，但有时想用`--color-words`.

您可以轻松地为此命令添加别名，如下所示：

```
git config --global alias.addcw '-c interactive.diffFilter="git diff --color-words" add -p' 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-10-01T21:44:35.987

从[VonC 的回答](https://stackoverflow.com/a/36437292/177116)中得到启发。以下是使用`--interactive`git 2.9 中引入的选项的详细步骤。

将[diff-highlight](https://github.com/git/git/tree/master/contrib/diff-highlight)添加到您的 PATH 中。

在 Ubuntu 上，`diff-highlight`带有 git，可以在`/usr/share/git/diff-highlight/diff-highlight`.

否则，您可以下载并手动设置。

```
cd ~/bin
curl -LO "https://raw.githubusercontent.com/git/git/master/contrib/diff-highlight/diff-highlight"
chmod u+x diff-highlight 
```

如有必要，重新启动您的 shell。

然后将 Git 配置为在分页器中显示差异时过滤您的差异：

```
git config --global pager.log 'diff-highlight | less'
git config --global pager.show 'diff-highlight | less'
git config --global pager.diff 'diff-highlight | less'
git config --global interactive.diffFilter diff-highlight 
```

这将额外强调一行的变化部分，这几乎与`--word-diff`.

好处是你在每个地方都能得到单词差异，比如`git log --patch`or `git add -p`。

[![在 git log --patch 中演示 diff-highlight](../Images/08c5238d25cf08a485c14deccb2e827f.png)](https://i.stack.imgur.com/5gcoP.png)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-09-06T09:56:06.917

I recently solved this issue, but it requires modifying a Perl script in git. That's easy and requires no special skill, however.

This solution requires that your git configuration use colorization for screen output, because that's the only circumstance under which git will show a word-based diff.

1.  Copy `git-add--interactive` from your installation to somewhere in your `PATH` environment variable and rename it `git-add--interactive-words`.
2.  Edit a line about half way down to change*

```
@colored = run_cmd_pipe("git", @diff_cmd, qw(--color --), $path); 
```

to

```
@colored = run_cmd_pipe("git", @diff_cmd, qw(--color --color-words --), $path); 
```

3.  You can now run `git add-interactive--words` to do the equivalent of `git add --interactive` with colorized word-based diff.
4.  However, combining `git add --patch` with that is awkward because you need to pass the new script the right parameters. Fortunately, you can create an alias to the magic words in your `.gitconfig`:

```
[alias]
iaddpw = add--interactive-words --patch=stage -- 
```

which means `git iaddpw` runs the equivalent of `git add --interactive --patch` with colorized word-based diff.

* * *

*- **For Git 2.18, this command is:**

```
my @display_cmd = ("git", @diff_cmd, qw(--color --), $path); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-04-05T21:21:54.853

使用 git 2.9（2016 年 6 月），您将有一个新选项：`interactive.diffFilter`.

请参阅[Jeff King (](https://github.com/peff) [)的](https://github.com/peff)[提交 0114384](https://github.com/git/git/commit/01143847dbf4fbf27268650f3ace16eac03b3130)（2016 年 2 月 27 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 2052c52](https://github.com/git/git/commit/2052c52d9a16fe1d9a091dd0b53ab1806a663999))^(中，2016 年 4 月 3 日）)[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

> ## `add --interactive`：允许自定义差异突出显示程序

> add--interactive 的补丁块选择器知道如何向 git 询问彩色差异，并将它们与我们应用的非彩色差异相关联。但是对于使用像 contrib 的 diff-highlight 这样的差异过滤器工具的人来说，没有任何方法可以看到他们的正常突出显示。
> 
> 此补丁允许用户定义任意 shell 命令来通过管道传输彩色差异。确切的输出应该无关紧要（因为我们只是将结果显示给人类），只要它与原始 diff 行兼容（因此大块分割也可以分割彩色版本）。

然后，您可以将该差异通过管道传输到`diff --color-words`.

正如[Andrew Dufresne](https://stackoverflow.com/users/177116/andrew-dufresne)[所说](https://stackoverflow.com/questions/10873882/how-to-use-color-words-with-git-add-patch/36437292?noredirect=1#comment66906299_36437292)，[GitHub 博客文章](https://github.com/blog/2188-git-2-9-has-been-released)指的是 contrib脚本：[`contrib/diff-highlight`](https://github.com/git/git/tree/master/contrib/diff-highlight)

> 您可以使用“ `--color-words`”仅突出显示行的更改部分。然而，这对于代码来说通常很难阅读，因为它会丢失行结构，并且最终会得到格式奇怪的位。
> 
> 相反，此脚本对面向行的差异进行后处理，找到成对的行，并突出显示不同的段。

结果特别强调了行的更改部分：

[![不同的颜色](../Images/c41e4ff902c8af2812fff239e39fd822.png)](https://i.stack.imgur.com/4oBAY.png)

关于这些差异，“ `diff-highlight`”过滤器（in `contrib/`）学会了`git log --graph`更好地理解“”输出。

请参阅[Jeff King (](https://github.com/peff) [)的](https://github.com/peff)[提交 4551fbb](https://github.com/git/git/commit/4551fbba141e0b2e4d16830f76f784e9c960bdf8)、[提交 009a81e](https://github.com/git/git/commit/009a81ed978e5dc81767cf1be6dc4ea38c112801)、[提交 fbcf99e](https://github.com/git/git/commit/fbcf99e4acd666e1c4ef4304b53d96caaf0ae3f8)、[提交 7ce2f4c](https://github.com/git/git/commit/7ce2f4ca0e35a987fb29d11ae06438a93fd48873)、[提交 e28ae50](https://github.com/git/git/commit/e28ae5072f633d77c65817db7b3aeb07d531a8d9)、[提交 53ab9f0](https://github.com/git/git/commit/53ab9f0e3d0ff2bb5803059da3526ef6eda8ce65)、[提交 5013acc](https://github.com/git/git/commit/5013acc27839bf04691c13dd82f5add2ca40eb4e)（2018 年 3 月 21 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([d19e556 提交中](https://github.com/git/git/commit/d19e556529f2e0ac64e3bb434d30c33433df9ffd))^(，2018 年 4 月 10 日）)[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

[`diff-highlight`在“ ：`--graph`按缩进](https://github.com/git/git/commit/4551fbba141e0b2e4d16830f76f784e9c960bdf8)检测”中查看更多信息

* * *

注意：在 Git 2.17（Q2 2018）之前，“ `interactive.diffFilter`”使用的“ `git add -i`”必须保留其输入和输出之间的一一对应关系，但并未强制执行并导致最终用户混淆。

我们现在至少要确保过滤后的结果与其输入的行数相同，以检测损坏的过滤器。

请参阅[提交 42f7d45](https://github.com/git/git/commit/42f7d45428e260acf535ba0d55ecc91ee81e21da)，[提交 af3570e](https://github.com/git/git/commit/af3570ed6ca97605d62ebe1836fc893014ae844b)（2018 年 3 月 3 日），由[Jeff King ( `peff`)](https://github.com/peff)提交。
^(（由[Junio C Hamano 合并 -- `gitster`--](https://github.com/gitster)在[提交 c5e2df0](https://github.com/git/git/commit/c5e2df04ac9dd731c729c6159d58c2288d794858)中，2018 年 3 月 14 日）)

* * *

在 Git 2.30（2021 年第一季度）中，“ [`git add -i`](https://github.com/git/git/blob/e0d25686e33396621c484ce5c936c9e49874d8d8/Documentation/git-add.txt#L82)” ^(（[man](https://git-scm.com/docs/git-add#Documentation/git-add.txt--i)）)未能遵守配置为显示补丁的自定义颜色，这已得到纠正。

请参阅[提交 96386fa](https://github.com/git/git/commit/96386faa03d5a714122b4a39e7257d278e232469)、[提交 890b68b](https://github.com/git/git/commit/890b68b2637fcadb4b1017ecf50248d616c96b8b)、[提交 0cb8939](https://github.com/git/git/commit/0cb8939fb6795c9f94f9184935b6a83aebdfc47a)、[提交 afae3cb](https://github.com/git/git/commit/afae3cb6b036e8fb218e5699c8ad3c18b6d4b992)、[提交 6681e36](https://github.com/git/git/commit/6681e3603216f0e279fea467a0e6d829fffb82a5)（2020 年 11 月 16 日）、[提交 25d9e5c](https://github.com/git/git/commit/25d9e5ccba3fbcdb4109b6b2b2a7e721b0af6d77)、[提交 c62cd17](https://github.com/git/git/commit/c62cd1720f5c9cf57955a78576ba7e862b7352e6)、[提交 6f1a5ca](https://github.com/git/git/commit/6f1a5caa0b69278bc7eb79d3474a1e881bd0c663)、[提交 decc9ee](https://github.com/git/git/commit/decc9ee4eaf2c33c28e2958439d276904a2ce279)（2020 年 11 月 11 日）和[提交 cb581b1](https://github.com/git/git/commit/cb581b16ef947a00f8e83f17c9fbe5b5aeed1d65) （2020 年 11 月 2日[提交 d0204](https://github.com/git/git/commit/d34e4502fa540ed0654df7dd75b3689c48015f1a)）[约翰内斯辛德林（`dscho`）](https://github.com/dscho)。
^(（由[Junio C Hamano 合并 -- `gitster`--](https://github.com/gitster)在[提交 e0d2568](https://github.com/git/git/commit/e0d25686e33396621c484ce5c936c9e49874d8d8)中，2020 年 12 月 8 日）)

> ## [`add -p`](https://github.com/git/git/commit/890b68b2637fcadb4b1017ecf50248d616c96b8b): 更`color.diff.context`喜欢`color.diff.plain`
> 
> ^(签字人：约翰内斯·辛德林)

> Git 的差异机制允许用户覆盖在差异中使用的颜色，甚至是纯色的上下文行。从[8dbf3eb6850](https://github.com/git/git/commit/8dbf3eb6850d6d9495ace908625fe50888b111e6) ( [`diff.h`](https://github.com/git/git/blob/890b68b2637fcadb4b1017ecf50248d616c96b8b/diff.h): rename `DIFF_PLAIN`color slot to `DIFF_CONTEXT,`2015-05-27, Git v2.4.5) 开始，配置设置的首选名称是`color.diff.context`，尽管 Git 仍然允许`color.diff.plain`.
> 
> 在^( ^([man](https://git-scm.com/docs/git-add#Documentation/git-add.txt--p)) ^)的上下文中，这个逻辑有点难以复制：顺序读取所有配置值，如果它看到*任何*or ，它就会接受新颜色。 但是，Perl 版本的^( ^([man](https://git-scm.com/docs/git-add#Documentation/git-add.txt--p)) ^)需要经过^( ^([man](https://git-scm.com/docs/git-config#Documentation/git-config.txt---get-colornamedefault)) ^)，它只允许指定一个键。^( ^([man](https://git-scm.com/docs/git-add#Documentation/git-add.txt--p)) ^) 的内置版本也是如此，它必须通过。[`git add -p`](https://github.com/git/git/blob/890b68b2637fcadb4b1017ecf50248d616c96b8b/Documentation/git-add.txt#L89)`git_diff_basic_config()` *`color.diff.context``color.diff.plain`
> [`git add -p`](https://github.com/git/git/blob/890b68b2637fcadb4b1017ecf50248d616c96b8b/Documentation/git-add.txt#L89)[`git config --get-color`](https://github.com/git/git/blob/890b68b2637fcadb4b1017ecf50248d616c96b8b/Documentation/git-config.txt#L241)
> [`git add -p`](https://github.com/git/git/blob/890b68b2637fcadb4b1017ecf50248d616c96b8b/Documentation/git-add.txt#L89)`repo_config_get_value()`*
> 
>  *我们可以在这里做的最好的事情是寻找`.context`，如果没有找到，回退到寻找`.plain`，如果仍然没有找到，回退到硬编码的默认值（在这种情况下，它只是空字符串，作为上下文行通常不带颜色渲染）。
> 
> 当使用两个配置名称时，这仍然会导致不一致：初始差异将由差异机制着色。^(一旦被用户编辑，一个大块必须由() ^([man](https://git-scm.com/docs/git-add#Documentation/git-add.txt--p)) ^)
> 重新着色，然后使用其他设置为上下文行着色。[`git add -p`](https://github.com/git/git/blob/890b68b2637fcadb4b1017ecf50248d616c96b8b/Documentation/git-add.txt#L89)
> 
> 实际上，这并不是*那么*糟糕。（^([man](https://git-scm.com/docs/git-config))^）手册在以下内容中说明了这一点^：[`git config`](https://github.com/git/git/blob/890b68b2637fcadb4b1017ecf50248d616c96b8b/Documentation/git-config.txt)`color.diff.<slot>`
> 
> ```
> `context` (context text - `plain` is a historical synonym) 
> ```
> 
> 因此，我们应该假设用户使用其中一个名称，但不能同时使用两个名称。
> 此外，编辑后查看大块的情况相对不常见，因为默认情况下它会立即上演。*

 ** * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-09-08T00:49:51.263

## 解决方案

用作`diff-highlight | less -FRX --tabs=4`您的`diffFilter`：

```
git -c interactive.diffFilter="diff-highlight | less -FRX --tabs=4" add --patch 
```

更多信息`diff-highlight`：[来源](https://github.com/git/git/tree/master/contrib/diff-highlight)，[快速入门](https://michaelheap.com/git-and-diff-highlight/)

## 家酿

如果您使用的是 Homebrew (OS X)，您可以将以下内容放入您的`.gitconfig`（使用已安装的`diff-highlight`）：

```
 [interactive]
        diffFilter = "$(git --exec-path | sed 's/libexec/share/')/contrib/diff-highlight/diff-highlight | less -FRX --tabs=4" 
```

## 1-1 输入输出对应关系

从 git 2.17 开始，单词 diff 解决方案必须保持输入和输出行之间的 1-1 对应关系，以避免：

```
$ git -c interactive.diffFilter="git diff --word-diff --color" add --patch
fatal: mismatched output from interactive.diffFilter
hint: Your filter must maintain a one-to-one correspondence
hint: between its input and output lines. 
```

`diff-so-fancy`现在支持这个（从 v1.4.0 开始），因为[https://github.com/so-fancy/diff-so-fancy/issues/35](https://github.com/so-fancy/diff-so-fancy/issues/35)已经关闭。看到[这个](https://github.com/so-fancy/diff-so-fancy/issues/35#issuecomment-776870877)。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-12-11T12:01:56.493

如前所述，添加`diff-highlight`到`interactive.diffFilter`配置键是最简单的选项（从 Git 2.9 开始）。下面的命令可以在 Debian/Ubuntu 上完成任务，而无需复制脚本、更改权限或修改 $PATH：

```
git config interactive.diffFilter "perl /usr/share/doc/git/contrib/diff-highlight/diff-highlight" 
```

喜欢`git -c interactive.diffFilter="git diff --color-words" add -p`或`git config interactive.diffFilter "git diff --color-words"`不能正常工作的事情：`add -p`总是不断建议第一个修改的文件。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-01-06T12:31:24.003

这个工具做得很好[https://github.com/mookid/diffr](https://github.com/mookid/diffr)

```
[core]
    pager = diffr | less -R
[interactive]
    diffFilter = diffr 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-10-01T04:22:51.860

这也可以通过[delta](https://github.com/dandavison/delta)实现：

```
[interactive]
    diffFilter = delta --color-only --features=interactive 
```

并通过[diff-so-fancy](https://github.com/so-fancy/diff-so-fancy)：

```
[interactive]
    diffFilter = diff-so-fancy --patch 
```

* * *

## 回答 #9

> 赞同：-5
> 
> 时间：2012-06-04T08:37:31.540

在你的 $(HOME)/.gitconfig 文件中添加这个

```
[color]
        diff = auto
        interactive = auto 
```

这应该做。*

# c# - 使用 C# 将文件写入“Sector 0”？

> ID：10873883
> 
> 赞同：7
> 
> 时间：2012-06-03T20:54:51.623
> 
> 标签：c#, bootloader

> **可能重复：**
> [如何将已编译的引导扇区放到 U 盘或磁盘上？](https://stackoverflow.com/questions/1894843/how-can-i-put-a-compiled-boot-sector-onto-a-usb-stick-or-disk)

我正忙于创建一个基本的引导加载程序，它适用于需要在没有操作系统的情况下运行的软件

我还想编写一个小型控制台应用程序，将已编译的引导加载程序移动到我的 SD 卡中。

我遇到的问题是将特定的引导加载程序写入 SD 卡上的 Sector0。SD 卡插入我笔记本电脑上的 SD 卡插槽。

我可以使用 C# 控制台应用程序完成此操作吗？如果没有，在 SD 卡上获取引导加载程序有哪些选择？

**更新：**引导加载程序是用 C 编写的，我希望将引导加载程序传输到 C# 的控制台应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T21:16:05.230

您可以使用低级 IO API 将文件写入特定扇区。查看[WriteFile](http://msdn.microsoft.com/en-us/library/aa365747%28v=vs.85%29)文档以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T21:10:19.520

[一个更简单的想法是使用引导加载程序（以及可选的分区表和/或文件系统）创建映像文件，并使用dd](http://www.chrysocome.net/dd)或[Image Writer](https://launchpad.net/win32-image-writer/)等外部工具将映像实际写入 SD 卡。

# java - 使用 JSF 从 JAR 文件中加载属性文件

> ID：10873885
> 
> 赞同：2
> 
> 时间：2012-06-03T20:55:20.697
> 
> 标签：java, jsf

这是我项目的Maven结构

```
应用程序
  > 通用模块
  > webapp 模块
  > 批处理模块
 pom.xml

```

`common-module`暴露一个类`Version`。webapp 和批处理模块都使用此类。

该类`Version`有一个独特的静态方法，称为`get`. 它返回项目的全局版本。

全局版本存储在属性文件中。当`get`从批处理模块（一个独立的 java 应用程序）调用时，属性文件被成功加载。

在 webapp 中，情况有所不同。我创建了一个托管 bean `VersionBean`，它允许任何 JSF 页面调用该`get`方法。每当我使用以下其中一项

```
FacesContext.getCurrentInstance().getExternalContext()

FacesContext.getCurrentInstance().getExternalContext().getContext()

Thread.currentThread().getClassLoader() 
```

我永远找不到properties.file。

如何从托管 bean 加载位于 jar 文件中的属性文件 (getResourceAsStream)？

**编辑**
这是我根据@BalusC 和@eljunior 的建议提出的解决方案

**版本Bean.java**

```
@ManagedBean(eager=true)
@ApplicationScoped
public class VersionBean {
    private String version;
    @PostConstruct
    public void init(){
        version = Version.get();
    }
} 
```

**版本.java**

```
public class Version {
    public static String get() {
        InputStream is = Version.class.getResourceAsStream("/version.properties");

        // Read InputStream and return version string ...
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-03T23:35:06.033

我不确定 Maven 如何构建 WAR 以及您的属性文件的*实际*位置，但我至少可以知道如何`ExternalContext#getResourceAsStream()`， `Thread#getContextClassLoader()`并且`Class#getClassLoader()`所有工作方式都不同。

1.  **ExternalContext#getResourceAsStream()**在 Web 内容文件夹（WAR和文件夹也驻留的位置）和Web 应用中部署的任何 JAR 文件的文件夹中
    扫描`ExternalContext#getResourceAsStream()`Web 应用资源。提供的路径始终与这些根文件夹相关，并且应以.`/WEB-INF``/META-INF``/META-INF/resources``/WEB-INF/lib``/`

    ```
    InputStream input = externalContext
        .getResourceAsStream("/WEB-INF/version.properties"); 
    ```

2.  **Thread#getContextClassLoader()**
    对类路径 的`Thread#getContextClassLoader()`“根”进行操作。这涵盖了 webapp、appserver 和 JVM 的类路径所涵盖的所有文件夹。提供的路径总是相对于类路径根目录，**不能**以`/`. 请注意，当属性文件包含在包中时，您应该将包结构视为带有`/`分隔符的文件系统路径。下面的示例假定它在 package 中`com.example.version`。

    ```
    InputStream input = Thread.currentThread().getContextClassLoader()
        .getResourceAsStream("com/example/version/version.properties"); 
    ```

3.  **Class#getClassLoader()**相对于类本身的位置进行操作
    。`Class#getClassLoader()`提供的路径可以是相对的或绝对的。如果是相对的，那么它是相对于类本身的位置的。如果是绝对的，那么它对于类路径根是绝对的。请注意，这不一定可以访问类路径涵盖的所有其他文件夹。下面的示例假定属性文件与`VersionBean`类位于同一包中：

    ```
    InputStream input = VersionBean.class
        .getResourceAsStream("version.properties"); 
    ```

    或者当它在另一个包中时，例如`com.example.other`（注意前导`/`）：

    ```
    InputStream input = VersionBean.class
        .getResourceAsStream("/com/example/other/version.properties"); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T21:56:30.420

我会将属性文件的加载委托给该类的同一个类加载器`Version`：在 get 方法中，使用`Version.class.getResourceAsStream("yourFile.properties");`.

这应该可以在可以加载 Version 类的任何地方工作，因此它也可以在 webapp 中工作（当然，前提是属性文件实际上*是*在*common-module* jar 文件中:)。

然后您的 VersionBean 可能是一个应用程序范围的 bean，它在初始化应用程序时刚刚加载了属性，如下所示：

```
@ManagedBean(eager=true)
@ApplicationScoped
public class VersionBean {
    private String version;
    @PostConstruct
    public void init(){
        version = Version.get();
    }
} 
```

请注意，如果您使用的是 2.0 之前的 JSF 版本，则必须在 中配置托管 bean，`faces-config.xml`而不是使用注解`@ManagedBean`和`@ApplicationScoped`.

# ruby-on-rails - 生成模型时指定限制的语法

> ID：10873886
> 
> 赞同：21
> 
> 时间：2012-06-03T20:55:21.587
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

在rails中，我们可以像这样生成模型

```
rails generate model post title:string body:text published:boolean 
```

根据[rails指南，该命令具有以下语法](http://guides.rubyonrails.org/command_line.html#rails-generate)

```
$ rails generate model
Usage: rails generate model NAME [field:type field:type] [options] 
```

我想知道是否可以为每个字段指定限制/长度作为的一部分`[options]`？此外，`[options]`参数的用途是什么？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-01T04:36:09.173

您可以使用大括号提供限制：

```
rails g model Session session_id:string{40} user_agent:string{200} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-20T16:53:11.890

在rails 5中我不得不使用`rails g model User name:"string{16}"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-10T16:51:36.750

您需要在花括号中给出大小，这将转化为限制

```
rails generate model MyModel some_id:integer{20} some_name:string{255}
some_text:text some_int:integer{1} some_deci:decimal{10,2} 
```

**您还可以使用其他数据类型，例如布尔、日期、时间、日期时间、浮点数、二进制等。**

选项类似于“您是否还需要运行迁移”。

# c++ - Dart 编译错误 - 代码库中奇怪的代码片段

> ID：10873897
> 
> 赞同：0
> 
> 时间：2012-06-03T20:57:12.497
> 
> 标签：c++, c++11, fedora, dart

我在尝试编译 Dart 最前沿的代码时遇到了这段代码：

```
const uint8_t chars[kCharsLen] = { 1, 2, 127, 128, 192, 0, 255, -1 };
const String& str8 = String::Handle(String::New(chars, kCharsLen));
EXPECT_EQ(kCharsLen, str8.Length());
EXPECT_EQ(1, str8.CharAt(0));
EXPECT_EQ(127, str8.CharAt(2));
EXPECT_EQ(128, str8.CharAt(3));
EXPECT_EQ(0, str8.CharAt(5));
EXPECT_EQ(255, str8.CharAt(6));
EXPECT_EQ(255, str8.CharAt(7)); 
```

对我来说，-1 会尝试分配给 uint8_t 似乎很奇怪。但我不愿意删除它，因为它可能是一个测试，以确保你的编译器支持这个。事实上，我遇到它的原因是因为我的 Fedora 17 虚拟机（gcc 4.7）上的编译器

编译错误：

> 在C ++ 11 [ ] `-1`_`int``const uint8_t``const unsigned char``{ }``-Werror=narrowing`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T03:09:38.170

那不是编译器错误，那是编译器*警告*。您可能正在使用`-Werror`它将所有警告变成错误。

您还可能注意到`EXPECT_EQ(255, str8.CharAt(7));`正在测试 -1 是否为 255。

# text-editor - Sublime Text 2 和 Zen Coding CSS 缩写

> ID：10873898
> 
> 赞同：4
> 
> 时间：2012-06-03T20:57:15.080
> 
> 标签：text-editor, sublimetext2, emmet

我无法在 Sublime Text 2 中使用 Zen Coding CSS。我通过 Package Control 在 Sublime Text 2 上安装了 Zen Coding，我正在尝试使用 css 缩写，但我不能。

如果我在 .css 文件中写“v:v + tab”，我应该得到，`visibility:visible;`而不是得到`v:vertical-align`，

几乎所有的 CSS 缩写都会发生这种情况。

Zen 编码适用于 .html 文件。

我认为问题出在 sublime 本身。我尝试`"tab_completion"`在`false`设置文件中设置为，希望这将禁用 sublime 的自动完成但它不起作用我也尝试设置`auto_complete_commit_on_tab`为`false`，并禁用 Zen 编码和的选项卡完成升华。

任何帮助都感激不尽。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T07:12:18.437

听起来 Sublime Text 2 的内置自动建议正在覆盖您的 Zen Coding 包。

尝试禁用 CSS 特定设置文件中的“auto_complete”选项（在此处查找或创建它*Packages/User/CSS.sublime-settings*）：

```
{
  "auto_complete": false
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T23:34:35.770

这个问题一直让我发疯。我发现的最佳解决方案是从用户设置中的 word_separators 中删除冒号：

"word_separators": "./\()\"'-:,.;<>~!@#$%^&*|+=[]{}`~?"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T10:41:41.607

正如 rkj 所说，内置的 CSS 包覆盖了 Zen Coding。但是，他的解决方案对我不起作用。

相反，我只是删除了原始的 CSS 包。如果你进入 Sublime 的安装目录，然后查看，`Pristine Packages`你会看到 Sublime 预安装的所有原始包。

然后删除文件`CSS.sublime-package`，Zen Coding CSS 缩写应该开始工作了。

# ruby-on-rails - RoR TagLib-Ruby：如何在 DB 中设置 ID3 标签

> ID：10873908
> 
> 赞同：1
> 
> 时间：2012-06-03T20:58:50.263
> 
> 标签：ruby-on-rails, id3, taglib-ruby

感谢您提前提供任何帮助。

我想在我的数据库中设置 id3 标签数据作为我的模型 MasterSong 的属性。具体来说，标题、艺术家和专辑。

```
create_table :master_songs do |t|
  t.integer :user_id
  t.has_attached_file :m_song
 **- t.string :title
 - t.string :artist
 - t.string :album** 
```

在我的模型中，我使用回调在保存对象（master_song）之前设置数据。

```
before_save :set_id3_tags_in_database

def set_id3_tags_in_database
TagLib::MPEG::File.open(self.m_song.path) do |file|
   tag = file.id3v2_tag
   tag.title
   tag.album
   tag.artist
end
  self.update_attributes(:title => tag.title,
  :artist => tag.artist,
  :album => tag.album)
end 
```

我很确定我的语法是问题所在。该对象似乎遇到了错误

```
undefined method `title' for nil:NilClass with an infinite loop 
```

控制器创建动作正常：

```
 def create
   @master_song = current_user.master_songs.build(params[:master_song])

   respond_to do |format|
    if @master_song.save
     format.html { redirect_to @master_song, notice: 'Master song was successfullycreated.' }
   end 
```

我在这里做错了什么？更新：def set_id3_tags z = TagLib::MPEG::File.open(self.m_song.path) do |file| tag = file.id3v2_tag tag.title end self.update_attribute!(:title => z) end

现在得到堆栈级别太深的错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T10:54:53.187

首先，确保这`self.m_song.path`是正确的路径并且那里存在文件。

接下来，以下行：

```
tag = file.id3v2_tag 
```

当文件还没有标签时不创建标签，因此可能返回 nil。将可选参数“create”设置为 true 以自动创建标签：

```
tag = file.id3v2_tag(true) 
```

好的，那么您似乎希望在设置标签数据后保存它。为此，您必须显式调用保存，如下所示（注意块的最后一行）：

```
TagLib::MPEG::File.open(self.m_song.path) do |file|
   tag = file.id3v2_tag(true)
   # set data
   file.save
end 
```

有关更多信息，请参阅此处的文档：[http ://rubydoc.info/gems/taglib-ruby/frames](http://rubydoc.info/gems/taglib-ruby/frames)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T00:21:23.313

好的！所以我做到了，玩了又玩了。

```
def set_id3_tags
z = TagLib::MPEG::File.open(self.m_song.path) do |file|
 unless tag.nil?
  tag = file.id3v2_tag
  self.title = tag.title
  self.album = tag.album
  self.artist = tag.artist

  else
end 
```

结尾

添加 if title.nil? 为我做的。回调很奇怪，但绝对有价值。希望这对其他人有帮助。

# javascript - Jquery Image Hover卡住了

> ID：10873911
> 
> 赞同：0
> 
> 时间：2012-06-03T20:59:09.953
> 
> 标签：javascript, jquery, css

我正在尝试制作 jQuery 悬停图像，但代码无法正常工作，它什么也没显示。我粘贴我的代码来解释，我希望有人可以帮助我......

**画廊.html**

```
<html>
 <head>
 <title>Test</title>
 <link rel="stylesheet" href="style.css" />
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
 <script src="js/default.js"></script>
 </head>
 <body>
 <div class="gallery">
 <ul class="items">
  <ul>
     <li><span class="img_frame"><a href="img/s6300159.jpg"><img src="img/test1.jpg" /></a></span><div class="img_desc"><span>22</span></div></li>
     <li><span class="img_frame"><a href="img/s6300159.jpg"><img src="img/test1.jpg" /></a></span><div class="img_desc"><span>23</span></div></li>
     <li><span class="img_frame"><a href="img/s6300159.jpg"><img src="img/test1.jpg" /></a></span><div class="img_desc"><span>24</span></div></li>
  </ul>
 </ul>
 </div>
</body>
</html> 
```

**样式.css**

```
.gallery {overflow:hidden; width:1000px;}
.gallery .items { margin-bottom:50px; height:320px; }
.gallery .items li { position:relative; float:left;  width:290px; height:180px; margin-right:38px; margin-bottom: 30px; }
 .gallery .items li img { width:277px; height:165px; }

 .img_desc {
position: absolute;
    display: block;
    top: 10px; 
text-shadow: 1px 1px 0 #ffffff;
color: #262626;  
background: url(img/benefits_on.png) repeat;
width: 36px;
right: 5px;
text-align: center;
    }

    .img_frame {
    margin-top:3px;
     padding:1px;
     display:inline-block;
     line-height:0px;
     background:#fff;
     border:1px solid #ccc;
      }

    .img_frame img {
     padding:1px;
     border:4px solid #f2f1f0;
    }
    .img_frame a { display:block; }

    .hover_image { background:url("img/preview_image.png") center center no-repeat; } 
```

**默认.js**

```
<!-- Image hover effect -->
function image_hover(frame){
var link_content = jQuery(frame).find('a[href^=http], a[href*=www], a[href=#], a[href$=html], a[href$=php], a[href$=asp], a[href$=htm], a[href$=shtml], a[href$=aspx]');
var image_content = jQuery(frame).find('a[href$=jpg], a[href$=png], a[href$=gif], a[href$=jpeg]');
var video_content = jQuery(frame).find('a[href*=vimeo], a[href*=youtube], a[href*=swf], a[href*=flv], a[href*=avi], a[href*=mov], a[href*=mpg]');

link_content.addClass("hover_link");
image_content.removeClass("hover_link").addClass("hover_image");
video_content.removeClass("hover_link").addClass("hover_video");

jQuery(frame).find("a > img").hover(
    function() {
        if(!jQuery(this).parent().hasClass("no_hover")){
            jQuery(this).stop().animate({"opacity": ".6"}, "400");
        }
    },
    function() {
        jQuery(this).stop().animate({"opacity": "1"}, "400");
});

jQuery(frame).children("a.no_hover").removeClass("hover_image");
return false;
}

jQuery(function(){

image_hover('.img_frame');
 }); 
```

………………………………………………………………………………

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T21:11:55.267

你想达到什么样的悬停效果？在我的情况下，它向我展示了一些发光的边框或类似的东西，因为它降低了不透明度并且背景正在拉起。`.hover_image`如果这是您想要的，您可能在班级的图像位置上做错了。尝试给该类的背景颜色，例如

```
.hover_image { background:#ff0000 url("img/preview_image.png") center center no-repeat; } 
```

你可能会得到我得到的效果。

# php - 如何获取调用类的参数

> ID：10873913
> 
> 赞同：1
> 
> 时间：2012-06-03T20:59:41.900
> 
> 标签：php, class, object

我有一个类创建另一个类的实例。第二个类是否可以从调用类中检索参数。

例如

```
Class_A {
    protected $myArray = array('item 1', 'item2', 'item3')

    public function __construct()
    {
        $nextClass = new ClassB();
        echo $nextClass->countArrayItems();
    }
}

Class_B {
    public function countArrayItems()
    {
        return count(Class_A->myArray);
    }
}

$newClass = new Class_A; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T21:03:04.087

您可以将对您的`Class_A`实例的引用传递给您的`Class_B`构造函数：

```
Class_A {
    public $myArray = array('item 1', 'item2', 'item3')

    public function __construct()
    {
        $nextClass = new Class_B($this);
        echo $nextClass->countArrayItems();
    }
}

Class_B {
    public function __construct($classA_instance) {
        $this->classA_instance = $classA_instance;
    }
    public function countArrayItems()
    {
        return count($this->classA_instance->myArray);
    }
}

$newClass = new Class_A; 
```

（正如@chris 所说，Class_A->myArray 需要公开）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T21:03:38.610

仅当您将 A 类的实例传递给 B 类时

```
Class_A { 
    protected $myArray = array('item 1', 'item2', 'item3') 

    public function __construct() 
    { 
        $nextClass = new ClassB(); 
        echo $nextClass->countArrayItems($this); 
    } 
} 

Class_B { 
    public function countArrayItems($callingClass) 
    { 
        return count($callingClass->myArray); 
    } 
} 

$newClass = new Class_A; 
```

# c# - Visual C# 和 SQL Server 不能一起正常工作 // 文件已在使用中

> ID：10873919
> 
> 赞同：5
> 
> 时间：2012-06-03T21:00:12.917
> 
> 标签：c#, sql, sql-server-2008, entity-framework-4

在过去的几天里，我终于在研究如何使用 Entity Framework 将我的 C# 应用程序（我正在使用 Visual Studio 2010 Express）连接到我的 SQL Server 2008 R2 数据库，但我完全被卡住了。

当我想在 VS 中添加一个新的数据源时，我只是找到了我的 db 文件的路径，当我最终找到它并尝试选择它时，它会抛出一个错误，显示

> 该文件已被使用。输入新名称或关闭该文件，该文件由另一个应用程序使用

这对我来说听起来像是胡说八道，因为我已经两天没有使用我的数据库文件了。所以经过一番谷歌搜索后，我终于找到了一个解决方案，我进入了 SQL Server 配置管理器并重新启动了我唯一的 SQL Server。

然后我的 DataSource 连接终于**可以工作了**，我在想现在我是无与伦比的，我会写我的代码直到天结束，但几分钟后我又遇到了另一个问题：O（我在这里写的原因）。

当我在 VS 应用程序中使用SQL Server 的**任何**部分时，我的 SQL Server 将停止工作。我无法浏览那里的数据库，无法更改任何内容，无法使用查询，什么都没有。它只是告诉我这个数据库已经在使用中。

当我以相反的方式进行操作时也是如此。

我通过 SQL Server 配置管理器重新启动 SQL Server（以便能够再次使用 SQL Server），然后我，例如，使用我的数据库查询任务`SELECT * FROM nameDatabase`。

然后我尝试调试我的 C# 应用程序，其中我有一个组合框，SQL Server 必须在其中填写一些名称，并且我得到 SQL Server 不可访问的错误。（我现在不能告诉你确切的错误，但在谷歌搜索后我发现这意味着 SQL Server 不可访问）。

如果有人想查看该代码，那么它是：

```
using (var entities = new PropertyDatabaseEntities())
{
    var userNames = entities.Login
                .Select(login => login.Username)
                .ToArray();

    comboboxLogin.Items.Clear();
    comboboxLogin.Items.AddRange(userNames);
} 
```

但是，当我在使用 SQL Server 中的任何内容之前重新启动 SQL Server 并打开此调试时，它就可以工作了。

有些人告诉我我没有关闭我的连接，但这不可能是真的，因为即使我先使用 SQL Server，我仍然无法使用 VS 和 SQL Server 之间的连接。

我真的被困住了。

*连接字符串

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
  </configSections>
  <connectionStrings><add name="Final.Properties.Settings.PropertyDatabaseConnectionString" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=&quot;C:\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS\MSSQL\DATA\PropertyDatabase.mdf&quot;;Integrated Security=True;Connect Timeout=30;User Instance=True" providerName="System.Data.SqlClient" /><add name="LoginEntities" connectionString="metadata=res://*/DataAccess.LoginModel.csdl|res://*/DataAccess.LoginModel.ssdl|res://*/DataAccess.LoginModel.msl;provider=System.Data.SqlClient;provider connection string='Data Source=.\SQLEXPRESS;AttachDbFilename=&quot;C:\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS\MSSQL\DATA\Login.mdf&quot;;Integrated Security=True;Connect Timeout=30;User Instance=True;MultipleActiveResultSets=True'" providerName="System.Data.EntityClient" /><add name="PropertyEntities" connectionString="metadata=res://*/DataAccess.PropertyModel.csdl|res://*/DataAccess.PropertyModel.ssdl|res://*/DataAccess.PropertyModel.msl;provider=System.Data.SqlClient;provider connection string='Data Source=.\SQLEXPRESS;AttachDbFilename=&quot;C:\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS\MSSQL\DATA\Property.mdf&quot;;Integrated Security=True;Connect Timeout=30;User Instance=True;MultipleActiveResultSets=True'" providerName="System.Data.EntityClient" /><add name="PropertyDatabaseEntities" connectionString="metadata=res://*/DataAccess.PropertyDatabaseModel.csdl|res://*/DataAccess.PropertyDatabaseModel.ssdl|res://*/DataAccess.PropertyDatabaseModel.msl;provider=System.Data.SqlClient;provider connection string='Data Source=.\SQLEXPRESS;AttachDbFilename=&quot;C:\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS\MSSQL\DATA\PropertyDatabase.mdf&quot;;Integrated Security=True;Connect Timeout=30;User Instance=True;MultipleActiveResultSets=True'" providerName="System.Data.EntityClient" /></connectionStrings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:43:18.253

AttachDBFilename 是 SQL Express 独有的。数据库只是要使用的数据库的名称，它没有额外的含义。对于任何生产服务器，您很可能不会使用 AttachDBFilename。它对于单用户模式下的开发和实验非常有用。

您必须在生产服务器上更改 data source=.\SQLEXPRESS 并从连接字符串中删除 attachdbfilename 部分

希望它会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T16:42:40.957

尝试在连接字符串中使用逻辑名称而不是文件名/路径。我认为 ' **AttachDbFileName** =' 功能适用于 SQL Server EXPRESS 版本。但至少不建议用于生产，也不是推荐的建立连接的方式。

**而不是文件名和路径**

```
Data Source=.\SQLEXPRESS;AttachDbFilename=&quot;C:\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS\MSSQL\DATA\PropertyDatabase.mdf&quot 
```

**尝试逻辑名称**

服务器=localhost\SQLEXPR5；数据库=您的数据库；用户 ID = sa;密码 =;

看看[www.connectionstrings.com](http://www.connectionstrings.com/)

# html - Gmail 中的图标间距错误

> ID：10873925
> 
> 赞同：0
> 
> 时间：2012-06-03T21:01:15.133
> 
> 标签：html, gmail, html-email

该问题的解决方案最初有效，但截至 2013 年 1 月 26 日，它不再有效。

这是我为 AddThis 更新的代码：

```
<table width="1" height="480" border="0">
  <tbody>
   <tr>
     <td style="height: 386px; width: 20px;">&nbsp;</td>
   </tr>
   <tr>
     <td style="height: 16px; width: 16px;"><a style="color: #f3f3f3;" title="Share Via Facebook" href="http://api.addthis.com/oexchange/0.8/forward/facebook/offer?pco=tbxnj-1.0&amp;url=http%3A%2F%2Fwww.url.com" target="_blank"><img height="16" style="border-width: 0px; border-style: solid; height:16px;" src="http://cache.addthiscdn.com/icons/v1/thumbs/facebook.gif" alt="Facebook" /></a></td>
   </tr>
   <tr>
     <td style="height: 16px; width: 16px;"><a style="color: #f3f3f3;" title="Share Via Twitter" href="http://api.addthis.com/oexchange/0.8/forward/twitter/offer?pco=tbxnj-1.0&amp;url=http%3A%2F%2Fwww.url.com" target="_blank"><img height="16" style="border-width: 0px; border-style: solid; height:16px;" src="http://cache.addthiscdn.com/icons/v1/thumbs/twitter.gif" alt="Twitter" /></a></td>
   </tr>
   <tr>
     <td style="height: 16px; width: 16px;"><a style="color: #f3f3f3;" title="More Sharing Options" href="http://www.addthis.com/bookmark.php?source=tbxnj-1.0&amp;=300&amp;pubid=ra-4dfb00d56c76d2a5&amp;url=http%3A%2F%2Fwww.url.com " target="_blank"><img height="16" style="border-width: 0px; border-style: solid; height:16px;" alt="More..." src="http://cache.addthiscdn.com/icons/v1/thumbs/more.gif" /></a></td>
   </tr>                                           
  </tbody>
</table> 
```

**原始问题**

* * *

我收到一封电子邮件，其中包含使用表格垂直间隔的 AddThis 共享图标。它们在 Thunderbird 中正确显示，但在 Gmail 中间隔很远。我不知道如何纠正这个问题，这里是它们如何间隔的示例图片：

![间距截图](../Images/38ec9f3e3b88d9977212d5f40b8fcd53.png)

这是构成 AddThis 代码的代码及其周围的代码（完整的电子邮件代码在下面）：

```
<table border="0" width="640">
     <tbody>
      <tr>
      <td style="width: 20px;">&nbsp;</td>
       <td style="width: 586px;">
       <div>
      <div align="center"><a href="img-link"><img alt="At Text" 
       src="img-src"></a></div>
           </div>
          </td>
             <td style="width: 20px;">
               <table border="0" height="498" width="20">
                  <tbody>
                     <tr>
                   <td style="height: 406px;">&nbsp;</td>
                         </tr>

<!-- ADD THIS CODE -->
                                  <tr>
  <td><a target="_blank" href="http://api.addthis.com/
    oexchange/0.8/forward/facebook/offer?pco=tbxnj-1.0&amp;url=share-url" 
 title="Share Via Facebook" style="color: rgb(243, 243, 243);">
 <img alt="Facebook" 
src="http://cache.addthis.com/icons/v1/thumbs/facebook.gif" 
style="border-width: 0px; border-style: solid; display: block;"></a></td>
         </tr>
        <tr>
 <td><a target="_blank" href="http://api.addthis.com/
  oexchange/0.8/forward/twitter/offer?pco=tbxnj-1.0&amp;url=share-url" 
title="Share Via Twitter" style="color: rgb(243, 243, 243);">
<img alt="Twitter" src="http://cache.addthis.com/icons/v1/thumbs/twitter.gif"
 style="border-width: 0px; border-style: solid; display: block;"></a></td>
    </tr>
       <tr>
   <td><a target="_blank" href="http://www.addthis.com/bookmark.php?
  source=tbxnj-1.0&amp;=250&amp;url=share-url" 
title="More Sharing Options" style="color: rgb(243, 243, 243);">
<img alt="More..." src="http://cache.addthis.com/icons/v1/thumbs/more.gif" 
style="border-width: 0px; border-style: solid; display: block;"></a></td>
                                        </tr>
                                    </tbody>
                                </table>
                                </td>
                            </tr>
                        </tbody>
                    </table> 
```

这是完整电子邮件的代码：

```
<table align="center" border="0" cellpadding="0" cellspacing="0" width="98%">
<tbody>
  <tr>
    <td style="background-color: rgb(0, 0, 0);" align="center">
     <table border="0" cellpadding="0" cellspacing="0" width="640">
       <tbody>
        <tr>
   <td style="font-family: arial,helvetica,sans-serif; 
       color: rgb(243, 243, 243); background-color: rgb(0, 0, 0);">
   <p><img alt=" Alt Text" src="img-src" 
          style="color: rgb(0, 0, 0);" height="1" width="1"></p>
 <table border="0" width="640">
     <tbody>
      <tr>
      <td style="width: 20px;">&nbsp;</td>
       <td style="width: 586px;">
       <div>
      <div align="center"><a href="img-link"><img alt="At Text" 
       src="img-src"></a></div>
           </div>
          </td>
             <td style="width: 20px;">
               <table border="0" height="498" width="20">
                  <tbody>
                     <tr>
                   <td style="height: 406px;">&nbsp;</td>
                         </tr>

<!-- ADD THIS CODE -->
                                  <tr>
  <td><a target="_blank" href="http://api.addthis.com/
    oexchange/0.8/forward/facebook/offer?pco=tbxnj-1.0&amp;url=share-url" 
 title="Share Via Facebook" style="color: rgb(243, 243, 243);">
 <img alt="Facebook" 
src="http://cache.addthis.com/icons/v1/thumbs/facebook.gif" 
style="border-width: 0px; border-style: solid; display: block;"></a></td>
         </tr>
        <tr>
 <td><a target="_blank" href="http://api.addthis.com/
  oexchange/0.8/forward/twitter/offer?pco=tbxnj-1.0&amp;url=share-url" 
title="Share Via Twitter" style="color: rgb(243, 243, 243);">
<img alt="Twitter" src="http://cache.addthis.com/icons/v1/thumbs/twitter.gif"
 style="border-width: 0px; border-style: solid; display: block;"></a></td>
    </tr>
       <tr>
   <td><a target="_blank" href="http://www.addthis.com/bookmark.php?
  source=tbxnj-1.0&amp;=250&amp;url=share-url" 
title="More Sharing Options" style="color: rgb(243, 243, 243);">
<img alt="More..." src="http://cache.addthis.com/icons/v1/thumbs/more.gif" 
style="border-width: 0px; border-style: solid; display: block;"></a></td>
                                        </tr>
                                    </tbody>
                                </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    </td>
                </tr>
                <tr>
                    <td style="color: rgb(243, 243, 243);" valign="top">
                    <div style="font-family: arial,helvetica,sans-serif;
 padding: 0pt 20px; color: rgb(243, 243, 243);">
                    <p>&nbsp;</p>
                    <p><a href="url" style="color: 
rgb(243, 243, 243); text-decoration: none;" title="text">
<img alt="UBhapE2 =&gt;" src="img-sr" 
style="border-width: 0px; border-style: solid;"></a>
<span class="textcenter"><br>
                    </span></p>
<p>text <a style="color: rgb(243, 243, 243);" 
title="View This E-Mail In Your Browser" href="url">text</a>. </p>
                    <p>text <a style="color: rgb(243, 243, 243);" 
title="text" href="url">text</a></p>
<p><a style="color: rgb(243, 243, 243);" 
title="text" href="url/">text</a></p>
                    <p text</p>
                    <div style="font-family: arial,helvetica,sans-serif;">
                    <p style="font-size: 12px;" align="center">text</p>
                    </div>
                    </div>
                    <div style="display: none;">{tag_unsubscribe}</div>
                    </td>
                </tr>
            </tbody>
        </table>
        </td>
    </tr>
</tbody>
</table> 
```

请记住，这些是电子邮件，不是 javascript，只是内联 CSS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T21:11:06.483

尝试向 AddThis `<td>`-s 添加高度

```
<td height="31">
    <a target="_blank" href="http://api.addthis.com/
    oexchange/0.8/forward/facebook/offer?pco=tbxnj-1.0&amp;url=share-url" 
    title="Share Via Facebook" style="color: rgb(243, 243, 243);">
    <img alt="Facebook" src="http://cache.addthis.com/icons/v1/thumbs/facebook.gif" 
    style="border-width: 0px; border-style: solid; display: block;"></a>
</td> 
```

# android - 我使用 Eclipse 在 Android 上进行开发我如何查看日志？

> ID：10873926
> 
> 赞同：0
> 
> 时间：2012-06-03T21:02:02.490
> 
> 标签：android, eclipse

我有这条线：

```
Log.i("----------",Arrays.toString(Locale.getAvailableLocales())); 
```

这一行显示了我设备上可用语言的列表。但是列表我只能在我运行程序后才能看到它，而且我在一个视图窗口的底部看到它忘记了一个，因为我不小心关闭了它，但我看到它是绿色的一秒钟。

有什么方法可以在我运行程序后立即查看此日志列表数组，并且还可以在 pc 上而不是在设备上更好地查看它，我的意思是像 messageBox 或其他东西？我的意思是在 Eclipse 中更好地看到它本身。

另一个问题是我在 Main.xml 设计器中添加了一个按钮和一个文本框，但我无法拖动它们。我将它们拖到正确的区域一次，但我无法移动它们，它们被锁定在现在的位置。有什么办法可以移动它们来改变设计器中的位置吗？

这是我的代码：

```
package com.testotspeech;

import java.util.Arrays;
import java.util.Locale;

import android.app.Activity;
import android.os.Bundle;
import android.speech.tts.TextToSpeech;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class AndroidTestToSpeechActivity extends Activity implements
        TextToSpeech.OnInitListener {
    /** Called when the activity is first created. */

    private TextToSpeech tts;
    private Button btnSpeak;
    private EditText txtText;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Log.i("----------",Arrays.toString(Locale.getAvailableLocales()));
        tts = new TextToSpeech(this, this);

        btnSpeak = (Button) findViewById(R.id.btnSpeak);

        txtText = (EditText) findViewById(R.id.txtText);

        // button on click event
        btnSpeak.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                speakOut();
            }

        });
    }

    @Override
    public void onDestroy() {
        // Don't forget to shutdown tts!
        if (tts != null) {
            tts.stop();
            tts.shutdown();
        }
        super.onDestroy();
    }

    public void onInit(int status) {

        if (status == TextToSpeech.SUCCESS) {

            int result = tts.setLanguage(Locale.CHINESE);

            if (result == TextToSpeech.LANG_MISSING_DATA
                    || result == TextToSpeech.LANG_NOT_SUPPORTED) {
                Log.e("TTS", "This Language is not supported");
            } else {
                btnSpeak.setEnabled(true);
                speakOut();

            }

        } else {
            Log.e("TTS", "Initilization Failed!");
        }

    }

    private void speakOut() {

        String text = txtText.getText().toString();

        tts.speak(text, TextToSpeech.QUEUE_FLUSH, null);
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T21:06:40.667

在日食中

单击窗口 > 显示视图 > 其他 > LogCat

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T21:07:47.297

查看日志的另一种方法是从 android-sdk/tools 运行 ddms.bat。有时我遇到 Eclipse 不显示日志的问题，而 DDMS 总是为我工作。

# python - PyQT - button.toggle() 方法不起作用

> ID：10873928
> 
> 赞同：0
> 
> 时间：2012-06-03T21:02:27.010
> 
> 标签：python, pyqt

我在 QButtonGroup 容器内有一个带有两个单选按钮的 GUI，该容器本身位于 QGroupBox 内（此按钮组需要右键单击上下文菜单，并且由于 QButtonGroup 没有视觉表示，因此它似乎没有 setContextMenuPolicy方法。）下面的代码片段应该更新互斥按钮的状态，以响应来自串行链路的传入数据：

```
elif widgetName in self.buttonBoxDict:
            buttonGroup = getattr(self.ui, self.buttonBoxDict[widgetName])
            checkedButton = buttonGroup.checkedButton()
            checkedButtonName = str(checkedButton.objectName())
            if value >= self.onValue and self.buttonDict[checkedButtonName][1] == self.offValue:
                checkedButton.toggle()
                assert(not checkedButton.isChecked())
                self.windowHandler.buttonChanged(self, self.onValue, cc)
            elif value < self.onValue and self.buttonDict[checkedButtonName][1] == self.onValue:
                checkedButton.toggle()
                self.windowHandler.buttonChanged(self, self.offValue, cc) 
```

不幸的是，这不起作用，我知道最初这里选择的按钮被选中，但是 GUI 中按钮的状态永远不会改变，即使代码似乎正在正确执行，断言也总是失败。关于为什么这可能会出错的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:50:43.277

您遇到的问题是基于您使用的 QButtonGroup 设置为独占的事实。如果您查看[文档](http://qt-project.org/doc/qt-4.8/qbuttongroup.html#exclusive-prop)，您会看到它说明了以下内容：

> 用户无法通过单击取消选中当前选中的按钮；相反，**必须单击组中的另一个按钮**

我不知道您的应用程序的逻辑，但是如果您使用的是独占按钮组，则需要设置要检查的差异按钮，或者不使用独占组并自己执行检查。

以下是您所看到的一个小示例：

```
import sys
from PyQt4 import QtGui

app = QtGui.QApplication(sys.argv)
button1 = QtGui.QCheckBox('test 1')
group = QtGui.QButtonGroup()
group.setExclusive(True)
group.addButton(button1)
print button1.isChecked()
button1.toggle()
print button1.isChecked()
button1.toggle()
print button1.isChecked()
# toggle seems not to work, add a second button
button2 =  QtGui.QCheckBox('test 2')
group.addButton(button2)
print button2.isChecked()
button2.toggle()
print button1.isChecked()
print button2.isChecked() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:30:06.487

多亏了 mandel 的提醒，一个快速的解决方法是让事情按照我“预期”的方式运行，以便为一个双按钮独占组将代码更改为如下所示：

```
if value >= self.onValue and self.buttonDict[checkedButtonName][1] == self.offValue:
     for button in buttonGroup.buttons():
          if button != checkedButton:
               button.toggle() 
```

# javascript - jQuery 的验证没有完全正常工作

> ID：10873931
> 
> 赞同：0
> 
> 时间：2012-06-03T21:02:43.337
> 
> 标签：javascript, jquery, html, validation

我有一个问题，我的验证只有一部分有效，我似乎无法弄清楚问题出在哪里。在页面中，我对地址、城市、邮编和信用卡进行了验证，但这些验证不适用于信用卡。

html:

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Billing Information</title>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script>
<script type="text/javascript" src="test.js"></script>

<style type="text/css">
    .error {
    background-color: #ffc;
    border: 1px solid red;
  }
</style>
</head>

<body>
<table border='1'>

  <tr>
    <td>
      <form action="signin.html" id="signup">
      <p>
        <label for="name">Address:</label>
        <input type="text" name="address" id="address" />
      </p>

      <p>
        <label for="name">City: </label>
        <input type="text" name="city" id="city" />
      </p>

      <p>
        <label for="name">ZIP Code:</label>
        <input type="text" name="zip" id="zip" size='3'/>
      </p>

    </td>

    <td>
        <p><b>What is your preferred billing method?</b></p>

      <input type="radio" name="payment" id="ccard" value="cc" />
      <label for="cCard">Credit Card</label><br />

      <div id="cardInfo">
        <!-- doesn't work here -->
        <label for="name">Card Number: </label>
        <input type="text" name="cnum" id="cnum" size='15' /> <br />

        <label for="name">Expiration Date:</label>
        <input type="text" name="exp" id="exp" size='4' />
      </div>

    </td>
    <td>
      <p align='center'>
        <input type="submit" id='submit'>
      </p>
    </td>
    </form>
  </tr>
</table>
</body>
</html> 
```

js：

```
$(function() {

     // validations using plugin
   $('#signup').validate({
     rules: {
       address: 'required',
       city: 'required',
       zip: {
         required:true,
         digits:true,
         minlength:5,
         maxlength:5
       },
       cnum: 'required'
     }
   });  
}); 
```

编辑：如果我将卡号移到第一列，则验证有效，但在第二列时无效

[http://jsfiddle.net/JqSBC/](http://jsfiddle.net/JqSBC/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T21:46:45.300

将表单元素放在表格元素之外。

表单不允许作为 table、tbody 或 tr 的子元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T21:47:36.390

用表单标签包裹你的表格，而不是在第一个 td 中包含表单标签。

`#cardInfo`在您的原始示例中，表单内部不存在`#signup`，因此它被忽略。

此外，使用输入元素的名称/id 而不是容器 div。

[http://jsfiddle.net/JqSBC/3/](http://jsfiddle.net/JqSBC/3/)

# html - CSS：最小高度 100%（固定元素也在屏幕上）？

> ID：10873932
> 
> 赞同：0
> 
> 时间：2012-06-03T21:02:44.757
> 
> 标签：html, expand, css

我一直在尝试使用 min-height:100% 来拉伸我的内容区域以填充屏幕的剩余百分比，但我只是被难住了。任何帮助表示赞赏。

我在屏幕顶部有 3 个固定高度的 div 和 1 个固定高度的页脚。然后我有另一个 div 非固定高度部分所在的位置，即“容器”div。在这里，我有内容和侧边栏 div，我希望至少将它们拉伸到 100% 的屏幕，并展开以适应内容。

[http://jsfiddle.net/P3Ckk/110/](http://jsfiddle.net/P3Ckk/110/)

任何和所有的帮助表示赞赏。它让我陷入困境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T21:19:30.687

您已经`#conatinerWide`设置了灰色背景，我假设您希望它拉伸以填充其余部分。

事情是`html`并且`body`只会扩大到足以容纳您拥有的内容。因此将这些设置为 100% 将告诉它填充文档窗口；让您`#containerWide`现在拥有 100% 的可用空间。

添加`html, body { height: 100%; }`应该达到你想要的

[http://jsfiddle.net/rtgibbons/P3Ckk/111/](http://jsfiddle.net/rtgibbons/P3Ckk/111/)

更新评论；

您希望将每个元素设置为父元素`min-height:100%`所需的窗口大小。`height:100%`所以`#containerWide`需要`height:100%`和`#container`需要`min-height:100%; height:100%`;。现在有趣的部分。`#exsi`如果您对和执行相同`#cont`的模式，则将是 的高度，`#container`而不是调整 所需的空间`#foot`。

这是我继续的地方

[http://jsfiddle.net/rtgibbons/P3Ckk/113/](http://jsfiddle.net/rtgibbons/P3Ckk/113/)

基本上，我已经设置`min-height:100%; height:100%`了所有的父母元素。我已经搬出`#foot`去了，`#container`所以它会被列最大化。然后我应用了总高度的一些负边距底部，`#foot`所以它会被吸到里面`#containerWide`

两个警告。

1.  填充 100% 导致`#exsi`并`#cont`扩展过去`#containerWide`，因此删除它们并根据需要将它们应用到内部元素或另一个包装器。
2.  页脚将出现在折叠下方。这是您正在定位的 b/c `#containerWide`；我将把它作为一个练习留给你去弄清楚。

# java - 密钥分发超时

> ID：10873938
> 
> 赞同：0
> 
> 时间：2012-06-03T21:03:32.853
> 
> 标签：java, android, mysql, multithreading, android-asynctask

我收到一个 keydispatchingtimedout 错误，似乎找不到原因。有什么帮助吗？如您所见，我创建了一个服务器类，我的 android 应该在启动时连接到它，它确实如此。但是在尝试检索来自我的数据库 mysql 的数据时，它会冻结。

```
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.net.InetSocketAddress;
import java.net.Socket;
import java.util.ArrayList;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import android.view.View;
import android.widget.Button;

public class TutorialActivity extends Activity {

    private Socket socket;
    private ObjectInputStream dos;
    private DataInputStream dis;

    public void connect(){
        socket = new Socket();
        InetSocketAddress ipPort = new InetSocketAddress("192.168.0.10",4444);
        try{
            socket.connect(ipPort);
            dis = new DataInputStream(socket.getInputStream());
            dos = new ObjectInputStream(socket.getInputStream());
        }catch(Exception e){
            Log.d("OUT_CON",e.toString());
        }

        while (true) {
            try {
                String msg = dis.readUTF();
                if (msg.equals("Hej")) {
                    Thread.sleep(50);
                    receiveArrayList();
                }

            } catch (Exception e) {
            }
        }
    }   
    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        final Button sButton = (Button) findViewById(R.id.sbutton);
        sButton.setOnClickListener(new View.OnClickListener(){
            @Override
            public void onClick(View v){            
            connect();
            }
        });
    }

    public void receiveArrayList() {
        try {
            FileInputStream fis = new FileInputStream("randomList");
            dos = new ObjectInputStream(fis);
            ArrayList a= (ArrayList) (dos.readObject());
            for(int i = 0; i < a.size(); i++){
                Log.d((String)a.get(i), null);
            }

            dis.close();
        } catch (ClassNotFoundException ex) {
            System.out.println(ex);
        } catch (IOException ex) {
            System.out.println(ex);
        }
    }
}

import java.io.DataOutputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.net.*;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Server implements Runnable {

    private ServerSocket server;
    private Socket socket;
    private ObjectOutputStream oos = null;

    public Server() {
        try {
            server = new ServerSocket(4444);
            new Thread(this).start();
        } catch (Exception e) {
            System.out.println(e);
        }
    }

    public void run() {
        System.out.println("Server running");
        while (true) {
            try {
                socket = server.accept();
                sayHi();
            } catch (Exception e) {
            }
        }
    }

    private void sayHi(){
        DataOutputStream dos;
        try {
            dos = new DataOutputStream(socket.getOutputStream());
            oos = new ObjectOutputStream(socket.getOutputStream());
            dos.writeUTF("Hej");
            sendNames();
        } catch (IOException ex) {
            Logger.getLogger(Server.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public void sendNames() {
        final ArrayList<String> drinkar = new ArrayList<String>();

        Connection con = null;
        String url = "jdbc:mysql://localhost:3306/";
        String db = "drycker";
        String driver = "com.mysql.jdbc.Driver";
        String user = "root";
        String pass = "";

        try{
            Class.forName(driver).newInstance();
            con = DriverManager.getConnection(url+db, user, pass);
            try{
                Statement st = (Statement) con.createStatement();
                ResultSet res = st.executeQuery("SELECT * FROM  drinkar");
                while (res.next()) {
                    String s = res.getString("Namn");
                    drinkar.add(s);
                }
                System.out.println(drinkar);
                con.close();
            }
            catch (SQLException s){
                System.out.println("SQL code does not execute.");
            }  
        }
        catch (Exception e){
            e.printStackTrace();
        }         
        ArrayList<String> a = new ArrayList<String>();
        a.add("Hejsan");
        a.add("Svejsan");

        try {
            FileOutputStream fos = new FileOutputStream("randomList");
            oos = new ObjectOutputStream(fos);
            oos.writeObject(drinkar);
            oos.flush();
            oos.reset();
            oos.close();
            fos.close();
        } catch (Exception e) {
        }
    }

    public static void main(String[] args) {
        new Server();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:14:49.397

`connect()`您的呼叫`onClick()`需要很长时间。您需要`connect()`在主线程之外创建该方法。查看有关响应能力的[Android 开发人员指南](http://developer.android.com/guide/practices/design/responsiveness.html)以获取更多信息。

# jquery - Textarea 不允许空格

> ID：10873941
> 
> 赞同：1
> 
> 时间：2012-06-03T21:03:43.297
> 
> 标签：jquery, jquery-mobile, twitter-bootstrap

我正在使用 jquery mobile 和 Bootstrap 开发一个 Web 应用程序，但是我的 textarea 有问题，我不知道这是否是这两个 javascript 库之间的不兼容。这很奇怪，但我没有在我的 html 代码中发现错误。它在 jsp 文件中，下面是一段代码：

```
</div>
        <ul data-role="listview" data-inset="true" data-theme="a" data-content-theme="a" >
            <li data-role='list-divider'>Middleware</li>

            <div class="inner">
        <a href="" class="btn btn-large" id="TeamLeaderMidd">Team Leader: <% out.println(TeamLeaderMidd); %></a>

        <div hiden id="form-TeamLeaderMidd" class="formularios">
            <fieldset class="ui-grid-a">
                <div class="ui-block-a"><input type="text" id="celTeamLeaderMidd" value = <%out.print("\""+ CelTLMid+ "\"");%> disabled></div>
            </fieldset>
            +
            <textarea cols="40" rows="8" name="textarea" id="mensajeTeamLeaderMidd">sas a</textarea><br>
            <div data-role="fieldcontain">
            <fieldset data-role="controlgroup">

                    <input type="radio" name="radio-choice-1" id="radio-choice-1" value="sms" checked="checked" >
                    <label for="radio-choice-1">SMS</label>

            </fieldset>

      <button class="alert-info" onclick="mensajes(celTeamLeaderMidd.value,mensajeTeamLeaderMidd.value)">Enviar!</button>
      </div>
</div> 
```

我可以插入字符、数字和特殊字符，但是我可以插入制表符空格、换行符或空格字符。

在标题中，我有以下内容：

```
<script src="./jquery-mobile/jquery-1.5.min.js" type="text/javascript"></script>
<script src="./jquery-mobile/jquery.mobile-1.0a3.min.js" type="text/javascript"></script>
<link href="./jquery-mobile/jquery.mobile-1.0a3.min.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="./bootstrap/css/bootstrap.css">
<link rel="stylesheet" href="./bootstrap/css/bootstrap-responsive.css"> 
```

我删除了以下几行，现在可以使用：

```
<ul data-role="listview" data-inset="true" data-theme="a" data-content-theme="a" >
<li data-role='list-divider'>Middleware</li> 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T21:37:49.590

您的 HTML 无效。您没有关闭`</ul>`标记示例中的 。

将列表放回后面`</ul>`。

# javascript - Document.write 清除页面

> ID：10873942
> 
> 赞同：19
> 
> 时间：2012-06-03T21:03:46.160
> 
> 标签：javascript, html, dom-events

为什么在下面的代码中调用`document.write`函数`validator()`时表单元素（复选框和按钮）会从屏幕中删除？

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">
            function validator() {
                if (document.myForm.thebox.checked)
                    document.write("checkBox is checked");
                else 
                    document.write("checkBox is NOT checked");
            }
        </script>
    </head>
    <body>
        <form name="myForm">
            <input type="checkbox" name ="thebox"/>
            <input type="button" onClick="validator()" name="validation" value="Press me for validation"/>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-03T21:12:09.447

`document.write()`用于写入文档*流*。

在您的情况下，当调用 onClick 处理程序时，流很可能已经关闭，因为您的文档已完成加载。

调用`document.write()`已关闭的文档流会自动调用`document.open()`，这将清除文档。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-03T21:12:34.080

页面加载后调用的A`document.write()`将覆盖当前文档。

您想在文档中设置某些元素的文本。如果你添加一个

```
<p id="message"></p> 
```

到你身体的尽头，然后你可以打电话

```
document.getElementById("message").innerHTML = "your text here"; 
```

或者使用 jQuery 库

```
$("#message").html("your text here"); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-03T21:13:39.230

`document.write` *在文档加载后*调用会隐式调用`document.open`，这会清除当前文档。（与在页面加载时调用`document.open`相比，它将字符串插入到文档流中；它不会清除文档。）

`document.write`是古代 JavaScript 最古老的遗迹之一，通常应该避免。相反，您可能希望使用 DOM 操作方法来更新文档。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-03T21:23:33.227

您可以使用

```
alert("Checkbox is checked"); 
```

或者，如果您将在页面上显示它，首先创建一个带有 id“消息”的元素（您可以编写任何您想要的内容，但请记住，id 在页面上必须是唯一的），例如

```
<div id="message"></div> 
```

然后使用

```
document.getElementById("message").innerHTML = "Checkbox is checked"; 
```

或者如果您使用的是 jQuery：

```
$("#message").html("Checkbox is checked"); 
```

或者如果您使用的是支持控制台的浏览器（Firefox、Chrome 等）

```
console.log("Checkbox is checked"); 
```

代替

```
document.write("Checkbox is checked"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-15T13:55:49.733

```
 var x = document.createElement("div")
        document.body.appendChild(x) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-03T21:10:33.210

`document.write`不是最好的方法，好像有任何，是的，DOM 操作正在发生或已经发生然后`document.write()`不能很好地工作，因为它修改了原始文档但忽略了对 DOM 树的任何更改。

还要记住，浏览器主要从 DOM 中显示内容，而不是原始文档。

# validation - JSF 2.0 中的复合组件验证

> ID：10873948
> 
> 赞同：2
> 
> 时间：2012-06-03T21:05:05.497
> 
> 标签：validation, jsf-2, facelets, composite-component

我在 JSF 2.0 中有复合组件

```
<composite:interface>
    <composite:attribute name="inputId"/>
    <composite:attribute name="labelValue"/>
    <composite:attribute name="inputValue" />
    <composite:attribute name="required" />
    <composite:attribute name="requiredMessage" />
</composite:interface>
<composite:implementation>
    <div class="control-group">
        <h:outputLabel for="#{cc.attrs.inputId}" value="#{cc.attrs.labelValue}" class="control-label" />
        <div class="controls">
            <h:inputText id="#{cc.attrs.inputId}" value="#{cc.attrs.inputValue}" required="#{cc.attrs.required}" requiredMessage="#{cc.attrs.requiredMessage}" />
        </div>
    </div>
</composite:implementation> 
```

我需要对它进行一些验证（是数字、长度验证等）那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T22:44:33.593

您需要[`<cc:editableValueHolder>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/composite/editableValueHolder.html)在`<cc:interface>`.

```
<cc:interface>
    <cc:editableValueHolder name="input" targets="#{cc.attrs.inputId}" />
    ...
</cc:interface> 
```

该标记基本上告诉`<f:validator for="input">`必须在`UIInput`组件上应用任何与`id`中指定的相同`targets`。因此，您可以按如下方式注册它：

```
<my:input ...>
    <f:validateLength for="input" ... />
</my:input> 
```

# c++ - 带有 execv 和输入重定向的 c++ 流水线命令

> ID：10873949
> 
> 赞同：2
> 
> 时间：2012-06-03T21:05:31.387
> 
> 标签：c++, posix, exec, pipe, io-redirection

试图编写一个处理内部和外部命令的 shell。我可以一次获取内部命令和一个外部命令。

我的问题是如何让这样的命令运行：“ls -l | grep lib | wc -l”

我正在使用 fork()，并在 char*[] 中通过 execv() 传递外部命令。

关于如何工作的任何想法？我假设使用 pipe() 或其他东西，但我不确定。

问题的第二部分：如何处理 i/o 重定向？谁能指出我有帮助的地方？

**编辑** 到目前为止，@Alex W 是我的英雄。但是，由于我是 pipe() 和 dup2() 命令的新手，所以我对每个调用和变量的用途有点犹豫。

这是我处理单个外部命令的代码（示例=“ls -l -a”）：

```
 pid_t pid;
    pid = fork();
    if (pid < 0)
    {
        cout << "Fork failed." << endl;
    }
    else if (pid == 0)
    {
        execvp(exec_args[0], exec_args);   //exec_args is a char*[] where 
        _exit (EXIT_FAILURE);              //exec_args[0] contains "/bin/ls"
    }                                          //[1]="ls" and [2]="-l" [3]="-a"
    else
    {
        int status;
        waitpid(pid, &status, 0);
    }
    break; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T21:19:46.403

您确实使用`pipe`并且在 POSIX 系统中，管道的工作方式与文件类似。您可以写入管道并从管道读取，但如果管道中没有任何内容，则会阻塞。查找有关 Unix 系统调用的信息的最佳位置是系统调用的手册页。在 Unix 系统上，您可以`man pipe`在终端中键入。如果您无法访问 Unix 终端，那么只需搜索“man pipe”即可。手册页的好处是它们告诉您要为给定的系统调用包含哪些库。确保您记住，当使用任何`exec`类型的系统调用时，您正在将一个全新的进程加载到该内存中，并且您正在执行的进程将停止在其轨道上。

要使用它，请执行以下操作：

```
int main()
{
    int id[2];
    int fd[2];
    int fd2[2];
    int fd3[2];
    FILE file;
    int status;
    int sz = 0;
    char buff[1000];
    char buff2[1000];
    string launch[2];
    FILE *fp;

    launch[0] = "./anotherProgramToExecute";
    launch[1] = "./yetAnotherProgram";

    pipe(fd);
    pipe(fd2);
    pipe(fd3);

    for(int i = 0; i < 2; i++)
    {
        id[i] = fork();

        if (id[i] == -1) /* an error occurred */
        {
            perror("Fork failed.\n");
        }
        else if (id[i] == 0) /* this is the child process currently acting */
        {
            if(i == 0)
            {
                dup2(fd[1],1);
            }
            else if(i == 1)
            {
                dup2(fd2[0],0);
                dup2(fd3[1],1);
            }
            execlp(launch[i],launch[i], NULL);
        }
        else /* this is the parent process currently acting */
        {
            sz = read(fd[0], buff, 1000);
            buff[sz] = '\0';
            printf("buff = %s\n",buff);

            close(fd[0]);

            write(fd2[1],buff, 1000);

            read(fd3[0],buff2,1000);

            fp = fopen("bin.txt","w");
            if(fp == NULL)
                printf("Cannot open file.\n");
            else
            {
                fprintf(fp,buff2);
                fclose(fp);
            }

            //printf("Creation of Child Process #%d succeeded!\n",id[i]);
            while(waitpid(id[i], &status, WNOHANG) == 0)
                sleep(0.3);
            if (WIFEXITED(status))
            { 
                // successfully terminated children
            }
            else
            {
                perror("Child has not terminated correctly.\n");
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T21:22:10.397

我见过的关于管道的最好的在线教程是一个老歌，但很好：http: [//beej.us/guide/bgipc/](http://beej.us/guide/bgipc/)。你可以浏览一下。有人怀疑你会喜欢它。

# azure-sql-database - SQL Azure 将数据库导出到自己的服务器

> ID：10873951
> 
> 赞同：6
> 
> 时间：2012-06-03T21:05:42.883
> 
> 标签：azure-sql-database

我想将数据库从 SQL Azure 导出到 MDF 文件，这样我就可以将它安装在自己的 SQL 服务器实例上，但是当我在 Windows Azure 管理工具中点击“导出”时，它希望我导出数据库到 Azure Blob 存储，我只想下载它。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T02:07:54.540

Windows Azure 管理工具不支持 SQL Azure。要管理 SQL Azure，可以使用 SQL Azure 门户或标准 SQL Server 工具。例如，要从 SQL Azure 导出数据库，您可以使用标准的 SQL Server Management Studio（请参阅[http://blogs.msdn.com/b/sqlazure/archive/2010/05/19/10014014.aspx](http://blogs.msdn.com/b/sqlazure/archive/2010/05/19/10014014.aspx)了解更多信息细节）。如果您更喜欢命令行工具，可以使用 BCP（有关详细信息，请参阅[http://blogs.msdn.com/b/sqlazure/archive/2010/05/21/10014019.aspx](http://blogs.msdn.com/b/sqlazure/archive/2010/05/21/10014019.aspx)）。

# android - 在画布上绘制文本

> ID：10873952
> 
> 赞同：3
> 
> 时间：2012-06-03T21:06:21.807
> 
> 标签：android, animation, android-canvas, draw

我正在尝试使用画布绘制文本。我到处查看，但这些例子相当复杂，我可以在画布上绘制文本，但它不像这张照片那样显示。

![在此处输入图像描述](../Images/8bd9507a78c36ed14f05a98329d1c785.png)

我找到了这段代码并且它正在工作，我只需要像上图那样写。

```
 Paint paint = new Paint();
        paint.setColor(Color.BLACK);
        paint.setTextSize(30);
        paint.setAntiAlias(true);

        canvas.drawText("There are 137 days, 9 hours 4 minutes and 36 seconds", 150,150, paint); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T21:13:17.683

获取您想要的字体并将其添加到您的资产文件夹中。假设字体文件名为“pretty.otf”。然后在您的代码中，您所要做的就是。

```
Paint paint = new Paint();
paint.setColor(Color.BLACK);
paint.setTextSize(30);
paint.setAntiAlias(true);

Context mContext = getContext();
Typeface myTypeface = Typeface.createFromAssets(mContext.getAssets(), "pretty.otf");

paint.setTypeface(myTypeface); 
```

要像在图像中那样间隔文本，请通过在字符串中添加 \n 字符来添加新行，如下所示：

```
canvas.drawTextOnPath("There are\n137 days, 9 Hour\n4 Minutes and 36 seconds\nuntil Christmas", circle, 0,30,paint); 
```

# debian - 在不破坏发行版完整性的情况下创建和安装上游 Debian 软件包

> ID：10873955
> 
> 赞同：1
> 
> 时间：2012-06-03T21:06:38.943
> 
> 标签：debian, apt, dpkg

我的用例：

我在华硕 p-67 Sabertooth 主板上运行 Debian Squeeze Backport 3.2.0-0.bpo.2-amd64 | i72600K proc ...我计划做一点速度步进，所以我想使用 lm-sensors 来监控我的处理器速度...但是，debian stable 中最新的 lm-sensors 版本是 1:3.1.2-6支持我的板子芯片的lm-sensors版本是1:3.3.2 ...

起初我只是简单地运行 Make 并构建了可以运行的应用程序......但是，我不想这样做......坏习惯。因此，我决定使用 dh_make 构建一个 .deb。安装工作......但是，我现在遇到了一个问题，即安装了一个与 Apt 不完整的上游分离包。

如何保持我创建的软件包已安装，但仍保持系统完整性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:10:33.110

您可能还想尝试混合系统的多个版本，即稳定版和测试版。在 /etc/apt/preferences.d 中设置不同版本的优先级，稳定高于测试，系统会优先选择稳定包而不是测试包。然后，您可能想要

```
 apt-get install lm-sensors/testing 
```

以便安装 lm-sensors 的测试版本，以及它的所有依赖项。

# javascript - jQuery：当用户将鼠标悬停在按钮上时图片更大？

> ID：10873959
> 
> 赞同：0
> 
> 时间：2012-06-03T21:07:06.843
> 
> 标签：javascript, jquery, css

所以我正在制作一个书柜形状的左水平导航栏。我将书籍水平放置，一个在彼此的顶部，每本书都是一个不同的链接。

这些按钮有两种状态，静态（只是一本书）和悬停（一本 3d 外观的书）。这给出了用户从书柜中拉出书的效果。现在对于 jQuery：

我打算使用 jQuery 将悬停图像淡入上一张图像的顶部，但是我想知道如果悬停图像大约 10px 会发生什么？

当其中一本书的悬停图像淡入时，这堆书肯定会向下移动 10 像素吗？

帮助？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T21:46:20.267

您可以将较大的书放置在负边距的位置以与其他书重叠。这是一个简单的例子：

演示：

[http://jsfiddle.net/5TeHu/](http://jsfiddle.net/5TeHu/)

CSS：

```
a{
    display:block;
    width:30px;
    height:100px;
    border:1px solid #aaa;
    margin:10px 1px;
    background:#ddd;   
    float:left;
    position:relative;
}

a:hover{
    width:50px; 
    height:120px;
    margin:0 -9px;
    z-index:2;
} 
```

​</p>

# android - Admob 应用程序无故变为非活动状态

> ID：10873963
> 
> 赞同：0
> 
> 时间：2012-06-03T21:07:22.187
> 
> 标签：android, admob

> **可能重复：**
> [将新版本的 android 应用程序发布到 google play 后，admob 状态更改为非活动状态，并且没有显示广告](https://stackoverflow.com/questions/11703415/after-publishing-new-version-of-android-app-to-google-play-admob-status-changed)

经过几个月的完美运行，我的一个应用程序在没有进行任何最近更改并每天收到数千个请求的情况下变为非活动状态。我尝试联系并询问 admob，但没有收到有用的答案。

有人有同样的问题吗？

# google-tv - 我可以从第二个屏幕设备直接访问 Google TV 中的频道列表提供程序吗？

> ID：10873965
> 
> 赞同：2
> 
> 时间：2012-06-03T21:07:33.310
> 
> 标签：google-tv

我正在为 Google TV 开发一个基于 Android 的远程应用程序，我希望它比标准的 Google TV 遥控器更智能。我想要做的是将频道列表提供者信息从 Google TV 下载到我的遥控器，例如，我可以说“转到 CBS”，遥控器就会知道 CBS 在用户的有线网络上是哪个频道。我了解频道列表及其相关的电视频道号码可从 Google TV 上的频道列表提供商处获得。我想知道的是，我是否可以通过在我的 Android 手机上运行的远程应用程序向 GTV 盒子发送呼叫来直接从 Google TV 访问此信息，或者我是否必须为 Google TV 盒子构建一个小应用程序才能按顺序访问该信息，然后将其分流到我的远程应用程序？

提前感谢您的帮助。马库特纳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T22:18:56.913

您只能在 Google TV 设备上调用频道列表提供程序。您无法远程访问提供程序。对于 Able Remote，我们创建了一个在 Google TV 上运行的应用程序，它为我们的移动应用程序提供了一个专有的 API 来访问频道列表。对于语音命令，我们找到最接近的匹配频道，然后使用 Anymote 将频道 URI 发送到 Google TV 设备以更改频道。

# c# - 磁盘簇/块大小与二进制文件读取有何关系？

> ID：10873973
> 
> 赞同：3
> 
> 时间：2012-06-03T21:09:57.477
> 
> 标签：c#, .net, file

我有一些非常大的二进制文件（每个 > 1TB），其中包含高度压缩的数据。我经常从这些文件中读取一些大约 300 字节的数据块。为此，我一次在 7 个线程中打开文件并执行读取操作。

磁盘簇大小如何与此相对应。当我读取 300 字节并且磁盘簇大小设置为 64KB 时，.net 会读取整个 64KB 而不是 300 字节吗？

对于这种情况，小集群还是大集群更好？我使用 FileStream 并将 FileOptions 设置为 FileOptions.RandomAccess。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T01:09:41.330

如果您想在运行时优化从任何给定分区读取的缓冲区大小，您可以更进一步，在运行时获取集群大小，并将其倍数用于读取缓冲区。

但是，您需要从 kernel32.dll PInvoke 来执行此操作。

使用 GetDiskFreeSpace 函数获取给定分区的簇大小。

这是方法签名：

```
[DllImport("kernel32.dll", SetLastError=true, CharSet=CharSet.Auto)]
   static extern bool GetDiskFreeSpace(string lpRootPathName, 
   out uint lpSectorsPerCluster, 
   out uint lpBytesPerSector, 
   out uint lpNumberOfFreeClusters, 
   out uint lpTotalNumberOfClusters); 
```

将路径传递到您感兴趣的驱动器的根目录。要获取每个簇的字节数，请将 lpSectorsPerCluster 乘以 lpBytesPerSector。

欲了解更多信息，这里是 pinvoke.com 关于此功能的页面： [http ://www.pinvoke.net/default.aspx/kernel32.GetDiskFreeSpace](http://www.pinvoke.net/default.aspx/kernel32.GetDiskFreeSpace)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T21:37:35.747

是的，您将从磁盘读取 64kb 块。较小的集群大小将为您提供更快的小范围读取。它有更多文件碎片的风险（可能不是问题）。

但是，通过降低集群大小，您无法获得更多的吞吐量。在磁盘完成查找操作时，确实会获取您的数据，它可能已经读取了大约 1MB 的数据。从 64kb 到 4kb，您节省的费用很少。您节省了大约 1/20 的磁盘寻道时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T21:39:42.640

这很简单：

集群规模越小，延迟（延迟）越低，但吞吐量（总体平均数据速率）也越低；

# java - 我可以使用编辑后的 Java 版本或 JVM 运行 Micro Cloud 吗？

> ID：10873983
> 
> 赞同：2
> 
> 时间：2012-06-03T21:11:32.483
> 
> 标签：java

是否可以在新的（自编辑的）java 版本上运行 Micro cloud Foundry？我增强了几个核心 Java 类来支持污点跟踪，这只是为了学术目的，所以它没有违反 Sun t&c's。具体来说，我需要在新的 Java 版本上运行 Micro cloud，以便我可以在其上启动 Web 应用程序并在增强的核心 Java 类上测试污染跟踪传播。

*污点跟踪：增强的核心java类，如String、String builder等，具有额外的布尔值，用于标识输入是否可信。（SQL 注入、XSS 等）

亲切的问候，阿塞尔

# javascript - 如何在谷歌地图中获得经纬度和经度的总距离

> ID：10873984
> 
> 赞同：1
> 
> 时间：2012-06-03T21:11:49.050
> 
> 标签：javascript, google-maps

我每 5-7 秒将 gps 信号保存到数据库。当我“汇总”数据库中的所有 lat 和 lng 值时，我如何才能看到到目前为止我已经走了多远。我怎样才能每天看到这些结果？

例如。当我在实时预览中跟踪汽车时，我希望有一段距离作为当天的实时数据。当我在寻找某些卡车的一个月公里数时？

我正在查看[THIS](https://developers.google.com/maps/documentation/javascript/distancematrix)链接，但我不知道如何动态填充数据，因为它们已经在数组中有数据。

如果你已经实现了同样的事情，你能给我一些想法和例子吗？

如果已经制造了轮子，为什么还要制造它:)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T21:28:39.893

一些三角函数会让你到达那里。

我希望 Lat/Lng 像 2D 表面上的 X/Y 坐标一样简单。不幸的是，由于我们生活在一个称为地球的（非常美妙的）球体上，因此纬度和经度指的是三角形相对于地球中心（纬度）的角度或我们在地球上绘制的假想线（经度）。[历史的东西很整洁](http://en.wikipedia.org/wiki/History_of_longitude)，但这不是重点。

我使用 Haversine forumla 计算球体上的距离，如果您愿意，可以[阅读更多信息。](http://www.movable-type.co.uk/scripts/latlong.html)

为简单起见，我将在这里发布代码。我是用 Javascript 编写的，这就是你得到的 :) 给定两个 lat/lng 点 A 和 B，然后：

```
// units can be english (miles) or metric (km)
var units = "english";
function calculate_distance(a, b) {
  var R = (units == "english") ? 3958.7558 : 6371; 

  var dLat = (a.lat - b.lat) * Math.PI / 180;
  var dLon = (a.lng - b.lng) * Math.PI / 180;
  var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
          Math.cos(a.lat * Math.PI / 180) * Math.cos(b.lat * Math.PI / 180) * 
          Math.sin(dLon / 2) * Math.sin(dLon / 2); 
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a)); 
  return R * c;
} 
```

如果你在你的点对之间迭代地应用这个函数并求和距离......宾果游戏。

```
function get_distance(list_of_points) {
  if (list_of_points.length == 0) return 0;

  var sum = 0;
  var last_point = list_of_points.shift();
  while (list_of_points.length > 0) {
    var next_point = list_of_points.shift();
    sum += calculate_distance(last_point, next_point);
    last_point = next_point; 
  }

  return sum;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T22:59:59.923

或者，您可以使用 Google Maps API 的几何库来做同样的事情：

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=geometry&sensor=false"></script>
<script type="text/javascript">

  function initialize() {
    var myLatLng = new google.maps.LatLng(0, -180);
    var myOptions = {
      zoom: 3,
      center: myLatLng,
      mapTypeId: google.maps.MapTypeId.TERRAIN
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var coordinates = [
        new google.maps.LatLng(37.772323, -122.214897),
        new google.maps.LatLng(21.291982, -157.821856),
        new google.maps.LatLng(-18.142599, 178.431),
        new google.maps.LatLng(-27.46758, 153.027892)
    ];
    console.log(google.maps.geometry.spherical.computeLength(coordinates));

  }
</script> 
```

# facebook - 用户与 Facebook sdk 分享后调用方法

> ID：10873987
> 
> 赞同：0
> 
> 时间：2012-06-03T21:12:02.770
> 
> 标签：facebook, facebook-graph-api

我过去曾使用过 addThis 和共享工具包，但厌倦了遇到问题。我终于浏览了 Facebook sdk 的东西并让它工作。我正在使用它来发布到用户的墙上......

```
-(IBAction)fbPost:(id)sender
{
if (![facebook isSessionValid]) {
    NSArray *permissions = [[NSArray alloc] initWithObjects:
                            @"user_likes", 
                            @"read_stream",
                            @"publish_stream",
                            nil];
    [facebook authorize:permissions];

}

SBJSON *jsonWriter = [SBJSON new];

NSDictionary* actionLinks = [NSArray arrayWithObjects:[NSDictionary dictionaryWithObjectsAndKeys:
                                                       @"Always Running",@"text",@"http://itsti.me/",@"href", nil], nil];

NSString *actionLinksStr = [jsonWriter stringWithObject:actionLinks];
NSDictionary* attachment = [NSDictionary dictionaryWithObjectsAndKeys:
                            @"Name", @"name",
                            @"Test Caption", @"caption",
                            @"This sure is fun", @"description",
                            @"http://www.test.com/", @"href", nil];
NSString *attachmentStr = [jsonWriter stringWithObject:attachment];
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:@“xxxxxxxxxx",@"app_id",
                               @"Share on Facebook",  @"user_message_prompt",
                               actionLinksStr, @"action_links",
                               attachmentStr, @"attachment",
                               @"Here is the message",@"message",
                               nil];

AppDelegate *aDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[aDelegate.facebook dialog:@"stream.publish" andParams:params andDelegate:self];
} 
```

我的问题是......我有办法告诉用户张贴到他们的墙上吗？例如，我想发布一条消息“感谢您在 Facebook 上分享”或其他内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T22:26:41.903

我不是 ios 开发人员，但从[FBDialogDelegate 文档](http://developers.facebook.com/docs/reference/iossdk/FBDialogDelegate/)看来，您可以知道用户何时使用该`dialogDidComplete`方法发布：

> 该方法在对话成功并即将被隐藏后调用。您可以使用此方法来处理对话流的成功路径。

您可能还想检查其他方法以了解用户是否取消或出现错误。

看起来您正在传递`self`对话框，只需在那里实现这些方法。

# ruby-on-rails - 为什么我不能从控制器访问方法？

> ID：10873990
> 
> 赞同：0
> 
> 时间：2012-06-03T21:12:31.280
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, nomethoderror

首先，我正在创建一个 Rails 应用程序，我试图在我的模型中分离一些逻辑，并将其放在一个单独的类中来处理这个逻辑。

因此，我在 app/models 目录中创建了一个名为 upload_processor.rb 的新文件，其中包含以下内容：

```
class UploadProcessor

  def self.process_file(filename)
    Rails.logger.debug "This is a test for separating logic #{filename}"
  end
end 
```

我从我的控制器调用这个方法是这样的：

```
UploadProcessor.process_file!("filename") 
```

因此，当我想检查这是否有效时，我会从 rails 得到错误：

ArticlesController#upload_file 中的 NoMethodError => 未定义的方法 `process_file!' 对于 UploadProcessor:Class

那么有没有人可以告诉我哪里做错了？

非常感谢！

# javascript - Open Graph API 排序顺序，或简单的 jQuery/JavaScript 排序

> ID：10873994
> 
> 赞同：0
> 
> 时间：2012-06-03T21:13:09.160
> 
> 标签：javascript, jquery, facebook-graph-api, sorting

我通过调用以下命令获取好友分数列表：

```
https://graph.facebook.com/<appid>/scores?access_token=' + userToken; 
```

它效果很好，但我想按最高分（result.score）排序。有很多分页选项，例如“限制、偏移、直到”，您可以在 URL 中指定内联，但我在文档中没有看到任何用于排序的内容。

如果这不可能，那么在 jQuery 或 JavaScript 中对以下语句进行排序的**最简单方法是什么：**

```
 success: function (data) {
     $("#highScores").html("");
     $.each(data.data, function (i, item) {
         $("#highScores").append("<div class='score'><span class='scoreName'>" + item.user.name + "</span><span class='scoreValue'>" + item.score + "</span>");
     });
 }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T21:14:52.373

我只是想到了一个技巧，如果有人没有更简单的解决方案，我会使用它。

保存最后一个分数，如果新分数更高，请添加而不是附加。

```
 success: function (data) {
        $("#highScores").html("");
        var lastScore = 0;
        $.each(data.data, function (i, item) {
            if (lastScore < item.score) {
                $("#highScores").prepend("<div class='score'><span class='scoreName'>" + item.user.name + "</span><span class='scoreValue'>" + item.score + "</span>");
            } else {
                $("#highScores").append("<div class='score'><span class='scoreName'>" + item.user.name + "</span><span class='scoreValue'>" + item.score + "</span>");
            }
            lastScore = item.score;
        });
    }, 
```

# android - PhoneGap/Cordova 日历集成 (Android)

> ID：10873997
> 
> 赞同：4
> 
> 时间：2012-06-03T21:13:21.187
> 
> 标签：android, cordova, android-intent, phonegap-plugins, android-calendar

我正在使用 PhoneGap（又名 Cordova）构建一个 Android 应用程序，但无法让日历集成正常工作。 **免责声明：**我是 Android 和 PhoneGap 的菜鸟，请多多包涵。

我要做的就是向用户的日历添加一个事件。按照[本教程](http://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-android.html)，我创建了一个尝试启动日历意图的插件。代码如下所示：

```
public class CalendarPlugin extends Plugin {
public static final String NATIVE_ACTION_STRING="addToCalendar"; 
public static final String SUCCESS_PARAMETER="success"; 

@Override
public PluginResult execute(String action, JSONArray data, String callbackId) {
    if (NATIVE_ACTION_STRING.equals(action)) { 
        Calendar beginTime = Calendar.getInstance();
        beginTime.set(2012, 6, 19, 7, 30);
        Calendar endTime = Calendar.getInstance();
        endTime.set(2012, 6, 19, 8, 30);

        Intent calIntent = new Intent((Context) this.ctx, CalendarPlugin.class)
            .setAction(Intent.ACTION_INSERT)
            .putExtra(Events.TITLE, "A new event")
            .putExtra(CalendarContract.EXTRA_EVENT_ALL_DAY, true)
            .putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, beginTime.getTimeInMillis())
            .putExtra(CalendarContract.EXTRA_EVENT_END_TIME, endTime.getTimeInMillis());

        this.ctx.startActivity(calIntent);
        return new PluginResult(PluginResult.Status.OK, "Smashing success");
    }

return new PluginResult(PluginResult.Status.ERROR, "Didn't work bro");
}
} 
```

调用此插件的 Javascript 代码是标准的：

```
var CalendarPlugin = { 
    callNativeFunction: function (success, fail, resultType) { 
        if (cordova) {
            return cordova.exec( success, fail, 
                "org.myorg.appname.CalendarPlugin", 
                "addToCalendar", [resultType]);
        }
        else {
            alert("Calendar function is not available here.");
        }
    } 
}; 
```

正在调用 Android 代码（使用断点确认）。但是返回给 Javascript 代码的结果是一个错误：

> 找不到明确的活动类 {org.myorg.appname/org.myorg.appname.CalendarPlugin}；您是否在 AndroidManifest.xml 中声明了此活动？

教程中没有提到添加到 AndroidManifest.xml，这让我相信我遗漏了一些东西（此外，*CalendarPlugin*代码正在成功调用，那么怎么会出现错误说找不到*CalendarPlugin*类呢？ ）。如果确实需要将*CalendarPlugin*添加到清单中，我将如何去做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T22:16:56.307

引用的教程没有涵盖意图。您将数据发送到的意图是您自己的 CalendarPlugIn 类，这不是您想要的，因为它不处理意图。

有关意图，请参阅[http://developer.android.com/guide/topics/intents/intents-filters.html 。](http://developer.android.com/guide/topics/intents/intents-filters.html)

此外，如果您搜索 SO，您会发现在 ICS 之前，甚至没有办法在不使用网络服务的情况下正式将内容添加到 Google 日历。有一些非官方的方法可以做到这一点，但受制于谷歌或 ODM 本身的突发奇想。

更新：

您应该能够使用 Phonegap 的意图（通过插件）。我只添加了注释以说明如果您打算在您的应用程序中集成日历，如果您想支持大多数 Android 设备，您可能需要做一些研究。如果您有兴趣在 ICS 中添加日历事件，请查看：http: [//developer.android.com/reference/android/provider/CalendarContract.html](http://developer.android.com/reference/android/provider/CalendarContract.html)

*操作编辑*

我只需要修复*Intent*构造函数，这按预期工作：

```
Uri uri = Uri.parse("content://com.android.calendar/events");
Intent calIntent = new Intent("android.intent.action.INSERT", uri) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:47:04.513

为了使其适用于所有 android sdk 版本，请尝试以下代码

```
 Intent intent = new Intent(Intent.ACTION_EDIT);
 intent.setType("vnd.android.cursor.item/event"); 
```

我试过它为我工作。