# StackOverflow 问答 11775000-11775999

# xml - Haskell HXT 解析条件

> ID：11775002
> 
> 赞同：2
> 
> 时间：2012-08-02T09:50:39.150
> 
> 标签：xml, haskell, hxt

我正在尝试解析这个 xml：

```
...
<member>
  <name>id</name>
  <value>
    <string>1</string>
  </value>
</member>
<member>
  <name>description</name>
  <value>
    <string>sdfsdfsdf</string>
  </value>
</member>
... 
```

如何仅解析具有从属“name”-tag =“id”的“<member>”标签？

我试过了：

```
getroot = multi ( ( getChildren >>> hasName "name" >>> hasText "id") `guards` (isElem >>> hasName "member"  ) ) 

main = do
print <- runX (parseXML "test2.xml" >>> getroot >>> putXmlTree "-") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:37:32.457

当你使用 filter`hasName "name"`时，你会得到`<name>`标签。该节点本身不是文本节点，因此`hasText "id"`失败。这是一个似乎可行的修改：（我还必须更改 的参数类型`hasText`，可能是 HXT 的不同版本）

```
import Text.XML.HXT.Core

getroot = multi ( ( getChildren >>> hasName "name" >>> getChildren >>> hasText (=="id")) 
                   `guards` (isElem >>> hasName "member"  ) ) 

main = do
    runX (readDocument [] "test2.xml" >>> getroot >>> putXmlTree "-") 
```

我不是 HXT 的专家，所以可能有更好的方法来做你想做的事。

# javascript - 使用 Knockoutjs 时出现 JqueryMobile 问题

> ID：11775005
> 
> 赞同：0
> 
> 时间：2012-08-02T09:50:50.920
> 
> 标签：javascript, jquery-mobile, knockout.js, knockout-2.0

我发现当元素由 knockoutjs 生成时，jquery mobile 无法正确呈现（或者在动态生成元素时可能无法正确呈现）。[请参阅http://jsfiddle.net/wRRZk/1/](http://jsfiddle.net/wRRZk/1/)上的演示

**更新**：

一种解决方案是在 KO 绑定完成后加载 jquery-mobile js 文件，如[http://jsfiddle.net/wRRZk/3/](http://jsfiddle.net/wRRZk/3/)所示，但这并不能解决动态更改 KO 模型时 jquerymobile 渲染失败的问题，如图所示在[http://jsfiddle.net/wRRZk/4/](http://jsfiddle.net/wRRZk/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:27:08.633

我认为您需要告诉 jQueryMobile 使用 API 将这些元素创建到 jQM 增强版本中。检查这里 :: [http://jquerymobile.com/demos/1.1.1/docs/pages/page-scripting.html](http://jquerymobile.com/demos/1.1.1/docs/pages/page-scripting.html)并在中途查看“增强新标记”和下面的部分。

至于创建/刷新 ... 可能需要明智地知道何时何地添加新内容，以及是否需要创建或刷新。

我在这里做了一个新版本的 jsFiddle :: [http://jsfiddle.net/wRRZk/5/](http://jsfiddle.net/wRRZk/5/)。之后我也从模型中删除，这似乎也删除了链接，但是，我*认为*这也可能是因为 jQM 增强保持相同的锚点，因此参考敲除仍然有效。

不太确定这对 jQM 完成的其他增强功能有多好。

# java - 获取当前月份

> ID：11775007
> 
> 赞同：0
> 
> 时间：2012-08-02T09:50:51.710
> 
> 标签：java, mysql

这是我的数据库示例：

*   状态日期

*   问 2012-08-02。

*   问 2012-08-01。
*   问 2012-09-03。

在这里，如果我运行我的应用程序意味着我希望显示 2。这是执行以下信息。- 查看数据库**当前月份+status=Q**显示你总共获得了多少匹配信息。例如total 2 表示输出显示为2。

**我已经完成了当前日期+状态=Q**信息的总计数值。它已成功完成。在这里我使用了这个代码：

```
public class RetailerWs {
public int data(){
int count=0;

//count++;

try{
  Class.forName("com.mysql.jdbc.Driver");
  Connection con = DriverManager
     .getConnection("jdbc:mysql://localhost:3306/pro","root","");

  PreparedStatement statement =  con
     .prepareStatement("select * from orders where status='Q' AND date=CURDATE()");
  ResultSet result = statement.executeQuery();

  while(result.next()) {
    // Do something with the row returned.
    count++; //if the first col is a count.
  }     
}
catch (Exception exc) {
  System.out.println(exc.getMessage());
}

return count;
 }
 } 
```

另一类是：

```
public class Demo {
public static void main(String[] args){
    RetailerWs obj = new RetailerWs();
    System.out.println(obj.data());
 }

} 
```

上面的代码用于获取**当前日期 + status=Q**的信息。请帮助我如何编写**当前月份的代码 + status=Q** ....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:54:41.477

它应该是：

```
select * from orders where status='Q' AND MONTH(date) = MONTH(CURDATE()) 
```

有关MySQL 的日期和时间函数的更多信息，请参阅[THIS 。](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

一周，尝试：

```
select * from orders where status='Q' AND WEEK(date) = WEEK(CURDATE()) 
```

对于今年的一周，尝试：

```
select * from orders where status='Q' AND WEEK(date) = WEEK(CURDATE()) AND YEAR(date) = YEAR(CURDATE()) 
```

要在一次检查中完成所有操作，请使用：

```
select * from orders where status='Q' AND YEARWEEK(date) = YEARWEEK(CURDATE()) 
```

# jquery - jQuery 选项卡，从内部链接到另一个选项卡

> ID：11775008
> 
> 赞同：0
> 
> 时间：2012-08-02T09:51:02.933
> 
> 标签：jquery, jquery-ui

我有[jQuery ui 选项卡](http://jqueryui.com/demos/tabs/)，我希望能够从链接打开一个选项卡（在当前选项卡或页面的内部或外部）

如果链接在外部页面中并且看起来像这样，它确实有效：

```
http://server.com/view.php?id=130#section-2 
```

这会正确打开选项卡“section-2”

问题是当链接在同一页面中时，它不会刷新页面（因为它只是添加了#section-2），因此不会选择选项卡。

我看到了一些在标签中使用 id 并在 jQuery 中绑定点击的答案示例，但我不能使用它，因为我的一些链接是计算出来的，我不知道它们是指向内部还是外部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:08:46.443

将 ID“section-2-link”添加到链接到选项卡的标签（在末尾添加“-link”以避免与选项卡内容具有相同的 ID）。然后将其添加到js

```
jQuery(window).bind('hashchange', function () { //detect hash change
    var hash = window.location.hash.slice(1); //hash to string (= "section-2")
    jQuery('#' + hash + '-link').trigger("click");
}); 
```

这会检测到 url 上的哈希何时更改并触发单击您需要的链接（打开正确的选项卡）

# java - 是否可以在 web.xml 中使用基于配置文件的过滤器

> ID：11775012
> 
> 赞同：2
> 
> 时间：2012-08-02T09:51:20.390
> 
> 标签：java, servlets, spring-security, web.xml

是否可以在 web.xml 中使用基于配置文件的过滤器？例如

```
 <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
         <init-param>
            <param-name>spring.profiles.active</param-name>
            <param-value>secured</param-value>
        </init-param>
    </filter> 
```

我知道这对于 servlet 是可能的，但我似乎无法让它适用于过滤器。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T22:21:58.613

# 原始答案

Filters 使用从 ContextLoaderListener 加载的 ApplicationContext，因此`<init-param>`不使用到 Filter。相反，您将希望使用其中一种激活 ContextLoaderListener 的配置文件的方法。一种方法是使用 a ，如下所示：

```
<context-param>
    <param-name>spring.profiles.active</param-name>
    <param-value>secured</param-value>
</context-param> 
```

# 跟进

根据评论跟进。没有办法使用 Spring 配置文件省略过滤器，因为 web.xml 将始终加载 DelegatingFilterProxy，它总是尝试加载其委托。如果委托丢失，您将收到错误消息。相反，您可以创建一个禁用 Spring Security 的配置文件，如下所示：

```
<b:beans profile="default,secured">
  <http auto-config="true" use-expressions="true">
    <intercept-url pattern="/**" access="hasRole('ROLE_USER')" />
  </http>
  <authentication-manager>
    <authentication-provider>
      <user-service>
        <user name="user" password="password" authorities="ROLE_USER" />
      </user-service>
    </authentication-provider>
  </authentication-manager>
</b:beans>
<b:beans profile="insecure">
  <http security="none" />
</b:beans> 
```

然后，您可以通过激活 web.xml 中的不安全配置文件来禁用 Spring Security，如下所示。

```
<context-param>
    <param-name>spring.profiles.active</param-name>
    <param-value>insecure</param-value>
</context-param> 
```

如果您没有使用 Spring Security，您可以通过创建一个过滤器来禁用过滤器，该过滤器除了继续过滤器链并将其放置在禁用的配置文件中之外什么都不做。例如：

```
public class DoFilterChainFilter implements Filter {
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        chain.doFilter(request, response);
    }
    public void destroy() { }
    public void init(FilterConfig filterConfig) throws ServletException { }
} 
```

# android - 如何在android中创建像pulse这样的自定义UI

> ID：11775017
> 
> 赞同：0
> 
> 时间：2012-08-02T09:51:46.187
> 
> 标签：android, android-layout

我正在尝试创建一个类似于脉冲 android 应用程序的自定义 UI。据我了解，首先我必须先创建一个自定义按钮，如下图所示。

![在此处输入图像描述](../Images/d9adb89b55097b7eb365173c5dfc2154.png)

我的按钮上有一个图像和文本覆盖。我知道这是一个基本问题，但我正面临这个问题，因为我是 android 开发的初学者。请帮助我了解如何处理这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T11:52:07.647

您可以用黑色文本和一些透明度组成一个从 an`ImageView`和 a`TextView`到底部对齐的简单布局。两个视图都应该放在 a`RelativeLayout.`然后你设置一个点击监听器`RelativeLayout`并在点击时采取适当的行动。

前任：

```
<RelativeLayout
    android:id="@+id/item"
    android:layout_width="150dp"
    android:layout_height="150dp" >

    <ImageView
        android:layout_width="150dp"
        android:layout_height="150dp"
        android:src="@drawable/my_test_image" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:layout_alignParentBottom="true"
        android:background="#4000"
        android:text="Giorgio Armany Galaxy S"
        android:textColor="#FFF" />

</RelativeLayout> 
```

然后在你的程序中：

```
RelativeLayout item=(RelativeLayout)findViewById(R.id.item);
    item.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // take action
        }
}); 
```

这是一种情况。另一种情况是，如果您愿意，可以扩展`Button`和组合您的自定义 UI 组件，这将涉及更多编码，但您将拥有一个独特的组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:50:00.280

如果它回答了您的问题，请接受答案。

现在关于与网格集成的部分：将上面示例的 XML 内容（RelativeLayout + ImageView + TextView）保存到一个新的 XML 文件中，让它成为`layout/grid_item.xml`. 为and
添加一个唯一`id`的`ImageView``TextView`

然后在`getView()`你的适配器的方法中膨胀该布局并通过 id 找到 ImageView 和 TextView，并设置适当的内容。

请注意，这不是完整的源代码，但基本架构应如下所示：

```
public View getView(int position, View convertView, ViewGroup parent) {
    ....
    convertView = mInflater.inflate(R.layout.grid_item, null);
    ....

    ImageView myImage=(ImageView)convertView.findViewById(R.id.my_image);
    TextView myTextView=(TextView)convertView.findViewById(R.id.my_textview);

    myImage.setImageResource(...);
    myTextView.setText(...);
    ...

    return convertView
} 
```

# java - 安卓apk版本

> ID：11775027
> 
> 赞同：0
> 
> 时间：2012-08-02T09:52:11.620
> 
> 标签：java, android

我正在构建一个安卓应用程序。Eclipse 将我的项目的 android 版本列为 4.1（我知道如何更改它）。

我现在如何查看和更改最小值和最大值。兼容性所需的 android 设备的版本号（在我的情况下是 10-15），位于 android 清单文件中。

我有一个非常简单的问题，但我只需要有人确认，因为我无法得到我（非常初学者）问题的明确答案。

如果 eclipse 将我的 android 版本列为 4.1，那么该项目是仅为 4.1 生成的 apk 吗？换句话说，我是否需要在 4.0.3 上生成一个带有 eclipse 设置的 apk 才能在 4.0.3 设备上执行该文件？或者兼容性设置（10-15）是否自动暗示了这一点。

对不起，我在为平台编译和方法的兼容性之间有点困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:16:20.367

```
If eclipse lists my android version as 4.1, is the project is apk generated only for 4.1? 
```

答案是否定的。Android 需要 Android 1.5 或更高版本的运行时（在您的 AndroidManifest.xml 中将 android:minSdkVersion 设置为至少 3）。这意味着您可以使用最新版本的 Android SDK 进行开发，并且您的应用仍将在较早的 Android 版本（最低 1.5）上运行。`So if you compile with 4.1(set in project.properties android-14) and set minsdkversion 3 the you can run it with any device`还阅读此链接中的要求[https://developers.google.com/mobile-ads-sdk/docs/](https://developers.google.com/mobile-ads-sdk/docs/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:55:13.530

兼容性设置就足够了。我正在开发一个将 compat 设置设置为 8-15 的应用程序，Eclipse 将其显示为 4.1，但它在我的 2.3.5 设备上运行良好。

# php - 获取年度季度的开始和结束日期

> ID：11775029
> 
> 赞同：1
> 
> 时间：2012-08-02T09:52:14.627
> 
> 标签：php, date

有谁知道，如何获得一年季度的开始和结束日期？基本上我需要当前季度和接下来三个季度的开始和结束日期。

我有一个下拉列表，它的日期应该动态填充，如下所示：

```
<select name="quarter-selection">
        <option value="2012-07-01,2012-09-31">Q3 2012</option>
        <option value="2012-10-01,2012-12-31">Q4 2012</option>
        <option value="2013-01-01,2013-03-31">Q1 2013</option>
        <option value="2013-04-01,2013-06-30">Q2 2013</option>
    </select> 
```

任何帮助高度赞赏。谢谢，弗洛里安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:58:16.947

您可以通过以下方式轻松获得它：

```
$q1 = array(
    'start' => date('Y-m-d', mktime(0, 0, 0, 1, 1, 2012)),
    'end' => date('Y-m-d', mktime(0, 0, 0, 3, date('t', mktime(0, 0, 0, 3, 1, 2012)), 2012))
);
$q2 = array(
    'start' => date('Y-m-d', mktime(0, 0, 0, 4, 1, 2012)),
    'end' => date('Y-m-d', mktime(0, 0, 0, 6, date('t', mktime(0, 0, 0, 3, 1, 2012)), 2012))
);
$q3 = array(
    'start' => date('Y-m-d', mktime(0, 0, 0, 7, 1, 2012)),
    'end' => date('Y-m-d', mktime(0, 0, 0, 9, date('t', mktime(0, 0, 0, 3, 1, 2012)), 2012]))
);
$q4 = array(
    'start' => date('Y-m-d', mktime(0, 0, 0, 10, 1, 2012)),
    'end' => date('Y-m-d', mktime(0, 0, 0, 12, date('t', mktime(0, 0, 0, 3, 1, 2012)), 2012))
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-07T05:29:35.207

# objective-c - 更改 UISegmentedControl，参考，标题

> ID：11775034
> 
> 赞同：0
> 
> 时间：2012-08-02T09:52:28.360
> 
> 标签：objective-c, ios, uisegmentedcontrol

我在 XIB 中描述了分段控制（完全在情节提要中）并且参考了控制器类。我正在尝试根据语言更改分段控件标题，但无法更改。当我记录我的分段控件时，它说它没有任何分段，即使我已经在 XIB 中制作它们或以编程方式创建它们。有人知道出了什么问题吗？

代码：

```
NSLog(@"segments:%d", [segmentControl numberOfSegments]);
[segmentControl removeAllSegments];
[segmentControl insertSegmentWithTitle:@"stuff" atIndex:0 animated:NO];
[segmentControl insertSegmentWithTitle:@"other stuff" atIndex:1 animated:NO];
NSLog(@"segments:%d", [segmentControl numberOfSegments]); 
```

两个日志输出都显示为零

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:23:49.890

我发现问题不是我的代码，而是故事板本身（我玩了半天的本地化）

我发现即使我有一个情节提要，但它在 en.Iproj 中弄得一团糟（看起来另一种语言无法达到它）。我把它放到主文件夹中，现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:14:50.410

```
    - (void)loadView
    {
            [超级负载视图];
            UISegmentedControl *seg = [[UISegmentedControl alloc] initWithItems:
                                       [NSArray arrayWithObjects:@"111", @"2222", @"333", nil]];
            seg.frame = CGRectMake(0, 0, 300, 50);
            [seg addTarget:self action:@selector(changed:) forControlEvents:UIControlEventValueChanged];
            [self.view addSubview:seg];
            [段发布]；
    }

    - (void)changed:(UISegmentedControl *)segmentControl
    {
            NSLog(@"segments:%d", [segmentControl numberOfSegments]);
            [segmentControl removeAllSegments];
            [segmentControl insertSegmentWithTitle:@"stuff" atIndex:0 动画：NO];
            [segmentControl insertSegmentWithTitle:@"other stuff" atIndex:1 动画：NO];
            NSLog(@"segments:%d", [segmentControl numberOfSegments]);
    }

```

您的代码工作正常。

# android - 大视频到字符串 base64 导致内存不足错误

> ID：11775036
> 
> 赞同：3
> 
> 时间：2012-08-02T09:52:32.740
> 
> 标签：android, string, web-services, bytearray

我需要将视频发送到.net 中的 web 服务，我发送一个字符串 base64 编码，如果视频大约 2MB 或 6 o 7 秒就可以了，但是当我做 Bas.encode[byte[] 时，什么时候更重会导致内存不足错误);

这是我的代码：

```
videoPath = getRealPathFromURI(fileUri);
                            File tmpFile = new File(videoPath);
                            in = null;
                            in = new BufferedInputStream(new FileInputStream(tmpFile));
                            bos = new ByteArrayOutputStream();
                            long tamano = tmpFile.length();
                            int iTamano = (int) tamano;
                            byte[] b = new byte[iTamano];
                            int bytesRead;
                            while ((bytesRead = in.read(b)) != -1) {
                                bos.write(b, 0, bytesRead);
                            }
                            ficheroAEnviar = bos.toByteArray();
try {
                    strBase64 = Base64.encode(ficheroAEnviar);

                }
                catch (Exception e) {

                    correcto = false;
                    e.printStackTrace();
                } 
```

此行崩溃：strBase64 = Base64.encode(ficheroAEnviar);

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T10:32:12.383

你不能这样做。内存是android中的一个问题。您应该将视频分成几部分，对每个部分进行编码，发送它（我认为您想通过 WS 或其他方式发送它）并在目的地重新组合它。

# html - 谷歌地图重写了我在 KML 文件中传递给它的链接

> ID：11775038
> 
> 赞同：0
> 
> 时间：2012-08-02T09:52:43.427
> 
> 标签：html, google-maps, kml

我通过 KML 文件将我的数据集传递给了谷歌地图。在 KML 文件的描述中，我向每个 KML 展示位置添加了一个类似 *"<a href="www.whatever.com" target="_blank >"* 的链接。当我在 Google 地图上查看我的地标时，我意识到它将我的目标属性更改为“target=_blank”。

是否有可能抑制或避免重写我的 url 属性？

这是我的 KML 文件：

```
<kml xmlns="http://www.opengis.net/kml/2.2">
   <Document>
      <name>Notarsuche Mobil</name>
         <Placemark>
             <name>Street 30, 1000 Some City</name>
             <description> Steve's Place &lt;a target='_self' href='http://www.steveshome.com' &gt; details &lt;/a&gt; &lt;br /&gt; 
             </description>

                <Style id="normalPlacemark">
                    <IconStyle>
                        <Icon>
                            <href>http://www.linktoanicon.com</href>
                        </Icon>
                    </IconStyle>
                </Style>

                <Point>
                   <coordinates>12.91588070, 46.19427120</coordinates>
                </Point>

            </Placemark>
         </Document>
     </kml> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:06:13.417

See

*   [original link](https://developers.google.com/kml/documentation/kmlelementsinmaps) (no longer valid)
*   [updated link](https://developers.google.com/maps/documentation/javascript/kmllayer#supported-elements)

it states:

```
KML Element   | Supported in Google Maps? | Comment
<description> | yes                       | HTML content is allowed but is sanitized to protect from cross-browser attacks; entity replacements of the form $[dataName] are unsupported. 
```

See [this message](https://groups.google.com/group/google-maps-api/msg/619dbf05ccaa097e) from the Google Maps v2 API group for an explanation by Mike Williams.

# nunit - NUnit 服务器网页界面

> ID：11775042
> 
> 赞同：1
> 
> 时间：2012-08-02T09:53:20.583
> 
> 标签：nunit

我正在寻找一种带有 Web 界面的 NUnit 服务器，我可以在其中开始我的 NUnit 测试，同时在度假或旅途中......有任何设置可以实现我的想法或者我需要开发一些东西吗？

到目前为止，当我搜索远程控制或 Web 界面时，我发现的只是在多台机器上设置了 NUnit。

亲切的问候

bnz

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:15:58.153

[JetBrains TeamCity](http://www.jetbrains.com/teamcity/)等持续集成工具可以提供自动化 NUnit 测试作为新构建的一部分。可以通过*TeamCity 的*Web 界面手动启动新构建，并且构建/测试结果也可以通过 Web 轻松检索。

*TeamCity*是一种商业产品，但如果您的项目符合开源项目的条件，您可以申请[免费的](http://www.jetbrains.com/teamcity/buy/index.jsp) *TeamCity*许可证。

**更新**列出了一些我没有个人经验的替代持续集成服务器。

还有[Jenkins](http://jenkins-ci.org/)，一个主要用于 Java 开发的开源持续集成服务器，但它附带了用于 MSBuild 和 NUnit 的插件，以及大量的版本控制软件插件。

[CruiseControl](http://cruisecontrol.sourceforge.net/)是开源的，也主要针对 Java 开发。也可用作名为[CruiseControl.NET](http://www.cruisecontrolnet.org/)的 .NET 实现。

可以在[Wikipedia](http://en.wikipedia.org/wiki/Comparison_of_continuous_integration_software)上找到不同持续集成软件的完整列表。

# c# - Binding Checkboxlist

> ID：11775044
> 
> 赞同：4
> 
> 时间：2012-08-02T09:53:34.280
> 
> 标签：c#, asp.net, data-binding, checkboxlist

I need a simple way to bind the checkboxlist in `asp.net /C#`.

I am pulling 3 columns from database Id, Name and IsActive. Id and Name i think will be clear by its name. And IsActive will be used to show checked and unchecked box. I just want to know, **can I bind the child check box values with IsActive while data binding?**

E.g.

```
cbxlFeatures.DataSource = dt;
cbxlFeatures.DataValueField = "Id";
cbxlFeatures.DataTextField = "Name"; // something similar to this
cbxlFeatures.SomePropert= "IsActive";
cbxlFeatures.DataBind(); 
```

I know the conventional way to iterate through the items and data columns and compare and put checks. I need some easy and optimized way...

Thanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T16:05:41.990

Try manually populating your checkboxlist instead, I believe the code below would do the trick for you.

```
private void PopulateCheckBoxList( List<MyClass> myClassList )
{
    foreach ( MyClass m in myClassList )
    {
        ListItem item = new ListItem( m.Name, m.Id.ToString() );
        item.Selected = m.IsActive;
        cbxlFeatures.Items.Add( item );
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:03:39.187

Unfortunately I don't think there is a way of doing this with a property of CheckBoxList. Iterating through the items seems that it may be the solution.

# php - PHP MySQL - 通过速度指定跟踪的车辆状态，MOVE STOP START

> ID：11775045
> 
> 赞同：0
> 
> 时间：2012-08-02T09:53:33.923
> 
> 标签：php, mysql

下`data`表：

```
/* TableName:Data */
  id  |  speed
----------------
   1  |   3
   2  |   0
   3  |   0
   4  |   5
   5  |   6
   6  |   7
   7  |   0
   8  |   0
   9  |   0
  10  |   3
   N  |   2 
```

我想要一个结果（不重复零速），并指定移动状态；***例子 ：***

如果第一行速度为零，`Remove it from result`否则显示，`state=START/MOVE`
如果移动状态后第一行速度为零，则设置`state=STOP`
如果速度在速度为零后以零值重复，`Remove it from result`
如果速度不为零，则设置`state=START`

***示例结果：***

```
 /* Results */
  id  |  speed  | status
-------------------------
   1  |   3     |  START/MOVE
   2  |   0     |  STOP
   4  |   5     |  START
   5  |   6     |  MOVE
   6  |   7     |  MOVE
   7  |   0     |  STOP
  10  |   3     |  START
   N  |   2     |  MOVE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:16:24.650

```
SELECT     a.*, 
           CASE WHEN @val IS NULL THEN @val:='START/MOVE'
                WHEN speed = 0 AND @val IN ('START/MOVE', 'START', 'MOVE') THEN @val:='STOP'
                WHEN speed > 0 AND @val = 'STOP' THEN @val:='START'
                WHEN speed > 0 AND @val IN ('START', 'MOVE') THEN @val:='MOVE'
           END AS status
FROM       (
           SELECT    a.*
           FROM      data a 
           LEFT JOIN (
                     SELECT MIN(id)-1 AS id, 0 AS speed
                     FROM   data 

                     UNION ALL

                     SELECT id, speed
                     FROM   data 
                     ) b ON a.id = b.id + 1 AND (a.speed,b.speed) IN ((0,0))
           WHERE     b.id IS NULL
           ) a
CROSS JOIN (SELECT @val:=NULL) val_init 
```

测试和工作。

我会展示一个 SQLFiddle 演示，但不幸的是，他们的网站目前已关闭。

# asp.net - IE9 不会播放视频 标签出现红叉 asp.net

> ID：11775049
> 
> 赞同：0
> 
> 时间：2012-08-02T09:53:38.440
> 
> 标签：asp.net, html, internet-explorer-9, html5-video

我一直无法在 IE9 上播放视频。我正在 Visual Studio 2010 上开发，所以我使用的是 Cassini。Chrome 可以很好地播放视频，但在 IE 上会出现一个红十字。我读了很多，大多数问题似乎是因为 MIME 配置。所以我把

```
 <staticContent>
          <mimeMap fileExtension=".mp4" mimeType="video/mp4" />
    </staticContent> 
```

进入 system.webserver 下的 web.config 并使用 IIS Express 而不是 CAssini 来运行该站点。这就是我得到这个错误的时候。

![在此处输入图像描述](../Images/16e3cd1f8755cd5cbe215d00d0e40956.png)

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:23:28.297

通过更多的研究和阅读......我稍微调整了 web.config，现在 IE9 可以播放我的视频......魔术：D

```
 <validation validateIntegratedModeConfiguration="false" />
      <staticContent>
          <remove fileExtension=".mp4" />
          <mimeMap fileExtension=".mp4" mimeType="video/mp4" />
      </staticContent> 
```

代码背后

```
 Dim FileName As String = dt.Rows(0).Item("FileName")
    Dim Location As String = dt.Rows(0).Item("RESLOCATION")
    Dim str As New StringBuilder
    str.Append("<video width='320' height='240' controls='controls'>")
    str.Append("<source src='")
    str.Append(Location & FileName)
    str.Append("' type='video/mp4' />")
    str.Append("</video>")
    videodiv.InnerHtml = str.ToString 
```

象素

```
 <div id="videodiv" runat="server"></div> 
```

# android - Android：如果按下返回或菜单按钮，则在启动屏幕期间退出应用程序？

> ID：11775059
> 
> 赞同：0
> 
> 时间：2012-08-02T09:54:18.270
> 
> 标签：android, splash-screen

这是源代码。`back`这是一个基本的初始屏幕，如果按下或`menu`按钮，我想完成此活动。

```
try {
  super.run();
  /**
  * use while to get the splash time. Use sleep() to increase
  * the wait variable for every 100L.
  */
  while (wait < welcomeScreenDisplay) {
    sleep(100);
    wait += 100;
  }
} catch (Exception e) {
  System.out.println("EXc=" + e);
} finally {
  /**
  * Called after splash times up. Do some action after splash
  * times up. Here we moved to another main activity class
  */
  startActivity(new Intent(SplashScreenActivity.this,
  StartActivity.class));
  finish();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:05:33.467

```
 @Override
        public void onBackPressed() {
            // TODO Auto-generated method stub

            super.onBackPressed();
                finish();

    } 
```

使用上述方法完成活动。这是按下后退或菜单按钮时关闭活动的覆盖方法之一

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:08:35.700

在您的初始屏幕类中执行以下操作，

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub

    if(keyCode == KeyEvent.KEYCODE_BACK) {
        finish();
        return true;
    }
    else if(keyCode == KeyEvent.KEYCODE_MENU) {
        finish();
        return true;
    }

    else
        return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T10:11:54.377

干得好。这是一个带有启动画面动画的示例，我初始化了一个新线程，在启动下一个活动之前等待动画，我使用同步，特别是如果我想停止它，你可以在 onTouchEvent 和 onKeyDown 方法中看到它。

```
 image.startAnimation(a);
            timer = new Thread() {
                public void run() {
                    try {
                        synchronized (this) {
                            wait(6500); // wait 6.5sec (animation time)
                        }
                    } catch (Exception e) {
                        e.printStackTrace();
                    } finally {
// After the 6.5 sec, start the new activity
                        Intent intent = new Intent(Splash.this, Login.class);
                        startActivity(intent);
                    }
                }
            };
            timer.start();

public boolean onTouchEvent(MotionEvent event) {
    synchronized (timer) {
        timer.notifyAll();
    }
    sound.release();
    finish();
    return super.onTouchEvent(event);

}

public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK)) {
        synchronized (timer) {
            timer.notifyAll();
        }
        sound.release();
        finish();
    }
    return super.onKeyDown(keyCode, event);
} 
```

希望能帮助到你 ！

# macos - Carbon/Cocoa 悬停在码头事件上

> ID：11775060
> 
> 赞同：1
> 
> 时间：2012-08-02T09:54:19.910
> 
> 标签：macos, cocoa, macos-carbon, dock, nscursor

我正在开发一个应用程序，它使用 Carbon 和 Cocoa 来处理一些为 Windows 编写的 C++ 代码。我目前遇到一个问题，当用户 cmd+tabs 离开窗口，或者只是将鼠标悬停在 Dock 上（不仅仅是应用程序的图标 - Dock 上的任何位置）时，光标（使用 Cocoa NSCursor 类) 从自定义光标更改为正常的 OS X 光标。

基本上，有谁知道当用户将鼠标悬停在 Dock 上时（Carbon 和 Cocoa）会发送什么到应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-17T18:47:16.723

这是因为 Dock 会覆盖任何光标更改。您需要做的是设置一个重复触发以更改光标的计时器。

首先创建一个让您更改光标的方法，然后设置 customCursor

```
func changeCursor() { 
    /* Code here to create custom cursor */
    customCursor.set() 
} 
```

然后当你准备改变光标时，你需要启动定时器并让它反复触发

```
//cursorTimer is an NSTimer object that you need to keep track of
self.cursorTimer = NSTimer.scheduledTimerWithTimeInterval(0.001, target:self, selector: "changeCursor", userInfo: nil, repeats: true) 
```

完成后，您可以使计时器无效

```
self.cursorTimer.invalidate() 
```

此外，这仅在您的应用程序处于最前面时才有效。如果有人按下 command+tab，您的应用将无法再设置光标。要使您的应用程序在后台控制光标，您必须使用私有 API，因此没有 Mac App Store。

在您的桥接头中，您可以添加以下代码

```
typedef int CGSConnectionID;
CGError CGSSetConnectionProperty(CGSConnectionID cid, CGSConnectionID targetCID, CFStringRef key, CFTypeRef value);
int _CGSDefaultConnection(); 
```

然后在您的 AppDelegate 中，您可以添加此代码`applicationDidFinishLaunching`

```
let propertyString = CFStringCreateWithCString(kCFAllocatorDefault, "SetsCursorInBackground", 0)
CGSSetConnectionProperty(_CGSDefaultConnection(), _CGSDefaultConnection(), propertyString, kCFBooleanTrue) 
```

# php - jquery语法帮助处理ajax数据

> ID：11775061
> 
> 赞同：0
> 
> 时间：2012-08-02T09:54:23.517
> 
> 标签：php, javascript, jquery

我有两个`form`标签。第二个通过发出 Ajax 请求，根据第一个中的选择预先填充选项。

`form`如果我将一些返回数据的示例传递给局部变量（请参见注释行），则数据将完美返回并且实际上预先填充了第二个。

任何建议都将不胜感激，因为我对 JavaScript 非常陌生，并且可能遗漏了一些明显的东西！我正在使用以下代码：

```
$(document).ready(function() {
    $('#table').change(function() {
        $.getJSON("/ajax_get", {
            id : $(this).val(),
            ajax : 'true'
        }, function(data) {
            /*
            var data = [
                { 
                    "optionValue":"actor_id", 
                    "optionDisplay": "actor_id"
                },
                {
                    "optionValue":"film_id", 
                    "optionDisplay": "film_id"
                },
                {
                    "optionValue":"priority", 
                    "optionDisplay": "priority"
                }
            ];
            */
            var $persons = $('#fields').empty();
            $.each(data, function() {
                $persons.append("<option value=" + this.optionValue + ">" + this.optionDisplay + "</option>");
            });
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:54:32.490

您正在使用 jQuery，因此`this`需要`$(this)`：

```
$.each(data, function() {
    $persons.append("<option value=" + $(this).optionValue + ">" + $(this).optionDisplay + "</option>");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:43:48.763

在绝对确定 JSON 语法方面，我没有学到任何有价值的教训。它最终成为返回数据中的一个额外逗号（由我在循环中操作数据的方式引起），使其成为无效的 JSON 响应。JQuery表单选项的循环和位置很好，但无效的 JSON 数据导致脚本静默失败。感谢那些提供建议的人。干杯。

# ssh - PHPFog 使用 SSH 连接

> ID：11775070
> 
> 赞同：0
> 
> 时间：2012-08-02T09:55:01.493
> 
> 标签：ssh, phpfog

我在我的 Mac 上使用 SSH 设置了一个 Github 帐户。现在我想使用 SSH 在我的 mac 上设置我的 PHPFog 帐户，但是我无法为其提供正确的 SSH 密钥。

如果我在我的 Mac 上打开 SSH 文件夹，我会看到 2 个名为`github_rsa`&的文件`github_rsa.pub`。打开名为的文件`github_rsa`会显示一个文本文件，其中包含以下内容

```
-----BEGIN RSA PRIVATE KEY-----
some-detail: 1
some-detail: 2

asdfasdfasdfasdfasdfasdfasdfasdf
asdfasdfsadfasdfasdfadsfasdfasdf
asdfasdfasdfasdfasdfasdfasdfasdfa
//goes on for a while

-----END RSA PRIVATE KEY----- 
```

如果我尝试将代码部分复制并粘贴到 PHPFog 中，它会告诉我它无效。如果我尝试将其粘贴到顶部带有 ssh-rsa 的 PHPFog 中，它仍然告诉我它不是有效的 SSH 密钥。我什至尝试生成一个密钥，但结果是一个看起来与上面相同的文本文件......

谁能告诉我如何获得正确的 SSH 密钥来复制并粘贴到 PHPFog 中。如果可能的话，最好使用我用于我的 Github 帐户的同一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:28:11.367

您应该创建一个不同的 ssh 密钥来提供给 PHP Fog。以下链接包含您需要的所有信息。

[http://docs.phpfog.com/getting-started/ssh/](http://docs.phpfog.com/getting-started/ssh/)

您需要提交 .pub 文件的内容而不是私钥。

# ios - 为什么我的 UIViewController 的视图在可见时被卸载？

> ID：11775072
> 
> 赞同：6
> 
> 时间：2012-08-02T09:55:05.350
> 
> 标签：ios, memory, memory-management, uiviewcontroller, viewdidunload

这个问题从来没有发生在我身上。我在 UINavigationController 中有一个 UIViewController。当收到内存警告时（不管级别），**可见**`viewDidUnload`控制器的方法被调用，所以视图被卸载，我得到一个很棒的黑屏（顶部有一个导航栏）。

 **我在 iOS 4.3.3 上使用 iPad 1 进行测试。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T23:38:27.670

据我了解，该`viewDidUnload`方法是由（超类）`didRecieveMemoryWarning`中的函数调用的。`UIViewController`基本上，iOS 会给你一些警告，并希望看到你的内存使用量下降。如果您继续忽略这些，操作系统将杀死您的应用程序。

但是，有时保持某些视图正常运行很重要，因此我解决此问题的方法是简单地覆盖该`didRecieveMemoryWarning`方法并在其中不做任何事情。

或者更好的是，检查是否`self`是 中的当前视图`self.navigationController.visibleViewController`，如果是，则不要将内存警告调用传递给`[super didRecieveMemoryWarning]`.

如果您持有图像缓存或其他东西，只需清空它们即可。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:33:01.997

您在控制器上的内存不足的情况下收到 viewDidUnload，iOS 已确定不再需要视图。请记住，Apple 在更高版本的 iOS 上对实现进行了一些改进，因此看到 5.x 下发生的情况可能会更糟。其次，您应该查看您的视图控制器层次结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T19:26:14.183

根据`Apple`内存管理指南，当一个`viewcontroller`在紧急情况下收到内存警告时，它会直接调用`viewDidUnload`，以便可以通过释放视图来管理内存。

它实际上 ios 提供了清除临时数据的机会，这在重新创建视图时会很有用。由于您是您看到的导航栏`UIViewCotroller`的根`viewcontroller`，因此视图被卸载。`navigationcontroller`**

# mongodb - MongoDB 错误：无法连接到服务器...在 createPrivateMap 中打开/创建失败

> ID：11775078
> 
> 赞同：3
> 
> 时间：2012-08-02T09:55:25.377
> 
> 标签：mongodb, debian, database

由于内存不足，mongod 自动关闭。(Debian)

```
~# reboot
~# mongo
MongoDB shell version: 2.0.6
connecting to: test
Thu Aug  2 13:12:26 Error: couldn't connect to server 127.0.0.1 shell/mongo.js:8 4
exception: connect failed
~# mongo 127.0.0.1:27017
MongoDB shell version: 2.0.6
connecting to: 127.0.0.1:27017/test
> use database
> db.repairDatabase()
{
        "errmsg" : "exception: file /var/lib/mongodb/$tmp_repairDatabase_0/datab      ase.1 open/create failed in createPrivateMap (look in log for more information)"                            ,
        "code" : 13636,
        "ok" : 0
} 
```

1.  Error: could't connect to server... 配置中的错误，不知道为什么？
2.  /var/lib/mongodb/$tmp_repairDatabase_0 和 /var/lib/mongodb/_tmp 是临时文件夹吗？我可以删除它们吗？

数据库工作正常，但我担心一周前会发生与我的基地相同的事情。我不得不完全重新安装 mongodb。[关联](https://stackoverflow.com/questions/11665559/database-error-mongodb-disappeared-database)

**升级版：**

只需增加服务器上的 RAM 大小并执行高达 3Gb 的 db.repairDatabase() - 一切顺利。

问题是内存不足。（内存映射文件）没有启动 mongod - 占用了 136Kb 的内存。启动 mongod 后 - 1100Kb 内存被占用。在我的数据库对象1165916。创建的对象越大，占用的内存就越多。如何减少mongodb内存的消耗？还是唯一的出路——更多的内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T11:37:57.600

我认为这和您之前的问题具有相同的根本原因 - 缺乏资源。您在之前的消息中指出您只有约 1.4GB 的内存，在这种情况下，当您分配更多内存时修复成功。修复必须遍历并重写整个数据集，因此将是密集的。

这里有关于MongoDB如何使用内存的详细描述：

[http://www.mongodb.org/display/DOCS/Checking+Server+Memory+Usage](http://www.mongodb.org/display/DOCS/Checking+Server+Memory+Usage)

不要忘记，您在 RAM 中的工作集包括索引和数据，因此这不仅仅是对象数量的问题。

如果您的工作数据集在大多数情况下应该适合 1.4GB，那么您可能不需要额外的 RAM，但是，当它超过这些限制时，您将不得不配置一些交换（以避免 OOM Killer和其他问题 - 请参阅[此处](http://www.mongodb.org/display/DOCS/The+Linux+Out+of+Memory+OOM+Killer)和[此处](http://www.mongodb.org/display/DOCS/Production+Notes#ProductionNotes-Swap)了解更多信息）。在不增加 RAM 的情况下，准备好这样的使用也很慢。在上一期中，您没有配置交换 - 如果您执行一些消耗所有可用内存的操作（例如修复），这不会让操作系统去任何地方。

关于初始连接失败，如果没有指定参数，我相信它可能会尝试在默认情况下连接 localhost:27017（而不是 IP） - 您的`/etc/hosts`文件是否有可能返回 IPV6 地址或类似的东西。如果您尝试手动连接到 localhost，您会失败吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T04:47:54.320

“ulimit -v unlimited”对我有用。

# jquery - 如果内容较小，则 Div 扩展到窗口的全高

> ID：11775080
> 
> 赞同：0
> 
> 时间：2012-08-02T09:55:31.240
> 
> 标签：jquery, html, css

我有一个带有文本内容的 div。我希望 div 高度扩展到浏览器窗口（视图区​​域）的整个高度，即使它的内容不那么高。

如果内容使它溢出窗口的高度，我想要默认行为。即出现滚动条，并且 div 高度与视图区域高度不同。

我在 jsfiddle [http://jsfiddle.net/bernard/gLjYg/16/](http://jsfiddle.net/bernard/gLjYg/2/)上放了一些代码。黄色边框应覆盖整个窗口区域，除非您减小窗口大小以使并非所有文本都可见。在这种情况下，文本应该是可滚动的，并且底部或顶部边框将被隐藏。

索引.html

```
<!-- language: lang-html -->
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title></title>
</head>

<body>
<div id="container">
    <div class="main">
        <h1>Think of a Nat Geo frame</h1><br>
        Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.
    </div>
</div>

</body>
</html> 
```

样式.css

```
​body, html {
    margin: 0;
    background-color: #c0c0c0;
}

#container {
    border: 20px solid yellow;
}

.main {
    background-color: white;
    padding: 2em;
} 
```

标记并不那么重要。但是，我想避免使用非语义 div。我也更喜欢基于 CSS 的解决方案。​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:02:45.530

干得好：

[http://jsfiddle.net/gLjYg/10/](http://jsfiddle.net/gLjYg/10/)

我不得不再添加一个 DIV，因为 .main 上的高度为 100%，而且它的填充使 .main 太高了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T04:48:49.617

像这样的事情需要一个非常简单的 javascript 修复！您需要在页面加载后首先设置容器的高度。在此之后，您必须使用窗口调整大小事件处理程序来继续检查窗口的新高度是否小于原始高度。如果较小，则使容器可滚动，同时确保高度也已调整。如果窗口被调整回原来的高度或更大。此容器将恢复到其原始状态。

```
<script>
var origHeight,container;
window.onload=function(){
origHeight= window.innerHeight;
container= document.getElementById("container");

};

window.addEventListener("resize", function(){
 container.style.height=window.innerHeight+"px";  
if(window.innerHeight< origHeight){

container.style.overflowY="auto";
}
else{

container.style.overflowY="default";
}

});
</script> 
```

这就是解决身高变化问题所需要的一切！

这是小提琴 [http://jsfiddle.net/gLjYg/25/](http://jsfiddle.net/gLjYg/25/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T10:03:32.637

有什么理由必须`border`在两个 div 之间拆分和填充？如果没有，我会用这个：

```
body, html {
    margin: 0;
    background-color: #c0c0c0;
}

#container {
    min-height: 100%;
}

.main {
    background-color: white;
    padding: 2em;
    border: 20px solid yellow;
} 
```

我似乎无法弄清楚为什么`body, html`不能伸展到全高。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-24T01:47:09.330

好吧，这可能晚了几年，但我最终写了这篇文章，对于其他这样做的人来说，这是我的解决方案：

[http://jsfiddle.net/gLjYg/59/](http://jsfiddle.net/gLjYg/59/)

首先，我将所有内容放入一个 div 中：

```
<div class="main">
  <h1>Think of a Nat Geo frame</h1>
  <p>Lorem ipsum...</p>
</div> 
```

然后，为了更容易理解宽度/高度测量（包括填充等），我在 css 中包含了边框框大小：

```
* {
  box-sizing: border-box;
}

body, html {
    margin: 0;
    background-color: #c0c0c0;
}

.main {
  border: 20px solid yellow;
  background-color: white;
  padding: 2em;
  margin: 0;
} 
```

最后，添加了以下 javascript（使用 jQuery）：

```
var $selector = $('.main');

setToWindowHeight($selector);
$(window).resize(function (){
  setToWindowHeight($selector);
});

function setToWindowHeight(selector) {
  selector.css({ 'min-height': $(window).innerHeight() });
} 
```

在页面加载和调整大小时，.main div 的最小高度设置等于窗口的最小高度。这里的关键是最小高度，因此如果内容小于窗口，它将拉伸以适应，但如果内容较大，您将能够滚动并且没有任何东西被剪掉。

# datanucleus - 基于 DataNucleus 鉴别器的多租户的唯一约束

> ID：11775081
> 
> 赞同：0
> 
> 时间：2012-08-02T09:55:35.647
> 
> 标签：datanucleus, multi-tenant

[当通过鉴别](http://www.datanucleus.org/products/datanucleus/rdbms/multitenancy.html)器使用多租户时，是否可以在可持久类的列上指定唯一性约束，其中约束仅适用于每个租户。（即可以对不同的租户具有相同的价值）？

还是应该在应用程序级别强制执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:40:23.863

是的，有可能，条件是在列上指定唯一约束，因为“内部”租户列不会被识别为成员。

例子 ：

```
 <extension vendor-name="datanucleus" key="multitenancy-column-name" value="tenant"/>
  <extension vendor-name="datanucleus" key="multitenancy-column-length" value="255"/>

  <unique name="UNIQUE_NAME_PER_TENANT">
    <column name="tenant"/>
    <column name="name"/>
  </unique> 
```

# jquery - jquery popup 需要知道是哪个元素导致了事件

> ID：11775082
> 
> 赞同：1
> 
> 时间：2012-08-02T09:55:38.073
> 
> 标签：jquery, html, dhtml

我有以下使用 qtip 库创建 javascript 弹出窗口的 javascript。我不确定如何访问集合中的哪个 li 元素被单击。这可能吗？我在下面的代码中添加了一个警告框来帮助解释问题。需要帮助请叫我！非常感谢，

```
$('li').each(function () {
    $(this).qtip(
    {
        content: {
            text: 'test text',
            title: { text: true, button: '<img src="/Images/close.gif">' }
    },
    position: {
        corner: {
            target: 'rightMiddle',
            tooltip: 'leftMiddle'
        },
        adjust: {
            screen: true
        }
    },
    show: {
        when: 'click',
        solo: true
    },
    api: {
        beforeShow: function(index) {
            if(document.getElementById('basketCheck')) {
                alert('what LI caused this click?');
                return false;
            }
        }
    },
    hide: 'unfocus',
    style: {
        tip: true,
        border: {
            width: 0,
            radius: 4,
        },
        width: 264,
        height: 195,
        title: { 
            background: '#ffffff'
        },
        lineHeight: '16px'
    }
}) 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:59:51.677

通过上下文`this`.

```
beforeShow: function(index) {
    //'this' points to the affected LI
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:00:45.563

触发元素在`elements.target`qTip 实例的属性中可用。反过来，该实例绑定到`this`处理程序中`beforeShow`：

```
api: {
    beforeShow: function() {
        if(document.getElementById('basketCheck')) {
            // This <li> caused the click.
            var sourceElement = this.elements.target;  
            return false;
        }
    }
} 
```

# sql - 两个表的连接条件？

> ID：11775083
> 
> 赞同：0
> 
> 时间：2012-08-02T09:55:42.080
> 
> 标签：sql, oracle, plsql, oracle10g

当我在两个不同的表中有两个具有相同名称但数据类型不同的列时。

我可以加入这两个表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:00:45.877

是的你可以。

如果你有：

```
TABLE_A

A_ID  NUMBER
DEPT  NUMBER 
```

和

```
TABLE_B

B_ID  NUMBER
DEPT  VARCHAR2 
```

如果您确定 TABLE_B.DEPT 中的值是数字但存储为字符串，那么您可以：

```
SELECT *
  FROM TABLE_A
  JOIN TABLE_B
    ON (TABLE_A.DEPT = TO_NUMBER(TABLE_B.DEPT)); 
```

甚至

```
SELECT *
  FROM TABLE_A
  JOIN TABLE_B
    ON (TO_CHAR(TABLE_A.DEPT) = TABLE_B.DEPT); 
```

在表的一个列上使用函数将阻止使用该列可能具有的任何索引，在这种情况下，如果连接非常重要并且表很大，您可能需要考虑基于[函数的索引](http://www.oracle-base.com/articles/8i/function-based-indexes.php).

FWIW，列名也不必相同，名称无关紧要，重要的是数据以及是否可以将其操作为可以与您需要匹配的列匹配的格式。

希望能帮助到你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T09:12:05.413

是的，您可以加入表格。但是，如果要使用相同名称来寻址列，则必须在列名之前指定表名。

```
TABLE1 has columns A number, B number
TABLE2 has columns A number, B varchar2(10) 
```

然后，您将处理 TABLE1.B 或 TABLE2.B 等列。例子

```
SELECT TABLE1.A, TABLE1.B, TABLE2.B
FROM TABLE1, TABLE2
WHERE TABLE1.A = TABLE2.A 
  AND TABLE1.B > 10
  AND TABLE2.B = 'FOO' 
```

如果表名很长，这可能会变得复杂，因此您可以像这样为每个表定义一个等价物

```
SELECT x.A, x.B, y.B
FROM TABLE1 x, TABLE2 y
WHERE x.A = y.A 
  AND x.B > 10
  AND y.B = 'FOO' 
```

# ruby-on-rails - rails attr_accessible rspec 检查

> ID：11775084
> 
> 赞同：6
> 
> 时间：2012-08-02T09:55:47.687
> 
> 标签：ruby-on-rails, ruby-on-rails-3, shoulda, attr-accessible

当我想测试属性是否 / 无法使用 RSpec**访问**时，我正在这样做

```
class Foo
  attr_accesible :something_else
end

describe Foo do
  it('author should not be accessible')    {lambda{described_class.new(:author=>true)}.should raise_error ActiveModel::MassAssignmentSecurity::Error}
  it('something_else should be accessible'){lambda{described_class.new(:something_else=>true)}.should_not raise_error ActiveModel::MassAssignmentSecurity::Error}
end 
```

有更好的方法吗？

...谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T15:51:07.517

[这是 Rails 教程中进行属性可访问性测试的方式](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#code:attr_accessible_user_id_test)，我认为这非常好。因此，在您的情况下，测试代码可以稍微修改为：

```
describe Foo do
  describe "accessible attributes" do
    it "should not allow access to author" do
      expect do
        Foo.new(author: true)
      end.to raise_error(ActiveModel::MassAssignmentSecurity::Error)
    end

    it "should allow access to something_else" do
      expect do
        Foo.new(something_else: true)
      end.to_not raise_error(ActiveModel::MassAssignmentSecurity::Error)
    end
  end
end 
```

如果这不是您想要的，当您询问是否有“更好的方法”时，您能否更好地了解您所追求的解决方案？

### 编辑

您可能对[Shoulda ActiveModel 匹配器](https://github.com/thoughtbot/shoulda-matchers#activemodel-matchers)感兴趣，它可以将代码清理为每次测试仅一行。就像是：

```
it { should_not allow_mass_assignment_of(:author) }
it { should allow_mass_assignment_of(:something_else) } 
```

# xmpp - pubsub xmpp 中未实现功能的错误

> ID：11775086
> 
> 赞同：2
> 
> 时间：2012-08-02T09:55:57.413
> 
> 标签：xmpp, publish-subscribe, ejabberd

我正在尝试`ejabberd`基于`BOSH Manager`. `pubsub model`但是当我尝试做同样的事情时，我得到了`feature-not-implemented`错误。我真的不知道这背后的原因是什么。

出于隐私原因，我已将实际域名替换为`example.com`

这是我从创建->发送配置->接收响应的整个节工作流程。

1）创建从客户端发送的节点

```
<body rid='2941054258' xmlns='http://jabber.org/protocol/httpbind' sid='79a157493e8d93a93949c358bd71bc394499bebd'>
    <presence xmlns='jabber:client'>
        <priority>-1</priority>
    </presence>
    <iq to='pubsub.example.com' type='set' xmlns='jabber:client' id='5224:sendIQ'>
    <pubsub xmlns='http://jabber.org/protocol/pubsub'>
        <create node='news'/>
    </pubsub>
    </iq>
</body> 
```

2）从服务器创建节点接收

```
<body xmlns='http://jabber.org/protocol/httpbind'>
    <presence xmlns='jabber:client' from='hunty@example.com/4529683821343890277773299' to='niharb@example.com/6976111021343894644477923'>
        <priority>-1</priority>
        <delay xmlns='urn:xmpp:delay' from='hunty@example.com/4529683821343890277773299' stamp='2012-08-02T06:51:19Z'>
        </delay>
    <x xmlns='jabber:x:delay' stamp='20120802T06:51:19'/>
    </presence>
    <presence xmlns='jabber:client' from='niharb@example.com/6976111021343894644477923' to='niharb@example.com/6976111021343894644477923'>
        <priority>-1</priority>
    </presence>
    <iq xmlns='jabber:client' from='pubsub.example.com' to='niharb@example.com/6976111021343894644477923' id='5224:sendIQ' type='result'>
    <pubsub xmlns='http://jabber.org/protocol/pubsub'>
        <create node='news'/>
    </pubsub>
    </iq>
</body> 
```

3) 将配置发送到服务器

```
<body rid='2941054259' xmlns='http://jabber.org/protocol/httpbind' sid='79a157493e8d93a93949c358bd71bc394499bebd'>
    <iq to='pubsub.example.com' type='set' xmlns='jabber:client' id='5225:sendIQ'>
        <pubsub xmlns='http://jabber.org/protocol/pubsub#owner'>
            <configure node='news'>
            <x xmlns='jabber:x:data' type='submit'>
                <field var='FORM_TYPE' type='hidden'>
                    <value>http://jabber.org/protocol/pubsub#node_config</value>
                </field>
                <field var='pubsub#deliver_payloads'>
                    <value>1</value>
                </field>
                <field var='pubsub#send_last_published_item'>
                    <value>never</value>
                </field>
                <field var='pubsub#persist_items'>
                    <value>1</value>
                </field>
                <field var='pubsub#max_items'>
                    <value>20</value>
                </field>
            </x>
            </configure>
        </pubsub>
    </iq>
</body> 
```

4）从服务器返回配置错误**功能未实现**

```
<body xmlns='http://jabber.org/protocol/httpbind'>
    <iq xmlns='jabber:client' from='pubsub.example.com' to='niharb@example.com/6976111021343894644477923' type='error' id='5225:sendIQ'>
    <pubsub xmlns='http://jabber.org/protocol/pubsub#owner'>
    <configure node='news'>
    <x xmlns='jabber:x:data' type='submit'>
        <field var='FORM_TYPE' type='hidden'>
            <value>http://jabber.org/protocol/pubsub#node_config</value>
        </field>
        <field var='pubsub#deliver_payloads'>
            <value>1</value>
        </field>
        <field var='pubsub#send_last_published_item'>
            <value>never</value>
        </field>
        <field var='pubsub#persist_items'>
            <value>1</value>
        </field>
        <field var='pubsub#max_items'>
            <value>20</value>
        </field>
    </x>
    </configure>
    </pubsub>
    <error code='501' type='cancel'>
        <feature-not-implemented xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/>
    </error>
    </iq>
</body> 
```

# objective-c - 可以在 Pre-existingData 上设置关系吗？

> ID：11775088
> 
> 赞同：2
> 
> 时间：2012-08-02T09:56:03.433
> 
> 标签：objective-c, ios, core-data

我想在已经导入的数据上使用核心数据中的关系。

换句话说，数据是从 mysql 导入中导入的...

然后我想使用 core-data 中的关系通过我自己的预先存在的数据连接实体。

这甚至可能吗？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:04:03.057

您可以，但在这种情况下，您必须在 Core Data 中编写自己的函数来从您的关系中获取数据。我认为这是使用 Core Data 的非常糟糕的方式。当您从 sqlite DB 导入数据时，手动设置所有关系会更好。

# java - 迭代数组列表

> ID：11775089
> 
> 赞同：1
> 
> 时间：2012-08-02T09:56:06.933
> 
> 标签：java, list, collections

我有一个对象的 ArrayList 如下：

目的：

```
String country;
String languages;
String number; 
```

名单如下：

```
India, Hindi, 500
India, English, 600
India, Bengali, 800
US, French, 700
Germany, German, 800 
```

上面的列表在我的代码中显示为：

```
List<MyObject> myList;  // this is the list I want to query 
```

因此，myList 中有 5 个 MyObject 对象，其值如前所述。

在我的情况下，对象的语言和国家属性是唯一的键。

所以我想根据语言和国家来获取对应的数字。

例如：

```
getNumber(India, Hindi) should return 500
getNumber(India, Bengali) should return 800 
```

如何以这种方式查询列表？是否可以通过 Iterator ？

谢谢阅读。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:59:56.390

> 在我的情况下，对象的语言和国家属性是唯一的键。

听起来您很可能应该使用地图然后...

> 如何以这种方式查询列表？是否可以通过 Iterator ？

绝对 - 这将是 O(N) 但它很容易做到：

```
// TODO: Revisit the decision to make a field called "number"
// a string...
String getNumber(String language, String country) {
    for (MyObject candidate : list) {
        if (candidate.getLanguage().equals(language) &&
            candidate.getCountry().equals(country)) {
            return candidate.getNumber();
        }
    }
    // Or throw an exception, depending on what semantics are expected
    return null;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T10:00:40.797

使用列表的唯一方法是遍历所有对象并找到具有给定国家和语言的对象。

`MyKey`如果您创建一个包含国家和语言并覆盖`equals()`并`hashCode()`基于这两个字段的类，则效率会更高。然后，您可以使用 a `HashMap<MyKey, MyObject>`，并通过调用以恒定时间获取对象：

```
MyObject o = map.get(new MyKey(country, language)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T10:01:16.843

```
public int getCodeByCountryAndLanguage(String country, String language){
    for(MyObject candidate : mylist){
        if(candidate.country.equals(country) 
           && candidate.language.equals(language)){
            return candidate.number; 
        }
    }
    return -1;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T10:01:43.090

像这样的东西：

```
int getNumber(country, language) {
    int number = -1;
    for(MyObject obj : myList) {
        if(country.equals(obj.country) && language.equals(obj.country)) {
            value = obj.number;
            break;
        }
    }
    return number;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T10:01:12.490

是的，可以使用迭代器来做到这一点。它大致看起来像这样：

```
for(MyObject m : myList) {
    if (   "India".equals(m.getCountry())
        && "Hindi".equals(m.getLanguages())) {

        return m.getNumber();
    }
} 
```

但是，您也可以考虑将`country`and`language`字段移动到一个单独的类，例如`MyListKey`，具有正确的`equals()`and`hashCode()`方法，然后使用`Map<MyListKey, String>`. 您的代码将是：

```
return myMap.get(new MyListKey("India", "Hindi")); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T10:10:50.433

如果对象的顺序不是问题，则应更改为使用 Map。

您可以使用迭代器并比较输入值来查找结果

如果您可能想要排序，请考虑使用集合。MyObject 应该扩展 Comparable

# c - 普通C中的快速随机洗牌功能

> ID：11775092
> 
> 赞同：3
> 
> 时间：2012-08-02T09:56:15.687
> 
> 标签：c, function, random, shuffle

多年来，我一直在考虑这一点，但从未设法实施。我说的是一个快速、高效的 C 函数，它在输入中接受整数数值（例如 16 位），并在输出中给出完全不同的相同位大小的数字，但“考虑”所有数字已经给出了，虽然不是通过使用真实记忆，而是通过数学魔法。对不起，英语不是我的母语，我的意思是该函数应该随机映射一对一但没有任何重复。

例如，我想象的可能应用程序是像素交叉淡入淡出图形例程之一，您可以将屏幕上的旧图片逐个像素地替换为新图片。坐标应随机选择，一旦像素被替换，不应再次寻址（无重复）。所有这些自然而然地通过一个基于数学的小型、快速和高效的函数（使用内存很容易实现，但这不是我想要的）。

显然，“位反转”解决方案行不通，因为它看起来不是随机的。甚至将第 3 位与第 11 位等交换，以创建更多“混乱”，反转一些位等。看起来并不好，所以我正在寻找一个纯数学的、看起来很随机的函数，可能至少有 16 位，并且使用尽可能少的内存（没有预先计算的表，因为我最终使用的第一个应用程序是在微控制器系统上使用公共域硬件和软件制作旧式游戏） .

你能帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:05:36.443

您正在寻找的基本上是与您想要交叉淡入淡出的像素数相对应的组的循环生成器。在最一般的情况下，这与您的组的大小是互质的。通过以像素数为模进行所有计算，您会得到随机性**的外观**，而实际上并不是随机的。

假设您有一个大小为 32 的域，并从种子 5 开始。通过不断添加 15 的互质数，您将得到序列

> (5, 20, 3, 18, 1, 16, 31, 14, 29, 12, 27, 10, 25, 8, 23, 4,...)

对于您的要求，这可能看起来足够随机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:27:33.937

另一种选择是使用加密。由于加密是可逆的，因此每个加密都是唯一的。对于 64 位数字，请使用 DES。对于 16 或 32 位数字，请使用[Hasty Pudding Cipher](http://en.wikipedia.org/wiki/Hasty_Pudding_Cipher)。您还可以将 Hasty Pudding 调整为任何所需的范围，而不仅仅是 2 的幂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:59:38.357

先生，您非常需要哈希函数。尝试例如 a=(a*31)%0xffff; 对于一个穷人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T10:00:13.973

该`rand()`功能已经这样做了。虽然，它不是从输入中获取数字，而是获取一个存储值，该值由`srand()`每次调用初始化并更改`rand()`。

您可以查看实现`rand()`以获得您的功能，或研究更多关于[随机数生成](http://en.wikipedia.org/wiki/Random_number_generation)。

这里有一个提示：

首先，了解什么是[模运算](http://en.wikipedia.org/wiki/Modular_arithmetic)。

现在想象以下序列：

```
m = 13
a = 7
b = 0

s = 5     s = (a*s + b) % m
s = 9     s = (a*s + b) % m
s = 11    s = (a*s + b) % m
s = 12    s = (a*s + b) % m
s = 6     s = (a*s + b) % m
s = 3     s = (a*s + b) % m
s = 8     s = (a*s + b) % m
s = 4     s = (a*s + b) % m
s = 2     s = (a*s + b) % m
s = 1     s = (a*s + b) % m
s = 7     s = (a*s + b) % m
s = 10    s = (a*s + b) % m
s = 5     s = (a*s + b) % m 
```

请注意，在这种情况下，我设置`b=0`为更容易找到一个序列。尽管如此，这个例子并不是很好，但你明白了要点。`a`给定和`b`对于给定的一个好的选择`m`，你可以获得看起来有点随机的数字。

这样，您的功能需要做的就是`(a * argument + b) % m`.

# c# - 数据表中的错误 xml 架构

> ID：11775095
> 
> 赞同：0
> 
> 时间：2012-08-02T09:56:22.523
> 
> 标签：c#, xml, datatable

我尝试从数据表中编写一个 xml 文件。

```
for (int i = 0; i < ValToAppendDt.Count; i++)
        {
            DataRow row = ResultDT.NewRow();
            row[i] = ValToAppendDt[i].ToString();
            ResultDT.Rows.Add(row);
        }
        ResultDT.WriteXml(@"\\blabla\" + Environment.MachineName + ".xml"); 
```

这会产生这个 xml 文件：

```
<?xml version="1.0" standalone="yes"?>
<DocumentElement>
  <ResultsTable>
    <PC_Name>blabla</PC_Name>
  </ResultsTable>
  <ResultsTable>
    <PC_Network_Card>blabla</PC_Network_Card>
  </ResultsTable>
  <ResultsTable>
    <PC_Mac>blabla</PC_Mac>
  </ResultsTable>
</DocumentElement> 
```

所以当我尝试将它导入excel时，第一个值出现在A1中，第二个出现在B2中，第三个出现在C3中......

我想把它们放在 A1、B1、C1 中……但我找不到方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:07:58.517

我在我的 for Loop 中迷惑了...我将其更改为：

```
DataRow row = ResultDT.NewRow();
for (int i = 0; i < ValToAppendDt.Count; i++)
    {            
        row[i] = ValToAppendDt[i].ToString();            
    }
ResultDT.Rows.Add(row); 
```

现在工作正常...

# php - 删除数组中的父母，同时保持子结构完整

> ID：11775099
> 
> 赞同：0
> 
> 时间：2012-08-02T09:56:33.717
> 
> 标签：php, arrays

我的数组看起来像这里：

```
array(2) {
  ["highpriority"]=>
  array(2) {
    [0]=> // 1st item
    array(2) {
      [0]=>
      string(14) "Do the laundry"
      [1]=>
      string(6) "Sunday"
    }
    [1]=> // 2nd item
    array(2) {
      [0]=>
      string(19) "Study for math exam"
      [1]=>
      string(6) "Monday"
    }
  }
  ["lowpriority"]=>
  array(2) {
    [0]=> // 3rd item
    array(2) {
      [0]=>
      string(15) "Get car cleaned"
      [1]=>
      string(9) "Next week"
    }
    [1]=>
    array(2) { // 4th item
      [0]=>
      string(33) "Buy The Amazing Spider-Man on DVD"
      [1]=>
      string(5) "Later"
    }
  }
} 
```

我尝试通过将项目的编号作为输入来创建返回项目字符串的函数。例如，如果我给出输入 $number = 3，我的函数 readItem($number) 将返回“清理汽车”。有高优先级和低优先级节点，但会添加更多节点，如中优先级、最高优先级等......我我正在考虑删除数组中的父母（高优先级和低优先级节点）我可以使用 $array[$number] 来读取项目字符串，对吗？

使用 array_shift()，只剩下高优先级的孩子。我怎样才能让它通过每个父母？我在这里找到了一些代码，但它依赖于通过名称知道父级：[删除“包装”数组（删除父级，保留子级）](https://stackoverflow.com/questions/1371778/remove-wrapping-array-remove-parent-keep-children)。如果有帮助，我的数组中的数据是使用我之前问题中的 nickb 中的代码从 CSV 读取的：[Grouping CSV input by columns](https://stackoverflow.com/questions/11731508/grouping-csv-input-by-columns/11731544#11731544)。

我确信解决方案是微不足道的，但是除了 foreach 循环和手动将子项添加到新数组之外还有其他方法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:28:10.463

由于您的优先级有名称，了解它们正确顺序的唯一方法是在某处枚举它们。

```
// Assume the data array is named $tasks.
function readItem($number) {
  $priorities = ['highpriority', 'lowpriority'];
  $total = 0;
  foreach($priorities as $priority) {
    $thiscount = count($tasks[$priority]);
    if($number <= $total + $thiscount) {
      // The item is in this priority.
      return $tasks[$priority][$number - $total - 1][0]
    }
    $total += $thiscount;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:49:27.577

你去：

```
<?php

$input = array(
    'high' => array(
        array('Do the laundry', 'Sunday'),
        array('Study math', 'Monday')
    ),
    'low' => array(
        array('Get car cleaned', 'Next Week')
    )
);

$output = array();
array_walk_recursive($input, function($item, $key) use (&$output) {
    $index = count($output) - $key;
    $output[$index][] = $item;
});

$readItem = function($index) use ($output) {
    return $output[$index-1];
};

var_dump($readItem(3));

?> 
```

# javascript - 如何获取上一个选择的单选按钮的值

> ID：11775102
> 
> 赞同：0
> 
> 时间：2012-08-02T09:56:59.517
> 
> 标签：javascript, radio-button, dom-events, onchange

鉴于此标记[http://jsfiddle.net/ARPCw/](http://jsfiddle.net/ARPCw/) `我如何更新更改总数？`

 `问题是我需要上一个选择的单选按钮的值（数据价格），所以我可以在添加新单选按钮之前将其减去总金额。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:09:38.600

小提琴示例：http: [//jsfiddle.net/ARPCw/5/](http://jsfiddle.net/ARPCw/5/)

相关js

```
var cb = document.getElementsByTagName('input'),
    total = document.getElementById('tprice');

for (var i = 0; i < cb.length; i++) {
    (function(c) {
       c.onclick = function() {
          var bp = 200;
          for (var i = 0; i < cb.length; i++) {
             if (!!cb[i].checked) {
               bp += +cb[i].getAttribute('data-price');  
             }
          }
          total.innerHTML = bp;
       }
    }(cb[i]))        
} 
````

# google-app-engine - GAE神秘额度限制

> ID：11775104
> 
> 赞同：1
> 
> 时间：2012-08-02T09:57:04.753
> 
> 标签：google-app-engine, gae-quotas

我有一个当前显示的 Google App Engine 应用：

```
Over Quota

This application is temporarily over its serving quota. Please try again later. 
```

我有一个计费帐户。当我检查我的配额时，我完全处于所有限制之下。我有大约 10,000 个任务在队列中等待处理 - 但即使这样也远低于 1,000,000,000 的限制。

我不知道如何调试它，因为我得到的只是我超出配额的消息，根据我的配额统计信息，这是不正确的。

这是配额统计信息的转储（对格式感到抱歉）：

[http://paste2.org/p/2091412](http://paste2.org/p/2091412)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T03:49:45.377

这是因为任务队列消耗了前端实例的时间。我以为我已将应用程序配置为使用一个后端实例，但显然不是：[GAE：队列、配额和后端实例](https://stackoverflow.com/questions/11805737/gae-queues-quotas-and-backend-instances)

# google-chrome-extension - 如何通过单击我创建的单个 Google 扩展程序打开多个网页网址？

> ID：11775107
> 
> 赞同：0
> 
> 时间：2012-08-02T09:57:13.947
> 
> 标签：google-chrome-extension

我在网上搜索，希望找到一种方法来创建在我加载 Chrome 时显示在“应用程序”区域中的谷歌浏览器扩展。这些扩展的目的是在单击时简单地打开一个预定义的网页......本质上是“应用程序”区域中的一个书签。我已经成功地为我经常使用的页面创建了多个快捷方式......这是我用于本地 CraigsList 站点快捷方式的“manifest.json”文件的示例......

* * *

```
{
"name": "CraigsList",
"description": "shop on craigslist",
"version": "1.0",
"icons": {
"128": "icon.jpeg"
},
"app": {
"urls": [
"http://COSprings.craigslist.org"
],
"launch": {
"web_url": "http://COSprings.craigslist.org"
}
},
"permissions": [
"unlimitedStorage",
"notifications"
]
} 
```

* * *

我很高兴我已经走到了这一步，并创建了许多快捷方式，简化了我在 Google Chrome 中的生活……但我想更进一步，增加一个扩展。

假设我想打开两个选项卡...单击扩展程序时每个选项卡都有不同的网页...我将如何修改上面的代码来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T21:41:03.023

Chrome 扩展程序功能强大，但您的方法是错误的。如果您真的想通过单击应用程序图标打开多个选项卡，则链接页面必须自己打开这些选项卡，因为在初始化时最多可以启动一个选项卡/面板。

在 Chrome 22+ 中，您可以使用[`chrome.experimental.app.onLaunched`](http://code.google.com/chrome/extensions/trunk/experimental.app.html#event-onLaunched)检测应用程序的启动，然后使用[`chrome.tabs.create`](http://code.google.com/chrome/extensions/tabs.html)启动多个标签...

**但是这种方法对于您的目标来说太复杂了**！不要重新发明轮子，Chrome 已经提供了适合您需求的东西。它被称为**书签栏**：

![Chromium 的书签栏](../Images/120f2d1b7ead9e8dd2843221d1bbb133.png)

如您所见，我为一些图像和文件夹添加了书签。
您可能知道单击书签会打开一个页面。
以下功能可能会让您大吃一惊： 右键单击​​书签文件夹。

![上下文菜单](../Images/6d8eed5bb3b20b9f5ec251d4aba5001c.png)

使用`Open All Bookmarks`或`Open All Bookmarks in New Window`一次打开多个书签（显然，书签必须是书签文件夹中的一个项目）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T10:55:56.783

您可以使用后台脚本，而不是直接从清单中执行（我认为这是不可能的）。
在你的清单中加入这样的东西：

```
 "background": {
    "scripts": ["background.js"]
  }, 
```

然后在`background.js`文件中：

```
var queue = ['www.url1.com', 'www.url2.com'];
chrome.browserAction.onClicked.addListener(function(tab) {
    for (var i=0; i<queue[1].length; ++i)
        chrome.tabs.create({"url": queue[i], "active": false, "index": tab.index+i});
}); 
```

# makefile - 确定是否使用 gmake 执行 Makefile

> ID：11775109
> 
> 赞同：4
> 
> 时间：2012-08-02T09:57:34.200
> 
> 标签：makefile, gnu-make, freebsd

假设在 FreeBSD 上，应用程序需要使用 GNU make (gmake) 编译，而不是标准系统 make。如果 Makefile 未使用 gmake 编译，是否有任何指令可以放入 Makefile 以停止执行并打印错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T11:49:05.567

[调用你的 makefile`GNUmakefile`](http://www.gnu.org/software/make/manual/make.html#Makefile-Names)。GNU Make 会找到它，但不是其他品牌。

> 对于大多数 makefile，不建议使用检查的名字 GNUmakefile。如果您有一个特定于 GNU make 的 makefile，并且不会被其他版本的 make 理解，您应该使用这个名称。其他 make 程序寻找 makefile 和 Makefile，但不是 GNUmakefile。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-01T04:22:29.683

**这是杰克凯利答案的一个插件。**

将 Makefile 重命名为 GNUmakefile 后，使用以下命令创建 Makefile：

```
USEGNU=gmake $*
all:
    @$(USEGNU)
.DEFAULT:
    @$(USEGNU) 
```

这将在您每次运行 make 时为您调用 gmake。

# iphone - 未调用函数 textFieldShouldBeginEditing

> ID：11775110
> 
> 赞同：0
> 
> 时间：2012-08-02T09:57:36.997
> 
> 标签：iphone, objective-c, cocoa-touch, uitextview, uitextfielddelegate

我知道有类似的问题，但这些答案对我没有帮助。我猜我还有其他错误。

我有一个 textView，我将它的委托设置为 self，但未调用相关函数。

这是代码：

在.h中：

```
@interface MyViewController : UIViewController<UITextFieldDelegate>
@property (retain, nonatomic) IBOutlet UITextField *nameField; 
```

以 .m 为单位：

```
...
@synthesize nameField;
...
-(void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];
    nameField.delegate = self;
...
}
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField{
    exitKeyboardButton.hidden = NO;
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T10:15:52.193

我想您忘记将文本字段的委托连接到您的视图控制器。我经常忘记:)

![ss](../Images/8982110dfb3c941723cedfa20d2cdd97.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:11:16.400

试试这些：

将委托（但正如 idz 所说，这有问题）设置为`viewDidLoad`not`viewWillAppear`

尝试`- (void)textFieldDidBeginEditing:(UITextField *)textField`代替`- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField`

确保您在笔尖中连接了正确的名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T10:14:40.650

最终我使用了相关的 IBAction 函数。如果你有更好的想法，请告诉我，我会标记你的答案。

![在此处输入图像描述](../Images/6957f114d47cc22bfd75fa2d9ce18e68.png)

# regex - 改进正则表达式以匹配包含至少 N 个字母的字母数字单词的 url

> ID：11775113
> 
> 赞同：2
> 
> 时间：2012-08-02T09:57:52.090
> 
> 标签：regex, lookahead

我已经按照下一个模式完成了一个正则表达式来匹配 url：

```
part1-part2-part3.html 
```

在哪里

part1：是常用词
part2：是带下划线的字母数字词，至少包含 2 个字母
part3：是数字词，有 1 到 10 位数字

例如，一个有效的 url 将是：

```
news-my_news_title_200_is-12345.html 
```

所以第 1 部分
= 新闻
第 2 部分 = my_news_title_200_is
第 3 部分 = 12345

我来到了这个：

```
/^[a-z]+-([a-z0-9_]*(?=[a-z]{2,})[a-z0-9_]*).-([0-9]{1,10})\.html$/ 
```

用类表示：

```
/^\w+-([\w\d_]*(?=\w{2,})[\w\d_]*).-(\d{1,10})\.html$/ 
```

但我想有更好的方式来表达 RE 模式的第 2 部分。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:05:00.257

**试试这个**

```
\b(?is)[a-z]+-\w*(?=[a-z]{2,})\w*-[0-9]{1,10}\.html\b 
```

或者

```
^(?is)[a-z]+-\w*(?=[a-z]{2,})\w*-[0-9]{1,10}\.html$ 
```

**[在这里](http://regexr.com?31nac)播放**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:18:23.407

试试这个：

```
\b[a-zA-Z]+-\w{2,}-\d{1,10}\.html\b 
```

更强大（避免第 2 部分只匹配数字）：

```
\b[a-zA-Z]+-(?!\d+-)\w{2,}-\d{1,10}\.html\b 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T12:05:59.400

为了匹配 2 个不连续的字母，您可以这样做（perl 中给出的示例，但它适用于理解 PCRE 的语言）

```
use strict;
use warnings;
use 5.010;
use YAPE::Regex::Explain;

my $re = qr/^\w+-(\w*?[a-z]+\w*?[a-z]+\w*?)-\d+\.html$/;
say YAPE::Regex::Explain->new( $re )->explain;
while(<DATA>) {
    chomp;
    say ($_ =~ $re ? "match : $_" : "not match : $_");
}
__DATA__
news-my_news_title_200_is-12345.html
news-m_200_s-12345.html
news-m_200-12345.html 
```

**输出：**

```
match : news-my_news_title_200_is-12345.html
match : news-m_200_s-12345.html
not match : news-m_200-12345.html 
```

**正则表达式的解释：**

```
(?-imsx:^\w+-(\w*?[a-z]+\w*?[a-z]+\w*?)-\d+\.html$)

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  ^                        the beginning of the string
----------------------------------------------------------------------
  \w+                      word characters (a-z, A-Z, 0-9, _) (1 or
                           more times (matching the most amount
                           possible))
----------------------------------------------------------------------
  -                        '-'
----------------------------------------------------------------------
  (                        group and capture to \1:
----------------------------------------------------------------------
    \w*?                     word characters (a-z, A-Z, 0-9, _) (0 or
                             more times (matching the least amount
                             possible))
----------------------------------------------------------------------
    [a-z]+                   any character of: 'a' to 'z' (1 or more
                             times (matching the most amount
                             possible))
----------------------------------------------------------------------
    \w*?                     word characters (a-z, A-Z, 0-9, _) (0 or
                             more times (matching the least amount
                             possible))
----------------------------------------------------------------------
    [a-z]+                   any character of: 'a' to 'z' (1 or more
                             times (matching the most amount
                             possible))
----------------------------------------------------------------------
    \w*?                     word characters (a-z, A-Z, 0-9, _) (0 or
                             more times (matching the least amount
                             possible))
----------------------------------------------------------------------
  )                        end of \1
----------------------------------------------------------------------
  -                        '-'
----------------------------------------------------------------------
  \d+                      digits (0-9) (1 or more times (matching
                           the most amount possible))
----------------------------------------------------------------------
  \.                       '.'
----------------------------------------------------------------------
  html                     'html'
----------------------------------------------------------------------
  $                        before an optional \n, and the end of the
                           string
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

# html - 使用 Indesign javascript 将 Indesign 转换为 Html

> ID：11775117
> 
> 赞同：-1
> 
> 时间：2012-08-02T09:58:07.100
> 
> 标签：html, adobe-indesign

如何使用 indesign javascript 将 indesign 转换为 html？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:10:19.137

你真的不够具体，无法完全回答这个问题。我们真的需要知道您要导出的内容。InDesign 具有非常强大的内置功能，可用于导出为 HTML。

CS5.5 和 CS6 还具有一个新功能，即在段落和字符样式面板中编辑所有导出标签。您可以将现有的段落/字符样式映射到 HTML 标记和类。

您还可以使用 HTML 标签在 InDesign 中创建 XML 结构。您可以使用标签和结构面板将 XML/HTML 结构应用于您的布局。然后使用导出 XML 功能导出内容。将文件扩展名更改为 .HTML，瞧，您就拥有了来自 InDesign 的完整 HTML 文件。

如果您有特定要求或特定文件，我可以为您提供更多帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:04:15.280

我假设您想通过进入 File > Export for > Dreamweaver 来编写您将要执行的操作...如果是这种情况，那么显然您需要使用名为 Export as XHTML 的脚本。根据[这个线程](http://forums.adobe.com/thread/838787)，“这个功能是通过脚本实现的，所以你不能像往常一样导出它。” ePub 似乎在同一条船上。

我对 Stack Overflow 还是比较陌生，所以我不知道这里的礼仪是什么。我可以从找到答案的页面复制/粘贴，或者我可以[将您链接到它](http://forums.adobe.com/message/2016853)。

这是为 CS3 编写的，但我删除了第一行，它在 CS5 中运行良好。

我将要链接的内容有点超出我的想象，但[此 PDF](http://www.adobe.com/content/dam/Adobe/en/devnet/indesign/cs5_docs/indesign_scripting/feature-development-with-scripting.pdf)可能会为您提供有关使用 Export as XHTML 的更多信息。如果您[获得了 SDK](http://www.adobe.com/devnet/indesign/sdk.html)，您应该能够深入研究其源代码。

除此之外，我在对象模型查看器中唯一能找到的是[ExportForWebPreference](http://jongware.mit.edu/idcsjs5.5/pc_ExportForWebPreference.html)。这将帮助您微调导出设置。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-12T16:52:56.810

以下 javascript（保存到 InDesign 使用的 .jsx 文件）将执行此操作：

```
app.activeDocument.exportFile(ExportFormat.HTML, 'c:\\temp\\example.html'); 
```

# javascript - 我无法在 Internet Explorer 中获得拖动标记的纬度/经度

> ID：11775118
> 
> 赞同：-1
> 
> 时间：2012-08-02T09:58:08.980
> 
> 标签：javascript, internet-explorer, google-maps-api-3

我已经创建了这个非常简单的应用程序（你选择城市，它会显示在地图上，你可以将标记拖到你的位置），它在这里[http://jsfiddle.net/shoya/ZW9jP/200/](http://jsfiddle.net/shoya/ZW9jP/200/)，有这部分在 div 中写入您将标记拖到的点的 Lat/Lng 以供进一步使用，它在 chrome 和 ff 和 opera 中完美运行，但在 IE 中不适用，为什么？我的意思是它不会在 IE 中写 Lat/Lng。

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:52:08.393

> 不在IE中，为什么？

IE 与符合标准的浏览器不同，通常需要特殊编码。

> 我究竟做错了什么？

这是 IE 报告的 javascript 错误：

```
Object doesn't support this property or method  LayoutCM.js, line 195 character 5 
```

但它似乎确实将坐标写入 div，至少在 IE8 中是这样。您在使用哪个版本的 IE 时遇到问题？

# wpf - 如何在另一个 xaml 文件中覆盖在数据模板中定义的 LinearGradientBrush 而无需再次复制整个模板

> ID：11775122
> 
> 赞同：1
> 
> 时间：2012-08-02T09:58:11.700
> 
> 标签：wpf, templates, styles, themes, basedon

在我的 WPF 应用程序中，我在整个应用程序上都应用了一些购买的网格主题，需要一个 CR 才能修改每个模块/屏幕的这个主题，修改范围将是画笔、颜色和样式“使用 BasedOn”...因此，如果我在某些模板内部定义/使用了画笔，如何在本地模块 xaml 中覆盖它，而无需再次复制整个模板以及关于画笔和颜色是否足以在本地 xaml 中使用相同的键再次重新定义它们

这是我要修改的带有画笔的控制模板：

```
 <ControlTemplate x:Key="tableViewColumnManagerRowTemplate"
                TargetType="xcdg:ColumnManagerRow">

  <ControlTemplate.Resources>
     <xcdg:ThicknessConverter x:Key="thicknessConverter"
                              InverseValue="True"/>
  </ControlTemplate.Resources>

  <Grid>
     <Grid.ColumnDefinitions>
        <!-- HierarchicalGroupLevelIndicatorPane -->
        <ColumnDefinition Width="Auto" />
        <!-- GroupLevelIndicatorPane -->
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto" />

        <!-- CellsHost panel -->
        <ColumnDefinition Width="*" />
     </Grid.ColumnDefinitions>

     <!-- GroupLevelIndicatorPane is a placeholder for individual GroupLevelIndicator elements that are added
                   whenever this Row is part of a group. -->
     <xcdg:HierarchicalGroupLevelIndicatorPane Visibility="Collapsed" Grid.Column="0" />
     <xcdg:GroupLevelIndicatorPane x:Name="groupLevelIndicatorPane"
                                   Grid.Column="1" />

     <Grid Height="{TemplateBinding Height}"
           Grid.ColumnSpan="3"
           Grid.Column="1"
           xcdg:TableView.CanScrollHorizontally="False">

        <Grid.RowDefinitions>
           <RowDefinition Height="17*" />

           <RowDefinition Height="8*" />

           <RowDefinition Height="10*" />

        </Grid.RowDefinitions>

        <Border x:Name="Border1"
                Background="#121212"
                Grid.RowSpan="4"/>

        <!--Bottom Gradient-->
        <Border x:Name="grpManborderBottomGradient"
                Grid.Row="2">
           <Border.Background>

              <LinearGradientBrush
                 StartPoint="0.125,1"
                 EndPoint="0.125,0.0142">

                 <GradientStop Color="#445282" // This to be overridden
                               Offset="0" />

                 <GradientStop Color="#29314D"// This to be overridden
                               Offset="0.53" />

                 <GradientStop Color="#12131D"// This to be overridden
                               Offset="0.95" />

              </LinearGradientBrush>

           </Border.Background>
        </Border>

        <!--Top Gradient-->
        <Border x:Name="topGradientBorder"
                VerticalAlignment="Stretch"
                Opacity="0.8"
                Grid.Row="0">
           <Border.Background>

              <LinearGradientBrush StartPoint="0.5,1"
                                   EndPoint="0.5,0">

                 <GradientStop Color="#393F4D" // This to be overridden
                               Offset="0" />

                 <GradientStop Color="#4A5367" // This to be overridden
                               Offset="0.33" />

                 <GradientStop Color="#626C88" // This to be overridden
                               Offset="1" />

                 <GradientStop Color="#FF5F6A87"// This to be overridden
                               Offset="0.988" />

              </LinearGradientBrush>

           </Border.Background>
        </Border>

        <!--internal border, needs to be last to be over other gradients-->
        <Border x:Name="Border2"
                BorderThickness="1"
                BorderBrush="#9CA3B5"
                Margin="0,0,0,0"
                Grid.RowSpan="3"/>

     </Grid>
     -->Template to be continued... 
```

# objective-c - 在 NSTextField 中设置文本垂直居中

> ID：11775128
> 
> 赞同：28
> 
> 时间：2012-08-02T09:58:46.493
> 
> 标签：objective-c, macos, cocoa

在某个高度 NSTextField ，如果文本的大小很小，布局将是这样的

![在此处输入图像描述](../Images/06fd8ecb30c4ce03a0e656c872303a32.png)

文本流到顶部，如何使文本中心像这样：

![在此处输入图像描述](../Images/70e01d72965f17cb94258aec8f27e872.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-09-01T08:17:57.883

```
class CustomTextFieldCell: NSTextFieldCell {

    func adjustedFrame(toVerticallyCenterText rect: NSRect) -> NSRect {
        // super would normally draw text at the top of the cell
        var titleRect = super.titleRect(forBounds: rect)

        let minimumHeight = self.cellSize(forBounds: rect).height
        titleRect.origin.y += (titleRect.height - minimumHeight) / 2
        titleRect.size.height = minimumHeight

        return titleRect
    }

    override func edit(withFrame rect: NSRect, in controlView: NSView, editor textObj: NSText, delegate: Any?, event: NSEvent?) {
        super.edit(withFrame: adjustedFrame(toVerticallyCenterText: rect), in: controlView, editor: textObj, delegate: delegate, event: event)
    }

    override func select(withFrame rect: NSRect, in controlView: NSView, editor textObj: NSText, delegate: Any?, start selStart: Int, length selLength: Int) {
        super.select(withFrame: adjustedFrame(toVerticallyCenterText: rect), in: controlView, editor: textObj, delegate: delegate, start: selStart, length: selLength)
    }

    override func drawInterior(withFrame cellFrame: NSRect, in controlView: NSView) {
        super.drawInterior(withFrame: adjustedFrame(toVerticallyCenterText: cellFrame), in: controlView)
    }

    override func draw(withFrame cellFrame: NSRect, in controlView: NSView) {
        super.draw(withFrame: cellFrame, in: controlView)
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-11-18T19:44:44.790

我基本上使用亚历克斯的答案，但有一个修正：如果我们增加 y 原点，我们应该减少 titleRect 的高度。否则，我们的 titleRect 将在其父视图的末尾下方结束，可能会将任何内容隐藏在 NSTextField 下方。

.h：

```
#import <Cocoa/Cocoa.h>

@interface VerticallyCenteredTextFieldCell : NSTextFieldCell

@end 
```

他们：

```
#import "VerticallyCenteredTextFieldCell.h"

@implementation VerticallyCenteredTextFieldCell

- (NSRect) titleRectForBounds:(NSRect)frame {

CGFloat stringHeight = self.attributedStringValue.size.height;
NSRect titleRect = [super titleRectForBounds:frame];
CGFloat oldOriginY = frame.origin.y;
titleRect.origin.y = frame.origin.y + (frame.size.height - stringHeight) / 2.0;
titleRect.size.height = titleRect.size.height - (titleRect.origin.y - oldOriginY);
return titleRect;
}

- (void) drawInteriorWithFrame:(NSRect)cFrame inView:(NSView*)cView {
[super drawInteriorWithFrame:[self titleRectForBounds:cFrame] inView:cView];
}

@end 
```

此外，**VerticallyCenteredTextFieldCell 是 NSTextFieldCell 的子类**。如果您将其子类化，请在 Interface Builder 中更改 NSTextFieldCell 的类，而不是 NSTextField（我不知道这一点）。

[![在此处输入图像描述](../Images/a03083051786b1c451c037474fa3abce.png)](https://i.stack.imgur.com/NwS72.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-27T19:30:14.563

只是子类`NSTextFieldCell`（*[或混合它](https://github.com/mralexgray/AtoZ.framework/blob/4fbe807a600720056afa5f0cc85bfd1f200b97ad/AtoZ/Categories/NSObject-Utilities.h#L105)*）......并实现......

```
- (NSRect) titleRectForBounds:(NSRect)frame {  

  CGFloat stringHeight       = self.attributedStringValue.size.height;
   NSRect titleRect          = [super titleRectForBounds:frame];
          titleRect.origin.y = frame.origin.y + 
                              (frame.size.height - stringHeight) / 2.0;
   return titleRect;
 }
- (void) drawInteriorWithFrame:(NSRect)cFrame inView:(NSView*)cView {
  [super drawInteriorWithFrame:[self titleRectForBounds:cFrame] inView:cView];
 } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-04T23:58:20.690

在 Erik 和 Hejazi 的回答中添加一些内容，您还需要实现`selectWithFrame`，这是 Swift 2.2 中的解决方案：

```
class VerticallyCenteredTextFieldCell: NSTextFieldCell {
    override func titleRectForBounds(rect: NSRect) -> NSRect {
        var titleRect = super.titleRectForBounds(rect)

        let minimumHeight = self.cellSizeForBounds(rect).height
        titleRect.origin.y += (titleRect.height - minimumHeight) / 2
        titleRect.size.height = minimumHeight

        return titleRect
    }

    override func drawInteriorWithFrame(cellFrame: NSRect, inView controlView: NSView) {
        super.drawInteriorWithFrame(titleRectForBounds(cellFrame), inView: controlView)
    }

    override func selectWithFrame(aRect: NSRect, inView controlView: NSView, editor textObj: NSText, delegate anObject: AnyObject?, start selStart: Int, length selLength: Int) {
        super.selectWithFrame(titleRectForBounds(aRect), inView: controlView, editor: textObj, delegate: anObject, start: selStart, length: selLength);
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-09T15:46:58.087

Erik Wegener 的答案的 Swift 版本（也修改为使用多行）：

```
class VerticallyCenteredTextFieldCell : NSTextFieldCell {
    override func titleRect(forBounds rect: NSRect) -> NSRect {
        var titleRect = super.titleRect(forBounds: rect)

        let minimumHeight = self.cellSize(forBounds: rect).height
        titleRect.origin.y += (titleRect.height - minimumHeight) / 2
        titleRect.size.height = minimumHeight

        return titleRect
    }

    override func drawInterior(withFrame cellFrame: NSRect, in controlView: NSView) {
        super.drawInterior(withFrame: titleRect(forBounds: cellFrame), in: controlView)
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-26T11:30:00.097

我的解决方案是基于使用 NSLayoutManager 计算字体高度。这种方式允许使用属性字符串的方法计算高度的更多性能。

```
- (NSRect)titleRectForBounds:(NSRect)theRect {
    NSRect titleFrame = [super titleRectForBounds:theRect];

    CGFloat fontHeight = [[[NSLayoutManager alloc] init] defaultLineHeightForFont:self.font];
    if (fontHeight < titleFrame.size.height) {
        titleFrame.origin.y = theRect.origin.y + (theRect.size.height - fontHeight) * 0.5f;
        titleFrame.size.height = fontHeight;
    }
    return titleFrame;
}

- (void) drawInteriorWithFrame:(NSRect)frame inView:(NSView *)view {
    [super drawInteriorWithFrame:[self titleRectForBounds:frame] inView:view];
} 
```

# sql-server-2008 - 如何仅授予对 SQL Server 2008 中角色的访问权限？

> ID：11775130
> 
> 赞同：0
> 
> 时间：2012-08-02T09:58:53.860
> 
> 标签：sql-server-2008

我在 sql server 中创建了角色。如何仅向角色授予对某些模式的访问权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:02:46.897

单击您角色的属性，然后转到`User Mapping`。在那里，您可以授予每个架构的访问权限

# wpf - WPF 工具包 根据构建配置更改 xaml

> ID：11775132
> 
> 赞同：0
> 
> 时间：2012-08-02T09:59:02.110
> 
> 标签：wpf, visual-studio-2010, wpftoolkit

我想要做的是在同一个项目中为 .net4 和 .net3.5 创建不同的构建配置。比方说 Release 和 Release 4.0。

我能够根据配置包含 nlog.dll 版本，与使用 .proj 文件条件的其他库相同。

但我对 WPF TOOLKIT 有问题，因为它没有 .net4.0 版本。我仅使用此工具包中的日期选择器。

我唯一的想法是在 3.5 版本上使用 wpf 工具包并删除工具包 - 在版本 4.0 版本上使用 .net4.0 datepicker。但我不知道如何根据配置更改 xaml 代码。

在 .cs 中有

```
#iF Release

  date = toolkit.Datepicker.selectedDate;

#endif

#if Release 4.0

  date = Datepicker.selectedDate;

#endif 
```

xaml 中有什么类似的东西吗？

Mb 还有其他解决这个问题的方法吗？

谢谢

# iphone - AffineTransformation：将旋转设置为某个角度

> ID：11775148
> 
> 赞同：0
> 
> 时间：2012-08-02T09:59:56.500
> 
> 标签：iphone, ios, cocoa-touch

如何将 AffineTransformation 的旋转设置为某个角度？我试图获得目标角度和当前角度之间的差异，然后应用 CGAffineTransformRotate(rotationTransform, rotateTo) ：

```
CGAffineTransform rotationTransform = self.view.transform;

long double alpha = atan2l(rotationTransform.b, rotationTransform.a);
rotateTo = M_PI_2-alpha;

rotationTransform = CGAffineTransformRotate(rotationTransform, rotateTo); 
```

但由于舍入误差，我没有收到准确的目标角度:(

# java - MySQL java通信

> ID：11775150
> 
> 赞同：0
> 
> 时间：2012-08-02T09:59:58.730
> 
> 标签：java, mysql, percona

我想知道是否有办法将mysql与java客户端连接起来，我的意思是：

如果用户从 machien2 更新记录，则 mysql 将向网络上的其他用户发送信号，告知用户（添加或更新了新记录）。

那么，这可能吗？或者我需要在我的 java 应用程序上创建一个自动刷新方法，例如数据可以每 5 秒更新一次，但问题是这种方法会消耗我的带宽，所以如果我只能在添加或更新数据时刷新，那么会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:06:21.443

我认为这对于任何 DBMS 都是不可能的，对于此类应用程序，您可以使用 JMS（Java 消息服务）。我首选的实现是 JBoss 的[HornetQ](https://www.jboss.org/hornetq/)。[您可以在https://en.wikipedia.org/wiki/Java_Message_Service](https://en.wikipedia.org/wiki/Java_Message_Service)找到其他实现

在那里，您应该使用发布/订阅模式来发送和接收事件。

# php - 处理同一个文件的团队。git有用吗？

> ID：11775151
> 
> 赞同：4
> 
> 时间：2012-08-02T09:59:59.367
> 
> 标签：php, git, netbeans

> **可能重复：**
> [什么是版本控制系统？Git 有什么用？](https://stackoverflow.com/questions/5401781/what-is-a-version-control-system-how-is-git-useful)

我们有一个使用 NetBeans IDE 的 PHP 项目，我认为它很棒。

我们在线完成所有工作（因为用户计算机和服务器上的一些数据库兼容性问题）。

一旦我们在 netbeans 中保存了一个 php 文件，它就会自动将该文件上传到服务器（因为当我们保存一个文件时，我们想要对其进行测试并且测试一个文件需要它在线）。

问题是我们是一个团队，我们使用 zend 框架的 MVC，所以很多时候我们在同一个控制器（文件）上工作。（但不同的行动）。

有时，当我们上传带有我们的新更改（而不是其他人的新更改）的过时本地文件时，我们不小心删除了彼此的代码，而我们互相教在编辑之前下载每个文件，我们只是人类并且（不像计算机） 犯错误。

很难找到错误发生在哪里以及是否发生了错误。因为每个人上传后只测试他/她自己的代码，而不是所有代码。并且只是检测到问题，例如“那个问题到底是从哪里来的，我检查过那个狗屎”

我发现我们不是地球上第一个遇到此类问题的团队，经过大量搜索后，我完成了 3 个字母单词的解决方案`GIT`。

但是，当我在学习 git 时，它似乎只是不同编辑文件的备份，虽然它很有用，但我不知道它是否可以帮助多个人处理一个文件。

git 有帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:08:53.940

当许多开发人员正在编辑一个文件时，Git 将为您提供帮助。如果他们编辑文件的单独部分，它将执行全自动（无合并冲突），并且如果有人编辑相同部分，则需要一些手动交互（解决合并冲突）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:24:44.990

您应该在提交时配置 Netbeans 和 git，然后推送到作为服务器的远程主机。完成后，您可以更好地编辑相同的文件，同时您还可以使用 git 在协作工作的同时保持（开发和生活）服务器上的代码最新。

这可以通过 pre-commit 和 post-commit 钩子来完成。在服务器上，您可以运行所谓的*裸*存储库。

在合并冲突时，服务器可以拒绝接受您的更改，因此您需要先解决您的盒子上的合并冲突，然后再将其推送到开发版本。

然后，您始终可以从开发版本推送到登台或生命服务器。当您使用标记时，您甚至拥有可以在点击时发布的软件版本。

Git 在这方面非常有帮助，这要归功于它易于安装、强大的使用能力和去中心化的特性。在过去的几年里，没有什么比 git 更能影响我编写和发布软件的方式了。

# google-drive-api - Google 云端硬盘应用范围已损坏

> ID：11775153
> 
> 赞同：1
> 
> 时间：2012-08-02T10:00:11.250
> 
> 标签：google-drive-api

我正在请求已安装的驱动器应用程序。这一直工作到昨天。今天我得到：{“code”：401，“errors”：[{“domain”：“global”，“location”：“Authorization”，“locationType”：“header”，“message”：“Invalid Credentials”， "reason" : "authError" } ], "message" : "Invalid Credentials" } 即使授予了范围。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:51:38.227

使用 drive.app.readonly 范围。

# python - 如果列表中的字符串因变音符号而失败

> ID：11775158
> 
> 赞同：1
> 
> 时间：2012-08-02T10:00:16.913
> 
> 标签：python, diacritics

由于我是法国人，我正在尝试制作一个小功能，可以在国家名称之前添加好的定冠词。除了少数几个以变音符号开头的国家外，我没有任何问题。这是我的代码：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
def article(nomPays):
    voyelles = ['A','E','É','I','O','U','Y']
    if nomPays == 'Mexique':
        return 'du'
    elif nomPays[0] in voyelles:
        return 'de l\''
    elif nomPays[-1] == 'e':#signe négatif pour compter à partir de la dernière lettre
        return 'de la'
    else:
        return 'du'

print article('Érythrée') 
```

如果我输入 Allemagne 而不是 Érythrée，则行为是正确的：它返回“de l”。但是 Érythrée 返回“de la”。这意味着我的函数无法将字符 É 识别为 voyelles 列表的一部分。

谁能解释我为什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:05:13.673

问题是您`str`在 Python 2 中使用，其中`str`是字节序列，因此`nomPays[0]`将给出字符串的第一个*字节*，而不是第一个*字符*。在单字节编码中这不是问题，但是对于像 UTF-8 这样的多字节编码，“Érythrée”的第一个字节是*前导字节*，而不是整个字符“É”。

您需要更改为使用`unicode`来获取第一个字符：

```
firstChar = unicode(nomPays, 'UTF-8')[0].encode('UTF-8') 
```

实际上，它可能更容易使用`startswith`：

```
if any(nomPays.startswith(voyelle) for voyelle in voyelles): 
```

或者，您可以`unicode`在整个应用程序中使用，或者切换到 Python 3，这一切都得到了更好的处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T10:06:58.297

`u`在之前添加`''`：

```
voyelles = [u'A',u'E',u'É',u'I',u'O',u'U',u'Y']
...
print article(u'Érythrée') 
```

例子：

```
>>> voyelles = [u'A',u'E',u'É',u'I',u'O',u'U',u'Y']
>>> s=u'Érythrée'
>>> s[0] in voyelles
True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T10:07:16.863

它是字节字符串，而不是 unicode 字符串，因此字符串的第一个元素是：

```
>>> 'Érythrée'[0]
'\xc3' 
```

这是因为 UT8 编码。

# c - GTK3：获取鼠标滚动方向

> ID：11775161
> 
> 赞同：4
> 
> 时间：2012-08-02T10:00:50.087
> 
> 标签：c, gtk, gtk3

我刚刚将一个 C 程序从 GTK2 移植到 GTK3。该程序使用`GtkDrawingArea`鼠标滚轮在其上使用。切换到 GTK3 后，我无法再正确检测滚轮的使用情况。这是我所做的和得到的：

**GTK2 (2.24.10)**

1.  我将事件掩码设置`GtkDrawingArea`为`GDK_EXPOSURE_MASK | GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK | GDK_LEAVE_NOTIFY_MASK`。
2.  我将信号处理程序连接`scroll-event`到`GtkDrawingArea`.
3.  一旦我使用滚轮，就会调用信号处理程序，并且 的属性`direction`是or 。`GdkEventScroll``GDK_SCROLL_UP``GDK_SCROLL_DOWN`

**GTK3 (3.4.2)**

1.  除了上述之外，我还包括`GDK_SMOOTH_SCROLL_MASK`在`GtkDrawingArea`. 没有它，我的信号处理程序永远不会被调用。
2.  我使用与上述相同的信号处理程序。
3.  一旦我使用滚轮，就会调用信号处理程序，并且 is`direction`的`GdkEventScroll`属性`GDK_SCROLL_SMOOTH`。打电话`gdk_event_get_scroll_deltas()`给我总是 0`delta_x`和`delta_y`。我从来没有看到任何其他方向比 `GDK_SCROLL_SMOOTH`。

尽管我的鼠标本身只提供“离散”button4/5 事件，但我可以接受平滑滚动事件，但我如何确定滚动事件的方向？

顺便说一句：我在 amd64 上使用 Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T02:10:41.233

Gtk3 中有一个与“滚动事件”信号相关的[错误。](https://bugzilla.gnome.org/show_bug.cgi?id=675959)首先，在您的回调中，您应该使用 GdkEventScroll 结构的 delta_x 和 delta_y 成员。其次，第一次滚动鼠标时，这些成员都将为零（错误！）。随后的滚动将为您提供正确的值。第三，不幸的是，这个错误似乎不会被修复。

# excel - excel函数中的LastRow根据单元格中的值更改而不使用vb a

> ID：11775165
> 
> 赞同：0
> 
> 时间：2012-08-02T10:00:58.333
> 
> 标签：excel, excel-formula

我在excel中有以下功能：

```
=SUMIF($H$2:$H$500;CONCATENATE(N$1;$K$1;$K2;$M$1;$M2);$C$2:$C$500) 
```

在这种情况下，它位于第 N 行第 2 行。我有一个宏将这个函数拉下列。

在此函数中，它考虑从单元格 H2 到 H500 的所有内容

> $H$2:$H$500

和 C2 到 C500

> 2 加元：500 加元

C500 & H500 = LastRow，我手动输入了这个数字，但是当输入的数量超过这个数字时，它们不被计算在内，结果不正确。

我有一个包含数字 1 的单元格 R2，它将根据我从另一个文件中找出的 LastRow 更改。这将自动更新。

我希望数字 500（现在是我键入的静态数字）根据单元格 R2 中的数字（值）进行更改。使其更加灵活。

如果单元格 R2 中的值从 1 更改为 300，则此示例中的数字 500 需要从单元格 R2 更改为此 300。我知道当更改此函数时，它不会是 500 而是 1，因为单元格 R2 中的数字是 1 而不是 500。

它会是这样的：

```
=SUMIF($H$2:$H$**R2**;CONCATENATE(N$1;$K$1;$K2;$M$1;$M2);$C$2:$C$**R2**) 
```

当我在函数中选择 $500 时，我尝试选择单元格 R2，但它会查看 H2 和 R2 之间的范围作为选择，但这不是我想要的。

我希望它仍然只查看 H 列，或多或少的行，这是由 R2 中的值定义的。

我希望有人对此有解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:29:01.283

在这种情况下，您可以使用 INDIRECT() 来构建地址。

```
=SUMIF(INDIRECT("$H$2:$H$" & TEXT($R$2, "#####"));CONCATENATE(N$1;$K$1;$K2;$M$1;$M2);INDIRECT("$H$2:$H$" & TEXT($R$2, "#####")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:27:31.977

您可以使用该`OFFSET`功能来满足您的需求。`OFFSET`根据您选择的参数返回一个范围。在这种情况下，您可以`OFFSET`根据您的单元格提供要返回的行数`R2`。

微软有一个很好的例子，所以我不会在这里重复[。](http://support.microsoft.com/kb/324991)

然后你的公式变成：

```
=SUMIF(OFFSET(Sheet1!$H$2;0;0;Sheet1!$R$2-1;1);CONCATENATE(N$1;$K$1;$K2;$M$1;$M2);OFFSET(Sheet1!$C$2;0;0;Sheet1!$R$2-1;1)) 
```

请记住，您仍在将行的开头分别硬编码为 H2 和 C2，因此如果这些移动，您将需要确保调整（即`-1`在 part 中`Sheet1!$R$2-1`）对于您的情况是正确的。

# html - 自动跳转到文本中的标题

> ID：11775166
> 
> 赞同：0
> 
> 时间：2012-08-02T10:01:06.563
> 
> 标签：html, css

所以我在网页上有很长一段文字。我想要做的是有一个清单，其中包含指向该文本中不同标题的链接，例如，当我单击“信息”时，它会自动跳转到文本中名为“信息”的标题。真的找不到我怎么能做到这一点。

任何人都可以链接我，或者告诉我它是否很短如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:04:10.617

您可以使用哈希标签来执行此操作。

在您的文本中，您将有带有 id 的标题，如下所示：

```
<h1 id="info">Information</h1> 
```

然后，对于要跳转到本节的链接，您可以编写：

```
<a href="#info">Go to info</a> 
```

需要注意的重要一点是`#IDHERE`在你的锚

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:20:40.443

您只需要输入一个唯一的 ID，例如：

```
<a href="#info">get me to the information</a>

<p><a name="info"></a>Information</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T10:04:19.290

为此可以使用`href`和`name`/`id`属性的html标签：

```
<h1><a href="#section1">Go to Section1</a></h1>
<h1><a href="#section2">Go to Section2</a></h1>
....
....
....
<p><a name="section1">Section1</a></p>
....
....
....
<p id="section2">Section2</p>
....
....
.... 
```

[也显示在这里](http://www.w3schools.com/html/html_links.asp)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T10:04:53.657

你用'a'标签来做。

你的链接：

```
<a href="#header1">link to header number one</a> 
```

你的标题：

```
<a name="header1"></a>
<h1>Header Number One</h1> 
```

# ruby-on-rails - Rails 验证日期“超过 17 岁”

> ID：11775168
> 
> 赞同：0
> 
> 时间：2012-08-02T10:01:07.897
> 
> 标签：ruby-on-rails, validation

我的视图中有三个选择字段：

```
<%= select("policyholderdetail", "dob_day", days_options, {:prompt => "#{t :day}"}) %>
<%= select("policyholderdetail", "dob_month", months_options, {:prompt => "#{t :month}"}) %>
<%= select("policyholderdetail", "dob_year", dob_years_options, {:prompt => "#{t :year}"}) %> 
```

其中值`:dob_day`范围为01-31、01-12`:dob_month`和`dob_year`1912-2012（过去 100 年）

我想验证某人的出生日期至少是 17 年前，即该人至少 17 岁。我怎样才能在我的 Rails 模型中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:16:57.060

首先，您要确保只保存一个 DateTime 来代表所有三个字段。

```
DateOfBirth = Time.parse ("#{ dob_year + dob_month + dob_day } " ) 
```

然后你就在那个日期工作：

```
validates :is_seventeen?

def is_seventeen?
   DateOfBirth = Time.parse ("#{ dob_year + dob_month + dob_day } " )
   DateOfBirth > Time.now - 17.years ? true : false
end 
```

**提示..**

在具体答案之外，我建议您的 DateOfBirth 字段只是一个字段，并且这三个选择代表表中的一列。

# iphone - 如何使用 AFNetworking 连接网站

> ID：11775171
> 
> 赞同：-2
> 
> 时间：2012-08-02T10:01:11.320
> 
> 标签：iphone, xcode, afnetworking

对不起，我是初学者。
如何使用 AFNetworking 连接网站：

```
I have login: xxx
password: yyy 
```

我必须做查询：

```
{
              "method": "authorize",
              "params": [
                "100000202",
                "TestApp677"`
              ]
            } 
```

到端点： http://qqqqq.com/authorize/?ver= [2_01](http://qqqqq.com/authorize/?ver=2_01)

我阅读了入门指南并添加了库，但我不知道如何开始。

我有：

```
NSURL *url = [NSURL URLWithString:@"http://qqqqq.com/mobileapi/authorize/?ver=2_01"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:url];
    [client registerHTTPOperationClass:[AFJSONRequestOperation class]];
    [client setAuthorizationHeaderWithUsername:@"xxx" password:@"yyy"]; 
```

接下来是什么？

**更新**

* * *

当我使用 Jano 的代码时，我收到此错误：

```
<code>
Error Domain=com.alamofire.networking.error Code=-1016 "Expected content type {(
    "text/json",
    "application/json",
    "text/javascript"
)}, got text/html" UserInfo=0x6875ce0<br> {NSErrorFailingURLKey=http://qqqqq.com/authorize/?ver=2_01,
NSLocalizedDescription=Expected content type {(
    "text/json",
    "application/json",
    "text/javascript"
)}, got text/html} 
```

**更新**

* * *

我改变了2行

```
AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:[NSURL 
```

URLWithString:@" [http://qqqqq.com/mobileapi](http://qqqqq.com/mobileapi) "]];

和

```
NSMutableURLRequest *request = [client requestWithMethod:@"POST" path:@"/authorize/?ver=2_01" 
parameters:jsonDic]; 
```

我得到错误：

```
Error Domain=com.alamofire.networking.error Code=-1011 "Expected status code in (200-299), got
 404" UserInfo=0x68562b0 {NSErrorFailingURLKey=http://qqqqq.com/authorize/?ver=2_01, 
NSLocalizedDescription=Expected status code in (200-299), got 404} 
```

**更新**

* * *

我的代码如下所示：

```
 <code>NSMutableDictionary *jsonDic = [NSMutableDictionary dictionary];
        [jsonDic setObject:@"authorize" forKey:@"method"];
        [jsonDic setObject:[NSArray arrayWithObjects:@"100000202",@"TestApp677", nil] forKey:@"params"];

        AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"http://xxxxx.com"]];
        [client registerHTTPOperationClass:[AFJSONRequestOperation class]];
        [client setAuthorizationHeaderWithUsername:@"mobileapi" password:@"M031leA#p1"];

        NSMutableURLRequest *request = [client requestWithMethod:@"POST" path:@"/mobileapi/authorize/?ver=2_01" parameters:jsonDic];

    [client setParameterEncoding:AFJSONParameterEncoding];

    [AFJSONRequestOperation addAcceptableContentTypes:[NSSet setWithObject:@"text/html"]];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation
                                         JSONRequestOperationWithRequest:request
                                         success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON){
                                             NSLog(@"%@",JSON);
                                         }
                                         failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
                                             NSLog(@"%@",error);
                                         }];
    [client enqueueHTTPRequestOperation:operation];</code>

and i get error:

Error Domain=JKErrorDomain Code=-1 "Unexpected token, wanted '{', '}', '[', ']', ',', ':', 'true', 'false', 'null', '"STRING"', 'NUMBER'." UserInfo=0x6d47460 {JKAtIndexKey=0, JKLineNumberKey=1, NSLocalizedDescription=Unexpected token, wanted '{', '}', '[', ']', ',', ':', 'true', 'false', 'null', '"STRING"', 'NUMBER'.}

<B>UPDATE</B>

----------

MY CODE IS A LOOK LIKE:

    NSString* encodeToPercentEscapeString(NSString *string) {
        return (NSString *)
        CFBridgingRelease(CFURLCreateStringByAddingPercentEscapes(NULL,
                                                                  (__bridge CFStringRef) string,
                                                                  NULL,
                                                                  (CFStringRef) @"!*'();:@&=+$,/?%#[]",
                                                                  kCFStringEncodingUTF8));
    }

    - (void)viewDidLoad
    {
        //NSMutableDictionary *jsonDic = [NSMutableDictionary dictionary];
        //[jsonDic setObject:@"authorize" forKey:@"method"];
        //

[jsonDic setObject:[NSArray arrayWithObjects:@"100000202",@"TestApp677", nil] forKey:@"params"];

        NSDictionary *jsonDic = [NSString stringWithFormat:@"{\"method\":\"authorize\",\"params\":\[\"100000202\",\"TestApp\"]}",nil];

        NSLog(@"%@", jsonDic);

        NSString *password = encodeToPercentEscapeString(@"M031leA#p1");

        AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"http://vemmaeurope.com"]];
        [client registerHTTPOperationClass:[AFJSONRequestOperation class]];
        [client setAuthorizationHeaderWithUsername:@"mobileapi" password:password];

        NSMutableURLRequest *request = [client requestWithMethod:@"POST" path:@"/mobileapi/authorize/?ver=2_01" parameters:jsonDic];

        [client setParameterEncoding:AFJSONParameterEncoding];
        [AFJSONRequestOperation addAcceptableContentTypes:[NSSet setWithObject:@"text/html"]];

        AFJSONRequestOperation *operation = [AFJSONRequestOperation
                                             JSONRequestOperationWithRequest:request
                                             success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON){
                                                 NSLog(@"%@",JSON);
                                             }
                                             failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
                                                 NSLog(@"%@",error);
                                             }];
        [client enqueueHTTPRequestOperation:operation];

        // Do any additional setup after loading the view, typically from a nib.
    } 
```

而且我仍然有同样的错误：

```
Error Domain=JKErrorDomain Code=-1 "Unexpected token, wanted '{', '}', '[', ']', ',', ':', 
'true', 'false', 'null', '"STRING"', 'NUMBER'." UserInfo=0x6c40cd0 {JKAtIndexKey=0, 
JKLineNumberKey=1, NSLocalizedDescription=Unexpected token, wanted '{', '}', '[', ']', ',', ':', 
'true', 'false', 'null', '"STRING"', 'NUMBER'.} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:29:17.123

以下附魔可能会有所帮助：

```
NSMutableDictionary *jsonDic = [NSMutableDictionary dictionary];
[jsonDic setObject:@"authorize" forKey:@"method"];
[jsonDic setObject:[NSArray arrayWithObjects:@"100000202",@"TestApp677", nil] forKey:@"params"];

AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"http://qqqqq.com"]];
[client registerHTTPOperationClass:[AFJSONRequestOperation class]];
[client setAuthorizationHeaderWithUsername:@"xxx" password:@"yyy"];

NSMutableURLRequest *request = [client requestWithMethod:@"GET" path:@"/authorize/?ver=2_01" parameters:jsonDic];
AFJSONRequestOperation *operation = [AFJSONRequestOperation
                                     JSONRequestOperationWithRequest:request
                                     success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON){
                                         NSLog(@"%@",JSON);
                                     }
                                     failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
                                         NSLog(@"%@",error);
                                     }];
[client enqueueHTTPRequestOperation:operation]; 
```

如果 GET 不起作用，请用 POST 替换 GET。

**更新**

如果您的参数中有不寻常的字符，例如：@"M031leA#p1" 将参数 @"M031leA#p1" 替换为 encodeToPercentEscapeString(@"M031leA#p1")，然后将以下 C 函数粘贴到类中的任何位置：

```
// remove CFBridgingRelease and __bridge if your code is not ARC
NSString* encodeToPercentEscapeString(NSString *string) {
    return (NSString *)
        CFBridgingRelease(CFURLCreateStringByAddingPercentEscapes(NULL,
                                            (__bridge CFStringRef) string,
                                            NULL,
                                            (CFStringRef) @"!*'();:@&=+$,/?%#[]",
                                            kCFStringEncodingUTF8));
} 
```

# batch-file - 使用 windows cmd 按名称获取子文件夹

> ID：11775174
> 
> 赞同：1
> 
> 时间：2012-08-02T10:01:18.613
> 
> 标签：batch-file, command-line, cmd

在批处理脚本中，我想列出所有具有给定名称的子文件夹。我一般可以这样做，但有问题，当我正在搜索的文件夹中有子文件夹时。我在 Windows 7 cmd 上执行此操作。

我用来列出所有名为 bin 的子文件夹的代码：

```
dir /s /q /b /A:D bin 
```

如果我有这样的文件夹结构：`".\a\bin .\b\bin .\c\bin"`它工作正常。

如果我有这样的结构：`".\bin .\a\bin .\b\bin .\c\bin"`它只列出`".\bin"`.

有人知道任何解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T11:33:49.547

```
dir /s /b /A:D *|findstr /ri "[\\]bin$" 
```

# android - 安卓位置

> ID：11775176
> 
> 赞同：0
> 
> 时间：2012-08-02T10:01:27.037
> 
> 标签：android, gps, location

当我使用 getLastKnownLocation() 函数时，它会打开 GPS，为什么？

如果有人知道的话。我需要知道这个流程。

问候沙阿纳瓦兹阿西夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:22:48.947

如果您使用的是模拟器，Android SDK 中有一个名为“ddms”的工具，运行它并转到名为“Emulator Control”的选项卡，通过此选项，您可以将 GPS 位置发送到您的 android 模拟器，而不是您的代码应该可以正常工作。

如果您使用的是真实设备，请检查您为此功能提供的网络提供商是否已实际启用、GPS 或 NETWORK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:09:35.577

这是模拟器吗？还是真正的设备？

根据[文档](http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation%28java.lang.String%29)

> 如果提供程序当前被禁用，则返回**null 。**

因此，如果它被禁用，您将无法接收该位置。

# ruby-on-rails - 无法批量分配受保护的属性：用户、课程

> ID：11775178
> 
> 赞同：0
> 
> 时间：2012-08-02T10:01:30.267
> 
> 标签：ruby-on-rails, ruby-on-rails-3, relationship

我想用 Rails 做一个关于学校学生和课程关系的项目。一个学生可以有很多课程，一个课程可以有很多学生。因此，我认为学生和课程的关系是“多对多”的

我去了控制台：

```
u = User.first
User Load (0.7ms)  SELECT "users".* FROM "users" LIMIT 1
...
c = Course.first
Course Load (0.8ms)  SELECT "courses".* FROM "courses" LIMIT 1
...
UserCourseship.create( :user => u, :course => c ) 
```

然后我得到的错误是：

```
ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes:user, course 
```

这是我的`user.rb`

```
class User < ActiveRecord::Base
  has_many :user_courseships
  has_many :courses, :through => :user_courseships

    def self.from_omniauth(auth)
        where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
            user.provider = auth.provider
            user.uid = auth.uid
            user.name = auth.info.name
            user.oauth_token = auth.credentials.token
            user.oauth_expires_at = Time.at(auth.credentials.expires_at)
            user.save!
        end
    end

    def facebook
      @facebook ||= Koala::Facebook::API.new(oauth_token)
    end
end 
```

我的`course.rb`

```
class Course < ActiveRecord::Base
  has_many :user_courseships
  has_many :users, :through => :user_courseships
  attr_accessible :name, :sn, :time
end 
```

和关系`user_courseship.rb`

```
class UserCourseship < ActiveRecord::Base
  belongs_to :user
  belongs_to :course
  attr_accessible :course_id, :user_id
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:12:43.347

您可以像这样向学生添加课程（反之亦然）：

```
c = Course.first
s = Student.first
s.save

s.courses << c

#Other way around

c.students << s
c.save 
```

看看：accepts_nested_attributes_for

[http://guides.rubyonrails.org/security.html#mass-assignment](http://guides.rubyonrails.org/security.html#mass-assignment)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T14:17:44.020

改变这个：

```
UserCourseship.create( :user => u, :course => c ) 
```

对此：

```
UserCourseship.create( :user_id => u.id, :course_id => c.id ) 
```

然后它应该工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:20:26.680

在 github 成为攻击的受害者之后，从 rails 3.2.3 开始，默认启用质量分配。

因此，您现在需要打开批量分配警告（不是一个好主意）

或通过模型中的黑名单或白名单设置属性的保护级别。

白名单可以通过：（我强烈建议这种方法）

```
attr_accessible :user_id, :course 
```

或通过黑名单设置：

```
attr_protected :is_admin, :pasword_salt 
```

查看更多信息
[http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html)

# c++ - 在 C++ 中打开一个大于 9 的 COM 端口

> ID：11775185
> 
> 赞同：9
> 
> 时间：2012-08-02T10:01:46.087
> 
> 标签：c++, ports

我在 C++ 中使用 COM 端口。我无法打开大于 9 的 COM 端口，例如 10。这是用于 COM 端口检测的功能：

```
WCHAR port_name[7];
WCHAR num_port[4];        

for (i=1; i<256; i++)
{
    bool bSuccess = false;

    wcscpy(port_name,L"COM");
    wcscat(port_name,_itow(i,num_port,10));

    HANDLE hPort;

    //Try to open the port
    hPort = CreateFile(L"COM10", GENERIC_READ | GENERIC_WRITE, 0, 0, OPEN_EXISTING, 0, 0);
    //hPort = CreateFile(port_name, GENERIC_READ | GENERIC_WRITE, 0, 0, OPEN_EXISTING, 0, 0);

    if (hPort == INVALID_HANDLE_VALUE)
    {
        DWORD dwError = GetLastError();

        //Check to see if the error was because some other application had the port open
        if (dwError == ERROR_ACCESS_DENIED)
        {
            bSuccess = TRUE;
            j=j+1;  
        }
    }
    else   //The port was opened successfully
    {            
        bSuccess = TRUE;
        j=j+1;

        CloseHandle(hPort);   //closing the port
    }

    if (bSuccess)array_ports[j]=i;

} 
```

我不明白为什么例如 COM10 将 FFFFFFFF 扔回 HANDLE hPort。

```
hPort = CreateFile(L"COM10", GENERIC_READ | GENERIC_WRITE, 0, 0, OPEN_EXISTING, 0, 0); 
```

COM9、COM8、COM7 等工作正常，

```
hPort = CreateFile(L"COM9", GENERIC_READ | GENERIC_WRITE, 0, 0, OPEN_EXISTING, 0, 0); 
```

这个问题有解决方案吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-02T10:04:59.223

这是一个错误，解决方法是使用字符串

```
\\.\COM10

hPort = CreateFile("\\\\.\\COM10", GENERIC_READ | GENERIC_WRITE, 0, 0, OPEN_EXISTING, 0, 0); 
```

检查[这篇](https://support.microsoft.com/en-us/kb/115831)文章。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-02T10:04:38.520

对于大于 9 的 COM 端口，您需要使用以下格式：

```
\\\\.\\COM%d 
```

`%d`端口号的 printf 替换在哪里。

为什么？好吧，这访问了全局 NT 对象空间，所有对象都存储在其中。Windows 只知道您使用它来支持 DOS 的方式为 COM0-9 起别名；除此之外，它们就像普通设备一样，以这种方式访问​​。

要探索 NT 对象空间，我推荐[WinObj](http://technet.microsoft.com/en-us/sysinternals/bb896657.aspx)，它基本上可以让您四处浏览。\.\ 映射`GLOBAL??`到此树中（实际上与其他一些区域一样。树的其余部分要求您具有 NT 的系统视图，而不是 Win32 的系统视图）。

以防万一您不知道，`INVALID_HANDLE_VALUE`它被定义为`0xffffff...`- 这通常发生在打开失败时。

# mysql - Mysql联合查询，用名字连接结果

> ID：11775186
> 
> 赞同：0
> 
> 时间：2012-08-02T10:01:46.507
> 
> 标签：mysql

```
SELECT  COUNT(ID) AS RANK1 FROM `db_ranking` WHERE `sid`=2 AND `rank`=1
UNION
SELECT  COUNT(ID) AS RANK2  FROM `db_ranking` WHERE `sid`=2 AND `rank`=2
UNION
SELECT  COUNT(ID) AS RANK3  FROM `db_ranking` WHERE `sid`=2 AND `rank`=3
UNION
SELECT   COUNT(ID)  AS RANK4  FROM `db_ranking` WHERE `sid`=2 AND `rank`=4
UNION
SELECT COUNT(ID) AS RANK5 FROM `db_ranking` WHERE `sid`=2 AND `rank`=5 
```

我想在列中显示每个 SELECT 结果。

所以我想要 5 列，每列都有一个 ID 计数..

所以应该是这样的

```
RANK1 RANK2 RANK3 RANK4 RANK5
  0     3     5     6     7 
```

我现在不明白..我不知道为什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:08:31.267

以下工作正常..

```
 select
    (SELECT  COUNT(ID) AS RANK1 FROM `db_ranking` WHERE `sid`=2 AND `rank`=1) as Rank1,
    (SELECT  COUNT(ID) AS RANK2  FROM `db_ranking` WHERE `sid`=2 AND `rank`=2) as rank2,
    (SELECT  COUNT(ID) AS RANK3  FROM `db_ranking` WHERE `sid`=2 AND `rank`=3) as rank3,
    (SELECT   COUNT(ID)  AS RANK4  FROM `db_ranking` WHERE `sid`=2 AND `rank`=4) as rank4,
    (SELECT COUNT(ID) AS RANK5 FROM `db_ranking` WHERE `sid`=2 AND `rank`=5) as rank5
    from dual 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:46:59.847

最有效的方法是

```
SELECT
    SUM(CASE WHEN `rank`=1 THEN 1 ELSE 0 END) as Rank1,
    SUM(CASE WHEN `rank`=2 THEN 1 ELSE 0 END) as Rank2,
    SUM(CASE WHEN `rank`=3 THEN 1 ELSE 0 END) as Rank3,
    SUM(CASE WHEN `rank`=4 THEN 1 ELSE 0 END) as Rank4,
    SUM(CASE WHEN `rank`=5 THEN 1 ELSE 0 END) as Rank5
FROM
    `db_ranking`
WHERE
    `sid`=2 
```

# jquery - 在 ASP.NET .MVC 3 中将样式表添加到 iFrame

> ID：11775193
> 
> 赞同：1
> 
> 时间：2012-08-02T10:02:14.063
> 
> 标签：jquery, html, asp.net-mvc-3, iframe, stylesheet

**大纲**

我试图弄清楚如何在 ASP.NET MVC3 中向 iFrame 注入或定义样式表。我已经浏览了有关上述主题的现有线程，但没有一个适合我的情况。我有一个解决方案定义了一个用户控件（ParitalShimViewControl），它在 aspx 中呈现 .CSHTML 页面。使用该解决方案中的 dll，我将其引用到另一个解决方案（主框架所在的位置）并集成到主解决方案中。所有的 css、js 文件只保存在主解决方案中。

**问题**

我所做的是，我定义了一些功能（创建控制器、视图和模型）并使用 PartialShimControl 渲染它并将其映射到其中一个 aspx 页面中的主要解决方案。在这里，我需要使用 iFrame 调用一些跨域服务并在 .CSHTML 文件（即视图）上呈现结果，但是需要使用样式表正确格式化结果，不幸的是我无法引用样式表在视图中，因为它们被放置在主解决方案中。

**问题**

希望要求明确。如何在主要解决方案中或任何可能的方式中引用 iFrame 中的那些 css？

希望我听起来不会太混乱:(

代码：

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/MasterPages/X.master"
    AutoEventWireup="true" CodeBehind="X.aspx.cs" Inherits="Online.Web.Pages.X" %>
    <%@ Register Assembly="Online.CommonFramework" Namespace="Online.CommonFramework.BaseClasses"
    TagPrefix="CFBase" %>
    <%@ Register Src="~/UserControls/Shims/PartialViewShimControl.ascx" TagName="PartialViewShim" TagPrefix="UC" %>
    <%@ Register Assembly="Online.Web" Namespace="Online.Web.ProviderWebParts.DashBoard"
    TagPrefix="DashBoardWebParts" %>
    <%@ Register Assembly="Online.Web" Namespace="Online.Web.WebParts"
    TagPrefix="WebParts" %>
    <asp:Content ID="HeadContent" runat="server" ContentPlaceHolderID="Head">
    <link href="/Content/css/Core.css" rel="stylesheet" type="text/css" />
    <link href="/Content/css/Home.css" rel="stylesheet" type="text/css" />
    <link href="/Content/css/Pods.css" rel="stylesheet" type="text/css" />
    <%--<link href="/Pages/CSS/layoutHome.css" rel="stylesheet" type="text/css" />
    <link href="/Pages/CSS/Master0.css" rel="stylesheet" type="text/css" />
    <link href="/Pages/CSS/compNewLexis0.css" rel="stylesheet" type="text/css" />
    <link href="/Pages/CSS/Search0.css" rel="stylesheet" type="text/css" />--%>
   </asp:Content>
   <asp:Content ID="MedLitBodyContent" ContentPlaceHolderID="LandingBody" runat="server">
    <%--<script type="text/javascript" src="JS/api/N.js"></script>
    <script type="text/javascript" src="JS/api/Utils.js"></script>
    <script type="text/javascript" src="JS/apiWebStorage.js"></script>
    <script type="text/javascript" src="JS/vendor/VendorMaster0.js"></script>
    <script src="JS/api/SearchResults.js" type="text/javascript"></script>
    <script src="JS/vendor/backbone.js" type="text/javascript"></script>
    <script src="JS/vendor/handlebars.js" type="text/javascript"></script>
    <script src="JS/vendor/jquery-1.7.1.js" type="text/javascript"></script>
    <script src="JS/vendor/underscore.js" type="text/javascript"></script>--%>
    <script type="text/javascript" src="/MedLit/Content/js/LA.MedLit.Core.js"></script>
    <script type="text/javascript" src="/MedLit/Content/js/LA.MedLit.MedicalResearch.js">    
   </script>
    <script type="text/javascript" src="/MedLit/Content/js/LA.MedLit.CaseValueAssessment.js"></script>
    <script type="text/javascript" src="/X/Content/js/L.X.BrowseTopics.js">  
   </script>
   <script type="text/javascript" src="/X/Content/js/L.X.ToPDF.js"></script>
   <script type="text/javascript">
        $LAB
        .script('/JS/vendor/VendorMaster1.js')
        .script('/JS/api/N.Advance.Ajax.js').wait()
        .script('/JS/api/N.Advance.WebStorage.PageData.js')
        .script('/JS/api/N.Advance.Popup.js')
        .script('/JS/api/N.Advance.Events.js')
        .script('/JS/api/N.Advance.UI.js')
        .script('/JS/api/N.Advance.Transactional.js')
        .script('/JS/api/N.Advance.Middleware.js')
        .script('/JS/api/N.Advance.Ready.js')
        .wait(function () {
            $(LN.Advance.Ready.init);
        });            
    </script>
    <asp:ProxyWebPartManager ID="WProxyManager" runat="server">
        <StaticConnections>
            <asp:WebPartConnection ID="DashBoardWPC" ProviderID="DashBoardTabWP" ProviderConnectionPointID="TabWebPart"
                ConsumerID="DashBoardPageLogicWP" ConsumerConnectionPointID="TabSystem" />
            <asp:WebPartConnection ID="TabsToState" ProviderID="DashBoardTabWP" ProviderConnectionPointID="TabWebPart"
                ConsumerID="dashBoardStateProvider" ConsumerConnectionPointID="TabSystem" />
            <asp:WebPartConnection ID="StatePageContextToPageLogic" ProviderID="dashBoardStateProvider"
                ProviderConnectionPointID="DashBoardPageContextExport" ConsumerID="DashBoardPageLogicWP"
                ConsumerConnectionPointID="PageContext" />
        </StaticConnections>
    </asp:ProxyWebPartManager>
    <div class="pg-scroll-fixed lx-clear">
        <CFBase:BaseWebPartZone runat="server" ID="WPTopZone">
            <ZoneTemplate>
                <WebParts:TabWebPart runat="server" Description="DashBoard" ID="DashBoardTabWP" ChromType="None"
                    IsRMLogRequired="true" />
                <DashBoardWebParts:DashBoardStateWebPart runat="server" ID="dashBoardStateProvider"
                    ChromeType="None" ChromeState="Minimized" />
                <DashBoardWebParts:DashBoardPageLogic runat="server" ID="DashBoardPageLogicWP" ChromeType="None" />
            </ZoneTemplate>
        </CFBase:BaseWebPartZone>
     </div>
    <UC:PartialViewShim runat="server" ID="LandingPageIndex" Area="MedLit" Controller="Research"
        View="ResearchView" />
  </asp:Content> 
```

动态渲染 css -

```
 $(function () {
            var $head = $("#frame").contents().find("head");
            $head.append($("<link/>", { rel: "stylesheet", href: '/Pages/CSS/layoutMedLitHome.css', type: "text/css" }));
            $head.append($("<link/>", { rel: "stylesheet", href: '/Pages/CSS/Master0.css', type: "text/css" }));
            $head.append($("<link/>", { rel: "stylesheet", href: '/Pages/CSS/compNewLexis0.css', type: "text/css" }));
            $head.append($("<link/>", { rel: "stylesheet", href: '/Pages/CSS/Search0.css', type: "text/css" }));
            alert('head:' + $head.val());
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:30:19.333

解决了，用div代替iFrame获取跨域html并嵌入，解决了样式表的问题！但是非常感谢您的支持。

# python - 查找背景图像是否用于任何具有内联样式的 html 标记

> ID：11775195
> 
> 赞同：0
> 
> 时间：2012-08-02T10:02:30.800
> 
> 标签：python, html, parsing, xpath, lxml

如何找到所有具有背景图像的标签？没有使用样式表。所有样式都内联在标签中。

我目前正在使用**lxml**和 xpath。这是我能走多远：

```
from lxml import html  
html_text = """somehtml"""

doc = html.fromstring(html_text)  
tagWithBackgrounds = doc.xpath("//*[contains(@style,'background')]") 
```

接下来是什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:27:37.020

`doc.xpath('//*[contains(@style,"background") and contains(@style,"url(")]')`

不完美，但有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:18:44.080

根据[xmlme.com 的 XpathTool](http://www.xmlme.com/XpathTool.aspx)，这个 xPath 应该可以工作：

```
//*[contains(@style,'background-image')] 
```

这是我的测试结果：

![在此处输入图像描述](../Images/36eb31ca868d8331c9b264aa3b0ae8f4.png)

# bash - 如何从 bash 脚本文件执行 gmake/make？

> ID：11775197
> 
> 赞同：0
> 
> 时间：2012-08-02T10:02:43.543
> 
> 标签：bash, makefile, gnu-make, freebsd

我想使用make / gmake从bash脚本文件执行我的Makefile，具体取决于它正在编译的系统：FreeBSD上的gmake（不是标准make）和其他人的make。为此，我想确定系统上安装的 make 命令是否是 GNU make： - 如果 GNU make 则使用 make 编译 - 如果不是 GNU make 则使用 gmake 编译（如果未安装 gmake，则会引发错误）

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:10:52.363

```
if make --version | grep "^GNU Make" >& /dev/null
then
  MAKE=make
else
  MAKE=gmake
fi

${MAKE} ... 
```

编辑：将 --ver 更改为 --version

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:11:35.423

您可以使用`uname`：

```
if [ `uname -s` = "FreeBSD" ]; then
    makeprg=gmake
else
    makeprg=make
fi 
```

正如我在[维基百科](http://en.wikipedia.org/wiki/Uname)上看到的那样，FreeBSD`uname -s`将打印 FreeBSD，而在 Linux 上将输出 Linux（也在我的机器上）。

编辑：FreeBSD 而不是 Linux。

# c# - 实体框架 - 延迟加载失败但急切加载正常 - 如何修复/调试？

> ID：11775200
> 
> 赞同：0
> 
> 时间：2012-08-02T10:02:47.287
> 
> 标签：c#, .net, sql-server, poco, entity-framework-4.3.1

我正在针对 sql server 2012 数据库使用实体框架 4.3.1，并且我有一个包含这些表的数据库（还有更多但相关位如下）：

```
Customer

    CustomerNumber nvarchar(10) not null primary key

SalesDocument

    SalesDocumentNumber nvarchar(10) not null primary key
    CustomerNumber nvarchar(10) not null 
```

我正在运行以下代码片段：

```
const string docNumber = "111348718";
IQueryable<SalesDocument> docs = factory.CreateSalesDocumentRepository().All;

var ssd = docs.Single(s => s.SalesDocumentNumber.Equals(docNumber));

if (ssd.Customer == null)
    Console.WriteLine("NOOOOOOO");

ssd = docs
    .Include(s => s.Customer)
    .Single(s => s.SalesDocumentNumber.Equals(docNumber));

if (ssd.Customer == null)
    Console.WriteLine("YESSSSSS"); 
```

我**只**打印了NOOOOOOO。

所以看起来延迟加载不起作用，但急切加载是。

在这种情况下，我到底能提供什么以及如何调试出了什么问题（这可能导致失败的原因是什么 - 对我来说感觉就像 EF 中的一个错误，但我推迟宣布这一点并将整个热气腾腾的堆扔掉窗口）？如果第二个工作正常，那么配置肯定没问题...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:05:42.753

我不是要教你吸鸡蛋，但是你的`ObjectContext`.

即：在 ObjectContext 构造函数中

```
 this.ContextOptions.LazyLoadingEnabled = true; 
```

# c# - 我想访问数据表的每个单元格。如何？

> ID：11775203
> 
> 赞同：0
> 
> 时间：2012-08-02T10:03:13.167
> 
> 标签：c#, datatable

使用 C#，我想访问数据表中每一行中的每个单元格。最好的做法是什么？

```
for (int i = 0; i <= 5; i++)
    {
        if (myQuantity[i]!=null && myQuantity[i].Length>0)
        {
            row = dt.NewRow();
            row["Name"] = myName[i];
            row["Quantity"] = myQuantity[i];
            row["Price"] = myPrice[i];

            c = Convert.ToInt32(myQuantity[i]);

            int price = Convert.ToInt32(myPrice[i]) * c;

            row["Amount"] = price;

            dt.Rows.Add(row);

        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T10:06:46.543

您可以遍历访问每个单元格的行：

```
int numberOfColumns = dt.Columns.Count;

// go through each row
foreach (DataRow dr in dt.Rows)
{
    // go through each column in the row
    for (int i = 0; i < numberOfColumns; i++)
    {
        // access cell as set or get
        // dr[i] = "something";
        // string something = Convert.ToString(dr[i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-02T10:20:45.780

您可以在下一行使用`foreach`循环 for`DataRow`以及, Something ...`DataColumn`

```
DataTable dt = new DataTable();

foreach(DataRow dr in dt.Rows)
    foreach (DataColumn dc in dt.Columns)
    {
        Console.WriteLine(dr[dc]);
    } 
```

# php - 如何将名称值对中的 MySQL 数据库连接数据从 Android 传递到 PHP

> ID：11775204
> 
> 赞同：0
> 
> 时间：2012-08-02T10:03:18.503
> 
> 标签：php, android, mysql

我正在尝试使用 PHP 连接到 MySQL，从 Android 传递数据库连接参数。我不想硬编码连接参数，也不想将它们存储在单独的文件中。当我在 PHP 中有数据库参数时，我的代码运行良好，但现在我尝试使用如下名称值对将它们从 Java 传递到 PHP 时不起作用。

除了使用传递变量而不是硬编码的 PHP 连接外，没有任何变化，所以我怀疑存在一些格式或 REGEX 问题，但找不到任何解决方案。非常感谢任何帮助！

在 VolkerK 的帮助下解决的问题。请参阅原始 PHP 代码并在下面进行更新。

原始 SQLQuery.php：

```
<?php
mysql_connect($_REQUEST['url'],$_REQUEST['username'],$_REQUEST['password']);
mysql_select_db($_REQUEST['database']);
$q=mysql_query($_REQUEST['SQL']);
while($e=mysql_fetch_assoc($q))
        $output[]=$e;
print(json_encode($output));
mysql_close();
?> 
```

工作 SQLQuery.php：

```
<?php
if (get_magic_quotes_gpc()) {
    $process = array(&$_GET, &$_POST, &$_COOKIE, &$_REQUEST);
    while (list($key, $val) = each($process)) {
        foreach ($val as $k => $v) {
            unset($process[$key][$k]);
            if (is_array($v)) {
                $process[$key][stripslashes($k)] = $v;
                $process[] = &$process[$key][stripslashes($k)];
            } else {
                $process[$key][stripslashes($k)] = stripslashes($v);
            }
        }
    }
        unset($process);
}

define('DEBUGLOG', true); 
$output = array(); 

$mysql = mysql_connect($_REQUEST['url'],$_REQUEST['username'],$_REQUEST['password']); 
if ( !$mysql ) { 
    $output['status']='Error'; 
    $output['errormsg']='MySQL connect error'; 
    if ( defined('DEBUGLOG') && DEBUGLOG ) { 
        $output['errordetails'] = array( 
            'msg'=>mysql_error(), 
            'url'=>$_REQUEST['url'], 
            'username'=>$_REQUEST['username'], 
            'password'=>$_REQUEST['password'] 
        ); 
    } 
} 
else if ( !mysql_select_db($_REQUEST['database']) ) { 
    $output['status']='Error'; 
    $output['errormsg']='Database select error'; 
    if ( defined('DEBUGLOG') && DEBUGLOG ) { 
        $output['errordetails'] = array( 
            'msg'=>mysql_error(), 
            'url'=>$_REQUEST['url'], 
            'database'=>$_REQUEST['database'] 
        ); 
    } 
} 
else if ( false===($q=mysql_query($_REQUEST['SQL'])) ) { 
    $output['status']='Error'; 
    $output['errormsg']='Query error'; 
    if ( defined('DEBUGLOG') && DEBUGLOG ) { 
        $output['errordetails'] = array( 
            'msg'=>mysql_error(), 
            'url'=>$_REQUEST['url'], 
            'SQL'=>$_REQUEST['SQL'] 
        ); 
    } 
} 
else { 
    while( $e=mysql_fetch_assoc($q) ) { 
        $output[]=$e; 
    } 
} 

print(json_encode($output)); 
```

摘自我的 Android 代码（更改了细节以保护无辜者！）：

```
String phpDBURL = "mysqlserver.blah.com:3306";
String phpURL = "http://www.blah.com/php/";
String dbname ="dbref_Evaluate";
String username = "dbref_admin";
String password = "password";
String SQL = "SELECT ID, ShortDesc FROM User WHERE Account = 'myname@gmail.com'";
//the query to send
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("url",phpDBURL));
nameValuePairs.add(new BasicNameValuePair("username",username));
nameValuePairs.add(new BasicNameValuePair("password",password));
nameValuePairs.add(new BasicNameValuePair("database",dbname));
nameValuePairs.add(new BasicNameValuePair("SQL",SQL));
Log.v("Common.SQLQuery", "Passing parameters: " + nameValuePairs.toString());
//http post
try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(phpURL + "SQLQuery.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost); 
        HttpEntity entity = response.getEntity();
        InputStream is = entity.getContent();
//convert response to string 
```

等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:10:15.970

在 php 文件中使用 POST 而不是 REQUEST

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:12:38.587

您需要~~更多的~~错误处理。任何 mysql_* 函数都可能失败，您的代码必须对此做出反应。

粗略的例子：

```
<?php
define('DEBUGLOG', true);
$output = array();

$mysql = mysql_connect($_REQUEST['url'],$_REQUEST['username'],$_REQUEST['password']);
if ( !$mysql ) {
    $output['status']='error';
    $output['errormsg']='database error';
    if ( defined('DEBUGLOG') && DEBUGLOG ) {
        $output['errordetails'] = array(
            'msg'=>mysql_error(),
            'url'=>$_REQUEST['url'],
            'username'=>$_REQUEST['username'],
            'password'=>$_REQUEST['password']
        );
    }
}
else if ( !mysql_select_db($_REQUEST['database']) ) {
    $output['status']='error';
    $output['errormsg']='database error';
    if ( defined('DEBUGLOG') && DEBUGLOG ) {
        $output['errordetails'] = array(
            'msg'=>mysql_error(),
            'url'=>$_REQUEST['url'],
            'database'=>$_REQUEST['database']
        );
    }
}
else if ( false===($q=mysql_query($_REQUEST['SQL'])) ) {
    $output['status']='error';
    $output['errormsg']='database error';
    if ( defined('DEBUGLOG') && DEBUGLOG ) {
        $output['errordetails'] = array(
            'msg'=>mysql_error(),
            'url'=>$_REQUEST['url'],
            'SQL'=>$_REQUEST['SQL']
        );
    }
}
else {
    while( $e=mysql_fetch_assoc($q) ) {
        $output[]=$e;
    }
}

print(json_encode($output)); 
```

# c# - 为什么锁定我们要更改的对象是一种不好的做法？

> ID：11775205
> 
> 赞同：49
> 
> 时间：2012-08-02T10:03:27.317
> 
> 标签：c#, multithreading, locking

为什么在下面的代码中使用 lock 是一种不好的做法，我假设这是一个不好的做法，基于[这个 SO question here中的答案](https://stackoverflow.com/questions/7078535/c-sharp-lock-on-reference-passed-to-method-bad-practice)

```
private void DoSomethingUseLess()
{
    List<IProduct> otherProductList = new List<IProduct>();
    Parallel.ForEach(myOriginalProductList, product =>
        {
           //Some code here removed for brevity
           //Some more code here :)
            lock (otherProductList)
            {
                otherProductList.Add((IProduct)product.Clone());
            }
        });
} 
```

[那里](https://stackoverflow.com/a/7078748/507184)的答案提到这是不好的做法，但他们没有说明原因

**注意：**请忽略代码的用处，这只是为了举例，我知道它根本没有用

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-02T10:11:34.267

从[这里](http://msdn.microsoft.com/en-us/library/c5kehkcz.aspx)的 C# 语言参考：

> 通常，避免锁定公共类型或超出代码控制范围的实例。常见的结构`lock (this)`、`lock (typeof (MyType))`和`lock ("myLock")`违反了本指南：
> 
> `lock (this)`如果实例可以公开访问，则存在问题。
> 
> `lock (typeof (MyType))`如果`MyType`可以公开访问是一个问题。
> 
> `lock("myLock")`这是一个问题，因为进程中使用相同字符串的任何其他代码都将共享相同的锁。
> 
> 最佳实践是定义一个私有对象来锁定，或者一个私有静态对象变量来保护所有实例共有的数据。

在您的情况下，我会阅读上述指导，认为锁定您将要修改的集合是不好的做法。例如，如果您编写了以下代码：

```
lock (otherProductList) 
{
    otherProductList = new List<IProduct>(); 
} 
```

...那你的锁就一文不值了。由于这些原因，建议使用专用`object`变量进行锁定。

请注意，这并不意味着如果您使用您发布的代码，您的应用程序将会*中断。*“最佳实践”通常被定义为提供在技术上更具弹性的易于重复的模式。也就是说，如果您遵循最佳实践并拥有一个专用的“锁定对象”，那么您极不可能*编写*基于损坏`lock`的代码；如果你不遵循最佳实践，也许一百分之一，你会被一个容易避免的问题所困扰。

此外（并且更普遍地），使用最佳实践编写的代码通常更容易修改，因为您可以减少对意外副作用的警惕。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T10:14:52.737

这确实可能不是一个好主意，因为如果其他人使用相同的对象引用来执行 a `lock`，您可能会遇到死锁。**如果您的锁定对象有可能在您自己的代码之外访问**，那么其他人可能会破坏您的代码。

根据您的代码想象以下示例：

```
namespace ClassLibrary1
{
    public class Foo : IProduct
    {
    }

    public interface IProduct
    {
    }

    public class MyClass
    {
        public List<IProduct> myOriginalProductList = new List<IProduct> { new Foo(), new Foo() };

        public void Test(Action<IEnumerable<IProduct>> handler)
        {
            List<IProduct> otherProductList = new List<IProduct> { new Foo(), new Foo() };
            Parallel.ForEach(myOriginalProductList, product =>
            {
                lock (otherProductList)
                {
                    if (handler != null)
                    {
                        handler(otherProductList);
                    }

                    otherProductList.Add(product);
                }
            });
        }
    }
} 
```

现在你编译你的库，把它发送给一个客户，这个客户在他的代码中写道：

```
public class Program
{
    private static void Main(string[] args)
    {
        new MyClass().Test(z => SomeMethod(z));
    }

    private static void SomeMethod(IEnumerable<IProduct> myReference)
    {
        Parallel.ForEach(myReference, item =>
        {
            lock (myReference)
            {
                // Some stuff here
            }
        });
    }
} 
```

然后，您的客户可能会遇到一个很难调试的死锁，两个使用过的线程中的每一个都在等待`otherProductList`实例不再被锁定。

我同意，这种情况不太可能发生，但它说明**如果您的锁定引用在一段您不拥有的代码中可见，以任何可能的方式，那么最终代码有可能被破坏**。

# javascript - 计算使用 API 观看的 youtube 视频的百分比

> ID：11775207
> 
> 赞同：6
> 
> 时间：2012-08-02T10:03:32.500
> 
> 标签：javascript, youtube, youtube-api

我正在制作一个包含视频和在线练习的在线课程，并希望人们能够登录并跟踪他们的进度。

有没有办法我可以测量某人观看过的 youtube 嵌入的百分比并将其标记为完整，如果他们看过的话，比如超过 80%？

到目前为止，我最好的想法是在玩家状态更改为 PLAYING 时使用 getCurrentTime() ，然后每五秒左右再次使用，将差异添加到某种总数中。但是，如果有人在第一分钟观看了五次，他们最终会得到一个打勾的视频，即使他们没有看过整个视频。

是否有更优雅的解决方案来计算观看视频的百分比，而不是上述计算观看视频所花费时间的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T21:54:06.763

像这样的东西怎么样：

```
 var i; //Global variable so that you can reset interval easily

        function onYouTubePlayerReady(playerid) 
        {
            ytp = document.getElementById("ytvideo"); //get player on page
            ytp.d = ytp.getDuration(); //get video duration
            i = setInterval(checkPlayer, 5000); //check status

        }

        function onplayerReset() 
        {
            clearInterval(i);
        }

        function checkPlayer()
        {
            var p = ytp.getCurrentTime(); //get video position
            var d = ytp.d; //get video duration
            var c = p/d*100; //calculate % complete
            c = Math.round(c); //round to a whole number
            var t = document.getElementById('videotitle').innerHTML;

            if(ytp.isReset) { c = 0; }
            ytp.c=c;

            if(!ytp.completed) 
            {   
               if(c>=80) { _gaq.push(['_trackEvent', 'Video Status', t,'Complete']); ytp.completed=true; } // or do something else
            }

         } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-07T05:58:38.870

我正在使用 AngularJS 的 Angular YouTube 嵌入模块（可在此处找到[https://github.com/brandly/angular-youtube-embed](https://github.com/brandly/angular-youtube-embed)）。但是这个解决方案对于纯 Javascript/YouTube API 调用同样适用。我只是不想重新编写我的解决方案。

基本概念是您将视频的整个长度切成任意大小的片段。在这个示例解决方案中，我将视频分割成一系列 10 秒的片段。每 5 秒有一个计时器检查播放器中与其切片对应的当前时间。重要的是，您的测试频率要高于每个单独切片所代表的长度。

getPctCompleted() 方法将为您提供视频总长度的完成比例，无论用户是否跳转到视频末尾。

但是，高级用户将始终能够欺骗这一点。所以这真的不是“证明”有人看过任何东西。就像来自用户的任何其他输入一样，它是不受信任的输入。

```
 $scope.analyzer = {};
       $scope.timeElapsed = 0;
       $scope.videoLength = 0;

       $scope.$on('youtube.player.playing', function($event, player) {
           $scope.videoLength = player.getDuration();
           $scope.player = player;
           //start polling
           setInterval(function() {
                $scope.timeElapsed = $scope.player.getCurrentTime();
                $scope.analyzer[parseInt($scope.timeElapsed / 10)] = true;
                $scope.$apply();
           }, 5000);
       });

       $scope.getPctCompleted = function() {
           return Object.keys($scope.analyzer).length / (parseInt($scope.videoLength / 10));
       }; 
```

# java - 由于目录不存在，JDBC 数据库连接失败

> ID：11775208
> 
> 赞同：1
> 
> 时间：2012-08-02T10:03:34.900
> 
> 标签：java, jdbc, database-connection, catalog, hp-nonstop

我正在尝试使用 JDBC 查询 NonStop SQL/MX 数据库。我有正确的驱动程序，我设法连接到数据库并使用以下代码行初始化语句（我在[此处](http://www.jdbc-tutorial.com/)找到）：

```
Class.forName("com.tandem.t4jdbc.SQLMXDriver");
Connection con = DriverManager.getConnection(url, user, password);
Statement stmt = con.createStatement(); 
```

但是，我无法执行查询...

```
ResultSet rs = stmt.executeQuery("SELECT * FROM Table1"); 
```

...因为一些不存在的目录`NONSTOP_SYSTEM_NSK`。这意味着什么？[在 GUI 中查看同一个数据库时（例如， DB Visualizer](http://www.dbvis.com/)），我不必指定任何目录。

生成的堆栈跟踪如下所示：

```
java.sql.SQLException: *** ERROR[1002] Catalog NONSTOP_SYSTEM_NSK does
    not exist or has not been registered on node \NSK01.
    at com.tandem.t4jdbc.SQLMXMessages.throwSQLException(SQLMXMessages.java:71)
    at com.tandem.t4jdbc.InterfaceStatement.executeDirect(InterfaceStatement.java:545)
    at com.tandem.t4jdbc.SQLMXStatement.executeQuery(SQLMXStatement.java:226) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:43:23.020

如果您已经有一个工作`Connection con`，您可以使用设置目录`con.setCatalog()`。通常，您访问给定目录和模式中的数据库表，如下所示：

```
ResultSet rs = stmt.executeQuery("SELECT * FROM <CATALOG>.<SCHEMA>.<TABLE>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:00:27.510

您如何定义连接的 url，我们正在尝试从外部 java 应用程序连接到远程不间断数据库，我们在如何定义连接服务器 ip 时遇到了麻烦。

# java - 如何将 JDBC 查询的结果保存到变量中？

> ID：11775212
> 
> 赞同：0
> 
> 时间：2012-08-02T10:03:53.217
> 
> 标签：java

在 java.How 将 sql 查询的结果保存到变量中？

```
 java.sql.PreparedStatement preparedStatement = null;
        String query = "select season from seasonTable where league_name=?";

        preparedStatement = conn.prepareStatement(query);

        preparedStatement.setString(1, league);
        ResultSet rs = preparedStatement.executeQuery(); 
```

我需要将检索到的季节保存到变量中，我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T10:07:02.843

您可以调用`rs.next()`以将 ResultSet 的光标移动到下一行。该方法将返回一个布尔值，指示是否确实**存在**下一行，因此您可以使用`if`语句或`while`循环来检索返回的第一行或所有行。

```
// only ever retrieve the value from the first returned row, even if there are multiple
String season = null;
if(rs.next())
    season = rs.getString(1); 
```

或者

```
// retrieve the values of all returned rows and store them in a list
List<String> seasons = new ArrayList<String>();
while(rs.next())
    seasons.add(rs.getString(1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:05:43.697

您需要遍历 ResultSet，并获取合适的列。例如

```
String season = null;
while (rs.next()) {
   season = rs.getString(column_name); // you can use column name or index
} 
```

请注意，您可能希望仅检查`ResultSet`, 和/或已`season`填充的一个条目。另一方面，您可能想要记录多个季节，因此：

```
List<String> seasons = new ArrayList<String>();
while (rs.next()) {
   seasons.add(rs.getString(column_name)); 
} 
```

我宁愿*按名称*而不是按索引获取列。这样，您可以（在某种程度上）更改您的查询，并且取消引用仍然有效。

[这里](http://www.exampledepot.com/egs/java.sql/getrsdata.html)还有一些例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T10:05:48.350

```
String season = null;
if (rs.next()) {
    season = rs.getString(1);
} 
```

阅读[JDBC 教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T10:07:01.280

查看[javadoc](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html)，您会看到有一些方法可以使用它们的索引或名称来访问 ResultSet 中的列。对于要检索的每种类型，都有一个方法 :`getString()`等`getFloat()`...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T10:09:13.057

```
 String s;
// Fetch each row from the result set
        while (rs.next()) {
            // Get the data from the row using the column index
            s = rs.getString(1);
                     /**    OR   **/
            // Get the data from the row using the column name
            s = rs.getString("season");
        } 
```

# java - MVP 如何实现简单登录

> ID：11775218
> 
> 赞同：1
> 
> 时间：2012-08-02T10:04:15.773
> 
> 标签：java, model-view-controller, mvp

我想知道如何使用 MVP 实现一个简单的登录案例。我的 MVP 框架只允许从视图触发事件，我不能从演示者触发事件。不知道这是好事还是坏事。我确实看到了它的优势，但简单的情况只是被额外的间接所破坏。

所以当我想实现简单的登录场景时，我有以下内容。

*   登录演示者
*   登录视图
*   登录模型

那么当用户填写登录表单并点击登录按钮时会发生什么？

1.  视图触发事件“登录点击”
2.  演示者监听该事件并使用它的模型进行登录
3.  如果登录成功，我必须再次调用视图以告知登录成功。
4.  该视图触发另一个事件“登录成功”。
5.  演示者和其他演示者现在显示另一个视图并关闭登录窗口。

从我的角度来看，成功事件的逐步视图实在是太多了......

我的框架是错误的，不允许我从演示者那里触发事件，还是这是 MVP 的必要之恶？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:57:07.243

每个框架都将定义自己的规则，以了解 View 如何准确地触发 Presenter，反之亦然。您将不得不四处挖掘，看看是否有任何其他框架看起来稍微容易一些。但是，总体努力可能会保持相似。

对于像登录这样的简单过程来说，这似乎需要付出很多努力，但在我看来，为了单元可测试性的好处，这种痛苦是值得的。

现在您可以通过模拟您的视图和模型来测试您的登录过程。Presenter 是否正确处理无效输入？如果登录不正确/正确，视图是否会得到正确的提示？现在，所有这些问题都可以通过使用模型和视图的模拟对象进行单元测试来回答。

只需确保您的 View(s) 和 Model(s) 被定义为接口。查看[JMock](http://www.jmock.org/)等库以帮助您进行单元测试。

然后，想象一下这个框架对于更复杂的场景会有多么有用，比如处理客户的订单！

# java - 在 jboss 7 上找不到 Hibernate.cfg.xml

> ID：11775220
> 
> 赞同：0
> 
> 时间：2012-08-02T10:04:21.563
> 
> 标签：java, hibernate, jakarta-ee, jboss7.x

我在 Jboss AS 7.1.1 上部署了一个 EAR 文件。

在其中一个 EJB 项目中，我们在 META-INF 文件夹下有一个 persistence.xml 文件。我需要在数据库中进行批量更新，所以我编写了这段代码来获取会话工厂：

```
private SessionFactory buildSessionFactory() throws Exception {
        SessionFactory factory = null;
        try{
        Configuration configuration = new Configuration();
        configuration.addResource("/META-INF/persistence.xml");
        configuration.configure().setProperty("hibernate.show_sql", "false"); ---> **throws error**
        ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();
        factory = configuration.buildSessionFactory(serviceRegistry);
        }
        catch (Throwable t){
            throw new Exception(t);
        }
        return factory;
    } 
```

问题是我得到：`org.hibernate.HibernateException: /hibernate.cfg.xml not found`。

我怎样才能告诉休眠使用`persistence.xml`文件而不是`hibernate.cfg.xml`？

**更新：**

我发现我使用了错误的方法：

```
configuration.addResource("/META-INF/persistence.xml"); 
```

应该：

```
configuration.configure("/META-INF/persistence.xml"); 
```

但是现在我有一个不同的问题，因为 Jboss persistence.xml 与 hibernate.cfg.xml 的结构不同，所以我得到了无效的配置异常。

知道什么是正确的课程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:47:25.597

您可以通过 JPA 使用 Hibernate，但您必须重写一些代码 - 将 SessionFactory 更改为 EntityManager 等。其他方式是编写 hibernate.cfg.xml 配置，并使用本机 Hibernate 而无需接触您的代码。

# mongodb - Mongodb 链接集合

> ID：11775222
> 
> 赞同：2
> 
> 时间：2012-08-02T10:04:29.010
> 
> 标签：mongodb

我创建了一个 mongodb 数据库。我有一份分配给工作的客户列表。

我正在尝试确定仅将客户信息存储在工作文档中是否就足够了。我唯一的问题是我需要有一个中心点来存储客户信息，然后在工作文档中我可以有一个名为 client{_id: 'clientname'} 的对象

这样做就足够了吗？

我问的唯一原因是因为如果需要更新客户详细信息（例如地址），那么这将立即反映。如果我存储了包含名称地址等的整个客户对象，那么如果他们更改地址，例如，这些更改将不会被反映。

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T11:22:59.400

这基本上是经典的嵌入与参考问题，并且被问过很多次。我喜欢这个线程：[MongoDB 关系：嵌入还是引用？](https://stackoverflow.com/questions/5373198/a-simple-mongodb-question-embed-or-reference)以及文档的相关部分。

[http://www.mongodb.org/display/DOCS/Schema+Design#SchemaDesign-EmbeddingandLinking](http://www.mongodb.org/display/DOCS/Schema+Design#SchemaDesign-EmbeddingandLinking)

最后，这是一个判断调用 - 优缺点是众所周知的，您必须决定您的应用程序是否更适合某种方式，然后围绕您的决定进行适当的编码。

# unity3d - 在 Unity 中创建模型上的动画

> ID：11775225
> 
> 赞同：2
> 
> 时间：2012-08-02T10:04:40.303
> 
> 标签：unity3d, blender

我有一个 3D 模型（一个卡通人物），我想统一地为这个角色制作动画。例如，我想移动它的手臂。我想我必须从确定参考点开始，但我不知道该怎么做。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T04:30:34.803

虽然我同意在 Maya 和 Max 等专用软件中完全构建动画更为可取，但您仍然可以执行非常基本的变换/等。对角色骨骼进行操作以使它们移动。

在模型 heirachy 的基础上，您有一个附加了蒙皮网格渲染器的游戏对象。这实质上会渲染模型和分配给它的任何材质，还允许您为动画分配“根骨骼”（在本例中为 Bip001）。每个骨骼只是一个空的游戏对象，具有不同的**局部**变换（位置、旋转、缩放）设置。

由于它们只是嵌套的游戏对象，因此您可以使用控制其[transform](http://docs.unity3d.com/Documentation/ScriptReference/Transform.html)的脚本附加或修改它们。

本质上，您可以将一些基本运动修改为现有的骨骼层次结构，但对于完全动画模型，确实不推荐使用。

![只是 Unity 预制角色模型的一个镜头，带有骨骼结构](../Images/35f232acf9a7f639b4d5adeb0e3817c6.png)

在底部，我选择了扳手，它与角色分离，但作为 Bip001 R 手游戏对象的子对象放置，强制此模型与手父对象一起移动和旋转。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T15:31:43.117

统一动画很难，我建议你在Maya中动画，3D模型是绑定的？如果没有，您需要制作索具。索具就是那个参考点。Unity 只是一个游戏引擎，在 Autodesk Maya 上做动画，然后导出到 .FBX，最后导入到 unity。

[您可以在此站点](http://www.amazzing.com/tutoriais.htm)中获取有关角色绑定的信息并转到绑定教程。

您可以使用播放动画`Animation.Play("animationNameHere);`

# wordpress - 如何在外部网站上展示wordpress博客最受欢迎的文章？

> ID：11775228
> 
> 赞同：2
> 
> 时间：2012-08-02T10:04:44.900
> 
> 标签：wordpress

我有一个带有“最受欢迎的文章”小部件的 wordpress 博客，非常受欢迎。我还有一个基于 wordpressblog.com/ci_site/ 地址上的 codeigniter 的网站。

有没有办法在我的 codeigniter 外部网站上显示“热门文章”小部件给出的内容？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:59:52.213

一般来说，如果您正在寻找一种在外部应用程序中利用应用程序数据的方法，请搜索[`API`](http://en.wikipedia.org/wiki/Application_programming_interface)- 应用程序编程接口。

在这种情况下，您将搜索[WordPress API](http://codex.wordpress.org/WordPress_API%27s)。
我试图为你提到的widged找到一个更具体的API，但没有成功。您很可能需要深入研究 WordPress API 并找到一种方法来根据您的需要使用它。

# asp.net - sqldatasource 参数中的和号

> ID：11775229
> 
> 赞同：0
> 
> 时间：2012-08-02T10:04:46.403
> 
> 标签：asp.net, sql-server

在 ASP.NET 中，我有 SqlDataSource，我将其`ProductName`作为参数传递并`ProductId`从 Select 方法中获取。

问题是当我通过`ProductName`包含`'&'`然后选择方法返回什么。

我尝试`'&'`用`'\&'`like替换，`name=name.Replace("&",@"\&");`
但没有任何变化。

我该如何处理这个问题？

# java - 监控应用程序的用户活动

> ID：11775231
> 
> 赞同：0
> 
> 时间：2012-08-02T10:04:51.637
> 
> 标签：java, mysql

我有一个java应用程序。我的应用程序有 'n' 个具有 3 种角色（r1、r2 和 r3）的用户。我需要用户的每日使用报告。换句话说，我需要找到每天使用我的应用程序的用户数（按角色）。

我需要每天计算用户数，角色 1 - 456 的用户，角色 2 - 3463 的用户等。

我怎样才能做到这一点。我打算将用户登录日期存储在一个单独的表中。这样我就可以按日期轻松计算用户数。但是这些数据在数据库中所需的存储空间可能太高了。

谁能建议我上述过程是否是一种有效的方法，或者是否有任何预定义的（开源或付费）工具来跟踪用户计数（按角色）和活动。或者有没有其他有效的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:15:46.937

你的想法很好。如果您所需要的只是用户登录数，那很好。我认为在用户登录时保留日志是好的。我了解您不需要跟踪活动。您可以将数据保存在包含用户登录、登录日期等的表中。如果数据太大，请使用 MongoDB 等非关系型数据库或上个月/上年的聚合数据等。我的意思是创建聚合行等`(day:2012-08-02, role:Role1, count:123),(day:2012-08-02, role:role2, count:453)`。只需保留每天的角色计数并删除“原始”数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T10:13:08.497

我会为这些目的使用一些简单的数据库：我想 SQLite 会适合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-04T06:19:57.330

如果您确定只需要基于 3 个（或更多）角色的计数，那么我建议以下方法可以节省大量空间。（假设是Oracle数据库）

*   在表中添加一个新的“计数器”列。
*   创建一个序列。
*   编写一个触发器，它将在您的表的“更新”时执行。在这个触发器中。
*   在此触发器中，从序列中获取 NEXTVAL 并更新到“计数器”列。
*   每天删除此序列并再次创建以重新发送计数器

在这种方法中，您只会拥有等于角色数量的行。在删除序列之前，检索每个角色的“计数器”值，然后将其删除以重置。您可以进一步自动化整个过程。

# java - 修剪音频（mp3 或 wav 文件）

> ID：11775232
> 
> 赞同：2
> 
> 时间：2012-08-02T10:04:53.503
> 
> 标签：java, javasound

我有一个关于修改音频文件的快速问题。我可以通过输入流（解码等）访问样本，但我无法找到一种方法来操作该输入流中的样本（可能是多个样本的情况）。
我想要实现的是获取一个文件**Ex** `A.mp3`，从中删除几秒钟，最后将其存储到一个新文件中。

通过查看[JavaSoundApi 示例](http://docs.oracle.com/javase/1.5.0/docs/guide/sound/programmer_guide/chapter7.html#114640)，我发现可以通过以下方式创建文件：

```
 File fileOut = new File(someNewPathName);
    AudioFileFormat.Type fileType = fileFormat.getType();
    if (AudioSystem.isFileTypeSupported(fileType,audioInputStream)) {
        AudioSystem.write(audioInputStream, fileType, fileOut);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:09:18.400

你只需要让 AudioInputStream*关*​​于它的大小。为此，您可以创建自己的 AudioInputStream 类并使用从声音 API 获得的普通 AudioInputStream 的委托（仅限骨架）：

```
public class CuttingAudioInputStream extends AudioInputStream {

    private AudioInputStream delegate;

    public CuttingAudioInputStream(AudioInputStream delegate) {
        this.delegate = delegate;
    }

    /**
     * Lie about length of delegate
     */
    public long getFrameLength() {
        // simple demo, make the caller think the stream is 44100 samples long
        return Math.min(delegate.getFrameLength(), 44100); 
    }

    // Overrides for all other methods of AudioInputStream, 
    // left as excercise to the reader
} 
```

您只需要实现所有其他方法以遵守您想要的限制。你也可以剪掉中间的部分，只是在 read() 方法中稍微复杂一点。

但是，我觉得有必要指出，如果源/目标是有损格式（例如 MP3 被解码和重新编码），这种方法可能会降低音频质量。如果质量损失不可接受（仅在多次处理同一流时才重要），最好*不要解码*文件，而是将切割过程直接应用于编码数据。当然，这更复杂（您需要对要处理的每种格式有很好的了解）并且不同格式对您可以剪切的位置有限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T19:44:52.890

您的教程适用于 Java 1.5！还有更多当前版本。

在您引用的页面上，“阅读声音文件”标题下有一些示例代码。请注意带有评论的区域：

```
 // Here, do something useful with the audio data that's 
  // now in the audioBytes array... 
```

这是在读取 audioInputStream 的 while 循环内。如果您在帧通过该区域时对其进行跟踪，则可以计算经过的时间。加载的数据可以保存到字节数组中。或者，所需帧内的数据可能是读取 audioInputStream 并实现 TargetDataLine 的类的输出。如果我没记错的话，可以使 TargetDataLine 与 AudioSystem.write(...

我不知道直接编辑压缩数据甚至是 wav。Wav 格式不统一，没有统一的标题。这就是为什么我让 Java 读取流，并使用以这种方式暴露的数据。

# javascript - 使 jQuery Draggable 在其他行中可见

> ID：11775238
> 
> 赞同：0
> 
> 时间：2012-08-02T10:05:05.213
> 
> 标签：javascript, jquery, html

我创建了一个日历样式的屏幕，每个房间都在页面下方，列（时间）水平移动。每个 Room div 都设置为溢出：隐藏。

我想让条目可拖动/可拖放，以便它们可以从一个时间/房间移动到另一个时间/房间。问题是当拖动它们时，它们不会移出它们所在的 Room div，它们隐藏在它的边界下，而很可能是因为溢出：隐藏。

我没有时间重写屏幕的布局，有没有办法让它们拖出 div 并拖到屏幕的其余部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:08:54.950

只是一个随机的想法/想法

您可以在要拖入的 div 中创建一个“假”对象，并将其定位，以便看起来您正在将真实对象拖过边框并进入带有假对象的 div。

ASCII 示例

```
|´´´´´´´´´´´´´|
|     []      |
|     []      |
|_____________| 
```

现在你把这个对象拖到它下面的一个div中

```
|´´´´´´´´´´´´´|
|    Div1     |
|             |
|_____[]______|
|´´´´´[]´´´´´´|
|             |
|    Div2     |
|_____________| 
```

我想做的是在 Div2 中创建一个对象，由于溢出：隐藏，它的内容也被隐藏了。所以你有 2 个对象，你在 Div1 中拖动的真实对象，以及在 Div2 中的一个假/幻象对象，它的移动与 Div1 中的对象完全一样。将真实对象从 Div1 完全移动到 Div2 后，将真实对象转移到 Div2，并从 Dom 中删除假对象

# c# - 如何在 C# 中将数据从 Excel 导出到带有文本颜色的数据表？

> ID：11775239
> 
> 赞同：0
> 
> 时间：2012-08-02T10:05:07.180
> 
> 标签：c#, visual-studio-2010, excel, datatable

我正在尝试在 VS 2010 WinForms 应用程序中使用 C# 将数据从 MS Excel 工作表导出到数据表。

我希望根据文本前色从 Excel 中导出某些行，例如文本颜色为黑色、绿色和红色。如果文本颜色为绿色，那么我想将该行排除在导出之外。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:18:23.657

您应该在 Excel 中遍历行并在导出前检查文本颜色。首先打开 Excel 文件。

```
Microsoft.Office.Interop.Excel.Application App = new Microsoft.Office.Interop.Excel.Application();
App.Visible = false;
App.WindowState = Excel.XlWindowState.xlMinimized;
App.ShowStartupDialog = false;

Excel.Workbook WorkBook = App.Workbooks.Open(File, 0, false, 5, "", "", true, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0); 
```

最好先获取正在使用的区域：

```
Excel.Range Area = worksheet.get_Range("A1", worksheet.Cells.SpecialCells(Excel.XlCellType.xlCellTypeLastCell, Type.Missing)); 
```

迭代：

```
for (int R = 1; R <= Area.Rows.Count; R++)
{
Excel.Range Row = ((Excel.Range)Area[R, "A"]);
if(Row.Font.Color != Excel.XlRgbColor.rgbGreen)
{
   // Get data from the cells and include into a
   // collection of items that represents data to be exported.
}
} 
```

# php - 初学者头痛 PHP DOMXPath

> ID：11775240
> 
> 赞同：0
> 
> 时间：2012-08-02T10:05:12.497
> 
> 标签：php, xpath, scrape, domxpath

我尝试编写一个简单的 PHP 来抓取一个 html 页面。我不知道为什么我不能得到结果？这是我的一些PHP代码：

```
//$html , successfuly get the html from "http://m.hkgolden.com/topics.aspx?type=HW" by curl

$dom = new DOMDocument();
@$dom->loadHTML($html);
$xpath = new DOMXPath($dom);
$xpath->registerNamespace('x', 'http://www.w3.org/1999/xhtml');

$itemList = $xpath->query('//x:div[contains(@class,"TopicBox_Details")]/a');

var_dump($itemList); // it show --> object(DOMNodeList)#4 (0) { }

foreach ($itemList as $item){
        $this->child_urls[] = $item->getElementsByTagName('a')->item(0)->getAttribute('href');
                }

var_dump($this->child_urls); //it show --> array(0) { } 
```

相同的 xpath 查询在 firefox XPath Checker 中工作，但相同的查询不能在 PHP 中工作。我做错了吗？ ![Firefox XPath 检查器](../Images/ef67bf0b7bf844d9f54dc54c8147a637.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:35:15.733

您还应该将命名空间添加到`a`XPath 中的元素 - 命名空间被继承：

```
//x:div[contains(@class,"TopicBox_Details")]/x:a 
```

# c# - Cookie 值始终为 Null

> ID：11775241
> 
> 赞同：2
> 
> 时间：2012-08-02T10:05:13.377
> 
> 标签：c#, asp.net-mvc

我有一个带有查看主站点链接的移动站点。

默认情况下，当移动用户访问我的主站点时，它会检测到移动设备并重定向到移动站点。

一旦进入移动站点，如果用户随后单击“查看主站点”，它会创建一个 cookie 并重定向回主站点。主站点检测到 cookie，因此不会将它们重定向回来；它总是接受主站点作为他们的首选。

问题是，在主站点上，它可以检测到 cookie，但该值始终为 null，并且到期时间始终为 DateTime.MinValue。

**移动网址 = mobile.mysite.co.uk**

**主站点 = mysite.co.uk**

这是我的代码...

**从移动站点链接到主站点**

```
 public ActionResult ViewMainSite()
    {
        string CookieValue = "Always Show the Main Site";
        HttpCookie Cookie = new HttpCookie("ShowMainSite");

        // Set the cookie value and expiry.
        Cookie.Value = CookieValue;
        Cookie.Expires = DateTime.Now.AddYears(1);

        // Add the cookie.
        Response.Cookies.Add(Cookie);

        return Redirect("mainSiteURL");
    } 
```

**主站点操作过滤器 - 检测移动用户**

```
 /// <summary>
    /// Redirect If Mobile Action filter class
    /// </summary>
    public class RedirectIfMobile : ActionFilterAttribute
    {
        /// <summary>
        /// override the OnactionExecuting Method
        /// </summary>
        /// <param name="filterContext"></param>
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
                // check to see if the have the main site cookie
                var Cookie = filterContext.HttpContext.Response.Cookies.Get("ShowMainSite");

                if (Cookie != null)
                {
                    if (Cookie.Value == null || Cookie.Expires < DateTime.Now)
                    {
                        filterContext.HttpContext.Response.Redirect("MobileURL");
                    }
                }

            base.OnActionExecuting(filterContext);
        }
    } 
```

任何人都可以看到为什么会这样吗？

任何帮助都是最受重视的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:26:07.800

你试过 Cookie.Expires = Now.AddYears(1); 或者可能 DateTime expires = Now.AddYears(1); Cookie.Expires = 过期；

目前，您的约会时间似乎正在溃烂/做得不多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-29T11:52:28.427

您确定浏览器将适当的 cookie 从子域发送到主域应用程序吗？请使用网络请求监视器（例如 chrome/firefox 开发人员工具）来找出确切接收和发送的内容。我猜由于跨域策略没有发送 cookie。

# android - Android：在 ICS 和 Gingerbread 上的 android.intent.action.BOOT_COMPLETED

> ID：11775243
> 
> 赞同：4
> 
> 时间：2012-08-02T10:05:18.710
> 
> 标签：android, android-intent

我的应用程序正在监听 android.intent.action.BOOT_COMPLETED..

安卓：2.3

当我的应用程序在启动前**关闭/激活时，我能够获得广播。**

安卓：4.0.3

当我的应用程序在启动前**关闭（强制关闭**）时，我**无法**获得广播。原因[在此链接中](http://commonsware.com/blog/2011/07/13/boot-completed-regression-confirmed.html)

 **从 3.1 开始，当安装应用程序时，它们处于“停止”状态，因此在用户明确启动它们之前它们将无法运行。按下强制停止将使它们返回此状态。

我该怎么办？？我想在应用程序关闭时获得广播 android.intent.action.BOOT_COMPLETED 。

请帮忙！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T07:51:53.383

唯一的方法是用户应该明确地打开您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:15:49.030

添加此标志

意图.addFlags（意图.FLAG_INCLUDE_STOPPED_PACKAGES）；

我认为它会起作用。因为我也遇到过同样的问题。**

# sql - SQL 请求按创建日期对数字进行分组和求和

> ID：11775248
> 
> 赞同：0
> 
> 时间：2012-08-02T10:05:40.727
> 
> 标签：sql, postgresql, jpa

让我解释一下。我有一张表，其中有两个我需要的重要字段：第一个是双精度字段，第二个字段是日期。

我想提出一个按 对条目进行分组的请求`YYYY-MM-DD`，并按组添加双精度的每个字段。

例如，我在同一天有两个条目：

```
 |   amount    |    date
1  |    100      | 2010-01-01
2  |    200      | 2010-01-01 
```

**我需要的是：**

```
1  |     300     | 2010-01-01 
```

那可能吗 ？目前这是我的要求：

```
 SELECT DISTINCT ON (d) amount, to_char(datecreation, 'YYYY-MM-DD') d
   FROM mytable
  GROUP BY d, amount
  ORDER BY d ASC; 
```

*我得到的是：*

```
1  | 100   | 2010-01-01 
```

它不会添加分组金额。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:09:50.690

```
select sum(amount), date from mytable group by date order by sum(amount) ASC; 
```

如果您的日期有时间部分，那么

```
select sum(amount), to_char(date, 'YYYY-MM-DD') from mytable group by to_char(date, 'YYYY-MM-DD') order by sum(amount) ASC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:15:14.860

```
SELECT SUM(amount) amount, to_char(date, 'YYYY-MM-DD')
  FROM myTable
 GROUP BY to_char(date, 'YYYY-MM-DD')
 ORDER BY SUM(amount) ASC; 
```

# .net - .NET 字符串连接 (+ & +=) 与 StringBuilder

> ID：11775249
> 
> 赞同：6
> 
> 时间：2012-08-02T10:05:41.317
> 
> 标签：.net, string, operators, concatenation, stringbuilder

我正在阅读一本名为 .NET Gotchas 的书（非常值得一读 IMO），它说明了 String 和 StringBuilder 之间的性能差异，它提出了一个我觉得无法回答的问题！虽然我不知道这两个类的内部结构（没有查看这些类的反射版本），但我想知道；既然 .NET 中的运算符是可重载的，为什么微软没有实现 String 类在内部使用 StringBuilder 并重载串联运算符以简单地调用 StringBuilder 中的 .Append()？我猜有一些根本原因说明为什么不是这样，如果是这样，为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T10:15:34.280

问题不在于字符串连接很慢，而更多的是重复连接会产生大量需要分配的中间字符串，然后再进行垃圾收集。

**编辑**
注意，`mystring += "a"`不要简单地将“a”添加到前一个字符串。它为组合创建一个新字符串并将“mystring”指向它，从而丢弃以前的值（如果没有更多对它的引用）。

结束编辑

一系列的

```
string mystring = "something";
mystring += "something else";
mystring = mystring + "third"; 
```

如果您将每个单独的行作为 StringBuilder Append 执行，然后执行 .ToString() 以将结果返回到字符串中，则会执行较慢。如果您重复使用单个 StringBuilder、Append() 并在最后执行 .ToString()，您只会获得性能优势。

```
StringBuilder sb = new StringBuilder();
sb.Append("something");
sb.Append("something else");
sb.Append("third");
string mystring = sb.ToString(); 
```

然后一个 StringBuilder 有它自己的开销，所以如果你有少量的字符串部分要加入，它不会使你受益。

请注意，编译器在单个语句中优化了串联：

```
string mystring = "something" + "something else" + "third"; 
```

最快。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T10:08:00.763

原因很简单：

因为

```
string result = a + b; 
```

比

```
var sb = new StringBuilder(a, a.Length + b.Length);
sb.Append(b);
string result = sb.ToString(); 
```

`StringBuilder`s 仅在发生大量连接时才有意义，通常在循环内。

# java - tomcat SSL 请求参数丢失

> ID：11775252
> 
> 赞同：0
> 
> 时间：2012-08-02T10:05:43.680
> 
> 标签：java, tomcat, ssl

我有一个网页，有几个文本框和一个提交按钮。提交时，目标 url 与 SSL 的 url 模式匹配。目标页面以 HTTPS 方式打开，但文本框值丢失。

```
request.getParameter("txtUser") is null 
```

有什么方法可以访问/检索以前 jsp 的提交/请求参数吗？

**web.xml**

```
<security-constraint>
   <display-name>Security Constraint</display-name>
   <web-resource-collection>
      <web-resource-name>Protected Area</web-resource-name>          
      <url-pattern>/content/account/passrecover/*</url-pattern>          
   </web-resource-collection>               
      <role-name>custom-report-user</role-name>       
   <user-data-constraint>
      <transport-guarantee>CONFIDENTIAL</transport-guarantee>
   </user-data-constraint>
</security-constraint> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:55:27.643

您的意思是您的表单通过 POST 提交到 HTTP url，然后自动被重定向（根据传输保证）到 HTTPS url？

那么不，我认为没有任何内置支持可以保存这些参数，以便它们在重定向后持续存在。通常，您需要确保将表单直接发布到 HTTPS url。

可以实现服务器端机制，但透明地与 servlet API 集成并非易事。Spring Security 有一些内置的处理和类。（我认为最近版本中的关键类之一是[RequestCache](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/savedrequest/RequestCache.html)，但不是积极的。）

# search-engine - 网络爬虫的 BFS 或 DFS？

> ID：11775256
> 
> 赞同：3
> 
> 时间：2012-08-02T10:05:59.057
> 
> 标签：search-engine, web-crawler, depth-first-search, breadth-first-search

我的任务是为搜索引擎创建一个简单的网络爬虫。现在，爬虫应该如何准确地映射网络？跟随他找到的第一个链接并且永远不会返回，或者一些更高级的搜索方法，如 BFS 或 DFS？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T10:02:40.493

我确实注意到我在回答这个问题时有点晚了，但无论如何，这是一个有趣的讨论。

BFS 似乎是一个很好的策略，因为它可以帮助***在一定程度上避免****对单个主机的****连续请求****。也取决于您的域。您仍然必须处理服务器超时，但 DFS 肯定会造成一些伤害。同样，**在 DFS 中，您可以有循环引用**，**在无限循环中运行**；除非你做出一些明确的安排。*

*可以有其他更合适的选择，但在 DFS 和 BFS 之间，**我认为 BFS 胜出。***

# android - 带有 GUI 编辑器的 ORM，例如用于 Android 开发的 ADO.Entoty

> ID：11775258
> 
> 赞同：0
> 
> 时间：2012-08-02T10:06:13.783
> 
> 标签：android, orm

是否有任何适用于 Android 的 ORM，例如带有 eclipse 的 gui 编辑器插件的 ADO Entity？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:11:57.693

如果您使用支持 JPA 注释的 ORM，例如[ORMLite](http://ormlite.com)，您可以（在 Eclipse 中）尝试安装 JPA Diagram Editor ( `Help > Install new software... > Juno release site > Web, XML... > Dali JPA Tools - JPA Diagram Editor`)。将您的项目配置为 JPA 项目，您就可以[开始使用图表编辑器了](http://wiki.eclipse.org/JPA_Diagram_Editor_Project_Tutorial)。您甚至可以安装[JBoss Hibernate 工具](http://www.jboss.org/tools/download/)（Juno 的“Nightly”），将您的项目配置为 Hibernate 项目并使用[地图](http://docs.jboss.org/tools/latest/en/hibernatetools/html_single/index.html#map_diagram)- 即使您在最终产品中不使用 Hibernate。

我认为这是你能得到的最接近的。

老实说，我不认为这些图表在创建新实体时非常有用。它们对于大型遗留项目的取证分析非常有帮助（这对于 Android 项目来说是不典型的）。JPA 透视图及其工具在创建实体时非常有用（无需专门学习和记住注释的每一个细微之处）；Hibernate 透视图执行 HQL/JPQL 的可能性很大（但对 Android 开发没有帮助）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:17:41.263

我使用[ORMlite](http://ormlite.com/) 但它没有 gui 编辑器...

# jquery - 如何使用 jquery 选择目标标签？

> ID：11775259
> 
> 赞同：0
> 
> 时间：2012-08-02T10:06:14.357
> 
> 标签：jquery

大家好，感谢阅读。

我有这个html；

```
<i class="icon-plus icon-white"> Test 1</i> 
```

如何使用 jquery 选择它并更改“icon-minus”中的“icon-plus”并将文本“Test 1”替换为其他内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:18:48.523

如果这是唯一的标签`<i>`，那么您可以使用：

```
$("i").removeClass("icon-plus").addClass("icon-minus").html([your html]) 
```

这将删除您的类“icon-plus”，然后添加类“icon-minus”，然后插入您选择输入的html。

我选择`.html()`在我的示例中使用它，因为它使您能够添加`<a>`标签或`<p>`标签（或更多！），以便您的文本可以应用自定义 CSS（如果您有的话）

其他使用建议`.text()`也是合理的。

检查[jQuery Selectors](http://api.jquery.com/category/selectors/)、[.removeClass()](http://api.jquery.com/removeClass/)、[.addClass()](http://api.jquery.com/addClass/)和[.html()](http://api.jquery.com/html/)和[.text()的文档](http://api.jquery.com/text/)

这完全取决于您想要对正在处理的对象进行多少控制，以及您想要对它做什么。

玩一玩，尝试一些新的东西，玩得开心！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T10:10:04.377

## [演示](http://jsfiddle.net/bGwrS/31/)

```
$(".icon-plus").removeClass("icon-plus").addClass("icon-minus").html("new text"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T10:12:23.897

试试这个

```
$("i").removeClass('icon-plus').addClass('icon-minus');
$("i").html("Some Text"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T10:09:21.383

您可以使用[`addClass`](http://api.jquery.com/addClass)添加类、[`removeClass`](http://api.jquery.com/removeClass)删除类和[`text`](http://api.jquery.com/text)更改文本。例如：

HTML：

```
<i id="item" class="icon-plus icon-white"> Test 1</i> 
```

JS：

```
​$('​​​#item').removeClass('icon-plus').addClass('new-class').text('new  text');​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T10:09:47.900

假设您正在搜索每个`icon-plus`：

```
var tag = $('i.icon-plus');
tag.removeClass('icon-plus');
tag.addClass('icon-minus');
tag.text('Something else'); 
```

如果你想抓住一个特定的项目，你必须使用`id="myid"`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T10:12:18.740

您应该查看此页面[选择器](http://api.jquery.com/category/selectors/)以获取选择元素。并且这个[属性](http://api.jquery.com/category/attributes/)为改变。

# c# - 串行端口和用户控制

> ID：11775260
> 
> 赞同：-1
> 
> 时间：2012-08-02T10:06:15.553
> 
> 标签：c#, user-controls, serial-port

我有一些需要从 1 个串行端口读取数据的 UserControl 程序。我有一些程序包括：

*   空速、声纳、纬度、经度等。文本框中显示的值
*   物体避让显示
*   全球定位系统地图

我在主窗体中有一个按钮，单击它时，它将打开串行端口，用户控件应该读取数据并显示它们，但我不知道该怎么做。

有人知道我的不同用户控件如何从 1 个串行端口读取数据吗？或者可能是一些我可以阅读的网站链接。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:34:50.720

如果您有一个源（串行端口）和许多消费者（您的用户控制）。然后你必须添加另一层间接。编写一个类，它是串口类的所有者，并将其中的所有数据读取到某种缓冲区中（对 DataReceived 事件做出反应，将新数据放入 List、Queue 等）。这个缓冲区将从这个类中公开，另外它有一些自己的事件（DataReceived？）。您的所有消费者现在都可以收听此事件并查看缓冲区以找到所需的数据。

主要问题是从共享缓冲区中删除数据，因为这取决于您的消费者是需要整个缓冲区还是只需要其中的一部分。想想一个概念，每个消费者如何通知生产者从哪一点开始它只在缓冲区中工作，如果每个人都超出缓冲区的开头，则让生产者削减缓冲区。但请注意，您还必须重新通知您的消费者指数现在已更改。

如果每个消费者通过每次接收某些数据来创建自己的本地缓冲区，并且在这种情况下，每个消费者都可以根据需要减少自己的缓冲区，那么您还可以避免共享缓冲区增长的问题。

如果由于使整个应用程序的内存占用更小而需要第一种方法的复杂性，则哪种策略更有意义取决于具体情况。

# windows - Opa：找不到Nodejs

> ID：11775261
> 
> 赞同：3
> 
> 时间：2012-08-02T10:06:18.410
> 
> 标签：windows, node.js, open-source, cygwin, opa

尝试在 Windows XP 32 位中使用 Cygwin **./configure opa_v2980**时收到以下消息：

> 检查 nodejs... 未找到

我已经使用[Schalk Neethling](http://blog.mozilla.org/webdev/2011/10/10/installing-node-js-on-windows/)概述的以下步骤在 Cygwin 中成功安装了 nodejs ：

1.  安装了 git、python、g++、openssl 和 make 包
2.  克隆的nodejs
3.  建造它
4.  测试了安装。当我第一次尝试测试节点安装时，我收到以下消息：

> “bash：节点：找不到命令”

所以我将以下路径添加到安装 nodejs 并且测试有效的位置：

```
export PATH=$PATH:~/github/nodejs 
```

但是，我想知道路径是否与我现在得到的这个 Nodejs not found 错误有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:10:30.147

源存储库还不能用 windows 轻松编译（情况可能很快就会改变）。我们曾经有一个 cygwin 端口，我们有一个最新的 msys 端口，但它还没有公开。实现这些端口需要做一些工作，所以我可以说你成功的机会很渺茫，即使 nodejs 后端现在简化了事情。

如果你不需要修改编译器，你应该使用二进制包（是的，我知道它只有 64 位）。

我的建议：要么等待并在邮件列表上询问（这样你就可以结交朋友）以获取 Windows msys 端口，或者花时间购买 64 位机器（真实或通过 KQEMU 模拟）

# android - Android：从parten FragmentActivity中的片段中获取按钮的OnClick

> ID：11775265
> 
> 赞同：1
> 
> 时间：2012-08-02T10:06:36.930
> 
> 标签：android, button, onclicklistener

我有一个 FragmentActivity，它加载一个带有几个按钮的 Fragment。现在我想在我的 FragmentActivity 中注册按钮的 onClick-Event。

到目前为止，这是我的代码：

```
public class MainActivity extends FragmentActivity implements ActionBar.TabListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Fragment fragment = new TestFragment();
        getSupportFragmentManager().beginTransaction()
            .replace(R.id.container2, fragment)
            .commit();

        Button button = (Button) fragment.getView().findViewById(R.id.buttonSettings); 
        button.setOnClickListener(new OnClickListener()
        {
            public void onClick(View v) 
            {
                //SettingsActivity activity = new SettingsActivity();
            }       
        }
        );
    } 
```

使用此代码，当我尝试在此行中设置 OnClickListener 时，应用程序崩溃：

```
button.setOnClickListener(new OnClickListener()
        {
            public void onClick(View v) 
            {
                //SettingsActivity activity = new SettingsActivity();
            }       
        }
        ); 
```

我究竟做错了什么？

# javascript - Javascript/jQuery：根据内部的 IMG ALT 更改 li 类和样式

> ID：11775269
> 
> 赞同：2
> 
> 时间：2012-08-02T10:06:53.390
> 
> 标签：javascript, jquery, select, drop-down-menu, image

我需要一些帮助。基本上我有以下我一直在使用的代码。我不确定是否会有所帮助...

```
$('#options-1').change(function () {
  -----blahblah
}); 
```

options-1 是我的下拉菜单。它有两个选项，一个值为“1”，另一个值为“2”。你们能不能帮我想出一些做以下事情：

当我选择值为“1”的选项时，它应该这样做：1）找到一个包含“img”标签的“li”标签。“IMG”标签的“alt”或“title”属性为 1，对应于下拉菜单 (1) 的值。

2) 代码应将 LI 标签更改为：

```
class="" style="display: none;" 
```

到

```
class="active" style="display: block;" 
```

而且，如果我选择值为“2”或值为“3”等的选项，也会发生同样的事情。

非常感谢您！我将不胜感激任何帮助、建议等。正如您可能会说的那样，我对 javascript/jquery 不是很有经验（还：D）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:16:48.790

```
$('#options-1').change(function () {
  $('li:has(img[alt="'+$(this).val()+'"])').addClass('active').show();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T11:24:27.343

可能不活动的列表项应该被隐藏，只显示活动的项。

如果是这样，那么试试这个：

```
$('#options-1').on('change', function() {
    $("ul#myList li").removeClass('active').hide().has("img[alt='" + $(this).val() + "']").addClass('active').show();
}).trigger('change'); 
```

鉴于非活动项目无论如何都被隐藏，可能不需要添加/删除“活动”类。

注意：我们触发更改以确保列表正确反映选择菜单的初始状态。

**[演示](http://jsfiddle.net/yzAZ7/)**

另一种稍微简单的方法是添加/删除“活动”类并允许样式表指令进行显示/隐藏。

CSS：

```
#myList li {
    display: none
}
#myList li.active {
    display: block
} 
```

Javascript：

```
$('#options-1').on('change', function() {
    $("ul#myList li").removeClass('active').has("img[alt='" + $(this).val() + "']").addClass('active');
}).trigger('change'); 
```

**[演示](http://jsfiddle.net/yzAZ7/1/)**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-02T10:23:04.537

假设您的选择标签如下所示：

```
<ul id="yourUl">
    <li><img alt="1" /></li>
    <li><img title="2" /></li>
    <li><img alt="3" /></li>
</ul>

<select id="options-1">
    <option value="1">value 1</option>
    <option value="2">value 2</option>
</select> 
```

因此，您的脚本将是：

```
var findLi = function(val){
    $("ul#yourUl li img").each(function(){
        if($(this).attr("alt") == val || $(this).attr("title") == val)
            return $(this).parrent();
        return null;
    }
};

$(document).ready(function () {
    $("#options-1").change(function () {
        var val = $(this).val();
        val li = findLi(val);
        if(li == null)
            // do something to handle null or just ignore
        else
            $(li).addClass("active").css("display", "block");
    });
}); 
```

**或**使用`has`（感谢@Moin）：

```
$(document).ready(function () {
    $("#options-1").change(function () {
        var val = $(this).val();
        $("ul#yourUl li:has(img[alt='" + val + "']), ul#yourUl li:has(img[title='" + val + "'])").each(function() {
            $(this).addClass("active").css("display", "block");
        });
    });
}); 
```

**或者**

```
$(document).ready(function () {
    $("#options-1").change(function () {
        var val = $(this).val();
        $("ul#yourUl li img").each(function () {
            if ($(this).attr("alt") == val || $(this).attr("title") == val)
                $(this).parrent().addClass("active").css("display", "block");
        });
    });
}); 
```

# android - 检测不同设备上不兼容的录制设置

> ID：11775274
> 
> 赞同：2
> 
> 时间：2012-08-02T10:07:00.780
> 
> 标签：android, audio-recording

我目前正在开发将在设备和平板电脑上运行的录音应用程序。

用户可以在开始录制之前设置以下偏好。

> 格式(AAC-PCM)
> 
> 通道（单声道）
> 
> 样本位大小（8-16 位）
> 
> 采样率（8000、11025、22050、44100Hz）

基于这些首选项值，我创建 AudioRecord（用于解压缩）和 MediaRecord（压缩）并开始录制。

**到目前为止一切顺利，但最近我注意到以下问题。**

如果我将 Channel 设置为，`Stereo`那么我的应用程序在 Xperia Arc 上运行良好，但在 Galaxy note 上录制的声音以会说话的汤姆类声音播放。而在三星 i9000 上，录制失败。

`Sample Bit Size` 如果我将位大小设置为 8 Bits.Recorder 拒绝工作，我也面临同样的问题。

根据 android docs 8 位不保证适用于所有设备。

**所以我有以下方法。**

有什么方法可以检测到设备上不兼容的录制设置，所以我将禁用它们。

所以用户不会有糟糕的用户体验，因为一旦他启动应用程序，我只会显示兼容的设置。

如果有人能给我一些关于实施上述方法的提示，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:14:16.133

没有用于此目的的任何 api。每个制造商选择自己的语音识别方式（并且它可以有不同的蓝牙和扬声器选项）。所以我可以建议2个选项：1）选择一个更稳定的选项（如PCM Mono，16KHz，22050）2）在第一次启动应用程序时检查所有可能的配置并保存它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T23:39:03.630

Android 的声音 API 并不是那么好。如果您将立体声与 AudioRecord 一起使用，并以奇数缓冲区大小调用 read，您可能会导致手机重新启动或破坏音频子系统，直到手机重新启动。立体声也适用于只有一个麦克风的手机，效果各异。您不能想当然，但更安全的选择是使用 44100hz 16 位单声道，并在软件中进行自己的下采样。

# c# - LdapAuthentication 类型不在 System.DirectoryServices.ActiveDirectory

> ID：11775277
> 
> 赞同：-1
> 
> 时间：2012-08-02T10:07:04.423
> 
> 标签：c#, asp.net, authentication, active-directory

我需要使用 Active Directory 对我网站上的用户进行身份验证。我们的开发组告诉我使用这样的代码：

```
using System.DirectoryServices.ActiveDirectory;

public partial class _Default : System.Web.UI.Page
{

    protected void Page_Load(object sender, EventArgs e)
    {

        LdapAuthentication objAuthenticate; 
```

我能够将 DirectoryServices.dll 添加到我的 bin 目录，并将程序集添加到我的 web.config，但 LdapAuthentication 类型不在 System.Directory.ActiveDirectory 中。它说找不到类型或名称空间名称“LdapAuthentication”......谁能告诉我我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:15:28.170

为什么你认为它应该在那里？LdapAuthentication 不是 .Net 框架中可用的类型。但是，我确实遇到了他们描述构建这样一个类的操作[指南页面。](http://msdn.microsoft.com/en-us/library/ff649227.aspx)

# javascript - Jquery - 命名空间和闭包

> ID：11775283
> 
> 赞同：1
> 
> 时间：2012-08-02T10:07:35.083
> 
> 标签：javascript, jquery, closures

我正在创建一些我想从全局命名空间中隐藏的自定义对象和函数（包括限制其可访问性）。

如果我放置在 document.ready 函数中，它将与放置在 Closure 中的效果相同，或者我是否需要在 document.ready 声明中为 jquery 引用设置别名以确保我的自定义代码不在全局命名空间中？

选项 1\. 准备好普通文档

```
$(document).ready(function()
   //do custom stuff 
```

选项 2：准备好关闭内部文件

```
 $(document).ready(function(){
       (function($) {
         //do custom stuff
       })(jQuery); 
```

选项 3：为文档中的 jquery 引用别名准备就绪

```
jquery(document).ready(function($) { 
    //do custom stuff 
```

什么是首选？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:11:00.393

您必须了解 ECMAscript 中的*每个*函数实际上都是一个闭包。因此，在您创建这些变量的函数（-context）中（除了来自其他上下文的可访问性之外），它并没有真正对您的特定片段产生任何影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T10:10:07.633

如果您在任何函数中声明变量，它们将仅在该函数中可见。

另外，为了确保`$`您的范围内正确，我会选择选项 3（但将函数名称从`jquery`to更正`jQuery`）。选项 1 和 2 已经假定这`$`是正确的别名，但选项 3 将起作用，即使`$`在外部范围内与`jQuery`（例如，如果`jQuery.noConflict()`被调用，或者像 Prototype.js 等加载了另一个库）相同，但`$`总是意味着`jQuery`在你的内在范围内`//do custom stuff`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T10:24:24.480

在 JavaScript 中，每个函数都有自己的作用域，您在函数内部声明的任何对象或变量只能被函数本身或在其中声明的其他函数看到。

创建命名空间的最常见方法是创建一个函数，该函数在其定义后自动调用，并返回一个包含数据的对象，就像在您的第二个选项中一样。然后可以通过该对象访问所有数据。在任何情况下，如果您只想从代码的其他部分隐藏变量，只需创建一个函数并声明您想要隐藏的所有内容。

# php - php创建图像不能包含文件？

> ID：11775284
> 
> 赞同：0
> 
> 时间：2012-08-02T10:07:40.823
> 
> 标签：php, image, creation

```
<?php
header('Content-Type: image/png');
$im = @imagecreate(100, 100);
$color = imagecolorallocate($im, 10,10,10);
imagefill($im, 50, 50, $color);
imagePNG($im);
imagedestroy($im);
?> 
```

这段代码有效，但如果我放在那里 require_once

```
require_once('file.php'); 
```

它不起作用为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-12-30T09:37:47.787

我通过在 CR 和 LF 之前消除包含的 PHP 文件（如修剪指令）的每一行末尾的任何空格来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-30T09:58:55.223

创建了一个页面“file.php”，其中仅包含`phpinfo()`并通过`require_once('file.php');`.

看起来您的图像没有被视为 png。它没有渲染或被破坏。

[![截屏](../Images/bcb4656792ba1c1f034eebc46b817a03.png)](https://i.stack.imgur.com/WQyPs.png)

# c# - AppDomain：多个AppDomain，限制，stackoverflow

> ID：11775285
> 
> 赞同：0
> 
> 时间：2012-08-02T10:07:49.867
> 
> 标签：c#, appdomain

当我搜索时，它指出一个[进程可以有多个应用程序域](https://stackoverflow.com/questions/4540712/multiple-appdomain-in-single-process)，但有多少是多个？能达到几千甚至更多吗？

# mysql - INSERT INTO 不重复特定列的地方

> ID：11775286
> 
> 赞同：0
> 
> 时间：2012-08-02T10:07:50.693
> 
> 标签：mysql, sql

我有一个看起来像这样的插入（使用 MySQL）

```
INSERT INTO user_actions(action_id,user_id,action_type,record_id,on_table) VALUES
(
    action_id,
    '1',
    '1',
    '32',
    '1'
)
ON DUPLICATE KEY UPDATE 
user_id=user_id AND 
action_type = action_type AND 
record_id = record_id AND 
on_table = on_table 
```

并且`action_id`是`AUTO_INCREMENT`

仅当某些值不同时才插入表中的目标 si。

我的错误是什么？？

其次，我可以用选择做一个 IF、ELSE 吗？喜欢

```
var_count = count
(
    SELECT action_id FROM user_actions
    WHERE 
    action_id = 'value' AND
    user_id 'value' AND
    action_type 'value'
    record_id 'value' AND
    on_table 'value' AND
)

IF var_count = 0

    INSERT INTO user_actions(action_id,user_id,action_type,record_id,on_table) VALUES
    (
        action_id,
        '1',
        '1',
        '32',
        '1'
    )

ELSE

    ... echo error

END IF 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:10:04.793

您需要使用`,`而不是`AND`：

```
ALTER IGNORE TABLE user_actions ADD UNIQUE KEY ix1(user_id,action_type,record_id,on_table); 
```

看[这里](https://stackoverflow.com/questions/11557757/cleaning-up-db-of-redundant-data/11557812#11557812)

```
INSERT INTO user_actions(action_id,user_id,action_type,record_id,on_table) VALUES
(
 action_id,
 '1',
 '1',
 '32',
 '1'
)
ON DUPLICATE KEY UPDATE 
user_id=user_id,
action_type = action_type,
record_id = record_id,
on_table = on_table; 
```

对于其他`SELECT`方法，您需要在存储过程中编写这些语句。

```
CREATE PROCEDURE sp_check_user_actions(arg_action_id INT)
BEGIN
    SELECT count(1)
    INTO @var_count
    FROM user_actions
    WHERE
    action_id = arg_action_id AND
    user_id 'value' AND
    action_type 'value'
    record_id 'value' AND
    on_table 'value';

    IF(@var_count = 0)
    THEN

        INSERT INTO user_actions(action_id,user_id,action_type,record_id,on_table) VALUES
        (
            arg_action_id,
            '1',
            '1',
            '32',
            '1'
        );
    ELSE
        SELECT "Error: Duplicate user action" As error_message;
    END IF;
END; 
```

# javascript - jqPlot绘制饼图问题

> ID：11775287
> 
> 赞同：0
> 
> 时间：2012-08-02T10:07:50.990
> 
> 标签：javascript, jquery, html, jqplot

我遇到了下一个问题：当我获取数据并尝试构建 jqPLot PieChart 时，萤火虫说`uncaught exception: No Data` 这是我的数据检索函数：

```
function getValues(){
        var myArr=[];

        $.ajax({
                type : "POST",
                url : myUrl,
                data : {

                },
                success : function(response) {
                    for ( var i = response.myList.length - 1; i >= 0; --i) {
                        var obj = response.myList[i];
                        var id = obj.id;
                        var name = obj.name;
                        var value = obj.value;

                        ......some code here....
                        myArr.push[{name:value}];

                    }
                },

                error : function(response) {
                    alert("your request cannot be handled. " + response);
                }
            });
            drawPieChart(myArr);
} 
```

这是我的 drawPieChart 函数：

```
function drawPieChart(array) {
     var plot1 = jQuery.jqplot ('chartdiv', [array], 
                { 
                  seriesDefaults: {
                    // Make this a pie chart.
                    renderer: jQuery.jqplot.PieRenderer, 
                    rendererOptions: {
                      // Put data labels on the pie slices.
                      // By default, labels show the percentage of the slice.
                      showDataLabels: true
                    }
                  }, 
                  legend: { show:true, location: 'e' }
                }
              );
} 
```

这是html源代码，我想在其中插入我的饼图：

```
<div id="chartdiv" style="height:400px;width:300px; "></div> 
```

那么有人可以帮我解决这个问题吗？我做错了什么？jqPlot 的所有文件都正确连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T05:56:06.253

jqPlot 只接受 [[[X, Y], ...]]

所以将 myArr.push({name: value}) 更改为 myArr.push([name, value])

见[http://www.jqplot.com/deploy/dist/examples/pie-donut-charts.html](http://www.jqplot.com/deploy/dist/examples/pie-donut-charts.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:49:11.060

您提供数据的方式是错误的，请尝试如下进行硬编码：

```
var data = [
['Heavy Industry', 12],['Retail', 9], ['Light Industry', 14], 
['Out of home', 16],['Commuting', 7], ['Orientation', 9]] 
```

使用一些简单的值，看看你是否可以让它运行，如果它有效，然后解决这个问题。

# iphone - 哪个更适合用于 XMPP 框架或 CocoaAsyncSocket 用于 iOS 应用程序的实时通信？

> ID：11775289
> 
> 赞同：3
> 
> 时间：2012-08-02T10:07:52.570
> 
> 标签：iphone, objective-c, ipad, xmppframework, cocoaasyncsocket

我想在我的应用程序中实现实时通信（如聊天）。我很困惑应该使用 XMPP 框架还是 CocoaAsyncSocket ？

由于这里提到了 CocoaAsyncSocket 的工作原理[https://github.com/robbiehanson/CocoaAsyncSocket/blob/master/README.markdown](https://github.com/robbiehanson/CocoaAsyncSocket/blob/master/README.markdown)以同样的方式 XMPP 如何工作？请解释。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:20:51.120

XMPP 协议是用于实时聊天的标准协议，应用商店中的许多应用程序都使用此协议进行聊天

使用 XMPP 协议，您可以执行许多操作，例如：单用户聊天 多用户聊天 语音聊天、视频聊天离线消息、保存历史记录、消息记录、状态通知等。

XMPP 协议的好处：-

1)XMPP 被设计为使用非常高效的推送机制实时发送所有消息

2）XMPP 解决了在网络世界中无法直接解决的安全问题。由于所有流量都通过服务器路由，并且该服务器的身份可以通过认证机构颁发的签名进行验证，因此最终用户无需担心签名等复杂的事情来建立安全通信

3）XMPP也可用于与Facebook用户和gtalk用户实时聊天

查看这些链接以获取更多信息：-

[http://en.wikipedia.org/wiki/Extensible_Messaging_and_Presence_Protocol](http://en.wikipedia.org/wiki/Extensible_Messaging_and_Presence_Protocol)

[http://xmpp.org/](http://xmpp.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T04:26:49.240

[https://github.com/robbiehanson/XMPPFramework](https://github.com/robbiehanson/XMPPFramework)

如何编译在这个链接上。

[https://github.com/robbiehanson/XMPPFramework/wiki/GettingStarted_iOS](https://github.com/robbiehanson/XMPPFramework/wiki/GettingStarted_iOS)

从上面的链接下载 XMPP 框架。其中有一个 Xcode 文件夹，其中包含两个应用程序，一个用于桌面，另一个用于 iPhone。

运行 iPhone 应用程序，它会显示一个登录页面，你必须输入 gmail 用户名和密码，它也适用于 Facebook，但这有点困难。

我希望这个答案对你有用......

# c++ - 在 Windows 8 上使用 Windows UI 自动化列出 Metro 应用程序的所有 UI 元素

> ID：11775297
> 
> 赞同：0
> 
> 时间：2012-08-02T10:08:12.020
> 
> 标签：c++, windows-8, microsoft-metro, windows-runtime

我有一个 Metro 应用程序。我正在开发一个自动化客户端。我想列出 Metro 应用程序的所有元素。

1.  我正在通过 IApplicationActivationManager 启动 Metro App
2.  我得到了重点元素

    HRESULT hr = 自动化->GetRootElement(&pRoot);
    hr = 自动化->GetFocusedElement(&pFound);

现在我想列出所有控件，如按钮、图片元素和其他

我正在使用 FindAll 的自动化接口来获取元素，

```
 // Create a property condition for the button control type.   
    VARIANT varProp;  
    varProp.vt = VT_I4;  
    varProp.lVal = UIA_ButtonControlTypeId;  
    hr = automation->CreatePropertyCondition(UIA_ControlTypePropertyId, varProp, &pButtonCondition);   

    if (pButtonCondition == NULL)
        goto cleanup;

    // Create a property condition for the enabled property.
    varProp.vt = VT_BOOL;
    varProp.boolVal = VARIANT_TRUE;
    hr = automation->CreatePropertyCondition(UIA_IsEnabledPropertyId, varProp, &pEnabledCondition);
    if (pEnabledCondition == NULL)
        goto cleanup;

    // Combine the conditions.
    hr = automation->CreateAndCondition(pButtonCondition, pEnabledCondition, &pCombinedCondition);
    if (pCombinedCondition == NULL)
        goto cleanup;

    // Find the matching elements. Note that if the scope is changed to TreeScope_Descendants, 
    // system buttons on the caption bar will be found as well.
    hr = pParent->FindAll(TreeScope_Children, pCombinedCondition, &pFound); 
```

Metro 应用程序中的此唯一列表按钮。我想列出窗口上的所有控件。
请帮助解决这个问题。如何获取 Metro 应用程序的所有元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:25:27.440

我找到了......如果我们使用真实条件，我们可以在 UI 上找到所有元素

```
IUIAutomationCondition* pCombinedCondition = NULL;
 hr = automation->CreateTrueCondition(&pCombinedCondition);
if (pCombinedCondition == NULL)
    goto cleanup;
// Find the matching elements. Note that if the scope is changed to TreeScope_Descendants, 
// system buttons on the caption bar will be found as well.
hr = pParent->FindAll(TreeScope_Children,pCombinedCondition , &pFound); 
```

# jquery - .button("disable") 不起作用

> ID：11775298
> 
> 赞同：1
> 
> 时间：2012-08-02T10:08:15.257
> 
> 标签：jquery, jquery-mobile

我有一个按钮`customer-delete`，当客户有一些信息时应该禁用它，如果客户没有这些信息，应该启用它。

我的代码是这样的：

```
if(customer.name!=null && customer.email!=null){
    $("#customer-delete").button("disable");
    console.info("disabled");
}else{
    $("#customer-delete").button("enable");
    console.info("enabled");
} 
```

但这不能正常工作。控制台正确显示它，这意味着逻辑没有问题，但按钮始终处于启用状态。

谁能给我一个解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:13:08.047

利用[`.prop()`](http://api.jquery.com/prop/)

```
$("#customer-delete").prop("disabled",true); 
```

和[`.removeProp()`](http://api.jquery.com/removeProp/)

```
$("#customer-delete").prop("disabled",true);
// is the same as:
$("#customer-delete").removeProp("disabled"); 
```

在 jQuery 版本 1.6 之前，使用`.attr()`.

或者在使用 jQuery UI 时，您可以将其作为参数对象传递：

```
$("#customer-delete").button({ disabled: true }); 
```

或在使用 setter 方法初始化之后：

```
$("#customer-delete").button( "option", "disabled", true ); 
```

编辑：

我很抱歉忽略了`jquery-mobile`标签。根据[文档](http://jquerymobile.com/demos/1.1.1/docs/buttons/buttons-methods.html)，您的尝试`.button("disable")`是正确的。现在有几种可能：

1.  该文档指出以下内容-我无法根据您提供的上下文来判断您是否属于这种情况。

    > 以下方法仅适用于**表单按钮**。基于链接的按钮没有任何关联的方法。

2.  您的选择器不正确匹配。

3.  代码中其他地方的冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:12:45.707

```
if(customer.name!=null && customer.email!=null){
    $("#customer-delete").attr("disabled", "disabled");
    console.info("disabled");
}else{
    $("#customer-delete").removeAttr("disabled");
    console.info("enabled");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T10:12:57.227

尝试这个

```
if(customer.name!=null && customer.email!=null){
    $("#customer-delete").attr("disabled", true);
}else{
    $("#customer-delete").attr("disabled", false);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T10:13:13.567

从[文档](http://jqueryui.com/demos/button/)来看，它不应该是这样的吗？

```
$( "#customer-delete" ).button({ disabled: true }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T10:13:39.590

如果它具有按钮的数据角色但实际上不是按钮（例如链接），则不能使用这些功能；'

```
 $("#customer-delete").addClass('ui-disabled'); 
```

# css - 少第一个孩子

> ID：11775300
> 
> 赞同：17
> 
> 时间：2012-08-02T10:08:19.483
> 
> 标签：css, less

为什么我的第一个子选择器不能在 Less 中工作？

```
.leftPanel{
    margin:20px;
    float:left;
    display:inline;
    width:620px;
    margin-left:10px;
    select{
        width:300px;    
        &:first-child{
            margin-right: 30px;             
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-02T10:15:28.760

您指定如果 a 中的第一个子元素`.leftPanel`是 a `<select>`，它应该有`margin-right: 30px;`。如果您尝试将此规则应用于（应始终为）**内**的第一个子元素，请尝试替换为.`<select>``<option>``&:first-child``option:first-child`

# c++ - JNI：如何将一组数据从 c++ 转换为 Java

> ID：11775304
> 
> 赞同：5
> 
> 时间：2012-08-02T10:08:28.930
> 
> 标签：c++, java-native-interface

我正在尝试使用 JNI 将一些数据从 c++ 发送到 java。

在 C++ 中，我有：

```
数组[0]：
字符串名称 = “我的名字”
整数迭代 = 16
浮点值 = 15
... ETC
```

所以我想使用JNI返回Java上的所有数据，我正在尝试这个，但不工作

```
JNIEXPORT jobjectArray JNICALL Java_com_testing_data_MainActivity_getDATA(JNIEnv *env, jobject obj)
{
// 1º 创建一个临时对象
作业数据类
    {
        jstring名称；
                联合迭代；
                j浮点值；
    };

`jobject tempObject = env->NewObject();

// Get data in c++ format int temp object type
std::vector<dataClass > data = getDataClass();  // First error, must be a c++ class, how could i get it?

// How much memory i need?
int dataSize = data.size();

// Reserve memory in java format
jint tempValues[dataSize];
jobjectArray tempArray = env->NewObjectArray(dataSize,dataClass,0); // 2º Error, it doesn 't create the class

    // Temporal store data in jarray
for (int i = 0; i < dataSize ; i++)
{
    tempArray[i].name = data[i].name;
            tempArray[i].iterations = data[i].iterations;
            tempArray[i].value = data[i].value;
}

return tempArray;   // return temp array` 

}

这些步骤是否正确以返回带有数据的结构/对象？如何修复错误？

            回答 #1

赞同：3

时间：2012-08-05T09:03:30.607

将所有内容都转换为 JNI 类型并不是一个好主意。通常，最好创建一个对等对象，即指向本机资源的句柄指针——如 Windows GUI 编程中的 hWnd。

            回答 #2

赞同：0

时间：2018-02-08T07:53:49.440

您可以使用字符串将所有数据存储为序列数据。字段由分隔符分隔（例如“：”），如下所示：

```
std::string sequenceData = "my name" + ":" + "16" + ":" + "15" + ...; 
```

将此序列传递给 java，然后将其拆分以获得所需的值。使用`String.split()`或`StringTokenizer`。

```

# ipad - 如何在 UIPopover 控制器中获取导航栏

> ID：11775307
> 
> 赞同：1
> 
> 时间：2012-08-02T10:08:35.670
> 
> 标签：ipad, ios5

我正在使用带有导航栏的 uipopover 控制器。实际上，我希望在 popover 控制器内有导航栏。我尝试更改导航控制器的背景颜色，但它看起来不像我预期的那样。导航栏按钮似乎与弹出框角相连。请找到附加的屏幕截图。下面是我用来创建弹出框的代码。

WLViewBookmarkViewController * viewBookmarkViewController = [[WLViewBookmarkViewController alloc] initWithStyle:UITableViewStyleGrouped];

viewBookmarkViewController.delegate = self; UINavigationController *viewBookmarkNavController = [[UINavigationController alloc] initWithRootViewController:viewBookmarkViewController];

viewBookmarkNavController.navigationBar.backgroundColor = [UIColor colorWithRed:9/255.0 green:135/255.0 blue:46/255.0 alpha:1.0];

self.bookmarkPopoverController = [[UIPopoverController alloc] initWithContentViewController:viewBookmarkNavController];

[self.bookmarkPopoverController presentPopoverFromBarButtonItem:bookmarkButtonItem allowedArrowDirections:UIPopoverArrowDirectionDown|UIPopoverArrowDirectionUp 动画：YES];

```
 Please suggest if there are any other way to achieve this. 
```

![在此处输入图像描述](../Images/af9a6c4c891f9a17114026e118ef5190.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:10:50.007

我会直接用 UINavigationController 初始化 UIPopover 控制器

```
self.bookmarkPopoverController = [[UIPopoverController alloc] initWithContentViewController: viewBookmarkNavController]; 
```

还可以尝试通过在 viewBookmarkViewController 类中覆盖来设置弹出框的内容大小`-contentSizeForViewInPopover`以返回 CGSize，您应该通过这种方式获得更整洁的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:54:58.617

我创建了一个 Xib，在其中我有一个控制器视图，我必须在 popover 中添加它。我在视图中添加了一个表格视图和一个导航栏。

# html - 为什么 IE8 显示兼容性视图按钮，而 IE9 不显示？

> ID：11775311
> 
> 赞同：0
> 
> 时间：2012-08-02T10:08:58.260
> 
> 标签：html, internet-explorer, cross-browser, x-ua-compatible

在我的一个站点上，尽管存在 X-UA-Compatible 标头，IE 8 仍显示兼容性视图按钮。在 IE 9 中，添加此标头会删除按钮并设置正确的呈现模式，但为什么在 IE 8 下不这样做呢？如果用户单击 IE8 中的按钮，站点渲染会在多个页面上中断，那么如何删除此按钮以阻止他们单击它？

有问题的网站是[www.venuefinder.com](http://www.venuefinder.com)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T10:14:39.027

您的页面包含以下元标记：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9" /> 
```

因此 IE9 隐藏了按钮并且 IE8 不理解它（因为 IE9 在 IE8 发布时不存在）

为确保 IE8 和 IE9（以及 IE10）不显示您可能希望调整页面以包含现代 DOCTYPE 的按钮

```
<!doctype html> 
```

并将元标记设置为边缘

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

# asp.net - Chrome 中的 ASP.NET 边距问题

> ID：11775313
> 
> 赞同：0
> 
> 时间：2012-08-02T10:09:06.497
> 
> 标签：asp.net, html, css, google-chrome

我有一个相当简单的设计，我正在 ASP.NET 中进行工作。

问题是当我将设计从工作正常的平面 HTML 带到 asp.net 时，它会在页面顶部和某些元素周围添加看起来是 20 像素的空白边距。

我认为这是因为没有在 CSS 中的 body 和 form 元素上将我的边距设置为 0px。我已经这样做了，它在 Chrome 和 Firefox 中仍然存在问题，但在 IE7 或 IE8 中没有。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:41:01.267

我在 ASP.NET 页面上看到了一些不需要的边距，它们与无效标记有关（可能是因为缺少 div 结束标记或类似的东西——我不记得确切的原因）。所以检查你的标记。还要确保您使用的是有效的文档类型（即不在怪癖渲染模式下）。

在这种情况下，[Firebug通常是一个很大的帮助。](https://getfirebug.com/)您可以准确检查哪个元素导致了额外的边距。Chrome 内置了类似的“检查元素”功能。

# intellij-idea - IntelliJ - 显示错误在哪里

> ID：11775315
> 
> 赞同：124
> 
> 时间：2012-08-02T10:09:08.367
> 
> 标签：intellij-idea

有没有办法让 IntelliJ 以与 Eclipse 类似的方式为您正在处理的文件连续标记错误位置？目前我需要制作在消息面板中列出所有错误的项目，但即便如此我也无法使用编辑器面板导航到它们。我想要简单的点/标记来指向错误/警告位置。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-08-02T10:31:22.560

IntelliJ IDEA 即时检测当前文件中的错误和警告（除非在菜单中激活了**省电模式**`File`）。

其他文件和项目视图中的错误将在`Build`|之后显示 **并在消息**工具窗口`Make`中列出。

 **对于 Bazel 用户：项目错误将在运行后显示在**Bazel Problems**工具窗口中`Compile Project`( `Ctrl/Cmd`+ `F9`)

要在错误之间导航，请使用`Navigate`| `Next Highlighted Error`( `F2`) / `Previous Highlighted Error`( `Shift`+ `F2`)。

**可以在此处更改**错误条纹标记颜色：****

 **![错误条纹标记](../Images/adf2ce103dbcd16a9dfba6f7bcefc6c5.png)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2017-08-07T22:09:43.640

对于那些还没有遇到问题的人，请尝试在 Java 编译器设置中启用“自动构建项目”，看看这是否对我有用。

[![](../Images/22f6811ac730a34d7fe2b89c8a48bb2a.png)](https://i.stack.imgur.com/HtBFh.png)

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2014-11-02T18:16:17.367

我遇到了没有设置我的源根文件夹的问题（项目窗口 - 右键单击​​文件夹，将目录标记为>源根）。如果你不设置这个 IDEA 不会解析文件。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2018-02-02T23:15:38.243

对于 IntelliJ 2017：

使用“问题”工具窗口查看所有错误。当您启用上面@pavan（[https://stackoverflow.com/a/45556424/828062](https://stackoverflow.com/a/45556424/828062)）提到的“自动”构建/制作时，此窗口会出现在底部/侧面选项卡中。

[![在此处输入图像描述](../Images/f80aa1ef08a3da79c279c41eee4b73ca.png)](https://i.stack.imgur.com/Dsl3e.png)

要访问此`Problems`面板，您必须将项目设置为自动构建。选中`Preferences`/ `Settings`> `Build, Execution, Deployment`> `Compiler`>复选框`Build project automatically`。

[![<code>Preferences</code>/<code>Settings</code> > <code>Build, Execution, Deployment</code> > <code>Compiler</code> > <code>自动构建项目的截图</code>代码>](../Images/df6a3cd77f0cb8c71b2402c05b888c28.png)](https://i.stack.imgur.com/g6tG8.png)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-09-30T17:49:15.113

坦率地说，这些错误真的很难看到，特别是如果在 Java 代码的海洋中只有一个字符被“低估”了。我使用上面的说明将背景设置为橙红色，并且事情更加明显。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2019-02-21T14:41:42.613

在 IntelliJ Idea 2019 中，您可以在“项目”视图下找到范围“问题”。默认范围是“项目”。

[![](../Images/3181079e07bc70e949807c38a112dbae.png)](https://i.stack.imgur.com/8FVXm.png)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-01-18T09:59:12.813

此外，您可以通过以下方式选择仅转到下一个错误（忽略警告）：

1.  右键单击[验证侧栏](https://www.jetbrains.com/help/idea/2016.1/intellij-idea-editor.html)。
2.  在上下文菜单中，选择`Go to high priority problems only`

它适用于 Intellij Idea 12

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-08-15T13:33:27.973

就我而言，我在不知不觉中未选中“**错误条纹标记**”选项*（想法 2018.2：`Settings > Editor > Color Scheme > General`并展开“错误和警告”并单击“**错误**”）*。

修复是检查“错误”的“**错误****条纹标记**”选项*（如下图所示）*。现在您将在滚动条区域看到错误标记。

 ***[![在此处输入图像描述](../Images/5a49a6c4dc335468a5661b42ddd83de5.png)](https://i.stack.imgur.com/EbKY4.png)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-10-09T16:02:59.760

就我而言，IntelliJ 只是处于电源安全模式

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-01-19T15:58:32.563

主窗口底部是否有类似 [_] 的黄色图标？这是一个“类型感知突出显示”开关，可能会被意外禁用。您应该通过单击图标重新启用它。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2021-07-16T16:58:57.053

这是我找到的解决方案：

0.  打开 IntelliJ 设置（Crtl + Shift + A）；
1.  点击“编辑器”；
2.  点击“配色方案”+编程语言（在“配色方案”内）；[![选择配色方案 + 编程语言](../Images/38994cfec96b621e620700fd78e4fc61.png)](https://i.stack.imgur.com/o2XQJ.png)
3.  选择“分析错误”；
4.  选择“错误条纹标记”+ 添加所需的颜色[![04 上述步骤](../Images/7dc0ed18957d3288bc2155512d5bd9af.png)](https://i.stack.imgur.com/qaqWe.png)*******

# google-app-engine - Objectify 查询实体的属性

> ID：11775317
> 
> 赞同：0
> 
> 时间：2012-08-02T10:09:15.360
> 
> 标签：google-app-engine, objectify

有没有可能使用 Objectify 从实体中查询特定属性的方法，

假设我有一个 **具有属性 {id,name,mail} 的 Class 实体**，如何**仅从实体中过滤邮件属性** ？以前我正在获取整个实体

```
Objectify ofy=ObjectifyService.begin();
Query<entity> q=ofy.query(entity.class); 
```

然后检索值 q.getmail();

我正在寻找仅在查询 q中过滤****来自实体*****的邮件属性？*请让我知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T18:52:01.553

这不是objectify的工作方式。您将整个实体加载为带有查询的 bean。SQL “从 id=? 的实体中选择邮件”并没有真正的同义词。在客观化。您可以做的是控制使用 LoadGroups (https://code.google.com/p/objectify-appengine/wiki/BasicOperations# Load_Groups），但我认为这不是您要问的。

也就是说，获取 1 个字段和获取整个对象在 appengine 中花费的时间基本相同。

# android - 按类别制作自定义 ListView

> ID：11775318
> 
> 赞同：1
> 
> 时间：2012-08-02T10:09:18.000
> 
> 标签：android, listview, categories

我在这里发帖是因为我真的不知道如何解决我的问题。

我有一个 ListView，其中包含 Listitems：

列表视图.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
     <Button    android:id="@+id/refresh_promo"
                android:text="@string/refresh_promo"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"/>
    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>
</LinearLayout> 
```

列表项.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">
    <!-- Name Label -->
    <TextView
        android:id="@+id/title_promotions"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#bd0043"
        android:textSize="16sp"
        android:textStyle="bold"
        android:paddingTop="6dip"
        android:paddingBottom="2dip" />
    <!-- Description label -->
    <TextView
        android:id="@+id/compagny_promotions"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#acacac"
        android:paddingBottom="2dip">
    </TextView>
    <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#5d5d5d"
        android:gravity="left"
        android:textStyle="bold"
        android:text="Valable jusqu'au  " />
    <TextView
        android:id="@+id/availabledate_promotions"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#acacac" 
        android:textStyle="bold"
        android:gravity="left">
    </TextView>
    </LinearLayout>
</LinearLayout> 
```

我已经很好地管理了在我的 ListView 中从我的 web 服务中恢复的项目，但现在我将根据表征它们的字段对这些项目进行分类：字符串类别。

我想要一个文本视图，其中包含通讯员下方每个项目的类别，如果没有项目，则不显示此文本视图。而且我不想使用 ExpendableListView。请帮帮我：$

# c++ - 在 XP 上使用 vc++ 2008 在对话框中断言 MFC 应用程序

> ID：11775324
> 
> 赞同：0
> 
> 时间：2012-08-02T10:09:34.293
> 
> 标签：c++, visual-studio-2008, mfc

在这一行

```
GetDlgItem(ID_edit1)->SetWindowText("text1"); 
```

在 XP PC 的调试模式下，程序崩溃。它在发布模式下工作。此外，在 win 7 PC 上，它不会在调试或发布模式下崩溃。

我收到的错误消息：

```
debug assert failed!  ... vsprintf.c
the Buffer is too small! 
```

令我困惑的是为什么其他一些类似的编辑框能起作用。变量的类型为`CEdit`。

# iphone - 谷歌 chrome 浏览器与 UIWebview 不同？

> ID：11775345
> 
> 赞同：0
> 
> 时间：2012-08-02T10:11:05.857
> 
> 标签：iphone, ios, ipad

谷歌 chrome 浏览器作为原生应用程序在 App Store 中提供。

1）它与野生动物园有何不同？

2）如果他们使用了UIWebview，它如何访问设备内存，拥有它的所有功能？如果他们使用UIWebview，普通的UIWebview就足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:17:53.293

iOS 上的 Chrome 与 Safari 的区别仅在于 UI 和与 Google 服务同步的能力，因为它基于 Apple 的 WebKit（渲染/布局引擎）

# asp.net - Castle Windsor 3 在多个 Web 请求中保留 PerWebRequest 对象

> ID：11775346
> 
> 赞同：3
> 
> 时间：2012-08-02T10:11:09.853
> 
> 标签：asp.net, castle-windsor, perwebrequest

我有一个 MVC 4 项目，并试图将 PerWebRequest 对象注入我的控制器。但是，似乎没有跨多个请求重新创建对象

```
 private static IWindsorContainer InitializeWindsor()
    {
        var container = new WindsorContainer().Install(FromAssembly.This());

        // Add Factory facility
        container.AddFacility<TypedFactoryFacility>();

        // Register all controllers from this assembly
        foreach (var assembly in AppDomain.CurrentDomain.GetAssemblies())
        {
            container.Register(
                AllTypes.FromAssembly(assembly).BasedOn<Controller>().Configure(c => c.LifestyleTransient())
                );
        }

        // Register HTTP Handlers
        container.Register(Component.For<HttpRequestBase>().LifeStyle.PerWebRequest.UsingFactoryMethod(() => new HttpRequestWrapper(HttpContext.Current.Request)));
        container.Register(Component.For<HttpContextBase>().LifeStyle.PerWebRequest.UsingFactoryMethod(() => new HttpContextWrapper(HttpContext.Current)));

        // Register components
        container.Register(Component.For<PerWebRequestObject>().LifeStyle.PerWebRequest);
} 
```

这是我的 PerWebRequestObject：

```
public class PerWebRequestObject
{
    public DateTime DateCreated { get; set; }

    public PerWebRequestObject()
    {
        DateCreated = DateTime.UtcNow;
        Debug.WriteLine("Created: " + DateCreated.ToLongTimeString());
    }
} 
```

这是我的测试控制器：

```
public class TestController : BaseController
{
    public PerWebRequestObject pwrObject { get; set; }

    public ActionResult Test()
    {
        Debug.WriteLine(pwrObject.DateCreated.ToLongTimeString());
        return new ContentResult();
    }
} 
```

为什么这不起作用？请注意，我正在使用 WindsorControllerFactory 并像这样释放控制器：

```
 public override void ReleaseController(IController controller)
    {
        var disposableController = controller as IDisposable;
        if (disposableController != null)
            disposableController.Dispose();

        _windsorContainer.Release(controller);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T21:59:42.360

两件事情：

*   你怎么知道对象没有正确地生命周期（没有跨网络请求重新创建）？

一种可能的解释是您的依赖项如下所示：

控制器 --> 单例 --> 你的每个网络请求组件

这是生活方式的不匹配，这可以解释你所看到的行为

*   不要丢弃控制器。那是容器的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T11:17:25.227

升级到 Castle Windsor v3.1 为我们解决了这个问题，无需更改任何代码。

我认为 Windsor v3.0 + MVC 4 的组合一定存在问题。

# python - 如何使用 pylab.imshow() 显示 np.array

> ID：11775354
> 
> 赞同：19
> 
> 时间：2012-08-02T10:11:34.350
> 
> 标签：python, matplotlib

此循环产生的`np.array`结果有 4383 行和 6 列。我尝试使用`pylab.imshow()`from `matplotlib(pylab)`来显示数组但没有成功。

目标是创建数组的图像，其中颜色渐变表示数组值的大小。

数组的每一行代表每天（4383 天）内湖泊温度深度的变化。因此，目标是找出湖温随时间变化的深度差异。

```
TempLake=np.zeros((N+1,Nlayers))
TempLake[0]=T0

Q=np.zeros(N+1)
Q[0]=0.0
for i in xrange(N):
    Q[i+1]=Qn(HSR[i],TD[i],FW[i],TempLake[i][0])
    TempLake[i+1]=main_loop(Z,z,Areat0,Areat1,TempLake[i],wind[i],Q[i],Q[i+1])

np.savetxt('test.out', TempLake, delimiter=',')
np.savetxt('test1.out', Q, delimiter=',')

pylab.imshow(TempLake)
pylab.show() 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-02T10:52:13.177

您可以`imshow`按如下方式使用：

```
import pylab as plt
import numpy as np

Z=np.array(((1,2,3,4,5),(4,5,6,7,8),(7,8,9,10,11)))
im = plt.imshow(Z, cmap='hot')
plt.colorbar(im, orientation='horizontal')
plt.show() 
```

![在此处输入图像描述](../Images/a5bb896c89ae4c960aefb3ae922e2891.png)

在您的情况下，您可以检查`TempLake`.

# c# - ReSharper，如何显示所有提示？任何键盘

> ID：11775358
> 
> 赞同：9
> 
> 时间：2012-08-02T10:12:05.730
> 
> 标签：c#, visual-studio-2010, resharper, keyboard-shortcuts

VS2010，ReSharper 6.0 完整版，如何显示所有提示？有没有键盘快捷键？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T15:43:46.223

ReSharper 菜单 -> 检查 -> 解决方案中的代码问题。

它显示所有级别（包括提示），但严重性反映在图标中。

# java - 调用静态类方法

> ID：11775362
> 
> 赞同：2
> 
> 时间：2012-08-02T10:12:15.660
> 
> 标签：java

如何调用静态类的方法。
我有一个像这样的父类

```
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name = "parent")
public class parent {

    @XmlElement(required = true)
    protected String methodName;
    @XmlElement(required = true)
    protected MethodCall.Params params;

    public static class member {

        @XmlElement(required = true)
        protected String name;

        public String getName() {
            return name;
        }

        public void setName(String value) {
            this.name = value;
        }
    }
} 
```

我想调用静态类的（成员）getter 和 setter 方法。我试过打电话

```
parent.member.setName("value") 
```

但它不起作用。如何调用静态类中的 setter 和 getters 方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:14:14.733

你需要一个*实例*，`parent.member`因为`setName`它是一个实例方法：

```
// TODO: Follow Java naming conventions for types...
parent.member x = new parent.member();
x.setName("foo"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:15:52.673

你不能这样称呼它，因为静态嵌套类中的方法不是静态函数。它的实例函数。

```
//Its wrong  
 parent.member.setName("value");

//right way to call
parent.member obj= new parent.member();
obj.setName("value"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T10:17:01.343

将方法定义更改为：

```
public static String getName()
public static void setName(String value) 
```

和领域：

```
protected static String name; 
```

使用您的代码进行调用。另一种方法是实例化当前类（在父类内部）：

```
member tmp = new member() 
```

进而 ：

```
tmp.setName("value") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T10:17:45.377

`setName()`不是**静态**方法。因此，无论何时要调用此方法，都必须使用类的实例。

```
parent.member mem = new parent.member();
mem.setName(); 
```

# sitecore - 工作流程注释是否可定制？

> ID：11775364
> 
> 赞同：1
> 
> 时间：2012-08-02T10:12:18.607
> 
> 标签：sitecore, sitecore6, sitecore-workflow

如果您启用“评论”选项，是否有人知道如何自定义 Sitecore 中显示的“工作流评论”框？

![sitecore 工作流程评论](../Images/5f9febdfb38606ac66f7e85ab6713f8b.png)

我希望对此进行一些扩展......但在任何站点核心 javascript 或 shell 文件中都看不到这个引用 - 我猜我需要构建一个完整的自定义对话框来实现我想要的功能，但是不是 100% 从哪里开始！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:56:20.643

我们最终制定了一个解决方案，该解决方案广泛地由自定义操作组成，包含我们需要的相关表单。然后解析用户提交的信息，并作为注释传递给工作流（这个特定的工作流命令对用户隐藏，因此他们必须通过我们的自定义命令）。
不理想，但有效！

# c# - 将两个日期字段与两个日期参数进行比较

> ID：11775371
> 
> 赞同：0
> 
> 时间：2012-08-02T10:12:42.803
> 
> 标签：c#, asp.net, sql, linq

我在数据库中有两列，project_start 和 project_end，我正在通过报告（用 ASP 编码）传递两个字段（都是可选的）。

下面的伪代码是我目前拥有的：

(project_start <= search_start AND project_end <= search_start)

和

(project_start <= search_end AND project_end >= search_end)

但是，上面没有提到的是在开始日期之前开始但在开始日期之后结束的项目，在开始日期之后开始但在结束日期之后结束的项目，以及在开始日期之前开始并结束的项目结束日期之后：S

下面是我的代码：

```
if (Request.QueryString["DateFrom"] != null && Request.QueryString["DateFrom"] != "")
        {
            DateTime dateFromFilter;

            dateFromFilter = DateTime.Parse(Request.QueryString["DateFrom"]);

            Q = from qua in qTable
                    where qua.Start_Date.Date <= dateFromFilter.Date
                    && qua.End_Date.Date >= dateFromFilter.Date
                    select qua;
        }

        //filter to date
        if (Request.QueryString["DateTo"] != null && Request.QueryString["DateTo"] != "")
        {
            DateTime dateToFilter;

            dateToFilter = DateTime.Parse(Request.QueryString["DateTo"]);

            Q= from qua in qTable
                    where qua.Start_Date.Date <= dateToFilter.Date
                    && qua.End_Date.Date >= dateToFilter.Date
                    select qua;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:14:53.563

如果您希望项目与搜索范围的任何部分重叠，请尝试以下操作：

```
project_start <= search_end AND project_end >= search_start 
```

我知道它看起来“太简单了”，但它实际上涵盖了所有情况：

*   两端部分重叠
*   该项目完全在搜索范围内
*   搜索范围完全在项目内。

**更新**

处理可选参数：

```
(search_end IS NULL OR project_start <= search_end) AND
(search_start IS NULL OR project_end >= search_start) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:19:24.783

你当然想要：

```
(project_start >= search_start AND project_end >= search_start)
AND
(project_start <= search_end AND project_end <= search_end) 
```

假设 project_end > project_start，这可以简化为

```
project_start >= search_start AND project_end <= search_end 
```

你说这两个搜索参数都是可选的，在这种情况下，让 search_start 默认为 DateTime.MinValue，而 search_end 默认为 DateTime.MaxValue。

# java - html5/JS 中的 java 桌面应用程序 gui

> ID：11775377
> 
> 赞同：5
> 
> 时间：2012-08-02T10:12:57.133
> 
> 标签：java, javascript, html, user-interface, desktop

我可以在 html5/JS 中为桌面 java 应用程序创建 Gui。如果是，我需要什么工具以及如何将 GUI 与 java 代码连接起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:27:38.607

可能 - 但不完全确定您为什么要这样做。

您的主要选择是：

*   让 Java 应用程序充当本地 Web 服务器并使用浏览器连接到它。这将是一个奇怪的设计，但很容易让它工作。如果您有一个远程 Java Web 服务器，这与您所做的基本相同，因此组件非常标准 - 例如，您可以使用像[Vaadin](https://vaadin.com/home)这样的工具包。
*   在 Java 托管环境/嵌入式浏览器中运行 JavaScript。[Rhino](http://www.mozilla.org/rhino/)应该是可能的- 虽然我必须承认我从未见过这种用于构建桌面 GUI 的方法

如果您考虑在未来某个时候远程使用该应用程序，那么第一个选项可能特别有意义。

总的来说，我仍然不确定这是否是一个好主意。恕我直言，JavaScript Web 框架仍然不如用于构建本地桌面应用程序 GUI 的原生 Java 框架（SWT、Swing 或 JavaFX）。

# xslt - 如何使用 XSLT 在 XML 文档中添加根节点标记

> ID：11775378
> 
> 赞同：1
> 
> 时间：2012-08-02T10:12:56.947
> 
> 标签：xslt, xslt-1.0, xslt-2.0

我正在通过 xmlsource 解析 SSIS 中的 xml 文档。它没有任何根标签。所以我试图通过 XSLT 将根标签添加到我的 xml 文档中，但得到的错误为

[XML 任务] 错误：发生错误并显示以下错误消息：“有多个根元素。第 11 行，位置 2。”。

用于添加根元素的 XSL 是什么？请帮助..这是非常紧急的..

请在下面找到xml源

```
<organizational_unit>
  <box_id>898</box_id>
  <hierarchy_id>22</hierarchy_id>
  <parent_box_id>0</parent_box_id>
  <code>Team</code>
  <description />
  <name>CAPS Teams</name>
  <manager_title />
  <level>0</level>
</organizational_unit>
<organizational_unit>
  <box_id>967</box_id>
  <hierarchy_id>31</hierarchy_id>
  <parent_box_id>0</parent_box_id>
  <code>main</code>
  <description />
  <name>Protegent</name>
  <manager_title />
  <level>0</level>
    <organizational_unit>
       <box_id>968</box_id>
       <hierarchy_id>31</hierarchy_id>
       <parent_box_id>967</parent_box_id>
       <code>19L</code>
       <description>19L</description>
       <name>19L</name>
       <level>1</level>
    <managers>
       <manager>
          <hierarchy_mgr_id>243</hierarchy_mgr_id>
          <hierarchy_id>31</hierarchy_id>
          <box_id>968</box_id>
          <rep_id>19499</rep_id>
          <unique_rep_id>100613948</unique_rep_id>
         <first_name>Ed</first_name>
         <last_name>Kill</last_name>
      </manager>
    </managers>
    </organizational_unit>
    <organizational_unit>
        <box_id>1152</box_id>
        <hierarchy_id>31</hierarchy_id>
        <parent_box_id>967</parent_box_id>
        <code>UNKNOWN_m</code>
        <description>Unknown Reps</description>
        <name>Unknown Reps</name>
        <level>1</level>
    </organizational_unit>
</organizational_unit> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:28:45.533

那么您使用哪个 XSLT 处理器，您是如何使用它的呢？我通常不建议使用字符串处理来构造 XML，但是如果您有一个没有根元素的片段，那么进行字符串连接可能`"<root>" + fragment + "</root>"`是获得格式良好的文档的最简单方法。XSLT 可以处理片段，但您如何做到这一点取决于您使用的 XSLT 处理器或 XML 解析器，例如 .NET 可以使用with`XmlReader`设置为片段，然后可以将其加载到（用于使用 XSLT 1.0 和 处理）和可能也与撒克逊人有关（尽管我不确定我是否记得正确）。`XmlReaderSettings``ConformanceLevel``XPathDocument``XslCompiledTransform``XdmNode`

然后样式表会简单地做

```
<xsl:template match="/">
  <root>
    <xsl:copy-of select="node()"/>
  </root>
</xsl:template> 
```

将所有顶级节点包装到一个`root`元素中。

# javascript - 在 Meteor 中如何创建通用事件处理程序？

> ID：11775380
> 
> 赞同：6
> 
> 时间：2012-08-02T10:13:03.097
> 
> 标签：javascript, meteor, dom-events

我想创建一个可以在 dom 元素上重用的通用事件处理程序，这样我就不必一遍又一遍地编写样板。我以为我已经弄清楚了，但我遇到了错误。

我遇到的问题是我认为事件处理程序的绑定时间与我需要的时间不同。也许在`document.ready`？我认为我需要用该`.live()`方法将它们附加到哪里？虽然我可能不知道我在说什么。

这是我正在尝试做的事情：

多页应用。

需要插入数据的多个集合。

显示插入表单的按钮代码。

```
<button id="btnShowInsert" class="btn btn-success" rel="tooltip" title="add group">
    <i id="btnIcon" class="icon-plus-sign icon-white"></i>
</button> 
```

基于页面显示表单的模板（控制器）

```
{{> groups_insert}} 
```

这是表格。

```
<template name="groups_insert">
    {{#if acl_check}}
    {{> alert}}
    < p>
      < form class="form-horizontal well hide" id="insert">
        <fieldset>
          < div class="control-group">
            < label class="control-label" for="name">Name</label>
            < div class="controls">
              < input type="text" class="input-xlarge" id="name" name="name">
            < /div>
          < /div>
          < div class="form-actions well">
            < button id="btnReset" type="reset" class="btn btn-large">Reset</button>
            < button id="btnSubmit" type="button" class="btn btn-primary btn-large">Submit</button>
          < /div>
        < /fieldset>
      < /form>
    < /p>
  {{/if}}
< /template> 
```

这是实现在页面上显示表单的按钮的客户端代码。

```
Template.groups.events[ Meteor.eventhandler.btn_events('#btnShowInsert') ] =  Meteor.eventhandler.make_btn_show_insert_form_click_handler(); 
```

这是我的通用事件处理程序：

```
var EventHandler = Base.extend({
  btn_events: function(selector) {
    return 'click ' + selector; //, keydown '+selector+', focusout '+selector;
  },

  make_btn_show_insert_form_click_handler: function(){
    //var click = options.click || function () {};
    return function (event) {
      if (event.type === "click") {
        event.stopPropagation();
        event.preventDefault;
        try{
          if ($('#btnIcon').hasClass('icon-plus-sign') ) {
            $('#btnIcon').removeClass('icon-plus-sign');
            $('#btnIcon').addClass('icon-minus-sign');
          } else {
            $('#btnIcon').removeClass('icon-minus-sign');
            $('#btnIcon').addClass('icon-plus-sign');
          }

          $('#insert').slideToggle('slow', 'swing');

        } catch(error) {
          Alert.setAlert('Error', 'Critical Error: ' + error, 'alert-error');
        }
      }
    }
  },

});

Meteor.eventhandler = new EventHandler; 
```

**错误**

> 未捕获的类型错误：无法调用未定义的方法“btn_events”

**但是**，如果我以这种方式定义事件处理程序并以这种方式调用它，它就可以工作。

```
Template.groups.events[ btn_events('#btnShowInsert') ] =  make_btn_show_insert_form_click_handler();

var btn_events = function (selector) {
  return 'click ' + selector; //, keydown '+selector+', focusout '+selector;
};

var make_btn_show_insert_form_click_handler = 
function () {
  //var click = options.click || function () {};
  console.log( Meteor.request.controller );

  return function (event) {
    if (event.type === "click") {
      event.stopPropagation();
      event.preventDefault;
      try{
        if ($('#btnIcon').hasClass('icon-plus-sign') ) {
          $('#btnIcon').removeClass('icon-plus-sign');
          $('#btnIcon').addClass('icon-minus-sign');
        } else {
          $('#btnIcon').removeClass('icon-minus-sign');
          $('#btnIcon').addClass('icon-plus-sign');
        }

        $('#insert').slideToggle('slow', 'swing');

      } catch(error) {
        Alert.setAlert('Error', 'Critical Error: ' + error, 'alert-error');
      }
    }
  }
}; 
```

**问题**
我不想为了实现一个可以`slideToggle`在任何页面上形成的漂亮按钮而在我的网站上复制代码。如果我能把它抽象出来，那么我应该能够在所有页面上为我正在呈现的任何允许数据输入的集合提供一个显示表单类型的按钮。同样，这也导致能够为所有表单创建一个表单处理程序，然后通过对模型的操作将它们绑定到控制器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-08T03:14:29.593

您可以将高级模板绑定到使用子模板创建的元素。然后你只需要做一次绑定。例如

HTML：

```
<template name="settings">
    {{> login_settings }}
    {{> account_settings }}
    {{> data_settings }}
</template>

<template name="login_settings">
  <btn class="slideToggle">Slide me for login!</btn>
</template>

<template name="account_settings">
  <btn class="slideToggle">Slide me for account!</btn>
</template>

<template name="data_settings">
  <btn class="slideToggle">Slide me for data!</btn>
</template> 
```

JavaScript：

```
Template.settings.events {
  'click .slideToggle': function() {
    var clickedElement = event.target;
    // add/remove CSS classes to clicked element
  }
}; 
```

因此，如果您最终在设置下创建了 10 个不同的模板定义，那么您仍然只需将处理程序绑定到单个模板。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-22T13:55:52.163

我觉得你把事情复杂化了。为什么不这样做？

```
Template.someTemplate.events({
  'click .button': buttonClicked
});

function buttonClicked(evt) {
  // DRY code to handle a button being clicked
} 
```

这具有适当的分离平衡：您的事件处理程序定义一次，但您可以告诉每个模板您希望其按钮侦听某个事件。如果这还不够好，您可以进一步抽象它：

```
Template.someTemplate.events(genericEvents); 
```

如果您愿意，甚至可以将 genericEvents 与该模板的特定事件合并。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T15:35:49.047

这就是我最终要做的。该示例仅显示了通用插入处理程序。

```
var EventHandler = Base.extend({

btnClickHandler: function(){
    return function (event) {
      event.preventDefault();
      Meteor.eventhandler[event.currentTarget.id](event);
    }
  },
insert: function(event){
    event.preventDefault();
    var params =  $('#insert-form').toJSON(); 
    try{
      window[Meteor.request.controller.capitalise()]['validateParams'](params);
      var ts = new Date();
      params.client_updated = ts;
      var has_popup = params.has_popup;
      delete params.has_popup;
      window[Meteor.request.controller.capitalise()]['insert'](params, function(error, _id){
        if(error){
          Alert.setAlert('Error', error, 'alert-error', true, has_popup);
        } else {
          Alert.setAlert('Success', 'Record successfully created.', 'alert-success', true, has_popup);
          $("#insert-form").reset();
          Meteor.flush();
        }
      });
    } catch(error) {
      Alert.setAlert('Error', error, 'alert-error', true, params.has_popup);
    }
  }
 });

 Meteor.eventhandler = new EventHandler; 
```

现在，我只需要创建把手模板而无需任何重要的 javascript 编码来处理通用事件并将它们连接起来，如下所示。

```
$(document).on("click", '#print', Meteor.eventhandler.btnClickHandler());
$(document).on("click", '#insert', Meteor.eventhandler.btnClickHandler());
$(document).on("click", '#remove', Meteor.eventhandler.btnClickHandler());
$(document).on("click", '#removeSubField', Meteor.eventhandler.btnClickHandler());
$(document).on("click", '#insertSubField', Meteor.eventhandler.btnClickHandler())
$(document).on("click", '#update', Meteor.eventhandler.btnClickHandler());
$(document).on("click", '#updateSubField', Meteor.eventhandler.btnClickHandler());
$(document).on("click", "#toggleActive", Meteor.eventhandler.btnClickHandler());
$(document).on("click", "#toggleChild", Meteor.eventhandler.btnClickHandler()); 
```

现在，我不必编写任何模板事件映射来处理基本的 CRUD。只要 /route 对应于集合名称，我就可以创建任意数量的车把模板。尽管我不时进行一些棘手的转换。基本上，通用事件处理程序基于路由又名 request.controller 将事件连接到一个集合，并通过客户端/服务器共享数据模型将其抽象出来，以便与 Meteor 中现有的内容一起进行验证甚至访问控制。

它似乎运行良好，并且显着减少了我的代码库。我有几十个集合，我不必编写任何事件映射处理程序，因为基本的 CRUD 已被处理但足够抽象，我可以在客户端/服务器共享数据模型上自定义验证、安全性和其他健全性检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-28T19:40:12.347

我在 Meteor 1.0.2 中解决这个问题的方法是使用动态模板。请参阅 Dan Dascalescu 的[规范答案](https://stackoverflow.com/a/26421763/2805154)和[文档](http://docs.meteor.com/#template_dynamic)。

假设您有一组附加到模板“A”的通用事件，并且您想在模板“B”、“C”和“D”中利用它们。

HTML：

```
<template name="A">
  {{> Template.dynamic template=myTemplate}}
</template> 
```

JS：

```
Template.A.events({
   ... your event code
}) 
```

您为“A”定义了一个辅助函数，该函数动态选择要包含的 B、C 或 D (...) 中的哪一个：

```
Template.A.helpers({ // dynamically insert a template
  myTemplate: function(){
    if (...) return 'B'; // return a string with the name of the template to embed
    if (...) return 'C';
    if (...) return 'D';
  }
}) 
```

“A”中定义的事件现在将在“B”、“C”和“D”中可用。

请注意，模板“A”不需要包含任何 HTML。

# javascript - 如何在highcharts中设置动态数据

> ID：11775385
> 
> 赞同：8
> 
> 时间：2012-08-02T10:13:16.327
> 
> 标签：javascript, jquery, json, servlets, highcharts

我从 servlet 获取数据，我从 servlet 发送的 json 对象的 sysout 是 *{"jsonArray":[{"bugzilla":20,"redmind":14}]}*

现在我的java脚本是

```
 <script type="text/javascript">
    var chart;
    $(document).ready(
            function() {
                chart = new Highcharts.Chart({
                    chart : {
                        renderTo : 'container',

                    },
                    title : {
                        text : 'Bug chart'
                    },

                    tooltip : {
                        formatter : function() {
                            var s;
                            if (this.point.name) { // the pie chart
                                s = '' + this.point.name + ': ' + this.y
                                        + ' Bugs';
                            } else {
                                s = '' + this.x + ': ' + this.y;
                            }
                            return s;
                        }
                    },
                    labels : {
                        items : [ {
                            html : 'Total Bugs',
                            style : {
                                left : '40px',
                                top : '8px',
                                color : 'black'
                            }
                        } ]
                    },
                    series : [ {

                        type : 'pie',
                        name : 'Total Bugs',
                        data : [],
                        center : [ 100, 80 ],
                        size : 100,
                        showInLegend : false,
                        dataLabels : {
                            enabled : false
                        },
                    },  ]

                }, function getdata(chart) {
                    var tmp="";
                    var receivedData="";

                    $.ajax({
                        url : 'http://localhost:8080/PRM/GraphServlet',
                        dataType : 'json',
                        error : function() {
                            alert("error occured!!!");
                        },
                        success : function(data) {

                            $.each(data.jsonArray, function(index)
                                    {
                                    $.each(data.jsonArray[index], 
                                        function(key,value) {
                                    tmp = "['" + key + "',  " + value + "],";
                                    receivedData += tmp;
                                    alert("receivedData: " + receivedData);

                                });

                            });
                            alert(receivedData.substring(0, 34));
                            chart.series[0].setData([receivedData.toString().substring(0, 34)]);

                        }

                    }
                    );
                });

            });
</script> 
```

警报打印 receivedData: ['bugzilla', 20],['redmind', 14] 我期待但问题是当我将它设置为

**chart.series[0].setData([ *receivedData* .toString().substring(0, 34)]);**

然后我的饼图不工作。它只显示一个部分，如 1/4 圆圈，没有工具提示

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-02T21:29:40.010

您的数据是一个字符串，它需要是一个数组数组，其中内部数组由两个元素组成，第一个是字符串形式的键，第二个是数字形式的值。

```
success : function(data) {
   var chartData=[];
   $.each(data.jsonArray, function(index)
    {
     $.each(data.jsonArray[index], 
      function(key,value) {
       var point = [];
       point.push(key);
       point.push(value);
       chartData.push(point);                          
      });
   });
   chart.series[0].setData(chartData);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-02T12:04:24.073

您可以先准备数据，就像上面的 @Jugal Thakkar 回答一样，然后使用`update`v5 中提供的功能。

```
chart.update({
    series: preparedSeriesData
}); 
```

这将动态更新图表。

# xcode - 用 UIImagePicker 中的叠加层拦截触摸？

> ID：11775388
> 
> 赞同：1
> 
> 时间：2012-08-02T10:13:20.100
> 
> 标签：xcode

我正在开发一个使用相机的 iPhone 应用程序。我希望能够用子视图拦截相机上的触摸，但是当您触摸子视图时，它仍然认为我正在触摸相机。有没有拦截触摸事件？我注意到按钮仍然在子视图上工作，而不是触摸事件。如果有人可以提供帮助，将不胜感激。谢谢！

# windows - 带有检查选项的批处理脚本

> ID：11775393
> 
> 赞同：1
> 
> 时间：2012-08-02T10:13:38.743
> 
> 标签：windows, batch-file

我试图让这个批处理脚本在恢复时检查它是否没有处理过之前的文件并继续处理它没有处理的文件。即如果它已经处理了一个文件，则跳到下一个。我需要做什么才能做到这一点。谢谢

```
@echo off
setlocal enabledelayedexpansion
set EXE_FILE=E:\opencv\build\bin\Release\blobtrack_sample.exe
set INPUT_PATH=E:\Glasgow\Test\
set TRACKS_PATH=E:\Glasgow\Tracks\
set COUNT=0
pushd %INPUT_PATH%
for %%f in (*) do if %%f neq %~nx0 (
  set /a COUNT+=1
  echo Processing %%f, track=%%~nf.txt, btavi=test!COUNT!%%~xf
  %EXE_FILE% fg=FG_0S bd=BD_CC bt=CCMSPF btpp=None bta=Kalman btgen=RawTracks track=%TRACKS_PATH%\%%~nf.txt FGTrainFrames=125 %%f
)
popd 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:18:17.390

您可以检查是否`%OUTPUT_PATH%\%%~nf.avi`存在：

```
for %%f in (*) do if %%f neq %~nx0 if not exists "%OUTPUT_PATH%\%%~nf.avi" (
  set /a COUNT+=1
  echo Processing %%f, track=%%~nf.txt, btavi=test!COUNT!%%~xf
  %EXE_FILE% fg=FG_0S bd=BD_CC bt=CCMSPF btpp=None bta=Kalman btgen=RawTracks track=%TRACKS_PATH%\%%~nf.txt FGTrainFrames=125 btavi=%OUTPUT_PATH%\%%~nf.avi %%f
) 
```

但这有一个小问题。如果在写入文件的中间由于某些原因处理中断，则您有一半的文件不会再次被处理，因为您将*存在*等同于*完成*。

更健壮的方法是先写入临时文件，然后重命名：

```
%EXE_FILE% fg=FG_0S bd=BD_CC bt=CCMSPF btpp=None bta=Kalman btgen=RawTracks track=%TRACKS_PATH%\%%~nf.txt FGTrainFrames=125 btavi=%OUTPUT_PATH%\temp.avi %%f
ren "%OUTPUT_PATH%\temp.avi" "%%~nf.avi" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:19:05.767

您可以检查您的输出文件是否已经存在

```
for %%f in (*) do if %%f neq %~nx0 (
  if not exist "%OUTPUT_PATH%\%%~nf.avi" (
    set /a COUNT+=1
    echo Processing %%f, track=%%~nf.txt, btavi=test!COUNT!%%~xf
    %EXE_FILE% fg=FG_0S bd=BD_CC bt=CCMSPF btpp=None bta=Kalman btgen=RawTracks track=%TRACKS_PATH%\%%~nf.txt FGTrainFrames=125 btavi=%OUTPUT_PATH%\%%~nf.avi %%f
  )
) 
```

在我看来，如果您的 IN (*) 子句仅限于寻找特定的扩展名，它可能会更有效。

# java - 无法创建“类”对象

> ID：11775399
> 
> 赞同：0
> 
> 时间：2012-08-02T10:14:01.457
> 
> 标签：java, android

我正在制作一个 Class 对象以开始一项新活动。但问题是当我输入

```
Class ourclass = new Class.__ 
```

它不识别类，我不能使用超类“类”的方法。它说类是原始类型。我应该将它分配给什么类型，因为我想使用“forName()”方法来传递一个类名。这是代码

```
 protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    try
    {
        Class ourclass =Class.__ // The suggestions for static functions doesn't popup, and I get errors
        //Intent myintent = new Intent();
    }
    catch(ClassNotFoundException e)
    {
        e.printStackTrace();
    }

}
} 
```

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:15:54.750

> 我应该将它分配给什么类型，因为我想使用“forName()”方法来传递类名。

[`Class.forName`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#forName%28java.lang.String%29)是一个*静态*方法 - 你不要在实例上调用它：

```
Class<?> ourClass = Class.forName("foo.bar.Baz"); 
```

（在开始活动时这是否真的合适是另一回事，但这个答案只是解决了`Class.forName`部分......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:15:33.770

如果你想使用`Class.forName`，只需调用`Class.forName(name)`，不要使用（不存在的）构造函数。 `forName`是一个静态方法，所以你不需要`Class`调用它。

# android - 获取片段的视图，并禁用整个视图

> ID：11775400
> 
> 赞同：3
> 
> 时间：2012-08-02T10:14:01.617
> 
> 标签：android, android-layout, android-intent, android-emulator, android-fragments

在我的**main.xml**布局中，我有一个`<FrameLayout>`元素是**片段占位符**：

**主.xml：**

```
<FrameLayout
        android:id="@+id/fragment_placeholder"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/> 
```

**我通过以下方式以编程**方式将片段添加到上面`<FrameLayout>`：

```
fragmentTransaction.add(R.id.fragment_placeholder, fragment, null); 
```

然后我可以使用`replace()`更改为其他片段：

```
fragmentTransaction.replace(R.id.fragment_placeholder, otherFragment, null); 
```

在我的项目的某个时刻，我需要**获取当前显示的片段**，并**禁用**视图上的所有内容。我首先通过以下方式成功获取当前显示片段：

```
Fragment currentFragment = fragmentManager.findFragmentById(R.id.fragment_placeholder); 
```

那么，**如何禁用片段的视图？**在视图上，可能有按钮，是否可以禁用整个视图？如果不可能，如何在视图上添加叠加层？

**我试过了：**

```
currentFragment.getView().setEnabled(false); 
```

但是，它不起作用，我仍然可以单击视图上的按钮。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T13:26:40.067

根据@Georgy 的评论，这里是[禁用所有视图的触摸事件](https://stackoverflow.com/a/8849672/383414)的答案副本（归功于[@peceps](https://stackoverflow.com/users/590531/peceps)）。

* * *

这是一个禁用某个视图组的所有子视图的函数：

```
 /**
   * Enables/Disables all child views in a view group.
   * 
   * @param viewGroup the view group
   * @param enabled <code>true</code> to enable, <code>false</code> to disable
   * the views.
   */
  public static void enableDisableViewGroup(ViewGroup viewGroup, boolean enabled) {
    int childCount = viewGroup.getChildCount();
    for (int i = 0; i < childCount; i++) {
      View view = viewGroup.getChildAt(i);
      view.setEnabled(enabled);
      if (view instanceof ViewGroup) {
        enableDisableViewGroup((ViewGroup) view, enabled);
      }
    }
  } 
```

* * *

您可以在您的视图中调用此传递，`Fragment`由 检索`Fragment.getView()`。假设您的片段的视图是`ViewGroup`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-17T20:11:29.137

这是带有@Marcel 建议的Kotlin 实现。

```
fun ViewGroup.enableDisableViewGroup(enabled: Boolean, affectedViews: MutableList<View>) {
    for (i in 0 until childCount) {
        val view = getChildAt(i)
        if (view.isEnabled != enabled) {
            view.isEnabled = enabled
            affectedViews.add(view)
        }

        (view as? ViewGroup)?.enableDisableViewGroup(enabled, affectedViews)
    }
}

fun MutableList<View>.restoreStateAndClear(enabled: Boolean) {
    forEach { view -> view.isEnabled = enabled }
    clear()
} 
```

# nginx - nginx - Apache ReWriteRule

> ID：11775406
> 
> 赞同：0
> 
> 时间：2012-08-02T10:14:28.897
> 
> 标签：nginx

我是 nginx 新手，需要包含以下 Apache ReWriteRule：

```
RewriteRule ^download_download_([a-z]{2})/(.*)$            /download_download/$2         [QSA,L] 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:26:40.600

您**通常**总是可以在 Nginx 中将Apache 更改`RerwiteRule abc xyz`为。`rewrite abc xyz;`

Apache`[QSA,L]`只是`last`在 Nginx 中。

与您的不同之处在于您的正则表达式中有花括号`{...}`。花括号在 Nginx 中有内部使用，因此，您需要将正则表达式字符串用引号引起`"..."`来，以便 Nginx 正确解析正则表达式。

所以你可以试试

`rewrite "^download_download_([a-z]{2})/(.*)$" /download_download/$2 last;`

# .net - 在 Microsoft CRM 4.0 中使用 Web 服务与使用动态实体

> ID：11775410
> 
> 赞同：2
> 
> 时间：2012-08-02T10:14:41.120
> 
> 标签：.net, dynamics-crm-2011, dynamics-crm-4

我正在与一位同事就在插件或工作流程中使用 Web 服务进行辩论

他说使用动态实体是微软建议的最佳实践，因为网络服务需要身份验证。

我认为使用 wsdl 和强类型实体更干净，更不容易出错，并且身份验证延迟可以忽略不计

此外，我们计划更新到 CRM 2011

那么，我们中的哪一个是对的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:41:54.983

动态实体和强类型实体都需要身份验证。我不相信两者之间的身份验证存在延迟。

如果您正在编写可应用于其他 CRM 组织（如 ISV 那样）的通用代码，那么动态实体是您的最佳选择。否则我会建议强类型实体是更好的选择，因为代码更干净，更易读，正如你所说。

两组代码都需要在 CRM 2011 中重新工作。

祝一切顺利，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T15:17:07.037

强类型实体和动态实体都使用 Web 服务，它们都需要身份验证，因此没有真正的区别。

在升级到 Crm 2011 方面，Web 服务在 2011 年发生了变化，因此如果您想重新编码，您可以，但两者都必须重新编码。或者您可以继续使用 Crm 4 网络服务而不重新编码。所以再次没有真正的区别。

我找不到任何来自微软的东西说他们更喜欢动态实体。在[使用 Microsoft Dynamics CRM 2011 进行开发的最佳实践中，](http://msdn.microsoft.com/en-us/library/gg509027#Performance)他们实际上说要根据您的情况使用这两种方法。

> 当您的代码必须处理编写代码时未知的实体和属性时，请使用 Entity 类。但是，这种灵活性有一个缺点，因为您无法在编译时验证实体和属性名称。如果您的实体已在代码时定义，则应使用可通过使用 CrmSvcUtil 工具生成的早期绑定类型。有关详细信息，请参阅在代码中使用早期绑定实体类。

我认为这主要归结为风格和偏好（没有人是对的）——我个人更喜欢动态实体。

强类型 - 优点：

*   智能感知
*   设计\编译时验证
*   您不必检查 Crm 的所有实体、字段和关系名称
*   编译后的可执行文件包含调用类型的属性、方法和事件所需的代码

强类型 - 缺点：

*   您必须生成 WSDL（并在每次 Crm 更改时不断重新生成它）
*   上次检查时生成的类没有通过代码分析
*   它可能有点“笨拙”，例如，使用动态实体创建新记录通常需要几行代码。必须生成数百个强类型类来编写几行代码似乎有点过头了。

# javascript - 如果字符串是某物，则值为空

> ID：11775419
> 
> 赞同：0
> 
> 时间：2012-08-02T10:15:00.627
> 
> 标签：javascript

在javascript中，我如何编写一个函数，如果字符串是“选择客户端”，那么地址和联系号码字段应该为空或空白。我已经有了这个功能，如果选择了客户名称，那么地址和联系电话字段将使用 rails 的填充器 gem 自动输入。

```
 $('#client_id').change(function(){
        $.ajax({
            url: "/fetch_client",
            type: "POST",
            data: "id="+$(this).attr('value'),
            dataType: "json",
            success: function(data, textStatus, xhr){
                $('#client_address').attr('value',data.client_address);
                $('#client_contact_number').attr('value',data.client_contact_number);

            },
            error: function(xhr, textStatus, errorThrown){

            }

        });
  }); 
```

有人可以帮助我，因为我是 javascript 新手吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:18:30.423

```
 $('#client_id').change(function(){
       if ($(this).val() == "Select client") {
                $('#client_address').attr('value', "");
                $('#client_contact_number').attr('value', "");
       } else {

        $.ajax({
            url: "/fetch_client",
            type: "POST",
            data: "id="+$(this).attr('value'),
            dataType: "json",
            success: function(data, textStatus, xhr){
                $('#client_address').attr('value',data.client_address);
                $('#client_contact_number').attr('value',data.client_contact_number);

            },
            error: function(xhr, textStatus, errorThrown){

            }

        });
     }
  }); 
```

# python - Django: How to access URL regex parameters inside a middleware class?

> ID：11775441
> 
> 赞同：7
> 
> 时间：2012-08-02T10:16:11.363
> 
> 标签：python, django, google-app-engine, middleware, urlconf

I am working on a Django project on Google App Engine. I have a URL like:

`http://localhost:8080/[company]/projects/project`

Note that `[company]` is a URL parameter defined in my urls.py like:

`(r'(^[a-zA-Z0-9-_.]*)/projects/project/(\d*)', 'projects.views.project_form'),`

I want to get the value of `[company]` from a middleware where I will set the GAE datastore namespace to the `[company]` value.

Is it possible to get the `[company]` parameter from the request object passed in the `process_request` method of middleware class?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T10:27:24.130

If you are using the `process_view` middleware, you will have access to the views arguments and therefore the company value. Have a look at the function's definition:

```
def process_view(self, request, view_func, view_args, view_kwargs)
    ... 
```

> view_args is a list of positional arguments that will be passed to the view, and view_kwargs is a dictionary of keyword arguments that will be passed to the view.

so you should just be able to grab it from there, something like:

```
def process_view(self, request, view_func, view_args, view_kwargs):
    company = view_kwargs.get('company', None) 
```

Here's some more info from the django book on how the named and unnamed groups in your urls translate to args and kwargs in your view:

[http://www.djangobook.com/en/1.0/chapter08/#cn38](http://www.djangobook.com/en/1.0/chapter08/#cn38)

particularly

> This [named url groups] accomplishes exactly the same thing as the previous example, with one subtle difference: the captured values are passed to view functions as keyword arguments rather than positional arguments.

# objective-c - 获取向量中的所有点（两点之间）

> ID：11775443
> 
> 赞同：3
> 
> 时间：2012-08-02T10:16:17.683
> 
> 标签：objective-c, cocoa, opengl

假设我有 2 个点 (x1,y1) 和 (x2,y2)。我可以从点 (x1,y1) 到点 (x2,y2) 绘制矢量。如何以例如每 10 个像素获得它们之间的所有可能点？

简单的可视化：
![在此处输入图像描述](../Images/07caa4b2687752ac66dbf87404712207.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T10:21:32.097

点 A 和点 B 之间的向量是 BA (x2-x1, y2-y1) 如果你对该向量进行归一化，并将它乘以你想要的因子（看起来你想要一个 10px 的距离，所以你的因子是 10） ，您可以通过将其添加到当前点（最初是原点A）来获得所有点，直到到达终点B。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:23:29.230

您可以采取较小的 stepVector 并逐步添加他。

伪代码：

```
stepVector = yourVector / 10
Point1 = basePoint + stepVector
Point2 = Point1 + stepVector
... 
```

或者什么线

```
stepVector = yourVector / 10
Point1 = basePoint + stepVector
Point2 = basePoint + (stepVector * 2)
Point3 = basePoint + (stepVector * 3)
... 
```

# php - Nginx 配置文件没有找到我的 Codeigniter/PHP 应用程序

> ID：11775445
> 
> 赞同：1
> 
> 时间：2012-08-02T10:16:40.897
> 
> 标签：php, codeigniter, nginx, app-config, server-configuration

我不知道如何让 Nginx 配置文件找到我的 Codeigniter 应用程序。如果我将 php 文件放在我的根目录中，则在此服务器上提供 PHP 不是问题 b/c，我可以`echo "hello world";`.

这是我的 Nginx 配置文件，它几乎是[本教程](http://johanndutoit.blogspot.com/2012/04/setup-nginx-for-codeigniter-on-ubuntu.html)的逐字记录。请注意，我已经操纵了许多这些参数，但没有一个有效果，所以我想知道是否需要超越这个文件才能让它工作？：

```
server {
    listen   80;
    server_name www.mysite.com mysite.com;
    root   /var/www;
    index index.html index.php index.htm;
    access_log /var/log/nginx/access.log; 
    error_log /var/log/nginx/error.log;  

    location / {
      try_files $uri $uri/ /index.php;
    }

    location ~* \.php$ {
      fastcgi_pass 127.0.0.1:9000;
      fastcgi_index index.php;
      fastcgi_split_path_info ^(.+\.php)(.*)$;
      include fastcgi_params;
      fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    }
} 
```

我一直在想这是一个简单的路径问题 b/c Codeigniter 的路由结构有些混乱，但我的配置看不到问题。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:33:14.193

最上面的一切都与我为 CI 项目所拥有的相匹配，那么这是我的位置配置：

```
location ~ \.php$ {
   include /etc/nginx/fastcgi_params;
   fastcgi_pass   127.0.0.1:9000;
   fastcgi_index  index.php;
   fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;
} 
```

不确定通过删除通配符 * 是否会有所帮助，或者摆脱 split_info 参数...

# gwt - 使用 UiBinder 定义 GWT CellTables

> ID：11775447
> 
> 赞同：9
> 
> 时间：2012-08-02T10:16:42.250
> 
> 标签：gwt, uibinder, celltable, gwt-celltable

如果我在 MyView.ui.xml UiBinder 文件中定义我的 CellTable，如下所示：

```
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
xmlns:g='urn:import:com.google.gwt.user.client.ui'
xmlns:c="urn:import:com.google.gwt.user.cellview.client"
ui:generateFormat='com.google.gwt.i18n.rebind.format.PropertiesFormat'
ui:generateKeys='com.google.gwt.i18n.rebind.keygen.MD5KeyGenerator'
ui:generateLocales='default' xmlns:p1="urn:import:com.google.gwt.user.cellview.client">
        ...
    <g:HTMLPanel>           
      <c:CellTable
        addStyleNames='{style.cellTable}'
        pageSize='15'
        ui:field='cellTable' width="100%">  
       </c:CellTable>           
    </g:HTMLPanel> 
```

然后以编程方式将列添加到 CellTable，一切正常。

但为了减少样板代码，我还想在我的 UiBinder 文件中定义表列。我试过这个：

```
 ...
    <g:HTMLPanel>           
      <c:CellTable
        addStyleNames='{style.cellTable}'
        pageSize='15'
        ui:field='cellTable' width="100%">  
            <c:TextColumn 
                addStyleNames='{style.titleColumn}'
                ui:field="titleColumn"/>
       </c:CellTable>           
    </g:HTMLPanel> 
```

但它会产生以下错误：

> [错误] [方言] - 发现意外的子元素元素 addStyleNames='{style.titleColumn}'ui:field='titleColumn'> (:33)

如何使用 UiBinder 定义整个 CellTable？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T18:08:47.700

显然，在第二个清单中，您尝试将列添加为子对象。单元格表不直接接受孩子（意味着没有 addChild(...) 方法）。

如果您有固定数量的列并且想要使用 UIBinder，请考虑仅使用 HTML 表格。在这种情况下，您将拥有 XML 文件中的所有列，但该表将变得更难使用 - HtmlElement 而不是 Widget。

```
<table ui:field="table">
    <col ui:field="firstColumn" class="{style.firstColumn}">
    <col ui:field="secondColumn"  class="{style.secondColumn}">
    ...
</table> 
```

代码可能如下所示

```
... 
@UiField
private TableColElement firstColumn;

@UiField
private TableColElement secondColumn; 
```

但是对表的所有其他操作都将通过 DOM。像 table.appentChild(rowElement)。我认为这样做不值得。

# sql-server - SQL Server 西里尔文写作 '?????'

> ID：11775455
> 
> 赞同：2
> 
> 时间：2012-08-02T10:17:06.540
> 
> 标签：sql-server, database, sql-server-2008

我正在运行 SQL Server 2008 R2，并且我有一个包含多语言单词的数据库。

对于西里尔字母，我只看到 '???????'

数据类型是 nvarchar(255)，集合是 SQL_Latin1_General_CP1_CI_AS（这是我的默认值）

我不知道我还能做什么，知道吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T10:19:18.770

向 nvarchar 列添加数据时，使用前缀 N

```
Insert into table(nvarchar_col)
select N'your Cyrillic words' 
```

# jquery - Jquery Accordion 菜单问题 - 用户可以打开多个答案

> ID：11775457
> 
> 赞同：0
> 
> 时间：2012-08-02T10:17:29.583
> 
> 标签：jquery

我创建了一个 jquery 幻灯片菜单，但目前该菜单允许用户在任何时候打开多个答案 - 理想情况下，我希望任何时候只打开一个。有谁知道如何做到这一点？任何帮助将非常感激。

这是我的例子：http: [//jsfiddle.net/XMLgz/](http://jsfiddle.net/XMLgz/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:23:27.917

```
$('.info').hide();

$(".faqSubhead").click(function() {
    var $body = $(this).next(".info")
    $('.info').slideUp('fast');
    if ($body.is(":hidden")) {
        $body.slideDown('fast');
    }
}); 
```

只需在函数中滑动所有 .info 元素并向下滑动选定元素。

见[http://jsfiddle.net/XMLgz/8/](http://jsfiddle.net/XMLgz/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:21:03.020

编辑：压缩了一点..

```
$(".faqSubhead").click(function() {
    $('.info').slideUp('fast');
    $(this).next(".info").slideDown('fast');
}); 
```

​也许？

# python - 从字符串到类型的词法转换

> ID：11775460
> 
> 赞同：43
> 
> 时间：2012-08-02T10:17:38.637
> 
> 标签：python, casting

最近，我尝试在 Python 中存储和读取文件中的信息，遇到了一个小问题：我想从文本文件中读取类型信息。从字符串到 int 或到 float 的类型转换非常有效，但是从字符串到类型的类型转换似乎是另一个问题。自然，我尝试了这样的事情：

```
var_type = type('int') 
```

但是，`type`不用作强制转换，而是用作查找变量类型的机制，实际上就是`str`在这里。

我找到了一种方法：

```
var_type = eval('int') 
```

但我通常会尽量避免使用`eval`或尽可能避免使用函数/语句`exec`。所以我的问题如下：是否有另一种pythonic（更具体的）方法将字符串转换为类型？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2015-04-23T18:29:29.457

我喜欢使用`locate`，它适用于内置类型：

```
>>> from pydoc import locate
>>> locate('int')
<type 'int'>
>>> t = locate('int')
>>> t('1')
1 
```

...以及它可以在路径中找到的任何内容：

```
>>> locate('datetime.date')
<type 'datetime.date'>
>>> d = locate('datetime.date')
>>> d(2015, 4, 23)
datetime.date(2015, 4, 23) 
```

...包括您的自定义类型：

```
>>> locate('mypackage.model.base.BaseModel')
<class 'mypackage.model.base.BaseModel'>
>>> m = locate('mypackage.model.base.BaseModel')
>>> m()
<mypackage.model.base.BaseModel object at 0x1099f6c10> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-02T16:19:03.743

你对你想要做什么有点困惑。类型，也称为类，是对象，就像 python 中的所有其他东西一样。当您编写`int`程序时，您引用了一个名为的全局变量`int`，它恰好是一个类。您要做的不是“将字符串转换为类型”，而是按名称访问内置变量。

一旦你理解了这一点，解决方案就很容易看到了：

```
def get_builtin(name):
    return getattr(__builtins__, name) 
```

* * *

如果您*真的*想将类型名称转换为类型对象，请按照以下步骤操作。我曾经`deque`在没有递归的情况下进行广度优先树遍历。

```
def gettype(name):
    from collections import deque
    # q is short for "queue", here
    q = deque([object])
    while q:
        t = q.popleft()
        if t.__name__ == name:
            return t
        else:
            print 'not', t

        try:
            # Keep looking!
            q.extend(t.__subclasses__())
        except TypeError:
            # type.__subclasses__ needs an argument, for whatever reason.
            if t is type:
                continue
            else:
                raise
    else:
        raise ValueError('No such type: %r' % name) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-02T15:58:51.447

为什么不直接使用查找表？

```
known_types = {
    'int': int,
    'float': float,
    'str': str
    # etc
}

var_type = known_types['int'] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-02T11:04:40.317

也许这就是你想要的，它只查看内置类型：

```
def gettype(name):
    t = getattr(__builtins__, name)
    if isinstance(t, type):
        return t
    raise ValueError(name) 
```

# javascript - jQuery Mobile -- 事件绑定

> ID：11775461
> 
> 赞同：0
> 
> 时间：2012-08-02T10:17:44.197
> 
> 标签：javascript, events, jquery-mobile, bind

我试图让 jQuery-Mobile 每次显示页面时执行一段代码。但是，该页面是由未设置 ID 的底层框架自动生成的。这意味着我可以控制 javascript 但不能控制页面生成。因此，我使用 $.mobile.activePage 绑定事件 pageshow 没有成功。为什么这不起作用，解决方案是什么？谢谢。

`$.mobile.activePage.bind('pageshow', function() { alert('message'); }`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:27:20.977

收听“pagechange”事件。您可以从事件中获取`fromPage`和获取。`toPage``pagechange`

```
$(document).off('pagechange');
$(document).on('pagechange', function (e, ui) {
    //triggers on page change
    console.log('from page: %o', ui.options.fromPage);
    console.log('to page: %o', ui.toPage);
}); 
```

# algorithm - 检查同一圆上的两个线段是否重叠/相交

> ID：11775473
> 
> 赞同：6
> 
> 时间：2012-08-02T10:18:40.500
> 
> 标签：algorithm, language-agnostic, geometry, 2d, angle

给定同一个圆的两个圆段：A=[a1, a2] 和 B=[b1, b2]，其中：

*   a1, a2, b1, b2 值在 -inf 和 +inf 之间
*   a1 <= a2 ; b1 <= b2
*   a2-a1<=360; b2-b1<=360

我怎样才能知道这两个圆段是否重叠？（即如果它们至少在一点相交或接触）

例子：

```
A=[  -45°,    45°]; B=[   10°,   20°] ==> overlap
A=[  -45°,    45°]; B=[   90°,  180°] ==> no overlap
A=[  -45°,    45°]; B=[  180°,  360°] ==> overlap
A=[ -405°,  -315°]; B=[  180°,  360°] ==> overlap
A=[-3600°, -3601°]; B=[ 3601°, 3602°] ==> overlap (touching counts as overlap)
A=[ 3600°,  3601°]; B=[-3601°,-3602°] ==> overlap (touching counts as overlap)
A=[    -1°,    1°]; B=[ 3602°, 3603°] ==> no overlap 
```

这看起来像是一个看似简单的问题，但我无法理解它。我目前有一个解决方案的基本想法，如果每个部分超过 0°，则将其分成两部分，但我不确定这是否涵盖所有情况，我想知道是否有一个优雅的公式。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T12:00:47.650

正如@admaoldak 提到的，首先标准化度数：

```
a1_norm = a1 % 360
a2_norm = a2 % 360
b1_norm = b1 % 360
b2_norm = b2 % 360 
```

现在检查 b1 是否在 (a1,a2) 内，

```
def intersect(b, as, ae
    Intersect = False
    If as > ae:
        if b >= as or b <= ae:
            return True
    Else:
        if b>=as and b<=ae:
            return True
    return False 
```

最终答案是：

```
intersect(b1_norm,a1_norm,a2_norm)||intersect(b2_norm,a1_norm,a2_norm)||
intersect(a1_norm,b1_norm,b2_norm)||intersect(a2_norm,b1_norm,b2_norm) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T12:04:27.017

对于区间 [iX , iY] ，让我们定义归一化**i_norm = normalize(i)** 以便：

```
1\. 0 <= i_norm.X < 360
2\. i_norm.X <=i_norm.Y 
```

然后我们定义另一个操作**i_slide = slide(i)**以便：

```
1\. i_slide.X = i.X + 360
2\. i_slide.Y = i.Y + 360 
```

我们可以证明，对于您的输入**A**和**B**，当且仅当**A** *圆*与**B重叠：**

> **normalize(A)** 与**normalize(B)的***区间重叠*
> 
>  **或者
> 
> **归一化（A）** 与**幻灯片的***间隔重叠（归一化（B））***

 *****间隔重叠*的定义方式与 adamoldak 帖子中的“交叉点”相同。

而且**normalize()**和**slide()**操作都很容易实现。

以你的例子：`A=[-45°,45°]; B=[10°,20°]` ，我们有

```
normalize(A) = [315,405] 
normalize(B) = [10,20] 
slide( normalize(B) ) = [370,380] 
```

和 [315,405] 与 [370,380]的*区间重叠*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-12T07:38:44.483

我在循环地图中重叠矩形的游戏引擎也有类似的问题。我已经考虑了很多，并查看了你们中的一些人的答案。如果你正在寻找性能，这是你能得到的最好的（直到有人证明我错了：P）：

```
#assume the angles are already normalised
def overlap(a1, a2, b1, b2):
  if a2 - a1 + b2 - b1 > 360: #must overlap
    return True
  return (b1 > a2) ^ (b2 > a1) ^ (a2 < a1) ^ (b2 < b1) 
```

优雅的。优雅又丑陋。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-02T10:44:57.507

如何将每个度数标准化为 0-360：

```
a1_norm = a1 % 360
a2_norm = a2 % 360
b1_norm = b1 % 360
b2_norm = b2 % 360 
```

然后你只需检查交叉点：

```
(a1_norm <= b2_norm) and (a2_norm<= b1_norm) 
```****

# php - 将 Google 电子表格转换为 HTML 表格

> ID：11775476
> 
> 赞同：3
> 
> 时间：2012-08-02T10:18:49.803
> 
> 标签：php, javascript, html, google-docs

我有一个 Google 电子表格，其中包含每周更新的数据。我需要将这些数据放入我网站上的 HTML 表格中。

不是每次都通过 CSV 到 HTML 转换器运行它并且每次都必须更新 HTML 代码，有没有办法让我使用 PHP 或 Javascript 来查找 Google 电子表格 URL 并将数据转换为 HTML 表格标签而无需我每次都需要修改代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:21:55.973

您可能对[GD API](https://developers.google.com/google-apps/documents-list/#downloading_documents_and_files)感兴趣（[关于电子表格](https://developers.google.com/google-apps/documents-list/#downloading_spreadsheets)的描述）。

默认下载格式为 html。每天使用 CRON 编写一个脚本并运行一次，以提取最新版本的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T10:23:43.570

打开电子表格，转到文件 > 下载为 > 网页（.html，当前工作表）

那应该在新窗口中打开一个链接。当您在编辑数据后重新加载页面时，这应该会自动更新。在 jQuery 中，您可以使用 .load 函数将数据加载到您的页面中。

# dojo - Dojo：异步 xhrGet 返回 - 未定义？

> ID：11775477
> 
> 赞同：0
> 
> 时间：2012-08-02T10:18:52.567
> 
> 标签：dojo

我写了一个函数来检索像这样的各种咏叹调的所有数据..

```
 function retrieveData(dom_sclapi) { 
        var apiResponse; 
        dojo.xhrGet({ 
                url : dom_sclapi, 
                handleAs: handle, 
                //sync: true, 
                headers: { "Accept": "application/json" }, 
                preventCache: true, 
                //Success 
                load: function(Response) { 
                        apiResponse = Response; 
                }, 
                // Ooops!  Error! 
                error: function(Error, ioArgs) { 
                        //apiResponse = Error; 
                        //console.log(ioArgs.xhr.status); 
                } 
        }); 
        //apiResponse 
        return apiResponse; 
    } 
```

但是 apiResponse 在 sync = false 状态下返回一个未定义的状态（这里当我评论同步属性时）。它仅在 sync = true 时返回正确的数据输出。因此，由于 chrome 和 IE 会阻止同步调用的所有其他操作，因此这会导致 chrome 和 IE 在加载样式时出现问题。

我该如何克服这种情况？我的代码的实际问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T11:26:50.120

您需要更好地掌握同步和异步代码背后的理念。

这正是它返回的情况`undefined`，因为它没有同步并且值还不可用。当你设置为同步时，其余代码执行将等待函数返回，否则你让代码继续执行而不等待结果。

当你编写异步代码时，你不应该期望它在下一行代码中返回一个值，因为它很可能不会。相反，您应该在返回值可用时创建事件或回调。在`load:`这种情况下是一个回调，当请求收到响应时。

另请参阅有关[Deferred](http://dojotoolkit.org/reference-guide/1.7/dojo/Deferred.html)对象的文档。它们也在[xhrGet中进行了描述](http://dojotoolkit.org/reference-guide/1.7/dojo/xhrGet.html#dojo-xhrget)

因此，您上面的代码可能会变成这样。

```
function retrieveData(dom_sclapi, callback) { 
        // Will return Deferred object
        return dojo.xhrGet({
                url : dom_sclapi, 
                headers: { "Accept": "application/json" }, 
                preventCache: true, 
                // Pass callback function to do something with response
                load: callback,
                error: function(Error, ioArgs) { 
                        //console.log(ioArgs.xhr.status); 
                } 
        }); 
    }
// Or get data by deferred object
retrieveData(url, null).then(function(Response){ /* Do something with response */ })
// Via callback
retrieveData(url, function(Response){ /* Do something with response */ }); 
```

# java - 如何在 FTP 文件传输期间找出我的文件位置

> ID：11775479
> 
> 赞同：0
> 
> 时间：2012-08-02T10:19:10.520
> 
> 标签：java, ftp

我用过这段代码

```
import org.apache.commons.net.ftp.FTPClient;
import java.io.FileInputStream;
import java.io.IOException; 
public class FTPClientExample {
    public static void main(String[] args) {
        FTPClient client = new FTPClient();
        FileInputStream fis = null;

        try {

            client.connect("hostname");
            client.login("user", "pwd");
            String filename = "D:\\Task\\try.txt";
            fis = new FileInputStream(filename);
            client.storeFile(filename, fis);
            client.logout();

        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (fis != null) {
                    fis.close();
                }
                client.disconnect();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

当我运行它时，我完成了消息任务。但我找不到我应该在哪个文件夹中查找文件。有人请帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:27:45.207

您正在尝试在路径上上传`D:\\Task\\try.txt`。我猜那是您的源文件路径。你应该写类似

```
client.storeFile(ftpPath + filename, fis); 
```

其中 ftpPath 应该是您要上传文件的 FTP 服务器位置。

编辑:: 文件路径结构

```
ftp://"+username+":"+password+"@"+ip+"/"+dir+"/"+fileName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:36:08.067

好的改变

`String filename = "D:\\Task\\try.txt";`
你**的 linux 用户名** 在`String filename = "/home/user_name/Desktop";`哪里.. 试试看，文件应该在你的**桌面**上，记住**linux 是区分大小写**的。`user_name`

 ******在linux的情况下，路径`String filename = "D:\\Task\\try.txt";`更改为`String filename = "/media/your_drive_name/try.txt";`

[这里](http://www.thegeekstuff.com/2010/09/linux-file-system-structure/)是linux目录结构的解释。******

# javascript - js iframe 关闭按钮

> ID：11775481
> 
> 赞同：1
> 
> 时间：2012-08-02T10:19:18.197
> 
> 标签：javascript, html, iframe

我有以下打开一个加载了html页面的iframe，效果很好，但是如何向页面/iframe添加一个关闭按钮，以便它简单地关闭iframe/页面并且不影响它打开的页面：

```
(function (d) {
var modal = document.createElement('iframe');
modal.setAttribute('src', 'mypage.html'));
modal.setAttribute('scrolling', 'no');
modal.className = 'modal';document.body.appendChild(modal);
var c = document.createElement('link');
c.type = 'text/css';
c.rel = 'stylesheet';
c.href = '//myurl.com/testes.css';
document.body.appendChild(c);
}(document)); 
```

我尝试了以下尝试关闭它的方法，但是随后在 iframe 中给出了 404 消息：

```
<a href="window.parent.document.getElementById('iframe').parentNode.removeChild(window.parent.document.getElementById('iframe'))">Close</a> 
```

如果有帮助，我将在页面上加载 jquery，这意味着，如果有 jquery 解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:20:54.260

链接应该链接到某个地方，并且该`href`属性需要一个 URI。

使用 a`<button type="button">`并将点击处理程序绑定到它。（你可以使用一个`onclick`属性，但这不会不[显眼](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)）

不引人注目的方法是：

```
<a href="someUriWithoutAnIframe" target="_parent">foo</a> 
```

然后沿线绑定一个事件处理程序

```
myLink.addEventListener('click', function (e) {
    var d = window.parent.document;
    var frame = d.getElementById('myFrame');
    frame.parentNode.removeChild(frame);
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:30:55.250

您可以将链接放入 iframe 的某种容器 div 中，使用以下结构创建后者：

```
<div id="iframe-container">
  <a href='#' onclick='this.parentNode.parentNode.removeChild(this.parentNode)'>Close</a>
  <iframe src="http://some.web/page.html" />
</div> 
```

无需任何框架即可工作。

# xml-parsing - 具有多个开始标签的 xml 解析

> ID：11775490
> 
> 赞同：0
> 
> 时间：2012-08-02T10:19:39.227
> 
> 标签：xml-parsing, ipad-2

我得到这样的回应

```
<NewDataSet>
    <Map>
        <URL>
           https://maps.google.co.in/maps?q=ABIL+House,+Ganeshkhind+Road,+Yashwant+nagar,+Pune,+Maharashtra&hl=en&sll=18.539118,73.834095&sspn=0.011169,0.021136&oq=ABIL+House&t=h&hnear=ABIL+House,+2,+Ganeshkhind+Rd,+Yashwant+nagar,+Pune,+Maharashtra+411007&z=16
       </URL>
    </Map>
</NewDataSet> 
```

我必须解析 url 值才能在 web 视图中显示。如何解析具有两个开始标签的 xml 文件，这是我的代码：

```
 - (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{ 
    if ([elementName isEqualToString:@"Result"])    { 
        item = [[NSMutableDictionary alloc] init]; 
        currentUser =[[NSMutableString alloc] init]; 
    } 
} 

 - (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{ 
    if ([elementName isEqualToString:@"Result"]) { 
        [item setObject:currentUser forKey:@"Result"]; 
        // [item setObject:currentPassword forKey:@"Name"]; 
        [users addObject:[item copy]]; 
    } 
} 

 - (void)parser:(NSXMLParser )parser foundCharacters:(NSString *)string
{ 
    if ([currentElement isEqualToString:@"Result"])  { 
            [currentUser appendString:string]; 
        } 
    /* if ([currentElement isEqualToString:@"Name"]) 
        { 
            [currentPassword appendString:string]; 
    }
    */ 
} 

 - (void)viewDidLoad 
{ 
        users = [[NSMutableArray alloc] init]; 
        NSURL *xmlURL = [NSURL URLWithString:@"http://abilcms.com.sv2.premiumwebserver.com/WebServiceStatus.aspx?UserID=demo@abil.com"];
        xmlParser = [[NSXMLParser alloc] initWithContentsOfURL:xmlURL]; 
        [xmlParser setDelegate:self]; 
        [xmlParser parse]; 
        NSLog(@"name=%@",currentUser); 
        statuslabel.text= currentUser; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:33:51.413

这是一个关于 ios 中 xml 解析的教程，展示了它是如何完成的。[http://theappcodeblog.com/2011/05/09/parsing-xml-in-an-iphone-app-tutorial](http://theappcodeblog.com/2011/05/09/parsing-xml-in-an-iphone-app-tutorial)

这是另一个访问[多级 XML 文档的教程](http://codesofa.com/blog/archive/2008/07/23/make-nsxmlparser-your-friend.html)

但据我所知，如果这是您的 XML 中唯一的 URL 标记，您应该将“Result”替换为“URL”，据我所知，NSXMLParser 会在这种情况下为您处理级别。当然，如果您需要访问此 XML 中的更多数据，您应该像第二个链接中的示例那样构建它。

# c# - FluentNHibernate 数据库部署

> ID：11775491
> 
> 赞同：0
> 
> 时间：2012-08-02T10:19:43.450
> 
> 标签：c#, fluent-nhibernate, database-migration

我正在考虑使用 FluentNHibernate 作为我的 ORM，但我想知道如何最好地编写数据库部署部分。我之前有过实体框架和代码优先迁移的经验，但我对 FluentNHibernate 很好奇，所以我在玩。我看过[FunnelWeb 博客](http://www.funnelweblog.com/)，但我还没有时间真正了解他们是如何做的，所以我在项目的一个非常具体的部分寻求一些帮助，我希望有人可以总结一下。

我的 Visual Studio 解决方案在以下程序集中分开（我将研究使用像[Autofac](http://code.google.com/p/autofac/)这样的 IoC ，但稍后会出现）：

```
Solution
    Domain Assembly
        DatabaseDeployment Namespace
        Model Namespace
    Web UI 
```

因此，在我的域程序集中，我希望有一个 DBMigrator 类，它的合同看起来像这样：

```
public interface IDBMigrator
{
    bool NeedsUpdating();
    void UpdateDatabase();
} 
```

现在，在我的 WebUI 程序集（这是一个 MVC3 项目）中，我想做类似以下的事情（在 global.asax 中）：

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();

    RegisterGlobalFilters(GlobalFilters.Filters);
    RegisterRoutes(RouteTable.Routes);

    var migrator = new DBMigrator();
    if (migrator.NeedsUpdating())
    {
        migrator.UpdateDatabase();
    }
} 
```

此迁移器将使用 .sql 脚本（因此我可以让我的数据库版本由 Subversion 控制）并且可能在数据库中有一个表，告诉我哪些脚本已针对架构执行，哪些脚本尚未执行。所以，总而言之，我想我的实际问题是：

1.  我是否在版本控制（和自动化）我的数据库部署的正确轨道上？
2.  我应该在什么时候检查（并应用）我的项目的架构更改，这真的应该是自动化的还是开发人员发起的？

我现在正在研究一些框架，例如[DbUp](http://code.google.com/p/dbup/)和[MigratorDotNet](http://code.google.com/p/migratordotnet/)，但在我为此采用框架之前，我想先把我的策略牢记在心。您如何处理数据库迁移？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:40:52.593

看看 FluentMigrator [http://nuget.org/packages/FluentMigrator](http://nuget.org/packages/FluentMigrator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T15:25:40.280

我找不到可以满足我要求的特定工具，因此我按照我的问题中的约定制作了自己的工具。如果其他人遇到这个并想使用它，他们可以从这里获取它：

[NuGet 包管理器链接](https://nuget.org/packages/Migrataur/1.1.0)

[用户指南](http://aldredbann.co.uk/articles/1/using-migrataur-database-migrations)

# python - 为什么 main() 函数没有在 if '__main__' 中定义？

> ID：11775494
> 
> 赞同：6
> 
> 时间：2012-08-02T10:20:13.480
> 
> 标签：python, main

你经常可以看到这个（变体a）：

```
def main():
   do_something()
   do_sth_else()

if __name__ == '__main__':
    main() 
```

我现在想知道为什么*不*这样（变体b）：

```
if __name__ == '__main__':
   do_something()
   do_sth_else() 
```

或者*至少*这个（变体c）：

```
if __name__ == '__main__':
    def main():
        do_something()
        do_sth_else()

    main() 
```

当然，里面的函数调用`main()`可能不是函数调用，它们只是代表你可能想要在你的`main()`函数中做的任何事情。

那么为什么人们更喜欢变体a而不是其他人呢？它只是风格/感觉还是有一些真正的原因？如果可能，还请链接来源。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T10:22:51.533

为什么将您的`main()`功能仅限于命令行使用？

通过在模块范围内定义一个`main()`函数，您现在可以包装您的脚本并更改它的调用方式。也许您想在 sys.argv 中设置默认参数，也许您想在另一个脚本中重用代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T10:23:27.527

这是因为有两种使用 Python 脚本的方法。一个来自命令行，另一个来自另一个脚本。当你从命令行运行它时，你想运行`main()`函数，当你导入它时，你可能不想运行`main()`函数，直到你需要它（你只想导入`main()`）。

# c++ - 如何使用 Daffodil 将旧的 VC6 项目移动到 VS2010

> ID：11775496
> 
> 赞同：2
> 
> 时间：2012-08-02T10:20:14.970
> 
> 标签：c++, visual-studio-2010, visual-c++-6

[最近对这个](http://daffodil.codeplex.com/)项目很感兴趣。我有一个用 VC6 制作的旧项目，我听说它是​​一个很棒的 IDE，但在我的机器上运行不顺畅。我也不知道如何使用它。全面迁移到 2010/12 项目需要花费大量时间，所以我想知道：

1.  有人可以分享一些有关如何使用此工具的基本信息吗？我一直在搜索，找不到比该网站更全面的内容。

2.  我需要哪些特定的旧 VC6 工具来确保为 Daffodil 工作？（编译器、链接器等）它们位于已安装机器上的什么位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T04:20:11.617

在 VS 2010 中构建您的项目：

1.  确保 VC 6 构建工具已安装并正常工作。
2.  确保 VS 2010 和 Daffodil 已安装并正常工作。
3.  在 VS 2010 中打开 VS 6 工作区。
    A. 在资源管理器中，右键单击 VS 6 工作区 (*.dsw) 文件。
    B. 选择打开方式 -> Microsoft Visual Studio 2010。
    C. 出现提示时执行迁移。
4.  将平台工具集更改为 v60。
    A. 右键单击​​项目并选择属性。
    B. 在 General 页面上，将 Platform Toolset 设置为 v60。
5.  建造。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:17:57.137

快速阅读告诉我，“Daffodil”的概念是在 VS2010 IDE 中使用 VC6 编译器。因此，您不会在您的机器上运行 VS6。您只需要 VC6 编译器和链接器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:40:25.447

首先让 Vs2012 迁移项目，看看哪些地方不能正常工作。较新的编译器要好得多——一旦您经历了转换的痛苦。

# wpf - 无法在 WPF MVVM 应用程序中动态设置焦点

> ID：11775498
> 
> 赞同：2
> 
> 时间：2012-08-02T10:20:31.483
> 
> 标签：wpf, mvvm, focus

我正在使用 MVVM 模式开发 WPF 应用程序，但我遇到了焦点问题。

我在“叠加层”上有全屏幻灯片，在每个叠加层中我都有一个 ContentPresenter，用于通过数据绑定显示任意视图模型/视图，它的内容是我在数据上下文中设置的视图模型属性，如下所示：

```
<Grid Name="OverlayContainer"
      FocusManager.IsFocusScope="True"
      KeyboardNavigation.TabNavigation="Cycle"
      IsEnabled="False">

  <Grid.RenderTransform>
    <TranslateTransform x:Name="OverlayContainerTransform"
                        X="{Binding ElementName=OverlayContainer, Path=ActualWidth}" 
                        Y="0"/>
  </Grid.RenderTransform>

  <ContentPresenter x:Name="OverlayContent" Content="{Binding Path=OverlayViewModel"/>

</Grid> 
```

*然后，我可以在需要时将OverlayViewModel*属性动态设置为各种视图模型，并使用数据模板让 WPF 自动显示相关视图模型的正确视图：

```
<DataTemplate DataType="{x:Type ViewModels:AuthorisatonViewModel}">
    <Views:AuthorisatonView/>
</DataTemplate> 
```

当我更改视图模型并在叠加层上滑动时，我将焦点范围设置为叠加焦点范围（我似乎可以使用 OverlayContainer.Focus 完成），但我遇到的问题是我似乎无法让键盘焦点转到相关视图上的第一个可聚焦元素，无论它可能是什么。

我以为我在[这里](http://julmar.com/blog/mark/?p=50)找到了我需要的东西，但是当使用此代码遍历可视化树时，似乎将 ContentPresenter （*OverlayContent*）传递给 VisualTreeHelper.GetChildrenCount() 时它没有返回任何子级，因此它无法向下动态视图中的元素。

我还尝试将*OverlayContainer*设置为活动焦点范围，然后调用：

```
OverlayContainer.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next)) 
```

但这也没有用。

我试图显示的所有视图中至少有 1 个可聚焦、可见、启用的元素。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:46:58.720

看起来 Rachel 是第一个 - 原来是视图还没有渲染，所以子视觉元素还不可用。像这样调用我的调焦器：

```
// Focus on first child element only once rendered
this.OverlayContainer.Dispatcher.BeginInvoke(DispatcherPriority.Render,
                                             new Action<FrameworkElement>(Focuser.FocusOnFirstFocusableChild),
                                             this.OverlayContainer); 
```

允许我访问所有子视觉元素并相应地设置焦点。

# razor - Tridion 用户界面 2012 - 创建页面/插入内容时找不到 Razor 助手

> ID：11775502
> 
> 赞同：10
> 
> 时间：2012-08-02T10:20:41.437
> 
> 标签：razor, tridion, tridion-2011, razor-mediator

我正在使用 Tridion 2011 SP1 和 Razor 模板，但在通过用户界面 2012 创建页面和插入内容时遇到问题。当我尝试这样做时，我的 Razor 助手、命名空间和程序集出现在 Tridion.ContentManager.config 文件中不要被包括在内。

我尝试直接在 razor 模板中添加对助手的引用，一切正常，但我不想在每个 Razor 模板中都这样做。

当我尝试通过 UI 创建页面时，出现以下 Razor 错误：

```
TemplateCompileException: CS0103: The name 'GetBreadcrumbStatus' does not exist 
in the current context Line 64 Column 21: if(GetBreadcrumbStatus()) 
```

我的 Tridion.ContentManager.config 文件包含 Razor 调解器的以下内容：

```
<razor.mediator cacheTime="600" extractBinaries="true">
 <namespaces>
  <add namespace="Tridion.Extensions.Mediators.Razor.Models" /> 
  <add namespace="System.Linq" />
 </namespaces>
 <imports>
  <add import="C:\Program Files (x86)\Tridion\Razor Mediator\Helpers\GeneralHelper.cshtml" />
 </imports>
</razor.mediator> 
```

关于为什么 UI 不包含帮助程序和命名空间的任何想法，除非在 Razor 模板中直接引用？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T11:07:21.287

## 会话预览机制的一些背景知识

新的 UI 为其会话预览机制使用了一种特殊类型的发布者，该机制优化了发布过程，以获得人们在这种环境中所期望的“近乎实时”的行为。优化的发布者通过跳过某些步骤来实现这一点，其中之一是减少解析过程（因此发布的项目更少）并且不调用自定义解析器。

## 关于你的问题

创建新页面时是否调用了 Razor 模板？

# classification - 朴素贝叶斯分类器的准确性？

> ID：11775505
> 
> 赞同：0
> 
> 时间：2012-08-02T10:20:47.447
> 
> 标签：classification, naivebayes

我们可以使用朴素贝叶斯分类器的准确率百分比来检查分类器的准确度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:26:42.960

通常在机器学习中，人们会查看特异性与敏感性来访问分类器的性能。[http://en.wikipedia.org/wiki/Sensitivity_and_specificity](http://en.wikipedia.org/wiki/Sensitivity_and_specificity)

由于通常在真阳性、假阳性、真阴性和假阳性之间进行权衡，因此确定在您正在查看的特定应用程序中更重要的是什么是很重要的。

这与交叉验证和可能对随机化决策变量的数据集的预测相结合，应该可以让您了解您的分类器有多好。

请记住，没有预测器性能的简单答案。例如，您想对一个数据集进行分类，其中 99 个样本属于 A 类，其中 1 个属于 B 类。构建分类器以将所有示例分类为 A 将具有 99% 的灵敏度，但仍然不是非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T00:14:42.163

这是您可以使用的另一个建议。在信息检索中，F-score是一种常用的评价标准，其中F-score包含两个因素。1\. 召回率 = tp / (tp + fn) 2\. 精度 = tp / (tp+fp)

（tp = 真阳性...等）

F-score = (2*recall*presicion) / (recall + Precision)

正如约翰所说，评价标准因情况而异。例如，在多标签问题中，有些可能还会考虑 Hamming Loss 或 Ranking Loss。我认为在大多数单标签情况下，F-score 是最受欢迎的。

# c# - System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection

> ID：11775513
> 
> 赞同：3
> 
> 时间：2012-08-02T10:21:16.257
> 
> 标签：c#, asp.net, entity-framework, web-config

当我调试我的项目时，有 5 条消息（例如：找不到元素 'entityFramework'.Web.config 的架构信息）并且应用程序不起作用（错误：找不到请求的 .Net Framework 数据提供程序。它可能没有安装。）。

网络配置：

```
<configuration>
  <configSections>
   <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.3.1.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </configSections>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <customErrors mode="Off" />
    <authentication mode="None" />
  </system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="Data Source=.\SQLEXPRESS ; Integrated Security=True; MultipleActiveResultSets=True" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
  <connectionStrings>
    <add name="HistoryContainer" connectionString="metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl;provider=System.Data.SqlServerCe.4.0;provider connection string=&quot;data source=|DataDirectory|\Database1.sdf&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

并且对象“System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection”不存在。我应该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T04:30:26.990

我有一个类似的错误，我已经摆脱了它。然而，我的 web 配置引用了 4.4 的版本（不是你所拥有的 4.3.1），据我所知不存在。这是在我从某个地方或其他地方获取带有 MVC4 的 WebAPI 的入门包之后出现的。

自 2012 年 8 月起，V4.3.1 和现在的 V5.0 预发行版确实存在

我使用解决方案级别“库包管理器”获得了 4.3.1 的 nuget 包。这是一个重要的步骤，因为我可以选择将其应用于哪些项目。

在此过程中，我的 Web 配置已更改（参考 4.3.1）并且问题消失了。

让我烦恼的是对“System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection”的引用，因为我找不到它存在的位置，但至少 VS 不再抱怨了。

# kendo-ui - 如何从 KendoUI Grid 中的列模板访问列名？

> ID：11775515
> 
> 赞同：1
> 
> 时间：2012-08-02T10:21:19.773
> 
> 标签：kendo-ui, kendo-template

将 KendoUI Grid 与列模板一起使用时出现以下问题：

我的一行数据如下所示（简化）：

```
{ Name: 'name', Statuses: [ {Name: 'StatusA', Value: 'ValueA'} , {Name:'StatusB', Value: 'ValueB'}] } 
```

因此，在每一行数据上，我都有一个状态名称-值集合列表。我有许多以状态名称命名的列（每个状态一个）：StatusA、StatusB 等。

在列模板中，我想根据列名放置状态值。我可以访问模板中的 data.Statuses 并获取状态值，但模板不知道正在呈现哪一列。

有什么方法可以访问模板中的列名或将其作为参数发送？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T02:52:40.473

您可以在模板中包含一个 javascript 函数，如下所示：

```
{title:"StatusA", field:"Status1", template: "#= formatStatus(data.Statuses[0]) #" },
{title:"StatusB", field:"Status2", template: "#= formatStatus(data.Statuses[1]) #"} 
```

这是帮助我发现这一点的文章：

[http://www.kendoui.c​​om/forums/ui/grid/grid-cell-template-for-image-with-javascript-selector.aspx](http://www.kendoui.com/forums/ui/grid/grid-cell-template-for-image-with-javascript-selector.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T16:41:13.030

不幸的是，你不能。我已经断断续续地寻找这个好几个星期了。我终于变聪明了，在模板执行中的 JS 中做了一个 console.log(this)，可以看到模板函数签名。唯一的参数是“数据”，它包含您的整个数据模型的行。

Telerik 的建议是创建一个行模板。这意味着如果您允许隐藏或重新排序列，则在行模板中处理它们成为您的责任，而列模板不必关心这些。如果您想要备用行样式，您还必须提供备用行模板（可能仅因类/样式而异）；再次是列模板不必担心的事情。

恕我直言，这是 Telerik 的疏忽。

# asp.net - 如何在中心设置 DropdownList 第一个元素文本并保持 Rest 左对齐？

> ID：11775517
> 
> 赞同：1
> 
> 时间：2012-08-02T10:21:22.660
> 
> 标签：asp.net, drop-down-menu, text-alignment

我有一个 asp 下拉列表，我将“选择选项”作为下拉列表中的第一个元素。下拉列表中的所有元素（包括第一个）都会自动左对齐。如果我将 text-align 设置为居中，则所有列表项都将居中对齐，这是我不想要的。我只需要在中心设置下拉菜单的第一个元素（标题）。怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:31:17.090

您可以在页面加载时将 CSS 类添加到下拉列表中的第一项：

```
test.Items[0].Attributes["class"] = "header"; 
```

然后，您可以将特定样式应用于 CSS 文件中的“标题”类。

# sharepoint - 模态窗口 sharepoint 2010 将焦点设置在按钮控件上

> ID：11775518
> 
> 赞同：0
> 
> 时间：2012-08-02T10:21:23.673
> 
> 标签：sharepoint, focus, tabindex, modal-window

我正在尝试将焦点设置在模式窗口的按钮上（即打开一个新页面）。我面临的问题是，如果我只使用键盘在网页中导航，它会在最大化按钮处停止，而不是回到它开始的位置。你能告诉我如何为控件设置索引吗？我在模态窗口上有以下控件。动态填充文本的标签。数字单选按钮是动态创建的 在模态窗口中有一个按钮可以加载下一页。

所以我的问题是如何将焦点设置在此按钮上，并保持选项卡索引从按钮开始通过所有控件旋转，然后再到开始，所有这些都在模式窗口内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:25:01.020

首先，欢迎来到 Stackoverflow！

焦点问题的解决方案非常简单，您应该在其中打开对话框本身的代码隐藏文件，然后在 Page_Load 事件中简单地键入：

`buttonId.Foucs()`

'buttonId' 当然是你的按钮的 id。

大多数控件都有名为*TabIndex*的属性，因此您可以将其添加到每个输入并确定按 Tab 键时的顺序。

# android - Eons类在android中被调用？

> ID：11775525
> 
> 赞同：0
> 
> 时间：2012-08-02T10:22:01.487
> 
> 标签：android, linux

android中有一个内部API类**Eons**。谁能知道这个类什么时候被调用

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T11:09:49.057

如果你想知道什么是 Eons -

> Eons 是“增强型运算符名称字符串”的缩写。似乎与漫游有关。刚刚在设置中看到我激活了“漫游时连接到数据服务”检查。

如果你想看看它什么时候被调用 - 你可以做的是下载[AOSP](http://source.android.com/)，构建它，运行它，然后在[Eons 类中放置断点](https://www.codeaurora.org/git/projects/ag-gb-dsds-7227/repository/revisions/3c2d241d96579e6a54af1a86213a3babf5061148/entry/frameworks/base/telephony/java/com/android/internal/telephony/gsm/Eons.java)

# xml - 如何在保留 HTML 标记的同时修剪 XSL 中的 XML 提要？

> ID：11775528
> 
> 赞同：0
> 
> 时间：2012-08-02T10:22:44.173
> 
> 标签：xml, xslt, xml-parsing

我有新闻报道的 RSS 提要。我想显示标题和故事的前 350 个字符，并带有指向完整故事的链接。但是，如果第 350 个字符位于 HTML 标记的中间（即`<img ...`，甚至`<h2>`），我的输出 HTML 会中断并且链接将不起作用。这是我的 XSL

```
<xsl:output method="html" omit-xml-declaration="yes"/>
<xsl:template match="/">
<div>
<xsl:for-each select="//rss/channel/item">
<h2><xsl:value-of select="title" disable-output-escaping="yes"/></h2><br />
<xsl:value-of select="substring(description, 1, 350)" disable-output-escaping="yes"/><xsl:text>...</xsl:text>
<a><xsl:attribute name="href"><xsl:value-of select="link" disable-output-escaping="yes"/>
<xsl:text disable-output-escaping="yes">?tmpl=component&amp;print=1</xsl:text>
</xsl:attribute>Read more</a>
<br />
<xsl:value-of select="substring(pubDate,1,16)"/><br />
<br/>
<br/>
</xsl:for-each>
</div>
</xsl:template> 
```

注意：我不想忽略 HTML 标签。如果有图片，我想包括它。

我在这里找到了一些类似的问题的答案，但似乎没有一个对我有用。非常感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:39:57.347

问题的根源似乎是您试图采用转义的 HTML（不是结构化标记）并将其输出为结构化标记（未转义的 HTML）。

禁用输出转义是一种快速而肮脏的方法，而不是一种健壮的方法，正如您所看到的：一旦您尝试对字符串进行操作（例如修剪），您就会失去格式良好，因为您'不是在树结构上操作，而是在字符串上操作。

要正确执行此操作，您需要实际解析描述元素中的转义 HTML，以便将其作为树结构。然后你可以使用@Dimitre 指出的解决方案。

如何解析中的转义 HTML `<description>`？您可以编写一堆花哨的 XSLT 来解析字符串……这会让人头疼，但可行。或者，如果您有可用的 Saxon，则可以使用[saxon:parse() 扩展函数](http://saxon.sourceforge.net/saxon7.4/extensions.html#parse)。您可能必须首先将元素开始/结束标签包装在字符串周围，因为 saxon:parse() 期望字符串是格式良好的 XML。例如

```
saxon:parse(concat('<p>', description, '</p>')) 
```

# iphone - 如何在iphone中创建评论页面？

> ID：11775533
> 
> 赞同：0
> 
> 时间：2012-08-02T10:23:05.657
> 
> 标签：iphone, xcode, comments, uilabel, uitextview

我正在尝试创建一个评论页面，我使用 UITextView 作为添加评论的空间，使用 UILabel 作为打印评论的地方。我想知道如何使评论“粘贴”在页面上？目前，每次在 UITextView 中输入新内容时，它都会不断被重写。非常感谢！

编辑2：

这是我的代码......我需要将数据存储在某个服务器上吗？

在我的头文件中：

```
{
    IBOutlet UITextView *commentBox;

    IBOutlet UILabel *commentsDisplay;

}

-(IBAction)submit; 
```

在我的实现文件中：

```
 -(IBAction)submit{

   NSMutableString *tmpStr = [[NSMutableString alloc]initWithString:commentsDisplay.text];
   [tmpStr stringByAppendingString:[NSString stringWithFormat:@"%@", commentBox.text]];
   [commentsDisplay setText:tmpStr];

    commentBox.text = @"";

   [commentBox resignFirstResponder];

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:21:45.370

我的开始建议是，不要使用视图（UILabel）作为数据的主要存储位置。

创建一个`NSMutableString`属性来保存评论（或者可能是一个`NSMutableArray`字符串），并且每当有提交操作时，将新字符串添加到您之前的内容中......然后显示它。如果您为此使用单个字符串，请查看`appendString:`. 如果您使用数组，则将新条目作为对象添加到数组中。（我喜欢数组的想法，因为它允许选择显示多少评论。）

简单地这样做应该会让屏幕更新看起来更像你想要的，并且如果你打算这样做的话，将数据与屏幕元素分开可以更容易地在你的应用程序启动之间保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:00:54.343

代替：

```
commentsDisplay.text = [NSString stringWithFormat:@"%@",[commentBox text]]; 
```

做这个：

```
NSMutableString *tmpStr = [[[NSMutableString alloc]initWithString:commentsDisplay.text]autorelease];
[tmpStr stringByAppendingString:[NSString stringWithFormat:@"\n%@", commentBox.text]];
[commentsDisplay setText:tmpStr]; 
```

这样，您将提交的文本附加到现有文本...

...并且不要忘记将您的标签设为多行标签（您可以在 Interface Builder 中进行此设置）。

# php - 使用ajax通过文本链接返回同一页面的php代码

> ID：11775535
> 
> 赞同：0
> 
> 时间：2012-08-02T10:23:16.930
> 
> 标签：php, ajax, jquery

单击时，链接应运行从同一页面上的数据库中提取信息的 PHP 代码。

我已经使用 AJAX、表单和按钮实现了这一点，但我真的希望使用链接而不是按钮。

我已经设法使链接正常工作，但是 PHP 脚本创建的数据库中的表仅在浏览器刷新时闪烁一秒钟。

如何停止刷新以显示表格？

如果有任何帮助，我将不胜感激。

我的代码是：

```
 <script language="javascript" type="text/javascript">

    function myFunction(){
    var ajaxRequest;  

try{
    // Opera 8.0+, Firefox, Safari
    ajaxRequest = new XMLHttpRequest();
} catch (e){
    // Internet Explorer Browsers
    try{
        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try{
            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e){
            // Something went wrong
            alert("Your browser has Failed");
            return false;
        }
    }
}

ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
        var ajaxDisplay = document.getElementById('ajaxDiv1');
        ajaxDisplay.innerHTML = ajaxRequest.responseText;
    }
}

    document.proffForm.submit();
ajaxRequest.open("GET", "proff/all_proff.php");
ajaxRequest.send(null); 

    }

    </script>

    <form name='proffForm' >
    <a href="#" onclick='myFunction()' >List All Professions</a>
    </form>

    <div id='ajaxDiv1'></div></p> 
```

php

```
 <?php 
     include '../dbc.php';

     $allprof1 = mysql_query("SELECT *  
                    FROM users 
                    ORDER BY profession" );

    $qry_result = mysql_query($allprof1) or die(mysql_error());
    ?>
    <?php     
    $display_string = "<table border='1' cellpadding='5' width='100%'               bordercolor='000099'border='solid'>";
    $display_string .= "<tr align='left' bgcolor='009966'>";
    $display_string .= "<th><span class='titlehdr3'>Profession</span></th>";
    $display_string .= "<th><span class='titlehdr3'>Business Name</span></th>";
   $display_string .= "<th><span class='titlehdr3'>Profile</span></th>";
   $display_string .= "</tr>";

   while($row = mysql_fetch_array($qry_result)){
$display_string .= "<tr>";
$display_string .= "<td><span class='tabs'>$row[profession]</span></td>";
$display_string .= "<td><span class='tabs'>$row[full_name]</span></td>";
$display_string .= "<td><span class='tabs'>$row[url]</span></td>";
$display_string .= "</tr>";

   }

   $display_string .= "</table>";
   echo $display_string;

   ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:32:23.420

我可以看到，您在表单上添加了提交功能。在 ajax 请求中，我们不需要任何提交操作，因此删除该行

```
document.proffForm.submit(); 
```

从你的代码。它将完美地工作。

# python - 如何从字符串中去除正斜杠

> ID：11775538
> 
> 赞同：0
> 
> 时间：2012-08-02T10:23:27.273
> 
> 标签：python

```
Python 2.7.3 (default, Apr 20 2012, 22:44:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.  

>>> s = "www.example.com/help"
>>> s.strip('/')
>>> 'www.example.com/help'    #expected 'www.example.comhelp'
>>> t = "/blah/blah/"
>>> t.strip('/')
>>> 'blah/blah'    #expected 'blahblah'
>>> s.strip('w.')
>>> 'example.com/help'    #expected 'examplecom/help'
>>> f = 'www.example.com'
>>> f.strip('.')
>>> 'www.example.com'    #expected 'wwwexamplecom'
>>> f.strip('comw.')
>>> 'example'    #as expected 
```

有人可以解释为什么 str.strip 似乎没有按承诺工作吗？

从文档中：

> str.strip([字符])
> 
> > 返回删除了前导和尾随字符的字符串的副本。chars 参数是一个字符串，指定要删除的字符集。如果省略或无，chars 参数默认删除空格。chars 参数不是前缀或后缀；相反，它的值的所有组合都被剥离：

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-02T10:24:39.053

> str.strip([字符])
> 
> > 返回删除了**前导和尾随**字符的字符串的副本。

使用它在任何地方替换字符串：

```
s.replace('/', '') 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-02T10:28:58.077

strip 只会删除**前导和尾随字符**。

我建议使用：

```
s.replace('/', '') 
```

反而。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T10:35:02.447

**另一种方法**

```
 In [19]: s = 'abc.com/abs'
    In [29]: exclude = '/'
    In [31]: s = ''.join(ch for ch in s if ch not in exclude)
    In [32]: s
    Out[32]: 'abc.comabs' 
```

# android - 无法获取 Google Maps API 密钥

> ID：11775541
> 
> 赞同：0
> 
> 时间：2012-08-02T10:23:36.620
> 
> 标签：android, api-key

我正在尝试为我的应用获取 Google Maps API 密钥，以使用一些地图功能。

我按照信件的所有说明进行操作，可以在 [此处](https://developers.google.com/android/maps-api-signup)和[此处](https://developers.google.com/maps/documentation/android/mapkey)找到。

问题是在我的 cmd 中打印的结果是：

证书指纹 (SHA1)：A4:FF:7A:D0:8A:51:20:92:98:B2:C4:35:C7:8A:46:87: AB:7E:41:F1

我猜一个合适的结果应该是（MD5）而不是（SHA1）。任何人都可以在这里帮忙吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:26:14.950

您使用的命令只在该命令中包含一个参数 -v，您将获得 MD5 哈希键。

IE

```
$ keytool -list -keystore ~/.android/debug.keystore -v 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:32:55.613

我的朋友 请检查您的计算机中的 JDK 和 JRE 版本是否相同 如果不是，您将无法生成 API 密钥......... 正确 我的朋友

# xslt - 如何根据变量或参数查找元素是否具有祖先（XPath 2.0）

> ID：11775542
> 
> 赞同：1
> 
> 时间：2012-08-02T10:23:39.053
> 
> 标签：xslt, xpath, xslt-2.0, xpath-2.0

我要解决的问题是获取仅包含唯一文本元素但同时还能够根据作为参数传递给 XSLT 工作表的元素名称排除节点树的所有元素。

选择仅包含非空的唯一文本元素的所有节点的部分相对容易：

```
$StartNode//element()/text()[normalize-space(.)]/parent::* 
```

其中`$StartNode`是 XML 文档中特定元素的 Xpath 表达式。

现在我遇到了一些问题，从结果中排除了特定的节点树：

所以我希望得到类似的东西：

```
$StartNode//element()/text()[normalize-space(.)]/parent::*[not(ancestor::**$element_to_be_excluded**)] 
```

其中 $element_to_be_excluded 是要排除的元素名称。

但是不可能在表达式的那部分使用变量...

所以我想出了这个解决方案

```
<xsl:variable name="ancestors_of_current_node" as="xs:string*">
   <xsl:sequence select="$current_parent_node/ancestor::*/name()"/>
</xsl:variable>
<xsl:variable name="is_value_in_sequence" as="xs:boolean" select="functx:is-value-in-sequence($exclude_node_local_name, $ancestors_of_current_node)"/>
<xsl:if test="not($is_value_in_sequence)">
    <xsl:call-template name="dataElementMap">
       <xsl:with-param name="node_item" select="$current_parent_node"/>
    </xsl:call-template>
</xsl:if> 
```

其中 functx:is-value-in-sequence 是：

```
<xsl:function name="functx:is-value-in-sequence" as="xs:boolean" xmlns:functx="http://www.functx.com">
  <xsl:param name="value" as="xs:anyAtomicType?"/>
  <xsl:param name="seq" as="xs:anyAtomicType*"/>
  <xsl:sequence select="$value = $seq"/>
</xsl:function> 
```

现在的问题是，有没有更优雅的方法来解决这个问题？

提前感谢您的任何提示。

问候 Vlax

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:01:03.087

而不是做（正如你提到的那样，由于变量而不起作用）

```
$StartNode//element()/text()[normalize-space(.)]
   /parent::*[not(ancestor::$element_to_be_excluded)] 
```

你可以试试这个来检查祖先的名字吗？

```
$StartNode//element()/text()[normalize-space(.)]
   /parent::*[not(ancestor::*[local-name() = $element_to_be_excluded])] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T12:02:37.097

**如果`$element_to_be_excluded`只是元素的名称，请使用**：

```
$StartNode//element()
             [text()[normalize-space(.)]]
                [not(ancestor::*/name() = $element_to_be_excluded)] 
```

**如果`$element_to_be_excluded`是一个或多个元素的序列，请使用**：

```
$StartNode//element()
             [text()[normalize-space(.)]]
                [not(ancestor::* intersect $element_to_be_excluded)] 
```

**说明**：

1.  必要`parent::*`的被淘汰了。

2.  如果给定元素名称，我们添加一个附加谓词，`true()`仅当所选元素的祖先名称集合不包含`$element_to_be_excluded`.

3.  如果`$element_to_be_excluded`包含一个或多个元素的序列，我们添加一个额外的谓词，`true()`仅当所选元素不是`$element_to_be_excluded`.

**请注意，在这两种情况下，都可以使用单个 XPath 表达式**来选择想要的元素——根本不需要使用任何 XSLT 指令。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T12:01:27.307

我总是会写`<xsl:variable name="foo"><xsl:sequence select="someExpression"/></xsl:variable>`as之类的东西`<xsl:variable name="foo" select="someExpression"/>`。我不擅长在没有看到输入样本的情况下提出建议，但我怀疑不是使用命名模板和这两个变量以及`xsl:if`包装`call-template`代码可以在模式下使用模板编写，例如

```
<xsl:apply-templates select=".[not(ancestor::*[local-name() eq $exclude_node_local_name])]" mode="m1"/> 
```

您的命名模板`dataElementMap`被替换为例如

```
<xsl:template match="*" mode="m1">...</xsl:template> 
```

（或者可能是一些更专业的匹配模式）。

# c# - Mac 或主板作为许可目的的唯一标识符？

> ID：11775545
> 
> 赞同：5
> 
> 时间：2012-08-02T10:23:52.953
> 
> 标签：c#, .net, visual-studio-2010, hardware

好的，所以我使用 MAC 地址作为唯一标识符，一切都很好，直到我激活了 VPN 并且 MAC 地址改变了.....

所以，我有两个选择：

1）获取实际物理网卡的MAC地址

对于mac地址，我发现了一些关于如何实现这一点的提示：

*   [链接1](https://stackoverflow.com/questions/1567377/how-to-determine-mac-address-of-the-actual-physical-network-card-not-virtual)
*   [链接2](https://stackoverflow.com/questions/9482253/is-there-really-any-way-to-uniquely-identify-any-computer-at-all)

2.）获取主板ID并使用它，希望我们不要得到2台具有相同ID的计算机（这可能吗？）

```
public String getMotherBoardID()
{
    String serial = "";
    try
    {
        ManagementObjectSearcher mos = new ManagementObjectSearcher("SELECT SerialNumber FROM Win32_BaseBoard");
        ManagementObjectCollection moc = mos.Get();

        foreach (ManagementObject mo in moc)
        {
            serial = mo["SerialNumber"].ToString();
        }
        return serial;
    }
    catch (Exception)
    {
        return serial;
    }
} 
```

你说什么？我应该尝试挖掘并找到从卡获取mac地址而不是虚拟地址的代码，还是应该切换到主板？而且我不需要组合任何东西，我只需要在目标计算机上不会轻易改变的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:25:02.847

如果您可以使用主板、网卡和硬盘驱动器**中的值的组合，那就更好了。**

您可以查看这篇文章：[如何获取硬件信息（CPU ID、主板信息、硬盘序列号、系统信息……）](http://www.codeproject.com/Articles/17973/How-To-Get-Hardware-Information-CPU-ID-MainBoard-I)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T10:50:35.127

我认为类似于以下的方法将尽可能安全

1.  您为用户提供软件的许可证密钥，与客户姓名或公司等相关联
2.  用户在程序中输入此数据
3.  每次启动程序时，它都会“打电话回家”发送许可信息
4.  如果许可证（由您的系统）验证为有效，则该软件将收到一些实际使其能够运行的数据。否则无论如何它都不起作用（某些部分会丢失）。

除非获得许可，否则无法运行的一个示例（我从现在开始考虑 C#）将是制作一些基本方法`extern`。您将发送所需的程序集以响应有效许可证，或回退到“Gotcha！” 警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T10:27:39.653

为此使用微软提供的东西。它们使用硬件标识符的组合。MAC 不好，因为它们通常可以更改。微软必然有一些唯一的安装标识符。

[Windows 唯一标识符？](https://stackoverflow.com/questions/6536688/windows-unique-identifier)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T10:55:16.340

我个人会做以下事情，

1.  抓住一些硬件钥匙。

    1.  UUID
    2.  序列号
    3.  硬盘序列号
    4.  物理 MAC 地址（有关如何执行此操作的提示，请参见我的[解决方案](https://stackoverflow.com/questions/9546228/how-to-detect-the-original-mac-address-after-it-has-been-spoofed/11205373#11205373)）
2.  允许其中一个（甚至两个）更改，同时保持许可证有效。

3.  需要重新激活您的许可证。
4.  跟踪客户的重新激活次数，并在您怀疑之前拥有某种最大值。

**不要使用 WMI**我估计至少有 1/10 次它不起作用。您将需要绕过 WMI 并使用 Windows API 获取这些硬件详细信息。

个人开发了类似的东西，它跟踪 10 种不同的东西（包括软件属性），并带有一些允许更改的逻辑。在第一个版本中使用 WMI 失败了。

# java - m2eclipse 没有将 src/main/resources 复制到目标

> ID：11775546
> 
> 赞同：2
> 
> 时间：2012-08-02T10:24:02.807
> 
> 标签：java, eclipse, jakarta-ee, maven, m2eclipse

我有一个 Maven 项目，我已经安装了 m2eclipse。当我构建项目时， src/main/resources 中的文件没有被复制到 target/classes 文件夹中。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:28:51.647

如果资源没有被复制，可能是因为“资源”没有正确定义。您需要向 Maven 指明资源是什么。

```
<build>
    ...
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
        </resource>
        <!-- you can define here more than one resource -->
    </resources>
    ...
 </build> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T14:03:44.647

在阅读了有关何时复制资源以及何时不复制资源的所有评论之后（即，在调用 Eclipse 构建之前一切正常），**maven2Builder**很可能被禁用。您可以使用 maven2Nature 来巧妙地配置您的类路径，但是如果您禁用 maven2Builder，由于活动的 Java Builder ，只有源代码将被编译并复制到`target/classes`（或您在 .config 中配置的任何内容）。`.classpath`

考虑一个非常简单的演示项目配置（`.project`Eclipse 项目根目录中的文件）：

```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
    <name>m2demo</name>
    <comment></comment>
    <projects>
    </projects>
    <buildSpec>
        <buildCommand>
            <name>org.eclipse.jdt.core.javabuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
        <!-- 
        <buildCommand>
            <name>org.eclipse.m2e.core.maven2Builder</name>
            <arguments>
            </arguments>
        </buildCommand>
         -->
    </buildSpec>
    <natures>
        <nature>org.eclipse.jdt.core.javanature</nature>
        <nature>org.eclipse.m2e.core.maven2Nature</nature>
    </natures>
</projectDescription> 
```

在这个例子中，我评论**了 maven2Builder**，它会导致你得到完全相同的行为。

我通常喜欢查看实际内容`.project`和`.classpath`文件内容，但都可以通过 Project Properties 访问。您会在项目属性中找到“Builders”部分，并且应该有“Maven Project Builder”复选框项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-21T20:10:41.693

在我的项目中，我观察到即使我在 pom.xml 中指定了资源标签并配置了 maven2Builder，资源仍然没有被复制过来。为了解决这个问题，我手动编辑了最初是

```
<classpathentry including="**/*.java" kind="src" output="target/classes" path="java_source">
    <attributes>
        <attribute name="optional" value="true"/>
        <attribute name="maven.pomderived" value="true"/>
    </attributes>
</classpathentry> 
```

成为

```
<classpathentry kind="src" output="target/classes" path="java_source">
    <attributes>
        <attribute name="optional" value="true"/>
        <attribute name="maven.pomderived" value="true"/>
    </attributes>
</classpathentry> 
```

基本上，您必须删除`including="**/*.java"`要复制的非 .class 文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-22T17:58:26.877

对我来说，这个问题很明显...... Project-> Build Automatically 已关闭。复制资源的 m2e 构建器在构建时被调用。打开自动构建或执行 Project->Build All (ctrl-b) 以将更改的资源部署到目标/类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-24T01:07:57.480

我遇到了同样的问题，并从项目中删除了 Maven 特性并将其添加回来。然后我的资源文件被正确复制。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-19T10:16:00.167

我也遇到了这个问题，结果发现我不小心使用 m2e 生命周期映射过滤器排除了复制资源：

```
 <build>
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.eclipse.m2e</groupId>
          <artifactId>lifecycle-mapping</artifactId>
          <version>1.0.0</version>
          <configuration>
            <lifecycleMappingMetadata>
              <pluginExecutions>
                <pluginExecution>
                  <pluginExecutionFilter>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-resources-plugin</artifactId>
                    <versionRange>[1.0,)</versionRange>
                    <goals>
                      <goal>resources</goal>
                      <goal>testResources</goal>
                    </goals>
                  </pluginExecutionFilter>
                  <action>
                    <ignore />
                  </action> 
```

“行动”应该是“执行”而不是......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-28T10:51:26.090

我遇到的问题是，虽然资源*基本上存在*于目标文件夹中，但我最近所做的某些*更改在运行时不可用。*

我可以通过执行 Maven 的“更新项目...”功能来解决它​​。

我以前从未（公开地）想到过这个缺陷，到目前为止，我不知道这背后的原因。如果缺陷在运行时*只导致细微的错误，那肯定会令人费解（我花了很长时间才找到）。*

# jquery - JQuery：.val() 不适用于 textarea

> ID：11775547
> 
> 赞同：9
> 
> 时间：2012-08-02T10:24:04.263
> 
> 标签：jquery, textarea

我正在尝试阅读 textarea 的内容，但`.val()`不适用于我的 textarea。如果有人为我提供解决方案，我会很高兴。这是我的代码：

HTML：

```
<textarea id="details" class="required" rows="5"></textarea> 
```

JS：

```
$.ajax({
      type: "GET",
      url: "reserve.php",
      data: {
            details : $('#details').val(),
            ...
      },
      ...
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T10:30:02.810

`val()`工作得很好......你必须在其他地方有你的错误。

**[例子](http://jsfiddle.net/poikl/UrxTS/)**

可能您的选择器不匹配。检查拼写错误以及是否应用了正确的前缀（`#`用于 ID 或`.`用于类）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-30T05:40:16.720

这是一个有效的请求，因为我遇到了同样的问题并且可以报告以下内容：

*   否 - 这不是选择器，返回一个有效对象
*   否 - 只有一个具有此 ID 的元素
*   否 - 据我所知，没有无效的 HTML 或错误的标签使用

是的 - 有一个不是黑客或错误代码的答案：

```
$('#myTextArea')[0].value 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-03T13:54:31.747

我有同样的问题。我的解决方案是，有两个元素的 id 为“comment”。jQuery 返回第一个的值，它是空的。如果我查看源代码，我只看到了一个，因为第二个是在 AJAX 调用之后添加的。但是当在检查器中搜索“评论”（包括引号）时，我看到了这两个元素。我希望这对你也有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-28T16:25:42.007

奇怪的是，我在尝试清空所有文本区域时遇到了类似的问题。这不是选择器问题，因为我使用 $('textarea') 选择页面中的所有文本区域。我发现以下方法有效： $('textarea').text('');

因此，您可以尝试使用以下命令设置 textarea： $('textarea').text('my new value');

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-25T01:55:03.770

我的问题是我使用的是名称选择器而不是 id 选择器。

IE：

作品：

```
'content': $(this).find('#text_content').val(), 
```

不起作用：

```
'content' : $(this).find('input[name=text_content]').val(), 
```

不知道为什么名称选择器不适用于 textarea（它适用于所有其他字段），但你有它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T12:16:45.167

详细信息：encodeURIComponent($('#details').val())

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-16T22:31:38.107

右键单击 TextAreaFor 并选择检查。使用浏览器生成的 id，出于某种原因，即使您在 htmlAttributes 中指定它，它也会为 TextArea 生成自己的 id。在代码中：@Html.TextAreaFor(model => model.PendingUserDto.PendingUserNotes, new { htmlAttributes = new { @class = "form-control", id = "pendingUserNotes" } }) 在检查窗口：测试说明

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-20T10:08:23.853

`val()`工作正常。你得到的参数不正确。

**HTML代码**

```
<textarea id="details" rows="5" placeholder="please enter id pass"></textarea>
<button id="get_content">get Content</button>
<div id="html_log"></div> 
```

**Javascript代码**

```
$("#get_content").click(function(){
   var datas = $('#details').val();
   $.ajax({
      type: "GET",
      url: "https://reqres.in/api/users",
      data: {
          id : datas, //id pass
      },
      success: function(dataResult){
          $('#html_log').text(dataResult.data['first_name']); //Check your returen parameter.
      }
    });
}); 
```

# javascript - 在 chrome 中呈现 javascript 模板时缺少表单标签

> ID：11775548
> 
> 赞同：1
> 
> 时间：2012-08-02T10:24:09.787
> 
> 标签：javascript, asp.net, google-chrome

我有一个 aspx 页面，其中有一个像这样的表单。

 `````
<form id="form1" runat="server">
.
.
.
</form> 
````  `现在我在这个页面中使用了多个 javascript 模板（trimpath），每个 tpls 里面都有一个表单标签。

现在，在渲染完所有内容后，在 IE 中我在页面中获得了多个表单标签，但在 chrome 中，我有渲染的 tpls 和主表单标签（aspx）页面内的所有内容，并且没有其他表单标签。

IE（开发者工具）

 `````
<form id="form1" action="abc.aspx" method="post"> //main form tag of aspx page

<form id="tpl1">rendered tags of tpl
..</form>

<form id="tpl2">rendered tags of tpl
..</form>

</form> 
````  `但在铬

 `````
<form id="form1" action="abc.aspx" method="post"> //main form tag of aspx page

rendered tags of tpl
....

rendered tags of tpl
....

</form> 
````  `知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:48:28.137

这是因为表单中的表单在语义上不正确或无效，并且现代浏览器倾向于在呈现页面时尝试自动更正无效的 HTML。``````

# delphi - 如何在 TListView.OnColumnDragged 中查找已拖动的列？

> ID：11775555
> 
> 赞同：2
> 
> 时间：2012-08-02T10:24:37.057
> 
> 标签：delphi, listview, drag

`OnColumnDragged`event of`TListView`具有简单的`TNotifyEvent`类型，因此没有直接的方法可以找到实际将哪一列拖到新位置。

如何找到已拖动的列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:51:50.587

在插入类的帮助下，您可能会在消息处理程序中捕获[`HDN_ENDDRAG`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775269%28v=vs.85%29.aspx)通知代码。[`WM_NOTIFY`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775583%28v=vs.85%29.aspx)

[`HDN_ENDDRAG`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775269%28v=vs.85%29.aspx)通知在`lParam`参数中返回结构，该结构[`NMHEADER`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775257%28v=vs.85%29.aspx)包含有关被拖动的标题项的信息。这是代码示例；您也可以关注[`commented version`](https://stackoverflow.com/revisions/11775931/3)帖子的：

```
uses
  ComCtrls, CommCtrl;

type
  TListView = class(ComCtrls.TListView)
  private
    procedure WMNotify(var AMessage: TWMNotify); message WM_NOTIFY;
  end;

implementation

{ TListView }

procedure TListView.WMNotify(var AMessage: TWMNotify);
var
  HeaderHandle: HWND;
begin
  inherited;
  if (AMessage.NMHdr^.code = HDN_ENDDRAG) then
  begin
    HeaderHandle := ListView_GetHeader(Handle);
    if (AMessage.NMHdr^.hWndFrom = HeaderHandle) then
    ShowMessage(
      'The header with index ' +
      IntToStr(TWMNotifyHC(AMessage).HDNotify^.Item) + ' ' +
      'has been dragged to the position with index ' +
      IntToStr(TWMNotifyHC(AMessage).HDNotify^.PItem^.iOrder) + '. ' +
      'Columns are not updated yet!');
  end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:34:41.477

您没有任何迹象表明哪一列已被移动。确实发生的是列表视图`Columns`列表中的项目被重新排列以匹配列表视图中列的新顺序。只要您可以唯一地标识每一列，而不是使用列在列表中的位置，那么您就可以推断出列的顺序。

一种可能的方法是给每一列一个不同的`Tag`值。然后你可以做这样的事情：

```
procedure TForm1.ListView1ColumnDragged(Sender: TObject);
var
  i: Integer;
  s: string;
begin
  s := '';
  for i := 0 to ListView1.Columns.Count-1 do begin
    s := s + IntToStr(ListView1.Columns[i].Tag) + ' ';
  end;
  Caption := Trim(s);
end; 
```

当然，您会想做一些比这更有用的事情，但我相信它会传达这个想法。

# mysql - SQL 一对多？

> ID：11775557
> 
> 赞同：0
> 
> 时间：2012-08-02T10:24:40.140
> 
> 标签：mysql, sql

所以这就是我要解决的问题。

```
Category(CatID(PK), CatName,....)
Writer(wtrID(PK), CatID(FK), wtrName,....)
Report(rpID(PK), title)
Authors(rpID(FK),wtrID(FK)) 
```

如何创建一个列表来显示来自 3 个不同类别的作者的报告标题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:28:09.963

```
select r.title, group_concat(w.wtrID) as writer_ids
from Reports r
inner join Authors a on a.rpID = r.rpID
inner join Writer w on w.wtrID = a.wtrID
inner join Category c on c.CatID = w.CatID
group by r.title
having count(distinct c.CatID) = 3 
```

# c# - 如何在 C# 中编辑 ListView 中显示的 XML 文件？

> ID：11775562
> 
> 赞同：0
> 
> 时间：2012-08-02T10:25:00.077
> 
> 标签：c#, .net, xml, forms

我正在为扫描设备开发 C# 应用程序，但遇到了一个问题。我从一个 xml 文件中获取我的配置设置，每次运行应用程序时我都从服务器获取该文件。但是，如果配置错误，我无法请求新的配置，因为 Server Url 在 xml 中。所以我决定我想要编辑功能。这是我显示配置的方式：

```
 private void list()
    {
        if (this.listViewConf.Items.Count != 0)
            this.listViewConf.Items.Clear();

        this.addItem("Operator", Data.cuser);
        this.addItem("Warehouse", Data.cware);
        this.addItem("Server URI", Config.uri(Config.socket));
        this.addItem("Timeout", Config.get(Config.socket, Config.atime));
        this.addItem("Config file", Config.path("config.xml"));
        this.addItem("Data backup", Config.path("data.xml"));

        this.listViewConf.Visible = true;
    }
    private void addItem(String name, String value) {
        ListViewItem item = new ListViewItem();
        item.Text = name;
        item.SubItems.Add(value);
        this.listViewConf.Items.Add(item);       
    } 
```

其中 listViewConf 是一个 ListView。我的任务是 - 如何知道 ListView 的哪一行被选中（假设我有一个编辑按钮），更重要的是，如何编辑 xml 文件？ListView 由名称 | 值对，这是一个示例 config.xml：

```
 <?xml version="1.0" encoding="utf-8" ?>
<wms>
    <setup>
        <config path="/Flash File Store/WMS/" file="config.xml" />
        <socket path="http://ware.aip/interface/ck/" file="socket.php" timeout="10000" />
    </setup>
    <users>
        <user id="1" code="01" name="User" ware="1" />
    </users>
    <warehouses>
        <ware id="1" code="T" name="Test" />
    </warehouses>
    <tasktypes>
        <type id="1" code="T" name="Test" />   
    </tasktypes>
</wms> 
```

而且 - 我知道创建可编辑的 ListView 是可能的，但如果有更简单的解决方案（比如使用编辑按钮），我很乐意使用它。预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:19:05.577

使用 . 从 XML 创建一个可序列化的类`xsd.exe`。使用此类将 XMl 中的数据反序列化为`POCO`对象图，然后您可以将其绑定到`ListView`. 您现在可以直接编辑对象，而不是试图估计您应该在 XML 节点中的哪个位置进行编辑。

完成所有编辑后，将对象序列化回 XML。

# java - 命名要通过反射读取的类的注释

> ID：11775565
> 
> 赞同：1
> 
> 时间：2012-08-02T10:25:20.577
> 
> 标签：java, reflection, annotations

我的应用程序允许开发人员创建一些插件。符合基本抽象类确定的要求。每个插件都必须有一个名称。我想通过使用注释来解决这个问题。所以，我定义了自己的注解名称如下：

```
@Retention(RetentionPolicy.RUNTIME)
public @interface Name {
public String value();
} 
```

我把这个注释和基础抽象类 CommonPlugin 放到单独的模块中，并将其构建为 JAR 文件以与开发人员共享。

然后我导入包并将这个注释放在我测试插件的定义之前，如下所示：

```
@Name("Test plugin")
public class TestPlugin extends CommonPlugin { 
```

然后我反映了所有给定的插件，`URLClassLoader`并且在 TestPlugin 类中找不到必要的注释。但是如果我将 Name 注释定义到 TestPlugin 类所在的同一个包中，我可以找到它。应该是这样还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:30:56.493

*将我的评论变成答案，以便可以接受。*

确保非限定名称`Name`引用所有源文件中的相同限定名称。在来自与包含注释的包不同的包的源中，应该有一个非通配符导入`Name`，并且在另一个包本身中不应该有具有该名称的类。

# php - phpRegEx：替换除 ASCII 和 UTF8 数字之外的所有内容

> ID：11775566
> 
> 赞同：1
> 
> 时间：2012-08-02T10:25:23.927
> 
> 标签：php, regex, unicode, replace, ascii

如何替换除 ASCII/unicode 数字之外的所有内容：

ASCII
**0-9**
Unicode：
**٠-٩**

使用 PHP::RegEx，任何想法我需要什么代码？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T10:39:03.820

您可以使用`\P{Nd}`指定“任何不是十进制数字的字符”：

```
preg_replace('/\P{Nd}/u', '', $s) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T10:32:14.877

```
$ret = preg_replace('/[^\d]/', '', $str); 
```

# php - 对数据库使用单例类

> ID：11775568
> 
> 赞同：0
> 
> 时间：2012-08-02T10:25:46.413
> 
> 标签：php

我是 PHP 新手，试图从 Java 迁移到 PHP。这个问题可能是一个愚蠢的问题。对不起，如果是。

我在 PHP 中发现了很少的单例实现，我打算将它用于数据库。我的问题是：如果调用两个不同的 PHP 页面或一个页面同时被多个客户端调用，会发生什么？它不会使用相同的数据库连接、语句和存储结果在相同的变量中吗？结果不会被覆盖和损坏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:32:46.050

*   不，每个请求都是相互分离的。这尤其意味着：每个资源（包括数据库连接）都在请求结束时关闭。但是，通常没有什么可担心的
*   不，对数据库的并发访问不会伤害它。事实上，这就是为什么数据库比平面文件更受欢迎的原因之一；）

# apache - Mod_Rewrite 显示禁止使用 FollowSymLinks 选项

> ID：11775571
> 
> 赞同：0
> 
> 时间：2012-08-02T10:25:54.723
> 
> 标签：apache, mod-rewrite

我正在写一个 mod_rewrite 脚本。

`.htaccess`到目前为止，这是我的文件：

```
RewriteEngine On
Options FollowSymLinks

RewriteCond %{REQUEST_URI} !^/comingsoon.php$
RewriteRule ^(.*)$ /comingsoon.php 
```

可悲的是，它导致了一条错误消息。确切的信息是：

```
Forbidden

You don't have permission to access /comingsoon.php on this server.

Additionally, a 403 Forbidden error was encountered while trying to use an ErrorDocument to handle the request. 
```

该文件`comingsoon.php`肯定存在，并且可以在没有`.htaccess`文件时访问。

但是，当我删除该`Options FollowSymLinks`行时，一切正常。

是什么原因造成的，我该如何解决它以使该选项处于活动状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:52:17.820

`Options FollowSymLinks`由于启用，它出现了服务器错误。

# yii - Yii-extension Bootstrap: navbar 'pull-right' 类

> ID：11775577
> 
> 赞同：2
> 
> 时间：2012-08-02T10:26:13.973
> 
> 标签：yii, twitter-bootstrap, yii-extensions

我正在尝试将导航栏文本之一对齐到右侧，但我没有尝试任何工作。

我的代码是：

```
<?php $this->widget('bootstrap.widgets.BootNavbar', array(
'fixed'=>true,
'brand'=>'',
'brandUrl'=>'#',
'collapse'=>true, // requires bootstrap-responsive.css
'items'=>array(
    array(
        'class'=>'bootstrap.widgets.BootMenu',
        'items'=>array(
            array('label'=>'Weblog', 'url'=>'#'),
            array('label'=>'Local RiverMap', 'url'=>'#', 'items'=>array(
                array('label'=>'Radar', 'url'=>'#'),
                array('label'=>'Cosmo7', 'url'=>'#'),
                array('label'=>'Neige', 'url'=>'#'),
                array('label'=>'Fonte Neige', 'url'=>'#'))),
            array('label'=>'Global RiverMap', 'url'=>'#', 'items'=>array(
                array('label'=>'Precipitations 24h', 'url'=>'#'),
                array('label'=>'Precipitations 72h', 'url'=>'#'),
                array('label'=>'Precipitations 240h', 'url'=>'#'))),
            array('label'=>'Espace Expert', 'url'=>'#'),
            array('label'=>'Tableau Du Bord', 'url'=>'#', 'items'=>array(
                array('label'=>'Tableau du Bord', 'url'=>'#'),
                array('label'=>'Niveau de Lacs', 'url'=>'#'),
                array('label'=>'Prevision LEPS', 'url'=>'#'),
                array('label'=>'Performance', 'url'=>'#'),
                array('label'=>'Exported Files', 'url'=>'#'))),
            array('label'=>'Admins', 'url'=>'#', 'items'=>array(
                array('label'=>'Edit Menu', 'url'=>'#'),
                array('label'=>'Edit Google Objects', 'url'=>'#'),
                array('label'=>'Insert Internal Message', 'url'=>'#'),
                array('label'=>'Message log', 'url'=>'#'),
                array('label'=>'Insert Clients Message', 'url'=>'#'))),
            array('label'=>'logout', 'url'=>'#', 'htmlOptions'=>array('class'=>'pull-right')),

      ),
            ),
     ))); ?> 
```

如您所见，我希望最后一项“注销”位于导航栏的右侧，但我真的不知道该怎么做，而且我在网上找不到任何信息。我唯一看到的是使用 'htmlOptions'=>array('class'=>'pull-right') 但它似乎确实有效。

当我执行带有火错误的代码时，我可以看到该元素具有'class'=''。

我还想知道如何在任何导航栏项目中引入图像！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T19:26:24.127

我在您的 BootNavBar 小部件和我的小部件之间看到的唯一真正区别是我将“固定”设置为 false，并且我有 2 个 BootMenus，第二个 BootMenu 调用 class=>'pull-right'。

```
$this->widget('bootstrap.widgets.BootNavbar', array(
'fixed'=>false,
'brand'=>CHtml::encode(Yii::app()->name),
'brandUrl'=>'/',
'collapse'=>true,
'items'=>array(
    array(
        'class'=>'bootstrap.widgets.BootMenu',
        'items'=>array(
            array('label'=>Yii::t('layouts','Home'), 'url'=>array('/site/index')),
            array('label'=>Yii::t('layouts','About'), 'url'=>array('/site/page', 'view'=>'about')),
            array('label'=>Yii::t('layouts','Contact'), 'url'=>array('/site/contact')),
        ),
    ),
    array(
        'class'=>'bootstrap.widgets.BootMenu',
        'htmlOptions'=>array('class'=>'pull-right'),
        'items'=>array(
            array('label'=>Yii::t('layouts','Login'), 'url'=>array('/login'), 'visible'=>Yii::app()->user->isGuest),
        ),
    ),
    $logoutHtml,
), 
```

));

# php - PHP -- 结束 DIV 标签

> ID：11775580
> 
> 赞同：-1
> 
> 时间：2012-08-02T10:26:26.307
> 
> 标签：php, html

我需要找出下面代码的结束标签

```
<div class="emph"><div class="level"> Some testing </div></div> 
```

在这我需要为父 DIV 找到正确的标签。我的目标是在结束 DIV 之前添加类名，如下所示

```
<div class="emph"><div class="level"> Some testing <!--level--></div><!--emph--></div> 
```

为此，我需要找到确切的关闭父 DIV。

这有可能在 PHP 中实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:29:34.833

您可以使用 simpleXML（或任何其他 XML 类） - 对于每个 div 元素，读取它的类并附加在节点内容的末尾。它并不完全是找到结束标签，而是实现了您指定的目标。

示例代码：

```
$dom = new DOMDocument;
$dom->loadXML($xml);
$divs = $dom->getElementsByTagName('div');
foreach ($divs as $div) {
    if ($div->getAttribute('class')!='') {
        $div->nodeValue = $div->nodeValue.'<!--'.$div->getAttribute('class').'-->';
    }
}
echo $dom->saveXML(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:55:24.203

在 PHP 中打印`divs`时保留一个数组`$div_array = array()`
打开 div 后立即执行以下操作：

```
array_push($div_array, 'emph'); // or 'level' depending on the classname 
```

一旦您准备好打印结束标签，请通过以下方式询问最后一个 div 的值：

```
array_pop($div_array);

// for example
echo '<!-- '.array_pop($div_array).' -->'; 
```

弹出数组也会删除数组的最后一个条目。我想这就是你想要的。

# c# - 使用自定义模型绑定器的递归模型绑定

> ID：11775581
> 
> 赞同：2
> 
> 时间：2012-08-02T10:26:31.627
> 
> 标签：c#, .net, asp.net-mvc-3, model-binding, asp.net-mvc-futures

我正在尝试使用 .NET MVC 在我的表单中实现向导功能。我遇到了达林·季米特洛夫（Darin Dimitrov [）实现](https://stackoverflow.com/questions/6402628/multi-step-registration-process-issues-in-asp-net-mvc-splitted-viewmodels-sing/6403485#6403485)这一目标的方法。基本上他有一个向导视图模型，其中包含一个 IStep 列表。每个步骤都有自己的属性和验证。

他在视图上序列化向导（作为一种视图状态），然后将其和当前步骤发布到控制器。因此，向导的每个步骤，您只验证该步骤。如果成功，则增加当前步骤并重复。

在大多数情况下 - 这非常有效。但是，我在验证各个步骤时遇到了一个问题，因为我的一些步骤依赖于之前提交的验证值。

因此，我需要添加一种方法来允许各个向导步骤访问之前的步骤。

我决定这样做的方法是将向导包括在步骤中。

```
public interface IWizardStep
{
    WizardViewModel Wizard { get; set; }
} 
```

然后在 Darin 提供的模型绑定器中，为 BindModel 添加一个覆盖

```
public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
{
    var step = (IStepViewModel)base.BindModel(controllerContext, bindingContext);
    step.Wizard = (WizardViewModel)serializer.Deserialize(controllerContext.HttpContext.Request.Form["wizard"], SerializationMode.Signed);
    return step;
} 
```

这似乎有效，但是在我的控制器中我有一个 ModelStateError：

> 从类型“System.String”到类型“Wizard”的参数转换失败，因为没有类型转换器可以在这些类型之间进行转换。

我认为这是因为模型绑定器试图递归绑定？

有谁知道我该如何解决这个问题？或者 - 我是否正确地接近这个？有一个更好的方法吗？

我把上面所有的都是一个[基本的示例项目](https://dl.dropbox.com/u/23788424/MvcApplication1.rar)来说明我遇到的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:41:50.907

将此添加到您的 HomeController 作为第 18 行...

```
ModelState.Remove("Wizard"); 
```

您所拥有的应该可以工作，但更好的方法可能是将所有步骤的属性添加到单个模型类中，然后为每个步骤使用验证组......

[https://nuget.org/packages/Mvc3ValidationGroups](https://nuget.org/packages/Mvc3ValidationGroups)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T18:21:54.077

所以我从来没有深入了解为什么这不起作用，而是决定让自己免于头痛并将向导保存在会话中，而不是序列化并将其发布回每一步。这样，我可以轻松地在视图模型的 Validate(ValidationContext) 方法中获取向导。似乎运作良好。

# mysql - 如何在我的表中选择最新的数据？

> ID：11775585
> 
> 赞同：0
> 
> 时间：2012-08-02T10:26:44.227
> 
> 标签：mysql, oracle

在我的数据库中有一个表`AM_HISTORY`，其中两列像`USER_ID`, `SAVE_DATA`。

我的问题是...

如何在`AM_HISTORY`表格中选择最近保存的数据？

如何选择`AM_HISTORY`表中最多 10 或 50 条记录？

请帮忙...

```
USER_ID  SAVE_DATA  
   1     Data1 
   1     Data2 
   2     Data1 
   2     Data2 
```

听到 USER_ID 1 有 data1、data2 和 2 有 data1、data2（例如 ..）所以我想要用户 1 最近的数据。请帮忙....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:30:34.037

假设 id 只增加

```
SELECT * FROM AM_HISTORY ORDER BY ID DESC LIMIT 10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:30:41.180

这应该适合你：

```
SELECT * 
FROM AM_HISTORY 
ORDER BY ID DESC 
LIMIT 10; 
```

# azure - 如何在不明确指定版本的情况下将我的 Azure 角色切换到 Windows Server 2008 R2？

> ID：11775587
> 
> 赞同：0
> 
> 时间：2012-08-02T10:26:49.870
> 
> 标签：azure, windows-server-2008, windows-server-2008-r2, azure-web-roles

[Azure 服务配置](http://msdn.microsoft.com/en-us/library/windowsazure/ee758710.aspx)有两个参数 -`osFamily`和`osVersion`. `osFamily`可以`1`表示 Windows Server 2008（默认）或`2`Windows Server 2008 R2。`osVersion`默认情况`*`下表示“无论如何，这取决于 Azure 基础架构”。

现在我想从默认切换到 R2。我打开了配置文件并添加了`osFamily="2"`，现在当我尝试部署服务时，我收到以下错误消息：

> .cscfg 文件无效。如果 .cscfg 文件中设置了 osFamily 属性，还需要设置 osVersion 属性。osVersion 属性可以是用于自动操作系统升级的“*”，也可以是特定操作系统版本的名称。

这不知何故意味着现在我必须指定确切的操作系统版本。

我不想指定确切的版本，我宁愿“无论如何，这取决于 Azure，只是让它成为一些 Windows Server 2008 R2”。

如何在不明确指定确切操作系统版本的情况下切换到 Windows 2008 R2？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T21:00:55.617

如果我正确阅读了您的问题，您的 .cscfg 文件中有一行如下所示

```
<ServiceConfiguration serviceName="MyService" osFamily="2" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceConfiguration"> 
```

根据错误消息告诉您的内容，虽然`osVersion`可能默认为`*`，但如果您指定 ，则`osFamily`还必须指定`osVersion`. 在您的情况下，您想要添加属性并将其设置`*`为如下所示。

```
<ServiceConfiguration serviceName="MyService" osFamily="2" osVersion="*" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceConfiguration"> 
```

# c# - 如何保护 ASP.NET Web API

> ID：11775594
> 
> 赞同：404
> 
> 时间：2012-08-02T10:27:19.343
> 
> 标签：c#, asp.net-mvc, oauth, asp.net-web-api

我想使用 ASP.NET Web API 构建一个**RESTful** Web 服务，第三方开发人员将使用它来访问我的应用程序的数据。

我已经阅读了很多关于**OAuth**的内容，它似乎是标准，但是找到一个很好的示例，其中包含解释它如何工作的文档（并且确实有效！）似乎非常困难（尤其是对于 OAuth 的新手）。

是否有实际构建和工作的示例并显示如何实现它？

我已经下载了许多示例：

*   DotNetOAuth - 从新手的角度来看文档是无望的
*   Thinktecture - 无法构建

我还看过一些博客，建议使用一个简单的基于令牌的方案（像[这样](http://codebetter.com/johnvpetersen/2012/04/02/making-your-asp-net-web-apis-secure/)）——这似乎是在重新发明轮子，但它确实具有概念上相当简单的优势。

SO上似乎有很多这样的问题，但没有好的答案。

这个空间里的每个人都在做什么？

* * *

## 回答 #1

> 赞同：299
> 
> 时间：2012-08-02T17:02:43.377

**更新：**

对于任何对 JWT 感兴趣的人，我已将此链接添加到我的其他答案[中，如何在](https://stackoverflow.com/questions/40281050/jwt-authentication-for-asp-net-web-api/)此处为 ASP.NET Web API 使用 JWT 身份验证。

* * *

我们已经设法将 HMAC 身份验证应用于保护 Web API，并且效果很好。HMAC 身份验证为每个消费者使用一个密钥，消费者和服务器都知道对消息进行 hmac 哈希处理，应使用 HMAC256。大多数情况下，消费者的哈希密码被用作密钥。

消息通常由 HTTP 请求中的数据构建，甚至是添加到 HTTP 标头的自定义数据，消息可能包括：

1.  时间戳：发送请求的时间（UTC 或 GMT）
2.  HTTP 动词：GET、POST、PUT、DELETE。
3.  发布数据和查询字符串，
4.  网址

在引擎盖下，HMAC 身份验证将是：

消费者向 Web 服务器发送 HTTP 请求，在构建签名（hmac 哈希的输出）后，HTTP 请求的模板：

```
User-Agent: {agent}   
Host: {host}   
Timestamp: {timestamp}
Authentication: {username}:{signature} 
```

GET 请求示例：

```
GET /webapi.hmac/api/values

User-Agent: Fiddler    
Host: localhost    
Timestamp: Thursday, August 02, 2012 3:30:32 PM 
Authentication: cuongle:LohrhqqoDy6PhLrHAXi7dUVACyJZilQtlDzNbLqzXlw= 
```

要散列以获取签名的消息：

```
GET\n
Thursday, August 02, 2012 3:30:32 PM\n
/webapi.hmac/api/values\n 
```

带有查询字符串的 POST 请求示例（下面的签名不正确，仅作为示例）

```
POST /webapi.hmac/api/values?key2=value2

User-Agent: Fiddler    
Host: localhost    
Content-Type: application/x-www-form-urlencoded
Timestamp: Thursday, August 02, 2012 3:30:32 PM 
Authentication: cuongle:LohrhqqoDy6PhLrHAXi7dUVACyJZilQtlDzNbLqzXlw=

key1=value1&key3=value3 
```

要散列以获取签名的消息

```
GET\n
Thursday, August 02, 2012 3:30:32 PM\n
/webapi.hmac/api/values\n
key1=value1&key2=value2&key3=value3 
```

请注意，表单数据和查询字符串应按顺序排列，因此服务器上的代码获取查询字符串和表单数据以构建正确的消息。

当 HTTP 请求到达服务器时，实现一个身份验证动作过滤器来解析请求以获取信息：HTTP 动词、时间戳、uri、表单数据和查询字符串，然后基于这些构建带有密钥的签名（使用 hmac 哈希）服务器上的密钥（散列密码）。

密钥是使用请求中的用户名从数据库中获取的。

然后服务器代码将请求上的签名与构建的签名进行比较；如果相等，则认证通过，否则，认证失败。

构建签名的代码：

```
private static string ComputeHash(string hashedPassword, string message)
{
    var key = Encoding.UTF8.GetBytes(hashedPassword.ToUpper());
    string hashString;

    using (var hmac = new HMACSHA256(key))
    {
        var hash = hmac.ComputeHash(Encoding.UTF8.GetBytes(message));
        hashString = Convert.ToBase64String(hash);
    }

    return hashString;
} 
```

那么，如何防止重放攻击呢？

为时间戳添加约束，例如：

```
servertime - X minutes|seconds  <= timestamp <= servertime + X minutes|seconds 
```

（servertime：请求到达服务器的时间）

并且，将请求的签名缓存在内存中（使用MemoryCache，要在时限内保存）。如果下一个请求与前一个请求具有相同的签名，它将被拒绝。

演示代码放在这里： [https ://github.com/cuongle/Hmac.WebApi](https://github.com/cuongle/Hmac.WebApi)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-03-01T12:11:26.010

我建议首先从最直接的解决方案开始 - 在您的场景中，简单的 HTTP 基本身份验证 + HTTPS 就足够了。

如果没有（例如您不能使用 https，或者需要更复杂的密钥管理），您可以查看其他人建议的基于 HMAC 的解决方案。这种 API 的一个很好的例子是 Amazon S3 ( [http://s3.amazonaws.com/doc/s3-developer-guide/RESTAuthentication.html](http://s3.amazonaws.com/doc/s3-developer-guide/RESTAuthentication.html) )

我写了一篇关于 ASP.NET Web API 中基于 HMAC 的身份验证的博客文章。它讨论了 Web API 服务和 Web API 客户端，并且代码在 bitbucket 上可用。[http://www.piotrwalat.net/hmac-authentication-in-asp-net-web-api/](http://www.piotrwalat.net/hmac-authentication-in-asp-net-web-api/)

这是一篇关于 Web API 中的基本身份验证的帖子：[http ://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers/](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers/)

请记住，如果您要向第 3 方提供 API，您也很可能负责交付客户端库。基本身份验证在这里具有显着优势，因为它在大多数开箱即用的编程平台上都受支持。另一方面，HMAC 没有那么标准化，需要自定义实现。这些应该相对简单，但仍然需要工作。

PS。还有一个使用 HTTPS + 证书的选项。[http://www.piotrwalat.net/client-certificate-authentication-in-asp-net-web-api-and-windows-store-apps/](http://www.piotrwalat.net/client-certificate-authentication-in-asp-net-web-api-and-windows-store-apps/)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-08-13T07:25:28.423

你试过 DevDefined.OAuth 吗？

我已经使用它通过 2-Legged OAuth 来保护我的 WebApi。我还成功地使用 PHP 客户端对其进行了测试。

使用这个库添加对 OAuth 的支持非常容易。以下是实现 ASP.NET MVC Web API 提供程序的方法：

1) 获取 DevDefined.OAuth 的源代码：[https](https://github.com/bittercoder/DevDefined.OAuth) ://github.com/bittercoder/DevDefined.OAuth - 最新版本允许`OAuthContextBuilder`扩展。

2) 构建库并在您的 Web API 项目中引用它。

3) 创建自定义上下文构建器以支持从以下位置构建上下文`HttpRequestMessage`：

```
using System;
using System.Collections.Generic;
using System.Collections.Specialized;
using System.Diagnostics.CodeAnalysis;
using System.Linq;
using System.Net.Http;
using System.Web;

using DevDefined.OAuth.Framework;

public class WebApiOAuthContextBuilder : OAuthContextBuilder
{
    public WebApiOAuthContextBuilder()
        : base(UriAdjuster)
    {
    }

    public IOAuthContext FromHttpRequest(HttpRequestMessage request)
    {
        var context = new OAuthContext
            {
                RawUri = this.CleanUri(request.RequestUri), 
                Cookies = this.CollectCookies(request), 
                Headers = ExtractHeaders(request), 
                RequestMethod = request.Method.ToString(), 
                QueryParameters = request.GetQueryNameValuePairs()
                    .ToNameValueCollection(), 
            };

        if (request.Content != null)
        {
            var contentResult = request.Content.ReadAsByteArrayAsync();
            context.RawContent = contentResult.Result;

            try
            {
                // the following line can result in a NullReferenceException
                var contentType = 
                    request.Content.Headers.ContentType.MediaType;
                context.RawContentType = contentType;

                if (contentType.ToLower()
                    .Contains("application/x-www-form-urlencoded"))
                {
                    var stringContentResult = request.Content
                        .ReadAsStringAsync();
                    context.FormEncodedParameters = 
                        HttpUtility.ParseQueryString(stringContentResult.Result);
                }
            }
            catch (NullReferenceException)
            {
            }
        }

        this.ParseAuthorizationHeader(context.Headers, context);

        return context;
    }

    protected static NameValueCollection ExtractHeaders(
        HttpRequestMessage request)
    {
        var result = new NameValueCollection();

        foreach (var header in request.Headers)
        {
            var values = header.Value.ToArray();
            var value = string.Empty;

            if (values.Length > 0)
            {
                value = values[0];
            }

            result.Add(header.Key, value);
        }

        return result;
    }

    protected NameValueCollection CollectCookies(
        HttpRequestMessage request)
    {
        IEnumerable<string> values;

        if (!request.Headers.TryGetValues("Set-Cookie", out values))
        {
            return new NameValueCollection();
        }

        var header = values.FirstOrDefault();

        return this.CollectCookiesFromHeaderString(header);
    }

    /// <summary>
    /// Adjust the URI to match the RFC specification (no query string!!).
    /// </summary>
    /// <param name="uri">
    /// The original URI. 
    /// </param>
    /// <returns>
    /// The adjusted URI. 
    /// </returns>
    private static Uri UriAdjuster(Uri uri)
    {
        return
            new Uri(
                string.Format(
                    "{0}://{1}{2}{3}", 
                    uri.Scheme, 
                    uri.Host, 
                    uri.IsDefaultPort ?
                        string.Empty :
                        string.Format(":{0}", uri.Port), 
                    uri.AbsolutePath));
    }
} 
```

4) 使用本教程创建 OAuth 提供者：[http](http://code.google.com/p/devdefined-tools/wiki/OAuthProvider) ://code.google.com/p/devdefined-tools/wiki/OAuthProvider 。在最后一步（访问受保护资源示例）中，您可以在`AuthorizationFilterAttribute`属性中使用此代码：

```
public override void OnAuthorization(HttpActionContext actionContext)
{
    // the only change I made is use the custom context builder from step 3:
    OAuthContext context = 
        new WebApiOAuthContextBuilder().FromHttpRequest(actionContext.Request);

    try
    {
        provider.AccessProtectedResourceRequest(context);

        // do nothing here
    }
    catch (OAuthException authEx)
    {
        // the OAuthException's Report property is of the type "OAuthProblemReport", it's ToString()
        // implementation is overloaded to return a problem report string as per
        // the error reporting OAuth extension: http://wiki.oauth.net/ProblemReporting
        actionContext.Response = new HttpResponseMessage(HttpStatusCode.Unauthorized)
            {
               RequestMessage = request, ReasonPhrase = authEx.Report.ToString()
            };
    }
} 
```

我已经实现了我自己的提供程序，所以我没有测试上面的代码（当然除了 `WebApiOAuthContextBuilder`我在我的提供程序中使用的代码），但它应该可以正常工作。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2014-02-07T18:04:00.097

Web API 引入了一个属性`[Authorize]`来提供安全性。这可以全局设置（global.asx）

```
public static void Register(HttpConfiguration config)
{
    config.Filters.Add(new AuthorizeAttribute());
} 
```

或每个控制器：

```
[Authorize]
public class ValuesController : ApiController{
... 
```

当然，您的身份验证类型可能会有所不同，并且您可能希望执行自己的身份验证，当发生这种情况时，您可能会发现从 Authorizate Attribute 继承并扩展它以满足您的要求很有用：

```
public class DemoAuthorizeAttribute : AuthorizeAttribute
{
    public override void OnAuthorization(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        if (Authorize(actionContext))
        {
            return;
        }
        HandleUnauthorizedRequest(actionContext);
    }

    protected override void HandleUnauthorizedRequest(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        var challengeMessage = new System.Net.Http.HttpResponseMessage(System.Net.HttpStatusCode.Unauthorized);
        challengeMessage.Headers.Add("WWW-Authenticate", "Basic");
        throw new HttpResponseException(challengeMessage);
    }

    private bool Authorize(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        try
        {
            var someCode = (from h in actionContext.Request.Headers where h.Key == "demo" select h.Value.First()).FirstOrDefault();
            return someCode == "myCode";
        }
        catch (Exception)
        {
            return false;
        }
    }
} 
```

在你的控制器中：

```
[DemoAuthorize]
public class ValuesController : ApiController{ 
```

这是 WebApi 授权的其他自定义实现的链接：

[http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-membership-provider/](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-membership-provider/)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-05-20T03:47:39.013

如果您想以服务器到服务器的方式保护您的 API（不重定向到网站进行 2 腿身份验证）。您可以查看 OAuth2 Client Credentials Grant 协议。

[https://dev.twitter.com/docs/auth/application-only-auth](https://dev.twitter.com/docs/auth/application-only-auth)

我开发了一个库，可以帮助您轻松地将这种支持添加到您的 WebAPI。您可以将其安装为 NuGet 包：

[https://nuget.org/packages/OAuth2ClientCredentialsGrant/1.0.0.0](https://nuget.org/packages/OAuth2ClientCredentialsGrant/1.0.0.0)

该库面向 .NET Framework 4.5。

将包添加到项目后，它将在项目的根目录中创建一个自述文件。您可以查看该自述文件以了解如何配置/使用此软件包。

干杯!

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-10-16T11:36:21.280

继续@ Cuong Le的回答，我防止重放攻击的方法是

// 使用共享私钥（或用户密码）在客户端加密 Unix 时间

// 将其作为请求标头的一部分发送到服务器（WEB API）

// 使用共享私钥（或用户密码）解密服务器上的 Unix 时间（WEB API）

// 检查客户端的 Unix 时间和服务器的 Unix 时间的时间差，不能大于 x 秒

// 如果用户 ID/哈希密码是正确的并且解密的 UnixTime 在服务器时间的 x 秒内，那么它是一个有效的请求

# xslt-1.0 - 在 xslt 1.0 中对嵌套元素进行分组

> ID：11775595
> 
> 赞同：1
> 
> 时间：2012-08-02T10:27:22.320
> 
> 标签：xslt-1.0, xslkey, xsl-grouping

我一直在查看 XSLT 1.0 中的 Muenchian 分组示例，特别是这里的[示例](https://stackoverflow.com/questions/2146648/how-to-apply-group-by-on-xslt-elements)。但是我无法让它在更复杂的 XML 结构上工作。

我的 XML 目前看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<ContestResults>
  <Contests>
    <Contest sportId="35">
      <Sport>Beach Volleyball</Sport>
      <Event>Men's</Event>
      <Ranks>
        <Rank position="1" eventId="1">
          <Athlete>Athlete 1a / Athlete 2a [GER]</Athlete>
          <Result>2</Result>
        </Rank>
        <Rank position="2" eventId="1">
          <Athlete>Athlete 1b / Athlete 2b [NED]</Athlete>
          <Result>0</Result>
        </Rank>
      </Ranks>
    </Contest>
    <Contest sportId="32">
      <Sport>Tennis</Sport>
      <Event>Women's Singles</Event>
      <Ranks>
        <Rank position="1" eventId="2">
          <Athlete>Tennis Athlete 1</Athlete>
          <Result>2</Result>
        </Rank>
        <Rank position="2" eventId="2">
          <Athlete>Tennis Athlete 2</Athlete>
          <Result>1</Result>
        </Rank>
      </Ranks>
    </Contest>
    <Contest sportId="35">
      <Sport>Beach Volleyball</Sport>
      <Event>Men's</Event>
      <Ranks>
        <Rank position="1" eventId="3">
          <Athlete>Athlete 3a / Athlete 4a [AUT]</Athlete>
          <Result>2</Result>
        </Rank>
        <Rank position="2" eventId="3">
          <Athlete>Athlete 3b / Athlete 4b [SUI]</Athlete>
          <Result>0</Result>
        </Rank>
      </Ranks>
    </Contest>
    </Contests>
</ContestResults> 
```

但是，当它们具有相同的 Sport 和 Event 时，我想将 Rank 节点分组到相同的 Ranks 父级下。所以我希望结果看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<ContestResults>
  <Contests>
    <Contest sportId="35">
      <Sport>Beach Volleyball</Sport>
      <Event>Men's</Event>
      <Ranks>
        <Rank position="1" eventId="1">
          <Athlete>Athlete 1a / Athlete 2a [GER]</Athlete>
          <Result>2</Result>
        </Rank>
        <Rank position="2" eventId="1">
          <Athlete>Athlete 1b / Athlete 2b [NED]</Athlete>
          <Result>0</Result>
        </Rank>
        <Rank position="1" eventId="3">
          <Athlete>Athlete 3a / Athlete 4a [AUT]</Athlete>
          <Result>2</Result>
        </Rank>
        <Rank position="2" eventId="3">
          <Athlete>Athlete 3b / Athlete 4b [SUI]</Athlete>
          <Result>0</Result>
        </Rank>
      </Ranks>
    </Contest>
    <Contest sportId="32">
      <Sport>Tennis</Sport>
      <Event>Women's Singles</Event>
      <Ranks>
        <Rank position="1" eventId="2">
          <Athlete>Tennis Athlete 1</Athlete>
          <Result>2</Result>
        </Rank>
        <Rank position="2" eventId="2">
          <Athlete>Tennis Athlete 2</Athlete>
          <Result>1</Result>
        </Rank>
      </Ranks>
    </Contest>
  </Contests>
</ContestResults> 
```

我只是有点迷失如何做到这一点，因为唯一的其他例子是处理一个更简单的结构，我不确定它是否可能或者我的密钥和模板需要如何构建才能做到这一点。谁能提供一些示例如何实现？

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:30:41.207

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kContestById" match="Contest" use="@sportId"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="Contests">
      <Contests>
       <xsl:apply-templates/>
      </Contests>
 </xsl:template>

 <xsl:template match=
  "Contest
    [not(generate-id()
    =
     generate-id(key('kContestById', @sportId)[1]))
     ]"/>
 <xsl:template match="Ranks">
  <Ranks>
    <xsl:apply-templates select="key('kContestById', ../@sportId)/Ranks/Rank"/>
  </Ranks>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<ContestResults>
  <Contests>
    <Contest sportId="35">
      <Sport>Beach Volleyball</Sport>
      <Event>Men's</Event>
      <Ranks>
        <Rank position="1" eventId="1">
          <Athlete>Athlete 1a / Athlete 2a [GER]</Athlete>
          <Result>2</Result>
        </Rank>
        <Rank position="2" eventId="1">
          <Athlete>Athlete 1b / Athlete 2b [NED]</Athlete>
          <Result>0</Result>
        </Rank>
      </Ranks>
    </Contest>
    <Contest sportId="32">
      <Sport>Tennis</Sport>
      <Event>Women's Singles</Event>
      <Ranks>
        <Rank position="1" eventId="2">
          <Athlete>Tennis Athlete 1</Athlete>
          <Result>2</Result>
        </Rank>
        <Rank position="2" eventId="2">
          <Athlete>Tennis Athlete 2</Athlete>
          <Result>1</Result>
        </Rank>
      </Ranks>
    </Contest>
    <Contest sportId="35">
      <Sport>Beach Volleyball</Sport>
      <Event>Men's</Event>
      <Ranks>
        <Rank position="1" eventId="3">
          <Athlete>Athlete 3a / Athlete 4a [AUT]</Athlete>
          <Result>2</Result>
        </Rank>
        <Rank position="2" eventId="3">
          <Athlete>Athlete 3b / Athlete 4b [SUI]</Athlete>
          <Result>0</Result>
        </Rank>
      </Ranks>
    </Contest>
    </Contests>
</ContestResults> 
```

**产生想要的正确结果：**

```
<ContestResults>
   <Contests>
      <Contest sportId="35">
         <Sport>Beach Volleyball</Sport>
         <Event>Men's</Event>
         <Ranks>
            <Rank position="1" eventId="1">
               <Athlete>Athlete 1a / Athlete 2a [GER]</Athlete>
               <Result>2</Result>
            </Rank>
            <Rank position="2" eventId="1">
               <Athlete>Athlete 1b / Athlete 2b [NED]</Athlete>
               <Result>0</Result>
            </Rank>
            <Rank position="1" eventId="3">
               <Athlete>Athlete 3a / Athlete 4a [AUT]</Athlete>
               <Result>2</Result>
            </Rank>
            <Rank position="2" eventId="3">
               <Athlete>Athlete 3b / Athlete 4b [SUI]</Athlete>
               <Result>0</Result>
            </Rank>
         </Ranks>
      </Contest>
      <Contest sportId="32">
         <Sport>Tennis</Sport>
         <Event>Women's Singles</Event>
         <Ranks>
            <Rank position="1" eventId="2">
               <Athlete>Tennis Athlete 1</Athlete>
               <Result>2</Result>
            </Rank>
            <Rank position="2" eventId="2">
               <Athlete>Tennis Athlete 2</Athlete>
               <Result>1</Result>
            </Rank>
         </Ranks>
      </Contest>
   </Contests>
</ContestResults> 
```

**说明**：

正确使用**[Muenchian 分组方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**并覆盖**[身份规则](http://www.dpawson.co.uk/xsl/sect2/identity.html)**。

# asp.net-mvc-3 - 在视图客户端验证中使用 IEnumerable 时不起作用？

> ID：11775602
> 
> 赞同：0
> 
> 时间：2012-08-02T10:27:39.007
> 
> 标签：asp.net-mvc-3, razor, unobtrusive-validation

我将 List 从 Model 传递到 view ，所以我在 view 中指定了这个 IEnumerable。在这种情况下，客户端验证不会触发

看法 ：

```
@model  IEnumerable<ShoppingCart.Models.ShoppingClass>
@{
    ViewBag.Title = "Display";

}
<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>

@Html.ValidationSummary(true)
@using (Html.BeginForm())
{

    <table>
        <tr>
            <td>@Html.Label("BrandName")
            </td>
            <td>@Html.TextBox("BrandName")
                <div>
                    @Html.ValidationMessage("BrandName")</div>
            </td>
            <td>
                <input type="submit" value="Search" name="Search" />
            </td>
        </tr>
    </table>

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:39:21.810

你写的是错误的。

您的视图是强类型的，但是您没有使用强类型的属性或验证消息。此外，您在表单之外获得了验证摘要......这不起作用。

```
@using (Html.BeginForm())
@Html.ValidationSummary(true) 
```

然后，您需要执行以下操作：

```
<table>
    @foreach (ShoppingClass shoppingClass in Model) {
    <tr>
        <td>@Html.LabelFor(x => x.BrandName)
        </td>
        <td>@Html.TextBoxFor(x => x.BrandName)
            <div>
                @Html.ValidationMessageFor(x => x.BrandName)</div>
        </td>
    </tr>
    }
</table>
<input type="submit" value="Search" name="Search" /> 
```

我不确定为什么您对每个进入相同控制器和操作的项目都有一个搜索按钮。但我会留给您自己弄清楚。

# php - PHP FTP 使用 utf8 编码获取文件夹名称

> ID：11775604
> 
> 赞同：0
> 
> 时间：2012-08-02T10:27:43.687
> 
> 标签：php, utf-8, ftp

我只是无法让它工作，基本上我在 ftp 服务器上显示文件，这工作正常，但一些文件夹名称有德语字符，如 ä ö ü 或法语字符。我将下面的行放入 php 代码中，看看它是否有帮助，但它只去掉了法语字符，但是德语字符仍然有 � 图标而不是实际字符...

```
header('Content-Type: text/html; charset=utf-8'); 
```

我将不胜感激任何帮助。以下是整个文件：

**导入.php**

```
<html>
<head>
    <title>Import</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link type="text/css" rel="stylesheet" href="css/import.css"/>
    <style type="text/css">
        .folder_hilighted table tr td div.name_tag_name{
            background: #75B323;
            color: #ffffff;
            border-radius: 20px;
            text-shadow: 0px -1px 0px #5D855A;
        }
    </style>
</head>
<body><br>
    <table width="100%" cellspacing="0" cellpadding="0"><tr><td>
    <ul class="folders">
    <?php
        ini_set("max_execution_time",100000);
        $folder = $_GET['folder'];

        // set up basic connection
        $ftp_server = "xxx.xxx.xx.xx";
        $ftp_user_name = "admin";
        $ftp_user_pass = "password";

        // set up basic connection
        $conn_id = ftp_connect($ftp_server);

        // login with username and password
        $login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);

        // get the file list for /
        if($folder==""){
            $buff = ftp_nlist($conn_id, '/array1/MediaBox/iTunes/');
        }
        else{
            $buff = ftp_nlist($conn_id, '/array1/MediaBox/iTunes/'.$folder.'/');
        }

        // close the connection
        ftp_close($conn_id);

        // output the buffer
        for($i=0;$i<=sizeof($buff)-1;$i++){
            if(is_dir('ftp://'.$ftp_user_name.':'.$ftp_user_pass.'@'.$ftp_server.$buff[$i]) && $buff[$i]!="/array1/MediaBox/iTunes/Mobile Applications" && $buff[$i]!="/array1/MediaBox/iTunes/Automatically Add to iTunes.localized" && $buff[$i]!="/array1/MediaBox/iTunes/Books" && $buff[$i]!="/array1/MediaBox/iTunes/Tones"){
                if($folder==""){
                    $folder_name = str_replace(array("/array1/MediaBox/iTunes/"), array(""), $buff[$i]);
                    $folder_name = mb_convert_encoding($folder_name, 'UTF-8', mb_detect_encoding($folder_name));
                    $folder_name = htmlspecialchars($folder_name, ENT_QUOTES, 'UTF-8');
                }
                else{
                    $folder_name = str_replace(array("/array1/MediaBox/iTunes/".$folder."/"), array(""), $buff[$i]);
                    $folder_name = mb_convert_encoding($folder_name, 'UTF-8', mb_detect_encoding($folder_name));
                    $folder_name = htmlspecialchars($folder_name, ENT_QUOTES, 'UTF-8');
                    $last_folder = str_replace(array("/array1/MediaBox/iTunes/"), array(""), $buff[$i]);
                    $last_folders = explode("/", $last_folder);
                    for($k=0;$k<=count($last_folders);$k++){
                        if($k==count($last_folders)){
                            $prev_folder = $last_folders[$k-3];
                        }
                    }
                }
            ?>
                <li align="center" title="<?php echo $folder_name ?>" id="<?php echo md5($folder_name); ?>"  onClick="hilight_folder('<?php echo md5($folder_name); ?>');" ondblclick="change_folder('<?php echo $folder_name; ?>')" style="cursor: pointer; height: 90px;">
                    <table cellspacing="0" cellpadding="0">
                        <tr>
                            <td align="center">
                                <img height="75" style="padding-left: 5px; padding-right: 5px; padding-top: 5px;" src="img/folder.png">
                                <div class="prev_folder" style="display: none;"><?php echo $prev_folder ?></div>
                            </td>
                        </tr>
                        <tr>
                            <td align="center" class="name_tag">
                                <div class="name_tag_name" style="margin-top: 2px; width: auto;">
                                    <?php
                                        $short_folder = substr($folder_name, 0, 12); 
                                        if($folder_name == $short_folder){

                                        }
                                        else{
                                            $short_folder = $short_folder."...";
                                        }
                                        echo $short_folder;
                                    ?>
                                </td>
                            </div>
                        </tr>
                    </table>
                </li>
            <?php
            }
            else if($buff[$i]!="/array1/MediaBox/iTunes/Mobile Applications" && $buff[$i]!="/array1/MediaBox/iTunes/Automatically Add to iTunes.localized" && $buff[$i]!="/array1/MediaBox/iTunes/Books" && $buff[$i]!="/array1/MediaBox/iTunes/Tones" && $buff[$i]!="/array1/MediaBox/iTunes/" && $buff[$i]!="/array1/MediaBox/iTunes/Icon"){
                if($folder==""){
                    $folder_name = str_replace(array("/array1/MediaBox/iTunes/"), array(""), $buff[$i]);
                }
                else{
                    $folder_name = str_replace(array("/array1/MediaBox/iTunes/".$folder."/"), array(""), $buff[$i]);
                    $last_folder = str_replace(array("/array1/MediaBox/iTunes/"), array(""), $buff[$i]);
                    $last_folders = explode("/", $last_folder);
                    for($k=0;$k<=count($last_folders);$k++){
                        if($k==count($last_folders)){
                            $prev_folder = $last_folders[$k-3];
                        }
                    }
                }
                ?>
                    <li align="center" title="<?php echo $folder_name ?>" id="<?php echo md5($folder_name); ?>"  onClick="hilight_folder('<?php echo md5($folder_name); ?>');" ondblclick="change_folder('<?php echo str_replace(array("/array1/MediaBox/iTunes/"), array(""), $buff[$i]); ?>')" style="cursor: pointer; height: 90px;">
                        <table cellspacing="0" cellpadding="0">
                            <tr>
                                <td align="center">
                                    <img height="75" style="padding-left: 5px; padding-right: 5px; padding-top: 5px;" src="img/music_file.png">
                                    <div class="prev_folder" style="display: none;"><?php echo $prev_folder ?></div>
                                </td>
                            </tr>
                            <tr>
                                <td align="center" class="name_tag">
                                    <div class="name_tag_name" style="margin-top: 2px; width: auto;">
                                        <?php
                                            $short_folder = substr($folder_name, 0, 12); 
                                            if($folder_name == $short_folder){

                                            }
                                            else{
                                                $short_folder = $short_folder."...";
                                            }
                                            echo $short_folder;
                                        ?>
                                    </td>
                                </div>
                            </tr>
                        </table>
                    </li>
                <?php
            }
        }
        ftp_close($conn_id);
    ?>
    </ul>
</td></tr>
<tr><td>
    <div style="height: 60px;">&nbsp;</div>
</td></tr></table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-29T13:40:59.837

如果可能（如果 FTP 服务器支持）尝试调用：

```
ftp_raw($conn_id, "OPTS UTF8 ON"); 
```

此命令为目录列表 (ftp_nlist) 启用 UTF-8 编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:03:43.670

好的，我已经制定了一项可能对其他人有用的工作：

```
str_replace(array('%82','%94','+'),array('&#233;','&#246;',' '),urlencode($folder_name)); 
```

这不是最好的方法，但它对我有用，如果你对一个字符串进行 url 编码，它会将笨拙的字符更改为例如 %82 ......然后你可以用 HTML 代码替换这些。

# asp-classic - 使用 ASP 经典将用户重定向到新页面

> ID：11775608
> 
> 赞同：3
> 
> 时间：2012-08-02T10:27:55.533
> 
> 标签：asp-classic

我是 ASP 新手。在我当前的项目中，我想添加一个横幅，通过单击横幅，我们将显示一个包含登录和新用户选项的页面。
如果用户是新用户，则单击 NewUser 链接会重定向到我在项目中已有的注册页面，并创建一个用户。
注册后，我想将同一用户重定向到一个页面（例如 xyz.asp）。

请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T10:42:39.827

[您可以使用Response.Redirect](http://www.w3schools.com/asp/met_redirect.asp)重定向用户。

例子

如果要将它们发送到同一文件夹中的页面：

```
<%
Response.Redirect "xyz.asp"
%> 
```

如果要将它们发送到父文件夹中的页面：

```
<%
Response.Redirect "../xyz.asp"
%> 
```

如果您想将它们发送到不同站点上的页面：

```
<%
Response.Redirect "http://www.example.com/"
%> 
```

# xml - 为什么我会收到此 POST 的“HTTP 状态 400 - 非法请求正文”？

> ID：11775609
> 
> 赞同：0
> 
> 时间：2012-08-02T10:27:56.610
> 
> 标签：xml, http

```
POST http://anyservice.com/my/servlet/interface/v1/book/events  
Content-Type: application/xml  
Accept: application/xml  
Authorization: Basic cXRE456ggz  

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<CreateEvent>
  <serviceType>ABC</serviceType>
  <Version>2&#xD;</Version>
  <data>xyz</data>
</CreateEvent> 
```

我猜测 CRLF 即`#xD;`在 HTTP BODY 中间是非法的，但我在任何 RFC 中都找不到参考。

为什么我会收到此 POST 的“HTTP 状态 400 - 非法请求正文”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:17:49.057

这并不表示请求体不符合 HTTP，而是表示请求不符合应用程序。可以说 400 在这种情况下是错误的响应代码，但同时我也知道自己在这种情况下使用它。

真的（恕我直言），当请求不符合上层应用程序时，应该使用单独的响应代码，并且 400 应该保留用于（[如 RFC2616 所述](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.1)）HTTP 协议级别的“格式错误的语法”。但是没有，所以 400 是最有意义的。

我猜测它为什么会在您的输入中出现问题是因为您有 XML 语法错误 - 开始`<CreateEvent>`标签丢失它正在关闭`>`：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><CreateEvent<serviceType>ABC</serviceType>...
                                                                  ^^ Missing > 
```

他们也可能不喜欢回车，在这种情况下只需将其删除即可。

# iphone - 代表被派到错误的班级

> ID：11775613
> 
> 赞同：0
> 
> 时间：2012-08-02T10:28:10.997
> 
> 标签：iphone, objective-c, ios, delegates

我将导航栏子类化，使标题视图可点击。单击时，它将呈现另一个视图控制器。我正在导航栏中创建一个协议，它将告诉导航控制器标题视图已被单击。这是我的导航栏的定义方式：

**导航栏.h：**

```
@protocol NavigationBarDelegate;

@interface NavigationBar : UINavigationBar
{
    id <NavigationBarDelegate> delegate;
    BOOL _titleClicked;
}

@property (nonatomic, assign) id <NavigationBarDelegate> delegate;

@end

@protocol NavigationBarDelegate
@optional
- (void)titleButtonClicked:(BOOL)titleClicked;
@end 
```

委托实现了一种可选方法。该`.m`文件如下：

**导航栏.m：**

```
@implementation NavigationBar

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        _titleClicked = 0;
    }
    return self;
}

- (void)drawRect:(CGRect)rect
{
    self.tintColor = [UIColor colorWithRed:(111/255.f) green:(158/255.f) blue:(54/255.f) alpha:(255/255.f)];

    UIImage *image = [UIImage imageNamed:@"titlelogo.png"];

    UIButton *titleButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, image.size.width, image.size.height)];
    titleButton.backgroundColor = [UIColor colorWithPatternImage:image];
    [titleButton addTarget:self action:@selector(titleButton:) forControlEvents:UIControlEventTouchUpInside];

    //        self.navigationController.delegate = self;
    [self.topItem setTitleView:titleButton];

    [super drawRect:rect];
}

- (void)titleButton:(UIButton *)sender
{
    _titleClicked = !_titleClicked;
    [self.delegate titleButtonClicked:_titleClicked];
} 
```

这将创建一个带有徽标的导航栏，并`titleButton`在单击标题按钮时调用该方法。到目前为止一切都很好，导航栏显示得很好。

在我的`RootViewController`：

```
NavigationBar *navigationBar = [[NavigationBar alloc] initWithFrame:CGRectMake(0.0f, 0.0f, self.view.frame.size.width, 44.0f)];
navigationBar.delegate = self;
[self.navigationController setValue:navigationBar forKey:@"navigationBar"]; 
```

`titleButtonClicked`也有一个实现。但是，当我单击标题视图时，出现以下错误：`-[UINavigationController titleButtonClicked:]: unrecognized selector sent to instance`

为什么我会被`titleButtonClicked`送到`UINavigationController`？我需要在导航控制器中做些什么吗？我只是使用普通的 old `UINavigationController`。我也需要子类化吗？如果是这样，为什么？

**编辑：**

`po self.delegate`在线调用`[self.delegate titleViewClicked:_titleClicked];`会`NavigationBar.m`产生以下结果。委托是如何改变其类型的？我该如何解决？

```
(lldb) po self.delegate
(objc_object *) $1 = 0x07550170 <UINavigationController: 0x7550170> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T11:59:48.853

正如@idz 所说，问题出在您的：

```
@property (nonatomic, assign) delegete; 
```

~~难道你不觉得你甚至没有一个很奇怪：~~

 ~~```
@synthesize delegete; 
```~~  ~~那是因为`UINavigationBar`已经`delegate`像 idz 所说的那样定义了一个变量。

将您的声明更改为：

```
// use unsafe_unretained in ARC, not assign
@property (nonatomic, unsafe_unretained) myDelegete; 
```

而且当然

```
@synthesize myDelegate; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:38:27.273

您的`delegate`和`UINavigationBar`的`delegate`财产之间存在冲突/歧义。重命名您的代表以消除歧义。~~

# javascript - 我没有构建的系统中的 JSON 解析错误

> ID：11775616
> 
> 赞同：1
> 
> 时间：2012-08-02T10:28:25.500
> 
> 标签：javascript, json, parsing, yui

我最近的任务是将 Intranet 系统从一台旧服务器移动到一台新服务器。它使用了很多 YUI 库，以及我没有经验的 javascript/json。当我尝试加载其中一个页面时（我无法将您链接到它，因为它的 Intranet）我收到这样的错误：（我试图打印出任何有帮助的变量或内容。

```
e: SyntaxError: parseJSON
o: [object Object]
data: undefined 
```

此错误是由以下 try/catch 引起的：

```
var loadData = function(data) {
    if(data)
        data += '&offset=' + offset;
    else
        data = 'offset=' + offset;

    var callback = {
        success: function(o) {
            try {
                var data = YAHOO.lang.JSON.parse(o.responseText);
            } catch(e) { alert('e: ' + e + '\no: ' + o + '\ndata: ' + data} 
```

我真的不知道 json 是关于什么的，但我假设它没有从某个地方获取（正确的）数据。是这个页面上的问题还是其他地方的问题？

编辑：我很欣赏这可能没有足够的信息进行故障排除，我对 JSON/YUI 一无所知，如果您需要了解其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:37:23.767

您必须知道是什么`o.responseText`，因为`o`存在`Object`并不能真正显示所讨论的 JSON 字符串是什么。将警报更改为：

```
alert('e: ' + e + '\no.responseText: ' + o.responseText + '\ndata: ' + data); 
```

可能有助于诊断问题。除非您解释什么是 JSON 字符串以及它来自何处，否则没有人可以回答您问题是否出在该页面上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:35:40.337

看起来 o.responseText 不是有效的 JSON - 您可以在调试中打印出来吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T10:38:13.050

如果你能得到 responseText，你可以通过一个 JSON 验证器来运行它，比如[http://jsonlint.com](http://jsonlint.com)，它会让你知道错误的位置。

# redirect - 重定向 301 无法正常工作

> ID：11775620
> 
> 赞同：1
> 
> 时间：2012-08-02T10:28:39.933
> 
> 标签：redirect

我正在尝试做一个简单的 Redirect 301，但在这种情况下我遇到了一个问题：

这是我的重定向：

```
Redirect 301 /negocios/wisconsin/wi/ www.domain.com/directorio/category/121/Wisconsin.html 
```

当我输入这个网址时：

```
www.domain.com/negocios/wisconsin/wi/servicios-multiples/ 
```

它应用重定向规则并将浏览器发送到此 URL：

```
www.domain.com/directorio/category/121/Wisconsin.htmlservicios-multiples/ 
```

这是一个错误的网址。可能是因为 URL (/negocios/wisconsin/wi/) 的一部分与我尝试重定向的 URL 相似。

即使我输入另一个类似的 URL，我如何才能将重定向仅应用于此 URL (/negocios/wisconsin/wi/)

```
www.domain.com/negocios/wisconsin/wi/WHATEVER-HERE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:18:34.573

尝试使用 a`RedirectMatch`代替：

```
RedirectMatch 301 ^/negocios/wisconsin/wi/$ www.domain.com/directorio/category/121/Wisconsin.html 
```

这告诉 apache 只在精确匹配上重定向，而不是将路径节点链接在一起，这就是这样`Redirect`做的。

# javascript - 变量中的值未在标签标签中更新

> ID：11775621
> 
> 赞同：0
> 
> 时间：2012-08-02T10:28:40.817
> 
> 标签：javascript, html

当我尝试将变量“a”中的值更新为标签标签的类属性时，我的代码中有一个小问题。谁能帮我吗。这是我的代码

```
<html>
<head>
<style>
label.visible {visibility:visible}
label.hidden {visibility:hidden}
</style>
<script type="text/javascript">
var a;
function doset()
{
a="hidden";
alert(a);
return a;
}
</script>
</head>
<body>
<form>
<label class=visible>Hello</label>
<button onclick="doset()">v</button><br>
<label class=a>Hello1</label><br>
<label class=a>Hello2</label><br>
<label class=a>Hello3</label><br>
<label class=a>Hello4</label><br>
<label class=a>Hello5</label><br>
</form>
</body>
</html> 
```

这是小提琴：http: [//jsfiddle.net/M8CXN/](http://jsfiddle.net/M8CXN/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:40:07.330

`class=a`

这不会**将**类名绑定到 javascript 全局变量`a`；它们在不同的上下文中是不同的东西。

如果要操作类，则必须通过 DOM 进行。最简单的方法是使用容器；

```
<div id="myItems">
   <label>Hello1</label><br>
   <label>Hello2</label><br>
   ... 
```

和

```
function doset() {
   a="hidden";
   document.getElementById("myItems").style.visibility = a;   
   alert(a);
} 
```

用

```
<button onclick="doset(); return false;">v</button><br> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:36:33.173

如果您将所有相关标签归为同一类：

```
<label class="myclass">Hello1</label><br>
<label class="myclass">Hello2</label><br>
<label class="myclass">Hello3</label><br> 
```

然后，您可以定位这些并添加或删除您想要的类：

```
$('.myclass').addClass('hidden');
$('.myclass').removeClass('hidden'); 
```

要不就：

```
$('.myclass').hide();
$('.myclass').show(); 
```

（使用[jQuery](http://jquery.com)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T11:03:30.137

```
<html>
<head>
<style>
label.visible {visibility:visible}
label.hidden {visibility:hidden}
</style>
<script type="text/javascript">

function setLabelsClass(){
    var form = document.getElementsByTagName('form');
    var labels = form[0].getElementsByTagName('label');
    for(var i=0,len=labels.length;i<len;i++){
        var lbl_class = labels[i].getAttribute('class');
        if(lbl_class==="") labels[i].setAttribute('class','hidden');
    }
}
</script>
</head>
<body>
<form>
<label class=visible>Hello</label>
<button onclick="setLabelsClass(); return false;">v</button><br>
<label>Hello1</label><br>
<label class="">Hello2</label><br>
<label class="">Hello3</label><br>
<label class="">Hello4</label><br>
<label class="">Hello5</label><br>
</form>
</body>
</html>​ 
```

如果您不提供 AJAX，这毕竟不是一个好方法，因为您的表单不再提交。再想一想，我感觉你可能不明白我在说什么，但你会明白的。

# javascript - 以编程方式在 Dynamics CRM 2011 中注册 OnLoad 处理程序（用于表单）

> ID：11775625
> 
> 赞同：1
> 
> 时间：2012-08-02T10:28:49.513
> 
> 标签：javascript, dynamics-crm, dynamics-crm-2011

有没有办法`OnLoad()`在代码中注册处理程序？

**前任：**

添加脚本作为**表单库**（自定义表单等）。它包含仅在加载表单后才执行的代码。我想这可以通过使用`setTimeout()`/ `setInterval()`- 并检查`Xrm.Page.data`对象来完成，但是还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T11:17:02.870

首先，为什么要以编程方式进行？

*   表单属性 -> 事件处理程序 -> OnLoad -> 添加 -> 放置表单加载后要执行的函数。

否则，您可以使用 jQuery 以编程方式执行此操作。像这样 ：

```
$(document).ready(function() {
     // your code
}); 
```

当然，您必须在表单的库中添加 jQuery。

小心使用 jQuery 就绪事件。数据是异步检索的。jQuery 就绪事件可能会在 CRM 完成加载之前触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-05T20:58:49.537

一个非常古老的问题和答案，但非常错误。请不要使用 jQuery 执行此操作。表单事件在 formxml 中注册。如果您希望您的代码作为解决方案的一部分工作，您需要以与 UI 相同的方式更新 formxml。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-07T06:53:26.737

我知道这个问题很老了，我们现在有 CRM 2016。最近在尝试修复 CRM 2016 中的错误时 [。https://community.dynamics.com/crm/f/117/t/186877](https://community.dynamics.com/crm/f/117/t/186877)

我需要调用/添加一个函数，例如`function abc()` `OnLoad`of 。`All Forms``All Entities`

我已经按照以下方式完成了。希望这对某人有所帮助。

1.  [从https://www.xrmtoolbox.com/](https://www.xrmtoolbox.com/)下载 XrmToolBox
2.  使用`Form Libraries Manager`XrmToolBox 中的插件将 JS 文件添加`abc()`到 CRM 中的所有表单或 Selected 中，如果需要，如下所示。
3.  在您添加到所有表单的 JS 文件中，在第一行添加以下内容。

    ```
    setTimeout(function () {
    abc();
    }, 1500); 
    ```

[![在此处输入图像描述](../Images/611ab6b5462d85ed8fcd0b9c30e0ec2b.png)](https://i.stack.imgur.com/kWHwq.png)

使用上述过程将调用每个表单的`abc()`on Load，而无需在每个表单上手动添加处理程序。

# wcf - 如何手动解析 WCF 二进制响应 (xml)

> ID：11775628
> 
> 赞同：0
> 
> 时间：2012-08-02T10:28:54.733
> 
> 标签：wcf, binary

我需要解析 WCF 二进制响应。原因是我没有合同也没有元数据，我只能使用 WebClient 调用带有参数的 wcf 服务。我现在得到的是内部带有 xml 的二进制响应，但是当我想用 BinaryFormatter 反序列化它并加载 xml 文档时，由于领先数据，它给了我一个错误。有什么课程可以为我做这件事吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:57:39.743

我也在寻找类似的东西，我遇到了[https://github.com/waf/WCF-Binary-Message-Inspector](https://github.com/waf/WCF-Binary-Message-Inspector)

它可能会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T19:52:49.770

谢谢你的回复。实际上我最终关注了这篇博文（提琴手插件）：

[http://blog.functionalfun.net/2009/11/fiddler-plug-in-for-inspecting-wcf.html](http://blog.functionalfun.net/2009/11/fiddler-plug-in-for-inspecting-wcf.html)

还有一个源代码链接：

[http://archive.msdn.microsoft.com/wcfbinaryinspector](http://archive.msdn.microsoft.com/wcfbinaryinspector)

希望它会有所帮助

# ios - 莫名其妙的崩溃；NSRangeException

> ID：11775634
> 
> 赞同：0
> 
> 时间：2012-08-02T10:29:05.160
> 
> 标签：ios, uitableview, nsmutablearray, nsrangeexception

完成加载和显示`UITableView`已正确填充的 a 后，我的应用程序然后崩溃并给出以下输出：

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 14 beyond bounds [0 .. 13]' 
```

我已经检查了导致 tableview 可能影响它的所有可变数组的内容，它们都返回了预期的数字`[mutableArray count];`。最奇怪的部分是没有可以填充的单个可变数组，`[0 .. 13]`因为整个应用程序中没有任何地方具有 14 个索引的数组。

`UITableView`按预期返回单独的单元格，并且只调用一次`cellForRowAtIndexPath`（使用检查`NSLog`）。然后在视图出现后大约半秒到一秒崩溃`NSRangeException`。

该类中唯一的可变数组`UITableView`已被检查`[mutableArray count];`并仅返回 1，这是生成的唯一单元格。

当控制台读数没有指示数组是什么或在哪里时，我该如何进行调试，并且突出显示的行只是 main 方法中自动释放的 SIGBART？

发生崩溃的视图中的代码：

头文件：

```
#import <UIKit/UIKit.h>
#import "ActionNote.h"
#import <sqlite3.h>
#import "DBAccess.h"
#import "ActionNoteViewDetails.h"

@class ActionNoteViewDetails;

@interface ActionNoteListingViewByDates : UITableViewController<UITableViewDataSource, UITableViewDelegate>{

    NSInteger domain_id;
    NSString *url;
    NSString *selectedDate;

    NSString *dbname; 
    NSString *dbpath; 
    sqlite3 *database;
    sqlite3_stmt *selStmt; 
    sqlite3_stmt *delStmt; 
    sqlite3_stmt *insStmt; 

    NSMutableArray *items; 

    BOOL copyDb;
    NSString *graphtype;

    ActionNoteViewDetails *actionNoteViewDetails;

}

@property (nonatomic, strong) ActionNoteViewDetails *actionNoteViewDetails;

@property (nonatomic, retain) NSString *url;
@property (nonatomic, readwrite) NSInteger domain_id;
@property (nonatomic, retain) NSString *graphtype;
@property (nonatomic, retain) NSString *selectedDate;

@property (nonatomic, retain) NSMutableArray *items;

-(void) openDatabase;
-(void) readItems;

-(void) closeDatabase;
-(void) detailView:(NSIndexPath *)path;

@end 
```

.m 文件：

```
#import "ActionNoteListingViewByDates.h"

@implementation ActionNoteListingViewByDates

@synthesize domain_id;
@synthesize url;
@synthesize items;
@synthesize graphtype;
@synthesize selectedDate;

@synthesize actionNoteViewDetails;

- (void)viewDidLoad {

    [super viewDidLoad];

    items = [[NSMutableArray alloc] init]; // array for items

    copyDb = TRUE; // set copy / create flag

    // set up for app
    dbname = @"yodelaydb.sqlite3"; // database name

    // get full path of database in documents directory
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *path = [paths objectAtIndex:0];
    dbpath = [[path stringByAppendingPathComponent:dbname] retain];

    database = nil;     
    selStmt = nil;     
    delStmt = nil; 
    insStmt = nil;

    [self openDatabase]; // open database

    [self readItems];     

    self.title = selectedDate;
    self.tableView.allowsSelectionDuringEditing = true;

    [self.navigationController setToolbarHidden:NO];

}

-(void) detailView:(NSIndexPath *)path {

    UIDeviceOrientation deviceOrientation = [UIDevice currentDevice].orientation;

    if(UIDeviceOrientationIsPortrait(deviceOrientation)){
        self.actionNoteViewDetails= [[self.storyboard instantiateViewControllerWithIdentifier:@"IDActionNoteViewDetails"] retain];

        if (path != nil) {
            ActionNote *i = (ActionNote *) [items objectAtIndex:path.row];
            NSLog(@"actionnote i %d",path.row);
            actionNoteViewDetails.note_id = i.note_id;
            actionNoteViewDetails.notetitle =i.title;
            actionNoteViewDetails.notecontent =i.content;
            actionNoteViewDetails.SelectedDate=i.notes_date;
            actionNoteViewDetails.SelectedProfile=i.domainname;
            actionNoteViewDetails.domain_id = i.domain_id;
            actionNoteViewDetails.actionmedium = i.actionMedium;
            actionNoteViewDetails.actionsource = i.actionSource;
            actionNoteViewDetails.dataFromGraph = YES;

        }
        else{
            actionNoteViewDetails.note_id = 0;
        }

        [self.navigationController pushViewController:actionNoteViewDetails animated:TRUE];

    }

    if (UIDeviceOrientationIsLandscape(deviceOrientation)){
        self.actionNoteViewDetails= [[self.storyboard instantiateViewControllerWithIdentifier:@"IDActionNoteViewDetailsLandscape"] retain];

        if (path != nil) {
            ActionNote *i = (ActionNote *) [items objectAtIndex:path.row];
            actionNoteViewDetails.note_id = i.note_id;
            actionNoteViewDetails.notetitle =i.title;
            actionNoteViewDetails.notecontent =i.content;
            actionNoteViewDetails.SelectedDate=i.notes_date;
            actionNoteViewDetails.SelectedProfile=i.domainname;
            actionNoteViewDetails.domain_id = i.domain_id;
            actionNoteViewDetails.actionmedium = i.actionMedium;
            actionNoteViewDetails.actionsource = i.actionSource;
            actionNoteViewDetails.dataFromGraph = YES;

        }
        else{
            actionNoteViewDetails.note_id = 0;
        }

        [self.navigationController pushViewController:actionNoteViewDetails animated:TRUE];

    }

}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    self.navigationItem.hidesBackButton = NO;
    [self.navigationController setToolbarHidden:YES];
    self.navigationController.navigationBarHidden=NO;

    [self.tableView reloadData];

}

-(void)dealloc{

    [actionNoteViewDetails release];
    [selectedDate release];
    [url release];
    [dbname release];
    [dbpath release];
    [items release];

    [super dealloc];
}

#pragma mark Table view methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

// Customize the number of rows in the table view.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    return [items count];
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle 
                                       reuseIdentifier:CellIdentifier] autorelease];
    }

    ActionNote *i = (ActionNote *) [items objectAtIndex:indexPath.row];

    NSString *displayedTitle = i.actionMedium;
    NSString *displayedContent = i.content;

    cell.textLabel.text = displayedTitle;
    cell.textLabel.font = [UIFont systemFontOfSize:15];
    cell.detailTextLabel.text = displayedContent;
    cell.detailTextLabel.font = [UIFont systemFontOfSize:11];

    if([displayedTitle isEqualToString:@"Twitter"]){
        UIImage *theImage = [UIImage imageNamed:@"bird_48_blue.png"];
        cell.imageView.image = theImage;
    }else if([displayedTitle isEqualToString:@"Blogging"]){
        UIImage *theImage = [UIImage imageNamed:@"rss_icon.png"];
        cell.imageView.image = theImage;
    }else if([displayedTitle isEqualToString:@"Affiliate Marketing"]){
        UIImage *theImage = [UIImage imageNamed:@"affiliate-marketing.png"];
        cell.imageView.image = theImage;
    }else if([displayedTitle isEqualToString:@"Online Press Release"]){
        UIImage *theImage = [UIImage imageNamed:@"press-release.png"];
        cell.imageView.image = theImage;
    }else if([displayedTitle isEqualToString:@"Public Speaking"]){
        UIImage *theImage = [UIImage imageNamed:@"public-speaking.png"];
        cell.imageView.image = theImage;
    }else if([displayedTitle isEqualToString:@"Video"]){
        UIImage *theImage = [UIImage imageNamed:@"video.png"];
        cell.imageView.image = theImage;
    }else if([displayedTitle isEqualToString:@"Email Campaign"]){
        UIImage *theImage = [UIImage imageNamed:@"email.png"];
        cell.imageView.image = theImage;
    }else if([displayedTitle isEqualToString:@"Offline Press Release"]){
        UIImage *theImage = [UIImage imageNamed:@"press-release.png"];
        cell.imageView.image = theImage;
    }else{
        UIImage *theImage = [UIImage imageNamed:@"action-note.png"];
        cell.imageView.image = theImage;
    }

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    return cell;
}

// Override to support row selection in the table view.
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {   
    // get the item for this cell

        [self detailView:indexPath];

}

-(void)openDatabase {

    BOOL ok;
    NSError *error;

    NSFileManager *fm = [NSFileManager defaultManager]; // file manager
    ok = [fm fileExistsAtPath:dbpath];

    // if database not there, copy from resource to path
    if (!ok)
    {
        if (copyDb)
        { // copy the database
            // location in resource bundle
            NSString *appPath = [[[NSBundle mainBundle] resourcePath] 
                                 stringByAppendingPathComponent:dbname];
            // copy from resource to where it should be
            ok = [fm copyItemAtPath:appPath toPath:dbpath error:&error];
        }
    }
    //[fm release];

    // open database
    if (sqlite3_open([dbpath UTF8String], &database) != SQLITE_OK)
    {
        sqlite3_close(database); // in case partially opened
        database = nil; // signal open error
    }

    if (!copyDb && !ok)
    { // first time and database not copied
        ok = TRUE;//[self createDatabase]; // create empty database
    }

    if (!ok)
    { // problems creating database
        //NSAssert1(0, @"Problem creating database [%@]", [error localizedDescription]);
    }

}

-(void)readItems {

    if (!database) return; // earlier problems

    // build select statement
    if (!selStmt)
    {
        const char *sql = "SELECT note_id,title,settingid,domain_id,content,notes_date,domainname,actionSource,actionMedium,iscompleted FROM notes where iscompleted=1 and notes_date=? order by notes_date";
        if (sqlite3_prepare_v2(database, sql, -1, &selStmt, NULL) != SQLITE_OK)
        {
            selStmt = nil;
        }

        sqlite3_bind_text(selStmt, 1, [selectedDate UTF8String] , -1, SQLITE_TRANSIENT);
    }
    if (!selStmt)
    {
        NSAssert1(0, @"Can't build SQL to read notes [%s]", sqlite3_errmsg(database));
    }

    int ret;
    while ((ret=sqlite3_step(selStmt))==SQLITE_ROW) 
    { // get the fields from the record set and assign to item
        // primary key

        NSInteger n = sqlite3_column_int(selStmt, 0); 
        ActionNote *item = [[ActionNote alloc] initWithPrimaryKey:n]; // create item
        // item name
        char *s = (char *)sqlite3_column_text(selStmt, 1);
        if (s==NULL) s = "";
        item.title = [NSString stringWithUTF8String:(char *)s];

        NSInteger settingid = sqlite3_column_int(selStmt, 2);
        item.settingid = settingid;

        NSInteger domainid = sqlite3_column_int(selStmt, 3);
        item.domain_id = domainid;

        // item name
        char *content = (char *)sqlite3_column_text(selStmt, 4);
        if (content==NULL) content = "";
        item.content = [NSString stringWithUTF8String:(char *)content];

        // item name
        char *notes_date = (char *)sqlite3_column_text(selStmt, 5);
        if (notes_date==NULL) notes_date = "";
        item.notes_date = [NSString stringWithUTF8String:(char *)notes_date];

        // item name
        char *domainname = (char *)sqlite3_column_text(selStmt, 6);
        if (domainname==NULL) domainname = "";
        item.domainname = [NSString stringWithUTF8String:(char *)domainname];
       // NSLog(@"domain name %@",item.domainname);
        // item name
        char *actionSource = (char *)sqlite3_column_text(selStmt, 7);
        if (actionSource==NULL) actionSource = "";
        item.actionSource = [NSString stringWithUTF8String:(char *)actionSource];
       // NSLog(@"actionSource %@",item.actionSource);
        // item name
        char *actionMedium = (char *)sqlite3_column_text(selStmt, 8);
        if (actionMedium==NULL) actionMedium = "";
        item.actionMedium = [NSString stringWithUTF8String:(char *)actionMedium];
       // NSLog(@"actionMedium %@",item.actionMedium);
        // item name
        NSInteger completed = sqlite3_column_int(selStmt, 9);
        item.iscompleted = completed;

        [items addObject:item]; // add to list

        [item release]; // free item
    }
    sqlite3_reset(selStmt); // reset (unbind) statement

    [self closeDatabase];
}

-(void)closeDatabase {
    sqlite3_finalize(selStmt); // release memory
    sqlite3_close(database);
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{

    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)orientation
{
    return YES;
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:58:36.307

它最终成为一个框架版本中的一个相当令人困惑的错误，该框架用于处理前一个视图中数据的类中。

# objective-c - 按下 CustomTabBar 的选定选项卡时的 PopToRootViewController

> ID：11775636
> 
> 赞同：1
> 
> 时间：2012-08-02T10:29:20.383
> 
> 标签：objective-c, uitabbarcontroller, custom-controls, poptoviewcontroller

好吧，我有一个自定义 TabBar 可以在我的应用程序上添加一个中心凸起的选项卡。所以我有一个 CustomTabBarViewController。我想让它像 Twitter 这样的应用程序一样工作。当按下选定的选项卡时，将生成一个 PopToRootViewController。我在按下时调用了凸起的标签栏方法，但我不知道在 if 语句中添加什么。有什么建议吗？

这是我在 CustomTabBarViewController 中提到的代码

```
- (void) raisedTabPressed
{
    if (raisedButton.selected)
    {
        //Code to PopToRootViewController
    }

    raisedButton.selected = YES;
    [self setSelectedIndex:1]; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:41:14.583

好吧，我为自己的问题找到了答案。if 语句中的代码将是：

```
UINavigationController *navController = (UINavigationController *)[self selectedViewController];
[navController popToRootViewControllerAnimated:YES]; 
```

# c++ - 如何从自动返回类型推导出类型？

> ID：11775639
> 
> 赞同：8
> 
> 时间：2012-08-02T10:29:24.390
> 
> 标签：c++, c++11, decltype

[这个答案](https://stackoverflow.com/a/11774533/476681)有一个这样的代码片段：

```
template<class T, class F>
auto f(std::vector<T> v, F fun)
    -> decltype( bool( fun(v[0] ) ), void() )
{
  // ...
} 
```

它真的可以编译和工作（[至少在 Ideone 上](http://ideone.com/dhyxN)）。

那么，这种情况下的类型是如何推导出来的呢？

c++11标准真的允许下一行吗？

```
decltype( bool( fun(v[0] ) ), void() ) 
```

我快速浏览了一下，它看起来并不有效。在这种情况下ideone错了吗？

* * *

c++11 标准中的所有示例都使得它们在 decltype 中都只有一种类型：

```
struct A {
  char g();
  template<class T> auto f(T t) -> decltype(t + g())
  { return t + g(); }
}; 
```

另一个例子 ：

```
void f3() {
  float x, &r = x;
  [=] {
  decltype(x) y1;
  decltype((x)) y2 = y1;
  decltype(r) r1 = y1;
  decltype((r)) r2 = y2;
}; 
```

和另一个

```
const int&& foo();
int i;
struct A { double x; };
const A* a = new A();
decltype(foo()) x1 = i;
decltype(i) x2;
decltype(a->x) x3;
decltype((a->x)) x4 = x3; 
```

他们都在 decltype 中只有一个参数。顶部代码怎么会有两个参数（用逗号分隔）？

* * *

我创建了另一个示例（无法编译）：

```
#include <vector>
#include <iostream>

template<class T, class F>
auto f(std::vector<T> v, F fun) -> decltype(bool(fun(v[0])), void())
{
  // ...
  (void)v;(void)fun;

  return fun(v.size());
}

void ops(int)
{
}

int main(){
  std::vector<int> v;
  f(v, [](int){ return true; });
  f(v,ops);
} 
```

即使删除了该行，模板函数`f(v,ops);`的返回类型也会被评估为 void。`f`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-02T10:38:10.380

`decltype( bool( fun(v[0] ) ), void() )`使用[*逗号运算符*](https://stackoverflow.com/questions/54142/c-comma-operator)。

打破它，

```
bool( fun(v[0] ) ), void() 
```

由两个表达式组成；首先

```
bool( fun(v[0] ) ) 
```

被评估为¹并被丢弃，为整个表达式提供值

```
void() 
```

这是type的值²`void`。

`decltype`然后产生表达式的类型，如上所示`void`。

这里使用逗号操作符的原因是为了保证整个表达式只有在第一个子表达式有效时才有效；这是因为如果第一个子表达式无效，它在 SFINAE 中用于将其排除在替换考虑之外。

之所以可行，是因为尽管`decltype`在语法上看起来像一个函数，但它实际上是一种语言结构，（如`sizeof`）被定义为采用单个参数。用括号括起来可能更清楚 comma-operator 参数：

```
decltype( ( bool( fun(v[0] ) ), void() ) ) 
```

### 笔记

1.  该表达式*实际上*`bool( fun(v[0] ) )`并未被评估，因为我们处于*未评估的上下文中*（，类似于）。这里重要的是，如果整个表达式被评估，*它将*被评估，因此如果子表达式无效，则整个表达式无效。**`decltype``sizeof`**
****   `void()`不是*真正*的值，但它在逗号运算符 and 的上下文中表现得像一个值`decltype`。***

 *** * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-02T10:42:20.497

`decltype`产生括号之间表达式的类型，**而不实际评估它**（在接下来的部分中记住这一点）。

运算符计算`,`左参数/表达式，丢弃结果，计算右参数，并产生该结果。因此，返回类型变为`void`.

就`bool(fun(v[0]))`部分而言，这相当容易。`bool(f(...))`根据调用的结果构造一个临时的 bool `f`。如果的返回类型`f`不能转换为`bool`，这将触发一个错误，这将导致 SFINAE 由于在里面`decltype`（这称为[“表达式 SFINAE”](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2634.html)）。

`f(v[0])``v[0]`将传递to的返回值`f`，它的类型是`T&`。如果`f`没有`T&`可转换的参数，或者需要更多/更少的参数，这将触发错误，并再次导致 SFINAE，原因与上述相同。

`std::vector`（如果不支持也会发生同样的情况`operator[]`。）**

# postgresql - 在 Heroku 上迁移数据库失败

> ID：11775644
> 
> 赞同：0
> 
> 时间：2012-08-02T10:30:01.057
> 
> 标签：postgresql, heroku, ruby-on-rails-3.2

在我的应用程序中，我的一个模型使用 HStore，但是当我创建扩展 HStore 时，它​​失败并出现以下错误：

```
PG::Error: ERROR:  syntax error at or near "EXTENSION"
LINE 1: CREATE EXTENSION hstore;
               ^
: CREATE EXTENSION hstore; 
```

我正在使用 heroku 的免费数据库，因为这只是一个开发部署，所以我掌握了在 heroku 上部署的工作原理。这在我的开发环境中不会失败。那么是什么导致它失败呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:28:33.673

你用的是共享数据库还是`dev`数据库？共享数据库没有 hstore。您可以按照以下步骤进行升级：

[https://postgres.heroku.com/migration/](https://postgres.heroku.com/migration/)

所有数据库最终都会自动迁移。

# python - 在python中访问类对象时出错

> ID：11775652
> 
> 赞同：0
> 
> 时间：2012-08-02T10:30:19.387
> 
> 标签：python, class, object

我在访问类实例时遇到了一些问题。我从一个过程中调用这个类，实例的名称是在某个变量中定义的。我希望使用该值创建实例名称，然后想要访问它，但是当我访问它时会出错。有人可以帮助解决这个问题。

```
class myclass:
  def __init__(self,object):
    self.name = object

def mydef():
   global a1
   b = "a1"
   b = myclass(b)

mydef()
print a1.name 
```

第二个问题：在我的实际脚本中，我必须从这个函数创建大量这样的实例（大约 100 个）。因此，将它们的名称定义为全局会很痛苦，有没有一种方法可以在函数外部访问这些实例而无需将它们声明为全局。

修改：

```
class myclass:
    def __init__(self,object,typename):
        self.name = object
        self.typeid = typename

def mydef():
    file_han = open(file,"r")
    while True:
      line = file_han.readline()
      if not line:
        break
      start = line.find('"')
      end = line.find('"',start+1)
      string_f = line[start+1:end]
      myclass(string_f,'a11')        

mydef(file)

print def.name
print def.typeid

File Contents are :
a11 "def"
a11 "ghi"
a11 "eff" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:39:05.053

这就是我的做法。我不知道你为什么要搞乱全局变量，如果你愿意解释，我会更新我的答案。

```
class Myclass(object):
    def __init__(self, name):
        self.name = name

def mydef():
   return Myclass("a1")

a1 = mydef()
print a1.name 
```

将您的实例收集到一个列表中：

```
instances = []
for x in range(1000):
    instances.append(Myclass("Instance {0}".format(x)))
print instance[42].name 
```

注意变化：

*   类名应大写
*   用作`object`类的基类（从 python 2.2 开始，但在 3.x 中不再需要）
*   `object`不要使用您的参数名称隐藏内置
*   只需将字符串`"a1"`直接用作参数，而不是将其分配给变量
*   从函数返回一些东西，而不是通过全局变量传递结果

**回复：评论**

你没有说这些文件的格式，所以我只举一个例子，其中要读取的文件每行包含一个类名，仅此而已：

```
def mydef(filename):
    ret = []
    with open(filename) as f:
        for line in f:
            # Call `strip` on line to remove newline and surrounding whitespace
            ret.append(Myclass(line.strip()))
    return ret 
```

因此，如果您有多个文件并希望将所有文件中的所有实例添加到一个大列表中，请执行以下操作：

```
instances = []
for filename in ["myfile1", "myfile2", "myfile3"]:
    instances.extend(mydef(filename)) 
```

**回复：OP 编辑**

```
def mydef(filename):
    ret = []
    with open(filename, "r") as file_han:
        for line in file_han:
            string_f = line.split('"')[1]
            ret.append(Myclass(string_f))
    return ret

i = mydef("name_of_file") 
```

**回复：评论**

哦，您想按名称访问它们。然后返回 a `dict`：

```
def mydef(filename):
    ret = {}
    with open(filename, "r") as file_han:
        for line in file_han:
            string_f = line.split('"')[1]
            ret[string_f] = Myclass(string_f)
    return ret

i = mydef("name_of_file")
print i["ghi"].name  # should print "ghi" 
```

**回复：评论**

如果我对您的理解正确，您希望两种方式都有 - 按行号和名称索引。那么你为什么不同时返回一个列表和一个字典呢？

```
def mydef(filename):
    d = {}
    L = []
    with open(filename, "r") as file_han:
        for line in file_han:
            string_f = line.split('"')[1]
            instance = Myclass(string_f)
            d[string_f] = instance
            L.append(instance)
    return L, d

L, d = mydef("name_of_file")
print d["ghi"].name
print L[3]
print L.index(d["ghi"]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:55:44.437

例如，您可以将类用作实例的存储库

```
class Named(object):
    def __init__(self,name):
        self.name = name

    def __new__(cls,name):
        instance = super(type,cls).__new__(cls,name)
        setattr(cls,name,instance)
        return instance

    def __repr__(self):
        return 'Named[%s]'%self.name

Named('hello')
Named('x123')
Named('this is not valid attribute name, but also working')

print(Named.hello,Named.x123,getattr(Named,'this is not valid attribute name, but also working')) 
```

# mysql - MySQL 无法使用外键创建表

> ID：11775653
> 
> 赞同：0
> 
> 时间：2012-08-02T10:30:21.757
> 
> 标签：mysql, foreign-keys

```
CREATE  TABLE `assessmentbookdb`.`MCQs` (
  `id` INT NOT NULL AUTO_INCREMENT ,
  `MCQAnswer` VARCHAR(200) NOT NULL ,
  `QuestionID` INT NOT NULL ,
  PRIMARY KEY (`id`) ,
  INDEX `QuestionID` (`QuestionID` ASC) ,
  CONSTRAINT `QuestionID`
    FOREIGN KEY (`QuestionID` )
    REFERENCES `assessmentbookdb`.`Question` (`QuestionID` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB; 
```

消息日志：

错误 1005：无法创建表 'assessmentbookdb.mcqs' (errno: 121) SQL 语句：

```
CREATE  TABLE `assessmentbookdb`.`MCQs` (
  `id` INT NOT NULL AUTO_INCREMENT ,
  `MCQAnswer` VARCHAR(200) NOT NULL ,
  `QuestionID` INT NOT NULL ,
  PRIMARY KEY (`id`) ,
  INDEX `QuestionID` (`QuestionID` ASC) ,
  CONSTRAINT `QuestionID`
    FOREIGN KEY (`QuestionID` )
    REFERENCES `assessmentbookdb`.`Question` (`QuestionID` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
    ENGINE = InnoDB 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T10:34:16.577

仔细检查：

*   密钥的名称是唯一的
*   您要耦合的两个键具有完全相同的数据类型（此处`INT NOT NULL`：），甚至有符号
*   引用字段实际存在

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T10:35:54.813

基于谷歌搜索，我假设您有一个与您尝试添加约束的名称相同的约束。可能是您没有从旧版本的表中删除旧约束或其他东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T10:38:12.343

看看[这里](http://dev.mysql.com/doc/refman/5.0/en/innodb-error-codes.html#c9317)，尽量不要给你的约束命名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T10:34:09.043

> 由于未正确形成外键约束，表创建失败

不知何故，您的外键不正确。如果您引用的表尚不存在，则可能是这种情况。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-02T10:44:02.563

[http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

InnoDB 支持外键，让您可以跨表交叉引用相关数据，以及外键约束，这有助于保持分散数据的一致性。CREATE TABLE 或 ALTER TABLE 语句中 InnoDB 外键约束定义的语法如下所示：

```
 [CONSTRAINT [symbol]] FOREIGN KEY
 [index_name] (index_col_name, ...)
REFERENCES tbl_name (index_col_name,...)
[ON DELETE reference_option]
[ON UPDATE reference_option]

 reference_option:
RESTRICT | CASCADE | SET NULL | NO ACTION 
```

# java - MyBatis 多结果集，仅带有注释

> ID：11775654
> 
> 赞同：1
> 
> 时间：2012-08-02T10:30:22.203
> 
> 标签：java, sql, sql-server, mybatis

正如标题所示，我正在尝试仅使用注释来映射多个结果集，这就是我的场景。

`Proc_A`为这些模型返回 3 个结果集

```
org.example.models.ModelA = as Single Result
org.example.models.ModelB = as List<>
org.example.models.ModelC = as List<> 
```

我知道您可以像这样执行 XML 和 @Annotation 方法。

```
//ExampleMapper.java
public interface ExampleMapper {
  @Select("EXEC Proc_A #{userID}")
  @ResultMap("getModelA","getModelB","getModelC")
  @Options(statementType = StatementType.CALLABLE)
  List<List<?>> executeProcA(@Param("userID") Integer userID)
} 
```

和 XML

```
//ExampleMapper.xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.example.mybatis.ExampleMapper" >
    <!-- Result Maps for Proc_A -->
    <resultMap id="getModelA" type="org.example.models.ModelA" />
    <resultMap id="getModelB" type="org.example.models.ModelB" />
    <resultMap id="getModelC" type="org.example.models.ModelC" />
</mapper> 
```

**这在大多数情况下都可以正常工作，但是我想知道有没有办法只用注释来做到这一点**

*更新*

我发现`@Results`但文档暗示它是针对一个结果集的`@Result`。`@Results`但是，我确实注意到`@Result`一个和许多指标尚未找到有关其使用的文档，以查看它们是否会有所帮助。

提前致谢

# c# - 如何从目录中获取子文件夹中的文件

> ID：11775655
> 
> 赞同：7
> 
> 时间：2012-08-02T10:30:22.047
> 
> 标签：c#, asp.net, directory

您好我必须从目录中的指定路径获取文件。这是我写的方法，但我没有从子文件夹中获取文件。

```
Private void getfiles(){
Directoryinfo info = new Directoryinfo(configurationmanager.appsettings["Targetroot"].tostring ());
if (info.exists){
     Gvfiles.datasource = info.GetFiles();
     Gvfiles.databind();
   }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-24T21:13:47.383

您将需要包含 SearchOption.AllDirectories。

例子：

```
info.GetFiles("*", SearchOption.AllDirectories); 
```

参考： http: [//msdn.microsoft.com/en-us/library/ms143327 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms143327(v=vs.80).aspx)

并且： http: [//msdn.microsoft.com/en-us/library/ms143448 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms143448(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:42:31.750

```
DirectoryInfo info = new   DrectoryInfo(configurationmanager.appsettings["Targetroot"].tostring ());
//FileInfo[] _files = info.GetFiles("You could set a search pattern");
//FileInfo[] _files = info.GetFiles("*.aspx");
FileInfo[] _files = info.GetFiles();
Gvfiles.datasource = _files;
Gvfiles.databind(); 
```

或者：

```
DirectoryInfo info = new DirectoryInfo(Server.MapPath("/"));
DirectoryInfo[] _info = info.GetDirectories();
for (int i = 0; i < _info.Length; i++)
{
FileInfo[] files = _info[i].GetFiles("search pattern");
Gvfiles.datasource = files;
Gvfiles.databind();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T10:56:26.977

这将返回（立即）子目录的数组：

```
System.IO.DirectoryInfo ParentDirectory = new System.IO.DirectoryInfo(ParentPath);
System.IO.DirectoryInfo[] DirectoryArr = ParentDirectory.GetDirectories(); 
```

我相信你可以找到一种方法来适应你的喜好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-06T07:02:31.777

```
private List<String> DirSearch(string sDir)
{
List<String> files = new List<String>();
try
{
    foreach (string f in Directory.GetFiles(sDir))
    {
        files.Add(f);
    }
    foreach (string d in Directory.GetDirectories(sDir))
    {
        files.AddRange(DirSearch(d));
    }
}
catch (System.Exception excpt)
{
    MessageBox.Show(excpt.Message);
}

    return files;
} 
```

# javascript - JavaScript 对数组中的数字求和

> ID：11775656
> 
> 赞同：1
> 
> 时间：2012-08-02T10:30:27.420
> 
> 标签：javascript, arrays

我有一个以下数组`var total = [10, 0.25, 12.75, 1, 0];`

当我做：

```
 for (var i= 0; i< total.length; i++) {
      totalNo += parseInt(+(total[i]));
 } 
```

`totalNo`总是一个完整的数字。看起来`.XX`后点值被跳过了。如何确保正确添加？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T10:31:28.420

使用`parseFloat()`而不是`parseInt()`保留小数部分

```
for (var i= 0; i< total.length; i++) {
      totalNo += parseFloat(total[i]);
} 
```

*注意1：不需要写 +(total[i])*
*注意2：正如 Utkanos 所指出的，如果你的数组值只包含浮点值，那么 parseFloat 甚至没有必要*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T10:34:48.433

您不需要运行任何数字强制函数（例如`parseInt`） - 您的数组值已经是数字。

如果 ECMA5 解决方案可以接受，您可以使用`reduce()`：

```
var arr = [10, 0.25, 12.75, 1, 0];
alert(arr.reduce(function(curr_total, val) {
    return curr_total + val;
}, 0)); //24 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T11:15:54.250

您在这里不需要 parseInt 或 parseFloat。如果考虑速度并且对于大型数组，使用本机循环，它要快得多！但是请注意编码方式 -

```
var total = [10, 0.25, 12.75, 1, 0],totalNo=0;
var len=total.length;
for(var i= 0; i<len; i++) 
{
    totalNo = totalNo+total[i];
} 
```

请始终注意，totalNo+=total[i] 比 totalNo+total[i] 慢

# iphone - 如何在 iPhone sdk 中创建 excel 表和文件？

> ID：11775661
> 
> 赞同：9
> 
> 时间：2012-08-02T10:30:42.187
> 
> 标签：iphone, ios, xcode, ios4, ms-office

我想生成应用程序以在 iPhone sdk 中创建 excel 文件。任何人都可以建议我创建它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T12:43:29.630

好吧，合适的人看到了你的帖子！SourceForge 上有一个开源 C++ 库[xlslib](http://sourceforge.net/projects/xlslib/)，它将完全满足您的需求。

但是等等 - 还有更多！该库有一个 Objective-C[包装器](http://xlslib.svn.sourceforge.net/viewvc/xlslib/trunk/DHxls/)——它有点过时了，但最近有人报告说他们让它在 iOS 上工作。

支持这个库的两个人似乎对用户非常敏感，所以如果人们使用它，他们很可能会继续支持 ObjectiveC 包装器。

也就是说，没有开箱即用的库/框架可以坚持在您的项目中。你将不得不花一些时间，甚至可能一两天，来让这个东西在 iOS 上构建和运行。如果你赶时间，你将不得不花时间。如果你有耐心，你可能会得到帮助。

编辑：有一个使用这个库的 ObjectiveC 框架：[JXLS](https://github.com/JanX2/JXLS)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-16T13:52:28.303

我在 github 上找到了一个链接。只需添加这几个文件并按照说明集成代码（易于集成）。

这是链接
[https://github.com/andreac/RSSheet](https://github.com/andreac/RSSheet)

请将这些文件转换为 ARC 以避免因内存管理而崩溃。希望它有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-21T07:02:18.753

如果您的 Excel 文件不是很复杂，另一种选择是使用 HTML 表格。我试过了，效果很好。

```
NSURL * docsDir = [NSFileManager.defaultManager URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask].lastObject;
NSURL *file = [docsDir URLByAppendingPathComponent:@"sample.xls"];
NSString* htmlString = @"<table>
  <tr>
    <th bgcolor="#00FF00">Month</th>
    <th  bgcolor="red">Savings</th>
  </tr>
  <tr>
    <td>January</td>
    <td>$100</td>
  </tr>
</table>";

[htmlString writeToFile:file.path atomically:YES encoding:NSUTF8StringEncoding error:nil]; 
```

创建文件后，将其附加到带有 XLS 扩展名的电子邮件中，然后使用 Excel 打开它。

要尝试此解决方案是否符合您的需求，您可以使用“HTML 模板”创建纯文本文件并使用 Excel 打开它。检查后以编程方式创建它:)

# knockout.js - MVC4 中带有 ko 的示例网格

> ID：11775665
> 
> 赞同：3
> 
> 时间：2012-08-02T10:30:55.160
> 
> 标签：knockout.js, asp.net-mvc-4

我是 MVC4 和淘汰赛的新手。我从网格开始。所以我从这个 URL 复制了所有内容：http: [//knockoutjs.com/examples/grid.html](http://knockoutjs.com/examples/grid.html)

所以这是我的js文件。

```
 $(document).ready(function () {
         ko.applyBindings(new PagedGridModel(initialData));
      });

    var initialData = [
       { name: "Well-Travelled Kitten", sales: 352, price: 75.95 },
        { name: "Speedy Coyote", sales: 89, price: 190.00 },
       { name: "Furious Lizard", sales: 152, price: 25.00 },
       { name: "Indifferent Monkey", sales: 1, price: 99.95 },
       { name: "Brooding Dragon", sales: 0, price: 6350 },
       { name: "Ingenious Tadpole", sales: 39450, price: 0.35 },
       { name: "Optimistic Snail", sales: 420, price: 1.50 }
      ];

var PagedGridModel = function (items) {
    this.items = ko.observableArray(items);
    this.gridViewModel = new ko.simpleGrid.viewModel({
        data: this.items,
        columns: [
            { headerText: "Item Name", rowText: "name" }
            ],
        pageSize: 4
    });
}; 
```

这是我的cshtml

```
 <link href="../../Content/list/list.css" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.6.2.min.js")" type="text/javascript">     </script>
   <script src="../../Scripts/knockout-1.3.0beta.js" type="text/javascript"></script>
   <script src="../../Scripts/list/list.js" type="text/javascript"></script>

  <div class='liveExample'> 

<div data-bind='simpleGrid: gridViewModel'> </div>

<button data-bind='click: addItem'>
    Add item
</button>

<button data-bind='click: sortByName'>
    Sort by name
</button>

<button data-bind='click: jumpToFirstPage, enable: gridViewModel.currentPageIndex'>
    Jump to first page
</button>

</div>​ 
```

“ko.simpleGrid”正在变得未定义，所以它说 * *can not read property 'viewModel' of undefind **。可能是什么原因？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T11:34:46.790

我认为您忘记包含包含插件实现的[knockout.simpleGrid.1.3.js脚本。](http://knockoutjs.com/examples/resources/knockout.simpleGrid.1.3.js)您可以在淘汰赛简单的网格[小提琴](http://jsfiddle.net/rniemeyer/QSRBR/)沙箱中查看示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:38:44.613

`applyBindings`您应该在页面底部调用方法：

```
<div data-bind='simpleGrid: gridViewModel'> </div>

<button data-bind='click: addItem'>
    Add item
</button>

<button data-bind='click: sortByName'>
    Sort by name
</button>

<button data-bind='click: jumpToFirstPage, enable: gridViewModel.currentPageIndex'>
    Jump to first page
</button>

<script type="text/javascript">
     $(document).ready(function () {
         ko.applyBindings(new PagedGridModel(initialData));
      });
</script> 
```

或在页面底部引用您的脚本。

# database - 存储用于数据挖掘的非结构化文本文件的最佳方式是什么

> ID：11775666
> 
> 赞同：1
> 
> 时间：2012-08-02T10:30:55.123
> 
> 标签：database, text, cloud

我的机器上有数百万条文字新闻。我想对其进行一些文本挖掘。

我想首先以更有条理的方式存储最新的文本新闻。最好的方法是什么？所以以后做数据挖掘会更方便。

目前我只是将这些新闻文件存储在由新闻标题和文件路径索引的数据库中。

任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:44:25.713

这在很大程度上取决于您希望使用更结构化的数据来实现什么。

如果数据量不大，您可以在数据库上使用“文本”搜索，您已经完成了。

像 stackoverflow 上这样的类别或“标签”将极大地帮助对您的内容进行分类和分组，但我想现在很难从纯文本库中提取它。

一个简单的时间戳（您可以从文件本身获取，但要小心一些系统会在文件被复制时更改该日期......）也可以提供帮助。

对于内容提取，请查看[http://www.opencalais.com/](http://www.opencalais.com/)，它提供了一个用于“文本”分析的 api，您可能会觉得有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:37:10.253

“做一些文本挖掘”是什么意思？您只是想存储文本吗？或者，您是否正在寻找解决方案？

许多数据库提供存储文本并对其进行快速检索的能力。

然而，文本挖掘通常涵盖更广泛的主题。这里有些例子：

*   查找具有相似主题的文档。
*   在文件中暴露情绪。
*   回答用自然语言提出的问题。
*   总结文件。
*   用文档中的信息填充数据结构。
*   使用文档中的信息进行预测建模。
*   为文档分配代码。

对于此类分析，您通常会使用文本挖掘工具（例如，您可以在[kdnuggets.com](http://www.kdnuggets.com/)上查找这些工具）。然后，该工具会影响文本的存储方式。

“营销、销售和客户支持的数据挖掘技术”的最后一章是关于文本挖掘的，并且有一个非常好的案例研究将文本挖掘应用于客户服务记录。

[回应评论]

这是一个学术项目还是“现实世界”？文本是单语的吗？如果有，是英文的吗？你肯定需要做一些研究。至少从 Alan Turing 在 1930 年代提出图灵测试以来，文本分析/挖掘一直是一个相当深入的研究领域。

例如，我可以很容易地想到四种*非常*不同的选项来存储文本以供分析。第一个是“原样”，如果您有很多处理器和内存，这将是最有用的。第二个是“语法”，用语法和含义标记文本，如果你的团队有很多博士，这是最有效的。第三是作为倒排索引，它是搜索和一些邻近匹配的基本形式。第四种是投影到正交空间，使用奇异值分解（如果您想将文本用作其他统计技术的输入，则最有用）。

# php - dojo 1.7 数据和存储api混淆

> ID：11775669
> 
> 赞同：1
> 
> 时间：2012-08-02T10:31:21.407
> 
> 标签：php, dojo

我对 dojox.grid 组件（即 EnhancedGrid 和 LazyTreeGrid）应该如何与新的 dojo 存储 API 一起使用感到困惑，因为它们似乎没有。

我正在尝试使用两个网格（一个用于平面数据，另一个用于分层数据）和一个带有自定义 rpc 服务的 JSON 存储（这是 dojox.data.jsonRestStore 的一个选项，但不适用于dojo.store.jsonRest），因为 Web 应用程序需要能够在代理后面运行，这可能会导致“PUT”和“DELETE”请求出现问题。

dojox.data.jsonRestStore 的问题是我无法使用lazyTreeGrid 运行它（对于它从初始get 获取的每条记录，它都会使用空查询调用另一个get，基本上导致浏览器挂起并造成数百成千上万的请求）。除此之外，显然不应该再使用它了，因为它使用的是“旧的”dojo 数据 API，而不是新的 dojo 存储 API。

现在另一个问题是，dojox.grids 似乎仍在使用旧的数据 API，这意味着我必须使用 dojo.data.objectStore 才能让它们与新的 dojo.store.jsonRest 一起使用，但这也不起作用，因为 objectStore 似乎不适用于延迟加载和分层数据。同样如前所述，似乎没有一种方法可以为新的 dojo.store.jsonRest 定义自定义 rpc 服务，但我需要它，因此我只能使用 GET 和 POST 方法发出所有请求。

所以，总而言之，我对这些组件应该如何协同工作感到非常困惑，但也许我遗漏了一些东西？是否有 dojox.grid 组件的替代品支持嵌套排序、延迟加载、类似树形网格的行为？

还是现在开始使用新的 dojo 商店 API 还为时过早？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:17:01.460

你看过[dgrid](http://dojofoundation.org/packages/dgrid/)吗？我的理解是 dojox.grid.* 网格将在未来被弃用以支持 dgrid。它仍然有`beta`标签，但它是使用 dojo.store API 从头开始​​构建的。

# visual-studio-2008 - .rgs 文件中注释的语法是什么

> ID：11775671
> 
> 赞同：9
> 
> 时间：2012-08-02T10:31:26.580
> 
> 标签：visual-studio-2008, com, registry, atl, rgs

由于我不会深入探讨的原因，我正在为 Visual Studio 2008 ATL 项目自动生成大量 .rgs 文件。我希望能够在每个 .rgs 文件中添加注释，表明它是自动生成的，以及何时生成的，但我无法找出 .rgs 文件的注释语法是什么，如果确实有的话。我试过了 // ; ;; REM 甚至 # 但这些都不起作用。.rgs 文件格式的可用文档似乎很少。有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T11:24:09.313

没有关于注册商脚本的评论。有关详细信息，请参阅MSDN 上的[创建注册器脚本](http://msdn.microsoft.com/en-us/library/8350a3tf)。

如果您对内部感兴趣，请查看`$(VisualStudio)\VC\atlmfc\include\statreg.h`实现。

# javascript - 计算页面上加载的所有资源

> ID：11775674
> 
> 赞同：0
> 
> 时间：2012-08-02T10:31:34.047
> 
> 标签：javascript, jquery, page-load-time

我正在加载一个包含 CSS + 图像 + 脚本的页面。所以我想在页面加载时计算运行时加载到页面上的所有总资源数，以便我可以根据该计算和一点加载时间显示进度条。

我的问题是如何计算实际加载到 dom 中的资源数量，包括图像 + 脚本 + css 文件。基于此，我需要计算进度条进度模式并使其继续进行。

有人可以阐明如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:58:34.777

总数为：

```
$('script, link[type=text/css], img').size(); 
```

这将返回您请求的资源总数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:20:25.953

没有直接的方法可以做到这一点。脚本和图像标签具有加载事件，因此您可以附加回调并知道它们何时加载。Css 没有要查询的事件或属性，但是您可以使用使用 img 标记的解决方法。但这并不是那么简单，因为如果您将回调附加到已加载的脚本标签，则该回调将永远不会触发，对于 img 标签也是如此。因此，当您的进度条开始跟踪文档上的所有 img/script/css 时，它需要知道哪些 img/script/css 已加载，然后为尚未加载的其他人附加事件回调。Img 标签有一个`complete`属性，而 script 没有，因此您无法通过简单地查询 DOM 来知道是否加载了脚本。CSS 是更多的技巧。

好吧，正如您所看到的，这不是一项简单的任务，实际上它很复杂，我个人认为不值得花时间和精力来*显示进度条*。

在您的页面中显示一个古老而良好的旋转并快乐:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T20:42:36.407

我认为您正在以错误的方式解决问题...

如果您的页面太大以至于需要进度条，那么它可能太大了。

为什么不优化页面，使其快速开始渲染，然后添加其他项目，例如渐进式或延迟加载。

# android - Android：垂直滚动视图中的水平列表视图？

> ID：11775677
> 
> 赞同：21
> 
> 时间：2012-08-02T10:31:41.913
> 
> 标签：android, scrollview, horizontal-scrolling

我想让相同的实现成为一个[脉冲应用程序](https://play.google.com/store/apps/details?id=com.alphonso.pulse&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5hbHBob25zby5wdWxzZSJd)。

垂直列表视图内的水平列表视图。

![在此处输入图像描述](../Images/8822ec024281c281f9740a66a5577ad6.png)

我为水平列表视图尝试了这个[项目](http://www.dev-smart.com/archives/34)，但是当我尝试水平滚动时，垂直滚动处于活动状态并且列表上下移动。我怎样才能防止这个问题。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-06-29T17:30:03.997

它在我的应用程序上工作......

就像脉冲应用程序......垂直列表视图内的水平列表视图

**这是解决方案...**

只需将此代码放在您的 Horizo​​ntalListview 类的滚动条中...

```
ViewParent viewParent = getParent();

if (viewParent != null) {

    viewParent.requestDisallowInterceptTouchEvent(true);

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T08:11:49.700

如果您将一段代码粘贴到您的问题中，这会容易得多，以便查看它出错的原因。如果没有这些信息，我最好的猜测是检查你对`fill_parent`vs的使用`wrap_content`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-02T10:46:33.550

我认为你应该在垂直滚动视图中使用一些水平滚动视图。并且在每个水平滚动视图中，如果需要，您可以提供列表视图、网格视图等。我认为这是解决这个问题的更好方法。:)

# c# - 试图获取 ControlTemplate 中的 StoryBoard 对象

> ID：11775678
> 
> 赞同：0
> 
> 时间：2012-08-02T10:31:42.023
> 
> 标签：c#, animation, storyboard, key, toast

我想要实现的是在 Storyboard 完成工作时关闭窗口，我尝试在 Storyboard 对象中设置 x:Key 属性，但出现以下错误：“key 属性只能用于包含在IDictionary（例如 ResourceDictionary）”

这是我的代码：

```
 <Window.Resources>
    <ControlTemplate x:Key="MyErrorMessage"
                     TargetType="{x:Type Label}">
        <StackPanel Orientation="Horizontal"
                    Name="ErrorMessage">
            <Border CornerRadius="4" Width="Auto"
                    BorderThickness="0"
                    VerticalAlignment="Center"
                    Margin="4,0"
                    Background="#FF404040"
                    BorderBrush="Transparent">
                <Label Foreground="White"
                       VerticalAlignment="Center"
                       Padding="4,2"
                       Margin="4"
                       FontWeight="Bold" FontSize="15"
                       Name="Part1"
                       Visibility="Visible" HorizontalAlignment="Center" Content="{Binding Message}" />
            </Border>
            <!-- This TextBlock accepts the content from the parent 'label'. It is not actually displayed, just used to bind data-->
            <TextBlock Name="Part3"
                       Text="{TemplateBinding Content}"
                       Visibility="Collapsed"></TextBlock>
            <!-- This TextBlock binds to the one above and triggers an animation when it gets updated. -->
            <!-- Its required because TemplateBinding does not allow NotifyOnTargetUpdate -->
            <TextBlock Margin="2"
                       Name="Part2"
                       Foreground="Red"
                       Padding="3"
                       Visibility="Collapsed"
                       Text="{Binding ElementName=Part3, Path=Text,NotifyOnTargetUpdated=True}"
                       VerticalAlignment="Center"></TextBlock>
        </StackPanel>
        <ControlTemplate.Triggers>
            <!-- When Text property of Part2 is blank hide entire control-->
            <Trigger SourceName="Part3"
                     Property="Text"
                     Value="">
                <Setter TargetName="ErrorMessage"
                        Property="Visibility"
                        Value="Hidden"></Setter>
            </Trigger>
            <!-- This trigger is called when Part2 updates which in turn is updated by Part3's databind.
                 It uses animation to make the label fade away after a few seconds.                        -->
            <EventTrigger SourceName="Part2"
                          RoutedEvent="Binding.TargetUpdated">
                <BeginStoryboard>
                    <Storyboard TargetName="ErrorMessage" x:Key="gridFadeStoryBoard">
                        <DoubleAnimation Storyboard.TargetProperty="Opacity" Name="FadeOutAnimation"
                                         Duration="0:0:1.50"
                                         From="1.0"
                                         To="0.0"
                                         BeginTime="0:0:0.50" />
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
</Window.Resources>

<StackPanel Orientation="Vertical">
    <Label Template="{StaticResource MyErrorMessage}" Name="Label1" />
</StackPanel> 
```

代码隐藏：

```
 private Storyboard gridFadeStoryBoard;

    public ToastPopup(string Message)
    {
        InitializeComponent();

        Label1.Content = DateTime.Now.ToString();

        gridFadeStoryBoard = this.Label1.Template.Resources["gridFadeStoryBoard"] as Storyboard;
        gridFadeStoryBoard.Completed += new EventHandler(gridFadeStoryBoard_Completed);
    }

    void gridFadeStoryBoard_Completed(object sender, EventArgs e)
    {
        this.Close();
    } 
```

# asp.net-mvc-3 - 如何在 MVC3 中上传文件？

> ID：11775680
> 
> 赞同：1
> 
> 时间：2012-08-02T10:31:45.410
> 
> 标签：asp.net-mvc-3, file-upload

大家好，我有这样的情况......

```
 AttachmentName:[TextBox] [FileuploadControl] Add

           [Upload]Buton 
```

当用户提供文件名并上传文件名并单击添加时，我想在 GridColumn 中显示附件名称，当他完成并单击上传按钮时，我想将文件保存在此路径中

```
 string savefilename = Path.Combine(Server.MapPath("~/Upload"),
                                    Path.GetFileName()); 
```

我希望上传的文件名是在文本框中输入的附件名...并且我希望将上传文件的 url 保存在数据库中...任何人都可以告诉我如何做到这一点

# ruby-on-rails - Rails 3.2.2 有时会话会在下一个动作中自动清除

> ID：11775681
> 
> 赞同：1
> 
> 时间：2012-08-02T10:31:47.833
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在开发 Rails 3.2.2 应用程序。我在表单的提交操作中设置会话变量，然后使用 ajax 操作在同一页面上呈现另一个表单。我将会话变量设置为

```
session[:obj_id] = 23 
```

但是当我提交第二个表单并尝试访问 session[:obj_id] 变量时，我发现它为零

如何 ？

我错过了什么重要的东西。？

# android - 为什么我的 android 应用程序的自定义 ArrayAdapter 不显示图像？

> ID：11775682
> 
> 赞同：1
> 
> 时间：2012-08-02T10:31:50.007
> 
> 标签：android, imageview, android-arrayadapter, out-of-memory

我制作了一个 android 应用程序，当网络不可用时，图像将保存到本地数据库。我将图像 uri 保存在数据库表中，并从图像 uri 中检索图像，并在使用自定义数组适配器时显示该`imageView`图像`listView` 。当我使用模拟器运行我的应用程序时，它运行良好。但是，在使用 android 手机时，它显示*Forced Close 错误*。

错误日志如下：

```
java.lang.OutOfMemoryError: bitmap size exceeds VM budget
at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:504)
at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:370)
at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:715)
at android.graphics.drawable.Drawable.createFromStream(Drawable.java:675)
at android.widget.ImageView.resolveUri(ImageView.java:525)
at android.widget.ImageView.setImageURI(ImageView.java:309)
at com.freedom.net.Syncho2$NoteListAdapter.getView(Syncho2.java:219)
at android.widget.AbsListView.obtainView(AbsListView.java:1519)
at android.widget.ListView.makeAndAddView(ListView.java:1749)
at android.widget.ListView.fillDown(ListView.java:674)
at android.widget.ListView.fillFromTop(ListView.java:731)
at android.widget.ListView.layoutChildren(ListView.java:1602)
at android.widget.AbsListView.onLayout(AbsListView.java:1349)
at android.view.View.layout(View.java:7320)
at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1263)
at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1137)
at android.widget.LinearLayout.onLayout(LinearLayout.java:1051)
at android.view.View.layout(View.java:7320)
at android.widget.FrameLayout.onLayout(FrameLayout.java:342)
at android.view.View.layout(View.java:7320)
at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1263)
at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1137)
at android.widget.LinearLayout.onLayout(LinearLayout.java:1051)
at android.view.View.layout(View.java:7320)
at android.widget.FrameLayout.onLayout(FrameLayout.java:342)
at android.view.View.layout(View.java:7320)
at android.view.ViewRoot.performTraversals(ViewRoot.java:1162) 
```

我的自定义适配器如下所示：

```
public class NoteListAdapter extends  ArrayAdapter<ImageFromDB> {
Context c;

ArrayList<ImageFromDB> image = null;
ArrayList<String> uriImage = null;
ArrayList<Integer> ID = null;

private AllId allid = null;
DBAdapter db = null;

WatchListAllEntity watchListAllEntity=null;
int flagVariable=1;
private ArrayList<ImageFromDB> items;

public NoteListAdapter(Context context, int textViewResourceId,
        ArrayList<ImageFromDB> items) {

    super(context, textViewResourceId, items);
    Log.e("sf","123");
    this.items = items;
    c=context;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;

    final int myPosition = position;
    if (v == null) {
        LayoutInflater vi = (LayoutInflater) c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.listitempict2, null);
    }
    ImageFromDB re = items.get(position);
    Log.e("re", re+"");
    if (re != null) {
        ImageView tt = (ImageView) v.findViewById(R.id.imageviewproduct);
        String imageUri = re.getImageuri();
        Log.e("imageUri", imageUri+"");
        tt.setImageURI(Uri.parse(imageUri));

        final CheckBox checkBox = (CheckBox) v.findViewById(R.id.checkboxproduct);
        checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {

                if (isChecked) {
                    if(flagVariable==1)
                    {
                        String ImUri = items.get(myPosition).getImageuri();
                        allid.setImageUri(ImUri);
                        allid.setId(items.get(myPosition).getId());
                        flagVariable++;
                        Log.e("flagVariable  : " , flagVariable+"");
                    }
                    else
                    {
                        checkBox.setChecked(false);
                        //Toast.makeText(Syncho2.this,"正しく選んでください。",Toast.LENGTH_SHORT).show();
                    }
                } else {
                    flagVariable=1;
                    Log.e("flagVariable  : " , flagVariable+"");
                }
            }
        });
    }
    return v;
}
} 
```

我从这样的活动中调用此*适配器*：

```
noteListAdapter = new NoteListAdapter(this, R.layout.listitempict, image); 
```

我从调试中注意到，当图像只有**两个时，***适配器*被调用**了六次**。**它五次**返回*视图*，但**第六次**显示该错误。

 ******** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:40:28.720

阅读此内容：http: [//developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html) ，您将能够毫无错误地加载您的图像！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:02:49.497

```
 public View getView(int position, View convertView, ViewGroup parent) {        

        View row = convertView;
     // if it's not recycled, initialize some attributes
        if (row == null) {  
            LayoutInflater li = (LayoutInflater)   mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
            row = li.inflate(R.layout.menucategory, null);          
            //imageView.setLayoutParams(new GridView.LayoutParams(85, 85));         
        }
            // getCategoryItem          
            Category  category = (Category) getItem(position);
            // Get reference to ImageView
            categoryIcon = (ImageView) row.findViewById(R.id.category_image);
            //categoryIcon.setLayoutParams(new GridView.LayoutParams(85, 85));
            categoryIcon.setScaleType(ImageView.ScaleType.CENTER_CROP);
            categoryIcon.setPadding(5, 5, 5, 5);

            categoryName = (TextView) row.findViewById(R.id.category_name);
            //Set category name
            categoryName.setText(category.getCategoryName());           

            if(category.getCategoryPath() != null){             
                    Bitmap bitmap = BitmapFactory.decodeFile(category.getCategoryPath());
                    System.out.println("bitmap2::  "+ bitmap);
                    if(bitmap != null){
                     categoryIcon.setImageBitmap(bitmap);
                    }               
            }                              

        return row;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:25:13.330

我找到了解决方案。我觉得每个人都应该知道关于 android 应用程序的内存管理。[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)。当我试图直接在 ImageView 上显示图像 Uri 时，问题就出现了。我觉得每个人都应该避免像这样的代码 ImageView.setImageURI(Uri.parse(imageUri)) 。取而代之的是，尝试在 imageview 上加载位图或可绘制。*******

# php - Symfony2 表单处理程序在持久化之前检查更改

> ID：11775684
> 
> 赞同：0
> 
> 时间：2012-08-02T10:32:10.100
> 
> 标签：php, forms, symfony, doctrine-orm

我想在坚持之前检查我的水合实体的变化。

我尝试使用 find 将一个新实体放入带有 DB 值的 onSuccess（在 bindRequest 之后），但是这个对象具有水合值而不是 DB 值！

这是我尝试过的：

```
public function onSuccess(TachesDetails $detail) {
    $tache_new = $detail->getTache();
    $tache_old = $this->em->getRepository('NomDuBundle:Taches')->find($tache_new->getId());
    var_dump($tache_old);
    // ...
    $this->em->persist($detail);
    $this->em->persist($detail->getTache());
    $this->em->flush();
} 
```

$tache_old 的 Var_dump 给了我水合值。

**编辑 ：**

几个小时后我找到了解决方案。

要解决此问题，您必须在控制器中创建实体的克隆并通过 formHandler 参数发送它。

在 onSuccess 函数中，您可以像这样访问它：

```
$this->entityCloned 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:04:48.250

首先，您可以使用[`prePersist`event](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/events.html#prepersist)来检查发生了什么变化。比 更合适`onSuccess`。

还有更多本地方式来检查更改，使用[`UnitOfWork`object](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/working-with-objects.html)：

```
$unitOfWork = $entityManager->getUnitOfWork();
$unitOfWork->computeChangeSets();
$changes = $unitOfWork->getEntityChangeSet($yourEntity); 
```

# ssis - “元数据驱动”是什么意思？我一直在 ETL 上下文中听到这句话，但永远无法弄清楚

> ID：11775690
> 
> 赞同：4
> 
> 时间：2012-08-02T10:32:24.670
> 
> 标签：ssis, metadata, etl, informatica, ab-initio

如果我问的是一个不恰当的问题，但我多年来一直听到“元数据驱动”这个短语，但一直无法理解。

据我了解，元数据是关于数据的数据（信息）！我或多或少地理解这一点！

但是当我听到“元数据驱动”（特别是在 ETL 世界中）时，我无法弄清楚它到底是什么意思。

我对一个 ETL 工具 SSIS 有很好的经验，所以在它的上下文中的例子很容易被取消。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T10:54:31.330

假设您将 5 行从表 A 移动到表 B，并且您希望确保只有符合特定条件的行受到影响。在这种情况下，您的流程依赖于数据，因此是数据驱动设计的一个示例。

现在，让我们假设您有一些“相似”的源和/或目标表模式，它们在您希望处理它们的方式上相似但在它们的确切实现上不同（表名、列名、列数据类型，甚至数据库类型：Oracle、MS SQL、Sybase，甚至是平面文件或 XML）所以您想要在 ETL 的实际运行期间为特定 ETL“插入”源和目标、数​​据库连接等.

您需要将“逻辑”ETL 过程与“物理”实现明确分离。换句话说，您希望以通用逻辑单元/术语描述 ETL，在其运行期间由实际物理单元/术语替换。

然后，您得到的是对 ETL 过程的描述，该过程对于任何情况都足够通用，并且可以根据这些源和目标的**元数据为特定的源/目标系统运行适当的自定义 -***元数据驱动的设计*，它允许您拥有 ETL 过程的通用“逻辑”表示，在运行时成为“物理实例化”。

# wpf - 带有 IUnityContainer 的 WPF MVVM 创建不需要的多个实例

> ID：11775691
> 
> 赞同：1
> 
> 时间：2012-08-02T10:32:27.077
> 
> 标签：wpf, inheritance, mvvm, unity-container, ioc-container

嗨，我目前正在使用带有模型/视图模式和 IOC 的 WPF，但是我遇到了一个问题，我目前有 3 个视图，其中只需要创建两个，在运行时确定。

在每个视图中，我使用 xaml 为视图提供对象，如下所示：

视图A

```
<viewmodel:modelA x:Key="viewModel"/> 
```

或者

视图B

```
<viewmodel:modelB x:Key="viewModel"/> 
```

...ETC

这些视图及其后续模型也具有如下层次结构：

```
class modelA          { public virtual  ConfigA    {get; set;}   } 
class modelB : modelA { public override ConfigB    {get; set;}   }
class modelC : modelB { public override ConfigC    {get; set;}   }

class ConfigA           { public int Test  { get; set;} } 
class ConfigB : ConfigA { public int TestA { get; set;} } 
class ConfigC : ConfigC { public int TestB { get; set;} } 
```

现在使用 IOC，我正在创建容器并注册所需模型的实例（模型 B 或模型 C）。当尝试通过 container.resolve 实例化所需的视图时，ViewA + ViewB 或 ViewA + ViewC。

我得到了模型的多个实例化。

当我只想创建 1 种类型时，modelB 或 modelC。

```
switch (Object)
{
  case 1:
    modelB b = new modelB();
    Container.RegisterInstance<modelB>(b, new ContainerControlledLifetimeManager());
    RegionManager.Regions[RegionNames.MainRegion].Add(Container.Resolve<ViewB>());
  break;
  case 1:
    modelC c = new modelC();
    Container.RegisterInstance<modelC>(c, new ContainerControlledLifetimeManager());
    RegionManager.Regions[RegionNames.MainRegion].Add(Container.Resolve<ViewC>());
  break;
}
RegionManager.Regions[RegionNames.MainRegion].Add(Container.Resolve<ViewA>()); 
```

当我想要的是容器使用已构建的模型实例并将其注入视图时，视图的解析正在生成更多模型。任何人都可以帮助或指出我正确的方向，

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T02:59:40.860

我不太确定我是否走在正确的轨道上，但我会看看我是否能提供帮助。

以我看到你所拥有的方式查看 View/ModelB 场景：

1.  您将 ModelB 的单个实例注册到 UnityContainer
2.  你尝试解决一个新的 ViewB
3.  创建了一个新的 ModelB 实例，而不是使用步骤 1 中的实例

创建 ViewB 对象时，它会独立于统一容器创建一个新的 ModelB。如果您希望使用之前在统一容器中注册的 ModelB 实例，您可以将其作为 ViewB 的依赖项传递，例如

```
public class ViewB
{
    public ViewB(ModelB model){ .. }
} 
```

如果您有此设置，那么当您尝试解析 ViewB 时，您之前注册的 ModelB 将被传入。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:30:15.737

万一以后有人发现了这个问题，并且想知道，我基本上通过在我的视图中取出对视图模型的静态引用来解决这个问题。

```
<viewmodel:modelB x:Key="viewModel"/> 
```

正如 Scott 建议的那样，首先注册类型，然后是该类型的实例，然后解析我的继承视图，然后解析基本视图（当 DI 容器调用时，它会注入已注册的类型）。不幸的是，这意味着在 VS2010 中我无法使用设计器在 xaml 中创建绑定，因为我必须从视图构造函数中的代码设置 DataContext。

代码：

```
 UserControl view = null;
  switch (runtimeSetArg)
  {
    case 1:
      Container.RegisterType<modelA, modelB>(new ContainerControlledLifetimeManager());
      Container.RegisterInstance<modelB>(new modelB());
      view = Container.Resolve<viewB>();
      break;
    case 2:
      Container.RegisterType<modelA, modelC>(new ContainerControlledLifetimeManager());
      Container.RegisterInstance<modelC>(new modelC());
      view = Container.Resolve<viewC>();
      break;
    case 3:
      ...
      break;
    case default:
      break;
  }

  if (view != null)
  {
    RegionManager.Regions[RegionNames.MainRegion].Add(Container.Resolve<viewA>());        
    RegionManager.Regions[RegionNames.MainRegion].Add(view);
  } 
```

然后在视图后面的代码中

```
public partial class ViewB: UserControl
{
  public ViewB(IUnityContainer container)
  {
    this.DataContext = (ModelB)container.Resolve<ModelB>();      
    InitializeComponent();
  }
} 
```

就像我说的那样，这解决了这个问题，但我希望有一种更简洁的方式来使用继承的视图及其模型。我仍在寻找其中的内容，但如果这有助于其他坚持这一点的人，那就太好了。

# r - 如何指定实际的 x 轴值以绘制为 R 中的 x 轴刻度

> ID：11775692
> 
> 赞同：67
> 
> 时间：2012-08-02T10:32:35.737
> 
> 标签：r, plot

我正在 R 中创建一个绘图，我不喜欢 R 绘制的 x 轴值。

例如：

```
x <- seq(10,200,10)
y <- runif(x)

plot(x,y) 
```

这会在 X 轴上绘制具有以下值的图形：

`50, 100, 150, 200`

但是，我想将`10,20, 30 ... 200`存储在变量 x 中的 20 个值绘制为 X 轴值。我浏览了无数的博客和简洁的手册——经过数小时的搜索，我找到任何有用的东西最接近的是以下（总结）说明：

1.  调用`plot()`or `par()`，指定参数`xaxt='n'`
2.  打电话给`axis()`例如`axis(side = 1, at = seq(0, 10, by = 0.1), labels = FALSE, tcl = -0.2)`

我试过了，结果图根本没有 x 轴值。有没有可能有人知道如何做到这一点？我不敢相信以前没有人尝试过这样做。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-08-02T10:54:33.187

您可以在 的帮助页面中找到问题的答案`?axis`。

以下是使用您的数据修改的帮助页面示例之一：

选项 1：用于`xaxp`定义轴标签

```
plot(x,y, xaxt="n")
axis(1, xaxp=c(10, 200, 19), las=2) 
```

选项 2：使用`at`和`seq()`定义标签：

```
plot(x,y, xaxt="n")
axis(1, at = seq(10, 200, by = 10), las=2) 
```

这两个选项产生相同的图形：

![在此处输入图像描述](../Images/59e431add00c0c97fe339dca3448aaa5.png)

* * *

PS。由于您有大量标签，因此您必须使用其他参数来使文本适合绘图。我`las`用来旋转标签。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T10:56:14.870

仔细查看`?axis`文档。如果您查看`labels`参数的描述，您会发现它是：

```
"a logical value specifying whether (numerical) annotations are 
to be made at the tickmarks," 
```

因此，只需将其更改为 true，您就会得到刻度标签。

```
x <- seq(10,200,10)
y <- runif(x)
plot(x,y,xaxt='n')
axis(side = 1, at = x,labels = T)
# Since TRUE is the default for labels, you can just use axis(side=1,at=x) 
```

请注意，如果您不拉伸窗口宽度，则 R 可能无法写入所有标签。使用窗口宽度，您会明白我的意思。

* * *

太糟糕了，您很难找到文档！你的搜索词是什么？尝试输入`r axis`谷歌，你会得到的第一个链接是[我之前提到的 Quick R 页面](http://www.statmethods.net/advgraphs/axes.html)。向下滚动到“Axes”，你会得到一个关于如何做的非常好的小指南。您可能应该先检查那里是否有任何绘图问题，这比等待 SO 回复要快。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-13T11:22:19.323

希望这个编码能帮助你:)

```
plot(x,y,xaxt = 'n')

axis(side=1,at=c(1,20,30,50),labels=c("1975","1980","1985","1990")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-25T07:11:15.467

在绘制时间序列的情况下，该命令`ts.plot`需要一个不同的参数`xaxt="n"`

```
require(graphics)
ts.plot(ldeaths, mdeaths, xlab="year", ylab="deaths", lty=c(1:2), gpars=list(xaxt="n"))
axis(1, at = seq(1974, 1980, by = 2)) 
```

# jquery - 父级中心叠加

> ID：11775696
> 
> 赞同：0
> 
> 时间：2012-08-02T10:32:57.827
> 
> 标签：jquery, css, overlay

这是另一个带有扭曲的居中叠加问题。我需要在它的父容器中居中叠加。

并发症

1.  如果容器比屏幕长（即垂直滚动条），我需要覆盖在屏幕中垂直居中并在父级中水平居中
2.  如果包含适合屏幕（即没有垂直侧边栏），我需要在父容器中水平和垂直居中覆盖。

我目前在这两种情况下都将覆盖集中在屏幕上。

示例请看[我的主页](http://mattskelton.ca)（试试下面两个服务的寻呼机）和[服务列表](http://mattskelton.ca/service/index)（使用寻呼机）。

我当前用于屏幕居中的 CSS 是

```
.overlay {
    display: none;
    padding: 20px 0;
    text-align: center;
    vertical-align: middle;
    background: #E9F7FF;
    border: 3px solid #97D1F4;
    font-size: 1.5em;
    color: #97D1F4;
    font-weight: bold;
    width: 300px;
    height: 20px;
    position: fixed;
    top: 50%;
    left: 50%;
    margin-top: -10px;
    margin-left: -150px;
} 
```

是的，我可以使用 jQuery 来实现这一点。不过，只有 CSS 才是理想的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:59:11.523

使用 jQuery UI 来解决 - 实际上很简单。

```
function isScrolledIntoView(elem)
{
    var docViewTop = $(window).scrollTop();
    var docViewBottom = docViewTop + $(window).height();

    var elemTop = $(elem).offset().top;
    var elemBottom = elemTop + $(elem).height();

    return ((docViewTop < elemTop) && (docViewBottom > elemBottom));
}

if (isScrolledIntoView(container))
        {
            $(overlay).position({
                my: "center",
                at: "center",
                of: $(container)
            });
        }
        else
        {
            $(overlay).position({
                my: "center",
                at: "center",
                of: window
            });
        }

        $(overlay).show();
} 
```

仍然需要找到一种垂直居中到窗口和水平居中到父容器的方法，但这目前有效。

# html - 尝试将 html 转换为 jsp 时出错

> ID：11775699
> 
> 赞同：1
> 
> 时间：2012-08-02T10:33:16.250
> 
> 标签：html, jsp

在将 html 转换为 jsp 时，我遇到了一个名为 unterminated tag 的错误，如“292:392: Unterminated tag”。292:392 是否指向行号？如果是这样，我应该参考 292 和 392 之间的哪个行号来解决问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:34:31.867

它指的是`line-number:character-number`.

在您的情况下，它应该在 290 行的 390 秒字符中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:36:00.917

292 指的是行号，392 指的是该行中的字符位置。

# java - 从另一个 java 程序运行 java 程序

> ID：11775702
> 
> 赞同：0
> 
> 时间：2012-08-02T10:33:59.210
> 
> 标签：java, process, javac, runtime.exec, java-compiler-api

我正在尝试从另一个 Java 应用程序运行 Java 程序。这是我的代码：

```
public class Main {
  public static int Exec() throws IOException {
    Process p = Runtime.getRuntime().exec("javac -d C:/Users/Dinara/Desktop/D/bin "
            + "C:/Users/Dinara/Desktop/D/src/test.java");
    Process p1 = Runtime.getRuntime().exec("java -classpath C:/Users/Dinara/Desktop/D/bin test");
    return 0;
  }

  public static void main(String[] args) throws IOException {
    Exec();
  }
} 
```

`javac`工作正常并在 bin 目录中创建`test.class`文件。但是`java -classpath C:/Users/Dinara/Desktop/D/bin test`不运行该`test.class`文件。的内容`test.java`：

```
import java.io.*;
class test {
  public static void main(String args[]) {
    try {  
      FileWriter fstream = new FileWriter("out.txt");
      BufferedWriter out = new BufferedWriter(fstream);
      out.write("Hello Java");
      out.close();
    } catch (Exception e) {
    System.err.println("Error: " + e.getMessage());
    }
  }
} 
```

我认为识别 Java 命令有问题。你能给我一个解决这个问题的示例代码或分享想法吗？我正在使用 Netbeans 运行 Main 类，应用程序文件夹的位置是 C:\Users\Dinara\Main

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:42:25.350

采用

```
System.getProperty("java.home") + "/bin/java -classpath C:/Users/Dinara/Desktop/D/bin test" 
```

代替

```
"java -classpath C:/Users/Dinara/Desktop/D/bin test" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T10:39:04.913

您需要提供 javac 的完整路径，exec 不会使用 ath 为您找到它

# javascript - 如何在表格的 HTML 页面中打印解析的 JSON 数据

> ID：11775707
> 
> 赞同：1
> 
> 时间：2012-08-02T10:34:18.950
> 
> 标签：javascript, html

我已经通过 Web 服务调用访问了 JSON 数据并解析了 JSON 数据。我想知道如何在 HTML 表格中打印 JSON 数据？？？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>File Download</title>
<script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript">

    function jsonparser1() {
        $.ajax({
            type: "GET",
            crossDomain: true,
            url: "http://10.211.2.219:8080/JerseyWebService/rest/sample/files",
            dataType: "jsonp",
            success: function (res) {
                $.each(res['data'], function (i, row) {
                    var ftime = row['time'];
                    var fname = row['name'];
                    var fhref = row['href'];

                    document.myform.???????????????=ftime;
                    ??????????????????????????????????????
                    ??????????????????????????????????????  
                })
            },

            error: function (xml) {
                alert(xml.status + ' ' + xml.statusText);
            }
        });
    }        
</script>    
</head>
<body>
<form name="myform">
    <input type="button" name="clickme" value="Click here to display the details of the files" onclick=jsonparser1() />
    ??????????????????????????????????????????
    ??????????????????????????????????????????     
</form>
</body>
</html> 
```

我使用的 JSON 数据是：

```
{"data":[{"id":13,"time":"02-08-2012 3:24:45 PM","name":"jersey-multipart-1.0.3.144640.jar","href":"file://chndlf716168/TempUp/1343901285087-FileName-jersey-multipart-1.0.3.144640.jar"},{"id":14,"time":"02-08-2012 3:36:0 PM","name":"icloud_hero.png.png","href":"file://chndlf716168/TempUp/1343901960304-FileName-icloud_hero.png.png"}],"code":true} 
```

我想以表格格式显示时间、名称和 href 属性。href 应该在锚标记中。如果将更多数据附加到 JSON 文件中，则表应该可以灵活更改。第一步是我必须以表格格式显示详细信息。

任何人都请在这件事上提供帮助...在此先感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:41:56.550

希望这可以帮助：

```
$("document").ready(function() {
    $.getJSON("http://localhost:1909/encoders", function(data) {

        $("#div-my-table").text("<table>");

        $.each(data, function(i, item) {
            $("#div-my-table").append("<tr><td>" + item.EncoderName +"</td><td>" + item.EncoderStatus + "</td></tr>");
        });

        $("#div-my-table").append("</table>");

    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:42:30.830

试试这个

```
var output = "<table>";
    $.each(res['data'], function (i, row) {                     
        var ftime = row['time'];                     
        var fname = row['name'];                     
        var fhref = row['href'];
        output+="<tr><td>VARIABLE VALUE</td></tr>";
        })
output += "</table>"; 
```

当 outpur 变量准备好内容时。将其打印在所需位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T10:44:20.543

这是每个循环中的基本 jquery 执行此操作。

```
$row = $('<tr></tr>');
$row.append('<td>' + somedata + '</td>');
// repeat the above line for each data item
$('#mytable).append($row); 
```

在您的 HTML 中创建`<table id="mytable"></table>`

# ruby-on-rails - Rails路由到祖父母嵌套类

> ID：11775709
> 
> 赞同：0
> 
> 时间：2012-08-02T10:34:26.313
> 
> 标签：ruby-on-rails, routes, nested

当我尝试通过单击如下所述的编辑链接从其显示页面编辑子资源（课程）时，我遇到了嵌套路由问题。涉及两个类：单元和课程。我不明白为什么 Rails 试图路由到课程控制器（Units 的父级）。

任何帮助将不胜感激。

**我收到此错误和网址**

```
http://localhost:3000/units/3/lessons/13/edit
Routing Error

No route matches {:action=>"show", :controller=>"courses", :id=>nil} 
```

**config/routes.rb** 资源：课程做资源：单元结束

```
resources :units do
    resources :lessons
end 
```

** 来自 rake 路线**

```
 unit_lessons GET    /units/:unit_id/lessons(.:format)            lessons#index
                 POST   /units/:unit_id/lessons(.:format)            lessons#create
 new_unit_lesson GET    /units/:unit_id/lessons/new(.:format)        lessons#new
edit_unit_lesson GET    /units/:unit_id/lessons/:id/edit(.:format)   lessons#edit
     unit_lesson GET    /units/:unit_id/lessons/:id(.:format)        lessons#show 
```

**点击链接的代码**

```
<%= link_to "Edit Lesson", edit_unit_lesson_path(@unit, @lesson ) %> 
```

**课程控制器**

```
class LessonsController < ApplicationController
  before_filter :find_unit
  before_filter :find_lesson, :only => [:show,:edit,:update,:destroy]
  .
  .
  .
private
def find_unit
  @unit = Unit.find(params[:unit_id])
end

def find_lesson
  @lesson = @unit.lessons.find(params[:id])
end 
```

**服务器日志文件**

```
Started GET "/units/3/lessons/12/edit" for 127.0.0.1 at 2012-08-02 14:50:55 +0200
Processing by LessonsController#edit as HTML
    Parameters: {"unit_id"=>"3", "id"=>"12"}
    Unit Load (0.1ms)  SELECT "units".* FROM "units" WHERE "units"."id" = ? LIMIT 1  [["id", "3"]]
Lesson Load (0.1ms)  SELECT "lessons".* FROM "lessons" WHERE "lessons"."unit_id" = 3 AND     "lessons"."id" = ? LIMIT 1  [["id", "12"]]
Rendered lessons/_form.html.erb (3.4ms)
Rendered lessons/edit.html.erb within layouts/application (4.4ms)
Completed 500 Internal Server Error in 7ms

ActionController::RoutingError (No route matches {:action=>"show", :controller=>"courses", :id=>nil}):
app/views/lessons/edit.html.erb:8:in   `_app_views_lessons_edit_html_erb___3830769233446763788_70188197130200' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:07:47.990

找到了。该链接是表体的一部分，使用 .each 迭代器构建。我需要将名称从“@lesson”更改为“lesson”，因为这是构建表时引用的名称。

对于遇到类似问题的其他人，我将功能代码放在下面。

```
<tbody>  
  <% @unit.lessons.each do |lesson| %>
    <tr>
      <td><%= link_to lesson.lesson_name, [@unit, lesson] %></td>
      .
      .
      .
      <td><%= link_to 'Edit', edit_unit_lesson_path(@unit, lesson ) %></td>
   </tr>
 <% end %>
 </tbody> 
```

# android - 使 RelativeLayout 可检查

> ID：11775710
> 
> 赞同：4
> 
> 时间：2012-08-02T10:34:29.573
> 
> 标签：android, android-layout, android-drawable

我尝试在里面`CheckBox`使用`RelativeLayout`with`TextView`和`FrameLayout`（在背景上使用选择器）编写我自己的。

我认为它需要父母的可检查状态，但为什么要`setDuplicateParentStateEnabled(true)`检查我不知道。`FrameLayout``RelativeLayout`

```
public class MyCheckbox extends RelativeLayout implements OnClickListener, Checkable
{
private static final int ID_CHECKBOX = -1234411;
private static final int ID_TEXTVIEW = -1234412;
private static final int ID_PARENT = -1234413;

private TextView textView;
private FrameLayout checkBox;
private boolean isChecked;

public MyCheckbox(Context context)
{
    this(context, null);
}

public MyCheckbox(Context context, AttributeSet attrs)
{
    super(context, attrs);

    LayoutParams lp;

    setId(ID_PARENT);
    setOnClickListener(this);

    // checkBox
    checkBox = new FrameLayout(context);
    checkBox.setId(ID_CHECKBOX);
    checkBox.setDuplicateParentStateEnabled(true);

    // textView
    textView = new TextView(context);
    textView.setId(ID_TEXTVIEW);
    textView.setOnClickListener(this);

    boolean checkboxToRight = false;

    TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.MaptrixCheckbox);

    for (int i = 0; i < a.getIndexCount(); i++)
    {
        int attr = a.getIndex(i);
        switch (attr)
        {
            case R.styleable.MyCheckbox_checkboxToRight:
                checkboxToRight = a.getBoolean(attr, false);
                break;

            case R.styleable.MyCheckbox_checkMark:
                checkBox.setBackgroundDrawable(a.getDrawable(attr));
                break;

            case R.styleable.MyCheckbox_text:
                textView.setText(a.getText(attr));
                break;
        }
    }
    a.recycle();

    if (checkboxToRight)
    {
        lp = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        lp.addRule(ALIGN_PARENT_RIGHT);
        lp.addRule(CENTER_VERTICAL);
        lp.setMargins(margins, 0, margins, 0);
        addView(checkBox, lp);

        lp = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
        lp.addRule(CENTER_VERTICAL);
        lp.addRule(LEFT_OF, ID_CHECKBOX);
        addView(textView, lp);
    }
    else
    {
        lp = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        lp.addRule(CENTER_VERTICAL);
        lp.setMargins(margins, 0, margins, 0);
        addView(checkBox, lp);

        lp = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
        lp.addRule(CENTER_VERTICAL);
        lp.addRule(RIGHT_OF, ID_CHECKBOX);
        addView(textView, lp);
    }

    refreshDrawableState();
}

@Override
public void onClick(View v)
{
    int id = v.getId();

    if (id == ID_PARENT || id == ID_TEXTVIEW) toggle();
}

public boolean isChecked()
{
    return isChecked;
}

public void setChecked(boolean chacked)
{
    isChecked = chacked;
    refreshDrawableState();
}

@Override
public void toggle()
{
    isChecked = !isChecked;
    refreshDrawableState();
}
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T08:27:22.017

Holo 中的多选列表似乎有两种 UI 模式（在 ActionMode 的上下文中）：使用复选框或突出显示。

如果您只需要突出显示，您可以使用这个更简单的方法：

使您的列表项布局用于根类，如下所示：

```
public class CheckableRelativeLayout extends RelativeLayout implements Checkable {
private static final int[] STATE_CHECKABLE = {R.attr.state_pressed};
boolean checked = false;

public void setChecked(boolean checked) {
    this.checked = checked;
    refreshDrawableState();
}

public boolean isChecked() {
    return checked;
}

public void toggle() {
    setChecked(!checked);
}

@Override
protected int[] onCreateDrawableState(int extraSpace) {
    int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
    if (checked) mergeDrawableStates(drawableState, STATE_CHECKABLE);

    return drawableState;
}
} 
```

并确保列表项布局中的根元素使用

```
android:background="?android:attr/listChoiceBackgroundIndicator" 
```

我知道这并不是您问题的真正答案（您想要一个实际的复选框），但我还没有在任何地方看到此文档。

ListView 使用 Checkable 接口来确定它是否可以依赖列表项元素来显示可检查状态，或者它是否应该尝试显示它自己。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T10:47:21.890

我只需要覆盖方法：

```
private static final int[] STATE_CHECKABLE = {android.R.attr.state_checked};

@Override
protected int[] onCreateDrawableState(int extraSpace)
{
    int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
    if (isChecked) mergeDrawableStates(drawableState, STATE_CHECKABLE);
    return drawableState;
} 
```

现在一切正常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-08T03:53:52.267

Nik 的回答对我来说部分正确，您需要将**android.R.attr.state_checkable**添加到 STATE_CHECKABLE 数组中，并设置相应的 lenth (2)，否则无法正常工作。

```
private static final int[] CHECKED_STATE_SET = {android.R.attr.state_checked, android.R.attr.state_checkable};

@Override
protected int[] onCreateDrawableState(int extraSpace)
{
    int[] result = super.onCreateDrawableState(extraSpace + CHECKED_STATE_SET.length);
    if(mChecked) mergeDrawableStates(result, CHECKED_STATE_SET);
    return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T10:49:09.407

[http://developer.android.com/reference/android/view/View.html#setClickable%28boolean%29](http://developer.android.com/reference/android/view/View.html#setClickable%28boolean%29)

```
public MyCheckbox(Context context)
{
    this(context, null);
    this.setClickable(true);
}

public MyCheckbox(Context context, AttributeSet attrs)
{
    super(context, attrs);
    this.setClickable(true);
//......
} 
```

# excel - 使用 VBA 将 Web 内容从 Outlook 复制到 Excel

> ID：11775712
> 
> 赞同：1
> 
> 时间：2012-08-02T10:34:32.177
> 
> 标签：excel, url, vba, outlook

我的客户每天都会收到一封带有一次性访问 URL 的电子邮件（它只能访问一次，并且只能在当天访问）。

此 url 中的内容是格式为 .csv（实际上是 tilda sv）文件的**纯文本**，但这与此处无关。

然后（手动）将内容复制并粘贴到 Excel 工作表中，其中应用了一些（格式化）宏（以摆脱 tildas 并将数据放入单元格）。此外，内容的前几行很少是不相关的，即只有第 5-end 行被复制到 Excel 中。

我的问题如下 - 是否可以在 Outlook 中编写 VBA

1.  打开给定电子邮件中提供的 url

2.  从网页复制内容（并删除前几行）

3.  打开 Excel 并将其粘贴到那里（然后应用格式）

我找到了一些关于如何将电子邮件本身的内容复制/粘贴到 Excel 工作表中的答案，但没有设法从 url/网页中找出如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T22:12:43.213

对的，这是可能的

我不是 VBA 专家，但我很少编程来减少日常任务

我可以告诉你步骤：

1.  创建在电子邮件到达时触发 VB 脚本的规则。
2.  在 Outlook 的 VB 脚本中，编写可以打开 excel 的代码
3.  传递连接字符串
4.  将 R1C1 设置为目标单元格
5.  将文件另存为日期变量 .xls

确保前景是开放的。如果 Outlook 未打开，这将不起作用

# android - 在 Android 中打开默认文件管理器外部存储器？

> ID：11775713
> 
> 赞同：3
> 
> 时间：2012-08-02T10:34:36.763
> 
> 标签：android, android-intent

我们的 Android 设备包含内部存储器和外部存储器。我们的应用程序包含一个打开按钮。当我们单击此打开按钮以查看/打开默认文件管理器外部存储器时。

示例代码：

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_GET_CONTENT);
intent.setType("file/*");
startActivity(Intent.createChooser(intent, "View Default File Manager")); 
```

此代码可以查看/打开默认文件管理器内部存储器。

如何（单击打开按钮）查看/打开默认文件管理器外部存储器？

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:46:18.703

试试这个代码

```
 File file = new File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/file");
    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setDataAndType(Uri.fromFile(file),”application/file”);
    startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-09T06:24:33.200

在类定义中：

```
public static String SDCARD_DIRECTORY;
public static String REPORTS_DIRECTORY; 
```

在 onCreate 中：

```
File sdCard = Environment.getExternalStorageDirectory();
SDCARD_DIRECTORY = sdCard.getAbsolutePath();
REPORTS_DIRECTORY = SDCARD_DIRECTORY + "/MyReports";
// Create if necessary the desired folder
File directory = new File (REPORTS_DIRECTORY);
directory.mkdirs(); 
```

现在，这段代码对我有用。

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_GET_CONTENT);
File file = new File(REPORTS_DIRECTORY);
intent.setDataAndType(Uri.fromFile(file),"application/file");
StartActivityForResult(Intent.createChooser(intent,"Open folder"), 0); 
```

# html - CSS 伪类不适用于主导航链接

> ID：11775723
> 
> 赞同：0
> 
> 时间：2012-08-02T10:35:31.610
> 
> 标签：html, css, internet-explorer

代码：

```
a:link { color: #111111; }
a:visited { color: #1b3a57; } 
a:hover { color: #f3371c; } 
```

我的网站上有很多链接。这些状态可以很好地处理，例如，页脚文本（链接）和一般正文链接。但是主导航链接和子标题链接不会改变状态。

我在 IE 5+、Chrome、Opera、Safari、Maxthon 和 FireFox 中进行了测试，但得到了相同的结果。

什么可能导致这种行为？

* * *

更新：

标头代码：

```
#Header {
    width: 100%;
    height: 120px;

    background-image: url('/Shared/Assets/Images/OrangeDot.png');
    background-position: center bottom;
    background-repeat: repeat-x;

}

    #Header #MainLogo {
        float: left;
    } 
```

子标题代码：

```
#SubHeader {
    width: 100%;
    height: max-content;
}
    #SubHeader ul {
        float: left;
        margin: 20px 0 0 0;
    }
        #SubHeader ul li img {
            line-height: 1.5em;
            margin: -.30em 0;
        }
        #SubHeader ul li {
            padding: 0 10px 0 10px;

        }
            #SubHeader ul li a {
                font-size: small;
                /*color: #f3371c;*/
            } 
```

* * *

HTML 标记：

```
 <ul id="MainNavigation" class="HorizontalMenu WithBullets">
            <li><a class="HighlightedMenuOption" href="@Href("~/Home")">Home</a></li>
            <li><a href="@Href("~/Protected/Account/")">Sign In | Register</a></li>
            <li><a href="@Href("~/Shared/Support/")">Support</a></li>
            <li><a href="@Href("~/Shared/")">About Us</a></li>
            <li><a href="@Href("~/Shared/")">Contact Us</a></li>
        </ul>
    </div>
    <div id="SubHeader">
        <div id="categories" class="s_nav">
            <ul>
              <li id="menu_home"> <a href="@Href("~/Home")">Home</a> </li>
              <li> <a href="@Href("~/Shared/Products/")"></a>
                <div class="s_submenu">
                  <h3>Categories</h3>
                  <ul class="s_list_1 clearfix">
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                  </ul>
                  <span class="clear border_eee"></span>
                </div>
              </li>
              <li> <a href="@Href("~/Shared/Products/")"></a>
                <div class="s_submenu">
                  <h3>Categories</h3>
                  <ul class="s_list_1 clearfix">
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                  </ul>
                  <span class="clear border_eee"></span>

                </div>
              </li>
              <li><a href="@Href("~/Shared/Products/")"></a>
                <div class="s_submenu">
                  <h3>Categories</h3>
                  <ul class="s_list_1 clearfix">
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                  </ul>
                  <span class="clear border_eee"></span>
                </div>
              </li>
              <li><a href="@Href("~/Shared/Products/")"></a>
                <div class="s_submenu">
                  <h3>Categories</h3>
                  <ul class="s_list_1 clearfix">
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                  </ul>
                  <span class="clear border_eee"></span>
                </div>
              </li>
              <li><a href="@Href("~/Shared/Products/")">Tek Screws</a>
                <div class="s_submenu">
                  <h3>Categories</h3>
                  <ul class="s_list_1 clearfix">
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                    <li><a href="@Href("~/Shared/Products/")"></a></li>
                  </ul>
                  <span class="clear border_eee"></span>
                </div>
              </li>
            </ul>
          </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:42:32.637

如果您的 HTML 没有**DOCTYPE** ，请 尝试添加它*。（可能工作......！）*

由于不正确的 DOCTYPES 会导致浏览器恢复到 Quirks 模式（IE），并且 CSS 伪类在这种情况下不会与 DOM 相处得很好。如需进一步阅读，请查看[**alistapart.com**](http://www.alistapart.com/articles/doctype/)[中的doctype 和 css 关系](http://www.alistapart.com/articles/doctype/)

# java - 发送 HTTP POST 请求，但 JBOSS 收到空 GET 请求

> ID：11775732
> 
> 赞同：0
> 
> 时间：2012-08-02T10:36:20.137
> 
> 标签：java, http, jsp, post, jboss-4.2.x

我有一个在 jboss 4.2.2 服务器上运行的 jsp 页面。在 jsp 中，我尝试使用 request.getMethod() 和 request.getHeaderNames() 等方法打印 http post 请求的标头。我确定该请求是一个 http 帖子，因为我从另一个程序生成它，但是 jsp 打印的是一个 http **get**请求，打印的内容长度是-1，并且打印的标题与我发送的标题不匹配。

生成请求的应用程序代码或多或少是这样的：

```
 URL url = new URL(the_url);
    HttpURLConnection con = (HttpURLConnection) url.openConnection();
    con.setDoOutput(true);
    con.setDoInput(true);
    con.setRequestMethod("POST");
    con.setRequestProperty("Content-type", "application/timestamp-query");
    con.setRequestProperty("Content-length", String.valueOf(data.length));
    out = con.getOutputStream();
    out.write(data);
    out.flush(); 
```

我尝试打印请求标头的应用程序代码是：

```
 <%@page import="java.io.InputStream"%>
    <%@page import="java.util.Date"%>
    <%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"
    import="java.util.Enumeration"
    import="java.io.File"
    import="java.io.FileOutputStream"
    import="java.util.Date"%><%
    File logfile = new File("/home/tsa/logfile");
    FileOutputStream log_os = new FileOutputStream(logfile);
    Enumeration header_names = request.getHeaderNames();
    log_os.write(("cont-len: "+request.getContentLength()+"\r\n").getBytes());
    log_os.write(("method: "+request.getMethod()+"\r\n").getBytes());
    while (header_names.hasMoreElements()) {
        String name = (String)header_names.nextElement();
        log_os.write((name+": "+request.getHeader(name)+"\r\n").getBytes());
    }
    log_os.close();%> 
```

我应该收到的 HTTP 数据：

```
 POST / HTTP/1.1
    Content-type: application/timestamp-query
    User-Agent: Java/1.7.0_05
    Host: localhost:8080
    Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
    Connection: keep-alive
    Content-Length: 51

    MDECAQEwITAJBgUrDgMCGgUABBSg8UkKINAhHJl7RLw1fhly3quK4wYGBACPZwEBAQH/ 
```

我收到的 HTTP 数据：

```
 User-Agent: Java/1.7.0_05
    Host: 192.168.56.101:8080
    Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
    Connection: keep-alive

    The method reported is GET and the Content-Length: -1 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-24T04:41:28.167

我遇到过同样的问题。我更新到 JDK 1.7.0_u21，问题就消失了。

# makefile - 如何在 Makefile 中打印消息？

> ID：11775733
> 
> 赞同：87
> 
> 时间：2012-08-02T10:36:27.213
> 
> 标签：makefile

我想在使用`makefile`. 下面的可以打印消息，但不会执行后面的脚本。我该如何解决这个问题？

```
ifeq (yes, ${TEST})
        CXXFLAGS := ${CXXFLAGS} -DDESKTOP_TEST
test:
        @echo '************  TEST VERSION ************'
else
release:
        @echo "************ RELEASE VERSIOIN **********"
endif 
```

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-08-02T11:07:25.140

不清楚你想要什么，或者你是否希望这个技巧适用于不同的目标，或者你是否在其他地方定义了这些目标，或者你正在使用什么版本的 Make，但到底是什么，我会继续肢体：

```
ifeq (yes, ${TEST})
CXXFLAGS := ${CXXFLAGS} -DDESKTOP_TEST
test:
$(info ************  TEST VERSION ************)
else
release:
$(info ************ RELEASE VERSIOIN **********)
endif 
```

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2017-11-13T11:03:59.570

> `$(info your_text)` :**信息**。这不会停止执行。
> 
> `$(warning your_text)`:**警告**。这会将文本显示为警告。
> 
> `$(error your_text)` :**致命错误**。这将停止执行。

源代码：[https ://www.gnu.org/software/make/manual/make.html#Make-Control-Functions](https://www.gnu.org/software/make/manual/make.html#Make-Control-Functions)

# events - 如何在 Ember.js 中将事件直接绑定到现有 HTML，而不使用任何类型的视图？

> ID：11775735
> 
> 赞同：1
> 
> 时间：2012-08-02T10:36:31.667
> 
> 标签：events, binding, ember.js

Ember.js 有一个很好的机制，可以将数据绑定到视图，在视图中设置触发事件处理，或者使用路由器。但我需要的是能够处理在已经创建的 HTML 代码中触发的事件（通过 PHP，服务器端）。让我给你看一个简单的例子。我有这个代码：

`<a id="login" href="#">Login</a>`

我需要能够路由/处理对此链接的点击，以便它进入我的 Ember 应用程序。我一直在寻找方法来做到这一点，但我找不到任何方法。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:45:16.250

如果此链接位于 Ember 托管元素的子元素 DOM 元素内，则可以使用`action`帮助器：

```
<a id="login" href="#" {{action doSomeStuff}}>Login</a> 
```

这个`doSomeStuff`事件将被发送到你的`Ember.Router`，它必须在适当的路由中实现处理程序：

```
...: Ember.Route.extend({

  doSomeStuff: function (router) {
    //...
  }
}), 
```

如果链接超出了您的应用范围，您可以使用 JQuery 在与应用相关的元素上注册处理程序：

```
$('a#login').click(function () {
  App.router.transitionTo('the.route.path');
}); 
```

在`App.router`Ember 应用程序初始化时注入，您可以从任何地方访问它。

但是让我说，从路由器外部过渡并不是最佳实践。

最后但同样重要的是，您还可以将上下文传递给`transitionTo`调用。

# iphone - 保存/加载自定义对象数组到 plist Objective C

> ID：11775738
> 
> 赞同：0
> 
> 时间：2012-08-02T10:36:45.793
> 
> 标签：iphone, objective-c, nsmutablearray, save, plist

该应用程序是一个简单的待办事项列表，因此我有一个可变的自定义对象数组。这是自定义类的接口：

```
 @interface Task : NSObject 
    {
        NSString *name;
        BOOL completeness;
        int priority; 
    } 
```

我进退两难了。什么选择 NSCoding 或将 Task 转换为 NSDictionary？我的意思是哪种方式更有效？

这将是我的第一个应用程序。起初我不知道我必须保存数据。我应该重新制作模型吗？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:05:02.417

您可以将`NSDictionary`or 2`NSMutableArray`用于名称对象和优先级对象，我`NSCoding`直到现在都没有工作过，所以我不反对。我会建议你为每个数组使用`NSMutableArray`'s 和相应的 2 个文件。`plist`如果你使用`NSMutableArray`，这将[在文档目录中创建多个 Plist 文件..？](https://stackoverflow.com/questions/11559639/creating-multiple-plist-files-in-document-directory)链接将对您有所帮助。一切顺利

# php - preg_replace 动态

> ID：11775739
> 
> 赞同：1
> 
> 时间：2012-08-02T10:36:50.207
> 
> 标签：php, mysql, arrays, preg-replace, return

键和值 mysql。

```
$valores[$codigo] = "<img src=\"template/" . $template . "/smiles/" . $smile . "\" border=\"0\"/>";
$arrayKeys  =   array_keys($valores);
$arrayValues    =   array_values($valores);
return preg_replace($arrayKeys, $arrayValues, $coment); 
```

错误，警告：preg_replace() [function.preg-replace]：未找到结束分隔符 ':'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:40:25.507

您可能想改用[str_replace()](http://php.net/manual/en/function.str-replace.php)。

**编辑 ：**

您只需要将 preg_replace 替换为 str_replace ：

```
return str_replace($arrayKeys, $arrayValues, $coment); 
```

请参阅此处的文档[str_replace()](http://php.net/manual/en/function.str-replace.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:48:54.213

preg_replace() - 执行正则表达式搜索和替换

如果我理解正确，您想用微笑图像替换:)，这样您就可以这样做：

```
<?php
    $search = array(":))",":)");
    $replace  = array("<img src=\"template/" . $template . "/smiles/laugh.jpg\" />","<img src=\"template/" . $template . "/smiles/smile.jpg\" />");
    str_replace($search, $replace, $comment);
?> 
```

# android - Phonegap Cordova 2.0.0 Android apk 错误

> ID：11775740
> 
> 赞同：2
> 
> 时间：2012-08-02T10:37:11.177
> 
> 标签：android, sencha-touch-2, cordova-2.0.0

我构建了一个非常简单的 Sencha-Touch-2 应用程序并将其部署到 Eclipse。该应用程序在 Chrome 上运行，但在设备上我收到以下错误：

> E/dalvikvm(270)：找不到类 'android.webkit.WebResourceResponse'，引用自方法 org.apache.cordova.CordovaWebViewClient.generateWebResourceResponse

我试图用谷歌搜索它，但没有找到适合我的解决方案。我的应用程序处于 android 2.3.1 级别，而我的设备是 4.1.1 并且在它们两者上都不起作用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:43:56.620

您的“/libs”文件夹中有“cordova-1.9.0.jar”吗？
如果您使用的是 ADT 17 或更高版本，请确保它位于 /libs 文件夹中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T10:43:59.320

我认为它可能与 lib 文件夹的新名称有关（以前`'lib'`现在是`'libs'`）。尝试重命名它以检查它是否有效。

[从这个答案中](https://stackoverflow.com/a/11686466/571353)提取

* * *

编辑：其他可能性是 ProGuard 正在弄乱库来修复它，你可以试试这个：

```
-keep public class * extends com.phonegap.api.Plugin 
-keep public class org.apache.cordova.DroidGap 
-keep public class org.apache.cordova.** 
-libraryjars /Users/Nasir/Desktop/libs/commons-codec.jar
-dontwarn android.webkit.* 
```

[从这个答案中](https://stackoverflow.com/a/11648662/571353)提取

# c# - ActiveMQ - 连接恢复后的 CreateSession 故障转移超时

> ID：11775741
> 
> 赞同：2
> 
> 时间：2012-08-02T10:37:20.410
> 
> 标签：c#, activemq

我正在使用 ActiveMQ 5.6.0 和 ActiveMQ NMS 客户端。

我使用以下代码连接到代理：

```
var connectionFactory = new ConnectionFactory(
    "failover:(tcp://localhost:61616)?transport.timeout=5000"
    );

connection = connectionFactory.CreateConnection();    
connection.Start();

connection.ConnectionResumedListener += OnConnectionResumed; 
```

然后我停止代理并重新启动它。之后在 OnConnectionResumed 方法中

```
private void OnConnectionResumed()
{
    var session = connection.CreateSession();

    ...
} 
```

尝试创建会话时，我总是遇到故障转移超时异常。

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:03:47.360

出现此问题是因为我在进行恢复调用的线程中创建了一个会话。

正确的代码是：

```
private void OnConnectionResumed()
{
    Task.Factory.StartNew(() =>
        {
            var session = connection.CreateSession();

            ...
        });
} 
```

# forms - Zend 表单提交在验证失败后不起作用 - 仅在 Chrome 中

> ID：11775749
> 
> 赞同：1
> 
> 时间：2012-08-02T10:38:08.627
> 
> 标签：forms, validation, zend-framework, google-chrome, submit

我有一个包含三个输入的登录表单 - 用户名、密码和提交验证。如果用户名或密码为空，则验证正确失败。但是在 Chrome 中，我无法重新提交表单 - 单击提交无效。在 IE 和 Firefox 中它工作正常。

```
Zend Controller Action:

public function loginAction()
    {
        $this->_helper->layout->setLayout('layout_nomenu');
        $loginForm = new Application_Form_Login();

        $request = $this->getRequest();
        if ($request->isPost()) {

            if ($loginForm->isValid($request->getPost())) {

                $valid = false;
                if ($valid) {
                //if ($this->_process($loginForm->getValues())) {
                    $this->_helper->redirector('users', 'grid');
                } else {
                    $this->view->loginfail = "Login details not recognised, please try again";
                } 
            } 
        }
        $this->view->login = $loginForm;
    }

forms.ini:

[login]
action = "login"
method = "post"
name = "login"

elements.username.type = "text"
elements.username.options.label = "Username:"
elements.username.options.validators.strlen.validator = "StringLength"
elements.username.options.validators.strlen.options.min = "2"
elements.username.options.validators.strlen.breakChainOnFailure = "true"
elements.username.options.required = "true"

elements.password.type = "password"
elements.password.options.label = "Password:"
elements.password.options.validators.strlen.validator = "StringLength"
elements.password.options.validators.strlen.options.min = "2"
elements.password.options.validators.strlen.breakChainOnFailure = "true"
elements.password.options.required = "true"

elements.submit.type = "submit"
elements.submit.options.label = "Login"

displayGroups.loginform.elements.username   =   "username"
displayGroups.loginform.elements.password   =   "password"
displayGroups.loginform.elements.submit     =   "submit"
displayGroups.loginform.options.legend      =   "Login"

Login form:

class Application_Form_Login extends Zend_Form
{
    public function init()
    {

        $config = new Zend_Config_Ini(APPLICATION_PATH . '/configs/forms.ini', 'login');
        $this->setOptions($config->toArray());
        //$this->addElement('hash', 'no_csrf_foo', array('salt' => 'unique'));

    }
} 
```

html 非常简单 - 没有 js 等：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>Development </title>

<link href="/css/global.css" media="screen" rel="stylesheet" type="text/css" /><link href="/css/global.css" media="screen" rel="stylesheet" type="text/css" />

<link href="/css/development.css" media="screen" rel="stylesheet" type="text/css" />

</head>

<body>

    <div id="header">

        <div id="header-logo" style="float: left"><img src="/images/small.gif" alt="Development" style="margin-top:5px" />&nbsp;&nbsp;Development</div>

        <div id="header-navigation" style="float: right">

        </div>

    </div>

    <div id="view-content">
<div id="loginform">
<form id="login" enctype="application/x-www-form-urlencoded" action="login" method="post"><dl class="zend_form">

<dt id="loginform-label">&#160;</dt><dd id="loginform-element"><fieldset id="fieldset-loginform"><legend>Login</legend>

<dl>

<dt id="username-label"><label for="username" class="optional">Username:</label></dt>

<dd id="username-element">

<input type="text" name="username" id="username" value="a" />

<ul class="errors"><li>'a' is less than 2 characters long</li></ul></dd>

<dt id="password-label"><label for="password" class="optional">Password:</label></dt>

<dd id="password-element">

<input type="password" name="password" id="password" value="" /></dd>

<dt id="submit-label">&#160;</dt><dd id="submit-element">

<input type="submit" name="submit" id="submit" value="Login" /></dd></dl></fieldset></dd></dl></form>   <div id="loginerror">
        </div>
</div>
<div id="loginspacer">&nbsp;</div>
</div>

<div id="footer">

<div id="footer-logo"></div>

<div id="footer-navigation">Quetzal Technology 2012</div>

</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:53:45.230

也许尝试简单一点，看看会发生什么：

```
public function loginAction()
    {
        $this->_helper->layout->setLayout('layout_nomenu');
        $loginForm = new Application_Form_Login();

        $request = $this->getRequest();
        if ($request->isPost()) {

            if ($loginForm->isValid($request->getPost())) {

                    $this->_helper->redirector('users', 'grid'); //go here if valid                   
            } else {
            //go here if not valid
            $this->view->loginfail = "Login details not recognised, please try again";

            }          

        } 
        //if  not post show form
        $this->view->login = $loginForm;
    } 
```

我不得不怀疑在某些情况下，额外的循环是否会导致问题。

# .net - 计划使用实时流媒体视频。备择方案

> ID：11775756
> 
> 赞同：0
> 
> 时间：2012-08-02T10:38:49.413
> 
> 标签：.net, asp.net-mvc, iis, streaming

有一个在框架下编写的网站，`ASP.NET MVC`有哪些替代方案可以与之集成`real-time video streaming`？

我听说过`IIS Smooth Streaming`。另外我听说这不是在`ASP.NET MVC`这里使用的好方法？这如何在现实世界的应用程序中得到解决？

谢谢！

**环境（假设..）**

视窗服务器 2008 R2；IIS 7；

但是也许可以在跨域上使用某些服务，我的意思是在支持这种服务的其他平台上..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:22:33.003

我发现了这个东西，类似于我的问题：[如何在 C# 中实现视频直播？](https://stackoverflow.com/questions/608141/how-to-implement-live-video-broadcasting-in-c). 仍在寻找替代品。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T06:45:16.707

你检查过 ASPNET 视频吗？[http://www.aspnet-video.com/](http://www.aspnet-video.com/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T13:21:50.367

为什么不简单地使用 Vimeo 托管您的视频？[https://vimeo.com/](https://vimeo.com/)。它对于商业目的不是免费的，但它足够便宜并且允许高分辨率视频。如果您没有大流量广告几个视频，那么在 IIS 上处理流式传输可能会更便宜。

# android - android - 在活动之间滑动

> ID：11775757
> 
> 赞同：2
> 
> 时间：2012-08-02T10:38:49.523
> 
> 标签：android, swipe

我正在为当地报纸和 atm 开发 android 应用程序，我正在尝试实现文章之间的滑动。我的主要活动是 HNappActivity，文章展示活动是 AcrticleActivity。我的问题是，刷卡不起作用，我很绝望，因为我不知道出了什么问题。这是实现刷卡的代码：

```
public class ArticleActivity extends SherlockActivity {

int hnCatIndex, hnArtIndex;
WebView hnWebView;

private static final int SWIPE_MIN_DISTANCE = 120;
private static final int SWIPE_MAX_OFF_PATH = 250;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;
private GestureDetector gestureDetector;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
        setContentView(R.layout.article);

    hnCatIndex = getIntent().getExtras().getInt("catIndex", 0);
    hnArtIndex = getIntent().getExtras().getInt("artIndex", 0);
    Article article = Source.getInstance().getCategory(hnCatIndex).getArticle(hnArtIndex);

    hnWebView=(WebView)findViewById(R.id.webview);
    hnWebView.loadData(article == null ? "" : article.getBody(), "text/html",
                    "utf-8");
    gestureDetector = new GestureDetector(new MyGestureDetector());
    View articleview=(View) findViewById(R.id.article_main);

    articleview.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            if (gestureDetector.onTouchEvent(event)) {
                return true;
            }
            return false;
        }
    });
}

    class MyGestureDetector extends SimpleOnGestureListener {
        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {

            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH) {
                return false;
            }

            // right to left swipe
            if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
            hnArtIndex++;
            Intent intent = new Intent(ArticleActivity.this.getBaseContext(), ArticleActivity.class);
            intent.putExtra("catIntext",hnCatIndex);
            intent.putExtra("artIndex",hnArtIndex);
            startActivity(intent);          
            ArticleActivity.this.overridePendingTransition(
            R.anim.slide_in_right,
            R.anim.slide_out_left
            );
            // right to left swipe
            }  else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                if (hnArtIndex==1) {
                    Intent intent = new Intent(ArticleActivity.this.getBaseContext(), HNappActivity.class);
                    startActivity(intent);
                    }
                else {
                    hnArtIndex--;
                    Intent intent = new Intent(ArticleActivity.this.getBaseContext(), ArticleActivity.class);
                    intent.putExtra("catIntext",hnCatIndex);
                    intent.putExtra("artIndex",hnArtIndex);
                    startActivity(intent);
                }
            ArticleActivity.this.overridePendingTransition(
            R.anim.slide_in_left, 
            R.anim.slide_out_right
            );
            }

            return false;
        }
            @Override
            public boolean onDown(MotionEvent e) {
                    return true;
            }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:54:12.280

我什至没有阅读代码，问题是您正试图在活动之间滑动。您应该尝试在同一活动中的所有片段之间滑动。

见： http: [//developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html) http://developer.android.com/reference/android/support/v4/view/ViewPager.html

**编辑：**

```
 private WebView hnWebView;
    @Override public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.webViewFragment, null);
        hnWebView=(WebView)v.findViewById(R.id.webview);
        return v;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:59:09.927

另一种方法是使用 ViewPager [http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

这是一个指南：[http ://android-developers.blogspot.se/2011/08/horizo​​ntal-view-swiping-with-viewpager.html](http://android-developers.blogspot.se/2011/08/horizontal-view-swiping-with-viewpager.html)

# java - 是否有用于后端进程通信的轻量级 Java 消息队列？

> ID：11775760
> 
> 赞同：3
> 
> 时间：2012-08-02T10:39:02.837
> 
> 标签：java

我正在开发一个应用程序，其中后端将在 java 中。在后端有许多进程。对于通信，我需要消息队列。我在 java 中搜索了消息队列，我得到了 JMS。但据我所知，这是针对 Web 应用程序的，这会增加我们项目的开销。那么是否有任何基本的轻量级 Java 消息队列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:46:50.273

JMS 是一个标准，而不是一个具体的实现。调查有关 JMS 实现的提议是您的最佳途径。`ActiveMQ`是一个众所周知的实现。它**具有**工业实力，但不一定是重量级的。可能还有其他产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:46:34.903

任何额外的组件都会增加一些开销，问题是多少。在生产中，我们使用 HornetQ，如果[配置正确](http://docs.jboss.org/hornetq/2.2.5.Final/user-manual/en/html/perf-tuning.html)，它可以[很快](https://community.jboss.org/wiki/HornetQ-ThePerformanceLeaderInEnterpriseMessaging)。甚至[更快](http://planet.jboss.org/post/8_2_million_messages_second_with_specjms)

在那些被认为是“轻”的选择中，还有很多选择：

*   [活动MQ](http://activemq.apache.org/)
*   [兔MQ](http://www.rabbitmq.com/)

# java - 在另一个变量中插入一个变量

> ID：11775768
> 
> 赞同：2
> 
> 时间：2012-08-02T10:39:36.003
> 
> 标签：java, swing, variables

我有三个文本框 ct1、ct2、ct3。我必须使用 for 循环 1 到 3 并检查文本框是否为空。那么，在 for 循环中，我该如何表示呢？例如，

```
for(i=0;i<=3;i++)
{
    if(ct+i.getText()) // I know I'm wrong
     {
     }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T10:42:00.190

> 我有三个文本框 ct1、ct2、ct3。

有你的问题开始。不要使用三个单独的变量，而是创建一个数组或集合：

```
TextBox[] textBoxes = new TextBox[3];
// Populate the array... 
```

或者：

```
List<TextBox> textBoxes = new ArrayList<TextBox>();
// Populate the list... 
```

然后在你的循环中：

```
// Note the < here - not <=
for (int i = 0; i < 3; i++) {
   // If you're using the array
   String text = textBoxes[i].getText();

   // or for the list...
   String text = textBoxes.get(i).getText();
} 
```

或者，如果您不需要索引：

```
for (TextBox textBox : textBoxes) {
    String text = textBox.getText();
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T10:43:47.407

使用数组

```
TextBox[] boxes = new TextBox[]{ct1,ct2,ct3};
for(i=0;i<3;i++)
{
    boxes[i].getText(""); // I know I'm wrong
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T10:50:46.867

您可以将文本框放在列表中并遍历该列表：

```
List<TextBox> ctList = new ArrayList<TextBox> ();
list.add(ct1);
list.add(ct2);
list.add(ct3);

for (TextBox ct : ctList) {
    if(ct.getText().equals("expected text")) {
        // do your stuff here
    }
} 
```

# web - 为 CD 设计一个多媒体网站

> ID：11775773
> 
> 赞同：0
> 
> 时间：2012-08-02T10:40:00.420
> 
> 标签：web

我需要设计一个迷你网站给客户。该网站包含 mp3 和视频，必须在网站本身内播放，不得使用任何 3rd 方媒体播放器。Flash 是唯一/最好的解决方案吗？

我还需要保护这些文件。有没有一种方法可以阻止用户“探索”CD 而无法访问内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:48:03.353

Flash 是第 3 方组件。

您可能想尝试使用 HTML 5，请参阅以下链接：

[http://www.w3schools.com/html5/html5_audio.asp](http://www.w3schools.com/html5/html5_audio.asp)

这将使您的网站功能依赖于客户端使用的浏览器。

您不太可能阻止用户访问 CD 上的音乐文件。可能您可以将数据以加密格式存储在 CD 上，并制作您自己的自定义活动 x 控件以动态解密数据。不过，这将很难做到。您介意我问您为什么要在 CD 上分发您的网站吗？你为什么不做一个网站并对其进行用户访问控制？

# javascript - Seperate marker for each location type in Google Places API

> ID：11775774
> 
> 赞同：0
> 
> 时间：2012-08-02T10:40:03.650
> 
> 标签：javascript, google-maps

i have the following code to show school and mosque near to some location.

```
<script src="https://maps.googleapis.com/maps/api/js?sensor=true&libraries=places"></script>

<script>
      var map;
      var infowindow;

      function initialize() {
        var pyrmont = new google.maps.LatLng(<?php echo $lat;?>, <?php echo $lng;?>);

        map = new google.maps.Map(document.getElementById('map1'), {
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          center: pyrmont,
          zoom: 15
        });

        var request = {
          location: pyrmont,
          radius: 500,
          types: ['school' , 'mosque']
        };
        infowindow = new google.maps.InfoWindow();
        var service = new google.maps.places.PlacesService(map);
        service.search(request, callback);
      }

      function callback(results, status) {
        if (status == google.maps.places.PlacesServiceStatus.OK) {
          for (var i = 0; i < results.length; i++) {
            createMarker(results[i]);
          }
        }
      }
      base_Icon = "<?php echo JURI::base();?>components/com_properties/includes/img/school.png";        
        shadow_Icon = "<?php echo JURI::base();?>components/com_properties/includes/img/house-shadow.png";

      function createMarker(place) {
        var placeLoc = place.geometry.location;
        var marker = new google.maps.Marker({
          map: map,
          position: place.geometry.location,
        shadow: shadow_Icon,
        icon: base_Icon 
        });

        google.maps.event.addListener(marker, 'mouseover', function() {
          infowindow.setContent(place.name);
          infowindow.open(map, this);
        });
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>

<div id="map1" style=" width:<?php echo $params->get('WidthMap','100%');?>; height:<?php echo $params->get('HeightMap','300px');?>;margin:0px;padding:0px;"></div> 
```

Right now its showing schools and mosques nearest to location and adding marker of image to all locations (for all schools and mosques). what i want to do is to show separate marker for each location type. one png image for shools and 2nd png image for mosques.

what may be the best way to do this? i have no clue may be i need to create two different functions for each marker to show.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:54:31.657

In your createMarker function, you can refer to `place.types` - an array of types. NB: some of the places will be of more than one type. You should check to see if that array contains either 'school' or 'mosque', and set the icon to use for that marker as appropriate.

```
 base_Icon_school = "<?php echo JURI::base();?>components/com_properties/includes/img/school.png";        
    base_Icon_mosque = "<?php echo JURI::base();?>components/com_properties/includes/img/mosque.png";  
    shadow_Icon = "<?php echo JURI::base();?>components/com_properties/includes/img/house-shadow.png";

  function createMarker(place) {
    var placeLoc = place.geometry.location;
    var marker;
    var icon_to_use;

    if (place.types.indexOf('school') != -1) {
           icon_to_use =  base_Icon_school;
    } else if (place.types.indexOf('mosque') != -1) {
           icon_to_use =  base_Icon_mosque;
    }

    marker = new google.maps.Marker({
      map: map,
      position: place.geometry.location,
    shadow: shadow_Icon,
    icon: icon_to_use  
    });

    google.maps.event.addListener(marker, 'mouseover', function() {
      infowindow.setContent(place.name);
      infowindow.open(map, this);
    });
  } 
```

See: [https://developers.google.com/maps/documentation/javascript/reference#PlaceResult](https://developers.google.com/maps/documentation/javascript/reference#PlaceResult)

# rest - 在 Teamcity 中通过 REST 创建构建配置

> ID：11775777
> 
> 赞同：5
> 
> 时间：2012-08-02T10:40:10.863
> 
> 标签：rest, teamcity-7.0

是否可以通过 Teamcity 中的 REST api（POST 方法）为现有项目创建新的构建配置？
如果有，如何创建？（一些指导方针）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-28T16:40:31.783

这在 8.x 上肯定是可能的，不需要关心早期版本。

这是一个非常简单的 python 片段，它将使用此作为指南将现有构建配置复制到给定项目中[http://confluence.jetbrains.com/display/TCD8/REST+API#RESTAPI-BuildConfigurationAndTemplateSettings。](http://confluence.jetbrains.com/display/TCD8/REST+API#RESTAPI-BuildConfigurationAndTemplateSettings)

```
import requests

xml =  """<newBuildTypeDescription name='NewBuildConfigName'
          sourceBuildTypeLocator='ExistingBuildConfigNameThatYouWantToCopy'
          copyAllAssociatedSettings='true' shareVCSRoots='false'/>
       """
headers = {'Content-Type': 'application/xml'} # set what your server accepts

print requests.post('http://YOURTEAMCITYWEBADDRESS:YOURTEAMCITYPORT/httpAuth/app/rest/projects/id:PROJECTIDWHERENEWBUILDCONFIGSHOULDBECREATED/buildTypes', data=xml, headers=headers, auth=('TeamCityUserName','TeamCityPassword')).text 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-02T10:51:12.083

现在可以在[8.x REST](http://confluence.jetbrains.com/display/TCD8/REST+API#RESTAPI-BuildConfigurationAndTemplateSettings)中使用。您可以执行以下操作：

```
POST plain text (name) to http://teamcity:8111/httpAuth/app/rest/projects/<projectLocator>/buildTypes 
```

[以上是从8.x REST](http://confluence.jetbrains.com/display/TCD8/REST+API#RESTAPI-BuildConfigurationAndTemplateSettings)复制的。检查[8.x REST](http://confluence.jetbrains.com/display/TCD8/REST+API#RESTAPI-BuildConfigurationAndTemplateSettings)以获取更多详细信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-12T13:01:18.040

不，它没有在 REST API 中实现。看看[这个](http://svn.jetbrains.org/teamcity/plugins/rest-api/trunk-protocol-7.0/src/jetbrains/buildServer/server/rest/request/BuildTypeRequest.java)

无法创建构建配置。您可以向其中添加构建步骤并对其进行配置，但似乎根本没有在 API 中实现。实际上，我昨晚自己也在和这个作斗争。如果你找到办法做到这一点，请告诉我。

此外，您可以查看我整理的有关 Teamcity REST API的这些[说明。](https://gist.github.com/carlspring/6762356)（并不是说他们在回答这个问题，但其中一些可能非常有用）。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-03-19T11:05:30.987

好吧，你可以参考[这个](http://confluence.jetbrains.com/display/TW/REST+API+Plugin)作为初学者：

# c# - 如何在 C# 中编写 IF SQL 语句以从数据库中检索值

> ID：11775780
> 
> 赞同：0
> 
> 时间：2012-08-02T10:40:28.973
> 
> 标签：c#, asp.net, sql-server

我在 UI 中有这三列。在下拉列表中，我有一个`AllRecords`和其他一些字段。我选择该`AllRecords`字段并输入开始和结束日期的详细信息。

现在我写了一个查询来检索值。

当他选择时`AllRecords`，根据开始和结束日期，它必须显示或从数据库表中检索数据。

我已经写了一个查询，如果用户会选择其他值，它看起来像这样，

```
DataTable dt = new DataTable();
string queryStr = "SELECT Day,Date,Name,Task,Hours from TaskManualDetails where Date between '"
    + DateTime.Parse(txtStartDate.Text).ToString("yyyy-MM-dd")
    + "' and '"
    + DateTime.Parse(txtEndDate.Text).ToString("yyyy-MM-dd")
    + "' and Name ='"
    + DropDownList1.Text.ToString()
    + "'";
SqlDataAdapter s1 = new SqlDataAdapter(queryStr, conn);
s1.Fill(dt); 
```

现在的问题是我必须为`AllRecords`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:49:53.363

尝试这个：

```
 DataTable dt = new DataTable();
            string queryStr = "SELECT Day,Date,Name,Task,Hours from TaskManualDetails ";

            if ( DropDownList1.Text.ToString() != "AllRecords")
            queryStr=queryStr+" where Date between '" + DateTime.Parse(txtStartDate.Text).ToString("yyyy-MM-dd") + "' and '" + DateTime.Parse(txtEndDate.Text).ToString("yyyy-MM-dd")  + "'"+" and Name ='" + DropDownList1.Text.ToString() + "'";
            SqlDataAdapter s1 = new SqlDataAdapter(queryStr, conn);
            s1.Fill(dt); 
```

您的查询只有很小的变化

仅当查询不是**AllRecords**时，您必须将**Name ='" + DropDownList1.Text.ToString()附加到查询中**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:25:01.970

注意 SQL 注入。像这样使用 SQLParameter：

```
 DataTable dt = new DataTable();
    SqlDataAdapter s1 = new SqlDataAdapter();
    s1.SelectCommand.Connection = conn;
    string queryStr = "SELECT Day,Date,Name,Task,Hours from TaskManualDetails WHERE Date BETWEEN @StartDate AND @EndDate";
    s1.SelectCommand.Parameters.AddWithValue("StartDate", DateTime.Parse(txtStartDate.Text).ToString("yyyy-MM-dd"));
    s1.SelectCommand.Parameters.AddWithValue("EndDate", DateTime.Parse(txtEndDate.Text).ToString("yyyy-MM-dd"));

    if (DropDownList1.Text.ToString() != "AllRecords")
    {
        queryStr = queryStr + "  AND Name = @Name";
        s1.SelectCommand.Parameters.AddWithValue("Name", DropDownList1.Text.ToString());
    }

    s1.SelectCommand.CommandText = queryStr;

    s1.Fill(dt); 
```**

# ruby-on-rails-3 - 我怎样才能让rails默认使用pg？

> ID：11775783
> 
> 赞同：0
> 
> 时间：2012-08-02T10:40:51.127
> 
> 标签：ruby-on-rails-3, postgresql, heroku

这不是一个巨大的负担，但我真的希望能够在创建 Rails 应用程序时更改它们的默认 gem-set，以便它们为 Heroku 做好准备。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:56:07.067

`-d`您可以在运行时指定数据库`rails new`：

```
Usage:
  rails new APP_PATH [options]

Options:
  -d, [--database=DATABASE]   # Preconfigure for selected database (options: mysql/oracle/postgresql/sqlite3/frontbase/ibm_db/sqlserver/jdbcmysql/jdbcsqlite3/jdbcpostgresql/jdbc)
                              # Default: sqlite3

Description:
    You can specify extra command-line arguments to be used every time
    'rails new' runs in the .railsrc configuration file in your home directory. 
```

所以对于 PostgreSQL，这是：

```
rails new myapp -d postgresql 
```

为了使其成为默认`-d postgresql`设置`~/.railsrc`

[另一种选择是按照Heroku 上的 Rails 3.x 入门](https://devcenter.heroku.com/articles/rails3)中的建议更改`gem 'sqlite3'`为`gem 'pg'`in 。`Gemfile`

# php - 为什么我的 PHP 会话数组在页面重新加载之间消失了？

> ID：11775791
> 
> 赞同：1
> 
> 时间：2012-08-02T10:41:18.860
> 
> 标签：php, session-variables

我无法弄清楚为什么我的 PHP 会话数组在页面加载之间消失了。以下代码使 session_start() 在每次页面加载时都可用：

```
<?php
session_start();
if ( isset( $_SERVER['QUERY_STRING'] ) && !empty($_SERVER['QUERY_STRING']) ) {
    $gmeta_query_string = $_SERVER['QUERY_STRING'];
    parse_str( $gmeta_query_string, $gmeta_query_array );
    var_dump($gmeta_query_array);
    foreach ( $gmeta_query_array as $key => $value ) {
        $_SESSION[ 'gmeta_query_array' ][$key] = $value;
    }
}
var_dump( $_SESSION );
echo session_id();
?> 
```

想也许它可能是我的服务器，这里有一些测试 URL。第一个链接创建一个会话数组并将其打印出来，第二个链接打印一个空的会话数组。两个页面上的代码相同。

[http://barbadospropertylist.com/wp-content/plugins/gravitymeta/test.php?name=value](http://barbadospropertylist.com/wp-content/plugins/gravitymeta/test.php?name=value)

[http://barbadospropertylist.com/wp-content/plugins/gravitymeta/test.php](http://barbadospropertylist.com/wp-content/plugins/gravitymeta/test.php)

这是 PHP 信息的链接：[http ://www.barbadospropertylist.com/phpinfo.php](http://www.barbadospropertylist.com/phpinfo.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:24:23.457

SO中的另一个用户提出了相同类型的问题，并得到了解决。

请检查它是否可以帮助您 [PHP 会话不起作用](https://stackoverflow.com/questions/4614671/php-sessions-not-working)

您可以打印 session_id，是否在每次页面加载时都没有更改？

# c# - 如何根据给出的代码跳过 foreach 循环？

> ID：11775794
> 
> 赞同：0
> 
> 时间：2012-08-02T10:41:33.790
> 
> 标签：c#, asp.net, foreach

我有一个代码检查asp.net/c#中的checkedlistbox复选框。

```
foreach (ListItem item in cbxlFeatures.Items)
{
  foreach (DataRow row in dt.Rows)
    {
       if (item.Value.Equals(row["Id"].ToString()))
        {
          item.Selected = Convert.ToBoolean(row["Id"]); 
         // whenever this condition is met i need my 
         // loop to skip the remianing iterations and start with next one.

        }
         break;
     }
 } 
```

**更新**

**我想，我的问题并不清楚。假设我的数据表中有 1 到 10 个 ID。其中 7,8,9 的值为 false，其余为 true。而且这个 id 也显示在复选框列表上。只是我的真/假值不同。所以我要求检查条件并将值 t/f 设置为复选框。一旦复选框设置为选中，循环将跳过。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T10:43:25.663

我认为您正在寻找关键字`continue;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T10:43:47.313

请使用 continue 关键字

```
foreach (ListItem item in cbxlFeatures.Items)
{
  foreach (DataRow row in dt.Rows)
    {
       if (item.Value.Equals(row["Id"].ToString()))
        {
          item.Selected = Convert.ToBoolean(row["Id"]); 
         continue;

        }
         break;
     }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T10:49:43.723

您可以使用`continue;`以下代码中的关键字

```
foreach (ListItem item in cbxlFeatures.Items)
{
  foreach (DataRow row in dt.Rows)
    {
       if (item.Value.Equals(row["Id"].ToString()))
        {
          item.Selected = Convert.ToBoolean(row["Id"]); 

          // this is what you need here
          continue;
        }
         break;
     }
 } 
```

如果您有更多问题，请告诉我。

谢谢 Ankur

# mysqldump - mysqldump wampee 失败

> ID：11775795
> 
> 赞同：0
> 
> 时间：2012-08-02T10:41:38.093
> 
> 标签：mysqldump, wampserver

我正在使用便携式版本的 WAMP，即 Windows XP 上的“Wampee”2.1-beta-2。

我正在启动 C:\Wampee-2.1-beta-2\bin\mysql\mysql5.5.8\bin\mysql.exe 以尝试 mysqldump。

我愿意：

```
mysqldump -u root -p database_name > backup.sql 
```

它回答“您的 SQL 语法有错误 [..]”

即使这个命令给了我同样的结果：

```
mysqldump --help; 
```

如何知道 mysqldump 是否已安装和/或启用？还是我的语法真的错了？

谢谢

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:10:27.197

我刚发现！mysqldump 是另一个程序，因此您无法从 mysql.exe 访问它

打开终端窗口，例如 cmd.exe。将目录更改为 mysqldump.exe：

```
cd /go/to/the/mysqldump/folder 
```

启动 mysqldump

```
mysqldump.exe 
```

键入您的命令。

！（：

# spring - mybatis 用 spring3 配置

> ID：11775796
> 
> 赞同：0
> 
> 时间：2012-08-02T10:41:50.527
> 
> 标签：spring, ibatis, mybatis

我正在尝试使用 spring 3 配置 mybatis。在构建项目时出现以下错误。

```
Error creating bean with name 'datasource' defined in ServletContext resource [/WEB-       INF/spring-servlet.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'driver' of bean class [org.apache.commons.dbcp.BasicDataSource]: Bean property 'driver' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter? 
```

我的 spring-servel.xml 是

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

<!-- Enable annotation driven controllers, validation etc... -->
<mvc:annotation-driven />

<context:component-scan
    base-package="com.mycom.mycontroller.controller" />

<mvc:resources mapping="/resources/**" location="/resources/" />

<bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driver" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost/mydatabase"/>
    <property name="username" value="root"/>
    <property name="password" value="root"/>
</bean>

<bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
    <property name="basePackage" value="com.mycom.mydatabase.db.mybatis.sqlmap" />
</bean> 

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

jar 文件。我添加的是

```
commons-dbcp-1.4.jar
commons-pool-1.6.jar
mybatis-3.1.0.jar
mybatis-spring-1.1.1.jar
mysql-connector-java-5.1.18-bin.jar
org.springframework.transaction-3.1.1.RELEASE.jar
and other spring jars 
```

如果您需要更多说明，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:47:31.293

问题与 myBatis 无关。

`org.apache.commons.dbcp.BasicDataSource`没有任何“驱动程序”属性。我认为您应该`driverClassName`改用用户。

见[文档](http://commons.apache.org/dbcp/apidocs/org/apache/commons/dbcp/BasicDataSource.html)。

# php - PHP CLI 每 2 秒继续检查 MYSQL 数据库，直到用户决定退出

> ID：11775797
> 
> 赞同：3
> 
> 时间：2012-08-02T10:41:53.060
> 
> 标签：php

我在互联网上找不到太多关于 PHP CLI 的信息，所以我很难弄清楚如何完成我的代码。

基本上，应用程序应该继续每 2 秒检查一次 MYSQL 数据库而不退出，除非用户输入了字母“q”。

在我实现 MYSQL 之前，我只是通过连续打印“pro”这个词来开始它，所以我的代码看起来像这样：

```
<?php
    fwrite(STDOUT, "This should print word 'pro' continuously\n");
    fwrite(STDOUT, "\tto exit, simply press 'q' and enter\n");

    do {
        fwrite(STDOUT, "pro\n");
    }while (fgetc(STDIN) != 'q');
?> 
```

几乎当用户输入'q'时，应用程序终止，但问题是它只打印出'pro'一次，当我按下回车时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T11:09:40.647

`fgetc()`将阻塞直到有数据要读取 - 换句话说，当脚本到达`fgetc()`调用时，执行将停止，直到用户输入某些内容。

为了解决这个问题，您需要检查是否有任何数据可以使用[`stream_select()`](http://php.net/stream-select). 您还可以使用`stream_select()`将 MySQL 轮询限制为每 2 秒一次。一个基本的框架看起来像这样：

```
<?php

  // Do all your init work here, connect to DB etc
  $tickerSecs = 2;
  echo "Hello! I've started\n";

  do {

    // Do actual work here
    echo "I'm polling the database\n";

    // See stream_select() docs for an explanation of why this is necessary
    $r = array(STDIN);
    $w = $e = NULL;
    if (stream_select($r, $w, $e, $tickerSecs) > 0) {
      // The user input something
      echo "You input something\n";
      $char = fread(STDIN, 1);
      if ($char == 'q') {
        // The user pressed 'q'
        echo "You told me to quit\n";
        break;
      } else {
        echo "I don't understand '$char'\n";
      }
    }

  } while (TRUE); // Loop forever

  // Do shutdown work here
  echo "I'm shutting down\n"; 
```

请注意，您可能不得不要求您的用户按下`q + enter`，而不仅仅是`q`因为这些事情的工作方式的性质 - 我真的不明白为什么会这样，也许其他人可以在这里提供缺失的部分？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:59:49.047

您可以使用 pcntl_signal() 为 SIGQUIT 注册处理程序（即 Ctrl-C），而不是在按下 Q 时停止

# ios - iOS NSNotification - 向禁用的视图发送通知

> ID：11775800
> 
> 赞同：0
> 
> 时间：2012-08-02T10:42:00.847
> 
> 标签：ios, nsnotificationcenter

我有 2 个 UI 视图，它们都带有连接到选项卡控制器的控制器。

ViewA - 用于身份验证（包含登录文本字段和提交按钮）

ViewB - 用于显示配置文件。

我已使用情节提要中的实用程序管理器将 ViewB 设置为禁用，这是为了防止用户在登录前单击选项卡。在 ViewA 中进行身份验证后，我想通知 ViewB 启用自身并显示配置文件。

从谷歌搜索看来，使用 NSNotificationcenter 是最好的方法，我创建了一个可以正常工作的简单 postNotifiaction - 但我不确定在 ViewB 中的何处添加接收器，我无法在 ViewDidLoad 中添加它，因为它不加载，并被禁用开始？

通知中心是最好的方法吗？

另外，我如何向禁用的视图发送通知？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:49:23.253

您是否禁用了视图或选项卡按钮？

如果您禁用选项卡按钮，您可以启用它并通过执行切换到配置文件选项卡

```
self.tabBarController.selectedViewController = profileViewController; 
```

您可以将此代码放在 ViewA 的视图控制器中。要获取 profileViewController，您可以改用此代码

```
 self.tabBarController.selectedViewController = [self.tabBarController.viewControllers objectAtIndex:1] 
```

假设您的个人资料位于索引 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:47:19.387

[http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)

上面的 Apple 文档链接非常清楚地指出 NSNotificationCenter 不保留它的观察者，这就是为什么你不能在那里释放 dataAnalyzer - 它会被释放，并且通知会尝试发布到 nil 引用。

在每个视图控制器的 -init 方法中订阅通知。这确保了控制器已被创建和初始化，并使每个控制器对其自己的操作负责。

我不完全确定您的问题是什么，如果上述内容不能解决您的问题，您能否改写一下。

另外，请注意 NSNotificationCenter 将发布给所有观察者，但它不是异步的 - 它会等待每个观察者完成处理通知，然后再发送到下一个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T10:58:14.960

为什么你不只是调用`[viewB enableItselfSomehow];`方法`-someAuthenticationSucceedFeedback`？

注册仅启用/禁用视图的通知对我来说是一个糟糕的基调

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T10:52:37.007

当然，您有一个控制 ViewB 的禁用状态的控制器（AppDelegate，如果有的话）？您可以侦听来自此控制器实例的通知，并在收到通知后从中启用 ViewB。

如果您必须从 ViewB 订阅通知，则在其（ViewB 的）init 方法中注册它（不要忘记在 dealloc 方法中取消订阅通知）。这应该可以工作，因为即使用于访问 ViewB 的按钮被禁用，ViewB 实例也会在您的应用程序启动时被实例化（或者我假设......）。

如果您在点击按钮之前不实例化 ViewB，那么您必须让启用/禁用 ViewB 按钮的控制器负责侦听通知并启用按钮访问 ViewB。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T10:55:31.333

我认为这个逻辑有点模棱两可。这是我对您的应用程序的理解：

-> 标签栏控制器

---> 控制器 1 - 登录

---> 控制器 2 - 配置文件（默认禁用）

您不必将通知插入控制器 2，而是插入 TabBar，因为它“控制”其他控制器（对不起，笑话这个词）。我认为最好的解决方案是：

**标签栏**

观察有关“用户已更改”的通知并检查它：如果用户已登录，则启用配置文件控制器，如果用户是匿名的，则禁用它。

**控制器 1 - 登录**

当用户登录/注销时，会发出“用户已更改”的通知。

就是这样，您的控制器 2 可以在不知道用户状态的情况下生存。如果您在编码此逻辑时遇到问题，请告诉我。

# javascript - Google Map KML 图层地标点击事件返回 ZERO_RESULTS

> ID：11775801
> 
> 赞同：7
> 
> 时间：2012-08-02T10:42:08.070
> 
> 标签：javascript, google-maps-api-3, kml

将侦听器附加到 KML 层：

```
var layer = new google.maps.KmlLayer('http://sites.google.com/site/kmlprototypes/kmls/temp.kml?dc_=' + Math.random(),
{suppressInfoWindows:true,preserveViewport:true});

layer.setMap(map);

google.maps.event.addListener(layer, 'click', function (obj) {
    alert(obj.featureData.id);
}); 
```

KML 文件有效（通过验证 api 检查），您可以在[此处](http://sites.google.com/site/kmlprototypes/kmls/temp.kml)找到它。XML 中的每个地标都有 id 属性，例如：

```
<Placemark id="46">
  <Style>
    <IconStyle>
      <Icon>
        <href>
          <![CDATA[http://chart.apis.google.com/chart?chf=bg,s,EAF7FE02&chxt=y&chbh=a,4,4&chs=48x48&cht=bvg&chco=FF0000,0000FF&chds=20,9048.00,0,9048.00&chd=t:8149.00|9048.00]]>
        </href>
      </Icon>
    </IconStyle>
  </Style>
  <Point>
    <coordinates>30.49566650390625,50.721378326416016</coordinates>
  </Point>
</Placemark> 
```

当点击谷歌地图对象中的地标时，返回正确的 id，但有时大约 50% 的时间`obj.featuredData.id`是`null`（`ZERO_RESULTS`状态在`status`字段中）。我尝试了不同的数据集（从 100 点到 1000 点），但没有帮助。我还尝试了 lat、lng 的不同精度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-24T17:26:50.397

您可能已经达到该页面上列出的限制之一：[https ://developers.google.com/kml/documentation/mapsSupport?hl=en](https://developers.google.com/kml/documentation/mapsSupport?hl=en)

每个文件最多 1000 个功能可能是困扰您的一个。

# python - Python3：按时间顺序排列日期字符串

> ID：11775802
> 
> 赞同：2
> 
> 时间：2012-08-02T10:42:16.440
> 
> 标签：python, date, python-3.x, matplotlib

我有一本字典，其中的键是日期字符串。格式为：

```
%d.%m.%Y 
```

IE。“5.11.2008”。日期每天都有相应的数据。

将它们收集到两个列表中的最简单方法是什么，一个用于键，一个用于值，其中列表按时间顺序排列，键 [5] 将对应于值 [5]？

我最终想要实现的是获取这些日期和值并相应地绘制它们。我目前正在使用 matplotlib。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T10:46:36.947

将键转换为`datetime.date`值；using`.items()`将为您提供键和值的元组，然后您可以对其进行排序：

```
data = [(datetime.datetime.strptime(k, '%d.%m.%Y').date(), v) 
        for k, v in yourdict.items()]
data.sort() 
```

然后索引这些；data[5][0] 是日期，data[5][1] 是字典值。

如果需要保留原始日期格式，只使用日期格式解析进行排序；这是上面使用排序键的单行变体：

```
data = sorted(yourdict.items(), 
              key=lambda i: datetime.datetime.strptime(i[0], '%d.%m.%Y')) 
```

在这里，我使用[`sorted()`函数](http://docs.python.org/py3k/library/functions.html#sorted)来完成繁重的工作，`key`lambda 获取每个日期字符串，将其转换为`datetime.datetime`实例，仅用于排序目的。我不会像第一个示例那样将其限制为一个`datetime.date`实例。

# windows-services - 来自 Windows 服务的 Plink 找不到 Pageant

> ID：11775808
> 
> 赞同：4
> 
> 时间：2012-08-02T10:42:34.227
> 
> 标签：windows-services, ssh, plink, pageant

我有一个将`plink.exe`用于 SSH 连接的 Windows 服务，我发现 Plink 找不到正在运行的 Pageant。

这是我到目前为止所做的步骤。

1.  安装 Windows 服务以作为特定用户运行
2.  在启动 Windows 服务之前，我以该用户身份登录并使用 PuTTY 生成的密钥启动 Pageant。
3.  然后我启动 Windows 服务（但我无法让它工作，因为 Plink 找不到 Pageant 并且服务器回复为*No supported authentication methods available*。）

注意：*如果我使用该用户将 Windows 服务作为控制台应用程序运行，则一切正常。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T11:17:03.693

PLink 将在服务会话 (Session\0) 中运行，而选美在用户会话 (Session\1) 中运行。Plink 使用一些进程间通信，从您的问题来看，它不能跨会话工作。很可能内部存在 MMF 通信，并且对象是在没有前缀的情况下创建的，即它们成为仅会话（不是全局的）。您需要构建自定义版本的 plink 来解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-05T09:01:09.243

Pageant 明确允许将密钥提供给仅在同一 Windows 会话中运行的应用程序（PuTTY、PSFTP、PSCP、WinSCP、FileZilla）。这显然是出于安全原因，不允许同一台机器上的不同用户劫持其他用户加载的私钥。甚至为了方便（具有讽刺意味），这样您就不会无意中使用其他用户的密钥（导致您的帐户由于无效的登录尝试而被锁定）。

另请注意，选美无论如何都不适用于自动化。`-i`对于自动化，使用命令行参数显式使用私钥。
见[https://the.earth.li/~sgtatham/putty/latest/htmldoc/Chapter3.html#using-cmdline-identity](https://the.earth.li/~sgtatham/putty/latest/htmldoc/Chapter3.html#using-cmdline-identity)

这样的私钥必须是未加密的。请注意，如果有人获得对密钥的访问权，这会带来安全风险。您应该考虑将对未受保护的私钥文件的访问限制为仅运行脚本的本地帐户（使用[Windows 文件系统权限](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc770962(v=ws.11))）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T01:56:52.017

正如[@Eugene](https://stackoverflow.com/users/47961/eugene-mayevski-eldos-corp) [指出的那样](https://stackoverflow.com/a/11776311/102940)，它是[Session 0 Isolation](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756986.aspx)。

我设法通过不使用代理解决了这个问题，而是直接将私钥和密码传递给`plink.exe`. 通过这样做，我可以在不使用`pageant`.

`plink.exe`无需代理即可开始；

```
plink.exe -noagent -i private_key.ppk -pw mypassword -P 1234 user@host.com 
```

# css - 透明分区

> ID：11775811
> 
> 赞同：-1
> 
> 时间：2012-08-02T10:42:49.907
> 
> 标签：css, html, stylesheet

我有 2 个 div 堆叠。表示 1 个 div 在另一个 div 上。

两个 div 都有透明的背景颜色。

因此，当显示 div 时，由于上部 div 是透明的，因此下部的 div 也会显示。

如果有任何方法可以制作上或下 div，使得只有上 div 显示为透明背景。

意味着如果有图像元素堆叠在较低的 div 下方，则应该显示图像，因为上层 div 是透明的，但不显示颜色应该是两个 div 的透明颜色的总和。

所以，当前 ![在此处输入图像描述](../Images/475143edb0399bda0f4bb7b70d3e51da.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:36:43.667

遗憾的是，在 CSS 中没有办法让子元素不继承父元素的透明度设置。最好的办法是制作具有透明度的 div，然后制作一个具有相同尺寸的类似 div，然后将其绝对放置在透明 div 上。然后任何你想保持不透明的东西都可以简单地放在第二个 div 中。

如果这没有意义，请回复，我会尽量让它更清楚。

麦克风。

# php - Web API 中的符号与数字错误代码

> ID：11775812
> 
> 赞同：4
> 
> 时间：2012-08-02T10:42:49.887
> 
> 标签：php, api, exception, error-code

我目前正在开发一个新项目，它应该提供一个基于 Web 的 API。当然，在很多情况下，当请求的操作失败时，API 应该报告失败的原因。

以前我使用传统方式，当响应包含数字错误代码和更人性化的错误消息时，但维护错误代码列表以及我的代码和内部异常之间的映射有点令人沮丧。

我认为使用符号错误代码可能更方便，例如从异常名称生成。

我看到了这个想法的以下优点：

*   无需从异常映射到数字。
*   不可能将相同的错误代码分配给不同的错误类型（在我的情况下 - 异常）。
*   对于将自己使用 API 的开发人员来说，错误代码变得更加有用。

和缺点：

*   就封装而言，公开异常名称可能不是一个好主意。
*   由于 API 客户端应用程序主要使用错误代码来确定错误类型，因此比较字符串的成本更高。
*   不需要中央异常-> 错误代码注册表会增加错过文档中某些错误代码的机会。

那么，什么更好用：符号或数字错误代码？

# java - 在 Xcode 中编写 Java 程序

> ID：11775813
> 
> 赞同：1
> 
> 时间：2012-08-02T10:43:08.593
> 
> 标签：java, xcode

我正在尝试开始编写 Java 程序，`Xcode 4.4`但目前，我被文件扩展名卡住了`.cpp`，我相信它是用于 C++ 的。有人可以告诉我如何设置`.java`文件（或项目，或任何术语）......？我对编程和 Xcode 非常陌生，所以请保持所有说明/非常/简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T01:36:33.897

我在这里为 Xcode 4 创建了一些 Xcode 模板 [http://www.2shared.com/file/hExLjJ1X/Java_Xcode4_template2.html](http://www.2shared.com/file/hExLjJ1X/Java_Xcode4_template2.html)

要在 Mac 中安装模板，请使用终端命令

```
mkdir -p ~/Library/Developer/Xcode/Templates/
unzip ~/Downloads/Java_Xcode4_template2.zip -d ~/Library/Developer/Xcode/Templates/ 
```

您可以使用 command-B 来构建。要运行，您应该使用“编辑方案...”并更改“运行”方案的可执行文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T10:50:37.450

如果您是编程新手，您可能想以不同的方式尝试。

更好的 Java IDE 是 Netbeans 和 Eclipse。我也将 Netbeans 用于 Java 和 PHP。它的行为与您对现代 IDE 的期望一样，有很多可能性可以根据您的需求/偏好对其进行自定义。

Xcode 很棒，有很多有用的工具，但它专注于 Objective-c 和 iOS 环境。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-14T20:04:57.207

我目前正在使用 XCode。

1.  打开一个新项目。

2.  单击外部构建系统。

3.  使用扩展名 .java 命名您的文件。
4.  在 $(ACTION) 旁边写下 $(TARGETNAME).java。
5.  打开一个新文件（空样式）。
6.  开始编写程序。

XCode 不是 Java 的最佳位置，但我使用它是因为它是 Apple 的开发工具，并且它具有出色的语法着色和自动缩进等功能。

TextEdit 是另一个应用程序（如果您使用 Apple Mac，可能已经存在），但没有语法着色和花哨的功能。它使用更简单，始终使用终端（尽量避免使用 XCode Build - 错误难以破译，过程复杂，如果您有任何问题，很少有人能回答，因为大多数人不使用 XCode）。

祝你好运！

# asp.net - ASP.NET nHibernate 每个请求缓存

> ID：11775815
> 
> 赞同：1
> 
> 时间：2012-08-02T10:43:30.887
> 
> 标签：asp.net, nhibernate, caching

可以启用在请求开始时开始并在请求结束时结束的缓存？？

对于某些表，启用一次不会多次选择同一记录的缓存将很有用。

例如，当我渲染一个部分时，部分内的 SELECT 是不必要的。

假设这个片段：

```
@foreach(var row in orders)
    {
        @{Html.RenderPartial("Order");}
    } 
```

部分订单是：

```
<div>
        @session.Query<Langs>.SingleOrDefault(el => el.Id == "EN').Description
    </div>
<div>
    @Model.OrderID
</div> 
```

是否可以启用仅在当前会话中缓存“Langs”表的缓存？

如果没有缓存，我每个请求都有 N（订单计数）SELECT，否则使用请求缓存我每个请求会有 1 个 SELECT。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:52:31.410

您不应该从任何视图（例如您提到的部分视图）中执行任何数据库查询。这几乎总是会导致 SELECT N+1 场景。

遵循 MVC 模式，不要混淆关注点。任何数据库查询都应从存储库层启动，然后填充表示视图需要哪些数据的模型对象，然后将该模型传递给视图。

通过编程，一切皆有可能，并且总是有上百万种方法可以做同样的事情，但遵循最佳实践和关注点分离将使您远离自己，并帮助您构建高效、可扩展和可维护的应用程序。

To reiterate, whatever data your view needs access to, do all of that querying on the Controller-side of the MVC pattern. Doing it any other way is mixing concerns and leads to situations such as the one you are encountering.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:57:27.047

您至少有 2 个可能性：

*   缓存您的查询
*   在对象 Langs 映射上启用缓存

询问：

```
 @session.Query<Langs>.SetCacheable(true).SingleOrDefault(el => el.Id == "EN').Description 
```

并将键 hibernate.cache.use_query_cache = true 添加到配置中

# php - php的EzPDF库可以为生成的PDF添加密码加密吗

> ID：11775816
> 
> 赞同：0
> 
> 时间：2012-08-02T10:43:35.990
> 
> 标签：php, pdf

就像标题一样，在任何地方都找不到答案。我需要使用通过 PHP 注入实时数据的模板背景创建一些 pdf。我需要推送给用户的最终 pdf 进行密码加密，EzPDF 是否支持这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:29:03.673

你的标题显示**`ExPDF`**并且你问的**确实`EzPDF`支持这个**我不确定他们是否支持这样但我建议你使用 具有 PDF 密码保护和公钥加密的[TCPDF](http://www.tcpdf.org/)

例子

```
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);

//Password Protection (SetProtection($permissions=array('print', 'copy'), $user_pass='', $owner_pass=null, $mode=0, $pubkeys=null);) 
$pdf->SetProtection(array('print', 'copy'), $user_pass, $owner_pass, $mode, null);

//Example With Public Keys 

$pdf->SetProtection(array('print', 'copy'), $user_pass, $owner_pass, $mode, array(array('c' => 'file://../tcpdf.crt', 'p' => array('print')))); 
```

# .net - ASP.NET MVC，Node.JS。他们可以互动吗？

> ID：11775817
> 
> 赞同：4
> 
> 时间：2012-08-02T10:43:38.727
> 
> 标签：.net, asp.net-mvc, node.js

应用程序能否以某种方式与在某些“节点云”之上编写和托管的网站进行`ASP.NET MVC`交互（*例如同步帐户数据）？*`NODE.JS`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:51:45.507

是的你可以。

Jon Galloway 有[一篇关于这个确切主题的文章](http://weblogs.asp.net/jgalloway/archive/2011/10/26/using-node-js-in-an-asp-net-mvc-application-with-iisnode.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T11:09:31.903

这是一个普遍的问题。如果您有两个用两种不同语言编写的应用程序，或者在两台不同的机器上运行，或者无论是什么原因使它们分开，它们仍然可以通信。

您在一台机器上启动一台服务器，在另一台机器上启动另一台服务器。服务器旨在为事物提供服务，因此它们的主要功能是侦听端口并响应传入的请求。但他们不限于此。他们也可以触发请求！服务器没有理由不能同时成为客户端。

基本上你需要做的就是向服务器添加客户端功能，这样它就可以向其他服务器发出请求。在 Web 开发环境中执行此操作要容易得多，因为我们已经拥有众所周知的 REST（并且大多数语言都有用于制作和解析 REST 请求/响应的库）。

另请记住，在执行此操作时您需要实现一些安全功能。例如，当您的 Node.JS 服务器只为您的 ASP.NET 服务器提供服务时，您可能希望限制此 Node.JS 服务器，因此它不会将此内容提供给整个互联网。

# ios - 使用关闭的相机快门作为视图背景

> ID：11775825
> 
> 赞同：1
> 
> 时间：2012-08-02T10:43:59.310
> 
> 标签：ios, background, camera

我正在为 iPhone 构建一个 AR 应用程序，它当然广泛使用相机视图。

我想使用本机相机快门图像（关闭）作为某些视图的背景。

我的问题：

使用它有问题吗？或者这可能是拒绝的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:30:25.877

我得到了答案：

我正在开发的应用程序使用相机的关闭快门作为其屏幕之一的背景。我们已成功提交给商店。

在您的应用程序中使用本机相机快门作为背景没有问题。

# mysql - Mysql 使用 CASE 从 table2 值更新 table1

> ID：11775830
> 
> 赞同：0
> 
> 时间：2012-08-02T10:44:25.740
> 
> 标签：mysql, sql-update

我有表 A 和表 B 。我需要使用值 (1 - 8) 更新 TableA.custid 以便我可以反映 TableB.names

为了更清楚

TableA.custid = 1 ，当 TableB.name = 'Allen Gray' TableA.custid = 2 ，当 TableB.name = 'Alex Watt'

TableA 和 TableB 获得了相同数量的记录。两者之间的关系是 TableA.id = TableB.id

这将是什么语法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:51:14.197

```
Update tableA as t1 inner join TableB as t2
on t1.id=t2.id
set t1.name=t2.name 
```

# compiler-construction - C ++ Builder XE2 - 调试和发布版本的不同可执行文件名称

> ID：11775832
> 
> 赞同：1
> 
> 时间：2012-08-02T10:44:27.930
> 
> 标签：compiler-construction, linker, executable, c++builder-xe2

调试和发布版本是否可以有不同的可执行文件名称？例如，可执行文件应复制到相同的输出目录

C:\项目\你好世界\bin

在这种特殊情况下，我想输出两个文件：

C:\Projects\Hello world\bin\ **Hello world.exe**

和

C:\Projects\Hello world\bin\ **Hello worldD.exe**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T00:04:58.603

您可以在编译后使用**Post-Build**事件重命名可执行文件。不同的构建配置可以定义不同的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-07T17:19:48.707

在我的 C++ Builder XE8 安装中，似乎有一种更简洁的方法可以做到这一点，尽管它不能通过 IDE 进行设置。而且，正如其他地方所指出的，调试似乎仍然被破坏了。

从`CodeGear.Cpp.Targets`我安装的副本上的文件中，我们有：

```
<!-- Output Directories and Filenames -->
<OutputName Condition="'$(OutputName)'==''">$(MSBuildProjectName)</OutputName>
<FinalOutput Condition="'$(FinalOutput)'==''">$(FinalOutputDir)$(DllPrefix)$(OutputName)$(DllSuffix)$(OutputExt)$(DllVersion)</FinalOutput> 
```

因此，看起来您可以自己设置 OutputName 属性以根据每个配置更改输出文件名。

例如，在一个简单的 VCL Forms 应用程序中，我可以将其设置为 Debug Win32 配置，如下所示：

```
<PropertyGroup Condition="'$(Cfg_1_Win32)'!=''">
    <OutputName>testmyapp</OutputName>
    <snip> 
```

显然，您希望在适当的`PropertyGroup`元素中复制这一行。如果这没有意义，我建议阅读 MSBuild 属性组和条件如何工作，因为这是 Embarcadero 构建系统的基础。

**如果整个情况困扰您，我建议投票支持我在这里创建的功能请求：[https ://quality.embarcadero.com/browse/RSP-13108](https://quality.embarcadero.com/browse/RSP-13108)**

# vb.net - 混合编码到字符串

> ID：11775837
> 
> 赞同：1
> 
> 时间：2012-08-02T10:44:58.803
> 
> 标签：vb.net, encoding, decoding

我在 VB.net 中有一个字符串，它可能包含以下内容：

> 这是一个 0x000020AC 符号

这是根据本文[http://www.fileformat.info/info/unicode/char/20ac/index.htm的欧元符号的 UTF-32 编码](http://www.fileformat.info/info/unicode/char/20ac/index.htm)

我想把它转换成

> 这是一个€符号

我尝试在 VB.net 中使用 UnicodeEncoding() 类（框架 2.0，因为我正在修改旧应用程序）

当我使用这个类进行编码，然后解码时，我仍然得到原始字符串。

我希望 UnicodeEncoding 能够识别已经编码的部分而不是对其进行编码。但似乎并非如此。

对于如何将混合编码字符串转换为普通字符串，我现在有点迷茫。

背景：将 Excel 电子表格另存为 CSV 时，ascii 范围之外的任何内容都会转换为 ?。所以我的想法是，如果我能让我的客户搜索/替换几个字符，比如欧元符号，变成一个编码字符串，比如 0x000020AC。然后我希望在插入 SQL 数据库之前将这些编码部分转换回真实符号。

我试过一个功能，比如

```
Public Function Decode(ByVal s As String) As String
    Dim uni As New UnicodeEncoding()
    Dim encodedBytes As Byte() = uni.GetBytes(s)
    Dim output As String = ""

    output = uni.GetString(encodedBytes)

    Return output
End Function 
```

[这是基于http://msdn.microsoft.com/en-us/library/system.text.unicodeencoding.aspx](http://msdn.microsoft.com/en-us/library/system.text.unicodeencoding.aspx)上 MSDN 上的示例

可能是我完全误解了它在 VB.net 中的工作原理。在 C# 中，我可以简单地使用转义字符，例如“\u20AC”。但是在 VB.net 中不存在这样的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:25:56.730

根据 Heinzi 的建议，我使用以下代码实现了 Regex.Replace 方法，这似乎适用于我的示例。

```
Public Function Decode(ByVal s As String) As String
 Dim output As String = ""
 Dim sRegex As String = "0x[0-9a-zA-Z]{8}"

 Dim r As Regex = New Regex(sRegex)

 Dim myEvaluator As MatchEvaluator = New MatchEvaluator(AddressOf HexToString)

 output = r.Replace(s, myEvaluator)

 Return output
End Function

Public Function HexToString(ByVal hexString As Match) As String
 Dim uni As New UnicodeEncoding(True, True)
 Dim input As String = hexString.ToString
 input = input.Substring(2)
 input = input.TrimStart("0"c)

 Dim output As String

 Dim length As Integer = input.Length
 Dim upperBound As Integer = length \ 2
 If length Mod 2 = 0 Then
  upperBound -= 1
 Else
  input = "0" & input
 End If
 Dim bytes(upperBound) As Byte
 For i As Integer = 0 To upperBound
  bytes(i) = Convert.ToByte(input.Substring(i * 2, 2), 16)
 Next

 output = uni.GetString(bytes)

 Return output
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:32:23.063

你有没有尝试过：

```
Public Function Decode(Byval Coded as string) as string
     Return StrConv(Coded, vbUnicode)
End Function 
```

另外，您的功能无效。它将 s 作为参数，执行大量内容，然后输出放入其中的 s 而不是在其中处理的内容。

# django - 将 IntegerField 添加到 Django 模板中的日期字段

> ID：11775838
> 
> 赞同：0
> 
> 时间：2012-08-02T10:44:58.803
> 
> 标签：django, datetime, date

我正在尝试从 Django 模板中显示奖金的到期日期。目前，opening_date 存储为日期字段，我们将奖励项存储为整数字段。不幸的是，只是试图将奖金期限添加到开幕日期失败了，到目前为止我得到的最远的是：

```
{{product_form.instance.opening_date|add:product_form.instance.bonus_term}} 
```

我已经尝试将它添加到月份，但不幸的是我需要返回显示整个日期。

为了更好地了解我想要的是说开放日期是 01/01/2012 并且奖金期限是 12，我想显示 01/01/2013 的到期日期。我意识到这可能最好放在数据库中，但由于它之前的设置方式，有大量现有数据没有它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:16:03.137

我认为，对于您的场景，最优雅的解决方案是在您的模型中创建一个计算过期日期 的[模型方法，然后在模板中调用该方法：](https://docs.djangoproject.com/en/dev/topics/db/models/#model-methods)

在模型中：

```
class product(models.Model): 
    opening_date = ...
    bonus_term = ...
    def expire_date( self ):
         return self.opening_date + timedelta( days = self.bonus_term ) 
```

在模板中：

```
{{product_form.instance.expire_date}} 
```

我相信您会在代码的更多其他行中调用此方法。

# windows - 如何从 Windows QML 应用程序中删除边框

> ID：11775840
> 
> 赞同：3
> 
> 时间：2012-08-02T10:45:07.290
> 
> 标签：windows, qml, qt4.8

这类似于问题 4799748，但我想从 QML 应用程序中删除 Windows 边框，因此它在启动时没有最小化/最大化/关闭等。

我想我需要将 Window 标志设置为 Qt.CustomizeWindowHint，但我是 QML 的新手，不知道该怎么做。编辑器自动完成 Qt.CustomizeWindowHint 文本，但我看不到如何将其应用于顶级窗口。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-09-17T19:40:21.493

马尔科·弗雷利，

很简单，只需将`flags: Qt.FramelessWindowHint`ApplicationWindow QML 代码放入

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-03T03:02:01.253

您需要设置`Qt::FramelessWindowHint`窗口标志。由于 QDeclarativeView 没有接受窗口标志的构造函数，因此您必须在创建视图后设置它们：

```
QDeclarativeView *viewer = new QDeclarativeView(0);
viewer->setWindowFlags(Qt::FramelessWindowHint);
viewer->setSource(QUrl::fromLocalFile("main.qml"));
viewer->show(); 
```

顺便说一句，如果您使用的是 qmlviewer，则可以通过`-frameless`从其窗口中删除边框。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-20T11:33:16.710

使用`flags: Qt.WindowFullScreen`它的作品。

其他选项：

> 标志：[Qt::WindowFlags](http://doc.qt.io/qt-5/qt.html#WindowType-enum)

# javascript - 不同的 API 调用完成后如何进行 API 调用？

> ID：11775841
> 
> 赞同：0
> 
> 时间：2012-08-02T10:45:25.627
> 
> 标签：javascript, jquery, ajax, callback, jsonp

去[http://starodaj.eu/apitest/index2.html](http://starodaj.eu/apitest/index2.html)查看我的代码

单击“显示可用性”。它应该填充输入。我有一个问题（可能是异步的），所以我无法通过单击填充所有内容。当我多次单击“ShowAvailability”时 - 一切正常。我该如何解决？

```
 function callAPI(yourAPIKey){
    var enquiry = "http://api.roomex.com/api/hotel?apiKey=" + yourAPIKey;
     //alert(enquiry);
     $.ajax({
         url: enquiry,
         type: 'GET',
         dataType: "jsonp",
         jsonp: "callback",
         jsonpCallback: "jsonpCallback2",
         complete: function (response, responseCode) {
         },
         success: function (json) {
             $.each(json.Contracts, function (index, contract) {
                // alert("Count before increament : " + Count);
                // alert(contract.ContractCode);
                 ContractsArray[Count] = contract.ContractCode;

                // alert("Count after increament : " + Count);
                // alert("ContractsArray[Count]: " + ContractsArray[Count]);
                 Count++;

             });
             for(var i = 0; i < Count; i++){
                 //alert("ContractsArray[" + i + "]: " + ContractsArray[i]);
                 getAvailability(yourAPIKey, ContractsArray[i], startDate, endDate);
                 getRates(yourAPIKey, ContractsArray[i], startDate, endDate);
                 //alert("Finish of ContractsArray[" + i + "]: " + ContractsArray[i]);
             }
         }
     });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:06:21.633

您的脚本使用这些行产生错误

```
jsonpCallback: "jsonpCallback3",
jsonpCallback: "jsonpCallback",
jsonpCallback: "jsonpCallback2", 
```

当我删除它们时，它只会填满整个桌子

# python - 使用 Django 在 Heroku 上没有名为 _sqlite3 的模块

> ID：11775844
> 
> 赞同：0
> 
> 时间：2012-08-02T10:45:48.333
> 
> 标签：python, django, heroku

我将 python 2.7 与**PostgreSQL一起使用，并按照**[此处](https://devcenter.heroku.com/articles/django#database-settings)文档中的说明配置了数据库设置，当我尝试部署到 heroku 时，我得到了这个

```
2012-08-02T10:33:41+00:00 heroku[web.1]: Starting process with command `python ./manage.py runserver 0.0.0.0:53271 --noreload`
2012-08-02T10:33:42+00:00 app[web.1]: Traceback (most recent call last):
2012-08-02T10:33:42+00:00 app[web.1]:   File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
2012-08-02
T10:33:42+00:00 app[web.1]:   File "./manage.py", line 10, in <module>
2012-08-02T10:33:42+00:00 app[web.1]:     execute_from_command_line(sys.argv)
2012-08-02T10:33:42+00:00 app[web.1]:     utility.execute()
2012-08-02T10:33:42+00:00 app[web.1]:   File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
2012-08-02T10:33:42+00:00 app[web.1]:   File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
2012-08-02T10:33:42+00:00 app[web.1]:     self.fetch_command(subcommand).run_from_argv(self.argv)
2012-08-02T10:33:42+00:00 app[web.1]:     self.execute(*args, **options.__dict__)
2012-08-02T10:33:42+00:00 app[web.1]:   File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/base.py", line 217, in execute
2012-08-02T10:33:42+00:00 app[web.1]:     translation.activate('en-us')
2012-08-02T10:33:42+00:00 app[web.1]:   File "/app/.heroku/venv/lib/python2.7/site-packages/django/utils/translation/__init__.py", line 105, in activate
2012-08-02T10:33:42+00:00 app[web.1]:   File "/app/.heroku/venv/lib/python2.7/site-packages/django/utils/translation/trans_real.py", line 194, in activate
2012-08-02T10:33:42+00:00 app[web.1]:     return _trans.activate(language)
2012-08-02T10:33:42+00:00 app[web.1]:     _active.value = translation(language)
2012-08-02T10:33:42+00:00 app[web.1]:   File "/app/.heroku/venv/lib/python2.7/site-packages/django/utils/translation/trans_real.py", line 183, in translation
2012-08-02T10:33:42+00:00 app[web.1]:     default_translation = _fetch(settings.LANGUAGE_CODE)
2012-08-02T10:33:42+00:00 app[web.1]:   File "/app/.heroku/venv/lib/python2.7/site-packages/django/utils/translation/trans_real.py", line 160, in _fetch
2012-08-02T10:33:42+00:00 app[web.1]:     app = import_module(appname)
2012-08-02T10:33:42+00:00 app[web.1]:   File "/app/.heroku/venv/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
2012-08-02T10:33:42+00:00 app[web.1]:     __import__(name)
2012-08-02T10:33:42+00:00 app[web.1]:   File "/app/.heroku/venv/lib/python2.7/site-packages/django/contrib/admin/__init__.py", line 3, in <module>
2012-08-02T10:33:42+00:00 app[web.1]:     from django.contrib.admin.helpers import ACTION_CHECKBOX_NAME
2012-08-02T10:33:42+00:00 app[web.1]:   File "/app/.heroku/venv/lib/python2.7/site-packages/django/contrib/admin/helpers.py", line 2, in <module>
2012-08-02T10:33:42+00:00 app[web.1]:     from django.contrib.admin.util import (flatten_fieldsets, lookup_field,
2012-08-02T10:33:42+00:00 app[web.1]:   File "/app/.heroku/venv/lib/python2.7/site-packages/django/contrib/admin/util.py", line 1, in <module>
2012-08-02T10:33:42+00:00 app[web.1]:     from django.db import models
2012-08-02T10:33:42+00:00 app[web.1]:   File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/__init__.py", line 40, in <module>
2012-08-02T10:33:42+00:00 app[web.1]:     backend = load_backend(connection.settings_dict['ENGINE'])
2012-08-02T10:33:42+00:00 app[web.1]:   File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/__init__.py", line 34, in __getattr__
2012-08-02T10:33:42+00:00 app[web.1]:     return getattr(connections[DEFAULT_DB_ALIAS], item)
2012-08-02T10:33:42+00:00 app[web.1]:   File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/utils.py", line 92, in __getitem__
2012-08-02T10:33:42+00:00 app[web.1]:     backend = load_backend(db['ENGINE'])
2012-08-02T10:33:42+00:00 app[web.1]:   File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/utils.py", line 24, in load_backend
2012-08-02T10:33:42+00:00 app[web.1]:     return import_module('.base', backend_name)
2012-08-02T10:33:42+00:00 app[web.1]:     __import__(name)
2012-08-02T10:33:42+00:00 app[web.1]:   File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/backends/sqlite3/base.py", line 31, in <module>
2012-08-02T10:33:42+00:00 app[web.1]:   File "/app/.heroku/venv/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
2012-08-02T10:33:42+00:00 app[web.1]:     raise ImproperlyConfigured("Error loading either pysqlite2 or sqlite3 modules (tried in that order): %s" % exc)
2012-08-02T10:33:42+00:00 app[web.1]: django.core.exceptions.ImproperlyConfigured: Error loading either pysqlite2 or sqlite3 modules (tried in that order): No module named _sqlite3 
```

这就是我的 settings.py 的样子

```
# Django settings for WEB project.
import os
import dj_database_url

PROJECT_ROOT = os.path.abspath(os.path.join(os.path.dirname(__file__), os.pardir))
PACKAGE_ROOT = os.path.abspath(os.path.dirname(__file__))

DEBUG = True
TEMPLATE_DEBUG = DEBUG
#####################################Django-Social auth
FACEBOOK_APP_ID = 'xxxxxxxxxxxxxxxx'
FACEBOOK_API_SECRET = 'xxxxxxxxxxxxxxxxxxxxx'

TWITTER_CONSUMER_KEY = 'xxxxxxxxxxxxxxxxxxxxx'
TWITTER_CONSUMER_SECRET = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'

FACEBOOK_EXTENDED_PERMISSIONS = ['email','user_birthday','user_location']

FACEBOOK_EXTRA_DATA = [
    ('user_location', 'location')
]

SOCIAL_AUTH_CREATE_USERS = True

SOCIAL_AUTH_ASSOCIATE_BY_MAIL = False

SOCIAL_AUTH_USER_MODEL = 'shoghlanah.Employer'

SOCIAL_AUTH_RAISE_EXCEPTIONS = False

SOCIAL_AUTH_BACKEND_ERROR_URL = '/login/'

# LOGIN_URL          = '/login-form/'
LOGIN_REDIRECT_URL = '/home/'
#LOGIN_ERROR_URL    = '/login/'

# SOCIAL_AUTH_COMPLETE_URL_NAME  = 'socialauth_complete'
# SOCIAL_AUTH_ASSOCIATE_URL_NAME = 'socialauth_associate_complete'

# SOCIAL_AUTH_DEFAULT_USERNAME = 'new_social_auth_user'

#SOCIAL_AUTH_USER_MODEL = 'shoghlanah.Employer'

#SOCIAL_AUTH_ASSOCIATE_BY_MAIL = False
########################################

EMAIL_USE_TLS = True
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_HOST_USER = 'shoghlanah.megasoft@gmail.com'
EMAIL_HOST_PASSWORD = 'megasoft'
EMAIL_PORT = 587

AUTHENTICATION_BACKENDS = ('shoghlanah.backends.EmailBackend',
    'django.contrib.auth.backends.ModelBackend',
)
ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {'default': dj_database_url.config(default='postgres://localhost')}
# DATABASES = {
#     'default': {
#         'ENGINE': 'django.db.backends.postgresql_psycopg2' , #'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
#         'NAME': 'shoghlanahDB',                  # Or path to database file if using sqlite3.
#         'USER': 'postgres',                      # Not used with sqlite3\. #postgres
#         'PASSWORD': 'password',                  # Not used with sqlite3\. #password
#         'HOST': '',                     # Set to empty string for localhost. Not used with sqlite3.
#         'PORT': '5432',                      # Set to empty string for default. Not used with sqlite3\. #5432

#     }
# }

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# On Unix systems, a value of None will cause Django to use the same
# timezone as the operating system.
# If running in a Windows environment this must be set to the same as your
# system time zone.
TIME_ZONE = 'Egypt'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"

#MEDIA_ROOT = os.path.join( os.path.dirname( __file__ ), 'Uploads')
MEDIA_ROOT = os.path.join(PACKAGE_ROOT, "site_media", "media")

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
#MEDIA_URL = '/Uploads/'
MEDIA_URL = "/site_media/media/"

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
#STATIC_ROOT = ''
STATIC_ROOT = os.path.join(PACKAGE_ROOT, "site_media", "static")

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
#STATIC_URL = '/static/'
STATIC_URL = "/site_media/static/"

# Additional locations of static files
STATICFILES_DIRS = (
    os.path.join( os.path.dirname( __file__ ), 'static' ),
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = '2814zs+o5j!j)8fvmke!0y&amp;vj%hub#(w!35th_)y(*+x*g(_zm'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'WEB.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'WEB.wsgi.application'

TEMPLATE_DIRS = (
    os.path.join( os.path.dirname( __file__ ), 'templates' ),
    #os.path.join( os.path.dirname( __file__ ), 'Uploads' ),
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)
#  Provide.our getProfile()
#DJANGO_SETTINGS_MODULE='WEB.settings_gondor'
AUTH_PROFILE_MODULE='shoghlanah.Employer'
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'shoghlanah',
    #'social_auth', #########################################Django-social-auth
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    #'twitter_users'
    # Uncomment the next line to enable admin documentation:
    'django.contrib.admindocs',
    'oembed_works',
    #'south',
)

#################################################Django-Scoial-auth
AUTHENTICATION_BACKENDS = (
   'social_auth.backends.facebook.FacebookBackend',
   'social_auth.backends.twitter.TwitterBackend',
   'django.contrib.auth.backends.ModelBackend'
   #'twitter_users.backends.TwitterBackend'
)

SOCIAL_AUTH_ENABLED_BACKENDS = ('facebook','twitter'
)

EASY_MAPS_GOOGLE_KEY ='AIzaSyDLWxu_BdiJK24W46KhlSORMJT0_ZcK8IU'

TEMPLATE_CONTEXT_PROCESSORS = (
    "django.contrib.auth.context_processors.auth",
    "django.core.context_processors.debug",
    "django.core.context_processors.i18n",
    "django.core.context_processors.media",
    "django.core.context_processors.static",
    "django.core.context_processors.tz",
    "django.contrib.messages.context_processors.messages",
    'social_auth.context_processors.social_auth_by_type_backends',
    'social_auth.context_processors.social_auth_by_name_backends',
   'social_auth.context_processors.social_auth_backends',
   'social_auth.context_processors.social_auth_by_type_backends',
   "django.core.context_processors.request",
)
##################################################

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
}
PASSWORD_HASHERS = (
    'django.contrib.auth.hashers.PBKDF2PasswordHasher',
    'django.contrib.auth.hashers.PBKDF2SHA1PasswordHasher',
    'django.contrib.auth.hashers.BCryptPasswordHasher',
    'django.contrib.auth.hashers.SHA1PasswordHasher',
    'django.contrib.auth.hashers.MD5PasswordHasher',
    'django.contrib.auth.hashers.CryptPasswordHasher',
) 
```

而且我没有配置sqlite3，顺便说一下，我第一次部署时我没有遇到这个问题，后来我明白了，感谢任何hep

**更新 1** requirements.txt

```
Django==1.4
PIL==1.1.7
South==0.7.5
dj-database-url==0.2.1
django-oembed-works==0.2.2
django-social-auth==0.7.0
django-stdimage==0.2.2
gondor==1.1.3
gunicorn==0.14.5
httplib2==0.7.4
oauth2==1.5.211
psycopg2==2.4.5
python-openid==2.2.5
wsgiref==0.1.2 
```

# android - 操作栏 Sherlock - 选项卡图标和文本

> ID：11775845
> 
> 赞同：0
> 
> 时间：2012-08-02T10:45:49.513
> 
> 标签：android, actionbarsherlock

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/menu_settings"
    android:icon="@drawable/ic_launcher"
    android:title="One"
    android:orderInCategory="0"
    android:showAsAction="ifRoom" >
    <menu>
        <item android:id="@+id/subItem1"
                android:title="sub 1" />
        <item android:id="@+id/subItem2"
                android:title="sub 2" />
    </menu>
 </item> 
```

我想要一个菜单​​选项卡的图标和标题，但只显示图标，我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:49:15.893

您应该添加`withText`：

```
android:showAsAction="ifRoom|withText" 
```

但是，这只是一个提示，并不能保证您的选项卡会显示文本。这取决于设备的屏幕尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:47:37.670

据我所知，在纵向模式下，文本将始终被隐藏。

您可以尝试删除操作栏的标题，看看是否有帮助。

试试横向，你应该看到图标和文字。

# c# - 我试图让我的登录页面到内容页面的会话，当我注销并按下返回按钮时，它会重定向到我的内容页面

> ID：11775848
> 
> 赞同：0
> 
> 时间：2012-08-02T10:46:05.603
> 
> 标签：c#, asp.net, webforms

我的登录页面代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    if (!Session["userid"].Equals(String.Empty))
    {
        Response.Redirect("Welcome.aspx");
    }
}
protected void CheckBox2_CheckedChanged(object sender, EventArgs e)
{

}
protected void LinkButton1_Click(object sender, EventArgs e)
{
    Response.Redirect("userreg.aspx");
} 
```

内容页面代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Session["userid"].Equals(String.Empty))
    {
        Response.Redirect("Default.aspx");
              }
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
}
protected void Button1_Click(object sender, EventArgs e)
{
    Session.Abandon();
    Response.Redirect("Default.aspx");
} 
```

# jquery - 在循环中使用 jquery 滑动 div

> ID：11775855
> 
> 赞同：0
> 
> 时间：2012-08-02T10:46:47.233
> 
> 标签：jquery, html, css

我下面的代码有点笨拙，所以我需要你的专业知识来解决这两个问题。我知道很多例子，但我想学一点，也有一个更干净的代码。

1.  滑动时，DIV 项目不会并排显示。一个在另一个之下，这是错误的。
2.  我可以增强 jQuery 代码以使其循环或更动态，使其看起来更专业。如果我有 100 个 DIV，那将无法处理。
3.  它永远不应该停止。

谢谢

```
<html>
    <style>
    *           { margin: 0px; padding: 0px; }
    #cover      { width: 100%; height: 300px; background: #CCCCCC; }
    #cover div  { width: 100%; height: 200px; background: #FFFFFF; }
    .content    { text-align: center; }
    </style>
    <head>
        <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function()
            {
                event.preventDefault();

                $('#slider_2').hide().delay(5000);
                $('#slider_3').hide().delay(10000);
                $('#slider_1').show('slide', { direction: 'left' }, 1000);
                $('#slider_1').delay(4000).hide('slide', { direction: 'left' }, 1000);
                $('#slider_2').show('slide', { direction: 'right' }, 1000);
                $('#slider_2').delay(4000).hide('slide', { direction: 'right' }, 1000);
                $('#slider_3').show('slide', { direction: 'left' }, 1000);
                $('#slider_3').delay(4000).hide('slide', { direction: 'left' }, 1000);
            });
        </script>
    </head>

    <body>
        <div id="cover">
            <div id="slider_1"><p class="content">SLIDER ONE</p></div>
            <div id="slider_2"><p class="content">SLIDER TWO</p></div>
            <div id="slider_3"><p class="content">SLIDER THREE</p></div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:56:37.303

这些动画需要正确链接。一个元素的所有内容都需要出现在一个语句中：

```
$('#slider_1').show(...).delay(4000).hide(...); 
```

否则 jQuery 可能会在第二个语句中用第二个链（延迟隐藏）覆盖第一个动画链（显示）。

# javascript - jQuery DatePicker - 焦点问题

> ID：11775858
> 
> 赞同：0
> 
> 时间：2012-08-02T10:47:03.957
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-ui-datepicker

`<input type="text" id="personDOB" data-autofill="Under 18,N/A" />`

```
$("#personDOB").datetimepicker({
    showOtherMonths : true,
    selectOtherMonths : true,
    changeMonth : true,
    changeYear : true,
    showButtonPanel : true
}); 
```

我目前的工作是: `buttonImageOnly: true`,

使用图标而不是焦点...

以上是文本字段和日期选择器代码。

还使用时间插件：[https ://raw.github.com/trentrichardson/jQuery-Timepicker-Addon/master/jquery-ui-timepicker-addon.js](https://raw.github.com/trentrichardson/jQuery-Timepicker-Addon/master/jquery-ui-timepicker-addon.js)

我注意到日期选择器显示在 foucs 上，但只希望它在点击时显示..

我尝试过查看源代码，但似乎无法破解。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T11:00:44.683

您可以尝试在点击事件上附加 datetimepicker 然后显示它：

```
$(function() {
    $("#personDOB").click(function() {
        $(this).datetimepicker({
        // .....
        }).datetimepicker("show");
    });
}); 
```

这适用于 datepicker，但我不确定它是否适用于这个 datetimepicker。

# javascript - Google Chart Table 删除选择

> ID：11775861
> 
> 赞同：8
> 
> 时间：2012-08-02T10:47:15.190
> 
> 标签：javascript, html, css, google-visualization

我目前正在使用 Google 图表。我的选择有问题。我想关闭选择，但这似乎是不可能的。我什至尝试过（一种非常丑陋的方式），比如在选择部分使用事件侦听器，它使用方法[clearChart()](https://developers.google.com/chart/interactive/docs/gallery/table#Methods)来删除它。

这是测试源代码。请注意，我不能在 jsfiddle 中使用它

```
<script type="text/javascript" src="https://www.google.com/jsapi" ></script>
<script type="text/javascript">
google.load("jquery", "1");

google.load('visualization', '1', {packages:['table']});

     function drawVisualization()
     {
          var data = google.visualization.arrayToDataTable([
          ['', 'Name', 'E-mail', 'Activated', 'Last login'],
          ['<input type="checkbox">', 'name1', 'name1@company.xxx', true, '20-07-2012'],
          ['<input type="checkbox">', 'name2', 'name2@company.xxx', true, '21-07-2012']

               ]);

               var options = {};
               options['showRowNumber'] = false;
               options['page'] = 'enable';
               options['allowHtml'] = true;
               options['pageSize'] = 18;
               options['pagingButtonsConfiguration'] = 'auto';

               var visualization = new google.visualization.Table(document.getElementById('table'));
               visualization.draw(data, options);
          }

          google.setOnLoadCallback(drawVisualization);

</script>
<div id="table"></div> 
```

问题是，如果我使用这些复选框，（蓝色）选择令人讨厌和混乱。

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-27T02:56:35.547

另一种选择是在触发“select”事件时重置选择：

```
google.visualization.events.addListener(visualization, 'select', selectHandler);

function selectHandler() {  
    visualization.setSelection([])
} 
```

这是一个例子：http: [//jsfiddle.net/Rxnty/](http://jsfiddle.net/Rxnty/)

这会立即删除选择而不需要重绘。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T14:58:59.407

实现您想要的效果的一种方法是告诉 API 在选择行时应该应用哪个类，允许您继续指定`background-color`行的。

**JS：**

```
options['cssClassNames'] = {}
options['cssClassNames']['selectedTableRow'] = 'selected'; 
```

**CSS：**

```
.selected { background-color: white; } 
```

您可以看到它在[jsfiddle](http://jsfiddle.net/cchana/rjvAL/3/)上运行。

# asp.net - 将字符串转换为日期时间 VB.net

> ID：11775862
> 
> 赞同：1
> 
> 时间：2012-08-02T10:47:17.360
> 
> 标签：asp.net, vb.net

我有一个字符串变量，它填充了日历中的日期，格式为 29/07/2012

我想将其转换为日期时间数据类型，然后以这种格式 2012-07-29 00:00:00:000 将其存储在 sql 数据库中

```
The error message i'm getting at the minute is:
"The conversion of a char data type to a datetime data type resulted in an out-of-range datetime value." 
```

这是一些代码：

```
Dim strDate As String = ""

 Dim cmd2 As New SqlCommand("sp_Return6MonthTotal")
                Dim strTotalHours6Month As Integer = 0
                cmd2.Connection = con1
                cmd2.CommandType = Data.CommandType.StoredProcedure
                cmd2.Parameters.Add(New SqlParameter("@ServiceNumber", Data.SqlDbType.Char, 11))
                cmd2.Parameters.Add(New SqlParameter("@OvertimeDate2", Data.SqlDbType.DateTime))
                cmd2.Parameters("@ServiceNumber").Value = strServiceNumber
                cmd2.Parameters("@OvertimeDate2").Value = strDate

                If cmd2.ExecuteScalar() Is DBNull.Value Then
                    Label17.Text = "0"
                    Label21.Text = "0"
                Else
                    strTotalHours6Month = cmd2.ExecuteScalar()
                    Label17.Text = strTotalHours6Month
                    Label21.Text = Math.Round(strTotalHours6Month / 6)
                End If

                Dim cmd3 As New SqlCommand("sp_ReturnMonthTotal")
                Dim strTotalHours As Integer = 0
                cmd3.Connection = con1
                cmd3.CommandType = Data.CommandType.StoredProcedure
                cmd3.Parameters.Add(New SqlParameter("@ServiceNumber", Data.SqlDbType.Char, 11))
                cmd3.Parameters.Add(New SqlParameter("@OvertimeDate2", Data.SqlDbType.DateTime))
                cmd3.Parameters("@ServiceNumber").Value = strServiceNumber
                cmd3.Parameters("@OvertimeDate2").Value = strDate

Stored procedures:
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[sp_ReturnMonthTotal]
   @ServiceNumber varchar(100),
   @OvertimeDate2 datetime
AS

SELECT sum(hoursworked) from overtime where servicenumber = @ServiceNumber and month(CONVERT(datetime, OvertimeDate2, 103)) = month(CONVERT(datetime, @OvertimeDate2, 103)) and year(CONVERT(datetime, OvertimeDate2, 103)) = year(CONVERT(datetime, @OvertimeDate2, 103))

-------------
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[sp_Return6MonthTotal]
   @ServiceNumber varchar(100),
   @OvertimeDate2 datetime
AS

SELECT sum(hoursworked) from overtime where servicenumber = @ServiceNumber and overtimedate2 >= DATEADD(month, -6, CONVERT(datetime, @OvertimeDate2, 103)) 
```

对不起，我的编程知识不是很好，我没有编写代码，所以希望这对某人有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:51:45.557

尝试通过如下所示的代码转换日期，然后将其发送到数据库以存储该值

VB.net

```
Dim strDate As String = "21/07/2006"
Dim dtfi As New DateTimeFormatInfo()
dtfi.ShortDatePattern = "dd/MM/yyyy"
dtfi.DateSeparator = "/"
Dim objDate As DateTime = Convert.ToDateTime(strDate, dtfi) 
```

c#(参考)

```
 string strDate = "21/07/2006";
 DateTimeFormatInfo dtfi = new DateTimeFormatInfo();
 dtfi.ShortDatePattern = "dd/MM/yyyy";
 dtfi.DateSeparator = "/";
 DateTime objDate = Convert.ToDateTime(strDate, dtfi); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:52:16.070

`DateTime.Parse("29/07/2012")`将毫无问题地解析为一种`DateTime`类型。如果字符串不明确（“08/07/2012”可能是 7 月 8 日*或*8 月 7 日，取决于文化），这很可能会失败，因此使用`ParseExact`或`TryParseExact`使用确切的格式字符串（和文化）可能是一个更强大的解决方案。

这可以使用任何常用方式（ADO.NET、像 nHibernate 或 EF 之类的 ORM）直接馈入 SQL Server。

在 SQL Server 中以某种格式存储 s的问题存在误解`DATETIME`——它们不是。它们有一个不可见的内部表示 - 您看到的是 SSMS 将值格式化为您所看到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T10:49:52.440

您将不得不使用`DateTime.TryParseExact`将它获取到一个`DateTime`对象中，然后将其作为参数存储在您的`SqlCommand`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T10:58:43.793

```
Dim dt As DateTime
dt = Convert.ToDateTime(TextBox1.Text) 
```

但我认为您应该使用日期格式为 MM/DD/YYYY（07/29/2012 而不是 29/07/2012）

# android - Android：无法加载库（缺少 94 个基本表）

> ID：11775866
> 
> 赞同：6
> 
> 时间：2012-08-02T10:47:25.890
> 
> 标签：android, linker, android-ndk

我正在开发一个使用庞大本机库的 Android 应用程序。一些客户抱怨启动时崩溃，其中一位给了我们他的 logcat 转储：

```
07-19 10:55:15.139 E/AndroidRuntime(16539)FATAL EXCEPTION: AsyncTask #3
07-19 10:55:15.139 E/AndroidRuntime(16539)java.lang.RuntimeException: An error occured while executing doInBackground()
07-19 10:55:15.139 E/AndroidRuntime(16539)at android.os.AsyncTask$3.done(AsyncTask.java:200)
07-19 10:55:15.139 E/AndroidRuntime(16539)at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
07-19 10:55:15.139 E/AndroidRuntime(16539)at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
07-19 10:55:15.139 E/AndroidRuntime(16539)at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
07-19 10:55:15.139 E/AndroidRuntime(16539)at java.util.concurrent.FutureTask.run(FutureTask.java:138)
07-19 10:55:15.139 E/AndroidRuntime(16539)at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
07-19 10:55:15.139 E/AndroidRuntime(16539)at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
07-19 10:55:15.139 E/AndroidRuntime(16539)at java.lang.Thread.run(Thread.java:1019)
07-19 10:55:15.139 E/AndroidRuntime(16539)Caused by: java.lang.ExceptionInInitializerError
07-19 10:55:15.139 E/AndroidRuntime(16539)at my.app.appinit.NativeInitAsyncTask.doInBackground(NativeInitAsyncTask.java:86)
07-19 10:55:15.139 E/AndroidRuntime(16539)at my.app.appinit.NativeInitAsyncTask.doInBackground(NativeInitAsyncTask.java:44)
07-19 10:55:15.139 E/AndroidRuntime(16539)at android.os.AsyncTask$2.call(AsyncTask.java:185)
07-19 10:55:15.139 E/AndroidRuntime(16539)at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
07-19 10:55:15.139 E/AndroidRuntime(16539)... 4 more
07-19 10:55:15.139 E/AndroidRuntime(16539)Caused by: java.lang.UnsatisfiedLinkError: Cannot load library: link_image[1935]:    94 missing essential tables
07-19 10:55:15.139 E/AndroidRuntime(16539)at java.lang.Runtime.loadLibrary(Runtime.java:434)
07-19 10:55:15.139 E/AndroidRuntime(16539)at java.lang.System.loadLibrary(System.java:554)
07-19 10:55:15.139 E/AndroidRuntime(16539)at nativewrapper.NativeObject.<clinit>(NativeObject.java:30)
07-19 10:55:15.139 E/AndroidRuntime(16539)... 8 more
07-19 10:55:15.179 W/ActivityManager(162)Force finishing activity my.app.packagename/my.app.FirstActivity 
```

客户的手机型号是三星 Galaxy Ace (gt-s5830)。通过在互联网上挖掘，我从Android链接器（[http://source-android.frandroid.com/bionic/linker/linker.c](http://source-android.frandroid.com/bionic/linker/linker.c)）中找到了这段代码：看着它，似乎zygote（pid 94）可以'不为我的应用程序加载库（pid 1935），我找不到任何提示或解决方法来解决这个问题，知道吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T20:11:15.153

使用最新的 ndk 版本更新您的应用程序构建。

**java.lang.UnsatisfiedLinkError**

发生异常是因为找不到本机库（Windows 上的 DLL/Linux 上的 SO）。在 UNIX 和其他系统上，它也可能是由系统上的运行时库与与预构建的本机库关联的运行时库之间的版本差异引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-17T12:31:53.747

这似乎是“加载库”的静态块中的错误。

检查这些东西

1.  从库名的开头删除“lib”，从库名的末尾删除“.so”。例如：如果库是 libTest.so

您在静态块中的代码应该是

```
static{

System.loadLibrary("Test");

} 
```

1.  确保你清理你的项目。

# java - 在 weblogic 中启用球衣日志记录

> ID：11775870
> 
> 赞同：1
> 
> 时间：2012-08-02T10:47:39.253
> 
> 标签：java, weblogic, jersey

我无法让 weblogic 将日志输出到球衣的控制台。我的 web.xml 中有这个：

```
 <init-param>
        <param-name>com.sun.jersey.server.impl.container.ContainerRequestFilters</param-name>
        <param-value>com.sun.jersey.api.container.filter.LoggingFilter</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.server.impl.container.ContainerResponseFilters</param-name>
        <param-value>com.sun.jersey.api.container.filter.LoggingFilter</param-value>
    </init-param> 
```

这适用于码头和tomcat。Log4j 也运行良好，因为我可以获得其他模块（如 hibernate）的日志输出。我在 log4j.properties 中有这一行：

```
log4j.logger.com.sun.jersey=DEBUG 
```

我在 weblogic 10.3.6 上使用 Jersey 1.1.1.5.2 和 log4j 1.2.16。我是否必须做其他事情才能使其正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T18:16:12.527

如 com.sun.jersey.api.client.filter.LoggingFilter.java 中所述，球衣使用标准 JDK 记录器。

> ```
> /**
>  * Create a logging filter logging the request and response to
>  * a default JDK logger, named as the fully qualified class name of this
>  * class.
>  */ 
> ```

您需要配置 JDK 日志记录以正确记录输出。使用 jul-to-slf4j + slf4j-log4j12 可能会将输出集成到您的 log4j 日志文件中。

# javascript - 使用 Spark 视图引擎的 viewdata 调用带有引号的参数的 javascript 函数时遇到问题

> ID：11775875
> 
> 赞同：2
> 
> 时间：2012-08-02T10:48:10.370
> 
> 标签：javascript, parameters, quotes, spark-view-engine, viewdata

我正在使用 Spark 视图引擎开发一个网站。其中一个 spark 视图定义了 viewdata，该视图数据在同一个 spark 视图中定义的 javascript 中使用，看起来（简而言之）如下所示：

```
<viewdata model="ConversationViewModel"/>

<content name="Conversation">
  ...
  <script type="text/javascript">
    $(function () {
      conversation.init("$!{Model.RelationFullName}");
    });
  </script>
</content> 
```

这里的问题是 RelationFullName 属性可以有一个包含单引号和/或双引号的值。

有没有办法逃避引号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:56:33.583

你可以创建一个扩展方法`JavaScriptEscape`作为`this string`它的第一个参数，然后在你的 _global.spark 中添加一个使用标签。该方法将替换任何[特殊字符](http://www.w3schools.com/js/js_special_characters.asp)并返回结果。只需确保先替换反斜杠，否则`'`会变成`\\'`而不是`\'`.

```
namespace Whatever.Your.Namespace.Is
{
    public static class MyStringExtensions
    {
        public static String JavaScriptEscape(this String p_string)
        {
            p_string = p_string ?? String.Empty;
            p_string = p_string.replace("\\", "\\\\");
            /* Do the rest of the replacements, include single and double quotes. */
            return p_string;
        }
    }
} 
```

在 _global.spark 中：

```
<use namespace="Whatever.Your.Namespace.Is" /> 
```

您的 JavaScript 行将是：

```
conversation.init("$!{Model.RelationFullName.JavaScriptEscape()}"); 
```

祝你好运！

# sql-server - 在 SQL Server 中优化大型过程的理想方法是什么？

> ID：11775876
> 
> 赞同：0
> 
> 时间：2012-08-02T10:48:24.667
> 
> 标签：sql-server, sql-server-2008, query-optimization

在我们的一个应用程序中，我的公司有一个需要很长时间才能运行的程序。

这个过程非常庞大，并且调用了许多不同的子过程和函数。

通常它已经被许多不同的人研究了很多年，但没有人希望对其进行优化。

我的问题是 - 优化此过程的最佳方法是什么 - 是否有最佳实践指南来处理此类问题？

任务如此艰巨，我不知道从哪里开始。专家将如何开始/解决这个问题？

我已经知道基本的 SQL Server 优化，例如执行计划/索引/写得不好的查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:54:22.690

由于您的存储过程调用子过程和函数，我认为它是一棵树（过程本身是根），从叶子开始，一次一个函数，前进到根。

这样，您可以专注于一次执行的单个任务，*并且*在任何给定时刻检查的代码更少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T11:46:59.873

如果您喜欢断言值的方式，我将详细说明我在嵌套存储过程中断言的一种做法。

**免责声明：**这种方法不是在生产系统中获得最佳性能的最佳方式。我建议您评论所有调试断言并在生产系统中选择。尤其是当嵌套过程将表结果返回给父过程时，调试选择会完全破坏功能！

先举例：

```
ALTER PROC [dbo].[MyTopLevelProc]
    @SomeText nvarchar(50),
    @SomeNumber bigint

    /* >>> parameters only for debug >>> */
    /* debug parameters should have always default values and should be last parameters of procedure. it is goog practice because of usage during development/production phase */
    , @EnableDebugSelects bit = NULL -- if 1, then table-results will be used for asserting table data for debuging
    , @LogIndent int = NULL -- determines indentation of text asserts
    /* <<< parameters only for debug <<< */
BEGIN
    IF @EnableDebugSelects IS NULL SET @EnableDebugSelects = 0
    IF @LogIndent IS NULL OR @LogIndent < 0 SET @LogIndent = 0

    /* @SubLogIndent = indentation for nested procedures */
    DECLARE @SubLogIndent int = @LogIndent + 1

    DECLARE @_CurrentProcName_ nvarchar(255) = '[dbo].[MyTopLevelProc]'
    EXEC x.LogStr @LogIndent, 'PROC: ', @_CurrentProcName_, ' >>>' -- asserts start of procedure

    EXEC x.LogStr @LogIndent, 'INSERT INTO _some_table_'
    INSERT INTO _some_table_ ( ... columns ... )
        SELECT ... columns ... FROM _other_table_
    EXEC x.LogRowCount @LogIndent, @@ROWCOUNT

    EXEC x.LogStr @LogIndent, 'Getting product names ...'
    DECLARE @TblProductName TABLE (
        ProductID int,
        ProductName nvarchar(50)
    )
    INSERT INTO @TblProductName (ProductID, ProductName)
        SELECT ProductID, ProductName FROM _some_product_table_
    EXEC x.LogRowcount @LogIndent, @@ROWCOUNT

    IF @EnableDebugSelects = 1 BEGIN
        -- using the name of table-variable (@TblProductName) as column name is good practise for cases when the table variable has no rows. even from column names you can see which table-variable was selected
        SELECT '' AS [@TblProductName], * FROM @TblProductName
    END

    EXEC x.LogStr @LogIndent, 'Calling nested procedure ...'
    DECLARE @Result int
    EXEC @Result = [dbo].[AnotherProcedure]
                     @SomeTextParameter = 'Hello world!',
                     @SomeNumberParameter = 42,
                     /* we want pass debug parameters into nested procedures */
                     @EnableDebugSelects = @EnableDebugSelects,
                     @LogIndent = @SubLogIndent -- passing increased indentation for text asserts
    EXEC x.LogInt @LogIndent, '@Result: ', @Result

    EXEC x.LogStr @LogIndent, 'PROC: <<< ', @_CurrentProcName_ -- asserts end of procedure
END 
```

这些程序`x.Log*`是我在自定义模式中的自定义存储过程`x`。存储过程的主体如下所示：

```
ALTER PROCEDURE [x].[Log]
    @LogIndent int = 0,
    @Str nvarchar(max),
    @Str2 nvarchar(max) = NULL,
    @Str3 nvarchar(max) = NULL,
    @Str4 nvarchar(max) = NULL,
    @Str5 nvarchar(max) = NULL
AS
BEGIN
DECLARE @Msg nvarchar(max) = ''

IF @LogIndent IS NULL SET @LogIndent = 0
IF @LogIndent > 0 BEGIN
    DECLARE @i int = 0
    WHILE @i < @LogIndent BEGIN
        SET @i = @i + 1
        SET @Msg = @Msg + '    '
    END
END

IF NOT @Str IS NULL SET @Msg = @Msg + @Str
IF NOT @Str2 IS NULL SET @Msg = @Msg + @Str2
IF NOT @Str3 IS NULL SET @Msg = @Msg + @Str3
IF NOT @Str4 IS NULL SET @Msg = @Msg + @Str4
IF NOT @Str5 IS NULL SET @Msg = @Msg + @Str5

PRINT @Msg
END 
```

其他`x.Log*`过程是这样的辅助过程：

```
ALTER PROCEDURE [dbo].[LogInt]
    @LogIndent int = 0,
    @Num int,
    @Prefix nvarchar(max) = NULL,
    @Suffix nvarchar(max) = NULL
AS
BEGIN
    DECLARE @Result int = 0

    DECLARE @Msg nvarchar(max) = ISNULL(CAST(@Num as nvarchar(max)), 'NULL')

    EXEC @Result = Log @LogIndent = @LogIndent
                , @Str = @Prefix
                , @Str2 = @Msg

    RETURN @Result
END 
```

我希望这能帮到您。

# java - 究竟什么时候是二传手 被调用

> ID：11775879
> 
> 赞同：1
> 
> 时间：2012-08-02T10:48:33.030
> 
> 标签：java, jsf, lifecycle, viewparams

我在我的 xhtml 页面上定义了一个**f:metadata**部分，如下所示，并带有一个**f:viewParam**，如下面的摘录所示：

```
<html xmlns="http://www.w3.org/1999/xhtml" (...)>

<f:metadata>
    <f:viewParam name="cust-id" value="#{CustomerCEVController.customer}" 
        converter="#{customerConverter}" converterMessage="blah blah."
        required="false"
    />
</f:metadata>

    <ui:composition template="/templates/commonLayout.xhtml">
        <ui:define name="title">
        (...)
        <ui:define name="body">
        (...) 
```

.. 并为*cust-id*参数声明了一个 CustomerConverter 类。属性*cust-id*的转换器类**getAsObject**方法和支持 bean*客户*字段的 getter 方法都在**PROCESS VALIDATIONS** JSF 生命周期阶段调用，然后在**UPDATE MODEL VALUES**生命周期中调用*客户*字段的 setter 方法**之前**调用。循环阶段。结果，在调用 getter 时，转换器未正确初始化该字段。所以顺序是这样的（其中 CustomerCEVController 是支持 bean 类）：

 *********[**过程验证阶段开始** ]
[CustomerConverter#getAsObject 调用]
[CustomerCEVController#getCustomer 调用]
[**过程验证阶段结束** ]
[**更新模型值开始** ]
[CustomerCEVController#setCustomer 调用]

我根据日志输出的散布和我注册的生命周期侦听器报告序列。我是否遗漏了什么，如果没有，我如何确保转换器在访问之前正确设置了客户字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T10:54:35.140

顺序绝对没问题。我不明白为什么这对你来说是个问题。也许您在 getter 或 setter 中做一些业务工作，而它根本不属于这些方法？您需要一个`<f:event type="preRenderView">`代替来执行该业务工作。

在验证阶段结束时调用 getter，因为此时将决定是否发布[`ValueChangeEvent`](http://docs.oracle.com/javaee/6/api/javax/faces/event/ValueChangeEvent.html)。为此，需要初始（“旧”）值，然后将其与提交/转换/验证（“新”）值进行比较。当这些值不相等时，两者都将作为已发布的“旧”和“新”值传递`ValueChangeEvent`。*********

# sql - 特定时期的周计算

> ID：11775881
> 
> 赞同：0
> 
> 时间：2012-08-02T10:48:44.373
> 
> 标签：sql, sql-server

假设会计年度从 7 月/1 日到 6 月/30 日。

我必须计算周数。相应地在 SQL Server 2005 中。

请建议！

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:58:39.393

试试这个并根据自己的需要使用变量@dt：

```
DECLARE @dt DATETIME = GETDATE()
SELECT WeekOfMonth = DATEPART(wk, @dt) - DATEPART(wk,DATEADD(m, DATEDIFF(M, 0, @dt), 0)) + 1 
```

编辑：我的错，因为我错误地理解了这个问题，我的解决方案返回一个月的一周，而不是一年。

使用@Dems 答案的一部分并在此处更改我的答案是一个完整的工作测试，该测试基于临时表上可用的日期和财政年度的开始输出 3 列 WeekOfMonth、WeekOfYear 和 WeekOfFIscalYear。但我想对于一家特定的公司来说，一个财政年度的开始总是一样的。我只是添加了不同的日期和年份进行测试。

```
DECLARE @TT TABLE (auxVal       INT,
                   auxdate      DATETIME,
                   fiscal_year  DATETIME
                )

INSERT @TT 
SELECT 100,'19120101 00:00:00','19120701' UNION ALL
SELECT 200,'18120615 00:00:00','18110701' UNION ALL
SELECT 100,'20121121 00:00:00','20120701' UNION ALL
SELECT 200,'20120101 00:00:00','20110701' UNION ALL
SELECT 100,'20150802 00:00:00','20140701' UNION ALL
SELECT 200,'20120330 00:00:00','20110701' UNION ALL
SELECT 322,'20110228 00:00:00','20100701'

SELECT DATEDIFF(week, DATEADD(MONTH, DATEDIFF(MONTH, 0, auxDate), 0), auxDate) + 1 WeekOfMonth,
       DATEPART( wk, auxDate) WeekOfYear,
       DATEDIFF(DAY, (DATEADD(YEAR, DATEDIFF(YEAR, fiscal_year, DATEADD(MONTH, -7, auxDate)), fiscal_year)), auxDate) / 7 + 1  WeekOfFiscalYear
  FROM @TT 
```

结果：

```
WeekOfMonth   WeekOfYear   WeekOfFiscalYear
-------------------------------------------
      1            1             27
      3            25            51
      4            47            21
      1            1             27
      2            32            5
      5            13            40
      5            10            35
------------------------------------------- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:54:11.377

如果您财政年度的第一周始终是 7 月 1 日至 7 月 7 日...

```
DECLARE
  @inputDate    DATETIME,
  @fYearStart   DATETIME,
  @weekNumber   INT
SET
  @inputDate    = getDate()
SET
  @fYearStart   = DATEADD(year, DATEDIFF(year, '20000101', DATEADD(month, -7, @inputDate)), '20000701')
SET
  @weekNumber   = DATEDIFF(day, @fYearStart, @inputDate) / 7 + 1 
```

如果你的财务周总是周日到周六...

```
DECLARE
  @inputDate    DATETIME,
  @fYearStart   DATETIME,
  @weekNumber   INT
SET
  @inputDate    = getDate()
SET
  @fYearStart   = DATEADD(year, DATEDIFF(year, '20000101', DATEADD(month, -7, @inputDate)), '20000701')
SET
  @weekNumber   = DATEDIFF(WEEK, @fYearStart, @inputDate) 
```

其中一项或多项应适用于*您*对`week number`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-02T04:16:02.537

无需创建表。只需将 @date 替换为您的列日期名称

```
declare @date datetime
set     @date = '12/8/2016 00:00:00'

select  case when datepart(month,@date) > 6 then 

            case when CEILING(datediff(day,'6/30/' + cast(datepart(year,@date) as nvarchar(4)),@date) / 7.0) > 52
            then 52 else CEILING(datediff(day,'6/30/' + cast(datepart(year,@date) as nvarchar(4)),@date) / 7.0) end

        else
            case when CEILING(datediff(day,'6/30/' + cast(datepart(year,@date)-1 as nvarchar(4)),@date) / 7.0) > 52
            then 52 else CEILING(datediff(day,'6/30/' + cast(datepart(year,@date)-1 as nvarchar(4)),@date) / 7.0) end
        end WorkWeek 
```

[根据会计年度计算周数](http://rmchio.blogspot.com/2016/08/compute-week-number-per-fiscal-year.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-26T03:45:17.260

这个对我有用：

```
SELECT dt AS DayDate,
CONVERT(VARCHAR,DATENAME(weekday,dt)) AS [DayOfWk],
CONVERT(int,CONVERT(VARCHAR,DATEPART(yyyy,dt)) + RIGHT('00' + CONVERT(VARCHAR,DATEPART(wk,dt)),2)) AS [WeekID],
'Week ' + CONVERT(VARCHAR,DATEPART(wk,dt))AS [WeekDsc],
DATEPART(wk,dt) AS [WeekNbr],
DATEADD(dd, -(DATEPART(dw, dt)-1), dt) AS [WeekStartDay],
DATEADD(dd, 7-(DATEPART(dw, dt)), dt) AS [WeekEndDay],
CONVERT(VARCHAR,CASE WHEN DATEPART(mm,dt) > 6 THEN DATEPART(yyyy,dt) + 1 ELSE DATEPART(yyyy,dt) END) + RIGHT('00'+ CONVERT(VARCHAR,DATEDIFF(week,DATEADD(dd, 7-(DATEPART(dw, CASE WHEN DATEPART(mm,dt) > 6 THEN CONVERT(VARCHAR,DATEPART(yyyy,dt)) + '-07-01' ELSE CONVERT(VARCHAR,DATEPART(yyyy,dt) - 1) + '-07-01' END)), CASE WHEN DATEPART(mm,dt) > 6 THEN CONVERT(VARCHAR,DATEPART(yyyy,dt)) + '-07-01' ELSE CONVERT(VARCHAR,DATEPART(yyyy,dt) - 1) + '-07-01' END) + 1,DATEADD(dd, -(DATEPART(dw, dt)-1), dt)) + 2) ,2) AS [FinWkID]
FROM 
(
    SELECT DATEADD(day,increment,'2014-01-01') dt
    FROM
    (
        SELECT top 5000 ROW_NUMBER() OVER (ORDER BY s1.[object_id]) - 1 AS increment
        FROM sys.all_objects AS s1
        CROSS JOIN sys.all_objects AS s2
        ORDER BY s1.[object_id]
    ) SQ
) DATE_GENERATOR 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-02T10:53:47.213

```
try this

    select DATEPART(week,getdate())-DATEPART(week,'07-01-2012')

To get the week number starting from July 1st 2012 
```

# file - Nodejs 文件权限

> ID：11775884
> 
> 赞同：21
> 
> 时间：2012-08-02T10:48:56.493
> 
> 标签：file, node.js, file-permissions

在Node中该`fs.stat`方法返回一个`fs.Stats`对象权限，我可以通过该`fs.Stats.mode`属性获取文件权限。

这是同一目录的节点和外壳程序的真实输出：

```
node  shell
17407 d rwx rwx rwt
16877 d rwx r-x r-x
16749 d r-x r-x r-x
16832 d rwx --- --- 
```

我需要知道如何解析`fs.Stats.mode`数字以获取权限。

# 回答

该数字采用八进制数字系统，转换为十进制后如下所示：

```
17407 41777 d rwx rwx rwt
16877 40755 d rwx r-x r-x
16749 40555 d r-x r-x r-x
16832 40777 d rwx --- --- 
```

而八进制到十进制的转换是这样的：

```
parseInt(stat.mode.toString(8), 10) 
```

关于 linux 中文件权限的精彩教程 - [https://www.linux.com/learn/understanding-linux-file-permissions](https://www.linux.com/learn/understanding-linux-file-permissions)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-02T16:00:32.443

```
var checkPermission = function (file, mask, cb){
    fs.stat (file, function (error, stats){
        if (error){
            cb (error, false);
        }else{
            cb (null, !!(mask & parseInt ((stats.mode & parseInt ("777", 8)).toString (8)[0])));
        }
    });
}; 
```

**可以执行（）**：

```
checkPermission (<path>, 1, cb); 
```

**可以读取（）**：

```
checkPermission (<path>, 4, cb); 
```

**可以写（）**：

```
checkPermission (<path>, 2, cb); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T11:33:14.023

数字格式取决于平台，因此您不能可靠。

当 NodeJs 开始公开底层`S_ISDIR`函数`S_IRUSR`和类似的常量时，你就可以了。

关于 stat 格式的一些信息：http: [//linux.die.net/man/2/stat](http://linux.die.net/man/2/stat)

# c# - 如何使用 Watin 单击最后一个单选按钮

> ID：11775886
> 
> 赞同：0
> 
> 时间：2012-08-02T10:49:04.190
> 
> 标签：c#, watin

我使用 Watin 进行自动化工作，它对我来说效果很好。今天，我遇到了一个问题并且不知道它：

我想单击页面中的最后一个单选框。并且所有具有“radio”类型的“input”元素具有相同的“name”和“id”，如下所示。

```
<input name="rd_addr_id" id="rd_new_addr" type="radio" value="-1"/> 
```

我怎样才能得到约束？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:45:25.657

您是否尝试过多个 Find.By 子句，例如：

```
ie.RadioButton(Find.ByName("rd_addr_id") && Find.ById("rd_new_addr") 
    && Find.ByValue("-1")).Click(); 
```

希望能帮助到你

# jquery - 一个接一个地显示元素

> ID：11775893
> 
> 赞同：1
> 
> 时间：2012-08-02T10:49:34.343
> 
> 标签：jquery

我试图一个接一个地显示元素...例如，如果一个 div 中有 10 个元素，我想一个接一个地显示。但一次只有一个项目。我已经编写了下面的代码，但它没有按预期工作..

```
 function fades(c) {
            var x = c;
            c.fadeIn(3000, function () {
                if (c.is('last-child')) {
                    c.fadeOut(3000);
                    fades(c);
                }
                else {
                    c.fadeOut(3000);
                    fades(c.next());
                }
            });
  } 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T11:09:07.497

**HTML**

```
<div id="fades">
    <div>Hello #1</div>
    <div>Hello #2</div>
    <div>Hello #3</div>
    <div>Hello #4</div>
    <div>Hello #5</div>
    <div>Hello #6</div>
    <div>Hello #7</div>
    <div>Hello #8</div>
    <div>Hello #9</div>
    <div>Hello #10</div>
</div> 
```

**JavaScript**

```
// First hide them all
$("#fades div").hide();

function fades($div, cb) {
    $div.fadeIn(100, function () {
        $div.fadeOut(100, function () {
            var $next = $div.next();
            if ($next.length > 0) {
                fades($next, cb);
            }
            else {
                // The last element has faded away, call the callback
                cb();
            }
        });
    });
}

function startFading($firstDiv) {
    fades($firstDiv, function () {
        startFading($firstDiv);
    });
}

startFading($("#fades div:first-child")); 
```

这是一个小提琴：http: [//jsfiddle.net/VesQ/chw3f/5/](http://jsfiddle.net/VesQ/chw3f/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:52:44.620

试试这个..

尝试使用回调函数。操作完成时执行回调函数。

```
function fades(c) {
            var x = c;
            c.fadeIn(3000, function () {
                if (c.is('last-child')) {
                    c.fadeOut(3000, function() {
                         fades(c);
                    });

                }
                else {
                    c.fadeOut(3000, function() {
                         fades(c.next());
                    });
                }
            });
  } 
```

# magento - Fishpig Wordpress Magento

> ID：11775896
> 
> 赞同：0
> 
> 时间：2012-08-02T10:49:36.350
> 
> 标签：magento, magento-1.7, fishpig

如何在fishpig wordpress magento集成中获取当前博客类别页面的类别名称和类别ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T10:59:18.293

您可以按如下方式检索当前加载的类别：

```
<?php $category = Mage::registry('wordpress_category') ?>
<?php if ($category): ?>
    <?php echo $category->getId() ?>: <?php echo $category->getName() ?>
<?php endif; ?> 
```

# jquery - getJSON 回调未在 IE9 中执行

> ID：11775901
> 
> 赞同：0
> 
> 时间：2012-08-02T10:50:03.067
> 
> 标签：jquery, internet-explorer, internet-explorer-9, getjson

jQuery getJSON 中的回调函数在 Internet Explorer 9 中永远不会被调用，尽管请求的文件已成功加载（我已在“网络”选项卡中检查过）。

```
var user = 1;

$.ajaxSetup ({
    cache: false
});

var fileUrl = "/path/to/file.php";

var fetchQuestions = function(kanji)
{    
    alert('this fires');
    $.getJSON(
        fileUrl,
        {action: "get-q", kanji: kanji, user: user},
        function(json)
        {
            alert('this does not fire');
            questions = json;
            currentItem = json.info.kanji;
            showStart(json.info);
        }
    );
}; 
```

*   返回的数据是有效的 json
*   它在所有其他浏览器中都能正常工作
*   请求的文件确实加载了 200 OK 和 Content-Type application/json
*   文件中的任何地方都没有 console.log() 调用
*   控制台中没有错误（在 IE9 或任何其他浏览器中）

有任何想法吗？

这是返回的 JSON：

```
{"info": {
                "kanji": "線",
                "meanings": "line",
                "desc": "",
                "words": [{"audio":"/jp/files/audio/words/線_せん","kanji":"線","en":"line","jp":"せん"},{"audio":"/jp/files/audio/words/地平線_ちへいせん","kanji":"地平線","en":"horizon","jp":"ちへいせん"},{"audio":"","kanji":"内線","en":"phone extension, indoor wiring, inner line","jp":"ないせん"},{"audio":"","kanji":"直線","en":"straight line","jp":"ちょくせん"},{"audio":"","kanji":"脱線","en":"derailment, digression","jp":"だっせん"},{"audio":"","kanji":"線路","en":"line, track, roadbed","jp":"せんろ"},{"audio":"","kanji":"水平線","en":"horizon","jp":"すいへいせん"},{"audio":"","kanji":"新幹線","en":"shinkansen","jp":"しん・かん・せん"}]
            },
"spots": [{"kanji":"\u5c71","rand_ind":"32"},{"kanji":"\u68ee","rand_ind":"47"},{"kanji":"\u5225","rand_ind":"76"},{"kanji":"\u98ef","rand_ind":"127"},{"kanji":"\u98f2","rand_ind":"175"},{"kanji":"\u9b5a","rand_ind":"203"},{"kanji":"\u5354","rand_ind":"252"},{"kanji":"\u9752","rand_ind":"265"},{"kanji":"\u9032","rand_ind":"302"},{"kanji":"\u805e","rand_ind":"310"},{"kanji":"\u8a08","rand_ind":"311"},{"kanji":"\u4ea4","rand_ind":"362"},{"kanji":"\u4f1a","rand_ind":"367"},{"kanji":"\u53d7","rand_ind":"404"},{"kanji":"\u5973","rand_ind":"463"},{"kanji":"\u90e8","rand_ind":"469"},{"kanji":"\u4e16","rand_ind":"476"}],
"known": "月,後,前,生,?"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:08:55.760

json_encode 对返回的 JSON 的“已知”部分进行编码解决了这个问题！看起来 IE 对 unicode 字符有一些问题。

# c# - 如何合并 Generic.Collection.List 和 Generic.Collection.Dictionary

> ID：11775905
> 
> 赞同：1
> 
> 时间：2012-08-02T10:50:18.727
> 
> 标签：c#, linq, list, dictionary, lambda

我有一个 Generic.Collection.List 和 Generic.Collection.Dictionary 之类的

```
List<String> MyList
Dictionary<String, List<String>> MyDictionary 
```

我需要`MyDictionary`根据`MyList`ie`MyList`中`value`的 `MyDictionary`整数`MyFilteredDictionary`过滤

```
Dictionary<String, List<String>> MyFilteredDictionary 
```

现在我通过使用``for-foreach`循环来做到这一点，比如

```
for (int l_nIndex = 0; l_nIndex < MyList.Count; l_nIndex++)
  {
    foreach (KeyValuePair<String, List<String>> l_objKeyValuePair in MyDictionary)
      {
         if (l_objKeyValuePair.Value.Contains(MyList[l_nIndex]) == true)
           {
             MyFilteredDictionary.Add(l_objKeyValuePair.Key, l_objKeyValuePair.Value);
             break;
            }
       }
  } 
```

如何使用 `Lambda 表达式做同样的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T11:00:21.603

```
var res = MyDictionary.Where(kvp => MyList.Any(item => kvp.Value.Contains(item)))
                      .ToDictionary(kvp => kvp.Key, kvp => kvp.Value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:52:41.407

我不完全确定你想要什么，但这将根据另一个字典中的项目创建一个过滤的项目字典，该字典在列表中有键......

```
 MyFilteredDictionary = MyList
        .Where(MyDictionary.ContainsKey)
        .ToDictionary(item => item, item => MyDictionary[item]); 
```

# facebook-graph-api - FQL - 如何检索在特定日期/以上添加的朋友列表

> ID：11775907
> 
> 赞同：0
> 
> 时间：2012-08-02T10:50:24.550
> 
> 标签：facebook-graph-api, facebook-fql

是否可以在 FQL 中的特定日期/之上获取所有添加为好友的好友列表？

我能够检索朋友列表。但我需要更多信息，如“朋友添加日期”等......

请提供您的想法或解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:12:06.767

我尝试使用 FQL 来获取新添加的朋友。但没有成功。同样来自 CBroe 的评论说，无法使用 FQL 直接访问。

我通过使用**Stream** table解决了这个问题

```
SELECT post_id, viewer_id, app_id, source_id, updated_time, created_time, filter_key, attribution, actor_id, target_id, message, app_data, action_links, attachment, impressions, comments, likes, place, privacy, permalink, xid, tagged_ids, message_tags, description, description_tags, type FROM stream WHERE source_id  = me() and created_time > 1300904400 
```

响应 Json 是：

```
{
    "data": [
        {
.....
            "post_id": "10003422343219_2395933333495184",
            "viewer_id": 10034243333333519,
            "app_id": null,
            "tagged_ids": [],
            "message_tags": [],
            **"description": "Owner is now friends with Friend1 and Friend2.",**
            "description_tags": {
                "0": [
                    {
                        "id": 100003344233319,
                        "name": "Owner Name",
                        "offset": 0,
                        "length": 14,
                        "type": "user"
                    }
                ],
                "35": [
                    {
                        "id": 10000133333697,
                        "name": "Friend Name1",
                        "offset": 35,
                        "length": 10,
                        "type": "user"
                    }
                ],
                "50": [
                    {
                        "id": 10000444443615,
                        "name": "Frined Name2",
                        "offset": 50,
                        "length": 13,
                        "type": "user"
                    }
                ]
            },
            "type": null
        }
    ]
} 
```

通过使用描述消息，我们可以识别新创建的朋友。'description_tags' 由新添加的好友列表组成。

# java - 在 Java 中停止计时器事件

> ID：11775908
> 
> 赞同：0
> 
> 时间：2012-08-02T10:50:32.257
> 
> 标签：java, function, events, timer

我正在尝试在一个类中使用一个函数，该函数将启动和停止使用布尔值链接到 int 值的计时器。因此，例如，如果我启动了一个 int 为 0 的计时器，那么它就是 timer0，如果它是 3，那么就是 timer3，依此类推。

我遇到的问题是计时器似乎启动正常，但是当我向他们发送一个错误的布尔值来停止它们时，它们会继续运行，所以我需要知道如何正确停止它们。

在 Class.java 中的代码是：

```
public void Event(final int value, boolean run, int time){

    if(run){
        System.out.println(run);

        Timer timer = new Timer();

        timer.schedule( new TimerTask() {
            public void run() {
                // The needed code will go here
                System.out.println(value + " Event run");
            }
         }, 0, time); // Every second
    } else {
    }

} 
```

然后对于我的 Main.java 代码是：

```
System.out.println("Start Timer 0 Event");
r.Event(0, true, 1000);

System.out.println("Start Timer 1 Event");
r.Event(1, true, 250);

System.out.println("Start Timer 2 Event");
r.Event(2, true, 250);

r.Event(0, false, 1000); // Not Working as i need
System.out.println("Stop Timer 0 Event"); 
```

基本上我只想让一组事件在每设定的时间内重复一次，直到我停止它们，并且可能有很多一起运行。如果计时器不是执行此操作的最佳方式，那么替代方案会很好，但它需要以与描述相同的方式工作。

* * *

根据要求，这里是我的计时器的可运行代码。

MyClass.java：

```
package com.z;

import java.awt.*;
import java.util.*;
import java.util.TimerTask;

public class MyClass {

////////////////////////////////////////////////////////////
//Name: Event (BROKEN)
////////////////////////////////////////////////////////////
public void Event(final int value, boolean run, int time){

    Timer timer = new Timer("" + value, true);

    if(run){
        System.out.println(run);

        timer.schedule( new TimerTask() {
            public void run() {
                // Code here
                System.out.println(value + " Event run");
            }
         }, 0, time); // Every second
    } 

    if (!run) {
        timer.cancel();
    }
}

} 
```

例子.java：

```
package com.z;

import java.awt.*;
import java.awt.event.*;

public class Example {

    public static void main(String[] args) {

    MyClass r = new MyClass();

    ////////////////////////////////////////////////////////////
    // Event (BROKEN)
    ////////////////////////////////////////////////////////////
    System.out.println("Start Timer 0 Event");
    r.Event(0, true, 1000);

    System.out.println("Start Timer 1 Event");
    r.Event(1, true, 250);

    r.Event(0, false, 1000);
    System.out.println("Stop Timer 0 Event");

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:46:01.893

`timer.schedule`需要 3 个 args的方法会重复执行，因此如果 run 为 true，则计时器将开始执行任务。

如果要停止计时器，可以随时调用`timer.cancel`，但需要在`Event`方法外保存对计时器的引用。

阅读`Timer`javadocs 应该会有所帮助[http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)

编辑：这是一个如何工作的例子

```
Timer startTimer(final int value, final long time) {
   Timer timer = new Timer("Timer" + value);
   timer.schedule( new TimerTask() {
            public void run() {
                // Code here
                System.out.println(value + " Event run");
            }
         }, 0, time); // Every second
   return timer;
}

Timer t0 = startTimer(0,1000);
Timer t1 = startTimer(1,1000);

// stop t0
t0.cancel(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T11:57:25.747

另一个解决方案是不使用 Timer，因为每个计时器都是单个线程，并且它的运行是资源消耗。您可以创建一个检查任务队列的线程。可以使用周期参数来安排任务。调度意味着将任务添加到队列中。并且主线程检查每个任务在队列中等待的时间是否超过了与其周期值相对应的时间。

```
 while (running) {
     Timer timer = timerQueue.poll();
     if (timer.nextExecutionTime < System.currentTimeMillis()) {
        timer.timerExpire();
     }
     else {
        // nextexecution time degismeden yeniden schedule edilir.
        reschedule(timer);
     }
  }// while 
```

在这个例子中，Timer 是我自己的持有 TimerListener 的类。启动 Timer 任务操作时写入 timerExpire 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T11:51:53.247

Timer 将在计划后运行 5 秒，并保持每 1 秒运行一次，直到调用 timer.cancel。

```
 Timer timer = new Timer();

    timer.schedule(new TimerTask(){

        @Override
        public void run() {
            System.out.println("Timer task");

        }

    }, 5000,1000); 
```

# php - 在php中将tiff图像动态转换为jpg

> ID：11775911
> 
> 赞同：0
> 
> 时间：2012-08-02T10:50:37.740
> 
> 标签：php, tiff, imagemagick-convert

如何使用 PHP**将 Tiff 图像动态转换**为 jpeg，Imagemagic .pls 帮助我是 php 编程新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:59:53.607

Imagemagick 使用“转换”功能来转换图像扩展名。举个例子

```
convert rose.jpg rose.png 
```

您必须通过 php 页面中的系统调用来调用此命令行方法，例如，

```
system('convert rose.jpg rose.png'); 
```

其他选项可用于目标/源位置、分辨率等。查看此链接了解更多详细信息[Imagemagick 转换命令](http://www.imagemagick.org/script/convert.php/)

# ruby - 正则表达式，如何精确匹配

> ID：11775912
> 
> 赞同：1
> 
> 时间：2012-08-02T10:50:40.430
> 
> 标签：ruby, regex

何能准确匹配 6 位或 8 位或 10 位数字？

```
"787876" =~ /^\d{6}$/ -> TRUE
"78787633" =~ /^\d{8}$/ -> TRUE
"7878733226" =~ /^\d{10}$/ -> TRUE
"7878736" =~ /^\d{6}$/ -> FALSE 
```

何为这些情况创建一个正则表达式。较短的形式：

```
"787876" =~ /^\d{6}$|^\d{8}$|^\d{10}$/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T10:53:44.017

使用这个正则表达式`^\d{6}(\d{2}){0,2}$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T11:07:32.720

另一种解决方案：`/^\d{10}|\d{8}|\d{6}$/`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T12:20:29.510

我能想到的最短形式是这样的：

```
/^(\d\d){3,5}$/ 
```

那是3到5对数字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T06:21:34.523

如果您正在处理大量数据，这可能是一个不错的选择，因为它没有括号来运行子匹配和存储子结果。

```
/^\d{2}{3,5}$/ 
```

恕我直言，编写正则表达式有两个原则：

1.  保持直观，当然可以发表评论，但越直观，出错的机会就越少；
2.  如果您不想执行子匹配，请尽量避免使用括号，因为子匹配的结果将分组到一个数组中，这会花费额外的空间。

# ruby-on-rails - Capybara ajax 比赛条件

> ID：11775913
> 
> 赞同：2
> 
> 时间：2012-08-02T10:50:42.000
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, tdd, capybara

我经常在 capybara 中遇到请求测试失败的问题，因为 capybara 在继续之前没有等待 ajax 事件完成。

谷歌似乎表明我应该为我的测试使用 :resynchronize 选项来解决这个问题。但它不起作用。

为了证明这是一个问题，可以通过在 ajax 调用之后放置一个 sleep 语句来修复失败的测试。这似乎是任何不好的做法，因为适当的延迟会根据运行测试的机器的速度而有所不同。并且选择一个适当大的值将严重减慢运行具有大量 ajax 操作的测试套件的速度。

下面是一个失败/通过测试的例子。单击保存之前的睡眠会影响 page.should have_content('custom item') 的传递/失败：

```
it "should be able create a new todo item", :js, :resynchronize, :focus do
  # Visit new action
  visit new_todo_list

  # Fill in the name
  fill_in "#name", "test list"

  # Click on add item to launch inline popup
  find('a.add-item').click
  within '#new_item' do
    fill_in 'todo_item_description', :with => 'custom item'
    # Run ajax action to add currrent item
    find('.btn').click
  end

  sleep(1)

  # Save
  find('a.save').click

  page.should have_content('test list')
  page.should have_content('custom item')

end 
```

这是水豚中的错误还是我做错了什么？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T12:19:22.190

不久前我遇到了这个问题，并使用这种方法来确定 ajax 请求何时完成：

```
wait_until do
  page.evaluate_script('$.active') == 0
end 
```

仍然很 hacky，但比使用`sleep`. 我从[这里](http://www.natontesting.com/2012/02/27/a-solution-to-ajax-errors-with-capybara-against-a-jquery-site/)得到的。我将它用于 Cucumber 功能，但它也应该在 rspec 请求规范中工作。

**更新（2013 年 6 月 19 日）**

`wait_until`在 2.0 版中已从 Capybara 中删除，请参阅：[Why wait_until was removed from Capybara](http://www.elabs.se/blog/53-why-wait_until-was-removed-from-capybara)以了解有关原因的详细信息。

无论如何，我已经遵循了其中一项建议并实施了它，仅针对这种情况（我认为这是合理的）：

```
def wait_until
  require "timeout"
  Timeout.timeout(Capybara.default_wait_time) do
    sleep(0.1) until value = yield
    value
  end
end 
```

# javascript - 示例 jsTree 代码不起作用

> ID：11775915
> 
> 赞同：1
> 
> 时间：2012-08-02T10:50:49.713
> 
> 标签：javascript, ajax, json, jstree

```
<!DOCTYPE html>    
<html>
<head>
<title>Demo</title>
<script type="text/javascript" src="../_lib/jquery.js"></script>
<script type="text/javascript" src="../_lib/jquery.cookie.js"></script>
<script type="text/javascript" src="../_lib/jquery.hotkeys.js"></script>
<script type="text/javascript" src="../jquery.jstree.js"></script>
<script type="text/javascript"">
    alert($().jquery);
    alert($().jstree._themes);

    $(function () {
        $("#tree").jstree({
            "json_data" : {
                "ajax" : {
                    "url" : "/home/antonio/tomcat/webapps/jstree/_docs/_json_data.json",
                    "data" : function (n) {
                        return { id : n.attr ? n.attr("id") : 0 };
                    }
                }
            },
        "plugins" : [ "themes", "json_data" ]
    });
});

</script>

</head>
<body>
    <h> Hello </h>
    <div id='tree'></div>

</body>
</html> 
```

好的，主要问题是示例代码不起作用。当我尝试显示此页面时，会出现加载树的动画，但它会永远挂起并且不显示任何内容。

jquery 的版本正确显示。以及下一个警报。

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:03:10.243

请使用适当的编辑器（并查看浏览器控制台..）。我将您的代码粘贴到 Netbeans 中（我也将它用于 Java），它已经向我展示了这些错字：

```
<script type="text/javascript"">
The double quote.

<h> Hello </h>
The invalid h tag. 
```

应该像

```
<script type="text/javascript">

<h1> Hello </h1> 
```

此外，你会想要添加 CSS，对吧..

我找到了一些 jquery.jstree.js，但它给了我一个错误，只是没有任何客户端代码。请通过 url 或 jsfiddle 示例提供示例的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:09:38.953

这是我为我的问题找到的解决方案。

```
<html>
<head>
<title>Demo</title>
<script type="text/javascript" src="../_lib/jquery.js"></script>
<script type="text/javascript" src="../_lib/jquery.cookie.js"></script>
<script type="text/javascript" src="../_lib/jquery.hotkeys.js"></script>
<script type="text/javascript" src="../jquery.jstree.js"></script>
<script type="text/javascript">
    alert($().jquery);
    alert($().jstree._themes);
    $(function () {
        $("#tree").jstree({
            "json_data" : {
                "ajax" : {
                    "url" : function (node) {
                        if (node == -1)
                        {
                            url = loadRoot();
                        }
                        else {
                            url = loadNode(node);  
                        }

                        return url;
                    },
                    "data" : function (n) {
                        return { id : n.attr ? n.attr("id") : 0 };
                    }
                }
            },
        "plugins" : [ "themes", "json_data" ]
    });
});

function loadRoot() {
    return "http://localhost:7777/jstree/_docs/_json_data_123.json";
}

function loadNode(node) {
    var nodeId = "";
    var url = "";

    nodeId = node.attr('id');

    //Call the function that will retrieve the information.
    // fetchData();

    url = "http://localhost:7777/jstree/_docs/_json_data_0"+nodeId+".json";  
    return url;                    
}

</script>

</head>
<body>
    <h1> Hello </h1>
    <div id='tree'></div>

</body>
</html> 
```

# javascript - 从多个选择框中隐藏选项

> ID：11775917
> 
> 赞同：2
> 
> 时间：2012-08-02T10:50:50.413
> 
> 标签：javascript, jquery, hide, multipleselection

我需要使用 Javascript 从多个选择框中隐藏某些选项。我不能使用 jQuery，我也不允许这样做。

我还有一个下拉框，我正在调用一个 js 函数，该函数将在值更改时调用。js 函数将控制另一个多选选项框的选项，我需要根据下拉框的值隐藏（而不是删除）选项。

任何简单的js函数？

[http://jsfiddle.net/zz3dg/](http://jsfiddle.net/zz3dg/)

编辑：试过

```
fastInternet.options[i].style.display = 'none';
fastInternet.options[i].style.visibility = 'hidden'; 
```

没用:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:58:04.917

**编辑：**

**新建议：**

怎么做`disable`

```
fastInternet.options[i].setAttribute("disabled", "disabled") 
```

然后使用以下 CSS 将其隐藏：

```
select option[disabled] {
    display: none; /* worked in firefox*/
    visibility: hidden; /* worked in chrome*/
} 
```

[**看演示**](http://jsfiddle.net/akhurshid/v3AWf/)

它可能会有所帮助！

**老建议：**

尝试使用

```
 fastInternet.remove(options[i]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T11:09:55.323

添加`display:none`对我有用。但我是通过css做到的。

已经建立了一个例子。[在这里](http://jsbin.com/ujezaf/3)检查

没有安装 chrome 来测试。但我想`visibility:hidden`应该可以。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T13:05:07.290

我尝试使用您的 jsFiddle 链接，但其中的一些内容阻止了该方法正常工作。

我做了一些修改，它运行良好：

html:

```
<select id="option_two" multiple>        
  <option value="VOIP">VOIP</option>         
  <option value="BDS">BDS</option>          
  <option value="DMW">DMW</option>          
  <option value="IDTV">IDTV</option>          
  <option value="P3TR">P3TR</option> 
</select> 
```

Javascript：

```
 var fastInternet = document.getElementById('option_two');

 for ( var i = 0; i < fastInternet.options.length; i++) {
     var value = fastInternet.options[i].value;

     if(value == 'IDTV' || value == 'P3TR'){
        fastInternet.options[i].style.visibility = 'hidden';
     }
 }​ 
```

在 JsFiddle 中，确保框架设置为 onLoad 和 No-Library(pure JS) 在 chrome 中它可以工作。但是我在 IE 中遇到了一些问题：/

# jquery - Flowplayer Rails 卡住了

> ID：11775918
> 
> 赞同：1
> 
> 时间：2012-08-02T10:50:54.597
> 
> 标签：jquery, ruby-on-rails, ruby, ruby-on-rails-3, flowplayer

我被一个使用播放 flv 文件的 flowplayer 的 Rails 应用程序困住了。我在[这里](https://github.com/scottdavis/flowplayer-gem)使用 flowplayer gem 。我按照说明进行操作，您必须在 jQuery 或 Prototype 之间进行选择的使用部分附带了一些代码。我不知道如何放置这段代码，因为我不知道它的语言。是 Ruby 代码吗？jQuery 代码？无论如何，有没有人尝试并成功地用这个播放 Flash 视频？如果有人能告诉我如何处理困扰我的那段代码，我将不胜感激。

提前致谢。

**更新：**

我用视图中的代码更新问题以缩小问题范围。

```
<a href="<%= url_for(:controller => "attachments", :action => "public_download", :id => @attachment)%>"
id='video' style='display:block;width:512px;height:312px;'>
  <%= flowplayer_for :video, 'flowplayer.swf' do |player|%>
      <%- player.playlist [{:url => "video_still.jpg" }, {:url => "#{Rails.root}/public#{@attachment.arxiu.url}", :autoPlay => false, :autoBuffering => true }] %>
        <%- player.onLoad do %>
            <%- 'this.unmute();' %>
        <% end %>
  <% end %>
</a> 
```

第一行是操作的 url。这意味着如果我点击视频，我会下载它。这个动作有效，它没有显示的是视频播放器。所以我可以把它缩小到来自 github 的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:32:16.930

I've opted for deleting the gem and doing it via script. Now it works perfectly. It seems the gem didn't find the plugin or the file, if you kwow a little javascript I recommend you to do it via script, you'll save a lot of pain.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:00:39.730

这是红宝石代码。虽然我没有使用 gem，但这段代码应该放在你希望 flowplayer javascript 标记出现的任何地方：

```
# params: container_element_id, player_path, library
flowplayer_for :video, '/flowplayer.swf', 'jquery' do |player| 
  player.playlist [{:url => "video_still.jpg" }, {:url => "video_512x288.flv", :autoPlay => false, :autoBuffering => true }]
  player.onLoad do 
    'this.unmute();'
  end
end 
```

该方法的来源在[这里](https://github.com/scottdavis/flowplayer-gem/blob/master/lib/flowplayer/railties/helper.rb)。

我的 2c 虽然是您不应该为此使用插件或 gem，但 flowplayer 很容易直接在您的布局和视图上实现，这样您就可以消除不必要的依赖。

# sql-server-2008 - 使用 asp net mvc3 和 sql server 企业版服务器构建应用程序

> ID：11775919
> 
> 赞同：0
> 
> 时间：2012-08-02T10:50:55.150
> 
> 标签：sql-server-2008, sql-server-2005, asp.net-mvc-3-areas

我需要构建一个使用 ASP NET MVC3 的应用程序并尝试连接到 SQL Server Enterprise Server。我能做到吗？因为我没有安装 SQL Server Compact Edition，而我的老板希望它使用 SQL Server Enterprise Edition。谢谢

# oracle - Oracle Timesten 源语言

> ID：11775920
> 
> 赞同：1
> 
> 时间：2012-08-02T10:51:01.833
> 
> 标签：oracle, timesten

任何人都知道 Oracle TimesTen 使用的源语言是什么？是 C++ 还是 Java？在任何地方都找不到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:39:15.227

看起来像是用纯 C 编写的 Timesten 二进制文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-13T06:28:24.270

Oracle TimesTen 二进制文件大部分是用 ANSI C 编写的，带有一点点 C++。

TimesTen 在 Linux、Windows、Solaris/Sparc、Solaris/x86、AIX 和 HP-UX 上运行。

# objective-c - ObjC 字符串/字符操作 + 解析

> ID：11775922
> 
> 赞同：1
> 
> 时间：2012-08-02T10:51:17.337
> 
> 标签：objective-c, parsing, nsstring, char

以下代码应该返回两个整数：val1 = 2 和 val2 = 5。

```
 NSString *col = @"1245DD";

    char c1 = [col characterAtIndex:1];
    char c2 = [col characterAtIndex:3];

    int val1 = [[[NSString alloc] initWithUTF8String:&c1] intValue];
    int val2 = [[[NSString alloc] initWithUTF8String:&c2] intValue]; 
```

在运行时检查值：

*   c1 = '2'

*   c2 = '5'

目前很好。

但是之后：

*   val1 = 2
*   val2 = 52

我不明白为什么 val2 总是最终成为 c2 和 c1 的串联。我错过了什么？谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:58:00.217

您正在创建一个`NSString`对象作为 UTF-8 字符串，这实际上是一个字符。如果你想像这样使用它，你需要 NUL 终止 UTF-8 字符串。

请注意，它`[NSString characterAtIndex:]`返回 a `unichar`，而不是 a `char`，因此请改用`[NSString initWithCharacters:length:]`您可以告诉方法要使用多少个字符的地方：

```
NSString col = @"1245DD";

unichar c1 = [col characterAtIndex:1];
unichar c2 = [col characterAtIndex:3];

int val1 = [[[NSString alloc] initWithCharacters:&c1 length:1] intValue];
int val2 = [[[NSString alloc] initWithCharacters:&c2 length:1] intValue]; 
```

# actionscript-3 - 在我的 AS3 预加载器中删除事件侦听器

> ID：11775923
> 
> 赞同：0
> 
> 时间：2012-08-02T10:51:25.000
> 
> 标签：actionscript-3, flash, preloader

到目前为止，我已经设法构建了一个简单的基于文本的预加载器，我可以在其中加载外部 SWF 文件。我有很多预构建的 SWF，从外部加载它们似乎是最好的选择。我已经设法让我的预加载器工作，但是我想在事件完成后删除我的事件侦听器和加载器子级。请有人看看我的代码并解释我做错了什么。

非常感谢您，

卢克

```
var req:URLRequest = new URLRequest("gallery.swf");
var loader:Loader = new Loader();
var finishLoading:Loader = new Loader();

finishLoading.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, done);
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, fileLoaded);
loader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, preload);
loader.load(req);

function fileLoaded(event:Event):void
{
        addChild(loader);
}

function preload(event:ProgressEvent):void
{
    var percent:Number = Math.round(event.bytesLoaded / event.bytesTotal * 100);           //this gives a percent of how much data has been loaded
    preload_txt.text = String(percent) + "%";
}

function done(event:ProgressEvent):void
{
    if(event.bytesLoaded >= event.bytesTotal){
        removeChild(loader); 
        loader = null;

        loader.contentLoaderInfo.removeEventListener(Event.COMPLETE, fileLoaded);
        loader.contentLoaderInfo.removeEventListener(ProgressEvent.PROGRESS, preload);
    }

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:04:36.827

您在删除事件侦听器之前垃圾收集了加载程序..将其反转。

```
if(event.bytesLoaded >= event.bytesTotal){
  loader.contentLoaderInfo.removeEventListener(Event.COMPLETE, fileLoaded);
  loader.contentLoaderInfo.removeEventListener(ProgressEvent.PROGRESS, preload);
  removeChild(loader); 
  loader = null;
} 
```

# regex - 从读取文件的数组中删除 C/C++、多行注释

> ID：11775924
> 
> 赞同：-1
> 
> 时间：2012-08-02T10:51:34.263
> 
> 标签：regex, perl

我已将 C/C++ 程序文件读入数组，现在我想从数组中删除所有注释`C`或`C++`样式，包括`multiline`commnts。如何使用数组来做到这一点。

这就是我将文件读入数组的方式。

```
open( FILE, $fname ) or die "Can't open $fname: $!";
my @lines = <FILE>;
close(FILE); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:10:05.453

It's explain in [perlfaq6:How-do-I-use-a-regular-expression-to-strip-C-style-comments-from-a-file](http://perldoc.perl.org/perlfaq6.html#How-do-I-use-a-regular-expression-to-strip-C-style-comments-from-a-file?)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:03:37.947

请参考`Mastering Regular Expression 3rd chapter 6`，您将获得最佳解决方案。

# asp.net - ASP.NET MySql Membership 将数据库移动到新机器问题

> ID：11775926
> 
> 赞同：0
> 
> 时间：2012-08-02T10:51:43.140
> 
> 标签：asp.net, .net, mysql

我正在尝试将旧的 ASP.NET 应用程序移动到新服务器。

该应用程序是使用 mysql 成员资格/角色提供者设置的。

我可以进入新服务器上的登录页面（使用 ASP.NET 登录组件），但我无法通过登录屏幕。第一次输入凭据时，我会返回登录页面而没有任何消息。如果我使用相同的详细信息再次尝试，我会得到“登录失败”。

成员资格表确实记录了成功的登录。

在我的开发环境中，如果将 web.config 更改为指向旧的 MySql 服务器，它可以正常工作。将它指向新数据库，我得到了问题。

是否在某处使用了任何 MySql 服务器特定的键/值？

我意识到这些是相当旧的版本但是 -

*   使用 MySql 连接器 5.2.7.0
*   当前数据库：5.1.49 社区
*   新数据库：5.1.63 社区
*   .NET 核心 3.5.0

web.config 成员资格：

```
<add connectionStringName="golfmannenConnectionString" enablePasswordRetrieval="true"
             autogenerateschema="true"
             enablePasswordReset="true" requiresQuestionAndAnswer="false"
             applicationName="/GM2008" requiresUniqueEmail="false" passwordFormat="Clear"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="1" minRequiredNonalphanumericCharacters="0"
             passwordAttemptWindow="10" passwordStrengthRegularExpression="" name="MySQLMembershipProvider" writeExceptionsToEventLog="true"
             type="MySql.Web.Security.MySQLMembershipProvider, MySql.Web, Version=5.2.7.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d"/> 
```

验证：

```
<authentication mode="Forms">
   <forms name=".gmLOGINcookie" loginUrl="~/FormsPublic/Login.aspx"
    defaultUrl="~/Forms/Home/Default.aspx" />
  </authentication> 
```

我真的不知道该往哪里看。有人帮忙吗？谢谢乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:26:43.133

您是否使用加密密码？这使用来自该机器的值来散列创建的密码。

# varnish - 是否可以 cronjob 清漆配置？

> ID：11775927
> 
> 赞同：1
> 
> 时间：2012-08-02T10:51:43.670
> 
> 标签：varnish, varnish-vcl

我在三个 http 服务器前运行清漆。由于其中一个服务器每天早上都安排了要执行的作业，并且这些作业确实是 CPU 密集型的，因此我创建了一个不同的配置，以便将传入流量轮询到其他 2 个 http 服务器。手动操作就像一个魅力，

```
varnish> vcl.list
200        
available     239 boot
active          0 morning

varnish> vcl.use morning
200 
```

我想知道是否有一种方法可以编写此脚本并使用另一个 cron 作业将其恢复为启动。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:34:33.003

是的，您可以使用 varnishadm 实用程序来做到这一点。例如：

```
varnishadm -T localhost:6082 -S /etc/varnish/secret vcl.use morning 
```

# python - Reliance 宽带自动登录脚本 - 在 Windows 上运行时出现语法错误

> ID：11775930
> 
> 赞同：0
> 
> 时间：2012-08-02T10:51:45.547
> 
> 标签：python, shell, ssh, autologin

我正在使用 Reliance Broadband，它具有基于 Web 的登录方式来访问互联网。它每 24 小时注销一次，所以我必须重新登录。

我遇到了一个[PYTHON 脚本](https://github.com/zyxware/reliance-auto-login-script)，它不断检查连接并保持连接有效。

不知何故，当我在安装最新的 Python 版本后在 Windows 上运行它时，出现以下语法错误。

```
C:\Documents and Settings\CS\Desktop>reliance-login.py

  File "C:\Documents and Settings\CS\Desktop\reliance-login.py", line 48
    if debug: print "Testing"
                            ^
SyntaxError: invalid syntax 
```

谁能检查一下，让我知道到底是什么问题？

=====

感谢 sr2222，我尝试了 2to3，删除所有 + n - 后...我仍然遇到一些错误。

以下是 2to3 之后的脚本。请您在您的机器上运行它n 帮助修复错误。

```
 #!/usr/bin/env python
            # encoding: utf-8
            """
            # Reliance Login Script for Python 2.x v1.0
            #
            # Copyright (c) 2009 Kunal Dua, http://www.kunaldua.com/blog/?p=330
            # Copyright (c) 2012 Anoop John, http://www.zyxware.com
            #
            # This program is free software; you can redistribute it and/or modify
            # it under the terms of the GNU General Public License as published by
            # the Free Software Foundation; version 2 of the License.
            #
            # This program is distributed in the hope that it will be useful,
            # but WITHOUT ANY WARRANTY; without even the implied warranty of
            # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
            # GNU General Public License for more details.
            """

            import urllib.request, urllib.error, urllib.parse, urllib, http.cookiejar, time, re, sys

            username = 'username'
            password = 'password'
                 req_headers = {
                     'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; U; ru; rv:5.0.1.6) Gecko/20110501 Firefox/5.0.1 Firefox/5.0.1'
                 }
            request = urllib.request.Request(url, headers=req_headers)
                 if not opener:
                    jar = http.cookiejar.FileCookieJar("cookies")
                    opener = urllib.request.build_opener(urllib2.HTTPCookieProcessor(jar))
                 response = opener.open(request, data)
                 code = response.code
                 headers = response.headers

             def is_internet_on():
                 '''test if the machine is connected to the internet'''
                if debug: print("Testing")
                 try:
                     code, headers, html, opener = get_url('http://74.125.113.99', timeout=10)
                    if debug: print(html)
                     if re.search('google.com', html):
                         return True
                     else:
                         return False
                 except:
                    if debug: print("Error")
                     return False
                 return False

             def internet_connect():
                 '''try to connect to the internet'''
                 code, headers, html, cur_opener = get_url("http://10.239.89.15/reliance/startportal_isg.do", timeout=10)
                if debug: print(html)
                login_data = urllib.parse.urlencode({'userId' : username, 'password' : password, 'action' : 'doLoginSubmit'})
                 code, headers, html, cur_opener = get_url('http://10.239.89.15/reliance/login.do', data=login_data, opener=cur_opener)
                if debug: print(html)

             def internet_disconnect():
                 '''try to disconnect from the internet'''
                 code, headers, html, cur_opener = get_url('http://10.239.89.15/reliance/login.do', timeout=10)
                if debug: print(html)
                 code, headers, html, cur_opener = get_url('http://10.239.89.15/reliance/logout.do', opener=cur_opener)
                if debug: print(html)

             def internet_keep_alive():
                 '''login and keep the connection live'''
                 while True:
                     if not is_internet_on():
                         internet_connect()
                        if debug: print("Not connected")
                     else:
                        if debug: print("Connected")
                         pass
                     time.sleep(check_interval)

             def print_usage():
                print("Reliance Netconnect AutoLogin")
                print("-----------------------------")
                print("usage:" + sys.argv[0] + " [login|logout]\n")
                print("If there are no arguments it runs in an infinite loop and will try to remain connected to the internet.")

             keep_alive = True
             if (len(sys.argv) > 1): 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:56:56.443

你下载的是 Python 2 还是 Python 3？那是 Python 2.X 打印语法，如果你有 Python 3 解释器，你会看到那个错误。该脚本可能是用 Python 2.X 编写的。您可以下载不同的解释器或在您的保持活动脚本的源上运行 2to3.py 脚本，以使其在 Python 3 下工作。

另外，哇，还有 ISP 仍然这样做吗？对不起，你被困住了。

# python - 查找位数组的最长前缀

> ID：11775932
> 
> 赞同：6
> 
> 时间：2012-08-02T10:51:52.240
> 
> 标签：python, algorithm, binary, bit-manipulation

我正在尝试找到一种快速算法来搜索多个位数组的最长前缀。在我的应用程序中，这些位数组可以无限长且长度可变。例如，如果我有这些位数组：

```
0b1011001
0b1001101
0b1001010
0b1010100 
```

最长的前缀是 10。我目前正在对位数组进行 ORing 和 NAND 运算，以找到它们共同的 0 和 1，并将结果一起 XOR。

```
OR
0b1011111

NAND
0b0111111

XOR
0b1100000 
```

有没有更快的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T07:56:48.173

### 关于你的方法

它在位数组的数量上可以很好地缩放（线性）。

它不能很好地根据位数组的大小进行缩放，理想情况下，它应该根据公共前缀的长度而不是位数组的大小进行缩放。

### 在低水平

对位数组中单个字节/字的位操作应该比一次一个地沿着位走快得多。（但不确定 Python 可以为您提供多少低级控制）。

### 第一个建议

如果这是像 C 这样的低级语言，我会以与您类似的方式解决这个问题，但会从其他答案中获得一些想法。

在我的示例中，我将假设计算机是 64 位机器。

我从（OR NAND XOR）每个位数组的前 64 位开始，（这些是 64 位机器上的基本操作，复杂度仅为 O(# of arrays)）。

然后快速找到结果中第一个设置位的位置，（大多数计算机都有一些内置的快速方法，或者至少在优化的汇编代码中，[对于 C](https://stackoverflow.com/questions/2589096/find-most-significant-bit-left-most-that-is-set-in-a-bit-array)，如果有设置位，则返回该值。

否则，在每个位数组的接下来的 64-127 位上重复。

（您将需要以某种方式处理不同长度的位数组，可能通过找到该组的最小长度位数组，然后将其用作最大值。）

这种方法的好处是它在位数组的数量上是线性的，并且是公共前缀的长度是线性的。

### 第二个建议

如果有**大**的位数组，您可以通过使用并行来获得加速。

首先，您可以在运行 NAND 的同时运行 OR。

有了更多的独创性，您可以应用以下内容：

如果我有 4 位数组 A、B、C、D

而不是 (((A OR B) OR C) OR D)

我可以做（A 或 B）或（C 或 D）。

在这两种情况下，都会执行相同数量的 OR。

但是第二种方法可以有效地并行化（实际上第二种方法在单核机器上可能更快，因为通常CPU实际上会有多个ALU。）

写出逻辑有点棘手，因为您不能使用单个 for 循环和单个临时变量来保存 OR 的结果。

您可以想象将子结果存储在一个长度为位数组数量一半的数组中。将 A OR B 的子结果存储在 array[0] 中，将 C OR D 的子结果存储在 array[1] 中，然后执行 array[0] OR array[1]。（并且您可以将该结果存储在一个长度为一半的新数组中，或者覆盖数组中的值以节省空间和内存分配）。

将工作划分为足够大的块，以使整个计算机保持忙碌而不会引入太多开销。

使用足够多的处理器，您可以接近位阵列数量的对数的复杂性，而不是线性的。但在实践中，在 6 核机器上获得 5 倍的加速可能会相当不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:55:17.307

您不需要对所有阵列进行 ORing 或 NAND 运算（这将非常昂贵，因为它们的长度是任意的）。当您发现第一个 mismatch 时，您可以**从左到右停止扫描阵列**。这将是**O(kn)**，其中*n*是数组的数量，*k*是公共前缀的长度。

我的 python 很糟糕，所以我将只给出一个非常简单的示例，其中包含 2 个固定相等长度的数组，**以便清楚地说明**：

```
a = [1,0,1,1,0,0,1]
b = [1,0,1,1,0,1,1]

for x in xrange(0,7):
    if a[x] != b[x]:
        print a[0:x]
        break 
```

* * *

```
output:
[1, 0, 1, 1, 0] 
```

显然你必须解决这个问题，如果你理解代码背后的逻辑，我想我会很容易。

*   在所有数组的第 x 位上迭代**x**，直到发现不匹配（即数组不具有所有相同的位值），或者直到最短数组的末尾
*   输出 array1 的前**x**位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T11:51:21.540

在某些情况下，最佳解决方案是使用复杂度为 O(n) 的[前缀树](http://en.wikipedia.org/wiki/Trie)，其中 n 是二进制字符串的共享前缀的总和，但系数很大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T12:07:58.150

假设您有输入字符串 s1,s2,s3 ...

1.  让 s = commonSubString(s1,s2)
2.  对于 i=3..n
    1.  s = commonSubString(s,s2)
3.  返回

在最坏的情况下 s1 和 s2 可以相同，在这种情况下，您可以使用启发式方法（例如，首先将 s 的初始长度限制为 k=100。如果最终 s 的长度仍然为 k=100，则重复整个过程，但从每个字符串的位置 k+1 开始）。

# android - 从 trace.txt 修复 SoundManager.release ANR

> ID：11775934
> 
> 赞同：3
> 
> 时间：2012-08-02T10:52:11.453
> 
> 标签：android, multithreading, android-asynctask, android-handler

我在调用 SoundPool.release() 时收到以下 ANR。这不是一致的缺陷，而是随机发生的。因此，复制它有点费时。有两种方法可以修复它，AsyncTask 或 Thread。我不认为我可以在这里使用处理程序，因为发布不应该在 UIThread 上运行。

```
DALVIK THREADS:
(mutexes: tll=0 tsl=0 tscl=0 ghl=0 hwl=0 hwll=0)
"main" prio=5 tid=1 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x400281b8 self=0xd088
  | sysTid=3623 nice=0 sched=0/0 cgrp=default handle=-1345006464
  | schedstat=( 22209377936 9072495824 21774 )
  at android.media.SoundPool.release(Native Method) 
```

我已经使用 Thread 修复了它

```
public SoundManager() {
    releaseRunnable = new Runnable() {
        @Override
        public void run() {
            synchronized (releaseRunnable) {
                mSoundPool.release();
                mSoundPool = null;
            }
        }
    };
    releaseThread = new Thread(releaseRunnable);
}
public void release() {
    if (mSoundPool != null) {
        releaseThread.start();
    }
} 
```

我做对了吗？

# sql - SQL 查询将字段增加该字段中的前一个数字

> ID：11775944
> 
> 赞同：1
> 
> 时间：2012-08-02T10:52:47.550
> 
> 标签：sql, postgresql

首先，这是我关于该问题的第一个问题：[SQL request to group and sum numbers by their day of creation](https://stackoverflow.com/questions/11775248/sql-request-to-group-and-sum-numbers-by-their-day-of-creation)

现在，想象一下我想让它变得更复杂，在之前的操作和感谢答案之后，我有按天分组的结果，因此添加了当天的每个条目。我有这个 ：

```
1 | 200 | 2010-01-01
2 | 100 | 2010-01-01 
```

变成这样：

```
1 | 300 | 2010-01-01 
```

这已经很不错了，但是如果我希望金额字段每次都增加怎么办？

```
1 | 300 | 2010-01-01
2 | 200 | 2010-01-02 
```

会变成 ：

```
1 | 300 | 2010-01-01
2 | 500 | 2010-01-02
x | (previous amount + this amount) | this date 
```

感谢我之前的问题的答案，我得到了 sql 查询：

```
select sum(amount), to_char(date, 'YYYY-MM-DD') 
from mytable 
group by to_char(date, 'YYYY-MM-DD') 
order by sum(amount) ASC; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T11:01:33.340

运行总和可以使用窗口函数完成：

```
select sum(amount) over (order by date asc), 
       to_char(date, 'YYYY-MM-DD') 
from mytable 
order by date ASC; 
```

如果您想要聚合结果的运行总和，只需将其放入子查询中：

```
select sum(day_total) over (order by date) as running_total,
       day_total, 
       date
from (
  select sum(amount) as day_total, 
         date
  from mytable 
  group by date
) t
order by date 
```

如果该列`date`是实际的数据类型`date`，则没有理由对其使用 to_char()。`date`顺便说一句：对列名使用保留字 ( ) 并不是一个非常好的主意。

这里重要的是定义的`order by`一部分`over`。

手册中的更多详细信息：[http ://www.postgresql.org/docs/current/static/tutorial-window.html](http://www.postgresql.org/docs/current/static/tutorial-window.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T11:01:23.870

这是一个运行总数。

看看[下面的问题](https://stackoverflow.com/questions/1153879/how-do-i-calculate-a-running-total-in-sql-without-using-a-cursor)。Quassnoi 的回答考虑了 PostgreSQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T11:35:19.457

试试这个：

```
 select date,(select sum(amount)
                    from mytable11 T1 
                    where T1.date<=T2.date
                    )as cum_sum
from mytable11 T2
group by date 
```

# java - 无法在 GAE 留言簿示例中将 JSP 设置为欢迎文件

> ID：11775945
> 
> 赞同：6
> 
> 时间：2012-08-02T10:52:53.357
> 
> 标签：java, google-app-engine, jsp

我在这里遵循示例：

[https://developers.google.com/appengine/docs/java/gettingstarted/usingjsps](https://developers.google.com/appengine/docs/java/gettingstarted/usingjsps)

所以我创建了一个非常基本的jsp文件：

```
<html>
<body>
testing

</body>
</html> 
```

我正在尝试将其设为欢迎页面，就像教程中所说的那样：

```
 <welcome-file-list>
        <welcome-file>guestbook.jsp</welcome-file>
    </welcome-file-list> 
```

但它没有被调用。当我去`http://localhost:8888`它时，就好像它缺少一个文件（我重命名了 index.html。当有 index.html 时 - 它会显示它）。

当我访问时，`http://localhost:8888/guestbook.jsp`我可以看到没有问题的jsp文件

更新：这只发生在我的开发服务器上。当我部署到谷歌应用引擎时，它按预期工作：

[http://test-ishener.appspot.com/](http://test-ishener.appspot.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:00:31.660

可能您没有将 JSP 存储在根文件夹中，请显示您的项目目录结构。

此外，如果您在欢迎文件列表中有多个匹配项，请说：

```
<welcome-file>index.html</welcome-file>
<welcome-file>guestbook.jsp</welcome-file> 
```

然后将执行第一个匹配，即 index.html，如果是这种情况，请将 guestbook.jsp 移动到第一个或删除 index.html 欢迎文件标记

# c# - 从 C# 中的加权列表中选择 x 个随机元素（无需替换）

> ID：11775946
> 
> 赞同：6
> 
> 时间：2012-08-02T10:52:58.443
> 
> 标签：c#, statistics, probability

**更新**：我的问题已经解决，我更新了问题中的代码源以匹配 Jason 的答案。请注意，rikitikitik 的答案是解决从带有替换的样本中挑选卡片的问题。

我想从加权列表中选择 x 个随机元素。采样不更换。我找到了这个答案：[https](https://stackoverflow.com/a/2149533/57369) ://stackoverflow.com/a/2149533/57369 ，在 Python 中有一个实现。我用 C# 实现了它并对其进行了测试。但结果（如下所述）与我的预期不符。我对 Python 一无所知，所以我很确定我在将代码移植到 C# 时犯了一个错误，但我看不到 Pythong 中的代码在哪里得到了很好的记录。

我选了一张卡 10000 次，这是我得到的结果（结果是一致的跨执行）：

```
Card 1: 18.25 % (10.00 % expected)
Card 2: 26.85 % (30.00 % expected)
Card 3: 46.22 % (50.00 % expected)
Card 4: 8.68 % (10.00 % expected) 
```

如您所见，卡片 1 和卡片 4 的权重均为 1，但卡片 1 的选择次数比卡片 4 更频繁（即使我选择了 2 或 3 张卡片）。

测试数据：

```
var cards = new List<Card>
{
    new Card { Id = 1, AttributionRate = 1 }, // 10 %
    new Card { Id = 2, AttributionRate = 3 }, // 30 %
    new Card { Id = 3, AttributionRate = 5 }, // 50 %
    new Card { Id = 4, AttributionRate = 1 }, // 10 %
}; 
```

这是我在 C# 中的实现

```
public class CardAttributor : ICardsAttributor
{
    private static Random random = new Random();

    private List<Node> GenerateHeap(List<Card> cards)
    {
        List<Node> nodes = new List<Node>();
        nodes.Add(null);

        foreach (Card card in cards)
        {
            nodes.Add(new Node(card.AttributionRate, card, card.AttributionRate));
        }

        for (int i = nodes.Count - 1; i > 1; i--)
        {
            nodes[i>>1].TotalWeight += nodes[i].TotalWeight;
        }

        return nodes;
    }

    private Card PopFromHeap(List<Node> heap)
    {
        Card card = null;

        int gas = random.Next(heap[1].TotalWeight);
        int i = 1;

        while (gas >= heap[i].Weight)
        {
            gas -= heap[i].Weight;
            i <<= 1;

            if (gas >= heap[i].TotalWeight)
            {
                gas -= heap[i].TotalWeight;
                i += 1;
            }
        }

        int weight = heap[i].Weight;
        card = heap[i].Value;

        heap[i].Weight = 0;

        while (i > 0)
        {
            heap[i].TotalWeight -= weight;
            i >>= 1;
        }

        return card;
    }

    public List<Card> PickMultipleCards(List<Card> cards, int cardsToPickCount)
    {
        List<Card> pickedCards = new List<Card>();

        List<Node> heap = GenerateHeap(cards);

        for (int i = 0; i < cardsToPickCount; i++)
        {
            pickedCards.Add(PopFromHeap(heap));
        }

        return pickedCards;
    }
}

class Node
{
    public int Weight { get; set; }
    public Card Value { get; set; }
    public int TotalWeight { get; set; }

    public Node(int weight, Card value, int totalWeight)
    {
        Weight = weight;
        Value = value;
        TotalWeight = totalWeight;
    }
}

public class Card
{
    public int Id { get; set; }
    public int AttributionRate { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T03:58:26.530

正如某些人在评论中提到的那样，按照您想要的确切比例创建卡片列表：

```
var deck = new List<Card>();

cards.ForEach(c => 
{
    for(int i = 0; i < c.AttributionRate; i++)
    {
         deck.Add(c);
    }
} 
```

随机播放：

```
deck = deck.OrderBy(c => Guid.NewGuid()).ToList(); 
```

并选择 x 卡：

```
var hand = deck.Take(x) 
```

当然，这只适用`AttributionRate`于`int`. 否则，您将不得不稍微修改套牌生成。

对于 10,000 次运行，我得到以下结果，一次运行 5 次：

```
Card 1: 9.932% 
Card 2: 30.15% 
Card 3: 49.854% 
Card 4: 10.064% 
```

另一个结果：

```
Card 1: 10.024%
Card 2: 30.034%
Card 3: 50.034% 
Card 4: 9.908% 
```

编辑：

我勇敢地进行了按位运算，并查看了您的代码。在我的油炸大脑上加入大量烧烤酱后，我注意到了一些事情：

首先，`Random.Next(min,max)`将在随机池中包含最小值，但不包含最大值。这就是卡片 1 的概率高于预期的原因。

进行该更改后，我实现了您的代码，并且当您抽 1 张卡时它似乎正在工作。

```
Card 1: 10.4%  
Card 2: 32.2% 
Card 3: 48.4% 
Card 4: 9.0% 

Card 1: 7.5%
Card 2: 28.1%
Card 3: 50.0% 
Card 4: 14.4% 
```

但是，由于以下语句，当您抽取超过 1 张牌时，您的代码将不起作用：

```
heap[i].Weight = 0; 
```

那条线，以及之后的重新计算循环，基本上从堆中删除了所有已抽牌的实例。如果你碰巧抽了四张牌，那么所有牌的百分比变为 25%，因为你基本上是抽了所有 4 张牌。该算法实际上并不完全适用于您的情况。

我怀疑每次抽牌时都必须重新创建堆，但我怀疑它仍然会表现良好。但是，如果我要处理这个问题，我只会从 1 到 4 生成不同的随机数，`heap[1].TotalWeight`并从那里得到 4 张相应的卡片，尽管在这种情况下随机数生成可能变得不可预测（重新滚动），因此效率低下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T23:16:02.543

程序中有两个小错误。首先，随机数的范围应该正好等于所有物品的总重量：

```
int gas = random.Next(heap[1].TotalWeight); 
```

其次，改变它所说的两个地方`gas >`说`gas >=`。

（原始的 Python 代码是可以的，因为`gas`它是一个浮点数，所以 和 之间的差异`>`可以`>=`忽略不计。该代码被编写为接受整数或浮点权重。）

**更新：**好的，您在代码中进行了建议的更改。我认为该代码现在是正确的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-20T01:03:09.917

如果您想从加权集合中选择 x 个元素而不进行替换，以便以与其权重成比例的概率选择元素，那么您的算法是错误的。

考虑以下加权列表：
'a'：权重 1
'b'：权重 2
'c'：权重 3
和 x = 2

在此示例中，您的函数应始终在结果集中返回“c”。这是“c”被选择为“a”的 3 倍和“b”的 1.5 倍的唯一方法。但是很容易看到您的算法并不总是在结果中产生“c”。

实现此目的的一种算法是将项目沿数轴从 0 到 1 排列，使它们占据与其重量成比例的段，然后随机选择一个介于 0 和 1/x 之间的数字“开始”，然后找到所有点“start + n/x”（对于所有整数 n，使得该点在 0 和 1 之间）并产生包含由这些点标记的项目的集合。

换句话说，类似：

```
a.) optionally shuffle the list of elements (if you need random combinations of elements in addition to respecting the weights)  
b.) create a list of cumulative weights, if you will, called borders, such that borders[0] = items[0].weight and borders[i] = borders[i - 1] + items[i].weight  
c.) calculate the sum of all the weights => total_weight  
d.) step_size = total_weight / x  
e.) next_stop = pick a random number between [0, step_size)  
f.) current_item = 0  
g.) while next_stop < total_weight:
h.)   while borders[current_item] < next_stop:  
i.)     current_item += 1  
j.)   append items[current_item] to the output  
k.)   next_stop += step_size 
```

注意：这仅适用于最大重量 <= step_size 的情况。如果其中一个元素的权重大于总权重 / x，那么这个问题是不可能的：您必须多次选择一个元素才能尊重权重。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T11:13:56.887

你可以这样做：

```
Card GetCard(List<Card> cards)
{
  int total = 0;
  foreach (Card c in cards)
  {
    total += AttributionRate;
  }

  int index = Random.Next(0, total - 1);
  foreach(Card c in cards)
  {
    index -= c.AttributionRate;
    if (index < 0)
    {
      return c;
    }
  }
}

Card PopCard(List<Card> cards)
{
  Card c = GetCard(cards);
  cards.Remove(c);
} 
```

理论上这应该有效。

# c# - 绑定 ListView.SelectedItem 出现问题

> ID：11775947
> 
> 赞同：2
> 
> 时间：2012-08-02T10:53:02.610
> 
> 标签：c#, wpf, data-binding, mvvm

在我的`WPF`mvvm(light) 项目中，我遇到了这样的问题：绑定`ListView.SelectedItem`到 my后`ModelView`，我试图将其从.It 更改为 .It`ModelView`似乎没问题，但在 View 没有发生任何事情：

XAML：

```
<ListView SelectedItem="{Binding SelectedOne}" 
          ItemsSource="{Binding Items}">
</ListView>

<ListView     ScrollViewer.CanContentScroll="False"
              ItemsSource="{Binding Items}"
              ItemTemplateSelector="{StaticResource myDataTemplateSelector}"
              HorizontalContentAlignment="Stretch"
              SelectedItem="{Binding SelectedOne, Mode=TwoWay}"
              IsSynchronizedWithCurrentItem="True">
</ListView> 
```

模型视图：

```
ObservableCollection<ItemViewModel> _EAItems = new ObservableCollection<ItemViewModel>();
public ObservableObject _selectedOne;

public ObservableCollection<ItemViewModel> Items
        {
            get
            {
                return _EAItems;
            }
            set
            {
                _EAItems = value;
            }
        }

public ObservableObject SelectedOne 
        {
            get { return _selectedOne; }
            set 
            {

                if(_selectedOne != value)
                _selectedOne = value;

            }
        }
Select = new RelayCommand(() => 
            {
                if (qw == 15) { qw = 0; }else
                SelectedOne = Items[qw];
                qw++;
            }); 
```

项目是`ObservableCollection`。

我添加了另一个`Listview`并将其绑定到相同的源。当我更改`SelctedItem`其中一个时`Listview`，它会显示在另一个上，反之亦然。

我查看了很多类似的解决方案，但我不知道出了什么问题:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T11:39:36.733

first you should also post the code for the binding for the ItemsSource, the ItemsSource property.

but the main problem is the you do not call PropertyChanged in your setter

```
 public ObservableObject SelectedOne 
    {
        get { return _selectedOne; }
        set 
        {

            if(_selectedOne != value)
            _selectedOne = value;

            OnPropertyChanged("SelectedOne ");//<-- otherwise the view dont know that the SelectedItem changed
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T11:40:02.223

In order to make the binding work you would have to raise a [PropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.propertychanged.aspx) event from the `SelectedOne` setter. The class that defines the `SelectedOne` property would have to implement [INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/ms133020).

Regardless of the *type* of the `SelectedOne` property (even if it is itself an ObservableObject), you have to raise a `PropertyChanged` event when the *value* of the property changes.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T12:47:52.467

我同意克莱门斯和盲人的观点。唯一的事实是 SelectedOne 需要与为 Collection 设置的类相同。对于 MVVM-light 库，该方法是 RaisePropertyChanged 而不是 OnPropertyChanged（如果您的 viewModel 继承自 ViewModelBase）。

如果您的源包含 ItemViewModels 应使用此代码：

```
private ItemViewModel _selectedOne;

public ItemViewModel SelectedOne 
{
    get { return _selectedOne; }
    set 
    {

        if(_selectedOne != value)
        _selectedOne = value;

        RaisePropertyChanged("SelectedOne");
    }
} 
```

您的集合不需要 RaisePropertyChanged 的​​原因是 ObsvervableCollection 类已经以某种方式包含它。

问候，

凯文

# actionscript-3 - Flash AS3 - 更改精灵大小效果 textifeld？

> ID：11775949
> 
> 赞同：0
> 
> 时间：2012-08-02T10:53:06.780
> 
> 标签：actionscript-3, flash, text, sprite, tween

与一个简单的斗争。我有一个精灵和一个文本字段。两者都不是作为彼此的子对象添加的，它们是单独的对象。该类如下所示。一切都按预期工作，但是当我调用 simpleGUIElementResize 函数来调整精灵的大小时，文本字段也会调整大小，这是我不想要的。效果应该是我可以做任何我想做的事情，并且文本保持在原来的位置。

有任何想法吗？

谢谢你。

```
package com.simpleGUI {
    //flash imports
    import flash.display.Sprite;
    import flash.events.MouseEvent;
    import flash.text.TextField;
    import flash.text.TextFormat;
    import flash.text.TextFormatAlign;
    import flash.text.Font;

//greensock
import com.greensock.TweenMax;
import com.greensock.easing.*;

public class simpleGUIElement extends Sprite {
    //declaration vars
    private var sgeWidth:int;
    private var sgeHeight:int;
    private var sgeColour:String;
    private var sgeText:String;

    //internal vars
    private var sgeSprite:Sprite = new Sprite();
    private var sgeTextField:TextField = new TextField();
    private var sgeFormat:TextFormat = new TextFormat();

    //formatting vars
    private var sgeTextSize:int;

    public function simpleGUIElement(SGEWIDTH:int, SGEHEIGHT:int, SGECOLOUR:String, SGETEXT:String, SGETEXTSIZE:int) {
        trace('simpleGUIElement created');

        //populate the vars
        sgeWidth = SGEWIDTH;
        sgeHeight = SGEHEIGHT;
        sgeColour = SGECOLOUR;
        sgeText = SGETEXT;

        sgeTextSize = SGETEXTSIZE;

        createSprite();  //create the rectangle

        //if the text string is not null create the textfield
        if (sgeText.indexOf("null") >= 0) {
            return;
        } else {
            createTextField();
        }

    }

    private function createSprite():void {
        //create the sprite
        sgeSprite.graphics.beginFill(uint(sgeColour));
        sgeSprite.graphics.drawRect(0, 0, sgeWidth, sgeHeight);
        sgeSprite.graphics.endFill();
        //add the sprite
        addChild(sgeSprite);
    }

    private function createTextField():void {
        //sort of the formatting
        sgeFormat.size = sgeTextSize;
        sgeFormat.align = TextFormatAlign.LEFT;
        sgeFormat.font = 'Arial';
        sgeFormat.color = (0xffffff);
        sgeFormat.leading = 5;
        sgeFormat.kerning = 10;
        sgeFormat.letterSpacing = 0.7;

        //create the textfield
        sgeTextField.defaultTextFormat = sgeFormat;
        sgeTextField.htmlText = sgeText;
        sgeTextField.width = sgeWidth;
        sgeTextField.height = sgeHeight - 20;
        sgeTextField.wordWrap = true;
        sgeTextField.selectable = false;
        sgeTextField.x = 10;
        sgeTextField.y = 10;
        sgeTextField.mouseEnabled = false;
        addChild(sgeTextField);
    }

    public function simpleGUIElementResize(animTime:int, newWidth:int, newHeight:int):void {
        TweenMax.to(sgeSprite, animTime, {width:newWidth, height:newHeight});
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:09:23.597

Sorry but you code works.
[Live demo here](http://wonderfl.net/c/mmF1) (click on stage to resize).

# python - Python多处理问题

> ID：11775959
> 
> 赞同：0
> 
> 时间：2012-08-02T10:54:17.090
> 
> 标签：python, multiprocessing

我有一小段代码，用 python 编写，它有一个 Generate 类，它在调用时返回下一个数字。

```
class Generate:
    def iter(self):
        self.next1 = 1
        return self
    def next(self):
        self.curr = self.next1
        self.next1 += 1
        return self.curr

def generateNos():
    for i in xrange(3):
        print g.next()

g = Generate().iter()

generateNos()
generateNos() 
```

还有一个函数 generateNos，它只生成 3 个 Nos。因此，当我如下调用此函数两次时，我得到的输出为：- 1 2 3 4 5 6

现在，当我生成两个调用此 generateNos() 的进程时，我得到的输出为：- 1 2 3 1 2 3

相同的代码是： -

```
from multiprocessing import Process, Manager
class Generate:
    def iter(self):
        self.next1 = 1
        return self
    def next(self):
        self.curr = self.next1
        self.next1 += 1
        return self.curr

def generateNos():
    for i in xrange(3):
        print g.next()

g = Generate().iter()

p1 = Process(target = generateNos)
p2 = Process(target = generateNos)

p1.start()
p1.join()

p2.start()
p2.join() 
```

现在看来这个 Generate 类在子进程中再次重新初始化，这是我不想要的。我怎样才能避免这种情况？

想要与一次又一次调用 generateNos 相同的行为。

任何 hack，以便 Generate() 对象“g = Generate().iter()”不会在子进程中再次被调用，它应该只在父进程中调用一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:59:31.387

您必须通过共享内存或其他允许它们实际共享相同对象实例的机制在进程之间共享对象。启动一个新的子进程实际上会腌制您传递给子进程的所有内容，然后在子进程中重建一个副本。

# java - eclipse中的自动格式化程序

> ID：11775963
> 
> 赞同：0
> 
> 时间：2012-08-02T10:54:23.590
> 
> 标签：java, c++, c, eclipse, c++11

我目前在 Eclipse 中使用自动格式化程序时遇到了困难......针对我自己的格式化程序模板我在换行时遇到了麻烦，似乎我错过了任何属性线程。

基本配置对我有用，但我坚持这一点，也许有人知道我可以在哪里找到代码样式的属性：

首选：

```
printf("anything"); 
```

当前的自动格式化程序/代码样式：

```
printf(
      "anything"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:57:02.843

去`Windows->Preferences->java->code style->formatter`

在这里，您可以导入其他格式化程序，导出您的格式化程序，编辑任何格式化程序。在当前格式化程序上选择编辑并选择`Line Wrapping`选项卡。

**编辑：** 您的问题似乎与`Maximum line size`.

# javascript - javascript 从 DDMMYYYY 抽出时间？

> ID：11775964
> 
> 赞同：1
> 
> 时间：2012-08-02T10:54:26.883
> 
> 标签：javascript, jquery, html

我决定让用户输入 DDMMYYY 来获得他们的生日。如何根据该数据在 javascript 中创建 UNIX 时间戳？

另外，一旦我有了 unix 时间戳，如何用英文显示它，即 2000 年 1 月 5 日星期一？

我可以很容易地用 PHP 做到这一点，我只是不知道 javascript 中的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:03:21.343

这对于 的输入会很棘手`DDMMYYYY`，因为如果用户遗漏了一个数字，或者没有在单数前面加上前导`0`，它将导致整个计算失败。出生日期输入的最佳（也是最流行的方式）是日期、月份和年份的 3 个下拉菜单。这将允许您轻松地以 javascript 格式计算日期：

```
var date = new Date($('year').val(), $('month').val(), $('day').val());

alert(date.toDateString()); 
```

从用户体验的角度来看，这会更好，因为它不允许用户输入无效的日期，尤其是对于来自使用不同日期格式的语言环境的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T00:19:35.863

```
function dateFromStr(input) {
  var year, month, day;

  year = parseInt(input.substr(4,4));
  month = parseInt(input.substr(2,2));
  day = parseInt(input.substr(0,2));

  return new Date(year, month, day);
}

dateFromStr("03082012"); 
```

缺点：有点冗长。优点：像这样简单的东西没有外部依赖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T00:11:52.707

[使用moment.js](http://momentjs.com)很容易做到这一点。

```
var birthday = moment("10071986", "DDMMYYYY");
var unix = birthday.unix();
var humanized = birthday.format("dddd Do MMM YYYY"); 
```

这是一个工作的jsfiddle。[http://jsfiddle.net/timrwood/rXArM/](http://jsfiddle.net/timrwood/rXArM/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T11:43:49.310

你需要使用一些库，或者自己编写代码，因为 JavaScript 的内置日期解析和编写例程非常有限。那里使用的格式基本上取决于系统。

我有偏见（作为“使用 JavaScript 和 Globalize.js 走向全球”的作者），但我仍然建议使用 Globalize.js，即使在你真的没有全球化但只使用英文符号的情况下。毕竟，使用英文表示日期*是*一种本地化形式。

例子：

```
<script src=globalize.js></script>
<script>
var birthDateString = "09Feb1952"; // just a test case
var birthDate = 
   Globalize.parseDate(birthDateString, 'ddMMMyyyy');
if(!birthDate) {
   alert('Error in birth date!'); // replace by suitable error handling
}
else {
   var unixTimeStamp = Math.round(birthDate.getTime()/1000);
   document.write(unixTimeStamp + "<br>");
   document.write(Globalize.format(birthDate, 'dddd d MMM yyyy'));
}
</script> 
```

这最终会得到结果“Saturday 9 Feb 1952”，这与请求的形式不完全一样，所以如果你真的想要那种形式，你需要一些添加后缀“th”、“st”、“ nd”或“rd”。

关于 UNIX 时间戳与 JavaScript Date 对象，请参阅[如何在 JavaScript 中获取时间戳？](https://stackoverflow.com/questions/221294/how-do-you-get-a-timestamp-in-javascript)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T11:03:02.897

您可以使用子字符串获取日、月和年，然后在 javascript 中创建一个新的 Date 对象： var ux = new Date(year, month, day).getMilliseconds / 1000;

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-02T11:08:22.737

[Date.js](http://code.google.com/p/datejs/wiki/APIDocumentation#parseExact)是一个很棒的第三方库，它允许您以任何格式解析用户输入，如下所示：

如果没有分隔符，这样做可能会有点棘手。如果您愿意提取日、月和年，Date.js 会在其上提供优雅：

```
var dl = new Date(2007, 0, 1);
var unixTimeStamp = dl.valueOf()/1000;
var customDateString = dl.toString('dddd dd MMM yyyy'); 
```

[**在此处**](http://jsfiddle.net/ajorpheus/MPyZY/4/)查看实际操作[](http://jsfiddle.net/ajorpheus/MPyZY/4/)

# db2 - 获取自特定时间戳以来已更改的 db2 表的列表，例如自 20120801185856 时间戳以来

> ID：11775965
> 
> 赞同：3
> 
> 时间：2012-08-02T10:54:30.500
> 
> 标签：db2, database-restore

IBM DB2 中是否有任何方法可以获取自特定时间戳以来已更改（更新/添加/删除）的表列表？

我面临的问题是我在 7 月 25 日从实时数据库服务器的一个盒子中恢复了一个备份，并在启用功能包的同时更新了这个恢复的数据库。现在实时数据库服务器已经改变，因为客户正在访问它，我无法恢复最新的备份，因为 box1 有一些附加表/数据。

所以我想知道自上次备份以来已更改的表列表，以便我可以手动更新这些表。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T12:54:21.873

如果您使用的是 DB2 for Linux/Unix/Windows，那么这个查询应该会得到您需要的信息：

```
SELECT TRIM(TABSCHEMA) || '.' || TRIM(TABNAME),
       MAX(CREATE_TIME,ALTER_TIME)
FROM SYSCAT.TABLES
ORDER BY 2 DESC 
```

如果您在大型机上，这个应该可以：

```
SELECT RTRIM(CREATOR) || '.' || RTRIM(NAME),
       MAX(CREATEDTS,ALTEREDTS)
FROM SYSIBM.SYSTABLES
ORDER BY 2 DESC 
```

但是，这些都不会显示已删除的表，因为它们在被删除时会从系统目录中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T14:30:13.537

我宁愿建议删除触发器记录表的删除操作发生的详细信息。

# wpf - WPF ListBox SelectedItem 问题

> ID：11775973
> 
> 赞同：2
> 
> 时间：2012-08-02T10:54:38.540
> 
> 标签：wpf, mvvm, listbox

谁能帮忙，浪费了很多时间试图解决这个问题。

我有一个具有以下属性的 ViewModel

```
 public ObservableCollection<ListItem> OpcoList { get; set; }
    public ListItem SelectedOpco {
        get {
            return _selectedOpco;
        }
        set {
            if (_selectedOpco != null && _selectedOpco.Equals(value)) {
                return;
            }
            var oldValue = _selectedOpco;
            _selectedOpco = value;

            RaisePropertyChanged("SelectedOpco");  
    } 
```

在我的 XAML 中，我有

```
 <ListBox Name="listOpco" ItemsSource="{Binding OpcoList}" 
   SelectionMode="Single" SelectedItem="{Binding Mode=TwoWay, Path=SelectedOpco}"> 
```

但是，每当我在 VM 中为 SelectedOpco 设置一些值时，它就不会在 ListBox 中显示为选中状态。

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T02:01:51.793

你可以尝试一些事情：

1.  将设置器简化为更简单的东西（它应该做你期望的 - 检查是否选择了列表的不同元素）。

    ```
    set {
        if(_selectedOpco != value) {
            _selectedOpco = value;
            RaisePropertyChanged("SelectedOpco");
        }
    } 
    ```

2.  `RaisePropertyChanged("SelectedOpco");`在该行放置一个断点以查看执行是否在那里。如果是，请检查该类是否真的被标记为`INotifyPropertyChanged`.

    ```
    if(!(this is INotifyPropertyChanged))
         throw new Exception("Not INotifyPropertyChanged"); 
    ```

3.  尝试使用以下方法设置值：

    ```
    SelectedOpco = OpcoList.FirstOrDefault(); // LastOrDefault 
    ```

祝你好运！

# java - 如何从字符串解析持续时间并添加它们？

> ID：11775974
> 
> 赞同：0
> 
> 时间：2012-08-02T10:54:37.987
> 
> 标签：java

我需要`HH:MM`在 Java 中解析两个格式的字符串：

```
String time1="10:45";
String time2="02:30"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T11:09:36.980

愚蠢但简单：

```
String time1 = "10:45";
String time2 = "02:30";

String[] split1 = time1.split(":");
String[] split2 = time2.split(":");

int total = 60 * Integer.parseInt(split1[0]) +
            Integer.parseInt(split1[1]) +
            60 * Integer.parseInt(split2[0]) +
            Integer.parseInt(split2[1]);

int hours = total / 60;
int minutes = total - hours * 60;
System.out.println(hours + ":" + minutes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:59:17.313

你想得到差异吗？看看 SimpleDateFormat，也许你用它来创建一个 Date 然后计算它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T11:05:27.140

使用 SimpleDateFormat 获取日期

```
DateFormat formatter = new SimpleDateFormat("HH:mm");
Date date = (Date)formatter.parse("10:20"); 
```

然后你可以把日期加在一起。

您可能需要做一些逻辑来处理日期在不同日期的时间。我建议使用 JodaTime 进行任何日期操作。

不确定这是否相关，因为不确定实际问题是什么......

# android - 无法将图像发布到 Twitter。收到的身份验证质询为空

> ID：11775975
> 
> 赞同：1
> 
> 时间：2012-08-02T10:54:45.110
> 
> 标签：android, twitter4j

在登录流程之后，我将访问令牌和访问令牌秘密存储在 prefs 中。现在我想使用 TwitPic 将图像发布到 Twitter。

**更新：**我尝试将设备上的日期和时间设置为自动。我的 Twitter 应用程序中的回调 URL 存在。它仍然显示错误。

我的代码

```
public static boolean tweetMessageAndPhoto(final String message, final String photoPath) {
    final ConfigurationBuilder cb = new ConfigurationBuilder();
    cb.setDebugEnabled(true);
    cb.setOAuthAccessToken(getAccessTokenStr());
    cb.setOAuthAccessTokenSecret(getAccessTokenSecretStr());
    cb.setOAuthConsumerKey(Constant.CONSUMER_KEY);
    cb.setOAuthConsumerSecret(Constant.ACCESS_TOKEN_SECRET);
    cb.setMediaProviderAPIKey(Constant.MEDIA_KEY);              
    final Configuration conf = cb.build();

    final ImageUpload upload = new ImageUploadFactory(conf).getInstance(MediaProvider.TWITPIC);

    try {
        final String uri = upload.upload(new File(photoPath), message);
        System.out.println("================URI: " + uri);
        return true;
    } catch (final TwitterException e) {
        e.printStackTrace();
        ShowLog.showLogError(TAG, "Could not tweet. Please try again.");
    }
    return false;
} 
```

我收到此错误：

```
W/System.err(14566): Received authentication challenge is nullRelevant discussions can be on the Internet at:
W/System.err(14566):    http://www.google.co.jp/search?q=ea09dc6d or
W/System.err(14566):    http://www.google.co.jp/search?q=049b821e
W/System.err(14566): TwitterException{exceptionCode=[ea09dc6d-049b821e 0237e8c8-8ed4bd69], statusCode=-1, retryAfter=-1, rateLimitStatus=null, featureSpecificRateLimitStatus=null, version=2.2.3}
W/System.err(14566):    at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:204)
W/System.err(14566):    at twitter4j.internal.http.HttpClientWrapper.request(HttpClientWrapper.java:65)
W/System.err(14566):    at twitter4j.internal.http.HttpClientWrapper.post(HttpClientWrapper.java:114)
W/System.err(14566):    at twitter4j.media.AbstractImageUploadImpl.upload(AbstractImageUploadImpl.java:111)
W/System.err(14566):    at twitter4j.media.AbstractImageUploadImpl.upload(AbstractImageUploadImpl.java:80)
W/System.err(14566):    at app.jp.cropnet.twitter.TwitterHelper.tweetMessageAndPhoto(TwitterHelper.java:121)
W/System.err(14566):    at app.jp.cropnet.twitter.TwitterDemoActivity.tweetMessageAndPhoto(TwitterDemoActivity.java:81)
W/System.err(14566):    at app.jp.cropnet.twitter.TwitterDemoActivity.access$1(TwitterDemoActivity.java:78)
W/System.err(14566):    at app.jp.cropnet.twitter.TwitterDemoActivity$2.onClick(TwitterDemoActivity.java:40)
W/System.err(14566):    at android.view.View.performClick(View.java:2461)
W/System.err(14566):    at android.view.View$PerformClick.run(View.java:8890)
W/System.err(14566):    at android.os.Handler.handleCallback(Handler.java:587)
W/System.err(14566):    at android.os.Handler.dispatchMessage(Handler.java:92)
W/System.err(14566):    at android.os.Looper.loop(Looper.java:123)
W/System.err(14566):    at android.app.ActivityThread.main(ActivityThread.java:4627)
W/System.err(14566):    at java.lang.reflect.Method.invokeNative(Native Method)
W/System.err(14566):    at java.lang.reflect.Method.invoke(Method.java:521)
W/System.err(14566):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:871)
W/System.err(14566):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:629)
W/System.err(14566):    at dalvik.system.NativeStart.main(Native Method)
W/System.err(14566): Caused by: java.io.IOException: Received authentication challenge is null
W/System.err(14566):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.doRequestInternal(HttpURLConnectionImpl.java:1694)
W/System.err(14566):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.doRequest(HttpURLConnectionImpl.java:1649)
W/System.err(14566):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:1374)
W/System.err(14566):    at org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:117)
W/System.err(14566):    at twitter4j.internal.http.HttpResponseImpl.<init>(HttpResponseImpl.java:35)
W/System.err(14566):    at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:168)
W/System.err(14566):    ... 19 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T11:08:46.943

如果您使用的是模拟器，这应该可以正常工作，如果您仅在真机上出现错误，请检查您插入手机的 sim 卡是否启用了自动时间更新功能。我曾经遇到过这个问题，从其他网络更换SIM卡解决了我的问题。

# maven - Maven 覆盖所有存储库

> ID：11775978
> 
> 赞同：1
> 
> 时间：2012-08-02T10:55:21.610
> 
> 标签：maven, artifactory

我将我的 pom 配置为覆盖中央存储库和快照。但是，一些依赖项具有自己的 pom 设置和自己的存储库，并且这些依赖项倾向于访问 Web。

例如，grizzly 设置 glassfish 存储库。ActiveMQ 设置 jboss 等。

我可以设置类似 - 覆盖所有存储库以转到我自己的存储库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:01:07.103

之后您应该设置一个[存储库管理器](http://maven.apache.org/repository-management.html)，您可以通过 settings.xml 文件配置访问以仅使用存储库管理器。这是一种通过[settings.xml 文件中的镜像设置进行](http://maven.apache.org/guides/mini/guide-mirror-settings.html)的覆盖。

# java - 根据其中一个字段对对象列表进行排序

> ID：11775980
> 
> 赞同：3
> 
> 时间：2012-08-02T10:55:27.247
> 
> 标签：java, sorting

你好 stackoverflow 社区！我是这些论坛的新手，对 java 和 android 编程也很陌生——这恰好是我的问题的对象——对于任何错误，请提前道歉！

我的问题是排序。我正在寻找一种基于我选择的字段对对象进行排序的方法（不是基于第一个字段排序，然后是下一个字段，等等，例如比较器链接）。我相信我已经找到了解决问题的方法：

[https://stackoverflow.com/a/5113108/1549672](https://stackoverflow.com/a/5113108/1549672)

但我实际上很难让它发挥作用。我怀疑由于缺乏 Java 经验，我可能遗漏了一些东西，所以欢迎任何帮助！

这是我正在尝试的：

作为我的班级——

```
public class ItemLocation {
String title;
int id;
} 
```

作为我的功能-

```
public void sort(final String field, List<ItemLocation> itemLocationList) {
    Collections.sort(itemLocationList, new Comparator<ItemLocation>() {
        @Override
        public int compare(ItemLocation o1, ItemLocation o2) {
            if(field.equals("title")) {
                return o1.title.compareTo(o2.title);
            } else if(field.equals("id")) {
                return Integer.valueOf(o1.id).compareTo(o2.id);
            }
            return 0;
        }
    });
} 
```

使用这些，有人可以举一个使用这种方法的例子吗？我试图填充一个 ArrayList 并对其进行排序，但无济于事。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T11:11:24.267

如果它们不相等，则不`0`应从该方法返回。[`Comparator.compare`](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html#compare%28T,%20T%29)从 API 文档来看，合同是“好的”，但并不完全鼓励：

> 通常是这样，但并不严格要求 (compare(x, y)==0) == (x.equals(y))。一般来说，任何违反此条件的比较器都应清楚地表明这一事实。推荐的语言是“注意：这个比较器强加了与等于不一致的排序。”

* * *

[`Comparator`](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)在我看来，您应该为每个字段返回一个特定的值：

```
Comparator<ItemLocation> titleComparator = new Comparator<ItemLocation>() {
    @Override
    public int compare(ItemLocation o1, ItemLocation o2) {
        return o1.title.compareTo(o2.title);
    }
}

Comparator<ItemLocation> idComparator = new Comparator<ItemLocation>() {
    @Override
    public int compare(ItemLocation o1, ItemLocation o2) {
        return Integer.valueOf(o1.id).compareTo(o2.id);
    }
}

public void sort(final String field, List<ItemLocation> itemLocationList) {

    final Comparator<ItemLocation> comparator;

    if(field.equals("title")) {
        comparator = titleComparator;
    } else if (field.equals("id")) {
        comparator = idComparator;
    } else {
        throw new IllegalArgumentException("Comparator not found for " + field);
    }

    Collections.sort(itemLocationList, comparator);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:13:42.233

您可以发布不起作用的调用代码吗？我看不出您提供的代码有任何明显错误。

首先，您可以尝试添加一个额外的 else 案例，如下所示：

```
else {
    throw new IllegalArgumentException("Unrecognised field name");
} 
```

目前，如果您的调用代码中有拼写错误，比较器将始终返回 0，这将使列表未排序。

传递字段的一种更强大的方法是声明一个枚举：

```
enum ItemLocationField {
    TITLE,
    ID
} 
```

那么您的条件将变为：

```
if (field == ItemLocationField.TITLE) 
```

等等。这将减少打错字的机会（编译器会告诉你是否这样做）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T11:20:33.340

除了`returning 0`将参数与`equals`. 您可以通过`throwing RuntimeException`而不是`returning 0`和使用`equalsIgnoreCase`而不是`equals`方法来改进它，最好忽略参数的大小写。

```
public static void sort(final String field, List<ItemLocation> itemLocationList) {
    Collections.sort(itemLocationList, new Comparator<ItemLocation>() {
        @Override
        public int compare(ItemLocation o1, ItemLocation o2) {
            if(field.equalsIgnoreCase("title")) {
                return o1.title.compareTo(o2.title);
            } else if(field.equalsIgnoreCase("id")) {
                return Integer.valueOf(o1.id).compareTo(o2.id);
            }else
                throw new IllegalArgumentException("Invalid Parameter .");
        }
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T12:11:56.827

**1.**如果您只想**根据一个属性**对对象进行排序，那么请选择`java.lang.Comparable`接口`Collections.sort(List<T> list)`

**2.**如果要根据**多个属性**对对象进行排序，请选择 `java.util.Comparator`接口`Collections.sort(List<T> list, Comparator<? super T> c)`

# symfony1 - 如何在 sfSimpleCMSplugin 中创建新的页面模板？

> ID：11775981
> 
> 赞同：0
> 
> 时间：2012-08-02T10:55:29.300
> 
> 标签：symfony1

我有旧版本的 sfsimplecmsplugin 在 Symfony v1 中运行。我需要创建新的页面模板，但我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:18:37.503

你读过[文档](http://www.symfony-project.org/plugins/sfSimpleCMSPlugin/0_7_3?tab=plugin_readme)吗？

> 该插件捆绑了一些基本模板，但您肯定需要添加自己的模板。
> 
> CMS 模板是位于`sfSimpleCMS`模块`templates/`目录下的文件，名称以`Template.php`. 模板必须包含助手组并在底部`sfSimpleCMS`调用助手。`include_editor_tools()`

因此，基本上，您创建一个名为的新文件，然后[**将该文件**](http://trac.symfony-project.org/browser/plugins/sfSimpleCMSPlugin/trunk/modules/sfSimpleCMS/templates/simplePageTemplate.php)`/apps/frontend/modules/sfSimpleCMS/templates/myPageTemplate.php`复制/粘贴到其中作为新模板的起点。[](http://trac.symfony-project.org/browser/plugins/sfSimpleCMSPlugin/trunk/modules/sfSimpleCMS/templates/simplePageTemplate.php)

# objective-c - 在 Objective-c 代码中查找 Mac 用户的活动目录中的用户名和用户 SID

> ID：11775983
> 
> 赞同：1
> 
> 时间：2012-08-02T10:55:32.313
> 
> 标签：objective-c

我是 Mac 开发的新手。我正在使用Objective-C，我想知道如何找到登录到Mac机器的用户的域名和用户SID。在 Windows 中，我们有 Microsoft 提供的 APIS，它会告诉我们来自 Active Directory 的用户信息。我正在为 Mac 开发寻找类似的选项。

我还想知道一件事。在 Mac 中，我们可以使用 getuid( void ) 函数获取用户 ID。但它对所有域用户都是唯一的吗？如果不是，那么请告诉我任何要调查的替代方法，以便我可以维护一个唯一的 ID 来区分域中的所有用户。

注意：这里我考虑所有 Mac 机器都连接到 Windows Active Directory。请指导我。

谢谢，陶西夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:03:59.570

对于用户名，您可以使用：

```
NSString * NSUserName( void );
NSString * NSFullUserName( void ); 
```

从`<Foundation/Foundation.h>`

对于用户 ID，只需使用：

```
uid_t getuid( void ); 
```

从`<unistd.h>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-03T11:41:23.297

使用 BSD 的[成员资格 API](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man3/mbr_uuid_to_sid.3.html)，您可以查询域控制器以获取用户的 SID

```
- (NSText*)getSidForUser:(NSText*)user
{
    uuid_t uuid;

    // change the type (ID_TYPE_USERNAME) for different types of data, such as Group
    if(mbr_identifier_to_uuid(ID_TYPE_USERNAME, [user UTF8String], [user length], uuid) != 0)
    {
        // handle error
        return nil;
    }

    nt_sid_t ntSid;
    if(mbr_uuid_to_sid(uuid, &ntSid) != 0)
    {
        // handle error
        return nil;
    }        

    char buffer[200] = {0};
    if(mbr_sid_to_string(&ntSid, buffer) != 0)
    {   
        // handle error     
        return nil;
    }

    NSString* sid = [NSString stringWithCString:buffer encoding:NSUTF8StringEncoding];

    return sid;
} 
```

# iphone - 如何在 iPhone 中的 UIButton 文本下方添加下划线？

> ID：11775984
> 
> 赞同：0
> 
> 时间：2012-08-02T10:55:35.400
> 
> 标签：iphone, uitableview

> **可能重复：**
> [UIButton 中的下划线文本](https://stackoverflow.com/questions/2630004/underlining-text-in-uibutton)

我在 UITableViewCell 中添加了自定义按钮，我想用带下划线的文本给出标题。我们如何通过代码或界面构建器来实现这一点？

# java - Java：防止 System.exit、文件访问等用于用户定义的表达式

> ID：11775985
> 
> 赞同：3
> 
> 时间：2012-08-02T10:55:35.913
> 
> 标签：java

在我们的应用程序中，用户能够定义由我们的主引擎执行的 Java 表达式（这些表达式只是方法调用：例如 Math.abs(42) ）。它们是通过反射执行的。

有哪些不同的解决方案可以直接或通过最终在内部调用 System.exit 的方法调用来防止那些表达式调用例如 System.exit （但还有文件访问和其他......）？

请注意，可以在不同的线程中执行几个不同的表达式。例如，使用 SecurityManager 阻止文件访问不起作用，因为在执行表达式时主引擎必须仍然能够访问文件系统。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T11:05:36.243

你说你不能使用是错误的`SecurityManager`——这正是它的用途：托管不受信任的代码，如在 Applet 容器或 RMI 服务器中。现代的 SecurityManager 配置了策略文件，这些文件授予特定的细粒度权限，包括对文件系统的有限访问。您需要使用 SecurityManager，但您需要成为它的专家。

这是一个巨大的话题；最好的办法是谷歌“Java 安全策略文件”并阅读所有你能读到的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T11:01:31.230

你在做什么是疯狂的。允许用户在你的机器上执行任意 Java 代码是一个糟糕的想法，而且你无法确保它对知道他们的东西的黑客安全。

我能想到的唯一解决方案是创建一个可能使用的包和方法的白名单。但是尝试将特定操作列入黑名单永远不会让您到达那里。在破坏东西方面，总会有人比你更聪明。

更新：我现在已经阅读了更多关于`SecurityManager`它的信息，而且您似乎可以很好地控制包访问，所以我建议您使用 Ernest 的回答。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T11:17:01.160

Java 安全系统是用于此目的的合适工具。`SecurityManager`只是您必须使用的该系统的一部分。

基本上，您不会自己调用不受信任的代码。相反，您将该调用包装成 a`PrivilegedAction`并将其提供给其中一个`AccessController.doPrivileged`方法。然后不受信任的代码将在另一个`ProtectionDomain`.

因此，您必须配置两个保护域：一个用于具有完全权限的引擎，另一个用于具有降低权限的不受信任的代码。

但正如欧内斯特已经提到的：这是相当复杂的东西，不适合像这样的问答网站。阅读 Oracle 和 Co. 提供的相应教程。使用上述关键字进行搜索。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T11:19:09.703

例如 Apache Velocity 有一个类似的问题需要解决。他们使用velocity.properties中定义的黑名单类和包：

```
# ----------------------------------------------------------------------------
# SECURE INTROSPECTOR
# ----------------------------------------------------------------------------
# If selected, prohibits methods in certain classes and packages from being 
# accessed.
# ----------------------------------------------------------------------------

introspector.restrict.packages = java.lang.reflect

# The two most dangerous classes

introspector.restrict.classes = java.lang.Class
introspector.restrict.classes = java.lang.ClassLoader

# Restrict these for extra safety

introspector.restrict.classes = java.lang.Compiler
introspector.restrict.classes = java.lang.InheritableThreadLocal
introspector.restrict.classes = java.lang.Package
introspector.restrict.classes = java.lang.Process
introspector.restrict.classes = java.lang.Runtime
introspector.restrict.classes = java.lang.RuntimePermission
introspector.restrict.classes = java.lang.SecurityManager
introspector.restrict.classes = java.lang.System
introspector.restrict.classes = java.lang.Thread
introspector.restrict.classes = java.lang.ThreadGroup
introspector.restrict.classes = java.lang.ThreadLocal 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T11:35:27.150

Java中有太多东西可能会导致您可能没有意识到的问题。最安全的做法是创建一个允许的类列表，并通过自定义类加载器在单独的进程中运行这些类（这样你就可以安全地杀死它）

对于大多数人甚至不知道的严重危险代码，请查看[sun.misc.Unsafe](http://www.docjar.com/html/api/sun/misc/Unsafe.java.html)，它可以让您

*   访问内存的随机区域。
*   创建类的新实例而不调用构造函数，例如枚举的新实例。
*   离散地锁定和解锁对象监视器。（没有同步块）

# javascript - JW Player: 没有找到合适的球员

> ID：11775986
> 
> 赞同：2
> 
> 时间：2012-08-02T10:55:38.940
> 
> 标签：javascript, jwplayer

我的网页上有以下 javascript：

```
 jwplayer(elementId).setup({
        'modes': [
                    { type: 'html5' },
                    { type: 'flash', src: '/jwplayer/player.swf' }
                ],
        file: videoUrl,
        width: width + "px",
        height: height + "px"
    }); 
```

在 Google Chrome（*版本 20.0.1132.57 m*）中运行页面时，我收到错误消息：

> 没有找到合适的球员

我已经调试了我的代码，并且所有变量都传递了正确的值。我也在其他应用程序上使用过相同的脚本，它们运行良好。

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:55:36.700

安装 adobe flash player 请找到下面提到的链接 [http://get.adobe.com/flashplayer/](http://get.adobe.com/flashplayer/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T16:55:04.353

我认为当证明错误的 URL 或错误的设置对象时，可能会出现此错误。

尝试检查您的网址。此外，您不应在此处使用 PX "width + "px"，例如将其保留为 width: 200。

# perl - 使用单个散列的副本填充 perl 散列数组

> ID：11775988
> 
> 赞同：0
> 
> 时间：2012-08-02T10:55:47.333
> 
> 标签：perl, reference, copy, perl-data-structures

我已经搜索和搜索，但我找不到任何我发现可以工作的代码。很抱歉，如果这是在重复旧的情况，但我现在花了 2 天时间试图让这 10 行工作，但我已经束手无策了 :-(

我正在运行 Perl 5.8.8。

我想在 Perl 中填充一个哈希数组，使其包含我正在更新的单个哈希变量的多个**副本。**我的代码在这里：

```
use strict;
use warnings;

my @array;

my %tempHash = (state => "apple", symbol => "54", memberId => "12345");
push(@array, \%tempHash);

%tempHash = (state => "tiger", symbol => "22", memberId => "12345");
push(@array, \%tempHash);

%tempHash = (state => "table", symbol => "37", memberId => "12345");
push(@array, \%tempHash);

printf("%p %p %p\n", $array[0], $array[1], $array[2]);

foreach my $entry (@array){
    printf("state: %s\n", $entry->{state});
    printf("memberId: %s\n", $entry->{memberId});
    printf("symbol: %s\n\n", $entry->{symbol});
} 
```

这会产生以下输出：

```
1868954 18688d0 18688c4
state: table
memberId: 12345
symbol: 37

state: table
memberId: 12345
symbol: 37

state: table
memberId: 12345
symbol: 37 
```

所以在我看来，数组中的标量值是不同的。然而，这些标量指向的哈希值都是相同的。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T11:38:01.977

1) The code you posted doesn't work under `use strict;`, did you mean %tempHash and %hash are really the same variable?

2) If you use %s instead of %p, you'll get 3 identical HASH(0x1234abcd) strings, which means the contents of the array are indeed references to the same hash.

3) I would suggest creating a new anonymous hash each time:

```
#!/usr/bin/perl -w
use strict;
use Data::Dumper;

my @array;
my %tempHash = (state => "apple", symbol => "54",memberId => "12345");
push(@array, { %tempHash });

%tempHash = (state => "tiger", symbol => "22", memberId => "12345");
push(@array, { %tempHash });

%tempHash = (state => "table", symbol => "37", memberId => "12345");
push(@array, { %tempHash });

print Dumper( \@array ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T12:29:39.020

听起来您正在使用`Text::CSV`.

假设你的代码是这样的

```
my %tempHash;
my @array;

while (my $line = $csv->getline($fh)) {
  # Add values to %tempHash;
  push @array, \%tempHash;
} 
```

那么你可以很简单地通过声明循环`%tempHash`来解决你的问题`while`

```
my @array;

while (my $line = $csv->getline($fh)) {
  my %tempHash;
  # Add values to %tempHash;
  push @array, \%tempHash;
} 
```

因为 Perl 每次输入块时都会创建一个新的词法散列

* * *

**更新**

如果每个输入记录后数据不一定完整，则编写

```
my @array;
my $data = {};

while ( my $line = $csv->getline($fh) ) {
  # use information from $line to supplement $data
  if ($data is complete) {
    push @array, $data;
    $data = {};
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T11:32:55.490

如果您将`use strict`and添加`use warnings`到 tor 脚本，它会告诉您出了什么问题：

1st，您填充哈希`temphash`并存储对它的引用。接下来，您创建一个新的拥有，`hash` 您填写但永远不要使用！相反，您将新的引用添加到`temphash`...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T11:10:55.607

我敢打赌，推送功能并不关心引用。请参阅[perldoc](http://perldoc.perl.org/functions/push.html)：

> 从 Perl 5.14 开始， push 可以采用标量 EXPR，它必须包含对 unblessed 数组的引用。该参数将被自动取消引用。推送的这一方面被认为是高度实验性的。在 Perl 的未来版本中，确切的行为可能会改变。

编辑

您可以尝试不使用推送：

```
my @array;
my %tempHash = (state => "apple", symbol => "54", memberId => "12345");
$#array=4;
$array[0]=\%tempHash;
$array[1]=\%tempHash;
$array[2]=\%tempHash;
printf("%p %p %p\n", $array[0], $array[1], $array[2]);
foreach my $entry (@array){
    printf("state: %s\n", $entry->{state});
    printf("memberId: %s\n", $entry->{memberId});
    printf("symbol: %s\n\n", $entry->{symbol});
} 
```

结果与我的 perl 解释器刚刚告诉我的结果相同:-( (perl 5.14.2)

# iphone - 简单协议示例的 ARC 语义问题？

> ID：11775989
> 
> 赞同：3
> 
> 时间：2012-08-02T10:55:49.987
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

我刚刚通过快速测试尝试了一些东西，我有一个问题，在下面的代码中：

```
@protocol stuffieProtocol <NSObject>
@required 
-(void)favouiteBiscuit;
@end 
```

.

```
// DOG & TED ARE IDENTICAL, THEY JUST LIKE DIFFERENT BISCUITS
@interface Dog : NSObject <stuffieProtocol>
@property (strong, nonatomic) NSString *name;
@end

@implementation Dog

- (id)init {
    return [self initWithName:@"Unknown"];
}

- (id)initWithName:(NSString *)name {
    self = [super init];
    if(self) {
        _name = name;
    }
    return self;
}

- (void)whoAreYou {
    NSLog(@"MY NAME IS: %@ I AM A: %@", [self name], [self class]);
}
- (void)favouiteBiscuit {
    NSLog(@"FAVOURITE BISCUIT IS: Costa Jam Biscuit");
}
@end 
```

.

```
Dog *stuffie_001 = [[Dog alloc] initWithName:@"Dog Armstrong"];
Ted *stuffie_002 = [[Ted alloc] initWithName:@"Teddy Sullivan"];

NSArray *stuffieArray = @[stuffie_001, stuffie_002];
for(id<stuffieProtocol> eachObject in stuffieArray) {
    [eachObject whoAreYou]; // << ERROR
    [eachObject favouiteBiscuit];
} 
```

我的问题是我收到一个错误`"ARC Semantic Issue: No known instance method for selector 'whoAreYou'"`

`[eachObject whoAreYou];`如果我加上前缀`[(Dog *)eachObject whoAreYou];`then 这适用于循环的所有迭代，但感觉不对，因为数组中的所有对象都不是 type `Dog`。

我应该用什么前缀才能正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T11:10:49.117

好吧，你将 eachObject 声明为一个 ID

这意味着编译器不知道它是什么类型的对象

它只知道它实现了stuffieProtocol协议，所以它肯定可以响应方法：favouiteBiscuit

但它不知道它是否可以响应方法 whoAreYou

你可以做很多事情来避免这种情况

最简单的是：

您可以询问 eachObject 是否可以执行选择器 whoAreYou，在这种情况下您执行该选择器

```
if ([eachObject respondsToSelector:@selector(whoAreYou) ]) {
    [eachObject performSelector:@selector(whoAreYou) ];
} 
```

这样编译器就可以避免控制每个对象是否实现 whoAreYou 方法

它将在运行时完成，所以如果每个对象中有一个方法 whoAreYou，那么好的，它将被调用

另一种方法可能是为 ted 和 dog 创建一个共同的超类

（例如 `SuperClassOfTedAndDog <stuffieProtocol`> ）

并在该超类中声明方法 whoAreYou，然后在您的 for 循环中使用该超类而不是 ID：

```
for(SuperClassOfTedAndDog* eachObject in stuffieArray) {
    [eachObject whoAreYou]; 
    [eachObject favouiteBiscuit];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T11:16:18.553

添加

```
-(void) whoAreYou; 
```

到您的协议。然后编译器知道`eachObject`在循环中响应该方法。

# performance - 设置 Windows 7 Perfmon 以收集性能数据 - 要收集哪些数据？

> ID：11775991
> 
> 赞同：0
> 
> 时间：2012-08-02T10:55:56.963
> 
> 标签：performance, excel, admin, performancecounter, perfmon

如何收集进程内存使用情况（Excel 2010）？

我应该选择哪些性能数据来向我的老板展示我的计算机对于在 Windows 7 下使用 Excel 2010 64 位处理大文件（~130 Mb）来说太慢了？

（我正在使用 Intel 3i-2100 3.1 GHz，4 GB RAM）

问题之一是系统冻结并且什么都不做，因此处理器为 0% 等。

这看起来像一个软问题，但我认为这很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:40:10.027

看看 Excel 2010 PowerPivot 插件。PowerPivot 是 Excel 的 SQL 分析服务引擎，可以在本地客户端 PC 上处理大量数据。

*   [http://www.microsoft.com/en-us/bi/powerpivot.aspx](http://www.microsoft.com/en-us/bi/powerpivot.aspx)
*   这是 PowerPivot 的众多演示之一，用于展示一些基本功能 - [http://www.microsoft.com/en-us/bi/featureVideoBIVideos.aspx?videoId=-gBbnKnILLc](http://www.microsoft.com/en-us/bi/featureVideoBIVideos.aspx?videoId=-gBbnKnILLc)

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T18:35:06.203

Excel 根本不适用于此类文件。尝试将这些数据注入数据库并从那里开始工作。或者，如果您想坚持使用 excel，请尝试聚合数据……例如，使用每小时聚合而不是 1 分钟原始数据。

# mercurial - 推送上的 Bitbucket 502

> ID：11775992
> 
> 赞同：1
> 
> 时间：2012-08-02T10:56:01.920
> 
> 标签：mercurial, bitbucket

我有一个 mercurial 存储库，它在 93meg 推送到 bitbucket 的中途突然停止，出现 502 bad gateway 错误。

无论如何，我可以获得更多的诊断信息。这让我难过了好几天！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:29:18.383

这不是一个很好的答案，但从 HTTP 切换到 SSH 可能会解决您的问题。（它对我有用。）

有关说明，请参见此处： [https ://confluence.atlassian.com/bitbucket/set-up-an-ssh-key-728138079.html](https://confluence.atlassian.com/bitbucket/set-up-an-ssh-key-728138079.html)

# objective-c - 按下 CustomTabBar 中的 Tab 时如何执行操作？

> ID：11775997
> 
> 赞同：0
> 
> 时间：2012-08-02T10:56:28.457
> 
> 标签：objective-c, uitabbarcontroller, custom-controls

我创建了一个按预期工作的 CustomTabBar。除了选择选项卡之外，我还想在已选择此选项卡时在我的一个视图控制器上执行一项操作（刷新一些信息）。我的意思是，我选择了一个选项卡，然后再次按下该选项卡并触发 ViewController 的操作。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:08:53.707

如果您的自定义标签栏控制器是 UITabBarController 的子类，那么您可以提供一个响应`tabBarController:didSelectViewController:`. 在 iOS 3.0 或更高版本中，如果视图控制器与已选择的视图控制器相同，这仍会触发，因此您可以跟踪此情况并将更新消息发送到正确的视图控制器。

如果您没有继承 UITabBarController 并且自己编写了标签栏更改代码，那么实现委托协议并发送标签更改和其他事件的通知可能是一个好主意。