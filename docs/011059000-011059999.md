# StackOverflow 问答 11059000-11059999

# php - Symfony 编辑管理视图

> ID：11059003
> 
> 赞同：0
> 
> 时间：2012-06-15T22:37:14.990
> 
> 标签：php, symfony1, admin, backend

我在现有的 symfony 项目上工作，我想在管理员（后端应用程序）中更改自动生成的视图。我发现我可以在`/lib/vendor/symfony/lib/plugins/sfDoctrinePlugin/data/generator/sfDoctrineModule/admin/template/templates/...`

我认为编辑这些文件不是一个好主意。如何更改这些模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T22:42:50.067

您可以在模块级别覆盖模板。访问有问题的页面后，查看缓存目录并检查那里的自动生成代码，例如：

```
cache/
  backend/
    modules/
      /autoMyModule/
        templates/ 
```

然后，您可以找出需要更改的文件，然后在其中创建该文件`apps/backend/myModule/templates`并覆盖您需要的文件。

# ios - 如何将 Core Data 与多个视图控制器和自定义类一起使用？

> ID：11059008
> 
> 赞同：0
> 
> 时间：2012-06-15T22:37:42.120
> 
> 标签：ios, xcode, core-data, keychain

好吧，我仍然在我的 iOS 项目中使用 Core Data，我认为我对它在概念上的工作原理有一个很好的了解，但是我正在努力如何在我的项目中实现。我在我的 Xcode 项目中创建了一个场景，我希望软件的用户/操作员创建一个用户帐户，并将其存储在项目中。

首先让我声明我将项目作为*单视图应用程序*启动，并通过执行以下操作将 Core Data 实现到我的项目中：

*   在我的项目中链接到核心数据框架
*   然后创建了另一个项目，选中了 Core Data 复选框
*   复制/粘贴*AppDelegate.h/m 文件中的代码。*
*   创建*文件.xcdatamodeld*
*   将以下行添加到*KegCop-Prefix.pch*文件`#import <CoreData/CoreData.h>`
*   创建了一个 Entity *Account* ，并在*file.xcdatamodel*中添加了以下属性*email* *phoneNumber* *username*

 *在完成我认为必要的步骤后，我寻找一些关于核心数据的教程。我确实设法找到了一些，但它们似乎都使用*UITableViewController* 我试图在我的项目中实现核心数据的视图控制器是*UIViewController*

然后在了解到不应将密码存储在 Core Data 数据库中之后，我决定弄清楚我将如何存储用户将创建的*pin 。*我遇到了一个教程，它实现了核心数据和钥匙串，将非敏感数据存储在核心数据数据库中，将敏感数据存储在钥匙串中。该教程可以在[这里](http://josebolanos.wordpress.com/2012/03/16/core-data-passwords-in-keychain/)找到。然而，本教程还没有准备好 ARC，因此需要对一些*KeychainHelper.m*文件进行一些修改。在stackoverflow 的[帮助下](https://stackoverflow.com/questions/11012860/getting-error-using-cftyperef-with-arc)，KeychainHelper.m 文件似乎已准备好 ARC。

现在完成上述教程后，我的项目中有三个新类*AccountBase*、*Account*和*KeychainHelper*。我的项目目前正在构建没有任何错误 \o/ 但我希望能够将新创建的类实现到我的项目中，即实际使用它们。这是本教程未讨论的内容。现在请记住，近一个月来，我几乎每天都在使用 Xcode，所以我对很多东西还是陌生的。其中之一就是我将如何将这些新类实现到我的项目中。

基本上我希望用户输入用户名、pin（两次）电子邮件和电话号码。我想将用户名、电子邮件和电话号码存储在核心数据数据库中，并将 pin 存储在钥匙串中。

**我将如何在*ViewControllerCreate中使用新创建的类文件**Account*来检索用户输入到文本字段中的值并将它们存储到 Core Data 数据库中？**

 *很抱歉写了这么长的帖子，我想我会尽量把它说清楚，这样就不会有任何混淆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T02:43:51.527

I was able to solve this problem by importing the Account class into the header of the ViewControllerCreate class with the following line of code.

`#import "Account.h"`

I was able to use the ManagedObjectContext through out the various classes / view controllers with the following code

```
// Core Data

if (_managedObjectContext == nil)
{
    _managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
    NSLog(@"After _managedObjectContext: %@", _managedObjectContext);
} 
```

I was then able to utilize the **Account** class in the ViewControllerCreate with the following code:

```
// Core Data - retrieve values from text fields and store in database.
    Account *newAccount;
    newAccount = [NSEntityDescription insertNewObjectForEntityForName:@"Account" inManagedObjectContext:_managedObjectContext];
    [newAccount setValue:_createUserTextField.text forKey:@"username"];
    [newAccount setValue:_createEmailTextField.text forKey:@"email"];
    [newAccount setValue:_createPhoneNumber.text forKey:@"phoneNumber"];

    // TODO store pin in keychain
    [newAccount setPassword:_createPinTextField.text];
    NSLog(@"Pin saved is %@", [newAccount password]); 
```**

# jquery - 使用 JQuery/AJAX 下载文件数据

> ID：11059014
> 
> 赞同：0
> 
> 时间：2012-06-15T22:38:08.663
> 
> 标签：jquery

我有一个使用 Java 的 Spring 库的服务器，当我在客户端执行 AJAX 发布时，它会根据参数*queryParam*生成一个 .csv 文件。

```
$.ajax(
{
    url: myUrl,
    type: 'POST',
    contentType: 'application/json',
    data: queryParam,
    success: function(response)
    {
        console.log(response);
    },
    error: function(jqXHR, textStatus, errorThrown)
    {
        console.error("error in query()");
        console.log(jqXHR);
        console.log(textStatus);
        console.log(errorThrown);
    }
}); 
```

服务器端代码附加适当的标头并将数据**直接**写入响应流（请注意，我必须这样做，因为我无法在服务器上创建文件）：

```
@RequestMapping(value = "/query", method = RequestMethod.POST)
public void exportSearchEvents(HttpServletResponse resp, @RequestBody QueryParams params)
{
    Writer os=null;

    try
    {
        resp.setHeader("Content-Disposition", "attachment; filename=\"searchresults.csv\"");
        resp.addHeader("Content-Type", "application/force-download");
        resp.addHeader("Content-Type", "application/csv");
        resp.addHeader("Content-Type", "application/x-download");

        resp.setContentLength(580);
        resp.addHeader("Pragma", "public");
        resp.addHeader("Expires", "0");
        resp.addHeader("Cache-Control", "must-revalidate, post-check=0, pre-check=0");
        os = resp.getWriter();
        createFile(os, params); //writes the .csv data to the response PrintWriter object
        os.flush();
        os.close();
    }
    catch(Exception e)
    {
        logger.info("Error creating .csv file. " + e.getMessage());
        logger.error("Error creating .csv file.", e);
    }

    logger.info("got to here. " + resp.toString());

    if(os==null)
    {
        logger.info("Error creating .csv file: null");
        logger.error("Error creating .csv file: null");
        return;
    }
    return;
} 
```

当它返回时，我得到一个返回结果的字符串（应该在 .csv 中），但没有弹出下载选项框。

另外，我应该提到，由于无法更改文件权限，我**无法**在服务器上创建文件并从浏览器链接到它（即*document.location.href = /server/createdfile.csv或其他）。*而且我还尝试了各种形式的隐藏 iframe，它们可以链接到各个地方，但是由于我必须以某种方式将*queryParam*提供给服务器，所以我不能这样做（如果我错了，请纠正我）。
而且由于 Spring 的限制，简单的 POST 和 GET 将不起作用（我假设这是 Spring 的问题）：

```
$.get(myUrl, queryParam, function(response)
{
    console.log(response);
}); 
```

和

```
$.post(myUrl, queryParam, function(response)
{
    console.log(response);
}); 
```

给我吗：

```
The server refused this request because the request entity is in a format not supported by the requested resource for the requested method (). 
```

另请注意，我正在避免使用 Flash，所以请不要回答有关 Flash 的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-07T06:25:05.417

[http://gloryplus.com/index.php?route=product/product&path=81&product_id=283](http://gloryplus.com/index.php?route=product/product&path=81&product_id=283)

```
$fsize = filesize($fullPath);
$path_parts = pathinfo($fullPath);
$ext = strtolower($path_parts["extension"]);
switch ($ext) {
    case "pdf":
    header("Content-type: application/pdf"); // add here more headers for diff. extensions
    header("Content-Disposition: attachment; filename=\"".$path_parts["basename"]."\""); // use 'attachment' to force a download
    break;
    default;
   header("Content-type: application/octet-stream");
  header("Content-Disposition: filename=\"".$path_parts["basename"]."\"");
}
while(!feof($fd)) {
    $buffer = fread($fd, 2048);
    echo $buffer;
} 
```

# php - 在本地保存 RTSP 流，然后显示本地副本“实时”

> ID：11059023
> 
> 赞同：1
> 
> 时间：2012-06-15T22:39:34.107
> 
> 标签：php, html, stream, ip, rtsp

我使用带宽有限的无线互联网提供商在远程位置有一台 vivotek IP 摄像头。由于带宽有限以及可能有数百人同时尝试访问它，我需要一种替代解决方案，而不是直接访问流。

我的想法是我可以通过 RTSP 将它流式传输到我的网络主机并将其本地保存到网络主机上。然后在网页中播放本地副本。这应该将与 IP 摄像机的连接限制为仅一个（来自网络主机），但仍会为观众播放“实时”副本（不必完全实时，只要它是某种类型的流）。

我会限制我能做的事情，因为它只能是一个普通的网络主机（而不是 VPS），所以没有 root 访问权限或安装软件或类似的东西的能力。只有 FTP、PHP、MySQL 等。

从 IP 摄像机我可以得到 RTSP 流或运动 jpeg。但是网页上的最终显示需要跨平台（如果我没记错的话，我认为IE不支持motion jpeg，firefox也不支持rtsp）。如果可以将其转码为 AVI 或类似的内容，然后嵌入到页面中，这可能是理想的，但问题再次仅限于 webhost 端。

我最大的问题是我从来没有做过这样的事情，所以我什至不知道从哪里开始......或者它是否可能。

我愿意接受所有建议，因为它需要完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:13:41.357

有人建议我使用[http://www.ustream.tv/](http://www.ustream.tv/)。就我个人而言，我无法让它工作，但我把它扔在那里以防它帮助别人。

如果出现更好的答案，那么我一定会看看，因为我永远无法完成这个项目。

# asp.net-mvc - 如何从自定义验证代码向控制器或视图返回其他（即不仅仅是字段=> 错误消息）验证信息？

> ID：11059030
> 
> 赞同：3
> 
> 时间：2012-06-15T22:40:35.493
> 
> 标签：asp.net-mvc, modelstate, asp.net-mvc-validation

我正在寻找一种从我的自定义验证代码中返回以下信息的方法：

```
public enum ValidationErrorTypeFlags
{
    Error_Input = 1 << 0,               // a "field specific" error which is checked both clientside and serverside 
    Error_Input_ServerSide = 1 << 1,    // a "field specific" error which can only be checked serverside
    Error_General = 1 << 2              // serverside general error
} 
```

在验证代码（IValidatableObject 或 ValidationAttribute）中，当我检测到错误时，我希望能够将上述错误类型之一与 ValidationResult 相关联。

然后我希望能够遍历控制器或视图中的验证错误，并区分这些错误类型。

我目前正在使用 MVC 3（很高兴升级到 4）。

注意：

*   ModelState 不保留 ValidationResults AFAIK - 您只能访问 ViewData.ModelState.Values.Items[x].Errors 中的错误 - 这些已转换为 System.Web.Mvc.ModelError
*   似乎 MVC 验证只允许您在验证完成后访问 [key, 'error message'] 类型的验证结果。

我目前使用的 hack 是在自定义验证代码中装饰错误消息：

```
var field = new[] { validationContext.DisplayName };
return new ValidationResult("+Invalid format - use yyyy-mm-dd", field); 
```

然后在控制器中查找以 +,-,* 开头的错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T04:21:46.773

从自定义验证代码（不知道如何从内置代码完成），您可以`ValidationResult`通过从基类继承并从自定义验证属性返回来创建自定义类来做到这一点。

```
public class CustomValidationResult: ValidationResult
{
   // additional properties
} 
```

然后，您可以从控制器强制转换并检查验证结果是否是您的自定义类型并采取相应措施。

**更新：**

上面的想法不起作用，因为`ValidationResult`该类在 DataAnnotations 程序集中，它们被转换为`ModelValidationResult`，这就是我们在 MVC 中可以访问的全部内容。

似乎将数据注释验证中的额外信息传递给 MVC 看起来并不容易！

我正在浏览源代码，发现`ValidatableObjectAdapter`将. 我看不出扩展这个类有多大好处，但我们可以通过实现和复制代码轻松地创建自定义。`IEnumerable<ValidationResult>``IEnumerable<ModelValidationResult>``ValidatableObjectAdapter``ModelValidator``Validate`

我们必须创建一个自定义`ModelValidationResult`和自定义`ValidationResult`（这是`ValidationResult`我们将从验证中返回的自定义），并且在该`ConvertResults`方法中我们可以放置我们的转换代码来处理附加信息。

```
public class CustomValidatableObjectAdapter : ModelValidator
{
    public CustomValidatableObjectAdapter(ModelMetadata metadata, ControllerContext context)
      : base(metadata, context)
    {
    }

    public override IEnumerable<ModelValidationResult> Validate(object container)
    {
      object model = Metadata.Model;
      if (model == null)
      {
        return Enumerable.Empty<ModelValidationResult>();
      }

      IValidatableObject validatable = model as IValidatableObject;
      if (validatable == null)
      {
        throw new Exception("model is of not type validatable");
      }

      ValidationContext validationContext = new ValidationContext(validatable, null, null);

      return ConvertResults(validatable.Validate(validationContext));
    }

    private IEnumerable<ModelValidationResult> ConvertResults(IEnumerable<ValidationResult> results)
    {
      foreach (ValidationResult result in results)
      {
        // iterate the ValidationResult enumeration and cast each into CustomValidationResult
        // and conver them into enumeration of CustomModelValidationResult.
      }
    }
} 
```

最后，我们必须告诉`DataAnnotationsModelValidatorProvider`我们`CustomValidatableObjectAdapter`在`Application_Start`Global.asax.cs 事件中的使用。

```
DataAnnotationsModelValidatorProvider.RegisterDefaultValidatableObjectAdapterFactory((metadata, context) => new CustomValidatableObjectAdapter(metadata, context)); 
```

所以你必须创建一个自定义`ValidationResult`，自定义`ModelValidationResult`和一个自定义`ValidatableObjectAdapter`。

我没有对此进行测试，但我希望这会奏效。我可能会建议一个比这更好、更容易的解决方案。

# android - 无法在模拟器中启动 android 应用程序

> ID：11059032
> 
> 赞同：0
> 
> 时间：2012-06-15T22:40:47.390
> 
> 标签：android, emulation

我无法在模拟器中启动我的应用程序。以下是eclipse的消息。可以做什么？

```
[2012-06-16 04:07:20 - Asin] ------------------------------
[2012-06-16 04:07:20 - Asin] Android Launch!
[2012-06-16 04:07:20 - Asin] adb is running normally.
[2012-06-16 04:07:20 - Asin] Performing com.asin.amit.AsinActivity activity launch
[2012-06-16 04:07:20 - Asin] Automatic Target Mode: using existing emulator 'emulator-   5554' running compatible AVD 'Vid'
[2012-06-16 04:07:20 - Asin] Uploading Asin.apk onto device 'emulator-5554'
[2012-06-16 04:07:26 - Asin] Installing Asin.apk...
[2012-06-16 04:07:27 - Asin] Installation error: INSTALL_FAILED_INSUFFICIENT_STORAGE
[2012-06-16 04:07:27 - Asin] Please check logcat output for more details.
[2012-06-16 04:07:27 - Asin] Launch canceled! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T22:57:52.540

您需要增加 Android 模拟器的内存容量。有两种方法可以做到这一点，

1.  右键单击您的 Android 项目的根目录，转到“运行方式”然后转到“运行配置...”在左侧树中找到“Android 应用程序”节点，然后选择您的项目并转到“目标”窗口右侧的选项卡向下查找“Additional Emulator Command Line Options”字段（有时您需要使窗口更大），最后将“-partition-size 1024”粘贴到那里。单击应用，然后单击运行以使用您的模拟器。

2.  转到 Eclipse 的首选项，然后选择“启动”在“默认模拟器选项”字段中添加“-partition-size 1024”，然后单击“应用”并像往常一样使用您的模拟器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T23:00:40.377

1）尝试关闭并重新启动模拟器。如果您使用“保存到快照”功能，请在下一个模拟器启动时禁用它（即不要选择“从快照启动”）

2）通过模拟器中的设置->“应用程序”菜单卸载您的应用程序（如果之前已成功安装）

3）最后，如果这些没有帮助，通过 AVD-Manager 设置增加模拟器的 SD 卡大小

# ruby-on-rails - 使用 Rails3 为旅游网站实施 i18n / l10n 的最佳方法是什么？

> ID：11059036
> 
> 赞同：1
> 
> 时间：2012-06-15T22:41:19.940
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization, translation

我正在使用 Rails3 开发旅游目的地列表引擎。主要功能将列出可供预订的房间和位置。

我想知道什么是内化我的应用程序的最佳方法，因为我需要几种语言的描述、url 和 UI。我知道 Rails 内置了很好的 i18n，但是你会推荐什么方法来将内容翻译成多种语言？我应该选择 [Globalize3](https://github.com/svenfuchs/globalize3)还是其他的？

稍后，可能还会涉及预订引擎。但暂时不是。

# android - android中的html5画布

> ID：11059039
> 
> 赞同：1
> 
> 时间：2012-06-15T22:41:24.837
> 
> 标签：android, html, canvas, clicklistener

有什么特殊方法可以让 Android 的浏览器响应点击/按下事件吗？我的代码在流行的浏览器中运行良好，但是当我使用我的 Android 平板电脑或 Android 手机时，节点在拖动/按下时不会移动。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title></title>
</head>
<style type="text/css">
html, body {
  width:  100%;
  height: 100%;
  margin: 0px;
}
#blurb_canvas {
  position: absolute; 
  top: 0px;
  left: 150px;
} 
#blurb_data_holder {
  height: 100%;
  width: 150px;
  top: 0px;
  left: 0px;
  overflow-y: auto;
} 
input.blurb_btn {
    background-color: #eaeaea;
    font-weight: bold;
    border: solid 1px #c5c5c5;
    cursor: pointer;
    width: 9em;
    height: 2em;
    padding: 5px;
} 
</style>
<body onLoad="init();">

    <table id="blurb_data_holder">
        <tr>
            <td align="center" valign="top">
            <input type="submit" title="" value="Data 1" id="data_1" class="blurb_btn" onClick="createBlurbNode(this.id);"/> <br />
            <input type="submit" title="" value="Data 2" id="data_2" class="blurb_btn" onClick="createBlurbNode(this.id);"/> <br />
            <input type="submit" title="" value="Data 3" id="data_3" class="blurb_btn" onClick="createBlurbNode(this.id);"/> <br />
            <input type="submit" title="" value="Data 4" id="data_4" class="blurb_btn" onClick="createBlurbNode(this.id);"/> <br />
            <input type="submit" title="" value="Data 5" id="data_5" class="blurb_btn" onClick="createBlurbNode(this.id);"/> <br />
            </td>
        </tr>
    </table>

    <canvas id="blurb_canvas">If you are able to see this message, your browser does not support HTML5's canvas feature.</canvas>

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
    var canvasLay;
    var canvasContext;
    var blurbNodes;
    var x = 50;
    var y = 50;
    var movingObj = false;
    var movinganotherObj = false;
    var blurbSentences;

    function init(){
        canvasLay = document.getElementById('blurb_canvas');
        canvasContext = canvasLay.getContext('2d');
        canvasLay.width = window.innerWidth-150;
        canvasLay.height = window.innerHeight;

        blurbNodes = [];
        blurbNodes.push(new BlurbNode(300,75,60,1,1,'stuff here a'));
        blurbNodes.push(new BlurbNode(600,300,60,1,1,'stuff here b'));
        setInterval(drawScreen,25);
        canvasLay.addEventListener("mousedown", beginMovingObj, false);
        canvasLay.addEventListener("mousemove", moveObj, false);
        canvasLay.addEventListener("mouseup", stopMovingObj, false);
    }

    function createBlurbNode(text){
        blurbNodes.push(new BlurbNode(100,100,60,1,1,text));
    }

    function BlurbNode(positionx, positiony, radius, dx, dy, label){
        this.canvas = canvasLay;
        this.context = canvasContext;
        this.positionx = positionx;
        this.positiony = positiony;
        this.radius = radius;
        this.dx = dx;
        this.dy = dy;
        this.label = label;
        this.moving = false;
        this.hasChild = false;
        this.hasParent = false;
    }

    BlurbNode.prototype.Create = function(){
        this.context.fillStyle = '#ff0000';
        this.context.beginPath();
        this.context.arc(this.positionx, this.positiony, this.radius, 0, Math.PI*2, true); 
        this.context.closePath();
        this.context.fill();
        this.context.fillStyle = '#000000';
        this.context.fillText(this.label,this.positionx-20,this.positiony);
    };

    function drawLineConnection(parentCenterx, parentCentery, childCenterx, childCentery){
        canvasContext.beginPath();
        canvasContext.fillStyle = '#000000';
        canvasContext.moveTo(parentCenterx, parentCentery);
        canvasContext.lineTo(childCenterx, childCentery);
        canvasContext.stroke();
    }

    function drawScreen(){  
        canvasLay.width = window.innerWidth-150;
        canvasLay.height = window.innerHeight;
        canvasContext.clearRect(0,0,screen.width,screen.height);

        for(i = 0; i<blurbNodes.length; i++){

            if(movingObj){
                if(!movinganotherObj && (x > blurbNodes[i].positionx-50 && x < blurbNodes[i].positionx+50) && (y > blurbNodes[i].positiony && y < blurbNodes[i].positiony+50)){
                    blurbNodes[i].moving = true;
                    movinganotherObj = true;
                }

                if(blurbNodes[i].moving && x < (canvasLay.width-60) && y < (canvasLay.height-60) && x > (60) && y > (60)){
                    blurbNodes[i].positionx = x;
                    blurbNodes[i].positiony = y;
                }
            }else{
                blurbNodes[i].moving = false;
            }

            if(!blurbNodes[i].hasChild && !blurbNodes[i].hasParent && !blurbNodes[i].moving && blurbNodes[i].positiony < canvasLay.height-60){
                blurbNodes[i].positiony = blurbNodes[i].positiony + blurbNodes[i].dy;
            }
            blurbNodes[i].Create();

            for(j = 0; j<blurbNodes.length; j++){
                if(blurbNodes[i] != blurbNodes[j] && 
                        Math.abs(blurbNodes[i].positionx - blurbNodes[j].positionx) < 150 &&
                        Math.abs(blurbNodes[i].positiony - blurbNodes[j].positiony) < 150){
                    drawLineConnection(blurbNodes[i].positionx, blurbNodes[i].positiony, blurbNodes[j].positionx, blurbNodes[j].positiony);
                    blurbNodes[i].hasChild = true;
                    blurbNodes[j].hasParent = true;
                }
            }
        }
    }

    function beginMovingObj(e) {
        movingObj = true;
    }
    function stopMovingObj(e) {
        movingObj = false;
        movinganotherObj = false;
    }
    function moveObj(e) {
        if(movingObj){
            x = e.pageX-150;
            y = e.pageY;
        }
    }
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T03:39:39.467

在这里，这有效：

[http://jsfiddle.net/simonsarris/W45jt/](http://jsfiddle.net/simonsarris/W45jt/)

你真正缺少的是'touchstart'、'touchmove'和'touchend'事件来补充你的鼠标事件。

你真的应该比我更好地组织它，这只是启动示例并运行的最快的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T22:47:17.437

我最近修改了一些用于绘图的代码，并且需要在一些地方寻找正确的事件属性。以下代码适用于我。希望它会帮助你。

```
drawStart = function(ev) {
        if(ev.originalEvent.touches && ev.originalEvent.touches.length) {
            ev = ev.originalEvent.touches[0];
        } else if(ev.originalEvent.changedTouches && ev.originalEvent.changedTouches.length) {
            ev = ev.originalEvent.changedTouches[0];
        }

        // Calculate the current mouse X, Y coordinates with canvas offset
        var x, y;
        x = ev.pageX - $(doodle.canvas).offset().left;
        y = ev.pageY - $(doodle.canvas).offset().top;
... 
```

# ruby-on-rails - rspec 中的错误，但在开发中工作正常（无法批量分配受保护的属性）

> ID：11059042
> 
> 赞同：0
> 
> 时间：2012-06-15T22:41:39.543
> 
> 标签：ruby-on-rails, rspec, factory-bot

我最近开始使用 rspec 和 factory_girl，并且正在为我的项目控制器中的创建操作制定基本控制规范。

所以我有这个作为之前的过滤器：

```
before :each do
  @project = FactoryGirl.create(:project)
  @user = FactoryGirl.create(:user, first_name: "Jim", last_name: "Smith", username: "jsmith")
  session[:user_id] = @user.id # this maintains the session for the user created in the previous linew
end 
```

我的项目希望有一个与之关联的用户。

所以在创建规范中，我有这个：

```
describe 'POST #create' do
  attribute_merge = FactoryGirl.attributes_for(:project).merge(FactoryGirl.attributes_for(:user))

  context "with valid attributes" do
    it "creates a new project" do
      expect{ 
        post :create, project: attribute_merge 
        }.to change(Project,:count).by(1)
    end
  end
end 
```

所以我要做的是传递项目属性散列和用户属性散列，因为一个项目需要至少一个用户才能创建。现在，我得到的错误是：

```
ActiveModel::MassAssignmentSecurity::Error:
Can't mass-assign protected attributes: first_name, last_name.... 
```

我应该补充一点，我的创建操作在开发中完美运行，并且`attr_accessible :first_name, :last_name, :username,...`在我的 user.rb 文件中确实有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T01:08:33.607

它失败了，因为您将用户的实际属性传递给项目，而不仅仅是对用户的引用。

尝试

```
post :create, project: FactoryGirl.build(:project, user: user).attributes 
```

# c# - 使用 .ajaxForm 和 C# MVC，如何防止 Internet Explorer 尝试保存 Json 结果？

> ID：11059043
> 
> 赞同：1
> 
> 时间：2012-06-15T22:41:48.993
> 
> 标签：c#, asp.net-mvc, json, internet-explorer

我正在通过 C# MVC 控制器返回一些 Json。其他浏览器工作正常，但 Internet Explorer (IE9) 尝试将返回的 Json 数据另存为文本文件。任何想法如何防止这种情况发生？

```
//MVC Controller Code...
return Json(new { redirectToUrl = Url.Action("Create", "Album",
                  new { url = url, isLocalFile = isLocalFile})});

//Clientside Javascript Code
$("#uploadImageForm").ajaxForm({
  beforeSubmit: function () {

  },
  success: function (data, textStatus, xhr) {
          window.location.href = data.redirectToUrl;
  },
  error: function (data, textStatus, xhr) {
  } 
}); 
```

我尝试将“text/plain”和“text/json”添加到 return Json 方法的第二个参数，它不起作用。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T09:19:30.517

从插件的[文档](http://jquery.malsup.com/form/#file-upload)中引用：`jquery.form`

> 支持 XMLHttpRequest Level 2 的浏览器将能够无缝上传文件，甚至在上传过程中获得进度更新。对于较旧的浏览器，使用涉及 iframe 的后备技术，因为无法使用 XMLHttpRequest 对象的 1 级实现来上传文件。这是一种常见的后备技术，但它具有固有的局限性。iframe 元素用作表单提交操作的目标，这意味着将服务器响应写入 iframe。如果响应类型是 HTML 或 XML，这很好，但如果响应类型是脚本或 JSON，则效果不佳，这两种类型通常都包含在 HTML 标记中找到时需要使用实体引用来表示的字符。
> 
> 为了解决使用 iframe 模式时脚本和 JSON 响应的挑战，Form Plugin 允许将这些响应嵌入到 textarea 元素中，建议您在与文件上传和旧版本结合使用时对这些响应类型这样做浏览器。但是请注意，如果表单中没有文件输入，则请求使用普通 XHR 提交表单（不是 iframe）。这给你的服务器代码增加了知道什么时候使用 textarea 什么时候不使用的负担。

这意味着如果您的表单包含文件输入字段并且您将此表单提交给返回 JSON 的控制器操作，则必须将此 JSON 包装在`<textarea>`标签中。

所以你的回复不应该是这样的：

```
{ "redirectToUrl":"some url" } 
```

它应该是这样的：

```
<textarea>{ "redirectToUrl":"some url" }</textarea> 
```

为了实现这一点，您可以使用自定义操作结果，该结果将使用这些标签包装响应：

```
public class TextareaJsonResult : JsonResult
{
    public TextareaJsonResult(object data)
    {
        this.Data = data;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        var response = context.HttpContext.Response;
        bool shouldWrap = !context.HttpContext.Request.IsAjaxRequest();
        if (shouldWrap)
        {
            response.Write("<textarea>");
        }

        base.ExecuteResult(context);

        if (shouldWrap)
        {
            response.ContentType = "text/html";
            response.Write("</textarea>");
        }
    }
} 
```

然后让您的控制器操作返回此自定义结果：

```
[HttpPost]
public ActionResult Upload(HttpPostedFileBase file)
{
    // ... some processing

    var redirectToUrl = Url.Action(
        "Create", 
        "Album",
        new { url = url, isLocalFile = isLocalFile }
    );
    return new TextareaJsonResult(new { redirectToUrl = redirectToUrl });
} 
```

现在显然在您的 AJAX 成功回调中，您还需要通过测试`typeof result`和在旧版浏览器（例如 Internet Explorer）的情况下手动解析响应来解释这种差异。您可以查看我链接到的页面的源代码。

但是话虽如此，我可以看到在您的成功回调中，您正在重定向到服务器返回的 JSON 响应中包含的控制器操作。我的问题来了：如果要重定向，首先使用 AJAX 有什么意义？为什么不使用标准表单发布到控制器操作并让控制器操作直接执行重定向？当您想留在同一页面上时，应该使用 AJAX。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T06:17:21.340

我同意 Jesse 的评论，这可能是他提供的链接的副本。

因此，我将提供一个替代方案。我更喜欢使用类似于 fiddler [http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)的 http 代理查看通过网络传输的 json 。我提到提琴手是因为它适用于所有浏览器。优点是您可以获得解析后的 json 的树形视图。阅读和查找所需内容要容易得多。

另外，我相信firefox的firebug、chrome开发工具和ie开发工具都提供相同的功能。（我知道chrome有treeview，我想我记得firebug有它，如果考虑到其他2个现代IE没有它，我会感到惊讶。）

# php - 有必要在模型中使用私有函数吗？

> ID：11059044
> 
> 赞同：1
> 
> 时间：2012-06-15T22:41:59.873
> 
> 标签：php, oop, codeigniter, naming-conventions

我正在 CodeIgniter 中制作模型，我不希望用户可以访问任何功能。对于控制器，您可以执行以下操作：

```
private function _myfunction()
{
    dosomething();
} 
```

我知道这也适用于模型，但我的问题是，这需要吗？我不认为用户可以通过 URL 启动这些功能。我问的原因是因为我想遵循最佳实践，但如果可能的话，我还想避免在调用时在所有内容前加上“_”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T22:44:22.970

不，这没有必要。用户通过 URL 访问类方法是一种不寻常的情况，并且仅在控制器的 codeigniter 中实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T22:50:33.407

这不是必需的，事实上，在 PHP 5+ 中实际使用“private”和“protected”关键字时，使用“_”前缀私有对象会被贬低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T22:51:05.790

不，这是没有必要的。要防止从浏览器访问该方法，只需在方法前添加一个下划线： _method() 。如果您想将其用作/调用它作为模块（HMVC），这是理想的。

# jquery - Add with append 出现两次

> ID：11059045
> 
> 赞同：0
> 
> 时间：2012-06-15T22:42:22.373
> 
> 标签：jquery, html, append

我使用 append 添加另一个 div

```
 $('#'+ number).append('<div id="descc'+number+'" class="backgroundImage" style="font-size:10px; height:13px; color:#fff; background-color:#000;" align="center">'+ descA+'</div>'); 
```

div 出现两次并且 remove() 不起作用，有什么想法吗？

```
function getDesc(number) {
    $.getJSON('getDescription.php?number=' + number, function(des) {
        descA = des;
        $('#' + number).append('<div id="descc' + number + '" class="backgroundImage" style="font-size:10px; height:13px; color:#fff; background-color:#000;" align="center">' + descA + '</div>');
    });
}

function cargarProyectos(cant, col) {
    for (i = 1; i <= cant; i++) {
        $('#proyectos').append('<div class="backgroundImage" id="' + i + '" style="position:relative; float:left; width:186px; height:150px; background-image: url(../CMS/_class/image.php?id=' + i + ' ); margin-top: 10px;margin-right:10px; margin-bottom:10px; cursor:hand;"></div>');
        $('#' + i).html('<div class="backgroundImage" style="font-size:10px; height:13px; color:#fff; background-color:#000;" align="center">PROYECTO ' + i + '</div>');
        getDesc(i);
        if (!(i % col) && i != 1) {
            $('#proyectos').append('<div class="scroll"  id="detalle' + Math.floor((i / col)) + '" style="position:relative; white-space: nowrap;display:none;  width:100%; height:0px; background-color:#e8e8e8; margin-bottom:10px;">            </div>');
        } else if (i == cant) {
            $('#proyectos').append('<div class="scroll" id="detalle' + Math.floor((i / col) + 1) + '" style="position:relative; display:none;white-space: nowrap; width:100%; height:0px; background-color:#e8e8e8; margin-bottom:10px;"></div>');
        }
    }
}

function windowSize() {
    winW = $('#proyectos').width();
    posicionDetalle = Math.floor(winW / 160);
    for (i = 1; i <= cantProyectos; i++) {
        $('#descc' + i).remove();
        $('#' + i).remove();
        if (i == cantProyectos) {
            cargarProyectos(cantProyectos, posicionDetalle);
        }
    }
    attachClickEvent();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:06:29.907

考虑到你有一些想法，这里是我的。我猜，因为我们没有`HTML`，我们也看不到你在哪里调用哪个函数。

但是这个名字`windowSize()`暗示我你可能会在调整窗口大小时调用它，特别是你正在使用窗口的当前大小。

这使我更加确定您必须调用它`resize()`。因此，它有时会被调用两次（实际上这个数字并不能保证，它肯定取决于所使用的浏览器）——可能就是这样。

要解决您的问题，只需在决定添加它之前检查它是否存在。

同样在您的`windowSize()`方法中，以下测试不必要地位于 for 循环内部 - 将其移到 for 循环之外（在删除 if 语句的途中）将其放在它之后。

```
 if (i == cantProyectos) {
        cargarProyectos(cantProyectos, posicionDetalle);
    } 
```

# html - Haml 到 Erb 的转换

> ID：11059048
> 
> 赞同：0
> 
> 时间：2012-06-15T22:43:04.130
> 
> 标签：html, ruby-on-rails, ruby, haml

> **可能重复：**
> [是否有一个好的 HAML -> ERB/H​​TML 转换器？](https://stackoverflow.com/questions/967262/is-there-a-good-haml-erb-html-converter)

我知道这个问题之前在[这里](https://stackoverflow.com/questions/967262/is-there-a-good-haml-erb-html-converter)被问过，但它是在 09 年，我很好奇是否有任何工具可以作为 haml 到 erb 转换的可靠转换器？谢谢。

# android - 在单击列表视图项目上开始新活动

> ID：11059051
> 
> 赞同：5
> 
> 时间：2012-06-15T22:43:33.007
> 
> 标签：android, listview

我需要一些帮助才能在列表视图项中单击以打开新活动。我在这里看到了很多这样的问题，但没有人帮助我。

```
public class CustomListView extends ListActivity {

    private EfficientAdapter adap;
    ...

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.main);

        adap = new EfficientAdapter(this);
        setListAdapter(adap);

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);

        startActivity(new Intent(CustomListView.this, next.class));
    }

    public static class EfficientAdapter extends BaseAdapter implements Filterable {
        private LayoutInflater mInflater;
        private Bitmap mIcon1;
        private Context context;

        public EfficientAdapter(Context context) {
            // Cache the LayoutInflate to avoid asking for a new one each time.
            mInflater = LayoutInflater.from(context);
            this.context = context;
        }

        public View getView(final int position, View convertView, ViewGroup parent) {

            ViewHolder holder;

            if (convertView == null) {
                convertView = mInflater.inflate(R.layout.adaptor_content, null);

                convertView.setOnClickListener(new OnClickListener() {
                    private int pos = position;
                    @Override
                    public void onClick(View v) {

                    }
                });

            convertView.setTag(holder);
            }else{
            // Get the ViewHolder back to get fast access to the TextView
            // and the ImageView.
            holder = (ViewHolder) convertView.getTag();
            }

            return convertView;
        }

        ...
    }
} 
```

我还尝试在 CustomListView 类的 onCreate 方法中添加下一个代码，但它也不起作用

```
ListView lv = getListView();

// listening to single list item on click
lv.setOnItemClickListener(new OnItemClickListener() {
  public void onItemClick(AdapterView<?> parent, View view,
      int position, long id) {

        startActivity(new Intent(CustomListView.this, next.class));

  }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T00:26:26.273

`onListItemClick()`从您的`CustomListView`类中删除 并将方法`startActivity()`放在`convertView.setOnClickListener()`.

```
convertView.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        startActivity(new Intent(getApplicationContext(), two.class));
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-21T15:53:38.213

试试这个代码。我相信它会帮助你，不要将类设置为这样的 xml 文件；

```
setContentView(R.layout.second); 
```

确保你确实把上面的代码放在你的课堂上，否则你会在打开新活动时遇到错误。

```
package com.exampled.list;

import android.os.Bundle;
import android.app.ListActivity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class MainActivity extends ListActivity {

    String [] names ={
        "Iphone",
        "Samsung",
        "Nokia",
        "Ericsson",
        "BlackBerry",
        "Benq"
    };
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.activity_main);
        setListAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_dropdown_item_1line,names));
    }

    public void onListItemClick(ListView Parent, View v, int position,long id){
        startActivity(new Intent(MainActivity.this, Second.class)); 
        //Toast.makeText(this, "Clicked on : " + names[position], Toast.LENGTH_LONG).show();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
         // Inflate the menu; this adds items to the action bar if it is present.
         getMenuInflater().inflate(R.menu.main, menu);
         return true;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T22:55:33.390

尝试将`startActivity(new Intent(one.this, two.class));`-code 放入

```
convertView.setOnClickListener(new OnClickListener() {
    private int pos = position;
    @Override
    public void onClick(View v) {...}
}); 
```

one.this 指的是什么？它应该是一个`Context`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T23:04:36.133

在你的代码`one.this`中是指`Context`.

由于您的活动名称是`CustomListView`，因此您应该写`CustomListView.this`而不是`one.this`。

你也可以使用`getApplicationContext()`.

# javascript - 使用 JavaScript 或 jQuery 获取并替换字符串上的最后一个数字

> ID：11059054
> 
> 赞同：10
> 
> 时间：2012-06-15T22:44:08.717
> 
> 标签：javascript, jquery, regex, replace

如果我有字符串：

`var myStr = "foo_0_bar_0";`

我想我们应该有一个名为`getAndIncrementLastNumber(str)`

所以如果我这样做：

`myStr = getAndIncrementLastNumber(str); // "foo_0_bar_1"`

考虑到可能有另一个文本而不是`foo`and`bar`并且可能没有`underscores` 或可能不止一个`underscore`；

有什么办法 with `JavaScript`or `jQuery`with `.replace()`and some`RegEx`吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-15T22:52:54.813

您可以使用正则表达式`/[0-9]+(?!.*[0-9])/`查找字符串中的最后一个数字（来源： http: [//frightanic.wordpress.com/2007/06/08/regex-match-last-occurrence/](http://frightanic.wordpress.com/2007/06/08/regex-match-last-occurrence/)）。这个函数，使用带有 match()、parseInt() 和 replace() 的正则表达式，应该可以满足您的需要：

```
function increment_last(v) {
    return v.replace(/[0-9]+(?!.*[0-9])/, parseInt(v.match(/[0-9]+(?!.*[0-9])/), 10)+1);
} 
```

可能效率不高，但对于短字符串，这无关紧要。

编辑：这是一个稍微好一点的方法，使用回调函数而不是搜索字符串两次：

```
function increment_last(v) {
    return v.replace(/[0-9]+(?!.*[0-9])/, function(match) {
        return parseInt(match, 10)+1;
    });
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-15T22:56:38.490

这是我的做法：

```
function getAndIncrementLastNumber(str) {
    return str.replace(/\d+$/, function(s) {
        return ++s;
    });
} 
```

[**小提琴**](http://jsfiddle.net/ult_combo/8ceGb/6/)

或者这个，特别感谢 Eric：

```
function getAndIncrementLastNumber(str) {
    return str.replace(/\d+$/, function(s) {
        return +s+1;
    });
} 
```

[**小提琴**](http://jsfiddle.net/ult_combo/8ceGb/11/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T22:57:52.183

**请尝试此演示** [http://jsfiddle.net/STrR6/1/](http://jsfiddle.net/STrR6/1/) **或** [http://jsfiddle.net/Mnsy3/](http://jsfiddle.net/Mnsy3/)

**代码**

```
existingId = 'foo_0_bar_0';
newIdOnly = existingId.replace(/foo_0_bar_(\d+)/g, "$1");
alert(newIdOnly);

getAndIncrementLastNumber(existingId);

function getAndIncrementLastNumber(existingId){
    alert(existingId);
newId = existingId.replace(/(\d+)/g, function(match, number) {
    return parseInt(number) + 1;
});
alert(newId);
}
​ 
```

**或者**

```
 existingId = 'foo_0_bar_0';
newIdOnly = existingId.replace(/foo_0_bar_(\d+)/g, "$1");
alert(newIdOnly);

getAndIncrementLastNumber(existingId);

function getAndIncrementLastNumber(existingId){
    alert(existingId);
    newId = existingId.replace(/\d+$/g, function(number) {
    return parseInt(number) + 1;
});
alert("New ID ==> " + newId);
}
​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-22T23:14:46.820

@Brilliant 是对的，+1，我只是想提供他的答案的一个版本，并进行了 2 处修改：

*   删除不必要的`negative look-ahead`运算符。
*   添加最后添加数字的功能，以防它不存在。

```

```
/**
 * Increments the last integer number in the string. Optionally adds a number to it
 * @param {string} str The string
 * @param {boolean} addIfNoNumber Whether or not it should add a number in case the provided string has no number at the end
 */
function incrementLast(str, addIfNoNumber) {
    if (str === null || str === undefined) throw Error('Argument \'str\' should be null or undefined');
    const regex = /[0-9]+$/;
    if (str.match(regex)) {
        return str.replace(regex, (match) => {
            return parseInt(match, 10) + 1;
        });
    }
    return addIfNoNumber ? str + 1 : str;
} 
```

**测试**：

```
describe('incrementLast', () => {
        it('When 0', () => {
            assert.equal(incrementLast('something0'), 'something1');
        });
        it('When number with one digit', () => {
            assert.equal(incrementLast('something9'), 'something10');
        });
        it('When big number', () => {
            assert.equal(incrementLast('something9999'), 'something10000');
        });
        it('When number in the number', () => {
            assert.equal(incrementLast('1some2thing9999'), '1some2thing10000');
        });
        it('When no number', () => {
            assert.equal(incrementLast('1some2thing'), '1some2thing');
        });
        it('When no number padding addIfNoNumber', () => {
            assert.equal(incrementLast('1some2thing', true), '1some2thing1');
        });
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T22:52:58.947

在**正则表达式**中试试这个：

```
function getAndIncrementLastNumber(str){
   var myRe = /\d+[0-9]{0}$/g;  
   var myArray = myRe.exec(str);
   return parseInt(myArray[0])+1;​
} 
```

演示：http: [//jsfiddle.net/F9ssP/1/](http://jsfiddle.net/F9ssP/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T22:59:18.320

数字会用一些字符分隔吗？我从你的问题中了解到的是你的字符串可能看起来像这样 78_asd_0_798_fgssdflh__0_2323 ！如果是这种情况，首先您需要一次性删除所有字符和下划线。然后无论你删除了什么，你都可以用逗号或其他东西替换。

所以你基本上会有 str1: 78_asd_0_798_fgssdflh__0_2323 ; str2：78,0,0,798,2323。

str2 不必是字符串，您可以将它们保存到变量数组中并获取最大数量并增加它。

我的下一个问题是这足以解决您的问题吗？如果您必须用这个递增的数字替换最大的数字，那么您必须替换这个数字在 str1 中的出现并将其替换为您的结果。

希望这可以帮助。对于使用 jquery 进行替换，您可能可以查看[JQuery 从字符串中删除“-”字符，](https://stackoverflow.com/questions/2950357/jquery-removing-character-from-string)这只是一个示例，但您会有一个想法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-19T08:53:32.383

如果您只想获取字符串的最后一个数字，这是使用 parseInt() 的好方法

```
if(Stringname.substr(-3)==parseInt(Stringname.substr(-3)))
var b=Stringname.substr(-3);
else if(Stringname.substr(-2)==parseInt(Stringname.substr(-2)))
var b=Stringname.substr(-2);
else
var b=Stringname.substr(-1); 
```

它检查并给出正确答案并将其存储在变量 b 中，用于 1 位数字和最多 3 位数字。如果你有逻辑，你可以做到任何

# c++ - Visual Studio (VC++ 2005) 调试内存

> ID：11059056
> 
> 赞同：0
> 
> 时间：2012-06-15T22:44:20.737
> 
> 标签：c++, windows, memory-management, memory-leaks, visual-studio-2005

我正在追逐一个内存堆损坏错误。我所拥有的只是据称在被释放后被修改的内存地址。Windows 基本上会在退出时触发断点，我在输出窗口中看到如下错误消息：

```
HEAP[myprogram.exe]: HEAP: Free Heap block df56c20 modified at df56c80 after it was freed 
```

我的问题是在 Windows 触发断点的确切时间点，我可以追溯到与该地址关联的数据对应的代码中的点吗？这至少有助于调试它。感谢我如何去做这件事的任何想法。我阅读了[http://msdn.microsoft.com/en-us/library/s3aw423e.aspx](http://msdn.microsoft.com/en-us/library/s3aw423e.aspx) ，但我不太清楚如何去做我想做的事。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T22:47:56.590

您可以在内存地址处设置断点。只需转到断点窗口并添加一个新的数据断点。如果您看到每次运行都在同一地址发生损坏，这会有所帮助。

**但是**，对于这样的问题，问题很可能出在其他地方。常见原因来自未定义的行为。寻找：

*   双重删除
*   不从函数返回
*   在数组中越界
*   写入你不拥有的记忆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T20:06:28.597

使用[Application Verifier](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371695%28v=vs.85%29.aspx)并启用 PageHeap。这将在内存损坏后立即进入调试器。

# ruby - 是否可以在 Ruby 中启用 TLS v1.2？如果是这样，怎么做？

> ID：11059059
> 
> 赞同：22
> 
> 时间：2012-06-15T22:44:26.173
> 
> 标签：ruby, openssl, ssl

是否可以将 TLSv.1.2 或 TLSv1.1 与 Ruby 一起使用？

我已经使用 OpenSSL 1.0.1c（可用的最新版本）编译了 Ruby 的 Frankenstein 版本，唯一的区别是 SSLv2 现在是下面的一个选项`OpenSSL::SSL::SSLContext::METHODS`

是否可以将 TLSv1.2 添加到该列表中？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-16T00:52:09.780

[是的，我们最近](https://github.com/ruby/ruby/commit/060184c347822b11dff3db6bef915c04a564c4e4)添加了 TLS 1.1 和 1.2 支持。就像设置`ssl_version`你的一样简单`SSLContext`：

```
ctx = OpenSSL::SSL::SSLContext.new
ctx.ssl_version = :TLSv1_2 
```

您仍然可以继续使用更通用`:SSLv23`的，以获得最大的互操作性。它将具有对等方支持的最新协议将用于连接的效果。如果您的对等方理解 TLS 1.2，那么它将被使用。但与上面的示例相反，如果对等方不说 1.2，那么实现将默默地回退到对等方*确实*理解的最佳/最新版本 - 而在上面的示例中，如果连接将被对等方拒绝不认识1.2。

有关更多详细信息，还请查看[OpenSSL 自己的](https://www.openssl.org/docs/man1.1.0/ssl/SSL_CTX_new.html)有关该主题的文档，您可以将有关 TLSv1_method 的内容转移到 TLSv1_1_method 和 TLSv1_2_method（在 Ruby 中分别表示为`:TLSv1`和`:TLSv1_1`）`:TLSv1_2`。

如果您的底层 OpenSSL 支持 TLS 1.2（>= 1.0.1 支持），那么您就可以开始了。但是，目前这需要从主干构建 Ruby。但如果我们在此期间没有收到任何负面反馈，它很可能会被向后移植到下一个 1.9.3 版本。

# php - php中的动态实例化

> ID：11059060
> 
> 赞同：1
> 
> 时间：2012-06-15T22:44:39.683
> 
> 标签：php, class, object, dynamic

我正在使用字符串数组动态实例化另一个类中的对象，但我收到错误（可能来自自动加载器）。前任：

```
$inputs=array('class1(1,5)','class2('a','b'));
$objectArray=array();
foreach($inputs as $input)
   $objectArray[]=new $input; 
```

我正在使用带有声明的字符串数组实例化一个对象数组。我相信这会导致我的自动加载器中的引用不正确，有人对此有任何见解吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T22:51:35.187

首先，您应该考虑使用现有的依赖注入容器实现。

但是，您想使用构造函数参数实例化该类，这使得这稍微复杂一些。事实上你必须使用`Reflection`：

例如：

```
$inputs = array(array('class'=>'class1','arguments'=>array(1,5)));
foreach ($inputs as $description) {
  $refClass = new ReflectionClass($description['class']);
  $objectArray[] = $refClass->newInstanceArgs($description['arguments']);
} 
```

[`ReflectionClass::newInstanceArgs()`](http://php.net/reflectionclass.newinstanceargs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T22:52:14.460

在这个区块中，

```
foreach($inputs as $input)
   $objectArray[]=new $input; 
```

`$input`旨在成为包含您正在实例化的类名的*字符串。*

相反，您传递的是诸如“class1(1,5)”之类的古怪内容，它们肯定不仅仅是类名。

如果需要将参数传递给构造函数，则需要单独进行。例如，

```
foreach($inputs as $input)
   $objectArray[]=new $input(1,5); 
```

会按您的预期工作。

因此，**您需要将类名与构造函数参数分开**。不幸的是，这可能会有点混乱。除非你总是并且只有两个论点来处理*所有*的类，否则你可能会遇到麻烦。

您可能会发现自己需要使用[`ReflectionClass::newInstanceArgs`](http://us2.php.net/manual/en/reflectionclass.newinstanceargs.php)来创建一个类的新实例并提供一组参数。从手册页修改示例调用：

```
foreach($inputs as $input) {
    $class = new ReflectionClass($input);
    $objectArray[] = $class->newInstanceArgs(array(1, 5));
} 
```

# ios - CATextlayer 更改 FONT 的大小以适合框架

> ID：11059061
> 
> 赞同：8
> 
> 时间：2012-06-15T22:44:50.413
> 
> 标签：ios, xcode, catextlayer

我有`CATextlayer`一个特定大小和`NSAttributedString`未知长度的文本。

我需要调整字体大小以使文本适合框架（反之亦然:)

任何想法从哪里开始？:)

[编辑]正如nall指出的，我可以确定字符串长度，当然，我需要将用户输入的一些文本放入固定大小的框中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2019-05-17T16:00:17.073

为**Swift 5**清洁解决方案工作。

1) 扩展字符串

```
extension String {
    func size(OfFont font: UIFont) -> CGSize {
        return (self as NSString).size(withAttributes: [NSAttributedString.Key.font: font])
    }
} 
```

2) 子类化 CATextLayer

```
class DynamicTextLayer : CATextLayer {
    var adjustsFontSizeToFitWidth = false

    override func layoutSublayers() {
        super.layoutSublayers()
        if adjustsFontSizeToFitWidth {
            fitToFrame()
        }
    }

    func fitToFrame(){
        // Calculates the string size.
        var stringSize: CGSize  {
            get { return (string as? String)!.size(OfFont: UIFont(name: (font as! UIFont).fontName, size: fontSize)!) }
        }
        // Adds inset from the borders. Optional
        let inset: CGFloat = 2
        // Decreases the font size until criteria met
        while frame.width < stringSize.width + inset {
            fontSize -= 1
        }
    }
} 
```

3）现在转到您的代码，而不是 CATextLayer 使用 DynamicTextLayer

```
textLayer = DynamicTextLayer()
textLayer?.alignmentMode = .center
textLayer?.fontSize = 40
textLayer?.string = "Example"
textLayer?.adjustsFontSizeToFitWidth = true 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-09T19:36:46.447

我通过这样做实现了它：

```
 float fontSize = InitialFontSize;
    UIFont *myFont = [UIFont boldSystemFontOfSize:fontSize];
    CGSize myFontSize = [YourTextHere sizeWithFont:myFont];
    while (myFontSize.width >= MaximunWidth) {
        fontSize -= 0.1f;
        myFont = [UIFont boldSystemFontOfSize:fontSize];
        myFontSize = [YourTextHere sizeWithFont:myFont];
    }
    CATextLayer *textLayer = [CATextLayer layer];
    [textLayer setFrame:CGRectMake(MaximunWidth - myFontSize.width / 2, MaximunHeight - myFontSize.height / 2, myFontSize.width, myFontSize.height)];
    [textLayer setFontSize:fontSize];
    [textLayer setString:YourTextHere];

    [textLayer setAlignmentMode:kCAAlignmentCenter]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T03:13:10.517

我最终这样做了：

`textlayer`是一个`CATextlayer`

`theString`是一个`NSMutableAttributedString`

是的，它不是很优雅，绝对可以改进；）

```
CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((__bridge CFAttributedStringRef)theString);

    CGRect columnRect = CGRectMake(0, 0 , 320, 150);

    CGMutablePathRef path = CGPathCreateMutable();
    CGPathAddRect(path, NULL, columnRect);

    CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), path, NULL);

    CFRange frameRange = CTFrameGetVisibleStringRange(frame); 

    int fontSize = 18;

    while(theString.string.length > frameRange.length){

        fontSize--;

        CFStringRef fontName = (__bridge CFStringRef)[defs objectForKey:@"font"];

        CTFontRef font = CTFontCreateWithName(fontName, fontSize, NULL);

        [theString addAttribute:(NSString *)kCTFontAttributeName
                          value:(__bridge id)font
                          range:NSMakeRange(0, theString.string.length)];

        CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((__bridge CFAttributedStringRef)theString);

        CGRect columnRect = CGRectMake(0, 0 , 320, 150);

        CGMutablePathRef path = CGPathCreateMutable();
        CGPathAddRect(path, NULL, columnRect);

        CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), path, NULL);

        frameRange = CTFrameGetVisibleStringRange(frame); 

        textLayer.string = theString;
    } 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2016-11-16T12:24:06.610

```
CATextLayer *textLayer;

[textLayer setWrapped: TRUE]; 
```

这将有望工作

# android - DisplayMetrics.DENSITY_XHIGH 适用于 2.2.2？没有被皮棉抓住？

> ID：11059063
> 
> 赞同：2
> 
> 时间：2012-06-15T22:45:08.413
> 
> 标签：android, eclipse, adt, backwards-compatibility, android-2.2-froyo

我有引用 DisplayMetrics.DENSITY_XHIGH 的代码。Android 文档声明这在 API 9+ 中受支持。有问题的代码不受 TargetApi 注释的影响。我项目的 minSdkVersion 设置为 7。奇怪的是：

1.  当我在项目上运行 Lint 工具时，它不会抱怨对 DENSITY_XHIGH 的引用。

2.  当我构建并部署到 2.2.2 设备（API 8）时，代码运行无缺陷。我输入了调试语句来回显 DisplayMetrics.DENSITY_XHIGH 的值，并在日志文件中看到“320”（正确的值）。

这是怎么回事？该设备制造商是否修补了 2.2.2 代码以添加此值？这可以解释为什么程序包在该设备上运行，但是 lint 工具没有发现错误呢？lint 工具中的错误？

编辑：我查看了 2.2、2.2.1 和 2.2.2 的源代码，并且 DisplayMetrics.java 中不存在 DENSITY_XHIGH 中的任何一个。

# linux - 查看用户默认登录shell的*nix命令是什么

> ID：11059067
> 
> 赞同：60
> 
> 时间：2012-06-15T22:45:38.010
> 
> 标签：linux, shell, unix

查看用户默认登录 shell 的 *nix 命令是什么？

我可以用 更改默认登录 shell `chsh`，但我不知道如何获取用户的默认 shell。

伪代码

```
$ get-shell
/usr/bin/zsh 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-06-15T22:57:01.317

*查询/etc/passwd*文件以获取此信息的规范方法是使用`getent`. 您可以使用标准工具解析`getent`输出，例如`cut`提取用户的登录 shell。例如：

```
$ getent passwd $LOGNAME | cut -d: -f7
/bin/bash 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-16T01:18:43.067

命令是`finger`。

```
[ken@hero ~]$ finger ken
Login: ken                      Name: Kenneth Berland
Directory: /home/ken                    Shell: /bin/tcsh
On since Fri Jun 15 16:11 (PDT) on pts/0 from 70.35.47.130
   1 hour 59 minutes idle
On since Fri Jun 15 18:17 (PDT) on pts/2 from 70.35.47.130
New mail received Fri Jun 15 18:16 2012 (PDT)
     Unread since Fri Jun 15 17:05 2012 (PDT)
No Plan. 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-15T22:48:49.067

登录外壳定义在`/etc/passwd`. 所以你可以这样做：

```
grep username /etc/passwd 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-15T22:56:15.287

我认为您正在寻找的是：

```
#!/bin/bash
grep "^$1" /etc/passwd | cut -d ':' -f 7 
```

将其保存`get-shell`在路径中的某个位置（可能是 ~/bin），然后像这样调用它：

```
get-shell userfoo 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-21T15:17:13.310

`SHELL`变量用于表示用户当前的shell

```
echo $SHELL 
```

# asp.net-mvc - 在 ASP.NET MVC 中支持不显眼的 Ajax 的 PagedList 助手

> ID：11059069
> 
> 赞同：2
> 
> 时间：2012-06-15T22:46:13.780
> 
> 标签：asp.net-mvc, pagination, pagedlist

我目前正在使用 PagedList (https://github.com/TroyGoode/PagedList/) 在 ASP.NET MVC 应用程序中管理我的分页。

到今天为止，我已经开始将应用程序的某些部分转换为使用 AJAX，ASP.NET MVC 使这变得非常容易。

然而，我遇到的第一个问题是 PagedList.MVC 助手 @Html.PagedListPager 与不显眼的 AJAX 无论如何都不兼容。

我真正需要做的就是为分页链接添加一些属性（见下文），其余的将自动处理。然而，PagedListPager 没有提供任何方法来做到这一点。

```
data-ajax="true" data-ajax-mode="replace" data-ajax-update="#SearchResults" 
```

有没有人遇到过这个并找到了一个优雅的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T01:04:39.873

我添加了对不显眼的 AJAX 的支持：

[https://github.com/TroyGoode/PagedList/issues/26#issuecomment-6471793](https://github.com/TroyGoode/PagedList/issues/26#issuecomment-6471793)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T00:20:34.997

我相信这可能是最优雅的解决方案。

```
@Html.PagedListPager((IPagedList)Model.Articles, page => Url.Action("Index", new { s = Model.SearchString, page = page }))

<script>

    var pages = $('#pages a[href^="/"]');

    pages.attr('data-ajax', 'true')
        .attr('data-ajax-mode', 'replace')
        .attr('data-ajax-update', '#SearchResults')
        .attr('data-ajax-method', 'post');

</script> 
```

快速 jQuery hack 为所有链接添加必要的属性，以便它们被不显眼的 ajax 模块拾取。

[href^="/"] 部分确保只有可点击的链接会被修改。如果你不使用它，灰色的上一个链接将是可点击的。

# xampp - 我可以在本地主机上安装 XAMPP 并在 Dropbox 上托管 Web 内容吗？

> ID：11059071
> 
> 赞同：0
> 
> 时间：2012-06-15T22:46:47.543
> 
> 标签：xampp, dropbox

我正在考虑在我的 Dropbox 文件夹上托管 WordPress 以进行开发工作。有没有人试过这个？

我想知道是否有办法将 XAMPP 保留在本地计算机上，但将根目录指向 Dropbox 文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:41:09.513

首先，WordPress 和 XAMPP 都会产生大量垃圾文件（日志、PID、配置、会话）等，这些文件会简单地丢弃您的 Dropbox。我对此很确定，因为我尝试在 SVN 上对 XAMPP 进行版本化，这与 SVN 非常相似，并且因为包含数据和其他内容而搜索越来越多应该被忽略（非版本化）的文件夹真的很累临时文件。

并回答你的问题。当然，你可以。安装 XAMPP（最好在 Dropbox 之外）后，转到“xampp\apache\conf”文件夹，编辑“httpd.conf”文件并将值“DocumentRoot”变量（大约第 90 行）更改为您需要的任何值。如果您的 Dropbox 在 XAMPP 文件夹之外，您可能需要多次使用“..”来指定父文件夹。

正如您应该知道的那样，我不会在这里讨论安全问题，这种解决方案具有很高的风险并且与安全主题相反。

# google-app-engine - 在 jinja2 的子模板变量列表中包含引用的父实体的值

> ID：11059074
> 
> 赞同：0
> 
> 时间：2012-06-15T22:47:08.527
> 
> 标签：google-app-engine, python-2.7, jinja2

我一直在尝试使用一个模板，该模板从我的模型 QA 中打印出实体值，以及从具有模型 PQ 的父环境实体中打印出几个值。特别是，我提供的代码按原样工作，但它不允许我包含来自 s 的值，例如 s.name，因为 s.name 不在 qs 中。我尝试使用注释掉的行，例如 (# qs["name"] = s.name) 但我收到错误“TypeError: 'Query' object does not support item assignment”。

```
class MainPage(BaseHandler):

    def get(self):
        s = PQ()
        s.name = "CCD1"
        s.owner = user
        s.put()
        q = QA()
        q.survey = s
        q.question = "If we dress up?"
        q.answers = [0, 0, 0]
        q.seqnum = float(100)
        q.put()
        qs = QA.all()
        # qs["name"] = s.name
        self.render_template('index.html',  {'qs': qs}) 
```

任何人都可以建议一种方法来实现这一点，好吗？

以下答案似乎相关，但并不完全是答案。

[如何在 Jinja2 模板中循环子实体时显示父实体](https://stackoverflow.com/questions/10100711/how-to-display-parent-entity-while-looping-through-child-entities-in-jinja2-temp)

（我在谷歌群组上问过同样的问题，但后来想起了在此处发布问题的建议。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:16:02.003

```
template_values = {'qs': qs,
            'name': s.name
            }
self.render_template('index.html',  template_values ) 
```

# c++ - 如何减少逻辑表达式？

> ID：11059076
> 
> 赞同：0
> 
> 时间：2012-06-15T22:47:18.957
> 
> 标签：c++, logic, boolean-logic

```
{
ans += (a[i] > a[j]) != (b[i] > b[j]);
//ans += ((a[i] > a[j]) && (b[j] > b[i])) || ((a[j] > a[i]) && (b[i] > b[j]));
} 
```

您在上面看到的是我从某个地方获取的片段。有两种逻辑表达式。据说，注释掉的那个和没有注释掉的那个是一样的。

你如何获得：

```
((a[i] > a[j]) && (b[j] > b[i])) || ((a[j] > a[i]) && (b[i] > b[j])) 
```

像这样

```
(a[i] > a[j]) != (b[i] > b[j]) 
```

是否有此类逻辑表达式简化的指南或书籍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:00:53.803

这实际上非常简单。

有了`(a[i] > a[j]) != (b[i] > b[j])`，我们要说的是，只有当与 和 的关系与从 到 的关系相反时，这才`a[i]`是正确`a[j]`的。为此，如果为真，则为假，即为真。这意味着当为真时，为真，它也意味着相反 - 当为真时，也是如此。`b[i]``b[j]``a[i]>a[j]``b[i]>b[j]``b[j]>b[i]``a[i]>a[j]``b[j]>b[i]``a[j]>a[i]``b[i]>a[j]`

另一种说法是`( (a[i]>a[j]) && (b[j]>a[i]) ) || ( (a[j]>a[i]) && (b[i]>b[j])` 。该布尔逻辑仅在为真的相同情况下才`( (a[i] > a[j]) ) != (b[i] > b[j])`为真。

作为另一个例子，考虑当`a[i] > a[j]` 和`b[i] > a[j]` 。`!=`在这种情况下，您会看到您发布的第一个是 false，因为评估为 true两侧的两个术语，意味着`!=`评估为`false`。这种情况还会导致第二个语句解析为 false，因为您没有围绕`||`评估为 true 的两个术语中的任何一个，它们都评估为 false。

最后，这个问题对我来说看起来像是家庭作业——如果是，你应该使用适当的标签。

`a[i] == a[j]`但是，这一切都忽略了or的可能性`b[i] == b[j]`，该问题的另一个答案表明，这可能导致两个语句无法评估为同一事物。但是，如果您假设两者不能相等，那么您的问题中的两个陈述将是相同的，遵循上面演示的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T23:01:52.973

这些表达式是不等价的。

例如，当`a[i] == a[j]`和时`b[i] > b[j]`，第一个表达式给出...

```
(a[i] > a[j]) != (b[i] > b[j]);
false != true
true 
```

...而第二个给出：

```
((a[i] > a[j]) && (b[j] > b[i])) || ((a[j] > a[i]) && (b[i] > b[j]));
(false && false) || (false && true)
false || false
false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T23:04:36.600

如果您假设，您发布的代码是正确的

```
!(p > q) == (p < q) 
```

这意味着由于某种原因，您忽略了平等。

考虑到这一点，让我们这样说：

```
a1 = a[i]
a2 = a[j]
b1 = b[i]
b2 = b[j] 
```

然后你有：

```
ans += ((a1 > a2) && (b2 > b1)) || ((a2 > a1) && (b1 > b2)); 
```

其中，由于我们忽略了平等，因此与以下内容相同：

```
ans += ((a1 > a2) && !(b1 > b2)) || (!(a1 > a2) && (b1 > b2)); 
```

如果您仔细观察，您会发现表达式是重复的，因此可以简化：

```
A = a1 > a2
B = b1 > b2 
```

然后：

```
ans += (A && !B) || (!A && B); 
```

这意味着**A 或 B，但不是两者** 这是一个已知的布尔运算，称为**[XOR](http://en.wikipedia.org/wiki/XOR)**，在您的情况下与**不同**的(!=)相同

所以：

```
ans += A != B; 
```

并扩展：

```
ans += (a1 > a2) != (b1 > b2) 
```

所以：

```
ans += (a[i] > a[j]) != (b[i] > b[j]) 
```

希望现在很清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T23:11:41.340

让我们来看看：

```
((a[i] > a[j]) && (b[j] > b[i])) || ((a[j] > a[i]) && (b[i] > b[j])) 
```

为了简单起见，称之为：

```
(w > x) && (y > z) || (x > w) && (z > y) 
```

这在逻辑上不等同于：

```
(w > x) && (y > z) || !(w > x) && !(y > z) 
```

因为它们可以相等，但它是：

```
(w > x) && (y > z) || !(w >= x) && !(y >= z) 
```

因此，您可以将其简化为，`(w > x) == (y > z)`或者，也可以简化为`(w > x) != (z >= y)`.

# cocos2d-android - 在 Cocos2d-Android 中创建菜单

> ID：11059091
> 
> 赞同：1
> 
> 时间：2012-06-15T22:49:43.627
> 
> 标签：cocos2d-android, ccmenuitem

我是Android开发的初学者，一直在做cocos2d-android的游戏，需要实现一个菜单画面。我在谷歌上看过，只能找到关于 cocos2d for iPhone 的信息。有人对我如何添加菜单有任何建议/想法，或者更好地了解任何可以帮助我的教程或书籍吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T04:08:47.467

嗨，您可以使用 CCMenu 和 CCMenuItemLabel 在 cocos2d 中创建菜单，我在这里与您分享一个示例，我从中制作了菜单屏幕以供选择，因此在这里向您展示如何使用 CCMenu 和 CCMenuItemLabel 的方法将对您有所帮助，所以请尝试一下最好的。

```
 private CCNode addOtherOptions(String strName, int xpos, int ypos, String action) {
            CCNode ccStartNode = CCNode.node();
            ccStartNode.setPosition(CGPoint.ccp(xpos, ypos));
            ccStartNode.setAnchorPoint(CGPoint.ccp(0, 0));

            CCMenuItemLabel startGame = CCMenuItemLabel.item(strName, this, action);
            startGame.setPosition(CGPoint.ccp(0, 0));
            startGame.setAnchorPoint(CGPoint.ccp(0, 0));
            startGame.setColor(ccColor3B.ccc3(139, 69, 19));
            startGame.setScale(0.5f);

            CCMenu menu2 = CCMenu.menu(startGame);
            menu2.alignItemsVertically(-10f);
            menu2.setPosition(CGPoint.ccp(-20, 0));
            menu2.setAnchorPoint(CGPoint.ccp(0, 0));
            // addChild(menu2);

            ccStartNode.addChild(menu2);

            return ccStartNode;
        } 
```

# c++ - 错误 C2075：数组初始化需要花括号

> ID：11059094
> 
> 赞同：0
> 
> 时间：2012-06-15T22:50:10.273
> 
> 标签：c++, arrays, 2d, curly-braces

我想`char`使用`std::reverse()`STL 算法中的函数来反转类型的二维数组。

```
#include <iostream>
#include <algorithm>

int main()
{
    char array[10][5];

    initiate_array(array);              // this takes care of initializing array

    std::reverse(array, array + 10);    // <- error C2075

    return 0;
} 
```

但是我不断收到这个错误：`C2075: '_Tmp' : array initialization needs curly braces` 我以前从未遇到过！

我使用 MSVC++ 2008 来编译我的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T00:00:48.887

问题的根源在于数组不能相互分配。让我们考虑一下如何`std::reverse`实现：

```
template<class BidirectionalIterator>
void reverse(BidirectionalIterator first, BidirectionalIterator last)
{
    while ((first != last) && (first != --last)) {
        std::swap(*first++, *last);
    }
} 
```

并且`std::swap`需要能够分配你给它的任何参数，以便交换它们。在您的情况下，您有一个数组数组；所以它试图将array[0] 中的char[5] 数组与array[10] 中的char[5] 数组交换，这不是有效的C++。

但是，**在 C++11 中，这确实可以按预期工作**；不是因为您现在可以分配数组，而是因为`std::swap`获得了使其适用于数组的重载，有效地映射到`std::swap_ranges`. 但是您应该意识到这不仅仅是交换指针，而是单独交换数组类型（在您的情况下为字符）。

# c# - ServiceInstaller 在 .NET 3.5+ 中是否已过时

> ID：11059099
> 
> 赞同：2
> 
> 时间：2012-06-15T22:50:23.317
> 
> 标签：c#, winforms

为了使用 ServiceInstaller，我必须手动将其添加到工具箱中，默认情况下它不存在。但是默认情况下，工具箱中有一个名为 ServiceController 的东西。所以我想知道这是否更好并且应该在.NET的新版本中使用而不是ServiceInstaller？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T23:19:39.777

不，它没有过时（请参阅[ServiceInstaller 类](http://msdn.microsoft.com/en-us/library/system.serviceprocess.serviceinstaller.aspx)）。ServiceController 听起来就像是一个以编程方式控制 Windows 服务状态的类（请参阅[ServiceController 类](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller)）。ServiceInstaller 不会出现在工具箱中，因为它通常是通过使用 Add Installer 在服务项目中创建类来添加的（请参阅[如何：将安装程序添加到您的服务应用程序](http://msdn.microsoft.com/en-us/library/ddhy0byf%28v=vs.100%29.aspx)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T23:24:00.153

ServiceInstaller 和 ServiceController 做完全不同但相关的事情

A`ServiceInstaller`用于 Windows 服务。当通过 InstallUtil.exe 或 Msi 在计算机上安装 Windows 服务时，它会运行并允许您执行诸如在计算机上注册事件源之类的操作。

`ServiceController`是一个类，它允许您连接到服务并通过代码执行诸如启动和停止之类的操作。这可以从任何类型的应用程序中使用。

不，它没有过时。如果它在文档中，它将被标记为已弃用。它的成员可能具有 ObsoleteAttribute 属性。例如，请参阅[ConfigurationSettings.AppSettings 属性](http://msdn.microsoft.com/en-us/library/system.configuration.configurationsettings.appsettings)

# r - 给定 R 中的二维数字“高度图”矩阵，如何找到所有局部最大值？

> ID：11059104
> 
> 赞同：4
> 
> 时间：2012-06-15T22:50:49.370
> 
> 标签：r, matrix, max

我有一个具有非负数值的 R 矩阵。该矩阵实际上是一个 2D 高度图，我想在该矩阵中找到所有局部最大值。对于“平坦”峰，其中相邻元素彼此相等（并且它们共同是局部最大值），我不在乎会发生什么，只要我在每个“平坦”区域内获得至少一个坐标。

是否有任何功能可以有效地做到这一点？显然我可以手动编写循环来单独测试每个元素，但是在 R 中这样做会很慢。我需要对大约一百万个矩阵执行此操作，每个矩阵平均大约有 884 个元素。

理想情况下，会有一个函数将矩阵作为输入并返回一个 2 列矩阵，其中第 1 列是行坐标，第 2 列是列坐标，矩阵中的每个局部最大值对应一行。

允许矩阵边缘的局部最大值。矩阵之外的区域可以被视为具有零高度。

要使用的可重现示例矩阵：

```
set.seed(5)
msize <- 20 # Change this to whatever you like
x <- matrix(data=abs(rnorm(msize*2)), nrow=msize, ncol=msize) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-15T23:43:39.907

包中的`focal()`函数`raster`是为这样的计算而设计的。以下代码返回*所有*局部最大值的坐标，包括边缘上的坐标和“高原”部分的坐标。

```
library(raster)

## Construct an example matrix
set.seed(444)
msize <- 10
x <- matrix(sample(seq_len(msize), msize^2, replace=TRUE), ncol=msize)

## Convert it to a raster object
r <- raster(x)
extent(r) <- extent(c(0, msize, 0, msize) + 0.5)

## Find the maximum value within the 9-cell neighborhood of each cell
f <- function(X) max(X, na.rm=TRUE)
ww <- matrix(1, nrow=3, ncol=3) ## Weight matrix for cells in moving window
localmax <- focal(r, fun=f, w=ww, pad=TRUE, padValue=NA)

## Does each cell have the maximum value in its neighborhood?
r2 <- r==localmax

## Get x-y coordinates of those cells that are local maxima
maxXY <- xyFromCell(r2, Which(r2==1, cells=TRUE))
head(maxXY)
#       x  y
# [1,]  8 10
# [2,] 10 10
# [3,]  3  9
# [4,]  4  9
# [5,]  1  8
# [6,]  6  8

# Visually inspect the data and the calculated local maxima
plot(r)   ## Plot of heights
windows() ## Open a second plotting device
plot(r2)  ## Plot showing local maxima 
```

# c# - WCF 服务方法重载问题 - 需要帮助

> ID：11059107
> 
> 赞同：0
> 
> 时间：2012-06-15T22:50:57.017
> 
> 标签：c#, wcf, .net-3.5, .net-framework-version

我有一个 WCF Web 服务方法（超过**3.5 NET Framework**），需要对其进行重构以使用可选输入参数。Mi 调查得出的结论是可选参数作为 4.0 上引入的一个概念，所以我需要做一些解决方法来解决我的问题。我的代码更新如下所示：

```
partial class Class1: IService {

    public int MethodName ( int param1, string param2 )
    {
         // code here
    }

    public int MethodName ( int param1)
    {
         // code here
         string param2 = FillInInternally();
         return this.MethodName(param1, param2);
    } 
```

我还更新了我的运营合同：

```
[ServiceContract]
public interface IService
{
    [OperationContract(Name = "Alias1")]
    int MethoName(int param1, string param2);

    [OperationContract(Name = "Alias2")]
    int MethoName(int param1);

}

public partial class ServiceClient : ClientBase <IService>, IService
{

    public int MethoName(int param1, string param2)
    {
       return Channel.MethodName(param1, param2);
    }

    public int MethoName(int param1)
    {
       return Channel.MethodName(param1);
    }
} 
```

解释完之后，我能够正确构建 Web 服务。除了哦，集成测试也运行得很好。之后，我需要在服务器上安装，并且在尝试测试 WSDL 时，我遇到了一个问题，表明第 1 列第 1 行的 svc 文件有错误（请注意，我没有包含确切的错误消息，因为我将 WS 回滚到以前的版本以避免周末出现问题）。

我的问题是：有人认为我在开发中遗漏了一些东西吗？或者，当“安装”时，我是否能够正确重载我的 WCF 服务方法？问题解决了吗？

欢迎任何意见。

谢谢，

.NET Framework 3.5 Visual Studio 2008 标准版 C#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:12:05.237

您是否手动构建`ServiceClient`类？我建议你使用**svcutil.exe**工具来生成代理，不要鼓励自己直接在生成的代理代码中进行修改。

如果您通过工具或 VS 添加服务参考生成了代理，您应该会看到`IService`和`ServiceClient`应该看起来像这样，

```
[ServiceContract]
public interface IService
{
    int Alias1(int param1, string param2);

    int Alias2(int param1);
}

public partial class ServiceClient : ClientBase <IService>, IService
{
    // other stuff
    public int Alias1(int param1, string param2)
    {
       return base.Channel.Alias1(param1, param2);
    }

    public int Alias2(int param1)
    {
       return base.Channel.Alias2(param1);
    }
} 
```

请注意，您的客户端具有 as`Alias1`和`Alias2`not方法`MethodName`。请确保您自己有正确的代理与服务人员交谈。

# google-chrome - Sublime Text 2 在 Windows 中的 Chrome/firefox 中打开文件的键盘快捷键

> ID：11059114
> 
> 赞同：0
> 
> 时间：2012-06-15T22:51:42.007
> 
> 标签：google-chrome, build, sublimetext, shortcut

我按照 Windows 7 的说明设置了 chrome。没运气！

```
{
 "cmd":["C:\Program Files (x86)\Google\Chrome\Application", "$C:\Users\gmu\Desktop\June_15_2012"]
} 
```

输入文件位置/路径后，我应该以什么格式保存。我是个菜鸟。很抱歉问这个问题。什么都有帮助！

如果我按 f7 得到以下消息 Error trying to parse build system: Invalid escape in C:\Users\gmu\AppData\Roaming\Sublime Text2\Packages\User\Chrome.sublime-build:2:9

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T22:51:28.140

1.  首选项 > 键绑定用户在 Windows 中应如下所示：

    ```
    [
    // *RIGHT* { "keys": ["f12"], "command": "open_browser" },
    // *WRONG* { "keys": ["f12"], "ctrl": "open_browser" }, 

    { "keys": ["f12"], "command": "open_browser" },
    { "keys": ["ctrl+e"], "command": "HtmlDialect" },
    { "keys": ["/"], "command": "close_tag_on_slash" }
    ] 
    ```

2.  在您的包文件夹中查找名为“openbrow”的文件夹，然后在 sublime 中打开 openbrow.py 文件

找到您要使用的浏览器的图标并转到它的属性以将路径复制到它在您计算机上的位置

然后在 openbrow 文件中，你将把那个路径粘贴到它应该去的地方。例如`([r'C:\path to your browser', '-new-tab', self.view.file_name()])`

这是我的 openbrow.py 文件的样子：

```
 import sublime, sublime_plugin
    import subprocess

    class OpenBrowserCommand(sublime_plugin.TextCommand):
    def run(self,edit):
    subprocess.call([r'C:\Program Files 
    (x86)\Mozilla Firefox\firefox.exe','-new-tab', self.view.file_name()]) 
```

希望这可以帮助！KCCO

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T09:11:14.330

安装[Sublime View In Browser](https://github.com/adampresley/sublime-view-in-browser) 扩展，引用：

> *View In Browser 是一个 Sublime Text 2 插件，它将打开您当前视图/选项卡中的任何内容。*

使用 tne`README.md`文件中的说明进行安装。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-26T16:03:05.317

我遇到了同样的问题，发现了这篇文章！只需键入以下内容即可解决我的问题：

```
{
    "cmd": ["C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe", "$file"]
} 
```

请注意，双重`\\`解决了我的问题..

然后我将它保存为 Chrome.sublime-build ：

```
C:\Users\YourUsername\AppData\Roaming\Sublime Text 2\Packages\User 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-29T19:58:01.647

在我的 Windows 中，此代码正在运行。转到 Tools > Build System > New Build System 然后将代码与您的浏览器文件路径一起放置。

```
{
    "cmd": ["C:\\Program Files\\Mozilla Firefox\\firefox.exe", "$file"]
} 
```

请使用双 '\\' 作为 '\'。希望它会奏效。

# objective-c - 从格式创建 NSDate

> ID：11059115
> 
> 赞同：3
> 
> 时间：2012-06-15T22:51:42.683
> 
> 标签：objective-c, ios, nsdate

像这样的字符串所需的 NSFormat 是什么？

> 格林威治标准时间 2012 年 6 月 15 日星期五 15:37:38

我正在尝试从中创建一个 NSDate 对象。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T23:00:44.010

使用以下

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss z"];
NSDate *date = [formatter dateFromString:@"Fri, 15 Jun 2012 15:37:38 GMT"];
NSLog([date description]); //2012-06-15 15:37:38 +0000 
```

# parsing - 野牛移位减少冲突，我不知道在哪里

> ID：11059116
> 
> 赞同：3
> 
> 时间：2012-06-15T22:51:46.060
> 
> 标签：parsing, conflict, bison, reduce, shift

语法：[http](http://pastebin.com/ef2jt8Rg) : //pastebin.com/ef2jt8Rg y.输出：[http ://pastebin.com/AEKXrrRG](http://pastebin.com/AEKXrrRG)

我不知道这些冲突在哪里，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T18:48:29.923

y.output 文件会告诉您冲突的确切位置。第一个处于状态 4，因此如果您向下查看状态 4，您会看到：

```
state 4

   99 compound_statement: '{' . '}'
  100                   | '{' . statement_list '}'

    IDENTIFIER      shift, and go to state 6
          :
    IDENTIFIER  [reduce using rule 1 (threat_as_ref)]
    IDENTIFIER  [reduce using rule 2 (func_call_start)] 
```

这告诉您，在这种状态下（解析 a `compound_statement`，已经看到 a `{`），并查看下一个标记是`IDENTIFIER`，它可以做 3 件可能的事情 - 移动标记（这将是 a 的开头`statement_list`），减少`threat_as_ref`空生产，或减少`func_call_start`空生产。

方括号告诉您它已决定永远不执行这些操作——默认的“优先转换而不是减少”冲突解决意味着它将始终执行转换。

您的语法的问题是这些空规则`threat_as_ref`，并且`func_call_start`- 在移动标识符之前需要减少它们，但是为了知道它们是否有效，解析器需要在标识符之后查看标记。 `func_call_start`仅当这是函数调用的开始时才应减少（这取决于`(`IDENTIFIER 之后是否存在）。因此解析器需要更多的前瞻来处理您的语法。在您的具体情况下，您的语法是 LALR(2)（2 个标记前瞻就足够了），但不是 LALR(1)，所以野牛无法处理它。

现在您可以通过摆脱那些空规则来解决它——`func_call_start`根本没有任何操作，并且操作 for`threat_as_ref`可以移动到操作 for 中`variable`，但是如果您将来想要这些规则，这可能是个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:10:57.540

(1) 我至少看到一件事看起来很奇怪。您的作品 与的作品`expression_statement`相似`postfix_statement`，但并不完全相同。他们没有 '(' 和 ')' 标记：

```
expression_statement
    : ';'
    | expression ';'
    | func_call_start IDENTIFIER { ras_parse_variable_psh($2); aFree($2); } func_call_end ';'
    | func_call_start IDENTIFIER { ras_parse_variable_psh($2); aFree($2); } argument_expression_list func_call_end ';'
    ; 
```

由于 an`expression`可以是 a `primary_expression`，它可以是 an `IDENTIFIER`，并且因为`func_call_start`and`func_call_end`是 epsilon (null) 产生式，当出现输入时

```
foo; 
```

解析器必须决定是否应用

```
expression_statement : expression ';' 
```

或者

```
expression_statement :  func_call_start IDENTIFIER { ras_parse_variable_psh($2); aFree($2); } func_call_end ';' 
```

(2) 另外，我不确定这一点，但我怀疑 epsilon 非终端`threat_as_ref`可能会给您带来一些麻烦。我没有跟踪它，但可能存在解析器必须决定某事物是 a`variable_ref`还是 a 的情况`variable`。

# php - PHP mySQL Htaccess 漂亮的链接

> ID：11059120
> 
> 赞同：0
> 
> 时间：2012-06-15T22:52:30.160
> 
> 标签：php, mysql, .htaccess

有一个重写规则确保所有 URL 都指向 index.php 并保持“漂亮的格式”。

我仍然需要从他们那里获取信息来确定要发送给用户的页面。

说有一个网址

```
http://localhost/telephones/nokia 
```

我需要找出 SQL 表（'telephone'）和品牌（'nokia'）

我怎么做。

更新

```
RewriteEngine on
RewriteRule ^/([^/]+)/([^/]+) /index.php?table=$1&make=$2 [NC] 
```

（在 .htaccess 中）

```
$table = $_GET['table']; $make = $_GET['make'];
$CONsiteurl = mysql_query("SELECT * FROM $table WHERE name = $make"); 
```

所以我们现在可以通过输入来调出页面，`http://localhost/?make=nokia&table=telephones`但不能通过输入来访问它`http://localhost/telephones/nokia`

为什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T22:58:08.223

假设你有 mod_rewrite 设置，你可以在你的 .htaccess 中放这样的东西：

```
RewriteEngine on
RewriteRule ^/([^/]+)/([^/]+) /index.php?table=$1&make=$2 [NC] 
```

然后您可以使用 $_GET('table') 等从 php 访问值。

# python - Python中嵌套`for`循环的替代方案

> ID：11059124
> 
> 赞同：0
> 
> 时间：2012-06-15T22:53:17.520
> 
> 标签：python

我正在尝试比较从文件中读取的禁止文件夹列表。但是我们必须检查任务是否具有文件夹的父 ID，然后检查该文件夹是否与禁止文件夹匹配。我正在循环的列表可以包含许多项目。

```
for task in tasks:
    #Check the task is on their timesheet
    if task["id"] == entry["item_id"]:
        for folder in folders:
            #See if the task is inside the folder
            if task["parent_id"] == folder["id"]:
                for forbiddenFolder in forbiddenFolders:
                    #If the folder is on the list
                    if forbiddenFolder == folder["name"]:
                        body_of_email +=( "Using a task within a folder that is not permiited " + forbiddenFolder + "\r\n" )
                        folder["name"]
                        break 
```

此代码使用三个嵌套`for`循环，这可能会很慢。我可以提高效率吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T23:00:37.990

您可以减少代码行数并使其更易于理解，如下所示：

```
tasks_id = [task in tasks if task["id"] == entry["item_id"]]
folders_dict = dict()
for folder in folders:
    folders_dict[folder["id"]] = folder

for task in tasks_id:
    if task["parent_id"] in folders_dict.keys() and folder_dict[task["parent_id"]] in forbiddenFolders:
        body_of_email +=( "Using a task within a folder that is not permiited " + forbiddenFolder + "\r\n" ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T23:11:17.040

您在这里尝试做的是根据 id 查找项目（任务、文件夹）。Python 的字典提供了一种简单的方法来做到这一点。仅当您将进行多次搜索时才会保存（例如，如果有许多具有相同 ID 的任务，或者您将多次运行该函数）。

此外，对于forbiddenFolders，您只有一个名称列表（您不是在查找一个项目，您只是在检查它是否存在），Python 的集合适合这些名称。

无论如何，以下是您构建字典和集合的方式：

```
tasks_dict = dict((task['id'], task) for task in tasks)
folders_dict = dict((folder['id'], folder) for folder in folders)
forbidden_folders_set = set(forbiddenFolders) 
```

现在，`task = tasks_dict[id]`是这样的任务，`task['id'] == id`对于文件夹也是如此，因此您可以用这些表达式替换上面的循环。该设置不允许这样做，但它允许您使用`folder in forbidden_folders_set`.

（请记住，这些`dict(...)`操作中的每一个都可能比运行上述其中一个 for 循环花费更长的时间，但它们是未来更快查找的投资。）

```
if entry['item_id'] in tasks_dict:
    task = tasks_dict[entry['item_id']]
    if task['parent_id'] in folders_dict:
        folder = folders_dict[task['parent_id']]
        if folder in forbidden_folders_set:
            body_of_email += ... 
```

上面的`x in y`and`..._dict[x]`操作非常有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T23:55:03.973

一种让您保留原始数据结构的方法如下：

```
for task in (t for t in tasks if entry["item_id"]==t["id"]):
    for folder in (f for f in folders if task["parent_id"]==f["id"]):
        for forbiddenFolder in (ff for ff in forbiddenFolders if ff==folder["name"]):
            body_of_email += "Using a task within a folder that is not permitted %s \r\n"% forbiddenFolder
            break 
```

这利用了[生成器](https://stackoverflow.com/questions/231767/the-python-yield-keyword-explained)，它们非常节省内存，因此可以保持速度，以及形式的条件 for 循环`x for x in range(y) if condition`。我建议看一下两者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-14T20:16:53.580

从原始查询中的复杂细节退后一步，一般只关注一些“​​嵌套 for 循环的替代方案”，以下内容如何：

```
tasks = {
    'design': 'later',
    'testing': 'desired',
    'vacation': 'fall'
}

folders = {
    'summer': 'red',
    'fall': 'gold',
    'winter': 'white',
    'spring': 'green'
}

def apply_some_logic(a, b, c, d):
    return '_'.join([a, b, c, d]) if b == c else (a, b, c, d)

if __name__ == '__main__':
    results = (apply_some_logic(a, b, c, d) for a, b in tasks.items() for c, d in folders.items())
    for result in results:
        print(result)

$ python3.6 --version
Python 3.6.4

output:
('design', 'later', 'Summer', 'Red')
('design', 'later', 'Fall', 'Gold')
('design', 'later', 'Winter', 'White')
('design', 'later', 'Spring', 'Green')
('implementation', 'urgent', 'Summer', 'Red')
('implementation', 'urgent', 'Fall', 'Gold')
('implementation', 'urgent', 'Winter', 'White')
('implementation', 'urgent', 'Spring', 'Green')
('testing', 'desired', 'Summer', 'Red')
('testing', 'desired', 'Fall', 'Gold')
('testing', 'desired', 'Winter', 'White')
('testing', 'desired', 'Spring', 'Green')
('vacation', 'Fall', 'Summer', 'Red')
vacation_Fall_Fall_Gold
('vacation', 'Fall', 'Winter', 'White')
('vacation', 'Fall', 'Spring', 'Green') 
```

# c++ - 构造函数中的后期构造

> ID：11059125
> 
> 赞同：0
> 
> 时间：2012-06-15T22:53:46.653
> 
> 标签：c++, constructor

我有两个类，一个在另一个类中，我想在外部类构造函数的主体中构造内部类。我有我认为应该是正确的代码，但它不起作用。错误消息似乎告诉我没有与我的调用匹配的 VSL::VSL()，但它似乎是正确的原型。

代码看起来像这样：

在标题中：

```
class VSL
{
    VSL(vector<string> &v, string &s);
};
class KVTest
{
    VSL vsl;
    KVTest(int argc, char *argv[]);
}; 
```

在体内：

```
KVTest::KVTest(int argc, char *argv[]) {
    vector<string> v;
    string s;

    vsl(v, s);
} 
```

这失败并显示以下错误消息：

```
src/util/kv-test/kv-test.cpp: In constructor 'KVTest::KVTest(int, char**)':
src/util/kv-test/kv-test.cpp:237: error: no matching function for call to 'VSL::VSL()'
src/util/kv-test/kv-test.cpp:112: note: candidates are: VSL::VSL(std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >&, std::string&)
src/util/kv-test/kv-test.h:45: note:                 VSL::VSL(const VSL&)
src/util/kv-test/kv-test.cpp:347: error: no match for call to '(VSL) (std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >&, std::string&)' 
```

第 237 行是 KVTest 构造函数声明 第 347 行是该构造函数中调用 vsl 构造函数的行 第 112 行是 VSL 构造函数声明 标题的第 45 行是 { 开始 VSL 类 我没有显式的 VSL 复制构造函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T22:57:54.317

当你进入 的主体时`KVTest::KVTest`， ,`vsl`已经被初始化了；你不能再次调用构造函数。但是没有默认（即零参数）构造函数，因此编译器错误消息。

你有两个选择：

1.  为 声明一个默认构造函数`VSL`。
2.  `vsl`使用[构造函数初始化列表](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.6)显式初始化。这通常看起来像这样：

    ```
    KVTest::KVTest(int argc, char *argv[])
    : vsl(foo, bar)
    {} 
    ```

    如果您需要执行涉及临时变量等的复杂初始化，那么您应该考虑编写一个返回`VSL`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T23:01:43.520

首先，它不是“内部类”，它是数据成员。

现在将您的代码与声明和初始化 a 进行比较`int`：

```
int i = 0; 
```

你不能通过`int`写作来创建：

```
i(0); 
```

同样，这不构造`vsl`：

```
vsl(v, s); 
```

它已经在那时构造了，它在构造函数的主体开始之前构造，或者如果你有一个默认构造函数允许它在没有任何参数的情况下构造它。

要构造一个对象，您必须声明它：

```
VSL vsl(v, s); 
```

但是对于一个成员变量，它已经被声明了，所以你不能在构造函数体中这样做。

如果您有一个默认构造函数，您可以通过为其分配一个新值来更新构造函数主体中的变量：

```
vsl = VSL(v, s); 
```

只要您的类型具有正确编写的赋值运算符。

或者你可以在正确的时间在构造函数初始化列表中初始化它：

```
KVTest::KVTest(int argc, char *argv[])
:vsl( createVSL() )
{
} 
```

这会将其创建为由返回的对象的副本`createVSL()`

```
VSL createVSL()
{
  vector<string> v;
  string s;
  VSL vsl(v, s);
  return vsl;
} 
```

# mysql - 如何修复 MySQL 数据库中某些记录的意外编码问题？

> ID：11059126
> 
> 赞同：2
> 
> 时间：2012-06-15T22:53:48.463
> 
> 标签：mysql, encoding, character-encoding

多年来，我用于研究的数据库已经从 SyBase 迁移到 MySQL，再从 PostgreSQL 迁移回 MySQL。

它做得非常仔细，因此数据不会因为各种编码问题而被破坏，但不幸的是，一堆记录确实被损坏了。

例如，其中一条记录说`JÃ²zefina`，但应该是`Józefina`。

有谁知道我是否可以以编程方式解决这个特定的编码问题？

我的编码能力不是很强，但看起来我可以以某种方式将字节序列映射`Ã²`到`ó`，等等。

我想知道是否有人知道`Ã²`对应于哪个编码`ó`，这样我就不必手动创建从损坏的文本到正确文本的编码映射表，而是自动创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T02:44:42.773

将排序规则更改为 unicode。做这个：

```
ALTER TABLE `t1` CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

您的表使用的是 Windows-1252。如你看到的：

```
Dec 242
Hex F2
UTF-8 ò
Windows 1252 Ã² 
```

# ios - 如何在 Delphi 中构建 Apple 推送通知提供程序服务器

> ID：11059129
> 
> 赞同：11
> 
> 时间：2012-06-15T22:54:04.180
> 
> 标签：ios, delphi, push-notification, apple-push-notifications

我需要在 Delphi 中构建一个提供程序服务器，以通过 APNS 将推送通知消息发送到我的 iPhone 应用程序。

我读过这可以通过 Indy 组件来实现。还需要安装苹果提供的 SSL 证书（.p12）。

我正在寻找一些指针以在 Delphi 中开始使用它。什么是一个好的库可以使用，有没有人知道任何示例代码来做这样的事情？

以下是[Ruby & PHP](http://samvermette.com/145)、[C#](https://stackoverflow.com/questions/1020762/does-anyone-know-how-to-write-an-apple-push-notification-provider-in-c)和[JAVA的示例](https://stackoverflow.com/questions/9410249/ssl-handshake-with-apple-push-notification-server-via-java)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T14:52:35.907

好的，我按如下方式进行管理：在您的表单上
添加一个 indy`TidTCPClient`并`TIdSSLIOHandlerSocket`链接它们。`TIdSSLIOHandlerSocket`将、 set`CertFile`和中的 SSL 选项设置`KeyFile`为适当的 .pem 文件。将方法设置为`sslvSSLv23`并将模式设置为`sslmClient`。
在`IOHandler`'`OnGetPassword`事件中设置您的密钥密码。

有用的网址：http: [//developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html) [http://www.raywenderlich.com/3443/apple-push-notification-services -tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

在编码方面：

Nb HexData 是 iPhone App 发送的 ID

```
function SendNotification(HexData: String; Count: Integer): Boolean;
  var
    p_DataSize,
    I: Integer;
    p_payllen: Byte;
    p_json   : String;
    p_sndmsg : String;
  begin
// Delphi 6 so needed to create JSON by hand<br>
    p_json := '{"aps":{';
    if (Count > 0) then
    begin
      p_json := p_json + '"alert":"You Have ' + IntToStr(Count);
      if (count = 1) then
        p_json := p_json + ' Reminder'
      else<br>
        p_json := p_json + ' Reminders';
      p_json := p_json + '","sound": "default",';
    end;
    p_json := p_json + '"badge":' + inttostr(Count) + '}}';
    p_payllen := length(p_json);
    // Hard code the first part of message as it never changes
    p_sndmsg :=  chr(0) + chr(0) + chr(32);
    // Convert hex string to binary data 
    p_DataSize := Length(HexData) div 2;
    for I := 0 to p_DataSize-1 do
      p_sndmsg := p_sndmsg + char(Byte(StrToInt('$' + Copy(HexData, (I*2)+1,
        2))));
    //Now need to add length of json string and string itself
    p_sndmsg := p_sndmsg + chr(0) + Char(p_payllen) + p_json;
    try
    // According to Apple can't connect/disconnect for each message so leave open for later
      if (not PushClient.Connected) then
        PushClient.Connect;
      PushClient.IOHandler.Send(p_sndmsg[1], length(p_sndmsg));
    except
      on e : exception do
        Log_Error(e.message);
    end;
  end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T06:00:48.673

你可以尝试像 Rogier 所说的那样移植 java/php 或 ruby​​ 代码。同时看看他的[http://www.pushwoosh.com/](http://www.pushwoosh.com/)一些类似于[http://urbanairship.com/](http://urbanairship.com/)的东西。

# android - sdcard权限被拒绝android

> ID：11059130
> 
> 赞同：0
> 
> 时间：2012-06-15T22:54:06.303
> 
> 标签：android, sd-card

我正在尝试在 Android 2.1 htc eris 上为我的应用程序进行方法分析。它抱怨：

```
06-15 15:48:04.602: E/dalvikvm(826): Unable to open trace file '/sdcard/com.mayapp.trace': Permission denied 
```

我的 AndroidManifest.xml 上有以下用户权限条目：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

当我执行 adb push 时，出现以下错误：

```
adb push AndroidManifest.xml a.txt
failed to copy 'AndroidManifest.xml' to 'a.txt': Read-only file system 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T22:56:55.950

这可能不是答案，但您可以使用

```
File dir = Environment.getExternalStorageDirectory(); 
```

访问外部SD卡。我的假设是您自己编写了目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:41:35.070

它是 sd 卡放置不当和对 sd 卡的读/写访问的组合。使用 adb push/pull 验证 sd 卡，还使用 ​​adb remount 更改访问权限。解决了这个问题。

# android - 创建一个片段并向其发送数据

> ID：11059133
> 
> 赞同：1
> 
> 时间：2012-06-15T22:54:17.443
> 
> 标签：android, android-fragments

这是我创建一个新片段（称为`AlbumsTrackFragment`）并替换现有片段的方法：

```
AlbumsTrackFragment albumstrackfragment = new AlbumsTrackFragment(); 
FragmentTransaction fragmentTransaction = getFragmentManager().beginTransaction();
fragmentTransaction.replace(R.id.layout_ipod, albumstrackfragment, "albumsTrackfragment");
fragmentTransaction.addToBackStack(null);
fragmentTransaction.commit();
albumstrackfragment.DoTask(data); 
```

问题是，当我因为应用程序崩溃而无法调用该方法`DoTask()`并传递新片段一些数据时，确实我得到了：`Content view not yet created`

我怎样才能等待`commit`执行调用`DoTask()`我的片段的方法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T23:05:17.380

您可能会考虑通过 DoTask 将数据传递到您的片段，然后等到 OnActivityCreated() 被调用以执行 DoTask 中发生的任何操作。这样，您将传递数据，但在加载视图并且不会崩溃之前不做任何事情。

# php - PHP中的MongoDB`GET_LOCK`解决方案

> ID：11059134
> 
> 赞同：0
> 
> 时间：2012-06-15T22:54:57.167
> 
> 标签：php, mongodb, oauth, locking, blocking

我正在尝试找到一种解决方案来防止我的应用程序逻辑中出现竞争条件（特别是在更新 OAuth 访问令牌时），而我的后端数据库恰好是 mongodb。

来自 MySQL 背景，我习惯使用`GET_LOCK`它的相关函数来处理 PHP 中的阻塞。Mongo 是否有任何类似于 MySQL 的`GET_LOCK`功能，或者我是否必须使用 PHP 的文件锁定或类似的东西？

对于这种情况是`flock()`一个好的（或*适当的*）替代方案，还是仅在读取和写入文件时使用？

编辑：

我试图防止的竞争条件如下：

1.  实例 A 通知 OAuth 访问令牌即将到期

2.  实例 B 注意到 OAuth 访问令牌即将到期

3.  实例 A 从远程服务器请求刷新的 OAuth 访问令牌并获得一个

4.  实例 B 从同一服务器请求刷新的 OAuth 访问令牌并被拒绝（作为安全预防措施，服务器可能会使步骤 3 中的访问令牌无效）

5.  实例 A 将结果保存回数据库

6.  实例 B 将结果保存回数据库

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T07:18:44.230

如果您想使用 MongoDB 模拟命名互斥锁或锁，我建议通过为其创建一个特殊集合并拥有一个文档来使用[findAndModify](http://www.mongodb.org/display/DOCS/findAndModify+Command)，您甚至可以将其命名为 db.my_lock。

```
db.my_lock.save({"IMREFRESHINGAUTHTOKEN":false}); 
```

现在，在第 2 步和第 3 步之间添加一个 findAndModify 来获取“锁”：

```
db.my_lock.findAndModify(
        query: {"IMREFRESHINGAUTHTOKEN":false},
        update: {$set: {"IMREFRESHINGAUTHTOKEN": true}, ...}
); 
```

如果您首先获得“锁定”，您将取回该对象（并且您可以将第一个字段设置为 true - 我建议使用时间戳或连接号或进程 ID 或其他允许的标识符设置第二个字段在进程崩溃后进行清理，这样它就不会永远持有锁）。

如果你“输掉”比赛，你将不会得到任何匹配 "IMREFRESHINGAUTHTOKEN":false 的东西，你会知道你输掉比赛并放弃（或检查锁的时间戳，也许尝试看看它是否过时） .

这描述了对整个“集合”的独立单一锁定 - 当然，您可以将其作为存储的 OAuth 令牌上的一个额外字段来实现，并且一次刷新它们中的多个，因为有线程注意到它们即将到期。

希望这可以帮助。

# rest - Apache CXF 和 JAX-RS 中配置的 RequestHandler 的执行顺序

> ID：11059135
> 
> 赞同：2
> 
> 时间：2012-06-15T22:55:11.380
> 
> 标签：rest, cxf, jax-rs

我正在使用 Apache CXF JAX-RS v(2.30) 实现 REST API 服务器。我使用弹簧作为容器。我正在考虑利用`org.apache.cxf.jaxrs.ext.RequestHandler`实现一些功能，如许可证检查、身份验证、授权（所有这些都有自定义代码）。我的想法是将此代码隔离在各个实现类（实现`RequestHandler`）中，并将其配置为基本 REST url 之类的`/rest/*`。作为 Apache CXF 和 JAX-RS 的新手，我想了解以下内容。

*   这种方法是实现我想要的功能的正确方法吗？
*   如果是，那么`RequestHandler`声明 s 的顺序是它们的调用顺序吗？

例如，如果在我的定义中我声明：

```
<beans>
<jaxrs:server id="abcRestService" address="/rest">
    <jaxrs:serviceBeans>
      <bean class="com.abc.api.rest.service.FooService" />
    </jaxrs:serviceBeans>

    <jaxrs:providers>
      <ref bean="licenseFilter" />
      <ref bean="authorizationFilter" />
    </jaxrs:providers>

</jaxrs:server>

    <bean id="licenseFilter" class="com.abc.api.rest.providers.LicenseValidator">
        <!-- License check bean properties -->
    </bean>

    <bean id="authorizationFilter" class="com.abc.api.rest.providers.AuthorizationFilter">
        <!-- authorization bean properties -->
    </bean>
</beans> 
```

那么之前`licenseFilter` ***总是***会被调用`authorizationFilter`吗？

我没有提到`RequestHandler`s 和`ResponseHandler`s 的调用顺序。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:13:18.747

想通了。

它按照 bean 中的声明顺序被调用`<jaxrs:providers>`。因此，在有问题的情况下，licenseFilter 将在 authorizationFilter 之前被调用。

# erlang - 如何转换多个字节的大数？

> ID：11059139
> 
> 赞同：2
> 
> 时间：2012-06-15T22:55:36.120
> 
> 标签：erlang

如果一个数字是 4 个字节，从 LSB 到 MSB，如何将其转换为整数？例子：

```
<<77,0,0,0>> shall give 77 
```

但

```
<<0,1,0,0>> shall give 256

Let S = <<0,1,0,0>>, 
<<L1,L2,L3,L4>> = S,  
L = L1*1 + L2*256 + L3*65536 + L4*16777216, 
```

但它并不优雅......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T06:58:43.050

Erlang 中的[位语法](http://www.erlang.org/doc/reference_manual/expressions.html#id77874)以非常直接的方式做到了这一点：

```
<<A:32/little>> = <<0,1,0,0>>,
A.
% A = 256 
```

或作为一个函数：

```
decode(<<Int:32/little>>) -> Int.

% decode(<<0,1,0,0>>) =:= 256. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T23:16:28.173

**编辑**（这是正确的答案，很抱歉发现它太晚了......）

```
> binary:decode_unsigned(<<0,1,0,0>>,little).
256 
```

更简单的方法是：

```
decode_my_binary( <<A,B,C,D>> ) ->
    A + B*256 + C*65536 + D*16777216. 
```

**编辑**：

根据您的编辑，如果您发现这不是很优雅，您可以尝试其他方法。我仍然认为以上是正确的做法。您可以编写一个递归函数（未经测试，但您明白了）：

```
decode( B ) -> decode(binary_to_list(B), 0, 1).
decode( [], R, _ ) -> R;
decode( [H|T], R, F) ->
    decode(T, R + H*F, F*256). 
```

但这显然更慢。另一种可能性是获得二进制数字列表和乘数列表，然后将其折叠：

```
lists:sum(lists:zipwith( fun(X,Y) -> X*Y end,
                   binary_to_list(B), [ math:pow(256,X) || X <- [0,1,2,3] ])). 
```

或者，如果您想要可变位数：

```
fun(Digits) ->
    lists:sum(lists:zipwith( fun(X,Y) -> X*Y end,
                   binary_to_list(B), [ math:pow(256,X) || X <- lists:seq(0,Digits-1])). 
```

在哪里`Digits`告诉你数字。

# java - JPA 实体的集合成员被分离或不受管理

> ID：11059140
> 
> 赞同：0
> 
> 时间：2012-06-15T22:55:43.327
> 
> 标签：java, spring, hibernate, jpa, openjpa

TGIF 伙计们，但我仍然坚持我的一个项目。我有两个接口`IMasterOrder`和`IOrder`. 一个人`IMasterOrder`可能有一个集合`IOrder`。所以可以有多个`MasterOrder`实体类和`Order`实现接口的实体类。

为了简化编码，我在任何地方都创建了`IMasterOrder`对象`IOrder`，但是当它需要指定具体类型时，我只需将`IMasterOrder`对象转换为类类型。

问题是，这使得主类总是返回关于其订单的空值。我很好奇 JPA 通常如何处理多态性？

# 更新

很抱歉早期的混乱。其实这个问题要简单得多

实际上实体类是这样的

```
public class MasterOrder implements IMasterOrder {

// Relationships

@OneToOne(mappedBy = "masterOrder")
private OrderCustomFields customFields;

@OneToMany(mappedBy = "masterOrder")
private List<OrderLog> logs;

@OneToMany(mappedBy = "masterOrder")
private Collection<Order> orders;

// Fields... 
```

而获取Master订单实体实例的finder方法是这样的

```
 public static MasterOrder findMasterOrder(String id) {
    if (id == null || id.length() == 0) return null;
    return entityManager().find(MasterOrder.class, id);
} 
```

但是，此 finder 方法中的 MasterOrder 实例返回的 customFields 以及日志和订单都为空。那么如何解决这个问题呢？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:00:50.800

当您访问日志和订单时，Master 是否仍然是活动持久性上下文的一部分？即：找到主实体的EntityManager 是否已关闭或清除？如果是，一切都按预期工作。

对于傻笑，您可以尝试将日志和订单上的 fetch 属性更改为 EAGER ......这将有助于查明是否还有其他不好的事情发生。

```
@OneToMany(mappedBy = "masterOrder", fetch = FetchType.LAZY)
private List<OrderLog> logs;

@OneToMany(mappedBy = "masterOrder", fetch = FetchType.LAZY)
private Collection<Order> orders; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:17:26.563

听起来你的映射有问题.. 我不认为空集合应该是 NULL，它们应该是一个空列表（如果已初始化），或者是一个在您读取它时将被初始化的代理。如果你离开事务并尝试从集合中读取，它应该抛出一个惰性初始化异常。无论哪种情况，您都应该在问题中包含所有相关类以提供更多信息。

# objective-c - performSegueWithIdentifier 的调用顺序

> ID：11059143
> 
> 赞同：4
> 
> 时间：2012-06-15T22:56:05.440
> 
> 标签：objective-c, ios, uiviewcontroller

当我打电话时，`performSegueWithIdentifier:`我会在`prepareForSegue:`之后重写，以便在我的目标视图控制器上设置一些属性。但是，我试图了解这里的操作顺序以确保它是安全的。

我实例化目标视图控制器：

```
MyViewController *myVC = (MyViewController*)segue.destinationViewController; 
```

之后，我在其上设置了一些属性——即，我初始化了另一个处理加载不同 Web 视图的对象的创建，然后在该对象上设置属性：

```
[myVC setFormHandler:
    [[WebFormHandler alloc] initWithSelectedFormName:[self theFormName]]]; 
```

在`viewDidLoad:`我的目标控制器中，我然后查询该对象的属性，并使用它来加载正确的 Web 视图。现在，我对首先发生的事情感到有些困惑——属性的设置，或者`viewDidLoad:`目标控制器上的设置。可以肯定地说视图控制器的属性总是在调用`prepareForSegue:`之前设置吗？`viewDidLoad:`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:10:55.287

看起来您可能已经从其他帖子中找到了答案，但我只是想澄清一点。

标准流程是

performSegue -> prepare -> loadView（在目标控制器中）

但是，在 popover segues 中，目标视图在 prepareForSegue 调用之前加载。

**注意**：在 iOS 8 中不再是这种情况。在 iOS 8 中，popover segue 的视图在调用 prepareForSegue 时不会加载。

# asp.net-mvc - MVC .net 基于注释的验证：从电话号码中删除破折号和括号

> ID：11059145
> 
> 赞同：0
> 
> 时间：2012-06-15T22:56:14.897
> 
> 标签：asp.net-mvc, validation, asp.net-web-api

是否可以同时验证所提供的数据是电话号码的形式并将其缩减为仅验证器中的数字？

> **输入：** (902) 837-2832
> **输出：**有效：是，9028372832

还是事后我必须将输入转换为纯数字格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T01:49:34.250

这是一个如何使用正则表达式进行验证的示例：

```
 [Required(ErrorMessage="Phone Number is required")]
 [RegularExpression("^(?([0-9]{3}))?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$", ErrorMessage="Not a valid number")]
 public string PhoneNumber { get; set; } 
```

我们可以使用字符串的 Trim 方法来清理电话号码并只获取数字。

```
char[] charsToTrim = { '(', ' ', ')', '-'};
string phoneNumber = "(123)-345-6789";
string result = banner.Trim(charsToTrim); 
```

最后，这里有一篇文章[更详细地解释了使用 DataAnnotations 启用验证](http://weblogs.asp.net/scottgu/archive/2010/01/15/asp-net-mvc-2-model-validation.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T02:28:02.610

将一个属性添加到您的模型中，该属性只有一个 getter，该 getter 返回绑定到输入的属性的精简版本。将您的验证属性放在该属性上。

```
public string PhoneNumber {get;set;}

[Required(ErrorMessage="Phone number is required.")]
[RegularExpression(@"\d{10}", ErrorMessage="Phone number is invalid.")]
public string PhoneNumberValue
{
    get 
    {
        var temp = PhoneNumber
        temp = Regex.Replace(temp, @"[^0-9]", "");
        temp = temp.Length == 11 && temp.StartsWith("1")
            ? temp.Substring(1) : temp;
    }

    set
    {
        // I can't remember off the top of my head if MVC model
        // binding requires a setter or not. If so, just leave this
        // empty. Otherwise you can remove it entirely.
    }
} 
```

然后，在您看来，只需呈现备用验证消息。

```
@Html.LabelFor(x=>x.PhoneNumber)
@Html.TextBoxFor(x=>x.PhoneNumber)
@Html.ValidationMessageFor(x=>x.PhoneNumberValue) 
```

# mysql - mysql 不会在连接表和限制上返回不同的结果

> ID：11059147
> 
> 赞同：1
> 
> 时间：2012-06-15T22:56:29.427
> 
> 标签：mysql

我敢肯定答案在某种程度上是合乎逻辑的，但是就这样。

我在三列上连接了三个*大*表，每一列都是主键的一部分。我想在 column1 上获得不同的选择。

如果我一次得到整个结果，它就可以工作，即将它导出到一个文件中。但是，如果我像 phpadmin 那样对它进行分页，`LIMIT 1000, 0`我会得到一些 column1 值两次，例如第 1 页上的 val1 和最后一页上的 val1。这也意味着我没有得到一些我应该拥有的价值。如果我`ORDER BY column1`再次添加一切正常，但我在最后几页上放慢了速度，或者这就是我被告知的。

我想这与 mysql 处理分页并在不知道整个结果的情况下返回结果的方式有关，但它仍然困扰着我。任何人都可以详细说明。

对查询进行分页的原因是因为我不喜欢一次将表锁定更长的时间。有谁知道如何实现这一目标并同时获取所有数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T22:58:48.640

在没有 ORDER BY 的情况下使用 LIMIT 实现分页是没有意义的。

是的，你是对的，没有 ORDER BY 会更快，因为服务器可以自由地以任何顺序返回任意结果，并且结果不必从一个查询到下一个查询保持一致。

如果你想要正确和一致的结果，你*必须*有 ORDER BY。如果您担心性能，请考虑为您订购的列添加索引。

从手册页[`LIMIT optimization`](http://dev.mysql.com/doc/refman/5.6/en/limit-optimization.html)：

> 如果将 LIMIT row_count 与 ORDER BY 一起使用，MySQL 会在找到排序结果的第一个 row_count 行后立即结束排序，而不是对整个结果进行排序。如果使用索引进行排序，则速度非常快。

* * *

> 对查询进行分页的原因是因为我不喜欢一次将表锁定更长的时间。有谁知道如何实现这一目标并同时获取所有数据？

如果您尝试对每一行执行一些操作，那么如果可以添加或删除数据，那么您的方法将不起作用。这是因为它将推送所有以下行，并且某些行将被移动到不同的页面上。添加一行会将一些行推送到下一页，这意味着您会看到一行两次。从较早的页面中删除一行将导致您跳过一行。

相反，您可以使用以下方法之一：

*   使用一些`id`来跟踪您的进步程度。选择具有更高的下 n 行`id`。
*   通过在列中存储布尔值来记录您已处理的行。选择您尚未处理的任何 n 行。

# php - 页面内容消失

> ID：11059151
> 
> 赞同：0
> 
> 时间：2012-06-15T22:56:57.707
> 
> 标签：php, javascript

我有一个读取 PHP 文件的简单代码脚本，当它被更改时，它应该在页面上显示 CHANGED，我将更改它以刷新页面或更改内容。现在，它显示内容，该功能重复一两次，然后什么都不显示。有什么帮助吗？

这是代码：

```
<?php
$handle = fopen("../chat/real/chatserver.php", "r");
$contents = fread($handle, filesize("../chat/real/chatserver.php"));
fclose($handle);
$newcontents = $contents;
echo $contents;
?>

<script type="text/javascript">
checkchanged();
function checkchanged() {
document.write("<?php $handle = fopen('../chat/real/chatserver.php', 'r');
$newcontents = fread($handle,filesize('../chat/real/chatserver.php'));fclose($handle);?>");
document.write("<?php if(!($contents==$newcontents)){echo 'Changed';} ?>");
setTimeout('checkchanged()',3000);
}
</script> 
```

[链接到示例](http://silmar.co.cc/main/test/)

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T23:08:27.793

这是因为您不能在 JavaScript 中包含 PHP 以便客户端执行它。是的，您可以包含 PHP 值，但仅此而已。在浏览器中查看源代码：

```
<script type="text/javascript">
checkchanged();
function checkchanged() {
document.write("");
document.write("");
setTimeout('checkchanged()',3000);
}
</script> 
```

如您所见，该函数`document.write`使用空字符串调用`""`。这是因为在结果页面被发送到客户端***之前***`<?php ?>`，其中的所有内容都在服务器上执行，而不是在客户端上执行。

 *`$contents==$newcontents`由于每个 PHP 代码只会被解析一次`true`，所以你永远不会看到`Changed`。

要实现类似聊天服务器的功能，您需要新的 http 请求。看看 AJAX。*

# ajax - Chrome 中的 Ajax + pushState 错误

> ID：11059154
> 
> 赞同：7
> 
> 时间：2012-06-15T22:57:05.560
> 
> 标签：ajax, html, google-chrome

我在 Chrome 19 中遇到了一个奇怪的错误。我实现了一个支持 pushState 的完整 AJAX 网站（每个非外部链接都通过 AJAX 请求打开）。我通过 JSON 格式以 AJAX 传输 HTML 片段。

当我通过外部链接离开我的网站然后返回时，Chrome 会为该 URL 呈现缓存数据 - 问题是，他缓存 JSON 内容并显示它，而不是完整的网页。

这可以通过这些步骤重现（**更新：从那时起我在我的网站上删除了 AJAX 功能，所以这个错误不再出现**）：

1.  打开[http://beta.mirtes.cz/](http://beta.mirtes.cz/)
2.  单击第二个日期链接（16\. 6\. 2012 旁边的“这一切都始于一封奇怪的电子邮件”）。此页面（您现在位于[http://beta.mirtes.cz/it-all-began-with-a-strange-e-mail](http://beta.mirtes.cz/it-all-began-with-a-strange-e-mail)）通过 AJAX 加载。
3.  点击“这一切都始于一封奇怪的电子邮件”。您被重定向到外部网站。
4.  页面完全加载后，在 Chrome 中单击“返回”。

我尝试使用 Cache-Control: no-cache 发送所有 AJAX 响应，但没有任何效果。

Firefox 12 工作正常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T22:13:58.233

我提供了一个解决方法 - 我使用额外的虚拟 GET 参数执行 AJAX 请求 - ?ajax=1。通过这种方式，浏览器可以识别通常的 HTML 内容和 JSON 之间的区别。它对用户没有任何影响，该参数仅在 Firebug 中可见。

# c - scanf来自文件的多个输入

> ID：11059155
> 
> 赞同：0
> 
> 时间：2012-06-15T22:57:20.170
> 
> 标签：c

我正在尝试从一本未命名的书中学习 C，其中包含以下示例代码：

```
#include <stdio.h>

int main() {
    char word[10];
    int i = 0;
    while (scanf("%9s", word) == 1) {
        i = i+1;
        if (i % 2) {
            fprintf(stdout, "%s\n", word);
        } else {
            fprintf(stderr, "%s\n", word);
        }
        return 0;
    }
} 
```

该示例是通过运行来演示将输出管道传输到单独的文件中

`./thisprogram < input.txt > output.txt 2> error.txt`

并且应该将每隔一个单词输出到相应的文件中。看起来它应该可以工作，但是当我运行它时，只会输出第一个单词，我不明白为什么 scanf 只取第一个值。我确定我已经正确地复制了代码，但是没有列出这个的勘误表，所以我想知道你们中的任何一位大师是否可以解释它为什么不起作用以及如何修复它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T22:59:53.150

该`return`语句不应该在`while`块中，而是在它之后：

```
int main() {
    char word[10];
    int i = 0;
    while (scanf("%9s", word) == 1) {
        i = i+1;
        if (i % 2) {
            fprintf(stdout, "%s\n", word);
        } else {
            fprintf(stderr, "%s\n", word);
        }
        /* remove this: return 0; */
    }
    return 0; /* place it here */
} 
```

否则，您的程序将在提取第一个单词后退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T01:58:21.667

你犯了一个非常愚蠢的错误。

您已将其放置在`return statement`内部，`while loop`因此您的循环仅运行一次并终止。

我在[Ideone](http://ideone.com/678Mb)上运行了你的代码，发现你的代码只打印了你输入的第一个单词。

放在末尾`return statement`之后`while loop`，您的代码将被更正。

更正后，代码运行成功，如您[在此处](http://ideone.com/5BS7S)看到的。

希望这可以帮助。

# css - 我的 CSS 很大。使用 ModX，我可以将 CSS 分成几部分吗？

> ID：11059163
> 
> 赞同：0
> 
> 时间：2012-06-15T22:58:39.123
> 
> 标签：css, modx, modx-resources

我有几个大型 CSS 文件，有时可能需要几分钟才能找到要更改的正确选择器。如果有一个不错的 CSS 的 ModX 编辑器，我会很高兴，但我一直找不到。只要我的网站仍然呈现，我愿意将我的文件分成几部分。我可以这样做吗？怎么做？如果有一个不错的编辑器（插件？），我在哪里可以找到一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T22:58:39.577

我想真正的问题是你可以接受什么样的零件。如果您遵循[这个问题](https://stackoverflow.com/q/11027526/501932)，您可以开始允许 ModX 管理您的 CSS 的过程。一旦发生这种情况，您的选择就会大大增加。根据您对 ModX 的专业水平，您的 CSS 编辑将变得更容易且耗时更少。这个答案将非常简单，因为它将简单地展示如何将给定的选择器添加为资源。不过，可以从这里直观地了解其他进一步的发展。

### CSS 作为资源

一旦您的 CSS 被作为资源管理（大约需要 15 分钟），您就可以使用模板、模板变量、块、片段和插件。这实际上非常惊人，但设置可能有点痛苦。你基本上会投入一些时间来节省未来的大量时间。下一个合乎逻辑的步骤是相应地拆分您的选择器，但您不想破坏当前的工作方式。对 getResources 插件有一个流畅的理解对于进一步的开发至关重要。

## 怎么做：

* * *

### 1.创建一个新块

单击元素选项卡，然后单击“新建块”。将其命名为“css 选择器”。将内容设置为：

```
[[+pagetitle]] {[[+content]]} 
```

就这么简单。不要忘记点击“保存”！这将允许您将 Selector 设置为资源。它将使用选择器的标题和规则的内容。你可以忘记再使用那些牙套了。从现在开始，您的新块将处理这些。

### 2.调整你的模板

现在，我们只需要让模板相信它现在可以阅读部分内容，并且不要忘记整体。打开您的 CSS 样式表模板（说明`[[*content]]`其内容的模板）。调整代码，使其具有以下内容：

```
[[!getResources?
  &parent=`[[*id]]`
  &depth=`1`
  &tpl=`css-selector`
  &includeContent=`1`
  &sortby=`menuindex`
  &sortdir=`ASC`
  &limit=`99`
]]
[[*content]] 
```

再次单击“保存”。让我快速解释一下模板。如果您有孩子，他们将根据他们的菜单索引首先呈现。此外，它将在之后呈现非子文档的内容。这将允许您只为最重要的选择器创建新资源，同时将永远不会更改的内容保留在主资源中。

### 3.创建一个新模板

这样您的选择器就不会做任何有趣的事情而只是渲染内容。创建一个名为“CSS 选择器”的新模板。将其内容设置为：

```
[[*content]] 
```

### 4.创建一个新资源

创建一个新资源。将标题设置为要管理的 css 语句的选择器。然后将内容设置为不带大括号的规则。例如，如果您的 css 语句是：`div#header .logo {border:0;}`，您将设置标题`div#header .logo`和内容`border:0;`。将资源别名设置为您想要的任何内容。我为每个人使用数字。将模板设置为新的“CSS 选择器”。**重要**现在，将父文档设置为您的样式表。单击保存。

### 5\. 测试样式表

首先，右键单击您的新资源并选择“查看资源”。这将确保语句正确呈现。它应该简单地以 CSS 格式说明您的规则。

接下来，右键单击样式表资源并选择“查看资源”。您应该会在顶部看到选择器，并在其下方看到所有其他规则。

## 最后的考虑

* * *

### 观察

*   您会注意到您的子资源不必更改为“文档类型”的“CSS”。只有父样式表必须是。随着您对 ModX 的专业知识的增长，这允许一些整洁的东西。

*   您可以通过简单地更改它们的菜单索引来更改规则的顺序。

*   可以通过这种方式完成的规则​​数量取决于模板`&limit`中语句中的变量。适用于每个样式表，因此在此示例中，每个样式表有 99 个语句，它们可能是单独的资源。`getResources``&limit`

### 服务器负载注意事项

随着资源数量的增加，这将给服务器带来负载。对于开发，请在 getResources 语句中保留“不缓存标志”（！）。完成后，删除感叹号并将其全部缓存。这将节省大量负载。

### 进一步的发展

*   我添加了一个 isEnabled 模板变量，以便我可以随意打开和关闭每个规则。
*   您可能会开始使用 FormIt 在前端管理您的 CSS。
*   自定义管理器页面甚至可能是您更好的选择。
*   进一步的抽象可能允许您为更进一步的组织创建语句分组。

# c# - 是否可以从 MethodBuilder/ConstructorBuilder 调用 DynamicMethod

> ID：11059165
> 
> 赞同：3
> 
> 时间：2012-06-15T22:58:43.340
> 
> 标签：c#, reflection.emit, dynamicmethod

我有一个从 ConstructorBuilder 创建的 ILGenerator，我想用它创建和调用 DynamicMethod，但我得到一个 InvalidOperationException - 无法从不同的模块导入全局方法或字段。

```
var constructorBuilder = typeBuilder.DefineConstructor(...);
var ilGenFromCtor = constructorBuilder.GetILGenerator();
.
.
.
var dynamicMethod = new DynamicMethod("Name", ReturnType, Type.EmptyTypes, true);
var ilGenFromDynamicMethod = dynamicMethod.GetILGenerator();
.
.
var @delegate = dynamicMethod.CreateDelegate();

ilGenFromCtor.Emit(OpCodes.Call, @delegate.Method);

--Or

ilGenFromCtor.Emit(OpCodes.Call, dynamicMethod);

10x 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:03:48.203

因为您实际上是在运行时定义一个完整的、完整的程序集，所以您将不得不在程序集中的某处（可能在您从中获得 的类中`ConstructorBuilder`）声明该方法，方法是使用 的重载之一[`TypeBuilder.DefineMethod`](http://msdn.microsoft.com/en-us/library/bf36892y.aspx)和[`MethodBuilder`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.methodbuilder.aspx)它的实例返回。`DynamicMethod`.NET 运行时处理对象的方式与使用的方式完全不同`Reflection.Emit`。使用 定义方法后`MethodBuilder`，可以将其用作`ILGenerator.Emit`.

# java - Java Stacktrace 错误 Unsupported major.minor 版本 51.0

> ID：11059167
> 
> 赞同：11
> 
> 时间：2012-06-15T22:59:00.547
> 
> 标签：java, version, unsupported-class-version

> **可能重复：**
> [不支持的主要 .minor 版本 51.0](https://stackoverflow.com/questions/10382929/unsupported-major-minor-version-51-0)

我制作了这个脚本，它给了我这个错误：

```
java.lang.UnsupportedClassVersionError: net/glitching/client : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(Unknown Source)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$000(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
Exception in thread "main" 
```

这是什么意思？这是我的代码...

```
package net.glitching;

import java.io.IOException;
import java.io.ObjectInputStream;
import java.net.Socket;

public class client {

    static Socket sock = null;

    public static void main(String[] args) {
        while (true) {
            try {
                sock = new Socket("localhost", 4000);
                ObjectInputStream in = new ObjectInputStream(sock.getInputStream());
            } 
            catch (IOException ex) {}
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-15T23:02:30.680

为 Java 7 编译的 Java 类文件具有主要/次要版本 51/0。如果你有一个没有为 Java 7 准备的 JVM 实现，它会给你这个错误，指出“我不知道如何解释和运行这个类文件”。

尝试为较旧的 JVM 版本进行编译，或者升级您的 JVM。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T23:01:37.610

问题是您的 SDK 和运行时环境不匹配。尝试检查编译选项以使用正确的版本，这两者都有。

另请参阅：[如何修复 java.lang.UnsupportedClassVersionError：不支持的 major.minor 版本](https://stackoverflow.com/questions/10382929/unsupported-major-minor-version-51-0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T13:02:39.353

如果您将 Netbeans 与 maven 一起使用，并且您的 maven-compiler-plugin 具有属性文件中的值，则将其更改为 1.6 之类的文字值，您的问题就会消失。这与 Netbeans 被混淆有关。

# c# - 移除 EF DBContext 和基础设施层的耦合

> ID：11059175
> 
> 赞同：1
> 
> 时间：2012-06-15T23:00:45.877
> 
> 标签：c#, entity-framework, dependency-injection, inversion-of-control, ioc-container

我在基础设施层定义了我的接口，以使用依赖注入，但现在的问题是，如何在基础设施层和服务层使用接口解决 DBContext 的依赖关系，而不添加对 EF dll 的引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T00:25:46.333

如果您需要从应用程序中完全隐藏 EF，则需要使用[存储库模式](http://martinfowler.com/eaaCatalog/repository.html)，将 EF 隐藏在存储库后面并生成（或编写）POCO 实体。

如果您更务实，则可以[使用支持 IQueryable 的通用存储库](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=84)，这可以提供出色的开发和单元测试体验，但选择什么取决于您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T00:46:59.667

您可以修改 T4 文件（也称为 T4 模板或 .tt 文件）以创建接口以及上下文，甚至可以将它们分成两个单独的 T4 文件，这样您就可以将它们放在单独的程序集中。您也可以使上下文返回 IQueryable 而不是 ObjectQuery，但是...

为了编写在数据库上而不是在内存中运行的优化查询，查询必须考虑到它们下面的技术，你不能编写通用查询，在内存列表上对它们进行单元测试，然后期望它们转换为 SQL正确并高效运行，无一例外。- 您必须在真实数据库（带有演示数据）上测试您的查询。

您应该做的是实现将 DAL 技术隐藏在其上层的服务，但在其实现内部使用 EF 的全部功能以尽可能高效地工作。

可以模拟这些服务，以测试它们之上的层，并且可以使用测试数据库（例如，使用由测试类创建和启动的 LOCALDB 实例）来测试服务本身以及它们对 EF 的使用。

许多相关链接中的一些：
[使用 EF 4.1 的通用存储库有什么意义](https://stackoverflow.com/questions/5625746/generic-repository-with-ef-4-1-what-is-the-point)
[ASP.NET MVC3 和实体框架代码优先架构](https://stackoverflow.com/questions/5609508/asp-net-mvc3-and-entity-framework-code-first-architecture/5610685#5610685)
[UnitOfWork 和 GenericRepository 模式在 EF 4.1 代码优先中是多余的吗？](https://stackoverflow.com/questions/5762846/is-unitofwork-and-genericrepository-pattern-redundant-in-ef-4-1-code-first/5763551#5763551)
[https://softwareengineering.stackexchange.com/questions/133448/unit-integration-testing-my-dal](https://softwareengineering.stackexchange.com/questions/133448/unit-integration-testing-my-dal)

# .net - 将 JSON 对象传递给 .NET WCF 服务时出现反序列化错误

> ID：11059176
> 
> 赞同：2
> 
> 时间：2012-06-15T23:00:46.820
> 
> 标签：.net, json, wcf, deserialization

我有一个应用程序，我在其中将 JSON 对象返回给浏览器；JavaScript 然后将该对象分配给局部变量。我现在可以通过读取和写入它的属性来与这个对象进行交互。我还可以在 WCF 服务方法参数都是简单类型的情况下进行 AJAX 服务调用。所有这些都很好。但是，现在我创建了一个保存方法，该方法采用 BorrowerSummaryInfo 类型的参数（我最初从服务器接收并设置为本地变量的同一对象）。这是使用 DataContract 属性声明的 .NET 类。我的问题是对象反序列化失败。我想不出我们为什么会这样。

我使用 JSON.stringify 方法传递我的对象，并使用 jQuery 的 ajax 功能。我尝试让 .NET 处理反序列化，我尝试使用 DataContractJsonSerializer 对象和 JavaScriptSerializer 传递尝试反序列化它的字符串版本。我还对 web.config 进行了更改，以确保对象的大小不是问题。

这个概念非常简单，但没有任何效果。任何帮助是极大的赞赏！

这是JSON对象..

```
"{
    "Entity":"{
        '__type':'BorrowerSummaryInfo:StoneWaterUI',
        'ApplicationID':123,
        'BorrowerDetails':{
            '__type':'BorrowerDetailsInfo:StoneWaterUI'
            ,'Age':80,
            'BorrowerID':345,
            'DateOfBirth':'00/13/1931',
            'FirstName':'HERMINE',
            'HomePhone':'000-000-0000
            'IsPrimaryBorrower':false,
            'LastName':'DLESK',
            'MiddleName':'E.',
            'MobilePhone':'',
            'SSN':'000-00000
            'Suffix':'',
            'WorkPhone':'000-000-0000'
        },
        'CoBorrowerDetails':{
            '__type':'BorrowerDetailsInfo:StoneWaterUI',
            'Age':null,
            'BorrowerID':null,
            'DateOfBirth':'',
            'FirstName':'test',
            'HomePhone':'test1',
            'IsPrimaryBorrower':false,
            'LastName':'',
            'MiddleName':'',
            'MobilePhone':'',
            'SSN':'',
            'Suffix':'',
            'WorkPhone':''
        },
        'LoanID':55555
    }"
}" 
```

# asp.net-mvc-4 - 单击发布时出错 | “你调用的对象是空的”

> ID：11059181
> 
> 赞同：4
> 
> 时间：2012-06-15T23:01:24.527
> 
> 标签：asp.net-mvc-4, nullreferenceexception, publishing, visual-studio-2012

我正在尝试发布我刚刚在 Visual Studio 2012 中创建的项目的文件。

当我点击发布时，

![在此处输入图像描述](../Images/5ae274d8800f360d5d585cc2630832bf.png)

显示以下窗口

![在此处输入图像描述](../Images/9561c8fd73b859f213afd6989dc7f964.png)

已经创建了一个新的 Web 项目（相同类型，asp.net mvc 4）并尝试进行相同的更改并且一切正常。显然这只发生在这个项目上！

已经关闭“VS”并在我重新启动PC时再次打开..有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:34:30.427

还要检查 .csproj 文件中的 ProjectTypeGuids。我有一个类似的问题，虽然不完全一样，来源是因为其他团队成员在VS2012中打开了该项目，而我在VS2010上。VS2012 强制您将 MVC2 站点转换为 MVC3 站点，而 VS2010 在发布时无法处理。

如果你问我，向后兼容性很差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:15:53.757

您的 web.config 中的元素中有`<clear/>`元素吗？`<connectionStrings>`如果是这样，请将其删除，您应该可以发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-19T09:51:40.047

在 Visual Studio 2010 中发布我们的项目时，我也遇到了同样的问题。

> **对我来说，从 bin 文件夹中删除所有文件都有效。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-20T12:31:51.067

对我来说，从 src 文件夹中删除扩展名为 .pubxml 和 .pubxml.user 的文件是修复它的方法。之后我不得不重新配置发布设置。请记住，您可能需要多次删除它们并重新启动 IDE 才能使其正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-20T16:41:38.657

好的，我刚刚解决了这个问题。这是 web.config 中的错误。检查它指向 Microsoft.Meb.Publishing.targets 的输出，第 2309 行，作为错误的来源。如果通过双击输出检查该行，它将显示 ParameterizeTransformXml 节点。这使得 release/debug.config 和 web.config 之间的替换被发布。

在我们的例子中，git 上的合并导致 web.config 文件出现问题。但正如 JiffyLueb 所说，任何其他意外标签都可能导致问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-14T09:07:32.147

[我已经在这里](https://stackoverflow.com/a/69961645/6623360)回答了这个问题。基本上，您需要修复您的 Visual Studio 安装。

# php - 通过权限位掩码从 MySQL 数据库中选择用户？

> ID：11059182
> 
> 赞同：21
> 
> 时间：2012-06-15T23:01:32.650
> 
> 标签：php, mysql, select, bitmask

我有用户表，想按位掩码标准选择一些行。我将尝试用一个小例子来解释我的问题。

表**用户的结构**

```
user_id             int           [primary key, auto_increment]
user_email          varchar(200)    
user_privileges     int 
```

**注意：**它有更多字段，但与此问题无关。

填充表可能如下所示

```
+---------+--------------------+-----------------+
| user_id | user_email         | user_privileges |  << binary
+---------+--------------------+-----------------+
| 1       | john@example.com   | 165             |  10100101
| 2       | max@example.com    | 13              |  00001101
| 3       | trevor@example.com | 33              |  00100001
| 4       | paul@example.com   | 8               |  00001000
| 5       | rashid@example.com | 5               |  00000101
+---------+--------------------+-----------------+ 
```

现在我想通过特定权限位掩码（按`user_privileges`列）选择用户。

例如：

*   **bitmask=1** [00000001] 将选择用户 ID **1、2、3 和 5**
*   **bitmask=9** [00001001] 将只选择用户 ID **2**
*   **bitmask=5** [00000101] 将选择用户 ID **1、2 和 5**
*   **bitmask=130** [10000010] 将选择**无**

**我的问题：**是否可以通过查询或者我必须逐个访问所有用户并从 PHP 代码中检查此值？另外，如果字段**user_privileges**是`text`包含十六进制数字而不是整数，是否有可能？我需要工作 mysql 查询示例。

**注意：**这只是一个带有 8 位权限集的简单示例。在实际环境中，它可能有更大的集合（更大的整数，更多字节）。为每个特权状态创建单独的列可以正常工作，但这不是可能的解决方案。我宁愿使用十六进制值，但整数也可以，有总比没有好。

提前谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-15T23:23:28.480

> [...] 想要选择一些字段

错误的。你想选择一些**Rows**。列通常称为字段。

您应该阅读文档：为 mysql记录[位函数。](http://dev.mysql.com/doc/refman/5.1/en/bit-functions.html)

所以你可以试试：

`Select * from users WHERE (user_privileges & 1) >0`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-15T23:37:44.903

```
SELECT
    *
FROM
    users
WHERE
    (user_privileges & <level>) = <level> 
```

`<level>`是您要搜索的访问级别（例如 1、5、9、130 等）

# html - CSS图像悬停链接

> ID：11059186
> 
> 赞同：1
> 
> 时间：2012-06-15T23:01:48.247
> 
> 标签：html, internet-explorer, firefox, google-chrome, css

我有一张图片，然后是一系列链接。悬停在文本链接上按预期工作，但是当我将它放在图像上时，在 chrome 和 safari 中它只会改变图像一部分的背景颜色，而不是整个图像......我真的不明白。我尝试了 jsfiddle 以及 SO 中提到的其他一些工具，如果您知道为什么会发生这种情况，请查看下面的代码：

```
<html>
<head>
  <title>Welcome!</title>
  <style type="text/css">
    #header {
        background-color:#2C2C2C;
        height:88px;
        width:100%;
        margin: 0px auto 0 auto;
    }
    #header_logo_link {
        float: left;
        width: 250px;
    }
    #header_logo_link img {
        padding-right: 15px;
        padding-left: 15px;
        padding-top: 15px;
        padding-bottom: 10px;
        background: transparent;
    }
    #header_logo_link :hover {
        background-color: #4d4d4d;
    }
    body, .wrapper {
        min-height: 100%;
        overflow: hidden;

        margin: 0;
        padding: 0;
        min-height: 100%;
    }
  </style>
</head>

<body>
  <div class="wrapper">
    <div id="header">
        <div id="header_logo_link">
            <a href="/"><img src="logo.png"></a>
        </div>
        <div id="header_logo_link">
            <a href="/home">Home</a>
        </div>
    </div>
  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:25:48.930

我不确定你在问什么，但如果你想在图像翻转时改变图像周围的颜色，请尝试在 a 元素和 display:block 中添加一些填充。

```
<html>
<head>
  <title>Welcome!</title>
  <style type="text/css">
    #header {
        background-color:#2C2C2C;
        height:88px;
        width:100%;
        margin: 0px auto 0 auto;
    }
    #header_logo_link {
        float: left;
        width: 250px;
    }
    #header_logo_link img {
        padding-right: 15px;
        padding-left: 15px;
        padding-top: 15px;
        padding-bottom: 10px;
        background: transparent;
    }
    #header_logo_link :hover {
        background-color: #4d4d4d;
    }
    body, .wrapper {
        min-height: 100%;
        overflow: hidden;

        margin: 0;
        padding: 0;
        min-height: 100%;
    }
    a.img_rollover{
        padding:5px;
        display:block;
    }
    a.img_rollover:hover{
        background-color: #00F; /*This is your new rollover color*/
    }
  </style>
</head>

<body>
  <div class="wrapper">
    <div id="header">
        <div id="header_logo_link" class="img_rollover">
            <a href="/"><img src="logo.png"></a>
        </div>
        <div id="header_logo_link">
            <a href="/home">Home</a>
        </div>
    </div>
  </div>
</body>
</html> 
```

# java - 加载类时未初始化静态变量

> ID：11059189
> 
> 赞同：2
> 
> 时间：2012-06-15T23:02:29.380
> 
> 标签：java, initialization, static-members

我有一个关于初始化的有趣问题。我有以下代码：

```
public class ErrorLookupProvider {  

private static final ErrorLookupProvider INSTANCE = new ErrorLookupProvider();

private  static Map<Long, List<String>> map = new HashMap<Long, List<String>>();

    private ErrorLookupProvider() {
        init();
    }

    private void init() {
        map.put(123L, ImmutableList.of("abc", "def"));
    }

    public static ErrorLookupProvider getInstance() {
        return INSTANCE;
    }
} 
```

现在，当我打电话时`ErrorLookupProvider.getInstance()`，我遇到了 NPE。里面的地图`init()`没有用 new 初始化`HashMap`。

如果我将声明更改`map`为最终的，那么我会看到它已初始化。或者，即使我删除了 static 并将其设为私有类变量，因为`private Map<.....>`它也可以。

我一直无法弄清楚为什么会发生这种情况。有人可以解释这里发生了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T23:22:28.390

切换映射和单例实例初始化的顺序。

静态初始化按照它在源代码中遇到的顺序发生。

请参阅[JLS 12.4.2 详细初始化过程](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.2)，步骤 6（`final`部分）和 9（“订单”部分）。

（单例实现和 ctor 中的静态混杂，单独的问题。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T23:12:12.967

引自[http://javapapers.com/core-java/explain-the-final-keyword-in-java/](http://javapapers.com/core-java/explain-the-final-keyword-in-java/)

> 声明为 final 且未初始化的变量称为空白 final 变量。一个空白的 final 变量会强制构造函数对其进行初始化。

这就是为什么当声明为 final 时它会被初始化

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T23:19:11.960

补充：订单很重要。将静态地图的声明放在 INSTANCE 的声明*之前。*Java 编译器在排序方面有点愚蠢......

由于 map 是静态的，因此它在 的所有实例之间共享`ErrorLookupProvider`。因此，在构造函数中使用它可能是一个错误。如果您创建多个 ErrorLookupProviders，您将多次冗余地添加到地图中。相反，在静态初始化块中初始化它。或者，如果它真的意味着在 的实例之间是独立的`ErrorLookupProvider`，不要让它成为静态的。

# python - Django 客人只投票一次

> ID：11059191
> 
> 赞同：5
> 
> 时间：2012-06-15T23:02:33.880
> 
> 标签：python, django

我是 Django 新手，但正在 Django 网站上编写用于创建投票的教程。

使客人（无需注册/登录）只能在投票中投票一次的最佳方法是什么？

*   IP（不要IP，因为共享网络的人只能投票一次）。
*   Cookie（用户可以删除 cookie，但似乎是最好的方法）。
*   会话（如果用户关闭浏览器，会话将改变）。

我猜 Cookie 将是最好的方法，但对于 Django 有更好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T23:06:21.687

有一种解决方案独立于您使用的服务器框架：

[Evercookie](http://samy.pl/evercookie/)为您提供**几乎不可撤销的 cookie**。如果您想要那种级别的数据持久性，请使用它们。

Evercookie 是一种将数据存储在 cookie 和其他各种地方（例如 Flash“ *cookie* ”、HTML5 的*LocalStorage*等）使用的内存的解决方案。**如果这些地方中的任何一个被清除，下次访问该站点时将再次用数据填充它。**您唯一需要的是存储在 Evercookie 使用的 13 个位置中的任何一个中的数据，下次访问时会将其再次填充到其他 12 个位置。

摆脱此类 cookie 非常困难，因此请考虑您的用户是否真的同意以这种方式进行跟踪。他们中的一些人当然不会同意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T11:37:17.603

如果人们只能投票一次很重要，那么无论如何都要考虑创建一个基本的注册/登录系统。客人总是可以使用多台计算机来扭曲投票，而帐户注册至少可以让您跟踪正在使用哪些电子邮件地址进行投票。以这种方式倾斜投票也需要更多的努力。如果它很重要但不重要，那么我会为匿名客人使用 cookie 方法。

# php - 如何为多个站点重用相同的 Smarty 模板？

> ID：11059195
> 
> 赞同：1
> 
> 时间：2012-06-15T23:02:49.800
> 
> 标签：php, templates, smarty

我正在维护一个在 wiki 网站之间共享的 PHP 代码库。我的意思是有一个`/web/wiki`包含 PHP 脚本的目录，它为多个网站提供服务，例如`wiki-devs.domain.com`,`wiki-public.domain.com`等。它是这样编写的，因为所有 wiki 看起来都一样，并自动修复其中一个中的错误（或添加功能）意味着他们都获得相同的修复/功能。PHP 代码用于`$_SERVER['HTTP_HOST']`更改 wiki 的徽标和选择正确的数据库等，但所有其他代码对于所有 wiki 保持相同。

我正在重写这个 Web 项目以使用 Smarty 模板，但我不太明白如何让 Smarty 避免提供为to`sidebar.template.html`编译的模板（比如说），因为它不知道有多个域访问相同的代码。`wiki-devs.domain.com``wiki-public.domain.com`

我希望你明白我的意思。重申一下：当“wiki-devs”访问该站点时，Smarty 会为“wiki-devs”生成模板，但如果“wiki-public”在一秒钟后访问该站点，则会为他们提供相同的模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:33:12.537

您应该为`Smarty`模板使用一个目录，并为每个站点使用不同的编译目录。这样，您将避免编译问题。

例如，您可以使用类似的东西：

```
 $sitename=$_SERVER['HTTP_HOST'];        
    $smarty->template_dir='themes/themename/';
    $smarty->compile_dir='files/compile/'.$sitename.'/'; 
```

# ruby-on-rails - Heroku 资产管道没有找到 handlebars.runtime.js

> ID：11059199
> 
> 赞同：2
> 
> 时间：2012-06-15T23:03:28.380
> 
> 标签：ruby-on-rails, heroku, asset-pipeline, handlebars.js

在清单文件中，我们有

```
//= require handlebars.runtime 
```

在开发中它工作正常，但在 heroku 上我们得到一个错误。

```
ActionView::Template::Error (couldn't find file 'handlebars.runtime'

  (in /app/app/assets/javascripts/application.js:11)):
    1: = javascript_include_tag 'application'
    2: = javascript_include_tag "#{params[:controller]}/#{params[:action]}" if js_file_exists?("#{params[:controller]}/#{params[:action]}")
    3:     
    4: -#  Append your own using content_for :javascripts
  app/views/layouts/_javascripts.html.haml:1:in `_app_views_layouts__javascripts_html_haml__1848877102237238272_50436400'
  app/views/layouts/landing.html.haml:35:in `block in _app_views_layouts_landing_html_haml__157312279246923607_45507260'
  app/views/layouts/landing.html.haml:3:in `_app_views_layouts_landing_html_haml__157312279246923607_45507260' 
```

我们没有进行预编译，并且在 heroku 上的编译中没有任何错误。关于如何使其正常工作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T22:45:59.350

您需要在您的环境文件（即 development.rb、production.rb）中配置 ember 变体。如果你不配置这个，当 Rails 环境是开发环境时，使用的 Ember 版本默认为开发版本，生产环境也是如此。

来源：[https ://github.com/emberjs/ember-rails](https://github.com/emberjs/ember-rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:33:39.790

看起来 rails 没有添加`.js`到文件名的末尾。尝试添加它。

# colorbox - 如何将 cboxTitle 对齐图像下方但垂直对齐到顶部？

> ID：11059201
> 
> 赞同：0
> 
> 时间：2012-06-15T23:03:49.113
> 
> 标签：colorbox

我使用这个例子作为我工作的基础：

[http://www.katehendrickson.com/colorbox/example2/index.html](http://www.katehendrickson.com/colorbox/example2/index.html)

在下面的链接中，我设法将 cboxTitle 的位置切换到 CSS 中的底部，因为它与顶部的控件冲突，并且当内容强制它为 3 行时看起来不太好。但是，当文本只有 1 或 2 行时，其上方会出现一个间隙。

[http://www.katehendrickson.com/collection/bacci/2.shtml](http://www.katehendrickson.com/collection/bacci/2.shtml)

如何使其垂直对齐但在图像下方显示我想要的尽可能多的行？

非常感谢。

*   保罗迈克罗夫特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T02:47:02.170

最简单的做法是更改以下行：

```
#cboxTitle{position:absolute; bottom:-75px; left:0; color:#000; text-align: left;} 
```

对此：

```
#cboxTitle{position:absolute; top:100%; left:0; color:#000; text-align: left;} 
```

# php - 过滤器在 WP_Query 上劫持了我的 orderby

> ID：11059202
> 
> 赞同：-1
> 
> 时间：2012-06-15T23:03:53.653
> 
> 标签：php, wordpress, sql-order-by

似乎有一个插件或脚本或某些东西在劫持我的 WP_Query，将“order_by”从“title”（我设置的）更改为“post_date”，我找不到它发生的位置。我在我的插件目录中搜索了所有“add_filter”条目、所有“post_date”条目和所有“post_orderby”结果。

有没有办法可以“取消劫持”它或在 WP_Query 运行之前对其进行修改？

这是我的代码和结果查询： http: [//pastebin.com/QRAaphMK](http://pastebin.com/QRAaphMK)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T01:10:47.700

尝试过滤`pre_get_posts`它在查询发送到数据库以获取帖子之前运行。

```
add_filter( 'pre_get_posts', 'hijack_query' );
function hijack_query( $query ) {
// Do something with the query here
return $query;
} 
```

# python - 删除的树项目仍在运行 QStyledItemDelegate

> ID：11059203
> 
> 赞同：1
> 
> 时间：2012-06-15T23:03:56.380
> 
> 标签：python, qt, delegates, pyqt

当我使用此代码从树中删除一个项目时，该项目被删除但委托继续运行：

```
# I do this from inside an item that has a reference to its tree-owner....
index = self.tree.indexFromItem(self)
self.tree.model().removeRow(index.row(), index.parent()) 
```

是否有一些参考我必须弄乱以使其正确放弃该项目的油漆？

如果我清除树并重建它，它工作正常，但我试图更直接地做到这一点。

更多细节.... 我的 GUI 用于 3D 应用程序。树项访问 3D 应用程序 API 中的节点。当 3D 应用程序中的节点被删除（试图将我的树同步到场景）时，我正在删除该项目。我看到的是该项目已成功从树中删除，但由于我对 3D 应用程序节点的引用错误而引发错误。如果我点击，错误会一遍又一遍地重复。我不确定它是否每次都失败，或者第一个错误是否破坏了导致重复错误的 GUI，就好像它中断了清理一样。

我尝试将我的所有项目的成员/属性设置为无，但我不确定这是否真的会杀死一个引用，或者垃圾收集器何时会完成它的工作等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:45:39.587

我想你正在使用你自己的模型。`removeRow()`只是一个调用`removeRows()`. 向我们展示 的代码`removeRows()`，这很可能是问题所在。

您是否正在调用`beginRemoveRows()`并`endRemoveRows()`在您的实施范围内`removeRows()`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:25:14.003

我必须假设这只是一个异步更新，其中删除行调用击败了更新委托。我添加了保护以消除错误，一切似乎都正常。

# jquery - 为什么 ajax 标签会发送两次请求？

> ID：11059205
> 
> 赞同：1
> 
> 时间：2012-06-15T23:04:33.557
> 
> 标签：jquery, struts2

我有许多用于在我的系统中创建实体的表单。在我使用 jquery 将它们变成对话框之前，它们都工作正常。现在他们两次调用各自的动作。

这是 jsp 形式之一的示例：

```
<div class="dialog" id="crear_proyecto_dialog" title="Crear proyecto">
    <s:form action='crear_proyecto'>
        ...
        <sx:submit id="crear_proyecto_submit" targets="ventana_mensaje_proyecto" value="Create ..."/>
    </s:form>
</div> 
```

如果将此表单放置在 index.jsp 中而无需进行任何更改，则它可以正常工作。但后来我将此添加到页面的 javascript 中：

```
$(document).ready(function() {
    $(".dialog").dialog({
            autoOpen:false,
            modal:true,
            draggable:true,
            closeText:"x"
    });
...
} 
```

把它变成一个对话框，现在'crear_proyecto'动作在表单提交后被调用两次。有谁知道我该如何解决这个问题？

# python - Python 正则表达式，避免跳过括号

> ID：11059207
> 
> 赞同：0
> 
> 时间：2012-06-15T23:04:36.957
> 
> 标签：python, regex, brackets

我想用'*'替换正则表达式，但前提是正则表达式在<>之外。重点是不要干扰 html 标签。

我用它来替换：

```
re.sub(r'SOMEREGEX(?=[^>]*(<|$))', '*', line) 
```

但是我遇到了他的问题：如果我的正则表达式是：

```
f.*k 
```

然后这个：

```
fzzzzzzzzz<HTMLTAG>zzzzzzzk 
```

会变成一个'*'，这是我不想要的。我该如何克服这个问题？

约束：

-所有括号都匹配

- 没有嵌套括号

-SOMEREGEX 由用户提供。我宁愿不改变这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T23:08:36.007

您可以尝试用`.`字符类替换字符 - “任何字符” -`[^<>]`匹配**除**尖括号之外的任何字符，`<>`. 这将给出正则表达式`f[^<>]*k`。这将匹配`facebook`但不匹配`face<b>book`。

但是，仍然有一些事情可能会出错。您是否考虑过使用适当的 HTML 解析器而不是正则表达式？BeautifulSoup 简单、美味且有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T23:37:25.340

在结束和开始尖括号之间搜索：

```
re.sub(r'(^|>)f[^<]*k(<|$)', r'\1*\2', line) 
```

`\1`需要和`\2`来替换模式可能已从 中删除的尖括号`line`。

# node.js - 错误代码：800A1391 来源：Microsoft JScript 运行时错误 Running Grunt - Module is undefined

> ID：11059211
> 
> 赞同：20
> 
> 时间：2012-06-15T23:05:00.047
> 
> 标签：node.js

新的 Grunt 用户，今天使用了很多新工具（npm nodejs）。

我已经“安装”了 Grunt，并且能够使用这里描述的 init 任务创建一个 grunt.js 文件：http: [//net.tutsplus.com/tutorials/javascript-ajax/meeting-grunt-the-build -tool-for-javascript/](http://net.tutsplus.com/tutorials/javascript-ajax/meeting-grunt-the-build-tool-for-javascript/)和这里：[https](https://github.com/cowboy/grunt/blob/master/docs/getting_started.md) ://github.com/cowboy/grunt/blob/master/docs/getting_started.md 。但是每当我运行“grunt”命令时，我都会收到一个错误：

```
Windows 脚本宿主
脚本：c:\users\[]\Documents\code\grunt\grunt.js
线路：2
字符：1
错误：“模块”未定义
代码：800A1391
来源：Microsoft JScript 运行时错误

```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-24T10:15:48.883

如[常见问题解答](https://github.com/cowboy/grunt/blob/master/docs/faq.md)中所述，您需要`grunt.cmd`在 Windows 上键入，因为操作系统会尝试启动 grunt.js

或者你可以全局安装 grunt-cli。如果该软件包已本地安装到您的项目中，它将运行任何版本的 Grunt。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-29T11:35:11.723

**解决了**！

因此，出现此问题是因为 windows 默认将 < ***.js** > 文件与 >> "Microsoft Windows Based Script Host" 关联。

grunt 需要默认使用 (grunt.cmd) 打开。

通过更改默认应用程序（打开方式）很容易解决

* * *

**指南**：

1.  转到任何带有“js”扩展名的 javascript 文件。（任何文件）

2.  右键单击（鼠标）>属性>“打开方式：”更改...（按钮）

3.  选择记事本（或任何 javascript IDE）。

**问题解决了**！：） 祝你好运

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-16T06:42:19.263

如果您收到“Microsoft JScript 运行时错误”，这意味着 node.js 甚至没有被调用；相反，Windows Script Host 正在尝试运行您的代码。这可能是文件类型关联的问题；IIRC Windows 默认尝试使用 WSH 执行“.js”文件。您最终可能不得不创建脚本的快捷方式，指定命令行（可能类似于“node %1”）和起始目录，以确保其正确执行。

如果您能准确地告诉我们您是如何尝试调用您的代码的，那将会很有帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-24T13:59:08.367

似乎在最新版本的 grunt 模块中，您必须执行以下操作才能使其在 Windows 下工作：

删除任何全局安装的 grunt

```
npm uninstall -g grunt 
```

全局安装 grunt-cli

```
npm install -g grunt-cli 
```

将 grunt 本地安装到您的项目中

```
npm install grunt 
```

全局安装 grunt (v0.4.x) 似乎不再创建必要的 grunt.cmd。似乎现在的建议是在本地安装 grunt 以便能够使用特定于版本的 Gruntfiles

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-06T02:08:41.377

正如 Florian F 所建议的，运行 grunt.cmd 可以。这是因为 Windows 正在寻找您的`grunt`命令的过程。

键入`grunt -h`Windows 时将继续查找以下文件：

1.  ./grunt.cmd
2.  ./grunt.* （在这种情况下会找到 grunt.js，这就是您看到“模块未定义”的原因）
3.  %APPDATA%/npm/grunt.cmd

使用“grunt.cmd”的另一种方法是使用[grunter](https://github.com/johngeorgewright/grunter)，它只是将命令重命名为 grunter……然后你就不再有这个问题了。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-15T05:24:29.843

要回答这个问题，首先我们需要了解错误是由**Windows Script Host**执行的。

现在，使用以下语法从***cmd 提示符运行代码：***

```
>node <application_name>.js 
```

这将允许 Node.js 应用程序通过**V8 JavaScript 引擎**（Google 的）打开。

*PS：如果这有助于解决您的问题，请回复，否则在**尝试**此操作后发布您面临的问题。*

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-13T14:14:39.393

我有一个类似的问题，问题是文件关联，我建议：

*   右键单击 .js 文件并选择打开方式。
*   然后你选择 nodejs/node.exe （在“程序文件”文件夹中的某处
*   然后在显示“始终打开 .js 文件”的位置打勾（释义）

这应该够了吧。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-06-19T07:56:42.090

我在运行旧的 Node 项目时遇到了同样的问题。

问题在于 js 文件的名称，它是`node.js`. 因此，在运行命令`node node.js`时，它打开了一个 Windows 对话框。

我只是将文件名更改为`app.js`，错误就消失了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-28T18:11:13.080

所以，就我而言，我已经尝试了上面提到的所有方法，但没有结果。但我有资金，我不输入：完整句子中的节点作为以下片段 `node script.js`。记住永远不要低估你自己的错误编码。

# ruby-on-rails-3 - Rails 3 提高 Active Record 查询性能

> ID：11059213
> 
> 赞同：1
> 
> 时间：2012-06-15T23:05:05.353
> 
> 标签：ruby-on-rails-3, performance

您好我有以下查询：

```
Player.select("Players.*, (SELECT COUNT(*) FROM Results WHERE Results.player_id = Players.id and win = true and competition_id = 4) as wins").where("competition_id = 4").order("wins desc") 
```

本质上，它是根据结果表中的外键出现来计算和排序玩家记录，其中对于特定比赛，胜利设置为真。为了让您更好地了解结果表中的一些示例数据可能是...

```
Player_ID | Match_ID|Win|Elapsed_Time|etc..
1         |    1    |T  | 1:00       |etc..
2         |    1    |F  | 1:00       |etc..
1         |    2    |T  | 3:00       |etc..
3         |    2    |F  | 3:00       |etc.. 
```

如您所见，此语句中发生了两个选择，我认为这可能会在未来导致性能下降。玩家实际上与结果有一对多的关系，你可以猜到，但我无法弄清楚如何使用我认为可能更有效的连接来完成这项工作。

也许我错了，上述查询没有任何问题 - 无论哪种情况，请提供一些建议。

我正在使用 PostgreSQL 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:35:09.023

也许是这样的？

```
Player.joins(:results).where("results.win = true AND results.competition_id = 4").order("results.count DESC") 
```

# django - photologue 画廊更改的 Django 管理操作

> ID：11059216
> 
> 赞同：0
> 
> 时间：2012-06-15T23:05:26.863
> 
> 标签：django, photologue

我设置了一个 photologue 站点，我真的想添加一个管理员操作，以便在查看 Django 管理员中的照片列表时，我可以选择一些并标记它们各自的复选框，并通过管理员操作将它们更改为其他一些画廊. 如何实现这样的事情？我已经创建了一个管理类，而无需编写 photologue 包并添加操作。但不知道如何发送“画廊”参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T23:30:54.730

实际上，我认为在本教程中进行了更多谷歌搜索后，我得到了答案（有点旧，但似乎有效）[链接](http://www.jpichon.net/blog/2010/08/django-admin-actions-and-intermediate-pages/)

# .net - 检查特定文件当前是否打开

> ID：11059218
> 
> 赞同：1
> 
> 时间：2012-06-15T23:06:03.293
> 
> 标签：.net, vb.net, vb.net-2010

我想知道是否可以检查文件“test.txt”是否打开？如果是这样，则显示该文件正在使用的消息？我最大的问题是文件可以在记事本、word、excel等中打开。我有一些基本的编码，可以检查文件是否打开——我要做的是检查文件当前是否打开，如果没有在使用中然后继续编码，到目前为止我有以下编码。

```
Dim Process() As Process = System.Diagnostics.Process.GetProcessesByName("notepad")
Dim Process2() As Process = System.Diagnostics.Process.GetProcessesByName("word")

For Each p As Process In Process
    If p.MainWindowTitle.Contains("test") Then
        MessageBox.Show("file open")
    Else
        'Run my code
    End If
Next

For Each p2 As Process In Process2
    If p2.MainWindowTitle.Contains("test") Then
        MessageBox.Show("file open")
    Else
        'Run my code
    End If
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T02:06:26.763

为什么不尝试对文件执行操作（例如按照**@ChrisW**的建议打开）并检查它是否被锁定：

例如

```
Catch ex As Exception
If TypeOf ex Is IOException AndAlso IsFileLocked(ex) Then
' do something? 
End If
End Try

Private Shared Function IsFileLocked(exception As Exception) As Boolean
    Dim errorCode As Integer = Marshal.GetHRForException(exception) And ((1 << 16) - 1)
    Return errorCode = 32 OrElse errorCode = 33
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T23:26:12.027

许多应用程序在加载文件时会创建文件的临时副本。所以很难检查这个。您可以创建一个调试器来查看二进制文件加载了哪个文件，这可能是矫枉过正。

或者使用这样的东西：

```
try
{
  stream = file.Open(FileMode.Open, FileAccess.ReadWrite, FileShare.None)
}
catch (IOException)
{
  // the file is locked and not available to read or write.
  return true
}
finally
{
 // close the stream
} 
```

# serialization - Coldfusion：通过url将结构作为字符串传递

> ID：11059219
> 
> 赞同：5
> 
> 时间：2012-06-15T23:06:08.533
> 
> 标签：serialization, struct, coldfusion

有没有一种简单的方法可以将单级结构序列化为字符串以在 url 中使用？

例如：

```
?key1=val1&key2=val2 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-15T23:44:38.530

```
<cfscript>
// create simple struct
x = { a=1, b=2, c=3 };
WriteDump(x);

// serialize in JSON format and encode for URL transport
y = URLEncodedFormat( SerializeJSON(x));
WriteOutput( 'url: <a href="#SCRIPT_NAME#?z=#y#">#SCRIPT_NAME#?#y#</a>');

// now receive the URL variable and dump it
if ( StructKeyExists( url, 'z' )) {
    writeOutput( '<h3>URL Data:</h3>' );
    writeDump( DeserializeJSON( URLDecode( z)));
}
</cfscript> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-15T23:36:14.113

这看起来怎么样？

```
<cfset tmpStruct = {"firstItem" = "one", "secondItem" = "two"} />

<cfset myUrl = "http://domain.com/file.cfm?" />

<cfloop list="#structKeyList(tmpStruct)#" index="i" >
    <cfset myUrl = myUrl & i & "=" & tmpStruct[i] & "&" />
</cfloop>

<cfset myUrl = left(myUrl,len(myUrl)-1) />

<cfdump var="#myUrl#" /> 
```

# glsl - 乘法采样器查找 glsl

> ID：11059226
> 
> 赞同：1
> 
> 时间：2012-06-15T23:06:37.753
> 
> 标签：glsl

我将一个 1D 数组作为 sampler1D 和一个 2D 数组（基本上是一个矩阵）作为 sampler2D 传递给我的顶点着色器。一切正常 - 我检查了值，每个值都在它应该在的位置。但是 - 我似乎无法将这些采样器的两个值相乘。

```
 float pos=0.0;
    vec4 f = texture1D(xk,ki);
    vec4 H = texture2D(er,vec2(0,i));

    pos=f[0]*H[0];
    colorcheck=pos; 
```

我将 colorcheck 传递给我的片段着色器，但它不会渲染我的对象，而是一切都是黑色的（通过 colorcheck=1.0 可以正常工作）。我在查找后检查了两个向量——它们在所有字段中都有有效值。

我已经尝试过 fx*Hx，以及我能想到的所有组合.. 我什至尝试在片段着色器中进行乘法 - 也不起作用..

编辑简化的顶点着色器（当我通过 colorcheck=1.0/fx/Hx 时也不起作用/起作用。任何东西）

```
 uniform sampler1D xk;
    uniform sampler2D eigenraum;
    varying float colorcheck;
    void main(){
       vec4 f = texture1D(xk,0);
       vec4 H = texture2D(eigenraum,vec2(0,0));
       colorcheck=f[0]*H[0];
       gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
   } 
```

和片段着色器：

```
varying float colorcheck;
void main()
{
    gl_FragColor=vec4(colorcheck,1,1,1.0);
} 
```

谢谢你的帮助！

EDIT2 - 结果我也不能减去/添加它们..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:37:46.807

我找到了解决方案 - 它不在着色器代码中。将数组绑定到纹理时，我忘记了 glActiveTexture 调用！

# shell - 使用 Sed 从文件中删除价格

> ID：11059227
> 
> 赞同：0
> 
> 时间：2012-06-15T23:06:39.640
> 
> 标签：shell

你能帮我写一个 sed 命令从文件中删除价格吗？

输入：

```
1 台打印机
2 网络交换机
1 82 磅 A4 纸边
20 美元

```

输出：

```
1 台打印机
2 网络交换机
1 82 磅 A4 纸边

```

20 美元从输出中消除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T23:10:12.903

假设您的数据在 /tmp/foo 中：

```
sed '/^\$/d' /tmp/foo 
```

使用模式匹配查找以美元符号开头的行，然后从模式空间中删除这些行并开始下一个循环。

# python - 如何将套接字绑定到一个可用端口？

> ID：11059228
> 
> 赞同：4
> 
> 时间：2012-06-15T23:06:40.407
> 
> 标签：python, sockets, bind

在作为客户端连接之前，我需要将我的套接字绑定到特定的本地 IP。

```
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind(("192.168.1.2", 33333))
s.connect(("google.com", 80))
s.send("test") 
```

我知道如何绑定到特定的本地 IP 地址，但我不知道要指定哪个端口。我不能使用随机端口，因为它可能已经在使用中。有没有办法绑定到任何可用的端口？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T23:10:44.600

是的，您应该使用 0 作为端口。然后操作系统会为你选择端口，就像你没有调用`bind`.

# python - Grooveshark 提前关闭连接 (httplib.BadStatusLine)

> ID：11059229
> 
> 赞同：1
> 
> 时间：2012-06-15T23:06:52.200
> 
> 标签：python, httplib2, grooveshark

我正在尝试连接到grooveshark。因为这个 python 是我选择的语言。但我撞到了一堵砖墙。看起来grooveshark最近改变了他们协议的一部分，或者我可能遇到了python的限制。

我正在与来自 github 的 JackTheRipper51 “一起”工作，他为grooveshark 制作了这个库：[https](https://github.com/jacktheripper51/groove-dl) ://github.com/jacktheripper51/groove-dl 它实际上不是一个库，但我很快重新编码为一个库。

本周早些时候它运行良好，我可以将它用于我的项目。但是 2 天前它开始在 getToken 函数上失败，httplib 开始返回`httplib.BadStatusLine: ''`，从我的研究来看，这意味着服务器提前关闭了连接。

从这项研究中，我开始查看grooveshark 的javascript 和flash 源代码，但这并没有返回任何有价值的东西。所以我做了任何理智的人花了 5 个小时查看反编译的动作脚本而之前从未在其中编写过一行代码，并将其归咎于 Groovesharks 服务器。

具体来说，我认为grooveshark可能会拒绝具有`Connection: close`标题的连接。因此，我决定在`REST Console`Chrome 的扩展程序中对其进行测试。

我让python脚本转储了它正在编码的json，然后我将它粘贴到Rest Console，点击POST，它返回了预期的数据。我现在确定我是对的并非不可能。

我的下一步是在`Connection: keep-alive`我拥有的 httplib2（因为它支持）中编码，但问题仍然存在。

我已经在wireshark中进行了测试（删除了https中的SSL，它确实发送了`Connection: keep-alive`，这会导致grooveshark响应，但是使用`https required`）

我只修改了一小部分代码。

完全改变了 getToken()

```
def getToken():
    global staticHeader, _token
    post = {}
    post["parameters"] = {}
    post["parameters"]["secretKey"] = hashlib.md5(staticHeader["session"]).hexdigest()
    post["method"] = "getCommunicationToken"
    post["header"] = staticHeader
    post["header"]["client"] = "htmlshark"
    post["header"]["clientRevision"] = "20120312"
    header = {"User-Agent": _useragent, "Referer": _referer, "Content-Type":"application/json", "Cookie":"PHPSESSID=" + staticHeader["session"], "Connection":"keep-alive"}
    response, content = http.request("https://grooveshark.com/more.php?getCommunicationToken", "POST" ,body = json.JSONEncoder().encode(post), headers = header)
    print response
    #_token = json.JSONDecoder().decode(gzip.GzipFile(fileobj=(StringIO.StringIO(conn.getresponse().read()))).read())["result"]
    #print _token 
```

我添加了 httplib2 初始化的内容：

```
http = httplib2.Http() 
```

我导入了httplib2：

```
import httplib, httplib2 
```

我还重命名了 json 构造函数，只是因为我想要更具描述性。

完整的追溯是：

```
Traceback (most recent call last):
  File "C:\Users\Delusional Logic\Documents\GitHub\groove-dl\python\groove.py", line 141, in <module>
    getToken()
  File "C:\Users\Delusional Logic\Documents\GitHub\groove-dl\python\groove.py", line 51, in getToken
    response, content = http.request("https://grooveshark.com/more.php?getCommunicationToken", "POST" ,body = json.JSONEncoder().encode(post), headers = header)
  File "C:\Python27\lib\site-packages\httplib2-0.7.4-py2.7.egg\httplib2\__init__.py", line 1544, in request
    (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
  File "C:\Python27\lib\site-packages\httplib2-0.7.4-py2.7.egg\httplib2\__init__.py", line 1294, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
  File "C:\Python27\lib\site-packages\httplib2-0.7.4-py2.7.egg\httplib2\__init__.py", line 1264, in _conn_request
    response = conn.getresponse()
  File "C:\Python27\lib\httplib.py", line 1027, in getresponse
    response.begin()
  File "C:\Python27\lib\httplib.py", line 407, in begin
    version, status, reason = self._read_status()
  File "C:\Python27\lib\httplib.py", line 371, in _read_status
    raise BadStatusLine(line)
httplib.BadStatusLine: '' 
```

是什么导致了 BadStatusLine，我该如何解决它。

PS 我知道他们在这件事爆发的前一天有一个 8 小时的会议，我敢打赌这已经在议程上。

更新：JackTheRipper51 通知我，无论您发送什么内容，所有对grooveshark.com/more.php 的ssl 请求都会发生这种情况。这让我相信这是蟒蛇在捉弄我们。

更新 2：

JackTheRipper51 刚刚告诉我它确实是 python。这是他的帖子：

> 我根本不需要C。准备被激怒。一个简单的

```
curl -H "Content-Type: text/plain" -d "@jsontest" "https://grooveshark.com/more.php?getCommunicationToken" -v on a linux 
```

> 盒子给了我一个令牌... jsontest 在这里

```
{"header":{"client":"mobileshark","clientRevision":"20120227","privacy":0,"country":{"ID":63,"CC1":4611686018427388000,"CC2":0,"CC3":0,"CC4":0,"DMA":0,"IPR":0},"uuid":"BF5D03EE-91BB-40C9-BE7B-11FD43CAF0F0","session":"1d9989644c5eba85958d675b421fb0ac"},"method":"getCommunicationToken","parameters":{"secretKey":"230147db390cf31fc3b8008e85f8a7f1"}} 
```

> 即使 json 在语法上不正确，它也总是至少返回一些标头！一直都是 Python ......

剩下的唯一问题是python为什么要这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T10:34:53.367

问题已“解决”，或已找到原因。

JackTheRipper 将错误提交给 python，他们确认确实是 ssl 的问题，更具体地说是 openssl 0.9.8，导致连接超时。

错误报告： [http ://bugs.python.org/issue15082](http://bugs.python.org/issue15082)

# eclipse - 在 Eclipse 中，我可以为我的项目选择 Scala 的版本吗？

> ID：11059230
> 
> 赞同：4
> 
> 时间：2012-06-15T23:06:59.437
> 
> 标签：eclipse, scala, scala-ide

目前我正在使用 Scala IDE，它用于我的项目的 Scala 版本是 2.9.2。我最好选择 2.8.1，但不确定如何选择 Scala 库的版本。

有什么办法可以更改版本吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T00:00:20.297

[http://scala-ide.org/docs/user/gettingstarted.html](http://scala-ide.org/docs/user/gettingstarted.html)

“下载区域中提供了不同更新站点的 URL 列表。发布的位于当前部分。Scala IDE 链接到特定版本的 Scala，因此您必须决定要使用哪一个：

*   release-29 为使用 Scala 2.9.x（2.9.0-1 或 2.9.1）的项目提供支持。这是当前版本的 Scala。如果您不确定，请选择这个。

*   release-28 为使用 Scala 2.8.x（2.8.1 或 2.8.2）的项目提供支持。”

因此，您必须安装 release-28 Scala IDE 才能使用版本 2.8.1 编译您的 Scala 项目。

发布站点可以在这里找到： [http ://scala-ide.org/download/current.html](http://scala-ide.org/download/current.html)

# linux - 在Linux上以最大（或接近）刷新率（例如60 hz）以编程方式在屏幕上绘制像素？

> ID：11059232
> 
> 赞同：-1
> 
> 时间：2012-06-15T23:07:10.657
> 
> 标签：linux, graphics

我正在研究以高速率渲染帧（理想情况下接近最大监视器速率），我想知道是否有人知道我应该从哪个级别开始研究：内核/驱动程序级别（操作系统空间）？X11级？svgalib（用户空间）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:11:38.623

在现代计算机上，您可以使用用于图形的普通工具和 API 来完成。如果您有充满随机像素的完整帧，则来自内存缓冲区的简单[位 blit](http://en.wikipedia.org/wiki/Bit_blit)将足以胜任。在没有任何优化工作的情况下，我发现使用 2008 电脑在 Windows XP 上每秒可以生成超过 500 帧。

# ssh - 如何从 shell 脚本中获取家庭网络的 IP 地址？

> ID：11059238
> 
> 赞同：0
> 
> 时间：2012-06-15T23:07:59.463
> 
> 标签：ssh, ip, ip-address

我在学校的服务器上有一个帐户，还有一台我有时需要使用的家用电脑。我已经交换了密钥，现在只有一个问题。虽然我的学校帐户有一个与之关联的名称“account_name@school”，但我的家庭网络没有。我的计划是有一个脚本，每小时检索我的家庭网络的 IP 地址，ssh'es 到我的学校帐户并更新我的 ssh 配置文件存储我的家庭网络的 IP 地址。

如何从 shell 脚本中检索家用计算机的 IP 地址？

PS这是一个明智的计划吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T23:17:26.917

您有两个基本选择：

1.  动态 DNS 地址（例如 dyndns.org）。设置它超出了 Stack Overflow 的范围，但它可能是适合您的 The Right Thing™。

2.  使用[http://checkip.dyndns.org/](http://checkip.dyndns.org/)之类的工具报告您的外部 IP 地址，然后解析结果。

    ```
    lynx -dump http://checkip.dyndns.org/ | awk '{print $NF}' 
    ```

无论哪种方式，您都需要将路由器配置为允许 SSH 的入站访问，因此需要在[Super User](https://superuser.com/)或[Unix & Linux](https://unix.stackexchange.com/)上询问更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T05:49:26.613

我的[http://ipcalf.com](http://ipcalf.com)服务器支持基于标头或显式内容协商，这是一种奇特的说法，即如果您`curl -H Accept:text/plain ipcalf.com`或`curl -s http://ipcalf.com/?format=text`您应该以原始形式获取您的公共 IP 地址。

（“完整”文档和源代码[在 github 上](https://github.com/natevw/ipcalf)。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T23:20:22.490

您可以向[http://automation.whatismyip.com/n09230945.asp发出请求，以从](http://automation.whatismyip.com/n09230945.asp)[WIMI](http://www.whatismyip.com/)获取您的公共 IP 。这个命令：

```
ssh account_name@school "echo -n "$(wget http://automation.whatismyip.com/n09230945.asp -O -)" > some_remote_file" 
```

会将您的家庭公共 IP 写入您在学校的主文件夹中名为“some_remote_file”的文件。使用 cron 设置它，您将可以从学校访问您家的路由器公共 IP。

如果您已经在路由器上设置了某种端口转发，以便您可以使用路由器 IP ssh 到您的家用计算机，那么您应该很高兴:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T23:50:58.490

我想出了一个更好的方法来获取 IP 地址，然后使用外部服务。我正在通过 SSH 连接到服务器；因此，服务器必须知道谁在通过 SSH 连接，所以我可以使用 who 或 pinky 之类的工具来找出谁在通过 SSH 连接。

这是获取登录计算机名称的命令。

```
echo $SSH_CLIENT | awk '{ print $1 }' 
```

# javascript - HTML5 动画和缓动

> ID：11059239
> 
> 赞同：2
> 
> 时间：2012-06-15T23:08:06.233
> 
> 标签：javascript, html

以下代码是我第一次尝试使用 html5 制作任何真实动画。假设它在移动，但它让我想要更多，比如缓动、反弹或任何其他漂亮的动画方程。是否有任何库可以帮助制作这些漂亮的动画？可以以某种方式使用jquery吗？

我的代码感觉有点太陈旧了，或者这就是 html5 现在的状态：

```
function animateImage(){
    var canvas = document.getElementById('c'), context = canvas.getContext('2d');
    var img = new Image();
    var xpos = 0;
    img.onload = function(){

        if (!img) return;

        var timer = setInterval(function(){
                    context.clearRect(0,0,canvas.width,canvas.height);
                    context.drawImage(img,xpos,0);

                    xpos = xpos + 20;

            }, 1000/200);

    }

    img.src = 'Cupcake_01.png';
} 
```

我还应该补充一点，这是非常紧张的；一点都不光滑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T11:20:54.300

如果你想避免动画库的开销（我尽量避免在任何可能的地方加载库）你应该看看罗伯特彭纳的缓动方程。这些是缓动的“标准”，已经存在了大约 10 年，大多数 js 动画库要么固有地使用它们，要么定期扩展以包含它们，这里有一些参考：

原始的，在动作脚本中： [http ://robertpenner.com/easing/easing_demo.html](http://robertpenner.com/easing/easing_demo.html)

javascript的一些参考：http: [//upshots.org/actionscript/jsas-understanding-easing](http://upshots.org/actionscript/jsas-understanding-easing)

[http://jstween.blogspot.co.uk/](http://jstween.blogspot.co.uk/)

# android - 从后台返回后无法开始活动

> ID：11059247
> 
> 赞同：0
> 
> 时间：2012-06-15T23:09:36.880
> 
> 标签：android, fragment, layout-inflater

我的应用程序在最初运行时可以工作，但是如果它在后台停留一段时间然后由用户重新启动，我会收到 RuntimeException“无法启动活动 ComponentInfo...错误膨胀类片段”。

该活动包含一个包含 ListView 的片段。ListView 有一个自定义适配器，其中包含一个 ImageView 和两个 TextView。

在应用程序处于后台并使用许多其他应用程序后返回活动时，会引发错误，这使我相信这是内存问题，因为仅在我的设备上的模拟器不会发生这种情况。

如何使我的应用程序避免此异常？

这是我在后台很长时间后恢复应用程序后的 LogCat：

```
06-15 18:48:41.886: E/AndroidRuntime(10033): FATAL EXCEPTION: main
06-15 18:48:41.886: E/AndroidRuntime(10033): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.scl.tntmg/com.scl.tntmg.NowShowingActivity}: android.view.InflateException: Binary XML file line #9: Error inflating class fragment
06-15 18:48:41.886: E/AndroidRuntime(10033):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at android.os.Looper.loop(Looper.java:137)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at android.app.ActivityThread.main(ActivityThread.java:4424)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at java.lang.reflect.Method.invokeNative(Native Method)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at java.lang.reflect.Method.invoke(Method.java:511)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at dalvik.system.NativeStart.main(Native Method)
06-15 18:48:41.886: E/AndroidRuntime(10033): Caused by: android.view.InflateException: Binary XML file line #9: Error inflating class fragment
06-15 18:48:41.886: E/AndroidRuntime(10033):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at android.app.Activity.setContentView(Activity.java:1835)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at com.scl.tntmg.NowShowingActivity.onCreate(NowShowingActivity.java:16)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at android.app.Activity.performCreate(Activity.java:4465)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-15 18:48:41.886: E/AndroidRuntime(10033):    ... 11 more
06-15 18:48:41.886: E/AndroidRuntime(10033): Caused by: android.os.NetworkOnMainThreadException
06-15 18:48:41.886: E/AndroidRuntime(10033):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at java.net.InetAddress.getAllByName(InetAddress.java:220)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at com.scl.tntmg.util.MovieGuideUtil.getData(MovieGuideUtil.java:118)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at com.scl.tntmg.util.MovieGuideUtil.refreshMovies(MovieGuideUtil.java:183)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at com.scl.tntmg.util.MovieGuideUtil.getMovies(MovieGuideUtil.java:82)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at com.scl.tntmg.ListFrag.onCreateView(ListFrag.java:49)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:845)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1058)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:289)
06-15 18:48:41.886: E/AndroidRuntime(10033):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
06-15 18:48:41.886: E/AndroidRuntime(10033):    ... 21 more 
```

这是活动：

```
public class NowShowingActivity extends FragmentActivity{

public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.nowshowing);

    removeNotifications();
}

public void onRestart(){
    super.onRestart();
}

public void onStop(){
    super.onStop();
}

public void onDestroy(){
    super.onDestroy();
}

public void onResume(){
    super.onResume();
    removeNotifications();
}

private void removeNotifications(){
    String ns = Context.NOTIFICATION_SERVICE;
    NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
    mNotificationManager.cancel(1);
}

public boolean onCreateOptionsMenu(Menu menu){
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.mgoptions,menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item){
    Intent myIntent;
    switch(item.getItemId()){
        case R.id.theater_details:
            myIntent = new Intent(this, TheaterActivity.class);
            this.startActivity(myIntent);
            return true;
        case R.id.refresh:
            myIntent = new Intent(this, HomeActivity.class);
            this.startActivity(myIntent);
            return true;
        case R.id.about:
            myIntent = new Intent(this, AboutActivity.class);
            this.startActivity(myIntent);
            return true;
        case R.id.settings:
            myIntent = new Intent(this, SettingActivity.class);
            this.startActivity(myIntent);
            return true;
        default:
            return super.onOptionsItemSelected(item);   
    }
} 
```

这是现在显示的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<fragment class="com.scl.tntmg.ListFrag"
        android:id="@+id/list"
        android:layout_weight="1"
        android:layout_width="0dp" android:layout_height="fill_parent" >
    <!-- Preview: layout=@layout/list -->
</fragment>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T00:07:12.063

你的堆栈跟踪说

```
Caused by: android.os.NetworkOnMainThreadException 
```

这意味着也许第一次，您在正确的线程中访问网络，但在第二次恢复后，网络是从 UI 线程访问的，如下所示：

```
at com.scl.tntmg.util.MovieGuideUtil.getData(MovieGuideUtil.java:118) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T23:22:29.353

正如您所说，这将是一个内存问题，当您的应用程序失去焦点时，android 可能会或可能不会（取决于资源的可用性）释放您的应用程序使用的内存。因此，您应该将活动的状态保存在 onPause() 函数中，然后可以在 onResume() 函数中恢复它。

# asp.net-mvc-2 - asp.net mvc3, apit witter

> ID：11059248
> 
> 赞同：0
> 
> 时间：2012-06-15T23:09:52.870
> 
> 标签：asp.net-mvc-2, linq-to-twitter

我在同一台机器上有两个 asp.net mvc3 项目

我使用了相同的参考 LinqToTwitter

在一个项目中允许我写：auth.CompleteAuthorization (Request.Url);

但另一个向我显示 auth.CompleteAuthorization (Request* *.Url* *) 中的错误；

请求不知道 URL

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:30:22.597

很可能是因为您`simple class`没有`Request`可以使用和获取 Url 的对象（或者该`Request`对象不包含方法`Url`

`System.Web.HttpContext.Current.Request`也会给你你正在寻找的东西。您可能还想通过参数传递 url，但如果没有更多详细信息，很难提供更多信息。

# android - 使用字符串作为照片 Uri？

> ID：11059250
> 
> 赞同：0
> 
> 时间：2012-06-15T23:10:13.650
> 
> 标签：android, string, file, uri, android-file

我需要为使用我的应用程序拍摄的每张照片创建一个新的文件名/U​​ri。他们拍摄的第一张照片将是“/sdcard/mirror1.jpg”，然后拍摄的下一张照片将是“mirror2.jpg”，依此类推。到目前为止，这是我的代码：

```
 capture.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            int count = 1;
            count++;

            String fileName = new String("/sdcard/mirror" + count + ".jpg");

            File thing = new File(fileName);
            Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
            intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);
            intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(thing));
            startActivityForResult(intent, CAMERA_PIC_REQUEST);
            text.setVisibility(View.GONE);
        }
    }); 
```

这行得通吗？我可以添加您需要的任何额外代码/详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T23:19:24.723

我建议将“count” int 移到 onClickListener 之外，否则它将始终包含值“2”，因为它将在每次点击时一次又一次地实例化。

您还需要在应用程序关闭时记录该号码的最后使用情况，否则您将面临覆盖图像的风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T00:01:13.860

您的代码中的问题是每次单击时计数将始终重置为 1（因为您在 onClickListener 中声明并实例化它）。

即使你解决了这个问题，当你关闭你的应用程序或活动时，你也会失去进度。

因此，您应该将 count 的值存储在某处。

最好的方法是使用共享首选项。

所以你的代码应该是这样的

```
capture.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        //read count from Shared Preferences
        SharedPreferences settings = getSharedPreferences("YourPrefName", 0);
        int count = settings.getInt("imageCount", 1);

        String fileName = new String("/sdcard/mirror" + count + ".jpg");

        File thing = new File(fileName);
        Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
        intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(thing));
        startActivityForResult(intent, CAMERA_PIC_REQUEST);
        text.setVisibility(View.GONE);
    }
}); 
```

我们不是在这里增加计数，而是检查照片是否成功拍摄。我们在 onActivityResult 中这样做。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == CAMERA_PIC_REQUEST && resultCode == RESULT_OK) {
        SharedPreferences settings = getSharedPreferences("YourPrefName", 0);
        int count = settings.getInt("imageCount", 1);
        ++count;
        SharedPreferences.Editor editor = settings.edit();
        editor.putInt("imageCount", count);
        editor.commit();
    }
} 
```

# android - Android 布局的图形视图未在 Eclipse 中显示

> ID：11059251
> 
> 赞同：0
> 
> 时间：2012-06-15T23:10:20.997
> 
> 标签：android, eclipse, android-layout

我无法在 Android 中看到图形布局视图：我最近将我的 android 项目导入了一个新的工作区，现在我无法像以前一样看到图形布局？我看到的是一个空托盘、一些编辑配置选项和空下拉菜单。#$$&^#($ 发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T23:13:27.813

这是最新版本的 ADT 的一个已知问题。您可以尝试在布局视图的右上角选择不同的 SDK 版本。托盘应该出现。如果您的布局仍未显示，请尝试将托盘中的随机组件拖动到布局中。

# php - 动态下拉菜单不显示其余的 html 代码，这是怎么回事？

> ID：11059255
> 
> 赞同：-1
> 
> 时间：2012-06-15T23:10:55.397
> 
> 标签：php, mysql, drop-down-menu

你好再次编码大师，

我被困在下拉菜单的这段代码中。这是代码

```
echo '<h3>Select Supplier</h3>';    
$deliver_sql = mysql_query("SELECT supplier_name FROM delivery") or die(mysql_error());

echo '<div align="left">';
echo '<form class="forms" action="returns.php" method="post" name="companyform">';

echo "<select class=\"input\" name=\"companyNames\" onChange=\"this.form.submit()\">"; 

        while($row = mysql_fetch_array($deliver_sql) or die(mysql_error())) 
        { 
        echo '<option value="'.$row['supplier_name'].'">'.$row['supplier_name'].'</option>'; 
        } 
    break;
    echo '</select>'; 

echo '</form>';
echo '</div>'; 
```

我的问题是，这段代码有问题吗？因为当我打开这个特定页面时，页脚没有显示。

就像有一些东西破坏了整个 html 代码，导致页脚不显示，即使我使用`$_POST['companyform']`也无法检测到。

有人可以找出导致此错误的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:14:48.950

尝试`echo '<div style="float:left">';`代替`echo '<div align="left">';`

或删除`break;`

`or die(mysql_error())`并从中删除`while($row = mysql_fetch_array($deliver_sql))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T23:19:38.637

问题出在这一行

```
while($row = mysql_fetch_array($deliver_sql) or die(mysql_error())) 
```

当 $deliver_sql 中没有更多行时，mysql_fetch_array 将返回 false 并执行 die(mysql_error())。mysql_fetch_array 返回 false 不是错误，因此在这种情况下您不应该调用 die
只需使用

```
while($row = mysql_fetch_array($deliver_sql)) 
```

# javascript - 对象中定义的每个方法是否都有指向 Function.prototype 的隐藏链接

> ID：11059260
> 
> 赞同：0
> 
> 时间：2012-06-15T23:11:40.533
> 
> 标签：javascript, prototype

```
var obj = {
         name : 'abc',
         getName : function () {
                     return this.name;
                   }
         } 
```

在这段代码中，obj 将隐藏到 Object.prototype 的链接。但是 obj.getName() 是否也有指向 Function.prototype 的隐藏链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T23:16:18.733

当然。任何对象都有一个指向其原型的“隐藏链接”。对象、字符串、数组、函数、数字、文档、节点、窗口......事实上，任何东西。

# python - 为什么我不能在 Heroku 上的 Python/Flask/Jinja2 中使用 url_for 提供静态文件？

> ID：11059268
> 
> 赞同：1
> 
> 时间：2012-06-15T23:12:26.363
> 
> 标签：python, heroku, flask, jinja2

我在这里写了这个：[https ://gist.github.com/2939061](https://gist.github.com/2939061)

尽管进行了很多搜索和尝试，但我似乎无法完成这项工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T23:13:25.770

因为引导程序是从 git 克隆的，并且没有推送到 Heroku。哦！

# java - 为什么在Java中浮点计算比C慢

> ID：11059269
> 
> 赞同：2
> 
> 时间：2012-06-15T23:12:45.573
> 
> 标签：java, c, floating-point

我想知道并研究浮点计算为什么Java比C慢。实际上有些算法影响不大。C 比 Java 快 3 或 4 倍。但在浮点计算中存在巨大差异。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T23:32:38.803

与 Java 等高级语言的解释器相比，C 等中级语言的编译器足够聪明，可以利用[矢量化](http://www.drdobbs.com/184401611)和其他技术为相同的功能提供速度，后者需要额外一层转换与平台无关的字节平台特定程序集的代码。

话虽如此，虚拟机在维护程序状态以进行垃圾收集和其他活动（例如 JVM 中的线程调度）方面有其自身的开销。

再具体[点JAVA浮点运算伤害大家](http://www.cs.berkeley.edu/~wkahan/JAVAhurt.pdf)。

> Java 的浮点运算被五个无端的错误所破坏：
> 
> 1.  语言上立法的精确再现性充其量只是一厢情愿。
>     
>     
> 2.  在混合精度评估的两种传统策略中，Java 选择了更差的一种。
>     
>     
> 3.  在没有 IEEE 标准 754/854 规定的浮点陷阱和标志的保护的情况下释放的无穷大和 NaN 与 Java 对稳健性的说法相悖。
>     
>     
> 4.  由于 Java 拒绝授予对当今 95% 以上的浮点硬件中内置功能的访问权限，每个程序员的成功前景都被削弱了。
>     
>     
> 5.  Java 甚至拒绝了严格遵守规则的中缀运算符重载，如果没有它，对诸如复数、区间、矩阵、几何对象和任意高精度等日常数学类型的算术扩展将变得极为不便。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-15T23:16:15.597

C被编译并最终成为机器语言。

Java 被编译为字节码，然后由 Java 虚拟机*解释。*

解释将比定义的汇编代码慢（您可以将解释视为逐行汇编..重复，例如，如果在循环内）

# python - 简单的正则表达式拆分

> ID：11059270
> 
> 赞同：1
> 
> 时间：2012-06-15T23:12:52.387
> 
> 标签：python, regex

我有以下字符串：

```
string = "Peter Pan, Pete Sampras; Little Pete" 
```

我需要按名称拆分它：

```
split_string = ["Peter Pan", "Pete Sampras", "Little Pete"] 
```

我正在尝试使用`re.findall`，但遇到了一些麻烦：

```
print re.findall(r'[,;]', string)
[";", ";", ";"] 
```

我在这里做错了什么，我将如何在此处正确使用`re.findall`或等效于拆分字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T23:14:12.463

使用`re.split`如下将拆分您的字符串：

```
string = "Peter Pan, Pete Sampras; Little Pete"
print re.split(r'[,;]', string)
["Peter Pan", "Pete Sampras", "Little Pete"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T23:33:10.187

或者，如果您不确定分隔符但确定名称之间有空格（或更多），您可以使用：

```
re.findall("\w+\s+\w+", target_string) 
```

这确实意味着只跳过一个单词的名称，`\w`代表字母和`\s`空格，并`+`表示对一个或多个元素的贪婪搜索。

# java - JSpinner 没有对 Windows 上的 MouseWheelEvent 做出反应

> ID：11059273
> 
> 赞同：0
> 
> 时间：2012-06-15T23:13:17.563
> 
> 标签：java, swing, mousewheel, mouselistener, jspinner

这让我很困惑：我有一个使用 a`JSpinner`表示数值的小应用程序。我添加了一个`MouseAdapter`，根据结果事件的`getScrollAmount()`和设置值`getWheelRotation()`。

只要应用程序在 linux (Debian Wheezy, Oracle JDK 1.6.0_32) 上运行，一切都运行良好。也就是说，在 JSpinner 获得焦点时滚动鼠标滚轮可以正常工作（使用 GTK LookAndFeel）。

在 Microsoft Windows 上测试该软件暴露了不同的行为：`JSpinner`不会对鼠标滚轮的移动做出反应。`LookAndFeel`s 在这里似乎不是问题，因为我已经`MetalLookAndFeel`在 Linux 和 Windows 上尝试过。

关于如何让这个 JSpinner`MouseWheelEvent`在两个操作系统上对 s 做出反应的任何建议？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:29:50.503

嗯，我不确定可能出了什么问题，但这是在 Windows 7 上设计的代码，它工作正常，所以也许可以在你的代码上尝试一下，看看代码有什么不同：

```
import java.awt.Container;
import java.awt.EventQueue;
import java.awt.event.MouseWheelEvent;
import java.awt.event.MouseWheelListener;
import javax.swing.JFrame;
import javax.swing.JSpinner;
import javax.swing.UIManager;
import javax.swing.UIManager.LookAndFeelInfo;

/**
 *
 * @author David
 */
public class JSpinnerMouse extends JFrame {

    private JSpinner jspinner;

    public JSpinnerMouse() {
        createAndShowUI();
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        try {
            for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (Exception e) {
            // If Nimbus is not available, you can set the GUI to another look and feel.
        }
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JSpinnerMouse jSpinnerMouse = new JSpinnerMouse();
            }
        });
    }

    private void createAndShowUI() {
        setTitle("JSpinner using mouse wheel");
        setSize(300, 300);
        setResizable(false);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        addComponentsToContentPane(getContentPane());
        addListeners();
        setVisible(true);
    }

    private void addComponentsToContentPane(Container contentPane) {
        jspinner = new JSpinner();
        contentPane.add(jspinner);
    }

    private void addListeners() {
        this.addMouseWheelListener(new MouseWheelListener() {

            @Override
            public void mouseWheelMoved(MouseWheelEvent mwe) {
                if (MouseWheelEvent.WHEEL_UNIT_SCROLL == mwe.getScrollType()) {
                    int value = (int) jspinner.getValue();
                    if (mwe.getWheelRotation() == -1) {//up
                        jspinner.setValue(value + 1);
                    } else {//down
                        jspinner.setValue(value - 1);
                    }
                }
            }
        });
    }
} 
```

还要提一下，我在 MouseWheelEvent 中找不到 getDirection() 方法，就像你说的那样，所以我使用了 getUnitsToScroll() ，它将根据方向返回正值或负值。也许这就是造成麻烦的原因。您在 MouseWheelEvent 类中的何处找到 getDirection() 方法？

# r - 有没有办法通过避免循环来计算以下指定的矩阵？在 R 或 Matlab 中

> ID：11059274
> 
> 赞同：1
> 
> 时间：2012-06-15T23:13:24.070
> 
> 标签：r, matlab, vectorization, euclidean-distance

我有一个 N×M 矩阵`X`，我需要计算一个 N×N 矩阵`Y`：

```
Y[i, j] = sum((X[i,] - X[j,]) ^ 2)   0 <= i,j <= N 
```

现在，我必须使用嵌套循环来处理 O(n ² )。我想知道是否有更好的方法，比如使用矩阵运算。

更一般地说，`sum(....)`可以是一个函数，其中`fun(x1,x 2)`是M×1 向量。`x1``x2`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T23:34:45.410

您可以使用`expand.grid`来获取可能对的 data.frame：

```
X <- matrix(sample(1:5, 50, replace=TRUE), nrow=10)

row.ind <- expand.grid(1:dim(X)[1], 1:dim(X)[2]) 
```

然后`apply`沿着每一对使用一个函数：

```
myfun <- function(n) {
  sum((X[row.ind[n, 1],] - X[row.ind[n, 2],])^2)
}

Y <- matrix(unlist(lapply(1:nrow(row.ind), myfun)), byrow=TRUE, nrow=nrow(X))

> Y
      [,1] [,2] [,3] [,4] [,5]
 [1,]    0   28   15   31   41
 [2,]   31   28   33   30   33
 [3,]   28    0   15    7   19
 [4,]   33   30   19   34   11
 [5,]   15   15    0   12   22
 [6,]   10   19   10   21   20
 [7,]   31    7   12    0    4
 [8,]   16   17   16   13    2
 [9,]   41   19   22    4    0
[10,]   14   11   28    9    2
> 
```

我敢打赌有更好的方法，但它是星期五，我累了！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T23:26:50.770

```
(x[i]-x[j])^2 = x[i]² - 2*x[i]*x[j] + x[j]² 
```

而不是中间部分只是矩阵乘法`-2*X*tran(X)`（矩阵），其他部分只是 vetrors，你必须在每个元素上运行它

这有 O(n^2.7) 或任何矩阵乘法复杂度

伪代码：

```
vec=sum(X,rows).^2
Y=X * tran(X) * -2 
for index [i,j] in Y:
   Y[i,j] =  Y[i,j] + vec[i]+vec[y] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T23:44:36.177

在 MATLAB 中，对于您的具体`f`情况，您可以这样做：

```
Y = pdist(X).^2; 
```

对于非“作弊”版本，请尝试以下方法（MATLAB）：

```
[N, M] = size(X);
f = @(u, v) sum((u-v).^2);
helpf = @(i, j) f(X(i, :), X(j, :))
Y = arrayfun(helpf, meshgrid(1:N, 1:N), meshgrid(1:N, 1:N)'); 
```

使用特定功能有更有效的方法，`sum(...)`但您的问题说您想要通用功能的通用方法`f`。通常，此操作将是每个向量对操作复杂度的 O(n^2) 倍，因为这就是需要完成的操作数。如果`f`是特殊形式，一些计算的结果可以重复使用。

# c# - 使用 InstallUtil 工具时出现 BadImageFormatException 错误

> ID：11059284
> 
> 赞同：6
> 
> 时间：2012-06-15T23:14:49.450
> 
> 标签：c#, installutil

我已经使用 .NET 4.0 创建并编译了我的 Windows 服务所以我转到 .NET 4.0 文件夹并说这样的话：我将 bin 文件夹复制到 C 驱动器以缩短路径：

> InstallUtil.exe "C:\bin\Debug\MyTestService.exe"

这是我得到的错误：

> 初始化安装时发生异常：System.BadImageFormatException：无法加载文件或程序集“file:///C:\bin Debug\MyTestService.exe”或其依赖项之一。试图加载格式不正确的程序..

所以我不知道该怎么办。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-15T23:27:19.927

当您使用错误版本的 installutil 时会发生该错误。例如，您将 installutil.exe 用于 .NET 2.0，但您的目标 exe 是使用 4.0 构建的，或者您在 64 位 dll/exe 上使用 32 位版本的 installutil。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T23:29:26.307

它是使用“AnyCPU”在 VisualStudio 中构建的，但我使用的是 X64 版本的 Install util，我将其更改为明确表示为 X64 机器构建它并消除了该错误。但是现在它说的是其他一些错误，但是这个错误得到了解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-10T08:10:58.820

对于 32 位和 64 位设置，我设置为 AnyCPU。有效。

# objective-c - iOS 编程 - 阻止联系人

> ID：11059286
> 
> 赞同：0
> 
> 时间：2012-06-15T23:14:53.523
> 
> 标签：objective-c, ios, ios4

嗨，有什么方法可以阻止我的 iPhone 呼叫/向联系人发送文本以及接收来自联系人的文本和呼叫？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T23:17:01.013

不，这是不可能的，在 iOS 中没有任何公开的合法方式可以做到这一点，您可以拨打电话或发送短信，这就是您在 ios 中使用通话和短信所能做的所有事情

# php - 在 div=content 中更新数据库的表单

> ID：11059288
> 
> 赞同：0
> 
> 时间：2012-06-15T23:15:04.303
> 
> 标签：php, ajax, html

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="./js/jquery.blockUI.js"></script>
<script>
$(document).ready(function(){
$(".menuLink").click(function(){

$('#content').block({ 
  centerY: 0, 
  css: { top: '40px', left: '', right: '10px' },
  message: '<img src="./Images/ajax_loader.gif" /><br /><h3>Loading...Please wait.</h3>' 
});

$.ajax({
type: "POST",
url: $(this).attr('href'),
cache: false,
success: function(html){ $("#content").html(html); }
});

});

$(document).ajaxStop(function(){
$('#content').unblock();

});
});
</script> 
```

这是我在单击时获取 div id=menu 中的链接的代码，它们将 php 文件加载到 div id=content ahref 我在这里。

```
<p><a class="menuLink" href="Test.php" onclick="return false;">Wall</a></p> 
```

现在，当在 div id=menu 上单击该链接时，类和带有上面脚本的 onclick 使 Test.php 加载到 div id=content 中。

下面是 Test.php 中的脚本

```
session_start();
include_once("connect.php");
include_once("functions.php");

if($_POST['WallSubmit'] && $_POST['Wall']){

  $wall = makesafe($_POST['Wall']);

mysql_query("INSERT INTO `Wall` (`ID`, `Username`, `MessageBy`, `Date`, `Message`) VALUES ('', '', '$username', '" . time() . "', '$wall')");

}

<form method='post'>
  <table class="default" style="width: 80%" align="center">
<tr>
  <td class="subheader">Wall</td>
</tr>
<tr>
  <td class="content">Post a comment.<br /><textarea name='Wall' id='Wall' style='width: 99%; height: 110px;'></textarea><br /><br/><center><input type='submit' value='Post' name='WallSubmit' /></center><br /><hr><br />Latest Comments.</td>
</tr>
</td>
</table>
</form> 
```

现在我遇到的问题是，一旦我点击了菜单上的墙，就像在 href 中看到的那样，它加载到 div id=content 完全没有问题，所以现在 Test.php 显示在内容 div 中，但是现在当我填写该表格时Test.php 它只是刷新到默认内容页面，如果它没有刷新到那里的默认内容，它不会更新数据库，然后单击时按钮不会做任何事情，现在我知道编码适用于数据库和表单在框架布局中进行了测试，并且如果我将 Test.php 设置为默认内容页面也可以工作，它将像我在页面中一样放置默认内容。

```
<div id="content" class="auto">
           <?include_once("Test.php");?>
         </div> 
```

解决方案是什么？我知道这听起来有点令人困惑，但我只想弄清楚一旦我单击菜单上的 Wall 并将 Test.php 加载到 div id=content 如何在 Test.php 中获取表单来完成它的工作，哈哈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T00:55:47.390

由于未指定，表单的操作只是刷新页面并提交`WallSubmit`到`Wall`主页，而不是 test.php。相反，您可以像这样指定操作：

```
<form action='test.php' id='wallForm' method='post'> 
```

但是，这只会将用户带到一个包含 test.php 内容的空白页面。相反，在 javascript 中，必须进行 ajax 调用：

```
$(document).ready(function() {
    ...
    $(document).on("submit","#wallForm",function(){
        $.ajax({
        type: "POST",
        url: $(this).attr('action'),
        cache: false,
        data: {Wall: $("#Wall").val(), wallSubmit: $("[name=WallSubmit]").val()},
        success: function(html){ $("#content").html(html); }
        });
    });
    ...
}); 
```

`on()`必须调用，因为表单是在 DOM 之后加载的。否则 Javascript 将无法识别它，因为它只处理加载到 DOM 中的内容。有关这方面的更多信息，[本网站](http://www.quirksmode.org/js/events_order.html)包含一些有用的信息。

如果你想有一个通用的表单提交功能，`serialize()`应该可以做到这一点。[jQuery API 页面](http://api.jquery.com/serialize/)应该很好地总结了这一点。你会`data: {Wall: ...}`用`data: $(this).serialize()`. 此函数获取表单中的有效字段并将其放入可用于将数据设置到 php 文件的字符串中。但是，我不太确定`WallSubmit`名称对表单的影响。据我所知，您可以完全消除该步骤。

# vb.net - 查找/替换搜索的 vb.net 重载解析失败

> ID：11059289
> 
> 赞同：1
> 
> 时间：2012-06-15T23:15:07.330
> 
> 标签：vb.net, function, replace, find

```
Public Sub MyFunction()
    Dim lowstring As String
    lowstring = "hi"
    Me.RichTextView.Find(lowstring, 0, 2)
End Sub 
```

以上产生的错误

> 重载解析失败，因为没有`'Find'`缩小转换就无法调用可访问：
> 
> * * *
> 
> > ```
> > Public Function Find(characterSet() As Char, 
> >     start As Integer, end As Integer) As Integer: 
> > ```
> > 
> > 参数匹配参数`'characterSet'`从 缩小`'String'`到`'1-dimensional array of Char'`。
> > 
> > * * *
> > 
> > ```
> > Public Function Find(str As String, start As Integer, 
> >     options As System.Windows.Forms.RichTextBoxFinds) As Integer: 
> > ```
> > 
> > 参数匹配参数`'options'`从 缩小`'Integer'`到 `'System.Windows.Forms.RichTextBoxFinds'`。

如果您更改替换字符串值，则不会发生错误，仅当您将第二个或第三个值更改为`0`.

为什么在这里使用标准整数不起作用？这个错误的真正含义是什么？谁能指出我在 vb.net (2010) 中处理重载函数的一些文档？

我希望这个问题足够集中......我只是对这个问题感到很困惑。

感谢您的帮助-EB

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T23:39:51.883

如您所见，[`RichTextBox.Find`](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.find.aspx)有 7 个重载。您使用 3 个参数和两个整数调用的那个将 a`Char[]`作为第一个参数，而不是 a `String`。

当您想*从字符列表中查找字符的第一个实例时，使用此重载。*

我假设您想`string`在给定范围内找到您的位置。然后你需要使用这个重载：[`RichTextBox.Find`(String, Int32, Int32, RichTextBoxFinds)](http://msdn.microsoft.com/en-us/library/yab8wkhy.aspx)。

例如：

```
' Obtain the location of the search string in RichTextView'
Dim index = RichTextView.Find(lowstring, 0, 2, RichTextBoxFinds.WholeWord) 
```

请注意，您可以[`RichTextBoxFinds`](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextboxfinds.aspx) 按位组合不同的。

例如：

```
Dim index = Me.RichTextView.Find(
        lowstring,
        0,
        2,
        RichTextBoxFinds.WholeWord Or RichTextBoxFinds.MatchCase
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T23:34:49.083

您的函数调用与任何重载都不完全匹配。但是，如果您提供的参数被强制转换为不同的类型，VB 很友好地找到了两个可能的匹配项。

您可能想要`string`参数的重载。所以你应该写，

```
RichTextBox1.Find(lowstring, 0, RichTextBoxFinds.WholeWord) 
```

`RichTextBoxFinds.WholeWord`碰巧具有数值的事实`2`并不是使用该值而不是枚举成员名称的理由。

这也可以：

```
RichTextBox1.Find(lowstring, 0, CType(2, RichTextBoxFinds)) 
```

但这是愚蠢的。

# c# - IoC：建立对事件处理程序的依赖关系

> ID：11059298
> 
> 赞同：13
> 
> 时间：2012-06-15T23:16:56.240
> 
> 标签：c#, winforms, dependency-injection, inversion-of-control, solid-principles

我正在构建一个 WinForms 应用程序，其 UI 仅包含 a`NotifyIcon`及其动态填充的`ContextMenuStrip`. 有一个`MainForm`将应用程序放在一起，但它永远不可见。

我着手尽可能可靠地构建它（使用 Autofac 处理对象图）并且对我的成功感到非常满意，即使在 O 部分也相处得很好。随着我目前正在实施的扩展，我似乎发现了我的设计中的一个缺陷，需要进行一些改造；我想知道我需要走的路，但对于如何准确定义依赖关系有点不清楚。

如上所述，菜单部分是在启动应用程序后动态填充的。为此，我定义了一个`IToolStripPopulator`接口：

```
public interface IToolStripPopulator
{
    System.Windows.Forms.ToolStrip PopulateToolStrip(System.Windows.Forms.ToolStrip toolstrip, EventHandler itemclick);
} 
```

它的一个实现被注入到`MainForm`,`Load()`方法调用`PopulateToolStrip()`和`ContextMenuStrip`表单中定义的处理程序。填充器的依赖项仅与获取用于菜单项的数据有关。

这种抽象已经通过几个演进步骤很好地工作，但当我需要多个事件处理程序时不再足够了，例如因为我正在创建几个不同的菜单项组 - 仍然隐藏在单个`IToolStripPopulator`界面后面，因为表单不应该是完全关心这个。

正如我所说，我想我知道一般结构应该是什么样的 - 我将`IToolStripPopulator`接口重命名为更具体的*并创建了一个新接口，其`PopulateToolStrip()`方法不带`EventHandler`参数，而是注入到对象中（也允许关于实现等所需的处理程序数量的更大灵活性）。这样，我的“最重要”`IToolStripPopulator`可以很容易地成为任意数量的特定适配器的适配器。

现在我不清楚的是我应该如何解决 EventHandler 依赖项。我认为处理程序都应该在 中定义`MainForm`，因为它具有正确响应菜单事件所需的所有其他依赖项，并且它还“拥有”菜单。这意味着我对`IToolStripPopulator`最终注入 MainForm 的对象的依赖项需要`MainForm`使用`Lazy<T>`.

我的第一个想法是定义一个`IClickHandlerSource`接口：

```
public interface IClickHandlerSource
{
    EventHandler GetClickHandler();
} 
```

这是由我实现的`MainForm`，我的具体`IToolStripPopulator`实现依赖于`Lazy<IClickHandlerSource>`. 虽然这可行，但它是不灵活的。我要么必须为可能越来越多的处理程序（严重违反`MainForm`该类的 OCP）定义单独的接口，要么必须不断扩展`IClickHandlerSource`（主要违反 ISP）。直接依赖事件处理程序在消费者方面看起来是个好主意，但是通过惰性实例（或类似）的属性单独连接构造函数似乎非常混乱 - 如果可能的话。

我目前最好的选择似乎是：

```
public interface IEventHandlerSource
{
    EventHandler Get(EventHandlerType type);
} 
```

该接口仍将由`MainForm`惰性单例实现并注入，并且`EventHandlerType`将是具有我需要的不同类型的自定义枚举。这仍然不是非常符合 OCP，但相当灵活。除了新的事件处理程序本身和（可能）新编写`EventHandlerType`的.`MainForm``IToolStripPopulator`

或者....它的单独实现`IEventHandlerSource`（作为唯一对象）依赖于`Lazy<MainForm>`并将`EventHandlerType`选项解析为定义的特定处理程序`MainForm`？

我正在尝试以`MainForm`一种可行的方式真正摆脱事件处理程序，但现在似乎还不太可能。

我最好的选择是什么，提供不同事件处理程序的最松散耦合和最优雅的解决方案？

[*是的，我可能应该单独留下这个名字来真正遵守 OCP，但这样看起来更好。]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-09T12:45:37.363

> 我最好的选择是什么，提供不同事件处理程序的最松散耦合和最优雅的解决方案？

不存在通用解决方案，它取决于全球应用程序架构。

如果你想要一个**最松散**的耦合，`EventAggregator`模式可以帮助你在这种情况下（你的`IEventHandlerSource`类似）：

*   模式描述 - [http://martinfowler.com/eaaDev/EventAggregator.html](http://martinfowler.com/eaaDev/EventAggregator.html)
*   Prism 中的实现 - [http://msdn.microsoft.com/en-us/library/ff921122.aspx](http://msdn.microsoft.com/en-us/library/ff921122.aspx)

*但是，应该非常谨慎*地使用全局事件——它们会**弄脏**架构，因为在任何地方都可以订阅事件。

DI 和 IoC 中的重要一点：低依赖不应该知道高依赖。我认为，正如 Leon 之前所说，最好`ITool<T>`在`MainForm`. 在某些操作之后`MainForm`将调用此工具中的某些方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-09T21:31:03.157

您是否尝试过使用事件聚合器？请参阅：[Caliburn 框架，事件聚合器](https://caliburnmicro.codeplex.com/wikipage?title=The%20Event%20Aggregator) 事件聚合器会将工具条与主窗体分离。

```
public interface IToolStripPopulator
{
    ToolStrip PopulateToolStrip(ToolStrip toolstrip);
} 
```

为了方便起见，像这样包装聚合器：

```
public static class Event
{
    private static readonly IEventAggregator aggregator = new EventAggregator();
    public static IEventAggregator Aggregator
    {
        get
        {
            return aggregator;   
        }
    }
} 
```

您定义一个或多个事件类，例如：

```
public class EventToolStripClick {
    public object Sender {get;set;}
    public EventArgs Args {get;set;}   
} 
```

在创建工具条的控制器中，在 Click 处理程序中发布自定义事件，写入：

```
public void ControllerToolStripClick(object sender, EventArgs args )
{
    Event.Aggregator.Publish(new EventToolStripClick(){Sender=sender,Args=args)});
} 
```

在 mainForm 中实现接口 IHandle

```
public class MainForm : Form, IHandle<EventToolStripClick>
{
    ...
    public void Handle(EventToolStripClick evt)
    {
        //your implementation here
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-06T22:00:06.460

首先，我认为您不应该声称您的主窗体必须包含所有事件处理程序。您显然遇到了这样一个事实，即不同的处理程序具有不同的需求（可能还有不同的依赖项），那么为什么要将它们都安装到同一个类中呢？您可能会从其他语言处理事件的方式中获得一些灵感。WPF 使用命令，Java 有侦听器。两者都是对象，而不仅仅是一个委托，这使得它们在 IOC 场景中更容易处理。模拟这样的东西相当容易。您可以滥用工具栏项目上的标记，如下所示：[Binding to commands in WinForms](https://stackoverflow.com/questions/1685088/binding-to-commands-in-winforms) or use lambda expressions inside PopulateToolbar（请参阅[Is there any wrong with using lambda for winforms event?](https://stackoverflow.com/questions/4359629/is-there-anything-wrong-with-using-lambda-for-winforms-event)) 将工具栏项与正确的命令相关联。这是假设因为 PopulateToolbar 知道需要创建哪些项目，它也知道每个项目属于哪个操作/命令。

表示动作的对象可以有自己的依赖注入，独立于主窗体或其他动作。然后可以稍后添加或删除具有自己操作的工具栏项目，而不会影响您的主窗体或任何其他操作，每个操作都可以独立测试和重构。

底线，停止考虑事件处理程序，开始考虑操作/命令本身作为一个实体，提出合适的模式将变得更容易。确保您了解[Command Pattern](https://en.wikipedia.org/wiki/Command_pattern)，因为这正是您所需要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T16:09:56.523

如果您在表单中托管子组件，它们可以填充主应用程序“shell”。

你可以有一个`ShellComponent`继承自 System.Windows.Forms.ContainerControl 的基类。这也将为您提供设计表面。而不是依赖 IToolStripPopulator，您可以拥有这样的 ITool。

```
public inteface ITool<T>
{
   int ToolIndex { get; }
   string Category { get; }
   Action OnClick(T eventArgs);
} 
```

每次加载视图时，您都可以从 MainForm调用`ShellComponent`。`public List<ITool> OnAddTools(ToolStrip toolStrip)`这样，组件将负责填充工具条。

然后，“ShellComponent”会向 IoC 容器询问实现`ITool<T>`. 这样，您`ITool<T>`就提供了一种分离事件（在`MainForm`或 中`ContainerControl`）并将其推送到任何类的方法。它还允许您准确定义要为参数传递的内容（与 MouseClickEventArgs 等相反）。

# iphone - 为“弹射射击游戏”添加多个级别

> ID：11059300
> 
> 赞同：-5
> 
> 时间：2012-06-15T23:17:07.857
> 
> 标签：iphone, cocoa-touch

我对编程很陌生，从未使用过可可触摸......我需要一些帮助继续本教程[http://www.raywenderlich.com/4756/how-to-make-a-catapult-shooting-game -with-cocos2d-and-box2d-part-1](http://www.raywenderlich.com/4756/how-to-make-a-catapult-shooting-game-with-cocos2d-and-box2d-part-1) 我已经完成了它并且一切正常，我现在想添加一个菜单页面，当应用程序加载时它会转到，然后是一个“开始”按钮来启动应用程序...一旦第 1 级完成（所有敌人被摧毁），下一个级别将开始。

谁能帮我实现这一点，我很乐意付钱给别人为我编辑代码，这样我就可以继续添加关卡，我只需要一个基础，这样我就可以重复步骤等。

非常感谢，

亚历克斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T23:53:13.433

仅根据教程和其他人的代码工作的问题在于，您变得仅限于做其他人所做的事情，而不是进行创新。像这样的东西入门可能具有挑战性，但最好的方法是尝试一点一点地理解它。我建议先做一个更简单的项目；涉及物理的东西可能会变得粗糙。我感觉到你的痛苦；有时我只希望我的代码能够自己编写并实现我的愿景，但我只需要坚持下去并继续努力理解我需要知道什么才能让事情顺利进行。如果您还没有，您可能应该寻找一些更基本的 Cocos2D 教程来了解它们是如何工作和组合在一起的；一旦你这样做了，找出一个菜单系统应该很容易。

# .htaccess - 在 .htaccess 中，重定向除一个以外的所有域

> ID：11059301
> 
> 赞同：15
> 
> 时间：2012-06-15T23:17:21.823
> 
> 标签：.htaccess, mod-rewrite, redirect

我的服务器上有多个域。我想将它们全部重定向到一个（example.net）。

我的.htaccess：

```
RewriteEngine on 
RewriteRule ^(.*)$ http://www.example.net/$1 [R=301,L] 
```

我将服务器上的所有 URL 重定向到一个主域，但该域也重定向到它自己。所以 www.example.net 返回`301 Moved Permanently`并重定向回它自己。有人告诉我，这对 SEO 不利。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-16T00:45:17.343

当您已经在所需的域上时，您需要添加一个*Rewritecond以防止它重定向。*如果您在网上搜索大量示例，或者查看[Apache 的 mod_rewrite 文档的 RewriteCond 部分](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewritecond)。

你正在寻找的是这样的：

```
RewriteEngine on 
Rewritecond %{HTTP_HOST} !^www\.example\.net
RewriteRule ^(.*)$ http://www.example.net/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-22T15:02:22.573

请注意：感谢 TRiG，但我必须删除一个斜杠才能使其正常工作（因为它在域名后添加了两个斜杠）。这对我有用：

```
RewriteEngine on 
Rewritecond %{HTTP_HOST} !^www\.example\.net
RewriteRule ^(.*)$ http://www.example.net$1 [R=301,L] 
```

# apache-flex - 自定义复合控件在添加回 VGROUP 后仅 0.5-1 秒无法正确呈现

> ID：11059302
> 
> 赞同：0
> 
> 时间：2012-06-15T23:17:24.957
> 
> 标签：apache-flex, actionscript, adobe, custom-controls

我正在远离**MXML**并在**ActionScript**中构建了一个自定义组件控件。

我的控件显示正确。问题出现在我从显示列表中删除它并使用 .addElement(control) 方法重新添加它之后。

这是再次添加它的代码。

```
private function displayParameters(parameters:ArrayCollection):void{

   for(var index:int = 0; index<parameters.length; index++){

      if(parameters[index] is ReportControl){

          var control:ReportControl = parameters[index] as ReportControl;
          control.percentWidth = 100;
          vgParameters.addElement(control);
      }
   }
} 
```

`ReportControl`是下面显示的基类`comboBoxMultiSelect`。在图形上没有什么特别之处`ReportControl`，它仅用作其具体实现（多态）的编程接口。

```
public class comboBoxMultiSelect extends ReportControl{

    [Embed("../Assets/Icons/plus-16.png")]
    private var plusIcon:Class;
    [Embed("../Assets/Icons/minus-16.png")]
    private var minusIcon:Class;

    private var expanded:Boolean = false;
    private var buttonIconChanged:Boolean = false;

    private var _drp:ComboBox;
    private var _btnMultiple:Button;
    private var _horizontalGroup:HGroup;
    private var _multiSelector:ReportGridSelector;

    private var _multiSelection:Boolean = true;
    private var bMultiSelectionChanged:Boolean = false;        

    public function ToggleExpanded():void{
        expanded = !_expanded;
        buttonIconChanged = true;

        invalidateSize();
        invalidateProperties();
        invalidateDisplayList();
    }

    public function comboBoxMultiSelect(){
        super();
    }

    override protected function createChildren():void{

        super.createChildren();            

        if(!_horizontalGroup){
            _horizontalGroup = new HGroup();
            _horizontalGroup.gap = 0;
            _horizontalGroup.percentWidth = 100;
            _horizontalGroup.height = ReportControl.SIZE_DEFAULT_HEIGHT;
             addChild(_horizontalGroup);
        }

        if(!_drp){
            _drp = new ComboBox();
            _drp.text = GuiText;
            _drp.percentWidth = 100;
            _drp.height = ReportControl.SIZE_DEFAULT_HEIGHT; 
            _horizontalGroup.addElement(_drp);
        }

        if(!_btnMultiple && _multiSelection){
            _btnMultiple = new Button;
            _btnMultiple.setStyle("icon", plusIcon);
            _btnMultiple.width = 20;
            _btnMultiple.height = ReportControl.SIZE_DEFAULT_HEIGHT;
            _btnMultiple.visible = true;
            _btnMultiple.addEventListener(MouseEvent.CLICK,
                         function(event:MouseEvent):void{
                                 ToggleExpanded();   
                         });
            _horizontalGroup.addElement(_btnMultiple);
        }
    }

    override protected function commitProperties():void{
        super.commitProperties();

        if(buttonIconChanged){

            if(_expanded==true){
                _btnMultiple.setStyle("icon", minusIcon);
            }
            else{
                _btnMultiple.setStyle("icon", plusIcon);
            }
            buttonIconChanged = false;
        }

    }

    override protected function updateDisplayList(unscaledWidth:Number,
                                         unscaledHeight:Number):void{

        super.updateDisplayList(unscaledWidth, unscaledHeight);

        _horizontalGroup.width = unscaledWidth;
        _horizontalGroup.height = unscaledHeight;
    }

    override protected function measure():void{

        super.measure();
        measuredMinWidth = measuredWidth = ReportControl.SIZE_DEFAULT_WIDTH;

        //minimum size      //default size
        if(_expanded==true)
            measuredMinHeight= measuredHeight = 200;            
        else
            measuredMinHeight= measuredHeight = 
                               ReportControl.SIZE_DEFAULT_HEIGHT;
    }
} 
```

当我在 using 中添加控件时`vgParameters.addElement(control)`，`comboBoxMultiSelect`无法正确呈现。`plusIcon`按钮内部最初`_btnMultiple`没有正确定位，但在大约 0.5-1 秒后迅速自行纠正。

我很确定问题出在 comboBoxMultiSelect 之内，只是不确定如何强制图标留在同一个地方。

经过我所有的辛勤工作，这很烦人，有人知道我做错了什么吗？

谢谢 ：）

**更新 -----> 这是 ReportControl 代码**

```
[Event (name= "controlChanged", type="Reporting.ReportControls.ReportControlEvent")]
[Event (name= "controlIsNowValid", type="Reporting.ReportControls.ReportControlEvent")]
public class ReportControl extends UIComponent
{
    private var _guiText:String;
    private var _amfPHPArgumentName:String;
    private var _reportResult:ReportResult;
    private var _sequence:int;
    private var _reportId:int;
    private var _controlConfiguration:ReportParameterVO;
    private var _isValid:Boolean = false;
    internal var _selection:Object;

    /**
     * SIZE_DEFAULT_HEIGHT = 22
     */
    internal static const SIZE_DEFAULT_HEIGHT:int = 22;

    /**
     * SIZE_DEFAULT_WIDTH = 150
     */
    internal static const SIZE_DEFAULT_WIDTH:int = 150;

    public function get ControlConfiguration():ReportParameterVO{
        return _controlConfiguration;
    }

    public function set ControlConfiguration(value:ReportParameterVO):void{

        _controlConfiguration = value;            
        _guiText = (value ? value.GuiText:"");
        _amfPHPArgumentName = (value ? value.AMFPHP_ArgumentName: "");
        _sequence = (value ? value.Sequence : null);
        _reportId = (value ? value.ReportId : null);            
    }

    public function get IsValid():Boolean{
        return _isValid;
    }

    public function get ReportID():int{
        return _reportId;
    }

    public function get Sequence():int{
        return _sequence;
    }

    public function get ControlRepResult():ReportResult{
        return _reportResult;
    }
    public function set ControlRepResult(value:ReportResult):void{
        _reportResult = value;
    }

    internal function set Selection(value:Object):void{
        _selection = value;
    }

    internal function get Selection():Object{
        return _selection;
    }

    public function get ParameterSelection():Object{
        return _selection;
    }

    public function get GuiText():String{
        return _guiText;
    }

    public function get AmfPHPArgumentName():String{
        return _amfPHPArgumentName;
    }

    public function ReportControl(){
        //TODO: implement function
        super();
    }

    public function dispatchControlChanged():void{
        this.dispatchEvent(new ReportControlEvent(ReportControlEvent.CONTROL_CHANGED, this, true));
    }
    public function dispatchControlIsNowValid():void{
        this.dispatchEvent(new ReportControlEvent(ReportControlEvent.CONTROL_IS_NOW_VALID, this, true));
    }

    public function addSelfToValueObject(valueObject:Object):Object{
        valueObject[AmfPHPArgumentName] = _selection;
        return valueObject;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:00:30.557

突出的一件事是您的`updateDisplayList()`. 如您所知，这是您的组件应该调整其子对象的大小和位置（和/或进行任何程序绘图）的地方。

但与其直接设置子对象的宽度/高度，不如使用 Flex 生命周期方法之一：`setActualSize()`或`setLayoutBoundsSize()`. `setLayoutBoundsSize()`与火花组件一起使用。

当您设置 Flex 组件的宽度/高度时，该组件将使其自身失效，以便在下一个更新周期中重新渲染它。但是，由于您尝试在其中呈现组件，`updateDisplayList()`因此应注意不要使此方法中的子对象无效。

`setActualSize()`和方法设置 Flex 组件的`setLayoutBoundsSize()`宽度/高度，但不会使组件无效。

```
override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
{
    super.updateDisplayList(unscaledWidth, unscaledHeight);
    _horizontalGroup.setLayoutBoundsSize(unscaledWidth, unscaledHeight);
    // if you wanted to position objects, you would set their x/y coordinates
    // here with the move() or setLayoutBoundsPosition() methods
} 
```

请注意，看起来一些子对象也在调整大小`createChildren()`......在这种情况下，基本 Flex 组件是什么并不清楚（`ReportControl`扩展了什么类？

这样做**可能**会消除渲染故障。与直接设置宽度/高度属性相比，它肯定会执行更少的代码。

**[编辑]**

这可能是与`HGroup`该组件中不必要的交互。虽然我认为以这种方式制作组件很有趣，但它可能更乏味......这就是为什么@RIAStar 明智地指出了另一种方法。

一些进一步的想法，如果你想继续沿着这条路走下去：

1）看看你正在做的大小调整`createChildren()`- 例如，`HGroup`给定一个百分比宽度，但在`updateDisplayList()`其中给定一个固定宽度（这可能是一个红鲱鱼，但我不会设置百分比宽度）。

2）您可能能够在删除组件之后或重新添加组件之前欺骗组件进行自我验证。一种可能是浪费时间的骇人听闻的预感。

3) 从您的组件中删除“HGroup”。这有点不必要：布局要求很简单，只需几行 Actionscript 即可。随着布局要求变得更加复杂，您的里程会有所不同！

在`createChildren()`将组合框和按钮直接添加到`UIComponent`. 然后调整大小并将它们放置在 中`updateDisplayList()`，如下所示：

```
override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
{
    super.updateDisplayList(unscaledWidth, unscaledHeight);
    var padding:Number = 10;
    var gap:Number = 0;

    // make the ComboBox consume all of the width execpt for 20px and gap + padding
    var availableWidth:Number = unscaledWidth - 20 - gap - (2*padding);
    _drp.setLayoutBoundsSize(availableWidth, unscaledHeight); // combo box 100% width
    _btnMultiple.setLayoutBoundsSize(20, unscaledHeight); // button is 20px wide

    // now position them ...
    // probably should not use 0, rather calculate a Y coordinate that centers them
    // in the unscaledHeight
    _drp.setLayoutBoundsPosition(padding, 0);
    _btnMultiple.setLayoutBoundsPosition(unscaledWidth - padding - 20, 0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T08:40:58.847

我将尝试为您提供一个示例，说明我们在上面的评论中讨论的 Spark 蒙皮架构的含义。这不是您问题的直接答案，但我认为您可能会觉得它很有趣。为了简洁起见，我将不得不使它比你的组件更简单一些，因为你似乎已经为你的问题去掉了一些代码，所以我不能确切地知道它应该做什么。

这将是一个组件，可让您通过单击按钮在正常状态和展开状态之间切换。首先，我们将创建皮肤类。通常你会先创建主机组件，但这样解释会更容易。

```
<!-- my.skins.ComboBoxMultiSelectSkin -->
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark"
        height.normal="25" height.expanded="200">

    <fx:Metadata>
        [HostComponent("my.components.ComboBoxMultiSelect")]
    </fx:Metadata>

    <s:states>
        <s:State name="normal" />
        <s:State name="expanded" />
    </s:states>

    <s:layout>
        <s:HorizontalLayout gap="0" />
    </s:layout>

    <s:ComboBox id="comboBox" width="100%" />
    <s:Button id="toggleButton" width="20"
              icon.normal="@Embed('../Assets/Icons/plus-16.png')"
              icon.expanded="@Embed('../Assets/Icons/minus-16.png')"/>

</s:Skin> 
```

因此，我们已经完全设置了您的组件的外观和布局。你觉得你的头痛消失了吗？我觉得这很优雅。我们有两种状态，组件的高度将调整为当前选定的状态，Button 的图标也会调整。切换状态的方式和时间是组件行为，将在主机组件中定义。

现在让我们用普通的 ActionScript 创建那个宿主组件。为此，我们将扩展 SkinnableComponent（请注意，如果这将扩展 SkinnableComponent 而不是 UIComponent，它也可以扩展您的 ReportControl）。

```
[SkinState("normal")]
[SkinState("expanded")]
public class ComboBoxMultiSelect extends SkinnableComponent {

    [SkinPart(required="true")]
    public var toggleButton:IEventDispatcher;

    [SkinPart(required="true")]
    public var comboBox:ComboBox;

    private var expanded:Boolean;

    override protected function partAdded(partName:String, instance:Object):void {
        super.partAdded(partName, instance);

        switch (instance) {
            case toggleButton:  
                toggleButton.addEventListener(MouseEvent.CLICK, handleToggleButtonClick); 
                break;
            case comboBox:
                comboBox.addEventListener(IndexChangeEvent.CHANGE, handleComboSelection);
                break;
        }
    }

    private function handleToggleButtonClick(event:MouseEvent):void {
        toggleExpanded();
    }

    private function handleComboSelection(event:IndexChangeEvent):void {
        //handle comboBox selection
    }

    protected function toggleExpanded():void {
        expanded = !expanded;
        invalidateSkinState();
    }

    override protected function getCurrentSkinState():String {
        return expanded ? "expanded" : "normal";
    }
} 
```

好吧，这里还有很多事情要做。

*   首先看`SkinState`元数据声明：当一个皮肤类被分配给组件时，编译器将检查该皮肤是否实现了所需的状态。
*   然后`SkinPart`声明：宿主组件上的属性名称必须与皮肤类中标签的 id 完全匹配。`required`设置为编译`true`器会检查这些组件是否真的存在于皮肤中。如果您想要可选的皮肤部件，请将其设置为`false`.
*   请注意，类型`toggleButton`是`IEventDispatcher`: 从宿主组件的角度来看，所有`toggleButton`要做的就是调度 CLICK 事件。这意味着我们现在可以创建一个皮肤，`<s:Image id="toggleButton" source="..." />`并且整个事情将继续以相同的方式工作。看看这有多厉害？
*   因为 skinpart 属性不是立即分配的，所以我们覆盖了`partAdded()`当组件可用时将执行的方法。在大多数情况下，这是您连接事件侦听器的地方。
*   在该`toggleExpanded()`方法中，我们像您问题中的组件一样切换布尔值，但是我们只会使皮肤状态无效。这将导致皮肤调用该`getCurrentSkinState()`方法并将其状态更新为返回的任何值。

瞧！您有一个工作组件，其行为很好地分离到一个动作脚本类中，您不必担心布局的复杂性。如果您希望创建一个具有相同行为的组件，但它应该水平扩展而不是垂直扩展：只需创建一个新的皮肤来调整`width`而不是`height`并将其分配给相同的主机组件。

等一下！我差点忘了告诉你如何将皮肤分配给组件。您可以内联执行此操作：

```
<c:ComboBoxMultiSelect skinClass="my.skins.ComboBoxMultiSelectSkin" /> 
```

或通过样式：

```
@namespace c "my.components.*";

c|ComboBoxMultiSelect {
    skinClass: ClassReference("my.skins.ComboBoxMultiSelectSkin")
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T16:54:22.450

非常感谢你们的回答！解释概念时对细节的考虑和关注非常棒！特雷斯比恩！

@RIAstar 但是，由于已经存在大量代码，因此更改我的架构（将视觉元素与行为元素分开）将强制对代码进行大量重构，并且对于尚未明确请求的功能而言，成本会很高。（能够在运行时更改的控件的可视化表示）这当然很有趣，我将把它添加到未来的版本中。

也就是说，我认为我已经能够找到解决问题的方法。我决定以@SunilD. 的建议为基础，即在重新添加控件之前对其进行验证。我知道这是一个 hack，但人类并不完美，因此代码也不是。**;-)**

查看控件时，我注意到只有按钮在渲染图像时出现问题。所以为了测试，我添加和删除了一个带有图标的按钮实例，我看到了同样的行为**！****（不管comboBoxMultiSelect**是如何实现的）我还注意到，在第一次创建按钮时我没有看到按钮执行此操作。那么，当按钮从显示列表中移除时，为什么不直接重建按钮呢？

我最终连接`comboBoxMultiSelect`到`FlexEvent.REMOVE`事件，销毁按钮引用，创建一个新的，然后用 AddChild() 重新添加它。下面是对事件的解释。

> “使用 removeChild()、removeChildAt()、removeElement() 或 removeElementAt() 方法将组件作为内容子项从容器中移除时调度。如果使用rawChildren.removeChild() 或 rawChildren.removeChildAt() 方法，事件不会被调度。
> 
> 仅当有一个或多个相关侦听器附加到调度对象时才会调度此事件。”

果然，这修复了图标显示不正确并解释了发生的情况。由于某种原因，按钮在重新添加时需要多个渲染事件来应用其样式。还有其他人能够复制这种行为吗？

I guess the **real question now** is "what is the best way to remove and add-back-in a button to the display list, so that its embedded icon is unaffected?"

# drupal-7 - 如何在 Drupal 中创建网格系统

> ID：11059307
> 
> 赞同：0
> 
> 时间：2012-06-15T23:18:07.560
> 
> 标签：drupal-7

[http://i.imgur.com/FSueo.png](http://i.imgur.com/FSueo.png)

我想创建一个网格系统，就像 drupal 7 中图片中的那样。谁能指出我正确的方向？

我第一次尝试使用 Zen，但我不知道如何使用 SASS 来制作这个网格系统。

然后，我检查了面板模块，但这也无济于事；它只会制作更多列，但我想制作更多行。

我对 CSS 和 php 非常熟悉，所以如果您有关于修改某个 CSS 或 php 文件的建议，那就绰绰有余了。只要让我知道要修改哪个文件，以及要查找什么...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:20:19.547

[Omega](http://drupal.org/project/omega)绝对是这个网格用例的完美选择。试试看！

如果你想坚持使用 Zen，值得注意的是使用 SASS 不需要使用 Zen -[来自 Zen 项目页面](http://drupal.org/project/zen)：

> *如果你还没有准备好使用 Sass，Zen 仍然包含一整套记录良好的 CSS 文件。Sass 集成增加了零开销，因此如果您简单地忽略 Zen 的所有 Sass，您的站点性能不会受到影响。不用担心！*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T11:54:29.997

你试过像[Omega](http://drupal.org/project/omega)这样的东西吗？如果您了解 CSS，那么通过它提供的区域，您应该能够实现该结构。

# c++ - isspace 宏与 locale_facets.h 中的 isspace 函数冲突

> ID：11059308
> 
> 赞同：0
> 
> 时间：2012-06-15T23:18:10.083
> 
> 标签：c++, c, linux, cuda, cmake

我正在构建一个包含 cuda 代码的 cmake 项目。我无法编译包含多个 h 文件的 cuda 文件之一。这是我收到的编译器错误

```
In file included from /usr/include/c++/4.4/bits/basic_ios.h:39,
                 from /usr/include/c++/4.4/ios:45,
                 from /usr/include/c++/4.4/ostream:40,
                 from /usr/include/c++/4.4/iostream:40,
                 from /home/pfeifs/Developement/Deform/LinuxDeform/LibDeform/Deform/cutil_comfunc.h:20,
                 from /home/pfeifs/Developement/Deform/LinuxDeform/LibDeform/Deform/VectorMathDef.h:22,
                 from /home/pfeifs/Developement/Deform/LinuxDeform/LibDeform/src/Deform/VectorMath.cu:15:
/usr/include/c++/4.4/bits/locale_facets.h:2521:44: error: macro "isspace" passed 2 arguments, but takes just 1 
```

`isspace()`被定义为需要一个参数的宏，`<ctype.h>`并在`locale_facets.h`. （这些都是标准文件。）但是，在 , 的开头 `locale_facets.h`包含`<cctype>`并且取消声明宏。

非常感谢您对此问题的任何帮助或见解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T00:46:10.013

不要混合和匹配 C 和 C++ 标头。

用于`#include <locale>`拉入`std::isspace`带有两个参数的模板。用于`#include <cctype>`C++ 安全包含`ctype.h`不会导致与 STL 冲突。

如果您正在编写一个 C 程序并且不想要或不需要 C++，那么包含`ctype.h`和使用`isspace`只有一个参数的函数应该没有问题。

# opengl - OpenGL VBO 程序给出黑屏

> ID：11059309
> 
> 赞同：0
> 
> 时间：2012-06-15T23:18:16.590
> 
> 标签：opengl, opengl-3

我一直在尝试将我的一些代码转换为现代 OpenGL。我已经达到了没有任何 OpenGL 错误的地步，但是当我尝试绘制对象时没有任何显示。这是我的代码（减去上下文创建和错误检查）：

```
//Compile shaders and create/link program
//I very highly doubt the problem's here (all my tests say it worked fine),
//so I'm leaving this out for now,  but I'll dig it out of my classes if
//there's no obvious problem with the VBO code.

//Create VAO, VBO

unsigned vaoId, vboId;
int positionAttributeLocation;
float vertices[] = {...vertex data here...};
unsigned indices[] = {...index data here...};

positionAttributeLocation = glGetAttribLocation(programId, "position");

glGenVertexArrays(1, &vaoId);
glGenBuffers(1, &vboId);

glBindVertexArray(vaoId);
glBindBuffer(GL_ARRAY_BUFFER, vboId);
glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);
glVertexAttribPointer(positionAttributeLocation, 3, GL_FLOAT, GL_FALSE, 0, null);
glEnableVertexAttribArray(positionAttributeLocation);

//Create index buffer
unsigned indexId;
glGenBuffers(1, &indexId);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexId);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW);

glUseProgram(programId);
glDrawElements(GL_TRIANGLES, sizeof(indices)/sizeof(unsigned int), GL_UNSIGNED_INT, null); 
```

不完全是 SSCCE，但我认为这就是所有可能导致问题的代码，而且它几乎是独立的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:22:42.520

`glUseProgram()`在您的`glGetAttribLocation()/glEnableVertexAttribArray()`电话之前尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:18:50.063

您的问题很可能在于您的 cg 程序和模型视图空间。

`cgGLSetStateMatrixParameter(modelViewMatrix, CG_GL_MODELVIEW_PROJECTION_MATRIX, CG_GL_MATRIX_IDENTITY);`在 gldrawarrays 之前添加到您的程序中，并在您的 cg 文件中添加`OUT.HPos = mul(ModelViewProj, IN.position);`.

`modelViewMatrix`还要在您的 initcg 部分中添加为 cg 参数。

我从 cgtoolkit 中的基本 opengl 示例中解决了这个问题，我的渲染功能与你的非常相似，现在在遇到同样的问题后可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T03:46:10.040

我想到了。通过一些重构，我忘记了正确设置宽度和高度变量，创建了一个 0 x 0 视口。哎呀...

# windows-phone-7 - WP7 - 销售扩展

> ID：11059310
> 
> 赞同：0
> 
> 时间：2012-06-15T23:18:40.603
> 
> 标签：windows-phone-7, marketplace

我正在尝试为 Windows Phone >= 7.1 创建一些应用程序在计划我的工作和指定技术要求期间，我遇到了一个问题。我不想拥有具有基本功能的免费应用程序。然后它应该可以通过一些非免费扩展（dll？、数据库？、SaaS？）进行扩展。目前是否可以使用一些 MS api/app/etc。能够发布此类扩展并出售它们？如果有多个解决方案，最好的方法是什么？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:27:43.737

截至目前（2012 年 6 月），不支持应用内购买。您唯一的选择是付费应用和支持试用模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:12:08.587

目前，您可以这样做的唯一方法是自己处理额外的购买。

您必须建立一个网站，客户可以在该网站上创建帐户并购买扩展程序，然后让他们使用这些帐户详细信息登录您的应用程序，以确定要下载哪些附加数据或启用哪些功能。

您可以很聪明，并通过浏览器控件将网站功能包含到您的应用程序中。看看亚马逊 Kindle 应用程序，看看他们是如何完成它的。

# java - 在 Java 中学习数据处理程序？

> ID：11059311
> 
> 赞同：3
> 
> 时间：2012-06-15T23:19:10.680
> 
> 标签：java, datahandler

我知道在 Java 中使用数据处理程序来传输文件是件好事。任何人都可以给我一个很好的例子或教程来帮助我理解这门课。

还有，包属于javax.activation.DataHandler，激活是什么意思？它是一个特殊的图书馆吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T03:10:12.973

javax.activation 包的[JavaDocs在某种程度上澄清了名称中“激活”的使用。](http://docs.oracle.com/javaee/1.4/api/index.html)

它指的是[JavaBeans 激活框架](http://www.oracle.com/technetwork/java/javase/downloads/index-135046.html)：

> 通过 JavaBeans Activation Framework 标准扩展，使用 Java 技术的开发人员可以利用标准服务来确定任意数据的类型，封装对它的访问，发现可用的操作，并实例化适当的 bean 以执行所述操作。例如，如果浏览器获得 JPEG 图像，该框架将使浏览器能够将该数据流识别为 JPEG 图像，并且浏览器可以根据该类型定位并实例化可以操作或查看该图像的对象。

# plist - 尝试使用 Rsync 备份 USB 外部 HD 上加密 DMG 上的目录：hdutils attach failed

> ID：11059318
> 
> 赞同：0
> 
> 时间：2012-06-15T23:19:42.157
> 
> 标签：plist, rsync, launchd

我正在尝试这样做：

当外部 USB HD 上的“BCKUNIVERSITA”分区挂载时，LAUNCHD 通过 backup.com 启动“backup.com”，挂载“BCKUNIVERSITA”内的加密 DMG（“riassunti.sparsebundle”）。然后将目录“/DATI/UNIVERSITA”中的 rsync 文件复制到已安装的 dmg“riassunti.sparsebundle”中。

这是关于 LaunchD plist 的代码：

```
`<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
        <string>com.rsync.backup</string>
    <key>LowPriorityIO</key>
    <true/>
    <key>Program</key>
        <string>/Users/ikar0/Library/Scripts/backup.com</string>
    <key>ProgramArguments</key>
    <array>
        <string>backup.com</string>
    </array>
    <key>WatchPaths</key>
    <array> 
        <string>/Volumes</string> 
    </array>
</dict>
</plist>` 
```

这是“backup.com”中的代码：

```
#!/bin/bash
    folderToBackup="/Volumes/DATI/UNIVERSITA" 
    backupVolume="/Volumes/BCKUNIVERSITA" 
    backupTo="/Volumes/RIASSUNTI/" 
    # mounts encrypted image 
    echo -n 465tyu567 | hdiutil attach -stdinpass /Volumes/BCKUNIVERSITA/riassunti.sparsebundle 
    sleep 10
    if [ ! -e ${backupVolume} ] 
    then echo -n "[*]-- BackupVolume NOT connected - Exiting" | logger exit 0 
    else echo -n "[*]-- BackupVolume Connected - Continuing" | logger 
    fi
    # Copy the files over. Here we are using rsync. 
    for i in ${folderToBackup} 
    do 
    echo -n "[*]-- Starting Rsync of ${i} to ${backupTo}" | logger 
    rsync -aq $folderToBackup $backupTo
    echo -n "[*]-- rsync of ${i} to ${backupTo} complete..."| logger 
    done 
    # once the rsync is done, unmount the drive. 
    hdiutil detach $backupTo 
    exit 0

Here are the errors from console :

16/06/12 01.13.51   com.rsync.backup[14139] rsync: recv_generator: mkdir "/Volumes/RIASSUNTI/UNIVERSITA" failed: Permission denied (13)
16/06/12 01.13.51   com.rsync.backup[14139] *** Skipping everything below this failed directory ***
16/06/12 01.13.51   com.rsync.backup[14139] rsync error: some files could not be transferred (code 23) at /SourceCache/rsync/rsync-40/rsync/main.c(992) [sender=2.6.9]
16/06/12 01.13.51   com.rsync.backup[14139] hdiutil: detach failed - Nessun documento o directory esistente
16/06/12 01.13.56   com.rsync.backup[14271] /dev/disk3              GUID_partition_scheme           
16/06/12 01.13.56   com.rsync.backup[14271] /dev/disk3s1            EFI                             
16/06/12 01.13.56   com.rsync.backup[14271] /dev/disk3s2            Apple_HFS                       /Volumes/RIASSUNTI 1
16/06/12 01.14.06   com.rsync.backup[14271] rsync: recv_generator: mkdir "/Volumes/RIASSUNTI/UNIVERSITA" failed: Permission denied (13)
16/06/12 01.14.06   com.rsync.backup[14271] *** Skipping everything below this failed directory ***
16/06/12 01.14.06   com.rsync.backup[14271] rsync error: some files could not be transferred (code 23) at /SourceCache/rsync/rsync-40/rsync/main.c(992) [sender=2.6.9]
16/06/12 01.14.06   com.rsync.backup[14271] hdiutil: detach failed - Nessun documento o directory esistente 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:57:36.070

错误消息是说运行 rsync 的用户没有权限做

```
mkdir "/Volumes/RIASSUNTI/UNIVERSITA" 
```

您可能需要设置您的 sudoers 文件，以便您可以更改：

```
rsync -aq $folderToBackup $backupTo 
```

至

```
sudo rsync -aq $folderToBackup $backupTo 
```

# javascript - 我可以在我的 html 文档中使用两次“window.onbeforeunload”吗？

> ID：11059321
> 
> 赞同：1
> 
> 时间：2012-06-15T23:20:19.307
> 
> 标签：javascript, html, onbeforeunload

我正在创建一个 HTML 布局，用户可以在其中填充数据并使用“保存”和“另存为草稿”分别以 HTML 和 JSON 格式保存该页面。我可以用吗

```
window.onbeforeunload 
```

在我的`template.html`文件中两次显示两个不同的警报消息？

警报将显示：

*   当页面为空并且用户尝试去加载另一个页面时
*   当用户在布局中填充数据并尝试离开布局而不保存时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:36:44.863

首先看[**这个例子**](http://jsfiddle.net/heera/hLUNF/)来理解如果你使用它两次会发生什么，然后给出下面的想法

```
window.onbeforeunload=function()
{ 
    if(form_empty())
        return "Form is empty"; // message for empty form 
    else
        return "Form is not empty"; // message for filled up form 
}

function form_empty()
{
    // check form fields whether the form is empty or not
    // return true if form is empty
    // return false if form is not empty
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T23:23:57.730

就像以这种方式分配的任何其他事件处理程序一样，如果再次设置它，它将破坏已经存在的任何处理程序。

现在，如果您要根据页面状态添加和删除事件，那么这应该不是问题。否则，它有点复杂。但是，在 的情况下`onbeforeunload`，最好只拥有一个。

# html - 跨浏览器格式的 CSS 渐变

> ID：11059325
> 
> 赞同：2
> 
> 时间：2012-06-15T23:20:38.960
> 
> 标签：html, css

我正在开发一个按钮需要具有某种样式的项目，例如下面博客上发布的那个：

[http://joeygallegos.tumblr.com/](http://joeygallegos.tumblr.com/)

该按钮仅在 Chrome、Safari、Android 和 iPhone/iPod touch 中可见。而且我想以跨浏览器格式提供它。我擅长手写 CSS，但我不太能理解跨浏览器渐变。如果有人可以帮助我更好地掌握它，将不胜感激。贝娄是我用来制作渐变的片段：

```
 background-image:-webkit-gradient(linear, 0 0, 0 100%, color-stop(0, #8fc2e8), color-stop(0.5, #54a1d9), color-stop(0.5, #126aa9), color-stop(1, #2ddef2)); 
```

* * *

如果可能的话，我希望它像 Google 的标记一样，具有 -webkit、-moz、-ms、-o、线性等属性：

```
background-image: -webkit-gradient(linear,left top,left bottom,from(
#4D90FE),to(#357AE8));
background-image: -webkit-linear-gradient(top,#4D90FE,#357AE8);
background-image: -moz-linear-gradient(top,#4D90FE,#357AE8);
background-image: -ms-linear-gradient(top,#4D90FE,#357AE8);
background-image: -o-linear-gradient(top,#4D90FE,#357AE8);
background-image: linear-gradient(top,#4D90FE,#357AE8); 
```

* * *

如果您可以用与上面列出的颜色相同的颜色列出它，那将是一个巨大的帮助。谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T23:28:49.877

渐变支持的第一个版本在 webkit 浏览器中以以下形式提供：

```
-webkit-gradient( linear, x y, x y, from( color ), [color-stops...,] to( color ) ) 
```

这是您使用的地方：

```
background: -webkit-gradient(linear,left top,left bottom,from(#4D90FE),to(#357AE8)); 
```

但是后来网络认为这太复杂了，并将其简化为这个（这是大多数浏览器现在使用的）：

```
-prefix-linear-gradient( direction|angle, color-stops... ) 
```

这是您使用的地方：

```
background-image: -webkit-linear-gradient(top,#4D90FE,#357AE8);
background-image: -moz-linear-gradient(top,#4D90FE,#357AE8);
background-image: -ms-linear-gradient(top,#4D90FE,#357AE8);
background-image: -o-linear-gradient(top,#4D90FE,#357AE8);
background-image: linear-gradient(top,#4D90FE,#357AE8); 
```

IE 觉得它需要有所不同，所以它使用了过滤器，直到 IE10 才升级到这种新的更好的渐变表达方式。所以，你所拥有的一切都很好。如果你想要 IE7-IE9 支持，也可以使用这个：

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#4d90fe",endColorstr="#357ae8"); 
```

还有很多工具可以帮助您制作渐变并为您生成跨浏览器代码（Google 是您的朋友）。[Colorzilla](http://www.colorzilla.com/gradient-editor/)有一个很好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T23:25:54.297

除了定义不同的背景图像外，您还应该`background-color`为不支持任何渐变的浏览器定义一个纯文本。

您似乎缺少的唯一一个是用于旧 IE 的那个，`filter`用于生成渐变。

# python - 消除列表中重复项的最佳方法，但保持先前的相对顺序

> ID：11059330
> 
> 赞同：3
> 
> 时间：2012-06-15T23:21:24.163
> 
> 标签：python

> **可能重复：**
> [如何在 Python 列表中删除重复项，同时保持顺序？](https://stackoverflow.com/questions/480214/how-do-you-remove-duplicates-from-a-list-in-python-whilst-preserving-order)
> [Python有有序集吗？](https://stackoverflow.com/questions/1653970/does-python-have-an-ordered-set)

我发现自己经常做以下事情：

```
list_of_items # I have a list of items
set(list_of_items) # I want to remove duplicates 
```

但是，在转换为 a`set`时，我失去了列表中的初始顺序，这很重要。

删除列表中的重复项并保持列表的初始（相对）顺序的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T23:29:34.340

这有点滥用列表推导，但是：

```
seen = set()
item_list = [seen.add(item) or item for item in item_list if item not in seen] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T23:35:49.450

使用字典删除重复项，将数据用作键，将任何内容用作值。如果它在字典中，请不要再次添加它。

```
d = dict()
for i in range(0, len(list_of_items)):
    if(list_of_items[i] not in d):
        d[list_of_items[i]] = i
        list_of_items2.append(list_of_items[i]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T23:50:35.167

有点骇人听闻，但是...

```
item_list = [x[1] for x in sorted(x[::-1] for x in dict(zip(item_list[::-1],range(len(item_list)))).items())][::-1] 
```

# python - NumPy：对每个 ndarray 元素执行函数

> ID：11059332
> 
> 赞同：4
> 
> 时间：2012-06-15T23:21:42.487
> 
> 标签：python, arrays, multidimensional-array, numpy

我有一个二维坐标的三维 ndarray，例如：

```
[[[1704 1240]
  [1745 1244]
  [1972 1290]
  [2129 1395]
  [1989 1332]]

 [[1712 1246]
  [1750 1246]
  [1964 1286]
  [2138 1399]
  [1989 1333]]

 [[1721 1249]
  [1756 1249]
  [1955 1283]
  [2145 1399]
  [1990 1333]]] 
```

最终目标是从 5 个坐标的每个“组”中删除最接近给定点 ([1989 1332]) 的点。我的想法是产生一个类似形状的距离数组，然后使用 argmin 来确定要删除的值的索引。但是，我不确定如何应用一个函数，例如计算到给定点的距离的函数，到 ndarray 中的每个元素，至少以 NumPythonic 方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T02:04:19.897

列表推导是处理 numpy 数组的一种非常低效的方法。对于距离计算，它们是一个特别糟糕的选择。

要找到您的数据和点之间的差异，您只需执行`data - point`. 然后，您可以使用 来计算距离`np.hypot`，或者如果您愿意，可以将其平方、求和，然后取平方根。

不过，如果您将其设为 Nx2 数组以进行计算，则会更容易一些。

基本上，你想要这样的东西：

```
import numpy as np

data = np.array([[[1704, 1240],
                  [1745, 1244],
                  [1972, 1290],
                  [2129, 1395],
                  [1989, 1332]],

                 [[1712, 1246],
                  [1750, 1246],
                  [1964, 1286],
                  [2138, 1399],
                  [1989, 1333]],

                 [[1721, 1249],
                  [1756, 1249],
                  [1955, 1283],
                  [2145, 1399],
                  [1990, 1333]]])

point = [1989, 1332]

#-- Calculate distance ------------
# The reshape is to make it a single, Nx2 array to make calling `hypot` easier
dist = data.reshape((-1,2)) - point
dist = np.hypot(*dist.T)

# We can then reshape it back to AxBx1 array, similar to the original shape
dist = dist.reshape(data.shape[0], data.shape[1], 1)
print dist 
```

这产生：

```
array([[[ 299.48121811],
        [ 259.38388539],
        [  45.31004304],
        [ 153.5219854 ],
        [   0\.        ]],

       [[ 290.04310025],
        [ 254.0019685 ],
        [  52.35456045],
        [ 163.37074401],
        [   1\.        ]],

       [[ 280.55837182],
        [ 247.34186868],
        [  59.6405902 ],
        [ 169.77926846],
        [   1.41421356]]]) 
```

现在，删除最近的元素比简单地获取最近的元素要困难一些。

使用 numpy，您可以使用布尔索引相当容易地做到这一点。

但是，您需要担心轴的对齐方式。

关键是要了解 numpy 沿*最后一个*轴的“广播”操作。在这种情况下，我们要沿中轴进行广播。

此外，`-1`可以用作轴大小的占位符。`-1`当作为轴的大小放入时，Numpy 将计算允许的大小。

我们需要做的看起来有点像这样：

```
#-- Remove closest point ---------------------
mask = np.squeeze(dist) != dist.min(axis=1)
filtered = data[mask]

# Once again, let's reshape things back to the original shape...
filtered = filtered.reshape(data.shape[0], -1, data.shape[2]) 
```

你可以把它写成一行，我只是为了便于阅读而把它分解。关键是`dist != something`产生一个布尔数组，然后您可以使用它来索引原始数组。

所以，把它们放在一起：

```
import numpy as np

data = np.array([[[1704, 1240],
                  [1745, 1244],
                  [1972, 1290],
                  [2129, 1395],
                  [1989, 1332]],

                 [[1712, 1246],
                  [1750, 1246],
                  [1964, 1286],
                  [2138, 1399],
                  [1989, 1333]],

                 [[1721, 1249],
                  [1756, 1249],
                  [1955, 1283],
                  [2145, 1399],
                  [1990, 1333]]])

point = [1989, 1332]

#-- Calculate distance ------------
# The reshape is to make it a single, Nx2 array to make calling `hypot` easier
dist = data.reshape((-1,2)) - point
dist = np.hypot(*dist.T)

# We can then reshape it back to AxBx1 array, similar to the original shape
dist = dist.reshape(data.shape[0], data.shape[1], 1)

#-- Remove closest point ---------------------
mask = np.squeeze(dist) != dist.min(axis=1)
filtered = data[mask]

# Once again, let's reshape things back to the original shape...
filtered = filtered.reshape(data.shape[0], -1, data.shape[2])

print filtered 
```

产量：

```
array([[[1704, 1240],
        [1745, 1244],
        [1972, 1290],
        [2129, 1395]],

       [[1712, 1246],
        [1750, 1246],
        [1964, 1286],
        [2138, 1399]],

       [[1721, 1249],
        [1756, 1249],
        [1955, 1283],
        [2145, 1399]]]) 
```

附带说明，如果多个点同样接近，这将不起作用。Numpy 数组在每个维度上必须具有相同数量的元素，因此在这种情况下您需要重新进行分组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T02:20:24.443

如果我正确理解您的问题，我认为您正在寻找[`apply_along_axis`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.apply_along_axis.html). 使用`numpy`的内置广播，我们可以简单地从数组中减去点：

```
>>> a - numpy.array([1989, 1332])
array([[[-285,  -92],
        [-244,  -88],
        [ -17,  -42],
        [ 140,   63],
        [   0,    0]],

       [[-277,  -86],
        [-239,  -86],
        [ -25,  -46],
        [ 149,   67],
        [   0,    1]],

       [[-268,  -83],
        [-233,  -83],
        [ -34,  -49],
        [ 156,   67],
        [   1,    1]]]) 
```

然后我们可以申请`numpy.linalg.norm`它：

```
>>> dist = a - numpy.array([1989, 1332])
>>> numpy.apply_along_axis(numpy.linalg.norm, 2, dist)
array([[ 299.48121811,  259.38388539,   45.31004304,  
         153.5219854 ,    0\.        ],
       [ 290.04310025,  254.0019685 ,   52.35456045,  
         163.37074401,    1\.        ],
       [ 280.55837182,  247.34186868,   59.6405902 ,  
         169.77926846,    1.41421356]]) 
```

最后，一些布尔掩码技巧，以及几个`reshape`调用：

```
>>> a[normed != normed.min(axis=1).reshape((-1, 1))].reshape((3, 4, 2))
array([[[1704, 1240],
        [1745, 1244],
        [1972, 1290],
        [2129, 1395]],

       [[1712, 1246],
        [1750, 1246],
        [1964, 1286],
        [2138, 1399]],

       [[1721, 1249],
        [1756, 1249],
        [1955, 1283],
        [2145, 1399]]]) 
```

乔金顿的回答虽然更快。那好吧。我会把这个留给后代。

```
def joes(data, point):
    dist = data.reshape((-1,2)) - point
    dist = np.hypot(*dist.T)
    dist = dist.reshape(data.shape[0], data.shape[1], 1)
    mask = np.squeeze(dist) != dist.min(axis=1)
    return data[mask].reshape((3, 4, 2))

def mine(a, point):
    dist = a - point
    normed = numpy.apply_along_axis(numpy.linalg.norm, 2, dist)
    return a[normed != normed.min(axis=1).reshape((-1, 1))].reshape((3, 4, 2))

>>> %timeit mine(data, point)
1000 loops, best of 3: 586 us per loop
>>> %timeit joes(data, point)
10000 loops, best of 3: 48.9 us per loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T23:51:03.740

有多种方法可以做到这一点，但这里有一种使用列表推导的方法：

距离函数：

```
In [35]: from numpy.linalg import norm

In [36]: dist = lambda x,y:norm(x-y) 
```

输入数据：

```
In [39]: GivenMatrix = scipy.rand(3, 5, 2)

In [40]: GivenMatrix
Out[40]: 
array([[[ 0.83798666,  0.90294439],
        [ 0.8706959 ,  0.88397176],
        [ 0.91879085,  0.93512921],
        [ 0.15989245,  0.57311869],
        [ 0.82896003,  0.53589968]],

       [[ 0.0207089 ,  0.9521768 ],
        [ 0.94523963,  0.31079109],
        [ 0.41929482,  0.88559614],
        [ 0.87885236,  0.45227422],
        [ 0.58365369,  0.62095507]],

       [[ 0.14757177,  0.86101539],
        [ 0.58081214,  0.12632764],
        [ 0.89958321,  0.73660852],
        [ 0.3408943 ,  0.45420989],
        [ 0.42656333,  0.42770216]]])

In [41]: q = scipy.rand(2)

In [42]: q
Out[42]: array([ 0.03280889,  0.71057403]) 
```

计算输出距离：

```
In [44]: distances = [[dist(x, q) for x in SubMatrix] 
                      for SubMatrix in GivenMatrix]

In [45]: distances
Out[45]: 
[[0.82783910695733931,
  0.85564093542511577,
  0.91399620574915652,
  0.18720096539588818,
  0.81508758596405939],
 [0.24190557184498068,
  0.99617079746515047,
  0.42426891258164884,
  0.88459501973012633,
  0.55808740166908177],
 [0.18921712490174292,
  0.80103146210692744,
  0.86716521557255788,
  0.40079819635686459,
  0.48482888965287363]] 
```

对每个子矩阵的结果进行排名：

```
In [46]: scipy.argsort(distances)
Out[46]: 
array([[3, 4, 0, 1, 2],
       [0, 2, 4, 3, 1],
       [0, 3, 4, 1, 2]]) 
```

至于删除，我个人认为最简单的方法是转换`GivenMatrix`为 a `list`，然后使用`del`：

```
>>> GivenList = GivenMatrix.tolist()

>>> del GivenList[1][2] # delete third row from the second 5-by-2 submatrix 
```

# c++ - 如何阻止 Mongoose 登录到标准输出？

> ID：11059334
> 
> 赞同：0
> 
> 时间：2012-06-15T23:22:11.263
> 
> 标签：c++, logging, mongoose-web-server

我在我的应用程序中嵌入了[Mongoose](http://code.google.com/p/mongoose/)，但它会将所有内容记录到标准输出。

```
char const* options[] = {
  "listening_ports", boost::lexical_cast<std::string>(port).c_str(),
  nullptr
};

context = ::mg_start(&callback,
                     reinterpret_cast<void*>(&router),
                     options); 
```

它输出如下内容：

```
*** 1339802127.0x7fff7922c960.mg_start.4192: [listening_ports] -> [8000]
*** 1339802127.0x7fff7922c960.mg_start.4202: Setting default: [cgi_pattern] -> [**.cgi$|**.pl$|**.php$]
*** 1339802127.0x7fff7922c960.mg_start.4202: Setting default: [authentication_domain] -> [mydomain.com]
*** 1339802127.0x7fff7922c960.mg_start.4202: Setting default: [ssi_pattern] -> [**.shtml$|**.shtm$]
*** 1339802127.0x7fff7922c960.mg_start.4202: Setting default: [enable_directory_listing] -> [yes]
*** 1339802127.0x7fff7922c960.mg_start.4202: Setting default: [index_files] -> [index.html,index.htm,index.cgi] 
```

如何防止 Mongoose 登录到标准输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:26:32.127

`-DDEBUG`从编译标志中删除。

# sql-server-2008 - SQL Server 2008：比较相似记录 - 当 JOIN 没有匹配项时，仍需要显示记录的 ID

> ID：11059338
> 
> 赞同：0
> 
> 时间：2012-06-15T23:22:39.557
> 
> 标签：sql-server-2008, join, null, default-value

我正在编写一份 SQL Server 2008 报告，该报告将比较动物的基因测试结果。基因测试由动物 ID、基因和结果组成。并非所有动物都会测试相同的基因，但我需要能够并排显示一组给定动物的结果，并且只包括至少一个选定动物存在的基因。

我的 TestResult 表中包含以下数据：

```
animalId    gene    result
1           a       CC
1           b       CT
1           d       TT
2           a       CT
2           b       CT
2           c       TT
3           a       CT
3           b       TT
3           c       CC
3           d       CC
3           e       TT 
```

我需要生成一个如下所示的结果集。请注意，动物 3 没有显示（用户不想看到它的结果），基因“e”的结果也没有显示，因为动物 1 和动物 2 都没有该基因的结果：

```
SireID  SireResult  CalfID  CalfResult Gene
1       CC          2       CT          a
1       CT          2       CT          b
1       NULL        2       TT          c
1       TT          2       NULL        d 
```

但我只能设法得到这个：

```
SireID  SireResult  CalfID  CalfResult Gene
1       CC          2       CT          a
1       CT          2       CT          b
NULL    NULL        2       TT          c
1       TT          NULL    NULL        d 
```

这是我正在使用的查询。

```
SELECT
    sire.animalId AS 'SireID'
    ,sire.result AS 'SireResult'
    ,calf.animalId AS 'CalfID'
    ,calf.result AS 'CalfResult'
    ,sire.gene AS 'Gene'
FROM
    (SELECT 
        s.animalId 
        ,s.result 
        ,m1.gene 
    FROM
        (SELECT [animalId ]
            ,result 
            ,gene 
        FROM TestResult
        WHERE animalId IN (1)) s
    FULL JOIN
        (SELECT DISTINCT 
            gene 
        FROM TestResult
        WHERE animalId IN (1, 2)) m1
    ON s.marker = m1.marker) sire
FULL JOIN
    (SELECT 
        c.animalId 
        ,c.result 
        ,m2.gene 
    FROM
        (SELECT animalId 
            ,result 
            ,gene 
        FROM TestResult
        WHERE animalId IN (2)) c
    FULL JOIN
        (SELECT DISTINCT 
            gene 
        FROM TestResult
        WHERE animalId IN (1, 2)) m2
    ON c.gene = m2.gene) calf
ON 
    sire.gene = calf.gene 
```

当 SireID 和 CalfID 没有与特定基因关联的记录时，如何让它们显示它们的值？我正在考虑使用 COALESCE，但我不知道如何指定正确的 animalId 传递。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T03:11:07.637

我来到了这个：

```
SELECT A.animalId  AS SireID, A.result AS SireResult, B.animalid  AS CalfID, B.Result AS CalfResult, A.gene
  FROM TestResult A  INNER JOIN  TestResult B
ON A.gene = B.gene 
 WHERE A.animalId = 1 AND B.animalId = 2
 UNION 
SELECT 1 AS SireID, NULL AS SireResult, animalid  AS CalfID, Result AS CalfResult, gene
  FROM TestResult 
 WHERE animalId = 2 and gene not in (select distinct gene from TestResult where animalId = 1)
 UNION 
SELECT animalid AS SireID, Result AS SireResult, 2 AS CalfID, NULL AS CalfResult, gene
  FROM TestResult 
 WHERE animalId = 1 and gene not in (select distinct gene from TestResult where animalId = 2)  
ORDER BY SireID, A.gene, SireResult 
```

# python - Google App Engine 投影查询

> ID：11059339
> 
> 赞同：3
> 
> 时间：2012-06-15T23:22:47.517
> 
> 标签：python, google-app-engine, google-cloud-datastore

我有一个这样的模型：

```
class Users(db.Model):
   email = db.EmailProperty(required=True, indexed=True)
   user_name = db.StringProperty(required=True, indexed=True)
   api_key = db.StringProperty(required=False, indexed=False)
   active = db.BooleanProperty(required=True, indexed=False)
   real_name = db.StringProperty(required=False, indexed=False)
   ...etc 
```

当我尝试进行这样的查询时：

```
user = db.GqlQuery("SELECT email, api_key, active FROM Users WHERE user_name = :1", username).get() 
```

它返回无，但是当我使用此查询时：

```
user = db.GqlQuery("SELECT * FROM Users WHERE user_name = :1", username).get() 
```

没关系，一切都回来了。但为什么我不能使用第一个查询？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T23:29:44.850

您不能投影未编制索引的属性。如[文档中所述](https://developers.google.com/appengine/docs/python/datastore/queries#Query_Projection)

> 可以投影的属性有一些限制： 您只能投影索引属性。这意味着不支持投影 Text、Blob 或其他明确标记为未索引的属性。

您可以通过在管理控制台的数据存储查看器中运行查询来找出所需的索引。

# python - django 打印元组键控字典

> ID：11059345
> 
> 赞同：2
> 
> 时间：2012-06-15T23:23:48.417
> 
> 标签：python, django

我有一个以元组为键的字典。例如：{('tags','1'):'name',('name','first'):'rik',('name','last'):'atee'}

例如，在 django 中，如何打印 ('name','first') 处的值？我可以用 dict.items.1 或 dict.items.2 来做到这一点——但是订购就成了一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T01:00:25.760

Django 模板语言有意限制它允许您引用的内容。

例如，您必须使用点运算符来访问属性和字典元素，这意味着您引用的键*必须*是字符串。

来自文档：

> 变量名称必须由任意字母 (AZ)、任意数字 (0-9)、下划线（但不得以下划线开头）或点组成。

[https://docs.djangoproject.com/en/dev/ref/templates/api/#variables-and-lookups](https://docs.djangoproject.com/en/dev/ref/templates/api/#variables-and-lookups)

您的选择是（a）使用您的视图将元组键转换为字符串格式，或者（b）您可以使用不同的模板引擎，它允许您使用任意键进行引用。

选项 (b) 实际上并不像听起来那么糟糕，因为它们是 Django 的模板语言，它们被设计为 Django 模板语言的超集，因此（理论上）您所有的旧模板都可以工作，并且您可以获得更多功能。我建议您查看[Jinja 模板语言](https://www.google.com/search?q=jinja+django)，它具有您正在寻找的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T23:45:00.450

字典中的任何值都可以通过它们对应的键来访问

所以...

```
>>> foo = {('tags','1'): 'name', ('name','first'):'rik', ('name','last'):'atee'}
>>> foo[('name','first')]
'rik' 
```

但是元组作为键可能最终会变得混乱和容易出错，为什么不使用类似的东西`{"tags": ['name'], "first":'rik', "last":'atee'}`呢？

# greasemonkey - 最喜欢的项目首先在谷歌 - 有多个收藏夹

> ID：11059346
> 
> 赞同：-1
> 
> 时间：2012-06-15T23:23:55.563
> 
> 标签：greasemonkey, userscripts

嗨，你能检查一下我对多个收藏夹所做的尝试吗？我似乎无法让它工作......

```
var title_regexp = [/^.+- Wikipedia, the free encyclopedia$/, /^.+- Stack Overflow$/, /^.+- W3Schools$/];
var addr_regexp = [/^\w+\.wikipedia\.org\/.*$/, /^stackoverflow\.com\/.*$/, /^www\.w3schools\.com\/.*$/];
var mark_style = 'background-color: #CCFF99 !important; padding: 0.5em; -moz-border-radius: 0.5em';
var match_pattern = [3,3,3]; 
```

其余的都保持不变。

谢谢您的帮助

原始文件位于[http://userscripts.org/scripts/show/55641](http://userscripts.org/scripts/show/55641)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T01:52:36.187

根据[该脚本](http://userscripts.org/scripts/review/55641)的文档和代码，`match_pattern`应该是整数，而不是数组。：

```
var match_pattern = 3; 
```

# rtp - AVPF 中的早期媒体设置

> ID：11059353
> 
> 赞同：1
> 
> 时间：2012-06-15T23:24:55.873
> 
> 标签：rtp, rtcp

根据 RFC4585，AVPF 配置文件允许设备比常规 RTCP 数据包的通常传输更早地发送反馈。但是，根据带宽、用户数量和常规 RTCP 数据包的周期性，会话的参与者可能无法使用早期反馈。

这个阈值是如何计算的？这没有提供（最好有它，至少对于点对点的情况）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T07:41:43.723

来自 RFC：

> 请注意，算法并不依赖于所有发送者和接收者都同意这个阈值的相同值。它仅旨在为应用程序设计人员提供概念指导，不用于任何计算。

因此，如果甚至实现了这个阈值（听起来没有必要），它将是特定于实现的。

有 AVPF 的开源实现；duobango 就是一个例子，Jingle 似乎也实现了这一点。可能值得查看他们的代码库以获得一些帮助。我找不到更多的东西。

祝你好运！

# jquery - 从 jQuery 中的字符串值列表创建和附加 DOM 对象

> ID：11059354
> 
> 赞同：0
> 
> 时间：2012-06-15T23:25:02.280
> 
> 标签：jquery, dom

我很困惑，我不确定我对 jQuery 的了解在哪里崩溃。谁能解释为什么这不起作用？（我已经设置了一个[JSFiddle 页面](http://jsfiddle.net/kooshmoose/3cYaW/1/)，以便更容易直接进入）

给定 HTML：

```
<ul id="MyList"></ul> 
```

和 Javascript 字符串：

```
var itemString = "Item1,Item2,Item3"; 
```

为什么以下将字符串附加为 LI 对象的方法不起作用（报告的错误是 NOT_FOUND_ERR: DOM Exception 8）：

```
aStrings = itemString.split(",");
aLi = $.map($.makeArray(aStrings), function(x) {
    return $("<li>").text(x);
});
$("#MyList").append(aLi); 
```

使用 $.each() 有效（以下示例），但是我对 $.map 方法的理解有什么问题？

```
aStrings = itemString.split(",");
$.each(aStrings, function(i, x) {
  $("MyList").append($("<li>").text(x));
}); 
```

我的数组 aLi 不是真正的 LI DOM 元素集合吗？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T23:54:09.153

甚至没有理由在映射中将您想要的简单 html 包装在 jQuery 中。它会创建额外的不必要的函数调用。此外，`aStrings`已经是一个数组，因此无需使用`$.makeArray()`

试试这个：

```
 aStrings = itemString.split(",");
   aLi = $.map(aStrings, function(x) {
        return  "<li>" + x +"<li>";
   }).join('');

   $("#MyList").append(aLi); 
```

`$.map`返回一个字符串数组，然后将其`join()`更改为单个字符串，然后附加该字符串

演示：http: [//jsfiddle.net/3cYaW/2/](http://jsfiddle.net/3cYaW/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T23:44:52.563

来自 jQuery 文档：

> **描述：**通过一个函数传递当前匹配集中的每个元素，生成一个包含返回值的新 jQuery 对象。

您没有在匹配的集合上使用它，即`$('someSelector').map(function{}).doSomethingWithReturnedJQueryObject()`. 如果您将项目放在一个列表中并希望将它们移动到不同的列表中，您可以使用 map 函数，但我认为它不打算以您在非工作示例中的方式使用。

换句话说：该`map()`功能旨在以与您在此处尝试使用它的方式完全相反的方式使用。您可以使用它来获取每个内容`<li>`并从中构建 index1,index2,index3 字符串。

# c# - 从 C# 获取正在运行的 Java 程序的名称（如 .NET 应用程序的进程名称）

> ID：11059355
> 
> 赞同：1
> 
> 时间：2012-06-15T23:25:32.747
> 
> 标签：c#, java, .net, process

我需要从 C# 程序中获取 Java 正在执行的 Java 程序的名称。我无法访问 Java 程序（也就是我不是编写它的人，所以我无法让它与我的 C# 程序通信。）可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T01:50:10.453

JDK 附带了一个名为“jps”的命令行工具。jps -v 显示您传递给 java 的所有参数。

您可以从 c# 调用 jps，然后读取输出。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T23:31:55.667

我不确定，但我不相信，让我解释一下原因：

在您的根计算机上，如果您使用进程资源管理器，您只会看到 JVM（Java 虚拟机），而不是其中发生的事情。层次结构实际上是 Root > Java VM > Java VM 进程。希望逻辑可以帮助您找到解决方案（如果有的话）。

# pygame - pygame：如何对图像的非矩形部分进行着色/着色？

> ID：11059359
> 
> 赞同：1
> 
> 时间：2012-06-15T23:26:08.203
> 
> 标签：pygame, blit

所以我知道如何为图像着色。而且我知道如何对图像的矩形部分进行 blit。但是，比如说，一个三角形呢？还是梯形？（例如[http://i.imgur.com/Gtwhs.png](http://i.imgur.com/Gtwhs.png)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T23:50:22.507

在我问这个问题一分钟后，我至少想出了如何遮荫。不总是这样吗？

无论如何，它基本上归结为简单的事情：

```
surface.blit(image, pos, area)
pygame.draw.polygon(surface, (0,0,0,128), pointlist, 0) 
```

其中 128 是您想要的任何 alpha 值，而 pointlist 是您想要的部分周围的顶点列表。

# python - sqlalchemy 缓存一些查询

> ID：11059362
> 
> 赞同：3
> 
> 时间：2012-06-15T23:26:28.063
> 
> 标签：python, sqlalchemy, flask

我在一个实时网站上运行这个。当用户登录时，我会查询他的个人资料以查看他有多少“信用”可用。积分是通过贝宝购买的。如果一个人购买积分并且付款通过，即使我在 phpmyadmin 中运行相同的查询，查询仍然显示 0 积分，它会带来正确的结果。如果我重新启动 apache 网络服务器并重新加载页面，则会显示正确数量的积分。这是我的映射器代码，它显示了每个用户拥有的积分数：

```
mapper( User, users_table, order_by = 'user.date_added DESC, user.id DESC', properties = {
    'userCreditsCount': column_property( 
        select( 
            [func.ifnull( func.sum( orders_table.c.quantity ), 0 )],
            orders_table.c.user_id == users_table.c.id
        ).where( and_( 
            orders_table.c.date_added > get_order_expire_limit(), # order must not be older than a month
            orders_table.c.status == STATUS_COMPLETED
        ) ).\
        label( 'userCreditsCount' ),
        deferred = True
    )
    # other properties....
} ) 
```

我正在使用带有flask框架的sqlalchemy，但没有使用他们的flask-sqlalchemy包（只是纯sqlalchemy）

这是我启动数据库的方式：

```
engine = create_engine( config.DATABASE_URI, pool_recycle = True )
metadata = MetaData()
db_session = scoped_session( sessionmaker( bind = engine, autoflush = True, autocommit = False ) ) 
```

我在这个项目中同时学习了 python 和 sqlalchemy，所以我可能会遗漏一些东西，但这个让我发疯了。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T06:15:31.697

当您使用 Session 时，一旦它开始使用连接，它就会保持该连接，直到调用 commit()、rollback() 或 close()。使用 DBAPI，与数据库的连接也保留在事务中，直到事务被提交或回滚。

在这种情况下，当您将数据加载到会话中时，SQLAlchemy 不会刷新数据，直到事务结束（或者如果您使用 expire() 显式地使部分数据过期）。这是自然的行为，因为由于[事务隔离](http://en.wikipedia.org/wiki/Isolation_%28database_systems%29)，当前事务很可能在任何情况下*都*看不到自事务开始以来发生的更改。

因此，虽然使用 expire() 或 refresh() 可能是也可能不是如何将最新数据放入会话的一部分，但实际上您需要结束事务并开始一个新事务，以真正查看自事务开始以来其他地方发生了什么变化. 您应该组织您的应用程序，以便在新请求进入时准备好特定的 Session()，但是当该请求完成时，应该关闭 Session()，并关闭一个新的（或至少是一个新的事务）开始下一个请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T14:27:22.077

在访问该字段之前，请尝试调用您[`refresh`的`expire`](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html#refreshing-expiring)对象`userCreditsCount`：

```
user1 = session.query(User).get(1)
# ...
session.refresh(user1, ('userCreditsCount',)) 
```

这将使查询再次执行（调用刷新时）。

但是，根据您的事务使用的隔离模式，它可能无法解决问题，在这种情况下，您可能需要提交/回滚事务（会话）以便查询为您提供新结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T22:58:56.753

[上下文会话的生命周期](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html?highlight=session#lifespan-of-a-contextual-session)

我会确保你在完成后关闭会话。

```
session = db_session()
try:
  return session.query(User).get(5)
finally:
  session.close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T23:40:16.550

根据文档 sessionmaker 缓存将[sessionmaker的自动提交设置为 True 并查看是否有帮助](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html)

> 标识映射模式，并存储键控到其主键的对象。但是，它不执行任何类型的查询缓存。

所以在你的代码中它会变成：

```
sessionmaker(bind = engine, autoflush = True, autocommit = True) 
```

# xml - 用于重复元素序列的 Xml Schema

> ID：11059363
> 
> 赞同：4
> 
> 时间：2012-06-15T23:26:43.280
> 
> 标签：xml, xsd

我有如下的xml

```
<Search>
    <Term />
    <And />
    <Term />
    <And />
    <Term />
</Search> 
```

如图所示，可以有 n 个术语和 n-1 个 Ands (n > 0)。我尝试了以下 xml 架构，但上面的 xml 无法针对架构进行验证。 *错误：cvc-complex-type.2.4.b：元素“搜索”的内容不完整。需要“{And}”之一。*

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
    <xs:element name="Search">
        <xs:complexType>
            <xs:sequence>               
                <xs:sequence minOccurs="0" maxOccurs="unbounded">
                    <xs:element name="Term" type="xs:string" />
                    <xs:element name="And" type="xs:string" />
                </xs:sequence>              
                <xs:element name="Term" minOccurs="1" maxOccurs="1" type="xs:string" />             
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

感谢有关 xml 架构的任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T02:00:47.170

像这样重新排序它们似乎可以做到。我错过了什么吗？

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
    <xs:element name="Search">
        <xs:complexType>
            <xs:sequence>
              <xs:element name="Term" minOccurs="1" maxOccurs="1" type="xs:string" />
                <xs:sequence minOccurs="0" maxOccurs="unbounded">
                  <xs:element name="And" type="xs:string" />
                  <xs:element name="Term" type="xs:string" />
                </xs:sequence>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T02:05:39.653

内容模型的修改形式确实会识别所描述的语言。

但是，如果您根据所需的抽象语法树而不是根据为序列设计的表面语法的文字转录来考虑 XML，那么您的 XML 可能会更惯用，并且几乎肯定会更容易处理令牌而不是树。

不要在术语之间使用空`And`元素，而是将术语的合取包装在一个`And`元素中。

```
<Search>
  <And>
    <Term>...</Term>
    <Term>...</Term>
    <Term>...</Term>
  </And>
</Search> 
```

现在可以很容易地进行任意布尔组合，而不必担心分配给运算符的优先顺序：

```
<Search>
  <Or>
    <And>
      <Term>...</Term>
      <Or>
        <Term>...</Term>
        <Term>...</Term>
      </Or>
    </And>
    <And>
       <Term>...</Term>
       <not><Term>...</Term></not>
    </And>
  </Or>
</Search> 
```

# java - 蛇游戏得分

> ID：11059368
> 
> 赞同：0
> 
> 时间：2012-06-15T23:28:06.777
> 
> 标签：java, swing, user-interface

这个蛇游戏代码。我想在这个游戏中添加系统分数。这样每次蛇吃他的分数都会增加。但是如果蛇没有得到食物分数就不会增加。

如何显示当前分数？

这是 ：

```
import java.awt.Color;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import javax.swing.ImageIcon;
import javax.swing.JPanel;
import javax.swing.Timer;
public class Board extends JPanel implements ActionListener {

private final int WIDTH = 300;
private final int HEIGHT = 300;
private final int DOT_SIZE = 10;
private final int ALL_DOTS = 900;
private final int RAND_POS = 29;
private final int DELAY = 140;

private int x[] = new int[ALL_DOTS];
private int y[] = new int[ALL_DOTS];

private int dots;
private int apple_x;
private int apple_y;

private boolean left = false;
private boolean right = true;
private boolean up = false;
private boolean down = false;
private boolean inGame = true;

private Timer timer;
private Image ball;
private Image apple;
private Image head;

public Board() {
    addKeyListener(new TAdapter());

    setBackground(Color.black);

    ImageIcon iid = new ImageIcon(this.getClass().getResource("dot.png"));
    ball = iid.getImage();

    ImageIcon iia = new ImageIcon(this.getClass().getResource("apple.png"));
    apple = iia.getImage();

    ImageIcon iih = new ImageIcon(this.getClass().getResource("head.png"));
    head = iih.getImage();

    setFocusable(true);
    initGame();
}

public void initGame() {

    dots = 3;

    for (int z = 0; z < dots; z++) {
        x[z] = 50 - z*10;
        y[z] = 50;
    }

    locateApple();

    timer = new Timer(DELAY, this);
    timer.start();
}

public void paint(Graphics g) {
    super.paint(g);

    if (inGame) {

        g.drawImage(apple, apple_x, apple_y, this);

        for (int z = 0; z < dots; z++) {
            if (z == 0)
                g.drawImage(head, x[z], y[z], this);
            else g.drawImage(ball, x[z], y[z], this);
        }

        Toolkit.getDefaultToolkit().sync();
        g.dispose();

    } else {
        gameOver(g);
    }
}

public void gameOver(Graphics g) {
    String msg = "Game Over";
    Font small = new Font("Helvetica", Font.BOLD, 14);
    FontMetrics metr = this.getFontMetrics(small);

    g.setColor(Color.white);
    g.setFont(small);
    g.drawString(msg, (WIDTH - metr.stringWidth(msg)) / 2,
                 HEIGHT / 2);
}

public void checkApple() {

    if ((x[0] == apple_x) && (y[0] == apple_y)) {
        dots++;
        locateApple();
    }
}

public void move() {

    for (int z = dots; z > 0; z--) {
        x[z] = x[(z - 1)];
        y[z] = y[(z - 1)];
    }

    if (left) {
        x[0] -= DOT_SIZE;
    }

    if (right) {
        x[0] += DOT_SIZE;
    }

    if (up) {
        y[0] -= DOT_SIZE;
    }

    if (down) {
        y[0] += DOT_SIZE;
    }
}

public void checkCollision() {

      for (int z = dots; z > 0; z--) {

          if ((z > 4) && (x[0] == x[z]) && (y[0] == y[z])) {
              inGame = false;
          }
      }

    if (y[0] > HEIGHT) {
        inGame = false;
    }

    if (y[0] < 0) {
        inGame = false;
    }

    if (x[0] > WIDTH) {
        inGame = false;
    }

    if (x[0] < 0) {
        inGame = false;
    }
}

public void locateApple() {
    int r = (int) (Math.random() * RAND_POS);
    apple_x = ((r * DOT_SIZE));
    r = (int) (Math.random() * RAND_POS);
    apple_y = ((r * DOT_SIZE));
}

public void actionPerformed(ActionEvent e) {

    if (inGame) {
        checkApple();
        checkCollision();
        move();
    }

    repaint();
}

private class TAdapter extends KeyAdapter {

    public void keyPressed(KeyEvent e) {

        int key = e.getKeyCode();

        if ((key == KeyEvent.VK_LEFT) && (!right)) {
            left = true;
            up = false;
            down = false;
        }

        if ((key == KeyEvent.VK_RIGHT) && (!left)) {
            right = true;
            up = false;
            down = false;
        }

        if ((key == KeyEvent.VK_UP) && (!down)) {
            up = true;
            right = false;
            left = false;
        }

        if ((key == KeyEvent.VK_DOWN) && (!up)) {
            down = true;
            right = false;
            left = false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T00:01:47.197

你需要两件事：

1) 加分的代码——你应该在移动后检查蛇的头部是否与苹果的坐标相同，如果是，则加分。

2）创建一个JLabel来存储玩家得分的值。在每个调用 ActionPerformed 的计时器上，更新此 JLabel 的文本。您无需担心多线程，由 Timer 调用的动作事件处理程序在单独的线程中处理。

# sql - Oracle SQL -- 合并两张表，但从一张表中提取重复项？

> ID：11059372
> 
> 赞同：1
> 
> 时间：2012-06-15T23:28:50.763
> 
> 标签：sql, oracle, union

我有这些表：

```
Table A
Num Letter 
1   A      
2   B      
3   C     

Table B
Num Letter
2   C      
3   D   
4   E 
```

我想合并这两个表，但我只希望每个数字出现一次。如果两个表中出现相同的数字，我希望它来自表 B 而不是表 A。

```
Result
Num Letter
1   A
2   C
3   D
4   E 
```

我怎么能做到这一点？联合将保留重复项，而相交只会捕获相同的行——无论字母如何，当它具有相同的数字时，我认为行是重复的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:54:09.283

试试这个：[http ://www.sqlfiddle.com/#!4/0b796/1](http://www.sqlfiddle.com/#!4/0b796/1)

```
with a as
(
  select Num, 'A' as src, Letter
  from tblA
  union
  select Num, 'B' as src, Letter
  from tblB
)
select 

   Num

   ,case when count(*) > 1 then
       min(case when src = 'B' then Letter end)
   else
       min(Letter)
   end as Letter

from a
group by Num
order by Num; 
```

输出：

```
| NUM | LETTER |
----------------
|   1 |      A |
|   2 |      C |
|   3 |      D |
|   4 |      E | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T00:46:49.123

还有一个：

```
SELECT COALESCE(b.num, a.num) num, COALESCE(b.letter, a.letter) letter
  FROM a FULL JOIN b ON a.num = b.num
 ORDER BY 1; 
```

使用您的数据：

```
WITH a AS 
(SELECT 1 num, 'A' letter FROM dual
 UNION ALL SELECT 2, 'B' FROM dual
 UNION ALL SELECT 3, 'C' FROM dual),
b AS
(SELECT 2 num, 'C' letter FROM dual
 UNION ALL SELECT 3, 'D' FROM dual
 UNION ALL SELECT 4, 'E' FROM dual)
SELECT COALESCE(b.num, a.num) num, COALESCE(b.letter, a.letter) letter
  FROM a FULL JOIN b ON a.num = b.num
 ORDER BY 1;

       NUM L
---------- -
         1 A
         2 C
         3 D
         4 E 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T00:33:48.963

另一种选择是组合 UNION 和 MINUS 命令，如下所示：

```
SELECT 
    NUM, LETTER
FROM 
    TABLE B 
UNION 
( SELECT 
      NUM, LETTER 
  FROM 
      TABLE A 
  WHERE 
      NUM IN (SELECT
                  NUM
              FROM 
                  TABLE A 
              MINUS 
              SELECT 
                  NUM
              FROM 
                  TABLE B )) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T07:20:29.640

```
SELECT A.*
FROM A
WHERE A.NUM NOT IN
  (SELECT A.NUM
  FROM B
  WHERE A.NUM=B.NUM
  AND B.NUM IS NOT NULL
  AND A.NUM IS NOT NULL
  )
UNION
SELECT * FROM B; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T23:41:42.743

效率可能会有所欠缺，但它会产生正确的答案。

```
select nums.num, coalesce(b.letter, a.letter)
from
(select num from b
union
select num from a) nums
left outer join b
on (b.num = nums.num)
left outer join a
on (a.num = nums.num); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-16T00:27:22.683

或者您可以使用特定于 Oracle 的技术来缩短代码：[http ://www.sqlfiddle.com/#!4/0b796/11](http://www.sqlfiddle.com/#!4/0b796/11)

```
with a as
(
  select Num, 'A' as src, Letter
  from tblA
  union
  select Num, 'B' as src, Letter
  from tblB
)
select Num, min(Letter) keep(dense_rank first order by src desc) as Letter
from a
group by Num
order by Num; 
```

输出：

```
| NUM | LETTER |
----------------
|   1 |      A |
|   2 |      C |
|   3 |      D |
|   4 |      E | 
```

无论`min(letter)`or `max(letter)`，代码都可以工作，它具有相同的输出，它给出相同的输出。重要的是您使用`keep dense_rank`. 另一个重要的事情是，顺序问题，我们`order by src desc`在保持一行时会优先考虑源表B。

* * *

为了真正让它更短，使用`keep dense_rank last`并省略`desc`on order by，`asc`无论如何都是默认的[http://www.sqlfiddle.com/#!4/0b796/12](http://www.sqlfiddle.com/#!4/0b796/12)

```
with a as
(
  select Num, 'A' as src, Letter
  from tblA
  union
  select Num, 'B' as src, Letter
  from tblB
)
select Num, min(Letter) keep(dense_rank last order by src) as Letter
from a
group by Num
order by Num; 
```

同样，在 Letter 上使用`min`or`max`并不重要，只要您保持 dense_rank 获得优先/首选行

# ios - 在我的情况下，在父子控制器之间共享数据的最佳方式是什么？（不确定我是否需要委托或共享数据状态）

> ID：11059373
> 
> 赞同：0
> 
> 时间：2012-06-15T23:29:03.343
> 
> 标签：ios

我目前有一个控制器，EventViewController，用户可以访问它来创建或查看事件。

在初始化期间，我的 eventViewController 将根据是否已将事件传递给 init 来设置 isNewEvent。

我决定创建一个单独的视图控制器，VideoEventController 处理事件的视频录制功能。因此 EventVC 和 VideoVC 之间的关系本质上是父子关系。

VideoVC 需要从父控制器访问 isNewEvent 和可能的其他变量。

通过prepareForSegue执行依赖注入会更好（这意味着我将设置isNewEvent和VideoVC需要的其他变量）还是我可以简单地使用parentViewController？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:35:52.860

两者都可能运作良好。如果您打算以非常可重用的方式制作孩子，那么我会说使用委托，以便它可以轻松地在其他位置使用，但如果这是您将使用子控制器的唯一地方，那么只需简单地传递数据属性或初始化函数可以正常工作。

# class - OOP：有很多继承的类是正常的吗？

> ID：11059375
> 
> 赞同：0
> 
> 时间：2012-06-15T23:29:16.947
> 
> 标签：class, methods

我开始为 2D 游戏编写一些代码，创建了一个“对象”类，试图使其尽可能通用。我有一些方法和属性对每种元素（buldings、ppl、界面按钮等）都是通用的，比如（w、h、x、y ...你知道），但它们中的大多数只有在应用于和特定类型的项目。所以我必须为游戏中的每种类型的演员继承一个新类？只是想知道这是否是一种常见的做法，或者我应该以不同的方式管理它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:36:16.377

如果您要引入行为然后是子类，但是如果差异是基于属性的，那么不要例如

动物（有 .colour 和 .makeSound）-> 狗（有 .eatOwnPoop）-> RedDog（不，太具体，被颜色覆盖）

请注意我在 Animal 中是如何使用“.makeSound”的。我本可以将 .bark 放在 dog 中，但是我必须将 .meow 放在 cat 等中。子类可以简单地覆盖并提供具体的声音。

但是，您可以使用接口来更好地横切您的代码，但这是一个相当冗长的主题，并且可能对您的需求有点过分（尽管它可以帮助您进行任何单元测试）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T23:38:11.110

听起来您正在过度使用继承。当你同时说“像......这样的常见属性”和“......仅在应用于特定类型时才有意义”时，这肯定是一个危险信号。此外，域对象（例如）`building`与接口对象（例如`button`. 最后，定义自己的`objet`( `object`?) 类是很不寻常的，系统中的每个类都派生自该类。这不是不可想象的，但是结合您的其他评论，听起来您已经开始了一条徒劳的道路。

您可能想参考一个很好的面向对象设计和分析的教程，例如“ [Head First OOA&D](https://rads.stackoverflow.com/amzn/click/com/0596008678) ”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T23:46:34.850

你不必做任何事情。一般来说，如果派生类表现出某种共性，但在本质上变得更加专业，需要在每个继承级别具有特定功能，则使用派生类很有用。如果您想具有多态行为，它也很好用。你问了一个非常开放的问题，但基本上不觉得你必须使用继承，因为不是每个问题都需要它，而且确实有些人过度使用继承，将它引入真正不需要的地方。总而言之，如果你还没有读过一本关于面向对象设计的好书，我真的建议你阅读一本好书，因为这会让你从不同的角度思考你的代码，并极大地改进你查看软件和设计的方式它。

# javascript - 使用 Canvas toDataUrl 将 dom 元素保存到图像

> ID：11059376
> 
> 赞同：0
> 
> 时间：2012-06-15T23:29:18.383
> 
> 标签：javascript, canvas

使用 Javascript 和 Canvas：

```
canvas.toDataURL("image/png"); 
```

用这个可以节省什么？IE。我可以利用它来保存一组 dom 元素，并将它们的样式设置为图像吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T02:42:53.557

`canvas.toDataURL("image/png");`只会保存画布上当前的内容。

您可以使用[html2canvas](http://html2canvas.hertzen.com/)等库保存网页的屏幕截图，但在其自己的画布上无法保存 dom 元素和样式信息。

基本上可以将其视为画笔或任何其他图像编辑应用程序，当您点击文件时，另存为 png，您将当前画布上的内容保存为 png，同样适用于`canvas`元素。

# php - 如何动态包含 PHP 脚本？

> ID：11059382
> 
> 赞同：0
> 
> 时间：2012-06-15T23:30:02.033
> 
> 标签：php, security

我正在用 PHP 编写代码，需要`config.php`根据网站 URL 包含一个文件。

我在变量中有网站 URL `$site`，并且配置`$site`在目录中`configs/$site/config.php`。

如何在 PHP 中动态地要求这个文件？

这样做安全`include "configs/$site/config.php";`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T23:32:15.010

如果您限制`$site`为一组值，是的。

```
$sites = array(
  'siteA',
  'siteB'
);
if (isset($sites[$site])) {
  include "configs/$site/config.php";
} else {
  throw new Exception("Unknown site");
} 
```

但请记住：*永远不要*相信来自外部的任何东西，*始终*验证来自客户端（浏览器）的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T23:32:03.157

没事儿。只要确保`$site`变量不能被用户更改！如果用户可以更改它，他可以使其包含任何文件。

# python - 在 Python 中解析制表符分隔的文件

> ID：11059390
> 
> 赞同：35
> 
> 时间：2012-06-15T23:31:49.847
> 
> 标签：python, tabs, io

我正在尝试在 Python 中解析一个制表符分隔的文件，其中一个数字将 k 个制表符放置在与行首分开的位置，应将其放入第 k 个数组中。

除了逐行阅读并执行天真的解决方案将执行的所有明显处理之外，是否有内置功能或更好的方法来执行此操作？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-06-15T23:39:36.920

您可以使用[该`csv`模块](http://docs.python.org/library/csv.html)轻松解析制表符分隔值文件。

```
import csv

with open("tab-separated-values") as tsv:
    for line in csv.reader(tsv, dialect="excel-tab"): #You can also use delimiter="\t" rather than giving a dialect.
        ... 
```

where`line`是每次迭代的当前行上的值列表。

编辑：如下所示，如果你想按列而不是按行阅读，那么最好的办法是使用`zip()`内置：

```
with open("tab-separated-values") as tsv:
    for column in zip(*[line for line in csv.reader(tsv, dialect="excel-tab")]):
        ... 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-16T04:18:49.270

我认为当前的任何答案都不能真正做到您所说的。（更正：我现在看到@Gareth Latty / @Lattyware 已将我的答案合并到他自己的答案中，作为接近结尾的“编辑”。）

无论如何，这是我的看法：

假设这些是输入文件中的制表符分隔值：

```
1   2   3   4   5
6   7   8   9   10
11  12  13  14  15
16  17  18  19  20 
```

那么这个：

```
with open("tab-separated-values.txt") as inp:
    print( list(zip(*(line.strip().split('\t') for line in inp))) ) 
```

将产生以下内容：

```
[('1', '6', '11', '16'), 
 ('2', '7', '12', '17'), 
 ('3', '8', '13', '18'), 
 ('4', '9', '14', '19'), 
 ('5', '10', '15', '20')] 
```

如您所见，它将每行的第 k 个元素放入第 k 个数组中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-15T23:37:26.400

像这样：

```
>>> s='1\t2\t3\t4\t5'
>>> [x for x in s.split('\t')]
['1', '2', '3', '4', '5'] 
```

对于文件：

```
# create test file:
>>> with open('tabs.txt','w') as o:
...    s='\n'.join(['\t'.join(map(str,range(i,i+10))) for i in [0,10,20,30]])
...    print >>o, s

#read that file:
>>> with open('tabs.txt','r') as f:
...    LoL=[x.strip().split('\t') for x in f]
... 
>>> LoL
[['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'], 
 ['10', '11', '12', '13', '14', '15', '16', '17', '18', '19'], 
 ['20', '21', '22', '23', '24', '25', '26', '27', '28', '29'], 
 ['30', '31', '32', '33', '34', '35', '36', '37', '38', '39']]
>>> LoL[2][3]
23 
```

如果要转置输入：

```
>>> with open('tabs.txt','r') as f:
...    LoT=zip(*(line.strip().split('\t') for line in f))
... 
>>> LoT[2][3]
'32' 
```

或者**（更好）**在默认分发中使用 csv 模块...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-01T03:23:12.083

[您可以通过 python pandas pd.read_csv ('file_name.tsv', sep='\t')](https://i.stack.imgur.com/V3GQ5.png)轻松地做到这一点

* * *

[注意：需要使用[pip install pandas这个命令安装pandas]](https://pypi.org/project/pandas/)

# android - 启动时的 Android AlarmManager

> ID：11059393
> 
> 赞同：3
> 
> 时间：2012-06-15T23:32:13.137
> 
> 标签：android, broadcastreceiver, alarmmanager, boot, intentservice

我正在使用 AlarmManager 启动每分钟运行的服务。但是，我收到“应用程序 blabla 已意外停止”。当我打开设备时，带有强制关闭按钮的警告对话框。我不知道错误是什么，因为我唯一的调试选项是使用 WIFI，并且每次重新启动设备时连接的 IP 都会更改。

该服务在没有启动的情况下运行良好。

这是我在应用程序下运行的 BroadcastReceiver：

```
 public class FPBootReceiver extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {
        android.os.Debug.waitForDebugger();

        Intent bootintent = new Intent(context, FPService.class);
        PendingIntent pi = PendingIntent.getService(context, 0, bootintent, PendingIntent.FLAG_UPDATE_CURRENT);

        long nextUpdateTimeMillis = DateUtils.MINUTE_IN_MILLIS;
        Time nextUpdateTime = new Time();
        nextUpdateTime.set(nextUpdateTimeMillis);

        AlarmManager FPAlarm = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
        FPAlarm.setRepeating(AlarmManager.RTC, System.currentTimeMillis(), nextUpdateTimeMillis, pi);
    }
} 
```

显现：

```
 <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<application
    android:icon="@drawable/pc"
    android:label="@string/app_name" >
    <service android:name=".FPService" />

    <receiver android:enabled="true" android:name="mypackage.FPBootReceiver"
        android:permission="android.permission.RECEIVE_BOOT_COMPLETED">

    <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
            <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>

    </receiver>

    <activity
        android:name=".CF_Aachen"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

你看到我做错了这些有什么问题吗？

**更新：**设法调试启动，我得到 AndroidRuntime(2781): java.lang.RuntimeException: Unable to instance receiver mypackage.FPBootReceiver: java.lang.ClassNotFoundException: mypackage.FPBootReceiver in loader dalvik.system.PathClassLoader

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T01:34:11.443

Android 系统看不到您的 Receiver，请检查您的路径，除非您的完整包实际上是“mypackage”。您需要将其设为“.mypackage.FPBootReceiver”或指定完整路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T04:42:47.457

我在我的 Activity 的同一类下编写了我的 BroadcastReceiver 类。这就是它无法找到它的原因。

我在 mypackage 中创建了一个单独的类文件并在那里创建了该类，然后它就解决了。

感谢所有建议的人。

# mysql - 为什么 SQLite 和 MySQL 在子选择上没有给出相同的结果？

> ID：11059395
> 
> 赞同：1
> 
> 时间：2012-06-15T23:32:21.893
> 
> 标签：mysql, sql, sqlite

我正在使用[Chinook](http://chinookdatabase.codeplex.com/)测试数据库来比较 Sqlite3 和 MySQL5 的查询结果。

谁能告诉我为什么下面的查询在这两个数据库中给出不同的结果，为什么 MySQL 会创建一个新的 InvoiceId？

```
SELECT * FROM invoice WHERE InvoiceDate > (SELECT AVG(InvoiceDate) FROM invoice) LIMIT 3 
```

![在此处输入图像描述](../Images/b41be93986fdee676afb6738da7f54a0.png)

* * *

# 附录：

![在此处输入图像描述](../Images/23cb6b5a5b7b722c96d8eb388dedb01e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T23:36:59.950

结果的顺序未指定；因此，它们中的“前三个”也未指定。

仅仅因为当你不使用子选择时你在两个引擎上得到了相同的顺序，这并不意味着它们总是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T23:37:44.207

尝试这个：

> SELECT * FROM invoice WHERE InvoiceDate > (SELECT AVG(InvoiceDate) FROM invoice) ORDER BY InvoiceId ASC LIMIT 3

MySQL 没有创建新的发票 ID，它只是没有对结果集进行排序。

# asp.net-mvc - Survey Controller POST 方法问题 ASP.NET MVC

> ID：11059397
> 
> 赞同：0
> 
> 时间：2012-06-15T23:32:33.483
> 
> 标签：asp.net-mvc, survey

我正在尝试创建一个 Controller 类来处理我将在未来最终创建的所有可预见的调查。目前，我有一个“调查”表，其中包含以下字段：*Id*、*SurveyName*、*Active*。在“主”调查索引页面上，我列出了在该表中找到的每个调查名称。每个 SurveyName 都是可单击的，当单击时，页面会将 SurveyName 作为字符串发送到接收控制器操作。所述控制器动作如下所示：

```
 //
    //GET: /Surveys/TakeSurvey/
    public ActionResult TakeSurvey(string surveyName)
    {
        Assembly thisAssembly = Assembly.GetExecutingAssembly();
        Type typeToCreate = thisAssembly.GetTypes().Where(t => t.Name == surveyName).First();

        object newSurvey = Activator.CreateInstance(typeToCreate);

        ViewBag.surveyName = surveyName;

        return View(surveyName, newSurvey);
    } 
```

使用反射，我能够创建由传入字符串“surveyName”指定的类型（模型）的新实例，并且能够将该模型传递给具有相同名称的视图。

**示例**
有人点击“SummerPicnic”，字符串“SummerPicnic”被传递给控制器​​。控制器使用反射创建 SummerPicnic 类的新实例并将其传递给具有相同名称的视图。然后，一个人可以为他们的夏季野餐计划填写表格。

这一切都很好，花花公子。我坚持的部分是尝试将 POST 方法传回的表单保存到正确的相应数据库表中。由于我不提前知道控制器将返回哪种模型，所以我不仅不知道如何告诉它要保存哪种模型，而且也不知道将它保存到哪里，因为我可以不要做一些荒谬的事情，比如：

```
 //
    //POST: Surveys/TakeSurvey
    [HttpPost]
    public ActionResult TakeSurvey(Model survey)
    {

        if (ModelState.IsValid)
        {
            _db. + typeof(survey) + .Add(survey);
            _db.SaveChanges();
            return RedirectToAction("Index", "Home");
        }

        return View();
    } 
```

有没有办法做到这一点，或者我应该从一个完全不同的角度来解决这个问题？我的最终目标是让一个控制器编排每个简单的调查，因此我不必为我最终进行的每个调查创建一个单独的控制器。

我能想到的另一种解决方案是为每个调查设置一个单独的方法，并在每个调查的视图中定义要调用的方法。例如，如果我有一个 SummerPicnic 调查，提交按钮将调用一个名为“SummerPicnic”的 ActionMethod：

```
@Ajax.ActionLink("Create", "SummerPicnic", "Surveys", new AjaxOptions { HttpMethod = "POST" }) 
```

对 PartyAttendance 的调查将调用 ActionMethod 'PartyAttendance' 等。不过，我宁愿不必这样做......

**更新 1** 当我打电话时：

```
 _db.Articles.Add(article);
    _db.SaveChanges(); 
```

这就是 _ *db*是：

```
 private IntranetDb _db = new IntranetDb(); 
```

哪个是...

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;
using System.Data.Entity.ModelConfiguration.Conventions;

namespace Intranet.Models
{
    public class IntranetDb : DbContext
    {
        public DbSet<Article> Articles { get; set; }
        public DbSet<ScrollingNews> ScrollingNews { get; set; }
        public DbSet<Survey> Surveys { get; set; }
        public DbSet<Surveys.test> tests { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T03:54:16.243

你可以试试这样的

**更新：**

内置`UpdateModel`将与通用模型一起使用，请参阅这篇[文章](https://stackoverflow.com/questions/1469336/asp-net-mvc-issue-with-using-reflection-created-objects-with-the-default-model-b#answer-1492989)，所以我们要做的工作不多。

```
[HttpPost]
public ActionResult TakeSurvey(FormCollection form, surveyName)
{
  var surveyType = Type.GetType(surveyName);
  var surveyObj = Activator.CreateInstance(surveyType);

  var binder = Binders.GetBinder(surveyType);

  var bindingContext = new ModelBindingContext()
  {
    ModelMetadata = ModelMetadataProviders.Current.GetMetadataForType(() => surveyObj, surveyType),
    ModelState = ModelState,
    ValueProvider = form
  };

  binder.BindModel(ControllerContext, bindingContext);

  if (ModelState.IsValid)
  {
    // if "db" derives from ObjectContext then..
    db.AddObject(surveyType, surveyObj);         
    db.SaveChanges();

    // if "db" derives from DbContext then..
    var objCtx = ((IObjectContextAdapter)db).ObjectContext;        
    objCtx.AddObject(surveyType, surveyObj);         
    db.SaveChanges();

    return RedirectToAction("Index", "Home");
  }

  return View();
} 
```

检查[这](https://stackoverflow.com/questions/9020809/why-does-entity-framework-automatically-use-the-objectcontext-instead-of-the-dbc)`DbContext`两个知道和之间的区别`ObjectContext`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T19:44:23.113

我最终得到了 Mark 代码的略微修改版本：

```
 [HttpPost]
    public ActionResult TakeSurvey(string surveyName, FormCollection form)
    {
        //var surveyType = Type.GetType(surveyName);
        //var surveyObj = Activator.CreateInstance(surveyType);

        // Get survey type and create new instance of it
        var thisAssembly = Assembly.GetExecutingAssembly();
        var surveyType = thisAssembly.GetTypes().Where(t => t.Name == surveyName).First();
        var newSurvey = Activator.CreateInstance(surveyType);

        var binder = Binders.GetBinder(surveyType);

        var bindingContext = new ModelBindingContext()
        {
            ModelMetadata = ModelMetadataProviders.Current.GetMetadataForType(() => newSurvey, surveyType),
            ModelState = ModelState,
            ValueProvider = form
        };

        binder.BindModel(ControllerContext, bindingContext);

        if (ModelState.IsValid)
        {
            var objCtx = ((IObjectContextAdapter)_db).ObjectContext;
            objCtx.AddObject(surveyName, newSurvey);
            _db.SaveChanges();
        return RedirectToAction("Index", "Home");
        }

        return View();
    } 
```

当调查类型设置为*Type.GetType(surveyName);**时*，我遇到了“null”。所以我继续通过反射检索类型。

 *我现在遇到的唯一麻烦是这里：

```
 if (ModelState.IsValid)
        {
            var objCtx = ((IObjectContextAdapter)_db).ObjectContext;
            objCtx.AddObject(surveyName, newSurvey);
            _db.SaveChanges();
            return RedirectToAction("Index", "Home");
        } 
```

当它尝试添加对象时，我收到异常“找不到实体集名称'IntranetDb.test'。” 我只需要弄清楚去掉前缀“IntranetDb”。希望我能做生意。

**更新**
我完全忽略的一件事是将模型从视图传递给控制器​​......哦，麻烦了。我目前有一个 ActionLink 替换了普通的“提交”按钮，因为我不确定如何将创建正确的调查模型实例所需的字符串传递给控制器​​：

```
 <p>
        @Ajax.ActionLink("Create", "TakeSurvey", "Surveys", new { surveyName = ViewBag.surveyName }, new AjaxOptions { HttpMethod = "POST" })
        @*<input type="submit" value="Create" />*@
    </p> 
```

因此，一旦我弄清楚如何将“IntranetDb.test”转变为“测试”，我将解决如何在提交时使“调查”字段不全部为“空”。

**更新 2**
我将提交方法从使用 Ajax ActionLink 更改为普通提交按钮。在我意识到 Mark 的 bindingContext 正在为我进行绑定（将表单值注入到模型值上）之后，为我的模型值设置了这个固定的空值。所以现在我的视图提交了一个简单的：

```
<input type="submit" value="Submit" /> 
```

回到弄清楚如何将'IntranetDb.test'截断为'test'......

**明白**
了问题出在我的 IntranetDb 类中：

```
public class IntranetDb : DbContext
{
    public DbSet<Article> Articles { get; set; }
    public DbSet<ScrollingNews> ScrollingNews { get; set; }
    public DbSet<SurveyMaster> SurveyMaster { get; set; }
    public DbSet<Surveys.test> tests { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }
} 
```

*objCtx.AddObject(surveyName, newSurveyEntry);* 正在 IntranetDb 类中查找名为“test”的条目（“EntitySet”）。问题在于我没有一个名为“test”的EntitySet，而是一个名为“tests”的实体集，并带有一个's'表示复数。结果我根本不需要截断任何东西，我只需要指向正确的对象：P 一旦我明白了，我应该做生意了！感谢 Mark 和 Abhijit 的协助！^_^

**完成的**

```
 //
    //POST: Surveys/TakeSurvey
    [HttpPost]
    public ActionResult TakeSurvey(string surveyName, FormCollection form)
    {
        //var surveyType = Type.GetType(surveyName);
        //var surveyObj = Activator.CreateInstance(surveyType);

        // Create Survey Type using Reflection
        var thisAssembly = Assembly.GetExecutingAssembly();
        var surveyType = thisAssembly.GetTypes().Where(t => t.Name == surveyName).First();
        var newSurveyEntry = Activator.CreateInstance(surveyType);

        // Set up binder
        var binder = Binders.GetBinder(surveyType);            
        var bindingContext = new ModelBindingContext()
        {
            ModelMetadata = ModelMetadataProviders.Current.GetMetadataForType(() => newSurveyEntry, surveyType),
            ModelState = ModelState,
            ValueProvider = form        // Get values from form
        };

        var objCtx = ((IObjectContextAdapter)_db).ObjectContext;

        // Retrieve EntitySet name for Survey type
        var container = objCtx.MetadataWorkspace.GetEntityContainer(objCtx.DefaultContainerName, DataSpace.CSpace);
        string setName = (from meta in container.BaseEntitySets
                                      where meta.ElementType.Name == surveyName
                                      select meta.Name).First();

        binder.BindModel(ControllerContext, bindingContext);    // bind form values to survey object     

        if (ModelState.IsValid)
        {
            objCtx.AddObject(setName, newSurveyEntry);  // Add survey entry to appropriate EntitySet
            _db.SaveChanges();

            return RedirectToAction("Index", "Home");
        }

        return View();
    } 
```

它有点臃肿，但它现在有效。 [这篇文章](https://stackoverflow.com/questions/2686419/get-the-entityset-name-from-an-entitytype-in-ef)帮助我从 Survey 对象本身获取 EntitySet，因此我无需担心建立某种 EntitySet 命名约定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T04:16:18.703

我看到的主要问题是将模型绑定到`TakeSurvey`POST 方法。如果您希望此方法应处理不同类型的调查模型，并且 MVC 应在调用操作之前绑定到此模型，我相信您可以在所有此类通用模型上拥有一个包装模型类，例如`SurveyModel`并使用自定义模型绑定器绑定到这些模型。

```
public class SurveyModel
{
    public string GetSurveyModelType();
    public SummerPicnicSurvey SummerPicnicSurvey { get; set; }
    public PartyAttendanceSurvey PartyAttendanceSurvey { get; set; }
} 
```

然后编写一个自定义的 mobel binder 来绑定这个模型。从请求表单字段中，我们可以看到发布了哪种类型的调查模型，然后相应地获取所有字段并初始化 SurveyModel 类。如果 SummerPicnicSurvey 已发布，则类 SurveyModel 将设置为此类，并且 PartyAttendanceSurvey 将为空。[示例自定义模型绑定器。](http://odetocode.com/blogs/scott/archive/2009/05/05/iterating-on-an-asp-net-mvc-model-binder.aspx)

从控制器操作`TakeSurvey`POST 方法中，您可以像这样更新 db：

```
 [HttpPost]
    public ActionResult TakeSurvey(SurveyModel survey)
    {

        if (ModelState.IsValid)
        {
            if(survey.GetSurveyModelType() == "SummerPicnicSurvey")
                _db.UpdateSummerPicnicSurvey(survey.SummerPicnicSurvey);
            else if (survey.GetSurveyModelType() == "PartyAttendanceSurvey")
                _db.UpdateSummerPicnicSurvey(survey.PartyAttendanceSurvey);

            _db.SaveChanges();
            return RedirectToAction("Index", "Home");
        }

        return View();
    } 
```

代替 SurveyModel 封装其他调查，您可以继承并使用 .net`as`通过检查进行类型转换并使用模型。

话虽如此，我认为对每个模型使用不同的方法并没有什么坏处。这将使您能够很好地对代码进行单元测试。如果其他情况太多，维护起来不健康。或者，您可以将通用模型转移`SurveyModel`到存储库或数据访问层，并让它以多态方式处理它。我更喜欢更多的小功能并保持代码干净。

**编辑：继承方式：**

```
 public class SurveyModel
    {      
        public virtual bool Save();        
    }

    public partial class SummerPicnicSurvey : SurveyModel
    {
      public bool Save(SummerPicnicSurvey survey)
      {
         using(var _dbContext = new MyContext())
         {
           _dbContex.SummerPicnicSurveys.Add(survey);
           _dbContex.SaveChanges();
         }
      }
    }

  [HttpPost]
  public ActionResult TakeSurvey(SurveyModel survey)
  {
     if (ModelState.IsValid)
      {
         survey.Save();
           return RedirectToAction("Index", "Home");
       }

      return View();
   } 
```

您添加的任何新的调查模型类型都必须实现 SaveChanges 或 Save 方法，这将调用正确的 dbcontext 方法。控制器操作只会在传递给它的通用“SurveyModel”引用上调用 Save。因此，该操作将对修改关闭，但对修改开放。开闭设计原则。*

# javascript - 调整网页元素的上边距

> ID：11059403
> 
> 赞同：0
> 
> 时间：2012-06-15T23:33:36.337
> 
> 标签：javascript, jquery, html, css

在我的页面[http://bit.ly/KseVxs](http://bit.ly/KseVxs)我有一个浮动元素，当我向下滚动页面时它会停留在一个地方。

如何调整 css 使其显示在页面顶部？现在它在顶部显示有额外的空间（见附件截图）。换句话说，我需要它在这个页面[http://bit.ly/LsWPaC](http://bit.ly/LsWPaC)上表现得像一个类似的元素，它使用相同的脚本和 css。

![在此处输入图像描述](../Images/4bdc5b52370e955de25793957922e54e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T02:10:02.237

几个建议：

您是否尝试过更改插件配置中的偏移值？例如

```
$( '#floater3' ).scrollFollow({
speed: 500,
offset: 0
}); 
```

当我刚才检查时，偏移量设置为 165px。

我还注意到 a`br`是滚动对象中的第一个元素。这将在蓝色“调用”框上方添加一些额外的填充，这可能是不可取的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T00:04:00.753

在您的 html 中查找：

```
<div id="floater2" ... 
```

将整个 div 标签从其起始 div 剪切到其结束 div 标签。

然后寻找这个 html 块：

```
<a href="mold-coupons-free" rel="nofollow">
  <img src="images/coupon-free-inspection-town.gif" width="236" height="109" border="0" alt="FREE Mold Inspection coupon">
</a> 
```

将删除的代码粘贴到 </a> 标记之后，如下所示：

```
<a href="mold-coupons-free" rel="nofollow">
  <img src="images/coupon-free-inspection-town.gif" width="236" height="109" border="0" alt="FREE Mold Inspection coupon">
</a>
<div id="floater2" ... </div> 
```

# javascript - 在 Windows 上使用 NodeJS 的 Protobuf

> ID：11059405
> 
> 赞同：4
> 
> 时间：2012-06-15T23:33:59.817
> 
> 标签：javascript, windows, node.js, protocol-buffers

我想从 Windows 上的 NodeJS 脚本向设备 (Karotz) 发送简单的 TCP 消息。

*   NodeJS 正确安装了一个工作
*   TCP连接工作
*   这是我的 .proto 文件（http://wiki.karotz.com/index.php/Voos-message.proto）
*   我使用 google 的 protoc 将其编译为 .desc

我不知道如何构建我的消息以将其发送到设备？

*   我读了[谷歌描述](http://code.google.com/p/protobuf/)
*   和[protobuff_for_node](http://code.google.com/p/protobuf-for-node/)等分叉

但我不明白如何在 Windows 上安装它。由于本地库，似乎很复杂。

是否有简单的 JavaScript 库可以读取 .desc 架构并构建消息？没有本机代码或复杂的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-11T06:20:55.027

如果您使用的是 Node.js，那么使用 protobuf 库的 NPM 包版本会更简单，假设您的机器上有一个 C++ 编译器，它将为您构建它：

```
> npm install protobuf 
```

要构建您的消息并解析和现有消息：

```
var Schema    = require('protobuf').Schema;
var readFile  = require('fs').readFileSync;
var schema = new Schema(readFile(__dirname+'/Voos-message.desc'));
var VooMsg = schema['net.violet.voos.message.VoosMsg'];

// Convert to protobuf format
var msg = VooMsg.serialize({id:1, correlationId: 'hello'});

// Read it back
var outMsg = VooMag.parse(msg); 
```

protobuf 库运行良好且易于使用。但是如果你想要一个纯 JS 版本，看看：[ProtoBufJS](https://github.com/dcodeIO/ProtoBuf.js)

# c# - 在c#中使用反射删除parentObject中的childObject

> ID：11059406
> 
> 赞同：0
> 
> 时间：2012-06-15T23:34:14.417
> 
> 标签：c#, reflection

我需要使用反射来删除父对象内子对象的引用。

```
public class ParentObject{
    public object ChildObject {get;set;}
} 
```

* * *

```
/* Implementation */ 

ParentObject parentObject = new ParentObject();
object childObject = new Object();

//I set this using reflection (PropertyInfo SetValue operation)
parentObject.ChildObject = childObject ;

... 
//I want to remove the reference to the child object using reflection
RemoveObjectUsingReflection(parentObject, childObject);

Assert.IsNull(parentObject.ChildObject); //returns true 
```

* * *

```
function RemoveObjectUsingReflection(object parentObject, object childObject)
{
   //Appreciate your help here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:38:07.997

假设我正确理解“删除”的含义，只需将其设置为`null`：

```
var property = parentObject.GetType().GetProperty("ChildObject"); // get the property
property.SetValue(parentObject, null, null); 
```

这确实让我想知道为什么你需要对此进行反思。

# javascript - 如何阅读 URL 末尾的#2？

> ID：11059409
> 
> 赞同：0
> 
> 时间：2012-06-15T23:34:49.333
> 
> 标签：javascript, asp.net

> **可能重复：**
> [如何使用 JavaScript 检查 URL 中的#hash？](https://stackoverflow.com/questions/298503/how-can-you-check-for-a-hash-in-a-url-using-javascript)

目前我正在生成如下所示的网址：

InspectionPhotos.aspx?inspectionId=10001649#/2

#2 用于相册插件，这意味着去第二张照片。

我只想在有 #/[anynumber] 的情况下显示一个 div，但如果它只是 InspectionPhotos.aspx?inspectionId=10001649 则不显示任何内容。

我怎么能做这个检查？页面加载上的 asp.net 或客户端 javascript 都可以。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T23:41:33.637

您不能在服务器端执行此操作，因为哈希不会发送到服务器，使用 javascript 获取此值很简单：

```
var hash = window.location.hash;
if (hash){
   //use the hash value.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T23:40:40.317

JavaScript：将从您的示例中`window.location.hash`回归。`#/2`

# php - 使用 jQuery 获取 JSON 并传递给 php 并返回？

> ID：11059411
> 
> 赞同：0
> 
> 时间：2012-06-15T23:35:08.343
> 
> 标签：php, jquery, json, twitter

我想使用 jQuery 进行 Twitter 搜索并将其传递给 php 脚本进行格式化。我是 jQuery 的新手，所以如果有人能告诉我这是否无可救药，我会很高兴？

这是我的 jQuery，它应该调用 Twitter，获取 json，然后将 json 传递给 php。

```
//jquery
$(document).ready(function() {
 var twUrl = "http://search.twitter.com/search.json?q=twitter&rpp=5&callback=?";

     $.jsonp({
        url: twUrl,
        data: {},
        dataType: "jsonp",
        callbackParameter: "callback",
        timeout: 5000,
        success: function(data){
            $.post("search_back.php", {json_data: data},
                function(data) { $("#search_word").html() });
         }});            
}); 
```

并且 php 应该拾取它，格式化它（不包括在内，但我知道如何做那部分），然后将它传递回#search_word。

```
//search_back.php
$output = json_decode($_POST["data"], true);

foreach ($output as $tweet){
   echo $tweet;
} 
```

这很近吗？真的很感谢一些帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T01:18:05.393

好的，现在很兴奋 :) 开始工作了，仅供参考：

```
<script>

$(document).ready(function() {
    var twUrl = "http://search.twitter.com/search.json?q=twitter&rpp=5&callback=?";
    $.getJSON(twUrl, 
        function(data) { 
            console.log(data);
            $.post("search_back.php", {json_data: data}, function(data) { 
                console.log(data);
                console.log("ok");
                $("#search_word").html(data) });

        }
    )});

</script> 
```

和

```
<?php
$output = $_POST["json_data"];
foreach ($output[results] as $tweet){
    echo $tweet[from_user] . "<br>";
}
?> 
```

似乎 php 的内容已经 json_decoded 了，真的吗？非常感谢你的帮助！

# mysql - MySQL 和 LIKE 比较与 %

> ID：11059414
> 
> 赞同：1
> 
> 时间：2012-06-15T23:35:42.477
> 
> 标签：mysql, sql-like

如果有人将 a 传递`'%'`给在我的 sql 中与之进行比较的字段，`su.username LIKE CONCAT('%', email ,'%'))`则会返回所有行。它最终看起来像`su.username LIKE CONCAT('%%%')`。我可以在不过滤掉的情况下解决这个问题`'%'`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T23:37:25.757

我假设你的意思是你想逃避，`%`所以它匹配文字`%`而不是任何东西。

在这种情况下，您只需要：

```
... su.username LIKE CONCAT('%',REPLACE(email,'%','\\%'),'%') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T23:38:45.953

您需要转义 %，因此它实际上匹配 '%'

```
select * from mytable
where mycol like '%\%%'; 
```

# java - 将变量传递给方法并阻止变量重置

> ID：11059416
> 
> 赞同：1
> 
> 时间：2012-06-15T23:35:46.667
> 
> 标签：java, methods

我了解如何将变量传递给另一个方法，我什至学会了如何将多个变量传递给单个方法。我的问题是我正在尝试做一个 switch 语句，当用户在我想奖励他 10 分的语句中输入地高辛（心脏药物）的症状时，将其存储在一个变量中，当用户输入另一个我想要的症状时将其存储在变量中以及新方法中。我的问题是，在我将变量发送到我的方法并继续执行程序后，它不可避免地会将其重置为零，从而注定了我的努力。

代码：

```
 switch(input5) {
    case "Vomiting":
        score = 0;
        num = 0;
        score = num + 10;
        getMethod(score,0);
        System.out.println(getMethod(num));
        JOptionPane.showMessageDialog (null,"you're correct")  ;
        break;
    case "Dizziness":
        JOptionPane.showMessageDialog (null,"you're correct")  ;
        score = num + 10;
        getMethod(0,score);
        break;
    case "Confusion":
        JOptionPane.showMessageDialog (null,"you're correct");
        break;
    case "Vision":
        JOptionPane.showMessageDialog (null,"you're correct");
        break;
    default :
        JOptionPane.showMessageDialog (null,"you're Wrong");
        break;
    }
...
static int getMethod(int total) {
    int amount = total;
    int amount2 = total2;
    int result = amount + amount2;
    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T02:04:02.117

这个问题的问题在于它的措辞非常糟糕，以至于很难理解你**实际认为**正在发生的事情。除非我们明白这一点，否则很难正确回答。因此，我只想指出一些您的想法中似乎存在错误的事情。

*   Java 中的变量不会“重置”。在这种情况下，问题在于您的`getMethod`方法没有更新`score`。

*   如果一个方法返回一个值，并且该值没有分配给某个东西，那么它就会被丢弃。在您的情况下，您没有分配在`getMethod`您调用它的地方返回的值。

*   在 Java 中，参数是“按值”传递给方法的。结果是这样的事情不起作用：

    ```
    int test = 1;
    increment(test, 2);

    public void increment(int value, int by) {
        // FAIL - the local copy of "value" is incremented, but the
        // the original "test" variable is not touched.
        value = value + by;
    } 
    ```

    请注意，这与变量的名称无关。问题是方法内部的变量没有以任何方式“连接”到调用站点使用的变量。该方法更新前者......而不是后者。

* * *

关于您的代码需要说明的几件事：

*   一致地缩进代码很重要。有一些风格指南会告诉你该怎么做。（我们以大多数样式指南都可接受的方式重新缩进了您的代码。）

*   对方法、变量和类等事物使用合理且信息丰富的名称非常重要。这有助于读者理解代码作者*想要*代码做什么/意味着什么。在您的情况下，“getMethod”不会告诉读者该方法应该做什么。

*   方法还应该有 javadoc 注释，说明它们应该做什么、参数和结果的含义等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T23:44:28.733

我认为这里的问题是每次你输入一些东西并输入你的 switch 语句时，它都会将分数重置为 0。

```
switch(input5){
             case "Vomiting":
             score = 0; 
```

我认为您需要在第一次输入之前将分数设置为 0，而不是每次输入呕吐时都将其重置。我不能完全按照你的代码，请链接完整的课程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T23:44:31.403

尝试这个：

```
score = getMethod(score, 0); 
```

在java中，原语是“按值传递”的。传递给方法的是value *，*而不是*variable 。*更改方法中的值对用于调用该方法的变量没有*任何影响。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T00:11:47.047

创建一个静态全局变量来维护或持久化分数。这将允许您对您的方法进行后续调用并仍然跟踪准确的分数。

所以，创建一个全局变量`public static int score = 0;`。在您的方法内部，您可以将分数变量初始化为零`score = 0;`，因为您将使用全局分数变量。

# javascript - 如何在 angularjs 中禁用深度链接？

> ID：11059417
> 
> 赞同：0
> 
> 时间：2012-06-15T23:35:48.623
> 
> 标签：javascript, angularjs

我现在正在尝试使用 Angularjs 实现一个页面。但问题是页面中锚元素的行为似乎被Angularjs覆盖了。

所以对于下面的锚元素，我只想为用户提供一个链接到目的地。

```
<a href="payment/123">Pay!</a> 
```

所以我只想将用户定向到`payment/123`. 但是，如果我现在单击该链接，它只是尝试通过将链接添加`href`到当前 url 来提供一个新的 url。例如，如果当前 url 是`http://www.example.com/shopping`，那么它会尝试将我定向到`http://www.example.com/shopping/#/payment/123`但不是我想要的 ( `http://www.example.com/payment/123`)。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:27:12.830

这是 rc11 和 rc12 的错误。尝试 1.0.0 最终版。

# objective-c - 在之前绘制的两个点之后绘制第三个点。Cocos2d

> ID：11059425
> 
> 赞同：2
> 
> 时间：2012-06-15T23:36:50.497
> 
> 标签：objective-c, ios, cocos2d-iphone

好的，让我尝试以最好的方式解释这一点。

我有两个点绘制为“A”和“B”，我正在尝试绘制第三个点“C”，以便它经过点“B”但沿相同的坡度。我有线条的角度，我会发布一些代码，但我真的不知道从哪里开始。

任何帮助都是极好的！

只是我有的一点代码

```
CGPoint vector = ccpSub(touchedPoint, fixedPoint);
CGFloat rotateAngle = -ccpToAngle(vector); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T23:56:29.493

假设你的意思是你需要添加第三个点 C 使得所有点都是共线的，你需要做的就是计算从 A 到 B 的向量，然后通过添加这个向量的倍数来生成一个新点到点 B。根据您希望 C 与 B 的距离选择倍数。

例如，假设 A = (2,2), B = (4,3)。然后从 A 到 B 的向量由 (2,1) 给出。

然后您需要做的就是计算出您的新点距 B 有多远，并将倍数 K*(2,1) 添加到您的 B 点，其中选择 K 以满足您的距离要求

我假设你是二维的，但同样的方法也适用于更高的维度

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T04:52:08.240

我的数学很生疏，但线性方程通常表示为 y=m*x+b，其中 m 是斜率，b 是 y 截距。您可以通过将 y 值的差除以 x 值的差来获得斜率 m，例如，如果 A = (2,2) 和 B = (4,3)，则 m 为 ( 3-2)/(4-2) 或 0.5。然后，您可以求解 b 的线性方程，即 y 截距，即 b=ym*x，然后插入任一数据点，例如，如果我们插入点 A 的 x 和 y 值，则得到 b = 2 - 0.5 * 2 = 1。现在知道斜率 m（本例中为 0.5）和 y 截距 b（本例中为 1），您可以使用 y=m*x 计算任何 x 值的 y +b，在这种情况下 y=0.5*x+1。

所以，如果touchedPoint 和fixedPoint 是CGPoint，你可以计算fixedPoint 和touchPoint 的斜率和y 截距，如下所示：

```
double m = (fixedPoint.y - touchedPoint.y) / (fixedPoint.x - touchedPoint.x);
double b = fixedPoint.y - m * fixedPoint.x; 
```

现在，你没有说你想如何确定第三个点 C 的位置。但是，例如，如果您知道这个新点 C 的 x 坐标，则可以计算落在同一直线上的 y 坐标，如下所示：

```
CGPoint pointC;
pointC.x = 400; // or set this to whatever you want
pointC.y = m * pointC.x + b; 
```

# php - php返回未定义的属性

> ID：11059428
> 
> 赞同：1
> 
> 时间：2012-06-15T23:37:14.940
> 
> 标签：php, mysql, codeigniter

在其他不重复的情况下，我编写了该`getName`函数来为我完成职责：查询数据库的类只会发送 SQL 查询：

```
 public function getVolumeServer($id)
    {
        $str = "SELECT *FROM site_volume_server WHERE site_id='$id'";
        return $this->getName($str);
    }

    public function getName($str)
    {
        $data = array();
        $query = $this->getQuery($str);

        if($query){
            foreach($query->result() as $row){
                array_push($data, $row->name);
            }
        }

        return $data;

    }
    public function getQuery($str){
    $data = array();
    $query = $this->db->query($str);

    if(!$query || $query->num_rows() == 0){
        return false;
    }
    return $query;
} 
```

但是，我收到以下错误：

```
<p>Severity: Notice</p>
<p>Message:  Undefined property: stdClass::$name</p>
<p>Filename: models/sitematrix_model.php</p>
<p>Line Number: 129</p> 
```

第 129 行是`$this->getName($str)`.

我以前没有，当那部分代码嵌入到函数中时，但也有类似的函数，只是被访问的表不同。有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:22:29.353

我遇到了同样的问题，除了我试图访问从 db 正确检索的议程表中的时间列的`$agenda->time_from`属性（我检查了 var_dump，在 phpMyAdmin 中手动运行查询）。`__get()`

我这样做是因为默认调用`parent::_get()`不会返回值；它反而返回`NULL`。

我找到了解决我的问题的方法。您需要做的就是访问以下值：

```
$agenda->_object['time_from'] 
```

我想这不是正确的解决方案，而是可行的解决方案。

# ruby-on-rails - 压缩内存中的字符串 Ruby

> ID：11059429
> 
> 赞同：3
> 
> 时间：2012-06-15T23:37:24.487
> 
> 标签：ruby-on-rails, ruby

有没有办法压缩字符串（使用 gem 或标准库），以便我可以获得字符串的压缩结果？例子：

```
"hello world".zip #=> zipped version of string 
```

此外，如果有人可以将其包含在他们的解决方案中，解压缩会很好。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-16T00:20:48.703

您可以使用[Zlib](http://ruby-doc.org/stdlib-1.9.3/libdoc/zlib/rdoc/index.html)

```
>> require 'zlib'
=> true
>> s = "this is a long string with many many many many repetition"
=> "this is a long string with many many many many repetition"
>> s.size
=> 57
>> cs = Zlib.deflate(s)
=> "x\x9C+\xC9\xC8,V\x00\xA2D\x85\x9C\xFC\xBCt\x85\xE2\x92\xA2L U\x9EY\x92\xA1\x90\x9B\x98W\x89N\x14\xA5\x16\xA4\x96d\x96d\xE6\xE7\x01\x00\\?\x15P"
>> cs.size
=> 48
>> is = Zlib.inflate(cs)
=> "this is a long string with many many many many repetition" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T00:08:46.030

我想向您推荐 vas 这个不错的答案[，](https://stackoverflow.com/users/916791/vas)[它](https://stackoverflow.com/a/9712252/1419586)详细介绍了[ruby​​zip gem](http://rubygems.org/gems/rubyzip)，正如您在[文档](http://rubydoc.info/gems/rubyzip/0.9.8/frames)中看到的那样，它具有输入和输出流对象，并且应该完全按照您的意愿行事。

# maven - Netbeans glassfish 自动部署

> ID：11059433
> 
> 赞同：1
> 
> 时间：2012-06-15T23:37:27.177
> 
> 标签：maven, deployment, netbeans, glassfish

> **可能重复：**
> [使用 Netbeans、Maven 和 Glassfish 进行热部署更改](https://stackoverflow.com/questions/2290935/hot-deploying-changes-with-netbeans-maven-and-glassfish)

我在使用 Glassfish 作为服务器的 netbeans 中工作。每次我在js页面中进行更改时，我都必须使用maven构建项目并重新部署它然后运行它。我在 Windows，所以这个过程每次大约需要 10 分钟。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:37:56.887

[JRebel](http://zeroturnaround.com/jrebel)可能是一个选项 - 它可以更新静态资源以及处理 Java 代码更改

# c++ - 避免使用辅助函数进行比较

> ID：11059434
> 
> 赞同：3
> 
> 时间：2012-06-15T23:37:32.307
> 
> 标签：c++, stl, comparison

假设我有一个带有成员函数的类型：

```
class Thing {
    std::string m_name;
public:
    std::string & getName() {
        return m_name;
    }
}; 
```

并说我有一个这种类型的集合：

```
std::vector<Thing> things; 
```

我想按名称保持这些东西的顺序。为此，我使用 std::lower_bound 来确定放置它的位置：

```
bool thingLessThan(Thing const& thing, std::string const& name) {
    return thing.getName() < name;
}

void addThing(std::string const& name) {
    vector<Thing>::iterator position = lower_bound(
        things.begin(), things.end(),
        name,
       thingLessThan);
    if (position == things.end() || position->getName() != name) {
        position = things.insert(position, Thing());
        position->getName() = name;
    }
} 
```

有没有办法在不实际创建函数的情况下做与函数相同的事情`thingLessThan`，可能使用 std::mem_fun、std::less 等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T23:56:06.587

除了 lambda 之外，您可以简单地定义一个`operator<`遵循严格弱排序的方法，以允许您的对象容器通过 STL 算法与默认谓词进行比较`std::less`

```
class whatever
{
public:
   bool operator<(const whatever& rhs) const { return x < rhs.x; }

private:
   int x;
};

std::vector<whatever> v;
std::sort(v.begin(), v.end()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T23:54:37.617

当然。您可以使用 lambda 表达式（假设您的编译器支持它）：

```
vector<Thing>::iterator position = lower_bound(
    things.begin(), things.end(),
    name,
   [](Thing const& thing, std::string const& name) { return thing.getName() < name; }); 
```

当然，另一种选择只是`operator<`为类定义，然后默认使用它，如果你不为`std::lower_bound`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T23:55:09.283

如果您不想不断地编写谓词，则可以重载`operator<()`和使用。`std::less<T>`你也可以使用 lambda 表达式，这会更好，因为`operator<()`它在逻辑上只与事物相连，可以以明显的方式按某种顺序排列，比如数字或字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T00:14:48.403

如果您使用 std::map，字符串将自动按字母顺序放置。如果要进一步修改排序，请创建自己的键比较函数。我认为这将是最简单的选择。

要使用 std::list，您可以在 addThing() 函数中编写自己的比较代码，该函数遍历列表查看每个字符串并将新的字符串插入到适当的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T23:41:21.367

取决于你的目的是什么？如果您只是喜欢不在一个地方声明要使用的东西的语法上的好处，请使用 lambda 表达式来创建一个匿名函数。

# vba - VBA 复制和粘贴错误

> ID：11059437
> 
> 赞同：0
> 
> 时间：2012-06-15T23:37:47.787
> 
> 标签：vba, excel

这是一个微不足道的错误，但我无法弄清楚。我有一个复制和粘贴几个项目的 vba 脚本。它适用于除最后一个之外的所有内容。错误是

> 无法粘贴信息，因为复制区域和粘贴区域的大小和形状不同。尝试以下方法之一：
> 
> 1.  单击单个单元格，然后粘贴。•</li>
> 2.  选择一个大小和形状相同的矩形，然后粘贴。

这是代码：

```
Sub MakePropertyPage(propertyNum, aFile)
Dim sheetName As String
sheetName = "Prop " & propertyNum

'OPENS INDIVIDUAL WORKBOOKS TO PULL IN INPUT INFORMATION
Workbooks.Open Filename:=vpath & ThisWorkbook.Path & "\" & aFile & ".xlsb",                 UpdateLinks:=False, ReadOnly:=True

Dim sourceRangeAsString As String, dest As Range, clearArea As Range
Dim sheetToEdit As Worksheet
Set sheetToEdit = ThisWorkbook.Sheets(sheetName)

Set clearArea = sheetToEdit.Range("AL100:CC900")
clearArea.Delete

sourceRangeAsString = "RentRoll"
Set dest = sheetToEdit.Range("AL100")
Call CopyAndPaste(Workbooks(aFile & ".xlsb"), sourceRangeAsString, dest)

sourceRangeAsString = "Underwriting"
Set dest = sheetToEdit.Range("AL300")
Call CopyAndPaste(Workbooks(aFile & ".xlsb"), sourceRangeAsString, dest)

sourceRangeAsString = "Projections"
Set dest = sheetToEdit.Range("AL400")
Call CopyAndPaste(Workbooks(aFile & ".xlsb"), sourceRangeAsString, dest)

sourceRangeAsString = "RolloverCalculations"
dest = sheetToEdit.Range("AL500")
Call CopyAndPaste(Workbooks(aFile & ".xlsb"), sourceRangeAsString, dest)

'Close the workbook now that we are done with it
Workbooks(aFile & ".xlsb").Close savechanges:=False
End Sub

Sub CopyAndPaste(sourceFile, sourceRangeAsString, dest)
    Set source = sourceFile.Names(sourceRangeAsString).RefersToRange
    source.Copy
    dest.PasteSpecial (xlPasteValues)
    source.Copy
    dest.PasteSpecial (xlPasteFormats)
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T00:03:26.487

你在`Set`这里缺少一个：

```
dest = sheetToEdit.Range("AL500") 
```

# c# - 用于 OData 访问任何数据源的 .net 包装器

> ID：11059438
> 
> 赞同：0
> 
> 时间：2012-06-15T23:37:56.257
> 
> 标签：c#, odata

我正在寻找 C# 中的 OData 包装器，它可以与任何 OData 数据源通信并将结果作为属性而不是原始 XML 返回。我查看了[http://odata.codeplex.com/](http://odata.codeplex.com/)，但它是围绕指向特定数据源并构建映射到它的代码的概念设计的。

我们需要创建代码，在运行时我们指向一个 OData 数据源并读取元数据，然后通过查询交互地调用它，然后使用返回的数据。（我也相信 Linq 对我们不起作用，因为我们有最终用户在我们连接后创建查询 - 无需编写代码和编译。）

外面有什么吗？

谢谢 - 戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T18:14:13.297

我假设您想使用任意 OData 服务作为客户端，对吗？为此，我建议使用 ODataLib (http://www.nuget.org/packages/Microsoft.Data.OData)。它是 OData 的读写器，仅此而已。因此，与 WCF 数据服务相比，它需要您提供更多代码，但它允许使用任意 OData 有效负载，而无需生成匹配类型。您可能还想先查看此博客：http: [//blogs.msdn.com/b/astoriateam/archive/2011/10/14/introducing-the-odata-library.aspx](http://blogs.msdn.com/b/astoriateam/archive/2011/10/14/introducing-the-odata-library.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T00:54:13.313

您可能必须为您要实现的目标编写自定义提供程序。

以下博客系列非常有帮助：

[http://blogs.msdn.com/b/alexj/archive/2010/01/07/data-service-providers-getting-started.aspx](http://blogs.msdn.com/b/alexj/archive/2010/01/07/data-service-providers-getting-started.aspx)

[http://blogs.msdn.com/b/vitek/archive/2010/02/25/data-services-expressions-part-1-intro.aspx](http://blogs.msdn.com/b/vitek/archive/2010/02/25/data-services-expressions-part-1-intro.aspx)

# jquery - 一次淡入多个 div

> ID：11059439
> 
> 赞同：0
> 
> 时间：2012-06-15T23:38:00.387
> 
> 标签：jquery

我已经设法编写了一些 jquery 随机淡入和淡出一组 div 一个接一个，但我想要做的是一次淡入/淡出多个 div。

这是我当前的js：

```
(function makeDiv(){

var ids = [1,2,3,4,5,6,7,8,9];
var imgid = ids[Math.floor(Math.random() * ids.length)];
var divsize = 120;

$newdiv = $('<div/>').css({
    'width':divsize+'px',
    'height':divsize+'px'
}).attr('id', 'img'+imgid+'');

var posx = (Math.random() * ($(document).width() - divsize)).toFixed();
var posy = (Math.random() * ($(document).height() - divsize)).toFixed();

$newdiv.css({
    'position':'absolute',
    'left':posx+'px',
    'top':posy+'px',
    'display':'none'
}).appendTo( 'body' ).fadeIn(500).delay(500).fadeOut(500, function(){
   $(this).remove();
   makeDiv(); 
}); 
})(); 
```

您可以在 www.vouchrs.com 上看到它的实际效果。

如何一次实现多个淡入/淡出？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:45:58.123

它会是这样的：

```
$(".something").click(function(){
   $(".divsToFadeInOrOut").each().fadeToggle();
}); 
```

我认为这应该可以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T23:41:13.227

您正在调用 makeDiv 完成淡入，此时延迟淡出链。您可以在没有所有链接的情况下在循环中执行“appendTo”，然后使用选择器并行调用该链。我建议向新的 div 添加一个类，以使编写选择器更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T00:54:10.883

你也可以做这样的事情

(函数 makeDiv(){

```
var ids = [1,2,3,4,5,6,7,8,9];

var imgid1 = ids[Math.floor(Math.random() * ids.length)];
var divsize = 120;
var imgid = ids[Math.floor(Math.random() * ids.length)];
var idP = '';

$newdiv = $('<div/>').css({
    'width':divsize+'px',
    'height':divsize+'px'
}).attr('id', 'img'+imgid+'');

 $newdiv1 = $('<div/>').css({
    'width':divsize+'px',
    'height':divsize+'px'
}).attr('id', 'img'+imgid1+'');

var posx = (Math.random() * ($(document).width() - divsize)).toFixed();
var posy = (Math.random() * ($(document).height() - divsize)).toFixed();

 var posx1 = (Math.random() * ($(document).width() - divsize)).toFixed();
var posy1 = (Math.random() * ($(document).height() - divsize)).toFixed();

$newdiv.css({
    'position':'absolute',
    'left':posx+'px',
    'top':posy+'px',
    'display':'none'
}).appendTo( 'body' ).fadeIn(500).delay(500).fadeOut(500, function(){
   $(this).remove();
   //makeDiv(); 
}); 

 $newdiv1.css({
    'position':'absolute',
    'left':posx1+'px',
    'top':posy1+'px',
    'display':'none'
}).appendTo( 'body' ).fadeIn(500).delay(500).fadeOut(500, function(){
   $(this).remove();
   makeDiv(); 
}); 
```

})();

您可以编写函数来生成多个 div，就像我给出的同时生成两个 div 的示例一样，我手动完成了此操作，但您可以创建一个生成多个 div 的函数，最后您可以调用 makediv() 函数。

# node.js - 在 Linux 上自动测试 nodejs

> ID：11059442
> 
> 赞同：0
> 
> 时间：2012-06-15T23:38:18.667
> 
> 标签：node.js, tdd, mocha.js

我希望我的 Mocha 测试在我保存时运行。到目前为止，我一直在为节点寻找类似自动测试的模块，但没有运气。我确实看到了一篇文章，描述了如何使用 Ruby 在 Mac 上设置文件观察程序，但我想知道节点是否可能有一些原生的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T00:02:18.840

文件观察器存在，但在 Node.JS 上不是那么可靠，仍然有很多变化并且有时不稳定（我会遇到一些错误结果），并且（最有问题的）对于您正在运行的操作系统没有相同的行为......

但如果你仍然真的想： [http ://nodejs.org/docs/latest/api/fs.html#fs_fs_watchfile_filename_options_listener](http://nodejs.org/docs/latest/api/fs.html#fs_fs_watchfile_filename_options_listener)

和更好的方法： [https ://github.com/coolaj86/node-inotify-plusplus](https://github.com/coolaj86/node-inotify-plusplus)

# google-app-engine - Google Apps Engine - 验证我拥有但当前不是由域注册者托管的域

> ID：11059447
> 
> 赞同：0
> 
> 时间：2012-06-15T23:39:08.347
> 
> 标签：google-app-engine, domain-name

我在这里问这个问题是因为我知道这是官方的 GAE 支持站点。

背景：我有一个网站 mysite.com，托管在 somehostingsite.net 上。最近，我将该网站移植到 GAE，mysite.appspot.com。这发生在 somehostingsite.net 的续订费到期时，所以我取消了 somehostingsite.net 帐户。我没有将我的域转移到另一个注册商。

问题：我想使用 Google Apps 设置我的域，这样我就可以拥有一个类似 myapp.mysite.com 的 URL。因此，验证我对域名所有权的验证过程的前提是 mysite 当前已启动并正在运行。我的现在不在。但是，我的域名在 OpenSRS 中列出，但它们不提供 DNS 支持。

主要问题：mysite.appspot.com 是免费的，这就是我将网站移植到它的原因。

鉴于我目前的情况，继续使用 GAE 设置我的域的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T08:49:37.073

“因此，验证我对域名所有权的验证过程的前提是 mysite 当前已启动并正在运行。”

不完全是：您只需要为您的域启动并运行 DNS，然后您可以创建 DNS TXT 记录来验证您的域。请参阅： http: [//support.google.com/a/bin/answer.py ?hl=en&answer=60216](http://support.google.com/a/bin/answer.py?hl=en&answer=60216)

因此，在我看来，您需要在某处设置（可配置的）DNS 托管。无论如何，您将需要它，因为您需要设置 CNAME 记录以便为您的域外的 App Engine 应用程序提供服务。

# java - 重新加载 JTree 时闪烁

> ID：11059448
> 
> 赞同：0
> 
> 时间：2012-06-15T23:39:30.943
> 
> 标签：java, swing, rendering, jtree, double-buffering

我正在制作一个`JTree`经常更新的模拟器。树中的节点都是`JProgressBars`.

我正在打电话`tree.treeModel.insertNodeInto(,,)`并`treeModel.reload()`更新树。问题是它会立即更新自己而无需等待`repaint()`电话。这会导致树闪烁。我尝试设置`setDoubleBuffered(true)`节点、树和它所在的容器，但没有任何变化。

这是我的代码：（类`File extends DefaultMutableTreeNode`）

```
public class FileTree extends JTree {

    DefaultTreeModel myTreeModel;

    FileTree(File root) {
        super(root);
        myTreeModel = (DefaultTreeModel) this.getModel();
        this.treeModel = myTreeModel;
        this.setCellRenderer(new ProgressBarCellRenderer());
        this.setEditable(true);
    }

    public void update(File file, File parent) {
        myTreeModel.insertNodeInto(file, parent, parent.getChildCount());
        myTreeModel.reload();
    }

    class ProgressBarCellRenderer extends DefaultTreeCellRenderer {
        public Component getTreeCellRendererComponent(JTree tree, Object value,
                boolean selected, boolean expanded, boolean leaf, int row, boolean hasFocus) {
            File file = (File) value;
            JProgressBar progressBar;
            progressBar = new JProgressBar(0, file.length);
            progressBar.setValue(file.completed);
            progressBar.setPreferredSize(new Dimension((int)(Math.log(file.size)*50),10));
            return progressBar;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T00:33:01.627

我怀疑[混合重质和轻质成分](http://java.sun.com/products/jfc/tsc/articles/mixing/)会导致闪烁。通过单击圆圈或调整封闭框架的大小，可以在此[示例中看到效果。](https://stackoverflow.com/a/3538251/230513)为了获得更好的指导，请编辑您的问题以包含一个显示您描述的问题的[sscce](http://sscce.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T00:37:50.943

我修好了它。我刚变

```
myTreeModel.insertNodeInto(file, parent, parent.getChildCount()); 
```

到

```
parent.add(file); 
```

我不知道为什么它现在有效。但确实如此。任何意见表示赞赏！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T09:34:20.337

我在使用自定义渲染器时遇到了同样的问题。

只需在内部进行更新`SwingUtilities.invokeLater`

```
SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            myTreeModel.insertNodeInto(file, parent, parent.getChildCount());
        } 
```

# css - CSS3 webkit 模糊重影问题

> ID：11059453
> 
> 赞同：2
> 
> 时间：2012-06-15T23:40:14.897
> 
> 标签：css, webkit

我有一个 UI，其中导航位于一组模糊的图像上（使用 webkit 模糊进行模糊），每当导航移动时，就会发生这种奇怪的几乎是重影的效果。在您单击另一个元素后，重影也会消失。

关于如何解决这个问题的任何建议？

在 Mac 雪豹上：

*   铬 19.0.1084.56
*   Safari 所有这些，包括 6 个测试版

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T23:48:59.403

您似乎遇到了与浏览器/引擎相关的问题。机会是：除了不使用模糊等之外，您无法自己解决它。

并不是说这个错误可能不会影响所有用户，具体取决于他们使用的 webkit 版本。

希望这个问题会在未来的版本中得到纠正。也许尝试联系 webkit 的家伙，但这就是你所能做的（除了提交补丁）。

# c# - (C#) 如何读取文件夹中的所有文件以查找特定行？

> ID：11059456
> 
> 赞同：2
> 
> 时间：2012-06-15T23:40:23.550
> 
> 标签：c#

我对 C# 很陌生，所以请耐心等待。我要做的是读取文件夹中的所有文件，找到特定的行（在同一个文件中可能出现多次）并将该输出显示在屏幕上。

如果有人能指出我需要使用哪些方法的方向，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T23:45:44.577

从...开始

```
const string lineToFind = "blah-blah";
var fileNames = Directory.GetFiles(@"C:\path\here");
foreach (var fileName in fileNames)
{   
    int line = 1;     
    using (var reader = new StreamReader(fileName))
    {
         // read file line by line 
         string lineRead;
         while ((lineRead = reader.ReadLine()) != null)
         {
             if (lineRead == lineToFind)
             {
                 Console.WriteLine("File {0}, line: {1}", fileName, line);
             }
             line++;
         }
    }
} 
```

正如尼克在下面指出的那样，您可以使用任务库进行并行搜索，只需将 'foreach' 替换为 Parallel.Foreach(filesNames, file=> {..});

Directory.GetFiles：http: [//msdn.microsoft.com/en-us/library/07wt70x2](http://msdn.microsoft.com/en-us/library/07wt70x2)

StreamReader：http: [//msdn.microsoft.com/en-us/library/f2ke0fzy.aspx](http://msdn.microsoft.com/en-us/library/f2ke0fzy.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T00:02:14.410

你想在屏幕上得到什么*输出？*

如果要查找具有给定行的第一个文件，可以使用以下短代码：

```
var firstMatchFilePath = Directory.GetFiles(@"C:\Temp", "*.txt")
                        .FirstOrDefault(fn => File.ReadLines(fn)
                                                  .Any(l => l == lineToFind));
if (firstMatchFilePath != null)
    MessageBox.Show(firstMatchFilePath); 
```

我使用[`Directory.GetFiles`](http://msdn.microsoft.com/en-us/library/wz42302f.aspx)搜索模式来查找目录中的所有文本文件。我使用了 LINQ 扩展方法[`FirstOrDefault`](http://msdn.microsoft.com/en-us/library/bb340482.aspx)并[`Any`](http://msdn.microsoft.com/en-us/library/bb534972.aspx)找到了第一个具有给定行的文件。

# html - 无法使 a 上的填充无效在 IE 8 中，我遇到了 IE8 的问题。我有一个选择框来选择电容单位 pF、nF 和 mF。现在，即使我设置了 padding:0，文本也有点下降，它会剪切文本。所以“pF”选项实际上看起来像“nF”，这是不可接受的。我想知道是否有任何修复。除了将填充设置为 0 之外，我想不出其他任何东西，这再次不起作用。设置小的 line-height 也无济于事。CSS：选择{宽度：40px；高度：16px；填充：0px；字体：8pt Helvetica；} 有任何想法吗？

> ID：11059458
> 
> 赞同：0
> 
> 时间：2012-06-15T23:40:51.873
> 
> 标签：html, css, internet-explorer-8, html-select

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T23:44:47.273

我不认为这是填充导致问题，这可能与行高有关

因此，尝试将行高设置为框的高度减去边框顶部和边框底部（从外观上看，该图像总共似乎是 4px...）高度可能约为 12px...

```
line-height: 12px; 
```

如果这不能解决它，您将不得不在[jsfiddle](http://jsfiddle.net/)中重现它，以便我们可以修改代码以将实际工作示例返回给您。

请注意，表单元素在样式方面是出了名的不可靠，而且你无法摆脱一切。`display: block`可以创造奇迹，但在这种情况下无济于事。

这似乎是`<select>`标签样式的欢呼限制......真的在所有浏览器中。

您可能想检查这个问题，这似乎并非完全无关。

[我想在选择框中垂直对齐文本](https://stackoverflow.com/questions/5439782/i-want-to-vertical-align-text-in-select-box)

# node.js - 将 Cradle 与 Express.js（CouchDB、Node.js）一起使用的最佳方式

> ID：11059473
> 
> 赞同：0
> 
> 时间：2012-06-15T23:42:37.520
> 
> 标签：node.js, couchdb, express, cradle

我正在使用 express.js 构建我的网站（[http://tedxgramercy.jit.su](http://tedxgramercy.jit.su)），到目前为止，我一直在节点中使用 http.request 方法来访问沙发，这很酷。我学到了很多关于 http、couch 和 node 如何工作的知识，这太棒了。无论如何，我现在正在考虑搬到摇篮（如果你对此有强烈的意见，请告诉我），我想知道设置它的“正确”方式。

我是不是该...

require() 摇篮并在每条单独的路由中与我的数据库建立新连接？

创建一次我的数据库连接，然后通过 require() 在每条路由中连接连接来传递该连接？（如果是这样，我该怎么做？）

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:12:38.427

鉴于您应该继续使用请求的选项。

# ruby-on-rails - Rails 3 - 将某个正则表达式的每个字符串制作成带有内容的 javascript onmouseover

> ID：11059475
> 
> 赞同：1
> 
> 时间：2012-06-15T23:42:43.880
> 
> 标签：ruby-on-rails, regex, ruby-on-rails-3, string, helper

在我的应用程序中，我有一个文章和评论模型。我实现了一个回复功能，这样用户就可以通过简单地将他们想要引用的评论的 id 放在评论表单中来回复另一条评论，如下所示：#26（引用 id 为 26 的评论）。这一切都很好，使用正则表达式并回复 user_id attr:
extract from my comments_controller create action：

```
 if @comment.content.match(/(#([1-9]+))\s/)
  iteration_fragment = $2
  iteration_id = %Q{#{ iteration_fragment }}
  if @replied_to_comment = @article.comments.where(:iteration_id => iteration_id).first
    @comment.in_reply_to_user_id = @replied_to_comment.user_id
  end
  end 
```

现在，不创建新模型，我只想在我的评论系统顶部放置一个“html帮助层”，这样“#33”等这些片段会自动转换为“#33”onmouseover链接，显示评论 33 onmouseover 的内容。所以我不想要bb代码引用，而是要真正的极简主义。
有人知道，我在寻找什么以及应该如何处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T01:54:19.633

自动这个词让我觉得你能做到这一点的唯一方法是使用 jQuery..

```
$("input#your_selected_input").keyup(function(){
  $this = $(this);
  if ($this.val().match(/(#([1-9]+))\s/) {
    $matches = $this.val().match(/(#([1-9]+))\s/
    $this.parent().after($this.html().replace( $matches[0], $("<a/>").html()));
  }
}); 
```

那是自动的部分。。

要使用 Rails 中的内容加载页面，应该是这样的：

在您的评论模型中

```
def special_sauce_text
   matches = content.match(/(#([1-9]+))\s/)
   magic_sauce_links = []
   new_content = content
   if matches.present?
     for match in matches do
       magic_sauce_link << link_to(match, match, :class => 'your-special-stuff')
       new_content.gsub(match, magic_sauce_link)
     end
   end
   return new_content
end 
```

然后你可以自由地应用它：

```
Comment.special_sauce_text 
```

# actionscript-3 - 从班级的舞台上调用影片剪辑

> ID：11059478
> 
> 赞同：0
> 
> 时间：2012-06-15T23:43:09.443
> 
> 标签：actionscript-3, class

我正在尝试调用已经在舞台上的名为 mcMain 的影片剪辑。我在课堂上调用它，并且尝试在谷歌上搜索一大堆可能的解决方案，但似乎都没有奏效。我试过 stage.mcMain、this.stage.mcMain、MovieClip(root).mcMain，但似乎没有任何效果。有人有什么想法吗？我什至没有收到错误消息。只是什么都没有发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T00:25:34.283

我不认为您的文档时间线的根源实际上是舞台。但是，您不应该这样做。如果你称之为“类”，它是一个 DisplayObject，它不应该知道它自己范围之外的任何东西（除非你已经在它上面公开了允许传递此信息的属性或方法。如果类是一个数据类，它根本不应该知道视图。如果它是一个控制器类，你需要传递一个对它的引用。

但是，鉴于您说您尝试过的代码，我猜您的 Class 实例是某种 DisplayObject。你应该做的是从你的类中发送一个冒泡事件，然后在你的主 Document 类中，监听该事件。在事件处理函数中，对 mcMain 实例执行任何您需要执行的操作，例如添加番茄酱。这应该可以正常工作，因为您的主文档类可以从显示列表中的任何位置接收事件，而 mcMain 是它自己的实例。

# java - Oracle Berkeley DB Java 版中的重复键

> ID：11059481
> 
> 赞同：0
> 
> 时间：2012-06-15T23:44:17.377
> 
> 标签：java, database, oracle, berkeley-db-je

我正在使用带有键/值格式的表的 Oracle Berkeley DB Java 版。我正在尝试插入重复的键，但不断收到 SecondaryIntegrityException。根据 Oracle，如果 setSortedDuplicates() 设置为 true，则允许重复。这在我的情况下不起作用。下面是一些 key=bob, value=smith 的代码。我第一次运行它，它按预期运行。如果我第二次只更改 value=johnson 运行它，我会得到 SecondaryIntegrityException。有什么我做错了吗？谢谢。

```
String key = "bob";
String value = "smith";

EnvironmentConfig envConfig = new EnvironmentConfig();
envConfig.setAllowCreate(true);
envConfig.setTransactional(false);
Environment myDBenvironment = new Environment(new File(filePath), envConfig);

DatabaseConfig dbConfig = new DatabaseConfig();
dbConfig.setAllowCreate(true);
dbConfig.setTransactional(false);
Database myDatabase = myDBenvironment.openDatabase(null, dbname,
        dbConfig);

// create secondary database
SecondaryConfig mySecConfig = new SecondaryConfig();
mySecConfig.setAllowCreate(true);
mySecConfig.setSortedDuplicates(true);
mySecConfig.setTransactional(false);
mySecConfig.setKeyCreator(new SecondKeyCreator());
SecondaryDatabase mySecondaryDatabase = myDBenvironment
.openSecondaryDatabase(null, secdbname, myDatabase,
        mySecConfig);

DatabaseEntry myKey = new DatabaseEntry(key.getBytes("UTF-8"));

Record mydata = new Record();
mydata.setobjectVal(value);
DatabaseEntry myrecord = new DatabaseEntry();
new RecordTupleBinding().objectToEntry(mydata, myrecord);
myDatabase.put(null, myKey, myrecord);

mySecondaryDatabase.close();
myDatabase.close();
myDBenvironment.close();

public class SecondKeyCreator implements SecondaryKeyCreator{   

@Override
public boolean createSecondaryKey(SecondaryDatabase arg0,
        DatabaseEntry key, DatabaseEntry data, DatabaseEntry secondKey) {
    RecordTupleBinding binding = new RecordTupleBinding();
    Record record = (Record) binding.entryToObject(data);

    try {
        secondKey.setData(data.getData());
    } catch (Exception e) {
        e.printStackTrace();
    }

    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T17:47:48.537

需要并且*需要*辅助数据库以允许重复。以上工作，如果

```
secondKey.setData(data.getData()); 
```

改为

```
secondKey.setData(((String)record.getobjectVal()).getBytes()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T23:57:09.300

尽管我不是该主题的专家，但让我尝试为您提供帮助。

根据 Oracle 文档，“如果一个主数据库要与一个或多个辅助数据库相关联，它可能不会被配置为重复”。你有来自这个数据库的关联吗？如果是这样，这可能是原因。

我希望它有所帮助。

# mysql - MySQL Web 应用程序的良好安全性：Root？不是根？

> ID：11059493
> 
> 赞同：4
> 
> 时间：2012-06-15T23:45:15.177
> 
> 标签：mysql, security

假设您正在使用 Ruby 和 MySQL 编写一个简单的数据库 Web 应用程序。对数据库的访问由 Ruby 代码控制。Ruby 代码用来访问数据的用户名是数据库中唯一的常规用户。该用户成为“root”是否有意义？或者为应用程序创建第二个用户是否有任何额外的安全性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T23:57:30.323

很简单，将 root 视为主要用户，他可以做任何事情（默认情况下）。

如果他想转储整个数据库，他可以，如果他想创建一些数据来创建（例如）假账户以越过您的银行系统，他可以。因此，如果您的代码不够安全（通常这种情况很常见），那么您就会遇到严重的安全问题。

通常，“一个基本的”安全性（真正的基本）应该是这样的：创建一个简单的用户，赋予他（使用 GRANTS）对特定数据库进行 SELECT、INSERT、UPDATE 和 DELETE 的权利。

创建另一个可以选择和锁定表和显示视图以执行转储（数据库保存）的用户。

在更“复杂”的系统上，您应该根据他们应该访问的内容创建许多用户，原因很简单：如果有人获得了 SQL 注入访问权限，如果用户只能访问单个视图（例如），而不是整个数据库，这是一个安全问题，但不是最糟糕的问题......视图也经常用于那个......

最后不要忘记触发器（例如日志表），禁用表上的插入或更新或删除，对于每个人（当​​然可以销毁触发器的人除外）： [使用触发器来停止插入或更新](https://stackoverflow.com/questions/10168408/use-a-trigger-to-stop-an-insert-or-update)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T14:56:37.260

除了编辑或删除数据库中的所有数据外，root 用户还具有[FILE](http://docs.oracle.com/cd/E17952_01/refman-5.5-en/privileges-provided.html#priv_file)权限，可以访问：

*   `LOAD DATA INFILE`可用于读取服务器机器上的任何文件。
*   `LOAD DATA LOCAL INFILE`它可以读取客户端机器（网络服务器机器）上的文件。
*   `SELECT ... INTO OUTFILE`它可以在服务器机器上创建文件。

这就是为什么你的应用程序应该只拥有它需要的权限，这也是你的 MySQL 服务器守护程序应该作为服务器机器上的非特权用户运行的原因。

另请参阅手册中的[一般安全问题](http://docs.oracle.com/cd/E17952_01/refman-5.5-en/general-security-issues.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T23:48:06.190

如果每个人/事物都是 root，您将失去可审计性，您将失去限制应用程序阻止攻击的能力（即，您的应用程序不需要这部分敏感信息，将其与用户隔离开来）。如果有人破坏了该应用程序，您可以暂停该帐户等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T23:48:22.220

我*不会*让用户成为“root”。

我将为该应用程序创建一个单独的用户名和密码，并仅授予它完成其工作所需的权限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T23:50:56.180

我会创建一个新用户，只给它所需的权限（SELECT、UPDATE、INSERT 和 DELETE 通常可以解决问题）。像这样，您限制了以非预期方式操作代码的能力。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-16T02:15:38.393

“root”，或者一般来说，具有超级用户权限的用户，可以更改密码、删除帐户，从而阻止您访问自己的数据库。

如果您的服务器仅托管一个应用程序，那么您可能不需要创建多个特权较低的帐户。但是，通常的做法是为每个应用程序创建至少一个用户，这样如果一个应用程序受到威胁，其他应用程序（和底层数据）可能不会受到威胁。

# file - 视频游戏模拟器如何工作？

> ID：11059497
> 
> 赞同：5
> 
> 时间：2012-06-15T23:46:33.287
> 
> 标签：file, operating-system, emulation, game-engine, rom

我很好奇模拟器是如何工作的。它们是用什么写的？它是否必须模拟图形？人们如何将游戏上传为 rom？他们是否模拟系统操作系统？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-16T00:40:15.450

有几种仿真技术。第一种技术称为低级仿真。在这种情况下，模拟器几乎可以用任何语言编写，但是由于大量的二进制数据操作，C 和 C++ 很适合这样的任务，尽管有很多其他语言能够提供这样的任务。

通过低级仿真，该程序模拟原始系统的确切硬件。例如，原始 NES 具有来自官方文档和逆向工程信息的明确定义的硬件。我们确切地知道其基于 6502 的 CPU 以及图形、声音芯片等的行为方式。通过低级仿真，原始游戏的确切二进制数据在软件中以与原始硬件解释数据的方式完全相同的方式进行解释。这包括为 6502 指令集编写的原始机器代码、图形数据、IO，一切。图形和声音硬件是通过调用现代图形和声音 API 将原始硬件指令转换为现代硬件来模拟的。

这种技术是最准确和最成功的，但对于复杂的机器来说也是最慢的，有时也是最难实现的。

第二种方法称为静态重新编译。分析原始系统的原始机器代码，然后为现代计算机重新编译。这种技术产生最快的仿真，但成功率非常低。使用这种技术的模拟器最多只能支持一些演示和游戏。原因是原始软件所期望的运行时环境通常会以在编译时很难或不可能知道的方式发生变化。

最后一种技术称为动态重新编译。在这种技术中，模拟器分析代码并在运行时重新编译它。这允许编译器根据程序运行时可用的信息将运行时环境调整为原始软件所期望的。

大多数形式的重新编译技术都涉及一种称为高级仿真的技术。这是观察到大多数代码只是编译为调用操作系统或库 C 例程的代码。代码被重新编译到主机上，对原始操作系统和库的调用，例如图形和声音的调用，被本地重新实现，而不是被模拟。例如，如果有一个在屏幕上绘制三角形的调用，则仿真器可以简单地直接执行该操作，而不必仿真将绘制命令传递给原始图形硬件的确切低级实现。这就是几乎所有 Nintendo 64 和 PlayStation 模拟器的工作方式。

原来的操作系统只是有时需要重新实现。例如，Nintendo 64 实际上没有操作系统，每个卡带本身就是它自己的操作系统。然而，仿真器识别所有 ROM 实现的通用例程，并动态捕获和重新实现它们。然而，PlayStation 有一个专有的 BIOS，用于设置基本硬件和从 CD 读取游戏。仿真器必须拥有此 BIOS 的副本或尝试重新实现其功能。

我们知道使用动态重新编译的模拟器已经在内部实现，例如 Xbox 360，以便玩原始的 Xbox 游戏。对于外部开发人员来说，这样的任务非常困难，但对于拥有所有原始和专有文档以及创建和优化这样一个模拟器的人力的微软来说更简单。在这种情况下，不需要模拟整个原始 Xbox 操作系统，但是原始游戏对原始操作系统的调用必须转换为本地操作系统。Xbox One 模拟 Xbox 360 的技术是相似的，除了为了在模拟中与 Xbox 360 游戏具有更大程度的兼容性，他们选择在其模拟器中运行原始 Xbox 360 操作系统。

游戏卡带中的游戏通过专为 ROM 转储而设计的硬件转移到计算机上。旧机器上的 ROM 实际上以非常简单的方式运行。它们有地址输入线和数据输出线。可以使用微控制器构建设备以转储这些 ROM，然后使用串行、USB 或其他方法将它们传输到计算机。一些 ROM 甚至可以通过计算机的可编程并行端口读取，这在现代 PC 中很大程度上是缺失的，但存在用于它们的 USB 适配器。

由于大量动态代码生成，使用重新编译技术的仿真器几乎只使用 C 或 C++，但是任何能够在运行时进行系统编程和低级代码接口的语言都能够做到这一点。

# java - 对于 Jersey/JAXB，是否可以将相同的 POJO 用作“父”和“子”，但在用作“子”时删除某些属性？

> ID：11059499
> 
> 赞同：3
> 
> 时间：2012-06-15T23:46:48.697
> 
> 标签：java, json, jaxb, jersey, jax-rs

我有两个 Java 对象，Company 和 Employee。它们都使用 Jersey/JAXB 注释进行注释，因此我可以调用 RESTful 服务来 HTTP GET 它们。从本质上讲，Company 是 Employee 的“父”对象，如果为 Company 执行 GET，我想做的只是在 JSON 响应中为员工的子列表提供属性的子集。但是，在为 Employee 本身执行 GET 时，我仍然想返回 Employee 的所有属性。

我一直在努力解决这个问题，但我不太确定该怎么做。它看起来很基本，但我无法在网上找到任何示例（也许我在谷歌搜索错误的东西）。

公司.java

```
@XmlRootElement
public class Company {
  private String companyName;
  private String companyType;
  private List<Employee> employees = new ArrayList<Employee>();

  // getters and setters with @XmlElement on each attribute 
  //...etc...
  @XmlElement
  public List<Employee> getEmployees() {
    return employees;
  }
  //...etc...
} 
```

雇员.java

```
@XmlRootElement
public class Employee{
  private String employeeId;
  private String employeeName;
  private String employeeType;

  // getters and setters with @XmlElement on each attribute
  //...etc...
  @XmlElement
  public String getEmployeeId() {
    return employeeId;
  }
  //...etc...
} 
```

现在，我有一个 RESTful 服务来对 Company 对象和 Employee 对象执行 HTTP GET：

```
public class infoService{
  @GET
  @Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
  public Response getCompany(String Id) {
  //....
  }

  @GET
  @Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
  public Response getEmployee(String Id) {
  //....
  }
} 
```

为了获取 Employee 对象，所有属性都按预期返回。所以它看起来像这样：

```
{
  "employeeId": "1A2-B35",
  "employeeName": "John Doe",
  "employeeType": "Engineer"
} 
```

为 Company 对象执行 GET 时，我希望 Company 对象下的员工列表仅返回几个指定的 Employee 属性（即仅员工姓名和员工 ID）。因此，我想要的 JSON 响应看起来像这样：

```
{
  "companyName": "Acme",
  "companyType": "Services",
  "employees": [
    {
      "employeeId": "123_ABC",
      "employeeName": "John Doe"
    },
    {
      "employeeId": "456_XYZ",
      "employeeName": "Jane Doe"
    }
  ]
} 
```

但是，当然，它会返回员工列表中的所有 Employee 属性，如下所示：

```
{
  "companyName": "Acme",
  "companyType": "Services",
  "employees": [
    {
      "employeeId": "123_ABC",
      "employeeName": "John Doe",
      "employeeType": "Engineer"
    },
    {
      "employeeId": "456_XYZ",
      "employeeName": "Jane Doe",
      "employeeType": "Executive"
    }
  ]
} 
```

是否可以仅使用注释来做到这一点？或者有没有其他方法可以创建我自己的 JSON 对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T10:12:36.853

您可以使用 an`XmlAdapter`来解决此用例：

**员工适配器**

这`XmlAdapter`会将完全填充的内容转换`Employee`为另一个实例，其中仅包含您希望编组为填充 XML 的字段。由于这是一个副本，它不会影响原始对象模型。

```
package forum11059499;

import javax.xml.bind.annotation.adapters.XmlAdapter;

public class EmployeeAdapter extends XmlAdapter<Employee, Employee>{

    @Override
    public Employee marshal(Employee employee) throws Exception {
        Employee partialEmployee = new Employee();
        partialEmployee.setEmployeeId(employee.getEmployeeId());
        partialEmployee.setEmployeeName(employee.getEmployeeName());
        return partialEmployee;
    }

    @Override
    public Employee unmarshal(Employee employee) throws Exception {
        return employee;
    }

} 
```

**公司**

`@XmlJavaTypeAdapter`注释用于指定`XmlAdapter`所需的属性。

```
package forum11059499;

import java.util.*;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlRootElement
public class Company {
    private String companyName;
    private String companyType;
    private List<Employee> employees = new ArrayList<Employee>();

    // getters and setters with @XmlElement on each attribute
    // ...etc...
    @XmlElement
    @XmlJavaTypeAdapter(EmployeeAdapter.class)
    public List<Employee> getEmployees() {
        return employees;
    }
    // ...etc...
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/search/label/XmlAdapter](http://blog.bdoughan.com/search/label/XmlAdapter)
*   [http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html](http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html)

* * *

我注意到您的代码中有以下注释：

> // 每个属性上带有@XmlElement 的getter 和setter

因为 JAXB (JSR-222) 实现是按异常配置的，所以您只需要在需要默认 XML 表示的位置添加注释。这意味着您可以删除模型中的一些注释：

*   [http://wiki.eclipse.org/EclipseLink/Examples/MOXy/GettingStarted/TheBasics](http://wiki.eclipse.org/EclipseLink/Examples/MOXy/GettingStarted/TheBasics)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T23:52:57.513

我已经用接口做到了这一点。创建一个 IEmployee 和 IEmployeeLight 接口。

IEmployeeLight 具有基础知识，IEmployee 对其进行了扩展并添加了完整的数据。您可以使集合返回 IEmployeeLight 类型。适当地注释两个接口。您可能需要在服务定义上使用 XmlSeeAlso，因为 JAXB 不能绑定到接口，除非它有实现提示。

抱歉，如果这还不够详细，这是一个复杂的话题，没有白板很难做到公正。

请注意，我并不是说这个解决方案是最佳的，只是对我们有用。

我们的用例在 DTO、JPA 实体、版本控制等方面更加复杂。

# c# - 在 C#/WPF 中存储对象的属性

> ID：11059500
> 
> 赞同：1
> 
> 时间：2012-06-15T23:47:03.367
> 
> 标签：c#, .net, wpf, properties

我允许用户从工具箱中拖放一些对象，当然每个对象`object`都有一个唯一的 ID。一旦使用了对象，比如说放在 a`grid`或上`canvas`，我需要显示它的属性，所以我需要一个对象数组，其中每个对象都可以保存自己的属性。

你能给我一些建议和指导，告诉我如何实现一个类来处理多个对象，而每个对象可以保留 10 个属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:03:13.477

最好的解决方案是使用`PropertyGrid`控件；您的应用程序看起来类似于 Visual Studio，您的实现将与此类似。

看看这个 SO question`PropertyGrid`你有可用的选项 - [是否有我可以在我的 WPF 应用程序中使用的属性对话框控件？](https://stackoverflow.com/questions/3800416/is-there-a-property-dialog-control-that-i-can-use-in-my-wpf-app/3801711#3801711)

现在您可以为每个控件定义一个类并为该控件声明正常的 CLR 属性；您不想在 PropertyGrid 中显示的属性可以用[BrowsableAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.browsableattribute.aspx)进行标记， PropertyGrid 将遵循这一点。

如果您想更好地控制显示的属性，您可以创建自己的[自定义](http://msdn.microsoft.com/en-us/library/z0w1kczw%28v=vs.80%29.aspx) [属性](http://msdn.microsoft.com/en-us/library/aa288454%28v=vs.71%29.aspx)并修改 PropertyGrid 实现以使用该属性并显示标有该属性的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T13:04:59.437

> 你能给我一些建议和指导，告诉我如何实现一个类来处理多个对象，而每个对象可以保留 10 个属性吗？

您无需实现这样的类。我处理这个问题的方法是为工具箱中的所有对象（`ToolboxItem`例如）拥有一个公共基类，它只公开工具箱中所有项目共有的属性和功能。

```
public abstract class ToolboxItem
{
    public string Name { get; set; }
    public Point Position { get; set; }
} 
```

然后，您可以从此类 EG`TextToolboxItem`和`RectangleToolboxItem`（或任何您想要的）派生您的特定项目。然后，派生类可以只公开它们需要的属性。

```
public class TextToolboxItem : ToolboxItem
{
    public string Text { get; set; }
}

public class RectangleToolboxItem : ToolboxItem
{
    public Rect Bounds { get; set; }
} 
```

要存储这些，您可以使用通用集合，例如：

```
ObservableCollection<ToolboxItem> items = new ObservableCollection<ToolboxItems>(); 
```

只要项目派生自`ToolboxItem`它们都可以保存在单个集合中，并且各个属性都可以使用 WPF 的数据绑定功能绑定到。

然后，您可以通过以下方式创建和公开数据：

```
public partial class MainWindow : Window
{
    private ObservableCollection<ToolboxItem> items;

    public MainWindow()
    {
        InitializeComponent();
        this.DataContext = this;

        items = new ObservableCollection<ToolboxItem>
        {
            new TextToolboxItem { Name = "primaryText", 
                                  Text = "Hello world", 
                                  Position = new Point(40, 130) },
            new TextToolboxItem { Name = "secondaryText", 
                                  Text = "Hello world (again)", 
                                  Position = new Point(200, 30) },
            new RectangleToolboxItem { Position = new Point(50,300), 
                                       Name = "Rect1", 
                                       Bounds = new Rect(0, 0, 150, 85) },
        };
    }

    public ObservableCollection<ToolboxItem> Items { get { return items; } }
} 
```

要在用户界面中显示此信息，我将执行以下操作：

*   使用网格将视图分成两部分。第一个是显示所选项目属性的位置，第二个显示“设计表面”
*   使用 a`ContentPresenter`显示**所选**项目的属性。
*   将 a`ListBox`与自定义一起使用`ItemsPanel`并将`ItemContainerStyle`您的项目“绘制”到设计表面上。
*   使用 a`DataTemplate`告诉 WPF 如何在“属性网格”和“设计表面”中呈现每个项目（[这篇](https://stackoverflow.com/a/6114865/577417)文章描述了如何`DataTemplate`为不同的对象使用不同的）。

实现这一点所需的 xaml 如下所示：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:this="clr-namespace:WpfApplication1"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="3*" />
        <ColumnDefinition Width="7*" />
    </Grid.ColumnDefinitions>

    <ContentPresenter Content="{Binding ElementName=listBox, Path=SelectedItem}"
                      Margin="5">
        <ContentPresenter.Resources>
            <DataTemplate DataType="{x:Type this:TextToolboxItem}">
                <StackPanel>
                    <TextBlock Text="{Binding Name}"/>
                    <TextBlock Text="{Binding Position}"/>
                    <TextBlock Text="{Binding Text}"/>
                </StackPanel>
            </DataTemplate>
            <DataTemplate DataType="{x:Type this:RectangleToolboxItem}">
                <StackPanel>
                    <TextBlock Text="{Binding Name}"/>
                    <TextBlock Text="{Binding Position}"/>
                    <TextBlock Text="{Binding Bounds}"/>
                </StackPanel>
            </DataTemplate>
        </ContentPresenter.Resources>
    </ContentPresenter>

    <ListBox x:Name="listBox" Grid.Column="1"
             Margin="5" ItemsSource="{Binding Items}">
        <ListBox.Resources>
            <DataTemplate DataType="{x:Type this:TextToolboxItem}">
                <TextBox Text="{Binding Text}"
                         Margin="10"/>
            </DataTemplate>
            <DataTemplate DataType="{x:Type this:RectangleToolboxItem}">
                <Rectangle Width="{Binding Bounds.Width}"
                           Height="{Binding Bounds.Height}"
                           Stroke="DarkRed" Fill="Pink"/>
            </DataTemplate>
        </ListBox.Resources>

        <ListBox.ItemContainerStyle>
            <Style>
                <Setter Property="Canvas.Left" Value="{Binding Position.X}"/>
                <Setter Property="Canvas.Top" Value="{Binding Position.Y}"/>
            </Style>
        </ListBox.ItemContainerStyle>

        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <Canvas />
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
    </ListBox>

</Grid> 
```

最终结果如下所示：

![在此处输入图像描述](../Images/ddd23229e66763ab700efbec7ddf9f10.png)

请注意，所选项目的属性显示在窗口的左侧部分。

现在这个解决方案目前非常粗糙，但确实为您提供了进一步开发的起点。改进的想法包括：

*   将代码重构到 viewModel 中，使其符合 MVVM。
*   处理“设计表面”上项目的拖放。
*   更改属性网格的“ContentPresenter”，为您显示和编辑所选对象的属性提供更丰富的支持。

# monodevelop - 不能在 MonoDevelop 中使用 //TODO 标志（OS X 版本）

> ID：11059505
> 
> 赞同：2
> 
> 时间：2012-06-15T23:47:44.750
> 
> 标签：monodevelop, todo

我在使用`//TODO`标志时遇到问题。当我`//TODO`在我的代码中添加注释时，它不会在任务列表中显示相应的任务。

有没有人遇到过同样的问题？如果是这样，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T01:46:25.150

这是 MonoDevelop 3.0 中的回归。它在目前处于测试阶段的 MonoDevelop 3.0.3 中得到修复。

# php - Facebook-php-sdk “会话已在 unix 时间过期”，带有 offline_access

> ID：11059511
> 
> 赞同：0
> 
> 时间：2012-06-15T23:48:50.323
> 
> 标签：php, facebook, facebook-php-sdk

我想向人们的朋友发布墙帖（离线） 我获得了墙帖和离线访问权限。但是当我尝试离线墙贴时，大多数用户都有错误

> “致命错误：未捕获的 OAuthException：验证访问令牌时出错：会话已在 unix 时间 1332190800 过期。当前的 unix 时间为 1339803350。在 /home/ 中抛出......”

我认为具有离线访问权限的访问令牌永不过期？

如果它已过期，我如何在不接触人的情况下获取新的访问令牌（离线）

我用了这段代码

```
$post =  array(
        'access_token' => "ACCESSTOKEN",
        'message' => test",
        'link'          =>  'http://apps.facebook.com/xx',
        'description'   =>  'test'
         );

            $result = $facebook->api("/FRIENDS_ID/feed/",'post', $post); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T01:32:02.233

Facebook`offline_access`权限已于上个月弃用。此功能计划于 7 月 5 日移除。

新的工作流程要求您获得一个长期访问令牌，该令牌必须每 60 天更新一次。这里有更多关于这个的信息：[https ://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)

# php - 使用 php 创建 API 时的 RESTful API 设计模式

> ID：11059513
> 
> 赞同：4
> 
> 时间：2012-06-15T23:49:44.483
> 
> 标签：php, web-services, model-view-controller, jakarta-ee, restful-architecture

我正在用 php 开发 RESTful。目前我已经开始使用 MVC 设计模式进行编码。视图文件在其中充当接口。一个不显示任何图形用户界面但具有所有请求处理逻辑的界面。

现在，我的问题是我编码的方式是正确的还是有更好的方法在 php 中创建 RESTful api？

* * *

我的灵感来自于 JavaEE 应用模型。其中我们有实体类作为模型，Java bean 作为控制器，远程接口是从客户端调用的方法列表（一种视图）。

* * *

我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:38:48.943

在基于 PHP 的 MVC 框架中构建 RESTful API 的一个很好的例子可以在[http://www.chrisdanielson.com/2009/09/02/creating-a-php-rest-api-using-the-zend-找到框架/](http://www.chrisdanielson.com/2009/09/02/creating-a-php-rest-api-using-the-zend-framework/) .

这个例子扩展了 Zend Framework 中一个名为 Zend_Rest_Controller 的类，它简化了这个过程。您可以查看[源代码](http://framework.zend.com/download)以了解它们是如何做到的，以及它是否为您提供了如何制作自己的实现的想法。

不过，要回答您的问题，您应该将控制器用作接口。因此，如果您向 myapp.com/comment（comment 是控制器）发送 POST 请求，它就知道您正在尝试添加新评论。如果您向同一个 URL 发送 GET 请求，它知道您想要所有评论，如果您向 myapp.com/comment/4 发送 GET 请求，它知道您想要获取 ID 为 4 的评论。您的视图应该与您的 API 的内部功能无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T00:59:51.313

您可以使用任何现有的 RESTful PHP MVC 框架，例如 Yii 或 Kohana，它们都非常轻量级并且原生支持 RESTful 应用程序。

对于您现有的应用程序，MVC 模型声明所有请求和逻辑处理都应该由控制器而不是视图来完成。事情通常在这里以两种方式之一完成：

（1）Controller有一个特殊的方法来响应每种类型的请求，并且行为不同如RubyOnRails中所见（主要是在每个控制器动作的末尾）

```
respond_to do |format|
  format.html 
  format.xml  { render :xml => @events}
  format.json { render :json => @events}
end 
```

(2) 控制器检测当前请求的格式并将整个主题/布局更改为 JSON 主题（所有布局/视图接收相同的数据）。这是我当前的实现，它就像：

```
$format is any of [html,json,xml] (detected from url suffix)
$controller->layout = "$format";
$controller->render($viewFile, $object); 
```

在 HTML 布局中查看文件

```
<div id='model>
  <h1><?=$object->title?></h1>
  <p><?=$object->description?></p>
</div> 
```

以 JSON 布局查看文件

```
echo json_encode($object); 
```

以 XML 布局查看文件

```
/** Loop and build XML tree */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-18T23:17:06.053

Apigility 是一个基于 Zend Framework 2 的项目，专门设计用于创建 REST 和 RPC 服务。

[https://apigility.org/](https://apigility.org/)

开箱即用，您可以轻松地开始使用 MySQL 和 OAuth2 进行身份验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T07:18:06.207

我做了一堆关于 API 外观设计模式的网络研讨会。希望无论您使用何种底层技术来实现这些概念，您都会发现这些概念很有用。请在这里找到

[http://youtu.be/n8B-K3iJ7b4](http://youtu.be/n8B-K3iJ7b4)

[http://youtu.be/MRxTP-rQ-S8](http://youtu.be/MRxTP-rQ-S8)

[http://youtu.be/aJBhVm4BbCI](http://youtu.be/aJBhVm4BbCI)

# web - 基于 GIS Web (php) 离线

> ID：11059515
> 
> 赞同：-1
> 
> 时间：2012-06-15T23:49:52.030
> 
> 标签：web, gis

我想在我的本地服务器（基于 Web）上创建 GIS 服务器。我将使用什么引擎？但在我的网络中无法上网。所以我有很多mif文件。我想在我的浏览器上显示。怎么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:57:07.287

MapServer 是最受支持的开源 Web 地图服务器。

[http://www.mapserver.org/](http://www.mapserver.org/)

它支持 PHP 和 MapInfo 文件。

# css - 我需要什么代码才能拥有这些按钮之一？

> ID：11059518
> 
> 赞同：2
> 
> 时间：2012-06-15T23:50:39.230
> 
> 标签：css, button, hover, css-selectors

我只想使用右侧的按钮：

[http://cssdeck.com/item/preview/343/css-text-switcher](http://cssdeck.com/item/preview/343/css-text-switcher)

我需要什么代码才能拥有那个按钮而不是第一个？由于所有后代选择器，我正在挣扎..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:53:09.277

**HTML**

```
<nav>
  <ul>
    <li>
      <a href="#">
        <span>Want to learn more?</span>
        <span>Send us an email :)</span>
      </a>
    </li>
  </ul>
</nav> 
```

**CSS**

```
* {
    padding: 0;
    margin: 0;
}

ul {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 320px;
    height: 30px;
    margin: -15px 0 0 -160px;
    list-style: none;
    font: .75em "lucida grande", arial, sans-serif;
}

a {
    position: absolute;
    width: 150px;
    height: 100%;
    text-decoration: none;
}

a span {
    position: absolute;
    width: 100%;
    text-align: center;
    line-height: 30px;
}

li a {
    overflow: hidden;
    right: 0;
    color: #fff;
}

li span {
    -webkit-transition: top .3s ease-out;
    -moz-transition: top .3s ease-out;
    -o-transition: top .3s ease-out;
    -ms-transition: top .3s ease-out;
    transition: top .3s ease-out;
}

li span:first-child {
    background: #333;
    top: 0;
}

li span + span {
    background: #39f;
    top: 30px;
}

li a:hover span:first-child {
    top: -30px;
}

li a:hover span + span {
    top: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T05:15:38.613

HTML（仅相关代码）：

```
<nav>
  <ul>
    <li>
      <a href="#">
        <span>Want to learn more?</span>
        <span>Send us an email :)</span>
      </a>
    </li>
  </ul>
</nav>​ 
```

CSS（仅相关代码）：

```
ul {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 320px;
    height: 30px;
    margin: -15px 0 0 -160px;
    list-style: none;
    font: .75em "lucida grande", arial, sans-serif;
}

a {
    position: absolute;
    width: 150px;
    height: 100%;
    text-decoration: none;
}

a span {
    position: absolute;
    width: 100%;
    text-align: center;
    line-height: 30px;
}

li a {
    overflow: hidden;
    right: 0;
    color: #fff;
}

li span {
    -webkit-transition: top .3s ease-out;
    -moz-transition: top .3s ease-out;
    -o-transition: top .3s ease-out;
    -ms-transition: top .3s ease-out;
    transition: top .3s ease-out;
}

li span:first-child {
    background: #333;
    top: 0;
}

li span + span {
    background: #39f;
    top: 30px;
}

li a:hover span:first-child {
    top: -30px;
}

li a:hover span + span {
    top: 0;
} 
```

[**JSFiddle**](http://jsfiddle.net/Paulpro/TFntp/) ​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T23:12:46.040

我是这样做的：[http ://cssdeck.com/t/uHhhprW6](http://cssdeck.com/t/uHhhprW6)

# ruby-on-rails-3 - ActiveResource 和 ActiveModel 有什么区别？

> ID：11059519
> 
> 赞同：14
> 
> 时间：2012-06-15T23:50:52.500
> 
> 标签：ruby-on-rails-3, activerecord, activemodel

作为这个问题的前言：我是 Rails 开发（以及一般的 Web 开发）的新手，我的一些担忧可能没有根据，所以任何反馈都会非常有帮助。

我正在尝试制作一个插入 RESTful API 的 Rails 应用程序。我一直在尝试确定解决此问题的最佳方法，据我所知，它缩小到从头开始制作我自己的模型，利用 ActiveModel 或利用 ActiveResource。

我不清楚每种方法的优缺点，坦率地说，我还没有完全理解 ActiveModel 和 ActiveResource 之间的区别。有人可以向我提供有关这三个选项的见解，以及在 ror 上下文中什么最“有意义”？谢谢！

最好的答案不会只是说“使用 ActiveModel”或“使用 ActiveResource”以及这样做的说明，但这也会有所帮助。我真的很感激能解释为什么我应该使用那个东西等的答案。

我正在处理的一些限制是我在调用 API 时需要使用密钥，并且大量 API 调用将包含额外的参数。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-18T16:35:08.640

所以这里选择使用哪个包的关键是：

1.  您正在从 Web API 检索数据并希望在您的服务器上存储/操作，或者
2.  您正在通过 Web API 操作数据，并且不打算在您的服务器上存储任何内容。

**如果 #1**，您将需要 ActiveRecord，因为它是 Rails 的包，用于操作和存储 Postgres/MySQL/etc 数据库上的数据。

**如果 #2**，您可以独占使用 ActiveResource，这将允许您从 Web API 检索数据，在运行时使用它，然后通过回发到 Web API 进行更改。

但是，许多应用程序通常会使用这两个包。ActiveResource 可以非常轻松地抓取数据，然后将其应用于 ActiveRecord 模型（如用户或位置等），您可以在本地使用这些模型，而无需一遍又一遍地从 API 抓取数据。

举个例子，对于我正在处理的一项服务，我从公共来源（查找邮政编码的坐标）获取了地理位置数据，然后我使用 ActiveRecord 将该数据保存到本地 Location 对象中，这样我就可以毫无延迟地重复查找它们Web API 调用。（如果你很聪明，你会不时从 Web API 刷新这些数据）

**确定 ActiveResource 是否适合您**

服务请求是否符合[文档](http://api.rubyonrails.org/files/activeresource/README_rdoc.html)协议？例如，查看 Find 方法中的*Expects a response of* block。如果是这样，你可能会很高兴没有额外的工作。

注意：文档与更新日志有点不同步——从 Rails 3.1 开始：

> 所有请求的默认格式已更改为 JSON。如果你想继续使用 XML，你需要在类中设置 self.format = :xml。例如。

此外，ActiveResource 已完全从 Rails 4.0 分支中删除，因此，如果您期待启动一个新的 Rails 应用程序并想要最新和最好的，**这根本不是一个选择**- 但所有希望都不会丢失，那里有很多宝石可以让与 RESTful 接口的交互变得更简单，比如[Faraday](https://github.com/technoweenie/faraday)（完全披露：我自己没有使用过 faraday，所以可以真正评论它的功效，但我[在这里](https://www.ruby-toolbox.com/categories/http_clients)找到了它，还有许多其他选项。

注意（来自上面的同一链接）：*Active Resource 建立在标准 XML 格式之上，用于通过 HTTP 请求和提交资源。它反映了内置于 Action Controller 中的 RESTful 路由，但**也可以与任何其他正确实现该协议的 REST 服务一起使用**。REST 使用 HTTP，但与“典型”Web 应用程序不同，它利用了 HTTP 规范中可用的所有动词。*

如果上面的答案是**否定**的（它不符合），您将需要编写一个包装类，请参阅[Facebooker](https://github.com/mmangino/facebooker)以了解如何在积极维护的 gem 中完成此操作的示例。

参考资料： [关于 ActiveResource 的精彩教程](http://railscasts.com/episodes/95-more-on-activeresource)

[开始使用 ActiveRecord](http://guides.rubyonrails.org/active_record_querying.html#retrieving-objects-from-the-database)

请记住，如果您刚刚开始 Web 开发，您还需要了解数据库和模型基础知识——您的工作已经完成。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:41:30.020

我会试一试，希望其他人会来纠正（或添加）它，所以会有更好的画面......

我看到两者之间的以下主要区别：

*   ActiceResource 为（通常）可由（Rails）RESTful API 远程访问的资源提供接口。它不存储在本地，而是仅由 API 读取、更新、创建和删除。正如[Ryan Bates](http://railscasts.com/episodes/94-activeresource-basics)所说：“ActiveResource 允许您轻松地在多个 Rails 应用程序之间进行通信。”
*   ActiveRecord（或现在的 ActiveModel）将其记录（或模型）存储在本地数据库中，并允许其他人通过 Web 界面远程访问它
    *   显示页面
    *   返回 JSON 映射或
    *   返回 XML 结构

### 的优点和缺点

要使用 ActiveResource，您必须检查本地 Rails 应用程序是否可以与远程应用程序通信，以便 RESTful API 兼容。

如果这两个选项都可以自由选择，这里有一些论点：

*   ActiveResource 通常会比 ActiveModel 更昂贵（调用远程系统至少花费更多时间）。
*   ActiveModel 将花费您自己的资源（至少设置数据库），但这通常不是负担。

所以最后，这取决于你是想存储一些东西（ActiveModel）还是只检索一些东西（ActiveResource），这意味着你将使用 ActiveResource 和（也许）ActiveMiodel。

# html - html5页面中无法解析音频标签

> ID：11059523
> 
> 赞同：1
> 
> 时间：2012-06-15T23:51:05.643
> 
> 标签：html

我将此 JS 页面链接到 XML 所有元素都是视图，但 xml 文件中的音频标签不是 html5 页面中的视图。任何建议如何使此函数检索音频文件并将其显示为 html5 音频播放器。

```
init: function () {

    //jQuery ajax call to retrieve the XML file
    $.ajax({
        type: "GET",
        url: XMLLIST.xml,
        dataType: "xml",            
        success: XMLLIST.parseXML
    }); 

}, // end: init()

parseXML: function (xml) {

    //Grab every single ITEM tags in the XML file
    var data = $('item', xml).get();
    //Allow user to toggle display randomly or vice versa
    var list = (XMLLIST.random) ? XMLLIST.randomize(data) : data;
    var i = 1;

    //Loop through all the ITEMs
    $(list).each(function () {

        //Parse data and embed it with HTML
        XMLLIST.insertHTML($(this));            

        //If it reached user predefined total of display item, stop the loop, job done.
        if (i == XMLLIST.display) return false;
        i++;
    });

}, // end: parseXML()

insertHTML: function (item) {

    //retrieve each of the data field from ITEM
    var url = item.find('url').text();
    var image = item.find('image').text();
    var audio=item.find('audio').text();
    var title = item.find('title').text();
    var desc = item.find('desc').text();
    var html;

    //Embed them into HTML code
    html = '<div class="item">';
    html += '<a href="' + url + '"><image"' + image + '" alt="' + title + '" />';

    html += '<span>' + title + '</span></a>';
    html += '<audio control="control"><span> ' +audio+' </span></audio>';
    html += '<p>' + desc + '</p>';
    html += '</div>';

    //Append it to user predefined element
    $(html).appendTo(XMLLIST.appendTo);

}, // end: insertHTML()

randomize: function(arr) {

    //randomize the data
    //Credit to JSFromHell http://jsfromhell.com/array/shuffle
    for(var j, x, i = arr.length; i; j = parseInt(Math.random() * i), x = arr[--i], arr[i] = arr[j], arr[j] = x);
        return arr;

} // end: randomize() 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T00:01:47.417

AFAIK[`.each()`](http://api.jquery.com/each/)用于迭代一个 jQuery 对象，如果你想迭代一个数组使用[`$.each()`](http://api.jquery.com/jQuery.each/)

在这里你有

```
$(list).each(function () { 
```

应该是

```
$.each(list, function () { 
```

因为 list 是一个 dom 节点数组，而不是一个 jQuery 对象

# wpf - 选择可编辑组合框时如何触发事件？

> ID：11059526
> 
> 赞同：1
> 
> 时间：2012-06-15T23:51:34.527
> 
> 标签：wpf, vb.net, combobox, selectionchanged

我有一个`ComboBox`数据绑定到一个`ObservableCollection`的`strings`。也是可编辑的`ComboBox`，因此您可以输入自己的值或从列表中选择一个。我遇到的问题是索引`SelectedItem`似乎是您在 中输入自己的值时选择的最后一个项目的索引`ComboBox`，尽管当您`IsTextSearchEnabled`设置为 true 时它是 -1。

问题是，如果有人输入了自己的值，然后决定改为选择`ComboBox`之前已选择的项目，则索引不会更改，因此`SelectionChange`事件不会触发。在这种情况下，我怎么能触发一个事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T10:11:12.450

测试一下......我希望这会有所帮助：

```
Dim oldSEL As String = ""

'always checking while you move your mouse over the combobox (when altering selection) and using the keyboard to (alter selection)
Private Sub ComboBox1_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ComboBox1.MouseMove, ComboBox1.KeyPress
    Dim currentSEL As String = ComboBox1.SelectedText
    If Not (oldSEL = "" And currentSEL = oldSEL) Then
        fire()
        oldSEL = currentSEL
    End If
End Sub

Private Sub fire()
    Trace.Write("text selected changed")
End Sub 
```

您应该根据自己的喜好更改所有 Combobox1。

# ruby - Ruby中“每个......做”中的条件语句？

> ID：11059527
> 
> 赞同：0
> 
> 时间：2012-06-15T23:51:37.660
> 
> 标签：ruby, sinatra

在我的 erb 文件中，我在 body 标记中有以下代码：

```
<% @tasks.each do |task| %>  
  <%= task.name %>
<% end %> 
```

这是有效的，但如果 task.otherAttribute 不等于-1，我只想显示 task.name。

由于某种原因，我无法弄清楚如何做到这一点！任何提示将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T23:54:35.830

试试这个：

```
<% @tasks.each do |task| %>  
  <%= task.name if task.otherAttribute != 1 %>
<% end %> 
```

或者：

```
<% @tasks.each do |task| %>  
  <%= task.name unless task.otherAttribute == 1 %>
<% end %> 
```

我将提供更多选项以供将来参考：

```
<% @tasks.each do |task| %>
  <% if task.otherAttribute != 1 %>
    <%= task.name %>
  <% end %>
<% end %>

<% @tasks.each do |task| %>  
  <%= task.otherAttribute == 1 ? '' : task.name %>
<% end %> 
```

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T00:17:58.453

对于这个习语，我倾向于使用`#select`and `#reject`，因为这基本上就是你正在做的事情。

```
<%= @tasks.reject{|t| t.other_attribute == -1}.each do |task| %>
  <%= task.name %>
<% end %> 
```

这些来自[Enumerable](http://ruby-doc.org/core-1.9.3/Enumerable.html)模块，大多数带有`#each`方法的东西都包括在内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T23:54:57.083

您可以将条件放入您的 ERB 代码中。

```
<%= task.name if task.otherAttribute != 1 %> 
```

您还可以使用更详细的语法执行更复杂的任务。在您的情况下没有必要，但您也可以像这样执行更传统的 if/else 块：

```
<% if task.otherAttribute != 1 %>
  <%= task.name %>
<% end %> 
```

# android - 成功调用后 Android FQL 调用返回空 [标题已更改]

> ID：11059528
> 
> 赞同：0
> 
> 时间：2012-06-15T23:51:41.423
> 
> 标签：android, facebook, facebook-fql

好的，这是我的问题。

我正在进行 FQL 查询并存储响应数据。我的代码运行良好，除了应用程序运行大约 4 分钟后，我得到一个 JSONException。异常读取

```
 A JSONArray text must start with '[' at character 0 of 
```

这很奇怪，因为如果我在浏览器中输入查询的 URL，我会得到以下信息

```
[{"uid":SOMENUMBER},{"uid":SOMENUMBER}] 
```

这显然以“[”字符开头。

这是请求

```
 String query = "SELECT uid FROM user WHERE is_app_user=1 and uid IN (SELECT uid2 FROM friend WHERE uid1 =" + fbId + ")";
         Bundle params = new Bundle();
         params.putString("method", "fql.query");
         params.putString("query", query);
         mAsyncFacebookRunner.request(null, params, new FQLRequestListener()); 
```

这是请求监听器

```
 private class FQLRequestListener implements RequestListener
    {

        @Override
        public void onComplete(String response, Object state) 
        {
            try {
                JSONArray json = new JSONArray(response);
                friendsIds = new ArrayList<String>();
                for(int i = 0; i < json.length(); ++i)
                {
                        String uid = json.getJSONObject(i).getString("uid");
                        friendsIds.add(uid);
                        Log.d("friends", friendsIds.get(i));
                }
                InviteFriends.this.runOnUiThread(new Runnable()
                {
                    @Override
                    public void run() 
                    {
                            setUpList();
                    }
                });

            } catch (JSONException e) {
                e.printStackTrace();

            } 
        } 
```

还有堆栈..

```
06-15 16:43:21.744: D/Facebook-Util(866): GET URL: THIS IS THE URL THAT WORKS IN A BROSWER (actual URL removed)
06-15 16:43:21.774: W/System.err(866): org.json.JSONException: A JSONArray text must start    with '[' at character 0 of 
06-15 16:43:21.774: W/System.err(866):  at org.json.JSONTokener.syntaxError(JSONTokener.java:448)
06-15 16:43:21.774: W/System.err(866):  at org.json.JSONArray.<init>(JSONArray.java:104)
 06-15 16:43:21.774: W/System.err(866):     at org.json.JSONArray.<init>(JSONArray.java:150)
 06-15 16:43:21.774: W/System.err(866):     at rageup.android.InviteFriends$FQLRequestListener.onComplete(InviteFriends.java:129)
 06-15 16:43:21.774: W/System.err(866):     at com.facebook.android.AsyncFacebookRunner$2.run(AsyncFacebookRunner.java:254) 
```

我应该注意到..

1.  当我注销并重新登录时查询有效。

2.  我已确保我的 Facebook 会话有效。

3.  Facebook 提供的“Hackbook”示例在下载朋友列表时也存在同样的问题。

获取异常的流程

1.  用户登录的主页

2.  用户单击按钮开始第二个活动

3.  第二个活动是进行查询的地方

4.  回家

5.  大约 4 分钟后重复，减去登录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:06:50.023

首先尝试验证响应。我会使用：

```
JSONObject json = new JSONObject(response); 
```

它使您有机会使用它的方法检查 json 对象的内容。你不能假设，facebook api 总是会响应预期的数据形式。你可以做：

```
Log.w("FacebookListener", "Unexpected response: " + response); 
```

然后检查 Logcat 输出。

好的。我还没有测试它，但根据： http: [//developers.facebook.com/docs/reference/rest/fql.query/](http://developers.facebook.com/docs/reference/rest/fql.query/) fql 查询的图形路径是“fql”

在`mAsyncFacebookRunner.request(null, params, new FQLRequestListener());`您传递 null 时，但可能需要“fql”

**编辑** 我在graphapi explorer上检查过它——当“查询”被简单的“q”替换时，它可以工作。确保您在应用程序中通过身份验证（单点登录或 OAuth 对话框）

```
Bundle params = new Bundle();
params.putString("q", query);
mAsyncFacebookRunner.request("fql", params, new FQLRequestListener()); 
```

**另一个编辑：** 在处理不同的项目时，我注意到 Facebook Util 类的“读取”方法可能存在问题 - 有时（即使 InputStream 有数据）BufferedReader 返回 null，并打破循环。我已将方法的主体更改为：

```
 private static String read(InputStream in) throws IOException {
    StringBuffer sb = new StringBuffer();
    final InputStreamReader rd = new InputStreamReader(in);
    try {
        final char[] buffer = new char[1024];
        int read;
        while((read = rd.read(buffer)) != -1){
            sb.append(buffer, 0, read);
        }
    } catch (Exception e) {

    } finally {
        try {
            rd.close();
        } catch (Exception e2) {

        }
    }
    return sb.toString();
} 
```

它奏效了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T16:26:11.527

我有完全相同的问题：调用 fql（简单的 fql 调用，而不是 asyncfqlrunner）我完全没有问题。如果我等待几分钟 (2-4) 并再次尝试发送 fql 请求，我会收到 facebook android api 的异常：

> JSONObject 文本必须在字符 0 处以“{”开头

我还确保了 fb 会话有效且查询正确。什么都没有改变，除了执行的时间。

我尝试了重写该 `private static String read(InputStream in) throws IOException`方法的方法，但错误仍然存​​在。

**编辑** 因为即使是 facebook 也不知道这个问题，也没有其他人发布过任何关于此的内容，所以我自己已经弄清楚了。当使用普通请求方法（不是异步方法）时，转到 FB-API 中的 Facebook.java 并更改以下行`public String request(Bundle parameters)`：

从：

```
return request(null, parameters, "GET"); 
```

到

```
return request(null, parameters, "POST"); 
```

一切都应该正常！

# c# - 当班级发生事情时，如何从班级获取数据到windows窗体？

> ID：11059529
> 
> 赞同：0
> 
> 时间：2012-06-15T23:51:42.883
> 
> 标签：c#, events, delegates

我有一个 Windows 窗体应用程序和一个名为 Game 的类。

假设 Game 类有一个属性计数器，我在该类中进行一些计算并更改计数器。因此，每当计数器更改时，我想将文本返回到表单，然后将其分配给表单上的标签。

我可以使用返回类型字符串的事件处理程序吗？因为我必须听它并在发生任何事情时返回一些东西。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:04:13.947

是的，你可以：p

这样做的正确方法如下（INotifyPropertyChanged 将简单地告诉您哪些属性已更改并且不返回实际值，但这也是一种好方法）：

```
class CountArgs:EventArgs
{
   public int Count{get;set;} 

    public CountArgs(int c) { 
        Count = c; 
    }
}

class Game
{

   public event EventHandler<CountArgs> CountChanged; // it is possible to define your own delegate here.
   int count;
   public int Count
   {
      get { return count;}
      set { 
            if (count != value) // Only raise the event if the value changes
            {
                 count = value;
                 RaiseCountChangedEvent(value);
            }
   }  
   void RaiseCountChangedEvent(int c)
   {
      if (CountChanged != null) // Check that at least one object is listening to the event
      {
          CountChanged(this,new CountArgs(c));
      }
   }
} 
```

希望我在编写代码时没有犯任何语法错误：）但是您明白了。您可以使用 even 注册您的表单并像使用任何控件一样收听它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T00:03:22.280

您可以使用计时器并轮询游戏的当前状态，使用新值更新您的显示。

# matlab - PyTables table.where 在 matlab 中等效

> ID：11059531
> 
> 赞同：0
> 
> 时间：2012-06-15T23:51:54.667
> 
> 标签：matlab, hdf5, pytables

我试图在 MATLAB 中找到与 PyTables 的[table.where](http://pytables.github.com/usersguide/libref.html#tables.Table.where)类似的东西，它根据标准（例如 col1 = 4）选择数据集的子集。到目前为止，我的搜索完全没有结果。我不敢相信这样一个有用的功能不会以某种方式得到支持......有人可以帮忙吗？

MATLAB 版本 R2011b。

编辑：如果问题不清楚，我在 MATLAB 中使用 HDF5 文件进行数据存储，因此我希望找到类似于 PyTables 的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T10:02:29.707

我认为您尝试做的事情涉及到`load`内存中的文件（或者如果[HDF5 Diskmap Class](http://www.mathworks.com/matlabcentral/fileexchange/31703)对内存太大，您可以尝试一下）。

一旦您可以将 matlab 中的数据作为矩阵访问，就很容易：

```
a=[
0 0 0 0 1;
0 1 0 0 1;
1 0 1 1 1;
0 1 1 1 1;
1 0 1 0 1];

a(find(a(:,1)==1),:) 
```

# java - 无法运行我的 .jar 文件

> ID：11059537
> 
> 赞同：-4
> 
> 时间：2012-06-15T23:53:31.627
> 
> 标签：java, netbeans

我尝试双击它，我没有得到任何东西，我尝试在 CMD 中打开它，我得到了这个：

MyRestaurant.jar 中没有主要清单属性

我应该怎么办 ？:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T23:59:47.743

创建 JAR 时，您需要指定哪个类具有要运行的主要方法，这是通过将 manifest.txt 作为文件添加到您创建的 jar 来完成的。似乎这就是它缺少的东西。

创建一个 manifest.txt 文件，只需添加一行`Main-Class: ClassName`，然后在创建 jar 时输入并添加该文件。

前任。-jar -cvmf manifest.txt app.jar ClassName.class

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T02:48:28.673

如果您使用的是 Netbeans IDE，第一次编译时，选择`Run`then Netbeans 会询问您的主类。从下次开始，你就可以了`Clean and Build`。

# jquery - 从文档准备好的jquery调用函数

> ID：11059545
> 
> 赞同：1
> 
> 时间：2012-06-15T23:54:41.890
> 
> 标签：jquery

我看到一堆类似的问题，但没有找到我需要的答案。我有这个功能：

```
function fnGetContent(keyword) {
    var NewKeyword = keyword.tag;
    var type = keyword.type;
    $.ajax({
        type: "POST",  //GetEvents(iType As Integer, sSearch As String)
        url: "Default.aspx/GetEvents",
        data: "{'iType':'"+ type +"','sSearch' : '" + NewKeyword + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            var res = unescape(msg.d);
            $("#divResults").html(res);
            $('.accordian_body').hide();
            $('.accordian_head').click(function () {
                $(this).next().animate(
                    { 'height': 'toggle' }, 'fast'
                );
                $('.plus', this).toggleClass('subtract');
                $('#<%= tSearch.ClientID %>').val() = 'Search by event, team, artist or venue';
            });       
        }
    });
    return false;
} 
```

从这里调用它工作正常：

```
<a href="javascript:void(0)" onclick="fnGetContent({'type' : '2', 'tag' : 'concert'});">TEST TAG</a> 
```

但是我也想在我的上调用这个函数`Document.Ready`，我希望它在页面加载时正确运行，然后每次我希望通过它来更新结果时都会调用它`<a href>` 。这不起作用，类似问题的其他答案是不要调用在就绪之外定义的函数，我知道可以从包括 Document.Ready 在内的多个位置调用相同的函数

```
$(document).ready(function () {
    function fnGetContent("{'type' : '2' , 'tag' : ' ' }");
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T00:02:40.000

删除引号，以便将对象而不是字符串传递给函数：

```
function fnGetContent({'type' : '2' , 'tag' : ' ' }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T01:27:30.427

如果其他人遇到这个，我想通了，不要写函数，并且没有引号

```
$(document).ready(function () {
    fnGetContent({'type' : '1' , 'tag' : ' ' });
}); 
```

# php - 如何解决 kire\u00e7 等字符问题？

> ID：11059548
> 
> 赞同：0
> 
> 时间：2012-06-15T23:54:59.720
> 
> 标签：php, html, char

当文章包含诸如“ş、ç、ö、İ”之类的字母时，就会出现奇怪的编码。我怎样才能解决这个问题 ？

```
Kesme \u015fekere benzeyen, kire\u00e7 beyaz\u0131 evleriyle kar\u015f\u0131l\u0131yor BODRUM bizi..T\u0131pk\u0131, \u00e7ocuklu\u011fumuzdaki gibi.. Pencerelerdeki mavi \u00e7izgiler, denizin g\u00fcl\u00fcmsemesi adeta.. Ve denizden esen ilk r\u00fczgar bir\u00e7ok kokuyla ho\u015fgeldin diyor bize..Eski sevgililer, aile, dostluklar, an\u0131lar.. Film \u015feridi gibi ge\u00e7iyor \u00f6n\u00fcm\u00fczden 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T23:59:08.087

您是否以 JSON 格式发送此数据？如果是这样，那是 Unicode 字符的标准编码，您可以简单地运行它[`json_decode`](http://php.net/json-decode)来解码它们。

如果没有，则需要更多信息来帮助您。

# jquery - 强制缩略图的大小保持不变，但只改变个人资料图像

> ID：11059551
> 
> 赞同：0
> 
> 时间：2012-06-15T23:55:20.367
> 
> 标签：jquery, html, css

好的，这就是我有一个包含艺术家个人资料图片、名称和流派的缩略图的场景。名称在顶部，流派在底部。缩略图的大小需要受高度和宽度的限制。宽度会导致问题，因为当名称较长时会创建另一行。这会向下推其他元素，使整个缩略图更长。我不想限制艺术家可以在名称中输入的长度，因此希望在 css 中提供解决方案。

我需要将整个缩略图设置为固定高度，但需要缩短图像以补偿名称中的额外行。目前，如果有一条额外的线，则整个缩略图都会使该额外的线更长。如果名称中有另一行，或者换句话说，如果内容超过容器宽度，我需要缩短图像。

我希望有办法做到这一点，如果需要，我会提供 css 和标记，但我看不出它在这种情况下有什么帮助。我已将其包含在 jquery 主题中，但我不确定这是否可以仅使用 css 完成。

我包含的缩略图是导致问题的那个。它不是在 jsfiddle 上这样做，而是在开发站点上。这是jsfiddle；[http://jsfiddle.net/6gmRG/](http://jsfiddle.net/6gmRG/)。我还在这个问题中包含了标记和 css。

好的，这是其中一个缩略图的标记。我删除了链接等以便于阅读：

```
<div id="thumbnailwrapper">

 <!--link here-->

 <a href="">

  <!--name here-->

   <b>The Birdman Rallies</b><br>

    <div id="artiststhumbnail">

     <!--image here-->

      <img src="http://newbornsounds.coffeecup.com/artistspictures/The%20Birdman%20Rallies/lamps.jpg" height="100%" alt="The Birdman Rallies" border="0" >
     </div>

     <div id="genre">Electro/acoustic blend</div></a>

</div> 
```

这是缩略图的 css，我删除了过渡和框阴影效果以便于阅读：

```
#thumbnailwrapper {
width:137px; color:#2A2A2A; margin-right:5px; 
border-radius:0.2em; margin-bottom:5px;
background-color:#E9F7FE; padding:5px;
border-color:#DADADA; border-style:solid;
border-width:thin; font-size:15px
}

#artiststhumbnail {
width:133px; height:130px;
text-align:center;overflow:hidden;
border-color:#DADADA;
border-style:solid; border-width:thin; 
background-color:white; display:inline-block;
}

#genre {
font-size:12px; font-weight:bold;
color:#2A2A2A
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T16:38:08.480

问题出在您的 img 标签中。你已经定义了高度 100%。这就是它调整大小的原因。

尝试添加

```
#artistthumbnail img {
width:130px;
height:133px;
} 
```

看看有什么作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T19:44:52.430

好的，这是一个快速演示。你可以在这里看到我的小提琴代码：http: [//jsfiddle.net/nickadeemus2002/TdLq4/1/](http://jsfiddle.net/nickadeemus2002/TdLq4/1/)

它仅用作技术/指南。当然，它还没有准备好生产。

这是我在该方法背后的想法。我将艺术家姓名嵌套在一个跨度内。然后我使用 jquery 来获取给定缩略图包装器中每个艺术家姓名的跨度高度。然后我使用高度值来确定艺术家姓名是否有两行。我用 20 作为我的幻数来表示两行文本。您必须提出自己的动态测试值。无论如何，一旦我确定一个跨度有两行，我就会调整 .artiststhumbnail 兄弟的高度。然后我可以为 .artiststhumbnail 定义一个静态高度，使其与其他缩略图包装器对齐。

这应该会让你在你的要求上取得进展。

# slider - 宽度和高度问题

> ID：11059553
> 
> 赞同：0
> 
> 时间：2012-06-15T23:55:25.307
> 
> 标签：slider, height, width

嘿，我试图将标题/徽标放在正确的位置，并且我正在为孔的高度和宽度而苦苦挣扎，如果您在可以看到的网站上滚动，这会让我感到困扰

[http://22twenty.com/Final](http://22twenty.com/Final)

CSS在这里：

/*标题或导航栏，如果你喜欢;) */

```
#headerbg{
background: transparent url(img/gradient.png) repeat-x top left; height:504px; width:100%;  margin:0;}

.logo{
    font-size:30px;
    font-family: OpenSans, sans-serif;
    position:absolute;
    text-transform:Uppercase;
    padding-top:90px;
    padding-left:40px;
    }
header{
    z-index:3000;
    width:100%;
} 
```

希望有人可以提供帮助，如果您需要其他任何东西，请询问

谢谢

丹佛

# java - 如何以编程方式运行 appengine 开发服务器（在 java 中）？

> ID：11059558
> 
> 赞同：2
> 
> 时间：2012-06-15T23:56:34.963
> 
> 标签：java, google-app-engine

最近，我想在 xsbt 中创建 appengine 任务，例如“启动开发服务器”、“上传我的 webapp”。我找到了 xsbt(sbt-appengine) 的 appengine 插件，但我不明白它是如何工作的。我刚刚得到了一些关键字，例如“com.google.appengine.tools.development.DevAppServerMain”、“-javaagent”、“-Xbootclasspath”。任何人都知道如何以编程方式运行本地 appengine 开发服务器？或者任何描述完整选项的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T00:30:24.517

要运行本地应用引擎服务器，您需要运行“{appengine_SDK_directory}/bin/dev_appserver.extension {dir_to_your_project_war}”。

“扩展名”取决于您的操作系统。它可能是：cmd (win) 或 sh (linux)。

# jquery - jQuery 数据表性能

> ID：11059560
> 
> 赞同：0
> 
> 时间：2012-06-15T23:56:40.680
> 
> 标签：jquery, jquery-ui, datatables

我使用 jQuery 和 Datatables 来显示大约 300 个数据库行。该表位于 jQuery UI 对话框中，并通过 AJAX 请求下载。下载后，我想在每一行上创建 jQuery UI 按钮以进行编辑和删除。这需要很长时间（在一些“弱”客户端上），而且真的很烦人。有没有办法让它更快？我试过 INPUT type="button" 有点快但很难看。有什么想法/建议吗？先感谢您！！！

编辑在这里插入按钮的最后两行是一些代码：

```
 $('<div id="wdw1000frm"></div>').dialog({
        parent : '#wdw1000',
        autoOpen : false,
        closeOnEscape : false,
        height : 500,
        maxHeight : 500,
        minHeight : 500,
        minWidth : 700,
        position : [479, 68],
        title : 'Arrivals',
        width : 1000
    });
    DWM.showForm("1000", "arrivals", "Arrivals", "Arrivals");
    $("#wdw1000_tbl").dataTable({
        "bJQueryUI" : true,
        "bPaginate" : false,
        "bProcessing" : true,
        "bLengthChange" : false,
        "bFilter" : true,
        "bSort" : true,
        "bInfo" : false,
        "bAutoWidth" : false,
        "sScrollY" : "300px",
        "sDom" : "<\"H\"lfr>tS<\"F\"ip>",
        "fnInitComplete" : function() {
            this.fnSettings().oScroller.fnScrollToRow(64);
        },
        "bDeferRender" : false,
        "oLanguage" : {
            "sProcessing" : "Επεξεργασία...",
            "sLengthMenu" : "Δείξε _MENU_ στοιχεία",
            "sZeroRecords" : "Δεν βρέθηκαν στοιχεία που να ταιριάζουν",
            "sInfo" : "Εμφάνηση _START_ έως _END_ από _TOTAL_ στοιχεία",
            "sInfoEmpty" : "Εμφάνηση 0 έως 0 από 0 στοιχεία",
            "sInfoFiltered" : "(εφαρμογή φίλτρου σε _MAX_ συνολικά στοιχεία)",
            "sInfoPostFix" : "",
            "sSearch" : "Αναζήτηση:",
            "oPaginate" : {
                "sFirst" : "Πρώτη",
                "sPrevious" : "Προηγούμενη",
                "sNext" : "Επόμενη",
                "sLast" : "Τελευταία"
            }
        },
        "aaData" : [['168', '00:10-1', '1339708200', 'TRA 232', 'Sundsvall', 'SDL', '', '', '', '0', '', '0', '3', 'Cancelled', 'CAN', '<div class="Edit"></div>', '<div class="Delete"></div>'], 
                    ['169', '00:45-1', '1339710300', 'AEE 261', 'Varkaus', 'VRK', '', '', '', '0', '', '0', '5', 'New Time', 'NET', '<div class="Edit"></div>', '<div class="Delete"></div>'], 
                    ['170', '01:15-1', '1339712100', 'FPO 228', 'Indianapolis', 'IND', '', '', '', '0', '', '0', '5', 'Diverted', 'DIV', '<div class="Edit"></div>', '<div class="Delete"></div>'], 
    .
    .
    .
                    ['300', '08:10+1', '1339909800', 'LT 3620', 'Sao Joao', 'QSJ', '', '', '', '0', '', '0', '3', '', '', '<div class="Edit"></div>', '<div class="Delete"></div>']],
        "aoColumns" : [{
            "bVisible" : false
        }, {
            "aDataSort" : [2, 1],
            "sClass" : "alignLeft",
            "sTitle" : "STM",
            "sWidth" : "100px"
        }, {
            "bVisible" : false
        }, {
            "sClass" : "alignLeft",
            "sTitle" : "FN",
            "sWidth" : "100px"
        }, {
            "sClass" : "alignLeft",
            "sTitle" : "CITY"
        }, {
            "bVisible" : false
        }, {
            "sClass" : "alignLeft",
            "sTitle" : "VIA"
        }, {
            "bVisible" : false
        }, {
            "sClass" : "alignLeft",
            "sTitle" : "EST",
            "sWidth" : "100px"
        }, {
            "bVisible" : false
        }, {
            "sClass" : "alignLeft",
            "sTitle" : "ACT",
            "sWidth" : "100px"
        }, {
            "bVisible" : false
        }, {
            "sClass" : "alignCenter Editable",
            "sTitle" : "BAG",
            "sWidth" : "100px"
        }, {
            "sClass" : "alignLeft",
            "sTitle" : "REM"
        }, {
            "bVisible" : false
        }, {
            "sTitle" : "&nbsp;",
            "sWidth" : "10px",
            "bSortable" : false,
            "sClass" : "Edit"
        }, {
            "sTitle" : "&nbsp;",
            "sWidth" : "10px",
            "bSortable" : false,
            "sClass" : "Delete"
        }]
    });
    $('#wdw1000_tbl div.Edit').button ({ icons : {primary : 'ui-icon-pencil'},text : false,label : 'Edit'});
    $('#wdw1000_tbl div.Delete').button ({ icons : {primary : 'ui-icon-pencil'},text : false,label : 'ui-icon-trash'}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T22:32:52.777

`mRender`我通过使用and 解决了类似的性能问题`fnRowCallback`，在那里我将显示内容与排序内容分开，并返回一个空内容用于`mRender`函数中的显示。这大大减少了初始化时间。

`fnRowCallback`每当一行可见时都会被调用，所以在这里我创建了我更“复杂”的标记。在您的示例中，按钮，在我的情况下，我有 2000 行和表格内的一些链接，需要 15 秒才能显示。应用我的修复后，它减少到不到一秒。如果您对一些更详细的代码示例感兴趣，请查看我的[博客文章](http://coding-pros.blogspot.de/2012/09/boost-jquery-datatables-performance.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T23:42:50.893

您是否考虑过使用内置此功能的数据表编辑器？

我将数据表编辑器用于一个项目，该项目完全符合您的要求（行是库存，客户希望能够添加/删除）

[http://editor.datatables.net/](http://editor.datatables.net/)

还有一个例子： [http ://editor.datatables.net/release/DataTables/extras/Editor/examples/inlineControls.html](http://editor.datatables.net/release/DataTables/extras/Editor/examples/inlineControls.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T00:06:27.593

您只能在一行捕获鼠标悬停事件时插入这些按钮，并在鼠标悬停时删除它们？然后你也可以重用 DOM 元素:)

我的 2 美分，

奥雷连

# php - 带有 php 变量的 html 表单

> ID：11059564
> 
> 赞同：0
> 
> 时间：2012-06-15T23:57:09.803
> 
> 标签：php, html, forms, variables, echo

我想做这个表格：

```
echo '<form method="post" action="ratinghandler.php" style="width: 250px">
                <input type="hidden" name="reference" value= "$id"/>
                <select name="rating" style="width: 115px">
                <option> Rate </option>
                <option>1 Bad</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5 Average</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
                <option>9</option>
                <option value="10">10 Best</option>
                </select><input name="submit1" type="submit" value="Submit Rating" /></form>'; 
```

值得注意的部分是隐藏的药水。echo $_POST[reference] 的处理程序页面中的输出是简单的 $id（与存储在 $id 中的值相反）。

我试图将该行更改为：

```
<input type="hidden" name="reference" value= "<? echo $id ?>"/> 
```

我想我在做一些相当愚蠢的事情——但我搜索并没有看到任何直接解决这个问题的东西，所以我认为可以问一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T23:58:33.940

使用此语法：

```
<input type="hidden" name="reference" value= "'. $id .'"/> 
```

当您将单引号与 echo 一起使用时，您无法插入变量。由于字符串中有很多双引号，因此使用了单引号。您可以使用点运算符断开字符串并连接您的变量。您还可以使用逗号运算符来避免字符串连接。

如果你使用双引号，你可以把它留`$id`在里面，它会被插值，但你必须转义字符串中的所有双引号。

最后，您可以使用 HEREDOC 来允许双引号和插值：

```
echo <<<EOF
<form method="post" action="ratinghandler.php" style="width: 250px">
            <input type="hidden" name="reference" value= "$id"/>
            <select name="rating" style="width: 115px">
            <option> Rate </option>
            <option>1 Bad</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5 Average</option>
            <option>6</option>
            <option>7</option>
            <option>8</option>
            <option>9</option>
            <option value="10">10 Best</option>
            </select><input name="submit1" type="submit" value="Submit Rating" />    
</form>
EOF; 
```

# c# - 加载 XAML 工作流时的引用

> ID：11059574
> 
> 赞同：5
> 
> 时间：2012-06-15T23:58:44.893
> 
> 标签：c#, .net, xaml, workflow-foundation-4

我正在学习 Windows Workflow Foundation 4，并尝试创建以下程序：

```
using System;
using System.Activities.XamlIntegration;
using System.Linq;
using System.Activities;
using System.Activities.Statements;
using System.Reflection;
using System.Xaml;

namespace BranchedActivities
{

    class Program
    {
        static void Main(string[] args)
        {
            Activity wf = ActivityXamlServices.Load(@"C:\...\Workflow1.xaml");
            WorkflowInvoker.Invoke(wf);

            Console.ReadKey();
        }
    }
} 
```

Workflow1 包含一个调用 Activity1 的操作。Activity1.xaml 包含一个 Writeline。

当我将工作流加载为已编译的 Activity（通过使用“Activity wf = new Workflow1()”）时，程序加载完美。当我尝试为活动加载 XAML（如上面的代码）时，出现异常：无法创建未知类型“{clr-namespace:}Activity1”。

我想我也必须以某种方式加载另一个 xaml 文件，尽管我对如何加载感到很困惑。

供您参考.... Workflow1.xaml：

```
<Activity mc:Ignorable="sap" x:Class="Workflow1" sap:VirtualizedContainerService.HintSize="262,240" mva:VisualBasic.Settings="Assembly references and imported namespaces for internal implementation" xmlns="http://schemas.microsoft.com/netfx/2009/xaml/activities" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:mv="clr-namespace:Microsoft.VisualBasic;assembly=System" xmlns:mva="clr-namespace:Microsoft.VisualBasic.Activities;assembly=System.Activities" xmlns:s="clr-namespace:System;assembly=mscorlib" xmlns:s1="clr-namespace:System;assembly=System" xmlns:s2="clr-namespace:System;assembly=System.Xml" xmlns:s3="clr-namespace:System;assembly=System.Core" xmlns:sad="clr-namespace:System.Activities.Debugger;assembly=System.Activities" xmlns:sap="http://schemas.microsoft.com/netfx/2009/xaml/activities/presentation" xmlns:scg="clr-namespace:System.Collections.Generic;assembly=System" xmlns:scg1="clr-namespace:System.Collections.Generic;assembly=System.ServiceModel" xmlns:scg2="clr-namespace:System.Collections.Generic;assembly=System.Core" xmlns:scg3="clr-namespace:System.Collections.Generic;assembly=mscorlib" xmlns:sd="clr-namespace:System.Data;assembly=System.Data" xmlns:sl="clr-namespace:System.Linq;assembly=System.Core" xmlns:st="clr-namespace:System.Text;assembly=mscorlib" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
          xmlns:local="clr-namespace:">
  <Sequence sad:XamlDebuggerXmlReader.FileName="C:\...\Workflow1.xaml" sap:VirtualizedContainerService.HintSize="222,200">
    <sap:WorkflowViewStateService.ViewState>
      <scg3:Dictionary x:TypeArguments="x:String, x:Object">
        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
      </scg3:Dictionary>
    </sap:WorkflowViewStateService.ViewState>
    <local:Activity1 sap:VirtualizedContainerService.HintSize="200,22" />
  </Sequence>
</Activity> 
```

Activity1.xaml

```
<Activity mc:Ignorable="sap" x:Class="Activity1" sap:VirtualizedContainerService.HintSize="273,240" mva:VisualBasic.Settings="Assembly references and imported namespaces for internal implementation" xmlns="http://schemas.microsoft.com/netfx/2009/xaml/activities" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:mv="clr-namespace:Microsoft.VisualBasic;assembly=System" xmlns:mva="clr-namespace:Microsoft.VisualBasic.Activities;assembly=System.Activities" xmlns:s="clr-namespace:System;assembly=mscorlib" xmlns:s1="clr-namespace:System;assembly=System" xmlns:s2="clr-namespace:System;assembly=System.Xml" xmlns:s3="clr-namespace:System;assembly=System.Core" xmlns:sad="clr-namespace:System.Activities.Debugger;assembly=System.Activities" xmlns:sap="http://schemas.microsoft.com/netfx/2009/xaml/activities/presentation" xmlns:scg="clr-namespace:System.Collections.Generic;assembly=System" xmlns:scg1="clr-namespace:System.Collections.Generic;assembly=System.ServiceModel" xmlns:scg2="clr-namespace:System.Collections.Generic;assembly=System.Core" xmlns:scg3="clr-namespace:System.Collections.Generic;assembly=mscorlib" xmlns:sd="clr-namespace:System.Data;assembly=System.Data" xmlns:sl="clr-namespace:System.Linq;assembly=System.Core" xmlns:st="clr-namespace:System.Text;assembly=mscorlib" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <Sequence sad:XamlDebuggerXmlReader.FileName="C:\...\Activity1.xaml" sap:VirtualizedContainerService.HintSize="233,200">
    <sap:WorkflowViewStateService.ViewState>
      <scg3:Dictionary x:TypeArguments="x:String, x:Object">
        <x:Boolean x:Key="IsExpanded">True</x:Boolean>
      </scg3:Dictionary>
    </sap:WorkflowViewStateService.ViewState>
    <WriteLine sap:VirtualizedContainerService.HintSize="211,61" Text="Hello World" />
  </Sequence>
</Activity> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T21:54:46.977

事实证明，我需要手动引用生成的 dll。我使用的工作代码是：

```
XamlReader xamlReader;
//Assembly wfAssembly = Assembly.GetExecutingAssembly();
Assembly wfAssembly = Assembly.LoadFile(@"Workflows.dll");
XamlXmlReaderSettings settings = new XamlXmlReaderSettings();
settings.LocalAssembly = wfAssembly;
xamlReader = new XamlXmlReader(@"Workflow.xaml", settings);
Activity wf = ActivityXamlServices.Load(xamlReader); 
```

我必须在 Visual Studio 本身中编译工作流。一旦它们在图书馆中，我就如上所述引用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T00:24:14.433

由于您的 xaml 不是松散的 xaml，而是带有代码（类）的 xaml，因此您不能自行加载 xaml。

`x:Class="Activity1"`尝试从`Activity`元素中删除属性。
- 如果您的活动在后面的代码中没有成员（方法、字段、属性），那么您实际上并不需要后面的代码。

（属性相同`x:Class="Workflow1"`。）

编辑：

（`xmlns:local=`或任何其他名称空间，例如, `xmlns:src=`）属性仅用于引用自定义或系统名称空间中的类型，而不是默认 ( )。`xmlns:x=``xmlns:srd=``xmlns=`

`xmlns:local="clr-namespace:"`不是有效的命名空间映射，因为它没有映射到任何地方！

您在一个地方使用本地命名空间：`<local:Activity1 sap:VirtualizedContainerService.HintSize="200,22" />`，因此您确实需要映射，但是，您将不得不更正它。（例如`xmlns:local=MyCompany.MyProject.SubNameSpace`，假设您引用的 DLL 与 xaml 所在的 DLL 相同。）

*如果您希望 xaml 加载为松散 xaml，您还需要将程序集名称添加到定义中。*例如`xmlns:mms=MyCompany.MyProject.SubNameSpace;AssemblyName`- 不是`local`，因为松散的 xamls 没有本地 ns。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:02:15.010

在您使用主要功能的项目中引用所有依赖的dll（用于开发活动和工作流）。

# javascript - 使用 Pixastic 插件后画布监听器不起作用

> ID：11059575
> 
> 赞同：3
> 
> 时间：2012-06-15T23:58:48.473
> 
> 标签：javascript, jquery, jquery-plugins, html5-canvas, pixastic

我在 Pixastic 和我的画布听众之间有一个奇怪的冲突。

当我在画布上使用 Pixastic 函数时，此操作后画布的侦听器不起作用。我使用 Pixastic 插件分析了我的画布，发现 pixastic 添加了一些属性，如 tabindex（我认为与侦听器冲突）。

这是我之前和之后的画布：

```
//Before
<canvas id="mycanvas" width="727" height="600" style="border: 1px solid black; left: 36.5px; top: 21px;"></canvas>

//After
<canvas id="mycanvas" class="" width="600" height="727" style="border: 1px solid black; left: 36.5px; top: 21px;" title="" tabindex="-1"></canvas> 
```

我使用的听众是`mousedown`, `mouseup`, `mousemove`. 有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-14T14:03:14.297

```
Pixastic.process(canvas, 'brightness',
{
    'brightness': 60,
    'contrast': 0.5,
    'leaveDOM': true
},
function(img) {
    ctx.drawImage(img, 0, 0);
} 
```

);

检查 leaveDOM 参数，它可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-12T10:43:47.890

在我的 Pixastic (0.1.3) 版本中，有一个参数允许您设置目标画布

尝试这个

```
var canvas = document.querySelector('#my_canvas');
// Since you specify what canvas the result should be rendered to,
// no replacing is occured
Pixastic.process(canvas, 'brightness',{'resultCanvas': canvas}); 

console.log(canvas === document.querySelector('#my_canvas')); // Should be true 
```

不幸的是，我无法检查最新版本的 Pixastic，因为在发布此内容时网站已关闭。

# r - 计算中值实现波动率：RTAQ MedRV

> ID：11059578
> 
> 赞同：0
> 
> 时间：2012-06-15T23:58:55.453
> 
> 标签：r, loops, xts

嘿，有人知道如何循环通过 RTAQ 包中的 MedRV 功能吗？我有

```
##find days in data
ddx.f = endpoints(full, on="days");
days.full = format(index(full)[ddx.f], "%Y-%m-%d");

for (day in days.full) {
  x = full[day]

} 
```

每天提取，但不知道每天要添加什么来循环 MedRV 函数。有任何想法吗？还有谁知道R中有一个显着性测试来测试跳跃吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T00:37:04.233

这个想法和你[上一个问题一样](https://stackoverflow.com/questions/11051819/removing-dates-with-less-than-full-observations)

将数据分成几天，并对每一天应用一个函数。下面`split(dxts, "days")`将创建一个列表，其中每个元素都是 1 天的数据。`lapply`将对每一天应用一个功能。

```
set.seed(123)
full <- .xts(rnorm(2880), 1:2880*5*60)
mrv <- lapply(split(full, "days"), function(x) {
    #return an xts-object, which requires a timeBased index
    xts(MedRV(x), end(x)) #use the last timestamp of the day
}) 
```

然后`rbind`将结果转换为单个 xts 对象

```
do.call(rbind, mrv)
#                         [,1]
# 1969-12-31 23:55:00  58.2340
# 1970-01-01 23:55:00 268.5672
# 1970-01-02 23:55:00 260.3016
# 1970-01-03 23:55:00 310.5664
# 1970-01-04 23:55:00 302.1562
# 1970-01-05 23:55:00 272.9567
# 1970-01-06 23:55:00 291.0333
# 1970-01-07 23:55:00 309.7571
# 1970-01-08 23:55:00 229.9853
# 1970-01-09 23:55:00 298.3878
# 1970-01-10 18:00:00 215.6014 
```

**编辑/替代语法**

```
mrv <- lapply(split(full, "days"), MedRV)
names(mrv) <- index(full)[endpoints(full, on="days")]
as.xts(do.call(rbind, mrv)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T01:16:25.307

另一种方法是使用`period.apply`函数或其`apply.daily`包装器。由于`period.apply`使用`sapply`而不是`lapply`（至少我认为这就是原因），我过去得到了一些意想不到的结果，所以，我通常按照我在其他答案中的方式来做。

```
set.seed(123)
full <- .xts(rnorm(2880), 1:2880*5*60)
ddx.f = endpoints(full, on="days")
period.apply(full, ddx.f, MedRV)

apply.daily(full, MedRV) # same as period.apply but, endpoints are created for you
#                         [,1]
# 1969-12-31 23:55:00  58.2340
# 1970-01-01 23:55:00 268.5672
# 1970-01-02 23:55:00 260.3016
# 1970-01-03 23:55:00 310.5664
# 1970-01-04 23:55:00 302.1562
# 1970-01-05 23:55:00 272.9567
# 1970-01-06 23:55:00 291.0333
# 1970-01-07 23:55:00 309.7571
# 1970-01-08 23:55:00 229.9853
# 1970-01-09 23:55:00 298.3878
# 1970-01-10 18:00:00 215.6014 
```

# ms-access - 使用 Dlookup 返回访问中的多个项目

> ID：11059589
> 
> 赞同：4
> 
> 时间：2012-06-16T00:00:49.193
> 
> 标签：ms-access, vba

DealID 使用 Combobox 设置，它需要在其下方的字段中显示多达 3 个 MID

```
Private Sub DealID_AfterUpdate()
Dim strFilter As String
strFilter = "DealID = " & Me!DealID
Me!MID = DLookup("MID", "DealContent", strFilter)
Exit_ProductID_AfterUpdate:
Exit Sub
End Sub 
```

这就是我使用的代码，明显的限制是 Dlookup 只返回它找到的第一个结果。这会产生 2 个问题，但我会专注于第一个问题，它不会显示多个 MID

那么如何才能显示 1-3 个 MID？

我遇到的第二个问题更深入，但如果有人想提供帮助，我们将不胜感激。基本上，上面的表单是一个子表单，我需要它在表单表中为每个安装 ID 保存一个单独的条目。

如果有人想提供帮助但不理解（就像我提交的内容一样），我认为在 Skype 上共享屏幕是最好的选择。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T21:19:47.203

正如评论中已经说过的，您不能使用`DLookup`返回多个值。

您需要将前三个`MID`s 选择为 a `Recordset`，遍历它们并将它们附加到`Me!MID`：

```
Dim RS As DAO.Recordset
Dim SQL As String

'ordering is only important if you want the FIRST three MIDs.
'If you don't care, just omit the "order by MID" part.
SQL = "select top 3 MID from DealContent where DealID = xxx order by MID"

Set RS = CurrentDb.OpenRecordset(SQL)
Do While Not RS.EOF
    Me!MID = Me!MID & RS("mid") & " "
    RS.MoveNext
Loop
RS.Close
Set RS = Nothing 
```

请注意，此示例使用 DAO，这是较新 Access 版本中的默认（MS 推荐）数据访问技术。旧版本默认使用 ADO。
DAO 也可以在那里工作，您只需要参考`Microsoft DAO x.x Object Library`.

# ruby-on-rails - Rails has_one 新动作走错路线

> ID：11059598
> 
> 赞同：1
> 
> 时间：2012-06-16T00:02:27.930
> 
> 标签：ruby-on-rails, routes, associations, has-one

当我单击“项目”显示页面上的“新计划状态”按钮时，错误显示的路线是复数，而它应该是单数。这是我的代码：

```
# project.rb
class Project < ActiveRecord::Base
  has_one :schedule_status
end

# schedule_status.rb
class ScheduleStatus < ActiveRecord::Base
  belongs_to :project
end

# schedule_statuses_controller.rb
def new
  @project = Project.find(params[:project_id])
  @schedule_status = @project.build_schedule_status
end

# routes.rb
resources :projects do
  resource :schedule_status
end

# _form.html.erb
<%= form_for [@project, @schedule_status] do |f| %>
  ... 
```

该错误告诉我我的`form_for`行不正确。似乎我的实例变量设置正确，但错误是：

```
undefined method `project_schedule_statuses_path` for ... 
```

知道为什么它尝试访问的路线是**复数**吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:25:06.100

这是一个错误。form_for 查找对象的复数形式。但是，由于您已经声明了一个单一资源 :schedule_status，因此永远不会创建路径辅助方法。

要解决这个问题，您应该为 form_for 使用 :url 参数。

查看这个[问题/答案](https://stackoverflow.com/questions/3736759/ruby-on-rails-singular-resource-and-form-for)以获得更清晰的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T00:46:21.543

这不是错误，而是一项**功能**（票证已关闭，无法修复）：

导轨问题：

[https://github.com/rails/rails/issues/1769](https://github.com/rails/rails/issues/1769)

总结报价：

> 该错误已经存在了很长时间，但是干净的解决方案并不容易代表自己。polymorphic_url 助手在其操作方式上没有“智能”——它没有关于您在 routes.rb 中声明为资源的信息。它所要做的就是模型的名称以及它如何映射到命名的 url 助手。
> 
> 问题是没有简单的方法来辨别模型是映射到单个资源 URL 还是常规资源 URL。检查集合 url 的存在不起作用，因为资源可能已使用 :except => :index 指定，并且尝试挽救路由生成错误不起作用，因为将实例传递给单个资源 url 帮助程序将生成格式设置为 id 的 url，也不例外。

rails 问题以支持前一个的方式结束： [https ://github.com/rails/rails/issues/4978](https://github.com/rails/rails/issues/4978)

**结论**：

> 在这种情况下，您应该提供网址。url_for 无法反映路由以查看这是否是资源。

# php - Magento：跟踪和调试其 PHP 代码

> ID：11059599
> 
> 赞同：0
> 
> 时间：2012-06-16T00:02:32.793
> 
> 标签：php

所以，我开始尝试一些 Magento 代码。我正在尝试追踪计算购物车页面上运费的代码。我正在查看一个名为`shipping.phtml`in的文件`/your_theme/template/checkout/cart/`。

邮编输入框：

```
 <li>
                <label for="postcode"<?php if ($this->isZipCodeRequired()) echo ' class="required"' ?>><?php if ($this->isZipCodeRequired()) echo '<em>*</em>' ?><?php echo $this->__('Zip/Postal Code') ?></label>
                <input class="input-text validate-postcode<?php if ($this->isZipCodeRequired()):?> required-entry<?php endif;?>" type="text" id="postcode" name="estimate_postcode" value="<?php echo $this->htmlEscape($this->getEstimatePostcode()) ?>" />
            </li> 
```

计算运费按钮：

```
 <div class="buttons-set">
            <button type="button" onclick="coShippingMethodForm.submit()" class="button"><span><span><?php echo $this->__('Get a Quote') ?></span></span></button>
        </div> 
```

Javascript：

```
<script type="text/javascript">
//<![CDATA[
    var coShippingMethodForm = new VarienForm('shipping-zip-form');
    var countriesWithOptionalZip = <?php echo $this->helper('directory')->getCountriesWithOptionalZip(true) ?>;

    coShippingMethodForm.submit = function () {
        var country = $F('country');
        var optionalZip = false;

        for (i=0; i < countriesWithOptionalZip.length; i++) {
            if (countriesWithOptionalZip[i] == country) {
                optionalZip = true;
            }
        }
        if (optionalZip) {
            $('postcode').removeClassName('required-entry');
        }
        else {
            $('postcode').addClassName('required-entry');
        }
        return VarienForm.prototype.submit.bind(coShippingMethodForm)();
    }
//]]>
</script> 
```

现在，我不知道它从这里去哪里。有人可以向我提供一些关于这从这里开始的提示吗？

编辑：

我应该补充一点，我正在寻找包含物品重量并计算 USPS 运费的代码。我读过一个名为 Usps.php 的文件是用来计算这个费率的，但是即使修改了核心文件，我也无法更改成本在网站上的显示方式，所以我想知道自己确实是计算运费的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:54:42.993

这不是计算运费的代码——它只是提交请求的表单。可能最简单的方法是在嗅探 HTTP 请求的同时提交表单（即通过浏览器开发人员工具的网络选项卡），然后查看请求的去向——然后找到处理该 URL 请求的控制器。

如果您想知道 $this 在该文件中引用了哪个类，那么最可靠的方法可能是`get_class($this)`从模板中回显。但是，这可能不是找到所需内容的最直接方法。

# jquery - 使用 jquery .focusin 显示 div 时，在输入文本字段中保持焦点

> ID：11059601
> 
> 赞同：0
> 
> 时间：2012-06-16T00:02:44.933
> 
> 标签：jquery, forms

当用户单击输入字段时，我试图显示一个 div，但是，我遇到了几个问题......

1）当用户单击输入字段时，div 确实显示，但是，与 div 的任何交互都会导致 div 消失......当用户与 div 交互时，如何保持该字段处于活动状态？

2）我有多个字段，并使用下面的代码...如何将其设置为多个字段 id 并显示与每个特定 div 关联的 div（即输入字段 id=age 显示 div id=tip-age，输入字段 id=height -- 显示 div id=tip-height)

我也为此创建了一个 jsfiddle [http://jsfiddle.net/NEmYv/](http://jsfiddle.net/NEmYv/)

代码

```
<form id="measure">
<div id="tip-age" style="display:none;">text here</div>
<input type="text" id="age" />
<input type="submit">
</form> 
```

jQuery

```
$("#age").focusin(function() {
    $("#tip-age").show();
}).focusout(function () {
    $("#tip-age").hide();
}); 
```

我确实知道这可能会在 jQuery API 中得到回答……但我真的可以在这件事上使用你的帮助。如果这是一个卑鄙的问题，我提前道歉......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T00:17:30.943

我创建了一个演示来满足您的要求。你可以在这里查看演示：

[这里的小提琴代码](http://jsfiddle.net/nickadeemus2002/PeTUy/) 是我所做的：

```
$(".show-hidden-div").click(function() {
var inputId = $(this).attr('id');
$("#tip-"+inputId+"").show();}); 
```

如您所见，我创建了两个输入，每个输入都有一个相关的隐藏 div。我添加了一个类“show-hidden-input”，因此您可以使用 jquery 处理所有相关的输入与点击事件。一旦点击了“show-hidden-input”类的输入，我就会得到唯一的 id 并用它来找到它的相关隐藏 div。然后我显示相关的div。

# jquery - 调用 var 即函数

> ID：11059609
> 
> 赞同：2
> 
> 时间：2012-06-16T00:04:44.070
> 
> 标签：jquery, function, setinterval, var

我有这个脚本，需要能够将 $play 变量作为函数调用，即重新启动设置的时间间隔，暂停功能可以正常工作，但我无法在单击播放时重新启动它。

```
 if( itemsCount > 1 ) {
        // addNavigation
        var $navPlay= $('body').find('.play'),
        $navPause= $('body').find('.pause'),
        $imgWrapper= $rgGallery.find('div.rg-image'),
        $play = window.setInterval(function(){
            _navigate('right');
        }, 500);

        $navPlay.on('click', function( event ) {
            $play;
            return false;
        });

        $navPause.on('click', function( event ) {
            clearInterval($play);
            return false;
        });
    }
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T00:10:24.103

还没有完全有时间创建一个示例来复制与您的用例类似的东西，但是应该做一些类似的事情。

```
 function starter() {
        return (window.setInterval(function () {
            _navigate('right');
        }, 500));
    }

    // stuff
    if( itemsCount > 1 ) {
            // addNavigation
            var $navPlay        = $('body').find('.play'),
                $navPause       = $('body').find('.pause'),
                $imgWrapper     = $rgGallery.find('div.rg-image'),
                $play           = starter(); // auto-start (set to null if not desired)

            $navPlay.on('click', function( event ) {
                if (!$play) { // probably don't want to set this twice
                  $play = starter();
                }
                return false;
            });

            $navPause.on('click', function( event ) {
                if ($play) {
                    clearInterval($play);
                    $play = null;
                }
                return false;
            });
    }           
    // stuff 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T00:14:24.783

如果要将变量用作函数，则只需使用`function(){}`

```
if (itemsCount > 1) {
    // addNavigation
    var timeout,
        $navPlay = $('body').find('.play'),
        $navPause = $('body').find('.pause'),
        $imgWrapper = $rgGallery.find('div.rg-image'),
        $play = function () {
            timeout = window.setInterval(function () {
                _navigate('right');
            }, 500);
        };

    $navPlay.on('click', function (event) {
        $play();
        return false;
    });

    $navPause.on('click', function (event) {
        clearInterval(timeout);
        return false;
    });
} 
```

您可以像普通函数一样在括号中添加变量，效果很好。还给你超时一个单独的变量，你可以全局。

# objective-c - 如何识别同一张脸？

> ID：11059611
> 
> 赞同：1
> 
> 时间：2012-06-16T00:04:46.663
> 
> 标签：objective-c, ios, xcode, face-recognition

我的应用程序能够存储密码。但这些都是重要的密码，所以我不希望用户被黑客入侵。我想能够使用面部识别，而不是回答安全问题**或**输入密码。我对最后两个选项很好，只是停留在面部识别上。

我已将视图设置为完整的相机视图。

如何执行面部识别，是否有 API 或一些示例代码？我怎样才能确定它是我看到的同一张脸？

最后一件事，举起照片会认出人脸吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T00:37:28.703

您可以使用 face.com API 并将照片发送给他们以进行识别。我相信他们从 Facebook 提取数据用于面部识别，因此您可能需要您的用户连接到 Facebook。自己查看文档。

全面披露：face.com 曾经给过我一件 T 恤。

是的，举起一张照片就能认出这张脸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T00:13:47.560

人脸识别存储是个坏主意 | 天天要闻 恢复任何类型的重要数据……</p>

即使你有最好的识别算法，一张简单的图片也能打破你的安全！

但是……回答你的问题，Apple 已经发布了 iOS 6 的人脸识别 API……对于较旧的 iOS，你可能必须创建自己的算法。

面部识别算法通常基于眼睛、眉毛、鼻点和嘴巴的距离。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-20T09:14:43.107

我最近完成了这个练习，如果你想使用 Apple 框架提供的基本功能，你可以使用 CIDetector 类型为 CIDetectorTypeFace，然后遍历返回的 CIFaceFeatures 数组。我创建了一个名为 Features 的结构来存储眼睛和嘴巴的位置：

```
CIDetector* detector = [CIDetector detectorOfType:CIDetectorTypeFace
                                          context:nil options:                [NSDictionary dictionaryWithObject:CIDetectorAccuracyHigh  forKey:CIDetectorAccuracy]];
NSArray* features = [detector featuresInImage:image];

Features *face = [[Features alloc] init]; //simple struct with 3 face points

for( CIFaceFeature* faceFeature in features)
    {
      //use _faceView to compare view of 2nd image as one will have to be scaled to the others size
       _faceView = [[UIView alloc] initWithFrame:faceFeature.bounds];
       if(faceFeature.hasLeftEyePosition)
       {
           face.leftEye = faceFeature.leftEyePosition;

          // do the same for face.rightEye, and face.Mouth
          .
          .
          . 
```

获得基本面的坐标后，您可以比较眼睛和嘴巴之间的距离并确定匹配的百分比。您可以添加眨眼检测以确保它是一个人而不是复制的图像。但这是另一个线程的主题

# php - 分页不适用于第二页

> ID：11059613
> 
> 赞同：0
> 
> 时间：2012-06-16T00:04:59.577
> 
> 标签：php, jquery

此页面与表格中的查询结果完美加载。分页已就位，并已按记录数正确划分页面。页面上还有其他与表格无关的项目。当我尝试转到第二页时，我只得到没有其他记录的标题行，其他信息在页面上显示为未定义的索引，几乎就像一开始没有查询一样。我已经在网上搜索了答案，并且我已经用尽了我在解决这个问题方面的有限知识。我想做的就是对来自 mysql 数据库的查询结果进行分页，并仅在每次用户更改页面时刷新表。我已经查看了 ajax 和 jquery 来做到这一点，但无法掌握在我的代码中实现它的内容和方式。我可以理解页面刷新问题，但我会假设分页无论如何都会起作用。下面是我的代码，如果有人能指出任何错误或建议如何最好地完成这项工作，我将不胜感激。

```
$brandname = $_GET['brandname'];
$picked = $_GET['picked'];
$pickcheck = $_GET['pickcheck'];

$brands =($brandname);
$_SESSION['$brandname']= $brandname;
$pick =($picked);
$_SESSION['$picked']= $pick;
$picker =($pickcheck);
$_SESSION['$pickcheck']=$picker;

$tbl_name="pickme";
$adjacents = 3;

$query = "SELECT COUNT(*) as num FROM tirestock";
$total_pages = mysql_fetch_array(mysql_query($query));
$total_pages = $total_pages["num"];

$targetpage = "connecttest.php";    //your file name  (the name of this file)
$limit = 5;                                 //how many items to show per page
$page = (isset($_GET['page'])) ? (int)$_GET['page'] : 1;
$page=mysql_real_escape_string($page);
$page = $_GET['page'];
if($page)
    $start = ($page - 1) * $limit;          
else
    $start = 0;

$sql = "SELECT * FROM tirestock LIMIT $start, $limit";
$result = mysql_query($sql);

if ($page == 0) $page = 1;
$prev = $page - 1;
$next = $page + 1;
$lastpage = ceil($total_pages/$limit);
$lpm1 = $lastpage - 1;

$pagination = "";
if($lastpage > 1)
{
    $pagination .= "<div class=\"pagination\">";

    if ($page > 1)
        $pagination.= "<a href=\"$targetpage?page=$prev\">« previous</a>";
    else
        $pagination.= "<span class=\"disabled\">« previous</span>";

    //pages
    if ($lastpage < 7 + ($adjacents * 2))
    {
        for ($counter = 1; $counter <= $lastpage; $counter++)
        {
            if ($counter == $page)
                $pagination.= "<span class=\"current\">$counter</span>";
            else
                $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";
        }
    }
    elseif($lastpage > 5 + ($adjacents * 2))
    {

        if($page < 1 + ($adjacents * 2))
        {
            for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";
            }
            $pagination.= "...";
            $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
            $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";
        }

        elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
        {
            $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
            $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
            $pagination.= "...";
            for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";
            }
            $pagination.= "...";
            $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
            $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";
        }

        else
        {
            $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
            $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
            $pagination.= "...";
            for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";
            }
        }
    }

    if ($page < $counter - 1)
        $pagination.= "<a href=\"$targetpage?page=$next\">next »</a>";
    else
        $pagination.= "<span class=\"disabled\">next »</span>";
    $pagination.= "</div>\n";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T00:56:34.910

你有很多冗余代码，所以我会先清理它，看看它是否与问题有关。

**第一个问题：**分配和检查太多`$page`

```
$page = (isset($_GET['page'])) ? (int)$_GET['page'] : 1;
$page=mysql_real_escape_string($page);
$page = $_GET['page'];
if($page)
    $start = ($page - 1) * $limit;          
else
    $start = 0;

if ($page == 0) $page = 1; 
```

例如应该只是：

```
$page = isset($_GET['page']) ? max((int)$_GET['page'], 1) : 1;
$start = ($page - 1) * $limit; 
```

现在您不必检查它是否已设置、0 等。

**第二个问题：**我看不到您在哪里使用其他变量`$_GET`或`$_SESSION`变量，但是如果您想通过分页保留它们，则必须将它们添加到分页 url 中，或者`$_GET`如果没有设置，则不要用 emtpy 变量覆盖会话。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-25T09:32:23.683

```
<?php 

if($nume > $limit ){ // Let us display bottom links if sufficient records are there for paging

/////////////// Start the bottom links with Prev and next link with page numbers /////////////////
echo "<table align = 'center' width='50%'><tr><td  align='left' width='30%'>";
//// if our variable $back is equal to 0 or more then only we will display the link to move back ////////
if($back >=0) { 
print '<a href="'.$page_name.'?start='.$back.'&sex='.$field.'&searching=yes&find='.$find.'"><font face="Verdana" size="2">PREV</font></a>'; 
} 
//////////////// Let us display the page links at  center. We will not display the current page as a link ///////////
echo "</td><td align=center width='30%'>";
$i=0;

$l=1;

for($i=0;$i < $nume;$i=$i+$limit){
if($i <> $eu){
echo '<a href="'.$page_name.'?start='.$i.'&sex='.$field.'&searching=yes&find='.$find.'"><font face="Verdana" size="2">'.$l.'</font></a> ';
}
else { echo "<font face='Verdana' size='4' color=red> ".$l."</font>";}        /// Current page is not displayed as link and given font color red

$l=$l+1;
}

echo "</td><td  align='right' width='30%'>";
///////////// If we are not in the last page then Next link will be displayed. Here we check that /////
if($this1 < $nume) { 
print '<a href="'.$page_name.'?start='.$next.'&sex='.$field.'&searching=yes&find='.$find.'"><font face="Verdana" size="2">NEXT</font></a>';} 
echo "</td></tr></table>";

}// end of if checking sufficient records are there to display bottom navigational link. 
}  

?> 
```

# php - CakePHP On ACL 设置的最后一步

> ID：11059614
> 
> 赞同：0
> 
> 时间：2012-06-16T00:05:03.570
> 
> 标签：php, cakephp, acl

我知道有几个线程在问类似的问题 - 但我还没有找到任何真正的答案来解决这个特定的语法错误，我一遍又一遍地遵循教程，但仍然出现这些错误 - 我知道它正在寻找一个缺失的节点ACL 和 ACO 之间的关系 - 呃，请帮忙

```
Warning (512): DbAcl::check() - Failed ARO/ACO node lookup in permissions check.  Node references:
    Aro: Array
    (
        [User] => Array
            (
                [id] => 1
                [username] => admin
                [group_id] => 1
                [created] => 2012-06-15 14:20:44
                [modified] => 2012-06-15 14:20:44
            )

    )

    Aco: controllers/Pages/display [CORE/Cake/Controller/Component/Acl/DbAcl.php, line 79] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:15:10.147

您的应用似乎找不到 Pages 控制器的显示操作的 aco 记录。确保将所有 aco 加载到数据库中的最快方法是使用[AclExtras 插件](https://github.com/markstory/acl_extras/tree/2.0)，这将扫描您的控制器文件并将所有操作添加到您的 aco 表中。

# actionscript-3 - 在 SoundChannel 上将音频提升到 1 以上

> ID：11059618
> 
> 赞同：1
> 
> 时间：2012-06-16T00:05:29.643
> 
> 标签：actionscript-3, flash, air, flash-cs5.5, soundchannel

我正在处理音频异常。我的音频非常响亮，但在某些系统上，它太安静了。再提升音频文件会导致剪辑。

没关系，除了在我的项目中，还有很多其他声音也在使用中。降低所有音量以匹配这将使某些东西无法听到。同样，这不会发生在所有计算机上，只会发生在一些计算机上。

作为补偿，我可以在代码中增强音频吗？我正在使用的 SoundChannel 已经是 1.0 音量（满），我知道我不能使用该属性来进一步提升它。有没有办法在代码中进一步提高音频？

（我使用的是 Flash Professional CS5.5、Adobe AIR 3 和 ActionScript 3）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-08T16:29:09.527

你是对的。无法以高于 1 (100%) 的音量播放声音。但是——您可以在不同的通道上同时播放两个相同的声音。这将有效地为您提供高于 1 的音频提升。但根据声音的性质，您可能会因同步而产生一些失真。如果您谈论的是没有很多可辨别攻击的声音效果，您可能会侥幸逃脱。如果您谈论的是语音或敲击声，您的里程可能会有所不同。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-25T23:06:55.163

一段时间后，我得出结论，显然不可能使用 Flash 的 API 将音量提高到 1 以上（即放大）。虽然您可以将 SoundTransform 设置为大于 1 的数字，但它仍会强制为 1。

如果有人有相反的信息，欢迎您发布答案，如果您解决问题，我将更改我接受的答案。

# eclipse - 带有 Spring Framework 的 Eclipse 中的 Java Web App 无法识别对控制器的编辑

> ID：11059621
> 
> 赞同：0
> 
> 时间：2012-06-16T00:05:49.263
> 
> 标签：eclipse, spring, jsp, tomcat

我在工作中获得了一个现有的仪表板，并且对使用 Spring Framework 处理的整个 Java Servlet 不熟悉。

所以那里的页面工作，流程是控制器内部的方法有@RequestMapping注解。例如

```
@RequestMapping("/index.do")
public ModelAndView index() throws Exception {
    LoginDO oLoginDO = new LoginDO();       
    return new ModelAndView("index","oLoginDO",oLoginDO);
} 
```

servlet.xml 文件将视图映射到 jsp 文件，并且一切正常。

但我的问题是，当我编辑 controller.java 文件并创建另一个返回新视图的方法时，该方法用于网页的新页面，servlet 无法识别更改。它说“没有为 servlet 请求找到匹配的处理程序方法。”

现在事情就是这样，我相信这正在发生，因为当在 controller.java 中进行编辑时，Spring 框架没有被“更新”（不知道这是否是正确的术语）。我从 Eclipse 中的 WAR 文件部署了我的源代码，然后在 Tomcat 服务器上运行它。这是交易，我的导师的代码与编辑一起工作正常，但我相信他创建了一个 Tomcat 项目，并且项目目录不同，并且编辑在保存后立即更新到网站上。

请注意，当我将 JSP 更改为现有页面时，会立即识别更新，只有当我创建新的 JSP 和新的 @RequestMapping 注释以及新方法时，它才不起作用。我什至在 controller.java 中尝试了打印语句，但什么也没显示。

所以我想这是一个 Eclipse 问题和部署问题，但任何帮助都会很棒！不太清楚该怎么做才能解决这个问题。我什至尝试重新启动服务器，但没有成功。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T05:49:49.267

新的 @RequestMapping 方法需要重新加载（更新）上下文以使它们可用。当 STS (Eclipse) 检测到 spring bean 上的更改时，它会自动重新加载上下文。如果您对此有疑问，请尝试重新部署项目或重新启动 Tomcat。

另外，我想知道您是将新的 @RequestMapping 方法放在新的 Controller 中还是现有的 Controller 中。如果它是一个新控制器，您是否将该控制器添加到 Spring Web 上下文中（例如 @Controller + component-scan 或只是将 bean 添加到 de config 文件）。

# javascript - 谷歌地图在标签系统中调整大小和居中

> ID：11059623
> 
> 赞同：1
> 
> 时间：2012-06-16T00:06:36.283
> 
> 标签：javascript, jquery, google-maps

我目前在隐藏标签系统中使用谷歌地图。一切正常，除了地图似乎偏离中心，我必须滚动才能找到我的标记。

我已经设法加载完整的地图，因为由于隐藏属性，只有一部分地图是可见的。

我使用了下面的脚本，但在尝试使用 .getCenter 集中地图时收到 Javascrip 错误“对象 # 没有方法 'getCenter'”。

```
<script type="text/javascript">
    $(document).ready(function(){
    $('#hotel-listing .option').hide();
    $('#hotel-listing .option:first').show();
    $('#hotel-listing nav ul li a:first').addClass('active');
    $('#hotel-listing nav ul li a').click(function(){ 
    $('#hotel-listing nav ul li a').removeClass('active');
    $(this).addClass('active');
    var currentTab = $(this).attr('href');
    $('#hotel-listing .option').hide();
    $(currentTab).show();
 var currCenter = map.getCenter();
 google.maps.event.trigger(map, 'resize');
 map.setCenter(currCenter);
    return false;
    }); 
    });
</script> 
```

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:21:17.440

您可能已将其定义`map`为`var`映射初始化函数内部，并且由于范围而无法访问它。

如果您定义`var map;`为全局，那么在您的地图初始化函数中删除`var`您的代码可能会起作用。在没有看到您的地图构造函数代码的情况下，这仍然只是一个猜测，但基于大多数谷歌地图示例，这是一个有根据的猜测

# php - 从 PHP 脚本打开 window.open

> ID：11059624
> 
> 赞同：0
> 
> 时间：2012-06-16T00:06:50.610
> 
> 标签：php, javascript, window.open

好的，我想从 PHP 脚本中打开一个新窗口，所以我只是回显 JS：

```
echo "<script type='text/javascript'>window.open('".configController::$BASE_URL."/view/share.php?u=".$url."');</script>"; 
```

我只想打开一个用户可以与之交互的普通窗口，但是......我得到一个看起来很恶心的窗口，没有菜单栏、状态等。它是一个纯粹的弹出窗口（ icky ）。

我已经尝试提供打开的首选项并启用所有选项，但我仍然得到那个无特色的窗口。

这是启用了选项的 PHP：

```
echo "<script type='text/javascript'>window.open('".configController::$BASE_URL."/view/share.php?u=".$url."',' Share','toolbar=yes,location=yes,directories=yes,status=yes,menubar=yes,scrollbars=yes,copyhistory=yes,resizable=yes');</script>"; 
```

这是它生成的JS：

```
<script type='text/javascript'>
    window.open('http://localhost:8888/lks/view/share.php?u=www.yahoo.com',' Share','toolbar=yes,location=yes,directories=yes,status=yes,menubar=yes,scrollbars=yes,copyhistory=yes,resizable=yes');
</script> 
```

如果我通过单击按钮使用 window.open('url here') 将执行我想要的操作...有什么区别？和......我怎样才能打开一个普通的窗口？

**编辑：**

潜水更深....我把这个页面放在一起。onLoad 事件将打开 lame-o 窗口...单击 Click Me 会正确打开窗口。

```
<html>
<head>

    <script type='text/javascript'>
        function popit(){
            //window.open('http://www.yahoo.com','_blank');
            window.open('http://www.yahoo.com','Share','toolbar=yes,location=yes,directories=yes,status=yes,menubar=yes,scrollbars=yes,history=yes,resizable=yes');
        }
    </script>
</head>
<body onload="popit()">
    <a href="#" onclick="popit();">CLICK ME</a>
</body>
</html> 
```

**编辑2：**

发现了这个，我猜浏览器的行为很奇怪，因为 1990 年代的一群人决定滥用 JS ......这个想法是在分享时不中断用户体验，但看起来我必须使用相同的窗口并在完成后重定向回原始 url。

[在 chrome 和 safari 中附加 onload 事件时 window.open 不起作用](https://stackoverflow.com/questions/724484/window-open-not-working-when-attached-on-onload-event-in-chrome-and-safari)

**编辑3：** 多年后我必须澄清这不是一个重复的问题。最初的问题是关于来自后端脚本的 window.open，当时是 PHP。当您将某些内容标记为重复时，请考虑您正在将锤子放在整个主题上。仅仅因为我链接到另一个 S/O 答案，这并不意味着您可以丢弃其余材料。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-16T00:49:02.777

像我在几个地方使用它这样简单的东西怎么样，适用于 chrome，firefox，即 safari，opera .. 最近在我正在从事的项目中使用它。所以它似乎仍然有效。

`window.open(url, "_blank");`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-16T00:12:37.147

第三个参数`window.open`。你试过了`"toolbar=yes, location=yes,directories=yes,status=yes,menubar=yes,scrollbars=yes,copyhistory=yes,resizable=yes"`吗？

# javascript - Raphaeljs 气泡图查询（谁能告诉我这到底是什么图表？）

> ID：11059626
> 
> 赞同：0
> 
> 时间：2012-06-16T00:07:19.620
> 
> 标签：javascript, charts, raphael, pie-chart, graphael

有人可以让我知道我应该如何实现这种图表吗？我需要使用一个 javascript 库来实现一个图表，该图表有一个大圆圈（100%），里面有一个小的半圆来划分更大的圆圈。它是一种饼图，但不是精确的饼图。我想要一个大圆圈内的半圆它对我来说看起来像一个气泡图，但它被封闭在一个圆圈内。我不太确定我应该为此使用哪个库？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T00:34:47.870

自己写。如果你努力的话，你可以用 css（border-radius）将 div 做成圆形，甚至做成三角形（div dat 内的 3d 变换不会溢出）。然后您可以利用绝对定位将它们放置在您想要的位置。这样你甚至不需要 javascript 或库。

按要求：http: [//jsfiddle.net/h6su5/](http://jsfiddle.net/h6su5/)

只是一个小例子，你可以用谷歌做些什么和一些创造性的想法;-)

# html - CSS - 100% 宽度的输入与 div 重叠

> ID：11059628
> 
> 赞同：16
> 
> 时间：2012-06-16T00:07:29.470
> 
> 标签：html, css

我正在尝试在带有填充的 div 内修复带有填充、边框的常规输入框。但是，我希望输入的宽度为 100%，但如您所见，它重叠。我该如何解决？

CSS

```
#one {
    background:red;
    width:300px;
    padding:5px;
}
#two {
    width:100%;
    border:3px solid blue;
    padding:4px;
} 
```

​</p>

HTML

```
<div id="one"><input type="text" value="Test" id="two" /></div>​ 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-16T00:08:51.000

添加`box-sizing: border-box`到`input`样式。否则，宽度为`100%`，加上边框和填充。

# php - unix时间戳转换结果不准确php

> ID：11059631
> 
> 赞同：1
> 
> 时间：2012-06-16T00:07:47.037
> 
> 标签：php

我正在尝试将 unix 时间戳转换为可读文本。时间戳存储在数据库中并显示在表中。问题是结果不准确。

* * *

**代码：**

```
<td>'.date("F j, Y, g:i a", strtotime($row['expire'])).'</td> 
```

* * *

**数据库：**

![在此处输入图像描述](../Images/f565ef9310c82e1f81bfbd9a31272cfd.png)

* * *

**结果：**

![在此处输入图像描述](../Images/bb2f8828f8cb47c39fbd85be04f60452.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T00:13:04.897

两种选择：

*   删除`strtotime`呼叫，因为您已经将时间戳记作为数字，或者
*   将数据库字段更改为 TIMESTAMP。

# c# - 在 C# 中查找接口索引

> ID：11059632
> 
> 赞同：5
> 
> 时间：2012-06-16T00:07:50.450
> 
> 标签：c#, .net, network-programming

如何在 C# 中获取连接的接口索引？

如果索引不是标准术语，我指的是与接口关联的数字，例如当您使用命令“netsh int ipv4 show int”在左侧按索引列出您的连接时。它也用于“route add [gateway] mask [index] if [interface index]”。

我知道接口的名称和描述，因此使用 NetworkInterface.GetAllNetworkInterfaces() 然后在那里找到正确的接口是相当简单的。但是从那里，我找不到索引。我认为 ID 可能相同，但它具有“{XXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX}”形式的值，而不是小整数值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T00:20:28.600

我想你想要

```
myInterface.GetIPProperties().GetIPv4Properties().Index; 
```

如在

```
var interfaces = NetworkInterface.GetAllNetworkInterfaces(); 

foreach(var @interface in interfaces)
{
    var ipv4Properties = @interface.GetIPProperties().GetIPv4Properties();

    if (ipv4Properties != null)
        Console.WriteLine(ipv4Properties.Index);
} 
```

请注意，如果接口没有可用的 IPv4 信息，则`GetIPv4Properties()`可以返回。`null`

此[msdn 页面](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface.getipproperties.aspx)显示了一个可能有用的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T00:18:26.170

所有网络接口都有一个 GUID，它唯一地将它们区分开来，并用于在 Win 环境中进行单独操作，这就是 ID。

idx 不直接分配给 NIC，但它被 Windows 管理系统用作用户设置详细信息的友好方式。

[这里](https://stackoverflow.com/questions/6305016/cannot-attach-to-a-network-adapter-on-one-vm-same-code-works-on-another-vm-sol)有一段代码显示如何访问可能包含信息的 ManagementObjectSearcher，您必须解析结果（而不是只选择下面的名称）

```
internal static IEnumerable<string> GetConnectedCardNames()
{
string query = String.Format(@"SELECT * FROM Win32_NetworkAdapter");
var searcher = new ManagementObjectSearcher
{
    Query = new ObjectQuery(query)
};

try
{
    log.Debug("Trying to select network adapters");
    var adapterObjects = searcher.Get();

    var names = (from ManagementObject o in adapterObjects
                    select o["Name"])
                        .Cast<string>();

    return names;
}
catch (Exception ex)
{
    log.Debug("Failed to get needed names, see Exception log for details");
    log.Fatal(ex);
    throw;
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T00:18:09.103

你说的是网卡绑定顺序吗？如果是这样，通常存储在此注册表项中：

HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\Tcpip\Linkage

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-15T20:12:32.320

我更新了[Elian Ebbing 的答案](https://stackoverflow.com/a/11059702/90475)以获取支持 IPv4 的适配器：

```
 IEnumerable<KeyValuePair<int, NetworkInterface>> GetNetworkInterfaces()
  {
     foreach (var networkInterface in NetworkInterface.GetAllNetworkInterfaces())
     {
        IPv4InterfaceProperties properties = null;
        try { properties = networkInterface.GetIPProperties().GetIPv4Properties(); }
        catch (NetworkInformationException) { /* this one doesn't support IPv4 */ }

        if (properties != null)
           yield return new KeyValuePair<int, NetworkInterface>(properties.Index, networkInterface);
     }
  } 
```

PS由于涉及异常，此代码可能会很慢。`NetworkChange.NetworkAddressChanged`我建议从该方法返回的序列中构造一个查找，并在引发事件之前重新使用它。

# join - 使用通用标识符将来自不同 Excel 电子表格的数据连接到第四个电子表格

> ID：11059633
> 
> 赞同：0
> 
> 时间：2012-06-16T00:07:51.280
> 
> 标签：join, csv, records

**问题和目标**

我有三个 csv 文件，第一个包含客户姓名和他们唯一的客户编号。第二个 csv 文件包含地址、电话号码以及唯一的客户号码。第三个包含订单历史记录和唯一的客户编号。

我正在尝试将所有三个列表合并到一个 Excel 工作表中，客户姓名、地址和订单历史记录在同一行。

**期望的输出**

Customer #, Bob Brown, 100 Hill St, Los Angeles, CA 90006, 888-888-8888, 订单历史

Customer #, Tim Jones, 120 First St, San Diego, CA 91111, 888-888-8888, 订单历史

**到目前为止我尝试过的**

我将每个列表导入并复制到同一个工作表中，并使用 Vlookup 查找公共标识符。虽然它可以找到匹配的项目，但我必须手动剪切和粘贴不匹配的项目。例如，并非所有客户都有订单历史。

如果有人知道一种自动化的方法，那就太好了！我意识到 Access 可能是更好的工具，但我对 Access 的体验为零，zip，zilch，nada，什么都没有，“大甜甜圈！”

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T00:19:14.237

为什么不通过 phpmyadm 将它们导入数据库，然后使用 join 将它们全部加入，然后使用 php 中的 libexcel 输出它。

这就是我会做的。

或在excel中

将所有值放在 3 个差异表中，将所有唯一客户编号复制到表 4，然后在 excel 中使用 vlookup ifunction 组合数据

# asp.net-mvc-3 - 剃刀：预期的';' 在 JavaScript 块中用 C# 声明字符串时

> ID：11059636
> 
> 赞同：1
> 
> 时间：2012-06-16T00:08:06.147
> 
> 标签：asp.net-mvc-3

在下面的 MVC 视图代码中，isLoggedInDb 带有绿色下划线，工具提示显示**Expected ';'** . 显然有一个;，而且很难用谷歌搜索; 在它的上面。我已经看到其他人在以这种方式创建 JavaScript 服务器端时遇到问题，所以这可能不是最佳实践。应该忽略这一点，还是 Intellisense 有正当理由抱怨？

```
@* SHTML Code Above *@

<script type="text/javascript">
    @{  
        string isLoggedInDb;

        if(Session["isLoggedInDb"] != null)
        {
            if(Session["isLoggedInDb"].ToString() == "1") 
            {
                isLoggedInDb = "1";
            }
            else
            {
                isLoggedInDb = "0";
            }
        }
    }

    var dblogin=@(isLoggedInDb);

    @*....etc*@

    } 
```

**编辑**：

我突然想到，以编程方式构建 JavaScript 可能不是最好的主意，因为将 JavaScript 保存在通常被缓存的单独文件中可能被认为是最佳实践。我认为我应该在 JavaScript 读取的 HTML 中编写隐藏变量。也许有人可以证实这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T07:20:28.807

毫无疑问，您应该采取类似于以下方法的方法：

```
var isLoggedOn = @Model.IsLoggedInDb

```

IsLoggedInDb 应该是您的 ViewModel 的一部分，您的 View 不应该检查会话，这非常脆弱，不易测试，控制器的目的是为表示层（视图）编排数据

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T00:55:04.613

我不是 100% 确定，但我认为编译器将其视为 C# 代码，因为您将它放在 Razor 代码块中`@{ }`

尝试这个：

```
<script type="text/javascript">
    string isLoggedInDb;

    @if(Session["isLoggedInDb"] != null)
    {
        if(Session["isLoggedInDb"].ToString() == "1") 
        {
            <text>isLoggedInDb = "1";</text>
        }
        else
        {
            <text>isLoggedInDb = "0";</text>
        }
    }
</script> 
```

至于在服务器上构建JS，我个人是受不了的（我不喜欢合并任何client/server/css代码）。我无法谈论它的性能，但我可以说你正在为一个噩梦般的维护场景做准备，跟踪所有 JS 的来源，更不用说你失去了轻松调试和管理脚本的能力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T00:57:56.593

代码应该按原样工作，但是 Razor Parser 正在与 javascript 智能感知作斗争，因此您可能希望将所有 C# 代码逻辑移出脚本标签，因为它不需要在里面，如下所示：

```
@{  
        string isLoggedInDb;

        if(Session["isLoggedInDb"] != null)
        {
            if(Session["isLoggedInDb"].ToString() == "1") 
            {
                isLoggedInDb = "1";
            }
            else
            {
                isLoggedInDb = "0";
            }
        }
    }

 @*....etc*@

<script type="text/javascript">

    var dblogin=@(isLoggedInDb);

..etc..
</script> 
```

# r - 绘制geom_bar（position =“dodge”）时熔化数据导致Y值不正确？

> ID：11059638
> 
> 赞同：0
> 
> 时间：2012-06-16T00:08:37.967
> 
> 标签：r, ggplot2

我有一个名为 split2_data 的数据框（实际上是更大数据框的一个级别的子集）。它包含一列“Loci”，这是我想要作为 x 轴的因素，以及几列 y 值（注意：所有这些值都是 <=1），我想在它们各自的位置上并排绘制x 因子。

数据框

```
structure(list(Loci = structure(1:8, .Label = c("C485", "C487_PigTa", 
"C536", "Carey", "Cool", "Coyote", "Deadpool", "Epstein"), class = "factor"), 
All = structure(c(5L, 6L, 7L, 1L, 2L, 4L, 3L, 8L), .Label = c("0.0246", 
"0.0352", "0.0563", "0.0646", "0.2349", "0.3242", "0.3278", 
"0.6854"), class = "factor"), X1_only = structure(c(4L, 3L, 
2L, 1L, 6L, 6L, 6L, 5L), .Label = c("0.0133", "0.7292", "0.8586", 
"0.9377", "0.961", "1"), class = "factor"), X78_only = structure(c(7L, 
6L, 4L, 5L, 8L, 3L, 1L, 2L), .Label = c("0.0018", "0.0175", 
"0.4958", "0.6055", "0.7472", "0.7563", "0.825", "1"), class = "factor"), 
X8_removed = structure(c(5L, 6L, 8L, 1L, 2L, 3L, 4L, 7L), .Label = c("0.0181", 
"0.0348", "0.1482", "0.1706", "0.2217", "0.2602", "0.6748", 
"0.7123"), class = "factor"), X8_only = structure(c(6L, 7L, 
3L, 8L, 5L, 4L, 1L, 2L), .Label = c("0.1266", "0.1945", "0.4389", 
"0.4496", "0.7078", "0.709", "0.8882", "1"), class = "factor"), 
X7_removed = structure(c(6L, 4L, 5L, 2L, 1L, 3L, 7L, 8L), .Label = c("0.0159", 
"0.02", "0.0541", "0.3232", "0.3972", "0.4226", "0.4919", 
"0.5951"), class = "factor"), X7_only = structure(c(3L, 4L, 
7L, 5L, 6L, 8L, 1L, 2L), .Label = c("0.0082", "0.1759", "0.4957", 
"0.5248", "0.6665", "0.6789", "0.8372", "1"), class = "factor"), 
X5_removed = structure(c(5L, 7L, 6L, 1L, 3L, 4L, 2L, 8L), .Label = c("0.0195", 
"0.0316", "0.08", "0.1069", "0.1549", "0.395", "0.4405", 
"0.6298"), class = "factor"), X5_only = structure(c(1L, 2L, 
6L, 7L, 3L, 5L, 7L, 4L), .Label = c("0.0871", "0.2022", "0.3532", 
"0.3677", "0.5292", "0.7602", "1"), class = "factor"), X4_removed = structure(c(8L, 
4L, 7L, 2L, 3L, 5L, 1L, 6L), .Label = c("0.0188", "0.0194", 
"0.0511", "0.1716", "0.1862", "0.6454", "0.661", "0.8003"
), class = "factor"), X4_only = structure(c(2L, 5L, 1L, 6L, 
7L, 3L, 8L, 4L), .Label = c("0.0026", "0.0378", "0.2884", 
"0.4386", "0.5116", "0.6549", "0.6928", "1"), class = "factor"), 
X3_removed = structure(c(5L, 7L, 6L, 1L, 2L, 3L, 4L, 8L), .Label = c("0.0612", 
"0.0627", "0.0808", "0.1636", "0.2728", "0.477", "0.5307", 
"0.6506"), class = "factor"), X3_only = structure(c(8L, 1L, 
7L, 2L, 4L, 6L, 3L, 5L), .Label = c("0.0225", "0.2111", "0.2471", 
"0.5087", "0.6294", "0.768", "0.8263", "0.8951"), class = "factor"), 
X2_removed = structure(c(4L, 5L, 6L, 3L, 7L, 2L, 1L, 8L), .Label = c("0.0526", 
"0.0608", "0.0854", "0.2036", "0.3168", "0.3668", "0.413", 
"0.7608"), class = "factor"), X2_only = structure(c(5L, 3L, 
6L, 4L, 2L, 8L, 1L, 7L), .Label = c("-", "0.0014", "0.0949", 
"0.1637", "0.1818", "0.5521", "0.8585", "1"), class = "factor"), 
X1_removed = structure(c(5L, 7L, 3L, 6L, 1L, 4L, 2L, 8L), .Label = c("0.0258", 
"0.031", "0.0496", "0.0676", "0.1053", "0.1439", "0.2823", 
"0.5465"), class = "factor")), .Names = c("Loci", "All", 
"X1_only", "X78_only", "X8_removed", "X8_only", "X7_removed", 
"X7_only", "X5_removed", "X5_only", "X4_removed", "X4_only", 
"X3_removed", "X3_only", "X2_removed", "X2_only", "X1_removed"
), row.names = 9:16, class = "data.frame") 
```

我想不出如何在基础 R 中做到这一点，在仔细研究了这里的其他问题之后，这是我能想到的最好的： library(reshape) library(ggplot2) require(ggplot2)

```
split2_datam<-melt(split2_data,id="Loci")

p2<- ggplot(split2_datam, aes(x =Loci, y = value, color = variable, width=.15)) + geom_bar(position="dodge") + ylab("P-value")+ geom_hline(yintercept=0.05)+ opts(axis.text.x  = theme_text(angle=90, size=8)) + scale_y_discrete(breaks=seq(0,1)) + scale_fill_grey()
p2

#when I add stat="identity", the y values don't change- they just shrink relative to the x-axis
p2<- ggplot(split2_datam, aes(x =Loci, y = value, color = variable, width=.15)) + geom_bar(position="dodge", stat="identity") + ylab("P-value")+ geom_hline(yintercept=0.05)+ opts(axis.text.x  = theme_text(angle=90, size=8)) + scale_y_discrete(breaks=seq(0,1)) + scale_fill_grey()
p2 
```

剧情： ![在此处输入图像描述](../Images/5b03acfe3bc8bc2d1abd63ecb5669baa.png)

您会注意到不同的变量通常远大于 1。它们不应该如此。知道是什么原因造成的/如何解决吗？

我还不知道如何做/修复的其他事情（也许这个问题应该交叉引用？）：

1.  我不知道为什么灰度不起作用
2.  我不知道如何使图例正确缩放
3.  我不明白为什么我的列附加了一个“X”（例如“X1_only”而不是“1_only”）

非常感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:55:50.223

您的数据已作为因素被读入，可能是因为您的数据中混入了一些“-”字符。

您需要将它们转换为`NA`使用`na.strings = "-"`.

# php - 从数据表的查询中返回 NULL

> ID：11059641
> 
> 赞同：0
> 
> 时间：2012-06-16T00:08:52.927
> 
> 标签：php, codeigniter, datatables

我想知道最好做什么。现在我正在运行一个查询，看看我是否返回了任何结果，如果没有返回，我返回 NULL。

在我的控制器上，无论它是对象还是 NULL，我都会将该结果集发送到我的表，它会回显视图页面上的行。

对于我的表，我使用的是 jquery 数据表插件。我试图弄清楚当发送的值为 NULL 时如何让它处理数据，这样当它到达我的 foreach 循环时它不会向我显示错误。

控制器：

```
$news_articles = $this->news_model->get_news_articles();
$this->data['news_articles'] = $news_articles; 
```

模型：

```
/**
 * Get news articles
 *
 * @return  object
 */
function get_news_articles()
{   
    $query = $this->db->get($this->news_articles_table);
    if ($query->num_rows() > 0) return $query->result();
    return NULL;
} 
```

看法：

```
$tmpl = array ( 'table_open'  => '<table class="table" id="newsarticles-table">' );
$data = array('name' => 'newsarticles', 'class' => 'selectall');
$this->table->set_heading(form_checkbox($data), 'ID', 'Date', 'Title');            
$this->table->set_template($tmpl);             
foreach ($news_articles as $row)
{
    $checkbox_data = array(
        'name'        => 'newsarticles',
        'id'          => $row->id
    );
    $this->table->add_row(form_checkbox($checkbox_data), $row->id, $row->date_posted, $row->article_title);
}
echo $this->table->generate(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T00:12:53.863

我通常使用 JSON 进行响应，然后添加一个“成功”类型的布尔值，然后在尝试处理任何数据之前检查该值。如果出现问题，它还允许一种简单的方法在响应中放置错误消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T00:31:55.717

只是另一个想法

**模型**

```
function get_news_articles()
{   
    $query = $this->db->get($this->news_articles_table);
    if ($query->num_rows() > 0) return $query->result();
    return FALSE;
} 
```

**控制器**

```
$news_articles = $this->news_model->get_news_articles();
if(!$news_articles) $this->data['success'] = FALSE;
else
{
    $this->data['news_articles'] = $news_articles;
    $this->data['success'] = TRUE;
} 
```

**在视图中**

```
if($success)
{
    foreach ($news_articles as $row)
    {
        //....
    }
}
else echo "No results found !"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T00:18:34.727

如果没有结果，只需从模型中返回一个空数组。这样你的 foreach 就不会中断。它只是不会循环任何东西。

# php - 登录到 2shared 站点时使用 curl-php 登录站点不起作用

> ID：11059645
> 
> 赞同：0
> 
> 时间：2012-06-16T00:10:19.003
> 
> 标签：php, libcurl

我正在尝试使用 curl-php 登录到 2shared，但由于某种原因，它只是返回了我的登录页面，并且没有在 cookie 文件中设置正确的 cookie。下面是我的代码。谢谢你的帮助。

```
$user = "";
$pass = "";
$cookie = "cookie.txt";

$jsonp = 'jsonp'.time();

if (file_exists($cookie)) {
    unlink($cookie);
}

$post = array(
    "login" => $user,
    "password" => $pass,
    "callback" => $jsonp
);

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, "http://www.2shared.com/login?callback=".$jsonp);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('X-Requested-With: XMLHttpRequest'));
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post);    
curl_setopt($ch, CURLOPT_REFERER, 'http://www.2shared.com/');       
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1; rv:12.0) Gecko/20100101 Firefox/12.0");
curl_setopt($ch, CURLOPT_ENCODING, "UTF-8" );

$return = curl_exec($ch);
curl_close($ch);

echo $return; 
```

**编辑：**

当我通过浏览器登录并通过 HTTP 分析器查看流量时，我注意到在点击登录按钮后它会返回此数据并重定向到 loginRedirect 对象，我注意到它设置了一些在我执行 php-curl 请求时不会出现的 cookie：

```
{
    "ok":true,
    "rejectReason":"",
    "loginRedirect":"http://www.2shared.com/account/homeDoorway.jsp;jsessionid=3F253C7C641C7A8402D4AC9872C1CEAE.dc282?rand=0.8112776952920494",
    "loggedIn":"myemail@email.com",
    "needActivation":false
} 
```

但是，当尝试使用上面的代码 curl-php 登录时，它会返回以下数据：

```
jsonp1339804887({
    "ok":true,
    "rejectReason":"",
    "loginRedirect":"http://www.2shared.com/login.jsp?sessionUnavailable=1",
    "loggedIn":"",
    "needActivation":false
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:06:14.740

在进行网络抓取时，与往常一样，关键是与使用浏览器手动完成的记录会话进行比较（例如使用 LiveHTTPHeaders 或类似工具）。然后确保您的脚本发送的请求与记录的请求尽可能相似。

如果你这样做了，你会看到...

2shared 上的登录表单似乎没有使用多部分表单，因此您将 $array 传递给 CURLOPT_POSTFIELDS 是错误的。它应该只是一个形式为“login=$name&password=$secret”的字符串。这就是说，这可能不是您方法中的唯一缺陷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:15:14.677

这可能只是黑暗中的短暂，但在我看来，您实际上应该查看重定向并遵循它。该错误消息确实表明您实际上不在服务器端的正常会话中 - 会话标识是您将被重定向到但选择不跟随的地址的一部分。`;jsessionid=3F253C7C641C7A8402D4AC9872C1CEAE.dc282`后半部分`?rand=0.8112776952920494`出现了——对我来说！– 作为系统也希望发回的随机数。我将把它当作一个简单的令牌机制来确保请求实际上是新鲜的，而不是像试图进入的脚本之类的东西:-)

另外，您确定您使用的回调机制（随着时间的推移）确实很有意义吗？

您是否尝试过无辜地进入登录页面，等待重定向弹出，然后从那里启动您的其他代码？

# c# - 列表引用问题（怀疑是 LINQ）

> ID：11059649
> 
> 赞同：0
> 
> 时间：2012-06-16T00:11:30.527
> 
> 标签：c#, linq

我有一个教学名册，我试图用老师和越位者（来自同一个列表）来填补。
如果我直接运行程序，所有的 Teachers 和 Offsiders 最终都一样，尽管它们是从不同的方法返回的。
如果我暂停程序，任何被观察到的教师或越位者都将成为新的、不同的教师。 [这个](https://stackoverflow.com/questions/10046991/issue-with-linq-and-reference-list "这")问题似乎有一些相同的内容，这导致我怀疑我误解了 linq 的一个重要部分，以及查询何时完成，但我不明白即使跨 2 个函数也会发生这种情况。
调用代码以及 2 个函数如下所示。我很感激你能提供的任何见解。

调用代码：

```
Teacher T = list.GetTeacher(lesson);
lesson.SetTeacher(T);
lesson.Teacher.AddLesson(lesson);
Teacher O = list.GetOffsider(lesson);
lesson.SetOffsider(O);
lesson.Offsider.AddLesson(lesson); 
```

获取老师：

```
public Teacher GetTeacher(Lesson lesson)
{
    List<Teacher> Eligible = Teachers.Where(t1 => t1.Active && t1.Styles.Any(ts1 => ts1.Style == lesson.Style.Style && ts1.Level >= lesson.Style.Level)).ToList();
    if (Eligible.Count == 0)
        throw new ArgumentException("Don't have any teachers for that style and/or level");
    List<Teacher> HaventTaught = Eligible.Where(t => !t.DatesTaught.Any(dt => dt.AddDays(21).Day < DateTime.Now.Day)).ToList();
    if (HaventTaught.Count == 0)
    {
        Random r = new Random();
        return Eligible[r.Next(Eligible.Count)];
    }
    else
    {
        Random r = new Random();
        return HaventTaught[r.Next(HaventTaught.Count)];
    }
} 
```

GetOffsider：

```
public Teacher GetOffsider(Lesson lesson)
{
    if (lesson.Teacher == null)
    {
        throw new ArgumentNullException("Must assign a Teacher to a lesson before an Offsider");
    }
    List<Teacher> Eligible = Teachers.Where(t2 => t2.Active && t2.Styles.Any(ts2 => ts2.Style == lesson.Style.Style && ts2.Level >= lesson.Style.Level)).ToList();
    //remove conflicts of interest
    Eligible = Eligible.Where(t3 => !t3.Avoid.Any(n2 => n2.Equals(lesson.Teacher.Name)) && !lesson.Teacher.Avoid.Any(n4 => n4.Equals(t3.Name))).ToList();

    if (Eligible.Count == 0)
        throw new ArgumentException("Don't have any offsiders for that style and/or level");
    List<Teacher> HaventTaught = Eligible.Where(t4 => !t4.DatesTaught.Any(dt2 => dt2.AddDays(21).Day < DateTime.Now.Day)).ToList();
    if (HaventTaught.Count == 0)
    {
        Random r = new Random();
        return Eligible[r.Next(Eligible.Count)];
    }
    else
    {
        Random r = new Random();
        return HaventTaught[r.Next(HaventTaught.Count)];
    }
} 
```

注意：这两个函数当前都从 HaventTaught 列表返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T00:29:36.527

问题很可能是您`Random`在每次调用中都创建了一个新实例。如果您快速调用它，则 Random 实例都将使用相同的种子播种，并在每次调用时返回相同的值。

我建议将`Random`实例移动到类级别变量中，这将导致它被构造一次，并在您连续多次调用此方法时提供更多“随机”值。

# sql - 查询最近一天通过的测试数

> ID：11059651
> 
> 赞同：0
> 
> 时间：2012-06-16T00:11:59.907
> 
> 标签：sql, sql-server-2008

我正在研究测试工具，并为它报告。所以，有一个测试可以每天自动执行几次。并且在一份报告中，我需要显示每次测试的历史数据（带有日期和通过测试次数的图表）以及最近一天通过的测试次数。不要创建此问题的模型：

我有这样的数据结构（简化）：

```
DECLARE @TestResults TABLE
(
    TestId INT,
    DateOfResult DATE,
    TestPassedCount INT
);

INSERT INTO @TestResults VALUES (1,DATEADD(day,-3,GETDATE()), 6);--This test passed 4 times  3 days ago
INSERT INTO @TestResults VALUES (1,DATEADD(day,-1,GETDATE()), 4); --This test passed 4 times yesterday
INSERT INTO @TestResults VALUES (1,GETDATE(), 5); --This test passed five times today

INSERT INTO @TestResults VALUES (2,DATEADD(day,-3,GETDATE()), 6);--This test passed 4 times  3 days ago
INSERT INTO @TestResults VALUES (2,DATEADD(day,-1,GETDATE()), 4); --This test passed 4 times yesterday

SELECT * FROM @TestResults; 
```

最后一次选择将返回我一个数据集：

```
TestId   DateOfResult   TestPassedCount
1   2012-06-12             6
1   2012-06-14             4
1   2012-06-15             5
2   2012-06-12             6
2   2012-06-14             4 
```

我怎样才能通过这个查询（在单独的列中）获得最大可用日期的通过测试数？例如，对于 ID 1 的测试，我有 6 月 12、13、14 的数据。所以，在单独的列中我需要得到 5，因为在最新日期 (max(DateOfResults)) 有五个通过测试？

我正在使用 SQL Server 2012。

谢谢！

**更新：**我找到了方法：

```
SELECT SubQ.*, r.TestPassedCount  FROM (
    SELECT *, Max(t.DateOfResult) OVER (PARTITION BY t.TestId ORDER BY t.TestId) as MaxDate FROM @TestResults t 
) AS SubQ JOIN @TestResults r ON r.TestId = SubQ.TestId AND r.DateOfResult = SubQ.MaxDate 
```

现在我需要将它应用于真正的查询:) 还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:53:35.223

我无法执行您的解决方案，也许遗漏了什么？我有这个错误（我不知道为什么）：

```
Msg 102, Level 15, State 1, Line 16
Incorrect syntax near 'order'. 
```

所以，我的查询版本几乎相等：

```
SELECT t2.TestId, t2.DateOfResult ,t2.TestPassedCount FROM @TestResults t2
INNER JOIN (
            SELECT t.TestId, MAX(t.DateOfResult) AS MaxDateOfResult from @TestResults t
            GROUP BY t.TestId ) groupedTests ON groupedTests.TestId = t2.TestId AND groupedTests.MaxDateOfResult = t2.DateOfResult
ORDER BY t2.TestId 
```

# google-maps - 街景全景完全灰色

> ID：11059657
> 
> 赞同：5
> 
> 时间：2012-06-16T00:12:45.343
> 
> 标签：google-maps, google-maps-api-3

我创建了一个街景主干视图。问题是，当显示时，全景图是完全灰色的。我不确定它是否与它位于选项卡内并且在打开选项卡时呈现全景图有关。

我猜这可能是一个类似的问题，它已修复调用该`resize`事件。有没有我可以做的类似的事情？

```
App.DetailStreetView = Backbone.View.extend({
    initialize: function() {
        this.latLng = new google.maps.LatLng(37.869085,-122.254775);
    },
    render: function() {
        var sv = new google.maps.StreetViewService();
        this.panorama = new google.maps.StreetViewPanorama(this.el);
        sv.getPanoramaByLocation(this.latLng, 50, this.processSVData);        
    },
    processSVData: function(data, status) {
        if (status == google.maps.StreetViewStatus.OK) {
            // calculate correct heading for POV
            var heading = google.maps.geometry.spherical.computeHeading(data.location.latLng, this.latLng);
            this.panorama.setPano(data.location.pano);
            this.panorama.setPov({
                heading: 270,
                pitch:0,
                zoom:1, 
            });
        }
    },
    refresh: function() {
        this.panorama.setVisible(true);
        google.maps.event.trigger(this.panorama, 'resize');
    }
}); 
```

编辑：

我创建了一个复制问题的 JSFiddle：http: [//jsfiddle.net/kNS2L/3/](http://jsfiddle.net/kNS2L/3/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T01:12:29.930

是的，这是旧`display:none`的地图和全景图。当我添加时它起作用`setVisible(true)`：

```
 $('button').click(function() {
        $('#pano').show();
    panorama.setVisible(true);
    }); 
```

# html - 输入表单填充在 IE 中不起作用

> ID：11059664
> 
> 赞同：0
> 
> 时间：2012-06-16T00:14:00.717
> 
> 标签：html, css, forms, internet-explorer

我正在尝试将 padding-right 添加到输入中，以便我可以将图像放置在那个角落并且没有文本流在它后面。它在 Chrome 和 Firefox 中运行良好，但在 IE 中运行良好。

我见过人们推荐使用 float:left; 但它仍然不起作用。

## 在这里看到问题：http: [//jsfiddle.net/4zRRt/](http://jsfiddle.net/4zRRt/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T00:25:40.297

这不是您想要的方式（可能，我猜，按钮图像显然对我不起作用）。

我猜你想要一个带有一个很好的提交按钮的输入，这个按钮总是在右边。

这是通过父相对元素和绝对按钮完成的，右偏移为 10px（以适应阴影所需的额外空间）。顶部设置为 0...

这是一个jsfiddle：

[http://jsfiddle.net/sg3s/4zRRt/10/](http://jsfiddle.net/sg3s/4zRRt/10/)

我在那里放了一些额外`display:block;`的东西来使输入块而不是内联，这也可以防止其他渲染问题。

# javascript - jQuery DataTables fnRender 增量列

> ID：11059666
> 
> 赞同：2
> 
> 时间：2012-06-16T00:14:26.483
> 
> 标签：javascript, jquery, datatables

我正在尝试在我的数据表中创建一行，每行递增 +1。有人告诉我，最简单的方法是使用 fnRender。现在我已经使用 fnRender 来更改服务器端处理器的列中已经存在的数据，但绝不会单独创建新列。
任何帮助都是极好的！

这是我当前的代码：

```
oTable = $('#testingz').dataTable({
    "bProcessing": true,
    "bServerSide": true,
    "bJQueryUI": true,
    "sPaginationType": "full_numbers",
    "aaSorting": [ [1,'desc'] ],
    "sDom": '<""l>rt<"F"fp>',
        "sAjaxSource": "server_processing.php",
        "aoColumnDefs": [ 
            {
                "fnRender": function ( o, val ) {
                return '<a href="http://honedge.com/' + o.aData[0] + '">' + o.aData[0] + '</a>';
                },
                "aTargets": [ 0 ]
            }
        ]
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T08:21:38.423

你的意思是这样的： http: [//datatables.net/release-datatables/examples/api/counter_column.html](http://datatables.net/release-datatables/examples/api/counter_column.html)

# r - 对于大型数据集，在 R 中的列表中从索引切换到名称（或其他属性）。(iGraph)

> ID：11059670
> 
> 赞同：0
> 
> 时间：2012-06-16T00:14:55.990
> 
> 标签：r, memory-management, bioinformatics, shortest-path, igraph

我正在使用 R 中的图形对象（igraph 包）。我应用了一个名为“get.shortest.paths()”的函数，它提供了从给定顶点到图中所有其他顶点的最短路径。该算法返回一个列表，其中列表的每个元素对应一个目标顶点，并包含源和目标之间最短路径上所有顶点的顶点索引。例如;

```
head(get.shortest.paths(graph, from = V(graph)[1], to = V(graph), mode = "out"))
[[1]]
[1] 0 (source and target are the same)
[[2]]
[1]     0 91835 38405 89704     1
[[3]]
[1]     0 91835 12104 39002 22670     2
[[4]]
[1]     0 62386 36754 89246 31045     3 
```

问题是当我想从顶点索引到顶点名称时。像这样的东西；

```
[[1]]
[1] "gene 1"
[[2]]
[1]     "gene 1"  "protein 45" "protein 83" "protein 70"     "gene 2"
[[3]]
[1]     "gene 1" "protein 45" "protein 30"  "reaction 2" "protein 404"     "gene 3"
[[4]]
[1]     "gene 1" "protein 4" "reaction 12" "protein 19"  "protein 494"   "gene 4" 
```

我尝试通过使用 lapply() 来做到这一点

```
path.index.list <-  get.shortest.paths(graph, from = V(graph)[1], to = V(cn), mode = "out")
path.name.list <- lapply(path.index.list, FUN = function(path) V(graph)[path]$name) 
```

...但这需要很长时间。“For”循环需要同样长的时间。事实上，我需要将一个源顶点的索引转换为名称到所有其他 100,000 多个顶点的确切时间是......

```
system.time(lapply(path.index.list, FUN = function(path) V(graph)[path]$name))
  user  system elapsed
608.62  152.69  761.66 
```

...整个图表大约需要 900 天。

这是“按引用传递”与“按值传递”问题之一吗？如果是这样，有人可以帮助我理解如何解决它吗？我听说过在 R 中使用散列或环境函数来解决这样的问题，有人可以对此发表评论吗？我还听说过 R 中的一些包可以帮助解决这个问题？

基本上，我怎样才能解决这个问题而不必用 C 语言编写代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T08:14:01.133

提前查询顶点名称，并在 中进行索引`lapply`：

```
names <- V(graph)$name
lapply(path.index.list, FUN = function(path) names[path]) 
```

我想这会快得多，因为`lapply`不必`V(graph)`每次都构建和名称列表来选择它的子列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T19:53:20.087

是的，我最初使用了 use "Tamás" 描述的 lapply 方法。我每次迭代大约需要 230 秒（每 1000 个项目大约需要 2 秒）。我尝试使用“fastmatch”包与使用矩阵的内存分配相结合，速度实际上下降了。我认为这意味着这更多的是 R 查找项目的速度然后是内存的问题。我需要将其降低到每次迭代少于 6 秒才能真正实用。我想我要去C...

# css - Flash元素上的CSS自定义光标？

> ID：11059671
> 
> 赞同：3
> 
> 时间：2012-06-16T00:15:25.663
> 
> 标签：css, flash, cursor

我正在尝试在 CSS 中实现自定义图像光标，例如

```
cursor:url(/img/custom.png), pointer; 
```

这很好用，除非鼠标移到 Flash 元素上（例如嵌入的 youtube 视频）。然后它恢复到标准鼠标光标。有没有办法覆盖这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:36:23.367

最好的“解决方案”可能是将自定义光标也包含在闪存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T01:12:38.327

不是一个完美的解决方案，[但这个网站](http://www.jquerytools.org/demos/toolbox/flashembed/onclick.html)建议放置一个空的 div，当您单击它时加载电影（也有助于初始页面加载时间）。

我不确定它是否有效，但[这个网站](http://progproblems.blogspot.com/2009/08/javascript-onclick-for-flash-embeded.html)说它有办法激活 javascript 命令。可能比你想要的要多，但我知道列出的解决方案摆脱了看似无限的 z-index 的 flash 对象（因此我知道它可以覆盖它的一部分）。

# facebook - 通过未出现的 POST 对象将图片发布到 Facebook 墙上

> ID：11059672
> 
> 赞同：0
> 
> 时间：2012-06-16T00:15:37.957
> 
> 标签：facebook, facebook-graph-api

我正在尝试将具有 publish_stream 权限的图片从我的网站发布到 Facebook。出于某种原因，我发布时图片没有显示，但其他一切正常。

通过访问[http://www.mysite.com/image/questions.png](http://www.mysite.com/image/questions.png)，图片正确显示。我错过了什么吗？

```
$body = array(
            'name'          => 'Join this site',
            'message'       => '',
            'description'   => 'Check this out',
            'picture'       => 'http://www.mysite.com/image/questions.png',
            'link'          => SITE_URL,
            );      
        $batchPost = array(); 
```

然后我批量发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T05:02:46.667

仔细检查它是否真的有效。

```
$body = array(
            'name'          => 'Join this site',
            'message'       => '',
            'description'   => 'Check this out',
            'picture'       => 'http://www.mysite.com/image/questions.png',
            'link'          => SITE_URL,
            );      
        $batchPost = array();
        $status = $facebook->api('/me/feed', 'POST', $body); 
        if (isset($status['id'])) //Add a check
        {
            echo "Message posted to wall!";
        } 
```

* * *

如果没有，您可以使用 JavaScript SDK`FB.ui`方法发布到 Facebook Wall。我认为它更灵活，因为用户可以输入自己的消息，这与开发人员通过 PHP SDK 方法定义的方式不同。

**JavaScript SDK FB.ui 方法**

```
<script>
function postToWall()
        {
            var obj = {
              method: "feed",
              name: "Join this site",
              description: "Check this out",
              caption: "CAPTION",
              picture: "http://www.mysite.com/image/questions.png",
              link: "SITE_URL"
            };

            function callback(response) {
              //do something
            }

            FB.ui(obj, callback);
        }
</script> 
```

有关 JavaScript SDK 提要对话框的更多信息：http: [//developers.facebook.com/docs/reference/dialogs/feed/](http://developers.facebook.com/docs/reference/dialogs/feed/)

**Edit:** Use another image and try again. [http://www.mysite.com/image/questions.png](http://www.mysite.com/image/questions.png) has been removed. Upload your picture on some image hosting website instead of hotlinking the image directly.

# javascript - JavaScript 中 Function.prototype 和 Object.prototype 的区别

> ID：11059673
> 
> 赞同：2
> 
> 时间：2012-06-16T00:15:45.943
> 
> 标签：javascript, string, object, prototype

*   实施：1

    ```
    Function.prototype.method = function (name,func){
        this.prototype[name] = func;
         return this;
    };    

    String.method('trim', function(){
        return this.replace(/^\s+|\s+$/g, '');
    }); 
    ```

*   实施：2

    ```
    String.prototype.trim = function() {
        return this.replace(/^\s+|\s+$/g, '');          
    } 
    ```

1和2有区别吗？除了 1 可以应用于所有对象，而 2nd 仅限于 String 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:27:49.473

在这两种情况下，只有 String 对象将获得该`trim`函数（即最终结果将是相同的）。正如定义的那样，第一个代码只是第二个代码的“快捷方式”（我把它放在引号中，因为最后，代码长度和实现第一种方法的努力与第二种方法大致相同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T06:47:48.790

适用于现代浏览器的更强大和通用的解决方案：

```
!Object.implement && Object.defineProperty (Object.prototype, 'implement', {
  // based on http://www.websanova.com/tutorials/javascript/extending-javascript-the-right-way
  value: function (mthd, fnc, cfg) { // adds fnc to prototype under name mthd
      if (typeof mthd === 'function') { // find mthd from function source
        cfg = fnc, fnc = mthd;
        (mthd = (fnc.toString ().match (/^function\s+([a-z$_][\w$]+)/i) || [0, ''])[1]);
      }
      mthd && !this.prototype[mthd] && 
        Object.defineProperty (this.prototype, mthd, {configurable: !!cfg, value: fnc, enumerable: false});
    }
});

// Allows you to do 

String.implement (function trim () { return this.replace(/^\s+|\s+$/g, ''); }); 
```

如引用的网站中所述，此代码确保在迭代对象属性时正确隐藏该方法。如果一个方法不存在，它也只会添加该方法。

见[http://jsfiddle.net/jstoolsmith/nyeeB/](http://jsfiddle.net/jstoolsmith/nyeeB/)

# winapi - 如何登录win32 c++到visual studio输出窗口？

> ID：11059675
> 
> 赞同：2
> 
> 时间：2012-06-16T00:15:50.107
> 
> 标签：winapi, visual-c++

我的 log4net 正在记录到 Visual Studio 输出窗口，但是我可以在 C++ win32 代码中使用什么代码来执行与我需要调试 C++ 相同的操作，并且似乎根本无法逐步完成它，并且日志记录在生产中很有用反正也一样。我添加了

```
wprintf(L"Registering hook handler\n"); 
```

但这似乎不起作用。自从我做 C++ 以来已经有好几年了，更不用说 win32 C++ 了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T00:21:41.133

我想你正在寻找[`OutputDebugString()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363362%28v=vs.85%29.aspx).

# javascript - nsiTimer 重复使用会导致溢出或内存问题吗？

> ID：11059677
> 
> 赞同：0
> 
> 时间：2012-06-16T00:16:12.490
> 
> 标签：javascript, firefox, timer

在[Mozilla 文档](https://developer.mozilla.org/en/nsITimer#initWithCallback%28%29)中它说：

> initWithCallback()：初始化一个定时器，在给定的毫秒间隔后触发。这个版本需要一个函数来调用和一个闭包传递给那个函数。

在此代码示例中：

```
setupTimer: function() {
    var waitPeriod = getNewWaitPeriod();

    myTimer.initWithCallback({ 
        notify: function(t) {
            foo();
            setupTimer();
        }
    },
    waitPeriod,
    Components.interfaces.nsITimer.TYPE_ONE_SHOT);
} 
```

传递给函数的闭包中实际包含了多少。闭包是否保留了整个堆栈的副本？此代码示例是否存在堆栈溢出或永远增加内存使用量的风险？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:44:17.043

In theory the closure keeps everything that's in scope for the closure (so in this case the local variables in setupTimer plus whatever variables setupTimer itself closes over). Note that this is different from the callstack: closure scope in JS is lexical, not dynamic, so it doesn't matter how you reached your function, only what the source of the function looks like.

In practice JS engines optimize closures heavily to speed up access to barewords in closures, so the set of things the closure actually keeps alive might be smaller than the theoretical set I describe above. But I wouldn't depend on that.

# rapidxml - rapidxml - 覆盖以前的 xml_nodes

> ID：11059679
> 
> 赞同：1
> 
> 时间：2012-06-16T00:16:31.177
> 
> 标签：rapidxml

我刚开始使用rapidxml。我首先创建一个要读取的 xml 文件。工作这么快很容易。

这是我手动装箱的。

```
<?xml version="1.0" encoding="utf-8"?>
<GPS>
    <Path>    
        <Point X="-3684.136" Y="3566.282" Z="285.2893" />
        <Point X="-3681.816" Y="3540.431" Z="283.3658" />
        <Point X="-3687.079" Y="3515.315" Z="282.6284" />
    </Path>
</GPS> 
```

我可以轻松阅读，没有任何问题。然后我想把它写到一个新文件中。但问题是它不断覆盖以前的 xml_nodes。

例如，

```
<?xml version="1.0" encoding="UTF-8"?>
<GPS>
    <Path>
        <Point X="-3687.08" Y="3515.31" Z="282.628"/>
        <Point X="-3687.08" Y="3515.31" Z="282.628"/>
        <Point X="-3687.08" Y="3515.31" Z="282.628"/>
    </Path>
</GPS> 
```

这是创建该 xml 文件的代码，

```
int Write(pathStruct *toStore)
{
    xml_document<> doc;

    xml_node<>* decl = doc.allocate_node(node_declaration);
    decl->append_attribute(doc.allocate_attribute("version", "1.0"));
    decl->append_attribute(doc.allocate_attribute("encoding", "UTF-8"));
    doc.append_node(decl);  

    xml_node<> *GPS = doc.allocate_node(node_element, "GPS");
    doc.append_node(GPS);

    cout << "Saving GrindPath " << endl;
    xml_node<> *Path = doc.allocate_node(node_element, "Path");
    GPS->append_node(Path);

    for(int i = 0;i<3;i++) //Temp Static
    {
        xml_node<> *Point = doc.allocate_node(node_element, "Point");
        Path->append_node(Point);

        char x[10];
        FloatToCharA(toStore->X[i], x);
        Point->append_attribute(doc.allocate_attribute("X", x));

        char y[10];
        FloatToCharA(toStore->Y[i], y);
        Point->append_attribute(doc.allocate_attribute("Y", y));

        char z[10];
        FloatToCharA(toStore->Z[i], z);
        Point->append_attribute(doc.allocate_attribute("Z", z));

        //GrindPath->append_node(Point);
        //doc.first_node()->append_node(GrindPath);
        //Point = GrindPath->next_sibling();

        cout << "x:" << toStore->X[i] << "    y:" << toStore->Y[i] << "   z:" << toStore->Z[i] << endl;
    }

    cout << "Done! " << endl;
    std::ofstream myfile;
    myfile.open ("./toStore.xml");
    myfile << doc;
    return 0;

}; 
```

我的问题是如何阻止它覆盖以前的 xml_nodes？我尝试了很多事情，但每次它仍然覆盖以前的 xml_nodes。我知道这一定很简单，否则我错过了大局。

感谢您的帮助和时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T00:26:20.353

我不确定这是否会有所帮助，但这存在于[文档](http://rapidxml.sourceforge.net/manual.html#namespacerapidxml_1two_minute_tutorial)中：

> 一个怪癖是节点和属性不拥有它们的名称和值的文本。这是因为它们通常只存储指向源文本的指针。因此，在为节点分配新名称或值时，必须注意确保字符串的正确生命周期。实现它的最简单方法是从 xml_document 内存池中分配字符串。在上面的示例中，这不是必需的，因为我们只分配字符常量。但是下面的代码使用 memory_pool::allocate_string() 函数来分配节点名称（它将与文档具有相同的生命周期），并将其分配给一个新节点。

我可以在您的代码中看到，您的 char 数组 x、y、z 似乎是在循环范围内创建的，因此不满足上述要求。

# iphone - 如何判断我在目标 c 中查看的 tableview 的哪一行？这是一种获取行数的方法吗？

> ID：11059681
> 
> 赞同：1
> 
> 时间：2012-06-16T00:16:49.843
> 
> 标签：iphone, objective-c, xcode, row, tableview

问题说明了一切。我只是很难弄清楚这一点。

我想做的是：我有一个从a到e的字母数组。我将表的部分设置为 2，因此行如下：a、b、c、d、e、a、b、c、d、e。我想让行和部分 # 显示在表格中的字母旁边。我可以使用 indexPath 找出行，但我不知道如何计算节号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:32:06.463

您需要检查 indexpath 部分

```
int section = indexPath.section; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T00:32:23.853

我不知道这是否会对您有所帮助，但如果您知道 indexPath 那么您也知道该部分（请参阅[此处](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/NSIndexPath_UIKitAdditions/Reference/Reference.html#//apple_ref/doc/uid/TP40007175)的文档）

```
int sectionNum = indexPath.section 
```

# ubuntu - 在 ubuntu 上更新软件包后，在 ubuntu 上播放框架命令停止工作

> ID：11059684
> 
> 赞同：1
> 
> 时间：2012-06-16T00:17:16.420
> 
> 标签：ubuntu, playframework

有没有其他人遇到过这个？我曾经能够使用“play run”在命令提示符下运行 play (v.1.2.3) 命令，但现在无法这样做。现在我收到以下错误（在更新了 ubuntu 包之后）：

播放失败格式：无法打开输入文件

我猜一种方法是简单地更改路径中播放目录位置的位置（预先而不是追加） - 任何其他建议（特别是为了避免这种情况继续发生）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:54:54.787

使用播放框架目录位置预先添加（而不是附加）路径解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T07:24:57.567

您还可以将 play-framework 可执行文件更早地放在 PATH 中。

```
$ echo $PATH 
```

您可能会看到 SoX 路径出现在播放框架路径之前。您可能正在将播放框架路径“附加”到 .bashrc 中的 $PATH。尝试“预先”它。

```
export PATH=${PLAY_FRAMEWORK}:$PATH 
```

或某种程度的东西。这是非常标准的 unix/windows/mac 路径的东西。

[在此处](https://groups.google.com/forum/#!topic/play-framework/yBjwFhJjSvY)参考 Google Groups 讨论

# c++ - 确认基本 c++ 语法

> ID：11059687
> 
> 赞同：1
> 
> 时间：2012-06-16T00:17:40.103
> 
> 标签：c++, reference

我是一名切换到 C++ 的 Java 程序员。我有一个类中的数据列表。我想返回存储在类变量中的列表的内容，然后生成一个新列表并将其存储在类变量中，这样我就可以开始将新数据添加到空列表中。我想我知道该怎么做，但是我想仔细检查一下，因为我是引用和 C++ 内存管理的新手，以后不希望出现愚蠢的内存泄漏。（注意，我不能轻易复制我的实际代码，所以我只是重写它，如果我输入错误，请原谅我）。

我相信正确的语法是这样的：

```
//mylist is typedef of a list type
mylist& temporaryList=classList;
classList=myList();
return classList; 
```

这个语法正确吗？另外，我是否需要担心随时释放返回的变量或 classList 变量，或者 RIAA 会为我处理这一切？

很抱歉提出这么简单的问题，但感谢您确认我的假设。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T00:22:43.850

```
mylist& temporaryList=classList; 
```

`tempraryList`是参考。当你改变`classList`时，它也会改变。尝试这个：

```
mylist tempraryList = classList; 
```

这将复制 mylist 的复制构造函数，创建一个新的而不是仅仅为另一个别名。

* * *

```
return classList; 
```

这将返回您刚刚决定的应该是新列表的列表。你想回来`temporaryList`。但是，请确保它不是通过引用返回的，因为`temporaryList`它会超出范围（清理自身，因为它是在堆栈上分配的）并且您最终会得到一个悬空引用。

同样，通常，不是分配默认构造函数的结果，类可能会提供一种`reset`函数来做到这一点，而无需另一个对象的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T01:21:38.257

正如@chris 指出的那样，您在使用引用时遇到了问题，引用具有很好的功能，即它们以几乎没有成本为实际对象*别名*，但在您的情况下，这意味着当您重置成员列表时，您正在重置您程序中的*唯一*列表。

正如@chris 还指出的那样，对您的代码的简单天真修复是*复制*列表，然后重置原始列表：

```
mylist getAndClear() {
   mylist temporaryList=classList;    // make a copy
   classList=myList();                // reset the internal
   return temporaryList;              // return the **copy**
} 
```

现在，这种方法的问题在于，当您知道原始列表将立即被销毁时，您会产生复制成本。*您可以通过使用复制和交换*习语^((*))来避免该成本：

mylist getAndClear() { mylist tmp; // 空交换(tmp, classList); // 交换内容，现在 classList 为空 // tmp 保存数据 return tmp; }

这是假设这`mylist`是一个`std::list`. 如果不是，请确保您实现`swap`（或在 C++11 中移动构造函数，这将启用高效的`std::swap`）。

* * *

^((*))虽然这似乎不是*复制和交换*习语的直接应用，但实际上是，要应用的修改正在*清除*列表。执行复制并在副本上应用更改（在这种情况下避免复制，因为更改正在清空它），然后在操作成功完成后交换内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T01:14:56.237

克里斯提到使用成员函数来重置或清除对象，如下所示：

```
mylist tmp = classList;
classList.clear();
return tmp; 
```

但是您通常可以通过首先避免复制来做得更好。

```
mylist tmp;
std::swap(tmp,classList);
return tmp; 
```

> 另外，我是否需要担心随时释放返回的变量或 classList 变量，或者 RIAA 会为我处理这一切？

你不需要`delete`资源，除非你`new`在某个地方。如果你确实使用`new`了，那么你也应该使用智能指针，这样你仍然不需要`delete`任何东西。

了解来自 Java 的 C++ 的最重要的事情之一是 C++ 对象默认是类值对象。那是：

```
class A {
    bool bar_called;
public:
    A() : bar_called(false) {}
    void bar() { bar_called = true; }
    bool has_bar_been_called_on_this_object() { return bar_called; }
};

void foo(A a) {
    a.bar();
}

int main() {
    A a;
    foo(a);
    std::cout << a.has_bar_been_called_on_this_object() << '\n';
} 
```

输出将指示 bar*尚未*被调用`a`。Java 使用但试图隐藏指针。因此，一旦您弄清楚 C++ 中的指针，事情对您来说应该更有意义，然后您将能够弄清楚如何*不*使用指针。

```
Object o = new Object(); // Java hides the fact that o is a pointer to an Object, but fails to hide the consequences
Object b = o; // b is a pointer to an object, the same Object o points to.

// Equivalent C++
Object *o = new Object();
Object *b = o; 
```

从您提供的 C++ 代码来看，在 Java 中，您会按照您的要求执行以下操作：

```
mylist tmp = classList;
classList = new mylist();
return tmp; 
```

C++ 中的等价物是：

```
mylist *tmp = classList; // classList is a pointer to a new'd up list.
classList = new mylist();
return tmp; 
```

然而，这不是惯用的 C++。在 C++ 中你通常不想使用指针，如果你想使用智能指针

```
std::shared_ptr<mylist> tmp = classList; // classList is a std::shared_ptr<mylist>
classList = std::make_shared<mylist>();
return tmp; 
```

或者

```
std::unique_ptr<mylist> tmp = std::move(classList); // classList is a unique_ptr
classList = std::unique_ptr<mylist>(new mylist()); // careful here, don't go calling a bunch of functions inside the mylist initializer, it's dangerous for reason beyond the scope of this post
return tmp; 
```

但是 C++ 的方式实际上是完全避免使用指针。

```
mylist tmp; // classList is not a pointer at all
std::swap(tmp,classList); // the values of classList and tmp are swapped
return tmp; // tmp is returned by value, tmp has the same value as classList, but is not the same object, tmp and classList are objects, not pointers to objects as they are in Java or in the above C++ examples. 
```

# php - 如何从 PHP 中同一文件中的函数访问文件范围内定义的数组？

> ID：11059691
> 
> 赞同：0
> 
> 时间：2012-06-16T00:18:26.423
> 
> 标签：php, scope

我正在写一个黑名单单词检查器。我将脚本命名为`blacklist_check.php`，它看起来像这样：

```
<?php
$black_list = [
  'ass',
  'anus',
  /* many others that i skipped here */
];

function is_black_listed ($word) {
  return in_array($word, $black_list);
}
?> 
```

但是，当我使用该`is_black_listed`功能时，我总是得到`Warning: in_array() expects parameter 2 to be array, null given`.

我应该把`$black_list`数组放在`is_black_listed`函数里面吗？我不想这样做，因为当我调用函数时总是会创建数组，而不是在我需要（或包含）脚本时才创建一次！

我应该在函数`global $black_list`内部使用吗？`is_black_listed`

帮助我解决这个问题的最佳实践！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T00:19:24.250

不要使用全局变量，它们很难维护并使您的代码可读性降低。相反，只需将数组传递给函数：

```
function is_black_listed ($word, $black_list) 
```

然后调用它：

```
is_black_listed( "bad words!", $black_list); 
```

更好的是，创建一个类来执行此操作，并将数组创建为成员变量：

```
class WordFilter {
    private $black_list = [ ... ];

    function __construct( $words = array()) {
        // Optionally add dynamic words to the list
        foreach( $words as $word) 
            $black_list[] = $word;
    }

    function is_black_listed( $word) {
        return in_array( $word, $this->black_list);
    }
}

$filter = new WordFilter( array( 'potty', 'mouth'));
$filter->is_black_listed( "bad"); 
```

# c# - 有效划分

> ID：11059700
> 
> 赞同：1
> 
> 时间：2012-06-16T00:19:42.310
> 
> 标签：c#, division

我想用一个 int 来划分一些 double 类型。我只需要字符串格式的 2 个 deicmal 位置的结果。就堆栈效率而言，最好的方法是什么？

```
double d=321321321313131233213213213213;
int i=123;

ToString(d/i); //what do I get when I do this? A double? A float?

       public String ToString(float? result) //what should I cast the result?
        {
            return @String.Format("{0:#,0.##;} divided double by int", result);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T00:23:41.587

> ToString(d/i); //当我这样做时我会得到什么？双标？浮标？

你会得到双倍的。将 double 除以 int 将产生 double 值。

> public String ToString(float?result) //我应该怎样转换结果？

你会得到 a`double`的价值，所以你最好在`double`这里使用 a 。你永远不会得到一个可以为空的类型，也绝对不会得到`float`一个结果，所以使用`float?`是完全不合适的。

> 就堆栈效率而言，最好的方法是什么？

这真的不值得担心，当然，除非你分析并发现这确实是一个问题。构建字符串将比除法操作昂贵得多，而且两者都不太可能成为性能热点。

* * *

处理此问题的一种干净方法就是使用[double.ToString("N2")](http://msdn.microsoft.com/en-us/library/kfsatb94.aspx)，即：

```
double result = d/i;
string resultAsString = result.ToString("N2"); 
```

如果你想要一个完整的、格式化的字符串，你可以使用：

```
string resultAsString = string.Format("{0:N2} divided double by int", result); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T00:23:06.260

行。首先，你得到`double`，**不是** `double?`or `float?`。数学函数*永远*不应返回可为空的类型。如果您假设无穷大表示为`null`，那您就错了。无穷大由位确定。您可以使用 来查看双精度数是否为无穷大[`Double.IsInfinity(double)`](http://msdn.microsoft.com/en-us/library/system.double.isinfinity%28v=vs.100%29.aspx)。

```
[SecuritySafeCritical]
public static unsafe bool IsInfinity(double d)
{
    return ((*(((long*) &d)) & 0x7fffffffffffffffL) == 0x7ff0000000000000L);
} 
```

* * *

> 就堆栈效率而言，最好的方法是什么？

我建议在 Coding Horror 上看看[微优化的悲剧。](http://www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater.html)

* * *

至于功能。这是完全没有必要的。你最好的选择是[`Double.ToString(...)`](http://msdn.microsoft.com/en-us/library/system.double.tostring%28v=vs.100%29.aspx)：

```
double val = d / i;
string result = val.ToString("N2"); 
```

但是，如果您正在使用[`String.Format(...)`](http://msdn.microsoft.com/en-us/library/system.string.format%28v=vs.100%29.aspx)，则可以使用：

```
double val = d / i;
string result = string.Format("{0:N2} divided double by int", val); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-16T00:33:02.770

哈克解决方案：

如果您只需要 2 位小数，则可以将 double 乘以 100，将其转换为整数，然后除以*i*。

现在获取结果的字符串，并在最后两个字符之前添加一个点。

不要忘记处理负值和舍入问题的边缘情况。

如果您真的关心效率，那么与整数除法相比，分数除法是一个缓慢的过程。

# javascript - pjax 失去了 rails javascript

> ID：11059705
> 
> 赞同：1
> 
> 时间：2012-06-16T00:20:50.380
> 
> 标签：javascript, ruby-on-rails-3, pjax

我有一些 javascript 在第一页加载时加载，但随后被 pjax 迷路了。

有什么办法可以解决这个问题吗？我只是在 application.html 文件上运行了 pjax，所以我应该让它不那么激进，还是有一些 js 魔法可以保存我的 js 代码。

```
$(document).ready(function() {
  $("#note_label_tokens").tokenInput("/labels.json", {
    crossDomain: false,
    prePopulate: $("#note_label_tokens").data("pre"),
    theme: "facebook"
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T21:52:22.937

将JS变成一个函数，然后`document.ready`在`end.pjax`事件触发时调用它。

# list - 流口水列表的问题没有针对所有匹配的项目触发

> ID：11059709
> 
> 赞同：1
> 
> 时间：2012-06-16T00:21:31.717
> 
> 标签：list, drools, rule-engine

我从流口水引擎开始。我调整了他们的示例程序。它似乎不起作用。无论`MessageItem`我在里面放了多少`Message`，我总是会在控制台上打印一个“测试”。

这是我的列表文件：

```
package com.sample

import com.sample.Message;
import com.sample.MessageItem;

rule "Hello World"
    when
        m : Message( status == Message.HELLO, $mItems : messageItems)
    mi : MessageItem(message == m, item == "test") from $mItems
then
    System.out.println( "Test "); # This is printed only once.
    # code to update m and mi
    update( m );
    update (mi);
end

end 
```

这是我的课程，我省略了 getter/setter

```
public static class Message {

    public static final int HELLO = 0;
    public static final int GOODBYE = 1;

    private String message;
    private List<MessageItem> messageItems = new ArrayList<MessageItem>();

    private int status;

}

public static class MessageItem {

    private String item;
    private Message message;        
} 
```

# ravendb - 嵌入式 RavenDB - 如何在不同的端口上运行管理工作室

> ID：11059710
> 
> 赞同：3
> 
> 时间：2012-06-16T00:21:31.603
> 
> 标签：ravendb, ravendb-studio

它目前在 8080 上运行，但我需要该端口用于其他服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T02:44:25.037

也许这个？

```
var store = new EmbeddableDocumentStore
                        {
                            Configuration =
                                {
                                    Port = 12345,
                                }
                        }; 
```

# python - 获取 url 时出现 UnicodeEncodeError

> ID：11059714
> 
> 赞同：9
> 
> 时间：2012-06-16T00:22:06.593
> 
> 标签：python, unicode, encoding, urlfetch, python-unicode

我在尝试使用 lxml 获取 HTML 文档中的所有文本节点时遇到了这个问题，但我得到了 UnicodeEncodeError: `'ascii' codec can't encode character u'\xe9' in position 8995: ordinal not in range(128)`。但是，当我尝试找出此页面的编码类型 ( `encoding = chardet.detect(response)['encoding']`) 时，它说它是`utf-8`. 一个页面有 utf-8 和 ascii 似乎很奇怪。其实这个：

```
fromstring(response).text_content().encode('ascii', 'replace') 
```

解决问题。

这是我的代码：

```
from lxml.html import fromstring
import urllib2
import chardet
request = urllib2.Request(my_url)
request.add_header('User-Agent',
                   'Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0)')   
request.add_header("Accept-Language", "en-us")
response = urllib2.urlopen(request).read()

print encoding
print fromstring(response).text_content() 
```

输出：

```
utf-8
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe9' in position 8995: ordinal not in range(128) 
```

我能做些什么来解决这个问题？请记住，我想对其他几个页面执行此操作，因此我不想单独编码。

**更新：**

也许这里还有其他事情发生。当我在终端上运行这个脚本时，我得到了正确的输出，但是当在 SublimeText 中运行它时，我得到 UnicodeEncodeError...¿？

**更新2：**

当我使用此输出创建文件时也会发生这种情况。`.encode('ascii', 'replace')`正在工作，但我想要一个更通用的解决方案。

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T02:49:27.897

你可以尝试用 repr() 包装你的字符串吗？ [这篇文章](http://boodebr.org/main/python/all-about-python-and-unicode#WHYNOPRINT)可能会有所帮助。

```
print repr(fromstring(response).text_content()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T03:23:19.897

就您在编辑中所说的写出文件而言，我建议使用编解码器模块打开文件：

```
import codecs
output_file = codecs.open('filename.txt','w','utf8') 
```

我不知道 SublimeText，但它似乎试图将您的输出读取为 ASCII，因此出现编码错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T20:51:22.450

根据您的第一次更新，我会说终端告诉 Python 输出 utf-8 并且 SublimeText 明确表示它需要 ascii。所以我认为解决方案是在 SublimeText 中找到正确的设置。

但是，如果您无法更改 SublimeText 的期望，最`encode`好像在单独的函数中那样使用该函数。

```
def smartprint( text ) :
    if sys.stdout.encoding == None :
        print text
    else :
        print text.encode( sys.stdout.encoding , 'replace' ) 
```

您可以使用此功能代替`print`. 请记住，在 SublimeText 中运行时程序的输出与终端不同。因为`replace`当这段代码在 SublimeText 中运行时，重音字符会失去重音，例如`é`将显示为`e`.

# php - PHP中的失败变量赋值？

> ID：11059717
> 
> 赞同：0
> 
> 时间：2012-06-16T00:22:27.793
> 
> 标签：php

> **可能重复：**
> [PHP 的合并函数？](https://stackoverflow.com/questions/1013493/coalesce-function-for-php)

我不确定这通常被称为什么，但我希望标题能够很好地传达信息。我所拥有的是一些变量，其中一些可能为空。

我想要做：

```
$a = $b || $c || $d; 
```

$a 最终成为第一个非空变量的 = 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T00:26:44.843

据我所知，PHP 不像 JavaScript 那样支持这一点。

但是，您可以执行以下操作：

```
$a = $b ? $b : ($c ? $c : $d); 
```

* * *

更通用的解决方案：

```
function fallthrough($arr) {
    //$arr should be an array of possible values. The first non-null value is returned
    do $a = array_shift($arr);
    while($a === null && $arr);
    return $a;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T00:32:12.307

```
<?php
$a = 0;
$b = false;
$c = true; //should become this
$d = '1';
$e =  $a ?: $b ?: $c ?: $d;
var_dump($e);
//bool(true)

//should be '1' if order is different
$e =  $a ?: $b ?: $d ?: $c;
var_dump($e);
//string(1) "1" 
```

...但是`?:`有点新，您会混淆您的同事/其他编码人员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T00:37:51.113

我不认为这是可能的。我认为您必须使用其他更费力的方法。即创建一个变量数组，遍历它，直到找到一个非空值并中断循环，如下所示：

```
$vars = array("b" => $b, "c" => $c, "d" => $d);

foreach($vars as $var) {
   if($var != null) {
      $a = $var;
      break;
   }
} 
```

好吧，就像这里的其他一些答案所说的那样，您可以使用速记方式来编写它，但是编写可读的代码也很重要。上面的代码可读性很好。

# entity-framework - 使用继承的实体过滤 OData 请求会导致转换异常

> ID：11059719
> 
> 赞同：2
> 
> 时间：2012-06-16T00:22:57.197
> 
> 标签：entity-framework, linq-to-entities, wcf-data-services, odata

我觉得我问了很多问题，但我一直卡住。我正在开发 OData 服务，并且我想要一个可以关联多个用户指定的名称-值对的实体，然后可以对其进行搜索。我正在使用 EF4.3，DataServiceVersion 3.0。我正在使用自定义元数据、查询和更新提供程序。

所以假设我有一个实体Person：

```
public class Person : EntityBase
{
    public virtual IList<Property> PropertySet { get; set; }
} 
```

（EntityBase 是我所有实体都来自的常见 POCO；它只有一个 Guid ID 属性。）现在让我们定义我们的属性：

```
public abstract class Property : EntityBase
{
    public string Name { get; set; }
    public Person Person { get; set; }
    public Guid PersonId { get; set; }
}

public class IntProperty : Property
{
    public int? IValue { get; set; }
}

public class StringProperty : Property
{
    public string SValue { get; set; }
} 
```

到现在为止还挺好。在我的配置中，我使用 Table Per Hierarchy 进行继承。

现在，我可以向我的 Person 添加一个属性，并且当我提出这样的请求时：

```
GET /Service/People(guid'THE_ID')?$expand=PropertySet 
```

有用：

```
{"d": {
  "__metadata": {...},
  "PropertySet": {
    "results": [{
      "__metadata": {...},
      "Id": "PROP_1_ID",
      "Name": "Number",
      "IValue": 1234
    },{
      "__metadata": {...},
      "Id": "PROP_2_ID",
      "Name": "EmailAddress",
      "SValue": "AAAA"
    }]
  },
  "Id": "THE_ID",
  }
} 
```

如果我查询具有名为“EmailAddress”的属性的人，则可以：

```
GET /Service/People?$expand=PropertySet&$filter=PropertySet/any(x: x/Name eq 'EmailAddress') 
```

但即便如此，我也不得不采取一些技巧。我实现了一个表达式访问者，并删除了一些 Linq To Entities 似乎不喜欢的比较：

```
protected override Expression VisitBinary(BinaryExpression node)
{
  if (node.NodeType == ExpressionType.Equal)
  {
    Expression left = Visit(node.Left);
    Expression right = Visit(node.Right);

    ConstantExpression rightConstant = right as ConstantExpression;
    if (null != rightConstant && rightConstant.Value == null)
    {
      if (left.Type == typeof(IList<Property>))
      {
        return Expression.Constant(false, typeof(bool));
      }
    }
  }
  return base.VisitBinary(node);
}

protected override Expression VisitConditional(ConditionalExpression node)
{
  Expression visitedTest = Visit(node.Test);
  Expression visitedIfTrue = Visit(node.IfTrue);
  Expression visitedIfFalse = Visit(node.IfFalse);
  ConstantExpression constantTest = visitedTest as ConstantExpression;
  if (null != constantTest && constantTest.Value is bool)
  {
    return ((bool)constantTest.Value) ? visitedIfTrue : visitedIfFalse;
  }
  return Expression.Condition(visitedTest, visitedIfTrue, visitedIfFalse);
} 
```

要点是第一次覆盖我的查询得到诸如“it.PropertySet == null”之类的表达式，我知道这永远是不真实的。（在我的峰值中，唯一具有 PropertySet 的是 Person，并且 Person 始终具有 PropertySet。）在第二个覆盖中，我正在查看诸如 "IIF((it.PropertySet == null), Empty (), it.PropertySet)”，我知道“它”总是有一个 PropertySet。这可以防止将 IList 与 null 进行比较时出错。

现在，问题。

仅仅搜索属性的存在是不够的。我想检查它的价值：

```
GET /Service/People?$expand=PropertySet&$filter=PropertySet/any(x: x/Name eq 'EmailAddress' and cast(x, 'InheritedPropertyTest.Entities.StringProperty')/SValue eq 'AAAA') 
```

这是结果查询：

```
value(System.Data.Objects.ObjectQuery`1[InheritedPropertyTest.Entities.Person])
.MergeAs(AppendOnly)
.Where(it => it.PropertySet.Any(x => ((x.Name == "EmailAddress") AndAlso (IIF((Convert(x) == null), null, Convert(x).SValue) == "AAAA"))))
.OrderBy(p => p.Id)
.Take(100)
.Select(p => new ExpandedWrapper`2() {ExpandedElement = p, Description = "PropertySet", ReferenceDescription = "", ProjectedProperty0 = p.PropertySet.OrderBy(p => p.Id)    .Take(100)}) 
```

但我收到此错误：“无法将类型 'InheritedPropertyTest.Entities.Property' 转换为类型 'InheritedPropertyTest.Entities.StringProperty'。LINQ to Entities 仅支持转换实体数据模型原始类型。” 所以......现在我又被困在墙上撞我的头了。也许我的继承设置不正确？我是否需要重载其他一些表达式访问器方法才能使转换工作？如何说服 Linq To Entities 使用继承的属性？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T18:11:33.670

使用类型段而不是强制转换。因此，例如 x/InheritedPropertyTest.Entities.StringProperty/SValue 应该被转换为 EF 应该能够处理的 TypeOf。

请注意，尽管 EF 上的自定义提供程序无论如何都会有很多问题。简化表达式的一种方法是关闭空值传播 (IDataServiceQueryProvider.IsNullPropagationRequired = false)。那应该摆脱 IFF(i==null, null, something)。但是您仍然会遇到问题，尤其是当您开始使用投影 ($select) 时。

# hadoop - 在 Hadoop MapReduce 中是否可以使用多个不同的映射器进行多个输入？

> ID：11059725
> 
> 赞同：12
> 
> 时间：2012-06-16T00:23:36.073
> 
> 标签：hadoop, mapreduce

在 Hadoop MapReduce 中是否可以使用多个不同的映射器进行多个输入？每个映射器类都在一组不同的输入上工作，但它们都会发出由同一个 reducer 消耗的键值对。请注意，我在这里不是在谈论链接映射器，而是在讨论并行运行不同的映射器，而不是按顺序运行。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-16T01:31:57.073

这称为联接。

您想使用 mapred.* 包（较旧，但仍受支持）中的映射器和缩减器。较新的包 (mapreduce.*) 只允许一个映射器输入。使用 mapred 包，您可以使用 MultipleInputs 类来定义连接：

```
MultipleInputs.addInputPath(jobConf, 
                     new Path(countsSource),       
                     SequenceFileInputFormat.class, 
                     CountMapper.class);
MultipleInputs.addInputPath(jobConf, 
                     new Path(dictionarySource), 
                     SomeOtherInputFormat.class, 
                     TranslateMapper.class);

jobConf.setJarByClass(ReportJob.class);
jobConf.setReducerClass(WriteTextReducer.class);

jobConf.setMapOutputKeyClass(Text.class);
jobConf.setMapOutputValueClass(WordInfo.class);

jobConf.setOutputKeyClass(Text.class);
jobConf.setOutputValueClass(Text.class); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T02:55:27.643

我将用一个问题、2 个答案和一个反推荐来回答你的问题。

问题是：您看到并行运行异构地图作业有什么好处，而不是串行运行它们，输出可以正确打乱的同质结果？是否避免两次传递相同的记录，一次使用身份映射？

第一个答案是同时安排两个仅 mapper 的作业，每个作业在您的舰队的一半上（或任何与输入数据大小最匹配的比率），输出同质结果，然后是执行 join 的仅 reducer 作业。

第二个答案是创建一个能够识别和转换两种类型的异构输入的自定义 InputFormat。这非常难看，但它可以让你避免第一个建议的不必要的身份映射。

反对建议是*不要*使用 Chris 回答中已弃用的 Hadoop API。Hadoop 非常年轻，但 API 正在围绕“新”风格稳定下来。你最终会到达版本锁定。

# git - 安装 credential-osxkeychain 后仍然提示输入凭据

> ID：11059729
> 
> 赞同：9
> 
> 时间：2012-06-16T00:24:17.123
> 
> 标签：git, github

简单的问题，但我无法进一步调试。我按照此处的设置说明进行操作：[https](https://help.github.com/articles/set-up-git) ://help.github.com/articles/set-up-git来获取我自己的存储库设置。我像这样安装`git-credential-osxkeychain`并放置它：

```
-rwxr-xr-x@ 1 root  wheel    15520 Jun 11 21:43 git-credential-osxkeychain 
```

如果我跑步，`git credential-osxkeychain`我会得到预期的结果：

```
# Usage: git credential-osxkeychain <get|store|erase> 
```

安装后，系统会提示我一次，我提供我的凭据，希望这些凭据存储在我的钥匙串中。但是查看钥匙串访问时，我在搜索时看不到 github，并且每次尝试`git push`.

我正在使用 git 版本 1.7.7.4 运行 10.7.4 mac os x。

对于这个烦人的问题的任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T23:32:38.183

您可能会遇到问题，因为您的 git 稍微过时了。我目前有 git 1.7.10.4。

# php - MongoDb 搜索重音字符

> ID：11059734
> 
> 赞同：0
> 
> 时间：2012-06-16T00:25:33.570
> 
> 标签：php, mongodb

我的网站有一个很好的基本搜索，除了 MongoDB 将 Equinoxe 和 Equinoxe 视为两个独立的东西，所以当我搜索 Équinoxe 时，它​​不会找到 Equinoxe。

有没有办法让 MongoDB 将它们视为同一事物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T07:24:10.947

MongoDB 目前没有实现 Unicode 语言环境搜索算法，因此您可以为此想出一种方法并创建一个“搜索友好”的额外字段。我建议你看看以下几点：

*   [http://pecl.php.net/translit](http://pecl.php.net/translit)（摆脱重音）
*   [http://pecl.php.net/package/stem](http://pecl.php.net/package/stem)（用于词干提取，即：词干提取 -> 词干，步行 -> 步行）

# java - 不让用户散焦框架？

> ID：11059739
> 
> 赞同：1
> 
> 时间：2012-06-16T00:26:02.473
> 
> 标签：java, swing, focus, frame

所以你知道在 Microsoft Word 中，当你转到文件 --> 选项时，它不会让你做任何其他事情，直到你关闭它？Java中有类似的东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T00:30:44.517

是的，它们被称为模态对话框。[模态教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/modality.html)。

# php - 防止超过20个字符通过验证

> ID：11059744
> 
> 赞同：0
> 
> 时间：2012-06-16T00:26:34.960
> 
> 标签：php, regex

我有这个简单的正则表达式来验证坐标：`^([0-9.,-]+){18,20}$^`。例如，如果坐标是 33.431441,-170.15625 并且少于 18 个字符，我会收到一条错误消息。好的！但是，如果我添加更多字符来表示 23 或更多，即使我已将锁定设置为 20，它也会通过。

[您可以在http://regexpal.com/](http://regexpal.com/)上测试正则表达式。

我该如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T00:30:11.957

您需要前导克拉，或者您只检查字符串中的最后 18-20 个字符：

```
/^[0-9\.,-]{18,20}$/ 
```

编辑：另外，删除加号，正如其他人所指出的那样。
Edit2：Parens 是多余的
Edit3：需要转义句点（否则，它匹配任何字符）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T00:29:25.513

应该只是`^([0-9.,-]){18,20}$`。表示前面的`+`一个或多个元素，然后你有 18 到 20*个*。您只需要 18 到 20 个上述元素。最后不需要插入符号，因为这意味着“字符串的开头”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T00:38:54.163

如果您想限制限制并验证坐标格式，这里有一个建议。

假设纬度，经度：

```
^-?\d{1,2}(\.\d{1,5})?,-?\d{1,3}(\.\d{1,5})?$ 
```

逗号总是消耗 1 个字符。最大经度主要数字为 3 个字符。最大纬度主要数字为 2 个字符。可选的小数点占 2 个字符。可选极性为 2 个字符。

这样我们就保留了 10 个字符，每边留出 5 个小数位。您可以将 \d{1,5} 调整为 \d{4,5} 之类的值，如果您需要至少 18 位，则强制使用小数位。

# mysql - 如何在sql中编写外键？

> ID：11059748
> 
> 赞同：0
> 
> 时间：2012-06-16T00:27:10.493
> 
> 标签：mysql, sql

嗨，这是我要创建的表：

```
CREATE TABLE images

(

id PRIMARY KEY NOT NULL INT,

product_id FOREIGN KEY NOT NULL INT,

src varchar(255) NOT NULL

) 
```

但它不让我（我收到语法错误）。有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:40:12.493

```
CREATE TABLE IMAGES(
Id int NOT NULL,
PRODUCT_ID int NOT NULL,
src varchar(255) NOT NULL,
PRIMARY KEY (Id),
FOREIGN KEY (P_Id) REFERENCES PRODUCTS(P_Id)
 ) 
```

并确保首先构建 Products 表，并执行引用外键

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T00:32:00.927

查看[InnoDB Foreign Key Constraints](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)以了解要使用的正确语法。特别是，您需要在创建外键时声明要引用的列。

此外，由于您使用的是 MySQL，请确保您的表使用`InnoDB`，否则实际上不会强制执行外键。

# c# - c# for kinect 的鼠标点击事件

> ID：11059752
> 
> 赞同：1
> 
> 时间：2012-06-16T00:27:47.230
> 
> 标签：c#, c#-4.0, kinect

我想知道我怎么能用 kinect 模拟 C# 的鼠标点击。我试图用手识别某种模式以单击鼠标，但我不熟悉鼠标事件。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T00:48:29.607

我对你的问题有点困惑......试图调用鼠标事件，或者用手识别模式？

对于第一个选项，您可以调用 OnMouseClick 事件。您可能会为一个对象调用它，但您可能必须将其设为全局（查看[此链接](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/dd375b80-775e-4c8b-ab25-2985f272ddec)）。对于第二种，一种方法是将[AForge](http://aforgenet.com/)与您的 kinect 一起使用（对不起，如果我使用了太多链接，但这[是](http://www.conquex.com/microsoft-kinect-and-aforge-net/)一个很好的方法）。您甚至可以使用 AForge 和摄像头来检测鼠标点击。例如（另一个链接）[这里](http://www.aforgenet.com/articles/hands_gesture_recognition/)是来自 AForge 开发人员之一的示例。另一种方法是使用我不熟悉的[emgucv 。](http://www.emgu.com/wiki/index.php/Main_Page)

不管怎样，祝你好运！对您的问题 +1（对于您要执行的操作）。

# iphone - 如何摆脱粘滞的 iPad 闪屏？

> ID：11059755
> 
> 赞同：0
> 
> 时间：2012-06-16T00:28:53.487
> 
> 标签：iphone, ios, ipad

最初，我将我的应用程序开发为 Universal。然后我为 iPad 单独设计了闪屏。最近我决定只在 iPhone 设备模式下部署我的应用程序。我的应用程序没有花哨的图形，它看起来很好，并且在 iPad 上以 1x 或 2x 模式完美运行。

为此，我设置`Devices`为`iPhone`在`TARGET/Summary/IOS Application Target`窗格中。我将为 iPhone 创建的新启动图像拖到`Launch images`占位符中，一张用于非 Retina 显示器，一张用于 Retina 显示器。

但是，当我通过调试器或独立在 iPad 上启动我的 iPhone 应用程序时，我不再使用的旧 iPad 闪屏出现了。它们看起来很糟糕，因为图像中心似乎像最初为 iPad 创建的那样向下移动。

我回到 XCode 并暂时将`Device`类型更改为`Universal or iPad`. `Launch images`我从占位符和文件系统中物理删除了图像。

不幸的是，当我在 iPhone 设备模式下构建我的应用程序并将其部署到我的 iPad 上时，我之前创建的 iPad 启动图像仍然会出现。我怎样才能一劳永逸地摆脱它们并让应用程序使用我最近创建和设置的 iPhone 启动图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:38:09.240

如果您从磁盘中删除了图像，请清理所有目标（在 Xcode 产品->清理中）并重建。这样做之后应该没有办法显示旧图像（如果出现，则意味着它没有从您的项目中正确删除）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T05:22:53.967

1.  清理您的项目 ( `Command+Shift+Option+K`)
2.  关闭 Xcode，前往`~/yourCurrentUser/.Library/Developer/Xcode/DerivedData` Find the folder for your project，然后将其删除。
3.  删除模拟器或测试设备中的应用程序。
4.  现在构建并运行应用程序，它必须工作；如果没有，请再次删除最终图像，并重复上述步骤。

**不要忘记检查您的 info.plist 文件中的 Icon Files 键。有时，初始屏幕图像会无缘无故地添加到图标文件键中！您必须从那里删除它们。**

# c++ - 我是否需要断开从 XGetXCBConnection 获得的 xcb_connection_t？

> ID：11059756
> 
> 赞同：5
> 
> 时间：2012-06-16T00:29:01.343
> 
> 标签：c++, c, xlib, xcb

这是我看到的一些 GLX 代码的示例：

```
display = XOpenDisplay(0);
// ...
xcb_connection_t *connection = XGetXCBConnection(display);
// ...
XCloseDisplay(display); 
```

我注意到那里没有`xcb_disconnect`。它是否正确？还有，`connection`关闭显示后还有效吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T00:36:16.550

`XCloseDisplay`似乎撤消了显示器的创建（因此破坏了它），并且由于 XCB 连接对象是从显示器派生的，因此一旦关闭显示器，连接就会失效似乎是合理的。

# android - onLocationChanged() 有哪些替代方法？

> ID：11059762
> 
> 赞同：3
> 
> 时间：2012-06-16T00:30:15.867
> 
> 标签：android, latitude-longitude

我在 API 级别 10 使用 Android 和 Google 地图，我通过 telnet 获得纬度和经度。

```
public void onLocationChanged(Location location) {
    lat = location.getLatitude();
    lng = location.getLongitude();
    //...
} 
```

但是用户应该先移动。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:41:20.957

onLocationChanged(Location location) 的替代方法是使用位置管理器和广播接收器来获取用户的位置信息。请参阅文档以阅读有关[Location Manager 类](http://developer.android.com/reference/android/location/LocationManager.html)的所有信息。使用位置管理器类，您将能够设置要探测用户位置的时间间隔，即使他们没有移动。你将会有：

```
LocationManager locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);

Intent intent = new Intent(context, LocationReceiver.class);
            pendingIntent = PendingIntent.getBroadcast(context, REQUEST_CODE, intent, PendingIntent.FLAG_UPDATE_CURRENT);

            List<String> knownProviders = locationManager.getAllProviders();

            if(locationManager != null && pendingIntent != null && knownProviders.contains(LocationManager.GPS_PROVIDER)){
                locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, MINUTE_INTERVAL*5, 0, pendingIntent);
            }

            if(locationManager != null && pendingIntent != null && knownProviders.contains(LocationManager.NETWORK_PROVIDER)){
                locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, MINUTE_INTERVAL*5, 0, pendingIntent);
            } 
```

在 LocationReceiver 类（广播接收器）中，您将有一个 onRecieve() 方法，您可以在其中使用：

```
public void onReceive(Context context, Intent intent) {
        Bundle bundle = intent.getExtras();
        location = (Location) bundle.get(LocationManager.KEY_LOCATION_CHANGED); 
```

您可以将该位置对象用于许多事情，请参阅 [Android Location](http://developer.android.com/reference/android/location/Location.html)文档。

# jquery - 在 Rails3 、 jQuery 和 AJAX 中更新并保存变量到数据库（没有表单）

> ID：11059771
> 
> 赞同：1
> 
> 时间：2012-06-16T00:31:43.213
> 
> 标签：jquery, ruby, ajax, ruby-on-rails-3, model-view-controller

我正在一个网站上工作，我有一个页面，用户可以从一组屏幕截图中选择视频的封面图片。我已经将图像全部显示在一个网格中，并且我添加了 jQuery，以便用户最后点击的任何视频都被“选中”并在其周围有一个框架。

我需要帮助的是将其写入数据库。我正在寻找的只是一种*保存*此选择的方法。

这就是我现在所拥有的。在视频控制器中：

```
 def cover_selected
    @video.cover_url = params[:selected_cover]
    @video.save
  end 
```

这是在视频/show.html.erb 中：

```
<%= stylesheet_link_tag 'application.css' %> 
<% provide(:movie_url, @h264_encoding.url) %>
<div class="container">
<% if @original_video.status == "success" %>
  <div id="strobemediaplayback">Movie goes here!</div>
  <br/><h2>Select a cover image</h2>
  <% @h264_encoding.screenshots.each_with_index do |screenshot,i| %>
    <% if i%3 == 0 %> 
        <div class="row">
    <% end %>
    <div class="span3" style="margin-bottom:20px"><img class="screenshot" id="<%= i %>" src="<%=  screenshot %>" />
    </div>
    <% if i%3 == 2 %>
        </div>
    <% end %>
  <% end %>
<% end %>
</div>

<script>
  $(document).ready(function(){
    $('div.row img').click(function(e) {
      e.preventDefault();
      $('div.row img.selected').removeClass('selected');
      $(this).addClass('selected');
      $.ajax({
       url: '/videos/cover_selected/',
       data: { selectedCover: this.id },
      });     
    });
  });
</script> 
```

我的视频架构包括：

```
 create_table "videos", :force => true do |t|
    t.string    "title"
    t.timestamp "created_at",       :null => false
    t.timestamp "updated_at",       :null => false
    # ... and so on
    t.string    "cover_url"
  end 
```

如何更新 @video 的 cover_url 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:24:20.087

你需要 3 件协同工作才能做到这一点——

1) 控制器中的操作 2) show.html.erb 中的适当 jQuery，以及 3) 路由，以便 rails 可以将传入数据发送到正确的操作。

控制器中的操作已关闭，这将起作用：

```
 def cover_selected
    @video = Video.find(params[:video_id])
    @video.update_attribute(:cover_url, params[:selected_cover])
    respond_to do |format|
      format.all { render :nothing => true, :status => 200 }
    end
  end 
```

jQuery 代码没问题，但可以更新它以显示当您进入页面时选择的封面：

```
 $(document).ready(function(){
    var video_id = <%= @video.id %>;
    $('div.row img[id=<%= @video.cover_url || 0 %>]').addClass('selected');
    $('div.row img').click(function(e) {
      e.preventDefault();
      $('div.row img.selected').removeClass('selected');
      $(this).addClass('selected');
      $.ajax({
       url: '/videos/cover_selected/',
       data: { 'selected_cover': this.id,
               'video_id': video_id },
      });     
    });
  }); 
```

最后，在 Rails 3 中，您需要添加一个路由，以便 Rails 知道如何处理请求！

```
 get 'videos/cover_selected' 
```

确保将其放在行的上方，`resources :videos`这样 Rails 就不会查找 id=cover_selected 的视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T01:07:21.583

您需要使用对服务器的异步调用 (AJAX)。

```
$('div.row img').click(function(e) { 
    e.preventDefault();  // FYI - only need this for <a href="" /> elements

    $.ajax({
       url: '/mysite/saveSelectedCover/',
       data: { selectedCover: this.id },
       ...
    });     
}); 
```

您需要了解的有关 jQuery 的 AJAX 功能的所有信息都可以在他们的文档中找到。 [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# ldap - 使用 webclient 和 LDAP 在哪里进行哈希处理

> ID：11059773
> 
> 赞同：0
> 
> 时间：2012-06-16T00:31:58.790
> 
> 标签：ldap, sha, ssha

我们目前正在实现几个 Web 应用程序，这些应用程序要求用户创建一个将通过 LDAP 调用进行身份验证的用户登录名。LDAP 服务器和用户帐户将由所有应用程序共享，并且用户的凭据在所有应用程序中都是相同的。

我的问题是散列在标准 LDAP 场景中发生在哪里，在客户端还是 LDAP 服务器负责处理它。据我了解，LDAP 服务器在创建时接收用户密码，并将其散列并存储。（我们计划在客户端 > 网络服务器 > LDAP 服务器之间使用加盐 SHA512 散列和 SSL 连接）

据我了解，散列操作集中在 LDAP 服务器上进行，减轻了客户端的麻烦，并避免了客户端的任何损坏影响其他应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T10:28:30.777

`userPassword`现代、专业品质的服务器使用密码属性（通常是和）的存储方案，`authPassword`其中涉及在服务器上执行散列。服务器通常将唯一值（称为盐）附加或添加到密码，然后执行散列函数。“盐”最小化了字典攻击的有效性，也就是说，字典更难为加盐、散列密码创建字典。

应使用 SSL（安全连接），或者应使用 StartTLS 扩展请求提升非安全连接。应使用加密连接，以便密码可以通过 BIND 请求以明文形式传输。通过安全连接以明文形式传输的密码可以通过服务器的密码策略执行机制检查历史记录和质量。对于强制执行密码历史记录和质量检查的服务器，不应预先编码传输密码。因此，对于 LDAP 客户端来说，“麻烦”与其说是“麻烦”，不如说是服务器可以在一个中心位置执行组织范围内和商定的密码质量和历史检查。

### 也可以看看

*   [LDAP：StartTLS 请求](https://www.rfc-editor.org/rfc/rfc2830 "LDAP：StartTLS 扩展")
*   [LDAP：编程实践](http://www.ldapguru.info/ldap/ldap-programming-practices.html)

# sql - 通过 google BigQuery 将 unsigned int 转换为 signed int

> ID：11059778
> 
> 赞同：2
> 
> 时间：2012-06-16T00:32:29.477
> 
> 标签：sql, int, google-bigquery, uint

我尝试在 google BigQuery api 上运行查询并得到如下异常：

> “函数 IF 中的参数类型不匹配：'distinctPlayers' 是 'TYPE_UINT64' 类型，'0' 是 'TYPE_INT32' 类型。”

查询太大了，所以我只写了它失败的部分。

> QUERY : sum(if(action_type == 3, distinctPlayers, 0)) as Game_Viral_Acceptor_Count

我的理解是：

```
if condition is true 
then set distinctPlayers of type unsigned int64 
otherwise set 0 which is of type int32 
```

任何人都可以阐明如何转换`unsigned int64`为`signed int`through `BigQuery`。

提前致谢， 奥姆卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T05:34:33.633

要回答您的问题，您转换为 signed int 的方式是通过该`INTEGER`函数。所以你应该能够成功运行

```
... SUM(IF(action_type == 3, INTEGER(distinctPlayers), 0)) AS ... 
```

但是，您看到的消息实际上指向 BigQuery 中的一个错误——我现在正在内部提交该错误。

# coffeescript - 仅当变量存在于 CoffeeScript 中时才从变量中分配值的最简洁方法？

> ID：11059788
> 
> 赞同：13
> 
> 时间：2012-06-16T00:34:26.910
> 
> 标签：coffeescript

任何人都知道实现以下目标的更简洁/优雅的方式？

`A = B if B?`

谢谢。

## 编辑：

我正在寻找只引用 A 和 B 一次的解决方案。并会编译为
`if (typeof B !== "undefined" && B !== null) { A = B; }`
或其他类似的东西。

有这个简短的帮助使以下内容更具可读性：
`someObject[someAttribute] = (someOtherObject[someOtherAttribute] if someOtherObject[someOtherAttribute]?)`
这就是我提出问题的动机。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-16T02:52:52.160

你可以说：

```
a = b ? a 
```

例如，这个：

```
a = 11
a = b ? a
console.log(a)
b = 23
a = b ? a
console.log(a)​ 
```

会给你`11`和`23`在控制台（演示：http: [//jsfiddle.net/ambiguous/ngtEE/](http://jsfiddle.net/ambiguous/ngtEE/)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-23T18:30:56.493

也许是这样的：

```
A=_ if (_=B)? 
```

展开：

```
if ((_ = B) != null) {
  A = _;
} 
```

这将用 B 中的内容覆盖 A，但前提是它不为空，仅引用一次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-14T06:33:38.830

不确定 Coffee Script，但您可以在常规 javascript 中使用 OR 运算符，如下所示：

`a = b || a`

# python - 删除两个分隔符之间文本的最pythonic方法

> ID：11059793
> 
> 赞同：2
> 
> 时间：2012-06-16T00:35:52.890
> 
> 标签：python, python-2.7

我正在尝试从某些文本中删除 wiki 格式，以便对其进行解析。

删除两个分隔符（'[['和']]'）它们之间的所有文本的最pythonic方法是什么？给定的字符串**将**包含多次出现的分隔符对。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-16T00:38:59.560

正则表达式非常适合您的问题。

```
>>> import re
>>> input_str = 'foo [[bar]] baz [[etc.]]' 
```

如果您想删除整个`[[...]]`，我认为您要问的是，

```
>>> re.sub(r'\[\[.*?\]\]', '', input_str)
'foo  baz ' 
```

如果你想留下`[[...]]`in 的内容，

```
>>> re.sub(r'\[\[(.*?)\]\]', r'\1', input_str)
'foo bar baz etc.' 
```

# php - 将PHP文件链接为PNG图像？- 图像是基于服务器状态的变量

> ID：11059796
> 
> 赞同：0
> 
> 时间：2012-06-16T00:36:26.383
> 
> 标签：php, image, hyperlink, png, status

这是我的代码，您可以通过以下网址查看它的示例：www.craftquake.com/statusChecker.php?site=MCnet

```
<?php

$getter = $_GET['site'];

if ($getter == 'ts3')
    { $site = test_port('ts3.craftquake.com',10011,4); }
if ($getter == 'MCquake')
    { $site = test_port('play.craftquake.com',25565,4); }
if ($getter == 'MCnet')
    { $site = test_port('minecraft.net',80,4); }

$teamspeak = test_port('ts3.craftquake.com',10011,4);

$online = '<img src="/online.png">';
$offline = '<img src="/offline.png">';
$unknown = '<span class="status-unknown" id="status-image">Unknown</span>';

function test_port($host,$port=80,$timeout=1)
{
        $fsock = fsockopen($host, $port, $errno, $errstr, $timeout);
        if ( ! $fsock )
        {
                return FALSE;
        }
        else
        {
                return TRUE;
        }
}

?>
##HEADER & CSS, ETC
<?php
if ($site == 1)
    { $status = $online;
    } else if ($site == 0) {
    $status = $offline;
    } else {
    $status = $unknown;
}

header('content-type: image/png');
readfile($status);
echo $status;
?> 
```

我想在页面的页脚中链接到此页面以显示状态。我通过将 Minecraft.net 服务器的状态链接为另一个站点的脚本来执行此操作，并且它运行良好，但是我不知道他们是如何做到的。这些图像是 PNG 的，但如果只有一种格式有效，我可以转换它们。

我已经尝试了 header(blablabla) 功能，但它似乎不起作用......

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:39:01.083

您的变量包含 HTML 而不是图像文件的路径名：

```
$online = '<img src="/online.png">'; 
```

应该：

```
$online = 'online.png'; 
```

创建一个未知的状态图像并将其`$unknown`也放入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T00:40:25.020

图像应该是一个*单独*的请求（因此，`<img src="/yourimagescript.php">`在您的 html 页面中放置一个，并且在该*单独*的脚本中只输出图像，不输出 html。您*可以*使用协议嵌入（小）图像`data:`，但我**强烈**建议不要这样做。

# ios - Retina 显示器 VS 正常显示器色差

> ID：11059797
> 
> 赞同：5
> 
> 时间：2012-06-16T00:36:43.330
> 
> 标签：ios, uiview, uiimage, uibutton, retina-display

我正在设计一个自定义按钮，需要我将 a 覆盖`UIButton`在`UIImageView`. 使用图像并且`UIImageView`具有带有图案图像的背景颜色`[UIImage stretchableImageWithLeftCapWidth:topCapHeight:]``UIButton``[UIColor colorWithPatternImage:[UIImage imageNamed:@"buttonPattern.png"]]`

我面临的问题是，在 iPhone 4 上，来自`UIButton`和的图像的`UIImageView`颜色似乎略有不同，尽管它们应该匹配。在 iPhone 3GS 上测试相同的东西显示正常结果，没有色差。

这张图片显示了不同之处：

![在此处输入图像描述](../Images/791abca0a19af82013b3af62c74f1bb5.png)

如您所见，它在 3GS 上看起来不错。在视网膜显示屏上，您可以清楚地看到颜色的差异。我什至尝试在视网膜显示器上使用低分辨率图像（来自 3GS），颜色仍然显示不同。这是视网膜显示设备中的错误吗？有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T17:46:37.117

确保您的所有图像文件都没有嵌入的颜色配置文件。这可能很棘手。对于 Adob​​e 软件，此页面很有帮助：

[http://bjango.com/articles/photoshop/](http://bjango.com/articles/photoshop/)

# sql - DBA_LOCK 中的 LAST_CONVERT 列

> ID：11059800
> 
> 赞同：0
> 
> 时间：2012-06-16T00:37:23.577
> 
> 标签：sql, oracle, oracle10g, oracle11g

[DBA_LOCK 中LAST_CONVERT](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_4111.htm#REFRN23116)列的意义是什么？文档中似乎没有任何相关内容，我在其他地方也找不到任何东西。这个专栏背后的想法是什么？

此外，是否有一个很好的方法来找出锁被持有多长时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T04:13:36.383

Oracle 有不同级别的锁 - 详细说明在这里：[http ://docs.oracle.com/cd/B14117_01/server.101/b10743/consist.htm](http://docs.oracle.com/cd/B14117_01/server.101/b10743/consist.htm)

在我们的事务中，我们可以从较低级别转到较高级别，这是 LAST_CONVERT 跟踪的 - 自我们从较低级别锁定到较高级别以来的秒数。

# python - 如何用 Python 编写 MIDI 文件？

> ID：11059801
> 
> 赞同：15
> 
> 时间：2012-06-16T00:37:27.337
> 
> 标签：python, midi

我正在编写一个脚本，根据各个像素的 RGBA 值将图片转换为 MIDI 音符。但是，我似乎无法完成最后一步，即实际将注释输出到文件中。

我曾尝试使用 MIDIUtil 库，但它的文档不是最好的，我似乎无法弄清楚。

如果有人能告诉我如何对音符进行排序（这样它们就不会从头开始），将不胜感激。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-16T01:56:22.377

看着样本，就像

```
from midiutil.MidiFile import MIDIFile

# create your MIDI object
mf = MIDIFile(1)     # only 1 track
track = 0   # the only track

time = 0    # start at the beginning
mf.addTrackName(track, time, "Sample Track")
mf.addTempo(track, time, 120)

# add some notes
channel = 0
volume = 100

pitch = 60           # C4 (middle C)
time = 0             # start on beat 0
duration = 1         # 1 beat long
mf.addNote(track, channel, pitch, time, duration, volume)

pitch = 64           # E4
time = 2             # start on beat 2
duration = 1         # 1 beat long
mf.addNote(track, channel, pitch, time, duration, volume)

pitch = 67           # G4
time = 4             # start on beat 4
duration = 1         # 1 beat long
mf.addNote(track, channel, pitch, time, duration, volume)

# write it to disk
with open("output.mid", 'wb') as outf:
    mf.writeFile(outf) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-09-24T14:54:52.467

我知道这是一篇旧帖子，但我是该库的作者，我想提一下，python 2 和 3 支持现在已经统一，随着 Google Code 的消亡，代码现在托管在[GitHub 上](https://github.com/MarkCWirt/MIDIUtil)，可以通过 pip 安装，即：

```
pip install MIDIUtil 
```

文档可在[Read The Docs](http://midiutil.readthedocs.io/en/latest/)获得。

（试图发表评论，但我缺乏经验值。）

当文件写入磁盘时，会自动创建轨道结束消息。

# javascript - 如何创建可被 html/javascript 识别的新网页字符符号？

> ID：11059803
> 
> 赞同：5
> 
> 时间：2012-06-16T00:37:46.260
> 
> 标签：javascript, html, character, symbols

我在这里检查了很多问题，但没有一个有我的答案。如果您将我引向正确的道路，我将不胜感激。

我喜欢制作一个新符号（不是字体或与任何字母表相关），例如创建一个可以在浏览器中以 html 或 javascript 代码形式识别或翻译的新语言字母表。

***换句话说，为多个字符分配单个自定义字符。（例如 1 ch 转换为 5 ch）***

我假设我需要先制作字体，然后分配该字符。你有什么建议或最好的方法是什么？

编辑：一个更好的例子：创建一个新字符，例如 ¢（cent），它具有实体名称 --> & cent; 和实体编号 --> & # 1 6 2;

编辑2：谢谢大家的回复。我正在尝试检查您的链接和建议。据我了解，可能存在浏览器兼容性问题。那么如何在服务器上保存的文本文件中创建新符号，当用户查看文件时，javascript 将这些符号转换为单词或其他标准字符？

Edit3：对不起，你们都太棒了。这个例子可能会让事情变得清晰。

创建一个分配给“AB”的新符号。所以一个字符翻译成两个字符？

Edit4： ***这是基于 Jared 的回答。这确实适用于 Z 和 P。现在我应该如何将我的自定义字体添加到这个文件中（用我自己的替换 Z 和 P）？假设 Z 和 P 是我定制的符号***

```
 <!DOCTYPE html
 PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"
 [
  <!ENTITY Z "AB">
 <!ENTITY P "DE">
   ...

  ]>
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
<title>Extending XHTML - Example 1</title>
 </head>
  <body>
   <p>My symbols are &Z; and &P;</p>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T01:28:11.677

这可能是你的一个选择，我不太确定。几乎，如果您使用 XHTML 和/或 XLST，您可能会在自定义字符中实现您正在寻找的内容。例如：

```
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"
[
  <!ENTITY mailto "mailto:">
  <!ENTITY username "gabriel">
  <!ENTITY arobase "@">
  <!ENTITY hostname "gabsoftware">
  <!ENTITY tld ".com">
  <!ENTITY email "&username;&arobase;&hostname;&tld;">
]>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Extending XHTML - Example 1</title>
  </head>
  <body>
    <p>My email is &email;</p>
  </body>
</html> 
```

[http://jfcoder.com/test/entities.xhtml](http://jfcoder.com/test/entities.xhtml)

您将看到 SGML`ENTITY`元素，顺便说一下，我相信 HTML5 将不再属于该元素。您是否可以在这些实体中嵌入图像或通过 XLST 转换来实现您的目标，我还没有弄清楚。

有关更多示例和选项，请参阅此页面：

[使用 XML、XSLT、实体、CDATA 部分和 JavaScript 扩展 XHTML](http://www.gabsoftware.com/tips/extending-xhtml-with-xml-xsl-transformations-entities-cdata-sections-javascript/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T01:24:03.847

您必须使用 SGML 实体声明来创建新的字符实体。这应该适用于从 SGML 继承的所有语言，包括 HTML 和 XML，但我肯定会在所有受支持的用户代理中测试它以确保这一点。

[http://en.wikipedia.org/wiki/XML_entity](http://en.wikipedia.org/wiki/XML_entity)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T03:57:44.473

如果您使用标准字符（aZ、AZ、0-9、!、@、#、$ 等），您可以创建一个 PHP 变量，该变量在呈现页面时具有翻译（JavaScript 在页面之后被渲染/下载）。

```
<?php
  $from = "A";
  $into = "ABCD";
  $content = "This is A whole lot of page content";

  echo preg_replace("$from, $into, $content);
 // will output "This is ABCD whole lot of page content"
?> 
```

我想，也可以使用特殊字体，甚至可以`$from`换成`<img src=pic/of/chars.png" />`.

# android - 具有 MVC 模型的 Android 应用程序

> ID：11059806
> 
> 赞同：0
> 
> 时间：2012-06-16T00:38:03.093
> 
> 标签：android

我正在做一个应用程序价格比较 android，我在关卡设计（MVC 模型）上阻止了一个带有 MVC 的教程类图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T03:00:41.670

在android中，我认为Adapter在MVC模型中的设计非常棒，尤其是SampleCursorAdapter是一个不错的选择。.http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html。

它与数据库游标（即模型）和列表视图（即视图）连接。当游标数据发生变化时，它会通知视图，并制定如何将数据放入视图中的策略。当视图更改数据库时，它还通知适配器重新加载数据，并刷新视图本身。

希望这对您有所帮助。

# android - 以编程方式为 Android 绘制形状

> ID：11059809
> 
> 赞同：0
> 
> 时间：2012-06-16T00:38:31.627
> 
> 标签：android, sdk, drawing, shapes

我是 Android SDK 的新手，所以我想弄清楚这一点。我已经阅读了文档和教科书，但它们在这件事上并没有特别的帮助。

我只是想在屏幕上以线性布局绘制一个简单的矩形。我无法显示形状，但是，当我以相同的方式向此布局添加文本时，文本会显示出来。我错过了什么？

```
package jorge.jorge.jorge;

import android.app.Activity;
import android.graphics.Color;
import android.graphics.drawable.ShapeDrawable;
import android.graphics.drawable.shapes.RectShape;
import android.os.Bundle;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;

public class ShapesActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ShapeDrawable rect = new ShapeDrawable(new RectShape());

        rect.getPaint().setColor(Color.GREEN);

        ImageView view1 = new ImageView(this);

        view1.setImageDrawable(rect);

        LinearLayout frame = (LinearLayout)findViewById(R.id.linear1);

        frame.addView(view1);

//        TextView tx = new TextView(this);
//        
//        tx.setText("Hello World");
//        
//        frame.addView(tx);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T01:34:13.253

Shape 通常用于为某些视图制作背景。它的宽度和高度与使用它的视图相同。然后，如果这个视图没有宽度和高度，它也没有宽度和高度。

基本上，我认为你的 ImageView 没有宽度和高度，那么它是不可见的。你可以在这里看到如何以编程方式设置它： [Set ImageView width and height programmatically?](https://stackoverflow.com/questions/3144940/how-to-set-imageview-width-and-height-programatically)

但是，我建议您以 XML 的方式进行布局。

# php - 如何存储包含回调的数据

> ID：11059826
> 
> 赞同：1
> 
> 时间：2012-06-16T00:41:01.843
> 
> 标签：php, database, callback

当然，存储数据库的方法有很多种。数据库是其中最明显的。但其他包括 JSON、XML 等。

我现在正在处理的项目中的问题是存储的数据包括回调函数作为对象的一部分。据我所知，函数不能序列化。所以我该怎么做？

是否可以将此数据存储为要包含的 PHP 文件？如果是这样，我应该创建一个包含所有内容的大文件，还是将它分成数据库的每一“行”的单独文件？

有没有更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:45:16.907

根据您的回调的复杂程度，对于序列化，您可以将它们全部包装在一个类中，该类利用一些`__sleep`（创建回调表示）和`__wakeup`（恢复回调）voodoo，并使用`__invoke()`调用实际回调的方法。假设您可以对这些回调进行逆向工程/重新创建（即明确指向的对象）.... 如果没有，您可能不走运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T00:57:55.300

相反，存储回调的名称，有一个从名称到函数的查找表，使用`table.call(obj, name, ...)`或`table.apply(obj, name, ...)`调用。可序列化对象本身没有任何代码。由于它们是开发人员创建的，因此它们的库存应该是有限的，它们应该在代码中，并且不应该被序列化。

或者，制作一个实现回调的原型，并将其分配给`obj.__proto__`. `obj.__proto__`在序列化之前杀死- 所有功能都消失了。之后恢复它。不确定是否跨浏览器兼容；我似乎读过一些关于`__proto__`在某些浏览器中无法访问的内容*khminternetexploreroperakhm*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T01:39:09.657

好吧，如果它们是由开发人员创建的，那么应该很容易提出一种格式......例如使用 JSON：

```
{
  "callback" : {
      "contextType": "instance", // or "static"
      "callable" : "phpFunctionName",
      "arguments" : [] 
   }
} 
```

因此，在能够使用此功能的模型上，您可能会执行以下操作：

```
protected function invokeCallback($json, $context = null) {
   $data = json_decode($json, true);
   if(isset($data['callaback'])) {
      if($data['contextType'] == 'instance') {
         $context = is_object($context) ? $context : $this;
         $callable = array($context, $data['callable']);
      } else {
         // data[callable] is already the string function name or a array('class', 'staticMethod')
         $callable = $data['callable'];
      }

      if(is_callable($callable) {
         return call_user_func_array($callable, $data['arguments'];   
      } else {
         throw new Exception('Illegal callable');
      }
   }

   return false;
} 
```

还有一些需要在那里进行的错误处理以及对您想要允许的可调用对象的一些筛选，但您明白了。

# python - Python 模块“着色器”：从着色器导入 ShaderProgram、ShaderCode

> ID：11059827
> 
> 赞同：1
> 
> 时间：2012-06-16T00:41:13.793
> 
> 标签：python, pyqt, shader

我正在尝试从源代码运行 python 应用程序，它具有：

```
from shader import ShaderProgram,ShaderCode 
```

我不知道要下载什么+安装才能获得“着色器”。它非常不具体，在任何地方都找不到答案，有人知道这是什么模块吗？

这是一个 python / pyqt 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T01:51:59.343

如果您正在查看的程序是[Inkspot](https://code.google.com/p/inkspot/)（看起来像这样，因为除了“从着色器导入 ShaderProgram，ShaderCode”这个问题之外，它基本上是唯一的谷歌点击），*着色器*是属于该程序的另一个模块，而不是外部依赖。[请在此处](https://code.google.com/p/inkspot/source/browse/trunk/src/shader.py)查看 shader.py 的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T00:45:55.960

我相信您正在寻找的应用程序是[PyOpenGL](http://sourceforge.net/projects/pyopengl/)。

# iphone - StoreKit restoreCompletedTransactions 不返回任何事务

> ID：11059830
> 
> 赞同：6
> 
> 时间：2012-06-16T00:41:54.657
> 
> 标签：iphone, ios, storekit

我使用我的测试用户购买了非消耗品，但是当我调用它时：

```
[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 
```

我在 paymentQueueRestoreCompletedTransactionsFinished 中看不到任何交易。代码如下所示：

```
- (void)paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue
{
    NSLog(@"received restored transactions: %i", queue.transactions.count);
    for (SKPaymentTransaction *transaction in queue.transactions)
    {
        [self restoreTransaction:transaction];
    }

    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Success" message:@"Your add-ons have been restored." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alertView show];
    return;
} 
```

日志总是显示“received restore transactions: 0”，但我希望看到一个事务。有谁知道为什么交易没有被退回？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T01:14:49.613

现在它突然开始工作了！我只改变了一件事，那就是进入 iTunes Connect 并编辑我的产品描述，这样状态就会从“拒绝”变为“待定”。奇怪的是，购买仍然有效（即使处于“拒绝”状态），只有恢复不起作用。我尝试在更改后立即恢复，但没有成功，但现在（大约 20 分钟后），恢复正常。更改为挂起必须已修复它（在更改有一段时间传播到 StoreKit 服务器之后），否则这是某种间歇性 StoreKit 错误。

# jms - ActiveMQ Apollo 是否实现了 JMSXUserID 或类似的东西来帮助跟踪经过身份验证的用户？

> ID：11059833
> 
> 赞同：0
> 
> 时间：2012-06-16T00:42:07.610
> 
> 标签：jms, activemq, userid, apollo

我知道 ActiveMQ 支持 JMSXUserID 属性：

[http://activemq.apache.org/jmsxuserid.html](http://activemq.apache.org/jmsxuserid.html)

我正在尝试使用 Apollo（一个 ActiveMQ 子项目）而不是 ActiveMQ，目前我正试图找出在 Apollo 中复制相同的行为。

我对机制并不挑剔，但简而言之，我需要一些方法来标记来自经过身份验证的用户的每条传入消息，并使用一个标识符让我知道哪个用户发送了哪个消息，但以一种用户无法欺骗的方式设置自己。这基本上正是 ActiveMQ 使用的 JMSXUserID，但我似乎无法弄清楚如何在 Apollo 中做同样的事情。

我错过了什么？

我发现这对谷歌来说特别困难，因为 ActiveMQ 在其每个页面上都链接到 Apollo，所以我的大部分搜索结果都没有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:02:21.273

Apollo 甚至支持 JMS 吗？

来自网页：[http ://activemq.apache.org/apollo/](http://activemq.apache.org/apollo/)

> 目前，Apollo 仅支持 STOMP 协议，但就像最初的 ActiveMQ 一样，它被设计为多协议代理。在未来的版本中，它将添加 OpenWire 支持，以便与 ActiveMQ 5.x JMS 客户端兼容。

为了解决您手头的问题，您不能简单地在代码中添加带有用户标识的标题吗？

只需从操作系统中获取它，假设您使用的是 Java，那么您也许可以使用类似的东西

```
System.getProperty("user.name") 
```

并将其附加到 STOMP 标头。然而，这是客户端库（stomp 库，如果使用的话）而不是服务器本身的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:36:59.037

Apollo 的用户手册描述[了如何配置 apollo 以自动添加设置为发送用户 id 的用户标头](http://activemq.apache.org/apollo/documentation/user-manual.html#Stomp_Protocol_Options)。

基本上，您想使用以下内容配置连接器的 stomp 协议：

```
<connector id="tcp" bind="tcp://0.0.0.0:61613">
  <stomp>
    <add_user_header separator=",">JMSXUserID</add_user_header>
  </stomp>
</connector> 
```

不幸的是，Openwire 协议还不支持这一点。 [问题 APLO-213](https://issues.apache.org/jira/browse/APLO-213)已开放解决。

# c++ - WMP COM 无法在后续用户模拟下运行

> ID：11059834
> 
> 赞同：-1
> 
> 时间：2012-06-16T00:43:22.117
> 
> 标签：c++, com, impersonation, wmp, wmplib

我有一个需要访问所有当前登录用户的 Windows Media Player 库的 Windows 服务。由于它是一项服务，因此我必须模拟登录用户，以便对 WMP COM 的调用将返回模拟用户上下文中的信息（即返回模拟用户的库而不是系统的库）。我需要为每个登录的用户执行此操作。

我能够通过 成功在线程中模拟用户`ImpersonateLoggedOnUser`，获取用户的库，然后执行`RevertToSelf`. 当我尝试为下一个登录用户执行此操作时，就会出现问题。似乎对 WMP COM 的任何后续调用总是返回第一个模拟用户的库，而不是当前被模拟的用户。

这是我正在做的事情的一般要点：

```
CoInitialize(NULL);
IWMPCore* Core = NULL;
CoCreateInstance(__uuidof(WindowsMediaPlayer), 0, CLSCTX_INPROC_SERVER, __uuidof(IWMPCore), (void **)&Core);
IWMPMediaCollection* Collection = NULL;
Core->QueryInterface(__uuidof(WindowsMediaPlayer), (void **)&Collection);
...
//Do work
...
CoUninitialize(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T03:14:46.553

您确定要发布所有接口吗？

您是否尝试过调用[CoFreeUnusedLibrariesEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms678413%28v=vs.85%29.aspx)并在 WMP dll 被卸载时检查进程资源管理器（尽管只有具有 DllCanUnloadNow 导出的 dll 才会被卸载）？

如果它仍然失败，那么 WMP 可能无法完全卸载，然后您可能必须为每个用户使用帮助程序/主机进程，并使用某种形式的[IPC](http://msdn.microsoft.com/en-us/library/aa365574%28VS.85%29.aspx)将数据返回到主进程。

# objective-c - Objective-C Category Return AppDelegate as property

> ID：11059838
> 
> 赞同：0
> 
> 时间：2012-06-16T00:44:03.510
> 
> 标签：objective-c, objective-c-category

I'm creating an Objective-C category on the UIViewController class. In my project, I want one singular and easy way to get the app delegate.

Here's what I'm doing

```
// header file UIViewController+AppDelgate.h
#import <UIKit/UIKit.h>

@class ExampleAppDelegate;

@interface UIViewController (AppDelegate)
@property (weak, nonatomic, readonly) ExampleAppDelegate *appDelegate;
@end

// implementation file UIViewController+AppDelegate.m
#import "UIViewController+AppDelegate.h"
#import "ExampleAppDelegate.h"

@implementation UIViewController (AppDelegate)

- (ExampleAppDelegate *) appDelegate {
    return (ExampleAppDelegate *)[[UIApplication sharedApplication] delegate];
}

@end 
```

Should I define the property as weak? I think it would be bad to retain this guy as it would normally have retains on view controllers referenced within.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:50:59.873

weak/strong in this case is a moot point, since there is no local instance variable holding a pointer. ARC will do the right thing (i.e. it will not send more retains than releases for any given scope).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T00:47:38.953

Why not create a Utility class with a class method that does the same thing, then you can reference it something like:

```
[Utility appDelegate]; 
```

and you wont have to add a property to every single ViewController that needs to access the AppDelegate, the way you currently have it setup.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T00:48:26.877

From the looks of your implementation you dont need to define a property, you only need to declare the method `-(ExampleAppDelegate *)appDelegate;`

This of course would only work if called on an instance of the class unless you made it a class method.

# java - 调用子类构造函数时超类构造函数的初始化如何工作

> ID：11059839
> 
> 赞同：0
> 
> 时间：2012-06-16T00:44:05.647
> 
> 标签：java

说我有一个父类和一个子类并调用子类的构造函数。我是否必须同时拥有子构造函数参数和父构造函数参数并使用 super() 来初始化父构造函数。这是否意味着如果我重载了父构造函数，我需要让构造函数匹配每个孩子的构造函数......所以如果我有两个父构造函数

```
parent(int a);
parent(int a,int b); 
```

和两个子构造函数

```
child(int c);
child(int c,int d); 
```

我必须让 child(int a) 实际上是两个构造函数的形式

```
child(int a, int c) 
{
super(a)

c = this.c;
} 
```

和

```
child ( int a, int b, int c)
{
super(a,b)

c = this.c;
 } 
```

并且让 child(int c, int d) 实际上有两个构造函数

```
child(int a, int c, int d)
{
super(a);

c = this.c;
d = this.d;
} 
```

或者我可以通过吗

```
child(int a,int b, int c, int d)
{
super(a,b);

c = this.c;
d = this.d;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T00:52:28.387

总是调用父构造函数。如果不是显式的，它将是隐式的。由您来定义参数以调用父构造函数。

如果 parent 没有提供默认构造函数（不需要任何参数的构造函数），则需要从子类中显式调用它。

正如您所评论的那样，没有什么可以禁止您使用通用构造函数，以防万一`child(int a, int b, int c, int d)`并调用父类的构造函数 lie `super(a,b)`。

如果您在父类上有一些构造函数并不一定意味着您需要在子类上“传播”它们。

[这里](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_04.htm#INDEX-451)有一个关于构造函数链接的好文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T03:46:49.497

由您决定要编写多少个重载版本的构造函数，但请记住，如果父类中没有 arg 构造函数，子类的每个构造函数都会隐式调用其 super() 而没有 arg，它会给您编译时错误.但是如果你明确地打电话，你可以打电话给任何 supar construtor 。

# visual-studio-2010 - 如何在 Visual Studio 2010 中设置单页应用程序

> ID：11059841
> 
> 赞同：4
> 
> 时间：2012-06-16T00:44:28.720
> 
> 标签：visual-studio-2010, knockout.js, asp.net-mvc-4, upshot, single-page-application

我最近阅读了有关单页应用程序的文章，并想尝试一下。在观看了 Steve Sanderson 的演示文稿 ( [http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2159](http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2159) ) 之后，我想在我的 Visual Studio 2010 中创建一个单页应用程序并自己进行测试。但后来我发现我不能再选择 SPA 模板了，因为它在 RC 版本中被删除了。

现在，问题是 - 我应该在 Visual Studio 2010（安装了 MVC4）中做什么才能创建 SPA？我想将 KnockoutJS 用于 UI，将 Upshot 用于数据，我可以使用 Nuget 安装这两者。我没有在网上找到任何相关的东西，我去过的每一页都告诉我使用 SPA 模板，此后该模板已被删除。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T16:47:27.573

SPA 被排除在 RC 之外，因为它没有及时为 MVC4 发布做好准备。[官方 ASP.NET SPA 页面](http://www.asp.net/single-page-application)。[您可以通过 NuGet（ SPA 脚手架](http://nuget.org/packages/SinglePageApplication)）使用 MVC 模板和脚手架 SPA 创建项目

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T14:21:53.633

对于 Visual Studio 2010，请尝试使用John Papa 的[Hot Towel](http://www.johnpapa.net/hottowel/)。创建一个空的 MVC4 应用程序，然后从包管理器控制台安装 Nuget

```
PM> Install-Package HotTowel 
```

# exception - gwt java.lang.ExceptionInInitializerError

> ID：11059842
> 
> 赞同：1
> 
> 时间：2012-06-16T00:44:59.667
> 
> 标签：exception, gwt, initialization, rpc

我正在开发 GWT 应用程序，并不断收到如下所示的错误。

我遵循了有关 servlet 类命名约定的 GWT 教程，并遵循了 Service / Async / ServiceImpl 结构。

我还尝试添加`-XX:-UseSplitVerifier`VM 参数来解决以前的问题。关于发生了什么的任何想法？

```
SEVERE: javax.servlet.ServletContext log: Exception while dispatching incoming RPC    
call
java.lang.ExceptionInInitializerError
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at   

com.google.appengine.tools.development.agent.runtime.Runtime.newInstance_   
(Runtime.java:127)
at com.google.appengine.tools.development.agent.runtime.Runtime.newInstance  
(Runtime.java:135)
at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.instantiate 
(ServerSerializationStreamReader.java:914)
at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.deserialize 
(ServerSerializationStreamReader.java:556)
at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject 
(AbstractSerializationStreamReader.java:119)
at   
com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader$ValueReader$8\. 
readValue(ServerSerializationStreamReader.java:138)
at  
com.google.gwt.user.server.rpc.impl.ServerSerializationStreamReader.deserializeValue 
(ServerSerializationStreamReader.java:385)
at com.google.gwt.user.server.rpc.RPC.decodeRequest(RPC.java:303)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall  
(RemoteServiceServlet.java:206)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost  
(RemoteServiceServlet.java:248)
at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost
(AbstractRemoteServiceServlet.java:62)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter
(ServletHandler.java:1166)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter
(HeaderVerificationFilter.java:35)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter
(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter
(ServeBlobFilter.java:60)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter
(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter
(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter
(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter
(StaticFileFilter.java:122)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter
(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter
(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter
(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle
(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle
(DevAppEngineWebAppContext.java:78)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at  
com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle
(JettyContainerService.java:369)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: java.lang.UnsupportedOperationException: ERROR: GWT.create() is only usable    
in client code!  It cannot be called, for example, from server code.  If you are  
running a unit test, check that your test case extends GWTTestCase and that 
GWT.create() is not called from within an initializer or constructor.
at com.google.gwt.core.client.GWT.create(GWT.java:91)
at com.google.gwt.user.client.ui.UIObject.<clinit>(UIObject.java:187)
... 46 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T08:27:17.937

几乎可以肯定，您正在调用一个仅作为 GWT 客户端的类。你有错误：

```
 Caused by: java.lang.UnsupportedOperationException: ERROR: GWT.create() is only usable    
in client code!  It cannot be called, for example, from server code.  If you are  
running a unit test, check that your test case extends GWTTestCase and that 
GWT.create() is not called from within an initializer or constructor. 
```

您不需要自己专门调用“GWT.create()”来获取该异常。您可能会在服务器端调用 GWT 客户端专用类。此外，您可能在 RPC 的一个参数中甚至在服务器端调用的共享代码中包含“仅限客户端”对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-27T04:51:21.190

FWIW，我遇到了同样的错误，它最终成为使用 GWT.create() 初始化的常量（静态最终）。该常量位于需要由 GIN 依赖注入解析器加载的类中。

IE：它试图在模块编译期间加载类（并调用 GWT.create()）。

# objective-c - 回调方法无法调用 IBAction - iPhone

> ID：11059845
> 
> 赞同：0
> 
> 时间：2012-06-16T00:45:13.180
> 
> 标签：objective-c, ibaction

我有一个链接到 IBAction 的按钮，它用`AudioServices`. 这`AudioServicePlaySystemSound`与

```
AudioServicesAddSystemSoundCompletion(silenceID, NULL, NULL, callbackFunction, (__bridge void*) self); 
```

不过，在里面`CallbackFunction`我不能调用 IBAction 方法。事实上，我什至不能使用保留的工作自我。我发现这可能是因为 C 本身不知道 self 是什么。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T01:01:29.330

您不能从 C 函数中访问诸如 self 之类的指针。这是因为该函数实际上不是类的一部分。要在 self 上调用方法，您需要提供一些方法来从 C 函数访问指针 self。

幸运的是，callbackFunction 接受两个参数，第一个是声音 id，第二个是您在`AudioServicesAddSystemSoundCompletion`函数中提供的数据。`(__bridge void*) self`

```
void callbackFunction(SystemSoundID sound, void *data){
    //data is a pointer to self that you provide when you call AudioServicesAddSystemSoundCompletion
    [(MyClass*)data callMyIBAction];
} 
```

# r - 指定日志函数的基数

> ID：11059853
> 
> 赞同：-2
> 
> 时间：2012-06-16T00:46:15.460
> 
> 标签：r

我对 R log 函数有点困惑： log(10) = 1 in base 10 但是当我在 R log(10) = 2.302585 中输入这个时，我的问题是如何隐式地告诉 R log 函数中的 base。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-16T00:49:02.283

> 论据
> 
> xa 数值或复数向量。以正数或复数为底：计算对数的底数。默认为 e=exp(1)。

所以你`log`用第二个参数 10 （你想要的基础）调用函数。

例如：

```
> log(10,10)
[1] 1 
```

# c# - 为什么标签页正文不使用 .NET 选项卡控件进行更新？

> ID：11059859
> 
> 赞同：4
> 
> 时间：2012-06-16T00:47:29.533
> 
> 标签：c#, .net, winforms, tabcontrol

我在 C#（Visual Studio 2010）中的 .NET TabControl 遇到了一个奇怪的问题。启动 Windows 窗体应用程序。添加一个选项卡控件和一个按钮。向两个标签页添加两个不同的标签，以便区分它们。按钮的目的只是充当下一个按钮；使用以下代码订阅其 Click 事件：

```
tabControl1.SelectTab(1); 
```

假设用户在第一个选项卡上输入了错误的内容，因此当他们尝试转到第二个选项卡时，我们希望将它们发送回来，因此使用代码订阅选项卡控件的 SelectedIndexChanged 事件：

```
if(tabControl1.SelectedIndex == 1)
{
    tabControl1.SelectTab(0);
} 
```

现在运行程序并单击按钮。您会注意到，根据顶部突出显示的选项卡判断，第一个选项卡页是您所期望的似乎被选中的选项卡页。但是，根据实际出现在选项卡控件主体中的选项卡页判断，它仍然是显示的第二个选项卡页！调用各种控件的 Focus()、Update() 和 Refresh() 函数似乎没有帮助。这里发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T01:08:20.840

我复制。这是事件处理程序的一般问题，您可以通过像这样猛拉地板垫来混淆本机 Windows 控件的填充。TreeView 是另一个很容易出现这种问题的控件。

对于这样的问题，有一个优雅而通用的解决方案，您可以使用 Control.BeginInvoke() 来延迟命令。它将在本机控件完成事件生成并完成所有副作用后*稍后执行。*这也解决了这个问题，如下所示：

```
 private void tabControl1_SelectedIndexChanged(object sender, EventArgs e) {
        if (tabControl1.SelectedIndex == 1) {
            this.BeginInvoke(new Action(() => tabControl1.SelectTab(0)));
        }
    } 
```

# python - 用 pygame 实现 A* 算法我发现我的单位“回溯”

> ID：11059861
> 
> 赞同：1
> 
> 时间：2012-06-16T00:48:18.953
> 
> 标签：python, pygame, a-star

所以我一直在玩 Pygame 并遇到了一个我可以解决的问题，但只是不够优雅。

基本上我有一个单位（此时只是一个红色方块）在一个黑色的平原上。如果我单击该单元，然后单击该字段上的任何其他位置，则该单元将继续到该点。该算法本身工作得非常完美，即使引入了障碍物，它也能快速处理寻路。

我的问题在于我的实施。单位是一个 16 x 16 的方格，因此该场被划分为 16 x 16 方格。如果我在运输途中更改单位的目的地，它有时会“回溯”到先前的“航路点”，然后再继续其新路线。

我明白为什么会发生这种情况，路径查找模块将每个正方形视为网格上的一个点，因此当我将鼠标坐标传递给路径方法时，点 (2,2) 的像素坐标实际上是 (32,32)我将它们除以 16 得到向下取整的整数（因此 (34,37) 变为 (2,2)），因此虽然单位可能在实际的“网格点”之间，但路径查找模块从其最后一个实际路径点找到路径，不是它的当前位置。当它通过新路线到单元时，单元必须“回溯”以跟随寻路模块找到的路线

显然每个进行任何类型寻路的游戏开发者都解决了这个问题，所以我希望我能找到一个更优雅的解决方案。我不想在屏幕上的每个像素上找到一条路径，只是航路点，但是回溯有点烦人。有什么建议么？

如下所示是相关代码：

在主 .py 文件中

```
if pygame.mouse.get_pressed()[0]: # if left mouse button pressed
    mouse_x,mouse_y = pygame.mouse.get_pos()
    if selected: # checks if a unit is selected
        unit.getRoute((mouse_x/16,mouse_y/16)) 
```

在 unit.py 文件中

```
def getRoute(self,target):
    self.route = path((self.x/16,self.y/16), target)

def getNode(self):
    if self.route:
        self.node = route.pop(0)
        dif_x,dif_y = self.node[0] - self.x, self.node[1] - self.y
        if dif_x > 0:
            self.vector_x = self.speed
        if dif_x < 0:
            self.vector_x = self.speed * -1
        else:
            self.vector_x = 0
        if dif_y > 0:
            self.vector_y = self.speed
        if dif_x < 0:
            self.vector_y = self.speed * -1
        else:
            self.vector_y = 0
    else:
        self.node = None
        self.vector_x = 0
        self.vector_y = 0

def update(self):

    if self.route or self.node:
        if self.route and not self.node:
            self.getNode()
        if (self.x,self.y) == self.node:
            self.getNode()

    self.x += self.vector_x
    self.y += self.vector_y
    self.rect.topleft = (self.x,self.y) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T01:09:34.107

您应该以一种特殊的方式来管理这第一步。这是因为即使该单元已经在移动它指定的单元格，它仍然保持不变，直到它到达下一个单元格。

现在我建议您确保在移动完成一半后立即更新单元的单元格（这样探路者将搜索下一个单元格的路径，而不是前一个单元格的路径）。此外，您应该使用类似的东西来管理特殊情况

```
if unit is standing still
  compute pathfinding as you would normally do
else
  compute pathfinding from the unit cell
  discard the first cell of the pathfinding route (since it would backtrack)
  compute the route directly to the next cell (by drawing a correct path) 
```

当然，这将根据您的运动自由度而变得更容易或更难，如果您只允许正交运动，这将是简单的，如果您允许对角线运动，那么您应该注意不要越过障碍物（这取决于关于您希望对小故障有多大的容忍度，例如单元与障碍物的一角重叠）。

# android - 在 monodroid 环境中，我如何在视图之外获取上下文

> ID：11059864
> 
> 赞同：0
> 
> 时间：2012-06-16T00:48:42.680
> 
> 标签：android, xamarin.android

我想加载一个资产，我能看到的唯一方法是

```
Context.Assets.Open(); 
```

我看不到不传递上下文就可以访问上下文的方法。我真的不想传出去

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:29:06.350

回答我自己的问题：

```
Application.Context.Assests.Open() 
```

是我一直在寻找的。由于某种原因，我只是看不到它。

# c# - 如何从 SetWebViewClient 调用返回？

> ID：11059871
> 
> 赞同：0
> 
> 时间：2012-06-16T00:51:29.700
> 
> 标签：c#, xamarin.android

我有一个简单的 monodroid 问题

活动 A 调用活动 B

活动 B 有一个 webview，看起来像这样

```
SetContentView(Resource.Layout.webView);
WebView webView = FindViewById<WebView>(Resource.Id.webView1);
webView.Settings.JavaScriptEnabled = true;
webView.LoadUrl(url);
webView.SetWebViewClient(new dealWithWebView()); 
```

在 dealWithWebView() 中，我有这个

```
class dealWithWebView : WebViewClient
{
    WebView webView;

    public override void OnPageFinished(WebView view, string url)
    {
        webView = view;
        Context c = webView.Context;
        // it goes away and does something
        // calls another method in the class which returns back here
    }
} 
```

问题是我似乎无法让它从 WebViewClient 返回，然后从“B”返回到“A”。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:58:59.597

你可以做类似的事情

```
SetContentView(Resource.Layout.webView);
WebView webView = FindViewById<WebView>(Resource.Id.webView1);
webView.Settings.JavaScriptEnabled = true;
webView.LoadUrl(url);
webView.SetWebViewClient(new dealWithWebView(this)); 
```

它使用：

```
class dealWithWebView : WebViewClient
{
    Activity parent;
    public dealWithWebView(Activity parent)
    {
        this.parent = parent;
    }

    public override void OnPageFinished(WebView view, string url)
    {
        var webView = view;
        Context c = webView.Context;
        // it goes away and does something
        // calls another method in the class which returns back here
        // all done - so finish the parent now
        parent.Finish();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-16T10:40:21.463

您还可以使用：

```
class WebViewClientCallback : WebViewClient
{
    public event EventHandler PageLoaded = delegate { };

    public override void OnPageFinished(WebView view, string url)
    {
        base.OnPageFinished(view, url);
        PageLoaded(this, EventArgs.Empty);
    }

} 
```

用法：

```
clientCallback = new WebViewClientCallback();
clientCallback.PageLoaded += delegate(object sender, EventArgs e) {
    // What to do next?
    // Do the things you want to do after PageIsLoaded       
};
webview.SetWebViewClient(clientCallback);
webview.LoadData("<p>HTML-CONTENT</p>", "text/html; charset=UTF-8", null); 
```

# php - php解析长文本中的某些值？

> ID：11059874
> 
> 赞同：0
> 
> 时间：2012-06-16T00:52:27.720
> 
> 标签：php, arrays, parsing

我有一个值数组，我想知道如果我的数组中的单词具有我正在寻找的值加上更多文本，我如何解析某些单词？

例子：

我在找`rest`

数组值有

```
restful
myrestless
rests
resting 
```

如果有的话，我可以使用什么 php 函数，它会显示有 4 个项目有“rest”这个词？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T00:54:16.153

使用[`array_filter`](http://php.net/array_filter)：

```
$array = array('restful', 'myrestless', 'rests', 'resting');

$needle = 'rest';
$rest_array = array_filter( $array, 
    function( $el) use( $needle) { 
        return !(strpos( $el, $needle) === false); 
    }
);
var_dump( $rest_array); 
```

请注意，这需要 PHP >= 5.3（可能是 5.4？）。否则你将不得不重写它以不使用匿名函数和闭包。

[演示](http://codepad.viper-7.com/OWC7mS)

# php - 可以提供上传图像的基于 PHP 的图像处理器？

> ID：11059876
> 
> 赞同：0
> 
> 时间：2012-06-16T00:53:12.847
> 
> 标签：php, image-processing

是否有某种软件可以让我将上传的图像提供给它并让它处理它们以回馈给我？这个问题是基于[这个](https://stackoverflow.com/questions/10940527/file-uploading-only-working-with-some-images-class-upload-php)问题，其中一位回答者告诉我使用某种可以提供图像的处理器，但他不知道哪个好。有没有这样的程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T00:57:36.017

PHP内置了[GD](http://php.net/manual/en/book.image.php)。查看该链接中的一些函数。希望这就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T01:31:59.893

正如 Jebego 所说，[GD](http://php.net/manual/en/book.image.php)很好，几乎可以满足您的所有需求。

[ImageMagick](http://php.net/manual/en/book.imagick.php)可以完成您可能需要的一切，但使用起来稍微困难一些。

但是，我认为您的另一个问题的答案是虚假的，可能会导致您走错路。

# php - 如何从任何地方访问 PHP 中的全局 $SiteConfiguration 变量？

> ID：11059877
> 
> 赞同：0
> 
> 时间：2012-06-16T00:53:18.483
> 
> 标签：php, scope, configuration-files

我在所有页面中共享 PHP 代码库，并且对于每个 HTTP 请求，我动态地共享`require`文件`"/configs/$site/config.php"`。该文件如下所示：

```
<?php
$SiteConfiguration = [
  'site_title => 'Wiki for Developers',
  'mysql_host' => 'localhost',
  'mysql_db' => 'wiki-devs',
  'articles_per_page' => 10,
  /* ... etc ... */
];
?> 
```

我面临的问题是我不能从函数中完全访问这个变量。

例如：

```
function DisplayArticles() {
    echo "Displaying ".$SiteConfiguration['articles_per_page'];
} 
```

它将打印 just`Displaying`和 not `Displaying 10`。

我怎样才能解决这个问题并让我的 $SiteConfiguration 可以在任何地方访问？我应该使用`class`吗？这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T00:56:22.220

放

```
global $SiteConfiguration; 
```

[在您的函数中，您可以在http://www.php.net/manual/en/language.variables.scope.php](http://www.php.net/manual/en/language.variables.scope.php)找到更多信息

由于您要求提供最佳实践信息：（最简单的形式）

```
class MySite{
    public static function getConfig(){
       return array(
       'site_title => 'Wiki for Developers',
       'mysql_host' => 'localhost',
       'mysql_db' => 'wiki-devs',
       'articles_per_page' => 10,
       /* ... etc ... */
       );
    }
} 
```

然后在您的代码中，您可以使用

```
$config = MySite::getConfig(); 
```

并使用它。（显然比 MySite 有一个更好、更具描述性的名称；））

好处：

1.  如果设置正确并且可以找到您的类，您的 php 类[自动加载器](http://www.php.net/manual/en/language.oop5.autoload.php)将自动为您加载它，这意味着不用担心您是否传递了变量，不用担心函数参数的位置，也不会用无助于描述的不必要参数污染您的函数它能做什么。
2.  您可以准确控制对这些数据的访问，并且可以做到即使是您自己的函数也不会意外更改这些数据，即使在调用其他也需要访问它的函数时也不会。

在我看来，它击败了全局变量，并且击败了通过参数传递，因为它更干净，并且您可以控制对它的所有形式的访问。您可以通过特定的 getter/setter 选项使某些属性只读/可写，计算它被访问的次数以及您能想到的任何其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T00:57:04.920

[使用全局关键字](http://php.net/manual/en/language.variables.scope.php)

```
function DisplayArticles() {
    global $SiteConfiguration;
    echo "Displaying ".$SiteConfiguration['articles_per_page'];
} 
```

编辑

你应该尽量避免全局变量。

更好的做法是在参数中传递您的数组

```
function DisplayArticles( array $config ) {
    echo "Displaying ".$config['articles_per_page'];
}

$SiteConfiguration = array( 'site_title' => 'Wiki for Developers',
                            'mysql_host' => 'localhost',
                            'mysql_db' => 'wiki-devs',
                            'articles_per_page' => 10,
                            /* ... etc ... */
                          );

DisplayArticles( $SiteConfiguration ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T01:05:41.540

这是另一种情况，配置类可以很好地工作：

```
class Config {
    private static $site_config = array( 'h' => 'Hello', 'w' => 'World');

    public static function get( $key) {
        return isset( self::$site_config[$key]) ? self::$site_config[$key] : null;
    }
}

echo Config::get( 'h') . ' ' . Config::get( 'w'); 
```

这将输出：`Hello World`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T01:30:45.190

你可以尝试这样的事情。

您的“siteConfiguration.php”文件：

```
<?php
    $SiteConfiguration = [
        'site_title' => 'Wiki for Developers',
        'mysql_host' => 'localhost',
        'mysql_db' => 'wiki-devs',
        'articles_per_page' => 10
    ];

    return $SiteConfiguration;
?> 
```

而这个功能：

```
function getConfigVar($var) {
    static $config = array();

    if( empty($config) ) {
        $config = require("siteConfiguration.php");
    }

    return array_key_exists($var, $config) ? $config[$var] : null;
} 
```

也可以修改此函数以处理多个配置。

# c# - 通过密件抄送使用 .net 发送大量电子邮件

> ID：11059880
> 
> 赞同：1
> 
> 时间：2012-06-16T00:54:02.207
> 
> 标签：c#, .net, email, smtpclient, bcc

我有一个简单的脚本，可以向我们的用户发送电子邮件。

我发送电子邮件没有问题，但困扰我的是我必须指定“收件人”字段..所以每个接收电子邮件作为密件抄送的用户都可以看到收件人字段（“admin@domain.com”），这是与“发件人”字段相同。

基本上我想要的是密件抄送字段中的每个用户都看到他们自己的电子邮件地址而不是“admin@domain.com”作为收件人字段。

到目前为止，这是我的代码

```
 MailMessage mm = new MailMessage("admin@domain.com", "admin@domain.com", this.txtSubject.Text, this.txtBodyHtml.Text);
    mm.IsBodyHtml = true;

    // go through records and add them to email list
    while (rs.Read()){
        mm.Bcc.Add(new MailAddress(rs["Email"].ToString(), rs["FullName"].ToString()));
    }

    SmtpClient mailClient = new SmtpClient();

    try{
        //Send the email asynchronously
        mailClient.SendAsync(mm, null);
    }catch (SmtpException smtpEx){
        //sendErrors.Add(smtpEx.InnerException.Message);
        //throw smtpEx;
    }catch (Exception ex){
        //sendErrors.Add(ex.Message);
        //throw ex;
    } 
```

# c++ - 编写一个宏来对结构的内容进行字符串化

> ID：11059881
> 
> 赞同：0
> 
> 时间：2012-06-16T00:54:03.863
> 
> 标签：c++, struct, stringify

我正在尝试编写一个宏来扩展结构的内容：

```
struct Str
{
    int a;
    float f;
    char *c;
};
Str s = {123, 456.789f, "AString"};

#define STRINGIFY_STR(x) ... // Macro to stringify x which is an instance of Str

printf("%s", STRINGIFY_STR(s)); 
```

所需的输出：[a：123，f：456.789，c：AString]

是否可以编写一个执行此操作的宏？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T00:56:28.433

您是否有理由将其作为宏来执行？

您应该编写一个函数来执行此操作，而不是使用预处理器。

* * *

根据您的目标，有几种选择。[boost 格式化库](http://www.boost.org/doc/libs/1_37_0/libs/format/index.html)提供了一个很棒的工具包来构建格式化的字符串。您也可以始终[重载`operator<<`](http://www.cplusplus.com/reference/iostream/ostream/operator%3C%3C/)以提供干净的输出。

如果您在纯 C 中执行此操作，则[sprintf](http://www.cplusplus.com/reference/clibrary/cstdio/sprintf/)系列方法可用于创建格式化输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T01:16:20.063

这很恶心，只适用于`gcc`/ `g++`。

```
#define STRINGIFY_STR(x) \
    std::string(({ std::ostringstream ss; \
                   ss << "[a: " << x.a \
                      << ", f: " << x.f \
                      << ", c: " << x.c << "]"; \
                   ss.str(); })).c_str() 
```

您必须从值创建字符串。请不要这样做。请听从里德的建议。

以下是我将如何修改您`struct`以使其打印得很好：

```
struct Str
{
    int a;
    float f;
    char *c;

    std::ostream & dump (std::ostream &os) const {
        return os << "[a: " << a
                  << ", f: " << f
                  << ", c: " << c << "]";
    }
};

std::ostream & operator << (std::ostream &os, const Str &s) {
    return s.dump(os);
}

Str s = {123, 456.789f, "AString"}; 
```

现在，要打印出来`s`，您可以使用`std::cout`：

```
std::cout << s << std::endl; 
```

或者，如果你真的想要一个字符串：

```
std::stringstream ss;
s.dump(ss);
puts(ss.str().c_str()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-09T08:45:55.123

```
struct stringify
{
    operator std::string() const
    {
        return str ;
    }
    std::string str ;
};

template < typename T > stringify operator+ ( stringify s, const T& object )
{
    std::ostringstream stm ;
    stm << object ;
    if( !s.str.empty() && !std::isspace( *s.str.rbegin() ) ) s.str += ' ' ;
    s.str += stm.str() ;
    return s ;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T01:15:15.480

我也反对这种方法，但要回答这个问题：

```
#define STRINGIFY_STR(x) \
   (std::string("[a: ") + std::to_string((long double)x.a) \
  + std::string(", f:") + std::to_string((long double)x.f) \
  + std::string(",c: ") + x.c + std::string("]") ).c_str() 
```

我建议编写一个成员函数来执行此操作。

# coffeescript - 如何在咖啡脚本类中使用 setInterval 范围？

> ID：11059886
> 
> 赞同：2
> 
> 时间：2012-06-16T00:54:18.153
> 
> 标签：coffeescript, setinterval

我正在尝试在一个类中执行 setInterval，下面的代码可以正常工作，因为在创建汽车时会定期调用对其 updatePosition 的调用。

问题是我无法在 setInterval“范围”中获取 @currentSpeed 变量的值。相反，当间隔调用 updatePosition 函数时，我在 console.log 中得到“更新位置：速度：未定义”。

当我调用加速（）函数（在我按下加速按钮时调用）它返回预期的@currentSpeed 值

如何在 setInterval 范围内从 @currentSpeed 获取值？

这是我的代码的相关部分：

```
class Car
    constructor: () ->    
        @currentSpeed = 0

        intervalMs = 1000
        @.setUpdatePositionInterval(intervalMs)

    setUpdatePositionInterval: (intervalMs) ->
        setInterval (do => @updatePosition ), intervalMs

    updatePosition: () ->
        # below logs: "Updating position: Speed: undefined"
        console.log("Updating position: Speed: #{@currentSpeed}")

    accelerate: () ->
        #below logs the expected value of @currentSpeed
        console.log "ACCELERATING! CurrentSpeed: #{@currentSpeed}" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T01:04:26.300

```
setInterval (=> @updatePosition()), intervalMs 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T01:01:22.033

创建回调没有意义`do => @updatePosition`——因为这会创建一个函数 ( `=>`)，该函数 () 会立即执行（由于`do`关键字）并返回该函数`@updatePosition`。因此，您可以将其简化为`@updatePosition`.

在不同的位置需要粗箭头： updatePosition() 需要访问当前实例，以便检索 @currentSpeed 的值 - 但由于您无法确保始终在正确的上下文中调用此函数，您需要使用粗箭头将其绑定到此函数：

```
setUpdatePositionInterval: (intervalMs) ->
    setInterval @updatePosition, intervalMs

updatePosition: () =>
    console.log("Updating position: Speed: #{@currentSpeed}") 
```

# css - CSS位置相对作为绝对

> ID：11059888
> 
> 赞同：0
> 
> 时间：2012-06-16T00:54:37.993
> 
> 标签：css, position

我无法使 div 的顶部位置相对于其先前的 subling。

我有：

```
<style>
#container {position:absolute; top:0px; height:100%}
.question {position:relative;border: 1px double black;}
.question [scope=title] {position:relative; top:0px; color:black;font-size:28px; border-bottom: 1px double black;}
.question [scope=body] {position:relative; top:0px; color:black;font-size:18px; }
.question [scope=author] {position:relative;top:10px}
.question [scope=tags] {position:relative;top:0px}
</style> 
```

进而

```
 <div ID="container">
        <div class="question">
            <div scope="title">A</div>
            <div scope="body">B</div>
            <div scope="author">C</b></div>
            <div scope="tags">D</div>
        </div>
</div> 
```

我希望作者 div 比正常情况低 10px，并且以下 div 与此相关。但是，“标签”和“作者”重叠。

如此恼人，但我敢打赌有一个简单的答案。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T01:09:08.620

尝试在作者上设置 margin-top ：

```
.question [scope=author] {position:relative;margin-top:10px} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T01:01:00.103

因为您的`question`元素正在计算子元素的高度。所以它的高度与孩子的确切高度相匹配，但是其中一个孩子 (C) 将它向下推 10 像素，因此它与下面的那个重叠。

只需更改`author`，它就会起作用。

```
.question [scope=author] {position:relative;top:0px} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T01:19:54.457

当一个元素具有 position:relative 偏移量时，该元素会在一个偏移量处呈现，但其他元素会被放置在布局流中，就好像该元素没有偏移量一样。换句话说，偏移发生在布局流程之外。它就像一个绝对定位的元素，有一个不可见的占位符在布局中为它占据空间。

由于您希望元素响应彼此的偏移量，因此建议使用不同的偏移量机制，即在布局流程中发生的一种机制：填充或边距。

# firefox - 如何在 Firefox 12.0 中禁用幻灯片效果

> ID：11059893
> 
> 赞同：0
> 
> 时间：2012-06-16T00:55:37.047
> 
> 标签：firefox

我只是更新了 firefox，他们使用了平滑的滑动效果（当鼠标滚轮滚动时），但这对我来说真的很痛苦，因为我通常会查看丢失图像的网站。任何人都可以帮助禁用它吗？我必须使用旧版本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T01:01:09.757

转到`Tools > Options > Advanced > General > Browsing`并取消选中`Use Smooth Scrolling`。

# cocoa - 使用 MagicalRecord 时如何将 NSArrayController 绑定到 NSManagedObjectContext

> ID：11059896
> 
> 赞同：1
> 
> 时间：2012-06-16T00:56:00.963
> 
> 标签：cocoa, core-data, nsarraycontroller, magicalrecord

我最近开始将一个项目迁移到 MagicalRecord，但在 XCode 4 的界面构建器中找不到如何将它绑定到 NSArrayController。

到目前为止我采取的方法（除了很多谷歌）正在引用 [MagicalRecord defaultContext] 并绑定到它，但我收到一个错误：“没有托管对象上下文无法执行操作”

任何指向正确方向的指针都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:18:46.813

确保按照评论中的说明打开 MagicalRecord。您*可能*还必须在应用程序委托中创建一个属性，以公开 MagicalRecord 提供的默认托管对象上下文：

```
- (NSManagedObjectContext *) applicationContext;
{
    return [NSManagedObjectContext MR_defaultContext];
} 
```

这样绑定就可以保留一些东西了……尽管我自己并没有在那种情况下使用它。让我知道结果如何。

# javascript - 是否可以在 IE8+ 的浏览器窗口中打开 .js 文件（就像 Firefox 一样）

> ID：11059903
> 
> 赞同：1
> 
> 时间：2012-06-16T00:57:22.297
> 
> 标签：javascript, internet-explorer

是否可以在 IE8+ 的浏览器窗口中打开 .js 文件？我尝试了文件的直接 URL，我还尝试使用 jquery 的 .load 和 XMLHttpRequest() 等其他方法将文件内容写入网页，但在 IE 中它们都给了我保存/打开对话框。

在 Firefox 中，直接链接在浏览器窗口中打开文件，jquery .load 和 XMLHttpRequest() 将 .js 文件的内容直接放入网页中。如何在 IE8+ 中获得这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T03:34:25.667

如果它与调用页面在同一个域中，则可以获取带有对文件的 ajax 调用的 responseText 的文本。然后，您可以将其放在只读文本区域中，或者，如果您将与号和小于号转换为实体，则可以放在任何 html 元素中。

# flash - 哪一个最适合在 Flash 中查看 3D 模型？PV3D 或 Away 3D-（不需要动画素材，只需要 3D 质量）

> ID：11059908
> 
> 赞同：1
> 
> 时间：2012-06-16T00:58:05.487
> 
> 标签：flash, 3d, papervision3d, away3d

我要做一个网络 3D 项目。

在这个项目中，我不会做任何动画——相反，我想展示 3D 模型。所以那些 3D 模型应该是非常好的质量。

哪个程序更适合我的目的 PV3D 或 Away3D？我试过PV3D，但是我从3Ds Max导入的DAE模型不好看；它看起来像卡通形象。有什么建议吗？

请分享您的经验并提供一些链接。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:42:15.437

据我所知，papervision 不再处于开发阶段，所以我建议 away3d。它有一个活跃的社区。如果你的目标是 flashplayer 11，你可以使用 Stage3D，它利用你的 GPU，它应该为你提供最好的 3d 质量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:52:46.253

要查看模型，我使用的是 Alternativa 平台提供的简单工具。只需导入您的模型。 [3dplayer](http://a3dplayer.com/)

# python - 跳过列表 Python 中的元素

> ID：11059910
> 
> 赞同：11
> 
> 时间：2012-06-16T00:58:17.560
> 
> 标签：python

我是编程新手，我正在尝试解决 codingbat.com 问题。我遇到了这个问题：

给定一个数组，计算总和，除非数组中有 13。如果数组中有 13，则跳过 13 和紧随其后的数字。例如 [1,2,13,5,1] 应该产生 4（因为跳过了 13 和 5s）。

这就是我到目前为止所拥有的。我的问题是当有多个 13 时我不知道该怎么办......而且我想有效地学习编码。你们能帮忙吗？（我使用的是 python 3.2）谢谢！

```
def pos(nums):
    for i in nums:
        if i == 13:
            return nums.index(13)
    return False

def sum13(lis):
    if pos(lis)!= False:
        return sum(lis[:pos(lis)])+sum(lis[pos(lis)+1:])
    else:
        return sum(lis) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-16T01:11:35.207

需要注意的一件棘手的事情是这样的： [1, 13, 13, 2, 3]

`2`你也需要跳过

```
def getSum(l):
    sum = 0
    skip = False
    for i in l:
         if i == 13:
             skip = True
             continue
         if skip:
             skip = False
             continue
         sum += i
    return sum 
```

**说明**：

您将逐一浏览列表中的项目

每次你

*   先检查是否为13，如果是，则标记`skip`为`True`，这样你也可以跳过下一项。
*   其次，检查 if `skip`is `True`，如果是，则表示它是 13 之后的一项，因此您也需要跳过此一项，并且您还需要设置`skip`back to`False`以免跳过下一项。
*   最后，如果不是上述任何一种情况，则将值添加到`sum`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-16T01:12:32.967

您可以使用*zip*函数成对循环这些值：

```
def special_sum(numbers):
    s = 0
    for (prev, current) in zip([None] + numbers[:-1], numbers):
        if prev != 13 and current != 13:
            s += current
    return s 
```

或者你可以做一个单行：

```
def special_sum(numbers):
    return sum(current for (prev, current) in zip([None] + numbers[:-1], numbers)
               if prev != 13 and current != 13) 
```

您还可以使用迭代器：

```
from itertools import izip, chain
def special_sum(numbers):
    return sum(current for (prev, current) in izip(chain([None], numbers), numbers)
               if prev != 13 and current != 13) 
```

*（ izip*中的第一个列表比第二个长，*zip*和*izip*忽略额外的值）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-16T01:02:33.607

使用 while 循环遍历列表，`i`手动递增。在每次迭代中，如果遇到 13，则递增`i`两次；否则，将该值添加到运行总和并增加`i`一次。

```
def skip13s(l):
    i = 0
    s = 0
    while (i < len(l)):
        if l[i] == 13:
            i += 1
        else:
            s += l[i]
        i += 1
    return s 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-16T05:14:25.253

一些 FP 风格:)

```
def add_but_skip_13_and_next(acc, x):
    prev, sum_ = acc
    if prev != 13 and x != 13:
        sum_ += x
    return x, sum_

filter_and_sum = lambda l: reduce(add_but_skip_13_and_next, l, (0,0))[1]

>>> print filter_and_sum([13,13,1,4])
4
>>> print filter_and_sum([1,2,13,5,13,13,-9,13,13,13,13,13,1,1])
4 
```

此代码适用于任何迭代器，即使它不提供随机访问（直接索引） - 例如套接字:)

单线:)

```
>>> filter_and_sum = lambda l: reduce(
...     lambda acc, x: (x, acc[1] + (x if x != 13 and acc[0] != 13 else 0)),
...     l, (0,0))[1]
>>> print filter_and_sum([1,2,13,5,13,13,-9,13,13,13,13,13,1,1])
4 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-16T02:53:22.973

我认为这是最紧凑的解决方案：

```
def triskaidekaphobicSum(sequence):
    return sum(sequence[i] for i in range(len(sequence))
               if sequence[i] != 13 and (i == 0 or sequence[i-1] != 13)) 
```

这在生成器表达式上使用内置 sum() 函数。生成器生成序列中的所有元素，只要它们不是 13，或者紧跟在 13 之后。额外的“或”条件是处理序列中的第一项（没有前一项）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-16T01:05:07.447

您可以使用`while`循环来处理多个`13`.

```
def sum13(lis):
    while pos(lis):
        if pos(lis) == len(lis) - 1:
            lis = lis[:pos(lis)]
        else:
            lis = lis[:pos(lis)]+lis[pos(lis)+1:]

    return sum(lis) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-08T12:15:47.423

```
def skipAndAddFun(inputVal, skipList):
   sum = 0
   for i in inputVal:
        if not i in skipList:
            sum += i
    return sum 
```

用法：

```
skipAndAddFun([1,2,13,5,1], [13, 5])
4 
```

这个简单的功能将是您问题的通用解决方案。

# ios - iOS setNeedsDisplay 在多个区域

> ID：11059914
> 
> 赞同：0
> 
> 时间：2012-06-16T00:59:42.883
> 
> 标签：ios, rectangles, setneedsdisplay

我有一个自定义视图，其中有一个钢琴键盘。每个键都作为单独的调用绘制，因此我只能绘制需要重绘的键。该视图支持多点触控，因此可以同时按住多个键。

每个键的绘制都有些昂贵，因此每当在视图上检测到触摸时，我都会将特定区域传递给 setNeedsDisplay 以避免重新绘制整个视图（这会产生明显的延迟）。

为了处理多个触摸，我遍历接收到的触摸集合，检查每个触摸是否在一个键内，如果是，更新它并使用该键的矩形调用 setNeedsDisplay。简而言之，在一个函数中多次调用 setNeedsDisplay，但每次使用不同的 rect。

我期望的行为是 drawRect 将被调用多次不同的脏区域，但是，似乎如果我同时按下最左边和最右边的键，则重新绘制整个视图，而不仅仅是最左边和最右边的键（如中间的所有键都被不必要地重绘）。

我能做些什么来实现我想要的？我只想绘制被触摸的键，而不是两个脏键之间的所有键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T02:22:20.797

`drawRect:`无论您调用多少次，系统都会在主运行循环的每一轮向您发送一条消息`setNeedsDisplayInRect:`。它传递给您的 rect 至少是您传递给的所有脏 rect 的“联合” `setNeedsDisplayInRect:`。系统无法准确找出传递给 的 rect `setNeedsDisplayInRect:`。

您可以覆盖`setNeedsDisplayInRect:`以保留脏矩形数组（您会发现`+[NSValue valueWithCGRect:]`有用），并清除`drawRect:`.

您可以创建自己的`setNeedsDisplayForKey:`方法来保存一系列脏键和调用`setNeedsDisplay`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T01:19:50.307

我遇到了这个问题并在[这里](https://stackoverflow.com/questions/9299018/setneedsdisplayinrect-bug-in-ios5)发布了我的问题。

奇怪的是，我还画了一个键盘（有 88 个键）。我从来没有解决它，并决定如果它被证明是一个性能问题我会处理它（在你需要之前不要优化等等）。我做的一件事是在启动时，将默认键盘渲染为图像并将其用作基础，这样我只绘制了被按下的键，而不是整个键盘。绘制图像比所有 CGPath 的东西更快。

我在播放时显示了 MIDI 音符，性能很好 - 所以也许你现在不需要担心@这个。

# url-rewriting - ASP.NET 服务器上不存在的 URL 文件，使用重写？

> ID：11059916
> 
> 赞同：0
> 
> 时间：2012-06-16T00:59:50.173
> 
> 标签：url-rewriting

如何让 filenotonserver.html 显示在浏览器中？而不是 404 错误。如何进行 URL 重写以将 .html 与 default2.aspx 匹配，反之亦然？

这有什么意义吗？我肯定是 URL 重写的新手...

k，一直在环顾四周：

```
<rewrite>
    <rules>
        <rule name="SpecificRedirect" stopProcessing="true">
            <match url="^page$" />
            <action type="Redirect" url="/page.html" />
        </rule>
    </rules>
</rewrite> 
```

在“匹配 url”中尝试匹配 .html 和操作类型将是 default.aspx?p=whatevetmatched.html

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T02:54:24.157

好的，我明白了：

```
 <rewrite>
        <rules>
            <rule name="Redirect">
                <match url="(.*)\.html$" />
                <action type="Rewrite" url="default2.aspx?p={R:1}" />
            </rule>
        </rules>
    </rewrite> 
```

在 default2.aspx 上读取具有“匹配”html 名称的请求（“p”），然后我在数据库中查找它以显示匹配的 html“页面”的数据

# java - java到excel日期格式

> ID：11059919
> 
> 赞同：4
> 
> 时间：2012-06-16T01:00:09.033
> 
> 标签：java, excel, datetime, jxl

问题是当我运行我的应用程序并有一个网格（带有字符串和日期列）并将其另存为 excel 文件时。

当我第一次保存它时，所有内容的格式都正确，但是当我再次尝试再次保存相同的确切网格时，日期格式就消失了（它只是一个浮点值，当我右键单击并格式化为 dateTime 对象时作品）。当我重新启动我的应用程序时，它将第一次再次工作，然后再次丢失格式

代码如下所示：

```
Calendar calendar = Calendar.getInstance();

calendar.setTime((Date)data);
            Date gmtDate = new Date(((Date) data).getTime() + (calendar.get(Calendar.ZONE_OFFSET) + calendar.get(Calendar.DST_OFFSET)));

writableCell = new jxl.write.DateTime(sheetColumn, sheetRow, gmtDate, jxl.write.DateTime.GMT);

cellFormat = new jxl.write.WritableCellFormat (new jxl.write.DateFormat("m/d/yyyy h:mm");

writableCell.setCellFormat(cellFormat);

sheet.addCell(writableCell); 
```

我一直在断点，一切都是应该的（`dateTime`在进入工作表之前它总是知道它是一种类型），所以我不认为它来自代码。

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-12T11:49:35.690

尝试定义一个`WritableCellFormat`处理日期格式的静态。

```
// Required classes.
import java.util.TimeZone;
import jxl.write.DateFormat;
import jxl.write.DateTime;
import jxl.write.WritableCellFormat;

// Defined once.
public static final WritableCellFormat DATE_CELL_FRMT;
static {
    DateFormat df = new DateFormat("MM/dd/yyyy hh:mm");
    df.getDateFormat().setTimeZone(TimeZone.getTimeZone("GMT"))
    DATE_CELL_FRMT = new WritableCellFormat(df);
}

// Usage
writableCell = new DateTime(sheetColumn, sheetRow, gmtDate, DATE_CELL_FRMT); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T01:11:29.060

尝试这个：

```
cellFormat = new jxl.write.WritableCellFormat (new jxl.write.DateFormat("MM/dd/yyyy hh:mm"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-21T06:06:41.120

您的问题似乎类似于["jExcelApi - cell date format reusing doesn't work"](https://stackoverflow.com/questions/1460673/jexcelapi-cell-date-format-reusing-doesnt-work)。可能，该问题的答案可以帮助您解决问题。

复述答案：根据[常见问题解答](http://jexcelapi.sourceforge.net/resources/faq/)（问题：“我收到错误消息'太多不同的单元格格式'”）格式不能在不同的工作表中重复使用，因为它们不是为了以这种方式重复使用的

在您的情况下，代码可能是这样的：

```
WritableCellFormat format = new jxl.write.WritableCellFormat(new jxl.write.DateFormat("m/d/yyyy h:mm"));
for(java.util.Date date : someDateList){
  WritableCell cell = new jxl.write.DateTime(someColumn, someRow, date, format);
  sheet.addCell(cell);
} 
```

# windows-phone-7 - WP7 从导航/返回停止页面

> ID：11059921
> 
> 赞同：1
> 
> 时间：2012-06-16T01:00:39.223
> 
> 标签：windows-phone-7

当用户在点击后退按钮后点击“取消”按钮时，如何阻止我的应用程序返回？

```
 protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
    {
        var buttonInfo = MessageBox.Show("Are you sure you want to exit?", "Exit", MessageBoxButton.OKCancel);
        if (buttonInfo == MessageBoxResult.OK)
        {
            this.NavigationService.GoBack();
        }
        else
        {
            //How to stop page from navigating
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T01:04:01.380

用于`CancelEventArgs`取消操作，属性[Cancel](http://msdn.microsoft.com/en-us/library/system.componentmodel.canceleventargs.cancel.aspx)。

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
{
    // If the event has already been cancelled, do nothing
    if(e.Cancel)
        return;

    var buttonInfo = MessageBox.Show("Are you sure you want to exit?", "Exit", MessageBoxButton.OKCancel);
    if (buttonInfo == MessageBoxResult.OK)
    {
        this.NavigationService.GoBack();
    }
    else
    {
        //Stop page from navigating
        e.Cancel = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T17:29:33.420

再来一点 ..

```
 protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
    {
        if (e.Cancel)
            return;

        var buttonInfo = MessageBox.Show("Are you sure you want to exit?", "Exit", MessageBoxButton.OKCancel);
        if (buttonInfo == MessageBoxResult.OK)
        {
          **//this line may useful if you are in the very first page of your app**
            if (this.NavigationService.CanGoBack) 
            {
                this.NavigationService.GoBack();
            }
        }
        else
        {
            //Stop page from navigating
            e.Cancel = true;
        }
    } 
```

# ios - tableview删除行问题

> ID：11059922
> 
> 赞同：1
> 
> 时间：2012-06-16T01:00:41.187
> 
> 标签：ios, uitableview, row, delete-row

尝试删除视图中的正确行时遇到问题。我有一个表格视图，其中有 3 个动态创建的单元格分组，而且，我正在使用编辑模式。在每个部分中添加更多行并删除它们时一切正常，但是当我尝试删除特定行时，它总是删除最后一行。假设我添加了第 1、2、3 行（除了原始行）并且我想删除第 2 行，它总是删除第 3 行。我还有一种方法可以自动为创建的每个新行提供一个标签。 . 我怎样才能通过删除问题？有任何想法吗？我知道我必须以某种方式识别已删除行的标签才能使其正常工作...每个部分都有一行，100 然后 200 和 300 ...这是我的代码：

```
-(void)tableView:(UITableView *)TableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle 
forRowAtIndexPath:(NSIndexPath *)indexPath 
{

    if (editingStyle == UITableViewCellEditingStyleDelete) 
    {
     int i=0;
     for (i=0; i<myarray.count; i++)
     {
        UITableViewCell *aux=[myarray objectAtIndex:i];

        if (aux.tag >= 101 && aux.tag < 200 && indexPath.section==0) {
            [myarray removeObjectAtIndex:i];
            [Table reloadData];
        }
        if (aux.tag >= 201 && aux.tag < 300 && indexPath.section==1) {
            [myarray removeObjectAtIndex:i];
            [Table reloadData];
        }
        if (aux.tag >= 301 && indexPath.section==2) {
            [myarray removeObjectAtIndex:i];
            [Table reloadData];
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T02:43:39.407

使用此方法并将其替换为您的方法：

```
 -(void)tableView:(UITableView *)TableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath 
 {

   if (editingStyle == UITableViewCellEditingStyleDelete) 
   {
      [myarray removeObjectAtIndex:indexPath.section];
        [Table reloadData];
   }
 } 
```

# r - 插入符号中的并行处理不适用于 R 2.13.0

> ID：11059925
> 
> 赞同：3
> 
> 时间：2012-06-16T01:01:07.993
> 
> 标签：r, r-caret

我正在使用 R 包**插入符号**，并行处理不起作用。如果我尝试从`train`函数运行示例：

```
library(mlbench)
data(BostonHousing)

library(doMC)
registerDoMC(2)

## NOTE: don't run models form RWeka when using
### multicore. The session will crash.

## The code for train() does not change:
set.seed(1)
usingMC <-  train(medv ~ .,
                  data = BostonHousing, 
                  "glmboost") 
```

我收到以下错误：

```
Error in names(resamples) <- gsub("^\\.", "", names(resamples)) : 
  attempt to set an attribute on NULL 
```

我正在使用 MacBook Pro，2011 年初型号，配备 2.3GHz Intel Core i5 和 Mac OS X 10.6.8。

R会话信息：

> R 版本 2.13.0 (2011-04-13) 平台：x86_64-apple-darwin9.8.0/x86_64 (64-bit)
> 
> 附加的基础包：[1] stats graphics grDevices utils
> datasets methods base
> 
> 其他附加软件包：[1] caret_5.13-20 cluster_1.14.2 reshape_0.8.4 plyr_1.7.1 lattice_0.19-33 mlbench_2.1-0
> doMC_1.2.3 multicore_0.1-7 [9] foreach_1.3.2 codetools_0.2-8迭代器_1.0.5
> 
> 通过命名空间加载（未附加）：[1] compiler_2.13.0 grid_2.13.0 rpart_3.1-51 tools_2.13.0

我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T09:48:08.430

1.  可能很难找到可以重现您的错误的人：使用

    ```
    > sessionInfo ()
    R version 2.15.0 (2012-03-30)
    Platform: x86_64-pc-linux-gnu (64-bit) 
    ```

    [……剪断……]

    ```
    other attached packages:
     [1] mboost_2.1-2    caret_5.15-023  cluster_1.14.2  reshape_0.8.4  
     [5] plyr_1.7.1      lattice_0.20-6  doMC_1.2.5      multicore_0.1-7
     [9] iterators_1.0.6 foreach_1.4.0   mlbench_2.1-0          

    loaded via a namespace (and not attached):
    [1] codetools_0.2-8  compiler_2.15.0  grid_2.15.0      Matrix_1.0-6    
    [5] splines_2.15.0   survival_2.36-14 tools_2.15.0 
    ```

    有用。

2.  这意味着您可能需要深入研究代码：`traceback ()`并且`debug ()`应该有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T15:07:04.103

我至少在 2.14.0 上无法重现该问题（见下文）。

插入符号代码没有用于顺序和并行处理的不同版本，所以我不确定问题出在哪里。顺序版本有用吗？其他型号呢？你也可以尝试一个新的会话吗？

此外，您可能希望直接向包维护者发送电子邮件（除非您这样做了但我错过了）以获得更好的结果。

```
> library(caret) 
```

<-剪辑->

```
> library(mlbench)
> data(BostonHousing)
> 
> library(doMC) 
```

<-剪辑->

```
> registerDoMC(2)
> 
> ## NOTE: don't run models form RWeka when using
> ### multicore. The session will crash.
> 
> ## The code for train() does not change:
> set.seed(1)
> usingMC <-  train(medv ~ .,
+                   data = BostonHousing, 
+                   "glmboost")
Warning message:
In glmboost.matrix(x = c(0.00632, 0.02731, 0.02729, 0.03237, 0.06905,  :
  model with centered covariates does not contain intercept
> usingMC
506 samples
 13 predictors

No pre-processing
Resampling: Bootstrap (25 reps) 

Summary of sample sizes: 506, 506, 506, 506, 506, 506, ... 

Resampling results across tuning parameters:

  mstop  RMSE  Rsquared  RMSE SD  Rsquared SD
  50     5.44  0.663     0.484    0.0661     
  100    5.33  0.675     0.518    0.0669     
  150    5.27  0.681     0.526    0.0661     

Tuning parameter 'prune' was held constant at a value
 of 'no'
RMSE was used to select the optimal model using 
 the smallest value.
The final values used for the model were mstop = 150
 and prune = no. 
> sessionInfo()
R version 2.14.0 (2011-10-31)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets 
[6] methods   base     

other attached packages:
 [1] mboost_2.1-1    doMC_1.2.5      multicore_0.1-7
 [4] iterators_1.0.5 mlbench_2.1-0   caret_5.15-023 
 [7] foreach_1.4.0   cluster_1.14.1  reshape_0.8.4  
[10] plyr_1.7.1      lattice_0.20-0 

loaded via a namespace (and not attached):
[1] codetools_0.2-8  compiler_2.14.0  grid_2.14.0     
[4] Matrix_1.0-3     splines_2.14.0   survival_2.36-10
[7] tools_2.14.0 
```

# jquery - JQuery：幻灯片未按预期工作

> ID：11059929
> 
> 赞同：0
> 
> 时间：2012-06-16T01:01:37.223
> 
> 标签：jquery, show, slide

希望这将是一个简单的：我有一个 div 我想在页面加载时滑入屏幕。

我试图找出为什么会这样：

```
$(function() {
    $('.mydiv').slideDown(500);
});//END ONLOAD 
```

但不是这个：

```
$(function() {
    $('.mydiv').show('slide', { direction: 'down' }, 500);
});//END ONLOAD 
```

谁能给我一些建议？谢谢！

(ps: CSS 是 .mydiv {display:none;}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T01:27:39.810

jQuery 核心不包括`show()`方法的效果，但是 jQueryUI 扩展`show()`了效果。您显示的代码将要求您包含 jQueryUI 库（或组件）以及 jQuery 。

```
show( effect, [options], [speed], [callback] ) 
```

[jQuery UI show() 文档](http://jqueryui.com/demos/show/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T01:08:01.020

[show](http://api.jquery.com/show/)方法的 Jquery API 文档指出 show 方法定义如下：

```
.show()
.show( duration [, callback] )
.show( [duration] [, easing] [, callback] ) 
```

在哪里：

```
duration - A string or number determining how long the  animation will run. 
easing - A string indicating which easing function to use for the transition. 
callback - A function to call once the animation is complete. 
```

使用 show 的正确实现是

```
.show(500); 
```

# android - 如何让布局监听器忽略它上面的视图 - android

> ID：11059940
> 
> 赞同：1
> 
> 时间：2012-06-16T01:03:47.190
> 
> 标签：android, layout, listener, android-linearlayout, ontouchlistener

我有一个 LinearLayout，我想看看用户何时触摸它并松开手指。我想我可以通过添加一个 onTouch 侦听器并检查事件来做到这一点。这个 linearLayout 包含一堆按钮。

我的问题不是听众不工作，它只是没有做我认为它会做的事情。只有当布局被触摸时，监听器才会被激活，这是有道理的，但不是我想要的。如果用户触摸布局内的按钮，则不会调用布局侦听器，我希望调用它。

这是我的代码：

爪哇代码：

```
 ll = (LinearLayout)findViewById(R.id.CategorySelect_lLayout_noID);
    ll.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {

            if(event.getAction() == MotionEvent.ACTION_DOWN){
                Toast.makeText(CategorySelect.this, "action DOWN called", Toast.LENGTH_SHORT).show();
                return true;
            } 
            if(event.getAction() == MotionEvent.ACTION_UP){
                Toast.makeText(CategorySelect.this, "action Up called", Toast.LENGTH_SHORT).show();
                return true;
            }
            return false;
        }
    }); 
```

我的xml：

```
 <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="400dp"
android:layout_alignParentBottom="true"
android:layout_centerHorizontal="true"
android:layout_marginBottom="40dp"
android:scrollbars="none"
 >

    <LinearLayout
        android:id="@+id/CategorySelect_lLayout_noID"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        >

        <Button
            android:id="@+id/CategorySelect_b_1"
            style="@style/CustomBLUEButtonTextStyle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="@string/CategorySelect_b_1"
        />

        <Button
            android:id="@+id/CategorySelect_b_2"
            style="@style/CustomBLUEButtonTextStyle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="@string/CategorySelect_b_2" />

        <Button
            android:id="@+id/CategorySelect_b_3"
            style="@style/CustomBLUEButtonTextStyle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="@string/CategorySelect_b_3" />

        <Button
            android:id="@+id/CategorySelect_b_4"
            style="@style/CustomBLUEButtonTextStyle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="@string/CategorySelect_b_4" />

        <Button
            android:id="@+id/CategorySelect_b_5"
            style="@style/CustomBLUEButtonTextStyle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="@string/CategorySelect_b_5" />

        <Button
            android:id="@+id/CategorySelect_b_6"
            style="@style/CustomBLUEButtonTextStyle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="@string/CategorySelect_b_6" />

        <Button
            android:id="@+id/CategorySelect_b_7"
            style="@style/CustomBLUEButtonTextStyle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="@string/CategorySelect_b_7" />
    </LinearLayout>

</ScrollView> 
```

谢谢阅读。

更新的评论代码：

我的主要 xml 文件从我的活动中膨胀：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/categoryselect_background"
android:scaleType="fitXY"
 >

<TextView
    android:id="@+id/CategorySelect_tv_chooseacat"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="70dp"
    android:gravity="center"
    android:text="@string/CategorySelect_tv_chooseacat"
    android:textColor="#FF5500"
    android:textSize="34dp"
    android:textStyle="bold" 
    />

<Button
    android:id="@+id/CategorySelect_b_settings"
    android:background="@drawable/menu_settings"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="10dp"
     />

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="400dp"
android:layout_alignParentBottom="true"
android:layout_centerHorizontal="true"
android:layout_marginBottom="40dp"
android:scrollbars="none"
>

    <com.tdubstudios.soundboard.hungergames.ScrollAbleLinearLayout
        android:id="@+id/CategorySelect_lLayout_noID"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        >

        <Button
            android:id="@+id/CategorySelect_b_cato"
            style="@style/CustomBLUEButtonTextStyle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="@string/CategorySelect_b_1"
        />

        <Button
            android:id="@+id/CategorySelect_b_cinna"
            style="@style/CustomBLUEButtonTextStyle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="@string/CategorySelect_b_2" />

        <Button
            android:id="@+id/CategorySelect_b_effie"
            style="@style/CustomBLUEButtonTextStyle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="@string/CategorySelect_b_3" />

        <Button
            android:id="@+id/CategorySelect_b_gale"
            style="@style/CustomBLUEButtonTextStyle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="@string/CategorySelect_b_4" />

        <Button
            android:id="@+id/CategorySelect_b_haymitch"
            style="@style/CustomBLUEButtonTextStyle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="@string/CategorySelect_b_5" />

        <Button
            android:id="@+id/CategorySelect_b_katniss"
            style="@style/CustomBLUEButtonTextStyle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="@string/CategorySelect_b_6" />

        <Button
            android:id="@+id/CategorySelect_b_peeta"
            style="@style/CustomBLUEButtonTextStyle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="@string/CategorySelect_b_7" />
    </com.tdubstudios.soundboard.hungergames.ScrollAbleLinearLayout>

</ScrollView>
</RelativeLayout> 
```

这是 ScrollAbleLinearLayout 类：

```
package com.tdubstudios.soundboard.hungergames;

import android.content.Context;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.widget.LinearLayout;

public class ScrollAbleLinearLayout extends LinearLayout {

public ScrollAbleLinearLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
}

@Override
public boolean onInterceptTouchEvent(MotionEvent event) {
    requestDisallowInterceptTouchEvent(true); // Tell parents not to use this event
    return false; // Tell children not to use this event
}
} 
```

是的，我知道有些东西的命名与我以前的代码相比有所改变，那是因为我改变了它以隐藏我正在制作的应用程序类型（从搜索结果中）。然而，无论出于何种原因，我不再关心，所以这就是背后的原因。

谢谢。

第三次编辑：

所以我目前正在使用

```
@Override
public boolean onInterceptTouchEvent(MotionEvent event) {
    //requestDisallowInterceptTouchEvent(true); // Tell parents not to use this event
    if(event.getAction() == MotionEvent.ACTION_DOWN){
        return false;
    } 
    if(event.getAction() == MotionEvent.ACTION_UP){
        return false;
    }

    return true; // Tell children not to use this event
} 
```

它按我想要的方式工作，但它不实用。要让它实际注册按钮点击，您必须确保您的手指完全不会向左/向右/向上/向下移动。它必须像完全向下和完全向上一样。我试图添加一个 onFling 方法，然后跟踪手指移动的距离。如果它移动的像素数量少于 x ，则使 main 方法返回 false ，这将允许按钮工作，但如果它实际上是滑动/移动，则不需要激活按钮。这就是我的意思：

```
@Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {

        if (Math.abs(e1.getY() - e2.getY()) > MORE_THAN_X_INT) {
            booleanVar = false;
            return false;
        }else{
          booleanVar = true;
         }
      return false;
   } 
```

然后做：

```
Override
public boolean onInterceptTouchEvent(MotionEvent event) {
    //requestDisallowInterceptTouchEvent(true); // Tell parents not to use this event
    if(event.getAction() == MotionEvent.ACTION_DOWN){
        return false;
    } 
    if(event.getAction() == MotionEvent.ACTION_UP){
        return false;
    }

    return booleanVar; // Tell children not to use this event
} 
```

我认为这可行，但我无法测试它，因为没有用于扩展 LinearLayout 的 onFling 方法

有什么建议么？

请注意我返回的真/假可能是倒退的，我不确定这会让我感到困惑。但是，如果有人可以引导我制作 onFling 方法，我可以弄乱它以获得正确的值。

* * *

我有

```
@Override
public boolean onInterceptTouchEvent(MotionEvent event) {
    //requestDisallowInterceptTouchEvent(true); // Tell parents not to use this event
    while(event.getAction() == MotionEvent.ACTION_DOWN){
        return true;
    } 
    while(event.getAction() == MotionEvent.ACTION_UP){
        return true;
    }

    return false; // Tell children not to use this event
} 
```

我的按钮永远无法点击。但是 ontouch 监听器工作得很好哈哈：|

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T01:17:28.170

我建议扩展`LinearLayout`并使用`onInterceptTouchEvent`来捕获触摸事件，然后返回`true`以强制其子级不接​​收事件。

像这样的东西：

```
public class MyLinearLayout extends LinearLayout {
    public MyLinearLayout(Context context) {
        super(context);
    }
    public MyLinearLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }
    public MyLinearLayout(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }
    @Override
    public boolean onInterceptTouchEvent(MotionEvent event) {
        return true; // Tell children not to use this event
    }
} 
```

然后，在您的 XML 中，更改`LinearLayout`为`com.yourpackagename.MyLinearLayout`.

**附录**：如果您希望`Button`s**和**都`LinearLayout`接收事件，您可以将 更改`onInterceptTouchEvent`为：

```
@Override
public boolean onInterceptTouchEvent(MotionEvent event) {
    // Whatever touch event code you want, using the "event" variable
    return false; // Allow children to use the event
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T02:52:31.163

所以我从来没有真正找到我的问题的答案，但我找到了一种可行的方法。我没有在布局上放置一个监听器，而是为完整的活动而不是特定的视图添加了 onTouchEvent 方法。

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    if(event.getAction() == MotionEvent.ACTION_DOWN){
        Toast.makeText(CategorySelect.this, "action DOWN called", Toast.LENGTH_SHORT).show();
    } 
    if(event.getAction() == MotionEvent.ACTION_UP){
        Toast.makeText(CategorySelect.this, "action Up called", Toast.LENGTH_SHORT).show();
    }
    return super.onTouchEvent(event);
} 
```

它不会影响任何按钮，所以这正是我想要的。非常感谢 Soxxeh 与我合作。

# wpf - 通过 setter v ContentTemplate 设置内容样式

> ID：11059944
> 
> 赞同：7
> 
> 时间：2012-06-16T01:04:43.533
> 
> 标签：wpf, xaml, data-binding, mvvm, styles

第一种样式的 xaml 可以按我的意愿工作，使用 setter 生成一个带有 Wingding 字形的按钮来布置内容及其属性。这种风格的第二个版本尝试做同样的事情，但使用 DataTemplate 作为 Content，但它只显示 DataTemplate 的类型（即 System.Windows.DataTemplate）。

1.  为什么第 2 版显示的内容与第 1 版不同？
2.  假设修复是微不足道的，出于个人喜好之外的任何原因，一种风格的版本是否会比另一种更可取？

注意：我正在显示绑定和触发器，以防其中有影响内容的东西，但这只是样式的第一部分有所不同

干杯，
贝里尔

# 样式 1

显示：![在此处输入图像描述](../Images/8ba5bbd7f202927fbc0d76153e9a95df.png)

```
<Style x:Key="EditCommandButtonStyle" TargetType="{x:Type Button}" >
    <Setter Property="Content" Value="a" />
    <Setter Property="Foreground" Value="Navy" />
    <Setter Property="FontFamily" Value="Wingdings 3" />
    <Setter Property="FontWeight" Value="Bold" />
    <Setter Property="FontSize" Value="18" />
    <Setter Property="Width" Value="30" />
    <Setter Property="Height" Value="Auto" />

    <!--What makes it an Edit button-->
    <Setter Property="Command" Value="{Binding ActivateThisSatelliteVmCommand}"/>
    <Setter Property="ToolTip">
        <Setter.Value>
            <TextBlock>
                <TextBlock.Text>
                    <Binding Path="HeaderLabel" StringFormat="{resx:Resx ResxName=Smack.Core.Presentation.Resources.MasterDetail, Key=Item_Edit_Label}"/>
                </TextBlock.Text>
            </TextBlock>
        </Setter.Value>
    </Setter>

    <!-- WHen its available -->
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <Border x:Name="theBorder" CornerRadius="4">
                    <ContentPresenter x:Name="theContent" VerticalAlignment="Center" HorizontalAlignment="Center" />
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="False">
                        <Setter TargetName="theContent" Property="Visibility" Value="Hidden"/>
                        <Setter TargetName="theBorder" Property="Background" Value="Transparent"/>
                    </Trigger>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="theContent" Property="Visibility" Value="Visible"/>
                    </Trigger>
                    <Trigger Property="IsPressed" Value="True">
                        <Setter TargetName="theContent" Property="Visibility" Value="Visible"/>
                        <Setter TargetName="theBorder" Property="Background" Value="Orange"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# 风格 2

显示“System.Windows.DataTemplate”

```
<Style x:Key="EditCommandButtonStyle" TargetType="{x:Type Button}" >
    <Setter Property="Content">
        <Setter.Value>
            <DataTemplate>
                <TextBlock Text="a" FontFamily="Wingdings 3" FontWeight="Bold" FontSize="18" Foreground="Navy" />
            </DataTemplate>
        </Setter.Value>
    </Setter>

    <!--What makes it an Edit button-->
    <Setter Property="Command" Value="{Binding ActivateThisSatelliteVmCommand}"/>
    <Setter Property="ToolTip">
        <Setter.Value>
            <TextBlock>
                <TextBlock.Text>
                    <Binding Path="HeaderLabel" StringFormat="{resx:Resx ResxName=Core.Presentation.Resources.MasterDetail, Key=Item_Edit_Label}"/>
                </TextBlock.Text>
            </TextBlock>
        </Setter.Value>
    </Setter>

    <!-- When its available -->
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <Border x:Name="theBorder" CornerRadius="4">
                    <ContentPresenter x:Name="theContent" VerticalAlignment="Center" HorizontalAlignment="Center" />
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="False">
                        <Setter TargetName="theContent" Property="Visibility" Value="Hidden"/>
                        <Setter TargetName="theBorder" Property="Background" Value="Transparent"/>
                    </Trigger>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="theContent" Property="Visibility" Value="Visible"/>
                    </Trigger>
                    <Trigger Property="IsPressed" Value="True">
                        <Setter TargetName="theContent" Property="Visibility" Value="Visible"/>
                        <Setter TargetName="theBorder" Property="Background" Value="Orange"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-16T15:52:30.903

您的`Content`属性设置为`DataTemplate`

`DataTemplates`旨在与属性一起使用，而不是通过属性`Template`直接插入到 VisualTree`Content`

更改您的样式设置器以设置`ContentTemplate`而不是`Content`它应该可以正常工作

```
<Setter Property="ContentTemplate">
    <Setter.Value>
        <DataTemplate>
            <TextBlock Text="a" FontFamily="Wingdings 3" FontWeight="Bold" FontSize="18" Foreground="Navy" />
        </DataTemplate>
    </Setter.Value>
</Setter> 
```

至于你的第二个问题，我更喜欢第一个问题，因为它更简单，而且我认为它在可视树中可能包含更少的元素（我必须仔细检查）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-12T22:08:57.150

我找到了另一种解决此问题的方法：

```
<Style x:Key="DefaultButtonBaseStyle" TargetType="{x:Type ButtonBase}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ButtonBase}">
                <Grid>
                    <Border x:Name="BackBorder" Margin="0" Padding="0"
                            BorderThickness="{TemplateBinding BorderThickness}" BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding BorderBrush}"/>
                    <Border x:Name="FrontBorder" BorderThickness="{TemplateBinding BorderThickness}" BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}"
                            Margin="0" Padding="{TemplateBinding Padding}"
                            CornerRadius="{Binding ElementName=BackBorder, Path=CornerRadius}">
                        <ContentPresenter VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                    </Border>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# javascript - 用 jquery 解析嵌套的 json 结果 - 里面的例子

> ID：11059946
> 
> 赞同：0
> 
> 时间：2012-06-16T01:05:28.773
> 
> 标签：javascript, jquery, json, reddit

jsFiddle：http: [//jsfiddle.net/FRQ9b/](http://jsfiddle.net/FRQ9b/)

使用 reddit 的 json 结果。这是我使用 3 个回复（嵌套）创建的示例帖子。

```
?([
     {
        "kind":"Listing",
        "data":{
           "modhash":"",
           "children":[
              {
                 "kind":"t3",
                 "data":{
                    "domain":"self.testapiarena",
                    "banned_by":null,
                    "media_embed":{

                    },
                    "subreddit":"testapiarena",
                    "selftext_html":"&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Example of selfpost text&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;",
                    "selftext":"Example of selfpost text",
                    "likes":null,
                    "link_flair_text":null,
                    "id":"v4bux",
                    "clicked":false,
                    "title":"testing nested comments",
                    "num_comments":3,
                    "score":1,
                    "approved_by":null,
                    "over_18":false,
                    "hidden":false,
                    "thumbnail":"",
                    "subreddit_id":"t5_2ub3u",
                    "edited":false,
                    "link_flair_css_class":null,
                    "author_flair_css_class":null,
                    "downs":0,
                    "saved":false,
                    "is_self":true,
                    "permalink":"/r/testapiarena/comments/v4bux/testing_nested_comments/",
                    "name":"t3_v4bux",
                    "created":1339833041.0,
                    "url":"http://www.reddit.com/r/testapiarena/comments/v4bux/testing_nested_comments/",
                    "author_flair_text":null,
                    "author":"elzi",
                    "created_utc":1339807841.0,
                    "media":null,
                    "num_reports":null,
                    "ups":1
                 }
              }
           ],
           "after":null,
           "before":null
        }
     },
     {
        "kind":"Listing",
        "data":{
           "modhash":"",
           "children":[
              {
                 "kind":"t1",
                 "data":{
                    "body":"This is a parent comment",
                    "edited":false,
                    "subreddit_id":"t5_2ub3u",
                    "author_flair_css_class":null,
                    "created":1339833054.0,
                    "replies":{
                       "kind":"Listing",
                       "data":{
                          "modhash":"",
                          "children":[
                             {
                                "kind":"t1",
                                "data":{
                                   "body":"This is one comments below the parent level",
                                   "edited":false,
                                   "subreddit_id":"t5_2ub3u",
                                   "author_flair_css_class":null,
                                   "created":1339833067.0,
                                   "replies":{
                                      "kind":"Listing",
                                      "data":{
                                         "modhash":"",
                                         "children":[
                                            {
                                               "kind":"t1",
                                               "data":{
                                                  "body":"A comment below the first child.",
                                                  "edited":false,
                                                  "subreddit_id":"t5_2ub3u",
                                                  "author_flair_css_class":null,
                                                  "created":1339833090.0,
                                                  "replies":"",
                                                  "banned_by":null,
                                                  "downs":0,
                                                  "author":"elzi",
                                                  "created_utc":1339807890.0,
                                                  "body_html":"&lt;div class=\"md\"&gt;&lt;p&gt;A comment below the first child.&lt;/p&gt;\n&lt;/div&gt;",
                                                  "link_id":"t3_v4bux",
                                                  "parent_id":"t1_c517ue3",
                                                  "approved_by":null,
                                                  "likes":null,
                                                  "author_flair_text":null,
                                                  "id":"c517ujo",
                                                  "subreddit":"testapiarena",
                                                  "num_reports":null,
                                                  "ups":1,
                                                  "name":"t1_c517ujo"
                                               }
                                            }
                                         ],
                                         "after":null,
                                         "before":null
                                      }
                                   },
                                   "banned_by":null,
                                   "downs":0,
                                   "author":"elzi",
                                   "created_utc":1339807867.0,
                                   "body_html":"&lt;div class=\"md\"&gt;&lt;p&gt;This is one comments below the parent level&lt;/p&gt;\n&lt;/div&gt;",
                                   "link_id":"t3_v4bux",
                                   "parent_id":"t1_c517uas",
                                   "approved_by":null,
                                   "likes":null,
                                   "author_flair_text":null,
                                   "id":"c517ue3",
                                   "subreddit":"testapiarena",
                                   "num_reports":null,
                                   "ups":1,
                                   "name":"t1_c517ue3"
                                }
                             }
                          ],
                          "after":null,
                          "before":null
                       }
                    },
                    "banned_by":null,
                    "downs":0,
                    "author":"elzi",
                    "created_utc":1339807854.0,
                    "body_html":"&lt;div class=\"md\"&gt;&lt;p&gt;This is a parent comment&lt;/p&gt;\n&lt;/div&gt;",
                    "link_id":"t3_v4bux",
                    "parent_id":"t3_v4bux",
                    "approved_by":null,
                    "likes":null,
                    "author_flair_text":null,
                    "id":"c517uas",
                    "subreddit":"testapiarena",
                    "num_reports":null,
                    "ups":1,
                    "name":"t1_c517uas"
                 }
              }
           ],
           "after":null,
           "before":null
        }
     }
  ]) 
```

这是一个 jsfiddle，我已经走了多远：http: [//jsfiddle.net/FRQ9b/](http://jsfiddle.net/FRQ9b/)

谁能告诉我如何获得下面的嵌套回复？所以卡住了。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T07:00:00.183

好的，我设法为您创建了一个快速演示。您可以在这里查看 [jsfiddle 代码。][1] [1]：http: [//jsfiddle.net/nickadeemus2002/qzNad/](http://jsfiddle.net/nickadeemus2002/qzNad/)

我让它处理一些基于 json 数据结构的基本循环。这仅用于演示目的，因为您必须重构一些代码。但是，我让它工作，所以你可以看到如何访问数据。

# java - 如何保存碎片娱乐

> ID：11059951
> 
> 赞同：1
> 
> 时间：2012-06-16T01:05:50.947
> 
> 标签：java, android, android-fragments

我正在尝试使用片段和 RadioGroup 实现标签栏

我像这样在选中的无线电组更改上切换片段（在 sdk 示例中看到类似的内容）

公开

```
 void onCheckedChanged(RadioGroup radioGroup, int id) {
        TabInfo newTab = mContent.get(id);

        if (newTab != lastTab) {
            FragmentTransaction transaction = mActivity.getSupportFragmentManager().beginTransaction();
            if (lastTab != null && lastTab.fragment != null) {
                transaction.detach(lastTab.fragment);
            }
            if (newTab.fragment == null) {
                newTab.fragment = Fragment.instantiate(mActivity, newTab.getTag());
                transaction.add(mContainerId, newTab.fragment);
            } else {
                transaction.attach(newTab.fragment);
            }
            lastTab = newTab;
            transaction.setCustomAnimations(R.anim.tab_transaction, R.anim.tab_transaction);
            transaction.commit();
        }
    } 
```

但是每次发生这种情况时，附加片段都是从头开始创建的，即称为 onCreate 等等。

有什么方法可以防止片段在活动中一遍又一遍地创建？我也不希望后退按钮可以将片段切换回来；

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T08:27:29.103

除了使用[FragmentTransaction.attach()](http://developer.android.com/reference/android/app/FragmentTransaction.html#attach%28android.app.Fragment%29)和[FragmentTransaction.detach()](http://developer.android.com/reference/android/app/FragmentTransaction.html#detach%28android.app.Fragment%29)方法，您还可以使用[FragmentTransaction.show()](http://developer.android.com/reference/android/app/FragmentTransaction.html#show%28android.app.Fragment%29)和[FragmentTransaction.hide()](http://developer.android.com/reference/android/app/FragmentTransaction.html#hide%28android.app.Fragment%29)。您还需要更改您在上面的示例中提供的一些周围代码，但我将把它作为一个练习留给您。

# sql - 性能：查看或查询

> ID：11059952
> 
> 赞同：3
> 
> 时间：2012-06-16T01:05:55.220
> 
> 标签：sql, database

假设我有一个不太“好”的 SQL 查询。

SQL Query 有很多长条件的内连接，最后是一个简单的“where”语句。

现在假设我创建了一个与该 SQL 查询相对应的视图，但最后的“where”语句除外。因此，我没有进行那个长查询，而是使用视图并简单地添加“where”语句。

我的问题如下：哪一个性能最好？

我不确定“查看”选项是否对应于两个 sql 语句，而不是第一个选项的一个 sql 语句。或者在执行查询之前，“查看”查询被“粘贴”在更简单的查询中并且是“相同的”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T01:17:01.967

没有不同。视图使用与单独查询相同的查询。

不同的是，它需要将其存储在视图表视图中，而不是，它们只是从外部看起来很容易的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T01:11:34.690

假设您使用的 DBMS 具有基于成本的查询优化器，那么当查询的一部分转换为视图时，您可能不会获得任何更好的性能。您可以通过比较两个查询版本的估计成本，使用数据库的查询解释工具来确认这一点。

我建议使用查询解释实用程序来确定查询变得昂贵的确切位置，因为查询痛点的位置通常是意想不到的。看起来所有这些连接都在减慢速度，但它们可能正在利用索引来最小化连接行所需的 I/O 和 CPU 周期。很多时候，由于在 WHERE 或 ON 子句中引用了未索引的列，查询会陷入困境。

# javascript - 绘制大量线条时的 HTML 画布性能

> ID：11059953
> 
> 赞同：13
> 
> 时间：2012-06-16T01:06:08.460
> 
> 标签：javascript, html, canvas

我目前正在编写一个应用程序，它在 HTML5 画布上显示*很多*，我的意思是，很多 2D 路径（由数百、数千个小段组成）。通常，几百万点。这些点从服务器下载到二进制文件`ArrayBuffer`中。

*我可能不会在现实世界中使用那么多点，但我对如何提高性能有点兴趣。如果你愿意，你可以称之为好奇心；）*

无论如何，我已经测试了以下解决方案：

1.  使用`gl.LINES`或`gl.LINE_STRIP`与**WebGL**一起使用，并在 GPU 上的着色器中计算所有内容。目前最快的，可以在我的 Macbook Air 上显示多达**1000 万段而不会退缩。**但是如果你想避免在 JavaScript 中处理东西，那么二进制格式有非常严格的限制，这很慢。

2.  使用**Canvas2D**`stroke()` ，在一次调用中绘制一条包含所有段的巨大路径。当我超过**100k 点**时，页面会在画布更新之前冻结几秒钟。所以，不在这里工作。

3.  使用**Canvas2D**，但使用自己的`stroke()`调用绘制每条路径。尽管其他人在互联网上一直在说，这比一次调用绘制所有内容要快得多，但仍然比 WebGL 慢得多。**当我达到大约500k 段**时，事情开始变得糟糕。

这两种 Canvas2D 解决方案需要循环遍历 JavaScript 中所有路径的所有点，因此速度很慢。**您是否知道任何可以提高 JavaScript 在 ArrayBuffer 中的迭代速度或一般处理速度的方法？**

但是，奇怪的是，在所有画布绘制调用完成后，屏幕并没有立即更新。当我开始达到性能极限时，在绘制调用结束和画布更新之间存在**明显的延迟。****你知道这是从哪里来的吗？有没有办法减少它？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T18:20:35.313

首先，WebGL 是一个不错的炒作想法，但解码和显示二进制数据所需的处理量在着色器中根本不起作用，所以我排除了它。

这是我遇到的主要瓶颈。其中一些在一般编程中很常见，但记住它们是个好主意：

*   最好使用多个`for`小循环
*   尽可能在最高级别创建变量和闭包，不要在 for 循环中创建它们
*   以块的形式呈现您的数据，并`setTimeout`在几毫秒后用于安排下一个块：这样，**用户仍然可以使用 UI**
*   JavaScript 对象和数组既快又便宜，请使用它们。最好从头到尾按顺序读取/写入它们。
*   如果您不在数组中顺序写入数据，请**使用对象** *（因为非顺序读写对对象来说很便宜）*并将索引推送到索引数组中。我使用了一个 SortedList 实现来保持索引的排序，我在[这里](https://github.com/tomusdrw/SortedList)找到了。开销很小（大约是渲染时间的 10-20%），最终它是非常值得的。

这就是我记得的一切。如果我确实找到了其他东西，我会更新这个答案！

# nhibernate - 如何关闭级联删除？

> ID：11059958
> 
> 赞同：0
> 
> 时间：2012-06-16T01:07:19.240
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, s#arp-architecture, fluent-nhibernate-mapping

我有带回参考的课：

```
public class Employee : Entity
    {
        private string _Name;
        private string _Position;
        private Employee _SupervisorBackRef;
        private IList<Employee> _Subordinates;
        private IList<BusinessPartner> _BusinessPartners;

        public virtual string Name
        {
            get { return _Name; }
            set { _Name = value; }
        }

        public virtual string Position
        {
            get { return _Position; }
            set { _Position = value; }
        }

        public virtual Employee SupervisorBackRef
        {
            get { return _SupervisorBackRef; }
            set { _SupervisorBackRef = value; }
        }

        public virtual IList<Employee> Subordinates
        {
            get { return _Subordinates; }
            set { _Subordinates = value; }
        }

        public virtual IList<BusinessPartner> BusinessPartners
        {
            get { return _BusinessPartners; }
            set { _BusinessPartners = value; }
        }
    } 
```

因为反向引用 SupervisorBackRef 和 Subordinates 共享相同的外键：

```
create table Employees (
        Id INT not null,
       Name NVARCHAR(255) null,
       Position NVARCHAR(255) null,
       EmployeeFk INT null,
       primary key (Id)
    ) 
```

问题是虽然我尝试覆盖它，但如果我删除任何主管，它会删除他的所有下属。我试过这个：

```
class EmployeeOverride : IAutoMappingOverride<Employee>
{
    public void Override(FluentNHibernate.Automapping.AutoMapping<Employee> mapping)
    {
        mapping.HasMany(x => x.Subordinates).Cascade.None();
        mapping.HasOne(x => x.SupervisorBackRef).Cascade.None();
    }
} 
```

但这行不通。我尝试将其更改为不同的其他组合，我尝试了此覆盖删除，但没有任何帮助。

如果我删除任何员工，它会删除他的所有下属。

我不知道如何识别此覆盖功能是否有效。

从互联网上的许多文本中，我了解到 Cascade.None() 应该可以工作，大多数人都有相反的问题，删除/更新/...不起作用，所以我真的很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T07:55:48.700

问题是，我在另一个地方（in `HasManyConvention.Apply`）设置了实例`Cascade.AllDeleteOrphan()`，它的优先级更高。

PS: I don't know if is beter similar post like that answered od deleted. For me it looks like a problem which I had more time in past, but it is variation on "I dont't know my own code..."

# c++ - C++：OpenMP 中的私有静态变量

> ID：11059964
> 
> 赞同：3
> 
> 时间：2012-06-16T01:08:28.600
> 
> 标签：c++, class, static, openmp, private-members

如何在 OpenMP 中将静态变量和函数（来自模板化类）设为私有，以便在每个线程中具有不同的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T01:14:08.660

根据场景，您应该能够使用：

```
#pragma omp threadprivate(theVariable) 
```

有关详细信息，请参阅这篇关于在 OpenMP 中[使用线程本地存储的文章。](http://software.intel.com/en-us/articles/use-thread-local-storage-to-reduce-synchronization/)

# hibernate - Hibernate 中的查询太多，甚至是懒惰的 fetch

> ID：11059968
> 
> 赞同：0
> 
> 时间：2012-06-16T01:09:31.610
> 
> 标签：hibernate, lazy-loading

在与 Hibernate 合作几年后问这个问题有点尴尬......

我有一个 master_table ：

*   有一些 @OneToMany(fetch=FetchType.LAZY, mappedBy="something")
*   还有一些 @ManyToOne(fetch=FetchType.LAZY)
*   可能有一些@OneToOne
*   child_table 中的相同内容

我只加载了 master_table，它给了我大约 500 行。然而，在后台，大约有 6000 个查询。（很确定没有EAGER）

问：这正常吗？是否可以仅使用 1 个查询加载此表而不会影响延迟加载机制，这在这里工作得非常好。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:46:15.227

答案很简单： - 在@OneToMany 上使用 Fetch = Subselect 只给了我一个查询。由于它是惰性的，当需要孩子时，会生成相应的查询 - 使用 BatchSize 也是一个不错的选择

# c++ - C++ 构造函数未定义引用

> ID：11059970
> 
> 赞同：2
> 
> 时间：2012-06-16T01:09:43.553
> 
> 标签：c++, linker, g++

我正在尝试从另一个文件中的类声明一个对象。我已将其添加`#include "transfer.h"`到我的`metadata.cpp`文件中，但出现以下错误：

```
 metadata.o: In function `importMetadata':
 metadata.cpp:(.text+0x81): undefined reference to A::B::C::Transfer::Transfer()'
metadata.cpp:(.text+0x81): undefined reference to A::B::C::Transfer::~Transfer()' 
```

转移定义为`transfer.h`

```
namespace A{
  namespace B{
    namespace C{
       class Transfer {
            public:
               Transfer();
               ~Transfer();
               int copydata();
            ... more code goes here.
        };
    }
   }
} 
```

该文件`transfer.cpp`如下所示：

```
Transfer::Transfer(){
}
Transfer::~Transfer(){
} 
```

我还在`using namespace A::B::C;`metadata.cpp 文件的标题上做一个。有人可以帮我吗？在我声明的函数`int importMetadata()`中，我正在执行“transfer.copydata();”`metadata.cpp``Transfer transfer;``metadata.cpp`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T01:24:14.147

由于您有链接器错误而不是编译器错误，这会告诉您 #include 语句正在执行您想要的操作，并且编译器可以识别 Transfer 类及其构造函数。当链接器试图在它被告知链接但找不到它的 .o 或 .lib 文件之一中查找对 Transfer::Transfer() 函数实现的引用时，就会发生错误。

您可能有一个 transfer.cpp 与 transfer.h 一起使用，并且此文件缺少 Transfer 构造函数和析构函数的实现。这可能是因为这些函数完全丢失或被意外定义为不同的签名。

所以 transfer.cpp 应该看起来像：

```
A::B::C::Transfer::Transfer()
{
}

A::B::C::Transfer::~Transfer() 
{
} 
```

另一种可能性是您正在尝试链接从库传输的实现。在这种情况下，您需要告诉链接器使用 .lib 文件作为输入。其语法取决于您使用的编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T02:44:19.080

希望您遗漏了部分 transfer.cpp 文件，但如果您不这样做，它应该定义命名空间以匹配您的头文件，如下所示：

```
namespace A{
  namespace B{
    namespace C{
        Transfer::Transfer(){
        }
        Transfer::~Transfer(){
        }
    }
  }
} 
```

如果您**已经**完全定义了命名空间，无论是内联的还是上面的，您都需要确保您的项目中包含了 transfer.cpp 文件。似乎链接器无法找到您的源文件。

# c++ - Glew 问题，未解决的外部问题

> ID：11059971
> 
> 赞同：12
> 
> 时间：2012-06-16T01:10:22.063
> 
> 标签：c++, opengl, glut, glew

我想开始使用 OpenGL 3+ 和 4，但我在让 Glew 工作时遇到了问题。我试图将 glew32.lib 包含在 Additional Dependencies 中，并将库和 .dll 移动到主文件夹中，因此不应该有任何路径问题。我得到的错误是：

```
Error   5   error LNK2019: unresolved external symbol __imp__glewInit referenced in function "void __cdecl init(void)" (?init@@YAXXZ)   C:\Users\Mike\Desktop\Test Folder\ModelLoader through VBO\ModelLoader\main.obj  ModelLoader
Error   4   error LNK2019: unresolved external symbol __imp__glewGetErrorString referenced in function "void __cdecl init(void)" (?init@@YAXXZ) C:\Users\Mike\Desktop\Test Folder\ModelLoader through VBO\ModelLoader\main.obj  ModelLoader
Error   3   error LNK2001: unresolved external symbol __imp____glewGenBuffers   C:\Users\Mike\Desktop\Test Folder\ModelLoader through VBO\ModelLoader\main.obj  ModelLoader
Error   1   error LNK2001: unresolved external symbol __imp____glewBufferData   C:\Users\Mike\Desktop\Test Folder\ModelLoader through VBO\ModelLoader\main.obj  ModelLoader
Error   2   error LNK2001: unresolved external symbol __imp____glewBindBuffer   C:\Users\Mike\Desktop\Test Folder\ModelLoader through VBO\ModelLoader\main.obj  ModelLoader 
```

这是我的大部分代码：

```
#define NOMINMAX

#include <vector>
#include <memory>
#include <string>
#include <iostream>
#include <fstream>
#include <sstream>
#include <Windows.h>
#include <cstdio>
#include <time.h>
#include "GL\glew.h"
#include "glut.h"

#pragma comment(lib, "glew32.lib")
#pragma comment(lib, "opengl32.lib")

using namespace std;

GLsizei screen_width, screen_height;

float camera[3] = {0.0f, 10.0f, -15.0f};

float xPos = 0;
float yPos = 10;
float zPos = -15;
float orbitDegrees = 0;

clock_t sTime;
float fPS;
int fCount;

GLdouble* modelV;
GLdouble* projM;
GLint* vPort;

//Lights settings
GLfloat light_ambient[]= { 0.1f, 0.1f, 0.1f, 0.1f };
GLfloat light_diffuse[]= { 1.0f, 1.0f, 1.0f, 0.0f };
GLfloat light_specular[]= { 1.0f, 1.0f, 1.0f, 0.0f };
GLfloat light_position[]= { 100.0f, 0.0f, -10.0f, 1.0f };

//Materials settings
GLfloat mat_ambient[]= { 0.5f, 0.5f, 0.0f, 0.0f };
GLfloat mat_diffuse[]= { 0.5f, 0.5f, 0.0f, 0.0f };
GLfloat mat_specular[]= { 1.0f, 1.0f, 1.0f, 0.0f };
GLfloat mat_shininess[]= { 1.0f };

typedef struct Vectors {
    float x;
    float y;
    float z;
}Vector;

typedef struct Polys {
    Vector v;
    Vector vt;
    Vector vn;
    int texture;
} Poly;

vector<Vector> vecs;
vector<Vector> normVecs;
vector<Vector> textVecs;

vector<Poly> polyList;

void loadModel(string filepath);
void createTex(string ref);
void render();

// An array of 3 vectors which represents 3 vertices
static const GLfloat g_vertex_buffer_data[] = {
   -1.0f, -1.0f, 0.0f,
   1.0f, -1.0f, 0.0f,
   0.0f,  1.0f, 0.0f,
};

void render()
{
}

void createTex(string ref)
{
}

void loadModel(string filepath)
{
}

void resize (int p_width, int p_height)
{
    if(screen_width==0 && screen_height==0) exit(0);
    screen_width=p_width; // Obtain the new screen width values and store it
    screen_height=p_height; // Height value

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); // Clear both the color and the depth buffer so to draw the next frame
    glViewport(0,0,screen_width,screen_height); // Viewport transformation

    glMatrixMode(GL_PROJECTION); // Projection transformation
    glLoadIdentity(); // Initialize the projection matrix as identity
    gluPerspective(45.0f,(GLfloat)screen_width/(GLfloat)screen_height,1.0f,10000.0f);

    glutPostRedisplay(); // This command redraw the scene (it calls the same routine of glutDisplayFunc)
}

void display(void)
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); // This clear the background color to dark blue
    glMatrixMode(GL_MODELVIEW); // Modeling transformation
    glPushMatrix();
    glLoadIdentity(); // Initialize the model matrix as identity

    gluLookAt(xPos, yPos, zPos, /* look from camera XYZ */
               0, yPos, 0, /* look at the origin */
               0, 1, 0); /* positive Y up vector */

    glRotatef(orbitDegrees, 0.f, 1.0f, 0.0f);
    //glTranslatef(0.0,0.0,-20); // We move the object forward (the model matrix is multiplied by the translation matrix)
    //rotation_x = 30;
    //rotation_x = rotation_x + rotation_x_increment;
   //rotation_y = rotation_y + rotation_y_increment;
       //rotation_z = rotation_z + rotation_z_increment;

   //if (rotation_x > 359) rotation_x = 0;
   //if (rotation_y > 359) rotation_y = 0;
   //if (rotation_z > 359) rotation_z = 0;

   //  glRotatef(rotation_x,1.0,0.0,0.0); // Rotations of the object (the model matrix is multiplied by the rotation matrices)
   //glRotatef(rotation_y,0.0,1.0,0.0);
   //    glRotatef(rotation_z,0.0,0.0,1.0);

    //if (objarray[0]->id_texture!=-1) 
    //{
    //  glBindTexture(GL_TEXTURE_2D, objarray[0]->id_texture); // We set the active texture 
    //    glEnable(GL_TEXTURE_2D); // Texture mapping ON
    //  printf("Txt map ON");
    //}
    //else
    //    glDisable(GL_TEXTURE_2D); // Texture mapping OFF

    glGetDoublev(GL_PROJECTION_MATRIX, modelV);

    glGetDoublev(GL_PROJECTION_MATRIX, projM);

    glGetIntegerv(GL_VIEWPORT, vPort);

    if(clock() > sTime)
    {
        fPS = fCount;
        fCount = 0;
        sTime = clock() + CLOCKS_PER_SEC;
    }

    render();

    glDisable(GL_LIGHTING);

    GLdouble pos[3];

    gluUnProject(100, yPos, -14, modelV, projM, vPort, &pos[0], &pos[1], &pos[2]);

    char buffer2[255];

    int pAmmount = sprintf(buffer2,"FPS: %.2f", fPS);

    //glRasterPos3f(pos[0], pos[1], pos[2]);

    for(int i = 0; i < pAmmount; i++)
    {
        glutBitmapCharacter(GLUT_BITMAP_TIMES_ROMAN_24, buffer2[i]);
    }

    glEnable(GL_LIGHTING);

    /*glPopMatrix();
    glPushMatrix();
    glTranslatef(5.0,0.0,-20.0);
    objarray[1]->render();*/
    glPopMatrix();
    glFlush(); // This force the execution of OpenGL commands
    glutSwapBuffers(); // In double buffered mode we invert the positions of the visible buffer and the writing buffer
    fCount++;
}

void keyboard(unsigned char k, int x, int y)
{
    switch(k)
    {
        case 'w':
                yPos++;
        break;
        case 's':
            yPos--;
        break;
        case 'a':
            xPos--;
        break;
        case 'd':
            xPos++;
        break;
        case 'q':
        orbitDegrees--;
        break;
        case 'e':
            orbitDegrees++;
        break;
        case 'z':
            zPos--;
        break;
        case 'x':
            zPos++;
        break;
    }
}

void initWindow(GLsizei screen_width, GLsizei screen_height)
{
    glClearColor(0.0, 0.0, 0.0, 0.0); // Clear background color to black

    // Viewport transformation
    glViewport(0,0,screen_width,screen_height);

    // Projection transformation
    glMatrixMode(GL_PROJECTION); // Specifies which matrix stack is the target for matrix operations 
    glLoadIdentity(); // We initialize the projection matrix as identity
   gluPerspective(45.0f,(GLfloat)screen_width/(GLfloat)screen_height,1.0f,10000.0f); // We define the "viewing volume"

    gluLookAt(camera[0], camera[1], camera[2], /* look from camera XYZ */
               0, 0, 0, /* look at the origin */
               0, 1, 0); /* positive Y up vector */

    try
    {
        //loadModel("Goku habit dechiré.obj");
        loadModel("Flooring.obj");;
    }
    catch(string& filepath)
    {
        cerr << "Model could not be loaded: " << filepath << endl;

        filepath = "Model could not be loaded: " + filepath;

        wostringstream sString;

        sString << filepath.c_str();

        MessageBox(HWND_DESKTOP, sString.str().c_str(), L"Error: loadModel(string filepath)", MB_OK);
    }

    //Lights initialization and activation
    glLightfv (GL_LIGHT1, GL_AMBIENT, light_ambient);
    glLightfv (GL_LIGHT1, GL_DIFFUSE, light_diffuse);
    glLightfv (GL_LIGHT1, GL_DIFFUSE, light_specular);
    glLightfv (GL_LIGHT1, GL_POSITION, light_position);    
    glEnable (GL_LIGHT1);
    glEnable (GL_LIGHTING);

    //Materials initialization and activation
    glMaterialfv (GL_FRONT, GL_AMBIENT, mat_ambient);
    glMaterialfv (GL_FRONT, GL_DIFFUSE, mat_diffuse);
    glMaterialfv (GL_FRONT, GL_DIFFUSE, mat_specular);
    glMaterialfv (GL_FRONT, GL_POSITION, mat_shininess);

    //Other initializations
    glShadeModel(GL_SMOOTH); // Type of shading for the polygons
    //glHint (GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST); // Texture mapping perspective correction
    //glEnable(GL_TEXTURE_2D); // Texture mapping ON
    glPolygonMode (GL_FRONT_AND_BACK, GL_FILL); // Polygon rasterization mode (polygon filled)
    glEnable(GL_CULL_FACE); // Enable the back face culling
    glEnable(GL_DEPTH_TEST); // Enable the depth test 
    glEnable(GL_NORMALIZE);

    /*float* matrix = new float[16];

    glGetFloatv(GL_PROJECTION_MATRIX, matrix);

    for(int i = 0; i < 4; i++)
    {
        cout << matrix[0] << " " << matrix[1] << " " << matrix[2] << " " << matrix[3] << endl;
        matrix += 3;
    }*/

    modelV = new GLdouble[16];

    projM = new GLdouble[16];

    vPort = new GLint[4];

    sTime = clock() + CLOCKS_PER_SEC;
}

void init()
{
    GLenum GlewInitResult;

    GlewInitResult = glewInit();

    if (GLEW_OK != GlewInitResult) {
        fprintf(
            stderr,
            "ERROR: %s\n",
            glewGetErrorString(GlewInitResult)
        );
        exit(EXIT_FAILURE);
    }

    // This will identify our vertex buffer
    GLuint vertexbuffer;

    // Generate 1 buffer, put the resulting identifier in vertexbuffer
    glGenBuffers(1, &vertexbuffer);

    // The following commands will talk about our 'vertexbuffer' buffer
    glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);

    // Give our vertices to OpenGL.
    glBufferData(GL_ARRAY_BUFFER, sizeof(g_vertex_buffer_data), g_vertex_buffer_data, GL_STATIC_DRAW);
}

int main(int argc, char **argv)
{
    screen_width = 800;
    screen_height = 800;

    glutInit(&argc, argv);    
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);
    glutInitWindowSize(screen_width,screen_height);
    glutInitWindowPosition(0,0);
    glutCreateWindow("ModelLoader");    
    glutDisplayFunc(display);
    glutIdleFunc(display);
    glutReshapeFunc (resize);
    glutKeyboardFunc(keyboard);

    //glutKeyboardFunc(keyboard);
    //glutSpecialFunc(keyboard_s);
    initWindow(screen_width, screen_height);
    init();
    glutMainLoop();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T12:47:15.403

你有一个链接问题。您没有向链接器提供 glew lib 文件的正确路径。因此，链接器无法找到您正在调用的函数的编译代码。

从您的日志看来，您正在使用 Windows。如果您使用的是 Visual Studio，请右键单击您的项目。选择链接器，然后选择输入。验证 Additional dependencies 是否包含 glew lib 的路径。

请注意，链接时不需要 dll。这将仅在运行时加载（请记住将其放在与可执行文件相同的文件夹中或系统路径中列出的路径中）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-03T11:49:55.430

这已得到修复。这个问题只出现在我在大学使用的机器上。问题是机器有一个较旧的 .dll 与我在解决方案文件中的 .dll 冲突。它安装在机器的系统文件中。因此，它产生了这些错误。

下次我应该检查一下这样的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T12:50:52.827

不确定它将如何帮助您，但您可以尝试将您的项目静态链接到“.a”库。或者它是 Windows 上的 .lib。如果有未解析的符号，则意味着它试图链接到库而不是真正的 dll。

如果它使用 dll，它可能会在运行时失败。

# android - 如何在android应用程序中使用xml？

> ID：11059974
> 
> 赞同：0
> 
> 时间：2012-06-16T01:11:28.490
> 
> 标签：android, xml

我目前正在创建我以前从未使用过的第一个 android 应用程序

我需要的是从互联网上读取 xml 文件并将其放入列表中

（阅读此 xml [http://pollsdb.com/test.txt](http://pollsdb.com/test.txt)并将结果放入列表中）

如果有人可以发布有效的代码，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T01:24:00.247

XML Pull Parser 是一个定义 XMLPULL V1 API 中提供的解析功能的接口。

根据设置的功能，有以下不同类型的解析器：

当 FEATURE_PROCESS_DOCDECL 设置为 true 时，XML 1.0 规范中定义的非验证解析器 当 FEATURE_VALIDATION 为真时（这意味着 FEATURE_PROCESS_DOCDECL 为真），当 FEATURE_PROCESS_DOCDECL 为假（这是默认值并且如果不同的值是required 必须在开始解析之前更改）然后解析器的行为类似于 XML 1.0 兼容的非验证解析器，条件是 XML 文档中不存在 DOCDECL（内部实体仍然可以使用 defineEntityReplacementText() 定义）。这种操作模式适用于 J2ME 等受限环境中的操作。有两个关键方法：next() 和 nextToken()。next() 提供对高级解析事件的访问，而 nextToken() 允许访问较低级别的令牌。

解析器的当前事件状态可以通过调用 getEventType() 方法来确定。最初，解析器处于 START_DOCUMENT 状态。

next() 方法将解析器推进到下一个事件。从 next 返回的 int 值确定当前解析器状态，并且与从以下对 getEventType () 的调用返回的值相同。

next() 可以看到以下事件类型

START_TAG 读取了一个 XML 开始标记。TEXT 文本内容被读取；可以使用 getText() 方法检索文本内容。（在验证模式下，next() 不会报告可忽略的空格，请改用 nextToken()）END_TAG 读取了结束标记 END_DOCUMENT 在第一个 next() 或 nextToken()（或任何其他 next*() 方法之后没有更多事件可用) 被称为用户应用程序可以通过以下方式从 XML 声明中获取 XML 版本、独立和编码：

版本：getProperty("http://xmlpull.org/v1/doc/properties.html#xmldecl-version") 如果未读取 XMLDecl 或不支持独立的属性，则返回 String ("1.0") 或 null：getProperty( "http://xmlpull.org/v1/doc/properties.html#xmldecl-standalone") 返回布尔值：如果没有独立声明或不支持属性则返回布尔值，否则返回布尔值(true) 如果独立=“是”和 Boolean(false) 当 Standalone="no" 编码：从 getInputEncoding() 获得 null 如果流具有未知编码（未在 setInputStream 中设置）并且未在 XMLDecl 中声明

使用此 API 的最小示例如下所示：

```
import java.io.IOException;
 import java.io.StringReader;

 import org.xmlpull.v1.XmlPullParser;
 import org.xmlpull.v1.XmlPullParserException;
 import org.xmlpull.v1.XmlPullParserFactory;

 public class SimpleXmlPullApp
 {

     public static void main (String args[])
         throws XmlPullParserException, IOException
     {
         XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
         factory.setNamespaceAware(true);
         XmlPullParser xpp = factory.newPullParser();

         xpp.setInput( new StringReader ( "<foo>Hello World!</foo>" ) );
         int eventType = xpp.getEventType();
         while (eventType != XmlPullParser.END_DOCUMENT) {
          if(eventType == XmlPullParser.START_DOCUMENT) {
              System.out.println("Start document");
          } else if(eventType == XmlPullParser.START_TAG) {
              System.out.println("Start tag "+xpp.getName());
          } else if(eventType == XmlPullParser.END_TAG) {
              System.out.println("End tag "+xpp.getName());
          } else if(eventType == XmlPullParser.TEXT) {
              System.out.println("Text "+xpp.getText());
          }
          eventType = xpp.next();
         }
         System.out.println("End document");
     }
 } 
```

上面的示例将生成以下输出：

```
Start document
 Start tag foo
 Text Hello World!
 End tag foo 
```

根据您的需要编辑代码:)

# c# - 如何将其他程序的任何可见窗口设置在顶部？

> ID：11059999
> 
> 赞同：1
> 
> 时间：2012-06-16T01:15:52.330
> 
> 标签：c#, windows

需要什么来抓住可见窗口的句柄并将其设置为保持在顶部？

例如，能够将其他一些应用程序（比如记事本）的 onTop 属性设置在顶部。

有没有一种简单的方法可以用 Win 7 或 8 做到这一点？如果可能的话，并不是真的在寻找 Windows API 的低级技巧。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T01:20:08.407

您可以通过以下方式在给定窗口句柄的情况下将窗口设为 Topmost：

```
[DllImport("user32.dll")]
static extern bool SetWindowPos(IntPtr hWnd, IntPtr hWndInsertAfter, int X, int Y, int cx, int cy, uint uFlags);

static readonly IntPtr HWND_TOPMOST = new IntPtr(-1);
const UInt32 SWP_NOSIZE = 0x0001;
const UInt32 SWP_NOMOVE = 0x0002;
const UInt32 SWP_SHOWWINDOW = 0x0040;

// Call this way:
SetWindowPos(theWindowHandle, HWND_TOPMOST, 0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE | SWP_SHOWWINDOW); 
```

获取适当窗口句柄的方法因应用程序而异。您可能可以通过[Process.MainWindowHandle](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.mainwindowhandle.aspx)`EnumWindows`获得它，但有时如果它不是“主窗口” ，它需要在 Windows API 中使用。

例如，对于记事本，使用上述内容，您可以执行以下操作：

```
var processes = Process.GetProcessesByName("notepad");
SetWindowPos(processes.First().MainWindowHandle, HWND_TOPMOST, 0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE | SWP_SHOWWINDOW); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T03:34:28.037

HWND_TOPMOST 会将窗口永久打开（直到其他窗口被标记为最顶层），但如果您希望窗口简单地弹出到前面，请尝试：

静态只读 IntPtr HWND_TOP = new IntPtr(0);