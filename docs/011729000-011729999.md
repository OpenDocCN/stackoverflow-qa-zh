# StackOverflow 问答 11729000-11729999

# javascript - 如何考虑 localStorage 的大小限制

> ID：11729002
> 
> 赞同：2
> 
> 时间：2012-07-30T20:23:36.910
> 
> 标签：javascript, html, local-storage, session-storage

我有一个包含大量结果的 Web 应用程序。我想将这些结果存储在浏览器的 localStorage 中以便快速检索。

但是，大约十次搜索后，localStorage 将达到其大小限制（大约为 5 MB 左右，具体取决于浏览器的品牌）。我想知道那时可能会发生什么负面影响。. .

浏览器会在添加新项目时丢弃旧的存储项目（这是我所希望的）？如果我不手动删除旧结果，它不会存储新结果吗？还是浏览器会抛出异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:29:10.617

“[...] 对数据存储区的更改必须要么成功，要么根本不能更改数据存储区。”

并`QuotaExceededError`抛出一个，所有指定在这里：[http ://www.w3.org/TR/webstorage/#the-storage-interface](http://www.w3.org/TR/webstorage/#the-storage-interface)

# ruby - 注入返回什么？什么可以在一个块中？

> ID：11729016
> 
> 赞同：1
> 
> 时间：2012-07-30T20:24:30.057
> 
> 标签：ruby, enumerable

在下面的代码中，Ocean 代表海底山脉的高度。亚特兰蒂斯是一组不同位置的坐标。我想总结一下亚特兰蒂斯所引用的山脉的高度。

```
require 'matrix'    
Ocean=Matrix[ [3,1,4,4,6,2,8,12,8,2],
        [6,2,4,13,25,21,11,22,9,3,],
        [6,20,27,34,22,14,12,11,2,5],
        [6,28,17,23,31,18,11,9,18,12],
        [9,18,11,13,8,9,10,14,24,11],
        [3,9,7,16,9,12,28,24,29,21],
        [5,8,4,7,17,14,19,30,33,4],
        [7,17,23,9,5,9,22,21,12,21,],
        [7,14,25,22,16,10,19,15,12,11],
        [5,16,7,3,6,3,9,8,1,5] ]

atlantis=[[2,3],[3,4]]

puts atlantis.inject {|sum, n| sum + Ocean[n(0),n(1)]} 
```

由于 atlantis 是一个数组数组，因此 n(0) 应该在第一次注入执行块时引用第一个数组 [2,3] 的第一个元素 2。但我得到的错误

t1.rb:15:in `block in <main>': undefined method`n' for main:Object (NoMethodError) from t1.rb:15:in `each' from t1.rb:15:in`injection' from t1.rb:15:in `'

似乎表明它甚至不知道“n”是什么。我错过了什么？在这种情况下，n 究竟代表什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:32:08.373

从 Ruby[文档中`Enumerable#inject(...)`](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)，该函数返回将给定二元运算符重复应用于种子和每个连续值的结果。所以返回值应该是块过程（或符号）返回的类型的对象。在您的情况下，该块最终使用`+`带有数字参数的运算符，因此返回值应该是一个数字。

您应该通过提供种子值并使用正确的数组查找语法来修改您的尝试：

```
atlantis.inject(0) { |sum,n| sum + Ocean[n[0],n[1]] } # => 65 
```

因此，您的调用序列将如下所示：

```
# sum = seed = 0 (from .inject(0))
# sum = sum + Ocean[atlantis[0][0], atlantis[0][1]] = 34
# sum = sum + Ocean[atlantis[1][0], atlantis[1][1]] = 34 + 31
# sum = 65 
```

# ios - 已停用 iOS 应用程序上的地理位置

> ID：11729018
> 
> 赞同：2
> 
> 时间：2012-07-30T20:24:45.463
> 
> 标签：ios, geolocation

是否可以在应用程序关闭时为其添加位置感知？

例如，我想创建一个接近服务，该服务在我的应用程序关闭时工作，并在用户到达某个区域时向用户推送本地通知。

我读到，使用 CLRegion 我可以达到类似的结果，但只有在应用程序处于活动状态（或在后台）时。

我需要类似于由用户位置激活的远程通知服务。但这听起来真的很奇怪。是否有可能在 iOS 中提供类似的服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:55:50.070

我相信您可以使用重要更改 API 来唤醒已被系统关闭（或崩溃）的应用程序。但是您仍然应该查看区域监控，因为它可能更接近您真正想要的。

这是链接：http: [//developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW25](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW25)

和相关部分：

> 如果应用程序在发生更新时被挂起，系统会在后台将其唤醒以处理更新。如果应用程序启动此服务然后终止，系统会在新位置可用时自动重新启动应用程序。此服务在 iOS 4 及更高版本中可用，并且仅在包含蜂窝无线电的设备上可用。

当您设置 CLLocationManager 时，只需调用

```
- (void)startMonitoringSignificantLocationChanges 
```

并以典型方式处理任何事件作为委托回调

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
```

请注意，如果应用程序被终止，您还将收到对您的应用程序委托完成启动方法的回调。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

我也很确定，在这种情况下，回调将包含一个标志，通知您它是由于位置更新而启动的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T22:07:56.937

有2个选项：

一是上面John提到的重大位置变更服务。另一个是`startRegionMonitoring`

两者都包含在Apple的[位置感知文档中](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html)

两者都可以在短时间内打开已终止（关闭）的应用程序，并且您可以发送本地推送通知以提醒用户。应用程序无法进入正常状态，但如果用户单击通知，应用程序将打开，因此您可以实现目标。

这是在 didFinishLaunchingWithOptions 委托中拦截事件并触发本地通知的示例代码。通常，您不应在此处触发通知，而是重新初始化您的位置管理器，获取新位置并显示用户输入区域的消息（本地通知）...

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    //see if application was launched from a location event!
    if ([launchOptions objectForKey:UIApplicationLaunchOptionsLocationKey]) {
        //if so, we need to reinitialize our location manager!
        [[LocationManager sharedLocationManager] startSignificantLocationMonitoring];
        //fire a notification

        UILocalNotification *notification = [[UILocalNotification alloc] init]; 
        notification.fireDate = [NSDate date]; 
        NSTimeZone* timezone = [NSTimeZone defaultTimeZone]; 
        notification.timeZone = timezone; 
        notification.alertBody = @"app did wake up"; 
        notification.alertAction = @"OK"; 
        notification.soundName = @"yes.caf"; 
        [[UIApplication sharedApplication] scheduleLocalNotification:notification];

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T20:30:38.723

我认为您无法从 iOS 中的封闭应用程序中执行任何操作。您可以从后台（非活动状态）做非常有限的事情，但我不知道您可以从关闭的应用程序中做任何事情。我真的不知道应用程序在不运行时可以做什么;-)。

# php - 如何将php函数的结果加载到变量中

> ID：11729020
> 
> 赞同：0
> 
> 时间：2012-07-30T20:24:53.393
> 
> 标签：php, function

我的服务器上有一个 php 文件，它通过 URL 接收两个输入，然后返回结果。加载页面时，我希望已经加载了该计算的结果。例如：

```
$var = load("http://mysite.com/myfile.php?&var1=var1&var2=var2"); 
```

我知道负载不是一个真正的功能，但是有没有适合我正在寻找的简单的东西？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:27:03.567

使用[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)

```
$foo = file_get_contents('http://mysite.com/myfile.php?&var1=var1&var2=var2'); 
```

或者，如果文件位于您的服务器上，则更好的解决方案：

```
include('myfile.php'); 
```

并`$_GET`在包含的脚本本身中设置变量，或者在包含它之前设置变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:28:35.980

如果它们在同一台服务器上运行，是否考虑直接调用脚本？

```
$_GET["var1"] = "var1";
$_GET["var2"] = "var2";
include "myfile.php"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T20:29:08.923

您可以使用[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)，但简单地包含文件并直接在文件中调用函数可能是更实用的解决方案，而不是尝试手动加载文件。

# c# - Memory Cache .Net 4.0 性能测试：惊人的结果

> ID：11729023
> 
> 赞同：8
> 
> 时间：2012-07-30T20:25:14.527
> 
> 标签：c#, performance, validation, .net-4.0, memorycache

这个性能测试是错误的还是系统缓存正在以异常的性能工作？

这是我的结果：
[13] 交互次数 100000：63 毫秒
[14] 交互次数 100000：139 毫秒
[12] 交互次数 100000：47 毫秒
[15] 交互次数 100000：44 毫秒
测试结束。

硬件：x86 Family 6 Model 23 Stepping GenuineIntel ~2992 Mhz 3.327 MB, 5.1.2600 Service Pack 3

```
using System;
using System.Collections.Generic;
using System.Runtime.Caching;
using System.Diagnostics;
using System.Threading;

namespace CacheNet40
{
    public class CacheTest
    {
        private ObjectCache cache;

        public CacheTest()
        {
            cache = MemoryCache.Default;
        }

        public void AddItem(CacheItem item, double span)
        {
            CacheItemPolicy cp = new CacheItemPolicy();
            cp.SlidingExpiration.Add(TimeSpan.FromMinutes(span));

            cache.Add(item, cp);
        }
        public Object GetItem(string key)
        {
            return cache.Get(key);
        }
    }

    class Program
    {        
        private static CacheTest Cache = new CacheTest();
        private static string allowedChars = "abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNOPQRSTUVWXYZ0123456789!@$?_-";
        private static int counter = 0;
        private static readonly object locker = new object();

        static string CreateRandomString(int passwordLength, int idx)
        {            
            char[] chars = new char[passwordLength];
            Random rd = new Random((int)DateTime.Now.Ticks + idx);

            for (int i = 0; i < passwordLength; i++)
            {
                chars[i] = allowedChars[rd.Next(0, allowedChars.Length)];
            }
            return new string(chars);
        }

        private static void CacheAccessTes()
        {
            int span = 5;
            string key;
            string data;
            int itens = 1000;
            int interactions = 100000;
            int cont = 0;
            int index = 0;
            List<string> keys = new List<string>();

            lock (locker)
            {
                counter++;
            }

            cont = itens;

            //populates it with data in the cache
            do
            {                
                key = CreateRandomString(127, Thread.CurrentThread.ManagedThreadId + cont);
                keys.Add(key);

                data = CreateRandomString(156000, Thread.CurrentThread.ManagedThreadId + cont + 1);

                CacheItem ci = new CacheItem(key, data);
                Cache.AddItem(ci, span);

                cont--;
            }
            while (cont > 0);

            cont = interactions;
            index = 0;

            //test readings
            Stopwatch stopWatch = new Stopwatch();
            stopWatch.Start();            
            do
            {
                Object ci = Cache.GetItem(keys[index]);

                ci = null;
                index++;
                if (index == itens)
                {
                    index = 0;
                }

                cont--;
            }
            while (cont > 0);
            stopWatch.Stop();

            lock (locker)
            {
                counter--;
            }

            string outstring = String.Format("[{0}] number of interactions {1} : {2} milliseconds", Thread.CurrentThread.ManagedThreadId, interactions, stopWatch.ElapsedMilliseconds );
            Console.WriteLine(outstring);
        }

        static void Main(string[] args)
        {
            for (int threads = 0; threads < 4; threads++)
            {
                Thread thread = new Thread(new ThreadStart(CacheAccessTes));
                thread.Start();
            }

            Thread.Sleep(1000);

            while (true)
            {
                lock (locker)
                {
                    if (counter == 0) break;
                }
                Thread.Sleep(100);
            }

            Console.WriteLine("End of test.");
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2019-05-07T19:43:15.630

我刚刚在网上搜索了有关`MemoryCache`性能的信息，并偶然发现了这个 SO 问题。我问自己为什么没有使用合适的基准库，所以我最终通过非常懒惰来制作自己的基准（所有优秀的程序员都应该 :-) 并使用令人难以置信的[BenchmarkDotNet](https://benchmarkdotnet.org/)库来检查（或不）有多好这个类的行为。

**首先是结果**

```
BenchmarkDotNet=v0.11.5, OS=Windows 10.0.17134.706 (1803/April2018Update/Redstone4)
Intel Core i5-8250U CPU 1.60GHz (Kaby Lake R), 1 CPU, 8 logical and 4 physical cores
Frequency=1757813 Hz, Resolution=568.8887 ns, Timer=TSC
  [Host]     : .NET Framework 4.7.2 (CLR 4.0.30319.42000), 64bit RyuJIT-v4.7.3394.0
  DefaultJob : .NET Framework 4.7.2 (CLR 4.0.30319.42000), 64bit RyuJIT-v4.7.3394.0

|                         Method |     N |      Mean |     Error |    StdDev |
|------------------------------- |------ |----------:|----------:|----------:|
|            FindDadosEmpInCache | 30000 | 231.40 ns | 0.4435 ns | 0.3703 ns |
|               FindDataAtTheEnd | 30000 | 429.90 ns | 1.1490 ns | 1.0186 ns |
|           FindDataInDictionary | 30000 |  24.09 ns | 0.2244 ns | 0.2099 ns |
| FindDataInConcurrentDictionary | 30000 |  29.66 ns | 0.0990 ns | 0.0926 ns |
|              FindDataInHashset | 30000 |  16.25 ns | 0.0077 ns | 0.0065 ns | 
```

**现在有些解释...**

我最感兴趣的是看看与具有数千个条目的散列列表（ ， ...）`MemoryCache`相比有多快，以及对这种“长”列表的最坏情况线性搜索。所以我添加了一些额外的测试，并意识到虽然不如简单或并发列表快，但速度仍然在纳秒级。从 30,000 长的缓存项目列表中检索项目甚至不需要一毫秒。`Dictionary``Hashset``MemoryCache`

公平`MemoryCache`地说，它比那些简单的列表要多得多，因为它必须控制并发、项目过期/驱逐等。我相信它对于各种工作负载来说已经足够快了，但是如果你不需要它的附加功能，比如驱逐策略，您最好坚持使用更简单的散列列表实现。

另一方面，由于它比哈希查找“慢”一个数量级，因此可能还有改进的空间。我猜设计师认为它已经足够好了，我有什么资格不同意 DOTNET 工程师的意见？:-)

以下是基准程序的源代码：

```
using BenchmarkDotNet.Attributes;
using BenchmarkDotNet.Running;
using System;
using System.Collections.Concurrent;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Caching;

namespace TestListPerformance
{
    class Program
    {
        static void Main(string[] args) {
            var summary = BenchmarkRunner.Run<BenchmarkMemoryCache>();
        }
    }

    public class BenchmarkMemoryCache
    {
        [Params(30000)]
        public int N { get; set; }
        public string FindStr;
        private IList<DadosEmp> data;
        private Dictionary<string, DadosEmp> dict;
        private ConcurrentDictionary<string, DadosEmp> concurrentDict;
        private HashSet<DadosEmp> hashset;
        private DadosEmp last;

        [GlobalSetup]
        public void BuildData() {
            FindStr = N.ToString();
            data = new List<DadosEmp>(N);
            dict = new Dictionary<string, DadosEmp>(N);
            concurrentDict = new ConcurrentDictionary<string, DadosEmp>();
            hashset = new HashSet<DadosEmp>();
            for (int i = 0; i <= N; i++) {
                DadosEmp d;
                data.Add(d = new DadosEmp {
                    Identificacao = i,
                    Pis = i * 100,
                    NumCartao = i * 1000,
                    Nome = "Nome " + i.ToString(),
                });
                MemoryCache.Default.Add(i.ToString(), d, 
                    new CacheItemPolicy { SlidingExpiration = TimeSpan.FromMinutes(30) });
                dict.Add(i.ToString(), d);
                concurrentDict.TryAdd(i.ToString(), d);
                hashset.Add(d);
                last = d;
            }
        }
        [Benchmark]
        public DadosEmp FindDadosEmpInCache() {
            var f = (DadosEmp)MemoryCache.Default.Get(FindStr);
            return f;
        }
        [Benchmark]
        public DadosEmp FindDataAtTheEnd() {
            var f = data.FirstOrDefault(e => e.NumCartao == N || e.Pis == N || e.Identificacao == N);
            return f;
        }
        [Benchmark]
        public DadosEmp FindDataInDictionary() {
            var f = dict[FindStr];
            return f;
        }
        [Benchmark]
        public DadosEmp FindDataInConcurrentDictionary() {
            var f = concurrentDict[FindStr];
            return f;
        }
        [Benchmark]
        public bool FindDataInHashset() {
            return hashset.Contains(last);
        }

    }

    public class DadosEmp : IEquatable<DadosEmp> 
    {
        public const string BIO_EXCLUSAO = "xbio";

        public DadosEmp() {
            Biometrias = new List<string>();
        }
        public long Identificacao { get; set; }
        public long Pis { get; set; }
        public long NumCartao { get; set; }
        public string Nome { get; set; }
        public int VersaoBio { get; set; }
        public string Unidade { get; set; }
        public IList<string> Biometrias { get; set; }
        public string Biometria { get; set; } 
        public bool ExcluirBiometria { get { return Biometria == BIO_EXCLUSAO; } }
        public DateTime DataEnvioRep { get; set; } 
        public string SenhaTeclado { get; set; }
        public bool ExigeAutorizacaoSaida { get; set; }
        public bool BioRepPendente { get; set; }
        public override bool Equals(object obj) {
            DadosEmp e = obj as DadosEmp;
            if (ReferenceEquals(e, null))
                return false;
            return Equals(e);
        }
        public bool Equals(DadosEmp e) {
            if (ReferenceEquals(e, null))
                return false;
            return e.Pis == this.Pis;
        }
        public override int GetHashCode() {
            return Pis.GetHashCode();
        }
        public override string ToString() {
            return string.Format("{0} ({1} - {2})", Nome, Pis, Identificacao);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T08:43:58.853

看起来不错。虽然低于一秒的时间不是很可靠；您可能遇到了垃圾收集，您的 PC 可能会在短时间内执行其他操作，第一次 JIT 编译等。

所以增加计数。这也应该使每个线程的结果最终更接近。

我上周做的一些测试使它达到了每秒 800 万次迭代（做的不多，但仍然）单线程。所以是的，这些天 PC 速度很快 ;-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T05:18:22.050

在我的机器上，每个 GetItem 调用大约需要 40 毫秒或 400 ns。

我在调试器下跟踪调用，在我的 I7 机器上每个 GetItem 大约有 2000 条指令。这超出了我的预期。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-29T22:04:07.227

问题是不能在多核机器上使用的 StopWatch 类！（我假设您有一个多核 CPU）与当线程从一个内核移动到另一个内核时 BIOS 如何处理该计数器有关（即使是单线程应用程序也会跳转内核！）。

**编辑：**
查看 - [http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904(v=vs.85).aspx) - 特别是备注部分。还有一个 stackoverflow 帖子 -[多核和线程感知 .Net 秒表？](https://stackoverflow.com/questions/9283368/multicore-and-thread-aware-net-stopwatch). **结束编辑**

我一直在寻找衡量应用程序性能的最佳方法，我想出的最可靠的方法是 DateTime.UtcNow。获取开始时间和结束时间，然后取它们之间的差异。你必须循环你的代码以克服低精度，但我遇到的其他方法都没有提供更**可靠的**精度。

# objective-c - NSString 使用不正确？

> ID：11729026
> 
> 赞同：0
> 
> 时间：2012-07-30T20:25:35.177
> 
> 标签：objective-c, nsstring

我正在按照我书中的一个例子来`AddressCard`上课。该类的方法之一是设置器，我最终为我`-(void) setName: (NSString *) theName;`的一个对象设置了名称，如下所示：二传手。我的做法是错误的还是错误的做法？`myCard.name = @"Jen";``NSString`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:32:14.447

语法：

```
myCard.name = @"Jen" 
```

正在将字符串“Jen”设置为已分配的名为 name 的属性（我猜是 NSString 类型）。这可以。

然而，更明智的做法是使用隐式方法 [myCard setName:@"Jen"]; 因为它更安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:30:50.643

```
@"Jen" 
```

是一个常量 NSString——你可以像任何普通的 NSString 一样使用它。您的代码没有任何问题。

# java - 尝试在 RegEx 上匹配时发生异常

> ID：11729029
> 
> 赞同：0
> 
> 时间：2012-07-30T20:25:51.430
> 
> 标签：java, regex

我不是 RegEx 专家，只是想调试一些失败的 jUnit 代码。

因此，如果我是正确的，这就是我们要传递的内容：

```
##ALT=<ID=DEL:ME:ALU,Description="Deletion of ALU element"> 
```

这是 regex 将引发异常的代码行，但对 RegEx 没有深入的了解，所以我想知道您是否发现此表达式有问题？

```
pattern = Pattern.compile("((Description=\"[^\"]*\")>"); 
```

比你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:28:35.260

您的正则表达式打开 2`(`并仅关闭 1 `)`。那是不完整的。您必须在您的正则表达式中关闭一个组定义，它可能会因解析异常而失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:26:32.617

你可以试试：

```
pattern = Pattern.compile("((Description=\"[^\"]*\")>)"); 
```

在你的情况下，你可以使用这样的东西来匹配你的字符串：

```
Pattern pattern = Pattern.compile(".*(Description=\"[^\"]*\")>");
Matcher matcher = pattern.matcher("##ALT=<ID=DEL:ME:ALU,Description=\"Deletion of ALU element\">");
matcher.matches();
System.out.println(matcher.group(1)); 
```

这将打印出：`Description="Deletion of ALU element"`

# git - 如何有选择地将单个提交中的某些更改还原到单个文件？

> ID：11729030
> 
> 赞同：3
> 
> 时间：2012-07-30T20:26:01.187
> 
> 标签：git, revert

我的问题：我愚蠢地对文件进行了很多更改并一次全部提交。

从那以后，我意识到很多变化都是废话……但其中很多也很好。

如何有选择地还原某些更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:34:10.400

假设您此后没有提交任何其他内容，我将[撤消您的提交](https://stackoverflow.com/a/927386/1084754)， [添加您想要使用的文件的任何部分`git add -p`](https://stackoverflow.com/a/1085191/1084754)，然后重新提交。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T20:39:35.840

将较早的提交分解为部分是可行的`git rebase -i`，但它只能用于您可以重写其历史的分支。操作顺序是这样的：

```
git rebase -i <commit>~1 
```

`<commit>`您要拆分的提交在哪里。在交互模式下，更改`pick`为`edit`或`e`为您想要破坏的提交。然后关闭编辑器，让 rebase 继续。当`rebase`到达受影响的提交时，它会暂停，允许您在那时进行任何您想要的编辑。这包括诸如`git reset HEAD <file>`取消暂存`<file>`、`git reset HEAD`取消暂存所有内容以及`git checkout -- <file>`丢弃工作目录中的更改之类的事情。

从这里，您可以按您喜欢的任何顺序提交更改。我建议`git add -p`以交互方式添加补丁集，如果对同一文件的多次更改最好在多次提交上提交。

最后，当你在断裂的提交中提交了你想要的所有东西，并准备好让 rebase 继续时，只需发出`git rebase --continue`.

如果您想避免重写历史记录，[此答案](https://stackoverflow.com/a/4796144/877115)将向您展示如何使用`git revert --no-commit`仅还原部分提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-29T20:46:50.720

[![在此处输入图像描述](../Images/27d527d0a4923198f09c35b241281a90.png)](https://i.stack.imgur.com/aa66G.png)当您在一些 IDE（如 netbeans）中打开文件时，您可以实时看到所有更改，就像每行开头的颜色代码一样。右键单击其中一个颜色标记会显示之前的内容。右键单击的上下文菜单还允许您仅撤消对文件的那部分更改。因为您已经提交了更改，所以您可以`git reset soft HEAD^`在 netbeans 中执行然后打开文件，有选择地撤消更改，然后执行`git commit`.

有人知道如何在emacs中做到这一点吗？（这就是我看到这篇文章时正在寻找的东西。）

# c# - 如何让用户只登录一次？

> ID：11729033
> 
> 赞同：0
> 
> 时间：2012-07-30T20:26:16.867
> 
> 标签：c#, asp.net-membership

我们使用 ASP 会员数据库来管理我们的网站安全，每个网站对应一个会员角色。我创建了一个门户网站来列出这些项目网站的所有超链接（任何角色内的所有用户都可以登录到这个门户网站），在 webconfig 文件中，我列出了每个项目网站的所有角色：

```
<authorization>      
      <allow roles="Administrators,ProjectId1_Member,ProjectId10_Member,ProjectId11_Member,ProjectId12_Member,ProjectId13_Member,ProjectId14_Member,ProjectId15_Member,ProjectId16_Member,ProjectId17_Member,ProjectId18_Member,ProjectId19_Member,ProjectId2_Member,ProjectId21_Member,ProjectId22_Member,ProjectId23_Member,ProjectId24_Member,ProjectId25_Member, "/>
      <deny users="*"/>
 </authorization> 
```

但它适用于用户登录到门户网站。但如果用户单击超链接导航到特定项目网站，用户将再次导航到登录页面。有没有办法可以避免这种双重登录发生？

谢谢，

魏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:56:33.193

确保路径是 / 并启用跨路径重定向

```
 <authentication mode="Windows">
 <forms 
    name=".ASPXAUTH" 
    loginUrl="login.aspx" 
    defaultUrl="default.aspx" 
    protection="All" 
    timeout="30" 
    path="/" 
    requireSSL="false" 
    slidingExpiration="true" 
    cookieless="UseDeviceProfile" 
    domain="companySite" 
    enableCrossAppRedirects="true">
    <credentials passwordFormat="SHA1" />
 </forms>
 <passport redirectUrl="internal" />
 </authentication> 
```

# security - 单点登录/基于令牌的身份验证过程

> ID：11729036
> 
> 赞同：1
> 
> 时间：2012-07-30T20:26:25.307
> 
> 标签：security, authentication, token

我在论坛上搜索了一些资源：

*   [基于令牌的身份验证的安全性](https://stackoverflow.com/questions/4671928/security-of-token-based-authentication)
*   [基于令牌的身份验证是否安全](https://stackoverflow.com/questions/7836045/is-token-based-authentication-secure-when)
*   [实现令牌认证](https://stackoverflow.com/questions/4588866/implementing-a-token-authentication)

我正在思考关于实现单点登录/基于令牌的身份验证过程的想法。粗略地说，要求是：

*   用户网络应用程序/移动应用程序/移动网络等
*   系统一：用户信息和登录信息，生成token并提供一些服务（例如`getUserData`）
*   系统 2：控制用户特定数据的外部方
*   系统 3：又一个外部方，如系统 2
*   用户只需在系统 1 登录一次，即可与系统 2 和系统 3 通信

想想银行，或者像 Mint.com 这样的东西，在初始设置之后，用户可以通过 Mint 登录一次，然后可以访问您的银行（可能还有多个银行机构） - 从而通过一次登录访问不同的系统. 然而，就我而言，这不仅仅是 Mint.com 所做的只读访问。

我最初的想法大致是这样的：

```
User Sign In ----> System 1, login verification generate token for itself (call it token1)
System 1 ---> generate token and pass it to System 2 (call it token2)
System 1 ---> generate token and pass it to System 3 (call it token3)
System 1 ---> return [token1, token2, token3] 
```

从这里开始，用户（即应用程序或网站等）拥有 3 个可用于通信的令牌。如果用户需要从系统 1 执行操作/检索数据，它将与请求一起传入令牌 1，等等与系统 2 和系统 3

这种方法有意义吗？

这当然存在安全问题——如果代币在途中的某个地方被盗，现在拥有该代币的人可以在代币所用于的系统上执行操作——显然，这对银行系统之类的东西来说是不利的。

系统如何验证提供令牌的请求发送者实际上是为其生成令牌的合法用户？

一种想法是第二个身份验证级别，即。对于用户提出的每个请求，它都需要输入一个特殊代码（例如，您的银行卡 PIN 码）才能与请求中的令牌一起使用 - 但这不会让人讨厌吗？每个请求，用户都必须输入一个 PIN。

想法和评论将不胜感激。

**编辑：** 我已经看过 OAuth ... 据我了解，您需要实现一个 OAuth 提供程序来生成令牌并允许您将它与 OAuth 提供程序本身一起使用，换句话说，OAuth 提供程序是 System # 1 - 但我怎样才能让系统 2 和 3 也接受该 OAuth 令牌？或者我可能误解了 OAuth。

此外，即使使用 OAuth 可以按照我想要的方式工作（系统 1、系统 2、系统 3 等），问题仍然存在：如果外部恶意方获得了对该令牌的访问权怎么办？如何识别以确保使用令牌的人是授权方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:36:24.470

“这种方法有意义吗？”

如果你问如何在 StackOverflow 上发明健壮的身份验证方案，那么根据定义，你没有资格发明一个健壮的方案。事实上，我认为该领域的任何一位专家目前都没有能力这样做。

这是一个你无法重新发明的轮子。使用 OpenID/OAuth 或 Kerberos 或类似的东西，让专家团队分析它们的弱点，你和我都无法理解。

# jquery - 只执行一次函数

> ID：11729039
> 
> 赞同：1
> 
> 时间：2012-07-30T20:26:33.543
> 
> 标签：jquery

我有一个注册表单，访问者可以在其中注册，当他们按下提交按钮时，包含注册表单的 div 会稍微向左移动，以便它出现在中间。

这样做的代码工作正常，但是如果访问者在注册表中写错了，他们需要能够再试一次，但是注册表将再次移动，如果重复几次它将移出完全的容器。

如何只触发一次功能？这是我当前的代码：

```
...

$('#form form').submit(function(){

// Some code for showing "loading" image etc..

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T20:28:54.427

您可以使用[one()](http://api.jquery.com/one/)调用，

```
$('#form form').one('submit', function(){

// Some code for showing "loading" image etc..

}); 
```

然后它只会在第一次被解雇。

# python - Yapsy 通过 eclipse 与 cx_Freeze 可执行文件查找插件

> ID：11729043
> 
> 赞同：0
> 
> 时间：2012-07-30T20:26:58.660
> 
> 标签：python, cx-freeze

我正在开发一个使用[Yapsy](http://yapsy.sourceforge.net)作为插件系统后端的程序。用户可以编写自己的插件并在运行时加载它们。我有一个菜单，显示所有加载的插件，每个插件都是自己的菜单项。我还为程序提供了两个预制插件。通过eclipse运行程序时，这些预制插件加载良好（即菜单显示两个插件）；但是，在我使用 cx_Freeze 创建可执行文件后，由于某种原因，插件无法正确加载。只找到了第一个插件，这很奇怪，因为两个插件都位于同一个目录中，而且我的代码没有改变。我想知道Yapsy有什么问题吗？为什么它只会找到一个插件，

这是我获取预制插件的方式的示例：

```
default_dir = os.path.expanduser('~') + os.sep + "plugins"

if xml.get_plugin_directory() == "":
    directory = [default_dir] # no user specified directory
else:
    directory = [default_dir, xml.get_plugin_directory()] # user specified dir too

# Load the plugins from the specified plugin directory/s.
manager = PluginManager()
manager.setPluginPlaces(directory)
manager.setPluginInfoExtension('plugin')
manager.collectPlugins()

for plugin in manager.getAllPlugins():
    ... 
```

如您所见，我设置了默认目录（它总是应该被创建并且我已经测试过以确保），然后将插件位置设置到该目录或该目录和用户指定的目录通过`yapsy.PluginManager().setPluginPlaces(directory)`. 默认插件位置不在我的 Eclipse 工作区中；它位于其他地方。正如我之前所说，当通过 Eclipse 运行程序时，这可以正常工作，但是一旦我创建了一个可执行文件，就只能找到一个插件。我希望在没有找到插件的情况下出现错误，但奇怪的是确实找到了一个，而不是另一个。此外，如果我将更多测试插件文件添加到默认目录中，则会找到这些文件。就好像 Yapsy 完全跳过了第二个插件（仅在运行可执行文件时）。

任何想法为什么我可能会得到这种行为？

谢谢，亚当

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:46:09.880

您描述问题的方式似乎是 yapsy 无法加载您测试过的所有插件中的一个。

如果我不得不猜测，我会说不在 Eclipse 外部加载的插件有一个导入错误（Eclipse 中的导入路径可能不同，并且在 Eclipse 内部尝试时不会发生此导入错误）。

当然，这只是一个疯狂的猜测，为了更深入地调查，您可以通过 Yapsy 以相当标准的方式使用的 Python 日志记录模块显示更多调试信息。

要激活调试级信息，您可以使用以下代码：

```
import logging
logging.basicConfig(level=logging.DEBUG) 
```

如果问题仍未解决，您仍然可以使用精简版的插件和插件管理器代码向 Yapsy 的跟踪器提交错误。跟踪器位于： http: [//sourceforge.net/tracker/ ?group_id=208383](http://sourceforge.net/tracker/?group_id=208383)

# winapi - addmonitor win32 调用失败，出现 lasterror 5

> ID：11729044
> 
> 赞同：3
> 
> 时间：2012-07-30T20:27:03.233
> 
> 标签：winapi, device-driver, windows-7-x64, administrator, printers

我创建了一个非常小的 win32 控制台应用程序 (AddPrintMonitor.exe)，它只是调用 AddMonitor。这是一个小片段：

```
MONITOR_INFO_2 m_MonitorInfo2;
m_MonitorInfo2.pName = lpMonitorName;
TCHAR env[12] = TEXT("Windows x64");
m_MonitorInfo2.pEnvironment = env;
m_MonitorInfo2.pDLLName     = lpDllName;

if ( !AddMonitor(NULL, 2, (LPBYTE) &m_MonitorInfo2) )
{
    DWORD error = GetLastError();
    std::cout << "Last error = " << error << "\n";
    return PRINTER_ERR_API;
} 
```

当我作为管理员组的成员运行它时失败。GetLastError() 返回 5。当我以“管理员”身份运行它时，它成功且没有问题。我在 Windows 7 x64 上运行。我正在尝试安装 redmonnt.dll 并且我确实拥有该 dll 的 64 位版本。此任务是 PostScript 驱动程序更大安装的一部分。我只隔离了 AddMonitor 部分以消除其他外部问题。

错误 5 是访问冲突或安全问题。我的第一个问题是为什么管理员组的成员不能执行这个函数调用？在这种情况下，实际管理员和管理员组的成员之间有什么区别？

其他需要注意的细节。我正在为我的打印机安装使用 InstallShield 12（旧）（addmonitor 只是一部分）。我正在通过 win32 函数调用添加监视器、端口、驱动程序和打印机。在运行我的 AddPrinterMonitor.exe 之前，我确保 redmonnt.dll 确实存在于 system32 目录中。实际上，dll是否存在与我看到的错误没有区别。我确实看到了有关设置 SeLoadDriverPrivilege 的帖子。当我检查时，这对我来说是一个死胡同，管理员组可以加载/卸载设备驱动程序。

另外，我正在使用 win32 调用来完成这项工作。这在 Win2K、WinXP 和 Windows Server 2003 上有效（我的意思是所有这些都有效）没有任何问题。对于较新的操作系统，如 Windows 7，有几个困难。有没有更好的方法被我忽略了？我很沮丧试图让它工作，所以我开始质疑 Vista 和更高版本的方法。

更多初始化代码：

```
#define MONITOR_NAME            "My Redirected Port"
#define MONITOR_FILE            "redmonnt.dll" 
```

MONITOR_NAME 被传递给 lpMonitorName 并且 MONITOR_FILE 被传递给 lpDllName

谢谢

# r - 迭代列表中的数值向量

> ID：11729046
> 
> 赞同：1
> 
> 时间：2012-07-30T20:27:09.287
> 
> 标签：r

我有一个`NList`数字向量列表，例如

```
[[1]]
[1] 1959 9 4 62

[[2]]
[1] 2280  2  13

[[3]]
[1] 15 4  13

[[4]]
[1] 2902  178   13 
```

结构就像

```
list(c(1959, 13), c(2280, 178, 13), c(2612, 178, 13), c(2902, 
178, 13), c(2389, 178, 13), c(216, 736, 13), c(2337, 178, 13), 
    c(2639, 2126, 13), c(2924, 676, 178, 13), c(2416, 674, 178, 
    13), c(2223, 13), c(842, 178, 13), c(2618, 1570, 178, 13), 
    c(854, 178, 13), c(1847, 178, 13), c(2529, 178, 13), c(511, 
    178, 13), c(2221, 736, 13), c(415, 674, 178, 13), c(2438, 
    178, 13), c(2127, 178, 13), c(1910, 2126, 13), c(1904, 674, 
    178, 13), c(2310, 674, 178, 13), c(1732, 178, 13), c(1843, 
    178, 13), c(2539, 178, 13), c(1572, 676, 178, 13), c(1616, 
    876, 13).....) 
```

我想迭代这个列表中的数字向量，我想做一些事情：

```
 sum<- 0
  index<-1
  list1 <- apply(NList,1,function (i){
  #I want to get each of the numeric vector here
  row <- NList[i]

  #then I want to iterate the numeric vector for some calculation.
  #I am expecting, for [[1]], I get f(1959,9)+f(9,4)+f(4,62), in which f is my customized function, below I use a simple multiple as example
  for (j in (1:(length(row)-1)))
  {
    origin <- row[j]
    dest <- row[j+1]
    #a simple calculation example...I am expecting an array of sum which is the calculation result 
    sum[index] <- sum[index] + origin*dest
  }
  index <- index+1  

  }) 
```

但它不起作用并返回：

```
dim(X) must have a positive length 
```

lapply 对我不起作用并将总和返回为 0 ...

```
listR1 <- lapply(NList,function (i){
  row <- i
  for (j in 1:length(row))
  {origin <- row[j]
  dest <- row[j+1]
  sum[index] <- sum[index] + origin*dest
  }

  }) 
```

我错过了什么？我怎样才能做到这一点？
谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:58:11.290

我从您的 apply 语句中取出了该函数，以便更仔细地查看它。

```
 f=function(Row) 
    {
     Sum<- 0
      for (j in 1:(length(Row)-1)  )
      {
            Sum<- j + Row[j]*Row[j+1]
      }
     Sum    # returns the Sum
    } 
```

然后我可以将函数应用于每一行：

```
 list1 <- lapply(NList,f) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T21:03:08.933

好的，所以这段代码可以工作：

```
f=function(a,b) sum(a,b)

test.func=function (i){
  for (j in 1:(length(i)-1))
    ret.val[j]=f(i[j],i[j+1])  
  ret.val
}

# Use lapply for a list.
lapply(NList,test.func) 
```

或者你可以在一行中做到这一点：

```
lapply(NList,apply(seq_along(i)[-length(i)],function(x) f(i[x],i[x+1]))) 
```

# asp.net - Ajax.PageHandlerFactory 错误处理程序

> ID：11729050
> 
> 赞同：0
> 
> 时间：2012-07-30T20:27:35.363
> 
> 标签：asp.net, asp.net-ajax

`customErrors="remoteOnly"`尽管设置了代码，但我遇到了与代码相关的错误。当方法签名不匹配时，我可以绑定一个事件来捕获错误吗？我正在使用 MS AJAX 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:10:26.387

使用 Reflector 浏览 AJAX 库的代码，看起来这是设计使然。虽然它没有返回真正的 ASP.NET 错误，但它会将异常错误消息封装到响应流中返回的一些 JS 中。不幸的是，这种行为看起来是不可修改的。

# php - PHP 使用 json_decode() 读取无效的 json；

> ID：11729051
> 
> 赞同：2
> 
> 时间：2012-07-30T20:27:37.203
> 
> 标签：php, json

我有无效的外部 json 数据，名称周围没有双引号。

例子：

```
{
  data: [
    {
      idx: 0,
      id: "0",
      url: "http://247wallst.com/",
      a: [
        {
          t: "Title",
          u: "http://247wallst.com/2012/07/30/",
          sp: "About"
        }
      ],
      doc_id: "9386093612452939480"
    },
    {
      idx: 1,
      id: "-1"
    }
  ],
  results_per_page: 10,
  total_number_of_news: 76,
  news_per_month: [20, 0, 8, 1, 1, 2, 0, 2, 1, 0, 0, 1, 1, 0, 5, 1, 1, 1, 0, 2, 5, 16, 7, 1],
  result_start_num: 2,
  result_end_num: 2,
  result_total_articles: 76
} 
```

正如您看到的很多名称，如 data、idx、id、url 和其他名称都没有双引号，所以这使得这个 json 无效。如何使这个外部 json 有效？我已经尝试过 str_replace，将 '{' 替换为 '{"' 并将 ':' 替换为 '":' 在未加引号的名称周围添加双引号，但这会弄乱一些已经双引号的变量。

如何使这个 json 有效，以便我可以使用 PHP json_decode 读取这些数据？我对 preg_replace 不是很熟悉..

有效的 json 看起来像：

```
{
  "data": [
    {
      "idx": 0,
      "id": "0",
      "url": "http://247wallst.com/",
      "a": [
        {
          "t": "Title",
          "u": "http://247wallst.com/2012/07/30/",
          "sp": "About"
        }
      ],
      "doc_id": "9386093612452939480"
    },
    {
      "idx": 1,
      "id": "-1"
    }
  ],
  "results_per_page": 10,
  "total_number_of_news": 76,
  "news_per_month": [20, 0, 8, 1, 1, 2, 0, 2, 1, 0, 0, 1, 1, 0, 5, 1, 1, 1, 0, 2, 5, 16, 7, 1],
  "result_start_num": 2,
  "result_end_num": 2,
  "result_total_articles": 76
} 
```

请建议我一些 php preg_replace 函数。

数据来源： [http ://www.google.com/finance/company_news?q=aapl&output=json&start=1&num=1](http://www.google.com/finance/company_news?q=aapl&output=json&start=1&num=1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T20:43:57.680

与`preg_replace`您一起可以：

```
json_decode(preg_replace('#(?<pre>\{|\[|,)\s*(?<key>(?:\w|_)+)\s*:#im', '$1"$2":', $in)); 
```

由于上面的例子不适用于真实数据（战斗计划很少能在与敌人的第一次接触中幸存下来）这是我的第二个看法：

```
$infile = 'http://www.google.com/finance/company_news?q=aapl&output=json&start=1&num=1';

// first, get rid of the \x26 and other encoded bytes.
$in = preg_replace_callback('/\\\x([0-9A-F]{2})/i',
    function($match){
        return chr(intval($match[1], 16));
    }, file_get_contents($infile));

$out = $in;

// find key candidates
preg_match_all('#(?<=\{|\[|,)\s*(?<key>(?:\w|_)+?)\s*:#im', $in, $m, PREG_OFFSET_CAPTURE);

$replaces_so_far = 0;
// check each candidate if its in a quoted string or not
foreach ($m['key'] as $match) {
    $position = $match[1] + ($replaces_so_far * 2); // every time you expand one key, offsets need to be shifted with 2 (for the two " chars)
    $key = $match[0];
    $quotes_before = preg_match_all('/(?<!\\\)"/', substr($out, 0, $position), $m2);
    if ($quotes_before % 2) { // not even number of not-escaped quotes, we are in quotes, ignore candidate
        continue;
    }
    $out = substr_replace($out, '"'.$key.'"', $position, strlen($key));
    ++$replaces_so_far;
}

var_export(json_decode($out, true)); 
```

但是由于谷歌在 RSS 提要中提供了这些数据，如果它适用于您的用例，我建议您使用该数据，这只是为了好玩（-：

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T21:01:16.047

来自 Google 的 JSON 提要似乎总是受到问题的困扰——以某种形式或形式的格式不正确。如果您将提要切换为 RSS，您可以轻松地将其转换为数组或数组中的 JSON。

```
<?php

$contents = file_get_contents('http://www.google.com/finance/company_news?q=aapl&output=rss&start=1&num=1');

// Convert the RSS to an array (probably just use this)
$arr = simplexml_load_string($contents);

// Or if you specifically want JSON
$json = json_encode($arr);

// And back to an array
print_r(json_decode($json)); 
```

# php - apc的被动配置

> ID：11729053
> 
> 赞同：1
> 
> 时间：2012-07-30T20:27:46.267
> 
> 标签：php, apc

APC 在内存中保存一个 php 文件，并通过一个请求检查文件的最后修改以进行刷新。

是否可以禁用此检查以从不检查无文件，并手动刷新缓存（例如使用脚本）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:24:45.230

使用 apc.stat=0 选项来防止 APC 检查文件更改。您将在具有大量调用的小型脚本上获得高性能提升。

您必须重新启动 httpd 或调用[apc-clear-cache()](http://php.net/manual/en/function.apc-clear-cache.php)来重置缓存。如果您知道一种仅刷新一个页面的方法，请告诉我。

# php - 从 Windows 上的浏览 器在后台运行 PHP 进程

> ID：11729054
> 
> 赞同：0
> 
> 时间：2012-07-30T20:27:46.163
> 
> 标签：php

我很抱歉问这个问题，因为我知道以前在这里已经问过很多次了，但是我找到的所有答案都不适用于我的情况。要么我在做一些根本错误的事情，要么我正在尝试做一些不可能的事情。

我需要能够从通过 Web 浏览器访问的 PHP 文件（由在 Windows 上运行的 Apache Web 服务器提供服务）中分叉一个后台进程。我需要前台进程完成，因此浏览器停止等待服务器，而分叉进程在后台继续。我正在使用 PHP 5.3。

我尝试了许多建议的解决方案，但都失败了：

```
shell_exec('D:\php5.3\php.exe sleep.php > out 2>out2' ); 
```

无论是通过命令行运行，还是通过浏览器运行，前台进程都没有完成，直到后台完成。最后添加一个“&”似乎没有任何区别

```
pclose(popen("start D:\php5.3\php.exe sleep.php","r")); 
```

这个通过命令行运行良好，但是当通过浏览器访问时，它等待前台和后台进程完成。

```
exec("nohup D:/php5.3/php.exe -f sleep.php > out 2>out2"); 
```

这似乎根本不起作用

```
$commandString = "start /b D:/php5.3/php.exe d:\\webroot\\other\\tests\\sleep.php"; 
pclose(popen($commandString, 'r')); 
```

在命令行中工作，在浏览器中等待

```
$WshShell = new COM("WScript.Shell");
$oExec = $WshShell->Run("D:/php5.3/php-win.exe -f d:\\webroot\\other\\tests\\sleep.php", 0, false); 
```

根本不起作用 - 尝试分叉新进程时挂起。

任何人都可以帮忙吗？我错过了一些非常明显的东西吗？

我知道我可以将任务排队在数据库中并批量运行，但我需要它尽可能接近实时地运行，所以不想通过排队来引入更多延迟，然后我只能运行一次 max一分钟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T03:09:35.190

即使这篇文章已经过时，但可能对其他人有用，这对我有用，花了几个小时才找到解决方案！

```
function execInBack($phpscript, $args = array(), $logfile = '', $stdoutfile = '') {
if (count($args) == 0) {
    $args[] = md5(mt_rand());
}

$arg = '';

foreach ($args as $a) {
    $arg .= "\"$a\" ";
}

$cmd = "start /b c:\php\php5.3.10\php.exe ./$phpscript $arg";
$p = array();

$desc = array();
if ($logfile && $stdoutfile) {
    $desc = array(
        1 => array("file", $stdoutfile, "w"),
        2 => array("file", $logfile, "a")
    );
}

proc_close(proc_open($cmd, $desc, $p, getcwd())); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:37:38.527

您可以尝试 pcntl_fork 函数。这可以派生一个子进程（为网页服务），同时继续在后台完成其余的工作。然而，这是需要谨慎使用的东西。只需阅读 php.net 文档以了解使用此方法的一些复杂性。

# javascript - Javascript 和/或 jQuery 时间码格式

> ID：11729055
> 
> 赞同：2
> 
> 时间：2012-07-30T20:27:51.960
> 
> 标签：javascript, jquery, time, format

我有一个以秒为单位的时间码，精确到小数点后三位。（例如 10.675）我想将其格式化为读取 mm:ss（例如 00:32 或 23:04）。是否有 Javascript 或 jQuery 基础函数可以做到这一点？每当我搜索时，我只会找到如何向日期选择器添加时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:40:39.123

尝试以下方法：

```
function formateDate( seconds ) {
    var date = new Date(seconds * 1000);
    return date.getMinutes() + ":" + date.getSeconds();
} 
```

这将创建一个新日期，您可以在其中专注于时间方面。但是，如果您需要超过 24 小时，这将无法正常工作。为此，您需要比较两个日期。或者只是使用除法和模数手动进行计算。

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:44:49.883

我不相信 jQuery 默认对此有任何支持，但编写你自己的相当简单。例如：

```
function formatTime(seconds) {
    var mins = Math.floor(seconds/60),
        secs = Math.floor(seconds) - (60*mins);
    return (mins < 10 ? '0' + mins : mins) + ':' + (secs < 10 ? '0' + secs : secs);
} 
```

但是，如果时间码大于 60 分钟，这将无法正常工作，在这种情况下，您只需要添加小时数。

# ruby-on-rails - 如何使用 Capybara 和 RSpec 测试 CSS 选择器的值？

> ID：11729057
> 
> 赞同：8
> 
> 时间：2012-07-30T20:27:56.743
> 
> 标签：ruby-on-rails, rspec, tdd, capybara, bdd

HTML 页面应该具有以下代码：

```
<div class="user-image" style="background-image:url(/images/user_image.jpg)"> 
```

您将如何使用 Capybara 和 RSpec 进行检查？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-30T21:50:32.337

据推测，您正在尝试验证此 div 是否使用指定的背景图像。我可能会做这样的事情：

```
it "has a user image" do
  page.should have_selector('div.user-image')
end

it "displays the user image" do
  page.find('div.user-image')['style'].should == 'background-image:url(/images/user_image.jpg)'
end 
```

然而，RSpec 可能是适合这项工作的错误工具。考虑使用 Cucumber 进行这样的测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-05T09:56:22.333

Capybara 和 Selenium 允许在浏览器中运行 javascript 并返回结果

方法如下：

```
page.execute_script 'return $("div.user-image").css("background-image");' 
```

# objective-c - UICellView 的背景颜色变化

> ID：11729058
> 
> 赞同：0
> 
> 时间：2012-07-30T20:28:00.250
> 
> 标签：objective-c, uitableview, uicolor

我有一个充满单元格的表格，并通过执行以下操作更改了背景颜色：

```
 //set the backgorund color for the cells
    UIView *bg = [[UIView alloc] initWithFrame:cell.frame];
    bg.backgroundColor = [UIColor colorWithRed:0.5 green:0.3 blue:0.5 alpha:0.5];
    //bg.backgroundColor = [UIColor redColor];

    cell.backgroundView = bg;
    cell.textLabel.backgroundColor = bg.backgroundColor; 
```

* * *

问题是，当您将单元格滚动到视图之外，然后再回到视图中时，单元格的背景颜色会发生变化。

前： ![在此处输入图像描述](../Images/470a301d9ec5c2970571ee1128962029.png)

向上拖动菜单后，再向下拖动： ![在此处输入图像描述](../Images/8e6818eacbc6ee750c5bfa8f1befd23e.png)

* * *

我尝试自己进行一些故障排除，并意识到当我使用其中一种预定义时不会发生这种情况`UIColor`，例如`[UIColor redColor]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:08:26.053

看看[这里](https://stackoverflow.com/questions/5921300/uitableview-cell-background-color)。

设置 BackgroundColor 属性：

```
cell.backgroundColor = [UIColor greenColor]; 
```

在：

```
tableView:willDisplayCell:forRowAtIndexPath: 
```

# jakarta-ee - 在服务器端检索 JSON 数据

> ID：11729061
> 
> 赞同：0
> 
> 时间：2012-07-30T20:28:07.493
> 
> 标签：jakarta-ee, servlets, dojo, request

我有一个 Java EE servlet，我正在向其中提交一些 JSON 格式的信息。下面是我用来提交信息的 JS 代码。

```
 var params = {"key1":"value1","key2":"value2"};

            var xhrArgs = {
                url: "http://localhost:8080/servlet/testapp",
                postData: dojo.toJson(params),
                handleAs: "json",
                load: function(data) {
                    //Handle load 
                },
                error: function(error) {
    //handle error
                }
            };

            var deferred = dojo.rawXhrPost(xhrArgs); 
```

现在如何在服务器端检索帖子数据？当我尝试 `request.getParameter("params")`时，我应该得到 JSON 数据。你能告诉我如何实现这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:46:51.033

我应该使用

```
content:{"params":dojo.toJson(params)} 
```

检索服务器端的信息。

# deployment - 果园部分部署到生产

> ID：11729064
> 
> 赞同：1
> 
> 时间：2012-07-30T20:28:25.760
> 
> 标签：deployment, orchardcms, production-environment

我目前正在研究 Orchard CMS 以用于我的新项目。对于我使用的其他 CMS 系统，与新功能相关的信息有时会存储在数据库中（数据、配置、语言项）。将此功能部署到生产站点（已经使用它自己的数据库等运行）是使用在生产数据库中“安装”数据的软件包完成的。

这是如何使用 Orchard 完成的？还是所有功能都基于文件，当站点已经在生产环境中运行时，是否可以使用 XCopy 轻松部署？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:19:05.947

您可以使用导入/导出功能在 Orchard 实例之间传输数据和设置。

# php - 使用php获取不带扩展名的文件和文件名列表

> ID：11729069
> 
> 赞同：2
> 
> 时间：2012-07-30T20:28:36.727
> 
> 标签：php, file, list

我正在尝试制作一个 jQuery 滑块，它可以自动加载指定文件夹中的所有图像。所以我正在使用一个小的 PHP 脚本来列出该目录中的所有文件。对于滑块的标题，我想使用文件名（不带扩展名）。

我正在使用以下脚本，使用 PHP。它可以列出所有带有扩展名的文件，但我找不到在没有扩展名的情况下也显示文件名（用于标题）的方法。

任何人的想法？提前致谢！

```
 <? 
    $path = "img"; 
    $dir_handle = @opendir($path) or die("Unable to open $path"); 
    while ($file = readdir($dir_handle)) { 
    if($file == "." || $file == ".." || $file == "index.php" ) 
    continue; 
    echo "$file"; 
    } 
    closedir($dir_handle); 
    ?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T20:36:59.030

在这里你有更多的OO方式：

```
$iterator = new DirectoryIterator($directory);
    foreach ($iterator as $fileinfo) {
        if ($fileinfo->isFile()) {
            $fileinfo->getBasename('.' .$fileinfo->getExtension());
        }
    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-30T20:30:53.090

您可以使用以下命令获取不带扩展名的文件名[`pathinfo()`](http://php.net/pathinfo)：

```
$filename = pathinfo( $file, PATHINFO_FILENAME); 
```

# git - Git：停止 git 推送

> ID：11729077
> 
> 赞同：39
> 
> 时间：2012-07-30T20:29:10.720
> 
> 标签：git

我正在将一个大文件推送到 git，但连接速度很慢。终止此推送（中推）并在我有更好的连接时恢复它的最安全方法是什么？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-30T20:31:47.250

杀死客户端（`Ctrl+C`或任何其他方法）不会导致服务器上的数据损坏，如果这就是您所说的“安全”的话。在成功传输所有 blob 之前，服务器不会更新任何内容，然后它会更新 refs 以指向新的 blob。

但是，Git 没有任何工具可以恢复中断的传输，因此当您的连接速度更快时，您可能不得不再次传输大 blob。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-30T20:35:59.907

我相信`git push`是原子的，也就是说，如果你只是 Ctrl-C 退出操作，远程存储库将处于其原始状态，在推送之前。这也意味着，当您再次推送时，它将从头开始。但这听起来并不一定是你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-04T23:53:26.193

在 Git 2.30（2021 年第一季度）之前，被杀死的 " [`git push`](https://github.com/git/git/blob/adae5df5d22d97888987d6e070a91a7b04289c6f/Documentation/git-push.txt)" ^(( [man](https://git-scm.com/docs/git-push) ))可能会留下一个 pack-objects 进程，仍在计算以找到一个好的压缩，浪费周期。

这已得到纠正，并说明杀死正在进行的推送是多么安全。

请参阅[Jeff King ( ) 的](https://github.com/peff)[提交 8b59935](https://github.com/git/git/commit/8b59935114d9dafd737a7674ccf3787e7ffc61c9)（2020 年 11 月 20 日[）](https://github.com/peff)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([adae5df 提交中](https://github.com/git/git/commit/adae5df5d22d97888987d6e070a91a7b04289c6f))^(，2020 年 12 月 3 日）)[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

> ## [`send-pack`](https://github.com/git/git/commit/8b59935114d9dafd737a7674ccf3787e7ffc61c9): 在信号或退出时杀死 pack-objects 助手
> 
> ^(签字人：杰夫·金)

> 我们生成一个外部打包对象进程来实际将对象发送到远程端。
> 如果我们在这个过程中被信号杀死，pack-objects 会继续运行并完成推送，这可能会让用户感到惊讶。
> 
> 我们下去的时候应该把它拿下来。

# python - 用python将视频分成帧

> ID：11729081
> 
> 赞同：3
> 
> 时间：2012-07-30T20:29:22.110
> 
> 标签：python, ffmpeg, wxpython, video-processing, audio-processing

我正在尝试编写一个程序来删除其中没有特定符号的视频帧。我的总体计划：

1.  从视频中分割音频
2.  将视频分割成帧
3.  通过一个查找符号的子程序运行帧，检查应该是正确颜色的像素，并记录那些不正确的像素。
4.  删除那些帧和相应的音频秒
5.  将它们重新拼接在一起。

我需要一些帮助来寻找可以做到这一点的库。我想知道是否`wxpython`可以检测像素颜色。我不知道哪个库可以分割音频和视频，哪个库可以编辑音频。我知道 ffmpeg 可以将视频分割成帧，但经过两天的工作，我仍然无法为 python 2.7 安装它，所以我需要一种安装方法或不同的库来安装它。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:04:50.500

wxPython主要用于桌面GUI开发。我会查看 pyAudio 的音频位或可能是以下之一：

*   [http://xoomer.virgilio.it/sam_psy/psych/sound_proc/sound_proc_python.html](http://xoomer.virgilio.it/sam_psy/psych/sound_proc/sound_proc_python.html)
*   [https://github.com/Rudd-O/python-audioprocessing/](https://github.com/Rudd-O/python-audioprocessing/)
*   [http://code.google.com/p/pyo/](http://code.google.com/p/pyo/)

您也许可以对视频使用 Mplayer 包装器之一：

*   [http://pypi.python.org/pypi/MplayerCtrl/](http://pypi.python.org/pypi/MplayerCtrl/)
*   [http://code.google.com/p/python-mplayer/](http://code.google.com/p/python-mplayer/)

或者查看 Sergey 提到的 OpenCV 项目：

*   [http://opencv.willowgarage.com/documentation/python/index.html](http://opencv.willowgarage.com/documentation/python/index.html)

# eclipse - Eclipse：“'定期工作区保存。' 遇到了问题。”

> ID：11729085
> 
> 赞同：66
> 
> 时间：2012-07-30T20:29:36.087
> 
> 标签：eclipse

我在 Mac 10.7.4 上使用 Eclipse Indigo。工作时，我会定期收到这些烦人的对话

```
'Periodic workspace save.' has encountered a problem.

Could not write metadata for '/.org.eclipse.jdt.core.external.folders'.
/Users/davea/Dropbox/workspace/.metadata/.plugins/org.eclipse.core.resources/.projects/.org.eclipse.jdt.core.external.folders/.markers.snap (No such file or directory) 
```

我似乎能够正常继续，但我想知道如何消除这些错误。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2014-01-09T12:30:11.783

我有同样的问题。

> '定期工作区保存。' 遇到了问题。无法为“/外部文件”写入元数据。D:\java\fuentes\.metadata\.plugins\org.eclipse.core.resources\.projects\External Files\.markers.snap（El sistema no puede hallar la ruta especificada）

我创建了“外部文件”文件夹，它运行良好。几分钟后，文件“.markers.snap”和“.syncinfo.snap”出现在此文件夹中，消息不再出现。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-20T17:30:39.017

我通过关闭 eclipse 并删除工作区文件夹中的整个 .metadata 文件夹来修复我的问题。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-10-04T12:17:23.380

今天，每当我退出日食时，我一直面临同样的问题。在尝试 TS.xy 提供的上述解决方案时，以下步骤暂时解决了这个问题。

1.  切换到新工作区并关闭 Eclipse。
2.  使用新工作区打开 Eclipse，然后切换到实际工作区（发生异常）。
3.  实际工作区加载了我以前的所有项目。
4.  现在退出 Eclipse，不会导致该异常。

希望这一步可能对某人有用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-11T14:15:31.203

仅对于另一个数据点，以上都没有帮助我的情况。我最终解决这个问题的方法是，每次 Eclipse 抱怨某个文件夹不存在时，我都会在硬盘驱动器上创建该文件夹。例如，在我看到之后

```
Could not write metadata for '/servers'.
C:\...\.metadata\.plugins\org.eclipse.core.resources\.projects\servers\.markers.snap (The system cannot find the path specified.) 
```

我创建了“服务器”文件夹（不是里面的文件）。这让我进入下一个错误。在问题消失之前，我经历了 3-4 次迭代（每次都退出 Eclipse 以强制保存）。

HTH，马克

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-06-16T16:13:06.813

使用 Ubuntu，遇到了同样的问题，我注意到 ~/workspace/.metadata/.plugins/ ...etc... 中某些目录的所有者已将所有者更改为我，并且错误停止发生。

看起来同一种问题可能是由多种原因引起的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-04-08T21:49:03.963

这对我来说很简单 -

**解决方案**

1.  （pre）列出的目录不存在，见图片
2.  运行 Eclipse，看到下图中显示的错误。关闭日食
3.  创建它正在查找的目录 ( *RemoteSystemsTempFiles )*

    *   注意：忽略此文件夹中的项目（例如 .markers），它们是自动生成的
4.  重启Eclipse，问题解决！

**示例问题消息**

[![在此处输入图像描述](../Images/f55f826a59bd783f8fc280952379b6d2.png)](https://i.stack.imgur.com/G8tDf.png)

不知道为什么这花了我这么长时间才解决，但现在很容易，回想起来也很明显！;)...

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-07-06T05:54:11.840

关闭 Eclipse ，完全清除 .metadata 文件夹。如果您的项目引用被删除，请启动 Eclipse 并再次导入必要的项目。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-08-25T00:27:46.367

对我有用的解决方案如下：

1.  删除 .metadata 文件夹
2.  重启日食

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-04-26T19:22:16.053

I encountered the same problem , my resolution was to rename the the folder name under the workspace folder. i.e. `com.ibm.collaboration.realtime.alertmanager.embedded` was renamed to `com.ibm.collaboration.realtime.alertmanager.2embeddedxx` and rebuilt my project.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-08-01T05:43:21.243

通过在本地文件夹上设置工作区，并从现有资源中设置导入项目的数据来解决它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-12-10T07:32:58.197

从昨天开始我就有同样的问题。昨天，我通过创建一个新工作区并重新导入项目来修复它。它似乎运作良好，但今天又开始了。

所以，今天我手动创建了文件夹和文件，并授予了完整权限 -rwxrwxrwx。

好像又可以上班了……

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-07-31T23:42:22.113

就我而言，因为我不小心删除了我的工作区文件夹，并且我观察到“定期工作区保存遇到问题”。为了解决这个问题，我只需创建一个新工作区并将我的所有项目加载到新工作区。希望你可以通过做同样的事情来解决你的问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-04-04T18:47:17.500

我也遇到了这个问题。我的情况有点不同。我在 Eclipse 中使用“工作集”对我的项目进行分组。我所做的是尝试删除一个项目并在删除时收到错误。忽略错误，我从工作集中删除了该项目，因此我什至没有看到该项目。当我收到我的错误时，我并没有考虑用“项目”来查看我的包浏览器，而不是工作集，作为我的顶视图。切换到项目的顶级视图后，我发现该项目被删除了一半，并且能够从我的工作区和硬盘驱动器中删除其内容。

从那以后我就没有这个错误了。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-05-15T02:30:30.857

今天他们将我们的防病毒软件切换到卡巴斯基后，我遇到了这个问题。
就我而言，平台是 Windows 7。我的工作区存储在映射的网络驱动器上。奇怪的是，尽管这似乎是一个权限问题，但我可以在与不可访问文件相同的级别操作文件和文件夹而不会发生意外。到目前为止，仅有的两种解决方法是将工作区移动到本地驱动器或卸载卡巴斯基。在没有防火墙功能的情况下删除并重新安装卡巴斯基并没有成功。

如果以及当我们找到更合适的解决方案时，我将更新此答案，尽管我希望这将涉及调整防病毒软件，而不是 Eclipse。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-10-31T21:42:39.803

当我的磁盘空间不足时，我对删除项目区域中的一些目录有点过于激进，并删除了这个目录。如果 Eclipse 在您的工作区目录中崩溃，它可能会留下一些巨大的核心文件（我有 35 个），所以偶尔在您的工作区中查看一下是值得的。

无论如何，根据问题，我尝试了“创建目录”方法。它奏效了。

顺便说一句，当我关闭 Eclipse 时，我也看到了这个错误，不仅仅是在“定期保存”之后。所以退出/重启也是其中的一部分。

请注意，错误消息中指定的目录路径上的最后一项是文件——不是目录，所以不要在这里混淆。可能值得检查目录权限是否也正确创建（我认为工作空间中的其他项目）。

显然这是 Eclipse 代码库中的一个错误（在正在创建的文件下创建完整的目录路径），但如果我没有首先删除它，我一开始就不会导致它。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-03-16T07:06:42.117

关闭 Eclipse。在 Workspace 中打开 RemoteSystemsTempFiles 文件夹，并清除该文件夹中的内容。再次打开eclipse并关闭，警告.project。按确定，然后打开 Eclipse。解决了我的问题。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-08-09T06:10:24.730

同意@ ***J-Dizzle***，

我是网络开发的初学者，今天很难解决这个问题。我在 STS 中创建 SpringBoot 项目时遇到了类似的问题。尝试了提到的大多数解决方案，但没有奏效。尝试删除`.metadata`文件夹并重新构建我的 springboot 项目，但仍然没有任何效果。

> 注意：我在 STS 中有多个工作区，并且在将项目从一个工作区迁移到另一个工作区后发生此错误。

**解决方案**：您需要做的就是重新启动 eclipse/STS IDE，它会正常工作。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-08-17T02:55:28.767

退出 eclipse 后，会有特定的失败原因。我的是**磁盘已满**，因此日食无法再写入它。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-07-18T04:48:17.813

我解决了切换工作区的问题。

1.  转到文件（切换工作区）
2.  选择目标并创建一个名为 Workspace 的文件夹
3.  运行 Hello World 并关闭 Eclipse（注意 Eclipse 会自动创建文件夹 RemoteSystemsTempFiles）
4.  现在将所有项目复制到新文件夹 Workspace
5.  打开 Eclipse 并在必要时（有时 Eclipse 不显示项目）导入所有项目（从文件系统转到文件/打开项目）

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-04-14T09:41:15.443

就我而言，我存储工作区的驱动器已满，下载 SDK 更新已满，我只需要清除一些空间。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-05-05T12:28:48.963

这发生在我身上，因为我删除了工作区中 .metadata 文件夹中的一个资源文件。

尝试所有方法后，删除工作区中的 .metadata 文件夹有效。

事实上，当有很多与 eclipse 错误相关的问题时，这个 nuke 选项似乎可以工作。一个这样的例子是工作集。工作集非常有问题（但很有用），我的大部分日食问题都是从那里开始的。

希望这可以帮助某人。

# php - 是否可以通过 cpanel 配置和 php 脚本来防止 DDos 攻击？

> ID：11729092
> 
> 赞同：5
> 
> 时间：2012-07-30T20:29:54.050
> 
> 标签：php, security, cpanel, ddos

我的网站受到 DDos 攻击（UDP 泛滥）！

我无法访问 linux shell，只有 cpanel 可供我使用！:(

是否可以通过 php 脚本来防止这种攻击？

有没有办法配置 cpanel 以减少或重定向攻击？如何？

根据虚拟主机服务台：攻击在 6 到 10 Gbit/s 之间！！！

下面的代码有用吗？

```
 <?PHP 

 if (!isset($_SESSION)) { session_start(); }
 // anti flood protection 
 IF($_SESSION['last_session_request'] > time() - 2){ 
 // users will be redirected to this page if it makes requests faster than 2 seconds 
  header("Location: /flood.html");
 exit; } 
 $_SESSION['last_session_request'] = time(); 

 ?> 
```

硬件防火墙太贵了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T06:00:54.087

首先，如果您受到攻击，通过会话进行保护是无效的。

其次，如果你在php下实现了反dos方法，你就是在添加进程，DOS攻击永远有效。

Web 服务器侦听 TCP 协议，udp 攻击是针对服务器的，而不是您的站点，防止攻击发生在服务器端，也就是您的托管服务提供商。

对不起我的英语

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T08:41:40.570

您将希望在 easy apache 的详尽选项中启用 mod_qos

您还需要安装 ConfigServer 防火墙。该软件可以帮助检测并阻止 Dos 攻击。下方链接。

[http://configserver.com/cp/csf.html](http://configserver.com/cp/csf.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T15:10:33.133

禁止 IP 不会阻止 SYN 泛滥，也不会对僵尸网络 DDoS 有效。DDoS 也没有真正的代码解决方案，甚至防火墙也只能做到这一点。

话虽如此，我得到了 2 个建议：

1.) 如果您正在寻找防火墙保护，而硬件防火墙超出了您的价格范围，请知道有基于云的 WAF 解决方案，价格低于 60 美元/月。我为 Incapsula 工作，我们公司实际上为所有 Bussines 计划客户提供了完全配置和可定制的[符合 PCI DDS 的 Cloud WAF](http://www.incapsula.com/tour/web-application-firewall)，作为安全功能之一。目前，我们是唯一一家提供符合 PCI DDS 的版本，但是 - 如果 PCI 合规性不是问题 - 您还可以考虑其他解决方案。

2.) 对于 100% DDoS 保护，您必须有足够大的“管道”，因为即使是上述 WAF 也无法提供全面的过滤解决方案。为此，您将需要使用[反向代理](http://en.wikipedia.org/wiki/Reverse_proxy)来为您提供处理 DDoS 攻击所需的“肌肉”和灵活性（通过平衡和通缩）。

我还想向您指出 security.stackexchange.com 中关于 IP 阻塞作为 DDoS 缓解手段的讨论： [https ://security.stackexchange.com/questions/17632/iptables-ddos-protection-working-with -per-client-ip-address-counter-and-udp/17634#17634](https://security.stackexchange.com/questions/17632/iptables-ddos-protection-working-with-per-client-ip-address-counter-and-udp/17634#17634)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T20:33:52.833

您应该制作某种黑洞页面，该页面会自动禁止在您的服务器上发出请求的 IP 地址。

[此外，您可以使用 cPanel 的IP Deny Manager](http://docs.cpanel.net/twiki/bin/view/11_30/CpanelDocs/IPDenyManager)手动禁止 IP 地址（单个或范围）

编辑：

此外，考虑到您没有对服务器的 shell 访问权限，我会立即联系您的主机以获得进一步的帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T20:33:20.010

您无法使用 PHP 保护服务器免受 DDoS 攻击。您提供的代码只是阻止人们每两秒多次请求**该页面。**

如果您无权访问 shell，那么其他人可以访问。需要有人来解决问题，而不是你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T20:34:13.670

PHP-Scripting 对 UDP-Flooding 毫无帮助。唯一有帮助的是使用例如 iptables 丢弃任何计划外的 UDP 流量。尽管如此，10GBit/s 还是太多了。

# vba - 格式化单元格中的值，并将格式化的值发送到 Powerpoint

> ID：11729094
> 
> 赞同：0
> 
> 时间：2012-07-30T20:30:13.233
> 
> 标签：vba, excel, powerpoint

我有这段代码，它将多个工作簿聚合到一个预览文件中，其中所有数据都清楚地排列在表格和图表中。然后将这些表格和图表粘贴到 PowerPoint 演示文稿中。

将表格中的值复制到 PowerPoint 幻灯片时，我在获取正确的格式时遇到问题。其中一个源工作表输出 847389.240398230423 之类的值，当您尝试将其放入 PowerPoint 时，您会得到一个占用太多行的值，看起来像 2.240398230423E-02。这种格式在任何会议上都不好看。

我编写了一些代码，这些代码将在预览工作簿中的值时编辑代码

```
Sheets("Output").Select

'Select1
Range("C10:H15").Select
    Selection.NumberFormat = "0.000"

'Select2
Range("C17:H17").Select
    Selection.NumberFormat = "0.000"

'Select3
Range("C18:H19").Select
    Selection.NumberFormat = "0.00"

'Select4
Range("C20:H21").Select
    Selection.NumberFormat = "0.00" 
```

此代码非常适合我需要的数据并显示为 0.487，但单元格中的实际值类似于 0.487682742490，我认为这就是代码在更新 PowerPoint 演示文稿时所识别的内容。

有没有一种方法可以编写一些代码，只取小数点后的前 2 或 3 位数字而忽略其他不重要的数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:33:43.883

有几种方法可以实现这一点。一种方法是强制格式化/可见数据作为实际值。

例如，假设 cell`A1`包含 value `1.234`。使用此代码：

```
ActiveSheet.Range("A1").NumberFormat = "0.0"
ActiveSheet.Range("A2").Value = ActiveSheet.Range("A1").Value
ActiveSheet.Range("A3").Value = ActiveSheet.Range("A1").Text 
```

结果是这样的：

*   单元格`A1`包含值`1.234`，但显示为`1.2`
*   单元格`A2`包含值`1.234`，并显示为`1.234`
*   单元格`A3`包含值`1.2`，并显示为`1.2`

单元格的`.Text`属性本质上就是您在单元格中*看到*的内容。以这种方式转换值后，转移到 PP 应该会按预期工作。

* * *

或者（虽然不是首选，因为它使用起来有点麻烦并且需要字符串，而不是仅仅坚持值）你可以使用这样的东西：

```
Dim s As String
Dim dec As Integer

dec = 2
s = CStr(ActiveSheet.Range("A1").Value)
ActiveSheet.Range("A3").Value = CDbl(Left(s, InStr(s, ".")) & Left(Right(s, Len(s) - InStr(s, ".")), dec)) 
```

在上面，您可以通过增加 的值来扩展小数位数`dec`。但是，如果不进行进一步修改，`1.000`将显示为`1`（删除可能重要的 0）。

如果您使用此方法，您可以保留一个数值（使用`CDbl()`），或者如果您不需要执行任何算术运算（即只需放入 PP），则将其保留为字符串。

# ios - 尝试从新视图返回时标签栏消失

> ID：11729095
> 
> 赞同：1
> 
> 时间：2012-07-30T20:30:16.883
> 
> 标签：ios, uitabbarcontroller, uistoryboard

我对 Xcode 非常陌生，并且在我的应用程序中遇到了问题。我正在尝试创建一个标签栏应用程序。在其中一个选项卡上，我有一个按钮，可将用户带到不同的 ViewController。我想拥有它，以便用户可以选择一个按钮，将他们返回到具有该按钮的选项卡。我尝试设置从按钮到上一个视图（选项卡式屏幕）的操作，但是选项卡栏消失了。我希望这是有道理的。

这是屏幕截图的链接... ![在此处输入图像描述](../Images/9cd609289db011399b0d8620a74427cb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:47:51.323

最简单的方法是将 UINavigationController 作为 TabBarController 的根视图控制器。您可以通过简单地 ctrl+从标签栏控制器拖动到导航控制器并将其添加为关系来在情节提要中执行此操作。

这是使用故事板的示例： ![在此处输入图像描述](../Images/1b02e77abadcc3624d74c2f21845bda0.png)

下一步是将第三个控制器（在本例中为表格视图控制器）设置为您的播放器视图控制器类。

然后，您可以使用导航控制器附带的默认后退按钮和动画。如果您喜欢隐藏屏幕顶部的导航栏，那么您可以使用自定义的后退按钮来调用

```
[self.navigationController popViewControllerAnimated:YES]; 
```

您还可以选择自定义动画/转场等，但使用导航控制器帮助您导航屏幕可能是最简单的方法。

# java - 使用 LWJGL 进行文本输入

> ID：11729097
> 
> 赞同：0
> 
> 时间：2012-07-30T20:30:23.520
> 
> 标签：java, text, lwjgl, textinput

我正在寻找一种通过 LWJGL 接收文本输入的解决方案。我不是指 LWJGL 提供的那种标准键盘事件输入，我正在寻找接收实际文本输入行的能力，就像 AWT/Swing 提供的 TextFields 一样。我这样做主要是为了学习，因此，我对使用 LWJGL 之外的库（例如 TWL）没有兴趣。

目前，我有这样的事情：

```
 private boolean shift = false;
    private void chatControls(float ticksPassed) {
        while (Keyboard.next()) {
            if (Keyboard.isKeyDown(Keyboard.KEY_RETURN)) {
                this.ui.toggleChat();
            } else if (Keyboard.isKeyDown(Keyboard.KEY_DELETE)) {
                this.chatText = "";
            } else if (Keyboard.isKeyDown(Keyboard.KEY_BACK) && Keyboard.getEventKeyState()) {
                try {
                    this.chatText = this.chatText.substring(0, chatText.length() - 1);
                } catch (StringIndexOutOfBoundsException e) {}
            } else if (Keyboard.isKeyDown(Keyboard.KEY_LSHIFT) || Keyboard.isKeyDown(Keyboard.KEY_RSHIFT)) {
                shift = Keyboard.getEventKeyState();
            } else if (Keyboard.getEventKeyState() && !jtLetter) {
                if (shift) {
                    this.chatText += Character.toUpperCase(Keyboard.getEventCharacter());
                } else {
                    this.chatText += String.valueOf(Keyboard.getEventCharacter());
                    jtLetter = true;
                }
            } else {
                jtLetter = false;
            }
            this.ui.updateChat(chatText);
        }
    } 
```

但是，它无法正确处理移位，也无法正确处理上述任何其他特殊命令。那么，最好的做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T17:55:04.237

看一下[NiftyGUI](https://github.com/void256/nifty-gui)源代码的[这个文件](https://github.com/void256/nifty-gui/blob/1.3/nifty-renderer-lwjgl/src/main/java/de/lessvoid/nifty/renderer/lwjgl/input/LwjglKeyboardInputEventCreator.java)，它应该包含这个文本处理代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-23T19:59:13.713

只需删除您的轮班处理行并添加：

```
if(Keyboard.isKeyDown(Keyboard.KEY_LSHIFT) && !Keyboard.isKeyDown(Keyboard.KEY_RSHIFT))
        shift=true; 
```

在 While 循环开始之前。

# c# - Linqs 是 ".Distinct()"ly 模糊不清

> ID：11729103
> 
> 赞同：0
> 
> 时间：2012-07-30T20:30:47.887
> 
> 标签：c#, linq, collections, filter, abstraction

```
using System.Linq;

var a = new byte?[][,]{
    new byte?[,]{{1}},
    new byte?[,]{{1}},
    new byte?[,]{{2}},
    new byte?[,]{{1, 2, 3}, {4, 5, 6}}};
a = a.Distinct().ToArray(); 
```

但是“a”仍然包含重复项。我这样做正确吗？

* * *

谢谢。从答案中的信息。

```
class Nullable_Byte_2D_Array_EqualityComparer : IEqualityComparer<byte?[,]>
{
    public bool Equals(byte?[,] a, byte?[,] b)
    {
        var r = a.GetLength(0) == b.GetLength(0) &&
            a.GetLength(1) == b.GetLength(1);
        if (r)
        {
            var v = new byte?[a.Length];
            byte n = 0;
            foreach (byte? c in a)
            {
                v[n] = c;
                n++;
            }
            n = 0;
            foreach (byte? c in b)
            {
                if (c != v[n])
                    r = false;
                n++;
            }
        }
        return r;
    }
} 
```

和

```
a = a.Distinct(new Nullable_Byte_2D_Array_EqualityComparer()).ToArray(); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-30T20:34:29.303

它不包含重复项。它包含两个不同的数组，其中恰好具有相同的值。由于数组是引用类型，`Distinct()`默认进行引用比较；要更改此行为，请使用[此覆盖](http://msdn.microsoft.com/en-us/library/bb338049.aspx)来指定您自己的比较器。

# dojo - 将文本框值传递给 dojo 网格的查询参数

> ID：11729105
> 
> 赞同：0
> 
> 时间：2012-07-30T20:30:51.237
> 
> 标签：dojo, dojox.grid.datagrid

我正在尝试将文本框中的值作为 dojo 数据网格中的查询参数传递，并希望澄清下面列出的两个问题。dojo 网格使用查询参数启动对服务器的调用以启动搜索并返回结果（显示在数据网格上）

1.  是否可以通过调用刷新 (dijit.byId("mygrid").refresh

2.  如果是，我如何将文本框的值作为查询参数传递给数据网格。

下面列出的是我的相关代码

```
 function reload(){
        dijit.byId("mygrid").refresh;
    }

     <div class="test"> 
            <input id="searchParam" >
            <button dojoType="dijit.form.Button" type="submit" onclick=reload()>
                Search
            </button> 

        </div>

    <div    dojoType="dojox.grid.DataGrid"
                                id="mygrid" 
                                jsid="mygrid"
                                      store="dojox.data.JsonRestStore"
     target="<c:url value='members' />">
                                query="{ 
                                searchCriteria: ? TODO How to pass value of text box here?,

                                }"
                                rowsPerPage="1000"
                                autoWidth="true"

                                autoHeight="true"
                                selectionMode="single"
                                selectable="true"
                                errorMessage="Error loading data"
                                noDataMessage="<span class='dojoxGridNoData'>No members found.</span>">
                </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:21:29.530

您应该能够执行以下操作：

```
function reload() {
    var val = dojo.byId('searchParam').attr('value');
    dijit.byId("mygrid").setQuery({ propName: val });
} 
```

您将需要正确构建查询`{ propName: val }`。

# android - 适用于 Android 的视频播放器选项

> ID：11729110
> 
> 赞同：0
> 
> 时间：2012-07-30T20:31:04.137
> 
> 标签：android

Android 有一个内置的 VideoPlayer，这似乎是 goto 选项，但只是想知道是否有更好的 Android 开源视频播放器？这是用于在商业无根 android 平板电脑中播放视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:32:50.000

[http://code.google.com/p/dolphin-player/](http://code.google.com/p/dolphin-player/)

# c# - 无法从“对象”转换为“十进制”

> ID：11729117
> 
> 赞同：2
> 
> 时间：2012-07-30T20:31:20.150
> 
> 标签：c#, types

基本上我有一个清单：

```
 List<Decimal> SortOrders = new List<Decimal>(); 
```

和一个数据行。我想比较列表是否包含来自控件的项目。但我有一个例外，

> 无法从“对象”转换为“十进制”

```
DataRow dr = dataSetSomething.Tables[0].NewRow();
...
dr["SortOrder"] = Convert.ToDecimal(numericOrder.Value);// works fine here
if (SortOrders.Contains(dr["SortOrder"]))// exception here, Why?
{
} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:34:02.107

因为类型`dr["SortOrder"]`是`object`，即使你把 a`decimal`放在那里。如果你知道它实际上是一个小数，你可以转换它：

```
if (SortOrders.Contains((decimal)dr["SortOrder"])) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T20:34:12.170

的类型`dr["SortOrder"]`是`Object`。

.NET*中*的任何类型都是对象（因为所有类型都`Object`直接或通过继承链继承自 ），因此将 a 分配`decimal`给 an`object`很好。

反之则不然 - 并非所有`object`s 都是`decimal`。

您需要*强制转换*以获得预期的行为：

```
 if (SortOrders.Contains((decimal)dr["SortOrder"])) 
```

（如果基础类型不是 a ，则会抛出异常`decimal`）。

# python - Python 读取特定的文本行

> ID：11729120
> 
> 赞同：0
> 
> 时间：2012-07-30T20:31:41.623
> 
> 标签：python, text, readlines

我在阅读特定行时遇到问题。它类似于此处回答的问题： [python - 从特定文本行读取文件和向特定文本行读取文件](https://stackoverflow.com/questions/7559397/python-read-file-from-and-to-specific-lines-of-text) 区别，我没有固定的结束标记。让我举个例子：

```
--------------------------------
\n
***** SOMETHING *****     # i use this as my start
\n
--------------------------------
\n
data of interest
data of interest
data of interest
\n
----------------------- #this will either be dashes, or EOF
***** SOMETHING *****
----------------------- 
```

我尝试做与上述链接类似的事情，但我无法创建 if 语句来中断循环，因为我不知道它是否会是 EOF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:37:08.400

这个怎么样：

```
def getBlocks(filepath):
    with open(filepath) as f:
        blocks = []
        go = False
        for line in f:
            if line.strip() == startDelimiter:
                block = ''
                go = True
            if go:
                block += line
            if line.strip() == endDelimiter:
                blocks.append(block)
                block = ''
                go = False
        if block:
            blocks.append(block)
    return blocks 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:48:03.660

美妙之处在于，如果您点击 EOF，文件将停止迭代。

```
ended = False
for line in f:
    ended = line == MY_END_MARKER 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T20:54:25.637

你不能就这样吗

```
parts = my_file.read().split("-----------------------")
print parts 
```

# ios - ios 我想从 AppDelegate 访问 MainViewController 中的一个对象

> ID：11729129
> 
> 赞同：0
> 
> 时间：2012-07-30T20:32:22.677
> 
> 标签：ios, uitableview, delegates, uisearchbar

我使用了示例项目 AppPrefs 中的这一行：

```
UITableView *tableView = ((UITableViewController *)self.navController.visibleViewController).tableView; 
```

它当然完美无缺，

所以我尝试了：

```
UISearchBar *searchBar = (UIViewController *)mySearchBar; 
```

但我收到`mySearchBar`未声明的警告，即使它是一个属性并在 MainViewController（属于 UIViewController 类）中初始化。

我需要从 AppDelegate 访问 MainViewController 中的各种对象，因此应用程序可以在设置更改时自行刷新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:40:41.680

哎呀，您的代码在尽可能多的地方都是错误的。让我解释一下：

一。您正在转换`mySearchBar`，`UIViewController *`然后将其分配给不同的指针类型（类型`UISearchBar *`）。

二。如果您是从应用程序委托中编写的，编译器怎么会知道您使用的是哪个类（更进一步，哪个对象的）属性？可能有多个对象/类具有相同名称的属性。

我觉得你对类型转换和访问属性感到困惑（所以我强烈建议在直接深入 iOS 开发之前正确学习纯 C，因为这是一个非常基本的问题，如果你还不理解这一点，你可能会产生低质量的代码） . 你应该维护你的视图控制器的一个实例（或者让它成为一个全局变量，一个单例，或者甚至更好，一个应用程序委托对象的属性）并从那里访问它。例子：

```
UISearchBar *bar = [[[[UIApplication sharedApplication] delegate] mainViewController] searchBar]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:41:01.923

如果“mySearchBar”它是在您的 MainViewController 中声明的属性，并且您的 self.navController.visibleController 是 MainViewController 的一个实例。只需像这样访问它：

```
UISearchBar* searchBar= self.navController.visibleController.mySearchBar 
```

现在您正在尝试分配 AppDelegate 中甚至不存在的东西，因为 mySearchBar 尚未在 AppDelegate 中声明。

# python - 巡航控制执行 Python 脚本

> ID：11729132
> 
> 赞同：2
> 
> 时间：2012-07-30T20:32:31.653
> 
> 标签：python, xml, ant, cruisecontrol, build-script

我有一个使用单个 .py 文件来构建和压缩所有内容的项目。如何在巡航控制中成功调用它？对于默认的 Ant 构建脚本，我尝试了以下方法：

```
<project name="x" default="build">
<target name="build">
    <exec executable="python2.7.2" failonerror="true">
        <arg value="C:\build\trunk\build.py" />
        <arg value="$(label)" />
    </exec>
</target> 
```

但是，Cruise 控制返回“无法运行程序‘python 2.7.2’，系统找不到指定的文件。

这是一个真正的新手问题，但有人能指出我让 CC 执行 .py 脚本的正确方向吗？我找不到一个好的资源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:48:37.867

很简单，python2.7.2 不是您“PATH”的一部分，也不位于您的 ant 脚本所在的同一目录中。因此无法找到。在启动 Cruisecontrol 服务器之前将 python exe 放入您的路径（我们就是这样做的）或使用它的绝对路径（不推荐）。

# c# - 在程序中运行 gcc 的安全、跨平台方式

> ID：11729135
> 
> 赞同：0
> 
> 时间：2012-07-30T20:32:50.677
> 
> 标签：c#, c++, gcc, mono

我正在制作一个游戏引擎编辑器，我希望用户能够从编辑器中构建游戏。为此，他们显然需要运行带有一些标志的编译器，例如 gcc。

考虑到编辑器是用 C# 编写的并且是跨平台的（使用 Mono），从程序中运行 gcc 的好方法是什么？

我听说过，`System.Diagnostics.Process.Start();`但这是否适用于单声道并且有点跨平台？你可以用它添加标志吗？

编辑：实际游戏（不是编辑器）是用 c++ 编写的，需要 gcc。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:39:32.423

Process 类**是**跨平台的，是的。

您可能想了解 MonoDevelop 的 C/C++ 绑定如何在幕后调用编译器。来源在[这里](https://github.com/mono/monodevelop/tree/master/main/src/addins/CBinding)

# windows - 显示文件名和上次访问时间的 Windows Shell 命令

> ID：11729140
> 
> 赞同：8
> 
> 时间：2012-07-30T20:33:24.630
> 
> 标签：windows, batch-file

我正在尝试编写一个 Windows 命令来列出文件及其最后访问时间，按访问时间排序。

我用过

```
dir [directory] /O:D /T:A /S /B > output.txt 
```

这会按最后访问时间的顺序输出目录和子目录中的文件；但是我也需要它来输出最后一次访问时间。这是如何实现的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T22:03:38.030

从批处理文件中：

```
>output.txt (
  for /f "delims=" %%F in ('dir /o:d /t:a /s /b "c:\myPath\*"') @echo %%~tF %%F
) 
```

***但是，您需要注意一些事项：***

*   这些文件按***目录***中的访问时间戳排序。它不***按***所有目录的访问时间戳排序。您的原始代码有同样的问题。跨目录排序需要解析访问时间戳并将其转换为一个字符串，该字符串将在通过 SORT 排序时按时间顺序排序。类似“yyyy-mm-dd hh24:mm”的东西。即使这样也不是特别好，因为您无法访问秒数。您可以使用 WMIC DATAFILE 列出具有亚秒级最后访问时间戳的文件名。但是，考虑到这一点，为什么要打扰...

*   Windows 维护的最后访问时间戳***不可靠***！在许多情况下，应用程序可以读取文件，但最后一次访问时间戳并未更新。我在某处看到过一些关于这个的参考资料，但我不记得在哪里。

如果您仍然认为要获取按整个文件夹层次结构的上次访问时间戳排序的文件列表，那么以下将起作用。假设您要列出“c:\test\”下的所有文件

```
wmic datafile where "drive='c:' and path like '\\test\\%'" get name, lastaccessed | sort 
```

时间戳的格式`YYYYMMDDhhmmssddddddZZZZ`为

*   YYYY = 年
*   MM = 月
*   DD = 天
*   hh = 小时（24 小时格式）
*   毫米 = 分钟
*   ss = 秒
*   dddddd = 微秒
*   ZZZZ = 时区，表示为与 GMT 的分钟差（第一个字符是符号）

***编辑***

WMIC 中的通配符搜索会导致糟糕的性能。这是一个遍历根层次结构中所有文件夹的版本，针对每个特定文件夹运行 WMIC（无通配符）。它有不错的表现。

```
@echo off
setlocal disableDelayedExpansion
set "root=c:\test"
set "output=output.txt"

set "tempFile=%temp%\dir_ts_%random%.txt"
(
  for /d /r "%root%" %%F in (.) do (
    set "folder=%%~pnxF\"
    set "drive=%%~dF"
    setlocal enableDelayedExpansion
    2>nul wmic datafile where "drive='!drive!' and path='!folder:\=\\!'" get name, lastaccessed|findstr /brc:[0-9]
    endlocal
  )
) >"%tempFile%
sort "%tempFile%" >"%output%"
del "%tempFile%" 
```

# php - 尝试在搜索框中回显字符串

> ID：11729141
> 
> 赞同：0
> 
> 时间：2012-07-30T20:33:27.187
> 
> 标签：php, string, textbox, echo

我正在尝试`echo`在搜索框中输入一个字符串。然而到目前为止，它只是*`echos`*字符串的第一个单词。

```
require 'search.php';
$searchQuery = $_GET['searchText'] ;
echo $searchQuery;//prints "this is a test"
$search = new Search();
$search->run($searchQuery);
.
.
<input name="searchText" type="text" id="searchText" size=70 value = <?php echo $searchQuery; // prints "this"?> /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:37:47.107

尝试添加引号：

```
<input name="searchText" type="text" id="searchText" size="70" value="<?php echo htmlspecialchars($searchQuery); ?>"/> 
```

正如[Esailija 指出的那样](https://stackoverflow.com/questions/11729141/trying-to-echo-a-string-a-search-box/11729463#11729463)，正确转义 with`htmlspecialchars()`是一个更好的解决方案，并且将确保无论搜索是什么，它都能正确打印值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:36:52.800

您需要在 'value' 属性的值周围添加引号，如下所示：

```
<input name="searchText" type="text" id="searchText" size=70 value="<?php echo $searchQuery; // prints "this"?>" /> 
```

否则，这将呈现：

```
<input name="searchText" type="text" id="searchText" size=70 value = this is some sentent /> 
```

它将名为“value”的属性的值定义为“this”，然后创建更多（无意义的）属性“is”、“some”和“sentence”，它们没有值。报价很重要！您可能还应该引用您的 size 变量，尽管在这种情况下它并不重要。

另请注意，不检查和/或清理 GET 变量会使您面临 HTML/Javascript 注入攻击——如果我提供该值`word onClick='doSomething();'`作为 GET 变量值，我可以在客户端上执行 javascript。如果这被呈现为网站评论部分的一部分，我可能会向其他客户端的机器注入任意 javascript。

[编辑]

您可以通过使用`htmlspecialchars`Esailija 指出的方法来完成此操作。有关常见 Web 漏洞和清理 GET 变量的原因的更多信息，也许您应该查看[OWASP](https://www.owasp.org/index.php/Main_Page "OSWAP")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T20:35:52.840

发生这种情况是因为您周围没有引号，所以您实际输出的是

```
<input ... value = this is a test /> 
```

所以它将第一个标记分配为“值”属性。尝试这个：

```
<input ... value="<?php echo $searchQuery; ?>" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T20:36:36.590

尝试这个：

```
<input name="searchText" type="text" id="searchText" size="70" value="<?php echo $searchQuery; ?>" /> 
```

# java - 时间/日期对话框。试图添加按钮。日食安卓

> ID：11729150
> 
> 赞同：1
> 
> 时间：2012-07-30T20:34:05.433
> 
> 标签：java, android, eclipse

所以我用 textViews、editTexts、日期对话框和时间对话框选择器创建了一个 Activity。加上一个按钮。

我用它来让日期/时间对话框工作：

> 公共类 RainbowBookActivity 扩展 Activity {

```
private static final int DATE_DIALOG_ID=1; // for date 
  private static final  int TIME_DIALOG_ID=2; // for month 
  private int d,mo,y,h,m; // for date & month variables 
  Button b1,b2; // button objects 
  TextView e1,e2;  // textview objects

  // execution starts from here 
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_rainbowbook);  // calling activity_rainbowbook.xml 
     e1=(TextView)findViewById(R.id.textview1); // getting textview1 id from activity_rainbowbook.xml 
     b1=(Button)findViewById(R.id.button1); // getting  button id from activity_rainbowbook.xml

   b1.setOnClickListener(new OnClickListener() // setting listener for button one  

   {

   public void onClick(View arg0) {

    // TODO Auto-generated method stub
    showDialog(DATE_DIALOG_ID);   // generating dialog box 
     }
  });

  final Calendar cal=Calendar.getInstance(); // allocating memory for calendar instance
   d=cal.get(Calendar.DAY_OF_MONTH); // present date        
  mo=cal.get(Calendar.MONTH); // present month
     y=cal.get(Calendar.YEAR); // present year
     updateDate();  // update date 

  b2=(Button)findViewById(R.id.button2); // getting listener for button2 
   e2=(TextView)findViewById(R.id.textview2); 
   b2.setOnClickListener(new OnClickListener() // setting listener for button2 

   {
    public void onClick(View arg0) {

    // TODO Auto-generated method stub
    showDialog(TIME_DIALOG_ID);
 }
});

  h=Calendar.getInstance().get(Calendar.HOUR); // getting  present hour & minute
  m=Calendar.getInstance().get(Calendar.MINUTE);
  updateTime();  // updating time 
}

public void updateTime()
{

   e2.setText(new StringBuilder().append(h).append(':').append(m));

}
public void updateDate()
{

   e1.setText(new StringBuilder().append(d).append('/').append(mo+1).append('/').append(y));

  }

private DatePickerDialog.OnDateSetListener datelistener=new DatePickerDialog.OnDateSetListener() 
{

   public void onDateSet(DatePicker view,int year, int monthofyear, int day) 
   {

                     y=year;
                     mo=monthofyear;
                     d=day;
                     updateDate();
  }
 };

  private TimePickerDialog.OnTimeSetListener timelistener=new TimePickerDialog.OnTimeSetListener() 
  {
   public void onTimeSet(TimePicker view, int hourofday, int minute) 
   {
    // TODO Auto-generated method stub
    h=hourofday;
    m=minute;
     updateTime();
   }
 };

 protected Dialog onCreateDialog(int id) 
 {
    switch(id)
    {
      case DATE_DIALOG_ID:
                   return new DatePickerDialog(this,datelistener , y, mo, d);

      case TIME_DIALOG_ID:
                  return new TimePickerDialog(this,timelistener,h,m,false);
  }
  return null;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_rainbowbook, menu);
    return true;
} 
```

}

现在我想知道如何把它放在那里，这样我就可以有一个从editTexts传输信息的按钮：

```
 EditText inputName;
    EditText inputRoom;

    public void onCreate1(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_rainbowbook);

        inputName = (EditText) findViewById(R.id.editText1);
        inputRoom = (EditText) findViewById(R.id.editText2);
        Button btnNextScreen = (Button) findViewById(R.id.button3);

        //Listening to button event
        btnNextScreen.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                //Starting a new Intent
                Intent nextScreen = new Intent(getApplicationContext(), BookingsActivity.class);

                //Sending data to another Activity
                nextScreen.putExtra("name", inputName.getText().toString());
                nextScreen.putExtra("room", inputRoom.getText().toString());

                Log.e("n", inputName.getText()+"."+ inputRoom.getText());

                startActivity(nextScreen);

            }
        });
    } 
```

我似乎无法弄清楚这一点，希望有人能帮助我。谢谢。

* 预订活动：

> 公共类 BookingsActivity 扩展 Activity {

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_bookings);

        TextView Name = (TextView) findViewById(R.id.textView2);
        TextView Room = (TextView) findViewById(R.id.textView3);
        Button btnClose = (Button) findViewById(R.id.btnClose);

        Intent i = getIntent();
        // Receiving the Data
        String name = i.getStringExtra("name");
        String room = i.getStringExtra("room");
        Log.e("Bookings", name + "." + room);

        // Displaying Received data
        Name.setText(name);
        Room.setText(room);

        // Binding Click event to Button
        btnClose.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                //Closing SecondScreen Activity
                finish();
            }
        });

    }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_bookings, menu);
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:06:55.737

```
 maybe this in your BookingActivity

 Bundle b = i.getExtras();
 String name = b.getString("name", "default name");
 String room = b.getString("room", "default room"); 
```

编辑：另外，使用 startActivityForResult() 启动 BookingActivity ，以便稍后在完成后从中获取数据。

编辑：可以找到 startActivityForResult 的示例[How to return a result (startActivityForResult) from a TabHost Activity？](https://stackoverflow.com/questions/2497205/how-to-return-a-result-startactivityforresult-from-a-tabhost-activity)和[http://android.rahulblogs.com/android-startactivityforresult-example/](http://android.rahulblogs.com/android-startactivityforresult-example/)

# php - json 数组格式 json_encode php

> ID：11729153
> 
> 赞同：0
> 
> 时间：2012-07-30T20:34:11.967
> 
> 标签：php, json, multidimensional-array

在我的 javascript 中，我的这个 json 工作得很好。

```
{
    "sEcho": 1, 
    "iTotalRecords": 58, 
    "iTotalDisplayRecords": 58, 
    "aaData": [ 
        ["Gecko","Firefox 1.0","Win 98+ / OSX.2+","1.7","A"],
        ["Gecko","Firefox 1.5","Win 98+ / OSX.2+","1.8","A"],
        ["Gecko","Firefox 2.0","Win 98+ / OSX.2+","1.8","A"],
        ["Gecko","Firefox 3.0","Win 2k+ / OSX.3+","1.9","A"],
        ["Gecko","Camino 1.0","OSX.2+","1.8","A"],
        ["Gecko","Camino 1.5","OSX.3+","1.8","A"],
        ["Gecko","Netscape 7.2","Win 95+ / Mac OS 8.6-9.2","1.7","A"],
        ["Gecko","Netscape Browser 8","Win 98SE+","1.7","A"],
        ["Gecko","Netscape Navigator 9","Win 98+ / OSX.2+","1.8","A"],
        ["Gecko","Mozilla 1.0","Win 95+ / OSX.1+","1","A"]
    ] 
} 
```

但这当然是硬编码的，我想让 aaData 动态。我打算做类似 $.ajax 我的 php 有这个代码

```
$result = mysql_query("SELECT * FROM Persons");

$newArray = array();
while($row =mysql_fetch_array($result) ){
    $newArray[] = $row;
}

echo json_encode($newArray); 
```

来自 json_endcode 的数据是

```
[
{"0":"1","P_Id":"1","1":"zamor","LastName":"zamor","2":"credit","FirstName":"credit","3":"Giftcard","Address":"Giftcard","4":"Finance","City":"Finance"},{"0":"3","P_Id":"3","1":"zamor3","LastName":"zamor3","2":"credit","FirstName":"credit","3":"Giftcard","Address":"Giftcard","4":"Finance","City":"Finance"},{"0":"4","P_Id":"4","1":"zamor4","LastName":"zamor4","2":"credit","FirstName":"credit","3":"Giftcard","Address":"Giftcard","4":"Finance","City":"Finance"},{"0":"5","P_Id":"5","1":"zamor5","LastName":"zamor5","2":"credit","FirstName":"credit","3":"Giftcard","Address":"Giftcard","4":"Finance","City":"Finance"},{"0":"2","P_Id":"2","1":"zamor2","LastName":"zamor2","2":"credit","FirstName":"credit","3":"Giftcard","Address":"Giftcard","4":"Finance","City":"Finance"}
] 
```

请注意它有 [{ …}] 而不是 [[…]] 所以如果我替换我的 aaData （硬编码的，上面有这个），我会出错。如何使我的 php 代码返回 aaData 中的内容。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:42:52.433

因为您提供关联数组来列出。

```
php > $simple = array(1,2,3,4,5);
php > $assoc = array('a'=> 1, 'b' => 2);
php > echo json_encode($simple);
[1,2,3,4,5]
php > echo json_encode($assoc);
{"a":1,"b":2} 
```

尝试替换为

```
$newArray[] = array_values($row); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:40:14.637

如我所见，您正在使用`datatables`. 您必须
返回`sEcho`、`iTotalRecords`和。`iTotalDisplayRecords``aaData`

[**参考**](http://datatables.net/usage/server-side)

# permissions - Spring Security中权限的命名约定？

> ID：11729155
> 
> 赞同：5
> 
> 时间：2012-07-30T20:34:14.610
> 
> 标签：permissions, spring-security, naming-conventions

我目前正在使用 Spring Security 在我们的 Web 应用程序中实现一个安全层，更准确地说是通过实现我们自己的 PermissionEvaluator 方法来实现 hasPermission() 方法。

我想知道是否有任何命名约定/库来表示对模型对象、操作等的权限。

方法签名是 hasPermission(Object param, Object permission)，它让事情变得相当开放。大多数人似乎使用一个字符串作为第二个参数，并使用一个对象或对象数组作为第一个参数，所以他们最终得到了类似 hasPermission(#object, 'edit') 的东西。

*   是否有标准的许可清单或约定？（查看、编辑、修改、创建、添加、删除、删除、打印、列表...）
*   使用字符串、数字或枚举作为权限是否更好？
*   是否有命名操作的约定（addPersonToProject、personToProjectAdd...）
*   您能否分享一些有关您用于此类角色和权限的实现的信息？

# android - 如何设置 ListFragment 的 ListView 的样式

> ID：11729157
> 
> 赞同：5
> 
> 时间：2012-07-30T20:34:19.080
> 
> 标签：android, listview, android-listfragment

我想保留这些方法：

```
setListShown(true);
setListShownNoAnimation(true); 
```

但如果我使用

```
onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
```

要使用自定义样式的布局来膨胀`Fragment`，以前的方法不能使用，并显示此异常：

```
07-30 20:17:46.937: E/AndroidRuntime(1374): Caused by: java.lang.IllegalStateException: Can't be used with a custom content view
07-30 20:17:46.937: E/AndroidRuntime(1374):     at android.support.v4.app.ListFragment.setListShown(ListFragment.java:282)
07-30 20:17:46.937: E/AndroidRuntime(1374):     at android.support.v4.app.ListFragment.setListShown(ListFragment.java:258) 
```

那么，可能的解决方案是什么？

编辑：

使用`Fragment`加载器`ListView`从数据库中填充它。所以这就是我想保留这些方法的原因，这里需要它们：

```
public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
        mAdapter.swapCursor(data);  
        if (isResumed()) {
            setListShown(true);
        } else {
            setListShownNoAnimation(true);
        }
    } 
```

最简单的解决方案是根据`ListFragment`源代码制作我自己的代码，并将进度小部件添加到布局中以显示相同的效果。到现在为止，我将按照我被告知的那样删除这些行。如果我进行修改，我会将其粘贴到此处。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T13:35:20.480

只需将原始文件`ListView`替换`CustomListView`为`onCreateView()`. 为我工作。

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View layout = super.onCreateView(inflater, container,
            savedInstanceState);
    ListView lv = (ListView) layout.findViewById(android.R.id.list);
    ViewGroup parent = (ViewGroup) lv.getParent();

    // Remove ListView and add CustomView  in its place
    int lvIndex = parent.indexOfChild(lv);
    parent.removeViewAt(lvIndex);
    LinearLayout mLinearLayout = (LinearLayout) inflater.inflate(
            R.layout.custom_list, container, false);
    parent.addView(mLinearLayout, lvIndex, lv.getLayoutParams());
    return layout;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-31T01:55:59.547

我已经尝试过这个解决方案并且它有效：

在[支持`ListFragment`](http://developer.android.com/reference/android/app/ListFragment.html)源代码中说，

> 如果您使用自己的自定义内容覆盖此方法，请考虑在布局文件中包含标准布局 android.R.layout，以便继续保留 ListFragment 的所有标准行为。特别是，这是目前显示内置不确定进度状态的唯一方法。

因此，我采用了 list_content.xml 并将我自己的风格应用于列表：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        style="@style/page_background">

    <LinearLayout android:id="@+id/progressContainer"
            android:orientation="vertical"
            android:layout_width="match_parent" 
            android:layout_height="match_parent"
            android:visibility="gone"
            android:gravity="center">

        <ProgressBar style="?android:attr/progressBarStyleLarge"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        <TextView android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:paddingTop="4dip"
                android:singleLine="true" />

    </LinearLayout>

    <FrameLayout android:id="@+id/listContainer"
            android:layout_width="match_parent" 
            android:layout_height="match_parent">

        <ListView android:id="@android:id/list"
                android:layout_width="match_parent" 
                android:layout_height="match_parent"
                android:drawSelectorOnTop="false" 
                style="@style/rc_listview"/>
        <TextView android:id="@android:id/empty"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:gravity="center"
                android:textAppearance="?android:attr/textAppearanceLarge" />
    </FrameLayout>

</FrameLayout> 
```

然后从支持源代码中进行了固定`ListFragment`复制。

*   我重命名了一些 id 以匹配 XML 文件中的那些。
*   删除其`onCreateView()`.

    ```
    public class FixedListFragment extends Fragment {

        final private Handler mHandler = new Handler();

        final private Runnable mRequestFocus = new Runnable() {
            public void run() {
                mList.focusableViewAvailable(mList);
            }
        };

        final private AdapterView.OnItemClickListener mOnClickListener
                = new AdapterView.OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
                onListItemClick((ListView)parent, v, position, id);
            }
        };

        ListAdapter mAdapter;
        ListView mList;
        View mEmptyView;
        TextView mStandardEmptyView;
        View mProgressContainer;
        View mListContainer;
        CharSequence mEmptyText;
        boolean mListShown;

        public FixedListFragment() {
        }

        /**
         * Provide default implementation to return a simple list view.  Subclasses
         * can override to replace with their own layout.  If doing so, the
         * returned view hierarchy <em>must</em> have a ListView whose id
         * is {@link android.R.id#list android.R.id.list} and can optionally
         * have a sibling view id {@link android.R.id#empty android.R.id.empty}
         * that is to be shown when the list is empty.
         * 
         * <p>If you are overriding this method with your own custom content,
         * consider including the standard layout {@link android.R.layout#list_content}
         * in your layout file, so that you continue to retain all of the standard
         * behavior of ListFragment.  In particular, this is currently the only
         * way to have the built-in indeterminant progress state be shown.
         */

        /**
         * Attach to list view once the view hierarchy has been created.
         */
        @Override
        public void onViewCreated(View view, Bundle savedInstanceState) {
            super.onViewCreated(view, savedInstanceState);
            ensureList();
        }

        /**
         * Detach from list view.
         */
        public void onDestroyView() {
            mHandler.removeCallbacks(mRequestFocus);
            mList = null;
            mListShown = false;
            mEmptyView = mProgressContainer = mListContainer = null;
            mStandardEmptyView = null;
            super.onDestroyView();
        }

        /**
         * This method will be called when an item in the list is selected.
         * Subclasses should override. Subclasses can call
         * getListView().getItemAtPosition(position) if they need to access the
         * data associated with the selected item.
         *
         * @param l The ListView where the click happened
         * @param v The view that was clicked within the ListView
         * @param position The position of the view in the list
         * @param id The row id of the item that was clicked
         */
        public void onListItemClick(ListView l, View v, int position, long id) {
        }

        /**
         * Provide the cursor for the list view.
         */
        public void setListAdapter(ListAdapter adapter) {
            boolean hadAdapter = mAdapter != null;
            mAdapter = adapter;
            if (mList != null) {
                mList.setAdapter(adapter);
                if (!mListShown && !hadAdapter) {
                    // The list was hidden, and previously didn't have an
                    // adapter.  It is now time to show it.
                    setListShown(true, getView().getWindowToken() != null);
                }
            }
        }

        /**
         * Set the currently selected list item to the specified
         * position with the adapter's data
         *
         * @param position
         */
        public void setSelection(int position) {
            ensureList();
            mList.setSelection(position);
        }

        /**
         * Get the position of the currently selected list item.
         */
        public int getSelectedItemPosition() {
            ensureList();
            return mList.getSelectedItemPosition();
        }

        /**
         * Get the cursor row ID of the currently selected list item.
         */
        public long getSelectedItemId() {
            ensureList();
            return mList.getSelectedItemId();
        }

        /**
         * Get the activity's list view widget.
         */
        public ListView getListView() {
            ensureList();
            return mList;
        }

        /**
         * The default content for a ListFragment has a TextView that can
         * be shown when the list is empty.  If you would like to have it
         * shown, call this method to supply the text it should use.
         */
        public void setEmptyText(CharSequence text) {
            ensureList();
            if (mStandardEmptyView == null) {
                throw new IllegalStateException("Can't be used with a custom content view");
            }
            mStandardEmptyView.setText(text);
            if (mEmptyText == null) {
                mList.setEmptyView(mStandardEmptyView);
            }
            mEmptyText = text;
        }

        /**
         * Control whether the list is being displayed.  You can make it not
         * displayed if you are waiting for the initial data to show in it.  During
         * this time an indeterminant progress indicator will be shown instead.
         * 
         * <p>Applications do not normally need to use this themselves.  The default
         * behavior of ListFragment is to start with the list not being shown, only
         * showing it once an adapter is given with {@link #setListAdapter(ListAdapter)}.
         * If the list at that point had not been shown, when it does get shown
         * it will be do without the user ever seeing the hidden state.
         * 
         * @param shown If true, the list view is shown; if false, the progress
         * indicator.  The initial value is true.
         */
        public void setListShown(boolean shown) {
            setListShown(shown, true);
        }

        /**
         * Like {@link #setListShown(boolean)}, but no animation is used when
         * transitioning from the previous state.
         */
        public void setListShownNoAnimation(boolean shown) {
            setListShown(shown, false);
        }

        /**
         * Control whether the list is being displayed.  You can make it not
         * displayed if you are waiting for the initial data to show in it.  During
         * this time an indeterminant progress indicator will be shown instead.
         * 
         * @param shown If true, the list view is shown; if false, the progress
         * indicator.  The initial value is true.
         * @param animate If true, an animation will be used to transition to the
         * new state.
         */
        private void setListShown(boolean shown, boolean animate) {
            ensureList();
            if (mProgressContainer == null) {
                throw new IllegalStateException("Can't be used with a custom content view");
            }
            if (mListShown == shown) {
                return;
            }
            mListShown = shown;
            if (shown) {
                if (animate) {
                    mProgressContainer.startAnimation(AnimationUtils.loadAnimation(
                            getActivity(), android.R.anim.fade_out));
                    mListContainer.startAnimation(AnimationUtils.loadAnimation(
                            getActivity(), android.R.anim.fade_in));
                } else {
                    mProgressContainer.clearAnimation();
                    mListContainer.clearAnimation();
                }
                mProgressContainer.setVisibility(View.GONE);
                mListContainer.setVisibility(View.VISIBLE);
            } else {
                if (animate) {
                    mProgressContainer.startAnimation(AnimationUtils.loadAnimation(
                            getActivity(), android.R.anim.fade_in));
                    mListContainer.startAnimation(AnimationUtils.loadAnimation(
                            getActivity(), android.R.anim.fade_out));
                } else {
                    mProgressContainer.clearAnimation();
                    mListContainer.clearAnimation();
                }
                mProgressContainer.setVisibility(View.VISIBLE);
                mListContainer.setVisibility(View.GONE);
            }
        }

        /**
         * Get the ListAdapter associated with this activity's ListView.
         */
        public ListAdapter getListAdapter() {
            return mAdapter;
        }

        private void ensureList() {
            if (mList != null) {
                return;
            }
            View root = getView();
            if (root == null) {
                throw new IllegalStateException("Content view not yet created");
            }
            if (root instanceof ListView) {
                mList = (ListView)root;
            } else {
                mStandardEmptyView = (TextView)root.findViewById(android.R.id.empty);
                if (mStandardEmptyView == null) {
                    mEmptyView = root.findViewById(android.R.id.empty);
                } else {
                    mStandardEmptyView.setVisibility(View.GONE);
                }
                mProgressContainer = root.findViewById(R.id.progressContainer);
                mListContainer = root.findViewById(R.id.listContainer);
                View rawListView = root.findViewById(android.R.id.list);
                if (!(rawListView instanceof ListView)) {
                    if (rawListView == null) {
                        throw new RuntimeException(
                                "Your content must have a ListView whose id attribute is " +
                                "'android.R.id.list'");
                    }
                    throw new RuntimeException(
                            "Content has view with id attribute 'android.R.id.list' "
                            + "that is not a ListView class");
                }
                mList = (ListView)rawListView;
                if (mEmptyView != null) {
                    mList.setEmptyView(mEmptyView);
                } else if (mEmptyText != null) {
                    mStandardEmptyView.setText(mEmptyText);
                    mList.setEmptyView(mStandardEmptyView);
                }
            }
            mListShown = true;
            mList.setOnItemClickListener(mOnClickListener);
            if (mAdapter != null) {
                ListAdapter adapter = mAdapter;
                mAdapter = null;
                setListAdapter(adapter);
            } else {
                // We are starting without an adapter, so assume we won't
                // have our data right away and start with the progress indicator.
                if (mProgressContainer != null) {
                    setListShown(false, false);
                }
            }
            mHandler.post(mRequestFocus);
        }   
    } 
    ```

在那之后，一切都很完美。只需在创建`Fragment`.

```
public View onCreateView (LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.list_content, container, false);
    return view;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-05T19:58:53.437

另一个对我有用的解决方案就是把这条线

```
<include layout="@android:layout/list_content" /> 
```

而不是你的 ListView。

您可以在其之上构建您自己的内容，或者用其他一些视图将其包围。例如，我的布局如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="@dimen/default_view_padding"
        android:gravity="center"
        android:weightSum="4">

    <ImageButton
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/btnCounterBack"
            android:src="?attr/ic_previous"
            android:background="?android:attr/selectableItemBackground"
            android:contentDescription="@null"/>

    <TextView
            android:id="@+id/tvCounterLevel"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:text="@string/counter_categories"
            android:layout_gravity="center"
            android:paddingTop="@dimen/default_view_padding"
            android:paddingBottom="@dimen/default_view_padding"
            android:layout_alignParentTop="true"
            android:layout_alignParentLeft="true"
            android:layout_alignParentStart="true"
            android:gravity="center"/>

</RelativeLayout>

<LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:gravity="center_vertical"
        android:background="?attr/dropShadowBackground"
        android:orientation="vertical" >

    <include layout="@android:layout/list_content" />

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-30T22:10:52.963

`setListShown(true);`并且`setListShownNoAnimation(true);`不受支持包支持，仅在 Api Level 11+ 中可用。您要么必须放弃对 <= Api Level 10（错误选择）的支持，要么删除这些行。

如果我正确理解[文档](http://developer.android.com/reference/android/app/ListFragment.html)，则无论如何都不必设置它们，因为`true`它是默认值

# python - 将 Python xmlrpclib 与 unix 域套接字一起使用？

> ID：11729159
> 
> 赞同：12
> 
> 时间：2012-07-30T20:34:22.380
> 
> 标签：python, xml-rpc, xmlrpclib, unix-socket

我正在尝试与 交互`supervisord`，我想通过 unix 套接字（它是一个共享托管环境）与它交谈。

到目前为止我尝试过的是：

```
import xmlrpclib
server = xmlrpclib.ServerProxy('unix:///path/to/supervisor.sock/RPC2')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/xmlrpclib.py", line 1549, in __init__
    raise IOError, "unsupported XML-RPC protocol"
IOError: unsupported XML-RPC protocol 
```

`/path/to/supervisor.sock`肯定存在。'unix:///path/to/supervisor.sock/RPC2' 形式的 URI 由 使用`supervisord`，这就是我想到的地方。文档不讨论 unix 套接字：[http](http://docs.python.org/library/xmlrpclib.html) ://docs.python.org/library/xmlrpclib.html 。

这可能吗？我应该使用不同的库吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-31T17:47:48.563

`xmlrpclib`要求传递的 url 以`http`or开头`https`。解决这个问题的方法是定义一个忽略该 url 的自定义传输。以下是使用来自主管的传输的一些代码：

```
import supervisor.xmlrpc
import xmlrpclib

proxy = xmlrpclib.ServerProxy('http://127.0.0.1',
                               transport=supervisor.xmlrpc.SupervisorTransport(
                                    None, None, serverurl='unix://'+socketpath))

proxy.supervisor.getState() 
```

[如果这没有用，这里](http://bytes.com/topic/python/answers/42600-safe-local-xmlrpc)是代码的更新版本：

```
class UnixStreamHTTPConnection(httplib.HTTPConnection, object):
    def __init__(self, *args, **kwargs):
        self.socketpath = kwargs.pop('socketpath')
        super(UnixStreamHTTPConnection, self).__init__(*args, **kwargs)

    def connect(self):
        self.sock = socket.socket(socket.AF_UNIX, socket.SOCK_STREAM)
        self.sock.connect_ex(self.socketpath)

class UnixStreamTransport(xmlrpclib.Transport, object):
    def __init__(self, *args, **kwargs):
        self.socketpath = kwargs.pop('socketpath')
        super(UnixStreamTransport, self).__init__(*args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-07-17T09:00:01.623

我的python3版本，从上面的版本准备的。

```
from http.client import HTTPConnection
import socket
from xmlrpc import client

class UnixStreamHTTPConnection(HTTPConnection):
    def connect(self):
        self.sock = socket.socket(socket.AF_UNIX, socket.SOCK_STREAM)
        self.sock.connect(self.host)

class UnixStreamTransport(client.Transport, object):
    def __init__(self, socket_path):
        self.socket_path = socket_path
        super(UnixStreamTransport, self).__init__()

    def make_connection(self, host):
        return UnixStreamHTTPConnection(self.socket_path)

proxy = client.ServerProxy('http://localhost', transport=UnixStreamTransport("/var/run/supervisor.sock"))

print(proxy.supervisor.getState()) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-05-23T19:32:45.093

这是使用 xmlrpclib 与主管对话的更新示例：

```
import httplib
import socket
import xmlrpclib

class UnixStreamHTTPConnection(httplib.HTTPConnection):
    def connect(self):
        self.sock = socket.socket(socket.AF_UNIX, socket.SOCK_STREAM)
        self.sock.connect(self.host)

class UnixStreamTransport(xmlrpclib.Transport, object):
    def __init__(self, socket_path):
        self.socket_path = socket_path
        super(UnixStreamTransport, self).__init__()

    def make_connection(self, host):
        return UnixStreamHTTPConnection(self.socket_path)

server = xmlrpclib.Server('http://arg_unused', transport=UnixStreamTransport("/var/run/supervisor.sock"))
print(server.supervisor.getState()) 
```

正如已经提到的，我们必须使用 http:// 或 https:// 指定一个虚拟 url，然后指定一个自定义传输来处理域套接字

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-07-14T13:42:47.527

混合上面的答案，这对我有用......

```
import httplib
import socket
import xmlrpclib

class UnixStreamHTTPConnection(httplib.HTTPConnection, object):
    def __init__(self, *args, **kwargs):
        self.socketpath = kwargs.pop('socketpath')
        super(UnixStreamHTTPConnection, self).__init__(*args, **kwargs)

    def connect(self):
        self.sock = socket.socket(socket.AF_UNIX, socket.SOCK_STREAM)
        self.sock.connect(self.socketpath)

class UnixStreamTransport(xmlrpclib.Transport, object):
    def __init__(self, *args, **kwargs):
        self.socketpath = kwargs.pop('socketpath')
        super(UnixStreamTransport, self).__init__(*args, **kwargs)

    def make_connection(self, host):
        return UnixStreamHTTPConnection(host, socketpath=self.socketpath)

server = xmlrpclib.ServerProxy('http://arg_unused', transport=UnixStreamTransport(socketpath="path/to/supervisor.sock"))
print server.supervisor.getState() 
```

# .net - 为下拉列表创建局部视图

> ID：11729164
> 
> 赞同：0
> 
> 时间：2012-07-30T20:34:29.100
> 
> 标签：.net, asp.net-mvc-3, razor

我的视图模型

```
public class MyTest
{
   public string CountryId {get; set;}
   public IEnumerable<SelectListItem> Countries {get; set;}
} 
```

我的观点

```
@Model MyTest

@{
  ViewBag._SelectList = MyTest.Countries;

  //I want to call the partial view by
  Html.Partial("_Dropdownlist"); //and specify the property x => x.CountryId
} 
```

我正在创建一个局部视图，可用于所有下拉列表 _Dropdownlist.cshtml

```
@Html.DropDownListFor(<I need to use the property here>, ViewBag._SelectList) 
```

如何将 lambda 表达式传递`x => x.CountryId`给局部视图，以便可以跨多个视图重用 DropDownList.cshtml。

PS：我不想用`Html.DropDownList`

谢谢

# php - AJAX 不适用于文本框

> ID：11729165
> 
> 赞同：0
> 
> 时间：2012-07-30T20:34:29.603
> 
> 标签：php, ajax

我正在学习 AJAX 并创建了这个简单的代码。我在文本框中输入了一些东西，它应该会在屏幕上弹出一些东西。当我单击一个按钮时，它能够工作，但现在我将它更改为一个文本框，它不再工作了。这是第一个包含 XML HTTP 请求数据和 HTML 代码的文件。

```
<html>

    <head>
        <script type="text/javascript">
            function load() {
                if (window.XMLHttpRequest) {
                    xmlhttp = new XMLHttpRequest();
                } else {
                    xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
                }
                xmlhttp.onreadystatechange = function () {
                    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                        document.getElementById('results').innerHTML = xmlhttp.responseText;
                    }
                }
                xmlhttp.open('GET', 'test_ajax_return.php', true);
                xmlhttp.send();
            }
        </script>
    </head>

    <body>
        <form id="search" name="search">Type a name:
            <br>
            <input type="text" name="search_text" onkeydown="load();">
        </form>
        <div id="results"></div>
    </body>

</html> 
```

这是当用户在文本框中输入内容时我要打开的第二个文件。

```
<?php 

echo 'something';

?> 
```

[已解决]：感谢 Matt 提供的 Javascript 控制台。发现我编辑的一些评论毕竟影响了代码。我不认为 HTML 注释可以做到这一点。学过的知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:57:20.530

打开您的 javascript 控制台（Chrome 中的 F12）并查看是否有任何错误（由弹出窗口底部的红色 X 指示）。

您很可能有没有发现的 javascript 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:55:04.320

我只是将代码复制到我的机器上，它运行良好。

不过，作为一个想法，也许您的浏览器对`onkeydown`. 试试`onKeyDown`吧。

# jpa - 使用 JPA 和 OPTIMISTIC 锁时如何自动刷新版本字段？（日食链接）

> ID：11729167
> 
> 赞同：1
> 
> 时间：2012-07-30T20:34:35.210
> 
> 标签：jpa, eclipselink

也许这个问题已经回答了，也许没有。

我想用乐观锁更新一个对象，使用

```
...
EntityManager.merge(...);
EntityManager.flush(...);
... 
```

我的代码工作正常。我想要的是更新对象中的版本号并保留对象引用。

我谷歌搜索了很长时间，但我没有找到答案。

我最后的手段是制作一个 nativeQuery 并获取版本号。

这是一个测试代码：

```
 EntityManagerFactory factory = Persistence.createEntityManagerFactory(DBManager.getUnidadPersistencia());
    EntityManager emA = factory.createEntityManager();

    Grupo g = emA.find(Grupo.class, 1L);

    emA.close();

    //In some place 
    g.getSolicitanteList().get(0).setObservaciones("ZZZZ"); //Originally XXXX

    //...

    //Then I have to save the changes
    EntityManager emB = factory.createEntityManager();
    EntityTransaction tx = emB.getTransaction();

    try {
        tx.begin();
        emB.merge(g);
        emB.flush();
        tx.commit();
        //Here comes exception
        emB.refresh(g);
    } catch (Exception e) {
        if (tx.isActive()) {
            tx.rollback();
        }
        logger.log(Level.SEVERE, null, e);
    }
    emB.close(); 
```

和堆栈跟踪：

```
30/07/2012 05:15:31 PM org.rp.co5parser.TestGrupo refreshTest
GRAVE: null
java.lang.IllegalArgumentException: Can not refresh not managed object: org.rp.co5parser.alojamiento.Grupo[ idGrupo=1 ].
at org.eclipse.persistence.internal.jpa.EntityManagerImpl.refresh(EntityManagerImpl.java:943)
at org.eclipse.persistence.internal.jpa.EntityManagerImpl.refresh(EntityManagerImpl.java:849)
at org.rp.co5parser.TestGrupo.refreshTest(TestGrupo.java:89)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.apache.tools.ant.taskdefs.optional.junit.JUnit4TestMethodAdapter.run(JUnit4TestMethodAdapter.java:109)
at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:520)
at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1060)
at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:911) 
```

那样行吗？

提前致谢....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:54:13.477

在谷歌搜索之前，请阅读[文档](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#refresh%28java.lang.Object%29)：

> 无效刷新（java.lang.Object 实体）
> 
> 从数据库刷新实例的状态，覆盖对实体所做的更改（如果有）。

编辑：

您得到的错误不是 OptimisticLockException。这是一个 IllegalArgumentException，带有非常清晰的错误消息：*Can not refresh not managed object*。您只能刷新受管理的实体。而你传递的对象是一个分离的对象。

如果您不忽略`merge()`. `merge()`获取一个分离的对象，将其状态复制到具有相同 ID 的托管（附加）对象，并返回托管对象。所以你应该只需要这样做：

```
try {
    tx.begin();
    g = emB.merge(g); // assign the merged, attached object, having the new version to g
    tx.commit(); // no need to flush. commit flushes automatically
} catch (Exception e) {
    if (tx.isActive()) {
        tx.rollback();
    }
    logger.log(Level.SEVERE, null, e);
}
emB.close(); 
```

# c++ - 如何通过之前编写的预处理器定义获取函数签名？

> ID：11729168
> 
> 赞同：2
> 
> 时间：2012-07-30T20:34:35.840
> 
> 标签：c++, boost, boost-preprocessor

我想创建一个定义来解析函数签名并使用 Boost Preprocessor 创建如下内容：

```
MY_DEFINE std::string fun(int t, float b)
{ 
```

或者至少：

```
MY_DEFINE(std::string)(fun)(int t, float b)
{ 
```

这将产生：

```
class fun_in
{
    int t;
    float b;
}

class fun_out
{
    std::string value;
}

void my_fun_wrapper(int t, float b)
{
}

std::string fun(int t, float b)
{
    my_fun_wrapper(t, b); 
```

对于具有该定义的每个函数。

`N`是否可以通过 Boost Preprocessor 为传入参数的函数和任何返回类型创建这样的定义包装器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T02:35:00.127

好吧，预处理器无法在没有预先告知的情况下解析令牌。因此，您将需要使用更多的括号。这是它的样子：

```
DEFINE( (std::string)(fun)((int) a, (float) b) )
{
    return "Hello World!";
} 
```

以下是使用 boost 创建宏的方法（我假设您熟悉它的预处理器库）。首先是定义一些宏来处理括号，因为 boost 根本不处理带逗号的序列：

```
#define REM(...) __VA_ARGS__
#define EAT(...)

// Retrieve the type
#define TYPEOF(x) DETAIL_TYPEOF(DETAIL_TYPEOF_PROBE x,)
#define DETAIL_TYPEOF(...) DETAIL_TYPEOF_HEAD(__VA_ARGS__)
#define DETAIL_TYPEOF_HEAD(x, ...) REM x
#define DETAIL_TYPEOF_PROBE(...) (__VA_ARGS__),
// Strip off the type
#define STRIP(x) EAT x
// Show the type without parenthesis
#define PAIR(x) REM x 
```

接下来，您需要以三种不同的方式处理 args。首先，是将它们输出为成员变量（如`int a; float b;`）。然后作为函数参数（如`(int a, float b)`）。然后最后作为前向参数传递给另一个函数（如`(a, b)`）。

```
#define DETAIL_DEFINE_MEMBERS_EACH(r, data, x) PAIR(x);
#define DETAIL_DEFINE_ARGS_EACH(r, data, i, x) BOOST_PP_COMMA_IF(i) PAIR(x)
#define DETAIL_DEFINE_FORWARD_EACH(r, data, i, x) BOOST_PP_COMMA_IF(i) STRIP(x)

#define DETAIL_DEFINE_MEMBERS(args) BOOST_PP_SEQ_FOR_EACH(DETAIL_DEFINE_MEMBERS_EACH, data, BOOST_PP_VARIADIC_TO_SEQ args)
#define DETAIL_DEFINE_ARGS(args) BOOST_PP_SEQ_FOR_EACH_I(DETAIL_DEFINE_ARGS_EACH, data, BOOST_PP_VARIADIC_TO_SEQ args)
#define DETAIL_DEFINE_FORWARD(args) BOOST_PP_SEQ_FOR_EACH_I(DETAIL_DEFINE_FORWARD_EACH, data, BOOST_PP_VARIADIC_TO_SEQ args) 
```

接下来我们创建一个带有`DETAIL_DEFINE`三个参数的宏。第一个是函数名、参数，然后是返回值。这将产生你想要的类和函数：

```
#define DETAIL_DEFINE(name, args, ...) \
struct BOOST_PP_CAT(name, _in) \
{ \
    DETAIL_DEFINE_MEMBERS(args) \
}; \
struct BOOST_PP_CAT(name, _out) \
{ \
    __VA_ARGS__ value; \
}; \
__VA_ARGS__ BOOST_PP_CAT(name, _impl) DETAIL_DEFINE_ARGS(args) ; \
__VA_ARGS__ name DETAIL_DEFINE_ARGS(args) \
{ \
    return BOOST_PP_CAT(name, _impl) DETAIL_DEFINE_FORWARD(args); \
} \
__VA_ARGS__ BOOST_PP_CAT(name, _impl) DETAIL_DEFINE_ARGS(args) 
```

最后，`DEFINE`宏将解析出所有括号并将它们传递给`DETAIL_DEFINE`宏：

```
#define DEFINE(x) DETAIL_DEFINE(TYPEOF(STRIP(x)), (TYPEOF(STRIP(STRIP(x)))), TYPEOF(x)) 
```

所以现在当你写：

```
DEFINE( (std::string)(fun)((int) a, (float) b) )
{
    return "Hello World!";
} 
```

它应该输出：

```
struct fun_in
{
    int a;
    float b;
};
struct fun_out
{
    std::string value;
};
std::string fun_impl(int a, float b);
std::string fun(int a, float b)
{
    return fun_impl(a, b);
}
std::string fun_impl(int a, float b)
{
    return "Hello World!";
} 
```

请注意，这在 MSVC 中不起作用，但有一些解决方法。此外，您需要使用`-DBOOST_PP_VARIADICS=1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T18:35:52.913

这个宏中最后一个逗号的目的是什么？

```
#define TYPEOF(x) DETAIL_TYPEOF(DETAIL_TYPEOF_PROBE x,) 
```

我认为它最后有一个额外的逗号，可以编码为

```
#define TYPEOF(x) DETAIL_TYPEOF(DETAIL_TYPEOF_PROBE x) 
```

检查这个宏中没有最后一个逗号的情况下它是如何工作的

1.) DETAIL_DEFINE 中的第一个参数

```
STRIP( (std::string)(fun)((int) a, (float) b) ) --> (fun)((int) a, (float) b)

TYPEOF( (fun)((int)a, (float) b)) ) -->  fun 
```

2.) DETAIL_DEFINE 中的第二个参数

```
STRIP( STRIP( (std::string)(fun)((int)a, (float) b) ) ) --> ( ( int ) a , ( float ) b )

TYPEOF ( ( ( int ) a , ( float ) b ) ) --> ( int ) a , ( float ) b 
```

3.) DETAIL_DEFINE 中的第三个参数

```
TYPEOF ( (std::string )( fun )(( int ) a , ( float ) b) ) --> std::string 
```

结果 ：

```
DETAIL_DEFINE ( fun , (( int ) a , ( float ) b), std::string ) 
```

顺便说一句，对于那些没有 **BOOST_PP_VARIADIC_TO_SEQ**的旧提升的人，请像这样 使用 **BOOST_PP_TUPLE_TO_SEQ**：

```
#define BOOST_PP_VARIADIC_TO_SEQ(...) BOOST_PP_TUPLE_TO_SEQ(PP_NARG(__VA_ARGS__) , (__VA_ARGS__)) 
```

PP_NARG 你可以通过谷歌搜索在任何地方找到，这里是：

```
//Original Author: Unknown, but well recognized recursive variadic macro
#define PP_NARG(...)        PP_NARG_IMPL(__VA_ARGS__,PP_RSEQ_N())
#define PP_NARG_IMPL(...)   PP_ARG_N(__VA_ARGS__)
#define PP_ARG_N( \
          _1, _2, _3, _4, _5, _6, _7, _8, _9,_10, \
         _11,_12,_13,_14,_15,_16,_17,_18,_19,_20, \
         _21,_22,_23,_24,_25,_26,_27,_28,_29,_30, \
         _31,_32,_33,_34,_35,_36,_37,_38,_39,_40, \
         _41,_42,_43,_44,_45,_46,_47,_48,_49,_50, \
         _51,_52,_53,_54,_55,_56,_57,_58,_59,_60, \
         _61,_62,_63,N,...) N
#define PP_RSEQ_N() \
         63,62,61,60,                   \
         59,58,57,56,55,54,53,52,51,50, \
         49,48,47,46,45,44,43,42,41,40, \
         39,38,37,36,35,34,33,32,31,30, \
         29,28,27,26,25,24,23,22,21,20, \
         19,18,17,16,15,14,13,12,11,10, \
         9,8,7,6,5,4,3,2,1,0 
```

# ruby-on-rails - 我想在我的用户模型中搜索用户并使用 Sunspot 搜索包含用户拥有的值的另一个数据库

> ID：11729171
> 
> 赞同：1
> 
> 时间：2012-07-30T20:35:05.537
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我正在尝试设置一个站点范围的搜索来搜索用户以及属于用户的项目。

基本上每个用户都有很多“谷物”，我希望能够将谷物隐藏在搜索结果中，并在其位置显示谷物的所有者。

现在我有太阳黑子功能，但是在我的用户索引页面上，它在执行搜索之前列出了所有用户。如果现在执行搜索，我希望结果为空。

我仍然是一个菜鸟，我正在努力解决这个问题。任何帮助将不胜感激。这是我的来源。

应用程序/模型/user.rb

```
class User < ActiveRecord::Base
    include Amistad::FriendModel
  mount_uploader :avatar, AvatarUploader
  has_many :cereals, dependent: :destroy

  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :authentication_keys => [:login]

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :username, :login, :avatar, :avatar_cache, :remove_avatar, :firstname, :lastname, :phone, :urlname
  # attr_accessible :title, :body

  attr_accessor :login

  def self.find_first_by_auth_conditions(warden_conditions)
      conditions = warden_conditions.dup
      if login = conditions.delete(:login)
        where(conditions).where(["lower(username) = :value OR lower(email) = :value", { :value => login.downcase }]).first
      else
        where(conditions).first
      end
  end

            def update_with_password(params={})
        current_password = params.delete(:current_password)

        if params[:password].blank?
          params.delete(:password)
          params.delete(:password_confirmation) if params[:password_confirmation].blank?
        end

                result = if params[:password].blank? || valid_password?(current_password) 
          update_attributes(params)
        else
          self.attributes = params
          self.valid?
          self.errors.add(:current_password, current_password.blank? ? :blank : :invalid)
          false
        end

        clean_up_passwords
        result
            end

    searchable do
        text :firstname, :lastname, :username
    end

end 
```

应用程序/控制器/users_controller.rb

```
 class UsersController < ApplicationController
        before_filter :authenticate_user!

        def index
            @search = User.search do
                fulltext params[:search]
            end
            @users = @search.results
      end

        def show
          if params[:id].nil? && current_user
            @user = current_user
          else
            @user = User.find(params[:id])
          end
          @cereal = current_user.cereals.build if signed_in?
          @cereals = @user.cereals.paginate(page: params[:page])
      end

      def first_time
          if params[:id].nil? && current_user
            @user = current_user
          else
            @user = User.find(params[:id])
          end
      end

        def edit
            if params[:id].nil? && current_user
                @user = current_user
            else
                @user = User.find(params[:id])
            end
      end

        def profile
            @username = params[:id]
            @friends = current_user.friends || []
            @title = "User Profile for #{@username}"
            @user = User.find_by_username(@username)
            @users = User.all :conditions => ["id != ?", current_user.id]
      end 

    end 
```

意见/用户/index.html.haml

```
= form_tag @users_path, :method => :get do
        %p
            = text_field_tag :search, params[:search]
            = submit_tag "Search", name: 'nil'

    - @users.each do |user|
        %p
        = user.username 
```

# algorithm - 编译器和语言的选择会影响时间复杂度吗？

> ID：11729175
> 
> 赞同：2
> 
> 时间：2012-07-30T20:35:15.157
> 
> 标签：algorithm, math, compiler-construction, time, time-complexity

当人们谈到使用计算机科学策略解决数学问题所涉及的时间复杂度时，编译器、计算机或语言的选择是否会影响单个方程可能产生的时间？在 x86 机器上以汇编程序运行算法会比在 x64 机器上在 java 中创建相同的公式产生更快的结果吗？

编辑：这个问题与原始问题有点不同，如果编译器和语言的选择无关紧要，那么算法本身是其时间复杂度的唯一决定因素吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T21:53:28.983

渐近分析的重点是让我们不必考虑不同编译器、体系结构、实现等引入的细微差别。只要算法的实现方式遵循时间分析中使用的假设，其他因素可以安全地忽略。

我主要是在谈论非平凡的算法。例如，我可能有以下代码：

```
for(int i=0; i<N; i++){} 
```

标准分析会说这段代码的运行时间为`O(N)`. 然而，一个好的编译器会意识到这只是一个 nop 并优化它，给你留下一个`O(1)`. 然而，编译器还不够聪明（还）无法对任何不平凡的事情进行任何渐近显着的优化。

某些分析假设不成立的一个例子是当您没有随机存取存储器时。所以你必须确保你的编程平台满足所有这些假设。否则，将不得不执行不同的分析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T23:26:40.520

除非您使用一些外来语言，例如没有内置常用操作（+、-、/、*、...）的[Brainfuck](http://en.wikipedia.org/wiki/Brainfuck)，否则时间复杂度不取决于语言。

[但是，如果您使用tail-rec](http://en.wikipedia.org/wiki/Tail_call)函数，空间复杂度取决于编译器。

# php - php mysql_query 变量作为查询

> ID：11729176
> 
> 赞同：0
> 
> 时间：2012-07-30T20:35:23.910
> 
> 标签：php, mysql

我正在使用 PHP/MySQL，但无法使查询正常工作。

当我这样做时，它会起作用：

```
$result = mysql_query("SELECT * FROM site_info;"); 
```

但是，当我创建一个名为查询的变量并将其传递给函数时，查询不起作用。有谁知道为什么会这样？（我需要对字符串进行一些处理；这就是为什么我需要将其设为变量然后将其传递给函数的原因）

```
$query = "SELECT * FROM site_info;";
$result = mysql_query($query); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:40:05.387

`$result = msyql_query($query);`应该读`$result = mysql_query($query);`

你在字符串上做什么“处理”？你能发这个吗？

此外，正如@riwette 所说，您应该使用`mysqli_query()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:40:06.173

我建议调查[PDO](http://php.net/manual/en/book.pdo.php)。使用这些功能有很多好处`mysql`；看看对你有好处。

要回答您的问题，这应该可以正常工作：

```
$query = "SELECT * from site_info";
$result = mysql_query($query); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T20:40:25.373

您的代码中有一个错字：

`msyql_query`!=`mysql_query`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T20:46:41.133

这就是问题所在：`FROM site_info; ";"`。

`";"`除非它是您要检索的数据的一部分，否则不要放在查询中。

另外我听说它`mysql_*`即将贬值，所以你需要掌握 PDO`mysqli_*`或者更好的是使用 PHP 框架。

```
$result = mysql_query("SELECT * FROM site_info"); 
```

# linux - 确定一个 pty 是否有程序要求它输入

> ID：11729177
> 
> 赞同：4
> 
> 时间：2012-07-30T20:35:34.310
> 
> 标签：linux, input, pty

我正在使用 C 中的 openpty 创建一个 pty，并在主/父和从/子之间共享它。孩子可以 fork/exec 并将文件描述符传递给其他程序。我想向孩子注入命令，但如果我立即传递它们，它们就会迷路。我如何从父进程中得知有人阻止了来自标准输入的输入？我碰巧在 SUSE 10 上工作，但我更喜欢发行版独立的解决方案。

编辑：这个问题的答案对我来说仍然很有趣，但可能与问题无关。我稍后再谈。

代码的简化版本是使用[脚本](http://www.freebsd.org/cgi/cvsweb.cgi/src/usr.bin/script/)源代码（可能需要修复一些标题），并添加行

```
char* command = "echo 'Hello World!'\r\n", written = 0;
(void)write(master, command, strlen(command));
(void)write(STDOUT_FILENO, "Sent command\r\n", 14); 
```

在大之前

```
for (;;) { 
```

主要。

我一直在从脚本执行 csh，但后来我注意到脚本命令正在转储一些垃圾（如在 vi 中所见）

```
^[[>0;115;0c 
```

到父母的标准输入。如果我改为执行 bash shell，则不会丢弃任何内容，并且程序会很好地注入命令。

我仍然对所问问题的答案感到好奇，但显然它不再与我的问题相关，因为还有其他事情发生。如果有人确实知道如何查看是否正在阅读 pty，请随时回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:23:42.657

据我所知，文件描述符不会在前往另一个*进程*的过程中幸存下来。不过，您可以在线程之间共享它们。

至于知道什么时候有东西要读，我会尝试`select`在读取集中使用适当的文件描述符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:07:00.080

当我写信给 master fd 时，我注意到丢失东西的同样问题。

使用从 fd 进行写入可以避免问题。以及子标准输入的主 fd。这边走：

```
int main(void)
{
    int master_fd = -1;
    int slave_fd  = -1;

    if( openpty( &master_fd, &slave_fd, NULL, NULL, NULL ) != -1 )
    {
        const pid_t child_pid = fork();
        if( child_pid != -1 )
        {
            if( child_pid )
            {
                const char command[] = "command\n";
                close( master_fd );
                write( slave_fd, command, strlen(command) );
                close( slave_fd );
            }
            else
            {
                close( slave_fd );
                dup2( master_fd, STDIN_FILENO );
                execlp( "/bin/cat", "cat", (char*)0 );
            }
        }
    }

    return 0;
} 
```

您甚至可以为子进程添加延迟，它仍然有效。所以父进程可以在子进程做任何事情之前退出：

```
~ # temp_test
~ # command
cat: read error: Input/output error

~ # 
```

**编辑：**

有点不同的例子，因为 cat 的错误打印会导致混淆：

```
 if( child_pid )
        {
            const char command[] = "command\n";
            close( master_fd );
            write( slave_fd, command, sizeof(command) );
            close( slave_fd );
        }
        else
        {
            char buffer[100];
            ssize_t i;
            ssize_t len;

            close( slave_fd );

            do
            {
                len = read( master_fd, buffer, sizeof(buffer) );
                for( i = 0; i < len; i++ )
                    printf("%c", buffer[i] );
            } while( len > 0 );
        } 
```

结果：

```
~ # temp_test
command
~ # 
```

# sql - Sql Server Management Studio - 动态新建查询模板

> ID：11729181
> 
> 赞同：1
> 
> 时间：2012-07-30T20:35:50.913
> 
> 标签：sql, sql-server-2008, ssms

在 Sql Server Management Studio (2008) 中，我希望打开新的查询窗口，顶部有两行，默认注释掉，如下所示：

```
-- <ServerName>
-- <DatabaseName> 
```

尖括号之间的字符串必须是动态的，必须由当前连接详细信息的值设置。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:52:58.400

[虽然您可以通过修改`SQLFile.sql`位于您的 SSMS 安装目录中的文件](http://www.sqlservergeeks.com/blogs/AmitBansal/sql-server-bi/19/sql-server-management-studio-tip-get-a-customized-new-query-window)来自定义新查询窗口的默认内容，但该文件中的值不能自动填充来自服务器的结果。

但是，作为一种解决方法，您可以修改此文件以使用查询填充新查询窗口，该查询将在运行时打印出所需的结果，然后可以将其复制并粘贴到打开的查询窗口中。

```
PRINT '-- <' + @@SERVERNAME + '>'
PRINT '-- <' + DB_NAME() + '>' 
```

# c# - 正则表达式比较字符串并查看差异在哪里

> ID：11729186
> 
> 赞同：0
> 
> 时间：2012-07-30T20:36:23.487
> 
> 标签：c#, regex, string-comparison

我正在创建一个正则表达式来查看所有文档顶部的版权信息是否格式正确。

版权很长，因此我的正则表达式也很长。

假设版权信息如下所示：

```
/*/////////////////////////////////////////////////////////////////////////

Copyright content which is a lot goes in here.

Programmer:  Tono Nam

/////////////////////////////////////////////////////////////////////////*/ 
```

然后我将使用正则表达式：

```
var pattern = 

@"/\*/////////////////////////////////////////////////////////////////////////

Copyright content which is a lot goes in here.

Programmer:  (?<ProgammerName>[\w '\.]+)

/////////////////////////////////////////////////////////////////////////\*/"; 
```

如果我将正则表达式应用于第一个文本，它会给我一个匹配，一切都很好。**问题是当正则表达式不匹配时**假设程序员`/`在顶部放置了一个额外的。我的正则表达式将不再匹配。这个例子很容易注意到，但真正的版权要长得多，知道错误在哪里会很好。或者有时会出现拼写错误。**例如，您可能会遇到 Programer 而不是 Programmer。正因为如此，我将不得不查看整个版权并尝试发现错误。我认为应该有一种更简单的方法来做我需要的事情**

* * *

编辑

如果主题恰好是：

> /*//////////////////////////////////////// ///////////////////////
> 
> SOME_MISPELED_WORD 中有很多版权内容。
> 
> 程序员：南远野
> 
> ///////////////////////////////////////// /////////////////////*/

那么正则表达式将不匹配，因为`SOME_MISPELED_WORD`因此我想知道发生错误的索引，以便我可以查看：

> /*//////////////////////////////////////// ///////////////////////
> 
> 很多的版权内容都放在这里 <------------- 这里

而不是整个事情。

* * *

另一个例子是，如果版权信息是：

> /*//////////////////////////////////////// ///////////////////////
> 
> 这里有很多版权内容。
> 
> 程序员：南远野
> 
> ///////////////////////////////////////// //////////////////////*/

我想在最后一行得到一个错误，因为有一个额外的`/`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:39:07.787

## 最后我有解决方案：

基本上我们想知道正则表达式在哪里失败。如果我们必须在哪里获得不变的字符串，我们将能够比较它们并查看不同的字符。换句话说，如果我在哪里拥有：

```
var a = "12345";
var b = "1234A"; 
```

然后我们可以`a[0]`与`b[0]`then `a[1]`with进行比较，`b[1]`直到我们有差异。

**所以让我们这样做吧！**

假设我们的版权必须如下所示：

```
/*/////

Copyright content which is a lot goes in here.

Programmer:Tono Nam

Description:This is the description of the file....

/////*/ 
```

让我们删除所有可能变化的东西，以便我们可以应用我们的第一个示例：

```
/*/////

Copyright content which is a lot goes in here.

Programmer:

Description:

/////*/ 
```

然后唯一复杂的事情是创建一个正则表达式，它将删除所有可能变化的东西，以便最终得到该字符串。所以该模式将是：

```
 var regexPattern = @"(?s)(/\*/*.+Programmer:)(?<name>[^\r\n]*?)(\r.*Description:)(?<desc>[^\r\n]*)(\r.*?/*\*/)"; 
```

使用这种模式，我们将能够转向：

```
/*/////

Copyright content which is a lot goes in here.

Programmer:Tono Nam bla bla bla

Description:THIS IS A DIFFERENT DESCRIPTION

/////*/ 
```

进入

```
/*/////

Copyright content which is a lot goes in here.

Programmer:

Description:

/////*/ 
```

现在我们有两个字符串要比较！

* * *

* * *

* * *

## **这是我刚刚解释的代码**

```
// the subject we want to test
            var subject =
@"/*/////

Copyright content which is a lot goes in here.

Programmer:Tono Nam

Description:This is the description of the file....

/////*/";

            // the actual pattern this should be a readonly constant type on a real program cause it never should change
            var pattern =
@"/*/////

Copyright content which is a lot goes in here.

Programmer:

Description:

/////*/";

            // we use this pattern to turn the first subject into the second if we can
            var regexPattern = @"(?s)(/\*/*.+Programmer:)(?<name>[^\r\n]*?)(\r.*Description:)(?<desc>[^\r\n]*)(\r.*?/*\*/)";

            // note $1 means group 1 so here we are basically removing the groups name and desc
            var newSubject = Regex.Replace(subject, regexPattern, "$1$2$3");

            // at this point if newSubject = pattern we know that the header is formatted correctly!

            // Let's see where they are different!
            for (int i = 0; i < pattern.Length; i++)
            {
                if (pattern[i] != newSubject[i])
                {
                    throw new Exception("There is a problem at index " + i);
                }
            } 
```

在这个例子中它应该可以工作，因为我的主题格式正确。但是如果我在乞求处放置一个额外的 / 然后看看会发生什么：（我突出显示了 6 个`/`字符应该有 5 个

![在此处输入图像描述](../Images/d135110bbca1d06d89920df2e5f6eb25.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:19:57.357

试试这个`Regex`：

```
/\*/{2,}(?:\n|.)*(?:Programm?er\s*:\s*(?<programmer>.+))[\n\r\s]*(?:Description\s*:\s*(?<description>.+))? 
```

并获取名为`programmer`and的组`description`。这适用于上述所有条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T20:48:29.073

我认为拥有上面的正则表达式太严格了。尝试更多类似以下的方法：

```
@"^/\*(/*)(.*)(Programmer:|Programer:){1}(\d*)(<ProgrammerName>){1}(/*)\*/$" 
```

这将确保您在注释块中，它可以在开始和结束处有任意数量的正斜杠，并且不会限制输入版权声明的能力，同时仍然确保程序员已经正确签署了他的名字。虽然老实说，我认为尝试在正则表达式中强制执行程序员名称会给您带来更多麻烦，而不是从长远来看值得。我建议将其拉出并检查是否存在程序员“部分”。

# jasper-reports - 使用 JasperServer 选择所有输入控件

> ID：11729190
> 
> 赞同：1
> 
> 时间：2012-07-30T20:36:27.470
> 
> 标签：jasper-reports, jasperserver

我已经将使用 iReport 设计的报表加载到 JasperServer 中，并添加了必要的输入控件。我想知道是否有办法为多选输入控件获取全选复选框（或选项）。值得一提的是，控件运行良好，这与易用性更相关。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:20:48.640

没有。这是一个已知的增强请求。

需要注意的是，可以在多选列表中选择“null”值。`1=1`如果您将多选列表链接到 $X 语法，这将转换为（无过滤）的 SQL 子句。所以这是相同的结果......但从 UI 的角度来看，这与明确选择“全选”相去甚远。对不起。

# haskell - Haskell，收到的背包不是预期的返回类型错误

> ID：11729197
> 
> 赞同：2
> 
> 时间：2012-07-30T20:36:58.857
> 
> 标签：haskell

这是我解决分数背包问题的代码，输入到 knap 应该是形式

```
[("label 1", value, weight), ("label 2", value, weight), ...] 
```

并且输出应该是形式

```
[("label 1", value, solution_weight), ("label 2", value, solution_weight), ...] 
```

代码：

```
import Data.List {- Need for the sortBy function -}
{- Input "how much can the knapsack hole <- x" "Possible items in sack [(label, value, weight), ...] <- y" -}
{-knap x [([Char], Integer, Integer), ... ] = -}
knap x [] = []
knap x y = if length y == 1 
    then 
        if x > last3 (head y)
            then y
            else [(frst3 (head y), scnd3 (head y), x)]
    else 
        knap2 x y []
{- x is the knap max, y is the sorted frac list, z is the solution list -}
knap2 x y z = if x == 0
    then z
    else
        if thrd4 (head y) > x
            then [((frst4 (head y)), (scnd4 (head y)), x)]
            else knap2 (x-(thrd4 (head y))) (tail y) (z++[((frst4 (head y)), (scnd4 (head y)), (thrd4 (head y)))]) 

{- take a list of labels, values, and weights and return list of labels and fractions -}
fraclist :: (Fractional t1) => [(t, t1, t1)] -> [(t, t1, t1, t1)]
fraclist xs = [(x, y, z, y/z) | (x, y, z) <- xs]

{- Sort the list -}
sortList x = sortBy comparator x
    where comparator (_,_,_,d) (_,_,_,h) = if d > h then LT else GT

{- helper func to get values from tuples -}
frst3 (a,b,c) = a
scnd3 (a,b,c) = b
last3 (a,b,c) = c
frst4 (a,b,c,d) = a
scnd4 (a,b,c,d) = b
thrd4 (a,b,c,d) = c
last4 (a,b,c,d) = d 
```

这是我得到的错误

```
Couldn't match expected type `(t1, t0, t2, t3)'
            with actual type `(t1, t0, t2)'
Expected type: [(t1, t0, t2, t3)]
  Actual type: [(t1, t0, t2)]
In the second argument of `knap2', namely `y'
In the expression: knap2 x y [] 
```

我不太确定我还能做什么。在我坐在这里用头撞墙一个小时之前，也许有人可以指出一个明显的错误（如果有的话）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:37:55.743

我不知道 in 中的四元组`knap2`和 in 中的三元组`knap`应该如何组合在一起，但是如果您进行模式匹配和 drop `head`、`tail`、等`thrd4`，您将对此事有更清晰的认识`thirteenth17`

```
knap _ []        = []
knap x [(a,b,c)] = if x > c then [(a,b,c)]  else [(a, b, x)]
knap x abcs      = knap2 x abcs []

knap2 0 abcs z = z
knap2 x abcs z = undefined  -- not sure how to do this

-- but this makes sense, it seems:
knap3 0 _  zs = zs
knap3 _ [] _ = []
knap3 x ((a,b,c,d):abcds) zs =
  if c > x then [(a, b, x)]
           else knap3 (x - c) abcds (zs ++ [(a, b, c)]) 
```

或类似的东西。`if length y == 1`您可以在单例案例上进行模式匹配，而不是编写；您可以在 0 情况下进行模式匹配，而不是使用相等测试，`if x == 0`从而将其与其他情况区分开来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:45:05.820

编辑，我搞砸了，重做：

您可以看到错误出现在 中`y`使用的参数中`knap2 x y []`。它是一个三元组（实际类型），但`knap2` **期望**它是一个四元组。

# html - 数据库结构中相同类型的零个、一个或多个条目

> ID：11729200
> 
> 赞同：0
> 
> 时间：2012-07-30T20:37:27.323
> 
> 标签：html, xml, database-design

我正在为我的问题寻找概念解决方案，并建议使用最合适的技术。

我有一个由一个表（id，name，...）组成的数据库。在项目的功能中，需要添加注释。在预览对象时，将为所有评论提供空间。我应该创建另一个以 id 作为主键的表和另一个名为 comment 的列吗？如果是这样，有两个或多个评论描述相同的产品（并共享相同的 id）是错误的计划我应该更好地使用一些 XML 文件并尝试构建类似的东西：

```
 <allobjects>
         <object id=1>
           <comment>blaah blah </comment>
           <comment>something</comment>
         <object id=2>
         </object>
   </allobjects> 
```

然后遍历xml结构并检索评论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:43:58.783

我不会把它放在一个 xml 字符串中然后解析它。如果产品只有一个评论，那么在产品表中添加另一列*可能*是一个好方法。如果您计划支持对产品的多个评论，那么将其存储在单独的表中会更有意义。同样，如果不是所有产品都有评论，最好添加另一个表。最灵活的解决方案是创建新表。将其存储在 XML 文档中似乎不太实用，特别是因为您必须解析 xml，与直接从表中检索相比，这将相当慢（呃）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:42:37.807

使用您提供的 XML 与使用不同的表来存储评论（一对多的关系）是一回事，我认为 DB 方法没有任何问题。

根据您使用的语言（C#、JAVA、PHP），使用 XML 文件会更容易/更难，并且需要更多经验。另一方面，使用关系数据库和 SQL 对于您所说的需要是“小菜一碟”。

# css - 不透明度值小于 1 并且没有 z-index 堆叠

> ID：11729205
> 
> 赞同：3
> 
> 时间：2012-07-30T20:38:04.657
> 
> 标签：css, opacity

[MDN - Stacking without z-index](https://developer.mozilla.org/en/CSS/Understanding_z-index/Stacking_without_z-index)声明当页面中没有元素具有 z-index 时，元素按以下顺序堆叠：

1.  根元素的背景和边框
2.  正常流程中的后代块，按出现顺序（在 HTML 中）
3.  后代定位元素，按出现顺序（在 HTML 中）

但是，当涉及不透明度小于 1 的元素时，情况似乎并非如此：

[http://jsfiddle.net/pbQfY/2/](http://jsfiddle.net/pbQfY/2/)

假设真正的顺序如下是否安全？

1.  根元素的背景和边框
2.  正常流程中的后代块，按出现顺序（在 HTML 中）
3.  后代定位元素和创建堆叠上下文的后代元素，按出现顺序（在 HTML 中）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T20:54:58.080

看起来 MDN 文章只是[实际堆叠上下文解释的基本版本，在](http://www.w3.org/TR/CSS21/zindex.html)[可视化格式化模块](http://www.w3.org/TR/CSS2/visuren.html)中也涉及到。然而，这个特殊的陷阱来自[CSS 颜色模块](http://www.w3.org/TR/css3-color/#transparency)（强调我的）：

> 由于不透明度小于 1 的元素是由单个屏幕外图像合成的，因此其外部的内容无法在其内部的内容块之间按 z 顺序分层。出于同样的原因，实现必须为不透明度小于 1 的任何元素创建新的堆叠上下文。**如果未定位不透明度小于 1 的元素，则实现必须在其父堆叠上下文中同时绘制它创建的层如果它是具有“z-index：0”和“不透明度：1”的定位元素，将使用的堆叠顺序。**如果定位了不透明度小于 1 的元素，则应用“z-index”属性，如 [CSS21] 中所述，除了“auto”被视为“0”，因为总是创建新的堆叠上下文。有关堆叠上下文的更多信息，请参见 [CSS21] 的第 9.9 节和附录 E。本段中的规则不适用于 SVG 元素，因为 SVG 有自己的渲染模型（[SVG11]，第 3 章）。

# python - 如何在一行中逐个字符处理

> ID：11729209
> 
> 赞同：0
> 
> 时间：2012-07-30T20:38:17.900
> 
> 标签：python, string, count

我有一个在第 2 行有序列的文件和一个名为 tokenizer 的变量，它给了我一个旧的位置值。我正在尝试找到新位置.. 例如，这条线的标记器给我位置 12，这是 E，只计算字母直到 12。所以我需要通过计算破折号来找出新位置......

---------------LL---NE--HVKTHTEEK---PF-ICTVCR-KS----------

这是我到目前为止仍然无法正常工作的。

```
with open(filename) as f:
    countletter = 0
    countdash = 0
    for line, line2 in itertools.izip_longest(f, f, fillvalue=''):
        tokenizer=line.split()[4]
        print tokenizer

        for i,character in enumerate(line2):

            for countletter <= tokenizer:

                if character != '-': 
                    countletter += 1
                if character == '-':
                    countdash +=1 
```

**对于这个例子，我的新职位应该是 32**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:16:52.117

第一个答案，由 Chad D 编辑，使其成为 1-indexed（但不正确）：

```
def get_new_index(string, char_index):
    chars = 0
    for i, char in enumerate(string):
        if char != '-':
            chars += 1
        if char_index == chars:
            return i+1 
```

改写版：

```
import re

def get(st, char_index):
    chars = -1
    for i, char in enumerate(st):
        if char != '-':
            chars += 1
        if char_index == chars:
            return i

def test():
    st = '---------------LL---NE--HVKTHTEEK---PF-ICTVCR-KS----------'
    initial = re.sub('-', '', st)
    for i, char in enumerate(initial):
        print i, char, st[get_1_indexed(st, i)]

def get_1_indexed(st, char_index):
    return 1 + get(st, char_index - 1)

def test_1_indexed():
    st = '---------------LL---NE--HVKTHTEEK---PF-ICTVCR-KS----------'
    initial = re.sub('-', '', st)
    for i, char in enumerate(initial):
        print i+1, char, st[get_1_indexed(st, i + 1) - 1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:20:50.753

> 我的原文看起来像这样，我感兴趣的位置是 12，即 'E'

实际上，它是 K，假设您使用的是零索引字符串。Python 使用零索引，所以除非你跳过箍到 1 索引的东西（你不是）它会给你 K。如果你遇到问题，试着解决这个问题。

这里有一些代码可以满足您的需要（尽管使用 0 索引，而不是 1 索引）。这可以在[这里](http://ideone.com/CyInQ)在线找到：

```
def get_new_index(oldindex, str):
    newindex = 0

    for c in str:
        if c != '-':
            if oldindex == 0:
                return newindex
            oldindex -= 1
        newindex += 1

    return 1 / 0 # throw a shitfit if we don't find the index 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T21:46:04.863

这是获得第二行的愚蠢方法，使用islice会更清楚，或者`next(f)`

```
for line, line2 in itertools.izip_longest(f, f, fillvalue=''): 
```

这里`count_letter`似乎是`int`一阵子。可能不是你所期望的。`tokenizer``str`

```
 for countletter <= tokenizer: 
```

这也是一个语法错误，所以我认为这不是您正在运行的代码

也许你应该有

```
tokenizer = int(line.split()[4]) 
```

变成`tokenizer`一个`int`

`print tokenizer`可能会产生误导，因为`int`和`str`看起来相同，所以你会看到你期望看到的。`print repr(tokenizer)`在调试时尝试。

一旦你确定 tokenizer 是一个 int，你就可以改变这一行

```
 for i,character in enumerate(line2[:tokenizer]): 
```

# jquery - 带有嵌套表的 jQuery，使用传递的 Selector 选择外部表 tr/td

> ID：11729211
> 
> 赞同：2
> 
> 时间：2012-07-30T20:38:26.937
> 
> 标签：jquery, html

我正在尝试设置嵌套表函数。因此，在函数中，我传递了一个选定的元素，我只想选择该表的子/直接后代`td`/`tr`而不是嵌套表的`td`/`tr`元素。这是我设置的一个小例子。

```
<table class="top">
    <tr>
        <td>1</td>
        <td>2</td>
    </tr>
    <tr>
        <td>3</td>
        <td>4</td>
    </tr>
    <tr>
        <td>5</td>
        <td>
            <table class="nested">
                <tr>
                    <td>1</td>
                    <td>2</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>4</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>4</td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<div id="results"></div> 
```

以及与之配套的 jQuery / Javascript...

```
var tbl = $(".top");
var r = $("div#results");

$(r).html("");

$(r).append("var tbl = $(\".top\")</br>")

$(r).append("$(tbl).find(\"td\").length:" + $(tbl).find("td").length.toString() + "</br>");

$(r).append("$(\"td\", tbl).length: " + $("td", tbl).length.toString() + "</br>");

$(r).append("$(tbl).children(\"tbody\").children(\"tr\").children(\"td\").length: " + $(tbl).children("tbody").children("tr").children("td").length.toString() + "</br>"); 
```

结果如下...

var tbl = $(".top") **（模拟传递的选择器）**

$(tbl).find("td").length:12 **（选择所有 td 元素）**

$("td", tbl).length: 12 **（选择所有 td 元素，同上）**

$(tbl).children("tbody").children("tr").children("td").length: 6 **（选择合适的元素，但是 jQuery 链对于我想做的事情来说似乎太长太严格了)**

非常感谢为顶级表的子元素找到合适的选择器的任何帮助！谢谢！

更新：这里是[jsFiddle](http://jsfiddle.net/TheJoeFletch/7gzKa/3/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:46:08.147

使用直接后代（`>`）选择器的工作小提琴：http: [//jsfiddle.net/3T9sN/](http://jsfiddle.net/3T9sN/)

```
$(function(){
    var rows = $(".top > TBODY > TR");
    alert( "Number of rows: " + rows.length );

    var cells = $(".top > TBODY > TR > TD");
    alert( "Number of cells : " + cells.length );
});​ 
```

当然，你也可以在这里复用一些上下文，让查询更加高效，比如：

```
var tbody = $(".top > tbody");

// using children() method
var rows = tbody.children( "TR" );

// using selector context
var cells = $( "> TR > TD", tbody );

alert( "Number of rows: " + rows.length );
alert( "Number of cells : " + cells.length ); 
```

小提琴：http: [//jsfiddle.net/3T9sN/1/](http://jsfiddle.net/3T9sN/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:44:57.320

除了选择器之外，还传递父项以在子项中查找您的元素

```
 $("what your looking for ", parent); 
```

如同

```
 $(parent).children("what you are looking for") 
```

第一个是更短的语法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T20:51:13.683

```
var tbl = $('.top');
var stuff = tbl.find('table').filter(function(){
  $('#results').append($('tr, td', this).length);
}); 
```

通常，您会在过滤器函数中使用 return，但我们不想返回元素，我们想使用从它们中抽象出来的数据。为此，请勿使用“return”方法。

[标准问题 jsFiddle...](http://jsfiddle.net/qfKhJ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T11:49:48.790

`$('tr:not(tr tr)')`. 可能比使用后代选择器慢，但更灵活。

# c# - LinqtoSQL/C#：在这种情况下如何使用三元语句

> ID：11729212
> 
> 赞同：0
> 
> 时间：2012-07-30T20:38:40.583
> 
> 标签：c#, linq-to-sql

我有以下 Linq to SQL：

```
var finalResults =

    (from d in data
    group d by new { d.LocationName, d.Year, d.Month, d.Denominator, d.Numerator } into groupItem
    orderby groupItem.Key.Year, groupItem.Key.Month, groupItem.Key.LocationName 
    select new
    {
        IndicatorName = IndicatorName,
        groupItem.Key.LocationName,
        Year = string.Format("{0}", (int?)groupItem.Key.Year),
        Month = string.Format("{0:00}", (int?)groupItem.Key.Month)                     
        Numerator = groupItem.Sum(x => x.Numerator),
        groupItem.Key.Denominator,

    }).ToList(); 
```

问题是年份和月份都有一些空字符串。发生这种情况时，我想用“不可用”替换空字符串。我试着做一个像这样的三元语句：

```
Year = string.Format("{0}", (int?)groupItem.Key.Year) == "" ? "Not Available" :  string.Format("{0}", (int?)groupItem.Key.Year),
Month = string.Format("{0:00}", (int?)groupItem.Key.Month) == "" ? "Not Available" :  string.Format("{0:00}", (int?)groupItem.Key.Month), 
```

我试图做的是“如果年份（或月份）有一个空字符串，则显示“不可用”，否则显示该值

但是，这并没有做我想做的事情，因为我仍然失败了

Assert.AreNotEqual("", endItem.Year);
Assert.AreNotEqual("", endItem.Month);

测试。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:43:00.303

我强烈建议改为在 LINQ to Objects 中进行最终操作。在 LINQ to SQL 中投影您需要的所有位，然后用于`AsEnumerable`返回 LINQ to Objects：

```
var sqlQuery = from d in data
               group d by new { d.LocationName, d.Year, d.Month, 
                                d.Denominator, d.Numerator } into groupItem
               orderby groupItem.Key.Year, groupItem.Key.Month, 
                       groupItem.Key.LocationName 
               select new
               {
                   IndicatorName,
                   groupItem.Key.LocationName,
                   groupItem.Key.Year,
                   groupItem.Key.Month,
                   Numerator = groupItem.Sum(x => x.Numerator),
                   groupItem.Key.Denominator,
               };

var finalResult = sqlQuery.AsEnumerable()
     .Select(item => new {
                 item.IndicatorName,
                 item.LocationName,
                 Year = item.Year == null ? "Not Available" 
                                          : item.Year.ToString(),
                 Month = item.Month == null ? "Not Available" 
                                            : item.Month.ToString("00"),
                 item.Numerator,
                 item.Denominator
             })
     .ToList(); 
```

当您使用 LINQ to Objects 时，更容易推断在复杂场景中会发生什么 - 您无需担心 null 处理等方面的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:42:23.217

为什么要比较格式化值和原始值？

```
Year = groupItem.Key.Year == "" ? "Not Available" :  string.Format("{0}", (int?)groupItem.Key.Year),
Month = groupItem.Key.Month == "" ? "Not Available" :  string.Format("{0:00}", (int?)groupItem.Key.Month), 
```

# ios - iOS：Webview 不会加载页面，可能是启动问题？

> ID：11729214
> 
> 赞同：0
> 
> 时间：2012-07-30T20:38:48.417
> 
> 标签：ios, webview, tableview

**更新**

修复了加载问题。当我使用自定义单元格类时，我只将情节提要中的 tableview 单元格的标识符设置为 customcell 的名称，而不是实际的类本身！菜鸟失误，对不起！

这修复了 viewDidLoad 方法中无法加载网页的问题。现在我只需要对其进行排序，以便根据表格行选择加载正确的网页。PrepareForSegue 是理想的吗？谢谢

**原帖**

在我的应用程序中，我有一个带有 tableview 的 FirstViewController，它列出了打开时在 secondviewcontroller 中加载 webview 的对象。

所以在我的 didSelectRowAtIndexPath 方法中，我目前有：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{   [self performSegueWithIdentifier:@"Detail" sender:self];
    NSIndexPath *selectedRowIndex = [self.tableView indexPathForSelectedRow];
    DetailViewController *detailViewController = [DetailViewController alloc];    
    detailViewController.urlToGet = @"www.google.com"
} 
```

现在 DetailViewController 当然在 Storyboard 中有它的 viewcontroller 对象，其中设置了委托和 webView 出口。

在 DetailViewController 类本身中，我什至在 viewDidLoad 中尝试了这个，只是为了让一些网站显示：

```
 NSString *fullURL = @"http://www.google.com"; 
NSURL *url = [NSURL URLWithString:fullURL];
 NSURLRequest *requestObj = [NSURLRequest requestWithURL:url]; 
[webView loadRequest:requestObj]; 
```

但我得到的只是一个空白的网络视图。

我尝试了一个新项目的教程，该项目运行良好，然后复制了它——遗憾的是，它目前在这里不起作用。

我还尝试了 prepareForSegue （因为这样可以传递信息），但这没有用。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    /*
     When a row is selected, the segue creates the detail view controller as the destination.
     Set the detail view controller's detail item to the item associated with the selected row.
     */
    if ([[segue identifier] isEqualToString:@"Detail"]) {

        DetailViewController *detailViewController = [segue destinationViewController];
    detailViewController.urlToGet = @"www.google.com";
} 
```

}

两个 ViewController 之间的 segue 具有 Detail 的标识符。

知道为什么我无法让对象甚至加载其 viewDidLoad 中指定的网站吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:45:38.833

你必须到`init`视图控制器。子视图等的创建发生在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:00:42.650

解决它！我使用的是自定义单元格类，我只将情节提要中的 tableview 单元格的标识符设置为 customcell 的名称，而不是实际的类本身！菜鸟失误，对不起！

# c++ - 容器 STL 的 typeid

> ID：11729218
> 
> 赞同：0
> 
> 时间：2012-07-30T20:38:59.463
> 
> 标签：c++, stl, containers, typeid

我正在编写一个小模板类，它可以作为模板参数列表或向量（显然还有数据类型）。我需要重载 [ ] 运算符，为此我想使用向量的重载 [ ] 并对列表进行简单的搜索（下一个，下一个，直到我们到达所需的索引）。所以我用 typeid 检查参数是否是列表的参数并根据这样的结果实现：

```
const T* operator[](size_t _index)const
{
    if(typeid(ContainerT<T,std::allocator<T> >) == typeid(vector<T>))
    {
        return m_container[_index];
    }
    else
    {
        const_iterator it = m_container.begin();
        for(int i=0;i<_index;++i)
        {
            ++it;
        }
        return *it;
    }
} 
```

如果我不使用 [ ] 作为列表，一切都很好，但是当我使用它时：

```
tContainer_t<int, list> list1;
cout<<list1[0]<<endl; 
```

它根本没有编译，这是编译错误：

```
In file included from main.cpp:6:0:
tContainer.h: In member function ‘const T* tContainer_t<T, ContainerT>::operator[](size_t) const [with T = int, ContainerT = std::list, size_t = unsigned int]’:
main.cpp:68:9:   instantiated from here
tContainer.h:80:29: error: no match for ‘operator[]’ in ‘((const tContainer_t<int, std::list>*)this)->tContainer_t<int, std::list>::m_container[_index]’ 
```

我不明白，因为我检查了 typeid 确实有效（我认为......），无论如何编译器似乎看到下标也将被调用列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T20:49:58.463

由于编译器需要编译整个函数，即使在运行时不会采取一个分支（由于检查），那么您不能使用这种运行时检查来防止编译错误。

有一些方法可以做到这一点，包括使用可以专门用于该类型的辅助函数。但是，它可能很复杂，在这种情况下，不值得自己做，因为标准库已经为您完成了工作。

`std::advance`（位于 header 中`<iterator>`）可用于将迭代器推进 N 次，并针对随机访问迭代器（如`std::vector`or返回的迭代器）进行了优化，`std::deque`以在恒定时间内完成。否则，它会退回到使用`++`

```
// Note, changed signature to return const T&, which is more standard for operator[]
const T& operator[](size_t index) const  
{
   const_iterator itr = m_container.begin();
   std::advance(itr, index);
   return *itr;
} 
```

编辑：

假设您想了解它是如何完成的，您将创建以下函数，通常在单独的命名空间中。现在，我将使用问题的初衷，并假设您使用的是`std::list`or `std::vector`。

```
namespace helper
{
    template <typename T, typename Alloc>
    typename std::vector<T,Alloc>::const_reference 
    index_into(std::vector<T, Alloc> const& container, std::size_t index)
    {
        return container[index];
    }

    template <typename T, typename Alloc>
    typename std::list<T,Alloc>::const_reference 
    index_into(std::list<T, Alloc> const& container, std::size_t index)
    {
        std::list<T, Alloc>::const_iterator itr = container.begin();
        for(std::size_t i = 0; i < index; ++i) 
        {
            ++itr;
        }
        return *itr;
    }
}
// Change your definition here
const T& operator[](size_t index) const  
{
    return helper::index_into(m_container, index);
} 
```

为什么会这样：当您使用 std::list 或 std::vector 编译它时，它使用函数重载来确定`index_into`要使用的两个重载中的哪一个。因此，它只编译合法的，而不试图编译两者。

注意这一点，实现只允许 std::vector 和 std::list。如果您想允许任何容器，则 using`std::advance`是通用且**正确**的解决方案。

仅供参考，实现`std::advaance`使用类似的技术。您可以查看您的实现以了解它是如何完成的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T20:49:21.967

使用`std::advance`来自`<iterator>`：

```
const T* operator[](size_t index) const
{
    const_iterator it = m_container.begin();
    std::advance(it, index);
    return &*it;
} 
```

# objective-c - 具有相似属性的 NSManagedObjects

> ID：11729219
> 
> 赞同：0
> 
> 时间：2012-07-30T20:39:00.723
> 
> 标签：objective-c, ios, cocoa-touch, uitableview, core-data

我有一个`UITableView`显示名为using的属性`name`的值。我只使用一个基本的然后在's中显示 的值就可以让它工作。`NSManagedObject``CoreData``NSFetchRequest``name``UITableViewCell``textLabel`

但是，许多`NSManagedObject`' 具有相同的`name`值，因此我的表中出现重复项。如何过滤它以便我只有一个`name`值？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:46:33.030

您可以将获取请求配置为仅返回*不同的值*，但这需要您返回字典而不是托管对象。由于您要查找字典，因此您必须指定要返回的值。

您可以查看[我的答案](https://stackoverflow.com/a/11234058/608157)以[避免在 Core Data fetch 上出现重复结果](https://stackoverflow.com/q/11233789/608157)。

* * *

简而言之：

```
request.resultType = NSDictionaryResultType;
request.propertiesToFetch = [NSArray arrayWithObject:@"name"];
request.returnsDistinctResults = YES; 
```

# javascript - 在 OpenStreetMap 上显示不同的文本标记或颜色标记

> ID：11729221
> 
> 赞同：0
> 
> 时间：2012-07-30T20:39:02.223
> 
> 标签：javascript, openstreetmap, marker

我想用不同类型的标记在 OpenStreetMap 上显示不同的地方，因为两个或多个标记的标记上可以有相同的文本，并且有很多标记，比如具有不同文本的标记，整个工作将在正文加载时完成。谁能给我适当的建议？谢谢 Khandaker Mustakimur Ra​​hman

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:31:40.887

我*认为*您要问的是如何在使用 OpenStreetMap 数据的地图上绘制一系列带有弹出气球文本的标记，并在网页中显示该带注释的地图。如果是这种情况，您需要

1.  查找可以为 OpenStreetMap 切片提供服务的地图服务器，或者自己制作。
2.  使用页面中的 JavaScript 地图绘制库从服务器加载切片，在页面上绘制它们，并在地图上放置标记和弹出窗口。

我知道的地图服务器的两个简单选项是由[CloudMade](http://www.cloudmade.com)托管的，您需要注册一个免费的开发人员密钥才能访问，另一个是由[MapQuest](http://developer.mapquest.com/web/products/open/map)托管的，您可以在没有 API 密钥的情况下自由访问。

有几个 JavaScript 库可用于在网页上的“小部件”中绘制地图，但最常见的是[OpenLayers](http://www.openlayers.org)和[Leaflet](http://leaflet.cloudmade.com)。这些库中的每一个都有一个基本教程，展示了如何使用它在页面上绘制地图，尽管 Leaflet 更好更友好。一旦决定使用哪个库，您可以查看其文档以了解如何在弹出气球中绘制带有文本的标记，或者返回 StackOverflow 询问更具体的问题。

要全面了解在您的网页上绘制 OpenStreetMap 地图所涉及的技术，请查看[switch2osm.org](http://www.switch2osm.org)。

# ruby-on-rails - rails3嵌套包括？

> ID：11729228
> 
> 赞同：2
> 
> 时间：2012-07-30T20:39:54.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

有没有合适的方法来写这个，还是我接近这个错误？我需要做一个嵌套包含。我找到了[这个链接](http://www.dzone.com/snippets/beauty-nested-include-option)，但它似乎不起作用。

```
def show
    @showring = Ring.includes(:stones => :upcharges, :variations).find(params[:id])
end 
```

我有 3 张桌子... 有_many 石头的戒指 有_many upcharges 的石头

楷模：

```
class Ring < ActiveRecord::Base
  has_many :stones
end

class Stone < ActiveRecord::Base
  has_many :upcharges  
  belongs_to :ring  
end

class Upcharge < ActiveRecord::Base
  belongs_to :stone
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T20:42:30.113

```
def show
    @showring = Ring.includes([{:stones => :upcharges}, :variations]).find(params[:id])
end 
```

添加了一些括号:)

收取所有附加费：

```
@showring.stones.each do |s|
  s.upcharges #Do whatever you need with it
end 
```

选项 2：声明一个`has_many :through`

```
class Ring < ActiveRecord::Base
  has_many :stones
  has_many :upcharges, :through => :stones
end 
```

然后在视图中：

```
<%= @showring.upcharges.to_json.html_safe %> 
```

# android - 为什么我的应用程序停止？

> ID：11729241
> 
> 赞同：0
> 
> 时间：2012-07-30T20:40:52.980
> 
> 标签：android

我不知道是什么导致我的应用程序崩溃，logcat 说它从 MAIN 获得了一个致命的异常，我真的不知道这意味着我对这些东西很陌生。发生的情况是第一个活动加载正常，但是一旦我按下按钮加载第二个活动就会停止。抱歉，如果它的问题太长或已经被问到，我已经尝试了很多以前问过的问题。

显现：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name=".QuizActivity"
        android:theme="@android:style/Theme.NoTitleBar"
        android:exported="false"
         >
        <intent-filter>
            <category android:name="android.intent.category.DEFAULT">

            </category>                
        </intent-filter>

    </activity>

    <activity
        android:name=".MainMenu"
        android:theme="@android:style/Theme.NoTitleBar" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>    
    </activity>

</application> 
```

第一项活动

```
public class MainMenu extends Activity {
Button quizButton;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout_mainmenu);

    quizButton = (Button)findViewById(R.id.launchQuiz);

    quizButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if (v.getId() == quizButton.getId()) {
                Intent launchQuizActivity = new Intent(MainMenu.this, QuizActivity.class);
                MainMenu.this.startActivity(launchQuizActivity);

            }
        }
    });
}
} 
```

这是第二个：

```
public class QuizActivity extends Activity {

Intent returnHome = new Intent(QuizActivity.this, matt.apps.quiz.MainMenu.class);

String questions[] = {"What month is it?","What OS is this?" };
String lChoices[] = {"July","IOS"};
String cChoices[] = {"August","Android"};
String rChoices[] = {"October", "Windows?"};
int answers[] = {R.id.lButton,R.id.cButton };

boolean correct = false;
int numCorrect = 0;
int numWrong = 0;
int btnClicked;
int i = -1;
int t = 0;

Button lButton;
Button cButton;
Button rButton;
Button nextButton;
TextView questionTV;
TextView greetingTV;

public boolean getCorrect(int id) {
    if (id == answers[i]) {
        correct = true;
    } else {
    correct = false;
    }
    return correct;
}

OnClickListener clicker = new OnClickListener() {
    //TODO change to method to handle answers
                @Override
                public void onClick(View v) {

                    btnClicked = v.getId();

                    if (btnClicked == R.id.nextButton) { // next button

                        i += 1;

                        if (i <= questions.length) {
                        questionTV.setText(questions[i]);
                        lButton.setText(lChoices[i]);
                        cButton.setText(cChoices[i]);
                        rButton.setText(rChoices[i]);
                        nextButton.setText("Next question");
                        } else {
                            questionTV.setText("You got " + numCorrect + " right and " + numWrong + " wrong.");
                            lButton.setText("");
                            cButton.setText("");
                            rButton.setText("");
                        } // end of next button 

                    } else { // answer buttons
                    if (i > -1) { 
                        if (i <= questions.length) {
                    if (getCorrect(btnClicked) == true) {
                        numCorrect += 1;
                        Toast.makeText(getApplicationContext(), "Correct!", Toast.LENGTH_SHORT).show();
                    } else {
                        numWrong += 1;
                        Toast.makeText(getApplicationContext(), "Wrong!", Toast.LENGTH_SHORT).show();
                    }
                }
            } 
        }// end of answer buttons
                }   
            };
@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    greetingTV = (TextView)findViewById(R.id.greetingTV);
    questionTV = (TextView)findViewById(R.id.questionTV);
    lButton = (Button)findViewById(R.id.lButton);
    cButton = (Button)findViewById(R.id.cButton);
    rButton = (Button)findViewById(R.id.rButton);
    nextButton = (Button)findViewById(R.id.nextButton);

    //set on click listeners for buttons      

        questionTV.setText("Please click the start button to begin.");
        nextButton.setText("Start");

}
} 
```

错误日志：

```
E/AndroidRuntime(  620): FATAL EXCEPTION: main
E/AndroidRuntime(  620): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{matt.apps.quiz/matt.apps.quiz.QuizActivity}: java.lang.NullPointerException
E/AndroidRuntime(  620):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
E/AndroidRuntime(  620):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
E/AndroidRuntime(  620):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
E/AndroidRuntime(  620):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T02:55:24.363

你有一个 NullPointer（它在你的 logcat 中的 FATAL EXCEPTION 之后的第一行末尾这样说）。只需跟踪堆栈跟踪提到您的包名称的位置（现在它只显示到 android.app.ActivityThread） - 就像读取 Java 堆栈跟踪一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:51:33.847

那么 Matthagan，LogCat 有一个致命的例外。它是红色的。现在你要做的是首先总是在 fatal 之后打印至少前 4 行，这样人们就知道你得到了什么。如果您想查看确切的位置和您在 Eclipse 中的位置，请转到包含您的包裹名称的致命下方的第一行。单击此行，它将带您到确切的位置。

这就是它可能的样子。

1) quizButton = (Button)findViewById(R.id.launchQuiz); 返回 null 所以你得到一个空指针异常。这可能是因为您的布局未正确定义 launchQuiz。

2) 您可能没有为布局中的元素指定高度和宽度。

# c# - HtmlAgilityPack 是否能够在其 XPATH 选择器中使用正则表达式？

> ID：11729243
> 
> 赞同：3
> 
> 时间：2012-07-30T20:41:06.373
> 
> 标签：c#, regex, xpath, html-agility-pack

我希望能够创建一个节点集合，其中文本以一个单词开头，然后是一个数字。例如，给定以下内容：

```
<p>FINDTHIS 1</p>
<p>FINDTHIS SOMETEXT</p>
<p>FINDTHIS 2</p> 
```

我希望能够创建一个包含两个段落节点的集合：FINDTHIS 1 和 FINDTHIS 2。

一种可能的方法是创建一个 xpath 查询`//p[starts-with(., 'FINDTHIS ')]`，然后使用正则表达式来确定下一个字符是否是数字。如果我想获得返回上述条件的匹配列表，我可以创建一个正则表达式对象并测试集合中每个成员的文本。

有没有办法使用 HtmlAgilityPack 在选择器中直接使用正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:08:24.377

不，[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)目前不支持此功能。它支持[不支持正则表达式的 XPath 版本 1 查询](https://stackoverflow.com/a/405507/50776)。

也就是说，您必须按照您的建议进行操作，并使用 XPath 表达式选择要使用正则表达式的点，然后使用[`Where`扩展方法](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.where.aspx)根据[`RegEx`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)实例过滤掉适当的节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-21T11:26:08.950

它不是开箱即用的，但您可以轻松添加此功能。它在这里描述：[HtmlAgilityPack: xpath and regex](https://stackoverflow.com/questions/26744559/htmlagilitypack-xpath-and-regex)

# matlab - Matlab大矩阵乘法极限

> ID：11729245
> 
> 赞同：1
> 
> 时间：2012-07-30T20:41:10.833
> 
> 标签：matlab, matrix-multiplication

我正在尝试运行下面的代码，但是当我的矩阵超过 10,000 列时，Matlab 会冻结。我能做些什么来解决这个问题？

```
X = load('iris.mtx');
[n,d] = size(X);
%X=14000x128 double
%form RBF over the data:
nms = sum(X'.^2); %nms becomes 14000x1
%here is where the crash begins, for a smaller data size, like 10000x128, this part wont freeze
K = exp(-nms'*ones(1,n) -ones(n,1)*nms + 2*X*X'); 
```

这是我必须接受的限制吗？我需要能够将它用于比我目前使用的矩阵大得多的矩阵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:01:52.497

我会参考这个先前提出的关于 Matlab 矩阵[大小限制的问题： MATLAB 中](https://stackoverflow.com/questions/7328044/regarding-size-limitation-of-creating-a-matrix-in-matlab)的矩阵大小限制。

唯一的限制是您的硬件的限制。

不知道更多关于你需要做什么我不能建议进一步阅读。但是，随着矩阵的大小变得大于您的内存，此问题解决了优化操作的问题。[MATLAB 中超大矩阵的高效乘法](https://stackoverflow.com/questions/4420235/efficient-multiplication-of-very-large-matrices-in-matlab)

# c - 通过其 API（或扩展）识别 X11 屏幕上的分辨率是虚拟的

> ID：11729248
> 
> 赞同：3
> 
> 时间：2012-07-30T20:41:20.347
> 
> 标签：c, linux, x11

我正在开发一个可与不同 PC 硬件一起使用的 Linux 上的应用程序（具体显示）

此应用程序应将环境设置为允许的最高分辨率（通过函数 XRRSizes 从 libXrandr 获取）。

问题是：对于某些硬件，尝试设置为最高选项会创建一个虚拟桌面，即实际分辨率较小的桌面，您必须在屏幕边缘滚动鼠标才能访问所有内容。

有没有办法在 Xlib（或其中一个兄弟姐妹）中检测我正在使用虚拟分辨率（换句话说，重新调整大小没有按预期进行）？

对于这种情况的解决方法的提示也将不胜感激......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T16:06:12.400

阅读：[http ://cgit.freedesktop.org/xorg/proto/randrproto/tree/randrproto.txt](http://cgit.freedesktop.org/xorg/proto/randrproto/tree/randrproto.txt)

您需要了解“screen”、“output”和“crtc”之间的区别。您需要检查要使用的每个输出的可用模式，然后在 CRTC 上正确设置所需的模式，将 CRTC 与输出相关联，然后使屏幕尺寸适合您在每个输出上设置的值.

看看 xrandr 源代码的例子：[http ://cgit.freedesktop.org/xorg/app/xrandr/tree/xrandr.c](http://cgit.freedesktop.org/xorg/app/xrandr/tree/xrandr.c)

# python - 金字塔框架：Apache + mod_wsgi - MySQLdb 导入错误

> ID：11729256
> 
> 赞同：0
> 
> 时间：2012-07-30T20:41:51.183
> 
> 标签：python, apache, mod-wsgi, pyramid

这是我的第一个金字塔应用程序，我尝试了我能找到的任何解决方案，但没有一个对我有用。我不断收到内部服务器错误，错误日志显示：

```
Tue Jul 31 02:02:23 2012] [error] [client 127.0.0.1]     import MySQLdb as mysql
[Tue Jul 31 02:02:23 2012] [error] [client 127.0.0.1]   File "build/bdist.macosx-10.7-            intel/egg/MySQLdb/__init__.py", line 19, in <module>
[Tue Jul 31 02:02:23 2012] [error] [client 127.0.0.1]   File "build/bdist.macosx-10.7-intel/egg/_mysql.py", line 7, in <module>
[Tue Jul 31 02:02:23 2012] [error] [client 127.0.0.1]   File "build/bdist.macosx-10.7-intel/egg/_mysql.py", line 6, in __bootstrap__
[Tue Jul 31 02:02:23 2012] [error] [client 127.0.0.1] ImportError: dlopen(/Users/anupamtulsyan/.python-eggs/MySQL_python-1.2.3-py2.7-macosx-10.7-intel.egg-tmp/_mysql.so, 2): Library not loaded: libmysqlclient.18.dylib
[Tue Jul 31 02:02:23 2012] [error] [client 127.0.0.1]   Referenced from: /Users/anupamtulsyan/.python-eggs/MySQL_python-1.2.3-py2.7-macosx-10.7-intel.egg-tmp/_mysql.so
[Tue Jul 31 02:02:23 2012] [error] [client 127.0.0.1]   Reason: image not found
[Tue Jul 31 02:02:24 2012] [error] [client 127.0.0.1] File does not exist: /opt/local/apache2/htdocs/favicon.ico 
```

我的mysql和python都是64位安装的。文件 'libmysqlclient.18.dylib' 存在于 /usr/local/mysql/lib 中。我可以在使用以下应用程序服务时导入 MySQLdb：../bin/pserver development.ini 但是当通过 mod_wsgi 运行时，上述错误不断出现。请有人帮忙！自2天以来，我一直坚持这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T07:35:28.380

看起来它`libmysqlclient.18.dylib`不在 Apache 的路径上。因此，您可能需要将其设置为`/usr/sbin/envvars`：

```
DYLD_LIBRARY_PATH="/usr/lib:/usr/local/mysql/lib:$DYLD_LIBRARY_PATH" 
```

取决于你的mysql lib在哪里，然后重新启动apache。

我认为您也可以`DYLD_RUN_PATH`在构建 MySQLdb 之前进行设置，它将在 _mysql.so 中使用该路径——无需设置`DYLD_LIBRARY_PATH`

# web-services - 调试在本地机器上运行的 Web 服务？

> ID：11729260
> 
> 赞同：1
> 
> 时间：2012-07-30T20:42:09.723
> 
> 标签：web-services, iis-7, powerbuilder

我正在使用 PowerBuilder Classic 12.1 将 .NET Web 服务目标部署到在我的本地计算机上运行的 IIS 7。我希望能够调试它。Sybase 的文档说我应该可以。但是当我运行调试器时，它会显示“附加到 ASP.NET 工作者”和“剩余时间：20 秒”。它倒计时到 0，然后我看到“附加到 ASP.NET 工作进程失败”。

我以管理员身份运行 PowerBuilder，所以我认为这不是问题所在。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T03:17:11.083

打开您用于部署的**项目对象。**如果您有多个项目对象，则右键单击树视图绘制器中的目标，然后单击首选项以打开一个对话框，让您选择将用于部署的目标对象。选择设置**了 DEBUG 符号**并设置为**debug build**的那个。

我很幸运地调试了 IIS 托管和自托管的 PB Web 服务。

我还在 PowerBuilder 帮助文件中为您找到了这个：

**使用调试符号**

如果您在部署为 Web 服务的非可视对象的代码中使用了 DEBUG 条件编译符号，并且希望此代码运行，则必须确保在部署项目之前选中启用 DEBUG 符号复选框。如果您计划调试程序集或 Web 服务，则应确保将项目部署为调试版本。

> ** 在 13 年 1 月 26 日在此处添加了其他详细信息
> 
> 这篇博客文章将帮助您在 PowerBuilder.NET 中进行 WCF 调试。
> 
> [测试和调试 PowerBuilder.NET WCF Web 服务](http://www.displacedguy.com/tech/debug-powerbuilder-wcf-web-services-testing)

# javascript - data-id 是否违反关注点分离

> ID：11729262
> 
> 赞同：1
> 
> 时间：2012-07-30T20:42:21.853
> 
> 标签：javascript, model-view-controller, separation-of-concerns

我的问题很简单：

在标记中添加“data-”符号是否违反了 MVC 的关注点分离？

例子： `<div id="myDiv" data-id="34"></div>`

或者如果您使用的是模板系统，那么 `<div id="myDiv" data-id="{{myPrimaryKey}}"></div>`

我的同事之间对此有一些争论。我的观点是它确实违反了 SoC，因为您将数据嵌入到 HTML 标记中（也就是您的视图）。似乎您的标记中的任何内容都应该只关注实际的显示/格式化数据。但也许我太纯粹了？

背景：引发本次讨论的项目是一个纯 JavaScript 客户端，以 RESTful Web 服务作为后端。通过对 Web 服务的 AJAX 调用检索数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:47:49.617

你太纯粹了。这就是`data-`制作这些东西的目的。有时您需要使用用户数据注释节点，以便您可以制作 URL 和东西来查询服务器或为了 JavaScript 的好处。

# sql-server - 无法绑定多部分标识符

> ID：11729267
> 
> 赞同：-1
> 
> 时间：2012-07-30T20:42:50.397
> 
> 标签：sql-server

我在不同的地方遇到了这个错误，我不知道为什么，所以我想知道这里是否有人可能有任何线索。这是sql。

```
select Intranet.dbo.tblPeople.FirstName,
     Intranet.dbo.tblPeople.LastName,
     Intranet.dbo.tblPeople.CellPhone
     tblActivities.OnSiteSupervisorID,
     tblActivities.OffSiteSupervisorID,
     tblProjects.projectid,
     tblVehicleData.Description AS vehicle,
     tblVehicleData.VehicleID,
    tblVehicleData.ActivityID as ActivityID, 
     tblProjects.ProjectName,
     tblActivities.numPersons,
     tblActivities.Description,
     tblActivities.ChannelNumber,
     tblActivities.StartDate,
     tblActivities.EndDate,
     tblActivities.estimatedExitTime,
     tblLocations.locationname,
from Intranet.dbo.tblPeople,
     smartroadmangement.dbo.tblVehicleData,
     smartroadmangement.dbo.tblProjects,
     smartroadmangement.dbo.tblActivities 
left join smartroadmangement.dbo.tblLocations 
    on smartroadmangement.dbo.tblActivities.locationId = smartroadmangement.dbo.tblLocations.locationid
left join Intranet.dbo.tblPeople as people 
    on people.PersonID = smartroadmangement.dbo.tblActivities.OnSiteSupervisorID
left join tblActivities as Activities 
    on Activities.ActivityID = tblVehicleData.ActivityID
left join tblActivities as Activitiez 
    on Activitiez.ProjectID = tblProjects.ProjectID 
WHERE (smartroadmangement.dbo.tblActivities.StartDate Between '2012-07-15 14:17:09' and '2012-07-15 20:17:09') 
    AND (smartroadmangement.dbo.tblActivities.EndDate Between '2012-07-15 20:17:09'and '2012-07-15 23:17:09') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T20:51:19.967

我的第一个建议是在所有 JOIN 上使用正确的 JOIN 语法。您正在使用逗号和 JOIN 语法加入，这使得调试查询变得困难。

您的评论表明您在这里收到错误：

```
left join tblActivities as Activities 
    on Activities.ActivityID = tblVehicleData.ActivityID
left join tblActivities as Activitiez 
    on Activitiez.ProjectID = tblProjects.ProjectID 
```

该表实际上`smartroadmangement.dbo.tblActivities`在您的查询中吗？

根据您在下面的评论，您可能想尝试：

```
left join smartroadmangement.dbo.tblActivities as Activities 
    on Activities.ActivityID = tblVehicleData.ActivityID
left join smartroadmangement.dbo.tblActivities as Activitiez 
    on Activitiez.ProjectID = tblProjects.ProjectID 
```

这是一个使用正确的 JOIN 语法更新的查询：

```
select ppl.FirstName,
     ppl.LastName,
     ppl.CellPhone
     a1.OnSiteSupervisorID,
     a1.OffSiteSupervisorID,
     tblProjects.projectid,
     v.Description AS vehicle,
     v.VehicleID,
     v.ActivityID as ActivityID, 
     tblProjects.ProjectName,
     a1.numPersons,
     a1.Description,
     a1.ChannelNumber,
     a1.StartDate,
     a1.EndDate,
     a1.estimatedExitTime,
     l.locationname,
from Intranet.dbo.tblPeople ppl
left join smartroadmangement.dbo.tblActivities a1
    on ppl.PersonID = a1.OnSiteSupervisorID
left join smartroadmangement.dbo.tblLocations l
    on a1.locationId = l.locationid 
left join smartroadmangement.dbo.tblVehicleData v
    on a1.ActivityID = v.ActivityID
left join smartroadmangement.dbo.tblProjects pj 
    on a1.ProjectID = pj.ProjectID 
WHERE (a1.StartDate Between '2012-07-15 14:17:09' and '2012-07-15 20:17:09') 
    AND (a1.EndDate Between '2012-07-15 20:17:09'and '2012-07-15 23:17:09') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:48:39.073

您使用的是四部分名称。您是否设置了名为 smartroadmangement 的链接服务器/别名？

# c - tcp（内核）绕过是如何实现的？

> ID：11729271
> 
> 赞同：6
> 
> 时间：2012-07-30T20:43:16.263
> 
> 标签：c, networking, linux-kernel, rdma

假设我想避免 linux 内核在处理传入数据包时的开销，而是想直接从用户空间获取数据包。我用谷歌搜索了一下，似乎需要做的就是使用带有一些套接字选项的原始套接字。是这样吗？还是比这更复杂？如果是这样，我可以用谷歌搜索或参考什么来实现这样的东西？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-30T21:50:07.347

有许多技术可以通过内核绕过进行联网。

首先，如果您要向同一台机器上的另一个进程发送消息，您可以通过共享内存区域来执行此操作，而无需跳转到内核。

在不涉及内核的情况下通过网络传递数据包变得更加有趣，并且涉及可以直接访问用户内存的专用硬件。这个想法被称为 RDMA。

这是它可以工作的一种方式（这就是 InfiniBand 硬件所做的）。应用程序向 RDMA 硬件注册一个内存缓冲区。该缓冲区固定在物理内存中，因为将其换出显然会很糟糕（因为硬件将继续写入物理内存区域）。控制区域也映射到用户空间内存中。当应用程序准备好使用缓冲区发送或接收消息时，它会向控制区域写入命令。硬件从一端的注册缓冲区中获取数据，并将其放入另一端的另一个注册缓冲区中。

显然，这太低级了，因此有一些抽象可以使 RDMA 硬件的编程更容易。OFED 动词就是这样一种抽象。

InfiniBand 软件堆栈有一个额外的有趣之处：用于与现有应用程序兼容的套接字直接协议 (SDP)。它通过插入将标准套接字 API 调用转换为 IB 动词的 LD_PRELOAD 垫片来工作。

InfiniBand 正是我最熟悉的。从程序员的角度来看，RoCE/iWARP 硬件非常相似，但使用的传输方式与 InfiniBand 不同（TCP 在 iWarp 中使用卸载引擎，在 RoCE 中使用以太网）。RDMA 还有其他方法（例如，Quadrics）。

# android - 在 Android App 中管理图标 PNG 文件

> ID：11729273
> 
> 赞同：1
> 
> 时间：2012-07-30T20:43:41.483
> 
> 标签：android, android-resources

我正在开发一个创建菜单的应用程序，每个菜单项都有自己的图标。每个菜单项都有太多的 PNG 文件。将来我将从 WebService 更新菜单项，这些菜单项将添加到这些 png 文件中。

存储此数据（png 文件）的最有效方法是什么。我不想将它保存在可绘制文件夹中，因为我在发布我的应用程序后无法更新可绘制文件夹的内容。如果我将它存储在外部存储器上，我该如何实现？我应该在哪里复制这些 png 文件并将它们用作我的代码中的资源。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:03:34.200

将它们作为 BLOB 存储在 sqLite 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:15:56.497

[您可以使用此http://developer.android.com/reference/android/content/Context.html#openFileOutput(java.lang.String](http://developer.android.com/reference/android/content/Context.html#openFileOutput(java.lang.String) , int) 方法写入分配给您的应用程序的私有空间，并与它的兄弟一起读回。

```
InputStream is = your input stream
OutputStream os = mContext.openFileOutput("image.png",Context.MODE_PRIVATE);

Utils.copyStream(is,os);  //Your own steam copy here

is.close;
os.close; 
```

# php - 偶发错误 >>> 为 foreach() 提供的参数无效

> ID：11729274
> 
> 赞同：0
> 
> 时间：2012-07-30T20:43:43.060
> 
> 标签：php, mysql

我正在开发库存控制系统，我想编辑分配给商店的用户。可以将用户分配到一个或多个商店。我正在使用多项选择选项。我的问题是，在编辑用户页面中，我想将分配给商店的用户显示为选定的。但是，当我要这样做时，仅当未为所有商店分配用户时，我才收到此错误（***第 194 行为 foreach() 提供的参数无效） 。***

例如，有 3 家商店，分别称为 A、B 和 C

1.）如果我要编辑分配给所有三个商店的用户，我不会收到任何错误。
2.）如果我要编辑分配到 2 家商店的用户，我会出现两次上述错误。
3.）如果我要编辑只分配给一家商店的用户，我只会遇到一次上述错误。

请帮我纠正这个问题。

这是我的代码

```
$emp_id = $_GET['emp_id'];
$result1 = mysql_query("Select *
                            from members
                            JOIN store_employee on members.emp_id = store_employee.emp_id
                            JOIN stores on store_employee.store_id = stores.store_id
                            where members.emp_id=$emp_id")
               or die(mysql_error());
$query="SELECT * FROM stores";
        $dropdown = "<select name='store_id[]' multiple='multiple'  style='height:80px;' size='5' id='store'>";
        $result2 = mysql_query ($query);
        while($row2 = mysql_fetch_array($result2)) 
        {

  $dropdown .= "\r\n<option value='{$row2['store_id']}'";

            foreach(mysql_fetch_array($result1) as $row1)     //this is line 194
              {
                 if(($row1['store_id'])==($row2['store_id']))
                  {
                      $dropdown .=" selected='selected'";
                  }

             }
  $dropdown .= ">{$row2['store_name']}</option>";
        }
        $dropdown .= "\r\n</select>";
        echo $dropdown; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:49:09.953

`mysql_fetch_array`绝对不会以这种方式使用，特别是考虑到它是一个函数而不是数组，即使它返回一个。

你想要的是这样的：

```
$user_stores;
while ($rows = mysql_fetch_array($result1)) {
    $user_stores[] = $rows;
}
while ($rows2...
    //...
    foreach ($user_stores as $row1) {
        //...
    }
} 
```

如果你`mysql_fetch_array`在另一个里面做`mysql_fetch_array`，你最终可以传递一个值，`$row1`这个值可以匹配后面的条目`$row2`。这应该有助于解决问题。

此外，`mysql_*`功能很快就会被弃用。不要在新代码中使用它们（实际上，您应该考虑从*所有*代码中删除它们）。使用`mysqli`或`PDO`代替。如果你是一个懒惰的流浪汉（像我一样），你可以考虑使用's 的程序风格，这与原始功能`mysqli`几乎相同。`mysql_*`

# android - 将 CheckBoxPreference 值更改为 false

> ID：11729275
> 
> 赞同：0
> 
> 时间：2012-07-30T20:43:43.997
> 
> 标签：android, checkbox, sharedpreferences, preference

我目前正在做一个 Android 安全应用程序，并且`CheckboxPreference`在满足某些条件后我试图取消选中。所以我试图通过这样做来取消选中复选框，默认情况下`CheckBoxPreference`它实际上`false`是未选中的。

喜好：

```
<CheckBoxPreference
            android:id="@+id/isPhysicalTheftEnabled"
            android:key="isPhysicalTheftEnabled"
            android:title="Enable Physical Theft Protection"
            android:summary="Select to enable the Physical Theft Protection"
            android:defaultValue="false"/>
<Preference android:key="physicaltheft" android:title="Set Physical Theft Protection Password" android:dependency="isPhysicalTheftEnabled"></Preference> 
```

`SharedPreferences`里面`Activity`：

```
 SharedPreferences sp = getSharedPreferences("isPhysicalTheftEnabled", MODE_WORLD_READABLE);
    SharedPreferences.Editor ed = sp.edit();
    ed.putBoolean("isPhysicalTheftEnabled", false);
    ed.commit(); 
```

`CheckBoxPreference`即使我这样做了，也不会取消。知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:02:34.493

我真的不明白你试图完成什么，但我猜你得到了错误的 SharedPrefence 文件。

试着打电话

```
SharedPreferences myPrefs = PreferenceManager.getDefaultSharedPreferences(myContext); 
```

或检查文件名的名称，查看 data/data/yourpackage/shared_prefs

您写入一个名为“isPhysicalTheftEnabled”的首选项文件，我猜这不一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:48:42.723

嗯，您在共享首选项中添加了一个“错误”，而没有触摸复选框首选项视图......如果您在某处存储了参考，那就太好了

```
 CheckBoxPreference cbp = (CheckBoxPreference) findViewById(R.id.isPhysicalTheftEnabled);
  SharedPreferences sp = getSharedPreferences("isPhysicalTheftEnabled", MODE_WORLD_READABLE);
  SharedPreferences.Editor ed = sp.edit();
  ed.putBoolean("isPhysicalTheftEnabled", cbp.getChecked());  //puts the real value in here
  ed.commit();
  cbp.setChecked(false);    //turn it off as you intended
  cbp.postInvalidate();    //refresh the view 
```

setChecked() 可能必须从 Handler 或通过 runOnUIThread() 调用

# c# - 使用 c# 从另一个程序关闭消息框

> ID：11729281
> 
> 赞同：9
> 
> 时间：2012-07-30T20:44:30.683
> 
> 标签：c#

这是我的问题：我们的产品有一个自动构建过程。在编译其中一个 VB6 项目期间，会弹出一个消息框，要求用户单击“确定”，然后才能继续。作为一个自动化过程，这是一件坏事，因为它最终可能会坐在那里几个小时不动，直到有人点击确定。我们已经查看了 VB6 代码来尝试抑制消息框，但现在似乎没有人知道如何去做。因此，作为临时修复，我正在开发一个将在后台运行的程序，当消息框弹出时，将其关闭。到目前为止，我能够检测到消息何时弹出，但我似乎无法找到正确关闭它的功能。该程序是用 C# 编写的，我正在使用 user32.dll 中的 FindWindow 函数来获取指向窗口的指针。到目前为止，我 我试过 closeWindow、endDialog 和 postMessage 来尝试关闭它，但它们似乎都不起作用。closeWindow 只是将其最小化， endDialog 出现错误的内存异常，而 postMessage 什么也不做。有谁知道可以解决这个问题的任何其他功能，或任何其他摆脱此消息的方法？提前致谢。

这是我目前拥有的代码：

```
class Program
{
     [DllImport("user32.dll", SetLastError = true)]
     private static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

     static void Main(string[] args)
     {
         IntPtr window = FindWindow(null, "Location Browser Error");
         while(window != IntPtr.Zero)
         {
             Console.WriteLine("Window found, closing...");

             //use some function to close the window    

             window = IntPtr.Zero;                  
         }    
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-30T20:52:04.500

你必须找到窗口，这是第一步。之后您可以`SC_CLOSE`使用 发送消息`SendMessage`。

### 样本

```
[DllImport("user32.dll")]
Public static extern int SendMessage(int hWnd,uint Msg,int wParam,int lParam);
public const int WM_SYSCOMMAND = 0x0112;
public const int SC_CLOSE = 0xF060;

IntPtr window = FindWindow(null, "Location Browser Error");
if (window != IntPtr.Zero)
{
   Console.WriteLine("Window found, closing...");

   SendMessage((int) window, WM_SYSCOMMAND, SC_CLOSE, 0);  
} 
```

### 更多信息

*   [使用 WIN API 查找并关闭窗口](http://www.c-sharpcorner.com/uploadfile/mrmohankumar/find-and-close-the-window-using-win-api/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:51:38.717

当您找到消息框时，请尝试`WM_NOTIFY`使用`BN_CLICKED`类型和确定按钮的 ID 发送它。

# .htaccess - htaccess 每次都带我回到索引

> ID：11729282
> 
> 赞同：0
> 
> 时间：2012-07-30T20:44:39.420
> 
> 标签：.htaccess

我已经设置了 htaccess，但它每次都会带我回到我的索引文件：

```
RewriteEngine On

RewriteRule ^en/([a-zA-Z0-9-]+)/?$ en/index.php [L,QSA]

RewriteRule ^en/search/([a-zA-Z0-9-]+)/?$ /en/search/search.php?search_name=$1&mydropdown=$2 [L,QSA] 
```

我的网址是：

```
**getting data from Index.php**
http://myweb.com/en/?pno=2 
http://myweb.com/en/?pno=3
http://myweb.com/en/?pno=4 ect..

**getting data from search.php**
http://myweb.com/en/search/?search_name=white&mydropdown=All+Categories
http://myweb.com/en/search/?search_name=pink&mydropdown=All+Categories
http://myweb.com/en/search/?search_name=blue&mydropdown=All+Categories ect.... 
```

# xml - Eclipse XML 目录：添加导入或包含另一个 XSD 的 XSD

> ID：11729291
> 
> 赞同：3
> 
> 时间：2012-07-30T20:45:06.523
> 
> 标签：xml, eclipse, validation, xsd, catalog

我想将一些 XSD 文件添加到我的 Eclipse XML 目录中，以便它可以验证 XML 文件。不幸的是，XSD 包含并导入了其他 XSD，反过来它们也导入了其他 XSD 文件。

第一个 XSD，BPMN20.xsd：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema elementFormDefault="qualified" attributeFormDefault="unqualified"   
    xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
    targetNamespace="http://www.omg.org/spec/BPMN/20100524/MODEL">

    <xsd:import namespace="http://www.omg.org/spec/BPMN/20100524/DI" schemaLocation="BPMNDI.xsd"/>
    <xsd:include schemaLocation="Semantic.xsd"/>
... 
```

第二个 XSD，Semantic.xsd：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema elementFormDefault="qualified" attributeFormDefault="unqualified"
    xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    targetNamespace="http://www.omg.org/spec/BPMN/20100524/MODEL">

    <xsd:element name="activity" type="tActivity"/>
    <xsd:complexType name="tActivity" abstract="true">
... 
```

Eclipse 立即告诉我无法注册第二个 XSD，因为它使用的名称空间`http://www.omg.org/spec/BPMN/20100524/MODEL`与我已经注册了第一个 XSD 的名称空间相同。

是否可以使用 Eclipse 解决 XSD 导入/包含其他 XSD 的问题？我看到很多 XSD 文件引用了其他文件，因此拆分类型或属性定义并将它们保存在不同的文件中似乎很常见。

谢谢乔伊森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:31:31.770

您应该避免让不同的 xsd 文件声明相同的命名空间。命名空间是一个 URI，因此它应该标识单个资源。

查看本教程以了解如何使用/定义命名空间：[http ://www.liquid-technologies.com/Tutorials/XmlSchemas/XsdTutorial_04.aspx](http://www.liquid-technologies.com/Tutorials/XmlSchemas/XsdTutorial_04.aspx)

# entity-framework - 如何从 EF5.0 模型更新数据库架构首先更改？

> ID：11729293
> 
> 赞同：3
> 
> 时间：2012-07-30T20:45:21.180
> 
> 标签：entity-framework, ef-model-first

我将 VS2012 和 EF 5.0 与模型优先方法一起使用。我想知道是否有任何好的方法可以生成增量 DDL 来更新模型更改，而不会删除所有表并丢失我已经拥有的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-20T12:50:42.760

我喜欢在 Visual Studio 中使用 SQL Server 数据项目来使我的数据与数据库保持同步——它就像一个迷你 SQL Server 架构存储。

基本上我们在这里所做的是使用模型的 DDL 脚本更新数据项目的模式，然后比较这些更改并将其推送到数据库。请务必先生成模型的 DDL 脚本。

1.  创建一个新的 SQL Server 数据库项目
2.  右键单击数据项目并从数据库服务器导入现有架构
3.  右键单击数据项目并从模型优先项目中导入生成的 DDL 脚本。
4.  右键单击数据项目并对项目与数据库服务器进行架构比较
5.  基于此架构比较更新数据库（单击更新）

每次您想更新数据库时，只需生成并导入模型的 sql 脚本、比较和更新。它需要几个步骤，但效果很好。

# wpf - 尝试将 Winforms 数据源转换为 WPF 可绑定 (ObservableCollection) 类型

> ID：11729295
> 
> 赞同：0
> 
> 时间：2012-07-30T20:45:30.070
> 
> 标签：wpf, winforms, data-binding, dictionary, observablecollection

我正在尝试将 Winforms 应用程序转换为 WPF 应用程序并具有以下代码：

```
ObservableCollection<Dictionary<string, string>> PlatypusDict =
    new ObservableCollection<Dictionary<string, string>>();
. . .
PlatypusDict = PlatypusData.getPlatypusAccountsForCentury(Convert.ToInt32(labelPlatypusName.Tag)); 
```

...这给了我这个错误消息：

*无法将类型“System.Collections.Generic.Dictionary”隐式转换为“System.Collections.ObjectModel.ObservableCollection>”*

...这没有任何帮助：

```
PlatypusDict = (System.Collections.ObjectModel.ObservableCollection<System.Collections.Generic.Dictionary<string, string>>)PlatypusData.getPlatypusAccountsForCentury(Convert.ToInt32(labelPlatypusName.Tag)); 
```

我真的不需要使用 ObservableCollection 将我的 ListView 绑定到，或者这里的解决方法/正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:08:41.070

您可以将 Dictionary 绑定到 ListView。

例子：

XAML 文件：

```
<Window x:Class="BindingDictionaryLB.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <ListView ItemsSource="{Binding}">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock Margin="2" Text="{Binding Key}" />
                        <TextBlock Margin="2" Text="{Binding Value}" />
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>    
    </Grid>
</Window> 
```

代码隐藏文件：

```
using System.Collections.Generic;
using System.Windows;

namespace BindingDictionaryLB
{    
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            Dictionary<string, string> _source = new Dictionary<string, string>();
            for (int i = 0; i < 5; i++)
            {
                _source.Add("key_" + i, "value_" + i);
            }

            this.DataContext = _source;
        }
    }
} 
```

# php - php自定义json_decode，有些值不用双引号括起来

> ID：11729298
> 
> 赞同：0
> 
> 时间：2012-07-30T20:45:51.943
> 
> 标签：php, json

我们的服务器没有最新的 PHP 版本，因此我无法使用 json_decode。我尝试使用 PEAR 之一： http: [//mike.teczno.com/JSON/JSON.phps](http://mike.teczno.com/JSON/JSON.phps)，但数据集很大，并且出现 30 秒超时错误 - 无论如何，30 秒是不可接受的运行时间。

我偶然发现了这个：[http](http://www.php.net/manual/en/function.json-decode.php#108552) ://www.php.net/manual/en/function.json-decode.php#108552 它几乎可以工作。

我的 JSON 是这种形式：

```
[{"number1":3,"number2":5,"time":"Jul 30, 2012 1:05:07 PM","value1":"aa","value2":"bb"}] 
```

如您所见，“number1”和“number2”字段的值没有用双引号括起来，这破坏了自定义 json_decode。

有谁知道如何修改或提供可以克服这个问题的 json_decode ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:36:00.413

正如评论中所建议的，我使用了[http://include-once.org/p/upgradephp](http://include-once.org/p/upgradephp)这似乎是一个很好的 json_decode() 后备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:56:20.707

添加你的PHP：

```
header("Content-type: application/json"); 
```

在您的 javascript 中，使用：

```
// Fetch the JSON text
var jsonFetch = $.ajax({
   url:"http://localhost/yourphp.php",
   async:false,
   cache:false,
}).responseText;
// Parse it so it will more formatted the right way
jsonData = JSON.parse(jsonFetch); 
```

# jquery - 在 JQuery 中结合 parent() 和 children() 选择器

> ID：11729303
> 
> 赞同：0
> 
> 时间：2012-07-30T20:46:25.530
> 
> 标签：jquery

我目前有以下系列的 JQuery 选择器：

`$(this).parent().parent().children('a').children('img').attr('src')`

它工作得很好，但有没有更紧凑的方法来做到这一点？

**更新**

这是我的 HTML 结构：

```
<div class="preview">
    <a><img src="#"></a>
    <div class="info">
        <div class="item">This is where we start.</div>
    <div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:53:22.820

考虑到您的初始条件，这将起作用，无论具体的标记如何：'

```
$(this).parent().siblings('a').children('img').attr('src') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T20:52:57.967

您可以执行以下操作：

```
$(this).closest('.preview').find('a img').attr('src') 
```

[最近的文档](http://api.jquery.com/find/)| [查找文档](http://api.jquery.com/find/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T20:55:02.970

使用该 HTML，一种方法是：

```
$(this).parents(".preview").find("a img").attr("src"); 
```

您还可以轻松地：

```
$(this).parent().prev().children("img").attr("src"); 
```

虽然，如果您可以使用 HTML5，我的建议是在开始元素 div 中添加一个 data-ref，如下所示：

```
<div class="item" data-ref="#imgID-1">This is where we start.</div>
// and of course add an id to the img
<img id="imgID-1" src="blah.png" /> 
```

然后你可以很容易地回忆为：

```
var source = $($(this).data("ref")).attr("src"); 
```

# iphone-sdk-3.0 - 我在哪里可以找到 Xcode 3.1.4 的 iPhone 模拟器

> ID：11729311
> 
> 赞同：2
> 
> 时间：2012-07-30T20:47:20.820
> 
> 标签：iphone-sdk-3.0, development-environment, xcode3.2

我的孩子想学习在他们目前运行操作系统版本 10.5.8 的 MacBook 上编写应用程序。

我已经下载了 Xcode 3.1.4，但它似乎没有 iPhone 模拟器。

有谁知道我在哪里可以找到这个？

（我应该为这个问题使用他们更好的标签吗？）

谢谢。

（更新：我从 Apple 下载了“xcode 3.2.6 & ios sdk 4.3”dmg 文件，希望只访问“iPhone 模拟器”，但反复尝试在我的 OS10.5.8 Macbook 上打开 .dmg 文件会导致完成，“黑屏”崩溃。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:21:13.857

你确定模拟器不包括在内？要记住的一件事是它不会在您的应用程序文件夹中与 xcode 一起显示。

要使用模拟器，您必须通过按界面左上角的播放按钮从 xcode 启动它。如果您已经在 iPhone/iPod/iPad 上使用过 xcode，请确保从播放和停止按钮旁边的下拉列表中选择模拟器（按住以更改选择的内容）。

如果您想确保可以在没有 xcode 的情况下访问模拟器，请按照上述说明启动模拟器，然后右键单击（或 ctrl 单击）模拟器的图标，然后从选项菜单中选择保持停靠。

希望以上内容可以帮助您解决问题。如果 xcode 确实没有附带模拟器，那么最好的选择是卸载 xcode（在备份任何项目后）并尝试全新安装。还可以尝试查看 Apple 开发中心 (https://developer.apple.com/devcenter/ios/index.action) 以获取有关 xcode 和模拟器的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:09:05.117

我真的很抱歉，因为这不是你的问题。但如果我是你，我想鼓励他们从 Android 开始。对我来说，更喜欢开放平台。除此之外，与 C/C++ 相比，Java 是一种强大/动态的语言。

*   [安卓开发者网站](http://developer.android.com/index.html)
*   [Eclipse IDE](http://eclipse.org/)
*   [安卓 SDK](http://developer.android.com/sdk/index.html)
*   [Eclipse 的 ADT 插件](http://developer.android.com/tools/sdk/eclipse-adt.html)
*   [API 指南](http://developer.android.com/guide/components/index.html)
*   [培训视频](http://developer.android.com/develop/index.html)

希望他们会喜欢:-)

# virtualenv - 瓶子：不能导入路由

> ID：11729318
> 
> 赞同：6
> 
> 时间：2012-07-30T20:47:52.083
> 
> 标签：virtualenv, bottle, python-3.2

我收到以下错误：

```
(virtualenv)[chirdeep@fedora-desktop ~]$ python programs/python/myrestapi.py 
Traceback (most recent call last):
 File "programs/python/myrestapi.py", line 2, in <module>
import bottle
 File "/home/chirdeep/programs/python/bottle.py", line 1, in <module>
 from bottle import route, run
 ImportError: cannot import name route 
```

我有 python 2.7.3 和 3.2.3。(virtualenv) 指向 python3，我在这里安装了瓶子，它可以在 site-packges 下找到。

激活环境后，我可以在 python 控制台下导入瓶子。

```
(virtualenv)[chirdeep@fedora-desktop ~]$ python
Python 3.2.3 (default, Jul 26 2012, 22:03:19) 
[GCC 4.7.0 20120507 (Red Hat 4.7.0-5)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import bottle
>>> 
```

任何帮助将不胜感激，让我发疯。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-10-11T08:40:16.683

您自己的 Python 文件称为`bottle.py`：

```
File "/home/chirdeep/programs/python/bottle.py", line 1, in <module> 
```

所以*真实* `bottle.py`的被你自己的文件所掩盖。由于您自己的文件不*包含*and `route`，`run`因此失败：

```
from bottle import route, run 
```

重命名您自己的文件，也许是`mybottle.py`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-11T08:36:39.190

我猜这个问题与你的程序的名称空间与瓶子的冲突有关。即：Python 正在尝试从 /home/chirdeep/programs/python/bottle.py 而不是 site-packages 中的 bottle.py 导入路由。

尝试重命名您的程序文件。

# python - python多输入选择

> ID：11729319
> 
> 赞同：0
> 
> 时间：2012-07-30T20:47:52.703
> 
> 标签：python

我有一个带有多个输入选择的 html 表单。如何使用 python 抓取选择所有项目？

```
<select name="id_project[]" multiple="">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:31:17.193

您可以像 grab.submit(extra_post={"id_project[]":"1,2,3"}) 一样手动选择它。另请参阅问题[https://bitbucket.org/lorien/grab/issue/40/multipleselectoptions-form_fields](https://bitbucket.org/lorien/grab/issue/40/multipleselectoptions-form_fields)

# node.js - Express - 通过直接 POST 上传文件

> ID：11729322
> 
> 赞同：0
> 
> 时间：2012-07-30T20:48:05.667
> 
> 标签：node.js, express

我正在寻求实现类似于 Imgur 的上传功能的 API：http: [//api.imgur.com/resources_anon#upload](http://api.imgur.com/resources_anon#upload)。换句话说，用户应该能够在`/upload`不使用表单的情况下通过使用图像文件 POST 来上传图像，即通过 AJAX 而无需设置`Content-Type`标题（就像 Imgur 一样）。但是，我能找到的唯一示例如下：[https ://github.com/visionmedia/express/blob/master/examples/multipart/app.js](https://github.com/visionmedia/express/blob/master/examples/multipart/app.js)

问题：我应该如何实现这样的 API？我担心的是 Express 不会将该命令解释为`multipart/form-data`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:36:57.140

假设客户端正确设置了上传请求`Content-Type`（如果用于上传的表单具有正确的`enctype`属性`express.bodyParser()`，它将正确设置）并且您使用 express 将正确处理所有内容。

# c# - TryParse 模式/具有只读字段的非默认构造函数

> ID：11729329
> 
> 赞同：2
> 
> 时间：2012-07-30T20:48:44.347
> 
> 标签：c#

人们通常如何使用 TryParse 模式实现解析构造函数，当他们具有只读支持字段和非默认构造函数时，通常会进行解析？

下面是我正在谈论的一个人为的例子，以及我已经确定的模式，但它看起来很笨重。实际上，某些类型具有大量属性。当然，我可以创建一个采用*n* ref 参数的方法，进行解析，然后以这种方式将它们连接起来，但是在某些情况下拥有一个带有 15 个参数的方法也是一种痛苦/难闻的事情。

两个构造函数的想法，加上必须将 try 解析的结果复制到解析构造函数中的只读字段，这有点难闻。

其他人有更好的模式吗？

**编辑：提供更多上下文**

我正在尝试做的是重构一个大型（ish）代码库，它有许多类型，如下例所示，其中解析了提供给构造函数的字符串参数。现在，所有的代码都使用了构造函数解析，而这个解析的逻辑都是在构造函数中完成的。混乱和麻烦。

我想做的第一件事是将这段代码从构造函数中移出，进入工厂方法（TryParse），但保留构造函数签名，因此我对代码库没有太多更改。从长远来看，有时间可以做一些更好的事情。

目前，困难在于保持现有代码的构造签名完整，同时允许新代码使用 TryParse 模式，并保留只读字段。如果我放宽只读字段，整个过程会更容易，但我宁愿不这样做。

```
public class Point
{
   private readonly float x, y;
   public float X { get { return x; } }
   public float Y { get { return y; } }

   public Point(string s)
   {
      Point result;

      if (TryParse(s, out result))
      {
         this.x = result.x;
         this.y = result.y;
      }
      else
      {
         throw new System.ArgumentException("cant parse");
      }
   }

   private Point(float x,float y) // for the sake of the example, this wouldnt have any use as public
   {
      this.x = x;
      this.y = y;
   }

   public static bool TryParse(string s,out Point result)
   {
      var numbers = s.Split(',');

      if(numbers.Length == 2)
      {
         result = new Point(float.Parse(numbers[0]),float.Parse(numbers[0]));
         return true;
      }
      else
      {
         result = null;
         return false;
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T20:51:58.677

Your current approach doesn't really work - because `float.Parse` can throw an exception. I'd use something like:

```
public static bool TryParse(string s, out Point result)
{
   var numbers = s.Split(',');
   if (numbers.Length == 2)
   {
       float x, y;
       if (float.TryParse(numbers[0], out x) && 
           float.TryParse(numbers[1], out y))
       {
           result = new Point(x, y);
           return true;  
       }    
   }
   result = null;
   return false;
} 
```

As StriplingWarrior says, I'd get rid of the parsing constructor to start with - if you're using `TryParse` anyway, add a `Parse` method too.

> The idea of two constructors, plus having to copy the result of the try parse to the readonly fields in the parsing constructor smells a little.

Well with this approach, you only need *one* constructor - but what's wrong with passing values to a constructor and it copying them into the object? That seems natural to me.

Alternatively, you could use the approach we use in [Noda Time](http://noda-time.sf.net) where you create a whole separate object responsible for parsing and formatting, and a `ParseResult<T>` type which is able to represent the success/failure of a parse, while retaining the ability to throw an exception with meaningful information about the failure. Personally I find it a lot nicer than the BCL pattern, although arguably I'm biased :)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T20:51:24.417

我通常尽量避免解析构造函数。有一种流行的观点是构造函数应该尽可能少做，并且通常只接受直接存储到字段中以供以后使用的参数。如果你想解析一个字符串，那不是构造函数的责任。

您有一个`TryParse`遵循 C#/.NET 应用程序的典型预期模式的方法。进行 Jon Skeet 建议的更改，然后希望您的用户在想要将 a 解析`string`为 a 时直接调用该方法`Point`。

# android - android R无法解决但布局没有错误

> ID：11729330
> 
> 赞同：0
> 
> 时间：2012-07-30T20:48:47.623
> 
> 标签：android, eclipse, layout, android-activity

我是 Android 开发的新手。我有一个布局非常简单的简单“学习”应用程序。布局仅显示一个警告（硬编码字符串 ... 应该使用 @string 资源），我怀疑这与问题有关。然而，在我的活动代码中，出现错误“R 无法解析为变量”。

这是java：

```
package com.example.treefields;

import android.app.Activity;
import android.os.Bundle;

public class TreeFieldsActivity extends Activity
{
  public void onCreate (Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContextView (R.layout.activity_tree_fields);
  }
} 
```

而且，这是布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10"
        android:inputType="textMultiLine"
        android:text="multiline text" />

</LinearLayout> 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:10:07.937

看起来您甚至没有包含 R。您需要包含资源包，如下所示：

```
import your.package.name.R; 
```

正如您所说，lint 字符串警告可能不相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:12:53.400

如果您使用的是 Eclipse，则始终可以使用 Ctrl+Shift+o 让 IDE 确定要导入的内容，但就像 Bostwickenator 所说，您应该确保包含包生成的 R，而不是 android.R意外（因为这不会解决您创建的任何布局元素，而是一些 Android 常见的东西）。

# javascript - Javascript 通过操作确认？

> ID：11729331
> 
> 赞同：0
> 
> 时间：2012-07-30T20:48:57.300
> 
> 标签：javascript, html

措辞这个问题很难，但我走了。好的，我正在使用此站点的代码： [http ://www.switchonthecode.com/tutorials/javascript-tutorial-getting-user-input-with-prompt-and-confirm](http://www.switchonthecode.com/tutorials/javascript-tutorial-getting-user-input-with-prompt-and-confirm)

```
<script type="text/javascript">
function confirmInput()
{
  var ans = confirm("Install a virus and delete all your files?");

  alert(ans ? document.getElementById('level').value = "0"; 
              : "If no, do nothing");
}
</script>

<input type="button" onclick="confirmInput()" value="Show me the Question!" /> 
```

我什至尝试用动作替换答案的文本，但我什么也没得到。

我如何在答案中添加一个动作，所以当它是时，我做某事，当不是时我不做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:53:32.317

我认为这就是你要找的：

```
function confirmInput()
{
    if(confirm("Install a virus and delete all your files?"))
        document.getElementById('level').value = "0";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:58:48.357

您的代码中存在语法错误：

```
alert(ans ? document.getElementById('level').value = "0"; // this semicolon is invalid
          : "If no, do nothing"); 
```

它一直执行到这个分号并终止。检查您的控制台，应该有一条错误消息。

另一件事是 ?: 运算符只能返回一个值。它不应该包含操作，只包含返回值的值或函数。

# wpf - 带有 x:Shared 和 EventSetter 的自定义控件样式

> ID：11729335
> 
> 赞同：1
> 
> 时间：2012-07-30T20:49:16.530
> 
> 标签：wpf, xaml

我可以将 ListView 的以下样式用作用户控件（或窗口）：

```
<ListView.ItemContainerStyle>
    <Style TargetType="Control">
        <Style.Resources>
            <SolidColorBrush
                x:Key="{x:Static SystemColors.ControlBrushKey}"
                x:Shared="False"
                Color="{DynamicResource {x:Static SystemColors.HighlightColorKey}}" />
            <SolidColorBrush
                x:Key="{x:Static SystemColors.ControlTextBrushKey}"
                x:Shared="False"
                Color="{DynamicResource {x:Static SystemColors.HighlightTextColorKey}}" />
        </Style.Resources>
        <EventSetter
            Event="MouseLeftButtonUp"
            Handler="ListView_Content_MouseLeftButtonUpEvent" />
    </Style>
</ListView.ItemContainerStyle> 
```

如何在自定义控件中获得相同的结果？我需要“x:Shared”，以便在系统颜色更改时重新计算颜色。我需要 EventSetter 进行一些特殊处理。但是，Generic.xaml 中都不支持这些。在自定义控件中获取这些功能的正确方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:11:04.257

我能够在 Generic.xaml 中使用 Style.Resources，所以我不明白那里可能有什么问题。

要附加事件处理程序，请覆盖自定义控件的 OnApplyTemplate 并在代码中添加事件处理程序。

# c++ - 使用 auto 声明变量和使用 type-name 有什么区别？

> ID：11729339
> 
> 赞同：5
> 
> 时间：2012-07-30T20:49:37.267
> 
> 标签：c++, c++11

例如，我有一些类`DataPacket`。有什么区别：

```
auto packet = DataPacket(); 
```

和

```
DataPacket packet; 
```

?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-30T21:30:12.990

首先回答这个问题`auto`，生成的代码之间没有区别：

```
auto packet = DataPacket(); 
```

和

```
DataPacket packet = DataPacket(); 
```

但这不是你写的。

在最初的问题中，第一个创建了一个**值初始化的**临时值，然后`packet`从中复制初始化。这需要一个可访问的非显式复制或移动构造函数，要求类型可以是默认构造的，**并确保`packet`已初始化**（假设复制/移动构造函数没有错误。）第二个默认初始化`packet`只需要type 可以是默认构造的，但如果它有一个普通的默认构造函数，则使对象未初始化，例如：

```
struct DataPacket { int i; };
{
  DataPacket packet = DataPacket();
  ++packet.i;  // OK
}
{
  DataPacket packet;
  ++packet.i;  // undefined behaviour
} 
```

正如 Xeo 在下面的评论中指出的那样，这些之间的区别*较小：*

```
auto packet = DataPacket();

DataPacket packet{}; 
```

因为其中的第二个也确保了值初始化，所以在这种情况下，区别在于前者需要一个可访问的、非显式的复制或移动构造函数。

在所有需要可访问的复制/移动构造函数的情况下，如果没有[省略](http://en.wikipedia.org/wiki/Copy_elision)复制（或移动），则生成的代码将因复制/移动而有所不同。但在实践中，所有现代编译器都会忽略它，因此生成的代码将是相同的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-30T20:55:01.743

第一个是复制初始化，如果没有复制或移动构造函数可访问，则会失败。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-30T20:52:09.743

从编译器的角度来看，除了显式声明变量可以为变量指定父类型之外，没有区别。从风格上讲，它会影响可读性（尽管它是积极的还是消极的影响取决于人）。

编辑：正如所指出的，第一个执行复制构造，而第二个使用默认构造函数。[在这里](https://stackoverflow.com/questions/620137/do-the-parentheses-after-the-type-name-make-a-difference-with-new/620402#620402)发现的差异的迂腐解释。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T21:07:51.040

当您不知道某些表达式的类型时，auto 关键字会很有用。您实际上是在要求编译器在编译时确定变量的类型。就编译器而言，使用 auto 关键字和显式使用类型之间绝对没有区别。

您还可以使用 auto 关键字来确定函数的返回类型，该函数的返回类型在编译时才知道（某些模板函数会发生这种情况）。请参阅此 Wikipedia 文章：[替代函数语法](http://en.wikipedia.org/wiki/C%2B%2B11#Alternative_function_syntax)。

请注意，auto 关键字不会为您提供 RTTI。自动类型在编译时静态确定。

回到旧的 C 时代，auto 关键字声明变量将“自动”存储在堆栈上，而不是存储在静态数据区域中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T21:05:18.250

在这种情况下，我建议使用第二种语法（不带“auto”关键字），因为它不那么冗长。

这是 auto 有意义的一个示例：

```
map<int, pair<string, double>> M;
.... // Fill up M
// Without "auto":
map<int, pair<string, double> >::iterator it = M.find(5);
// With "auto":
auto autoit = M.find(5);
// Yet another example:
// Without auto:
for (pair<const int, pair<string, double>>& x: M) {
   // Do stuff
}
// With auto:
for (auto& x : M) {
   // Do stuff
} 
```

# javascript - 在 JavaScript 代码中嵌入 SVG

> ID：11729340
> 
> 赞同：1
> 
> 时间：2012-07-30T20:49:43.183
> 
> 标签：javascript, html, svg, web

我有这个 HTML 代码，它正在调用我的 javascript 代码。该代码用于量规。在 javascript 代码中，我试图访问一个 SVG 文件，并修改指针（仪表的）以显示所需的值。代码工作正常。但是，我不想调用 onload(); 和 HTML 中的“对象 ID”。我只想在我的 HTML 文件加载后立即自动调用 javascript。我不想在 html 中调用任何东西（没有对象 id，没有 onload 函数），除了正文标签中的标题。我尝试了各种 onload() 方法，也尝试了这个链接 [http://www.techrepublic.com/article/preloading-and-the-javascript-image-object/5214317](http://www.techrepublic.com/article/preloading-and-the-javascript-image-object/5214317) 但无法实现。任何帮助将不胜感激。

PS：我尽力在解释问题时尽可能彻底。但是，如果我不清楚某处，请告诉我。

这是 Gauge.png 图像，它嵌入在我粘贴在下面的 svg 代码中 [https://sphotos-b.xx.fbcdn.net/hphotos-snc6/179594_10150982737360698_1827200234_n.jpg](https://sphotos-b.xx.fbcdn.net/hphotos-snc6/179594_10150982737360698_1827200234_n.jpg)

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g name="gauge" width="122px" height="127px">
        <image xlink:href="gauging.png" width="122" height="127"/>
    <circle id="led" cx="39" cy="76" r="5" style="fill: #999; stroke: none">
        <animateColor id="ledAnimation" attributeName="fill" attributeType="css" begin="0s" dur="1s"
        values="none;#f88;#f00;#f88;none;" repeatCount="0"/>
    </circle>
        <g id="needle" transform="rotate(0,62,62)">
            <circle cx="62" cy="62" r="4" style="fill: #c00; stroke: none"/>
            <rect transform="rotate(-130,62,62)" name="arrow"  x="58" y="38" width="8" height="24" style="fill: #c00; stroke: none"/>
            <polygon transform="rotate(-130,62,62)" points="58,39,66,39,62,30,58,39" style="fill: #c00; stroke: none"/>
        </g>
        <text id="value" x="51" y="98" focusable="false" editable="no" style="stroke:none; fill:#fff; font-family: monospace; font-size: 12px"></text>
    </g>
</svg> 
```

**HTML+ Javascript 代码**

```
<head>
<title>SVG Gauge example</title>

<script>
function update1(){
    var scale=100;
    var value;
    var value1 = 69;

    var el=document.getElementById('gauge1');       
    if (!el) return;

    /* Get SVG document from HTML element */
    var svg_doc = el.contentDocument;
    if (!svg_doc) return;

    /* Rotate needle to display given value */
    var needle_el = svg_doc.getElementById('needle');
    if (!needle_el) return;
    /* Calc rotation angle (0->0%, 260->100%) */
    value = parseInt(value1);
    scale = parseInt(scale);
    if (value > scale) value = scale;
    var angle = value / scale * 260;
    /* On-the-fly SVG transform */
    needle_el.setAttribute('transform','rotate('+angle+',62,62)');
}
</script>

</head>
<body onload="update1(); ">
<div>
<object id="gauge1" type="image/svg+xml" data="gauge.svg" width="127" height="122"/>
</div>
</body>    

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:53:56.407

要避免该`onload`属性，您可以使用`load`事件：

```
<script type="text/javascript">
    function update1() {
        // ...
    }

    document.addEventListener('load', update1, true);
</script> 
```

# python - 创建一个 get_absolute_url()

> ID：11729342
> 
> 赞同：0
> 
> 时间：2012-07-30T20:49:48.887
> 
> 标签：python, django, django-models

我`404`在尝试发帖时遇到错误。但错误是`event objects don't have get_absolute_url() methods`

```
class Event(models.Model):
    title = models.CharField(max_length=200)
    description = models.TextField()
    date = models.DateTimeField()
    created = models.DateTimeField(auto_now_add=True)
    modified = models.DateTimeField(auto_now=True)
    avatar = models.ImageField(upload_to='avatars/events/', null=True, blank=True)
    tags = models.ManyToManyField(Tag, null=True, blank=True)

    class Meta:
        ordering = ['-date']

    def __unicode__(self):
        return self.title

    # I made this, but this doesn't work
    def get_absolute_url(self):
        return "/event/" + self.id

    # it returns : 
            Exception Type:  TypeError
            Exception Value: cannot concatenate 'str' and 'int' objects 
```

我如何正确地完成这项工作？感谢您提前提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:54:43.150

您需要使用格式字符串。

```
def get_absolute_url(self):
    return "/event/%d" % self.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:19:24.927

self.id 是一个数字，您正在尝试将其转换为 url 中的数字...如果您将其类型转换为所需的字符串，您仍然可以执行“+”操作...所以您必须这样做：

```
def get_absolute_url(self):
    return "/event/" + str(self.id) 
```

它会起作用。通过这种方式，您可以进行 Unicode 转换等...通过指定您希望输出的确切类型。然而，其他构造似乎更快。但我更喜欢这个，因为这段代码中发生的事情在视觉上很清晰......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T20:56:17.360

`return`from的值`get_absolute_url`试图组合字符串和数字。

```
def get_absolute_url(self):
    return "/event/{0}".format(self.id) 
```

# php - 使用包含时的PHP类路径冲突

> ID：11729345
> 
> 赞同：0
> 
> 时间：2012-07-30T20:50:22.033
> 
> 标签：php, class, path, include

我对包含课程有疑问。下面是一个简单的例子来解释这个问题：

班级号 1（路径：/home/day/Class_A.php）：

```
class Class_A {
  public function sayHi() {
    echo "Good day";
  }
} 
```

班级号 2（路径：/home/test/Class_B.php）：

```
class Class_B {
  public function greeting() {
    if(class_exists("Class_A")!=true)
      include "../day/Class_A.php";
    $test = new Class_A();
    $test->sayHi();
  }
} 
```

PHP 文件（路径：/home/php.php）

```
if(class_exists("Class_B")!=true)
  include "test/Class_B.php";
  $g = new Class_B;
  $g->greeting(); 
```

问题是当 php.php 包含 Class_B 并且 Class_B 包含 Class_A 时，Class_B 无法打开 Class_B，因为该类的对象的路径现在与 php.php 文件相同。

我的问题是：有没有一种好的和简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T20:53:16.990

尝试改变：

```
include "../day/Class_A.php"; 
```

到

```
include dirname(__FILE__) . '/../day/Class_A.php'; 
```

这样，您的包含将与正在执行包含 (Class_B) 的文件相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:55:56.143

看起来`greeting`不是静态函数，所以你不能这样做：

`Class_B::greeting();`

您必须获得一个 B 类对象并在其上调用 greeting 或添加`static`到`greetings`声明中。

其次，为什么不使用 require_once？在 php.php

`require_once('test/ClassB.php');`

在 ClassB.php 中：

`require_once('../day/ClassA.php');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T21:11:44.320

使用 __autoload 这是一个您定义的魔术函数，它使 PHP 在没有加载类但需要加载该类时通知您。

```
If you define the __autoload function like so,
function __autoload ($classname)
{
    require('/path/to/my/classes/'.$classname.'.php');
}
you no longer need to add
require_once('/path/to/my/classes/MyClass.php');
into your files, because the first time that PHP encounters
$mine = new MyClass();
or
MyClass::staticMethodCall();
it will automatically call the __autoload function that you defined earlier.
__autoload('MyClass'); 
```

资源：http: [//blog.samshull.com/2010/02/why-you-should-use-autoload-function-in.html](http://blog.samshull.com/2010/02/why-you-should-use-autoload-function-in.html)

# ruby-on-rails - 单元测试中的“ActionController::RoutingError: No route matches”错误

> ID：11729347
> 
> 赞同：0
> 
> 时间：2012-07-30T20:50:41.420
> 
> 标签：ruby-on-rails, ruby, unit-testing, teamcity, rake-test

我正在我的持续集成服务器上运行单元集成测试。我收到了其中 3 个格式相同的错误，这里是测试“PaymentMethodsControllerTest.test_should_update_active_field”的示例：

```
ActionController::RoutingError: No route matches {:id=>"380742408", :active=>false, :controller=>"payment_methods", :action=>"update_active"}

Stack trace:
test/functional/payment_methods_controller_test.rb:61:in `block in <class:PaymentMethodsControllerTest>' 
```

这些是其他的： ProductsControllerTest.test_should_update_active_field：

```
ActionController::RoutingError: No route matches {:id=>"9854742", :active=>false, :controller=>"products", :action=>"update_status"}

Stack trace:
test/functional/products_controller_test.rb:61:in `block in <class:ProductsControllerTest>' 
```

SectionsControllerTest.test_should_update_active_field：

```
ActionController::RoutingError: No route matches {:id=>"260276858", :active=>false, :controller=>"sections", :action=>"update_status"}

Stack trace:
test/functional/sections_controller_test.rb:54:in `block in <class:SectionsControllerTest>' 
```

开发人员声称他们的测试在他们的环境中运行良好，但不是我。我正在使用 ruby​​ 1.9.2p320，Rails 3.2.0

# objective-c - 将 uilabel 或 textfield 从主视图拖放到详细视图

> ID：11729348
> 
> 赞同：1
> 
> 时间：2012-07-30T20:50:46.833
> 
> 标签：objective-c, xcode, uisplitviewcontroller

我的问题是如何启用将uilabel从masterview拖放到拆分视图，我不使用表格视图它们都是uiview，当你将它拖放到另一个视图时，我还需要创建该标签的副本.

# django - Django模型自省-通过多对多定期多对多Vs

> ID：11729352
> 
> 赞同：2
> 
> 时间：2012-07-30T20:51:10.227
> 
> 标签：django, django-models

我有一个与同一模型有 2 个多对多关系的 django 模型。

其中之一使用“通过”选项，例如：

```
class MyModel(models.Model):
    ....
    property1 = models.ManyToManyField(Model2, related_name="internal", blank=True, null=True)
    property2 = models.ManyToManyField(
        Model2,
        related_name="external",
        through="Model3"
    ) 
```

在迭代 model_instance._meta.m2m_data 时，如何检查“property2”？

两个字段都设置了“rel.through”..我只期待第二个字段..而在第一个字段中我会有“rel.to”而不是“rel.through”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T02:38:07.010

在我自己的示例中，当字段为propery1 时，`is_hidden()`将返回`True`，因为存在关于隐藏关系的概念。另外，`property2.rel.id_hidden()`将返回`False`since`Model3`表示这种关系。

```
# for some reason, User.groups has field.is_hidden() == None
if field.rel.is_hidden() == None:
    hidden_field = True
else:
    hidden_field = field.rel.is_hidden() 
```

这里的用法：[https ://github.com/felipecruz/dmqs/blob/master/dmqs/integration/memorify_django_model.py#L28](https://github.com/felipecruz/dmqs/blob/master/dmqs/integration/memorify_django_model.py#L28)

# c# - 可以检查 Application_Start 事件是否被触发？

> ID：11729355
> 
> 赞同：0
> 
> 时间：2012-07-30T20:51:16.817
> 
> 标签：c#, .net, global-asax

我在 Application_Start 事件中缓存了一些代码，然后在文件后面的母版页代码中使用它。

如果我的缓存对象是空的，那么我将它记录到我的错误日志中，说它是空的。我在想，虽然有一个检查会说一些检查 Application_Start Event 上次开始时的内容会很酷。我认为这比有一条硬编码消息说它可能是 application_start 没有被解雇更好。

是否可以查看上次 Application_Start 事件何时开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:57:07.880

简单的方法是每次 application_start 触发时写入日志文件，最后一次触发检查日志中的最后/最新条目。

# css - 为触摸屏信息亭隐藏 chrome 中的光标

> ID：11729358
> 
> 赞同：1
> 
> 时间：2012-07-30T20:51:20.857
> 
> 标签：css, macos, google-chrome, cursor

我有一堆运行 chrome 的博物馆触摸屏信息亭，我禁用了光标，如下所示：

```
*{
    -webkit-user-select: none !important;
    cursor: url(../img/cursor.png), none !important;
} 
```

cursor.png 是一个单像素 1% 不透明度的图像。

这在 90% 的情况下都能正常工作。但有时光标会自行返回。当运行重新加载 UI 的维护脚本时可能。

有没有办法真正告诉 chrome：“我不在乎你怎么想，我不想看到光标出现”？

如果您可以使用标志将 chrome 置于触摸屏模式来处理这个问题，那就太好了。

我使用 Chrome 20，并运行 OSX 10.7.4

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:58:22.290

在互联网上，我没有找到任何专门针对 Chrome 的 100% 解决方案。我会尝试（如果情况允许的话）是在 Windows 级别更改光标。在配置面板中，您可以更改光标的外观。

通过使用像[这样](http://pc.autons.net/stuff/blanks/)的透明光标，您可以确定光标保持不可见并且不会弹回。当然它不是专门针对 Chrome 的，但也许它也适合你的情况。

# microsoft-translator - 微软翻译：GetLanguagesForTranslation() 是否将语言名称翻译成浏览器语言？

> ID：11729361
> 
> 赞同：0
> 
> 时间：2012-07-30T20:51:28.890
> 
> 标签：microsoft-translator

这可能是一个愚蠢的问题，但我无法用多种语言对此进行测试。

我想知道微软翻译器是否将支持的语言列表翻译成浏览器检测到的语言？我认为确实如此，但希望得到验证。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:59:25.083

GetLanguagesForTranslate() 返回支持的语言 ID 集。GetLanguageNames() 采用语言 ID 数组并以您在“locale”参数中指定的语言返回语言的友好名称，其中 locale 是 ISO639 语言代码。

您可以收听浏览器的接受语言设置并将它的第一个元素传递给 locale 参数。这就是必应翻译主页的作用 (www.bing.com/translator)

# c++ - 在 Sublime Text 中构建系统

> ID：11729368
> 
> 赞同：25
> 
> 时间：2012-07-30T20:51:50.040
> 
> 标签：c++, python, build, sublimetext2

我刚刚开始学习编程（在 C++ 和 Python 上），开始我的意思是完全开始（“hello world”开始......）。不想使用多个 IDE，我希望能够使用我的文本编辑器 Sublime Text 2 编写和构建简单程序。有人可以通过分步教程告诉我如何实现 C++ 和 Python Sublime Text 中的编译和执行功能。

我在网站上搜索了 Sublime Text 构建系统，但答案非常具体，无法帮助像我这样的新手（但他们以后可能会帮助我）。

谢谢

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-30T21:19:16.083

Sublime Text 2 已经带有用于构建和运行 Python 和 C++ 程序的脚本。

当 .py 或 .cpp 文件打开时，只需按`Cmd`+ `B`（或Windows 和 Linux 上的`Ctrl`+ ）。`B`Python 文件将自动执行并在内置控制台中显示结果。

对于 C ++ ，您需要在构建后按`Cmd`++ （在 Windows 和 Linux 上为 ++）来运行`Shift`它。`B``Ctrl``Shift``B`

您需要安装 Python（在[此处](http://python.org/download/)为 Windows 获取），以及 C++ 编译器。C++ 的构建系统默认尝试调用 g++（在[此处](http://sourceforge.net/projects/mingw/files/Installer/mingw-get-inst/mingw-get-inst-20120426/)获取 Windows。安装时记得选择 C++ 编译器！）。

您需要将目录添加到路径（`c:\python32\`或类似的 python`c:\mingw\bin`或类似的 C++ 编译器）。

在 Windows 上，您可能会遇到运行 C++ 程序的问题（它尝试使用 bash）。但是`Ctrl`+`B`构建程序，然后您可以使用命令行来运行它。Python 在 Windows 上完美运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T06:07:59.393

windows(安装minigw、python2.7并添加到系统路径)
cpp:

1.  构建：`ctrl`+`b`
2.  运行：`ctrl`+ `shift`+`b`

Python：

1.  构建并运行：`ctrl`+`b`

您可以尝试学习-> ->`.sublime-build`中的文件`Tools``Build system``New build system`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T21:06:04.773

那么，您不想使用 IDE，但又想要来自文本编辑器的 IDE 功能？:)

大多数使用文本编辑器编写代码的人使用终端来构建和运行代码。

因此，对于 C++，指令是：

```
make (or gcc myprogram.c)
./myprogram 
```

对于 Python 程序，它甚至更简单：

```
python ./myprogram.py 
```

如果您对终端不满意，那么您可能需要一个 IDE。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-20T06:07:23.730

对于 c++，我实际上做了 sublime 来生成更易于阅读的彩色错误消息，您还可以单击错误，将您带到有错误的文件。

[您可以在这里查看](https://stackoverflow.com/a/21895852/2683910)我如何修改构建以执行我想要的操作

# mysql - mysql子查询/嵌套查询

> ID：11729372
> 
> 赞同：-2
> 
> 时间：2012-07-30T20:52:04.083
> 
> 标签：mysql

我是否失去了它，但如果感觉我记得做了一些类似的事情：

`select tb1.c1, (select count(tb2.c2) from tb2 where tb2.id = tb1.id) from tb1 where blah;`

我不记得了，但我认为这样做可能不是 mysql。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:55:33.833

问题是什么？

这个语句看起来是有效的，至少在 MySQL 5.1 和更高版本中是这样。

这可能适用于 MySQL 5.0，但肯定不适用于 MySQL 3.23。

您可能希望在子查询之后添加别名，例如。 `) AS tb2_count from`

# objective-c - 目标 C 减法

> ID：11729373
> 
> 赞同：1
> 
> 时间：2012-07-30T20:52:05.787
> 
> 标签：objective-c, subtraction

当我这样做时：

```
NSLog(@"%i",1.5 - 1.00 == 0.5); 
```

我得到 1，但是当我这样做时：

```
NSLog(@"%i",1.33 - 1.00 == 0.33); 
```

我得到0。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:55:19.803

问题在于浮点计算的精度：您通常应该避免使用`==`运算符比较浮点数和双精度数是否相等，而更喜欢检查差异是否小于微小的*epsilon*（例如`1E-9`）。

```
#include <math.h>

...

NSLog(@"%i", abs(((1.33 - 1.00) - 0.33) < 1E-9); 
```

第一个示例有效，因为数字由 2:`1 = 2^0`和的幂组成`0.5 = 2^-1`。第二个示例中的数字不能精确地分解为 2 的幂，因此相等性检查不起作用。

# ios - Xcode 应用程序在我第一次运行时不会在 ipod 上启动，但会在第二次运行（没有清理/构建）

> ID：11729376
> 
> 赞同：3
> 
> 时间：2012-07-30T20:52:20.740
> 
> 标签：ios, xcode, crash

我有一个 iOS 应用程序，我不得不重命名（保持包 ID 相同，但实际上重命名了其他所有内容），现在在从 Xcode 初始启动期间，我无法让它在我的开发 iPod 上运行。我担心这意味着如果我现在提交现有用户将有一个损坏的应用程序。

这是过程：

**设备上没有应用程序。**

*   干净的
*   建造
*   在目标设备上运行。

*按预期运行*

**设备上的当前应用，从应用商店下载。**

*   干净的
*   建造
*   在目标设备上运行。

*失败并出现错误：* “无法启动*应用程序名称*。无法获取进程*pid*的任务”

尝试从设备启动应用程序会显示应用程序启动（“缩放”）动画，但会立即关闭。

但是，如果我再次在 Xcode 中运行（无需清理或构建）以重新下载应用程序文件，该应用程序将在 iPod 上按预期运行。

那么我的问题是：因为重命名的应用程序以全新安装运行，并且在与旧应用程序“双重启动”后运行，我可以期望它作为更新工作吗？或者设备上的旧应用程序启动失败是否意味着现有安装将一直崩溃？如果是这样，有关如何解决此问题的任何提示？

（之前的问题表明清理或删除 DerivedData 文件夹可以解决问题。我已经尝试了这两个步骤，但都没有解决任何问题。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T18:45:07.610

尝试调试已使用分发配置密钥签名的 iOS 应用程序将失败，并出现“无法启动*应用程序名称*。无法获取进程*pid*的任务”错误，因为该应用程序没有`get-task-allow`权利。听起来在第一次运行时，Xcode 没有通过下载的应用程序安装您重建的应用程序，或者 Xcode 使用错误的密钥签署了应用程序。

您的应用程序很可能会作为更新正常工作。

（很抱歉将此添加为答案，但我没有足够的声誉来为您的问题添加评论。）

# haskell - 使用 Haskell 的类型系统来指定一个类服从额外的属性（即类型类的类型类）

> ID：11729378
> 
> 赞同：8
> 
> 时间：2012-07-30T20:52:36.797
> 
> 标签：haskell, types

当我们创建一个类型类时，我们通常假设它的函数必须服从一些属性。因此，对于它们各自的类型类，我们有 Monoid 和 Monad 定律。但是，如果有一些法则，比如关联性，我想指定多个类可能遵守也可能不遵守该法则怎么办？有没有办法在 Haskell 的类型系统中做到这一点？这种类型类的类型类想法在实践中是否可行？

* * *

这是代数中的一个激励示例：

```
class Addition x where
    add :: x -> x -> x

class Multiplication x where
    mult :: x -> x -> x

instance Addition Int where
    add = (+)

instance Multiplication Int where
    add = (*) 
```

现在，如果我想指定对 Int 的加法是关联的和可交换的，我可以创建类和实例：

```
class (Addition x) => AssociativeAddition x where
class (Addition x) => CommutativeAddition x where

instance AssociativeAddition Int where
instance CommutativeAddition Int where 
```

但这很麻烦，因为我必须为所有类创建所有可能的组合。我不能只创建 Associative 和 Commutative 类，因为如果加法是可交换的，但乘法不是（就像在矩阵中一样）怎么办？

我想做的是这样说：

```
class Associative x where

instance (Associative Addition, Commutative Addition) => Addition Int where
    add = (+)

instance (Commutative Multiplication) => Multiplication Int where
    mult = (*) 
```

这可以做到吗？

（Haskell 的抽象代数包，如代数和构造代数，目前不这样做，所以我猜不是。但为什么不呢？）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T21:22:28.163

您实际上可以使用最近的一些 GHC 扩展来做到这一点：

```
{-# LANGUAGE ConstraintKinds, KindSignatures, MultiParamTypeClasses #-}
import GHC.Exts (Constraint)

class Addition (a :: *) where
    plus :: a -> a -> a

instance Addition Integer where
    plus = (+)

class (c a) => Commutative (a :: *) (c :: * -> Constraint) where
    op :: a -> a -> a

instance Commutative Integer Addition where
    op = plus 
```

# android - TextView 的某些部分不显示并被屏幕边缘截断

> ID：11729379
> 
> 赞同：1
> 
> 时间：2012-07-30T20:52:44.957
> 
> 标签：android, android-layout, android-view, tablerow, android-tablelayout

![在此处输入图像描述](../Images/46d9958ffd533a4132801b088413f98f.png)

我有一个来自数据库的查询结果并填充了相应的变量。我认为问题在于布局，我在我的 XML 文件中使用了不正确的布局。也许是`ArrayAdapter`，我不知道。我花了很多时间试图解决这个问题，但一直没能解决。谢谢你的帮助！

这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TableRow>        
    <TextView android:id="@+id/precio_offers_charger"            
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:textStyle="bold"
        android:textSize="20px"     
        android:textColor="#FFFFFF"        
        android:background="#FF0000" />

    <TextView android:id="@+id/cabecera_offers_charger"
        android:paddingLeft="10px"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textStyle="bold"
        android:textSize="18px"
        android:textColor="#FFFFFF"
        android:background="#010201" />                 
</TableRow>  

<TableRow>
    <ImageView android:id="@+id/imagen"        
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView android:id="@+id/descripcion_offers_charger"
        android:paddingLeft="10px"
        android:paddingTop="10px"           
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:textStyle="normal"
        android:textSize="14px" />                                      
</TableRow>     

<ListView android:id="@android:id/list"        
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
</ListView>

</TableLayout> 
```

* * *

这是我课程的一部分：

```
public class OffersChargerActivity extends ListActivity{                    

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);     
    setContentView(R.layout.offers_charger);

... 

public class AdaptadorTitulares extends ArrayAdapter<Oferta> {

    Activity context;

    AdaptadorTitulares(Activity context) {
        super(context, R.layout.offers_charger, ofertas);
        this.context = context;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = convertView;
        if (view == null) {
            LayoutInflater linflater = (LayoutInflater)   getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = linflater.inflate(R.layout.offers_charger, null);
        }                   

        // poblamos la lista de elementos           
        TextView precio = (TextView)view.findViewById(R.id.precio_offers_charger);
        precio.setText(ofertas.get(position).getPrecio().concat("€"));

        ImageView imagen = (ImageView) view.findViewById(R.id.imagen);
        imagen.setImageBitmap(new GetImages().downloadFile(ofertas.get(position).getImagen()));

        TextView cabecera = (TextView)view.findViewById(R.id.cabecera_offers_charger);
        cabecera.setText(ofertas.get(position).getCabecera());

        TextView descripcion = (TextView)view.findViewById(R.id.descripcion_offers_charger);
        descripcion.setText(ofertas.get(position).getDescripcion());                                                

        return view;
    }                       
}   

... 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:58:49.917

这对我有用：

```
 <TextView
        android:id="@+id/nameText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center_vertical"
        android:textColor="@android:color/black" /> 
```

尝试添加“layout_weight”并将“layout_width”更改为“fill_parent”。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:01:12.843

不要包装内容，使用 fill_parent 作为宽度，并设置 android:ellipsize="true"

# c# - 使用 LINQ-to-Entities 返回一个对象集合，其中对象属性与另一个对象集合中的任何属性匹配

> ID：11729384
> 
> 赞同：2
> 
> 时间：2012-07-30T20:53:04.460
> 
> 标签：c#, linq, entity-framework, linq-to-entities, entitycollection

我一直在搜索一整天都找不到解决这个问题的方法...

我有一个`EntityCollection`对象`Communication`，每个对象都有一个对象的实例`Intention`（一对一）。

我还有一个`User`对象，它有很多`UserLocation` `EntityObjects`（一对多）实例

*   `Intention`对象有一个属性`UID`。
*   `UserLocation`对象有一个属性`LID`。

*   我想编写一个 LINQ 表达式，它返回与`Communication`对象关联`UID`的实例的属性等于对象实例的任何实例的任何属性的所有对象。`Intention``Communication``LID``UserLocation``User`

我试过这个

```
return _context.Communications.Where
(u => u.Intention.UID.Equals
(user.UserLocations.Select
(p => p.LID))); 
```

和这个

```
return _context.Communications.Where
(u => user.UserLocations.Any
(x => x.LID.Equals
(u.Intention.UID))); 
```

和这个

```
var thislist = from Intentions in _context.Intentions
                           join UserLocations in user.UserLocations
                           on Intentions.UID equals UserLocations.LID
                           select Intentions.UID;
            return _context.Communications.Where(u => u.Intention.Equals(thislist.Any())); 
```

和这个

```
var lidlist = user.UserLocations.Select(x => x.LID);
return _context.Communications.Where(x=> lidlist.Contains(x.Intention.UID)).ToList(); 
```

（这给了我一个包含语句的错误，说“代表`System.Func<Communication,int,bool>`不接受 1 个参数”，不知道如何解决）

除了所有这些变化，我还有：

*   修改了我的返回方法，并且在附加到我的查询时`IQueryable<Communication>`也尝试过。`List<Communication>``ToList()`

没有任何效果。无论我尝试什么，我总是以这个例外结束

**NotSupportedException 未被用户代码处理**

**无法创建类型为“PreparisCore.BusinessEntities.UserLocation”的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。**

我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:20:06.873

鉴于此代码：

```
namespace CollectionsWithIntentions
{
    using System.Collections.Generic;
    using System.Diagnostics;
    using System.Linq;

    internal class Program
    {
        #region Methods

        private static void Main(string[] args)
        {
            var communications = new[]
                {
                    new Communication { Intention = new Intention { UID = 1 } },
                    new Communication { Intention = new Intention { UID = 2 } },
                    new Communication { Intention = new Intention { UID = 3 } },
                    new Communication { Intention = new Intention { UID = 4 } },
                };
            var users = new[]
                {
                    new User { UserLocations = new List<UserLocation>(new[] { new UserLocation { LID = 2 },new UserLocation{LID=5}  }) },
                    new User { UserLocations = new List<UserLocation>(new[] { new UserLocation { LID = 3 } }) }
                };

            IEnumerable<Communication> res =
                communications.Where(w => users.Any(a => a.UserLocations.Any(b=>b.LID == w.Intention.UID)));
            foreach (Communication communication in res)
            {
                Trace.WriteLine(communication);
            }
        }

        #endregion
    }

    internal class Communication
    {
        #region Public Properties

        public Intention Intention { get; set; }

        #endregion

        #region Public Methods and Operators

        public override string ToString()
        {
            return string.Concat("Communication-> Intention:", this.Intention.UID);
        }

        #endregion
    }

    internal class Intention
    {
        #region Public Properties

        public int UID { get; set; }

        #endregion
    }

    internal class User
    {
        #region Public Properties

        public List<UserLocation> UserLocations { get; set; }

        #endregion
    }

    internal class UserLocation
    {
        #region Public Properties

        public int LID { get; set; }

        #endregion
    }
} 
```

我得到这个结果：

```
Communication-> Intention:2
Communication-> Intention:3 
```

我错过了什么吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:32:24.920

从您在其中一条评论中链接的最后两个编译器错误...

![在此处输入图像描述](../Images/25d22ece64e4026de75164493520b002.png)

...我会得出结论，这`Intention.UID`是一个可为**空**的类型`int?`，而不是`int`您在评论中所说的不可为空的类型。这确实不编译。尝试将您的最后一个查询更改为：

```
var lidlist = user.UserLocations.Select(x => x.LID);
return _context.Communications
    .Where(x => x.Intention.UID.HasValue
             && lidlist.Contains(x.Intention.UID.Value))
    .ToList(); 
```

其他三个查询不起作用，因为`user.UserLocations`它是内存中非原始自定义类型的集合（对于要生成的 SQL 查询，它是一个“常量”值）并且 EF 不支持使用这样的构建 SQL 查询常量自定义类型。

# c# - C# - UrlHistoryWrapper 类 - 没有足够的存储空间来处理此命令。（来自 HRESULT 的异常：0x80070008）

> ID：11729385
> 
> 赞同：1
> 
> 时间：2012-07-30T20:53:08.980
> 
> 标签：c#, error-handling, comexception

我正在从数据库中获取值，并尝试使用 UrlHistoryWrapper 类将它们插入到 Internet Explorer 历史记录中。当我将`for`条件设置为数千时，我会收到此错误，但是，当我将 for 条件设置为小于 100 时，它会运行良好。我检查了内存使用情况，应该没有问题。如果 chrome.URLs 和 firefox.URLs 有数千个值，我怎样才能使这段代码能够运行？

这是我的代码：

```
UrlHistoryWrapperClass urlHistory;
        UrlHistoryWrapperClass.STATURLEnumerator enumerator;
        List<STATURL> list = new List<STATURL>();
        urlHistory = new UrlHistoryWrapperClass();
        enumerator = urlHistory.GetEnumerator();
        bool display = false;
        chrome.GetHistory(display);
        for (int i = 0; i < chrome.URLs.Count; i++ )
        {
            URL url = chrome.URLs[i];
            urlHistory.AddHistoryEntry(url.url, url.title, ADDURL_FLAG.ADDURL_ADDTOHISTORYANDCACHE);
        }
        Firefox firefox = new Firefox();
        firefox.GetHistory(display:false);
        foreach (URL url in firefox.URLs)
        {
            MessageBox.Show(url.url);

            urlHistory.AddHistoryEntry(url.url, url.title, ADDURL_FLAG.ADDURL_ADDTOHISTORYANDCACHE);
        } 
```

这是我的错误：

> ****** *** ******异常文本******* *** ****** System.Runtime.InteropServices.COMException (0x80070008)：没有足够的存储空间来处理此命令。（HRESULT 异常：0x80070008）在 UrlHistoryLibrary.UrlHistoryWrapperClass.AddHistoryEntry（String pocsUrl，String pocsTitle，ADDURL_FLAG dwIE（String pocsUrl，String pocsTitle，ADDURL_FLAG dwFlags）在 Namespace.IE）中的 UrlHistoryLibrary.IUrlHistoryStg2.AddUrl（String pocsUrl，String pocsTitle，ADDURL_FLAG dwFlags）。 \Users\Chris\documents\visual studio 2010\Projects\TestURLGUI4\TestURLGUI4\URLHistory.cs:C:\Users\Chris\documents\visual studio 2010\Projects\TestURLGUI4\TestURLGUI4 中 Namespace.Program.SyncAll() 的第 270 行\URLHistory.cs：TestURLGUI2.Form1.button11_Click(Object sender, EventArgs e) 中的第 152 行：\Users\Chris\documents\visual studio 2010\Projects\TestURLGUI4\TestURLGUI4\Form1.cs：System.Windows 中的第 247 行.*****

 *****Edit:

Here is my new code:

```
 for (var i = 0; i < firefox.URLs.Count; i++ )
    {
        URL url = firefox.URLs[i];
        urlHistory.AddHistoryEntry(url.url, url.title, ADDURL_FLAG.ADDURL_ADDTOHISTORYANDCACHE);
        Thread.Sleep(3);
        form.label1.Text = i + "/" + firefox.URLs.Count;
      //  MessageBox.Show(url.url);
        Application.DoEvents();
    } 
```

Now, with this code, I can go up to 8447 without getting this error, but then it gets thrown.

I had someone else try to do this, and this is what he said:

> Just tried your code and and it seems that there is a limit on the number of the url records that can be added. I did the following steps.
> 
> 1.  In Internet Explorer, Clear the history of websites I've visited.
> 2.  I tried your code.
> 3.  Got a COMException (0x80070008): Not enough storage is available to process this command. The exception is thrown at record number 41021 for me (Windows 7, 64bit).
> 4.  I tried your code again, and Got a very same exception. This time, No record have be added. To add the url records again. I have to clear the history of websites in Internet Explorer. I could not find a way to fix the problem.

For anyone who needs to know, the source code for the URLhistoryWrapper can be found on [this CodeProject project](http://www.codeproject.com/script/Articles/ViewDownloads.aspx?aid=7500).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T01:23:38.913

Here is the solution I found to work. U need to run the

```
foreach (URL url in firefox.URLs)
    {
        MessageBox.Show(url.url);

        urlHistory.AddHistoryEntry(url.url, url.title, ADDURL_FLAG.ADDURL_ADDTOHISTORYANDCACHE);
    } 
```

and the chrome ones, etc, in another thread. Like this:

```
Thread testthread = new Thread(SynceFirefoxToIE);
        testthread.Name = "FirefoxToIESynceThread";
        testthread.Start();

    }

    public void SynceFirefoxToIE() 
    {
        foreach (URL url in firefox.URLs)
      {

         urlHistory.AddHistoryEntry(url.url, url.title, ADDURL_FLAG.ADDURL_ADDTOHISTORYANDCACHE);
      }

    } 
```*****

# android - Acra 和 Google 云端硬盘

> ID：11729392
> 
> 赞同：1
> 
> 时间：2012-07-30T20:53:47.427
> 
> 标签：android, google-drive-api, acra

我一直在我的 android 应用程序中使用 Acra，而谷歌驱动器更改将 acra 仍然有效。将其视为文档编号将驱动保持相同的编号模式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T21:06:30.150

它应该以相同的方式工作。这里的论坛中的一些讨论：

[https://groups.google.com/forum/?fromgroups#!forum/acra-discuss](https://groups.google.com/forum/?fromgroups#!forum/acra-discuss)

# c++ - QTreeView：如何将多个小部件放在一个单元格中？

> ID：11729394
> 
> 赞同：2
> 
> 时间：2012-07-30T20:53:51.553
> 
> 标签：c++, qt, qtreeview

我想将多个小部件放在 QTreeView 的一个单元格中。QTreeView 已经通过复选框做到了这一点（例如，如果您设置了 ItemIsUserCheckable 和 ItemIsEditable）。例如，如何在行编辑旁边显示一个小工具按钮，而不是在行编辑旁边显示复选框？

我已经完成了 Qtreeview 子类化、实现自定义 ItemDelegate 以及覆盖 paint() 和 createEditor() 的全部过程。如果我只需要渲染简单的东西，比如单行编辑、单个按钮等，这很有效。但是，我无法让它适用于嵌套组件。

我尝试创建一个 QHBoxLayout，向其中添加 QLineEdit 和 QToolBarButton，将布局添加到新的 QWidget，然后从 createEditor() 返回整个内容。然而，什么也没有出现。

谁能提供一个简单的例子？

谢谢！

# c++ - Windows 7 上的 Emacs 构建过程

> ID：11729395
> 
> 赞同：0
> 
> 时间：2012-07-30T20:53:54.763
> 
> 标签：c++, windows-7, emacs, build, compilation

我想知道是否有人可以在使用 emacs 编写代码后引导我完成程序的构建过程。这是针对 C++ 和 windows 7 的。如果我可以指出一个可以达到相同结果的体面的教程，那也很棒。我已经四处寻找了一段时间，但没有找到任何有用的东西。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:33:26.500

我知道这是一个老问题，你肯定已经继续前进了。

即便如此，如果其他人想知道同样的事情，我也会做出回应。

Windows 上的 emacs 并不特别。Emacs 与任何其他平台上的一样，Windows C/C++ 编译器的工作方式与其他操作系统上的 C/C++ 编译器非常相似。

在 emacs 上构建，无论平台如何。你可以使用`M-x compile`. 然后，您可以指定编译命令。在 Windows 上，这可能是一个`cl.exe`命令，或一个`nmake.exe`命令，或`msbuild.exe`或...`csc.exe`对于 C# 代码，或者您选择。

对于各种缓冲区和模式，我运行 jshint、csslint、javac 或 nmake。

我还[使用了一个 smarter-compile 模块](http://marmalade-repo.org/packages/smarter-compile)，它可以智能地生成建议的编译命令。IT 可在 Mac 或 Windows 或 Linux 上运行；Windows7 并不特别。

# android - 我可以使用 AAPT 向 APK 添加版本代码吗？

> ID：11729398
> 
> 赞同：1
> 
> 时间：2012-07-30T20:54:05.867
> 
> 标签：android, versioning, apk, aapt

有人告诉我，有一种方法可以使用 aapt 的`--version-code`选项将版本代码添加/插入到清单未定义的 APK 中。但是，我没有找到任何这样做的人的例子（除了[https://groups.google.com/forum/#!msg/adt-dev/XjehZDzfXhk/g2sWBC37_I4J](https://groups.google.com/forum/#!msg/adt-dev/XjehZDzfXhk/g2sWBC37_I4J)，它链接到一个死页而不是即使我正在尝试做同样的事情）如果确实可以做到的话。

当前`aapt d badging example.apk`在有问题的 apk 上运行会返回类似

> 包：name='com.example.core' versionCode='' versionName='1.0.0' sdkVersion:'8'

在我的清单中，我目前将 versionName 定义为 xml 文件中的字符串，因此我可以使用类似`android:versionName="@string/app_version_name"`（在清单标记内）的内容将其拉入。但是，如果我使用版本代码尝试此操作，它似乎不想解析引用。它尝试将版本代码逐字设置为我输入的路径，然后由于它不是整数而失败。

我试图做类似的事情，`aapt p --version-code 100 example.apk`但它似乎想要打包整个项目并期望文件目录作为输入，而不是 apk 文件。（我认为这是 的默认行为`aapt p[ackage]`）

是否可以在使用 aapt 工具构建 APK 后设置其版本代码？如果是这样，正确的语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T02:44:57.667

此解决方案不会直接使用 aapt，但会在幕后使用。

您可以使用[Android APKTool](http://code.google.com/p/android-apktool/)打开您的APK，修改 `AndroidManifest.xml` 文件，添加版本信息；然后再次使用 APKTool 重新打包。该工具是开源的并使用 aapt。因此，您可以查看它的代码以了解如何直接使用 aapt 来完成它。

# c++ - 游戏王卡的效果

> ID：11729399
> 
> 赞同：0
> 
> 时间：2012-07-30T20:54:07.667
> 
> 标签：c++

我正在为 yu-gi-oh 决斗构建一个简单的 C++ 平台，但我发现卡牌效果存在问题。由于几乎每张卡片都有不同的效果，这意味着我必须为每张卡片编写不同的函数。你有什么办法可以让这更容易，还是我必须为游戏的每张卡片编写一个函数？y

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:58:56.940

无论如何，您必须以一种或另一种方式*实现*每一个效果。将它们放入不同的函数，甚至不同的类中，可以帮助您组织代码。将函数头想象成对自我的内联提醒：“这里开始执行这个特定的块”。

换句话说，不要节省功能。以后你会感谢自己的。

从理论上讲，将所有效应放入一个巨大的函数中是可能的，但在任何有意义的意义上它都不会“更容易”，尤其是从长远来看。

并阅读一些关于一般编程的书。StackOverflow 不是一所学校。Steve McConnell（ISBN 1556154844）的“代码完成”很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:13:26.083

听起来像是设计模式的工作。我对 yu-gi-oh 不太熟悉，但我相信你可以实现你想要的。这些方法将要求您使用一些好的 ol' 面向对象编程。以下是一些可能对您有所帮助的起始模式：

策略模式（查找常见的“卡牌效果”类型，如伤害或陷阱等并扩展功能）：http: [//sourcemaking.com/design_patterns/strategy/cpp/1](http://sourcemaking.com/design_patterns/strategy/cpp/1)

装饰器模式（如果一个效果会做很多不同的事情，其中​​一些效果类似于其他“卡片效果”，你可以使用装饰器模式将另一张卡片的伤害效果与睡眠效果相结合卡等）：http: [//sourcemaking.com/design_patterns/decorator](http://sourcemaking.com/design_patterns/decorator)

无论哪种方式，都很难从任何在线资源中学习这些模式中的任何一种。如果这听起来像你感兴趣的东西，我会建议你出去买一本好的设计模式书。不幸的是，我对 c++ 的设计模式书没有任何好的建议。

# c# - 使用 xmlnode 读取重复 xml

> ID：11729400
> 
> 赞同：0
> 
> 时间：2012-07-30T20:54:08.227
> 
> 标签：c#, xmlnode

我有 XML 之类的

```
<rss>
<channel>
    <item>
        <category domain="category" nicename="change"><![CDATA[Changing Lives]]></category>
        <category domain="category" nicename="events"><![CDATA[Events]]></category>
        <category domain="category" nicename="leadership"><![CDATA[Leadership]]></category>
        <category domain="category" nicename="spiritual-transformation"><![CDATA[Spiritual Transformation]]></category>
    </item>
    <item></item>
    <item></item>
</channel>
</rss> 
```

我正在尝试阅读类别内部文本（改变生活，事件，领导力）......使用 foreach 条件......但是对于每个循环，我只得到改变生活......这是我的代码

```
 protected void btnImportPost_Click(object sender, EventArgs e)
{

    XmlDocument doc = new XmlDocument();
    string strPath = Server.MapPath("~/App_Data/willowcreekassociationblog.wordpress.xml");
    doc.Load(strPath);
    //Get Channel Node
    XmlNode channelNode = doc.SelectSingleNode("rss/channel");
    if (channelNode != null)
    {
        DateTime temp;
        //Add NameSpace
        XmlNamespaceManager nameSpace = new XmlNamespaceManager(doc.NameTable);
        nameSpace.AddNamespace("excerpt", "http://wordpress.org/export/1.2/excerpt/");
        nameSpace.AddNamespace("content", "http://purl.org/rss/1.0/modules/content/");
        nameSpace.AddNamespace("dc", "http://purl.org/dc/elements/1.1/");
        nameSpace.AddNamespace("wfw", "http://wellformedweb.org/CommentAPI/");
        nameSpace.AddNamespace("wp", "http://wordpress.org/export/1.2/");

        //Parse each item
        foreach (XmlNode itemNode in channelNode.SelectNodes("item"))
        {
            //some code here

            foreach (XmlNode categoryNode in itemNode.SelectNodes("category"))
            {
                //CMS.SiteProvider.CategoryInfo GetCate = null;
                string CategoryName = itemNode.SelectSingleNode("category").InnerText;
                Response.Write(@"<script language='javascript'>alert('root Document:" + CategoryName + "');</script>");

            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:05:00.800

只需使用

```
string CategoryName = categoryNode.InnerText; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:05:11.683

原因是您没有在每次循环时都写出 itemNode 的 InnerText，而是使用 SelectSingleNode 仅拉出第一个匹配项。

尝试将您的内部循环更改为：

```
foreach (XmlNode categoryNode in itemNode.SelectNodes("category"))
{
   //CMS.SiteProvider.CategoryInfo GetCate = null;

   //string CategoryName = itemNode.SelectSingleNode("category").InnerText; // incorrect
   string CategoryName = categoryNode.InnerText;
   Console.Write(CategoryName);
} 
```

# google-bigquery - Google BigQuery 的 SQL 语法不存在

> ID：11729401
> 
> 赞同：7
> 
> 时间：2012-07-30T20:54:08.437
> 
> 标签：google-bigquery

[此处https://developers.google.com/bigquery/docs/query-reference](https://developers.google.com/bigquery/docs/query-reference)的 Google SQL 语法指南 似乎没有解决 NOT IN 术语的使用问题。

我得到错误

```
Query Failed
Error: Encountered "" at line 0, column 0\. Was expecting one of: 
```

（然后谷歌在“一个”之后没有列出任何内容）

当我的查询是

```
SELECT ageinmonths,amountborrowed,borrowerrate,creationdate,creditgrade,
       debttoincomeratio,groupkey,key,lenderrate,listingkey,modifieddata,
       originationdate,prosperrating,status,term
FROM prosperloans1.loans2 as big,
     prosperloans1.dupelistingkeysinloans2 as small
WHERE big.listingkey NOT IN small.listingkey 
```

“小”表有 14 行。大表有 57K 行。

有任何想法吗？不确定 Google SQL 是否支持 NOT IN。

谢谢肖恩

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-30T21:10:14.350

半连接和反连接使用以下语法： `SELECT field FROM table WHERE field [NOT] IN (SELECT other_field FROM other_table WHERE foo = 'bar')`

因此，您使用子选择更新的查询是正确的版本。

# java - 运行 JGraphX Hello World 示例的错误消息

> ID：11729406
> 
> 赞同：1
> 
> 时间：2012-07-30T20:54:13.780
> 
> 标签：java, ioexception, jgraphx

当我从 JGraphX 包中运行 HelloWorld.java 示例并通过拖放来移动单元格时，我收到以下错误消息。

> java.io.IOException：数据转换失败：在 sun.lwawt.macosx.CDataTransferer.translateTransferable(CDataTransferer.java:131) 在 sun.awt.datatransfer.DataTransferer.translateTransferable(DataTransferer.java:1293) 在 sun 不是图像格式.awt.datatransfer.DataTransferer$6.run(DataTransferer.java:2304) 在 java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251) 在 java.awt.EventQueue.dispatchEventImpl(EventQueue.java:701) 在 java .awt.EventQueue.access$000(EventQueue.java:102) 在 java.awt.EventQueue$3.run(EventQueue.java:662) 在 java.awt.EventQueue$3.run(EventQueue.java:660) 在 java.security .AccessController.doPrivileged(Native Method) 在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) 在 java.security.ProtectionDomain$1。doIntersectionPrivilege(ProtectionDomain.java:87) at java.awt.EventQueue$4.run(EventQueue.java:676) at java.awt.EventQueue$4.run(EventQueue.java:674) at java.security.AccessController.doPrivileged(Native方法）在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) 在 java.awt.EventQueue.dispatchEvent(EventQueue.java:673) 在 java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244) 在 java .awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163) 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147) 在 java.awt.EventDispatchThread。 java.awt.EventDispatchThread 中的 pumpEvents(EventDispatchThread.java:139)。运行（EventDispatchThread.java:97）

我正在为 Mac 使用 Eclipse Juno 和 Java SE 7。我不明白它，也找不到任何解决它的方法。我真的陷入了绝望。请帮我。

先感谢您。

*更新：HelloWorld.java 的代码*

```
public class HelloWorld extends JFrame
{
    public HelloWorld()
    {
        super("Hello, World!");

        mxGraph graph = new mxGraph();
        Object parent = graph.getDefaultParent();

        graph.getModel().beginUpdate();
        try
        {
            Object v1 = graph.insertVertex(parent, null, "Hello", 20, 20, 80, 30);
            Object v2 = graph.insertVertex(parent, null, "World!", 240, 150, 80, 30);
            graph.insertEdge(parent, null, "Edge", v1, v2);
        }
        finally
        {
            graph.getModel().endUpdate();
        }

        mxGraphComponent graphComponent = new mxGraphComponent(graph);
        getContentPane().add(graphComponent);
    }

    public static void main(String[] args)
    {
        HelloWorld frame = new HelloWorld();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(400, 320);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-07T11:41:11.873

您可以通过将静态字段**enableImageSupport**设置为**false**来解决此问题。像这样 ：`com.mxgraph.swing.util.mxGraphTransferable.enableImageSupport = false;`

来源：http: [//jgraph.github.io/mxgraph/java/docs/com/mxgraph/swing/util/mxGraphTransferable.html#enableImageSupport](http://jgraph.github.io/mxgraph/java/docs/com/mxgraph/swing/util/mxGraphTransferable.html#enableImageSupport)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T21:17:27.343

[查看此错误报告](http://java.net/jira/browse/MACOSX_PORT-706)，这似乎是 OS X 和某些 Java 版本所特有的。此示例在 OS X 10.8 上当前 Mac 提供的 JVM 上运行良好，即：

```
java version "1.6.0_33"
Java(TM) SE Runtime Environment (build 1.6.0_33-b03-424-11M3720)
Java HotSpot(TM) 64-Bit Server VM (build 20.8-b03-424, mixed mode) 
```

# android - ViewPager 杀死它后不显示片段布局

> ID：11729409
> 
> 赞同：3
> 
> 时间：2012-07-30T20:54:37.263
> 
> 标签：android, android-layout, android-fragments, android-viewpager

现在我正在使用 Jake Wharton 的 ViewPagerIndicator 库。我已经添加了几个`Fragments`，并且可以来回滑动。如果我从 a 上滑动多个面板`Fragment`，则它会被删除（`onDestroyView()`调用）。相反，如果我从 a 在一个面板内滑动`Fragment`，则它会被添加回来（`onCreateView()`称为）。

当我`Fragment`的再次被破坏/添加回来时，`Views`曾经存在于其中的内容被破坏，我回到空白屏幕。我有一个`LinearLayout`我`Fragment`要添加`TextViews`的内容。重新创建时调用`.size()`显示`LinearLayout`正确的计数，但我无法弄清楚要调用什么才能再次显示它。我试过添加`<LinearLayout>.requestLayout()`in `onResume()`，但没有奏效。

让我知道是否应该发布任何相关代码。但是，我认为这一切都不是我的 Fragment 所特有的。

**编辑**：所以最初我认为我必须处理`onSavedInstanceState()`，但我以前从未保存过整个布局。我的另一个想法是迭代我`LinkedList`的`TextViews`，然后将它们添加回我的`LinearLayout`. 这给了我一个`View`已经有父母的错误，这是有道理的。

这是我添加 TextView 的方法：

```
public void addQuickLook(QuickLookView v)
{
    mViews2.add(v); //LinkedList of QuickLookViews
    mMeterLayout.addView(v); //Adding to the LinearLayout
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
    return inflater.inflate(R.layout.fragment_quicklook, container, false);
}

@Override
public void onActivityCreated(Bundle savedInstanceState)
{
    super.onActivityCreated(savedInstanceState);
    mMeterLayout = (LinearLayout) getActivity().findViewById(R.id.quickLookList);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:13:52.410

我想我已经解决了这个问题。我所做的是覆盖了`destroyItem()`我的方法`FragmentPagerAdapter`并将其留空。我应该`FragmentPagerAdapter`更仔细地阅读开发人员的页面以查看其预期行为，特别是所有内容都加载到内存中并且`Fragment`当它不再可见时它会杀死 a 的视图以节省内存。不确定这是否是正确的方法，但目前它工作正常。

# jquery - JQuery/css 下拉菜单在 Internet Explorer 9 中不可见

> ID：11729411
> 
> 赞同：0
> 
> 时间：2012-07-30T20:54:44.243
> 
> 标签：jquery, css, internet-explorer

我的下拉菜单在除 IE 之外的所有浏览器中都可以正常工作。我可以看到在开发人员工具中触发了悬停功能，但由于某种原因，菜单实际上并不可见。我已经以我能想到的所有方式调整了 CSS……有什么我忽略的吗？

该网站是：[http ://www.ironbridgeband.com](http://www.ironbridgeband.com)

**音乐自动播放（不是我的选择），所以要小心你的音量** 根据开发者工具，IE9 是浏览器模式。

编辑：这是使用的 CSS 和 JQuery：

```
 /* 
    LEVEL ONE
*/
#navigation > ul                         {text-align: center; position: relative;}
#navigation > ul li{
float: left;
background: transparent;
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#00990000,endColorstr=#00990000); 
zoom: 1;
z-index: 0;
}
#navigation > ul a:hover                 {color: #000;}
#navigation > ul a:active                {color: #fff;}
#navigation > ul li a                    {display: block;}
#navigation > ul li.hover,
#navigation > ul li:hover                {color: #fff; position: relative; }
#navigation > ul li.hover a              {color: #FFF;}

/* 
    LEVEL TWO
*/
ul.children{
    list-style-type: none;
    font-size: 0.8em;
    width: 100%;
    visibility: hidden;
    position: absolute;
    top: 50px;
    z-index: 500;
    margin-left: 0px !important;
    padding-left: 0px !important;
    line-height:2em;
    background: transparent !important;
    }

ul.children li{
    font-size: 16px;
    text-transform: none;
    font-weight: normal;
    float: none !important;
    clear: both;
    font-weight: bold; 
    background: #158082;
    color: #fff; 
    border: none; 
    float: none; 
    margin-left: -25px !important;
    padding: 0 !important;
    z-index: 501;
    }

ul.children li.hover{
    background-color: transparent !important;
    }                                     
                                    /* IE 6 & 7 Needs Inline Block */
ul.children li a{ 
    border-right: none; 
    display: inline-block;
    width:auto;
    } 
```

* *jQuery: **

```
$(function(){

    var config = {    
         sensitivity: 1, // number = sensitivity threshold (must be 1 or higher)    
         interval: 100,  // number = milliseconds for onMouseOver polling interval    
         over: doOpen,   // function = onMouseOver callback (REQUIRED)    
         timeout: 200,   // number = milliseconds delay before onMouseOut    
         out: doClose    // function = onMouseOut callback (REQUIRED)    
    };

    function doOpen() {
        console.log("doOpen()")
        $(this).addClass("hover");
        $('ul:first',this).css('visibility', 'visible');
        $('ul:first',this).css('z-index', '100001');
    }

    function doClose() {
        console.log("doClose()")
        $(this).removeClass("hover");
        $('ul:first',this).css('visibility', 'hidden');
    }

    $("#navigation > ul li").hoverIntent(config);

    $("#navigation > ul li ul li:has(ul)").find("a:first").append(" &raquo; ");

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:53:12.787

尝试为您的#navigation 元素提供比下拉菜单更高的 z-index。

# matlab - 如何保持双数组的格式？

> ID：11729414
> 
> 赞同：1
> 
> 时间：2012-07-30T20:54:58.390
> 
> 标签：matlab, file-io, matrix, floating-point, number-formatting

```
2000    2000    2000    2000    2000    2000    2000    2000    2000    2000    2000    2000    2000    2000
2000    2000    2000       0       0       0       0       0       0       4       0       0    2000    2000
2000    2000    2000       0       0       0       0       0       0       0       0       0    2000    2000
2000    2000    2000       0       0       0       4       3       3       0       3       3    2000    2000
2000    2000    2000       0       4       4       9      44      31       4       0       0    2000    2000
2000    2000    2000       0       4       0      31     277     531      29       0       0    2000    2000
2000    2000    2000       0       0       4       7       0       3      10       0       3    2000    2000
2000    2000    2000       0       0       4       3       0       0       5       0       1    2000    2000
2000    2000    2000       0       0       0       0       0       0       3       1       1    2000    2000
2000    2000    2000       0       0       0       0       3       1       2       1       1    2000    2000
2000    2000    2000    2000    2000    2000    2000    2000    2000    2000    2000    2000    2000    2000
2000    2000    2000       0       0       0       0       0       0       0       0       0    2000    2000
2000    2000    2000       0       0       0       0       0       0       0       0       0    2000    2000  
2000    2000    2000       0       0       0       4       0       4       0       0       0    2000    2000
2000    2000    2000       0       0       5      27      21       6       0       3       3    2000    2000
2000    2000    2000       0       3      31     274     316      25       1       1       1    2000    2000 
2000    2000    2000       0       0       4       5       4       6       0       0       0    2000    2000
2000    2000    2000       0       0       0       0       0       1       0       0       0    2000    2000
2000    2000    2000       0       0       0       0       0       1       0       0       0    2000    2000
2000    2000    2000       0       0       0       1       0       0       0       0       0    2000    2000
2000    2000    2000    2000    2000    2000    2000    2000    2000    2000    2000    2000    2000    2000
2000    2000    2000       0       0       0       0       0       0       0       0       0    2000    2000
2000    2000    2000       0       0       0       0       3       0       0       0       0    2000    2000
2000    2000    2000       0       0       0       4       0       3       0       0       0    2000    2000
2000    2000    2000       0       0       3       3      64       6       0       3       0    2000    2000
2000    2000    2000       0       0       3     473     374      30       9       1       0    2000    2000
2000    2000    2000       0       4       3       4       2      10       3       2       0    2000    2000
2000    2000    2000       0       0       0       0       0       0       1       1       0    2000    2000
2000    2000    2000       0       0       0       0       0       0       1       1       0    2000    2000
2000    2000    2000       0       0       0       0       0       0       0       2       1    2000    2000
2000    2000    2000    2000    2000    2000    2000    2000    2000    2000    2000    2000    2000    2000
2000    2000    2000       0       0       0       0       0       0       0       0       0    2000    2000
2000    2000    2000       0       0       0       0       0       0       0       0       0    2000    2000
2000    2000    2000       0       0       0       3       0       3       0       0       0    2000    2000
2000    2000    2000       0       0       4      18      34       9       0       0       0    2000    2000
2000    2000    2000       0       0       6     251     344      17       2       0       0    2000    2000
2000    2000    2000       0       0       8       2       3       5       0       3       0    2000    2000
2000    2000    2000       0       0       0       0       0       4       0       2       0    2000    2000
2000    2000    2000       0       0       0       0       0       1       0       0       0    2000    2000
2000    2000    2000       0       0       0       0       0       1       0       0       0    2000    2000
2000    2000    2000    2000    2000    2000    2000    2000    2000    2000    2000    2000    2000    2000 
```

上面是我目前在 MatLab 中生成的表格，但是当我尝试保存它时，当我需要保持这种格式时，它只是将它粘在一个长字符串中。我也需要它们以这种格式用逗号分隔。

这是我试图用来保存它的代码片段。

```
new_fname = ['star_chip' '_' date '.txt'];
path1 = '\\pfile01thn\bbruffey$\My Documents\IDLtoMatlab\star_chips\';
fid = fopen([path1 new_fname], 'w');
fprintf(fid,'%d',star_block);
fclose(fid); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:55:52.007

这是您玩的另一种可能性。这没有逗号，如果你真的想要它们，我会在以后尝试让它工作。

这是假设您要保存的矩阵已命名`A`，并且`fid`是您已打开要写入的文件的文件 ID。

```
fid = fopen('filename path here', 'w');
for n = 1:size(A,1)
    fprintf(fid, '%5d', A(n,:))
    fprintf(fid, '\r\n')
end 
```

`%5d'`命令中的`fprintf`为有符号整数的数据类型指定字段宽度为 5。如果你真的想 的话，你可以`d`用`i`or替换。并且是一样的。 只是未签名。如果您愿意，可以使用大量其他修饰符，只需查看帮助文件中的函数即可。`u``d``i``u`

在记事本中查看时也将使用第二`fprintf`行。它添加了一个回车符和一个换行符，因此它将下一行向下颠倒并且在记事本中也这样做（这需要回车符）。

希望能有所帮助！

* * *

一种有点混乱（如在另一个循环中， eww =P ）的方式来获取我想到的逗号。

```
fid = fopen('filename path here', 'w');
for n = 1:size(A,1)
    for m = 1:size(A,2)
        fprintf(fid, '%5d', A(n,m));
        fprintf(fid, ',');
    end
    fprintf(fid, '\r\n');
end 
```

我不是使用这条路线的忠实粉丝，但它确实完成了工作。如果`A`真的很大，那么您在这里有效地遍历了它的每个元素。

* * *

这反映了托尔留下的评论：

```
fid = fopen('filename path here', 'w');
for n = 1:size(A,1)
    for m = 1:size(A,2)
        fprintf(fid, '%5d,', A(n,m));
    end
    fprintf(fid, '\r\n');
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:59:03.593

请改用该`dlmwrite`函数，如果您希望将其存储为 ASCII 表，请使用：

```
dlmwrite(new_fname, int64(star_block), '\t') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T21:16:58.807

你可能想调查

```
dlmwrite('output.txt', yourMatrix); 
```

它是同谋：

```
yourMatrix = dlmread('input.txt') 
```

当然，您可能还需要更多选择。键入`help dlmwrite`或`doc dlmwrite`了解更多信息。

# c# - 事件处理程序始终为空

> ID：11729422
> 
> 赞同：7
> 
> 时间：2012-07-30T20:55:38.813
> 
> 标签：c#, asp.net, user-controls, event-handling, null

我对此进行了广泛搜索，但找不到解决问题的方法。我正在尝试从该页面上的用户控件调用页面后面代码中的函数。

我有一个使用母版页的 Web 应用程序。我正在向其中一个内容页面添加一个用户控件。我通过从工具箱中拖放用户控件将其添加到 aspx 页面。我可以从后面的代码中看到用户控件，但我无法访问公共功能。为了解决这个问题，我在后面的代码中创建了一个用户控件对象并使用了 LoadControl 函数。所有这些似乎工作正常。

我遇到的问题是当我试图将事件处理程序从 aspx 页面连接到用户控件时。一切编译和运行都很好，但我没有看到页面上发生任何事情。我认为问题在于 EventHandler 始终为空。

用户控制代码

```
public partial class ucBuyerList : System.Web.UI.UserControl
{
    public delegate void BuyerSelectedEventHandler(object sender, EventArgs e);
    public event BuyerSelectedEventHandler BuyerSelected;

    private string name = "";
    public string Name
    {
        get { return name; }
        set { name = value; }
    }

    private string auid = "";
    public string AUID
    {
        get { return auid; }
        set { auid = value; }
    }

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    private void OnBuyerSelected(EventArgs e)
    {
        if (BuyerSelected != null)
        {
            BuyerSelected(this, new EventArgs());
        }
    }

    protected void lbBuyerList_SelectedIndexChanged(object sender, EventArgs e)
    {
        SetNameAndAUID();
        OnBuyerSelected(e);
    }

    private void SetNameAndAUID()
    {
        name = lbBuyerList.SelectedItem.Text;
        auid = lbBuyerList.SelectedItem.Value;
    }
} 
```

父页面代码

```
 public partial class frmBuyerInformation : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        Master.changePageTitle("Buyer Information");
        buyerList.BuyerSelected += new ucBuyerList.BuyerSelectedEventHandler(buyerListControl_BuyerSelected);
    }

    void buyerListControl_BuyerSelected(object sender, EventArgs e)
    {
        DisplayBuyerInformation();
    }

    public void DisplayBuyerInformation()
    {
        tbName.Text = buyerList.Name;
        tbAUID.Text = buyerList.AUID;
    }
} 
```

谁能看到我做错了什么？

编辑：这个问题已经解决。上面的代码片段现在可以正常工作了。如果有人遇到我遇到的问题，您可以对上面的代码进行建模。确保`AutoEventWireup="true"`在 aspx 和 ascx 页面中。感谢 June Paik 的解决方案。也感谢 Diego De Vita 的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T22:27:25.733

我也一直在为事件苦苦挣扎。现在我总是以这种方式创造它们，因为这是我知道它工作的唯一方式。尚未使用您的代码对其进行测试，但无论如何它都会出现：

```
public partial class ucBuyerList : System.Web.UI.UserControl
{
    public delegate void BuyerSelectedEventHandler(object sender, EventArgs e);

    public event BuyerSelectedEventHandler BuyerSelected;

    public string Name;
    public string AUID;

    protected void Page_Load(object sender, EventArgs e)
    {
        //Select the first buyer in the list when the user control loads

        if (!IsPostBack)
        {
            lbBuyerList.SelectedIndex = 0;
        }
    }

    private void OnBuyerSelected(EventArgs e)
    {
        BuyerSelectedEventHandler handler = BuyerSelected;
        if (handler != null)
        {
            handler(this, new EventArgs());
        }
    }

    protected void lbBuyerList_SelectedIndexChanged(object sender, EventArgs e)
    {
        Name = lbBuyerList.SelectedItem.Text;
        AUID = lbBuyerList.SelectedItem.Value;
        OnBuyerSelected(e);
    }
} 
```

在父页面中，您可以像以前一样调用您的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:05:25.773

`Page_Load`在页面生命周期中使用 LoadControl 和订阅事件可能为时已晚。如果将代码移到`Page_Init`方法中会发生什么？

# sql-server-2005 - OLE DB 目标编辑器不加载远程 SQL 表 VS2008

> ID：11729428
> 
> 赞同：1
> 
> 时间：2012-07-30T20:55:57.093
> 
> 标签：sql-server-2005, visual-studio-2008, oledbconnection

我有一个数据流任务，它在开头显示平面文件的预览值，但在单击预览时，在 ole db 目标的结尾处没有显示任何内容。我是 Visual Studio 和 C# 的新手，如果我能提供任何帮助，我将不胜感激。当我运行整个解决方案时，它正常完成（包括写入同一个远程 SQL 实例中的日志表），但没有将任何记录写入 SQL 表。

我知道我没有问正确的问题 - ole db 目标编辑器中的 PREVIEW 是预览表的名称或您正在加载的视图，而不是您从中加载的数据。

所以..如果有人可以帮助我弄清楚为什么表没有被加载但没有产生错误，我将不胜感激！

提前致谢！

沙

# spring - Spring webflow 2.3.0 - 如何在表单操作方法中获取 flowExecutionKey？

> ID：11729429
> 
> 赞同：3
> 
> 时间：2012-07-30T20:56:01.353
> 
> 标签：spring, spring-webflow

我在表单操作类中有一些代码，需要`flowExecutionKey`从`RequestContext`. 我似乎找不到任何有关如何执行此操作的文档。我的班级看起来像这样：

```
public class MyFormAction extends FormAction
{
    public Event doStuff(RequestContext context)
    {
        String flowExecutionKey = ...??
        ...
    }
} 
```

我知道我真的不需要获取 flowExecutionKey，但我正在处理一些需要它的遗留代码。此方法被称为视图状态的入口操作。我试过`context.getFlowExecutionContext().getKey()`但它返回null。`context.getFlowExecutionUrl()`也返回 null。有没有办法做到这一点？

**更新**

我又在玩这个，并且`context.getFlowExecutionContext().getKey()`在调用方法时确实得到了 flowExecutionKey`<on-render>`而不是`<on-entry>`. 还值得注意的是，它在`<on-entry>`稍后的视图状态下工作。它不工作的视图状态是我流程中的第一个视图状态。是否有某种原因我无法`<on-entry>`在第一个视图状态下获得 flowExecutionKey？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T00:01:32.823

回调在对服务器的`<on-entry>`初始 POST 期间执行。这将有一个类似的 URL `http://server/myflow`。完成后，webflow 将发出重定向到`http://server/myflow?execution=e1s1`. 在此调用期间`<on-render>`执行。

因此，您最初没有获得密钥的原因是`<on-render`尚未分配密钥。而你在 later `<on-render>`s 中看到的键实际上是*前一个*视图的键。

也看一下`RequestContext.getFlowExecutionUrl()`- 它会告诉你当前请求的 URL。这应该会有所启发。

# r - 为绘图添加额外的图例

> ID：11729431
> 
> 赞同：2
> 
> 时间：2012-07-30T20:56:15.450
> 
> 标签：r, plot, ggplot2

嗨，我可以在 ggplot 中添加一个额外的图例吗？像下面的代码

```
d <- melt(as.matrix(data.frame(y1=1/(1:10),y2=1/(10:1))))
ggplot(d, aes(x=Var1, y=value,fill=Var2)) + geom_bar(stat="identity",position='dodge') 
```

这会生成一个包含我的数据框名称的漂亮图例。但是是否可以放入一个额外的图例，其中包含一些从数据中生成的额外信息。

在标准 R 中，我会添加额外的图例，例如

```
d<-data.frame(y1=1/(1:10),y2=2*1/(10:1))
barplot(t(d),beside=T)
legend("top",paste("sums:",apply(d,2,sum))) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:49:12.963

这似乎对我有用。

```
 plot.new()
    d <- melt(as.matrix(data.frame(y1=1/(1:10),y2=1/(10:1))))
    ggplot(d, aes(x=Var1, y=value,fill=Var2)) + 
    geom_bar(stat="identity",position='dodge') 
```

然后是令人兴奋的东西。

```
 legend('top',paste("sums:",tapply(d$value,d$Var2,sum))) 
```

我更改了应用语句以处理熔融数据。

我不知道 ggplot 解决方案，但我很想看到一个。

# html - 网站在 IE7 中看起来不错，但在其他 IE 中则不然

> ID：11729435
> 
> 赞同：0
> 
> 时间：2012-07-30T20:56:24.023
> 
> 标签：html, css, internet-explorer, compatibility

[![](../Images/e17de468dc061ab6dbf12847d5f4b144.png)](https://i.stack.imgur.com/Aj7Md.jpg) 这就是我的网站在 Google Chrome 和几乎所有浏览器中的外观，除了某些版本的 IE。

[![](../Images/8a2936e505319a5c92b13ddcf4d43c56.png)](https://i.stack.imgur.com/I7Tza.jpg) 这就是它在 IE8、IE9 和 IE6 中的外观。

有趣的是，该网站在 IE7 中看起来绝对没问题。我希望你帮我解决问题，但我真的不知道为你提供哪些数据，但如果你问，我可以提供你需要的一切。

**这是标题代码：**

```
<div id="header">
<div id="headercont">
<div id="headerlogo">
<img src="<?php echo dir;?>css/images/headerbg.png" class="header" />
</div>
<div id="menu">
<div id="mpointshighlight">
<div id="menupoints">

<?php echo menuSpace; ?>
<a href="<?php echo dir;?>index.php"><div id="menumain">Main</div></a>
<?php echo menuSpace; ?>
<a href="<?php echo dir;?>about.php"><div id="menuabout">About</div></a>
<?php echo menuSpace; ?>
<a href="<?php echo dir;?>blog.php"><div id="menublog">Blog</div></a>
<?php echo menuSpace; ?>
<a href="<?php echo dir;?>photos/photos.php"><div id="menuphotos">Photos</div></a>
<?php echo menuSpace; ?>
<a href="<?php echo dir;?>videos.php"><div id="menuvideos">Videos</div></a>
<?php echo menuSpace; ?>
<a href="<?php echo dir;?>music.php"><div id="menumusic">Music</div></a>
<?php echo menuSpace; ?>
<a href="<?php echo dir;?>projects/projects.php"><div id="menuprojects">Projects</div></a>

</div>
</div>
</div>
</div>
</div> 
```

**这是标题CSS：**

```
#header {
background-color:#00a2ff;
background-image:url('images/menubg.png');
background-repeat:repeat-x;
background-position:bottom;
width:100%;
min-width:1100px;
height:243px;
}

#headercont {
margin:auto;
width:1100px;
}
#headerlogo {
margin:auto;
width:1000px;
}
#menu {
width:100%;
height:44px;
}
#menupoints {
position:relative;
width:1000px;
font-size:24px;
font-family:verdana;
height:44px;
}
#mpointshighlight {
margin:auto;
width:1000px;
margin-bottom:10px;
background-repeat:no-repeat;
}
#menupoints a:link {
color:white;
text-decoration:none;
text-shadow: black 2px 2px 3px;
}
#menupoints a:visited {
color:white;
text-decoration:none;
text-shadow: gray 2px 2px 3px;
}
#menupoints a:hover {
color:white;
text-decoration:none;
text-shadow: black 2px 2px 3px, white 0 0 1em;
}
#menupoints a:active {
}
#menumain {
display:inline
}
#menuabout {
display:inline
}
#menublog {
display:inline
}
#menuphotos {
display:inline
}
#menuvideos {
display:inline
}
#menumusic {
display:inline
}
#menuprojects {
display:inline
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:04:54.193

如果不深入研究，很难确定问题出在哪里，但可能有帮助的是查看 IE 中的兼容性模式：

[http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx)

具体来说，告诉 IE8 及更高版本模拟 IE7：

确保这是头部的第一个 HTML 标记。

至于 IE6，根据您的目标受众，您可能可以忽略它，否则我害怕它是通过 CSS 拖网！

# c# - C# Visual Studio 2010 嵌入 exe 图标

> ID：11729436
> 
> 赞同：2
> 
> 时间：2012-07-30T20:56:26.143
> 
> 标签：c#, visual-studio-2010

我已经使用 Visual Studio C# 2010 Express 进行了分析，并且我在项目属性 -> 应用程序 -> 资源中设置了我的图标 ...

像[这样](http://msdn.microsoft.com/en-us/library/339stzf7.aspx)

但是当我尝试启动我的应用程序时，我需要将我的图标复制到应用程序的同一文件夹中

我怎样才能嵌入它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T21:12:43.090

您所做的是在磁盘上添加一个指向文件的指针；相反，将图标作为资源直接链接到可执行文件中可能更简单。

此页面显示如何将图标资源添加到您的 .NET 应用程序：http: [//msdn.microsoft.com/en-us/library/7k989cfy (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/7k989cfy(v=vs.80).aspx)

完成此操作后，您可以指向编译到您的程序中的应用程序图标，它不必存在于磁盘上的单独文件中。

# javascript - 如何使用正则表达式读取括号内的所有字符串

> ID：11729437
> 
> 赞同：0
> 
> 时间：2012-07-30T20:56:28.200
> 
> 标签：javascript, regex

我想在括号对中获取所有字符串。例如，在应用正则表达式之后

```
"fun('xyz'); fun('abcd'); fun('abcd.ef') { temp('no'); " 
```

输出应该是

```
['xyz','abcd', 'abcd.ef']. 
```

我尝试了很多选项，但无法获得想要的结果。一种选择是
`/fun\((.*?)\)/gi.exec("fun('xyz'); fun('abcd'); fun('abcd.ef')")`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:59:32.330

将正则表达式存储在一个变量中，并在循环中运行它......

```
var re = /fun\((.*?)\)/gi,
    string = "fun('xyz'); fun('abcd'); fun('abcd.ef')",
    matches = [],
    match;

while(match = re.exec(string))
    matches.push(match[1]); 
```

请注意，这仅适用于全局正则表达式。如果省略`g`，您将有一个无限循环。

`)`另请注意，如果引号之间有 a，它将给出不希望的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:09:41.087

您可以使用此代码几乎可以完成这项工作：

```
"fun('xyz'); fun('abcd'); fun('abcd.ef')".match(/'.*?'/gi); 
```

你会得到在字符串周围`["'xyz'", "'abcd'", "'abcd.ef'"]`包含额外内容的内容。`'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T05:34:44.247

找到所需内容的最简单方法是使用此 RegExp：`/[\w.]+(?=')/g`

```
var string = "fun('xyz'); fun('abcd'); fun('abcd.ef')";
string.match(/[\w.]+(?=')/g); // ['xyz','abcd', 'abcd.ef'] 
```

它适用于字母数字字符和点，您需要更改`[\w.]+`以添加更多符号。

# javascript - $.post 抛出“非法调用”

> ID：11729442
> 
> 赞同：19
> 
> 时间：2012-07-30T20:56:35.970
> 
> 标签：javascript, jquery, ajax

编辑：到目前为止，建议的答案都没有奏效。

我正在用 django 运行这个电话。第一次运行时，服务器返回“n_usr”（改变用户文件的格式）。第二次，它只是抛出一个`Illegal invocation`错误。

```
function log_in () {

        username = $('#usr_enter').val();
        password = $('#pass_enter').val();
        if(!n_usr){
            $.post('/ajax/login',{password: password, username: username}, function(data) {
              if(data == "n_usr"){
                $('#new_user_entry').show('slow');
                n_usr = true;
              }
              else {

              }

            })
    }else {
        password2 = $('#pass_re_enter');
        penname = $('#pen_enter');
            $.post('/ajax/login', {password: password, password2: password2, username: username, pen_name: penname, TN: "TN"}, function(data) {
                if(data == "e_act"){

                } else {

                }
            });
        }
    } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-31T13:36:45.573

在您的`else`中，您有：

```
password2 = $('#pass_re_enter');
penname = $('#pen_enter'); 
```

然后你有：

```
{password: password, password2: password2, username: username, pen_name: penname, TN: "TN"} 
```

你得到`Illegal invocation`是因为 jQuery 试图序列化 jQuery 对象`$.post`，但它不能。它可能试图调用一个字符串方法，并将一个 jQuery 对象作为上下文传递给它，从而导致错误。

您需要添加`.val()`.

```
password2 = $('#pass_re_enter').val();
penname = $('#pen_enter').val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:02:30.400

好吧，您并没有将它们称为相同的名称-第一次：

```
 $.post(url_base+'/ajax/login' ... 
```

和第二个

```
 $.post('/ajax/login', {.... 
```

将第二个更改为包含 url_base。

# javascript - 使用 AngularJS，如何在视图和控制器同步特定更改后触发代码执行？

> ID：11729443
> 
> 赞同：1
> 
> 时间：2012-07-30T20:56:40.980
> 
> 标签：javascript, jquery, angularjs

具体来说，我在某些日期范围内将 AJAX 转换为一对 SELECT（使用 AngularJS ng-repeat 维护），然后我使用 jQuery UI 的 selectToUISlider 将其转换为滑块。我假设如果它正在运行的 SELECT 在运行时被修改，则 selectToUISlider 的行为是未定义的。有没有办法确保只有在 AngularJS 完成更新后才调用它？我还没有遇到任何问题，但我不确定我只是幸运，或者我的电脑没有在正确的时刻出现延迟，等等......

我可以想到两种解决方案，但似乎都不是很好：

*   不要使用 ng-repeater；使用 jQuery 构建 SELECT。但这将是可悲的。
*   使用 setTimeout 延迟对 selectToUISlider 的调用。但这似乎……不优雅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T02:56:57.750

我不知道 selectToUISlider 是如何工作的，但你想要一个指令。在该指令中， $watch 用于更改列表并更新滑块，但它应该完成。

[http://docs.angularjs.org/api/ng.$ro​​otScope.Scope#$watch](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24watch)

示例 HTML：

```
<select jq-slider="myList" ng-options="item.val for item in myList"></select> 
```

示例 JS：

```
myApp.directive('jqSlider', function() {
  return {
    link: function(scope, elm, attrs) {
      scope.$watch(attrs.jqSlider, function whenMyListChanges(newValue, oldValue) {
        $(elm).applySelectUISliderUpdateForNewValues();
      });
    }
  };
}); 
```

# css - 嵌套有序列表作为多行菜单

> ID：11729449
> 
> 赞同：0
> 
> 时间：2012-07-30T20:56:59.370
> 
> 标签：css, list, menu

我正在使用嵌套有序列表中的 css 构建菜单。我想要实现的 - 尚未成功 - 每个嵌套级别都放置在单独的行中。我在 codepen 上创建了一个测试用例，如果能帮助我解决这个问题，我将不胜感激。这是笔：[http ://codepen.io/peterschmidler/pen/CkzpF](http://codepen.io/peterschmidler/pen/CkzpF)

提前非常感谢！

彼得

编辑：感谢您提示正确嵌套列表。但我仍然无法解决主要问题：如何为每个活动级别呈现单独的行中的列表。我更新了代码以澄清问题：[http ://codepen.io/anon/pen/lzHda](http://codepen.io/anon/pen/lzHda)

我将非常感谢任何帮助，以解决纯 CSS 的问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:13:56.893

您没有正确嵌套列表。`<ol>`只能包含`<li>`. 你应该把你的嵌套`<ol>`放在一个`<li>`. 像这样的东西：

```
<ol>
 <li>main1</li>
 <li>main2
  <ol>
   <li>sub1</li>
   <li>sub2
     <ol>
       <li>subsub1</li>
     </ol>
   </li> <!-- closing sub 2 -->
   <li>sub3</li>
  </ol>
 </li> <!-- closing main 2 -->
 <li>main3</li>
</ol> 
```

这应该让你回到正轨...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T23:03:58.867

嵌套列表中的每个新`<ol>`条目都应放在`<li>`.

在您的情况下，尝试嵌套这部分代码：

```
<ol>
    <li>
        <a href="about-team"class="active">Team</a>
    </li>
    <ol>
        <li>
            <a href="about-team-peter">Peter</a>
        </li>
        <li>
            <a href="about-team-schmidler">Schmidler</a>
        </li>
    </ol>
</ol> 
```

在一个`<li>`. 像这样：

```
 <li>
        <a href="about-team"class="active">Team</a>

           <ol>
            <li><a href="about-team-peter">Peter</a></li>
            <li><a href="about-team-schmidler">Schmidler</a></li>
           </ol>
</li> 
```

# google-drive-api - 如何从 Google Drive API 查询文件/流服务指标

> ID：11729454
> 
> 赞同：1
> 
> 时间：2012-07-30T20:57:20.020
> 
> 标签：google-drive-api

假设我将视频推送到 Google Drive。我与各种用户共享视频链接，**有没有办法获得服务的字节数，以及由谁或某个唯一 ID？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T23:27:29.403

抱歉，此数据无法从 API 获得。当然，如果您通过您的应用程序下载和提供文件，您可以自己生成它。

# javascript - 用 IE8 编写 JavaScript 文档

> ID：11729455
> 
> 赞同：1
> 
> 时间：2012-07-30T20:57:24.287
> 
> 标签：javascript, internet-explorer, dom

下面的代码在执行代码行后在 IE 8 浏览器中运行时出现 jaavascript 错误`window.open('','','width=200,height=100')`。新窗口打开，但运行时出现错误“jQuery 未定义”。在这里，我根本不使用 jQuery，但可以肯定的是，我在整个网站上都使用了它。

```
var newWindow = window.open('','','width=200,height=100')                
newWindow.document.write(someHmtlAsString);
newWindow.document.close();
newWindow.focus(); 
```

有没有人建议为什么会这样，或者 IE 中是否有一些错误（IE 的黑客）可以在页面呈现时消除 javascript 错误？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:01:40.027

`about:blank`如果您想控制它们，您应该将新窗口和 iframe 的来源设置为。

您还想使用`newWindow.contentDocument || newWindow.contentWindow.document`
它可能是一个好主意，`open()`在您使用它之前的文档`write()`。

**更新：**忘记了：如果你打开关于：空白的窗口，它需要时间来加载..
所以你不能一次写！
所以要么检查它是否已加载（onload），然后让它编写源代码（我更喜欢这个）。
或者将超时设置为大约 50 毫秒（通常），然后写入新窗口/iframe。

另请注意，xhtml 不支持`document.write`！

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:03:07.333

看起来`someHmtlAsString`您插入的内容包含一些`<script>`尝试使用 jQuery 的标签。检查它的内容，如果是这样，添加标签以加载 jQuery 或更改代码以不使用它。

# ruby - 如何在我的 Ruby gem 中正确登录？

> ID：11729456
> 
> 赞同：19
> 
> 时间：2012-07-30T20:57:24.177
> 
> 标签：ruby

目前我正在使用`puts`，但我确定这不是正确的答案。如何在我的 gem 中正确设置一个记录器来输出我的内部日志记录而不是`puts`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-30T21:07:55.390

对于 gem 的用户来说，最灵活的方法是让他们提供一个记录器，而不是在 gem 中设置它。在最简单的情况下，这可能是

```
class MyGem
  class << self
    attr_accessor :logger
  end
end 
```

然后，您使用`MyGem.logger.info "hello"`从您的 gem 记录消息（您可能希望将其包装在一个实用方法中，以测试是否设置了记录器）

然后，您的 gem 的用户可以控制消息记录到的位置（文件、系统日志、标准输出等......）

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-07-25T13:03:06.787

您可以将记录器保留在顶级模块中。允许用户设置自己的记录器，但为那些不关心记录的人提供合理的默认值。例如

```
module MyGem
  class << self
    attr_writer :logger

    def logger
      @logger ||= Logger.new($stdout).tap do |log|
        log.progname = self.name
      end
    end
  end
end 
```

然后，您可以在 gem 代码中的任何位置访问记录器。例如

```
class MyGem::SomeClass

  def some_method
    # ...
    MyGem.logger.info 'some info'
  end

end 
```

参考：

*   [使用 Ruby 记录器](http://hawkins.io/2013/08/using-the-ruby-logger/)
*   [记录器](http://ruby-doc.org/stdlib-2.2.2/libdoc/logger/rdoc/Logger.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:14:14.673

一个小例子：

```
gem 'log4r'
require 'log4r' 

class MyClass
  def initialize(name)

    @log = Log4r::Logger.new(name)
    #Add outputter
    #~ log.outputters << Log4r::FileOutputter.new('log_file', :filename => 'mini_example.log', :level => Log4r::ALL )
    log.outputters << Log4r::StdoutOutputter.new('log_stdout') #, :level => Log4r::WARN )
    #~ log.outputters << Log4r::StderrOutputter.new('log_stderr', :level => Log4r::ERROR)

    @log.level = Log4r::INFO
    @log.info("Creation")
    #~ @log.level = Log4r::OFF
  end
  attr_reader :log
  def myfunction(*par)
    @log.debug("myfunction is called")
    @log.warn("myfunction: No parameter") if par.empty?
  end
end  

x = MyClass.new('x')
x.myfunction

y = MyClass.new('y')
y.myfunction
y.myfunction(:a)
y.log.level = Log4r::DEBUG
y.myfunction(:a) 
```

在初始化期间，您创建一个 Logger ( `@log`)。在您的方法中，您调用记录器。

使用`@log.level=`（或`MyClass#log.level=`）您可以影响使用哪些消息。

您可以使用不同的输出器（在我的示例中，我登录到 STDOUT）。您还可以混合输出器（例如带有警告的 STDOUT，每个数据（包括 DEBUG）到一个文件...）

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2014-02-27T14:57:28.867

我认为最简单的方法是以这种方式使用它

```
Rails.logger.info "hello" 
```

# php - 这个用于更新表中注销时间的 php 脚本是否正确？

> ID：11729457
> 
> 赞同：0
> 
> 时间：2012-07-30T20:57:32.627
> 
> 标签：php, sql

我收到此脚本的服务器错误。我假设 SQL 的语法不正确，但我已经尝试了所有我能想到并彻底研究的东西。我敢肯定这只是一个新手，幼稚的错误，但任何建议都会受到赞赏。

```
function updateLogout($userID) {
    $success = false;
    //  Get current date-time in MySQL format
    $nowTimeStamp = date("Y-m-d H:i:s");
    $insertLogout_SQL = "UPDATE AccessLog SET";
    $insertLogout_SQL .= " timeLogout='".$nowTimeStamp."'";
    $insertLogout_SQL .= " WHERE userID='".$userID."'";

    if (mysql_query($insertLogout_SQL)) {
        $success = true;
    } else {
        $success = $insertLogout_SQL . "<br />" . mysql_error();
    }
    return $success;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:03:01.133

继@Matt 的回答之后：

```
function updateLogout($userID) {
    $success;
    $insertLogout_SQL = "UPDATE `AccessLog` SET `timeLogout`= NOW() WHERE userID = '$userID'";

    if (mysql_query($insertLogout_SQL))
        $success = true;
    else
        $success = $insertLogout_SQL . "<br />" . mysql_error();
    return $success;
} 
```

另外，你真的应该使用`mysqli_query`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:59:20.053

更好的选择是将 timeLogout 设置为，`NOW()`因为我遇到了 MySQL 的时间戳和 PHP 的时间戳之间的差异，但是是的，这应该有效。

还应该注意的是，`mysql_*`功能正在被弃用。考虑将新（甚至旧）代码切换到 PHP 的 PDO 或 Mysqli。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T21:01:18.823

几件事：

1.)`date`您可以插入 MySQL 函数，而不是在 PHP中乱搞`NOW()`，它将在当前时间输入。（记得不要引用`NOW()`）

2.）如果`$userID`是一个数字（它可能是），那么不要引用它。到 MySQL：

```
3 !== "3" 
```

即，它不进行类型转换。

因此，您的查询应如下所示：

```
UPDATE `AccessLog` SET timeLogout=NOW() WHERE userID=$userID 
```

您还应该检查[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)。您当前使用的 mysql 已[折旧](http://php.net/manual/en/function.mysql-db-query.php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T21:04:50.487

```
function updateLogout($userID)
{
    $query = "UPDATE AccessLog SET timeLogout=NOW() WHERE userID=$userID";
    if (mysql_query($query))
    {
        return TRUE;

    } else
    {
        return FALSE;
    }
} 
```

使用 mysql_real_escape_string() 转义传递给数据库的数据也是一个好习惯

# python - 扭曲的大文件和字符串传输

> ID：11729458
> 
> 赞同：0
> 
> 时间：2012-07-30T20:57:35.317
> 
> 标签：python, ajax, ftp, twisted, binary-data

我想知道 twisted 是否提供处理大型数据类型（大约 10MB）所需的任何类型的协议。我正在使用线路接收器进行其他通信；但是，这显然不会发生（根据 line rec 协议，字符串限制约为 16,000 字节）

我也有一个 Web 界面，所以如果你能对成功传输文件以响应 AJAX 调用有所了解，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:00:33.313

Twisted 支持多种适合传输大字符串的协议。 [Netstrings](http://twistedmatrix.com/documents/current/api/twisted.protocols.basic.NetstringReceiver.html)、[FTP](http://twistedmatrix.com/documents/current/api/twisted.protocols.ftp.html)、[SFTP](http://twistedmatrix.com/documents/current/api/twisted.conch.ssh.filetransfer.html)，也许与您直接相关的是[HTTP](http://twistedmatrix.com/documents/current/web/howto/)。

AJAX 仅限于（根据定义）在 HTTP 上运行。将它与 Twisted 一起使用并没有什么特别之处。只需将您的数据作为响应的主体发送到您的 AJAX 请求之一。您可能希望以[增量方式流式传输它](http://twistedmatrix.com/documents/current/core/howto/producers.html)以避免在服务器上使用过多内存，但除此之外没有什么特别之处。

# c++ - 奇怪的 ASCII/Unicode 字符

> ID：11729460
> 
> 赞同：1
> 
> 时间：2012-07-30T20:57:40.660
> 
> 标签：c++, unicode, ascii

[Peter Thiel 的 CS183 Notes](http://bit.ly/thiel-pdf)有一个带有 ASCII 字符串的文件名：“Peter Thiel 的 CS183.pdf”，或者至少在 Windows 资源管理器中是这样打印出来的。但是，在调试我的程序时，我注意到该`'`字符不是普通的撇号，它的（无符号字符）值为 146，而不是预期的 39。

为了测试它是否是我的程序中的错误，我重命名了文件并删除了字符并重新输入了撇号。果然，这次我的程序显示了正确的值。因此我推断它必须是 Unicode 字符（因为我在 ASCII 表中没有看到它）。但是，它不是多字节字符，因为字符串中的下一个字节是“s”。

有人可以帮助解释这里发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:04:07.407

你的错误是认为这个字符串是 ASCII。

如果您使用的是字符编码为 CP-1252 的 Windows 机器（请参阅[http://en.wikipedia.org/wiki/Windows-1252](http://en.wikipedia.org/wiki/Windows-1252)），那么您的“代码” 146 是一种引用（请参阅维基百科中的表格页）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:00:52.567

这是一个右单引号而不是单引号：

[http://www.ascii-code.com/](http://www.ascii-code.com/)

就像你说的，39 是单引号，但文件必须使用右单引号命名，Windows Latin-1 扩展字符中的十进制值 146，CP-1252。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T21:02:48.450

它是 Windows 代码页 CP1252 中的右单引号，既不是 ASCII（或 ISO-8859-1）也不是任何形式的 Unicode。

# python - 在 Python 中使用 PyQt4 向 QTableWidget 添加数据

> ID：11729472
> 
> 赞同：11
> 
> 时间：2012-07-30T20:58:39.963
> 
> 标签：python, pyqt

我想在 python 中使用 pyqt 将我的数据添加到表中。我发现我应该使用`setItem()`函数将数据添加到 a`QTableWidget`并为其提供行号和列号以及 a `QTableWidgetItem`。我做到了，但是当我想显示表格时，它完全是空的。也许我犯了一个愚蠢的错误，但请帮助我。这是我的代码：

```
from PyQt4 import QtGui

class Table(QtGui.QDialog):
    def __init__(self, parent=None):
        super(Table, self).__init__(parent)
        layout = QtGui.QGridLayout() 
        self.led = QtGui.QLineEdit("Sample")
        self.table = QtGui.QTableWidget()
        layout.addWidget(self.led, 0, 0)
        layout.addWidget(self.table, 1, 0)
        self.table.setItem(1, 0, QtGui.QTableWidgetItem(self.led.text()))
        self.setLayout(layout)

if __name__ == '__main__':
    import sys
    app = QtGui.QApplication(sys.argv)
    t = Table()
    t.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-31T01:22:33.433

您正在寻找的是`setRowCount()`和`setColumnCount()`方法。调用这些`QTableWidget`来指定行数/列数。例如

```
...
self.table = QtGui.QTableWidget()
self.table.setRowCount(5)
self.table.setColumnCount(5)
layout.addWidget(self.led, 0, 0)
layout.addWidget(self.table, 1, 0)
self.table.setItem(1, 0, QtGui.QTableWidgetItem(self.led.text()))
... 
```

此代码将创建一个 5x5 表并在第二行（索引为 1）和第一列（索引为 0）中显示“样本”。

如果不调用这两个方法，`QTableWidget`就不会知道表格有多大，因此将项目设置在位置 (1, 0) 是没有意义的。

如果您不知道，[Qt 文档](http://qt-project.org/doc/qt-4.8/)很详细，并且包含许多示例（可以很容易地转换为 Python）。“详细说明”部分特别有用。如果您想了解更多信息`QTableWidget`，请访问此处：http: [//qt-project.org/doc/qt-4.8/qtablewidget.html#details](http://qt-project.org/doc/qt-4.8/qtablewidget.html#details)

# jquery - alt+tab 后 Jscrollpane 重置为初始位置

> ID：11729475
> 
> 赞同：0
> 
> 时间：2012-07-30T20:58:48.310
> 
> 标签：jquery, focus, jscrollpane

我用 jScrollpane 做了一个全屏滚动网站，一切正常，但是当我尝试使用外部链接滚动并从浏览器窗口切换到另一个时，当我回到它时，jscrollpane 回到初始位置！我不知道出了什么问题，但我是这样做的，maintainPosition 没有解决我的问题，似乎有焦点动作，但我没有找到任何关于它的东西！

```
$(document).ready(function(){
    w = $(window).width();
    h = $(window).height();
    $('.fullContent').css('width', w);
    $('.fullContent').css('height', h).find('.bg, .lente').css('height', h);
    $('.fullContent').jScrollPane({
        verticalDragMinHeight: 30,
        verticalDragMaxHeight: 30,
        horizontalDragMinWidth: 161,
        horizontalDragMaxWidth: 161,
        maintainPosition: true,
        animateScroll: true,
        hijackInternalLinks: true
    }).bind('jsp-scroll-x', function(event, scrollPositionX, isAtLeft, isAtRight){
        $('.lente').css('left', scrollPositionX*0.6);
        //console.log('Bg = '+scrollPositionX, 'Lente = '+scrollPositionX*0.6);
    });
    var throttleTimeout;
    $(window).bind('resize', function(){
        w = $(window).height();
        h = $(window).height();
        $('.fullContent').css('width', w);
        $('.fullContent').css('height', h).find('.bg, .lente').css('height', h);
        if($.browser.msie) {
            if(!throttleTimeout) {
                throttleTimeout = setTimeout(function(){
                    $('.fullContent').data('jsp').reinitialise();
                    throttleTimeout = null;
                },50);
            }
        }else{
            $('.fullContent').data('jsp').reinitialise();
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:48:45.890

我评论了第 908 行，函数 initFocusHandler，它停止做这个烦人的事情！

```
 function initFocusHandler()
        {console.log(30)
            pane.find(':input,a').unbind('focus.jsp').bind(
                'focus.jsp',
                function(e)
                {
                    //comment here \/
                    //scrollToElement(e.target, false);
                }
            );
        } 
```

# database - VB.NET 循环访问数据库

> ID：11729479
> 
> 赞同：1
> 
> 时间：2012-07-30T20:58:57.110
> 
> 标签：database, vb.net

在 VB.NET 中，如何在不将其加载到 a`DataGridView`或将其加载到 a 的情况下循环访问 Access 数据库`DataGridView`并在比较函数完成其工作后将其卸载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T21:03:43.277

使用 DataReader，您可以循环遍历数据，一次一行，而无需将整个结果集加载到 DataTable/GridView 中。

示例用法（来自[http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbdatareader(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbdatareader(v=vs.90).aspx)）

```
Public Sub ReadData(ByVal connectionString As String, _
    ByVal queryString As String)
    Using connection As New OleDbConnection(connectionString)
        Dim command As New OleDbCommand(queryString, connection)

        connection.Open()

        Dim reader As OleDbDataReader = command.ExecuteReader()
        While reader.Read()
            Console.WriteLine(reader(0).ToString())
        End While
        reader.Close()
    End Using 
End Sub 
```

您将连接字符串传递给您的 MS Access 数据库，然后运行 ​​SELECT 查询。示例将数据从第一列输出到控制台 - 但您可以用自己的逻辑替换它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:04:16.150

1.  连接到 Access 数据库。
2.  使用您的 SELECT... 查询[获取记录。](http://p2p.wrox.com/ado-net/28703-how-vbulletin-net-connect-access-database.html)
3.  将结果加载到您的自定义类对象（例如：客户）/数据表/数据集的列表中。
4.  编写一个循环（For / [For Each](http://msdn.microsoft.com/en-us/library/5ebk1751.aspx)）来遍历每条记录并与您想要的任何内容进行比较。

自己试试这个。如果您遇到任何错误，请将其作为单独的问题发布，并附上相关详细信息。

# ruby-on-rails - 为任何不工作的东西设置 Cron 路径

> ID：11729482
> 
> 赞同：1
> 
> 时间：2012-07-30T20:59:06.760
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, cron

我的另一个 Q 已关闭，因为他们说这是[这个问题](https://stackoverflow.com/questions/5835675/setting-path-for-whenever-in-cron-so-it-can-find-ruby)的重复。

不幸的是，那个答案没有用。

基本上我试图让每当自动运行我的 refresh_sitemaps 。

在我的 cron.log 文件中有趣的是它看起来像这样（注意奇怪的字符）：

```
/usr/bin/ruby: No such file or directory -- °¯Ø (LoadError)
/usr/bin/ruby: No such file or directory -- Ø½ô (LoadError)
/usr/bin/ruby: No such file or directory -- à=Ù (LoadError) 
```

这是我的**schedule.rb**中的内容：

```
env :PATH, '/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin'
set :output, "#{path}/log/cron.log"

every 1.day, :at => '3:00 pm' do
  rake "-s sitemap:refresh"
end 
```

当我运行`cap refresh_sitemaps`它时它运行良好，当它尝试作为 Cron 作业自行运行时它只是不起作用。

我很肯定从上面的 PATH 到 ruby​​ 的路径是正确的。如果我 SSH 进入并运行以下命令，就会出现以下结果：

```
user@example.com [~]# /usr/local/bin/ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux] 
```

奇怪的是它似乎甚至没有看到我的“路径”，因为它仍在 /usr/bin/ruby 中查找。

另一个奇怪的事情是那里实际上有一些东西......根据这个 ssh 命令：

```
user@example.com [~]# /usr/bin/ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux] 
```

## 更新

当我运行`crontab -l`这就是我得到的。请注意我添加的额外路径，它来自我为这个问题找到的 mediatemple 帮助指南（尽管它没有给出任何其他描述）：

```
# Begin Whenever generated tasks for: APPNAME
PATH=/usr/local/bin:/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin
GEM_HOME=/usr/local/lib/ruby/gems/1.9.1
GEM_PATH=/usr/local/lib/ruby/gems/1.9.1
RUBYLIB=/usr/local/lib/ruby/site_ruby/1.9.1

10 17 * * * /bin/bash -l -c 'cd /home/USER/u/apps/APPNAME/releases/20120731204722 && RAILS_ENV=production bundle exec rake -s sitemap:refresh --silent >> /home/USER/u/apps/APPNAME/releases/20120731204722/log/cron.log 2>&1'

# End Whenever generated tasks for: APPNAME 
```

我在 SSH 后尝试自行运行它，它运行良好：

`/bin/bash -l -c 'cd /home/USER/u/apps/APPNAME/releases/20120731204722 && RAILS_ENV=production bundle exec rake -s sitemap:refresh --silent`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:16:39.527

我的标题中有一个杂散的 UTF-8 字符（当时在站点地图中）。多么令人沮丧;0

# c# - .NET 代码发布 JIT 是否与本机代码相同

> ID：11729483
> 
> 赞同：3
> 
> 时间：2012-07-30T20:59:10.723
> 
> 标签：c#, .net, clr, jit

.NET 语言都编译为中间语言 ( *MSIL* )。

据我所知，在执行期间（有时在其他阶段，我并不完全了解 - NGEN），代码正在被 JITted（从*MSIL*编译成实际的*机器代码*）。

我想知道在 JITting 代码之后是否存在来自代码在 CLR 上执行的事实的性能“惩罚”，或者代码的行为是否与任何其他本机代码“相同”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T21:08:56.390

有许多性能差异：

1.  托管对象的空闲存储实现为堆栈，而不是堆（大对象堆除外），并且开销低于大多数本机分配器使用的堆。但是您稍后会为垃圾收集和压缩付费。

2.  JIT 可以内联一些 AOT 编译器必须保留为虚拟的调用（即调用其他程序集）。但是 AOT 编译器可以花更多时间寻找优化机会。

3.  理论上，JIT 可以使用运行代码的特定 CPU（例如 AVX）上的高级指令。不过，仍在等待真正充分利用它们的 JIT。

4.  AOT 编译器可以使用分析数据来控制代码内存的布局。JIT 编译器几乎总是按照编译的顺序将函数发送到内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:36:09.093

JITed 代码的主要性能损失是首次运行时编译代码所花费的时间。这通常只会显示为（稍微，也许是难以察觉的）更长的启动时间，但如果您在 CGI 之类的场景中使用它，它会产生真正的影响，其中会产生一个新进程来处理每个请求。并不是说用 .NET 编写的 CGI 脚本是一个常见的用例，但这是第一个出现在我脑海中的示例，所以我将使用它来运行。

NGen 可以通过跳过 JIT 步骤来缩短您的启动时间。在频繁运行的短期运行程序（如 CGI 脚本）中，好处将是最大的。（或者也许一个设置为自动启动的 Windows 服务是一个更好的例子，现在我想到了。）对于不经常运行的程序，可执行文件不太可能缓存在内存中，因此可能必须从每次磁盘。从磁盘读取所需的时间很可能会支配启动时间并压倒 NGen 的优势。对于长时间运行的程序，启动时间可能不是一个重要的性能特征。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T21:05:01.057

通常，本机编写的代码性能更高，因为您可以使用在设计时可能需要了解的特定架构可用的优化，例如 SSE。对于一种或另一种语言的性能，还需要考虑其他事项，例如垃圾收集与手动内存管理。

就 NGEN 而言，我认为 JITTED 代码和 NGEN 所做的工作之间不会有太大的性能差异，除了 JITTED 代码是在运行时生成的（当实际编译发生时会导致性能损失）。

# c# - 创建选项卡并在应用程序中拖放它们？

> ID：11729484
> 
> 赞同：0
> 
> 时间：2012-07-30T20:59:16.883
> 
> 标签：c#, .net, wpf, visual-studio

我目前有一个 .NET 3.5 程序，使用 Windows 窗体用 Visual Studio C# 编写。我打算从头开始重写这个程序，它是一个非常小而简单的程序，所以它并不是什么大不了的壮举。

使用新版本的程序，我想让用户能够从 tabControl 添加/删除选项卡，以及拖放它们以按照他们喜欢的顺序重新排列它们。我知道他们不能用 Windows 窗体做到这一点。如果我使用 WPF 创建程序，我能做到这一点吗？

我还希望能够在程序中加载基于 AJAX 的网页：http://www.twitch.tv/chat/embed [? channel=8wayrun&popout_chat=true](http://www.twitch.tv/chat/embed?channel=8wayrun&popout_chat=true)

即使我不能在 WF 中完成，我是否可以使用 WPF 完成所有这些操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:42:14.437

这个项目可以帮助你： http: [//fabtab.codeplex.com](http://fabtab.codeplex.com)

# ios - 应用从后台恢复时核心数据实体消失

> ID：11729488
> 
> 赞同：0
> 
> 时间：2012-07-30T20:59:38.643
> 
> 标签：ios, core-data

我有一个使用只读核心数据数据库的应用程序（这意味着我从不写入数据库）。我有一个视图控制器，它获取一些核心数据实体并将它们显示在表格中。例如，我有一个名为 的核心数据实体`Photo`，在我的视图控制器中，我有`@property (nonatomic, strong) NSArray *photos;`一个 Photo 对象列表。

现在，当应用程序重新启动时，一切正常。但是当我去那个视图并退出应用程序（所以它仍然在后台）并重新进入它时，`@property`我设置的变成了`nil`. 我仍然`UITableViewCell`在屏幕上看到所有 s。但是，当我尝试滚动时，应用程序崩溃了。

我有多个使用 Core Data 东西的视图，但其中一些工作得很好。我想知道为什么对于某些视图控制器，`@property`当应用程序返回前台时，我的核心数据对象设置为消失。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:32:55.780

第一个建议：您应该使用`NSFetchedResultsController`而不是数组。除了许多其他优点外，这更有效，并且会为您处理所有内存问题。事实上，它是专门为管理`datasource`基于 Core Data 的表视图而设计的。

如果您仍想使用您的数组，我推测您未能正确**初始化**它。

在您的`viewDidLoad`方法中，不仅要分配从核心数据中获取的结果，还要通过适当的初始化来完成：

```
self.photos = [[NSArray alloc] initWithArray:coreDataResults]; 
```

现在数组应该持续存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:45:24.017

我想我弄清楚我的代码有什么问题。所以这就是我为获取核心数据所做的事情：

```
[DatabaseHelper openDatabase:@"database" usingBlock:^(UIManagedDocument *document) {
     NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Shop"];
     request.predicate = [NSPredicate predicateWithFormat:@"ecategory = %@", self.category];
     NSError *error = nil;
     NSArray *matches = [document.managedObjectContext executeFetchRequest:request error:&error];
     self.shops = matches;
     [self updateTable];
}]; 
```

这正确地获取了结果，但问题是，虽然我认为我保留了 Core Data 对象，但它们实际上属于 a `UIManagedDocumentContext`，而我没有保留它。因此，当应用程序返回前台时，上下文消失了，核心数据对象变为 nil。

所以我所做的是声明一个新属性：`@property (nonatomic, strong) UIManagedDocument *database;`然后`self.database = document;`在块中设置。现在控制器将保留上下文并且一切正常。

# asp.net - detailsview，空值是怎么来的？

> ID：11729491
> 
> 赞同：0
> 
> 时间：2012-07-30T21:00:05.137
> 
> 标签：asp.net, detailsview

我在处理 Detailsview InsertItemTemplate 时遇到问题。我正在关注 WROX 的 ASP.Net 4 for Beginners。

我有一个带有表 Employee(EmpId, Name, DoB, Sex, DeptId, Position) 的 dbase 我正在尝试使用 Detailsview 将值插入到该表中。

使用常规的详细信息视图，我可以插入所有值。它工作正常。但是当我将详细信息视图转换为模板时，出现了问题。

我做了什么？

- 在 Detailsview 的 Smart 标签上，我点击了 Edit Fields。删除除 EmpID 之外的所有可用字段，并从可用字段中添加模板字段。- 再次在 Detailsview 的 Smart Tag 上，单击 Edit Template 并在 DropDownList 中选择 InsertItemTemplate。- 使用工具箱中的标准组件，我为名称添加了文本框，并为其他字段添加了下拉列表。（我没有删除 EmpId，所以我不需要它）。- 这是标记视图的其余部分：

输入以下信息进行注册： 姓名：  
出生日期：      
性别：
部门编号：
职位：

- 这是用于详细信息视图的插入事件的 CS 文件背后的代码

protected void DetailsView1_ItemInserting1(object sender, DetailsViewInsertEventArgs e) { string id = System.Guid.NewGuid().ToString(); 文本框 txt_name = (TextBox)DetailsView1.FindControl("EmpId"); e.Values["EmpId"] = id;

```
 DropDownList ddl_month = (DropDownList)DetailsView1.FindControl("DDL_Month");
    string month = ddl_month.SelectedValue;
    e.Values["DDL_Month"] = month;

    DropDownList ddl_day = (DropDownList)DetailsView1.FindControl("DDL_Day");
    string day = ddl_day.SelectedValue;
    e.Values["DDL_Day"] = day;

    DropDownList ddl_year = (DropDownList)DetailsView1.FindControl("DDL_Year");
    string year = ddl_year.SelectedValue;
    e.Values["DDL_Year"] = year;

    DropDownList ddl_sex = (DropDownList)DetailsView1.FindControl("DDL_Sex");
    string sex = ddl_sex.SelectedValue;
    e.Values["DDL_Sex"] = sex;

    DropDownList ddl_pos = (DropDownList)DetailsView1.FindControl("DDL_Pos");
    string pos = ddl_pos.SelectedValue;
    e.Values["DDL_Pos"] = pos;

    DropDownList ddl_deptid = (DropDownList)DetailsView1.FindControl("DDL_DeptId");
    string deptid = ddl_deptid.SelectedValue;
    e.Values["DDL_DeptId"] = deptid;
} 
```

-您能否建议我如何将下拉列表中的三个选定值组合为出生日期并将其添加到数据库中。

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:29:41.400

To elaborate:

Yes that would be the first step. The connection string should be added to your web.config under the '' element:

[http://msdn.microsoft.com/en-us/library/bf7sd233.aspx](http://msdn.microsoft.com/en-us/library/bf7sd233.aspx)

You can then read this out in your code:

[Read connection string from web.config](https://stackoverflow.com/questions/6134359/read-connection-string-from-web-config)

The following shows a reasonably good general form for doing a database update into a SQL database based on values you're taking from a form - done in C# (which I'd recommend getting started with instead of VB.NET, for various good reasons)

[Update database with values from textbox](https://stackoverflow.com/questions/1449776/update-database-with-values-from-textbox)

This shows how to add the connection string directly inside the code instead of from the web.config, which may be simpler for you in the first instance. This shows how to do the database update by using 'parameters' in the query (the 'variables' if you like that are denoted with @ symbols). Using parameters is basic good practise that it's worth getting used to (don't worry too much about why, but you may want to research the 'SQL injection' technique that hackers use to attack websites). This is a good starting point for you. It may seem complex at first, but ask any developer with a few years of experience and they'll tell you it's generally the way to go. As you progress in development the tempting 'out of the box' stuff provided by .NET becomes increasingly limiting, and you lose the ability to finely tune performance and other characteristics of good applications.

The example I've given is actually still relative simple. As you develop, there are other aspects you should start bringing into your code, especially creating methods that do the bit that accesses the database (by using a SQL query) in a separate class that gets called a 'Data Access Layer' (often an intermediate layer gets used called the 'Business Logic Layer' or similar, but don't worry about that yet).

Also the example I've given should really be packaging up some of the code in methods that give a clear indication of what the code is doing e.g. at a simpler level a method 'UpdateMachineDetails' could at least be used to encapsulate the code that updates the database.

There are lots of tutorials if you Google for it that show you how to update a datbase 'manually' in .NET, but the form I'm giving you puts you on a good track towards best practice that is used industry-wide by software developers.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:40:07.927

使用内置的 .NET 控件，如果您尝试删除已生成的字段，通常会遇到问题。让事情以这种方式工作的最佳选择是完全删除并重新添加您正在使用的控件，然后尝试更改您尝试使用模板的字段。你可能仍然有一些问题要让它工作，但应该不会太难。

以这种方式使用控件往往不够灵活，并且很难解决问题。这就是为什么大多数有经验的开发人员放弃这种“简单”的做事方式，并通过创建表单、读取值并将其传递给将执行相关 SQL 更新的方法来手动更新数据库。学习需要一些时间，但一旦掌握了窍门，它就会变得很容易，并解决了很多困难，试图解决您需要使用控件的非常特定的 .NET 方式。

# caliburn.micro - 为 Caliburn 托管窗口启用始终位于顶部

> ID：11729492
> 
> 赞同：2
> 
> 时间：2012-07-30T21:00:11.520
> 
> 标签：caliburn.micro

我有以下 ViewModel，我正在使用 Caliburn Micro。IWindowManager 实例已正确解析，并且所有代码都可以正常工作。如 TODO 注释所示，我需要获取对当前窗口的引用，以便切换 AlwaysOnTop 属性。我怎样才能做到这一点？

```
namespace CaliburnWizardPlay
{
[Export(typeof(DropWindowViewModel))]
public class DropWindowViewModel : PropertyChangedBase, IHaveDisplayName
{
    private readonly IWindowManager windowManager;

    [ImportingConstructor]
    public DropWindowViewModel(IWindowManager windowManager)
    {
        this.windowManager = windowManager;
    }

    public string DisplayName
    {
        get { return "Main Window"; }
        set { }
    }        

    public bool AlwaysOnTop
    {
        get { return Settings.Default.DropWindowAlwaysOnTop; }
        set
        {
            Settings.Default.DropWindowAlwaysOnTop = value;
            Settings.Default.Save();
            NotifyOfPropertyChange(() => AlwaysOnTop);
            //todo: toggle the AOT attribute of the window
        }
    }

    public void FileDropped(DragEventArgs eventArgs)
    {
        if (eventArgs.Data.GetDataPresent(DataFormats.FileDrop))
        {
            string[] droppedFilePaths = eventArgs.Data.GetData(DataFormats.FileDrop, true) as string[];
            foreach (string path in droppedFilePaths)
            {
                MessageBox.Show(path);
            }

            windowManager.ShowWindow(new WizardViewModel());
        }
    }

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T17:18:38.053

您可以使用该方法的`settings`参数在创建的窗口上使用包含属性名-值对的字典`ShowWindow`设置任何属性（例如[Topmost ）：](http://msdn.microsoft.com/en-us/library/system.windows.window.topmost.aspx)

```
windowManager.ShowWindow(new WizardViewModel(), 
    settings: new Dictionary<string,object> { {"Topmost", AlwaysOnTop} }); 
```

如果您想更改`Topmost`已创建窗口的属性，我会看到三个选项（按优先顺序）：

1.  在 上创建一个`AlwaysOnTop`属性`WizardViewModel`并将视图模型存储在私有字段中并将 委托`AlwaysOnTop`给`WizardViewModel`：

    ```
    private WizardViewModel wizardViewModel;

    public void FileDropped(DragEventArgs eventArgs)
    {
        //...
        wizardViewModel = new WizardViewModel()
        windowManager.ShowWindow(wizardViewModel);
    }

    public bool AlwaysOnTop
    {
         get { return Settings.Default.DropWindowAlwaysOnTop; }
         set
         {
             //...
             if (wizardViewModel != null)
                 wizardViewModel.AlwaysOnTop = value;
         }
    } 
    ```

    在您看来，您可以将`WizardViewModel`'`AlwaysOnTop`属性绑定到窗口的`TopMost`属性。

2.  您可以使用[Application.Windows](http://msdn.microsoft.com/en-us/library/system.windows.application.windows.aspx)来检索窗口。例如`Name`，使用设置字典设置创建的窗口的属性，然后：

    ```
    windowManager.ShowWindow(new WizardViewModel(), 
        settings: new Dictionary<string,object> 
            { {"Topmost", AlwaysOnTop}, {"Name", "WizardWindow"} });

    public bool AlwaysOnTop
    {
         get { return Settings.Default.DropWindowAlwaysOnTop; }
         set
         {
             //...
             var wizardViewModel = Application.Current.Windows.OfType<Window>()
                 .SingleOrDefault(w => w.Name == "WizardWindow");
             if (wizardViewModel != null)
                 wizardViewModel.AlwaysOnTop = value;
         }
    } 
    ```

3.  从 派生`WindowManager`并将其注册到您的中`Bootstrapper`，然后您可以覆盖`CreateWindow`等`EnsureWindow`方法以将创建的窗口存储在某处设置附加属性等。

# c# - 如何将 google play 安装统计信息下载到我的数据库中？

> ID：11729494
> 
> 赞同：1
> 
> 时间：2012-07-30T21:00:13.193
> 
> 标签：c#

我想找到一种方法来自动提取我公司在 Google Play 中的每个应用程序的总安装量。我想把它引入我们自己的内部数据库，这样我们就可以将它与谷歌分析和我们已经拥有的应用内信息结合起来。

任何人都可以提供我需要下载的 SDK 或 API，以及一些有用的提示来持续自动处理此提要。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:39:57.530

我正在调查这个，并在我的搜索中看到了这个问题。

这个问题的答案表明你需要收集答案。 [Google Play 开发者统计 API](https://stackoverflow.com/questions/11971748/google-play-developer-statistics-api)

这表明您可以手动下载 csv 文件。 [https://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=139628&topic=16285&ctx=topic](https://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=139628&topic=16285&ctx=topic)

您可以尝试使用 selenium 自动下载 csv 文件，然后将其读入。

此页面上的答案也可能对您有所帮助。 [是否有 API 可以在 Google Play 上获取销售报告？](https://stackoverflow.com/questions/11141764/is-there-an-api-to-get-sales-report-on-google-play)

# javascript - Jquery下拉菜单垂直

> ID：11729497
> 
> 赞同：1
> 
> 时间：2012-07-30T21:00:26.327
> 
> 标签：javascript, jquery, css, twitter-bootstrap

我想用 twitter bootstrap 做一个垂直的下拉菜单。我的下拉链接是同一类 CSS。但是当我选择其中一个时，两个下拉链接会滑动。

谢谢你的帮助。

```
<ul class="nav nav-list">
 <li class="nav-header"><a href="">Ac</a></li>
 <li class="nav-header main"><a href="">Pla</a>
  <ul>
    <li class="nav-subheader"><a href="">Qua</a></li>
    <li class="nav-subheader"><a href="">Qua1</a></li>
    <li class="nav-subheader"><a href="">Qua2</a></li>
 </ul></li>

<li class="nav-header main"><a href="">Proj</a>
 <ul>
   <li class="nav-subheader"><a href="#/1">Sou</a></li>
   <li class="nav-subheader"><a href="#/2">Sou1</a></li>
   <li class="nav-subheader"><a href="#/3">Sou2</a></li>
   <li class="nav-subheader"><a href="#/4">Sou3</a></li>
 </ul></li>

  <li class="nav-header"><a href="">Cen</a></li>
  <li class="nav-header"><a href="">Mes</a></li>
 </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:12:51.427

您缺少一些关键课程和信息。

查看我创建的 jFiddle：http: [//jsfiddle.net/KhCrm/](http://jsfiddle.net/KhCrm/)

确保你已经包含了相关的 JS/CSS（真正需要的 2 个是 dropdown.js 和 bootstrap.css。

# ios - 如何从 UIScrollView 内的 UIButton 传递延迟滚动手势？

> ID：11729499
> 
> 赞同：0
> 
> 时间：2012-07-30T21:00:43.140
> 
> 标签：ios, xcode, uiscrollview, uibutton

我有一个包含几个 UIButtons 的 UIScrollView。当用户输入触摸事件时，每个按钮都被连接以采取行动，因此他们可以将手指放在按钮上，并且在它被抬起之前不会被选中。目前，如果我做出滑动手势来快速滚动 UIScrollView，那么即使手势直接发生在 UIButton 上，滚动视图也会按预期移动。但是，如果我在 UIButton 上按住手指的时间过长（大约 1 秒），UIScrollView 将不再识别手势并且在手指抬起之前无法滚动。

我想知道他们是否是一种始终让 UIScrollView 识别滚动手势的方法？请注意，如果我在没有 UIButton 的位置触摸 UiScrollView，这不是问题 - 然后它会按预期滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T22:48:15.087

可能值得尝试让您`UIButton`做出回应`UIControlEventTouchDown`（也许是空的动作）。我不确定这是否可行，但从概念上讲，我认为它应该让`UIButton`捕捉立即触动。

（还要确保您没有`delaysContentTouches`在滚动视图上启用。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:20:51.993

我在这里找到了答案：[UIScrollview with UIButtons - how to recreate springboard?](https://stackoverflow.com/questions/650437/iphone-uiscrollview-with-uibuttons-how-to-recreate-springboard)

本质上，我必须扩展 UIScrollView 并覆盖 touchesShouldCancelInContentView，让它总是返回 YES。

# javascript - jqGrid - 保存内联编辑不起作用

> ID：11729501
> 
> 赞同：0
> 
> 时间：2012-07-30T21:00:53.313
> 
> 标签：javascript, jquery, jqgrid

我有一个 jqGrid，其中包含使用内联添加/编辑功能的用户列表。出于某种原因，我无法让 jqGrid 保存`saveEdit`调用我的函数时所做的编辑，但如果我按下`enter`键，数据将保存。如果我注释掉`inlineNav`jqGrid 的行，一切都会按预期工作。

`saveEdit`澄清一下，当我的函数运行时，不会向服务器发送任何请求。当我按下回车键时，会向服务器发送一个请求。知道发生了什么吗？

这是我的代码：

```
var editParams = {
    afterSubmit: processResponse, 
    successfunc: function(response) {
        var processed = processResponse(response);
        if(processed[0] !== true) {
            $.jgrid.info_dialog($.jgrid.errors.errcap, processed[1], $.jgrid.edit.bClose);
        }
        return processed[0];
    }, 
    bottominfo: 'Fields marked with an (*) are required', 
    keys: true
};
$.extend($.jgrid.edit, editParams);
$('#grid')
    .jqGrid({
        datatype: 'json', 
        colNames: ['User ID', 'First Name', 'Last Name', 'Email'], 
        colModel: [
            {name: 'usr_id', jsonmap: 'usr_id', width: 75, editable: true, editrules: {required: true}, formoptions: {elmprefix: '(*) '}}, 
            {name: 'usr_fname', jsonmap: 'usr_fname', width: 75, editable: true, editrules: {required: true}, formoptions: {elmprefix: '(*) '}}, 
            {name: 'usr_lname', jsonmap: 'usr_lname', width: 75, editable: true, editrules: {required: true}, formoptions: {elmprefix: '(*) '}}, 
            {name: 'usr_email', jsonmap: 'usr_email', width: 125, editable: true, editrules: {required: true}, formoptions: {elmprefix: '(*) '}}
        ], 
        grouping: true, 
        shrinkToFit: false, 
        height: 200, 
        width: 800, 
        rowNum: 20, 
        rowList: [10, 20, 30, 40, 50, 100], 
        repeatitems: false, 
        ignoreCase: true, 
        jsonReader: { repeatitems: false, id: 'usr_id'}, 
        pager: '#grid_pager', 
        url: 'dataurl.php', 
        editurl: 'editurl.php', 
        ondblClickRow: inlineEdit, 
        onSelectRow: saveEdit
    })
    .jqGrid('navGrid', '#users_pager', {add: false, edit: false, del: false, refresh: false, search: false})
    .jqGrid('inlineNav', '#users_pager', {edit: false, save: false, cancel: false}); //If I comment out this line, everything works perfectly

var lastSel;
/* Start editing the row */
function inlineEdit(id, iRow, iCol) {
    $(this).jqGrid('editRow', id, true, function() { focusRow(id, iCol, this); });
}

function focusRow(id, iCol, table) {
    var ele = document.getElementById(id + '_' + table.p.colModel[iCol].name), 
        length = ele.value.length;
    ele.focus();
    if(ele.setSelectionRange) { //IE
        ele.setSelectionRange(length, length);
    }
    else if(ele.createTextRange) {
        var range = ele.createTextRange();
        range.collapse(true);
        range.moveEnd('character', length);
        range.moveStart('character', start);
        range.select();
    }
}

function saveEdit(id) {
    if(id && id != $(this).data('lastSel')) {
        /* Save the last selected row before changing it */
        $(this).jqGrid('saveRow', $(this).data('lastSel'), editParams);
        $(this).data('lastSel', id);
    }
    $(this).data('lastSel', id);
} 
```

提前感谢任何帮助我的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T02:41:05.063

好吧，伙计，您无论如何都没有使用 inlineNav，为什么要将它保留在那里？第二，当你按下回车键时，它不会调用你的 saveEdit 函数，默认情况下只有这样的功能。

我看到您正在将您的记录保存在 onSelectRow 属性上，当按下回车键时，在内联编辑后，这不会被调用。你可以让你的钥匙：假。它不会在输入按键时触发对服务器的请求。

# java - 更新 Robotium .jar 文件

> ID：11729503
> 
> 赞同：0
> 
> 时间：2012-07-30T21:01:10.020
> 
> 标签：java, android, eclipse, jar, robotium

我一直在使用 Robotium 3.3，但看到大约一周前添加了一个方法，这将允许用户为使用 截取的任何屏幕截图输入名称`solo.takeScreenshot(String name)`，但是，我不知道如何让这个方法工作。我试图从 github 下载更新的文件，然后使用下载的文件创建一个 java 项目，然后将该项目导出到 .jar 文件，但我没有任何运气让该方法正常工作。这是我正在谈论的方法的链接。如果有人可以提供任何帮助或指导，那就太好了！

链接：[https ://github.com/jayway/robotium/blob/master/robotium-solo/src/main/java/com/jayway/android/robotium/solo/Solo.java](https://github.com/jayway/robotium/blob/master/robotium-solo/src/main/java/com/jayway/android/robotium/solo/Solo.java)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T04:32:09.907

我正在使用robotium-solo-3.4.1.jar

![添加机器人 jar 参考](../Images/fbd09065010e6eafe6512d27ef569526.png)

我使用此代码：

```
int i=1;

SimpleDateFormat sdf = new SimpleDateFormat("ddMMyyyyHHmmss");
String currentDateandTime = sdf.format(new Date());

solo.takeScreenshot(currentDateandTime+"_1"+i); 
```

我得到这样的图像，[/sdcard/Robotium-Screenshots/05092012180241_1.jpg]

![在此处输入图像描述](../Images/9219ae5b947d8668552081f7cfd65d3b.png)

我希望这能帮到您。谢谢。

# c# - c#中的goto及其用法

> ID：11729511
> 
> 赞同：0
> 
> 时间：2012-07-30T21:01:28.263
> 
> 标签：c#

我有一个子程序。它比较值是否为空然后做某事。例如，如果它们为空，则会引发警告。代码工作正常。但是当值不为空时，仍然会弹出警告。请帮我纠正逻辑。

谢谢。

```
private void btnNew_Click(object sender, EventArgs e)
    {
        try
        {
            if (txtbox1.Text.ToString().Trim() == string.Empty)
            {
                goto Msg1;
            }
            if (txtbox2.Text.ToString().Trim() == string.Empty)
            {
                goto Msg2;
            }
            DataRow dr = mydataSet.Tables[0].NewRow();
            dr["Descript"] = txtbox1.Text;
            dr["Abbr"] = txtbox2.Text;
            dr["SortOrder"] = Convert.ToDecimal(numericOrder.Value);
            if (SortOrders.Contains((decimal)dr["SortOrder"]))
            {
                goto Msg3;
            }
            mydataSet.Tables[0].Rows.Add(dr);
            dgv.DataSource = mydataSet.Tables[0];
        Msg1:
            MessageBox.Show("Description is required.");
        Msg2:
            MessageBox.Show("Abbr is required.");
        Msg3:
            MessageBox.Show("Please select another one, this one is already used.");
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

从上面的代码中，你看到了。如果 txtbox1 有一些值，程序仍然显示 Msg1。我想避免它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T21:04:41.717

因为标签只是标签，它们之后的代码是按顺序执行的。

为什么你不能这样做：

```
 try
    {
        if (txtbox1.Text.ToString().Trim() == string.Empty)
        {
            MessageBox.Show("Description is required.");
            return;
        }
        if (txtbox2.Text.ToString().Trim() == string.Empty)
        {
            MessageBox.Show("Abbr is required.");
            return;
        }
        DataRow dr = mydataSet.Tables[0].NewRow();
        dr["Descript"] = txtbox1.Text;
        dr["Abbr"] = txtbox2.Text;
        dr["SortOrder"] = Convert.ToDecimal(numericOrder.Value);
        if (SortOrders.Contains((decimal)dr["SortOrder"]))
        {
            MessageBox.Show("Please select another one, this one is already used.");
            return;
        }
        mydataSet.Tables[0].Rows.Add(dr);
        dgv.DataSource = mydataSet.Tables[0];
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    } 
```

它更具可读性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T21:03:43.997

重组你的代码以避免`goto`- 它是一个遗物，在一个正确的面向对象的代码库中没有多大用处。

从方法返回、抛出异常或构建错误字典都是比使用更好的选择`goto`。

例如，您可以`List<string> errors`在遇到错误情况时添加一个。

如果为空，则没有遇到错误，如果不是，则有。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T21:05:27.177

这是一个很好的案例，`goto`但走错了路。改用这样的东西。

```
private void btnNew_Click(object sender, EventArgs e)
{
    try
    {
        bool error = false;
        if (txtbox1.Text.ToString().Trim() == string.Empty)
        {
            MessageBox.Show("Description is required.");
            error = true;
        }
        if (txtbox2.Text.ToString().Trim() == string.Empty)
        {
            MessageBox.Show("Abbr is required.");
            error = true;
        }
        if (SortOrders.Contains(Convert.ToDecimal(numericOrder.Value)
        {
            MessageBox.Show("Please select another one, this one is already used.");
            error = true;
        }

        if(error)
            return;

        DataRow dr = mydataSet.Tables[0].NewRow();
        dr["Descript"] = txtbox1.Text;
        dr["Abbr"] = txtbox2.Text;
        dr["SortOrder"] = Convert.ToDecimal(numericOrder.Value);
        mydataSet.Tables[0].Rows.Add(dr);
        dgv.DataSource = mydataSet.Tables[0];
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
} 
```

## 编辑

只是发现我的代码实际上与他的第一个示例不同，因为无论发生多少错误，它都只显示第一个错误。更新了我的示例以适应这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T21:05:37.497

我一直被教导要像瘟疫一样避免 goto，这是我多年来一直遵循的。在编写代码时，我什至从未考虑过它是一种选择。

不过考虑一下，我确实在几年前读过一篇文章（我现在找不到了），它说只有当你使用它来跳转代码而不是向上跳转时，你才能可靠地使用 goto：一个被坚持的规则这里。

在此处查看更多信息：[是否有人仍在 C# 中使用 [goto]，如果是，为什么？](https://stackoverflow.com/questions/6545720/does-anyone-still-use-goto-in-c-sharp-and-if-so-why)

有更好的使用 goto 语句的方法，对于 instacne 使用“return”（在方法中间使用时）、“break”和“continue”。您曾经使用过其中一种吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T21:10:10.010

```
private void btnNew_Click(object sender, EventArgs e)
{
    try
    {
        var description = txtbox1.Text.Trim();
        if (string.IsNullOrEmpty(description))
        {
            MessageBox.Show("Description is required.");
            return;
        }
        var abbr = txtbox2.Text.Trim();
        if (string.IsNullOrEmpty(abbr))
        {
            MessageBox.Show("Abbr is required.");
            return;
        }
        var numericOrderValue = Convert.ToDecimal(numericOrder.Value);
        if (SortOrders.Contains(numericOrderValue)
        {
            MessageBox.Show("Please select another one, this one is already used.");
            return;
        }

        DataRow dr = mydataSet.Tables[0].NewRow();
        dr["Descript"] = description;
        dr["Abbr"] = abbr;          
        dr["SortOrder"] = numericOrderValue;            
        mydataSet.Tables[0].Rows.Add(dr);
        dgv.DataSource = mydataSet.Tables[0];
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-30T21:06:12.213

```
private void btnNew_Click(object sender, EventArgs e)
    {
        try
        {
            if (txtbox1.Text.ToString().Trim() == string.Empty)
            {
                MessageBox.Show("Description is required.");
            }
            if (txtbox2.Text.ToString().Trim() == string.Empty)
            {
                MessageBox.Show("Abbr is required.");
            }
            DataRow dr = mydataSet.Tables[0].NewRow();
            dr["Descript"] = txtbox1.Text;
            dr["Abbr"] = txtbox2.Text;
            dr["SortOrder"] = Convert.ToDecimal(numericOrder.Value);
            if (SortOrders.Contains((decimal)dr["SortOrder"]))
            {
               MessageBox.Show("Please select another one, this one is already used.");
            }
            mydataSet.Tables[0].Rows.Add(dr);
            dgv.DataSource = mydataSet.Tables[0];

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

试试这个。有用。

# iphone - 缩放图像以适合平铺

> ID：11729512
> 
> 赞同：0
> 
> 时间：2012-07-30T21:01:31.937
> 
> 标签：iphone, objective-c, cocoa

让我从我的代码开始：

```
UIImage *tempImage = [UIImage imageNamed:@"TileMap.gif"];
[tempImage drawInRect:CGRectMake(0, 0, tileSize, tileSize)];

mapLabels[w][h] = [[UILabel alloc] initWithFrame:CGRectMake(cursor.x, cursor.y, tileSize, tileSize)];
mapLabels[w][h].text = [NSString stringWithFormat:@"%d", map[w][h]];
mapLabels[w][h].backgroundColor = [UIColor colorWithPatternImage: tempImage];
mapLabels[w][h].textAlignment = UITextAlignmentCenter;

[self.view addSubview:mapLabels[w][h]]; 
```

我用`UILabels`. 我想`Image`在标签上放一个，所以我使用了`colorWithPatternImage`. 它可以工作，但我的平铺图片分辨率非常高，我的`UILabel`平铺可以是任何大小，所以我需要图像大小相同。我目前正在尝试用它来扩展它`drawInRect`不起作用，有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:30:31.453

UIImages 有一个 scale 属性。您可以尝试以下方法：

```
tempImage.scale = mapLabels[w][h].tileSize.x / tempImage.tileSize.x 
```

# php - 进行数值递减

> ID：11729513
> 
> 赞同：-1
> 
> 时间：2012-07-30T21:01:36.637
> 
> 标签：php, numerical

有人可以帮我吗？我有一个变量，例如：

```
$page = '50';
$newpage = 'http://www.mydomain.com/page/'.$page.'';

I want new page echo such this:
http://www.mydomain.com/page/50
http://www.mydomain.com/page/49
......
.......
....... until page acho such:
http://www.mydomain.com/page/1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:18:18.640

```
<?php
for($page=50;$page>0;$page--) {
    $newpage = 'http://www.mydomain.com/page/'.$page.'';
    echo "$newpage\n";
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:17:15.053

看看这个`for`循环：

```
$prefix = 'http://www.mydomain.com/page/';
for ($page = 50; $page >= 1; $page--) {
    echo $prefix.$page;
} 
```

首先，变量`$page`被初始化。我使用`50`而不是`'50'`因为我们处理的是数字而不是字符串。

下一位是循环继续时的条件：`$page >= 1`- 所以循环将在`1`.

最后一部分是一个减量运算符，它`$page`为每个循环迭代减去 1。

最后，使用 concat 运算符 ( ) 将前缀和页码组合在一起`.`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T21:18:04.950

您正在寻找的是：

```
<?php
for($i=50; 0 <= $i; $i--){
    echo $i.'<br />';
}
?> 
```

如果您不想升到 0，请更改`<=`为`<`. 这将从 50 循环到 0 ，因此它将按顺序排列：

```
50
49
48
47
46
...
3
2
1
0 
```

这里 50 是您的起始号码，0 是您的最后一个号码。所以在这个例子中它打印出 50 直到 0。

# ruby - 红宝石上的叉子

> ID：11729514
> 
> 赞同：0
> 
> 时间：2012-07-30T21:01:37.280
> 
> 标签：ruby, fork

似乎是一个简单的问题，但我无法弄清楚。而且我是 ruby​​ on rails 的新手。

```
1    pid = Process.fork
2    
3      if pid.nil? then   
4        puts "Child process"
5      else
6        puts " Continuing parent proceesss"
7      end  
8       
9      puts "This line should be printed only once, by parent" 
```

我的理解是第 9 行应该只由父母打印一次。但是，它被打印了两次。由父母和孩子！

如何*仅*在父级中执行第 9 行？即我希望孩子在第 4 行之后*退出*。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T21:06:46.330

哈，你几乎拥有它。您需要放在`exit`第 4 行之后。

```
if pid.nil? then
    puts "Child process"
    exit
else
    ... 
```

分叉一个进程*旨在*允许两个进程继续，对吗？您将您的流程分成两个副本，然后它们都从它们被分叉的地方继续。如果你想让孩子退出，你应该*告诉*它退出。

# linux - 如何停止 SYN_SENT？

> ID：11729517
> 
> 赞同：23
> 
> 时间：2012-07-30T21:01:43.380
> 
> 标签：linux, dedicated-server

即使在重新启动服务器后，运行`netstat`也会显示数百条这条线——它再次开始发送，导致与该 IP 的许多连接。

```
tcp        0      1 server1700.skdedicate:36283 154.45.206.59:https   SYN_SENT
tcp        0      1 server1700.skdedicate:36283 154.45.206.59:https   SYN_SENT
tcp        0      1 server1700.skdedicate:36283 154.45.206.59:https   SYN_SENT
tcp        0      1 server1700.skdedicate:36283 154.45.206.59:https   SYN_SENT
tcp        0      1 server1700.skdedicate:36283 154.45.206.59:https   SYN_SENT 
```

我停止了所有脚本，但它仍在继续尝试。

我知道这意味着 IP 没有响应，`SYN_SENT`但我该如何阻止这些`SYN_SENT`？或者什么是最好的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2014-06-11T20:14:14.277

这个问题似乎得到了很多意见，但没有答案，所以我决定为任何寻求解决方案的人回答我自己的问题。

首先，知道原因是解决方案的一半。我遇到了所谓的 SYN 洪水攻击，它使用 HTTP 协议行为来攻击自己

简而言之，远程客户端尝试通过发送 SYN 与您的服务器建立连接，您的服务器以 SYN_ACK 回复（在您的日志中您将看到 SYN_SENT）并等待它收到 ACK。如果在 xx 秒内未收到 ACK，您的服务器将再次发送 SYN_ACK，....再一次....再一次。它最终会达到配置的阈值并停止接受任何更多的 SYN 请求，从而使您的服务器无响应。发生在我身上的症状之一是我的网站响应了一次，好像没有任何问题，但在接下来的 xx 次中没有响应。

![HTTP 协议 SYN](../Images/f5a7b13394ad5ee29090049c49ffbced.png)

对我有用的解决方案是启用 SYN cookie，SSH 进入您的服务器，使用您喜欢的编辑器打开以下文件。我在这个例子中使用 vi

```
vi /etc/sysctl.conf 
```

并将这些行添加到文件中，然后重新启动服务器。希望这能像对我一样阻止攻击

```
net.ipv4.tcp_syncookies = 1
net.ipv4.tcp_max_syn_backlog = 2048
net.ipv4.tcp_synack_retries = 3 
```

我使用的是 CentOS，我认为上述解决方案适用于所有发行版，但如果它没有为您的 linux 发行版搜索“如何停止 SYN Flooding Attack”

附带说明一下，阻止发起 SYN 请求的 IP 可能无济于事，因为攻击者很可能已经欺骗了 IP

# javascript - 从外部网站获取 JSON 数据

> ID：11729524
> 
> 赞同：0
> 
> 时间：2012-07-30T21:02:02.780
> 
> 标签：javascript, jquery, html, json, cordova

我正在尝试使用以下代码从网站获取 JSON 数据，但我收到错误 Uncaught SyntaxError: Unexpected identifier at file:///android_asset/www/projectName.html:1 如果我将网站上的数据保存为一个 .json 文件我可以很好地访问它，但如果我从网站访问它就不行。我如何从网站上完成这项工作？

HTML：

```
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
    </script>
<script type="text/javascript">
        $(document).ready(function(){
            $("button").click(function(){
            $.get('http://example.ca/log_sheets.json', function(data) {
                alert('get performed');
                var obj = eval ("(" + data + ")");
                $("p").html(obj[0].log_sheet.activity_type);
            });
        });
    });
</script>
</head>

<body>
    <h2>Heading</h2>
    <p>Display</p>
    <button>Click me</button>
</body>
</html> 
```

JSON数据示例：

```
[{"log_sheet":{"activity_type":"Normal","activity_value":null,"carbs_value":25.0, ect... }}] 
```

使用 phonegap 运行 html 页面的代码：

```
package com.example.projectName;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;
import org.apache.cordova.*;

public class MainActivity extends DroidGap {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/projectName.html");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:06:41.557

```
file:///android_asset/www/projectName.html 
```

该链接看起来像一个本地文件，因此即使您将其映射到您的网络服务器中作为应该预处理的东西，它也会按原样出现。

如果它真的是您项目的一部分，看起来您必须发布相关代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:54:17.133

如果 jQuery 认为您正在检索 JSON（通过服务器提供的 mime 类型、 的最终参数`$.get(...,'json')`或使用[`$.getJSON`](http://api.jquery.com/jQuery.getJSON/)），则传递给回调的数据将已经是 JavaScript 对象。

在这种情况下，你不会想要`eval`它。

# java - 带有子组件的 JFrame 窗口

> ID：11729531
> 
> 赞同：0
> 
> 时间：2012-07-30T21:02:33.353
> 
> 标签：java, swing, user-interface, jframe, jcomponent

所以我创建了这个`JFrame`窗口，里面有很多项目，比如`JLabel`，`JComboBox` `JTextField`等等……在底部它有一个“下一个” `JButton`。

我希望当用户单击下一个按钮时，屏幕上的所有内容都应该被删除并替换为我创建的其他类的内容。

每当我单击下一步按钮时，我只能设法打开一个新`JFrame`窗口。有人可以告诉我如何从屏幕上删除所有项目并用另一个班级的项目替换它们。

谢谢。我是新手，所以请给我最简单的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T21:04:55.850

这听起来像是[CardLayout的工作](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

您可以在 JFrame 的 BorderLayout.SOUTH 位置创建一个基本面板，其中包含导航按钮，并在主面板中添加了许多面板，由 CardLayout 管理。

请参阅[使用 Java Swing 创建向导对话框](http://java.sun.com/developer/technicalArticles/GUI/swing/wizard/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-30T21:08:51.277

虽然系统的东西是使用CardLayout，但如果你不想学习如何使用它，你可以模仿它！创建一个面板，将除下一步按钮之外的所有项目添加到此面板。使用 BorderLayout 将面板放在框架中下一个按钮的顶部。现在，当用户按下下一个按钮时，您将删除面板 (jframe.remove(panel))。创建一个新的 JPanel 并在下一个按钮的顶部再次使用 BorderLayout 添加它。

# java - Java 和 Flash Actionscript 的异或异

> ID：11729534
> 
> 赞同：1
> 
> 时间：2012-07-30T21:02:49.307
> 
> 标签：java, actionscript, xor

我目前正在编写一个 Java 来模拟 Flash ActionScript 之类的返回值。

这是我让两个应用程序返回不同值的问题。

在 ActionSript 3.0 下

```
k = 942945590;
z = 3180323136;

trace(k ^ z); 
```

结果将返回“-2051287946”

当我尝试在 Java 中做到这一点时。

```
 long k = 942945590L;
    long z = 3180323136L;
System.out.println (k ^ z); 
```

结果返回正值而不是“2243679350”

知道如何解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:16:26.017

结果相同，但表示不同，因为您的 Java`long`是 64 位的，而在 Actionscript 中，您可能正在使用 32 位算术：

```
-2051287946 ==         0x85BBD476 (32 bit signed 2's complement)
 2243679350 == 0x0000000085BBD476 (64 bit signed 2's complement) 
```

如果您希望结果匹配，请在 Java 代码中使用`int`而不是。`long`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:23:24.900

看起来 ActionScript 要么在 32 位算术中进行计算，要么更可能的是，该`trace()`语句正在格式化结果，就好像它是 32 位一样。

# r - 如何在 R 中使用 multinom() 进行预测

> ID：11729547
> 
> 赞同：8
> 
> 时间：2012-07-30T21:03:43.777
> 
> 标签：r, predict, multinomial

我正在尝试使用特定值计算预测概率，但 R 显示以下错误：

```
Error in model.frame.default(Terms, newdata, na.action = na.omit, xlev = object$xlevels) : 
  variable lengths differ (found for 'x')
In addition: Warning message:
'newdata' had 1 rows but variable(s) found have 513 rows 
```

这就是我想要做的：x1 是一个具有 12 个级别的因子，而 x2 也是一个具有 3 个级别的因子。

```
res4 <- multinom(y ~ x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8 + x9 - 1, data=dta, Hess=T)

nd <- data.frame(x11=0.10331384, x12=0.07992203, x13=0.06237817, x14=0.03313840, x15=0.12280702, x16=0.07407407, x17=0.07407407, x18=0.10331384, x19=0.08966862, x110=0.07017544, x111=0.15009747, x112=0.03703704, x22=1, x23=0, x3=1, x4=1, x5=mean(x5), x6=mean(x6, na.rm=T), x7=mean(x7), x8=mean(x8), x9=mean(x9))

predict(res4, type="probs", newdata=nd) 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T21:37:40.900

你`nd` `data.frame`应该有九个变量，每个 x 一个。

```
library(nnet)
dta=data.frame(replicate(10,runif(10)))
names(dta)=c('y',paste0('x',1:9))
res4 <- multinom(y ~ x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8 + x9 - 1, data=dta, Hess=T)
nd <- data.frame(x1=0.10331384, x2=0.07992203, x3=0.06237817, x4=0.03313840, x5=0.12280702, x6=0.07407407, x7=0.07407407, x8=0.10331384, x9=0.08966862)
predict(res4, type="probs", newdata=nd) 
```

# shell - cat：无法打开'/tmp/drive/P0.RAW'：没有这样的文件或目录

> ID：11729554
> 
> 赞同：1
> 
> 时间：2012-07-30T21:04:25.117
> 
> 标签：shell, embedded-linux

下面粘贴的脚本会导致以下错误：

> cat：无法打开'/tmp/drive/P0.RAW'：没有这样的文件或目录

看起来脚本没有正确评估`$N`文件名。如何`$N`评估文件名类似于 P01L.RAW、P02L.RAW 等？

```
N=1
until [ $N -ge 10 ]; do
    cat bmpheader.bmp /tmp/drive/P0$NL.RAW > ./P0$NL.bmp
    ./quality_metric_test ./P0$NL.bmp
    N=$((N + 1))
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:20:49.097

您的问题是 bash 默认将所有大写字符解释为变量的一部分，因此它正在寻找`$NL`而不是`$N`. 这就是为什么它只返回`P0.RAW`，因为它`$NL`是一个不存在的变量。您可以通过轻微的语法调整轻松避免这种情况，使用大括号 ( `{`and `}`) 调用变量。替换这个：

```
cat bmpheader.bmp /tmp/drive/P0$NL.RAW > ./P0$NL.bmp
./quality_metric_test ./P0$NL.bmp 
```

有了这个：

```
cat bmpheader.bmp /tmp/drive/P0${N}L.RAW > ./P0${N}L.bmp
./quality_metric_test ./P0${N}L.bmp 
```

这应该够了吧。

# python - 在 Windows bat 脚本中禁用“暂停”

> ID：11729562
> 
> 赞同：9
> 
> 时间：2012-07-30T21:04:55.147
> 
> 标签：python, windows, batch-file, cmd

在 Windows 中，我正在运行一个 bat 脚本，该脚本当前以“暂停”结尾并提示用户“按任意键继续...”

在这种情况下我无法编辑文件，我需要终止脚本而不是挂起等待永远不会出现的输入。有没有办法可以运行它来禁用或规避提示？

我尝试过输入管道，但似乎没有帮助。这个脚本是通过 subprocess.Popen 从 python 运行的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-30T21:13:07.867

尝试执行`cmd.exe /c YourCmdFile < nul`

`YourCmdFile`- 批处理脚本的完整路径

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-12T17:26:30.923

```
subprocess.call("mybat.bat", stdin=subprocess.DEVNULL) 
```

将在 Windows 上调用`mybat.bat`和重定向输入`nul`（如其他答案所示禁用暂停）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-31T14:40:26.773

事实证明，这有点痛苦。来自 Maximus 的 nul 重定向效果很好，谢谢！

至于让它在 python 中工作，它归结为以下内容。我开始：

```
BINARY = "C:/Program Files/foo/bar.exe"
subprocess.call([BINARY]) 
```

试图添加重定向，但 subprocess.call 很好地逃避了一切，我们失去了重定向。

```
subprocess.call([BINARY + " < nul"])
subprocess.call([BINARY, " < nul"])
subprocess.call([BINARY, "<", "nul"]) 
```

使用 shell=True 不起作用，因为 BINARY 中的空间使它在试图找到可执行文件时窒息。

```
subprocess.call([BINARY + " < nul"], shell=True) 
```

最后，我不得不求助于 os.system 并逃避自己以获得重定向。

```
os.system(quote(BINARY) + " < nul") 
```

不理想，但它可以完成工作。

如果有人知道如何让最后一个子进程示例与二进制文件中的空间一起工作，那将不胜感激！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-25T09:51:49.520

对我来说，以下代码有效：

```
p = Popen("c:\script.bat <nul", cwd="c:\") 
```

# java - java中未选中和选中复选框的httpservlet请求getparameter

> ID：11729564
> 
> 赞同：3
> 
> 时间：2012-07-30T21:04:56.030
> 
> 标签：java, servlets, getparameter

我的表单上有几个复选框（大约 15 个），我遇到的问题是复选框的名称仅出现在枚举中，如果它们被选中，但我希望它们都被返回，以便当我打印数据时它将具有复选框的名称并说“已选中”或“未选中”。我想到了一种方法，我可以手动设置标志以查看存在的内容和不存在的内容，但这似乎并不高效。

```
public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
 {

        try
        {
            FileWriter writer = new FileWriter("OrderFormData.csv");
            writer.append("FieldName");
            writer.append(',');
            writer.append("Value");
            writer.append('\n');
            @SuppressWarnings("unchecked")
            Enumeration <String> paramNames = request.getParameterNames();
            while(paramNames.hasMoreElements()) 
            {
                String paramName = (String)paramNames.nextElement();
                writer.append(paramName);
                writer.append(',');
                String[] paramValues = request.getParameterValues(paramName);
                if (paramValues.length == 1)
                {
                    String paramValue = paramValues[0];
                    if (paramValue.length() == 0)
                    {
                        writer.append("No Value");
                        writer.append('\n');
                    }
                    else
                    {
                        writer.append(paramValue);
                        writer.append('\n');
                    }
                }
                else
                {
                    for(int i = 0; i<paramValues.length; i++)
                    {
                        writer.append(paramValues[i]);
                        writer.append(',');
                    }
                    writer.append('\n');
                }

            }
            writer.flush();
            writer.close();
        }
        catch(IOException e)
        {
             e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T21:30:01.243

您应该考虑一种解决方法，因为正如@Alex 告诉您的那样，未选中的复选框不是请求的一部分。

这只是一个想法，但例如：

```
<input type="hidden" name="checkboxNamesList" value="nameCheckbox1" />
<input type="hidden" name="checkboxNamesList" value="nameCheckbox2" />
<input type="hidden" name="checkboxNamesList" value="nameCheckbox3" />
<input type="hidden" name="checkboxNamesList" value="nameCheckbox4" /> 
```

然后，您可以`checkboxNamesList`从请求中获取（它将是一个字符串 []），因此您将拥有所有复选框参数名称。如果您获得其中一个复选框名称的参数并且值为 null，则表示未选中该复选框。

**编辑：澄清**

好吧，由于请求中不存在未选中的复选框，因此您不知道 JSP 中谁的复选框未选中，但您需要知道它才能在数据文件中写入诸如 checkbox_name1=unchecked 之类的内容。

那么，该怎么做呢？首先，您需要知道请求中存在哪些复选框（取消选中或不选中）。为此，您可以使用下面的代码并获取 JSP 中存在的所有复选框的名称：

```
String[] checkboxNamesList= request.getParameterValues("checkboxNamesList"); 
```

然后，让我们寻找未选中的复选框：

```
for (int i = 0; i < checkboxNamesList.length; i++) {

    String myCheckBoxValue = request.getParameterValues(checkboxNamesList[i]);

    // if null, it means checkbox is not in request, so unchecked 
    if (myCheckBoxValue == null)
        writer.append(checkboxNamesList[i] + "=unchecked");

    // if is there, it means checkbox checked
    else
        writer.append(checkboxNamesList[i] + "=checked");

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:24:33.413

您可以将隐藏字段与复选​​框一起使用。遍历它们并检查复选框选择的存在。

```
<input type="checkbox" name="fruit" value="Apple" />
<input type="hidden" name="fruit_option" value="Apple" />
<input type="checkbox" name="fruit" value="Orange" />
<input type="hidden" name="fruit_option" value="Orange" /> 
```

在服务器端做这样的事情：

```
Enumeration<String> paramNames = req.getParameterNames();
while(paramNames.hasMoreElements()) {
    String paramName = paramNames.nextElement();

    if (!paramName.endsWith("_option")) continue; // Skip checkboxes. Only process hidden fields

    String [] options = req.getParameterValues(paramName); // All options
    String [] selections = req.getParameterValues(paramName.replace("_option", "")); // Real checkboxes

    List <String> selectionList = Arrays.asList(selections); // Easier to work with

    // Iterate through checkbox group options
    for (String o : options) {
        boolean contains = selectionList.contains(o);
        // Do something with it. Write yes/no to file for example...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T21:10:29.043

未选中的框不会成为请求的一部分：请参阅[http://www.w3.org/TR/REC-html40/interact/forms.html#h-17.13.2](http://www.w3.org/TR/REC-html40/interact/forms.html#h-17.13.2)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-04-27T17:06:41.783

创建隐藏字段为

`<input type="checkbox" name="checkbox" checked/> <input type="hidden" name="checkbox" checked />`

现在在您的 servlet 中为： String[] names = request.getParameterValues("checkbox");

```
 PrintWriter pw = new PrintWriter(new File("/Desktop/sticker.txt"));
    for(int i=0; i < names.length; i++) {
        if(i + 1 < names.length && names[i].equals(names[i+1])) {
            pw.write(names[i] + ",true\n");
            ++i;
        } else {
            pw.write(names[i]+",false\n");
        }

    }
    pw.close(); 
```

# mysql - 如何对每个组的行进行递增编号

> ID：11729567
> 
> 赞同：0
> 
> 时间：2012-07-30T21:05:03.730
> 
> 标签：mysql

对于任何可以提供帮助的人，

我想在 mysql 中创建一个数据查询，以递增地对按事务 id 分组的行进行编号，并在下一个事务 id 上重新开始编号，依此类推。

这是我的数据样本：

```
transaction_id | run_index
--------------------------
1001           | 20
1001           | 25
1001           | 31
1001           | 40
1002           | 4
1002           | 11
1002           | 16
1002           | 21
1002           | 35
1003           | 07
1003           | 18
1003           | 44 
```

我希望它看起来像这样：

```
transaction_id | run_index | run_order
--------------------------------------
1001           | 20        | 1
1001           | 25        | 2
1001           | 31        | 3
1001           | 40        | 4
1002           | 4         | 1
1002           | 11        | 2
1002           | 16        | 3
1002           | 21        | 4
1002           | 35        | 5
1003           | 7         | 1
1003           | 18        | 2
1003           | 44        | 3 
```

这是针对数据分析临时报告的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:11:14.703

```
SELECT transaction_id, run_index, 
    CASE WHEN @transaction_id != transaction_id THEN (@run := 1) - !(@transaction_id := transaction_id) ELSE @run := @run + 1 END AS run_order
FROM (  SELECT transaction_id, run_index
        FROM table_name, (SELECT @transaction_id := NULL, @run := NULL) AS var
        ORDER by transaction_id ASC, run_index DESC) AS h 
```

这*应该*是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:13:27.653

```
SELECT transaction_id,
       run_index,
       IF(@CG=transaction_id, @I:=@I+1, @I:=1),
       @CG:=transaction_id AS run_order
FROM ...
INNER JOIN (SELECT @I:=0, @CG:=-1) x 
```

示例结果集：

```
+---------+--------------------------------+--------------+
| feed_id | IF(@CG=feed_id,@I:=@I+1,@I:=1) | @CG:=feed_id |
+---------+--------------------------------+--------------+
|       8 |                              1 |            8 |
|       8 |                              2 |            8 |
|       8 |                              3 |            8 |
|      14 |                              1 |           14 |
|      14 |                              2 |           14 |
|      14 |                              3 |           14 |
|      14 |                              4 |           14 |
|      14 |                              5 |           14 |
|      14 |                              6 |           14 |
|      14 |                              7 |           14 |
+---------+--------------------------------+--------------+ 
```

# ios - 为什么我的 iOS 应用压缩得这么好？

> ID：11729569
> 
> 赞同：4
> 
> 时间：2012-07-30T21:05:09.377
> 
> 标签：ios, xcode, packaging

我对 Xcode 如何如此有效地压缩我的 iOS 应用程序感到困惑。我所有的图像和声音文件加起来总共有 282 MB，大约有 3000 个项目。但是，.app 不知何故只有 126 MB！此外，.app 包内容中的文件大小相同，但文件夹大小都大约是一半大小。这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:50:31.683

主要原因可能是您的所有图像（假设图像占应用程序中 282 MB 的大部分）都是使用[pngcrush](http://en.wikipedia.org/wiki/Pngcrush)作为应用程序中的构建步骤进行压缩的。您实际上可以通过查看来自 xcode 的构建日志来观看此内容。

iOS SDK 中使用的特殊版本的 pngcrush 会导致 PNG 图像非标准（使它们在 Mac 或任何其他标准程序上无法查看）。相反，它们适用于 iOS 设备的显示硬件，这意味着它们的加载速度也会更快。

# objective-c - 使用 Category 将 ViewController 拆分为多个 .m 的正确方法

> ID：11729574
> 
> 赞同：0
> 
> 时间：2012-07-30T21:05:25.460
> 
> 标签：objective-c

我想将代码从视图控制器分成多个类别，以便多个编码器在视图控制器上工作，而无需编辑同一个文件。制作类别时收到以下警告：

```
"Category is implementing a method which will also be implemented by its primary class" 
```

我的类别 .h 文件：

```
#import "MyClass.h"
@interface MyClass (CategoryName)
@end 
```

我的类别 .m 文件：

```
#import "MyClass+CategoryName.h"

@implementation MyClass (CategoryName)
-(void) methodThatIsUsedAndExposedByMyClass { //a class that is made public by declaring in MyClass.h
}
@end 
```

我在视图控制器 MyOtherClass 中实例化 MyClass。将 MyClass.h 设置/导入 MyOtherClass 而不将类别暴露给它并且没有收到警告的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T22:11:43.433

老实说，鉴于您关注的症结是开发人员工作流程，您可能应该寻找基于工作流程而不是代码的解决方案。你看过 git ( [http://git-scm.com](http://git-scm.com) ) 吗？它是一个去中心化的版本控制系统，通常非常适合自动合并来自多个来源的更改。只要每个开发人员都在处理代码的不同部分，他们都可以对同一个文件进行更改而不会引起问题。

git*不太*擅长的是将多个更改合并到自动生成的文件，如 project.pbxproj。但这只会在添加和删除文件时出现——当两个或更多人正在修改同一个 .m 文件时，您所要做的就是`git pull`然后`git push`，它会为您计算插入和删除。

可能有一些方法可以用类别来完成您所询问的事情，但充其量，您会降低代码的可读性，以达到与代码无关的目的。版本控制系统需要一些时间来适应，但当您在一个多开发人员团队中时，它们是完全值得的。

# binding - Silverlight Scrollviewer 不显示绑定树视图

> ID：11729576
> 
> 赞同：0
> 
> 时间：2012-07-30T21:05:28.550
> 
> 标签：binding, silverlight-4.0, treeview

我有一个包含在 ScrollViewer 中的 4 行 1 列网格。这些行是绑定到对象层次结构（嵌套列表）的树视图。我正在使用 HierarchicalDataTemplate 来布置 TreeViewItem 节点及其子节点/ItemTemplates。

我的问题是，每当我展开 TreeViewItems 时，垂直滚动条都**不会**出现。奇怪的是，当我展开作为子节点一部分的 AccordionItem 时，*会显示水平滚动条。*

我尝试创建一个事件处理程序，只要 TreeViewItem 展开，它就会调用 UpdateLayout()，但这不会导致滚动条出现。我也尝试针对 TreeView、Grid 和 ScrollViewer 调用 UpdateLayout()。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:34:07.410

经过一些实验，这个问题的答案变得非常明显。

为 ScrollViewer指定**Height**属性是使一切按预期工作的缺失部分。

```
<ScrollViewer HorizontalScrollBarVisibility="Auto" 
              VerticalScrollBarVisibility="Auto" 
              Height="350">  <!-- THIS was the missing piece!! -->
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <Controls:TreeView Grid.Row="0" ItemsSource="{Binding ListOne}" 
       ItemTemplate="{StaticResource ListOneTemplate}" >
    </Controls:TreeView>

    <Controls:TreeView Grid.Row="1" ItemsSource="{Binding ListTwo}" 
       ItemTemplate="{StaticResource ListTwoTemplate}" >
    </Controls:TreeView>

  </Grid>
</ScrollViewer> 
```

FWIW，我尝试了许多其他解决方案，包括为 Grid、GridRows 和 TreeView 设置高度和最大高度。我还尝试创建一个事件以在网格高度更改时设置滚动查看器的高度，并在树视图项更改时触发级联 UpdateLayouts() 的事件。

在 ScrollViewer 上设置高度是我发现使一切按预期工作的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T07:46:19.500

此外，您可以设置行定义：

```
 <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/> // tree view position
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions> 
```

树视图将占用屏幕的可用空间，如有必要，将显示滚动条。

# c# - 不应该设置实体框架的 ID

> ID：11729580
> 
> 赞同：3
> 
> 时间：2012-07-30T21:05:48.440
> 
> 标签：c#, .net, entity-framework, orm, entity-framework-4.1

我有以下实体模型：

![实体模型](../Images/6d2290a2ef47c245df2d32a1c77905af.png)

我添加了一堆任务并开始处理这些任务。每次任务完成后，我想记录有关它的信息。

我使用以下代码执行此操作：

```
TASK scheduledTask = entities.TASKs.First(x => x.TASK_NAME == e.ClassName);
scheduledTask.NEXT_RUN = e.NextRun;
entities.SaveChanges();

TASK_LOG logMsg = new TASK_LOG()
{
    TASK = scheduledTask,
    MESSAGE = e.TaskResult.Message,
    STATUS = e.TaskResult.Status ? "Successful" : "Failure",
    TIMESTAMP = e.CompletedTime
};
entities.TASK_LOG.AddObject(logMsg);
entities.SaveChanges(); 
```

但是，我收到一个异常，指出我无法修改 TASK_LOG 对象的 ID 属性。我看不到我的代码将如何修改`logMsg`对象 ID 属性。

注意：两个实体中的 ID 属性均由数据库生成并设置为`StoreGeneratedPattern`- Identity。

**编辑：**

第二次运行 - 现在我收到关于在第一次`SaveChanges`通话时打开/可用连接的错误。

第 3 次运行 - 出现错误 Store update、insert 或 delete 语句影响了意外数量的行 (0)。在最后一次`SaveChanges`通话中。

这种错误不一致使其难以修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T04:36:20.380

我怀疑问题可能是因为您在通过 AddObject 附加到上下文之前设置了 logMsg.TASK 属性。由于您可以访问外键，因此我建议使用 TASK_ID 属性而不是 TASK 导航属性来创建引用。请尝试将此代码替换为您的 logMsg：

```
TASK_LOG logMsg = new TASK_LOG()
{
    TASK_ID = scheduledTask.ID,
    MESSAGE = e.TaskResult.Message,
    STATUS = e.TaskResult.Status ? "Successful" : "Failure",
    TIMESTAMP = e.CompletedTime
}; 
```

# mysql - 如何通过 liquibase 更改自动递增列的起始值？

> ID：11729582
> 
> 赞同：1
> 
> 时间：2012-07-30T21:06:04.303
> 
> 标签：mysql, liquibase

我正在为我的数据库使用 MySql。我已经找到了如何在创建表时设置列的起始自动增量值，但我需要知道如何为现有列设置新的起始值。liquibase 脚本看起来像什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:12:30.767

MySQL 语法非常简单：

```
ALTER TABLE mytable AUTO_INCREMENT = val ; 
```

（请注意，这实际上是一个表属性，而不是列属性。表中只能有一个列声明为 AUTO_INCREMENT。）

SQL Server 或 Oracle 不支持此语法；除了 SEQUENCE 对象和 TRIGGER 之外，Oracle 甚至没有“auto_increment”列的概念。SQL Server 将其称为 IDENTITY 属性。所以我不知道这个语句将如何用“liquibase”语法表示，除了指定这个语句是本机 MySQL 语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T12:00:14.400

您可以使用`addAutoIncrement`( [http://www.liquibase.org/documentation/changes/add_auto_increment.html](http://www.liquibase.org/documentation/changes/add_auto_increment.html) ) 更改现有的 AUTO_INCREMENT 列。

不要忘记`columnDataType`在`addAutoIncrement`.

我昨天在我们的项目中使用了它并且它工作（对于 MySQL）。

# vector - 旋转所有点以与矢量对齐

> ID：11729587
> 
> 赞同：0
> 
> 时间：2012-07-30T21:06:37.747
> 
> 标签：vector, rotation

我有一个向量 v = (x,y,z)，我想旋转所有点，使得点 (x,y,z) = (0,0,sqrt(x^2 + y^2 + z^) 2). 换句话说，我想让向量 v 的方向为 z 轴，并旋转所有点，以使这是真的。

我希望点 (1,1,0) 转到 (0,0,sqrt(2))，点 (0,0,1) 转到 (-1/(sqrt(2)),- 1/sqrt(2),0) 给定 av 为 (1,1,0)。

我在unity3d的左手轴系统中工作，其中y是垂直的。

我目前的方法是这样，使用 v = (vx,vy,vz) 和 x,y,z 作为要旋转的点。

```
float vx = 1;
float vy = 1;
float vz = 0;

float c1 = -vz/(sqrt(vx*vx + vz*vz));
float c2 = -sqrt(vx*vx + vz*vz)/sqrt(vx*vx + vy*vy + vz*vz);
float s1 = -vx/(sqrt(vx*vx + vz*vz));
float s2 = -vy/sqrt(vx*vx + vy*vy + vz*vz);

float rx = x * c1  + y*s1*s2 - z*s1*c2;
float ry = x * 0 + y*c2 + z * s2;
float rz = x * s1 - y*s2*c1 + z*c1*c2; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:18:27.543

您正在寻找*fv* =(0,0,1), |的3x3 矩阵*f* *x* |=| *外汇*|; 这需要

 ***```
 ( t1  t2  t3 )
f =   ( u1  u2  u3 )
      ( w1  w2  w3 ) 
```

其中*w* := *v* / | *v* |, 和 t, u, w 是成对正交且 | *t* |=| *你*|=| *w* |=1。

选择*t*和*u*取决于您想做什么，但如果您只需要任何*t*和*u*，请通过 3d [cross product](http://en.wikipedia.org/wiki/Cross_product)获得一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:59:03.967

我找到了答案，通过取 (0,0,1) 的叉积找到旋转轴，然后将其用作旋转轴，角度为向量 (0,0,1) 和 (vx,vy) 之间的角度,vz)。

[http://en.wikipedia.org/wiki/Rotation_matrix#Rotation_matrix_from_axis_and_angle](http://en.wikipedia.org/wiki/Rotation_matrix#Rotation_matrix_from_axis_and_angle)***

# javascript - 使用 AJAX 源和 appendTo 理解和实现 jQuery 自动完成

> ID：11729588
> 
> 赞同：14
> 
> 时间：2012-07-30T21:06:37.760
> 
> 标签：javascript, ajax, jquery-ui, jquery-ui-autocomplete

下面是我尝试`appendTo`使用带有 AJAX 源的 jQuery 自动完成功能。

我有多个问题，希望能帮助许多正在努力理解使用 AJAX 源实现自动完成的正确方法的其他人。

1）`source: function(request, response) {...}` 这是做什么的？为什么需要它。

2) 以什么格式`function(data){ response($.map (data, function(obj) {`返回数据？我意识到数据是 JSON 格式，但是有什么意义`.map`呢？有必要这样做吗？有好处吗？

3a) 使用`appendTo`and`renderItem`时，是否需要返回上述`success`数据？

3b) 或者，根据上述数据，您如何正确使用 appendTo 和 renderItem 来更改检索值的格式和显示？

```
$(function() {
$( ".find_group_ac" ).autocomplete({
        minLength: 1,
        source: function(request, response) {
            $.ajax({
                url: "welcome/search/",
                data: { term: $(".find_group_ac").val()},
                dataType: "json",
                type: "POST",
                success: function(data){ response($.map
                        (data, function(obj) {
                            return {
                            label: obj.name + ': ' + obj.description,
                            value: obj.name,
                            id: obj.name
                };}));}
            });
        }
    }).data( "autocomplete" )._renderItem = function( ul, item ) {
            return $( "<li></li>" )
                .data( "item.autocomplete", item )
                .append( "<a>" + item.label + "<br>" + item.desc + "</a>" )
                .appendTo( ul );
        };
}); 
```

这似乎有很多要回答的问题，但我相信它对许多 javascript 新手和我自己来说都是有价值的。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-30T21:38:53.910

> `source: function(request, response) {...}`这是做什么的？为什么需要它。

由于您正在执行自定义 AJAX POST 来获取数据，因此您必须指定一个函数，该函数`response`使用所需的自动完成候选者调用回调。

在最简单的用例中，您只需为`source`参数提供一个字符串，小部件将针对该 URL 发出一个 GET 请求，并附加一个`?term=(term)`. 由于您正在执行 POST 并发送不同的术语，因此您必须使用`source`.

*PS：您应该提供`$.ajax`呼叫`request.term`而不是`$(".find_group_ac").val()`*

* * *

> function(data){ response($.map (data, function(obj) { 以什么格式返回数据？我意识到数据是JSON格式的，但是.map有什么意义？有必要这样做吗？ ? 有什么好处吗？

自动完成小部件需要一个数组数据源，其项目满足以下要求之一：

1.  该项目必须是单个字符串，或者：
2.  该项目必须是具有`label`属性、a `value`、属性或两者兼有的对象。

考虑到这一点，如果您使用的服务器端资源的 JSON*未*以这种方式格式化，则必须先转换数据以满足这些规范，然后再将其提供给`response`函数。执行此操作的常用方法是使用[`$.map`](http://api.jquery.com/jquery.map)，它遍历数组并转换每个元素。

* * *

> 使用`appendTo`and`renderItem`时，是否需要返回上述成功数据？

不，但它们经常一起使用。

假设您有一个额外的属性（如`description`）要显示在候选列表中。在这种情况下，您可能会将服务器端结果转换为自动完成所期望的格式（包括但仍包括） `label`，但您还希望显示该属性。在这种情况下，您需要重载.`value``description``description``_renderItem`

* * *

> 或者，根据上述数据，您如何正确使用 appendTo 和 renderItem 来更改检索值的格式和显示？

如果上面提出的问题在这个答案中得到了充分回答，那么我需要做的就是发布一些将这些概念结合在一起的代码：

```
$( ".find_group_ac" ).autocomplete({
    minLength: 1,
    source: function(request, response) {
        $.ajax({
            url: "welcome/search/",
            data: { term: $(".find_group_ac").val()},
            dataType: "json",
            type: "POST",
            success: function(data) { 
                response($.map(data, function(obj) {
                    return {
                        label: obj.name,
                        value: obj.name,
                        description: obj.description,
                        id: obj.name // don't really need this unless you're using it elsewhere.
                    };
                }));
            }

        });
    }
}).data( "autocomplete" )._renderItem = function( ul, item ) {
    // Inside of _renderItem you can use any property that exists on each item that we built
    // with $.map above */
    return $("<li></li>")
        .data("item.autocomplete", item)
        .append("<a>" + item.label + "<br>" + item.description + "</a>")
        .appendTo(ul);
}; 
```

[jQueryUI 的自动完成文档页面](http://jqueryui.com/demos/autocomplete/)上的示例实际上非常广泛并且可能会有所帮助。具体来说，一定要检查：

*   [自定义数据和显示](http://jqueryui.com/demos/autocomplete/#custom-data)
*   [远程 JSONP 数据源](http://jqueryui.com/demos/autocomplete/#remote-jsonp)

# r - 从不正确的 .Rbuildignore 文件构建后，包中的 Collat e 字段中的文件丢失

> ID：11729592
> 
> 赞同：2
> 
> 时间：2012-07-30T21:06:48.530
> 
> 标签：r, build, package

我的包中的一个功能在构建时拒绝添加到包源中，然后在运行 R CMD 检查时失败。

我的包位于 github [here](https://github.com/eshilts/dc_crime_data)上。该文件，calculate_latitude_and_longitude.R，当然存在于 R 目录中：

```
$ ls R  
calculate_latitude_and_longitude.R clean_coordinates_XBLOCK.R  clean_crime_data.R
load_crime_data_by_ward.R clean_coordinates.R
clean_coordinates_YBLOCK.R dccrimedata-package.R 
```

我能够构建包，但由于某种原因，构建不包含文件 calculate_latitude_and_longitude.R。我可以通过浏览 tar 球中的 R 目录来验证它是否跳过了这个文件。

安装或运行时，`R CMD check dccrimedata_0.1.tar.gz`我在 00install.log 文件中收到以下错误：

```
Error in .install_package_code_files(".", instdir) :
files in 'Collate' field missing from '/Users/erikshilts/workspace/dc_crime_data/dccrimedata.Rcheck/00_pkg_src/dccrimedata/R':
  calculate_latitude_and_longitude.R
ERROR: unable to collate and parse R files for package ‘dccrimedata’ 
```

我已经尝试重命名函数、创建新文件、注释行、删除 roxygen 标签等，但这些都没有帮助将该函数放入包中。

知道出了什么问题吗？

该函数的完整代码在这里：

```
#' Calculate Latitude and Longitude
#'
#' Calculates latitude and longitude from XBLOCK AND YBLOCK coordinates.
#' The coordinates are given in the NAD 83 projection, Maryland state plane,
#' with units in meters. Documentation for this calculation can be found in the
#' README file.
#'
#' @param crime_data data.frame of crime records
#' @return data.frame with two additional columns, latitude and longitude, with units in the standard GPS format
#' @export
calculate_latitude_and_longitude <- function(crime_data) {
  xy_coords <- crime_data[, c('XBLOCK', 'YBLOCK')]

  coordinates(xy_coords) <- c('XBLOCK', 'YBLOCK')

  # NAD83, maryland state plane, units in meters
  proj4string(xy_coords) <- CRS("+init=esri:102285")
  # Transform to latitude and longitude for GPS
  xy_coords <- spTransform(xy_coords, CRS("+init=epsg:4326"))

  xy_coords <- as.data.frame(xy_coords)
  names(xy_coords) <- c('longitude', 'latitude')

  crime_data <- cbind(crime_data, xy_coords)

  crime_data
} 
```

我的说明文件如下所示：

```
Package: dccrimedata
Title: An R package containing DC crime data.
Description: Crime data from DC from 2006 to mid-2012
Version: 0.1
License: GPL-3
Author: erik.shilts
Maintainer: <erik.shilts@opower.com>
Depends:
    rgdal,sp
Collate:
    'calculate_latitude_and_longitude.R'
    'clean_coordinates_XBLOCK.R'
    'clean_coordinates_YBLOCK.R'
    'clean_coordinates.R'
    'clean_crime_data.R'
    'load_crime_data_by_ward.R'
    'dccrimedata-package.R' 
```

* * *

*更新：*

我将更改隔离到名称中带有“经度”的任何文件（“纬度”工作正常）。我在这个 repo 中的 .Rbuildignore 文件如下所示：

```
.git
.Rhistory
.Rcheck
\.tar\.gz$
out 
```

您会注意到我没有转义 中的句`.git`点，这导致它忽略其中包含“Xgit”的任何文件（X 是任何字符），从而导致它忽略我的文件“calculate_latitude_and_lon* *git* *ude.R”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T18:12:02.813

.Rbuildignore 文件错误地转义了`.git`. 这是 .Rbuildignore 文件：

```
.git
.Rhistory
.Rcheck
\.tar\.gz$
out 
```

由于单词中间的“git”，错误地转义的句`.git`点导致它忽略以单词“longitude”命名的文件。

.Rbuildignore 文件应如下所示：

```
\.git
\.Rhistory
\.Rcheck
\.tar\.gz$
out 
```

正则表达式的乐趣！

# python - Python Storm/web.py：正确处理 MySQL 数据库的 DisconnectionError

> ID：11729594
> 
> 赞同：3
> 
> 时间：2012-07-30T21:06:56.947
> 
> 标签：python, web.py, apache-storm

我正在编写一个基于 web.py 的 Web 服务，使用 Storm 作为 ORM 层从 MySQL 数据库中查询记录。Web 服务是通过 mod_wsgi 在 Linux 机器上使用 Apache2 部署的。`create_database()`当脚本使用storm的方法启动时，我创建了一个到MySQL数据库服务器的连接。这也是我创建`Store`对象的地方，该对象稍后用于在请求进入时执行查询。

在几个小时不活动后，`store.find()`抛出一个`DisconnectionError: (2006, 'MySQL server has gone away')`. 我并不感到惊讶，因为 Apache/mod_wsgi 重用 Python 进程而没有重新初始化它们很长一段时间，数据库连接被删除。我的问题是如何正确处理这个问题？

我尝试建立一种机制，通过向 MySQL 服务器发送一个重复的“SELECT 1”（每 300 秒）来保持与 MySQL 服务器的连接。不幸的是，这解决了我们的测试机器上的问题，但没有解决我们的演示部署（哎哟），而两者共享相同的 MySQL 配置（`wait_timeout`设置为 8 小时）。

我已经搜索了将风暴存储重新连接到数据库的解决方案，但没有找到任何复杂的解决方案。唯一的建议似乎是必须捕获异常，将其视为不一致，调用`rollback()`商店然后重试。但是，这意味着我要么必须包装整个`Store`类，要么一遍又一遍地实现相同的重试机制。有更好的解决方案还是我在这里完全错了？

**更新：**我添加了一个 web.py 处理器，如果捕获到异常，则通过重新创建风暴存储来优雅地处理断开连接错误，然后重试 Andrey 推荐的操作。然而，这是一个不完整且次优的解决方案，因为 (a) 存储被少数对象引用以供重用，这需要额外的机制来重新连接每个对象上的存储引用，以及 (b)，它不包括在数据库上执行写入时的事务处理（回滚）。但是，至少目前对于 store 上的所有读取操作来说这是一个可以接受的修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:11:53.870

也许您可以使用 web.py 的[应用程序处理器](http://webpy.org/cookbook/application_processors)来包装您的控制器方法并从中捕获 DisconnectionError。像这样的东西：

```
def my_processor(handler): 
    tries = 3
    while True:
        try:
            return handler() 
        except DisconnectionError:
            tries -= 1
            if tries == 0:
                raise 
```

或者您可以查看应用程序处理器如何使用 web.py 的 SqlAlchemy 的食谱条目：[http](http://webpy.org/cookbook/sqlalchemy) ://webpy.org/cookbook/sqlalchemy并为风暴制作类似的内容：

```
def load_storm(handler):
    web.ctx.store = Store(database)
    try:
        return handler()
    except web.HTTPError:
       web.ctx.store.commit()
       raise
    except:
        web.ctx.store.rollback()
        raise
    finally:
        web.ctx.store.commit()

app.add_processor(load_storm) 
```

# vb.net - 在 VB 中通过 WebBrowser 发送 Cookie

> ID：11729596
> 
> 赞同：2
> 
> 时间：2012-07-30T21:07:05.243
> 
> 标签：vb.net

所以我已经发送了将近两个小时来寻找答案，但没有任何效果。我需要通过我的 webbrowser 对象发送一些 cookie，但由于某种原因，我的 PHP 文件没有读取这些 cookie：

```
<?php die('Your username is '.$_COOKIE['user']); ?> 
```

我的 VB 代码发送 cookie：

```
For i = 0 To 4
uploadBoxes(i).Navigate("about:blank")
uploadBoxes(i).Document.Cookie = "user=" & username.Text
uploadBoxes(i).Navigate("http://*****/uploader/app.php")
Next i 
```

同样，任何帮助将不胜感激，是的，我确实需要通过 webbrowser 对象发送它。我还浏览了 MSDN 数据库，甚至对这个问题也没有多少启发。

****- - - - - - - - - - - - - - - - - - - - - 答案 - - - ------------------------------------------****

 **因此，我采用了 InternetSetCookie 方法，并提出了用于制作 cookie 的代码：

```
Imports System.Runtime.InteropServices

   ' No more data is available.
    Const ERROR_NO_MORE_ITEMS = 259

    ' The data area passed to a system call is too small.
    Const ERROR_INSUFFICIENT_BUFFER = 122

    Private Declare Function InternetSetCookie Lib "wininet.dll" _
     Alias "InternetSetCookieA" _
     (ByVal lpszUrlName As String, _
     ByVal lpszCookieName As String, _
     ByVal lpszCookieData As String) As Boolean

Private sub something()
              Dim bRet As Boolean
                bRet = InternetSetCookie("http://*****/uploader/app.php", _
                 "user", "admin")
                If bRet = False Then
                    MsgBox("Failed")
                End If
                uploadBoxes(i).Navigate("http:/*****/uploader/app.php")
End sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T01:45:38.613

[http://pinvoke.net/default.aspx/wininet.InternetSetCookie](http://pinvoke.net/default.aspx/wininet.InternetSetCookie)

```
 <DllImport("wininet.dll", CharSet:=CharSet.Auto, SetLastError:=True)> _
      Public Shared Function InternetSetCookie(lpszUrl As String, _
      lpszCookieName As String, lpszCookieData As String) As Boolean
     End Function

Imports System.Runtime.InteropServices
Sub InternetSetCookiePseudoCode()
'`CookieCollection` was populated using HttpWebRequest/Response calls
Dim i As Integer = 0
InternetSetCookie("https://www.url.com/", Nothing, CookieCollection(i).ToString() & "; expires = Sun, 01-Jul-2014 00:00:00 GMT")
'repeat for however many cookies you've got

browser.Navigate("https://www.url.com/", True)
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-15T13:23:06.900

这是我用来为 VB.Net Webbrowser Control 手动设置 cookie 的一些旧版本：

```
 Private Declare Function InternetSetCookie Lib "wininet.dll" Alias "InternetSetCookieA" (
        ByVal lpszUrlName As String,
        ByVal lpszCookieName As String,
        ByVal lpszCookieData As String) As Long 
```

[...]

```
Dim CookieVal As String = "asdfghjkl12345"
Dim CookieNamestr As String = "sessionid"
Try
    Dim Result As Long = InternetSetCookie("https://www.url.com/", CookieNamestr, CookieVal )
Catch ex As Exception
End Try 
```**

# crystal-reports - 自动调整列大小，如果某些列为空则定位

> ID：11729597
> 
> 赞同：0
> 
> 时间：2012-07-30T21:07:25.257
> 
> 标签：crystal-reports, report, reporting, crystal-reports-xi

我有一个包含大约 20 列的简单报告。其中一些列可能为空。这是我想做的事情：

1.  检查列是否为空。
2.  如果为空，则重新调整其余列的位置和大小以填补空白。
3.  对每一列重复步骤 1-2。

我对从哪里开始有一些想法，但不确定如何前进。我可以通过以下方式检查列是否为[空](https://stackoverflow.com/a/7380370/804503)：

```
If DistinctCount({@SomeField}) > 0 
```

我也知道宽度和位置可以通过格式化公式来改变。但是我怎么把它放在一起呢？也就是说，将运行什么逻辑来检查和扩展列，我将这个逻辑放在哪里？我应该使用全局变量吗？

任何建议都会有所帮助。

谢谢

注意：我使用的是 Crystal Report XI

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:12:40.183

试试这个方法：

```
WhileReadingRecords;
Global booleanVar col1Empty := True;
Global booleanVar col2Empty := True;
...
if not IsNull({dbtable.col1}) then
  col1Empty := False;
if not IsNull({dbtable.col2}) then
  col2Empty := False; 
```

然后在抑制公式中使用这个全局变量。

然后数一下有多少不为空就可以计算出平均列宽。

# javascript - 如何将更改事件处理程序附加到变量？

> ID：11729598
> 
> 赞同：10
> 
> 时间：2012-07-30T21:07:31.417
> 
> 标签：javascript, jquery

> **可能重复：**
> [监听 JavaScript 或 jQuery 中的变量变化](https://stackoverflow.com/questions/1759987/listening-for-variable-changes-in-javascript-or-jquery)

如何跟踪此变量是否已更改？

```
var ConditionalFlag = 0; 
```

我试过这个：

```
var ConditionalFlag = 0;
$(ConditionalFlag).change(function () {
    alert("Changed");
});
ConditionalFlag++; 
```

但无济于事。我考虑过使用 25ms 计时器来检查这样的变化：

```
var ConditionalFlag = 0;
function CheckFlag() {
    if (ConditionalFlag > 0) {
        alert("Changed");
        clearInterval(check);
    }
}
var check = window.setInterval("CheckFlag()", 25);
ConditionalFlag++; 
```

然而，这似乎有些矫枉过正。有没有办法使用 jQuery 或 javascript 将事件处理程序附加到此变量？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T21:15:32.727

如果它是全局变量，则可以在受支持的环境中使用属性访问器...

```
window._conditional_flag = 0;
Object.defineProperty(window, "ConditionalFlag", {
    get: function() { return window._conditional_flag},
    set: function(v) { console.log("changed"); window._conditional_flag = v; }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T21:09:54.753

变量更改时不会触发“事件”。JavaScript 不能那样工作。

这个变量什么时候改变？只需在完成后添加对函数的调用即可。

# mongodb - Heroku 和 mongoHQ：连接失败

> ID：11729600
> 
> 赞同：0
> 
> 时间：2012-07-30T21:07:33.830
> 
> 标签：mongodb, heroku, mongoose, mongohq

我在 Heroku 上有以下环境变量：

```
MONGOHQ_URL: mongodb://heroku:password%40mongohq%2Estaff%2Ecom:10056/app6186345 
```

最初的错误是：

```
Database name cannot contain '.' 
```

我逃脱了'。和'@'我仍然有相同的结果，连接失败但消息：

```
[Error: failed to connect to [heroku:27017]] 
```

我究竟做错了什么？

当我检查有关 mongoHQ 的文档时，没有提到转义字符或类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:28:11.443

看起来您可能意外地颠倒了 mongohq 的子域和域名。

它应该`@staff.mongohq.com`代替`@mongohq.staff.com`

# c++ - 以前初始化内存是否保证在放置新调用后持续存在？

> ID：11729603
> 
> 赞同：7
> 
> 时间：2012-07-30T21:07:38.213
> 
> 标签：c++, c++11, placement-new

说我有以下内容：

```
struct A
{
   int x;
};

//...
A* aOriginal = new A();  //value construct aOriginal
assert( aOriginal->x == 0 );

A* aSecond = new (aOriginal) A;
assert( aSecond->x == 0 ); 
```

即使`aSecond`没有进行值初始化，第二个断言是否也能保证成立？从逻辑上讲，它应该，因为内存没有被覆盖，但它是由标准指定的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T21:16:58.180

不。

当您在同一存储位置构造第二个对象时，前一个对象的生命周期结束（第 3.8/1 节）：

> [...] 类型对象的生命周期在以下情况下`T`结束：
> 
> *   如果`T`是具有非平凡析构函数（第 12.4 节）的类类型，则析构函数调用开始，或者
> *   对象占用的存储空间被重用或释放。

创建第二个对象时，由于`A`具有隐式默认构造函数，因此该`x`成员被默认初始化，因此不执行初始化（第 8.5/6 节）：

> *默认初始化*类型的对象`T`意味着：
> 
> *   [...]
>     
>     
> *   否则，不执行初始化。

这意味着该对象具有不确定的价值（§5.3.4/15）：

> 创建类型对象的new*表达式*`T`按如下方式初始化该对象：
> 
> *   如果省略*new-initializer*，则对象为*默认初始化*（第 8.5 节）；如果不执行初始化，则对象具有不确定的值。

如果您认为该值不是不确定的，因为您之前在该存储位置初始化了另一个对象：标准也放弃了这种可能性，即前一个对象的属性在其生命周期结束后不再适用（第 3.8/3 节） ：

> 本国际标准中赋予对象的属性仅在其生命周期内适用于给定对象。

# ios - setRefreshed：在横向模式下发送到 UIViewController 的无法识别的选择器

> ID：11729608
> 
> 赞同：1
> 
> 时间：2012-07-30T21:07:56.147
> 
> 标签：ios, unrecognized-selector

我有多个支持横向模式的 UITableviewController 和一个不支持横向模式的 UIViewController。无论显示哪个视图，当我在横向模式下关闭应用程序时，都会出现以下异常：

***** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[LedgerViewController setRefreshed:]：无法识别的选择器发送到实例 0x161df0”****

 **以纵向模式关闭应用程序不会产生异常。

对我的项目进行全面搜索时，找不到术语“setRefreshed”，也找不到任何 Apple 文档或通过 Google 找到的术语。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T03:19:06.870

我发现这个问题要感谢 raywenderlich.com 的 AWESOME 人，他们花时间编写了一些可用的最佳教程： [我的应用程序崩溃了，现在怎么办？- 第1部分](http://www.raywenderlich.com/10209/my-app-crashed-now-what-part-1)

一个异常断点导致我的 ApplicationDelegate 中有一些糟糕的代码，它假定导航控制器的 rootViewController 是“RootViewController”，它的 BOOL 属性为“刷新”。在我为横向模式实施不同的视图之前，这是一个很好的假设。因此仅在横向模式下引发异常的原因。

### 我今天学到的东西：

1.  对于 KVC，我应该很明显“setRefreshed”是 KVC 等价于“????.refreshed”。
2.  我应该在几年前阅读高级调试技术。**

# c# - 如何确定从 ushort 继承的枚举类型？

> ID：11729610
> 
> 赞同：2
> 
> 时间：2012-07-30T21:08:19.920
> 
> 标签：c#, enums

如果我声明一个继承自 ushort 的枚举，如下所示：

```
public enum MyEnum : ushort { A = 0, B = 1 }; 
```

然后像这样检查它的类型：

```
if(typeof(MyEnum) != typeof(ushort))
            System.Diagnostics.Debugger.Break(); 
```

调用断点。为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T21:09:55.910

之所以叫它，是因为它们不是同一类型！一个是枚举类型，其基础值为 type `ushort`，另一个是`ushort`它本身。（请注意，`ushort`即使它使用相同的语法，它也不是真正的“继承自”——它实际上只是在说“底层类型是`ushort`”。）

为什么你会*期望*它们是同一类型？如果它们实际上是相同的类型，那么您将失去很多枚举的类型安全性。

`typeof(MyEnum).Name`打印并获得`UInt16`IMO会很奇怪。

如果您尝试确定基础类型，则应使用[`Type.GetEnumUnderlyingType`](http://msdn.microsoft.com/en-us/library/system.type.getenumunderlyingtype.aspx)：

```
if (typeof(MyEnum).GetEnumUnderlyingType() == typeof(ushort))
{
    // Yup, the underlying type is ushort
} 
```

编辑：为了完整性，如果`MyEnum`真的继承 from ，你仍然会测试类型*相等**性*。正如 cdhowie 在评论中所说，如果您写道：`ushort`

 *```
if (typeof(string) != typeof(object))
{
    Debugger.Break();
} 
```

那*仍然*会闯入调试器。您可能想要查看[`Type.IsAssignableFrom`](http://msdn.microsoft.com/en-us/library/system.type.isassignablefrom.aspx)您真正想要进行这种比较的情况。*

# objective-c - NSString Initwithformat:arguments 的限制：

> ID：11729617
> 
> 赞同：0
> 
> 时间：2012-07-30T21:08:48.923
> 
> 标签：objective-c, ios, string, nsstring

我正在尝试使用

```
NSString *iosString = [[NSString alloc] initWithFormat:@"%ls = %ls" arguments:argListSave]; 
```

问题是`initWithFormat`不支持`%ls`和`argListSave`包含`wchar_t*`，我怎样才能绕过这个限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:14:36.433

```
wchar_t *ws1 = va_arg(argListSave, wchar_t *);
wchar_t *ws2 = va_arg(argListSave, wchar_t *);

NSString *s1 = [[NSString alloc] initWithCharacters:ws1 length:wstrlen(ws1)];
NSString *s2 = [[NSString alloc] initWithCharacters:ws2 length:wstrlen(ws2)];

NSString *iosString = [[NSString alloc] initWithFormat:@"%@ = %@", s1, s2];
[s1 release];
[s2 release]; 
```

编辑：似乎这两种字符类型的大小不同。因此，您可能希望实现类似 strcpy 的转换函数，如下所示：

```
unichar *wchar_to_unichar(unichar *result, wchar_t *input)
{
    while (*input)
    {
        *result++ = *input++;
    }
    return result;
} 
```

编辑2：似乎这仍然不好。正如@Jonathan Grinspan 指出的那样，您还必须考虑 UTF32 代码点并使用

```
initWithBytes:length:encoding: 
```

在 Intel mac 上使用 NSUTF32LittleEndianStringEncoding，在 PowerPC Mac 上使用 NSUTF32BigEndianStringEncoding（长度是以字节为单位的字符串长度，而不是字符）。

# sony - 索尼 SmartWatch 游戏循环示例

> ID：11729621
> 
> 赞同：0
> 
> 时间：2012-07-30T21:08:59.827
> 
> 标签：sony, sony-smartwatch

有没有人有索尼智能手表游戏循环的好例子？8个游戏样本相当混乱......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:03:26.730

我建议你先看一下[SDK](http://developer.sonymobile.com/cws/devworld/technology/smart-extras/smart-extension-sdk)中的 Control API 示例（没有任何游戏逻辑），并尝试在其中添加自己的游戏逻辑，因为我真的无法想象比 8 游戏更容易的游戏或像这样的小屏幕上的井字游戏。

# ios - RestKit映射成功后如何访问对象

> ID：11729624
> 
> 赞同：0
> 
> 时间：2012-07-30T21:09:30.887
> 
> 标签：ios, singleton, global-variables, restkit

[在按照此处的 RestKit 文档](https://github.com/RestKit/RestKit/wiki/Object-mapping)进行操作后，我现在已经成功进行了对象映射。哇！我现在的问题是如何在整个项目中访问这个对象？我使用 RestKit 将 JSON 响应映射到 APIUser 对象。例如，在下一个屏幕上，我想从 APIUser 对象中获取用户的名字来打招呼。如何访问该对象？

我是 Objective-c 的新手，所以这可能更多的是关于**在 Objective-C 中使用***全局对象*、*单例类*和*跨类持久数据* 的问题，而不是关于 RestKit 框架的问题。

 **这里发布的是我的 restkit 对象映射日志，以防它有助于引用它。谢谢。任何帮助表示赞赏。

```
2012-07-30 14:54:04.813 TestApp[2361:1a707] D restkit.object_mapping:RKObjectMapper.m:240 Performing object mapping sourceObject: {
    apiUser =     {
        active = 1;
        apiUserIdx = 101;
        birthdate = "1980-06-21T00:00:00-06:00";
        countryCode = US;
        firstName = "test_user1_firstname";
        lastName = "test_user1_lastname";
        ssn = 1111;
        userName = "test_user1";
        verified = 1;
    };
}
 and targetObject: (null)
2012-07-30 14:54:04.813 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMapper.m:254 Examining keyPath 'errors' for mappable content...
2012-07-30 14:54:04.813 TestApp[2361:1a707] D restkit.object_mapping:RKObjectMapper.m:264 Found unmappable value at keyPath: errors
2012-07-30 14:54:04.814 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMapper.m:254 Examining keyPath 'apiUser' for mappable content...
2012-07-30 14:54:04.814 TestApp[2361:1a707] D restkit.object_mapping:RKObjectMapper.m:283 Found mappable data at keyPath 'apiUser': {
    active = 1;
    apiUserIdx = 101;
    birthdate = "1980-06-21T00:00:00-06:00";
    countryCode = US;
    firstName = "test_user1_firstname";
    lastName = "test_user1_lastname";
    ssn = 1111;
    userName = "test_user1";
    verified = 1;
}
2012-07-30 14:54:04.814 TestApp[2361:1a707] D restkit.object_mapping:RKObjectMapper.m:189 Asked to map source object {
    active = 1;
    apiUserIdx = 101;
    birthdate = "1980-06-21T00:00:00-06:00";
    countryCode = US;
    firstName = "test_user1_firstname";
    lastName = "test_user1_lastname";
    ssn = 1111;
    userName = "test_user1";
    verified = 1;
} with mapping RKObjectMapping class => APIUser: keyPath mappings => (
    "RKObjectKeyPathMapping: lastName => lastName",
    "RKObjectKeyPathMapping: birthdate => birthdate",
    "RKObjectKeyPathMapping: countryCode => countryCode",
    "RKObjectKeyPathMapping: firstName => firstName",
    "RKObjectKeyPathMapping: password => password",
    "RKObjectKeyPathMapping: apiUserIdx => apiUserIdx",
    "RKObjectKeyPathMapping: active => active",
    "RKObjectKeyPathMapping: userName => userName",
    "RKObjectKeyPathMapping: verified => verified"
)
2012-07-30 14:54:04.815 TestApp[2361:1a707] D restkit.object_mapping:RKObjectMappingOperation.m:428 Starting mapping operation...
2012-07-30 14:54:04.816 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMappingOperation.m:242 Mapping attribute value keyPath 'lastName' to 'lastName'
2012-07-30 14:54:04.816 TestApp[2361:1a707] D restkit.object_mapping:RKObjectPropertyInspector.m:95 Cached property names and types for Class 'APIUser': {
    accessibilityHint = NSString;
    accessibilityLabel = NSString;
    accessibilityLanguage = NSString;
    accessibilityValue = NSString;
    birthdate = NSDate;
    countryCode = NSString;
    firstName = NSString;
    lastName = NSString;
    password = NSString;
    userName = NSString;
}
2012-07-30 14:54:04.818 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMappingOperation.m:252 Mapped attribute value from keyPath 'lastName' to 'lastName'. Value: test_user1_lastname
2012-07-30 14:54:04.818 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMappingOperation.m:242 Mapping attribute value keyPath 'birthdate' to 'birthdate'
2012-07-30 14:54:04.818 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMappingOperation.m:115 Found transformable value at keyPath 'birthdate'. Transforming from type '__NSCFString' to 'NSDate'
2012-07-30 14:54:04.818 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMappingOperation.m:97 Transforming string value '1980-06-21T00:00:00-06:00' to NSDate...
2012-07-30 14:54:04.819 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMappingOperation.m:259 Skipped mapping of attribute value from keyPath 'birthdate to keyPath 'birthdate' -- value is unchanged ((null))
2012-07-30 14:54:04.821 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMappingOperation.m:242 Mapping attribute value keyPath 'countryCode' to 'countryCode'
2012-07-30 14:54:04.822 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMappingOperation.m:252 Mapped attribute value from keyPath 'countryCode' to 'countryCode'. Value: US
2012-07-30 14:54:04.822 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMappingOperation.m:242 Mapping attribute value keyPath 'firstName' to 'firstName'
2012-07-30 14:54:04.822 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMappingOperation.m:252 Mapped attribute value from keyPath 'firstName' to 'firstName'. Value: test_user1_firstname
2012-07-30 14:54:04.822 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMappingOperation.m:291 Did not find mappable attribute value keyPath 'password'
2012-07-30 14:54:04.823 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMappingOperation.m:242 Mapping attribute value keyPath 'apiUserIdx' to 'apiUserIdx'
2012-07-30 14:54:04.839 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMappingOperation.m:252 Mapped attribute value from keyPath 'apiUserIdx' to 'apiUserIdx'. Value: 101
2012-07-30 14:54:04.840 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMappingOperation.m:242 Mapping attribute value keyPath 'active' to 'active'
2012-07-30 14:54:04.840 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMappingOperation.m:252 Mapped attribute value from keyPath 'active' to 'active'. Value: 1
2012-07-30 14:54:04.840 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMappingOperation.m:242 Mapping attribute value keyPath 'userName' to 'userName'
2012-07-30 14:54:04.840 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMappingOperation.m:252 Mapped attribute value from keyPath 'userName' to 'userName'. Value: test_user1
2012-07-30 14:54:04.841 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMappingOperation.m:242 Mapping attribute value keyPath 'verified' to 'verified'
2012-07-30 14:54:04.845 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMappingOperation.m:252 Mapped attribute value from keyPath 'verified' to 'verified'. Value: 1
2012-07-30 14:54:04.845 TestApp[2361:1a707] D restkit.object_mapping:RKObjectMappingOperation.m:434 Finished mapping operation successfully...
2012-07-30 14:54:04.846 TestApp[2361:1a707] T restkit.object_mapping:RKObjectMapper.m:254 Examining keyPath 'error' for mappable content...
2012-07-30 14:54:04.846 TestApp[2361:1a707] D restkit.object_mapping:RKObjectMapper.m:264 Found unmappable value at keyPath: error
2012-07-30 14:54:04.846 TestApp[2361:1a707] D restkit.object_mapping:RKObjectMapper.m:304 Finished performing object mapping. Results: {
    apiUser = "<APIUser: 0xcd8b170>";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:40:07.920

我想我想通了。我需要创建一个 APIUser 的新实例并将其设置为等于`[objects objectAtIndex:0].` ：

```
- (void)objectLoader:(RKObjectLoader*)objectLoader didLoadObjects:(NSArray*)objects {

    NSLog(@"There are %i objects.", objects.count);

    APIUser *apiUser = [objects objectAtIndex:0];
    NSLog(@"Loaded apiUserIdx #%i -> First name: %@, Last name: %@", apiUser.apiUserIdx, apiUser.firstName, apiUser.lastName);

} 
```**

# servlets - 在 servlet 上运行 htmlunit

> ID：11729634
> 
> 赞同：0
> 
> 时间：2012-07-30T21:09:57.907
> 
> 标签：servlets, htmlunit

我想使用 htmlunit 从网站上抓取数据。我将地址作为表单的属性传递。我不断收到错误，它说“java.lang.NoClassDefFoundError：com/gargoylesoftware/htmlunit/WebClient”，即使我已导入 .jar 文件并正确设置了 javadoc 文件位置。我错过了什么吗？

```
package coreservlets;

import java.io.IOException;    
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.HtmlDivision;
import com.gargoylesoftware.htmlunit.html.HtmlPage;

@WebServlet("/WebScrape")
@SuppressWarnings("serial")
public class WebScrape extends HttpServlet {

    public void doGet(HttpServletRequest request, HttpServletResponse response) 
    throws ServletException, IOException {

    PrintWriter out = response.getWriter(); 

    // Create and initialize WebClient object
    final WebClient webClient = new WebClient();

    String Address = (String) request.getAttribute("address");
    HtmlPage page = webClient.getPage(Address);
    final HtmlDivision div = (HtmlDivision) page.getByXPath("//*[@id=\"LDPOffMarketPropertyInfo\"]//div//ul//li[4]//span[1]//text()");

    out.println("<!DOCTYPE html>\n" +
              "<html>\n" +
              "<head>\n" +
              "<meta name=" + "\"viewport\" " +  "content=" + "\"initial-scale=1.0, user-scalable=no\" " + "/>\n" +
              "<style type=" + "\"text/css\">\n" +
                "  html { height: 100% }\n" +
                "  body { height: 100%; margin: 0; padding: 0 }\n" +
                "  #default { height: 800px;\n"+
                "            width: 400px;  }\n" +
                "  </style>\n" + div);

    }   

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:40:25.877

假设您使用 Eclipse，构建路径就是：用于*构建*应用程序的库集。

*您还需要这些库在运行时*可用，在您的 web 应用程序中。servlet 规范解释了 webapp 的库必须放在哪里：在`WEB-INF/lib`.

从构建路径中删除 jar 文件，并将它们放入`WEB-INF/lib`WebContent 目录的文件夹中。这将自动将它们添加回构建路径，并使它们成为已部署应用程序的一部分，因此在运行时可用。

它们还将出现在 Eclipse 的包资源管理器中的*Web App 库*节点下，确认这些库是 webapp 的一部分。

# c# - 为什么我们不直接调用事件？

> ID：11729639
> 
> 赞同：3
> 
> 时间：2012-07-30T21:10:25.973
> 
> 标签：c#, .net, events, event-handling

我见过许多开发人员在想要调用时将`Event`其分配给名为`handler`并调用的局部变量，`handler`而不是`Event`直接调用。为什么我们不直接调用事件？

```
private void OnSomethingChanged(EventArgs e)
{
    if (SomethingEvent != null)
    {
        SomethingEvent(this, e);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T21:12:28.657

您发布的代码基本上不是线程安全的。如果最终订阅者在检查之后但调用之前在不同的线程中取消订阅，您*将**获得*一个.`if`*`NullReferenceException`*

 *一种选择是编写扩展方法：

```
public static void NullSafeInvoke(this EventHandler handler,
                                  object sender, EventArgs e)
{
    if (handler != null)
    {
        handler(this, e);
    }
} 
```

然后你可以写：

```
private void OnSomethingChanged(EventArgs e)
{
    SomethingEvent.NullSafeInvoke(this, e);
} 
```

您可能还想要另一个重载`EventHandler<T>`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T21:12:33.523

如果未复制事件（仅与多线程应用程序相关），则可能出现竞争条件。

如果一个线程在检查后立即取消订阅该事件，`null`没有订阅任何内容，您将获得一个`NullReferenceException`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-24T07:52:32.567

我也不明白为什么。有一个简单且相当安全的方法：

```
// when constructing of instance, to create empty subscription
public event EventHandler SomethingEvent = delegate { }; 

private void OnSomethingChanged(EventArgs e)
{
    // and call it directly
    SomethingEvent(this, e);
} 
```*

# html - 忽略脚本类型是一个好习惯吗？

> ID：11729642
> 
> 赞同：5
> 
> 时间：2012-07-30T21:10:56.293
> 
> 标签：html

> **可能重复：**
> [HTML5 <script> 声明](https://stackoverflow.com/questions/5622091/html5-script-declarations)

我听一些人说你不需要`type="text/javascript"`在`<script>`标签中指定 a，因为这是默认类型。

如果我打开我的脚本标签`<script>`而不是更详细的标签，会有什么缺点`<script type="text/javascript">`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T21:16:07.703

在 HTML4 中，该`type`属性是必需的：

[http://www.w3.org/TR/html401/interact/scripts.html#h-18.2.1](http://www.w3.org/TR/html401/interact/scripts.html#h-18.2.1)

在 HTML5 中不是这样。

[http://dev.w3.org/html5/markup/script.html](http://dev.w3.org/html5/markup/script.html)

如果您打算使用 HTML4，那么*好的做法*当然包括遵守其规范。如果您使用的是 HTML5，那么很明显`<script>`没有`type`is `text/javascript`，因此您可以放心地省略它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:11:28.813

是的！你绝对可以省略类型。**[如果您关心有效性，](http://www.w3.org/TR/html401/interact/scripts.html#h-18.2.1)**请确保您的文档类型是 HTML5 。

```
<!doctype html> 
```

尽管使用您能想到的任何浏览器，它都可以正常工作。

如果您不使用 HTML5，那么违反规范不会被视为“良好做法”:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T21:27:01.590

尽管在使用 HTML5 时脚本类型属性不是必需的，但无论如何都应该始终使用它。每次将脚本包含到 HTML 文档中时都使用它是一种很好的做法。添加它并没有什么坏处，但不添加它可能会造成伤害。如果未指定 type 属性，旧版浏览器可能无法识别脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T21:46:09.257

您是否正在为 Intranet（可能是网吧）开发桌面网站，您可以编写：

```
<script>
   $(functions(){});
</script> 
```

如果您在 Internet 上使用 HTML 或 XHTML，我建议您这样编写脚本标签：

```
<script type="text/javascript">
// <![CDATA[
   // functions
   $(functions(){}); 
// ]]> 
```

并为内联 CSS 完成此操作，因为我们正在这样做：

```
<style type="text/css">
/* <![CDATA[ */
    /* tags */
    html, body {}
/* ]]> */
</style> 
```

这样，您输入的任何类型的字符都应该是有效字符

**编辑** [http://en.wikipedia.org/wiki/CDATA#Uses_​​of_CDATA_sections](http://en.wikipedia.org/wiki/CDATA#Uses_of_CDATA_sections)

# c++ - Visual Studio 2010-C++ 项目中的预处理器

> ID：11729646
> 
> 赞同：6
> 
> 时间：2012-07-30T21:11:16.683
> 
> 标签：c++, visual-studio-2010, c-preprocessor

在 .cpp 文件中，我使用了一个宏`mmData1`。我在项目中进行了搜索，发现这个宏是在几个文件中定义的。（即有几个 .h 文件具有该行`#define mmData1`）

我想知道VS10中是否有能力检查预处理器从哪个文件中获取宏值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T07:56:01.223

如果 Intellisense 不知道，则没有直接的方法。但是，也有间接的方法。说你的宏名称是`SOME_MACRO`

1.  在每个`#define SOME_MACRO`put实例之后`#error Defined here`，然后右键单击源文件并选择`Compile`. 如果编译器返回错误，则删除引发它的指令并再次编译。此错误的最后一个实例将拖尾源中可见的定义。

2.  使每个定义的指令将其`SOME_MACRO`定义为其他内容，然后在源文件中添加这些行，毕竟包括：

    ```
    #define STRINGIZE(x) STRINGIZE2(x)
    #define STRINGIZE2(x) #x
    #pragma message("SOME_MACRO is expanded as: " STRINGIZE(SOME_MACRO)) 
    ```

    编译源文件；您应该在构建日志中看到该值。

3.  侵入性较小的方式：将这些行放在每行之后`#define SOME_MACRO`

    ```
    #pragma push_macro("STRINGIZE")
    #pragma push_macro("STRINGIZE2")
    #define STRINGIZE(x) STRINGIZE2(x)
    #define STRINGIZE2(x) #x
    #pragma message("Defining at " __FILE__ ":" STRINGIZE(__LINE__))
    #pragma pop_macro("STRINGIZE")
    #pragma pop_macro("STRINGIZE2") 
    ```

    或者，如果您不需要行号：

    ```
    #pragma message("Defining at " __FILE__) 
    ```

    编译文件。查看构建日志，您应该能够知道`SOME_MACRO`定义的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T05:21:09.383

准确查看预处理器在做什么的最好方法是[直接检查它的输出。](http://msdn.microsoft.com/en-us/library/8z9z0bx6%28v=vs.100%29.aspx) Intellisense 很有帮助，但通常与编译器理解的不匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T05:31:38.310

我经常使用的一个简单技巧是在要检查的行**重新定义宏。**当你编译代码时，预处理器会抱怨并告诉你之前的定义在哪里。

例子：

test.cpp 包含：

```
#include "test.h"

int main()
{
  #define SOMEMACRO 1
  return 0;
} 
```

test.h 包含：

```
#define SOMEMACRO 2
int foo(); 
```

编译 test.cpp 时，我收到以下错误消息：

```
test.cpp:5:0: warning: "SOMEMACRO" redefined [enabled by default]
In file included from test.cpp:1:0:
test.h:1:0: note: this is the location of the previous definition 
```

我在 GCC 上进行了测试，但 Visual Studio 做了同样的事情。

# c# - 如何仅在文本框中显示数组中的某些值？

> ID：11729647
> 
> 赞同：0
> 
> 时间：2012-07-30T21:11:25.467
> 
> 标签：c#

我遇到了一个我无法解决的问题，我所拥有的是一个包含 60 个值的字符串数组，它们由“空缺”或“保留”组成。现在我需要做的是只显示那些空置或保留的 arayy 索引，我不知道如何去做。：/至少可以说我很难过。我知道如何获取数组中的eatch 排序数，所以没问题。

我只是不知道如何将这些索引值放入一个在我的文本框中显示它们的方法中。我的想法是，因为我知道它们有多少，所以我至少可以知道在文本框中显示它们所需的迭代次数。

所以请我需要一些想法，因为我显然正在经历一次严重的大脑冻结：P（我的两个灰色的都在打架）

感谢您的任何想法！

//问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:16:26.620

您可以遍历数组，构建符合您的条件的索引列表，例如

```
List<int> indices = new List<int>();
for (int i=0; i<myarray.Length; i++)
{
    if (myarray[i] == "reserved") indices.Add(i);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:28:19.617

```
string[] items= new string[] { "vacant","reserved","reserved","reserved","vacant"};

List<int> vacantIndices=new List<int>();
List<int> reservedIndices=new List<int>();
int indexCounter=0;
foreach (string item in items)
{
    if (item == "vacant")
        vacantIndices.Add(indexCounter);
    else if (item == "reserved")
        reservedIndices.Add(indexCounter);

    indexCounter++;
}

TextBox1.Text = String.Join(",", vacantIndices);
TextBox2.Text = String.Join(",", reservedIndices); 
```

这将以逗号分隔的形式显示空置`TextBox1`和保留的索引（例如：1,2,3）`TextBox2`

# php - codeigniter site_model 严重性：注意错误这行有什么问题？

> ID：11729649
> 
> 赞同：0
> 
> 时间：2012-07-30T21:11:31.567
> 
> 标签：php, codeigniter

我是使用 codeigniter 的新手，并试图在 codeigniter 中学习 crud .. 我的站点控制器是：

```
class Site extends CI_Controller 
{
    function index()
    {
        $data = array();
        if($query = $this->site_model->get_records())
        {
            $data['records'] = $query;
        }   
        $this->load->view('options_view', $data);
    } 
```

我的 site_model 是：

```
class Site_model extends CI_Model {
    function __construct(){
      parent::__construct();
    }

    function get_records()
    {
        $query = $this->db->get('data');
        return $query->result();
    }

    function add_record($data) 
    {
        $this->db->insert('data', $data);
        return;
    }

    function update_record($data) 
    {
        $this->db->where('id', 12);
        $this->db->update('data', $data);
    }

    function delete_row()
    {
        $this->db->where('id', $this->uri->segment(3));
        $this->db->delete('data');
    }

} 
```

我做了 $autoload['libraries'] = array('database'); 当我尝试检查网站时出现错误：

```
Severity: Notice

Message: Undefined property: Site::$site_model

Filename: controllers/site.php

Line Number: 9 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:16:46.093

您需要先加载您的`site_model`，然后才能访问它。您可以像这样手动加载它：

```
function index()
{
    // Load the model...
    $this->load->model('site_model');

    $data = array();
    if($query = $this->site_model->get_records())
    {
        $data['records'] = $query;
    }   
    $this->load->view('options_view', $data);
} 
```

如果您在类中的多个方法中使用模型，则应在类的构造函数中加载模型：

```
function __construct(){
    parent::__construct();
    // Load the model...
    $this->load->model('site_model');
} 
```

或者，如果您在整个应用程序中都需要它，您可以[自动加载](http://codeigniter.com/user_guide/general/models.html#auto_load_model)模型（通过）：`config/autoload.php`

```
/*
| -------------------------------------------------------------------
|  Auto-load Models
| -------------------------------------------------------------------
| Prototype:
|
|   $autoload['model'] = array('model1', 'model2');
|
*/

$autoload['model'] = array('site_model'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:16:57.153

加载模型：

```
class Site extends CI_Controller 
{
    //you also need the constructor
    function __construct(){
        parent::__construct();
        $this->load->model('Site_model');
    }
    function index()
    {
        $data = array();
        //now you can use it
        if($query = $this->site_model->get_records())
        {
            $data['records'] = $query;
        }   
        $this->load->view('options_view', $data);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T21:27:01.840

我通过两种方式解决了这个问题。Colin 和 Radashk 方法都有效。如果我使用 Radashk 方法，将函数写在顶部就足够了。如果我使用 Colin 的方法，我必须使用 `$this->load->model('site_model');`每个删除和创建方法。

其他选项是`$autoload['model'] = array('site_model');`

感谢您的回复。我希望。信息可能对其他人有所帮助

# css - 是否可以只编译/提供一部分资产？如何？

> ID：11729650
> 
> 赞同：0
> 
> 时间：2012-07-30T21:11:40.763
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3, asset-pipeline

对于某个控制器/动作，我只想提供 CSS 资产的特定子集。这样的事情可能吗？

**我在app/views/layouts/application.html.erb**中想要这样的东西

 **```
<% if newsletter_show? %>
    <%= stylesheet_link_tag    "foo", "bar", "baz" %>
<% else %>
    <%= stylesheet_link_tag    "application" %>
    <%= javascript_include_tag "application" %>
<% end %> 
```

注意：当条件为真时，我不仅提供特定的 css 文件（*foo*、*bar*和*baz*），我也故意不提供 javascript 。

这在*开发*中完美地工作，但在*生产*中它失败了，因为显然我们不能有不相交的样式表，因为它们是作为一个整体预编译的。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:21:18.910

**选项 1**：如果将 foo bar 和 baz 添加到预编译中，它应该可以工作：

在 config/application.rb 中：

```
config.assets.precompile += %w(foo.css bar.css baz.css) 
```

**选项 2**：您还可以创建另一个 css 分组文件：

在 app/assets/stylesheets/newsletter.css 中：

```
/*
*= require foo
*= require bar
*= require baz
*/ 
```

在 config/application.rb 中：

```
config.assets.precompile += %w(newsletter.css) 
```

在视图中：

```
<% if newsletter_show? %>    
  <%= stylesheet_link_tag 'newsletter' %>
#... 
```

不要忘记重新编译资产:)**

# jquery - 我如何在 jQuery 和 CSS 中做到这一点？

> ID：11729651
> 
> 赞同：3
> 
> 时间：2012-07-30T21:11:43.080
> 
> 标签：jquery, css, html

我是 jQuery 新手，我已经使用它并在画廊和滑块上玩过它。

我想在我的网站上添加[这种类型的菜单](http://www.mbusa.com/mercedes/index?utm_expid=62343809-0)（中间有 4 个框）。

我需要能够扩展`div`s。起初它只显示图片，但当您将鼠标悬停时，它`div`会向上扩展并显示图片和随附的文字。

我可以弄清楚大多数事情，但这让我很难过。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T21:31:49.247

我为您构建了一个非常基本的 jsFiddle 来帮助您了解这个想法，我保持它简单，以便您可以理解和构建它。 [http://jsfiddle.net/FF3jc/4/](http://jsfiddle.net/FF3jc/4/)

在 JS 部分，真正发生的事情是，当您将鼠标悬停在上面时，会应用一个新类，然后将鼠标悬停在它上面，它就会被删除。

您可以根据需要使用添加/删除的此类来控制高度/样式。

编辑，修复 jsfiddle，包括错误的 - d'oh。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T21:21:45.410

本网站使用 jQuery Hero Carousel。这里解释一下。[http://www.paulwelsh.info/jquery-plugins/hero-carousel/](http://www.paulwelsh.info/jquery-plugins/hero-carousel/)

我很抱歉。虽然这个网站有英雄轮播的下载，但没有解释。似乎有一半的网络专门用于 jquery 轮播。

# ajax - 如何从 onStart 中的 AJAX 回调中取消 fancybox

> ID：11729653
> 
> 赞同：0
> 
> 时间：2012-07-30T21:11:44.540
> 
> 标签：ajax, fancybox, onstart

我正在花式框中加载登录表单。如果用户在两个浏览器选项卡中打开站点，并在第一个选项卡中登录，然后单击第二个选项卡中的登录链接，我想避免在第二个选项卡中打开fancybox，因为页面将重定向到用户配置文件，并且在花式框内看起来不太好。所以我在 onStart 设置中有一个 AJAX 回调来检查用户是否经过身份验证。如果用户已经通过身份验证，我想取消 fancybox 并将父级引导到另一个页面（例如用户配置文件）。

这是我目前的 onStart 代码：

```
'onStart': function(opener) { 
   if ($(opener).attr('id') == 'login') {
     $.get('/hicommon/authenticated', function(data) { 
        if ('yes' == data) {
          console.log('this user must have already authenticated in another browser tab, SO I want to avoid opening the fancybox.');
          return false;
        } else {
          console.log('the user is not authenticated');
          return true;
        }
     }); 
   }
}, 
```

这不会阻止为经过身份验证的用户打开 fancybox，大概是因为我在 AJAX 回调中返回 false，而不是在 onStart 函数的范围内。有什么方法可以取消该 AJAX 回调中的幻想框，或者将某些内容传递给 onStart 函数的范围？谢谢

# android - 从android相机意图返回的字节中保存图像被保存为小图像

> ID：11729654
> 
> 赞同：1
> 
> 时间：2012-07-30T21:11:48.107
> 
> 标签：android, android-intent, camera

我正在尝试使用 Android Camera Intent 捕获图像。相机意图返回字节数组，当我将字节数组保存为位图时，我得到一个非常小的图像，而不是基于当前相机设置（当前在 android 移动相机中设置的 1024 个像素）获取图像。

通常我会从相机意图获取文件路径，但不知何故我没有从这个设备获取，所以我从相机意图返回的字节创建位图。

任何人都知道这是为什么以及如何解决这个问题。谢谢。

下面是我正在使用的 java 代码块。

私有意图 cameraIntent = null;

```
public void onCreate(Bundle savedInstanceState) {
              super.onCreate(savedInstanceState);

cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);

}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
                                super.onActivityResult(requestCode, resultCode, data);

if (requestCode == CAMERA_PIC_REQUEST) {  
    if (resultCode == RESULT_OK) {
      if ( data != null)
        {
           Bitmap myImage = null;
           Bitmap imageBitmap = (Bitmap) data.getExtras().get("data");
           ByteArrayOutputStream stream = new ByteArrayOutputStream();
           imageBitmap.compress(Bitmap.CompressFormat.JPEG, 100,stream);
           byte[] byteArray = stream.toByteArray();
           BitmapFactory.Options options = new BitmapFactory.Options();
           myImage = BitmapFactory.decodeByteArray(byteArray, 0,byteArray.length, options);
           fileOutputStream = new FileOutputStream(sPath);
           BufferedOutputStream bos = new BufferedOutputStream(fileOutputStream);
           myImage.compress(CompressFormat.JPEG, 100, bos);
           bos.flush();
           bos.close();
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T22:18:34.083

`data.getExtras("data")`唯一返回缩略图。要获得完整尺寸的图像，您需要将相机意图传递给存储该图像并稍后检索的文件。下面是一个粗略的例子。

开始意图：

```
File dir = new File(Environment.getExternalStorageDirectory() + "/dcim/myappname");
File mFile = File.createTempFile("myImage", ".png", dir);

Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(mFile));
startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST); 
```

内部`onActivityResult`：

```
if (resultCode == RESULT_OK) {
   Bitmap bm = BitmapFactory.decodeFile(mFile.getAbsolutePath());
}
// do whatever you need with the Bitmap 
```

请记住，mFile 必须是全局的或以某种方式持久化，以便在必要时可以调用它。

# objective-c - 如何在 Objective-C 中创建协议

> ID：11729658
> 
> 赞同：0
> 
> 时间：2012-07-30T21:12:25.473
> 
> 标签：objective-c, protocols

我想创建一个 Utils 文件，拥有一些功能并在某些类中使用它们，但我不知道该怎么做。

我有：

实用程序.h

```
#import <Foundation/Foundation.h>

@protocol Utils 

@optional

-(NSString*)colorToHex:(UIColor*)color;

@end

@interface Utils : NSObject 

@end 
```

实用程序

```
#import "Utils.h"

@implementation Utils

-(NSString*)colorToHex:(UIColor*)color{
    return @"Working";
}

@end 
```

mainClass.h（片段）

```
@interface StyleTableViewController : UITableViewController <Utils> 
```

mainClass.m（调用）

```
NSString *myString = [self colorToHex:color];
NSLog(@"%@",myString); 
```

它在调用该函数时崩溃。我应该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:29:16.933

当您声明您的类符合协议（通过添加）时，您告诉编译器该类实现了协议中定义的所有方法。协议不是一个类——它只是一个方法列表。因此，在您的代码中，您有一个名为 Utils 的协议和一个名为 Utils 的类。您符合协议，但没有实现方法，这就是您尝试调用 colorToHex 时程序崩溃的原因。在您的情况下，您需要做的是在 StyleTableViewController 中创建一个 Util 对象并使用它来调用 colorToHex 方法，或者使 colorToHex 方法成为类方法并在需要时从 Util 类中调用它。另一种选择是让 StyleTableViewController 成为 Utils 的子类，但我怀疑这将是一个好的设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T22:11:51.827

另一种选择是将类别添加`Utils`到`UIColor`. 不完全符合您的要求，但它比使用协议更优雅地解决了您的问题。

# java - 如何填充 JToolbar 中的空白区域

> ID：11729661
> 
> 赞同：0
> 
> 时间：2012-07-30T21:12:33.087
> 
> 标签：java, swing

我的一个面板中有一个**JToolbar**。

**精简代码：**

```
//for the containing panel
panel.setLayout(new BorderLayout());

//adding the toolbar
panel.add(toolbar, BorderLayout.WEST); 
```

工具栏有两个`JButton`我添加的 s`GridBagLayout`用于使它们具有相等的宽度

//工具栏代码

```
toolbar=new JToolbar();
toolbar.setLayout(new GridBagLayout());
btn1 = new JBUtton("update layout");
btn2 = new JButton("exit!");
GridBagContraints gbc = new GridBagConstraints();
gbc.gridx=0;
gbc.gridy=1;
gbc.fill = GridBagConstrainsts.HORIZONTAL;
toolbar.add(btn1,gbc);
gbc.gridy=1;
toolbar.add(btn1,gbc); 
```

此代码呈现一个带有等宽按钮的垂直工具栏。唯一的问题是工具栏的高度大于按钮的高度，因此此代码将按钮呈现在工具栏的垂直中心。相反，我希望按钮与顶部对齐，以便将所有空白空间添加到工具栏的末尾。

现在：

```
 ----------
 |        |
 ----------
 |  btn   |
 ----------
 |  btn2  |
 ----------
 |        |
 ---------- 
```

我想要的是

```
 ----------
 |   btn  |
 ----------
 |   btn2 |
 ----------
 |        |
 ----------
 |        |
 ---------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T00:06:40.797

我认为您可以只`Box.createVerticalGlue()`向工具栏添加一个，而无需将布局更改为 GridBagLayout。这将填满按钮后的剩余空间并将它们推到顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-13T16:30:19.260

有点像死人复活的感觉。但是我有一个非常相似的问题并找到了解决方案，所以为什么不分享它：

您必须为按钮设置最大尺寸，否则最大尺寸由 ButtonUI 计算。并将 setHorizo​​ntalAlignment 设置为 SwingConstants.RIGHT 以使按钮内容对齐：

```
public class JToolBarPractise extends JFrame {

  public JToolBarPractise() {
    super();
    addWindowListener(new WindowAdapter() {

      public void windowClosing(WindowEvent we) {
        System.exit(0);
      }
    });
    JPanel contentPanel = new JPanel(new BorderLayout());
    JToolBar toolBar = new JToolBar(SwingConstants.VERTICAL);
    JButton button1 = new JButton("Update Layout!");
    button1.setHorizontalAlignment(SwingConstants.RIGHT);
    button1.setMaximumSize(new Dimension(Short.MAX_VALUE, button1.getPreferredSize().height));
    toolBar.add(button1);
    JButton button2 = new JButton("Exit!");
    button2.setHorizontalAlignment(SwingConstants.RIGHT);
    button2.setMaximumSize(new Dimension(Short.MAX_VALUE, button2.getPreferredSize().height));
    button2.addActionListener(new ActionListener() {

      public void actionPerformed(ActionEvent ae) {
        System.exit(0);
      }
    });
    toolBar.add(button2);
    contentPanel.add(toolBar, BorderLayout.WEST);
    getContentPane().add(contentPanel);
  }

  public static void main(String[] args) throws ClassNotFoundException, InstantiationException,
    IllegalAccessException, UnsupportedLookAndFeelException {
    JToolBarPractise main = new JToolBarPractise();
    main.setSize(300, 300);
    main.setVisible(true);
  }
} 
```

# python - if 和 elif 不打印

> ID：11729662
> 
> 赞同：0
> 
> 时间：2012-07-30T21:12:34.237
> 
> 标签：python, printing, if-statement

```
print'Personal information, journal and more to come'
x = raw_input()
if x ==("Personal Information"): # wont print 
 print' Edward , Height: 5,10 , EYES: brown , STATE: IL TOWN:  , SS:'
elif x ==("Journal"):  # wont print 
 read = open('C:\\python\\foo.txt' , 'r')
 name = read.readline()
 print (name) 
```

我启动程序并`"Personal information, journal and more to come"`显示，但是当我键入其中一个`Personal information`或`journal neither`其中一个时，打印结果并且我没有收到任何错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T21:17:40.050

> 当我输入个人信息或日记时

嗯，是的。它不期望其中任何一个。你的情况是错误的。

要执行不区分大小写的比较，请先将两者转换为相同的大小写。

```
if foo.lower() == bar.lower(): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:03:27.290

当 if 语句需要个人信息时，您正在输入个人信息（以大写 I 表示信息）。

你能做的（上面的伊格纳西奥正在逃避）是：

```
if x.lower() == ("Personal Information").lower(): 
```

代替：

```
if x == ("Personal Information"): 
```

那么任何情况下，“个人信息”、“个人信息”、“个人信息”等都会匹配并进入 if 语句。之所以会这样，是因为在执行的时候，它会取 x 的值，把它变成小写字符串，把字符串“个人信息”变成小写字符串，所以现在不管原来是什么情况，他们比较时两者都是小写。

foo 和 bar 是示例，是编程中常见的编程术语。它只是任何变量的示例，x、y、z 等可以很容易地使用，但 foo 和 bar 只是要引用的常用变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T21:22:55.663

为我工作。你是用大写的 I 写“个人信息”吗？

```
print'Personal information, journal and more to come'
x = raw_input()
if x == ("Personal Information"): # wont print
    print' Edward , Height: 5,10 , EYES: brown , STATE: IL TOWN:  , SS:'
elif x ==("Journal"):  # wont print
    read = open('C:\\python\\foo.txt' , 'r')
    name = read.readline()
    print (name) 
```

输出：

```
[00:20: ~$] python py
Personal information, journal and more to come
Journal
Traceback (most recent call last):
  File "py", line 8, in <module>
    read = open('C:\\python\\foo.txt' , 'r')
IOError: [Errno 2] No such file or directory: 'C:\\python\\foo.txt'
[00:20: ~$] python py
Personal information, journal and more to come
Personal Information
 Edward , Height: 5,10 , EYES: brown , STATE: IL TOWN:  , SS:
[00:20: ~$] 
```

也许是格式？我正在使用 4 个空格。

# python - 列表字典中的Python最小值

> ID：11729670
> 
> 赞同：4
> 
> 时间：2012-07-30T21:13:10.630
> 
> 标签：python, list, dictionary, max, minimum

抱歉问题重新发布......我应该首先编辑这个问题。为模组标记了新的。抱歉，添麻烦了

由于要求更改，不得不重新编写问题。

我有一本字典，如下所示：

```
d = {'a': [4, 2], 'b': [3, 4], 'c': [4, 3], 'd': [4, 3], 'e': [4], 'f': [4], 'g': [4]} 
```

我想获取与字典 d 中最小长度相关联的键，以及具有最大值的键。

在这种情况下，长度最小的键（此字典中列表的最小长度）应返回

```
'e, 'f', 'g' 
```

那些具有最大值（每个列表中的整数之和）的应该返回

```
'b' 'c' 
```

我努力了

```
min_value = min(dict.itervalues())
min_keys = [k for k in d if dict[k] == min_value] 
```

但这并没有给我想要的结果。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T22:35:38.210

使用排序和 lambdas 怎么样？

```
#!/usr/bin/env python
d = {'a': ['1'], 'b': ['1', '2'], 'c': ['8', '1'], 'd':['1'], 'e':['1', '2', '3'], 'f': [4, 1]}
sorted_by_sum_d = sorted(d, key=lambda key: sum(list(int(item) for item in d[key])))
sorted_by_length_d = sorted(d, key=lambda key: len(d[key]))
print "Sorted by sum of the items in the list : %s" % sorted_by_sum_d
print "Sorted by length of the items in the list : %s" % sorted_by_length_d 
```

这将输出：

```
Sorted by sum of the items in the list : ['a', 'd', 'b', 'f', 'e', 'c']
Sorted by length of the items in the list : ['a', 'd', 'c', 'b', 'f', 'e'] 
```

请注意我更改了初始`'d'`字典（只是为了确保它正常工作）

然后，如果您想要总和最大的项目，您将获得`sorted_by_sum_d`列表的最后一个元素。

（不过，我不太确定这是你想要的）

**编辑**：

如果您可以确保列表始终是整数列表（或数字类型，例如`long`，`float`...），则无需将字符串转换为整数。变量的计算`sorted_by_sum_d`可以简单地使用：

```
d = {'a': [1], 'b': [1, 2], 'c': [8, 1], 'd':[1], 'e':[1, 2, 3], 'f': [4, 1]}
sorted_by_sum_d = sorted(d, key=lambda key: sum(d[key])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:15:58.107

您可以使用`min()`参数`key=`，并指定一个比较您想要的方式的键函数。

```
d = {'a': ['1'], 'b': ['1', '2'], 'c': ['2'], 'd':['1']}

min_value = min(d.values())
min_list = [key for key, value in d.items() if value == min_value]
max_len = len(max(d.values(), key=len))
long_list = [key for key, value in d.items() if len(value) == max_len]

print(min_list)
print(long_list) 
```

笔记：

0) 不要`dict`用作变量名；那是字典类的名称，如果将其用作变量名，则可以“隐藏”它。我只是用`d`在这里的名字。

1)`min_value`很容易；无需使用`key=`函数。

2)`max_len`使用`key=`函数 ,`len()`来找到最长的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T21:16:02.597

您的问题是您的列表包含字符串 ( `'2'`)，而不是整数 ( `2`)。省略引号，或使用以下内容：

```
min_value = min(min(map(int, v) for v in dct.values()))
min_keys = [k for k,v in d.items() if min_value in map(int, v)] 
```

同样，要计算最大长度的键：

```
max_length = max(map(len, dct.values()))
maxlen_keys = [k for k,v in d.items() if max_length == len(v)] 
```

此外，将其用作变量名也是一个坏主意`dict`，因为这样做会使内置的`dict`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-16T07:53:05.040

我找到了这样一个简单的解决方案：

```
min_len = len(min(d.values(), key=(lambda value: len(value))))  # 1
min_keys = [key for i, key in enumerate(d) if len(d[key]) == min_len]  # ['e', 'f', 'g'] 
```

# java - 如何在javascript中制作数组对象数组，然后将其传递给java

> ID：11729672
> 
> 赞同：1
> 
> 时间：2012-07-30T21:13:22.877
> 
> 标签：java, javascript, jquery, json

为了说明我的观点：我有 4 个人的姓名年龄和地址

```
[Sam, 23, nj],
[Nome, 25, ny],
[Sim, 20, pa],
[Jack, 12, pa] 
```

我需要将这 4 行发送到 java 端。

我熟悉 java 端编码，所以我可以从列表中检索 4 行等。我是 javascripts 新手，所以我想知道如何将所有这些数据放入一个变量中，然后将其发送到 java，以便 java 理解我我正在发送 4 组数据。

我想做对象的哈希图，无论哪种方式，因为我是新手，我不知道该走哪条路。请建议。

我知道如何通过 ajax 发布数据，我唯一苦苦挣扎的部分是创建 arrAY，以便我的 java 端可以解析它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:16:50.520

您可以将其序列化为[JSON](http://json.org/)，因此它看起来像这样：

```
[{name: "Sam", age: 23, address: "nj"}, 
 {name: "Nome", age: 25, address: "ny"}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:23:47.870

Java 支持 JSON 对象： http: [//www.json.org/java/](http://www.json.org/java/) 使用这些方法。

将数组格式转换为存储变量并使用 stringify 方法。

```
var a = Array([Sam, 23, nj], [Nome, 25, ny], [Sim, 20, pa], [Jack, 12, pa]);
var jsonText = JSON.stringify(a);
//send jsonText to java via post after this 
```

**编辑**

要在下面回答，我的 Java 因废弃而生锈，但您需要使用这里的库[https://github.com/douglascrockford/JSON-java](https://github.com/douglascrockford/JSON-java)，并通过发布数据发送客户端数据 jsonText：

```
<form method='post' action='/Source/jsp/X.jsp' id='jsonform'>
<input id='json' name='json' value=''>
</form> 
```

然后运行一个脚本，用 jsonText 填充输入的值并提交。

完成后，您可以获取 POST 数据并将其反序列化并在您的 Java 程序中使用它。

```
var input = document.getElementById('json');
var form = document.getElementById('jsonform');
input.value = jsonText;
form.submit(); 
```

对于 Java 部分，您说您对它很熟悉，所以我将把这部分留给您。

# .net - Team Foundation Server 版本控制可能支持外部存储库，例如 git

> ID：11729675
> 
> 赞同：3
> 
> 时间：2012-07-30T21:13:28.220
> 
> 标签：.net, git, version-control, alm

我正在研究 ALM 和敏捷 ALM，过去我确实使用过 git、mercurial 和 subversion。

最近我正在使用 TFS，我有一个关于 TFS 是否支持 git 子模块（或 git external 用于远程存储库）的问题。

最好的祝福！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:42:41.067

我认为您正在寻找的是[git-tfs](https://github.com/git-tfs/git-tfs/)，它允许您将 git 与 TFS 存储库一起使用。如果将它安装在 PATH 上，则可以克隆 TFS 存储库，然后使用 git 创建功能分支并使用 git 策略正常工作。然后，不是从您使用的原始远程存储库推/拉，`git tfs pull`或者`git tfs fetch`从上游拉入新更改，`git tfs rcheckin`或者`git tfs checkin`将您的工作提交到 TFS 存储库。

如果您更喜欢使用此 GUI 而不是 git 命令行，甚至还有一个用于[git 扩展的](http://code.google.com/p/gitextensions/)[插件。](https://github.com/git-tfs/git-tfs-gitextensions-plugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:15:12.867

没有。但是你为什么要这样做呢？

如果实际问题是您希望能够在没有 VS 的情况下访问 TFS 项目中的源代码，请查看[http://svnbridge.codeplex.com/](http://svnbridge.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:13:11.943

GIT 和 Mercurial 是分布式的，TFS 是集中式的 :( 也许与[git-tfs 项目有关](http://www.drrandom.org/post/2011/11/16/Grappling-with-multiple-remotes-in-git-tfs.aspx):)

问候。

# iphone - 带有选项的 UIView drawRect 方法

> ID：11729677
> 
> 赞同：0
> 
> 时间：2012-07-30T21:13:42.017
> 
> 标签：iphone, ios, uiview, core-graphics

我想创建一个[UIView 类](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/index.html)，您可以使用多个选项对其进行初始化。

我认为问题在于`drawRect()`方法。是否可以使用某个选项初始化类，例如

```
[[MyUIView alloc]initWithColor:[UIColor blueColor]] 
```

我读到我不应该在`drawRect()`没有初始化对象的情况下调用该方法。

那么如何在不手动调用的情况下实现上面的语句呢？

到目前为止我已经尝试过：

我以为我可以初始化 View 然后调用 Method

```
[MyView changeColorTo:green] 
```

它试图重绘视图但是我无法让它工作。

也许在方法`coreGraphics`中用圆角矩形绘制（使用某种颜色，应该是可选的）很重要`drawRect()`。

我怎样才能实现我想要的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:17:57.887

称呼

```
[self setNeedsDisplayInRect:aCGRect]; 
```

调用 drawRect: 为你。

编辑颜色属性：

```
@interface MyView: UIView

@property (nonatomic, strong) UIColor *drawColor;

@end

@implementation MyView

@synthesize drawColor;

- (id)initWithWhatever
{
    self.drawColor = [UIColor infraRedColor];
    [self setNeedsDisplayInRect:aRect];
}

- (void)drawRect:(CGRect)r
{
    // use self.drawColor
}

@end 
```

# objective-c - 在重叠的动画块中设置 UIView 的 frame 属性会导致跳转

> ID：11729679
> 
> 赞同：1
> 
> 时间：2012-07-30T21:13:58.180
> 
> 标签：objective-c, ios, uiview

（iOS 5.1，XCode 4.4）在我正在处理的一个项目中，我有两个控制器都设置相同 UIView 的 frame 属性（分别设置大小和位置），在时间重叠的单独动画块中（第二个动画块在第一个完成之前开始）。这似乎会导致 UIView 的位置出现奇怪的跳跃（无动画变化）。

重现的最小示例（放置在新的单视图项目（iphone）的视图控制器中，并将一些按钮连接到操作方法）。

```
@interface ViewController ()

@property (nonatomic, strong) UIView *viewA;

@end

@implementation ViewController

- (IBAction)buttonPressed
{
    // Animate
    [UIView animateWithDuration:5 animations:^{
        self.viewA.frame = CGRectMake(0, self.viewA.frame.origin.y, 320, 200);
    }];
    [UIView animateWithDuration:5 animations:^{
        self.viewA.frame = CGRectMake(0, 200, 320, self.viewA.frame.size.height);
    }];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.viewA = [[UIView alloc] init];
    self.viewA.backgroundColor = [UIColor orangeColor];
    self.viewA.frame = CGRectMake(0, 100, 320, 100);
    [self.view addSubview:self.viewA];
}

@end 
```

按下按钮后，您会看到视图跳跃大约 50 像素（移动距离的一半）。

如果有人知道为什么会发生这种情况和/或如何解决这个问题，我很想听听你的意见。先感谢您，

帕特里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:23:05.973

您可以使用该`UIViewAnimationOptionBeginFromCurrentState`选项来避免跳转：

```
[UIView animateWithDuration:5.0 delay:0.0 options:UIViewAnimationOptionBeginFromCurrentState animations:^{
    self.viewA.frame = CGRectMake(0, 200, 320, self.viewA.frame.size.height);
} completion:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:22:26.650

这就是积木的工作原理，你同时做两个动画，试试这个。

```
[UIView animateWithDuration:5 animations:^{
    self.viewA.frame = CGRectMake(0, self.viewA.frame.origin.y, 320, 200);

 } 
completion:^(BOOL finished) {
    self.viewA.frame = CGRectMake(0, 200, 320, self.viewA.frame.size.height);
 }
]; 
```

# asp.net - IIS 7 - 发布到具有默认文档 (index.aspx) 的“/”时，表单发布值丢失

> ID：11729680
> 
> 赞同：2
> 
> 时间：2012-07-30T21:13:57.720
> 
> 标签：asp.net, iis

我有一个 asp.net 网络表单，我将其发布到没有文件名的“/”url，它被传输到默认文档 (index.aspx)。在`Classic`托管管道模式下运行应用程序池 (.net v4.0) 时，表单值可用于接收页面。在`Integrated`模式下运行时，表单值对页面不可用。

**在发布到使用默认文档的 URL 时，如何在集成模式下维护表单集合？**

当直接发布到“/index.aspx”时，只有 1 个请求并且表单值被保留。
发布到“/”时，有 2 个请求。我相信一个由 处理`DefaultDocumentModule`，第二个由页面类（ASP.index_aspx）处理。

有一个不同的处理程序/模块以集成模式处理第二个请求，我无法识别。

我试图在`Application_EndRequest`活动期间识别它：

```
void Application_EndRequest(object sender, EventArgs e)
{
    HttpApplication app = ((HttpApplication)sender);
    int fieldCount = Request.Form.Count; // there are 5 fields in my POST
    var handler = app.Context.Handler;
} 
```

结果：

邮政 '/'

*   经典模式 EndRequest 1
    处理程序：ASP.index_aspx (System.Web.UI.page)
    fieldCount: 5

*   经典模式 EndRequest 2
    处理程序：System.Web.DefaultHttpHandler
    fieldCount：5

表单集合**可**用于页面。

*   集成模式 EndRequest 1
    处理程序：ASP.index_aspx (System.Web.UI.page)
    fieldCount: 0

*   集成模式 EndRequest 2
    **handler: null**
    fieldCount: 5

表单集合**不可**用于页面。

**哪个本机模块/处理程序正在处理第二个请求？**

**更新： **

我找到了为什么我丢失了表单集合[的答案。](https://stackoverflow.com/questions/7228344/postback-doesnt-work-with-aspx-page-as-default-document)“在 IIS 7 或 IIS 7.5 集成模式下的默认文档中可能不会引发事件处理程序”。`FormControlAdapter`那里给出的解决方案运行良好。

但是，我仍然无法识别正在处理请求并删除已发布表单集合的模块/处理程序。我怀疑`ExtensionlessUrlHandler-Integrated-4.0`但无法验证。使用该`Application_EndRequest`事件，没有给我关于模块的信息，高级日志也不提供关于模块管道的信息。

# vb.net - 二维数组（txt 文件）中多行上的元素总和（4）

> ID：11729681
> 
> 赞同：0
> 
> 时间：2012-07-30T21:14:01.417
> 
> 标签：vb.net

我有一个文本文件，内容如下：

落后,拉哈耶,F,7,11.25

两个城市的故事，狄更斯，F，100，8.24

用丝带挂一千棵树,Rinaldi,F,30,16.79

萨菲的天使，麦凯，F，20，8.22

每只会唱歌的小鸟，怀尔斯，F，10，7.70

住在基督里，默里，N，3，12.20

圣经预言,Lahaye 和 Hindson,N,5,14.95

迷人,Eldredge,N,12,16

在基督徒生活中成长,Swindoll,N,11,19.95

治愈心灵的祈祷，Virkler，N，4,12.00

在恩典中成长，弗格森，N，3，11.95

善良美丽的上帝,Smith,N,7,11.75

战胜黑暗,安德森,N,12,16

每行的最后一个元素是价格。我想把所有的价格加起来。我一直在寻找这么多小时，但找不到可以回答我的问题的东西。这似乎很容易，但我无法弄清楚！请帮忙。顺便说一句，这个列表一定会改变（添加行，删除行，更改行），所以如果可以的话，请不要具体，而是让代码对更改保持开放。谢谢！！！

只是为了让您可以看到我的 pooooorrrr 工作，这就是我所拥有的（我想我删除了我的代码并用不同的方式重写了几个小时。）：

```
 Dim Inv() As String = IO.File.ReadAllLines("Books.txt")

    Dim t As Integer = Inv.Count - 1
    Dim a As Integer = 0 to t
    Dim sumtotal As String = sumtotal + Inv(4) 
```

此外，每一行都有一个“F”或一个“N”。我如何将所有 F 和所有 N 相加。我是通过 if 语句来做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:28:47.550

首先，最好使用 Double 作为类型而不是 String。其次，观察我如何在每一行上使用 Split 函数，将其最后一个元素转换为双精度，并将其添加到总数中。是的，使用 If 语句可以确定是否添加到 F 的计数或 N 的计数。

```
 Dim lstAllLines As List(Of String) = IO.File.ReadAllLines("Books.txt").ToList()

    Dim dblTotal As Double = 0.0
    Dim intCountOfF As Integer = 0
    Dim intCountOfN As Integer = 0

    For Each strLine As String In lstAllLines

        Dim lstCells As List(Of String) = strLine.Split(",").ToList()

        dblTotal += CDbl(lstCells(3))

        If lstCells(2) = "F" Then

            intCountOfF += 1

        Else

            intCountOfN += 1

        End If

    Next 
```

# c++ - usaco：十三号星期五错误

> ID：11729685
> 
> 赞同：-1
> 
> 时间：2012-07-30T21:14:30.320
> 
> 标签：c++, algorithm

我目前正在处理 USACO 网站上的一个问题（十三号星期五），我编写了一个程序，给定一个数字 N，计算从 1900 年 1 月 1 日到 12 月的一周中的每一天，第 13 号降落的频率31st,1900+N-1\. 该算法的灵感来自心算技巧：[http ://www.jimloy.com/math/day-week.htm](http://www.jimloy.com/math/day-week.htm)

要记住的事情：1900 年 1 月 1 日是星期一。30 天有 9 月、4 月、6 月和 11 月，其余的都有 31 天，除了 2 月有 28 天，闰年有 29 天。每年能被 4 整除的是闰年（1992 = 4*498 所以 1992将是闰年，但 1990 年不是闰年）以上规则不适用于世纪年。能被 400 整除的世纪年是闰年，其他都不是。因此，世纪年 1700、1800、1900 和 2100 不是闰年，但 2000 年是闰年。*

该程序运行良好，除非 N=256（1900 到 2156）我的程序输出：440 438 439 439 437 439 440

在 USACO 上，有：440 439 438 438 439 439 439

该程序将包含 N 的文件 (friday.in) 作为输入，并在另一个文件 (friday.out) 的一行中输出七个空格分隔的整数，表示每天（从星期六开始）出现的次数。

我已经放了几个 cout 用于调试目的。

这是代码：

```
/*
ID: freebie1
PROG:friday
LANG: C++
*/

#include <fstream>
#include <vector>
#include <iostream>
using namespace std;

class Date
{
    public:
    Date(int month=0,int year=0):m_month(month),m_year(year)
    {

    }
    int monthDiff()
    {
        if(m_month<=3)
        {
            if(m_month==1)
            {
                    return 0;
            }
            else if(m_month==2)
            {
                    return 31;
            }
        }
        if(m_month>=3)
        {
            if((m_year%4==0 && m_year%100!=0)||(m_year%100==0 && m_year%400==0))
            {
                if(m_month<9)
                {
                    if(m_month%2==0)
                        return 60+(31*int(m_month/2.6)+30*(int(m_month/2.6)-1));
                    else
                        return 60+(61*int(m_month/3.5));

                }

                else if(m_month>=9)
                {

                    if(m_month%2==0)
                        return 91+61*(m_month/3);
                    else
                        return 91+(31*int(m_month/2.75)+30*int(m_month/3.6));
                }
            }
            else
            {
                if(m_month<9)
                {
                    if(m_month%2==0)
                        return 59+(31*int(m_month/2.6)+30*(int(m_month/2.6)-1));
                    else
                        return 59+(61*int(m_month/3.5));

                }

                else if(m_month>=9)
                {

                    if(m_month%2==0)
                        return 90+61*(m_month/3);
                    else
                        return 90+(31*int(m_month/2.75)+30*int(m_month/3.6));
                }
            }

        }
    }
    void show()
    {
        cout<<m_month<<"/"<<m_year<<": ";
    }
    int tellDay()
    {
        int daysInYears=int((m_year-1900))*365;
        int daysInMonths=this->monthDiff();
        int leapDays;
        if(m_year%4==0 && m_year!=1900)
            leapDays=int((m_year-1900)/4)-1;
        else if(m_year>2100)
            leapDays=int((m_year-1900)/4)-1;
        else if(m_year>2200)
            leapDays=int((m_year-1900))/4-2;
        else
            leapDays=int((m_year-1900))/4;

        int days=13+leapDays;
        int res=daysInYears+daysInMonths+days;
        cout<<"MonthDiff: "<<this->monthDiff()<<" In years: "<<daysInYears<<" days: "<<days<<"   ";
        return res%7;
    }
    private:
    int m_month;
    int m_year;
};

int main()
{
    ifstream fin("friday.in");
    ofstream fout("friday.out");

    if(fin)
    {
        int n(0),day(0),sMonth(1),sYear(1900);
        fin>>n;
        vector<int> weekDays(7,0);
        for(int i(0);i<n;i++)
        {
            for(int j(0);j<12;j++)
            {
                Date date(sMonth+j,sYear+i);
                day=date.tellDay();
                date.show();
                cout<<day<<endl;
                switch(day)
                {
                    case 0:
                    weekDays[1]+=1;
                    break;
                    case 1:
                    weekDays[2]+=1;
                    break;
                    case 2:
                    weekDays[3]+=1;
                    break;
                    case 3:
                    weekDays[4]+=1;
                    break;
                    case 4:
                    weekDays[5]+=1;
                    break;
                    case 5:
                    weekDays[6]+=1;
                    break;
                    case 6:
                    weekDays[0]+=1;
                    break;
                }

            }

        }
        for(int i(0);i<6;i++)
        {
            fout<<weekDays[i]<<" ";
        }
        fout<<weekDays[6]<<endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T23:10:54.747

从 205 年开始，您会得到错误的结果，即从 2104 年开始。

```
if(m_year%4==0 && m_year!=1900)
    leapDays=int((m_year-1900)/4)-1; 
```

对于可被 4 整除的年份，您不要从计数中减去非闰年 2100、2200、2300、2500...。

使固定：

```
if(m_year%4==0 && m_year!=1900)
    leapDays=int((m_year-1900)/4)-1 + (m_year-1604)/400 - (m_year-1904)/100; 
```

减去它们。这会留下错误的闰年计数在 2300 年之后不能被 4 整除的年份，您可以通过添加类似的更正来纠正它（那时不需要多个分支）：

```
else
    leapDays=int((m_year-1900)/4) + (m_year-1600)/400 - (m_year-1900)/100; 
```

该公式应确定*从*1900 年到`m_year`. 如果`m_year`不是 4 的倍数，则简单的“4 的倍数是闰年”给出的计数为`(m_year - 1900)/4`。但这并没有考虑到 100 的倍数通常不是闰年，所以我们减去其间经过的年数，`- (m_year - 1900)/100`。但是，现在闰年的 400 的倍数*也*被减去了，所以把它们的计数加回来，`+ (m_year - 1600)/400`（这里的基年是 1600，400 的最大倍数不是在 1900 年之后）。

对于 4 的倍数，我们必须纠正当前年份不是当前年份*之前*的闰年这一事实，所以我让更正仅在基年之后发生并移动。

更好的修复，使闰年计数统一（无分支）：

```
int leapDays = (m_year - 1901)/4 + (m_year-1601)/400 - (m_year-1901)/100; 
```

# .net - 一个名为“域”的域实体

> ID：11729686
> 
> 赞同：1
> 
> 时间：2012-07-30T21:14:35.657
> 
> 标签：.net, entity-framework, domain-driven-design, software-design

我创建了一个多层项目，结构如下

*   用户界面
*   应用
*   领域
*   基础设施

我在域层中有一个名为“域”的实体。它代表一个互联网域，因为该项目是一种“域管理软件”，我努力为该实体找到一个更好的名称......

现在我得到的是“预期的类型名称，但找到了命名空间”-Visual Studio 中的错误。到目前为止，我发现消除错误的最佳方法是在实体前面加上其名称空间。所以创建一个新实例如下所示：

```
var domain = new Domain.Entities.Domain(); 
```

这是要走的路，还是您知道更优雅的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T21:27:02.333

*如果您更改其中任何一个*术语，您将避免很多混乱。如果您正在编写供人类阅读的代码以及供机器阅读的代码，您应该担心为系统的两个相关部分提供相同的名称会导致歧义。

我将调用实体 InternetDomain 或（更好，*并且*）调用命名空间 DomainModel。

# php - 在投票系统上每人只允许一票

> ID：11729688
> 
> 赞同：3
> 
> 时间：2012-07-30T21:14:36.760
> 
> 标签：php, voting-system

我正在开发一个小型发布系统，以便我可以在我的网站上发布帖子，人们可以喜欢和不喜欢它。

它看起来像这样：

![投票系统](../Images/647ab28faeefa623d9c60077ad16003c.png)

目前，您可以根据需要多次投赞成票和反对票。我知道如何使用 JavaScript 使图像不可点击，但我还需要一种在 PHP 中执行此操作的方法，因为有人可以使用 fireBug 或 Chrome 控制台再次使按钮可点击。

这可能是我实际上在 PHP 中做的第一件事，所以我仍然是初学者。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T21:20:32.500

我不会只为您编写代码，脚本站点上可能有几十个可行的示例。以下是一些提示，可帮助您指明正确的方向：

会话变量 - `$_SESSION[]`- 检查是否设置，然后在投票后设置。只要他们不关闭浏览器，他们就无法再次投票。

Cookies - `$_COOKIE[]`- 与会话相同，但即使关闭并再次打开浏览器也可以保留。

IP 地址 - `$_SERVER['REMOTE_ADDR']`- 在 MySQL 表中记录 IP 和投票。

登录系统 - 只允许经过身份验证的用户投票，然后在数据库中跟踪投票。

以上的任何组合都是可以接受的。希望这能让你指出正确的方向。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-30T21:18:36.080

既然你要学习这个，我不会发布任何完整的代码。不过，我可以给出一个概述。

最好的方法是将投票存储在数据库表中（可能是 MySQL）：

```
| vote_id | user_id | post_id | vote | 
```

在哪里：

*   `vote_id`是一个自动增量列，为每个投票创建一个唯一的 ID
*   `user_id`是提交此投票的用户的标识符
*   `post_id`是用户正在投票的帖子的标识符
*   `vote`确定此投票是向上还是向下。

现在，您可以形成查询以确定是否有人已经对该帖子进行了投票，并采取相应的行动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T21:18:09.497

您需要在服务器端验证它，即在 PHP 代码中。您可以通过 IP 地址（如果未登录用户/访客）或用户名（对于已登录用户）执行此操作

您无法通过客户端验证来阻止用户。

# mysql - PostgreSQL 相当于 MySQL 内存表？

> ID：11729690
> 
> 赞同：42
> 
> 时间：2012-07-30T21:14:46.673
> 
> 标签：mysql, postgresql, temp-tables

PostgreSQL 有相当于 MySQL 的[内存表](https://dev.mysql.com/doc/refman/5.5/en/memory-storage-engine.html)吗？

这些 MySQL 内存表可以跨会话持续存在（即，不同于在会话结束时丢弃的临时表）。我找不到任何可以用 PostgreSQL 做同样事情的东西。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-30T21:24:36.317

不，目前它们在 PostgreSQL 中不存在。如果你真的需要一个内存表，你可以创建一个 RAM 磁盘，为它添加一个[表空间](http://www.postgresql.org/docs/9.1/static/manage-ag-tablespaces.html)，然后在上面创建表。

如果您只需要在不同会话之间可见的临时表，则可以使用[`UNLOGGED`table](http://www.postgresql.org/docs/9.1/static/sql-createtable.html#AEN67445)。这些不是真正的内存表，但当表数据明显小于系统 RAM 时，它们的行为会惊人地相似。

全局临时表是另一种选择，但在 PostgreSQL 9.2 中不支持（见注释）。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-01-06T13:24:56.490

回答一个四年前的问题，但因为它现在仍然在谷歌搜索结果的顶部。

没有在内存中缓存完整表的内置方法，但是有一个扩展可以做到这一点。

[In Memory Column Store](https://github.com/knizhnik/imcs)是一个库，它充当扩展插件以及列式存储和执行引擎。您可以[在此处](http://www.garret.ru/imcs/user_guide.html)参考文档。有一个加载函数可用于将整个表加载到内存中。

优点是表存储在 postgres shared_buffers 中，因此当执行查询时，postgres 会立即感知到页面在内存中并从那里获取。

缺点是 shared_buffers 并没有真正设计为以这种方式运行，并且可能会发生不稳定（通常不会发生），但是为了安全起见，您可能可以在具有此配置的辅助集群/机器中使用它。

关于 postgres 和 shared_buffers 的所有其他常见警告仍然适用。

# php - Facebook图api公开信息

> ID：11729693
> 
> 赞同：0
> 
> 时间：2012-07-30T21:15:08.297
> 
> 标签：php, facebook, facebook-graph-api

使用 facebook graph api 我可以检索公共信息，例如，使用

```
https://graph.facebook.com/search?q=watermelon&type=post&access_token=xxxxx 
```

我可以拉公共帖子。我想限制公开帖子的输出 - 其中包含状态消息、链接和照片。我真正需要的唯一类型的帖子是状态消息。有没有办法限制搜索？

任何建议都会有所帮助，

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:24:43.743

找出您寻找的信息是否可以通过 FQL 获得。如果是，请仅指定要返回的字段。

# spring - 春季批处理永远只运行一次任务

> ID：11729695
> 
> 赞同：1
> 
> 时间：2012-07-30T21:15:19.170
> 
> 标签：spring, spring-batch

我有一个春季批处理工作。作业中的第一个任务是创建虚拟数据。我只想运行此作业一次，此后该作业运行多少次，或者说能够根据属性文件中的某些属性值将此任务配置为仅运行一次都没有关系。我如何实现这个功能。

在生产系统中，这可能与在处理文件之前创建文件夹结构以复制不同的文件类型相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:20:42.560

[Spring Batch 的Tasklet](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/core/step/tasklet/Tasklet.html)接口就是你要找的。您必须实现该`execute`方法。

```
public class FolderTasklet implements Tasklet{

    public RepeatStatus execute(StepContribution stepContribution, ChunkContext chunkContext) throws Exception {
    //your copy folder structure logic goes here
    }
} 
```

# algorithm - 将曲线图案与图像边缘匹配

> ID：11729699
> 
> 赞同：10
> 
> 时间：2012-07-30T21:15:34.460
> 
> 标签：algorithm, image-processing, opencv, pattern-matching, computer-vision

我有一个要在其边缘搜索曲线的目标图像和一个包含该曲线的模板图像。我需要实现的是在目标图像中找到模板图像中曲线的最佳匹配，并根据分数找出是否匹配。这还包括曲线的旋转和调整大小。目标图像可以是 Canny Edge 检测器的输出，如果这使事情变得更容易的话。

我正在考虑使用 OpenCV（通过使用 Python 或 Processing/Java，或者如果它们对所需函数的访问受限，则使用 C）使事情变得实用和高效，但是无法确定我是否可以使用任何函数（或它们的组合）在 OpenCV 中可用于完成这项工作。我一直在阅读 OpenCV 文档，起初我认为 Contours 可以完成这项工作，但是所有示例都显示封闭的形状，而不是我需要将开放曲线与边缘的一部分匹配的情况。

那么有没有办法通过使用 OpenCV 或使用您建议的任何已知代码或算法来做到这一点？

这里有一些图片来说明这个问题：

![包含要搜索的曲线的模板图像](../Images/7565781b2bba63128e775fbea83b3ee7.png)

![输入要搜索模板曲线并匹配其边缘的图像； 这也可以是边缘图像，即 Canny 边缘检测器的输出，而不是未处理的输入图像](../Images/5b26a027e6a62e2eba306cacece42aea.png)

![结果匹配 - 包括旋转和调整大小](../Images/225b7b97095c8aafe107297e4cc731f0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:17:27.733

我的第一个想法是[广义霍夫变换](http://en.wikipedia.org/wiki/Generalised_Hough_transform)。但是我不知道有什么好的实现。

我会先在精明的边缘图像上尝试 SIFT 或 SURF。它通常用于查找 2d 区域，而不是 1d 轮廓，但是如果您将轮廓周围的最小边界框用作搜索模式，它应该可以工作。

OpenCV 有一个实现： [Features2D + Homography to find a known object](http://opencv.itseez.com/doc/tutorials/features2d/feature_homography/feature_homography.html#feature-homography)

问题可能是获得良好的边缘图像，背面的那些黑色形状可能会分散注意力。

另请参阅此 Stackoverflow 答案： [图像处理：“可口可乐罐”识别的算法改进](https://stackoverflow.com/q/10168686/145999)

# javascript - Ember 事件处理程序中缺少 view.context 或 templateContext

> ID：11729701
> 
> 赞同：0
> 
> 时间：2012-07-30T21:15:42.163
> 
> 标签：javascript, model-view-controller, ember.js, dom-events

我正在尝试将填充视图的对象推送到数组中，但引用不知何故丢失了。我有一个 Ember 视图，其中定义了`eventManager`：

```
FrontLine.NewProductButton = Em.View.extend({
    tagName: 'button',
    classNames: ['addtl_product',],
    templateName: 'product-button',
    eventManager: Ember.Object.create({
        click: function(event, view) {
            FrontLine.ProductsController.toggleProductToCustomer(event, view);
        }
    })
}) 
```

该视图呈现了一堆按钮，这些按钮使用来自`ProductsController`使用`#each`帮助器的对象的属性呈现。那部分效果很好。当我点击这些按钮中的任何一个时，点击事件正在触发并执行我要求的任何操作，包括成功调用`toggleProductToCustomer`我从我指定的处理程序函数（）`ProductsController`：

```
FrontLine.ProductsController = Em.ArrayController.create({
    content: [],
    newProduct: function(productLiteral) {
        this.pushObject(productLiteral);
    },
    toggleProductToCustomer: function(event, view){
        FrontLine.CustomersController.currentCustomer.productSetAdditional.pushObject(view.context);    
    }
}); 
```

我正在尝试使用该函数将其属性填充该视图的对象推送到数组中。我的应用程序中的另一个地方（一个简单的搜索字段），使用`pushObject(view.context)`. 然而，在这里，所有被推入数组的是`undefined`. 我尝试改用[view.templateContext](http://docs.emberjs.com/symbols/Ember.View.html#templateContext)，但这并没有更好的效果。当我尝试从这些函数中控制台记录按钮的`view`对象时，我得到了我所期望的：

```
<(subclass of FrontLine.NewProductButton):ember623> 
```

但要么`view.context`或`view.templateContext`返回`undefined`。如何访问我所追求的对象，以便将其添加到我的数组中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:57:07.167

简单的答案是，这是一个字母的区别：

```
view.content 
```

或者：

```
view.get('content') 
```

在特定情况下提供源对象，而不是`view.context`.

（到目前为止，我对 Ember 的唯一真正挑战是对象和属性的访问器因情况而异，并且没有真正的文档。有时对象位于 view.context，有时位于 view.content，有时位于 _parentView .content，等等，等等。如果有一个图表，它有无数种不同的语法来访问相同的数据，这将是很棒的，这取决于你要通过哪个特定的光圈来获取它。我还在发现它们.. .)

# javascript - 我正在尝试将 JavaScript 加载到我的 UIWebView

> ID：11729704
> 
> 赞同：0
> 
> 时间：2012-07-30T21:15:48.980
> 
> 标签：javascript, iphone, objective-c, ios, uiwebview

我正在尝试将 JavaScript 加载到 UIWebView 中。下面是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *path = [[NSBundle mainBundle] pathForResource:@"index" ofType:@"html"];
    NSURL *url = [NSURL fileURLWithPath:path];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [webview loadRequest:request];
}

-(void)webViewDidFinishLoad:(UIWebView *)webView{

    NSString *javascript = [[NSString alloc] initWithContentsOfFile:@"script.js" encoding:NSUTF8StringEncoding error:nil];
    [webView stringByEvaluatingJavaScriptFromString:javascript];
} 
```

我在这里做错了吗？Web 视图完成加载，所以我假设我在 Javascript 上做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:54:08.123

如果我正确理解您的问题，您正在尝试将 JavaScript 加载到 UIWebView 中。[UIWebView stringByEvaluatingJavaScriptFromString] 用于执行已经加载到 UIWebView 中的函数。

为什么不在本地 index.html 文件中包含 script.js，然后使用 [UIWebView stringByEvaluatingJavaScriptFromString] 调用 script.js 中定义的函数？

如果我误解了你的问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T12:52:32.743

> 你好呀！！
> 
> 这是我的答案。它是我的工作代码。在您的项目工作区中创建一个 JSLibraries 物理文件夹。将其添加到您的项目中。将您的 abc.js 文件复制到其中。

```
 - (void) addJSLibraryToHTML
{
    NSURL *jqueryLibPath =[[NSBundle mainBundle] URLForResource:@"abc" withExtension:@"js" subdirectory:@"/JSLibraries" ];
    NSString *offlineJqueryLib = [NSString stringWithFormat:@"function addJquery()"
                                  "{"
                                  "function loadScript(url, callback)"
                                  "{"
                                  "var script = document.createElement('script');"
                                  "script.type = 'text/javascript';"
                                  "script.onload = function () {"
                                  "callback();"
                                  "};"
                                  "script.src = url;"
                                  "(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(script);"
                                  "}"
                                  "if(window.jQuery===undefined)"
                                  "{"
                                  "loadScript('%@', function ()"
                                  "{"
                                  "//do call back to your native method from here"
                                  "});"
                                  "}"
                                  "} ; addJquery();",jqueryLibPath.absoluteString];
    [self stringByEvaluatingJavaScriptFromString:offlineJqueryLib];
} 
```

# php - 别名 PHP CLI 脚本，以便执行不需要 PHP 前缀

> ID：11729710
> 
> 赞同：1
> 
> 时间：2012-07-30T21:16:02.647
> 
> 标签：php

我有一个我调用的 PHP CLI 脚本

```
php application.php --args etc 
```

但是，我想给脚本起别名，这样我就可以执行脚本，而无需在命令行调用前加上 php 并具有“.php”扩展名。

```
application --args etc 
```

这可能吗？我认为它是但缺乏知识或可能是在 Google 中搜索的正确术语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:23:38.343

您需要按照 Mike Brants 所说的将下一行添加到您的*sample.php*文件中

```
#!/path/to/cli/php 
```

但你也必须在 linux 中做这些

```
chmod +x sample.php 
```

告诉 linux (unix) 机器将这些文件解释为可执行文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:20:24.230

您可以只使用 shebang 来定义用于从文件中执行的应用程序。因此，在脚本的开头，您将放置如下内容：

```
#!/path/to/cli/php
<?php
// start your PHP here 
```

从命令行执行时，操作系统将知道使用指定的 PHP CLI 应用程序来执行脚本。显然，PHP CLI 可执行文件的路径将根据您的系统而有所不同，应该用我上面显示的内容替换。

这比别名 IMO 更灵活，因为您不需要为每个可能希望从命令行以这种方式运行的 PHP 脚本输入别名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T21:20:39.740

啊啊。别名可以添加到 .base_profile

[http://www.hypexr.org/bash_tutorial.php#alias](http://www.hypexr.org/bash_tutorial.php#alias)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T21:21:15.817

使用所谓的“shebang”：

在脚本的第一行添加：

```
#!/usr/bin/php 
```

其中 /usr/bin/php 是您的 php cli 可执行文件的路径。而已 ！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-24T01:01:54.437

更合乎逻辑和愉快（至少我最喜欢）的电话是`#!/usr/bin/env php`

引用用户在 PHP 手册上自己贡献的注释部分：

> 使用“env”来查找 PHP 的安装位置：它可能位于 $PATH 中的其他位置，例如 /usr/local/bin。

# vb.net - 将字符串解析为数组或数据表

> ID：11729714
> 
> 赞同：0
> 
> 时间：2012-07-30T21:16:09.020
> 
> 标签：vb.net, arrays, string, parsing

我正在尝试解析一个冗长无聊的文本文档并对其进行解析和格式化。

```
"7/29/2012 1:25:20 PM","Summary Plan/Second Floor /Master_VAV_2-24","Source :OEnd"
"7/29/2012 11:25:23 AM","Summary Plan/Second Floor /Master_VAV_2-24","Source :OStart" 
```

我想解析引号之间的每个值，但我无法在网上找到任何可以帮助我的东西，我相信这是知道如何称呼它并搜索的问题。

“日期”、“位置”、“类型”将是我想要将其解析成的 3 个值，然后我可以为数据表中的每个项目运行一个循环并根据需要对其进行格式化。

***任何帮助***都会很棒，谢谢！

我正在考虑使用 RegEx 获取行并将它们手动添加到数组中，就像这样。

```
Dim rx As New Regex(",", RegexOptions.IgnoreCase Or RegexOptions.Multiline)
Dim matches As MatchCollection = rx.Matches(strSource)
For Each match As Match In matches
Dim matchValue As String = match.Value
If Not list.Contains(matchValue) Then
    list.Add(matchValue)
End If
Next 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T21:18:53.473

这种格式似乎是 CSV - 使用许多免费和开源的 CSV 解析器之一（谷歌“.NET CSV 解析器”将返回许多结果。

在名称规范中内置了`Microsoft.VisualBasic.FileIO`一个 - [`TextFieldParser`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx).

# sql-server - T-SQL 选择相等结果

> ID：11729718
> 
> 赞同：1
> 
> 时间：2012-07-30T21:16:28.953
> 
> 标签：sql-server, tsql

在以下代码段中，我在第 4 行中遇到错误（'=' 附近的语法不正确）。我需要在 select 语句中将相等结果显示为列。

```
declare @five int
set @five = 5

declare @bool bit
set @bool = (@five = 6)

select @five, @bool 
```

结果集应该有两列：5 false

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T21:19:23.957

T-SQL 没有真正的布尔类型。这是一个奇怪的情况。这是解决方案：

```
set @bool = case when @five = 6 then 1 else 0 end 
```

真值表达式在其他语言中是布尔类型，在 T-SQL 中没有类型。您只能在特殊的句法位置使用真值表达式，例如`where`,`if`和`case`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T21:19:46.130

您需要`CASE`围绕该逻辑声明：

```
declare @five int
set @five = 5

declare @bool bit
set @bool = CASE WHEN @five = 6 THEN 1 ELSE 0 END

select @five, @bool 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T21:20:37.077

您可以使用`CASE`

```
declare @five int
set @five = 5

select @five, CASE WHEN @five = 6 THEN 1 ELSE 0 END 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T21:33:03.263

作为一种奇特的方法-如果您不想使用 CASE 逻辑-按位操作数也可以：

```
declare @five int
set @five = 5

declare @bool bit
set @bool = (@five ^ 5)

select @five, ~@bool 
```

# spring - spring mvc hibernate 形成登录页面、权限和身份验证问题

> ID：11729719
> 
> 赞同：0
> 
> 时间：2012-07-30T21:16:31.387
> 
> 标签：spring, hibernate

我对 Spring mvc、安全和休眠真的很陌生。所以我只是有几个问题。

我正在使用 mysql 数据库并想创建一个登录页面。在线阅读内容时，它说我需要一些权限字段。这是必需的吗？

现在，我有以下内容：

```
HibernateUtil.java
UserInfoHelper.java - this implements query methods
Userinfo.hbm.xml
Userinfo.java - contains all the fields from my userinfo table
UserinfoId.java = contains id related fields from my userinfo table 
```

.

基本上，除了 UserInfoHelper 之外的上述文件是由 netbeans 上的休眠工具生成的。

对于我的 applicationContext.xml，我得到了：

```
<bean id="propertyConfigurer"
          class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
          p:location="/WEB-INF/jdbc.properties" />

          <bean id="dataSource"
          class="org.springframework.jdbc.datasource.DriverManagerDataSource"
          p:driverClassName="${jdbc.driverClassName}"
          p:url="${jdbc.url}"
          p:username="${jdbc.username}"
          p:password="${jdbc.password}" /> 
```

如何开始使用数据库身份验证创建 Spring Security、mvc？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:09:23.510

[使用 JDBC 的 Spring Security示例](http://www.mkyong.com/spring-security/spring-security-form-login-using-database/)。

# linux - 如何在linux的文件中捕获top命令的输出？

> ID：11729720
> 
> 赞同：37
> 
> 时间：2012-07-30T21:16:31.587
> 
> 标签：linux, file

我想将特定“top”命令的输出写入文件。我做了一些谷歌搜索，发现可以使用以下命令来完成。

```
top -n 10 -b > top-output.txt 
```

其中 -n 指定迭代次数，-b 用于批处理模式。如果让 top 进行 10 次迭代，这将非常有效。但是如果我用 Ctrl-C 中断命令的运行，输出文件似乎是空的。

我不会事先知道迭代次数，所以我需要手动打破它。如何在不指定迭代的情况下捕获文件中 top 的输出？

我试图准确使用的命令是

```
top -b | grep init > top-output.txt 
```

并随时打破它。但它不起作用。

编辑：为了给这个问题提供更多的上下文，我有一个 Java 代码，它调用一个带有输入文件的工具。正如该工具将文件作为输入并运行一段时间，然后获取下一个文件，依此类推。我有一组 100,000 个文件需要提供给该工具。所以现在我正在尝试监视该特定工具（它在 Linux 中作为进程运行）。我无法将整个“顶部”数据捕获为文件，因为不需要的数据太大。如何仅捕获该进程的系统统计信息并使用 top 将其写入文件？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-30T21:22:02.317

对我来说`top -b > test.txt`，`top`即使我用`ctrl-c`. 我建议你先转储，然后再转储`grep`文件。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-30T21:35:44.527

如何使用`while`循环和`-n 1`：

```
while sleep 3; do 
  top -b -n1 | grep init > top-output.txt
done 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-30T21:26:19.513

看起来在所有迭代完成之前输出不会写入文件。您可以通过使用如下外部循环包装来解决此问题：

```
touch top-output.txt
while true; do
    top -b | grep init >> top-output.txt
done 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-12T19:20:45.817

这是我喜欢在我的 mac 上使用的 1-liner：

```
top -o -pid -l 1 | grep "some regexp" 
```

干杯。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-13T06:02:41.303

**解决了这个问题。即使您按 Ctrl+c 这也有效，即使**我想记录 Cpu% 时也遇到了同样的问题。执行这个 shell 脚本：

```
#!/bin/sh
while true; do
    echo "$(top -b -n 1 | grep init)"  | tee -a top-output.log
    sleep 1
done 
```

*   您可以 grep 任何您想从 top 命令中提取的内容，使用此脚本将其存储到文件中。
*   **-b：批处理模式操作** 以批处理模式启动top，这对于将输出从top发送到其他程序或文件可能很有用。在这种模式下，**top 将不接受输入并运行，直到您使用 -n 命令行选项设置的迭代限制或直到被杀死。**
*   **-n number**，此选项指定在结束前 top 应该产生的最大迭代数或帧数。在这里，我使用**了 -n 1**。
*   了解`man top`更多详情
*   tee -a 使输出在控制台上可见，并将输出存储到文件中。-a 选项将输出附加到文件中。
*   在这里，我给出了 1 秒的间隔。您可以提及任何其他间隔。

-b 和 -n 的解释来源：联机帮助页

```
man top 
```

克鲁西卡

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-11T16:29:05.770

由于控制留在 CLI 中，CTRL+C 不是理想的解决方案。您可以使用以下命令将顶部输出转储到文件中：

```
top -n 1 -b > top-output.txt 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-04-16T13:31:12.170

正如@Thor 在评论中指出的那样，您只需要确保`grep`不是任意缓冲而是使用选项*按行*`--line-buffered`缓冲：

```
top -bn 10 | grep 'init' --line-buffered | tee top-output.txt 
```

* * *

[如果没有 grep-ing，将输出重定向`top`到文件就可以了，包括中断。]

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-17T21:42:10.387

我有同样的问题...

这是我的台词：

```
top -b -u myUser | grep -v Prog.sh | grep Prog > myFile.txt 
```

它会创建 myFile.txt 但当我 Ctrl+C 时它会是空的。所以在我启动了我的 top 命令之后，我开始了第二个 top 进程。当我找到第一个顶部的 PID（经过反复试验）并通过第二个顶部将其杀死时，第一个顶部按预期写入文件。

希望有帮助！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-26T18:40:15.457

如果您希望在后台运行 top 命令（只是不用担心注销/睡眠等） - 您可以使用 nohup 或批处理作业或 cron 或屏幕。

***使用 nohup（代表：不挂断）：***

假设如果您将 top 命令保存在名为**top-exec.sh**的文件中，其内容如下：

```
 top -p <PID> -b > /tmp/top.log 
```

您可以将 top 命令替换为您感兴趣的任何进程。然后，您可以使用 nohup 执行**top-exec.sh**，如下所示：

```
$> nohup top-exec.sh & 
```

这会将 top 命令的所有输出重定向到名为**"top.log"**的文件。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-02-16T03:11:58.900

从*顶部*命令中，我们可以看到所有进程及其 PID（进程 ID）。要仅打印一个进程的顶部输出，请使用以下命令：

```
$ top –p PID 
```

要将任何进程的 top 命令保存到文件中，请使用以下命令：

```
top -p $PROCESS_ID -b  > top.log 
```

where > 将标准输出重定向到文件。

# jquery - 我应该在强类型类中使用数组还是列表值来接收 jQuery 序列化表单数据？

> ID：11729733
> 
> 赞同：0
> 
> 时间：2012-07-30T21:17:15.853
> 
> 标签：jquery, c#-4.0, serialization, arraylist, webmethod

我正在创建一个 .Net Web 服务来接收和处理来自 JQuery.form.js 的序列化表单数据，其中包含在表单中的几个多选。

发送到 Web 服务的序列化数据包括如下内容：

```
&travelwith=4&travelwith=5&travelwith=6 
```

对于“travelwith”字段，显示表单的选择字段中有 10 项中的 3 项可供选择。

我可以使用以下内容构造一个强类型类：

```
public class StoreUserSet
{
public Array travelwith { get; set; }
public string otherfield { get; set; }
....
} 
```

然后让我的 web 方法获取这样的对象：

```
StoreUserSet StUserSet = new StoreUserSet(); // Create new class instance.

[WebMethod()]
public bool ProfSet1(StoreUserSet StUserSet)
{
...
} 
```

多选字段“travelwith”的各种值是否会自动解析到类的**Array travelwith**中，以便我可以通过 LINQ 将 3 个项目值作为逗号分隔列表保存到 SQL 中？

我还没有走到这一步……我想我会得到关于我计划的方法的反馈。

感谢您的任何反馈，马丁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:48:15.317

好的，因为我的[KeyLargo](http://myrentals-keylargo.com)站点的 JQuery 表单包含单选表单数据和多选数据，我需要能够将多选数据存储在 Sql 中的单个字段中。

我在尝试使用 Array 类型将数据存储在带有逗号分隔字符串的 Sql 单个字段中来处理服务器上的多个选择时遇到了问题。所以我解决上述问题的方法是使用 string[] 创建强类型类，以捕获通过 AJAX 传递到服务器的序列化多选数据：

```
public class StoreUserSet
{
public string[] travelwith { get; set; }
public string otherfield { get; set; }
....
} 
```

我使用 Rick Strahl 的便捷方法来处理从客户端传递的多选数组数据：

```
public static string[] FormMultiple(this  NameValue[] formVars, string name)
{
var matches = formVars.Where(nv => string.Equals(nv.name, name,
StringComparison.OrdinalIgnoreCase)).Select(nv => nv.value).ToArray();
return (0 == matches.Length) ? null : matches;
} 
```

要遍历数组设置值，如下所示：

```
profile_travelwith = formVars.FormMultiple("profile_travelwith"); 
```

然后像这样加入多选字符串 [] 数组中的值：

```
profile_travelwith = string.Join(",", StUserSet.profile_travelwith); 
```

轻松使我能够将数据保存到配置文件的相关表字段中。

# unit-testing - 断言在控制器中设置的会话变量 - Grails 测试用例

> ID：11729737
> 
> 赞同：1
> 
> 时间：2012-07-30T21:17:38.637
> 
> 标签：unit-testing, grails, junit

我有一个控制器操作来检查条件并根据条件的结果，它将一个字段设置为会话变量

控制器：

```
def checkUser={
    if(condition: true){
       session.user = id
    }else{
       session.user=null
    }
} 
```

现在，在我的测试用例中，如果我必须断言此会话的用户值，我该怎么做？

我像这样尝试过，但没有奏效：

```
void testSomething(){
    controller.checkUser()
    assertNull(session.user)
} 
```

关于如何断言在控制器中设置的会话变量的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T01:16:59.770

确保您的测试类扩展了*ControllerUnitTestCase*或正在使用测试 Mixin。

CUTC 提供了几个模拟来促进控制器测试。这是你要做的：

```
void testSomething(){
    controller.checkUser()
    assertNull(mockSession.user)
} 
```

*   这是文档： http: [//grails.org/doc/1.3.x/api/grails/test/ControllerUnitTestCase.html](http://grails.org/doc/1.3.x/api/grails/test/ControllerUnitTestCase.html)
*   如果您使用 grails 2.0+： http: [//grails.org/doc/latest/api/grails/test/MvcUnitTestCase.html](http://grails.org/doc/latest/api/grails/test/MvcUnitTestCase.html)

# java - 如何将 GUI 添加到已完成的程序中？

> ID：11729742
> 
> 赞同：0
> 
> 时间：2012-07-30T21:18:00.233
> 
> 标签：java, swing, user-interface

我用 Java 构建了一个纯文本或 CLI 程序。现在我想在它之上构建一个 GUI。回到学校时，我只学会了如何围绕 GUI 构建程序，而不是围绕程序构建 GUI。

我该怎么做呢？

谢谢你。

编辑：显然我完全被误解了。除了输入参数之外，我还有进度信息和在 CLI 模型中使用字符串显示的内容。我已经知道构建 GUI 和图形输入界面的基础知识。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T21:27:55.910

在你编写你的 GUI 之前，重构你的 CLI，直到它没有做任何实际的工作。也就是说，您在输入收集和数据操作之间有明显的分离障碍。

例如，想象一个管理一些库存的 CLI。这会很糟糕：

```
if(command.equals("additem")) {
    int itemNumber = Integer.parseInt(tokens[1]);
    int quantity = Integer.parseInt(tokens[2]);
    if(items.contains(itemNumber) { // exists, add to current
        int currentQuantity = items.get(itemNumber);
        int newQuantity = quantity + currentQuantity;
        items.put(itemNumber,newQuantity);
    } else { // doesn't exist, make new entry
        items.put(itemNumber,quantity);
    }
    continue;
} 
```

这很好，因为它做了它应该做的事情。不好的是 CLI 正在做这项工作，而不是其他一些接口。更好的方法是

```
if(command.equals("additem")) {
    int itemNumber = Integer.parseInt(tokens[1]);
    int quantity = Integer.parseInt(tokens[2]);
    inventoryManager.addItem(itemNumber,quantity);
    continue;
} 
```

现在您的 CLI 所做的就是收集输入，并将该输入传递给某个管理器。

一旦 CLI 中的每个命令都采用“收集输入并将其传递给某个管理器类”的格式，您就可以制作 GUI。制作 GUI 时，调用与 CLI 中完全相同的方法，您只需从 GUI 字段而不是从 CLI 获取数据！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:29:41.487

要使用 Java 编写 GUI，您很可能希望使用内置`Swing`框架。

快速搜索“Java Swing 教程”会发现许多有用的结果，但这里有一些很好的资源可以帮助您入门：

*   [http://docs.oracle.com/javase/tutorial/uiswing/](http://docs.oracle.com/javase/tutorial/uiswing/)
*   [http://zetcode.com/tutorials/javaswingtutorial/](http://zetcode.com/tutorials/javaswingtutorial/)

如果您对 Java GUI 编程很认真，那么我强烈建议您购买一[本](http://www.amazon.co.uk/Java-Swing-Marc-Loy/dp/0596004087/ref=sr_1_1?ie=UTF8&qid=1343683745&sr=8-1)有关该主题的书。

# android - Android 图片库（幻灯片），适合新手

> ID：11729750
> 
> 赞同：0
> 
> 时间：2012-07-30T21:18:22.383
> 
> 标签：android, gallery, slideshow, image

我几乎是一个完全的编程初学者（很久以前只做了一些基本的）。

我想学习如何制作 Android 应用程序。我的目标是制作一个简单的应用程序，它可以是某种带有幻灯片功能的图片库。该应用程序将例如集成十张图片，屏幕底部会有两个箭头来切换到下一张（或上一张）图片。这就是它的开始。

有没有人愿意列出制作这个应用程序要遵循的主要步骤？到目前为止，我正在通过各种教程学习基础知识，但我有点挣扎......

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:31:14.070

1.  制作包含 ImageView 和两个按钮的主要活动
2.  制作将图像加载到数组或列表中的函数
3.  实现按钮点击的监听器

够了还是你想让我写更多关于这个？

# bash - Zenity entry 和 sudo -S 在没有 shell 的情况下无法正常工作

> ID：11729761
> 
> 赞同：0
> 
> 时间：2012-07-30T21:19:13.767
> 
> 标签：bash, sudo, zenity

我有问题`zenity entry`和`sudo -S`。

我正在做这样的事情：

```
zenity --entry --title 'title' --text 'text' --hide-text | sudo -S pm-suspend 
```

如果我在 shell 中运行它，它就可以工作。但我将它放入文件中，并使用快捷键启动此脚本。它不工作！

我试图`pm-suspend`用我自己的脚本替换，该脚本打印`id -u`到文件中。但是没有创建文件。

任何想法，哪里可能有问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T00:41:56.173

它看起来很糟糕，但你可以使用：

```
xterm -e "zenity --entry --title 'title' --text 'text' --hide-text | sudo -S pm-suspend" 
```

如果有人知道如何隐藏 xterm 或其他解决方案，请分享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:41:14.693

这取决于 (1) 脚本和 (2) 运行它的位置。

例如，您启动脚本的环境可能具有其他`PATH`或其他环境变量。

您能否展示一下脚本以及如何启动它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T03:17:22.773

多年来一直有一个 kde-sudo 软件包。只需在您的包管理器中查找 sudo。它将允许您通过 GUI 进行身份验证。用提示生成器来做这件事真的很俗气。

因此，在您的脚本中，您将执行以下操作：

```
kdesudo
privilegedcommand 
```

Superuser 上有一个类似的帖子，也许有人说过 gnome：

[https://superuser.com/questions/135311/sudo-access-for-desktop-actions-in-gnome-kde](https://superuser.com/questions/135311/sudo-access-for-desktop-actions-in-gnome-kde)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T14:27:32.550

所以我想通了，有什么问题..

`sudo`没有`tty`. 所以有必要编辑`/etc/sudoers`文件并删除requiretty行。

# ruby - Rails Fixtures 中的参考用户

> ID：11729765
> 
> 赞同：3
> 
> 时间：2012-07-30T21:19:24.533
> 
> 标签：ruby, ruby-on-rails-3

有没有办法在另一个夹具中引用用户夹具的 ID。我有一个 messages.yml 夹具：

```
basic:
  body: "Hey Barney, wanna go bowling tonight?"
  sender: fred
  recipient_ids: [users(:barney)]
  type: Message 
```

用户.yml

```
barney:
 first_name: Barney
 last_name: Rubble 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-27T21:56:30.353

是的，使用 ERB 语法：

```
recipient_id: <%= User.find_by_first_name('Barney').id %> 
```

[http://guides.rubyonrails.org/v5.0/testing.html#the-low-down-on-fixtures](http://guides.rubyonrails.org/v5.0/testing.html#the-low-down-on-fixtures)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:22:58.840

这是灯具不再常用的一个重要原因。我建议使用种子文件。可能与[seed_fu](https://github.com/mbleigh/seed-fu/)。这将允许您在 Ruby 中创建固定装置/种子并执行任何操作。

# ruby - 单例类中的常量

> ID：11729766
> 
> 赞同：2
> 
> 时间：2012-07-30T21:19:32.037
> 
> 标签：ruby, singleton, constants

我有这个代码：

```
class A
  def print
    puts CONSTANT
  end
end

module B
  CONSTANT = "Don't Panic!"
end 
```

假设`a`是 A 类的一个实例。

所以我需要一个`CONSTANT`应该可以找到的定义`a.print`。

我考虑将模块包含`B`到`a`的单例类中，例如：

```
a.singleton_class.send :include, B

a.print   # error: CONSTANT isn't found 
```

我认为现在调用该方法应该没问题，但实际上不是。

应该成功导入常量，因为以下代码按预期工作：

```
a.singleton_class.constants  # => [.., :CONSTANT, ..] 
```

但是，通过将常量包含在**类**中而不是**单例类**中，它可以工作：

```
a.class.send :include, B

a.print   # prints: Don't Panic! 
```

我认为我不能引用在单例类中定义的常量很奇怪。如果这是合理的，我想知道为什么。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T00:36:38.777

返回的类`singleton_class`是一个匿名类，它继承自对象的类`a`。

所以`a.class`并`a.singleton_class`指代不同的对象。

```
puts a.class.object_id           # => 79495930
puts a.singleton_class.object_id # => 79495830 
```

还有不同`a.singleton_class`的类：是`A`.

```
a.singleton_class.superclass # => A 

a.singleton_class.ancestors  # => [B, A, Object, Kernel, BasicObject] 
a.class.ancestors            # => [A, Object, Kernel, BasicObject] 
```

正因为如此，`a.singleton_class`它不会像任何其他子类那样与父类共享自己的常量。

```
puts a.class.constants             # => []
puts a.singleton_class.constants   # => [:CONSTANT] 
```

# android - 在脚本中设置 Android 模拟位置

> ID：11729767
> 
> 赞同：1
> 
> 时间：2012-07-30T21:19:34.167
> 
> 标签：android, bash

我有一部 Android 手机（不是模拟器），我想制作一个 bash 脚本来设置手机的位置。如果我有一个包含我的纬度和经度的文件，像这样

```
45.3453 13.3453
45.3467 13.3501
etc     etc 
```

我想做类似的事情

```
#!/bin/bash

for ii in $(cat lat_lon_file); do
    lat=$(echo $ii | cut -f 1)
    lon=$(echo $ii | cut -f 2)
    adb shell setLatLon $lat $lon
done 
```

我不确定如何设置这样的位置（如果有的话），我可以在 /proc 某处回显吗？

另外，奖金：`cut` `$ii`在我的脚本中是否有比`echo`ing 和管道更清洁的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T23:43:22.430

Your current script does not iterate over lines, it iterates over words. This means that each iteration will only have the latitude or the longitude. This correct way to iterate over lines in a file and answers your side question:

```
while read -r lat lon _; do
   adb shell setLatLon "$lat" "$lon"
done < lat_lon_file 
```

# mysql - MySQL - 带有 FLOAT(10,6) 的 BETWEEN 运算符的作用类似于 > 和 <，而不是 >= 和 <=

> ID：11729768
> 
> 赞同：7
> 
> 时间：2012-07-30T21:19:37.570
> 
> 标签：mysql

我有一张带有位置纬度和经度的表格。我成功地使用了 BETWEEN 子句，直到我遇到了正在搜索的值与数据库中的值相同的情况。在这些情况下，它不会返回结果。这是一个示例，其中：

```
SELECT 
  `Location`.`latitude`,
  `Location`.`longitude`
FROM
  `locations` AS `Location` 
WHERE `latitude` >= 40.735619 
  AND `latitude` <= 40.736561 
  AND `longitude` >= -74.033882 
  AND `longitude` <= -74.030861; 
```

回报：

```
"latitude"  "longitude"
"40.736561" "-74.033882"
"40.735619" "-74.030861" 
```

如果我使用 BETWEEN CLAUSE （注意我什至试过[这个](https://stackoverflow.com/questions/9981948/mysql-searching-negative-longitude-values-with-between)）：

```
SELECT   
  `Location`.`latitude`,
  `Location`.`longitude`
FROM
  `locations` AS `Location` 
WHERE `latitude` BETWEEN LEAST(40.735619, 40.736561)
  AND GREATEST(40.736561, 40.735619)
  AND `longitude` BETWEEN LEAST(- 74.033882, - 74.030861)
  AND GREATEST(- 74.030861, - 74.033882) 
```

我得到 0 个结果。哦，更重要的是，如果我在每个值 Ex 中添加和/或减去 0.000001。“BETWEEN (40.735619-0.00001)”等。如果我这样做，它会返回两个结果。

好吧，我将使用 >= 和 <= 但我不明白为什么 BETWEEN 表现得像 > 和 < 在[文档](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between)中非常清楚：

> 如果 expr 大于或等于 min 并且 expr 小于或等于 max，则 BETWEEN 返回 1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T21:26:34.413

您应该使用十进制数据类型而不是浮点数。浮点值的相等，因此之间的相等是不精确的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:28:20.710

我怀疑这与浮点转换中的舍入误差有关。根据[文档](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between)，该表达式仅当所有三个参数都是相同类型时才`expr BETWEEN min AND max`等效。`(expr <= max AND expr >= min)`否则，类型转换将应用于所有参数。正是在此转换期间会发生舍入误差。

# cocos2d-iphone - CCMutableArray 已弃用，如何更改代码

> ID：11729769
> 
> 赞同：3
> 
> 时间：2012-07-30T21:19:38.090
> 
> 标签：cocos2d-iphone, cocos2d-x

我正在完成 cocos2d-x SimpleGame 项目，我被困在第 5 章，[http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Chapter_5_-_How_to_Detect_the_Collisions](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Chapter_5_-_How_to_Detect_the_Collisions)。

我发现 CCMutableArray 已被弃用，取而代之的是 CCArray。但是我需要如何修改以下内容，以使其与 CCArray （显然不支持模板）一起使用？

HelloWorldScene.h

```
cocos2d::CCMutableArray<cocos2d::CCSprite*> *_projectiles; 
```

HelloWorldScene.cpp

```
// in init()
// Initialize arrays
_projectiles = new CCMutableArray<CCSprite*>;

HelloWorld::~HelloWorld()
{
  if (_targets)
  {
    _projectiles->release();
    _projectiles = NULL;
  }
}

HelloWorld::HelloWorld()
:_projectiles(NULL)
{
}

void HelloWorld::update(float dt)
{
  CCArray *projectilesToDelete = new CCArray<CCSprite*>;
  CCMutableArray<CCSprite*>::CCMutableArrayIterator it, jt;

  for (it = _projectiles->begin(); it != _projectiles->end(); it++)
  {
     CCSprite *projectile = *it;
     // (...)
  }
  // (...)
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T23:07:48.120

我认为是这样

```
CCArray* array1 = CCArray::create(); 
```

稍后使用它：

```
CCObject* arrayItem;
CCARRAY_FOREACH(array1, arrayItem){
    CCSprite* pItem = (CCSprite*)(arrayItem);
    //your code here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T00:41:50.753

我改用 std::list<> ，效果很好。只是删除可能会有些低效。

我是 cocos2d-x 的初学者，我不知道为什么他们像 CCMutableArray、CCArray 一样“重新发明轮子”（只是在我的初学者看来）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T22:11:07.350

尝试使用 std::vector 就足够了:)

[http://en.wikipedia.org/wiki/Sequence_container_(C%2B%2B](http://en.wikipedia.org/wiki/Sequence_container_(C%2B%2B) )

[http://www.codeguru.com/cpp/cpp/cpp_mfc/stl/article.php/c4027/C-Tutorial-A-Beginners-Guide-to-stdvector-Part-1.htm](http://www.codeguru.com/cpp/cpp/cpp_mfc/stl/article.php/c4027/C-Tutorial-A-Beginners-Guide-to-stdvector-Part-1.htm)

# windows-8 - Metro Style App MFT“类未注册”错误

> ID：11729773
> 
> 赞同：2
> 
> 时间：2012-07-30T21:19:55.353
> 
> 标签：windows-8, windows-runtime, ms-media-foundation

我目前正在使用 Metro 应用程序框架设计一个应用程序，其中包括实时视频聊天功能。我正在使用 MediaCapture 示例中包含的 GrayscaleTransform MFT（此时只需从示例中复制并粘贴）。

但是，当我尝试将灰度效果添加到相机的图像流时，出现“未注册类”的致命错误。我知道这是因为我必须“激活并注册”媒体扩展，但我不知道如何。**如何注册媒体扩展？**

非常感谢所有帮助，我总是接受答案！

更新：我的灰度 IDL 文件如下所示：

```
import "Windows.Media.idl";

#include <sdkddkver.h>

namespace GrayscaleTransform
{
[version(NTDDI_WIN8), activatable(NTDDI_WIN8)]
runtimeclass GrayscaleEffect 
{
    [default] interface Windows.Media.IMediaExtension;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T00:49:59.190

`<Extension>`媒体扩展在包清单的[Extensions](http://msdn.microsoft.com/en-us/library/windows/apps/br211401.aspx)部分中指定为（或扩展点） ，但您需要手动插入（即打开 appxmanifest 作为代码而不是双击。）

使用 GrayscaleTransform 示例，在[媒体扩展示例](http://code.msdn.microsoft.com/windowsapps/Media-extensions-sample-7b466096)中，打开 MediaExtensions 项目的 package.appxmanifest（作为代码）并在以下`<Extensions>`部分中查找：

```
<Extension Category="windows.activatableClass.inProcessServer">
    <InProcessServer>
        <Path>GrayscaleTransform.dll</Path>
        <ActivatableClass ActivatableClassId="GrayscaleTransform.GrayscaleEffect" ThreadingModel="both" />
    </InProcessServer>
</Extension> 
```

[在App contracts 和 extensions](http://msdn.microsoft.com/en-us/library/windows/apps/hh464906.aspx)中有更多关于扩展的一般信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T01:48:39.320

正如 Chris Bowen 在[他的回答](https://stackoverflow.com/a/11731680/151292)中解释的那样，您的应用程序的 AppXManifest 缺少媒体扩展模块中可激活类所需的扩展元素。所有（非 Windows 提供的）可激活类都需要在 AppXManifest 中列出。自己将扩展节点添加到 AppXManifest 的解决方案将起作用，这就是 MediaExtensions 示例应用程序似乎已经完成的工作。

但是，您通常不需要手动编辑扩展列表。如果添加对 Windows 运行时组件项目、松散 WinMD 文件或扩展 SDK 的引用，则生成应自动为引用组件中的每个可激活类生成扩展元素。

没有发生这种情况的原因是媒体扩展没有使用 IDL 中的 [activatable] 属性进行注释，因此它们没有使用生成的 WinMD 中的 ActivatableAttribute 进行属性。您可以在其 IDL 定义中将类型声明为可激活，而不是手动编辑 AppXManifest。

例如，要更新`GeometricSource.GeometricSchemeHandler`，您可以将其在 IDL 中的定义更改为：

```
[version(NTDDI_WIN8)]
runtimeclass GeometricSchemeHandler
{
} 
```

至：

```
[version(NTDDI_WIN8), activatable(NTDDI_WIN8)]
runtimeclass GeometricSchemeHandler
{
    [default] interface Windows.Media.IMediaExtension;
} 
```

注意添加的`activatable`属性和添加的`[default]`接口。如果您对每个扩展进行这些更改并清理/重建，则无需在 AppXManifest 中显式指定可激活类型：构建系统将自动添加它们。

# php - $_SESSION 不当行为

> ID：11729775
> 
> 赞同：-2
> 
> 时间：2012-07-30T21:20:05.250
> 
> 标签：php, ajax, session-variables

> **可能重复：**
> [AJAX 请求无法处理 $_SESSION 变量](https://stackoverflow.com/questions/11727227/ajax-request-fails-to-process-session-variable)

我有一些关于`$_SESSION`. 我有一个处理 AJAX 请求的 JavaScript 文件。此请求处理一个 PHP 文件（工作正常）。但是当我想在这个 PHP 文件中调用我的`$_SESSION`变量时，它不被识别（我`echo`它，我得到了[`500 error`](http://www.checkupdown.com/status/E500.html)）。

在 JS 文件中，我有：

```
$.ajax({
    type: "POST",
    url: "../classes/ajax/myfile.php",
    data: "comment="+encodeURIComponent(text),

    success: function(msg){
        /* PHP returns the automatically assigned ID of the new comment */
    }
}); 
```

在`myfile.php`, ($_SESSION['user'] 在 ./classes/account.php 中序列化)，我像这样测试我的变量：

```
if (isset($_SESSION['user'])) {
    echo('hello world !');
    exit;
} 
```

这里`$_SESSION`好像没有设置。但是，当在其他 php 文件中调用时`./classes`，它工作得很好。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:21:32.383

你需要先`session_start()`打电话

# javascript - jQuery Mobile 和 Emberjs - 选择小部件

> ID：11729777
> 
> 赞同：0
> 
> 时间：2012-07-30T21:20:08.893
> 
> 标签：javascript, jquery-mobile, ember.js, mobile-website

我有一个 Emberjs / jQuery Mobile 应用程序，我正在尝试使用 Select Widget。

[http://jquerymobile.com/demos/1.1.1/docs/forms/switch/index.html](http://jquerymobile.com/demos/1.1.1/docs/forms/switch/index.html)

jsFiddle 有 jQuery Mobile 增强的 html 和 Ember 生成的标记，但未能增强。

[http://jsfiddle.net/mattkime/7qAef/](http://jsfiddle.net/mattkime/7qAef/)

为什么 ember 标记不是 jQM 化的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T02:36:20.613

当 jQm 为您的页面设置样式时，此选择元素尚未出现在页面中。

您可以为您的模板创建一个视图，然后在视图的 didInsertElement 上使 jQm 主题成为您的元素。

```
<script type="text/x-handlebars" data-template-name="laa-laa">
<div data-role="fieldcontain">
    <label for="emberEnhanced">Ember Enhanced</label>
    {{view Em.Select
        contentBinding="App.booleanOptions"
        selectionBinding="App.power"
        optionLabelPath="content.label"
        optionValuePath="content.value"
        id="emberEnhanced"
      }}
    <hr/>
    Ember Enhanced Value:{{App.power.value}}
</div>
</script>
<script type="text/x-handlebars">
    {{view App.LaaLaa}}
</script> 
```

* * *

```
App.LaaLaa = Em.View.extend({
    templateName : "laa-laa",
    didInsertElement:function(){
      this.$().trigger('create'); //for jQm to retheme element
      }
}); 
```

这是一个小提琴：http: [//jsfiddle.net/7qAef/3/](http://jsfiddle.net/7qAef/3/)

# splunk - Sideview 搜索模块不执行搜索

> ID：11729779
> 
> 赞同：0
> 
> 时间：2012-07-30T21:20:12.537
> 
> 标签：splunk

我正在尝试使用 Sideview 的动态 HTML 功能将搜索结果注入我的自定义 HTML。问题是，每当我将“搜索”模块放入仪表板时，页面就会挂起，并在页面的右上角显示“正在加载...”。即使使用空的搜索模块也会发生这种情况。例如，这是我要创建的页面。

XML:

```
 <module name="Search" layoutPanel="panel_row1_col1" autoRun="True">
    <param name="search"> | savedsearch last_command_by_engine</param>
    <module name="HTML">
      <param name="loadingText">Searching...</param>
      <param name="src">last_commands_table.html</param>
    </module>   
</module> 
```

last_commands _table.html：

```
 <h1>Results: $results[0]$</h1>
    <h1>Search: $search$</h1>
    <table> 
            <thead>
                    <th>0</th>
                    <th>1</th>
                    <th>2</th>
                    <th>3</th>
                    <th>4</th>
                    <th>5</th>
                    <th>6</th>
            </thead>
            <tbody>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
            </tbody>
    </table> 
```

呈现 HTML 模板，但未执行搜索。顶部只有“正在加载...”消息，没有其他任何事情发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-22T21:54:12.037

您可能已经有了答案，但只需将 HTML 模块移出搜索模块即可。这样的嵌套是行不通的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:45:03.393

如果您仍然遇到问题，我会将这个问题移至“ [SplunkBase ”，因为那是官方 Splunk 论坛。](http://splunk-base.splunk.com/)然后，您可以使用与侧视图相关的标签来标记问题，我相信用户“@sideview”会很快找到它。他通常在论坛上非常活跃并且非常乐于助人。

不是直接的答案，但希望它有所帮助。

# mysql - 在 Ubuntu 上启动 mysql 集群管理节点 (ndb_mgmd) 时出错

> ID：11729794
> 
> 赞同：4
> 
> 时间：2012-07-30T21:20:56.507
> 
> 标签：mysql, cluster-computing, startup

我在 mysql-cluster 管理节点的初始启动时遇到了问题，如果我能就这个问题获得任何帮助，我将不胜感激。请参阅下面的两个失败示例，然后是我的 config.ini 文件。第一个示例显示了启动守护程序的基本命令及其产生的错误。第二次尝试跳过我认为导致第一次错误的过程，但只会导致不同的错误（我找不到解决方案）。

> ~$ **ndb_mgmd -f /var/lib/mysql-cluster/config.ini**
> MySQL 集群管理服务器 mysql - 5.5.25 ndb-7.2.7 2012-07-27 16:44:51 [MgmtSrvr] INFO -- 默认配置目录 '/user/local /mysql/mysql-cluster' 不存在。正在尝试创建它...无法创建目录'/usr/local/mysql/mysql-cluster'，错误：2 2012-07-27 16:44:51 [MgmtSrvr] 错误-无法创建目录'/usr /local/mysql/mysql-cluster'。手动创建它或使用 --configdir= 指定不同的目录

> ~$ **ndb_mgmd --skip-config-cache -f /var/lib/mysql-cluster/config.ini**
> MySQL 集群管理服务器 mysql - 5.5.25 ndb-7.2.7 2012-07-27 16:44:51 [MgmtSrvr ] INFO -- 因为配置缓存被禁用，所以跳过配置目录的检查。无法解析日志处理程序的参数：'FILE:filename=/var/lib/mysql-cluster/ndb_1_cluster.log,maxsize=1000000, maxfiles=6', error:13 '(null)'

**/var/lib/mysql-cluster/config.ini：**

```
    [ndbd 默认]
    # 影响所有数据节点上 ndbd 进程的选项：
    NoOfReplicas=2 #副本数
    DataMemory=80M #为数据存储分配多少内存
    IndexMemory=18M # 为索引存储分配多少内存

    [tcp 默认]
    # TCP/IP 选项：

    [ndb_mgmd]
    # 管理进程选项：
    hostname=192.168.0.3 #MGM节点的主机名或IP地址
    datadir=/var/lib/mysql-cluster # MGM 节点日志文件目录
    节点 ID=1

    [ndbd]
    # 数据节点 1 的选项：
                                    #（每个数据节点一个 [ndbd] 部分）
    hostname=192.168.0.1 #主机名或IP地址
    datadir=/usr/local/mysql/data # 这个数据节点的数据文件的目录
    节点 ID=2

    [ndbd]
    # 数据节点 2 的选项：
    hostname=192.168.0.2 #主机名或IP地址
    datadir=/usr/local/mysql/data # 这个数据节点的数据文件的目录
    节点 ID=3

    [mysqld]
    # SQL 节点选项：
    主机名=192.168.0.4 #主机名

```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T22:35:37.760

您应该尝试使用 sudo 运行该命令：

```
~$ sudo ndb_mgmd -f /var/lib/mysql-cluster/config.ini

~$ sudo ndb_mgmd --skip-config-cache -f /var/lib/mysql-cluster/config.ini 
```

您的问题似乎与权限有关，而不是配置。

# dialog - 提要对话框在 iOS SDK 3.0 beta 上不起作用（API 错误代码 110）

> ID：11729800
> 
> 赞同：3
> 
> 时间：2012-07-30T21:21:11.773
> 
> 标签：dialog, feed, facebook-ios-sdk

我正在更新我的应用程序以使用新的 iOS 版 Facebook SDK (3.0)。但是，我在尝试使用提要对话框时遇到了问题。我按照Facebook 开发者网站上关于如何将提要对话框与新 SDK 一起使用的说明进行操作，但在显示对话框时出现此错误[：](http://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/)

> API 错误代码：110
> API 错误描述：无效的用户 ID
> 错误消息：缺少用户 cookie（用于验证会话用户）

这是我的代码：

```
Facebook *facebook = [[Facebook alloc] initWithAppId:FBSession.activeSession.appID andDelegate:nil];

facebook.accessToken = FBSession.activeSession.accessToken;
facebook.expirationDate = FBSession.activeSession.expirationDate;

NSMutableDictionary *feedParams = [[NSMutableDictionary alloc] init];

[feedParams setObject:self.video.alternateLink.href
               forKey:@"link"];
// link title = video title
[feedParams setObject:self.video.title.stringValue
               forKey:@"name"];
// link picture = video thumbnail
[feedParams setObject:self.video.mediaGroup.highQualityThumbnail.URLString
               forKey:@"picture"];

NSDictionary *privacyDict = [NSDictionary dictionaryWithObjectsAndKeys:@"CUSTOM", @"value", @"SELF", @"friends", nil];
SBJSON *jsonWriter = [[SBJSON alloc] init];

[feedParams setObject:[jsonWriter stringWithObject:privacyDict error:NULL]
               forKey:@"privacy"];

[jsonWriter release];

[facebook dialog:@"feed"
       andParams:feedParams
     andDelegate:self];

[feedParams release];

self.facebook = facebook;
[facebook release]; 
```

这似乎是一个身份验证问题，但我将一个有效的访问令牌传递给 Facebook 对象，所以我不确定问题是什么。如果有人可以帮助我，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T17:01:14.540

如您所展示的，在与旧版 Facebook 类集成时，您可以使用 FBSession.activeSession。当您使用 activeSession 而不是直接实例化会话对象时，一个可能的问题是它可能未打开。这是一个简单的示例，显示了将 Facebook 类与活动会话集成的表单：

```
if (FBSession.activeSession.isOpen) {
    // Create a Facebook instance
    Facebook *facebook = [[Facebook alloc] initWithAppId:FBSession.activeSession.appID
                                             andDelegate:nil]; // commonly self

    // Set the session information for the Facebook instance
    facebook.accessToken = FBSession.activeSession.accessToken;
    facebook.expirationDate = FBSession.activeSession.expirationDate;

    // Put together the dialog parameters
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"I'm using the the Facebook SDK for iOS", @"name",
                                   @"Facebook for iOS", @"caption",
                                   @"Check out the Facebook SDK for iOS!", @"description",
                                   @"https://developers.facebook.com/ios", @"link",
                                   @"http://www.facebookmobileweb.com/hackbook/img/facebook_icon_large.png", @"picture",
                                   nil];

    // Invoke the dialog
    [facebook dialog:@"feed" andParams:params andDelegate:nil];

    [facebook release];
} 
```

如果活动会话未打开，那么您将遇到与您所看到的一样的失败。在您的逻辑中较早的地方进行如下调用，可以解决此问题：

```
[FBSession openActiveSessionWithAllowLoginUI:YES]; 
```

希望这可以帮助！

# python - 如何在 django 中使用 css 文件？

> ID：11729804
> 
> 赞同：0
> 
> 时间：2012-07-30T21:21:18.113
> 
> 标签：python, css, django

我正在使用带有块标签的模板来包含一个 css 文件。

不确定如何管理 css 文件，我把它放在我的 urls.py 中：

```
url(r'style.css$','portal.views.css') 
```

在我看来这是

```
def css(request):
    return render_to_response('style.css') 
```

当我在使用模板的任何页面上使用 chrome 的“检查元素”时，我可以看到文件中的所有 css，但是页面本身没有任何作用。为了测试它，我添加了

```
body 
 { 
   display:none; 
 } 
```

但仍然没有任何变化。

我需要以不同的方式呈现响应吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:25:50.170

您不应该以这种方式提供静态文件（如 css 文件）。Django 为此提供了一个特定的解决方案，请确保您阅读了[完整而全面的文档](https://docs.djangoproject.com/en/dev/howto/static-files/)。

# ruby - 在 Ruby 中使用散列的散列

> ID：11729810
> 
> 赞同：0
> 
> 时间：2012-07-30T21:21:38.493
> 
> 标签：ruby

我还在学习 Ruby，我有一个关于哈希值的问题。下面的哈希是我想访问的：

```
reserved_instance_price = [
                              'us-east-1' => ['t1.micro' => 0.02, 'm1.small' => 0.08, 'm1.medium' => 0.160 ],
                              'us-west-1' => ['t1.micro' => 0.02, 'm1.small' => 0.08, 'm1.medium' => 0.160 ],
                              'eu-west-1' => ['t1.micro' => 0.02, 'm1.small' => 0.085, 'm1.medium' => 0.170 ]
                            ] 
```

我的问题：这是在 ruby​​ 中实现散列的正确方法吗？以及如何访问特定值？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:22:29.787

`[]`语法适用于数组。构造哈希使用`{}`

你的例子变成

```
reserved_instance_price = {
                              'us-east-1' => {'t1.micro' => 0.02, 'm1.small' => 0.08, 'm1.medium' => 0.160 }
} 
```

要访问特定值，只需执行

`reserved_instance_price['us-east-1']['t1.micro']`这将返回`0.02`

如果您希望索引是符号而不是字符串（因此没有 - 和 .），您还可以使用语法

```
h = { useast1: {t1micro: 0.02}} 
```

访问变成

```
h[:useast1][:t1micro] 
```

# android - 我的代码或 Android 模拟器有问题吗？

> ID：11729814
> 
> 赞同：0
> 
> 时间：2012-07-30T21:21:54.817
> 
> 标签：android, sdk, emulation, android-4.0-ice-cream-sandwich, android-2.3-gingerbread

因此，我正在尝试遵循有关在 Java 中创建 Android 游戏的教程。本教程是为 Gingerbread 2.3 编写的，但从我所阅读的内容来看，编码差异应该不大。问题来自我通过提供的 SDK 模拟器运行应用程序；在 2.3.3 中它运行良好，但在 4.0.3 中它抛出几个错误并且事件日志没有响应。我喜欢这个教程，它既好又透彻，这就是为什么我想使用它，尽管它已经过时了。我的最小 api 设置为 8（教程运行 api 8），目标设置为 15。在我开始发布我的代码之前，因为我不知道它可能出错的地方，一些对我来说似乎很时髦的错误logcat 是：

注意所有都是pid 94

```
ActivityManager   | no content found for permission revoke: file...
WindowManager     | failed to take screenshot for (120x180) to layer 21005
NetworkManagement | setKernelCountSet(10040, 1) failed with errno -2
NetworkManagement | setKernelCountSet(10013, 0) failed with errno -2 
```

屏幕按原样显示，我只是没有从 TAG 日志中得到任何响应，也没有正在处理任何事件。另外，在我的代码中，我应该点击这个：

```
@Override
public void run() {
    long tickCount = 0L;
    Log.d(TAG, "Starting game loop");
    while (running) {
        tickCount++;
        // update game state 
        // render state to the screen
    }
    Log.d(TAG, "Game loop executed " + tickCount + " times");
} 
```

但我从不这样做。我在 2.3.3 但不是 4.0.3 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T22:24:49.417

*   删除模拟器并启动一个新模拟器。
*   删除模拟器数据并擦除用户数据并重新启动它。
*   如果上述方法不起作用，请尝试通过以下方式删除 dalvik 缓存：

> ```
> adb root
> adb remount
> adb shell rm -r /data/dalvik-cache/* 
> ```

命令行中的命令。

# ruby-on-rails - Rails will_paginate 在 HABTM 模型上显示重复项

> ID：11729816
> 
> 赞同：1
> 
> 时间：2012-07-30T21:22:01.660
> 
> 标签：ruby-on-rails, activerecord, will-paginate

我将 will_paginate 与博客文章和标签之间的 HABTM 关系一起使用。每当我应用分页时，都会显示重复的帖子，因为 Rails 中的 HABTM 不会保持数据库的唯一性，它会在进行查询时应用唯一性。

blog_posts.rb

`has_and_belongs_to_many :tags, :uniq => true`

标签.rb

`has_and_belongs_to_many :blog_posts, :uniq => true`

根据 ActiveRecord 的[文档](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#M002126)， :uniq 不会阻止存储重复的关系，它只是在构建查询时忽略它们。

这是问题： `tag = Tag.find(1)` `tag.blog_posts.count`等于 1，但是： `tag.blog_posts.page(nil).count`等于 3，并且所有 3 都是同一帖子的重复项。正确的行为应该是只显示 1，而不是重复。

我知道我可以复制这里生成的 SQL 查询并以这种方式修复它，但这似乎不是一个好的解决方案。有人可以帮我解决根本问题吗？（虽然我担心这是 will_paginate 中的错误）

**编辑：**这似乎也是 Kaminari 的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T05:30:20.497

我想我以前遇到过这个问题。尝试将此添加到您的查询中：

```
.group("id") 
```

这不是 will_paginate 中的错误，因为所做的只是获取它提供给您的数据并在视图中对其进行分页。解决方案在于您提供的数据。

# c++ - 可能由 if 语句引起的 C++ 布尔逻辑错误

> ID：11729817
> 
> 赞同：0
> 
> 时间：2012-07-30T21:22:01.700
> 
> 标签：c++, if-statement, boolean-logic

这是我遇到问题的一段代码的极其简化的版本。

```
int i = 0;
int count = 0;
int time = 50;
int steps = 1000;
double Tol = 0.1;
bool crossRes = false;
bool doNext = true;

for (int i=0; i<steps; i++) {

//a lot of operations are done here, I will leave out the details, the only
//important things are that "dif" is calculated each time and doNext either
//stays true or is switched to false

    if (doNext = true) {
        if (dif <= Tol) count++;
        if (count >= time) {
            i = steps+1;
            crossRes = true;
        }
    }
}

    if (crossRes = true) {
        printf("Nothing in this loop should happen if dif is always > Tol 
               because count should never increment in that case, right?");
    } 
```

我的问题是，每次完成 for 循环时，它都会执行“if (crossRes = true)”括号内的语句，即使 count 从未增加。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T21:24:48.213

你犯了一个常见的（而且非常令人沮丧）的错误：

```
if (crossRes = true) { 
```

此行分配`crossRes`给`true`并返回`true`。您正在寻找与*进行比较* `crossRes`，`true`这意味着您需要另一个等号：

```
if (crossRes == true) { 
```

或更简洁地说：

```
if (crossRes) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T21:23:33.953

我纠正了：

```
if (crossRes) 
```

~~如果您的条件是 if (true = crossRes)，您就不会遇到这个问题，因为它不会编译。`crossRes = true` 总是评估为 `true`，因为它是对 `true` 的赋值。你想要 `crossRes == true`: if (crossRes == true) { printf("如果 dif 总是 > Tol，那么这个循环中不会发生任何事情，因为在这种情况下 count 永远不应该增加，对吧？"); }~~

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T21:33:20.797

首先，尽管许多人已经指出`if (crossRes = true)`了`if (doNext = true)`.

我会坚持指出你真的想要`if (crossRes)`而不是`if (crossRes == true)`（甚至`if (true == crossRes)`）。

第一个原因是它避免了由于一个简单的错字而遇到同样的问题。

第二个是比较的结果是`bool`——所以如果`if (crossRes==true)`有必要，你可能`if (((((crossRes == true) == true) == true) == true)`只需要确定（也许更多——你永远不知道）。当然，这完全是愚蠢的——你从 a 开始`bool`，所以你不需要比较就可以得到 a `bool`。

我还要记录一下，如果你坚持要进行比较，你应该几乎总是使用`if (x != false)`而不是`if (x == true)`. 虽然它在 C++ 中并不真正适用，但在没有实际布尔类型的旧 C 中，可以使用任何整数类型——但在这种情况下，与 的比较`true`可能会给出不正确的结果。至少在正常情况下，`false`将为 0 和`true`1 - 但在测试时，*任何*非零值都将被视为等同于`true`. 例如：

```
int x = 10;

if (x)    // taken

if (x == true) // not taken, but should be. 
```

如果您不是从这里的布尔值开始，那么这`if (<constant> <comparison> <variable>)` 是有道理的并且是（IMO）首选。但是，无论如何，当您从布尔值开始时，只需使用它；不要进行比较来产生另一个相同的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T21:27:38.557

这里的其他答案已经告诉你这个问题。通常你的编译器会警告你，但确保你不这样做的一种方法是将常数项放在左边

```
 true == crossRes 
```

这样你会得到一个编译器错误而不是一个警告，所以它不能被忽视，因为

```
 true = crossRes 
```

不会编译。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T21:23:46.410

`=`是赋值，`==`是相等比较。你要：

```
if (crossRes == true) { 
```

你在这里犯了同样的错误：

```
if (doNext = true) { // Bad code 
```

# ios - UITextView 中打开 UIViewController 的 iOS 链接

> ID：11729819
> 
> 赞同：1
> 
> 时间：2012-07-30T21:22:07.220
> 
> 标签：ios, uiviewcontroller, hyperlink, uibutton, uitextview

我正在 UITextView 中实现一个链接，它将在导航控制器上推送一个视图控制器。

我正在尝试使用以下方法：

```
directionTextLabel.text = [directionTextLabel.text stringByAppendingString:[[NSString alloc] initWithFormat:@" %@", siteURL]];
directionTextLabel.dataDetectorTypes = UIDataDetectorTypeLink; 
```

这使我的链接可点击。然后在我的应用程序委托中，我有：

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
    NSLog(@"URL detected.");
    return 1;
} 
```

但是，当我单击该链接时，它会打开一个新页面，而无需调用我的应用程序委托方法。知道出了什么问题，或者我可以通过其他方式实现吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:25:04.093

委托方法适用于当`application:openURL...`您的应用程序需要响应其注册的 URL 处理程序（如 Info.plist 文件中定义的）时。URL 事件将被发送到目标应用程序中的类似方法（例如用于 http 链接的 Safari）。

编辑：见[这篇文章](https://stackoverflow.com/questions/2543967/how-to-intercept-click-on-link-in-uitextview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:26:46.043

这种方法不会像你认为的那样做。当您的应用程序被某个 URL 方案调用时调用此方法，而不是在您的应用程序打开 URL 时调用。

# mysql - 这个查询复杂到不可约吗？

> ID：11729820
> 
> 赞同：0
> 
> 时间：2012-07-30T21:22:07.177
> 
> 标签：mysql, sql, join, self-join

我有两个 MySQL 数据库表，如下所述。一个表保存设备信息，另一个是关于每个设备的一对多日志。

```
CREATE TABLE  `device` (
  `id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  `name` VARCHAR(255) NOT NULL,
  `active` INT NOT NULL DEFAULT 1,
  INDEX (`active`)
);

CREATE TABLE  `log` (
  `id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  `device_id` INT NOT NULL,
  `message` VARCHAR(255) NOT NULL,
  `when` DATETIME NOT NULL,
  INDEX (`device_id`)
); 
```

我想要做的是在单个查询中获取设备信息以及每个设备的最新日志条目（如果可能的话）。到目前为止，我所拥有的是以下内容：

```
SELECT d.id, d.name, l.message
FROM device AS d
LEFT JOIN (
  SELECT l1.device_id, l1.message
  FROM log AS l1
  LEFT JOIN log AS l2 ON (l1.device_id = l2.device_id AND l1.when < l2.when)
  WHERE l2.device_id IS NULL
) AS l ON (d.id = l.device_id)
WHERE d.active = 1
GROUP BY d.id
ORDER BY d.id ASC; 
```

这些查询是我实际设置的简化复制品，其中我的日志表超过 100k 行（实际上我查看了几个日志表）。该查询确实运行，但是非常非常缓慢（例如，超过两分钟）。我确信有一种更简洁/优雅/“SQL”的方式来形成这个查询来获取我需要的数据，但我还没有找到它。

如果没有丑陋的 sub-SELECT 和 self-JOIN，我想做的事情是否可行？我可以用不同的策略完成工作吗？或者，查询的本质是不可简化的复杂吗？

再次，应用程序逻辑是这样的，如果这不起作用，我可以“手动加入”表，但我觉得 MySQL 应该能够处理这样的事情而不会窒息 - 但我承认当它来临时我是绿色的对于这种复杂的集合代数。

**编辑：**由于这是一个人为的例子，我忘记将索引添加到`device.active`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T21:39:39.157

这是避免自联接的查询的一种略有不同的方法：

```
SELECT d.id, d.name, l.message
FROM device AS d
LEFT JOIN (
  SELECT l1.device_id, l1.message
  FROM log AS l1
  WHERE l1.when = (
        SELECT MAX(l2.when)
        FROM log AS l2
        WHERE l2.device_id = l1.device_id
  ) l ON l.device_id = d.id
WHERE d.active = 1
ORDER BY d.id ASC; 
```

由于 100k 不是一个非常大的表，即使没有正确的索引，我也不希望此查询花费超过几秒钟的时间。但是，就像评论建议的那样，您可能会考虑根据`explain plan`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T22:07:53.780

这是一种只需要一个日志表实例的替代方法：

```
SELECT    d.id, d.name, 
          SUBSTRING_INDEX(
              GROUP_CONCAT(
                  l.message 
                  SEPARATOR '~' 
                  ORDER BY l.when DESC
              ) 
          ,   '~'
          ,   1
          )
FROM      device d
LEFT JOIN log    l
ON        d.id = l.device_id
WHERE     d.active = 1
GROUP BY  d.id 
```

此查询通过创建以波浪号分隔的消息列表来查找最后一条日志消息，并按日期降序排序。这是由`GROUP_CONCAT`. 该`SUBSTRING_INDEX`列表的第一个条目的筹码。

这种方法有两个缺点：

*   它使用`GROUP_CONCAT`. 如果该函数的结果变得太长，则结果将被截断。如果你这样做，你可以补救

    `SET @@group_concat_max_len = @@max_allowed_packet;`

在运行查询之前。您可以做得更好：由于您只对收到一条消息感兴趣，因此您可以将其设置`group_concat_max_len`为与列的最大字符长度一样大`message`。与使用`@@max_alowed_packet`.

*   它依赖于`'~'`不能出现在消息文本中的特殊分隔符（在示例中为波浪号 ( )）。您可以将其更改为您喜欢的任何分隔符字符串，只要您确定它不会出现在消息文本中即可。

如果你能忍受这些限制，那么这个查询可能是最快的。

这里有更多与您的一样复杂但性能更好的替代方案。

```
SELECT    d.id
,         d.name
,         l.message
FROM      (
          SELECT    d.id, d.name, MAX(l.when) lmax
          FROM      device d
          LEFT JOIN log    l
          ON        d.id = l.device_id
          WHERE     d.active  = 1
          GROUP BY  d.id
          ) d
LEFT JOIN log       l
ON        d.id   = l.device_id
AND       d.lmax = l.when
ORDER BY d.id ASC; 
```

另一种选择：

```
SELECT    d.id
,         d.name
,         l2.message
FROM      device d
LEFT JOIN (
          SELECT   l.device_id
          ,        MAX(l.when) lmax
          FROM     log l
          GROUP BY l.device_id
          ) l1
ON        d.id = l1.device_id 
LEFT JOIN log       l2
ON        l1.device_id = l2.device_id
AND       l1.lmax      = l2.when
WHERE     d.active     = 1
ORDER BY  d.id ASC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T21:39:18.623

您的查询和以下策略将受益于 index `ON log(device_id,when)`。该索引可以替换 index `ON log(device_id)`，因为该索引是多余的。

* * *

如果每个设备都有大量日志条目，则查询中的 JOIN 将生成一个大小合适的中间结果集，该结果集将被过滤到每个设备一行。我不相信 MySQL 优化器对该反连接操作有任何“快捷方式”（至少在 5.1 中没有）......但您的查询可能是最有效的。

**问：**我可以用不同的策略完成工作吗？

是的，还有其他策略，但我不知道这些策略中的任何一个都比您的查询“更好”。

* * *

**更新：**

您可能会考虑的一种策略是将另一个表添加到您的架构中，该表包含每个设备的最新日志条目。这可以通过在`log`表上定义的 TRIGGER 来维护。如果您只执行插入（对最近的日志条目没有 UPDATE 和 DELETE，这相当简单。每当对`log`表执行插入时，就会`AFTER INSERT FOR EACH ROW`触发触发器，它将`when`插入到日志表中的值进行比较device_id，表中的当前`when`值`log_latest`，并插入/更新`log_latest`表中的行，以便始终存在最新的行。您还可以（冗余）将设备名称存储在表中。（或者，您可以添加`latest_when`和一个`latest_message`列到设备表，并在那里维护它们。）

但是这个策略超出了你原来的问题......但如果你需要经常运行“所有设备的最新日志消息”查询，这是一个可行的策略。缺点是您有一个额外的表，并且在对`log`表执行插入时会影响性能。可以使用与原始查询类似的查询或以下替代方法来完全刷新此表。

* * *

一种方法是一个查询，它对`device`和`log`表进行简单连接，获取按设备和降序排列的行`when`。然后使用内存变量来处理行，过滤掉除“最新”日志条目之外的所有内容。请注意，此查询返回一个额外的列。（可以通过将整个查询包装为内联视图来删除这个额外的列，但是如果您可以忍受返回的额外列，您可能会获得更好的性能：

```
SELECT IF(s.id = @prev_device_id,0,1) AS latest_flag
     , @prev_device_id := s.id AS id
     , s.name
     , s.message
  FROM (SELECT d.id
             , d.name
             , l.message
          FROM device d
          LEFT
          JOIN log l ON l.device_id = d.id
         WHERE d.active = 1
         ORDER BY d.id, l.when DESC
       ) s
  JOIN (SELECT @prev_device_id := NULL) i
HAVING latest_flag = 1 
```

SELECT 列表中的第一个表达式所做的是“标记”一行，只要该行上的设备 id 值与上一行上的设备 id 不同。HAVING 子句过滤掉所有未标记为 1 的行。（您可以省略 HAVING 子句以查看该表达式的工作原理。）

（我没有对此进行语法错误测试，如果您遇到错误，请告诉我，我会仔细查看。我的办公桌检查说没问题……但我可能错过了括号或逗号，）

（您可以通过将其包装在另一个查询中来“摆脱”该额外的列

```
SELECT r.id,r.name,r.message FROM (
/* query from above */
) r 
```

（但同样，这可能会影响性能，如果您可以使用额外的列，您可能会获得更好的性能。）

当然，在最外层的查询中添加 ORDER BY 以保证您的结果集按照您需要的方式排序。

这种方法适用于一大堆设备，并且日志中只有几行相关的行。否则，这将生成大量中间结果集（按日志表中的行数的顺序），必须将其转出到临时 MyISAM 表中。

**更新：**

如果您从本质上获取所有行`device`（谓词不是很有选择性），则可以通过获取表中每个 device_id 的最新日志条目`log`并推迟对`device`表的连接来获得更好的性能。（但请注意，在该中间结果集上没有可用的索引来执行连接，因此确实需要对其进行测试以衡量性能。）

```
SELECT d.id
     , d.name
     , t.message
  FROM device d 
  LEFT
  JOIN (SELECT IF(s.device_id = @prev_device_id,0,1) AS latest_flag
             , @prev_device_id := s.device_id AS device_id
             , s.messsage
          FROM (SELECT l.device_id
                     , l.message
                  FROM log l
                 ORDER BY l.device_id DESC, l.when DESC
               ) s
          JOIN (SELECT @prev_device_id := NULL) i
        HAVING latest_flag = 1
       ) t
    ON t.device_id = d.id 
```

**注意：**我们在别名为 的内联视图的 ORDER BY 子句中指定`device_id`和列的降序，不是因为我们需要按 device_id 降序排列的行，而是通过允许 MySQL 执行“反向”来避免文件排序操作对具有前导列（device_id，when）的索引进行扫描”操作。`when``s`

**注意：**此查询仍会将中间结果集作为临时 MyISAM 表进行后台处理，并且这些表上不会有任何索引。因此，这可能不会像您的原始查询那样执行。

* * *

另一种策略是在 SELECT 列表中使用相关子查询。您只从日志表中返回一列，因此这是一个相当容易理解的查询：

```
SELECT d.id
     , d.name
     , ( SELECT l.message
           FROM log l
          WHERE l.device_id = d.id
          ORDER BY l.when DESC 
          LIMIT 1
       ) AS message
  FROM device d
 WHERE d.active = 1
 ORDER BY d.id ASC; 
```

**注意：**由于`id`是表中的 PRIMARY KEY（或 UNIQUE KEY）`device`，并且由于您没有执行任何会生成额外行的 JOIN，因此您可以省略该`GROUP BY`子句。

**注意：**此查询将使用“嵌套循环”操作。也就是说，对于从`device`表返回的每一行，（本质上）需要运行一个单独的查询来从日志中获取相关行。对于只有几`device`行（如将在`device`表上使用更具选择性的谓词返回），并且每个设备都有大量日志条目，性能不会太差。但是对于很多设备，每个设备只有几条日志消息，其他方法很可能会更有效。）

另请注意，使用这种方法，请注意，您可以轻松扩展它以将第二条最新日志消息也作为单独的列返回，方法是向 SELECT 列表添加另一个子查询（就像第一个子查询一样），只需将 LIMIT 子句更改为跳过第一行，取而代之的是第二行。

```
 , ( SELECT l.message
           FROM log l
          WHERE l.device_id = d.id
          ORDER BY l.when DESC 
          LIMIT 1,1
       ) AS message_2 
```

* * *

为了从设备中获取基本上所有的行，您可能会使用 JOIN 操作获得最佳性能。这种方法的一个缺点是，当有两个（或更多）行具有与设备匹配的最新`when`值时，它有可能为一个设备返回多行。`log(device_id,when)`（基本上，当我们有唯一的保证时，这种方法可以保证返回“正确”的结果集。

将此查询作为内联视图，获取“最新”时的值：

```
SELECT l.device_id
     , MAX(l.when)
  FROM log l
 GROUP BY l.device_id 
```

我们可以将它加入到日志和设备表中。

```
SELECT d.id
     , d.name
     , m.messsage
  FROM device d
  LEFT
  JOIN (
         SELECT l.device_id
              , MAX(l.when) AS `when`
           FROM log l
          GROUP BY l.device_id 
       ) k
    ON k.device_id = d.id
  LEFT
  JOIN log m 
    ON m.device_id = d.id
       AND m.device_id = k.device_id
       AND m.when = k.when
 ORDER BY d.id 
```

* * *

所有这些都是替代策略（我相信这是您提出的问题），但我不确定其中任何一个是否会更好地满足您的特定需求。（但在工具带中有几个不同的工具总是好的，以适当使用。）

# java - Android JNI本机C函数调用杀死活动

> ID：11729822
> 
> 赞同：5
> 
> 时间：2012-07-30T21:22:16.723
> 
> 标签：java, android, c, java-native-interface, native

什么有效：我有一个运行 TUN/TAP 服务的 ac 可执行文件，以及两个在终端中运行良好的 shell 脚本（用于配置“ip route”和“iptables”），都以 root 身份运行。

什么不起作用：我正在尝试创建一个 Android 应用程序以在按下按钮后运行 c 可执行文件和 shell 脚本。我最初这样做是为了让 onClick 使用 processBuilder 创建一个进程，如下所示：

```
final Button button1 = ...
...
public void onClick(View v) {
    String ip_address = edIPAddress.getText().toString();
    Process process;
    try {
        process = new ProcessBuilder()
            .command("/system/bin/su", "-c", "/data/tuntapserv/armeabi/mytunserv " + ip_address)
            .redirectErrorStream(true)
            .start();

        InputStream in = process.getInputStream();
        OutputStream out = process.getOutputStream();

        pOutput.append("TUN/TAP IS CONFIGURED!\n");
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();             
    }
} 
```

据我所知，这应该可以正常工作，但实际上 mytunserv 会在随机一段时间后停止工作。mytunserv 会启动我的 TUN/TAP，但是当我在几分钟后去检查“ip route”时，我会看到 tun/tap 已经停止并消失了。同样，我尝试了 runtime.exec，尽管这似乎使用了 processbuilder，并且遇到了同样的问题。

然后我开始使用线程而不是进程，这对于 shell 脚本来说似乎工作得很好。

```
...
final Button button2 = ...
...
    public void onClick(View v) {
        sThread = new ScriptThread();
        sThread.start();
    }
...

    private class ScriptThread extends Thread {
        @Override
        public void run() {
            Process process;
            try {
                process = new ProcessBuilder()
                    .command("/system/bin/su","-c","/system/bin/sh /data/tuntapserv/armeabi/setup_ip.sh")
                    .redirectErrorStream(true)
                    .start();

                InputStream in = process.getInputStream();
                OutputStream out = process.getOutputStream();

                pOutput.append("SCRIPT FINISHED!\n");

                while(true) {
                    Thread.sleep(0);
                }

            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();             
            }
        }
    } 
```

这似乎至少适用于两个 shell 脚本。我最终放弃了这种调用 mytunserv 的方法，认为进程或线程必须被 java 线程处理程序杀死，这在我的研究中似乎非常不可预测。相反，我转向了 JNI，因为这似乎比硬编码我的 c 可执行文件和 shell 脚本的路径更合适。

所以这是我最近的问题，我正在寻求帮助。

这是我的 JNI 设置：

```
#include <jni.h>
...
JNIEXPORT jint JNICALL Java_android_1sp_1api_sample_SetupTunTap_runtun(JNIEnv * env,jobject obj,jstring ip_address)
{
    jchar *ip;
    jboolean iscopy;
    ip=(*env)->GetStringUTFChars(env, ip_address, &iscopy);
    ...
    (*env)->ReleaseStringUTFChars(env, ip_address, ip);
    ...
}
... 
```

上面的 c 代码变成了 liblmytunserv.so。

```
package android_sp_api.sample;
...
public class SetupTunTap extends AnotherActivity {

    static 
    {
        System.loadLibrary("lmytunserv");
    }

    public native int runtun(String ip_address);
    ...

        final Button button1 = ...
    ...
    public void onClick(View v) {
        String ip_address = edIPAddress.getText().toString();

        SetupTunTap myTun = new SetupTunTap();

        myTun.runtun(ip_address);

        pOutput.append("TUN/TAP IS CONFIGURED!\n");
    }
... 
```

据我所知，c 代码应该能够调用 c 代码中不是 JNIEXPORT 的其他函数。从我的想象来看，JNIExport 只是一种让 Java 代码与 c 代码交互的方式。

无论如何，现在我的问题是，一旦我按下按钮 1，在手机上调试或运行应用程序时，活动就会关闭并返回到我的主菜单活动。在 Debug 中显示“.... DalvikVM [localhost:8602]”，在 DDMS 中设备保持“在线”。LogCat 不会输出任何提示活动退出/崩溃的信息。进入 SetupTunTap 活动后，LogCat 通过显示信息恢复，但在按下 button1 并且屏幕闪烁黑色并恢复到我的主菜单活动时从不输出任何内容。这是 LogCat 中加载 liblmytunserv 的部分：

LogCat 输出：

```
...

07-30 16:30:19.531: D/dalvikvm(4716): Trying to load lib /data/data/android_sp_api.sample/lib/liblmytunserv.so 0x41688d20

07-30 16:30:19.531: D/dalvikvm(4716): Added shared lib /data/data/android_sp_api.sample/lib/liblmytunserv.so 0x41688d20

07-30 16:30:19.531: D/dalvikvm(4716): No JNI_OnLoad found in /data/data/android_sp_api.sample/lib/liblmytunserv.so 0x41688d20, skipping init 
```

如何进一步调试？如果我在“myTun.runtun(ip_address);”处设置断点 然后我可以在 Eclipse 的 Debug 界面中看到所有的变量。如果我继续超过该点，活动将断开连接，我只看到 LogCat 中加载了 .so lib 文件。我想我的 JNI 设置一定是错误的，所以在我的思考过程中的任何建议都会很棒。

硬件：三星 Galaxy Nexus v4.0.4 (Rooted)

文件：

*   mytunserv = c 可执行文件

*   setup_ip.sh = 外壳脚本

*   setup_ip1.sh = 外壳脚本

*   SetupTunTap.java

*   liblmytunserv.so（放置在 /libs/armeabi、/libs/armeabi-v7a、/libs/x86 中）

我需要什么：C 库 liblmytunserv.so 中的本机“runtun”函数在 while(1) 无限循环中永远运行。当 Java 代码调用该函数时（一旦按下 button1），我需要该函数永远运行。一旦 c 可执行文件运行，Shell 脚本 setup_ip.sh 和 setup_ip1.sh 就会运行。如何让 c 可执行文件永远运行？

如果您需要更多信息，请告诉我，感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:26:53.550

在你的 JNI

```
JNIEXPORT jint JNICALL Java_android_1sp_1api_sample_SetupTunTap_runtun(JNIEnv * env,jobject obj,jstring ip_address) 
```

在活动中

```
package android_sp_api.sample; 
```

这些需要匹配；）

编辑：五分之四就是这样。另外，也发布java端，但我希望它看起来像

```
class SetupTunTap
{
   public native int runtun(String ip_address); 
```

/// }

所以也要发布 SetupTunTap 类\

edit2：哎呀，不需要编辑。它只是包名。

# oauth - 为什么这个 Google API 调用需要授权？

> ID：11729826
> 
> 赞同：1
> 
> 时间：2012-07-30T21:22:42.327
> 
> 标签：oauth, authorization, google-api, google-calendar-api

我正在编写一个从公共 Google 日历中提取事件的 iOS 应用程序。**该应用程序只会处理**所有人都可以访问的公共日历，无论用户是否拥有 Google 帐户。因此，我认为我可以完全无视授权。

不过，显然我错了，因为我遇到了一个奇怪的问题......

当我[`Events: list`](https://developers.google.com/google-apps/calendar/v3/reference/events/list)在公共测试日历上拨打电话时，一切正常。我得到了给定公共日历的所有事件的列表，我什至得到了日历本身的一些元数据。

但是，当我[`Calendars: get`](https://developers.google.com/google-apps/calendar/v3/reference/calendars/get)拨打电话时，我会收到“401 Unauthorized”响应。`Events: list`令人困惑的是，我实际上比使用 获得更多有关日历的信息`Calendars: get`，但前者不需要任何授权！

有人可以解释这里发生了什么吗？为什么我可以在`Events: list`未经授权的情况下拨打电话但不能拨打电话`Calendars: get`？

# asp.net - 找出引用 dll 的内容

> ID：11729827
> 
> 赞同：3
> 
> 时间：2012-07-30T21:22:44.890
> 
> 标签：asp.net, enterprise-library, dll, .net-reflector, ildasm

我刚刚解决了以下错误：

System.IO.FileLoadException：无法加载文件或程序集“Microsoft.Practices.EnterpriseLibrary.Common，Version=5.0.505.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。

奇怪的事情 - 当我制作发布版本时它似乎只是一个问题，虽然有点断断续续 - 我可以创建一个调试版本，问题有时会暂时消失。

原来我在项目 Microsoft.Practices.EnterpriseLibrary.Data.dll 中有一个企业库 dll 没有被使用，版本为 5.0.505.0，看起来它试图拉入 Microsoft 的 v. 5.0.505.0 .Practices.EnterpriseLibrary.Common，当这个 'Common' dll 的 v. 5.0.414.0 已经在项目中时。没有确定为什么这主要发生在发布模式下。

有助于追踪这一点并清楚地确定原因的方法是确定哪个 dll 将另一个 dll 拉入我的 Visual Studio 项目？我希望能够从导致问题的 dll 中走出来，看看包含它的 dll 是什么。这个答案：

[找出 Visual Studio 决定将 DLL 复制到 bin 目录的原因](https://stackoverflow.com/questions/1705738/find-out-why-visual-studio-decides-to-copy-dlls-into-a-bin-directory)

说可以使用 ildasm 或反射器，但是使用这些工具需要寻找什么以及如何使用？我用谷歌搜索了这个，但什么也没看到。

作为旁注，关于为什么切换到发布模式会导致我的问题的任何想法？我想知道这样做是否会导致 Visual Studio 尝试从某个地方提取 Microsoft.Practices.EnterpriseLibrary.Common 的发布版本，这是错误的版本，但这对我来说毫无意义，因为这是“第 3 方”（Microsoft ) 库已经处于发布模式，它没有解释间歇性，我不明白为什么将单个项目切换到发布模式会影响对外部库的引用。

# java - JDBC/Java - 如何检查数据库中是否存在表和列？

> ID：11729828
> 
> 赞同：5
> 
> 时间：2012-07-30T21:22:45.920
> 
> 标签：java, mysql, jdbc

我的代码使用 MySql、jdbc 和 java。我希望代码检查是否：

1- 表存在于特定数据库中。2- 列存在于特定数据库的特定表中。

你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T21:30:54.673

正确的方法是使用 JDBC MetaData

```
Connection connection = DriverManager.getConnection(URL, USERNAME, PASSWORD);
DatabaseMetaData metadata = connection.getMetaData();
ResultSet resultSet;
resultSet = metadata.getTables(null, null, "tablename", null);
if(resultSet.next())
    // Table exists

resultSet = metadata.getColumns(null, null, "tablename", "columnName");
if(resultSet.next())
    // Column exists 
```

要调试您的代码，最好先尝试获取所有表名并将它们打印出来，如下所示：

```
resultSet = metadata.getTables(null, null, "%", null);
while(resultSet.next())
    System.out.println(resultSet.getString("TABLE_NAME")); 
```

注意！如果没有列出表，则您使用的是旧版本的 MySQL JDBC 驱动程序，存在以下错误[http://bugs.mysql.com/bug.php?id=20913](http://bugs.mysql.com/bug.php?id=20913)您应该升级或使用数据库名称作为第一个参数获取表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:28:31.597

查找表：

```
SELECT COUNT(*)
FROM information_schema.tables 
WHERE table_schema = 'db_name' 
AND table_name = 'table_name'; 
```

如果存在，则查找该列：

```
SELECT * 
FROM information_schema.COLUMNS 
WHERE 
    TABLE_SCHEMA = 'db_name' 
AND TABLE_NAME = 'table_name' 
AND COLUMN_NAME = 'column_name' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T21:26:44.590

使用[Connection.getMetaData()](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#getMetaData%28%29)，并使用返回的对象来获取目录、模式、表和列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T13:25:01.147

```
 Connection connection = DriverManager.getConnection(URL, USERNAME, PASSWORD);
 DatabaseMetaData metadata = connection.getMetaData();
 ResultSet resultSet;
 resultSet = metadata.getTables(null, null, "tablename", null);
 if(resultSet!=null){
   // next() checks if the next table exists ...
      System.out.println("Table exists");
 } 
```

# c++ - 以太网 IOKit Cocoa 上的网络驱动程序

> ID：11729830
> 
> 赞同：1
> 
> 时间：2012-07-30T21:22:51.817
> 
> 标签：c++, objective-c, cocoa, driver, iokit

我编写了一个objective-c POS，它需要与许多以太网设备（如条形码扫描仪、燃油泵、现金抽屉等）进行交互。我知道我可能必须为每个设备用c++ 编写驱动程序。问题是我不知道如何编写以太网设备驱动程序。有没有人可以帮助我？

顺便说一句，我在 Apple 开发网站上没有看到任何以太网驱动程序的代码示例。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:53:28.137

如果您使用的平台正在运行 iOS 或 MacOS，那么它已经有一个以太网驱动程序和一个[TCP/IP](http://en.wikipedia.org/wiki/Internet_protocol_suite)堆栈。您可能需要编写的是使用[套接字](http://en.wikipedia.org/wiki/Network_socket)API 与各种设备通信的模块/类。这些模块/类是在应用程序级别编写的，而不是 OS 设备驱动程序。

要在 iOS/MacOS 上使用套接字，您可以使用[CFNetwork](http://developer.apple.com/library/ios/#DOCUMENTATION/Networking/Conceptual/CFNetwork/Concepts/Concepts.html#//apple_ref/doc/uid/TP30001132-CH4-SW10)框架，或者更直接地使用[BSD 套接字](http://en.wikipedia.org/wiki/Berkeley_sockets)。有很多关于套接字编程的文献和例子。CFNetwork 上的文献不多，但 CFNetwork 的优势在于更容易与您的应用程序的运行循环集成。

查看这个[答案](https://stackoverflow.com/a/583960/245265)，其中列出了学习套接字网络编程的资源。

* * *

第三种选择是使用[Boost.Asio](http://www.boost.org/doc/libs/release/doc/html/boost_asio.html)库，它是“用于网络和低级 I/O 编程的跨平台 C++ 库，它使用现代 C++ 方法为开发人员提供一致的异步模型”。此文档[页面](http://www.boost.org/doc/libs/release/doc/html/boost_asio/examples.html)显示了几个有关如何使用 asio 的示例。您可以使用 Objective-C++（带有 *.mm 文件）将 Objective-C 与 C++ 混合。

# javascript - 如何禁用“防止此页面创建其他对话框”？

> ID：11729835
> 
> 赞同：32
> 
> 时间：2012-07-30T21:23:10.360
> 
> 标签：javascript, google-chrome

我正在开发一个利用 JavaScript`alert()`和`confirm()`对话框的网络应用程序。

如何阻止 Chrome 显示此复选框？

![](../Images/9ab4822a42ba78479b970e8ee15b8236.png)

有可以修改的设置吗？

我知道我可以修改源代码，但我希望 Chrome 仍然可以自动更新。

我不需要担心其他浏览器，因为该应用程序仅在 Chrome 中运行。

我对运行该应用程序的 (Windows) 计算机具有管理员访问权限。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-30T21:25:48.740

你不能。这是一项浏览器功能，可防止网站显示数百条警报以阻止您离开。

但是，您可以查看[jQuery UI Dialog](http://jqueryui.com/dialog/)之类的模态弹出窗口。这些是显示自定义对话框的 javascript 警报框。他们不使用默认`alert()`功能，因此完全绕过了您遇到的问题。

我发现如果您使用自定义对话框而不是默认的警报和确认，具有大量消息框和确认的应用程序具有**更好**的用户体验。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-05-16T14:12:21.290

这就是我最终要做的事情，因为我们有一个网络应用程序，它有多个不受我们控制的用户......（@DannyBeckett 我知道这不是你问题的确切答案，但正在看的人您的问题可能会因此有所帮助。）您至少可以检测他们是否没有看到对话框。您最可能想要更改的内容很少，例如显示时间或实际显示的内容。请记住，这只会通知用户他们已设法单击那个小复选框。

```
window.nativeAlert = window.alert;
window.alert = function (message) {
    var timeBefore = new Date();
    var confirmBool = nativeAlert(message);
    var timeAfter = new Date();
    if ((timeAfter - timeBefore) < 350) {
        MySpecialDialog("You have alerts turned off");
    }
}

window.nativeConfirm = window.confirm;
window.confirm = function (message) {
    var timeBefore = new Date();
    var confirmBool = nativeConfirm(message);
    var timeAfter = new Date();
    if ((timeAfter - timeBefore) < 350) {
        MySpecialDialog("You have confirms turned off");
    }
    return confirmBool;
} 
```

显然我已将时间设置为 3.5 毫秒。但是经过一些测试，我们只能在大约 5 毫秒内单击或关闭对话框。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-05-07T16:26:10.650

我知道每个人在道德上都反对这一点，但我知道在需要这样做的地方有实际开玩笑的原因。我认为 Chrome 对此采取了坚定的立场，在警报消息之间强制执行一秒钟的间隔时间。如果访问者被困在烦人的恶作剧网站上，这给了访问者足够的时间来关闭页面或刷新。

因此，要回答您的问题，这完全是时间问题。如果您每秒发出多次警报，Chrome 将创建该复选框。这是一个解决方法的简单示例：

```
var countdown = 99;
function annoy(){
    if(countdown>0){
        alert(countdown+" bottles of beer on the wall, "+countdown+" bottles of beer! Take one down, pass it around, "+(countdown-1)+" bottles of beer on the wall!");
        countdown--;

        // Time must always be 1000 milliseconds, 999 or less causes the checkbox to appear
        setTimeout(function(){
            annoy();
        }, 1000);
    }
}

// Don't alert right away or Chrome will catch you
setTimeout(function(){
    annoy();
}, 1000); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-01T17:39:51.113

您应该更好地使用[jquery-confirm](https://craftpip.github.io/jquery-confirm/) 而不是尝试删除该复选框。

```
$.confirm({
    title: 'Confirm!',
    content: 'Are you sure you want to refund invoice ?',
    confirm: function(){
       //do something 
    },
    cancel: function(){
       //do something
    }
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-03-23T09:00:09.770

如果用户愿意，您应该让他们这样做（无论如何您都无法阻止他们）。

你的问题是你需要知道他们有然后假设他们的意思是好的，而不是取消。替换`confirm(x)`为`myConfirm(x)`：

```
function myConfirm(message) {
    var start = Number(new Date());
    var result = confirm(message);
    var end = Number(new Date());
    return (end<(start+10)||result==true);
} 
```

* * *

## 回答 #6

> 赞同：-27
> 
> 时间：2013-02-07T12:28:40.597

```
function alertWithoutNotice(message){
    setTimeout(function(){
        alert(message);
    }, 1000);
} 
```

# unit-testing - 每种测试方法中使用的技术类型

> ID：11729836
> 
> 赞同：-2
> 
> 时间：2012-07-30T21:23:16.950
> 
> 标签：unit-testing, testing, integration-testing, system-testing

我一直在研究什么是单元测试、集成测试和系统测试。

我正在写一篇关于我正在使用 php、jquery、javascript 和 mysqli 编程创建的考试系统的论文。它基本上是一个考试系统，连接到数据库，教师可以在其中创建考试，学生参加创建的考试。

无论如何，我的问题是，是否有人有示例或知道任何有用的不同技术的网站可以用来实现这些类型的测试方法。如果您可以命名这些程序，那么我将非常乐意研究这些方法，并能够将这些方法包含在我的论文中的测试方法中。

当您提供示例或命名技术时，您能否说明它们是单元测试、集成测试还是系统测试。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:08:43.253

看看那个，我想它会对你有所帮助：[http ://www.istqb.org/downloads](http://www.istqb.org/downloads)

转到基础级文档 -> 基础级教学大纲 (2011)

# node.js - Nodejs给我下载而不是html响应

> ID：11729837
> 
> 赞同：4
> 
> 时间：2012-07-30T21:23:20.787
> 
> 标签：node.js, download, streaming, http-1.1

这是我的代码：

```
var express = require('express'),
      app = express.createServer(express.logger());
app.use(express.bodyParser());
app.get('/', function(request, response) {
    var name = request.param('name', null);
    response.header('Content-Type', 'text/event-stream');
    var t = setInterval(function(){
        response.write('Hello World by '+name+' (using http-1.1 streaming data!)<br />');
    }, 2000);
    /*request.socket.on('close', function() {
        clearInterval(t);
    }); */
});

var port = process.env.PORT || 5000;
app.listen(port, function() {
    //clearInterval(t);

  console.log("Listening on " + port);
}); 
```

我使用 express 是因为我在 heroku 中测试这个并且我在那里使用了指南。因此，当我打开应用程序时，我会看到一个下载弹出窗口，其中包含文件中的数据（已下载），而不是 html (dom) 响应。

我做错了什么？（是浏览器的问题吗？）

**编辑：**
@Joe，已经解决了我最初的问题，但我有两个问题：
1）为什么我不需要插入“正确”的内容类型？（流式传输？）
2）为什么这段代码只在一段时间后（大约半分钟）才输出。？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T21:31:30.090

如果您尝试将其显示为 HTML，您将希望您`Content-Type`是`text/html`

# jplayer - jPlayer 在 FireFox 中卡住循环播放的视频

> ID：11729840
> 
> 赞同：1
> 
> 时间：2012-07-30T21:23:37.173
> 
> 标签：jplayer

我有一个带有动画剪辑的 mp4 视频，这样在循环播放时不会显示中断。当我要求 Chrome 中的 jPlayer 执行此操作时，它工作正常，但在 FireFox 中，它会在重新播放循环之前暂停大约 1/3 秒。

因此，当视频播放到最后 1/2 秒时，我尝试让视频重新播放。我在视频的末尾添加了一个 1/2 秒，与前 1/2 秒匹配，当 jPlayer timeUpdate 事件确定我们在最后 1/2 秒的哪个位置时，它将调用 play 并匹配一个匹配的开始时间它与它在 (0 + (0.5 - timeLeft)) 的位置一致。再一次，Chrome 做得很好，虽然匹配得更好一点，但 Firefox 未能呈现完美的循环。

这是当前网络浏览器状态的神话，还是我错过了什么？

```
function buildJPlayerMotions(video_name) {
  return function readyVideo() {
    $(this).jPlayer("setMedia", {
      m4v: "/assets/videos/" + video_name +".mp4",
    });
  };
}

function loadMotionsJplayer(id) {
  $('#' + id).jPlayer({
    ready: buildJPlayerMotions(id),
    swfPath: "/assets",
    supplied: "m4v",
    backgroundColor: "#FFFFFF",
    size: { width: '728px',
            height: '402px'},
    timeupdate: function(){
                  var currTime = $('#' + id).data().jPlayer.status.currentTime;
                  var movieLength = $('#' + id).data().jPlayer.status.duration;
                  var timeRemaining = movieLength - currTime;
                  if (timeRemaining < 0.5) {
                    $('#' + id).jPlayer("pause");
                    $('#' + id).jPlayer("play", 0 + (0.5 - timeRemaining));
                  }
                }
 });
} 
```

# installation - 如何使用 jython setup.py 安装？

> ID：11729842
> 
> 赞同：1
> 
> 时间：2012-07-30T21:23:39.830
> 
> 标签：installation, jython, setuptools, setup.py

我正在使用 Jython virtualenv，我可以通过 pip 或 easy_install 安装任何软件，但是有一个尚未注册的软件和安装模式通过：

```
[sudo] python setup.py install 
```

我正在尝试对 jython 做同样的事情：

```
[sudo] jython setup.py install 
```

所以，我收到以下错误：

```
Traceback (most recent call last):
File "setup.py", line 3, in <module>
from setuptools import setup, find_packages
ImportError: No module named setuptools 
```

我再次检查并安装了 jython ez_setup.py。我下载了蛋黄也没有解决。

我的文件夹：

```
╭─hudson@hudson-pc ~/jython2.7a1/Lib/site-packages ‹› ‹master*›
╰─$ ls 
easy-install.pth         setuptools.pth yolk 0.4.3-py2.7.egg README should_dsl-2.0a5-py2.7.egg setuptools-0.6c11-py2.7.egg virtualenv-1.7.2-py2.7.egg 
```

在正常（真实）环境中，没有 virtualenvs，我得到了同样的错误。

在 Python 中，我已经安装了这个软件并且运行良好。

如果我进入 Jython Shell 并尝试 import setuptools，我也会遇到同样的错误：

```
>>> import setuptools
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named setuptools
>>> import sys
>>> sys.path
['', '/home/hudson/jython2.7a1/Lib', '/home/hudson/__classpath__',   '/home/hudson/__pyclasspath__'] 
```

然后，我将站点包添加到系统中（这可能是一个愚蠢的尝试）：

```
>>> sys.path.append('/home/hudson/jython2.7a1/Lib/site-packages')    
>>> sys.path
['', '/home/hudson/jython2.7a1/Lib', '/home/hudson/__classpath__', '/home/hudson/__pyclasspath__', '/home/hudson/jython2.7a1/Lib/site-packages']  
>>> import setuptools
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: No module named setuptools 
```

为什么不认识？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:03:15.467

如果`pip`“有效”，那么您可以使用它来安装您的软件。要尝试它，请从以下目录运行`setup.py`：

```
$ pip install -e . 
```

如果您有软件包的 tarball：

```
$ pip install your_package-0.0.1.tar.gz 
```

[`pip`](http://www.pip-installer.org/en/latest/)可以从 git 存储库安装，使用自定义 url 从哪里获取包等。

我已经对其进行了测试：jython 与`virtualenv`, `distribute`（的一个分支`setuptools`），pip 一起使用。所以`jython`可以安装一个包，如果它使用`setuptools`在`setup.py`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:02:04.063

基本上你需要先安装 installtool。为此，请参阅下面链接的文档。

安装这个： http: [//peak.telecommunity.com/dist/ez_setup.py](http://peak.telecommunity.com/dist/ez_setup.py)

（见这里：http://www.jython.org/jythonbook/en/1.0/appendixA.html#setuptools）

# python - 在 Numpy 中切片索引的函数

> ID：11729851
> 
> 赞同：2
> 
> 时间：2012-07-30T21:24:07.007
> 
> 标签：python, numpy, indexing

我有两个索引数组，我想手动返回中间的所有索引，就像一个切片函数，它看起来像这样：

```
ind1 = np.array([2,6])
ind2 = np.array([2,3])

final = np.array([[2,2,2], [4,5,6]]) 
```

由于切片的轴不固定，我想出了这个：

```
def index_slice(ind1,ind2):
    return np.indices( 1 + ind1 - ind2 ) + ind2[:,np.newaxis,np.newaxis]

final = index_slice(ind1,ind2) 
```

但是，这依赖于`1 + ind1 > ind2` 并且它也包括最后一个索引（不是pythonic）。有人会知道执行此操作的功能或更清洁的实现吗？
先感谢您。迭戈

PS 给出这个想法从何而来的一些背景。我正在考虑矩阵的子矩阵，我想从两个角落的索引中访问它们。由于问题的性质，给定的角并不总是与您在@pelson 的答案中看到的方向相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:55:32.243

我没有它在一个班轮中，但类似以下的内容将重现您似乎要求的结果：

```
def index_slice(arr1, arr2):
    lens = np.abs(arr1 - arr2)
    if not all((lens == max(lens)) | (lens == 0)):
        raise ValueError('The number of indices in some dimensions were inconsistent. Array lengths were %r' % lens)

    max_len = lens.max()
    result = np.empty((len(lens), max_len), dtype=np.int32)

    for dim, (a, b) in enumerate(zip(arr1, arr2)):
        if a == b:
            result[dim, :] = a
        elif a > b:
            result[dim, :] = np.arange(a, b, -1)
        else:
            result[dim, :] = np.arange(a, b)

    return result 
```

例如：

```
>>> ind1 = np.array([2, 6])
>>> ind2 = np.array([2, 3])
>>> print index_slice(ind1, ind2)
[[2 2 2]
 [6 5 4]]

>>> ind1 = np.array([2, 6, 1])
>>> ind2 = np.array([2, 3, 4])
>>> print index_slice(ind1, ind2)
[[2 2 2]
 [6 5 4]
 [1 2 3]] 
```

但是，提出这个问题会引起我的怀疑，即如果您要共享上游逻辑，您可能正在做一些可以以更简单的方式完成的事情。

高温高压

# r - R：将参数从包装函数传递到内部函数

> ID：11729852
> 
> 赞同：3
> 
> 时间：2012-07-30T21:24:14.110
> 
> 标签：r, function, parameters

我对这个功能不起作用并不感到惊讶，但我不太明白为什么。

```
computeMeans <- function(data,dv,fun) {
    x <- with(data,aggregate(dv,
        list(
            method=method,
            hypo=hypothesis,
            pre.group=pre.group,
            pre.smooth=pre.smooth
        ),
        fun ) )
    return(x)
}

computeMeans(df.basic,dprime,mean) 
```

`df.basic`具有因子`method`,`hypothesis`等和几个因变量的数据框在哪里（我用`dv`参数 dprime 指定了一个）。

我有多个因变量和几个相同形式的数据框，所以我想编写这个小函数来保持“简单”。我得到的错误是：

```
Error in aggregate(dv, list(method = method, hypo = hypothesis, 
pre.group = pre.group,  : 
    object 'dprime' not found 
```

但是 dprime 确实存在于 df.basic 中，它以`with()`. 谁能解释这个问题？谢谢！

编辑：这是 R 编程语言。[http://www.r-project.org/](http://www.r-project.org/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T21:44:57.657

虽然`dprime`存在于 中`df.basic`，但当您调用它时，`computeMeans`它不知道您指的是什么，除非您明确引用它。

```
computeMeans(df.basic,df.basic$dprime,mean) 
```

将工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T21:59:07.660

或者

```
computeMeans <- function(data,dv,fun) {
    dv <- eval(substitute(dv), envir=data)
    x <- with(data,aggregate(dv,
        list(
            method=method,
            hypo=hypothesis,
            pre.group=pre.group,
            pre.smooth=pre.smooth
        ),
        fun ) )
    return(x)
} 
```

您可能会认为，既然 dv 在`with(data, (.))`调用中，它会在`data`. 它不是。

> 当一个函数被调用时，参数是匹配的，然后每个形式参数都绑定到一个 Promise。为该形式参数给出的表达式和一个指向调用该函数的环境的指针都存储在 Promise 中。
> 
> 在访问该参数之前，没有与该承诺关联的值。当参数被访问时，存储的表达式在存储的环境中被计算，并返回结果。结果也被 promise 保存了。

[来源](http://cran.r-project.org/doc/manuals/R-lang.html#Promise-objects)

因此，在创建它的环境（即调用函数的环境）中评估一个 Promise，而不管第一次调用 Promise 的环境如何。观察：

```
delayedAssign("x", y)
local({
    y <- 10
    x
})  
Error in eval(expr, envir, enclos) : object 'y' not found

w <- 10
delayedAssign("z", w)
local({
    w <- 11
    z
})
[1] 10 
```

请注意，delayedAssign 创建了一个承诺。在第一个示例中，x 通过全局环境中的承诺分配了 y 的值，但 y 尚未在全局环境中定义。x 在已定义 y 的环境中调用，但调用 x 仍会导致错误，指示 y 不存在。这表明 x 在定义承诺的环境中进行评估，而不是在其当前环境中。

在第二个例子中，z 通过全局环境中的 promise 被赋予 w 的值，并且 w 是在全局环境中定义的。然后在 w 被分配了不同值的环境中调用 z，但 z 仍然返回创建 promise 的环境中 w 的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T22:30:35.400

将参数作为字符串传递`dprime`将允许您回避@Michael 的回答中讨论的涉及范围界定和评估规则的任何考虑：

```
computeMeans <- function(data, dv, fun) {
    x <- aggregate(data[[dv]],
        list(
            method = data[["method"]],
            hypo = data[["hypothesis"]],
            pre.group = data[["pre.group"]],
            pre.smooth = data[["pre.smooth"]]
        ),
        fun )
    return(x)
}
computeMeans(df.basic, "dprime", mean) 
```

# javascript - javascript 将事件处理程序绑定到水平滚动

> ID：11729859
> 
> 赞同：11
> 
> 时间：2012-07-30T21:24:57.863
> 
> 标签：javascript, jquery, event-handling

javascript中有没有一种方法可以将事件处理程序绑定到水平滚动，而不是当用户水平和垂直滚动时触发的通用滚动事件？我只想在用户水平滚动时触发事件。

我四处寻找这个问题的答案，但似乎找不到任何东西。

谢谢！

PS如果我不正确地使用某些术语，我深表歉意。我对javascript相当陌生。

**更新**

非常感谢您的所有回答！总之，看起来你们都在说 javascript 不支持这个，但我认为我可以用这样的东西（使用 jQuery）[（jsFiddle）](http://jsfiddle.net/EsPk7/7/)来完成这个功能：

```
var oldScrollTop = $(window).scrollTop();

$(window).bind('scroll', function () {
    if (oldScrollTop == $(window).scrollTop())
        //scrolled horizontally
    else {
        //scrolled vertically
        oldScrollTop = $(window).scrollTop();
    }
});​ 
```

这就是我需要知道的。再次感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T21:33:23.197

用我的电话接听，所以目前无法提供代码。

您需要做的是订阅滚动事件。垂直/水平没有特定的。

接下来，您需要对当前显示区域进行一些测量。您需要测量 window.clientHeight 和 window.clientWidth。

接下来，获取 window.top 和 window.left。这将告诉您视口的位置在哪里，即如果它大于 0，则使用了滚动条。

从这里得到你需要的东西是非常简单的数学运算。如果在接下来的几个小时内没有其他人提供代码示例，我会尝试这样做。

编辑：更多信息。

您必须捕获滚动事件。您还需要将初始 window.top 和 window.left 属性存储在某处。每当滚动事件发生时，进行简单检查以查看当前顶部/左侧值是否与存储值不同。

此时，如果两者不同，您可以触发自己的自定义事件来指示垂直或水平滚动。如果你使用 jQuery，这很容易。如果您在没有库帮助的情况下编写 js，这也很容易，但需要更多的参与。

在 js 中搜索事件调度。

然后，您可以编写任何其他想要订阅自定义事件的代码，而无需将它们与方法调用绑定在一起。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T22:51:10.540

我为您编写了一个 jQuery 插件，可让您将函数附加到`scrollh`事件。

[在 jsfiddle.net 上查看它的实际应用](http://jsfiddle.net/XgYpP/)。

```
/* Enable "scrollh" event jQuery plugin */
(function ($) {
    $.fn.enableHScroll = function() {
        function handler(el) {
           var lastPos = el
              .on('scroll', function() {
                 var newPos = $(this).scrollLeft();
                 if (newPos !== lastPos) {
                     $(this).trigger('scrollh', newPos - lastPos);
                     lastPos = newPos;
                 }
              })
              .scrollLeft();
        }
        return this.each(function() {
            var el = $(this);
            if (!el.data('hScrollEnabled')) {
                el.data('hScrollEnabled', true);                 
                handler(el);
            }
        });
    }
}(jQuery)); 
```

这很容易使用：

```
$('#container')
    .enableHScroll()
    .on('scrollh', function(obj, offset) {
        $('#info').val(offset);
    }); 
```

请注意，滚动事件来得非常快。即使点击滚动条跳转到一个新的位置，也会产生很多滚动事件。您可能需要调整此代码以等待一小段时间，并在触发 hscroll 事件之前累积该时间段内的所有位置变化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-30T21:29:30.167

您可以使用相同的[`scroll`](http://api.jquery.com/scroll/)事件，但在您的处理程序中使用该[`scrollLeft`](http://api.jquery.com/scrollLeft/)函数来查看滚动条是否从上次触发事件时水平移动。如果滚动条没有移动，那么只需从您的处理程序返回。否则将您的变量更新到新位置并采取行动。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T21:29:41.707

您可以检查`x`页面的值是否更改并忽略您的`y`值。

如果`x`值发生变化：有你的水平滚动。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T21:31:50.653

使用页面加载，将两者的初始滚动条位置存储在两个变量中（大概都是 0）。接下来，每当发生滚动事件时，查找`scrollleft`和`scrolltop`属性。如果`scrollleft`属性的值不同，而`scrolltop`' 的值与之前的值相同，则为水平滚动。然后将变量的值设置为新的滚动值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T21:30:13.233

不，水平滚动没有特殊事件（它用于全局滚动），但是您可以尝试通过属性检查内容的位置，`.scrollLeft`如果它与之前的值不同，则表示用户水平滚动内容。

# android - 失去焦点后如何杀死应用程序？

> ID：11729865
> 
> 赞同：0
> 
> 时间：2012-07-30T21:25:41.043
> 
> 标签：android, android-activity, process, background, focus

我试图让我的应用程序完成主要活动（而不是在后台保持活动应用程序），同时保持服务进程处于活动状态。

如果用户按下主页按钮并离开我的应用程序或从我的应用程序外部启动另一个活动，我希望该活动被关闭并且不列为活动应用程序。

然而，重要的是该过程保持活力。我不希望我的后台服务也死掉。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:32:44.287

您不应该强行关闭应用程序，因为系统本身可以很好地处理这个问题。相反，您应该调用 finish() 来表示应用程序已完成并且可以处理（您的服务将继续运行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:33:11.040

默认情况下，[服务](http://developer.android.com/reference/android/app/Service.html)没有 UI。一旦开始，它们就会运行，直到它们崩溃或被杀死。用户可以关闭您的应用程序并启动一个新应用程序，该服务将持续存在。

另一方面，[活动只有在可见时才会运行。](http://developer.android.com/reference/android/app/Activity.html)当用户导航到另一个活动时，前一个活动被[暂停、停止或终止](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)。

执行您上面简要描述的一种简单方法是创建一个启动服务的活动。这样，当使用离开您的活动时，服务将继续在后台运行。

如果您希望您的 Activity 在出现新 Activity 时完全消失，只需在您的 Activity`finish()`的`onPause()`or`onStop()`方法中调用（更适合您的应用程序）。

# javascript - 直接从 Javascript 代码访问 SVG 文件

> ID：11729868
> 
> 赞同：2
> 
> 时间：2012-07-30T21:25:49.593
> 
> 标签：javascript, html, svg, web

我有这个 HTML 代码，它正在调用我的 javascript 代码。该代码用于量规。在 javascript 代码中，我试图访问一个 SVG 文件，并修改指针（仪表的）以显示所需的值。代码工作正常。但是，我不想在 HTML 中调用“object id”。我想直接通过 javascript 访问 SVG 文件，而不是在 HTML 中使用对象 ID。我尝试使用 el.setAttribute('data', 'gauge.svg'); 但随后 svg_doc 无法检索 SVG 图像并修改针。任何帮助将不胜感激。

PS：我尽力在解释问题时尽可能彻底。但是，如果我不清楚某处，请告诉我。

这是 Gauge.png 图像，它嵌入在我粘贴在下面的 svg 代码中[https://sphotos-b.xx.fbcdn.net/hphotos-snc6/179594_10150982737360698_1827200234_n.jpg](https://sphotos-b.xx.fbcdn.net/hphotos-snc6/179594_10150982737360698_1827200234_n.jpg)

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g name="gauge" width="122px" height="127px">
        <image xlink:href="gauging.png" width="122" height="127"/>
    <circle id="led" cx="39" cy="76" r="5" style="fill: #999; stroke: none">
        <animateColor id="ledAnimation" attributeName="fill" attributeType="css" begin="0s" dur="1s"
        values="none;#f88;#f00;#f88;none;" repeatCount="0"/>
    </circle>
        <g id="needle" transform="rotate(0,62,62)">
            <circle cx="62" cy="62" r="4" style="fill: #c00; stroke: none"/>
            <rect transform="rotate(-130,62,62)" name="arrow"  x="58" y="38" width="8" height="24" style="fill: #c00; stroke: none"/>
            <polygon transform="rotate(-130,62,62)" points="58,39,66,39,62,30,58,39" style="fill: #c00; stroke: none"/>
        </g>
        <text id="value" x="51" y="98" focusable="false" editable="no" style="stroke:none; fill:#fff; font-family: monospace; font-size: 12px"></text>
    </g>
</svg> 
```

**HTML+Javascript 代码**

```
 <head>
    <title>SVG Gauge example</title>

    <script>
    function update1(){
        var scale=100;
        var value;
        var value1 = 69;

        var el=document.getElementById('gauge1');       
        if (!el) return;

        /* Get SVG document from HTML element */
        var svg_doc = el.contentDocument;
        if (!svg_doc) return;

        /* Rotate needle to display given value */
        var needle_el = svg_doc.getElementById('needle');
        if (!needle_el) return;
        /* Calc rotation angle (0->0%, 260->100%) */
        value = parseInt(value1);
        scale = parseInt(scale);
        if (value > scale) value = scale;
        var angle = value / scale * 260;
        /* On-the-fly SVG transform */
        needle_el.setAttribute('transform','rotate('+angle+',62,62)');
    }
document.addEventListener('load', update1, true);
    </script>

    </head>

<div>
<object id="gauge1" type="image/svg+xml" data="gauge.svg" width="127" height="122"/>
</div>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:13:02.453

正如 robertc 已经提到的，您可以将 javascript 代码嵌入到您的 SVG 文件中：

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g name="gauge" width="122px" height="127px">
        <image xlink:href="gauging.png" width="122" height="127"/>
    <circle id="led" cx="39" cy="76" r="5" style="fill: #999; stroke: none">
        <animateColor id="ledAnimation" attributeName="fill" attributeType="css" begin="0s" dur="1s"
        values="none;#f88;#f00;#f88;none;" repeatCount="0"/>
    </circle>
        <g id="needle" transform="rotate(0,62,62)">
            <circle cx="62" cy="62" r="4" style="fill: #c00; stroke: none"/>
            <rect transform="rotate(-130,62,62)" name="arrow"  x="58" y="38" width="8" height="24" style="fill: #c00; stroke: none"/>
            <polygon transform="rotate(-130,62,62)" points="58,39,66,39,62,30,58,39" style="fill: #c00; stroke: none"/>
        </g>
        <text id="value" x="51" y="98" focusable="false" editable="no" style="stroke:none; fill:#fff; font-family: monospace; font-size: 12px"></text>
    </g>

    <script type="text/javascript">
        var scale=100;
        var value;
        var value1 = 69;

        /* Rotate needle to display given value */
        var needle_el = document.getElementById('needle');
        /* Calc rotation angle (0->0%, 260->100%) */
        value = parseInt(value1);
        scale = parseInt(scale);
        if (value > scale) value = scale;
        var angle = value / scale * 260;
        /* On-the-fly SVG transform */
        needle_el.setAttribute('transform','rotate('+angle+',62,62)');

    </script>
</svg> 
```

我已将代码放在实际 SVG 内容下方，以便在执行脚本时已加载文档。

然后，您可以直接在 Firefox 中查看 SVG 文件（我现在已经对其进行了测试）。

# c# - 在 C# 应用程序中同时执行多个任务，每个任务都在一个单独的 Windows 用户帐户下

> ID：11729869
> 
> 赞同：0
> 
> 时间：2012-07-30T21:25:53.517
> 
> 标签：c#, multithreading, windows-authentication, appdomain

我正在尝试构建一个旨在同时执行多项任务的 C# 应用程序 [例如打开文件、打开端口、生成 Windows 服务等]。

这是我需要的：-

a) 应用程序应该能够同时运行这些任务[每个任务都通过一个单独的线程并在同一应用程序域内启动] b) 每个线程应该在单独的 Windows 用户帐户的帐户下运行 [用户名和密码将在应用程序通过存储库/表启动之前提供]

请建议在 C# 中实现这一目标的最佳方法？谢谢， 苏米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:43:07.637

这是我的研究成果：- a) DllImport LogonUser、SetThreadToken 和 LogOffUser API b) 登录用户并获取句柄/令牌 c) 创建线程并使用 SetThreadToken 在线程上设置令牌 d) 运行/执行线程。现在，线程将执行操作，就像在其凭据由 LogonUser API 提供的用户帐户下运行一样。 e) 线程完成其工作后，调用 LogoffUser API 以使用户退出线程。

这对我有用！

但是，我很想知道我是否可以使用托管/纯 C# API 来做到这一点。

任何人？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:35:52.617

尽管可以调用，但不确定是否可以在不同的用户凭据下运行不同的任务/线程，这与使用不同的用户凭据运行不同的线程不同。

`Process.Start(filenameToStart, username, password, domain);`

并且可以用于并行处理`Parallel.Invoke`。

`Parallel.Invoke( () => doX(), () => doY());`

# java - 在 Java 中实现驱动程序概念

> ID：11729874
> 
> 赞同：0
> 
> 时间：2012-07-30T21:26:32.317
> 
> 标签：java, driver

我正在开发一个连接到相同类型的不同设备的项目。我已经为单个设备实现了一些类，但现在开发了一个所有“驱动程序”都应该实现的通用接口。

我现在的问题是：稍后，用户应该通过 GUI 使用我的程序，并且应该能够“加载”我提供的驱动程序。但是这些驱动程序看起来如何？带有实现驱动程序接口的类的 .jar？一个大致描述要做什么的 xml 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T22:18:22.253

您可以考虑以下帖子作为起点：[https ://stackoverflow.com/a/2575156/471129](https://stackoverflow.com/a/2575156/471129)

基本上，依赖注入和控制反转用于从外部指定配置并经常从不同的 .jar 文件动态加载代码，这似乎是您想要做的。

当然，您总是可以通过类名加载代码，如下所示：

```
public interface IPlugin {
    // some methods that all the plugins will have in common
}

private static IPlugin loadIPluginByClassName(String plugInClassName, ClassLoader classLoader) {
    // NOTE: throws NoClassDefFoundError or ClassNotFoundException if cannot load the class
    // or throws ClassCastException if the loaded class does not implement the interface    
    Class<?> cls = classLoader.loadClass(plugInClassName);
    IPlugin ans = (IPlugin) cls.newInstance()
    return ans;
} 
```

您需要使用包限定的类名和类加载器调用 loadIPluginByClassName()，如

```
IPlugin pi = loadIPluginByClassName("com.test.something.MyPlugin", SomeClassInYourProject.class.getClassLoader()); 
```

只要 .jar 在类路径中，插件就可以在它自己的 .jar 中。

如果您不想从外部 .jar 加载它们，可以使用更简单的

```
IPlugin pi = loadIPluginByClassName(MyPlugin.class.getName(), SomeClassInYourProject.class.getClassLoader()); 
```

这将创建对您的插件类的直接引用（这可能会有所帮助，因为可以将其作为参考）

# ios - 带有阴影和角半径的 UITableView（附电影示例）

> ID：11729877
> 
> 赞同：2
> 
> 时间：2012-07-30T21:26:37.277
> 
> 标签：ios, uitableview, calayer

我有一个带有 UITableView 的 UIViewController。位于视图控制器的视图内，四周都有一些填充。我正在尝试从表格视图和圆角中绘制阴影，但我无法同时实现两者。我已尝试使用以下代码并打开和关闭 maskToBounds，但将其设置为 NO 会创建一个非常奇怪的阴影滚动效果，并且调用不会在表格内剪切。

```
[self.tableView.layer setShadowColor:[UIColor blackColor].CGColor];
[self.tableView.layer setShadowOffset:CGSizeMake(0, 3)];
[self.tableView.layer setShadowOpacity:0.4];
[self.tableView.layer setShadowRadius:3.0f];
[self.tableView.layer setCornerRadius:5.0f];
[self.tableView.layer setShadowPath:[[UIBezierPath bezierPathWithRoundedRect:self.tableView.bounds cornerRadius:5.0f] CGPath]]; 
```

我也只是在画一个简单风格的 UITableView。我想要达到的效果可以在免费应用程序[Transit App](http://gettransitapp.com)中看到，这是一部[电影](https://dl.dropbox.com/u/5445727/ExampleUITableView.mov)，你可以看到阴影停留，桌子甚至有一个上下滚动的蒙版。

我进行了搜索和搜索，但无法根据其他 SO 答案或在线文章组合出一个解决方案。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T12:18:19.257

试试下面的链接，其中一些是旧的，但你可以得到一些指针。

[自定义表格效果](http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html)

[阴影 2](http://www.touchthatfruit.com/uitableview-shadows)

[酷表视图](http://cocoawithlove.com/2009/08/adding-shadow-effects-to-uitableview.html)

[滴影](http://rowboatrevolution.com/2009/06/drop-shadows-in-uitableview/)

好的！！我再次尝试并获得了效果，这再次只是一种解决方法（而不是使用图像），以下是我尝试过的

创建一个 CALayer，与您的 tableview 具有相同的框架，给出相同的曲线和所有，在该层的顶部添加 table view，就是这样。

```
CALayer *sublayer = [CALayer layer];
sublayer.backgroundColor = [UIColor blueColor].CGColor; // If you dont give this, shadow will not come, dont know why
sublayer.shadowOffset = CGSizeMake(0, 3);
sublayer.shadowRadius = 5.0;
sublayer.shadowColor = [UIColor blackColor].CGColor;
sublayer.shadowOpacity = 1.0;
sublayer.cornerRadius = 5.0;
sublayer.frame = CGRectMake(myTable.frame.origin.x, myTable.frame.origin.y, myTable.frame.size.width, myTable.frame.size.height);
[self.view.layer addSublayer:sublayer];

[self.view.layer addSublayer:myTable.layer]; 
```

啊！！由于某种原因，我无法从我的机器、防火墙上传屏幕截图；-)。我会在家里尝试。

![在此处输入图像描述](../Images/7db74e6d07083d97595fa7fdd32b30b2.png)

-anoop

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T13:23:25.643

我知道这是一个相当老的问题，但我最近遇到了同样的问题，这里的解决方案是很好的例子，但还不够完整。所以这是我用来创建表格视图阴影的方法。它也可以用于任何其他视图。

```
-(void)makeShadowToView:(UIView*) view withHeight:(CGFloat)shadowHeight
{
    CGRect bounds = view.frame;
    bounds.size.height = shadowHeight;
    view.clipsToBounds = NO; // Without this row it doesn't display any shadow, at least for a table view
    view.layer.shadowColor = [UIColor blackColor].CGColor;
    view.layer.shadowOpacity = 0.9f;
    view.layer.shadowOffset = CGSizeMake(0.0f, 0.0f);
    view.layer.shadowRadius = 5.0f;
    view.layer.shadowPath = [UIBezierPath bezierPathWithRect:bounds].CGPath;
} 
```

示例用法：如果您想根据表格内容的高度重新计算阴影的高度，则添加`[self makeShadowToView:self.view withHeight:height];` where 。`height`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:20:39.977

建议在大tableview的阴影中使用图像，所有绘图都会降低性能，这可能会导致糟糕的用户体验，只是一个建议

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-02T09:20:49.870

```
(void)shadowForView{
CALayer *layer = self.viewActionMenu.layer;
layer.shadowOffset = CGSizeMake(-2, 0);
layer.shadowColor = [[UIColor blackColor] CGColor];
layer.shadowRadius = 2.0f;
layer.shadowOpacity = 0.80f;
// [self.view bringSubviewToFront:self.actionView];
                   } 
```

并致电：

```
[self shadowForView]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-16T13:43:22.240

**尝试这个**

```
UITableView * objTableview=[[UITableView alloc]initWithFrame:CGRectMake(x, y, w, h)];

UIView * objViewShadow=[[UIView alloc]initWithFrame:objTableview.bounds];

objTableview.layer.cornerRadius=5;

// add shadow

objViewShadow.layer.shadowOffset = CGSizeMake(0, 3);

objViewShadow.layer.shadowRadius = 5.0;

objViewShadow.layer.shadowColor = [UIColor blackColor].CGColor;

objViewShadow.layer.shadowOpacity = 0.8;

[objViewShadow addSubview:objTableview];

[self.view addSubview:objViewShadow]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-07T11:38:47.553

您需要设置这两个属性

self.tableView.clipsToBounds = 否；

self.tableView.layer.masksToBounds = 否；

# apache - Activemq、Redis 和 Apache camel 是正确的组合吗？

> ID：11729882
> 
> 赞同：2
> 
> 时间：2012-07-30T21:26:57.877
> 
> 标签：apache, redis, activemq

Activemq、Redis 和 Apache camel 是正确的组合吗？

正在计划跨多个应用程序的高性能企业级集成解决方案

我的目标是提出解决方案。独立于消费者的表现 b. 能够在任何问题的情况下排除故障 c. 具有故障转移支持的高可用性 d. 每秒处理 10k 条消息

在这里，我打算有一个。在所有应用服务器中运行的 activemq 代理网络，并将使用的消息存储在 redis 数据存储中 b。从 redis 数据存储中，应用程序可以通过骆驼端点检索消息（选择骆驼端点在到达应用程序之前处理消息）。

也可以仅使用 Redis + Apache camel 来删除 ActiveMQ，正如我从讨论表中看到的那样，Redis 完成了大部分 ActiveMQ 工作

任何人都可以就这个技术堆栈提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T22:40:42.303

ActiveMQ 和 Camel 可以很好地协同工作并且可以很好地扩展 - 在适当的硬件条件下处理负载应该没有问题。

你在想这样的事情吗？

```
Message producer App -> ActiveMQ -> Camel -> Redis

Message Consumer App <- Camel [some endpoint] <- Redis 
```

将 ActiveMQ 置于两者之间通常是实现 HA、负载平衡和使解决方案具有弹性的一种非常好的方法。根据您对机器等的特定设置。ActiveMQ 可以通过多种方式帮助解决 HA 问题。

如果您的应用程序使用除 JMS/ActiveMQ 消息传递之外的其他协议，即 HTTP、原始 tcp 或类似协议，删除 ActiveMQ 可能是一个不错的选择。您能否详细说明这些应用程序将如何与 Camel 通信？默认情况下，ActiveMQ 支持事务、保证交付，并且您可以在服务器上使用有限数量的线程，即使您的流量很大。对于其他协议，这可能有点难以实现。如果 ActiveMQ 中没有 HA 层（集群），您需要设置 Redis 来处理所有方面的 HA，这可能同样简单，但是 Redis 有点内存消耗，所以请注意这一点。

# nhibernate - 创建 T4 模板时，如何利用应用配置和其他文件资源？

> ID：11729888
> 
> 赞同：4
> 
> 时间：2012-07-30T21:27:25.943
> 
> 标签：nhibernate, t4

我有一个我正在尝试创建的 T4 模板，它将通过 Nhibernate 对数据库中的 gen 查找值进行编码。我的问题是我的数据访问层使用 Nhibernate 配置的路径以便在启动时编译配置（静态构造函数）。

我不知道如何让 t4 “看到”这个文件路径，以便当我的代码生成运行时它可以获得这个配置文件。我也不知道如何让 t4 “看到”我的配置管理器类；其中包含列出 nhibernate xml 文件路径的应用程序设置。

我有两个配置文件，一个用于 SQL Server，一个用于 sqlite。配置文件需要在执行程序集的根目录下才能休眠编译配置。

似乎我的模板将无法使用高级业务层从数据库中选择数据，而是我可能不得不将所有 nhibernate 配置代码也复制到模板中（呃）。

我的数据库包装器：

```
private class DBSingleton
{
    static DBSingleton()
    {
        string path = ConfigurationManager.AppSettings["DBConfigFileFullPath"];
        NHibernate.Cfg.Configuration cfg = new NHibernate.Cfg.Configuration().Configure(path);
        cfg.AddInputStream(HbmSerializer.Default.Serialize(System.Reflection.Assembly.GetAssembly(typeof(Plan))));
        instance = cfg.BuildSessionFactory();
    }
    internal static readonly ISessionFactory instance;
} 
```

还有我的模板：

```
<#
System.Diagnostics.Debugger.Launch();
string path = Host.ResolvePath(@"..\DB.UnitTest\App.config");
    System.Configuration.ConfigurationManager.AppSettings.Add(
    "DBConfigFileFullPath", path);
//System.Configuration.ConfigurationFileMap fileMap = new ConfigurationFileMap(path); //Path to your config file
//System.Configuration.Configuration configuration = System.Configuration.ConfigurationManager.OpenMappedMachineConfiguration(fileMap);

ReferenceValueBL bl = new ReferenceValueBL();
List<ReferenceValue> refVals = bl.Select(); <- problem occurs here
foreach(ReferenceValue rv in refVals)
{
    Write("Public ");
    Write(rv.ReferenceValueCode.GetType().Name);
    Write(" ");
    Write(rv.ReferenceValueCode);
    Write(" = ");
    Write(rv.ReferenceValueCode);
}

#> 
```

当 bl 变量尝试调用 select() 时，就会出现我的问题。那是初始化 DBSingleton 的时候。它抛出一个错误，说应用程序设置为空。如果我将 DB 类中的相对文件路径硬编码为 ./Dbconfig.xml 它仍然会引发错误，因为执行程序集的本地目录中没有该文件。

其他人如何处理让 t4 使用 app/web 配置文件而不从模板中读取配置文件然后将连接字符串注入 DAL？我没有那种奢侈。该文件必须放在可读的位置，或者 t4 必须知道在某处查找。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-10T16:20:31.607

> 其他人如何处理让 t4 使用 app/web 配置文件而不从模板中读取配置文件然后将连接字符串注入 DAL？

您也许可以通过设置 Properties |将您的文本模板转换为[运行时文本模板。](https://msdn.microsoft.com/en-us/library/ee844259.aspx)“TextTemplatingFilePreprocessor”的自定义工具。

之后，整个代码生成过程将被封装在标准类中，该类将具有`TransformText`生成结果字符串的方法 - 然后您可以将其写入您喜欢的文件中。

好的是模板类是部分的，所以你可以添加一些自定义方法的实现。可能是这样的：

```
public partial class RuntimeTextTemplate1
{
    public string TransformText(string someParameter)
    {
        // Do something with someParameter, initialize class field
        // with its value and later use this field in your t4 file.
        // You also have access to ConfigurationManager.AppSettings here.
        return TransformText();
    }
} 
```

另外，这个：

```
foreach(ReferenceValue rv in refVals)
{
    Write("Public ");
    Write(rv.ReferenceValueCode.GetType().Name);
    Write(" ");
    Write(rv.ReferenceValueCode);
    Write(" = ");
    Write(rv.ReferenceValueCode);
} 
```

可以改写为：

```
foreach(ReferenceValue rv in refVals)
{
#>
Public <#= rv.ReferenceValueCode.GetType().Name #> <#= rv.ReferenceValueCode #> = <#= rv.ReferenceValueCode #>
<#+
} 
```

# javascript - 在特定情况下，无法从类的函数中访问类的变量

> ID：11729890
> 
> 赞同：1
> 
> 时间：2012-07-30T21:27:31.883
> 
> 标签：javascript, jquery, javascript-events

我不知道如何最好地解释这个问题，因为有很多事情要做，所以我继续创建了一个我正在做的事情的样本。下面是代码：

```
var cl = new Class();
cl.handleAction("triggerScream");
cl.handleAction('triggerDisplay');

function Class()
{
  //function which will print static string
  this.scream = function(){
    document.write("AAAAAAA!!!<br/>");
  }

  //function which will print the class variable
  this.display = function(){
    document.write( this.color );
  };

  //sample class variable
  this.color = 'red';

  //map of actions
  this.actions = {
    'triggerDisplay' : this.display,
    'triggerScream' : this.scream
  };

  //generic function that handles all actions
  this.handleAction = function(action){
    try{
      this.actions[action]();
    }catch(err)
    {
      document.write("Error doing "+action);
    }
  };
} 
```

这是 jsbin 链接：http: [//jsbin.com/etimer/2/edit](http://jsbin.com/etimer/2/edit)

总而言之，有一个`handleAction()`函数，它处理各种事件并调用其他函数来完成事件。为此，我有要唤起的动作事件和功能的地图。类的函数`display()`访问类变量，但由于某种原因`this`在该函数内部未定义。关于为什么以及如何修复它以便我可以访问变量并最好保留代码架构的任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T21:43:14.187

调用函数function时的作用域与Class对象的作用域不同。这意味着“this”指的是别的东西：

```
function Class()
{
  //function which will print static string
  this.scream = function(){
    document.write("AAAAAAA!!!<br/>");
  }

  //function which will print the class variable
  this.display = function(){
    document.write( this.color );
  };

  //sample class variable
  this.color = 'red';

 //generic function that handles all actions
     this.handleAction = function(action){
    try{
      //you are calling the function in another scope
      this.actions[action]();
    }catch(err)
    {
      document.write("Error doing "+action);
    }
  };
} 
```

相反，您可以这样做：

```
function Class()
{
  //function which will print static string
  this.scream = function(){
    document.write("AAAAAAA!!!<br/>");
  }

  //function which will print the class variable
  this.display = function(){
    document.write(color);
  };

  //sample class variable
  //this way it's available to all inside functions
  var color = 'red';
} 
```

虽然这不是一个简单的章节，但我建议您了解更多关于 javascript 作用域和 clojures 的信息。

基本上你需要从这里学到的是，当你在没有任何先前上下文的情况下调用一个函数时，它不能依赖“this”。这就是为什么可以使用以下方法更改方法调用的上下文的原因`.call(context,args..)`

例子：

```
function Class()
{
  //we store the context
  var scope=this;
  //function which will print static string
  this.scream = function(){
    document.write("AAAAAAA!!!<br/>");
  }

  //function which will print the class variable
  this.display = function(){
    document.write(this.color);
  };

  //sample class variable
  this.color = 'red';

  //map of actions
  this.actions = {
    'triggerDisplay' : this.display,
    'triggerScream' : this.scream
  };

  //generic function that handles all actions
  this.handleAction = function(action){
    try{
      //we call our function in the Class context
      this.actions[action].call(scope);
    }catch(err)
    {
      document.write("Error doing "+action);
    }
 };
}
var cl = new Class();
cl.handleAction("triggerScream");
cl.handleAction("triggerDisplay"); 
```

# c# - 泛型列表

> ID：11729891
> 
> 赞同：0
> 
> 时间：2012-07-30T21:27:36.777
> 
> 标签：c#, generics

我在设计使用命令模式但使用泛型的解决方案时遇到了一些麻烦。基本上，我已经定义了一个通用接口，它只有一个返回通用对象列表的方法。

```
public interface IExecute<T>
{
   List<T> Execute();
}

public class SimpleExecute : IExecute<int>
{
   public List<int> Execute()
   { return a list of ints... }
}

public class Main
{
   private List<IExecute<T>> ExecuteTasks; // This is not valid in C#
} 
```

由于泛型的泛型列表无效，我实现了一个非泛型接口 IExceute 并使泛型接口扩展了非泛型接口并能够创建一个列表

```
public interface IExecute {}

public interface IExecute<T> : Execute
{
   List<T> Execute();
}

private List<IExecute> ExecuteTasks; 
```

但是，现在我不确定如何遍历 ExecuteTasks 并调用 execute 方法。

我已尽力解释这个问题。如果您需要进一步解释我的问题，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:42:41.400

你能做的最好的事情是：

```
public interface IExecute { IList Execute(); } 
```

然后，例如：

```
public class SimpleExecute : IExecute<int>   
{   
   public List<int> Execute()   
   { return a list of ints... }   
   IList IExecute.Execute() { return this.Execute(); }
} 
```

（注意非泛型的显式接口成员实现`IExecute.Execute()`）

然后：

```
List<IExecute> iExecuteList = //whatever;
foreach (var ix in iExecuteList)
{
    IList list = ix.Execute();
} 
```

您无法在编译时获取特定的泛型列表类型（例如 , `IList<string>`）`IList<int>`，原因与您无法将 an`int`和 a存储`string`在同一个泛型列表中的原因相同（除非类型参数是`object`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:36:38.983

```
public class Main
{
   private List<IExecute<T> ExecuteTasks; // This is not valid in C#
} 
```

这里有2个错误：

*   T 是一个未知类。您应该指定了正确的类型

*   List< 没有右尖括号“>”。每个左括号必须有一个右括号。它应该看起来像`List<IExecute<T>>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T21:47:40.570

```
List<IExecute<T>> ExecuteTasks 
```

无效，因为 T 没有在包含类的任何地方定义。

像这样的东西应该可以代替：

```
List<IExecute<Object>> ExecuteTasks;

ExecuteTasks.Add(new SimpleExecute()); 
```

或者

```
public class Main<T>
{
    List<IExecute<T>> ExecuteTasks 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T21:32:44.393

尝试使用循环遍历每个项目`foreach`：

```
foreach(var item in ExecuteTasks)
{
    item.Execute();
    //...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T21:53:19.447

当您使用泛型时，请考虑`IExecute<Class1>`与`IExecute<Class2>`. 在这种情况下，如果您要在两者中调用一个通用方法，则需要另一个接口；例如`IExecute`。

```
public interface IExecute<T>
{
    List<T> Execute();
}

public interface IExecute
{
    IList Execute();
}

public class SimpleExecute : IExecute<int>, IExecute
{
    IList IExecute.Execute()
    {
        return Execute();
    }

    public List<int> Execute()
    {
        return new List<int>();
    }
} 
```

然后，要循环，您可以简单地使用 foreach 和/或 LINQ。

```
List<IExecute> entries = new List<IExecute> {new SimpleExecute()};

foreach (var result in entries.Select(x => x.Execute()))
{
} 
```

您尝试实现的目标似乎是正确的，因为您将 IExecute 视为单个接口，但实际上它是在编译时创建的接口的“模板”。

# c# - 用 C# 加密的数据长 1 个字节，无法用 Java 解密

> ID：11729893
> 
> 赞同：1
> 
> 时间：2012-07-30T21:27:43.283
> 
> 标签：c#, java, rsa

我有一个用 Java 编写的服务器，它在发送到客户端之前将其 RSA 密钥转换为 .NET 使用的 XML 格式：

```
public String getPublicKeyXML() {
    try {
        KeyFactory factory = KeyFactory.getInstance("RSA");
        RSAPublicKeySpec publicKey = factory.getKeySpec(this.keyPair.getPublic(), RSAPublicKeySpec.class);

        byte[] modulus = publicKey.getModulus().toByteArray();
        byte[] exponent = publicKey.getPublicExponent().toByteArray();

        String modulusStr = Base64.encodeBytes(modulus);
        String exponentStr = Base64.encodeBytes(exponent);

        String format = 
            "<RSAKeyValue>" +
                "<Modulus>%s</Modulus>" +
                "<Exponent>%s</Exponent>" +
            "</RSAKeyValue>";

        return String.format(format, modulusStr, exponentStr);
    } catch (Exception e) {
        this.server.logException(e);
        return "";
    }
} 
```

客户端用 C# 编写，然后加载密钥并使用它来加密 256 位 AES 密钥：

```
 public static byte[] encrypt(string xmlKey, byte[] bytes)
    {
        RSACryptoServiceProvider rsa = new RSACryptoServiceProvider();
        rsa.FromXmlString(xmlKey);
        byte[] cipherBytes = rsa.Encrypt(bytes, false);
        rsa.Clear();
        return cipherBytes;
    } 
```

然后，服务器应该使用其私有 RSA 密钥解密 AES 密钥：

```
public byte[] decrypt(byte[] data) {
    try {
        PrivateKey privateKey = this.keyPair.getPrivate();
        Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");
        cipher.init(Cipher.DECRYPT_MODE, privateKey);
        byte[] cipherData = cipher.doFinal(data);
        return cipherData;
    } catch (Exception e) {
        this.server.logException(e);
        return new byte[0];
    }
} 
```

但是，服务器失败并显示“数据不得超过 384 字节”的错误。查看要解密的数据，我注意到它是 385 字节。我尝试增加 RSA 密钥长度，现在服务器告诉我数据不能超过 512 字节，而来自客户端的加密数据是 513 字节。为什么加密的数据总是比预期的长一个字节？

编辑：

这是从服务器传输到客户端的示例 XML 格式的密钥：

```
<RSAKeyValue><Modulus>ANsMd2dCF6RsD5v5qjlHEjHm0VWD99gSYHP+pvyU8OgNL9xM5+o+yMAxWISOwMii9vJk1IzYGf18Fj2sMb5BsInlG2boZHb6KHh7v8ObPa4MuwB/U63i8AVU3N/JTugaPH0TKvo1WNUooXEHT23nOk+vh1QipzgKQYGl68qU35vKmpNAa79l1spXA66LckTWal4art9T08Rxgn9cMWujlF+wh9EQKQoxxgj4gCoXWRDTFYjRo/Mp5xDPwNjloTs/vFCPLvY7oI+lVrHhrPyz1R473ZuEhZm+rSeGBcY9I8vhg0AIixN7KYBLhrIecmqoNZHi6LohjD2F9zhdLaTU0IIU8eeKpbEZ5eB1kYngMONBq3A/IoG0Qa/7EcSAMMspBEObffK9kCNzvnbFg5wLuy8EHNaK3nmnuTppgCwCyNqZyHeAbZaUBjNguLhHtqkHFiPJ063Xesj9UbSsCmlBliGTDXWfeJANnjGP6D3R+uLXVy9SZe+cY92JW3eZA2k//w==</Modulus><Exponent>AQAB</Exponent></RSAKeyValue> 
```

我已验证发送的数据与接收的数据相同。

敲掉最后一个字节会导致 BadPaddingException。我也尝试敲掉第一个字节，结果相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T00:59:06.013

我发现了问题。由于某种原因，BigInteger 的 toByteArray() 函数包含前导零。我刚刚从数组中删除了前导零，它现在就像一个魅力！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T22:01:32.790

这不会解决问题（我对其进行了测试无济于事），但我想提醒您注意[RSACryptoServiceProvider](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.aspx)实现了[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)接口，因此应该在完成后[正确处理](https://stackoverflow.com/a/538238/3312)。您的 C#`encrypt`方法可以写得更好（更简洁！），如下所示：

```
 public static byte[] encrypt(string xmlKey, byte[] bytes)
    {
        using (var rsa = new RSACryptoServiceProvider())
        {
            rsa.FromXmlString(xmlKey);
            return rsa.Encrypt(bytes, false);
        }
    } 
```

# javascript - 浏览器中的假滚动条

> ID：11729894
> 
> 赞同：0
> 
> 时间：2012-07-30T21:27:53.970
> 
> 标签：javascript, jquery, css, browser

我想为用户提供滚动浏览内容的体验，但我想动态加载内容，以便他们查看区域中的内容是他们所期望的，但他们正在查看的内容上方或下方没有数据。出于性能原因，我不希望加载该数据。因此，当他们向下滚动时，新数据会加载到他们的视图中，而之前在他们的视图中的数据将被丢弃。向上滚动时也是如此。滚动条应该代表它们在整个内容中的位置，所以使用“无限滚动”或“延迟加载”看起来不像我需要的。

我的解决方案可能是我需要重新设计事物。到目前为止，我的项目是一个十六进制查看器，允许您将二进制文件拖放到它上面。我为每个字节创建 html 元素。当您最终得到一个 1MB 的文件（1,000,000+ DOM 元素）时，这会导致性能问题。一种解决方案是不使用 DOM 元素/字节，但我认为这会使其他功能更难，所以我不想一次显示尽可能多的 DOM 元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:53:21.383

制作一个 div，将溢出设置为滚动或自动。当用户滚动时，您可以更改 div 的内容。您可以查看 yahoo 邮件（基于 JavaScript 的邮件）以了解他们是如何做到的（他们会在您滚动时添加带有电子邮件的行）。

您不一定需要自定义滚动条。

您可以在此处查找自定义滚动条的一些代码： [http ://www.java2s.com/Code/JavaScript/GUI-Components/Scrolltextwithcustomscollbar.htm](http://www.java2s.com/Code/JavaScript/GUI-Components/Scrolltextwithcustomscollbar.htm)

或在这里： [http ://www.dyn-web.com/code/scroll/](http://www.dyn-web.com/code/scroll/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-05T05:39:45.380

我也在寻找这个问题的答案，所以我会分享我在哪里。

我有大量内容要垂直显示并让用户滚动浏览。我可以将它全部加载到 DOM 中并正常滚动，但初始创建阶段非常慢，滚动也非常慢。此外，当我流式传输更多数据时，我将动态添加到它。

所以我想要同样的东西，即能够动态填充和更新内容的非滚动区域。我想让它看起来好像用户正在滚动浏览该内容并拥有一个模型（其中包含大量数据），该模型远离 DOM，直到它被看到。

我想我将使用队列概念来管理可见的 DOM 元素。我会存储 queueHeadIndex 和 queueTailIndex 以记住 DOM 中显示了哪些非 DOM 元素。当用户向下滚动时，我会计算出队列头是否从屏幕上掉下来以及是否更新 queueHeadIndex 并删除它的 DOM 元素。其次，我会确定是否需要更新 q​​ueueTailIndex 并向 DOM 添加新元素。对于当前在 DOM 中的元素，我需要移动它们（不确定它们是否需要动画）。

更新：我发现这似乎有一些承诺[http://jsfiddle.net/GdsEa/](http://jsfiddle.net/GdsEa/)

我目前的想法是这个问题有两个部分。

首先，我想我想禁用滚动并进行某种虚拟滚动。我刚刚开始为此查看[http://www.everyday3d.com/blog/index.php/2014/08/18/smooth-scrolling-with-virtualscroll/ 。](http://www.everyday3d.com/blog/index.php/2014/08/18/smooth-scrolling-with-virtualscroll/)这将捕获所有事件并使我能够以编程方式调整当前可见的内容等，但浏览器实际上不会滚动任何内容。这似乎提供了鼠标滚轮驱动的滚动。

其次，我认为我需要显示一个滚动条。我已经查看了[http://codepen.io/chriscoyier/pen/gzBsA](http://codepen.io/chriscoyier/pen/gzBsA)并且我正在寻找更多看起来更原生的东西。我只想让它直观地显示滚动的位置，并允许用户通过拖动滚动条来调整滚动位置。

Stackoverflow 坚持要我粘贴代码，所以这里是来自上面那个 codepen 链接的一些代码

```
var elem = document.getElementById('scroll-area'),
    track = elem.children[1],
    thumb = track.children[0],
    height = parseInt(elem.offsetHeight, 10),
    cntHeight = parseInt(elem.children[0].offsetHeight, 10),
    trcHeight = parseInt(track.offsetHeight, 10),
    distance = cntHeight - height,
    mean = 50, // For multiplier (go faster or slower)
    current = 0;

elem.children[0].style.top = current + "px"; 
thumb.style.height = Math.round(trcHeight * height / cntHeight) + 'px'; 

var doScroll = function (e) {

    // cross-browser wheel delta
    e = window.event || e;
    var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));

    // (1 = scroll-up, -1 = scroll-down)
    if ((delta == -1 && current * mean >= -distance) || (delta == 1 && current * mean < 0)) {
        current = current + delta;
    }

    // Move element up or down by updating the `top` value
    elem.children[0].style.top = (current * mean) + 'px';
    thumb.style.top = 0 - Math.round(trcHeight * (current * mean) / cntHeight) + 'px';

    e.preventDefault();

};

if (elem.addEventListener) {
    elem.addEventListener("mousewheel", doScroll, false);
    elem.addEventListener("DOMMouseScroll", doScroll, false);
} else {
    elem.attachEvent("onmousewheel", doScroll);
} 
```

我想我会有一个类通过虚拟滚动方法或 ui 来监听滚动事件，然后更新 ui 滚动器和我正在管理的内容的 ui。

无论如何，如果我发现任何更有用的东西，我会更新它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-30T21:47:05.003

我认为避免使用 DOM 元素/字节对我来说将是比创建虚假滚动体验更容易的解决方案。

**更新**：我最终解决了这个问题，如下所述：[Javascript "infinite" scrolling for limited content?](https://stackoverflow.com/questions/13335481/javascript-infinite-scrolling-for-finite-content)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-30T21:48:35.533

您正在使用一些严肃的 javascript，特别是 AJAX 和 JSON 类型的元素。您的问题没有简单的答案。你需要在这个主题上做很多研发。

# vba - 收件箱中的项目声明为 mailitems 时出现类型不匹配错误

> ID：11729903
> 
> 赞同：1
> 
> 时间：2012-07-30T21:28:27.547
> 
> 标签：vba, outlook

如果邮件是旧的，我在 Outlook 中有以下 VBA 代码可以将邮件移动到个人文件夹。这是代码：

我在 Next objItem 行上遇到了一个异常（查看它设置为空的手表）。

什么会导致 objItem 为空，从而导致**Next objItem行中的****类型不匹配**异常？

 **```
Sub MoveOldMailFromInbox()

Dim objFolder As Outlook.MAPIFolder
Dim objNS As Outlook.NameSpace, objItem As Outlook.MailItem, mail As Outlook.MailItem

Set objNS = Application.GetNamespace("MAPI")

Dim Inbox As MAPIFolder
Set Inbox = objNS.GetDefaultFolder(olFolderInbox)

Dim mailToMove As New Collection

Dim EightyFiveDaysAgo As Date
EightyFiveDaysAgo = DateAdd("d", -85, Date)

Set objFolder = objNS.Folders("PersonalFolders").Folders("InboxOlderThan85Days")
If objFolder Is Nothing Then
    MsgBox "This folder doesn't exist!", vbOKOnly + vbExclamation, "INVALID FOLDER"
End If

For Each objItem In Inbox.Items
    If objFolder.DefaultItemType = olMailItem Then

        If objItem.Class = olMail And objItem.ReceivedTime < EightyFiveDaysAgo Then

            mailToMove.Add objItem

        End If
    End If
Next objItem

For Each mail In mailToMove
    mail.UnRead = False
    mail.Move objFolder
Next mail

Set objItem = Nothing
Set objFolder = Nothing
Set objNS = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T21:38:39.877

您正在迭代，`Inbox.Items`但您的变量`objItem`被定义为`MailItem`- 收件箱中的项目可能并不总是 MailItem。

尝试

```
Dim objItem as Object 
```**

# javascript - 在谷歌地图中找到隐藏的标记

> ID：11729908
> 
> 赞同：0
> 
> 时间：2012-07-30T21:29:15.530
> 
> 标签：javascript, json, google-maps, google-maps-api-3

所以我找到了一张只有缩放按钮的自定义地图，其中标记仅以 100% 缩放显示。这不是很方便，所以也许有一些方法可以在正常缩放时显示所有标记？一些我可以添加到 url 或类似的 js 代码？Оr 可能在源代码的某个地方是标记的坐标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:35:47.690

简短的回答：不，不是真的，除非你查看源代码:)

答案有点长：我认为你想在网页的查询字符串中写一些东西，然后查看标记。如果制作该网站的人已经编写了代码来做到这一点，这当然是可能的，但我认为他不会。

唯一的可能性是查看页面的源代码，看看您是否可以找到某种包含标记的数组。如果您找到一个这样的数组，您可以使用调试工具来执行您自己的 JS，您可以在其中运行数组并在所有标记上运行 .setVisible(true)。

这有点像一个大黑客，我相信网站的所有者有充分的理由不显示标记，除非你放大，所以我不会弄乱它，除非它真的很重要。如果您想要完整的标记列表，您应该询问网站的所有者。

# xml - Clojure 哈希映射到 xml

> ID：11729910
> 
> 赞同：2
> 
> 时间：2012-07-30T21:29:20.133
> 
> 标签：xml, clojure, hashmap

我正在尝试将以下映射转换为 xml（具有向量值的任何键都需要为向量中的每个元素重复 xml 中的键）

```
(use 'clojure.xml)
(defn map-to-xml2 [k v]
      (cond
         (nil? k)    (for [[e a] v] {:tag e :content (map-to-xml2 e a)})
         (map? v)    (for [[e a] v] {:tag e :content (map-to-xml2 e a)})
         (vector? v) (for [x v] {:tag k :content (for [[e a] x] {:tag e :content (map-to-xml2 e a)})})
         :else       [(str v)]))

(def studios [{:company {:name "Acme Corp" :id 1 :rank 20 :employee 
                  [{:fname "Mark" :lname "Jones"} {:fname "Leroy" :lname "Bell"}]}}
              {:company {:name "Eastwood Studios" :id 2 :rank 35 :employee 
                  [{:fname "Lee" :lname "Marvin"} {:fname "Clint" :lname "Eastwood"}]}}])

(->> studios first (map-to-xml2 nil) first emit with-out-str (spit "acme.xml"))
(->> studios second (map-to-xml2 nil) first emit with-out-str (spit "eastwood.xml")) 
```

我得到以下xml

```
<?xml version='1.0' encoding='UTF-8'?>
<company>
  <rank>35</rank>
  <employee>
    <employee>
      <lname>Marvin</lname>
      <fname>Lee</fname>
    </employee>
    <employee>
      <lname>Eastwood</lname>
      <fname>Clint</fname>
    </employee>
  </employee>
  <name>Eastwood Studios</name>
  <id>2</id>
</company> 
```

当我真正需要通过肥皂发送的是

```
<?xml version='1.0' encoding='UTF-8'?>
<company>
  <name>Eastwood Studios</name>
  <id>2</id>  
  <rank>35</rank>
  <employee>
    <lname>Marvin</lname>
    <fname>Lee</fname>
  </employee>
  <employee>
    <lname>Eastwood</lname>
    <fname>Clint</fname>
  </employee>
</company> 
```

我如何更正上述内容？

我正在尝试从 excel 文件中读取数据，并为具有相同 id 的每一行或每组行进行 web 服务调用，然后使用响应更新电子表格。以上就是生成webservice调用需要的xml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T22:47:20.020

您的输入与地图中 :employee 关键字下的员工列表有一层额外的嵌套。如果将该封闭结构更改为列表，则可以将整个树展平一层。

```
{:company {:name "Acme Corp" :id 1 :rank 20 :employee 
              [{:fname "Mark" :lname "Jones"} {:fname "Leroy" :lname "Bell"}]}} 
```

变成这样：

```
{:company [{:name "Acme Corp"} 
           {:id 1} {:rank 20} 
           {:fname "Mark" :lname "Jones"} 
           {:fname "Leroy" :lname "Bell"}]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:29:53.457

您可能已经知道的主要问题是，当内容（即`v`在程序主体中）是向量时，您必须进行某种`(for ...)`或`(map ...)`表达式才能真正表达它的所有标签和内容。但是，这样做会生成*一系列*标签，这些标签被打包在讨厌的括号内。据我所知，您需要“取消”那些以获得正确的结构以传递给`(emit-element ...)`.

因此，在我下面的代码中，表达式`(mapcat to-xml ...)`位于需要嵌套的地方，因为这将执行连续项的操作，然后将它们连接在一起。不幸的是，您必须将过去的单项返回值放入向量（或列表，如果需要）。这就是为什么当何时`(map? v)`为真或何时`:else`发生时，整个`(tag-xml ...)`表达式被包裹在一个向量中。任何退货都将`concat`与其他退货一起使用。

我想我找到了适合你的东西。在我看来，这不是*很好*，因为我不喜欢它处理顶级调用的方式——即您将在代码中进行的调用（但我稍后会谈到）：

```
(defn tag-xml
  [tag content]
  {:tag tag
   :content content})

(defn to-xml
  ([[k v]] ;//This form of to-xml is for the sake of nested calls
    (cond
      (map? v) [(tag-xml k (mapcat to-xml v))]
      (vector? v) (for [x v] (tag-xml k (mapcat to-xml x)))
      :else [(tag-xml k [(str v)])]))
  ([k v] ;//This form of to-xml is only for the sake of the top level call
    (tag-xml k (if (map? v) (mapcat to-xml v) [(str v)])))) 
```

请注意，我添加了一个辅助函数`tag-xml`。这只是为了让身体`to-xml`更干净更小。

这就是你可以使用它的方式（尽管在你的情况下，你会`println`用一些`spit`电话代替）：

```
=> (->> studios ffirst (apply to-xml) emit with-out-str println))
<?xml version='1.0' encoding='UTF-8'?>
<company>
<rank>
20
</rank>
<employee>
<lname>
Jones
</lname>
<fname>
Mark
</fname>
</employee>
<employee>
<lname>
Bell
</lname>
<fname>
Leroy
</fname>
</employee>
<name>
Acme Corp
</name>
<id>
1
</id>
</company>
=> nil 
```

所以，我不喜欢这样，为了从顶层正确调用它，到一些现有的 hash-map `data`，你需要做`(apply to-xml (first data))`. 您*可以*通过将数据构造为向量而不是将数据作为哈希映射来解决此问题。在你的例子中，这看起来像`[:company ...]`而不是`{:company ...}`每个工作室`studios`。然后，您可以使用这样的函数：`(first (to-xml data))`.

尽管如此，这并不像我希望的那样优雅。也许解决方案是拥有一些`to-xml`可以进行顶级调用的函数，以及`-to-xml`之后处理它的一些其他函数。作为用户，您只会使用`to-xml`，但所有艰苦的工作都将在`-to-xml`. 我也不喜欢这个想法。另一个想法是做一些有点像你所做的事情，如果第一个参数等于，`nil`那么它就像一个顶级调用一样执行函数。唔。

无论如何，它有效，所以就是这样。

**编辑**
至于想要保留订单，您可能必须重新定义您的数据，或者在使用`to-xml`. 你不能依赖任何写成的顺序`{...}`。如果要将其保留为地图，则*可以*通过将其设为数组地图或排序地图来获得订单。

如果您要重新定义它以使其成为数组映射，它将如下所示：

```
(def studios [(array-map :company (array-map :name "Acme Corp" :id 1 :rank 20
                         :employee [(array-map :fname "Mark" :lname "Jones")
                                    (array-map :fname "Leroy" :lname "Bell")]))
              (array-map :company (array-map :name "Eastwood Studios" :id 2 :rank 35
                         :employee [(array-map :fname "Lee" :lname "Marvin")
                                    (array-map :fname "Clint" :lname "Eastwood")]))]) 
```

基本上，您曾经拥有的任何地方`{...}`现在都拥有`(array-map ...)`. 在这一点上，我应该说，不要费心尝试编写一个宏来为你做这件事，它不会起作用（[关于我的问题，请参见这里](https://stackoverflow.com/questions/11130460/clojure-macro-that-will-conserve-associative-map-order)）。如果您想使用排序映射，则必须创建一个谓词比较器，该比较器仅返回`true`或`false`基于一些硬编码的顺序，这对我来说似乎有点奇怪。

现在，如果要转换数据，您将需要另一个包含关键订单和嵌套订单的数据结构。就像是：

```
(def studio-order-specs {:company [:name :id :rank {:employee [:lname :fname:]}]}) 
```

我手头没有转换函数，但是使用这个数据结构，您应该能够编写一些东西来将哈希映射转换为指定排序的数组映射。（您也可以使用它来转换为指定顺序的排序映射，但同样，这将是通过以一种不优雅的方式定义谓词——在我看来。）

# javascript - 未捕获的 TypeError 无法将属性“src”设置为 null

> ID：11729915
> 
> 赞同：1
> 
> 时间：2012-07-30T21:29:45.457
> 
> 标签：javascript, html

所以在我的谷歌浏览器[新网站](http://ilanshomekitchen.x10.mx/new)上，我试图使用 setInterval 函数每 5 秒切换一次图像。这似乎可行，但是我遇到的问题是无法将属性 src 设置为 null。

```
var images = new Array();
images[0] = "/images/grilled-chicken-large.png";
images[1] = "/images/sizzly-steak.png";
var img = document.getElementById("img");

function changeImage() {
     for (var i = 0; i < 3; i++) {
        img.src = images[i];
        if (i == 2){i = i - 2;};
     }
}

window.onload=setInterval("changeImage()", 5000); 
```

我知道问题是我试图在页面加载完成之前获取 id 为 img 的元素，但我已经有了一个 window.onload，所以我不知道该怎么做。另外，如果我创建一个包含 setInterval 和 img 变量的 init() 函数，页面就会冻结。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T21:34:57.513

问题是您访问`2`的数组元素只有两个元素（0 和 1）。

但是您的脚本中也存在逻辑错误：您将当前可见图像的索引存储在哪里？您需要一个保存该索引的全局变量。

```
var currentIndex = 0;
function changeImage() {
    // Switch currentIndex in a loop
    currentIndex++;
    if (currentIndex >= images.length)
        currentIndex = 0;

    var img = document.getElementById("img");
    img.src = images[currentIndex];
}

document.onload = function() {
    setInterval(changeImage, 5000);
} 
```

我已将`img`变量移动到函数中，以便在文档加载后五秒钟后分配它。

澄清一下：JavaScript 是一种基于事件的编程语言。这意味着每次间隔触发时都会执行幻灯片更改代码，执行一些工作（切换到下一张幻灯片）然后完成，以便浏览器可以呈现页面。如果循环遍历幻灯片，浏览器将无法显示新幻灯片，因为脚本仍在幻灯片之间执行。解决方案就是我发布的内容：定义一个替换循环变量的全局变量，并在每次显示下一张幻灯片时递增它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:38:32.187

这里：

```
window.onload = function () {

    var images = [
        'http://placekitten.com/100/200',
        'http://placekitten.com/200/100',
    ];

    var img = document.getElementById( 'img' );

    setInterval(function () {
        img.src = img.src === images[0] ? images[1] : images[0];
    }, 1000 );

}; 
```

**现场演示：http:** [//jsfiddle.net/wkqpr/](http://jsfiddle.net/wkqpr/)

* * *

如果你有两个以上的图像，你可以这样做：

```
window.onload = function () {

    var images = [
        'http://placekitten.com/100/200',
        'http://placekitten.com/200/100',
        'http://placekitten.com/200/150',
        'http://placekitten.com/150/300'
    ];

    images.current = 0;

    var img = document.getElementById( 'img' );

    setInterval(function () {
        img.src = images[ images.current++ ];
        if ( images.current === images.length ) images.current = 0;       
    }, 1000 );

}; 
```

**现场演示：http:** [//jsfiddle.net/wkqpr/1/](http://jsfiddle.net/wkqpr/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T21:36:58.513

你的 for 循环看起来很奇怪。试试那个循环：

```
function changeImage(){
  if(!img.attributes["index"]){img.attributes["index"]=0;return;};
  img.attributes["index"]++;
  img.src=images[img.attributes["index"]];
}
window.onload=function(){
  window.img=document.getElementById("img");
  setInterval("changeImage()",5000)
} 
```

应该管用。
您会注意到我将图像索引存储在图像的属性中，而不是全局变量。我认为全局稍微快一些，但将其存储在图像中意味着如果需要，您可以轻松地将其扩展到多个图像。此外，您的浏览器冻结的问题是以下代码：

```
for(var i=0;i<3;i++){
  //Some more stuff
  if(i==2){i-=2};
} 
```

这个循环是无限的，因为无论何时`i`到达`2`，`i==2`都变为真，这意味着迭代将重置`i`为`0`并重新开始。防止这种情况的唯一方法是在`break;`某个地方，我在任何地方都看不到。提示：在 for 循环中篡改索引变量通常是个坏主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T21:53:30.727

```
function changeImage() 
{
    for (var i = 0; i < 2; i++) 
    {
        img.src = images[i];
     }
}

window.onload=function()
{
    setInterval(changeImage,5000);
} 
```

您在 for 循环中的最后一行完全没用，只会使事情复杂化，此外，您设置窗口 onload 事件的方式也不标准！

编辑：该`src`属性为空，因为很明显，您的数组大小只有 2！

# android - TypedArray中的getDrawable（）返回null？

> ID：11729918
> 
> 赞同：9
> 
> 时间：2012-07-30T21:30:01.663
> 
> 标签：android, drawable, custom-component, attr

我在我的`TypedArray.getDrawable()`一个 custom 中遇到了一个奇怪的问题`View`。为简单起见，这是一个显示相同问题的简单测试项目：

**测试视图.java**

```
package com.example.testing;

import android.content.Context;
import android.content.res.TypedArray;
import android.graphics.Canvas;
import android.graphics.drawable.Drawable;
import android.util.AttributeSet;
import android.view.View;

public class TestView extends View {

    private Drawable mDrawable;

    public TestView(Context context) {
        this(context, null);
    }

    public TestView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public TestView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.TestView, defStyle, 0);
        try {
            Drawable d = a.getDrawable(R.styleable.TestView_testDrawable);
            if (d != null) {
                setDrawable(d);
            }
        } finally {
            a.recycle();
        }
    }

    private void setDrawable(Drawable d) {
        mDrawable = d;
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        if (mDrawable != null) {
            mDrawable.draw(canvas);
        }
    }
} 
```

**资源/值/attrs.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>    
    <declare-styleable name="TestView">
        <attr name="testDrawable" format="reference|color" />
    </declare-styleable>
</resources> 
```

**res/layout/main_activity.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:custom="http://schemas.android.com/apk/res/com.example.testing"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

     <com.example.testing.TestView
         android:id="@+id/testView1"
         android:layout_width="match_parent"
         android:layout_height="100dp"
         custom:testDrawable="#ff0099" />
</LinearLayout> 
```

我没有看到可爱的粉红色矩形（在布局编辑器和实际设备上都没有）。我不明白出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:48:37.023

我检查了你的代码，`mDrawable`它不为空，但它的大小是 -1 x -1。

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    mDrawable.setBounds(0, 0, View.MeasureSpec.getSize(widthMeasureSpec), View.MeasureSpec.getSize(heightMeasureSpec));
} 
```

这对我有用。我不知道这是否是您想要的，但也许这是一个起点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:43:38.617

这就是我之前处理类似案例的方式（我为您的代码稍微修改了它）：

```
TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.TestView, defStyle, 0);
TypedValue value = a.peekValue(R.styleable.TestView_testDrawable);
if (value != null) {
    if (value.type == TypedValue.TYPE_REFERENCE ||
        value.type == TypedValue.TYPE_STRING) {
        Drawable d = a.getDrawable(R.styleable.TestView_testDrawable);
        if (d != null) {
            setDrawable(d);
        }
    }
    else
    if (value.type == TypedValue.TYPE_INT_COLOR_ARGB8 ||
        value.type == TypedValue.TYPE_INT_COLOR_ARGB4 ||
        value.type == TypedValue.TYPE_INT_COLOR_RGB8  ||
        value.type == TypedValue.TYPE_INT_COLOR_RGB4) {
        Drawable d = new PaintDrawable(a.getColor(R.styleable.TestView_testDrawable, 0xFF000000));
        if (d != null) {
            setDrawable(d);
        }
    }
} 
```

# iphone - 如何以编程方式获取 UINavigationBar 标题的大小？

> ID：11729919
> 
> 赞同：-1
> 
> 时间：2012-07-30T21:30:01.363
> 
> 标签：iphone, cocoa-touch, uinavigationbar

在 UIViewController 中，我需要在 UINavigationBar 标题的左边缘放置一个图形。在下图中，星号表示该点。

```
 ____________________________
|                            |
| <back|     *Title          |
|____________________________| 
```

我认为计算该点的 x 坐标的一个好方法是这个公式：

```
self.view.frame.size.width / 2.0 - titleWidth / 2.0 
```

如果我能提取 UINavigationBar 的 titleTextAttributes 的 UIFont，我就能得到标题的 CGSize。

```
CGSize titleSize = [self.title 
    sizeWithFont:(UIFont*)[self.navigationController.navigationBar.titleTextAttributes      
    objectForKey:@"font"]]; 
```

令我沮丧的是，UIFont 为零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:33:31.093

如何查看`UINavigationBar`的子视图直到找到 a `UITextField`，然后检查它的大小？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:33:55.257

误读/不读文档？UIFont 是通过指针使用的正确的 Objective-C 类。

利用：

```
(UIFont *)[titleTextAttributes objectForKey:@"font"]; 
```

反而。

# django - django管理模型syncdb不工作

> ID：11729924
> 
> 赞同：1
> 
> 时间：2012-07-30T21:30:19.817
> 
> 标签：django, django-models, django-admin

以下 Python 代码会产生错误：

```
class Post(models.Model):
    author = models.CharField(max_length=40,blank=False,default="")
    title = models.CharField(max_length=100,blank=False,default="")
    content = models.TextField(blank=False,default="")
    #   status = models.CharField(max_length=100,blank=False,default="draft")
    published = models.BooleanField(default = False)
    date_created = models.DateTimeField()
    date_modified = models.DateTimeField()

    def save(self):
        if self.date_created == None:
            self.date_created = datetime.now()
            self.date_modified = datetime.now()
            super(Post, self).save() 
```

这是我收到的错误消息。

```
 raise DeserializationError(e) 
```

我试过的：

在 suncdb 上它会引发错误

我的问题：

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T22:11:27.880

我的应用程序曾经遇到过同样的错误，但有一个小改动：syncdb 没有抛出任何错误。但是当我尝试访问模型时，我得到了那个错误。无论如何，为我解决的问题是：

```
python manage.py reset [appname]
python manage.py syncdb 
```

希望它也可以帮助你。如果您有任何数据，您应该将其导出为 JSON，这样您就不会在重置时丢失它。

使用以下命令制作一个夹具（json）：

```
mkdir APPName/fixtures
python manage.py dumpdata APPName --format=json > APPName/fixtures/OriginalData.json 
```

重新加载数据`syncdb`

你可以在这里阅读更多关于它的信息：[https ://code.djangoproject.com/wiki/Fixtures](https://code.djangoproject.com/wiki/Fixtures)

# webfonts - 购买的开放式字体可以用作网络字体吗？

> ID：11729926
> 
> 赞同：0
> 
> 时间：2012-07-30T21:30:24.890
> 
> 标签：webfonts

我希望确认，如果我从代工厂购买了一种开放式字体，然后我可以使用@font-face 命令在网络上使用它。

这是真的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:37:09.420

这是正确的，更多阅读[这个](http://www.css3.info/preview/web-fonts-with-font-face/)。但是客户端浏览器需要支持@font-face。

# html - 媒体查询和默认函数更改

> ID：11729929
> 
> 赞同：1
> 
> 时间：2012-07-30T21:30:46.170
> 
> 标签：html, css, responsive-design, media-queries

我想问一个与某个网站功能有关的问题。

[http://kccreepfest.com/](http://kccreepfest.com/)

我想知道这个网站是如何使用响应式设计并在桌面上的浏览器发生变化时维护它的。

但是在手机上打开时，是结构化的响应式设计。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:42:23.877

他们有相当多的 js 正在进行，但在大多数情况下，这是关键行： `var _isMobile = navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad|android|webos)/) ? true : false;`

他们正在检查用户代理是否匹配 iphone/ipod 等，如果匹配，则将其存储在一个变量中，然后在该变量上播放以附加（或不附加）某些类。

# python - 是否可以直接从 MongoDB 获取 JSON 字符串？

> ID：11729931
> 
> 赞同：2
> 
> 时间：2012-07-30T21:30:58.490
> 
> 标签：python, mongodb, pymongo

我想知道是否有一种方法可以使用 PyMongo 或其他方法直接从 MongoDB 获取 JSON 字符串。使用 PyMongo 'db.collection.find' 首先返回一个字典，然后我必须使用 Python 的 JSON 模块将其转换为 JSON。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:51:40.277

MongoDb 是 BSON 而不是 JSON，因此我不相信您在控制台中看到的直接转换（实际上转换为 JSON 的方式与您在 python 中所做的相同）。稍后将其转换为 JSON 是您最好的选择。有一些关于在驱动程序中包含 __toJSON() 函数的讨论，但讨论通常以以下行结束：

“这在客户端更好”。

# shell - TortoiseHg 是否允许将 CLI（即“日志输出”）替换为 Windows 上的 Powershell

> ID：11729935
> 
> 赞同：1
> 
> 时间：2012-07-30T21:31:14.950
> 
> 标签：shell, powershell, mercurial, tortoisehg

我使用 TortoiseHg 中的“日志输出”窗口从命令行访问 Mercurial 的高级功能，将其与 Powershell 功能一起使用会很好，例如，至少[为“mq”命令起别名](http://mercurial.selenic.com/wiki/MqTutorial#Versioning_our_patch_set)。

是否可以指定日志输出窗口中使用的命令主机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T13:25:44.160

目前在 TortoiseHg 的 2.4 版本中没有这种可能性。如果您真的需要任何高级支持，只需向 TortoiseHg[邮件列表](https://lists.sourceforge.net/lists/listinfo/tortoisehg-discuss)提出建议即可。

看来，无论如何，在 2.5 输出日志窗口中都会进行[大量升级。](https://bitbucket.org/tortoisehg/thg/changesets/tip/keyword%28%22docklog%22%29)

# php - jq_link_to_remote 提交表单

> ID：11729937
> 
> 赞同：1
> 
> 时间：2012-07-30T21:31:21.657
> 
> 标签：php, jquery, ajax, symfony1, symfony-1.4

如何使用 jq_link_to_remote 通过 POST 提交表单并更新 div？

测试成功.php

```
 <div id="list">
 <form name="list" action="<?= url_for('shoppinglist/update'); ?>" method="post">
 .
 //some input text.
 .
 <?php
 function addlink() {

$linkname = "+";
 return jq_link_to_remote($linkname, array(
    'update' => 'list',
    'url' => 'shoppinglist/update',
    'data' => 'list', //this might be the problem.
    'loading' => jq_visual_effect('fadeIn', '#indicator'),
    'complete' => jq_visual_effect('fadeOut', '#indicator'),
    'method' => 'post',
 ));

}
echo addlink();
?>
<INPUT TYPE="button" VALUE="Cart" onClick="submitForm()">
</form>
</div> 
```

## 更新

当我使用这个时：

```
<?php
echo form_remote_tag( array(
'url'      => '@shoppinglist/update', // even when I don't type "@“
'update'   => 'list',
'loading'  => jq_visual_effect('fadeIn', '#indicator'),
'complete' => jq_visual_effect('fadeOut', '#indicator'),
 ));
 ?> 
```

错误：调用未定义的函数 form_remote_tag()

当我使用这个时：

```
function addlink() {

$linkname = "+";
 return jq_form_remote_tag($linkname, array(
     'url' => '@shoppinglist/update', // even when I don't type "@“
    'update' => 'list',
    'loading' => jq_visual_effect('fadeIn', '#indicator'),
    'complete' => jq_visual_effect('fadeOut', '#indicator'),
    'method' => 'post',
 ));

}
//I just echo a link!
echo  addlink(); 
```

错误：注意：未定义索引：url in ... JQueryHelper.php 第 353 和 410 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:18:24.463

你为什么不[`jq_form_remote_tag`](http://trac.symfony-project.org/browser/plugins/sfJqueryReloadedPlugin/1.2/trunk/lib/helper/jQueryHelper.php#L394)改用？

```
<?php echo jq_form_remote_tag(array(
  'url'      => 'shoppinglist/update',
  'update'   => 'list',
  'loading'  => jq_visual_effect('fadeIn', '#indicator'),
  'complete' => jq_visual_effect('fadeOut', '#indicator'),
)) ?> 
```

我不明白 和 之间的`addlink`区别`submitForm`？

**编辑：**

好吧，你应该这样设置你的模板

```
<div id="list">
  <?php echo jq_form_remote_tag(array(
  'url'      => 'shoppinglist/update',
  'update'   => 'list',
  'loading'  => jq_visual_effect('fadeIn', '#indicator'),
  'complete' => jq_visual_effect('fadeOut', '#indicator'),
  )) ?>

    //some input text.

    <input type="submit" value="Cart" />
  </form>
</div> 
```

# jquery-selectors - jQuery选择标签IE8问题

> ID：11729938
> 
> 赞同：0
> 
> 时间：2012-07-30T21:31:25.730
> 
> 标签：jquery-selectors

我有两个选择，最初在 Firefox 和 IE8 中都以这种方式呈现：

```
<select id="cntctMap_PRSNL_TITL_TXT" >
<option value="Dr.">Dr.</option>
<option value="Ms.">Ms.</option>
<option value="Mrs.">Mrs.</option>
<option selected="" value="Mr.">Mr.</option>
</select>

<select id="cntctMap_CUST_SEGM_US_RETAIL_SALES_SMA"">
<option value="01">Focus</option>
<option value="02">Prospect</option>
<option value="03">Center Of Influence</option>
</select> 
```

到目前为止，只有第一个选择具有从服务器端返回的值，第二个没有。

在文档加载时，我将 html 拉到第二个选择中，即`$("#cntctMap_CUST_SEGM_US_RETAIL_SALES_SMA").html());`

在 IE 中返回的字符串是：

```
<option selected value="01">Focus</option><option value="02">Prospect</option><option value="03">Center Of Influence</option> 
```

注意'selected'属性

但在 Firefox 中是：

```
<option value="01">Focus</option><option value="02">Prospect</option><option value="03">Center Of Influence</option> 
```

这对我很重要的原因是我想添加一个选项，即

```
$("#cntctMapCUST_SEGM_US_RETAIL_SALES_SMA").prepend(selectOption); 
```

并在下拉框中显示前置选项值，但我只想对那些没有服务器端值的选择执行此操作。

在 IE 中，我不知道哪个是哪个，因为在所有情况下都会返回“已选择”。`$("#cntctMap_CUST_SEGM_US_RETAIL_SALES_SMA option:selected"));`如果我在 IE 中使用，这也是如此，它总是返回一个“选定”选项。

有人知道解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T23:27:03.023

正如评论中所讨论的，我建议向`has-default`具有服务器端值的选择添加一个特殊的类（例如）。当您呈现标签时，这是在服务器端完成的。

```
<select id="cntctMap_PRSNL_TITL_TXT" class="has-default">
<option value="Dr.">Dr.</option>
<option value="Ms.">Ms.</option>
<option value="Mrs.">Mrs.</option>
<option selected="" value="Mr.">Mr.</option>
</select>

<select id="cntctMap_CUST_SEGM_US_RETAIL_SALES_SMA">
<option value="01">Focus</option>
<option value="02">Prospect</option>
<option value="03">Center Of Influence</option>
</select>

... 
```

使用 jQuery，您可以使用服务器端值来定位选择：

```
$('select.has-default').prepend(selectOption); 
```

上面的语句只会`selectOption`添加到具有`has-default`类的选择之前。这更加一致，因为它不依赖于浏览器是否与`<option>`标签混合。

# objective-c - 本地化 NSStrings 和 NSStrings 比较

> ID：11729939
> 
> 赞同：2
> 
> 时间：2012-07-30T21:31:26.643
> 
> 标签：objective-c, ios, nsstring, ios5, nslocalizedstring

我有一个关于 NSStrings 的小问题。我目前正在制作一个应用程序，开发语言是英语。我有一个这样的字符串：

NSLocalizedString(@"取消", @"取消字符串");

之后我打算将此应用程序本地化为西班牙语，所以我需要这样做。现在，我遇到的问题是我需要将此特定字符串与另一个字符串进行比较。所以假设我有这个：

```
NSString *cancelString = NSLocalizedString(@"cancel", @"cancel string"); 
```

我可以像这样将此字符串与另一个字符串进行比较吗？：

```
[cancelString isEqualToString:@"cancel"]; 
```

它会正常工作吗？或者如果用户在西班牙语中使用我的应用程序会发生什么（所以 cancelString 说“取消”而不是“取消”）？equalToString 是否仅与应用程序的基本语言进行比较？

希望我很清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T21:45:42.667

尽管可能有更好的方法来实现您在这里尝试进行的比较，但您应该与 NSLocalizedString(@"cancel", @"whatever") 进行比较，因为在预处理器运行并且您的 ' isEqualToString' 只会比较方法的两个结果（字符串与字符串）。

```
NSString *cancelString = NSLocalizedString(@"cancel", @"cancel string");

[cancelString isEqualToString:NSLocalizedString(@"cancel", @"cancel string")]; 
```

应该管用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-20T13:29:32.493

你可以试试localizedCompare

```
NSString *cancelString = NSLocalizedString(@"cancel", @"cancel string");
bool areEqual = ([cancelString localizedCompare:@"cancel"] == NSOrderedSame); 
```

参考：[https](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/localizedCompare) ://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/localizedCompare ：

# iphone - 在横向时呈现 UIViewController

> ID：11729946
> 
> 赞同：0
> 
> 时间：2012-07-30T21:31:59.857
> 
> 标签：iphone, ios, uiviewcontroller, modalviewcontroller, uideviceorientation

仅当设备处于横向模式时才显示 UIViewController 的最佳方式是什么？当设备处于横向模式时，模态视图控制器应以模态方式呈现，并在返回纵向模式时自行关闭。

由于`- (BOOL)shouldAutorotateToInterfaceOrientation :(UIInterfaceOrientation)toInterfaceOrientation`只调用一次（而不是每次调用`UIViewController`），导航控制器应该如何设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:40:11.243

您正在寻找的方法是

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)o duration:(NSTimeInterval)t; 
```

# python - Django memcached 不一致

> ID：11729954
> 
> 赞同：1
> 
> 时间：2012-07-30T21:32:52.060
> 
> 标签：python, django, memcached, tornado

所以，这个问题比较复杂。我会尽力解释。任何帮助将不胜感激。提前致谢！

我正在构建一个使用tornadio2 + Memcached 的应用程序，并且在尝试从缓存中提取时发现了一些令人困惑的事情。

对于初学者，这是我的 broadcast_to_players() 函数：

```
def broadcast_to_players(self, g_id, event, message, update_secret=False, dont_update_self=False):
    the_game = cache.get(g_id)
    for player in the_game.player_list:
        if update_secret == True:
            secret = self.get_secret()
            message['k'] = secret
            player.secret_key = secret
        if dont_update_self == True:
            if not self.session_id == player.session_id:
                single_session = self.session.server._sessions.get(player.session_id)
                single_session.conn.emit(event, message)
        else:
            single_session = self.session.server._sessions.get(player.session_id)
            single_session.conn.emit(event, message)
    cache.set(g_id, the_game)

    ## FOR TESTING PURPOSES ##
    if update_secret == True:
        other_game = cache.get(g_id)
        for player in other_game.player_list:
            print "player.secret_key in broadcast_to_players = %s" % player.secret_key 
```

如您所见，它从缓存中获取 the_game，对其进行处理，修改消息，更新我的 player_list 中的玩家，然后发送消息。然后，它将游戏设置在缓存中。之后，（出于测试目的）我再次抓取它并测试以查看每个玩家的 secret_key 值是否在缓存中。他们做到了。

但是，当我再次尝试从缓存中抓取相同的游戏时，它会显示 secret_key = None

```
def check_player(self, g_id, key):
    the_game = cache.get(g_id) #I'm able to 
    the_player = None
    for player in the_game.player_list:
        if player.secret_key == key:
            the_player = player
    return the_player 
```

游戏正在被缓存，但 player_list 没有在 Game 模型中更新。这是我的游戏和玩家模型：
[http://pastebin.com/t66qgeeb](http://pastebin.com/t66qgeeb) - 游戏模型
[http://pastebin.com/7FjpeSLx](http://pastebin.com/7FjpeSLx) - 玩家模型

如您所见，Player 模型通过 User 与 Game 具有多对多的关系。此外，我在 Django 模型类中保留了许多非持久变量（用于正在玩的游戏）。我的猜测是这可能与我正在抓取与我的游戏相关的所有玩家，将它们放入 player_list，然后尝试更新它们的事实有关？而且 memcached 没有做那么深的副本？我不知道，我一直在绞尽脑汁想弄清楚。任何帮助都将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:03:33.933

行。让我们逐点移动：

1.  不要将大对象放在 memcached 中 - 您将很有可能错过。
2.  在这种情况下 - 拆分键。您必须拥有一把游戏钥匙、一把钥匙玩家列表以及游戏中每个玩家的钥匙。
3.  通过密钥将播放器存储在内存缓存中`player_<g_id>_<key>`- 然后您将能够轻松获取播放器。

让我们把它们放在一起：

```
def broadcast_to_players(self, g_id, event, message, update_secret=False, dont_update_self=False):
    the_game = cache.get(g_id)
    player_list = cache.get('game_%s_players' % g_id) #Getting list of players ids
    for player_key in player_list:
        player = cache.get('game_%s_%s' % (g_id, player_key))
        if update_secret == True:
            secret = self.get_secret()
            message['k'] = secret
            player.secret_key = secret
            player.save() #We are storing secret in db, right?
            cache.set('game_secret_%s_%s' % (g_id, secret), player_key) #Making player availiable in game by secret
            cache.set('player_%s_secret' % (player_key, ), secret) #Making player secret available by player id
        if dont_update_self == True:
            if not self.session_id == player.session_id:
                single_session = self.session.server._sessions.get(player.session_id)
                single_session.conn.emit(event, message)
        else:
            single_session = self.session.server._sessions.get(player.session_id)
            single_session.conn.emit(event, message)
    cache.set(g_id, the_game)

def check_player(self, g_id, key):
    return cache.get('game_secret_%s_%s' % (g_id, key)) 
```

在使用键/值存储时，您应该如何思考只是一个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:51:33.417

您的“用于测试目的”部分并没有真正测试任何东西。它不仅遍历属于*原始*“the_game”对象的玩家列表，而不是刚刚从缓存中获取的“other_game”，打印语句还打印局部变量“secret”的值，而不是值player.secret_key 的。

# ruby - 进行 MongoDB 查询时，Sinatra 无法将 Symbol 转换为 Integer

> ID：11729955
> 
> 赞同：2
> 
> 时间：2012-07-30T21:32:55.393
> 
> 标签：ruby, mongodb, sinatra, typeerror

这是我关于洪流索引器的其他 MongoDB 问题的一种后续。

我正在制作一个开源 torrent 索引器（本质上就像一个迷你 TPB），并且目前为后端提供 SQLite 和 MongoDB。

但是，我在其中的 MongoDB 部分遇到了麻烦。在 Sinatra 中，我![这个错误](../Images/f567e7358151b3c62a0b250aab627c27.png)在尝试上传种子或搜索种子时得到。

在上传时，需要标记 torrent - 它在这里失败了。添加标签的代码如下：

```
def add_tag(tag)
  if $sqlite
    unless tag_exists? tag
      $db.execute("insert into #{$tag_table} values ( ? )", tag)
    end
    id = $db.execute("select oid from #{$tag_table} where tag = ?", tag)
    return id[0]
  elsif $mongo
    unless tag_exists? tag
      $tag.insert({:tag => tag})
    end
    return $tag.find({:tag => tag})[:_id] #this is the line it presumably crashes on
  end
end 
```

它到达第 105 行（如上所述），然后失败。这是怎么回事？此外，作为仅供参考，随着解决方案的出现，这可能会变成其他一些问题。

谢谢！

编辑

因此`[:_id]`，我没有将标签结果返回为 ，而是将 elsif 中的块更改为：

```
id = $tag.find({:tag => tag})
puts id.inspect
return id 
```

仍然出现错误。[您可以在http://torrent.hypeno.de](http://torrent.hypeno.de)上查看演示，在[http://github.com/tekknolagi/indexer/](http://github.com/tekknolagi/indexer)上查看源代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:30:39.233

鉴于您正在执行`insert()`，获取 id 的最简单方法是：

```
 id = $tag.insert({:tag => tag}) 
```

`id`将是[BSON::ObjectId](http://api.mongodb.org/ruby/current/BSON/ObjectId.html)，因此您可以根据所需的返回值使用适当的方法：

```
 return id         #  BSON::ObjectId('5017cace1d5710170b000001')
 return id.to_s    # "5017cace1d5710170b000001" 
```

在您最初的问题中，您尝试使用[Collection.find()](http://api.mongodb.org/ruby/current/Mongo/Collection.html#find-instance_method)方法。这将返回[Mongo::Cursor](http://api.mongodb.org/ruby/current/Mongo/Cursor.html)，但您试图将光标作为文档引用。`each`您需要使用or遍历光标`next`，例如：

```
 cursor = $tag.find_one({:tag => tag})
 return cursor.next['_id']; 
```

如果你想要一个文档，你应该使用[Collection.find_one()](http://api.mongodb.org/ruby/current/Mongo/Collection.html#find_one-instance_method)。

例如，您可以使用以下命令查找并返回 _id：

```
 return $tag.find_one({:tag => tag})['_id'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T22:00:27.487

我认为这里的问题是`[:_id]`。我对 Mongo 了解不多，但``$tag.find({:tag => tag})`可能正在重新调整数组并将符号传递给 [] 数组运算符未定义。

# ruby-on-rails - Rails 无法加载这样的文件——models/helpers/days

> ID：11729956
> 
> 赞同：1
> 
> 时间：2012-07-30T21:32:58.907
> 
> 标签：ruby-on-rails, controller, helper

我在以下位置制作了一个帮助文件：`models/helpers/days.rb`

但是，我尝试在我的控制器中使用我的助手，它抛出了以下错误：

```
cannot load such file -- models/helpers/days 
```

我使用以下要求：

```
require 'models/helpers/days'
class MyController < ApplicationController 
```

无论如何我可以在我的控制器中使用我的 days.rb 文件吗？

# excel - VBA 宏：将 Visio 形状报表导出到新的 Excel 文件中，然后创建数据透视表

> ID：11729959
> 
> 赞同：0
> 
> 时间：2012-07-30T21:33:09.160
> 
> 标签：excel, vba, visio

所以基本上，我有一个包含大量形状和数据的 Visio 文件。我正在尝试将形状报告创建到新的 excel 文件中，然后让 excel 文件以编程方式将导出的数据转换为数据透视表。

我在 Visio 中运行了一个宏，它已经生成了带有普通表格形式数据的 excel 文件。我希望能够在 Visio 中运行激活导出数据的 excel 窗口并运行宏以使其成为数据透视表的宏。但是，我放入 visio 宏模块的任何 excel 宏代码都无法识别（例如“范围”），可能是因为它们不是 Visio 识别的单词。

我的问题是：如何运行从 Visio 模块更改 Excel 文件的宏？

我知道如何在 Visio 的 Excel 文件中调用宏（Excel.run“ModuleNAME”），但这需要宏已经在 Excel 中。由于我在获得形状报告时正在创建新的 Excel 文件，因此这些文件中没有任何宏。

另一种解决方案是，如果我能够将 Visio 中的形状数据报告作为新工作表导出到已经包含宏的现有 Excel 文件中，但我也不确定如何执行此操作......（从现有 Excel 文件的 Visio）

我的生成 Excel 报告的代码：

```
Sub Excel2()
Visio.Application.Addons("VisRpt").Run     
("/rptDefName=ReportDefinition_2.vrd/rptOutput=EXCEL")
End Sub 
```

我想在运行 Excel2() 后运行这个宏

```
Sub NewMacro()
AppActivate "Microsoft Excel"
Dim AppExcel As Excel.Application
Set AppExcel = CreateObject("Excel.Application")

'Do all sorts of fancy stuff with making pivot tables
'Do all sorts of fancy stuff with making pivot tables
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:16:25.237

您可以只使用 Get/CreateObject 函数来使用 Visio 中的 Excel 应用程序实例。

看看这篇文章：

[http://msdn.microsoft.com/en-us/library/gg251785.aspx](http://msdn.microsoft.com/en-us/library/gg251785.aspx)

您可能还会发现这很有用：

[http://support.microsoft.com/kb/309603](http://support.microsoft.com/kb/309603)

...它描述了相反的方向（即从另一个应用程序控制 Visio），但在您的情况下，您会执行以下操作：

```
Dim AppExcel As Excel.Application

   On Error Resume Next

   Set AppExcel = GetObject(, "excel.application")

   If AppExcel Is Nothing Then
      Set AppExcel = CreateObject("excel.application")
   End If 
```

希望有帮助。

# python - 如何循环脚本，以便我可以继续输入我的选项而不会在 python 上出现错误

> ID：11729964
> 
> 赞同：-1
> 
> 时间：2012-07-30T21:33:23.720
> 
> 标签：python, loops, continuous

```
print'Personal information, journal and more to come'
x = raw_input()
if x ==("personal information"): 
 print' Edward , Height: 5,10 , EYES: brown , STATE: IL TOWN:  , SS:'
if x ==("journal"):
 read = open('C:\\python\\foo.txt' , 'r')
 name = read.readline()
 print (name) 
```

如何在不告诉我未定义某些内容的情况下循环或保持此代码运行？例如，如果我输入个人信息并获得我的个人信息，那么我想输入日记然后转到日记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:38:32.833

我不知道你的问题到底是什么，但这应该会有所帮助：

```
print'Personal information, journal and more to come'
while True:
    x = raw_input()
    if x =="personal information": 
        print' Edward , Height: 5,10 , EYES: brown , STATE: IL TOWN:  , SS:'
    elif x =="journal":
        read = open('C:\\python\\foo.txt' , 'r')
        name = read.readline()
        print (name)
    else:
        break 
```

# eclipse - 标记转储显示 IMarker.LINE_NUMBER 和 IMarker.CHAR_START 插件开发标记的空值

> ID：11729967
> 
> 赞同：0
> 
> 时间：2012-07-30T21:33:35.433
> 
> 标签：eclipse, plugins, markers

我有以下通用代码转储系统中所有属性的所有标记。如果我设置了一些断点，则 LINE_NUMBER 和 IMarker.CHAR_START 的值始终显示为 null，尽管它们具有明确的值。任何人都可以帮助理解吗？

```
private void printAllMarkers() {
        IMarker[] markers = null;
        IWorkspace root = ResourcesPlugin.getWorkspace();
        IProject projects[] = root.getRoot().getProjects();
        for (IProject p : projects) {
            try {
                markers = p.findMarkers(IMarker.MARKER, true, IResource.DEPTH_INFINITE);
                System.out.println("\nAll Markers Are: ");
                for (IMarker m : markers) {
                    System.out.println("-----------Marker of Type: " + m.getType());
                    dumpMarker(m);
                }
            } catch (CoreException e) {
                e.printStackTrace();
            }
        }
    }

    public static void dumpMarker(IMarker m) {
        try {
            for (String attrName : m.getAttributes().keySet()) {
                System.out.println("Attribute:" + attrName + "=" + m.getAttribute(attrName, null));
            }
        } catch (CoreException e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:54:46.823

我发现了问题。这是一个 Eclipse 错误，如果它来自“超类型”，则将值显示为 null，因此即使属性存在，getAttribute(attrName, null) 也会为 lineStart 返回 null。

# javascript - 如何从本地范围创建全局的、基于实例的对象？

> ID：11729973
> 
> 赞同：0
> 
> 时间：2012-07-30T21:34:04.567
> 
> 标签：javascript

我有一个使用的全局对象。我知道使用全局对象的缺点，但在这种情况下我想使用它。

我称这个全局对象为对象管道 bc 它将我的模型分支到我的控制器，反之亦然......也许应该称之为对象分支......无论如何......

我犯的错误是我认为在任何给定时间我只有一个模型在运行……但我没有，有多个。

因此，我不能使用单个静态实现，我需要基于实例的一个，每个运行的模型都有一个全局对象管道。

这是静态版本。MC 代表模型/控制器。

```
/********************************************************************************************
 *
 * MC - Model/Controller Types
 *
 *******************************************************************************************/

var MC = {};

/**
 **  Object Pipe
 */

MC.o_p = {
    model  :  'default',
    result :  'continue',
    page   :  {},
    args   :  {},
    server :  {},
    hash   :  localStorage.hash
}; 
```

我想过做这样的事情：

```
MC.o_p1 = function() {
    return {
        model  :  'default',
        result :  'continue',
        page   :  {},
        args   :  {},
        server :  {},
        hash   :  localStorage.hash
        }
} 
```

但现在返回对象在本地范围内调用它。

我需要基于全局实例的对象。

我不确定我是不是想太多了，或者我要问的是可能的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T21:38:10.703

**私下**持有您的包裹，并拥有一些访问功能：

```
var myModel = (function() {

    var model_vars = {
        model: 'default',
        result: 'continue',
        page: {},
        args: {},
        server: {},
        hash: localStorage.hash
    };

    return function() {
        this.get = function(ele) {
            if (model_vars.hasOwnProperty(ele)) {
                return model_vars[ele];
            }

        };

        this.set = function(ele, value) {
            if (model_vars.hasOwnProperty(ele)) {
                return model_vars[ele] = value;
            }

        };

    };

})(); 
```

然后你可以这样做：

```
Model = new myModel(); 
```

演示：http: [//jsfiddle.net/maniator/PSsQ3/](http://jsfiddle.net/maniator/PSsQ3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:38:33.537

您可以传入全局范围并在需要时使用它，如下所示：

```
MC.o_p1 = function(global) {
    return {
        model  :  'default',
        result :  'continue',
        page   :  {},
        args   :  {},
        server :  {},
        hash   :  global.localStorage.hash
        }
}(window); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T22:57:35.277

```
var msg = 'window is global in browsers';

window.alert(msg);

alert('or we can just use alert without accessing from window because, '+msg);

function isWindowReallyGlobalInBrowsers(){
    window.newMsg = 'Did you see var newMsg get declared anywhere?';
    alert(newMsg + ' It works because ' +msg);
}

isWindowReallyGlobalInBrowsers(); 
```

在浏览器控制台中尝试。根据需要提出问题。

# html - 在紧密循环中绘制 webGL 时，Chrome 反应迟缓且不会重新绘制非 webGL

> ID：11729974
> 
> 赞同：2
> 
> 时间：2012-07-30T21:34:21.713
> 
> 标签：html, google-chrome, webgl

我有一个页面[http://williame.github.com/Mandel_1](http://williame.github.com/Mandel_1)使用[`requestAnimationFrame`](https://github.com/williame/Mandel_1/blob/99dc8bc412fcc0419d3ccac0b0daf8ca5b7f4b08/index.html#L486). 这是[一般推荐的方法](http://www.khronos.org/webgl/wiki/FAQ#What_is_the_recommended_way_to_implement_a_rendering_loop.3F)。

有时它会更新画布旁边的 div 元素。

在 Firefox 中，这很有效，尽管 Firefox 地址栏可能会变得迟钝。

在 Chrome 中，尽管 div 已更新，但通常不会重新绘制，整个 Chrome 可能会变得迟缓且无响应。我从 Linux 和 Windows 上的人那里得到了这方面的报告。

此外，我计算的 FPS（通过定期计算前 3 秒内的帧数）与 Chrome 自己的调试 FPS 计数器显示的 FPS 不匹配。这种差异足以让我怀疑 Chrome 是否正在测量其他东西？

如何构建我的绘制循环以保持 Chrome 和其他浏览器的响应，同时以尽可能好的帧速率进行绘制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:57:38.080

我不确定您的应用程序中发生了什么，但看起来每次插入 div 时，您也在编译和链接 4 个着色器并检查是否成功。编译和链接很慢。

尝试在启动时编译和链接所有程序。

或者，相反，如果您 100% 确定它们会编译和链接，则不要检查编译和链接状态，在这种情况下，它们的编译和链接相对于 JavaScript 将是 100% 异步的。

# java - 在 Android 上使用 Java 选择第二条最近的短信

> ID：11729977
> 
> 赞同：1
> 
> 时间：2012-07-30T21:34:36.710
> 
> 标签：java, android, android-contentresolver

是否可以在 Android 平台上使用 Java 选择对话中的第二条消息？

```
Uri uriSMS = Uri.parse("content://sms/");
Cursor cur = getContentResolver().query(uriSMS, null, null, null, null);
cur.moveToNext();

String body = cur.getString(cur.getColumnIndex("body"));
String add = cur.getString(cur.getColumnIndex("address"));
String protocol = cur.getString(cur.getColumnIndex("protocol"));

if (protocol == null)
 out = ""+body;
else
 out = ""+body; 
```

我想查询收件箱并选择第二条最近的短信。使用上面的代码执行此操作的最佳方法是什么？是否可以如此细化查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:41:37.457

光标 cur = getContentResolver().query(uriSMS, null, null, null, null);

```
cur.moveToNext();
cur.moveToNext(); 
```

再次调用 moveToNext()。这会将您的光标指向查询结果中的第二条消息。

否则添加 NullPointer 检查，如果第二条消息不存在，您将结束 NullPointerException。

# php - Wordpress 网站团队开发

> ID：11729979
> 
> 赞同：1
> 
> 时间：2012-07-30T21:34:44.130
> 
> 标签：php, wordpress, git

我正在开始新项目，其中 3 名开发人员将在 wordpress 网站上工作。他们将拥有网站的本地副本，所有代码都将存储在 git-repo 中。但我不知道如何处理数据库。他们应该在远程主机或本地副本上使用相同的数据库吗？如何同步数据库数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T21:50:26.447

在这种情况下，我建议使用一个集中式测试服务器，该服务器存储一个 git-repo，用于管理该服务器上的 Web 目录。开发人员可以推送到该服务器以在里程碑的集中空间中进行测试，并定期从该服务器获取数据库转储以在其本地服务器上使用。

让所有开发人员使用集中式 MySQL 服务器可能会在数据库被代码修改时导致问题，并且一个或多个开发人员没有该开发的代码。

# c# - 反序列化层次结构的 JSON

> ID：11729980
> 
> 赞同：0
> 
> 时间：2012-07-30T21:34:44.503
> 
> 标签：c#, json, deserialization

为了反序列化以下 Json，我使用了以下类组合，因此我可以四次循环层次结构，但它不起作用

我还没有找到任何反序列化此类 json 的教程非常感谢任何帮助

```
var myFoo = new JavaScriptSerializer().Deserialize<Commn.foo2>(@"
{""root"":
    {""qss"":[
        {""id"":""d1"",""qss"":[
            {""id"":""qs1-1"",""tp"":""50px"",""ck"":""i"",""dp"":""at""},
            {""id"":""qs1-2"",""tp"":""100px"",""ck"":""i"",""dp"":""at""},
            {""id"":""qs1-3"",""tp"":""150px"",""ck"":""c"",""dp"":""at""},
            {""id"":""qs1-4"",""tp"":""200px"",""ck"":""i"",""dp"":""at""},
            {""id"":""qs1-5"",""tp"":""250px"",""ck"":""c"",""dp"":""at""},
            {""id"":""qs1-6"",""tp"":""300px"",""ck"":""c"",""dp"":""at""},
            {""id"":""qs1-7"",""tp"":""350px"",""ck"":""i"",""dp"":""at""},
            {""id"":""qs1-8"",""tp"":""400px"",""ck"":""i"",""dp"":""at""},
            {""id"":""qs1-9"",""tp"":""450px"",""ck"":""c"",""dp"":""at""},
            {""id"":""qs1-10"",""tp"":""500px"",""ck"":""c"",""dp"":""at""}]
        }

        {""id"":""d2"",""qss"":[
            {""id"":""qs2-1"",""tp"":""50px"",""ck"":""i"",""dp"":""at""},
            {""id"":""qs2-2"",""tp"":""100px"",""ck"":""c"",""dp"":""at""},
            {""id"":""qs2-3"",""tp"":""150px"",""ck"":""c"",""dp"":""at""},
            {""id"":""qs2-4"",""tp"":""200px"",""ck"":""i"",""dp"":""at""},
            {""id"":""qs2-5"",""tp"":""250px"",""ck"":""c"",""dp"":""at""},
            {""id"":""qs2-6"",""tp"":""300px"",""ck"":""c"",""dp"":""at""},
            {""id"":""qs2-7"",""tp"":""350px"",""ck"":""c"",""dp"":""at""},
            {""id"":""qs2-8"",""tp"":""400px"",""ck"":""i"",""dp"":""at""},
            {""id"":""qs2-9"",""tp"":""450px"",""ck"":""c"",""dp"":""at""},
            {""id"":""qs2-10"",""tp"":""500px"",""ck"":""c"",""dp"":""at""}]
        }
    }
}
");

public  class Pages
{
    public string id { get; set; }
    public qss[] children { get; set; }
}

public class qss
{
    public string id { get; set; }
    public string tp { get; set; }
    public string ck { get; set; }
    public string dp { get; set; }
}

/// <summary>
/// Holding the root elemnt
/// </summary>
public class foo2
{
    public qss[] root { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T22:01:49.737

您使用的类不完全映射到 JSON 文件的属性。JSON 的每个对象（出现在 {} 之间的）和每个数组（出现在 [] 之间的）需要不同的类。每对，该类的成员。

```
public class MainObject
{
    public Root root { get; set; }
} 
```

此类包含整个“根”值。Root 是这样定义的，因为“root”出现在 {} 之间，而“root”之后的整个字符串：是它的值。

```
public class Root
{
    public List<OuterQSS> qss { get; set; }
} 
```

此类包含整个外部“qss”值，该值出现在作为数组的第二个“qss”之前。

```
public class OuterQSS
{
    public string id { get; set; }
    public List<InnerQSS> qss { get; set; }
} 
```

此类包含“id”值和内部 QSS 成员的整个数组。

```
public class InnerQSS
{
    public string id { get; set; }
    public string tp { get; set; }
    public string ck { get; set; }
    public string dp { get; set; }
} 
```

这个类在内部 QSS 数组中保存了所有甜美的数据。

只需替换它的类型

```
Deserialize<Commn.foo2> 
```

新主类的方法

```
Deserialize<MainObject> 
```

# ruby-on-rails - 如何序列化 - 反序列化哈希以将其保存在数据库中？

> ID：11729982
> 
> 赞同：9
> 
> 时间：2012-07-30T21:34:48.157
> 
> 标签：ruby-on-rails, ruby, serialization, hash

我有一个哈希：

```
h = {
    "revision"=>7,         
    "rev"=>"708a4bd5b", 
    "thumb_exists"=>false, 
    "bytes"=>246000,     
    "modified"=>"Sun, 01 Jul 2012 17:09:15 +0000", 
    "client_mtime"=>"Sun, 01 Jul 2012 17:09:15     +0000", 
    "path"=>"/Getting Started.pdf", 
    "is_dir"=>false,       
    "icon"=>"page_white_acrobat", 
    "root"=>"dropbox",     
    "mime_type"=>"application/pdf", 
    "size"=>"240.2 KB"
} 
```

我想使用以下命令将其保存在数据库中：`h.to_s` 然后我想从数据库中获取内容并将其作为哈希处理。

```
s = MyModel[:field_which_contains_hash_string] 
```

我尝试加载内容，`YAML::load s`但出现错误：

```
Psych::SyntaxError: (<unknown>): found unexpected ':' while scanning a plain scalar at line 1 column 96 
```

我想这是由于时间字符串中的冒号造成的。那么持久化哈希并再次检索它的最佳方法是什么？

帮助表示赞赏。最好的，菲利普

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-30T21:41:15.377

在模型中创建一列文本类型。然后在你的模型文件中做

```
class MyModel < ActiveRecord::Base
    serialize :column_name, Hash
end 
```

然后使用以下命令访问它：

```
my_model = MyModel.new
my_model.column_name[:key] = value
my_model.column_name[:key] 
```

哈希将使用 YAML 序列化到列中

[http://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods/Serialization/ClassMethods.html#method-i-serialize](http://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods/Serialization/ClassMethods.html#method-i-serialize)

# jsp - 在 JSP 中提交表单异常

> ID：11729988
> 
> 赞同：1
> 
> 时间：2012-07-30T21:35:09.000
> 
> 标签：jsp

为什么会出现错误？我应该怎么办？我将 Java EE (jsdk) 和 classes12 添加到 intellij，并将 classes12 添加到 tomcat 的 lib 目录中。这是数据访问层。

```
public class DataBase {
    private Connection connection;
    private PreparedStatement statement;

    public DataBase() throws ClassNotFoundException, SQLException {
        Class.forName("oracle.jdbc.driver.OracleDriver");
        connection = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe", "SYSTEM", "1234");
    }

    public void insertOrUpdateOrDelete(String sqlQuery) throws SQLException {
        statement = connection.prepareStatement(sqlQuery);
        statement.executeUpdate();
    }

    public ResultSet select(String sqlQuery) throws SQLException {
        statement = connection.prepareStatement(sqlQuery);
        ResultSet resultSet = statement.executeQuery();
        return resultSet;
    }

    public void disconnect() throws SQLException {
        statement.close();
        connection.close();
    }
} 
```

* * *

此类使用来自 DataBase 类。

```
public class Users {
 DataBase dataBase;
    public Users() throws ClassNotFoundException, SQLException {
        dataBase = new DataBase();
    }

    public void addUser(HttpServletRequest request) throws SQLException {

        String sqlQuery = "insert into users (name,family,email,tel,password) values('" + request.getParameter("name") + "','" + request.getParameter("family") + "','" + request.getParameter("email") + "','" + request.getParameter("tel") + "','" + request.getParameter("password") + "')";
        dataBase.insertOrUpdateOrDelete(sqlQuery);
        dataBase.disconnect();
    } 
```

* * *

这是我的注册 jsp 页面。我检查哪个用户点击了提交按钮并保存在数据库中。

```
<%
        if (request.getParameter("name") != null) {
            try {
                Users user = new Users();
                user.addUser(request);

            } catch (Exception error) {
                error.printStackTrace();

            }

        }

%>
        <form id="RegisterForm" action="Regist.jsp" method="post">
            <div>
                <div class="wrapper">
                    <div class="bg"><input type="text" class="input" name="name"/></div>
                    Name:<br/>
                </div>
                <div class="wrapper">
                    <div class="bg"><input type="text" class="input" name="family"/></div>
                    Family:<br/>
                </div>
                <div class="wrapper">
                    <div class="bg"><input type="text" class="input" name="email"/></div>
                    E-mail:<br/>
                </div>
                <div class="wrapper">
                    <div class="bg"><input type="password" class="input" name="password"/></div>
                    Password:<br/>
                </div>
                <div class="wrapper">
                    <div class="bg"><input type="text" class="input" name="tel"/></div>
                    Tel:<br/>
                </div>

                <input Class="button1" type="submit" value="SUBMIT"/>
                <input Class="button1" type="reset" value="RESET"/>

            </div>
        </form> 
```

* * *

但我有例外

```
Exceptions :
java.sql.SQLException: ORA-01400: cannot insert NULL into ("SYSTEM"."USERS"."ID")

    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:124)
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:304)
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:271)
    at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:625)
    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:181)
    at oracle.jdbc.driver.T4CPreparedStatement.execute_for_rows(T4CPreparedStatement.java:791)
    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1032)
    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:2884)
    at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:2956)
    at airAgency.DataBase.insertOrUpdateOrDelete(DataBase.java:24)
    at airAgency.Users.addUser(Users.java:24)
    at org.apache.jsp.Regist_jsp._jspService(Regist_jsp.java:125)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T21:48:59.143

错误消息解释了问题所在：

```
cannot insert NULL into ("SYSTEM"."USERS"."ID") 
```

您在 users 表中有一个名为 ID 的不可为空的列，但您没有在该列中插入任何内容，因此数据库会抱怨。

此外，您的代码是错误使用预准备语句的完美示例，因此会受到 SQL 注入攻击。您的查询应该有参数，应该绑定：

```
insert into users (name,family,email,tel,password) values(?, ?, ?, ?, ?) 
```

例如，如果我的名字是*O'Reilly*，您的查询将因语法错误而失败。这是最小的潜在问题。

[在JDBC 教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)中阅读准备好的语句。

# windows-installer - Msiexec /v 不断被调用并弄乱注册表

> ID：11729991
> 
> 赞同：2
> 
> 时间：2012-07-30T21:35:37.610
> 
> 标签：windows-installer

我相信 services.exe 使用命令行 msiexec.exe /v 来重新安装或重新缓存或任何我的软件。问题是，当您实际安装时，您选择了安装路径并将其设置为注册表项。当调用此 msiexec.exe /v 时，所有注册表项都会重置，但由于它不再具有此路径，因此路径项将留空。

我运行进程监视器并等待它发生，以上信息就是我推断的。我需要知道它为什么调用它以及如何阻止它。任何有助于我了解正在发生的事情的信息或知识将不胜感激，因为我正在积极努力解决这个问题。我发现没有什么特别的东西可以引发这些事件。不过可能是一家初创公司。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T02:16:28.380

很难知道发生了什么。您是否将自己的服务可执行文件安装为 MSI 的一部分？如果是这样，它将在调用（启动/停止）时成为“自我修复”入口点。这意味着将即时验证所有组件中的所有关键路径，如果发现任何关键路径丢失，则会自动重新安装您的应用程序。您可以使用详细日志文件来确定哪个组件触发了自我修复。使用 Windows Installer 命令行生成器构建 msiexec.exe 命令行以创建文件。请在此处查看我的答案：[如何与静默安装的 msi 交互？（进度数据并取消）](https://stackoverflow.com/questions/1659924/how-to-interactive-a-silently-installing-msi-progress-data-and-cancel-it)

请注意，您通常还可以通过检查系统的事件日志来找到负责自我修复的组件。这是最快的方法。日志文件将为您提供更多信息。要了解日志，请使用 Microsoft 自己的日志文件分析器： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa372811 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372811(v=vs.85).aspx)

如果您在 msi 中对注册表项进行硬编码，则它们确实会在修复完成后被重置。当您将 MSI 组件指向注册表路径作为密钥路径时，MSI 文件认为它“拥有”该密钥并将在安装时重置它并在卸载时将其删除，除非您专门设计 MSI 文件以避免这种情况。您可以通过将组件设置为“永久”和“如果 keypath 存在则从不覆盖”来避免这种情况。更好的选择是让服务 exe 文件在安装后将其自己的默认值写入注册表（如果它有权这样做）。这将使您的设置与 MSI 分离，安装程序永远不会弄乱它们。

如果我的直觉是正确的，您的服务 exe 文件正在重置 MSI 认为它“拥有”的注册表值，并且启动服务会触发密钥路径检查，进而触发自我修复以将值恢复为 MSI 默认值。很抱歉解释混乱，但我在这里从臀部拍摄，试图为您提供一些调试指导。

# php - 如何将表单变量发送到 php 中的多个 URL（cURL？）

> ID：11729996
> 
> 赞同：2
> 
> 时间：2012-07-30T21:35:50.917
> 
> 标签：php, curl

我似乎在尝试将表单变量提交到多个 url 时遇到了问题。我在下面的代码从表单中获取变量并将它们存储在 php 中，然后我试图将这些变量发送到某些 url（变量确实通过，我已经测试过了）。我听说 cUrl 是这样做的方法，但我不知道它的工作原因是否让我难以理解如何检索响应代码。

```
<?php

$name = $_POST['firstname'];
$email = $_POST['email'];
$src = $_POST['srcUrl'];
$ip= $_SERVER['SERVER_ADDR'];
$suDate = date('Y-m-d H:i:s');

$data = array(
"fn" => $name,
"src" => $src,
"em" => $email,
"ip" => $ip,
"signupDate" => $suDate
);

$data2 = array(
"firstname" => $name,
"email" => $email,
);

function post_to_url($url, $data) {
$fields = '';
foreach($data as $key => $value) { 
  $fields .= $key . '=' . $value . '&'; 
}
rtrim($fields, '&');

$post = curl_init();

curl_setopt($post, CURLOPT_URL, $url);
curl_setopt($post, CURLOPT_POST, count($data));
curl_setopt($post, CURLOPT_POSTFIELDS, $fields);
curl_setopt($post, CURLOPT_RETURNTRANSFER, 1);

$result = curl_exec($post);

curl_close($post);
}

post_to_url("http://exampleURL.com/page.php", $data);
post_to_url("http://exampleURL2.com/cgi-bin/add.cgi", $data2);

print_r($result);

?> 
```

任何帮助是极大的赞赏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:40:49.190

在您上面提供的代码示例中，$result 包含您要查找的响应。要查看变量的完整详细信息，请使用以下命令：

```
print_r($result); 
```

`print_r`当您不确定变量是什么数据类型或它可能包含什么数据时很有用。`print_r`为您提供有关变量的所有可用信息。

**编辑：**更改`curl_setopt($post, CURLOPT_POST, count($data));`为`curl_setopt($post, CURLOPT_POST, 1);` CURLOPT_POST 也是一个真/假选项（[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:41:19.433

在您拥有数据的函数内部`$result = curl_exec($post);`是`$result`响应。因此，您需要添加`return $return;`并调用该函数`$response = post_to_url(...);`并回显响应。

# javascript - KeyPress 在 IE8 中不返回 false

> ID：11729998
> 
> 赞同：1
> 
> 时间：2012-07-30T21:35:56.360
> 
> 标签：javascript, internet-explorer-8, keypress

我试图阻止用户使用 jQuery 使用 KeyPress() 输入空格“”。它在除 IE8 之外的所有浏览器上都可以正常工作。

这是我的代码：

```
$("<input type='text'>")
.attr( 'placeholder', opts.addTagPrompt )
.keypress( function(e) {
var $this = $(this),
    pressed = e.which;

for ( i in opts.delimiters ) {

    if (pressed == opts.delimiters[i]) {
        if($this.val().indexOf(";",0) > 0)
        {
            var list = $this.val().split(';');
        }else{
            var list = $this.val().split(',');
        }

        for(var i in list){
            self.add( list[i] );
        }

        e.preventDefault(); 
        return false;
    }
}
}) 
```

更新1：

如果用户单击空格或 Enter 或逗号，它是一个 tagify 插件，它应该为所选输入返回 false 和机会 Css。

```
(function ($) {

    $.widget("ui.tagify", {
        options: {
            delimiters: [13, 32, 44],          // what user can type to complete a tag in char codes: [enter], [space], [comma]
            outputDelimiter: ',',           // delimiter for tags in original input field
            cssClass: 'tagify-container',   // CSS class to style the tagify div and tags, see stylesheet
            addTagPrompt: 'enter an email address'        // placeholder text
        },

        _create: function() {
            var self = this,
                el = self.element,
                opts = self.options;

            this.tags = [];
            var ctrlDown = false;
            // hide text field and replace with a div that contains it's own input field for entering tags
            this.tagInput = $("<input type='text'>")
                .attr( 'placeholder', opts.addTagPrompt )
                .keypress( function(e) {
                    var $this = $(this),
                        pressed = e.which;

                    for ( i in opts.delimiters ) {

                        if (pressed == opts.delimiters[i]) {
                            if($this.val().indexOf(";",0) > 0)
                            {
                                var list = $this.val().split(';');
                            }else{
                                var list = $this.val().split(',');
                            }

                            for(var i in list){
                                self.add( list[i] );
                            }

                            e.preventDefault(); 
                            return false;
                        }
                    }
                })

                // Ctrl+V Detection
                .keydown(function(e)
                {
                    if (e.keyCode == 17) ctrlDown = true;
                })
                .keyup(function(e)
                {
                    if (e.keyCode == 17) ctrlDown = false;
                })
                .keyup(function(e)
                {
                    var $this = $(this);
                    console.log($this.val());
                    if (ctrlDown && (e.keyCode == 86) ) {
                        if($this.val().indexOf(";",0) > 0)
                        {
                            var list = $this.val().split(';');
                        }else{
                            var list = $this.val().split(',');
                        }
                        var name_fix = "";
                        for(var i in list){
                            console.log(list[i]);
                            if(!checkEmail(list[i])){
                                name_fix = list[i]+", ";
                            }else{
                                if (name_fix != "") { 
                                    self.add( name_fix+list[i] );   
                                    name_fix = "";
                                }else{  
                                    self.add( list[i] );    
                                }
                            }

                        }

                        e.preventDefault(); 
                        return false;
                    }
                })

                .keydown( function(e) {
                    var $this = $(this),
                        pressed = e.which;

                    // if backspace is hit with no input, remove the last tag
                    if (pressed == 8) { // backspace
                        if ( $this.val() == "" )
                        {
                            self.remove();
                            return false;
                        }
                        return;
                    }
                });

            this.tagDiv = $("<div></div>")
                .addClass( opts.cssClass )
                .click( function() {
                    $(this).children('input').focus();
                })
                .append( this.tagInput )
                .insertAfter( el.hide() );

            // if the field isn't empty, parse the field for tags, and prepopulate existing tags
            var initVal = $.trim( el.val() );

            if ( initVal ) {
                var initTags = initVal.split( opts.outputDelimiter );
                $.each( initTags, function(i, tag) {
                    self.add( tag );
                });
            }
        }, 
```

有谁知道如何解决这个问题？？提前致谢。

# node.js - CouchDb 未处理的“错误”事件 - 节点 js

> ID：11729999
> 
> 赞同：0
> 
> 时间：2012-07-30T21:36:05.540
> 
> 标签：node.js, couchdb

我是 Node 和 CouchDb 的新手，我正在尝试使用它。我正在努力使一段代码工作。我想创建一个表`users`，插入一个新用户并“同时”获取另一个用户。

启动时出现此错误`node app.js`：

```
antoine@ubuntu:~/projects/couchDb$ node app.js 
Database users exists.
{"error":"conflict","reason":"Document update conflict."}
Leaving saveDoc

events.js:48
        throw arguments[1]; // Unhandled 'error' event
                       ^
Error: socket hang up
    at createHangUpError (http.js:1107:15)
    at Socket.onend (http.js:1188:27)
    at TCP.onread (net.js:369:26) 
```

* * *

这是我的代码，有什么问题吗？（当我删除 getDoc 函数时，错误消失了）我正在使用 couchDB 1.0.1 和节点 0.6.12

和文档已经存在于数据库中`jdoe4`。`jdoe``users`

```
var dbHost = "127.0.0.1";
var dbPort = 5984;
var dbName = 'users';

var couchdb = require('felix-couchdb');
var client = couchdb.createClient(dbPort, dbHost);

var user = {
  name: {
    first: 'John',
    last: 'Doe'
  }
}

var db = client.db(dbName);

db.exists(function(err, exists) {
  if (!exists) {
    db.create();
    console.log('Database ' + dbName + ' created.');
  } else {
    console.log('Database ' + dbName + ' exists.');
  }

  db.saveDoc('jdoe4', user, function(err, doc) {
    if( err) {
          console.log(JSON.stringify(err));
        } else {
          console.log('Saved user.');
        }
        console.log('Leaving saveDoc');
    });

    db.getDoc('jdoe', function(err,doc) {
        if( err) {
            console.log(JSON.stringify(err));
        } else {
            console.log(JSON.stringify(doc));
        }
        console.log('Leaving getDoc');
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:16:53.223

我很快意识到 felix-couchdb 与节点 8 不兼容（我知道你没有使用版本 8，但总有一天你会使用），所以我切换到 nano couchdb，下面是以下代码：

1.  它将检查数据库是否已创建
2.  仅当给定的键是唯一的时才会插入
3.  它将获得用户的密钥

    ```
    var couchdb = require('nano')('http://localhost:5984')
      , dbName = 'users'
      , db = couchdb.use(dbName)
      ;

    var user = {
        name: {
            first: 'John',
            last: 'Doe'
        }
    }

    couchdb.db.create(dbName, function(err, db_body) {

    db.insert(user, 'jdoe4', function(err, doc, header) {
        if( err) {
          console.log('Cannot save user');
        } else {
          console.log('Saved user.');
        }
        console.log('Leaving saveDoc');
    });

    db.get('jdoe', function(err, doc) {
        if( err) {
            console.log('Cannot get user');
        } else {
            console.log(JSON.stringify(doc));
        }
        console.log('Leaving getDoc');
    });

    }); 
    ```

值得注意的一点是，虽然这将“同时”获取它们，但它仍然向数据库发出 3 个请求，1 个检查它是否存在，1 个插入（或不插入），1 个获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:43:57.180

这似乎是一个库问题 => [Github Issue Socket Hangout](https://github.com/felixge/node-couchdb/issues/38)

[如果您不知道哪个库更适合您的需求，请看这里。](https://stackoverflow.com/questions/5532209/couchdb-and-node-js-what-module-do-you-recommend)