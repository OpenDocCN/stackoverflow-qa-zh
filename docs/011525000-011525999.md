# StackOverflow 问答 11525000-11525999

# git - Git init --bare - 不在工作树上工作

> ID：11525004
> 
> 赞同：1
> 
> 时间：2012-07-17T14:41:56.210
> 
> 标签：git

我正在按照这里的示例 [http://wiki.dreamhost.com/Git](http://wiki.dreamhost.com/Git)

基本上我想创建一个 git repo，我可以从我的桌面推送到服务器上......在主机上：

```
[host ~]$ mkdir project.git
[host ~]$ cd project.git
[host project.git]$ git init --bare
[host project.git]$ exit 
```

然后在本地：

```
[local ~]$ cd project
[local project]$ git init
[local project]$ touch .gitignore
[local project]$ git add .
[local project]$ git commit 
```

如果我将 CD 放入目录，则在主机上。我会看到以下文件（通常位于 .git 目录中）

```
HEAD  branches  config  description  hooks  info  objects  refs 
```

然后在本地创建一个远程推送： git remote add origin ssh://XXX@XXX/home/XXX/XXX/ 它推送说它已经工作了......

```
Counting objects: 3, done.
Writing objects: 100% (3/3), 210 bytes, done.
Total 3 (delta 0), reused 0 (delta 0) 
```

但是，当我回到服务器上的工作文件夹时，那里什么都没有。它只是上面列出的 .git 文件。

我以前做过这个，它是这样工作的……只是这一次我一定做错了什么。

**更新**

如果我尝试在没有 --bare ... 的情况下在服务器上创建存储库，那么我会在推送时收到此错误

```
remote: error: refusing to update checked out branch: refs/heads/master
remote: error: By default, updating the current branch in a non-bare repository
remote: error: is denied, because it will make the index and work tree inconsistent
remote: error: with what you pushed, and will require 'git reset --hard' to match
remote: error: the work tree to HEAD.
remote: error: 
remote: error: You can set 'receive.denyCurrentBranch' configuration variable to
remote: error: 'ignore' or 'warn' in the remote repository to allow pushing into
remote: error: its current branch; however, this is not recommended unless you
remote: error: arranged to update its work tree to match what you pushed in some
remote: error: other way.
remote: error: 
remote: error: To squelch this message and still keep the default behaviour, set
remote: error: 'receive.denyCurrentBranch' configuration variable to 'refuse'. 
```

更新和解决方案....

我发现这个很好 [用 http://toroid.org/ams/git-website-howto](http://toroid.org/ams/git-website-howto)

基本上使用 --bare 然后有钩子将您的最新提交复制到工作目录！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:45:42.293

你看到的似乎是正确的。您在该文件夹中看到的 .git 文件（以及 objects 目录中的很多文件）包含您所有的 git 存储库。

当您创建“裸”存储库时，这会阻止其他任何人直接在那里（在您的主机上）编辑文件，没有将项目与您的所有源文件一起签出是阻止此类编辑的事情之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:51:05.023

`git init --bare`创建一个“裸”存储库 - 一个没有与之关联的工作目录的存储库。你所看到的是预期的。如果您想要一个具有与之关联的签出工作目录的单独存储库，请不要使用该`--bare`选项，但请注意这样做会产生其他含义，因为`git push`当远程不是裸存储库时，其行为会有所不同，以保护您以免丢失您在遥控器中可能拥有的任何未暂存/未提交的更改。

# automated-tests - TFS 2010 Build - 缺少单元测试依赖项

> ID：11525007
> 
> 赞同：0
> 
> 时间：2012-07-17T14:42:01.813
> 
> 标签：automated-tests, tfsbuild

我为 TFS 2010 创建了一个新的构建定义。构建我的 C# 解决方案后，我希望它执行几个单元测试。这些单元测试需要一个 XML 输入文件，所以我对测试方法有一个 [DeploymentItem] 属性，它提供了 XML 文件的相对路径。如果我从 Visual Studio 中运行单元测试，它们就可以通过。

当单元测试在构建之后运行时（通过我的构建定义），它们失败并显示：“Microsoft.BizTalk.TestTools.BizTalkTestAssertFailException：输入文件不存在......”

如果我能够跟踪构建代理正在尝试做什么，以帮助进行故障排除，那就太好了。

有谁知道如何获得这样的跟踪输出？我想我可以增加被测主解决方案的跟踪输出的详细程度，但我认为这不会给我任何指示构建代理在哪里寻找测试输入 XML 或为什么？

谢谢

抢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:11:37.763

我找到了！需要从构建后显示的屏幕中单击“查看日志”链接。我一直在查看“查看摘要”的默认视图

# ruby-on-rails - Facebook 通过 Omniauth + Devise 发送无效用户数据

> ID：11525008
> 
> 赞同：0
> 
> 时间：2012-07-17T14:42:05.087
> 
> 标签：ruby-on-rails, facebook, devise, omniauth

我的邮箱只有两次失败的登录尝试。查看数据很快就发现了问题：Facebook 正在向我的 Omniauth-Controller 发送一个 11 位数字而不是电子邮件地址。因此无法保存用户模型，因为它在迁移文件中的列上使用电子邮件约束创建。有人知道在这种情况下我应该如何处理数据吗？我真的不在乎用户是否有格式错误的电子邮件地址，所以理论上我可以将列更改为普通字符串等。有更好的解决方案吗？

奖金问题：

*   facebook + omniauth + devise 环境中已知不可靠的任何其他领域？
*   任何已知与 `google_oauth2`插件不可靠的字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:50:46.857

我认为您正在使用类似于以下的功能...

```
def self.find_for_facebook_oauth(auth, signed_in_resource=nil)
  user = User.where(:provider => auth.provider, :uid => auth.uid).first
  unless user
    user = User.create(name:auth.extra.raw_info.name,
                       provider:auth.provider,
                       uid:auth.uid,
                       email:auth.info.email,
                       password:Devise.friendly_token[0,20]
                       )
  end
  user
end 
```

您确定 auth.info.email 映射到正确的参数吗

编辑：

由于以上都很好。我猜这两个选项是删除您所说的约束或执行您自己的字符串检查，或者它包含@或其他内容，如果传递的数据格式不正确，您可以插入一个虚拟电子邮件地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:28:56.993

这就是我快速而肮脏地解决它的方法：

```
# facebook can send malformed/invalid email
email = auth[:info][:email]
unless email =~ /^(|(([A-Za-z0-9]+_+)|([A-Za-z0-9]+\-+)|([A-Za-z0-9]+\.+)|([A-Za-z0-9]+\++))*[A-Za-z0-9]+@((\w+\-+)|(\w+\.))*\w{1,63}\.[a-zA-Z]{2,6})$/i
email = "#{Time.now.to_i}@MALFORMED_EMAIL.com" 
```

# eclipse - 从 Eclipse 调试黑莓应用程序，在设备或模拟器上找不到应用程序

> ID：11525012
> 
> 赞同：1
> 
> 时间：2012-07-17T14:42:12.743
> 
> 标签：eclipse, debugging, blackberry, blackberry-simulator

我正在从 Eclipse 调试黑莓应用程序。一开始它运行良好，但从几天前开始，我无法再将应用程序安装到任何模拟器或设备上。

包装和签名显示没有错误。在它显示“调试器附加...”屏幕后，我在模拟器或设备上的任何地方都找不到该应用程序。我尝试过几次重新安装 eclipse 和 JDE。一项观察是它有大约 280 个文件要签名。无需对代码进行任何更改，现在它就有 540 个文件要签名。

# sql-server - sql server 如何将参数与xml查询一起使用？

> ID：11525015
> 
> 赞同：1
> 
> 时间：2012-07-17T14:42:27.723
> 
> 标签：sql-server, xml, xquery

我有这个代码工作

```
UPDATE UserData
SET Data.modify('delete(/UsersData/UserXml[@user_id=23445])[1]')            
WHERE Id = 11; 
```

但是当我尝试这段代码时，它会抛出 ex

```
declare @myXmlQuery nvarchar(120)
set @myXmlQuery = '/UsersData/UserXml[@user_id=23445]'

UPDATE UserData
SET Data.modify('delete(sql:variable("@myXmlQuery"))[1]')
WHERE Id = 11; 
```

我得到这个前任：

> 消息 2264，级别 16，状态 1，第 11 行 XQuery [UserData.Data.modify()]：只能删除非文档节点，找到 'xs:string'

有任何想法吗 ？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:48:06.960

一个hacky方式是：

```
DECLARE @sql NVARCHAR(MAX), @myXmlQuery nvarchar(120);

set @myXmlQuery = N'/UsersData/UserXml[@user_id=23445]'

SET @sql = N'UPDATE UserData
SET Data.modify(''delete(' + @myXmlQuery + ')[1]'')
WHERE Id = 11;';

PRINT @sql;

-- EXEC sp_executesql @sql; 
```

我相信 XML 专家会给出更实际的答案。我更像是一个关系型的人。:-)

# salesforce - 在 VF 页面上显示多子查询、动态字段、动态对象 SOQL 查询结果

> ID：11525016
> 
> 赞同：0
> 
> 时间：2012-07-17T14:42:28.500
> 
> 标签：salesforce, visualforce, soql

我想将 SOQL 查询传递给页面，或者让用户自己在页面上输入，处理它，然后在表格中显示结果。

最大的问题是显示结果，因为 VF 动态绑定似乎只工作了一层，之后它给出了空指针异常（似乎是 SF 中的一些错误）。

我有一个动态主对象，其中包含来自查询的多个相关列表，例如：用户可能正在提取一个客户列表，其中包含所有相关的联系人和所有相关的机会。这是一个示例查询：

**选择 id、姓名、BillingState、（从联系人中选择 id、姓名、职务）、（从机会中选择 id、金额），其中名称如 '%Corp%'**

另一次，查询可能在完全不同的父对象上，例如：

**select id, name, accountId, (select id, Cost from OpportunityLineItems), (select id, name from Attachments) from Opportunity limit 20**

从查询中解析字段和对象名称不是问题，但是使用动态绑定在 VF 页面上的表中显示这些结果是一场噩梦，对我不起作用。有任何想法吗？或者您可能在某处看到过针对这种特定情况的 VF 代码？

作为旁注，以下是我在尝试使用动态绑定时在 VF 页面上不断遇到的错误

错误：java.lang.NullPointerException
错误：null

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:39:47.150

在这些情况下，我总是依赖对象关系映射器模式，或者简称为包装器类。对于更复杂的字段，您最终显示的是单级的类成员抽象，而不是直接来自 SOQL 语句结果的字段。这样做的一个好处是您可以简单地进行几次 SOQL 调用，以最能支持您的页面的任何方式准备数据，然后顺利呈现它。拥有这个抽象类的额外工作最终得到了很好的回报 - imo。

这是一个[相关的帖子](https://stackoverflow.com/questions/8129141/visualforce-custom-controller-list/8140813#8140813)，它准确地展示了如何在 Apex 中执行此操作。在您的情况下，您将扩展此示例以将多个 SObject 的值添加到此“ORM 样式”类的一个实例，然后从 Apex 中填充它的实例列表。此自定义对象实例列表成为 Visualforce 消耗的完美食物。

# rest - 在 Play 中使用 LinkedIn 的 REST API！2 和 Oauth 2

> ID：11525018
> 
> 赞同：0
> 
> 时间：2012-07-17T14:42:35.463
> 
> 标签：rest, oauth-2.0, playframework-2.0, linkedin

我们希望使用来自 LinkedIn 的信息更新我们的用户资料（如果用户选择导入此信息）。但是，我们希望使用 Oauth2 进行此授权，但根据 LinkedIn 的网站，他们的 REST API 仅支持 Ouath 1.0a：[https ://developer.linkedin.com/apis](https://developer.linkedin.com/apis)

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:40:03.803

由于 LinkedIn 使用他们的[JavaScript API](https://developer.linkedin.com/javascript)提供 OAuth 2 访问权限，您可以深入研究他们的 Javascript 代码并以某种方式获取包含[OAuth 2 端点](https://platform.linkedin.com/js/secureAnonymousFramework?v=0.0.2000-RC1.20001-1400)的文件：

```
l.api = "https://api.linkedin.com/v1";
l.login = "https://www.linkedin.com/uas/connect/user-signin";
l.authorize = "https://www.linkedin.com/uas/oauth2/authorize?immediate=true";
[...]
l.logout = "https://www.linkedin.com/uas/connect/logout?oauth_token={OAUTH_TOKEN}&api_key={API_KEY}&callback={CALLBACK}";
l.userspace_renew = "https://www.linkedin.com/uas/js/authuserspace?v=0.0.2000-RC1.20001-1400&api_key={API_KEY}"; 
```

对于请求资源，可能可以使用其[REST API 文档中的端点。](https://developer.linkedin.com/documents/linkedin-api-resource-map)

但是，请注意，他们[的使用条款](https://developer.linkedin.com/documents/linkedin-apis-terms-use)可能禁止在没有 JS API 的情况下使用这些端点，并可能导致您的客户端受到制裁。您可以联系他们并请求许可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:43:56.330

我在 Scala 和 Java 中创建了一个 Play 2.x 客户端，它支持 OAuth/CAS/OpenID/HTTP 身份验证和用户配置文件检索：[https](https://github.com/leleuj/play-pac4j) ://github.com/leleuj/play-pac4j 。

对于 OAuth 支持，它基于 Scribe，支持 LinkedIn、Facebook、Twitter、Google、Yahoo、DropBox、Github、Windows live、WordPress...

# jquery - $.post 在黑莓 5 中不起作用

> ID：11525020
> 
> 赞同：0
> 
> 时间：2012-07-17T14:42:50.470
> 
> 标签：jquery, jquery-ui, blackberry, jquery-mobile, blackberry-webworks

post 方法将数据发送到服务器。

```
function testing()
{

alert("###@@@@#############");
var encodedURL =intranetUrl+ encodeURI("customer/Ri_logon5.asp?requestString=");
var params = 'manish|^test1234|^|^X|^11111985|^1.0|^|$';
$.post(encodedURL,  params,
       function(data) {
         alert("Data Loaded: " + data);
       });

} 
```

它在 android 和 blackberry6 上完美运行。但是在黑莓5上它不起作用。我读过它是简写的 Ajax 函数，而 blackberry5 不支持 ajax。那么如果我想在 blackberry5 中向服务器发送数据，那么该怎么做呢？

我知道在 post 方法中，我们在键/值对中传递参数。在 Rsst 客户端工具中，如果我选择方法作为 POst 并且在 URL 中我将 URL 指定为：“http://mySitecustomer/Ri_logon5.asp?requestString=" 并且在正文中传递参数为 manish|^test1234|^|^X|^11111985 |^1.0|^|$ thrn 它给了我正确的结果。如果我从 URL 中删除 requestString= 并将其附加到 body 参数，那么它不会给我正确的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:44:29.457

# #1：

这些**不是**合法的帖子参数。

# #2：

您的页面可能**不会**返回`200`

* * *

像这样更改您的代码（它可能会起作用^_^）：

```
var encodedURL = intranetUrl + "customer/Ri_logon5.asp";
var params = 'requestString=manish|^test1234|^|^X|^11111985|^1.0|^|$';
$.post(encodedURL,  params,
       function(data) {
         alert("Data Loaded: " + data);
       }); 
```

* * *

另外——你没有使用所有的局部变量。如果您不使用它们，那么创建它们**毫无意义**！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:06:36.950

使用`XMLHttpRequest`，我可以通过以下方式将参数发布到 URL：

```
function sendText(txt)
        {

            var internetUrl="http://myURL/";
            var url =internetUrl+ encodeURI("customer/Ri_logon.asp?requestString=");
            var parameters = 'manish|^test1234|^|^X|^11111985|^1.0|^|$';
            alert(url);
            alert(parameters);
            txt = parameters;
            var xhr = new XMLHttpRequest();
            xhr.open('POST', url, true);
            xhr.onload = function(e) {
              if (this.status == 200) {
                console.log(this.responseText);
                alert(this.responseText);
              }
              alert("!!!"+this.status);
            };

            xhr.send(txt);
          }

        </script> 
```

上面的代码在 Android、Blackberry 5 及更高版本以及 Symbian 上运行。

# c# - 保存前降低图像/流的质量

> ID：11525022
> 
> 赞同：1
> 
> 时间：2012-07-17T14:42:53.983
> 
> 标签：c#, stream

我正在尝试获取输入流（图像的 zip 文件）并提取每个文件。但是我必须在保存之前降低每张图像的质量（如果质量 < 100）。我尝试了以下方法，但它从不压缩图像：

```
public void UnZip(Stream inputStream, string destinationPath, int quality = 80) {
    using (var zipStream = new ZipInputStream(inputStream)) {
        ZipEntry entry;

        while ((entry = zipStream.GetNextEntry()) != null) {
            var directoryPath = Path.GetDirectoryName(destinationPath + Path.DirectorySeparatorChar + entry.Name);
            var fullPath = directoryPath + Path.DirectorySeparatorChar + Path.GetFileName(entry.Name);

            // Create the stream to unzip the file to
            using (var stream = new MemoryStream()) {
                // Write the zip stream to the stream
                if (entry.Size != 0) {
                    var size = 2048;
                    var data = new byte[2048];

                    while (true) {
                        size = zipStream.Read(data, 0, data.Length);

                        if (size > 0)
                            stream.Write(data, 0, size);
                        else
                            break;
                    }
                }

                // Compress the image and save it to the stream
                if (quality < 100)
                    using (var image = Image.FromStream(stream)) {
                        var info = ImageCodecInfo.GetImageEncoders();
                        var @params = new EncoderParameters(1);
                        @params.Param[0] = new EncoderParameter(Encoder.Quality, quality);
                        image.Save(stream, info[1], @params);
                    }
                }

                // Save the stream to disk
                using (var fs = new FileStream(fullPath, FileMode.Create)) {
                    stream.WriteTo(fs);
                }
            }
        }
    }
} 
```

如果有人能告诉我我做错了什么，我将不胜感激。由于代码变得有点难看，任何关于整理它的建议都会受到赞赏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:28:01.500

您真的不应该使用相同的流来保存压缩图像。MSDN 文档明确指出：“不要将图像保存到用于构建图像的同一流中。这样做可能会损坏流。” （[关于 Image.Save(...) 的 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms142148)）

```
using (var compressedImageStream = new MemoryStream())
{
    image.Save(compressedImageStream, info[1], @params);
} 
```

另外，你编码成什么文件格式？你没有指定。您刚刚找到了第二个编码器。你不应该依赖结果的顺序。而是搜索特定的编解码器：

```
var encoder = ImageCodecInfo.GetImageEncoders().Where(x => x.FormatID == ImageFormat.Jpeg.Guid).SingleOrDefault() 
```

...并且不要忘记检查您的系统上是否不存在编码器：

```
if (encoder != null)
{ .. } 
```

质量参数并不适用于所有文件格式。我假设您可能正在使用 JPEG？另外，请记住 100% JPEG 质量！= 无损图像。您仍然可以使用 Quality = 100 进行编码并减少空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:24:07.800

从 zip 流中提取图像后，没有用于压缩图像的代码。您似乎正在做的只是将解压缩的数据放入 MemoryStream 中，然后根据质量信息（可能会或可能不会压缩图像，具体取决于编解码器）将图像写入同一流。我首先建议不要写入您正在阅读的同一流。此外，您从 Encoder.Quality 属性中获得的“压缩”取决于图像的类型——您没有提供任何详细信息。如果图像类型支持压缩，并且传入的图像质量低于 100 开始，您将不会得到任何缩小。此外，您还没有提供任何相关信息。长话短说，你没有

# javascript - 如何使用 jquery 在输入字段中选择值？

> ID：11525023
> 
> 赞同：1
> 
> 时间：2012-07-17T14:42:56.727
> 
> 标签：javascript, jquery, html, forms

我正在尝试将输入字段中的值放入我的 post 语句以发送到我的 php 文件以更新记录而不重新加载页面。它适用于我输入的静态信息，但是当我想选择我在输入框中输入的内容时，我无法让它工作。什么都没发生。

```
<script src="../jquery.js"></script>
<script type="text/javascript">
    function editItem() {
        catno = $("#catno").attr('value');
        id = $("#id").attr('value');
        $.post('writeToDB.php', {
            id: id,
            catno: catno
        });
    }
</script>
</head>
<body>
    <form id="foo">
        <input type="hidden" value="<?php echo $row_Recordset1['ID']; ?>" name="id"
        id="id" />
        <input type="text" value="<?php echo $row_Recordset1['CAT_NO']; ?>" name="catno"
        id="catno" onchange="editItem();" />
    </form> 
```

我是这个 javasrcipt 世界和 jquery 的新手，但我正处于拔出头发的起点。我可能正在做一些非常愚蠢的事情

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T14:43:57.070

改变

```
catno = $("#catno").attr('value');
id = $("#id").attr('value'); 
```

至

```
var catno = $("#catno").val();
var id = $("#id").val(); 
```

用于[`.val()`](http://api.jquery.com/val/)检索输入的值。

您还应该在本地声明的变量前面加上`var`-[这个问题/答案很好地解释了为什么](https://stackoverflow.com/questions/2485423/javascript-is-using-var-to-declare-variables-optional)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:44:23.323

调用[`val()`](http://api.jquery.com/val/)方法

```
id = $("#id").val(); 
```

> val() 方法获取匹配元素集中第一个元素的当前值

所以你的代码将是

```
function editItem() {
    var catno = $("#catno").val();
    var id = $("#id").val()
    $.post('writeToDB.php', {
        id: id,
        catno: catno
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:44:22.890

使用 .val() ：

[http://api.jquery.com/val/](http://api.jquery.com/val/)

# grails - Grails 2.x 记录器冲突（slf4j、log4j 和 commons-logging）

> ID：11525025
> 
> 赞同：2
> 
> 时间：2012-07-17T14:43:06.087
> 
> 标签：grails, log4j, slf4j

`slf4j`在将现有应用程序从 Grails 1.3.7 升级到 Grails 2.0.4（也尝试过 2.0.3）后，我遇到了一些`log4j`冲突。看来

*   log4j 尝试使用 commons-logging 写入
*   公共日志写入 slf4j
*   但是 slf4j logger appender 使用 log4j

循环参考。`java.lang.StackOverflowError`结果。

```
java.lang.StackOverflowError
    at org.apache.log4j.PatternLayout.format(PatternLayout.java:500)
    at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251)
    at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66)
    at org.apache.log4j.Category.callAppenders(Category.java:206)
    at org.apache.log4j.Category.forcedLog(Category.java:391)
    at org.apache.log4j.Category.log(Category.java:856)
    at org.slf4j.impl.GrailsLog4jLoggerAdapter.logMessage(GrailsLog4jLoggerAdapter.java:191)
    at org.slf4j.impl.GrailsLog4jLoggerAdapter.error(GrailsLog4jLoggerAdapter.java:166)
    at org.apache.commons.logging.impl.SLF4JLog.error(SLF4JLog.java:213)
    at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251)
    at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66)
    at org.apache.log4j.Category.callAppenders(Category.java:206)
    at org.apache.log4j.Category.forcedLog(Category.java:391)
    at org.apache.log4j.Category.log(Category.java:856)
    at org.slf4j.impl.GrailsLog4jLoggerAdapter.logMessage(GrailsLog4jLoggerAdapter.java:191)
    at org.slf4j.impl.GrailsLog4jLoggerAdapter.error(GrailsLog4jLoggerAdapter.java:166)
    at org.apache.commons.logging.impl.SLF4JLog.error(SLF4JLog.java:213)
    at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251)
    at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66)
    at org.apache.log4j.Category.callAppenders(Category.java:206)
    at org.apache.log4j.Category.forcedLog(Category.java:391)
    at org.apache.log4j.Category.log(Category.java:856)
    at org.slf4j.impl.GrailsLog4jLoggerAdapter.logMessage(GrailsLog4jLoggerAdapter.java:191)
    at org.slf4j.impl.GrailsLog4jLoggerAdapter.error(GrailsLog4jLoggerAdapter.java:166)
    ... 
```

似乎 log4j 记录到 commons-logging、commons-loggin

我试图从依赖项中排除 log4j，并`log4j-over-slf4j`用作替换，但一些 Grails 类直接使用 Log4J：

```
java.lang.NoClassDefFoundError: org/apache/log4j/LogManager
    at org.slf4j.impl.GrailsSlf4jLoggerFactory.getLogger(GrailsSlf4jLoggerFactory.java:43)
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:253)
    at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:156)
    at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:132)
    at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:272) 
```

而且我不能排除 slf4j，因为它被标准 Grails 插件使用，比如 Resources 插件。

顺便说一句，在其他 Grails 2.0.3 项目中，我以前从未遇到过这种情况。似乎它具有特定于当前应用程序的配置或依赖关系，但我找不到任何不寻常的东西。

有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T16:16:55.917

通过取消注释默认附加程序修复：

```
appenders {
    console name:'stdout', layout:pattern(conversionPattern: '%c{2} %m%n')
} 
```

现在工作，但很奇怪

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T18:05:05.110

我有同样的`StackOverflowError`。当 Grails 在我的应用程序启动期间尝试记录一个完全不同的异常时，就会发生这种情况。所以这个问题与 Grails 记录异常有关。

**我通过在我的 log4j 配置中注释掉**这一行来修复它（in `Config.groovy`）：

```
error stdout: "StackTrace" 
```

之后`StackOverflowError`消失了，我可以看到潜在的异常。

# r - 返回具有特定值的数据框的所有行

> ID：11525026
> 
> 赞同：0
> 
> 时间：2012-07-17T14:43:16.463
> 
> 标签：r, dataframe, subset

我有一个包含多列的数据框，其中一个（称为：drift.N）是一系列 TRUE 和 FALSES。我将如何将“TRUE”行与“FALSE”行分开或要求 R 告诉我哪些行是drift.N=="TRUE" ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T14:46:52.263

如果您有一个名为的 data.frame `df`：

```
df[df$column_name,] 
```

为您获取 data.frame 的子集，其中`column_name`equals `TRUE`。要获取`FALSE`子集：

```
df[!df$column_name,] 
```

（发现感叹号！），在哪里！是`NOT`。获取索引在`column_name`哪里`TRUE`：

```
which(df$column_name)
which(!df$column_name) 
```

最后，我建议您上网下载一些基本的 R 教程并学习它们。这些问题以及许多其他基础知识将在其中得到处理。参见例如：

*   [http://www.cyclismo.org/tutorial/R/](http://www.cyclismo.org/tutorial/R/)
*   [http://cran.r-project.org/manuals.html](http://cran.r-project.org/manuals.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:47:45.367

这真的很容易，因为`R`可以使用逻辑索引。因此，如果`drift.N`已经包含 TRUE/FALSE，则只需：

```
yourdata[yourdata[, "drift.N"], ] 
```

应该管用。基本上，将列向量`yourdata[, "drift.N"]`作为您想要从整个数据帧中获取的行子集传递，`yourdata`. `drift.N == TRUE`将返回的行。

# java - Android：ListActivity 不显示任何项目

> ID：11525027
> 
> 赞同：0
> 
> 时间：2012-07-17T14:43:19.050
> 
> 标签：java, android, list, listview

我希望你能帮我解决这个问题。我的 ListActivity 类不会在列表中显示蚂蚁项目

这是我的代码：

```
import android.os.Bundle;
import android.provider.BaseColumns;
import android.app.Activity;
import android.app.ListActivity;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.CursorAdapter;
import android.widget.EditText;
import android.widget.SimpleCursorAdapter;
import android.support.v4.app.NavUtils;

public class Sale2 extends ListActivity {
    private static final int DIALOG_ID = 100;

    private SQLiteDatabase database;

    DBAdapter db;

    private CursorAdapter dataSource;

    private View entryView;

    private EditText firstNameEditor;

    private EditText lastNameEditor;

    private static final String fields[] = { "_id", "_date", "_soldPrice" };

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        try {
            db = new DBAdapter(this);
            db.open();
            Cursor data = db.getAllSales2();
            System.out.println("after getallsales2");
            dataSource = new SimpleCursorAdapter(this, R.layout.row, data,
                    fields, new int[] { R.id._id, R.id.first, R.id.last });
            System.out.println("after simplecursoradapter"
                    + dataSource.toString());

            setListAdapter(dataSource);
            System.out.println("setListAdapter");
        } catch (Exception e) {
            Log.e("ERROR", "ERROR IN CODE: " + e.toString());
            e.printStackTrace();
        }
    }

} 
```

这是 row.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/_id"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/first"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/last"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

笔记：

我确定光标上有一些数据。但它不会显示它们

帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:50:24.243

您缺少对 setContentView(View) 的调用，其中包含一个列表视图，该列表视图应填充来自 Cursor 的数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:49:34.870

尝试这个：

```
public class Sale2 extends ListActivity {
    private static final int DIALOG_ID = 100;

    private SQLiteDatabase database;

    DBAdapter db;

    private ListAdapter dataSource;

    private View entryView;

    private EditText firstNameEditor;

    private EditText lastNameEditor;

    private static final String fields[] = { "_id", "_date", "_soldPrice" };

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        try {
            db = new DBAdapter(this);
            db.open();
            Cursor data = db.getAllSales2();
            System.out.println("after getallsales2");
            startManagingCursor(data);
            dataSource = new SimpleCursorAdapter(this, R.layout.row, data,
                    fields, new int[] { R.id._id, R.id.first, R.id.last });
            System.out.println("after simplecursoradapter"
                    + dataSource.toString());

            setListAdapter(dataSource);
            System.out.println("setListAdapter");
        } catch (Exception e) {
            Log.e("ERROR", "ERROR IN CODE: " + e.toString());
            e.printStackTrace();
        }
    }

} 
```

我已将 dataSource 更改为`ListAdapter`并添加了`startManagingCursor`.

另请参阅此处的示例

> [http://developer.android.com/reference/android/app/ListActivity.html](http://developer.android.com/reference/android/app/ListActivity.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T16:26:40.727

您忘记使用对 ListView 的引用，但由于您扩展了 ListActivity 而不是 Activity，因此您必须获取**对 ListActivity 的 List 的引用，如下所示：**

`ListView lv =` **获取列表视图（）；**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-17T14:49:22.343

我认为您需要在从 xml 加载的列表对象上设置适配器。就像是：

```
listaNodiView = (ListView) findViewById(R.id.ListViewLista);
listaNodiView.setListAdapter(dataSource); 
```

布局 xml 声明中的 List 资源的 id在哪里`R.id.ListViewLista`（不是 row.xml）

# php - Magento：小部件的默认参数值

> ID：11525030
> 
> 赞同：1
> 
> 时间：2012-07-17T14:43:21.280
> 
> 标签：php, magento, widget

我在和几个参数中定义了一个小部件`widget.xml`，例如

```
<parameters>
      <headline translate="label">
          <visible>1</visible>
          <label>Display Amount</label>
          <type>text</type>
          <required>1</required>
      </dheadline>
</parameters> 
```

当用户创建小部件时，如何为要在后端的配置字段中显示的此类参数定义默认值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T15:06:26.827

使用`<value>`：

```
<parameters>
      <headline translate="label">
          <visible>1</visible>
          <label>Display Amount</label>
          <type>text</type>
          <required>1</required>
          <value>default value</value>
      </dheadline>
</parameters> 
```

# c# - Cmd 的参数不起作用

> ID：11525035
> 
> 赞同：-2
> 
> 时间：2012-07-17T14:43:32.437
> 
> 标签：c#, visual-studio-2010

从我之前的问题来看，我正在编写一个通过 CMD 执行多个文件的程序。

这是我的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Windows.Forms;
using System.Diagnostics;

namespace Convert
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }
    }

    private void BtnSelect_Click(object sender, RoutedEventArgs e)
    {
        OpenFileDialog Open = new OpenFileDialog();
        Open.Filter = "RIFF/RIFX (*.Wav)|*.wav";
        Open.CheckFileExists = true;
        Open.Multiselect = true;
        Open.ShowDialog();
        LstFile.Items.Clear();
        foreach (string file in Open.FileNames)
        {
            LstFile.Items.Add(file);
        }
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        LstFile.Items.Clear();
    }

    private void BtnConvert_Click(object sender, RoutedEventArgs e)
    {       Process p = new Process();      
            p.StartInfo.FileName = "cmd";
            p.StartInfo.UseShellExecute = false;
            foreach (string fn in LstFile.Items)
            {
                string fil = "\"";
                string gn = fil + fn + fil;
                p.Start();
                p.StartInfo.Arguments = gn;
            }            
        }      
    }    
} 
```

我用了

```
string fil = "\"";
string gn = fil + fn + fil; 
```

如果文件名有空格，请在完整文件名周围提供引号。

我的问题是我的程序 Opens CMD Put 没有在其中传递任何参数。我检查了 filnames(list) 是否正常工作并且它们很好。查看示例这是执行此操作的方法，但显然有问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:50:18.970

放

```
StartInfo.Arguements 
```

在您开始流程之前，我建议为您启动的每个流程创建一个新的流程类。

例子：

```
 foreach (string fn in LstFile.Items)
        {
            string fil = "\"";
            string gn = fil + fn + fil;

            Process p = new Process();
            p.StartInfo.FileName = "cmd";
            p.StartInfo.UseShellExecute = false;
            p.StartInfo.Arguments = gn;
            //You can do other stuff with p.StartInfo such as redirecting the output
            p.Start();
            // i'd suggest adding p to a list or calling p.WaitForExit();, 
            //depending on your needs.  
        } 
```

如果您尝试调用 cmd 命令，请提出您的论点

`"/c \"what i would type into the command Line\""`

这是我快速完成的一个例子。它在记事本中打开一个文本文档

```
 Process p = new Process();
        p.StartInfo.FileName = "cmd";
        p.StartInfo.UseShellExecute = false;
        p.StartInfo.Arguments = "/c \"New Text Document.txt\"";
        p.Start();
        p.WaitForExit(); 
```

# sql - SQL 链接表、INSERT INTO 和 JOIN

> ID：11525037
> 
> 赞同：1
> 
> 时间：2012-07-17T14:43:36.257
> 
> 标签：sql, join, linked-server, insert-into

我是新人，所以请温柔。

一直使用 SQL server 2008r2 根据从另一台服务器上更大的专有 SQL 数据库中提取的信息创建工作数据库。我可以使用 INSERT INTO 函数将信息提取到新表中，但是当我尝试通过连接从链接数据库的另一个表中添加链接字段时，我一无所获。事不宜迟，这是我的所有新奇荣耀的查询：

```
INSERT INTO [Cust_Info].[dbo].[form_data]
        (CustNo
        ,LastName
        ,FirstName
        ,Add1
        ,Add2
        ,City
        ,State
        ,Zip
        ,Phone1
        ,Phone2
        ,Email)
SELECT      [CustNo]
        ,[LastName]
        ,[FirstName]
        ,[Add1]
        ,[Add2]
        ,[City]
        ,[State]
        ,[Zip]
        ,[Phone1]
        ,[Phone2]
        ,[Email]

FROM [XYZ-SERVER-1\ETC].[Service].[dbo].[Customer]
JOIN [XYZ-SERVER-1\ETC].[Service].[dbo].[EmailInv] 
ON [Cust_Info].[dbo].[form_data].[CustNo]=[XYZ-SERVER-1\ETC].[Service].[dbo].
[EmailInv].[CustNo] 
```

我确信我犯了一个非常菜鸟的错误，但我继续在“ON”行上得到“Msg 4104”，在 select 语句的第一行得到一个“Msg 209”（不明确的列名 'CustNo'） .

我已经对不同论坛上的许多相关帖子进行了分类，并且根据我的帐户，这应该可以。你们中的一位兽医可以向这个菜鸟展示一下吗？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:49:52.297

好吧，我注意到的一件事是您正在尝试使用`INSERT INTO`您的桌子`[Cust_Info].[dbo].[form_data]`，但您不在声明`JOINing`中的这张桌子上`JOIN`。所以你的 JOIN 语法似乎不正确。我猜你正在尝试`JOIN`这种方式，请注意我使用了别名：

```
INSERT INTO [Cust_Info].[dbo].[form_data]
(
    CustNo
    ,LastName
    ,FirstName
    ,Add1
    ,Add2
    ,City
    ,State
    ,Zip
    ,Phone1
    ,Phone2
    ,Email
)
SELECT [CustNo] -- which table is this from select the alias? 
    ,[LastName]
    ,[FirstName]
    ,[Add1]
    ,[Add2]
    ,[City]
    ,[State]
    ,[Zip]
    ,[Phone1]
    ,[Phone2]
    ,[Email]

FROM [XYZ-SERVER-1\ETC].[Service].[dbo].[Customer] c
JOIN [XYZ-SERVER-1\ETC].[Service].[dbo].[EmailInv] e
    ON c.[CustNo]=e.[CustNo] 
```

但您还需要指定每列来自哪个表。例如，`[CustNo]`in`SELECT`在两张表中，你需要哪一张？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:47:28.113

那是因为`CustNo`is 两个表中的一个字段，所以 SQL 不知道该选择哪一个。

尝试：

```
INSERT INTO [Cust_Info].[dbo].[form_data]
        (CustNo
        ,LastName
        ,FirstName
        ,Add1
        ,Add2
        ,City
        ,State
        ,Zip
        ,Phone1
        ,Phone2
        ,Email)
SELECT      [Customer].[CustNo]
        ,[LastName]
        ,[FirstName]
        ,[Add1]
        ,[Add2]
        ,[City]
        ,[State]
        ,[Zip]
        ,[Phone1]
        ,[Phone2]
        ,[Email]

FROM [XYZ-SERVER-1\ETC].[Service].[dbo].[Customer] 
JOIN [XYZ-SERVER-1\ETC].[Service].[dbo].[EmailInv] 
ON [Cust_Info].[dbo].[form_data].[CustNo]=[XYZ-SERVER-1\ETC].[Service].[dbo].
[EmailInv].[CustNo] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:46:23.230

您在两个表中都有 custno。您应该在它前面加上 Customer.CustNo 来识别源表：

```
select Customer.CustNo, . . . 
```

显然，表之间没有其他列重复。通常，在进行连接时，最好在所有引用的列（任何地方）之前加上它们的源表。

# drupal - Drupal 7 Views：将暴露过滤器与上下文过滤器结合起来？

> ID：11525038
> 
> 赞同：2
> 
> 时间：2012-07-17T14:43:38.257
> 
> 标签：drupal, drupal-7, drupal-views, drupal-exposed-filter, drupal-contextual-filters

有没有办法让暴露的过滤器和上下文过滤器相互配合？我将标题字段设置为暴露的过滤器，然后在词汇表模式下也有一个上下文过滤器。当我使用暴露的过滤器进行搜索时，它可以正常工作，直到我单击上下文词汇表中的一个字母。然后我没有得到任何结果。

例如，当我第一次访问我的页面时，它显示字母 P 有 35 条记录。如果我搜索单词 Christmas，我会在页面上得到一些结果，但字母 P 的记录数仍然显示为 35 . 当我点击字母 PI 时得到 0 结果，因为视图仍然被单词 Christmas 过滤。

有没有办法让这两个东西很好地相互配合以获得一些更有意义的结果？如果我单击一个词汇表字母而不是重置暴露的标题过滤器，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-12T07:49:14.053

1.  启用[filter_harmonizer](https://drupal.org/project/filter_harmonizer)模块（实际上这个模块是在问题日期之后发布的）
2.  （可选）为视图禁用 AJAX 并设置上下文过滤器：

    *   “当过滤器值不在 URL 中时 -> 显示指定字段的所有结果”，因为默认情况下，它在第一次加载时显示以字母“a”开头的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T05:01:24.943

您应该尝试将过滤器的“与”更改为“或”默认情况下，如果您检查添加的过滤器，它们会以“与”条件添加。因此，每次您过滤结果时，它都会与先前的查询进行“与”运算。

问候。

# html - jquery插件转换一个移动版 Safari (iOS) 上的可用列表 Safari for iOS 忽略 <select>元素的 size 属性。它总是呈现单行高下拉而不是多行列表框。在我们的例子中，我使用多行来显示一个列表，我们不希望 iOS 在这种情况下产生的用户体验。你能推荐一个 jquery 插件，将</select> 转换为看起来像列表并且可以在 Safari 移动设备上使用的东西吗？确保对于 for 循环的每次

> ID：11525046
> 
> 赞同：6
> 
> 时间：2012-07-17T14:43:58.190
> 
> 标签：html, jquery-plugins, mobile-safari

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T03:32:05.127

我是 OP，我写了一个插件来解决我的问题。请参阅[https://github.com/redhotsly/safarimobile-multiline-select](https://github.com/redhotsly/safarimobile-multiline-select)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:09:08.267

尝试使用使用 jQuery 创建自己的列表的[选择框工厂。](http://www.headcircus.com/uiguy/selectboxfactory/selectboxfactory.html)

# python - 确保 for 循环的每次迭代只使用嵌套列表中的一个列表

> ID：11525047
> 
> 赞同：0
> 
> 时间：2012-07-17T14:44:01.933
> 
> 标签：python, for-loop

我有两个列表列表，一个包含两个日期和一个 ID 号，另一个包含很多信息，包括一个 ID 号和一个日期。我需要查找该日期是否在每个 ID 号的其他两个日期之间，如果是，请将其写入新列表。更简单地说，对于每个 ID 号，如果某个日期介于其他两个日期之间，则将信息写入一个新列表。目前，所有列表都被放入新列表中，这是错误的（并非所有日期都在其他两个日期之间）。

```
mv = [['05/13/2012', '09:54:27', 'U', '#0F', '0006E3DADA', 'T', 'Un\n', 'F3', '13 05 12'], 
      ['05/13/2012', '09:54:28', 'U', '#0F', '0006E3DADA', 'T', 'Un\n', 'F3', '13 05 12'],
      etc] 
```

对于 mv，这是我感兴趣的列表中的最后一个日期。

```
datepairs = [['21 05 01', '04 06 01', 'C1'], 
             ['27 07 06', '10 08 06', 'C1'],
             etc] 
```

这些是 mv 的日期必须介于两者之间的两个日期。

```
visitsbetweendates=[]
for visit in mv:
    for date in datepairs1:
        if date[2]==visit[7]: #if the id number is the same in both lists
            if date[0]<= visit[8] <= date[1]: #if the visit date is between the datepair dates
               if visit not in visitsbetweendates: #if the list is unique
                    visitsbetweendates.append(visit)
                break 
```

我认为可能发生的是 date[2]、date[0] 和 date[1] 并不是每次循环运行时都来自 datepairs 中的同一个列表，或者 id 编号出现问题。如果这不是特别清楚，我很抱歉。谢谢你的帮助！

**编辑：** 这是我将日期转换为日期时间对象的方法，这是在上面的代码之前完成的。

```
from datetime import datetime
for v in mv:
    e=datetime.strptime(visit[0],'%m/%d/%Y')
    s=e.strftime('%d %m %y')
    visit.append(s)    
datepairs1=[]
for date in datepairs:
    d=datetime.strptime(str(date[0]),' %d %b %y')
    f=datetime.strptime(str(date[1]),' %d %B %Y')
    e=d.strftime('%d %m %y')
    g=f.strftime('%d %m %y')
    gah=[e,g,date[2].strip(' ')]
    datepairs1.append(gah) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:46:10.060

首先，我会将两个列表都转换为字典，这将使代码更有效率，因为您不必每次开始搜索不同的键时都重新循环 datepairs1 列表，所以这就是我要做的：

首先将它们转换为字典：

```
between_dates = dict([(d[2], (d[0], d[1])) for d in datepairs1])
second_dict = {}
for m in mv:
    key = m[7]
    second_dict.setdefault(key ,[])  # this creates the key with an empty list inside if it doesn't exists yet
    second_dict[key].append((m[0], m[8])) 
```

这将以这样的语法结束：

```
between_dates = {'C1': ('21 05 01', '04 06 01'), ....}
second_dict = {'C1': [('05/13/2012', '13 05 12'), ('05/13/2012', '13 05 12')]} 
```

在两个列表中执行此操作将使搜索更快且更易于调试，现在@eumiro 所说的很重要，因此您应该将日期保存为 datetimes 对象，您可以使用[datetime.strptime](http://docs.python.org/library/datetime.html#strftime-strptime-behavior)执行此操作。您可以在那里找到将字符串日期转换为日期时间对象的格式。IE：`datetime.strptime('02 06 2011', '%d %m %Y')`

所以现在比较一下：

```
visits_between_dates=[]
for key, bd in between_dates.items():
    if second_dict.get(key, None):  # This will ask if the se
        for sl  in second_dict.values():
            if not sl in visits_between_dates and bd[0]<= sl[1] <= bd[1]:
                visitsbetweendates.append(sl) 
```

也许您需要附加 mv 列表中的所有信息，但可以轻松地将其添加到字典中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:51:18.403

将日期预处理为可以比较的相同格式

```
for n in range(0,len(datepairs)):
    (d,m,y)=(datepairs[n][1]).split(" ")
    datepairs[n][1]="%d%s%s" % (2000+int(y),m,d)
    (d,m,y)=(datepairs[n][0]).split(" ")
    datepairs[n][0]="%d%s%s" % (2000+int(y),m,d)

for d in range(0,len(mv)):
    (d,m,y)=(mv[n][0]).split("/")
    mv[n][0]="%s%s%s",(y,m,d) 
```

那么你的“visit in mv”循环应该可以工作

# ruby-on-rails - heroku postgres 副本-“！找不到应用程序”

> ID：11525055
> 
> 赞同：0
> 
> 时间：2012-07-17T14:44:15.713
> 
> 标签：ruby-on-rails, ruby, postgresql, heroku, taps

尝试使用以下命令复制生产数据库：

```
heroku db:pull postgres://postgres:@localhost/prod_20120717 \
--app my_app --confirm my_app 
```

但我得到：

```
$ heroku db:pull postgres://postgres:@localhost/prod_20120717 --app my_app \
--confirm my_app
Loaded Taps v0.3.24
Warning: Data in the database 'postgres://postgres:@localhost/prod_20120717' \
will be overwritten and will not be recoverable.
 !    App not found. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:29:42.070

heroku 可能配置错误。尝试这样做`heroku login`并重新登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T19:15:50.160

另外，请使用 pgbackups，而不是 pg:pull。[https://devcenter.heroku.com/articles/pgbackups](https://devcenter.heroku.com/articles/pgbackups)

# batch-file - 如何创建批处理文件以管理员身份运行 cmd

> ID：11525056
> 
> 赞同：46
> 
> 时间：2012-07-17T14:44:14.947
> 
> 标签：batch-file

我需要运行一个需要注册 DLL 的批处理文件。DLL 注册失败，因为批处理文件没有以“管理员”身份启动命令提示符。

有没有办法通过批处理文件以**管理员身份启动“****命令提示符**” 。

 **环境：Win7/Vista

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2015-03-13T07:19:37.777

这个脚本可以解决问题！只需将其粘贴到 bat 文件的顶部即可。如果要查看脚本的输出，请在批处理文件的底部添加“暂停”命令。

该脚本现在经过略微编辑以支持命令行参数。

```
@echo off
:: BatchGotAdmin
::-------------------------------------
REM  --> Check for permissions
>nul 2>&1 "%SYSTEMROOT%\system32\cacls.exe" "%SYSTEMROOT%\system32\config\system"

REM --> If error flag set, we do not have admin.
if '%errorlevel%' NEQ '0' (
    echo Requesting administrative privileges...
    goto UACPrompt
) else ( goto gotAdmin )

:UACPrompt
    echo Set UAC = CreateObject^("Shell.Application"^) > "%temp%\getadmin.vbs"
    set params = %*:"="
    echo UAC.ShellExecute "cmd.exe", "/c %~s0 %params%", "", "runas", 1 >> "%temp%\getadmin.vbs"

    "%temp%\getadmin.vbs"
    del "%temp%\getadmin.vbs"
    exit /B

:gotAdmin
    pushd "%CD%"
    CD /D "%~dp0"
::--------------------------------------

::ENTER YOUR CODE BELOW: 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-17T14:47:03.777

您可能必须先使用另一个批处理文件才能以管理员权限启动第二个批处理文件。

在第一次使用

```
runas /noprofile /user:mymachine\administrator yourbatchfile.bat 
```

进一步阅读后，您必须能够在提示符处输入密码。您无法通过管道输入密码，因为出于安全原因，此功能已被锁定。

[您可能对psexec](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)有更多的运气。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-05-18T08:13:06.353

按`Ctrl`+`Shift`并双击快捷方式以作为提升的进程运行。

也可以从开始菜单工作。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-22T12:08:53.823

（这是基于[@DarkXphenomenon 的回答](https://stackoverflow.com/a/11525223/835945)，不幸的是有一些问题。）

您需要将代码包含在此包装器中：

```
if _%1_==_payload_  goto :payload

:getadmin
    echo %~nx0: elevating self
    set vbs=%temp%\getadmin.vbs
    echo Set UAC = CreateObject^("Shell.Application"^)                >> "%vbs%"
    echo UAC.ShellExecute "%~s0", "payload %~sdp0 %*", "", "runas", 1 >> "%vbs%"
    "%temp%\getadmin.vbs"
    del "%temp%\getadmin.vbs"
goto :eof

:payload
    echo %~nx0: running payload with parameters:
    echo %*
    echo ---------------------------------------------------
    cd /d %2
    shift
    shift
    rem put your code here
    rem e.g.: perl myscript.pl %1 %2 %3 %4 %5 %6 %7 %8 %9
goto :eof 
```

这使得批处理文件以提升的用户身份运行。它向特权代码添加了两个参数：

*   word `payload`，表示这是有效载荷调用，即已经提升。否则它只会一遍又一遍地打开新进程。

*   调用主脚本的目录路径。由于 Windows*总是* 在“%windir%\system32”中启动提升的 cmd.exe，因此没有简单的方法知道原始路径是什么（*并且*保留在不接触代码的情况下复制脚本的能力）

**注意：**不幸的是，由于某种原因`shift`不适用于`%*`，所以如果您需要传递实际参数，您将不得不求助于我在示例中使用的丑陋表示法 ( `%1 %2 %3 %4 %5 %6 %7 %8 %9`)，这也带来了最多 9 个参数的限制

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-10-06T18:47:06.093

当脚本文件驻留在非系统驱动器 (c:) 和带有空格的目录中时，防止脚本失败。

**Batch_Script_Run_As_Admin.cmd**

```
@echo off
if _%1_==_payload_  goto :payload

:getadmin
    echo %~nx0: elevating self
    set vbs=%temp%\getadmin.vbs
    echo Set UAC = CreateObject^("Shell.Application"^)                >> "%vbs%"
    echo UAC.ShellExecute "%~s0", "payload %~sdp0 %*", "", "runas", 1 >> "%vbs%"
    "%temp%\getadmin.vbs"
    del "%temp%\getadmin.vbs"
goto :eof

:payload

::ENTER YOUR CODE BELOW::   

::END OF YOUR CODE::

echo.
echo...Script Complete....
echo.

pause 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-12-12T00:20:54.100

这适用于我在 Windows 7 到 10 中的参数，当从任何地方（包括浏览器）启动应用程序或文件时，以及从任何地方访问文件时。用您的代码替换（*您的批处理脚本此处*锚点）。该解决方案可能会有所帮助:)

```
@echo off

call :isAdmin

if %errorlevel% == 0 (
    goto :run
) else (
    echo Requesting administrative privileges...
    goto :UACPrompt
)

exit /b

:isAdmin
    fsutil dirty query %systemdrive% >nul
exit /b

:run
  <YOUR BATCH SCRIPT HERE>
exit /b

:UACPrompt
    echo Set UAC = CreateObject^("Shell.Application"^) > "%temp%\getadmin.vbs"
    echo UAC.ShellExecute "cmd.exe", "/c %~s0 %~1", "", "runas", 1 >> "%temp%\getadmin.vbs"

    "%temp%\getadmin.vbs"
    del "%temp%\getadmin.vbs"
exit /B 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-07-05T22:38:33.180

您可以使用链接到批处理文件的快捷方式。只需进入快捷方式的属性并选择高级，然后“以管理员身份运行”。

然后只需隐藏批处理文件，然后运行快捷方式。

这样，您甚至可以为快捷方式设置自己的图标。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-05-23T09:34:59.550

也许是这样的：

```
if "%~s0"=="%~s1" ( cd %~sp1 & shift ) else (
  echo CreateObject^("Shell.Application"^).ShellExecute "%~s0","%~0 %*","","runas",1 >"%tmp%%~n0.vbs" & "%tmp%%~n0.vbs" & del /q "%tmp%%~n0.vbs" & goto :eof
) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-12-20T09:10:33.723

正如 user2549366 之前建议的那样，“您可以使用链接到批处理文件的快捷方式。” 但在快捷方式的“属性”->“兼容性”选项卡中，可能会禁用以管理员身份运行。

因此，您只需右键单击“file.bat - 快捷方式”，然后转到 -> 属性 -> 快捷方式选项卡 -> 高级，然后您可以单击以管理员身份运行。之后，您可以执行快捷方式。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-08-21T07:42:31.627

这是本质上相同文件的更简单版本。

```
@echo off
break off
title C:\Windows\system32\cmd.exe
cls

:cmd
set /p cmd=C:\Enter Command:

%cmd%
echo.
goto cmd 
```

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2016-07-24T17:28:45.810

使用记事本或您选择的任何文本编辑器制作文本。打开记事本，写下这个不带引号的短命令“cmd.exe”并将其保存为cmd.bat。

单击 cmd.bat 并选择“以管理员身份运行”。**

# http - 如何在没有 Ajax 的情况下触发 HTTP PUT 请求？

> ID：11525066
> 
> 赞同：1
> 
> 时间：2012-07-17T14:44:45.963
> 
> 标签：http

对于网页上的静态链接，浏览器会根据是否附加某种形式的参数，向网站发出 GET 或 POST 请求。

但是，我希望浏览器对该链接发出 PUT 请求，我该怎么做？我知道 Ajax 可以做到，但我不想使用 Ajax。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:49:33.700

> 我希望浏览器对该链接发出 PUT 请求

根据[这个提交给 w3 的内容](http://amundsen.com/examples/put-delete-forms/)，似乎`PUT`并且目前在 html 表单中不受支持。`DELETE`

> 我知道 Ajax 可以做到

并非总是如此。因为`PUT`有时某些浏览`DELETE`器[不支持](https://stackoverflow.com/questions/165779/are-the-put-delete-head-etc-methods-available-in-most-web-browsers)，所以 ajax 无法使用它们，除非创建一个虚拟参数来触发真实`PUT`或`DELETE`服务器端，这给人一种 ajax 完全支持 HTTP 的错觉。

# java - 如何在密钥库上为我的密钥对创建证书？

> ID：11525074
> 
> 赞同：2
> 
> 时间：2012-07-17T14:45:21.373
> 
> 标签：java, security, cryptography, x509certificate, key-pair

如何为我的 KeyPair 创建 X509Certificate？（我的班级已经有了 KeyPair，我需要创建一个证书来保存我的公钥，然后将其存储在密钥库中）。

我期待有一个 X509Certificate 构造函数能够接收我的公钥，然后通过 keystore.setEntry(pvtkey, cert) 存储它，但我没有发现将新证书和我的密钥对关联起来没有任何用处......

任何的想法？

编辑：我也尝试将证书链作为 null 传递，但它不起作用，它看起来像[http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=5866fda73ac1258fcfebef9c3234?bug_id=4906869上报告的错误](http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=5866fda73ac1258fcfebef9c3234?bug_id=4906869)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T23:05:37.093

Oracle Java 中没有用于创建 X509Certificate 的 Java 类。你要么必须

1.  使用 keytool 程序（简单，但不是 java），或者
2.  编写自己的自定义代码（硬），
3.  使用像 bouncycastle 这样的第三方库（相对容易）。

编辑 ：

由于这些条目可以保留相当长的时间，我应该补充一点，上述陈述适用于 Java 7 及更早版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-29T04:37:55.267

这是与如何生成自签名 X509Certificate 的解决方案相关的问题： [链接](https://stackoverflow.com/questions/29852290/self-signed-x509-certificate-with-bouncy-castle-in-java)

尝试以这种方式使用 BouncyCastle 类：

```
// generate a key pair
KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance("RSA", "BC");
keyPairGenerator.initialize(4096, new SecureRandom());
KeyPair keyPair = keyPairGenerator.generateKeyPair();

// build a certificate generator
X509V3CertificateGenerator certGen = new X509V3CertificateGenerator();
X500Principal dnName = new X500Principal("cn=Example_CN");

// add some options
certGen.setSerialNumber(BigInteger.valueOf(System.currentTimeMillis()));
certGen.setSubjectDN(new X509Name("dc=Example_Name"));
certGen.setIssuerDN(dnName); // use the same
// yesterday
certGen.setNotBefore(new Date(System.currentTimeMillis() - 24 * 60 * 60 * 1000));
// in 2 years
certGen.setNotAfter(new Date(System.currentTimeMillis() + 2 * 365 * 24 * 60 * 60 * 1000));
certGen.setPublicKey(keyPair.getPublic());
certGen.setSignatureAlgorithm("SHA256WithRSAEncryption");
certGen.addExtension(X509Extensions.ExtendedKeyUsage, true, new ExtendedKeyUsage(KeyPurposeId.id_kp_timeStamping));

// finally, sign the certificate with the private key of the same KeyPair
X509Certificate cert = certGen.generate(keyPair.getPrivate(), "BC"); 
```

记得添加安全提供者：

```
Security.addProvider(new BouncyCastleProvider()); 
```

# mysql - MySQL 选择重构

> ID：11525077
> 
> 赞同：0
> 
> 时间：2012-07-17T14:45:27.833
> 
> 标签：mysql

在 MySQL 上，这不会运行：

```
delete from robottinosino where date = (select max(date) from robottinosino); 
```

错误信息：

> ERROR 1093 (HY000): 您不能在 FROM 子句中指定目标表 'robottinosino' 进行更新

问题：

*   *为什么*？（强调“为什么”，所以 Q 不会被错误地标记为“重复”）
*   如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T14:48:38.647

MySQL 不允许您从您也从中选择的表中删除。在许多情况下，这是一种竞争条件——您可能在查询的选择部分有机会检索它们之前从表中删除记录。

在您的情况下，应该允许查询，因为这场比赛没有任何危险，但 MySQL 不够聪明，无法解决这个问题。

这里有一个解决方法：[MySQL 错误 1093 - 无法在 FROM 子句中指定要更新的目标表](https://stackoverflow.com/questions/45494/mysql-error-1093-cant-specify-target-table-for-update-in-from-clause)

# mysql - 使用 sql 进行关键字搜索

> ID：11525079
> 
> 赞同：1
> 
> 时间：2012-07-17T14:45:33.650
> 
> 标签：mysql, sql

在构建应用程序时，我遇到了一个我无法解决的难题。我有一个包含几个关键字的表格，例如：

**结构体：**

```
id  keyword
1   iphone 4
2   iphone 4 16gb black
3   iphone 3gs
4   iphone 5 32gb white
5   macbook pro 13" late 2009
6   macbook air 15"
... 
```

现在我正在尝试使用关键字从该数据库中获取结果。例如，我正在寻找`iphone 4 black`. 我尝试以这种方式做到这一点：keyword like `%iphone%4%black`，但是我遇到的问题是关键字的排序`like`很重要。于是我尝试了mysql的fulltext-serach。但是这个搜索也会返回我，例如`iphone 3gs`，在搜索时`iphone 4`。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:52:00.767

尝试这个：

```
where keyword like '%iphone%'
and keyword like '%4%'
and keyword like '%black%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:52:53.593

一起使用多个 LIKE 条件：

```
WHERE keyword LIKE '%iphone%' AND keyword LIKE '%4%' AND keyword LIKE '%black%' 
```

然后最终您实际上可以开始将“点”归因于不同的匹配项，以通过在您的 ORDER BY 中使用一些花哨的 IF 来排序您的结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T15:04:22.143

你是如何使用全文选项的？它需要查询中的文字吗？

但是，既然您尝试过，请考虑使用布尔选项（http://dev.mysql.com/doc/refman/5.1/en/fulltext-boolean.html）。

这允许您指定必须在搜索中包含或排除的单词。在您的情况下，您希望包含所有内容，因此您需要一个像“+iphone +4”这样的搜索字符串。您需要将其直接放入查询中。

```
where match(keyword) against ('+iphone +4' in boolean mode) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T14:50:30.560

你可以试试这个：

```
WHERE keyword LIKE %iphone% AND keyword LIKE %black% 
```

# ef-code-first - 一次错误会破坏实体框架的后续使用

> ID：11525082
> 
> 赞同：4
> 
> 时间：2012-07-17T14:45:40.470
> 
> 标签：ef-code-first, autofac, lifecycle, entity-framework-5

我们的实体框架有问题。例如，如果我们这样做：

```
modelBuilder.Conventions.Remove<OneToManyCascadeDeleteConvention>(); 
```

然后我们尝试删除一个映射了依赖它的子实体的实体，我们得到一个错误是合乎逻辑的。（当数据库中有依赖于它的子级时，不能删除父级）。

之后，使用新的上下文实例，执行 'ParentEntity.ChildEntities.ToList()' 仍然有问题！

一种解决方法是重新启动应用程序池，问题就消失了。

我们正在使用 Autofac 并且上下文的生命周期被设置（并确认）为每个 HttpRequest，因此错误在其他地方仍然存在。知道可以做些什么来避免这些错误吗？

我们的猜测是 objectcontext 在其他地方是持久的，它将子实体的状态存储为“EntityState.Deleted”，因此这与在后续调用中从数据库接收的实际数据相冲突。

**更新：**似乎对堆栈的仔细检查表明存在一个惰性内部上下文：

```
[DbUpdateException: An error occurred while saving entities that do not expose foreign key properties for their relationships. The EntityEntries property will return null because a single entity cannot be identified as the source of the exception. Handling of exceptions while saving can be made easier by exposing foreign key properties in your entity types. See the InnerException for details.]
    System.Data.Entity.Internal.InternalContext.SaveChanges() +200
    System.Data.Entity.Internal.LazyInternalContext.SaveChanges() +33
    System.Data.Entity.DbContext.SaveChanges() +20 
```

也许如果我以某种方式禁用 LazyInternalContext？这可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T00:02:34.697

如果您出于某种原因不想获取异常并将数据库保持在有效状态，您可以通过停止验证来做到这一点：

```
context.Configuration.ValidateOnSaveEnabled = false; // you can put this in the constructor of your context;
context.SaveChanges(); 
```

# version-control - 如果 jenkins 作业由 bash 脚本驱动，则 ${CHANGES} 在 mail-ext 插件中不起作用

> ID：11525083
> 
> 赞同：1
> 
> 时间：2012-07-17T14:45:40.813
> 
> 标签：version-control, jenkins, jenkins-plugins

我已经设置了一个 Jenkins 工作来构建一个项目。我正在使用 email-ext 插件发送构建通知，目的是显示谁做了什么以及文件的路径发生了变化。但不幸的是，我什么也没得到。我相信原因是在“源代码管理”下我将其设置为“无”。我用来驱动构建的 shell 脚本负责签入基于 CVS 标记的代码副本并运行 maven 来进行构建。在分机电子邮件中，我使用以下语法

```
${CHANGES_SINCE_LAST_SUCCESS, reverse=true, showPaths=true,
format="\n====\n Build # %n\n%c\n 的更改",
changesFormat="\n[%r] %d %a %m %p\n"}

```

同样的事情`CHANGES`： `${CHANGES, showPaths=true}`

如果在源代码管理下使用选项，有没有办法获取`CHANGES`和`CHANGES_SINCE_LAST_SUCCESS`工作？`None`

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T19:12:23.647

EmailExt 插件从 Jenkins 获取该信息。由于 Jenkins 只能通过其 SCM 插件访问该信息，因此答案是“否”，如果不指定 SCM 选项，您将无法做到这一点。

你可以做两件事：

(1) 手工操作。如果我没记错的话，对于 CVS，这意味着无论如何都要签出工作副本。(2) 使用 SCM 签出/更新选项，但将工作副本存储在一边，而不在构建中使用它。您将使用两倍的磁盘空间，但现在磁盘空间不是问题。

顺便说一句，你为什么使用 CVS？SVN、GIT 和 Mercurial 都是免费的。

# node.js - 如何在 Redis NodeJS 上订阅多个频道

> ID：11525085
> 
> 赞同：3
> 
> 时间：2012-07-17T14:45:42.450
> 
> 标签：node.js, redis

我有一个我会不时调用的函数。

```
function blah() {
   sub.unsubscribe();
   sub.subscribe("a");
   sub.subscribe("b");
} 
```

以上导致错误消息“错误：node_redis 命令队列状态错误”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:56:31.867

与[https://github.com/mranney/node_redis/issues/137相同](https://github.com/mranney/node_redis/issues/137)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-21T17:07:14.947

我目前正在使用[**redis**](https://www.npmjs.com/package/redis)。我也面临着同样的问题，我试图订阅一组频道。

```
var redis = require('redis')

const subscribe = redis.createClient({
    host: 'localhost',
    port: 6379
}) 
subscribe.psubscribe(`user:chat:*`)

subscribe.on('pmessage', function(pattern, channel, message) {
    console.log(channel, message, pattern)
    // Write Your Awesome Code here.
}) 
```

psubscribe 用于使用 redis 订阅多个频道。您可以根据模式订阅多个频道。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T14:57:47.957

订阅连接后，它只能发出与订阅相关的命令（订阅、psubscribe 等） 您的代码的另一部分可能使用相同的连接吗？您也可以尝试通过一个电话订阅多个频道`sub.subscribe("a", "b")`或订阅符合您需求的模式？

# php - 服务器到服务器 HTTP GET/POST 得到错误 400 - 在浏览器上点击相同的 URL 按预期处理

> ID：11525088
> 
> 赞同：0
> 
> 时间：2012-07-17T14:45:47.023
> 
> 标签：php, mysql, http

我们一直在尝试集成这个回调方法，它基本上是从我们合作伙伴的服务器到我们的服务器的 HTTP GET / POST。回调 URL 如下所示 -

```
http://www.yourserver.com/callback.php?tid=[=tid=]&uid=[=order_id=]&timestamp=[=timestamp=]&country=[=country=]&ip=[=ip=]&useragent=[=useragent=]&sid=[=subid=]&payout=[=payout=]&currency=[=currency=]&udid=[=iphone_udid=]&campaign_id=[=campaign_id=] 
```

每当交易发生时，我们所在领域之外的合作伙伴的服务器都会发布到我们的服务器上，我们有一个 callback.php 服务，该服务处理所需并从帖子接收数据并写入 mysql 数据库。

我们注意到在浏览器上点击上面的 URL 会按预期获取数据并将其写入数据库。但是当服务器到服务器 HTTP 调用发生时，发布服务器会收到 ERROR 400。

这个回调方法是在没有通过 http 而不是 https 进行身份验证的情况下执行的，只是为了暂时保持简单。

我们正在使用的 callback.php 代码如下。

```
<?php
include "DBConnection.inc";
require("logging.php");

// Fetch data from callback url
$uid = $_REQUEST['uid'];
$tid = $_REQUEST['tid'];
$sid = $_REQUEST['sid'];    
$timestamp = $_REQUEST['timestamp'];
$country = $_REQUEST['country'];
$ip = $_REQUEST['ip'];
$useragent = $_REQUEST['useragent'];    
$payout = $_REQUEST['payout'];
$currency = $_REQUEST['currency'];
$udid = $_REQUEST['udid'];
$campaign_id = $_REQUEST['campaign_id'];    

// Initialize the local variables
$errorLoggingPath = "callback-url.log";

// Insert data into database
$insertQuery = "INSERT INTO tb_callback_url VALUES ('$uid', '$tid', '$sid', '$timestamp', '$country', '$ip', '$useragent', '$payout', '$currency', '$udid', '$campaign_id')";
mysql_query($insertQuery);

if( mysql_errno() <> 0 )
{
    LogError("INSERT failed in tb_callback_url: " . mysql_error(), __FILE__, __LINE__ , $errorLoggingPath);
}

mysql_close();?> 
```

在 Web 服务器设置或 callback.php 代码方面有什么特别值得我们研究的吗？

在此先感谢您的帮助。

# .net - CR XI Release 2 在 Win 7 64 位开发机器上的 VS 2008 中引发错误

> ID：11525090
> 
> 赞同：1
> 
> 时间：2012-07-17T14:45:55.150
> 
> 标签：.net, crystal-reports, 64-bit

我们的开发人员刚刚获得了新的 Win 7 64 位盒子。我们将 VS 2008 与 Crystal Reports XI Release 2 Service Pack 6 一起使用。如果我们通过 VS 2008 在我们的应用程序中运行报表，则会收到以下错误：

> 尝试加载 Crystal Reports 运行时时出错。
> 
> Crystal Reports 注册表项权限不足或 Crystal Reports 运行时安装不正确。
> 
> 请安装包含正确版本的 Crystal Reports 运行时的相应 Crystal Reports redistutable (CRRedist*.msi)。

我们之前的开发盒是 Win 7 32 位，没有问题。

我搜索了论坛，发现了一些类似的问题。我试过以 x86 运行应用程序，安装 64 位的 redist，一些论坛说你必须升级到 CR 2008，因为 XI R2 不支持 64 位。

任何帮助，将不胜感激。在此期间我会继续寻找。

# php - 如何使用正则表达式（PCRE）匹配 4 个重复数字

> ID：11525093
> 
> 赞同：-1
> 
> 时间：2012-07-17T14:46:12.450
> 
> 标签：php, regex, pcre

我想检测用户选择的 pin 是否包含 4 个相同的数字，例如 1111 或 2222。我在 PHP 中使用 preg_match。

我怎样才能调整这个[答案](https://stackoverflow.com/questions/6507982/regex-to-find-repeating-numbers)来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T14:48:25.070

你可以使用这个正则表达式：

```
/(\d)\1{3}/ 
```

这匹配一个数字`(\d)`，然后匹配相同的数字 3 次`\1{3}`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:48:38.507

```
count(array_unique(str_split($pin))) > 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T14:50:30.543

根据您链接到的答案进行调整：

```
\b(\d)\1{3}\b 
```

与其使用`\1+`它将匹配第一个数字的任意数量的重复，不如将其替换为`\1{3}`仅允许第一个数字重复三次，从而在匹配时为您提供所需的四位数字。

或者，如果您愿意：

```
\b(\d)\1\1\1\b 
```

# leaflet - 如何在 Leaflet 多边形上触发本机弹出窗口

> ID：11525100
> 
> 赞同：0
> 
> 时间：2012-07-17T14:46:34.980
> 
> 标签：leaflet

**如何手动触发 Leaflet 多边形上的原生弹出窗口？**

我可以像这样将本机弹出窗口绑定到每一层：

```
geojsonLayer.on("featureparse", function (e){
    // bind the native popup
    var popupContent = "popup content goes here";
    e.layer.bindPopup(popupContent);
}); 
```

而且我已经手动为每个多边形分配了一个 ID，以便以后可以像这样引用它们：

```
map._layers['poly0'] 
```

我试过像这样触发弹出窗口：

```
map._layers['poly0'].openPopup(); 
```

但这给了我这样的错误：

```
map._layers['poly0'].openPopup is not a function 
```

知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:26:01.887

矢量图层的 openPopup 最近才出现在最新版本中，以前没有。

此外，请查看 Leaflet 0.4 发布公告： http: [//leaflet.cloudmade.com/2012/07/30/leaflet-0-4-released.html](http://leaflet.cloudmade.com/2012/07/30/leaflet-0-4-released.html)（并注意 GeoJSON API 已更改且不向后兼容，因此您还必须更新您的代码）

# mvvm-light - 我该如何处理这个消息：Messenger.Default.Send >（味精）；

> ID：11525101
> 
> 赞同：0
> 
> 时间：2012-07-17T14:46:41.327
> 
> 标签：mvvm-light

鉴于这种：

```
var msg = new NotificationMessage<bool>(isHead, buffer.ToString());

Messenger.Default.Send<NotificationMessage<bool>>(msg); 
```

我如何捕捉到这条消息？

我不确定 Messenger.Default.Register... 语法，

或操作方法的原型。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:21:52.590

D'oh, here it is:

```
Messenger.Default.Register<NotificationMessage<bool>>(this, MessageRx);

private void MessageRx(NotificationMessage<bool> msg) 
```

msg.Notification is the message string, and msg.Content is the value of the bool.

# joomla - 修改分类博客布局 Joomla 1.5

> ID：11525107
> 
> 赞同：0
> 
> 时间：2012-07-17T14:46:52.073
> 
> 标签：joomla, joomla1.5

我正在寻找修改 Joomla 1.5 中的“类别博客布局”。我想修改它，使偶数行右对齐，奇数行左对齐。我也想对文章标题执行此操作，因此在文章正文中使用 html 或 css（参数中的页面类后缀）不是一个选项，因为它只会影响以下两个生成的表格 html（contentpaneopen）每个博客项目文本的文件：

> \components\com_content\views\category\tmpl\blog.php \components\com_content\views\category\tmpl\blog_item.php

我猜，我需要在我的自定义模板中重载这两个文件来实现我想要的。问题是我看不到如何访问 blog_item.php 正在处理的行号。

我发现`ContentViewCategory::getItems`in`\components\com_content\views\category\view.html.php`有以下几行代码：

```
$item->odd      = $k;
$item->count    = $i; 
```

但我不知道如何访问这些。

有任何想法吗？

PS：这是我想要实现的布局：

```
---------------------------------------------------
|   --------------   ---------------------------- |
|   |            |   |                          | |     
|   |            |   |                          | |     
|   |   row 1    |   |      row 1 text          | |
|   |   Image    |   |                          | |
|   |            |   |                          | |
|   |            |   |                          | |
|   |------------|   |--------------------------| |   
--------------------------------------------------|
---------------------------------------------------
|   |--------------------------| |--------------| | 
|   |                          | |              | |
|   |                          | |              | |     
|   |      row 2 text          | |    row 2     | |
|   |                          | |    Image     | |
|   |                          | |              | |
|   |                          | |              | |
|   |--------------------------| |--------------| |   
--------------------------------------------------|
---------------------------------------------------
|   --------------   ---------------------------- |
|   |            |   |                          | |     
|   |            |   |                          | |     
|   |   row 3    |   |      row 3 text          | |
|   |   Image    |   |                          | |
|   |            |   |                          | |
|   |            |   |                          | |
|   |------------|   |--------------------------| |   
--------------------------------------------------| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:37:29.203

我讨厌回答我自己的问题，但是一旦我能够[调试](https://stackoverflow.com/questions/10735158/zend-debugger-eclipse-startup-error-eclipse-php-debug-core-was-unable-to-load-c)Joomla，结果证明这比我想象的要简单得多。我重载了这两个文件：

> \components\com_content\views\category\tmpl\blog.php \components\com_content\views\category\tmpl\blog_item.php

在我的自定义主题文件夹中：

> \templates\\html\com_content\views\category\tmpl\blog.php \components\\html\com_content\views\category\tmpl\blog_item.php

以下是我添加的一个班轮`blog.php`：

```
$this->assign('itemIndex', $i); 
```

打电话之前：

```
echo $this->loadTemplate('item') 
```

现在我可以调用`$this->itemIndex`来`blog_item.php`获取行索引并用它做我想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:00:30.500

更有序的呢？就像在一侧创建具有一种尺寸的缩略图一样，相同的介绍文本和标题字体

# python - 从不同的计算机运行 python 脚本

> ID：11525112
> 
> 赞同：0
> 
> 时间：2012-07-17T14:47:05.617
> 
> 标签：python, arcgis, arcgis-server

我们有一个 Python 脚本，当从 4 台不同的机器上运行时，会产生 4 种不同的结果。

1 - 在 ArcMap 中运行：工作正常

2 - 在 ArcMap 中运行：工作一次然后无法工作，直到其运行所在的环境重新启动

3 - 在 ArcGIS Server 中运行：脚本中途失败

4 - 在 ArcGIS Server 中运行：脚本启动失败

5 - 在 Aptana 中运行它：工作正常

该脚本利用了我们构建的其他模块以及 win32COM。我们的猜测是，他们每个人都在导入资源时遇到了问题。

关于为什么会这样的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:51:05.287

*   所有机器是否共享相同的软件版本？

*   如果导入未正确完成，请用块包围您的导入`try...except`以引发异常。

尝试...除了：

```
try:
    import some_module
except ImportError:
    some_module = None 
```

# iphone - iphone 应用内购买价格，服务器端

> ID：11525115
> 
> 赞同：10
> 
> 时间：2012-07-17T14:47:16.257
> 
> 标签：iphone, ios, in-app-purchase, itunes

服务器如何确定 iphone 应用内购买的金额？

服务器接收应用程序发送的购买收据并使用[它](https://developer.apple.com/library/archive/releasenotes/General/ValidateAppStoreReceipt/Chapters/ValidateRemotely.html#//apple_ref/doc/uid/TP40010573-CH104-SW1)来验证它。

这会返回一些信息，如 transaction_id、product_id 等；但没有金额或用户详细信息。

由于金额取决于货币和用户所在的国家/地区，我如何才能在服务器上获取购买金额？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:42:28.820

从同一个文档中，您可以通过 SKProduct 类获取本地化的产品详细信息，检查[此](https://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKProduct_Reference/Reference/Reference.html#//apple_ref/occ/cl/SKProduct)

如果您询问服务器如何知道它，当您在服务器上设置应用内购买时，您选择价格作为等级，每个等级都有不同货币的价格，因此当您发送应用内购买产品 ID 时请求时，它会检查您设置的价格并以相应的货币反映。

对于设备语言环境，请检查[此](https://stackoverflow.com/questions/3301704/how-to-retrieve-the-iphones-locale-setting)选项，对于设备语言请检查[此](https://stackoverflow.com/questions/10898935/how-to-check-the-iphone-language-settings)选项，但要从服务器本身获取，Apple 并未为其提供 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-21T08:44:30.970

现在可以为每个国家/地区设置不同的价格，因此将应用内购买映射到定价层可能很麻烦。

您可以获取用户在 UI 中看到的价格和来自客户端的[价格](https://developer.apple.com/reference/storekit/skproduct/1506094-price "本地化价格")[区域设置](https://developer.apple.com/reference/storekit/skproduct/1506145-pricelocale)，然后将该信息发送到您的服务器。

对于续订 - 您可以通过验证服务器端的收据数据并使用客户端在第一次交易中发送的价格来查看续订。

# c# - ChangeType 方法的一些误区

> ID：11525123
> 
> 赞同：0
> 
> 时间：2012-07-17T14:47:40.577
> 
> 标签：c#, .net

我是 c# 的新手，所以也许我的问题对你们中的一些人来说似乎很幼稚。

我正在使用这种方法：

```
public static object ChangeType(object value, Type conversionType); 
```

来自元数据手册：

> 回报：
> 
> > 一个类型为conversionType 且其值与value 等效的对象。-或-如果value 为null 且conversionType 不是值类型，则为空引用（Visual Basic 中为Nothing）。

但在方法签名中，返回的类型总是“对象”。那么，如果返回的类型是 ，那么转换值有什么好处`object`呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T14:50:27.517

`Convert.ChangeType`创建一个指定类型的新对象，其值与您传递的对象等效。

例如，`Convert.ChangeType("42", typeof(int))`将返回一个装箱的`int`实例而不是一个字符串。

实际行为完全在`IConvertible`您传递的对象的实现中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:51:18.913

原因是您可以转换为您的特定类型。此方法来自泛型类型之前，因此它可以返回任意数量类型之一的唯一方法是返回所有类型的超类型，即对象。然后，您当然可以将其转换为您选择的类型并保证您会成功，但唯一的其他选择是重载每种类型，这会有点重。:)

需要注意的是，这不仅与铸造相同。它将返回一个全新的对象，该对象是您要求的类型，而不是您给它的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T14:52:24.723

还，

来自 msdn 文档： http: [//msdn.microsoft.com/en-us/library/aa324833 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa324833(v=vs.71).aspx)

*

> value
> 一个实现 IConvertible 接口的对象。

*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T14:55:39.710

在 .net 中，方法有一个固定的签名（使用泛型你可以走得更远，但这里不是这种情况）——所以对于这种转换方法，他们选择了最常见的类型：`object`.

考虑`Person`和`Man`。`Man`定义为

```
class Man : Person 
```

为了创建地址簿，您不会创建两种方法：

```
Man GetByName(string name);
Woman GetByName(string name); 
```

相反，您将创建一种方法：

```
Person GetByName(string name); 
```

此方法将返回 a `Person`，即使返回的实际对象是 a `Man`，您目前所知道的只是它是 a `Person`。

回到转换器：*您*知道在参数中提供的返回类型，但是很久以前创建方法时，他们不知道您将提供什么作为参数。您可以安全地将结果转换为您已经知道的类型：

```
MyType myObject = (MyType)ChangeType(value, typeof(MyType)); 
```

# windows - PsExec 没有复制文件来执行

> ID：11525131
> 
> 赞同：3
> 
> 时间：2012-07-17T14:47:53.650
> 
> 标签：windows, vbscript, psexec

我想运行一个名为“systemInfo.vbs”的脚本，它将系统名称和服务包输出到日志文件。

在命令提示符下，我正在执行“PsExec.exe \REMOTECOMPUTER -c systemInfo.vbs”。

我从本地系统上只有 PsExec.exe 和 systemInfo.vbs 的目录运行它

我得到错误

> PsExec 无法在 REMOTESERVER 上启动 systemInfo.vbs：“系统找不到指定的文件。

知道为什么会这样吗？我想我可以这样做来运行远程脚本，就好像它在远程服务器上一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T15:13:49.387

您需要在远程 pc 上或通过您的 pc 或网络驱动器上的共享上的 UNC 路径提供脚本的路径。因此，如果脚本在远程 c:\

```
PsExec.exe \\REMOTECOMPUTER -c c:\systemInfo.vbs 
```

或者如果它在共享 \\mypc\shared

```
PsExec.exe \\REMOTECOMPUTER -c \\mypc\shared\systemInfo.vbs 
```

此外，您需要确保您在启动脚本的 pc 上具有管理员权限，并且取决于您的脚本在远程 pc 上可能执行的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-11T16:30:21.963

对于将来可能遇到这种情况的任何人，该`-c`标志*确实*允许您复制文件以执行；文档没有指定，但是您需要使用本地计算机上的路径跟随它到要复制和执行的二进制文件。（我已经向文档提交了拉取请求。）

例如，这可用于将“Blend for Visual Studio SDK for .NET”添加到 Visual Studio 2017 Professional 的远程安装中，方法是将 Web 安装程序`vs_professional.exe`（`\\TargetMachine`名为仅当您使用域而不是本地用户时），并使用适当的参数执行它。

```
D:\PSTools\PsExec64.exe "\\TargetMachine" -u "DOMAIN\user" -p "pass" -h -c "D:\deploy\vs_professional.exe" vs_professional.exe modify --installPath "C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional" --add Microsoft.Component.Blend.SDK.WPF --passive 
```

另一个人为的例子：

```
PsExec64.exe \\Target -u user -p password -h -c "filetoremoteexec.exe" filetoremoteexec.exe --flag param1 param2 
```

# html - CSS居中的标题图片

> ID：11525132
> 
> 赞同：4
> 
> 时间：2012-07-17T14:47:54.727
> 
> 标签：html, css, image

我有一个在屏幕上重复的标题图像，因此无论屏幕分辨率如何，标题始终拉伸 100%，我已将图像放在包装 div 中。在该 DIV 的顶部，我还希望放置“徽标”，使其始终位于屏幕顶部的中心。

我很欣赏这可以通过另一种方式完成，并且已经尝试在 Photoshop 中将徽标放在标题顶部，尽管我无法如我所愿地使图像居中。

请在下面找到我的代码：

HTML：

```
<div id="wrapperHeader">
    <div id="header">
             <img src="images/logo.png" width="1000" height="200" alt="logo" />
    </div> 
</div> 
```

CSS：

```
#wrapperHeader{
    position: relative;
    background-image:url(images/header.png);
}

#header{
    left: 50%;
    margin-left: -500px;
    background:url(images/logo.png) no-repeat;
    width:1000px;
    height:200px;
} 
```

另外，我知道 margin-left:auto; 的属性。等等。尽管如果有人能在这里解释如何适当地使用它们，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T15:04:53.457

如果我正确理解您，我认为这就是您所需要的：

```
<div id="wrapperHeader">
 <div id="header">
  <img src="images/logo.png" alt="logo" />
 </div> 
</div>

div#wrapperHeader {
 width:100%;
 height;200px; /* height of the background image? */
 background:url(images/header.png) repeat-x 0 0;
 text-align:center;
}

div#wrapperHeader div#header {
 width:1000px;
 height:200px;
 margin:0 auto;
}

div#wrapperHeader div#header img {
 width:; /* the width of the logo image */
 height:; /* the height of the logo image */
 margin:0 auto;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T14:51:29.997

如果您将边距设置为`margin:0 auto`图像将居中。

这将使 top + bottom 的边距为 0，而 left 和 right 的边距为“auto”。由于 div 有一个宽度（200 像素），因此图像的宽度为 200 像素，浏览器会自动将左右边距设置为页面左侧的一半，这将导致图像居中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T14:51:51.140

您不需要在 css 中设置标题的宽度，只需使用以下代码将背景图像作为中心：

```
background: url("images/logo.png") no-repeat top center; 
```

或者你可以只使用`img`标签并放入`align="center"`div

# active-directory - 在某些情况下，当用户被锁定时，LDAP 绑定到 ActiveDirectory 成功

> ID：11525149
> 
> 赞同：1
> 
> 时间：2012-07-17T14:48:41.297
> 
> 标签：active-directory, ldap, directoryentry

当提供错误密码的次数足以触发锁定时，我正在测试 .net LDAP 客户端的行为。

我看到了这种奇怪的行为：似乎如果进程在任何时候成功连接，那么即使在故意触发锁定之后它也能够重新连接。

这是我的绑定方法的简写版本：

```
private DirectoryEntry Bind(string userId, string password)
{
    var entry = new DirectoryEntry(BasePath, userId, password);
    // If the password is bad, the attempt to access entry.NativeObject throws an exception. 
    var obj = entry.NativeObject;  // causes the bind to occur
    return entry;
} 
```

我的测试进行如下：

```
private void TestLockout()
{
    // attempt with bad pw enough times to trigger a lockout.
    for (int i=0; i < 5; i++)
    {
        try
        {
            // i.ToString() is a purposefully bad pw
            Bind("testuser", i.ToString());
        }
        catch
        {
        }
    }
    // Now make sure that an attempt with a good pw fails due to lockout
    var bindSuccess = true;
    try
    {
        Bind("testuser", "correctpassword");
    }
    catch
    {
        bindSuccess = false;  
    }
    // the output should be "false"
    Console.WriteLine("Bind result is " + bindSuccess.ToString();
} 
```

这工作正常。但是，如果在测试之前使用正确的密码调用 Bind()，我会得到不同的结果。

爱荷华，这个：

```
Bind("testuser", "correctpassword");  // succeeds
TestLockout(); // does not give the correct result 
```

发生以下情况。

a) TestLockout 产生不正确的输出，因为最终的 Bind 成功并且它不应该成功。
b) 然而，我知道该用户被锁定，因为随后的检查。

因此，似乎某些组件正在跟踪当前进程是否已成功连接。我需要有办法清除这种情况。此身份验证代码将在长时间运行的服务进程中执行，并且在用户真正被锁定时对其进行身份验证是不可接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:44:08.083

`DirectoryEntry`这与使用 ADSI的事实有关。ADSI 具有基于 和 构建的内部 LDAP`BasePath`连接`Username`池`Password`。

如果您在帐户被锁定之前尝试使用正确的密码进行绑定，则使用该正确密码成功建立了 LDAP 连接并缓存在连接池中。然后，您将帐户锁定并尝试使用相同的`BasePath`和`Username`绑定到 Active Directory `Password`。 `DirectoryEntry`此时不会建立新的 LDAP 连接而是重用之前的连接。您可以通过查看网络跟踪来证明这一点。

要修复它，您可以`DirectoryEntry`在不需要时丢弃它。处理完`DirectoryEntry`之后，ADSI 应该足够聪明，可以关闭它不再需要的 LDAP 连接。在您的示例代码中，您似乎再也不需要它了。因此，这应该可以解决问题。

```
private void Bind(string userId, string password)
{
    using (var entry = new DirectoryEntry(BasePath, userId, password))
    {
        // If the password is bad, the attempt to access entry.NativeObject throws an exception. 
        var obj = entry.NativeObject;  // causes the bind to occur
    }
} 
```

# php - 嵌套 Symfony2 表单：$options['data'] = null 嵌套表单？

> ID：11525152
> 
> 赞同：4
> 
> 时间：2012-07-17T14:48:51.843
> 
> 标签：php, symfony, symfony-forms

由于围绕这个主题的文档有点薄，我走到了死胡同。

我有两个模型：Job 和 JobAttribute。一个 Job 有很多 JobAttributes，一个 JobAttribute 有一个 Job：

```
class Job {
    /**
     * @ORM\OneToMany(targetEntity="JobAttribute", mappedBy="job_attributes")
     *
     * @var ArrayCollection
     */
    private $attributes;
}

class JobAttribute {
    /**
    * @ORM\Column(name="type", type="string", length=50)
    * 
    * @var string
    */
    private $type;

    /**
    * @ORM\ManyToOne(targetEntity="Job", inversedBy="jobs")
    */
    private $job; 
```

现在，我有以下 FormClass：

```
class JobType extends AbstractType {
    public function buildForm(FormBuilder $f, array $options) {
        $f->add('name', 'text');
        $f->add('attributes', 'collection', array('type' => new JobAttributeType()));
    }

    public function getName() {
        return 'job';
    }
}

class JobAttributeType extends AbstractType {
    public function buildForm(FormBuilder $f, array $options) {
        $attribute = $options['data'];
        $f->add('value', $attribute->getType());
    }

    public function getDefaultOptions(array $options) {
        return array('data_class' => 'JWF\WorkflowBundle\Entity\JobAttribute');
    }

    public function getName() {
        return 'job_attribute';
    }
} 
```

是的，确实，JobAttribute 的 type 属性包含一个 Form 字段类型，例如。文本。

因此，当我在 Controller 中调用 JobType 上的 FormBuilder 时，$options['data'] 正确地填充了 JobType 中的 Job-Object。但是嵌套的 JobAttributeType 的 $options['data'] 并不指向 JobAttribute 对象。它是空的。

有什么问题？协会丢到哪里去了？为什么 $options['data'] = NULL 在嵌套形式中？是否有一种解决方法可以以嵌套形式获取动态字段类型（超出 Doctrine）？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:05:07.620

您不能依赖`$options['data']`何时构建表单，因为数据可以（并且将）在构建后随时更改。您应该改用事件侦听器。

```
$formFactory = $builder->getFormFactory();
$builder->addEventListener(FormEvents::PRE_SET_DATA, function (FormEvent $event) use ($formFactory) {
    $form = $event->getForm();
    $data = $event->getData();

    if ($data instanceof JobAttribute) {
        $form->add($formFactory->createNamed('value', $data->getType());
    }
}); 
```

这方面的文档[可以在食谱中找到](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)。

# jakarta-ee - 在 servlet 的 doget() 方法中调用 init()

> ID：11525154
> 
> 赞同：-4
> 
> 时间：2012-07-17T14:48:56.557
> 
> 标签：jakarta-ee, tomcat, servlets

请告知如果我在 servlet`init()`的方法中调用方法会发生什么。`doget()`它会抛出异常吗？它会对 servlet 生命周期产生什么影响？

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:23:34.480

首先，如果您尝试从 调用您的`init()`方法`doGet()`并查看会发生什么，您可以避免问这个问题。

无论如何，Servlet Spec 2.3 说：

> 提供了初始化，以便 servlet 可以读取持久配置数据、初始化昂贵的资源（例如基于 JDBC™ API 的连接）以及执行其他一次性活动。

因此，您应该想知道您当前的方法中有多少*一次性活动。*`init()`调用该方法与调用不同的方法没有什么不同。我正在考虑一种情况，在这种情况下，您的`init()`方法唯一要做的就是从`ServetConfig`的 init 参数初始化拥有的属性；在这种情况下，不会发生任何错误。

但是，如果您的`init()`方法执行任何可能改变 servlet 内部状态的任务，那么您就有机会面对一个奇怪的行为。

如果您在`init()`方法中执行任何可能需要在 中使用的任务`doGet()`，则将它们移至私有内部方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:18:16.250

最有可能的是，您的`init()`方法内部的代码将执行。

该方法没有什么特别之处`init`，只是容器会在您的 servlet 投入使用之前调用它。您可以随时调用它。如果您的`init`方法更改了任何共享数据的值，那么您可能会遇到奇怪的问题。

我无法想象为什么有人必须`init`从他们的`doGet`方法中调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T16:06:31.553

**如果你没有实现 init() 方法，那么几乎什么都不会发生**。原因是继承的实现也是空的。您的 servlet 可能会扩展 HttpServlet，后者从 GenericServlet 继承以下实现：

```
public void init() throws ServletException {
    // NOOP by default
} 
```

**如果您有自己的实现，则执行您的实现中的代码**。它是否引发异常 - 这取决于您编码的内容。

如果您调用以 ServletConfig 作为参数的 init，则原始 ServletConfig 将被替换并被`init()`调用。我看不出你为什么要调用`init`或`init(ServletConfig)`方法的原因。方法供您在需要时覆盖，并由 servlet 容器调用。

# visual-studio-2010 - Lightswitch 全局查询中断应用程序

> ID：11525161
> 
> 赞同：0
> 
> 时间：2012-07-17T14:49:12.593
> 
> 标签：visual-studio-2010, visual-studio-lightswitch

我是第一次尝试 Lightswitch，我发现一些“内置”功能并不像视频显示的那样容易实现。最值得注意的是全局查询，因为我创建的每个人都会导致我找不到原因的特定错误。我已将其简化为一个只在表上返回“select *”的查询，并删除了我添加的所有代码。

这是我的解决方案资源管理器中的查询：

![我的群组](../Images/233021523cd98202508afd8993dfb6be.png)

它在设计器中：

![查询详情](../Images/e2c0cf0d4fb4eff737a8e40432ce42b6.png)

很简单，所以我为查询添加了一个屏幕：

![查询画面](../Images/8ae4963e88e51eca82a5cb1a041be999.png)

一切都是纯默认的，为什么我会收到[这个](https://i.imgur.com/lnxSv.jpg)错误？它说它根本无法识别查询，并给出了一个奇怪的 dll 错误。

我尝试将其重新创建为几种不同类型的屏幕，但我遵循[本](http://www.silverlightshow.net/items/Looking-at-LightSwitch-Part-4-To-query-or-to-code-that-is-the-question.aspx)教程，他们以这种方式使用列表和详细信息屏幕。我能想到的最好的办法是，由于安装了 VS 2012 和 .NET 4.5，我遇到了一个错误（不要问我为什么）。我只是好奇这对其他人是否有意义，或者其他人是否成功地创造了这些。

PS - 我也未能成功访问我按他们的名字创建的权限。我最终发现我可以通过它们的索引来引用它们，但为什么有必要这样做呢？我没有看到需要添加参考来完成这项工作。

```
partial void CustomerNew_CanRun(ref bool result)
{
    result = User.HasPermission(Permissions.AllPermissions[1]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:35:04.550

好的，只是为了让您放心（也许），这**不**正常，我还没有看到或听说过类似的事情。

您无法通过名称访问您的任何权限这一事实表明某些事情绝对不正确。您应该能够使用*Permissions.NameOfOneOfMyPermissions*。

从基础开始，您是否*重建*了解决方案（注意*rebuilt*，而不仅仅是*built*）？在使用 LightSwitch 时，您经常会发现一个错误会导致一系列其他错误出现在列表中，这看起来非常令人生畏。当您修复原始错误时，其余的就会消失。双击错误窗格中的错误，您应该会被带到发生错误的位置。如果您无法理解它，请通过此处的代码&我会看看我是否能找出问题所在。

您还需要检查是否没有任何以前尝试遵循本教程的代码遗留下来。尝试添加具有不同名称的查询，并查看错误中是否包含新名称或旧名称。

# php - php 自定义 C++ 模块从命令行工作，而不是在网络服务器上

> ID：11525163
> 
> 赞同：0
> 
> 时间：2012-07-17T14:49:14.290
> 
> 标签：php, c++, zend-framework, swig, lighttpd

我用 C++ 和 Swig 制作了一个自定义 PHP 模块。它适用于命令行，但不适用于我的网络服务器：

```
php index.php
php-cgi index.php 
```

这两个工作正常。

我正在使用 lighttpd 和 php。我没有以任何特殊方式配置这些。我刚刚使用 sudo apt-get install 安装了它们。

不幸的是，如果我制作一个网页，我会得到这个：

```
Fatal error: Call to undefined function minikey_to_wif() in /var/www/index.php on line 6 
```

调用 function_exists("minikey_to_wif") 也返回 False。

phpinfo() 没有显示我的名为 minikey 的模块，并显示与我编辑的文件相同的配置路径 (/etc/php5/cgi/php.ini)：

```
extension=/path/to/php-ext/minikey/minikey.so 
```

我还尝试将它复制到似乎安装了其他 PHP 扩展的位置（/usr/lib/php5/20090626+lfs/），但这也不起作用。

我已经停止并无数次启动 lig​​httpd。每次，当我运行 ps aux | grep php，没有结果。我也重启了几次都没效果。我不知道发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:19:05.090

OK 找到了答案。

该扩展依赖于安装在非标准位置的库。通常我在 ~/.bashrc 中设置 LD_LIBRARY_PATH。但是当 Web 服务器运行扩展时，它没有那个环境变量。

修复是在 /etc/ld.so.conf.d/genjix.conf 中使用 /home/genjix/usr/lib 创建一个文件，并以 root 身份运行 ldconfig。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:22:59.593

尝试使用 lighty 运行 phpinfo()。确保它指向正确的 php.ini。

如果您认为这是问题所在，您可以使用 -c 开关从 lighttpd.conf 内部启动 php `"bin-path" => "/path/to/php-cgi -c /path/to/php.ini"`：

例如

```
fastcgi.server = (
    ".php" => (
            (
                    "bin-path" => "/path/to/php-cgi -c /path/to/php.ini",
                    "socket" => "/tmp/php.socket",
                    "max-procs" => 4,
                    "idle-timeout" => 30,
                    "bin-environment" => (
                            "PHP_FCGI_CHILDREN" => "4",
                            "PHP_FCGI_MAX_REQUESTS" => "1000"
                    )
            )
    )
) 
```

# c - 访问（）有什么问题？

> ID：11525164
> 
> 赞同：7
> 
> 时间：2012-07-17T14:49:15.647
> 
> 标签：c, linux, system-calls

> **可能重复：**
> [access() 安全漏洞](https://stackoverflow.com/questions/7925177/access-security-hole)

我引用手册页访问（2）：

> **警告**：使用**access** () 来检查用户是否被授权，例如，在实际使用**open** (2) 之前打开文件会产生安全漏洞，因为用户可能会利用检查和打开文件之间的短时间间隔来操纵它。**因此，应避免使用此系统调用。**

这是什么意思，在什么情况下会引起关注？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T14:52:40.050

这是一个经典[的“检查时间到使用时间”的](http://en.wikipedia.org/wiki/Time_of_check_to_time_of_use)竞争条件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T15:05:28.863

这只是 Set-user-ID 和 set-group-ID 应用程序的安全问题。对于以用户本身身份运行的应用程序，没有威胁，因为无论如何操作系统都会拒绝相关操作。

考虑这种情况：您有一个`root`通过 set-user-id 运行的 UNIX 程序。该程序用于`access`检查另一个用户的文件权限，然后将文件作为 运行`root`，但前提是权限检查成功。假设程序被调用`securerun`，你运行它如下：

```
securerun myfile 
```

攻击者可以使用以下算法使利用此安全漏洞的程序运行：

*   写一个`xyz`用户有执行权限的文件
*   启动两个线程，`A`然后`B`
*   线程`A`等待几毫秒，然后执行`cp norunning xyz`替换`xyz`攻击者想要运行但没有运行权限的文件
*   线程`B`调用`securerun xyz`

如果攻击者通过正确的时机获得幸运，您`securerun`将检查 old 的执行权限`xyz`，但它会运行 new ，这是黑客不应该运行`xyz`的副本。`norunning`由于检查和执行之间的时间窗口很短，如果攻击者在循环中多次尝试他的策略，那么他一定会在某个时候走运。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T15:06:05.290

典型错误代码：

*   用于`access`检查是否代表用户在以提升权限运行的程序中读取文件
*   这里的小间隙
*   打开文件

在“短间隙”期间，用户可能能够操作文件系统，例如：

```
ln -f secret_file.txt non_secret_file.txt 
```

然后`open`将打开秘密文件进行读取，即使如果在`access`检查完成时链接已经到位，检查也会失败。

# ruby-on-rails-3 - Rails 3中的范围评估时间

> ID：11525169
> 
> 赞同：1
> 
> 时间：2012-07-17T14:49:34.557
> 
> 标签：ruby-on-rails-3, datetime, scope

我正在编写一个范围，它应该查找状态为 open 的调用以及日期时间大于当前时间的任何调用。我对语法有点模糊，有人可以帮我指出正确的方向。

失败的例子：

```
scope :scheduled_calls, where(:call_status => "open", :transfer_date > Time.now) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T14:53:11.200

您需要在调用时使用 lambda 来评估范围，而不是在加载类时。

```
scope :scheduled_calls, lambda { where(["call_status = ? and transfer_date > ?", "open", Time.now]) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:53:38.937

尝试这个：

```
scope :scheduled_calls, where("call_status = 'open' and transfer_date > ?", Time.now) 
```

# php - 脚本只拾取前 3 个字母

> ID：11525175
> 
> 赞同：-2
> 
> 时间：2012-07-17T14:49:48.923
> 
> 标签：php

我将以下脚本与自动完成脚本结合使用来搜索我的数据库。例如，如果我输入字母 a，它会找到所有带有 a 的 ID。我想通过输入字母 a 来更改它，它只会在 id 字段中显示以字母 a 开头的数据。

```
<?php
require('json.php');
error_reporting(E_ALL);
mysql_connect("localhost", "root", "") or
    die("Could not connect: " . mysql_error());
mysql_select_db("timetable") or die("No such database");
$sql = sprintf("SELECT id,dsc FROM module WHERE id LIKE '%%%s%%'",
               mysql_real_escape_string($_REQUEST['term']));
$result = mysql_query($sql)
  or die(mysql_error());
$all = array();
while ($row = mysql_fetch_array($result))
    $all[] = array('value'=>$row[1],'label'=>$row[1]);
print json_encode($all);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:55:53.600

（如果我正确理解你的问题）

您需要更改您的`LIKE`查询：

```
%a% 
```

`a`在该领域的任何地方找到所有东西`id`......

```
a% 
```

在该字段`a`的开头找到所有内容...`id`

[文档`LIKE`在这里](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)

# ruby-on-rails-3 - 无法更改 TinyMCE 中的 DocumentBaseUrl

> ID：11525178
> 
> 赞同：5
> 
> 时间：2012-07-17T14:50:04.007
> 
> 标签：ruby-on-rails-3, tinymce

我使用的是 Rails 3.2.3，当 TinyMCE 在生产中加载时，我得到四个 404：

```
"NetworkError: 404 Not Found - http://[my-domain]/[current-path]//langs/en.js"
"NetworkError: 404 Not Found - http://[my-domain]/[current-path]//plugins/fullscreen/editor_plugin.js"
"NetworkError: 404 Not Found - http://[my-domain]/[current-path]//themes/advanced/editor_template.js"
"NetworkError: 404 Not Found - http://[my-domain]/[current-path]//plugins/media/editor_plugin.js" 
```

也许这些文件是从 tiny_mce.js 异步调用的，因为它们没有在我的源代码中列出。我的 js 看起来像这样：

```
tinyMCE.init({
    theme: "advanced",
    mode: "textareas",
    plugins: "fullscreen, media",
    height: 300,
    relative_urls :true,
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,search,replace,|,bullist,numlist,|,outdent,indent,|undo,redo,|,link,unlink,anchor,image,cleanup,code,|,insertdate,inserttime,preview,hr,removeformat,visualaid,|,sub,sup,|,fullscreen,spellchecker",
    theme_advanced_buttons2 : "styleselect,formatselect,imageListBox,media",
    theme_advanced_buttons3 : "",
    editor_selector : "mceEditor",
    extended_valid_elements : "form[action|accept|accept-charset|enctype|method|name|onsubmit|id|name]",
    convert_urls : false,
    remove_script_host : false
});

function toggleTinyMCE(id) {
    if (!tinyMCE.get(id))
        tinyMCE.execCommand('mceAddControl', false, id);
    else
        tinyMCE.execCommand('mceRemoveControl', false, id);
} 
```

我所有的 TinyMCE 文件都在目录 app/assets/javascripts/tiny_mce 中，所以我尝试将`document_base_url`和添加`base_url`到我的 init 参数中，但无论我设置什么，当我在 firebug 中检查 TinyMCE 时，我发现它们的值没有更改为我输入的内容。

我知道 kete 的 Rails 插件适用于 tinyMCE，但[它的 README](https://github.com/kete/tiny_mce/)声明不建议将它用于 Rails >= 3.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:22:26.597

I am not sure if this will help you, but you can give it a try. Here is the section about relative and absolute urls of the tinymce FAQ: [http://www.tinymce.com/wiki.php/TinyMCE_FAQ#Paths.2FURLs_are_incorrect.2C_I_want_absolute.2Frelative_URLs.3F](http://www.tinymce.com/wiki.php/TinyMCE_FAQ#Paths.2FURLs_are_incorrect.2C_I_want_absolute.2Frelative_URLs.3F)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T12:54:40.247

您不需要更改 document_base_url。您可以将tinymce 直接添加到页面。

```
<script type="text/javascript" src="/assets/vendor/tiny_mce/tiny_mce.js"></script> 
```

并且 make shure 所有来自 tinymce 的文件都通过添加到 config/application.rb 来编译资产管道

```
config.assets.precompile << 'vendor/tiny_mce/*' 
```

# r - 如果存在于 R 中的第二个数据框中，则排除行

> ID：11525179
> 
> 赞同：1
> 
> 时间：2012-07-17T14:50:10.873
> 
> 标签：r, compare, dataframe

我有 2 个数据框。

df1-

```
col1 col2 col3 col4 col5
名称1 A 23 xy
名称1 A 29 xy
名称1 B 17 xy
名称1 A 77 xy
```

df2-

```

col1 col2 col3
B 17 LL1
Z 193 KK1       
77 LO9
Y 80 LK2       
```

如果 df1 的 col2 和 col3 不等于 df2 的 col1 和 col2，我想从 df1 返回这些行。

输出应该是 -

```
col1 col2 col3 col4 col5
名称1 A 23 xy
名称1 A 29 xy
```

我发现的解决方案-

```
unique.rows <- function (df1, df2) {   
  out <- NULL
  for (i in 1:nrow(df1)) {
    found <- FALSE
    for (j in 1:nrow(df2)) {
      if (all(df1[i,2:3] == df2[j,1:2])) {
        found <- TRUE
        break
      }
    }
    if (!found) out <- rbind(out, df1[i,])
  }
  out
} 
```

该解决方案运行良好，但最初，我申请的是小型数据框。现在我的 df1 有大约 10k 行，而 df2 有大约 700 万行。它刚刚从过去 2 天开始运行。谁能建议一个快速的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:57:05.017

尝试

```
> df1[!paste(df1$col2,df1$col3)%in%paste(df2$col1,df2$col2),]
   col1 col2 col3 col4 col5
1 name1    A   23    x    y
2 name1    A   29    x    y 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:54:20.263

可能咬你的是这条线：

```
if (!found) out <- rbind(out, df1[i,]) 
```

你不断地增长一个 data.frame，这会导致操作系统为对象分配新的内存。我建议您预先分配一个具有足够空间的 data.frame，然后将正确的输出分配给正确的索引。这应该会加快几个数量级的速度。

此外，R 经常矢量化，不需要显式循环。例如，参见@ttmaccer 的答案。您还可以查看`data.table`，这对于此类操作来说非常快。

# java - 将 char[] 转换为 byte[] 而不会丢失“位”

> ID：11525186
> 
> 赞同：1
> 
> 时间：2012-07-17T14:50:36.230
> 
> 标签：java, android, types, unsigned

我正在用 Java 开发一个 Android 2.3.3 应用程序。

这个应用程序是一个带有未签名数据类型端口到 Java 的 iOS 代码。

在 iOS 上，它与`UInt16`和一起使用`UInt8`。在一种情况下，`byte[]`我使用的是`char[]`.

但是知道我必须`char[]`使用[DatagramPacket](http://developer.android.com/reference/java/net/DatagramPacket.html)`byte[]`发送它。

如果 char[] 的一个元素是 128，我该怎么做才能插入到 byte[] 并且接收器得到 128。我不知道如果我这样做会发生什么：

```
char c = (char)128;
byte b = (byte)c; 
```

哪个会`b`有价值？
128 = 10000000。b = -1 还是 b = 127？

如何在不丢失任何**位**`char[]`的情况下转换为？`byte[]`

 *** * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T17:22:14.500

在 Java`char`中是一个无符号的 16 位量。因此，您可以直接将您的转换`uint16`为，`char`而无需执行任何其他操作。

对于无符号 8 位数量，您有 2 个选项：

1.  使用`byte`. 它还拥有 8 位。您不会因为已签名而丢失任何位。但是，如果您使用它进行算术运算，您需要记住 Java 会`byte`自动扩展为 an`int`并对其进行符号扩展。为了防止这种情况总是像这样掩盖它：

    字节 b; int foo = 5 * (b & 0xFF);

2.  使用`char`. 它是无符号的，可以保存 16 位，因此 8 位将非常适合其中。要将 a`byte`放入 a 中`char`，只需执行以下操作：

    字节 b; 字符 c = (char)(b & 0xFF); // 屏蔽掉低8位

将 a`char`放入`byte`just 中：

```
char c;
byte b = (byte)c; // Truncates to 8 bits 
```

请注意，`byte`在 Java 中是有符号的，因此无论何时使用它进行算术运算，都只需要屏蔽低 8 位（以防止符号扩展）。像这样：

```
byte b;
int foo = (b & 0xFF); 
```

您可以使用字节执行所有正常的按位操作，而无需屏蔽：

```
byte b;
if (b & 0x80) ... // Test a flag
b |= 0x40; // Set a flag
b ^= 0x20; // Flip a flag from 0 to 1 or 1 to 0
b ^= ~0x10; // Clear a flag
byte x = b << 3; // Shift left 3 bits and assign
byte x = b >>> 4; // Shift right 4 bits and assign (WITHOUT sign extension) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:56:02.327

我认为您需要重新考虑您的方法，这样您最终就不需要转换`char[]`为`byte[]`.

如果您的数据确实是字符，那么您需要查看各种序列化技术，例如使用[`new String(char[])`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#String%28char%5B%5D%29)来创建一个字符串，然后使用[`getBytes(Charset)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#getBytes%28java.nio.charset.Charset%29)来获取由给定编码的字节[`Charset`](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/Charset.html)（因为，当然，相同的字符会导致不同的字节时以 ASCII 或 UTF-8 或 UTF-16 等编码）。

但从你的问题来看，听起来你并没有真正使用字符，你只是在使用`char`16 位类型。如果是这样，进行转换并不困难，大致如下：

```
byte[] toBytes(char[] chars) {
    byte[] bytes = new byte[chars.length * 2];
    int ci, bi;
    char ch;

    bi = 0;
    for (ci = 0; ci < chars.length; ++ci) {
        ch = chars[ci];
        bytes[bi++] = (byte)((ch & 0xFF00) >> 8);
        bytes[bi++] = (byte)(ch & 0x00FF);
    }

    return bytes;
} 
```

如果您希望结果为小端，请反转掩码。

但同样，我会看看你的整体方法并尽量避免这种情况。**

# xml - 如何为每个过程调用设置 nls_timestamp_format

> ID：11525188
> 
> 赞同：0
> 
> 时间：2012-07-17T14:50:42.823
> 
> 标签：xml, oracle11g

我有一个将插入 xmltype 列的存储过程。该列引用具有日期时间类型列的模式。日期需要这样格式化：YYYY-MM-DD"T"HH24:MI:SS

通过匿名块对其进行测试，我可以发出 ALTER SESSION 将时间格式更改为当前会话

```
alter session set nls_timestamp_format = 'YYYY-MM-DD"T"HH24:MI:SS';

insert into table1 (id, xmlcolumn) values (1, updatexml(
   '/root/order/id/text()', p_order_id,
   '/root/order/date/text()', to_timestamp(sysdate,'DD-MON-RRRRHH:MI:SS.FF')
)); 
```

不过，将其移至存储过程，Oracle 阻止我使用 ALTER SESSION，我尝试过：

```
DBMS_SESSION.SET_NLS('nls_timestamp_format','YYYY-MM-DD"T"HH24:MI:SS'); 
```

但 SQL Developer 说选项无效。

我对 Oracle 很陌生（作为 SQL DB 开发人员），关于如何设置时间格式的任何指示？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T19:33:35.143

该`DBMS_SESSION.SET_NLS`过程不会引发任何异常。但是，如果 value 参数表示 a `format mask`（将`double-quoted`在 中`ALTER SESSION command`），则需要将其括在`triple quotes`. 否则，将引发以下 Oracle 错误： **ORA-00922：缺少或无效选项。** 尝试这个：

```
DBMS_SESSION.SET_NLS('nls_timestamp_format','''YYYY-MM-DD "T"HH24:MI:SS'''); 
```

# sql-server-2008 - 收缩数据库后order by子句不起作用

> ID：11525192
> 
> 赞同：-1
> 
> 时间：2012-07-17T14:51:02.527
> 
> 标签：sql-server-2008

最近，我缩小了本地数据库，大小从 6gb 减少到 1mb。

但是在那之后一些查询不起作用，那些已经在开发和实时服务器中工作（在本地，开发和实时sql版本是相同的）。

此查询之一是

```
SELECT a.col1,
       b.col2,
       isnull(a.intPriority, 100) AS intPriority
FROM   tab1 a
       INNER JOIN tab2 b
         ON a.id = b.id
UNION
SELECT a.col1,
       b.col2,
       isnull(a.intPriority, 100) AS intPriority
FROM   tab1 a
       INNER JOIN tab2 b
         ON a.id = b.id
ORDER  BY a.intPriority 
```

这个查询给了我一个错误：

> 如果语句包含 UNION、INTERSECT 或 EXCEPT 运算符，则 ORDER BY 项必须出现在选择列表中。

上面的查询在开发和实时服务器上运行良好，为什么不在本地？

我知道，假设我将 order by 更改为 intPriority 问题将得到解决，但不是解决方案。我必须改变我的整个网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:58:42.723

我想你只需要：

```
ORDER BY intPriority 
```

此外，我认为这与缩小数据库没有任何关系，但也许您也是从 SQL Server 2000 升级的？如果是这样，您可以通过将您的兼容级别回滚到 2000 来“过关”。只是为了演示，在 SQL Server 2008 上：

```
SELECT name = COALESCE(a.name, '') FROM sys.objects AS a
UNION ALL
SELECT name = COALESCE(a.name, '') FROM sys.objects AS a
ORDER BY a.name; 
```

失败：

> 如果语句包含 UNION、INTERSECT 或 EXCEPT 运算符，则 ORDER BY 项必须出现在选择列表中。

但设置后工作：

```
ALTER DATABASE my_db SET COMPATIBILITY_LEVEL = 80; 
```

因此，您可以将数据库的兼容级别设置回 2000，同时您的无效代码将起作用，但您确实应该修复它，因为最终 80 将不是有效的兼容级别（它在 SQL 中不再有效Server 2012）并且因为其他人可能会升级已经运行的服务器上的兼容性级别（因为这通常是[升级数据库后推荐的步骤](https://dba.stackexchange.com/questions/15857/upgrade-process-from-sql-server-2000-to-sql-server-2012)之一）。

# c# - 使用 DropDownList 标头作为过滤字符串动态绑定 GridView 行

> ID：11525197
> 
> 赞同：0
> 
> 时间：2012-07-17T14:51:11.683
> 
> 标签：c#, asp.net

我一直在努力让这个工作一整天。我需要根据标题下拉列表中的内容过滤网格视图。我可以在我的代码隐藏中做到这一点，但是我如何将我创建的表绑定到gridview？gridview.databind() 在这种情况下不起作用，因为这些列不是数据绑定列。

这是我的代码：

```
<asp:GridView ID="GridView3" runat="server" CellPadding="3"
        ForeColor="#333333" GridLines="None"
        AllowSorting="True" SortedAscendingHeaderStyle-CssClass="sortasc-header" 
        SortedDescendingHeaderStyle-CssClass="sortdesc-header"
        AllowPaging="True" PageSize="17" PagerSettings-Mode="NextPreviousFirstLast" 
        ShowHeaderWhenEmpty="True" PagerStyle-Font-Names="WebDings" PagerStyle-Font-Size="Medium"
        PagerSettings-FirstPageText=" 7 " PagerSettings-PreviousPageText=" 3 " 
        PagerSettings-NextPageText=" 4 " PagerSettings-LastPageText=" 8 " 
          Font-Size="Small" onpageindexchanging="GridView3_PageIndexChanging" 
          onsorting="GridView3_Sorting" AutoGenerateColumns="False" 
          ondatabound="GridView3_DataBound">

        <AlternatingRowStyle BackColor="White" ForeColor="#333333" />
         <Columns>
             <asp:BoundField HeaderText="Date" DataField="Date" />

             <asp:BoundField HeaderText="Time" DataField="Time"/>

            <asp:TemplateField HeaderText="Type">
                <HeaderTemplate>
                    <asp:DropDownList ID="TypeList" runat="server" Height="21px" Width="134px" 
                    DataSourceId="dsWarningType" 
                    DataTextValue="Name" DataValueField="Name">
                    <asp:ListItem Text="All" Selected="True"></asp:ListItem> 
                    </asp:DropDownList>
                 </HeaderTemplate>
             </asp:TemplateField>

                  <asp:TemplateField HeaderText="Process" >
             <HeaderTemplate>
                  <asp:DropDownList ID="Process" runat="server" Height="21px" Width="134px" 
                   >
                  </asp:DropDownList>
             </HeaderTemplate>
             </asp:TemplateField>

                   <asp:TemplateField HeaderText="Index" >
             <HeaderTemplate>
                  <asp:DropDownList ID="Index" runat="server" Height="21px" Width="134px" 
                   >
                  </asp:DropDownList>
             </HeaderTemplate>
             </asp:TemplateField>

             <asp:BoundField HeaderText="Body" DataField="Body"/>

         </Columns>
        <EditRowStyle BackColor="#999999" />
        <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />

<PagerSettings FirstPageText=" 7 " LastPageText=" 8 " Mode="NextPreviousFirstLast"      NextPageText=" 4 " PreviousPageText=" 3 "></PagerSettings>

        <PagerStyle BackColor="#5D7B9D" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#DCE2E8" ForeColor="#333333" />
        <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />

<SortedAscendingHeaderStyle CssClass="sortasc-header"></SortedAscendingHeaderStyle>

<SortedDescendingHeaderStyle CssClass="sortdesc-header"></SortedDescendingHeaderStyle>
      </asp:GridView> 
```

当我创建我的表时，它很好地绑定了日期、时间和正文字段，但将类型、进程和索引字段留空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:03:01.613

使用 Eval 或 Bind 绑定下拉列表示例

```
<asp:TemplateField HeaderText="Process" >
         <HeaderTemplate>
              <asp:DropDownList ID="Process" runat="server" Height="21px" Width="134px" 
              Text='<%# Eval("Name") %>' 
              </asp:DropDownList>
         </HeaderTemplate>
</asp:TemplateField> 
```

# ios - iOS SDK：通过标签号设置按钮的背景颜色

> ID：11525206
> 
> 赞同：0
> 
> 时间：2012-07-17T14:51:46.460
> 
> 标签：ios, sdk

我有 4 个带有标签号的按钮：0、1、2、3。我想在点击它时改变它的颜色。所以这就是我正在做的事情：

```
switch ([sender tag]) {
        case 0:
                   [myButton0 setBackgroundColor:[UIColor redColor]];
                   break;
        case 1:
           [myButton1 setBackgroundColor:[UIColor redColor]];
                    break;
        case 2:
           [myButton2 setBackgroundColor:[UIColor redColor]];
            break;
        case 3:
                   [myButton3 setBackgroundColor:[UIColor redColor]];
           break;
} 
```

我的问题是，如果有什么方法可以缩短代码，比如我们通过它的标签号设置背景颜色？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:54:14.240

这就是我正在做的事情。我在 UIColor 上为 colorWithHexValue 创建了一个类别。您可以使用您的代码。

```
 [signInButton setTitle:@"Sign In" forState:UIControlStateNormal];
signInButton.titleLabel.font = [UIFont boldSystemFontOfSize:15];
gradientLayer = [UIColor setGradientEffect:signInButton initialColor:0x797979 endColor:0x424242];
[[signInButton layer] insertSublayer:gradientLayer atIndex:0]; 
[signInButton setTitleColor:[UIColor colorWithHexValue:0xFFFFFF] forState:UIControlStateNormal];
[signInButton setTitleColor:[UIColor colorWithHexValue:0x000000] forState:UIControlStateSelected]; 
```

请用

```
enum {
UIControlStateNormal       = 0,                       
UIControlStateHighlighted  = 1 << 0,                  // used when UIControl isHighlighted is set
UIControlStateDisabled     = 1 << 1,
UIControlStateSelected     = 1 << 2,                  // flag usable by app (see below)
UIControlStateApplication  = 0x00FF0000,              // additional flags available for application use
UIControlStateReserved     = 0xFF000000               // flags reserved for internal framework use 
```

};

# mongodb - MongoDB中的聚合查询

> ID：11525210
> 
> 赞同：0
> 
> 时间：2012-07-17T14:51:55.410
> 
> 标签：mongodb

我正在寻找在 MongoDB 中编写一个非常简单的聚合查询，但在某个部分遇到了困难。

我想做的是拉出过去 7 天内按天分组的所有记录的总和。将 7 天前的日期定义为 UTC 很容易，但我想以编程方式进行，所以我不需要每次都计算出 UTC 日期。例如，我想指定 date() - 7 天之类的东西，而不是 1341964800。

这是我拥有的当前聚合函数：

```
db.visits_calc.group(
    { key:{date:true}, 
    cond:{date:{$gt:1341964800}}, 
    reduce:function(obj,prev) {prev.csum += obj.total_imp}, 
    initial:{csum:0}
}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T16:27:27.933

您可以对返回的毫秒时间戳执行算术运算，`Date.now()`以找到 7 天前的适当时间戳。您需要减去 7 天内的毫秒数（1000 毫秒/秒、60 秒/分钟、60 分钟/小时、24 小时/天、7 天/周）。

```
var weekAgo = Date.now() - (1000*60*60*24*7);
db.visits_calc.group(
    { key:{date:true}, 
    cond:{date:{$gt:weekAgo}}, 
    reduce:function(obj,prev) {prev.csum += obj.total_imp}, 
    initial:{csum:0}
}); 
```

# qsub - 等待一组 qsub 作业完成

> ID：11525214
> 
> 赞同：41
> 
> 时间：2012-07-17T14:52:10.747
> 
> 标签：qsub

我有一个批处理脚本，它启动了几个 qsub 作业，我想在它们全部完成时进行陷阱。

我不想使用 -sync 选项，因为我希望它们同时运行。每个作业都有一组不同的命令行参数。

我希望我的脚本等到所有工作都完成后，然后再做一些事情。我不想使用睡眠功能，例如检查是否在每 30 秒后生成了某些文件，因为这会消耗资源。

我相信 Torque 可能有一些选择，但我正在运行 SGE。

请对我如何实现这一点有任何想法？

谢谢 Ps 我确实找到了另一个线程 [链接](https://stackoverflow.com/questions/3886168/how-to-automatically-run-a-bash-script-when-my-qsub-jobs-are-finished-on-a-serve)

有回应

*您可以使用 wait 停止执行，直到完成所有作业。如果您循环等待特定的 id，您甚至可以收集所有退出状态和其他运行统计信息（花费的时间、当时完成的作业数等）。*

但我不确定如何在不轮询某些值的情况下使用它。可以使用 bash 陷阱，但我将如何使用 qsub？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-05-31T15:47:23.393

启动您的 qsub 作业，使用 -N 选项为它们指定任意名称（job1、job2 等）：

```
qsub -N job1 -cwd ./job1_script
qsub -N job2 -cwd ./job2_script
qsub -N job3 -cwd ./job3_script 
```

启动您的脚本并告诉它等到名为 job1、job2 和 job3 的作业完成后再启动：

```
qsub -hold_jid job1,job2,job3 -cwd ./results_script 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-12-13T19:40:59.913

如果所有作业的名称都有一个共同的模式，您可以在提交作业时提供该模式。[https://linux.die.net/man/1/sge_types](https://linux.die.net/man/1/sge_types)向您展示了可以使用的模式。例子：

```
-hold_jid "job_name_pattern*" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-10T18:22:12.450

另一种选择（从[这里](https://docs.loni.org/wiki/PBS_Job_Chains_and_Dependencies)）如下：

```
FIRST=$(qsub job1.pbs)
echo $FIRST
SECOND=$(qsub -W depend=afterany:$FIRST job2.pbs)
echo $SECOND
THIRD=$(qsub -W depend=afterany:$SECOND job3.pbs)
echo $THIRD 
```

洞察力是 qsub 返回 jobid，这通常被转储到标准输出。相反，将其捕获在变量 ( `$FIRST`, `$SECOND`, `$THIRD`) 中，并在将作业入队时使用该`-W depend=afterany:[JOBIDs]`标志来控制出队时的依赖结构。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-03T20:27:32.540

```
qsub -hold_jid job1,job2,job3 -cwd ./myscript 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-09-26T21:07:01.407

这在 bash 中有效，但这些想法应该是可移植的。用于`-terse`帮助建立一个带有作业 ID 的字符串以等待；然后提交一个`-hold_jid`用于等待先前作业的虚拟作业，`-sync y`以便 qsub 在它（以及所有 prereqs）完成之前不会返回：

```
# example where each of three jobs just sleeps for some time:
job_ids=$(qsub -terse -b y sleep 10)
job_ids=job_ids,$(qsub -terse -b y sleep 20)
job_ids=job_ids,$(qsub -terse -b y sleep 30)
qsub -hold_jid ${job_ids} -sync y -b y echo "DONE" 
```

*   `-terse`选项使 qsub 的输出只是作业 ID
*   `-hold_jid`选项（如其他答案中所述）使作业等待指定的作业 ID
*   `-sync y`选项（由 OP 引用）要求 qsub 在提交的作业完成之前不要返回
*   `-b y`指定命令不是脚本文件的路径（例如，我`sleep 30`用作命令）

有关更多详细信息，请参见[手册页](http://arc.liv.ac.uk/SGE/htmlman/htmlman1/submit.html)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-04-03T15:30:16.970

```
#!/depot/Python-2.4.2/bin/python

import os
import subprocess
import shlex

def trackJobs(jobs, waittime=4):
    while len(jobs) != 0:
        for jobid in jobs:
            x = subprocess.Popen(['qstat', '-j', jobid], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
            std_out, std_err = x.communicate()
            if std_err :
                jobs.remove(jobid)
                break
        os.system("sleep " + str(waittime))
    return 
```

这是一个简单的代码，您可以在其中跟踪 qsub 作业的完成状态。这里函数接受 jobIds 列表（例如 ['84210770', '84210774', '84210776', '84210777', '84210778'] ）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-03-17T13:46:26.383

如果您有 150 个要处理的文件并且每次只能运行 15 个，而另一个在队列中，您可以设置类似的内容。

```
# split my list files in a junk of small list having 10 file each
awk 'NR%10==1 {x="F"++i;}{ print >  "list_part"x".txt" }'  list.txt 
```

qsub 以这样的方式处理所有作业，即每个 list_part*.txt 中的第一个保存第二个 ....第二个保存第三个 .....依此类推。

```
for list in $( ls list_part*.txt ) ; do
    PREV_JOB=$(qsub start.sh) # create a dummy script start.sh just for starting
 for file in  $(cat $list )  ; do
   NEXT_JOB=$(qsub -v file=$file  -W depend=afterany:$PREV_JOB  myscript.sh )
   PREV_JOB=$NEXT_JOB
 done
done 
```

如果您在 myscript.sh 中有一个需要移动或下载许多文件或在 cluster-lan 中创建大量流量的过程，这将非常有用

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-06-05T09:02:23.637

您可以启动一个作业数组`qsub -N jobname -t 1-"$numofjobs" -tc 20`，然后它只有一个作业 ID，一次运行 20 个。你给它一个名字，然后一直保持直到使用`qsub -hold_jid jid`or完成该数组`qsub -hold_jid jobname`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-11-16T20:54:08.753

[我需要更大的灵活性，所以我在这里](https://github.com/stevekm/util/blob/master/qsub.py)为此和其他目的构建了一个 Python 模块。您可以直接将模块作为脚本 ( `python qsub.py`) 运行以进行演示。

用法：

```
$ git clone https://github.com/stevekm/util.git
$ cd util
$ python
Python 2.7.3 (default, Mar 29 2013, 16:50:34)
[GCC 4.4.7 20120313 (Red Hat 4.4.7-3)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import qsub
>>> job = qsub.submit(command = 'echo foo; sleep 60', print_verbose = True)
qsub command is:

qsub -j y -N "python" -o :"/home/util/" -e :"/home/util/" <<E0F
set -x
echo foo; sleep 60
set +x
E0F

>>> qsub.monitor_jobs(jobs = [job], print_verbose = True)
Monitoring jobs for completion. Number of jobs in queue: 1
Number of jobs in queue: 0
No jobs remaining in the job queue
([Job(id = 4112505, name = python, log_dir = None)], []) 
```

使用 Python 2.7 和 SGE 设计，因为我们的系统就是这样运行的。唯一需要的非标准 Python 库是包含的`tools.py`和`log.py`模块，以及[sh.py](https://github.com/amoffat/sh)（也包括在内）

如果您希望纯粹留在 . 显然没有那么有用`bash`，但是如果您需要等待`qsub`工作，那么我会想象您的工作流程正逐渐变得复杂，这将受益于使用 Python。

# php - 如何正确处理来自 PDO fetch() 的错误？

> ID：11525217
> 
> 赞同：5
> 
> 时间：2012-07-17T14:52:13.493
> 
> 标签：php, pdo, fetch

fetch() 错误处理的文档似乎不清楚，经过大量搜索，我在任何地方都没有找到答案。如文档中所示，一个常见的 fetch 使用模型是：

```
while ( $row = $stmt->fetch() ) {
    // do something with $row
} 
```

[http://www.php.net/manual/en/pdostatement.fetch.php](http://www.php.net/manual/en/pdostatement.fetch.php)上的 PHP 文档说：

> 在所有情况下，失败时返回 FALSE。

“失败”是什么意思？一个错误？无法获取更多行？我的问题是：当 fetch() 返回 FALSE 时，检测错误的最佳做法是什么？似乎在循环之后我需要区分错误情况和“没有更多行”的情况。

我应该打电话给 $stmt->errorCode() 看看它是否是 '00000' 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T15:00:32.053

要处理查询错误（获取时不会发生 sql 错误）和更一般的 PDO 错误，您应该尝试使用`PDO::ERRMODE_EXCEPTION`. 此外，实现 Traversable 返回的 PdoStatement `query()`，因此您可以跳过`fetch()`简单查询的使用：

```
try {
    $db = new PDO('sqlite:mydb.db');
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); // Set Errorhandling to Exception
    foreach($db->query("SELECT...") as $row)
    {
      //Do domething
    }
    $db = null; // "Disconnect"
}
catch (PDOException $err) {
   //Handling query/error
} 
```

如果查询遇到错误（不是 fetch()），将抛出 execption。

当 Fetch 到达结果集的末尾时，它将始终返回 false。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:55:42.403

当没有更多数据要获取时，fetch() 将返回 false。也可能存在真正失败的其他情况，例如 mysql 死机或在执行 fetch 循环时连接丢失。但一般来说，那种“真正的”失败是相当罕见的，而且你经常会得到“错误的，因为没有更多的数据可用”。

如果你真的对编写错误处理感到偏执，那么一定要在 while 循环之后放置一个 sql 错误代码检查，以捕捉真正发生故障的情况。

# java - 为什么散列集合需要在达到负载因子时调整大小，为什么我们不能等到集合已满

> ID：11525229
> 
> 赞同：2
> 
> 时间：2012-07-17T14:52:48.017
> 
> 标签：java, hashmap, hash

列表满时倍增，但hashmap/hashtable在达到负载因子时倍增，那么为什么hashmap不能等待调整大小直到满，它是底层hasing算法的一部分吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T14:55:11.697

数组列表和哈希映射之间有很大的区别：前者将每个条目存储到离散槽中，而后者可能会在条目的哈希匹配时将多个条目放入一个槽中。这意味着哈希映射可能在每个插槽被占用之前很久就开始变慢，实际上，您不太可能在必须在插槽中加倍之前只填充每个插槽一次。

如果您有一组可以散列的固定事物，则可以创建一个散列并从中创建一个散列映射，该散列映射将以有效的方式存储该固定的事物集：结果称为[完美散列](http://www.burtleburtle.net/bob/hash/perfect.html).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T14:57:16.617

因为散列冲突的概率在其容量即将结束时急剧上升（没有足够的空桶）。随着更多条目最终进入相同的存储桶，查询的效率在它满之前很久就降低了。根据散列算法，最佳负载因子可能会有所不同。

数组查询的有效性不受其负载因子的影响，这就是为什么提前调整大小没有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T15:05:15.017

数组列表总是将新元素放在下一个空闲槽中，除非您想在将来节省时间，否则在占用该槽之前无需扩展 - 在这种情况下，您可以使用`ensureCapacity`.

另一方面，哈希图会为您放入其中的每个对象计算一个整数值。基于这个值，对象被存储在一个特定的桶中——这样做是为了支持快速查找。但是，计算的值不一定是唯一的，即使是两个不同的值也可能指向同一个桶。这对于少量的水桶尤其常见，如果您的水桶几乎满了，这种情况极有可能发生。

考虑一个哈希图，它根据生日将人们存储在桶中。即使有 365 个桶，如果有 10 个人，也有大约 10% 的机会发生碰撞。23 有*50%*的机会（更多[在这里](http://en.wikipedia.org/wiki/Birthday_problem)）。

现在，单个冲突并不是什么大问题，但是当您使用 hashmap 时，您通常会使用它来进行快速查找。如果多个项目在同一个存储桶中，则执行查找所需的时间会越来越长。因此，出于性能原因，您希望增加存储桶的数量以降低元素的密度。

# python - 在遍历中定义后备视图

> ID：11525231
> 
> 赞同：2
> 
> 时间：2012-07-17T14:52:49.780
> 
> 标签：python, pyramid, traversal

考虑以下 Pyramid 应用程序：

```
from pyramid.config import Configurator

class Foo(dict):
    pass

def make_root(request):
    return {'foo': Foo()}

def foo(request):
    return request.subpath

def bar(request):
    return {"whoami": "bar", "subpath": request.subpath}

def start(global_config, **settings):
    config = Configurator(settings=settings)
    config.set_root_factory(make_root)
    config.add_view(foo, context=Foo, renderer="json")
    config.add_view(bar, name="bar", context=Foo, renderer="json")
    return config.make_wsgi_app() 
```

`/foo`这个应用程序使用 Traversal并且响应`/foo/bar`很好。我想知道，在遍历时`/foo/booarns`，是否有一些地方可以在 Traversal 决定返回 404 之前挂钩。类似于默认或*后备*视图：

```
config.add_view(any_other, name="*default*", context=Foo, ...) 
```

然后，只要路径的第二个组件没有绑定到任何其他视图，在相同的上下文中，这个视图就会被调用，并且路径组件仍然可用`request.view_name`和`request.subpath`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T17:06:24.577

我认为`containment`谓词在这里仍然有效。

```
@notfound_view_config(containment=Foo)
def notfound(request):
    return HTTPNotFound('no views for Foo detected for view %s' % request.view_name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:01:19.120

[根据文档](http://docs.pylonsproject.org/projects/pyramid/en/latest/glossary.html#term-default-view)，您只需为名称指定一个空字符串：

```
config.add_view(any_other, name="", context=Foo, ...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T15:20:57.290

当 Pyramid 无法将 URL 映射到查看代码时，它会触发“未找到视图”。默认的“未找到视图”可以通过应用程序配置覆盖使用以下内容：

```
from pyramid.view import notfound_view_config

@notfound_view_config()
def notfound(request):
    return Response('Not Found, dude', status='404 Not Found')

def main(globals, **settings):
   config = Configurator()
   config.scan() 
```

# asp.net - ASP.NET IIS 应用程序错误

> ID：11525236
> 
> 赞同：0
> 
> 时间：2012-07-17T14:52:57.750
> 
> 标签：asp.net, iis

我对 IIS 和 ASP.NET 很陌生。我只将它用作我需要使用它的脚本。我已经将 IIS 安装到我的 W7 机器上并将其全部设置为使用 ASP。

但是，当我访问脚本时，我只会收到以下错误：

```
 Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

Parser Error Message: It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level.  This error can be caused by a virtual directory not being configured as an application in IIS.

Source Error: 

Line 34:     <globalization culture="en-GB" uiCulture="en-GB"/>
Line 35:     <httpRuntime executionTimeout="3600" maxRequestLength="104856"/>
Line 36:     <sessionState mode="InProc" cookieless="false" timeout="720"/>
Line 37:     <compilation debug="true" targetFramework="4.0">
Line 38:       <assemblies> 
```

正如我所说，我对此很陌生，我发现了一些帖子，其中说做这个和另一个，但我不知道如何实施修复。如果有人能给我一步一步的指导或指出我这样的事情的方向，那就太好了。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:00:05.890

正如[Microsoft 的支持知识库](http://support.microsoft.com/kb/917413)中所述：

> 若要解决此问题，请删除 IIS 中的虚拟目录。然后，重新创建虚拟目录并将其配置为应用程序。要删除虚拟目录，请执行以下步骤：
> 
> 1.  单击开始，然后单击控制面板。
> 2.  在控制面板中，双击管理工具，然后双击 Internet 信息服务。
>     
>     
>     
>     注意如果“控制面板”中的“管理工具”图标不可用，请单击“切换到经典视图”，然后双击“管理工具”。
>     
>     
> 3.  单击要配置的服务器的名称，然后双击网站。
> 4.  双击要配置的网站的名称。
> 5.  右键单击要删除的虚拟目录的名称，然后单击删除。
> 6.  单击是。
> 
> 要创建新的虚拟目录并将其配置为应用程序，请执行以下步骤：
> 
> 1.  单击以选择要在其中添加新虚拟目录的网站的名称。
> 2.  在操作菜单上，指向新建，然后单击虚拟目录。
> 3.  在虚拟目录创建向导中，单击下一步。
> 4.  键入要创建的虚拟目录的名称，然后单击下一步。
> 5.  单击浏览，选择应用程序的目录，然后单击确定。
> 6.  单击下一步，然后单击完成。
>     
>     
>     
>     注意 默认情况下，在 IIS 中创建一个与新虚拟目录同名的新应用程序。

# android - Eclipse中的Android SDK

> ID：11525238
> 
> 赞同：-2
> 
> 时间：2012-07-17T14:53:06.607
> 
> 标签：android

我在 Windows 64 位上安装了 Android sdk 和 Eclipse Indigo。但是当我启动 Eclipse 开始一个新项目时，我在 Android 文件夹下看不到 Android Project。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T14:53:46.470

您需要安装 ADT 插件。看到这个：

日食 ADT

> [http://developer.android.com/tools/sdk/eclipse-adt.html](http://developer.android.com/tools/sdk/eclipse-adt.html)

安装 Eclipse 插件

> [http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)

# iphone - 哪个组应该存储项目中使用的所有图像

> ID：11525242
> 
> 赞同：0
> 
> 时间：2012-07-17T14:53:21.203
> 
> 标签：iphone

在哪个组中应该存储项目中使用的所有图像。资源组是存放图标文件的。我应该创建其他源组文件夹来存储项目或其他地方使用的所有图像的其余部分吗？

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:35:53.310

Xcode 中的组（黄色文件夹）可以按您喜欢的方式组织。如果您想要图标、其他图像或其他任何内容的单独组，您可以自由创建它们。（您甚至可以将组映射到源文件系统中的不同目录。）

默认情况下，此类组中的所有内容都将放在您构建的应用程序包中的相同位置。保持这种方式很方便，因为它使 API`+[UIImage imageNamed:]`易于使用——只需传递图像文件的名称即可。

# installation - 分发应用程序 WebWorks

> ID：11525246
> 
> 赞同：0
> 
> 时间：2012-07-17T14:53:34.910
> 
> 标签：installation, distribution, blackberry-webworks

我已经创建了我的应用程序 bb webworks。使用 bbwp 编译并生成文件和文件夹 OTAInstall StandardInstall。

现在有哪些分发或安装应用程序的选项？

在满足此链接[https://developer.blackberry.com/html5/documentation/wwpublishing/distributingyourapp1866990_11.html](https://developer.blackberry.com/html5/documentation/wwpublishing/distributingyourapp1866990_11.html)选项但仅提及。当你运行每个？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:16:35.153

有几种方法可以将应用程序加载到设备上。您可以从标准安装文件夹 javaload 鳕鱼文件，也可以使用网络服务器通过无线方式从 OTAInstall 安装文件。

谢谢

纳文 M

# vba - 从文本文档粘贴到 excel 注释中

> ID：11525247
> 
> 赞同：0
> 
> 时间：2012-07-17T14:53:35.660
> 
> 标签：vba

就像您可以从文本文档中复制任意数量的行并连续粘贴到 Excel 中一样，我希望能够复制文本行并将它们粘贴到 Excel 中连续行的注释中。为了使它更容易一点，我首先将 .txt 文件中的注释文本行粘贴到 Excel 中的列中。这就是我现在正在查看的内容：

```
Dim myClip As New DataObject
Dim myString As String

myClip.GetFromClipboard

myString = myClip.GetText
Sheet1.Range("A1").AddComment myString 
```

但是像这样从剪贴板粘贴似乎并没有达到预期的效果。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:12:38.280

```
Sub AddCommentsToSelection()

Dim myClip As New DataObject
Dim myString As String
Dim c As Range, arr, x As Integer

    myClip.GetFromClipboard
    myString = myClip.GetText
    If Len(myString) = 0 Then Exit Sub

    Set c = Selection.Cells(1)

    arr = Split(myString, vbCrLf)
    For x = LBound(arr) To UBound(arr)
        c.AddComment arr(x)
        Set c = c.Offset(1, 0)
    Next x

End Sub 
```

# vba - VBA insert if - 根据日期更改单元格填充

> ID：11525252
> 
> 赞同：2
> 
> 时间：2012-07-17T14:53:51.240
> 
> 标签：vba, excel

尝试在 VBA 中插入以下公式；

在我的专栏 KI 中想要三个条件：

*   日期是今天或更早（即项目今天或更早到期）= RED
*   日期是今天 + 最多 7 天 = 琥珀色
*   日期是今天少于 7 天 = 绿色

我正在考虑使用以下内容：

```
Sub ChangeColor()
    lRow = Range("K" & Rows.Count).End(xlUp).Row
    Set MR = Range("K3:K" & lRow)
    For Each cell In MR
        If cell.Value = "TODAY" Then cell.Interior.ColorIndex = 10
        If cell.Value = "TODAY-7days" Then cell.Interior.ColorIndex = 9
        If cell.Value = "Morethan7Days" Then cell.Interior.ColorIndex = 8
    Next
End Sub 
```

我一直在尝试，但我不知道该怎么做。

我认为我的方式是正确的，但我不确定如何编写 If date=-7days then 等等。

有人可以提供一些指导吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:19:11.677

VBA 有一个 Date 函数，它返回今天的日期。VBA 中的日期是自 1900 年 12 月 31 日以来的天数（通常带有闰年错误），因此您可以在 Date 中减去或添加整数来获取过去和未来的日子。

```
Sub ChangeColor()

    Dim rCell As Range

    With Sheet1
        For Each rCell In .Range("K3", .Cells(.Rows.Count, 11).End(xlUp)).Cells
            If rCell.Value <= Date Then
                rCell.Interior.Color = vbRed
            ElseIf rCell.Value <= Date + 7 Then
                rCell.Interior.Color = vbYellow
            Else
                rCell.Interior.Color = vbGreen
            End If
        Next rCell
    End With

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:17:24.620

安德森先生是正确的，您可以使用条件格式来完成此操作，但是如果您想在 VBA 中执行此操作，请创建一个变量来保存日期并将其设置为当天减去时间。然后，您只想将单元格值格式化为日期格式。完成此操作后，您可以使用 dateAdd 和减去天数。见下文

```
Sub ChangeColor()

Dim myDate As Date
'format the date excluding time
myDate = FormatDateTime(Now, 2)

lRow = Range("K" & Rows.Count).End(xlUp).Row
Set MR = Range("K3:K" & lRow)
    For Each cell In MR
        If FormatDateTime(cell.Value, 2) = myDate Then cell.Interior.ColorIndex = 10
        If FormatDateTime(cell.Value, 2) = DateAdd("d", -7, myDate) Then cell.Interior.ColorIndex = 9
        If FormatDateTime(cell.Value, 2) = DateAdd("d", 7, myDate) Then cell.Interior.ColorIndex = 8
    Next

End Sub 
```

我确实注意到您检查它是否相等，所以只有恰好是今天的日期，从今天起 7 天和到今天前 7 天的日期才会填充内部颜色。大于和小于填充所有内部单元格颜色

抱歉所有的编辑

# android - 我可以窃听 Android 触摸事件吗？

> ID：11525253
> 
> 赞同：9
> 
> 时间：2012-07-17T14:53:52.257
> 
> 标签：android, events, touch, global

我正在检测 Android 设备上的手势和触摸。问题是我的应用程序需要在它自己的视图之外、其他应用程序甚至主屏幕上检测这些手势。换句话说，有没有办法窃听触摸事件？我想有一些安全措施可以防止这种情况发生。我只需要证明这个概念，所以我会在开发设备上尝试这个，我可以禁用任何可能阻止我这样做的安全性（不会对任何人造成伤害或暴露他们的数据）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T15:34:22.857

你不能通过设计来做到这一点。如果安卓允许你做这样的事情，那将是一个巨大的安全风险。想想看，如果你能做到这一点，你就可以轻松制作各种恶意应用程序，比如键盘记录器。至于后台服务建议，不可能使用后台服务来拦截来自另一个应用程序的触摸事件。基本上，谷歌是故意这样做的，你不能弄乱另一个应用程序的生命周期或事件处理程序等。事实上，谷歌会将你试图做的事情视为恶意代码，即使你编写代码的意图是这不是恶意或非法的，它完全超出了 Android 选择的安全范式，因此它被认为是恶意的，因此谷歌会尽其所能阻止你这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T05:42:48.193

嗯，它**非常有限**，但您可以在后台服务上使用 AccessibilityEvents 来跟踪悬停和屏幕浏览，但同样非常有限，但它不需要您从谷歌获得任何特殊或魔法许可或构建自己的 ROM哈哈，我希望这会有所帮助:)

# iphone - UITextview 隐藏光标/更改光标颜色

> ID：11525255
> 
> 赞同：4
> 
> 时间：2012-07-17T14:54:12.207
> 
> 标签：iphone, uitextview

在我的应用程序中，在 UITextview 我想隐藏光标。

如果这是不可能的，那么我想改变光标的颜色。

我们可以这样做吗？我已经搜索了它，但只获得了 UITextfield 的答案。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-21T10:19:51.637

在 iOS 7 上，您可以简单地将文本视图的 tintColor 设置为与其背景颜色相同，以使光标不可见。

```
textView.tintColor = textView.backgroundColor; 
```

或者您可以尝试：

```
textView.tintColor = [UIColor clearColor]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T17:21:34.940

只有在禁用编辑属性设置为 No 时才能隐藏光标

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-01T14:00:59.310

要隐藏光标，只需子类化`UITextField`并覆盖`-caretRectForPosition:`其实现`UITextField`以符合`UITextInput`协议：

```
- (CGRect)caretRectForPosition:(UITextPosition *)position
{
    return CGRectZero;    // ensures the cursor won't appear
} 
```

~~至于更改颜色或光标，我认为不访问私有 API 是不可能的。~~

**编辑：**根据 S. Soffes 的评论，`tintColor`显然可以通过属性更改颜色。

# ios - 安装 .der 文件并在完成后返回应用程序

> ID：11525264
> 
> 赞同：3
> 
> 时间：2012-07-17T14:54:33.647
> 
> 标签：ios, certificate, der

我有一个需要安装证书的应用程序，它使用

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:CERTIFICATE_URL]]; 
```

这会访问 Web 服务器，获取证书并启动允许用户安装证书的设置应用程序。

完成后，点击完成按钮，设置应用程序会将您带回 Safari，但在空白页面（或您上次访问的页面）。

显然，我想使用我设置的 url 方案返回应用程序。

有没有人有这方面的经验并可以提供任何指示？

我正在考虑有一个登录页面，该应用程序也会带你去告诉你安装证书（单击一个按钮），然后当它安装时，我假设它会将你返回到这个登录页面，之后我可以进行自动重定向如果我可以确定证书已成功安装，请返回应用程序.....??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T19:00:09.650

不久前，我使用了我的一个 Apple 技术支持问题。这是对话：

大卫

我正在回答您关于 iOS 上受信任的根证书的问题。你写了：

*所以问题是：是否可以查询设置应用程序/或已安装的配置文件以确定是否安装了特定证书。*

您可以通过使用信任对象 (SecTrustRef) 来评估特定证书是否受系统信任来执行此操作。我最近发表了一篇技术说明，深入讨论了这个整体问题。在阅读我的其余回复之前，您应该阅读此内容。

TN2232《HTTPS 服务器信任评估》

[http://developer.apple.com/library/ios/#technotes/tn2232/_index.html](http://developer.apple.com/library/ios/#technotes/tn2232/_index.html)

该技术说明没有涵盖您的具体情况，但它相对容易适应它描述的技术来解决您的问题。基本策略是：

1.  查找由证书颁发机构颁发的证书——您可以从网站本身获取此证书（使用电影的 HEAD 请求），或者您可以将其嵌入到您的应用程序中。

2.  如果您有证书数据，请从中创建一个证书对象 (SecCertificateRef) -- 您使用 SecCertificateCreateWithData 来执行此操作。

3.  从中创建一个信任对象——您使用 SecTrustCreateWithCertificates 来执行此操作。您必须提供一个策略对象 (SecPolicyRef)，但创建其中一个很容易：只需调用 SecPolicyCreateBasicX509。

4.  评估信任对象——您使用 SecTrustEvaluate 执行此操作。如果它返回 kSecTrustResultProceed 或 kSecTrustResultUnspecified，则系统信任颁发您在步骤 1 中开始的证书的证书颁发机构的根证书；如果它返回任何其他内容，则通过 HTTPS 播放电影很可能会失败。

*此外，我们是否甚至必须离开应用程序才能安装证书？*

是的，尽管您可以通过更改电影播放的方式来完全避免这个问题。我将在下面更详细地讨论这一点。

*证书可以以某种方式安装在钥匙串中[...]*

是的，但这不会导致系统（甚至您的应用程序）信任由该根证书颁发的证书。在某些情况下，向钥匙串添加证书很有用（例如，如果它是数字身份的一部分，或者是中间证书），但它对 HTTPS 服务器信任评估没有帮助。

```
 *                   *                   * 
```

以上所有假设您正在通过渐进式下载播放电影。如果您的电影使用 HTTP Live Streaming（这是我们通常推荐的），则有 /much/ 更好的方法来解决此问题。TN2232 的“HTTP Live Streaming”部分介绍了这个想法，并有更详细的信息参考。

这种方法提供了许多非常重要的优点：

o 它避免了安装自定义根证书的需要。

o HTTP Live Streaming 通常会产生更好的播放效果，因为系统会自动适应可用带宽的变化。

o 如果您提供低带宽流 App Review 将允许您通过 WWAN 播放电影。

o 您的媒体片段已加密，因此您可以将它们移动到 HTTP 服务器（而不是 HTTPS 服务器）。这可以显着减少内容分发网络的负载。

我强烈建议您调查此选项。

如果您对此主题有任何其他问题，请告诉我。

奎因“爱斯基摩人！”

# javascript - OpenLayers，在为图层指定样式时，Firefox 不渲染

> ID：11525266
> 
> 赞同：0
> 
> 时间：2012-07-17T14:54:57.673
> 
> 标签：javascript, google-maps, geolocation, openlayers

当我为矢量图层指定样式属性时，**firefox**不会在该层上渲染矢量。

要对此进行测试，只需执行包含的 javascript 和 html 页面。

您会在右上角看到一个 EditingToolbar，尝试使用 firefox 绘制 LineString。

您会发现 LineStrings 根本没有出现在图层上。

尝试从矢量图层中删除 styleMap 属性，一切都会正常工作。

如果你知道这个问题的原因，请告诉我。

提前感谢您的时间和帮助。

附言

此外，您必须使用自己的 OpenLayers 库并从 html 页面链接到它。

我个人使用的是 GitHub 的最新版本，因为其他版本还有另一个烦人的错误：

谷歌地图不断弹出对话。

```
function initialize(){
    new Map();
}

function Map(){
    this.map;
    this.editing_toolbar;
    this.vectors;
    this.epsg900913 = new OpenLayers.Projection('EPSG:900913');
    this.epsg4326 = new OpenLayers.Projection('EPSG:4326');
    this.line_control;
    this.renderer;
    this.line_control,this.renderer=OpenLayers.Util.getParameters(window.location.href).renderer;
    this.renderer= (this.renderer) ? [this.renderer] : OpenLayers.Layer.Vector.prototype.renderers;
    // Create the map object
    this.map = new OpenLayers.Map('map');
    //Create a Google layer
    var gmap = new OpenLayers.Layer.Google(
         "Google Streets", // the default
        {
            numZoomLevels: 30,
            projection: new OpenLayers.Projection("EPSG:900913")
        }
    );

    var my_style=new OpenLayers.StyleMap({
        "default":new OpenLayers.Style({
            strokeWidth:5,
            fillColor:"1484e6",
            strokeColor:"1484e6"
        }),
        "select":new OpenLayers.Style({
            fillColor:"e39119",
            strokeColor:"e39119"
        })
    });
    this.vectors= new OpenLayers.Layer.Vector(
        "Vector Layer",
        {styleMap:my_style,
            renderers:this.renderer
        }
    );

    this.map.addLayers([gmap,this.vectors]);
    this.editing_toolbar=new OpenLayers.Control.EditingToolbar(this.vectors);
    this.map.addControl(this.editing_toolbar);

    this.map.addControl(new OpenLayers.Control.LayerSwitcher());
    this.map.addControl(new OpenLayers.Control.MousePosition());

    this.map.setCenter(new OpenLayers.LonLat(-123.12, 49.28).transform(this.epsg4326, this.epsg900913), 13);         

}

<html>
    <head>
        <title>OpenLayers: Google Layer Example</title>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyAt66skA87gnWvy7UQl065zFaFHNXJiBc4&sensor=false"></script>
        <script type="text/javascript" src="/static/open_layers/lib/OpenLayers.js"></script>
        <script type="text/javascript" src="/static/firefox_bug.js"></script>
    </head>

    <body onload="initialize()">
        <div id="map"   class="smallmap"></div>
    </body>

</html> 
```

# mediaelement.js - this.media.setCurrentTime 不是函数

> ID：11525267
> 
> 赞同：1
> 
> 时间：2012-07-17T14:55:08.403
> 
> 标签：mediaelement.js

我遇到了问题——firebug 显示以下错误：“this.media.setCurrentTime 不是函数”

它来自这条线-

```
$(SB).on('load', function (e) {
    var player1 = new MediaElementPlayer('#player1');
    if(typeof SB.getBookmark() == "number" && SB.getBookmark() > 0){
        player1.setCurrentTime(SB.getBookmark());
    } else {
        player1.setCurrentTime('0');
    }
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-02T00:09:57.153

你可以这样做

```
var player = new MediaElementPlayer($('.js-call-video'), {

  success: function(mediaElement, domObject) {
    mediaElement.addEventListener("loadeddata", function(e) {
      return e.target.setCurrentTime("12");
    });

    return mediaElement.play();
  }
}); 
```

# google-app-engine - ndb 的异步操作中'auto_now_add' 的值是如何确定的？

> ID：11525269
> 
> 赞同：2
> 
> 时间：2012-07-17T14:55:10.603
> 
> 标签：google-app-engine

根据 ndb 文档，`auto_now_add`将属性设置为创建实体时的当前日期/时间。

我想知道异步操作中的值是如何确定的——即，它是由创建内存模型对象的时间决定的，还是由模型实际写入数据存储的时间决定的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:26:08.877

文档说“在写入实体之前不会生成自动值；也就是说，这些选项不提供动态默认值。（这些细节与旧的 db API 不同。）

注意：当使用 auto_now_add=True 写入属性的事务失败并稍后重试时，它将重用与原始尝试相同的时间值，而不是将其更新为重试时间。如果交易永久失败，该属性的值仍将设置在实体的内存副本中。”

# django - django 1.2.x admin 内联自定义关系

> ID：11525270
> 
> 赞同：0
> 
> 时间：2012-07-17T14:55:13.310
> 
> 标签：django, admin, inline, relationship

我有 2 个模型：

模型.py：

```
class Teacher(models.Model):
    user = models.ForeignKey(User)
    ...

class Record(models.Model):
    user = models.ForeignKey(User)
    ... 
```

和 admin.py

```
class RecordInline(admin.StackedInline):
    model = Record

class TeacherAdmin(admin.ModelAdmin):
    inlines = [RecordInline] 
```

基本上我想要做的是在管理员的教师详细信息中显示用户相同的记录（teacher.user == record.user）。问题是老师和记录没有直接关系，所以我正在寻找一种方法来定义这种关系。我怎样才能做到这一点？我在我的项目中使用 Django 1.2.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:05:09.283

您可以覆盖 ModelAdmin 的方法之一，例如 get_inline_instances

```
class TeacherAdmin(admin.ModelAdmin):
    inlines = [RecordInline]

    def get_inline_instances(self, request):
        # ... 
```

# xml-parsing - ＆符号转义时的COBOL准确长度（XML-TEXT）？

> ID：11525271
> 
> 赞同：1
> 
> 时间：2012-07-17T14:55:18.407
> 
> 标签：xml-parsing, cobol

我正在使用带有 XML 的内在函数 XML-PARSE，如下所示：

```
<MSGBODYTXT>
 <LN>One &amp; two</LN>
</MSGBODYTXT> 
```

据我计算，以下字符串有 13 个字节长。

```
 "One &amp; two" 
```

但是当我使用 $ LENGTH OF(XML-TEXT) $ 我只得到 9 个字节。

我该怎么做才能获得正确的 13 字节长度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T21:21:34.690

问题是 XML PARSE 转换`&amp;`成它所代表的字符，一个 & 符号。如果您查看`CONTENT-CHARACTERS`与`<LN>`标签相关联的内容，您会看到：`One & two`它有 9 个字符长，正如`LENGTH OF`操作员`XML-TEXT`所说的那样。

`LN`请注意，如果您要对具有该值的数据项使用 XML GENERATE，`One & two` 它将生成为`<LN>One &amp; two</LN>`对称操作。

# qt - 使用 Qt 在 Mac 上启动进程

> ID：11525272
> 
> 赞同：0
> 
> 时间：2012-07-17T14:55:21.417
> 
> 标签：qt, process

我正在使用 Mac 上的 QT 开发示例应用程序，我发现它的一个 API 存在问题。我想运行进程，所以我正在使用以下功能

QProcess::startDetached();

我正在传递程序（exe的位置）和参数列表作为参数现在的问题是，如果应用程序已经运行，那么这将创建另一个进程并运行它，当我与Windows交叉检查时，它的行为在某种意义上是不同的它不会启动已经运行的应用程序。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:20:46.263

我认为，这取决于应用程序属性。在窗口上，您可以打开多个 Doc 文件，但不能在两个不同的（新）窗口中打开 Window Media 播放器。

因此，首先尝试在运行时打开一个新应用程序。如果它成功，那么它应该与 QProcess 一起使用。

# sql-server - 加入两个查询（已部分完成）

> ID：11525274
> 
> 赞同：1
> 
> 时间：2012-07-17T14:55:27.080
> 
> 标签：sql-server, join, case

我正在尝试将这两个查询连接在一起。这两个查询分别正常运行。我已经从查询 2 中获得了 CASE 语句来处理查询 1。

在某些背景下，这个查询是针对一个商业智能程序运行的，该程序在自动运行插入时创建图形/图表。现在，当没有新数据插入到特定 IM.NAME 的表中时，程序会回溯到最后一条记录，这会使图表结果产生偏差。当 5 个 IM.NAME 字段之一未根据下面的主查询返回时，我需要一个“1”来打印出来。我已经包含了一个 SQLfiddle，显示了第二个查询：[http ://sqlfiddle.com/#!3/2cdbd/1](http://sqlfiddle.com/#!3/2cdbd/1)

```
SELECT DISTINCT 
SA.DELETED,
PAT.VERSION, 
PAT.PATTERNDATE,
SA.AGENT_VERSION,
SCL.COMPUTER_NAME AS Computer_Name,
SCO.OPERATION_SYSTEM AS Operation_System,
dateadd(s,convert(bigint,SA.CREATION_TIME)/1000,
'01-01-1970 00:00:00') CREATION_DTTM,
dateadd(s,convert(bigint,SA.LAST_UPDATE_TIME)/1000,
'01-01-1970  00:00:00')  Lastupdatetime,
DATEADD(s, convert(bigint,LAST_SCAN_TIME)/1000,
'01-01-1970 00:00:00')LAST_SCAN_TIME,
PAT.PATTERNDATE AS Pattern_Date,
SCL.USER_NAME AS User_Name,
VSC.IP_ADDR1_TEXT AS IP_Add,
CASE WHEN IM.NAME LIKE  '%-FRN%' THEN IM.NAME
WHEN IM.NAME LIKE '%-BCK%' THEN IM.NAME
WHEN IM.NAME LIKE  '%-PPP%' THEN IM.NAME
WHEN IM.NAME LIKE '%-MES%' THEN IM.NAME
WHEN IM.NAME LIKE  '%-MMT%' THEN IM.NAME
 ELSE '1' END AS Group_Name,
 IM.NAME as test

FROM ((((SEM_AGENT SA

INNER JOIN SEM_CLIENT SCL
ON ((SA.COMPUTER_ID=SCL.COMPUTER_ID) 
AND (SA.DOMAIN_ID=SCL.DOMAIN_ID)) 
AND (SA.GROUP_ID=SCL.GROUP_ID)) 

INNER JOIN SEM_COMPUTER   SCO
ON ((SA.COMPUTER_ID=SCO.COMPUTER_ID) 
AND (SA.DOMAIN_ID=SCO.DOMAIN_ID)) 
AND (SA.DELETED=SCO.DELETED))

INNER JOIN PATTERN PAT 
ON SA.PATTERN_IDX=PAT.PATTERN_IDX) 
INNER JOIN IDENTITY_MAP IM 
ON SCL.GROUP_ID=IM.ID) 

INNER JOIN V_SEM_COMPUTER VSC 
ON SCO.COMPUTER_ID=VSC.COMPUTER_ID 
AND SA.DELETED=0

WHERE PAT.Patterndate < (SELECT MAX(Patterndate) -1 FROM Pattern)
AND SCO.OPERATION_SYSTEM NOT LIKE '%2000%'
ORDER BY Computer_Name

Select (CASE WHEN IM.NAME LIKE  '%-FRN%' THEN IM.NAME
  WHEN IM.NAME LIKE '%-BCK%' THEN IM.NAME
  WHEN IM.NAME LIKE  '%-PPP%' THEN IM.NAME
  WHEN IM.NAME LIKE '%-MES%' THEN IM.NAME
  WHEN IM.NAME LIKE  '%-MMT%' THEN IM.NAME
  ELSE '1' END) AS Group_Name,
   tagTypes.tagType,
   IM.NAME 

From
(
Select '%-FRN%' AS tagType
UNION
Select '%-BCK%' AS tagType
UNION
Select '%-PPP%' AS tagType
UNION
Select '%-MES%' AS tagType
UNION
Select '%-MMT%' AS tagType
)     AS tagTypes
left join
IDENTITY_MAP IM 
    on IM.NAME like tagTypes.tagType 
```

# android - 将列元素动态添加到 Android ListView

> ID：11525278
> 
> 赞同：1
> 
> 时间：2012-07-17T14:55:50.643
> 
> 标签：android

在阅读[Dynamically add elements to a listView Android](https://stackoverflow.com/questions/4540754/add-dynamically-elements-to-a-listview-android)之后，我清楚地了解了如何将元素动态添加`row`到 listView。
但是，我有一个想法，即如何将`column`元素动态添加到列表视图。
例如，最初有 2 列。单击按钮后，我想再添加一列。
谁能提供示例代码？谢谢大家的分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:01:41.030

只需动态添加行，但使用两个不同的元素制作一个自定义视图......所以每个行视图都会有两个元素。首先，设置第一个项目，而秒是不可见的，然后单击按钮设置其他项目......所以看起来你正在添加列......

# java - 在 maven3 中设置默认属性。可能的？

> ID：11525285
> 
> 赞同：4
> 
> 时间：2012-07-17T14:56:04.640
> 
> 标签：java, maven, maven-plugin, maven-3

是否可以在 maven3 中设置默认属性。我可以通过以下方式从 bash 中获取 CATALINA_HOME

```
 <properties>
     <cargo.tomcat.home>${env.CATALINA_HOME}</cargo.tomcat.home>   
 </properties> 
```

但是，如果未设置变量并且我运行评估表达式命令，我会得到空对象

！mvn org.apache.maven.plugins:maven-help-plugin:2.1.1:evaluate -Dexpression=cargo.tomcat.home

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Maven Webapp 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-help-plugin:2.1.1:evaluate (default-cli) @ cargo-selenium-springmvc-webapp ---
[INFO] No artifact parameter specified, using 'com.keybroker.spike:cargo-selenium-springmvc-webapp:war:1.0-SNAPSHOT' as project.
[INFO] 
null object or invalid expression
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.721s
[INFO] Finished at: Tue Jul 17 16:51:48 CEST 2012
[INFO] Final Memory: 5M/81M
[INFO] ------------------------------------------------------------------------ 
```

我有兴趣设置一个默认的 $CATALINA_HOME。我不介意使用另一个插件，但 vanilla maven3 会是最好的。所以我在找什么

```
if $CATALINA_HOME is set by bash then use it
otherwise if the is a -DcatalinaHome argument passed to maven, then use that 
if all else fails, default to XYZ path for $CATALINA_HOME 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T10:28:07.087

是的，这是可能的。我已经在 Windows 7 和 Maven 3.0.4 上对此进行了测试。`FOO`是我的示例环境变量。

首先，将以下配置文件添加到 POM

```
<profiles>
  <profile>
    <id>env.FOO</id>
    <activation>
      <property>
        <name>!env.FOO</name>
      </property>
    </activation>
    <properties>
      <env.FOO>default_FOO</env.FOO>
    </properties>
  </profile>
</profiles> 
```

如您所知，占位符`${env.FOO}`在 POM 中的其他地方使用，它将被替换为实际值。提供值的三种方式是：

**1）**通过设置环境变量

```
set FOO=env_FOO       (Windows)
export FOO=env_FOO    (Bash) 
```

**2）**提供命令行参数（这将覆盖环境变量）

```
mvn -Denv.FOO=cmdline_FOO    (note the env. prefix) 
```

这将覆盖环境值。

**3)**不`FOO`通过前面的任何方法设置，POM 中的值将被激活子句，由`!env.FOO`and 设置为`default_FOO`

# objective-c - 简单 ios 文字游戏菜单的新视图

> ID：11525286
> 
> 赞同：0
> 
> 时间：2012-07-17T14:56:05.940
> 
> 标签：objective-c, ios

我在 iOS 的 Objective-C 中制作了一个简单的文字游戏，我从选择“单视图应用程序”开始，所以我有一个 myProgramViewController.xib 文件，以及 myProgramViewController.h 和 myProgramViewController.m 各一个。我刚刚意识到我想要一个首先加载的主菜单类型的东西，并允许用户选择单词的长度、难度等类似的东西，以及“开始！” 或“开始！” 按钮。如何添加此菜单视图？我宁愿用户不能回到它（现在），所以我宁愿不使用导航栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T18:09:58.067

上面评论中的上下文。

当 segue 发生时，您可以将任何数据从一个 ViewController 传递到另一个。在你的情况下我会做的是设置一个故事板，让菜单控制器成为初始视图控制器，然后让游戏屏幕成为一个模式segue。在`- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`（在您的 MenuViewController 上）中，您可以获得 segue.destinationViewController 并在其上设置数据。

例子：

```
MenuViewController ---- playGameSegue ----> GameViewController 
```

在 MenuViewController.m

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    GameViewController * destination = (GameViewController*) sender.destinationViewController;
    destination.anyPropertyYou'veDefinedInGameViewController.h = DATA;
    destination.otherProperty = DATA;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:10:05.710

您可以模态地呈现视图。假设您有一个名为 MainMenu 的视图，它有一个 .xib、.h 和 .m 文件。

在您的 myProgramViewController.m 文件中，您可以调用代码

```
MainMenu *mainMenu = [[MainMenu alloc] initWithNibName:@"MainMenu" bundle:nil];
[self presentModalViewController:mainMenu animated:YES]; 
```

然后在您的 MainMenu.m 文件中，一旦用户做出选择，调用：

```
[self dismissModalViewControllerAnimated:YES]; 
```

# android - 将 C 库连接到 iOS 应用程序

> ID：11525289
> 
> 赞同：4
> 
> 时间：2012-07-17T14:56:11.240
> 
> 标签：android, objective-c, ios, c, java-native-interface

我希望有人可以帮助我解决以下问题。

目前我有一个使用 JNI 连接到 C 库的 Android 应用程序。现在我想将我的 iOS 应用程序连接到同一个 C 库，但是我如何调用函数以及如何在没有 JNI 的情况下访问接口？

希望有人有一些好的提示或教程。

所以我拥有的是一个 Android 应用程序、一个 iOS 应用程序和一个适用于 JNI（Java 本机接口）的 C 库。Android部分有效。但现在我想尽可能多地重用，但仍将我的 iOS 应用程序连接到那个（或大部分）库。（库是单独的头文件和 .c 文件）

请帮忙 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T15:10:47.873

稍微详细说明一下我的评论 - 与 Android 不同，iOS 应用程序是使用 Objective C 和 Apple 的库构建的。Objective C 是 C 的超集，这意味着任何有效的 C 代码也是有效的 Objective C 代码。您应该能够将源文件直接添加到 Xcode 中的 iOS 项目中，并将库调用洒在您想要的任何地方。这意味着在 iOS（或 OSX）开发中没有像 JNI 这样的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T15:12:44.677

你有两个选择：

1.  通过将库添加到 xcode 中的项目来直接使用您的库，分配库搜索路径，分配标头搜索路径并在使用它的 .m Objective-c 源代码中包含标头。
2.  添加要由 xcode 编译和链接的所有 .c 文件，并在使用它的 .m objective-c 源代码中包含头文件。

ps 如果您使用了一些特定的编译器开关，您可能需要重建您的库以正确定位 iOS。

# javascript - Facebook 已连接但 /me 用户是一个空对象

> ID：11525290
> 
> 赞同：0
> 
> 时间：2012-07-17T14:56:11.723
> 
> 标签：javascript, facebook, api, undef

我使用了 facebook 文档中的示例，但在授予 facebook 连接权限后，我无法从用户对象获取任何用户信息。用户已定义，但其所有属性均为空。这是我的代码：

```
<html>
    <head>
      <title>My Facebook Login Page</title>
    </head>
    <body>

      <div id="fb-root"></div>
      <script>
        window.fbAsyncInit = function() {
          FB.init({
            appId      : '161718123880158', // App ID
            channelUrl : '', // Channel File
            status     : true, // check login status
            cookie     : true, // enable cookies to allow the server to access the session
            xfbml      : true,  // parse XFBML
            logging     : true
          });
          FB.api('/me', function(user) {
            if (user) {
              var image = document.getElementById('image');
              image.src = 'http://graph.facebook.com/' + user.id + '/picture';
              var name = document.getElementById('name');
              name.innerHTML = user.name
            }
          });
        };
        // Load the SDK Asynchronously
        (function(d){
           var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
           if (d.getElementById(id)) {return;}
           js = d.createElement('script'); js.id = id; js.async = true;
           js.src = "//connect.facebook.net/en_US/all.js";
           ref.parentNode.insertBefore(js, ref);
         }(document));
      </script>
<div class="fb-login-button" scope="email,user_checkins">Login with Facebook</div>
      <div align="center">
        <img id="image"/>
        <div id="name"></div>
      </div>

    </body>
 </html> 
```

名称和空图像的输出为 undef

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:46:25.620

这是因为您没有有效的访问令牌。如果您放置一个 console.log(user) 并检查响应，它会显示错误。

1.  您的[应用设置](https://developers.facebook.com/apps/161718123880158/summary)中的“使用 Facebook 登录的网站”字段是什么？它需要与您正在开发的 URL 相匹配。
2.  尝试将 FB.api 调用包装在 FB.getLoginStatus 回调函数中，如下所示：

    ```
    FB.getLoginStatus(function() {
       FB.api('/me', function(user) {
          //your code here
       });
     }) 
    ```

# jquery - jQuery 悬停功能似乎没有按预期工作

> ID：11525292
> 
> 赞同：1
> 
> 时间：2012-07-17T14:56:16.783
> 
> 标签：jquery, hover

当应该调用鼠标“悬停”功能时，我的脚本有点问题。正在发生的事情是调用“悬停”函数并执行图像转换。但是，如果您在过渡完成之前“悬停”，则不会调用“悬停”函数。

我对 JavaScript 很陌生，所以如果有人能在我的脚本中发现一个很容易纠正以获得预期功能的愚蠢错误，我将非常感激。

```
$(function () {
    var easing = 'swing';

    var transitions = ['fadeToRight', 'fadeToLeft', 'fadeToTop', 'fadeToBottom'];
    var transitionSpeed = 300;

    var $product_container = $('#product_container');
    var $product_areas = $product_container.find('.product_area');
    var $product_images = $product_container.find('img');
    var imageCount = 0;

    $product_images.each(function () {
        var $this = $(this);
        $('<img/>').load(function () {
            ++imageCount;
            if (imageCount == $product_images.length) {
                $product_areas.each(function () {
                    $(this).hover(
                        function () {
                            var $currImage = $(this).find('img');

                            var transition = transitions[Math.floor(Math.random() * transitions.length)];

                            switch (transition) {
                                case 'fadeToRight':
                                    $currImage.animate(
                                        {
                                            'left': $currImage.width() + 'px',
                                            'opacity': '0'
                                        },
                                        transitionSpeed,
                                        easing,
                                        function () {
                                            $currImage.hide().css(
                                                {
                                                    'z-index': '1',
                                                    'left': '0px',
                                                    'opacity': '1'
                                                });
                                        });
                                    break;

                                case 'fadeToLeft':
                                    $currImage.animate(
                                        {
                                            'left': -$currImage.width() + 'px',
                                            'opacity': '0'
                                        },
                                        transitionSpeed,
                                        easing,
                                        function () {
                                            $currImage.hide().css(
                                                {
                                                    'z-index': '1',
                                                    'left': '0px',
                                                    'opacity': '1'
                                                });
                                        });
                                    break;

                                case 'fadeToTop':
                                    $currImage.animate(
                                        {
                                            'top': -$currImage.height() + 'px',
                                            'opacity': '0'
                                        },
                                        transitionSpeed,
                                        easing,
                                        function () {
                                            $currImage.hide().css(
                                                {
                                                    'z-index': '1',
                                                    'top': '0px',
                                                    'opacity': '1'
                                                });
                                        });
                                    break;

                                case 'fadeToBottom':
                                    $currImage.animate(
                                        {
                                            'top': $currImage.height() + 'px',
                                            'opacity': '0'
                                        },
                                        transitionSpeed,
                                        easing,
                                        function () {
                                            $currImage.hide().css(
                                                {
                                                    'z-index': '1',
                                                    'top': '0px',
                                                    'opacity': '1'
                                                });
                                        });
                                    break;

                                default:
                                    $currImage.animate(
                                        {
                                            'left': -$currImage.width() + 'px'
                                        },
                                        transitionSpeed,
                                        easing,
                                        function () {
                                            $currImage.hide().css(
                                                {
                                                    'z-index': '1',
                                                    'left': '0px'
                                                });
                                        });
                                    break;
                            }
                        },
                        function () {
                            var $currImage = $(this).find('img');
                            $currImage.show();
                        });
                });
            }
        }).attr('src', $this.attr('src'));
    });
}); 
```

我还想说，如果过渡完成，然后您将鼠标移出图像容器，则确实会调用“悬停”功能。当您不再悬停时，它不会自动转到其他功能，这似乎真的很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:02:54.110

这很可能不是您的 mouseout 函数没有被调用的问题（实际上它被调用就像您在让动画完成时观察到的那样），而是您的动画弄乱了您的计划。通过在离开元素后继续，它只会覆盖您在 mouseout 函数中声明的规则。

添加`stop()`mouseout 功能以停止正在运行的动画，然后继续：

```
 function () {
          var $currImage = $(this).find('img');
          $currImage.stop().show();
      }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:59:37.980

您可以使用 stop() 取消所有早期动画：

```
$currImage.stop().animate({some animation}) 
```

这是我的一个片段：

```
$("div").hover(function ()
{
    $(this).stop().animate({opacity: 1}, 400);
},
function () {
    $(this).stop().animate({opacity: 0}, 400);
}); 
```

小提琴：http: [//jsfiddle.net/edGas/](http://jsfiddle.net/edGas/)

# jquery - 需要动态 jCarousel 来记住更改 PHP 页面时单击的位置

> ID：11525296
> 
> 赞同：0
> 
> 时间：2012-07-17T14:56:38.997
> 
> 标签：jquery, parameter-passing, jcarousel

（这里是 PHP / Javascript 编码新手）

我有一个动态脚本将上下文图像加载到 Word Press PHP 模板中的 jCarousel 列表中。它会自动旋转，并且图像可以很好地链接到新页面。示例在这里：右上角的[http://www.thelitigator.ca （贡献者）。](http://www.thelitigator.ca)

我想要做的是当用户单击图像时，会加载一个新的动态页面（WordPress中的不同模板）并且jCarousel应该重新出现在与单击时相同的列表和相同的位置（而不是而不是从头开始重新开始）。

我假设我必须使用列表项构建一个数组并传递一个参数，该参数存储第一个可见图像的 ID 或 KEY 以便重新加载新页面。但是编码对我来说很复杂。

我已经广泛查看，但想知道是否有使用 jCarousel 的代码示例可以从中学习？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:50:16.960

您可以使用 jcariousel 的滚动功能并将其放入会话中。然后在 body on load 和 jcarousel init 方法上，您可以获取会话值并更新滚动位置

```
 jQuery('#listelements').jcarousel({

//inti call back will scroll on specific session set jcarousel item

                  initCallback : pCarousel.init

});

});

var pCarousel = {

            init : function(carousel) {

//carousel.scroll(n) scrolls to the nth element

                  carousel.scroll(1);

                  return false;

                  });

                } 
```

# amazon-s3 - 将目录和图像从 Linux 迁移到 Amazon s3

> ID：11525297
> 
> 赞同：0
> 
> 时间：2012-07-17T14:56:43.130
> 
> 标签：amazon-s3, migration

我尝试将我的 Rails 应用程序图像迁移到 s3，它运行良好（Rails 3、回形针和 s3 gem）。

我的问题也是找到将我的 200000 个目录和图像从我的 Linux 服务器 (CentOS) 迁移到 s3 存储桶的解决方案。

我做了很多搜索，但没有找到一种简单的方法来做到这一点，因为没有可用于 s3 的 SSH 或 SCP 命令（使用 rsync）。

1）我可以使用[http://s3sync.net/](http://s3sync.net/)一个 ruby​​ 脚本，但使用起来似乎很复杂（安装 OpenSSL、证书等）

2）在某处我读到一个选项太开放EC2帐户以连接SSH并使用rsync迁移，然后复制到S3？但这也不简单。

我有点失望，没有一种简单的方法可以将我的数据迁移到 s3 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:01:15.153

看起来像使用 S3FS。它允许您将 S3 存储桶作为驱动器安装在远程服务器上。然后，您可以使用 linux 命令行来制作文件副本。

# crystal-reports - 错误说：“运行总计不能参考打印时间公式”（Crystal Reports）

> ID：11525299
> 
> 赞同：0
> 
> 时间：2012-07-17T14:56:46.750
> 
> 标签：crystal-reports

我想将值放入共享数组中，并将其打印到详细信息部分的另一个子报表中，以逐个打印数组的每个值。

我已经谷歌了，但我似乎没有得到正确的答案。

这是代码：

```
// 1st Sub Report
WhilePrintingRecords;
shared numberVar array Totdepot;

Redim preserve Totdepot[UBound(Totdepot)+1];//more space added to array.
Totdepot[UBound(Totdepot)+1]:={dtSumDe… + {dtSumDealer2.inv_depot2} + {dtSumDealer2.inv_depot3} + {dtSumDealer2.inv_depot4} + {dtSumDealer2.inv_depot5} + {dtSumDealer2.inv_depot7} + {dtSumDealer2.inv_depot6} + {dtSumDealer2.inv_depot8} + {dtSumDealer2.inv_depot9};

// 2nd Sub Report
WhilePrintingRecords;
shared numberVar array Totdepot;
Totdepot 
```

我正在尝试打印数组的第二个值，但它仍然不起作用。错误显示：“运行总计不能引用打印时间公式”或“公式的结果不能是数组”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:18:23.177

**问题一**

你的两个公式的最后一行不能是数组；将其更改为类似于：

```
// 1st Sub Report
WhilePrintingRecords;
Shared NumberVar Array Totdepot;

Redim preserve Totdepot[UBound(Totdepot)+1];//more space added to array.
Totdepot[UBound(Totdepot)+1]:={dtSumDe… + {dtSumDealer2.inv_depot2} + {dtSumDealer2.inv_depot3} + {dtSumDealer2.inv_depot4} + {dtSumDealer2.inv_depot5} + {dtSumDealer2.inv_depot7} + {dtSumDealer2.inv_depot6} + {dtSumDealer2.inv_depot8} + {dtSumDealer2.inv_depot9};

// return a dummy value to eliminate array-error message
True;

// 2nd Sub Report
WhilePrintingRecords;
Shared NumberVar Array Totdepot;

// return a dummy value to eliminate array-error message
True; 
```

**问题二**

您将无法以与显示数据库记录相同的方式显示数组；Crystal Reports 不会为数组中的每个元素生成详细信息部分记录。它不是为此而设计的。

你有两个选择：

*   创建一个将循环遍历数组并创建逗号分隔（或其他字符）字符串的公式字段。
*   将计算推送到数据库，以便它返回可用的数据集。

# c# - PropertyGrid 和 ICollection

> ID：11525300
> 
> 赞同：0
> 
> 时间：2012-07-17T14:56:47.120
> 
> 标签：c#

我开始了一个新项目，我遇到了这个线程： [CollectionBase 类仍然支持吗？](https://stackoverflow.com/questions/5704776/is-the-collectionbase-class-still-supported)

因此，我将我的`collectionbase`课程转换为通用`ICollection`课程。我的问题是我使用的`propertygrid`视图`collectionbase` 适用于我的新课程，但不适用于我的新课程！

该`Add`按钮已禁用:(

```
[Editor(typeof(System.ComponentModel.Design.CollectionEditor), typeof(System.Drawing.Design.UITypeEditor))]
public class SomeCollection<T> : ICollection<T> where T : SomeClass
{
    List<T> SomeList;

    private bool _IsReadOnly = false;
    public bool IsReadOnly
    {
        get
        {
            return _IsReadOnly;
        }
    }

    public SomeCollection() { SomeList = new List<T>(); }

    public T this[int index]
    {
        get
        {
            return (T)SomeList[index];

        }
        set
        {
            SomeList[index] = value;
        }
    }

    public void Add(T b)
    {
        if (!exists(b.Name))
        {
            SomeList.Add(b);
        }
        else
        {
            throw new ArgumentException("bla");
        }
    }

    public int Count
    {
        get
        {
            return SomeList.Count;
        }
    }

    public bool Remove(T b)
    {
        bool Removed = false;
        if (SomeList.Contains(b))
        {
            SomeList.Remove(b);
            Removed = true;
        }
        return Removed;
    }

    public int IndexOf(T b)
    {
        return SomeList.IndexOf(b);
    }

    public void CopyTo(T[] array, int arrayIndex)
    {
        for (int i = 0; i < SomeList.Count; i++)
        {

            array[i] = (T)SomeList[i];
        }
    }

    public void AddRange(SomeCollection<T> Collection)
    {
        for (int i = 0; i < Collection.Count(); i++)
        {
            SomeList.Add(Collection[i]);
        }
    }

    public void AddRange(T[] Collection)
    {
        SomeList.AddRange(Collection);
    }

    public bool Contains(T b)
    {
        return SomeList.Contains(b);
    }

    public void Insert(int index, T b)
    {
        SomeList.Insert(index, b);
    }

    public override string ToString()
    {
        if (SomeList.Count() > 0)
        {
            return string.Format("SomeClass ({0})", new object[] { SomeList.Count() });
        }
        else
        {
            return string.Empty;
        }
    }

    public bool exists(string name)
    {
        bool _found = false;
        if (name != null)
        {
            for (int i = 0; i < SomeList.Count; i++)
            {
                if (((SomeClass)SomeList[i]).Address.Equals(name, StringComparison.OrdinalIgnoreCase))
                {
                    _found = true;
                    break;
                }
            }
        }
        return _found;

    }

    public void Clear()
    {
        SomeList.Clear();
    }

    public IEnumerator<T> GetEnumerator()
    {
        return new SomeClassEnumerator<T>(this);
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return new SomeClassEnumerator<T>(this);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:05:58.910

IIRC，您需要实施`IList`（不是通用版本）。

# java - 如何构造函数式Java TreeMap？

> ID：11525301
> 
> 赞同：0
> 
> 时间：2012-07-17T14:56:52.597
> 
> 标签：java, functional-programming, treemap, functional-java

我刚开始使用FunctionalJava 库并想使用不可变的TreeMap。但是，当使用用户定义的类或接口时，我不知道如何创建一个空的开始。

```
fj.data.TreeMap<IAddress, Optional<ScanNode>> nodes = TreeMap.empty(Ord<IAddress>); 
```

所有示例都使用预定义类型，如 Ord.stringOrd。我完全不明白如何创建正确的 Ord<IAddress>。

有人可以解释如何做到这一点吗？

谢谢，德里克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T20:39:40.387

本质上，树形图必须对其元素进行某种排序，因此您必须描述如何对 IAddress 进行排序。

例如，假设 IAddress 有 2 个字符串和一个 int（城市、街道、数字），您可以执行以下操作：

```
// translate an IAddress to a P3 containing the important data
F<IAddress, P3<String, String, Integer>> toP3 = new F<...> () {
        P3<String, String, Integer> f(IAddress addr) { 
              return P.p(addr.getCity(), addr.getStreet(), addr.getNumber());
}

main () {
    // first map IAddress to a P3 using the function above, then simply order it by its fields
    Ord<IAddress> addrOrd = Ord.P3Ord(Ord.StringOrd, Ord.StringOrd, Ord.IntOrd).comap(toP3);

    fj.data.TreeMap<IAddress, Optional<ScanNode>> nodes = TreeMap.empty(addrOrd);
} 
```

co-mapping 意味着它首先在 IAddress 上应用函数 toP3，取回 P3，然后使用给定的 P3 顺序对其进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T04:59:21.897

如果`IAddress`implements `Comparable`，您也可以使用为它`Ord.<IAddress>comparableOrd()`构造一个`Ord`。

# eclipse - Eclipse/Juno 中的 PMD 插件无法通过市场安装

> ID：11525304
> 
> 赞同：6
> 
> 时间：2012-07-17T14:57:13.207
> 
> 标签：eclipse, pmd, eclipse-juno, eclipse-marketplace

我最近从 Eclipse（针对 Java/EE 开发人员，x64）“Indigo”升级到“Juno”。不幸的是，PMD-Plugin (http://marketplace.eclipse.org/content/pmd-eclipse) 似乎不适用于该产品。

我无法找到另一种将此产品安装到我的新 Eclipse 中的方法，有人可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T03:18:42.497

[Juno 版本](http://sourceforge.net/projects/pmd/files/pmd-eclipse/update-site/)现已推出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T14:47:16.993

我在 Juno 上使用 PMD 3.2.6 没有任何困难。您是否尝试过指向“PMD for Eclipse 3”存储库？（我通过让[Eclipse 升级我的插件](http://www.selikoff.net/2012/07/01/eclipse-juno-4-2-review/)来升级，但我认为这相当于从头开始安装这个问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T09:59:46.753

我找到了插件的juno版本的更新站点。它不再位于旧的更新站点上。 [http://sourceforge.net/projects/pmd/files/pmd-eclipse/update-site/](http://sourceforge.net/projects/pmd/files/pmd-eclipse/update-site/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T06:17:30.303

通过常规的 Eclipse 更新站点进行安装怎么样？见[http://pmd.sourceforge.net/eclipse/](http://pmd.sourceforge.net/eclipse/)

# jquery - 通过单击地图中的标记打开一个对话框

> ID：11525306
> 
> 赞同：1
> 
> 时间：2012-07-17T14:57:15.860
> 
> 标签：jquery, google-maps

嗨，我想要这样的功能[。](http://www.stayz.com.au/accommodation/vic/melbourne/melbourne-airport?checkin=&numNights=1&minPrice=&maxPrice=&numGuests=1&rating=0&acceptsOnlinePayment=false&searchRef-lastMinDeals=false&searchRef-specialOffers=false&feature=&view=map)我创建了一个地图，但是如何通过单击标记图标打开一个对话框。

```
<script type="text/javascript">
    initialize();
// OnLoad function ...
function initialize() {

   var fenway = new google.maps.LatLng(-27,133);
var mapOptions = {
  center: fenway,
  zoom: 4,

  mapTypeId: google.maps.MapTypeId.ROADMAP
};

var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

var fluster = new Fluster2(map);
    var marker; 
<?php   $count=1;
    foreach($profileinfo as $property){
    $lat_val = $property->lat;
    $long_val = $property->lng; ?> 
    <?php } ?>

// Initialize Fluster and give it a existing map
    var fluster = new Fluster2(map);
    var marker; 
    <?php   $count=1;
    foreach($paginate as $propert){
    $lat_val = $propert->lat;
    $long_val = $propert->lng;
    $address1 = $propert->address.','.$propert->suburb;?>
    // Create a new marker. Don't add it to the map!
        marker = new google.maps.Marker({
            position: new google.maps.LatLng(<?php echo $lat_val; ?>, <?php echo $long_val; ?>),
            title: '<?php echo $address1; ?>'

        });
        fluster.addMarker(marker);
    <?php
    }?>
    // Set styles
    // These are the same styles as default, assignment is only for demonstration ...
    fluster.styles = {
        // This style will be used for clusters with more than 0 markers
        0: {
            image: 'http://gmaps-utility-library.googlecode.com/svn/trunk/markerclusterer/1.0/images/m1.png',
            textColor: '#FFFFFF',
            width: 53,
            height: 52
        },
        // This style will be used for clusters with more than 10 markers
        10: {
            image: 'http://gmaps-utility-library.googlecode.com/svn/trunk/markerclusterer/1.0/images/m2.png',
            textColor: '#FFFFFF',
            width: 56,
            height: 55
        },
        20: {
            image: 'http://gmaps-utility-library.googlecode.com/svn/trunk/markerclusterer/1.0/images/m3.png',
            textColor: '#FFFFFF',
            width: 66,
            height: 65
        }
    };
    fluster.initialize();

}

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T15:13:18.333

听起来您想通过单击标记 打开[信息窗口。](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)[这是](https://google-developers.appspot.com/maps/documentation/javascript/examples/infowindow-simple)[文档](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)中如何执行此操作的示例

该示例的代码片段：

```
// This example displays a marker at the center of Australia.
// When the user clicks the marker, an info window opens.

function initialize() {
  var myLatlng = new google.maps.LatLng(-25.363882, 131.044922);
  var mapOptions = {
    zoom: 4,
    center: myLatlng
  };

  var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

  var contentString = '<div id="content">' +
    '<div id="siteNotice">' +
    '</div>' +
    '<h1 id="firstHeading" class="firstHeading">Uluru</h1>' +
    '<div id="bodyContent">' +
    '<p><b>Uluru</b>, also referred to as <b>Ayers Rock</b>, is a large ' +
    'sandstone rock formation in the southern part of the ' +
    'Northern Territory, central Australia. It lies 335&#160;km (208&#160;mi) ' +
    'south west of the nearest large town, Alice Springs; 450&#160;km ' +
    '(280&#160;mi) by road. Kata Tjuta and Uluru are the two major ' +
    'features of the Uluru - Kata Tjuta National Park. Uluru is ' +
    'sacred to the Pitjantjatjara and Yankunytjatjara, the ' +
    'Aboriginal people of the area. It has many springs, waterholes, ' +
    'rock caves and ancient paintings. Uluru is listed as a World ' +
    'Heritage Site.</p>' +
    '<p>Attribution: Uluru, <a href="https://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194">' +
    'https://en.wikipedia.org/w/index.php?title=Uluru</a> ' +
    '(last visited June 22, 2009).</p>' +
    '</div>' +
    '</div>';

  var infowindow = new google.maps.InfoWindow({
    content: contentString
  });

  var marker = new google.maps.Marker({
    position: myLatlng,
    map: map,
    title: 'Uluru (Ayers Rock)'
  });
  google.maps.event.addListener(marker, 'click', function() {
    infowindow.open(map, marker);
  });
}

google.maps.event.addDomListener(window, 'load', initialize);
```

```
html,
body,
#map-canvas {
  height: 100%;
  margin: 0px;
  padding: 0px
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
<div id="map-canvas"></div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T13:00:31.770

这是代码

```
// **********************************************Sample Code**********************************************
    var markerSample = new google.maps.Marker({
    position: new google.maps.LatLng(LAT, LNG),
            map: panorama// your map
         });

    google.maps.event.addListener(markerSample, 'click', function () {
    var dialogMine = $("#mySampleDialogBox").dialog();//
    $(dialogMine).siblings('.ui-dialog-titlebar').remove();//for manual close
    $(dialogMine).dialog({ resizable: false });// resizable
   //$("#mySampleDialogBox").dialog();
    }); 
```

# spring - 更改密码 - Spring Security

> ID：11525308
> 
> 赞同：3
> 
> 时间：2012-07-17T14:57:31.227
> 
> 标签：spring, spring-mvc, spring-security

我有一个实现了 spring 安全性的 spring MVC 3.0 应用程序。我正在创建一个小弹出窗口来更改当前登录用户的密码。一切都很好，直到我将表单发布到以下操作。

```
@RequestMapping(value = "principalchangepassword" , method = RequestMethod.POST)
public @ResponseBody String principalchangepassword(Model uiModel, HttpServletRequest httpServletRequest){
    Principal principal = (Principal) SecurityContextHolder.getContext().getAuthentication().getPrincipal();
    StandardStringDigester digester = new StandardStringDigester();
    digester.setAlgorithm("SHA-256");   // optionally set the algorithm
    digester.setStringOutputType("hexadecimal");
    digester.setSaltSizeBytes(0);
    digester.setIterations(1);
    String digest = digester.digest(httpServletRequest.getParameter("password1")); 
    principal.setPassword(digest.toLowerCase());
    principal.merge();
    return "Password Updated successfully";
} 
```

当我执行 ajax 调用以更新当前主体的密码时，我收到以下异常消息。

```
org.hibernate.TransientObjectException: object references an unsaved transient instance – save the transient instance before flushing 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-04-06T19:09:23.900

我正在使用 BCryptPasswordEncoder 使用弹簧安全性。现在更改密码我所做的是将用户提供的现有密码与数据库值进行比较。

```
BCryptPasswordEncoder passwordEncoder = new BCryptPasswordEncoder();
String existingPassword = ... // Password entered by user
String dbPassword       = ... // Load hashed DB password

if (passwordEncoder.matches(existingPassword, dbPassword)) {
    // Encode new password and store it
} else {
    // Report error 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T15:59:31.527

好的，所以我很喜欢使用我从声明中得到的委托人

```
(Principal) SecurityContextHolder.getContext().getAuthentication().getPrincipal(); 
```

我需要首先使用 ID 明确地从数据库中获取本金，进行更改然后合并。这是完美运行的最终操作。

```
@RequestMapping(value = "principalchangepassword" , method = RequestMethod.POST)
public @ResponseBody String principalchangepassword(Model uiModel, HttpServletRequest httpServletRequest){
    Principal principal = (Principal) SecurityContextHolder.getContext().getAuthentication().getPrincipal();
    Principal me = Principal.findPrincipal(principal.getId());
    me.setPassword(httpServletRequest.getParameter("password1"));
    StandardStringDigester digester = new StandardStringDigester();
    digester.setAlgorithm("SHA-256");   // optionally set the algorithm
    digester.setStringOutputType("hexadecimal");
    digester.setSaltSizeBytes(0);
    digester.setIterations(1);
    String digest = digester.digest(me.getPassword());
    me.setPassword(digest.toLowerCase());
    me.merge();
    return "Password Updated successfully";
} 
```

希望它可以帮助那里的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-28T11:47:55.613

我发现这个问题是因为我正在寻找一种方法来创建一个新用户并设置一个编码密码。Binaryrespawn 的回答已经相当不错了，我只是想为这个问题添加第二个观点。

因此，为了更改密码或创建新用户，实际上并不需要与 Spring 交互。除了确保您已通过身份验证（以及创建您拥有权限的新用户）之外。

最重要的部分是，PasswordEncoder 与 spring 中配置的相匹配，而 AuthenticationProvider 将用于将存储的密码与用户输入的密码进行比较。

更新密码的步骤基本上是：

1.  从数据库加载现有用户（通过`id`或`username`）。
2.  获取 spring 用来进行身份验证的 PasswordEncoder。
3.  存储用户。

创建新用户的步骤基本上是：

1.  从前端检索用户对象。
2.  获取 Spring 用来进行身份验证的 PasswordEncoder
3.  将用户发送的密码替换为编码版本并将其放回用户对象中。
4.  存储用户。

这是一个定义 REST 端点以创建新用户的示例：

```
private BCryptPasswordEncoder passwordEncoder = new BCryptPasswordEncoder();

@POST
@Path("user/create")
@Produces(MediaType.APPLICATION_JSON)
@Secured("ROLE_ADMIN")
public User createUser(User user) {
    if(user.getPassword() == null || user.getPassword().equals("")) {
        //throw exception...
    }
    user.setPassword(passwordEncoder.encode(user.getPassword()));
    userService.save(user);
    return user;
} 
```

# asp-classic - 经典的 ASP IsNumeric 怪异？

> ID：11525309
> 
> 赞同：2
> 
> 时间：2012-07-17T14:57:32.253
> 
> 标签：asp-classic, isnumeric

刚刚遇到了一个相当奇怪的功能，其中内置的 IsNumeric 函数是经典的 ASP。

我有一个 JSONArray 类，可以将其内容打印到字符串中 - 它`IsNumeric`用于确定是否使用`"`'s 转义值。一切正常，直到今天客户报告了一个以前看不见的错误！

经过一番挖掘，我发现从 AJAX 调用返回的 JSON 数组中的一些记录格式不正确。更多挖掘。原来格式类似于的字符串`'2D25'`将被评估为数字`IsNumeric`，因此不会被转义！

有人知道为什么吗？ASP 是否认为`D`可以与 a 互换`.`？

另外，我应该如何解决这个问题？正则表达式会是更好的解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T15:06:33.297

`2D25`是一个十六进制值。请参阅[http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.information.isnumeric.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.information.isnumeric.aspx)，特别是：“如果 Expression 是包含有效十六进制或八进制数字的字符串，IsNumeric 将返回 True。” RegEx 可能是您最好的选择。

<<< 编辑 :: 经典 ASP 参考 >>>

[http://classicasp.aspfaq.com/general/what-is-wrong-with-isnumeric.html](http://classicasp.aspfaq.com/general/what-is-wrong-with-isnumeric.html)

在 Classic ASP 中，`D`用于表示`double`精度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T16:33:35.433

RegEx 确实是要走的路，这里有一个这样的解决方案的例子

```
Function myIsNumeric(ByVal Value)
  Set regEx = New RegExp
  regEx.pattern = "^(0|[1-9][0-9]*)$"
  myIsNumeric = Regex.Test(Value)
End Function 
```

这里有一个测试

```
if myIsNumeric("2D25") then
  Wscript.Echo "true"
else
  Wscript.Echo "false"
end if 
```

给出错误的

# opencl - openCL clEnqueueNDRangeKernel 失败；不返回列出的错误类型

> ID：11525310
> 
> 赞同：2
> 
> 时间：2012-07-17T14:57:31.270
> 
> 标签：opencl

我的应用程序正在 openCL 内核中进行图像处理，并将输出写入 openGL 纹理以进行显示。

我正在创建上下文、命令队列、编译程序并毫无错误地创建内核、采样器和 2D 图像对象。在我尝试将内核排队执行之前，一切都运行良好，没有报告错误：

```
errNum = clEnqueueNDRangeKernel(commandQueue, kernel, 2, NULL, globalWorkSize, localWorkSize, 0, NULL, NULL); 
```

此调用返回值 -1000。

根据 clEnqueueNDRangeKernel 的在线手册[页](http://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/clEnqueueNDRangeKernel.html)，errNum 可以设置几个值（在 cl.h 头文件中定义）。这些值都不匹配 -1000。

关于这个错误的任何想法？

* * *

如果相关的话，我正在 Nvidia NVS 4200M gpu 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:48:33.877

我不完全确定，但您可能会从 nvidia 的 OpenCL 实现搭载的底层 CUDA 库中看到（负面？）CUDA_ERROR_UNKNOWN（曾经是 999，但可能已经增加到 1000）的。我之前已经看到弹出一个 CUDA_ERROR_INVALID_VALUE 错误（请看[这里](http://openclnet.codeplex.com/SourceControl/changeset/view/97338#1251570)我的 ErrorCode 枚举中的第一个值），这就是我怀疑这一点的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T17:43:41.600

我假设您正在使用 cl gl interop？参见 cl_gl.h：

```
#define CL_INVALID_GL_SHAREGROUP_REFERENCE_KHR  -1000 
```

# codeigniter - codeigniter 变量段

> ID：11525312
> 
> 赞同：0
> 
> 时间：2012-07-17T14:57:32.437
> 
> 标签：codeigniter, codeigniter-routing

我在使用 codeigniter 段时遇到问题。

我正在寻找这样的东西，我的控制器在哪里`contacts`，动作是`list`：

```
localhost/index.php/contacts/list/limit/10/offset/100/orderBy/postalCode/search/john/ 
```

这样我可以混合我的参数，它们不必按照特定的顺序，或者我可以把它们放在一起，例如：

```
localhost/index.php/contacts/list/search/john/ 
```

我怎么得到这个，因为我看到它的方式，我只能请求这样一个片段：

```
$this->uri->segment(3); 
```

但是段 3 可以带有偏移值或极限值，或者完全不同的东西。

非常感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T15:03:43.013

用于`$this->uri->uri_to_assoc()`获取[这里](http://codeigniter.com/user_guide/libraries/uri.html)解释的参数。

# php - 如何保护触发电子邮件的 PHP 脚本的使用？

> ID：11525317
> 
> 赞同：5
> 
> 时间：2012-07-17T14:57:55.593
> 
> 标签：php, security

我构建了一个 PHP 脚本来发送电子邮件（基于 Amazon SES）。

所以我可以对我的 PHP 脚本进行 GET 或 POST Ajax 调用：

```
envoi.php?nom=John&email=john@domain.com 
```

触发要发送到 john@domain.com 的电子邮件。

我的网站有一个注册表单，在提交时会对 PHP 脚本进行 jquery ajax 调用（网站和 PHP 脚本在同一台服务器上）。我也将脚本用于其他事件。

现在我担心如果有人掌握了它的 URL，这个脚本显然会被滥用。

如何保护对该脚本的访问？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T14:59:19.410

您可以使用[验证码](http://en.wikipedia.org/wiki/CAPTCHA)来保护对该脚本的访问，并使滥用变得更加困难。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T15:13:16.890

**Step1：**当用户打开注册表，可以发送邮件并通过验证码时，设置一个`$_SESSION`参数。

```
$_SESSION["mail_allowed"] = true; 
```

**Step2：**请求照常发送到

```
envoi.php?nom=John&email=john@domain.com 
```

**Step3：**最后，在邮件脚本中，执行如下操作：

```
if($_SESSION["mail_allowed"]){
    $_SESSION["mail_allowed"] = false;
    //send mail  
}
else{
    die('File cannot be executed directly');
} 
```

这样，用户一旦打开您的页面就可以发送邮件，但不能直接执行邮件程序脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T15:00:55.820

是的，这很容易被滥用。没有可靠的解决方案，但我想到了几种保护它的方法：

*   仅允许链接对您确定不是机器人的经过身份验证的用户有效（验证码？）
*   防止同一个IP地址发出重复请求。

# java - 如何获得完全解析的 pom 文件模型？

> ID：11525318
> 
> 赞同：19
> 
> 时间：2012-07-17T14:57:55.517
> 
> 标签：java, maven, maven-3, pom.xml

如何获得完全解析的 pom 文件模型？

这基本上是对[我如何以编程方式构建 pom 文件的有效模型的改写？](https://stackoverflow.com/questions/7429799/how-can-i-programmaticaly-build-the-effective-model-of-a-pom-file)

我正在构建一个针对一组模块执行一些验证规则的 Maven 插件。这些模块的 pom 文件可用，但在执行插件时它们不是反应器的一部分。

我可以使用这种方法读取一个 pom 文件并获取相应的 Model 对象（为简单起见，删除了异常处理）：

```
private Model pomToModel(String pathToPom) throws Exception {
    BufferedReader in = new BufferedReader(new FileReader(pathToPom));
    MavenXpp3Reader reader = new MavenXpp3Reader();
    Model model = reader.read(in);
    return model;
} 
```

它可以工作，但模型对象只具有与 pom 文件相同的信息。

如何改进该方法以便获得“完全解析”的模型对象？完全解决，我的意思是：所有的传递依赖和来自父 pom 的所有其他内容。

干杯!

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T20:59:30.840

我做到了 ：-）

help:effective-pom 和 dependency:tree 真的一点帮助都**没有。**

我必须看看 maven 如何为注入 mojo 的 MavenProject 构建模型。help:effective-pom 已经接收到解析的模型，而 dependency:tree 只构建了一个 DependencyGraph，但它不会将 pom 的整个模型加载到内存中。

通过使用下面的代码，我能够从父级获取包含所有信息的模型对象，解析 ${property} 表达式，并扩展传递依赖项。

就是这样：

**1) 获取模型解析器**

*您将需要一个接口 org.apache.maven.model.resolution.ModelResolver*的实例。不幸的是，maven 不能通过依赖注入轻松提供一个（至少我找不到），所以我们必须构建一个。为了让事情变得更好，该接口的唯一两个实现是包保护的，因此您需要使用一些反射魔法来实例化它。实现它的具体类是*DefaultModelResolver*和*ProjectModelResolver*。我能够像这样构建一个 DefaultModelResolver

```
/**
 * The Maven Project Object
 * 
 * @parameter expression="${project}"
 * @required2.0
 * @readonly
 */
protected MavenProject project;

/**
 * @component
 */
protected ArtifactResolver artifactResolver;

/**
 * @component
 */
protected RemoteRepositoryManager remoteRepositoryManager;

private Object invoke( Object object, String method )
        throws IllegalAccessException, InvocationTargetException, NoSuchMethodException {
    return object.getClass().getMethod( method ).invoke( object );
}

private org.apache.maven.model.resolution.ModelResolver makeModelResolver() throws MojoExecutionException {
    try {
        ProjectBuildingRequest projectBuildingRequest =
        (ProjectBuildingRequest) invoke( project, "getProjectBuildingRequest" );

        Class c = Class.forName("org.apache.maven.repository.internal.DefaultModelResolver");
        Constructor ct = c.getConstructor(new Class[]{RepositorySystemSession.class, 
                RequestTrace.class, String.class,
                ArtifactResolver.class, RemoteRepositoryManager.class,
                List.class});
        ct.setAccessible(true);
        return (org.apache.maven.model.resolution.ModelResolver) ct.newInstance(new Object[]{
                projectBuildingRequest.getRepositorySession(), 
                null, null, artifactResolver, remoteRepositoryManager, 
                project.getRemoteProjectRepositories()});
    } catch (Exception e) {
        throw new MojoExecutionException("Error instantiating DefaultModelResolver", e);
    }
} 
```

**2) 建立模型**

当你有一个 modelResolver 时，你可以像这样从 pom 文件构建模型：

```
public Model resolveEffectiveModel(File pomfile) {
    try {
        return modelBuilder.build(makeModelBuildRequest(pomfile)).getEffectiveModel();
    } catch (Exception e) {
        throw new RuntimeException(e);
    }   
}

private ModelBuildingRequest makeModelBuildRequest(File artifactFile) {
    DefaultModelBuildingRequest mbr = new DefaultModelBuildingRequest();
    mbr.setPomFile(artifactFile);
    mbr.setModelResolver(modelResolver); // <-- the hard-to-get modelResolver
    return mbr;
} 
```

看起来不漂亮，但它对我有用..：P

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-09-21T06:51:54.467

[Romain 在上面](https://stackoverflow.com/a/26622305/157591)提供了很好的答案，但它使用的是从 maven 3.x 中删除的弃用类。更新版本是这样的：

```
@Parameter( defaultValue = "${project}", readonly = true )
private MavenProject project;

@Component
private RepositorySystem repositorySystem;

@Component
private ProjectBuilder mavenProjectBuilder;

@Parameter( defaultValue = "${session}", readonly = true )
private MavenSession session;

private MavenProject getMavenProject(String groupId, String artifactId, String version) throws ProjectBuildingException {

    Artifact pomArtifact = repositorySystem.createProjectArtifact(groupId, artifactId, version);
    ProjectBuildingResult build = mavenProjectBuilder.build(pomArtifact, session.getProjectBuildingRequest());

    return build.getProject();

} 
```

一个工作示例在[hierarchy-maven-plugin](https://github.com/ExampleDriven/hierarchy-maven-plugin)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-29T03:26:04.940

也许对你来说为时已晚，但如果它可以在未来帮助别人。所以我这样做了：

```
@Component
private RepositorySystem repositorySystem;

@Component
private MavenProjectBuilder mavenProjectBuilder;

@Parameter(property = "project.remoteArtifactRepositories")
protected List<ArtifactRepository> remoteRepositories;

@Parameter(property = "localRepository")
protected ArtifactRepository localRepository;

...
Artifact pomArtifact = repositorySystem.createProjectArtifact(groupId, artifactId,version);
MavenProject project = mavenProjectBuilder.buildFromRepository(pomArtifact
                          , remoteRepositories, localRepository); 
```

就是这样。它应该工作。如果您有一些特殊的包装（例如捆绑...） 在目标 pom 项目中，请确保与这些包装关联的插件安装在您当前的项目中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T15:03:16.430

您寻找的源代码在`help:effective-pom`某个地方。

--- 编辑更新 ---

[快速浏览](http://svn.apache.org/viewvc/maven/plugins/tags/maven-help-plugin-2.1.1/src/main/java/org/apache/maven/plugins/help/EffectivePomMojo.java?view=markup)后，您似乎需要`Project`从读取的 pom.xml 构建一个 Maven。这可能会涉及许多步骤，包括解析 POM 的父项目、下载和解析其他 Maven 插件工件以及将所有引用连接在一起。

单独阅读儿童级别的 pom 是行不通的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-17T15:07:19.040

执行“mvn help:effective-pom”时，maven 帮助插件会做类似的事情。

见[http://svn.apache.org/viewvc/maven/plugins/tags/maven-help-plugin-2.1.1/src/main/java/org/apache/maven/plugins/help/EffectivePomMojo.java?view =来源的标记](http://svn.apache.org/viewvc/maven/plugins/tags/maven-help-plugin-2.1.1/src/main/java/org/apache/maven/plugins/help/EffectivePomMojo.java?view=markup)。

我认为这不会显示传递依赖。

mvn dependency:tree 目标可以做到这一点：http: [//svn.apache.org/viewvc/maven/plugins/tags/maven-dependency-plugin-2.4/src/main/java/org/apache/maven/plugin/dependency /TreeMojo.java?view=标记](http://svn.apache.org/viewvc/maven/plugins/tags/maven-dependency-plugin-2.4/src/main/java/org/apache/maven/plugin/dependency/TreeMojo.java?view=markup)

也许你可以创造两者的混合物？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-24T21:18:42.650

以防万一有人需要，这里有一个在 Groovy 中运行的示例。它使用 Grape 动态加载使用 pom.xml 所需的依赖项。它同时加载运行时类路径和测试类路径。

```
@Grapes([
         @Grab(group='org.apache.maven', module='maven-core', version='3.0.5'),
         @Grab(group='org.apache.maven', module='maven-compat', version='3.0.5'),
         @Grab(group='com.jcabi', module='jcabi-aether', version='0.10.1')
         ])

         // http://www.programcreek.com/java-api-examples/index.php?api=org.apache.maven.project.MavenProjectBuilder See # 20

import org.codehaus.plexus.DefaultPlexusContainer
import org.apache.maven.project.MavenProjectBuilder
import org.apache.maven.artifact.repository.layout.ArtifactRepositoryLayout;
import org.apache.maven.artifact.repository.ArtifactRepository;
import org.apache.maven.project.DefaultProjectBuilderConfiguration
import org.apache.maven.artifact.repository.DefaultArtifactRepository
import com.jcabi.aether.Aether
import org.sonatype.aether.repository.RemoteRepository;
import org.sonatype.aether.util.artifact.DefaultArtifact;
import org.sonatype.aether.artifact.Artifact;

container=new DefaultPlexusContainer();
projectBuilder=(MavenProjectBuilder)container.lookup(MavenProjectBuilder.class.getName());
layout=(ArtifactRepositoryLayout)container.lookup(ArtifactRepositoryLayout.class.getName(),"default");

def projectInfo(localRepoUrl, pom){

    File pomFile = new File(pom);
    String localRepoUrl2 = "file://" + localRepoUrl;
    File local = new File(localRepoUrl);

    ArtifactRepository localRepo=new DefaultArtifactRepository("local",localRepoUrl2,layout);
    pbConfig=new DefaultProjectBuilderConfiguration().setLocalRepository(localRepo);
    project = projectBuilder.build( pomFile, pbConfig );
    aether = new Aether(project, local);
    [ runtime: resolveDependencies(aether, project, "runtime"),
      test : resolveDependencies(aether, project, "test") ];
}

def resolveDependencies (aether, project, scope) {
    depLists = project.getDependencies().collect { 

        art = new DefaultArtifact(it.getGroupId(), it.getArtifactId(), it.getClassifier(), it.getType(), 
                                  it.getVersion());
        Collection<Artifact> deps = aether.resolve( art, scope );

        deps.collect{  it.getFile().getAbsolutePath() }

    }

    [ dependencies : depLists.collect {it.first()},  classpath : depLists.flatten() ]
}

println projectInfo("c:/Users/lpmsmith/.m2/repository", "pom.xml"); 
```

# php - php多维数组排序问题

> ID：11525320
> 
> 赞同：3
> 
> 时间：2012-07-17T14:58:28.450
> 
> 标签：php, sorting, multidimensional-array

我有一个复杂的多维数组。结构是这样的

```
Array
(
    [0] => Array
        (
            [countries] => Array
                (
                    [0] => Array
                        (
                            [country_code] => US                            
                            [growth] => 3.57
                        )

                    [1] => Array
                        (
                            [country_code] => CA                            
                            [growth] => 4.77
                        )

                    [2] => Array
                        (
                            [country_code] => TT                            
                            [growth] => 0
                        )
                )
            [group_name] => North America
        )

    [1] => Array
        (
            [countries] => Array
                (
                    [0] => Array
                        (
                            [country_code] => BR                           
                            [growth] => 2.19
                        )

                    [1] => Array
                        (
                            [country_code] => PE                           
                            [growth] => 1.78
                        )

                    [2] => Array
                        (
                            [country_code] => UY                           
                            [growth] => 8.83
                        )

                    [3] => Array
                        (
                            [country_code] => MX                           
                            [growth] => 3.83
                        )
                )
            [group_name] => South America
        )
) 
```

我想对它们进行排序（可能是通过使用`array_multisort`），以便根据`growth`（最高优先）对它们进行排序

这样排序后的数组将是

```
Array
(
    [0] => Array
        (
            [countries] => Array
                (
                    [0] => Array
                        (
                            [country_code] => CA                            
                            [growth] => 4.77
                        )
                    [1] => Array
                        (
                            [country_code] => US                            
                            [growth] => 3.57
                        )                 
                    [2] => Array
                        (
                            [country_code] => TT                            
                            [growth] => 0
                        )
                )
            [group_name] => North America
        )

    [1] => Array
        (
            [countries] => Array
                (
                   [0] => Array
                        (
                            [country_code] => UY                           
                            [growth] => 8.83
                        )

                   [1] => Array
                        (
                            [country_code] => MX                           
                            [growth] => 3.83
                        )
                    [2] => Array
                        (
                            [country_code] => BR                           
                            [growth] => 2.19
                        )

                    [3] => Array
                        (
                            [country_code] => PE                           
                            [growth] => 1.78
                        )
                )
            [group_name] => South America
        )
) 
```

我是 PHP 新手，所以我不知道如何对这个复杂的数组进行排序。我知道如何对简单的多维数组进行排序，如[http://in2.php.net/manual/en/function.array-multisort.php所示](http://in2.php.net/manual/en/function.array-multisort.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:40:18.000

最坏的情况是，您制作自己的排序功能并使用[usort](http://in2.php.net/manual/en/function.usort.php)。
它实际上是为这类事情而设计的。

在您的情况下，您将通过`$arr[$i]['countries']`并具有基于`$arr['growth']`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:48:48.680

我多年来一直使用以下排序功能：

```
/**
 * sorting array of associative arrays - multiple row sorting using a closure
 * see also: the-art-of-web.com/php/sortarray/
 * @param array $data input-array
 * @param string|array $fields array-keys
 * @license Public Domain
 * @return array
 */
function sortArray( $data, $field )
{
    $field = (array) $field;
    uasort( $data, function($a, $b) use($field) {
        $retval = 0;
        foreach( $field as $fieldname )
        {
            if( $retval == 0 ) $retval = strnatcmp( $a[$fieldname], $b[$fieldname] );
        }
        return $retval;
    } );
    return $data;
}

// example call, sort by 'growth' first and by 'country_code' afterwards
// this would be equal to a MySQL 'ORDER BY `growth` ASC, `country_code` ASC'
foreach( $countryArray as &$item )
{
    $item['countries'] = sortArray( $item['countries'], array( 'growth', 'country_code' ) );
} 
```

# python - Python 3异常不打印新行

> ID：11525321
> 
> 赞同：12
> 
> 时间：2012-07-17T14:58:35.190
> 
> 标签：python, exception, stderr

我真的不知道怎么说，但是当我在 python 3.2 中引发异常时，'\n' 不会被*解析*......

这是一个例子：

```
class ParserError(Exception):
    def __init__(self, message):
            super().__init__(self, message)

try:
    raise ParserError("This should have\na line break")
except ParserError as err:
    print(err) 
```

它是这样工作的：

```
$ ./test.py
(ParserError(...), 'This should have\na line break') 
```

如何确保新行打印为新行？

```
class ParserError(Exception):
    pass 
```

或者

```
print(err.args[1]) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T15:08:37.783

啊，err.message 在 2.6 中已被弃用 - 所以不再存在，所以......

```
print(err.args[1]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T15:04:50.563

这里发生的事情是，`repr`您的消息字符串的 正在打印，作为将整个`Exception`对象传递给 的一部分`print()`，因此换行符被转换回`\n`. 如果您单独`print`使用实际字符串，则将打印实际的换行符。

# rpm - yum 识别但不安装依赖

> ID：11525322
> 
> 赞同：1
> 
> 时间：2012-07-17T14:58:37.240
> 
> 标签：rpm, yum, rpmbuild

我有自己的 yum rpm 存储库，但我遇到了一个包的问题 - yum 表示它看到了依赖项，但它决定**不**安装其中一个，没有显示任何错误消息。yum 输出中巧妙地捕捉到了问题（“stomppy”是问题依赖项）

```
Setting up Install Process
Resolving Dependencies
--> Running transaction check
---> Package lrms-skippy.noarch 0:1a.5.0-1 will be installed
--> Processing Dependency: elementtree for package: lrms-skippy-1a.5.0-1.noarch
--> Processing Dependency: stomppy for package: lrms-skippy-1a.5.0-1.noarch
--> Running transaction check
---> Package elementtree.noarch 0:1.2.6-1 will be installed
--> Finished Dependency Resolution 
```

如您所见，yum 知道“lrms-skippy”同时依赖于 stomppy 和 elementtree，但只想安装**elementree**。这些都是我自己编写的规范文件。“lrms-skippy”的依赖声明如下：

```
Requires: python, lrms-stomppy, lrms-elementtree 
```

以防 stomppy 包已经安装，我尝试删除它：

```
[root@centos_6 ~]# yum remove lrms-stomppy
Loaded plugins: fastestmirror, presto
Setting up Remove Process
No Match for argument: lrms-stomppy
Loading mirror speeds from cached hostfile
 * base: centos-mirror.jchost.net
 * extras: yum.phx.singlehop.com
 * updates: mirror.us.leaseweb.net
Package(s) lrms-stomppy available, but not installed.
No Packages marked for removal 
```

如您所见，该软件包可用但未安装。

那么，为什么 yum 会以这种方式表现 - 只是决定不安装依赖项而没有任何错误或解释？百胜版本 3.2.29。谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:13:53.397

问题已解决。elementree 软件包声称提供 stomppy，因此 yum 无需安装 stomppy。我不知道为什么我的 elementree rpm 提出了这个错误的声明，因为这不在我的规范文件中，但重建 elementree 包已经解决了这个问题。所有内部 rpm 和规范文件，所以我将不得不举手这个。

# python - 在 python 事件处理程序中检索 Tk 虚拟事件的 -data 字段

> ID：11525323
> 
> 赞同：5
> 
> 时间：2012-07-17T14:58:40.040
> 
> 标签：python, events, tkinter

Tcl/Tk 允许通过以下语法生成虚拟事件：

```
event generate .myWidget <<whatever>> -data "arbitrary text here" 
```

绑定到此事件的 Tcl/Tk 句柄将允许`-data`通过`%d`替换访问选项的值。从 python，我可以绑定到这个事件：

```
def on_whatever(event):
    print("Meh")

myWidget.bind("<<whatever>>", on_whatever, add="+") 
```

到目前为止，这对我来说很好，但我无法从 python 中找到任何方法来访问 tcl/tk 事件的`-data`字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T03:02:36.390

您可能必须使用单独的变量/属性。

当需要调用 event_generate() 时，您可以将变量设置为您喜欢的任何值。

```
from Tkinter import *
root = Tk()
attr = None

def blahblah(event):
    print attr

root.bind('<<shazzam>>', blahblah, '+')

def do_something():
    global attr
    attr = 'arbitrary text here'
    root.event_generate('<<shazzam>>')

root.after(3000, do_something)
root.mainloop() 
```

# spring - jdbctemplate 时出现空指针异常

> ID：11525327
> 
> 赞同：2
> 
> 时间：2012-07-17T14:58:58.730
> 
> 标签：spring, spring-jdbc

使用 spring jdbc 示例获取 NullPointerException

```
java.lang.NullPointerException
    at com.net.technicalkeeda.dao.PersonDaoImpl.findTotalCustomer(PersonDaoImpl.java:46) 
```

当我从控制器调用 findTotalCustomer 方法时，这是我将 jdbcTemplate 设为 NULL 的方法。但是在服务器启动时，它会为数据源和 jdbctemplate 分配值。所以你能帮我解释一下为什么会有一个 NULL 值。

这是我的控制器类，我正在访问 dao 方法

```
public class HelloController implements Controller {

    public ModelAndView handleRequest(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

        ApplicationContext ctx = new FileSystemXmlApplicationContext("classpath*:/WEB-INF/springtutorial-servlet.xml");

        if (ctx != null) {
            personDao = (PersonDaoImpl)ctx.getBean("personDao");
        }

        personDao.findTotalCustomer();

        return new ModelAndView("hello.jsp");
    }

} 
```

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName"><value>com.mysql.jdbc.Driver</value></property>
        <property name="url"><value>jdbc:mysql://localhost:3306/technicalkeeda</value></property>
        <property name="username"><value>root</value></property>
        <property name="password"><value></value></property>
    </bean>

    <bean id="personDao" class="com.net.technicalkeeda.dao.PersonDaoImpl">
    <property name="dataSource"><ref local="dataSource" /></property>
    </bean>

package com.net.technicalkeeda.dao;

import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Collection;

import javax.sql.DataSource;

import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowMapper;

import com.net.technicalkeeda.bean.Person;

/**
 * @author Yashwant Chavan
 * 
 */
public class PersonDaoImpl {

    private DataSource dataSource;

    private JdbcTemplate jdbcTemplate;

    public void setDataSource(DataSource dataSource) {
        this.dataSource = dataSource;
        this.jdbcTemplate = new JdbcTemplate(dataSource);

        System.out.println("Updated Datasouce---->" + dataSource);
        System.out.println("Updated Jdbctemplate---->" + jdbcTemplate);
    }

    /* Display all persons */
    public Collection<Person> findAll() {
        System.out.println("Calling............." + this.jdbcTemplate);
        return jdbcTemplate.query(
                "select emp_name, emp_salary from trn_employee",
                new PersonMapper());

    }

    public int findTotalCustomer(){

        String sql = "SELECT COUNT(*) FROM trn_employee";
        System.out.println("jdbcTemplate" + jdbcTemplate);
        int total = jdbcTemplate.queryForInt(sql);

        return total;
    }

    private static final class PersonMapper implements RowMapper {

        public Object mapRow(ResultSet rs, int rowNum) throws SQLException {
            Person person = new Person();
            person.setFirstName(rs.getString("emp_name"));
            return person;
        }
    }

} 
```

控制台日志

```
17 Jul, 2012 8:08:52 PM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(C:\javaworkspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\SpringTutorial\WEB-INF\lib\j2ee.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
17 Jul, 2012 8:08:52 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'springtutorial'
17 Jul, 2012 8:08:52 PM org.springframework.web.servlet.FrameworkServlet initServletBean
INFO: FrameworkServlet 'springtutorial': initialization started
17 Jul, 2012 8:08:52 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing org.springframework.web.context.support.XmlWebApplicationContext@7ab2c6a6: display name [WebApplicationContext for namespace 'springtutorial-servlet']; startup date [Tue Jul 17 20:08:52 IST 2012]; root of context hierarchy
17 Jul, 2012 8:08:52 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/springtutorial-servlet.xml]
17 Jul, 2012 8:08:52 PM org.springframework.context.support.AbstractApplicationContext obtainFreshBeanFactory
INFO: Bean factory for application context [org.springframework.web.context.support.XmlWebApplicationContext@7ab2c6a6]: org.springframework.beans.factory.support.DefaultListableBeanFactory@2d8e8541
17 Jul, 2012 8:08:52 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@2d8e8541: defining beans [dataSource,personDao,helloController,loggerInterceptor,performanceInterceptor,urlMapping]; root of factory hierarchy
17 Jul, 2012 8:08:53 PM org.springframework.jdbc.datasource.DriverManagerDataSource setDriverClassName
INFO: Loaded JDBC driver: com.mysql.jdbc.Driver
**Updated Datasouce---->org.springframework.jdbc.datasource.DriverManagerDataSource@38827968
Updated Jdbctemplate---->org.springframework.jdbc.core.JdbcTemplate@7df0b7d3**
17 Jul, 2012 8:08:53 PM org.springframework.web.servlet.FrameworkServlet initServletBean
INFO: FrameworkServlet 'springtutorial': initialization completed in 453 ms
17 Jul, 2012 8:08:53 PM org.apache.coyote.http11.Http11BaseProtocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
17 Jul, 2012 8:08:53 PM org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:8009
17 Jul, 2012 8:08:53 PM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/0  config=null
17 Jul, 2012 8:08:53 PM org.apache.catalina.storeconfig.StoreLoader load
INFO: Find registry server-registry.xml at classpath resource
17 Jul, 2012 8:08:53 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 1749 ms 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:06:10.837

我的猜测是 Spring 实例化它的 bean 并注入 DataSource，但不是从 Spring bean factory 获取 bean，而是您自己实例化一个，因此使用另一个实例，不受 Spring 的控制，因此没有使用 DataSource 初始化。

你不应该这样做`new SomeSpringBean()`。所有的 bean 引用都应该被注入依赖或者应该通过向 Spring bean 工厂询问一个 bean 来获得。

因此，如果您的代码确实如此`new PersonDaoImpl()`，则说明有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:15:14.690

我会冒险猜测并说您没有正确地将 bean 从上下文文件中取出。新的运算符和弹簧玩得不好。我假设你知道如何从 中取出豆子`application-context.xml`，但如果不知道，我还是把它留在这里。

```
 //simple singleton
    private static void initApplicationContext() {
    if (_applicationContext == null)
        _applicationContext = new ClassPathXmlApplicationContext("PersistenceHelper-context.xml");
}
//get bean
Datasource dataSource = (DataSource) _applicationContext.getBean("dataSource"); 
```

# php - 汽车 正则表达式 - 需要修复

> ID：11525328
> 
> 赞同：2
> 
> 时间：2012-07-17T14:59:10.533
> 
> 标签：php, html, regex

我有这个函数（我在 Stackoverflow 的某个地方找到的）自动`<p>`在输出的字符串中添加标签。

```
function autop ($string) {

    // Define block tags
    $block_tag_list = array ('address', 'applet', 'article', 'aside', 'audio', 'blockquote', 'button', 'canvas', 'center', 'command', 'data', 'datalist', 'dd', 'del', 'details', 'dir', 'div', 'dl', 'dt', 'embed', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'frameset', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup', 'hr', 'iframe', 'ins', 'isindex', 'li', 'map', 'menu', 'nav', 'noframes', 'noscript', 'object', 'ol', 'output', 'p', 'pre', 'progress', 'section', 'script', 'summary', 'table', 'tbody', 'td', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'ul', 'video');

    $tags = '<' . implode ('[^>]*>|<', $block_tag_list) . '[^>]*>';

$pattern = <<<PATTERN
/
(\A|\\n\\n)(?!$tags) # Start of string or two linebreaks or anything but a block tag
(.+?) # Just about anything
(\Z|\\n\\n) # End of string or two line breaks
/isex
PATTERN;

    $string = str_replace ("\r\n", "\n", $string);
    $string = str_replace ("\r\t", "", $string);
    $string = str_replace ("\n\t", "", $string);
    $string = str_replace ("\t", "", $string);
    $string = preg_replace ($pattern, "'\\1<p>' . nl2br ('\\2') . '</p>\\3'", $string);
    $string = preg_replace ($pattern, "'\\1<p>' . nl2br ('\\2') . '</p>\\3'", $string);
    $string = str_replace ('\"', "&quot;", $string);

    return $string;
} 
```

拥有这种类型的字符串：

```
<h1>Title</h1>

This will be wrapped in a p tag

This should be wrapped in a p tag too 
```

它输出

```
<h1>Title</h1>

<p>This will be wrapped in a p tag</p>

<p>This should be wrapped in a p tag too</p> 
```

它工作得很好，但有一个问题：它包装了 HTML 标签，这些标签紧跟`<p>`在其他`<p>`标签中的标签之后，搞砸了代码。`<h1>`如果 HTML 标记在一个或任何其他块标记之后，则不会发生这种情况。

使双倍`preg_replace`单一个解决了这个问题，但是如果像前面的例子一样有两个段落，它只包装第一个而不是第二个。

我觉得这只是一个很小的变化，可以让它“滴答作响”，但我无法弄清楚。

也许如果有人有天才的罢工...... :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:42:31.237

我不确定您是否会一直对您的解决方案感到满意，但您应该得到您想要做的事情（观看`?=`第 5 行中的添加）：

```
$pattern = <<<PATTERN
/
(\A|\\n\\n)(?!$tags) # Start of string or two linebreaks or anything but a block tag
(.+?) # Just about anything
(?=\Z|\\n\\n) # End of string or two line breaks
/isex
PATTERN; 
```

没有这个，前一个边界`\Z`将消耗下一个边界`\A`，因此这将不再匹配。当然，删除 double `preg_replace`。

希望这可以帮助。

# jquery - Jquery 显示/隐藏帖子菜单

> ID：11525336
> 
> 赞同：0
> 
> 时间：2012-07-17T14:59:52.473
> 
> 标签：jquery

我已经尝试了几天自己解决这个问题，但没有运气。它需要显示与菜单 a 具有相同属性的帖子。

[http://jsfiddle.net/MatsKruger/CeLkt/](http://jsfiddle.net/MatsKruger/CeLkt/)

希望大家能帮忙

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:50:11.433

像[这样](http://jsfiddle.net/CeLkt/3/)？如果您想实现 %50 淡入淡出效果，那么您可以`CSS`在帖子中添加和删除一个类，而不是隐藏和显示。

# php - 查询 PHP/MYSQL 查找 Lname

> ID：11525340
> 
> 赞同：0
> 
> 时间：2012-07-17T14:59:57.780
> 
> 标签：php, mysql

我确信这很简单——我只是想查询 mysql 并返回与输入到 HTML 表单中的姓氏匹配的行——当输入（和查询）是整数时有效，但当我尝试时无效使用姓氏 (Lname) 任何想法（我对 PHP 和编码非常陌生......）

```
<form name "namelookup" form action='main2test.php' method="post">
  Last name: <input type="text" name="Lname" /><br />
  <input type="submit" value="Submit" />
</form>

<?php

$Lname=$_POST['Lname'];

// sending query
$result = mysql_query("SELECT * FROM {$table} WHERE `Lname`=$Lname");
if (!$result) {
    die("Query to show fields from table failed");
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T15:01:41.273

```
$result = mysql_query("SELECT * FROM {$table} WHERE `Lname`='".mysql_real_escape_string($Lname)."'"); 
```

# mpmovieplayercontroller - AVPlayer/MPMoviePlayerController 的字幕

> ID：11525342
> 
> 赞同：16
> 
> 时间：2012-07-17T15:00:00.603
> 
> 标签：mpmovieplayercontroller, avfoundation, avplayer, subtitle, transport-stream

我正在使用 m3u8 视频格式流式传输视频，现在我需要显示相同的字幕。

我在 Apple Documentation中搜索，发现可以通过使用`closedCaptionDisplayEnabled`.`AVPlayer`

我很想知道字幕的格式应该是什么？.srt 格式可以吗？

我也可以实现相同的使用`MPMoviePlayerController`吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2016-06-21T13:00:27.887

**2020 年 3 月 6 日更新：**在 GitHub 上，jbweimar 创建了一个示例项目，该项目使用了`AVAssetResourceLoaderDelegate`看起来很有前途的方法：[https ://github.com/jbweimar/external-webvtt-example](https://github.com/jbweimar/external-webvtt-example)

* * *

**2018 年10 月 30 日更新：**值得[由 Apple 工程师检查此答案](https://forums.developer.apple.com/thread/45060#202064)（感谢[@allenlini](https://stackoverflow.com/users/1640653/allenlinli)[指出](https://stackoverflow.com/questions/11525342/subtitles-for-avplayer-mpmovieplayercontroller/37945178?noredirect=1#comment88161078_37945178)）。他提出了一个解决方案，涉及`AVAssetResourceLoaderDelegate`. 我自己没有尝试过，但它可能是比我下面的更好的解决方案。

* * *

**原答案：**

似乎在您的 m3u8 流描述中引用您的 WebVTT 文件是官方支持的方式。“事后”添加它们似乎不受官方支持（请参阅[Apple 工程师的此声明（页面底部）](https://forums.developer.apple.com/thread/16554)）。

然而，这并不意味着你不能让它工作;-)。在Chris Adamson的[这个出色的演示文稿](http://www.slideshare.net/invalidname/stupid-video-tricks)和[示例项目 (ZIP) 、](https://dl.dropboxusercontent.com/u/12216224/conferences/cocoaconfchicago14/cocoaconf-chicago-2014-code.zip) [Apple 开发者论坛上的这篇文章](https://forums.developer.apple.com/thread/16554)和[Abdul Azeem 的 Ray Wenderlich 教程的帮助下](https://www.raywenderlich.com/13418/how-to-play-record-edit-videos-in-ios)，我能够让它工作。这是 Abdul Azeem 的示例代码和 Chris 的示例项目的修改版本。

请注意您需要如何使用`AVMediaTypeText`而不是`AVMediaTypeSubtitle`. 这似乎是iOS中的一个错误。

```
// 1 - Load video asset
AVAsset *videoAsset = [AVURLAsset assetWithURL:[[NSBundle mainBundle] URLForResource:@"video" withExtension:@"mp4"]];

// 2 - Create AVMutableComposition object. This object will hold your AVMutableCompositionTrack instances.
AVMutableComposition *mixComposition = [[AVMutableComposition alloc] init];

// 3 - Video track
AVMutableCompositionTrack *videoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo
                                                                    preferredTrackID:kCMPersistentTrackID_Invalid];
[videoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration)
                    ofTrack:[[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0]
                     atTime:kCMTimeZero error:nil];

// 4 - Subtitle track
AVURLAsset *subtitleAsset = [AVURLAsset assetWithURL:[[NSBundle mainBundle] URLForResource:@"subtitles" withExtension:@"vtt"]];

AVMutableCompositionTrack *subtitleTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeText
                                                                       preferredTrackID:kCMPersistentTrackID_Invalid];

[subtitleTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration)
                       ofTrack:[[subtitleAsset tracksWithMediaType:AVMediaTypeText] objectAtIndex:0]
                        atTime:kCMTimeZero error:nil];

// 5 - Set up player
AVPlayer *player = [AVPlayer playerWithPlayerItem: [AVPlayerItem playerItemWithAsset:mixComposition]]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-08-21T09:57:02.053

这是[@JohannesFahrenkrug answer](https://stackoverflow.com/a/37945178/4620598)的 Swift 版本。希望这对某人有用：

```
 let localVideoAsset = Bundle.main.url(forResource: "L1C1P1C3", withExtension: "mp4")

    //Create AVMutableComposition
    let videoPlusSubtitles = AVMutableComposition()

    //Adds video track
    let videoTrack = videoPlusSubtitles.addMutableTrack(withMediaType: .video, preferredTrackID: kCMPersistentTrackID_Invalid)

    try? videoTrack?.insertTimeRange(CMTimeRangeMake(kCMTimeZero, localVideoAsset.duration),
                                of: localVideoAsset.tracks(withMediaType: .video)[0],
                                at: kCMTimeZero)

    //Adds subtitle track
    let subtitleAsset = AVURLAsset(url: Bundle.main.url(forResource: "L1C1P1C3", withExtension: ".mp4.vtt")!)

    let subtitleTrack = videoPlusSubtitles.addMutableTrack(withMediaType: .text, preferredTrackID: kCMPersistentTrackID_Invalid)

    try? subtitleTrack?.insertTimeRange(CMTimeRangeMake(kCMTimeZero, localVideoAsset.duration),
                                        of: subtitleAsset.tracks(withMediaType: .text)[0],
                                        at: kCMTimeZero) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T19:44:24.010

AVPlayer 和 MPMoviePlayerController 都可以显示字幕。

不同之处似乎在于，使用 AVPlayer，您可以使用 closedCaptionDisplayEnabled 属性控制是否显示字幕。

使用 MPMoviePlayerController，用户可以使用设置应用程序中的开关控制是否显示字幕。您无法在应用程序中对此进行编程控制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-27T08:06:22.123

WWDC 2013 iOS 应用程序使用 WebVTT 文件作为其字幕（感谢[Nicholas Riley 的发现](https://twitter.com/nriley/status/350137885082652672)）。无论出于何种原因，每个会话大约有 50 个（具体数字不同）。

我不知道 AVFoundation 或 MPMoviePlayer 级别是否支持 WebVTT，或者应用程序是否自己下载和解析字幕文件。

快速搜索“webvtt m3u8”会找到对[这个 HTTP Live Streaming Draft](http://potaroo.net/ietf/all-ids/draft-pantos-http-live-streaming-09.txt)的引用，这表明您*可以*通过简单地引用 m3u8 播放列表中的 WebVTT 文件来完成这项工作。不过，我没有给你一个例子，因为我无法轻易猜出 WWDC 会话的 m3u8 URL。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-01T09:23:38.043

添加字幕时出现音频错误。更新版本如下；

**注意：**只能将本地项目（资产）插入 AVMutableComposition，远程项目（如 HTTP 视频流）在 iOS 15 之前将无法使用。

[视频和字幕文件](https://www.dropbox.com/sh/tjh2imowyu4md9e/AAARru4GlHdUAuB82bsknrxpa?dl=0)

[将 HTTP 流插入 AVMutableComposition](https://stackoverflow.com/questions/8318422/inserting-an-http-stream-into-a-avmutablecomposition)

**斯威夫特 5**

```
func play() {
    guard let videoUrl = Bundle.main.url(forResource: "ElephantsDream", withExtension: "mp4")?.absoluteURL,
          let subtitleUrl = Bundle.main.url(forResource: "subtitles-en", withExtension: "vtt")?.absoluteURL else {
              return
          }

    let videoAsset = AVURLAsset(url: videoUrl)
    let subtitleAsset = AVURLAsset(url: subtitleUrl)

    // Create AVMutableComposition object. This object will hold your AVMutableCompositionTrack instances.
    let mixComposition = AVMutableComposition()

    let videoTrack = mixComposition.addMutableTrack(withMediaType: .video, preferredTrackID: kCMPersistentTrackID_Invalid)
    let audioTrack = mixComposition.addMutableTrack(withMediaType: .audio, preferredTrackID: kCMPersistentTrackID_Invalid)
    let subtitleTrack = mixComposition.addMutableTrack(withMediaType: .text, preferredTrackID: kCMPersistentTrackID_Invalid)

    do {
        try videoTrack?.insertTimeRange(CMTimeRangeMake(start: .zero, duration: videoAsset.duration),
                                        of: videoAsset.tracks(withMediaType: .video).first!,
                                        at: .zero)
        try audioTrack?.insertTimeRange(CMTimeRangeMake(start: .zero, duration: videoAsset.duration),
                                        of: videoAsset.tracks(withMediaType: .audio).first!,
                                        at: .zero)
        try subtitleTrack?.insertTimeRange(CMTimeRangeMake(start: .zero, duration: subtitleAsset.duration),
                                           of: subtitleAsset.tracks(withMediaType: .text).first!, at: .zero)
    } catch let err {
        print(err.localizedDescription)
    }

    let player = AVPlayer(playerItem: AVPlayerItem(asset: mixComposition))
    let vc = AVPlayerViewController()
    vc.player = player
    present(vc, animated: true) {
        vc.player?.play()
    }
} 
```

如果您想使用服务器端视频和字幕，您需要像这样使用。

**iOS 15**

```
func play() {
    if #available(iOS 15.0.0, *) {
        let videoUrl = URL(string: "https://wwww.acme.com/video/elephantsdream.mov")!
        let subtitleUrl = URL(string: "https://wwww.acme.com/subtitle/subtitles-en.vtt")!

        let videoAsset = AVURLAsset(url: videoUrl)
        let subtitleAsset = AVURLAsset(url: subtitleUrl)

        let mixComposition = AVMutableComposition()
        let videoTrack = mixComposition.addMutableTrack(withMediaType: .video, preferredTrackID: kCMPersistentTrackID_Invalid)
        let audioTrack = mixComposition.addMutableTrack(withMediaType: .audio, preferredTrackID: kCMPersistentTrackID_Invalid)
        let subtitleTrack = mixComposition.addMutableTrack(withMediaType: .text, preferredTrackID: kCMPersistentTrackID_Invalid)

        Task {
            if let videoTrackItem = try await videoAsset.loadTracks(withMediaType: .video).first {
                try videoTrack?.insertTimeRange(CMTimeRangeMake(start: .zero, duration: videoAsset.duration),
                                                of: videoTrackItem,
                                                at: .zero)
            }
            if let audioTrackItem = try await videoAsset.loadTracks(withMediaType: .audio).first {
                try audioTrack?.insertTimeRange(CMTimeRangeMake(start: .zero, duration: videoAsset.duration),
                                                of: audioTrackItem,
                                                at: .zero)
            }
            if let subtitleTrackItem = try await subtitleAsset.loadTracks(withMediaType: .text).first {
                try subtitleTrack?.insertTimeRange(CMTimeRangeMake(start: .zero, duration: videoAsset.duration),
                                                   of: subtitleTrackItem,
                                                   at: .zero)
            }
            DispatchQueue.main.async {
                let player = AVPlayer(playerItem: AVPlayerItem(asset: mixComposition))
                let vc = AVPlayerViewController()
                vc.player = player
                self.present(vc, animated: true) {
                    vc.player?.play()
                }
            }
        }
    }
} 
```

# ruby-on-rails - 添加嵌套表单后，Rails 提交按钮在单击时不执行任何操作

> ID：11525346
> 
> 赞同：0
> 
> 时间：2012-07-17T15:00:27.723
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-forms

我目前正在尝试使用嵌套表单在您创建歌曲时将类别标签添加到歌曲中。在我向它添加嵌套属性之前，该表单工作正常，现在提交按钮在您单击它时不执行任何操作（页面不会重新加载或任何操作）。

在我的模型中，尽管分类，歌曲有很多类别，反之亦然。

这是表格：

```
 <div class="span10 offset1">
    <%= form_for(@song) do |f| %>

      <%= f.label :title, "Title" %>
      <%= f.text_field :title %>

      <%= nested_form_for(@song.categorizations.build) do |f| %>
        <%= f.label :category_id, "TAG" %>
        <%= f.select :category_id, options_for_select(Category.all.collect {|c| [ c.tag, c.id ] }, { :include_blank => true }), prompt: "" %>
      <%end%>

      <%= f.submit "Save song", class: "btn btn-large btn-primary" %>
    <% end %>
  </div> 
```

还有我的歌曲控制器：

```
 def new
    @song = Song.new
  end

 def create
    @song = Song.new(params[:song])
    if @song.save

        flash[:success] = "Song successfully added to library"
        redirect_to @song
    else
        #FAIL!
        render 'new'
    end
  end 
```

分类控制器：

```
def new
    @categorization = Categorization.new
  end

  def create
    @song = Song.find(params[:id])
    @categorization = Category.new(params[:categorization])
    if @categorization.save
        flash[:success] = "Tag added!"
        redirect_to song_path(@song)
    else
        flash[:fail] = "TAG ERROR"
        redirect_to edit_song_path(@song)
    end
  end 
```

预先感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:07:07.907

外部形式应该是nested_form_for，而不是内部形式，应该是fields_for。
此外，您可能不应该将它们都命名为 f，以避免混淆（尽管我认为它不会阻止它工作）。

```
<div class="span10 offset1">
<%= nested_form_for(@song) do |f| %>

  <%= f.label :title, "Title" %>
  <%= f.text_field :title %>

  <%= f.fields_for(@song.categorizations.build) do |catsf| %>
    <%= catsf.label :category_id, "TAG" %>
    <%= catsf.select :category_id, options_for_select(Category.all.collect {|c| [ c.tag, c.id ] }, { :include_blank => true }), prompt: "" %>
  <%end%>

  <%= f.submit "Save song", class: "btn btn-large btn-primary" %>
<% end %> 
```

# ruby-on-rails - 包含模块时出现“未初始化的常量”错误

> ID：11525350
> 
> 赞同：56
> 
> 时间：2012-07-17T15:00:45.140
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我正在尝试引用关联扩展，但它会出现以下错误：

```
NameError (uninitialized constant User::ListerExtension):
  app/models/user.rb:2:in `<class:User>' 
```

这是我的实现：

### 应用程序/模型/user.rb

```
class User < ActiveRecord::Base
  include ListerExtension

  has_and_belongs_to_many :roles, :uniq => true, :extend => Lister 
```

### 库/lister.rb

```
module ListerExtension
  def lister
    self.map(&:to_s).join(', ')
  end
end 
```

我正在使用 Rails v3.1.3。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-09-06T19:04:44.363

Andrew Marshall 对自动加载设置有一个很好的观点（有关更多信息，请参见他链接的问题），而且：因为您命名了 class `ListerExtension`，Rails 将寻找一个名为 -not`lister_extension.rb`的*文件* `lister.rb`。它很聪明，但没那么聪明。

希望有帮助！

# android - Android 平板电脑上的远程桌面连接

> ID：11525351
> 
> 赞同：2
> 
> 时间：2012-07-17T15:00:48.803
> 
> 标签：android, tablet, remote-desktop

我们正在开发 Android 平板电脑应用程序。此应用程序需要远程桌面连接支持才能将**系统连接到平板电脑**或**平板电脑到平板电脑**。我们怎样才能做到这一点？是否有任何 SDK 可用于这项工作？非常感谢任何帮助。

谢谢！

# ruby-on-rails - 使用 Paperclip 和 ImageMagick 识别错误

> ID：11525356
> 
> 赞同：2
> 
> 时间：2012-07-17T15:00:57.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3, macos, imagemagick, paperclip

我安装了 Paperclip gem 以将图像上传到我的 Rails 应用程序以上传图像并且工作正常。我的`User model`样子：

```
class User < ActiveRecord::Base

attr_accessible :name, :email, :password, :password_confirmation, :photo

has_attached_file :photo 
```

然后我安装了 ImageMagick（版本 6.7.8）来编辑上传的图像。为此，我将模型更改为包括：

```
has_attached_file :photo , styles: { small: "50x50"} 
```

但是现在每次我尝试上传图片时，我都会得到

```
* Photo /var/folders/UN/UNdHgXwNEJ8MFx6qXcFcck+++TI/-Tmp-/Img120120717-55617-z57m6n.jpg is not recognized by the **'identify'** command 
```

在我的 config/environments/development.rb 目录中，我包括：

```
Paperclip.options[:image_magick_path] = "/usr/local/bin/" 
```

但尽管该错误仍然存​​在。仅供参考，我正在使用 OS 10.5.8。

请帮忙！

# git - Git未跟踪文件列表错误

> ID：11525358
> 
> 赞同：34
> 
> 时间：2012-07-17T15:01:05.447
> 
> 标签：git

不知何故，git 意识到我有一个未跟踪的文件（一个在我的存储库中已经存在很长一段时间的目录，大约 17 个月）。无论如何，我似乎无法说服 git 这不是一个未跟踪的文件。此外，我无法重新添加有问题的文件。知道如何解决这个问题吗？

例子：

```
➜ git status
# On branch master
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   rosetta_tests/profile/tests/docking/
nothing added to commit but untracked files present (use "git add" to track) 
```

我尝试添加目录并重新检查状态。

```
➜ git add rosetta_tests/profile/tests/docking/
➜ git status
# On branch master
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   rosetta_tests/profile/tests/docking/
nothing added to commit but untracked files present (use "git add" to track) 
```

只是为了确定（从我的源代码树的根目录）

```
➜ git add .
➜ git status
# On branch master
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   rosetta_tests/profile/tests/docking/
nothing added to commit but untracked files present (use "git add" to track) 
```

这里发生了什么？如何说服 git 自行修复？

**编辑**

更多细节：

- 文件不在 .gitignore 中

- 有问题的文件夹中有三个跟踪文件，所以它不是空的

- 经过更多的挖掘，似乎这样的事情可能是由于更改了跟踪文件夹的大小写引起的。不幸的是，情况并非如此（双关语！）。文件夹名称从未改变大小写。

- 对接目录的内容：

```
➜ ls -lA rosetta_tests/profile/tests/docking/.
total 16
-rw-r--r--  1 tim  staff  2209 Jul 17 10:47 command
-rw-r--r--  1 tim  staff   260 Jul 17 10:47 flags
drwxr-xr-x  3 tim  staff   102 Jul 17 10:47 input 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-17T15:05:42.070

这 。在`git add .`命令中指的是“当前目录”。因此，运行`git add .`将添加当前目录及其子目录中的所有文件。在运行之前，您应该确保您位于正确的目录中`git add`。

`git add -A`是你想要的。它会添加一切。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-06-10T19:35:45.920

我通过运行解决了这个问题

```
git clean -f 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-28T08:40:48.060

我遇到了同样的错误：没有大小写更改，没有 .ignore 问题，并且该目录确实包含我绝对想要保留的文件。添加目录、提交`git add -A`和其他补救措施没有任何效果。

我最终用“git clean”删除了目录，然后再次检查了目录中的文件。

这是我所做的：

```
rex@sidekick> git status
# On branch master
# Your branch is ahead of 'origin/master' by 10 commits.
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   app/models/xSpecific/
nothing added to commit but untracked files present (use "git add" to track) 
```

此时我制作了“xSpecific”目录的备份副本以防万一。然后我用 'git clean' 进行了空运行（-n 选项表示“空运行”，-d 使干净的删除目录）：

```
rex@sidekick> git clean -n -d
Would remove app/models/xSpecific/ 
```

经过双重和三重检查后，我继续进行清理（-f 标志表示“强制”，需要说服 Git 你是认真的。非常好的设计，如果你问我）：

```
rex@sidekick> git clean -d -f
Removing app/models/xSpecific/

rex@sidekick> git status
# On branch master
# Your branch is ahead of 'origin/master' by 10 commits.
#
# Changed but not updated:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   deleted:    app/models/xSpecific/GetAddressesLog.java
#   deleted:    app/models/xSpecific/GetProductLog.java
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

到目前为止，一切都很好。该目录不再列出，但文件当然也消失了。我本可以从我的备份中恢复它们，但这就是 Git 的用途：

```
rex@sidekick> git checkout -- app/models/xSpecific/GetAddressesLog.java
rex@sidekick> git checkout -- app/models/xSpecific/GetProductLog.java

rex@sidekick> git status
# On branch master
# Your branch is ahead of 'origin/master' by 10 commits.
#
nothing to commit (working directory clean) 
```

是时候庆祝了！实际上，克隆存储库的新副本并改用它可能会更容易，但是通过艰难的方式我学到了一些新东西:)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-01T23:20:26.937

这为我解决了问题`rm .git/fs_cache`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-29T10:02:10.843

我遇到了同样的问题，我解决了

```
git clean -f -n 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-30T17:53:51.753

我有重要的未跟踪文件，不能`git clean -f`像一些答案建议的那样运行。

> 我尝试添加目录并重新检查状态。
> 
> ```
> ➜ git add rosetta_tests/profile/tests/docking/ 
> ```

而且似乎添加整个目录不会触发文件重新检查。

因此，我尝试*专门*添加一个所谓的未跟踪文件，并且它起作用了：

```
$ git status
On branch foo
Untracked files:
  (use "git add <file>..." to include in what will be committed)

        important.txt
        foo/foo.java
        foo/bar.java
        foo/baz.java
        foo/qux.java

nothing added to commit but untracked files present (use "git add" to track)

$ git add -- foo/foo.java
fatal: pathspec 'foo/foo.java' did not match any files

$ git status
On branch foo
Untracked files:
  (use "git add <file>..." to include in what will be committed)

        important.txt

nothing added to commit but untracked files present (use "git add" to track) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-26T05:20:13.573

重新创建文件或目录

```
mkdir -p rosetta_tests/profile/tests/docking/ 
```

然后再次删除它。

```
rm -rf rosetta_tests/profile/tests/docking/ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-10T16:58:08.563

`git add`由于子目录中的文件名太长而失败时，我会弹出此错误。（在我的情况下，node_modules 中有一些东西）

在这种情况下，将 .gitignore 文件`*`添加到 node_modules 文件夹允许 git add 运行完成。

因此，请注意`git add .`（或 -A 或 --all）的命令输出，并确保它不会因错误而过早停止。一旦应用了正确的 .gitignore 并且我能够提交并推送我的更改，我的所有“未跟踪”文件和文件夹都已成功添加。

# ruby-on-rails - omn iauth-身份 auth_key

> ID：11525360
> 
> 赞同：0
> 
> 时间：2012-07-17T15:01:16.483
> 
> 标签：ruby-on-rails, omniauth

我正在尝试将omniauth-identity 集成到我的应用程序中。根据 README 文件，我们只需要编写：

```
class Identity < OmniAuth::Identity::Models::ActiveRecord
  # Add whatever you like! 
end 
```

但是我想添加唯一性验证。所以简单的方法是将此验证添加到 Identity 类：

```
validates_uniqueness_of :email, :case_sensitive => false 
```

但是当我浏览 gem 源代码时，我`auth_key=`在下面看到了这个方法`OmniAuth::Identity::Models::ActiveRecord`：

```
 def self.auth_key=(key)
      super
      validates_uniqueness_of key, :case_sensitive => false
    end 
```

而且因为我讨厌重复的代码，我想使用现有的方法而不是多写一​​行。所以我将 Identity 类更改为

```
class Identity < OmniAuth::Identity::Models::ActiveRecord
  # Add whatever you like! 
  auth_key :email
end 
```

但我仍然遇到重复的电子邮件（看起来验证不起作用）。因此我尝试了以下方法`Identity.auth_key = 'my_key'`，它给了我错误`NoMethodError: super: no superclass method`auth_key=' for #`

知道我在这里做错了什么吗？当然，我可以在 OmniAuth::Identity::Models::ActiveRecord 中将 auth_key= 方法定义更改为 auth_key，但我讨厌这样做，因为我认为我在这里遗漏了一些东西。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T19:57:13.917

您快到了...您提供`Identity`类并继承自`OmniAuth::Identity::Models::ActiveRecord`，并指定 OmniAuth Identity 应该用来定位记录的列，只需使用`auth_key`setter 方法。任何验证都应包含在您的`Identity`类中，就像它们通常与任何其他`ActiveRecord`模型一样。

这`auth_key`只是您选择在身份验证时定位记录的列的 getter/setter（虚拟属性），它本身不是列，*除非*您选择在身份模型中创建`auth_key`列。

另请注意，OmniAuth Identity 寻求的默认方法是`#email`属性（[https://github.com/intridea/omniauth-identity/blob/master/lib/omniauth/identity/model.rb#L41](https://github.com/intridea/omniauth-identity/blob/master/lib/omniauth/identity/model.rb#L41 "https://github.com/intridea/omniauth-identity/blob/master/lib/omniauth/identity/model.rb#L41")），因此`auth_key`如果您选择坚持使用该`#email`属性。

```
# app/models/identity.rb
class Identity < OmniAuth::Identity::Models::ActiveRecord
  belongs_to :user
  attr_accessible :email, :password, :password_confirmation, :user_id

  validates :email, :presence => true, :uniqueness => true, :case_sensitive => false
  validates :password, :presence => true, :confirmation => true
  validates :password_confirmation, :presence => true
end

# db/migrate/xxxxxxxxxxxxxx_create_identities.rb
class CreateIdentities < ActiveRecord::Migration
  def change
    create_table :identities, :force => true do |t|
      t.column :email, :string, :null => false
      t.column :password_digest, :string
      t.column :user_id, :integer, :null => false
    end

    change_table :identities do |t|
      t.index :email, { :unique => true }
      t.index :user_id
    end
  end
end

# config/initializers/omniauth.rb
use OmniAuth::Builder do
  provider :identity, :fields => [:email]
end 
```

如果您决定将 auth_key 列更改为其他内容，例如`#username`，您将使用`auth_key`setter，如下所示：

```
# app/models/identity.rb
class Identity < OmniAuth::Identity::Models::ActiveRecord
  auth_key 'username'
  belongs_to :user
  attr_accessible :password, :password_confirmation, :username, :user_id

  validates :password, :presence => true, :confirmation => true
  validates :password_confirmation, :presence => true
  validates :username, :presence => true, :uniqueness => true
end

# db/migrate/xxxxxxxxxxxxxx_create_identities.rb
class CreateIdentities < ActiveRecord::Migration
  def change
    create_table :identities, :force => true do |t|
      t.column :password_digest, :string
      t.column :username, :string, :null => false
      t.column :user_id, :integer, :null => false
    end

    change_table :identities do |t|
      t.index :username, { :unique => true }
      t.index :user_id
    end
  end
end

# config/initializers/omniauth.rb
use OmniAuth::Builder do
  provider :identity, :fields => [:username]
end 
```

请注意，该`auth_key`方法接受字符串参数，而不是像`attr_accessible`.

OmniAuth Identity 非常灵活，您可以利用其他几个自定义项来适应现有项目。您可以为您的身份模型设置自定义类，并且可以自定义在身份验证时找到匹配记录的方式。请参阅[https://github.com/intridea/omniauth-identity/blob/master/README.markdown](https://github.com/intridea/omniauth-identity/blob/master/README.markdown "https://github.com/intridea/omniauth-identity/blob/master/README.markdown")。

我希望这一切都会有所帮助，我知道这让我困惑了一段时间，我不得不深入研究并理解 OmniAuth Identity 源代码。

# c# - 继承与组合 - OOP 架构考虑

> ID：11525364
> 
> 赞同：1
> 
> 时间：2012-07-17T15:01:30.150
> 
> 标签：c#, oop, design-patterns, inheritance, composition

我很难找到一种干净的方式来实现我的分层。

这是我拥有的层（下层支持上层，通过继承或组合）：

```
Business Logic Layer (BLL)
Datastore Layer (DSL)
Database Layer (DBL), Web-Service Buffer (WSB) 
```

当 BLL 对象发出 get 请求 getRecords() 时，它又要求 DSL 完成它。

然后 DSL 决定天气是使用本地 DBL 还是使用 WSB（它与远程 Web 服务前端与“主”数据库通信）。

* * *

选项 1 - 组合（BLL 有一个 DSL，DSL 有一个 DBL）

* * *

我的问题是，由于 DSL 和 DBL 对象是在 BLL 中组成的，它们对包含 BLL 一无所知，那么他们应该如何进行包含 BLL 字段的特定 DB 查询？

* * *

选项 2 - 继承（BLL：DSL，DSL：DBL）

* * *

即使较低层现在可以通过公共/受保护的继承访问 BLL，但关于 DSL 和 DBL 如何准确知道要生成哪些特定查询字符串的问题仍然存在。我想 BLL 可以保留一组静态字符串，但这会产生双向依赖，我认为这是一个非常有缺陷的设计，会带来可怕的后果。

**注意：**每个 BLL 都有一个对应的表，它被序列化到/反序列化。

**注意：**我不想使用反射，并且想限制泛型的使用（除非绝对没有其他方法。我正在为我的 WSB 使用泛型，虽然我主要关心的是生成DSL 和 DBL 层中特定于 BLL 的查询字符串）。

**注意：**将会有许多不同的 BLL 对象将使用 DSL 和 DBL 层，而不仅仅是一个（否则这将是微不足道的）。

```
public class BL1 
{
  private DSL _dsLayer;

  public getRecords() 
  {
    // ...
    _dsLayer.getRecords();
    // ...
  }
}

public class DSL 
{
  private DBL _dbLayer;
  private WSB _wsBuffer;

  public getRecords() 
  {
    if(_dbLayer.getRecords() != null)
    {
      return records;
    }
    else
    {
      return _wsBuffer.getRecords();
    }
  }
}

public class DBL
{
  private string _db = "file.db3";

  public getRecords()
  {
    select ????? - how to know what fields to grab
  }
} 
```

感谢您花时间回答这个问题，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:11:42.353

您应该使用组合。我认为继承没有意义，因为这些是完全不同类型的实体，实际上一个不能从另一个继承。他们将继承哪些领域？谁从谁那里继承？

BLL 需要传递“字段”列表才能到达 DSL。要么作为 DSL 方法的参数，要么以其他方式。DSL 方法只是接收一些字段列表作为参数并使用它们。我认为这是一个可行的解决方案。

此外，您应该在每一层创建接口并针对它们进行编程，而不是使用类型本身。例如，在您编写的示例代码中，将 DBL 和 WSB 更改为 IDBL 和 IWSB。这将帮助您更好地测试并允许代码中的松散耦合。

```
public class DSL 
{
  private IDBL _dbLayer;
  private IWSB _wsBuffer;
....

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:14:50.070

通常，当您具有“Is-A”关系时，应使用继承。既然你不能说 BLL 'Is-A' DSL 或 DSL 'Is-A' DBL，那么我会考虑组合而不是继承。这具有使测试每个逻辑层更容易的副作用，因为您可以存根或模拟每个依赖项。

通常，在任何公开的 API 中，服务器端（因此 DSL 在 BLL -> DSL 方面）需要公开对象才能完成工作。您指出 DSL 不应该知道 BLL 对象是正确的。因此，挑战在于为 DSL 编写一个干净的 API，该 API 暴露给 BLL 以查询数据。

我建议查看[DDD中的](http://en.wikipedia.org/wiki/Domain-driven_design)[Repository](http://lostechies.com/jimmybogard/2009/09/03/ddd-repository-implementation-patterns/)和[Specification](http://devlicio.us/blogs/casey/archive/2009/03/02/ddd-the-specification-pattern.aspx)模式。这些有助于解决您提出的一些问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T15:47:38.537

作品。因为dtryon 和**desigeek**所说的**一切**，也 因为在您的情况下，继承看起来不自然 + 它将使您的所有 层紧密耦合，并且几乎不会限制对源代码的任何修改。

 **我相信看一下[prefer-composition-over-inheritance](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance) SO-topic可能会有所帮助。**

# terminal - SSVNC 和终端命令

> ID：11525366
> 
> 赞同：1
> 
> 时间：2012-07-17T15:01:34.277
> 
> 标签：terminal

我想从终端在 Mac OSX 上启动 SSVNC。我希望它连接到 UVNC 中继器服务器并匹配配对 ID 以允许 VNC 会话。我可以用 GUI 做到这一点，它工作正常。但我想从脚本编译它并从那里启动它。

设置：VNC 主机：显示 = :1

VNC 密码 =

代理/网关 = 中继器://server1.domain.com:3467+ID:12345

我遇到的问题是告诉它不要使用 SSL 或 Fetch 证书。它总是试图获取证书和错误。在 GUI 中将此设置为 none 就像一个魅力。

希望有人能指出我正确的方向。

阿兹

# .net - VB.net SQL 命令尝试整理查询

> ID：11525367
> 
> 赞同：0
> 
> 时间：2012-07-17T15:01:34.343
> 
> 标签：.net, sql, collate

我正在尝试将 COLLATE 函数添加到 .net SqlCommand。但我没有得到任何结果。我已经在 Mgmt Studio 中测试了它的逻辑，在它工作的地方，应该有这个 SELECT stmt 返回的数据。除排序规则过滤器外，该查询均有效。

```
 Dim sql1 As String = "SELECT lang_String FROM " & tableName & " WHERE short_Text COLLATE Latin1_General_CS_AS = @englishText " 
```

该查询在添加以下语法之前有效...

```
COLLATE Latin1_General_CS_AS 
```

数据库设置为不区分大小写，需要保持这种状态。我只是希望能够在某些查询期间应用 COLLATION。可以在 MgmtStudio 中完成。

关于如何让 .net 操作正确执行的任何想法？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:38:07.090

您可能会遇到排序规则错误。尝试将 COLLATE 放在两侧：

```
 Dim sql1 As String = "SELECT lang_String FROM " & tableName & " WHERE short_Text COLLATE Latin1_General_CS_AS = @englishText COLLATE Latin1_General_CS_AS" 
```

否则语法看起来没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T18:15:06.190

我不得不把它全部塞进一个存储过程中。现在工作正常，但我仍然认为这是 MS 需要研究的错误。

# sql-server-2000 - 在 sql server 2000 中分配给变量时的日期格式问题

> ID：11525370
> 
> 赞同：0
> 
> 时间：2012-07-17T15:01:44.097
> 
> 标签：sql-server-2000

由于服务器上的日期格式，我的脚本失败。

```
declare @lastDay as datetime
declare @endDay as datetime

set @lastDay = '2012-07-12 18:00:00.000'
set @endDay = '2012-07-16 18:00:00.000'

Select getdate(), @lastDay, @endDay 
```

在上面的代码中，我分配的数据是 (yyyy-mm-dd hh:mi:ss.mmm) 格式。但是 sqlserver 将其视为 (yyyy-dd-mm hh:mi:ss.mmm)。

但是当使用 getdate() 函数时，sql 以 (yyyy-mm-dd hh:mi:ss.mmm) 格式返回。仅当我分配值时才会出现问题。

相同的代码在 pc 上运行良好，但在服务器上失败。

我在服务器上获得上述代码的结果是

```
2012-07-17 15:34:30.627    2012-12-07 18:00:00.000      NULL 
```

并带有错误消息

```
The conversion of a char data type to a datetime data type resulted in an out-of-range datetime value. 
```

我知道我可以使用转换功能，但是我现在需要在服务器上安排数百个 dts 作业，这不是我查看每个包的快速解决方案。

我想我需要更改服务器上的一些设置以默认考虑 (yyyy-mm-dd hh:mi:ss.mmm)。如果有人知道解决此问题的解决方案，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:04:27.153

当语言是法语时，YYYY-MM-DD 不起作用。

你可以说：

```
SET @lastDay = CONVERT(DATETIME, '2012-07-12 18:00', 120); 
```

但是使用更安全的格式要安全得多，并且无需转换：

```
SET @lastDay = '20120712 18:00:00.000'; 
```

或者，如果您真的想要破折号，请添加 T 分隔符，以防止覆盖区域设置：

```
SET @lastDay = '2012-07-12T18:00:00.000'; 
```

修复格式的好处是，假设您通过更改服务器的区域设置来“修复”它。该“修复”仅在其他人更改设置之前有效，因为它破坏了其他内容，或者直到您将代码移动到另一台服务器。以安全格式传递可以绕过所有这些问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-17T15:35:48.350

我得到了解决方案，它在用户配置文件中。我将用户的默认语言从“英式英语”更改为“英语”，一切正常。

也感谢您的快速回复。我从您的回复中获得了一些额外的知识。

谢谢。

# opengl - 片段着色器中的 glLight（屏幕位置）

> ID：11525373
> 
> 赞同：1
> 
> 时间：2012-07-17T15:01:52.317
> 
> 标签：opengl, glsl, shader

我想创建一个片段着色器，在 glLightSource 的位置呈现一个白色圆圈。但不知何故，我很难弄清楚如何在屏幕坐标中转换 glLight 位置......

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:57:39.603

`gl_LightSource.position`您必须将与相乘`gl_ModelViewProjectionMatrix`才能获得屏幕坐标（对于 OpenGL 2.x - 对于 OGL 3.x+，您当然必须为矩阵使用统一）。但是，问题是您仍然必须在全屏四边形中找到正确的像素 - 也就是说，您必须为每个片段计算此像素，然后测试当前片段位置是否与您的灯光的屏幕空间位置相同。

因此，我强烈建议使用带有光坐标的顶点并按照 Christian Rau 的建议进行绘制。

# eclipse - 导入 Eclipse（m2eclipse、eGit）时出现“无效的远程：来源”错误

> ID：11525374
> 
> 赞同：9
> 
> 时间：2012-07-17T15:02:03.970
> 
> 标签：eclipse, git, m2eclipse, egit

在 Eclipse 中，当我尝试从存储库导入项目时（文件 > 导入 > Maven > 从 SCM 签出 Maven 项目）我选择“git”（已安装 eGit），填写 ssh://... 地址（所有密钥和访问权限已设置），最后输入 rsa 的密码和...

```
Invalid remote: origin: Invalid remote: origin 
```

据此：http: [//youtrack.jetbrains.com/issue/IDEA-77239](http://youtrack.jetbrains.com/issue/IDEA-77239)在地址末尾写`.git`应该可以解决问题，但实际上并没有。

我完全不知道如何进一步解决它。有任何想法吗？

**编辑：**我使用 Windows。这似乎是要添加的重要信息。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T14:21:19.357

当存在底层 SSH 身份验证问题时，可能会发生此错误，例如 git 远程服务器上的公钥错误，或者 git 远程服务器更改了其 SSH 主机密钥。

Eclipse 将使用您在 Preferences -> General -> Network Connections -> SSH2 中指定的 .ssh 目录进行 ssh 配置。将其设置为 "{您的默认用户目录}.ssh\" 。

要解决问题，首先您需要确定用于 Git 的 ssh 客户端。这存储在 GIT_SSH 环境变量中。右键单击“计算机”（Windows 7），然后选择属性 -> 高级系统设置 -> 环境变量。

如果 GIT_SSH 包含 plink.exe 的路径，则您正在使用 PuTTY 堆栈。

*   要获取您的公钥，请打开 PuTTYgen.exe，然后加载您的私钥文件 (*.ppk)。列出的公钥应该与 git 远程服务器上的公钥匹配。
*   要获取新的主机密钥，请打开一个新的 PuTTY.exe 会话，然后连接到 git@{git repo host}。
*   单击确定并说是以存储新密钥。
*   收到登录提示后，您可以关闭 PuTTY 窗口。新密钥已存储。
*   重新启动 Eclipse。

如果 GIT_SSH 在“Git for Windows”树中包含“ssh.exe”的路径，则说明您正在使用 Git for Windows 的 OpenSSH。

*   将 %HOME% 设置为您的默认用户目录（如 Eclipse 中所列；见上文）。
*   将 %HOMEDRIVE% 设置为默认用户目录的驱动器号。
*   将 %HOMEPATH% 设置为 %HOMEDRIVE% 上的默认用户目录的路径
*   要获取您的公钥，请在文本编辑器中打开文件 %HOMEDRIVE%%HOMEPATH%/.ssh/id_rsa.pub（或 id_dsa.pub）。列出的公钥应该与 git 远程服务器上的公钥匹配。
*   要获取新的主机密钥，请运行：cmd.exe
*   运行 Git Bash
*   Ctrl-C
*   在 bash 提示符下，运行 /c/path/to/git/for/windows/bin/ssh.exe git@{git remote host}。
*   键入 yes 以接受新密钥。
*   出现登录提示后，键入： ctrl-c
*   关闭 cmd.exe 窗口
*   重新启动 Eclipse。

最后，如果您的外部 ssh 客户端仍有问题，请删除 GIT_SSH 环境变量并将 HOME 环境变量设置为 Windows 上的默认用户目录。如果没有 GIT_SSH 变量，EGit 将使用其内部 ssh 客户端 (java)。它将使用您在上面指定的 .ssh 目录作为其 SSH 配置目录。

注意：如果你有 Git for Windows，你可以使用它的工具在你的 .ssh 目录中创建一个 SSH 密钥对：

*   将 %HOME% 设置为您的默认用户目录（如 Eclipse 中所列）。
*   将 %HOMEDRIVE% 设置为默认用户目录的驱动器号。
*   将 %HOMEPATH% 设置为 %HOMEDRIVE% 上的默认用户目录的路径
*   运行 Git Bash
*   Ctrl-C
*   运行：ssh-keygen.exe -t rsa -b 2048
*   保存为默认文件名
*   选择一个密码或不保存密码。如果您使用密码进行保存，Eclipse 会在您每次从 git 远程服务器推送或拉取时提示您输入密码。
*   关闭 Git Bash

您还可以使用 Eclipse 的 SSH2 Preference 窗格中的 GUI 来管理主机和密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T05:38:27.577

使用 Eclipse / Indigo，带有 Maven 插件： -Check
out Maven Projects from SCM
-假设安装了 git SCM 插件，从 SCM URL 中选择“git”：弹出
-enter，例如 https://@github.com //.git
有 @ 和 ".git" 很重要
- 假设项目是私有的，系统会提示您输入密码
这应该足以继续前进。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-21T05:48:35.493

可能是您的 git 服务器已移动？

[![在此处输入图像描述](../Images/4e607762feb72c4e275bc56f54027966.png)](https://i.stack.imgur.com/iMPVC.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-17T16:30:53.687

检查您的 .git/config 这个错误可能是您在原始网址末尾缺少“.git”

[远程“来源”] url = [https://some.domain.com/repo/name](https://some.domain.com/repo/name)

应该

[远程“来源”] url = [https://some.domain.com/repo/name.git](https://some.domain.com/repo/name.git)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-25T08:16:36.043

由于以下原因，可能会发生此错误 -

1.  检查存储库 url，最后应该有一个 '.git' 附加。
2.  如果您的网络配置已更改，请确保您具有正确的代理配置，并且在安全的 git 存储库的情况下，请确保您提供正确的凭据。（当我的凭据被更改时，我得到了这个错误，而且当我配置了不正确的代理时。）

PS - 要检查网络设置，请转到 Windows -> 首选项 -> 常规 -> 网络连接。此外，如果您不确定网络设置或代理配置，您可以尝试在直接和手动网络设置之间切换。

# c# - Window中断串口后台worker，导致读超时

> ID：11525379
> 
> 赞同：0
> 
> 时间：2012-07-17T15:02:24.033
> 
> 标签：c#, wpf, multithreading, progress-bar, backgroundworker

我正在与设备交互，并使用 c# 从设备发送和接收大约 2000 个字节。我发现如果我点击我的连接按钮并让它运行，该过程完成 80% 的时间，20% 的时间发生读取超时。这本身就是一个问题。

此外，如果我在读取数据时完全移动窗口，则会发生读取超时。我认为这可能是一个优先级问题，所以我尝试弄乱后台工作线程和接口线程的优先级，但没有运气。

以前有人遇到过这种情况吗？建议表示赞赏。以下是相关的代码，如果您认为需要更多代码，请告诉我，我也会发布。提前致谢。

从哪里调用函数：

```
 private void connectButton_Click(object sender, RoutedEventArgs e) //Connect button clicked
    {
        if (!Global.isConnected)
        {
            agentradioread.connect((string)portsOpen.SelectedValue, this);
            form.deviceConnecting(this);
        }
        else
        {
            agentradioread.disconnect();
            form.deviceDisconnect(this);
        }
    }

    private void loadSettings_Click(object sender, RoutedEventArgs e) //Loads settings
    {
        if (Global.isConnected)
        {
            agentradioread.readValues(this);
        }
    }

    private void sendSettings_Click(object sender, RoutedEventArgs e) //Sends settings
    {
        if (Global.isConnected)
        {
            agentradioread.readTime();
            string minutes = (Create.sysval[10].ToString().Length == 1) ? "0" + Create.sysval[10].ToString() : Create.sysval[10].ToString();
            string date = Create.sysval[11].ToString() + "/" + Create.sysval[12].ToString() + "/20" + Create.sysval[13].ToString();
            string time = Create.sysval[9].ToString() + ":" + minutes;
            MessageBoxResult result = MessageBox.Show("The current device date and time is: " + date + " " + time + "\r\nIs this time correct?", "Date & Time Verification", MessageBoxButton.YesNo, MessageBoxImage.Question);

            if (result == MessageBoxResult.Yes) //Time is correct
            {
                Create.sysval[9] = 255;
            }
            else //Time is incorrect
            {
                dateTimeChange dateTime = new dateTimeChange();
                dateTime.ShowDialog();
            }

            agentradioread.sendValues(this);
        }
    } 
```

调用的函数：

```
public void connect(string selectedPort, agentRadio agentR) //Connects device and reads values
{
        agentSerial = new SerialPort(selectedPort, 9600, Parity.None, 8, StopBits.One);

        connectWorker = new BackgroundWorker();
        connectWorker.WorkerReportsProgress = true;
        connectWorker.DoWork += new DoWorkEventHandler(connectWorker_DoWork);
        connectWorker.ProgressChanged += new ProgressChangedEventHandler(connectWorker_ProgressChanged);

        connectWorker.RunWorkerAsync(agentR);
    }

    public void readTime() //Reads time into sysval locations
    {
        agentSerial.DiscardInBuffer();
        agentSerial.DiscardOutBuffer();
        agentSerial.Write(Global.TIME, 0, Global.TIME.Length); //begin send values
        loadTime();
    }

    public void readValues(agentRadio agentR) //Read values
    {
        readWorker = new BackgroundWorker();
        readWorker.WorkerReportsProgress = true;
        readWorker.DoWork += new DoWorkEventHandler(readWorker_DoWork);
        readWorker.ProgressChanged += new ProgressChangedEventHandler(readWorker_ProgressChanged);

        agentSerial.DiscardInBuffer();
        agentSerial.DiscardOutBuffer();
        readWorker.RunWorkerAsync(agentR);
    }

    public void sendValues(agentRadio agentR) //Send values
    {
        sendWorker = new BackgroundWorker();
        sendWorker.WorkerReportsProgress = true;
        sendWorker.DoWork += new DoWorkEventHandler(sendWorker_DoWork);
        sendWorker.ProgressChanged += new ProgressChangedEventHandler(sendWorker_ProgressChanged);

        agentSerial.DiscardInBuffer();
        agentSerial.DiscardOutBuffer();
        sendWorker.RunWorkerAsync(agentR);
    }

    public void restoreDevice(agentRadio agentR) //Restore device to defaults
    {
        agentSerial.DiscardInBuffer();
        agentSerial.DiscardOutBuffer();
        agentSerial.Write(Global.RESTORE, 0, Global.RESTORE.Length); //device restore command
        MessageBox.Show(agentSerial.ReadByte().ToString());
        try
        {
            Global.restoring = true;
            readValues(agentR);
        }
        catch
        {
            MessageBox.Show("Your device was restored, but a read time out occured. You need to go to the connect tab and reconnect to the device, and your settings will update.", "Device Restore Notice", MessageBoxButton.OK, MessageBoxImage.Information);
        }
    }

    public void disconnect() //Disconnects device
    {
        if (Global.isConnected == true)
        {
            try
            {
                agentSerial.DiscardInBuffer();
                agentSerial.DiscardOutBuffer();
                agentSerial.Write(Global.EXIT_PROGRAM, 0, Global.EXIT_PROGRAM.Length);
            }
            catch
            {
                //leave option to reConnect
            }
            agentSerial.Close();
            Global.isConnected = false;
        }
    }

    /*Methods that cannot be called from elsewhere in the application*/

    private void connectWorker_ProgressChanged(object sender, ProgressChangedEventArgs e) //Updates progressbar while device is connecting
    {
        ProgressBar progressBar = e.UserState as ProgressBar;

        App.Current.Dispatcher.Invoke(
            System.Windows.Threading.DispatcherPriority.Send,
                new Action(
                    delegate()
                    { progressBar.Value = e.ProgressPercentage; }));
    }

    private void connectWorker_DoWork(object sender, DoWorkEventArgs e) //Connects and read values
    {
        startRead((agentRadio)e.Argument);
    }

    private void readWorker_ProgressChanged(object sender, ProgressChangedEventArgs e) //Alerts user when values are loaded
    {
        ProgressBar progressBar = e.UserState as ProgressBar;

        App.Current.Dispatcher.Invoke(
            System.Windows.Threading.DispatcherPriority.Send,
                new Action(
                    delegate()
                    { progressBar.Value = e.ProgressPercentage; }));
    }

    private void readWorker_DoWork(object sender, DoWorkEventArgs e) //Reads values
    {
        agentRadio agentR = (agentRadio)e.Argument;

        App.Current.Dispatcher.Invoke(
            System.Windows.Threading.DispatcherPriority.Send,
                new Action(
                    delegate()
                    { form.deviceReading(agentR); }));

        agentSerial.Write(Global.READ_VALUES, 0, Global.READ_VALUES.Length); //begin read values

        byte key = (byte)agentSerial.ReadByte();

        if (Global.START_COMMAND == key) //Verify continue key
        {
            object progressBarObject = new object();
            progressBarObject = agentR.connectProgress;

            for (int i = 1; i < 2247; i++) //Loop through values, calling read function and updating progress bar
            {
                int progress = (int)(((float)i / 2246.0) * 100);
                readWorker.ReportProgress(progress, progressBarObject);

                try
                {
                    readData(i, agentR);
                    agentSerial.Write(Global.GO_AHEAD, 0, Global.GO_AHEAD.Length);

                    agentSerial.DiscardInBuffer();
                    agentSerial.DiscardOutBuffer();
                }
                catch
                {
                    break;
                }
            }
        }
        else //Key failed and displays error
        {
            App.Current.Dispatcher.Invoke(
                System.Windows.Threading.DispatcherPriority.Send,
                    new Action(
                        delegate()
                        { form.deviceDisconnect(agentR); }));
            MessageBox.Show("Connection Failed, Invalid Key");
        }
    }

    private void sendWorker_ProgressChanged(object sender, ProgressChangedEventArgs e) //Alerts user when values are sent
    {
        ProgressBar progressBar = e.UserState as ProgressBar;

        App.Current.Dispatcher.Invoke(
            System.Windows.Threading.DispatcherPriority.Send,
                new Action(
                    delegate()
                    { progressBar.Value = e.ProgressPercentage; }));
    }

    private void sendWorker_DoWork(object sender, DoWorkEventArgs e) //Sends values
    {
        agentRadio agentR = (agentRadio)e.Argument;

        App.Current.Dispatcher.Invoke(
            System.Windows.Threading.DispatcherPriority.Send,
                new Action(
                    delegate()
                    { form.deviceSending(agentR); }));

        agentSerial.Write(Global.SEND_VALUES, 0, Global.SEND_VALUES.Length); //begin send values

        byte key = (byte)agentSerial.ReadByte();

        if (Global.START_COMMAND == key) //Verify continue key
        {
            object progressBarObject = new object();
            progressBarObject = agentR.connectProgress;

            for (int i = 1; i < 659; i++) //Loops and sends data to device
            {
                int progress = (int)(((float)i / 658.0) * 100);
                sendWorker.ReportProgress(progress, progressBarObject);

                try
                {
                    byte result = sendData(i, agentR);

                    if (result != Global.GO_AHEAD[0])
                    {
                        MessageBox.Show("Fatal Error");
                        break;
                    }

                    agentSerial.DiscardInBuffer();
                    agentSerial.DiscardOutBuffer();
                }
                catch
                {
                    break;
                }
            }
        }
        else //Key failed and displays error
        {
            App.Current.Dispatcher.Invoke(
                System.Windows.Threading.DispatcherPriority.Send,
                    new Action(
                        delegate()
                        { form.deviceDisconnect(agentR); }));
            MessageBox.Show("Connection Failed, Invalid Key");
        }
    }

    private void loadTime() //Loads device time into sysval locations
    {
        byte key = (byte)agentSerial.ReadByte();

        if (Global.START_COMMAND == key) //Verify continue key
        {
            for (int i = 0; i < 5; i++)
            {
                try
                {
                    byte result = (byte)agentSerial.ReadByte();
                    Create.sysval[9 + i] = result;
                }
                catch
                {
                    Create.sysval[9 + i] = 0;
                }
            }
            agentSerial.ReadByte();
        }

        agentSerial.DiscardInBuffer();
        agentSerial.DiscardOutBuffer();
    }

    private string sendInitial() //Sends a ? and returns 7 bytes of data
    {
        string handshake = "";
        agentSerial.Write("?");

        for (int i = 0; i < 7; i++)
        {
            try
            {
                handshake += agentSerial.ReadByte().ToString();
            }
            catch
            {
                break;
            }
        }

        return handshake;
    }

    private void startRead(agentRadio agentR) //Initializes data send and receive
    {
        System.Threading.Thread.CurrentThread.Priority = System.Threading.ThreadPriority.Highest;
        App.Current.Dispatcher.Invoke(
            System.Windows.Threading.DispatcherPriority.Send,
                new Action(
                    delegate()
                    { agentR.connectProgress.IsIndeterminate = true; }));

        agentSerial.ReadTimeout = 5000;
        agentSerial.Open();

        agentSerial.DiscardInBuffer();
        agentSerial.DiscardOutBuffer();

        string handshake = sendInitial();

        if (handshake == Global.AGENT_RADIO) //Result matches agent radio version
        {
            agentSerial.Write(Global.READ_VALUES, 0, Global.READ_VALUES.Length); //begin read values

            byte key = (byte)agentSerial.ReadByte();

            if (Global.START_COMMAND == key) //Verify continue key
            {
                App.Current.Dispatcher.Invoke(
                System.Windows.Threading.DispatcherPriority.Send,
                    new Action(
                        delegate()
                        { agentR.connectProgress.IsIndeterminate = false; }));

                object progressBarObject = new object();
                progressBarObject = agentR.connectProgress;

                for (int i = 1; i < 2247; i++) //Loop through values, calling read function and updating progress bar
                {
                    int progress = (int)(((float)i / 2246.0) * 100);
                    connectWorker.ReportProgress(progress, progressBarObject);

                    try
                    {
                        readData(i, agentR);
                        agentSerial.Write(Global.GO_AHEAD, 0, Global.GO_AHEAD.Length);

                        agentSerial.DiscardInBuffer();
                        agentSerial.DiscardOutBuffer();
                    }
                    catch
                    {
                        break;
                    }
                }
            }
            else //Key failed and displays error
            {
                agentSerial.Close();
                App.Current.Dispatcher.Invoke(
                System.Windows.Threading.DispatcherPriority.Send,
                    new Action(
                        delegate()
                        { form.deviceDisconnect(agentR); }));
                MessageBox.Show("Connection Failed, Invalid Key");
            }
        }
        else //Result did not match an agent radio version
        {
            agentSerial.Close(); //Closes port

            if (attempt < 3) //Attempt to connect to device 5 times
            {
                attempt++;
                startRead(agentR);
            }
            else //Displays error to user if connection failed
            {
                App.Current.Dispatcher.Invoke(
                System.Windows.Threading.DispatcherPriority.Send,
                    new Action(
                        delegate()
                        { form.deviceDisconnect(agentR); }));
                MessageBox.Show("Connection Failed, Not Agent Radio Version");
            }
        }
    }

    private void readData(int iteration, agentRadio agentR) //Reads data for current iteration
    {
        byte value = 0; //Current value

        try
        {
            value = (byte)agentSerial.ReadByte(); //Reads byte
        }
        catch
        {
            agentSerial.Close();
            App.Current.Dispatcher.Invoke(
                System.Windows.Threading.DispatcherPriority.Send,
                    new Action(
                        delegate()
                        { form.deviceDisconnect(agentR); }));
            MessageBox.Show("Connection Failed, Read Timeout"); //Displays message if read timeout occured
        }

        if (iteration > 0 && iteration < 385) //read schedule
        {
            double pos = (iteration - 1) / 48;

            int i = (int)Math.Floor(pos);
            int j = (iteration - 1) - (i * 48);

            Create.schedule[i, j] = value;
        }

        if (iteration > 384 && iteration < 1285) //read alarm history
        {
            double pos = (iteration - 385) / 9;

            int i = (int)Math.Floor(pos);
            int j = (iteration - 385) - (i * 9);

            Create.alarms[i, j] = value;
        }

        if (iteration > 1284 && iteration < 1345) //read error log
        {
            double pos = (iteration - 1285) / 6;

            int i = (int)Math.Floor(pos);
            int j = (iteration - 1285) - (i * 6);

            Create.errors[i, j] = value;
        }

        if (iteration > 1344 && iteration < 1945) //read voltage history
        {
            double pos = (iteration - 1345) / 6;

            int i = (int)Math.Floor(pos);
            int j = (iteration - 1345) - (i * 6);

            Create.voltage[i, j] = value;
        }

        if (iteration > 1944 && iteration < 1973) //read holidays
        {
            Create.holidays[iteration - 1945] = value;
        }

        if (iteration > 1972 && iteration < 2168) //read message sequences
        {
            double pos = (iteration - 1973) / 15;

            int i = (int)Math.Floor(pos);
            int j = (iteration - 1973) - (i * 15);

            Create.messages[i, j] = value;
        }

        if (iteration > 2167 && iteration < 2196) //read message info
        {
            Create.recordings[iteration - 2168] = value;
        }

        if (iteration > 2195 && iteration < 2246) //read sysval
        {
            Create.sysval[iteration - 2196] = value;
        }

        if (iteration == 2246 && value == Global.FINISH_COMMAND)
        {
            if (Global.restoring)
            {
                App.Current.Dispatcher.Invoke(
                System.Windows.Threading.DispatcherPriority.Send,
                    new Action(
                        delegate()
                        { form.deviceConnect(agentR); }));
                MessageBox.Show("Your device has been restored, and all settings from the device have been received.", "Device Restore Succesful", MessageBoxButton.OK, MessageBoxImage.Information);
            }
            else
            {
                App.Current.Dispatcher.Invoke(
                System.Windows.Threading.DispatcherPriority.Send,
                    new Action(
                        delegate()
                        { form.deviceConnect(agentR); }));
                Global.isConnected = true;
                MessageBox.Show("Your device is connected, and all settings from the device have been received.", "Data Transfer Succesful", MessageBoxButton.OK, MessageBoxImage.Information);
            }
        }
    }

    private byte sendData(int iteration, agentRadio agentR) //Sends data for current iteration
    {
        byte value = 0; //For return later

        if (iteration > 0 && iteration < 51) //sysval
        {
            byte[] toWrite = new byte[1];
            toWrite[0] = Create.sysval[iteration - 1];
            agentSerial.Write(toWrite, 0, 1);

            value = (byte)agentSerial.ReadByte();
        }
        if (iteration > 50 && iteration < 79) //holiday
        {
            byte[] toWrite = new byte[1];
            toWrite[0] = Create.holidays[iteration - 51];
            agentSerial.Write(toWrite, 0, 1);

            value = (byte)agentSerial.ReadByte();
        }
        if (iteration > 78 && iteration < 463) //schedule
        {
            double pos = (iteration - 79) / 48;

            int i = (int)Math.Floor(pos);
            int j = (iteration - 79) - (i * 48);

            byte[] toWrite = new byte[1];
            toWrite[0] = Create.schedule[i, j];
            agentSerial.Write(toWrite, 0, 1);

            value = (byte)agentSerial.ReadByte();
        }
        if (iteration > 462 && iteration < 658) //message sequence
        {
            double pos = (iteration - 463) / 15;

            int i = (int)Math.Floor(pos);
            int j = (iteration - 463) - (i * 15);

            byte[] toWrite = new byte[1];
            toWrite[0] = Create.messages[i, j];
            agentSerial.Write(toWrite, 0, 1);

            value = (byte)agentSerial.ReadByte();
        }

        if (iteration == 658 && ((byte)agentSerial.ReadByte() == Global.FINISH_COMMAND)) //Last iteration should get finish command
        {
            App.Current.Dispatcher.Invoke(
                System.Windows.Threading.DispatcherPriority.Send,
                    new Action(
                        delegate()
                        { form.deviceConnect(agentR); }));
            MessageBox.Show("Your settings have been transfered succesfully to the device.", "Successful Transfer", MessageBoxButton.OK, MessageBoxImage.Information);

            value = 17; //Simulates GO_AHEAD character for last iteration of loop
        }

        return value; //Return character off port, should be GO_AHEAD
    }
} 
```

表格类：

```
public string[] populateAvailablePorts() //Returns string array of open ports
    {
        String[] portsAvailable = SerialPort.GetPortNames();
        return portsAvailable;
    }

    public void deviceConnect(agentRadio agentR) //Adjusts display for when device is disconnected
    {
        agentR.portsOpen.IsEnabled = false;
        agentR.connectButton.Content = "Disconnect";
        agentR.connectButton.IsEnabled = true;
        agentR.connectProgress.Value = 100;
        agentR.loadSettingsConnect.Content = "Load Settings";
        agentR.sendSettingsConnect.Content = "Send Settings";
        agentR.loadSettingsConnect.IsEnabled = true;
        agentR.sendSettingsConnect.IsEnabled = true;
        agentR.DeviceRestore.IsEnabled = true;

        agentR.VoltageStack.Children.Clear();
        agentR.ErrorStack.Children.Clear();
        agentR.Events.Children.Clear();

        agentR.DeviceRestore.IsEnabled = true;

        display.setDisplay(agentR);
    }

    public void deviceConnecting(agentRadio agentR) //Adjusts display for when device is disconnected
    {
        agentR.portsOpen.IsEnabled = false;
        agentR.connectButton.Content = "Connecting...";
        agentR.connectButton.IsEnabled = false;
        agentR.loadSettingsConnect.IsEnabled = false;
        agentR.sendSettingsConnect.IsEnabled = false;
        agentR.DeviceRestore.IsEnabled = false;
    }

    public void deviceReading(agentRadio agentR) //Adjusts display for when device is disconnected
    {
        agentR.connectButton.IsEnabled = false;
        agentR.loadSettingsConnect.Content = "Reading Data...";
        agentR.loadSettingsConnect.IsEnabled = false;
        agentR.sendSettingsConnect.IsEnabled = false;
        agentR.DeviceRestore.IsEnabled = false;
    }

    public void deviceSending(agentRadio agentR) //Adjusts display for when device is disconnected
    {
        agentR.connectButton.IsEnabled = false;
        agentR.sendSettingsConnect.Content = "Sending Data...";
        agentR.loadSettingsConnect.IsEnabled = false;
        agentR.sendSettingsConnect.IsEnabled = false;
        agentR.DeviceRestore.IsEnabled = false;
    }

    public void deviceDisconnect(agentRadio agentR) //Adjusts display for when device is diconnected
    {
        agentR.portsOpen.IsEnabled = true;
        agentR.connectButton.IsEnabled = true;
        agentR.connectButton.Content = "Connect";
        agentR.loadSettingsConnect.Content = "Load Settings";
        agentR.sendSettingsConnect.Content = "Send Settings";
        agentR.connectProgress.Value = 0;
        agentR.connectProgress.IsIndeterminate = false;
        agentR.loadSettingsConnect.IsEnabled = false;
        agentR.sendSettingsConnect.IsEnabled = false;

        agentR.DeviceRestore.IsEnabled = false;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:51:29.923

不要在 DoWork 处理程序中使用 ProgressBar 对象。ProgressChanged 处理程序 (readWorker_ProgressChanged) 应该获得它自己报告进度所需的一切。

另外，你为什么要发送 IsIndeterminate 的设置？

还。ProgressChanged 处理程序将始终在 UI 线程上调用（除非您自己直接调用它，否则无需在 readWorker_ProgressChanged 中调度任何内容。

我还会避免手动将 deviceReading 和 deviceDisconnect 之类的内容发送回表单。这就是进度事件的用途。

我会避免这种情况的原因是因为您正在将这些操作发送回 UI 线程——这意味着您的后台线程被阻塞，直到 UI 可以调用这些操作。如果 UI 忙于重绘屏幕或处理菜单选择，则它无法处理此操作。这会暂停您的后台工作，直到 UI 线程可以处理它，从而使串行通信超时。

# datetime - 为什么 Coldfusion DateTime 返回奇怪的值？

> ID：11525383
> 
> 赞同：4
> 
> 时间：2012-07-17T15:02:34.370
> 
> 标签：datetime, coldfusion

我正在尝试使用 Coldfusion DateFormat 函数。有人可以告诉我，为什么要这样做：

```
 #DateFormat( now(), "YYYY-MM-DD HH:MM:SS")# 
```

返回这个：

```
 2012-07-17 16:07:666 
```

为什么是 666 毫秒？什么鬼东西？？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T15:04:14.713

DateFormat 不格式化时间。使用 TimeFormat 表示时间。

**编辑**：

将此代码用于日期时间输出。

```
#dateFormat(now(),'YYYY-MM-DD')# #timeFormat(now(), 'HH:MM:SS')# 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T01:47:20.030

我更喜欢使用日期掩码区分大小写的 Java SimpleDateFormat。

```
<cfscript>
createObject('java','java.text.SimpleDateFormat').init('yyyy-MM-dd HH:mm:ss.SSS').format(now());
</cfscript> 
```

[http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

例如。`2010-07-19 11:46:12.029`

# c# - 通过Windows窗体C#中的按钮单击事件撤消文本插入

> ID：11525385
> 
> 赞同：0
> 
> 时间：2012-07-17T15:02:37.057
> 
> 标签：c#, winforms

我正在用 C# 开发一个小型 Windows 窗体应用程序。我有很多按钮和一个组合框，点击后可以在富文本框中的当前光标位置添加某些文本。有没有办法撤消这个文本插入？我已经尝试过richTextBox.Undo() 方法，但它只有在添加到富文本框中的最新文本是通过键盘时才有效。但如果是通过按钮或组合框，则什么也不会发生，而且光标也会消失。这是我在单击按钮时添加文本的方法，我希望在单击撤消按钮或 CTRL+Z 时撤消它

```
 private void mybuttonclick(object sender, EventArgs e) 
    {
        // ---------- Method for inserting tags on clicking the POS Tags buttons ---------- //

        Button btn = (Button)sender; // receiving information about which button was clicked.
        string strInsert = "<" + btn.Text + ">" + " "; // inseting '<>' and an extra space at the end of the tag

        // inserting the tag at the current cursor position.

        richTextBox1.Focus();
        int i = richTextBox1.SelectionStart;
        richTextBox1.Text = richTextBox1.Text.Insert(richTextBox1.SelectionStart, strInsert);
        richTextBox1.SelectionStart = i + strInsert.Length;

        // moving the cursor to the next word to be tagged.

        richTextBox1.Focus();
        SendKeys.SendWait("^{LEFT}");
    } 
```

需要帮助。

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:11:45.427

The Code Project 上有几个“[撤消管理器](https://www.google.com/search?q=site:codeproject.com%20undo%20manager)”可用，例如[这里](http://www.codeproject.com/Articles/10947/A-simple-framework-for-adding-undo-redo-support)有一个带有文本框的示例：

![在此处输入图像描述](../Images/ccbb40b46938e1d5bbb242615cd3dbfb.png)

如果我必须解决它，我会下载该示例并查看如何调整它以适应我自己的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:09:01.213

是的，您可以创建一个 `List<string>` 这样列表将跟踪插入并回滚以撤消。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T15:12:28.227

撤消/重做并不容易。有许多不同的方法，但通常，它们都归结为一个堆栈，用于跟踪用户执行的操作。要撤消，您弹出最近的操作，并执行一些方法来撤消该操作。

在文本的情况下，我会做这样的事情：

1.  首先记录框中的文本。
2.  在按键时，启动/重置计时器（例如 0.5 秒）。
3.  当计时器到期（用户暂停输入）时，将旧文本存储在一些“撤消操作”中
4.  将该操作推送到撤消堆栈

当您想“撤消”时，只需将文本框中的文本恢复为步骤 0 中记录的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T15:06:39.640

你可以保留一个变量

1.  输入的字符数，或
2.  最近添加的字符串（如果你喜欢 CTRL+y 你有 CTRL+z'ed）。

另外，如果你想要一个多步 CTRL+z，你声明

```
List<String> additions = ... 
```

而是在列表中添加（...）'ing 和 .Remove(...)'ing 元素。

# string - valgrind中大小的读取和写入无效

> ID：11525386
> 
> 赞同：0
> 
> 时间：2012-07-17T15:02:39.603
> 
> 标签：string, oop, function, error-handling, size

我在使用 valgrind 的以下函数中读取了无效的大小。我不完全确定为什么，但如果你们中的任何人可以帮助我，将不胜感激！据我所知，它运行良好，但仍有一些我没有发现的错误，甚至可能涉及内存分配和释放。请帮忙！

```
 //alternate constructor that allows for setting of the inital value of the string
 MyString::MyString(const char *message)
 {
    int counter(0);
    while(message[counter] != '\0')
    {
            counter++;
    }
    Size = counter;
    **String = new char [Size];**
    for(int i=0; i < Size; i++)
            String[i] = message[i];

 }

istream& operator>>(istream& input, MyString& rhs)
{
    char* t;
    int size(256);
    t = new char[size];
    input.getline(t,size);

    **rhs = MyString(t);**
    delete [] t;

    return input;
}

 /*Assignment operator (=) which will copy the source string into the destination string. Note that size of the destination needs to be adjusted to be the same as the source.
 */

  MyString& MyString::operator=(const MyString& rhs)
 {
    if(this != &rhs)
    {
            delete [] String;
            **String = new char[rhs.Size+1];**
            Size = rhs.Size;

            for(int i = 0; i < Size; i++)
            {
                   ** String[i] = rhs.String[i];**
            }
    }

    return *this;
 } 
```

有什么建议么？？（所有问题行都有**）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:24:47.303

我看到的一件事是您的复制构造函数没有为它分配空间，`\0`也没有复制它。赋值运算符也没有。或者，如果您不存储终止零，那么您为什么要寻找它？

并且这两种实现方式不同，为什么不一致（大小与计数器）？

“据我所知，它运行良好” - 这被称为未定义的行为，或者在这种情况下：运气 - 或者，如果你喜欢我，并且喜欢捕捉错误：不幸。

# sql-server-2005 - 我正在尝试根据存储过程的结果运行查询

> ID：11525387
> 
> 赞同：0
> 
> 时间：2012-07-17T15:02:39.347
> 
> 标签：sql-server-2005, select, stored-procedures, distinct, execute

首先，这里是 sp_GetWorkQByUserName 的代码：

```
 ALTER PROCEDURE [dbo].[sp_GetWorkQByUserName]
    ( @UserName varchar(50),
      @StartDate datetime,
      @EndDate datetime )
    AS
    BEGIN
        SET NOCOUNT ON;
        SELECT DISTINCT SpotId FROM tblSpotCount WHERE StoreNum = EXECUTE sp_GetUserLocationCodes(@UserName)
        ORDER BY SpotDt ASC 
    END 
```

我知道我的`SELECT DISTINCT`陈述是错误的，但我这样写是为了帮助展示我正在尝试做的事情。我想根据`sp_GetUserLocationCodes`带有参数的结果运行这个存储过程`@UserName`。

据我所知，我的问题在于我如何打电话`sp_GetUserLocationCodes`。

问题：如何根据存储过程的结果运行`SELECT DISTINCT`查询？`tblSpotCount.SpotId``sp_GetUserLocationCodes`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:28:45.163

您不能直接在查询中使用存储过程。但是，您可以将存储过程的结果插入到临时表中并在查询中使用它：

```
CREATE TABLE #storeLocations
(
    -- appropriate column names and data types go here
)

INSERT INTO #storeLocations (put column list here)
EXECUTE sp_GetUserLocationCodes(@UserName)

SELECT DISTINCT SpotId
FROM tblSpotCount
WHERE EXISTS (SELECT 1
              FROM #storeLocations
              WHERE #storeLocations.StoreNum = tblSpotCount.StoreNum)
ORDER BY SpotDt ASC

DROP TABLE #storeLocations 
```

# session - 如何在 Magento 中使用 Session

> ID：11525391
> 
> 赞同：5
> 
> 时间：2012-07-17T15:03:07.740
> 
> 标签：session, magento

我观察到 Magento 中有不止一个会话类，例如 Mage::getModel('core/session')、Mage::getModel('customer/session') 等等。当我想将 session 用作存储时，我应该选择哪个 session 类？为什么？我只是困惑。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T16:31:45.410

Magento 的代码被组织成模块。模块的目的之一是提供命名空间。也就是说，模块允许一组开发人员编写代码，而不必担心他们的变量、对象等会被另一组开发人员意外踩到。

Magento 中的每个模块都可以拥有自己的会话对象。通过为每个模块提供它自己的会话对象 Magento 帮助开发人员避免 PHP 全局会话变量中的名称冲突。例如下面的代码

```
Mage::getModel('core/session')->setData('foo',$someValue);
Mage::getModel('customer/session')->setData('foo',$someOtherValue); 
```

会将这两个值保存到会话中，即使它们具有相同的密钥。

至于您应该选择哪个会话类——如果您正在编写自己的模块，您应该创建自己的会话类/模型，从而避免上述冲突。

但实际上，只要您以某种方式命名变量，将内容保存在核心/会话上应该不是问题。

```
Mage::getModel('core/session')->setData('my_namespace_foo',$someValue); 
```

# css - 这是什么类型的 CSS 选择器？这是什么意思？

> ID：11525393
> 
> 赞同：2
> 
> 时间：2012-07-17T15:03:20.983
> 
> 标签：css, css-selectors

在尝试理解引导程序时，我遇到了这个：

`.control-group.error input, [...] { [...] }`

它看起来像一个后代选择器，但 .control-group.error 是一个类。

我浏览了这个，我找不到任何东西：[http ://css.maxdesign.com.au/selectutorial/](http://css.maxdesign.com.au/selectutorial/)

谁能给我一些指示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T15:07:18.847

假设我已经正确理解了您的问题，`.control-group.error`将匹配具有类名`control-group`和`error`类名的任何元素。

正如您所说，`input`将匹配任何`input`元素的后代元素，该元素具有类名`control-group`和`error`.

例如，它将匹配：

```
<form class="control-group error">
    <input> <!-- It matches this (both class names on form) -->
</form> 
```

它不匹配：

```
<form class="control-group">
    <input> <!-- It won't match this (only one of the class names on form) -->
</form> 
```

# java - 随机生成对象列表后出现outofboundsexception

> ID：11525397
> 
> 赞同：0
> 
> 时间：2012-07-17T15:03:37.837
> 
> 标签：java, math, random, arraylist, indexoutofboundsexception

我有一个对象列表，每个对象都有一些“qid”。`qid`是整数。列表的“qid”从任何不说的“min”开始，到任何不说的“max”结束。请注意，列表中对象的“qid”不是连续的。意味着例如：min = 6 和 max = 31 但其中只有 16 个对象，它们的 qid 在`[min,max]`（min 和 max 都包括）因此没有任何对象存在，没有 (31-6+1)-16 = 10 qids。意思是这十个qid，没有任何对象存在。然而，只有 16 个对象具有有效的 qid。

现在我有一个大小为 10 的 int 数组，我想在其中随机存储 10 个对象，但它们的 qid 有效。表示这十个对象必须来自这 16 个而不是来自这 26 个。

我正在做以下事情

```
for (int j = 0; j < 10; j++) {
    checkList[j] = min + (int) (Math.random() * ((max - min) + 1));
    if (qidList.get(checkList[j]) == null ) {
        j--;
        continue;
    } else {
        finalList.add(j,qidList.get(checkList[j])); 
    }
} 
```

1.  qidList = 原始列表，包含 16 个有效对象和有效 qid 的 26 个对象，最大值 = 31，最小值 = 6。
2.  finalList = 将存储随机选择的 10 个对象（26 个中的 16 个不是）的最终列表。
3.  checkList = 大小为 10 的整数数组，其中仅存储随机选择的 10 个 finalList 对象的 qid（而不是其他属性）。

我越来越`indexoutofboundsexception`。有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:21:04.820

From your comment (now apparently deleted), it appears like the problem is with `qidList.get`, as if the problem was with `checkList[j]`, it would have thrown an exception on the line before. Thus, check that max is less than the size of qidList. If not, you can get the following IndexOutOfBoundsException on the get method. From the [List API](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#get%28int%29):

```
IndexOutOfBoundsException - if the index is out of range (index < 0 || index >= size()) 
```

**Update:** To guard against this, change it to the following:

```
if ((checkList[j] >= qidList.size()) || (qidList.get(checkList[j]) == null)) {
    j--;
    continue;
} 
```

Or better yet, set `max` to `qidList.size() - 1` before you enter the loop

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:06:55.090

由于您在 for 循环内递减 j，您可能会超过 0（即 -1 及以上），这会引发 indexOutOfBounds

编辑：

基于错误发生在“qidList.get(checkList[j]) == null”行的注释，那么显然qidList没有checkList[j]，这意味着上面的行“checkList[j] = min + (int ) (Math.random() * ((max - min) + 1));" 被设置为 qidList 大小之外的值！

打印出 checkList[j] 的值来调试！

# android - 可以在 ICS 之前单击状态栏通知中的按钮吗？

> ID：11525398
> 
> 赞同：1
> 
> 时间：2012-07-17T15:03:37.573
> 
> 标签：android, android-notifications

虽然在 ICS 中将按钮放入状态栏通知（并使其工作）很容易，但在早期版本的 android 中，显示的按钮似乎无法获得焦点或单击。是这样吗？焦点将传递给整个通知，而不是它前面的按钮（我使用`RemoteViews.setOnClickPendingIntent(int, PendingIntent)`链接按钮）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:47:34.850

不，你不能在之前的 Honeycomb 中拥有这样的 UI 元素。一旦您的通知条目被整体点击，您所能拥有的就是待处理的意图，仅此而已。如果需要，您可以向用户显示一个选择器（即以对话框为主题的活动），以便用户可以选择任何额外需要的东西，但您不能直接在通知区域中使用它

# ruby-on-rails - rails fields_for 标签小写

> ID：11525401
> 
> 赞同：1
> 
> 时间：2012-07-17T15:03:49.620
> 
> 标签：ruby-on-rails

我在 Rails 3.2.1 中有一个应用程序，其模型具有一列名为 :options 的序列化参数。

在我的表单中，我使用以下代码（并且它有效）来列出用户注册时的选项。我需要为此使用序列化选项，因为我们需要在不同的情况下捕获不同的数据。

```
<% @options.each do |key, value| %>
    <%= f.fields_for :options do |options| %>
        <%= options.label key %> 
        <%= options.text_field key, :value => value %>
    <% end %> 
<% end %> 
```

代码工作正常，但字段标签以小写形式出现，而不是保留它们的大小写：1）街道地址

```
<label for="registration_options_2)_City_State,_Zip">2) city state, zip</label>
<input id="registration_options_2)_City_State,_Zip" name="registration[options][2)_City_State,_Zip]" size="30" type="text" value="" />

<label for="registration_options_3)_Contact_phone_number">3) contact phone number</label>
<input id="registration_options_3)_Contact_phone_number" name="registration[options][3)_Contact_phone_number]" size="30" type="text" value="" /> 
```

我试过使用 <%= options.label key.capitalize %> 或 <%= options.label key.titlecase %> 无济于事。看来标签标签是罪魁祸首，而不是关键。与输出代码一样，密钥的大小写很好。这是标签标签中没有的东西。

建议？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:13:53.590

如果您希望表单中的所有标签都大写，您可以使用 css：

```
label { text-transform: capitalize; } 
```

# struct - Go中的原子比较和交换结构

> ID：11525406
> 
> 赞同：7
> 
> 时间：2012-07-17T15:03:59.207
> 
> 标签：struct, queue, go, compare-and-swap

我正在尝试使用 Maged M. Michael 和 Michael L. Scott 的算法为并发应用程序创建一个非阻塞队列包，如此处[所述](http://www.cs.rochester.edu/research/synchronization/pseudocode/queues.html#nbq)。

这需要使用`"sync/atomic"`包提供的原子 CompareAndSwap。
但是，我不确定与以下伪代码等效的 Go 是什么：

```
E9:   if CAS(&tail.ptr->next, next, <node, next.count+1>) 
```

其中`tail`和`next`是类型：

```
type pointer_t struct {
    ptr   *node_t
    count uint
} 
```

并且`node`是类型：

```
type node_t struct {
    value interface{}
    next  pointer_t
} 
```

如果我理解正确，似乎我需要用一个结构（指针和一个`uint`）做一个 CAS。这甚至可以通过`atomic`-package 实现吗？

感谢帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-17T16:43:23.190

> 如果我理解正确，似乎我需要用一个结构（一个 > 指针和一个 uint）做一个 CAS。这甚至可以使用 atomic-package 吗？

不，那是不可能的。大多数架构仅支持对单个单词的原子操作。然而，许多学术论文使用更强大的 CAS 语句（例如比较和交换双精度），而这些语句在今天是不可用的。幸运的是，在这种情况下通常使用一些技巧：

*   例如，您可以从指针中窃取几位（尤其是在 64 位系统上）并使用它们来编码您的计数器。然后你可以简单地使用 Go 的 CompareAndSwapPointer，但你需要在尝试取消引用之前屏蔽指针的相关位。

*   另一种可能性是使用指向您的（不可变的！）pointer_t 结构的指针。每当您想从您的 pointer_t 结构中修改一个元素时，您都必须创建一个副本，修改该副本并以原子方式替换指向您的结构的指针。这个习语称为 COW（写时复制），适用于任意大型结构。如果要使用此技术，则必须将下一个属性更改为`next *pointer_t`.

出于教育原因，我最近在 Go 中编写了一个无锁列表。您可以在这里找到（恕我直言）来源：[https ://github.com/tux21b/goco/blob/master/list.go](https://github.com/tux21b/goco/blob/master/list.go)

这个相当简短的示例过度使用[atomic.CompareAndSwapPointer](http://golang.org/pkg/sync/atomic/#CompareAndSwapPointer)并且还为标记指针（MarkAndRef 结构）引入了原子类型。这种类型与您的 pointer_t 结构**非常相似**（除了它存储的是 bool+pointer 而不是 int+pointer）。它用于确保在您尝试之后直接插入元素时未将节点标记为已删除。随意使用此源作为您自己项目的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:47:06.990

你可以这样做：

```
 if atomic.CompareAndSwapPointer(
    (*unsafe.Pointer)(unsafe.Pointer(tail.ptr.next)), 
    unsafe.Pointer(&next), 
    unsafe.Pointer(&pointer_t{&node, next.count + 1})
 ) 
```

# jquery - 消除CSS中两个矩形之间的间隙

> ID：11525407
> 
> 赞同：0
> 
> 时间：2012-07-17T15:03:59.940
> 
> 标签：jquery, css

我用 jquery 和 CSS 创建了一个菜单项，但是菜单项中有一个间隙。一个项目放在其他项目的顶部。 . 我怎样才能做到这一点？

这是菜单项的图像... ![菜单项](../Images/ca31f093e9dc182207498b07ca33dba4.png)

这是我的 CSS 文件

```
 *{
    margin:0;
    padding:0;
}
body{
    background:#000;
    font-family:"Trebuchet MS", Helvetica, sans-serif;
    font-size:15px;
    color: #fff;
    text-transform:uppercase;
    overflow-x:hidden;
}
.oe_overlay{
    background:#000;
    opacity:0;
    position:fixed;
    top:0px;
    left:0px;
    width:100%;
    height:100%;
}
ul.oe_menu{
    list-style:none;
    position:relative;
    margin:60px 0px 0px 40px;
    width:967px;
    float:left;
    clear:both;
}
ul.oe_menu > li{
    width:112px;
    height:50px;
    padding-bottom:2px;
    float:left;
    position:relative;
}
ul.oe_menu > li > a{
    display:block;
    background-color:#101010;
    color:#aaa;
    text-decoration:none;
    font-weight:bold;
    font-size:12px;
    width:138px;
    height:30px;
    padding:10px;
    margin:1px;
    text-shadow:0px 0px 1px #000;
    opacity:0.8;
}
ul.oe_menu > li > a:hover,
ul.oe_menu > li.selected > a{
    background:#fff;
    color:#101010;
    opacity:1.0;

}
.oe_wrapper ul.hovered > li > a{
    background:#fff;
    text-shadow:0px 0px 1px #FFF;
}
ul.oe_menu div{
    position:absolute;
    top:50px;
    left:1px;
    background:#fff;
    width:967px;
    height:180px;
    padding:30px;
    display:none;
}
ul.oe_menu div ul li a{
    text-decoration:none;
    color:#222;
    padding:2px 2px 2px 4px;
    margin:2px;
    display:block;
    font-size:12px;
}
ul.oe_menu div ul.oe_full{
    width:100%;
}
ul.oe_menu div ul li a:hover{
    background:#000;
    color:#fff;
}
ul.oe_menu li ul{
    list-style:none;
    float:left;
    width: 150px;
    margin-right:10px;
}
li.oe_heading{
    color:#aaa;
    font-size:16px;
    margin-bottom:10px;
    padding-bottom:6px;
    border-bottom:1px solid #ddd;
} 
```

这是我的html

```
 <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <meta name="description" content="" />
        <meta name="keywords" content=""/>
        <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon"/>
        <link rel="stylesheet" href="css/style.css" type="text/css" media="screen"/>
        <script src="js/cufon-yui.js" type="text/javascript"></script>
        <script src="js/Aller.font.js" type="text/javascript"></script>
        <script type="text/javascript">
            Cufon.replace('ul.oe_menu div a',{hover: true});
            Cufon.replace('h1,h2,.oe_heading');
        </script>
        <style type="text/css">
            span.reference{
                position:fixed;
                left:0px;
                bottom:0px;
                background:#000;
                width:100%;
                font-size:10px;
                line-height:20px;
                text-align:right;
                height:20px;
                -moz-box-shadow:-1px 0px 10px #000;
                -webkit-box-shadow:-1px 0px 10px #000;
                box-shadow:-1px 0px 10px #000;
            }
            span.reference a{
                color:#aaa;
                text-transform:uppercase;
                text-decoration:none;
                margin-right:10px;

            }
            span.reference a:hover{
                color:#ddd;
            }
            .bg_img img{
                width:100%;
                position:fixed;
                top:0px;
                left:0px;
                z-index:-1;
            }
            h1{
                font-size:75px;
                text-align:right;
                position:absolute;
                right:40px;
                top:20px;
                font-weight:normal;
                /*text-shadow:  0 0 3px #0096ff, 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #fff, 0 0 40px #0096ff, 0 0 70px #0096ff, 0 0 80px #0096ff, 0 0 100px #0096ff, 0 0 150px #0096ff;
            */}
            h1 span{
                display:block;
                font-size:15px;
                font-weight:bold;
            }
            h2{
                position:absolute;
                top:220px;
                left:50px;
                font-size:40px;
                font-weight:normal;
                /*text-shadow:  0 0 3px #f6ff00, 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #fff, 0 0 40px #f6ff00, 0 0 70px #f6ff00, 0 0 80px #f6ff00, 0 0 100px #f6ff00, 0 0 150px #f6ff00;
*/}
        </style>
    </head>

    <body>
        <div class="bg_img"><img src="images/1.jpg" alt="background" /></div>
        <h1>Duke Fashion<span>Overlay Effect Menu with jQuery</span></h1>
        <h2>Welcome to the world of fashion</h2>

        <div class="oe_wrapper">
            <div id="oe_overlay" class="oe_overlay"></div>
            <ul id="oe_menu" class="oe_menu">
                <li><a href="">Collections</a>
                    <div>
                        <ul>
                            <li class="oe_heading">Summer 2011</li>
                            <li><a href="#">Milano</a></li>
                            <li><a href="#">Paris</a></li>
                            <li><a href="#">Special Events</a></li>
                            <li><a href="#">Runway Show</a></li>
                            <li><a href="#">Overview</a></li>
                        </ul>
                        <ul>
                            <li class="oe_heading">Winter 2010</li>
                            <li><a href="#">Milano</a></li>
                            <li><a href="#">New York</a></li>
                            <li><a href="#">Behind the scenes</a></li>
                            <li><a href="#">Interview</a></li>
                            <li><a href="#">Photos</a></li>
                            <li><a href="#">Download</a></li>
                        </ul>
                        <ul>
                            <li class="oe_heading">Categories</li>
                            <li><a href="#">Casual</a></li>
                            <li><a href="#">Business</a></li>
                            <li><a href="#">Underwear</a></li>
                            <li><a href="#">Nature Pure</a></li>
                            <li><a href="#">Swimwear</a></li>
                            <li><a href="#">Evening</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="">Projects</a>
                    <div style="left:-111px;"><!-- -112px -->
                        <ul>
                            <li class="oe_heading">Fashion Shows</li>
                            <li><a href="#">Milano</a></li>
                            <li><a href="#">Paris</a></li>
                            <li><a href="#">Berlin</a></li>
                            <li><a href="#">New York</a></li>
                            <li><a href="#">London</a></li>
                        </ul>
                        <ul>
                            <li class="oe_heading">Events</li>
                            <li><a href="#">Fashion Party 2011</a></li>
                            <li><a href="#">Evening specials</a></li>
                            <li><a href="#">Fashion Day Milano</a></li>
                            <li><a href="#">Model Workshops</a></li>
                        </ul>
                        <ul>
                            <li class="oe_heading">Media</li>
                            <li><a href="#">Wallpapers</a></li>
                            <li><a href="#">Downloads</a></li>
                            <li><a href="#">Images</a></li>
                            <li><a href="#">Contest 2011</a></li>
                            <li><a href="#">Fashion Mania</a></li>
                            <li><a href="#">Green Earth Day</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="">Fragrances</a>
                    <div style="left:-223px;">
                        <ul class="oe_full">
                            <li class="oe_heading">Fashion Fragrances</li>
                            <li><a href="#">Deálure</a></li>
                            <li><a href="#">Violet Woman</a></li>
                            <li><a href="#">Deep Blue for Men</a></li>
                            <li><a href="#">New York, New York</a></li>
                            <li><a href="#">Illusion</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="">Events</a>
                    <div style="left:-335px;">
                        <ul>
                            <li class="oe_heading">Shows 2010</li>
                            <li><a href="#">Milano</a></li>
                            <li><a href="#">Paris</a></li>
                            <li><a href="#">Berlin</a></li>
                            <li><a href="#">New York</a></li>
                            <li><a href="#">London</a></li>
                        </ul>
                        <ul>
                            <li class="oe_heading">Shows 2011</li>
                            <li><a href="#">Milano</a></li>
                            <li><a href="#">Paris</a></li>
                            <li><a href="#">Berlin</a></li>
                            <li><a href="#">New York</a></li>
                            <li><a href="#">London</a></li>
                        </ul>
                        <ul>
                            <li class="oe_heading">Special Events</li>
                            <li><a href="#">Fashion Party 2011</a></li>
                            <li><a href="#">Fashion Countdown Party 2010</a></li>
                            <li><a href="#">Fashion Day Milano</a></li>
                            <li><a href="#">Model Workshops</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="">Stores</a>
                    <div style="left:-447px;">
                        <ul>
                            <li class="oe_heading">Europe</li>
                            <li><a href="#">Milano</a></li>
                            <li><a href="#">Paris</a></li>
                            <li><a href="#">Berlin</a></li>
                            <li><a href="#">London</a></li>
                        </ul>
                        <ul>
                            <li class="oe_heading">Asia</li>
                            <li><a href="#">Hong Kong</a></li>
                            <li><a href="#">Tokio</a></li>
                            <li><a href="#">New Delhi</a></li>
                            <li><a href="#">Beijing</a></li>
                        </ul>
                        <ul>
                            <li class="oe_heading">United States</li>
                            <li><a href="#">New York</a></li>
                            <li><a href="#">Los Angeles</a></li>
                            <li><a href="#">Seattle</a></li>
                            <li><a href="#">Miami</a></li>
                        </ul>
                    </div>
                </li>
               <li><a href="">My table</a>
                    <div style="left:-559px;">
                        <ul>
                            <li class="oe_heading">Europe</li>
                            <li><a href="#">Milano</a></li>
                            <li><a href="#">Paris</a></li>
                            <li><a href="#">Berlin</a></li>
                            <li><a href="#">London</a></li>
                        </ul>
                        <ul>
                            <li class="oe_heading">Asia</li>
                            <li><a href="#">Hong Kong</a></li>
                            <li><a href="#">Tokio</a></li>
                            <li><a href="#">New Delhi</a></li>
                            <li><a href="#">Beijing</a></li>
                        </ul>
                        <ul>
                            <li class="oe_heading">United States</li>
                            <li><a href="#">New York</a></li>
                            <li><a href="#">Los Angeles</a></li>
                            <li><a href="#">Seattle</a></li>
                            <li><a href="#">Miami</a></li>
                        </ul>
                    </div>
                </li>
                 <li><a href="">Admin</a>
                    <div style="left:-671px;">
                        <ul>
                            <li class="oe_heading">Europe</li>
                            <li><a href="#">Milano</a></li>
                            <li><a href="#">Paris</a></li>
                            <li><a href="#">Berlin</a></li>
                            <li><a href="#">London</a></li>
                        </ul>
                        <ul>
                            <li class="oe_heading">Asia</li>
                            <li><a href="#">Hong Kong</a></li>
                            <li><a href="#">Tokio</a></li>
                            <li><a href="#">New Delhi</a></li>
                            <li><a href="#">Beijing</a></li>
                        </ul>
                        <ul>
                            <li class="oe_heading">United States</li>
                            <li><a href="#">New York</a></li>
                            <li><a href="#">Los Angeles</a></li>
                            <li><a href="#">Seattle</a></li>
                            <li><a href="#">Miami</a></li>
                        </ul>
                    </div>
                </li>
            </ul>   
        </div>
        <div>
            <span class="reference">
                <a href="http://tympanus.net/codrops/2010/11/25/overlay-effect-menu/">back to the Codrops tutorial</a>
                <a href="http://www.flickr.com/photos/duke9042004/" target="_blank">Background image by Duke Photo</a>
            </span>
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:09:18.093

使用 Firebug 或 Chrome 或其他具有 Web 开发人员工具的浏览器在 Firefox 中加载您的页面。然后开始使用开发人员工具修改边距、填充等。这是解决 CSS 问题的最简单方法，因为您可以在页面上看到您所做更改的即时反馈。

# regex - R 正则表达式：“[:digit:]”的意外行为

> ID：11525408
> 
> 赞同：29
> 
> 时间：2012-07-17T15:04:08.940
> 
> 标签：regex, r

我想从字符向量中提取以数字开头的元素，但是我不理解 POSIX 正则表达式语法。

我会认为

```
vec <- c("012 foo", "305 bar", "other", "notIt 7")
grep(pattern="[:digit:]", x=vec) 
```

会返回`1 2 4`，因为它们是其中某处有数字的四个元素。但实际上它返回了`3 4`。

同样`grep(pattern="^0", x=vec)`返回`1`我所期望的，因为元素 1 以零开头。但是会`grep(pattern="^[:digit:]", x=vec)`返回`integer(0)`，而我希望它会返回，`1 2`因为这些是以数字开头的元素。

我如何误解语法？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-17T15:07:32.747

尝试

```
grep(pattern="[[:digit:]]", x=vec) 
```

相反，因为冒号之间的“元模式”通常需要双括号。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-17T16:15:09.333

另一种解决方案

```
grep(pattern="\\d", x=vec) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-17T15:11:04.553

```
man 7 regex 
```

> **在括号表达式**中，包含在“[:”和“:]”中的字符类的名称代表属于该类的所有字符的列表。标准字符类名称是：
> 
> ```
>  alnum       digit       punct
>          alpha       graph       space
>          blank       lower       upper
>          cntrl       print       xdigit 
> ```

因此，作为括号表达式的唯一成员的字符类看起来像双括号，例如`[[:digit:]]`. 作为另一个例子，考虑`[[:alnum:]]`等价于`[[:alpha:][:digit:]]`。

# qt - qt设计器默认小部件的源代码在哪里

> ID：11525409
> 
> 赞同：0
> 
> 时间：2012-07-17T15:04:11.327
> 
> 标签：qt, qt-designer

我想创建一个行为类似于内置**QTreeWidget的****qt 设计器插件**，但我找不到用于创建任何内置小部件的源代码。帮助将不胜感激。

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T17:38:20.493

在我的 Qt 安装（4.7.1）中，设计器插件源代码可以在

```
<QTDIR>/tools/designer/src/plugins 
```**

# javascript - 范围价格计算

> ID：11525412
> 
> 赞同：1
> 
> 时间：2012-07-17T15:04:18.493
> 
> 标签：javascript, jquery, html

我正在将此代码片段的自定义版本用于基于 jQuery 的租赁预订脚本。现在我在这个脚本中发现了一个问题。我花了几个小时来解决这个问题，但我无法解决它。

如果最后出租日也是季节的最后一天，则会出现问题。如果发生这种情况，这一天将不会被计算在内。首先，我没有意识到这一点，因为如果最后一天晚于赛季的最后一天，则脚本可以正常工作。

如果有人能帮助我找出我的问题，那就太好了。

[jsFiddle 演示](http://jsfiddle.net/C9kph/)

这是代码。

```
var MILLI_PER_DAY = 86400000;
/**
 * identifier is a string that identify the season. like 'summer'
 * start and end must be string with date pattern: yyyy/MM/dd
 */
var Season = function(identifier, start, end) {
        this.id = identifier
        this.start = new Date(start);
        this.end = new Date(end);
    }
    /**
     * name is the product name
     * prices is an object that defines the price of each season.
     * e.g. {'summer' : 29.9, 'winter' : 35}
     */
var Product = function(name, prices) {
        this.name = name;
        this.prices = prices;
    }
var seasons = [
new Season('s1', '2012-01-01', '2012-02-28'),
new Season('s2', '2012-03-01', '2012-05-31')];
var products = [
new Product('single-room', {
    's1': 16,
    's2': 12
})];
/**
 * productName is the product name to be bought
 * dateStart and dateEnd is the range that productName will be used and
 * they should be a string representing a date with pattern: yyyy/MM/dd
 */
function calculatePrice(productName, dateStart, dateEnd) {
    var start = new Date(dateStart);
    var end = new Date(dateEnd);
    //finding product
    var product = null;
    for (var i = 0; i < products.length; i++) {
        var p = products[i]
        if (p.name == productName) {
            product = p;
            break;
        }
    }
    if (product != null) {
        var totalPrice = 0;
        for (var i = 0; i < seasons.length; i++) {
            var s = seasons[i]
            //if this range contains parts or all the season range
            if (start < s.end && end > s.start) {
                var seasonRange = Math.min(s.end, end) - Math.max(s.start, start);
                //due to the start day must count
                var seasonDays = 1 + (seasonRange / MILLI_PER_DAY);
                totalPrice += product.prices[s.id] * seasonDays;
            }
        }
        alert(product.name + " cost " + totalPrice + " in dates from " + dateStart + " to " + dateEnd);
    }
}
calculatePrice('single-room', '2012-02-08', '2012-03-10');
calculatePrice('single-room', '2012-03-05', '2012-05-10');
calculatePrice('single-room', '2012-01-05', '2012-02-10'); 
```

**编辑：** 首先感谢您的快速回复：

我制作了一个新的小提琴，我可以在其中展示这个问题。抱歉我回复晚了，但我在做饭；-)

首先是事实：第 1 季 (s1) 从 2012/01/01 开始，到 2012/07/26 结束 第 2 季 (s2) 从 2012/07/26 开始，到 2012/12/31 结束

第 1 季每晚 1 欧元 第 1 季每晚 2 欧元

第一天和最后一天算作一天（所以第一天不算数）。

测试 A：（结束日期低于季节结束日期）总结：范围（和价格）将被正确计算：

请参阅小提琴警报：以天为单位的范围：9 | 类别：单人间 | 成本 9 | 来自： 2012-07-17 | 至：2012-07-26

测试 B：（结束日期与季节结束日期相同） 摘要：最后一个日期不计算在内。范围（和价格）将无法正确计算：

请参阅小提琴警报：以天为单位的范围：9 | 类别：单人间 | 成本 9 | 来自： 2012-07-17 | 至：2012-07-27

测试 C：（结束日期高于季节结束日期） 摘要：等于最后一天的日期不计算在内。第 28 位将是范围（和价格）将无法正确计算：

请参阅小提琴警报：以天为单位的范围：10 | 类别：单人间 | 成本 11 | 来自： 2012-07-17 | 至： 2012-07-28

[小提琴](http://jsfiddle.net/C9kph/26/)

* * *

该死，现在我有一个真正的问题。它在 Sarafi 上不起作用（尝试过 Mac 版本），甚至 iPhone 也无法计算价格。Firefox 和 Chrome 在 OSX Lion 下运行良好。

价格不会被计算，似乎脚本在这些行附近停止：

```
 if ( product != null ) {
    var totalPrice = 0;
    for ( var i=0; i < seasons.length; i++ ) {
      var s = seasons[i]
      //if this range contains parts or all the season range
      if ( start < s.end && end > s.start ) {
        var seasonRange = Math.min(s.end,end) - Math.max(s.start,start);
        //due to the start day must count
        var seasonDays = 1 + (seasonRange/MILLI_PER_DAY);
        totalPrice += product.prices[s.id]*seasonDays;
      }
    }
    alert(product.name + " cost " + totalPrice + " in dates from " + dateStart + " to " + dateEnd);
  }
} 
```

我已经检查了 safari javascript 错误日志，但我发现那里没有问题。

小伙伴们可以再看一遍吗？那会很好 ;-）

**更新 26.7.2012** Safari 6.0（今天发布）上没有出现该问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:31:29.843

我认为您的字符串日期被错误地转换为日期。
你所有的约会都早了一天。
如果您在控制台中运行： new Date('2012-05-25'); 你会看到你得到的价值。
我将其更改为： new Date('2012/05/25'); 它似乎工作正常。

calculatePrice('单人房','2012/05/25','2012/05/30');

编辑：这是我的控制台输出：
new Date('2012-03-10')
Fri Mar 09 2012 18:00:00 GMT-0600 (Central Standard Time)
new Date('2012/03/10')
Sat Mar 10 2012 00:00:00 GMT-0600（中部标准时间）

-edit-：
逻辑看起来不对。
如果提交：calculatePrice('single-room', '2012-05-31', '2012-05-31'); 你得到 0 的价格。
这是因为开始时间不小于赛季结束时间。==赛季结束。但仍然是有效时间。
if ( start < s.end && end > s.start ) {
因此应该是：
if ( start <= s.end && end > s.start ) {

# c++ - 在 C++ 效率结构中创建日历应用程序

> ID：11525415
> 
> 赞同：0
> 
> 时间：2012-07-17T15:04:30.447
> 
> 标签：c++, qt, calendar

我正在 Qt/C++ 中创建一个日历应用程序，我正在决定如何制作这些结构。

到目前为止我所做的：创建约会的排序向量（按升序开始日期排序）。

我想知道如果我添加一个具有 52 个位置（每周 1 个）的 std::map 并在每个位置添加一个指向该周约会指针的向量，它是否可以提高性能。获得例如一月的约会将在恒定时间内发生（有点 - 接受前 4 周的所有指针）。缺点：每次用户编辑/删除/创建约会时，该表都必须重建。

我也可以只使用向量并搜索一月份开始的第一个约会，然后寻找一月份的最后一个约会。这将在线性时间 (N) 内发生。

我猜当用户快速点击所有月份时，拥有一个可以快速填充他点击的每个月的约会的地图表比从头到尾遍历向量更有效。

也许我可以从我的向量中保留每个月的迭代器？

有什么建议吗？- 如果我把它放在错误的堆栈中，也请原谅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:33:47.217

如果您不打算使用数据库，您可以尝试使用一个大`std::map<time_t, Appointment>`的（代替`time_t`，您也可以使用其他可以轻松比较的时间类型）。`std::map`将保持您的约会在插入时进行排序。插入/查找/擦除只需要对数时间。

当您需要列出某个范围内的约会时（例如，在 2012 年 1 月），请使用`std::map::equal_range`并提供一个仅查看月份（或周或日）的比较函子。请注意，这`std::map::equal_range`也是对数复杂度。一旦你有一对相等范围的迭代器，遍历每个结果的时间都是常数。

如果可能存在具有相同开始时间的重复约会，则需要使用 a`std::multimap`代替。

* * *

作为一般的“最佳实践”指南，您应该努力以紧凑的数字格式（如`time_t`）存储您的日期/时间，并且仅出于输入/输出目的进行转换。这与将数值存储/计算为 int、float 等的基本原理相同，并且仅将它们格式化为字符串以用于输入/输出目的。如果您想使用方便的日期/时间包装类（可以轻松访问天、小时、分钟等），请查看[Boost.DateTime](http://boost.org/doc/libs/1_50_0/doc/html/date_time.html)库或 C++11 的[`std::chrono`](http://en.cppreference.com/w/cpp/chrono). 那些日期/时间包装器应该已经定义了`operator<`，因此它们可以直接用作 中的键类型`std::map`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:33:36.883

您可以尝试使用带有键（年、月、日）和值作为约会列表/向量的平衡二叉搜索树。它应该给您`O(logn)`访问天数的复杂性。AFAIR `std::map`和`std::set`（当然还有`std::multiset`）被实现为 RB（或 AVL）平衡二叉树。不过，你应该小心——这些结构的效率常数要大得多，所以你必须对你的应用程序进行基准测试。

# c++ - 当父类和子类的 dat 成员具有相同的名称时，如何从子类访问父类的数据成员

> ID：11525418
> 
> 赞同：12
> 
> 时间：2012-07-17T15:04:37.947
> 
> 标签：c++, visual-c++, inheritance, public

我的情况如下::

```
class Parent
{
public:
int x;
}

class Child:public Parent
{
int x; // Same name as Parent's "x".

void Func()
{
   this.x = Parent::x;  // HOW should I access Parents "x".  
}
} 
```

这里如何从 Child 的成员函数访问 Parent 的“X”。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-17T15:06:22.280

差不多明白了：

```
this->x = Parent::x; 
```

`this`是一个指针。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T15:39:03.640

通过范围解析运算符访问它将起作用：

```
x = Parent::x; 
```

但是，我会质疑你想在什么情况下这样做。您的示例使用公共继承来模拟“is-a”关系。因此，如果您有满足此标准的对象，但具有具有不同值和/或不同含义的相同成员，那么这种“is-a”关系具有误导性。可能有一些边缘情况是合适的，但我会说它们绝对是规则的例外。每当您发现自己这样做时，请认真思考*为什么*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T15:20:15.957

这只是 Luchian Grigore 和 Anubis 先生提供的解决方案的简要说明，因此如果您对“这是如何工作的”感到好奇，您应该进一步阅读。

C++ 提供了一个所谓的“作用域运算符”( `::`)，它非常适合您的任务。

[此页面](http://publib.boulder.ibm.com/infocenter/comphelp/v7v91/index.jsp?topic=%2Fcom.ibm.vacpp7a.doc%2Flanguage%2Fref%2Fclrc05cplr175.htm)提供了更多详细信息。您可以将此运算符与类名 ( `Parent`) 结合使用以访问父级的`x`变量。

# c# - 在 SQL where 语句中使用 C# 日期时间

> ID：11525419
> 
> 赞同：0
> 
> 时间：2012-07-17T15:04:48.650
> 
> 标签：c#, asp.net, sql-server

下面是我的代码（C#），但没有显示任何内容。

问题似乎出在@lastlogged 参数上，就好像我硬编码了它的值一样，lastlogged 的​​值已经使用 Convert.ToDateTime("2012-07-17 15:18:14.993") 进行了转换。

**更新**错误：必须声明标量变量“@lastlogged”。

```
string sqlStr = "SELECT * FROM View_AllJobDetails WHERE UpdatedDateStaff >= @lastlogged";
        SqlCommand cmd = new SqlCommand(sqlStr, cnn);
        cmd.Parameters.Add("@lastlogged", SqlDbType.DateTime);
        cmd.Parameters["@lastlogged"].Value = lastlogged; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:32:13.913

为什么不将 lastlogged 值本身嵌入到 sqlStr -

```
string sqlStr = "SELECT * FROM View_AllJobDetails WHERE UpdatedDateStaff >= " + string.Format("{0:dd-MMM-yyyy}",lastlogged); 
```

另一种方法是在数据库中创建存储过程并添加此参数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-17T15:12:35.730

我注意到有时参数确实有日期问题。但是，它可以隐式地将字符串转换为日期。因此，尝试：

```
AddWithValue("@lastlogged", lastlogged.ToString) 
```

# macos - 自定义 NSStatusItem 和 NSView 不能可靠地接收 NSTrackingEvents

> ID：11525426
> 
> 赞同：2
> 
> 时间：2012-07-17T15:05:11.270
> 
> 标签：macos, cocoa, mouseevent, nsstatusitem, nstrackingarea

我有一个仅状态栏项目的应用程序，我试图在 mouseOver 上显示一个面板。我已经连接并工作了自定义状态项（和相关视图），但跟踪矩形仅在每十几个启动时接收事件。这使我相信某处发生了竞争情况，但我找不到。在我的自定义状态栏项目视图中：

```
- (id)initWithStatusItem:(NSStatusItem *)statusItem {
    CGFloat itemWidth = [statusItem length];
    CGFloat itemHeight = [[NSStatusBar systemStatusBar] thickness];
    NSRect itemRect = NSMakeRect(0.0, 0.0, itemWidth, itemHeight);
    NSLog(@"itemRect: %@", NSStringFromRect(itemRect));

    if ((self = [super initWithFrame:itemRect])) {
        _statusItem = statusItem;
        _statusItem.view = self;

        NSTrackingAreaOptions options = NSTrackingMouseEnteredAndExited | NSTrackingMouseMoved | NSTrackingActiveAlways;
        NSTrackingArea *trackingArea = [[NSTrackingArea alloc] initWithRect:itemRect
                                                                    options:options
                                                                      owner:self
                                                                   userInfo:nil];
        [self addTrackingArea:trackingArea];

        [self.window setIgnoresMouseEvents:NO];
        [self.window setAcceptsMouseMovedEvents:YES];

        self.wantsLayer = YES;
    }
    return self;
}

- (void)mouseEntered:(NSEvent *)theEvent {
    [[NSNotificationCenter defaultCenter] postNotificationName:UAStatusItemMouseEnteredNotification object:nil];
}

- (void)mouseExited:(NSEvent *)theEvent {
    [[NSNotificationCenter defaultCenter] postNotificationName:UAStatusItemMouseExitedNotification object:nil];
} 
```

在大多数启动时，应用程序不会响应跟踪鼠标事件，但每隔一段时间，`mouseEntered:`和`mouseExited:`方法就会被正确调用，这让我完全困惑。这里发生了什么，我做错了什么？

**编辑 07/17/2012**
我根据@Streams 的回答更改了代码，但看到了同样的问题：

```
- (id)initWithStatusItem:(NSStatusItem *)statusItem {
    CGFloat itemWidth = [statusItem length];
    CGFloat itemHeight = [[NSStatusBar systemStatusBar] thickness];
    NSRect itemRect = NSMakeRect(0.0, 0.0, itemWidth, itemHeight);
    NSLog(@"itemRect: %@", NSStringFromRect(itemRect));

    if ((self = [super initWithFrame:itemRect])) {
        _statusItem = statusItem;
        _statusItem.view = self;            

        [self updateTrackingAreas];

        [self.window setIgnoresMouseEvents:NO];
        [self.window setAcceptsMouseMovedEvents:YES];

        self.wantsLayer = YES;
    }
    return self;
}

- (void)updateTrackingAreas {

    if (self.trackingArea)
        [self removeTrackingArea:self.trackingArea];

    [super updateTrackingAreas];

    self.trackingArea = [[NSTrackingArea alloc] initWithRect:CGRectZero
                                                     options:NSTrackingMouseEnteredAndExited | NSTrackingMouseMoved | NSTrackingInVisibleRect | NSTrackingActiveAlways
                                                       owner:self
                                                    userInfo:nil];
    [self addTrackingArea:self.trackingArea];
} 
```

**编辑 07/18/2012**
这是一个准系统[示例项目](http://cloud.coneybeare.net/I9yx)，它使用众所周知的 github 项目（由 @Stream 编写）来显示问题。它不能可靠地接收鼠标悬停事件，如果有的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T22:35:01.927

我打开了一个 DTS 请求让 Apple 看看这个。这是回应：

> ...启动应用程序时，您在 Xcode 中使用全屏。我[之前]没有这样做，但我现在可以重现这个问题。据我所知，只有当您的应用程序在 Xcode 中从全屏模式启动时才会发生。您的用户不会以这种方式启动应用程序。这是 AppKit 的全屏模式的问题，不一定是您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:18:53.717

我相信你应该只在`-[NSView updateTrackingAreas]`. 例如：

```
- (void)updateTrackingAreas
{
    if (_trackingArea) {
        [self removeTrackingArea:_trackingArea];
    }

    [super updateTrackingAreas];

    NSTrackingAreaOptions options = (NSTrackingMouseEnteredAndExited |
                                     NSTrackingMouseMoved |
                                     NSTrackingInVisibleRect |
                                     NSTrackingActiveAlways);
    _trackingArea = [[NSTrackingArea alloc] initWithRect:CGRectZero
                                                 options:options
                                                   owner:self
                                                userInfo:nil];
    [self addTrackingArea:_trackingArea];
} 
```

# php - 在 Propel 中向 SQL 查询添加计数

> ID：11525431
> 
> 赞同：0
> 
> 时间：2012-07-17T15:05:30.817
> 
> 标签：php, symfony1, propel

我的项目中有旧版本（1.2）Propel。我想查询：

```
SELECT city_id, COUNT(*) FROM House GROUP BY city_id 
```

我试过：

```
 $c = new Criteria;
  $c->addAsColumn('count', 'Count(' . HousePeer::CITY_ID . ')'); 
  $this->results = HousePeer::doSelect($c); 
```

但这不起作用 - 只返回数据库中的第一条记录，没有计数等。

我也试过：

```
$con = Propel::getConnection();
$sql = "SELECT city_id, COUNT(*) FROM House GROUP BY city_id";
$stmt = $con->createStatement();
$rs = $stmt->executeQuery($sql, ResultSet::FETCHMODE_NUM);
$this->results = HousePeer::populateObjects($rs); 
```

但这让我

```
Error populating House object [wrapped: Invalid resultset column: 3] 
```

我只想收到与 SQL 表中相同的内容：

```
city_id | count
1       | 2
2       | 4
3       | 3 
```

ETC

或从 CityPeer 获取名称 City （我在 City 和 House 之间有正确的关系），例如：

```
city       | count
New York   | 2
Paris      | 4
Washington | 3 
```

但我不能在 Propel 中使用这个查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:20:22.013

在 symfony 的旧代码片段中有[一个很好的例子](http://snippets.symfony-project.org/snippet/257)。

尝试：

```
$c = new Criteria;
$c->clearSelectColumns()->addSelectColumn(HousePeer::CITY_ID);
$c->addGroupByColumn(HousePeer::CITY_ID);
$c->addAsColumn('numCity', 'COUNT('.HousePeer::CITY_ID.')');
$c->addJoin(HousePeer::CITY_ID, CityPeer::ID);

$rs = HousePeer::doSelectRS($c);

while ($rs->next())
{
  // etc ...
} 
```

# sql - SQL Server 将平面表转换为基于属性的结构

> ID：11525433
> 
> 赞同：0
> 
> 时间：2012-07-17T15:05:39.893
> 
> 标签：sql, sql-server, sql-server-2008

我有一个从 Excel 电子表格导入的平面数据表....

```
tbl_ProductsImport
----------------------------------------------------------------------------------
ProductId | Name | Description | Attribute1 | Attribute2 | Attribute3 | Attribute4 etc...
----------------------------------------------------------------------------------
12345       P1     Some desc..   x                         x            x
12346       P2     Some desc..                x            
12347       P3     Some desc..   x            x            x            x
12348       P4     Some desc..   x                                      x 
```

我想将其转换为下表结构...

```
tbl_Products
------------------------------
ProductId (pk) | Name | Description

tbl_Attributes
----------------------------------------------
AttributeId (pk) | Name (derrived from column)

tbl_ProductAttributes
----------------------
ProductId (fk) | AttributeId (fk) 
```

所以我问，我将如何写一份声明来做到这一点？

编辑：这将是计划数据导入作业的一部分，该作业会在执行前截断所有现有数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:39:55.797

唔。这行得通吗？讨厌的讨厌的动态 SQL，但有时它必须完成。

```
INSERT  tbl_Products
SELECT  ProductId, Name, Description
FROM    tbl_ProductsImport

INSERT  tbl_Attributes (Name)
SELECT  c.name
FROM    sys.sysobjects o
JOIN    sys.syscolumns c ON o.id = c.id
WHERE   o.name = 'tbl_ProductsImport'
AND     c.name LIKE 'Attribute%'

DECLARE @DynamicSQL VARCHAR(MAX)
SET     @DynamicSQL = ''

DECLARE @AttributeId INT
DECLARE @AttributeName NVARCHAR(255)

SELECT  @AttributeId = MIN(AttributeId)
FROM    tbl_Attributes

WHILE (@AttributeId <= (SELECT MAX(AttributeId) FROM tbl_Attributes))
BEGIN
    SELECT  @AttributeName = Name
    FROM    dbo.tbl_Attributes
    WHERE   AttributeId = @AttributeId

    SELECT  @DynamicSQL =
    'INSERT tbl_ProductAttributes
    SELECT  ProductId, ' + CONVERT(VARCHAR, @AttributeId) + '
    FROM    tbl_ProductsImport
    WHERE   ' + @AttributeName + ' = 1'

    EXEC    (@DynamicSQL)

    SET @AttributeId = @AttributeId + 1
END 
```

这假定 tbl_ProductsImport 中的属性值是 BIT。没有尝试过，所以可能是一个超级失败。

吉姆

# batch-file - 将 PDF 文件跟踪器创建为批处理文件

> ID：11525436
> 
> 赞同：0
> 
> 时间：2012-07-17T15:05:58.043
> 
> 标签：batch-file

我创建了一个批处理文件，它应该跟踪我系统上打开的 PDF 文件。一旦有人打开 PDF 文件，文件的名称以及访问时间就会记录在日志文件中。这是我的批处理文件的代码：

```
@echo off
echo FILE ACCESSED %1 >> I:\Batch\log.txt
echo TIME OF ACCESS %TIME% >> I:\Batch\log.txt
"C:\Program Files\Foxit Software\Foxit Reader\Foxit Reader.exe" %1
EXIT 
```

我还将此批处理文件设置为要打开的 PDF 文件的默认应用程序。现在，问题是，只要我打开任何 PDF 文件，许多 cmd 窗口就会开始无休止地打开和关闭。请提出一些补救措施。

谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:36:08.290

```
@echo off
copy %1 %1.tmp
echo FILE ACCESSED %1 >> I:\Batch\log.txt
echo TIME OF ACCESS %TIME% >> I:\Batch\log.txt
"C:\Program Files\Foxit Software\Foxit Reader\Foxit Reader.exe" %1.tmp
del %1.tmp
EXIT 
```

# c# - 详细信息查看自动换行问题

> ID：11525443
> 
> 赞同：0
> 
> 时间：2012-07-17T15:06:25.597
> 
> 标签：c#, asp.net, css, detailsview

我有一个带有属性的[DetailsView](http://msdn.microsoft.com/en-us/library/s3w1w7t4.aspx)`wrap=true`。但是我希望详细信息视图自动换行，**而不是**断词。如何在详细信息视图中更改这些属性？

[这是它发生的一个例子](http://i.stack.imgur.com/PDHZq.png)。

详情查看片段：

```
 <asp:DetailsView ID="DetailsView1" runat="server" AutoGenerateRows="False" 
  DataKeyNames="AccidentId" DataSourceID="srcDetails" DefaultMode="Edit" 
  Height="50px" Width="919px" onitemupdated="DetailsView1_ItemUpdated" 
  onitemupdating="DetailsView1_ItemUpdating" style="margin-right: 0px">
   <Fields>
    <EditItemTemplate>
         <asp:TextBox ID="TextBox10" runat="server" Height="60px" 
         Text='<%# Bind("ActionInvolved") %>' TextMode="MultiLine" Width="500px">   </asp:TextBox>
     </EditItemTemplate>
   </Fields>
 </asp:DetailsView> 
```

编辑：我发现这个问题只有在我将详细信息视图的宽度设置为 100% 并将静态宽度设置为我的文本字段时才会发生。知道如何在不发生的情况下设置这些属性吗？

# sql-server - 根据员工表 SQL Server 的年龄间隔返回百分比

> ID：11525449
> 
> 赞同：1
> 
> 时间：2012-07-17T15:06:53.267
> 
> 标签：sql-server, percentage

我有一张表 employees[employee_id,age] 我希望返回 18 到 20 岁和 26 到 40 岁之间的员工百分比，例如：

```
Age Interval Percent
18-20          35%
26-40          40 % 
```

谢谢

```
Select t.range as [age interval] , Count(*) as 'number of appereances' from
(Select case when age between 18 and 26 then '18-26'
when age between 26-40 then '26-40' end as range from employees) t
group by t.range 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T15:14:44.993

```
select '18-20',
    count(case when age between 18 and 20 then 1 end) * 100.0 / count(*)
from employees

union all 

select '26-40',
    count(case when age between 26 and 40 then 1 end) * 100.0 / count(*)
from employees 
```

[SQL 小提琴示例 #1](http://sqlfiddle.com/#!3/29847/9)

您还可以编写一个稍微干净（更易于维护）的版本，如下所示：

```
select cast(r.Start as varchar(3)) + '-' + cast(r.[End] as varchar(3)),
    count(case when e.age between r.Start and r.[End] then 1 end) * 100.0 / (select count(*) from employees) 
from (
    select 18 as Start, 20 as [End]
    union all      
    select 21 as Start, 25 as [End]
    union all      
    select 26 as Start, 40 as [End]
) r  
left outer join employees e on e.age between r.Start and r.[End]
group by cast(r.Start as varchar(3)) + '-' + cast(r.[End] as varchar(3)) 
```

[SQL 小提琴示例 #2](http://sqlfiddle.com/#!3/29847/18)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:31:44.053

你通常想用 windows 函数做这样的事情：

```
Select t.range as [age interval] , Count(*) as 'number of appereances',
       cast(count(*)*100.0/tot as varchar(256))+'%' as 'percent'
from (Select (case when age between 18 and 26 then '18-26'
                  when age between 26 and 40 then '26-40'
              end) as range,
             count(*) over (partition by NULL) as tot
      from employees) t
group by t.range 
```

我还按照您的示例中的数字格式化了数字。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-23T11:22:01.167

```
Select 
CAST(ROUND(count(case when 18 <= age and  age < 26 then 1 end) * 100.0 / count(*),2)AS NUMERIC(8,2)) as '18-26'
,CAST(ROUND(count(case when 26 <= age and  age < 40 then 1 end) * 100.0 / count(*),2)AS NUMERIC(8,2)) as '26-40'
From employees 
```

加上 obtimisée

# objective-c - 推送 UITableViewControllers 和过滤/重新加载数据

> ID：11525457
> 
> 赞同：0
> 
> 时间：2012-07-17T15:07:21.920
> 
> 标签：objective-c, cocoa-touch, pointers

我认为这可能是一个我不理解的简单问题，但我花了很多时间在这上面，它阻碍了我的工作。

我有一个显示 4 行“主题”的 UITableViewController。当您触摸一个时，它会创建我的 UITableViewController 类的一个实例，将数据源数组设置为“子主题”数组并将控制器推送到导航堆栈上。当我转到包含 10 行的“所有”主题页面时，我有一个用于过滤结果的分段控件。我能够成功过滤数组，但是当我将它分配给我的 self.topicsDataSource 并调用 [self.tableView reloadData] 时，什么也没有发生。委托方法 numberOfSections 和 numberOfRowsInSection，但 cellForRowAtIndexPath 不是。当我按下导航返回按钮时，它会返回到上一个表格，现在是我在顶部表格中想要的过滤结果。

这就是我认为正在发生的事情。1.我实际上是在改变前一个表的数据源，并且在那个表上调用了self.tableView.reloadData。2\. cellForRowAtIndexPath 没有被调用，因为此时正在重新加载的tableview 是不可见的。

这是我实例化推送表视图的地方。这个类叫做 TopicsViewController

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSNumber *idtopic = [[self.topicsDataSource objectAtIndex:indexPath.row] idtopic];
    NSArray *subtopics = [DataManager getSubtopicsForTopic:idtopic];

    if ([subtopics count] > 0) {
        TopicsViewController *topicsVC = [[TopicsViewController alloc ] init];
        topicsVC.tableView.rowHeight = 106;
        topicsVC.parentTopicId = idtopic;
        topicsVC.topicsDataSource = [NSMutableArray arrayWithArray:subtopics];
        topicsVC.diseaseStateId = self.diseaseStateId;
        topicsVC.title = [[self.topicsDataSource objectAtIndex:indexPath.row] topic];
        [self.navigationController pushViewController:topicsVC animated:YES];
    }

    else if (![[self.topicsDataSource objectAtIndex:indexPath.row] topic]) {
        //all topics was selected
        TopicsViewController *topicsVC = [[TopicsViewController alloc] initWithNibName:nil bundle:nil];
        topicsVC.tableView.rowHeight = 106;
        NSMutableArray *mArray = [[NSMutableArray alloc] initWithArray:[DataManager getTopicsAtEndOfTree]];
        topicsVC.allTopics = mArray;
        topicsVC.topicsDataSource = topicsVC.allTopics;
        topicsVC.diseaseStateId = self.diseaseStateId; 
        topicsVC.parentTopicId = [NSNumber numberWithInt:100];

        UISegmentedControl *segControl = [[UISegmentedControl alloc] initWithItems:[[NSArray alloc] initWithObjects:@"All", @"Speaker Direct", @"Live Meeting", nil]];
        [segControl addTarget:self action:@selector(segControlChanged:) forControlEvents:UIControlEventValueChanged];
        [segControl setSegmentedControlStyle:UISegmentedControlStyleBar];
        [segControl setSelectedSegmentIndex:0];
        topicsVC.navigationItem.titleView = segControl;
        topicsVC.tableView.dataSource = topicsVC;
        [self.navigationController pushViewController:topicsVC animated:YES];  
    }.... 
```

这是我过滤数据并重新加载tableView的地方：

```
 - (void)segControlChanged:(UISegmentedControl *)sender
{
    self.allTopics = [NSMutableArray arrayWithArray:[DataManager getTopicsAtEndOfTree]];
    if (sender.selectedSegmentIndex == 1) {
        NSPredicate *pred = [NSPredicate predicateWithFormat:@"type == 2"];
        NSMutableArray *mArr = [[NSMutableArray alloc] initWithArray:[self.allTopics filteredArrayUsingPredicate:pred]];
        self.topicsDataSource = mArr;
    }
    else if (sender.selectedSegmentIndex == 2) {
        NSPredicate *pred = [NSPredicate predicateWithFormat:@"type == 1"];
        NSMutableArray *mArr = [[NSMutableArray alloc] initWithArray:[self.allTopics filteredArrayUsingPredicate:pred]];
        self.topicsDataSource = mArr;
    }
    else {
        NSMutableArray *mArr = [[NSMutableArray alloc] initWithArray:[DataManager getTopicsAtEndOfTree]];
        self.topicsDataSource = mArr;
    }
    [self.tableView reloadData];

} 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:37:20.810

很难说出你的问题是什么以及正在发生什么——我建议下次用更少的随机代码、更多的解释和一个更明显的问题（也更好的格式）提出一个问题。反正。

据我所知，`self`仍然指的是原始视图控制器。我不确定你的代码来自哪些类，但如果你想让它工作，你需要

1.  为`TopicsViewController`
2.  推它/等等
3.  在自定义类内部，定义数据源，重新加载等
4.  在自定义类中调用更改数据源方法
5.  调用自定义类的`reloadData`方法。`tableView`

关键是，确保您的所有工作都发生在自定义表格视图数据控制器的类内部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:34:18.137

```
- (void)segControlChanged:(UISegmentedControl *)sender
{
    self.allTopics = [NSMutableArray arrayWithArray:[DataManager getTopicsAtEndOfTree]];
    if (sender.selectedSegmentIndex == 1) {
        NSPredicate *pred = [NSPredicate predicateWithFormat:@"type == 2"];
        NSMutableArray *mArr = [[NSMutableArray alloc] initWithArray:[self.allTopics filteredArrayUsingPredicate:pred]];
        self.topicsDataSource = mArr;
    }
    else if (sender.selectedSegmentIndex == 2) {
        NSPredicate *pred = [NSPredicate predicateWithFormat:@"type == 1"];
        NSMutableArray *mArr = [[NSMutableArray alloc] initWithArray:[self.allTopics filteredArrayUsingPredicate:pred]];
        self.topicsDataSource = mArr;
    }
    else {
        NSMutableArray *mArr = [[NSMutableArray alloc] initWithArray:[DataManager getTopicsAtEndOfTree]];
        self.topicsDataSource = mArr;
    }

[tableView reloadData]; // 

} 
```

# ruby-on-rails-3 - 为特定模型自定义 rails_admin 删除操作

> ID：11525459
> 
> 赞同：6
> 
> 时间：2012-07-17T15:07:28.243
> 
> 标签：ruby-on-rails-3, custom-action, rails-admin

我一直在阅读有关自定义操作的 rails_admin wiki 部分，但我对 rails_admin 完全陌生，该文档对我来说有点混乱。

我需要实现的是，当管理员用户单击删除特定员工的选项（员工是我的应用程序中的模型）时，实际删除给定员工的代码不能是 rails_admin 删除的默认方式，而是给定我需要以某种方式提供给 rails_admin 的代码块。

请注意，我仍然希望以通常的方式删除通过 rails_admin 可访问的其余数据模型。只有员工模型需要自定义删除例程。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-17T09:44:01.117

我刚刚遇到了同样的问题，因为我需要将用户标记为删除而不是立即删除。

经过一番折腾，我终于找到了一种方法：覆盖 RailsAdmin 的默认删除操作。

这是我添加自己的自定义代码后的删除操作（不是删除，而是使用自定义通知标记删除，如果用户已被标记为删除，则隐藏删除按钮）。：

```
# config/initializers/rails_admin_delete_override.rb
module RailsAdmin
  module Config
    module Actions
      class Delete < RailsAdmin::Config::Actions::Base

        RailsAdmin::Config::Actions.register(self)

        register_instance_option :member do
          true
        end

        register_instance_option :route_fragment do
          'delete'
        end

        register_instance_option :http_methods do
          [:get, :delete]
        end

        register_instance_option :authorization_key do
          :destroy
        end

        register_instance_option :visible? do
          bindings[:object].class.base_class.name != 'User' || !bindings[:object].to_destroy?
        end

        register_instance_option :controller do
          Proc.new do
            if request.get? # DELETE

              respond_to do |format|
                format.html { render @action.template_name }
                format.js   { render @action.template_name, :layout => false }
              end

            elsif request.delete? # DESTROY

              redirect_path = nil
              @auditing_adapter && @auditing_adapter.delete_object(@object, @abstract_model, _current_user)
              if @object.class.base_class.name == 'User'
                @object.to_destroy!
                flash[:success] = t("admin.flash.user_destroy_successful", :name => @model_config.label)
                redirect_path = index_path
              else
                if @object.destroy
                  flash[:success] = t("admin.flash.successful", :name => @model_config.label, :action => t("admin.actions.delete.done"))
                  redirect_path = index_path
                else
                  flash[:error] = t("admin.flash.error", :name => @model_config.label, :action => t("admin.actions.delete.done"))
                  redirect_path = back_or_index
                end
              end

              redirect_to redirect_path

            end
          end
        end

        register_instance_option :link_icon do
          'icon-remove'
        end
      end
    end
  end
end 
```

您可以在此处找到原始操作代码：[https ://github.com/sferik/rails_admin/blob/master/lib/rails_admin/config/actions/delete.rb](https://github.com/sferik/rails_admin/blob/master/lib/rails_admin/config/actions/delete.rb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-28T08:26:10.337

经过数小时的黑客攻击，我找到了一种更简单的自定义动作的方法。您只需要创建一个不同的模块名称（在我的情况下是“MyRailsAdmin”），然后扩展原始操作类，例如。'删除'

```
# config/initializers/rails_admin_delete.rb

require 'rails_admin/config/actions'
require 'rails_admin/config/actions/base'

module MyRailsAdmin
    module Config
        module Actions
          class Delete < RailsAdmin::Config::Actions::Delete
            RailsAdmin::Config::Actions::register(self)

            register_instance_option :controller do
                proc do
                    if request.get? # DELETE

                        respond_to do |format|
                            format.html { render @action.template_name }
                            format.js   { render @action.template_name, layout: false }
                        end

                    elsif request.delete? # DESTROY

                        redirect_path = nil
                        @auditing_adapter && @auditing_adapter.delete_object(@object, @abstract_model, _current_user)

                        # [CUSTOM DELETE] mark as deleted (status = 0) rather than actually hard delete it
                        @object.status = 0

                        if @object.save
                            flash[:success] = t('admin.flash.successful', name: @model_config.label, action: t('admin.actions.delete.done'))
                            redirect_path = index_path
                        else
                            flash[:error] = t('admin.flash.error', name: @model_config.label, action: t('admin.actions.delete.done'))
                            redirect_path = back_or_index
                        end

                        redirect_to redirect_path

                    end
                end
            end

        end
    end
end
end 
```

# templates - 带淘汰赛的动态模板

> ID：11525460
> 
> 赞同：4
> 
> 时间：2012-07-17T15:07:32.213
> 
> 标签：templates, dynamic, knockout.js, jquery-templates

我有一个视图模型，当我的应用程序状态发生变化时，我想在运行时动态更改其模板。我在提出我的解决方案时提到了这个[链接](http://nullorundefined.wordpress.com/2011/04/27/advanced-dynamic-template-binding-in-knockout-js/) 。

在我的 html 页面中，我有一个绑定到视图模型列表的 div：

```
<div class="app" 
     data-bind="template: {name: templateSelector, foreach: viewModelBackStack}">
</div> 
```

我的 templateSelector 方法如下所示：

```
this.templateSelector = function(viewModel)
{
    if (!_itemTemplate)
    {           
      _itemTemplate = ko.computed(function() {return this.template();}, viewModel);
    }

    return _itemTemplate();
}

var _itemTemplate; 
```

可以看出，我正在构建一个计算的 observable，它返回 viewModel 的模板。

我的视图模型如下所示：

```
function MyViewModel
{
    this.template = ko.observable("MyTemplate");
} 
```

由于完成了 ajax 调用，我正在更改模板的值，并且我看到计算的 observable 也被正确调用（我在其中放置了一个警报以验证它），但是 html 中的绑定不会更新模板我的视图模型。任何帮助将不胜感激。

更新：我发现了导致它不起作用的错误。基本上我在包含 knockout.js 之前包含了 jquery.tmpl 插件。删除 jquery.tmpl 就成功了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T15:26:00.000

我没有看到您的代码有问题，除非它位于您更新模板 observable 作为 AJAX 调用的结果的部分。确保您有对视图模型的引用，并将其设置为可观察对象`vm.template(newValue);`，而不是重新创建可观察对象。

这是您的代码工作：http: [//jsbin.com/ipijet/5/edit#javascript,html,live](http://jsbin.com/ipijet/5/edit#javascript,html,live)

`templateSelector`需要注意的一件事是绑定已经在计算的 observable 的上下文中执行，因此没有必要在函数 中创建自己的绑定。

您可以简单地创建一个直接返回您的 observable 的函数，例如：

```
this.getTemplate = function(data) {
   return data.template();
}; 
```

[http://jsbin.com/ipijet/3/edit#javascript,html,live](http://jsbin.com/ipijet/3/edit#javascript,html,live)

这是我不久前就该主题写的一篇文章：[http ://www.knockmeout.net/2011/03/quick-tip-dynamically-changed.html](http://www.knockmeout.net/2011/03/quick-tip-dynamically-changing.html)

# c# - 带有一些等于键/值的对列表？

> ID：11525463
> 
> 赞同：1
> 
> 时间：2012-07-17T15:07:49.713
> 
> 标签：c#, linq, data-structures

我需要一个配对列表，带有“字符串”、“字符串”。

试过：

```
Dictionary<string, string> Categories= new Dictionary<string, string>(); 
```

但不能添加“700”、“2”和“700”、“3”。我需要一个 Pair，我可以在需要时添加所有内容。就像一个可以包含 N 个 Vector(string, string) 的 Vector。我需要哪种结构？很快，因为我需要在 LINQ 中比较它们，之后：

```
myStructs = from MyObject s in MyObjects
               join c in Categories on s.IDCategory.UniqueID equals c.Key
               join d in Categories on s.Stars equals d.Value
               select s; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T15:09:08.757

尝试`List<Tuple<string, string>>`，或者为了提高可读性，只需创建一个新类型。

如果您需要它在 linq 期间有意义，您可以将元组转换为匿名类型（`let`在此处使用）为该类型提供一些合理的属性名称：

```
var items = new List<Tuple<string, string>>
    {
        new Tuple<string, string>("Adam", "1"), 
        new Tuple<string, string>("Adam", "2")
    };

var names = from i in items
            let person = new { Name = i.Item1, Number = i.Item2 }
            select person.Name; 
```

使其在 linq 查询期间更具可读性。

它的类型被大量使用，我建议使用更好的属性名称创建您自己的类型，以便清楚起见，如[Servy 的回答](https://stackoverflow.com/a/11525508/358221)。从长远来看，`Tuple<string, int, bool>`它*远*不如：

```
class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
    public bool LikesCake { get; set; }
} 
```

元组相等性基于它的所有属性与相同类型元组的实例的相等性。例如，`new Tuple("Adam", "1").Equals(new Tuple("Adam", "1"))`将是真的。

列表也不会停止重复项。如果您需要在所有属性中强制执行唯一性，那么`HashSet<Tuple<string, string>>`这就是您所需要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T15:11:16.383

只需创建自己的。

```
public class Pair
{
  public string First {get;set;}
  public string Second {get;set;}
} 
```

然后你可以有一个`List<Pair>`来保存你的数据。

有几个可能的库类，您可以根据自己的需要重新使用它们，但特别是如果这对实际上代表了某些东西（意味着您要将类和属性重命名为更有意义的东西），那么拥有它会很有用在它自己的类中表示这一点。如果您确实只想重用现有类型，那么`Tuple<string,string>`可能是最佳选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T15:12:33.133

`List<KeyValuePair<string, string>>`如果您使用 .NET 3.5 或更低版本，A可能会运行良好，如果 4 或更高版本，`List<Tuple<string, string>>`将是赢家。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T15:09:15.633

尝试使用`List<KeyValuePair<string, string>>`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T15:10:35.497

A`Dictionary`是散列位置键，因此字典中不能有重复项。您可以`<string,string>`使用 a`KeyValuePair`或`Tuple`

# python - os.system 命令

> ID：11525470
> 
> 赞同：0
> 
> 时间：2012-07-17T15:08:47.057
> 
> 标签：python, python-2.7, os.system

由于旧的 Python 限制，我正在开发一个需要使用 os.system 的程序。目前我被困在一个小地方。

```
os.system("C:\\FIOCheck\\xutil.exe  -i get phy" +HBEA + ">C:\\FIOCheck\\HBEAResult.txt") 
```

这是我正在尝试解决的一段代码。它将访问具有一些参数的外部程序。HBEA 是我试图传递的变量（在程序的前面收到）。然后，该程序获取 .exe 创建的任何内容并将其通过管道传输到外部文件。此时，变量 HBEA 没有被传递到命令行，因此 .exe 永远不会运行，这会导致 .txt 为空白。由于文件是空白的，我无法从中获取数据，因此无法完成程序。

有任何想法吗？

编辑：所以我根据一些建议尝试了以下代码：

```
cmd = "C:\\FIOCheck\\xutil.exe  -i get phy " +HBEA + ">C:\\FIOCheck\\HBEAResult.txt"
print cmd
os.system(cmd) 
```

生成了以下输出：

```
50012BE00004BDFF  #HBEA variable
C:\FIOCheck\xutil.exe  -i get phy 50012BE00004BDFF>C:\FIOCheck\HBEAResult.txt #the cmd  var 
```

但是，这仍然没有传递价值。~~HBEA 变量是否太长？~~

**解决了**

该程序对最佳答案进行了一些编辑。命令正确传递，但是我格式化它的方式不正确。新格式如下所示：

```
cmd = "C:\\FIOCheck\\xutil.exe -i " + HBEA + " get ver" + ">C:\\FIOCheck\\HBEAResult.txt"
os.system(cmd) 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:12:40.983

```
os.system("C:\\FIOCheck\\xutil.exe  -i get phy" +HBEA + ">C:\\FIOCheck\\HBEAResult.txt") 
```

那应该是

```
os.system("C:\\FIOCheck\\xutil.exe  -i get phy " +HBEA + ">C:\\FIOCheck\\HBEAResult.txt") 
```

你总是可以先构建字符串

```
cmd = "C:\\FIOCheck\\xutil.exe  -i get phy " +HBEA + ">C:\\FIOCheck\\HBEAResult.txt"
print cmd
os.system(cmd) 
```

# ruby-on-rails - 压缩目录中的所有文件

> ID：11525484
> 
> 赞同：1
> 
> 时间：2012-07-17T15:09:16.417
> 
> 标签：ruby-on-rails, ruby

我正在使用 RubyZip 尝试压缩目录中的所有文件。这是我的课：

```
require 'zip/zip'
require 'zip/zipfilesystem'

class Lesson < ActiveRecord::Base
    attr_accessible :attachment, :course_id, :goal, :title, :assets_attributes
    belongs_to :course
    has_many :assets, :dependent => :destroy
    accepts_nested_attributes_for :assets, :reject_if => lambda { |a| a[:asset_file_name].blank? }

    def bundle
    bundle_filename = "public/attachments/#{self.id}/#{self.id}.zip"

    Zip::ZipFile.open(bundle_filename, Zip::ZipFile::CREATE) {
    |zipfile|
        Dir.foreach("public/attachments/#{self.id}") do |item|
        zipfile.add( item, "public/attachments/")
      end
   }

    File.chmod(0644, bundle_filename)
    self.save
    end
end 
```

目前，这是使用我想要的名称创建一个 zipfile，但目录中的文件没有被正确压缩。它们不是作为文件压缩，而是作为目录压缩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:15:15.097

如果您在 Linux 服务器上运行，您可以尝试[unix_utils](https://github.com/seamusabshere/unix_utils)：

```
tmp_filename = UnixUtils.zip "public/attachments/#{self.id}"
bundle_filename = "public/attachments/#{self.id}/#{self.id}.zip"
FileUtils.mv tmp_filename, bundle_filename
File.chmod 0644, bundle_filename 
```

第一行将所有内容压缩到 tmp 目录中`public/attachments/#{self.id}`的文件 ( ) 中。`tmp_filename`然后你移动这个文件并将其重命名为`bundle_filename`.

# lua - xml 与 Lua 脚本合并

> ID：11525490
> 
> 赞同：-1
> 
> 时间：2012-07-17T15:09:38.890
> 
> 标签：lua

我有一个任务......当然我不希望你们给我现成的解决方案，但一些大纲会非常有帮助。请帮忙，因为 Lua 对我来说是一门新语言。所以任务是：

1.  我有三个 xml 文件。所有 xml 文件都存储有关相同对象的数据，例如设备。除设备名称外，参数、xmls 存储不同。
2.  现在我想制作一个通用的 xml 文件，其中包含有关设备的所有数据（所有参数）。
3.  请注意，名称将是唯一的，因此它将作为关键参数。
4.  我想用 Lua 脚本来完成这个任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:14:00.007

Lua“默认”不做 xml 。它是一种被认为“嵌入”到其他系统中的语言，因此您“嵌入”它的系统可能会解析 xml 文件并将它们传递给 Lua。如果是这种情况，请将 xml 转换为主机系统上的 Lua 表，然后将它们提供给 Lua，在 Lua 中对其进行操作，并返回生成的 Lua 表，以便主机将其转换为 xml。

如果可用，另一个选项是安装用于解析 xml 的二进制库，例如[luaxml](http://viremo.eludi.net/LuaXML/)。如果你能够将它安装在你的系统中，你应该能够或多或少地直接从 Lua 中轻松地操作 xml 文件。但这种可能性取决于您嵌入 Lua 的系统；许多系统不允许安装额外的库。

# java - Java Eclipse：以编程方式导入插件和片段

> ID：11525492
> 
> 赞同：6
> 
> 时间：2012-07-17T15:09:49.143
> 
> 标签：java, eclipse, eclipse-plugin

我需要在我的工作区中以编程方式导入一个 .jar，就像我使用菜单时所做的那样：
导入 -> 插件开发 -> 插件和片段。

在这里，我找到了导入 java 项目的代码：

> IProjectDescription 描述 = ResourcesPlugin.getWorkspace().loadProjectDescription(new Path("PROJECT_PATH/.project"));
> 
> IProject 项目 = ResourcesPlugin.getWorkspace().getRoot().getProject(description.getName());
> 
> 项目.创建（描述，空）；
> 项目.open(null);

但我在 .jar 文件上没有 .project 。你能帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:29:26.347

你很接近，完成所有这些，然后创建一个`IFile`对象并将 Jar 文件读入`IFile`对象。该[文档](http://help.eclipse.org/juno/topic/org.eclipse.platform.doc.isv/guide/resInt_filesystem.htm?cp=2_0_10_1)有一些有用的代码片段向您展示如何执行此操作。

# internet-explorer - QTP中capturebitmap捕获的图像在不同的机器上是不同的

> ID：11525494
> 
> 赞同：0
> 
> 时间：2012-07-17T15:09:58.517
> 
> 标签：internet-explorer, vbscript, qtp, image-capture

我使用 CaptureBitmap 方法将图像从 IE 保存到本地，然后用 JAVA 处理它们。我在办公室的两台机器上测试我的代码，效果很好。但是后来，我把它复制到另一个上，QTP捕获的图像不同，我不知道为什么，但是尺寸不同而尺寸保持不变......

那么有人遇到过这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:25:24.057

终于找到原因了，抱歉忘记更新了。

**我在“工具”**选项卡中取消选中**“以兼容性显示模式显示Intranet站点”**选项（我不知道它是否用英文命名，因为我的系统是法语）然后选项**“兼容性显示的参数”**在下拉菜单。

# html - 简单的 CSS 居中（在 div 中居中文本 + 高图）

> ID：11525498
> 
> 赞同：1
> 
> 时间：2012-07-17T15:10:14.677
> 
> 标签：html, css, xhtml, css-float

我一直在尝试做以下事情。我有一个`<div>`元素跨越其父 div 的整个宽度。在这里面我想放置 A. 一些文本和 B. 一个图像。

A.左侧的一些文本（松散文本或包含在`<p>`、`<h2>`或`<span>`、 或元素中的文本）。`<div>`

B. 通过`<img>`高度和宽度都已知的元素定义的图像。

其他需求：

1.  `<img>`文本和元素之间必须有 12px 的空间。

2.  重要提示：来自 A. 的文本和来自 B. 的图像都必须作为一个组居中。

3.  A. 中的文本必须在其封闭空间中垂直居中。

我怎样才能达到这个效果？我尝试了不同的方法，但无法将图像放置在文本的右侧，也无法使文本 A. 垂直居中。

有人知道如何解决这个简单的问题吗？

* * *

谢谢大家的回答，无论如何，似乎CSS让简单的事情变得如此困难：

```
 div#content_whatsnew, div#content_bestsellers { clear: both; height: 108px; font-size: xx-large; text-transform: uppercase; margin-left: 380px; }
  div#content_whatsnew p, div#content_bestsellers p { float: left; height: 108px; line-height: 108px; padding: 8px 12px 0px 0px; color: black; }
  div#content_whatsnew img, div#content_bestsellers img { float: left; height: 108px; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:21:51.810

Is this what you are trying to achieve? [http://dabblet.com/gist/3130292](http://dabblet.com/gist/3130292)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:21:13.743

This should work:

```
<div class="my-outer-container">
 <div class="my-inner-container">
  <div class="my-text">Here is my text, it is lovely text.</div>
  <img src="my-image.jpg" alt="" class="my-image" />
 </div>
</div>

.my-outer-container {
 width:auto;
 text-align:center;
}

.my-inner-container {
 width:XXXpx; /* enter whatever the width you want here is */
 margin:0 auto;
 overflow:auto;
}

.my-text {
 width:XXXpx; /* enter whatever the width you want here is */
 float:left;
 margin-right:12px;
}

.my-image {
 width:XXXpx; /* enter whatever the width you want here is */
 height:XXXpx; /* enter whatever the height you want here is */
 float:left;
} 
```

Then maybe use the vertical centering tip on the link provided above by @biziclop

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T15:21:38.067

Is this about right?

[http://jsfiddle.net/89twb/2/](http://jsfiddle.net/89twb/2/)

For aligning text, [check this out](http://www.w3schools.com/cssref/pr_text_text-align.asp).

And for placing elements next to each other, [this](http://www.w3schools.com/cssref/pr_class_float.asp).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T15:27:55.210

为了使 div 居中，它必须具有固定的宽度。如果它跨越其父 div 的宽度，则只能将其居中。所以在我看来最好的解决方案是将你的文本放在一个固定宽度的左浮动div中，并对你的图像做同样的事情，然后把它们都放在一个固定宽度的保持器div中，它以边距：自动；

这是一个例子：[http ://dabblet.com/gist/3130148](http://dabblet.com/gist/3130148)

编辑 - 我通过将文本放在表格中垂直居中。表格是跨浏览器垂直居中的唯一可靠方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-17T15:29:26.367

最直观的方法是使用 'vertical-align:middle;' 但它往往不是你想要的工作方式。

我做了一些研究，从这里找到了这段代码。[http://phrogz.net/css/vertical-align/index.html](http://phrogz.net/css/vertical-align/index.html)

希望这可以帮助！

```
<style type="text/css">
    #myoutercontainer { position:relative }
    #myinnercontainer { position:absolute; top:50%; height:10em; margin-top:-5em }
</style>

<div id="myoutercontainer">
    <div id="myinnercontainer">
        <p>Hey look! I'm vertically centered!</p>
        <p>How sweet is this?!</p>
    </div>
</div> 
```

# xml - Ant替换xml中的特定事件

> ID：11525500
> 
> 赞同：0
> 
> 时间：2012-07-17T15:10:28.583
> 
> 标签：xml, ant, replace

我有如下的 xml，我想使用 Ant 更改某个值的特定出现（尝试了 replaceregexp，但没有太大帮助，因为它发现了多次出现，replace 也替换了多次出现）并且我们没有集成 xmltask。

```
<databases>
 <database>
    <server>mssql_1</server>
    <port>1433</port>
   <sid_instance>foobar</sid_instance>
   <path></path>
   <hostuser>sa</hostuser>
   <hostpwd>password</hostpwd>
 </database>
<database>
  <server>oracle_1</server>
  <port>1521</port>
  <sid_instance>foobar</sid_instance>
  <path>C:\\oracle\\oradata\\foobar</path>
  <hostuser>system</hostuser>
  <hostpwd>password</hostpwd>
 </database>
</databases> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T18:34:18.760

我希望[这个链接](http://today.java.net/pub/a/today/2006/11/01/xml-manipulation-using-xmltask.html#replacing-xml)对你有帮助。它解释了如何使用`xmlTask`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:13:19.933

我会插入[XMLTask](http://www.oopsconsultancy.com/software/xmltask/)，因为这*正是*它的设计目的！您不能将其加载到（例如）您的主目录并根据[此 SO 答案](https://stackoverflow.com/a/4511337/12960)提供类路径引用吗？

（以 XMLTask 的作者身份发言）

# javascript - Cordova 1.9 和原生控件插件兼容性

> ID：11525503
> 
> 赞同：0
> 
> 时间：2012-07-17T15:10:38.850
> 
> 标签：javascript, cordova

我看到原生控件插件在 1.6 版之前的 cordova/phonegao 上运行良好。但我不能再用这段代码让它工作了：

```
newLoc = location.href.substring(0, location.href.lastIndexOf("/") + 1);
// Initializating TabBar
nativeControls = window.plugins.nativeControls;
nativeControls.createTabBar();
// Back Button
nativeControls.createTabBarItem("page1", "Page 1", "www/images/pound.png", {
    "onSelect": function() {
        $.mobile.changePage("#page1", {
            transition: 'reverse slide'
        });
        nativeControls.setNavBarTitle("Page 1");
        nativeControls.selectTabBarItem("page1");
        selectedTabBarItem = "page1";
    }
});
// Home tab
nativeControls.createTabBarItem("page2", "Page 2", "www/images/pound.png", {
    "onSelect": function() {
        if (selectedTabBarItem == "page1") {
            $.mobile.changePage("#page2", {
                transition: 'slide'
            });
        } else {
            $.mobile.changePage("#page2", {
                transition: 'reverse slide'
            });
        }
        nativeControls.setNavBarTitle("Page 2");
        nativeControls.selectTabBarItem("page2");
        selectedTabBarItem = "page2";
    }
});
// About tab
nativeControls.createTabBarItem("page3", "Page 3", "www/images/question.png", {
    "onSelect": function() {
        $.mobile.changePage("#page3", {
            transition: 'slide'
        });
        nativeControls.setNavBarTitle("Page 3");
        nativeControls.selectTabBarItem("page3");
        selectedTabBarItem = "page3";
    }
});
// Compile the TabBar
nativeControls.showTabBar();
nativeControls.showTabBarItems("page1", "page2", "page3");
selectedTabBarItem = "page1";
nativeControls.selectTabBarItem("page1");
// Setup NavBar
nativeControls.createNavBar();
nativeControls.setNavBarTitle("Page 1");
nativeControls.setupLeftNavButton("?", "", "onLeftNavButton");
//nativeControls.hideLeftNavButton();
nativeControls.setupRightNavButton("About", "", "onRightNavButton");
nativeControls.showNavBar();
} 
```

查看js文件，现在似乎需要cordova.exec();

有人搞定了吗？插件 iOS 和 iPhone 有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:18:04.567

错误的原因是`window.plugins`Cordova 不再支持该错误。

解决方案：

如下修改您的调用脚本（可能在您的函数中 -如果您使用一个`onDeviceReady()`，这可能在您的文件中：`controls.js`

```
// nativeControls = window.plugins.nativeControls; // get rid of (or comment out)
   nativeControls = new NativeControls(); // use this line instead 
```

修复并使用 Cordova 2.0 :-)

希望有帮助

附录：实际上这只会让你走上一段路——你仍然需要编辑 xCode 文件`NativeControls.m`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:32:50.127

这是关于此的 GitHub 项目： [https ://github.com/zSprawl/NativeControls](https://github.com/zSprawl/NativeControls)

只需下载项目并在 xcode 4.x 中打开它希望这会有所帮助！

# java - Jersey @Produces Apache XSSFWorkbook

> ID：11525510
> 
> 赞同：2
> 
> 时间：2012-07-17T15:11:23.857
> 
> 标签：java, apache, jersey, apache-poi, xssf

我正在尝试使用 Jersey 制作一个 XSSFWorkbook。

我尝试了以下标题，但似乎没有任何效果：

@Produces("应用程序/xml")

@Produces("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")

@Produces("应用程序/vnd.openxml"

全部返回以下错误：

> 原因：com.sun.jersey.api.MessageException：Java 类 org.apache.poi.xssf.usermodel.XSSFWorkbook 和 Java 类型类 org.apache.poi.xssf.usermodel.XSSFWorkbook 和 MIME 的消息体编写器未找到媒体类型 application/xml ... 37 更多

本质上，我有一个创建 XSSFWorkbook 的函数，我想把它写出来供用户下载。我能够做到这一点：

```
 /*
    HttpServletResponse response;
    XssfWorkbook excel.write(response.getOutputStream());
    */
    @GET
    @Path("/excel/")
    @Produces("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")
    public XSSFWorkbook exportReadingsAsExcel(@Context HttpServletResponse webResponse)
    {
        XSSFWorkbook excel = createExcel();
        setHeader(webResponse, "export.xlsx");
    try {
        excel.write(webResponse.getOutputStream());
    } catch (IOException e) {
        e.printStackTrace();
    }
        return excel; //ERROR IS HERE
    } 
```

但由于其他原因，我还需要返回 XSSFWorkbook 的函数。我希望我可以让泽西写出来，而不是使用网络响应。

感谢您的帮助。

（我对 Jersey 和 XSSF 有点陌生，所以如果我对我的术语或理解不满意，请多多包涵）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T18:02:35.787

您需要为 XSSFWorkbook 编写自定义编写器（或找到一个）并将其插入 Jersey 中，例如：

```
@Provider
@Produces("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")
public class CustomXSSFWorkbookWriter implements MessageBodyWriter {
    //This methode is the most important for you
    @Override
public void writeTo(Object target, Class type, Type genericType,
        Annotation[] annotations, MediaType mediaType,
        MultivaluedMap httpHeaders, OutputStream outputStream)
        throws IOException { 
```

然后你必须`web.xml`像这样将这个类的包添加到你的：

```
<servlet>
    <servlet-name>Jersey REST Service</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.packages.to.your.views;com.packages.to.your.providers</param-value>
    </init-param> 
```

Jersey 将由您自己的作家来制作这种特定格式。抱歉，我对 XSSFWorkbook 一无所知。

希望能解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T22:00:27.960

我能够通过 Jersey 返回 StreamingOutput 来解决问题。然后我将 StreamingOutput 的字节写到一个 OutputStream 中。我从 OutputStream 中获得了 byte[]，将该 OutputStream 写入 InputStream，然后从该 InputStream 创建了一个新的 XSSFWorkbook。我知道这是一种非常肮脏的做法。我将尝试上面 -Camille R 建议的方式，希望它是一个更清洁的解决方案。但与此同时...

```
 @GET
    @Path("/excel/")
    @Produces("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")
    public StreamingOutput exportReadingsAsExcel(@Context HttpServletResponse webResponse)
    {
        XSSFWorkbook excel = createExcel();
        setHeader(webResponse, "export.xlsx");
        StreamingOutput streamOutput = new StreamingOutput(){
            public void write(OutputStream output) throws IOException, WebApplicationException {
                try {
                    excel.write(output);
                } catch (Exception e) {
                    throw new WebApplicationException(e);
                }
            }
        };
        return streamOutput;
      } 
```

关于接收函数：

```
private XSSFWorkbook createExcel(StreamingOutput mStream){
        XSSFWorkbook excel = new XSSFWorkbook();
        try {
            ExcelOutputStream out = new ExcelOutputStream();
            excel.write(out);
            ByteArrayInputStream inputStream = new ByteArrayInputStream(out.getBytes());
            excel = new XSSFWorkbook(inputStream ;
        } catch (WebApplicationException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return result;
    }
    class MyOutputStream extends OutputStream {
        private ByteArrayOutputStream myByteArray;
        public MyOutputStream(){
            myByteArray = new ByteArrayOutputStream();
        }
        @Override
        public void write(int b) throws IOException {
            // TODO Auto-generated method stub
            myByteArray.write(b);
        }
        public byte[] getBytes(){
            return myByteArray.toByteArray();
        }
    } 
```

# android - 在 Android 中将纬度和经度添加到 Google 地方信息 URL

> ID：11525511
> 
> 赞同：0
> 
> 时间：2012-07-17T15:11:29.177
> 
> 标签：android, google-places-api

我正在努力在我的 Android 应用中寻找附近的地方。我可以找到当前的纬度和经度作为双精度，然后将双精度转换为字符串以显示在文本视图中（只是为了向自己证明它正在工作）。我遇到的问题是通过纬度。＆ 长。字符串到地方 URL。当我对 lat 使用固定值字符串时，URL 会显示 JSON 数据。而且很长，但是当我尝试将获得的转换为字符串的双精度值传递到 URL 时，它会返回 INVALID_REQUEST。这是它的样子：

```
 Location currentLocation;
double currLatitude;
double currLongitude;
String latString; 
String longiString;
String latString2 = "30.4335320";
String longiString2 = "-97.9822360";

    towers = locMan.getBestProvider(criteria, true);
    currentLocation = locMan.getLastKnownLocation(towers);
    currLatitude = currentLocation.getLatitude();
    currLongitude = currentLocation.getLongitude();
    latString = String.valueOf(currLatitude);
    longiString = String.valueOf(currLongitude);
    latiText.setText(latString);
    longiText.setText(longiString); 
```

我想也许我没有在这里正确地将双打解析成字符串？

```
 latString = String.valueOf(currLatitude);
    longiString = String.valueOf(currLongitude); 
```

因为在下面的 URL 中，当我使用解析`latString, longiString`的值时，我得到 INVALID_REQUEST，但是如果我传递`latString2, longiString2`给定的值，则 URL 将显示 JSON 数据。这是网址：

```
 String tURL="https://maps.googleapis.com/maps/api/place/search/json?"
+ "location=" + latString + "," + longiString
+ "&radius=25000&"
+ "types=church&name=baptist&sensor=false&key="
+ myPlaceKey; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:49:18.617

我想通了。我的问题是返回 URL 的活动是与 URL 字符串生成器不同的活动。而返回Activity的URL并没有调用我获取经纬度的方法，所以我认为返回Activity获取的URL基本上坐标为“null”。所以我结合了这两个活动，所以现在获得了坐标，然后构建了 URL，然后 URL 结果显示在一个文本视图中，全部在一个活动中 - 它工作！我真是个白痴！

# javascript - 创建透明圆柱体

> ID：11525513
> 
> 赞同：5
> 
> 时间：2012-07-17T15:11:39.713
> 
> 标签：javascript, webgl, three.js

我正在尝试创建一个透明圆柱体。我试过设置透明、不透明度等，但似乎无法让它工作。有没有办法做到这一点？我需要加载带有 Alpha 通道的虚拟纹理吗？有没有更简单的方法？

```
material = new THREE.MeshBasicMaterial({wireframe: true});
material.transparent = true;
mesh = new THREE.Mesh(new THREE.CylinderGeometry(4, 4, 50, 8, 1, true), material);
scene.add(mesh); 
```

更新：我已将代码更改为以下，但以这种方式使用 ShaderMaterial 似乎是错误的。但它的工作...

```
material = new THREE.ShaderMaterial({wireframe: true, transparent: true});
mesh = new THREE.Mesh(new THREE.CylinderGeometry(4, 4, 50, 8, 1, true), material);
scene.add(mesh); 
```

更新：这是图片。

*   我无法正确添加图像或添加链接，因为我需要 11 的声誉，并且只有 10 个，所以我添加了损坏的链接。在每个网址前添加“h”。

ttp://img692.imageshack.us/img692/6412/shadermaterial.png 使用ShaderMaterial，您会看到被透明圆柱体包围的矩形灰色Sprite。

[http://img855.imageshack.us/img855/3988/opacity00.png](http://img855.imageshack.us/img855/3988/opacity00.png) 使用不透明度为 0.0 的 MeshBasicMaterial。

[http://img27.imageshack.us/img27/6087/opacity05.png](http://img27.imageshack.us/img27/6087/opacity05.png) 使用不透明度为 0.5 的 MeshBasicMaterial。

[http://img837.imageshack.us/img837/8043/opacity10.png](http://img837.imageshack.us/img837/8043/opacity10.png) 使用 MeshBasicMaterial 和 Opacity 1.0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T17:58:55.080

不应该是这个吗？

```
material = new THREE.MeshBasicMaterial( { wireframe: true, opacity: 0.5 } ); 
```

# php - 为什么我不能使用 openssl_encrypt？

> ID：11525524
> 
> 赞同：3
> 
> 时间：2012-07-17T15:12:31.217
> 
> 标签：php, openssl

我正在尝试在客户端的 Web 服务器上实现对[openssl_encrypt](http://www.php.net/manual/en/function.openssl-encrypt.php)的调用，但我遇到了一个致命错误`Unknown function: openssl_encrypt()`。我认为要求是 PHP 5.3.0 及更高版本？从[phpinfo() 转储](http://bwagnerdev.com/serverinfo.html)看，服务器正在运行 5.3.3。

是什么赋予了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T15:15:55.557

要使用这些`openssl_`功能，您必须**a)**安装[OpenSSL](http://www.php.net/manual/en/openssl.requirements.php)，并且**b)**构建支持 OpenSSL 的 PHP。请参阅[PHP OpenSSL 文档](http://www.php.net/manual/en/openssl.installation.php)。

> 要使用 PHP 的 OpenSSL 支持，您还必须编译 PHP`--with-openssl[=DIR]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:17:56.147

[http://www.php.net/manual/en/openssl.requirements.php](http://www.php.net/manual/en/openssl.requirements.php)

> 为了使用 OpenSSL 功能，您需要安装 » OpenSSL 包。版本 4.0.5 和 4.3.1 之间的 PHP 将适用于 OpenSSL >= 0.9.5。其他版本（PHP <=4.0.4 和 >= 4.3.2）需要 OpenSSL >= 0.9.6。

[http://www.php.net/manual/en/openssl.installation.php](http://www.php.net/manual/en/openssl.installation.php)

> 要使用 PHP 的 OpenSSL 支持，您还必须编译 PHP --with-openssl[=DIR] 。

# c# - 无法在VS C# express中将glade的资源文件插入到项目中

> ID：11525526
> 
> 赞同：0
> 
> 时间：2012-07-17T15:12:32.153
> 
> 标签：c#, glade

我正在关注本指南：[http](http://www.mono-project.com/GtkSharpBeginnersGuide) ://www.mono-project.com/GtkSharpBeginnersGuide它告诉我创建一个 glade 文件（在我的情况下为 main.glade），但是当我将它插入到我在 Visual Studio 的项目中时，我总是得到这个例外：

无法获取资源文件'main.glade' 参数名称：resource_name

我试图将文件标记为嵌入式资源，但没有帮助。如何配置文件以编译为嵌入式资源，以便林间空地可以访问它？指南没有提到这部分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:17:35.893

这是不可能的，因为 Visual Studio 的快速版本不支持加载项，而 Gtk 需要 VS 加载项才能在 VS 中工作。您可以尝试使用 Monodevelop 或命令行编译器。

从链接：

> Windows：如果您使用的是 Windows，请从该下载页面获取集成安装程序的副本。您可能还想获取 Visual Studio 的 Gtk# 集成包的副本，它允许您将 GTK# 与 Microsoft 的 Visual Studio 一起使用，而无需安装 Mono 的其余部分。

# php - 正则表达式替换 html 标签和

> ID：11525527
> 
> 赞同：0
> 
> 时间：2012-07-17T15:12:31.597
> 
> 标签：php, regex, preg-replace

我有一些 html 字符串，我想用它`preg_replace`来替换

```
<table border="0" cellpadding="0" cellspacing="0"> 
```

...和...

```
</table> 
```

有什么想法吗？

```
"/<table border=\b[^>]*>(.*?)<\/table>/ims" 
```

对我不起作用:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:25:31.653

环顾四周应该可以帮助你

```
(?<=<table).*(?=</table>) 
```

在这里查看[结果](http://regexr.com?31i9m)。

**PS**：如果您想忽略某些地方的空格，请在`\s`需要的地方添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T06:37:49.623

只需稍作修正：

```
$html = preg_replace("'([<]table border=[^>]*[>]).*?([<]/table[>])'ims", "\\1".$your_stuff."\\2", $html); 
```

注意：我以前把`<`和`>`字符放在方括号中，只是一种习惯。

# apache - 可以在 Location 指令下指定自定义 HTTP 错误 500 吗？

> ID：11525534
> 
> 赞同：0
> 
> 时间：2012-07-17T15:12:53.700
> 
> 标签：apache, weblogic, errordocument

提前抱歉，我是 HTTP 服务器的新手。

我想从 Oracle HTTP 服务器（OHS，基于 Apache 构建）自定义错误 500。我想这应该从`ErrorDocument`指令中完成，但我从未找到任何用于自定义 Webspace 错误的示例，只有文件系统之一（在`Directory`或`File`指令下）。

更准确地说，这是使用的默认配置的一部分：

```
RedirectMatch 301 ^/analytics$ /analytics/

## Context roots for BI EE
<Location /analytics >
 SetHandler weblogic-handler
 WebLogicCluster miaibv194.mia.michelin.com:9704
</Location> 
```

如果我理解得很好，`RedirectMatch`and`Location`指令用于将 /analytics 之类的 URL 传递给 Weblogic。是否可以在 /analytics 等 URL`ErrorDocument`下添加`Location`自定义错误 500 ？

我天真地尝试过，但无法使其发挥作用。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:34:21.447

嗯，我最初试图实现的是在 OBIEE 11g（它使用 WebLogic，在我们的例子中是一个 OHS）中自定义 HTTP 错误 500。我打开了一个 SR 来尝试使用 OHS 实现这一目标，但它失败了（Oracle 的人告诉我我必须在应用程序级别这样做），所以我打开了一个新的 SR 来使用 WebLogic 本身来完成它，它给出了以下内容：

• 在您的Oracle BI 主目录中找到analytics.ear。这将是 /Oracle_BI1（或您在安装时选择命名 Oracle BI 主目录的任何名称）/bifoundation/analytics.ear。因此，在我们的示例场景中，这将位于：C:\OBI\Oracle_BI1\bifoundation\jee\analytics.ear • 制作 ear 文件的备份副本，以便您有一个还原点可以参考（并恢复到) 如果需要 请注意，我们不支持更新analytics.ear 文件，您必须停止并删除以前的analytics.ear 文件，然后再部署新的analytics.ear 文件。

• 使用Java jar 工具将analytics.ear 文件解压到一个临时位置。使用命令行选项 xvf 将内容提取到当前工作目录（例如 C:\OBI\jdk160\bin\jar –xvf C:\OBI\Oracle_BI1\bifoundation\jee\analytics.ear），因此您可能需要创建一个临时目录来保存解压后的内容，并在运行命令之前切换到该目录。

ear 包含一个 META-INF 目录和两个 war 文件，analytics.war 和 analytics-ws.war

• 在 META-INF 目录中，有一个 MANIFEST.MF 文件，在文件末尾添加以下行： Weblogic-Application-Version: 11.1.1 注意，据报道，当重新应用这些步骤时，如下BI 11.1.1.5.0 BP2 补丁的应用，更新 MANIFEST.MF 的这个步骤应该被忽略，因为新的 analytics.ear 文件没有版本化。

• 将analytics.war 文件解压到第二个临时位置；它包含一个default.jsp 文件和五个顶级目录，其中一个称为WEB-INF。

• 在WEB-INF 目录中，您将找到一个名为web.xml 的现有文件。编辑 web.xml，例如添加：

```
<error-page>
<error-code>500</error-code>
<location>/500error.jsp</location>
</error-page> 
```

确保没有隐藏字符并检查引号是否适合您的平台。

• 编辑完 web.xml 后，重新打包 analytics.war 文件，再次使用 jar 工具，然后将其重新打包回 analytics.ear 文件。接下来我们需要将 analytics.ear 文件重新部署到 Weblogic

• 登录 Weblogic 管理控制台并单击部署

• 在左上角的更改中心，点击“锁定和编辑”</p>

• 找到分析应用程序并单击它旁边的复选框，然后单击更新按钮

• 在更新应用程序助手屏幕中，确保部署路径与您刚刚更新的 ear 文件相同，如果不更改路径

• 单击下一步，然后单击完成

• 在左上角的更改中心，单击“激活更改”以保存更改。如果您尚未这样做，请重新启动 Weblogic 管理服务器和所有托管服务器

# javascript - Jquery 函数到 javascript 函数

> ID：11525536
> 
> 赞同：-1
> 
> 时间：2012-07-17T15:13:10.137
> 
> 标签：javascript, jquery

我有功能可以正常工作。现在客户的要求是他不想为js使用任何其他文件，所以我把这个函数改成纯JavaScript，即没有jQuery。我很困惑从哪里开始。

你们能告诉我一个类似于 jQuery`.size`方法的 JavaScript 函数吗？

[http://jsfiddle.net/CgDS6/8/](http://jsfiddle.net/CgDS6/8/)

```
 <div class="wrap">
        <ul>
            <li>
                <div class="first">
                    <div class="second"></div>
                </div>
            </li>
            <li>
                <div class="first">
                    <div class="active"></div>
                </div>
            </li>
            <li>
                <div class="first">
                    <div class="second"></div>
                </div>
            </li>
        </ul>
        <a href="#" id="next">Next</a>
    </div>

var $firstSecond = $('.second').eq(0);
$('#next').click(function() {
    var $active = $('.active');
    var $nextSecond = $active.closest('li').next().find('.second');
    $active.toggleClass('active second');
    if ($nextSecond.size() != 0) {
        $nextSecond.toggleClass('second active');
    } else {
        $firstSecond.toggleClass('second active');
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:33:01.257

这在 IE6+ 中受支持。您也可以使用事件处理程序来执行此操作，但我不想实现跨浏览器事件处理程序，并决定使用以下方法快速而肮脏地执行此操作`onclick`：

```
function getElementsByClassName(cn, rootNode) {
  if (!rootNode) {
    rootNode = document;
  } 
  for (var r=[], e=rootNode.getElementsByTagName('*'), i=e.length; i--;) {
    if ((' '+e[i].className+' ').indexOf(' '+cn+' ')>-1) {
      r.push(e[i]); 
    }
  }
  return r;  
}

document.getElementById('next').onclick = function(){
    var active = getElementsByClassName('active')[0],
        lis = getElementsByClassName('wrap')[0].getElementsByTagName('li'),
        nextSecond;

    for (var i = 0, il = lis.length; i < il; i++) {
        if (getElementsByClassName('active', lis[i]).length) {
            nextSecond = i + 1 < il ?
                         getElementsByClassName('second', lis[i + 1])[0] :
                         getElementsByClassName('second', lis[0])[0]
        }
    }

    active.className = 'second';
    nextSecond.className = 'active';
}; 
```

## [这是一个小提琴](http://jsfiddle.net/QGUwc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:28:10.447

这是纯javascript的解决方案：

```
document.getElementById('next').onclick =  function() {
   var divs = document.getElementsByClassName('second');
   var active = document.getElementsByClassName('active')[0];

   for(var i = 0; i < divs.length; i++) {
     if(divs[i]==active) divs[i].className = 'second';
     if(divs[(i)%divs.length] == active) divs[(i+1)%divs.length].className = 'second active';
   }    
} 
```

[JSFIDDLE](http://jsfiddle.net/CgDS6/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T15:21:00.467

首先，**在您的特定情况下**，在 Javascript 中调整 jQuery 对象大小的`size`方法等效于，因为 jQuery DOM 选择的对象是数组。**[`length`](http://www.w3schools.com/jsref/jsref_length_array.asp)**

 **您可以查看[jQuery 源代码](http://code.jquery.com/jquery-1.7.2.js)以了解他们在 javascript 中所做的工作以使 jQuery 工作。Command-F 将为您找到所有不同的命令。

如果只是客户端想要减小的文件大小，请复制文件中的 jQuery 源代码。您还可以在开发环境中保留不同的文件并将它们全部复制[并缩小以](http://en.wikipedia.org/wiki/Minification_%28programming%29)供生产使用，这是一种常见的做法，因此您可以两全其美。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T15:25:01.260

[http://jsfiddle.net/DQSna/3/](http://jsfiddle.net/DQSna/3/)

```
var firstSecond = document.querySelector(".second");

document.querySelector("#next").addEventListener("click", function() {

    function toggleClasses( node ) {
        node.classList.toggle("active");
        node.classList.toggle("second");    
    }

    var active = document.querySelectorAll(".active"),
        nextSecond = [].map.call( active, function( node ) {
            while (node && node.nodeName.toLowerCase() !== "li") {
                 node = node.parentNode;   
            }
            return node && node.nextElementSibling && node.nextElementSibling.querySelector( ".second" ) || null;
        }).filter(Boolean);

        [].forEach.call( active, toggleClasses );

        if( nextSecond.length ) {
            [].forEach.call( nextSecond, toggleClasses );
        }
        else {
            toggleClasses( firstSecond );
        }
}, false );​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T15:25:45.427

您在普通 DOM 方法中的 jQuery（请注意，IE 不支持它们中的大多数）：

```
var firstSecond = document.querySelector(".second'");
document.getElementById("next").addEventListener("click", function(e) {
    var active = document.querySelector(".active"),
        nextSecond = active.parentNode.parentNode.nextElementSibling.querySelector(".second");
    active.classList.remove("active");
    active.classList.add("second");
    (nextSecond || firstSecond).classList.remove("second");
    (nextSecond || firstSecond).classList.add("active");
}, false); 
```

请注意，这需要元素`firstSecond`,`#next`并且`active`总是可以找到 - 如果没有，您需要添加一个检查它们是否不是`null`。

当您：

*   将`active`用作 id，我猜它是唯一的（这只会使选择元素更容易）
*   会将`li`s 本身设置为活动状态，我猜该状态对整个分支都很重要（因此允许更多样式）
*   不会`second`从 div 中删除该类-它们仍然是第二个（*并且*是活动的）
*   根本不会使用`first`and类 - 您可以使用普通 CSS 选择器（和）`second`选择那些 div`li > div``li > div > div`**

# ios - iOS 配置，团队 ID 混淆

> ID：11525551
> 
> 赞同：12
> 
> 时间：2012-07-17T15:14:11.767
> 
> 标签：ios, provisioning

我是 3 个注册的 iOS 开发团队的成员：

*   我的个人 iOS 开发者帐户。
*   我的企业 iOS 开发人员帐户团队。
*   我客户的 iOS 开发人员帐户团队。

我现在想使用 iOS Provisioning Portal 创建一个新的 App ID。

作为用于创建新 App ID 的 App ID 表单的一部分，我需要选择一个团队 ID。我以前做过很多次，但我认为有些东西可能已经改变了，因为今天，在选择团队 ID 时，我可以选择 3 个 10 字符的表单标识符（这些不是实际值），

*   使用团队 ID
*   YH78GU29T
*   GH6R89TRW
*   JK32DE724

不幸的是，目前尚不清楚这些中的每一个如何对应于我所属的团队......

如果我去 Xcode Organizer 尝试查找对这些团队 ID 的引用以获取一些上下文，我会看到这些视图 [更有帮助] 使用团队的全名......但在相应的团队 ID 上没有可见性。

我在钥匙链下面看了看，也没有任何线索。

我如何找出这些 ID 的成员对应于哪些团队？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-17T15:38:45.247

好的，我想通了，去[https://developer.apple.com/membercenter/index.action](https://developer.apple.com/membercenter/index.action)点击`your account`​​然后左键点击`organization profile`它会显示给你`Company/Organization ID`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-25T19:13:55.410

在 Keychain Access 中找到您的证书，右键单击证书并选择获取信息。然后将滚动条向下定位到详细信息部分并在需要时展开它。在那里您可以找到用户 ID 或团队 ID。

希望能帮助到你！

# python - 如何在 Google Python API 中保存和加载刷新令牌

> ID：11525554
> 
> 赞同：0
> 
> 时间：2012-07-17T15:14:19.337
> 
> 标签：python, access-token

我对这个答案感到非常满意[https://stackoverflow.com/a/8548319/641264](https://stackoverflow.com/a/8548319/641264)因为有了它，我现在很好地理解了访问令牌和刷新令牌之间的区别。我还浏览了 OAuth2WebSercer 文档[https://developers.google.com/accounts/docs/OAuth2WebServer](https://developers.google.com/accounts/docs/OAuth2WebServer) 但我不知道可用于处理刷新令牌的函数/方法。对于访问令牌，我们使用：

```
gdata.gauth.ae_save()
gdata.gauth.ae_load()
token.get_access_token() 
```

但是刷新令牌呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:22:09.937

If you step your way down into the source:
[[ae_save source]](http://code.google.com/p/gdata-python-client/source/browse/src/gdata/gauth.py?r=3b021605570f6ab46ecd306e0c0d15e74b8cfa15#1576)
[[token_to_blob source]](http://code.google.com/p/gdata-python-client/source/browse/src/gdata/gauth.py?r=3b021605570f6ab46ecd306e0c0d15e74b8cfa15#1431)

you'll see that `token_to_blob` is called on the token itself when you call `ae_save`.

In particular:

```
elif isinstance(token, OAuth2Token):
  return _join_token_parts(
      '2o', token.client_id, token.client_secret, token.scope,
      token.user_agent, token.auth_uri, token.token_uri,
      token.access_token, token.refresh_token) 
```

so not just the access token is saved, but many other attributes of the token object.

# php - 无法计算出一个 php str_replace() 来删除逗号

> ID：11525560
> 
> 赞同：6
> 
> 时间：2012-07-17T15:14:50.917
> 
> 标签：php, string, str-replace, comma

在 PHP 项目中，我有：

```
$string = "1,555";

str_replace(',', '', $string);
echo $string; //is still 1,555 
```

str_replace 不会删除逗号。如果我 var_dump. 我明白了`string(5) "1,555"`

有任何想法吗？我只需要删除逗号，以便我可以计算。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-17T15:15:26.980

```
$string = str_replace(',', '', $string); 
```

# api - Shopify Billing API - 给用户一个月的免费时间

> ID：11525563
> 
> 赞同：4
> 
> 时间：2012-07-17T15:14:55.427
> 
> 标签：api, shopify

我在 Shopify 应用商店中有一个使用经常性应用程序费用的应用程序。那里没有问题。

有时，我的一位用户会提出改进应用程序的建议。我想奖励他们一个月免费使用该应用程序而无需付费。

基于 Shopify API，我唯一能想到的就是取消当前的定期应用程序费用，以 0 美元创建新费用，然后在一个月后取消该费用并以原价创建新费用。这远非理想。我相信用户需要接受创建的每一项新费用。

有没有更好的办法？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:10:07.580

同意这听起来远非理想。

如果您创建具有 30 天试用期的新定期应用费用，Shopify 将在遵守试用期的同时将客户更改为此新费用。在试用期结束后，在您“升级他们的计划”之前，客户仍会看到按比例支付的部分付款周期费用，但这将有效地满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-05T08:23:08.183

截至 2017 年，现在有一个 API 用于向使用您的应用程序的商家授予积分： [https ://www.shopify.com/partners/blog/using-the-shopify-api-to-credit-merchants-for-app-charges](https://www.shopify.com/partners/blog/using-the-shopify-api-to-credit-merchants-for-app-charges) [https://help.shopify.com/api/reference/applicationcredit](https://help.shopify.com/api/reference/applicationcredit)

# android - 我应该在哪里保存 authtoken android 2.3

> ID：11525571
> 
> 赞同：2
> 
> 时间：2012-07-17T15:15:20.633
> 
> 标签：android, accountmanager

嗨，我正在学习 Android 开发。我的查询是当我从 AccountManager Android 获取“writely”谷歌文档的访问令牌时。我应该在哪里保存 authtoken？我正在为 API 7 开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T02:04:08.663

你真的不需要保存它。`AccountManager`自动缓存令牌，因此当您调用`getAuthToken()`. 不过，您应该能够处理令牌过期的情况。如果你真的想保存它，SharedPreferences 是自然而然的地方。

# php - 当 ID 未知时保存到表中

> ID：11525573
> 
> 赞同：0
> 
> 时间：2012-07-17T15:15:37.710
> 
> 标签：php, jquery, mysql, codeigniter

我正在使用 Codeigniter 开发 CMS，它具有标题、帖子内容等常用字段（该页面在这种方式上类似于 Wordpress）。

我在页面上有一个图像上传器，它通过 ajax 将图像保存到 MySQL 表中，其中包含 image_id、路径、大小等基本字段。

还有另一个表存储项目和图像之间的关系，需要 item_id 和 image_id。

我遇到的问题是 item_id 在页面被创建/保存之前是未知的。因此，如果用户转到 Create Post 页面并从那里上传图像，我无法添加关系，因为我还没有 item_id。

我正在考虑的一些事情：

*   每次有人进入 Create Post 页面时，它会自动在 MySQL 表中创建一个只有 item_id 的空白帖子，并将其存储在隐藏字段中。我遇到的问题是，如果一个人只是单击创建帖子但从不填写，数据库可能会充满很多空帖子。

*   将图像保存在图像表中，但还保存一个包含所有 ID 的数组，以供单击“创建”按钮时使用。单击该按钮时，然后添加图像关系。

*   隐藏图片上传器，直到帖子标题填写完毕，触发页面保存

Wordpress 似乎已经解决了这个问题，但我不确定它做了什么？

有人有更好的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:44:18.910

我会说构建您的图像表，以便它不需要引用特定的帖子。将图像-帖子关系放在单独的表中。在您的“撰写帖子”屏幕上，让图片上传者返回新插入的图片的 ID，然后在您提交帖子时，将新的帖子 ID 和图片 ID 添加到表中以建立图片-帖子关系。这也使您可以更灵活地执行诸如链接到多个帖子中的一个图像之类的操作。

--**编辑：**在重新阅读时，听起来这已经是你存储它们的方式了。如果是这样，那么应该没有问题。只需在提交帖子时添加图像-帖子关系。如果您担心孤立的图像，请参见下文。--

你是对的，如果有人上传图像然后关闭窗口而不发帖，这可能会导致孤立图像。不过，我不会担心图像表“填满”。MySQL 表可以有数百万行并且仍然表现良好。

如果您担心收集未使用的图像文件，如果上传日期早于 1 周，并且图像与任何帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:20:52.437

看起来很简单：

使用 1 个表格

收集发布的数据

插入文章 - 记录插入 id

插入图像 - 记录图像 id

使用 ids 插入关系表

编辑

当您使用 ajax 上传图像时，您可以使用返回值将插入的图像 id 加载到隐藏的表单字段中

# c++ - C++：为什么必须声明私有函数？

> ID：11525574
> 
> 赞同：30
> 
> 时间：2012-07-17T15:15:45.243
> 
> 标签：c++, class, function, private, declaration

为什么 C++ 中的类必须声明它们的私有函数？它有实际的技术原因（它在编译时的作用是什么）还是仅仅是为了一致性？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-17T15:22:25.583

> 我问为什么必须声明私有函数，因为它们没有添加任何东西（既不是对象大小也不是 vtable 条目）让其他翻译单元知道

如果您考虑一下，这类似于`static`在文件中声明某些函数。它从外部看不到，但它对编译器本身很重要。编译器想知道函数的签名，然后才能使用它。这就是你首先声明函数的原因。**请记住，C++ 编译器是一次性的，这意味着在使用之前必须声明所有内容。¹**

从程序员的角度来看，声明私有函数仍然不是完全没用的。想象一下 2 个班级，其中之一是另一个班级`friend`。^(朋友分区的第2)类需要知道该类的私有信息（这个讨论变得很奇怪），否则他们无法使用它。

至于为什么 C++ 是这样设计的，我首先要说有历史原因：你不能在 C 中对结构进行切片，被 C++ 采用，所以你不能对类进行切片（并且被其他语言也从 C++ 分支）。我也猜想它是关于简单性：想象一下设计一种编译方法是多么困难，在这种方法中你可以将类拆分到不同的头文件中，让你的源文件知道它，并防止其他人向你添加东西班级。

最后一点是，`private`函数*会*影响 vtable 的大小。也就是说，如果它们是`virtual`.

* * *

¹ [其实不完全。如果类中有内联函数，它们可以引用稍后在同一类中定义的函数。但可能这个想法是从单次传递开始的，后来又添加了这个异常。]

² [特别是内联成员函数。]

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-17T15:21:15.073

您必须在类本身的定义中声明所有成员，以便编译器知道哪些函数*可以*成为成员。否则，第二个程序员可能（不小心？）出现并添加成员、犯错误并违反对象的保证，从而导致未定义的行为和/或随机崩溃。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T16:13:54.783

有多种担忧，但是：

*   C++ 不允许您在初始定义后重新打开一个类以在其中声明新成员。
*   C++ 不允许您在组合形成程序的不同翻译单元中对类有不同的定义。

所以：

*   .cpp 文件想要在类中声明的任何私有成员函数都需要在 .h 文件中定义，该类的每个用户也可以看到该文件。

从实际二进制兼容性的 POV 来看：正如 David 在评论中所说，私有`virtual`函数会影响此类的 vtable 的大小和布局以及任何使用它作为基础的类。因此，即使在编译无法调用它们的代码时，编译器也需要了解它们。

C++ 是否可以以不同的方式发明，以允许 .cpp 文件重新打开类并添加某些类型的附加成员函数，并需要实现以确保这不会破坏二进制兼容性？是否可以放宽一个定义规则，以允许在某些方面有所不同的定义？例如，静态成员函数和非虚非静态成员函数。

可能对两者都是肯定的。我不认为存在任何技术障碍，尽管当前的 ODR对于定义“不同”的原因*非常严格（因此在允许外观非常相似的定义之间存在二进制不兼容性方面非常慷慨）。*我认为在规则中引入这种例外情况的案文会很复杂。

最终它可能归结为“设计师想要那样”，或者可能是有人尝试过它并遇到了我没有想到的障碍。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T15:19:28.393

访问级别不影响可见性。私有函数对外部代码可见，并且可以通过重载决议来选择（这会导致访问冲突错误）：

```
class A {
    void F(int i) {}
public:
    void F(unsigned i) {}
};

int main() {
    A a;
    a.F(1); // error, void A::F(int) is private
} 
```

想象一下这行得通时的混乱：

```
class A {
public:
    void F(unsigned i) {}
};

int main() {
    A a;
    a.F(1);
}

// add private F overload to A
void A::F(int i) {} 
```

但是将其更改为第一个代码会导致重载决议选择不同的函数。那么下面的例子呢？

```
class A {
public:
    void F(unsigned i) {}
};

// add private F overload to A
void A::F(int i) {}

int main() {
    A a;
    a.F(1);
} 
```

或者这是另一个出错的例子：

```
// A.h
class A {
public:
    void g() { f(1); }
    void f(unsigned);
};

// A_private_interface.h
class A;
void A::f(int);

// A.cpp
#include "A_private_interface.h"
#include "A.h"

void A::f(int) {}
void A::f(unsigned) {}

// main.cpp
#include "A.h"

int main() {
    A().g();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-17T17:25:58.677

原因之一是在 C++ 中朋友可以访问您的私人信息。为了让朋友访问它们，朋友必须了解它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T15:19:50.753

类的私有成员仍然是该类的成员，因此必须声明它们，因为其他公共成员的实现可能依赖于该私有方法。声明它们将允许编译器将对该函数的调用理解为成员函数调用。

如果您有一个仅在`.cpp`文件中使用且不依赖于对类的其他私有成员的直接访问的方法，请考虑将其移至匿名命名空间。然后，它不需要在头文件中声明。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-17T15:25:29.390

为什么必须声明私有函数有几个原因。

*首次编译时错误检查*

访问修饰符的目的是在编译时捕获某些类（没有双关语）的编程错误。私有函数是这样的函数，如果有人从类外部调用它们，那将是一个错误，您希望尽早了解它。

*二次铸造与继承*

取自 C++ 标准：

3 [注意：私有基类的成员可能无法作为继承的成员名称访问，但可以直接访问。由于指针转换 (4.10) 和显式转换 (5.4) 的规则，如果使用隐式转换，则从派生类的指针到指向不可访问的基类的指针的转换可能是格式错误的，但格式正确如果使用显式强制转换。

*第三个朋友*

朋友们在那里私下互相展示。私有方法可以被另一个朋友类调用。

*第 4 次一般理智和良好设计*

曾经与另外 100 名开发人员一起参与过一个项目。拥有一套标准和通用的规则有助于保持可维护性。声明私有的东西对组中的其他人具有特定的含义。

这也流入了良好的 OO 设计原则。什么可以公开，什么不可以

# asp.net-mvc - 是否可以使用类似于 jqgrid 中的子网格的自定义按钮显示另一个网格

> ID：11525575
> 
> 赞同：0
> 
> 时间：2012-07-17T15:15:48.280
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jqgrid, jqgrid-asp.net

我的网格中有子网格，它工作正常。现在，我正在寻找类似的东西，但我想使用自定义按钮将子网格显示为弹出网格，而不是在主网格内显示子网格，类似于添加或编辑模式表单但显示网格而不是模态形式。有可能做这样的事情吗？如果可能，请提供任何示例。任何帮助是极大的赞赏！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:22:24.100

很高兴这能有所帮助！请参考：[http ://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html)

从左侧导航窗格中，选择 Advanced -> Master Detail。

在那里，子网格加载到主网格正下方，每行单击主网格。您可以对加载在模态弹出窗口或任何您想要的子网格进行编程。

快乐编码:)

# android - Android arcGIS 地图投影

> ID：11525577
> 
> 赞同：2
> 
> 时间：2012-07-17T15:15:51.093
> 
> 标签：android, map, arcgis, map-projections

我在 Android 应用程序中使用 ArcGIS API。我以前使用过 Google API。在 Google API 中可以进行投影计算，如下所示：

```
Projection projection = map.getProjection();
        Point p = new Point();
        projection.toPixels(gp, p);//gp is a geoPoint computed earlier. 
```

问题：ArcGIS API 中有类似的东西吗？

我 `GeometryEngine.project(point p, spatialReference sr1, spatialReference sr2)`在 ArcGIS 文档中看到了方法。但不确定如何使用它来获得与上述类似的计算。我应该使用什么空间参考来获取像素坐标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:48:36.017

您正在 com.esri.android.map 中寻找 MapView 类的 toScreenPoint() 和 toMapPoint() 方法

[http://resources.arcgis.com/en/help/android-sdk/api/reference/com/esri/android/map/MapView.html#toScreenPoint(com.esri.core.geometry.Point)](http://resources.arcgis.com/en/help/android-sdk/api/reference/com/esri/android/map/MapView.html#toScreenPoint(com.esri.core.geometry.Point))

# php - 没有扩展的 PHP XMLRPC 服务器

> ID：11525579
> 
> 赞同：2
> 
> 时间：2012-07-17T15:15:52.557
> 
> 标签：php, xml-rpc, pingback

我正在尝试为我们的网站创建一个 pingback 脚本，但是 1&1 没有我们需要安装的 XMLRPC 扩展。

是否有任何替代方法可以在不需要此扩展的情况下创建 pingback/trackback 脚本 - 是否有任何演示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T16:24:14.137

## [phpxmlrpc](http://phpxmlrpc.sourceforge.net/)

[一个旧的 Php 实现，它似乎被废弃了，但你可以在这篇博文](http://www.quietearth.us/articles/2006/10/30/Coding-your-own-blog-Pingback-in-php)中看到如何使用它来发送或接收它们。

## [曾德](http://framework.zend.com/manual/en/zend.xmlrpc.html)

[Zend 框架中有一个XML-RPC客户端](http://framework.zend.com/manual/en/zend.xmlrpc.client.html)和[服务器](http://framework.zend.com/manual/en/zend.xmlrpc.server.html)的纯php 实现，你可以用它来调用或实现一个pingback 服务，并且有据可查。如果您不想仅将完整框架用作组件库，只需下载框架，将 lib/Zend 从中提取到目录并包含组件的顶级文件即可。（为方便起见，您可能需要设置自动加载）

pingback 服务描述在[这里](http://www.hixie.ch/specs/pingback/pingback#TOC3)。

如果你有这样的设置，你可以去这篇[博文](http://www.quietearth.us/articles/2006/10/30/Coding-your-own-blog-Pingback-in-php)获取客户端/服务器代码的指针，我给你一些 Zend 类的例子（这篇文章使用 xmlrpc 扩展）

### 发送pingback：

```
require_once 'Zend/XmlRpc/Client.php'; // path to the framework files
try {
    $client = new Zend_XmlRpc_Client('<pingback service url>');
    $client->call('pingback.ping', array('<source uri>', '<target uri>'));
} catch (Exception $e) {
   // error handling
} 
```

服务 url 将在博客文章的 http 标头中，或在[pingback 文档](http://www.hixie.ch/specs/pingback/pingback#TOC2)中描述的元标记中。

### Pingback 服务框架

```
class PingBackService {
    public function ping($source, $target) {
        $source_url = $source[0];
        $target_url = $target[0];

        // validate parameters here, see http://www.quietearth.us/articles/2006/10/30/Coding-your-own-blog-Pingback-in-php for pointers

        return 'Pingback registered. May the force be with you';
    }
}
require_once 'Zend/XmlRpc/Server.php';
try {
    $server = new Zend_XmlRpc_Server();
    $server->setClass('PingBackService', 'pingback');
    echo $server->handle();
} catch (Exception $e) {
    // handle errors
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T06:23:40.393

PEAR 有[XML_RPC2 包](http://pear.php.net/package/XML_RPC2)，它在 PHP 用户空间中实现 XML-RPC 客户端和服务器，无需任何特殊扩展。

# ms-access - 在 MS Access 中创建“Winform”

> ID：11525582
> 
> 赞同：2
> 
> 时间：2012-07-17T15:15:57.017
> 
> 标签：ms-access, vba

是否可以在 MS Access 2007 中创建不依赖于记录集的表单？我想创建一个只处理简单计算的表单，但不依赖数据库中的任何数据。

这是我尝试使用的代码，但是当我运行它时出现编译错误“找不到方法或数据成员”。

```
Private Sub btnCalc_Click()
Dim TotalCost As Integer
Dim DisposalCost As Integer
Dim CostRatio As Integer
TotalCost = txtTotalCost.Text
DisposalCost = txtDisposalCost.Text
CostRatio = TotalCost / DisposalCost
lblCostRatio.Text = CostRatio
End Sub 
```

我的代码有问题吗，还是我需要创建一个 winform 来处理这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T15:18:47.567

是的，这是完全可能的。不要引用`.text`属性，文本属性仅在控件具有焦点时可用。如果你必须使用一个属性 - 它不是必需的 - 使用`.value`.

对于标签，您确实需要该`.caption`属性。

使用文本框作为答案是有好处的，因为您可以将其设置为函数或计算。例如，您可以将控制源设置为：

```
= txtText1 / txtText2 
```

`locked`您可以使用和/或`enabled`属性防止结果文本框被编辑。为确保执行计算，您需要将`format`属性设置为数字或货币格式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T15:24:30.360

如果`lblCostRatio`是标签控件，则您的错误消息是由于这一行：

```
lblCostRatio.Text = CostRatio 
```

标签控件没有`.Text`属性。看看改变它的`.Caption`属性。

# jquery - 选择页面中的所有表单并序列化它们的输入值

> ID：11525583
> 
> 赞同：4
> 
> 时间：2012-07-17T15:16:02.093
> 
> 标签：jquery, jquery-selectors, jqueryform

您好我正在尝试选择页面中的所有表单，然后序列化它们的输入值，我正在使用以下代码：

```
function serializeAllFormData() {
                        var serializedData;
                        $("#form").each(
                                function() {
                                    serializedData = serializedData
                                            + $(this).serialize();
                                });
                        return serializedData;
                    } 
```

但是当我检查 serializedData 它是未定义的，我做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T15:18:41.070

您正在选择表单，就好像它们是一个 ID `#form`（井号`#`仅在选择 ID 时使用）。尝试使用只是`form`。

```
$("form").each(function() {
   serializedData = serializedData + $(this).serialize();
}); 
```

**更新**

根据[文档](http://api.jquery.com/jQuery.each/)，每个函数都可以采用第一个参数（indexInArray）。所以你可以做这样的事情：

```
var forms = $("form");
forms.each(function(i) {
   serializedData = serializedData + $(this).serialize();

   // i will start a 0, therefor forms.length - 1 in the if-statement
   if (i === forms.length - 1) {
      // Do something on the last element
   }
}); 
```

*我将表单缓存在一个变量中，这样我们就不必在每次循环运行时都通过 DOM。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:19:41.653

由固定

```
function serializeAllFormData() {
                        var serializedData;
                        var forms = $('#content').find('form');
                        $(forms).each(
                                function() {
                                    serializedData = serializedData
                                            + $(this).serialize();
                                });
                        alert(serializedData);
                        return serializedData;
                    } 
```

# eclipse - 在 Eclipse 中配置 JAXB 编译器选项

> ID：11525585
> 
> 赞同：1
> 
> 时间：2012-07-17T15:16:04.333
> 
> 标签：eclipse, jaxb, wizard

我正在尝试从 .xsd 文件生成 JAXB 类。我发现我需要 Eclipse 的 JAVA EE 版本才能做到这一点。如果我右键单击 .xsd 文件并选择 Generate>JAXB Classes。

我得到了这个人在他的教程视频中得到的同一个向导 > [http://www.youtube.com/watch?v=kOLziP28598&t=2m26s](http://www.youtube.com/watch?v=kOLziP28598&t=2m26s)

但问题是，如果我点击下一步，向导中的标题会从“为新类指定项目”更改为“配置 JAXB 编译器选项”，但下面的表单保持不变。

所以每次我点击下一步，向导中的标题都会改变，但表单仍然显示从第一步开始的项目树表单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T05:26:09.903

在 Eclipse 中使用 JAXB。你必须添加一个插件到eclipse。

下载此**org.jvnet.jaxbw.eclipse_1.0.0**插件并将其放入您的 eclipse -> 插件目录。（您的 indigo eclipse 文件夹）。重新启动你的日食。然后右键单击 xsd 文件 -> JAXB 2.0 -> 运行 XJC。

[http://rocksolutions.wordpress.com/2010/08/04/sample-on-jaxb-using-eclipse/](http://rocksolutions.wordpress.com/2010/08/04/sample-on-jaxb-using-eclipse/)这个链接很好地解释了这个过程。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-20T22:57:57.837

刚遇到这个问题，我的解决方案是：帮助>>安装新软件>>适用于：--所有可用站点--

搜索 JAXB

然后选择 Web、XML、Java EE 和 OSGi Enterprise Development 并安装。

重新启动 Eclipse 后，您应该会看到生成选项。

# mysql - 提高 MySQL 复制性能的问题

> ID：11525586
> 
> 赞同：0
> 
> 时间：2012-07-17T15:16:04.860
> 
> 标签：mysql, performance, replication

我正在使用 MySQL 5.5。

我的主数据库有大量数据并且不断加载数据。而且我只有一个从属数据库。因为mysql复制是单线程的，所以追起来真的很慢……

我目前知道两种提高速度的方法。一种是将 MySQL 更新到支持 Multi-Threaded Slave 的 5.6。另一种方法是在一个从属设备上将一个 DB 分离为多个 DB（http://d2-systems.blogspot.com/2011/04/mysql-56x-feature-preview-multi.html）。

还有其他方法可以提高复制加载速度吗？我有一个工具需要从我的从数据库中获取数据。因此，如果我选择实现第二种方式，它将从我的工具中更改很多代码。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:52:09.037

你应该试试[Tungsten Replicator](http://code.google.com/p/tungsten-replicator/)是一个高性能、开源的 MySQL 数据复制引擎。它提供了一组超越当今可用的任何开源复制器的功能：支持故障转移的全局事务 ID、灵活的事务过滤、可扩展的事务元数据、分片、每个进程的多个复制服务、高性能以及简单、有据可查的操作。

有关此实用程序的更多信息，您可以访问：

[http://www.continuent.com/solutions/tungsten-replicator](http://www.continuent.com/solutions/tungsten-replicator)

# r - 使用数据框中单元格中的字符串创建向量

> ID：11525587
> 
> 赞同：0
> 
> 时间：2012-07-17T15:16:05.280
> 
> 标签：r, vector, dataframe

```
>titletool<-read.csv("TotalCSVData.csv",header=FALSE,sep=",")

> class(titletool)
[1] "data.frame"

>titletool[1,1]
[1] Experiment name : CONTROL DB AD_1

>t<-titletool[1,1]

>t
[1] Experiment name : CONTROL DB AD_1

>class(t)
[1] "character" 
```

现在我想创建一个名为“实验名称：CONTROL DB AD_1”的对象（向量），或者如果可能的话更好的是 CONTROL DB AD_1

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:21:00.890

Use `assign`:

```
varname <- "Experiment name : CONTROL DB AD_1"

assign(varname, 3.14158)
get("Experiment name : CONTROL DB AD_1")
[1] 3.14158 
```

And you can use a regular expression and `sub` or `gsub` to remove some text from a string:

```
cleanVarname <- sub("Experiment name : ", "", varname)
assign(cleanVarname, 42)
get("CONTROL DB AD_1")
[1] 42 
```

* * *

But let me warn you this is an unusual thing to do.

**Here be dragons.**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T20:03:49.070

如果我理解正确，您有一堆 CSV 文件，每个文件中都有多个实验，以“实验 ...”模式命名。您现在想以一种有效的方式将这些“实验”中的每一个读入 R。

这是一个不那么漂亮（但也不那么难看）的函数，它可能会让你朝着正确的方向开始。

该函数的基本作用是读取 CSV，识别每个新实验开始的行号，获取实验的名称，然后执行循环以使用单独的数据框填充列表。不过，命名“R 友好”并不真正麻烦，而且我决定将输出保留在列表中，因为正如 Andrie 指出的那样，“R 有很好的工具来处理列表。”

```
read.funkyfile = function(funkyfile, expression, ...) {
  temp = readLines(funkyfile)
  temp.loc = grep(expression, temp)
  temp.loc = c(temp.loc, length(temp)+1)
  temp.nam = gsub("[[:punct:]]", "", 
                  grep(expression, temp, value=TRUE))
  temp.out = vector("list")

  for (i in 1:length(temp.nam)) {
    temp.out[[i]] = read.csv(textConnection(
                             temp[seq(from = temp.loc[i]+1,
                             to = temp.loc[i+1]-1)]),
                             ...)
    names(temp.out)[i] = temp.nam[i]
  }
  temp.out
} 
```

这是一个示例 CSV 文件。将其复制并粘贴到文本编辑器中，并将其保存为当前工作目录中的“funkyfile1.csv”。（或者，从 Dropbox 中读取：http: [//dl.dropbox.com/u/2556524/testing/funkyfile1.csv](http://dl.dropbox.com/u/2556524/testing/funkyfile1.csv)）

```
"Experiment Name: Here Be",,
1,2,3
4,5,6
7,8,9
"Experiment Name: The Dragons",,
10,11,12
13,14,15
16,17,18 
```

这是第二个 CSV。同样，复制粘贴并将其保存为“funkyfile2.csv”在您当前的工作目录中。（或者，从 Dropbox 中读取：http: [//dl.dropbox.com/u/2556524/testing/funkyfile2.csv](http://dl.dropbox.com/u/2556524/testing/funkyfile2.csv)）

```
"Promises: I vow to",,
"H1","H2","H3"
19,20,21
22,23,24
25,26,27
"Promises: Slay the dragon",,
"H1","H2","H3"
28,29,30
31,32,33
34,35,36 
```

请注意，`funkyfile1`没有列名，而`funkyfile2`有。这就是`...`函数中的参数的用途：指定`header=TRUE`or `header=FALSE`。此外，标识每组新数据的“表达式”是`funkyfile2`.

现在，使用以下功能：

```
read.funkyfile("funkyfile1.csv", "Experiment", header=FALSE)
# read.funkyfile("http://dl.dropbox.com/u/2556524/testing/funkyfile1.csv",
#                "Experiment", header=FALSE) # Uncomment to load remotely
# $`Experiment Name Here Be`
# V1 V2 V3
# 1  1  2  3
# 2  4  5  6
# 3  7  8  9
# 
# $`Experiment Name The Dragons`
# V1 V2 V3
# 1 10 11 12
# 2 13 14 15
# 3 16 17 18

read.funkyfile("funkyfile2.csv", "Promises", header=TRUE)
# read.funkyfile("http://dl.dropbox.com/u/2556524/testing/funkyfile2.csv",
#                "Experiment", header=TRUE) # Uncomment to load remotely
# $`Promises I vow to`
# H1 H2 H3
# 1 19 20 21
# 2 22 23 24
# 3 25 26 27
# 
# $`Promises Slay the dragon`
# H1 H2 H3
# 1 28 29 30
# 2 31 32 33
# 3 34 35 36 
```

去拿那些龙。

# 更新

如果你的数据都是相同的格式，你可以使用`lapply`Andrie 提到的解决方案和这个函数。只需列出您要加载的 CSV，如下所示。请注意，所有文件都需要使用与当前编写函数的方式相同的“表达式”和其他参数....

```
temp = list("http://dl.dropbox.com/u/2556524/testing/funkyfile1.csv", 
            "http://dl.dropbox.com/u/2556524/testing/funkyfile3.csv")
lapply(temp, read.funkyfile, "Experiment", header=FALSE) 
```

# android - 尝试在 sdcard 中创建文件夹时出错

> ID：11525589
> 
> 赞同：-1
> 
> 时间：2012-07-17T15:16:28.003
> 
> 标签：android, exception-handling

下面是我用于从服务器下载图像并存储在文件夹中的 SD 卡中的代码，它一次又一次地通过异常

```
java.io.IOException: Not a directory 
```

请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T15:20:25.077

add write permission to your app

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

then, try to create the directory

```
File SDCardRoot = new File(Environment.getExternalStorageDirectory(), type); 
if (!SDCardRoot.exists()) 
{ 
  SDCardRoot.mkdir(); 
} 
```

# php - PHP中的RegEx返回数组

> ID：11525590
> 
> 赞同：2
> 
> 时间：2012-07-17T15:16:30.657
> 
> 标签：php, regex

我正在从我正在使用的旧 CMS 转换一些简码信息。在某些文章正文中，我需要从一些预先存在的标注中获取 ID

```
{image id="27411" shape="landscape" align="right"} 
```

在一个文本正文中可以有多个这样的标注。有没有办法将此信息作为 ID 数组返回？唯一重要的信息是 ID，其余无关紧要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T15:18:18.613

如果它始终采用这种格式，请使用[`preg_match_all()`](http://php.net/preg_match_all)，如下所示：

```
preg_match_all( '#\{image id="(\d+)"[^\}]+\}#', $input, $matches); 
```

您的 ID 数组将位于`$matches[1]`.

因此，对于您的示例输入，此[输出](http://viper-7.com/totFcP)：

```
array(1) {
  [0]=>
  string(5) "27411"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:20:29.383

The following pattern should do the job:

```
/image id\="(\d+)"/ 
```

Required id is in group 1.

[Demo](http://regexr.com?31i9g)

# ruby - 如何在主页加载后从加载特定数据的页面中抓取数据？

> ID：11525599
> 
> 赞同：2
> 
> 时间：2012-07-17T15:17:05.020
> 
> 标签：ruby, screen-scraping, nokogiri, watir, watir-webdriver

我一直在使用 Ruby 和 Nokogiri 从类似于 hollister 网站的 URL 中提取数据：http: [//www.hollisterco.com/webapp/wcs/stores/servlet/TrackDetail? storeId=10251&catalogId=10201&langId=-1&URL =TrackDetailView&订单号=1316358](http://www.hollisterco.com/webapp/wcs/stores/servlet/TrackDetail?storeId=10251&catalogId=10201&langId=-1&URL=TrackDetailView&orderNumber=1316358)

我的脚本现在看起来像这样：

```
require 'rubygems'
require 'nokogiri'
require 'open-uri'

page = Nokogiri::HTML(open("http://www.hollisterco.com/webapp/wcs/stores/servlet/TrackDetail?storeId=10251&catalogId=10201&langId=-1&URL=TrackDetailView&orderNumber=1316358")) 

puts page.css("h3[data-property=GLB_ORDERNUMBERSYMBOL]")[0].text 
```

我的问题是 Hollister 页面有某种异步加载数据，因此当我的脚本检查页面区域以及页面元素的订单特定数据时，它还不存在。IE，`<h3>`with`data-property=GBL_ORDERNUMBERSYMBOL`还不存在，但在浏览器中，如果你让它再加载十秒钟，DOM 和 HTML 会发生变化以反映特定的订单详细信息。

捕获事后加载的数据的最佳方法是什么？我曾尝试使用 watir-webdriver，但也不确定我需要做什么才能使其正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T00:12:37.757

尝试安装[Capybara-webkit](https://github.com/thoughtbot/capybara-webkit)（确保已安装 QtWebKit，否则 gem 安装将失败）。这将为您提供无头解决方案。然后试试这个：

```
require 'capybara-webkit'
require 'capybara/dsl'
require 'nokogiri'
require 'open-uri'

url = 'http://www.hollisterco.com/webapp/wcs/stores/servlet/TrackDetail?storeId=10251&catalogId=10201&langId=-1&URL=TrackDetailView&orderNumber=1316358'
#change the capybara config to DSL and to use webkit
include Capybara::DSL
Capybara.current_driver = :webkit
visit(url)
doc = Nokogiri::HTML.parse(body) 
```

然后像往常一样解析身体。要删除所有错误消息，请尝试以下操作：

```
Capybara.register_driver :webkit do |app|
  Capybara::Driver::Webkit.new(app, :stdout => nil)
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T15:46:31.487

我不知道如何用 Open-URI 来做，但如果你想使用 Watir-Webdriver，下面的工作。

```
require 'watir-webdriver'
b = Watir::Browser.new
b.goto('http://www.hollisterco.com/webapp/wcs/stores/servlet/TrackDetail?storeId=10251&catalogId=10201&langId=-1&URL=TrackDetailView&orderNumber=1316358')
puts b.h3(:class, 'order-num').when_present.text 
```

注意 a`when_present()`是在 h3 标签上执行的。这意味着脚本将等待 h3 出现，然后再尝试获取其文本。如果您知道有些部分需要时间来加载，那么添加显式等待通常可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-17T18:23:51.510

在@benaneesh 的回答之后，我必须稍作修改才能让它在我的 ruby​​ 脚本中工作，并且不显示未知的 url 消息......

```
require 'capybara-webkit'
require 'capybara/dsl'
require 'nokogiri'
require 'open-uri'

include Capybara::DSL
Capybara.current_driver = :webkit

Capybara::Webkit.configure do |config|
  config.block_unknown_urls
  config.allow_url("*mysite.com")
end

#... rest of code 
```

# sql - Sql Where 语句

> ID：11525601
> 
> 赞同：1
> 
> 时间：2012-07-17T15:17:15.553
> 
> 标签：sql, blackberry, java-me

我正在尝试将从 json 服务获得的两个变量与我在我的应用程序中拥有的数据库进行比较。我尝试对其进行硬编码并且它有效

```
Statement st = tmsDB.createStatement(
    "SELECT * FROM ObjectTexts WHERE programID ='AAA' AND objName ='BBB'"); 
```

但是当我尝试这样做时`

```
Statement st = tmsDB.createStatement(
    "SELECT * FROM ObjectTexts WHERE programID="+ JsonProgramID  +"AND objName ="+JsonobjName); 
```

它没有用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T15:18:47.817

```
FROM ObjectTexts WHERE programID='"+ JsonProgramID  +"' AND objName =' "+JsonobjName +"'" 
```

如果您观察硬编码查询，您的参数在单引号内，但动态一个缺少单引号。

在 SQL 中，所有 String/Varchar 都应该在单引号内。

注意：这些原始查询极易受到 SQL 注入攻击。

BlackBerry API 支持正常的创建、准备、绑定、执行语义：

```
Statement st = tmsDB.createStatement( "SELECT * FROM ObjectTexts WHERE programID=? AND objName = ?");
st.prepare();
st.bind(1, JasonProgramID);
st.bind(2, JsonobjName);
Cursor c = st.getCursor();
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T15:20:13.947

您似乎缺少空格和单引号。试试这个：

```
 Statement st = tmsDB.createStatement("SELECT * FROM ObjectTexts WHERE programID= '"+ JsonProgramID  +"' AND objName = '"+JsonobjName+"'"); 
```

# iphone - Objective-C @Selector(methodWithArguments)

> ID：11525612
> 
> 赞同：0
> 
> 时间：2012-07-17T15:18:01.310
> 
> 标签：iphone, objective-c, ios

> **可能重复：**
> [@selector 中的参数](https://stackoverflow.com/questions/1349740/arguments-in-selector)

这可能是一个非常简单的问题，但我需要一个非常好的答案......

使用以下代码，我可以在单击按钮时调用方法...

```
[pushButton addTarget:self action:@selector(pushOrPull:andVI:) forControlEvents:UIControlEventTouchUpInside];
[pullButton addTarget:self action:@selector(pushOrPull:andVI:) forControlEvents:UIControlEventTouchUpInside]; 
```

方法如下...

```
-(void) pushOrPull: (int)pushPull andVI: (NSString *) videoId {

} 
```

我希望按钮能够为该方法提供参数，但是当我尝试这个时......

```
[pushButton addTarget:self action:@selector(pushOrPull:2 andVI:@"someVID") forControlEvents:UIControlEventTouchUpInside];
[pullButton addTarget:self action:@selector(pushOrPull:1 andVI:@"someVID") forControlEvents:UIControlEventTouchUpInside]; 
```

Xcode 给了我两个错误：*“expected )”*

当我的按钮被点击时，如何向该方法提供这两个参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:22:04.117

不幸的是，你不能。按钮只“知道如何”将自己作为第一个参数发送。最好的办法是让按钮“属于”某个可以解释按钮按下的视图控制器（它们向其发送事件），然后在其他地方调用委托方法，并根据需要使用尽可能多的参数。

要回答相关问题，“选择器”从不携带实际参数，但每个参数确实带有一个冒号：@selector(aMethodWithThis:andThat:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:24:26.510

你能做的只是中间有一个方法。

```
[pushButton addTarget:self action:@selector(runMyMethod) forControlEvents:UIControlEventTouchUpInside];
pushButton.tag =0;
[pullButton addTarget:self action:@selector(runMyMethod) forControlEvents:UIControlEventTouchUpInside];
pullbutton.tag =1;

-(void) runMyMethod:(id)sender {
    if(sender.tag ==0)
    {
       [self pushOrPull:1 andVI:@"someVID"];
    }
    else if (sender.tag ==1)
    {
       [self pushOrPull:2 andVI:@"someVID"];
    }
}
-(void) pushOrPull: (int)pushPull andVI: (NSString *) videoId {

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T15:27:00.870

这有点好：

```
// set up an NSMutableDictionary, videoIDsForButtons as an iVar or property
[pushButton addTarget:self action:@selector(buttonWasPressed:) forControlEvents:UIControlEventTouchUpInside];
[videoIDsForButtons setObject: @"someVID" forKey: pushButton];

[pullButton addTarget:self action:@selector(buttonWasPressed:) forControlEvents:UIControlEventTouchUpInside];
[videoIDsForButtons setObject: @"someVID" forKey: pullButton]; 
```

```
- (void)buttonWasPressed:(id)sender
{
    if (sender == pushButton)
    {
        [self pushOrPull: 2 andVI: [videoIDsForButtons objectForKey: sender]];
    }
    else // assume pullButton
    {
        [self pushOrPull: 1 andVI: [videoIDsForButtons objectForKey: sender]];
    }
} 
```

这是因为选择器不带参数，只有方法调用可以。当一个按钮被按下时，它提供自己作为唯一的参数 ( `sender`)。您应该有一个完全独立的响应者方法来查看发送者并确定适当的追索权。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T15:40:48.243

不幸的是，`-addTarget:action:forControlEvents:`可以通过以下方法仅使用下一个参数回叫您：

```
-(IBAction)selector:(id)sender forEvent:(UIEvent *)event; 
```

`sender`所以，你应该在这个`-pushOrPull:andVI:`方法里面检查哪个对象触发了事件（不必检查`sender`参数，只需`-pushOrPull:andVI:` **像这样**调用你：

```
{
    // ...

    [pushButton addTarget:self action:@selector(pushButtonTouchedUpInside:) forControlEvents:UIControlEventTouchUpInside];
    [pullButton addTarget:self action:@selector(pullButtonTouchedUpInside:) forControlEvents:UIControlEventTouchUpInside];

    // ...

}

- (IBAction)pushButtonTouchedUpInside:(id)sender {
    [self pushOrPull:2 andVI:@"someVID"];
}

- (IBAction)pullButtonTouchedUpInside:(id)sender {
    [self pushOrPull:1 andVI:@"someVID"];
} 
```

# jquery - 发生任何更改时如何检测当前网址

> ID：11525613
> 
> 赞同：3
> 
> 时间：2012-07-17T15:18:01.217
> 
> 标签：jquery, url, location, href

我正在使用“document.location.hash”剥离 url 并尝试检查当前 url 留下的内容。我不想使用任何插件，也不想从点击等触发事件中学习结果。需要立即和现代学习 url 更改。

jQuery：

```
$(function() {
    $(document).location().change(function() {//this part is not working
        var anchor = document.location.hash;
        if( anchor === '#one' ) {
            alert('current url = #one');
        }else if ( anchor === '#two' ) {
            alert('current url = #two');
        }else if ( anchor === '#three' ) {
            alert('current url = #three');
        }
        console.log(anchor);
    });
}); 
```

html:

```
<a href="#one">one</a>
<a href="#two">two</a>
<a href="#three">three</a> 
```

深注：我已阅读这些问题并找到我正在寻找的内容： [如何检测 JavaScript 中的 URL 更改](https://stackoverflow.com/questions/6390341/how-to-detect-url-change)+[如何更改 javascript 中的当前 URL？](https://stackoverflow.com/questions/8866118/how-to-change-the-current-url-in-javascript)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T15:29:49.280

在不使用 jQuery 以外的插件的情况下，您可以处理 'hashchange' 事件：

```
$(document).ready(function() {
    $(window).bind( 'hashchange', function(e) { 
    var anchor = document.location.hash;
            if( anchor === '#one' ) {
                alert('url = #one');
            }else if ( anchor === '#two' ) {
                alert('url = #two');
            }else if ( anchor === '#three' ) {
                alert('url = #three');
            }
            console.log(anchor);
    });
}); 
```

**注意：** [并非所有浏览器都支持 hashchange 事件。](http://caniuse.com/hashchange)

**与回退一起使用：**您应该[使用 Modernizr 来检测是否支持 hashchangeEvent](http://modernizr.com/docs/#features-html5)，如果支持检查失败，则回[退到 Ben Alman 的 jQuery hashchange 事件插件](http://benalman.com/projects/jquery-hashchange-plugin/)，并在 else 块中使用 @Baylor Rae 的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T15:21:54.057

您可能会发现 Ben Alman 的 jQuery [hashchange 事件插件](http://benalman.com/projects/jquery-hashchange-plugin/)很有帮助。

```
$(function(){

  // Bind the event.
  $(window).hashchange( function(){
    // Alerts every time the hash changes!
    alert( location.hash );
  });

  // Trigger the event (useful on page load).
  $(window).hashchange();

}); 
```

# java - 创建具有不同对象的列表

> ID：11525621
> 
> 赞同：1
> 
> 时间：2012-07-17T15:18:33.137
> 
> 标签：java, list

我有一个方法，它接受 a`List<>`并将列表中的所有数字加在一起，如果数字 = 100 则返回

我的问题是我想对许多不同类型的列表使用相同的方法

所以不是有这个

```
public boolean checkPercent(List<BarStaff> associates){..same..}
public boolean checkPercent(List<Waiters> associates){..same..}
public boolean checkPercent(List<KitchenStaff> associates){..same..} 
```

我想要这个

```
public boolean checkPercent(List<could be any type> associates){..same..} 
```

有没有办法对所有不同类型的列表使用相同的代码，而不是重用不同列表的相同代码（员工在其中具有相同的值，因此它们在任何方面都没有不同）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T15:20:41.387

您可以使用[参数化方法](http://docs.oracle.com/javase/tutorial/extra/generics/methods.html)：

```
public <T> boolean checkPercent(List<T> associates)
{
    // snip...
} 
```

或只[接受任何列表](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)：

```
public boolean checkPercent(List<?> associates)
{
    // snip...
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-17T15:20:46.260

您可以创建一个[通用方法](http://docs.oracle.com/javase/tutorial/extra/generics/methods.html)：

```
public <T> boolean checkPercent(List<T> associates) {
    ... your code ...
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T15:21:01.543

使用泛型：

```
public <T> boolean checkPercent(List<T> associates){...} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T15:24:21.813

面向对象的方法是拥有`BarStaff`,`Waiters`并`KitchenStaff`实现一个`Employee`具有方法的接口`public int getPercentage()`。

```
public boolean checkPercent(List<? extends Employee> associates)
{
    foreach (Employee associate in associates)
    {
        int i = associate.getPercentage();
        // rest of code.
    }
} 
```

# actionscript-3 - 如何创建时间字段输入掩码

> ID：11525637
> 
> 赞同：1
> 
> 时间：2012-07-17T15:19:23.643
> 
> 标签：actionscript-3, apache-flex, flex4, flash-builder

在我的应用程序中，用户可以填写一些时间字段。就我而言，我想帮助用户做到这一点。我想为时间（01:55）做一个掩码输入，只接受用户输入四个数字。因此，当用户键入数字 01 时，在它后面加上这个 : 然后，用户可以键入 55。

你能帮我做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:11:53.983

绑定[更改事件](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/TextInput.html#event%3achange)，检查用户输入的内容，需要时添加冒号（':'）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:36:21.543

您可能想尝试一下 Yahoo 的[Flex Astra TimeInput 组件](http://developer.yahoo.com/flash/astra-flex/timeinput/)。它似乎像你描述的那样起作用。

相切

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:38:10.437

我在这里找到了一个很好的 maskTextInput [http://bolao.zzl.org/MaskedTextInput/srcview/index.html](http://bolao.zzl.org/MaskedTextInput/srcview/index.html)

# php - 大型网站上的 MySQLi Bulk Prepared 语句？

> ID：11525650
> 
> 赞同：1
> 
> 时间：2012-07-17T15:20:01.443
> 
> 标签：php, mysqli, prepared-statement, multiple-databases

我一直在挖掘堆栈和各种其他网站，寻找我问题的最佳答案。

我正在以信息管理系统的形式开发一个非常庞大且不断增长的网站怪物。它的核心是运行 PHP 和 MySQL。我刚刚更新了更一般意义上的 mysqli 代码，但没有充分利用所有功能。这是我现在正在努力的一部分。

我已经阅读了大量有关准备好的语句的内容，鉴于重复使用的语句数量，我当然需要使用它。

*   我正在考虑在大约 50 个准备好的语句的范围内制作，用于近 200 个不同的页面。有推荐的方法吗？我见过的所有例子都涉及 1 或 2。
*   由于站点的不断增长的性质，使用数据库等，我喜欢以前的 mysql 的一件事是它不需要为每个查询指定连接，但使用 mysqli。因此，我不得不调整我的功能。有没有推荐的解决方案？

我以程序形式而不是面向对象的形式构建了站点，但我总是对建议持开放态度，无论他们使用何种格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:15:20.303

我会尽量做到准确，但我不是专家。

*   您的第一点：您可能正在寻找[Stored Procedures](http://net.tutsplus.com/tutorials/an-introduction-to-stored-procedures/)。基本上，您可以存储应用程序的某些逻辑以供重复使用。

    然而，[Prepared Statements是不同的。](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html)它们基本上意味着“解析一次，执行多次”，但它们不存储在服务器上并跨连接执行。

    在 PHP 中，每个“页面加载”都是一个不同的线程，有自己的变量，因此它与数据库的连接，所以你不能真正再次使用[准备好的语句](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html)。

*   至于您的第二点，`mysql_query()`不需要将连接句柄传递给它，因为它假设您要使用最后创建的连接。

例如：

```
mysql_connect();
mysql_query("SELECT * FROM table"); 
```

和

```
$link = mysql_connect();
mysql_query("SELECT * FROM table", $link); 
```

是相同的。
因此，隐式使用连接并不意味着可扩展性。

就我所能写的而言，没有提供可能的错误信息，所以我强烈建议您真正阅读此内容，然后如果您有任何问题，这里的每个人都会很乐意回答。

# django - django tastepie : 使用中间模型获取 m2m 关系的额外值

> ID：11525651
> 
> 赞同：6
> 
> 时间：2012-07-17T15:20:04.430
> 
> 标签：django, many-to-many, tastypie, m2m

我正在尝试使用**中间**模型（**通过**关键字）将 Tastypie 与**ManyToMany 关系（** [https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many -关系](https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships)）

 ****我正在使用这些模型：

```
class Point(models.Model):
    ...
    value = models.FloatField(_('Value'), null=True)
    rooms = models.ManyToManyField('rooms.Room', through='points.PointPosition')

class Room(models.Model):
    title = models.CharField(max_length=64)

class PointPosition(models.Model):
    point = models.ForeignKey('points.Point', verbose_name=_('Point'))
    room = models.ForeignKey('rooms.Room', verbose_name=_('Room'))
    x = models.IntegerField(_('Y'))
    y = models.IntegerField(_('X')) 
```

我已经能够获取多对多关系，但**不能获取额外的字段**。这是我的美味派代码：

```
class PointResource(ModelResource):
    class Meta:
        queryset = Point.objects.select_related(
            depth=10
            ).prefetch_related('rooms').all()
        resource_name = 'point'
        allowed_methods = ['get']

    ...
    value = fields.FloatField()
    rooms = fields.ToManyField('rooms.api.RoomResource', 'rooms', full=True)

class RoomResource(ModelResource):
    class Meta:
        queryset = Room.objects.all()
        resource_name = 'room'
        allowed_methods = ['get'] 
```

我一直在尝试使用一种方法来**水合我的****PointResource**中的房间变量，如下所示：

```
def dehydrate_rooms(self, bundle):                                                                                                                                                                                                                          
    rooms = []                                                                                                                                                                                                                                              
    for room in bundle.obj.rooms.all():                                                                                                                                                                                                                     
        position = PointPosition.objects.get(                                                                                                                                                                                                               
            room_id = room.pk,                                                                                                                                                                                                                              
            point_id = bundle.obj.pk)                                                                                                                                                                                                                                               
        rooms.append({'id': room.pk,                                                                                                                                                                                                                                 
             'title': room.title,                                                                                                                                                                                                                           
             'x': position.x,                                                                                                                                                                                                                               
             'y': position.y})                                                                                                                                                                                                                                               
    return rooms 
```

但问题是它会创建与我的积分一样多的查询：当您拥有 +8000 积分时，它是一个真正的**性能杀手。**

我还没有找到任何有用的资源来获得性能。我正在考虑使用可用于 QuerySet 的 .extra() 方法进行自定义查询，但 JOIN 关键字不可用（该补丁几个月前已被拒绝）。而且我不确定 SELECT 子查询是否能解决问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T20:00:27.050

您是否考虑过更改查询集以使用该`PointPosition`资源？从它的声音看，“Point”在您的数据库中的含义实际上与“Point”在您的 API 中的含义不同，因此需要进行一些翻译来隐藏内部细节：

```
class PointResource(ModelResource):
    class Meta:
        queryset = PointPosition.objects.select_related("point", "room")
        resource_name = 'point'
        allowed_methods = ('get', ) 
```

以需要调整过滤参数为代价，这将避免需要执行多个查询。您的`dehydrate`方法可以根据需要交换数据。您还可以通过使用`.values()`仅提取必要字段作为字典而不是完整对象来节省一些开销。****

# c# - Alternative ways to load / save data - without serialization?

> ID：11525658
> 
> 赞同：2
> 
> 时间：2012-07-17T15:20:22.293
> 
> 标签：c#, serialization, data-storage, data-containers

Ok. I know how to use Serialization and such, but since that only applies to Objects that's been marked with Serialization attribute - how can I for example load data and use it in an application without using Serialization? Say a data file.

Or, create a datacontainer with serialization that holds files not serialized.

Methods I've used is Binary Serialization and XML Serialization. Any other ways that can load unknown data and perhaps somehow use it in C#?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T15:29:45.817

[使用JSON.NET](http://json.codeplex.com/)进行 JSON 序列化

这*吃掉了*一切！包括匿名类型。

**编辑**

我知道您说“您不想要序列化”，但根据您的陈述“[...] 标记有序列化属性的对象”，我相信您没有尝试使用 JSON.NET 进行 JSON 序列化！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T15:59:04.300

也许术语的定义是有序的；序列化是“将数据结构或对象状态转换为可以在同一或另一个计算机环境中存储和“复活”的格式的过程”。几乎任何将“易失性”内存转换为持久数据并返回的方法都是“序列化”，因此即使您推出自己的方案来做到这一点，您也是在“序列化”。

也就是说，听起来您根本不想使用 .NET 二进制序列化。这实际上是正确的想法。二进制序列化很简单，但非常依赖于代码和环境。将可序列化的类移动到不同的命名空间，或使用 Microsoft CLR 序列化文件然后尝试在 Mono 中反序列化它，可能会破坏二进制序列化。

首先，您必须能够根据文件确定您应该尝试创建的对象类型。您根本无法打开某个“随机”文件并期望能够在不知道文件中数据的结构的情况下从中获得任何有意义的东西。最简单的方法是文件告诉您，通过指定创建它的对象的类型名称（您希望在您的代码库中可用）。大多数内置序列化程序都是这样做的。文件可以告知消费者其格式的其他方式包括文件、行和/或字段标题代码（在旧标准中很常见，因为它们节省了文件大小）和扩展名/MIME 类型。

整理好之后，就可以进行反序列化了。如果文件是使用内置序列化程序序列化的，只需使用它，但如果它是较旧的格式（CSV，固定长度），那么您将不得不逐行解析文件，将其解析为代表行的对象，收集在一个代表文件的主要对象。

看看 ETL（提取-转换-加载）过程模式。这是一种模块化、可扩展的架构模式，用于获取文件并将它们转换为程序可以使用的数据：

*   提取 - 系统的这一部分指向文件系统，或其他传入的原始数据“管道”，它的工作是打开文件，将数据提取为可以进一步操作的非常基本的对象格式，然后将那些将对象放入内存中的“队列”中以进行转换步骤。目标是尽可能快速有效地从管道中获取数据，但此时您需要对正在处理的数据有一定的了解，以便有效地封装数据以进行进一步处理；实际上将数据转换为您真正想要的格式会在稍后发生。
*   转换 - 系统的这一部分获取提取的数据，并执行将数据放入代码库中的水合对象的逻辑。在这里，根据提取步骤中有关提取数据的文件类型的信息，您可以实例化一个表示数据模型的域对象，将原始数据分割成将作为数据成员存储的块，执行任何类型转换（您从文件中获取的数据通常是字符串格式或原始位，必须进行编组或以其他方式转换为更好地表示数据概念的数据类型），并验证新对象的内部结构是一致并符合已知的业务规则。水合的有效对象被放置在输出队列中以由加载步骤处理。
*   加载 - 此步骤从转换步骤获取水合的有效业务对象，并将它们持久保存到系统使用的数据存储中（例如 SQL 数据库或程序的本机平面文件格式）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T15:40:22.127

好吧，老式的方法是使用流访问操作并读出您想要的数据。这样你就可以读/写几乎任何文件。序列化只是根据一些合同自动化这个过程。

根据您的评论，我猜您的要求是在没有合同的情况下阅读任何类型的文件。

假设您有一个原始文件，其中第一个字节指定字符串的长度，下一组字节表示字符串；

例如，`5 | H | e | l | l | o`

```
var stream = File.Open(filename);
var length = stream.ReadByte();
byte[] b = new byte[length];

stream.Read(b, 0, length);

var string = Encoding.ASCII.GetString(b); 
```

二进制 I/O 是最原始的。 [查看 MSDN 了解更多信息。](http://msdn.microsoft.com/en-us/library/336wast5)

# vb6 - Late Binding DirectX DirectSound in VB6

> ID：11525662
> 
> 赞同：0
> 
> 时间：2012-07-17T15:20:41.200
> 
> 标签：vb6, directx, late-binding

I am working on a DirectSound application which needs to work both on WindowsXP and Windows7\. The objects used are simply sound buffers, but are currently early bound:

```
Private dx As DirectX8  
Private ds As DirectSound8 
Private mdsBuf As DSBUFFERDESC
Private mdsBuffer(7) As DirectSoundSecondaryBuffer8 
```

Firstly, how do I late bind these using CreateObject? What are the ProgId's? I guess something like:

```
Dim dx As Object
Set dx = CreateObject("DIRECT.DirectX8.0") 
```

Secondly, I believe Windows7 uses DirectX 11\. Are there equivalent ProgId's? Or is the object model different?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:28:57.937

您是否已通读[Visual Basic 6.0 DirectX 应用程序无法在 Windows Vista 及更高版本上运行](http://support.microsoft.com/kb/971028)？

结果是不再支持来自 VB6 的 DirectX。

# javascript - 如何让 Mercury Editor 重定向到新资源？

> ID：11525665
> 
> 赞同：5
> 
> 时间：2012-07-17T15:20:45.227
> 
> 标签：javascript, ruby-on-rails, mercury-editor

在观看[RailsCast #296 about Mercury Editor](http://railscasts.com/episodes/296-mercury-editor)之后，我试图让编辑器重定向到新创建的资源。

我已经可以使用 JS 和`window.location.href=`. 但是对于一个新资源，我无法在客户端“猜测”它的 URL。我需要它在服务器响应中。

但是，问题是我看不到在编辑器中使用服务器响应的可能性。无论控制器呈现什么，Mercury 都会[丢弃](https://github.com/jejacks0n/mercury/blob/c4765034e47825c38530b2dd9adf7a05e5c325bb/app/assets/javascripts/mercury/page_editor.js.coffee#L242)服务器响应，而不是将其用作我的函数的参数`mercury:saved`。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T16:38:10.127

通过发回有效的 JSON 字符串，我能够在更新时做到这一点。我会假设 create 以相同的方式工作。检查 firebug 以确保您在 Mercury 使用的 jQuery.ajax 调用中没有收到错误。

post_controller.rb

```
def mercury_update
  post = Post.find(params[:id])
  post.title = params[:content][:post_title][:value]
  post.body = params[:content][:post_body][:value]
  post.save!
  render text: '{"url":"'+ post_path(post.slug) +'"}'
end 
```

水银.js：

```
 jQuery(window).on('mercury:ready', function() {
    Mercury.on('saved', function() {
       window.location.href = arguments[1].url      
    });
  }); 
```

注意：我正在使用[friendly_id](https://github.com/norman/friendly_id)来发布我的帖子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T06:48:38.527

在服务器端重定向不起作用，因为保存按钮只是一个`jQuery.ajax`调用：

```
// page_editor.js
PageEditor.prototype.save = function(callback) {
      var data, method, options, url, _ref, _ref1,
        _this = this;
      url = (_ref = (_ref1 = this.saveUrl) != null ? _ref1 : Mercury.saveUrl) != null ? _ref : this.iframeSrc();
      data = this.serialize();
      data = {
        content: data
      };
      if (this.options.saveMethod === 'POST') {
        method = 'POST';
      } else {
        method = 'PUT';
        data['_method'] = method;
      }
      Mercury.log('saving', data);
      options = {
        headers: Mercury.ajaxHeaders(),
        type: method,
        dataType: this.options.saveDataType,
        data: data,
        success: function(response) {
          Mercury.changes = false;
          Mercury.trigger('saved', response);
          if (typeof callback === 'function') {
            return callback();
          }
        },
        error: function(response) {
          Mercury.trigger('save_failed', response);
          return Mercury.notify('Mercury was unable to save to the url: %s', url);
        }
      };
      if (this.options.saveStyle !== 'form') {
        options['data'] = jQuery.toJSON(data);
        options['contentType'] = 'application/json';
      }
      return jQuery.ajax(url, options);
    }; 
```

因此，您的重定向被发送到`success`回调，但页面实际上并没有重新呈现，就像任何成功的 AJAX 请求一样。作者在[这里](https://github.com/jejacks0n/mercury/wiki/Extending-Mercury)讨论了重写这个函数。通过将回调函数传递给`save`.

顺便说一句，做@corneliusk 建议的另一种方法是：

```
render { json: {url: post_path(post.slug)} } 
```

无论哪种方式，响应主体都作为参数传递给`mercury:saved`回调中的函数。

# android - android content activitynotfoundexception no activity found to handle intent - when trying to go to url

> ID：11525666
> 
> 赞同：5
> 
> 时间：2012-07-17T15:20:48.833
> 
> 标签：android, android-intent

I am trying to write an app where you can type in an address and then you get redirected to google maps. (I suppose this is called implicit intent)

-I have created an intent to launch the main activity, which is the only activity in my app. The Main activity consists of some text, an editfield and a button.

AndroidManifest.xml:

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.where_do_you_live"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
<uses-permission android:name="android.permission.INTERNET" />

</manifest> 
```

this is the code for the button:

```
public void Button1Click(View view)
{       
    try
    {
        addressField=(EditText)findViewById(R.id.address);

        String address=addressField.getText().toString();
        address=address.replace(' ','+');
        Intent geoIntent=new Intent(android.content.Intent.ACTION_VIEW,
            Uri.parse("geo:0,0?q=" + address));
        startActivity(geoIntent);

    }

    catch(Exception e)
    {
        TextView tv=(TextView)findViewById(R.id.textView1);
        tv.setText(e.toString());
        //finding stuff

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T17:54:48.500

如果您在模拟器中对此进行测试，则情况与在设备中不同。

创建 Android 虚拟设备时，应选择 Google API 作为目标。如果您没有安装它们，您可以使用 SDK Manager 下载它。

看看[这个](https://developers.google.com/android/add-ons/google-apis/)。

![在此处输入图像描述](../Images/71f9e1b6311ba211f0106357c8407d95.png)

# c# - 有没有办法说一个 IList 既是一个特定的类又是一个接口

> ID：11525678
> 
> 赞同：4
> 
> 时间：2012-07-17T15:21:19.220
> 
> 标签：c#, ilist

我想将一个属性声明为：

```
IList<BaseNode and IComplexType> ComplexTypes { get; } 
```

列表中的所有元素都继承自 BaseNode 并实现 IComplexType。有没有办法做到这一点？创建类 BaseNodeComplexType 是行不通的，因为列表中的节点都是 BaseNode 的子类。

**更新：**我没有想到要充分解释这一点。我有 XmlNode 等子类。XmlNode 继承自 BaseNode。我还有从 XmlNode 继承并实现 IComplexType 的 XmlComplexNode。但是 XmlNode 不继承自 IComplexType（而且我不希望它继承，因为我在某些地方使用“obj is IComplexType”。很抱歉最初没有添加它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T15:26:03.107

不，但你可以用泛型解决它？

```
class CustomObj<T> where T : BaseNode, IComplexType
{
   IList<T> ComplexTypes { get; }
} 
```

有关使用的通用约束的更多详细信息，请参阅[此页面](http://msdn.microsoft.com/en-US/library/d5x73970%28v=vs.100%29)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-17T15:25:10.890

正确的行为是派生一个新类，即`ComplexBaseNode`它同时具有 BaseNode 的继承特性和接口 IComplexType，不是吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T15:26:39.237

没有直接的方法可以做到这一点。

但是您可以使用泛型来实现：泛型类型参数呢？

```
public class YourClass<T> 
  where T : BaseNode, IComplexType 
```

...您的财产将如下所示：

```
IList<T> ComplexTypes { get; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T15:25:44.120

你住在哪里`IList<>`。如果您使用通用参数`xxx`（来自您的标题），您可以说`where xxx : BaseNode, IComplexType`.

还要考虑是否`BaseNode`已经可以实现`IComplexType`，可能是抽象的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-17T15:46:26.590

的定义 `IList<T>`意味着您只能为列表中的元素指定一种类型。

创建一个容器类：`ComplexNodeContainer<T,U>`当 T=BaseNode 和 U=IComplexType 时，它​​将包含实现 IComplexType 的 BaseNode 对象。

当您设置“包含”对象时（最好在构造函数中，或通过方法/属性），您可以检查它是否实现了这两种类型，并采取相应的行动。

您可以有两个属性来检索它，一个作为类型`T`（或`BaseNode`），一个作为类型`U`（或`IComplexType`在本例中）。

然后您可以将您的属性定义为：`IList<ComplexNodeContainer>`

# javascript - 如何单击 OpenLayers 上的标记

> ID：11525679
> 
> 赞同：5
> 
> 时间：2012-07-17T15:21:19.937
> 
> 标签：javascript, jquery, openlayers

我只是使用openlayer制作地图

我用我们自己的自制在 OpenLayers 中制作了一张地图

但让我感到困惑的是，我无法将 jQuery 与 OpenLayers 集成，我在其中创建了一个简单的 jQuery 函数`show / hide ()`

我试图单击我制作的 OpenLayers 地图中的一个标记，该标记在 OpenLayers`#OL_Icon_43`内部具有 id`div#map`并且我尝试在标记中`hide()`使用 jquery 执行该功能，该`<head>`标记将隐藏标记外部的标记`#map`，但这对我不起作用

你能帮我吗 ？

这是我制作 jquery 代码的视图：

```
$(document).ready(function(){
   $("#OL_Icon_43").click(function() {
     $("footer").hide();
   });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T15:31:50.097

`#OL_Icon_43`当您尝试绑定单击事件时，jQuery 可能无法找到该元素。相反，您最好[委派一个点击事件。](http://api.jquery.com/delegate/)`#map`

```
$('#map').delegate('#OL_Icon_43', 'click', function() {
  $('#footer').hide();
}); 
```

* * *

**编辑**：看起来 OpenLayers 允许您将事件直接绑定到您的[标记](http://docs.openlayers.org/library/overlays.html#marker-overlays)。

```
var marker = new OpenLayers.Marker(lonlat);
marker.id = "1";
marker.events.register("click", marker, function() {
  $('footer').hide();
}); 
```

您只需要确保 jQuery 在 OpenLayers 之前已加载，这样您就可以隐藏页脚。我建议将您的 javascript 标签移动到页面底部的结束`</body>`标签之前。

# dependencies - Should I choose many-to-many instead many-to-one to avoid changing old common entities?

> ID：11525680
> 
> 赞同：0
> 
> 时间：2012-07-17T15:21:25.943
> 
> 标签：dependencies, many-to-many, many-to-one

Example first to make my question clear:

Tested old entity in Common Project: Posology entity (fields: unit, nuberperintake)

Entity in new Project: PatientMedication(fields: drugId, patientId)

PatientMedication may have multiple Posologies for a patient in different time.

I could add one field(column) 'PatientMedicationId' into Posology to have this many-to-one relation. But the thing is that it will change the entity in Common project and make it dependent on the new project.

So I am thinking that maybe I should use many-to-many to have this relation without introduce this dependency.

Is it a good solution? Is there any other idea?

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:23:29.250

使用多对多 - 并包括日期范围。

从长远来看，这将是最灵活的解决方案。

编辑：

```
example_link_table
----------------------
id_1
id_2
begin_date
end_date 
```

这样，您可以指示该关系何时有效。

# java - Spring 3 MVC 和 JDBC 的结果集返回 null

> ID：11525682
> 
> 赞同：0
> 
> 时间：2012-07-17T15:21:32.557
> 
> 标签：java, spring, spring-mvc, jdbc

嗨，我是这个 Spring 、MVC 和 JdBC 支持的新手。我希望能够连接到 mysql 数据库..但是当我运行我的网络时它返回 null。我相信下面的代码应该很简单，我在这里缺少什么？感谢所有回复

以下是我尝试查询 URL 时的错误

```
java.lang.NullPointerException
com.simple.myacc.dao.JdbcContactDao.findAll(JdbcContactDao.java:55)
com.simple.myacc.ContactController.getAll(ContactController.java:44) 
```

**我的 spring.xml**

```
.....

<context:component-scan base-package="com.simple.myacc" />

<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>/WEB-INF/jsp/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean>

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:3306/webcontact" />
    <property name="username" value="root" />
    <property name="password" value="password" />
</bean>

<bean id="jdbcContactDao" class="com.simple.myacc.dao.JdbcContactDao">
    <property name="dataSource" ref="dataSource" />
</bean> 
```

**我的 JdbcContactDao**

```
public class JdbcContactDao {
protected static Logger logger = Logger.getLogger("service");
private DataSource dataSource;
private JdbcTemplate jdbcTemplate;

public JdbcContactDao() {

}

public List<Contact> findAll() {

    String sql = "select * from contact";
    List<Contact> contacts = new ArrayList<Contact>();
    List<Map<String, Object>> rows = jdbcTemplate.queryForList(sql);
    for (Map rs : rows) {
        Contact contact = new Contact();
        contact.setId((Integer) rs.get("id"));
        contact.setFirstname((String) rs.get("firstname"));
        contact.setLastname((String) rs.get("lastname"));
        contact.setEmail((String) rs.get("email"));
        contact.setPhone((String) rs.get("phone"));
        contacts.add(contact);
    }
    return contacts;
}

@Resource(name = "dataSource")
public void setDataSource(DataSource dataSource) {
    this.dataSource = dataSource;

} } 
```

**我的控制器，它的一部分**

```
@RequestMapping(value="/contact/list2",method = RequestMethod.GET)
public String getAll(ModelMap model) {
    dao=new JdbcContactDao();
    List<Contact> contacts = dao.findAll();

     // Attach persons to the Model
     model.addAttribute("contacts", contacts);

     return "contact.list";

} 
```

这是说 NULL 的行

```
 List<Map<String, Object>> rows = jdbcTemplate.queryForList(sql); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:38:51.393

使用 JdbcTemplate 类时的一个常见习惯用法是在 Spring 配置文件中配置 DataSource，然后将共享的 DataSource bean 依赖注入到 DAO 类中；JdbcTemplate 在数据源的设置器中创建。私有 JdbcTemplate jdbcTemplate;

```
public void setDataSource(DataSource dataSource) {
    this.jdbcTemplate = new JdbcTemplate(dataSource);
} 
```

[您可以在此处](http://static.springsource.org/spring/docs/3.0.x/reference/jdbc.html)阅读更多信息

您的代码将如下所示

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
<property name="driverClassName" value="com.mysql.jdbc.Driver" />
<property name="url" value="jdbc:mysql://localhost:3306/webcontact" />
<property name="username" value="root" />
<property name="password" value="password" /> 
```

你不需要这个

```
<bean id="jdbcContactDao" class="com.simple.myacc.dao.JdbcContactDao">
<property name="dataSource" ref="dataSource" /> 
```

而是这样做

```
 @Autowired
public void setDataSource(DataSource dataSource) {
    this.jdbcTemplate = new JdbcTemplate(dataSource);
} 
```

并用 @Repository 注释你的 JdbcContactDao 类我认为这应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:25:33.183

我猜 JdbcContactDao 的第 55 行是这个`List<Map<String, Object>> rows = jdbcTemplate.queryForList(sql);` 你声明了 jdbcTemplate，但从不给它一个值，它也没有为注入注解，所以它总是为空。因此，当您尝试使用它时，您将获得 NPE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T15:45:51.743

您已经在配置文件中配置了 dataSource 和 JdbcContactDAO bean。因此，您需要以同样的方式将 jdbcContactDAO bean 注入到您的控制器中。

```
<bean id="myController" class="mypath.MyController">
<property name="dao" ref="jdbcContactDao"/>
</bean> 
```

在你的控制器中......

```
public JdbcContactDao dao;

@Resource(name="dao")
public void setDao(JdbcContactDao dao){
    this.dao = dao;
}

@RequestMapping(value="/contact/list2",method = RequestMethod.GET)
public String getAll(ModelMap model) {

    List<Contact> contacts = dao.findAll();

    // Attach persons to the Model
    model.addAttribute("contacts", contacts);

    return "contact.list";

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-22T20:17:59.717

有一个类似的问题是使用 java/jdbc String sql = "select user_name from table" 连接到旧表

```
jdbc.queryForList(sql); 

queryReturnList = jdbc.queryForList(sql);  

    for (Map mp : queryReturnList){          
        String userName = (String)mp.get("user_name");          
} 
```

用户名始终为空。查看返回值的映射发现该映射没有使用用户名，而是在“用户名”表上设置的标签必须有 DBA 的修复。希望这可以帮助

# php - 使用PHP从文本字符串中提取值？

> ID：11525684
> 
> 赞同：0
> 
> 时间：2012-07-17T15:21:37.177
> 
> 标签：php, string, extract, recurly

使用 Recurly API，将返回以下文本。我想弄清楚的是用 PHP 从这个字符串中提取值并将它们放入 PHP 变量中的最简单方法。

我已经查看了 PHP 手册中的各种方法来查找文本，但是对于 PHP 来说是新手，在我发现它们的位置对我来说仍然不明显之后实际获取值的确切过程。

例如，我将如何提取值`plan_code`并删除值周围的引号以使结果为`$plan = 'starter'`？

> Recurly_Subscription[href=https://api.recurly.com/v2/subscriptions/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx] account=<Recurly_Stub[account] href=https://api.recurly.com/v2/accounts/1>,activated_at="2012 -07-14 12:55:47 +00:00", 货币="美元", current_period_ends_at="2012-08-14 12:55:47 +00:00", current_period_started_at="2012-07-14 12: 55:47 +00:00", plan="Recurly_Plan[href=https://api.recurly.com/v2/plans/starter] name="Starter", plan_code="starter", setup_fee_in_cents="<Recurly_CurrencyList [ ]>", unit_amount_in_cents="<Recurly_CurrencyList []>">", quantity=2, state="active", subscription_add_ons=[], unit_amount_in_cents=1200, uuid="1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx3"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T18:53:48.723

你可以使用 Recurly 的 PHP API：

```
$result = Recurly_js::fetch($_POST['recurly_token']);
$plan = $result->plan_code; 
```

令牌是一个订阅对象。然后，您可以检索有关该帐户及其帐单信息的其他信息，如下所示：

```
$account = $result->account->get();
$billing = $account->billing_info->get(); 
```

从帐户中检索字段（例如帐户持有人的名字）及其帐单信息（例如信用卡记录的最后 4 位数字），与上面获取 plan_code 的方式相同。

执行上述操作比在 Recurly 的文档中查找方法要容易得多！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T15:37:30.537

一个技巧是将其转换为查询字符串语法并使用 parse_str(original, array)。

```
$original = 'Recurly_Subscription[href=https://api.recurly.com/v2/subscriptions/xxxxxxxxxxxxxxxxxxxxxxxxxxxx] account=, activated_at="2012-07-14 12:55:47 +00:00", currency="USD", current_period_ends_at="2012-08-14 12:55:47 +00:00", current_period_started_at="2012-07-14 12:55:47 +00:00", plan="Recurly_Plan[href=https://api.recurly.com/v2/plans/starter] name="Starter", plan_code="starter", setup_fee_in_cents="", unit_amount_in_cents="">", quantity=2, state="active", subscription_add_ons=[], unit_amount_in_cents=1200, uuid="1xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx3"';

$newstring = str_replace(", ", "&", $original);  // turns into querystring format &var=val
// you may need to use addslashes and/or replace the double quotes surrounding vars. 
```

接下来，您使用 parse_str 并构建一个名称/值的关联数组：

```
parse_str($newstring, $myarray); 
```

然后你可以打印出来看看它的外观和调整：

```
print_r($myarray); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T15:50:04.177

几种方法来处理这个。

可能是最简单的一个：查看 API 是否可以获得更符合标准的结果。PHP 具有处理 XML、JSON 和其他几种格式的内置函数，因此您可以获得可以访问信息位的数组或对象。

使用这种格式的一种可能方法：在 处`,`拆分，在 处再次拆分`=`以获取键 => 值对。（不过，你可能需要剪掉第一行，因为`,`在那之后我看不到。）粗略的草图，未经测试：

```
<?php $result = your_api_call();
$chunks = explode(',', $result);
$resultAsArray = array();
foreach ($chunks as $biggerPart) {
   $parts = explode('=', $biggerPart);
   $tmpKey = trim($parts[0]);
   $tmpValue = str_replace('"', '', $parts[1]);
   $resultAsArray[$tmpKey] = $tmpValue;
}

echo $resultAsArray['plan_code']; 
```

# java - 我可以将 SimpleJaxWsServiceExporter 与 javax.servlet.Filter 一起使用吗？

> ID：11525690
> 
> 赞同：0
> 
> 时间：2012-07-17T15:21:53.947
> 
> 标签：java, spring, jax-ws, servlet-filters, jespa

我想使用 Spring 设置一个 web 服务端点[`SimpleJaxWsServiceExporter`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/remoting/jaxws/SimpleJaxWsServiceExporter.html)以便于使用，但我还需要使用 Jespa 的子类来保护 web 服务[`HttpSecurityFilter`](http://www.ioplex.com/d/jespa/api/jespa/http/HttpSecurityFilter.html)

我怀疑这不能开箱`SimpleJaxWsServiceExporter`即用，因为使用单独的 HTTP 服务器连接到包含过滤器的主机 webapp - 我应该如何完成这个？

我有一个用[`@WebService`](http://docs.oracle.com/javase/6/docs/api/javax/jws/WebService.html)和在我的`applicationContext.xml`

```
<bean class="org.springframework.remoting.jaxws.SimpleJaxWsServiceExporter"
        p:baseAddress="http://localhost:9581/"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:01:42.837

我发现了几种在同一 HTTP 服务器中托管端点的替代方法（在过滤器后面）

使用 JAX-WS [WSSpringServlet](http://jax-ws-commons.java.net/spring/)并通过命名空间下的 xml 标记注册我的`@WebService`bean ，或者我的首选选项，因为 JAX-WS Spring 集成使用[CXF](http://cxf.apache.org/docs/writing-a-service-with-spring.html)对 Spring 2 具有 Maven 依赖项。`wss:binding``http://jax-ws.dev.java.net/spring/servlet`

# java - EclipseLink MOXy with spring MVC for RESTful services not working for JSON

> ID：11525693
> 
> 赞同：1
> 
> 时间：2012-07-17T15:22:01.983
> 
> 标签：java, eclipselink, weblogic-10.x, moxy

Here is the situation.

When I use [**EclipseLink MOXy**](http://www.eclipse.org/eclipselink/moxy.php) with Spring 3 MVC to generate JSON output it throws following exception when I try to set the json media type with following statement.

**marshaller.setProperty(JAXBContextProperties.MEDIA_TYPE, "application/json");**

```
javax.xml.bind.PropertyException: name: eclipselink.media-type value: application/json
    at org.eclipse.persistence.jaxb.JAXBMarshaller.setProperty(JAXBMarshaller.java:520)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:574)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125) 
```

I am using JAXBviews too to generate xml output for other services in the application. Here is the beans declaration in application-context.xml for the same.

```
<bean id="jaxbMarshaller"    class="com.abc.restws.marshallers.ClasspathScanningJaxb2Marshaller">
    <property name="basePackages" ref="jaxbBasePackages" />
</bean> 

    <bean id="jaxbMarshallingView" class="org.springframework.web.servlet.view.xml.MarshallingView">
        <property name="marshaller" ref="jaxbMarshaller"/>
    </bean> 
    <bean id="jaxbJsonMarshallingView" class="org.springframework.web.servlet.view.xml.MarshallingView">
        <property name="contentType" value="application/json"/>
        <property name="marshaller" ref="jaxbJsonMarshaller"/>
    </bean> 
```

What's the reason for this error? How can i fix this error? XML output is generated fine but for JSON it throws this exception. You can see in the exception details it's using correct JAXBMarshaller class too to set the json media type. Please advice.

**"org.eclipse.persistence.jaxb.JAXBMarshaller.setProperty(JAXBMarshaller.java:520)"**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:59:08.093

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

JSON 绑定在 2.4 版中添加到 EclipseLink，您使用的是包含 EclipseLink 2.1.2 的 WebLogic 10.3.4 (11g)。此问题的推荐解决方案是在 WebLogic 中为较新版本的 EclipseLink 创建一个共享库。

**创建共享库**

WebLogic 有[共享库](http://docs.oracle.com/cd/E17904_01/web.1111/e13706/libraries.htm#i1064656)的概念。这些被部署为 EAR。下面是 EAR 在为 EclipseLink 2.4 创建共享库时的样子。

**EclipseLink24.ear**

*   库/eclipselink.jar
*   META-INF/application.xml
*   元信息/清单.MF
*   META-INF/weblogic-application.xml

***应用程序.xml***

```
<application>
  <display-name>EclipseLink 2.4 Shared Library</display-name>
  <module>
    <java></java>
  </module>
</application> 
```

***清单文件***

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.2
Created-By: 1.7.0_04-b21 (Oracle Corporation)
Extension-Name: EclipseLink-2.4.0
Specification-Version: 2.4.0
Implementation-Version: 2.4.0.v20120608-r11652 
```

***weblogic-application.xml***

```
<weblogic-application>
  <prefer-application-packages>
    <package-name>org.eclipse.persistence.*</package-name>
  </prefer-application-packages>
</weblogic-application> 
```

**使用共享库**

部署共享库后，您需要配置企业应用程序以使用它。

**示例应用程序.ear**

*   元信息/清单.MF
*   META-INF/weblogic-application.xml
*   SampleApplication.war

***weblogic-application.xml***

该`weblogic-application.xml`文件用于引用共享库。元素中的条目`library-ref`需要与共享库中 MANIFEST.MF 中的相应条目相匹配。

```
<?xml version="1.0" encoding="UTF-8"?>
<wls:weblogic-application xmlns:wls="http://xmlns.oracle.com/weblogic/weblogic-application" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/javaee_5.xsd http://xmlns.oracle.com/weblogic/weblogic-application http://xmlns.oracle.com/weblogic/weblogic-application/1.2/weblogic-application.xsd">
    <!--weblogic-version:10.3.4-->
    <wls:application-param>
        <wls:param-name>webapp.encoding.default</wls:param-name>
        <wls:param-value>UTF-8</wls:param-value>
    </wls:application-param>
    <wls:library-ref>
        <wls:library-name>EclipseLink-2.4.0</wls:library-name>
        <wls:specification-version>2.4.0</wls:specification-version>
        <wls:implementation-version>2.4.0.v20120608-r11652</wls:implementation-version>
        <wls:exact-match>true</wls:exact-match>
    </wls:library-ref>
</wls:weblogic-application> 
```

***测试服务程序***

下面是一个测试 servlet，您可以将其包含在 WAR 中以测试 EclipseLink 版本。

```
package com.example;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class TestServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    public TestServlet() {
        super();
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.append("<html><body>");
        out.append(org.eclipse.persistence.Version.getVersion());
        out.append("</body></html>");
    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    }

} 
```

**了解更多信息**

*   [http://buttso.blogspot.com/2011/07/plugging-in-later-version-of.html](http://buttso.blogspot.com/2011/07/plugging-in-later-version-of.html)

# c - 如何在 Simulink 中使用二维数组的输入端口创建 s-function？

> ID：11525701
> 
> 赞同：4
> 
> 时间：2012-07-17T15:22:33.353
> 
> 标签：c, matlab, simulink

我正在尝试使用将接受二维数组作为输入的 s-function 构建器在 Simulink 中创建一个 s-function。在输入端口中，我指定了尺寸：2d，行：4，列：4。当我尝试使用 f[x][y] 访问输入端口时，它会给出错误：“错误 C2109：下标需要数组或指针type”，用于输入端口被寻址的行。

如何在 Simulink 中使用二维数组的输入端口创建 s-function？

相关代码：

```
static void mdlInitializeSizes(SimStruct *S)
{
  DECL_AND_INIT_DIMSINFO(inputDimsInfo);
  DECL_AND_INIT_DIMSINFO(outputDimsInfo);
  ssSetNumSFcnParams(S, NPARAMS);
  if (ssGetNumSFcnParams(S) != ssGetSFcnParamsCount(S)) {
  return; /* Parameter mismatch will be reported by Simulink */
  }

  ssSetNumContStates(S, NUM_CONT_STATES);
  ssSetNumDiscStates(S, NUM_DISC_STATES);

  if (!ssSetNumInputPorts(S, NUM_INPUTS)) return;
  /*Input Port 0 */
  inputDimsInfo.width = INPUT_0_WIDTH;
  ssSetInputPortDimensionInfo(S, 0, &inputDimsInfo);
  ssSetInputPortMatrixDimensions( S ,0, INPUT_0_WIDTH, INPUT_DIMS_0_COL);
  ssSetInputPortFrameData(S, 0, IN_0_FRAME_BASED);
  ssSetInputPortDataType(S, 0, SS_DOUBLE);
  ssSetInputPortComplexSignal(S, 0, INPUT_0_COMPLEX);
  ssSetInputPortDirectFeedThrough(S, 0, INPUT_0_FEEDTHROUGH);
  ssSetInputPortRequiredContiguous(S, 0, 1); /*direct input signal access*/

  if (!ssSetNumOutputPorts(S, NUM_OUTPUTS)) return;

  ssSetNumSampleTimes(S, 1);
  ssSetNumRWork(S, 0);
  ssSetNumIWork(S, 0);
  ssSetNumPWork(S, 0);
  ssSetNumModes(S, 0);
  ssSetNumNonsampledZCs(S, 0);

  /* Take care when specifying exception free code – see sfuntmpl_doc.c */
  ssSetOptions(S, (SS_OPTION_EXCEPTION_FREE_CODE |
  SS_OPTION_USE_TLC_WITH_ACCELERATOR |
  SS_OPTION_WORKS_WITH_CODE_REUSE));
} 
```

在`mdlOuputs`我尝试将`f`（端口）视为普通数组。例子：

```
x=f[0][0]; 
```

这会引发错误。

编辑：嗯，有点想通了。

您根据输入参数设置端口尺寸，然后您可以使用 f[x*xw+y] 处理这些值，其中 x 和 y 是 x 和 y 位置（从 0 开始），xw 是列数。

还没有找到更好的方法，但这有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:28:06.223

我猜 S-Function 构建器正在生成如下所示的代码`mdlOutputs`：

```
real_T *y0 = (real_T *)ssGetOutputPortSignal(S, 0);
// OR 
real_T *y0 = ssGetOutputPortRealSignal(S, 0); 
```

任何一行`y0`都是指向一维数组的指针，因此当您尝试使用 2 个下标访问它时，就好像它是一个二维数组一样，编译器会报错。

您可以通过将二维索引更改为线性索引来修复它，就像您在编辑中发布的那样。这工作得很好，事实上，当您使用 2 个下标对二维数组进行索引时，编译器无论如何都必须在幕后执行此操作。

`ssGetInputPortSignal`另一种选择是将(or `ssGetInputPortRealSignal`)的返回值转换为*指向指针类型*的指针。

```
real_T **y0 = (real_T **)ssGetOutputPortSignal(S, 0);

y0[1][1] = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-25T18:57:29.137

正如您在编辑中提到的，使用线性索引实际上是访问 C MEX s 函数中的矩阵的正确方法。查看 sfun_matadd.c 函数示例中的 mdlOutputs：[http](http://www.ligo.caltech.edu/~rana/mat/Jenne/sfun_matadd.c) ://www.ligo.caltech.edu/~rana/mat/Jenne/sfun_matadd.c 。示例代码中的注释非常简洁地解释了它：

```
 /* 
 * Note1: Matrix signals are stored in column major order.
 * Note2: Access each matrix element by one index not two indices.
 *        For example, if the output signal is a [2x2] matrix signal,
 *        -          - 
 *       | y[0]  y[2] |
 *       | y[1]  y[3] |
 *       -           -
 *       Output elements are stored as follows:
 *           y[0] --> row = 0, col = 0
 *           y[1] --> row = 1, col = 0
 *           y[2] --> row = 0, col = 1
 *           y[3] --> row = 1, col = 1
 */ 
```

# windows - windows下的端口转发

> ID：11525703
> 
> 赞同：286
> 
> 时间：2012-07-17T15:22:40.047
> 
> 标签：windows, windows-7, portforwarding

我的电脑中有两个网板：

主要的有本地ip -> 192.168.1.111 次要的有本地ip -> 192.168.0.200

主要的有互联网连接，第二个连接到 IP 为 192.168.0.33 的设备，它在端口 80 中有一个 http 服务器。

我在主连接（端口 4422）中有一个 apache-server，我可以从任何地方访问，我现在想要的是当我检测到来自 4422 的连接时，我想将此连接重定向到 192.168.2.33:80

我怎样才能用 Windows 做到这一点？

* * *

## 回答 #1

> 赞同：565
> 
> 时间：2012-07-18T06:23:02.103

我已经解决了，可以执行：

```
netsh interface portproxy add v4tov4 listenport=4422 listenaddress=192.168.1.111 connectport=80 connectaddress=192.168.0.33 
```

要删除转发：

```
netsh interface portproxy delete v4tov4 listenport=4422 listenaddress=192.168.1.111 
```

[官方文档](https://technet.microsoft.com/es-es/library/cc731068.aspx)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-04-14T12:12:35.403

[nginx](http://nginx.org/)可用于在包括 Windows 在内的许多平台上转发 HTTP。通过更高级的配置可以轻松设置和扩展。基本配置可能如下所示：

```
events {}

http {
     server {

        listen 192.168.1.111:4422;

        location / {
            proxy_pass http://192.168.2.33:80/;
        }
     }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-09-04T21:09:06.263

每当需要时，我都会使用这个小实用程序： [http ://www.analogx.com/contents/download/network/pmapper/freeware.htm](http://www.analogx.com/contents/download/network/pmapper/freeware.htm)

上次更新此实用程序是在 2009 年。我注意到在我的 Win10 机器上，有时打开新窗口时它会挂起几秒钟。除了那个 UI 故障之外，它仍然可以正常工作。

# facebook - OpenGraph 餐厅地点数据中缺少食物风格？

> ID：11525705
> 
> 赞同：1
> 
> 时间：2012-07-17T15:22:42.887
> 
> 标签：facebook, facebook-graph-api

有谁知道如何在 OpenGraph 查询中获取餐厅的食物风格？我指的是[http://www.facebook.com/pages/Evoo-Restaurant/110407682334493?sk=info上的“食物风格：美国（新）”](http://www.facebook.com/pages/Evoo-Restaurant/110407682334493?sk=info)

这是可编辑的地点页面元数据，但不会出现在响应[http://graph.facebook.com/110407682334493](http://graph.facebook.com/110407682334493)和可用的 FQL 字段中。它只是被遗漏了吗？

谢谢，
乔纳森

# xcode - 架构 i386 和 armv7 的 Openssl Mach-O 链接器错误

> ID：11525706
> 
> 赞同：0
> 
> 时间：2012-07-17T15:22:45.680
> 
> 标签：xcode, architecture, error-handling, linker, openssl

我正在尝试实现我在项目中发现的 openssl 代码，但我得到了这些不会消失的链接器错误。我检查了框架是否正确链接，甚至使用 ../lib 和 ../include 手动包含了库和标头搜索路径。尽管如此，当我摆脱 Openssl 函数或任何函数调用（如 EVP_OpenUpdate 或 EVP_OpenInit）时，错误就会消失。仅当我出于某种原因从我的 ViewController.h 文件中创建并调用该函数时才这样做。

这是错误的日志：

```
 Ld /Users/User/Library/Developer/Xcode/DerivedData/LineaSSL-clrggexngizkqqbtcxpnmsciuwag/Build/Products/Debug-iphoneos/LineaSSL.app/LineaSSL normal armv7
cd /Users/User/Documents/LineaSSL
setenv IPHONEOS_DEPLOYMENT_TARGET 4.0
setenv  PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs
/iPhoneOS5.1.sdk -L/Users/User/Library/Developer/Xcode/DerivedData/LineaSSL-clrggexngizkqqbtcxpnmsciuwag/Build/Products/Debug-iphoneos -L/Users/User/Documents/LineaSSL/../../Desktop/x2on-OpenSSL-for-iPhone-a095890/OpenSSL-for-iOS/lib -L/Users/User/Documents/LineaSSL/../../Downloads/DTDevices-iOS_2012-06-15_v1/Library -L/Users/User/Documents/LineaSSL/OpenSSL-for-iOS/lib -L/Users/User/Documents/LineaSSL/lib -F/Users/User/Library/Developer/Xcode/DerivedData/LineaSSL-clrggexngizkqqbtcxpnmsciuwag/Build/Products/Debug-iphoneos -Finclude -Finclude/openssl -filelist /Users/User/Library/Developer/Xcode/DerivedData/LineaSSL-clrggexngizkqqbtcxpnmsciuwag/Build/Intermediates/LineaSSL.build/Debug-iphoneos/LineaSSL.build/Objects-normal/armv7/LineaSSL.LinkFileList -dead_strip -miphoneos-version-min=4.0 -lcrypto -lssl -framework CoreGraphics -framework ExternalAccessory -framework Foundation -framework UIKit -ldtdev -o /Users/User/Library/Developer/Xcode/DerivedData/LineaSSL-clrggexngizkqqbtcxpnmsciuwag/Build/Products/Debug-iphoneos/LineaSSL.app/LineaSSL

ld: warning: ignoring file /Users/User/Desktop/x2on-OpenSSL-for-iPhone-a095890/OpenSSL-for-iOS/lib/libcrypto.a, file was built for archive which is not the architecture being linked (armv7)
ld: warning: ignoring file /Users/User/Desktop/x2on-OpenSSL-for-iPhone-a095890/OpenSSL-for-iOS/lib/libssl.a, file was built for archive which is not the architecture being linked (armv7)
Undefined symbols for architecture armv7:
 "_rsa_open3", referenced from:
   -[ViewController barcodeData:isotype:] in ViewController.o
 ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

请让我知道我应该如何处理这个错误。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:48:06.617

我必须从头开始重建整个项目才能让它工作。我不知道为什么我必须做这样的事情。

# sql-server - 将过滤条件添加到外部联接而不是 where 子句时有什么区别？

> ID：11525707
> 
> 赞同：1
> 
> 时间：2012-07-17T15:22:47.133
> 
> 标签：sql-server, join, filter, outer-join

我正在尝试使用外部联接子句中的过滤器而不是 where 子句来过滤表。当我尝试这样做时，我得到了意想不到的结果。返回整个表，就好像我根本没有应用过滤器一样。

当我运行这个示例时，我得到最后两个查询的不同结果。我希望他们有相同的结果，但事实并非如此。这里发生了什么？

```
declare @a table
(
    id int
    ,content varchar(100)
)
declare @b table
(
    id int
    ,content varchar(100)
)

insert into @a (id,content) values (1,'Apple')
insert into @a (id,content) values (2,'Banana')
insert into @a (id,content) values (3,'Orange')
insert into @b (id,content) values (1,'Juice')
insert into @b (id,content) values (2,'Peel')
insert into @b (id,content) values (3,'Julius')

--basic outer join
select * from @a a left join @b b on a.id=b.id

--outer join with where clause filter
select * from @a a left join @b b on a.id=b.id where a.id=1

--outer join with join clause filter
select * from @a a left join @b b on a.id=1 and a.id=b.id 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T15:29:29.620

外连接允许为连接表的行返回 NULL，而 where 子句必须在返回结果之前匹配。

```
select * from @a a left join @b b on a.id=b.id where a.id=1 
```

转换为“给我 where 中的所有行`a`，`id=1`并尝试将其与`b`where 中的任何行相关联`a.id=b.id`。

```
select * from @a a left join @b b on a.id=1 and a.id=b.id 
```

另一方面，翻译为“给我来自的所有行`a`，如果`a.id=1`，请尝试将其与`b` where的任何行相关联`a.id=b.id`（否则只给我来自 的数据`a`）。

将此与内部连接进行对比，其中向`ON`子句添加条件并将其添加到`WHERE`子句是同义词。

# jquery - appendTo 在 jQuery 代码中不起作用？

> ID：11525708
> 
> 赞同：0
> 
> 时间：2012-07-17T15:22:47.253
> 
> 标签：jquery, css

我正在尝试使用 id 选择器将段落添加到 h2 标记。但是，由于某种原因，它无法正常工作。有人会帮我解决这个问题吗？

我有一个小提琴我做了尝试。见：http: [//jsfiddle.net/ahLqZ/4/](http://jsfiddle.net/ahLqZ/4/)

下面是我的代码：

```
 $(document).ready(function(){

        $("#cevre h2").appendTo($(this).next("p"));

    })​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T15:24:53.710

尝试这个 ：

```
$("#cevre h2").each(function() {
     $(this).appendTo($(this).next("p"));
}); 
```

用于[`.each()`](http://api.jquery.com/each/)迭代`h2`元素 - 然后`$(this)`成为每个`h2`元素而不是那个`document`元素

[这里的工作示例](http://jsfiddle.net/ahLqZ/22/)

**注意**在已经存在的 DOM 元素上使用`appendTo`会移动它......你可能想要（也许不是）是这样的：

```
$("#cevre h2").each(function() {
     $(this).clone().insertAfter($(this).next("p"));
}); 
```

用于[`.clone()`](http://api.jquery.com/clone/)创建`h2`第一个的克隆并将[`.insertAfter()`](http://api.jquery.com/insertAfter/)新克隆的 DOM 元素插入到元素之后，`<p>`而不是在其中...

[这里的工作示例](http://jsfiddle.net/ahLqZ/40/)

**另一个注意事项**`id`-在单个页面中具有重复属性的 HTML 无效...我建议您更改`<div id="cevre">`为`<div class="cevre">`...然后您的 jQuery 选择器变为`$(".cevre h2")`

**另一个注意事项**- 如果多次使用 jQuery 对象，您应该缓存它们：

```
$(".cevre h2").each(function() {
     var $this = $(this);
     $this.clone().insertAfter($this.next("p"));
}); 
```

# java - 为什么 Netty 只给我 768 字节的 UDP 消息

> ID：11525712
> 
> 赞同：6
> 
> 时间：2012-07-17T15:23:18.593
> 
> 标签：java, udp, netty, datagram

我已将“receiveBufferSize”选项设置为 1024，但由于某种原因，messageReceived 中仍然只有 768 个字节。数据头表示正在发送的数据大小为1004。

下面是服务器的初始化代码：

```
public static void main(String[] args) throws Exception {
    ConnectionlessBootstrap b = new ConnectionlessBootstrap(new NioDatagramChannelFactory());

    // Options for a new channel        
    b.setOption("receiveBufferSize", 1024);
    System.out.println(b.getOptions());

    b.setPipelineFactory(new ChannelPipelineFactory() {

        @Override
        public ChannelPipeline getPipeline() throws Exception {
            return Channels.pipeline(
                    new MyUDPPacketDecoder(),
                    new StdOutPrintHandler());
        }
    });

    b.bind(new InetSocketAddress(myPort));
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T13:42:09.333

您需要设置一个附加选项 - receiveBufferSizePredictorFactory。

为了预测它需要分配多少空间来保存传入的消息，netty 使用一个预测器来预测要分配的字节量。

接收缓冲区大小预测器有两种类型，自适应和固定大小。预测器由预测器工厂创建，该工厂为引导程序创建的每个通道创建一个。

如果没有为引导程序设置预测器工厂（或没有为通道手动设置预测器），则通道使用默认的 768 字节固定大小预测器。所有大于 768 字节的消息都被缩减到该大小。

你可以加：

```
b.setOption("receiveBufferSizePredictorFactory", new FixedReceiveBufferSizePredictorFactory(1024)); 
```

您可以在 netty 文档中阅读有关预测器及其工厂的信息

[ReceiveBufferSizePredictor 接口](http://docs.jboss.org/netty/3.2/api/org/jboss/netty/channel/ReceiveBufferSizePredictor.html)

[ReceiveBufferSizePredictorFactory 接口](http://docs.jboss.org/netty/3.2/api/org/jboss/netty/channel/ReceiveBufferSizePredictorFactory.html)

# javascript - 获取由函数jQuery设置的属性

> ID：11525714
> 
> 赞同：0
> 
> 时间：2012-07-17T15:23:25.757
> 
> 标签：javascript, jquery

我有一个附加到 div`#Browse`的 click 事件的函数，它将变量 isOpen 切换为 true 或 false。另一个点击事件有以下语句

```
alert($("#Browse").attr('isOpen'));
alert(document.getElementById('Browse').isOpen); 
```

第一个产生“未定义”，而第二个产生真或假并且是正确的。如何使用 jQuery 获取 isOpen 的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:25:55.510

使用数据属性来设置和获取数据：

```
// to set
$("#Browse").data('isOpen', true)

// to get
$("#Browse").data('isOpen') 
```

**文档**

*   jQuery`data`方法 - [http://api.jquery.com/data/](http://api.jquery.com/data/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:26:56.080

没有“jQuery 方式”可以做到这一点，因为`isOpen`它是一个临时属性。如果您能够更改属性的设置方式，[**请遵循 Chris 回答中的建议**](https://stackoverflow.com/a/11525762/139010)。

否则，最接近的方法是使用 jQuery 获取 DOM 元素，然后将其解包：

```
alert($("#Browse")[0].isOpen); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T15:30:12.823

使用新版本的 jQuery，您需要使用它`.prop`来获取它。

```
alert($("#Browse").prop('isOpen')); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-17T15:27:47.443

要访问 jQuery 中的 dom 元素，您必须通过其在 jQuery 集合中的索引来获取该元素：使用 id，希望您的集合中只有一个元素，因此您可以使用`get(0)`

```
$('#Browse').get(0).isOpen; 
```

要更方便地设置 jQuery 元素的属性，只需使用[`data`](http://api.jquery.com/data/)方法

# python - App Engine 调度程序何时使用新线程与新实例？

> ID：11525717
> 
> 赞同：60
> 
> 时间：2012-07-17T15:23:33.387
> 
> 标签：python, google-app-engine

如果我`threadsafe: true`在我的`app.yaml`文件中设置，管理何时创建新实例来服务请求以及何时在现有实例上创建新线程的规则是什么？

如果我有一个应用程序对每个请求执行计算密集型的操作，那么多线程能给我带来什么好处吗？换句话说，实例是多核实例还是单核？

或者，新线程是否仅在现有线程等待 IO 时才启动？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-09T11:47:01.637

当前使用以下一组规则来确定给定实例是否可以接受新请求：

```
if processing more than N concurrent requests (today N=10): false
elif exceeding the soft memory limit: false
elif exceeding the instance class CPU limit: false
elif warming up: false
else true 
```

以下总 CPU/核心限制当前适用于每个实例类：

```
CLASS 1: 600MHz 1 core
CLASS 2: 1.2GHz 1 core
CLASS 4: 2.4GHz 1 core
CLASS 8: 4.8GHz 2 core 
```

因此，只有一个`B8`实例可以并行处理最多 2 个完全 CPU 绑定的请求。

为实例类 < 8设置`threadsafe: true`(Python) 或`<threadsafe>true</threadsafe>`(Java) 将不允许在单个实例上并行处理多个 CPU 绑定请求。

如果您没有完全受 CPU 限制或执行 I/O，Python 和 Java 运行时将生成新线程来处理最多 10 个并发请求的新请求`threadsafe: true`

还要注意，即使 Go 运行时是单线程的，它也支持并发请求：它会为每个请求生成 1 个 goroutine，并在执行 I/O 时在 goroutine 之间产生控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:11:46.543

阅读Kyle Finley 建议的[链接中的下一条消息](https://groups.google.com/forum/#!msg/google-appengine/y-LnZ2WYJ5Q/j_w13F4oSSkJ)

> Jeff Schnitzer：还有 10 个线程的硬性限制吗？
> 
> 是的，但可能不是出于您期望的原因。我们遇到的主要问题是内存管理。如果我们将默认值提高到 100，那么许多应用程序会看到内存不足的死亡（比现在更多），并且这些死亡对于 python/java/go 的表现不同。正确的前进道路是更智能的算法 wrt 内存，提供可配置性等等。这是我们为调度程序工作的项目类型的一个示例，但与任何团队一样，我们必须优先考虑我们的项目。我建议在公共问题跟踪器上提交此（或任何其他所需的调度程序增强功能），以便他们可以获得反馈/数据/投票。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T04:41:01.523

> 如果我在 app.yaml 文件中设置 threadsafe: true ，那么管理何时创建新实例来服务请求以及何时在现有实例上创建新线程的规则是什么？

就像人们在这里所说的那样，如果以前的实例已经使用了 10 个线程，那么将启动一个带有新线程的新实例。如果所有其他线程都忙，则将创建一个新线程，它们必须等待一些响应或计算结果。

> 如果我有一个应用程序对每个请求执行计算密集型的操作，那么多线程能给我带来什么好处吗？换句话说，实例是多核实例还是单核？

现在这个问题非常有争议。每个人都知道答案，但他们仍然持怀疑态度。如果您的任务仅基于计算，那么多线程永远不会给您带来任何好处，除非您使用的是多核处理器，不要问我为什么多核处理器会更好，您知道答案。现在，谷歌应用引擎还不够复杂，无法决定何时将新线程分派到另一个处理器/核心（如果存在），只有新实例才会分派到另一个核心/处理器。希望您的线程在其他核心/处理器中运行？好吧，在那里扔一些技能和booya！请记住，由您决定线程是否应该在其他内核/处理器中运行，引擎不能对此负责，因为这可能会导致很多混乱，引擎不是上帝。简而言之，

> 或者，新线程是否仅在现有线程等待 IO 时才启动？

我的答案的第一部分清除了这一点。是的，它们仅在现有线程忙碌时才启动，这就是线程安全的工作方式，以防止死锁。

现在我可以告诉你这一切，根据我的个人经验，我在应用程序引擎上工作了好几个月，并且对高度依赖于线程安全架构的应用程序进行了编程/调试/测试。如果你想我可以添加引用（我没有引用，只是个人经验，但我已经准备好为你搜索并把东西放在桌面上），但我认为在这种情况下不需要它们，线程安全以明显的方式工作，我已经验证了自己。

# xml - 如何仅使用 XInclude 在 XML 上应用 XSLT

> ID：11525719
> 
> 赞同：5
> 
> 时间：2012-07-17T15:23:47.100
> 
> 标签：xml, xslt, xinclude

我有这个 XML 文件：

```
<?xml version="1.0"?>
<xi:include href="http://www.w3schools.com/dom/books.xml" 
            xmlns:xi="http://www.w3.org/2003/XInclude"/> 
```

我希望它在`http://www.w3schools.com/dom/books.xml`处理时会导致引用的远程 XML 文件。

为此，我创建了这个 XSL 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions">
    <xsl:output method="xml"/>
    <xsl:template match="*">
        <xsl:copy-of select="//book/title"/>
    </xsl:template>
</xsl:stylesheet> 
```

在 XSL 转换之后，我希望从引用的 XML 文件中获得带有标题节点的 XML 输出。

然而它并没有发生，转换只是产生了一个空文件。我怀疑`XInclude`没有执行指令。

那么，如果可能的话，如何在 Xincluded XML 文件上应用 XSLT？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T02:08:11.820

[在评论中，OP 要求在Copy xml document's images in different source locations into single output directory 中](https://stackoverflow.com/questions/11491387/copy-xml-documents-images-in-different-source-locations-into-single-output-dire)对我引用的答案进行演练，所以就在这里。

**这个模板..**

```
<xsl:template match="xi:include[@href][@parse='xml' or not(@parse)][fn:unparsed-text-available(@href)]">
 <xsl:apply-templates select="fn:document(@href)" />
</xsl:template> 
```

... 匹配满足所有这些要求的 xi:include 元素：

1.  有一个 href 属性
2.  它指的是 xml 文档（相对于文本文档）
3.  并且该文档可以找到并且可以打开。

当满足这些条件时，打开 XML 文档并处理它，就好像它就在此处一样，而不是 xi:include 节点。

**这个模板...**

```
<xsl:template match="xi:include[@href][@parse='text'][fn:unparsed-text-available(@href)]">
 <xsl:apply-templates select="fn:unparsed-text(@href,@encoding)" />
</xsl:template> 
```

...对纯文本包含做类似的事情。注意@parse 的默认值是'xml'。请注意，我们甚至可以更改字符编码。我们的主文档可能是 UTF-8，但包含的文档也可能是 UTF-16LE。

**最后这个模板...**

```
<xsl:template match="xi:include[@href][@parse=('text','xml') or not(@parse)][not(fn:unparsed-text-available(@href))][xi:fallback]">
 <xsl:apply-templates select="xi:fallback/text()" />
</xsl:template> 
```

...处理我们可以打开文档的情况（可能文件引用已损坏），并且 xi:include 节点为我们提供了一些备用内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T16:33:55.267

XInclude 处理，如 XSD 验证，是在您要求时发生的事情，而不是在其他情况下发生的事情。您请求它的方式取决于您所处的环境。例如，Xerces 解析器具有执行 XInclude 处理的选项。

# android - 我可以在我的编辑文本中显示呼叫记录号码吗？新来的

> ID：11525720
> 
> 赞同：-1
> 
> 时间：2012-07-17T15:23:52.127
> 
> 标签：android, button, android-intent, android-edittext, calllog

*   我用一个按钮和一个编辑文本创建了一个简单的 xml。
*   单击按钮后，我可以进入 CallLog 页面。
*   在我单击呼叫日志中的任何数字后，是否可以将所选数字显示到我的 EditText 中？

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:baselineAligned="true"
android:orientation="horizontal" >

<EditText
android:id="@+id/edittext"
android:layout_width="172dp"
android:layout_height="wrap_content"
android:layout_weight="0.29"
android:hint="CONTACT NUMBER" >

<requestFocus />
</EditText>

<Button
android:id="@+id/btn"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="CALL LOG" />

</LinearLayout> 
```

编码：

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class CallLogRetrieveActivity extends Activity {

Button myCallLogBtn;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

myCallLogBtn=(Button)findViewById(R.id.btn);

myCallLogBtn.setOnClickListener(new Button.OnClickListener(){

    public void onClick(View v) {

        Intent myIntent=new Intent();
        myIntent.setAction(Intent.ACTION_CALL_BUTTON);
        startActivity(myIntent);

    }});
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:36:51.710

您应该首先开始阅读手册和教程，而不是在这里询问您在完成 RTFM 后就会知道的基本知识。所以“是的，你可以”。但是现在请做你的功课，通过阅读“android通话记录教程”谷歌资料。这里没有人会为你这样做。

# perl - 如何从 Perl 访问 Oracle 数据库？

> ID：11525722
> 
> 赞同：2
> 
> 时间：2012-07-17T15:24:00.890
> 
> 标签：perl, oracle

我正在将一些 shell 脚本转换为 perl。所有的数据库访问都是使用 sqlplus 完成的。使用 perl 是访问 Oracle 数据库的更好方法，或者我应该坚持使用 sqlplus。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T15:25:36.567

[DBI](https://metacpan.org/module/DBI)是标准的 Perl 数据库接口（不出所料，它有一个[Oracle 驱动程序](https://metacpan.org/module/DBD%3a%3aOracle)）。[DBIx::Class](https://metacpan.org/module/DBIx%3a%3aClass%3a%3aManual%3a%3aDocMap)用一个漂亮的 ORM 接口包装它。

SQL Plus 似乎是 Oracle 的命令行界面。要从 Perl 中使用它，您必须通过将字符串混合在一起来构建查询（这是引入 SQL 注入问题的好方法），向命令行客户端发送壳，然后解析文本输出。那是疯狂。使用为您提供 Perl 数据结构的接口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T15:57:51.760

下面是一个使用 DBI 的简短示例：

```
use DBI;

$user = 'donny';
$password = 'ppp';
$dbconnectstring = 'basetest';
$dbh = DBI->connect('dbi:Oracle:',$user.'@'.$password,$dbconnectstring); 
```

另外，请注意您可以在 perl 脚本中访问 sqlplus - 或任何命令行。只需使用反引号：

```
`cd dasd` 
```

例如。不知道你是否想这样做，但只是一个想法，因为你说你正在将 shell 转换为 perl。

# coronasdk - 如何为 android 构建电晕 sdk？

> ID：11525723
> 
> 赞同：0
> 
> 时间：2012-07-17T15:24:00.950
> 
> 标签：coronasdk

嗨朋友们，他帮我解决了电晕sdk中的这个问题，当我构建时，我在独立android中有帐户。当我为android操作系统构建时，他们提出了问题

1.  继续审判
2.  验证购买
3.  升级

我会选择第二个（验证购买）选项。他们显示构建窗口。在那个窗口中，我将填写应用程序、版本代码、软件包以及浏览密钥库文件时。他们再次提出上述相同的问题，我再次选择验证购买。它不允许选择密钥库。它自动选择默认的密钥库文件。并将应用程序构建为试用用户

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:34:10.963

这听起来像是一个验证问题，您需要提交支持票才能解决。如果您更改了可能导致问题的电子邮件地址或密码。

您可以在此处联系支持：http: [//developer.coronalabs.com/forms/support](http://developer.coronalabs.com/forms/support)

有人将能够从那里为您提供帮助 - 或者，如果您更改了您的电子邮件或密码，暂时将其更改回可能会在解决此问题时提供临时解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:30:22.177

如果是验证问题，您也可以尝试在 Corona SDK 中取消对您的计算机的授权：Corona Simulator -> Preferences->Deauthorize and Quit

或在 ~/library/Preferences/ 文件夹中删除这些。com.anscamobile.ratatouille.plist com.anscamobile.Corona_Simulator.plist

# php - 隐藏 HTML 表单的提交按钮

> ID：11525726
> 
> 赞同：6
> 
> 时间：2012-07-17T15:24:14.927
> 
> 标签：php, javascript, html

> **可能重复：**
> [在没有提交按钮的情况下按下回车键时获取要提交的表单](https://stackoverflow.com/questions/2271464/getting-a-form-to-submit-when-the-enter-key-is-pressed-when-there-is-no-submit-b)

我正在尝试实现一个具有不可见提交功能的文本输入框。因此，该字段没有附加提交按钮，并且在按下“输入”键时提交。

这是我希望代码如何运行的示例：

```
<form method="get" action="<?php bloginfo('home'); ?>/"><p>

<input class="text_input" type="text" value="SEARCH: type &amp; hit Enter" name="s" id="s" onfocus="if 
(this.value == 'SEARCH: type &amp; hit Enter') {this.value = '';}" onblur="if (this.value == '') 
{this.value = 'SEARCH: type &amp; hit Enter';}" />

<input type="hidden" id="searchsubmit" value="" /></p></form> 
```

这是我无法工作的代码：

```
<p>Have us call you. Input your number:</p>
<input type="text" id="phone" name="phone" maxlength="10" size="10">
<input type="submit" value="Click-to-Call"  onclick="window.open('http://secure.ifbyphone.com/clickto_status.php?click_id=34124&phone_to_call=' + getElementById('phone').value + '&key=asdfjknj3459dj38sdka92bva', 'Clickto' , 'width=200,height=200,toolbar=no,location=no, menubar=no, scrollbars=no, copyhistory=no,resizable=no')"> 
```

我尝试将带有 GET 请求的表单属性添加到“onclick”部分中的 URL，但无济于事。

关于如何使这项工作的任何想法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-17T15:42:03.623

将此添加到有关 ID 搜索提交的 CSS 中：

```
 #searchsubmit
    {    
        visibility: hidden;
    } 
```

该按钮仍然有效，但不可见。如果表单的输入被聚焦/使用，则输入操作应该默认工作。

* * *

onBlur 函数可能会触发您想要的操作。onBlur 在用户离开输入字段（点击离开）时发生

您可以尝试使用 JQuery：

```
$(function() {
$('form').each(function() {
    $('input').keypress(function(e) {
        // Enter pressed?
        if(e.which == 10 || e.which == 13) {
            this.form.submit();
        }
    });

    $('input[type=submit]').hide();
}); 
```

});

这将触发表单的 onSubmit 事件，但您可以更改

```
this.form.submit 
```

为了

```
$('#phone').blur() 
```

[http://api.jquery.com/blur/](http://api.jquery.com/blur/)

* * *

尝试添加一个 javascript 脚本块：

```
 document.getElementsById('phone')[0].onkeydown= function(event)
{
    if (event == undefined)
    {    
        event = window.event;
    }

    if (event.keyCode == 13)
    {
        var js_phone = document.getElementsByName('phone')[0].value;
        window.location = 'myPage.php?phone='+js_phone;
        return false;
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T16:06:31.087

要隐藏某些内容，您可以使用以下代码：

```
input[type=submit]
{
    display:hidden;
} 
```

`input[type=submit]`仅作为示例，将其替换为您提交按钮的选择器。

希望这可以帮助。

# python - 从一个查询中获取结果并将其放入另一个查询中（搜索 mx 记录）

> ID：11525727
> 
> 赞同：0
> 
> 时间：2012-07-17T15:24:16.037
> 
> 标签：python, linux, grep, mx-record

我有很多电子邮件日志文件要处理。我试图找到我们发送给的每个人，按 mx 服务器排序。

这将返回 MX 服务器列表：

```
grep 'mx' /my/log/file | cut -d , -f 11 | cut -d ' ' -f 1 | sort | uniq 
```

防爆输出：

```
mx3.hotmail.com
mx2.hotmail.com
mx1.hotmail.com
mx4.hotmail.com 
```

这会抓取从该 MX 服务器发送到的域（在本例中为所有 hotmail）：

```
grep 'mx*.hotmail.com' /my/log/file | cut -d , -f 6 | cut -d '@' -f 2 | sort | uniq 
```

防爆输出：

```
hotmail.com
hotmail.com.au 
```

我如何编写脚本以便我可以将一个查询的结果直接插入另一个查询？我把python作为标签是因为我熟悉它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:19:49.557

`mx*.hotmail.com`应该匹配*m.hotmail.com*、*mx.hotmail.com*、*mxx.hotmail.com*等。你可能想要`mx.*\.hotmail\.com`

要在另一个 bash 命令中使用来自一个 bash 命令的字符串，您可以使用`$()`. 例如`echo abc$(echo def)ghi`

您也可以使用反引号，但反引号也不能嵌套。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:49:52.350

这就是我们最终要做的：

```
cat /my/log/file | cut -d "," -f 11,6 | cut -d '@' -f 2 | cut -d ' ' -f 1 | egrep '(([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}),(([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6})' | cut -d "," -f 2,1 | sort | uniq > /tmp/mxservers2.txt 
```

结果如下所示：

```
hotmail.com,mx1.hotmail.com 
```

作为参考，日志条目如下所示：

```
d,2012-07-17 07:09:29+0000,2012-07-17 07:09:15+0000,,bounce@address.net,recipient@example.net,,relayed,2.0.0 (success),smtp;250 2.0.0 bK9F1j04M0vJLGl06K9VnA mail accepted for delivery,mx.example.net (0.0.0.0),,smtp,(127.0.0.1),smtp,sending IP,receiving IP,"ENHANCEDSTATUSCODES,8BITMIME,SIZE,STARTTLS",18704,sending.domain.com,message.streaming,,FALSE,=?utf-8?Q?Subject?= <sender@example2.net> 
```

不完美，但完成了工作。

# java - Java 方法链

> ID：11525735
> 
> 赞同：0
> 
> 时间：2012-07-17T15:24:33.277
> 
> 标签：java, methods, chaining

我有一行包含各种非分隔字段值的数据。

```
X55655PlateX58745CupX52689SaucerX52459SpoonH59876KnifeX59866Fork 
```

我正在尝试使用 substring 和 indexOf 来提取数据，使用一系列类似于下面的语句。

```
dataField1 = substring.inputLine((indexOf("Marker1: ")+9),(inputLine.indexOf("Marker2:")-1)); 
```

我一直`error:cannot find symbol`指向`substring`. 通常，这是我没有调用正确的 java 包的时候，但我正在使用以下内容：

```
import java.util.*;
import java.io.*;
import java.nio.file.*;
import java.lang.*; 
```

`java.lang.*`字符串方法在哪里，对吗？我也在初始化`String datafield1 = "";`。

```
dataField1 = inputLine.Substring((indexOf("Marker1: ")+9),(indexOf("Marker2:")-1)); 
```

导致 indexOf 收到`cannot find symbnol`错误。但是如果 indexOf 也是 String 的一个方法，那需要去哪里呢？

我的程序似乎使用`substring(x,y)`了[java 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)中所述的正确语法，但是，没有适用于我的故障排除的实际示例。

我已经阅读了[这篇文章](https://stackoverflow.com/questions/2872222/how-to-do-method-chaining-in-java-o-m1-m2-m3-m4)，但它并没有让我更好地理解这些概念。

为什么 dioes 这一直出错，我该如何防止它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T15:26:53.107

`substring`应该在 String 对象上调用。否则，它正在寻找`substring`在您当前类中调用的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T15:27:06.177

[`substring()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring%28int,%20int%29)是 的一个方法`String`，应该是：

```
inputLine.substring(... 
```

假设`inputLine`是一个`String`实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T15:28:21.590

试试这个。

```
String dataField1 = inputLine.substring((inputLine.indexOf("Marker1: ")+9),
                                        (inputLine.indexOf("Marker2:")-1)); 
```

# jquery - 如何在数据表中使用列过滤（选择菜单和输入元素）？

> ID：11525736
> 
> 赞同：0
> 
> 时间：2012-07-17T15:24:37.473
> 
> 标签：jquery, datatables

我正在使用 DataTables 来显示表值...我已经使用选择菜单完成了列过滤...但是我必须同时使用选择菜单和输入框...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:44:01.513

本质上没有什么不同。通过回调处理两者。下面的方法将允许您根据服务器端创建的表上的任何输入字段过滤列：

```
var oTable = $('#disporeport').dataTable( {
        "aaSorting": [[ 7, "asc" ]],
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "http://urltosubmit",
        "bJQueryUI": true,
        "sPaginationType": "full_numbers",
        "bAutoWidth": false,
        "bFilter":true,
        "bLengthChange": true,
        "bPaginate": true,
        "bSort": true,
        "iDisplayLength": 25,
        "aLengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
        "bInfo": true,
        "aoColumns": [
             { "sTitle": "col1", "bVisible":false},
             { "sTitle": "col2", "sWidth": "20%"},
             { "sTitle": "col3", "sWidth": "20%"}
        ],
        "fnServerParams": function ( aoData ) {
            aoData.push({ "name": "selboxparam", "value": $('#selboxid').val() },
                        { "name": "inputboxval", "value": $('#inputboxid').val() },

        }
    }); 
```

因此， fnServerParams 是您所关心的。您为要传递的每个框提供名称和值。这些作为 $_REQUEST 值进入 ajax 页面，然后您可以在服务器端脚本中使用这些值通过您选择的方法进行过滤。要使表格重绘，您只需在单击按钮或鼠标打开字段时完成 fnDraw。

这是使用基于 dom 的表执行此操作的[官方数据表示例](http://datatables.net/release-datatables/examples/api/multi_filter.html)。也许它涉及的少一点，但它也受到表可以得到多大的限制（我个人不会使用基于 dom 的表做超过 10,000 条记录）

# php - preg_replace：怎么做？

> ID：11525741
> 
> 赞同：5
> 
> 时间：2012-07-17T15:24:59.437
> 
> 标签：php, regex, preg-replace

如果有一件事我无法理解（或学习），那就是`preg_replace`语法。`>`我需要帮助删除和之间所有可能的符号（空格、制表符、换行符等）`<`。

意思是，我有这样的 XML：

```
<?xml version=\"1.0\" encoding=\"UTF-8\"?><bl>  <snd>BANK</snd>    <rcv>ME</rcv>  <intid>773264</intid> <date>17072012</date></bl> 
```

我需要它看起来：

```
<?xml version=\"1.0\" encoding=\"UTF-8\"?><bl><snd>BANK</snd><rcv>ME</rcv><intid>773264</intid><date>17072012</date></bl> 
```

到目前为止，我想出了这个：

```
$this -> data = preg_replace('\>(.*?)<\', '><', $data); 
```

但它甚至没有接近我所需要的。一个解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T15:27:00.807

你已经接近了，你只需要分隔符并限制你对空格字符的搜索：

```
preg_replace('#>\s+<#', '><', $data); 
```

where`#`是分隔符，`\s`是任何空格字符的简写。

[您可以在此示例](http://viper-7.com/gfNT8O)中看到它的工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T10:54:14.093

对于删除空格：

```
preg_replace('/\s\s+/', ' ', $data); 
```

删除新行：

```
$string = preg_replace('/\r\n/', "", $data); 
```

# delphi - 在 TChart 组件中隐藏分钟

> ID：11525744
> 
> 赞同：0
> 
> 时间：2012-07-17T15:25:04.630
> 
> 标签：delphi, teechart

如何在 TChart 组件中隐藏时间（小时、分钟和秒）？只需要日期格式。

放

```
Chart1.BottomAxis.DateTimeFormat := GetLocaleShortDateFormat(); {MMM/yy/dd}, 
```

但时间存在于图表中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:32:17.463

如何使用 TeeChart 的示例。

在表单上添加一个 TChart 组件和一个 TButton，包括单元系列并在按钮`OnClick`事件上添加此代码：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  S1: TLineSeries;
  i,j: integer;
begin
  Chart1.View3D := false;
  Chart1.SeriesList.Clear;
  S1 := TLineSeries.Create(Self);
  S1.XValues.DateTime := True;  
  Chart1.BottomAxis.DateTimeFormat := 'MMM/YY/DD';  //Works with 'MMM/yy/dd' also
  Chart1.AddSeries(S1);
  for i := 0 to 10 do
    for j := 0 TO 23 do
    S1.AddXY(Trunc(Now) + i + j/24.0, Random(100)/10.0 + i*10.0);
end; 
```

这是结果： ![在此处输入图像描述](../Images/d55478b9f817c7b5aab7e748feac9d53.png)

我无法重现问题中的行为，使用不同的`DateTimeFormat`.

# vb.net - 对 Gridview 进行排序时找不到列

> ID：11525758
> 
> 赞同：0
> 
> 时间：2012-07-17T15:25:45.753
> 
> 标签：vb.net, visual-studio, sorting, gridview

我需要帮助对 gridview 进行排序，下面是我的代码：

```
Protected Sub TaskGridView_Sorting(ByVal sender As Object, ByVal e As GridViewSortEventArgs) Handles GridView1.Sorting

    'Retrieve the table from the session object.
    Dim dt As DataView = dsData.AsDataView

    If dt IsNot Nothing Then

        'Sort the data.
        If (GridView1.SortDirection() = SortDirection.Ascending) Then
            dt.Sort = e.SortExpression & " " & SortDirection.Descending
        Else
            dt.Sort = e.SortExpression & " " & SortDirection.Descending
        End If

        GridView1.DataSource = dt
        GridView1.DataBind()

    End If 
```

我目前得到：找不到列[我正在排序的任何列]

我是 VB 的新手，正在努力学习这一点，我无法使任何其他示例代码工作。

感谢您的帮助。

补充：其他代码：

在页面加载时我运行我的存储过程，然后它绑定数据：

```
 Dim objConn As IDbConnection = Nothing
    Dim strBlder As New System.Text.StringBuilder
    Dim providerID As String = Request.QueryString("ProviderID")
    Dim providerName As String = Request.QueryString("ProviderName")
    GridView1.PagerSettings.Mode = PagerButtons.NumericFirstLast 
```

存储过程查询：

```
 GridView1.DataSource = dsData
    GridView1.AllowSorting = True
    GridView1.DataBind() 
```

ASPX 代码：

```
 <asp:GridView ID="GridView1" runat="server" style="margin-right: 0px" 
        AllowPaging = "True" PageSize = "50" AllowSorting = "true">
        <Columns>
            <asp:CommandField ShowEditButton="True" />
            <asp:TemplateField HeaderText="Status"></asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:39:40.083

代替

```
If (GridView1.SortDirection() = SortDirection.Ascending) Then
    dt.Sort = e.SortExpression & " " & SortDirection.Descending
Else
    dt.Sort = e.SortExpression & " " & SortDirection.Descending
End If 
```

和

```
If (GridView1.SortDirection() = SortDirection.Ascending) Then
    dt.Sort = e.SortExpression & " ASC"
Else
    dt.Sort = e.SortExpression & " DESC"
End If 
```

# ruby-on-rails - Thin、Faye 和 Redis 的 Nginx 服务器配置

> ID：11525760
> 
> 赞同：0
> 
> 时间：2012-07-17T15:25:51.620
> 
> 标签：ruby-on-rails, nginx, thin, faye, foreman

`/etc/nginx/nginx.conf`好像：

```
user  deploy;
worker_processes  5;

error_log  logs/error.log;

events {
    worker_connections  1024;
    use epoll;
}

http {

    include       mime.types;
    default_type  application/octet-stream;

    sendfile        on;

    keepalive_timeout  65;

    upstream foreman4000 {
        server x.x.x.x:4000;
        server x.x.x.x:4001;
        server x.x.x.x:4002;
        server x.x.x.x:4003;
        server x.x.x.x:4004;
    } 

   server {
      listen       80;
      server_name  x.x.x.x;    #server IP
      access_log  /opt/nginx/foreman4000.access.log;
      location / {
        proxy_pass http://foreman4000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $remote_addr;
      }
   }
} 
```

这里我使用 gem foreman，它使用 upstart 来管理所有进程并用一个命令启动所有服务器

我在项目的主目录中创建了 Procfile，其中包含：

```
redis:  redis-server
thin:   bundle exec thin start -p $PORT
faye:   rackup faye.ru -E production -s thin 
```

添加到 Gemfile：

```
gem 'foreman'
gem 'thin'
gem "foreman-export-daemontools", "~> 0.0.1" 
```

Ran bundle install local to edit Gemfile.lock 在服务器上部署的项目。

启动 Nginx

```
deploy@dcards101:/opt/nginx/conf$ sudo /etc/init.d/nginx stop   [ OK ]
deploy@dcards101:/opt/nginx/conf$ sudo /etc/init.d/nginx srart  [ OK ] 
```

将数据从 Procfile 导出到 Upstart

```
deploy@dcards101:/var/www/cards/current$ rvmsudo foreman export upstart -a cards -u root 
```

开始申请

```
deploy@dcards101:/var/www/cards/current$ rvmsudo start cards 
```

现在一切都必须很好，但我在服务器上看到的只是

```
502 Bad Gateway

nginx/1.0.15 
```

日志说：

```
2012/07/17 17:22:30 [error] 11593#0: *148 no live upstreams while connecting to upstream, client: x.x.x.x, server: x.x.x.x, request: "GET / HTTP/1.1", upstream: "http://foreman4000/", host: "x.x.x.x" 
```

请尽你所能提供帮助。服务器——Ubuntu 10 LTS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T23:43:50.250

我认为您的问题是您将应用服务器和 faye 服务器放在同一个上游！

如果我的上游和工头的方法正确，您的第一个访问者将获得第二个 faye 的应用程序，依此类推。（也许我错了，因为我不认识工头……但如果工头将所有可用服务器共享给所有服务，那可能是你的问题）

我说尝试 capistrano 而不是工头 .. 这样你就可以完全控制哪个服务器从哪里开始 .. 因为在我的主机上，http 不适用于 private_pub（因为 nginx）所以我必须安装 nginx_tcp_proxy_module 来获取 tcp 块在我的 nginx.conf 中工作

或者只是通过 ssh 逐个服务器尝试查找错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T00:07:13.420

得到同样的错误以这种方式解决：

首先安装 [nginx_tcp_proxy_module](https://github.com/yaoweibin/nginx_tcp_proxy_module)

（我按照[本](http://www.letseehere.com/reverse-proxy-web-sockets)教程进行了操作，但将其更改为在 nginx 中使用乘客和瘦）

而不是将 tcp 部分添加到您的 nginx.conf 中：

```
tcp {
    upstream websockets {
        ## node processes
        server 12.34.56.78:9292; 
        check interval=300 rise=2 fall=5 timeout=1000;
    }   

    server {
        listen 9200;
        server_name domain.org;
        tcp_nodelay on;
        proxy_pass websockets;
    }
} 
```

不适用于我的 80 端口

之后我仍然从 faye/privat_pub 得到空的回复，但是有一个非常简单的解决方案：

```
RAILS_ENV=production bundle exec rackup private_pub.ru -s thin -E production 
```

看看[private_pub - 问题 #29](https://github.com/ryanb/private_pub/issues/29)

现在一切正常，除了 chrome 如何触发 2 次

（我需要一个用于机架的守护进程）

希望它也能帮助你

# javascript - 拖放选择插件

> ID：11525761
> 
> 赞同：3
> 
> 时间：2012-07-17T15:25:54.370
> 
> 标签：javascript, jquery, select, drag-and-drop

我正在使用[这个](http://threedubmedia.com/code/event/drop/demo/selection)插件来选择网站上的文本。

到目前为止，我的代码如下所示：

```
jQuery(function($){
            $( document )
            .drag("start",function( ev, dd ){
                return $('<div class="selection" />')
                .css('opacity', .65 )
                .appendTo( document.body );
            })
            .drag(function( ev, dd ){
                $( dd.proxy ).css({
                    top: Math.min( ev.pageY, dd.startY ),
                    left: Math.min( ev.pageX, dd.startX ),
                    height: Math.abs( ev.pageY - dd.startY ),
                    width: Math.abs( ev.pageX - dd.startX )
                });
            })
            .drag("end",function( ev, dd ){
                $( dd.proxy ).remove();
            });
            $('article p, h1, h2, h3, h4, h5, h6, ol, ul')
            .drop(function( ev, dd ){
                $(this).wrap('<div />')
            })
            $.drop({ multi: true });    
        }); 
```

我想要实现的是将所有选定的元素包装在 on 中`<div>`。现在它将每个元素包装到单独的 div 中。这是负责此操作的代码片段：

```
.drop(function( ev, dd ){
                $(this).wrap('<div />')
            }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:25:40.373

也许函数[wrapAll()](http://api.jquery.com/wrapAll/)是您正在寻找的，而不是 wrap。

# jquery - 使用 jQuery 隐藏函数时出错

> ID：11525766
> 
> 赞同：0
> 
> 时间：2012-07-17T15:26:11.827
> 
> 标签：jquery, html

我一直试图让它工作，但它一直给我一个错误。这是jsfiddle：

[http://jsfiddle.net/2ZUMM/](http://jsfiddle.net/2ZUmM/)

希望我没有完全搞砸。

JS：

```
$(document).ready(function() {
    $('#showIt').click(function() {
        $('#otherObject').hide();
    });
});​ 
```

HTML：

```
 <section id="main">
        <header>

        </header>
        <article>
            <a id="showIt" href="">Show only one</a>
        </article>
        <footer>

        </footer>
    </section>
    <section id="otherObject">
        <header>

        </header>
        <article>
            <img src="tdk.jpg">
        </article>
        <footer>

        </footer>
    </section>
    <section id="otherObjectTwo">
        <header>

        </header>
        <article>

        </article>
        <footer>

        </footer>
    </section>
    <section id="otherObject3">
        <header>

        </header>
        <article>

        </article>
        <footer>

        </footer>
    </section>​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T15:27:54.147

记得`return false;`在链接上：

```
$(document).ready(function() {
    $('#showIt').click(function() {
        $('#otherObject').hide();
        return false;
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:29:44.680

您正在单击一个`<a>`标签，然后点击它的链接。您需要阻止浏览器跟踪该链接。

```
$(document).ready(function() {
    $('#showIt').click(function(e) {
        e.preventDefault();
        $('#otherObject').hide();
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T15:30:46.397

目前，您的链接实际上仍在使用其预期功能。

```
$(document).ready(function() {
    $('#showIt').click(function() {
        $('#otherObject').hide();
        return false;
    });
});​ 
```

您需要`return false`在 a/link 上阻止默认设置，因此该链接不会跟随添加到 a/link 中的 url。

# php - 从 PHP 生成的投票中使用 ajax 发布的问题

> ID：11525767
> 
> 赞同：1
> 
> 时间：2012-07-17T15:26:13.133
> 
> 标签：php, javascript, jquery, ajax, jquery-mobile

我将尝试非常缓慢地引导您完成此过程。我正在尝试进行经常更改的民意调查，因此我必须使其具有动态性。我还需要在不重新加载页面的情况下使用它，所以我需要使用 Ajax 来提交表单。所以我所做的就是创建一个 PHP 脚本来为我*响应*投票。这很好用，我得到了我想要的民意调查。哦，是的，忘了说这是一个多步骤民意调查。我通过在 JQM“页面”中隐藏/显示 div 一次浏览 2-4 个问题。我的意思是：

```
<div data-role='page'> 
```

在最后一页，我确实有一个提交按钮而不是下一个按钮，因为民意调查显然没有“下一个”div 来显示。这个提交按钮在任何情况下都不起作用，形状或形式工作，因此是这里的**问题**。

```
$("#submit").click(function() 
        {
            if ($("#form").validate()) 
            {
                $.ajax(
                {
                type:'POST',
                url:'add.php',
                data:$('#form').serialize(),
                success:function(response)
                {
                    $("#answers").html(response);
                }
            });
            } 
            else    
            {
                return false;
            }                   

        }) 
```

这应该将我的表单数据发送到另一个名为*add.php*的 PHP 文件，然后应该将其发布到下面显示的 div 中。（它真的应该只是保存到数据库，但我尝试回显它，直到我看到它有效）。现在，转折是我在非动态表单上编写了另一段相同的代码，该表单*不是*通过 PHP 创建的，而只是用 HTML 绘制的。这也是一个跨越 3 个 div/“页面”的多步骤民意调查。这完全*没有问题*提交。

总结一下：我有两个不同的项目，每个项目都解决了我一半的问题。一个动态生成表单，另一个保存我制作的静态表单。两种形式都由各种复选框、单选按钮和文本区域组成。问题是，他们不会一起工作。当我单击提交按钮时，我希望表单将答案回显到此 div 中（您阅读了几行的那个）：

```
<div data-role="content" id="answers">
        Answers comes here: 
        </div> 
```

然而，这个 div 保持不变。我将 $("#submit").click(function()) 剥离为 alert('test'); 我仍然无法得到反应。我已经对变量名称和 div 名称以及任何其他相关名称进行了千万亿次检查，并且我对每个单独的部分（生成民意调查和使用 ajax 发布）以及我的尝试进行了各种细微调整将它们组合起来没有成功。那么，百万美元的问题是什么可能是错的？我剩下的最后一个假设是，在生成投票的脚本**之前**加载了 $("#submit").click ... 的 JavaScript 函数。这是有道理的，当提交点击函数被声明时，它不会链接到任何按钮，如下所示：

```
<input type="button" id="submit" name="Submit"/> 
```

有没有人知道我如何让这个提交按钮工作，甚至知道为什么它**不起作用**？感谢读到这里的任何人，我希望你提出并愿意分享一些可以帮助我的知识。还要感谢 Stack Overflow 的创建者为此实现了一个 alt+z 函数，因为我在写这句话之前的句子时不小心点击了 alt+a 然后随机字母。祝你今天过得愉快！

编辑：在凯文的提示后尝试了这个答案，但即使是第一个警报按钮也没有反应：

```
$("#submit").click(function() 
    {
        alert("it works");
        if ($("#form").validate()) 
        {
            $.ajax(
            {
            type:'POST',
            url:'add.php',
            data:$('#form').serialize(),
            success:function(response)
            {
                $("#answers").html(response);
                return false;
            }
        });
        } 
        else    
        {
            return false;
        }                   

    })
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:32:43.367

你需要一个 return false；在 $("#answers").html(response); 在成功函数的范围内。让我知道这个是否奏效。祝你好运，凯文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:05:04.930

I just tried the script above without the post and it worked fine. Do you have jquery loaded before this script executes, and/or do you have or do you have any javascript errors in your console?

# ffmpeg - VLC 和 ffmpeg 如何协同工作？

> ID：11525769
> 
> 赞同：18
> 
> 时间：2012-07-17T15:26:22.400
> 
> 标签：ffmpeg, vlc

我从源代码编译了 VLC，它运行良好。当我做“./Vlc”时，vlc 运行。我还从源代码编译了 ffmpeg，它也运行良好。当我执行“ffmpeg-if toto.flv mp3-vn-acodec copy new_toto.mp3”时，会生成名为“new_toto.mp3”的文件。我无法理解的是 VLC 和 ffmpeg 如何协同工作？VLC 代码的哪一部分使用了 ffmpeg 代码？

是否有 ffmpeg 命令来播放（读取）视频？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-17T15:33:50.383

VLC 没有将 FFmpeg 嵌入为内部使用的一种从属二进制文件，正如您可能想象的那样。相反，FFmpeg 和 VLC 都在使用`libavcodec`，一个实现 ffmpeg 通过其命令行界面公开的内容的库。因此，FFmpeg 通过提供其 libavcodec 库来支持 VLC，该库是作为播放器应用程序构建 VLC 的基本组件之一。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-19T19:45:33.033

> 是否有 ffmpeg 命令来播放（读取）视频？

```
ffplay video.mp4 
```

`ffplay`然而，它是一个非常精简的视频查看器，主要只适用于调试视频，而不是日常使用。

`ffplay`对于某些古怪的格式，它可能比 VLC 更准确，例如它可以处理 VLC 2.2.4 无法处理的非常低的 FPS 视频：[如何使用 ffmpeg 的 sws_scale() 调整图片大小？](https://stackoverflow.com/questions/12831761/how-to-resize-a-picture-using-ffmpegs-sws-scale/36487785#36487785)

在 Ubuntu 16.04 和 ffmpeg 2.8 中测试，这个最小的程序生成视频来自：[如何使用 ffmpeg 的 sws_scale() 调整图片大小？](https://stackoverflow.com/questions/12831761/how-to-resize-a-picture-using-ffmpegs-sws-scale/36487785#36487785)

# ruby-on-rails-3 - Rails 最佳就地宝石

> ID：11525771
> 
> 赞同：3
> 
> 时间：2012-07-17T15:26:30.323
> 
> 标签：ruby-on-rails-3, jquery

我按照 Ryan Bates 对最佳就地宝石的[railscast](http://railscasts.com/episodes/302-in-place-editing?autoplay=true)进行了操作，但无法使其正常工作。我在 user.rb 模型中设置 before_create 的默认值显示在页面上，但我无法单击它进行编辑；它只是显示为静态元素。虽然，Firebug 显示 best_in_place javascript 正在视图中加载`<head>`。

应用程序.js

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require jquery-ui
//= require jquery.purr
//= require best_in_place
//= require_tree . 
```

users.js.coffee

```
jQuery ->
  $('.best_in_place').best_in_place() 
```

用户.rb

```
attr_accessible :email, :name, :password, :password_confirmation, :avatar, :goal
...
before_create :default_values
...
  private

    def default_values
      self.goal ||= "Write Current Goal Here"
    end 
```

users_controller.rb

```
respond_to :html, :json
...
  def update
    @user = User.find(params[:id])
    respond_to do |format|
      if @user.update_attributes(params[:user])
        format.html {
          flash[:success] = "Profile updated"
          sign_in @user
          redirect_to @user
        }
        format.json { respond_with_bip(@user) }
      else
        format.html { render 'edit' }
        format.json { respond_with_bip(@user) }
      end
    end
  end 
```

用户/show.html.erb

```
...
<%= best_in_place @user, :goal %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:42:23.360

在你的 layouts/application.html.erb .. 而不是`javascript_include_tag(:all)`做

```
javascript_include_tag(:application) 
```

另外，请确保`users.js.coffee`住在`app/assets/javascript`

**编辑**

确保您已安装 Gemfile 和捆绑包中指定的 gem

```
gem "best_in_place" 
```

试试这个，就像 Said Kaldybaev 建议的那样

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require jquery-ui
//= require jquery.purr
//= require_tree .
//= require best_in_place 
```

然后代替咖啡在页面顶部执行此操作：

```
$(document).ready(function() {
  $('.best_in_place').best_in_place();
}) 
```

如果这不起作用，请删除`//= require best_in_place`然后`//= require jquery.purr`运行

```
rails g best_in_place:setup 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T16:03:01.477

我也有同样的问题，通过将**require best_in_place**移动到 require 列表的末尾来解决

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require jquery-ui
//= require jquery.purr
//= require_tree .
//= require best_in_place 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T16:44:22.913

这对我有用：

改变

```
$(document).ready(function() {
/* Activating Best In Place */
jQuery(".best_in_place").best_in_place();
}); 
```

到

```
$(document).ready(function() { 
```

# jquery - Jquery悬停事件没有触发？

> ID：11525772
> 
> 赞同：0
> 
> 时间：2012-07-17T15:26:32.480
> 
> 标签：jquery, html, dom

我为我的网站编写的一些 jquery 代码遇到了一些问题。

我正在使用[cloudcarousel](http://www.professorcloud.com/mainsite/carousel.htm/)插件在我正在创建的网站的主页上有一个图像轮播。轮播的html代码如下：

```
 <div id="carousel" style="width:100%; height:100%;overflow:scroll;">
                <img id="sample1image"      alt="sample 1"   class = "cloudcarousel current" src="img/homepage/random1.png" />
                <img id="sample2image"       alt= "sample 2" class = "cloudcarousel left leftrotate" src="img/homepage/random2.png"/>
                <img id="sample3image"     alt = "sample 3" class = "cloudcarousel" src = "img/homepage/random3.png" />
                <img id="sample4image"          alt = "sample 4" class = "cloudcarousel" src = "img/homepage/random4.png" />
                <img id="sample5image"       alt="sample 5" class = "cloudcarousel" src = "img/homepage/random5.png" />
                <img id="sample6image" alt="sample 6"  class = "cloudcarousel right rightrotate" src = "img/homepage/random6.png" />

                <input class = "leftrotate" id="left-but"  type="button" value="" />
                <input class = "rightrotate" id="right-but" type="button" value="" />

                <div class="bubble" id="homepagebubble">
                    <span id="bubbleinnercontainer"><a id="bubbletext" href="#">Sample 1</a></span>
                </div>
            </div> 
```

我已经在 jquery 中使用以下代码初始化了我的代码：

```
 $(document).ready(function() {
            $("#carousel").CloudCarousel({
                xPos : 500,
                yPos : 100,
                xRadius : 400,
                yRadius : -8,
                minScale : 0.8,
                speed : 0.3,
                bringToFront : true,
                buttonLeft : $("input.leftrotate"),
                buttonRight : $("input.rightrotate"),
                altBox : $("#alt-text"),
                titleBox : $("#title-text")
            });
           $('.leftrotate').click(leftRotation);

            $('.rightrotate').click(rightRotation);
         }); 
```

这是我的 leftRotation 方法：

```
 function leftRotation() {
       $('.bubble').css('display', 'none');

       var nextimage = "";
       var rightimage = "";
       var leftimage = "";
       var nextimageindex = $(currentimage).prev().index();

       rightimageindex = $('.right').index();
       leftimageindex = $('.left').index();
       //increment the indexes
       rightimageindex -= 1;
leftimageindex -= 1;

if (rightimageindex < 0) {
    rightimageindex = rightimageindex + 6;
    //if its out of bounds, then bring it back in range
}
if (leftimageindex < 0) {
    leftimageindex = leftimageindex + 6;
}

rightimage = $('.cloudcarousel').eq(rightimageindex);
leftimage = $('.cloudcarousel').eq(leftimageindex);
$('.right').removeClass('right rightrotate');
$('.left').removeClass('left leftrotate');

rightimage.addClass('right rightrotate');
leftimage.addClass('left leftrotate');

var currentimage = $('.current').attr('id');
currentimage = "#" + currentimage;
if ($(currentimage).prev().index() == -1)//if this is the first image
{
    nextimage = $('.cloudcarousel').eq(5);
    $(currentimage).removeClass('current');
    nextimage.addClass('current');
    $('#bubbletext').text(nextimage.attr('alt'));
} else {

    nextimage = $(currentimage).prev();
    $(currentimage).removeClass('current');
    nextimage.addClass('current');
    $('#bubbletext').text(nextimage.attr('alt'));
}

$('.bubble').fadeIn('slow'); 
```

}

具有“bubble”类的 div 表示主页上的一个框，其文本与轮播前面的当前轮播或“当前”图像相匹配，由代码中的 current 类确定。左右按钮（id 的 left-but 和 right-but）都触发了正确的事件序列；单击时 leftRotation 和 rightRotation 事件会触发，这会导致 current、leftrotate 和 rightrotate 的类转移到新的 current、left 和 right 图像，并且气泡中​​的文本会发生变化。但是，当我尝试将相同的方法附加到轮播中的图像时，点击会触发该方法最初附加到的图像，并且只有该图像；即使类已更改，它也不会在其他图像上触发。

如果类所附加到的节点将发生变化，是否最好不要基于事件的特定类附加事件？有什么更好的方法来触发这个事件？我已经为此困扰了 2 天，并且真的可以使用一些帮助来提出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:52:35.787

考虑使用`$(selector).on()`而不是`$(selector).click()`：

```
// pass in e for e.preventDefault();
$('.leftrotate').on('click', function(e) { leftRotation(e) }); 
$('.rightrotate').on('click', function(e) { rightRotation(e) }); 
```

jQuery 文档`.on()`：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

如果要将元素注入 DOM，则需要在创建元素*后*调用事件处理程序：

“事件处理程序仅绑定到当前选定的元素；它们必须在您的代码调用 .on() 时存在于页面上。为确保元素存在并且可以被选中，请在准备好的文档中执行事件绑定页面上 HTML 标记中的元素的处理程序。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。或者，使用委托事件附加事件处理程序，如下所述。”

# mysql - 在 MySql Workbench 中测试存储过程

> ID：11525774
> 
> 赞同：10
> 
> 时间：2012-07-17T15:26:34.007
> 
> 标签：mysql, testing, stored-procedures, insert, mysql-workbench

我有一个插入存储过程，我将在其中插入 2 个表。第二个表使用第一个表的 Last_Insert_ID。这是我的存储过程：

```
 DELIMITER $$

CREATE DEFINER=`root`@`%` PROCEDURE `new_user_create`(

    IN oFarmName      varchar(45),
    IN oFirstName        varchar(45),
    IN oAddress1         varchar(45),
    IN oCity         varchar(45),
    IN oState         varchar(45),
    IN oZip         varchar(45),
    IN oCountry         varchar(45)
)
BEGIN
    insert into intelliair.individual
    ( FarmName, FirstName)
    values ( oFarmName, oFirstName);
       insert into intelliair.address
    (IndividualID, Address1, City, State, Zip, Country)
    Values (Last_Insert_ID(), oAddress1, oCity, oState, oZip, oCountry);
END 
```

这是我在 MySql 工作台中测试查询的方式：

```
call new_user_create(@myFarm, @MyName, @MyAddress, @MyCity, @MyState, @MyZip, @MyCountry) 
```

我得到的错误是：“列地址 1 不能为空”

我哪里错了？它在存储过程中吗？还是我称呼它的方式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T15:34:46.613

“ *Column Address1 cannot be null* ”表示`intelliair.address.Address1`必须定义该字段`not null`。

而且，我认为您`@MyAddress`在将其传递给存储过程之前没有预先定义值。
除非已定义，否则将被视为`NULL`并因此引发错误。

在调用存储过程之前交叉检查值，例如：

```
select @MyAddress;  -- ,@myFarm, @MyName, @MyCity, @MyState, @MyZip, @MyCountry; 
```

**更新 1**：

您可以通过直接输入每个参数的值来调用存储过程。
**示例**：

```
call new_user_create(  
    'my Farm value', -- @myFarm  
    'E B', -- @MyName  
    'My Address is SO', -- @MyAddress1  
    'My City is Coders', -- @MyCity  
    'CA', -- @MyState  
    '12345', -- @MyZip  
    'US' -- @MyCountry
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:34:52.553

INSERT（或 UPDATE）语句引发了异常，该语句将 NULL 值分配给`Address1`声明为的名为 的列`NOT NULL`。

从您显示的内容来看，最可能的解释是作为 oAddress1 参数传入的值是 NULL，并且第二个 INSERT 语句引发了异常。

因此，最可能的解释是当调用过程时，`@MyAddress`用户变量没有被赋值。

（您可以验证`Address1`intelliair.individual 表上没有列，或者如果有，则未定义为`NOT NULL`。）

（也有可能不是您的语句引发异常，而是递归 SQL 语句，例如 BEFORE INSERT FOR EACH ROW 触发器中的 INSERT 语句。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T14:44:38.957

```
USE lportal;
DELIMITER $$
CREATE PROCEDURE `iemp`(IN eid INT(11),IN ename varchar(15),IN dname varchar(15),IN doj DATE)
BEGIN
INSERT INTO e_emp (eid,ename,dname,doj) VALUES (eid,ename,dname,doj);
END 
```

# c# - 我的 returnURL 在生产中不起作用

> ID：11525776
> 
> 赞同：0
> 
> 时间：2012-07-17T15:26:44.333
> 
> 标签：c#, .net, vb.net, web-config

我在我的 vb.net Web 应用程序（.net 4）中使用 RedirectFromLoginPage。它在我的开发环境中运行良好，但在我的生产环境中失败。

当我通过 dev 登录时，我得到这个 URL：

```
http://localhost:63509/Account/Login.aspx?ReturnUrl=%2fDefault.aspx 
```

但是，当我将其推送到生产环境并登录时，我得到了这个 URL：

```
http://aaa.aaa.edu/Account/Login.aspx?ReturnUrl=%2f 
```

我的 web.config 看起来像这样：

```
 <authentication mode="Forms">
        <forms loginUrl="Account/Login.aspx" timeout="300" defaultUrl="yourView.aspx" />
    </authentication> 
```

我已验证我的 IIS 7 Web 服务器上的默认文档是 Default.aspx。我什至在 web.config 中设置它以确保。

我能做些什么来解决这个问题吗？web.config 的授权部分如下所示：

```
 <authorization>
       <deny users="?" />
    </authorization> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:07:33.473

在 web.config 中，该部分是什么样的？它应该如下所示：

```
<authorization>
   <deny users="?"/>
</authorization> 
```

或者，它可能是 cookie 问题。您是否在任何地方明确设置 FormsAuthentication.CookieDomain ？由于您使用的子域可能会导致问题。另外，请尝试清除缓存中的 cookie 或尝试通过其他浏览器登录以查看是否是 cookie 问题。

# jquery - 尝试在 mvc4 中加载 jquery 加载 gif

> ID：11525777
> 
> 赞同：0
> 
> 时间：2012-07-17T15:26:50.687
> 
> 标签：jquery, asp.net-mvc-3, gif

而且我无法让 mvc4 识别图像位置...

这是我正在使用的代码...

```
var $loading = $('<img src="Url.Content("~/Images/ajax-loader.gif")" alt="loading" class="ui-loading-icon">'); 
```

放入@符号并没有帮助......它只会让事情变得更糟。然后我在一个函数中调用它......

```
$dialog
    .append($loading)
    .load($url)
    .dialog({
          autoOpen: false
        , title: $title
         , width: 1200
        , modal: true
       , minHeight: 350
         , show: 'fade'
         , hide: 'fade'
     }); 
```

在 MVC2 中，我只需将`Url.Content()`in`<%= %>`标记包围起来，事情就会很酷

这是整个功能...

```
function loadDialog(tag, event, target) {
            //debugger;
            event.preventDefault();
            var $loading = $('<img src="@(Url.Content("~/Images/ajax-loader.gif"))" alt="loading" class="ui-loading-icon">');
            debugger;
            var $url = $(tag).attr('href');
            var $title = $(tag).attr('title');
            var $dialog = $('<div></div>');
            $dialog.empty();
            $dialog
            .append($loading)
            .load($url)
            .dialog({
                autoOpen: false
                   , title: $title
                   , width: 1200
                   , modal: true
                   , minHeight: 350
                   , show: 'fade'
                   , hide: 'fade'
            });

            $dialog.dialog('open');
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:49:07.027

您应该使用 @ 并使用单引号 ' 而不是 "

```
var $loading = $("<img src='"+@Url.Content("~/Images/ajax-loader.gif")+"' alt='loading' class='ui-loading-icon'>"); 
```

* * *

***更新 ：***

**或者试试这个：**

```
var $loading = $('<img src="@(Url.Content("~/Images/ajax-loader.gif"))" alt="loading" class="ui-loading-icon">'); 
```

**你应该注意到这在 .js 文件中不起作用**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:35:50.570

必须使用@

```
var loading = '<img src="@Url.Content("~/Images/ajax-loader.gif")" alt="loading" class="ui-loading-icon">'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:56:27.277

以下似乎适用于 Razor ......

```
var $loading = $('<img src="../../Images/ajax-loader.gif" alt="loading" class="ui-loading-icon">'); 
```

我只是假设将站点从我的开发人员框移动到实际服务器时这不起作用。好吧，我正要知道。

# javascript - Javascript中的数据隐藏

> ID：11525782
> 
> 赞同：8
> 
> 时间：2012-07-17T15:27:00.593
> 
> 标签：javascript, oop

在 Java 编程语言中，**private**关键字用于数据隐藏——标记为私有的字段或方法在类或子类之外不可见。

这是如何在javascript中实现的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T15:28:56.050

在 JavaScript 标准方法是使用**模块模式**，如下所示..

```
var testModule = (function () {

    var myPrivateVar = 0;

    var myPrivateMethod = function (someText) {
        console.log(someText);
    };

    return {

        myPublicVar: "foo",

        myPublicFunction: function (bar) {
            myPrivateVar++;
            myPrivateMethod(bar);
        }

    };
})(); 
```

**用法**：在上面的代码中，返回一个对象，其中包含一个变量（**myPublicVar**）和一个函数（**myPublicFunction**）。在此函数内部，您可以访问内部变量（**myPrivateVar**）和内部函数（**myPrivateMethod**），但不能从外部访问。

```
var mod = new testModule();
mod.myPublicFunction(param); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T15:29:45.953

这一切都是通过范围界定来实现的。

```
var MYCLASS = function(){

     var priv_var = 0; //private var

     this.addToVar = function(){
         priv_var++;
     }

     this.showVar = function(){
         return priv_var;
     }

}

var mc = new MYCLASS;

mc.addTovar();
alert(mc.showVar()); //"1" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-13T05:23:05.497

这是一个您可能会喜欢的简单 API。它具有三个功能：Key（构造函数）、KeepSecret、FetchSecret。

您可以做的是拥有一个带有秘密守护者的对象作为属性。然后对象可以“携带”数据，但是访问对象但不知道密钥的代码无法访问隐藏数据。

```
/**
 * Example usage:
 *
 * Create a key
 *
var mykey = Key();

 *
 * Keep a secret
 *
var mykeeper = KeepSecret(mykey, 42);

 *
 * Fetch the secret
 *
var answer = FetchSecret(mykey, mykeeper);

 *
 * 'answer' will then contain 42
 */

(function(Namespace, Code) { return Code(Namespace); })(
    /* Choose the namespace for Key, KeepSecret, FetchSecret */
    this,

    function(Namespace) {

/*
 * Simply so that we can use "Key" as both a type-name
 * and a parameter-name
 */
var ikey;

/** Constructor for a key */
function Key() {
    if (!(this instanceof Key))
      return new Key();
  }

/* Same key constructor */
ikey = Key;

/**
 * Hide a secret using a key
 *
 * @param Key
 *   The key to lock away the secret with
 *
 * @param Secret
 *   The secret to be locked away
 *
 * @return
 *   A function which hides the secret inside
 */
function KeepSecret(Key, Secret) {
    /* The function can access itself */
    var closure;

    if (!(Key instanceof ikey))
      throw "KeepSecret: Invalid key";

    closure = function(key) {
        /* If we were not passed the key, authenticate */
        if (key !== Key) {
            Key.keeper = closure;
            return;
          }

        /* The caller knew the key, so reveal the secret */
        return Secret;
      }
    return closure;
  }

/**
 * Use a key and a function to reveal the secret that function keeps
 *
 * @param Key
 *   The key for unlocking the secret
 *
 * @param Keeper
 *   The function keeping the secret
 *
 * @return
 *   The secret, if the key unlocks it
 */
function FetchSecret(Key, Keeper) {
    /* Tracks authentication */
    var closure;

    if (!(Key instanceof ikey) || !(Keeper instanceof Function))
      throw "FetchSecret: Invalid parameter(s)";

    /* Ask the keeper to authenticate */
    Keeper();

    /* Note the authenticated function */
    closure = Key.keeper;

    /* Clear the authentication */
    delete Key.keeper;

    /* Did the keeper prove that they know the key? */
    if (closure !== Keeper)
      /* No */
      return;

    /* They know the key.  Show we know the key, too */
    return closure(Key);
  }

Namespace.Key = Key;
Namespace.KeepSecret = KeepSecret;
Namespace.FetchSecret = FetchSecret;
return true;

  }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-28T23:18:46.563

```
"use strict";

var Person = function (fName, lName) {

    var firstName = fName || "AN", lastName = lName || "Other";

    var fullName = function () {
        return firstName + ' ' + lastName;
    };

    return {
        setName: function (fName, lName) {
            firstName = fName;
            lastName = lName;
        },

        getFullName: function() {
            return fullName();
        }
    };

}

var p = new Person("Your", "name");

console.log(p.getFullName()); 
```

# gwt - GWT servlet过滤器，如何识别特殊服务请求？

> ID：11525787
> 
> 赞同：2
> 
> 时间：2012-07-17T15:27:10.683
> 
> 标签：gwt, servlets, mvp, servlet-filters, requestfactory

我用 GWT+requestfacotry(MVP)+GAE 创建了一个应用程序。有一些服务或方法暴露给 GWT 客户端，例如

> ```
> 1.create 
> 2.remove
> 3.query 
> ```

我想将授权功能添加到“创建”和“删除”，而不是“查询”。我用 servlet 过滤器做到了：

```
 public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse,
      FilterChain filterChain) throws IOException, ServletException {
    UserService userService = UserServiceFactory.getUserService();
    HttpServletRequest request = (HttpServletRequest) servletRequest;
    HttpServletResponse response = (HttpServletResponse) servletResponse;

    if (!userService.isUserLoggedIn()) {

        response.setHeader("login", userService.createLoginURL(request.getHeader("pageurl")));
     // response.setHeader("login", userService.createLoginURL(request.getRequestURI()));
      response.sendError(HttpServletResponse.SC_UNAUTHORIZED);
      return; 
    } 

    filterChain.doFilter(request, response);
  } 
```

**我的问题**是如何识别进来的请求（我的意思是请求将路由到哪个类和服务）？有一些头字段包含模块名称，但我不认为这是安全的方法。是否可以从 http 请求中获取 RequestFactry 相关类？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:53:20.913

在 servlet-filter 中很难做到这一点。相反，您可以在 RF ServiceLayerDecorator 链中提供自定义装饰器。实现可能如下所示：

```
import com.google.web.bindery.requestfactory.server.ServiceLayerDecorator;

public class SecurityDecorator extends ServiceLayerDecorator {

  @Override
  public Object invoke( Method domainMethod, Object... args ) {
    if ( !isAllowed( domainMethod) ) {
      handleSecurityViolation();
    }
    return super.invoke( domainMethod, args );
  }
} 
```

要注册附加装饰器，请提供自定义 RF servlet：

```
import com.google.web.bindery.requestfactory.server.RequestFactoryServlet;

public class SecurityAwareRequestFactoryServlet extends RequestFactoryServlet {

  public SecurityAwareRequestFactoryServlet() {
    super( new DefaultExceptionHandler(), new SecurityDecorator() );
  }
} 
```

并将其注册到您的 web.xml 中：

```
<servlet>
    <servlet-name>gwtRequest</servlet-name>
    <servlet-class>com.company.SecurityAwareRequestFactoryServlet</servlet-class>
</servlet> 
```

# parsing - Haskell Parsec Parser for Encountering [...]

> ID：11525788
> 
> 赞同：6
> 
> 时间：2012-07-17T15:27:16.907
> 
> 标签：parsing, haskell, parsec

我正在尝试使用 Parsec 在 Haskell 中编写解析器。目前我有一个可以解析的程序

```
test x [1,2,3] end 
```

执行此操作的代码如下

```
testParser = do { 
  reserved "test"; 
  v <- identifier; 
  symbol "["; 
  l <- sepBy natural commaSep;
  symbol "]";
  p <- pParser;
  return $ Test v (List l) p
 } <?> "end" 
```

其中 commaSep 定义为

```
commaSep        = skipMany1 (space <|> char ',') 
```

现在有什么方法可以让我解析类似的语句，特别是：

```
test x [1...3] end 
```

作为 Haskell 和 Parsec 的新手，我确信有一些我不知道的简洁的好方法。任何帮助，将不胜感激。

再次感谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-17T15:47:53.247

我将使用[`Control.Applicative`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Applicative.html)like中的一些功能[`(*>)`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Applicative.html#v%3a-42--62-)。如果您想避免 Parsec 的单子接口并更喜欢应用接口，这些函数很有用，因为在我看来，解析器变得更容易阅读。

如果您不熟悉基本的应用程序功能，请发表评论，我会解释它们。如果您不确定，可以在[Hoogle](http://haskell.org/hoogle/)上查找它们。

* * *

正如我理解您的问题一样，您需要一个解析器来处理这样的一些数据结构：

```
data Test = Test String Numbers
data Numbers = List [Int] | Range Int Int 
```

可以解析这种数据结构的解析器看起来像这样（我没有编译代码，但它应该可以工作）：

```
-- parses "test <identifier> [<numbers>] end"
testParser :: Parser Test
testParser =
  Test <$> reserved "test" *> identifier
       <*> symbol "[" *> numbersParser <* symbol "]"
       <*  reserved "end"
       <?> "test"

numbersParser :: Parser Numbers
numbersParser = try listParser <|> rangeParser

-- parses "<natural>, <natural>, <natural>" etc
listParser :: Parser Numbers
listParser =
  List <$> sepBy natural (symbol ",")
       <?> "list"

-- parses "<natural> ... <natural>"
rangeParser :: Parser Numbers
rangeParser =
  Range <$> natural <* symbol "..."
        <*> natural
        <?> "range" 
```

# linq - WCF 服务操作返回一个对象图

> ID：11525789
> 
> 赞同：0
> 
> 时间：2012-07-17T15:27:16.457
> 
> 标签：linq, wcf-data-services, odata

我有一个 WCF 服务操作，我希望它返回一个对象图而不是一个简单的对象列表。有什么神奇的 LinQ 可以做到这一点吗？

谢谢

可能需要更多信息：

我有几个实体：

StockableItem
+ Id
+ 代码

库存
+ 编号
+ 位置
+ 数量

StockableItem->Stock 是 1..* 关系。

我在这个 linq 上失败了：

从 si in svc.StockableItems.Include("Stock")
join s in svc.Stock on si.Id 等于 s.Id
where s.Location == 1 select si

和几个变化。

我希望服务操作能够返回如下内容：

StockableItem - ID=213, Code=xxx
StockableItem - ID=214, Code=xxx2
    + Stock - ID=214, Location=1, Qty=3
StockableItem - ID=215, Code=xxx3
StockableItem - ID=216, Code=xxx4
    + 库存 - ID=216，位置=1，数量=6

即返回所有 StockableItems 以及给定位置的 Stock 条目。它几乎只是一个左外连接：

Select * from StockableItems si
Left outer join Stock s ON si.Id = s.Id and s.Location = @Location

但变成了一个对象图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:32:28.453

这并不完全清楚。听起来您理想情况下想要一个 OData 解决方案。不能从 OData 查询调用的 WCF 数据服务服务操作返回对象图。您可以获得对象的平面列表，但随后需要使用 $expand 来获取对象图。在您的情况下 $expand 不起作用，它将返回所有通过过滤器的 StockItems 的所有股票实例。

我认为你最好的选择是在你的数据库中创建一个视图（我假设你有一个位置表？）

```
 SELECT       si.Id, Locations.Location 
    FROM         StockableItem AS si  
    CROSS JOIN   Locations 
```

在您的实体模型中，将此视图添加为实体（称为 XXX say）并在它与您的 StockableItem 和 Stock 实体之间设置导航属性。

现在您可以运行 OData 查询，例如

```
.../XXX?$expand=StockableItem,Stock&$filter=isof(Stock,'YourModelName.Stock') and Location eq 1 
```

这不是您所追求的确切对象图，但是，除非您想开始在客户端添加链接，否则它是您将获得的最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T16:23:17.453

从上面的查询中不清楚您想要做什么。使用 WCF DS 客户端，您可以添加钻取属性的 where 子句：

```
from si in svc.StockableItems
where si.Stock.Location == 1
select si
// Results in something like http://services.odata.org/Experimental/OData/OData.svc/Products?$filter=Category/Name eq 'Beverages' 
```

您还可以使用 Expand 方法或通过将其包含在您的投影中显式地进行预加载：

```
svc.StockableItems.Expand("Stock").Where(si => si.Stock.Location == 1) // OR
from si in svc.StockableItems
where si.Stock.Location == 1
select si, si.Stock
// Results in something like http://services.odata.org/Experimental/OData/OData.svc/Products?$filter=Category/Name eq 'Beverages'&$expand=Category 
```

# c - 当我的计时器很快触发时，我应该将哪种类型的计时器事件用于后台进程

> ID：11525791
> 
> 赞同：0
> 
> 时间：2012-07-17T15:27:20.603
> 
> 标签：c, multithreading, timer

我正在使用一个每秒可以触发多达 5000 次的计时器。同时，运行计时器的进程将产生自己的 32 个线程。每次计时器触发时，我都希望我的线程做一些事情。

我可以使用任何 sigevent 类型（脉冲、信号或创建一个设置其他线程监视的变量的线程）来执行此操作，但我不确定哪个最有效。

我知道线程可能是个坏主意，因为它们很昂贵，并且每秒产生这么多线程可能会导致性能问题，所以有什么想法吗？

我希望它在计时器触发后尽快执行操作。那么最好使用的事件类型是什么？

编辑：忘了提，这是用 C 编码的

# c# - FileHelpers 源代码

> ID：11525793
> 
> 赞同：1
> 
> 时间：2012-07-17T15:27:27.937
> 
> 标签：c#, .net, filehelpers

我想在 FileHelpers 中添加一个基于 NPOI 库的 Excel 解析引擎，但是我在任何地方都找不到 2.9.x 版本的源代码。

任何人都可以指出我可以在哪里参与该项目？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T03:17:52.970

最后的源码在github上

[https://github.com/MarcosMeli/FileHelpers](https://github.com/MarcosMeli/FileHelpers)

欢迎来到这个项目，我有点出局，但对重新激活 3.0 版本会很有帮助：)

谢谢 ！！！

# android - Eclipse 不会运行应用程序，因为它说我有错误但我没有错误

> ID：11525794
> 
> 赞同：0
> 
> 时间：2012-07-17T15:27:30.697
> 
> 标签：android, eclipse

我正在尝试在 Eclipse 上运行一个 android 项目，但每次我尝试这个特定项目时，它都会给我消息，

> “您的项目包含错误，请在运行您的应用程序之前修复它们。”

我知道问题不在于模拟器，因为我可以有效地运行其他项目。

我的任何项目文件中的任何地方都没有下划线的错误。我什至试着去掉我当时正在做的事情，只留下我前一天做的事情。我尝试手动删除 .android、r.java 和 bin 文件，但这些解决方案都不起作用。当我拉起我的属性时，构建路径没有显示错误。我的 LogCat 中没有出现错误。

我需要一个解决方案。

这是我的清单的副本，因为我知道我会被要求检查它。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.com.proto1"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".mainj"
            android:label="@string/title_activity_mainj" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".menu"
            android:label="@string/app_name" >
            <action android:name="android.intent.action.MENU" />

            <category android:name="android.intent.category.DEFAULT" />
        </activity>
        <activity
            android:name=".Infoactive"
            android:label="@string/app_name" >
            <action android:name="android.intent.action.INFOSCREEN" />

            <category android:name="android.intent.category.DEFAULT" />
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:41:44.337

*   当 xml 文件中有问题时，通常会观察到这种异常行为。当你在别处找不到错误时`Window - > show view - > Problems`，你可能会在那里找到一些东西。

*   如果这不起作用，请右键单击您最近更改的文件，在导航器中 -> 比较 -> 本地历史记录，将文件替换为以前的版本并重建。重复该过程，直到您的项目没有错误。

希望有帮助。

# actionscript-3 - StageWebView，无法从 Adob e 找到任何好的文档

> ID：11525795
> 
> 赞同：1
> 
> 时间：2012-07-17T15:27:31.653
> 
> 标签：actionscript-3, flash, flash-builder

有没有人有一个*很好*的链接到一个如何设置工作 StageWebView的非常*简单的例子？*

对于 iOS，它是如此简单且有据可查，我似乎找不到任何对使用 Adob​​e Flash Builder 进行开发有帮助的东西。

我找到了这段代码：

```
 import spark.components.Image;
        import spark.events.ViewNavigatorEvent;

        public var webView:StageWebView = new StageWebView(); 

        public function init():void 
        { 
            webView.stage = this.stage;
            webView.viewPort = new Rectangle( 0, 50, stage.stageWidth, stage.stageHeight );
            webView.loadURL("http://www.google.com");  
        }

        protected function logoutHandler(event:MouseEvent):void
        {
            NativeApplication.nativeApplication.exit(); 
        }
    ]]>
</fx:Script> 
```

然后我如何将它实际附加到将出现在屏幕上的元素上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:42:08.057

不确定您是在 Flash Builder 中引用 Flex 项目还是纯 ActionScript 项目；但是，类似：

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
                       xmlns:s="library://ns.adobe.com/flex/spark"
                       xmlns:mx="library://ns.adobe.com/flex/mx"
                       addedToStage="addedToStageHandler(event)">
    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            protected var stageWebView:StageWebView;

            protected function addedToStageHandler(event:Event):void
            {
                stageWebView = new StageWebView();
                stageWebView.viewPort = new Rectangle(0, 0, stage.stageWidth, stage.stageHeight);
                stageWebView.stage = stage;
                stageWebView.loadURL("http://maps.google.com/");
            }

            override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
            {
                super.updateDisplayList(unscaledWidth, unscaledHeight);

                if (stageWebView)
                    stageWebView.viewPort = new Rectangle(0, 0, unscaledWidth, unscaledHeight);
            }
        ]]>
    </fx:Script>
</s:WindowedApplication> 
```

对于纯 ActionScript，`addedToStage`将是相同的实现，但您将通过自己的处理程序生命周期（例如`Event.RESIZE`.

参考

*   [适用于 Adob​​e Flash 平台的 StageWebView ActionScript 3.0 参考](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/StageWebView.html)
*   [使用 StageWebView 类（Adobe 开发人员连接）](http://www.adobe.com/devnet/air/quick_start_as/quickstarts/qs_using_stage_web_view.html)
*   [在移动应用程序中显示 HTML 内容](http://help.adobe.com/en_US/as3/dev/WS901d38e593cd1bac3ef1d28412ac57b094b-8000.html)
*   [创建一个基本的网络浏览器（Adobe Cookbooks）](http://cookbooks.adobe.com/post_Create_a_basic_web_browser_with_StageWebView-18850.html)
*   [StageWebView 平台之间的差异](http://helpx.adobe.com/air/kb/stagewebview-differences-platforms-air-sdk.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:38:40.657

您可以在您的课程中使用 mx ui 组件，并且在此组件中您可以添加任何 stagewebview。使用 Event.ADDED_TO_STAGE 侦听器，以确保已准备好阶段变量。你可以像使用 addChild 函数一样添加到 mx ui 组件的阶段变量中。

```
<mx:UIComponent x="0" y="0" width="958" height="567" id="component_UI"/>
component_UI.stage.addChild(Your Stagewebview object) 
```

# ant - 将命名空间从一个 ant xml 导入到另一个 ant xml

> ID：11525800
> 
> 赞同：2
> 
> 时间：2012-07-17T15:27:53.227
> 
> 标签：ant, build, build-automation

在我们的项目中，我们有一个**common.xml**，它包含在我们所有的 ant 文件中。这个**common.xml**包含我们在项目中使用的所有常见任务。

最近我们想在我们的项目中使用 ant-contrib。所以我们在**common.xml中包含了以下任务定义**

```
<project name="CommonTasks" basedir="." xmlns:ac="antlib:net.sf.antcontrib">
    <taskdef uri="antlib:net.sf.antcontrib" resource="net/sf/antcontrib/antlib.xml>
        <classpath>
            <pathelement location="/usr/lib/ant-contrib-1.0b3.jar" />
       </classpath>
    </taskdef>
</project> 
```

在我们的**build.xml**之一中，我们有以下代码

```
<project name="Build" basedir=".">
    <import file="common.xml" />

    <ac:if>
        <ac:not>
            <isset property="android.available" />
        </ac:not>
        <ac:then>
            <echo message="android is not available" />
        </ac:then>
    </ac:if>
</project> 
```

现在我们假设命名空间是在**common.xml**中定义的，因此同样会在我们的**build.xml**中导入。但这并没有发生。相反，我需要为我的**build.xml包含****xmlns:ac="antlib:net.sf.antcontrib" eacch**。即我的 build.xml 应该如下所示

 **```
<project name="Build" basedir="." xmlns:ac="antlib:net.sf.antcontrib">
    <import file="common.xml" />

    <ac:if>
        <ac:not>
            <isset property="android.available" />
        </ac:not>
        <ac:then>
            <echo message="android is not available" />
        </ac:then>
    </ac:if>
</project> 
```

有没有办法在我们所有的 build.xml 中执行此命名空间导入，而不是在所有 build.xml 中定义相同的命名空间定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T22:02:28.353

我有一种不同的方式来处理一个以上的 ant 文件。我的常见 ant 文件以以下几行开头：

```
<?xml version="1.0" encoding="UTF-8" ?>
<project name="nfa">
    <description>
        This file contains private task for:
        Test and Analyze th ...... 
```

我必须包括我的常见 ant 文件：

```
<include file="anttasks/private_ant_tasks.xml"/> 
```

在我的主要 ant 文件中，我可以像这样使用这个*私人*任务：

```
<antcall target="nfa.analyze" /> 
```

通过这种方式，我还很好地组织了 ant 任务和文件。**

# c - 如何从http获取文本文件到变量中

> ID：11525808
> 
> 赞同：0
> 
> 时间：2012-07-17T15:28:18.720
> 
> 标签：c

（我是c的新手）

我想知道如何将位于网络上的 .txt 文件中的文本提取到变量中。我正在寻找 libcurl 或其他东西，但无法找到如何在 Peppermint Os（基于 Ubuntu/Debian）上使用它。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:33:48.660

如果您不是绝对需要在程序中进行下载，您可以简单地使用 wget 或 curl 下载文件，然后将输出通过管道传输到程序的 STDIN，然后将输入存储在变量中。

这将允许您使用任何文件（来自网络或非网络）作为输入。

# c - nm 符号实用程序报告

> ID：11525810
> 
> 赞同：3
> 
> 时间：2012-07-17T15:28:24.427
> 
> 标签：c, static-libraries, symbols, nm

nm 命令将符号报告为 U 和 T。U 代表未定义，AFAIK 该符号位于另一个库中，但是 T 是什么意思？

0000018c T _myfunc U _myfunc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:32:31.773

查看手册页，`nm(1)`我们看到：

```
 "T"
 "t" The symbol is in the text (code) section. 
```

# nhibernate - 是否可以强制 NHibernate 的无状态会话重用连接？

> ID：11525812
> 
> 赞同：1
> 
> 时间：2012-07-17T15:28:28.657
> 
> 标签：nhibernate, connection-pooling

当不使用事务时，看起来 NHibernate 的无状态会话会在每个语句（读取或写入）之后强制关闭连接。

查看代码，发现这是因为 ConnectionManager`ConnectionReleaseMode`自动设置为`AfterTransaction`，并且不使用事务被解释为在其自己的事务中执行每个语句。

有没有办法改变这种行为并允许在会话的整个生命周期内重复使用单个连接？

我正在使用 SqlClientDriver，以防万一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:31:07.090

只需将所有内容包装在 NHibernate 事务中（无论如何这可能是可取的）。

当事务打开时，连接也将打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:35:10.347

> 有没有办法改变这种行为并允许在会话的整个生命周期内重复使用单个连接？

就在这里。使用 " [hibernate.connection.release_mode](http://www.nhforge.org/doc/nh/en/index.html#transactions-connection-release) " "on_close" 以便仅在 NHibernate 会话关闭时关闭连接。

重要提示：仅当您使用“每个请求的会话”或[“每个会话的会话”之](https://stackoverflow.com/a/10273922/1350308 "您也可以在此处查看有关使用 on_close 的简短说明")类的方法时，此选项才有意义，因为在这些情况下，可能会在事务边界之外发生大量“延迟加载”。请参阅：“......*[此设置是为了向后兼容而保留的，但强烈建议不要使用它](http://www.nhforge.org/doc/nh/en/index.html#transactions-connection-release)*......”

# jquery - jQuery + CSS 动画

> ID：11525814
> 
> 赞同：2
> 
> 时间：2012-07-17T15:28:49.153
> 
> 标签：jquery, css

实际上我想使用jquery来减慢增加高度和减少的动画。我正在使用.css（）来增加和减少div的高度。请帮助

```
<script>
  $(document).ready(function(){
    $(".stickyfooter2").css({'height': '60px'});
    $('.stickyfooter2').mouseover(function(){
      $(".stickyfooter2").css({'height': '200px'});
    });
    $('.stickyfooter2').mouseleave(function(){
      $(".stickyfooter2").css({'height': '60px'});
      $(this).fadeIn('fast');
    });
  });  
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:34:37.507

您还需要`slideUp()`and`slideDown()`或更好`slideToggle()`的方法，您可以在其中指定速度：

```
$(".stickyfooter2").slideToggle('speed goes here in milliseconds'); 
```

如果您想调整元素的高度，请`.css()`使用 slideToggle

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:34:45.727

这可能是一个解决方案：

```
$('.stickyfooter2').mouseover(function(){
  $(".stickyfooter2").animate({'height': '200px'}, 2000);
});
$('.stickyfooter2').mouseleave(function(){
  $(".stickyfooter2").animate({'height': '60px'}, 2000);
}); 
```

# java - RandomAccessFile 读取 xml 文件

> ID：11525817
> 
> 赞同：0
> 
> 时间：2012-07-17T15:28:54.660
> 
> 标签：java

我正在尝试使用 RandomAccessFile 来读取 xml 文件。问题是我想一次只读取一定的长度，直到文件结束。

```
ReadUTF() read entire lines in the file which I do not want
Read(byte,start,end) seems what I need, but it is readying in byte so it doesnt contain the actual text of the read content. 
```

有没有一种方法可以使用 RandomAccessFile 一次读取特定长度的 xml 文件？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:37:51.083

readUTF 读取单个 UTF 编码字符串，该字符串以无符号 16 位长度开头，后跟字符串。因此，它可以包含多行，但不能用于读取文本文件。

RandomAccessFile 是为二进制格式设计的，因此对读取文本的支持很少。

您是否尝试过使用 BufferedReader 和 skip() 来获得随机访问？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-17T15:51:37.350

您可以使用 的方法`getChannel()`访问`RandomAccessFile`文件的一部分。

例如，这里我从一个非常大的 xml 文件 (2go) 的位置 100 开始映射 2000 个字节。

```
 FileChannel channel = new RandomAccessFile("frwiktionary-20120216-pages-meta-current.xml", "r").getChannel();
    ByteBuffer buffer = channel.map(FileChannel.MapMode.READ_ONLY, 100, 2000);

    //Change the value with the proper encoding
    Charset chars = Charset.forName("ISO-8859-1"); 

    CharBuffer cbuf = chars.decode(buffer);
    System.out.println("buffer = " + cbuf); 
```

编辑（见下面的评论）

它不仅适用于单字节编码，请参阅此测试：

```
FileOutputStream fop = new FileOutputStream("/home/alain/Bureau/utf16.txt");
try (OutputStreamWriter wr = new OutputStreamWriter(fop, "UTF-16")) {
    wr.write("test test toto 测");
}

FileChannel channel = new RandomAccessFile("/home/alain/Bureau/utf16.txt", "r").getChannel();
ByteBuffer buffer = channel.map(FileChannel.MapMode.READ_ONLY, 0, channel.size());
Charset chars = Charset.forName("UTF-16");
CharBuffer cbuf = chars.decode(buffer);
System.out.println("buffer = " + cbuf); 
```

> 输出 ：
> 
> buffer = test test toto 测</p>

# java - JVM 使用 Intel 编译器编译

> ID：11525835
> 
> 赞同：0
> 
> 时间：2012-07-17T15:30:08.140
> 
> 标签：java, intel

之前做过一个项目，涉及到Intel x86平台的程序速度优化，使用`Intel C`++编译的应用程序的性能`Intel Performance Primitive (IPP)`明显比不使用IPP的要快。

我想知道是否`JVM`可以使用英特尔工具为英特尔平台编译，是否会显着提高性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:33:58.573

大多数运行的机器/本机代码是由 JIT 生成的。

对于当前用 C 或 C++ 编写的代码，它可能会更快，但不应该直接调用此代码。如果您有一些关键的 JNI 库，它可能会有所帮助。

# facebook - 最简单的 Facebook - Flash 实现不起作用

> ID：11525836
> 
> 赞同：0
> 
> 时间：2012-07-17T15:30:09.777
> 
> 标签：facebook, actionscript-3, flash, facebook-actionscript-api

**编辑：我正在尝试在本地执行以下操作**

我正在尝试为 Flash 应用程序做一个非常简单的 Facebook 实现。我正在使用“GraphAPI_Web_1_8_1.swc”。这是主要时间线的代码：

```
import FBLog;
import fanlib.utils.Debug;

addChild(Debug.field); // simply adds a textfield on stage for debugging
FBLog.INSTANCE; 
```

和 FBLog 类代码：

```
package {

    import flash.events.Event;
    import flash.events.EventDispatcher;
    import flash.events.MouseEvent;
    import fanlib.utils.Utils;
    import fanlib.utils.Debug;
    import com.facebook.graph.Facebook;

    public class FBLog extends EventDispatcher
    {
        static public const CONNECTED:String = "CONNECTED";
        static public const INSTANCE:FBLog = new FBLog();

        private var _applicationID:String;
        private var _extendedPermissions:Object;

        public function get applicationID():String { return _applicationID; }

        public function FBLog() 
        {
            super();
            if (INSTANCE) throw "What?";

            new DelayedCall(init, 0.5);
        }
        private function init():void {
            _applicationID = "408526019168127";

            //Set permissions to ask for
            _extendedPermissions = {scope:"read_stream, publish_stream, user_about_me, read_friendlists, user_photos"};

            //Initialize facebook
            try {
                Debug.field.appendText("Issuing Facebook init...");
                Facebook.init(_applicationID, handleInit);
                Debug.field.appendText("Issued Facebook init...");
            } catch (e:Error) { Debug.field.appendText("Facebook not initialized!" + "\n" + e); }
        }
        private function handleInit(response:Object, fail:Object):void {
            Debug.field.appendText("end init!");
            if (!response) response = {};
            if (!fail) fail = {};
            trace(Utils.PrettyString(response), Utils.PrettyString(fail));
            dispatchEvent(new Event(CONNECTED));
        }

        public function login(e:MouseEvent = null):void {
            Debug.field.appendText("start login");
            Facebook.login(handleLogin, _extendedPermissions);
        }
        private function handleLogin(response:Object, fail:Object):void {
            Debug.field.appendText("end login");
            if (!response) response = {};
            if (!fail) fail = {};
            Debug.field.appendText(Utils.PrettyString(response) + "\n" + Utils.PrettyString(fail));
            dispatchEvent(new Event(CONNECTED));
        }
    }
} 
```

**出于某种我无法理解的原因，从未**调用过“handleInit”函数。这是我在文本字段中得到的输出：

> 发出 Facebook 初始化...发出 Facebook 初始化...

我从来没有得到额外的“结束初始化！”。

现在，我尝试将此 SWF 嵌入到一个看起来像这样的 HTML 中，但**没有**用：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head>
        <title>Digital TradeShow</title>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <style type="text/css" media="screen">
            #myContent              { width:1300 height:700; }
            body                    { margin:0; padding:0; overflow:auto; text-align:center; background:white;}
            #myAlternativeContent   { /* style alt content */ }
        </style>
        <script type="text/javascript" src="swfobject.js"></script>
        <script type="text/javascript">
            var flashvars = {};
            var params = { allowfullscreen:"true", wmode:"window" };
            var attributes = {};
            swfobject.embedSWF("FBLog.swf", "myContent", "1300", "700", "10.2", "expressInstall.swf", flashvars, params, attributes);
        </script>
        <script type="text/javascript">
            function PopupCenter(pageURL,title,w,h,scroll) {
                var left = (screen.width/2)-(w/2);
                var top = (screen.height/2)-(h/2);
                var targetWin = window.open(pageURL, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars='+scroll+', resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);
                } 
        </script> 
        <script type="text/javascript" src="http://connect.facebook.net/en_US/all.js"></script>
    </head>
    <body>
        <div id="fb-root"></div>
        <div id="myContent">
            <div id="myAlternativeContent">
                <h1>Alternative content</h1>
                <p><a href="http://www.adobe.com/go/getflashplayer"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" /></a></p>
            </div>
        </div>
    </body>
</html> 
```

相同的输出。我可能做错了什么？我使用的 APP_ID 是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T01:38:17.877

这是一个非常烦人的问题，几乎“隐藏”在网络中（至少对我来说很难找到答案）。

在您的 HTML 中，在嵌入部分使用它：

```
var attributes = {
    name:"myContent",
    id:"myContent"
}; 
```

当您在属性对象中使用“name”属性时，FB JS 可以在 DOM 树中找到您的电影并执行回调函数。希望这对您有所帮助。

现在，我仍然有一个问题：这解决了 Chrome、Firefox 等的问题。但 IE9 没有。可能是因为 JSON 解析器的问题。如果我找到答案，我会回来并在此处发布链接。

干杯。

# wordpress - 嵌入的视频不在帧内

> ID：11525837
> 
> 赞同：0
> 
> 时间：2012-07-17T15:30:09.887
> 
> 标签：wordpress, video, embed, vimeo

我已将 Vimeo 中的视频嵌入到我的网站上，但即使我指定了正确的高度和宽度，它似乎也不适合网站框架

[http://www.dawaf.co.uk/wildlion/](http://www.dawaf.co.uk/wildlion/)

视频左右两侧出现黑色边框

```
 <div class="panel-10" id="hero_carousel">
                <ul class="hero-carousel">
                    <li>
<iframe src="http://player.vimeo.com/video/17157212?title=0&amp;byline=0&amp;portrait=0&amp;color=c9ff23" width="672" height="312" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>

                        <div class="carousel-copy">
                            <p class="carousel-title">
                                2012 Showreel
                            </p>

                            <p class="carousel-subtitle">
                                Cutting Edge Media
                            </p>

                            <p>Here is some of our recent work to give you a taste of what we have to offer. Some naughty media production companies use stock footage in their showreel, but we promise that all of the media seen in ours is in fact ours.</p>

                            <p class="readmore"><a href="http://www.dawaf.co.uk/wildlion/portfolio">View Portfolio<span></a></p>
                        </div>
                    </li>
                </ul>
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:38:36.030

好吧，我的猜测是，这与您的高/宽比有关。如果您查看视频的默认嵌入链接，则 width:height 为 500:281 ，相差约 1.78 倍。你的宽高比是 2.15。

请注意，在您的网站上，视频栏（带有播放按钮和全屏按钮的那个）尽可能宽，但视频没有。这似乎进一步表明问题在于您的宽度：高度。

也许试着让你的宽度成为你身高的 1.78 倍，看看会发生什么？

编辑：这很可能意味着你必须让整个 2012 年的放映区域更高一点。希望这不是问题？

# c# - 是否可以通过 WCF 向我的 Web 应用程序中的特定用户动态发送新数据？

> ID：11525839
> 
> 赞同：1
> 
> 时间：2012-07-17T15:30:12.293
> 
> 标签：c#, asp.net, wcf

目前我有一个 C# 应用程序和一个 ASP.NET Web 应用程序。我使用 WCF 将数据直接从 ASP.NET Web 应用程序传递到 C# 应用程序。但是，ASP.NET Web 应用程序依赖 AJAX 计时器（轮询）来使用数据库中的新数据动态更新页面。数据库不断更新。

是否可以让 C# 应用程序通过 WCF 将数据动态传递给 ASP.NET Web 应用程序并消除对计时器和轮询的需要？C# 应用程序需要能够检查某个用户是否已连接，并向该用户发送数据。

我不确定这是否可行，但我认为检查一下不会有什么坏处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:39:20.257

我知道三种选择：

可能该功能将是 WebSockets，但现在它们还没有被标准化，所以同时，我认为 SignalR 是最好的选择

*   使用[SignalR](http://signalr.net/)，[SignalR 文档](https://github.com/SignalR/SignalR/wiki)

*   WebSockets（它们在 StackOverflow 中使用）

    *   [http://www.html5rocks.com/en/tutorials/websockets/basics/](http://www.html5rocks.com/en/tutorials/websockets/basics/)

    *   [http://en.wikipedia.org/wiki/WebSocket](http://en.wikipedia.org/wiki/WebSocket)

*   彗星：

    *   [http://en.wikipedia.org/wiki/Comet_](http://en.wikipedia.org/wiki/Comet_(programming) （编程）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:46:21.190

您可能想查看 Microsoft 消息队列 (MSMQ)。

使用 MSMQ 将使您免于显式轮询任何新消息。相反，一旦有新消息到达，handle 方法就会激活。

WCF 可以很容易地配置为使用 MSMQ 作为底层传输介质。

一些帮助您入门的文章/教程：

*   MSDN：[MSMQ 和 WCF：入门](http://blogs.msdn.com/b/motleyqueue/archive/2009/05/31/msmq-and-wcf-getting-started.aspx)
*   [Windows Communication Foundation 的消息队列](http://msdn.microsoft.com/en-us/library/ms751490)
*   具有安全通信的更完整方案：[使用 MSMQ 通信和证书安全创建 WCF 服务](http://www.codeproject.com/Articles/326909/Creating-a-WCF-Service-with-MSMQ-Communication-and)（代码项目）
*   [在 ASP.NET 应用程序中利用 MSMQ](http://www.codeguru.com/csharp/.net/net_general/internet/article.php/c19563/Leveraging-MSMQ-in-ASPNET-Applications.htm)

# java - 休眠：标准。是否可以构建限制列表，然后将其添加到 Critera 对象

> ID：11525841
> 
> 赞同：2
> 
> 时间：2012-07-17T15:30:17.753
> 
> 标签：java, hibernate, criteria, restrictions

我有一个带有 25 个可选参数的动态搜索。HQl 不是一个选项。我正在使用标准 API。我有 DAO 方法，我想接受可以在我的服务层中构建的“限制”列表，这样，当我从服务中调用我的 DAO 方法时，如下所示：

```
Lits<myPojoClass> = myDAO.getDataByCriterion( <?Restriction List?> ) 
```

myDAO.getDataByCriterion 可以使用“限制列表”，如下所示：

```
inside the myDAO class

Public List<myPojoClass> getDataByCriterion( <?Restriction List?> restrictionList) {
    Session s = HibernateUtil.currentSession();
    Criteria c = s.createCriteria(myPojo.class)
                  .add(Restrictions ( <?Restriction List?>  );  //attach the list here
    List<myPojoClass> response = c.list(); 
```

这似乎是你应该能够做的事情。是否可以添加传递给 DAO 方法的限制

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T15:38:50.987

是的，这是可能的。您的限制列表应该是标准对象的常规列表（即，列表 <Criterion>）。为了清楚起见，如果您像示例代码一样添加它们，那么您将进行合取（一系列逻辑与）。

将我的建议添加到您的代码中会给出：

```
Public List<myPojoClass> getDataByCriterion( List<Criterion> restrictionList) {
Session s = HibernateUtil.currentSession();
Criteria c = s.createCriteria(myPojo.class);
for (Criterion crit : restrictionList){
    c.add(crit);
}

List<myPojoClass> response = c.list(); 
```

# linq - 我不能在连接中的“on”处使用两个不同的条件吗？

> ID：11525842
> 
> 赞同：1
> 
> 时间：2012-07-17T15:30:20.127
> 
> 标签：linq, join

试过这个：

```
myStructs = from MyObject s in MyObjects
            join c in Categories on s.CategoryID equals c.Item1 && s.Stars equals c.Item2
            select s; 
```

但似乎我不能在加入时写 2 个条件？我哪里错了？在 SQL 上，这也可以完成......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:36:20.253

您需要一个匿名类型来加入多个条件/字段：

```
myStructs = from s in MyObjects
            join c in Categories 
            on new { s.CategoryID, s.Stars }  equals new { CategoryID = c.Item1, Stars = c.Item2 }
            select s; 
```

# teradata - Teradata - 通过更改设置删除银行家四舍五入

> ID：11525843
> 
> 赞同：1
> 
> 时间：2012-07-17T15:30:21.447
> 
> 标签：teradata, bankers-rounding, bankers-algorithm

我需要模仿excel中的计算。我们必须得到准确的答案。计算在几个点上四舍五入。Excel 向上舍入 X.5。看起来 Teradata 正在使用银行家的四舍五入（将 X.5 舍入到偶数 #）。

我无法更改公司数据库中的设置。有什么我可以使用的语法吗？

我有一个案例声明的临时修复，但我希望有更好的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:13:08.317

在 dbscontrol 中将 RoundHalfwayMagUp 设置为 TRUE。

# testing - 功能测试，为什么只是黑盒？

> ID：11525844
> 
> 赞同：1
> 
> 时间：2012-07-17T15:30:23.153
> 
> 标签：testing, black-box-testing

我在 Wiki 和其他一些关于功能测试的地方阅读，但我没有得到一件事 - 为什么它被认为是纯粹的黑盒测试？当我测试功能时，我经常依赖于实现知识，或者至少依赖于边界值（或数据库中的数据类型等）。或者我在这里错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:44:51.790

这只是测试的一个方面，还有其他方面依赖于对程序内部结构的了解。

这种方法的优点是确保测试期间的客观性。了解程序的内部结构后，测试人员经常（不）有意地避免极端情况，或者过度专注于他认为可能存在的测试用例。

这就是为什么功能测试通常由不参与开发过程的第三方进行。当然，你可以自由地让那个人知道边界值，因为它并没有真正揭示内部结构。

这里的主要思想是专注于创建完整的测试用例并比较获得的和预期的输出，而不是考虑程序内部是如何工作的。

# c# - 为什么 PrincipalContext.ValidateCredentials 针对旧凭据进行验证？

> ID：11525846
> 
> 赞同：1
> 
> 时间：2012-07-17T15:30:24.333
> 
> 标签：c#, wcf, credentials, directoryservices

我们有一个 WCF 服务，可以根据机器上的本地 Windows 帐户验证用户的凭据，但是每当创建新用户或更改密码时，用户无法登录，直到我重新启动整个机器。

我该怎么做才能告诉它根据当前用户设置检查凭据，并且不要使用旧的？

```
using (var pContext = new PrincipalContext(ContextType.Machine))
{ 
    if (pContext.ValidateCredentials(username, password))
    {
        using (var context = new LHREntities(Connections.GetConnectionString()))
        {
            // Do work
        }
    }
} 
```

我正在使用 .Net 框架 4.0 和 Windows Server 2003。如果我在我的机器上运行 Visual Studio 中的所有内容，则一切正常，并且根据当前设置正确检查凭据，但是一旦我将其部署到生产机器上的 IIS，它就会出现验证缓存的凭据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T19:26:36.590

我不知道问题到底是什么，但我确实找到了解决问题的解决方案。

同时运行 WCF 服务和 Silverlight 应用程序的 AppPool`NETWORK SERVICE`用作登录标识。我将其切换为管理登录，它现在可以根据当前用户帐户正确验证登录，并且新用户帐户和密码更改会立即生效。

如果有人可以解释为什么这是他们自己的答案，我很乐意接受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-18T15:54:08.070

此代码作为本地系统用户开始创建相同的异常

```
using (var p = new PrincipalContext(firstUser))
{
    p.ValidateCredentials(secondUser);
} 
```

Msdn 说：“ValidateCredentials 方法绑定到构造函数中指定的服务器”

我认为本地系统凭据存在问题。在这种情况下，下一个代码可以正常工作：

```
using (var p = new PrincipalContext(secondUser))
{
    p.ValidateCredentials(null, null);
} 
```

（对不起我的英语不好）

# html - 在js文件中绘制html

> ID：11525847
> 
> 赞同：0
> 
> 时间：2012-07-17T15:30:28.110
> 
> 标签：html

我必须保留一个 div，在里面我必须有答案，然后 div 应该关闭。即使在循环中的问题之后关闭 div 之后，div div 也会在没有答案的情况下关闭.. 代码：

```
if(a.isQuestion == "true"){
                  ansdetails="";
                  ansdiv ="";
                  $.each(a.answers, function(key, b) {
                      if(a.anstype=="select only one"){
                          ansdetails +="<div id=\"" +b.nextuid+ "\" data-link=\"Answer" +a.index+ "\"  class=\"showfirst\"><tr><th width=\"20\" height=\"40\" align=\"left\" valign=\"top\" scope=\"row\" class=\"questionnaireanswer\"><input name=\"radiobuttton\" answered=\"\" current-index=\""+a.index+"\" value=\"" +b.ansuid +"\"  data-value=\"" +b.ansuid+ "\" class=\"\" type=\"radio\">" +b.ansname+ " .</th>\
                          <td width=\"438\" height=\"40\" align=\"left\" valign=\"top\" class=\"questionnaireanswer\"> " +b.ansvalue+ "</td></tr></div>";
                      }
                      else{
                          ansdetails +=" <div id=\"Answer" +a.index+ "\"  class=\"showfirst\">\<tr>\
                          <th width=\"20\" height=\"40\" align=\"left\" valign=\"top\" scope=\"row\" class=\"questionnaireanswer\"><input name=\"chk\" current-index=\""+a.index+"\" id=\"" +b.ansuid +"\" value=\"" +b.nextuid+ "\" data-value=\"" +b.ansuid+ "\" class=\"\" type=\"checkbox\">" +b.ansname+ " .</th>\
                          <td width=\"438\" height=\"40\" align=\"left\" valign=\"top\" class=\"questionnaireanswer\"> " +b.ansvalue+ "</td></tr>";
                      }
                  });            

              } 
```

结果 ：

```
<div id=/"/"></div>
<tr><td><input type=/"radio/" name="dd" value=/"/">Answer 1</td></tr>
<tr><td><input type=/"radio/" name="dd" value=/"/">Answer 2</td></tr>
<tr><td><input type=/"radio/" name="dd" value=/"/">Answer 3</td></tr>
<tr><td><input type=/"radio/" name="dd" value=/"/">Answer 4</td></tr> 
```

预期结果 ：

```
<div id=/"/">
<tr><td><input type=/"radio/" name="dd" value=/"/">Answer 1</td></tr>
<tr><td><input type=/"radio/" name="dd" value=/"/">Answer 2</td></tr>
<tr><td><input type=/"radio/" name="dd" value=/"/">Answer 3</td></tr>
<tr><td><input type=/"radio/" name="dd" value=/"/">Answer 4</td></tr>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:32:26.813

`<tr>`元素不能是元素的子元素`<div>`（仅限 table/thead/tbody/tfoot）。尝试生成有效的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:41:32.097

正如 Quentin 所说，您的表生成包含错误。有效的语法更像这样：

```
<div>
    <table>
        <tr>
            <td>
                <label><input type="radio" name="dd" value="">Answer 1</label>
            </td>
        </tr>
        <tr>
            <td>
                <label><input type="radio" name="dd" value="">Answer 2</label>
            </td>
        </tr>
        <tr>
            <td>
                <label><input type="radio" name="dd" value="">Answer 3</label>
            </td>
        </tr>
    </table>
</div> 
```

无论如何，生成一个列表可能更容易、更易读：

```
<ul>
    <li>
        <label><input type="radio" name="dd" value="">Answer 1</label>
    </li>
    <li>
        <label><input type="radio" name="dd" value="">Answer 2</label>
    </li>
    <li>
        <label><input type="radio" name="dd" value="">Answer 3</label>
    </li>
</ul> 
```

# html - 开发与 Internet Explorer 9 兼容的 html 5 游戏

> ID：11525849
> 
> 赞同：0
> 
> 时间：2012-07-17T15:30:35.147
> 
> 标签：html, internet-explorer-9

我想做一个 HTML 5 游戏，唯一的限制是游戏必须在 Internet Explorer 9 上运行。由于我使用 Mac OS，我可以在 Safari、FireFox 或 Chrome 等其他浏览器上开发游戏吗？如果是这样，我如何确保游戏在交付时可以在 IE9 中正确运行？有什么办法吗？提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T15:32:21.917

您应该使用[http://caniuse.com/](http://caniuse.com/)。只需检查所有代码。当然，如果你真的需要它在那个浏览器中可靠，你最终需要在 IE9 上试用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:34:41.080

如果您使用 jQuery 等已建立的工具包，您应该可以使用 IE9，但在 IE 上会有一些不同的工作方式（即缓存的图像不会触发 onLoad）。

唯一确定的方法当然是在浏览器本身上运行它。通过 VM 或[Browserling 之](https://browserling.com/)类的服务。

# html - 使用背景图像和 css3 渐变

> ID：11525852
> 
> 赞同：1
> 
> 时间：2012-07-17T15:30:53.323
> 
> 标签：html, css

我无法将背景图像与 css3 渐变一起使用。我已经经历了很多解决方案，但我仍然无法获得图像。 [我的小提琴](http://jsfiddle.net/z2NCg/)

[这是图像](http://img29.imageshack.us/img29/1194/messageicon.png)

使用的图像是透明的。我尝试添加 background-image: url("img.png"), -webkit .. 但这似乎不起作用。还尝试以以下方式使用 div ..

```
<div id="div-with-gradient">
   <div id="div-with-image">
    <!-- content -->
    </div>
</div> 
```

任何解决方案都非常感谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T15:33:16.117

你可能想看看我上周做的这个演示[http://dabblet.com/gist/3106299](http://dabblet.com/gist/3106299)

它在同一个元素上使用图像和 CSS3 渐变。

* * *

关于您的小提琴，`url('../img/msg_arrow.png')`在 jsFiddle 中不起作用 - 您需要指定完整路径。

此外，您正在用

```
.btn1 {
    background-color: #f47e29;
    border: solid 1px #b16127;
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f48c41', endColorstr='#d66f24',GradientType=0 ); /* IE6-8 */
    padding: 0 26px;
} 
```

它设置了纯橙色背景。

我刚才注意到的另一件事：使用`background-image`也不正确：

```
background-image: url('../img/msg_arrow.png') scroll 0 0 no-repeat, linear-gradient(bottom, #000000, rgba(0,0,0,.12) 0%, rgba(0,0,0,.12) 49%, rgba(72,72,72,.12) 50%, rgba(247,245,245,.12)); 
```

您需要使用`background`那里而不是`background-image`.

最后，还有一点需要注意的是，背景是一个在另一个之上堆叠显示的，最后列出的背景是堆栈**底部的背景。**在您的情况下，它是显示在半透明图像后面的渐变。而且由于您的渐变由具有 0.12 第四 RGBa 值 (alpha) 的颜色组成，该值非常低，因此即使一切正常，也可能很难在另一张图像后面发现。

# c++ - boost:asio:read_until 问题与 boost::bind

> ID：11525853
> 
> 赞同：0
> 
> 时间：2012-07-17T15:30:57.390
> 
> 标签：c++, boost, boost-asio, boost-bind

我在编译这段代码时遇到问题错误

/usr/include/boost/bind/bind_mf_cc.hpp:91:5: 错误：初始化'boost::_bi::bind_t, typename boost::_bi::list_av_4::type> boost::bind(R (T::*)(B1, B2, B3), A1, A2, A3, A4) [其中 R = void；T = tcpReader; B1 = const boost::system::error_code&; B2 = 无符号整数；B3 = boost::asio::basic_streambuf<>&; A1 = tcpReader*；A2 = boost::system::error_code; A3 = 无符号整数；A4 = boost::asio::basic_streambuf<>; 类型名 boost::_bi::list_av_4::type = boost::_bi::list4, boost::_bi::value, boost::_bi::value, boost::_bi::value > >]

```
void tcpReader::handle_read(const boost::system::error_code& ec, std::size_t bytes_transferred, boost::asio::streambuf& buf)
// inside a class method
boost::asio::streambuf buf;
boost::asio::async_read_until(*sock,buf,"\n" ,
                              boost::bind(&tcpReader::handle_read,this,error,buf.size(),buf)
                              ); 
```

关于问题是什么的任何想法？我知道我遗漏了一些简单的东西，但我不知道是不是我必须使用 boot::buffer ？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:39:25.323

在我看来， async_read_until() 的所有重载都需要 2 个参数。您传递一个带有 3 个参数的函数。可能您想将流作为额外参数传递，将其绑定到函数以获取具有 2 个参数的函数。

```
boost::bind( &tcpReader::handle_read, this, _1, _2, boost::ref( buf ) ) 
```

会将您的成员函数“转换”为需要 2 个参数的东西。boost::ref() 将您的缓冲区包装为参考，否则将进行复制。

亲切的问候托斯滕

# javascript - 如何正确抓取和替换 JavaScript 中的选定文本？

> ID：11525854
> 
> 赞同：1
> 
> 时间：2012-07-17T15:31:00.323
> 
> 标签：javascript, numbers, position, character, selection

这是代码：

```
var selection;
var edited_selection;
var value;
var string;

    $("#text").select(function(){ // $("#text") is textarea
       value = $("#text").val(); 
       selection = window.getSelection();   
       string = selection.toString();     
    });

    $("#bold").click(function(){
       edited_selection = "<b>" + string + "</b>"; 
       var replacing = value.replace(string, edited_selection);
       $("#text").val(replacing);
    }); 
```

当我单击某个常见的数字或字符时，它将包裹该字符或数字的第一次出现。例如简单的句子：“你好”。如果我尝试从该句子中选择最后一个“e”，它将选择第一次出现的“e”，它会像**e**一样换行，但我想选择最后一个“e”。我该怎么做？谢谢你的回答。

# binary - 有限二进制序列的周期

> ID：11525857
> 
> 赞同：1
> 
> 时间：2012-07-17T15:31:11.920
> 
> 标签：binary, sequence, cycle

假设`G`是一个生成器，它在每次调用时都会产生一些长度为 N 的二进制序列。生成器环绕 N，因此调用`k`返回与 相同的结果`k%N`。检查序列是否具有小于 N 的周期的最佳方法是什么？假设 N 太大而无法考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:35:27.643

好问题。我认为它属于数学。谷歌“随机数生成器顽固测试”以查看测试生成器的好方法。

[http://en.wikipedia.org/wiki/Diehard_tests](http://en.wikipedia.org/wiki/Diehard_tests)

# c# - Visual C# 2010 Express：为应用程序中的新表单打开设计和设计器选项卡

> ID：11525859
> 
> 赞同：2
> 
> 时间：2012-07-17T15:31:18.373
> 
> 标签：c#, winforms, visual-studio-2010

我想创建一个可以从主窗体打开的窗体。但我真的不想在没有设计和设计选项卡的情况下尝试这样做。默认情况下，主窗体具有它们。我对 MS Visual C# 2010 express 并不完全熟悉...

如何在应用程序中打开新表单的设计和设计器选项卡？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T15:39:20.997

在您的解决方案中添加一个新表单：

![添加新项目](../Images/f9bfea55eaee947840534d722535385b.png) ![添加新表格](../Images/7b47cf9d887b984cc77bdcf856b26685.png)

*然后在Form1.cs*某处添加以下代码：

```
Form2 form = new Form2();
form.Show(); 
```

# ruby - Ruby：优雅地编写`if o.class == ClassA or o.class == ObjectB or o.class == ObjectC`

> ID：11525860
> 
> 赞同：3
> 
> 时间：2012-07-17T15:31:18.983
> 
> 标签：ruby, if-statement

有没有优雅的写作方式

```
 if o.class == ClassA or o.class == ClassB or o.class == ClassC 
```

我并不是特别想比较类，这只是一个例子，我没有用布尔值做事，所以我不能做类似的事情

```
 if o.class == (ClassA or ClassB or ClassC) 
```

其他例子是

```
 if string == "asdf" or string == "1337" 
```

我发现的唯一东西似乎是

```
 if [ClassA, ClassB, ClassC].include? o.class 
```

或者

```
 if ["asdf", "1337"].include? string 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T15:42:38.180

我认为最优雅的解决方案是您已经提供的解决方案，它使用“包含？”。

只是为了多样化，您还可以选择在以下情况下使用案例：

```
case o
  when ClassA, ClassB, ClassC
  ... 
```

另一种选择，我认为它比“包含？”更具可读性。是创建自己的'in?'，例如：

```
class Object
  def in?(array)
    array.include? self
  end
end 
```

然后你可以使用

```
if o.class.in? [ClassA, ClassB, ClassC] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:42:48.587

怎么样`case`？这不是一个非常传统的用法，但它肯定更优雅：

```
case o
when "asdf", "1337"
  puts "Hi!"
when Class1, Class2
  puts "Bye!"
end 
```

因为`case`使用`===`which 测试相等和 is a? 关系，并且有一个列表语法，对于这类情况非常优雅。

# c# - 中继器中带有复选框的用户控件

> ID：11525862
> 
> 赞同：0
> 
> 时间：2012-07-17T15:31:24.067
> 
> 标签：c#, .net, user-controls, checkbox, repeater

我是 C#/asp 的新手。我正在尝试向用户控件中的转发器控件添加一个复选框。当用户单击复选框时，我想在用户控件所在的页面上捕获该事件。我已经将复选框放在中继器中。这是我在用户控件中的内容。

```
 <asp:Repeater ID="rOrderItems" runat="server" ><HeaderTemplate>
            <table class="mGrid" ><tr><td width="50%" align="left" >Item</td>
            <td width="20%" align="right">Qty</td>
            <td width="20%" align="center">Remove</td></td></tr></HeaderTemplate>                

            <ItemTemplate >
                <tr>
                <td> <%# DataBinder.Eval(Container.DataItem, "item.ItemNumber")%> </td>
                <td> <%# DataBinder.Eval(Container.DataItem, "Quantity")%> </td>
                 <td> <asp:CheckBox  ID="cbxRemove" AutoPostBack="true" Checked="false" OnCheckedChanged="cbxRemove_CheckedChanged"  runat="server" /></td> 
                </tr>
            </ItemTemplate>
            <FooterTemplate><tr><td>   </td><td>  </td></tr></table>
            </FooterTemplate>
            </asp:Repeater> 
```

在这之后我有点失落。请原谅我的无知，但我正在学习。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:38:55.163

看起来您想要循环删除检查项目。尝试这个：

```
for (int i = 0; i < rOrderItems.Items.Count; i++) {
  CheckBox chk = (CheckBox)rOrderItems.Items[i].FindControl("cbxRemove");
  if (chk.Checked) {
    //remove this item
  }
} 
```

让我知道它是如何工作的。

# wcf - 数据合同不等价

> ID：11525864
> 
> 赞同：0
> 
> 时间：2012-07-17T15:31:30.237
> 
> 标签：wcf, soap

我一直在尝试让 web 服务在我的 localhost 中工作并进行调试，但它给了我这个错误：

> System.InvalidOperationException：“ParticipantDataService.Participant+OutsideAccountDetails+FundCollection”类型的 DataContract 无法添加到 DataContractSet，因为名称空间“http://schemas.datacontract”中具有相同数据合同名称“ArrayOfFundDetails”的“ParticipantDataService.Participant+FundCollection”类型。 org/2004/07/ParticipantDataService' 已经存在，并且合同不等效。

有没有人以前有这个错误？

谢谢。

下面的删节代码（注意：不是我的代码。我正在修改以前的开发人员的代码，他已经不在这里了。也是一个带有网络服务的菜鸟。在下面的这个代码块中，因为这个问题现在似乎与资金有关，我已经使所有“资金”参考文献比其他参考文献更明显。谢谢。）

```
Namespace COMParticipantNameSpace
<DataContract(Namespace:="XYZ", Name:="COMParticipant"),                          
KnownType(GetType(COMParticipant))> _
Public Class COMParticipant
    Inherits COMResponse

    Private _FullName As FullName
    (Other initialized variables...)

    Protected Friend Sub New...

    #Region "Properties"
    <DataMember(Name:="Name", Order:=0)>...
    <Other DataMembers...>
    #End Region

    #Region "Structures"
    Public Structure FullName...
            (Other Public Structures)
    #End Region
    #Region "Classes"
    <DataContract(Name:="ParticipantPortfolio")>....

    Public Class GroupCollection...
    End Class

    <DataContract(Name:="Group")>...
            <DataMember(Name:="Funds", Order:=6)> _
            Public Property Funds() As COMFundCollection
                Get
                    Return _Funds
                End Get
                Set(ByVal value As COMFundCollection)
                    _Funds = value
                End Set
            End Property
    End Class

    Public Class COMAccountCollection
        Inherits System.Collections.ObjectModel.Collection(Of COMAccountDetails)
    End Class

    <DataContract(Name:="COMAccountDetails")> _
    Public Class COMAccountDetails

        (Other initialized variables...)
        Private _Funds As COMFundCollection

        <DataMember Order 0,1,2,3,etc...)>...

        <DataMember(Name:="Funds", Order:=7)> _
        Public Property Funds() As COMFundCollection
            Get
                Return _Funds
            End Get
            Set(ByVal value As COMFundCollection)
                _Funds = value
            End Set
        End Property

    End Class

    Public Class COMFundCollection
        Inherits System.Collections.ObjectModel.Collection(Of COMFundDetails)
    End Class

    Public Class OutsideAccountCollection
    End Class

    <DataContract(Name:="OutsideAccountDetails")> _
        Public Class OutsideAccountDetails

        (Other initialized variables...)
        Private _Funds As FundCollection

        <Order 1, 2, 3, etc...>

        <DataMember(Name:="Funds", Order:=15)> _
        Public Property Funds() As FundCollection
            Get
                Return _Funds
            End Get
            Set(ByVal value As FundCollection)
                _Funds = value
            End Set
        End Property

        Public Class FundCollection
            Inherits System.Collections.ObjectModel.Collection(Of FundDetails)
        End Class

        <DataContract(Name:="FundDetails")>...

    End Class

    Public Class TransactionTypeCollection
        Inherits System.Collections.ObjectModel.Collection(Of TransactionTypeDetail)
    End Class
    Public Class TransactionTypeDetail...
    Public Class TransactionCollection...

    <DataContract(Name:="Transaction")> _
    Public Class Transaction

        (Other initialized variables...)
        Private _Funds As TransactionFundCollection

        <DataMember Order 1,2,3,etc ...>

        <DataMember(Name:="Funds", Order:=7)> _
        Public Property Funds() As TransactionFundCollection
            Get
                Return _Funds
            End Get
            Set(ByVal value As TransactionFundCollection)
                _Funds = value
            End Set
        End Property

    End Class
    Public Class TransactionFundCollection
        Inherits System.Collections.ObjectModel.Collection(Of TransactionFundDetails)
    End Class

    #End Region
    End Class

    End Namespace} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-14T14:23:30.063

尽管不是您问题的解决方案，但我收到了相同的错误消息。所以，我认为其他人在这里发布它是有用的。就我而言，它与链式继承有关。

我在一个名为 DerivedTypes 的基类上有一个静态方法（很像这里描述的：[普遍接受的方法来避免每个派生类的 KnownType 属性](https://stackoverflow.com/questions/16220242/generally-accepted-way-to-avoid-knowntype-attribute-for-every-derived-class)），它调用一个扩展方法来确定它的继承者。

如果你有 A : B, B : C，那么 C 应该是这样的：

```
[DataContract]
[KnownType("DerivedTypes")]
public class C {
  internal static Type[] DerivedTypes() {
    typeof(C).GetDerivedTypes();
  }
} 
```

调用 B.DerivedTypes() 将（错误地）获得太多类型，因为它会调用`typeof(C).GetDerivedTypes()`. 在我的情况下，这触发了同样的错误。

除非 B 是：

```
[DataContract]
[KnownType("DerivedTypes")]
public class B : C {
  internal **new** static Type[] DerivedTypes() {
    typeof(B).GetDerivedTypes();
  }
} 
```

自然没有'**'。现在，如果遇到类型 B，B.DerivedTypes() 将不会调用其父级。由于 A 没有子类，因此不需要 KnownType 属性。

顺便说一句，我对扩展方法所做的修改是扩展方法使用类型 (so `Assembly.GetAssembly(baseType)`) 中的程序集，并且我将静态方法设为内部用于测试目的。私人的也应该没问题。

# ios - 弹出几个视图控制器但显示所有视图控制器

> ID：11525865
> 
> 赞同：0
> 
> 时间：2012-07-17T15:31:31.447
> 
> 标签：ios, uinavigationcontroller

我已经`UINavigationController`和几个`UIViewControllers`推入了它。我想要实现的是弹出让我们说 2 个视图控制器回来。但是，我希望堆栈中的前一个控制器在到达所需的控制器之前以动画形式显示（通过它）。`popToViewController:`这是对我不起作用的主要原因。

我试图`popViewControllerAnimated:`通过将标志设置为所有先前调用的另一件事`UIViewControllers`，以便如果设置了标志，视图控制器将`popViewControllerAnimated:`在其`viewDidAppear:`. 这给了我几乎我想要的东西，但是我不喜欢动画不流畅。每个控制器的动画都会减慢，而我希望所有控制器都以相同的速度通过。

我正在考虑的另一种方法是避免使用这些控制器并将所有内容放入一个滚动视图中，这样我就可以完全控制如何进行视图事务。

我仍然想知道导航控制器是否可以做些什么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:45:30.123

我怀疑你会实现平滑的动画（也许如果你实现不同的功能，而不是`viewDidAppear:`- 那么你可能会实现它 - 例如 - 你`viewControllers`在堆栈中有 3 个 - 你弹出第三个，同时启动第二个弹出，用延迟与弹出动画一样长（0.25？不知道，测试它）。（你通过第三个访问第二个`[self.navigationController viewControllers]`）也许有效）。

我真的不喜欢滚动视图中所有`viewControllers`（视图）的想法。- 这可能会占用太多内存。可以。

其他选项是 - 存储来自每个 viewController 的屏幕截图。如果只需要平滑的弹出动画，那么您可以从每个`viewController`（打开时在后台线程上`viewController`）截取屏幕截图。并将其添加到全局滚动视图图像集。然后当弹出时 - 很快显示滚动视图，并通过图像动画，而在滚动视图下，`viewControllers`已经被弹出到必要`viewController`的。

（如果某些`viewController`内容是动态更改的 - 它可能并不重要，因为用户不会注意到从已经拍摄的快速滑动的屏幕截图中）

希望你有一些新的想法:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:15:44.683

好的，这是我如何实现它的详细信息

1.  定义协议`Screenshotable`，它将定义`UIViewController`在下一个视图控制器被推入时是否应该保存外观`UINavigationViewController`

    @protocol Screenshotable @property (strong, nonatomic) UIImage *screenshot; @结尾

2.  让视图控制器实现协议以及实现协议的`@synthesize screenshot`任何位置`Screenshotable`。

3.  现在为您定义委托`UINavigationViewController`并实现以下回调，如下所示：

    *   (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated { // 获取当前视图（这是刚刚推送的视图）但我们想截取之前的视图控制器隐藏 int index = [[navigationController viewControllers] count] - 1;

        // 检查这是否是第一个视图控制器，如果 (index <= 0) return;

        // 获取上一个 UIViewController *controller = [[navigationController viewControllers] objectAtIndex:--index];

        // 如果可以截屏则进行截屏 if ([controller conformsToProtocol:@protocol(Screenshotable)]) { id screenshotable = (id)controller;

        ```
        if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
        {
            UIGraphicsBeginImageContextWithOptions(self.window.bounds.size, NO, [UIScreen mainScreen].scale);
        }
        else
        {
            UIGraphicsBeginImageContext(self.window.bounds.size);
        }

        [self.window.layer renderInContext:UIGraphicsGetCurrentContext()];
        screenshotable.screenshot = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext(); 
        ```

        } }

4.  现在所有`UIViewControllers`在实现`Screenshotable`协议的导航堆栈中都将在新控制器被推送之前存储他们的视图图像。每当您想通过所有这些返回时从控制器中获取 UIImage，将它们添加到当前控制器并进行动画处理。动画结束时只需调用 [self.navigationController popToViewController:controller animated:NO];

就是这样。

# drupal-7 - 如何使用另一个站点/系统/数据库在 Drupal 中进行授权？

> ID：11525871
> 
> 赞同：1
> 
> 时间：2012-07-17T15:31:55.240
> 
> 标签：drupal-7, authorization

是否可以使用其他站点授权 Drupal(7) 中的用户？我有非 drupal 社区，我想在那里保留和管理登录名/密码。但是我在 Drupal 上也有公共站点，我希望非 Drupal 站点的用户可以使用现有的登录名/密码登录。可能有一些自然的方式（如OpenId）？我可以安排任何类型的数据导出/导入/验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:35:28.803

在 Drupal 中有多种方法可以做到这一点。对于初学者，有几个 contrib 模块允许您使用 OpenID 和其他提供程序进行身份验证

1.  [http://drupal.org/project/openid_selector/](http://drupal.org/project/openid_selector/)
2.  [http://drupal.org/project/rpx](http://drupal.org/project/rpx) (Janrain)
3.  [http://drupal.org/project/oauthconnector](http://drupal.org/project/oauthconnector) (Oauth)

等等

在 Drupal.org 上进行长达一小时的专门搜索将为您提供多种选择。

除此之外，还有用于从其他几个平台进行身份验证的 contrib 模块，从流行到晦涩难懂。例如，

1.  [http://drupal.org/project/gigya](http://drupal.org/project/gigya)
2.  [http://drupal.org/project/cs_social_networks](http://drupal.org/project/cs_social_networks)（捷克和斯洛伐克社交网络）
3.  [http://drupal.org/project/phpbb](http://drupal.org/project/phpbb)

任你选！

# c# - C# 和 SQL Server 2005 连接

> ID：11525872
> 
> 赞同：0
> 
> 时间：2012-07-17T15:31:56.757
> 
> 标签：c#

我有一个表单，其中我有一个组合框，其中填充了表的列名我有一个文本框我打算输入值，当我单击保存按钮时，我希望将数据插入到具有被选中。

这是我的代码。

```
private void button1_Click(object sender, EventArgs e)
{
   try
   {
       myConnection.ConnectionString = "Data Source = AmiayaEjay-Vaio; Initial Catalog = RealTime; User ID = sa; Password = admin";

       String combo1 = comboBox1.SelectedItem.ToString();
       String combo2 = comboBox2.SelectedItem.ToString();
       String combo3 = comboBox3.SelectedItem.ToString();
       String combo4 = comboBox4.SelectedItem.ToString();
       String combo5 = comboBox5.SelectedItem.ToString();
       String combo6 = comboBox6.SelectedItem.ToString();
       String combo7 = comboBox7.SelectedItem.ToString();
       String combo8 = comboBox8.SelectedItem.ToString();

       query1.CommandText = "insert into dbo.DepthTable ( '" + combo1 + "','" + combo2 + "','" + combo3 + "','" + combo4 + "','" + combo5 + "','" + combo6 + "' ,'" + combo7 + "','" + combo8 + "') values ('" + textBox1.Text + "','" + textBox2.Text + "','" + textBox3.Text + "','" + textBox4.Text + "','" + textBox5.Text + "','" + textBox6.Text + "','" + textBox7.Text + "','" + textBox8.Text + "')";

       query1.CommandType = CommandType.Text;
       query1.Connection = myConnection;

       myConnection.Open();
       query1.ExecuteNonQuery();
   }
   catch (Exception ex)
   {
       throw ex;
   }

   myConnection.Close();
} 
```

我不断收到错误消息说我有无效的列名，因为 sql 命令看不到 combo1-combo8 有一个有效的列名

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T15:35:58.443

删除comboX 中的“'”符号。

```
"insert into dbo.DepthTable (" + combo1 + "," + combo2 + "," + combo3 + "," + combo4 + "," + combo5 + "," + combo6 + "," + combo7 + "," + combo8 + ") values ('" + textBox1.Text + "','" + textBox2.Text + "','" + textBox3.Text + "','" + textBox4.Text + "','" + textBox5.Text + "','" + textBox6.Text + "','" + textBox7.Text + "','" + textBox8.Text + "')"; 
```

# mule - 如何在 mule 中回显请求的各个部分以响应

> ID：11525874
> 
> 赞同：0
> 
> 时间：2012-07-17T15:32:05.440
> 
> 标签：mule

**上下文：** 我有一个基于 XML 的 API。我使用此 API 收到请求。然后我有将这些请求转换为第三方特定 API 的转换器。然后我使用转换后的对象进行 Web 服务调用，返回一些我转换回 API 对象的响应。

在一行中，它就像：

```
MY_API_REQ -> 3RD_PARTY_API_REQ -> WS-CAL -> 3RD_PARTY_API_RES -> MY_API_RES 
```

死的简单。

**问题：** 现在，我想在回复中回显我的请求的某些部分。

所以假设我的请求 API 有一个 Echo 组件，它也必须出现在响应中。在我看来，最简单的解决方案是在将我的请求转换为第 3 方的 API 之前将此 Echo 组件存储在某个地方（例如：在会话范围的标头属性中）。然后在响应分支上，我检索这个 Echo 组件并将其设置在我的响应对象上。

在一行中，它就像：

```
MY_API_REQ -> Store parts -> 3RD_PARTY_API_REQ -> WS-CAL -> 3RD_PARTY_API_RES -> MY_API_RES -> Retrieve and set stored parts 
```

**关注：**这个解决方案并没有让我觉得我正在使用最好的解决方案。部分原因是我担心在执行流程期间存在我不知道的复制机制，这让我担心性能......

我正在同步完成所有这些工作，所以我应该一直在同一个线程上，所以也许我的担忧没有任何基础。然而，在进行一些性能测试或分析之前，我想问你们这...

懒惰是一半的健康。;) 提前致谢：T

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:56:13.613

有两种不同的方法（您使用的是第一种）：

*   将您要保留的信息存储在属性中，并让出站交互用其响应替换有效负载，随后从属性中检索保存的信息。如果您不需要跨流共享此存储信息，则建议使用流变量而不是会话属性。
*   将原始有效负载转换为预期的响应，传播此“回声”值并使用消息丰富器与出站服务交互。如果出站交互真的是为了丰富响应，这在语义上会更清晰。

# symfony - 使用 Twig 进行代码优化

> ID：11525878
> 
> 赞同：2
> 
> 时间：2012-07-17T15:32:14.930
> 
> 标签：symfony, twig

我想优化我的源代码 Twig，但这对我来说看起来不是很有效。

我的代码：

```
{% for info in infos %}
  {% set i = 0 %}
  {% if loop.index0 is divisibleby(3) %}

    <div class="row-fluid">
    <ul class="thumbnails">

    {% set open = 'yes' %} 

  {% endif %}

  <li class="span4">
    <div class="thumbnail">
      <img src="#" alt="">
      <div class="caption">
        <h4>{{ info.titre }}</h4>
        <p>{{ info.text }}</p>
        <p><a href="#" class="btn btn-primary">{# a traduire multi #}Lire</a></p>
      </div>
    </div>
  </li>

  {% if loop.index is divisibleby(3) and open == 'yes' %}
    </ul>

    </div>

  {% endif %}

{% endfor %} 
```

如何避免创建这么多变量，并两次使用相同的条件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T16:33:03.563

也许以下不起作用，但我希望你明白：

```
<div class="row-fluid">
    <ul class="thumbnails">
        {% for info in infos %}
            {% if loop.index0 is divisibleby(3) and loop.index0 != 0 %}
    </ul>
</div>
<div class="row-fluid">
    <ul class="thumbnails">
            {% endif %}

        <li class="span4">
            <div class="thumbnail">
                <img src="#" alt="" />
                <div class="caption">
                    <h4>{{ info.titre }}</h4>
                    <p>{{ info.text }}</p>
                    <p><a href="#" class="btn btn-primary">{# a traduire multi #}Lire</a></p>
                </div>
            </div>
       </li>
      {% endfor %}
    </ul>
</div> 
```

# django - 如何在 django 中重定向回上一页？

> ID：11525879
> 
> 赞同：1
> 
> 时间：2012-07-17T15:32:15.490
> 
> 标签：django, page-refresh, django-1.2

我是 Django 新手

我正在处理投票申请，我需要在投票后保持在同一页面上

这意味着我想刷新页面而不离开它并显示成功消息

这是我的 view.py（我在其中设置和检查 cookie 以避免双重投票）：

```
@render_to('user/books_list.html')  
def vote(request, object_id):
voted=request.session.get('has_voted',[])
books = Book.objects.get(id=object_id);

if object_id in voted:         
    return {
                'object': books,
                'error_message': "You have already voted.",
            }
else:
    books.votes += 1
    books.save()
    request.session['has_voted']=voted+[object_id]
    return locals() 
```

这是我的 urls.py：

```
urlpatterns = patterns('user.views',

    url(r'^books/$', 'books_list', name="books_list"),
    url(r'^books/(?P<object_id>\d+)$', 'book_detail', name="book"),
    url(r'^books/vote/(?P<object_id>\d+)$', 'vote', name="vote"),  
) 
```

这是我的模板：

```
{% if list_participant %}

{% for book in list_books %}

{{ book.name }} 

    <a href={% url vote book.id %}  >vote</a>

    {{ book.votes }} 

  {% endfor %}

{% endif %} 
```

我现在这样做的方式将我重定向到书籍/投票/x 我希望它重定向到上一页，即书籍/

任何想法请提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:34:23.150

解决了

所以我所做的是在显示书籍的同一视图中添加投票处理，并使用 if Post 条件来检测何时单击投票按钮

```
@render_to('user/list_books.html')  
def list_books (request):    
    books_list = Book.objects.all()

  if request.POST:
    voted=request.session.get('has_voted',[])
    p_id=request.POST['id']
    book = Book.objects.get(id=p_id);
    if p_id in voted:         
        return {
                'notvoted': book,
                'error_message': "You have already voted for this book today!",
                'books_list': books_list
                }
    else:
        book.votes += 1
        book.save()

        vote = Vote() 
        vote.book_id = p_id
        vote.ip = request.META.get('REMOTE_ADDR')       
        vote.save()

        request.session['has_voted'] = voted+[p_id]
        request.session.set_expiry(86400)#one day in seconds
        return {
                 'books_list': books_list,
                 'voted' : 1 ,
                 'book' : book
                }
else :
    return {'books_list': books_list} 
```

# asp.net - 使用模拟与 ASP.NET 目录服务拒绝访问

> ID：11525880
> 
> 赞同：1
> 
> 时间：2012-07-17T15:32:16.160
> 
> 标签：asp.net, active-directory, impersonation, directoryservices

作为 ASP.NET 网站上一组管理工具的一部分，我正在使用目录服务更改用户的 Active Directory 密码。

我收到错误：

> 错误：无法更改密码（您有权限吗？）。
> System.Reflection.TargetInvocationException：调用的目标已引发异常。
> ---> System.UnauthorizedAccessException：访问被拒绝。
> （来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）
> ---内部异常堆栈跟踪结束---
> 在 System.DirectoryServices.DirectoryEntry.Invoke(String methodName, Object[] args)
> 在 System.DirectoryServices.AccountManagement.SDSUtils.SetPassword(
> System.DirectoryServices.AccountManagement.ADStoreCtx.SetPassword(AuthenticablePrincipal p, String newPassword ) 处的 DirectoryEntry de, String newPassword)

`Web.config`阅读：

```
<authentication mode="Windows" />
<identity impersonate="true" /> 
```

在 Visual Studio 调试环境中，设置密码例程成功完成，但在从其他计算机访问时却没有。我正在尝试使用模拟来允许此请求 - 该站点可以正确地告诉我我的域和用户名（使用 Context.User.Identity），并且可以查询 Active Directory 以获取两种环境中所有用户的列表。

我的 PrincipalContext 是：

```
new PrincipalContext(ContextType.Domain, "DOMAINNAME"); 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:03:14.017

您需要添加

```
<authorisation>
    <deny user="?" />
</authorisation> 
```

这会拒绝匿名用户的访问，强制用户进行身份验证，然后通过模拟将成为活动用户。没有这个，您仍然以 IUser 访客帐户连接。

您还需要在 IIS 中启用 Windows 身份验证。

# javascript - 是否有可靠的方法来检测浏览器的缩放（不是在查看时调整大小，而是在查看页面之前）？

> ID：11525883
> 
> 赞同：1
> 
> 时间：2012-07-17T15:32:21.797
> 
> 标签：javascript, zooming

我从 09 年发现[了这个](https://stackoverflow.com/questions/995914/catch-browsers-zoom-event-in-javascript)问题，但我希望可能有一个更新的答案。

我有一个 JS 弹出窗口设置来处理其中的设置大小元素，但是，当用户以更高的缩放比例查看网站时，我的元素会从弹出窗口中消失。如果不是检测缩放的方法，是否有另一种方法来处理这个问题？

谢谢！

# javascript - 将 CSS 应用于脚本

> ID：11525885
> 
> 赞同：2
> 
> 时间：2012-07-17T15:32:22.663
> 
> 标签：javascript, jquery, css

我有这个代码。如何在每个结果上设置不同的 CSS 样式 - 正确和不正确。

CSS 样式是 wordglow1 和 wordglow2...

```
$(".drop").droppable({
drop: function(event, ui) {
    word = $(this).data('word');

    guesses[word].push($(ui.draggable).attr('data-letter'));

    console.log(guesses);

    if (guesses[word].length == 3) {
        if (guesses[word].join('') == word) {
            alert('Correct');
        } else {
            alert(guesses[word].join('') + ' is the incorrect spelling. The word is spelt - ' + word)
        }

        $('td[data-word=' + word + ']').droppable('disable');
        }
    }
}); 
```

这些是我需要分配给条件的类...

```
<div id="rightanswer" class="wordglow2"></div>
<div id="wronganswer" class="wordglow"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:39:42.687

.addClass 是你的朋友

```
$(".drop").droppable({
    drop: function(event, ui) {
    word = $(this).data('word');

    guesses[word].push($(ui.draggable).attr('data-letter'));

    console.log(guesses);

    if (guesses[word].length == 3) {
        if (guesses[word].join('') == word) {
            $(selector).addClass('corrent');
            alert('Correct');
        } else {
            alert('Incorrect');
            $(selector).addClass('wrong spelling')
       }

            $('td[data-word=' + word + ']').droppable('disable');
            }    
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:34:48.933

您可以使用 jQuery 将 CSS 类（[文档](http://api.jquery.com/addClass/)）添加到相关元素，并根据需要设置这些类的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:08:13.520

```
$(".drop").droppable({
drop: function(event, ui) {
    word = $(this).data('word');

    guesses[word].push($(ui.draggable).attr('data-letter'));

    console.log(guesses);

    if (guesses[word].length == 3) {
        if (guesses[word].join('') == word) {
            $('td[data-word=' + word + ']').addClass("wordglow2");
            alert('Correct');
        } else {
            $('td[data-word=' + word + ']').addClass("wordglow");
            alert('Incorrect');
        }
    }
}
}); 
```

# android - 更新数据库中的行在列中放置错误的值

> ID：11525888
> 
> 赞同：-1
> 
> 时间：2012-07-17T15:32:29.280
> 
> 标签：android, database, sql-update

我的 android 应用程序中有一个工作数据库。我可以毫无问题地添加行。但是当我尝试更新一行时，数据库在列中放置了错误的值。

我已经检查了很多次代码，但我找不到问题，我可能看了很多次，看不到明显的问题。问题是在更新数据库行时。这些值被放在错误的列中。每列都填充了新数据。但它们不在正确的列中。

这是一个例子：

```
// Inserting row into database gives this correct result
example: | id | column1 | column2 | column3 | column4 | column5 |
         | 1  | value1  | value2  | value3  | value4  | value5  |

// after updating the row i get this bad result:
example: | id | column1 | column2 | column3 | column4 | column5 |
         | 1  | value1  | value2  | value5  | value3  | value4  | 
```

我有一个列表视图显示数据库 column1 的值，然后将其余列发送到另一个活动。将其视为列表视图中的联系人列表，单击联系人时会显示其余信息。

我用这个发送数据：

```
 EditContact.putExtra(MyContacts.ROW_ID, rowID);
      EditContact.putExtra("PHONE", phoneTextView.getText());
      EditContact.putExtra("EMAIL", emailTextView.getText());
      EditContact.putExtra("ADRESS", adressTextView.getText());          
      EditContact.putExtra("NAME", nameTextView.getText());
      EditContact.putExtra("COMMENT", commentTextView.getText());
      startActivity(EditContact); // start the Activity 
```

在 EditContact 活动中，我得到这样的信息并将信息放在 EditTexts 中。

```
 if (extras != null) {
        rowID = extras.getLong("row_id");
        phoneEditText.setText(extras.getString("PHONE"));
        emailEditText.setText(extras.getString("EMAIL"));
        adressEditText.setText(extras.getString("ADRESS"));
        nameEditText.setText(extras.getString("NAME"));
        commentEditText.setText(extras.getString("COMMENT"));
    } 
```

然后我将信息保存在数据库中，如下所示：

```
 String phone   =   phoneEditText.getText().toString();
         String email   =   emailEditText.getText().toString();
         String adress  =   adressEditText.getText().toString(); 
         String name    =   nameEditText.getText().toString();
         String comment =   commentEditText.getText().toString();                 
     String spinner1 = (String) spinner1.getSelectedItem();
     String spinner2 = (String) spinner2.getSelectedItem();
     String spinner3 = (String) spinner3.getSelectedItem();

 databaseConnector.updateContact(rowID, spinner1, spinner2, spinner3, phone, email, adress, name, comment); 
```

如您所见，我这里有三个微调器。当我将联系人添加到数据库时，我也有这种情况。即使在更新后它们也会被插入到正确的列中。这些微调器在 viewcontact 活动中被翻译成文本。

这就是我在 DatabaseConnector 中更新数据库的方式

```
public void updateContact(long id, String spinner1, String spinner2, String spinner 3, String phone, String email, String adress, String name, String comment)
{
    ContentValues editContact = new ContentValues();
    editContact .put("SPINNER1", spinner1);
    editContact .put("SPINNER2", spinner2);
    editContact .put("SPINNER3", spinner3);
    editContact .put("PHONE", phone);
    editContact .put("EMAIL", email);
    editContact .put("ADRESS", adress);
    editContact .put("NAME", name);
    editContact .put("COMMENT", comment);

    open();
    database.update(DATABASE_TABLE, editContact , "_id=" + id, null);
    close();
} 
```

如果有人知道可能出了什么问题，我将不胜感激。我根本看不到它。虽然我是新手，但仍在学习。谢谢

每个值都插入到我正在编辑的正确行中。但在错误的列中，我没有收到任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:43:31.777

确保您的列顺序正确。您确定您的表格布局是 _id、SPINNER1、SPINNER2、SPINNER3、电话、电子邮件、地址、姓名注释吗？database.update 的代码是什么？订单可能很重要。代码不能仅仅根据魔法找出正确的事物顺序；）

# python - pyobjc，过时了吗？

> ID：11525889
> 
> 赞同：1
> 
> 时间：2012-07-17T15:32:30.447
> 
> 标签：python, xcode, pyobjc

我基本上想重新问一下 除了Xcode 4之外的[Xcode 3.2的PyObjC开发](https://stackoverflow.com/questions/1414727/pyobjc-development-with-xcode-3-2)。pyobjc仍然可以使用吗？

# d3.js - 使用线性过滤折线图的剪辑路径时如何修复 d3.js 轴不匹配

> ID：11525892
> 
> 赞同：1
> 
> 时间：2012-07-17T15:32:38.620
> 
> 标签：d3.js

我有一个从网络套接字连接馈送的简单折线图，我正在应用“单调”过滤器来平滑线条，所以为了避免看到线条随着新数据的进入而调整，我正在剪裁图表以隐藏最多本文建议的最近数据点...

[http://bost.ocks.org/mike/path/](http://bost.ocks.org/mike/path/)

但这使我的轴看起来不正确，右边缘有一个间隙，显示剪辑矩形和实际输出域之间的差异，如您所见......

![在此处输入图像描述](../Images/f228c40c9ea8ca4d2cdbf5ce51e92bb9.png)

我已经能够通过添加一个不同的 x 比例来解决这个问题，该比例可以减少剪辑矩形的域大小，但这对我来说似乎很老套，而不是一个特别干净的解决方案。

有没有正确的方法来解决这个问题？

这是显示相关部分的简短代码列表...

```
// Create an x-scale
var x = d3.scale.linear()
    .domain([0, saved_points])
    .range([0, width - margin]);

// Create the axis
var xAxis = d3.svg.axis()
            .scale(x)
            .tickSize(-height)
            .tickValues([10,20,30,40,50,60,70,80,90]);

// Clip path truncates the last two points from the line, because adding new
// control points alters the shape of the line, and it "wiggles"
chart.append("defs")
    .append("clipPath")
    .attr("id", "clip")
    .append("rect")
    .attr("width", width - margin - x(2))
    .attr("height", height);

// Create the stack of lines
y_bands = d3.scale.ordinal().rangeBands([0,height]);
line = d3.svg.line()
    .x(function(d,i){ return x(i); })
    .y(function(d,i){
        var a = -1.0 * (y(d.value) / y_bands.domain().length);
        var b = y_bands(d.name);
        var result = a + height - b;
        return result;
    })
    .interpolate("monotone");

// Put the Axis at the bottom of the graph
d3.select("svg")
    .append("svg:g")
    .attr("class", "xaxis")
    .attr("transform", "translate(0," + (height) + ")")
    .call(xAxis);

// Finally create all the paths
chart.selectAll("path")
    .data(my_line_chart.values)
    .enter()
    .append("g")
    .attr("clip-path", "url(#clip)")
    .append("svg:path")
    .attr("class", "line_chart")
    .attr("stroke", function(d, i) { return color(i); })
    .attr('d', function(d,i){ return line(my_line_chart.values[i]);} ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:19:02.717

我还没有找到一个理想的解决方案，但我在我的问题中提到的技术确实有效。

通过创建与剪辑路径大小而不是实际数据范围相匹配的第二个比例，我可以用它绘制轴并使它们匹配。

```
 // define actual scales
        var x = d3.scale.linear()
            .domain([0, saved_points])
            .range([0, width - margin]);

        // Define a scale that's reduced in size of the output range by the
        //  length of two points of the actual scale.
        var fake_x = d3.scale.linear()
            .domain([0, saved_points - 2])
            .range([0, width - margin - x(2)]);

        // Use this fake scale for the axis instead of the real scale.
        var xAxis = d3.svg.axis()
                    .scale(fake_x)
                    .tickSize(-height)
                    .tickValues(ticks);

        // The clip path uses the same width reduced by two points
        chart.append("defs")
            .append("clipPath")
            .attr("id", "clip")
            .append("rect")
            .attr("width", width - margin - x(2))
            .attr("height", height); 
```

我看到这种方法的唯一缺点是动画宽度存在问题，因为 fake_x 比例中的 x(2) 值不会转换。

# scala - 是否可以使用 SBT 的反射？

> ID：11525893
> 
> 赞同：7
> 
> 时间：2012-07-17T15:32:41.633
> 
> 标签：scala, reflection, sbt, scala-2.10

我正在尝试使用 SBT（对我来说是全新的工具）生成一些样板文件。我使用[无形](https://github.com/milessabin/shapeless/blob/master/project/Boilerplate.scala)的 sbt 文件作为任务的主要参考。我已经看到这个项目从头开始使用代码生成，但我的情况略有不同，因为我想从另一个类生成一些类。我假装使用新的 Scala 2.10.0-M4 反射功能来这样做。需要什么基本配置才能从 SBT 构建中获得反射？

到目前为止，sbt 无法找到*scala.reflect.runtime.universe*包，我不知道问题是来自新的 Scala jar 部门还是来自错误的配置。此外，我的 sbt *about*说：

```
[info] This is sbt 0.13.0-20120530-052139
[info] The current project is {file:/home/jlg/sandbox/abc/}abc
[info] The current project is built against Scala 2.10.0-SNAPSHOT
[info] 
[info] sbt, sbt plugins, and build definitions are using Scala 2.9.2 
```

顺便问一下，有人知道使用 SBT 生成源代码的其他项目吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T01:14:04.793

当前的 SBT 版本基于 Scala 2.9，源代码生成与具有相同库的 SBT 一起运行。基本上有两种选择：

*   非常前沿：让 SBT 版本在 Scala 2.10 上运行（甚至 0.13 分支都没有），或者等待它。最大的问题*不仅*在于您必须自己重新编译 SBT，还在于重新编译 Scala 2.10 所需的每一个 SBT 插件。从长远来看，这可能是满足您要求的最佳策略，但目前可能需要付出很多努力。但是，请注意，如果没有恶意技巧，*就不能*对编译的代码使用反射，因为代码生成应该在编译之前发生。*如果您需要这样做，请考虑在程序内的*编译时生成代码*使用宏。这不包括 SBT 并且更加标准，但我不确定您是否可以在此版本中生成完整的类（我认为这是为未来计划的）。*
**   使用旧的：坚持使用 Scala 2.9 并使用 scalap 的功能 (ScalaSigParser) 进行编译时反射。问题是 API 是不同的（不确定有多深）并且没有真正支持公共使用，尽管很多人已经使用它很长时间了。对于我正在运行的一个项目，一位同事实施了方法，我将它集成到我的项目的 SBT 中（https://github.com/ps-mr/LinqOnSteroids/）；最重要的是，我使用 Scalate 编写用于代码生成的模板，非常强大。特别参见[build.sbt](https://github.com/ps-mr/LinqOnSteroids/blob/641798120884a1c882ff42c1d0e301fcab7da11a/build.sbt)，它调用 [project/Generator.scala](https://github.com/ps-mr/LinqOnSteroids/blob/641798120884a1c882ff42c1d0e301fcab7da11a/project/Generator.scala)和[project/src/main/scala/ivm/generation/ScalaSigHelpers.scala](https://github.com/ps-mr/LinqOnSteroids/blob/641798120884a1c882ff42c1d0e301fcab7da11a/project/src/main/scala/ivm/generation/ScalaSigHelpers.scala)（一些非完全通用的包装器`ScalaSigParser`）。生成代码的缩放模板位于 [src/main/resources](https://github.com/ps-mr/LinqOnSteroids/blob/641798120884a1c882ff42c1d0e301fcab7da11a/src/main/resources/)，这里最相关的是[src/main/resources/WrappedClassInlined.ssp](https://github.com/ps-mr/LinqOnSteroids/blob/641798120884a1c882ff42c1d0e301fcab7da11a/src/main/resources/WrappedClassInlined.ssp)。甚至涉及更多的东西，我担心你实际上需要结帐并使用它来看看它到底做了什么 - 但随时提出问题。*

 *请注意，该代码受 BSD 许可证保护，因此如果您复制代码，您需要保留原始[版权。](https://github.com/ps-mr/LinqOnSteroids/blob/master/LICENSE)

注意：所有链接（除了许可证）都指向当前的 HEAD 以保持稳定性，因此即使在将来的版本中移动/删除文件，它们也不会那么容易消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T19:41:53.073

如果您使用的是 2.10.0-SNAPSHOT，那么您应该选择`scala.reflect.runtime.universe`. 查看[http://dcsobral.blogspot.ch/2012/07/json-serialization-with-reflection-in.html](http://dcsobral.blogspot.ch/2012/07/json-serialization-with-reflection-in.html)了解更多信息。*

# ios - 使用 UITableView 在本机代码中的 Monotouch 随机崩溃

> ID：11525894
> 
> 赞同：2
> 
> 时间：2012-07-17T15:32:44.833
> 
> 标签：ios, uitableview, garbage-collection, xamarin.ios, monotouch.dialog

请帮助我，我做错了什么。

我使用`BubbleCell`and `BubbleElement`from the examples。由于未知原因，应用程序有时会在本机代码中崩溃。如果我不使用，我会尝试一点点来纠正这种情况`DequeueReusableCell`，并且总是创建一个新的`BubbleCell`. `BubbleElement`此外，如果构造函数传递一个字符串常量作为标题，而不是对象字段，问题就会消失。

[堆栈跟踪： http](http://pastebin.com/KAYzpHDk) ://pastebin.com/KAYzpHDk

* * *

问题比看起来更深。您的建议没有帮助，应用程序仍然崩溃。

我做了一个单独的项目，只留下了显示问题所需的最少代码。这个问题在某种程度上与 System.Json 相关......也许。

这是该项目的存档： [https ://dl.dropbox.com/u/63074515/BubbleNativeCrash.zip](https://dl.dropbox.com/u/63074515/BubbleNativeCrash.zip)

动作顺序： 1) 打开项目 2) 编译并运行模拟器，无需调试（配置Debug|iPhoneSimulator） 3) 在第一个视图中单击 horse1 4) 在出现的列表中，上下滚动整个项目几次5）在我的情况下，在这个阶段我们崩溃了......（堆栈跟踪： http: [//pastebin.com/KAYzpHDk](http://pastebin.com/KAYzpHDk)）

如果不是立即失败，可以返回联系人列表，反之亦然，甚至一次几次。失败的速度取决于聊天中的消息数量。

现在有趣的部分。如果在 ChatViewController.cs 中注释第 406 行并取消注释第 407 行，问题将完全消失（或者我无法在合理的时间内重复它）：

```
// string messageText = msg.MessageText ?? string.Empty;
string messageText = "Hello, World!!!"; 
```

也就是说，将一个常量字符串传递给 BubbleElement 构造函数。在那之后，我认为问题不会重复。

我试图让一切保持原样，但使用 Json 删除工作 - 问题消失了。仅当 BubbleElement 从 JsonValue 读取字符串（第 36 行的 IM\IMMessage.cs）时才会出现问题。即使在 IMMessage.cs 中有为 MessageText 设置一个常量字符串 - 问题也消失了。

我究竟做错了什么？:)

ps对不起我的英语......它由谷歌翻译提供支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T18:34:31.103

您不会保留**对**从`GetCell`. 因此，一旦方法返回， GC 可以（并且将）收集**托管实例，而本****机**实例将继续存在（因为它在 iOS 内部被引用）。

这在您使用时效果很好，`UITableViewCell`因为所有状态都保存在本**机**实例中。但是，如果您从它继承并添加自己的**托管**字段，则情况并非如此。在这种情况下，您将无法访问托管状态，因为它不存在（您将拥有的实例不会是您创建的实例）。

解决这个问题的简单方法是保留对`BubbleCell`您创建的引用，例如在列表中，这样 GC 就不会收集它们。

```
 static List<BubbleCell> cell_cache = new List<BubbleCell> ();

    public override UITableViewCell GetCell(UITableView tableView)
    {
        var cell = tableView.DequeueReusableCell(isLeft ? BubbleCell.KeyLeft : BubbleCell.KeyRight) as BubbleCell;
        if (cell == null) {
            cell = new BubbleCell(isLeft);
            cells_cache.Add (cell);
        }
        cell.Update(Caption);
        return cell;
    } 
```

不要忘记在不再需要单元格时清除列表（例如关闭 时`UITableView`）。

**从额外信息更新**

`cell_cache`必须是，`static`否则将无济于事（我的错误，已在上面修复）保持引用有效。但是，正如您所发现的，这不是解决这种情况的方法（来源显示单元格可以重复使用）。

OTOH，该问题与使用 JSON 无关。使用相同的`string`消息（例如来自数组）会导致相同的崩溃。这有点奇怪，我会进一步研究这个......

**最后更新**

事实证明，调用`CreateResizableImage`可能会遇到 iOS[错误](http://openradar.appspot.com/11411000)。解决方法是使用较旧的`StretchableImage`API。该问题已（重新）提交给 Apple。

# c++ - 什么会导致串行端口上的 CreateFile 调用非常慢？

> ID：11525900
> 
> 赞同：11
> 
> 时间：2012-07-17T15:33:22.323
> 
> 标签：c++, windows, serial-port

我有一个正在执行一些 Windows 串行端口任务的 Qt 应用程序（Qt 4.8.1）。我发现有时我为打开串行端口所做的 CreateFileA 调用最多需要 30 秒才能完成！显然我正在做一些事情来触发这种奇怪的行为，我想知道我可能会做什么来导致这种情况。

```
m_portHand = CreateFileA( portDevice.c_str(),
                          GENERIC_READ | GENERIC_WRITE,
                          0,      //  must be opened with exclusive-access
                          NULL,   //  default security attributes
                          OPEN_EXISTING, //  must use OPEN_EXISTING
                          FILE_FLAG_OVERLAPPED,      //  overlapped I/O
                          NULL ); //  hTemplate must be NULL for comm devices 
```

m_portHand 是 HANDLE，portDevice 是 std::string 并包含“COM5”。

此调用由我的应用程序主线程中的按钮按下触发。发生这种情况时，应用程序最多有一个其他线程，但这些线程（如果有的话）是空闲的。

系统中唯一发生的主要事情是运行 Linux 的 VM，但该系统是四核的，其中 3 个内核与您在 Windows 机器上看到的一样接近空闲，只有一个内核在 VM 上做任何事情。

串口在8口USB串口盒上，有关系吗？

这在某种程度上与重叠的 IO 相关吗？

**回应评论：**

端口未被其他应用程序打开。之前调用此应用程序之前已打开端口，该应用程序已正确关闭，并且端口已使用“CloseHandle”关闭。

我无法确定它需要 30 秒与否之间的任何相关性 - 有时我启动应用程序，单击按钮然后我们就开始比赛，有时需要长达 30 秒。

虚拟机正在拦截同一串行盒上的一些其他 USB 设备。

除了串行盒（VM 轮询 4 个端口来寻找设备）之外，USB 总线被卸载。

我没有在其他应用程序中看到这种行为。我将尝试切换到内置端口（主板上的 COM1），看看是否有任何影响。

我突然想到一个想法：端口寻址的形式与它有什么关系吗？我使用的其他类似应用程序使用 qestserialport 库，它使用 '\\.\COM#' 符号打开端口。使用的符号是否有某种方式会影响时间？

USB 串行设备上显示“VScom”，通常它会立即打开（CreateFile 调用小于 10 毫秒）。这只是偶尔会出现问题，而且我还有其他程序似乎从未表现出这种行为。

我正在与之交谈的设备是使用 IEEE 11073 协议的医疗监视器。无论如何，我与设备的连接工作正常，只有串行端口打开才有问题。打开时串行控制线的状态是否与此有关？另一端的设备正在轮询它的端口，以寻找各种可以与之交谈的东西，所以我不知道在出现问题的确切时刻串行线是什么样子的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:17:51.820

好的，如果没有解决，问题就明白了。我正在使用不同的串行设备，问题开始更加频繁地出现。

问题似乎是，当 VM 控制某些串行端口时，驱动程序会间歇性地缓慢打开可用端口。

我的测试程序打开然后关闭端口 1000 次，定时打开调用。它不会以任何方式设置串口参数。在运行测试程序之前，我正在使用波特率 460800 的设备进行实际工作。

当虚拟机拥有 4 个端口时，在其余 4 个端口上打开有时（1000 次尝试中的 20-30 次）需要 20-30 秒才能完成。当 VM 未运行时，所有 1000 次尝试都会快速打开。在 VM 运行但没有 USB 串行端口的情况下，所有 1000 次尝试都很快打开。

由于 VM 是一个开发工具，而不是我们预期的部署场景的一部分，我可以忍受这个问题。

有趣的是，这种效果似乎取决于端口上次使用的波特率。在我最初的询问之前，我一直在 9600 波特及以下运行，并且不记得曾经看到过这个问题。当我第一次问这个问题时，我正在使用一个 115000 波特的设备，并且间歇性地遇到问题。使用 460800 波特的最新设备，我经常遇到问题，足以解决问题。不知道为什么，但它就在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:42:22.587

与设备驱动程序问题交互的串行控制线是一个可能的原因。

您是否正确连接了控制信号？

如果没有，请将 RTS 连接到 CTS 并连接 CD、DTR 和 DSR。在 DB25 上，这意味着连接引脚 4 和 5 以及连接引脚 6、8 和 20。在 DB9 上，连接引脚 7 和 8 以及连接引脚 1、4 和 6。

如果这解决了问题，您应该寻找驱动程序设置以忽略打开时的控制信号。

# eclipse - Eclipse 的 Juno 无法恢复更改

> ID：11525905
> 
> 赞同：1
> 
> 时间：2012-07-17T15:33:45.440
> 
> 标签：eclipse, eclipse-juno

我最近求助于 Eclipses 的 Juno，它工作正常，但是当我对任何文件进行任何更改并再次运行项目时：更改无法恢复（特别是对于 Web 开发），我必须关闭 IDE 并重新启动它再次 ; 为了进行更改..我在最新的eclipse版本中没有遇到过，有没有解决这个问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T18:00:57.650

您确定您已经从“项目”菜单“构建”了您的更改，还是启用了自动构建？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:39:22.867

如上所述：我重新启动计算机后问题解决了，直到现在我不知道问题的原因。

# javascript - 替换元素中字符串的所有出现

> ID：11525907
> 
> 赞同：7
> 
> 时间：2012-07-17T15:33:47.280
> 
> 标签：javascript, jquery, dom

我想替换给定元素的所有后代元素（的文本）中的特定字符串。

`innerHTML`不能使用，因为此序列可以出现在属性中。我曾尝试使用 XPath，但似乎界面本质上是只读的。因为这仅限于一个元素，`document.getElementsByTagName`所以也不能使用类似的功能。

有人可以建议任何方法吗？任何 jQuery 或纯 DOM 方法都是可以接受的。

编辑：

一些答案暗示了我试图解决的问题：直接在元素上修改文本将导致所有非文本子节点被删除。

所以问题本质上归结为如何有效地选择树中的所有文本节点。在 XPath 中，您可以轻松地做到这一点`//text()`，但当前的 XPath 界面似乎不允许您更改这些 Text 节点。

一种方法是通过递归，如Bergi的[回答所示。](https://stackoverflow.com/a/11526610/499922)另一种[方法](https://stackoverflow.com/a/11526042/499922)是使用`find('*')`jQuery 的选择器，但是这样有点贵。仍在等待，看看是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T16:13:26.463

只需使用一个简单的自制 DOM 迭代器，它会递归遍历所有节点：

```
(function iterate_node(node) {
    if (node.nodeType === 3) { // Node.TEXT_NODE
        var text = node.data.replace(/any regular expression/g, "any replacement");
        if (text != node.data) // there's a Safari bug
            node.data = text;
    } else if (node.nodeType === 1) { // Node.ELEMENT_NODE
        for (var i = 0; i < node.childNodes.length; i++) {
            iterate_node(node.childNodes[i]); // run recursive on DOM
        }
    }
})(content); // any dom node 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:48:46.960

一种解决方案可能是浏览*所有*可用节点（包括 TextNodes）并在结果上应用正则表达式模式。要同时获取 TextNodes，您需要调用 jQuerys `.contents()`。例如：

```
var search = "foo",
    replaceWith = 'bar',
    pattern = new RegExp( search, 'g' );

function searchReplace( root ) {
    $( root ).contents().each(function _repl( _, node ) {
        if( node.nodeType === 3 )
            node.nodeValue = node.nodeValue.replace( pattern, replaceWith );
        else searchReplace( node );
    });
}

$('#apply').on('click', function() {
    searchReplace( document.getElementById('rootNode') );
}); 
```

示例：http: [//jsfiddle.net/h8Rxu/3/](http://jsfiddle.net/h8Rxu/3/)

参考：[`.contents()`](http://api.jquery.com/contents/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T15:40:57.070

不好意思，我自己弄的：

```
$('#id').find('*').each(function(){
    $.each(this.childNodes, function() {
        if (this.nodeType === 3) {
            this.data = this.data.toUpperCase();
        }
    })
}) 
```

我在这里使用了 toUpperCase() 来使结果更明显，但是任何 String 操作在那里都是有效的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T15:41:29.233

使用 jQuery：

```
$('#parent').children().each(function () {
    var that = $(this);

    that.text(that.text().replace('test', 'foo'));
}); 
```

如果您更喜欢搜索所有子代而不是直系子代，请`.find()`改用。

[http://jsfiddle.net/ExwDx/](http://jsfiddle.net/ExwDx/)

编辑：[children](http://api.jquery.com/children/)、[each](http://api.jquery.com/each/)、[text](http://api.jquery.com/text/)和[find](http://api.jquery.com/find/)的文档。

# c# - eBay API AddItem 调用返回“如果指定自动付款，则需要国内运输”错误

> ID：11525912
> 
> 赞同：1
> 
> 时间：2012-07-17T15:33:50.523
> 
> 标签：c#, .net, ebay-api, ebay-net-sdk

我是 eBay API 的新手，我正在尝试`AddItem`拨打电话。但是，我不断收到错误消息：

> 如果指定了自动转账，则需要国内运输

我从 SDK 示例代码中逐行复制了代码，它编译并运行得很好，所以我觉得 eBay 端可能发生了某种变化。

这是我的一些代码：

```
static ItemType BuildItem()
    {
        ItemType item = new ItemType();

        item.AutoPaySpecified = false;

        item.Title = "Test Item";
        item.Description = "eBay SDK sample test item";

        item.ListingType = ListingTypeCodeType.Chinese;
        item.Currency = CurrencyCodeType.USD;
        item.StartPrice = new AmountType();
        item.StartPrice.Value = 20;
        item.StartPrice.currencyID = CurrencyCodeType.USD;

        item.ListingDuration = "Days_3";

        item.Location = "San Jose";
        item.Country = CountryCodeType.US;

        CategoryType category = new CategoryType();
        category.CategoryID = "11104";
        item.PrimaryCategory = category;

        item.Quantity = 1;
        item.ConditionID = 1000;
        item.ItemSpecifics = buildItemSpecifics();

        item.PaymentMethods = new BuyerPaymentMethodCodeTypeCollection();
        item.PaymentMethods.AddRange(
            new BuyerPaymentMethodCodeType[] { BuyerPaymentMethodCodeType.PayPal }
            );
        item.PayPalEmailAddress = "me@ebay.com";

        item.DispatchTimeMax = 1;
        item.ShippingDetails = BuildShippingDetails();

        item.ReturnPolicy = new ReturnPolicyType();
        item.ReturnPolicy.ReturnsAcceptedOption = "ReturnsAccepted";

        AmountType amount = new AmountType();
        amount.Value = 2.8;
        amount.currencyID = CurrencyCodeType.USD;
        item.StartPrice = amount;

        return item;
    }

    static NameValueListTypeCollection buildItemSpecifics()
    {
        NameValueListTypeCollection nvCollection = new NameValueListTypeCollection();

        NameValueListType nv1 = new NameValueListType();
        nv1.Name = "Platform";
        StringCollection nv1Col = new StringCollection();
        String[] strArr1 = new string[] { "Microsoft Xbox 360" };
        nv1Col.AddRange(strArr1);
        nv1.Value = nv1Col;
        NameValueListType nv2 = new NameValueListType();
        nv2.Name = "Genre";
        StringCollection nv2Col = new StringCollection();
        String[] strArr2 = new string[] { "Simulation" };
        nv2Col.AddRange(strArr2);
        nv2.Value = nv2Col;
        nvCollection.Add(nv1);
        nvCollection.Add(nv2);

        return nvCollection;
    }

    static ShippingDetailsType BuildShippingDetails()
    {
        ShippingDetailsType sd = new ShippingDetailsType();

        sd.ApplyShippingDiscount = true;
        AmountType amount = new AmountType();
        amount.Value = 2.8;
        amount.currencyID = CurrencyCodeType.USD;
        sd.PaymentInstructions = "eBay .Net SDK test instructions";

        // shipping type and shipping service options
        sd.ShippingType = ShippingTypeCodeType.Flat;
        ShippingServiceOptionsType shippingOptions = new ShippingServiceOptionsType();
        shippingOptions.ShippingService = ShippingServiceCodeType.ShippingMethodStandard.ToString();
        amount = new AmountType();
        amount.Value = 1;
        amount.currencyID = CurrencyCodeType.USD;
        shippingOptions.ShippingServiceAdditionalCost = amount;
        shippingOptions.ShippingServicePriority = 1;
        amount = new AmountType();
        amount.Value = 1.0;
        amount.currencyID = CurrencyCodeType.USD;
        shippingOptions.ShippingInsuranceCost = amount;

        sd.ShippingServiceOptions = new ShippingServiceOptionsTypeCollection(
            new ShippingServiceOptionsType[] { shippingOptions }
            );

        return sd;
    } 
```

我试图设置`item.AutoPay = false;`-`item.AutoPaySpecified = false;`这些似乎都没有做任何事情。我在文档中搜索了有关国内运输的任何参考，但我没有找到任何东西。

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T00:58:14.680

您的 shippingOptions 字段缺少 ShippingServiceCost，请尝试更改行：

```
shippingOptions.ShippingServiceAdditionalCost = amount; 
```

至

```
shippingOptions.ShippingServiceCost = amount; 
```

或向 ShippingServiceCost 添加分配。

“如果指定了自动付款，则需要国内运输”似乎意味着运输选项中缺少某些条件（即取决于运输类型）字段。在尝试添加计算运费的所有必要字段时，我遇到了同样的错误 - 如果没有所有字段，eBay 会将其解释为缺少 ShippingServiceCost 字段的统一运费。

# jquery - 如何使用 jQuery 检查数组的所有元素是否在文本框中？

> ID：11525918
> 
> 赞同：0
> 
> 时间：2012-07-17T15:34:17.393
> 
> 标签：jquery

我正在尝试编写一些验证作为我的页面的一部分，以确保文本框是否有一些必需的文本，如果它不存在，它将禁用按钮。

我使用以下 jQuery 代码完美地工作：

```
 <script>
 $(document).on("ready", function () {
     $('input[type="text"]').on('blur', function () {
        var $required = $(this).next().val();
        var $image = $(this).parent().next().children('img');
        var $errors = $('img:visible').length;
        if (($(this).val().indexOf($required) == -1) && ($(this).val() != '')) {
            $image.show();
            $("#submit").prop("disabled", true);
        } else {
            $image.hide();
            //Manually subtract from error otherwise it doesnt subtract until the next focus change
            $errors--;
            if ($errors == 0)
                $("#submit").prop("disabled", false);
        }
    });
});

</script> 
```

当文本框需要两个值时会出现问题。它们作为逗号分隔的字符串存储在隐藏的输入中。我如何检查两者是否存在？只要他们都在那里，他们就可以以任何顺序在那里。我知道我可以使用 .split(',') 来获取和排列并测试它们，但这就是我坚持的部分。

我尝试过同时使用 .inArray() 和 .each() 但无法使用它。

我试图设置一个小提琴，但无法让它工作。

这是作为 MVC 项目的 HTML 的缩减版本，因此其中大部分是由模型等填充的。

**HTML**

```
 <table width="100%" border="1px solid">
    <tr>
        <th>Source Text</th>
        <th>Translation</th>
    </tr>

    <tr>
        <td>Some text here</td>
        <td><input type="Text"><input type="hidden" value="Some"></td>
        <td><img id="cross" src="../cross.png" class="jq-cross hid" alt="error" /></td>
    </tr>

    <tr>
        <td>Some text here</td>
        <td><input type="Text"><input type="hidden" value="Some,Here"></td>
        <td><img id="cross" src="" class="jq-cross hid" alt="error" /></td>
    </tr>
<tr><td colspan="3"><button id="submit" type="submit">Update Translations</button>  </td></tr>
 </table> 
```

您能给我的任何帮助将不胜感激。希望我在这里提供了足够的信息。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:40:31.283

只需使用 For...In 语句：

```
for(x in $required)
{
    if($(this).val().indexOf($required[x]) !== -1)
    {
        // Code in case if text don't have required string
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T15:56:42.220

```
$(document).on("ready", function () {
     $('input[type="text"]').on('blur', function () {
        var $required = $(this).next().val().split(','); // split values with comma
                                                         // and make array
        var $image = $(this).parent().next().children('img');
        var $errors = $('img:visible').length;
        var value = $.trim( this.value );           // get blur text field value

        // checking value with inArray()

        if ( $.inArray(value, $required) ) {
            $image.show();
            $("#submit").prop("disabled", true);
        } else {
            $image.hide();
            //Manually subtract from error otherwise it doesnt subtract until the next focus change
            $errors--;
            if ($errors == 0)
                $("#submit").prop("disabled", false);
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T15:59:39.060

您可以编写一个函数来遍历逗号分隔的字符串，例如：

```
function isTextInText(text, searchtext) {
    var arr = text.split(',');

    for(var i=0, len=arr.length; i < len; i++) {
        if (searchtext.indexOf(arr[i]) == -1) return false;
    }
    return true;
}

console.log(isTextInText("hello","hello there")); //true   
console.log(isTextInText("hello,there","hello there")); //true
console.log(isTextInText("hello,bye","hello there")); //false 
```

那么你的 if 逻辑可能变成：

```
if (isTextInText($required,$(this).val()) 
```

小提琴 - [http://jsfiddle.net/e7qkd/](http://jsfiddle.net/e7qkd/)

# mysql - 如何删除坏触发器

> ID：11525919
> 
> 赞同：0
> 
> 时间：2012-07-17T15:34:20.407
> 
> 标签：mysql, sql

在 Mysql 版本 5.0.77 上，我运行了这个

```
CREATE TRIGGER ins_trap_to_memory AFTER INSERT on Table1
FOR EACH ROW 
INSERT INTO Table1_Copy SELECT NEW.*; 
```

它运行了，但是现在每当我尝试做某些事情时数据库就会断开连接：

无法查看触发器-

```
mysql> SHOW TRIGGERS LIKE '%'\G
ERROR 2006 (HY000): MySQL server has gone away
No connection. Trying to reconnect...
Connection id:    7
Current database: mydb

ERROR 2013 (HY000): Lost connection to MySQL server during query 
```

无法删除问题触发器-

```
mysql> DROP TRIGGER ins_trap_to_memory;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 3 
```

无法查询信息_schema.TRIGGERS-

```
mysql> select * from information_schema.TRIGGERS;
ERROR 2006 (HY000): MySQL server has gone away
No connection. Trying to reconnect...
Connection id:    12
Current database: information_schema

ERROR 2013 (HY000): Lost connection to MySQL server during query 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:40:51.450

其他类型的查询是否有效？

在我看来，这两者似乎不太可能相关，除非 Table1 可能有大量的插入持续进行，这是服务器过载的结果。这可能只是间歇性连接问题。

无论哪种方式，您都应该能够通过以下方式删除它：

```
DROP TRIGGER ins_trap_to_memory ON Table1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:45:27.790

能够通过去`/var/lib/mysql/mydb`和删除来摆脱坏触发器`Table1.TRG`。

# jquery - 使用 jquery 手风琴滚动到顶部按钮

> ID：11525920
> 
> 赞同：1
> 
> 时间：2012-07-17T15:34:25.353
> 
> 标签：jquery, jquery-ui, scroll, accordion

我有一组使用 jquery 手风琴（用于移动网站）显示内容的按钮。我想知道最好的方法是什么，以便当用户选择另一个按钮时，它会滚动到所选按钮的顶部。

这是我目前的手风琴脚本：

```
$( "#accordion" ).accordion({
        collapsible: true,
        active: false, 
        autoHeight: false,
        clearStyle: true
    });
}); 
```

我也做了[这个小提琴](http://jsfiddle.net/ultraloveninja/6skgc/5/)，但它并没有像在移动设备上查看它时那样运行（除非你调整窗口/视口区域的大小。然后它就像在移动设备上一样运行。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:46:14.327

我发现[了这个相关的问题](https://stackoverflow.com/questions/1805808/how-do-i-scroll-a-row-of-a-table-into-view-element-scrollintoview-using-jquery)。

根据评论，您可以将`element.scrollIntoView()`其用于活动元素，因为这*'在所有主要浏览器中都受支持'*。

还提到了一个[jquery 插件](http://erraticdev.blogspot.co.at/2011/02/jquery-scroll-into-view-plugin-with.html)（在第三个答案中），它做同样的事情。

如果你绑定到`change`手风琴的事件，以下应该工作：

```
$('#myaccordion').accordion({
  // .. other options
  change: function(event, ui) {
            ui.newHeader.scrollIntoView(); // or scrollintoview(), 
                                           // if you're using the plugin
          }
}); 
```

我没有尝试过任何一种解决方案，如果其中一个有效，也许您可​​以发表评论？

**编辑**

在重新阅读您的问题之后，您似乎不需要该`scrollIntoView`功能/插件，因为您按下的按钮通常已经在视图中（您将如何按下它......）。

因此，您可能只使用`window.scroll`（或您使用的任何可滚动的顶级容器）。

根据您的 jsfiddle 示例，以下内容似乎有效：

```
 $( "#accordion" ).accordion({
        collapsible: true,
        active: false, 
        autoHeight: false,
        clearStyle: true,
        change: function(event, ui) {
            if (ui.newHeader) {
            var scrollTop = ui.newHeader.position().top;
            window.scroll(0,scrollTop);
            }
        }
    }); 
```

# mysql - 您可以在创建现有的 mysql 触发器后对其进行修改吗？

> ID：11525930
> 
> 赞同：18
> 
> 时间：2012-07-17T15:34:48.013
> 
> 标签：mysql, triggers

我`mysql`可以创建一个触发器，然后像这样显示有关它的信息：

```
mysql> show triggers like 'fooTrigger'; 
```

这个命令给出的输出看起来很像一个 select 语句，其中一行显示了匹配的触发器。是否可以更新它显示给我的行上的列？

例如，一列名为`Statement`，它定义了触发器被激活时会发生什么。是否可以更改`Statement`字段，`fooTrigger`以便触发器执行不同的操作？还是我需要`drop`重新`create`触发？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-17T16:13:13.343

从 MySQL 5.5 开始，您必须删除并重新创建触发器。在不删除触发器的情况下
无法更新列。`Statement`

文档：[CREATE TRIGGER](http://dev.mysql.com/doc/refman/5.5/en/create-trigger.html) [DROP TRIGGER](http://dev.mysql.com/doc/refman/5.5/en/drop-trigger.html)

您还可以使用 INFORMATION_SCHEMA 表访问有关触发器的信息：

```
SELECT * FROM INFORMATION_SCHEMA.TRIGGERS 
```

但是，由于这些表实际上是视图，因此您不能`UPDATE`在它们上使用。
这只是比使用 SHOW TRIGGERS 更方便的访问和操作信息的方式。

文档：[INFORMATION_SCHEMA.TRIGGERS](http://dev.mysql.com/doc/refman/5.5/en/triggers-table.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T16:19:38.480

在 Windows 操作系统上，您可能需要***[Connector/Net Visual Studio 集成](http://dev.mysql.com/doc/refman/5.6/en/connector-net-visual-studio.html)***来查看和编辑现有的数据库对象。限制是您只能在循环 内[*编辑触发器*](http://dev.mysql.com/doc/refman/5.6/en/connector-net-visual-studio-editing-triggers.html)主体。`For each row ...`

否则，唯一的选项是删除并重新创建触发器。
但请确保在删除触发器之前，与触发器关联的表已锁定，
并在重新创建触发器后解锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-23T00:24:59.663

正如@Jocelyn 提到的，您无法更改触发器。但是，如果您使用的是**MySql Workbench**，它将允许您更改触发器。只需右键单击您的表名，然后从那里单击更改表选项，您可以选择触发器选项并更改它。尽管您无法从查询中执行它。表名--> 更改表--> 触发器。

# javascript - Treeview 中的递归复选框选择 | Telerik MVC

> ID：11525939
> 
> 赞同：1
> 
> 时间：2012-07-17T15:35:15.977
> 
> 标签：javascript, jquery, recursion, treeview, telerik

我最近在处理较大的数据集（500-1000+ 个节点）时遇到了处理[Telerik Treeview 组件](http://www.telerik.com/community/forums/aspnet-mvc/treeview.aspx)和使用复选框处理递归选择的问题。

对于较小的数据集（100-300 个节点），Treeview 及其选择方法的工作方式如下（应该如此）：

*   **最初 - 选择所有节点。**

*   **单击父节点会切换所有子节点的选择。**

*   **取消选择单个子节点将取消选择父节点（以及任何祖父/顶级节点）**

我认为在处理 Treeviews 和选择时，这些事情中的大多数都是相当普遍的。当前使用的方法不是最干净的，并且在选择过程中调用了不必要的额外事件。

我只是好奇在我开始分解当前代码（见下文）之前是否有人处理过类似的问题。

**现有选择代码：**

```
$('#TreeView').find("li").find('> div > .t-checkbox :checkbox').bind('click', function (e) {

        var isChecked = $(e.target).is(':checked');
        var treeView = $($(e.target).closest('.t-treeview')).data('tTreeView');
        var item = $(e.target).closest('.t-item');
        var checkboxes = item.find('.t-checkbox :checkbox');
        $.each(checkboxes, function (index, checkbox) { $(checkbox).attr('checked', isChecked ? true : false); treeView.checkboxClick(e, checkbox); });
        var siblings = item.parent().find('> li .t-checkbox');
        var siblingsLength = siblings.length;
        var checkedLength = siblings.find(':checked').length;
        if (siblingsLength == checkedLength) {
            var parentCheckBox = item.parent().closest('.t-item').find('> div .t-checkbox :checkbox');
            var grandparentCheckBox = item.parent().parent().parent().closest('.t-item').find('> div .t-checkbox :checkbox');
            parentCheckBox.attr('checked', true)
            grandparentCheckBox.attr('checked', true)
            treeView.checkboxClick(e, parentCheckBox)
            treeView.checkboxClick(e, grandparentCheckBox)
        }
        else {
            var parentCheckBox = item.parent().closest('.t-item').find('> div .t-checkbox :checkbox');
            var grandparentCheckBox = item.parent().parent().parent().closest('.t-item').find('> div .t-checkbox :checkbox');
            parentCheckBox.attr('checked', false)
            grandparentCheckBox.attr('checked', false)
            treeView.checkboxClick(e, parentCheckBox)
            treeView.checkboxClick(e, grandparentCheckBox)
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:16:32.207

我找到了一个解决方案，我认为它现在至少可以有效运行，并且比现有解决方案运行得更快，即使在处理非常大的数据集时也是如此。

我创建了一个简单的函数，它触发 TreeView 中的 Checked 事件并处理所有必要的子选择：

```
function TreeView_Checked(e) {
    var current = $(e.item).find(':checkbox:eq(0)');
    //Check or uncheck all child nodes from this one
    var children = $(e.item).find(':checkbox');
    current.is(':checked') ? children.attr('checked', 'checked') : children.removeAttr('checked');
} 
```

这是通过在 TreeView 声明中添加以下内容来实现的：

```
TreeView().Name("TreeView").ClientEvents(e => e.OnChecked("TreeView_Checked")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T20:02:39.070

此代码将选择或取消选择父项及其所有子项。如果你想要祖父母，你可以做 .closest(".t-item")

```
 $(document).ready(function () {
        $("#btnSelectChildren").click(function () {
            nodeCheck(true);
        });
        $("#btnDeselectChildren").click(function () {
            nodeCheck(false);
        });
    });

    function nodeCheck(isChecked) {
        var treeView = $('#TreeView').data('tTreeView');
        var selected = $('#TreeView .t-state-selected');
        treeView.nodeCheck(selected, isChecked);
        selected.closest('li').find(".t-item").each(function () {
            treeView.nodeCheck($(this), isChecked);
        });
    } 
```

# python - 减少python中的循环

> ID：11525940
> 
> 赞同：3
> 
> 时间：2012-07-17T15:35:17.673
> 
> 标签：python, arrays, loops, numpy

我想只使用最里面的 for 循环（迭代 3 次的循环）来实现以下代码段，因为这会消耗大量时间。

```
for i in arange(r):
    for j in arange(c):    
        for k in arange(3):
            if m[i,j]==n[i,j,k]:
                 new[i,j]=old[i,j,k] 
```

有人可以提出更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T15:42:32.703

```
for k in range(3):
    ind = m == n[:,:,k]
    new[ind] = old[:,:,k][ind] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T15:36:32.750

看看 using `itertools.product`- 从未将它与 numpy 数组一起使用，但它可能只是工作（并且不明白为什么不）

```
for i, j, k in itertools.product(arange(r), arange(c), arange(3)):
    if m[i,j]==n[i,j,k]:
         new[i,j]=old[i,j,k] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T15:44:44.763

由于`arange(c)`是为 each`i`和`arange(3)`每对 couple`(i, j)`计算的，因此在循环外一劳永逸地计算它们可以节省一些时间：

```
range_j = arange(c)
range_3 = arange(3)
for i in arange(r):
    for j in range_j:    
        for k in range_3:
            if m[i,j]==n[i,j,k]:
                 new[i,j]=old[i,j,k] 
```

当然，这仅是有效的，因为这些范围独立于`i`和`j`。

# objective-c - 播放音频 iOS Objective-C

> ID：11525942
> 
> 赞同：24
> 
> 时间：2012-07-17T15:35:22.327
> 
> 标签：objective-c, ios, xcode, audio

我正在尝试在我的 iOS 应用程序中播放音频文件。这是我当前的代码

```
NSString *soundFilePath = [NSString stringWithFormat:@"%@/test.m4a", [[NSBundle mainBundle] resourcePath]];

NSLog(@"%@",soundFilePath);
NSURL *fileURL = [[NSURL alloc] initFileURLWithPath: soundFilePath];

audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:fileURL error:nil];
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
[[AVAudioSession sharedInstance] setActive: YES error: nil];
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents];

[audioPlayer setVolume:1.0];

audioPlayer.delegate = self;

[audioPlayer stop];
[audioPlayer setCurrentTime:0];
[audioPlayer play]; 
```

我一直在检查一堆其他帖子，但它们通常都做同样的事情。我没有收到错误消息，但我没有听到模拟器或设备上播放任何音频。

这是我在模拟器上获取音频文件的路径

```
/Users/username/Library/Application Support/iPhone Simulator/5.1/Applications/long-numbered-thing/BookAdventure.app/test.m4a 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-17T18:16:42.053

也许您应该尝试使用`NSBundle`method`pathForResource:ofType:`方法来创建文件的路径。

以下代码应成功播放音频文件。我只将它与 一起使用`mp3`，但我想它也应该与`m4a`. 如果此代码不起作用，您可以尝试更改音频文件的格式。对于此代码，音频文件位于主项目目录中。

```
/* Use this code to play an audio file */
NSString *soundFilePath = [[NSBundle mainBundle] pathForResource:@"test"  ofType:@"m4a"];
NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];

AVAudioPlayer *player = [[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:nil];
player.numberOfLoops = -1; //Infinite

[player play]; 
```

* * *

## 编辑

好的，所以试试这个：

```
NSString *soundFilePath = [NSString stringWithFormat:@"%@/test.m4a",[[NSBundle mainBundle] resourcePath]];
NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];

AVAudioPlayer *player = [[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:nil];
player.numberOfLoops = -1; //Infinite

[player play]; 
```

另外，请确保您进行了正确的导入：

```
#import <AudioToolbox/AudioToolbox.h>
#import <AVFoundation/AVFoundation.h> 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-09-17T17:42:58.293

您需要存储对“AVAudioPlayer”的**强**引用

```
@property (strong) AVAudioPlayer *audioPlayer; 
```

如果您确定您的音频文件在以下捆绑资源中，它应该可以播放。

项目>构建阶段>复制

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-09-23T11:48:00.280

**播放扩展名为 .caf、.m4a、.mp4、.mp3、.wav、.aif 的文件**

* * *

[从GitHub](https://github.com/nicklockwood/SoundManager/tree/master/SoundManager)下载以下两个文件

```
SoundManager.h
SoundManager.m 
```

将这些文件添加到您的项目中

还将音频文件添加到资源文件夹（[示例文件](https://github.com/nicklockwood/SoundManager/tree/master/Examples/Sounds)）

```
mysound.mp3, song.mp3 
```

在所需文件中导入头文件

```
#import "SoundManager.h" 
```

**并在-(void)viewDidLoad**中添加以下两行

 **```
[SoundManager sharedManager].allowsBackgroundMusic = YES;
[[SoundManager sharedManager] prepareToPlay]; 
```

使用以下行播放声音 (mysound.mp3)

```
[[SoundManager sharedManager] playSound:@"mysound" looping:NO]; 
```

使用以下行停止声音 (mysound.mp3)

```
[[SoundManager sharedManager] stopSound:@"mysound"]; 
```

您也可以将音乐（song.mp3）播放为

```
[[SoundManager sharedManager] playMusic:@"song" looping:YES]; 
```

并且可以停止音乐为

```
[[SoundManager sharedManager] stopMusic]; 
```

**完整[的文档在 GitHub 上](https://github.com/nicklockwood/SoundManager)**

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-06-20T12:26:40.263

首先将此框架导入您的文件

```
#import <AVFoundation/AVFoundation.h> 
```

然后声明一个`AVAudioPlayer`.

```
AVAudioPlayer *audioPlayer;

NSString *soundFilePath = [[NSBundle mainBundle] pathForResource:@"Name of your audio file" 
                                                          ofType:@"type of your audio file example: mp3"];
NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];
audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:nil];
audioPlayer.numberOfLoops = -1;
[audioPlayer play]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-07T19:43:37.297

如果您生成系统声音 ID，请使用以下代码播放捆绑音频文件

```
for(int i = 0 ;i< 5;i++)
{
    SystemSoundID   soundFileObject;
    NSString *audioFileName = [NSString stringWithFormat:@"Alarm%d",i+1];

    NSURL *tapSound   = [[NSBundle mainBundle] URLForResource: audioFileName
                                            withExtension: @"caf"];

    // Store the URL as a CFURLRef instance
    CFURLRef soundFileURLRef = (__bridge CFURLRef) tapSound;

    // Create a system sound object representing the sound file.
    AudioServicesCreateSystemSoundID (

                                  soundFileURLRef,
                                  &soundFileObject
                                  );
    [alarmToneIdList addObject:[NSNumber numberWithUnsignedLong:soundFileObject]];
} 
```

您可以使用以下代码播放声音

```
AudioServicesPlaySystemSound([[alarmToneIdList objectAtIndex:row]unsignedLongValue]); 
```

为了实现这个下面的框架需要在你的 Xcode 中添加

音频工具箱

最后需要在控制器中导入以下头文件

```
#import AudioToolbox/AudioToolbox.h
#import AudioToolbox/AudioServices.h 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-04T11:31:44.737

**更新了 Swift 4** 从主包播放 - 仅限 iOS 11

```
import AVFoundation

var player: AVAudioPlayer? 
```

以下代码加载声音文件并播放它，如有必要返回错误。

```
guard let url = Bundle.main.url(forResource: "test", withExtension: "m4a") else { return }

    do {
        try AVAudioSession.sharedInstance().setCategory(AVAudioSessionCategoryPlayback)
        try AVAudioSession.sharedInstance().setActive(true)

    guard let player = player else { return }

    player.play()

    } catch let error {
        // Prints a readable error
        print(error.localizedDescription)
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-29T05:50:58.287

斯威夫特 4.2

```
var soundFilePath = "\(Bundle.main.resourcePath ?? "")/test.m4a"
var soundFileURL = URL(fileURLWithPath: soundFilePath)

var player = try? AVAudioPlayer(contentsOf: soundFileURL)
player?.numberOfLoops = -1 //Infinite

player?.play() 
```**

# c++ - MFC鼠标移动/离开，悬停在按钮上

> ID：11525943
> 
> 赞同：-2
> 
> 时间：2012-07-17T15:35:24.500
> 
> 标签：c++, mfc

我想在鼠标移动或鼠标离开或单击按钮时更改背景按钮。我在 MFC 中编写我的应用程序。请帮助演示/示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:46:17.860

如何跟踪鼠标移动？看[这里](https://stackoverflow.com/questions/4903892/detect-when-mouse-leaves-my-app)

如何更改 MFC 按钮的位图？看[这里](https://stackoverflow.com/questions/2047470/how-to-add-bitmap-image-to-buttons-in-mfc)

# php - PHP中的字符串切片/字符串操作

> ID：11525945
> 
> 赞同：4
> 
> 时间：2012-07-17T15:35:26.093
> 
> 标签：php, substr, strpos

```
Total accesses: 296282 - Total Traffic: 1.2 GB
CPU Usage: u757.94 s165.33 cu0 cs0 - 2.56% CPU load
8.22 requests/sec - 33.5 kB/second - 4175 B/request
22 requests currently being processed, 26 idle workers 
```

假设我们将上述内容作为字符串，并将该字符串存储在变量中。问题：我想获得以下值：

1.  请求/秒 - 当前值为 8.22
2.  当前正在处理的请求 - 当前值为 22
3.  闲置工人 - 当前值为 26

**使用strpos**和**substr**完成了一些解决方案，但我认为这根本不是一个好的解决方案，因为上面的这些值是动态的，它可能是 2 位或 4 位或更长。

**示例代码：**

```
$rps = substr($data,strpos($data,"requests/sec")-5,4);
echo $rps; //displays 8.22 
```

还有另一种方法可以做到这一点吗？我将不胜感激任何回应:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T15:47:43.923

常用表达。

```
$values = array();
preg_match("/(?P<rps>[\d.]+) requests\/sec(.*)(?P<requests>[\d]+) requests (.*)(?P<workers>[\d]+) idle workers/", $your_text, $values);

print 
"requests/sec - CURRENT VALUE IS {$values['rps']}
 requests currently being processed - CURRENT VALUE IS {$values['requests']}
 idle workers - CURRENT VALUE IS {$values['workers']}"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T15:45:54.960

正则表达式可以工作：

```
<?php
$data = 'Total accesses: 296282 - Total Traffic: 1.2 GB
CPU Usage: u757.94 s165.33 cu0 cs0 - 2.56% CPU load
8.22 requests/sec - 33.5 kB/second - 4175 B/request
22 requests currently being processed, 26 idle workers';

if( preg_match('/(\d*\.?\d*)\srequests\/sec/', $data, $m) ){
    echo $m[1];
}else{
    echo 'no match';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T15:57:57.257

假设所有输出都在字符串变量 $output 中。你可以这样做：

```
// requests per second
$regex = '#^([0-9]*\.?[0-9].*)\040requests/sec#';
preg_match($regex, $output, $matches);
$req_per_sec = $matches[1];

// request being processed
$regex = '/([0-9]*)\040requests\040currently/';
preg_match($regex, $output, $matches);
$req_processed = $matches[1];

// idle workers
$regex = '/\040([0-9]*)\040idle\040workers/';
preg_match($regex, $output, $matches);
$idle_workers = $matches[1]; 
```

# winapi - 查找短暂的 HANDLE 关联的文件

> ID：11525950
> 
> 赞同：0
> 
> 时间：2012-07-17T15:35:38.213
> 
> 标签：winapi, reverse-engineering, handle, ida

我正在玩 IDA 的演示，我正在尝试对程序进行一些逆向工程，以找出它使用的其中一个文件的结构。我的最终目标是能够直接从我自己的程序中读取该文件。

使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)我能够找到调用`kernel32_ReadFile`. 我想知道的是如何在变量调用之前找出`hFile`变量指向​​的内容`ReadFile`

在调试模式下，我一直在探索菜单，但在 IDA 中找不到任何可以查找与文件句柄关联的文件的信息的地方。

如何将句柄映射到真实文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T19:24:47.357

此 MSDN 页面描述了从文件句柄获取文件名的方法：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa366789(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366789(v=vs.85).aspx)

那是你要找的信息吗？我不确定为什么您不能直接在 Process Monitor 中看到文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T19:42:55.703

我会设置一个断点`CreateFileA`并`CreateFileW`查看正在打开哪些文件。然后，您可以将返回的`HANDLE`值与后续`ReadFile`调用相匹配。

# javascript - Javascript 错误，更新其他复选框的复选框/按钮基础

> ID：11525957
> 
> 赞同：1
> 
> 时间：2012-07-17T15:35:52.537
> 
> 标签：javascript

首先简要说明：

我有 4 个表（1 和 3 包含一行复选框，2 和 4 包含单选按钮）。

我要做的是拥有它，这样当我在表 1 中选择一个复选框时，它会通过将等效复选框设置为“禁用”来更新表 2、3、4。

我认为最简单的选择是使用“VALUE”属性，因为这在每个表上都是相同的（例如，第一个表上具有 VALUE 4 的字段将等同于其他表上具有 VALUE 4 的字段）。

我的表每个表都有一个唯一的 ID，并且共享一个类名“TableClassName”。它们看起来都类似于：

```
<table id="TableID1" class="TableClassName">
<tr>
<th class="CellGrey">1</td>
<th class="CellGrey ">2</td>
<th class="CellGrey ">3</td>
<th class="CellGrey ">4</td>
</tr>
<tr>
<td class="CellRed "><INPUT TYPE="checkbox" NAME="ignore[]" VALUE="1" checked></td>
<td class="CellWhite "><INPUT TYPE="checkbox" NAME="ignore[]" VALUE="2"></td>
<td class="CellWhite "><INPUT TYPE="checkbox" NAME="ignore[]" VALUE="3"></td>
<td class="CellWhite "><INPUT TYPE="checkbox" NAME="ignore[]" VALUE="4"></td>
</tr>
</table> 
```

到目前为止，我所拥有的是：

```
script type="text/javascript">
$(document).ready(function()
{
$("#TableID1").on('click','input:checkbox',function()
        { 
            if ($(this).attr('checked')) 
                {
                var $val = $(this).attr('value');
                //alert($val);
                $(".DBSelectTable td").function()
                    {
                        if ($(this).child().attr('VALUE') == $val)
                            {
                                $(this).child().attr('disabled');
                            } 
                    }

            }       
        }
    )
}       
);
</script> 
```

但是，我收到了错误：

> “未捕获的类型错误：对象 [对象对象] 没有方法‘函数’”

我的理论很简单：

1.  选择#TableID1 表

2.  找出第一个表中的哪个框被点击并获取VALUE属性

3.  选择 .TableClassName 表

4.  检查是否有相同的 VALUE，并添加“禁用”属性

但是出了点问题，我看不到从这里去哪里。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:09:17.687

请注意，如果 attr. 此外，您可以比较 find 函数中的值。

```
$(document).ready(function()
{
$("#TableID1").on('change','input:checkbox',function()
        { 
            if ($(this).prop('checked')) 
                {
                    var val = $(this).val();                
                    $(".DBSelectTable td").find("[value='"+ val +"']").prop('disabled',true)
                }       
        }
    )
}       
); 
```

# mysql - MySQL LEFT Join 显示不正确的数据

> ID：11525963
> 
> 赞同：0
> 
> 时间：2012-07-17T15:36:15.280
> 
> 标签：mysql, left-join, inner-join

我有 5 个结构相同的表。只有`PAGEVISITS`字段是唯一的

IE。表格1：

```
ITEM |   PAGEVISITS   |  Commodity
1813       50            Griddle
1851       10            Griddle
11875      100           Refrigerator
2255       25            Refrigerator 
```

IE。表2：

```
ITEM |   PAGEVISITS   |  Commodity
1813       0             Griddle
1851       10            Griddle
11875      25            Refrigerator
2255       10            Refrigerator 
```

我希望它加起来`Commodity`吐出：

```
table1   |   table2   |  Commodity
60           10          Griddle
125          35          Refrigerator 
```

有些数据实际上是正确的，但鉴于以下查询，有些数据还差得远：

```
SELECT
SUM(MT.PAGEVISITS) as table1,
SUM(CT1.PAGEVISITS) as table2,
SUM(CT2.PAGEVISITS) as table3,
SUM(CT3.PAGEVISITS) as table4,
SUM(CT4.PAGEVISITS) as table5,
(COUNT(DISTINCT MT.ITEM)) + (COUNT(DISTINCT CT1.ITEM)) + (COUNT(DISTINCT CT2.ITEM)) + (COUNT(DISTINCT CT3.ITEM)) + (COUNT(DISTINCT CT4.ITEM)) as Total,
MT.Commodity
    FROM table1 as MT
       LEFT JOIN table2 CT1
       on MT.ITEM = CT1.ITEM
       LEFT JOIN table3 CT2
       on MT.ITEM = CT2.ITEM
       LEFT JOIN table4 CT3
       on MT.ITEM = CT3.ITEM
       LEFT JOIN table5 CT4
       on MT.ITEM = CT4.ITEM
GROUP BY Commodity 
```

我相信这可能是由于使用`LEFT JOIN`不正确造成的。我也尝试过`INNER JOIN`同样不一致的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:54:50.180

我会对所有五个表执行 UNION 以将它们作为一个行集（内联视图），然后对其运行查询，从这样的内容开始......

```
SELECT SUM(IF(t.source='MT',t.pagevisits,0)) AS table1
     , SUM(IF(t.source='CT1',t.pagevisits,0)) AS table2
     , t.commodity
  FROM ( SELECT 'MT' as source, table1.* FROM table1 
          UNION ALL  
         SELECT 'CT1', table2.* FROM table2
          UNION ALL
         SELECT 'CT2', table3.* FROM table3
          UNION ALL
         SELECT 'CT3', table4.* FROM table4
          UNION ALL
         SELECT 'CT4', table5.* FROM table5
      ) t
GROUP BY t.commodity 
```

（但我会为这些表中的每一个指定列列表，而不是使用“。*”并且让我的查询不依赖于任何人在这些表中添加/删除/重命名/重新排序列。）

I include an "extra" literal value (aliased as "source") to identify which table the row came from. I can use a conditional test in an expression in the SELECT list, to figure out whether the row came from a particular table.

This approach is particularly flexible, and can be used to get more complicated resultsets. For example, if I also wanted to get a total number page visits from table3, 4 and 5 added together, along with the individual counts.

```
SUM(IF(t.source IN ('CT2','CT3','CT4'),t.pagevisits,0) AS total_345 
```

* * *

To get the equivalent of your `COUNT(DISTINCT item) + COUNT(DISTINCT item) + ...` expression...

I would use an expression that makes a single value from both the "source" and "item" columns, being careful to have some sort of guarantee that any particular "source"+"item" will not create a duplicate of some other "source"+"item". (If we just concatenate strings, for example, we don't have any way to distinguish between 'A'+'11' and 'A1'+'1'.) The most common approach I see here is a carefully chosen delimiter which is guaranteed not to appear in either value. We can distinguish between 'A::11' and 'A1::1', so something like this will work:

```
 COUNT(DISINCT CONCAT(t.source,'::',t.item)) 
```

In your current query, if `item` is NULL, then the row doesn't get included in the COUNT. To fully replicate that behavior, you would need something like this:

```
 COUNT(DISINCT IF(t.item IS NOT NULL,CONCAT(t.source,'::',t.item),NULL)) AS Total 
```

Or course, getting a count of distinct item values over the whole set of five tables is much simpler (but then, it does return a different result)

```
 COUNT(DISINCT t.item) 
```

* * *

But to answer your question about the use of the `LEFT JOIN`, the left side table is the "driver" so a matching row has to be in that table for a corresponding row to be retrieved from a table on the right. That is, unmatched rows from the tables on the right side will not be returned.

If what you have is basically five "partitions", and you want to process all of the rows whether or not a matching row appears in any of the other "partitions", I would go with the `UNION ALL` approach to simply concatenate all of the rows from all of those tables together, and process the rows as if they were from a single table.

NOTE: For very large tables, this may not be a feasible approach, since MySQL is going to have to materialize that inline view. There are other approaches which don't require concatenating all of the rows together.

Specifying a list of only the columns you need, in the SELECT from each table, may help performance, if there are columns in those tables you don't need to reference in your query.

* * *

# c++ - 什么是 C++ 中的变体成员？

> ID：11525964
> 
> 赞同：13
> 
> 时间：2012-07-17T15:36:17.633
> 
> 标签：c++, c++11

我是 C++ 新手。我经常从一些网站上读到那个变种成员？

```
class School
{
  int x; -> data member. 
} 
```

我知道数据成员。但什么是变体成员？

注意：来自 c++ 规范：在构造函数页面下。

```
X is a union-like class that has a variant member with a non-trivial default constructor. 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-17T15:51:29.700

“变体成员”在 C++11 的 9.5/8 中定义：

> 类联合类是具有匿名联合作为直接成员的联合或类。类似联合的类 X 具有一组变体成员。如果 X 是联合，则其变体成员是非静态数据成员；否则，它的变体成员是作为 X 成员的所有匿名联合的非静态数据成员。

换句话说，联合的所有非静态数据成员都是“变体成员”，对于包含任何匿名联合的类，它们的非静态数据成员都是该类的“变体成员”。

您引用的上下文是 12.1/5，表示如果类似联合的类有一个带有非平凡默认构造函数的变体成员，则该类本身的默认构造函数将被删除。问题是类的默认构造函数应该构造*哪个变体成员，解决方法是不要有默认构造函数。*如果所有变体成员都有微不足道的默认构造函数，那没有问题，因为不做任何事情，类的默认构造函数就是构造所有/非构造函数。

`boost::variant`是一个单独的东西。如果“某些站点”说“变体成员”，而它们的意思是“给定可以持有的可能类型”，我不会太惊讶`boost::variant`，也就是说，“成员” `variant`。但这不是 C++11 标准中新定义的含义。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-17T15:44:02.197

术语*变体*通常用于标识可以保存一组不同类型的值的成员。与语言中的a 类似`union`，该术语`variant`通常保留用于允许以类型安全的方式存储不同选项的类型。

对于一个这样的示例，您可能需要阅读 boost 变体库的文档，如果这不能澄清概念，请发表评论/提出疑问。

[提升变体](http://www.boost.org/libs/variant/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T15:44:23.980

变体是包含联合成员和无符号整数成员的结构，用于描述当前正在使用联合成员的哪个成员。如果您不知道工会是什么，请先阅读它，然后再回来。

# java - 禁用淡入淡出动画

> ID：11525973
> 
> 赞同：0
> 
> 时间：2012-07-17T15:37:13.377
> 
> 标签：java, android

我正在尝试为我的应用创建启动画面。问题是它首先使用默认标题栏呈现空布局，然后淡入我的图像。

这就是我所拥有的`onCreate`

```
super.onCreate(savedInstanceState);
this.requestWindowFeature(Window.FEATURE_NO_TITLE);
this.setContentView(R.layout.activity_splash); 
```

尝试在[没有动画的情况下切换活动的解决方案](https://stackoverflow.com/questions/6972295/switching-activities-without-animation)

还尝试设置窗口属性

```
WindowManager.LayoutParams lp = this.getWindow().getAttributes();
lp.windowAnimations = lp.windowAnimations | android.R.attr.windowDisablePreview; 
this.getWindow().setAttributes(lp); 
```

两者都没有任何明显的区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:43:17.320

您可以通过为您的启动活动设置主题来摆脱标题栏。将此添加到清单中的活动声明中

```
android:theme="@android:style/Theme.NoTitleBar" 
```

# c# - 根据前缀对目录中的文件进行分组

> ID：11525974
> 
> 赞同：4
> 
> 时间：2012-07-17T15:37:12.863
> 
> 标签：c#, for-loop

我有一个包含图片的文件夹：

*文件夹 1：*

*文件：*

```
ABC-138923
ABC-3223
ABC-33489
ABC-3111
CBA-238923
CBA-1313
CBA-1313
DAC-38932
DAC-1111
DAC-13893
DAC-23232 
DAC-9999 
```

我想浏览这个文件夹并计算我拥有的每张图片前缀的数量。

比如上面有4张prefix ABC图片和3张prefix CBA图片。

我很难弄清楚如何遍历这个。任何人都可以帮我一把吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T15:54:52.940

不是循环，但更清晰易读：

```
string[] fileNames = ...; //some initializing code
var prefixes = fileNames.GroupBy(x => x.Split('-')[0]).
    Select(y => new {Prefix = y.Key, Count = y.Count()}); 
```

**更新：**

要显示每个前缀的计数：

```
foreach (var prefix in prefixes)
{
    Console.WriteLine("Prefix: {0}, Count: {1}", prefix.Prefix, prefix.Count);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T16:03:26.000

这是一个'foreach'循环：

```
var directoryPath = ".\Folder1\";
var prefixLength = 3;
var accumulator = new Dictionary<string, int>();

foreach (var file in System.IO.Directory.GetFiles(directoryPath)) {
    var prefix = filefile.Replace(directoryPath, string.Empty).Substring(0, prefixLength);

    if (!accumulator.ContainsKey(prefix))
    {
        accumulator.Add(prefix, 0);
    }

    accumulator[prefix]++;
}

foreach(var prefix in accumulator.Keys) {
    Console.WriteLine("{0}: {1}", prefix, accumulator[prefix]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T16:02:09.217

在 C# 中，

```
using System.IO;
using System.Collections.Generic;

...

            DirectoryInfo dir = new DirectoryInfo("C:\\yourfolder");
            FileInfo[] files = dir.GetFiles();
            List<string> prefix = new List<string>();
            List<int> count = new List<int>();

            foreach (FileInfo file in files)
            {
                if (prefix.Count > 0)
                {
                    Boolean AddNew = true;
                    for (int i = 0; i < prefix.Count; i++)
                    {
                        if (file.Name.Substring(0, 3) == prefix[i])
                        {
                            count[i]++;
                            AddNew = false;
                        }
                    }
                    if (AddNew)
                    {
                        prefix.Add(file.Name.Substring(0, 3));
                        count.Add(1);
                    }
                }
                else
                {
                    prefix.Add(file.Name.Substring(0, 3));
                    count.Add(1);
                }
            }

... 
```

前缀字符串列表与计数列表平行，因此您可以循环访问数组。我还没有测试或优化它，但如果你沿着这条路线 (c#) 前进，这可能是一个开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T15:40:48.837

算法：

1.  创建字典：

    `Dictionary<string, int> D;`

2.  使用以下命令循环目录：

    `foreach (var file in System.IO.Directory.GetFiles(dir)) ...`

为每个文件完成以下 3 个步骤：

1.  提取前缀并查看是否存在匹配的键`D`。如果为真，请转到步骤 3。
2.  将前缀作为新键插入`D`, 带有值`0`
3.  将键的值增加`1`

处理整个目录后显示结果：

```
foreach (KeyValuePair<string, int> pair in D)
    Console.WriteLine("{0} prefix has {1} files", pair.Key, pair.Value); 
```

# jquery - 如何在 jquery datepicker 中将当前日期延迟 5 小时

> ID：11525975
> 
> 赞同：0
> 
> 时间：2012-07-17T15:37:16.477
> 
> 标签：jquery

请在下面找到我的脚本.. [http://jsfiddle.net/ramu_steve/Fcbjr/1/](http://jsfiddle.net/ramu_steve/Fcbjr/1/)

正如您在上面的脚本中看到的那样，我在日期字段中显示当前日期.. 所以我需要通过延迟 5 小时来显示当前日期.. 示例.. 如果用户在 07 的上午 12:30 或上午 5:00 选择表单/18/2012 ..它必须显示 07/17/2012 ..所以只有在上午 5:00 之后才能更改日期..是否可以将当前日期延迟 5 小时？提前致谢 ...

谢谢大家，这是我更新脚本的解决方案

[http://jsfiddle.net/ramu_steve/Fcbjr/3/](http://jsfiddle.net/ramu_steve/Fcbjr/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:44:43.030

在设置日期之前，您必须执行时间逻辑来确定要显示的日期。

示例：http: [//jsfiddle.net/aztechy/25K4C/](http://jsfiddle.net/aztechy/25K4C/)

这是一个非常基本的例子。据我了解，早上 5 点之前的任何内容都应该使用之前的日期，否则显示的日期是当前日期。

您可以通过在创建 var currentDate 时明确定义日期参数来玩弄逻辑：

```
var currentDate = new Date(year, month, day, hour); // Filling in the proper numerical values for the variable placeholders of course. 
```

# unit-testing - 您如何使用规范编写参数化测试？

> ID：11525977
> 
> 赞同：4
> 
> 时间：2012-07-17T15:37:24.820
> 
> 标签：unit-testing, scala, specs2, parameterized-unit-test

我有几个我想测试的特征的不同实现，并且测试只使用特征的方法签名，所以看起来我应该能够使用参数化测试。但是，specs2 网站似乎没有描述编写参数化测试的简单方法。最接近的是如何“共享示例”，但您仍然需要编写测试和测试代码的每个组合，我希望能够在其中指定：

A. 测试
B. 要测试的类

这可以单独指定，但将测试两者的笛卡尔积。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T00:34:58.753

也不要忘记你可以使用 for 循环：

```
class MySpecification extends mutable.Specification {
  Seq(new Foo, new Bar) foreach { tested => 
    "it should do this" >> { tested must doThis }
    "it should do that" >> { tested must doThat }
  }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-17T16:08:26.143

写一些类似的东西：

```
trait TraitTest extends Specification {
    val thingWithTrait: TraitWithVariousImplementations

//TESTS GO HERE

}

class TestFoo extends TraitTest {
    val thingWithTrait = new Foo
}

class TestBar extends TraitTest {
    val thingWithTrait = new Bar
} 
```

# vba - 强制超链接在记事本中打开目标文件

> ID：11525978
> 
> 赞同：0
> 
> 时间：2012-07-17T15:37:30.050
> 
> 标签：vba, excel, hyperlink

我有一个脚本可以从某个文件夹中获取所有文档并列出该文件夹中的所有文件。然后它会创建一个链接以从 Excel 内部打开这些文件。我想知道是否有办法将它放入外壳中，以便文件仅在记事本中打开。我现在使用的代码是：

```
Sub MakeLink(ByVal cell As Range, ByVal url As String, ByVal txt As String, ByVal tooltip_text As String)
        ActiveSheet.Hyperlinks.Add _
            Anchor:=cell, _
            Address:=url, _
            ScreenTip:=tooltip_text, _
            TextToDisplay:=txt
    End Sub

Sub Portfolios()

    Range("A1:Z200").Clear
    Dim objFSO As Object
    Dim objFolder As Object
    Dim objFile As Object
    Dim ws As Worksheet
    Range("A3").Font.Bold = True

    Set objFSO = CreateObject("Scripting.FileSystemObject")
    Set ws = Worksheets("Library")

     'Get the folder object associated with the directory
    Set objFolder = objFSO.GetFolder("C:\Portfolios")
    ws.Cells(3, 1).Value = "The files found in " & objFolder.Name & " are:"

     'Loop through the Files collection
    For Each objFile In objFolder.Files
        'ws.Cells(ws.UsedRange.Rows.Count + 3, 2).Value = objFile.Name
        MakeLink ws.Cells(ws.UsedRange.Rows.Count + 3, 2), objFile, objFile.Name, objFile.Name

    Next

     'Clean up!
    Set objFolder = Nothing
    Set objFile = Nothing
    Set objFSO = Nothing
End Sub 
```

我知道我必须按照以下方式做一些事情，`MakeLink = Shell("C:\WINDOWS\notepad.exe", 1)`但我似乎对这适合的地方有点困惑。

谢谢， F

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:21:02.757

文件将在文件类型的默认程序中打开。

如果你想强制它们在记事本中打开，那么你必须编写一些代码来处理`Worksheet_FollowHyperlink`事件：你可以从 Target 参数中获取单元格文本并从那里取出记事本。

为防止超链接将用户带到其他地方出现问题，只需将目标地址设置为与包含超链接的单元格相同的单元格。

```
Private Sub Worksheet_FollowHyperlink(ByVal Target As Hyperlink)

    Dim fPath As String, res

    fPath = Target.TextToDisplay
    res = Shell("notepad.exe """ & fPath & """", vbNormalFocus)

End Sub 
```

要创建超链接：

```
Sub MakeLink(rng As Range, txt As String)
    Dim addr As String

    addr = "'" & rng.Parent.Name & "'!" & rng.Address(False, False)
    rng.Parent.Hyperlinks.add Anchor:=rng, Address:="", _
                     SubAddress:=addr, TextToDisplay:=txt

End Sub 
```

# actionscript-3 - 如何将组件库添加到 Flash CS5.5

> ID：11525980
> 
> 赞同：0
> 
> 时间：2012-07-17T15:37:39.540
> 
> 标签：actionscript-3, flash, flash-cs5

我想将[液体组件](http://www.bytearray.org/?p=137)添加到我现有的项目中。我是 Flash 开发的新手，所以我不确定这些组件是如何安装的。在网站上，它说将 .fla 文件移动到特定文件夹。

我在 Windows 7 上使用 Flash CS5.5。我将 Liquid.fla 文件移动到：`C:\Users\MyUserName\AppData\Roaming\Adobe\Flash CS5.5\en\Configuration\Components` 注意，没有 Flash CS5.5 文件夹，所以我创建了它，它可能不是正确的名称，也许这就是问题所在。

我还尝试将 .fla 文件移动到`C:\Program Files\Adobe\Adobe Flash CS5.5\en_US\Configuration\Libraries`.

当我在 Flash CS5.5 中进入组件面板时，我看不到这些液体组件（即使在重新启动 Flash CS5.5 之后）。我想在 Flash CS5.5 组件面板中看到已安装的组件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:48:25.583

不要将其放在漫游文件夹中，而是将其放在“本地”下，如下所示

```
C:\Users\MyUserName\AppData\Local\Adobe\Flash CS6\en_US\Configuration\Components\Liquid 
```

我的是Flash CS6，不过应该和CS5.5差别不大

# android - 我在 NetBeans 中看不到图形布局 android

> ID：11525986
> 
> 赞同：5
> 
> 时间：2012-07-17T15:37:57.647
> 
> 标签：android, android-layout, netbeans-7

当我在 NetBeans 中打开 main.xml 文件时，我看不到 Eclipse 中的图形布局。我该怎么做才能得到它？我必须安装一些东西？提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T12:35:23.953

没有用于 NetBeans 的 Android GUI 编辑的可视化编辑器。www.nbandroid.org 对开发有基本的支持，但我们不提供这种支持。

更新（11 月 12 日）：最新版本中有布局预览功能。它的功能还不完整。它涵盖了一些基本用例。

-拉迪姆

# java - BadRequest 使用 Azure 服务管理 API 创建 VM

> ID：11525988
> 
> 赞同：1
> 
> 时间：2012-07-17T15:38:00.317
> 
> 标签：java, rest, azure, virtual-machine

我正在编写一个小型 Java 客户端，它使用 Azure 服务管理 API 在 Azure 上创建新的 VM 部署。我不断收到这样的错误请求响应：

```
17/07/2012 18:26:37 com.sun.jersey.api.client.filter.LoggingFilter log
INFO: 1 * Client out-bound request
1 > POST https://management.core.windows.net/my-subscription-id/services/hostedservices/myservice/deployments
1 > x-ms-version: 2012-03-01
1 > Content-Type: application/xml
<Deployment xmlns="http://schemas.microsoft.com/windowsazure">
  <Name>mynametest</Name>
  <DeploymentSlot>Staging</DeploymentSlot>
  <Label>mynamelabel</Label>
  <RoleList>
    <Role>
      <RoleName>mynamerolename</RoleName>
      <RoleType>PersistentVMRole</RoleType>
      <ConfigurationSets>
        <ConfigurationSet>
          <ConfigurationSetType>LinuxProvisioningConfiguration</ConfigurationSetType>
          <HostName>myunamehost</HostName>
          <UserName>myname</UserName>
          <UserPassword>password</UserPassword>
        </ConfigurationSet>
      </ConfigurationSets>
      <OSVirtualHardDisk>
        <SourceImageName>CANONICAL__Canonical-Ubuntu-12-04-amd64-server-20120528.1.3-en-us-30GB.vhd</SourceImageName>
      </OSVirtualHardDisk>
    </Role>
  </RoleList>
</Deployment>

17/07/2012 18:26:38 com.sun.jersey.api.client.filter.LoggingFilter log
INFO: 1 * Client in-bound response
1 < 400
1 < x-ms-request-id: c622e270c5934cb493f76790b7d2c49d
1 < Date: Tue, 17 Jul 2012 15:27:26 GMT
1 < Content-Length: 275
1 < Content-Type: application/xml; charset=utf-8
1 < Server: 6.0.6002.18488 (rd_rdfe_stable.120710-1331) Microsoft-HTTPAPI/2.0
1 < 
<Error xmlns="http://schemas.microsoft.com/windowsazure" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Code>BadRequest</Code><Message>No   target URI is specified for the image CANONICAL__Canonical-Ubuntu-12-04-amd64-server-20120528.1.3-en-us-30GB.vhd.</Message></Error> 
```

看起来来自 azure 的文档有问题：http: [//msdn.microsoft.com/en-us/library/windowsazure/jj157194](http://msdn.microsoft.com/en-us/library/windowsazure/jj157194)

有人试过这个吗？我不明白“目标 URI”是什么意思...图像名称取自 azure 上的公共图像库。

任何帮助，任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:20:50.173

您的 xml 有一些错误的配置，即 DeploymentSlot 等，我也相信错误即将到来，因为您的 XML 中没有所有必需的设置。以下是适用于 Linux Gallery 图像的工作：

```
<Deployment xmlns="http://schemas.microsoft.com/windowsazure" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
 <Name>mydeploymentname</Name>
 <Label>mydeploymentlabel</Label>      
 <RoleList>
  <Role>
     <RoleName>mylinuxvm2012</RoleName>
     <RoleType>PersistentVMRole</RoleType>      
     <ConfigurationSets>
        <ConfigurationSet> 
            <ConfigurationSetType>LinuxProvisioningConfiguration<ConfigurationSetType>
            <HostName>host-name-for-the-vm</HostName>
            <UserName>new-user-name</UserName> 
            <UserPassword>password-for-the-new-user</UserPassword> 
            <DisableSshPasswordAuthentication>true|false</DisableSshPasswordAuthentication>           
            <SSH>
                <PublicKeys>
                   <PublicKey>
                       <FingerPrint>******add_here******</FingerPrint>
                       <Path>****SSH-public-key-storage-location**********</Path>     
                   </PublicKey>
                </PublicKeys>
                <KeyPairs>
                   <KeyPair>
                       <FingerPrint>************certificate-fingerprint*************</FinguerPrint>
                       <Path>*************SSH-public-key-storage-location*************</Path>
                   </KeyPair>
                </KeyPairs>
            </SSH>
        </ConfigurationSet> 
     <OSVirtualHardDisk>
        <HostCaching>ReadWrite</HostCaching>    
        <DiskLabel>myosdisklabel</DiskLabel>
        <DiskName>myazurelinuxvm</DiskName>                    
        <MediaLink>https://_yourstoragename_.blob.core.windows.net/vhds/_your_VHD_NAME_.vhd</MediaLink>
        <SourceImageName>CANONICAL__Canonical-Ubuntu-12-04-amd64-server-20120528.1.3-en-us-30GB.vhd</SourceImageName>
     </OSVirtualHardDisk>      
     <RoleSize>_ExtraSmall|Small|Medium|Large|ExtraLarge_</RoleSize>      
  </Role>
</RoleList> 
```

# android - 修改 Notification.Builder 没有自定义布局的进度条

> ID：11525990
> 
> 赞同：1
> 
> 时间：2012-07-17T15:38:03.160
> 
> 标签：android, notifications

有人知道我如何使用 Notification.builder 然后更新进度条吗？目前它似乎受到限制。我知道我可以访问 notification.contentView 但是从这里更新 progressView 需要视图 ID，它是 android 内部类的一部分（我没有访问范围）。当然，如果通知生成器允许您显示进度条，应该有办法更新它吗？

我应该补充一点，我希望在不重复调用“getNotification”的情况下做到这一点，因为这似乎非常低效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T03:03:03.637

您可以使用新线程以肮脏的方式执行此操作。但是，通过这种方式，您的通知不会结束，直到它自己结束。这是代码。

```
public void showJobFinishNotification() {
    final String ns = Context.NOTIFICATION_SERVICE;
    final NotificationManager notificationManager = (NotificationManager) getSystemService(ns);
    final Intent notificationIntent = new Intent(this, WillingActivity.class);
    final PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
    final int JOBFINISH_ID = 1;

    new Thread(new Runnable() {
        public void run() {
            for(int progress = 0; progress <= 29; progress++) {
                Notification jobFinishNotification = new NotificationCompat.Builder(getApplication())
                    .setSmallIcon(R.drawable.ic_launcher) //must have small icon, but the large icon is not a must
                    .setContentTitle("Job is finished")
                    .setContentText("Press here to finish your job.")
                    .setProgress(29, progress, false) 
                    .setDefaults(Notification.DEFAULT_SOUND)
                    .setContentIntent(contentIntent)
                    .setAutoCancel(false)
                    .build();
                notificationManager.notify(JOBFINISH_ID, jobFinishNotification);
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            notificationManager.cancel(JOBFINISH_ID); //if you want the user to handle the notification.
            //comment the line above. and use setAutoCancel(true) in the above code.
        }
    }).start();
} 
```

# javascript - 如何在 Django 中使用 jQuery？

> ID：11525994
> 
> 赞同：2
> 
> 时间：2012-07-17T15:38:07.090
> 
> 标签：javascript, jquery, python, django

我对使用 jQuery [tablesorter](http://tablesorter.com/docs/#Examples)很感兴趣，但不知何故无法使用。我已按照说明将 jquery.js 和 tablesorter.js 放在与我的模板（html 文件所在的文件夹）相同的文件夹中。不幸的是，当尝试访问 .js 文件时，它不断出现 404，我假设这意味着文件不在正确的路径上。对此修复有任何想法吗？

django有专门的地方放这些js文件吗？（不在模板文件夹中？）

```
<script type="text/javascript" src="jquery-latest.js"></script> 
<script type="text/javascript" src="jquery.tablesorter.js"></script>
<script type ="text/javascript">
    $(document).ready(function() 
    { 
       $("#myTable").tablesorter(); 
    } 
); 
```

myTable 与示例中的表完全相同

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T15:44:44.880

对于 jQuery，您可以使用 Google API：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

对于 Django，您是否为脚本/媒体等配置了路径...？（可能在 settings.py 中？）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T16:19:01.197

通常 jquery、js、css、图像和大多数其他静态内容作为静态文件而不是 django 模板处理。阅读[管理静态文件文档](https://docs.djangoproject.com/en/dev/howto/static-files/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-22T01:32:48.463

要添加到其他人编写的内容，如果您想让 JQuery 在整个站点/应用程序中可用并且您不喜欢 Google 等外部依赖项，您可以执行以下操作：

1.  [在https://jquery.com/download/](https://jquery.com/download/)下载最新的“压缩的、生产的”JQuery - 例如，在静态目录中的命令行上（可能是 <projectname>/static）：`wget https://code.jquery.com/jquery-2.1.3.min.js`
2.  在站点的“基本”模板文件（可能是 <projectname>/<appname>/templates/base.html）中添加对加载 JQuery 的引用 - 例如：`<script src="{% static 'jquery-2.1.3.min.js' %}"></script>`在`<head>`部分中添加
3.  通过将以下内容添加到您的模板之一来测试 JQuery 安装：

    `<script type="text/javascript"> $(document).ready( function(){ $("#jqtest").html("JQuery installed successfully!"); } ); </script> <p id="jqtest"></p>`

4.  如果需要/通常在进行模板更新后，重新启动您的 Django 服务器，然后加载一个使用该模板和测试代码的页面

# ipad - 带新设备的企业部署

> ID：11525995
> 
> 赞同：1
> 
> 时间：2012-07-17T15:38:15.593
> 
> 标签：ipad, deployment, ios-provisioning

尝试以无线方式部署企业应用程序，但取得了部分成功。我确实有 Enterprise Developers Kit，我已经创建了配置文件，添加了设备 ID，上传了移动配置文件、ipa 和 P-list。

当我通过 xCode 将应用程序直接安装到 iPad 上，然后尝试无线下载时，它运行良好。当我尝试在没有直接安装的设备上使用它时，它下载了大约 66%-75%，就在标题出现在应用程序上时，然后显示“无法下载应用程序”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:03:12.413

所以，如果你在这里，你应该检查你的 iPad 或 iPhone 是否与你在 xCode 上存档的任何版本都是最新的。我将 iPad 更新到 5.1.1，它安装得很好。我的错。

# matlab - 将单元格转换为双精度

> ID：11525996
> 
> 赞同：9
> 
> 时间：2012-07-17T15:38:26.637
> 
> 标签：matlab, double, cell-array

```
>> C = [{1} {2} ; {'@CF'} {2}] 
C = 

[  1]    [2]
'@CF'    [2]

>> whos C
  Name      Size            Bytes  Class    Attributes

  C         2x2               478  cell 
```

我怎样才能转换`C`成`double`这样：

```
>> C
C = 
1    2
NaN  2 
```

我试过了`str2double(C)`。它返回：

```
 NaN   NaN
   NaN   NaN 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T15:47:00.050

```
C = [{1} {2} ; {'@CF'} {2}]

C = 

    [  1]    [2]
    '@CF'    [2]

D = cellfun(@isnumeric,C);
C(~D)={nan}

C = 

    [  1]    [2]
    [NaN]    [2]

cell2mat(C)

ans =

     1     2
   NaN     2 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-17T15:51:07.597

[使用isnumeric 查找由 cellfun](http://www.mathworks.nl/help/techdoc/ref/cellfun.html)[查询](http://www.mathworks.nl/help/techdoc/ref/isnumeric.html)的非数值。将其与[逻辑索引](http://www.mathworks.nl/company/newsletters/articles/Matrix-Indexing-in-MATLAB/matrix.html)一起使用以提取数值：

```
C = [{1} {2} ; {'@CF'} {2}];
isnum = cellfun(@isnumeric,C);
result = NaN(size(C));
result(isnum) = [C{isnum}]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T15:45:51.400

好吧，这里有混合数据类型，所以没有一个非常直接的方法可以做到这一点。

我能想到的最简单的方法是，如果你知道你想要的数据在哪里，那就是简单地使用`cell2mat`

IE：`cell2mat(C(1,1))`将返回 1 作为双精度数。

# css - Chrome CSS Hack 和媒体查询

> ID：11525997
> 
> 赞同：-4
> 
> 时间：2012-07-17T15:38:33.983
> 
> 标签：css, google-chrome

我想创建一个响应式网站，但到目前为止我的尝试在 chrome 中存在一些问题。现在的问题 - 将媒体查询插入 chrome css hack？

```
@media 屏幕和 (-webkit-min-device-pixel-ratio:0) {

#myid {位置：绝对；顶部：10 像素；}

@media only screen and (max-width: 1024px) {

#myid {位置：绝对；顶部：8px；}

}

}
```

仅在 css 中需要它，因此不需要 javascript 或 php。有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T16:39:00.053

你想听到的答案，我在评论中暗示的，是：

```
@media screen and (-webkit-min-device-pixel-ratio:0) { 
    #myid {position: absolute; top: 10px;}
}

@media screen and (-webkit-min-device-pixel-ratio:0) and (max-width: 1024px) {
    #myid {position: absolute; top: 8px;}
}​ 
```

尽管我想解决您的根本问题...

> 我已经通过@font-face 添加了一种字体，它在 chrome 和 ie 中呈现不同。所有的行高都被“破坏”了，所以我使用了 hack。

？！