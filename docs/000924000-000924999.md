# StackOverflow 问答 000924000-000924999

# excel - 制作宏以将数据输入到 Excel 电子表格中

> ID：924000
> 
> 赞同：1
> 
> 时间：2009-05-29T01:24:45.920
> 
> 标签：excel, vba

我正在使用 Excel 2003，我需要创建一个宏，要求用户输入 5 个输入：日期、项目#、故障、问题和解决方案。我以前从未使用过宏，所以我不知道如何编码。用户输入数据后，我希望它位于相应的列下。完成此操作后，宏将不会提示用户进行其他输入，直到再次运行宏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T01:29:24.070

```
Sub TestMacro()  
    Range("A2").Select
    ActiveCell.FormulaR1C1 = InputBox("Date")
    Range("B2").Select
    ActiveCell.FormulaR1C1 = InputBox("Project #")
    Range("C2").Select
    ActiveCell.FormulaR1C1 = InputBox("Fault")
    Range("D2").Select
    ActiveCell.FormulaR1C1 = InputBox("Problem")
    Range("E2").Select
    ActiveCell.FormulaR1C1 = InputBox("Solution")
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-10T19:19:50.493

启动宏时，请在执行任何操作之前放置此代码：

```
Dim i As Integer

Range("a1").Select
Range(Selection, Selection.End(xlDown)).Select
i = Selection.Rows.Count 
```

这假设您始终在“A1”中有一些值，并且在您到达有效输入数据行的末尾之前没有空白行。

此时，您的值“i”等于已包含数据的行数。

然后你可以使用上面Christian Payne的代码，但是修改

```
Range("A2").Select 
```

至

```
Cells(i + 1, 1).Select 
```

这将允许您的宏将数据放置在现有数据下方的下一个空白行中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-30T00:13:40.227

有一种内置的方法可以做到这一点。将列标题放在 Excel 工作表的第 1 行，选择单元格 A1，然后转到`Data`菜单并选择`Form`

这可能是一个限制性的解决方案，因为您不能做一些事情，比如在另一个字段的基础上填充一个字段（例如，给出一个取决于所选故障的问题列表）。如果您只需要快速简单的东西，那么它就可以完成工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-15T17:27:40.747

这样的事情会做你需要的吗？

```
Sub TestMacro()
Dim dblRow As Double, dtDate As Date, strProject As String
Dim strFalut As String, strProb As String, strSol As String
    dblRow = InputBox("What Row to Enter On")
    dtDate = InputBox("Date", , Date)
    strProject = InputBox("Project #")
    strFalut = InputBox("Fault")
    strProb = InputBox("Problem")
    strSol = InputBox("Solution")
    Range("A" & dblRow).Value = dtDate
    Range("B" & dblRow).Value = strProject
    Range("C" & dblRow).Value = strFalut
    Range("D" & dblRow).Value = strProb
    Range("E" & dblRow).Value = strSol
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-29T13:16:15.173

要将活动单元格向下移动到 a3 （即您要求的下一行），请使用以下命令：

```
ActiveCell.Offset(1, -4).Select 
```

# javascript - How to reduce XMLHttpRequest time lag?

> ID：924005
> 
> 赞同：1
> 
> 时间：2009-05-29T01:27:59.393
> 
> 标签：javascript, ajax, xmlhttprequest

I use a XMLHttpRequest on a signup form to see if the username they entered has been taken already. The script runs fine, but I notice that there's some time delay when making the request - the webpage is frozen for a second, after sending the request.

Is there a way to have the request "in the background" and not cause any lag on the front end? I like Twitter's implementation: it shows an spinning hourglass icon while it's searching the database. How do I get something similar?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-29T01:29:49.543

You want to use asynchronous XHR -- currently you're performing a synchronous request, so the page has to freeze until the load has complete. Asynchronous XHR calls a callbck function you provide with the load status updates.

If memory serves you just need to do

```
 xhr.onreadystatechange = function() { 
     if (xhr.readyState === 4 && xhr.status === 200) loadFinished();
 }
 xhr.open(requestType, url,  true); 
```

Where `true` makes the request asynchronous.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T01:31:32.723

You need to specify that XMLHttpRequest operate asynchronously--in the background. Then you can provide a callback function so users can continue browsing until the operation is complete.

Many sites simply show an animated GIF while waiting for the operation to return, which probably gives the user the impression that you're looking for since it looks like something is happening. You can design and download one of those AJAX-spinning indicators easily at [http://www.ajaxload.info/](http://www.ajaxload.info/).

# winsock - gethostbyaddr() 出现错误 11001

> ID：924008
> 
> 赞同：0
> 
> 时间：2009-05-29T01:29:25.800
> 
> 标签：winsock

我正在编写简单的程序来在智能设备之间进行通信，并且在调用 gethostbyaddr() 时收到 11001。两台设备都显示它们连接到同一个网络，但从 msdn 文档 11001 错误是找不到主机。没有这样的主机是已知的。有人有什么建议吗，谢谢 我的代码如下。

```
void InitializeSocket()
{
    WORD socketVersion;
    WSADATA wsaData;
    SOCKADDR_IN serverInfo;
    int returnVal;
    LPHOSTENT remotHost;

    socketVersion = MAKEWORD(2,2);
    WSAStartup(socketVersion, &wsaData);

    in_addr iaHost;

    //iaHost.s_addr = inet_addr("120.15.22.14");
    iaHost.S_un.S_un_b.s_b1 = 120;
    iaHost.S_un.S_un_b.s_b2 = 15;
    iaHost.S_un.S_un_b.s_b3 = 22;
    iaHost.S_un.S_un_b.s_b4 = 14;
    remotHost = gethostbyaddr((const char *)&iaHost, sizeof(struct in_addr),
        AF_INET);

    if(iaHost.s_addr == INADDR_NONE)
    {
        MessageBox(NULL, TEXT("inet_addr has invalid address"),
            TEXT("inet_addr"), MB_OK);
        WSACleanup();
        closesocket(theSocket);
        return;
    } 
```

```
 if(!remotHost)
    {
        returnVal = WSAGetLastError();
        WSACleanup();
        closesocket(theSocket);
        return;
    }

    theSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);    
    if(theSocket == INVALID_SOCKET)
    {
        returnVal = WSAGetLastError();
        WSACleanup();
        closesocket(theSocket);
        return;
    }

    serverInfo.sin_family = AF_INET;
    serverInfo.sin_addr = *((LPIN_ADDR)*remotHost->h_addr_list);
    serverInfo.sin_port = htons(8888);

    //Connect to the server
    returnVal = connect(theSocket, (LPSOCKADDR)&serverInfo,
        sizeof(struct sockaddr));

    if(returnVal == SOCKET_ERROR)
    {
        returnVal = WSAGetLastError();
        WSACleanup();
        closesocket(theSocket);
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-29T01:56:07.683

我只是输入 nslookup 120.15.22.14，但它返回找不到 120.15.22.14。不存在的域。

我查看了我的 DNS 设备设置，它设置为 120.20.32.10，这与 120.15.22.14 不同，这是否意味着我没有配置 DNS？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T01:47:00.027

错误 11001 是一个通用的 DNS 查找错误，所以我只有一个问题。DNS中真的存在120.15.22.14地址吗？

您可以通过键入

```
nslookup 120.15.22.14 
```

从命令行。

如果您收到错误，那是因为 DNS 对这些地址一无所知，因此 a`gethostbyaddr()`将无法为您提供任何信息。

**更新：**

回答你的观点：

> 我只是输入 nslookup 120.15.22.14，但它返回找不到 120.15.22.14。不存在的域。

由于`nslookup 120.15.22.14`返回错误，因此在 DNS 中没有该 IP 地址的条目。那是你的问题。

> 我查看了我的 DNS 设备设置，它设置为 120.20.32.10，这与 120.15.22.14 不同，这是否意味着我没有配置 DNS？

如果`120.20.32.10`是您设备的 DNS 中的内容，并且`120.15.22.14`是实际地址，则 DNS 错误。干净利落。修复 DNS。

> 如果我使用 gethostbyname() 而不是 gethostbyaddr()，它会产生相同的结果吗？

如果要将 DNS 名称转换为 IP 地址，请使用`gethostbyname()`. 要将 IP 地址转换为 DNS 名称，请使用`gethostbyaddr()`.

对于连接到远程主机，您通常会使用`gethostbyname()`调用，因为主机的 IP 地址可能随时更改。如果 DNS 始终准确地表示该主机的 IP 地址，这是首选方式。

# c# - 可以捕获 ComboBox“DroppingDown”事件吗？

> ID：924013
> 
> 赞同：0
> 
> 时间：2009-05-29T01:30:56.283
> 
> 标签：c#, .net, winforms, events, combobox

我在表单上有一个[System.Windows.Forms.ComboBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox(VS.80).aspx)，我想在显示 ComboBox 的菜单之前捕获事件（类似于“DroppingDown”）。我似乎找不到合适的活动。

是否可以使用 ComboBox 捕获此类事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T01:36:42.557

ComboBox 应该有一个[DropDown Event](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.dropdown(VS.71).aspx)。如果我没记错的话，这个事件应该在下拉列表开始显示时立即触发。

在下拉显示需要您捕获此类事件之前，您究竟想要完成什么？

# php - 如何在类中使用不同的对象？

> ID：924018
> 
> 赞同：0
> 
> 时间：2009-05-29T01:33:13.890
> 
> 标签：php, oop, class, object

如果我在主范围内创建一个对象：

索引.PHP：

```
$db = new database(); 
```

那么我怎样才能在一个完全不同的类中使用这个相同的对象呢？

任何东西.PHP：

```
class anything {
    function __construct(){
        $db->execute($something); # I want to use the same object from INDEX.PHP
    }
} 
```

我需要将 $db 设为全局还是有“更好”更明显的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T01:36:19.143

你可以用`global`它来找到它：

```
class anything {
    function __construct(){
        global $db;
        $db->execute($something);
    }
} 
```

或者，您可以在创建新内容时将其传入：

```
class anything {
    function __construct($db) {
        $db->execute($something);
    }
} 
```

这真的取决于什么对你最有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T10:30:48.627

对于数据库，您可能需要使用[单例模式](http://www.php.net/manual/en/language.oop5.patterns.php)

```
class anything 
{
    public function load($id)
    {
        $db = DB::getInstance();
        $res = $db->query('SELECT ... FROM tablename WHERE id = '.(int)$id);
        // etc...
    }
} 
```

如果您同时需要不同的数据库连接（即主数据库和论坛的数据库），您可能需要扩展它。然后您将使用它`DB::getInstance('forum');`并将实例存储在关联数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T02:49:19.557

在保罗的帖子中：

传递它之后，您可以将它分配给一个类变量，如下所示：

```
class anything {
    var $db_obj;
    function __construct($db) {
        $this->db_obj = $db;
    }

    function getUsers() {
        return $this->db_obj->execute($something);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T01:36:25.100

您可以将其作为参数传递，就像这样

```
function __construct($db){
   $db->execute($something);
} 
```

然后当你实例化任何东西时，做它`anything($db)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-29T01:45:45.520

正如 Paolo 和 ONi 建议的那样，您可以在方法内将 $db 定义为全局或将其传递给类的构造函数。传入它会创建对该对象的引用，因此它实际上是同一个 $db 对象。您也可以使用 $GLOBALS 数组并以这种方式引用 $db。

`$GLOBALS["db"];`

我假设 index.php 和 any.php 通过 include() 或 require() 或其他类似方法以某种方式链接在一起？

# c# - 在多人之间分配美元金额的四舍五入问题

> ID：924019
> 
> 赞同：8
> 
> 时间：2009-05-29T01:33:49.070
> 
> 标签：c#, .net, puzzle, rounding

在代码中解决这个问题的最佳方法是什么？

问题是我有 2 美元的金额（称为罐子），需要分配给 3 人。每个人都会从两个罐子中获得特定的金额，并且费率必须大致相同。我不断遇到四舍五入的问题，即我的分配加起来太多或太少。

这是一个具体的例子：

锅#1 987,654.32
锅#2 123,456.78

第 1 人获得分配金额：345,678.89
第 2 人获得分配金额：460,599.73
第 3 人获得分配金额：304,832.48

我的逻辑如下（代码在c#中）：

```
foreach (Person person in People)
{
    decimal percentage = person.AllocationAmount / totalOfAllPots;

    decimal personAmountRunningTotal = person.AllocationAmount;

    foreach (Pot pot in pots)
    {
        decimal potAllocationAmount = Math.Round(percentage * pot.Amount, 2);
        personAmountRunningTotal -= potAllocationAmount;

        PersonPotAssignment ppa = new PersonPotAssignment();
        ppa.Amount = potAllocationAmount;

        person.PendingPotAssignments.Add(ppa);
    }

    foreach (PersonPotAssignment ppa in person.PendingPotAssignments)
    {
        if (personAmountRunningTotal > 0) //Under Allocated
        {
            ppa.Amount += .01M;
            personAmountRunningTotal += .01M;
        }
        else if (personAmountRunningTotal < 0) //Over Allocated
        {
            ppa.Amount -= .01M;
            personAmountRunningTotal -= .01M;
        }
    }
} 
```

我得到的结果如下：

底池 #1，人 #1 = 307,270.13 底池
#1，人 #2 = 409,421.99 底池
#1，人 #3 = 270,962.21 底池
#1 总计 = 987,654.33（1 美分折扣）

底池 #2，人 #1 = 38,408.76 底池
#2，人 #2 = 51,177.74 底池
#2，人 #3 = 33,870.27 底池
#2 总计 = 123,456.77（1 美分折扣）

底池总数应与原始总数相匹配。

我想我可能遗漏了一些东西，或者可能需要采取额外的步骤。我认为我在正确的轨道上。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-29T02:21:46.150

当四舍五入到最接近的美分时，这在财务计算中经常发生。对单个操作舍入算法进行任何调整都不会适用于每种情况。

您必须有一个累加器来跟踪舍入和分配操作后分配的金额。在分配结束时，您根据实际结果（加在一起）检查累加器并分配剩余的便士。

在下面的数学示例中，如果您取 0.133 并将其四舍五入为 0.13 并添加 3 次，则您将比先添加 3 次然后四舍五入的 0.133 少一分钱。

```
 0.13    0.133
 0.13    0.133
+0.13   +0.133
_____   ______
 0.39    0.399 -> 0.40 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-29T02:52:09.347

+1 为 Matt Spradley 的解决方案。

作为对马特解决方案的附加评论，您当然还需要考虑最终分配的一美分（或更多）*少于*目标金额的情况——在这种情况下，您需要从一个或多个分配的金额。

您还需要确保最终不会从 0.00 美元的分配金额中减去一分钱（如果您在大量收件人中分配的金额很小）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-29T01:42:42.640

您是否尝试过使用 MidpointRounding 参数控制舍入行为？

```
public static decimal Round( decimal d, MidpointRounding mode ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-29T10:43:18.867

分钱怎么办是一个长期存在的问题。Martin Fowler[在这里](http://martinfowler.com/ap2/quantity.html)提供了一些评论（我认为在他的实际[PoEAA](http://martinfowler.com/books.html#eaa)书中有更多细节）：

> 但是除法不是[直截了当]，因为我们必须处理错误的便士。我们将通过返回一个货币数组来做到这一点，使得数组的总和等于原始金额，并且原始金额在数组元素之间公平分配。从这个意义上说，公平意味着那些刚开始的人会得到额外的便士。

```
class Money... 
    public Money[] divide(int denominator) {
        BigInteger bigDenominator = BigInteger.valueOf(denominator);
        Money[] result = new Money[denominator];
        BigInteger simpleResult = amount.divide(bigDenominator);
        for (int i = 0; i < denominator ; i++) {
            result[i] = new Money(simpleResult, currency, true);
        }
        int remainder = amount.subtract(simpleResult.multiply(bigDenominator)).intValue();
        for (int i=0; i < remainder; i++) {
            result[i] = result[i].add(new Money(BigInteger.valueOf(1), currency, true));
        }
        return result;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-29T01:37:41.557

绝对是 Math.Round。

我建议不要将计算结果四舍五入，但如果需要显示，则四舍五入到最接近的一分钱。或者您可以使用便士作为最小分母，因此在显示时，将所有内容除以 100。

# build-automation - 使用 nant 构建城堡项目时构建日志在哪里？

> ID：924023
> 
> 赞同：0
> 
> 时间：2009-05-29T01:36:20.937
> 
> 标签：build-automation, nant, castle

我正在尝试使用 nant 构建城堡项目并获得以下结尾的输出：

```
 common.compile-dll:

                      [csc] Compiling 92 files to 'C:\code\OSS\castle\build\net-3.5\release\Castle.Core.dll'.
                      [csc] error CS0006: Metadata file 'System.Core.dll' could not be found
                      [csc] error CS0006: Metadata file 'System.Data.DataSetExtensions.dll' could not be found
                      [csc] error CS0006: Metadata file 'System.Data.Linq.dll' could not be found
                      [csc] error CS0006: Metadata file 'System.ServiceModel.Web.dll' could not be found
                      [csc] error CS0006: Metadata file 'System.Web.Extensions.Design.dll' could not be found
                      [csc] error CS0006: Metadata file 'System.Web.Extensions.dll' could not be found
                      [csc] error CS0006: Metadata file 'System.Xml.Linq.dll' could not be found

                BUILD FAILED

                C:\code\OSS\castle\common-project.xml(127,5):
                External Program Failed: c:\WINDOWS\Microsoft.NET\Framework\v3.5\csc.exe (return code was 1)

                Total time: 1.1 seconds.

    BUILD FAILED

    Nested build failed.  Refer to build log for exact reason. 
```

现在也许我可以弄清楚这一点，或者至少有一个更合理的问题要问我是否知道构建日志的位置，它通常会去哪里？将 -l 选项添加到 nant 命令会导致日志包含与屏幕输出完全相同的消息。有人知道吗？

[（有趣的是，这与之前提出](https://stackoverflow.com/questions/829907/)的一个问题完全相同，但没有回应就被删除了）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-06-21T08:14:29.860

您的特定错误似乎与 nant 使用错误的目标框架（未检测/使用 net-3.5）有关，请尝试下载最新版本的 nant 以解决问题。

**注意：城堡项目迁移到github：**

*   现在每个核心项目都分离并迁移到**[github.com/castleproject](http://github.com/castleproject/)**
*   构建系统现在是 msbuild

* * *

您的问题的一些答案：

> 它通常去哪里？

*   构建日志转到控制台输出或控制台输出被重定向的地方
*   构建输出到 ~/build/.NETFramework-v3.5/Release 或 Debug 文件夹（我误读了您问题的哪个输出部分）

> 将 -l 选项添加到 nant 命令会导致日志包含与屏幕输出完全相同的消息。有人知道吗？

通常使用 nant，您可以传递详细参数以进行更多诊断，如果您希望 tp 将控制台输出到文件，只需使用 > filename.txt 后缀

`nant -v ... > verboseoutput.txt`

# .net - 有没有一种好方法可以检测 Linq-To-Entities 查询中的空结果？

> ID：924041
> 
> 赞同：3
> 
> 时间：2009-05-29T01:45:30.043
> 
> 标签：.net, vb.net, linq, linq-to-entities

我知道的唯一方法是尴尬：

```
'check for empty return
Dim count As Integer = (From s In myEntity.employee Where employeeID = myEmployeeIDVariable).Count

'If there is a record, then process
If count > 0 Then
     Dim r = (From s In myEntity.employee Where employeeID = myEmployeeIDVariable).First()

     . . . do stuff . . .
End If 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-29T01:48:19.773

使用 .FirstOrDefault()。如果有一条记录，您将获得第一条记录，如果没有返回记录，您将获得 null。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-29T01:52:38.937

您可以将 LINQ 结果分配给一个变量并检查 .Count() 是否 > 0。这样您就不需要两次执行相同的查询。

代码：

```
'check for empty return
Dim r = (From s In myEntity.employee Where employeeID = myEmployeeIDVariable)

'If there is a record, then process
If r.Count() > 0 Then
  . . . do stuff . . .
End If 
```

# visual-c++ - 我可以优化一些代码片段作为调试模式下的发布吗？

> ID：924045
> 
> 赞同：0
> 
> 时间：2009-05-29T01:47:08.450
> 
> 标签：visual-c++

我使用 MSVC++ 2005 x64。某些代码在发布优化模式下无法正常工作。所以，我想对该代码进行测试。问题是，我的测试代码仅在调试模式下运行。（我不想在产品代码中混合测试代码。）

那么，我可以在调试版本中声明部分代码编译为发布优化模式吗？例如，像，__asm ...或其他东西... __build_start(Release) int x = 0; .. 做点什么 .. __build_end(Release)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T01:59:44.400

如果有帮助，您可以在文件级别执行此操作。右键单击解决方案资源管理器中的文件 -> 属性 -> c++ -> 优化，然后设置该文件的优化级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T02:03:23.737

Visual Studio 中的“发布优化”并不像您想象的那么简单。这是 VS 优化选项的（可能不完整）列表。它们有很多，所以希望你能在这里找到你想要的。

[http://www-01.ibm.com/support/docview.wss?us=993&uid=swg21265414](http://www-01.ibm.com/support/docview.wss?us=993&uid=swg21265414)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T02:39:34.553

我的第一个嫌疑人不是优化器，而是**带有副作用的调试**。请注意以下事项：

```
 assert( ++i ); // assertions with actions
print_debug( "foo = %d", get_foo()); // function calls that are compiled out
#if _DEBUG
#   speed += 10; // kludges
#else
#   speed += 1000;
#endif 
```

# language-agnostic - 在 Web 表单上输入英制长度测量值

> ID：924047
> 
> 赞同：1
> 
> 时间：2009-05-29T01:48:02.050
> 
> 标签：language-agnostic

我住在澳大利亚，对英制长度测量没有太多了解。

您将如何让用户以 1/64 英寸的精度在 Web 表单上输入英制长度测量值？我想了几种方法，但我不知道是否有标准的方法，美国建筑行业的用户会习惯。

**选项 1** 一个大文本框，然后用户将输入*5'11" 63/64*（5 英尺，11.984375 英寸），然后我将对其进行解析，并以毫米为单位存储在数据库中。

**选项 2** 一个用于英尺的文本框，一个用于英寸的文本框，一个带有 [1/64,1/32,...,63/64] 的下拉框用于英寸的小数部分，然后将其存储在DB 为毫米。

**选项 3** 其他...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T01:51:55.990

出于以下原因，我会选择选项 2。

*   它简化了你的编码（这对我来说很重要，本质上是懒惰的）。
*   它使您可以更好地控制输入的内容。
*   它让用户清楚地知道他们可以输入什么。

如何将其存储在数据库中由您决定。毫米不能完美地描述 64^(英寸)（至少作为整数），但这对你来说可能不是问题。

我自己的想法是，您应该像要求用户输入一样准确地存储内容，如果如您所说，您确实需要精确到 1/64^(英寸)，那么当您将它们放入数据库时​​会丢失该精度当您必须向用户解释时会很好。

您可以执行以下操作之一：

*   将它们存储为 64英寸（这样 5'11" 63/64 变为 5x12x64 + 11x64 + 63，或 1007）^。
*   将它们存储为浮点数（毫米或英寸，由您决定），但在显示它们时将它们转换回英制。
*   将它们存储为三个单独的整数字段，英尺、英寸和 64^(英寸)。

我自己的偏好是第一个。它产生一个简单的整数字段，可以比单独的字段更好地进行索引，不会损失准确性，并且，如果您在将所有应用程序测量值与它们进行比较之前将它们转换为 64^(英寸)（当然，将它们插入其中）数据库，你应该没有问题。

这种转换是一个简单的过程（与公制-英制不同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-30T04:49:13.427

我会选择英尺的文本框和英寸的文本框。允许用户用空格分隔小数英寸。请务必在输入区域附近提供使用示例。例如：

```
[5___] feet, [11 3/4_] inches
Example: [6] feet, [1 1/4] inches 
```

这似乎是自然输入和可解析性之间的一个很好的折衷，因此您不必担心人们用来描绘英尺和英寸的所有可能方法（`ft`、`'`、`f`、`-`等），但人们仍然可以轻松输入任何单位他们请。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-30T06:37:36.347

我赞成 Paul Fisher 的回答，但我还是想提供自己的回答，部分原因是我觉得我有超过 600 个字符的评论要添加。;)

我喜欢他的回答似乎至少与让程序员更容易一样强调让用户变得简单。我相信我们应该尽可能把用户放在第一位。理想情况下，您会制作各种解决方案的模型，并请实际的建筑行业用户（处理英制单位）试用它们并给您反馈，但现在您是在问我们，而不是实际用户，所以。 ..

我也倾向于双字段 UI。就个人而言，我会让解析器同时处理十进制和小数输入（允许“11.25”或“11 1/4”）。当他们选择不是二进制分数的东西时，你必须弄清楚该怎么做，比如 5/7（例如，当他们可能意味着 5/8 时）。

As for storage, I guess you could go with millimeters, as long as it's a float. I'd be more comfortable storing inches, because if your values are all multiples of 64ths of an inch, you shouldn't have rounding issues. I agree with Pax that it's important to be able to give it back to the user in imperial units, complete with reduced fractions. (Maybe it's a big assumption I'm making about the building industry. For all I know, they normalize everything to 64ths, and are happier to see '11 16/64' than '11 1/4'!)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T01:53:33.087

我不知道这是否有资格作为“答案”，但如果我要这样做，我会尝试只提供一个以英尺或英寸为单位的字段，具体取决于预期的范围。

但这可能还不够好，在这种情况下，一个字段为英尺，另一个字段为英寸就足够了。如果有人需要精确，他们可以输入以英寸为单位的小数。

# python - 我们如何设置 Cheetah，使其与模板目录中的所有模板和 .. 目录中的所有代码一起运行

> ID：924051
> 
> 赞同：1
> 
> 时间：2009-05-29T01:48:50.893
> 
> 标签：python, inheritance, web.py, cheetah

我们如何设置 Cheetah，使其与模板目录中的所有模板和 .. 目录中的所有代码一起运行

在代码.py

```
production=True
if not production:
    try:web.render('mafbase.tmpl', None, True, 'mafbase')
    except:pass
else:
    from templates import mafbase 
```

在模板/mafbase.tmpl 和模板/mafbase.py

```
try:web.render('mafbase.tmpl', None, True, 'mafbase') 
```

这可行，但加载速度很慢并导致超时错误

```
from templates import mafbase 
```

这不起作用，异常回溯是：

```
 return self._delegate(fn, self.fvars, args)
  File "/home/mark/work/common/web/application.py", line 411, in _delegate
    return handle_class(cls)
  File "/home/mark/work/common/web/application.py", line 386, in handle_class
    return tocall(*args)
  File "user.py", line 262, in proxyfunc
    return func(self, *args, **kw)
  File "/home/mark/work/pop/code.py", line 1796, in GET
    return web.render('subclass.html')
  File "/home/mark/work/common/web/cheetah.py", line 104, in render
    return str(compiled_tmpl)
  File "/usr/lib/python2.5/site-packages/Cheetah-2.0.1-py2.5-linux-i686.egg/Cheetah/Template.py", line 982, in __str__
    def __str__(self): return getattr(self, mainMethName)()
  File "mafbase.py", line 634, in respond
  File "/usr/lib/python2.5/site-packages/Cheetah-2.0.1-py2.5-linux-i686.egg/Cheetah/Template.py", line 1512, in _handleCheetahInclude
    nestedTemplateClass = compiler.compile(source=source,file=file)
  File "/usr/lib/python2.5/site-packages/Cheetah-2.0.1-py2.5-linux-i686.egg/Cheetah/Template.py", line 693, in compile
    fileHash = str(hash(file))+str(os.path.getmtime(file))
  File "/usr/lib/python2.5/posixpath.py", line 143, in getmtime
    return os.stat(filename).st_mtime
OSError: [Errno 2] No such file or directory: '/home/mark/work/pop/widgetbox.html' 
```

# language-agnostic - 不再显示相对日期的最佳时间距离是多少？

> ID：924057
> 
> 赞同：0
> 
> 时间：2009-05-29T01:50:49.067
> 
> 标签：language-agnostic, datetime, date, time

相对日期可以很好地显示最近活动的时间发生率，但是在多远的距离上用户看到相对日期而不是绝对日期会带来不便？

让我们假设上下文是一个论坛。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T01:51:54.850

对我来说，一周是极限。我不知道有任何工业心理学研究来支持它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T01:55:02.520

我只是将今天和昨天显示为相对日期，就像 facebook 一样。

3天前让我想知道这是哪一天，我觉得很困惑。更不用说 Flickr 的“三个月前”没有任何详细信息 :(

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T01:56:13.017

这与日期相关的任何内容都完全相关。如果它是更新提要（例如您最近的活动），那么按小时显示相对日期可能是个好主意。如果是谈论软件更新的文章，那么几天会更合适......

# asp.net - ASP.Net 绑定到 Gridview 去除一些空格（空白字符）

> ID：924058
> 
> 赞同：2
> 
> 时间：2009-05-29T01:50:53.980
> 
> 标签：asp.net, gridview

我正在从 Oracle 数据库中检索数据并将其绑定到 gridview 控件。

我注意到在某些情况下，列包含单引号或双引号，空格或空白字符会被删除。

Oracle中字段中的一些数据示例：

尽快淘汰'",

检索时，它变成...

尽快淘汰'",

还有一个...

它的测试记录“DDD”FFF

变成

它的测试记录“DDD”FFF

我不知道为什么会这样……

有任何想法吗？

我认为即使在这里，空间也正在被修剪。在我的示例中，第一个字段是：

尽快淘汰'"

单引号后实际上有两个空格，但这里只显示一个空格..奇怪...

单引号空格 空格双引号 --> ' "

我认为 asp.net 正在删除引号或单引号后的额外空格？

我还发现，当我编辑我的网格视图时，多余的空白被保留了，但是当我回到原始视图时，空白就消失了。

重新表述这个问题..

显示数据时如何在gridview中保留WhiteSpace？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-29T02:12:55.870

这不是 ASP.Net 的东西，而是 HTML 解析的东西。如果您要创建一个简单的 Jane HTML 页面，其中包含一个 div 标签，然后在开始标签和结束标签之间放置 100 个空格，它将全部压缩为一个空格。

这是一个经典的网络问题。如果您真的希望所有内容都正确显示，那么您需要对任何空格进行 HTML 编码，然后再将它们显示在页面上。

尝试用`&nbsp;`

这是一篇更深入地解释这一点的文章：[http ://webdesign.about.com/od/beginningtutorials/f/blfaqwhitespace.htm](http://webdesign.about.com/od/beginningtutorials/f/blfaqwhitespace.htm)

**要回答评论中的问题：**

如果您需要对输出到网格的确切内容进行大量控制，即使它是 DataBound，您可以简单地处理在每行绑定后触发的[RowDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)事件。

假设您有一个如下所示的 GridView：

```
<asp:GridView ID="gbGridWithSpaces" AutoGenerateColumns="false" runat="server" 
    onrowdatabound="gbGridWithSpaces_RowDataBound">
    <Columns>
        <asp:BoundField DataField="ItemWithSpaces" HeaderText="Item With Spaces" />
    </Columns>
</asp:GridView> 
```

在您后面的代码中，您可以随意处理事件以重新格式化传出文本。例如：

```
protected void gbGridWithSpaces_RowDataBound(object sender, GridViewRowEventArgs e)
{
    foreach (TableCell cell in e.Row.Cells)
    {
        cell.Text = cell.Text.Replace(" ", "&nbsp;");
    }
} 
```

这将有效地替换所有空格`&nbsp;`并保留它们，即使在呈现给浏览器时也是如此。请记住，您的数据也会以这种方式返回，因此如果您计划将此信息传递回持久存储，则需要在服务器上进行处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T03:06:46.433

如果空格很重要，您可以尝试使用预先格式化的文本元素 <pre> </pre> 标记。

<pre>将尽快淘汰'"</pre>

变成

```
尽快淘汰'"
```

# java - 获取此日历需要什么组件？

> ID：924065
> 
> 赞同：1
> 
> 时间：2009-05-29T01:53:35.330
> 
> 标签：java, netbeans, glassfish

我正在尝试从[这里](http://www.netbeans.org/kb/docs/web/calendar.html)运行日历。

我没有使用 GlassFish 或 JavaServer Faces 组件的经验，所以当我阅读教程说日历应该出现在我的 Palette 上时，我迷失了方向？是我的 Netbeans 调色板还是其他地方？我下载了 GlassFish 并运行了 .jar，但在我的 Netbeans 调色板上看不到任何变化。

单独下载的 Woodstock 组件不应该至少足以让日历出现在调色板上吗？另外，我应该把那个模块放在哪里让它运行？这是一个nbm文件。

编辑：Woodstock 组件现已安装。我如何从调色板管理器中将它放在我的调色板上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T09:30:19.390

您无需下载任何其他组件。日历组件已包含在默认的木料组件中。在 NetBeans 中编辑网页时，您可以在调色板中找到它。如果调色板已关闭，您可以在“窗口 > 调色板”菜单中或按 Ctrl+Shift+8 找到它。日历组件位于“伍德斯托克基础”部分。只需将其从那里拖到您的页面上即可。

如果您想添加打包在 .nbm 模块中的其他组件，以下是 NetBeans 6.5 的说明：

*   只需转到“工具>插件”菜单中的插件对话框
*   转到“已下载”选项卡
*   单击“添加插件...”按钮并找到您下载的模块
*   在列表中选择它，然后按对话框左下角的“安装”按钮

ED：看了你的截图后：

好的，这是您的问题 - 本教程中的日历组件适用于网页。如果您正在开发一个 Swing 应用程序，那么您需要它与 Swing 类似。这个链接可能会对您有所帮助：[netbeans forum](http://forums.netbeans.org/ntopic7995.html)
如果您正在开发 Web 应用程序，那么您做错了。尝试从本教程开始：[webapp 教程](http://www.netbeans.org/kb/docs/web/quickstart-webapps.html)

该调色板是上下文相关的。当您编辑 .jsp 页面以外的内容时，它不会显示 .jsp 网页的组件。这就是为什么您在编辑 .java 文件时看不到该日历的原因。

希望有帮助

# .net - System.UnauthorizedAccessException 来自 VB.NET 中的串行端口

> ID：924070
> 
> 赞同：1
> 
> 时间：2009-05-29T01:54:39.823
> 
> 标签：.net, vb.net, serial-port

我正在使用 VB.NET 2008 Express Edition 访问串行端口，这是一个 USB 到串行端口。由于这是可移动的，因此应用程序用户可以随时在应用程序中断开连接。当我移除 USB 串行端口时，我得到一个未处理的异常。

经过研究，这似乎是 .NET 中的一个已知问题（即使在 3.5 中）

我正在寻找一些解决方案来完成这项工作。我已经尝试过建议的 app.config 解决方案，但它不起作用

这是问题的链接 [http://connect.microsoft.com/VisualStudio/feedback/Validation.aspx?FeedbackID=140018](http://connect.microsoft.com/VisualStudio/feedback/Validation.aspx?FeedbackID=140018)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-29T03:04:57.717

有许多为 .Net 1.1 编写的串行端口库，因为它没有为端口提供内置类。[这](http://www.codeproject.com/KB/dotnet/DotNetComPorts.aspx)是一个例子；还有其他的，开源的和商业的。

您不必使用该框架；如果你使用这样的东西，你将可以访问到 Win32 的代码。你可能有更好的机会以这种方式捕获异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-03-16T10:33:10.700

这在类似的情况下帮助了我，并声称解决了 .NET 中 SerialPort 的各种问题：http: [//zachsaw.blogspot.com/2010/07/net-serialport-woes.html](http://zachsaw.blogspot.com/2010/07/net-serialport-woes.html)

# jquery - 简单的 JQuery ajax 脚本问题

> ID：924072
> 
> 赞同：0
> 
> 时间：2009-05-29T01:55:28.603
> 
> 标签：jquery, ajax

如何让浏览器调用一个 php 页面并每隔 10 秒左右将结果发布到一个 div 中？

谢谢。我只是在学习jquery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T02:02:01.790

您需要定期更新程序。就像是：

```
function callMeAtInterval()
{
     $.ajax({
                   method: 'get',
                   url : 'status.php',
                   dataType : 'text',
                   success: function (text) { $('#updateMe').html(text); }
                });

}
//causes callMeAtInterval() to get called every 5 seconds.
var holdTheInterval = setInterval(callMeAtInterval, 5000); 
```

jQuery 的[$.ajax](http://docs.jquery.com/Ajax)函数获取由**url**指定的资源的输出，并且成功回调允许您对结果进行一些处理，在上面的示例中：

```
('#updateMe').html(text); 
```

`updateMe`用服务器返回的文本填充 id 的页面元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T02:07:12.200

这应该有效：

```
function loadResults(){
  $('div.to.update').load('yourpage.php')
  setTimeOut(arguments.callee, 10000)
}

loadResults() 
```

这个怎么运作：

```
$('div.to.update').load('yourpage.php') 
```

此行对“yourpage.php”进行 ajax 调用，并用该页面的结果填充 div（请注意，调用 yourpage 的结果不应是整个页面，而只是一个片段）

```
setTimeOut(arguments.callee, 10000) 
```

setTimeOut 安排未来的函数调用，在本例中为 10 秒。调用它的函数本身的函数，取自每个函数都可以访问的变量“参数”。这就像一个递归函数，但有 10 秒的延迟。

最后，您第一次调用该函数以启动循环。

编辑：

如果您需要稍后停止循环，您也可以使用 setInterval() 调用该函数，只需执行以下操作：

```
 function loadResults(){
      $('div.to.update').load('yourpage.php')
  }

  var interval_id = setInterval(loadResults,10000)

  // Later on when you want to stop the refresh...

  clearInterval(interval_id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T02:08:40.323

值得注意的是 setInterval 将每 5 秒执行一次此函数（在提供的示例 karim79 中），无论挂起的 AJAX 请求的进度如何。如果第一个请求需要 3 秒才能完成，setInterval 将在 2 秒后发送下一个请求，而不是 5 秒。如果您确实希望在成功刷新和下一个请求之间有 5 秒，您可能希望在`success`回调中使用 setTimeout功能。这看起来像这样：

```
function callMeAtInterval() {
    $.ajax({
       method: 'get',
       url : 'status.php',
       dataType : 'text',
       success: function (text) {
            $('#updateMe').html(text);
            setTimeout(callMeAtInterval, 5000);
            }
    });

} 
```

这种方法的缺点是一个失败的 setTimeout 意味着该部分将不会再次刷新。

# prism - AvalonDock 的 DocumentPane 和 DockingPane 的 Prism2 区域适配器？

> ID：924074
> 
> 赞同：3
> 
> 时间：2009-05-29T01:56:00.630
> 
> 标签：prism, avalondock

有没有人有关于如何为 AvalonDock 的 DocumentPane 和 DockingPane 创建区域适配器的示例代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-10-16T05:38:30.923

Markus Raufer在[CodePlex的](http://www.codeplex.com)[CompositeWpfContrib](http://compositewpfcontrib.codeplex.com/)项目中添加了两个区域适配器，支持和.`DocumentPane``DockingPane`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-05-12T21:07:02.097

我曾使用[Raffaeu Bermuda](http://blog.raffaeu.com/archive/2010/07/04/wpf-and-prism-tab-region-adapter-part-02.aspx)片段来支持 Avalon 选项卡区域适配器，但发现有一些问题没有解决：

1-它不支持激活某个视图（又名 - 选项卡 - DockableContent），因此代码`Region.Activate(object view)`将不起作用。

2- 默认情况下，该地区的所有选项卡都处于活动状态。因此`Region.ActiveViews`默认情况下集合包含所有视图，这并不理想，因为有时我需要验证视图是否处于活动状态（您可以想象工具栏区域上的保存按钮仅在当前活动视图上执行 SaveCommand =在我们的例子中标签）

3-关闭的视图实际上并没有被关闭，只是被隐藏了。即使您`HideOnClose = true`在添加 newDockableContent 时设置了，它仍然不会从`Region.Views`集合中删除。这可能会导致内存泄漏问题。

4- 如果您之前在窗格中添加了 DockableContent，它们将不会同步并添加到 Region.Views 集合中。

所以这里是我现在使用的代码，它只是对 PRISM 源代码中的 Selector Adapter 和 Selector Sync Behavior 的一个小调整：

**AvalonRegionAdapter 类：**

```
public class AvalonRegionAdapter : RegionAdapterBase<DocumentPane>
{
    public AvalonRegionAdapter(IRegionBehaviorFactory factory) : base(factory) {}

    protected override void AttachBehaviors(IRegion region, DocumentPane regionTarget)
    {
        if (region == null) throw new System.ArgumentNullException("region");
        //Add the behavior that syncs the items source items with the rest of the items
        region.Behaviors.Add(AvalonDocumentSyncBehavior.BehaviorKey,
                             new AvalonDocumentSyncBehavior()
        {
            HostControl = regionTarget
        });
        base.AttachBehaviors(region, regionTarget);
    }

    protected override void Adapt(IRegion region, DocumentPane regionTarget){ }

    protected override IRegion CreateRegion()
    {
        return new Region();
    }
} 
```

**AvalonDocumentSyncBehavior 行为代码：**

```
public class AvalonDocumentSyncBehavior : RegionBehavior, IHostAwareRegionBehavior
{
    /// <summary>
    /// Name that identifies the SelectorItemsSourceSyncBehavior behavior in a collection of RegionsBehaviors. 
    /// </summary>
    public static readonly string BehaviorKey = "AvalonDocumentSyncBehavior";
    private bool updatingActiveViewsInHostControlSelectionChanged;
    private Selector hostControl;

    /// <summary>
    /// Gets or sets the <see cref="DependencyObject"/> that the <see cref="IRegion"/> is attached to.
    /// </summary>
    /// <value>
    /// A <see cref="DependencyObject"/> that the <see cref="IRegion"/> is attached to.
    /// </value>
    /// <remarks>For this behavior, the host control must always be a <see cref="Selector"/> or an inherited class.</remarks>
    public DependencyObject HostControl
    {
        get
        {
            return this.hostControl;
        }

        set
        {
            this.hostControl = value as Selector;
        }
    }

    /// <summary>
    /// Starts to monitor the <see cref="IRegion"/> to keep it in synch with the items of the <see cref="HostControl"/>.
    /// </summary>
    protected override void OnAttach()
    {
        bool itemsSourceIsSet = this.hostControl.ItemsSource != null;
        if (itemsSourceIsSet)
        {
            //throw new InvalidOperationException(Resources.ItemsControlHasItemsSourceException);
        }

        this.SynchronizeItems();

        this.hostControl.SelectionChanged += this.HostControlSelectionChanged;
        this.Region.ActiveViews.CollectionChanged += this.ActiveViews_CollectionChanged;
        this.Region.Views.CollectionChanged += this.Views_CollectionChanged;
    }

    private void Views_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (e.Action == NotifyCollectionChangedAction.Add)
        {
            int startIndex = e.NewStartingIndex;
            foreach (object newItem in e.NewItems)
            {
                UIElement view = newItem as UIElement;
                TabViewModel viewModel = ((UserControl)view).DataContext as TabViewModel;
                if (view != null)
                {
                    DockableContent newDockableContent = new DockableContent();
                    newDockableContent.Content = newItem;
                    //if associated view has metadata then apply it.
                    newDockableContent.Title = view.GetType().ToString();
                    if (viewModel != null)
                    {
                        //Image img = new Image();
                        //img.Source = new BitmapImage(new Uri(@"Resources/Alerts.png", UriKind.Relative));
                        newDockableContent.Title = viewModel.TabModel.Title;
                        newDockableContent.IsCloseable = viewModel.TabModel.CanClose;
                        //newContentPane.Icon = img.Source;
                    }

                    //When contentPane is closed remove from the associated region
                    newDockableContent.Closed += new EventHandler(newDockableContent_Closed);

                    newDockableContent.HideOnClose = false; 
                    this.hostControl.Items.Add(newDockableContent);
                    newDockableContent.Activate();
                }
            }
        }
        else if (e.Action == NotifyCollectionChangedAction.Remove)
        {
            foreach (object oldItem in e.OldItems)
            {
                this.hostControl.Items.Remove(oldItem);
            }
        }
    }

    void newDockableContent_Closed(object sender, EventArgs e)
    {
        var dockableContent = sender as DockableContent;
        if(dockableContent != null)
            if (this.Region.Views.Contains(dockableContent.Content))
            {
                this.Region.Remove(dockableContent.Content);
            }
    }

    private void SynchronizeItems()
    {
        List<object> existingItems = new List<object>();

        // Control must be empty before "Binding" to a region
        foreach (object childItem in this.hostControl.Items)
        {
            existingItems.Add(childItem);
        }

        foreach (object view in this.Region.Views)
        {
            this.hostControl.Items.Add(view);
        }

        foreach (object existingItem in existingItems)
        {
            this.Region.Add(existingItem);
        }
    }

    private void ActiveViews_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (this.updatingActiveViewsInHostControlSelectionChanged)
        {
            // If we are updating the ActiveViews collection in the HostControlSelectionChanged, that 
            // means the user has set the SelectedItem or SelectedItems himself and we don't need to do that here now
            return;
        }

        if (e.Action == NotifyCollectionChangedAction.Add)
        {
            var selectedDockableContent = this.hostControl.SelectedItem as DockableContent;
            if (selectedDockableContent != null
                && selectedDockableContent.Content != null
                && selectedDockableContent.Content != e.NewItems[0]
                && this.Region.ActiveViews.Contains(selectedDockableContent.Content))
            {
                this.Region.Deactivate(selectedDockableContent.Content);
            }

            var _UIElement = e.NewItems[0] as FrameworkElement;
            this.hostControl.SelectedItem = _UIElement.Parent;
        }
        else if (e.Action == NotifyCollectionChangedAction.Remove &&
                 e.OldItems.Contains(this.hostControl.SelectedItem))
        {
            this.hostControl.SelectedItem = null;
        }
    }

    private void HostControlSelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        try
        {
            // Record the fact that we are now updating active views in the HostControlSelectionChanged method. 
            // This is needed to prevent the ActiveViews_CollectionChanged() method from firing. 
            this.updatingActiveViewsInHostControlSelectionChanged = true;

            object source;
            source = e.OriginalSource;

            if (source == sender)
            {
                foreach (object item in e.RemovedItems)
                {
                    // check if the view is in both Views and ActiveViews collections (there may be out of sync)
                    var dockableContent = item as DockableContent;
                    if (this.Region.Views.Contains(dockableContent.Content) && this.Region.ActiveViews.Contains(dockableContent.Content))
                    {
                        this.Region.Deactivate(dockableContent.Content);
                    }
                }

                foreach (object item in e.AddedItems)
                {
                    var dockableContent = item as DockableContent;
                    if (this.Region.Views.Contains(dockableContent.Content) && 
                         !this.Region.ActiveViews.Contains(dockableContent.Content))
                    {
                        this.Region.Activate(dockableContent.Content);
                    }
                }
            }
        }
        finally
        {
            this.updatingActiveViewsInHostControlSelectionChanged = false;
        }
    }
} 
```

用于配置适配器的引导程序代码

```
protected override RegionAdapterMappings ConfigureRegionAdapterMappings()
{
    var mappings = base.ConfigureRegionAdapterMappings();
    mappings.RegisterMapping(typeof(AvalonDock.DocumentPane), 
                             this.Container.Resolve<AvalonRegionAdapter>());
    return mappings;
} 
```

然后你需要来自[Raffaeu Bermuda的 TabModel 和 TabViewModel](http://blog.raffaeu.com/archive/2010/07/04/wpf-and-prism-tab-region-adapter-part-02.aspx)

```
public sealed class TabModel : DependencyObject
{
   public string Title
   {
       get { return (string)GetValue(TitleProperty); }
       set { SetValue(TitleProperty, value); }
   }

   // Using a DependencyProperty as the backing store for Title.  This enables animation, styling, binding, etc...
   public static readonly DependencyProperty TitleProperty =
       DependencyProperty.Register("Title", typeof(string), typeof(TabModel));

   public bool CanClose
   {
       get { return (bool)GetValue(CanCloseProperty); }
       set { SetValue(CanCloseProperty, value); }
   }

   // Using a DependencyProperty as the backing store for CanClose.  This enables animation, styling, binding, etc...
   public static readonly DependencyProperty CanCloseProperty =
       DependencyProperty.Register("CanClose", typeof(bool), typeof(TabModel));

   public bool IsModified
   {
       get { return (bool)GetValue(IsModifiedProperty); }
       set { SetValue(IsModifiedProperty, value); }
   }

   // Using a DependencyProperty as the backing store for IsModified.  This enables animation, styling, binding, etc...
   public static readonly DependencyProperty IsModifiedProperty =
       DependencyProperty.Register("IsModified", typeof(bool), typeof(TabModel));

} 
```

以及作为基类的 TabViewModel：

```
public class TabViewModel : INotifyPropertyChanged
{
    private TabModel _tabModel;

    public TabModel TabModel
    {
        get { return this._tabModel; }
        set
        {
            this._tabModel = value;
            OnPropertyChanged("TabModel");
        }
    }
    public TabViewModel()
    {
        this.TabModel = new TabModel();
        this.TabModel.CanClose = true;
        this.TabModel.IsModified = false;
    }
    public event PropertyChangedEventHandler PropertyChanged;
    public void OnPropertyChanged(string info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }
} 
```

如果您需要进一步的帮助，请告诉我，我会在不久的将来发布一个博客。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-11-16T02:53:25.933

由于 Avalon DocumentPane 和 DockingPane 都基于 System.Windows.Controls.Primitives.Selector，您可以在 Prism 中使用默认的 SelectorRegionAdapter。

只需基于 DockableContent 进行控制

```
<ad:DockableContent x:Class="DesignerWPF.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             xmlns:ad="clr-namespace:AvalonDock;assembly=AvalonDock"
             d:DesignHeight="300" d:DesignWidth="300" Title="dans">
    <Grid>
        <TextBox Text="sdfdf"></TextBox>
    </Grid>
</ad:DockableContent> 
```

在您的主 Shell.xmal 上设置可停靠窗格中的区域

```
 <ad:DockingManager x:Name="dockManager" Grid.Row="1" Margin="0,4,0,0">
            <ad:ResizingPanel Orientation="Horizontal">
                <ad:DockablePane cal:RegionManager.RegionName="LeftRegion">

                </ad:DockablePane>
                <ad:DocumentPane cal:RegionManager.RegionName="DocumentRegion">

                </ad:DocumentPane>
            </ad:ResizingPanel>
        </ad:DockingManager> 
```

然后，当您为控件初始化演示者时，它将显示在 Dock 中。

```
public class UserTestControl : IModule
    {
        public UserTestControl(IUnityContainer container, IRegionManager regionManager)
        {
            Container = container;
            RegionManager = regionManager;
        }
        public void Initialize()
        {
            var addFundView = Container.Resolve<UserControl1>();
            RegionManager.Regions["LeftRegion"].Add(addFundView);
        }

        public IUnityContainer Container { get; private set; }
        public IRegionManager RegionManager { get; private set; }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T05:30:35.733

我的建议是查看 Prism 源中的 Microsoft.Practices.Composite.Presentation.Regions。具体来说，看一下 ItemsControlRegionAdapter 并将其用作模板。记得从 RegionAdapterBase<> 继承：

```
public class ItemsControlRegionAdapter : RegionAdapterBase<ItemsControl> 
```

并覆盖引导程序中的 ConfigureRegionAdapterMappings()。这看起来像：

```
protected override RegionAdapterMappings ConfigureRegionAdapterMappings()
{
    RegionAdapterMappings mappings =  base.ConfigureRegionAdapterMappings();
    mappings.RegisterMapping(typeof(Canvas), Container.Resolve<CanvasRegionAdapter>());
    return mappings;
} 
```

# indexing - 新内容怎么可能在创建几分钟后就出现在 Google 结果中？

> ID：924079
> 
> 赞同：2
> 
> 时间：2009-05-29T01:56:52.453
> 
> 标签：indexing, seo

例如，当我在 Stackoverflow 上发帖时，帖子会在一分钟后出现在 Google 索引中。这是如何实现的？我必须对我的网站做些什么才能获得相同的索引频率？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-29T02:03:49.523

你可以开始：

*   在您的网站上吸引 65,000 多名普通用户。
*   使您的网站链接到各地。
*   使您的网站非常活跃。
*   提供*非常*有用的内容。

这都是标准的 SEO 东西，它们会提升你在谷歌眼中的“重要性”（可能还有其他搜索引擎，但谁在乎 :-)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-29T01:59:08.550

页面更改得越快，谷歌重新索引它的次数就越多。显然，如果您的网站对谷歌来说足够“重要”。

您应该在此处查看 Google 网站管理员工具[http://www.google.com/webmasters/tools](http://www.google.com/webmasters/tools)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T02:04:55.527

为了帮助从 Google、Yahoo 和 MS 建立索引，您需要使用该`sitemap`协议，请参阅[http://en.wikipedia.org/wiki/Sitemaps](http://en.wikipedia.org/wiki/Sitemaps)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T02:54:26.580

简而言之，如果您想这样做，首先需要将 Google 机器人引诱到您的站点。

为此，您应该执行以下操作：

1.  建立尽可能多的超链接到排名靠前的、活跃的、相关的网站。

2.  使您自己的网站处于活跃状态。这样，谷歌就认为你的网站值得经常访问！

除此之外，您还可以提供一流的内容和结构（站点地图）。

总结所有这些，您需要在搜索引擎眼中建立一个伟大的网站！

祝你好运！

# encryption - 免费的 SWF 混淆器

> ID：924081
> 
> 赞同：22
> 
> 时间：2009-05-29T01:57:44.107
> 
> 标签：encryption, flash, obfuscation, source-code-protection

有人知道免费的闪存混淆器（保护器）吗？我能找到的都是免费试用的商业版本。我做了很多谷歌搜索，但一直找不到我要找的东西。

我知道混淆器不会使您的 swf 黑客攻击证明，但它们会使事情变得更难。

我在混淆器中寻找的东西：

*   无限混淆
*   没有时间限制
*   无水印（或仅在左侧！右侧不好，与中心相同）
*   能够发表作品（除了标准的flashplayer，不需要特殊的播放器）

我真的很惊讶地发现找到一个好的混淆器是多么困难（也尝试过编码器、保护等）以及找到一个反编译器是多么容易......

必须至少部分保护我的代码，以阻止对我的游戏进行黑客攻击。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-29T02:36:14.730

amayeta swfencrypt - [http://www.amayeta.com/software/swfencrypt/](http://www.amayeta.com/software/swfencrypt/) <= 这个已经存在了很长时间并且是最新的

secureSWF [http://www.kindisoft.com/secureSWF/download.php](http://www.kindisoft.com/secureSWF/download.php) <== 这个没有时间限制，但是有水印

并且由于 actionscript 格式非常像 javascript，您可以使用在线免费的 javascript obfuscator 像这样一个来混淆重要代码的部分 [http://www.javascriptobfuscator.com/Default.aspx](http://www.javascriptobfuscator.com/Default.aspx)

或者您可以在此处搜索更多信息[http://www.google.com/search?q=obfuscator+javascript](http://www.google.com/search?q=obfuscator+javascript)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-04-30T08:39:47.883

我发现：

*   [http://makc3d.wordpress.com/2010/02/09/open-source-swf-obfuscator/](http://makc3d.wordpress.com/2010/02/09/open-source-swf-obfuscator/)
*   [http://github.com/shapebyregret/actionscript-3-obfuscator](http://github.com/shapedbyregret/actionscript-3-obfuscator)
*   [哭泣](http://git.runtimeterror.com/?p=sob.git;a=summary)

全部开源，全部免费。我还没有尝试过任何一个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-29T02:16:46.860

几个月前，一位同事对该主题进行了一些研究，但没有找到任何免费的 SWF 混淆器。我们最终选择了 SWF Encrypt ( [http://www.amayeta.com/software/swfencrypt/](http://www.amayeta.com/software/swfencrypt/) )，它似乎做得很好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-09-12T19:44:59.817

[OBFU](http://tech.motion-twin.com/obfu.html) - 1500 欧元！

[Amayeta SWF 加密 Pro 5.0](http://www.amayeta.com/shop/) - 125 美元。[也被“绕过”](http://www.asvguy.com/2007/02/swf_encrypt_swc.html)

[SecureSWF](http://www.kindisoft.com/secureSWF/) - 看起来是目前最有前途的。

[反编译器和混淆器列表](http://www.bestflashanimationsite.com/resources/decompilers/)

见[http://www.balsamiq.com/blog/2008/10/19/my-views-on-software-piracy/](http://www.balsamiq.com/blog/2008/10/19/my-views-on-software-piracy/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-05T16:15:58.690

我找到了 SWFProtect。它看起来不错，但是您必须对其进行测试才能确定。 [http://www.swfprotect.net/swf2.0/index.php](http://www.swfprotect.net/swf2.0/index.php)

更新：Amayeta SWF Encrypt 第 4 版现已免费提供。 [http://www.amayeta.com/promo/mag/](http://www.amayeta.com/promo/mag/)

# vb.net - 在 Linq-To-Entities 实体 SQL 中处理 ObjectQuery 单枚举挑战

> ID：924091
> 
> 赞同：0
> 
> 时间：2009-05-29T02:01:41.697
> 
> 标签：vb.net, linq-to-entities, enumeration, entity-sql, objectquery

我正在修改[这个](http://msdn.microsoft.com/en-us/library/bb345303.aspx)例子：

```
Using advWorksContext As New AdventureWorksEntities
    ' Call the constructor that takes a command string and ObjectContext.
    Dim productQuery1 As New ObjectQuery(Of Product)("Product", advWorksContext)

    Dim result As Product
    For Each result In productQuery1
        Console.WriteLine("Product Name: {0}", result.Name)
    Next
End Using 
```

一个 ObjectQuery 只能被枚举一次。（随后的枚举尝试会引发异常。）枚举发生在 for each 语句中。问题是，如果查询为空，则尝试 For Each 将引发异常。但是，如果我检查计数：

```
If productQuery1.Count > 0 Then . . . 
```

这耗尽了我列举的一次机会。我可以将 For Each 嵌套在 try/catch 块中并丢弃空查询异常，但这很难看。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T05:20:38.920

如果您`ToList()`在查询的末尾添加一个调用，您应该能够尽可能频繁地枚举结果。

# entity-framework - EF4 - 添加博客条目抱怨个人资料？

> ID：924093
> 
> 赞同：0
> 
> 时间：2009-05-29T02:02:23.550
> 
> 标签：entity-framework

我必须管理这有点有趣，即使我认为我理解为什么 :) 我创建了一个 UnitTest 来添加一个博客条目来尝试 Alex 关于我的继承问题的建议。现在我遇到了另一个。

```
[TestMethod]
public void UserCanAddBlogEntry()
{
    var context = new EntityContext(Options.LazyLoading);

    var user = (from u in context.Users
                    .Include("Blog.BlogEntries")
                where u.Id == 1
                select u).FirstOrDefault();

    BlogEntry entry = new BlogEntry();
    entry.Header = "Test Entry";
    entry.Text = "Test Text blah blah blah";
    entry.CreatedAt = DateTime.Now;
    entry.Blog = user.Blog;

    user.Blog.BlogEntries.Add(entry);
    context.SaveChanges();

    Assert.IsTrue(user.Blog.BlogEntries.Count > 0);
} 
```

导致异常：

> 失败的 UserCanAddBlogEntry Zirzle.UnitTests
> 测试方法 UserCanAddBlogEntry 抛出异常：System.InvalidOperationException：在“配置文件”类型的实体的导航属性“用户”中检测到无效的关系修复。

不知道这张图片有什么问题。如果我在获取查询中添加 .Include("Profile") 则保存更改不再抱怨。我尝试为配置文件添加 0.1 关系结束，但这也没有成功。有什么建议么？我想堆栈溢出个人 EF 专家可能有一个解释:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T03:26:50.823

嗯，这个很有趣。

我假设这`Blog.BlogEntries`是相反的`BlogEntry.Blog`

我还假设所有类的所有属性都是虚拟的，因此 EF 可以代理这些类。

鉴于这些假设，一些对象将被代理（`user`和`user.Blog`），因为`ObjectContext`它们是构建的，而一些不会被代理（`entry`），因为您自己创建了它们。

代理类自动进行修复，即保持关系的两端同步

所以在代理 user.Blog 上这样做：

```
user.Blog.BlogEntries.Add(entry) 
```

将自动设置`entry.Blog`为`user.Blog`同时为您保持两个关系同步。

另一方面，因为`entry`没有代理这个：

```
entry.Blog = user.Blog 
```

不会做修复。

所以在这段代码中，你实际上是在做两次修复的一半。我们可能应该优雅地处理这种情况，但显然我们不是，我会和团队讨论这个问题。

说了这么多，我建议你做一些更简单的事情：

```
// notice there is no need to get the User just the users blog
var blog = (from u in context.Users
           where u.Id == 1
           select u.Blog).Single(); 
```

并这样做：

```
BlogEntry entry = new BlogEntry();
entry.Header = "Test Entry";
entry.Text = "Test Text blah blah blah";
entry.CreatedAt = DateTime.Now;
entry.Blog = blog;
//because BlogEntry inherits from Post if I remember your model
context.Posts.Add(entry); 
context.SaveChanges(); 
```

这应该有效。

亚历克斯

# javascript - 如何使用javascript从stackoverflow页面中获取用户编号？

> ID：924094
> 
> 赞同：0
> 
> 时间：2009-05-29T02:03:15.903
> 
> 标签：javascript, screen-scraping

我正在尝试设置一个页面（如果它是堆栈溢出的一部分）将生成一个 Stackoverflow Flair Blogger 小工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-29T03:03:12.070

我不完全理解你的问题。

如果您必须使用 javascript 从该页面检索用户号码，您应该解析 #hlinks 的第一个 a 元素的 href 属性。例如，我的是“/users/recent/112870”，其中 112870 是我的用户号。

可能还有其他方法可以做到这一点，这是我想到的第一个方法。

# iphone - 生成动态html

> ID：924098
> 
> 赞同：0
> 
> 时间：2009-05-29T02:04:31.800
> 
> 标签：iphone

如何在 iphone 中生成动态 html 代码，如下所示：

```
NSString sHtml = @"<html><form name= \"PIOform\" >\ 
                            <input type=\"text\" name=\"txtUserName\" >\
                            <input type=\"text\" name=\"txtPassWord\" >\
                         </form>\
                         <input type=\"button\" onclick=\"goCallLogin(PIOform)\" >
                   </html>"; 
```

是的，我想创建一个 UI iphone 应用程序，其功能类似于客户端 HTML 表单以在任何服务器中调用 javascript 方法：当我单击 iphone 中的按钮时。它将在地址：http;//www.myserver.com/login.js 中调用 JS 中的 goCallLogin(PIOform) 方法

我能怎么做？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T02:33:17.950

这似乎比原生应用更适合 iPhone Web 应用。也许你应该考虑这样做？无需使用本机应用程序创建这样的 HTML。如果您想从本机应用程序向远程服务器发送值，请查看编写 Web 服务并从 iPhone 访问它。您可以使用 REST 或 XML-RPC 来激活`goCallLogin`您所指的方法。

此外，您不能只通过 Web 浏览器调用 javascript 并期望它能够工作。Javascript 是一种客户端技术。您需要考虑使用服务器端语言/框架（如 PHP、Ruby on Rails、ASP.NET 等）编写 Web 服务。

# ms-access - MS Access 通过文本框而不是下拉列表搜索记录

> ID：924101
> 
> 赞同：7
> 
> 时间：2009-05-29T02:05:34.840
> 
> 标签：ms-access

我对 MS Access 很陌生。我正在尝试创建一个简单的表单，该表单基本上将使用文本框而不是下拉框搜索特定记录。本质上，用户将能够输入 ID 号并检索一些其他相关信息。但是，我不希望用户能够向数据库添加任何新记录。我已经能够让表单看起来像我想要的那样，但我不确定在哪里放置代码（我是否创建一个宏，将代码插入按钮的属性中？）任何帮助都很大赞赏！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-29T07:05:06.437

我假设您已将表单绑定到表或查询，并且您希望能够在文本框中手动输入 ID，然后按 ENTER 并加载该记录的数据或在没有此类记录时显示错误消息。

正如[dsteele](https://stackoverflow.com/questions/924101/ms-access-search-for-record-by-textbox-instead-of-dropdown/924183#924183)所说，确保表单的 Data 属性*Allow Addtions*设置`No`为禁止用户添加记录。

然后，从`AfterUpdate`文本框的事件中，添加以下代码（假设您的文本框名为`txtGoTo`）：

```
Private Sub txtGoTo_AfterUpdate()
    If (txtGoTo & vbNullString) = vbNullString Then Exit Sub
    Dim rs As DAO.RecordSet
    Set rs = Me.RecordsetClone
    rs.FindFirst "[ID]=" & txtGoTo
    If rs.NoMatch Then
        MsgBox "Sorry, no such record '" & txtGoTo & "' was found.", _
               vbOKOnly + vbInformation
    Else
        Me.RecordSet.Bookmark = rs.Bookmark
    End If
    rs.Close
    txtGoTo = Null
End Sub 
```

请注意，您必须将行更改`rs.FindFirst "[ID]=" & txtGoTo`为适合您的数据的内容：

*   `"[ID]="`应替换为您要搜索的字段（可能是`"[POReference]="`或其他。

*   如果您通过数字 ID 进行搜索，例如因为该字段是自动编号列，那么代码就可以了。
    否则，如果您要搜索的字段是一个字符串（比如`PN12-G`），那么您必须将代码更改为：

    ```
    rs.FindFirst "[ID]=""" & txtGoTo & """" 
    ```

未能使用正确的引用（或在不必要的情况下引用）将导致*数据类型不匹配...类型*的错误。

作为新用户，我建议您查看示例*NorthWind*项目数据库，该数据库可以随旧版本的 Access 一起提供，也可以作为模板从 Access 2007 下载。
有很多技术可以作为新手学习访问开发人员，包括实现记录导航的其他方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T02:43:06.277

1.  将表单属性 Data/'Allow Additions' 设置为 No。
2.  无论是在文本框的 AfterUpdate 事件中，还是在按钮的 Click 事件中，您都可以编写代码或分配一个宏来查找并显示您想要的记录。

# visual-studio-2005 - 如何在 Visual Studio 2005 中打开括号匹配？

> ID：924102
> 
> 赞同：0
> 
> 时间：2009-05-29T02:05:37.180
> 
> 标签：visual-studio-2005

如何在 Visual Studio 2005 中打开括号匹配？

这与编程有关，因为有很多打开/关闭括号......并且括号匹配可以大大加快速度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T03:48:39.917

对我来说，Visual Studio (2008) 会自动为 C# 执行此操作，但不适用于 C++。

要在 C++ 中获得括号匹配，我必须启用 Visual Assist。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T04:04:41.310

在开始或结束括号上调用以下键盘快捷键应该跳转到匹配的那个：

`Ctrl`-`]`

如果它们无与伦比，您应该能够很快发现这一点。

我不需要在 VS2005 中启用任何东西来使用这个功能。

# network-programming - 易于编写脚本来测试网络是否在接下来的 24 小时内关闭？

> ID：924106
> 
> 赞同：0
> 
> 时间：2009-05-29T02:07:17.567
> 
> 标签：network-programming

编写一个脚本来测试网络在接下来的 24 或 48 小时内是否出现故障是否容易？我可以使用 ssh 连接到 shell 并在 48 小时后回来查看它是否仍然连接以查看网络是否曾经关闭，但我可以通过编程轻松地做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T02:31:32.820

如果您的需求本质上更具管理性，并且可以选择使用现有软件，您可以尝试类似 monit：

```
http://mmoni.com/monit/

```

维基百科有一个类似软件的列表：

```
http://en.wikipedia.org/wiki/Comparison_of_network_monitoring_systems

```

您还应该考虑是否需要检测非常短的中断。显然，定期可达性测试不能保证检测到比测试间隔更短的中断。

如果您只关心是否存在中断，而不关心有多少或它们持续了多长时间，那么您应该能够很容易地`ssh`使用现有技术来自动化您的现有技术。`expect`

```
http://expect.nist.gov/

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T02:47:51.760

Internet（和您的以太网）是一个分组交换网络，这使得“关闭”的定义变得困难。

有些事情是显而易见的；例如，如果您的以太网卡没有报告链接，则它已关闭（除非您有冗余连接）。但有一个链接并不意味着它的存在。

Internet 工作原理的基本 100 英里视图是，您的计算机将它想要发送的数据拆分为大约 1500 字节的段，称为数据包。然后，它几乎盲目地将它们发送到他们的路上，但是你的路由表说的。然后那台机器重复这个过程。最终，通过多次重复，它到达了远程主机。

因此，您可能很想将数据包定义为*到达**其目的地*。但是，如果数据包被破坏，例如由于硬件故障或干扰，会发生什么？下一个路由器将丢弃它。好的，没关系，您可能想考虑一下。如果路径上的路由器太忙，或者需要发送它的链路已满怎么办？数据包将被丢弃。你可能不想把它算作倒数。

数据包经常丢失；更高级别的协议（例如 TCP）处理它并重新传输数据包。事实上，TCP 使用链路满时丢包行为来发现链路带宽。

正如其他答案所述，您可以使用 ping 等工具监控数据包丢失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T02:17:49.980

大多数平台都支持一个`ping`命令，该命令可用于确定网络路径是否存在于“其他”某处的 IP 地址。究竟在哪里检查取决于您真正想要回答的问题。

如果目标是发现连接到 ISP 网络的第一跳的可靠性，那么定期 ping 路由器或其 DNS 可能就足够了。

如果您真正关心的是与单个节点的连接（您提到保持`ssh`会话打开意味着这一点），那么仅 ping 该节点可能是最好的主意。该`ping`命令通常会以脚本可以测试连接是否超时的方式失败。

无论如何，以不超过每分钟一次的速度检查可能是一个好主意，并且比这慢可能就足够了。

# winforms - 从另一个线程更新进度条

> ID：924108
> 
> 赞同：3
> 
> 时间：2009-05-29T02:09:57.547
> 
> 标签：winforms, multithreading, visual-studio-2005

我在主线程上有一个窗口窗体，另一个线程进行一些计算。我想从另一个线程中完成的工作更新我表单上的状态栏。最好的方法是什么？

到目前为止，我尝试过的所有事情都让事情运行得很慢。我正在使用 Visual Studio 2005。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T00:33:02.473

您可以使用编组技术，例如`Control.Invoke`在 UI 线程上执行委托，从而可以安全地操作 UI 元素，但这种方法不是很好。实际上，如果您只想更新简单的进度信息，这是一种糟糕的方法。

到目前为止，最好的方法是：

*   让您的工作线程将进度信息发布到共享变量。
*   让您的 UI 线程`System.Windows.Forms.Timers`在适合您的时间间隔内对其进行轮询。

这是它可能的样子。

```
public class Example : Form
{
  private volatile int percentComplete = 0;

  private void StartThreadButton_Click(object sender, EventArgs args)
  {
    StatusBarUpdateTimer.Enabled = true;
    new Thread(
      () =>
      {
        for (int i = 1; i <= 100; i++)
        {
          DoSomeWork();
          percentComplete = i;
        }
      }).Start();
  }

  private void StatusBarUpdateTimer_Tick(object sender, EventArgs args)
  {
    yourStatusBarPanel.Text = percentComplete.ToString() + "%";
    StatusBarUpdateTimer.Enabled = percentComplete < 100;
  }
} 
```

这很好用，因为：

*   percentComplete 字段被声明为“volatile”，确保可以从多个线程中可靠地读取其值。
*   UI 线程可以决定 UI 更新的时间和频率……它应该是这样的！
*   工作线程不必等待 UI 线程的响应就可以继续，就像`Invoke`.
*   它打破了 UI 和工作线程之间的紧密耦合`Invoke`。
*   它更有效......相当多。
*   您可以在 UI 和工作线程上获得更多吞吐量。
*   UI 消息队列不会像`BeginInvoke`.
*   `Invoke`每次需要从工作线程更新 UI 时，您不必在代码中乱扔垃圾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T02:29:29.173

确保你只从主线程更新用户界面，否则你会遇到问题。您可以通过调用 Invoke 来切换线程上下文。[这里](http://blogs.msdn.com/csharpfaq/archive/2004/03/17/91685.aspx)有一个很好的帖子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T02:31:49.467

您可以向主线程发送消息并让它更新进度条，尽管您随后需要检查消息。你也可以做与轮询函数相同的事情。

# c# - 递增字母

> ID：924109
> 
> 赞同：5
> 
> 时间：2009-05-29T02:11:06.920
> 
> 标签：c#, alphabet

我正在尝试创建一个函数，该函数将在传递索引时为我提供字母位置。它将与 excel 如何显示它的列相同。A...Z, AA,AB.... 我写了下面的函数来得到 Z 的结果。它看起来像

```
static string GetColumnName(int index)
{
    const int alphabetsCount = 26;
    if (index <= alphabetsCount)
    {
        int code = (index - 1) + (int)'A';
        return char.ConvertFromUtf32(code);
    }
    return string.Empty;
} 
```

这工作正常，直到'Z'。如果我通过 1 则返回“A”，如果通过 2 则返回“B”，依此类推。但是，当我将 27 传递给这个函数时，我无法弄清楚我将如何获得 AA。我想我需要一种递归方法来找到它。

对这个问题的任何投入都会很棒！

**编辑**

这是 Tordek 建议的。但是他的代码会在 52、78 等数字上失败。为此添加了解决方法，这是最终的工作代码。

```
static string GetColumnName(int index)
{
    const int alphabetsCount = 26;

    if (index > alphabetsCount)
    {
        int mod = index % alphabetsCount;
        int columnIndex = index / alphabetsCount;

        // if mod is 0 (clearly divisible) we reached end of one combination. Something like AZ
        if (mod == 0)
        {
            // reducing column index as index / alphabetsCount will give the next value and we will miss one column.
            columnIndex -= 1;
            // passing 0 to the function will return character '@' which is invalid
            // mod should be the alphabets count. So it takes the last char in the alphabet.
            mod = alphabetsCount;
        }
        return GetColumnName(columnIndex) + GetColumnName(mod);
    }
    else
    {
        int code = (index - 1) + (int)'A';
        return char.ConvertFromUtf32(code);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-29T02:33:24.970

任何递归函数都可以转换为等效的迭代函数。我发现首先递归思考总是很容易：

```
static string GetColumnName(int index)
{
    const int alphabetsCount = 26;

    if (index > alphabetsCount) {
        return GetColumnName(index / alphabetsCount) + GetColumnName(index % alphabetsCount);
    } else {
        int code = (index - 1) + (int)'A';
        return char.ConvertFromUtf32(code);
    }
} 
```

可以简单地转换为：

```
static string GetColumnName(int index)
{
    const int alphabetsCount = 26;
    string result = string.Empty;

    while (index > 0) {
        result = char.ConvertFromUtf32(64 + (index % alphabetsCount)) + result;
        index /= alphabetsCount;
    }

    return result;
} 
```

即便如此，听乔尔的话。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-29T02:26:15.610

请参阅此问题：
[将列索引转换为 Excel 列名](https://stackoverflow.com/questions/297213/translate-an-index-into-an-excel-column-name)

或者这个：
[如何将列号（例如 127）转换为 excel 列（例如 AA）](https://stackoverflow.com/questions/181596/how-to-convert-a-column-number-eg-127-into-an-excel-column-eg-aa#182924)

虽然第一个链接在顶部有一个正确的答案，而第二个链接有几个不正确的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T02:20:48.723

递归是一种可能性——如果`index > 26`您`index % 26`在此调用中处理并将其连接到递归调用上`index / 26`。然而，迭代通常更快，并且不难安排像这样的简单情况。在伪代码中：

```
string result = <convert `index % 26`>
while index > 26:
  index = index / 26
  result = <convert `index % 26`> + result
return result 
```

之类的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T02:24:39.683

```
静态字符串 GetColumnName(int index)
{
    常量 int 字母计数 = 26;
    字符串结果 = '';

    如果（索引 >= 字母计数）
    {
        结果 += GetColumnName(index-alphabetsCount)
    }
    返回（字符串）（64 + 索引）；
}

```

我的 C# 很糟糕而且很生锈。将此解释为伪代码 - 它几乎肯定不会编译，但可能会让您入门。

# iphone - 主线程的 NSRunLoop 在辅助线程中被引用

> ID：924112
> 
> 赞同：5
> 
> 时间：2009-05-29T02:11:49.880
> 
> 标签：iphone, objective-c, cocoa, cocoa-touch, multithreading

我最近刚刚在尝试一个示例应用程序，试图让我的头脑完全理解`NSRunLoop`。我编写的示例通过`NSOperation`. 辅助线程执行一些任务，例如处理 an`NSTimer`以及一些基本的流式传输`NSStream`。这两个输入源都需要正确配置`NSRunLoop`才能执行。

我的问题是这个。最初我在辅助线程中有一些看起来像这样的代码：

```
NSRunLoop* myRunLoop = [NSRunLoop currentRunLoop];
self.connectTimer = [NSTimer scheduledTimerWithTimeInterval:connectTimeout
                                                     target:self
                                                   selector:@selector(connectionConnectedCheck:)
                                                   userInfo:nil 
                                                    repeats:NO];

[myRunLoop addTimer:self.connectTimer forMode:NSDefaultRunLoopMode]; // added source here
[myRunLoop run];

[NSStream getStreamsToHostNamed:relayHost port:relayPort inputStream:&inputStream outputStream:&outputStream];
if ((inputStream != nil) && (outputStream != nil))
{
    sendState = kSKPSMTPConnecting;
    isSecure = NO;

    [inputStream retain];
    [outputStream retain];

    [inputStream setDelegate:self];
    [outputStream setDelegate:self];

    [inputStream scheduleInRunLoop: myRunLoop //[NSRunLoop currentRunLoop]  
                                    forMode:NSRunLoopCommonModes];
    [outputStream scheduleInRunLoop: myRunLoop //[NSRunLoop currentRunLoop] 
                                    forMode:NSRunLoopCommonModes];

    [inputStream open];
    [outputStream open];

    self.inputString = [NSMutableString string];

    return YES;
} 
```

现在，使用上面的代码，事件将永远不会处理。不上`currentRunLoop`。之后我做了一些可怕的事情，因为这只是一个教育练习，并将其修改为在`NSRunLoop` `mainRunLoop`. 像魔术一样工作。但是，我几乎可以肯定，根据我的主线程，辅助线程中的运行循环处于 10 个不同级别的*错误*。

所以我的问题分为两部分，我希望没关系。

1.  我为了让辅助线程运行并通过运行循环响应事件而应用的小“黑客”可能会出现什么问题？

2.  配置辅助线程以侦听所有基于事件/计时器的源的正确方法是什么，所以我不必执行第 1 步。

感谢大家的洞察力。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-01T06:45:21.967

以相反的顺序回答您的问题：

`2`. 你有两个问题。的文档`-[NSRunLoop run]`说：

> 如果没有输入源或计时器附加到运行循环，则此方法立即退出；否则，它 `NSDefaultRunLoopMode`通过重复调用来运行接收器`runMode:beforeDate:`。换句话说，此方法有效地启动了一个无限循环，该循环处理来自运行循环的输入源和计时器的数据。

因此，使用您的线程自己的运行循环，可能没有为运行循环定义输入源，因此它会立即返回。如果有，您的运行循环将无限循环，并且在那之后的其余代码永远不会被执行。

为了让事情正常工作，你的运行循环首先需要有一些输入源，然后需要定期运行以检查事件。请注意，您不想使用`[NSRunLoop run]`，因为您将永远无法获得控制权。相反，我建议在它不断运行运行循环之前设置一个循环`return YES`，直到线程被取消，或者直到你完成流数据。这将允许运行循环在数据到达时对其进行处理。像这样的东西：

```
while (!done) {
    [myRunLoop runUntilDate:[NSDate dateWithTimeIntervalSinceNow:1]];
} 
```

`[NSRunLoop runUntilDate:]`处理事件直到指定日期，然后将控制权返回给您的程序，以便您可以做任何您想做的事情。

`1`. 它正在工作，因为您的主线程的运行循环**正在**定期运行，因此正在处理事件。但是，如果您的主线程被阻塞，您的数据将停止到达。如果主线程正在等待来自第二个线程的数据，这可能会特别糟糕。此外，NSRunLoop 不是线程安全的：

> 警告：NSRunLoop 类通常不被认为是线程安全的，它的方法只能在当前线程的上下文中调用。你永远不应该尝试调用在不同线程中运行的 NSRunLoop 对象的方法，因为这样做可能会导致意外结果。（来自 NSRunLoop 文档。）

Apple 的 Threading Programming Guide 有一节题为[Run Loop Management](http://developer.apple.com/DOCUMENTATION/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html#//apple_ref/doc/uid/10000057i-CH16-SW25)，它在一定程度上解释了所有这些。这不是我读过的最清晰的文档，但如果您正在使用运行循环，那么它是一个很好的起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T03:04:04.893

你还记得运行 runloop 吗？

```
[[NSRunLoop currentLoop] run] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T14:56:10.150

首先，该`scheduledTimer...`方法应该自动将计时器添加到当前运行循环中。如果您使用初始化程序`addTimer:`创建了计时器，则只需要使用该方法。`initWithFireDate...`我怀疑两次添加计时器会导致问题，但这是有可能的。

在没有更多事件源或显式退出循环之前，该`run`方法不应该返回。`NSRunLoop`这意味着您需要在调用*之前*`run`安排任何事件源。将您的`[myRunLoop run]`调用移至代码示例的最后。（另外，显然，消除`return`声明）

底线是，如果`[NSRunLoop run]`正在返回，那么您没有安排事件源。使用调试器单步执行代码。如果您看到它在通话后取得进展`[NSRunLoop run]`，则可以确定您的输入源有问题。

# xcode - 是否有任何 opengl 示例以便我可以在 MacOS 上运行？

> ID：924114
> 
> 赞同：5
> 
> 时间：2009-05-29T02:12:24.140
> 
> 标签：xcode, macos, opengl

是否有任何 opengl 示例以便我可以在 MacOS 10.5.5 上运行？如果有一个带有 opengl 示例的 XCode 项目？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T23:40:28.310

看看这些。他们不容易找到:)

*   [示例 1](https://developer.apple.com/library/mac/#samplecode/GLEssentials/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010104)
*   [示例 2](https://developer.apple.com/library/mac/#samplecode/GLSLBasicsCocoaDL/Introduction/Intro.html#//apple_ref/doc/uid/DTS10004403)
*   [示例 3](https://developer.apple.com/library/mac/#samplecode/CocoaGL/Introduction/Intro.html#//apple_ref/doc/uid/DTS10004501)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-29T02:35:52.097

Nehe 教程将在 OS X 上运行。滚动到每个教程的底部，您将看到大约十几种平台/语言/IDE 的下载链接，其中之一是 OS X/Objective-C/Cocoa。

[http://nehe.gamedev.net/](http://nehe.gamedev.net/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-29T02:13:53.230

/Developer/Examples/OpenGL 中有一堆。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-29T02:33:24.283

除了 Brad 提到的 XCode 附带的示例外，Aaron Hillegass 的*Cocoa Programming for Mac OS X*一书中还有一个 OpenGL 示例。该书中的所有源代码都[可供下载](http://www.bignerdranch.com/products.shtml)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-29T10:03:37.933

我推荐 /Developer/Examples/OpenGL/GLUT

通过使用 GLUT 学习 openGL，您可以非常轻松地从互联网上复制/粘贴任意 openGL 代码，并使其正确编译和运行。（假设它也是基于 GLUT 的——但那里有很多……）

迪特里希是对的，这些教程非常有价值，但对我来说，如果不是特定于 windows-windoze 平台上的游戏的话，它们中的许多都太面向游戏了。

当然，不要忽视： [openGL.org 代码示例和教程页面](http://www.opengl.org/code/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-08-05T08:38:20.407

[Mac OS X 参考库](http://developer.apple.com/mac/library/navigation/index.html?section=Resource+Types&topic=Sample+Code)中有很多示例代码，演示 OpenGL 和其他代码，其中包括所需的所有 XCode 项目文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-19T06:25:52.350

[Impromptu](http://impromptu.moso.com.au/downloads.html)是一个处理 openGL 的实时编码环境，请查看这个温和的 [教程](http://homepage.mac.com/digego/opengl_one.mov)。

此外，Impromptu 与 Mac 音频单元和摄像头挂钩，是一个很棒的原型设计环境。

它确实使用了 Scheme，一种可能没有那么广泛传播的语言；但它允许您一次构建您的程序一行。

# wcf - 向 SharePoint 2007 提供 ASP.Net 3.5 功能的可支持选项有哪些？

> ID：924119
> 
> 赞同：1
> 
> 时间：2009-05-29T02:14:38.330
> 
> 标签：wcf, sharepoint, asp.net-3.5

我想利用 SharePoint 2007 中的一些 ASP.NET 3.5 功能。特别是，我想执行以下操作：

*   通过 HTTP 提供 REST 和 JSON，以便其他产品可以使用 SharePoint 内容。
*   在 SharePoint 中提供 AJAX Web 部件。这些可能几乎没有服务器端控件。大多数内容将使用 Javascript 加载，并通过提供 REST 或 JSON 的 HTTP 访问外部系统（主要不是 SharePoint）。
*   将此功能作为产品提供。这不是单一实现的一次性解决方案。

我主要担心的是 IT 组不想改变他们的 SharePoint 环境以允许产品工作的回击。所以，我更愿意说我正在做的是“微软支持”，但我不确定情况是否如此。

我意识到我可以在 SharePoint 服务器上为向外部应用程序提供 SharePoint 数据的 WCF 端点创建一个单独的（非 SharePoint）网站。我宁愿不这样做，因为这对我的 Web 部件（如果他们需要帮助）没有帮助，而且会使部署更加困难。正确的 SharePoint 部署将自动让 SharePoint 更新添加到场的任何新 Web 前端上的所有必要文件（例​​如 web.config），这不会遵循该模式。此外，我将失去使用 SPContext.Current 的能力。

我已经阅读了 Daniel Larson 的很多[关于在 Microsoft 平台上开发面向服务的 AJAX 应用程序](http://www.microsoft.com/learning/en/us/books/12793.aspx)的书（很好读，顺便说一句），尤其是。第 11 章关于扩展 SharePoint。他概述了 WCF、ASMX 和 HTTP 处理程序选项，并且在很大程度上推荐了 HTTP 处理程序选项。似乎 HTTP 处理程序选项对 web.config 的更改很小。

我还看到了有关[SharePoint 作为 WCF 主机](http://blah.winsmarts.com/2008-5-SharePoint_as_a_WCF_Host.aspx)、[SharePoint 2007 和瘦 .NET 3.5 开发模型](http://www.devx.com/codemag/Article/40508/1763)、[如何：在 SharePoint 环境中启动和运行 .NET 3.5](http://www.zimmergren.net/archive/2008/09/22/how-to-get-up-and-running-with-net-3-5-in-your-sharepoint-environment.aspx)以及[在 SharePoint 2007 站点中启用 .NET 3.5 的博客，懒惰的方式](http://weblogs.asp.net/jan/archive/2008/10/10/enabling-net-3-5-in-sharepoint-2007-sites-the-lazy-way.aspx)。[以及SharePoint 2007 Features CodePlex Project](http://features.codeplex.com)中的“Silverlight (.NET 3.5) Config Feature”（甚至可能是“Ajax.Config Feature”）。似乎所有这些选项都对 web.config 做了一些相当大的更改，潜在客户可能无法接受。

对此有何看法？如果我想使用[AJAX 控件工具包](http://www.asp.net/ajax/ajaxcontroltoolkit/samples/)（我以前在 SharePoint 中使用过，但已经有一段时间了）怎么办？

请注意，如果有帮助，我们可能需要 SharePoint SP2，但我认为没有。

另请注意，Silverlight 不是 SharePoint Web 部件的要求，但允许它可能会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T09:00:24.207

您的第一点可以通过 SharePoint Web 服务的自定义包装器来解决，呈现您想要呈现的 API，而不是通用 Web 服务。

您的第二点，启用 AJAX 的页面和 Web 部件，已经成为可能 -[如何在 SharePoint 中启用 AJAX。](http://sharepoint.microsoft.com/blogs/mike/Lists/Posts/Post.aspx?ID=3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-30T06:18:12.610

SharePoint 支持 .NET 3.5（我相信从 SP1 开始），但是您将无法摆脱对 web.config 进行更改并在服务器上安装 .NET 3.5 - 它可能只有在已经有 AJAX 的情况下才会存在正在使用的 Web 部件。

除此之外，您正在查看的内容在很大程度上独立于 SharePoint - 如果您可以将某些内容构建为 aspx 页面或 asmx Web 服务，您应该能够将其部署到 SharePoint 网站。

如果您想完全避免 3.5 安装问题，您应该能够构建完全独立的东西 - 用于 Web 部件（不需要服务器端组件）的 jQuery 和从共享点获取数据的东西，可以将标准 Web 服务的调用转换为更友好的界面。

# agile - 有人用看板吗？

> ID：924121
> 
> 赞同：10
> 
> 时间：2009-05-29T02:16:26.113
> 
> 标签：agile, methodology, kanban

是否有人将看板（或 scrumban）用于敏捷管理实践？您对看板的体验如何？它如何在依赖瀑布项目的大型复杂环境中工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-07-14T22:28:45.240

我知道 BBC 广泛使用它。有关详细信息，请参阅 David Joyce 的博客 [http://leanandkanban.wordpress.com/](http://leanandkanban.wordpress.com/)

他在那里有一个相当大的幻灯片可以筛选。

我认为关于精益思想要记住的一点是，你必须将价值流作为一个整体来考虑。虽然您可以使用看板等技术对开发团队进行超级优化，但更重要的是结合上游（管理/分析）和下游（QA/部署/支持）以充分获得回报。

因此，要问这如何适合瀑布或复杂过程（超出您的个人影响），这不是一个正确的问题。更重要的问题是问我如何才能开始影响整个价值流。我知道这听起来像是宗教精益狂热的开始，但它是你将如何实现精益流程真正价值的方式。

例如，考虑一个典型项目的以下场景：

*   分析时间：18个月
*   开发时间：9个月
*   QA&发布时间：4个月
*   客户采用和返工：12 个月

总计：43 个月

如果将精益应用到开发过程中，您将提高 100%，即 4.5 个月的开发时间，带来新的总计 38.5 个月。然后，您仅将总价值流增加了 10% 以上……微不足道！

你需要开始战斗，将精益思想传递给高层管理人员，并展示真正成功的地方......这就是重新设计整个过程。

请记住，精益不是一个开发过程，它可以应用于业务的各个方面。

一些关于如何在开发团队之外进行讨论的有趣书籍包括：

*   [精益思维](http://www.amazon.co.uk/Lean-Thinking-Banish-Create-Corporation/dp/0743231643/ref=sr_1_1?ie=UTF8&s=books&qid=1247610205&sr=1-1)
*   [超出预算](http://www.amazon.co.uk/Beyond-Budgeting-Managers-Annual-Performance/dp/1578518660/ref=sr_1_1?ie=UTF8&s=books&qid=1247610241&sr=1-1)
*   [吞吐量会计](http://www.amazon.co.uk/Throughput-Accounting-Thomas-Corbett/dp/0884271587/ref=sr_1_1?ie=UTF8&s=books&qid=1247610268&sr=1-1)
*   [丰田之道](http://www.amazon.co.uk/Toyota-Way-Management-Principles-Manufacturer/dp/0071392319/ref=sr_1_1?ie=UTF8&s=books&qid=1247610315&sr=1-1)
*   [不受指挥与控制的自由](http://www.amazon.co.uk/Freedom-Command-Control-Rethinking-Management/dp/1563273276/ref=wl_it_dp?ie=UTF8&coliid=I1LN4I2BAUJY9S&colid=23AYLX1JPYVAT)
*   [精益产品和流程开发](http://www.amazon.co.uk/Lean-Product-Process-Develpoment-Allen/dp/1934109134/ref=wl_it_dp?ie=UTF8&coliid=I255U3BWJIF3ZK&colid=23AYLX1JPYVAT)
*   [实施精益软件开发：从概念到现金](http://www.amazon.co.uk/Implementing-Lean-Software-Development-Addison-Wesley/dp/0321437381/ref=wl_it_dp?ie=UTF8&coliid=I1GSTQ2A0TKE8N&colid=23AYLX1JPYVAT)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-29T02:51:07.960

首先，重要的是要认识到看板在软件开发中试图解决的问题：

*   **多任务/超负荷工作**。看板通过其即时和队列系统解决了这些问题。队列中有足够的东西让每个人都忙，但不会超载（这伴随着估计和有效速度监控的练习）。JIT 确保人们不必同时执行多项任务，从而降低生产力。
*   **不可预测的下游释放**。如果您在一个大型软件组织工作，那么您正在开发的部分可能只是一大堆软件中的一个。因此，可能会有下游团队等待您的功能。看板的队列系统及其限时交付计划确保了发布中有一定程度的可预测性。

大多数情况下，其他敏捷实践也试图用不同的技术解决类似的问题。

> 依赖于瀑布项目的大型复杂环境

如果您依赖于不遵循敏捷的项目，这将变得很困难，因为您的输入队列将无法预测。如果一个非敏捷项目依赖于你，那么问题可能会更小——但你最终可能会产生比消耗更多的东西（精益术语中的“muda”）。因此，理想情况下，您希望所有相关项目至少遵循一些敏捷实践，如果不是看板本身的话。

可以在[这里](http://agile.dzone.com/news/introducing-kanban-flow-and)找到一篇关于看板、流程和节奏的好文章。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-02-15T06:42:07.633

> 是否有人将看板（或 scrumban）用于敏捷管理实践？

是的，我正在使用:-)

> 它如何在依赖瀑布项目的大型复杂环境中工作？

在我们的环境中，我们有超过 500 名开发人员，所以它非常大。我的团队是第一个使用看板的团队，主要用于维护工作，现在用于开发。我们的日常工作非常辛苦，因为其他依赖的团队都在遵循经典的开发和管理技术，他们喜欢（他们仍然这样做）*推动*工作，而看板就是*拉动*。

我们的方法是尽可能多地沟通，使我们的工作透明化，但由于环境不情愿，我们专注于内部工作。WIP 限制帮助我们保持专注，并且通过可视化工作流程，我们知道现在谁在做什么。

我们在看板之前的吞吐量是 90%（换句话说，当 10 件物品进来时，我们只交付了 9 件），而在看板之后我们有 100.4% 并且还在增加。另一个结果是，其他团队开始过来询问看板，因为他们喜欢我们的结果，并想实施他们自己的看板系统。目前我知道大约 5 个团队，它们在我们的组织中启动了看板。

高温下，

佐尔特

# iis - ASP 页面未正确呈现

> ID：924123
> 
> 赞同：0
> 
> 时间：2009-05-29T02:17:19.853
> 
> 标签：iis, asp-classic

早上好，

我在这个网站上遇到了严重的问题。

每次我尝试在站点中打开 .shtml 页面时都会发生错误“无法找到该页面”，但这是极不可能的，因为我已经在本地 pc 中拥有所有资源并且已经为整个网站。你能告诉我有什么问题吗？我检查了所有代码，它们的构造很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T02:30:51.857

如果您尝试在 Internet Explorer 中查看该页面，那么我建议您在高级设置中关闭友好的 HTTP 错误消息。禁用该设置可能会导致更详细的错误消息，尤其是在它是 HTTP/500 时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T11:59:02.710

这实际上不是 ASP 问题。.shtml 文件由服务器端包含 ISAPI 应用程序扩展处理。

在 IIS 管理器中服务器图标下的 Web 服务扩展文件夹中，确保将 Server Sice Includes 设置为“允许”。

# python - Python RegEx - 从字符串中获取多条信息

> ID：924127
> 
> 赞同：2
> 
> 时间：2009-05-29T02:18:56.140
> 
> 标签：python, regex

我正在尝试使用 python 解析日志文件并在一个正则表达式中匹配 4 条信息。（纪元时间，服务通知，主机名和关键）我似乎无法让它工作。到目前为止，我只能匹配四个中的两个。是否有可能做到这一点？下面是日志文件中的一个字符串示例，以及到目前为止我已经开始工作的代码。任何帮助都会让我成为一个快乐的菜鸟。

[1242248375] SERVICE ALERT: myhostname.com;DNS: Recursive;CRITICAL;SOFT;1;CRITICAL - 插件在执行系统调用时超时

```
hostname = options.hostname

n = open('/var/tmp/nagios.log', 'r')
n.readline()
l = [str(x) for x in n]
for line in l:
    match = re.match (r'^\[(\d+)\] SERVICE NOTIFICATION: ', line)
    if match:
       timestamp = int(match.groups()[0])
       print timestamp 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-29T02:25:19.107

您可以使用`|`来匹配各种可能的事物中的任何一种，并将`re.findall`所有不重叠的匹配项与某个 RE 匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T02:33:57.013

这个问题有点令人困惑。但是你不需要用正则表达式做*所有事情*，你可能想尝试一些很好的普通字符串函数，比如'split'。

此版本还将避免一次将整个文件加载到内存中，即使抛出异常也会关闭文件。

```
regexp = re.compile(r'\[(\d+)\] SERVICE NOTIFICATION: (.+)')
with open('var/tmp/nagios.log', 'r') as file:
    for line in file:
        fields = line.split(';')
        match = regexp.match(fields[0])
        if match:
            timestamp = int(match.group(1))
            hostname = match.group(2) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-29T02:55:00.137

您一次可以使用多个组，例如：

```
import re

logstring = '[1242248375] SERVICE ALERT: myhostname.com;DNS: Recursive;CRITICAL;SOFT;1;CRITICAL - Plugin timed out while executing system call'
exp = re.compile('^\[(\d+)\] ([A-Z ]+): ([A-Za-z0-9.\-]+);[^;]+;([A-Z]+);')
m = exp.search(logstring)

for s in m.groups():
    print s 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-29T02:38:31.717

如果您想拆分生产线的那些特定部分。

类似于以下内容：

```
match = re.match(r'^\[(\d+)\] (.*?): (.*?);.*?;(.*?);',line) 
```

应该在各自的索引中分组给出这些部分中的每一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-29T02:29:27.723

是否可以像您的模式中的“SERVICE NOTIFICATION”一样简单，与您的示例中的“SERVICE ALERT”不匹配？

# .net - 如何以编程方式判断 Word 文档是否已损坏？

> ID：924128
> 
> 赞同：4
> 
> 时间：2009-05-29T02:19:32.673
> 
> 标签：.net, interop, ms-word, ms-office

我有一个小的 C# 应用程序，它与 word 互操作，将一堆 word .doc 文件转换为文本文件，并且在大多数情况下这工作正常。

但是，如果文档损坏，则 word 无法打开文件并弹出一个对话框，这意味着我无法完全自动化此转换过程 - 必须有人注意对话框。

有没有办法在不打开它的情况下测试一个单词 .doc 是否损坏？也许通过 word interop 或通过 3rd 方工具。

我的一个想法是产生一个执行转换的线程并在进程打开时间超过 n 秒时终止它，但我想知道是否有更简单的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T11:04:52.990

确定**Word**是否认为文件已损坏的唯一可靠方法是让 Word 打开它:-)。在这方面，我认为任何 3rd 方应用程序都不会 100% 可靠 - 毕竟，文档实际上可能*没有*损坏，但如果 Word 认为它*是*，那对您没有帮助。但是，很明显，您可以检测到某些情况，例如文件大小为零等。

我没有遇到很多（任何？）损坏的文件，所以我想知道您看到的损坏是否遵循您可以检测到的模式？例如，这些文件是从某个地方下载的，并且通常缺少文件的后半部分吗？

无论如何，损坏的文件并不是 Word 可能会弹出对话框的唯一原因。其他原因包括：

*   该文件受密码保护
*   该文件包含指向其他文件的链接
*   该文件包含宏（它们本身可能会弹出对话框，或者可能导致出现安全警告对话框）
*   等等

您可以使用 Application.DisplayAlerts 等来规避其中的一些，但不是全部（尤其是安全警告）。

我在使用第二个线程来检测 Office 拥有的对话框并（对于它识别的那些）按下适当的按钮方面取得了一些成功。它几乎不优雅，但它确实有效。是的，如果执行某些操作的时间太长，我的第二个线程也会终止应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-29T18:26:54.113

根据应用程序的性质，如果它是没有 UI 交互的服务器端应用程序，则使用 Office 自动化可能会出现问题。（请参阅此处的链接：http: [//support.microsoft.com/kb/257757](http://support.microsoft.com/kb/257757)）

如果是 Office 2007+，最好的方法是使用 OpenXML。如果是旧文件，则可能会使用一些 3rd 方工具，例如 aspose API

# apache-flex - 在 as/flex 中，是否可以在一个包中找到所有实现某个接口的类？

> ID：924130
> 
> 赞同：1
> 
> 时间：2009-05-29T02:20:06.010
> 
> 标签：apache-flex, actionscript-3

在 as/flex 中，是否可以在一个包中找到所有实现某个接口的类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T04:02:31.307

如果您询问以编程方式执行此操作，您可以使用 flash.utils.describeType 获取 XML 以向您显示类实现的接口。但是，您仍然必须知道类的名称——因为“发现”包中的类并不简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T20:49:20.763

另一种方法是使用 -link-report "outputLinkreport.xml" mxmlc 命令行选项并解析生成的 XML 文件。这是一个离线过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T02:26:18.527

对我来说，我会：

在包根文件夹中搜索 *.as

然后使用notepad++之类的编辑器将它们全部打开

然后在所有文件中搜索接口关键字

# javascript - 如何让 eval 在 IE 中正常运行？

> ID：924135
> 
> 赞同：0
> 
> 时间：2009-05-29T02:22:26.070
> 
> 标签：javascript

我有以下内容：

```
<select id="price_select"></select> 
```

我有一个调用以下内容的事件处理程序：

```
var selected_option = "one";
var option_one = "<option>Option Contents</option>";
document.getElementById('price_select').innerHTML = eval('option_' + selected_option); 
```

在 Firefox 中工作得很好，但在 IE6 中不行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-29T02:26:59.010

你不能做这样的事情吗？

```
var selected_option = "one";
var options = { "one": "<option>Option Contents</option>" };
document.getElementById('price_select').innerHTML = options[selected_option]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T02:52:21.220

根据[marknt15](https://stackoverflow.com/questions/924135/how-can-i-get-eval-to-function-properly-in-ie/924153#924153)和[MartinodF](https://stackoverflow.com/questions/924135/how-can-i-get-eval-to-function-properly-in-ie/924142#924142)所说，您应该能够使用本机 DOM 操作来完成您想做的事情，而无需使用`eval()`.

```
var selected_option = "one";
var options = { "one": {"value": "0", "text":"OptionContents"}  };
var e = document.createElement("option");

if(e.innerText) {// IE sets innerText like this
    e.innerText = options[selected_option].text;
} else { // W3C sets inner text like this
    e.childNodes[0].nodeValue = options[selected_option].text;
}

e.value = options[selected_option].value;

document.getElementById('price_select').appendChild(e); 
```

不过，您可能需要考虑使用功能齐全的 JavaScript 框架（例如 jQuery 或 Prototype）来使此类事情更容易处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T02:30:41.653

innerHTML 在 IE6 下拉菜单中不起作用，因为它是一个错误。

eval() 在 IE 6 中工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T02:31:55.177

尝试这个：

```
eval("var x= " + ('option_' + selected_option));
document.getElementById('price_select').innerHTML = x; 
```

# ms-access - 密码保护 MS Access 文件

> ID：924138
> 
> 赞同：2
> 
> 时间：2009-05-29T02:25:43.193
> 
> 标签：ms-access

我有一个带有表格和表格的 MS Access 数据库，但我希望用户只看到表格。我不希望他们能够编辑任何数据。用户应该只能使用表单来查询表。有什么建议么？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T04:23:00.367

有几种方法可以强制控制用户可以做什么。

### 自动执行

最简单的方法是[`AutoExec`](http://vb123.com/Toolshed/05_map/ch04_autoexec.htm)在应用程序启动时使用宏来初始化用户界面。
这样可以确保只显示您想要的表单并隐藏其他所有内容。

### 运行

这种方法的一个很好的补充是编译您的应用程序并强制用户使用 Access Runtime 来使用您的应用程序。
在运行时中，除非您明确编码，否则用户无法访问所有标准工具。

一件好事是，与以前的版本不同，[Access 2007 Runtime 是免费](http://www.microsoft.com/downloads/details.aspx?familyid=d9ae78d9-9dc6-4b38-9fa6-2c745a175aed&displaylang=en)的，这使得 Access 成为一个非常便宜的开发平台。

### 运行时仿真

使用 Access 2007，确保应用程序像只安装了运行时一样打开的一种简单方法是将数据库的扩展名更改为`.accdr`.
您还可以通过传递`/runtime` [命令行开关](http://support.microsoft.com/kb/209207)强制完整的 Access 安装以在运行时仿真中打开普通数据库。

### 安全数据访问

请注意，如果不加密数据库（但您必须管理密码），您所能做的就是使用户难以手动打开表。
坚定且知识渊博的用户始终可以绕过这些保护措施并访问数据。
但是，如果您需要一个真正安全的解决方案，Access 可能不是最佳选择：在 Access 中实现细粒度的安全性比其他替代方案更具挑战性，例如将数据存储到 SQL Server 数据库中，例如强制执行安全性的地方。

### 资源链接

*   MSDN 上[Access 2007 的安全注意事项和指南](http://msdn.microsoft.com/en-us/library/bb421308.aspx)
*   适用于旧版本 Access的简单[Microsoft Access 用户级安全教程](http://databases.about.com/od/tutorials/ss/usersecurity.htm)。
*   [FormSafe](http://databases.about.com/od/tutorials/ss/usersecurity.htm)，一种商业产品，有助于加强表单控件的安全性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T02:30:37.597

我相信您想使用[Access User-Level Security](http://office.microsoft.com/en-us/access/HP030704101033.aspx)。这是[Microsoft 的文档](http://msdn.microsoft.com/en-us/library/aa141451(office.10).aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T02:38:23.837

如果您使用的是 Access 2003 或更早版本，则可以使用用户级别的安全性，如前所述。如果您使用的是 Access 2007，那您就不走运了——Microsoft 在他们的智慧中删除了此功能。您基本上必须使用 VBA 代码编写自己的登录名并设置编辑权限等。

# c# - 是否有 SOAP 代理服务器之类的东西，还是我必须自己动手？

> ID：924144
> 
> 赞同：6
> 
> 时间：2009-05-29T02:28:18.193
> 
> 标签：c#, web-services, ssl, c#-2.0, vpn

**免责声明**：我试过谷歌搜索可以做我想做的事情，但没有运气。我希望这里有人可以伸出援手。

### 背景

我有一个使用 WSE 2.0 库访问安全 Web 服务的 .NET 类库。Web 服务为中央数据库提供了一个前端（它实际上是跨越多个客户的数据共享网络的一部分），并且类库提供了一个简单的 Web 服务调用包装器，以使其可以从旧版 VB6 应用程序中访问。遗留应用程序使用类库来检索信息并将其发布到 Web 服务。目前，应用程序和类库 DLL 都安装在多个工作站的客户端。

### 问题

问题是我们正在访问的 Web 服务使用 HTTPS，并且需要向 Web 服务提供有效的 X509 客户端证书才能访问它。由于我们所有的组件都存在于客户端机器上，这导致了部署问题。例如，我们必须在每台客户端机器上下载并安装每个用户的证书，每个用户可能需要通过我们的应用程序访问 Web 服务。此外，Web 服务器本身必须通过 VPN（尤其是 OpenVPN）访问，这意味着必须在每台客户端计算机上安装和配置 VPN 客户端。这是一个主要的痛苦（我们的一些客户有几十个工作站）。

### 建议的解决方案

建议的解决方案是将所有这些逻辑移动到客户站点上的中央服务器。在这种情况下，我们的遗留应用程序将与本地服务器通信，然后该服务器将关闭并将请求转发到真正的 Web 服务。此外，作为简化和集中部署工作的一部分，所有 X509 证书都将安装在服务器上，而不是安装在每台单独的客户端计算机上。

到目前为止，我们提出了三个选项：

*   找到一个现成的 SOAP 代理服务器，它可以接收基于 HTTP 的 SOAP 请求，修改`Host`SOAP 消息的标头和路由相关部分（因此它们指向真实的 Web 服务器），打开到真实 Web 的 SSL 连接服务器，向服务器提供正确的客户端证书（基于用户名到证书的映射），转发修改后的请求，读取响应，将其转换回纯文本，然后将其发送回客户端。
*   手动编写一个代理服务器来完成我刚才提到的所有事情。
*   想出完全不同的、有希望更好的方法来解决这个问题。

### 基本原理

尝试查找和/或编写 SOAP 代理服务器的基本原理是根本不需要修改我们现有的 .NET 包装库。我们只需将其指向代理服务器而不是真正的 Web 服务端点，使用普通的 HTTP 连接而不是 HTTPS。代理服务器将处理请求，修改它以使真正的 Web 服务接受它（即更改`SOAPAction`标头以使其正确），处理 SSL/证书握手，并将原始响应数据发送回客户。

然而，这对我来说充其量是一个可怕的黑客攻击。那么，我们在这里的选择是什么？

*   我是否咬紧牙关编写自己的 HTTP/SSL/SOAP/X509 感知代理服务器来完成这一切？
*   或者...是否有一个具有足够可扩展 API 的现成解决方案，我可以轻松地让它做我想做的事
*   或者……我应该采取完全不同的方法吗？

我们试图解决的关键问题是 (a) 集中存储证书的位置以简化证书的安装和管理，以及 (b) 进行设置以便 VPN 连接到 Web 服务器只发生在单台机器上，而不是需要每个客户端都安装了 VPN 客户端软件。

请注意，我们不控制托管 Web 服务的 Web 服务器。

**编辑**：为了澄清，我已经在 C# 中实现了一个（相当糟糕的）代理服务器，它确实满足了要求，但是我对这个问题的整个方法感觉根本上是错误的。所以，最终，我正在寻找让我确信我在正确的轨道上的保证，或者有用的建议告诉我我正在以完全错误的方式解决这个问题，以及以更好的方式做这件事的任何提示（如果有的话，我怀疑有）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-29T03:54:42.473

Apache Camel 完全符合要求。Camel 是一个轻量级框架，用于进行这种应用程序集成。过去我用它来做一些类似的http代理。

Camel 使用非常富有表现力的 DSL 来定义端点之间的路由。在您的情况下，您希望建立一个对客户站点上的所有客户端计算机可见的服务器，并且无论它收到什么请求，您都希望通过 https 将“从”此端点“路由到”您的安全端点。

您需要创建一个定义路由的简单类。它应该扩展 RouteBuilder 并覆盖配置方法

```
public class WebServiceProxy extends RouteBuilder
{
    public void configure()
    {
       from("jetty:http://0.0.0.0:8080/myServicePath")
                  .to("https://mysecureserver/myServicePath");
    }
} 
```

将此添加到 Camel 上下文中，您就可以开始了。

```
CamelContext context = new DefaultCamelContext();
context.addRoute(new WebServiceProxy());
context.start(); 
```

此路由将在所有本地接口上使用绑定到 8080 的码头创建一个网络服务器。发送到 /myServicePath 的任何请求都将直接路由到由 uri 定义的 Web 服务`https://mysecureserver/myServicePath`。您使用简单的 uris 定义端点，dsl 和骆驼负责繁重的工作。

您可能需要配置一个包含您的证书的密钥库，并使其可用于 http 组件。如果您在这里遇到麻烦，请再次发布；）

我会阅读 http 组件的骆驼文档以获取更多详细信息，也请检查项目的单元测试，因为它们充满了示例和最佳实践。

HTH。

仅供参考：要让 http 组件使用您的密钥库，您需要设置以下属性

```
System.setProperty("javax.net.ssl.trustStore", "path/to/keystore");
System.setProperty("javax.net.ssl.trustStorePassword", "keystore-password"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-29T09:10:03.377

您应该查看支持 WS-Addressing 协议的 WCF。我相信我已经看过关于使用 WCF 编写路由器的文章（我认为是在 MSDN 中）。

您还应该尽快摆脱 WSE 2.0。它已经过时了（已被 WSE 3.0 取代，它也已过时）。它的所有功能都已被 WCF 取代。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T03:32:15.337

我相信 ESB（企业服务总线）可能是解决您的问题的可行、强大的解决方案。[有一个名为Mule](http://www.mulesource.org/display/MULE2INTRO/What+is+Mule)的开源 ESB ，我从未使用过。前段时间我确实搞砸了[ALSB（AquaLogic 服务总线）](http://edocs.bea.com/alsb/docs20/concepts/overview.html#1074248)，但对于您所描述的而言，它会很昂贵。无论如何，您要特别关注的是路由。我不确定这会是一个简单的即插即用，但它确实是另一种选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-29T08:59:40.153

您也可以使用商业代理/缓存服务器[Microsoft ISA Server来执行此操作。](http://technet.microsoft.com/en-us/library/bb898433.aspx)它会做很多你需要开箱即用的事情。对于开箱即用不可能的任何事情，您可以为服务器编写一个扩展来完成它。

ISA Server 不是免费的。

ISA 现在更名为“Microsoft Forefront Threat Management Gateway”。

不过，它不仅仅是一个网络代理服务器——它支持许多协议和许多功能。也许比你需要的更多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-29T03:34:51.370

你的安全模型对我来说没有意义。使用 HTTPS 的目的是什么？通常是向客户端验证服务。在那种情况下，为什么服务器需要保留客户端的证书？应该保留服务器的 X509 证书的是客户端。

为什么需要通过VPN？如果您需要对客户端进行身份验证，有更好的方法可以做到这一点。您可以在 SSL 中启用相互身份验证，或者使用 XML-Security 和可能的 WS-Security 在 SOAP 级别保护服务。即使您确实使用 SSL 对客户端进行身份验证，您仍然不应将所有客户端证书保留在服务器上，而应使用 PKI 并将客户端证书验证到受信任的根。

最后，特别是对于您提出的基于代理的解决方案，我不明白为什么您需要任何特定于 SOAP 的东西。您不只需要一个可以将任何 HTTP 请求转发到远程 HTTPS 服务器的 Web 服务器吗？我不知道该怎么做，但我会调查 Apache 和 IIS 之类的...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-29T03:17:34.227

Codeplex 上有一个来自 Microsoft 的服务虚拟化工具，称为托管服务引擎，旨在将客户端与 Web 服务实现分离。它可能会满足您的需求或为您提供良好的开端。我没有真正深入研究它，只是浏览了MSDN中的一篇文章，你的描述让我想起了它。

*   [http://www.codeplex.com/servicesengine](http://www.codeplex.com/servicesengine)
*   [http://msdn.microsoft.com/en-us/magazine/dd727511.aspx](http://msdn.microsoft.com/en-us/magazine/dd727511.aspx)

# jquery - 使用 jQuery 从 CKEditor 的 iframe 中抓取内容

> ID：924145
> 
> 赞同：27
> 
> 时间：2009-05-29T02:28:41.220
> 
> 标签：jquery, ajax, serialization, iframe, ckeditor

我有一个自定义编写的 CMS，它使用**[CKEditor](http://ckeditor.com/)** *(FCKEditor v3) 来编辑内容。我还使用**[jQuery Validation](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)**插件在基于 AJAX 的提交之前检查所有字段是否有错误。我正在使用**[serialize()](http://docs.jquery.com/Ajax/serialize)**函数将数据传递到 PHP 后端。

问题是，序列化设法正确抓取所有字段，除了在 CKEditor 中键入的实际内容。与其他所有 WYSIWYG 编辑器一样，这个编辑器也将 iframe 覆盖在现有文本框上。并且序列化忽略 iframe 并且只查看文本框的内容，当然，它没有找到，因此返回一个空白的内容正文。

我的方法是在 CKEditor 的*onchange***`CKEDITOR.instances.[textboxname].getData()`**事件上创建一个钩子，并使用编辑器中的任何更改同时更新文本框（返回内容）或其他一些隐藏字段。

但是，由于 CKEditor 仍处于 beta 阶段并且严重缺乏文档，我找不到合适的 API 调用来让我这样做。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2010-01-05T16:28:15.043

另一个通用解决方案是在您尝试提交表单时运行以下命令

```
for ( instance in CKEDITOR.instances )
            CKEDITOR.instances[instance].updateElement(); 
```

这将强制表单中的所有 CKEDITOR 实例更新它们各自的字段

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-11-25T20:23:26.573

我刚刚发布了一个用于 jQuery 的 CKEditor 插件，它将在后台处理所有这些，无需任何额外代码： [http ://www.fyneworks.com/jquery/CKEditor/](http://www.fyneworks.com/jquery/CKEditor/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-09-24T16:17:07.563

我今天也一直在尝试解决这个问题。我意识到上面的代码对我不起作用的原因是因为在引用文档属性时 CKEditor 实例还没有准备好。因此，您必须调用“instanceReady”事件，并且可以在其中使用文档的事件，因为在此之前它不存在。

这个例子可能对你有用：

```
CKEDITOR.instances["editor1"].on("instanceReady", function()
{
//set keyup event
this.document.on("keyup", CK_jQ);

 //and paste event
this.document.on("paste", CK_jQ);
});

function CK_jQ()
{

    CKEDITOR.tools.setTimeout( function()
    { 
        $("#editor1").val(CKEDITOR.instances.editor1.getData()); 
    }, 0);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-29T04:25:08.767

这个应该做...

```
CKEDITOR.instances["editor1"].document.on('keydown', function(event)
{
    CKEDITOR.tools.setTimeout( function()
    { 
        $("#editor1").val(CKEDITOR.instances.editor1.getData()); 
    }, 0);
});

CKEDITOR.instances["editor1"].document.on('paste', function(event)
{
    CKEDITOR.tools.setTimeout( function()
    { 
        $("#editor1").val(CKEDITOR.instances.editor1.getData()); 
    }, 0);
}); 
```

编辑：添加部分以在粘贴后更新文本框......

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-03-13T03:27:12.613

我在这方面取得了成功：

```
console.log(CKEDITOR.instances.editor1.getData()); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-04-13T01:33:25.483

这样做不是更好吗：

```
CKEDITOR.instances.editor1.on('contentDom', function() {
          CKEDITOR.instances.editor1.document.on('keyup', function(event) {/*your instructions*/});
        }); 
```

参考：[http ://cksource.com/forums/viewtopic.php?f=11&t=18286](http://cksource.com/forums/viewtopic.php?f=11&t=18286)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-12-18T17:36:09.007

我采取了一种稍微不同的方法，我认为使用 ckeditor 的更新功能会更好，并且由于使用了 keyup，因此不需要超时

```
CKEDITOR.instances["editor1"].on("instanceReady", function()
{
//set keyup event
this.document.on("keyup", CK_jQ);

 //and paste event
this.document.on("paste", CK_jQ);
}

function CK_jQ()
{
   CKEDITOR.instances.editor1.updateElement(); 
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-07-22T20:08:09.573

`CKEDITOR.instances.wc_content1.getData()`将返回 ckeditor 数据
`CKEDITOR.instances.wc_content1.setData()`将设置 ckeditor 数据

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-02-17T10:34:46.860

contentDom 事件对我有用，而不是 instanceReady ......我真的很想知道这些事件是什么，但我认为它们是专有的......

```
var editor = CKEDITOR.replace('editor');

CKEDITOR.instances.editor.on("instanceReady", function(){
    this.on('contentDom', function() {
        this.document.on('keydown', function(event) {
            CKEDITOR.tools.setTimeout( function(){ 
                $(".seldiv").html(CKEDITOR.instances.editor.getData()); 
            }, 1);
        });
    });
    this.on('contentDom', function() {
        this.document.on('paste', function(event) {
            CKEDITOR.tools.setTimeout( function(){ 
                $(".seldiv").html(CKEDITOR.instances.editor.getData()); 
            }, 1);
        });
    });
    edits_clix();
    var td = setTimeout("ebuttons()", 1);
}) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-01-17T12:45:45.067

我用当前版本解决了这个问题：http: [//ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.js)

在**第 55 行之后** *this.submit( function( event ) {* - 我添加了以下代码：

```
if (typeof CKEDITOR !== "undefined") {
    for ( instance in CKEDITOR.instances )
        CKEDITOR.instances[instance].updateElement();
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2011-11-09T16:14:56.483

我认为用户在询问序列化，我正在努力序列化要提交的表单，这给了我很多问题。

这对我有用：

```
$(document).ready(function() {
$('#form').submit(function(){
if ( CKEDITOR.instances.editor1.getData() == '' ){
    alert( 'There is no data available' );//an alert just to check if its working
}else{
    var editor_data = CKEDITOR.instances.editor1.getData();
    $("#editor1").val(editor_data); //at this point i give the value to the textarea
    $.ajax({ 
                    //do your ajax here  

                     });

        }
return false;
    });
 }); 
```

# java - 如何一次性从 Set 中获取数据

> ID：924158
> 
> 赞同：0
> 
> 时间：2009-05-29T02:32:26.783
> 
> 标签：java, collections, printing

我想一次性获取集合接口的所有值作为逗号分隔的字符串。

例如（Java 语言）：

```
Set<String> fruits=  new HashSet<String>();

fruits.add("Apple");
fruits.add("Banana");
fruits.add("Orange"); 
```

如果我打印集合，`fruits.toString`那么输出将是：

```
[Apple, Banana, Orange] 
```

但我的要求是`Apple, Banana, Orange`没有方括号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T04:17:18.890

我假设这是Java。

MartinodF 的快速而肮脏的`toString().substring`方法会起作用，但您真正要寻找的是一种`join`方法。如果你做了很多字符串操作，我建议你看看[Apache Commons](http://commons.apache.org/) [Lang](http://commons.apache.org/lang/)库。它提供了许多 Java 标准库中缺少的有用功能，包括可以让您执行此操作的 StringUtils 类：

```
Set fruits =  new HashSet();

fruits.add("Apple");
fruits.add("Banana");
fruits.add("Orange");

String allFruits = StringUtils.join(fruits, ", ");
// allFruits is now "Apple, Banana, Orange" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T02:42:41.537

又快又脏：

```
value.toString().substring(1, value.toString().length - 1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T03:12:59.073

假设 C# 3.5

```
var fruits = new HashSet<string>();

fruits.Add("Apple");
fruits.Add("Banana");
fruits.Add("Orange");

Console.WriteLine(string.Join(", ",fruits.ToArray())); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T10:59:58.977

使用来自 commons lang 的[StringUtils.join](http://commons.apache.org/lang/api/org/apache/commons/lang/StringUtils.html#join(java.util.Collection,%20char))

```
Set fruits =  new HashSet();

fruits.add("Apple");
fruits.add("Banana");
fruits.add("Orange");

System.out.println(StringUtils.join(fruits, ',')); 
```

# sql - SQL：没有使用触发器的身份功能解决方法

> ID：924165
> 
> 赞同：1
> 
> 时间：2009-05-29T02:33:53.893
> 
> 标签：sql, sql-server, stored-procedures, triggers, identity-insert

我对我的触发器有点生疏，什么不是，我正试图为一个班级找出这个问题：

在数据库 TEST 中，表没有 IDENTITY 功能选项。换句话说，当我们在“Users”表中插入一行时，我们希望主键“UserID”自动递增。请建议一种解决方法来实现此功能而无需此类内置功能。（提示：您仍然可以使用函数、存储过程、序列、触发器等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T05:31:22.473

对名为 ID 的表 Primary Key 使用 Int 列。

然后，您可以使用而不是插入触发器来填充/计算要为 ID 插入的值。

触发器将确定所讨论表的最大现有 ID（使用从 TableA 中选择 MAX ID），然后为要插入的每条记录将其递增 1。

如果表中没有记录，则 ID 值为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T02:43:45.323

您使用序列，这在 Oracle 中很常见，它没有（或者没有一次，它可能已经更改）具有标识列。由于这是家庭作业，我会让你从这里弄清楚其余的。

# algorithm - 地理围栏 - 点内/外多边形

> ID：924171
> 
> 赞同：55
> 
> 时间：2009-05-29T02:37:50.470
> 
> 标签：algorithm, computational-geometry

我想确定一个多边形并实现一个算法来检查一个点是在多边形内部还是外部。

有谁知道是否有任何类似算法的示例可用？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2009-05-29T02:41:50.320

如果我没记错的话，算法是通过你的测试点画一条水平线。计算你相交的多边形有多少线到达你的点。

如果答案很奇怪，你就在里面。如果答案是偶数，你就在外面。

编辑：是的，[他](https://stackoverflow.com/questions/924171/geo-fencing-point-inside-outside-polygon/924179#924179)说的（[维基百科](http://en.wikipedia.org/wiki/Point_in_polygon)）：

![替代文字](https://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/RecursiveEvenPolygon.svg/306px-RecursiveEvenPolygon.svg.png)

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2011-10-12T11:24:34.973

**C# 代码**

```
bool IsPointInPolygon(List<Loc> poly, Loc point)
{
    int i, j;
    bool c = false;
    for (i = 0, j = poly.Count - 1; i < poly.Count; j = i++)
    {
        if ((((poly[i].Lt <= point.Lt) && (point.Lt < poly[j].Lt)) 
                || ((poly[j].Lt <= point.Lt) && (point.Lt < poly[i].Lt))) 
                && (point.Lg < (poly[j].Lg - poly[i].Lg) * (point.Lt - poly[i].Lt) 
                    / (poly[j].Lt - poly[i].Lt) + poly[i].Lg))
        {

            c = !c;
        }
    }

    return c;
} 
```

**位置类**

```
public class Loc
{
    private double lt;
    private double lg;

    public double Lg
    {
        get { return lg; }
        set { lg = value; }
    }

    public double Lt
    {
        get { return lt; }
        set { lt = value; }
    }

    public Loc(double lt, double lg)
    {
        this.lt = lt;
        this.lg = lg;
    }
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2010-09-03T15:42:45.083

在网上搜索并尝试了各种实现并将它们从 C++ 移植到 C# 之后，我终于得到了我的代码：

```
 public static bool PointInPolygon(LatLong p, List<LatLong> poly)
    {
        int n = poly.Count();

        poly.Add(new LatLong { Lat = poly[0].Lat, Lon = poly[0].Lon });
        LatLong[] v = poly.ToArray();

        int wn = 0;    // the winding number counter

        // loop through all edges of the polygon
        for (int i = 0; i < n; i++)
        {   // edge from V[i] to V[i+1]
            if (v[i].Lat <= p.Lat)
            {         // start y <= P.y
                if (v[i + 1].Lat > p.Lat)      // an upward crossing
                    if (isLeft(v[i], v[i + 1], p) > 0)  // P left of edge
                        ++wn;            // have a valid up intersect
            }
            else
            {                       // start y > P.y (no test needed)
                if (v[i + 1].Lat <= p.Lat)     // a downward crossing
                    if (isLeft(v[i], v[i + 1], p) < 0)  // P right of edge
                        --wn;            // have a valid down intersect
            }
        }
        if (wn != 0)
            return true;
        else
            return false;

    }

    private static int isLeft(LatLong P0, LatLong P1, LatLong P2)
    {
        double calc = ((P1.Lon - P0.Lon) * (P2.Lat - P0.Lat)
                - (P2.Lon - P0.Lon) * (P1.Lat - P0.Lat));
        if (calc > 0)
            return 1;
        else if (calc < 0)
            return -1;
        else
            return 0;
    } 
```

isLeft 函数给我带来了舍入问题，我花了几个小时没有意识到我做错了转换，所以请原谅我在该函数末尾的跛脚 if 块。

顺便说一句，这是原始代码和文章： [http ://softsurfer.com/Archive/algorithm_0103/algorithm_0103.htm](http://softsurfer.com/Archive/algorithm_0103/algorithm_0103.htm)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-29T03:39:02.767

到目前为止，最好的解释和实现可以在 [Point In Polygon Winding Number Inclusion找到](http://www.softsurfer.com/Archive/algorithm_0103/algorithm_0103.htm)

解释清楚的文章末尾甚至还有一个 C++ 实现。该站点还包含一些针对其他基于几何的问题的出色算法/解决方案。

我已经修改并使用了 C++ 实现，还创建了一个 C# 实现。您肯定想使用绕组数算法，因为它比边缘交叉算法更准确，而且速度非常快。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2011-07-22T06:12:25.437

我认为有一个更简单、更有效的解决方案。

这是 C++ 中的代码。我应该很容易将其转换为 C#。

```
int pnpoly(int npol, float *xp, float *yp, float x, float y)
{
  int i, j, c = 0;
  for (i = 0, j = npol-1; i < npol; j = i++) {
    if ((((yp[i] <= y) && (y < yp[j])) ||
         ((yp[j] <= y) && (y < yp[i]))) &&
        (x < (xp[j] - xp[i]) * (y - yp[i]) / (yp[j] - yp[i]) + xp[i]))
      c = !c;
  }
  return c;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-21T07:31:24.647

asp.Net C#中的完整解决方案，你可以在这里看到完整的细节，你可以看到如何使用纬度和经度找到点（纬度，经度）是在多边形内部还是在多边形外部？ [文章参考链接](http://www.infoa2z.com/asp.net/point-inside-the-polygon-using-latitude,-longitude-asp.net)

私有静态 bool checkPointExistsInGeofencePolygon（字符串 latlnglist，字符串 lat，字符串 lng）{

```
 List<Loc> objList = new List<Loc>();
    // sample string should be like this strlatlng = "39.11495,-76.873259|39.114588,-76.872808|39.112921,-76.870373|";
    string[] arr = latlnglist.Split('|');
    for (int i = 0; i <= arr.Length - 1; i++)
    {
        string latlng = arr[i];
        string[] arrlatlng = latlng.Split(',');

        Loc er = new Loc(Convert.ToDouble(arrlatlng[0]), Convert.ToDouble(arrlatlng[1]));
        objList.Add(er);
    }
    Loc pt = new Loc(Convert.ToDouble(lat), Convert.ToDouble(lng));

    if (IsPointInPolygon(objList, pt) == true)
    {
          return true;
    }
    else
    {
           return false;
    }
}
private static bool IsPointInPolygon(List<Loc> poly, Loc point)
{
    int i, j;
    bool c = false;
    for (i = 0, j = poly.Count - 1; i < poly.Count; j = i++)
    {
        if ((((poly[i].Lt <= point.Lt) && (point.Lt < poly[j].Lt)) |
            ((poly[j].Lt <= point.Lt) && (point.Lt < poly[i].Lt))) &&
            (point.Lg < (poly[j].Lg - poly[i].Lg) * (point.Lt - poly[i].Lt) / (poly[j].Lt - poly[i].Lt) + poly[i].Lg))
            c = !c;
    }
    return c;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-11-13T22:57:49.700

只是一个提示（使用答案，因为我无法评论），如果您想使用多边形中的点进行地理围栏，那么您需要更改您的算法以使用球坐标。-180 经度与 180 经度相同，在这种情况下，多边形中的点会中断。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-10-14T13:08:02.267

关于 kobers 的回答，我用更易读的干净代码解决了这个问题，并更改了跨越日期边界的经度：

```
public bool IsPointInPolygon(List<PointPosition> polygon, double latitude, double longitude)
{
  bool isInIntersection = false;
  int actualPointIndex = 0;
  int pointIndexBeforeActual = polygon.Count - 1;

  var offset = calculateLonOffsetFromDateLine(polygon);
  longitude = longitude < 0.0 ? longitude + offset : longitude;

  foreach (var actualPointPosition in polygon)
  {
    var p1Lat = actualPointPosition.Latitude;
    var p1Lon = actualPointPosition.Longitude;

    var p0Lat = polygon[pointIndexBeforeActual].Latitude;
    var p0Lon = polygon[pointIndexBeforeActual].Longitude;

    if (p1Lon < 0.0) p1Lon += offset;
    if (p0Lon < 0.0) p0Lon += offset;

    // Jordan curve theorem - odd even rule algorithm
    if (isPointLatitudeBetweenPolyLine(p0Lat, p1Lat, latitude)
    && isPointRightFromPolyLine(p0Lat, p0Lon, p1Lat, p1Lon, latitude, longitude))
    {
      isInIntersection = !isInIntersection;
    }

    pointIndexBeforeActual = actualPointIndex;
    actualPointIndex++;
  }

  return isInIntersection;
}

private double calculateLonOffsetFromDateLine(List<PointPosition> polygon)
{
  double offset = 0.0;
  var maxLonPoly = polygon.Max(x => x.Longitude);
  var minLonPoly = polygon.Min(x => x.Longitude);
  if (Math.Abs(minLonPoly - maxLonPoly) > 180)
  {
    offset = 360.0;
  }

  return offset;
}

private bool isPointLatitudeBetweenPolyLine(double polyLinePoint1Lat, double polyLinePoint2Lat, double poiLat)
{
  return polyLinePoint2Lat <= poiLat && poiLat < polyLinePoint1Lat || polyLinePoint1Lat <= poiLat && poiLat < polyLinePoint2Lat;
}

private bool isPointRightFromPolyLine(double polyLinePoint1Lat, double polyLinePoint1Lon, double polyLinePoint2Lat, double polyLinePoint2Lon, double poiLat, double poiLon)
{
  // lon <(lon1-lon2)*(latp-lat2)/(lat1-lat2)+lon2
  return poiLon < (polyLinePoint1Lon - polyLinePoint2Lon) * (poiLat - polyLinePoint2Lat) / (polyLinePoint1Lat - polyLinePoint2Lat) + polyLinePoint2Lon;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-06-08T02:46:54.713

我添加一个细节来帮助生活在地球南部的人们！如果您在巴西（这是我的情况），我们的 GPS 坐标都是负面的。所有这些算法都会给出错误的结果。

最简单的方法是使用所有点的 Lat 和 Long 的绝对值。在这种情况下，Jan Kobersky 的算法是完美的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-29T04:01:47.527

如果您有一个简单的多边形（没有一条线交叉）并且没有孔，您也可以对多边形进行三角剖分，无论如何您都可能会在 GIS 应用程序中绘制 TIN，然后测试每个点中的点三角形。如果多边形的边数很少，但点数很多，这很快。

有关三角形中的一个有趣点，请参见[链接文本](http://www.blackpawn.com/texts/pointinpoly/default.html)

否则肯定使用缠绕规则而不是边缘交叉，边缘交叉对边缘上的点有实际问题，如果您的数据是从精度有限的 GPS 生成的，则很有可能。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-29T02:51:50.643

检查一个点是否在多边形内 -

考虑具有顶点 a1、a2、a3、a4、a5 的多边形。以下一组步骤应有助于确定点 P 是位于多边形内部还是外部。

计算由边 a1->a2 和连接 a2 到 P 和 P 到 a1 的向量形成的三角形的向量面积。类似地，计算每个可能的三角形的矢量面积，其中一个边作为多边形的边，另外两个将 P 连接到该边。

对于一个位于多边形内的点，每个三角形都需要具有正面积。即使其中一个三角形的面积为负，点 P 也会从多边形中脱颖而出。

为了计算三角形的面积，给定代表其 3 条边的向量，请参阅[http://www.jtaylor1142001.net/calcjat/Solutions/VCrossProduct/VCPATriangle.htm](http://www.jtaylor1142001.net/calcjat/Solutions/VCrossProduct/VCPATriangle.htm)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-29T02:53:20.220

如果你的多边形是凸的，问题就更容易了。如果是这样，您可以对每条线进行简单的测试，以查看该点是在该线的内部还是外部（在两个方向上都延伸到无穷大）。否则，对于凹多边形，从您的点到无穷远（在任何方向）绘制一条假想的射线。计算它穿过边界线的次数。奇数表示点在里面，偶数表示点在外面。

最后一个算法比看起来更棘手。你必须非常小心当你的假想光线恰好击中多边形的一个顶点时会发生什么。

如果您的假想光线沿 -x 方向行进，您可以选择仅计算包含至少一个 y 坐标严格小于该点的 y 坐标的点的线。这就是让大多数奇怪的边缘情况正常工作的方法。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-10-07T16:35:02.043

多边形被定义为点对 A、B、C .... A. 没有边 AB、BC ... 与任何另一边相交的顺序列表

确定框 Xmin、Xmax、Ymin、Ymax

案例 1 测试点 P 位于框外

案例 2 测试点 P 位于盒子内：

确定框 {[Xmin,Ymin] - [Xmax, Ymax]} 的“直径”D（并添加一些额外内容以避免可能与 D 在一侧混淆）

确定所有边的梯度 M

找到与所有梯度 M 最不同的梯度 Mt

测试线在梯度 Mt 处从 P 开始，距离 D。

将交叉点的计数设置为零

对于边 AB、BC 中的每一个，测试 PD 与边从其开始到但不包括其结束的交点。如果需要，增加交叉点的计数。请注意，从 P 到交叉点的距离为零表示 P 在一侧

奇数表示 P 在多边形内

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-12-23T03:28:18.737

[简的回答](https://stackoverflow.com/a/7739297/171846)很棒。

这是使用 GeoCoordinate 类的相同代码。

```
using System.Device.Location; 
```

...

```
public static bool IsPointInPolygon(List<GeoCoordinate> poly, GeoCoordinate point)
{
    int i, j;
    bool c = false;
    for (i = 0, j = poly.Count - 1; i < poly.Count; j = i++)
    {
        if ((((poly[i].Latitude <= point.Latitude) && (point.Latitude < poly[j].Latitude))
                || ((poly[j].Latitude <= point.Latitude) && (point.Latitude < poly[i].Latitude)))
                && (point.Longitude < (poly[j].Longitude - poly[i].Longitude) * (point.Latitude - poly[i].Latitude)
                    / (poly[j].Latitude - poly[i].Latitude) + poly[i].Longitude))
            c = !c;
    }

    return c;
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-01-09T17:03:17.427

我在 PHP 中翻译了 c# 方法，并添加了许多注释来理解代码。

PolygonHelps 的描述：
检查一个点是在多边形的内部还是外部。此过程使用 gps 坐标，它适用于多边形的地理区域较小的情况。

输入：
$poly：点数组：多边形顶点列表；[{点}，{点}，...]；
$point：要检查的点；Point: {"lat" => "x.xxx", "lng" => "y.yyy"}

$c 为假时，与多边形的交点数为偶数，所以点在多边形外；
$c 为真时，与多边形的交点数为奇数，所以点在多边形内；
$n 是多边形的顶点数；
对于多边形中的每个顶点，方法计算通过当前顶点和前一个顶点的线，并检查两条线是否有交点。
$c 在交叉点存在时发生变化。
因此，如果点在多边形内，方法可以返回 true，否则返回 false。

```
class PolygonHelps {

    public static function isPointInPolygon(&$poly, $point){

        $c = false; 
        $n = $j = count($poly);

        for ($i = 0, $j = $n - 1; $i < $n; $j = $i++){

            if ( ( ( ( $poly[$i]->lat <= $point->lat ) && ( $point->lat < $poly[$j]->lat ) ) 
                || ( ( $poly[$j]->lat <= $point->lat ) && ( $point->lat < $poly[$i]->lat ) ) ) 

            && ( $point->lng <   ( $poly[$j]->lng - $poly[$i]->lng ) 
                               * ( $point->lat    - $poly[$i]->lat ) 
                               / ( $poly[$j]->lat - $poly[$i]->lat ) 
                               +   $poly[$i]->lng ) ){

                $c = !$c;
            }
        }

        return $c;
    }
} 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2018-01-21T12:03:44.507

你可以试试这个简单的类[https://github.com/xopbatgh/sb-polygon-pointer](https://github.com/xopbatgh/sb-polygon-pointer)

处理它很容易

1.  您只需将多边形坐标插入数组
2.  Ask library 是多边形内的 lat/lng 所需的点

```
$polygonBox = [
    [55.761515, 37.600375],
    [55.759428, 37.651156],
    [55.737112, 37.649566],
    [55.737649, 37.597301],
];

$sbPolygonEngine = new sbPolygonEngine($polygonBox);

$isCrosses = $sbPolygonEngine->isCrossesWith(55.746768, 37.625605);

// $isCrosses is boolean 
```

*（答案是我自己删除的，因为最初格式错误）*

# php - 为什么我的搜索不会细化？

> ID：924186
> 
> 赞同：0
> 
> 时间：2009-05-29T02:45:08.067
> 
> 标签：php, mysql, database

我有这段代码：

```
//Restrict the SQL query with an AND clause if a member has been selected
if ($form_member_id != 0) {
    $query .= "AND photos.member_id = '$form_member_id' ";
} 
```

它旨在将搜索查询细化为仅选定的用户，因此整个查询一起显示：

```
SELECT
photos.photo_id, members.member_name, photos.photo_title, photos.photo_film, photos.photo_height, photos.photo_width
FROM members, photos
WHERE members.member_id = photos.member_id
    AND photos.member_id = '$form_member_id' 
```

由于某种原因，这不起作用，我测试了查询并且它工作正常，但由于某种原因，它不适用于我编写的代码。我检查了变量名称的差异，但它们都是一样的......任何人都知道它为什么不起作用！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T03:03:46.813

我认为您在 AND 之前需要一个空格，否则它将是：

```
WHERE members.member_id = photos.member_idAND photos.member_id = '$form_member_id' 
```

代替

```
WHERE members.member_id = photos.member_id AND photos.member_id = '$form_member_id' 
```

**@Matthew**关于使用参数化查询的说法同上，但我仍然认为以上是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T03:03:30.573

显而易见的步骤是在运行之前打印完整的查询，然后手动运行它，看看会发生什么。此外，您应该使用[准备好的语句](http://us2.php.net/manual/en/pdo.prepared-statements.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T03:08:32.870

另一件事，我对 php 没有经验，但是您的代码看起来是 SQL 注入攻击的主要目标......

有人可以为您的 " `$form_member_id`" 填充缓冲区并输入一个值，例如

`'; truncate members; '`

其中前导和尾随引号是提交字符串的一部分...第一个'; 将终止你的字符串，; 结束一个语句，然后截断你的表并忽略其余的......

再说一次，我不是 PHP 人，但许多其他历史安全帖子都在讨论参数化您的查询以防止此类注入攻击

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T03:12:29.650

使用调试脚本

```
if ($form_member_id != 0) {
        $query .= "AND photos.member_id = '$form_member_id' ";
        die($query);
} 
```

复制并粘贴查询并在 phymyadmin 等中运行以找出错误的来源

为了更好的安全性，您可能希望它是这样的

```
if ($form_member_id != 0) {
        $query .= "AND photos.member_id = '" . mysql_real_escape_string($form_member_id) . "' ";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-29T03:19:58.543

如果它现在对您有用，您应该回显该查询以查看似乎是什么问题:)

# mozilla - 将插件移植到 Mozilla Prism 1.0b1

> ID：924190
> 
> 赞同：2
> 
> 时间：2009-05-29T02:48:18.997
> 
> 标签：mozilla, mozilla-prism

我正在尝试将应用程序移植到最新版本的 Mozilla Prism（当前为 1.0b1）。说明说要把它放在 install.rdf 中：

```
<em:targetApplication>
    <!-- Prism -->
    <Description>
        <em:id>prism@developer.mozilla.org</em:id>
        <em:minVersion>0.4</em:minVersion>
        <em:maxVersion>1.0.0.*</em:maxVersion>
    </Description>
</em:targetApplication> 
```

但是，对于 maxVersion，我找不到允许它安装的条目。我试过1.1b1。*, 1.1, 1.* , 什么都没有。

有人知道怎么做吗？

TIA 迈克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-29T02:55:36.547

[https://developer.mozilla.org/en/Prism/Extensions](https://developer.mozilla.org/en/Prism/Extensions)

您确定 MaxVersion 是问题所在吗？

```
<em:maxVersion>1.0.0.*</em:maxVersion> 
```

在示例中。

此外， [http://www.softwareishard.com/blog/planet-mozilla/extending-prism/](http://www.softwareishard.com/blog/planet-mozilla/extending-prism/)和 [http://code.google.com/p/hunspell-spellcheck-vi/source/browse/trunk/firefox_thunderbird/install .rdf?r=53](http://code.google.com/p/hunspell-spellcheck-vi/source/browse/trunk/firefox_thunderbird/install.rdf?r=53)使用那个 MaxVersion

# javascript - 在网站上从用户那里获得反馈的好方法是什么？

> ID：924194
> 
> 赞同：1
> 
> 时间：2009-05-29T02:50:55.030
> 
> 标签：javascript, jquery, html

我正在为我县的集市制作一个网站。我希望访问者能够通过输入他们的姓名、电子邮件和评论来向我提问，如下所示：

[http://lincolnfair.net/images/feedback.JPG](http://lincolnfair.net/images/feedback.JPG)

所以我想我真正的问题是如何向自己发送一封电子邮件（使用 JavaScript/JQuery），并将所有这些字段作为电子邮件的主体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T02:58:30.270

您应该使用服务器端脚本（例如 PHP、Python、Perl 等）。使用纯 HTML 和 JavaScript，您可以使用[mailto form](https://web.archive.org/web/1/http://articles.techrepublic%2ecom%2ecom/5100-10878_11-5250440.html)，但这将非常不可靠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T03:08:53.167

我会推荐 uservoice.com ，它可以很好地与您的网站集成，一个更强大的用户反馈系统，而无需花时间自己编写反馈系统

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T02:58:03.360

如果您希望它在每个页面上都可用，您可能需要考虑使用[jQuery](http://jquery.com)和[UI Dialog](http://docs.jquery.com/UI/Dialog)插件。您可以将其设置为默认反馈是一个 mailto，它使用 javascript 替换为一个链接，该链接会显示一个包含您要收集的字段的 jQuery 对话框。这可以通过 AJAX 提交回您的服务器，并通过服务器的电子邮件发送给您。

**编辑**：由于您已编辑问题以指示仅服务器端的解决方案，因此上述内容似乎有些断章取义。对于其他人，我同意使用一些客户端代码来实际发送电子邮件是要走的路（如上所述）。我认为最好使用您自己的服务器，但我相信您可以找到许多“[表单到电子邮件](http://www.google.com/search?q=form+email+service)”服务。我会避免这些，除非您希望收集您的电子邮件地址以用于垃圾邮件。您也许还可以为此使用签名的小程序或 ActiveX 控件，但我不会再走那条路。如上所述，我会让浏览器处理界面，但我的服务器处理电子邮件的发送。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T05:15:44.430

正如其他人所指出的，这是一个可以使用服务器端语言轻松解决的典型任务。Javascript 和 jQuery 不是解决这个特定问题的正确工具。为您指明正确的方向，请使用`method="post"`您的表单，您可以通过检查`$_POST`变量来访问用户在 PHP 文件中提交的内容。如果`<input>`您的表单中的某个元素在您`name="email"`的电子邮件中，您可以在 PHP 中以`$_POST['email']`. 如果您对 PHP 解决方案感兴趣，请查看[mail()](http://php.net/manual/en/function.mail.php)函数的文档。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-29T10:06:47.897

Jukka 有一个关于[如何编写 HTML 表单](http://www.cs.tut.fi/~jkorpela/forms/)的很好的指南。它应该为您提供生产功能所需的一切。

您需要一个服务器端组件，没有任何客户端可以替代它。对于您描述的那种简单的表单，JavaScript 无济于事。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-29T10:25:27.843

最可靠的方法是使用您首选语言的服务器端脚本。如何做到这一点的细节可能超出了这个问题的范围，并且取决于您选择的语言。

您的另一个选项是将表单的操作设置为 mailto：它将使用访问者首选的电子邮件客户端发送电子邮件。这将起作用，但非常糟糕，并且依赖于安装和配置电子邮件客户端的查看器。

[您可以在http://www.chami.com/tips/internet/010597I.html](http://www.chami.com/tips/internet/010597I.html)找到有关 mailto 选项的更多信息

另一个不错的选择是第三方站点，例如 www.wufoo.com，它在自己的服务器上为您处理所有电子邮件业务服务器端。我相信 Wufoo 甚至允许您将他们的表单嵌入到您自己的站点中。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2009-05-29T02:59:47.587

我不确定我是否完全理解您的问题，但如果您只想通过电子邮件进行调查，我认为您不需要使用 jQuery 或 HTML。

一种非常简单的方法是使用[Google Docs 中的“表单”功能](http://docs.google.com/support/bin/answer.py?hl=en&answer=87809)。

# java - 如何使用 TimeUnit 枚举将纳秒转换为秒？

> ID：924208
> 
> 赞同：153
> 
> 时间：2009-05-29T02:56:37.107
> 
> 标签：java, timeunit

如何将值从纳秒转换为秒？

这是代码段：

```
import java.io.*;
import java.util.concurrent.*; 
..

class Stamper { 

public static void main (String[] args) { 
long start = System.nanoTime(); 
//some try with nested loops 
long end = System.nanoTime(); 
long elapsedTime = end - start;

System.out.println("elapsed: " + elapsedTime + "nano seconds\n");

//convert to seconds 
TimeUnit seconds = new TimeUnit(); 
System.out.println("which is " + seconds.toSeconds(elapsedTime) + " seconds"); 
}} 
```

错误是

```
Stamper.java:16:  enum types may not be instantiated. 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：363
> 
> 时间：2009-05-29T03:01:20.967

# `TimeUnit`枚举

以下表达式使用[`TimeUnit`](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/TimeUnit.html)枚举（Java 5 及更高版本）将纳秒转换为秒：

```
TimeUnit.SECONDS.convert(elapsedTime, TimeUnit.NANOSECONDS) 
```

* * *

## 回答 #2

> 赞同：210
> 
> 时间：2009-05-29T03:00:33.933

好吧，你可以除以 1,000,000,000：

```
long elapsedTime = end - start;
double seconds = (double)elapsedTime / 1_000_000_000.0; 
```

如果你使用`TimeUnit`转换，你会得到一个长的结果，所以你会失去小数精度但保持整数精度。

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2009-05-29T02:59:06.527

TimeUnit 是一个枚举，所以你不能创建一个新的。

以下将 1000000000000ns 转换为秒。

```
TimeUnit.NANOSECONDS.toSeconds(1000000000000L); 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-05-24T15:03:26.780

为了减少冗长，您可以使用静态导入：

```
import static java.util.concurrent.TimeUnit.NANOSECONDS; 
```

- 从此只需键入

```
NANOSECONDS.toSeconds(elapsedTime); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-10-08T07:13:38.707

你应该写：

```
 long startTime = System.nanoTime();        
    long estimatedTime = System.nanoTime() - startTime; 
```

在变量中分配 endTime 可能会导致几纳秒。在这种方法中，您将获得确切的经过时间。

进而：

```
TimeUnit.SECONDS.convert(estimatedTime, TimeUnit.NANOSECONDS) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-10-26T12:56:44.270

这将以双精度格式将时间转换为秒，这比整数值更精确：

```
double elapsedTimeInSeconds = TimeUnit.MILLISECONDS.convert(elapsedTime, TimeUnit.NANOSECONDS) / 1000.0; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-09T12:02:56.380

**JDK9** + 使用**java.time.Duration的解决方案**

```
Duration.ofNanos(1_000_000L).toSeconds() 
```

[https://docs.oracle.com/javase/9​​/docs/api/java/time/Duration.html#ofNanos-long-](https://docs.oracle.com/javase/9/docs/api/java/time/Duration.html#ofNanos-long-)

[https://docs.oracle.com/javase/9​​/docs/api/java/time/Duration.html#toSeconds--](https://docs.oracle.com/javase/9/docs/api/java/time/Duration.html#toSeconds--)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-01T03:14:12.513

在`Java 8`or`Kotlin`中，我使用`Duration.ofNanos(1_000_000_000)`like

```
val duration = Duration.ofNanos(1_000_000_000)
logger.info(String.format("%d %02dm %02ds %03d",
                elapse, duration.toMinutes(), duration.toSeconds(), duration.toMillis())) 
```

阅读更多[https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html](https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html)

# c# - 休眠Linq

> ID：924211
> 
> 赞同：5
> 
> 时间：2009-05-29T02:58:24.297
> 
> 标签：c#, linq, nhibernate

我正在为 nHibernate 使用旧的 linq 提供程序，并耐心等待新的提供程序出来。我相信它会为我省去很多痛苦。无论如何，我对下面的代码有疑问，因为它会生成“未设置为对象实例的对象引用”。“c.Disciplines.Any(d => disciplines.Contains(d))”这一行是导致问题的原因。使用 nHibernate Linq 这样的语句是否存在任何已知问题？

```
var agencies = m_AgencyRepository.Linq;

Discipline[] disciplines = user.Disciplines.ToArray<Discipline>();

return (from c in agencies
                   where (String.IsNullOrEmpty(criteria.AgencyName) || c.AgencyName.Contains(criteria.AgencyName))
                    && (criteria.AgencyType == null || c.AgencyType.AgencyTypeId == criteria.AgencyType)
                    && (String.IsNullOrEmpty(criteria.AgencyLevel) || c.AgencyLevel.AgencyLevelId == criteria.AgencyLevel)
                    && (c.Disciplines.Any(d => disciplines.Contains(d)))
select c) 
```

堆栈跟踪：

```
 at NHibernate.Loader.Criteria.CriteriaQueryTranslator.GetEntityName(ICriteria subcriteria, String propertyName)
   at NHibernate.Loader.Criteria.CriteriaQueryTranslator.GetType(ICriteria subcriteria, String propertyName)
   at NHibernate.Loader.Criteria.CriteriaQueryTranslator.GetTypeUsingProjection(ICriteria subcriteria, String propertyName)
   at NHibernate.Criterion.InExpression.GetTypedValues(ICriteria criteria, ICriteriaQuery criteriaQuery)
   at NHibernate.Criterion.Junction.GetTypedValues(ICriteria criteria, ICriteriaQuery criteriaQuery)
   at NHibernate.Loader.Criteria.CriteriaQueryTranslator.GetQueryParameters()
   at NHibernate.Criterion.SubqueryExpression.InitializeInnerQueryAndParameters(ICriteriaQuery criteriaQuery)
   at NHibernate.Criterion.SubqueryExpression.ToSqlString(ICriteria criteria, ICriteriaQuery criteriaQuery, IDictionary`2 enabledFilters)
   at NHibernate.Criterion.Junction.ToSqlString(ICriteria criteria, ICriteriaQuery criteriaQuery, IDictionary`2 enabledFilters)
   at NHibernate.Loader.Criteria.CriteriaQueryTranslator.GetWhereCondition(IDictionary`2 enabledFilters)
   at NHibernate.Loader.Criteria.CriteriaJoinWalker..ctor(IOuterJoinLoadable persister, CriteriaQueryTranslator translator, ISessionFactoryImplementor factory, CriteriaImpl criteria, String rootEntityName, IDictionary`2 enabledFilters)
   at NHibernate.Loader.Criteria.CriteriaLoader..ctor(IOuterJoinLoadable persister, ISessionFactoryImplementor factory, CriteriaImpl rootCriteria, String rootEntityName, IDictionary`2 enabledFilters)
   at NHibernate.Impl.SessionImpl.List(CriteriaImpl criteria, IList results)
   at NHibernate.Impl.CriteriaImpl.List(IList results)
   at NHibernate.Impl.CriteriaImpl.List()
   at NHibernate.Impl.CriteriaImpl.UniqueResult()
   at NHibernate.Linq.Visitors.ImmediateResultsVisitor`1.HandleAggregateCall(MethodCallExpression call)
   at NHibernate.Linq.Visitors.ImmediateResultsVisitor`1.VisitMethodCall(MethodCallExpression call)
   at NHibernate.Linq.Visitors.ExpressionVisitor.Visit(Expression exp)
   at NHibernate.Linq.Visitors.NHibernateExpressionVisitor.Visit(Expression exp)
   at NHibernate.Linq.Visitors.ImmediateResultsVisitor`1.GetResults(MethodCallExpression expr)
   at NHibernate.Linq.Visitors.RootVisitor.HandleImmediateResultsCall(MethodCallExpression call)
   at NHibernate.Linq.Visitors.RootVisitor.VisitMethodCall(MethodCallExpression expr)
   at NHibernate.Linq.Visitors.ExpressionVisitor.Visit(Expression exp)
   at NHibernate.Linq.Visitors.NHibernateExpressionVisitor.Visit(Expression exp)
   at NHibernate.Linq.Visitors.NHibernateQueryTranslator.Translate(Expression expression, QueryOptions queryOptions)
   at NHibernate.Linq.NHibernateQueryProvider.Execute(Expression expression)
   at NHibernate.Linq.QueryProvider.System.Linq.IQueryProvider.Execute[T](Expression expression)
   at System.Linq.Queryable.Count[TSource](IQueryable`1 source)
   at PPSS.Services.AgencyRepository.List(AgencyListCriteria criteria, Int32& total) in C:\Development\PPSS\PPSS.Services\Services\Agency\AgencyRepository.cs:line 57
   at PPSS.Models.AgencyViewData..ctor(AgencyListCriteria criteria) in C:\Development\PPSS\PPSS\Domains\Maintenance\ViewModels\AgencyViewData.cs:line 26
   at PPSS.Controllers.AgencyController.Index(AgencyListCriteria criteria) in C:\Development\PPSS\PPSS\Domains\Maintenance\Controllers\AgencyController.cs:line 34
   at lambda_method(ExecutionScope , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClassa.<InvokeActionMethodWithFilters>b__7()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-12-11T00:45:16.950

改变

```
user.Disciplines.ToArray<Discipline>() 
```

至

```
user.Disciplines.ToList<Discipline>() 
```

NHibernate 理解`.Contains()`对具体`List`对象的调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T03:12:58.183

您是否尝试过在对其执行 Any 之前检查 c.Disciplines 是否为非空？大概`disciplines`是非空的，但你也可以检查它。

```
 (c.Disciplines != null
    && c.Disciplines.Any(d => disciplines != null
                               && disciplines.Contains(d))) 
```

# c++ - 从 DLL 向 Vista 中另一个进程中的窗口发送消息

> ID：924215
> 
> 赞同：2
> 
> 时间：2009-05-29T02:59:40.877
> 
> 标签：c++, winapi, windows-vista, sendmessage, uipi

我正在把头发拉出来。我正在尝试向另一个进程中的窗口发送消息。在调用 SendMessage 或 PostMessage 或 PostThreadMessage 后，我不断从 GetLastError() 获得访问被拒绝 (0x5)。我试过关闭UAC。我还通过确保完整性级别与跨进程匹配来说明 UIPI。（我使用 SysInternals 的 Process Explorer 进行了检查，现在是 MS）我也关闭了 Windows Defender，但没有运气。我可以从进程内部向窗口发送消息就好了，但是从外部我得到了bupkus！这似乎是某种安全问题，但我不知道它是什么，因为两个进程具有相同的完整性级别（中 - 十进制 8192）

来自 DLL 的代码发送消息

```
UINT MsgCode = ::RegisterWindowMessage(_T("MESSAGE_CODING_STRING"));
::ChangeWindowMessageFilter(MsgCode,MSGFLT_ADD);
::PostMessage(hwnd1,MsgCode,(WPARAM)1,(LPARAM)1);
DWORD errorcode = ::GetLastError(); 
```

从接收窗口中选择的代码

```
BEGIN_MESSAGE_MAP(CMessageMailBox, CDialog)
    ON_REGISTERED_MESSAGE(MsgCode, TextFromApp)
END_MESSAGE_MAP()

// Class Constructor    
CMessageMailBox::CMessageMailBox(CWnd* pParent /*=NULL*/)
        : CDialog(CMessageMailBox::IDD, pParent){
       MsgCode = ::RegisterWindowMessage(_T("MESSAGE_CODING_STRING"));
       ::ChangeWindowMessageFilter(MsgCode,MSGFLT_ADD);
    }

//Message Handler   
    afx_msg LRESULT CMessageMailBox::TextFromApp(WPARAM wParam,LPARAM lParam){
        ::MessageBox(NULL,L"message recieved",L"yea!",MB_OK);
        return 0L;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T05:35:07.040

一定要留言吗？不同进程之间有多种通信方式：

*   管道
*   插座
*   共享内存
*   文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-22T14:11:15.573

看起来这是用户界面特权隔离（UIPI）的情况（也就是说，如果您的 DLL 被加载到另一个进程）

在接收进程上使用[ChangeWindowMessageFilterEx 。](https://msdn.microsoft.com/en-us/library/dd388202.aspx)我希望它会工作

# permutation - 固定位置排列/组合

> ID：924217
> 
> 赞同：0
> 
> 时间：2009-05-29T03:00:04.450
> 
> 标签：permutation, combinations

我正在寻找一种方法，我可以生成 4 个集合元素的不同组合，这样每个集合的元素在最终组合中都有一个固定的位置：为了更好地解释我的要求，让我给出这 4 个集合的样本，最后我我正在寻找：

Set#1(街道前方向) { N, S } Set#2(街道名称) {Frankford, Baily} Set#3(街道类型) {Ave, St} Set#4(街道后方向) {S}

让我列出几个预期的组合：
**N Baily Ave S
S Frankford St S
S Baily Av S
。
.
.**

现在你可以看到每个集合的元素都在它的位置
Pre Direction is in Place 1
Street Name is in Place 2
Streety Type is in Place 3
Street Description is in Place 4

我正在寻找执行此任务的最有效方法，一种方法是一次处理 2 组，例如： 组合
第 1 组和第 2 组 --> 创建一个新的第 5 组结果组合
第 5 组和第 3 组的组合 --> 创建一个新的第 6 组结果组合
组合第 6 组和第 4 组 --> 这将为我提供最终组合

有没有最好的方法来做这件事？请帮忙。我会更喜欢 C# 或 Java。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T03:25:05.100

这是一些为您提供所有组合的 linq (c#)，它不是“最有效的方式”。

```
var query =
  from d in predirections
  from n in names
  from t in types
  from s in postdirections
  select new {d, n, t, s}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T03:09:00.670

听起来您正在寻找某些集合的笛卡尔积。您可以使用嵌套的 for 循环来做到这一点。这是您没有要求的 Haskell 代码。

```
Prelude> [[x,y] | x <- ['1'..'3'], y <- ['A'..'C']]
["1A","1B","1C","2A","2B","2C","3A","3B","3C"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T18:18:50.880

@David B 如果 predirections 列表为空怎么办，有没有办法让我们仍然获得组合，因为通过你的方式不会返回任何笛卡尔积。

* * *

大卫 B 在这里：

```
var query =
  from d in predirections.DefaultIfEmpty()
  from n in names.DefaultIfEmpty()
  from t in types.DefaultIfEmpty()
  from s in postdirections.DefaultIfEmpty()
  select new {d, n, t, s}; 
```

# qt - glutswapbuffers() 的 Qt 等效函数

> ID：924227
> 
> 赞同：4
> 
> 时间：2009-05-29T03:04:20.337
> 
> 标签：qt, function

请告诉我 glutswapbuffers() 的 Qt 等效函数是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-29T03:16:08.597

```
QGLContext::swapBuffers() 
```

或者，如果您正在使用小部件：

```
QGLWidget::swapBuffers() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T03:13:21.847

可能[是 QGLWidget::swapBuffers](http://doc.trolltech.com/4.5/qglwidget.html#swapBuffers)。完全未经测试。

# jdbc - Weblogic 错误 - 不支持方法：Statement.cancel

> ID：924233
> 
> 赞同：0
> 
> 时间：2009-05-29T03:09:12.980
> 
> 标签：jdbc, weblogic

我在 Weblogic 9.2 MP3 上运行一个应用程序，目前连接池有问题。

```
ERROR - UserBean retrieving user record. weblogic.jdbc.extensions.PoolLimitSQLException: 
weblogic.common.resourcepool.ResourceLimitException: No resources currently available in pool MyApp Data Source to allocate to applications, please increase the size of the pool and retry.. 
```

我也不断收到错误消息，说“ `Method not supported : Statement.cancel()`”，我认为这是导致上述错误的原因。

```
<Error> <JDBC> <BEA-001131> <Received an exception when closing a cached statement for the pool "MyApp Data Source": java.sql.SQLException: Method not supported : Statement.cancel()..> 
```

我浏览了应用程序源代码，应用程序似乎根本没有使用这种方法。尽管它可能与 weblogic 本身有关。

任何人有任何想法来解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-11-26T11:10:09.817

首先，我会确保我正在关闭每个`java.sql.Connection`变量。

例如

```
final Connection connection = dataSource.getConnection();

// do your database work here

if (connection != null) {
    connection.close();
} 
```

您可以通过放入try/catch 块`connection.close();`的`finally`一部分来使其更加紧密。

# c# - Ubuntu 9.04 上最新的 Mono + MonoDevelop 最好的设置是什么？

> ID：924239
> 
> 赞同：5
> 
> 时间：2009-05-29T03:14:38.693
> 
> 标签：c#, mono, installation, monodevelop, ubuntu-9.04

我开始在笔记本电脑上使用 Ubuntu 9.04。我真正想要的是能够在 Ubuntu 上编写我的 C# 项目，包括单元测试。谁能指导我如何设置它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-03T23:11:59.583

除了 Matthew 建议的基本包之外，您还需要`monodevelop-nunit`包，它允许您从 IDE 中运行和调试单元测试。对于调试器，您需要`monodevelop-debugger-mdb`. 您可能还需要`monodevelop-versioncontrol`SVN 支持、`mono-xsp2`运行 ASP.NET 应用程序和`monodoc-browser`文档查看器。

也许你最好只安装 MonoDevelop 包“建议”的所有包——我相信 Ubuntu 包管理器有一种方法可以从它的 GUI 轻松地做到这一点。

请注意，Ubuntu 将 Mono 拆分为许多小包，因此如果缺少某些内容，请使用该`apt-file`工具或类似工具来查找需要安装的包。

Ubuntu 还没有 Mono 2.4 包；如果您需要 100% 最新的软件包，最好的选择是使用 openSUSE。现在在 Ubuntu 上获得 2.4 的唯一方法是从源代码构建——如果您决定这样做，请先阅读[如何不破坏 Mono 安装](http://mjhutchinson.com/journal/2007/11/08/how_not_break_mono)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-07-01T21:18:08.150

与此同时，您可能已经更新到 10.04。对于 10.04（和 8.04），您可以使用[badgerports](http://badgerports.org/)。我（还）没有尝试过，但它看起来很可靠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-14T15:56:33.977

我建议使用 2.4，因为它具有所有最新的 .net 优点。

我建议使用两个指南：

[http://blog.ruski.co.za/page/Install-Mono-on-Ubuntu.aspx](http://blog.ruski.co.za/page/Install-Mono-on-Ubuntu.aspx)

[http://www.centriment.com/2009/04/01/building-mono-24-from-source-on-ubuntu-810/](http://www.centriment.com/2009/04/01/building-mono-24-from-source-on-ubuntu-810/)

后者可让您保留 ubuntu 附带的单声道安装，因此您仍然可以从 synaptic 安装应用程序。我建议使用这个。然而，这两个指南都非常清楚安装它需要什么。起初它看起来很危险，但如果你花几个小时来遵循它，那么你会发现它实际上很容易。

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T03:24:38.267

编辑：添加了单声道开发

我使用的是 Ubuntu 8.04，但你真正需要设置什么？正在做（如果你还没有）：

sudo apt-get install monodevelop nunit mono-devel

应该给你你需要的。并且有很多关于 monodevelop（例如[http://monodevelop.com/Documentation/Creating_A_Simple_Solution](http://monodevelop.com/Documentation/Creating_A_Simple_Solution)）和 NUnit（例如[http://www.nunit.org/index.php?p=quickStart&r=2.4.8](http://www.nunit.org/index.php?p=quickStart&r=2.4.8)）的教程

# pdf - iTextSharp & Windows

> ID：924244
> 
> 赞同：0
> 
> 时间：2009-05-29T03:17:57.597
> 
> 标签：pdf, printing, itext

有没有办法从 iTextSharp`Document`类转换为`System.Drawing.Printing.PrintDocument`（在 c# 中），以便我可以为用户提供打印设施？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T13:13:44.027

iText 可以读取、解析和写入 pdf 文件。它无法渲染它们。

看看一些可以做到这一点的商业库，或者像 GhostScript 之类的东西。

# php - 获取一个月中的第一个或最后一个星期五

> ID：924246
> 
> 赞同：14
> 
> 时间：2009-05-29T03:20:37.527
> 
> 标签：php, datetime

我正在尝试编写这样的日历功能

```
function get_date($month, $year, $week, $day, $direction)
{
    ....
} 
```

`$week`是一个整数 (1, 2, 3...)，$day 是一天 (Sun, Mon, ...) 或数字，以较容易者为准。方向有点混乱，因为它做了不同的计算。

例如，让我们调用

`get_date(5, 2009, 1, 'Sun', 'forward');`

它使用默认值，并获取 5 月的第一个星期日，即 2009-05-03。如果我们打电话

`get_date(5, 2009, 2, 'Sun', 'backward');`

，它返回 5 月的倒数第二个星期日，即 2009-05-24。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-05-29T03:35:11.433

与语言无关的版本：

要获取该月的第一天，请从该月的第一天开始：yyyy-mm-01。使用任何可用的函数来给出对应于星期几的数字。从您要查找的日期中减去该数字；例如，如果该月的第一天是星期三 (2)，而您正在寻找星期五 (4)，则从 4 中减去 2，留下 2。如果答案是否定的，则加 7。最后将其添加到第一个这个月; 以我为例，第一个星期五是第三个星期五。

要获得该月的最后一个星期五，请找到下个月的第一个星期五并减去 7 天。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-05-29T04:19:31.763

也许它可以做得更快......
这对代码来说非常有趣。

请注意，`$direction`1 表示前进，-1 表示后退，以使事情变得轻松 :)
此外，`$day`周一以 1 开始，周日以 7 结束。

```
function get_date($month, $year, $week, $day, $direction) {
  if($direction > 0)
    $startday = 1;
  else
    $startday = date('t', mktime(0, 0, 0, $month, 1, $year));

  $start = mktime(0, 0, 0, $month, $startday, $year);
  $weekday = date('N', $start);

  if($direction * $day >= $direction * $weekday)
    $offset = -$direction * 7;
  else
    $offset = 0;

  $offset += $direction * ($week * 7) + ($day - $weekday);
  return mktime(0, 0, 0, $month, $startday + $offset, $year);
} 
```

我已经用一些示例对其进行了测试，并且似乎总是可以正常工作，但请务必仔细检查；）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-27T22:15:03.807

PHP 的内置时间函数使这变得简单。

[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

```
// Get first Friday of next month.
$timestamp = strtotime('first fri of next month');

// Get second to last Friday of the current month.
$timestamp = strtotime('last fri of this month -7 days');

// Format a timestamp as a human-meaningful string.
$formattedDate = date('F j, Y', strtotime('first wed of last month')); 
```

请注意，我们始终希望确保我们已经定义了正确的时区以供使用，`strtotime`以便 PHP 了解相对于机器认为它所在的时区而言，计算时间戳的位置。

```
date_default_timezone_set('America/New_York');
$formattedDate = date('F j, Y', strtotime('first wed of last month +1 week')); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-05-29T09:15:24.177

[strtotime()](http://php.net/strtotime)可以帮助你。例如

```
<?php
$tsFirst = strtotime('2009-04-00 next friday');
$tsLast = strtotime('2009-05-01 last friday');
echo date(DATE_RFC850, $tsFirst), " | ", date(DATE_RFC850, $tsLast);
```

印刷

```
2009 年 4 月 3 日星期五 00:00:00 CEST | 2009 年 4 月 24 日星期五 00:00:00 CEST
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-11-16T03:30:44.353

**不需要计算或循环——这很容易用 strtotime() 来完成：**

查找特定月份中特定日期的第 N 次或最后一次出现：

```
/////////////////////////////////////////////////////////////////
// Quick Code
/////////////////////////////////////////////////////////////////

// Convenience mapping.
$Names = array( 0=>"Sun", 1=>"Mon", 2=>"Tue", 3=>"Wed", 4=>"Thu", 5=>"Fri", 6=>"Sat" );

// Specify what we want
// In this example, the Second Monday of Next March
$tsInMonth = strtotime('March');
$Day = 1;
$Ord = 2;

// The actual calculations
$ThisMonthTS = strtotime( date("Y-m-01", $tsInMonth ) );
$NextMonthTS = strtotime( date("Y-m-01", strtotime("next month", $tsInMonth) ) );
$DateOfInterest = (-1 == $Ord) 
    ? strtotime( "last ".$Names[$Day], $NextMonthTS ) 
    : strtotime( $Names[$Day]." + ".($Ord-1)." weeks", $ThisMonthTS ); 

/////////////////////////////////////////////////////////////////
// Explanation
/////////////////////////////////////////////////////////////////

// Specify the month of which we are interested.
// You can use any timestamp inside that month, I'm using strtotime for convenience.
$tsInMonth = strtotime('March');

// The day of interest, ie: Friday.  
// It can be 0=Sunday through 6=Saturday (Like 'w' from date()).
$Day = 5;

// The occurrence of this day in which we are interested.  
// It can be 1, 2, 3, 4 for the first, second, third, and fourth occurrence of the day in question in the month in question.
// You can also use -1 to fine the LAST occurrence.  That will return the fifth occurrence if there is one, else the 4th.
$Ord = 3;

////////////////////////////////////////////////////////////////
// We now have all the specific values we need.
// The example values above specify the 3rd friday of next march
////////////////////////////////////////////////////////////////

// We need the day name that corresponds with our day number to pass to strtotime().
// This isn't really necessary = we could just specify the string in the first place, but for date calcs, you are more likely to have the day number than the string itself, so this is convenient.
$Names = array( 0=>"Sun", 1=>"Mon", 2=>"Tue", 3=>"Wed", 4=>"Thu", 5=>"Fri", 6=>"Sat" );

// Calculate the timestamp at midnight of the first of the month in question.
// Remember $tsInMonth is any date in that month.
$ThisMonthTS = strtotime( date("Y-m-01", $tsInMonth ) );

// Calculate the timestamp at midnight of the first of the FOLLOWING month.
// This will be used if we specify -1 for last occurrence.
$NextMonthTS = strtotime( date("Y-m-01", strtotime("next month", $tsInMonth) ) );

// Now we just format the values a bit and pass them to strtotime().
// To find the 1,2,3,4th occurrence, we work from the first of the month forward.
// For the last (-1) occurence,work we work back from the first occurrence of the following month.
$DateOfInterest = (-1 == $Ord) ?
    strtotime( "last ".$Names[$Day], $NextMonthTS ) : // The last occurrence of the day in this month.  Calculated as "last dayname" from the first of next month, which will be the last one in this month. 
    strtotime( $Names[$Day]." + ".($Ord-1)." weeks", $ThisMonthTS ); // From the first of this month, move to "next dayname" which will be the first occurrence, and then move ahead a week for as many additional occurrences as you need. 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-06-13T05:48:06.493

```
echo date('Y-m-d',strtotime('last friday')); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-29T03:34:21.120

您可以使用[mktime](http://se2.php.net/mktime)检索该月第一天的 unix 时间戳：

```
$firstOfMonth = mktime(0, 0, 0, $month, 1, $year); 
```

当您有某个月的第一天的日期时，很容易使用[date](http://se2.php.net/manual/en/function.date.php)检索该日期的工作日：

```
$weekday = date("N", $firstOfMonth); 
```

从那里可以很容易地向前走以获得您想要的日期。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-07-14T23:40:34.263

```
function get_date($month, $year, $week, $day) {
    # $month, $year: current month to search in
    # $week: 0=1st, 1=2nd, 2=3rd, 3=4th, -1=last
    # $day:  0=mon, 1=tue, ..., 6=sun

    $startday=1; $delta=0;
    if ($week < 0) {
        $startday = date('t', mktime(0, 0, 0, $month, 1, $year)); # 28..31
        $delta=1;
    }
    $start  = mktime(0, 0, 0, $month, $startday, $year);
    $dstart = date('w', $start)-1; # last of the month falls on 0=mon,6=sun
    $offset=$day-$dstart; if ($offset<$delta){$offset+=7;}
    $newday=$startday+$offset+($week*7);
    return mktime(0, 0, 0, $month, $newday, $year);
} 
```

这对我有用，并且基于与语言无关的版本 :-) 太糟糕了，我需要做那个 delta 的事情（因为如果一个月的最后一天是想要的工作日，我们不需要减去7)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-29T03:57:50.420

只需找出有关月份的第一天和最后一天是什么（即 2009 年 5 月 1 日是星期五，2009 年 5 月 31 日是星期日）我相信大多数 PHP 函数使用星期一 = 0，星期日 = 6，因此星期五 = 4，所以你知道星期日 (6) - 星期五 (4) = 2，然后 31-2 = 29，这意味着本月的最后一个星期五是 29 日。第一个星期五，如果数字为负数，则加 7，如果数字为 0，则月份从星期五开始。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-11-20T09:08:27.923

使用`DateTime`类可以非常优雅地完成相同的操作。

```
$time_zone = new DateTimeZone('Europe/Ljubljana');

$first_friday_of_this_month = new DateTime('first Friday of this month', $time_zone);
$last_friday_of_this_month = new DateTime('last Friday of this month', $time_zone);

echo $first_friday_of_this_month->format('Y-m-d');  # 2015-11-06
echo $last_friday_of_this_month->format('Y-m-d');  # 2015-11-27 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-12-09T15:32:37.497

这似乎每次都很完美；它采用提供的任何日期并返回该月的最后一个星期五的日期，即使是该月的 5 个星期五。

```
function get_last_friday_of_month($inDate) {
    $inDate = date('Y-m-24', strtotime($inDate));
    $last_friday = date('Y-m-d',strtotime($inDate.' next friday'));
    $next_friday = date('Y-m-d',strtotime($inDate.' next friday'));

    if(date('m', strtotime($last_friday)) === date('m', strtotime($next_friday))){
        $last_friday = $next_friday;
    }else{
        //
    }
    return $last_friday;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-12-27T14:54:39.037

以下是最快的解决方案，您可以在所有条件下使用。如果你稍微调整一下，你也可以得到一周中的一整天的数组。

```
function findDate($date, $week, $weekday){
    # $date is the date we are using to get the month and year which should be a datetime object
    # $week can be: 0 for first, 1 for second, 2 for third, 3 for fourth and -1 for last
    # $weekday can be: 1 for Monday, 2 for Tuesday, 3 for Wednesday, 4 for Thursday, 5 for Friday, 6 for Saturday and 7 for Sunday 

    $start = clone $date;
    $finish = clone $date;

    $start->modify('first day of this month');
    $finish->modify('last day of this month');
    $finish->modify('+1 day');

    $interval = DateInterval::createFromDateString('1 day');
    $period = new DatePeriod($start, $interval, $finish);

    foreach($period AS $date){
        $result[$date->format('N')][] = $date;
    }

    if($week == -1)
        return end($result[$weekday]);
    else
        return $result[$weekday][$week];
}

$date = DateTime::createFromFormat('d/m/Y', '25/12/2016');

# find the third Wednesday in December 2016
$result = findDate($date, 2, 3); 
echo $result->format('d/m/Y'); 
```

我希望这有帮助。

如果您需要任何进一步的信息，请告诉我。;)

# objective-c - 在 Objective-C 中填充对象

> ID：924247
> 
> 赞同：1
> 
> 时间：2009-05-29T03:21:22.207
> 
> 标签：objective-c, cocoa

我正在尝试在 for 循环中动态填充字典，如下所示：

伪代码

```
myObject = new Object
myDict = new Dictionary
for(int i; i < 10;i++)
  myObject.value1 = new data from somewhere
  myObject.value2 = new data from somewhere
  myDic = value:myObject key:i
end for 
```

所以我的问题是在 Objective-C 中，我可以`myObject`在循环中每次都将新数据分配给而不释放它吗？我仍在尝试找出 Objective-C 中的内存管理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-29T03:28:47.510

这取决于`myObject`实际是什么以及您如何定义其属性。假设您将它们定义为发布，如下所示：

```
@property (nonatomic, retain) SomeClass *myProperty; 
```

那么是的，你可以这样做。设置器由 Objective-C 版本自动为您合成，并在保留和分配新值之前将属性的旧值设置为 nil。

**但是**，虽然您的内存管理没有问题，但您的代码仍然存在问题。请记住，这`myObject`是一个指针，就像在 C 或 C++ 中一样。这意味着，如果您将其添加到`myDic`对象并稍后修改对象的属性（例如在 for 循环的下一次迭代中），这些更改将在您将来某个时候从字典中拉出对象时反映出来. 你想要的是这样的：

```
myObject = nil
myDict = new Dictionary
for(int i; i < 10;i++)
  myObject = new Object
  myObject.value1 = new data from somewhere
  myObject.value2 = new data from somewhere
  myDic setValue:myObject forKey:i
  myObject release
end for 
```

这样做是`myObject`在将其放入字典后释放（所有可可集合类都保留您放入其中的任何对象，并在它们被删除或集合本身被释放时释放对象），因此您也不会有泄漏as 在每次迭代时分配一个新实例，`Object`这样您就不会一遍又一遍地修改同一个对象。

如果您还没有阅读 Apple 的[Cocoa 内存管理指南](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)，我强烈建议您这样做。这是非常有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-29T03:30:28.803

Objective-C 中的内存管理是通过引用计数来完成的。当你分配一个对象时，它的引用计数为 1。'retain' 方法增加引用计数，而 'release' 减少它。当引用计数达到 0 时，会调用“dealloc”方法（您永远不应该显式调用“dealloc”）并释放对象。

您还可以在对象上调用“自动释放”，这将在“一段时间后”减少引用计数。这使您可以使用该对象而不必担心释放它。

对于你的问题。当您将对象添加到容器时，会在插入的对象上进行“保留”调用。这意味着您必须“释放”插入的对象：

```
NSMutableDictionary *myDict = [[NSMutableDictionary alloc] init];
for( int i = 0; i < 10; ++i ) {
    Object *myObject = [[Object alloc] init];
    [myDict setObject:myObject forKey:[NSNumber numberWithInt:i]];
    [myObject release];
} 
```

您还可以使用：

```
Object *myObject = [[[Object alloc] init] autorelease]; 
```

并且您不必在插入后调用“释放”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T03:34:52.150

您的问题非常开放，这取决于您的`Object`和`Dictionary`实施方式。

首先，您只分配一次对象并在循环中释放它 10 次 -> 内存问题。

如果我们过去了。假设您在循环的每次迭代中分配新对象。

以扩展 NSObject 的 NSMutableDictionary 和 MyObject 作为对象和字典的示例。

当您在 NSMutableDictionary 实例上调用 setObject:forKey 时，该对象将收到保留调用，因此字典会保留对它的引用。

当你`release`在迭代结束时，字典仍然会引用它，所以没关系。

如果您在大循环中使用它，请记住另一件事：

```
Object *myObject = [[[Object alloc] init] autorelease]; 
```

是自动释放的对象进入自动释放池的事实。池在当前事件处理结束时被清理。如果您创建大量对象，则在事件处理结束时可能需要很长时间才能完成它。在这种情况下，您可能会选择仅为循环创建自己的自动释放池 - 但我想这是更高级的主题。

一定要看看 Apple 的一些 Objective-c 和内存管理参考资料。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T04:58:57.277

您所做的仅对一个对象有效，并将该对象放入字典十次。它不会将十个单独的对象放入字典中。

# c# - 使 C# 程序集属性详细显示

> ID：924249
> 
> 赞同：3
> 
> 时间：2009-05-29T03:23:00.457
> 
> 标签：c#, .net, configuration

当您右键单击-> 属性-> exe 上的详细信息时，有没有办法使程序集属性显示？我知道标准的，但我想添加自己的（例如电子邮件）。

编辑：另外，如果有办法进行此后期构建，那很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-08-27T11:37:34.847

版本选项卡上的信息是从可执行文件的[VERSIONINFO](http://msdn.microsoft.com/en-us/library/aa381058(VS.85).aspx)资源中检索的（我们在这里讨论的是本机 Win32 资源，而不是托管资源）。默认情况下，编译器将从一些程序集属性中获取信息并放入 VERSIONINFO 资源中。不幸的是，您无法更改编译器在此处使用的属性，因此您无法以这种方式包含您自己的信息。

但是，如果您真的想要，您可以创建自己的 VERSIONINFO 资源并放入一个 .RES 文件并使用 Csc.exe /win32res 编译器选项嵌入到您的可执行文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T06:28:37.503

还没有看到纯 .NET 解决方案，但也许您可以将[它](http://www.codeproject.com/KB/files/SummInfoPropSetFile.aspx)与[this](https://web.archive.org/web/20100421073303/http://www.codinghorror.com/blog/2004/11/custom-assemblyinfo-attributes.html)结合起来？

# agile - 用户故事是否与 Yourdon 的事件相同？

> ID：924250
> 
> 赞同：0
> 
> 时间：2009-05-29T03:23:23.263
> 
> 标签：agile, methodology

用户故事（通常用于敏捷开发或测试驱动开发）是否与 Edward Yourdon 的结构化分析方法中的事件相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T03:54:45.920

事件和用户故事相关但不相同。Yourdon 事件是对系统的任何刺激，需要系统做出响应，因此，例如，来自外部时钟的滴答声可能是一个事件。这可能需要响应，例如，通过增加一个计数器，但它不一定会导致对客户具有直接业务价值的结果，因此不会是有效的用户故事或用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T03:41:21.320

用户故事是一种用于简要描述业务、技术或其他类型需求的模式。例如：

**作为**风险分析师，我**想**添加对应用程序页面的引用，**以便**我们可以将引用与应用程序一起存储，然后验证团队可以在其中使用它们来帮助提高我们承保的风险率。

然后在您的用户故事中，您将分解描述完成“想要”所需的任务的故事，其中“完成”检查点是“这样”。

Mike Cohn 有一篇关于用户故事及其优势的好文章[http://www.mountaingoatsoftware.com/articles/27-advantages-of-user-stories-for-requirements](http://www.mountaingoatsoftware.com/articles/27-advantages-of-user-stories-for-requirements)

至于 Edward Yourdon 的结构化分析方法，我不得不承认我对它不是很熟悉，所以我无法回答你的那部分问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-25T20:49:50.317

没错，UML 中的用户故事和用例是对 Yourdon 事件的重写。它们只是轮子的重新发明。

# sql-server-2005 - 数据库复制或镜像？

> ID：924252
> 
> 赞同：9
> 
> 时间：2009-05-29T03:24:12.310
> 
> 标签：sql-server-2005, replication

SQL Server 2005 中的复制和镜像有什么区别？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-29T03:33:49.733

简而言之，镜像允许您让第二台服务器成为主服务器的“热”备用副本，随时准备接管主服务器出现故障。因此，镜像提供了故障转移和可靠性。

另一方面，复制允许两个或多个服务器保持“同步” - 这意味着辅助服务器可以回答查询并（取决于设置）实际更改数据（它将在同步中合并）。您还可以将其用于本地缓存、负载平衡等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-29T03:53:16.200

镜像是一种在位级别创建数据库副本的功能。基本上，您在两个地方拥有相同的、相同的数据库。您不能选择性地省略部分数据库。您只能拥有一个镜像，并且“镜像”始终处于脱机状态（无法修改）。镜像通过将正在创建的数据库日志传送到镜像并在镜像上应用（重做）日志来工作。镜像是一种实现高可用性和灾难恢复的技术。

复制是一种允许在多个站点之间复制数据库“切片”的功能。“切片”可以是一组数据库对象（即表），但它也可以包含表的一部分，例如仅某些行（水平切片）或仅要复制的某些列。您可以拥有多个副本，并且“副本”可用于查询，甚至可以更新。复制通过跟踪/检测更改（通过触发器或通过扫描日志）并将更改作为 T-SQL 语句传送给订阅者（副本）来工作。复制是一种使数据在异地可用并将数据整合到中央站点的技术。尽管它有时用于高可用性或灾难恢复性，但它是人为地用于解决镜像和日志传送更好地解决的问题。

复制有多种类型和风格（合并、事务、对等等），它们在实现更改跟踪或更新传播的方式上有所不同，如果您想了解更多详细信息，您应该阅读[有关该主题的 MSDN 规范](http://msdn.microsoft.com/en-us/library/ms151198(SQL.90).aspx).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-29T04:44:15.770

数据库镜像用于增加数据库正常运行时间和可靠性。

复制主要用于将部分主数据库（发布者）分发到一个或多个订阅者数据库。这样做通常是为了使远程服务器上的数据可用（通常为只读），以便远程客户端可以在本地（对它们）访问数据，而不是通过较慢的 WAN 连接直接从发布者访问数据。虽然，正如之前的帖子所指出的，有更复杂的场景允许订阅者进行更新。它还可以减少发布者的 I/O 负载。

# asp.net - 添加 标签到 GridView 中的 ItemTemplate

> ID：924256
> 
> 赞同：1
> 
> 时间：2009-05-29T03:25:14.977
> 
> 标签：asp.net, html, gridview, tags

我在 gridview 中的项目模板是这样标记的。

我在哪里添加

```
标签？

`<ItemTemplate>  

  <asp:Label ID="Label1" runat="server" Text='<% Eval("datacol") %>' 
  </asp:Label> 

</ItemTemplate>` 

            回答 #1

赞同：3

时间：2009-05-29T04:53:28.497

我错过了什么吗？

为什么不试试：

```
<ItemTemplate>    
    <pre><%# Eval("datacol") %></pre>
</ItemTemplate> 
```

它将 HTML 保留在它通常所属的 ASPX 页面中，除非您特别需要 label 标记。

            回答 #2

赞同：0

时间：2009-05-29T03:33:25.113

因为我意识到这与您之前的问题有关：[ASP.Net Binding to Gridview Strips some space (whitespace characters)](https://stackoverflow.com/questions/924058/asp-net-binding-to-gridview-strips-some-space-whitespace-characters/924115#924115)

请参考我在该问题中的回答。可以使用相同的原则在 DataBound 值周围添加任何类型的标签。对于这个特定的问题，这样的方法可以完成你想要的。

```
protected void gbGridWithSpaces_RowDataBound(object sender, GridViewRowEventArgs e)
{
    foreach (TableCell cell in e.Row.Cells)
    {
        cell.Text = "<pre>" + cell.Text + "</pre>";
    }
} 
```

            回答 #3

赞同：0

时间：2009-05-29T03:56:00.387

另一种选择是创建自己的自定义控件并放置在那里

```
<ItemTemplate>      
  <cc1:MyCustomControl ID="MyCustomControl1" runat="server" Text='<% Eval("datacol") %>' />        
</ItemTemplate> 
```

真的，我不知道它是否更好，也许创建一个仅用于添加预标签的类/用户控件有点贵，但我认为在你的代码隐藏文件中不那么突兀。

        c++ - 堆栈上的 C++ 编程书籍示例

ID：924257

赞同：2

时间：2009-05-29T03:25:58.140

标签：c++, syntax-error

在这本书中，我正在学习这本书是如何编写堆栈的，但是当我编译它时，它会遇到一个编译错误：

```
#define DEFAULT_SIZE = 10

class Stack
{
    private:
        int size;
        int top;
        int *value;

    public:
        Stack( int size = DEFAULT_SIZE );
        virtual ~Stack();
        bool isFull();
        bool isEmpty();
        void push(int);
        int pop();
}; 
```

并且错误表明：

```
C:\Documents and Settings\Eddy\Desktop\C++ Playground\Data Structures\stack.h|14|error: expected primary-expression before '=' token|
||=== Build finished: 1 errors, 0 warnings ===| 
```

我使用 Code::Blocks 作为我的 IDE，我相信你不能在一个类中初始化，并且创建一个“DEFAULT_SIZE”通常在默认构造函数中。

我有正确的想法吗？还是我做错了什么？

            回答 #1

赞同：8

时间：2009-05-29T03:27:26.763

做这个：

```
#define DEFAULT_SIZE 10 
```

`=`预处理器定义中不需要该符号。

            回答 #2

赞同：3

时间：2009-05-29T03:29:11.240

`#define`线路错了。您不需要等号`=`。

        mysql - KEY 关键字是什么意思？

ID：924265

赞同：167

时间：2009-05-29T03:31:13.607

标签：mysql, indexing

在这个 MySQL 表定义中：

```
CREATE TABLE groups (
  ug_main_grp_id smallint NOT NULL default '0',
  ug_uid smallint  default NULL,
  ug_grp_id smallint  default NULL,
  KEY (ug_main_grp_id)
); 
```

`KEY`关键字是什么意思？它不是主键，也不是外键，那么它只是一个索引吗？如果是这样，这种类型的索引有什么特别之处`KEY`？

            回答 #1

赞同：209

时间：2009-05-29T03:34:21.773

引用[create-table - 索引和键](https://dev.mysql.com/doc/refman/8.0/en/create-table.html#create-table-indexes-keys)

```
{INDEX|KEY} 
```

所以`KEY`通常是一个`INDEX`

KEY 通常是 INDEX 的同义词。当在列定义中给出键属性 PRIMARY KEY 时，也可以仅将其指定为 KEY。这是为了与其他数据库系统兼容而实现的。

            回答 #2

赞同：38

时间：2011-03-29T21:46:05.853

`KEY`通常是 的同义词`INDEX`。`PRIMARY KEY`也可以`KEY`在列定义中指定key 属性。这是为了与其他数据库系统兼容而实现的。

```
column_definition:
      data_type [NOT NULL | NULL] [DEFAULT default_value]
      [AUTO_INCREMENT] [UNIQUE [KEY] | [PRIMARY] KEY]
      ... 
```

参考：[http ://dev.mysql.com/doc/refman/5.1/en/create-table.html](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)

        c# - 如何在 C# 中对 RichTextBox 进行双重缓冲？

ID：924279

赞同：0

时间：2009-05-29T03:36:55.367

标签：c#, richtextbox

可能不是双缓冲，但我正在尝试使用 RichTextBox 制作荧光笔（纯粹的娱乐）。我遇到的问题是，当有很多突出显示的单词时，会出现程序员制作的闪烁，甚至会看到文本框滚动。

我不认为 RichTextBox 有 DoubleBuffered 属性，即使有，也不会说，闪烁是我的错。

            回答 #1

赞同：2

时间：2009-05-29T17:22:09.580

```
int pos = myTextBox.SelectionStart;
RichTextBox buffer = new RichTextBox();
buffer.Rtf = myRichTextBox.Rtf;

//Do whatever you wanna do in buffer

myTextBox.Rtf = buffer.Rtf;
myTextBox.SelectionStart = pos;
myTextBox.SelectionLength = 0; 
```

Tho，我仍然有一个问题，因为无论我做什么，myTextBox.ZoomFactor 似乎都被删除了。

            回答 #2

赞同：0

时间：2009-09-04T10:26:10.740

在更改颜色之前，只需在 RichTextBox 上使用 LockWindowUpdate。

        css - 为什么是垂直对齐：文本顶部；不能在 CSS 中工作

ID：924282

赞同：85

时间：2009-05-29T03:38:32.000

标签：css, vertical-alignment

我想将一些文本对齐到 div 的顶部。似乎`vertical-align: text-top;`应该可以解决问题，但它不起作用。我所做的其他事情，例如将 div 放入列中并显示虚线边框（这样我可以看到 div 的顶部在哪里）都可以正常工作。

```
#header_p { 
    font-family: Arial;
    font-size: 32px;
    font-weight: bold;
}
#header_selecttxt {
    font-family: Arial;
    font-size: 12px;
    font-weight: bold;
    vertical-align: text-top;
}
#header_div_left { 
    float: left; 
    width: 50%;
    border: dashed;
    vertical-align: top;
}
#header_div_right { 
    margin-left: 50%;
    width: 50%;
    border: dashed;
} 
```

            回答 #1

赞同：125

时间：2009-05-29T03:43:04.833

垂直对齐属性仅适用于内联元素。它不会影响块级元素，例如 div。同样 text-top 仅将文本移动到当前字体大小的顶部。如果您想将内联元素垂直对齐到顶部，请使用它。

```
vertical-align: top; 
```

段落标签没有过时。此外，应用于 span 元素的 vertical-align 属性在某些 mozilla 浏览器中可能无法按预期显示。

            回答 #2

赞同：25

时间：2009-05-31T01:52:16.170

`vertical-align`仅适用于呈现为`inline`.  `<span>`默认情况下呈现为内联，但并非所有元素都是。段落块元素 ,`<p>`默认情况下呈现为块。表格渲染类型（例如`table-cell`）也将允许您使用垂直对齐。

某些浏览器可能允许您`vertical-align`在段落块等项目上使用 CSS 属性，但它们不应该这样做。以段落表示的文本应填充书面语言内容，否则标记不正确，应使用许多其他选项之一。

我希望这有帮助！

            回答 #3

赞同：13

时间：2011-08-15T06:28:40.047

就像是

```
 position:relative;
  top:-5px; 
```

就在内联元素本身对我有用。必须使用顶部才能使其垂直居中...

            回答 #4

赞同：4

时间：2009-05-29T04:08:22.380

您可以应用`position: relative;`到 div，然后应用到`position: absolute; top: 0;`其中包含文本的段落或跨度。

            回答 #5

赞同：1

时间：2014-06-11T20:53:43.013

您可以使用上下文选择器并将垂直对齐移动到那里。那么，这将与 p 标签一起使用。以下面的这个片段为例。您班级中的任何 p 标签都将尊重垂直对齐控件：

```
#header_selecttxt {
    font-family: Arial;
    font-size: 12px;
    font-weight: bold;
}

#header_selecttxt p {
    vertical-align: text-top;
} 
```

您还可以在两个部分中保持垂直对齐，以便其他内联元素使用它。

            回答 #6

赞同：1

时间：2015-09-01T06:18:44.183

以上所有对我都不起作用，我刚刚检查了这个及其工作：

垂直对齐：超级；

```
 <div id="lbk_mng_rdooption" style="float: left;">
     <span class="bold" style="vertical-align: super;">View:</span>
 </div> 
```

我知道填充或边距会起作用，但这是我更喜欢的最后选择。

            回答 #7

赞同：-1

时间：2013-08-27T15:08:10.150

您可以使用 margin-top: -50% 将文本一直移动到 div 的顶部。

```
margin-top: -50%; 
```

            回答 #8

赞同：-1

时间：2017-07-18T09:41:02.723

```
position:absolute;
top:0px; 
margin:5px; 
```

解决了我的问题。

            回答 #9

赞同：-3

时间：2009-05-29T03:44:01.217

我提供的信息无法解决我遇到的问题：

*   我将文本包含在旧学校`<p>`标签中。

我改变了`<p>`它`<span>`，它工作正常。

        jsp - 来自 JSP 的 XML 声明之前的空格

ID：924284

赞同：0

时间：2009-05-29T03:39:37.103

标签：jsp, xhtml, whitespace, w3c-validation, xml-declaration

我正在尝试对我的 JSP 输出进行完整的 XHTML 过渡验证，但遇到了障碍。标题的顶部如下所示：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

它包含在如下语句中：

```
<jsp:include>
  <jsp:attribute name="page"><owportal:page name="/style/portal/header.jsp" /></jsp:attribute>
</jsp:include> 
```

<owportal:page> 标记检查几个不同的路径，以便我们可以在需要时使用特定于项目的标头覆盖它。这样做的问题是 owportal taglib 需要在使用之前进行声明，在 XML 声明之前插入一个空行并导致验证警告。

我曾尝试使用 jsp:output[生成 XML 声明](http://java.sun.com/javaee/5/docs/tutorial/doc/bnajq.html#bnajz)，但运气不佳。谁能让我知道我是否在正确的轨道上？

**更新：**

目前我正在尝试这样的事情

```
<%@ taglib uri="/WEB-INF/yadda/yadda" prefix="yadda" %>

<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" xmlns="http://www.w3.org/1999/xhtml" version="2.0">
  <jsp:output omit-xml-declaration="false" doctype-root-element="html"
              doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
              doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>
</jsp:root>

<html>... 
```

我在 <jsp:root> 行收到错误“无效的标准操作”。不是最有用的错误消息。听起来我可能以某种方式错误地使用了标签。我正在运行 Tomcat 6，所以 JSP 版本应该没有问题。谁能看到我做错了什么？<jsp:root> 是否意味着环绕 <html>？

            回答 #1

赞同：1

时间：2009-06-02T18:26:06.090

如果我对您的理解正确，那么您正在尝试将这个 jsp:include 包含在 JSP 的最顶部，但是在此过程中，您会导致 JSP 在 XML 前导码之前的顶部输出几位空格。

在这种情况下，我只是确保 JSP 没有空格：

```
<jsp:include><jsp:attribute name="page"><owportal:page name="/style/portal/header.jsp" /></jsp:attribute></jsp:include>[your content continues here, not on next line!]... 
```

但我认为您在问一个不同的问题，即如何告诉 JSP 输出 XML 声明。为此，您想从这样的事情开始（假设您在这里使用的是最近的 JSP 规范，如 2.1）...

```
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" xmlns="http://www.w3.org/1999/xhtml" version="2.1">
  <jsp:output
          omit-xml-declaration="false" doctype-root-element="html"
          doctype-public="-//W3C//DTD XHTML 1.0 Strict//EN"
          doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"/>
... 
```

这是处理从 JSP(X) 文件输出 XML 的更正确的方法——更明确。

        java - Java“双大括号初始化”的效率？

ID：924285

赞同：876

时间：2009-05-29T03:40:13.207

标签：java, performance, collections, initialization

在[Hidden Features of Java](https://stackoverflow.com/questions/15496/hidden-features-of-java)中，最佳答案提到了[Double Brace Initialization](http://www.c2.com/cgi/wiki?DoubleBraceInitialization)，其语法*非常*诱人：

```
Set<String> flavors = new HashSet<String>() {{
    add("vanilla");
    add("strawberry");
    add("chocolate");
    add("butter pecan");
}}; 
```

这个习惯用法创建了一个匿名内部类，其中只有一个实例初始化程序，它“可以使用包含范围内的任何 [...] 方法”。  

主要问题：这是否像听起来那样**低效？**它的使用是否应该仅限于一次性初始化？（当然还有炫耀！）

第二个问题：新的 HashSet 必须是实例初始化程序中使用的“this”……有人能解释一下这个机制吗？  

第三个问题：这个成语是否太**晦涩难于**在生产代码中使用？

**摘要：**非常非常好的答案，谢谢大家。关于问题 (3)，人们认为语法应该清晰（尽管我建议偶尔发表评论，特别是如果您的代码将传递给可能不熟悉它的开发人员）。  

关于问题（1），生成的代码应该运行得很快。额外的 .class 文件确实会导致 jar 文件混乱，并稍微减慢程序启动速度（感谢@coobird 测量）。@Thilo 指出垃圾收集可能会受到影响，在某些情况下，额外加载的类的内存成本可能是一个因素。  

问题（2）对我来说是最有趣的。如果我理解答案，DBI 中发生的事情是匿名内部类扩展了由 new 运算符构造的对象的类，因此具有引用正在构造的实例的“this”值。很整齐。

总的来说，DBI 给我的印象是一种智力上的好奇心。Coobird 和其他人指出，您可以使用 Arrays.asList、可变参数方法、Google Collections 和建议的 Java 7 Collection 文字来实现相同的效果。Scala、JRuby 和 Groovy 等较新的 JVM 语言也为列表构造提供了简洁的符号，并与 Java 很好地互操作。鉴于 DBI 会使类路径变得混乱，会稍微减慢类加载速度，并使代码更加晦涩难懂，我可能会回避它。但是，我打算向一个刚刚获得 SCJP 并且喜欢关于 Java 语义的善意的较量的朋友提出这个建议！;-） 谢谢大家！

7/2017：Baeldung对双括号初始化[有一个很好的总结](http://www.baeldung.com/java-double-brace-initialization)，并认为它是一种反模式。

12/2017：@Basil Bourque 指出，在新的 Java 9 中，您可以说：

```
Set<String> flavors = Set.of("vanilla", "strawberry", "chocolate", "butter pecan"); 
```

这肯定是要走的路。如果您对早期版本感到困惑，请查看[Google Collections 的 ImmutableSet](https://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/ImmutableSet.html)。

            回答 #1

赞同：643

时间：2009-05-29T03:59:26.743

当我对匿名内部类太着迷时，这就是问题所在：

```
2009/05/27  16:35             1,602 DemoApp2$1.class
2009/05/27  16:35             1,976 DemoApp2$10.class
2009/05/27  16:35             1,919 DemoApp2$11.class
2009/05/27  16:35             2,404 DemoApp2$12.class
2009/05/27  16:35             1,197 DemoApp2$13.class

/* snip */

2009/05/27  16:35             1,953 DemoApp2$30.class
2009/05/27  16:35             1,910 DemoApp2$31.class
2009/05/27  16:35             2,007 DemoApp2$32.class
2009/05/27  16:35               926 DemoApp2$33$1$1.class
2009/05/27  16:35             4,104 DemoApp2$33$1.class
2009/05/27  16:35             2,849 DemoApp2$33.class
2009/05/27  16:35               926 DemoApp2$34$1$1.class
2009/05/27  16:35             4,234 DemoApp2$34$1.class
2009/05/27  16:35             2,849 DemoApp2$34.class

/* snip */

2009/05/27  16:35               614 DemoApp2$40.class
2009/05/27  16:35             2,344 DemoApp2$5.class
2009/05/27  16:35             1,551 DemoApp2$6.class
2009/05/27  16:35             1,604 DemoApp2$7.class
2009/05/27  16:35             1,809 DemoApp2$8.class
2009/05/27  16:35             2,022 DemoApp2$9.class 
```

这些都是我在制作一个简单的应用程序时生成的所有类，并且使用了大量的匿名内部类——每个类都将被编译到一个单独的`class`文件中。

如前所述，“双括号初始化”是一个带有实例初始化块的匿名内部类，这意味着为每个“初始化”创建一个新类，所有这些通常都是为了制作单个对象。

考虑到 Java 虚拟机在使用它们时需要读取所有这些类，这可能会导致[字节码验证](http://java.sun.com/docs/books/jvms/second_edition/html/ClassFile.doc.html#88597)过程等一些时间。更不用说增加存储所有这些`class`文件所需的磁盘空间了。

使用双括号初始化时似乎有一些开销，所以过分使用它可能不是一个好主意。但正如埃迪在评论中指出的那样，不可能绝对确定影响。

仅供参考，双括号初始化如下：

```
List<String> list = new ArrayList<String>() {{
    add("Hello");
    add("World!");
}}; 
```

它看起来像是 Java 的“隐藏”功能，但它只是对以下内容的重写：

```
List<String> list = new ArrayList<String>() {

    // Instance initialization block
    {
        add("Hello");
        add("World!");
    }
}; 
```

所以它基本上是一个[实例初始化块](http://java.sun.com/docs/books/tutorial/java/javaOO/initial.html)，它是[匿名内部类](http://java.sun.com/docs/books/tutorial/java/javaOO/innerclasses.html)的一部分。

Joshua Bloch对[Project Coin的](http://openjdk.java.net/projects/coin/)[Collection Literals 提案大致](http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/001193.html)如下：

```
List<Integer> intList = [1, 2, 3, 4];

Set<String> strSet = {"Apple", "Banana", "Cactus"};

Map<String, Integer> truthMap = { "answer" : 42 }; 
```

遗憾的是，它既[没有](http://mail.openjdk.java.net/pipermail/lambda-dev/2014-March/011938.html)进入 Java 7 也没有进入 Java 8，因此被无限期搁置。

**实验**

这是我测试过的简单实验——`ArrayList`使用元素制作 1000 秒`"Hello"`并`"World!"`通过方法添加到它们`add`，使用两种方法：

*方法一：双括号初始化*

```
List<String> l = new ArrayList<String>() {{
  add("Hello");
  add("World!");
}}; 
```

*方法2：实例化一个`ArrayList`and`add`*

```
List<String> l = new ArrayList<String>();
l.add("Hello");
l.add("World!"); 
```

我创建了一个简单的程序来写出一个 Java 源文件以使用两种方法执行 1000 次初始化：

*测试1：*

```
class Test1 {
  public static void main(String[] s) {
    long st = System.currentTimeMillis();

    List<String> l0 = new ArrayList<String>() {{
      add("Hello");
      add("World!");
    }};

    List<String> l1 = new ArrayList<String>() {{
      add("Hello");
      add("World!");
    }};

    /* snip */

    List<String> l999 = new ArrayList<String>() {{
      add("Hello");
      add("World!");
    }};

    System.out.println(System.currentTimeMillis() - st);
  }
} 
```

*测试 2：*

```
class Test2 {
  public static void main(String[] s) {
    long st = System.currentTimeMillis();

    List<String> l0 = new ArrayList<String>();
    l0.add("Hello");
    l0.add("World!");

    List<String> l1 = new ArrayList<String>();
    l1.add("Hello");
    l1.add("World!");

    /* snip */

    List<String> l999 = new ArrayList<String>();
    l999.add("Hello");
    l999.add("World!");

    System.out.println(System.currentTimeMillis() - st);
  }
} 
```

请注意，初始化 1000`ArrayList`秒和 1000 个匿名内部类扩展`ArrayList`所用的时间是使用 来检查的`System.currentTimeMillis`，因此计时器的分辨率不是很高。在我的 Windows 系统上，分辨率约为 15-16 毫秒。

两次测试运行 10 次的结果如下：

```
Test1 Times (ms)           Test2 Times (ms)
----------------           ----------------
           187                          0
           203                          0
           203                          0
           188                          0
           188                          0
           187                          0
           203                          0
           188                          0
           188                          0
           203                          0 
```

可以看出，双括号初始化的执行时间明显约为 190 毫秒。

同时，`ArrayList`初始化执行时间为 0 ms。当然，要考虑定时器的分辨率，但它很可能在 15 毫秒以下。

因此，这两种方法的执行时间似乎存在显着差异。看来这两种初始化方法确实存在一些开销。

是的，`.class`编译`Test1`双括号初始化测试程序生成了 1000 个文件。

            回答 #2

赞同：111

时间：2009-05-29T05:37:22.640

迄今为止尚未指出的这种方法的一个属性是，因为您创建了内部类，所以整个包含类都被捕获在其范围内。这意味着只要你的 Set 还活着，它就会保留一个指向包含实例 ( `this$0`) 的指针，并防止它被垃圾收集，这可能是一个问题。

这一点，以及即使常规的 HashSet 可以正常工作（甚至更好），还是首先创建了一个新类的事实，让我不想使用这个构造（尽管我真的很渴望语法糖）。

第二个问题：新的 HashSet 必须是实例初始化程序中使用的“this”……有人能解释一下这个机制吗？我天真地期望“this”指的是初始化“flavors”的对象。

这就是内部类的工作方式。它们有自己的`this`，但它们也有指向父实例的指针，因此您也可以调用包含对象的方法。在命名冲突的情况下，内部类（在您的情况下为 HashSet）优先，但您也可以在“this”前加上一个类名来获取外部方法。

```
public class Test {

    public void add(Object o) {
    }

    public Set<String> makeSet() {
        return new HashSet<String>() {
            {
              add("hello"); // HashSet
              Test.this.add("hello"); // outer instance 
            }
        };
    }
} 
```

要清楚正在创建的匿名子类，您也可以在其中定义方法。例如覆盖`HashSet.add()`

```
 public Set<String> makeSet() {
        return new HashSet<String>() {
            {
              add("hello"); // not HashSet anymore ...
            }

            @Override
            boolean add(String s){

            }

        };
    } 
```

            回答 #3

赞同：66

时间：2014-12-17T08:56:33.010

**每次有人使用双括号初始化时，都会杀死一只小猫。**

除了语法相当不寻常且不是真正地道（当然，品味是有争议的）之外，您还不必要地在您的应用程序中创建了两个重大问题，[我最近刚刚在此处更详细地介绍了这些问题](http://blog.jooq.org/2014/12/08/dont-be-clever-the-double-curly-braces-anti-pattern/)。

1\. 你创建了太多的匿名类

每次使用双括号初始化时，都会创建一个新类。例如这个例子：

```
Map source = new HashMap(){{
    put("firstName", "John");
    put("lastName", "Smith");
    put("organizations", new HashMap(){{
        put("0", new HashMap(){{
            put("id", "1234");
        }});
        put("abc", new HashMap(){{
            put("id", "5678");
        }});
    }});
}}; 
```

...将产生这些类：

```
Test$1$1$1.class
Test$1$1$2.class
Test$1$1.class
Test$1.class
Test.class 
```

这对您的类加载器来说是相当多的开销 - 没有！当然，如果您执行一次，它不会花费太多初始化时间。但是，如果您在整个企业应用程序中执行此操作 20'000 次......所有的堆内存只是为了一点“语法糖”？

2\. 您可能会造成内存泄漏！

如果您使用上面的代码并从方法返回该映射，则该方法的调用者可能会毫无疑问地持有无法被垃圾收集的非常重的资源。考虑以下示例：

```
public class ReallyHeavyObject {

    // Just to illustrate...
    private int[] tonsOfValues;
    private Resource[] tonsOfResources;

    // This method almost does nothing
    public Map quickHarmlessMethod() {
        Map source = new HashMap(){{
            put("firstName", "John");
            put("lastName", "Smith");
            put("organizations", new HashMap(){{
                put("0", new HashMap(){{
                    put("id", "1234");
                }});
                put("abc", new HashMap(){{
                    put("id", "5678");
                }});
            }});
        }};

        return source;
    }
} 
```

返回的`Map`现在将包含对封闭实例的引用`ReallyHeavyObject`。您可能不想冒险：

![内存泄漏就在这里](https://i.stack.imgur.com/DJ8ov.png)

[图片来自[http://blog.jooq.org/2014/12/08/dont-be-clever-the-double-curly-braces-anti-pattern/](http://blog.jooq.org/2014/12/08/dont-be-clever-the-double-curly-braces-anti-pattern/)]

3.你可以假装Java有地图文字

为了回答您的实际问题，人们一直在使用这种语法来假装 Java 有类似映射文字的东西，类似于现有的数组文字：

```
String[] array = { "John", "Doe" };
Map map = new HashMap() {{ put("John", "Doe"); }}; 
```

有些人可能会觉得这在句法上很刺激。

            回答 #4

赞同：40

时间：2009-05-29T03:52:55.917

参加以下测试课程：

```
public class Test {
  public void test() {
    Set<String> flavors = new HashSet<String>() {{
        add("vanilla");
        add("strawberry");
        add("chocolate");
        add("butter pecan");
    }};
  }
} 
```

然后反编译类文件，我看到：

```
public class Test {
  public void test() {
    java.util.Set flavors = new HashSet() {

      final Test this$0;

      {
        this$0 = Test.this;
        super();
        add("vanilla");
        add("strawberry");
        add("chocolate");
        add("butter pecan");
      }
    };
  }
} 
```

这对我来说看起来并不是非常低效。如果我担心这样的事情的性能，我会对其进行分析。上面的代码回答了您的问题 #2：您在内部类的隐式构造函数（和实例初始化程序）中，所以“ `this`”指的是这个内部类。

是的，这种语法晦涩难懂，但注释可以阐明晦涩的语法用法。为了澄清语法，大多数人都熟悉静态初始化程序块（JLS 8.7 静态初始化程序）：

```
public class Sample1 {
    private static final String someVar;
    static {
        String temp = null;
        ..... // block of code setting temp
        someVar = temp;
    }
} 
```

您也可以使用类似的语法（不带“ `static`”）来使用构造函数（JLS 8.6 Instance Initializers），尽管我从未见过在生产代码中使用过这种语法。这鲜为人知。

```
public class Sample2 {
    private final String someVar;

    // This is an instance initializer
    {
        String temp = null;
        ..... // block of code setting temp
        someVar = temp;
    }
} 
```

如果您没有默认构造函数，则 和 之间的代码块`{`将`}`被编译器转换为构造函数。考虑到这一点，解开双括号代码：

```
public void test() {
  Set<String> flavors = new HashSet<String>() {
      {
        add("vanilla");
        add("strawberry");
        add("chocolate");
        add("butter pecan");
      }
  };
} 
```

最里面的大括号之间的代码块被编译器转换为构造函数。最外面的大括号分隔匿名内部类。采取这最后一步，使一切非匿名：

```
public void test() {
  Set<String> flavors = new MyHashSet();
}

class MyHashSet extends HashSet<String>() {
    public MyHashSet() {
        add("vanilla");
        add("strawberry");
        add("chocolate");
        add("butter pecan");
    }
} 
```

出于初始化目的，我想说没有任何开销（或者小到可以忽略不计）。但是，每次使用`flavors`都不会反对`HashSet`，而是反对`MyHashSet`。这可能有一个很小的（而且很可能可以忽略不计）开销。但同样，在我担心它之前，我会分析它。

同样，对于你的问题 #2，上面的代码是双括号初始化的逻辑和显式等价物，它使 " `this`" 指的地方很明显：指向扩展的内部类`HashSet`。

如果您对实例初始化程序的详细信息有疑问，请查看[JLS](http://java.sun.com/docs/books/jls/download/langspec-3.0.pdf)文档中的详细信息。

            回答 #5

赞同：37

时间：2011-01-25T10:12:24.993

**容易泄漏**

我决定加入。性能影响包括：磁盘操作 + 解压缩（用于 jar）、类验证、perm-gen 空间（用于 Sun 的 Hotspot JVM）。然而，最糟糕的是：它容易泄漏。你不能简单地返回。

```
Set<String> getFlavors(){
  return Collections.unmodifiableSet(flavors)
} 
```

因此，如果该集合逃逸到由不同的类加载器加载的任何其他部分，并且在那里保留了一个引用，那么整个类+类加载器的树将被泄露。为避免这种情况，必须复制到 HashMap `new LinkedHashSet(new ArrayList(){{add("xxx);add("yyy");}})`，. 不再那么可爱了。我自己不使用成语，而是像  `new LinkedHashSet(Arrays.asList("xxx","YYY"));`

            回答 #6

赞同：19

时间：2013-01-31T13:46:58.127

加载许多类可能会在开始时增加一些毫秒。如果启动不是那么关键，并且您在启动后查看课程的效率，则没有区别。

```
package vanilla.java.perfeg.doublebracket;

import java.util.*;

/**
 * @author plawrey
 */
public class DoubleBracketMain {
    public static void main(String... args) {
        final List<String> list1 = new ArrayList<String>() {
            {
                add("Hello");
                add("World");
                add("!!!");
            }
        };
        List<String> list2 = new ArrayList<String>(list1);
        Set<String> set1 = new LinkedHashSet<String>() {
            {
                addAll(list1);
            }
        };
        Set<String> set2 = new LinkedHashSet<String>();
        set2.addAll(list1);
        Map<Integer, String> map1 = new LinkedHashMap<Integer, String>() {
            {
                put(1, "one");
                put(2, "two");
                put(3, "three");
            }
        };
        Map<Integer, String> map2 = new LinkedHashMap<Integer, String>();
        map2.putAll(map1);

        for (int i = 0; i < 10; i++) {
            long dbTimes = timeComparison(list1, list1)
                    + timeComparison(set1, set1)
                    + timeComparison(map1.keySet(), map1.keySet())
                    + timeComparison(map1.values(), map1.values());
            long times = timeComparison(list2, list2)
                    + timeComparison(set2, set2)
                    + timeComparison(map2.keySet(), map2.keySet())
                    + timeComparison(map2.values(), map2.values());
            if (i > 0)
                System.out.printf("double braced collections took %,d ns and plain collections took %,d ns%n", dbTimes, times);
        }
    }

    public static long timeComparison(Collection a, Collection b) {
        long start = System.nanoTime();
        int runs = 10000000;
        for (int i = 0; i < runs; i++)
            compareCollections(a, b);
        long rate = (System.nanoTime() - start) / runs;
        return rate;
    }

    public static void compareCollections(Collection a, Collection b) {
        if (!a.equals(b) && a.hashCode() != b.hashCode() && !a.toString().equals(b.toString()))
            throw new AssertionError();
    }
} 
```

印刷

```
double braced collections took 36 ns and plain collections took 36 ns
double braced collections took 34 ns and plain collections took 36 ns
double braced collections took 36 ns and plain collections took 36 ns
double braced collections took 36 ns and plain collections took 36 ns
double braced collections took 36 ns and plain collections took 36 ns
double braced collections took 36 ns and plain collections took 36 ns
double braced collections took 36 ns and plain collections took 36 ns
double braced collections took 36 ns and plain collections took 36 ns
double braced collections took 36 ns and plain collections took 36 ns 
```

            回答 #7

赞同：16

时间：2009-05-29T04:20:21.330

要创建集合，您可以使用可变参数工厂方法而不是双括号初始化：

```
public static Set<T> setOf(T ... elements) {
    return new HashSet<T>(Arrays.asList(elements));
} 
```

Google Collections 库有很多像这样的便捷方法，以及许多其他有用的功能。    

至于成语的晦涩之处，我一直在生产代码中遇到它并使用它。我会更担心那些被允许编写生产代码的成语弄糊涂的程序员。

            回答 #8

赞同：11

时间：2009-05-29T03:59:14.870

除了效率之外，我很少发现自己希望在单元测试之外创建声明性集合。我确实相信双括号语法非常易读。

另一种实现列表的声明式构造的方法是`Arrays.asList(T ...)`像这样使用：

```
List<String> aList = Arrays.asList("vanilla", "strawberry", "chocolate"); 
```

这种方法的局限性当然是您无法控制要生成的特定类型的列表。

            回答 #9

赞同：7

时间：2017-04-12T20:24:19.793

双括号初始化是一种不必要的 hack，可能会引入内存泄漏和其他问题

没有正当理由使用这个“技巧”。Guava 提供了很好的[不可变集合](https://github.com/google/guava/wiki/ImmutableCollectionsExplained)，其中包括静态工厂和构建器，允许您在以干净、可读和*安全*的语法声明的地方填充集合。

问题中的示例变为：

```
Set<String> flavors = ImmutableSet.of(
    "vanilla", "strawberry", "chocolate", "butter pecan"); 
```

这不仅更短且更易于阅读，而且避免了[其他答案](https://stackoverflow.com/a/27521612/113632)中描述的双支撑模式的众多问题。当然，它的性能类似于直接构造`HashMap`的 ，但它很危险且容易出错，并且有更好的选择。

每当您发现自己正在考虑使用双支撑初始化时，您都应该重新检查您的 API 或[引入新的](https://stackoverflow.com/a/924365/113632)API以正确解决问题，而不是利用语法技巧。

[Error-Prone](http://errorprone.info/)现在[标记此反模式](http://errorprone.info/bugpattern/DoubleBraceInitialization)。

            回答 #10

赞同：6

时间：2009-05-29T05:26:42.863

通常没有什么特别低效的。对于 JVM 来说，创建子类并向其添加构造函数通常并不重要——这是面向对象语言中日常的正常事情。我可以想到非常人为的情况，您可能会通过这样做导致效率低下（例如，您有一个重复调用的方法，由于这个子类，最终会混合使用不同的类，而通常传入的类是完全可以预测的 - - 在后一种情况下，JIT 编译器可以进行最初不可行的优化）。但实际上，我认为重要的情况是非常人为的。

我会更多地从您是否想用大量匿名类“混乱”的角度来看待这个问题。作为一个粗略的指导，考虑使用这个习语，就像你使用匿名类一样，事件处理程序。

在 (2) 中，您位于对象的构造函数中，因此“this”指的是您正在构造的对象。这与任何其他构造函数没有什么不同。

至于（3），我猜这真的取决于谁在维护你的代码。如果您事先不知道这一点，那么我建议使用的基准是“您在 JDK 的源代码中看到了吗？” （在这种情况下，我不记得看到很多匿名初始化程序，当然也不是在匿名类的*唯一内容的情况下）。*在大多数中等规模的项目中，我认为您确实需要您的程序员在某个时候或其他时候理解 JDK 源代码，因此在那里使用的任何语法或习语都是“公平的游戏”。除此之外，我想说，如果你可以控制谁在维护代码，那么就该语法培训人们，否则评论或避免。

            回答 #11

赞同：3

时间：2009-05-29T04:50:44.880

我第二个 Nat 的回答，除了我会使用循环而不是创建并立即从 asList(elements) 中抛出隐式列表：

```
static public Set<T> setOf(T ... elements) {
    Set set=new HashSet<T>(elements.size());
    for(T elm: elements) { set.add(elm); }
    return set;
    } 
```

            回答 #12

赞同：3

时间：2009-10-22T06:06:37.893

Mario Gleichman[描述](http://gleichmann.wordpress.com/2008/01/13/building-your-own-literals-in-java-lists-and-arrays/)了如何使用 Java 1.5 通用函数来模拟 Scala 列表文字，尽管遗憾的是您最终得到了*不可变*列表。
他定义了这个类：

```
package literal;

public class collection {
    public static <T> List<T> List(T...elems){
        return Arrays.asList( elems );
    }
} 
```

并因此使用它：

```
import static literal.collection.List;
import static system.io.*;

public class CollectionDemo {
    public void demoList(){
        List<String> slist = List( "a", "b", "c" );
        List<Integer> iList = List( 1, 2, 3 );
        for( String elem : List( "a", "java", "list" ) )
            System.out.println( elem );
    }
} 
```

Google Collections，现在是[Guava](http://code.google.com/p/guava-libraries/)的一部分，支持类似的列表构建想法。在[这次采访中](http://www.javalobby.org/articles/google-collections/)，Jared Levy 说：

[...] 使用最频繁的特性，几乎出现在我编写的每个 Java 类中，都是静态方法，可以减少 Java 代码中重复击键的次数。能够输入如下命令非常方便：

`Map<OneClassWithALongName, AnotherClassWithALongName> = Maps.newHashMap();`

`List<String> animals = Lists.immutableList("cat", "dog", "horse");`

2014 年 7 月 10 日：如果它可以像 Python 一样简单：

`animals = ['cat', 'dog', 'horse']`

2/21/2020：在 Java 11 中，您现在可以说：

`animals = List.of(“cat”, “dog”, “horse”)`

            回答 #13

赞同：3

时间：2012-12-24T12:17:41.247

我正在对此进行研究，并决定进行比有效答案提供的更深入的测试。

这是代码：[https ://gist.github.com/4368924](https://gist.github.com/4368924)

这是我的结论

我惊讶地发现，在大多数运行测试中，内部启动实际上更快（在某些情况下几乎翻倍）。当处理大量数字时，好处似乎消失了。

有趣的是，在循环上创建 3 个对象的情况失去了它的好处，比其他情况更快地用完。我不确定为什么会发生这种情况，应该进行更多测试以得出任何结论。创建具体的实现可能有助于避免重新加载类定义（如果发生了这种情况）

但是，很明显，在大多数情况下，对于单个项目构建，即使数量很大，它也没有观察到太多开销。

一个挫折是这样一个事实，即每个双括号初始化都会创建一个新的类文件，它将整个磁盘块添加到我们的应用程序的大小（或压缩时大约 1k）。占地面积小，但如果在许多地方使用它可能会产生影响。使用此 1000 次，您可能会向您的应用程序添加整个 MiB，这可能与嵌入式环境有关。

我的结论？只要不被滥用就可以使用。

让我知道你的想法 ：）

            回答 #14

赞同：3

时间：2014-06-18T20:46:00.213

虽然这种语法很方便，但它也添加了很多 this$0 引用，因为这些引用变得嵌套，并且很难将调试单步调试到初始化程序中，除非在每个初始化程序上都设置断点。出于这个原因，我只建议将它用于平庸的设置器，尤其是设置为常量，以及匿名子类无关紧要的地方（比如不涉及序列化）。

            回答 #15

赞同：2

时间：2009-05-29T03:56:09.090

1.  这将要求`add()`每个成员。如果您能找到一种更有效的方法将项目放入哈希集中，请使用它。请注意，如果您对此敏感，内部类可能会产生垃圾。

2.  在我看来，上下文似乎是由 . 返回的对象`new`，即`HashSet`.

3.  如果您需要问... 更有可能：追随您的人是否知道这一点？容易理解和解释吗？如果您对两者都回答“是”，请随意使用它。

        3d - 如何绘制 3D 曲面并隐藏不可见的线条？

ID：924286

赞同：3

时间：2009-05-29T03:40:57.093

标签：3d

有人知道如何绘制 3D 表面并隐藏不可见的线条吗？

我记得从一本 Apple II 的书中读过一些代码，它在 BASIC 中只有大约 25 行，它可以绘制一些 3D 表面，例如山或看起来像水波纹的形状。最初是显示不可见的线条，但添加几行代码后，不可见的线条也消失了。

有人知道怎么做或知道网络上的资源吗？

            回答 #1

赞同：5

时间：2009-05-29T03:52:33.827

这在一定程度上取决于您如何绘制多边形。我建议阅读一些有关 OpenGL 或 DirectX 的信息，因为它们旨在为您解决许多此类问题。如果您不想直接使用它们，那么已经有许多强大的引擎构建在这些 API 之上。

假设您正在绘制填充多边形（纹理、实体等），这里有一些您可以使用的常见算法：

*   按与相机的距离对多边形进行排序，然后首先绘制最远的多边形，也称为[Painters Algorithm](http://en.wikipedia.org/wiki/Painters_algorithm)。许多旧的 3D 游戏都使用了这种方法，例如经典的 Doom，它也使用[BSP 树](http://en.wikipedia.org/wiki/Bsp_tree)进行高效排序。

*   存储从相机到屏幕上每个 pizel 的最近距离，不要在更远的地方绘制任何东西，也就是所谓的[Z-Buffering](http://en.wikipedia.org/wiki/Z_buffer)。现代 3D 显卡、OpenGL 和 DirectX 都很好地支持这种方法。

*   使用自然去除隐藏表面的[光线追踪算法。](http://en.wikipedia.org/wiki/Ray_tracing_(graphics))

            回答 #2

赞同：4

时间：2009-05-29T03:45:32.623

我记得那本书。如果我没记错的话，这些是表面图，使用的技巧是从前到后绘制线，跟踪为每个 x 绘制的最小和最大 y。可能线抽屉是 Bresenham，修改为跳过绘制的点，除非它们大于最大值或小于最小值。

该算法的好处是你也可以做曲线。不仅仅是线段。波纹图像可能是某种以 x 和 y 作为参数的三角函数的组合。

我仍然可以在脑海中看到那些情节。很想知道出自哪本书。

            回答 #3

赞同：2

时间：2009-05-29T04:06:34.263

如果您绘制三角形网格，那么您应该对每个三角形进行背面剔除，并且不要绘制具有背面法线的三角形的边缘。您将法线计算为三角形中两个连续边的叉积。

如果只想绘制轮廓，则只绘制在具有正面法线的三角形和具有背面法线的三角形之间的边。

或者您使用 OpenGL，打开深度缓冲区，然后忘记所有底层数学 :-)

        c# - 字母数字和空格的正则表达式

ID：924287

赞同：1

时间：2009-05-29T03:41:04.643

标签：c#, .net, regex

不能包含除空格外的任何特殊字符的文本的常规 exp 是什么？

            回答 #1

赞同：6

时间：2009-05-29T03:56:33.383

因为[Prajeesh](https://stackoverflow.com/users/112352/prajeesh)只想匹配空格，所以 \s 是不够的，因为它匹配所有空格字符，包括换行符和制表符。

应该普遍适用于所有 RegEx 解析器的字符集是：

```
[a-zA-Z0-9 ] 
```

进一步的控制取决于您的需要。单词边界、多行支持等...我建议您访问[Regex Library](http://regexlib.com/)，其中还包含一些关于正则表达式解析如何工作的各种教程的链接。

            回答 #2

赞同：5

时间：2009-05-29T03:45:30.970

`[\w\s]*`

`\w`will match`[A-Za-z0-9_]`并且`\s`will 匹配空格。

`[\w ]*`应该匹配你想要的。

            回答 #3

赞同：4

时间：2009-05-29T03:51:39.423

假设“特殊字符”表示不是字母或数字的任何内容，而“空格”表示空格字符（ASCII 32）：

```
^[A-Za-z0-9]+$
```

            回答 #4

赞同：2

时间：2009-05-29T03:53:49.943

你需要`@"^[A-Za-z0-9 ]+$"`. 字符类匹配空格以外的`\s`东西（例如制表符），并且您因为要匹配确保字​​符串的任何部分都没有其他字符，所以您应该使用`^`and锚定它`$`。

            回答 #5

赞同：1

时间：2009-05-29T03:46:01.363

如果您只想要字母和空格，那么您可以使用：@"[A-Za-z\s]+" 来匹配至少一个字符或空格。您也可以使用 @"[A-Za-z ]+" 代替，而无需明确表示空格。

否则请澄清。

            回答 #6

赞同：0

时间：2009-05-29T03:49:25.597

在 C# 中，我相信它是 ^(\w|\s)*$

        c - 如何从 c 程序读取输出并为程序提供输入？

ID：924289

赞同：0

时间：2009-05-29T03:41:27.030

标签：c, windows, input, system

这是参考以下问题：
[从 C 程序中执行程序](https://stackoverflow.com/q/70842)
如何使用 Tiny C 编译器在 Windows 上执行相同操作？我需要从 c 程序执行 .exe 并通过使用文件或字符串作为源从同一个 C 程序中为其提供输入，并将其输出读入字符串或文件。我一直在使用 system() 函数。欢迎任何建议或示例..在此先感谢

            回答 #1

赞同：3

时间：2009-05-29T03:54:55.970

如果您没有 popen() 等，或者您想避免复杂性，最简单的方法是简单地编写一个数据文件，例如。使用 fwrite() 的 infile 使用 system() 执行外部程序，然后读取 outfile。

```
system("prog.exe <infile >outfile") 
```

您的 prog.exe 只需读取标准输入并写入标准输出。

这样您就可以轻松地使用输入/输出文件的内容对其进行测试。您通常会在 tmp 目录中执行此操作，然后在完成后将其删除。

唯一需要注意的是 .exe 的路径

            回答 #2

赞同：1

时间：2009-05-29T04:00:51.660

谷歌“windows popen”，你会发现这个链接：

lists.trolltech.com/qt-interest/1999-09/thread00282-0.html

C 运行时库也有 _popen()，但我建议不要使用它。

        x86 - 如何编写反汇编程序？

ID：924303

赞同：70

时间：2009-05-29T03:50:28.267

标签：x86, disassembly

我有兴趣将 x86 dissembler 编写为一个教育项目。  

我找到的唯一真正的资源是 Spiral Space 的“[如何编写反汇编程序](https://web.archive.org/web/20091124113036/http://www.spiralspace.com/Depot/Projects/Disassembler/Default.aspx)”。虽然这对反汇编程序的各种组件进行了很好的高级描述，但我对一些更详细的资源感兴趣。我还快速浏览了[NASM 的](http://www.nasm.us/)源代码，但这有点值得学习。

我意识到这个项目的主要挑战之一是我将不得不处理相当大的 x86 指令集。我也对基本结构、基本反汇编链接等感兴趣。

任何人都可以向我指出有关编写 x86 反汇编程序的任何详细资源吗？

            回答 #1

赞同：67

时间：2009-05-29T04:57:22.053

查看[80386 Programmer's Reference Manual 的](http://pdos.csail.mit.edu/6.828/2008/readings/i386/toc.htm)第[17.2 节](http://pdos.csail.mit.edu/6.828/2008/readings/i386/s17_02.htm)。反汇编器实际上只是一个美化的[有限状态机](http://en.wikipedia.org/wiki/Finite-state_machine)。拆解步骤如下：

1.  检查当前字节是否为指令前缀字节（`F3`、、`F2`或`F0`）；如果是这样，那么你有一个`REP`// `REPE`/前缀`REPNE`。`LOCK`前进到下一个字节。
2.  检查当前字节是否为地址大小字节 ( `67`)。如果是这样，如果当前处于 32 位模式，则以 16 位模式解码指令其余部分中的地址，或者如果当前处于 16 位模式，则以 32 位模式解码地址
3.  检查当前字节是否为操作数大小字节 ( `66`)。如果是这样，如果当前处于 32 位模式，则以 16 位模式解码立即操作数，或者如果当前处于 16 位模式，则以 32 位模式解码立即操作数
4.  检查当前字节是否为段覆盖字节（`2E`、`36`、`3E`、`26`、`64`或`65`）。如果是这样，请使用相应的段寄存器而不是默认的段寄存器来解码地址。
5.  下一个字节是操作码。如果操作码为`0F`，则为扩展操作码，读取下一个字节作为扩展操作码。
6.  根据特定的操作码，读入并解码 Mod R/M 字节、比例索引基 (SIB) 字节、位移（0、1、2 或 4 字节）和/或立即值（0、1 、2 或 4 个字节）。这些字段的大小取决于先前解码的操作码、地址大小覆盖和操作数大小覆盖。

操作码告诉您正在执行的操作。操作码的参数可以从 Mod R/M、SIB、位移和立即值的值中解码。由于 x86 的复杂性，存在很多可能性和很多特殊情况。有关更详尽的说明，请参阅上面的链接。

            回答 #2

赞同：22

时间：2009-05-29T04:41:55.553

我建议查看一些开源反汇编程序，最好是[distorm](http://ragestorm.net/distorm/)，尤其是“disOps（指令集数据库）”（ctrl+在页面上查找）。

文档本身充满了关于操作码和指令的丰富信息。

*引用自* [https://code.google.com/p/distorm/wiki/x86_x64_Machine_Code](https://code.google.com/p/distorm/wiki/x86_x64_Machine_Code)

**80x86 指令：**

一条 80x86 指令被划分为多个元素：

1.  指令前缀，影响指令操作的行为。

2.  强制前缀用作 SSE 指令的操作码字节。

3.  操作码字节，可以是一个或多个字节（最多 3 个完整字节）。

4.  ModR/M 字节是可选的，有时可能包含操作码本身的一部分。

5.  SIB 字节是可选的，表示复杂的内存间接形式。

6.  位移是可选的，它是一个不同大小的字节（字节，字，长）的值，用作偏移量。

7.  立即数是可选的，它用作从不同大小的字节（字节、字、长）构建的通用数值。

格式如下所示：

```
/-------------------------------------------------------------------------------------------------------------------------------------------\
|*Prefixes | *Mandatory Prefix | *REX Prefix | Opcode Bytes | *ModR/M | *SIB | *Displacement (1,2 or 4 bytes) | *Immediate (1,2 or 4 bytes) |
\-------------------------------------------------------------------------------------------------------------------------------------------/
* means the element is optional. 
```

[https://code.google.com/p/distorm/wiki/diStorm_Internals](https://code.google.com/p/distorm/wiki/diStorm_Internals)中解释了数据结构和解码阶段

*引用：*

**解码阶段**

1.  [前缀]

2.  [获取操作码]

3.  [过滤操作码]

4.  [提取操作数]

5.  [文本格式]

6.  [十六进制转储]

7.  【解码指令】

还解释了每个步骤。

由于历史原因，保留原始链接：

[http://code.google.com/p/distorm/wiki/x86_x64_Machine_Code](http://code.google.com/p/distorm/wiki/x86_x64_Machine_Code)和[http://code.google.com/p/distorm/wiki/diStorm_Internals](http://code.google.com/p/distorm/wiki/diStorm_Internals)

            回答 #3

赞同：6

时间：2009-05-29T04:00:27.667

从一些已经组装好的小程序开始，它会为您提供生成的代码和指令。为自己获取[指令架构](http://en.wikipedia.org/wiki/X86)的参考，并通过架构参考手动完成一些生成的代码。您会发现指令具有非常典型的*inst op op op*结构，具有不同数量的操作数。您需要做的就是翻译代码的十六进制或八进制表示以匹配指令；稍微玩一下就会发现。

该过程是自动化的，是反汇编程序的核心。理想情况下，您可能希望在内部（或在外部，如果程序非常大）构建指令结构数组。然后，您可以将该数组转换为汇编格式的指令。

            回答 #4

赞同：4

时间：2009-05-29T04:02:55.173

您需要一个操作码表来加载。

基本的查找数据结构是 trie，但是如果您不太关心速度，则表会做得很好。

要获取基本操作码类型，请从表上的匹配开始。

有几种解码寄存器参数的常用方法；但是，有足够多的特殊情况需要单独实施其中的大部分。

由于这是教育性的，请查看 ndisasm。

            回答 #5

赞同：2

时间：2011-08-07T23:27:42.000

**检查 objdump**源- 这是一个很棒的工具，它包含许多操作码表，它的源可以为制作自己的反汇编程序提供一个很好的基础。

        .net - 从单独的 DataContext 更新 LinqDataSource

ID：924312

赞同：1

时间：2009-05-29T03:54:05.047

标签：.net, linq-to-sql, linqdatasource

我想用从另一个 DataContext 检索到的记录来更新一个 LinqDataSource。问题是 LinqDataSource 的 DataContext 似乎没有公开，因此我无法访问它以将新对象附加到 DataSource 的上下文中。

这样做的正常方法是什么？还是我应该废弃 LinqDataSource

            回答 #1

赞同：1

时间：2010-02-02T09:50:14.803

很好的理由 - 您不能在不同的 DataContexts 之间共享对象。

如果您使用 LinqDataSource 的 OnContextCreating 事件，您可以将正确的实例附加到数据源 [即，从中检索第二个实体]，因此它们都来自同一个 DataContext：

ASPX：

```
<asp:LinqDataSource .... OnContextCreating="GetDataContext" ... /> 
```

C＃：

```
protected void GetDataContext(object sender, LinqDataSourceContextEventArgs e)
{
    e.ObjectInstance = MyDataContext.Current; // assuming that Current is the ambient instance
} 
```

        java - Maven 没有解决 hibernate-c3p0 对 slf4j 的依赖

ID：924315

赞同：3

时间：2009-05-29T03:54:48.747

标签：java, hibernate, c3p0, slf4j

当我包含`hibernate-c3p0`在我的 Maven`pom.xml`文件中时，我得到一个运行时`NoClassDefFoundError`，因为它找不到`org.slf4j.impl.StaticLoggerBinder`. 我的印象是 Maven 会解决这种依赖关系——所以如果 c3p0 需要 slf4j，那么 slf4j 将被下载并包含在内。

我的`pom.xml`文件有：

```
<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-c3p0</artifactId>
  <version>3.3.1.GA</version>
</dependency> 
```

            回答 #1

赞同：5

时间：2009-05-29T04:17:44.770

可能 slf4j 是一个可选的依赖项。您可以使用依赖插件非常轻松地检查传递依赖项

```
mvn dependency:tree 
```

将向您显示具体取决于什么的树状列表。如果 slf4j 不是一个 dep，你可以明确地添加它。

高温高压

            回答 #2

赞同：4

时间：2009-05-29T08:56:29.443

`NoClassDefFoundError`for`org.slf4j.impl.StaticLoggerBinder`表示找不到 SLF4J 绑定。通过传递性，hibernate-c3p0 依赖于 slf4j-api。但是，slf4j-api 不能在没有绑定的情况下运行。详见 SLF4J 用户手册：[www.slf4j.org/manual.html](http://www.slf4j.org/manual.html)

您只需添加 slf4j-simple、slf4j-log4j12、slf4j-jdk14 或 logback-classic 之一作为依赖项。前面提到的 SLF4J 手册页应该有详细信息。

        proof-system - 有没有人使用证明助手来证明类型化过程演算的可靠性？

ID：924327

赞同：0

时间：2009-05-29T03:59:57.040

标签：proof-system

......他们是否在我有能力阅读的地方发布了结果？

            回答 #1

赞同：2

时间：2009-05-29T04:01:31.223

有几个人在做这些事情。查看 John Rushbie 的[PVS](http://pvs.csl.sri.com/)站点上的论文，并查看[Coq 的](http://coq.inria.fr/)论文。

搜索[Citeseer](http://citeseer.ist.psu.edu/)也可能有一些好处——现在几乎每个人都在 Citeseer 上发布他们的预印本，所以环顾四周通常会找到相同的论文，或者与昂贵期刊上发表的论文非常相似的东西。

            回答 #2

赞同：1

时间：2009-06-04T04:48:42.547

啊，在 David N.Turner 的论文中，Pict 编程语言背后的过程演算的可靠性得到了证明。

            回答 #3

赞同：1

时间：2013-02-28T22:31:49.293

[形式证明档案](http://afp.sf.net)在其[主题](http://afp.sourceforge.net/topics.shtml)中列出的“过程演算”类别中有几个条目，例如 CCS 和 Pi 演算。

        tsql - 是否可以在 SQLserver 2005 中创建一个存储无限字符的变量？

ID：924334

赞同：0

时间：2009-05-29T04:02:07.437

标签：tsql

我写了一些 T-SQL 将我的所有字符串连接在一列中，但`nvarchar(max)`不足以存储它。

还有其他方法吗？

我尝试使用的代码是：

```
DECLARE @codes NVARCHAR(max) 
SET @codes = '' 
SELECT @codes = @codes + ',' + CONVERT(nvarchar,code) 
FROM dbo.listing SELECT @codes 
```

            回答 #1

赞同：3

时间：2009-05-29T04:08:50.243

无限的，没有。在某些时候，您将用完存储空间。说真的，如果您发现自己创建的单个元素不适合大约 2 ^(31)个字节，那么您做错了什么。

您为什么不告诉我们您要解决的“真正”问题？没有先入为主的观念，即您必须以某种方式去做。

            回答 #2

赞同：0

时间：2009-05-29T08:04:47.580

您需要将代码列转换为 nvarchar(max) 否则它将截断：

```
DECLARE @codes NVARCHAR(max) 
SET @codes = '' 
SELECT @codes = @codes + ',' + CONVERT(nvarchar**(max)**,code) 
FROM dbo.listing SELECT @codes 
```

            回答 #3

赞同：0

时间：2009-05-29T21:44:27.643

你打算用这个可怕的变量做什么？为什么不直接写一个连接表呢？

            回答 #4

赞同：0

时间：2009-05-29T04:09:33.380

如果您不担心国际字符，我能想到的唯一建议是使用 varchar(max) 。但这不会让您的存储容量大幅增加。

那一定是一个非常庞大的 SQL 字符串，尽管它不适合。

        java - Google Spreadsheet API - 找到列中的第一个空单元格？

ID：924339

赞同：5

时间：2009-05-29T04:05:30.687

标签：java, google-sheets, google-sheets-api

有没有一种好方法可以通过 Java 从 Google 的电子表格服务中获取列中的第一个空单元格？

我知道我可以使用：

```
public CellFeed CheckColumn(int row, int col) 
    throws IOException, ServiceException {
    CellQuery query = new CellQuery(cellFeedUrl);
    query.setMinimumRow(row);
    query.setMaximumRow(row);
    query.setMinimumCol(col);
    query.setMaximumCol(col);
    query.setReturnEmpty(true);

    CellFeed feed = service.query(query, CellFeed.class);
    int cell_loc[];

    for (CellEntry entry : feed.getEntries()) {
       cell_loc=CheckIfEmpty(entry);   
    }
    return cell_loc;
} 
```

并浏览条目，但我不想一次加载整个专栏，这对我的用户来说很慢，而且只浏览整个专栏似乎很糟糕

有什么想法吗？

            回答 #1

赞同：0

时间：2013-01-11T19:00:07.710

这个小片段将使用 Google Apps 脚本在 Google 电子表格中创建一个函数：

```
function emptySpace(array) {
  // set counter
  var counter = 0;

  // itterate through values
  for (i in array){
    if (array[i].length > 1) {
      throw ("Only single column of data");
    } else {
      if(array[i][0] != "") {
        counter++;
      } else {
        break;
      }
    }
  }

  // return value + 1 
  return counter + 1;
} 
```

通过脚本编辑器将此脚本添加到您的电子表格中，并且在整个工作表中都可以使用函数 emptySpace，如下所示`=emptySpace(A1:A7)`：

请参阅我创建的示例文件：[空白空间](https://docs.google.com/spreadsheet/ccc?key=0AluAYY6ZHeWYdEVfYzJNLTRrdkVpazE2UVBSSGhjLXc)

        bash - 如何编写 bash 别名/函数来 grep 字符串的所有子目录中的所有文件？

ID：924340

赞同：3

时间：2009-05-29T04:05:43.170

标签：bash, shell, grep

我一直在使用以下命令在当前目录及其下方的所有 python 源文件中对字符串进行 grep：

```
find . -name '*.py' -exec grep -nHr <string> {} \; 
```

我想简化一些事情，这样我就可以输入类似的东西

```
findpy <string> 
```

并得到完全相同的结果。别名似乎不够用，因为它们只进行字符串扩展，而且我需要指定的参数不是最后一个参数。听起来功能适合这项任务，所以我有几个问题：

*   我该怎么写？
*   我把它放在哪里？

            回答 #1

赞同：10

时间：2009-05-29T05:30:23.737

如果您不想为此创建整个脚本，则可以仅使用 shell 函数来完成：

```
findpy() { find . -name '*.py' -exec grep -nHr "$1" {} \; ; } 
```

...但是您可能必须在 ~/.bashrc 和 ~/.bash_profile 中定义它，因此它会为登录和交互式 shell 定义（参见 bash 手册页的 INVOCATION 部分）。

            回答 #2

赞同：6

时间：2009-05-29T05:46:33.330

上面所有的“find ... -exec”解决方案在它们工作的意义上都是可以的，但是它们的效率非常低，并且对于大树来说非常慢。原因是他们为***每个****.py 文件启动了一个新进程。相反，使用 xargs(1)，并仅对文件（而不是目录）运行 grep：

```
#！/bin/sh
寻找 。-name \*.py -type f | xargs grep -nHr "$1"

```

例如：

```
$ 时间 sh -c '查找 . -name \*.cpp -type f -exec grep foo {} \; >/开发/空'
实际0m3.747s
$ 时间 sh -c '查找 . -name \*.cpp -type f | xargs grep foo >/dev/null'
实际0m0.278s

```

            回答 #3

赞同：6

时间：2009-05-29T18:19:44.873

附带说明一下，您应该查看[Ack](http://betterthangrep.com/)以了解您在做什么。它旨在替代用 Perl 编写的 Grep。根据目标语言过滤文件或忽略 .svn 目录等。

示例（来自 Trac 源的片段）：

```
$ ack --python foo ./mysource
ticket/tests/wikisyntax.py
139:milestone:foo
144:<a class="missing milestone" href="/milestone/foo" rel="nofollow">milestone:foo</a>

ticket/tests/conversion.py
34:        ticket['foo'] = 'This is a custom field'

ticket/query.py
239:        count_sql = 'SELECT COUNT(*) FROM (' + sql + ') AS foo' 
```

            回答 #4

赞同：2

时间：2013-06-13T05:38:34.773

我想要类似的东西，[Idelic 的回答](https://stackoverflow.com/a/924562/54491)让我想起了 : 的一个很好的特性`xargs`：它将命令放在最后。你看，我的问题是我想编写一个“接受参数”的 shell 别名（实际上，它会以这样的方式扩展以允许我传递参数 so `grep`）。

这是我添加到我的`bash_aliases`：

别名 findpy="find . -type f -name '*.py' | xargs grep"

这样，我可以写`findpy WORD`or `findpy -e REGEX`or `findpy -il WORD`- 关键是可以使用任何`grep`命令行选项。

            回答 #5

赞同：1

时间：2009-05-29T04:09:07.437

将以下三行放在一个名为`findpy`

```
#!/bin/bash

find . -name '*.py' -exec grep -nHr $1 {} \; 
```

然后说

```
chmod u+x findpy 
```

我通常`bin`在我的主目录中有一个名为的目录，我在其中放置了这样的小 shell 脚本。确保将目录添加到您的`PATH`.

            回答 #6

赞同：1

时间：2009-05-29T04:12:45.523

剧本：

```
#!/bin/bash
find . -name '*.py' -exec grep -nHr "$1" {} ';' 
```

我会怎么做。

你用一个编辑器写它，`vim`然后把它放在你的路径上。我通常的方法是有一个`~/bin`目录并确保我的`.profile`文件（或等效文件）包含：

```
PATH=$PATH:~/bin 
```

            回答 #7

赞同：1

时间：2009-05-30T00:06:30.773

许多版本的 grep 都有执行递归、指定文件名模式等的选项。

```
grep --perl-regexp --recursive --include='*.py' --regexp="$1" . 
```

这从当前目​​录 (.) 开始递归，只查看以 'py' 结尾的文件，使用 Perl 样式的正则表达式。

如果您的 grep 版本不支持 --recursive 和 --include，那么您仍然可以使用 find 和 xargs，但请确保通过使用 find 的 -print0 参数和 --null 选项来允许包含嵌入空格的路径名到 xargs 来处理。

```
find . -type f -name '*.py' -print0 | xargs --null grep "$1" 
```

应该管用。

            回答 #8

赞同：1

时间：2013-09-25T06:47:50.137

将以下行添加到您的 ~/.bashrc 或 ~/.bash_profile 或 ~/.profile

```
alias findpy='find . -type f -name "*.py" -print0 | xargs -0 grep' 
```

那么你可以像这样使用它

```
findpy def 
```

或使用 grep 选项

```
findpy -i class 
```

以下别名将忽略 git 和 svn 的版本控制元目录

```
alias findpy='find . -type f -not -path "*/.git/*" -a -not -path "*/.svn/*" -name "*.py" -print0 | xargs -0 grep' 
```

            回答 #9

赞同：0

时间：2013-07-22T01:52:13.140

```
#######################################################################################
#
# Function to search all files (including sub-directories) that match a given file
# extension ($2) looking for an indicated string ($1) - in a case insensitive manner.
#
# For Example:
#
# -> findfile AllowNegativePayments cpp
#
#
#######################################################################################
findfile ()
{
    find . -iname "*.$2*" -type f -print0 | xargs -0 grep -i "$1" {} \; 2> /dev/nul
}

alias _ff='findfile' 
```

        asp.net-mvc - 如何在视图中过滤带有接口的模型

ID：924343

赞同：1

时间：2009-05-29T04:07:14.357

标签：asp.net-mvc

在我看来

```
 Inherits="System.Web.Mvc.ViewUSerControl<Model.Person>" 
```

如何使用接口来限制视图能够从模型访问的内容？这安全吗？

            回答 #1

赞同：3

时间：2009-05-29T04:31:33.303

让*Person*类有几个属性，并且您只希望从视图中访问*Name属性。*像这样声明接口并使用它：

```
public interface RestrictedPerson
{
    string Name
    {
        get;
        set;
    }
}

public partial class Person: RestrictedPerson
{
} 
```

在视图的 Page 指令集中

```
Inherits="System.Web.Mvc.ViewPage<Model.RestrictedPerson> 
```

并像往常一样传递给查看*Person*对象。

        c++ - URL 转义 MFC 字符串

ID：924354

赞同：4

时间：2009-05-29T04:13:32.077

标签：c++, mfc, urlencode, cstring

你如何 URL 转义 MFC CString？

            回答 #1

赞同：7

时间：2009-05-29T08:39:03.283

[InternetCanonicalizeUrl()](http://msdn.microsoft.com/en-us/library/aa384342%28VS.85%29.aspx)

            回答 #2

赞同：0

时间：2017-08-29T17:20:25.160

我为可能遇到此解决方案的其他人创建了一个包装函数。还需要链接到 Wininet.lib 并包括 wininet.h

```
 bool EscapeURL ( CString& url, DWORD options = ICU_DECODE | ICU_ENCODE_PERCENT )
    {
        DWORD bytes = url.GetLength () + 1;
        LPTSTR escapedString = new TCHAR[bytes + 1];
        escapedString[0] = 0;

        // First read will generate the correct byte count for the return string 
        //
        bool result = InternetCanonicalizeUrl ( url.GetBuffer (), escapedString, &bytes, options );
        if ( !result )
        {
            // Resize the String
            //
            delete [] escapedString;
            escapedString = new TCHAR[bytes];
            escapedString[0] = 0;

            result = InternetCanonicalizeUrl ( url.GetBuffer (), escapedString, &bytes, options );
        }

        if ( result )
        {
            url = escapedString;
            delete [] escapedString; // Thanks The Steve
        }
        else
        {
            // Optional
            // If the call fails return the message in the url
            //
            DWORD errorMessageID = ::GetLastError ();
            LPSTR messageBuffer = nullptr;
            size_t size = FormatMessageA ( FORMAT_MESSAGE_ALLOCATE_BUFFER | FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS,
                                     NULL, errorMessageID, MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT), (LPSTR)&messageBuffer, 0, NULL);

            std::string message ( messageBuffer, size );

            LocalFree ( messageBuffer );

            url = message.c_str ();
        }

        return result;
    } 
```

用法

```
 CString internetUse = "The Internet is %%4 <pr0n>";

    EscapeURL ( internetUse );

    // internetUse = 0x01538890 "The%20Internet%20is%20%25%254%20%3Cpr0n%3E" 
```

        math - 检测和修复溢出

ID：924355

赞同：0

时间：2009-05-29T04:13:48.693

标签：math, overflow, data-analysis

我们有一个粒子探测器硬连线使用 16 位和 8 位缓冲区。时不时地，有某些[预测的]粒子通量峰值穿过它；没关系。*不好*的是，这些通量通常达到超过缓冲区存储它们的容量的数量级。因此，会发生溢出。在图表上，它们看起来像通量突然下降并再次开始增长。您能否提出一种 [大部分] 准确的方法来检测遭受溢出的数据点？

PS 探测器在物理上是不可访问的，因此通过更换缓冲区以“正确的方式”修复它似乎不是一种选择。

**更新：**根据要求进行一些澄清。我们在数据处理设施中使用 python；检测器本身使用的技术非常晦涩（将其视为由完全不相关的第三方开发），但它绝对不复杂，即没有运行“真正的”操作系统，只是一些低级的东西来记录检测器读数并响应远程命令，如电源循环。内存损坏和其他问题现在不是问题。发生溢出仅仅是因为探测器的设计者使用 16 位缓冲区来计算粒子通量，有时通量超过每秒 65535 个粒子。

**更新 2：**正如几位读者所指出的，预期的解决方案将与分析通量剖面以检测急剧下降（例如下降一个数量级）以试图将它们与正常波动区分开来有关。另一个问题出现了：是否可以通过简单地针对恢复的（通过*x*轴）通量分布运行校正程序来检测恢复（原始通量下降到溢出水平以下的点）？

            回答 #1

赞同：1

时间：2009-05-29T04:47:27.080

当然，理想情况下，您将检测器软件修复为最大 65535，以防止导致您悲伤的那种环绕。我知道这并不总是可能的，或者至少并不总是可以快速做到。

当粒子通量超过65535时，是这么快，还是通量逐渐增加，然后逐渐减少？这会影响您可以使用哪种算法来检测这一点。例如，如果通量上升得足够慢：

```
true flux     measurement  
 5000           5000
10000          10000
30000          30000
50000          50000
70000           4465
90000          24465
60000          60000
30000          30000
10000          10000 
```

那么当你溢出时，你往往会有*很大的负下降。*比您在任何其他时间都大得多的负下降。这可以作为您已经溢出的信号。要找到溢出时间段的结束，您可以寻找到离 65535 不远的值的大跳转。

所有这些都取决于可能的最大真实通量以及通量上升和下降的速度。例如，是否有可能在一个测量周期内获得超过 128k 的计数？是否有可能一次测量为 5000，而下一次测量为 50000？如果数据表现得不够好，您可能只能对何时溢出进行统计判断。

            回答 #2

赞同：1

时间：2009-05-29T13:33:10.147

```
int32[] unwrap(int16[] x)
{
   // this is pseudocode
   int32[] y = new int32[x.length];
   y[0] = x[0];
   for (i = 1:x.length-1)
   {
      y[i] = y[i-1] + sign_extend(x[i]-x[i-1]);
      // works fine as long as the "real" value of x[i] and x[i-1]
      // differ by less than 1/2 of the span of allowable values
      // of x's storage type (=32768 in the case of int16)
      // Otherwise there is ambiguity.
   }
   return y;
}

int32 sign_extend(int16 x)
{
   return (int32)x; // works properly in Java and in most C compilers
}

// exercise for the reader to write similar code to unwrap 8-bit arrays
// to a 16-bit or 32-bit array 
```

            回答 #3

赞同：0

时间：2009-05-29T04:21:56.857

您的问题需要提供有关您的实施的更多信息 - 您使用什么语言/框架？

软件中的数据溢出（我认为您正在谈论）是不好的做法，应该避免。虽然您看到（奇怪的数据输出）只是遇到数据溢出时可能出现的一种副作用，但这只是您可以看到的各种问题的冰山一角。

您可能很容易遇到更严重的问题，例如内存损坏，这可能导致程序大声崩溃，或者更糟，*晦涩难懂*。

您是否可以进行任何验证来防止溢出首先发生？

            回答 #4

赞同：0

时间：2009-05-29T04:43:39.670

我真的不认为你可以在不修复底层缓冲区的情况下修复它。您应该如何区分值序列 (0, 1, 2, 1, 0) 和 (0, 1, 65538, 1, 0) 之间的区别？你不能。

            回答 #5

赞同：0

时间：2009-05-29T06:09:29.917

如何使用 HMM，其中隐藏状态是您是否处于溢出状态并且排放是观察到的粒子通量？

棘手的部分是为转换（基本上将编码峰值的时间尺度）和排放（如果您知道通量如何表现以及溢出如何影响测量，您可以构建）的概率模型。这些是特定领域的问题，因此可能没有现成的解决方案。

但是你有模型，其他一切——拟合你的数据、量化不确定性、模拟等等——都是常规的。

            回答 #6

赞同：0

时间：2009-05-29T12:50:39.017

只有在连续值之间的实际跳跃远小于 65536 时，您才能执行此操作。否则，溢出引起的山谷伪影与真正的山谷无法区分，您只能猜测。您可以通过同时分析来自右侧和左侧的信号（假设存在可识别的基线），尝试将溢出与相应的恢复相匹配。

除此之外，你所能做的就是调整你的实验，用不同的原始粒子流重复它，这样真正的山谷不会移动，但人工山谷会移动到溢出点。

        .net - 对哈希表进行排序的原因

ID：924358

赞同：2

时间：2009-05-29T04:15:32.177

标签：.net, vb.net, sorting, hash, hashtable

雇主要求我对哈希表进行排序。我一直认为哈希表的使用在某种程度上是不友好的。我这样想是不是错了，如果不是，你能给我指出一个好的 VB.Net（是的，现在杀了我，但它是一个旧系统）对哈希表进行排序的方法。

谢谢。

            回答 #1

赞同：5

时间：2009-05-29T04:23:39.307

我有几种情况，我从文件中读取名称-值对，需要按照文件中列出的顺序保存它们，但还需要 O(1) 查找时间。一个排序的哈希表是我完成这两者的方式。

对于 .NET 1.1，使用 System.Collections.SortedList。对于 .NET 2.0+，使用 System.Collections.Generic.SortedDictionary。

            回答 #2

赞同：1

时间：2009-05-29T05:18:09.280

我喜欢[DocMax 的回答](https://stackoverflow.com/questions/924358/reason-for-sorting-a-hash-table/924376#924376)。

另一种选择：  

按照 SortedList 或 SortedDictionary 在幕后所做的事情推出您自己的解决方案：  

1.  将哈希表键（或值）放入数组
2.  排序数组
3.  遍历数组并输出排序数据

[（代码从这里](http://www.java2s.com/Tutorial/VB/0160__Collections/Retrieveallkeyssortanditerate.htm)稍作修改）

 ````
Option Strict On

Imports System.Collections

Public Module modMain
 Public Sub Main()
  Dim myHashTable As New Hashtable

  myHashTable.Add("C", "3")
  myHashTable.Add("A", "1")
  myHashTable.Add("B", "2")

  Dim keys As ICollection = myHashTable.Keys
  Dim keysArray(myHashTable.Count - 1) As String 

  keys.CopyTo(keysArray, 0)
  Array.Sort(keysArray)
  For Each key As String in keysArray
     Console.WriteLine("{0} is {1}", key, myHashTable(key))
  Next
 End Sub
End Module 
````  `* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2011-12-13T12:54:13.800

尝试使用队列：

当您需要获得遵循 FIFO（先进先出）规则所需的内容时，在大多数 OOP（如 Java、.NET）中都会使用队列。

堆栈是 LIFO - 后进先出...

```
Dim myQ As Queue(Of KeyValuePair(Of Integer, String)) = New Queue(Of KeyValuePair(Of Integer, String))

myQ.Enqueue(New KeyValuePair(Of Integer, String)(1, "one"))
myQ.Enqueue(New KeyValuePair(Of Integer, String)(2, "two"))
myQ.Enqueue(New KeyValuePair(Of Integer, String)(3, "three"))

'later on you can retrieve objects by
'myQ.Dequeue
Response.Write("<p>Queue</p>")
For Each kvp As KeyValuePair(Of Integer, String) In myQ
    Response.Write(kvp.Key & " is " & kvp.Value & "<br>")
Next

Dim ht As Hashtable = New Hashtable()
ht.Add(1, "one")
ht.Add(2, "two")
ht.Add(3, "three")
Response.Write("<p>Hashtable</p>")
For Each kvp As DictionaryEntry In ht
    Response.Write(kvp.Key & " is " & kvp.Value & "<br>")
Next 
```

# network-programming - 创建过多的套接字如何影响甚至使路由器崩溃？

> ID：924359
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-29T04:16:17.967
> 
>         
> 
> 标签：network-programming

对于可以创建多少个连接（套接字）并将其用于数据传输是否有不同的限制？是否存在家用路由器或商业级路由器是否重要？

例如，不同的用户对 Linksys、D-link 或 Netgear 路由器有不同的体验。有些可能更容易宕机或“卡住”，尤其是当它们正在运行网络密集型程序时（需要拔下路由器的电源线并重新插入）。是因为创建了太多的套接字还是使用了路由器可以支持的太多资源？

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-05-29T04:26:08.143

路由器本身并不关心套接字，除非它们是有状态的路由器，例如 NAT 网关。

如果它是一个有状态的路由器，那么每个连接都会在路由器的 RAM 中占用一些空间，当 RAM 用完时，它必须丢弃旧记录（或者它崩溃，如果幸运的话，重新启动，取决于它是什么供应商...）

在 IP 术语中，“连接”是一个 TCP 会话（由源 IP、源端口、目标 IP、目标端口和序列号协议标识）。UDP 或 ICMP 和朋友本身没有“连接”，但有状态的路由器/防火墙通常通过假设源 IP、源端口、目标 IP、目标端口元组是具有超时的“连接”来伪造它。当一段时间内在该连接上没有看到任何流量时，就认为它已经死了。该超时可能设置在 30 秒到一天之间，具体取决于防火墙/路由器。

是的，一般来说，商业路由器/防火墙更强大，因此可以在有状态时跟踪更多连接。你能买到的最好的路由器通常是一个价值 400 美元的 Linux 或 xBSD x86 机器，带有一两个 RAM 和一个小闪存盘，可以从...

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-05-29T04:21:56.810

执行[网络地址转换](http://en.wikipedia.org/wiki/Network_address_translation)的路由器需要维护每个活动连接的内部 IP 地址/端口号和外部端口号之间的映射。如果这些连接的表变满，可能会导致崩溃、现有连接中断或无法建立新连接等问题。

不执行 NAT 的路由器（以及所有不执行 NAT 的核心 Internet 路由器）通常不易受此影响，因为它们不知道哪些连接正在通过它们，并且单独处理每个数据包。

# c# - C++ 引用类型参数传递和 C# 的 ref 之间的区别？

> ID：924360
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-29T04:16:27.623
> 
>         
> 
> 标签：c#, c++

我一直认为它们是同一件事，但有人在我的一个答案中指出我的答案并不完全正确。

编辑：[这](https://stackoverflow.com/questions/838117/ref-keyword-and-appdomains/838152#838152)是我所说的和我得到的评论。Edit2：C++ 之间有什么区别：

```
public: void foo(int& bar); 
```

和 C# 的

```
public void foo(ref int bar){

} 
```

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-05-29T04:49:46.313

在 C# 中，您有原始类型（整数、结构等）和引用类型（对象）。这些是内置在语言中的。在 C++ 中，你必须是明确的。下面是一组在 C# 和 C++ 中引用对象的等效方法，具体取决于它们是引用类型还是原语，以及您是否使用 ref：

```
C# type                     | C++ Type
----------------------------+---------
Primitive type, with no ref | Normal parameter passing
Reference type, with no ref | Pointer (*)
Primitive type, with ref    | Reference (&)
Reference type, with ref    | Reference of a pointer (&*) 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T04:32:49.437

C++ 的引用 '&' 和 C# 的 ref 完全不同。

C# 中参数的普通对象传递（即没有'ref' 或'out'）相当于C++ 的'reference' 传递。被调用者获得对象的句柄，并且修改对象上的字段确实会修改调用者最初传递的对象。在 C++ 中，如果您传递一个普通对象（无引用），则被调用者会获取该对象的*副本*，并且修改其字段不会**影响**调用者上下文中的原始对象。在 C# 中，如果被调用者为参数分配了一个*新*对象，那么它现在将对新对象进行操作，但调用者不会看到这种变化，因为调用者仍会在其上下文中引用*旧对象。*

C# 中的 'ref' 意味着被调用者实际上可以更改它收到*的句柄。*因此，如果他将句柄分配给*新*对象，则此更改在调用者上下文中可见，传递给调用的参数现在将“指向”*新*对象。这相当于 C++ 传递*对指针的引用*，以便被调用者可以更改指针指向的地址。C# 的 'out' 只是 'ref' 在初始化周围带有一些语义糖，所以以上所有内容都适用于 'out'。

所有这些当然适用于 C# 如何操作对象参数，而不是“值类型”（例如整数）。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T04:21:27.667

没有“const ref”（我猜它在 C# 中被称为“in”而不是“out”）。

C# 编译器将“ref”视为必须在函数调用时有效的东西，如果您尚未初始化它会抱怨，而它将“out”视为之前不应初始化的东西，并且必须在返回之前分配.

您不能在 C# 中“引用”临时属性或属性的返回值。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T04:24:42.273

有一些区别——C#`ref`仅用于参数，并且您只能传递初始化变量（`out`改为使用以消除后一个限制）；C++ 的参考语法可以更自由地使用（例如，对于局部变量[必须在定义时初始化]，并且不用担心在参数的情况下初始化）......但总的来说，我会说差异很小.

# jquery - 在 ajax 模式外调用函数

> ID：924363
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T04:18:31.357
> 
>         
> 
> 标签：jquery, jqmodal

我在我的页面上使用 jqModal 插件进行模式对话框。我有一种情况，其中一个模式包含一个通过 ajax 调用的表单（一个单独的 .aspx 页面，它被加载到模式窗口中。如下所示）

```
 $('#mdl_new').jqm({ ajax: 'ajax/new_modal.aspx', trigger: '#options_add a' }); 
```

当用户在 new_modal.aspx 页面中填写表单并单击提交按钮时，我运行了一些服务器端代码，然后我需要更新主页上的 div，而模态仍然显示。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T07:54:12.203

尝试 jqmodal 的 .onHide 处理程序。它允许您在用户选择关闭对话框时触发操作。

```
 .onHide: function(h) { 
      t.html('Please Wait...');  // Clear Content HTML on Hide.
      //perform your div manipulation here
      h.o.remove(); // remove overlay
      h.w.fadeOut(888); // hide window
    } 
```

# tiles - Apache Tiles 2.1 - 如何防止继承的列表属性被重复？

> ID：924366
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-05-29T04:20:31.890
> 
>         
> 
> 标签：tiles, apache-tiles

我正在使用[Apache Tiles 2.1](http://tiles.apache.org/)开发一个项目。   

我遇到了一个问题，即使用列表属性扩展模板正在创建这些列表项的重复项......每个继承级别的一组重复项。

例如，这是基本定义，以及它将生成的页面：

```
<definition name="base" template="somePage.jsp">
    <!-- snip -->
    <put-list-attribute name="styles">
        <add-attribute value="base.css"/>
    </put-list-attribute>
</definition> 
```

正如预期的那样，这将产生像这样的html：

```
<html>
    <head>
        <!-- snip -->
        <link rel="stylesheet" type="text/css" href="../css/base.css"/>
    </head>
    <body>
         <!-- snip-->
    </body>
</html> 
```

如果我像这样扩展定义：

```
<definition name="firstExtension" extends="base">
    <!-- snip -->
    <put-list-attribute name="styles" inherit="true">
        <add-attribute value="someOther.css"/>
    </put-list-attribute>
</definition> 
```

同样，正如预期的那样，我得到了这个结果：

```
<html>
    <head>
        <!-- snip -->
        <link rel="stylesheet" type="text/css" href="../css/base.css"/>
        <link rel="stylesheet" type="text/css" href="../css/someOther.css"/>
    </head>
    <body>
         <!-- snip-->
    </body>
</html> 
```

但是，如果我扩展前一个，问题就开始了：

```
<definition name="secondExtension" extends="firstExtension">
    <!-- snip -->
    <put-list-attribute name="styles" inherit="true">
        <add-attribute value="evenMore.css"/>
    </put-list-attribute>
</definition> 
```

这个二级扩展产生了这个：

```
<html>
    <head>
        <!-- snip -->
        <link rel="stylesheet" type="text/css" href="../css/base.css"/>
        <link rel="stylesheet" type="text/css" href="../css/base.css"/> <!-- note: duplicate! -->
        <link rel="stylesheet" type="text/css" href="../css/someOther.css"/>
        <link rel="stylesheet" type="text/css" href="../css/evenMore.css"/>
    </head>
    <body>
         <!-- snip-->
    </body>
</html> 
```

“原始”列表的继承属性对于每个扩展定义都会重复一次，即使该定义没有向列表属性添加任何内容。

我试图保持我的定义非常干燥，所以在某些情况下我有 4-5 级继承。因此，“总是使用”的 css 文件会被重复**4-5 次**，即使只有“最低”的定义是唯一将另一个 css 文件添加到列表中的定义。

这是瓷砖中的错误，还是我只是以非预期的方式使用它们？有什么方法可以解决这个问题，而无需简单地消除`inherit="true"`? 如果可能，我想避免在每个定义上编写相同的“核心”css 和 javascript 文件。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-06-05T02:42:19.957

事实证明，这确实是 Apache tile 2.1.2 中的一个错误，而不是我的配置问题。

它已被修复并将包含在 2.1.3 更新中：

请参阅有关它的[瓷砖 JIRA 问题](https://issues.apache.org/jira/browse/TILES-365)。

# jquery - JQuery/AJAX：使用来自外部内容的 ID 的函数

> ID：924370
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T04:21:36.840
> 
>         
> 
> 标签：jquery, ajax

## 理念

我有一个 PHP 主页面，它使用 JQuery 和 AJAX 从外部文件加载 DIV 中的内容。

该页面的工作方式如下：

1.  主页有链接列表，当点击链接时，AJAX 会在页面上加载一个外部 DIV。

2.  这个新的 DIV，然后有另一个链接列表，单击时，AJAX 再次加载另一个外部 DIV

3.  现在有 3 个包含链接列表的 DIV，这个过程可以一次又一次地重复。

DIV 中的每个链接都具有过滤下一个 DIV 的结果的参数。

```
<div id="destination_Div01">
  <a href="?Div01=1">Link</a>
</div> 
```

## 问题

```
$(document).ready(function() {                         
    $('#Destination_Div01 a').click(function(){
        $("#Destination_Div02").load("External.php"+$(this).attr('href')+" #Target_Div02");
        return false;
    });

    $('#Destination_Div02 a').click(function(){
        $("#Destination_Div03").load("External.php"+$(this).attr('href')+" #Target_Div03");
        return false;
    });
}); 
```

当页面第一次加载时，只有一个 DIV 存在，当新的 DIV 被加载时，我不认为 JQuery 注意到现在有一​​个带有链接的新 DIV。

所以现在，当点击新 Destination_Div02 中的链接时，JQuery 无法识别关联的函数，浏览器会继续加载链接的 URL。相反，它的目的是使用 AJAX 将链接 URL 参数传递给外部 PHP 文件，过滤记录集并返回一个新的 DIV。

如何让 JQuery 与新生成的链接一起工作？

* * *

## 答案

归功于“great_llama” 确保您拥有 JQuery 1.3+ 并将代码更改为**$('#Destination_Div01 a').live("click", function(){**

```
$(document).ready(function() {                                             
    $('#Destination_Div01 a').live("click", function(){
        $("#Destination_Div02").load("External.php"+$(this).attr('href')+" #Target_Div02");
        return false;
    });

    $('#Destination_Div02 a').live("click", function(){
        $("#Destination_Div03").load("External.php"+$(this).attr('href')+" #Target_Div03");
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T04:33:13.527

[jQuery 1.3 提供了使用.live 方法](http://docs.jquery.com/Events/live)绑定到未来匹配元素的能力。

> “将处理程序绑定到所有当前和未来匹配元素的事件（如点击）。还可以绑定自定义事件。”

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T04:27:50.800

我认为最好的解决方案是使用回调参数，以便在加载动态内容后，您可以与其 DOM 进行交互。

```
$('#Destination_Div02 a').click(function(){
    $("#Destination_Div03")
    .load("External.php"+$(this).attr('href')+" #Target_Div03", null, function() {
         $(this).click( ///your click code again/// );
         //according to the docs this is the element you just loaded
    );
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T04:30:04.720

将您随后的 $('div').click() 放入回调函数中，以进行每次前一次点击：

```
$('div1').click(function(){
    $('div2').load(link, data, function(){
        $('div2').click(function(){
            $('div3').load(link, data, function(){})
        })
    })
}) 
```

或者你可以给这些链接一个类，每次添加一个新的 div 时，调用一个函数来填充单击时具有操作的链接列表：

```
$('div1').click(function(){
    $('div2').load(link, data, function(){
        some_function();
    }
});

function some_function(){
    $('.class').click(function(){
        //logic here
    }
}); 
```

# flash - Flash 选项卡顺序更改

> ID：924373
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2009-05-29T04:22:46.747
> 
>         
> 
> 标签：flash, actionscript-3, tab-ordering

我正在尝试将屏幕阅读器的一些可访问性添加到 Flash 应用程序中，并且遇到了一个棘手的问题。通过元素的 Tab 键顺序由这些元素的 tabIndex 属性设置。困难在于，由这些构建的选项卡列表似乎是永久的，但应用程序的内容是动态的（由 xml 构建，包含弹出窗口和对话框）。有没有办法刷新/重建选项卡列表？我愿意竭尽全力，尝试一些疯狂的技巧来完成这项工作，所以任何建议都是好的。

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-05-29T04:31:08.763

您可以随时设置编辑元素 tabIndex 值

就像将它们设置为与 childIndex 相同

```
for (var i:int=0;i<container.numChildren;++i) {
    container.getChildAt(i).tabIndex = i; //=i or anything you want
} 
```

以下对我有用

```
iButton1.tabIndex = 1;
iButton2.tabIndex = 2;
iButton3.tabIndex = 3;

iButton1.tabEnabled = true;
iButton2.tabEnabled = true;
iButton3.tabEnabled = true;

function fnClick (pME:MouseEvent):void {
    iButton1.tabIndex = 3;
    iButton2.tabIndex = 2;
    iButton3.tabIndex = 1;
}

iButton3.addEventListener(MouseEvent.CLICK, fnClick); 
```

您可以在此处下载示例 fla
 [http://matrixoft.infunity.com/agents/calvin/flash/tab.rar](http://matrixoft.infunity.com/agents/calvin/flash/tab.rar)

单击第三个按钮，它将更改标签顺序。当您 ctrl-enter 测试 fla 时，您可能需要“Control->Disable keyboard shortcuts”

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2013-12-11T06:28:42.390

我正在使用 Flash Player 11.4 进行编译 切换 TextField 的 tabEnabled 属性很好，但我发现它不适用于 SimpleButtons（将 tabEnabled 设置回 true 时它们不会再次启用）。为此，我正在使用这个：

```
private function setPanelOneTabIndices()
{
    aButton1.tabIndex = 1;
    aButton2.tabIndex = 2;
    aButton3.tabIndex = 3;

    bButton1.tabIndex = 0;
    bButton2.tabIndex = 0;
    bButton3.tabIndex = 0;
}

private function setPanelTwoTabIndices()
{
    aButton1.tabIndex = 0;
    aButton2.tabIndex = 0;
    aButton3.tabIndex = 0;

    bButton1.tabIndex = 1;
    bButton2.tabIndex = 2;
    bButton3.tabIndex = 3;
} 
```

# objective-c - 目标 C：对象名称后的括号

> ID：924380
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T04:26:54.137
> 
>         
> 
> 标签：objective-c

括号在做什么

```
[s addChild: [restartAction() node]];" 
```

或者那个功能叫什么？谢谢。

编辑：我认为 restartAction() 的定义是

```
Class restartAction()
{
    NSString *r = transitions[sceneIdx];
    Class c = NSClassFromString(r);
    return c;
} 
```

transitions[someint] 返回一个字符串。该字符串用于返回一个对象。我仍然不明白为什么需要括号。我期待括号后的冒号。

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-05-29T04:32:37.097

restartAction 看起来像一个不带参数的普通 C 函数。它可能返回一个指向objective-c 类型的指针。

由于 restartAction 返回一个 Objective-C`Class`类型，您可以在其上调用 class(+) 函数。它在语法上等价于调用 [NStype alloc];

如果您想进一步试验，您可以`Class`通过调用 [type class]; 来获取类型的变量；

# c# - C# 和 Visual Studio 2005 中的程序集之间的循环引用

> ID：924382
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-05-29T04:28:05.653
> 
>         
> 
> 标签：c#, visual-studio-2005, n-tier-architecture

我正在努力标准化我所有应用程序的分层/n-Tiered 设计的一种单一方式。

我正在尝试将我的所有应用程序分层为 5 层。

代码：

* * *

## | 用户界面 |

##          |

## | 业务对象 |

##          |

## | 或映射器 |

##          |

## | 数据访问 |

##          |

## | 关系型数据库 |

假设我正在为用户开发一个具有登录/注销功能的应用程序。我在 VS2005 解决方案下创建了 4 个项目。每个项目都针对上 4 层之一。我正在设计我的业务对象类如下：-

```
public class User
{
    private string _username;
    public string Username
    {
        get { return _username; }
        set { _username = value; }
    }

    private string _password;
    public string Password
    {
        get { return _password; }
        set { _password = value; }
    }

    public User()
    {
    }

    public bool LogIn(String username, String password)
    {
        bool success = false;

        if (UserMapper.UsernameExists(username))
        {
            success = UserMapper.UsernamePasswordExists(username, password);
        }
        else
        {
            //do nothing
        }

        return success;
    }

    public bool LogOut()
    {
           bool success;
        //----some logic
           return success;
    }

    public static User GetUserByUsername(string username)
    {
        return UserMapper.GetUserByUsername(username);
    }

    public static UserCollection GetByUserTypeCode(string code)
    {
        return UserMapper.GetByUserTypeCode(code);
    }
} 
```

这就是我如何为我的对象提供一些与现实世界场景相匹配的功能。这里 GetByUsername() 和 GetByUserTypeCode() 是 getter 函数。这些功能与现实世界的逻辑不匹配。因为，在现实世界中，用户永远不会“通过用户名获取”或“通过 UserTypeCode 获取”。所以这些函数保持静态。

我的 OR Mapper 层类如下：-

```
public static class UserMapper
{
    public static bool UsernameExists(String username)
    {
        bool exists = false;

        if (UserDA.CountUsername(username) == 1)
        {
            exists = true;
        }

        return exists;
    }

    public static bool UsernamePasswordExists(String username, String password)
    {
        bool exists = false;

        if (UserDA.CountUsernameAndPassword(username, password) == 1)
        {
            exists = true;
        }

        return exists;
    }
} 
```

最后，DA类如下：-

```
public static class UserDA
{
    public static int CountUsername(string username)
    {
        int count = -1;

        SqlConnection conn = DBConn.Connection;

        if (conn != null)
        {
            try
            {
                SqlCommand command = new SqlCommand();
                command.Connection = conn;
                command.CommandText = @"SELECT COUNT(*) 
                                FROM User 
                                WHERE User_name = @User_name";
                command.Parameters.AddWithValue("@User_name", username);

                command.Connection.Open();
                object idRaw = command.ExecuteScalar();
                command.Connection.Close();

                if (idRaw == DBNull.Value)
                {
                    count = 0;
                }
                else
                {
                    count = (int)idRaw;
                }
            }
            catch (Exception ex)
            {
                count = -1;
            }
        }

        return count;
    }  

    public static int CountUsernameAndPassword(string username, string password)
    {
        int count = 0;

        SqlConnection conn = DBConn.Connection;

        if (conn != null)
        {
            try
            {
                SqlCommand command = new SqlCommand();
                command.Connection = conn;
                command.CommandText = @"SELECT COUNT(*) 
                                FROM User 
                                WHERE User_name = @User_name AND Pass_word = @Pass_word";
                command.Parameters.AddWithValue("@User_name", username);
                command.Parameters.AddWithValue("@Pass_word", password);

                command.Connection.Open();
                object idRaw = command.ExecuteScalar();
                command.Connection.Close();

                if (idRaw == DBNull.Value)
                {
                    count = 0;
                }
                else
                {
                    count = (int)idRaw;
                }
            }
            catch (Exception ex)
            {
                count = 0;
            }
        }

        return count;
    }

    public static int InsertUser(params object[] objects)
    {
        int count = -1;

        SqlConnection conn = DBConn.Connection;

        if (conn != null)
        {
            try
            {
                SqlCommand command = new SqlCommand();
                command.Connection = conn;
                command.CommandText = @"INSERT INTO User(ID, User_name, Pass_word, RegDate, UserTypeCode, ActualCodeOrRoll) 
                                                            VALUES(@ID, @User_name, @Pass_word, @RegDate, @UserTypeCode, @ActualCodeOrRoll)";
                command.Parameters.AddWithValue("@ID", objects[0]);
                command.Parameters.AddWithValue("@User_name", objects[1]);
                command.Parameters.AddWithValue("@Pass_word", objects[2]);
                command.Parameters.AddWithValue("@RegDate", objects[3]);
                command.Parameters.AddWithValue("@UserTypeCode", objects[4]);
                command.Parameters.AddWithValue("@ActualCodeOrRoll", objects[5]);

                command.Connection.Open();
                count = command.ExecuteNonQuery();
                command.Connection.Close();
            }
            catch (Exception ex)
            {
                count = -1;
            }
        }

        return count;
    }

    public static SqlDataReader GetUserByUsername(string username)
    {
        SqlDataReader dataReader = null;

        SqlConnection conn = DBConn.Connection;

        if (conn != null)
        {
            try
            {
                SqlCommand command = new SqlCommand();
                command.Connection = conn;
                command.CommandText = @"SELECT * FROM User WHERE User_name = @User_name";
                command.Parameters.AddWithValue("@User_name", username);

                command.Connection.Open();

                dataReader = command.ExecuteReader(CommandBehavior.CloseConnection);

            }
            catch (Exception ex)
            {
                dataReader.Close();
                dataReader.Dispose();
            }
        }

        return dataReader;
    }

    public static SqlDataReader GetUserByUserTypeCode(string userTypeCode)
    {
        SqlDataReader dataReader = null;

        SqlConnection conn = DBConn.Connection;

        if (conn != null)
        {
            try
            {
                SqlCommand command = new SqlCommand();
                command.Connection = conn;
                command.CommandText = @"SELECT * FROM User WHERE UserTypeCode = @UserTypeCode";
                command.Parameters.AddWithValue("@UserTypeCode", userTypeCode);

                command.Connection.Open();

                dataReader = command.ExecuteReader(CommandBehavior.CloseConnection);

            }
            catch (Exception ex)
            {
                dataReader.Close();
                dataReader.Dispose();
            }
        }

        return dataReader;
    }
} 
```

如果有人仔细研究这些类，他可以理解，OR Mapper 层需要 BusinessObject 层的引用。BusinessObject-layer 也需要 OR Mapper-layer 的引用。

这应该创建一个循环依赖。

我怎样才能避免这个问题？

有人建议使用普通数据传输对象 (DTO)。但是，据我所知，根据 OOP，现实世界对象的属性和功能应该作为一个类组合在一起。如果我使用 DTO，那么如何将功能封装到一个类中？此外，我正在创建另一个没有任何属性（BO）的类。对我来说，这两种方式都违反了 OOP。如果我这样做了，那么 OOP 在这个世界上有什么用？相同的答案可以应用于“UserManager”类。

我找到了一个[博客](http://imar.spaanjaars.com/QuickDocId.aspx?quickdoc=476)。

它讨论了实现接口。定义一个单独的接口，在 BusinessObject 中的数据类中实现它，并针对 BusinessObject 和 OR-Mapper 层中的接口进行编程。

但我不能这样做。

谁能用一个实际的例子告诉我？

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-05-29T04:58:56.513

我认为您可以一起做一些事情来帮助您的设计。我还认为您可能想阅读[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)，因为它可能为您想要做的事情提供更好的设计模式。

假设您只想使您拥有的工作：

*   首先，`static`从您的类中删除这些方法`User`，因为它们“创建”用户，因此最好留在`UserMapper`.

*   之后，仍有许多方法可能使用该类`UserMapper`的功能`User`。创建一个支持and方法的接口`IUserLookup`（或其他东西） ；将此接口与类放在同一个项目中。`UserNameExists``UserNamePasswordExists``User`

*   `IUserLookup`在类上实现`UserMapper`，然后通过构造函数将其“注入”到`User`它使用静态方法创建的类实例中，因此基本上，作为`UserMapper`创建`User`对象，它为它们提供了`IUserLookup`对其实现自身的接口的引用。

这样，`User`只使用方法 on `IUserLookup`，它们在同一个解决方案中，因此不需要参考。并`UserMapper`引用此解决方案，因此它可以创建`User`对象并实现`IUserLookup`接口。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T04:58:37.090

如果 OR Mapper 实际上是在做 OR，那么它可能*不需要*对 BL 的引用——它只需要知道所`Type`涉及的 (s)。但这是一个附带问题...

此类问题的主要答案是“控制反转”/“依赖注入”，大概是在 BL 下剪断所有内容 - 所以 BL 仅依赖于接口（在基础程序集中定义），但不知道具体的 OR/DA/RDBMS（它们由 IoC/DI 提供）。

这是一个很大的话题，所以我故意含糊其辞。我个人喜欢 StructureMap，但有*很多*可用的 IoC/DI 工具。

请注意，*从技术上讲*，*可以*创建循环程序集引用；不过，这是一个**非常**糟糕的主意——而且这些工具会（故意）在每一步都与你作对。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T05:19:34.880

在您上面提交的代码中，没有循环依赖的证据。

当您的呼叫从上层传输到底层时......您的对象转换为适合每一层的专业化（但是在您的情况下，您正在处理每一层上的原语......至少在提交的代码中）......并且当您的电话返回时，它应该从专业化转向泛化......

反之亦然，如果以这种方式观察单个路径，则不存在循环依赖问题。但是，如果在任何分层中您尝试为两侧信息行进路径实现规范化场景，那么我们就会遇到问题，因为每个层都将依赖并需要其封闭层的引用。

但是在您的代码中没有这种循环依赖的证据。但是，如果出现这种情况，可以通过实现接口层或适配器模式（接口层是适配器模式）来避免这种情况。

例如，我们有一个 Layer InformationTravel (IT)...（好吧，我明白这听起来不太好）

| 用户界面 | | | 资讯旅游 | ** | | 业务对象 | | | 或映射器 | | | 数据访问 | | | 关系型数据库 |

您所做的是为您的用户业务对象，声明一个接口 IUser 并在用户业务对象中实现它......

然后BO就有了IT的参考。对象创建应该只在实现 IT 接口的 BO 层中。这完全没问题。当您需要将此对象传递给您的 ORM 时，您通过将其切片到 IT 中实现的接口来传递它，当您收到它时，您在进行必要的修改后再次返回相同的对象。

但这再次暗示您无法在多个层上创建 BO，因为只有 BO 具有接口的实现。但是，如果您真的无法避免这种情况，那么您必须在多个位置提供实现或使用适配器模式（将您的对象封装到客户端期望的另一个对象中）。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T06:54:17.987

To prevent circular reference between assemblies you should use interfaces .For example if your OR-Mapper needs to invoke some members of BL you should recognize these members and put them in one or several interfaces and put them either in an assembly (Interfaces for example) or in your OR-Mapper assembly and let your BL objects implement them then there will be no need to reference your BL in your OR-Mapper assembly.

# shell - sh read 命令在输入中吃反斜杠？

> ID：924388
> 
>         
> 
> 赞同：36
> 
>         
> 
> 时间：2009-05-29T04:30:04.737
> 
>         
> 
> 标签：shell, sh, backslash

也许最容易用一个例子来解释：

```
$ echo '\&|'
\&|
$ echo '\&|' | while read in; do echo "$in"; done
&| 
```

似乎该`read`命令将输入​​中的反斜杠解释为转义并删除它们。我需要在不更改其内容的情况下逐行处理文件，而且我不确定如何在此处停止读取智能。有任何想法吗？

* * *

## 回答 #1

> 赞同：50
> 
>             
> 
> 时间：2009-05-29T04:47:43.443

根据： http: [//www.vias.org/linux-knowhow/bbg_sect_08_02_01.html](http://www.vias.org/linux-knowhow/bbg_sect_08_02_01.html)：

> -r
> 
>   如果给出此选项，则反斜杠不充当转义字符。反斜杠被认为是该行的一部分。特别是，反斜杠换行对不能用作续行。

它适用于我的机器。

```
$ echo '\&|' | while read -r in; do echo "$in"; done
\&| 
```

* * *

## 回答 #2

> 赞同：6
> 
>             
> 
> 时间：2009-05-29T04:48:19.887

`read -r`根据[http://www.ss64.com/bash/read.html](http://www.ss64.com/bash/read.html)使用：

> -r
> 
>       如果给出此选项，则反斜杠不充当转义字符。

# iphone - 如何在 Objective-C 中解析包含 XML 的 NSString？

> ID：924389
> 
>         
> 
> 赞同：8
> 
>         
> 
> 时间：2009-05-29T04:30:20.663
> 
>         
> 
> 标签：iphone, objective-c, xml

在我的 iPhone 应用程序中，我有以下 NSString：

```
NSString *myxml=@"<students>
    <student><name>Raju</name><age>25</age><address>abcd</address> 
    </student></students>"; 
```

我将如何解析这个字符串的 XML 内容？

* * *

## 回答 #1

> 赞同：13
> 
>             
> 
> 时间：2011-06-14T08:03:19.450

下载：
 [https ://github.com/bcaccinolo/XML-to-NSDictionary](https://github.com/bcaccinolo/XML-to-NSDictionary)

然后您只需执行以下操作：

```
NSDictionary *dic = [XMLReader dictionaryForXMLString:myxml error:nil]; 
```

结果是一个 NSDictionary *dic，其中包含字典、数组和字符串，具体取决于 XML：

```
{
    students =     {
        student =         {
            address = abcd;
            age = 25;
            name = Raju;
        };
    };
} 
```

* * *

## 回答 #2

> 赞同：10
> 
>             
> 
> 时间：2009-05-29T06:11:05.653

您应该使用 NSXMLParser 类

这是该类文档的链接：http:
 [//developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)

您的代码应如下所示：

```
@implementation MyClass
- (void)startParsing {
    NSData *xmlData = (Get XML as NSData)
    NSXMLParser *parser = [[[NSXMLParser alloc] initWithData:xmlData] autorelease];
    [parser setDelegate:self];
    [parser parse];
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict {
    NSLog(@"Started %@", elementName);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-08-15T19:21:54.777

另一个答案是：不要使用 XML。改用 plist，它是使用 XML 编写的，但在 Objective-C 中更容易解析为不同的数据类型（例如，NSArray 具有将文件或 NSData plist 转换为 NSArray 的方法）。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2011-05-07T12:08:27.047

我认为与 XMLDocument 最好的等价物是[AbacigilXQ Library](http://code.google.com/p/abacigilxq-library/)。你应该看看它。我正在使用它。

[http://code.google.com/p/abacigilxq-library/](http://code.google.com/p/abacigilxq-library/)

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2011-01-20T20:47:07.333

就像@Jon Hess 提到的那样，只需为 NSXMLParserDelegate 的“可选”方法创建一个包装类。这些方法可帮助您分离在解析 xml 时可能会发现有用的任务。

我发现的一个非常好的在线日志文件是[使用 Objective-C 进行优雅 XML 解析](http://www.levelofindirection.com/journal/2009/9/24/elegant-xml-parsing-with-objective-c.html)。Phil Nash 确实花时间展示了您可以访问的解析选项的基础知识。它可以带一个新程序员并指导他/她完成整个设置。

加载 xml 可以是 @Jon Hess 方法的修改。

您可以设置：

```
-(void)parser:(NSXMLParser *)parser 
didStartElement:(NSString *)elementName 
 namespaceURI:(NSString *)namespaceURI 
qualifiedName:(NSString *)qName 
   attributes:(NSDictionary *)attributeDict{
} 
```

处理某些元素上的事件。

同时实施：

```
-(void)parser:(NSXMLParser *)parser 
foundCharacters:(NSString *)string {
} 
```

将找到的字符串放入对象集合中。

# jquery - 厚盒不加载嵌入标签内容

> ID：924390
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T04:30:42.460
> 
>         
> 
> 标签：jquery, thickbox

我需要一些关于厚箱的建议，拜托！我只是按照thickbox inline 中的示例进行操作，但无法根据需要在页面中加载div 的内容。我的html代码和jquery代码就是这样。对我的问题有什么建议吗？

```
 $(".artist").hover(function(){
        var artistname = $(this).attr("title");
        var artist = "<embed hspace=\"5\" vspace=\"5\" ";
        artist += "src=\"http://abc.vn/res/music/passion/MP3_Player.swf\"";
        artist += "menu=\"false\" quality=\"high\" width=\"330\" height=\"338\"";
        artist += "name=\"index\" allowScriptAccess=\"never\" type=\"";
        artist += "application/x-shockwave-flash\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\"";
        artist +=   "flashvars=\"&amp;config=http://abc.vn/res/music/passion/MP3_Config.xml&amp;";
        artist += "file=http://abc.vn/listsong.hightway?artist=" +artistname+ "\"";
        artist += "wmode=\"transparent\" border=\"0\"></embed>";

        $("#tooltip_artist").replaceWith(artist);
        $("#tooltip_artist").css({display:"none"});
    },function(){});

<a class="artist" title="singer's name" rel="#TB_inline&inlineId=tooltip_artist" href="/singer's name">singer's name</a> 
```

感谢您的关注！

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T08:17:26.480

首先，在这里使用 replaceWith 是不明智的，因为在第一次悬停后，$('tooltip_artist') 节点将被替换为您的 swf --> 后续悬停将不起作用。最好使用 .html() 方法将嵌入代码插入到 $('tooltip_artist') 中。

然后我会为 html 片段使用双引号/单引号，这样您就不必一直转义属性引号

```
var artist = '<embed hspace="5" vspace="5">'; 
```

最后，您确定要在此处使用 .hover 吗？显然，您的意图是在用户将鼠标悬停在他的名字上时播放艺术家的音乐。

但在这种情况下，您的方法是错误的。您最好在页面某处嵌入一个可编写脚本的 mp3 播放器，并在用户将鼠标悬停在曲目名称上时触发其播放方法。与总是在 .hover 上重新实例化 swf 电影相比，这提供了更好的性能。有一个不错的 jPlayer jQuery 插件（完全可通过 CSS 设置样式），你应该看看。

# c# - 进程的开始时间

> ID：924392
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2009-05-29T04:31:13.083
> 
>         
> 
> 标签：c#, .net

如何使用 c# 代码检索进程的开始时间？如果可能的话，我还想知道如何使用 Widows 内置的功能来做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
>             
> 
> 时间：2009-05-29T04:37:52.670

进程有一个属性“StartTime”：http:
 [//msdn.microsoft.com/en-us/library/system.diagnostics.process.starttime.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.starttime.aspx)

你想要“当前”进程的开始时间吗？Process.GetCurrentProcess 将为您提供：http:
 [//msdn.microsoft.com/en-us/library/system.diagnostics.process.getcurrentprocess.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.getcurrentprocess.aspx)

* * *

## 回答 #2

> 赞同：8
> 
>             
> 
> 时间：2009-05-29T05:43:26.407

```
 public DateTime GetProcessStartTime(string processName)
 {
        Process[] p = Process.GetProcessesByName(processName);
        if (p.Length <= 0) throw new Exception("Process not found!");
        return p[0].StartTime;
 } 
```

如果您知道进程的 ID，则可以使用 Process.GetProcessById(int processId)。另外，如果进程位于网络上的另一台机器上，对于 GetProcessesByName() 和 GetProcessById()，您可以将机器名称指定为第二个参数。

要获取进程名称，请确保应用程序正在运行。然后转到“应用程序”选项卡上的任务管理器，右键单击您的应用程序并选择“转到处理”。在进程选项卡中，您会看到突出显示的进程名称。在 c# 代码中使用 .exe 之前的名称。例如，Windows 窗体应用程序将被列为“myform.vshost.exe”。在代码中你应该说

```
 Process.GetProcessesByName("myform.vshost"); 
```

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T14:22:09.520

**在代码中**

假设您要查找记事本的启动时间，当前以 PID 4548 运行。您可以使用 PID 或进程名称找到它，并将其打印到调试窗口，如下所示：

```
//pick one of the following two declarations
var procStartTime = System.Diagnostics.Process.GetProcessById(4548).StartTime;
var procStartTime = System.Diagnostics.Process.GetProcessesByName("notepad").FirstOrDefault().StartTime;
System.Diagnostics.Debug.WriteLine(procStartTime.ToLongTimeString()); 
```

**在 Windows 中**

您可以使用[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)，它具有显示进程启动时间的选项，或者您可以从命令行列出所有当前正在运行的进程及其启动时间，如下所示：

```
wmic process get caption,creationdate 
```

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-07-29T09:50:32.143

[`Process`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)您可以通过检查返回的对象来获取流程元数据`Process.GetProcessesByName()`。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2016-10-22T12:18:57.637

```
System.Diagnostics.Process.GetProcessById(xxx).StartTime;//fails for certain processes with access denied 
```

# java - 如何在Java中获取没有扩展名的文件名？

> ID：924394
> 
>         
> 
> 赞同：315
> 
>         
> 
> 时间：2009-05-29T04:31:40.183
> 
>         
> 
> 标签：java, file

谁能告诉我如何获取没有扩展名的文件名？例子：

```
fileNameWithExt = "test.xml";
fileNameWithOutExt = "test"; 
```

* * *

## 回答 #1

> 赞同：493
> 
>             
> 
> 时间：2009-11-27T10:13:33.973

如果您像我一样，宁愿使用一些他们可能已经想到所有特殊情况的库代码，例如如果您在路径中传递**null**或点而不是在文件名中会发生什么，您可以使用以下内容：

```
import org.apache.commons.io.FilenameUtils;
String fileNameWithOutExt = FilenameUtils.removeExtension(fileNameWithExt); 
```

* * *

## 回答 #2

> 赞同：173
> 
>             
> 
> 时间：2009-05-29T05:31:41.910

最简单的方法是使用正则表达式。

```
fileNameWithOutExt = "test.xml".replaceFirst("[.][^.]+$", ""); 
```

上面的表达式将删除最后一个点后跟一个或多个字符。这是一个基本的单元测试。

```
public void testRegex() {
    assertEquals("test", "test.xml".replaceFirst("[.][^.]+$", ""));
    assertEquals("test.2", "test.2.xml".replaceFirst("[.][^.]+$", ""));
} 
```

* * *

## 回答 #3

> 赞同：66
> 
>             
> 
> 时间：2015-03-16T18:05:36.040

这是我喜欢的综合列表顺序。

**使用 Apache 公共资源**

```
import org.apache.commons.io.FilenameUtils;

String fileNameWithoutExt = FilenameUtils.getBaseName(fileName);

                           OR

String fileNameWithOutExt = FilenameUtils.removeExtension(fileName); 
```

**使用谷歌番石榴（如果你已经在使用它）**

```
import com.google.common.io.Files;
String fileNameWithOutExt = Files.getNameWithoutExtension(fileName); 
```

[Files.getNameWithoutExtension](https://guava.dev/releases/30.1-jre/api/docs/com/google/common/io/Files.html#getNameWithoutExtension(java.lang.String))

**或者使用核心 Java**

1)

```
String fileName = file.getName();
int pos = fileName.lastIndexOf(".");
if (pos > 0 && pos < (fileName.length() - 1)) { // If '.' is not the first or last character.
    fileName = fileName.substring(0, pos);
} 
```

```
if (fileName.indexOf(".") > 0) {
   return fileName.substring(0, fileName.lastIndexOf("."));
} else {
   return fileName;
} 
```

```
private static final Pattern ext = Pattern.compile("(?<=.)\\.[^.]+$");

public static String getFileNameWithoutExtension(File file) {
    return ext.matcher(file.getName()).replaceAll("");
} 
```

**Liferay API**

```
import com.liferay.portal.kernel.util.FileUtil; 
String fileName = FileUtil.stripExtension(file.getName()); 
```

* * *

## 回答 #4

> 赞同：56
> 
>             
> 
> 时间：2009-05-29T05:27:23.957

请参阅以下测试程序：

```
public class javatemp {
    static String stripExtension (String str) {
        // Handle null case specially.

        if (str == null) return null;

        // Get position of last '.'.

        int pos = str.lastIndexOf(".");

        // If there wasn't any '.' just return the string as is.

        if (pos == -1) return str;

        // Otherwise return the string, up to the dot.

        return str.substring(0, pos);
    }

    public static void main(String[] args) {
        System.out.println ("test.xml   -> " + stripExtension ("test.xml"));
        System.out.println ("test.2.xml -> " + stripExtension ("test.2.xml"));
        System.out.println ("test       -> " + stripExtension ("test"));
        System.out.println ("test.      -> " + stripExtension ("test."));
    }
} 
```

输出：

```
test.xml   -> test
test.2.xml -> test.2
test       -> test
test.      -> test 
```

* * *

## 回答 #5

> 赞同：46
> 
>             
> 
> 时间：2013-04-10T10:43:24.543

如果您的项目使用**[Guava](https://code.google.com/p/guava-libraries/)**（14.0 或更高版本），您可以使用[`Files.getNameWithoutExtension()`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/Files.html#getNameWithoutExtension%28java.lang.String%29).

（本质上与`FilenameUtils.removeExtension()`Apache Commons IO 相同，正如[投票率最高的答案](https://stackoverflow.com/a/1807868/56285)所暗示的那样。只是想指出 Guava 也这样做。就我个人而言，我不想添加对 Commons 的依赖——我觉得这有点像遗物——正因为如此。）

* * *

## 回答 #6

> 赞同：8
> 
>             
> 
> 时间：2016-07-04T03:36:17.370

以下是来自[https://android.googlesource.com/platform/tools/tradefederation/+/master/src/com/android/tradefed/util/FileUtil.java的参考](https://android.googlesource.com/platform/tools/tradefederation/+/master/src/com/android/tradefed/util/FileUtil.java)

```
/**
 * Gets the base name, without extension, of given file name.
 * <p/>
 * e.g. getBaseName("file.txt") will return "file"
 *
 * @param fileName
 * @return the base name
 */
public static String getBaseName(String fileName) {
    int index = fileName.lastIndexOf('.');
    if (index == -1) {
        return fileName;
    } else {
        return fileName.substring(0, index);
    }
} 
```

* * *

## 回答 #7

> 赞同：6
> 
>             
> 
> 时间：2016-12-14T20:47:19.273

如果您不喜欢导入完整的 apache.commons，我提取了相同的功能：

```
public class StringUtils {
    public static String getBaseName(String filename) {
        return removeExtension(getName(filename));
    }

    public static int indexOfLastSeparator(String filename) {
        if(filename == null) {
            return -1;
        } else {
            int lastUnixPos = filename.lastIndexOf(47);
            int lastWindowsPos = filename.lastIndexOf(92);
            return Math.max(lastUnixPos, lastWindowsPos);
        }
    }

    public static String getName(String filename) {
        if(filename == null) {
            return null;
        } else {
            int index = indexOfLastSeparator(filename);
            return filename.substring(index + 1);
        }
    }

    public static String removeExtension(String filename) {
        if(filename == null) {
            return null;
        } else {
            int index = indexOfExtension(filename);
            return index == -1?filename:filename.substring(0, index);
        }
    }

    public static int indexOfExtension(String filename) {
        if(filename == null) {
            return -1;
        } else {
            int extensionPos = filename.lastIndexOf(46);
            int lastSeparator = indexOfLastSeparator(filename);
            return lastSeparator > extensionPos?-1:extensionPos;
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：4
> 
>             
> 
> 时间：2012-12-07T19:12:53.463

虽然我非常相信重用库，但[org.apache.commons.io JAR](http://commons.apache.org/io/download_io.cgi)为 174KB，这对于移动应用程序来说非常大。  

如果您下载源代码并查看他们的 FilenameUtils 类，您会发现有很多额外的实用程序，并且它确实可以处理 Windows 和 Unix 路径，这一切都很可爱。

但是，如果您只想要几个用于 Unix 样式路径的静态实用程序方法（使用“/”分隔符），您可能会发现下面的代码很有用。  

该`removeExtension`方法保留路径的其余部分以及文件名。也有类似的`getExtension`。

```
/**
 * Remove the file extension from a filename, that may include a path.
 * 
 * e.g. /path/to/myfile.jpg -> /path/to/myfile 
 */
public static String removeExtension(String filename) {
    if (filename == null) {
        return null;
    }

    int index = indexOfExtension(filename);

    if (index == -1) {
        return filename;
    } else {
        return filename.substring(0, index);
    }
}

/**
 * Return the file extension from a filename, including the "."
 * 
 * e.g. /path/to/myfile.jpg -> .jpg
 */
public static String getExtension(String filename) {
    if (filename == null) {
        return null;
    }

    int index = indexOfExtension(filename);

    if (index == -1) {
        return filename;
    } else {
        return filename.substring(index);
    }
}

private static final char EXTENSION_SEPARATOR = '.';
private static final char DIRECTORY_SEPARATOR = '/';

public static int indexOfExtension(String filename) {

    if (filename == null) {
        return -1;
    }

    // Check that no directory separator appears after the 
    // EXTENSION_SEPARATOR
    int extensionPos = filename.lastIndexOf(EXTENSION_SEPARATOR);

    int lastDirSeparator = filename.lastIndexOf(DIRECTORY_SEPARATOR);

    if (lastDirSeparator > extensionPos) {
        LogIt.w(FileSystemUtil.class, "A directory separator appears after the file extension, assuming there is no file extension");
        return -1;
    }

    return extensionPos;
} 
```

* * *

## 回答 #9

> 赞同：2
> 
>             
> 
> 时间：2020-06-18T17:59:35.567

如果您确定文件名中只有一个点用于扩展名，您可以使用 java split 函数将文件名与扩展名分开。

`File filename = new File('test.txt');
 File.getName().split("[.]");` 

所以`split[0]`将返回“test”，而 split[1] 将返回“txt”

* * *

## 回答 #10

> 赞同：1
> 
>             
> 
> 时间：2018-09-25T03:50:12.907

```
public static String getFileExtension(String fileName) {
        if (TextUtils.isEmpty(fileName) || !fileName.contains(".") || fileName.endsWith(".")) return null;
        return fileName.substring(fileName.lastIndexOf(".") + 1);
    }

    public static String getBaseFileName(String fileName) {
        if (TextUtils.isEmpty(fileName) || !fileName.contains(".") || fileName.endsWith(".")) return null;
        return fileName.substring(0,fileName.lastIndexOf("."));
    } 
```

* * *

## 回答 #11

> 赞同：1
> 
>             
> 
> 时间：2019-11-30T17:36:23.440

流畅的方式：

```
public static String fileNameWithOutExt (String fileName) {
    return Optional.of(fileName.lastIndexOf(".")).filter(i-> i >= 0)
            .map(i-> fileName.substring(0, i)).orElse(fileName);
} 
```

* * *

## 回答 #12

> 赞同：1
> 
>             
> 
> 时间：2019-12-11T09:02:54.573

从相对路径或完整路径获取名称的最简单方法是使用

`import org.apache.commons.io.FilenameUtils;
FilenameUtils.getBaseName(definitionFilePath)` 

* * *

## 回答 #13

> 赞同：1
> 
>             
> 
> 时间：2020-12-28T07:17:32.107

对于 Kotlin，它现在很简单：

```
val fileNameStr = file.nameWithoutExtension 
```

* * *

## 回答 #14

> 赞同：1
> 
>             
> 
> 时间：2021-07-31T21:25:29.340

```
fileEntry.getName().substring(0, fileEntry.getName().lastIndexOf(".")); 
```

* * *

## 回答 #15

> 赞同：1
> 
>             
> 
> 时间：2022-02-15T06:36:06.927

给定 String `filename`，您可以执行以下操作：

```
String filename = "test.xml";
filename.substring(0, filename.lastIndexOf("."));   // Output: test
filename.split("\\.")[0];   // Output: test 
```

* * *

## 回答 #16

> 赞同：0
> 
>             
> 
> 时间：2017-10-24T08:20:42.277

你可以用“。”来分割它。索引 0 是文件名，索引 1 是扩展名，但我倾向于使用 apache.commons-io 中的 FileNameUtils 的最佳解决方案，就像第一篇文章中提到的那样。它不必被删除，但足够的是：

`String fileName = FilenameUtils.getBaseName("test.xml");` 

* * *

## 回答 #17

> 赞同：0
> 
>             
> 
> 时间：2019-04-06T07:31:04.257

`FilenameUtils.removeExtension`从**Apache Commons IO**使用

 **例子：

您可以提供**完整的路径名**或**仅提供文件名**。

```
String myString1 = FilenameUtils.removeExtension("helloworld.exe"); // returns "helloworld"
String myString2 = FilenameUtils.removeExtension("/home/abc/yey.xls"); // returns "yey" 
```

希望这可以帮助 ..

* * *

## 回答 #18

> 赞同：0
> 
>             
> 
> 时间：2020-02-14T22:19:24.503

保持简单，使用 Java 的 String.replaceAll() 方法，如下所示：

```
String fileNameWithExt = "test.xml";
String fileNameWithoutExt
   = fileNameWithExt.replaceAll( "^.*?(([^/\\\\\\.]+))\\.[^\\.]+$", "$1" ); 
```

当 fileNameWithExt 包含完全限定的路径时，这也有效。

* * *

## 回答 #19

> 赞同：0
> 
>             
> 
> 时间：2020-11-20T23:03:42.213

我的解决方案需要以下导入。

```
import java.io.File; 
```

以下方法应返回所需的输出字符串：

```
private static String getFilenameWithoutExtension(File file) throws IOException {
    String filename = file.getCanonicalPath();
    String filenameWithoutExtension;
    if (filename.contains("."))
        filenameWithoutExtension = filename.substring(filename.lastIndexOf(System.getProperty("file.separator"))+1, filename.lastIndexOf('.'));
    else
        filenameWithoutExtension = filename.substring(filename.lastIndexOf(System.getProperty("file.separator"))+1);

    return filenameWithoutExtension;
} 
```

* * *

## 回答 #20

> 赞同：0
> 
>             
> 
> 时间：2021-10-07T10:27:48.647

com.google.common.io.Files

Files.getNameWithoutExtension(sourceFile.getName())

也可以做一份工作

* * *

## 回答 #21

> 赞同：-3
> 
>             
> 
> 时间：2013-01-13T02:55:50.123

试试下面的代码。使用核心 Java 基本功能。它处理`String`带扩展名和不带扩展名（没有`'.'`字符）的 s。`'.'`还涵盖了多个情况。

```
String str = "filename.xml";
if (!str.contains(".")) 
    System.out.println("File Name=" + str); 
else {
    str = str.substring(0, str.lastIndexOf("."));
    // Because extension is always after the last '.'
    System.out.println("File Name=" + str);
} 
```

您可以调整它以使用`null`字符串。

# html - XHTML 什么时候会意外地在 IE 上引起问题？

> ID：924398
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T04:33:06.240
> 
>         
> 
> 标签：html, internet-explorer, xhtml

由于 IE 不会将 XHTML 呈现为 XHTML，而是将其视为 HTML，那么这实际上何时会对 IE 造成问题？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T04:42:20.077

我知道一个案例，在哪里

```
<div style="clear:both" /> 
```

在支持 XHTML 的浏览器中，div 是关闭的。但是 IE 会将 div 视为仍处于打开状态，因此以后布局可能会产生意想不到的结果。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T04:45:36.847

如果 MIME 类型未指定为 text/html，Internet Explorer 将无法区分 XHTML 文档和 XML 文档。但是，因为它完全支持 HTML 4.01，所以大多数问题都来自于定位、布局和 CSS 属性的不一致和非标准实现。为避免任何问题，最好编写有效的 XHTML 并指定 DOCTYPE。

[所有已知 Internet Explorer 错误的列表](http://www.positioniseverything.net/explorer.html)

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2010-01-03T23:32:07.020

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T20:56:24.930

这些都适用于任何将 XHTML 视为 text/html 而不是专门的 IE 的浏览器，但您应该在此处阅读 XHTML 1.0 规范的附录 C：http: [//www.w3.org/TR/xhtml1/#guidelines](http://www.w3.org/TR/xhtml1/#guidelines)

# xcode - Xcode中“断点”标记的颜色是什么意思

> ID：924407
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-29T04:40:05.103
> 
>         
> 
> 标签：xcode, debugging, breakpoints

当我设置断点（双击编辑器的边框在特定行）时，有 3 种颜色：1\. 蓝色 2\. 淡蓝色 3\. 黄色带蓝色边框

你能告诉我每种颜色的含义是什么吗？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
>             
> 
> 时间：2009-05-29T16:25:24.490

深蓝色的意思是“断点设置，武装，准备出发”。

浅蓝色的意思是“断点设置了，但是你已经暂时中止了”（可能是不小心再次点击了）

橙色的意思是“你定义这个断点的代码还没有（还没有？）加载到程序中；一旦加载，断点将被设置和武装。”

# silverlight - 在 Silverlight 3 中从 Web 流式传输 WAV 文件

> ID：924409
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-29T04:41:13.823
> 
>         
> 
> 标签：silverlight, httpwebrequest, silverlight-3.0, webrequest, wavmss

我已经设法在 Silverlight 3 中发现[Gilles Khouzam](http://blogs.msdn.com/gillesk/archive/2009/03/23/playing-back-wave-files-in-silverlight.aspx)对 WAV 文件的播放实现，虽然这将是战斗的大部分，但我坚持最后一个细节：我如何从某个地方从网络上提取一个 wav 文件，然后将其输入到他的 WaveMediaStreamSource 中进行播放？

这是我最接近的：

```
 public MainControl()
    {
        // Required to initialize variables
        InitializeComponent();
        PlayButton.Click += PlayButtonClicked;
    }

    private void PlayButtonClicked(object sender, RoutedEventArgs e)
    {
        HttpWebRequest request = (HttpWebRequest) WebRequest.Create(@"soundfile.wav");
        request.BeginGetResponse(ReadCallback, request); 
    }

    private void ReadCallback(IAsyncResult asynchronousResult)
    {
        HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
        HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);

        WaveMediaStreamSource wavMss = new WaveMediaStreamSource(response.GetResponseStream());
        MediaPlayer.SetSource(wavMss);
    } 
```

**编辑：**
原来问题与 HttpWebRequest 有关。将代码更改为：

```
 public MainPage()
    {
        InitializeComponent();
        WebClient webClient = new WebClient();
        webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient_OpenReadCompleted);
        webClient.OpenReadAsync(new Uri(@"http://www.russellmyers.com/somefile.wav", UriKind.Absolute));
    }

    void webClient_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {

        WaveMediaStreamSource wavMss = new WaveMediaStreamSource(e.Result);
        Debug.WriteLine("Setting source...");
        Media.SetSource(wavMss);
    } 
```

工作正常。[在阅读了Shawn Wildermuth 关于差异的文章](http://wildermuth.com/2008/09/27/WebClient_vs_WebRequest_in_Silverlight_2)后，这也是有道理的。我想让 HttpWebRequest 工作，因为它不会在 UI 线程上完成。

# architecture - 游戏开发中的实时进程通信

> ID：924418
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T04:44:07.113
> 
>         
> 
> 标签：architecture, events, ipc, real-time

如果您制作的游戏架构将系统组件（IE、渲染、物理、逻辑、输入、脚本等）拆分为不同的线程，您如何处理需要实时通信的情况？

例如，如果一个脚本想要在屏幕上绘制一个盒子，理想情况下它会在渲染组件发出“FrameDrawn”事件时执行此操作，以便在每帧绘制结束时将盒子绘制在屏幕顶部. 如果脚本组件和渲染组件位于彼此不同的线程上，这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T06:19:38.780

通常，渲染线程是唯一一个将东西绘制到屏幕上的线程。但是，由于线程可以通信，所以脚本线程可以告诉渲染线程“嘿，我想在下一帧画一个框”。

我们的项目处理线程通信的方式是两种方式之一。对于动态编辑的东西——对象列表、移动车辆等，我们创建一个互斥锁，在数据被更改时锁定数据。如果渲染器想要绘制它，但更新线程正在删除该对象，渲染器将不得不等待。对于其他东西，比如 ui，我们只有由 ui 线程写入并由渲染器读取的全局标志，因此不需要互斥锁。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T09:40:49.713

大多数游戏将拥有大量数据和几个线程根据需要引用该数据的某些子集。线程之间的通信很少是显式的，更常见的是隐式通信，通过一个线程引起的数据更改完成，然后由第二个线程注意到。更改受到互斥锁、信号量或其他低级同步原语的保护。

对于您的绘图示例，脚本线程将更改 GUI 组件中的一些数据，而渲染线程在下次渲染 GUI 时会看到新数据并相应地绘制框。

但是请记住，大多数游戏开发人员并没有像您的示例中那样对事物进行线程化，部分原因是使用共享大量数据并依赖低级别锁定来确保正确性的模型很难有效地做到这一点。理想情况下，更多的游戏开发者会转向共享更少数据的模型，但由于软实时演示响应要求，这很困难。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T04:58:23.377

您所要求的实际上是不可能的，这就是为什么一般规则是只有一个 UI 线程。如果另一个线程想要在屏幕上显示某些东西，它应该向 UI 线程发送一条消息，UI 线程将在渲染时显示该消息。

# c# - ASP.NET 请求生命周期混乱

> ID：924422
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T04:45:32.587
> 
>         
> 
> 标签：c#, asp.net, request, page-lifecycle

我是 C# 和 .Net 的新手，并且来自 Java 背景。我正试图了解 .NET 做 Web 应用程序的方式，但运气不佳。

我想构建一个应用程序来处理请求 url 并编写返回图像的响应。仅在 Web 应用程序领域中使用了 Java servlet，我在处理应用程序请求端的一些很好的资源和/或解释之后。

如何处理请求？和什么对象？什么是周期？页面如何围绕此运行？

这些是基本的广泛问题，所以如果有人知道彻底涵盖它们的资源，请告诉我。到目前为止，我发现的只是一些信息，而不是整体情况。

* * *

## 回答 #1

> 赞同：8
> 
>             
> 
> 时间：2009-05-29T05:02:23.967

整个页面周期很复杂——但对于提供图像，您可能希望主要查看`IHttpHandler`界面——或者（更简单地）创建一个“通用处理程序”（.ashx 文件）。这`IHttpHandler`是最简单的“请求/响应”设置，没有 .aspx 页面的负担；您只需从 context.Request 中读取，然后写入 context.Response。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-07-27T19:15:30.407

对于仅提供图像的服务，请查看 HttpHandlers。

至于页面生命周期：我喜欢这张图片：（[来源：][[eggheadcafe.com](http://www.eggheadcafe.com/articles/o_aspNet_Page_LifeCycle.jpg)][）][![蛋头咖啡厅](https://i.stack.imgur.com/JFBGj.jpg)](https://i.stack.imgur.com/JFBGj.jpg)

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T05:06:58.910

[本概述](http://msdn.microsoft.com/en-us/library/ms178472.aspx)将解释 Page 生命周期，Page（一个 ASPX 页面）是 ASP.NET 中的默认 HTTP 处理程序。

但是还有其他方法可以处理 HTTP 调用。[该资源](http://msdn.microsoft.com/en-us/library/ms227675(VS.80).aspx)将解释 .NET 如何处理 HTTP 调用，以及默认情况下 ASPX Pages 如何处理它们。

干杯

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T04:54:24.270

[这](http://msdn.microsoft.com/en-us/library/ms178472.aspx)是开始描述页面生命周期的好地方。

对于您的其他问题，我实际上建议您买一本书并坐下来几个小时。[编程 ASP.NET 2.0 核心参考](https://rads.stackoverflow.com/amzn/click/com/0735621764)已证明其非常有价值。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T04:55:28.433

站点 asp.net 包含许多帮助您入门的信息。一个好的起点是[学习部分](http://www.asp.net/learn/)。

当然，MSDN 有很多信息。您可能会发现一些有趣的文章和页面： - [ASP.NET 页面生命周期概述](http://msdn.microsoft.com/en-us/library/ms178472.aspx)
 -[创建 ASP.NET 网页](http://msdn.microsoft.com/en-us/library/fddycb06.aspx)

阅读 MSDN 上的文本时，请查看左侧的树结构以获取更多内容。

# asp.net-mvc - 在参数中使用 UpdateModel 和 ModelBinding 的区别

> ID：924424
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T04:46:28.703
> 
>         
> 
> 标签：asp.net-mvc

为什么我要在这里使用 UpdateModel？

一种。

```
 public ActionResult SubmitPerson(Person person)
 {       } 
```

B.

```
 public ActionResult SubmitPerson(FormCollection form)
{
    Person person=new Person();
    UpdateModel<IFilter>(person,form)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T05:17:03.663

这最终取决于您的实施要求。  

在 A. 中，将创建一个 Person 对象的新实例，并且模型绑定器将尝试更新表单中的属性。  

在 B. 中，您提供的示例还将创建一个新的 Person 对象，并尝试通过 IFilter 接口更新属性，这是在 MVC 中指定白名单的方法之一。

您可能使用选项 B 的另一个原因是更新现有对象（例如，从数据库中的数据填充的对象）而不是创建新对象实例。

# delphi - Delphi 的 x86 代码生成器框架

> ID：924425
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-05-29T04:47:16.423
> 
>         
> 
> 标签：delphi, code-generation, x86, intel, assembly

有没有人遇到过 Delphi 的框架或库来简化 x86 代码的生成？我不是在寻找一个汇编器，而是一个将代码生成过程抽象到低级位和字节之上的框架。理想情况下，我想在现有库或框架之上构建，而不是根据具体情况对逻辑进行硬编码。

最初的用途是在运行时生成小的代码存根，类似于 Delphi 分派 SOAP 请求的方式。如果我找不到东西，我可能会自己动手，但我不想重新发明轮子。如果许可证允许在商业和开源项目中翻译和使用，那么“C”中的某些内容可能会让我感兴趣。

更新：

这里有一些更多的上下文：我正在努力将接口和/或类的运行时实现作为持久性框架的一部分。有点像 Java 注释驱动的持久性 (JPA/EJB3)，除了具有明显的 Delphi 风格。调用目标是一个模块化/可扩展的框架，它将实现一个通用的持久性模型。我需要以非常动态和流畅的方式调度和挂钩基于 RTTI 和注释/属性模型（类似于 InstantObjects 元数据）的方法调用。

谢谢，大卫

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-05-29T05:03:10.100

我对你的问题想得越多。我不确定您是否只是尝试进行动态方法调用。即使您询问有关生成 x86 代码的问题。有几种技术可以做到这一点。

如果您知道相关方法的签名，您可以通过使用 TMethod 并设置方法地址和数据来轻松完成。   

```
procedure TForm8.Button1Click(Sender: TObject);
begin
  Showmessage('Hello1');
end;

procedure TForm8.Button2Click(Sender: TObject);
var
 M : TMethod;
begin
  M.Code := MethodAddress('Button1Click');
  M.Data := Self;
  TNotifyEvent(M)(self);
end; 
```

如果您不知道方法签名，您可以使用 {$METHODINFO ON} 编写类，然后使用 ObjAuto.pas 中的功能来调用该方法。

我在DelphiLive 的[RTTI 演示代码](http://code.google.com/p/robstechcorner/downloads/list)中有一个示例，说明如何做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T06:16:16.320

根据[PaxCompiler](http://www.paxcompiler.com)的特性，您可以创建独立的可执行文件。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T07:25:37.737

非常投机的答案：像[LLVM](http://llvm.org/)之类的东西？我不确定它是否可以从 delphi 中使用，但是您应该能够使用它创建 dll。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T09:52:28.673

从逻辑上讲，您只需生成 delphi 代码，通过 cmdline 编译器编译为 DLL/BPL，然后动态加载该代码？

不幸的是，Delphi Explorer 并没有附带 cmdline 编译器。而且您的主要二进制文件也必须在 Delphi Explorer 中（或者至少在 D2006 中，如果它足够兼容二进制文件）

Delphi 版本（或 Free Pascal）的任何混合都可能无法在包或 HLL 级别上工作，只能在基本的过程 DLL 级别上工作。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2011-10-31T03:20:02.230

我刚刚发现了一个有趣的框架，它可以完成我最初发布问题时所寻找的大部分内容。对于我的目的来说有点晚了，但认为其他人可能会觉得这很有用：

[DAsmJit](http://villavu.com/forum/showthread.php?t=56493) [asmjit 项目](http://code.google.com/p/asmjit/)的 Delphi 端口

# stack - 哪种语言/平台没有固定的堆栈大小？

> ID：924430
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T04:49:22.353
> 
>         
> 
> 标签：stack, stack-size

某些语言或平台是否没有固定大小的堆栈，因此不容易溢出？我记得在 UNIX 上使用 C，堆栈很难溢出，而在 Win 3.1 的日子里，堆栈很容易溢出。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T04:58:20.663

如果“堆栈”是指任何旧堆栈，那么大多数语言都是如此——Java 有一个仅受内存限制的[堆栈类。](http://java.sun.com/j2se/1.4.2/docs/api/java/util/Stack.html)您更可能是指调用堆栈，在这种情况下，我能想到的最大示例是[Stackless Python](http://www.stackless.com/)，据我了解，它使用纯 Python 内存限制堆栈（如 Java）作为 Python 代码的调用堆栈，而不是而不是使用 C 的调用堆栈。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T04:57:51.507

这是一个实践与理论的问题。lisp 解释器的堆栈仅受可用内存的限制

在实现尾递归的方案和其他语言中，尾递归函数将具有无限堆栈

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T13:28:39.643

Mac 系统 6、7 和 8 的调用堆栈可以不受人为限制地增长。

它也没有保证检测堆栈 - 堆冲突的方法，并且可能会让你陷入各种麻烦......

# makefile - 如何删除以下警告？

> ID：924432
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T04:50:43.880
> 
>         
> 
> 标签：makefile

我在构建代码时收到以下警告：

> gcc -o uartsim.exe xtmpmain.o uartsim.o fiber_driver.o xtmp_options.o getopt.o D:\usr\xtensa\XtDev ToolsDE\install\tools\RB-2008.4-win32\XtensaTools\lib\iss\xtmp.lib mt -V manifest uartsim.exe.manifest '-f outputresource:uartsim.exe;1' mt V2.3, Corinna Vinschen, Apr 19 2004 make: *** No rule to make target `', needed by`all'。停止。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T04:57:15.953

“这仅仅意味着构建工具想要构建一个目标文件，但找不到执行此操作所需的所有源文件。因此，这些工具将尝试制作丢失的文件，但随后会发现他们不知道如何这样做，因此有关没有“制定目标”的规则的错误消息。该消息可能出于多种原因而发生。

因此，请确保构建依赖关系树所需的所有文件确实存在。

以下是网络上的一些链接，应该会有所帮助：

1.  [http://www.newlc.com/en/forum/whats-no-rule-make-target-error-actually-means](http://www.newlc.com/en/forum/whats-no-rule-make-target-error-actually-means)

2.  [http://www.google.com/search?q="No+rule+to+make+target"](http://www.google.com/search?q=)

# spring -
方法？

> ID：924436
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-29T04:54:38.607
> 
>         
> 
> 标签：spring, gwt, spring-mvc, spring-security

我在xml中有一个bean，如下所示

```
<bean id="theCustomAuthenticationProvider" class="test.custom.CustomAuthenticationProvider">
<security:custom-authentication-provider /> 
```

> **一个**。我可以知道security:custom-authentication-provider 是什么意思，当我像上面那样把它放在我的bean 中时？

**乙**。我需要创建吗

```
<bean id="authenticationManager" class="org.springframework.security.providers.ProviderManager"> ref to theCustomAuthenticationProvider 
```

在 xml 中？

**丙**。如果 b。答案是肯定的，或者，我可以在标签内使用 CustomAuthenticationProvider 的 ref 吗？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T07:52:52.237

这个想法是标记一个bean：

```
<security:custom-authentication-provider /> 
```

将 bean 注册`AuthenicationManager`为由 spring security 提供的身份验证提供程序。你不需要**b**。

# sql - SQL选择用字符串替换整数

> ID：924442
> 
>         
> 
> 赞同：21
> 
>         
> 
> 时间：2009-05-29T04:56:04.830
> 
>         
> 
> 标签：sql, database, database-design

目标是用数字表示的 char 值替换 SQL 查询中返回的整数值。例如：

标记为“运动”的表属性定义为 1-4 之间的整数值。1 = 篮球，2 = 曲棍球等。下面是数据库表，然后是所需的输出。

**数据库表：**

```
Player     Team     Sport
--------------------------
Bob        Blue     1
Roy        Red      3
Sarah      Pink     4 
```

**期望的输出：** 

```
Player     Team     Sport
------------------------------
Bob        Blue     Basketball
Roy        Red      Soccer
Sarah      Pink     Kickball 
```

将这些整数值转换为字符串值的最佳做法是什么？在传递给程序之前使用 SQL 翻译值？使用脚本语言更改程序中的值？改变数据库设计？

* * *

## 回答 #1

> 赞同：28
> 
>             
> 
> 时间：2009-05-29T05:05:18.460

数据库应该保存这些值，您应该连接到另一个包含该数据的表。

所以你应该有一张桌子，上面有一份人员名单

> ID 名称 FavSport 
> 
>   1 Alex 4 
> 
>   2 Gnats 2

然后是另一个有运动列表的表

> ID 运动
> 
>   1 篮球
> 
>   2 足球
> 
>   3 足球
> 
>   4 踢球

然后你会在这些表之间进行连接

```
select people.name, sports.sport 
from people, sports 
where people.favsport = sports.ID 
```

这会让你回来

> 名称 运动
> 
>   Alex Kickball 
> 
>   Gnat Football

您也可以使用 case 语句，例如。只需使用上面的 people 表，您就可以编写类似的内容

```
select name, 
       case 
         when favsport = 1 then 'Basketball' 
         when favsport = 2 then 'Football' 
         when favsport = 3 then 'Soccer' 
         else 'Kickball' 
       end as "Sport" 
from people 
```

但这肯定不是最佳做法。

* * *

## 回答 #2

> 赞同：13
> 
>             
> 
> 时间：2009-05-29T05:06:31.173

MySQL有一个`CASE`声明。以下适用于 SQL Server：

```
SELECT
    CASE MyColumnName
        WHEN 1 THEN 'First'
        WHEN 2 THEN 'Second'
        WHEN 3 THEN 'Third'
        ELSE 'Other'
    END 
```

* * *

## 回答 #3

> 赞同：4
> 
>             
> 
> 时间：2012-03-06T21:05:57.183

在 oracle 中，您可以使用**DECODE**功能，该功能将提供一种解决方案，其中数据库的设计超出您的控制范围。

![在此处输入图像描述](https://i.stack.imgur.com/NqrUP.jpg)

直接来自 oracle[文档](http://docs.oracle.com/)：

示例：此示例对值warehouse_id 进行解码。如果warehouse_id 为1，则函数返回'Southlake'；如果warehouse_id 为2，则返回“旧金山”；等等。如果warehouse_id 不是1、2、3 或4，则函数返回“非国内”。

```
SELECT product_id,
       DECODE (warehouse_id, 1, 'Southlake', 
                             2, 'San Francisco', 
                             3, 'New Jersey', 
                             4, 'Seattle',
                                'Non domestic') "Location" 
  FROM inventories
  WHERE product_id < 1775
  ORDER BY product_id, "Location"; 
```

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T05:04:40.143

这种`CASE`表达可能会有所帮助。但是，拥有一个带有 int 主键和字符串的小表可能会更快，`name`例如

```
1  baseball
2  football 
```

等等，并且`JOIN`在查询中适当地使用它。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T05:09:06.353

您认为将整数和字符串之间的这些关系存储在数据库本身中会有所帮助吗？只要您必须存储这些关系，就可以将其存储在靠近您的数据（在数据库中）而不是在可能丢失的代码中。如果您使用此解决方案，这将使整数成为另一个表中值的外键。您将整数存储在另一个表中，例如和`sports`，并将它们作为查询的一部分连接起来。`sport_id``sport`

而不是`SELECT * FROM my_table`你会`SELECT * from my_table`并使用[适当的 join](http://dev.mysql.com/doc/refman/5.0/en/join.html)。如果不是主列中的每一行都有相应的运动，则可以使用左连接，否则从两个表中选择并在 where 子句中使用 = 可能就足够了。

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T05:14:45.100

绝对让数据库保存字符串值。我无论如何都不是数据库专家，但我建议您创建一个包含字符串及其相应整数值的表。从那里，您可以定义两个表之间的关系，然后在 select 中执行 JOIN 以提取整数的字符串版本。

```
tblSport Columns
------------
SportID int (PK, eg. 12)
SportName varchar (eg. "Tennis")

tblFriend Columns
------------
FriendID int (PK)
FriendName (eg. "Joe")
LikesSportID (eg. 12)

In this example, you can get the following result from the query below:
SELECT FriendName, SportName
FROM tblFriend
INNER JOIN tblSport
ON tblFriend.LikesSportID = tblSport.SportID 
```

伙计，已经晚了——我希望我没听错。顺便说一句，您应该阅读不同类型的连接 - 这是一个最简单的示例。

# c# - 如何创建一个简单的 c# http 监视器/拦截器？

> ID：924449
> 
>         
> 
> 赞同：8
> 
>         
> 
> 时间：2009-05-29T04:58:32.487
> 
>         
> 
> 标签：c#, http, monitoring, blocking

我正在阅读我希望的那个问题（[如何在 C# 中创建简单的代理？](https://stackoverflow.com/questions/226784/how-to-create-a-simple-proxy-in-c)）。

我只是想开发 ac# 应用程序，例如，监视 Firefox、IE 等并记录所有导航页面。根据访问的页面，我想阻止该网站（如父母过滤器）。

代码片段/示例很好，但如果你能告诉我这些类的一些使用方向，我将不胜感激。:-)

* * *

## 回答 #1

> 赞同：20
> 
>             
> 
> 时间：2009-06-09T01:39:09.903

我会回答适合家长的：ala“家长控制”

当孩子不到 10 岁时，您可以从代理服务器开始。之后，他们将弄清楚如何绕过代理（或运行他们自己的绕过代理的客户端应用程序）。在青少年早期，您可以使用原始套接字。将此程序键入 Visual Studio (C#)。

```
class Program
{
    static void Main(string[] args)
    {
        try
        {
            byte[] input = BitConverter.GetBytes(1);
            byte[] buffer = new byte[4096];
            Socket s = new Socket(AddressFamily.InterNetwork, SocketType.Raw, ProtocolType.IP);
            s.Bind(new IPEndPoint(IPAddress.Parse("192.168.1.91"), 0));
            s.IOControl(IOControlCode.ReceiveAll, input, null);

            int bytes = 0;
            do
            {
                bytes = s.Receive(buffer);
                if (bytes > 0)
                {
                    Console.WriteLine(Encoding.ASCII.GetString(buffer, 0, bytes));
                }
            } while (bytes > 0);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);
        }
    }
} 
```

请注意，这只是一个“片段”，缺乏适当的设计和错误检查。[请不要使用“原样”-您确实要求先机]将IP地址更改为您的机器。**以管理员**身份运行程序（在命令行中使用“runas”，或右键单击“以管理员身份运行”）。只有管​​理员可以在现代版本的 Windows 上创建和使用原始套接字。坐下来观看节目。

所有网络流量都传递到您的代码（显示在屏幕上，使用此程序看起来不太好）。

下一步是创建一些协议过滤器。了解各种 Internet 应用程序协议（假设您还不知道），修改程序以检查数据包。查找 HTTP 协议，并保存适当的数据（如 GET 请求）。

我个人为 AIM (AOL Instant Messenger)、HTTP、MSN messenger (Windows Live Messenger)、POP 和 SMTP 设置了过滤器。今天，由于孩子们现在更喜欢 Facebook 墙而不是 AIM，因此 HTTP 几乎可以满足所有需求。

随着孩子们进入青少年时期，您将希望退出监控。有人说这是为了让孩子“长大”，但真正的原因是“<strong>*你不想知道*”。我放弃了只收集获取请求的 URL，以及明文形式的用户名/密码（用于紧急情况）（pop、基本身份验证等）。

我不知道青少年后期会发生什么；我无法想象事情会变得更糟，但我被告知“我还没有看到任何东西”。

就像之前有人说的那样，这只在目标机器上运行时才有效（我在房子里的所有机器上运行一个副本）。否则，为了简单的监控检查你的路由器——我的路由器有一些不错的日志记录功能。

我最后的评论是，这个应用程序应该直接用 C/C++ 编写，针对 Win32 API，并安装为在机器上以管理权限运行的服务。我认为这种类型的代码不适合托管 c#。您可以在 C# 中附加一个 UI 以进行监视和控制。您必须对代码进行工程设计，以使对系统的显着影响为零。

* * *

## 回答 #2

> 赞同：7
> 
>             
> 
> 时间：2009-05-29T16:25:47.453

您的方法将取决于您是否将此应用程序安装在用于浏览的同一机器上或单独的代理服务器上。

如果您在单独的服务器上执行此操作，则在 C#/托管代码中完成此操作会更容易，因为您只需编写客户端 PC 将指向的 C# 代理服务器。System.Net.Sockets 命名空间 TcpListener 和 TcpClient 将成为您的朋友。

但是，如果您将其安装在同一台机器上，请查看[WinPcap](http://www.winpcap.org/)和[SharpPCap](http://www.tamirgal.com/blog/page/SharpPcap.aspx)，也许还有[Fiddler](http://www.fiddler2.com/fiddler2/)以获得一些想法。  

希望有帮助。

# java - EL 通过整数键访问映射值

> ID：924451
> 
>         
> 
> 赞同：86
> 
>         
> 
> 时间：2009-05-29T04:58:40.320
> 
>         
> 
> 标签：java, jsp, jstl, el

我有一个由整数键控的地图。使用 EL，如何通过键访问值？

```
Map<Integer, String> map = new HashMap<Integer, String>();
map.put(1, "One");
map.put(2, "Two");
map.put(3, "Three"); 
```

我认为这会起作用，但它不起作用（地图已经在请求的属性中）：

```
<c:out value="${map[1]}"/> 
```

**跟进：**我找到了问题所在。显然`${name[1]}`用数字作为一个地图查找`Long`。当我更改`HashMap`为`TreeMap`并收到错误时，我发现了这一点：

```
java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Long 
```

如果我将地图更改为：

```
Map<Long, String> map = new HashMap<Long, String>();
map.put(1L, "One"); 
```

然后`${name[1]}`返回“一”。那是怎么回事？为什么`<c:out>`将数字视为长。对我来说似乎违反直觉（因为 int 比 long 更常用）。

所以我的新问题是，是否有 EL 表示法可以通过`Integer`值访问地图？

* * *

## 回答 #1

> 赞同：118
> 
>             
> 
> 时间：2009-05-29T05:44:08.417

初步答案（EL 2.1，2009 年 5 月）

正如[这个java论坛线程](http://forums.sun.com/thread.jspa?messageID=9702932#9702932)中提到的：

> 基本上自动装箱将一个整数对象放入地图中。IE：

```
map.put(new Integer(0), "myValue") 
```

EL（表达式语言）将 0 评估为 Long 并因此寻找 Long 作为映射中的键。即它评估：

```
map.get(new Long(0)) 
```

由于 a`Long`永远不等于`Integer`对象，因此它不会在映射中找到条目。

简而言之就是这样。

* * *

## 自 2009 年 5 月以来的更新 (EL 2.2)

[2009 年 12 月引入了 EL 2.2 和 JSP 2.2/Java EE 6](https://stackoverflow.com/a/4812883/6309)，与[EL 2.1 相比有一些不同](https://stackoverflow.com/a/7209200/6309)。

似乎（“ [EL Expression parsing integer as long](https://stackoverflow.com/a/18269163/6309) ”）：

> **您可以在 EL 2.2`intValue`中的对象 self 上`Long`**调用该方法：

```
<c:out value="${map[(1).intValue()]}"/> 
```

这可能是一个很好的解决方法（在下面的[Tobias Liefke](https://stackoverflow.com/users/4371659/tobias-liefke)的[回答](https://stackoverflow.com/a/27533414/6309)中也提到过）

* * *

原答案：

EL 使用以下包装器：

```
Terms                  Description               Type
null                   null value.               -
123                    int value.                java.lang.Long
123.00                 real value.               java.lang.Double
"string" ou 'string'   string.                   java.lang.String
true or false          boolean.                  java.lang.Boolean 
```

JSP 页面演示了这一点：

```
 <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

 <%@ page import="java.util.*" %>

 <h2> Server Info</h2>
Server info = <%= application.getServerInfo() %> <br>
Servlet engine version = <%=  application.getMajorVersion() %>.<%= application.getMinorVersion() %><br>
Java version = <%= System.getProperty("java.vm.version") %><br>
<%
  Map map = new LinkedHashMap();
  map.put("2", "String(2)");
  map.put(new Integer(2), "Integer(2)");
  map.put(new Long(2), "Long(2)");
  map.put(42, "AutoBoxedNumber");

  pageContext.setAttribute("myMap", map);  
  Integer lifeInteger = new Integer(42);
  Long lifeLong = new Long(42);  
%>
  <h3>Looking up map in JSTL - integer vs long </h3>

  This page demonstrates how JSTL maps interact with different types used for keys in a map.
  Specifically the issue relates to autoboxing by java using map.put(1, "MyValue") and attempting to display it as ${myMap[1]}
  The map "myMap" consists of four entries with different keys: A String, an Integer, a Long and an entry put there by AutoBoxing Java 5 feature.       

  <table border="1">
    <tr><th>Key</th><th>value</th><th>Key Class</th></tr>
    <c:forEach var="entry" items="${myMap}" varStatus="status">
    <tr>      
      <td>${entry.key}</td>
      <td>${entry.value}</td>
      <td>${entry.key.class}</td>
    </tr>
    </c:forEach>
</table>

    <h4> Accessing the map</h4>    
    Evaluating: ${"${myMap['2']}"} = <c:out value="${myMap['2']}"/><br>
    Evaluating: ${"${myMap[2]}"}   = <c:out value="${myMap[2]}"/><br>    
    Evaluating: ${"${myMap[42]}"}   = <c:out value="${myMap[42]}"/><br>    

    <p>
    As you can see, the EL Expression for the literal number retrieves the value against the java.lang.Long entry in the map.
    Attempting to access the entry created by autoboxing fails because a Long is never equal to an Integer
    <p>

    lifeInteger = <%= lifeInteger %><br/>
    lifeLong = <%= lifeLong %><br/>
    lifeInteger.equals(lifeLong) : <%= lifeInteger.equals(lifeLong) %> <br> 
```

* * *

## 回答 #2

> 赞同：11
> 
>             
> 
> 时间：2011-03-29T14:44:03.567

除了上述注释之外，另一个有用的提示是当您在某个变量（例如请求参数）中包含一个字符串值时。在这种情况下，将其传入也会导致 JSTL 将“1”的值作为字符串键入，因此在 Map hashmap 中找不到匹配项。

解决这个问题的一种方法是做这样的事情。

```
<c:set var="longKey" value="${param.selectedIndex + 0}"/> 
```

这现在将被视为一个 Long 对象，然后当它包含在地图 Map 或其他内容中时有机会匹配一个对象。

然后，像往常一样继续

```
${map[longKey]} 
```

* * *

## 回答 #3

> 赞同：10
> 
>             
> 
> 时间：2014-12-17T19:34:06.057

如果将数字放入“（”“）”，则可以使用 Long 中的所有功能。这样，您可以将 long 转换为 int：

```
<c:out value="${map[(1).intValue()]}"/> 
```

* * *

## 回答 #4

> 赞同：3
> 
>             
> 
> 时间：2012-01-24T00:53:31.290

根据上面的帖子，我尝试了这个并且效果很好我想使用 Map B 的值作为 Map A 的键：

```
<c:if test="${not empty activityCodeMap and not empty activityDescMap}">
<c:forEach var="valueMap" items="${auditMap}">
<tr>
<td class="activity_white"><c:out value="${activityCodeMap[valueMap.value.activityCode]}"/></td>
<td class="activity_white"><c:out value="${activityDescMap[valueMap.value.activityDescCode]}"/></td>
<td class="activity_white">${valueMap.value.dateTime}</td>
</tr>
</c:forEach>
</c:if> 
```

* * *

## 回答 #5

> 赞同：3
> 
>             
> 
> 时间：2012-09-28T08:27:20.993

如果您碰巧有一个无法更改的`Map`with`Integer`键，您可以编写一个[自定义 EL 函数](https://stackoverflow.com/questions/7079978/how-to-create-a-custom-el-function)将 a 转换`Long`为`Integer`. 这将允许您执行以下操作：

```
<c:out value="${map[myLib:longToInteger(1)]}"/> 
```

# sql-server - 存储过程返回 varchar

> ID：924455
> 
>         
> 
> 赞同：10
> 
>         
> 
> 时间：2009-05-29T05:01:58.727
> 
>         
> 
> 标签：sql-server, stored-procedures

我想知道在 SQL 中是否可以`varchar`从存储过程中返回一个值，我见过的大多数示例返回值都是一个 int。

过程中的示例：

```
declare @ErrorMessage varchar(255)

if @TestFlag = 0
   set @ErrorMessage = 'Test'

return @ErrorMessage 
```

* * *

## 回答 #1

> 赞同：20
> 
>             
> 
> 时间：2009-05-29T05:05:22.000

您可以使用 out 参数或 resulset 返回任何数据类型。

返回值应始终为整数

```
CREATE PROCEDURE GetImmediateManager
   @employeeID INT,
   @managerName VARCHAR OUTPUT
AS
BEGIN
   SELECT @managerName = ManagerName
   FROM HumanResources.Employee 
   WHERE EmployeeID = @employeeID
END 
```

取自[这里](http://msdn.microsoft.com/en-us/library/ms378108.aspx)

* * *

## 回答 #2

> 赞同：8
> 
>             
> 
> 时间：2009-05-29T05:09:56.150

您需要为此创建一个存储函数：

```
create function dbo.GetLookupValue(@value INT)
returns varchar(100)
as begin
  declare @result varchar(100)

  select
    @result = somefield
  from 
    yourtable
  where 
    ID = @value;

  return @result
end 
```

然后，您可以像这样使用这个存储的函数：

```
select dbo.GetLookupValue(4) 
```

马克

* * *

## 回答 #3

> 赞同：5
> 
>             
> 
> 时间：2009-05-29T05:07:20.550

存储过程的返回码始终是整数，但您可以拥有`OUTPUT`任何所需类型的参数 - 请参阅[http://msdn.microsoft.com/en-us/library/aa174792.aspx](http://msdn.microsoft.com/en-us/library/aa174792.aspx)。

# apache - apache 上的 mod_deflate 导致浏览器执行 200 而不是 304？

> ID：924456
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T05:02:15.263
> 
>         
> 
> 标签：apache, caching, mod-deflate, http-status-code-304

我在 Ubuntu 机器上的 Apache 2 上启用了 mod_deflate，并注意到我的浏览器在页面刷新时没有缓存压缩文件类型。我使用萤火虫的网络设置来检查这一点并在另一台计算机上验证。

在 mod_deflate 下，如果我压缩 css 和 js 文件，浏览器每次都会发出请求。

如果我关闭 mod_deflate，浏览器会为 css 和 js 文件获得 304。最终效果是，如果我没有启用 mod_deflate，刷新时页面加载速度会更快。

我打开的其他模块之一会导致这种情况吗？Apache中是否有某种我设置不正确的缓存设置？

我启用 mods 的目录： alias.conf 

authz_default.load 

autoindex.conf 

deflate.load 

mime.conf 

php5.conf 

setenvif.load 

alias.load 

authz_groupfile.load 

autoindex.load 

dir.conf 

mime.load 

php5.load 

ssl.conf 

auth_digest。加载

authz_host.load 

cgi.load 

dir.loadnegotiation.conf 

rewrite.load 

ssl.load 

authn_file.load 

authz_user.load 

deflate.conf 

env.loadnegotiation.load 

setenvif.conf 

_ 

_  

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-11-12T15:41:15.400

这实际上是 Apache 关于使用 gzip 的 Etags 的错误：

[https://issues.apache.org/bugzilla/show_bug.cgi?id=45023](https://issues.apache.org/bugzilla/show_bug.cgi?id=45023)

转动 ETags 有效，但有更好的解决方法：

```
<IfModule mod_headers.c>
    RequestHeader  edit "If-None-Match" "^(.*)-gzip$" "$1"
    Header  edit "ETag" "^(.*[^g][^z][^i][^p])$" "$1-gzip"
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-30T00:12:19.043

我以为我之前回答过这个问题......虽然没有发布。对不起，如果它最终成为一个双重职位。

原来是 etags 导致了这个问题。我不知道为什么，但是当我们关闭 etags 时，浏览器开始正确缓存内容。在 Google 上搜索 FileETags。

现在，我不确定为什么关闭 etags 会这样做……如果有人知道，请在此线程中发帖。谢谢！

# java-me - 与 CDMA 手机相关的代码（如 MEID）是什么？

> ID：924465
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T05:05:13.093
> 
>         
> 
> 标签：java-me

与CDMA手机相关的代码是什么？就像我们在 GSM 中有 IMSI、IMEI、CellID 一样，我们是否有任何可以从 CDMA 手机中检索到的代码？任何人都可以建议如何从手机中检索它们（以编程方式）？

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T09:58:27.040

仍然没有标准的 J2ME 电话 API，所以要么查看 JSR-120 中的 cbs 连接可以为您提供什么，要么使用系统属性。

我建议尝试在 GSM 手机和 CDMA 手机上检索相同的代码。它可能只是工作。

要检索 IMEI，请查看：

[获取设备 IMEI](https://stackoverflow.com/questions/680782/getting-device-imei/681033#681033)

# http - 休息集合中的分页

> ID：924472
> 
>         
> 
> 赞同：135
> 
>         
> 
> 时间：2009-05-29T05:09:01.547
> 
>         
> 
> 标签：http, rest, http-headers, pagination

我有兴趣将直接 REST 接口暴露给 JSON 文档的集合（想想[CouchDB](http://couchdb.apache.org/)或[Persevere](http://persvr.org/)）。我遇到的问题是`GET`如果集合很大，如何处理集合根目录上的操作。

举个例子，假设我正在公开 StackOverflow 的`Questions`表格，其中每一行都作为文档公开（不一定有这样的表格，只是一个相当大的“文档”集合的具体示例）。该集合将在`/db/questions`使用通常的 CRUD api时提供`GET /db/questions/XXX`，`PUT /db/questions/XXX`,`POST /db/questions`正在播放中。获取整个集合的标准方法是，`GET /db/questions`但如果天真地将每一行作为 JSON 对象转储，您将获得相当大的下载量和服务器方面的大量工作。

解决方案当然是分页。Dojo 在其[JsonRestStore](http://docs.dojocampus.org/dojox/data/JsonRestStore#id7)`Range`中解决了这个问题，方法是使用带有自定义范围单元的标头的符合 RFC2616 的巧妙扩展`items`。结果是 a`206 Partial Content`只返回请求的范围。这种方法相对于查询参数的优势在于它将查询字符串留给...查询（例如`GET /db/questions/?score>200`，或者某些类似的，是的，它会被编码`%3E`）。

这种方法完全涵盖了我想要的行为。问题是[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616)在 206 响应中指定了这一点（强调我的）：

> **请求**必须包含一个 Range 头字段（第[14.35 节](https://www.rfc-editor.org/rfc/rfc2616#section-14.35)）指示所需的范围，并且可以包含一个 If-Range 头字段（[第 14.27 节](https://www.rfc-editor.org/rfc/rfc2616#section-14.27)）以使请求有条件。

这在标头的标准用法的上下文中是有道理的，但这是一个问题，因为我希望 206 响应成为处理天真的客户/随机人探索的默认值。

我已经详细查看了 RFC 以寻找解决方案，但对我的解决方案不满意，并且对 SO 对这个问题的看法很感兴趣。

我有过的想法：

*   *`200`带头返回`Content-Range`！*- 我不认为这是错误的，但如果有一个更明显的指标表明响应只是部分内容，我会更喜欢。

*   *Return`400 Range Required`* - 对于所需的标头没有特殊的 400 响应代码，因此必须使用默认错误并手动读取。这也使得通过 Web 浏览器（或其他一些客户端，如 Resty）进行探索变得更加困难。

*   *使用查询参数*- 标准方法，但我希望允许查询 la Persevere，这会切入查询命名空间。

*   *刚回来`206`！*- 我认为大多数客户不会惊慌失措，但我宁愿不反对 RFC 中的 MUST

*   *扩展规格！Return`266 Partial Content`* - 行为与 206 完全相同，但响应的是不得包含`Range`标头的请求。我认为 266 足够高，我不应该遇到碰撞问题，这对我来说很有意义，但我不清楚这是否被视为禁忌。

我认为这是一个相当普遍的问题，我希望看到它以一种事实上的方式完成，这样我或其他人就不会重新发明轮子。

当集合很大时，通过 HTTP 公开完整集合的最佳方式是什么？

* * *

## 回答 #1

> 赞同：33
> 
>             
> 
> 时间：2009-06-23T09:25:14.410

我真的不同意你们中的一些人。我已经为我的 REST 服务的这个特性工作了几个星期。我最终做的事情真的很简单。我的解决方案只对 REST 人们所说的集合有意义。

客户端必须包含一个“Range”标头来指示他需要集合的哪一部分，或者当请求的集合太大而无法在单次往返中检索时，准备好处理 413 REQUESTED ENTITY TOO LARGE 错误。

服务器发送一个 206 PARTIAL CONTENT 响应，其中 Content-Range 标头指定已发送资源的哪一部分，以及一个 ETag 标头来标识集合的当前版本。我通常使用类似 Facebook 的 ETag {last_modification_timestamp}-{resource_id}，并且我认为集合的 ETag 是它包含的最近修改资源的 ETag。

要请求集合的特定部分，客户端必须使用“Range”标头，并使用从先前执行的请求中获得的集合的 ETag 填充“If-Match”标头，以获取同一集合的其他部分。因此，服务器可以在发送请求的部分之前验证集合没有更改。如果存在更新版本，则返回 412 PRECONDITION FAILED 响应以邀请客户端从头开始检索集合。这是必要的，因为这可能意味着在当前请求的部分之前或之后可能已经添加或删除了一些资源。

我将 ETag/If-Match 与 Last-Modified/If-Unmodified-Since 结合使用来优化缓存。浏览器和代理可能依赖其中之一或两者来实现缓存算法。

我认为 URL 应该是干净的，除非它包含搜索/过滤查询。如果你仔细想想，搜索只不过是一个集合的局部视图。除了cars/search?q=BMW 类型的URL，我们应该看到更多的cars?manufacturer=BMW。

* * *

## 回答 #2

> 赞同：24
> 
>             
> 
> 时间：2009-05-29T06:54:28.207

我的直觉是 HTTP 范围扩展不是为您的用例设计的，因此您不应该尝试。部分响应意味着`206`，并且`206`必须仅在客户要求时才发送。

您可能需要考虑一种不同的方法，例如在 Atom 中的一种使用（其中设计表示可能是部分的，并返回一个 status`200`和可能的分页链接）。请参阅[RFC 4287](http://www.ietf.org/rfc/rfc4287.txt)和[RFC 5005](http://www.ietf.org/rfc/rfc5005.txt)。

* * *

## 回答 #3

> 赞同：8
> 
>             
> 
> 时间：2012-11-14T06:09:35.547

您仍然可以返回`Accept-Ranges`并`Content-Ranges`使用`200`响应代码。这两个响应标头为您提供了足够的信息来*推断*`206`响应代码明确提供的相同信息。

我会使用`Range`分页，并让它简单地返回`200`一个普通的`GET`。

这感觉 100% RESTful**并且**不会让浏览变得更加困难。

编辑：我写了一篇关于这个的博客文章：http: [//otac0n.com/blog/2012/11/21/range-header-i-choose-you.html](http://otac0n.com/blog/2012/11/21/range-header-i-choose-you.html)

* * *

## 回答 #4

> 赞同：5
> 
>             
> 
> 时间：2009-06-04T06:00:20.200

如果有超过一页的回复，并且您不想一次提供整个集合，这是否意味着有多种选择？

在对 的请求中`/db/questions`，返回指定如何访问每个页面的标头以及带有 URL 列表的 JSON 对象或 HTML 页面`300 Multiple Choices`。`Link`

```
Link: <>; rel="http://paged.collection.example/relation/paged"
Link: <>; rel="http://paged.collection.example/relation/paged"
... 
```

每页结果都有一个`Link`标题（空字符串表示当前 URL，每个页面的 URL 相同，只是使用不同的范围访问），并且根据[即将发布的`Link`规范](https://datatracker.ietf.org/doc/html/draft-nottingham-http-link-header-05#section-4.2)将关系定义为自定义关系. 这种关系会解释你的习惯`266`，或者你的违反`206`。这些标头是您的机器可读版本，因为无论如何您的所有示例都需要一个理解客户端。

（如果您坚持使用“范围”路线，我相信您自己的`2xx`返回代码，正如您所描述的，将是这里的最佳行为。您应该为您的应用程序执行此操作，并且此类 ["HTTP 状态代码是可扩展的。 "]，你有充分的理由。）

`300 Multiple Choices`说您还应该为主体提供一种供用户代理选择的方式。如果您的客户理解，它应该使用`Link`标题。如果是用户手动浏览，可能是一个带有指向特殊“分页”根资源的链接的 HTML 页面，该根资源可以处理基于 URL 呈现该特定页面？  `/humanpage/1/db/questions`或类似的可怕的东西？

* * *

对 Richard Levasseur 帖子的评论让我想起了另一个选项：`Accept`标题（第 14.1 节）。回到 oEmbed 规范出来的时候，我想知道为什么它没有完全使用 HTTP 完成，并写了一个使用它们的替代方案。

保留初始天真的 HTTP 的 、标头和 HTML 页面`300 Multiple Choices`，而不是使用范围，让您的新分页关系定义标头的使用。您的后续 HTTP 请求可能如下所示：`Link``GET``Accept`

```
GET /db/questions HTTP/1.1
Host: paged.collection.example
Accept: application/json;PagingSpec=1.0;page=1 
```

标`Accept`头允许您定义可接受的内容类型（您的 JSON 返回），以及该类型的可扩展参数（您的页码）。从我的 oEmbed 文章中翻阅我的笔记（此处无法链接到它，我将在我的个人资料中列出），您可以非常明确并在此处提供规范/关系版本，以防您需要重新定义`page`参数的含义在将来。

* * *

## 回答 #5

> 赞同：4
> 
>             
> 
> 时间：2009-06-03T03:12:24.703

编辑：

在考虑了更多之后，我倾向于同意 Range 标头不适合分页。逻辑是，Range 标头用于服务器的响应，而不是应用程序。如果您提供 100 兆字节的结果，但服务器（或客户端）一次只能处理 1 兆字节，那么这就是 Range 标头的用途。

我也认为资源的子集是它自己的资源（类似于关系代数。），因此它应该在 URL 中表示。

所以基本上，我放弃了关于使用标题的原始答案（如下）。

* * *

我认为您或多或少地回答了您自己的问题-使用内容范围返回 200 或 206 并可选择使用查询参数。我会嗅探用户代理和内容类型，并根据这些检查查询参数。否则，需要范围标头。

您基本上有相互冲突的目标 - 让人们使用他们的浏览器进行探索（这不容易允许自定义标头），或者强迫人们使用可以设置标头的特殊客户端（不允许他们探索）。

你可以根据请求为他们提供特殊的客户端——如果它看起来像一个普通的浏览器，发送一个小的 ajax 应用程序来呈现页面并设置必要的标题。

当然，还有关于 URL 是否应该包含此类事情的所有必要状态的争论。使用标题指定范围可能被某些人认为是“不安的”。

顺便说一句，如果服务器可以使用“Can-Specify: Header1, header2” 标题进行响应，并且 Web 浏览器将呈现 UI 以便用户可以根据需要填写值，那就太好了。

* * *

## 回答 #6

> 赞同：3
> 
>             
> 
> 时间：2009-06-03T02:10:40.787

您可能会考虑使用类似 Atom Feed Protocol 的模型，因为它有一个健全的 HTTP 集合模型以及如何操作它们（其中疯狂意味着 WebDAV）。

有定义集合模型和 REST 操作的[Atom 发布协议，此外，您可以使用](https://www.rfc-editor.org/rfc/rfc5023)[RFC 5005 - Feed Paging and Archiving](https://www.rfc-editor.org/rfc/rfc5005)对大集合进行分页。

从 Atom XML 切换到 JSON 内容应该不会影响这个想法。

* * *

## 回答 #7

> 赞同：3
> 
>             
> 
> 时间：2009-06-04T21:11:24.727

我认为这里真正的问题是规范中没有任何内容告诉我们在面对 413 - Requested Entity Too Large 时如何进行自动重定向。

*我最近也在为同样的问题苦苦挣扎，我在RESTful Web Services*书中寻找灵感。由于标题要求，我个人认为 206 不合适。我的想法也将我带到了 300，但我认为对于不同的 mime 类型来说更多，所以我在附录 B，第 377 页中查找了 Richardson 和 Ruby 就这个主题所说的话。他们建议服务器只选择首选表示并将其发送回 200，基本上忽略了它应该是 300 的概念。

这也与我们从 atom 获得的下一个资源的链接的概念相吻合。我实施的解决方案是将“下一个”和“上一个”键添加到我发回的 json 映射中并完成它。

后来我开始想也许要做的事情是发送一个 307 - 临时重定向到一个类似于 /db/questions/1,25 的链接 - 将原始 URI 作为规范资源名称，但它会让你适当命名的从属资源。这是我希望从 413 中看到的行为，但 307 似乎是一个很好的折衷方案。不过，实际上还没有在代码中尝试过。更好的是重定向重定向到包含最近提出的问题的实际 ID 的 URL。例如，如果每个问题都有一个整数 ID，并且系统中有 100 个问题，并且您想显示最近的 10 个问题，那么对 /db/questions 的请求应该是 307 到 /db/questions/100,91

这是一个很好的问题，谢谢你的提问。你向我证实，我并没有因为花了几天时间思考这件事而发疯。

* * *

## 回答 #8

> 赞同：2
> 
>             
> 
> 时间：2014-06-27T08:17:26.710

随着[rfc723x](http://www.w3.org/Protocols/#rfc723x)的发布，**未注册的范围单位确实违反了规范中的明确建议**。考虑[rfc7233](https://www.rfc-editor.org/rfc/rfc7233)（弃用 rfc2616）：

“[新的范围单位应该在 IANA 注册](https://www.rfc-editor.org/rfc/rfc7233#section-2.2)”（连同对[HTTP Range Unit Registry](http://www.iana.org/assignments/http-parameters/http-parameters.xhtml#range-units)的引用）。

* * *

## 回答 #9

> 赞同：2
> 
>             
> 
> 时间：2014-08-15T13:17:35.293

范围标头的一大问题是许多公司代理将它们过滤掉。我建议改用查询参数。  

* * *

## 回答 #10

> 赞同：1
> 
>             
> 
> 时间：2009-06-04T05:18:31.323

您可以检测`Range`标头，如果存在则模仿 Dojo，如果不存在则模仿 Atom。在我看来，这巧妙地划分了用例。如果您从应用程序响应 REST 查询，您希望它使用`Range`标题进行格式化。如果您正在响应一个随意的浏览器，那么如果您返回分页链接，它将让该工具提供一种探索集合的简单方法。

* * *

## 回答 #11

> 赞同：0
> 
>             
> 
> 时间：2009-06-05T19:43:46.527

在我看来，最好的方法是将范围作为查询参数。例如，**GET /db/questions/?date>mindate&date<maxdate**。在没有查询参数的情况下对 /db/questions/ 进行 GET，返回 303 和  **Location: /db/questions/?query-parameters-to-retrieve-the-default-page**。然后提供一个不同的 URL，由使用您的 API 的任何人获取有关集合的统计信息（例如，如果她/他想要整个集合，则使用什么查询参数）；

* * *

## 回答 #12

> 赞同：0
> 
>             
> 
> 时间：2014-10-03T17:15:28.127

虽然可以为此目的使用 Range 标头，但我认为这不是目的。它似乎是为处理不稳定的连接以及限制数据而设计的（因此，如果缺少某些内容或大小太大而无法处理，客户端可以请求部分请求）。您正在将分页侵入可能在通信层用于其他目的的东西。处理分页的“正确”方法是使用您返回的类型。与其返回问题对象，不如返回一个新类型。  

所以如果问题是这样的：

`<questions>
  <question index=1></question>
  <question index=2></question>
  ...
</questions>`

新类型可能是这样的：

`<questionPage>
  <startIndex>50</startIndex>
  <returnedCount>10</returnedCount>
  <totalCount>1203</totalCount>
  <questions>
    <question index=50></question>
    <question index=51></question>
    ..
  </questions>
<questionPage>`

当然，您可以控制您的媒体类型，因此您可以使您的“页面”成为适合您需要的格式。如果你做的是通用的，你可以在客户端上有一个解析器来处理所有类型的相同分页。我认为这更符合 HTTP 规范的精神，而不是为了别的东西而捏造 Range 参数。

# localization - Installshield 2008 Premier Edition 中的升级问题

> ID：924476
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T05:10:39.020
> 
>         
> 
> 标签：localization, internationalization, upgrade, installshield, multilingual

我在将更高版本升级到更低版本时遇到问题。我已经实现了多语言支持；假设在升级时以法语安装的旧版本是英语，这是我的操作系统语言；事实上它应该用法语显示。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-06-01T01:37:41.217

您是否已将安装配置为提示输入用户语言，而不是检测操作系统区域设置？只需转到 Releases 视图，找到您的版本并确保“Languages Dialog”设置为 yes。

由于应用程序的安装语言与操作系统语言不同，因此您需要提示用户。据我所知，您无法在 InstallShield 早期检测到以前安装的语言。

# c++ - 头文件和库有什么区别？

> ID：924485
> 
>         
> 
> 赞同：80
> 
>         
> 
> 时间：2009-05-29T05:17:59.593
> 
>         
> 
> 标签：c++, c

我很难理解的一件事是编译器是如何工作的。我遇到了很多困难，但特别是我一直把标题和库搞混了。如果有人能把事情弄清楚一点，那就太好了。

* * *

## 回答 #1

> 赞同：129
> 
>             
> 
> 时间：2009-05-29T05:22:02.070

像这样考虑两者（免责声明：这是一个非常高级的类比；）..

*   标题是您可以**拨打**的电话号码，而...

*   ...**图书馆**是您可以到达那里的实际人！

这是“接口”和“实现”的根本区别；*接口*（标题）告诉您**如何**调用某些功能（不知道它是如何工作的），而实现*（*库）是实际功能。

注意：这个概念非常基础，因为它允许您灵活：您可以为不同的库拥有相同的标头（即功能以相同的方式调用），并且每个库可以以不同的方式*实现*功能。通过保持相同的界面，您可以在不更改代码的情况下替换*库*。

并且：您可以在不破坏调用代码的情况下更改库的实现！

* * *

## 回答 #2

> 赞同：59
> 
>             
> 
> 时间：2009-05-29T05:25:16.343

头**文件**通常*用于*定义应用程序中的一个接口或一组接口。将头文件视为显示程序的外部功能而忽略技术实现细节的东西。

例如，如果您正在优化程序，您很可能会修改源 (.cpp) 文件以改进算法，但头文件不会更改，因为外部客户端仍然使用相同的参数集调用方法，并且返回值。

在像 C++ 这样的面向对象语言中，头文件通常包括以下内容：

*   类描述和继承层次

*   类数据成员和类型

*   类方法

虽然没有什么可以阻止代码在头文件中实现，但这通常不受欢迎，因为它会在代码中引入额外的耦合和依赖关系。

在某些情况下（例如模板类），出于技术原因，*必须*在头文件中定义实现。

* * *

**库**是您希望提供给程序或程序组的代码集合。它包括一个特定*接口*或一组接口的实现*。*

 *代码在库中定义，以防止代码重复并鼓励重复使用。库可以是*静态链接*(.lib) 或*动态链接*(.dll)：

*   静态**链接**库定义了一组导出符号（可以将其视为方法定义），然后在构建过程的链接阶段将其链接到最终的可执行文件 (.exe)。它的优点是执行时间更快（因为不需要动态加载库），但代价是更大的二进制文件（因为这些方法本质上是在可执行文件中复制的）。

*   **动态链接**库是在程序执行期间链接的，而不是程序的链接。当多个程序需要重复使用相同的方法时，它很有用，并且在 COM 等技术中广泛使用。

* * *

## 回答 #3

> 赞同：11
> 
>             
> 
> 时间：2009-05-29T06:16:45.930

可能让您感到困惑的一件事是，单词*库*在 C++ 中可以有多种含义。这里已经很好地讨论了一个含义：

二进制文件中的一组可链接函数。这些可以静态链接或动态链接。

但是还有另一种类型的库：所谓的仅头文件库（包括 STL、TR1 和 Boost 的部分内容）。这些不以单独的二进制形式存在，因此单词*库*不引用特定的二进制文件，而是引用一组包含的头文件。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：9
> 
>             
> 
> 时间：2009-05-29T05:23:55.737

标头仅包含声明，而库还包含实现。

* * *

## 回答 #5

> 赞同：8
> 
>             
> 
> 时间：2009-05-29T05:23:48.980

库是代码，编译成一组目标文件。目标文件包含编译的机器代码和代码使用的数据声明。

头文件定义了库的*接口*：它告诉您如何正确使用库。在 C/C++ 中，头文件为您提供函数名称列表以及如何调用这些函数：它们采用的参数的数量和类型、返回类型、调用约定等。头文件中还有很多其他内容它们也一样，但归根结底，它归结为一组调用库代码的规则。

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2013-03-04T13:35:47.367

如果编程语言中的库是一个通用库，那么库中存在的许多书籍可以与语言中的函数/方法进行比较。并且还可以将头文件与书的行号进行比较假设在海得拉巴的某个图书馆中有一本书，并且在该图书馆中，该书出现在第 24 行中...与给出图书馆地址的方式相同通过使用命名空间std（用于标准库）和行No由头文件给出，其中放置了同时的所有书籍（本例中的方法）（与输入/输出流相关的所有方法）

* * *

## 回答 #7

> 赞同：2
> 
>             
> 
> 时间：2019-02-21T05:37:00.110

标头通常用于包含原型。标头在预处理时扩展，以便在编译时，代码可以访问相关的函数声明/原型。

库是包含函数原型定义的实际软件（出现在标题中）。链接时使用库。定义（存在于库中）在链接时解析。

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T13:31:28.217

头文件描述*如何调用功能*，库包含实现此功能的编译代码。

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2014-01-17T12:34:18.680

HEADER FILE 是编写函数声明的文件。通过使用头文件，我们可以访问特定的函数

尽管

LIBRARY FILE 是写入特定函数定义的文件。MATH.H 是一个头文件，而 MATH.LIB 是库文件。

* * *

## 回答 #10

> 赞同：1
> 
>             
> 
> 时间：2014-01-28T09:50:56.833

**HEADER File 和 LIBRARY 在程序中的工作。**

头**文件**包含到**库**的链接（库包含标准函数和方法），编译器通过预处理器识别源代码中使用的标准函数，解析所有指令（指令是程序中以 # 符号开头的行，包括) 在程序实际编译之前。

**谢谢阅读！**

* * *

## 回答 #11

> 赞同：1
> 
>             
> 
> 时间：2014-12-30T15:03:17.217

我认为库是一个重复使用多次的代码包，并且该代码是预编译的，因此它以标准形式提供，因此我们不必为我们开发的每个程序编写该代码。头文件以简单的方式包含对该代码的引用，我们在程序中使用的“cin”和“cout”等函数在标准库中完全定义，而像iostream头文件这样的头文件包含对该代码的引用。因此，当我们编译我们的代码时，我们只是得到了 cin 和 cout 的预编译，而我们不必每次使用 cin 和 cout 时都编写代码。或者以更简单的方式，我们可以说一个库包含所有函数的代码，而头文件是访问该代码的方式。

* * *

## 回答 #12

> 赞同：1
> 
>             
> 
> 时间：2016-08-25T01:30:12.390

库是偶尔使用的类似对象的集合。它通常包含对象或源代码形式的程序、模板等。

头文件是库的位置（接口）

* * *

## 回答 #13

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T06:42:31.117

套用一个经典笑话，区别在于库有一个头文件，而头文件没有库。

* * *

## 回答 #14

> 赞同：0
> 
>             
> 
> 时间：2017-03-03T10:04:40.233

图书馆就像死去的木乃伊，被白色的长线包裹着。他们死了。释放它们的唯一方法是通过头文件。头文件包含使它们栩栩如生的方法，并且可以多次使它们栩栩如生（代码重用）。

* * *

## 回答 #15

> 赞同：0
> 
>             
> 
> 时间：2018-06-17T07:00:32.753

你可以考虑这个例子来理解 -`Math.h`是一个头文件，其中包括函数调用的原型，如`sqrt()`等`pow()`，而`libm.lib`,`libmmd.lib`是`libmmd.dll`一些数学库。简单来说，头文件就像一张名片，图书馆就像一个真实的人，所以我们使用名片（头文件）来访问真实的人（图书馆）。

* * *

## 回答 #16

> 赞同：-4
> 
>             
> 
> 时间：2017-06-18T15:27:46.197

来自库的代码只会根据头文件的需要存储。整个头文件将被存储，这样可以节省处理器存储区域。

# oracle - 如何在 Oracle 包中执行私有过程？

> ID：924490
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-05-29T05:20:09.343
> 
>         
> 
> 标签：oracle, plsql

这是我第一次尝试创建一个包，所以我一定遗漏了一些非常明显的东西（我用谷歌搜索的东西似乎都认为值得一提）。

显然，如果您的包主体中有未包含在规范部分中的过程，那么这些过程是私有的。我遇到的问题是，一旦我制作了这些私有包，我似乎无法弄清楚如何**引用它们。**并且 SQL Developer 拒绝给我任何比“执行完成并发出警告”更有用的消息，这无济于事......

例如，这是我一直在尝试但不起作用的方法（只是抛出上述编译器错误）：

```
CREATE OR REPLACE PACKAGE BODY testPackage AS

PROCEDURE privateProc; --Forward declaration

PROCEDURE publicProc IS
BEGIN
    EXECUTE privateProc();
END;

PROCEDURE privateProc IS
BEGIN
    DBMS_OUTPUT.PUT_LINE('test');
END;

END testPackage; 
```

我也尝试将其称为`testPackage.privateProc`，这也没有奏效。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
>             
> 
> 时间：2009-05-29T05:52:19.093

我认为你应该这样做：

```
CREATE OR REPLACE PACKAGE BODY testPackage AS
PROCEDURE privateProc; --Forward declaration

PROCEDURE publicProc IS
  BEGIN    
    privateProc();
END;

PROCEDURE privateProc IS
BEGIN    
  DBMS_OUTPUT.PUT_LINE('test');
END;
END testPackage; 
```

只需调用 privateProc 就好像它是语言的一部分。Execute 用于在 PL/SQL 中运行 DML 或 SQL。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-06-03T02:27:31.283

```
CREATE OR REPLACE PACKAGE BODY testPackage AS

PROCEDURE publicProc; --Forward declaration

PROCEDURE publicProc IS
BEGIN
privateProc; --exec privateProc;
END;

PROCEDURE privateProc IS
BEGIN
DBMS_OUTPUT.PUT_LINE('test');
END;

END testPackage;

//call testPackage.publicProc 
```

# mysql - 选择其中一列的值不同的 3 个最新记录

> ID：924494
> 
>         
> 
> 赞同：45
> 
>         
> 
> 时间：2009-05-29T05:20:58.140
> 
>         
> 
> 标签：mysql, group-by, sql-order-by

我有下表：

```
 id       time      text      otheridentifier
    -------------------------------------------
    1        6         apple     4
    2        7         orange    4
    3        8         banana    3
    4        9         pear      3
    5        10        grape     2 
```

我想要做的是选择 3 个最近的记录（按时间降序），它们的`otheridentifier`s 是不同的。所以在这种情况下，结果将是`id`'s: 5、4 和 2。

`id`= 3 将被跳过，因为有相同`otheridentifier`字段的更新记录。

这是我试图做的：

```
SELECT * FROM `table` GROUP BY (`otheridentifier`) ORDER BY `time` DESC LIMIT 3 
```

但是，我最终得到了`id`= 5, **3**和**1**的行，而不是预期的 5, 4, 2 。

有人能告诉我为什么这个查询不会返回我所期望的吗？我尝试将 ORDER BY 更改为 ASC，但这只是将返回的行重新排列为 1、3、5。

* * *

## 回答 #1

> 赞同：34
> 
>             
> 
> 时间：2009-05-29T05:24:09.170

它不会返回您期望的结果，因为分组发生在排序之前，正如 SQL 语句中子句的位置所反映的那样。不幸的是，你将不得不变得更漂亮才能获得你想要的行。试试这个：

```
SELECT *
FROM `table`
WHERE `id` = (
    SELECT `id`
    FROM `table` as `alt`
    WHERE `alt`.`otheridentifier` = `table`.`otheridentifier`
    ORDER BY `time` DESC
    LIMIT 1
)
ORDER BY `time` DESC
LIMIT 3 
```

* * *

## 回答 #2

> 赞同：18
> 
>             
> 
> 时间：2009-05-29T05:31:43.987

您可以自行加入表格以过滤最后一个条目`otheridentifier`，然后取其中的前 3 行：

```
SELECT last.*
FROM `table` last
LEFT JOIN `table` prev 
    ON prev.`otheridentifier` = last.`otheridentifier`
    AND prev.`time` < last.`time`
WHERE prev.`id` is null
ORDER BY last.`time` DESC 
LIMIT 3 
```

* * *

## 回答 #3

> 赞同：4
> 
>             
> 
> 时间：2013-04-30T15:14:05.417

我有类似的要求，但我有更高级的选择标准。使用其他一些答案我无法完全得到我需要的东西，但我发现你仍然可以像这样做一个 GROUP BY 和 ORDER BY ：

```
SELECT t.* FROM (SELECT * FROM table ORDER BY time DESC) t 
GROUP BY t.otheridentifier 
```

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T05:31:27.963

```
SELECT * FROM table t1 
WHERE t1.time = 
    (SELECT MAX(time) FROM table t2 
     WHERE t2.otheridentifier = t1.otheridentifier) 
```

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T05:43:33.257

[Andomar 的答案](https://stackoverflow.com/questions/924494/mysql-group-by-ordering/924520#924520)可能是最好的，因为它不使用子查询。

另一种方法：  

```
select *
from   `table` t1
where  t1.`time` in (
                    select   max(s2.`time`)
                    from     `table` t2
                    group by t2.otheridentifier
                    ) 
```

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2014-01-08T06:23:45.320

您可以使用此查询获得正确答案：

```
SELECT * FROM 
      (SELECT * FROM `table` order by time DESC)
          t group by otheridentifier 
```

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2012-02-29T06:19:02.700

关于什么

```
SELECT *, max(time) FROM `table`  group by otheridentifier 
```

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2016-06-15T06:41:20.913

这也是：

```
SELECT * FROM
OrigTable T INNER JOIN 
( 
SELECT otheridentifier,max(time) AS duration
FROM T
GROUP BY otheridentifier) S
ON S.duration = T.time AND S.otheridentifier = T.otheridentifier. 
```

# .net - 应用退出后保留环境变量

> ID：924496
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-05-29T05:22:16.470
> 
>         
> 
> 标签：.net, environment-variables

是否可以在进程退出后可用的控制台应用程序中保留环境变量。

我想要一个控制台应用程序来设置一个字符串，该字符串可用于执行它的批处理文件。

控制台应用程序位于 dotnet 中。

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-05-29T05:32:01.257

您可以使用[Environment.SetEnvironmentVariable](http://msdn.microsoft.com/en-us/library/system.environment.setenvironmentvariable.aspx)：

```
Environment.SetEnvironmentVariable("SomeVariable", "Some value", EnvironmentVariableTarget.User); 
```

最后一个参数将确定变量的范围和生命周期（进程、用户或机器）。如果要为机器设置变量，则需要以管理员身份运行。

**编辑：**我确实注意到，如果使用上述代码执行控制台应用程序，则环境变量在您打开一个新的命令窗口之前不可用（因此，如果从批处理文件执行控制台应用程序，该变量将不可用批处理文件，除非有技巧让它刷新它看到的一组环境变量）。

**编辑2：**好的，我正在研究这个，似乎没有明显的方法让批处理文件获得一组刷新的环境变量。我发现的一种解决方法是让 .net 代码编写一个批处理文件来设置变量，而不是自己设置它们。然后调用批处理脚本可以运行创建的批处理文件来设置环境：

.Net 控制台应用程序：

```
static void Main(string[] args)
{
    string outputFile = @"c:\temp\setvars.bat";
    string variable = "set SomeVariable=Some value";
    File.WriteAllText(outputFile, variable);
} 
```

BAT 文件：

```
call myconsoleapp.exe
call c:\temp\setvars.bat
echo %SomeVariable% 
```

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2010-01-27T19:35:45.163

这与小福的类似，不同之处在于您可能希望完全跳过文本文件并让您的程序将数据写入控制台。在程序名称周围打勾，让批处理文件执行它并使用输出，如下所示：

```
for /f "tokens=1,2 delims=," %%a in ('MyProgram.exe') do (
    set %%a=%%b
    set %%a=%%b
) 
```

如果要输出应忽略的其他文本行，则可以在 for 循环内添加过滤器。

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T05:33:56.340

由于您希望批处理文件能够读取它，因此您可能仅限于使用传统的环境变量。

尝试将[Environment.SetEnvironmentVariable](http://msdn.microsoft.com/en-us/library/z46c489x.aspx)与用户或机器的[EnvironmentVariableTarget一起使用。](http://msdn.microsoft.com/en-us/library/system.environmentvariabletarget.aspx)然后，您应该能够使用 %my_var% 之类的内容从批处理文件中获取它。

```
Environment.SetEnvironmentVariable("my_var", "data", EnvironmentVariableTarget.User); 
```

**编辑：** Fredrik 用类似的解决方案击败了我，我同意这是环境变量的已知行为。我打算让你的 C# 应用程序将你想要返回的字符串写入一个文本文件，然后在你的批处理文件中解析它。例如：

```
for /f "tokens=1,2 delims=," %%a in (data.txt) do (
if %%a==env1 echo %%b
if %%a==env2 echo %%b
) 
```

... data.txt 可能如下所示：

```
env1,hello
env2,there 
```

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T05:32:42.813

是的，设置系统环境变量而不是进程环境变量。（我认为从技术上讲，用户环境变量也会持续存在，但仅适用于该用户的上下文）。

使用 system.environment 类获取 SetEnvironmentVariable 方法。

# java - 如何为我的团队重新打包 Eclipse

> ID：924497
> 
>         
> 
> 赞同：7
> 
>         
> 
> 时间：2009-05-29T05:22:36.033
> 
>         
> 
> 标签：java, eclipse, ide

我想用一堆插件和数据库连接配置等设置 eclipse，然后重新压缩它，这样我的队友和新手都可以轻松地在同一个平台上工作。

似乎安装插件很好，但是当我添加自定义 jars（例如 ivy2、ojdbc 等）时，它们都保存在其他机器上可能不存在的完整绝对路径（特别是如果它们解压缩到我的不同位置） .

无论如何，我希望这个想法不是愚蠢的，并且如果这种过程记录在某处或者如果有人有任何提示，那么我正在工作。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T13:49:30.177

我建议不要要求所有开发人员将 eclipse 放在同一位置。有时，一些开发人员可能想尝试使用 eclipse 的替代版本来探索需要一组不同插件或不同 eclipse 基础版本的技术。

让开发人员在他们想要的地方安装 eclipse。

但是，对于您需要运行插件的 jars（您需要为正确使用插件而配置的外部依赖项）：

*为这些 jar*连接一个目录（而不是整个 eclipse 目录），例如 c:\eclipse-helpers 或其他东西。

* * *

要处理第三方库依赖项（在您正在开发的代码中），您有几个不错的选择：

1.  创建项目以保存第三方库并将它们签入您的源代码版本控制系统（您*正在*使用，对吗？）。然后，您可以将库添加到项目的构建路径中 - 确保在构建路径页面的“订购和导出”选项卡中将它们标记为导出。然后，您可以简单地将这些第三方项目添加为项目依赖项。

2.  将第三方 jars添加到项目的构建路径时，将它们作为 CLASSPATH*变量引用。*这允许其他开发人员将依赖项存储在不同的位置。也许定义一个名为 THIRD_PARTY_JARS 的 CLASSPATH 变量（在 Eclipse 的 Window->Preferences->Java->Build Path->Classpath Variables 中）；每个开发人员都可以将其映射到他们想要保存其部门的不同路径。

3.  将第三方 jars 引用为“用户库”（Window->Preferences->Java->Build Path->User library）。这类似于类路径变量，但充当一组显式的 jar。

4.  将第三方 jar 直接包含在您的项目中。仅当您需要单个位置的部门时才使用此选项。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T05:39:26.647

虽然不完全符合问题的方向，但您可以使用[Yoxos OnDemand](http://eclipsesource.com/en/yoxos/yoxos-ondemand/)。它允许您“滚动自己的”Eclipse 发行版并将其下载为 zip。他们添加了自己的视角，您可以在其中添加更多插件（直接从他们的仓库中），或更新您拥有的插件。  

虽然我从未使用过该功能，但您可以制作自己的堆栈并为其命名，以便任何人稍后访问该站点并下载它（使用最新版本的插件）。此外，如果需要，插件的依赖关系会自动解决。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T06:40:36.253

在 Eclipse 中 - 在许多地方，也可以使用工作空间相对路径或系统环境信息来引用外部文件。另一种选择可能是将您的 jar 放入工作区项目中，以便每个团队成员都可以从 cvs/subversion/whatever 中检查它并开始工作。像这样工作可以确保服务器构建或桌面的可重现环境，即使在多年后也是如此。

谈论 Yoxos ......它也提供“工作空间供应”。这意味着您可以将 Eclipse Preferences、checkstyle 配置和 Mylyn 设置附加到您的 IDE 所需工具/插件列表到您的 yoxos 配置文件中。这意味着您的团队可以共享个人资料，并且可以开始使用相同的设置，而不管他们的操作系统或其他什么。（也可以一次使用多个配置文件。）

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T05:33:57.993

我们对我们的开发环境做了类似的事情（它需要 Eclipse 和我们自己的插件，在早期阶段，它必须在已知位置运行）。

我们只是把它放进去，`c:\eclipse_<projName>`并把它作为团队的要求。这可能是您最简单的解决方案。

这是您的团队，您可以将此作为要求。除非你的团队成员是绝对的白痴，否则他们会和你一起工作。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T05:45:49.087

我发现 Yoxos 非常好，它在确定依赖关系方面做得很好。它确实是一个很好的工具，值得一看。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-06-05T15:43:23.233

我刚开始使用 git 来管理我的 eclipse 安装。我[写](http://coders-log.blogspot.com/2009/06/manage-your-eclipse-install-with-local.html)了一篇文章。该方法可能对您有用，并且可能值得一看。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-06-05T15:50:55.687

如果开发人员在他们的机器上都没有相同的路径，那么您可以创建 Eclipse 所谓的“库”并在其中包含一堆 jar，而不是添加独立的 JAR 文件。然后另一个开发人员只需要更改库的位置，它就会拿起那里的所有罐子。

# c# - 在 C# 中创建极简主义数组

> ID：924502
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T05:24:25.987
> 
>         
> 
> 标签：c#, arrays

我一直希望能够使用下面的行，但 C# 编译器不会让我这样做。对我来说，我想要什么似乎是显而易见且毫不含糊的。

```
myString.Trim({'[', ']'}); 
```

我可以使用以下方法实现我的目标：

```
myString.Trim(new char[]{'[', ']'}); 
```

所以我不会想知道有没有其他方法可以更接近第一种方法？

* * *

## 回答 #1

> 赞同：8
> 
>             
> 
> 时间：2009-05-29T05:30:38.260

该`string.Trim(...)`方法实际上需要一个`params`参数，所以，为什么不直接调用：

```
myString.Trim('[', ']'); 
```

* * *

## 回答 #2

> 赞同：6
> 
>             
> 
> 时间：2009-05-29T06:05:40.467

其他人专注于具体示例（并且使用参数数组这一事实是可行的方法），但您可能对 C# 3 的隐式类型感兴趣。你*可以*写：

```
myString.Trim(new[] {'[', ']'}); 
```

不像你之前*那么*紧凑，因为你仍然需要表达“我想创建一个数组”的概念，除非你正在编写一个变量初始化器，但是数组的类型是从内容中推断出来的。

最大的用例是匿名类型：

```
var skeets = new[] {
   new { Name="Jon", Age=32 },
   new { Name="Holly", Age=33 },
   new { Name="Tom", Age=5 },
   new { Name="Robin", Age=3 },
   new { Name="William", Age=3 }
}; 
```

在这里你*不能*写类型的名字，因为它没有名字（这在 C# 中是可以表达的）。

关于您的特定示例的另一点 - 如果您要经常使用它（即经常调用该`Trim`方法），您可能希望避免每次都创建一个新数组：

```
private static readonly char[] SquareBrackets = {'[', ']'};

public void Whatever() {
    ...
    foo = myString.Trim(SquareBrackets);
    ...
} 
```

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T05:30:43.940

这也将起作用...

```
myString.Trim( '[',']' ); 
```

请注意 Trim 定义中的[params](http://msdn.microsoft.com/en-us/library/w5zay9db(VS.71).aspx)声明，它让您可以传递任意数量的参数并将它们作为一个数组。

* * *

## 回答 #4

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T05:33:45.153

你也可以试试这个：

```
myString.Trim("[]".ToCharArray()); 
```

# .net - 如何编写一个自注册的activex控件（在C#中）？

> ID：924504
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-05-29T05:25:42.147
> 
>         
> 
> 标签：.net, com, activex

我已经能够创建一个小的 activex 控件，但它需要在客户端上注册 dll（使用 regasm）。

我怎样才能避免这个注册问题？

我正在尝试编写一个通过网络（到 IE 浏览器）传递的 activex 控件，该控件将访问客户端网络摄像头（使用 directshow）。

这是我的简单控制：

```
 using System;
  using System.Runtime.InteropServices;
  namespace HelloNS
  {
      public interface IHello
      {
        string Message();
      }

      [ClassInterface(ClassInterfaceType.AutoDual)]
      public class Hello : IHello          {
        public string Message()
        {
            return "hello";
        }
      }
   } 
```

这是我的观众：

```
<html>
<head>
  <script language="javascript">
    var x = new ActiveXObject("HelloNS.Hello");
    alert(x.Message());
  </script>
</head>
<body>
</body>
</html> 
```

我目前正在 msdn 上阅读此内容：http: [//msdn.microsoft.com/en-us/library/aa751970 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa751970(VS.85).aspx)

如果我弄清楚了，我会发布结果。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T06:24:14.797

COM 对象在按名称创建时，由存储在 Windows 注册表中的注册信息实例化。即使您的控件是在 .NET 中创建的，它也使用 COM Interop 与浏览器一起工作。如果不先在用户的机器上注册它，就无法按名称创建它。

您可能可以使用某种 ClickOnce 类型的交付系统，使客户端上的安装变得简单 - 但在所有情况下都必须注册。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T08:18:41.280

VS2010 和 .NET 4.0 引入的动态语言运行时 (DLR) 和互操作改进应该让这变得容易得多。无需 COM 互操作，无需注册等。  [这里是 Anders Hejlsberg 描述它的工作原理](http://channel9.msdn.com/pdc2008/TL16/)。

你在 .NET 4.0 上试过吗？测试版可用。

我不确定从浏览器访问网络摄像头的安全隐患。但是从 Javascript 到 C# 应该很容易。

# sql - 是否可以使用 SAS（PROC SQL）进行不区分大小写的 DISTINCT？

> ID：924513
> 
>         
> 
> 赞同：8
> 
>         
> 
> 时间：2009-05-29T05:31:09.850
> 
>         
> 
> 标签：sql, sas, proc-sql

有没有办法从此 SAS SQL 查询中获取不区分大小写的不同行？...

```
SELECT DISTINCT country FROM companies; 
```

理想的解决方案将由单个查询组成。

结果现在看起来像：

```
Australia
australia
AUSTRALIA
Hong Kong
HONG KONG 
```

...真正需要两个不同行中的任何一个

可以将数据大写，但这会以不符合此查询目的的方式不必要地更改值。

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-05-29T05:40:31.183

如果您有一些主 int 键（我们称之为 ID），您可以使用：

```
SELECT country FROM companies
WHERE id =
(
    SELECT Min(id) FROM companies
    GROUP BY Upper(country)
) 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T05:39:20.313

规范化大小写似乎是可取的——如果 'Australia'、'australia' 和 'AUSTRALIA' 都出现，那么您希望这三个中的哪一个作为您查询的“区分大小写的唯一”答案，毕竟？如果您热衷于某些特定的启发式方法（例如，计算它们出现的次数并选择最流行的），这当然可以完成，但可能需要大量的额外工作——所以，这样的挑剔对您来说值多少钱?

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T07:17:27.490

一个非 SQL 方法（实际上只有一个步骤，因为数据步骤只是创建一个视图）将是：

```
 data companies_v /view=companies_v;
  set companies (keep=country);
  _upcase_country = upcase(country);
run;

proc sort data=companies_v out=companies_distinct_countries (drop=_upcase_country) nodupkey noequals;
  by _upcase_country;
run; 
```

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T18:22:54.507

也许我错过了一些东西，但为什么不只是：

```
data testZ;
    input Name $;
    cards4;
Bob
Zach
Tim
Eric
Frank
ZacH
BoB
eric
;;;;
run;

proc sql;
    create view distinctNames as
    select distinct Upper(Name) from testz;
quit; 
```

这将创建一个仅具有不同名称作为行值的视图。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T23:23:36.553

我的想法与**Zach**相同，但我想我会用一个更详细的例子来看待这个问题，

```
proc sql;
    CREATE TABLE contacts (
        line1 CHAR(30), line2 CHAR(30), pcode CHAR(4)
    );
    * Different versions of the same address - L23 Bass Plaza 2199;
    INSERT INTO contacts values('LEVEL 23 bass', 'plaza'  '2199');
    INSERT INTO contacts values('level 23 bass ', ' PLAZA'  '2199');

    INSERT INTO contacts values('Level 23', 'bass plaza'  '2199');
    INSERT INTO contacts values('level 23', 'BASS plaza'  '2199');

    *full address in line 1;
    INSERT INTO contacts values('Level 23 bass plaza', ''  '2199');
    INSERT INTO contacts values(' Level 23 BASS plaza  ', ''  '2199');

;quit; 
```

现在我们可以输出

i。每个类别一个？即三个地址？
 **或**

ii。还是只有一个地址？如果是这样，我们应该更喜欢哪个版本？

实现案例 1 可以很简单：

```
proc sql;
    SELECT DISTINCT UPCASE(trim(line1)), UPCASE(trim(line2)), pcode 
    FROM contacts 
;quit; 
```

实现案例 2 可以很简单：

```
proc sql;
    SELECT DISTINCT UPCASE( trim(line1) || ' ' || trim(line2) ) , pcode 
    FROM contacts 
;quit; 
```

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2013-10-04T20:49:19.727

从 SAS 9：

proc sort data=input_ds sortseq=linguistic(strengh=primary);

```
 by sort_vars; 
```

跑;

* * *

## 回答 #7

> 赞同：-2
> 
>             
> 
> 时间：2009-05-29T08:11:30.860

我认为正则表达式可以帮助您解决您想要在搜索字符串中使用的模式。

对于正则表达式，您可以定义一个 UDF，可以通过查看教程来准备。www.sqlteam.com/article/regular-expressions-in-t-sql

谢谢。

# asp.net-mvc - 授权属性不保留帖子数据

> ID：924514
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-05-29T05:31:20.337
> 
>         
> 
> 标签：asp.net-mvc, post, attributes, authorize

为了在使用控制器方法上的 [Authorize] 属性后保留发布数据，然后将用户重定向到登录页面，然后在成功验证后将用户重定向到他们打算去的地方——这将如何完成? 默认情况下不中继原始表单提交。对之前帖子的回复说：

*您需要将表单值和 RedirectUrl 序列化到隐藏字段。身份验证后，反序列化隐藏字段中的数据并根据 RedirectUrl 的值进行重定向。您将需要一个自定义 Authorize 类来处理此问题。*

我的问题是——有什么例子可以进一步指出我正确的方向吗？是的，我可以将 [Serialize] 标记添加到控制器类，但我不知道创建自定义 Authorize 类有什么帮助？我在网上看到很多关于创建自定义 Authorize 类的材料，但是反序列化在哪里进行呢？如果你能更深一层或两层，那将有很大帮助。我是新手。

（我会评论之前的帖子，但我是该网站的新手，没有积累足够的积分。我也会放一个指向其他帖子的链接，但它说新用户也不能显示链接！）

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T06:27:14.433

您可以创建一个自定义授权属性，将表单发布的值存储在 Session 字典中，然后在授权完成后，您可以从 Session 字典中重新设置值。

这是一个例子：  

```
public class CustomAuth:AuthorizeAttribute
{
    public override void OnAuthorization(AuthorizationContext filterContext)
    {
      var form = filterContext.HttpContext.Request.Form;
      if (form.HasKeys()) {
       foreach(var key in form.AllKeys)
       {
         filterContext.HttpContext.Session[key]= form[key];
       }
      }
      base.OnAuthorization(filterContext);
    }
} 
```

如您所见，在授权之前，所有表单值都存储在会话中。

现在授权完成后，您可以恢复所有值。  

```
[CustomAuth()]
public ActionResult Admin()
{
   // supposing you had a from input with the name "Name"
   string Name = Session["Name"] ?? string.Empty;

   return View();
} 
```

# user-interface - CAknView 容器内的 CAknSlider 控件（不作为设置项）

> ID：924517
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-29T05:31:26.170
> 
>         
> 
> 标签：user-interface, symbian, implementation

我对原生 Symbian 组件的实现程度感到惊讶。其中之一是 CAknSlider。CAknSlider 是一个控件，它有一个滑块，用户可以使用它沿着一个方向可以是垂直或水平的条形滑动它。

现在，当您滑动滑块时，滑动非常顺畅，不会闪烁。但是如果由于某种原因我要实现一个自定义滑块控件，我就不会像 CAknSlider 那样整洁。

所以我的问题是如何弄清楚 CAknSlider 是如何在幕后实现的。我想为我的收音机应用程序实现一个自定义滑块来控制音频流的音量。

知道我应该怎么做。

* * *

[编辑：回应laalto的评论]

CAknSlider 控件通常作为[设置屏幕中的设置项来](http://www.forum.nokia.com/info/sw.nokia.com/id/3eeab5af-ce57-4c25-bac0-d71d620bf6ad/S60_Platform_Settings_Screen_Example.html)实现。

我从未见过它在复合控件容器（如 CCoeControl 或 CAknView ）中实现为组件控件。这是我到目前为止所尝试的：

首先，我创建了一个描述滑块控件的资源文件，如下所示：

```
RESOURCE SLIDER r_volume_slider
{
 layout=EAknCtSlider;
 minvalue=0;
 maxvalue=10;
 step=1;
 valuetype=EAknSliderValuePercentage;
 minlabel="mute";
 maxlabel="full";
} 
```

然后我使用源文件中的资源文件来创建滑块，如下所示：

```
void CVolumePopupAppView::ConstructL(const TRect& aRect)
{
// Create a window for this application view
CreateWindowL();

InitComponentArrayL( );
iSlider = new ( ELeave ) CAknSlider( );
TResourceReader reader;
iEikonEnv->CreateResourceReaderLC( reader, R_VOLUME_SLIDER );

iSlider->ConstructFromResourceL( reader );
CleanupStack::PopAndDestroy ( );
iSlider->SetContainerWindowL( *this );
iSlider->SetParent( this );

Components().AppendLC( iSlider );

CleanupStack::Pop ( iSlider );

// Set the windows size
SetRect(aRect);

// Activate the window, which makes it ready to be drawn
ActivateL();
} 
```

现在这里是作为设置项的 CAknSlider ( [Screenshot1](http://picasaweb.google.com/ardsrk/Misc#) ) 和通过上述技术创建的 CAknSlider ( [Screenshot2](http://picasaweb.google.com/ardsrk/Misc#) ) 之间的比较。请注意，我创建的那个没有百分比值指示符以及最小和最大文本标签，即使我在资源中指定了它们。外观和感觉也很可悲。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T07:19:28.467

有很多技术可以避免闪烁，从双缓冲整个屏幕到更简单的优化，比如只重新绘制控件中实际发生变化的部分。预先绘制适当的矩形以覆盖滑块所在的位置及其下一步可能是有效执行此操作的最简单方法。

要确切了解 CAknSlider 是如何做到的，您可以：1) 等待 Symbian Foundation 平台中的相关软件包开源 (EPL) - 应该在未来 12 个月内的某个时间，或 2) 加入 Symbian Foundation 并获得立即访问源代码

编辑：（应要求提供有关图形优化的更多详细信息）

最常见的闪烁是由重绘整个控件引起的。我已经（通过移植项目）实现了一些不会在此处闪烁的自定义控件：[http://developer.symbian.com/main/documentation/porting/#linux2](http://developer.symbian.com/main/documentation/porting/#linux2)
甚至还有一些有点像滑块的东西。这个例子远非理想，它没有预先绘制的矩形，但图形是非常简单的线条和填充的矩形。不过，仅覆盖更改部分的概念是相同的。对预先绘制的部分进行 blit。将滑块的背景绘制到屏幕外位图上，并对滑块的可移动部分执行相同操作。当滑块移动时，通过从屏幕外背景（仅需要擦除的部分）执行 BitBlt() 擦除可移动部分，然后将可移动部分 BitBlt() 移动到新位置。

那有意义吗？

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-06-01T20:43:09.653

你需要CAknSlider吗？偷它！:) CAknSliderSettingPage 为我们做一切。我们，就用那个。

```
iSettingPage = new(ELeave) CAknSliderSettingPage(R_SLIDER_PAGE, iValue);
iSettingPage->ConstructL();

iSettingPage->SetSize(iSettingPage->MinimumSize());

TInt CCustomColorPalette::CountComponentControls() const
{
    return 1;
}

CCoeControl* CCustomColorPalette::ComponentControl( TInt aIndex ) const
{
   return iSettingPage->SliderControl();
} 
```

# ado.net - 以最通用的方式进行转换的关系表副本（声明性规则等......） - Microsoft sandpit

> ID：924523
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T05:32:46.277
> 
>         
> 
> 标签：ado.net, ssis

我想，这是很常见的任务。假设在 Visual Foxpro 中有一个表 A，需要在 SQL Server 2008 中转换为表 B。操作将是重复的。列名可能会更改，某些输入列会被删除，列类型可能会更改（字符串 <=> int），一些输出列可能会生成（GUID、身份）。在输入表导致 2 与数据透视表连接的情况下，也可能发生标准化 - 为简单起见，让我们放弃这种情况     

我知道 SSIS 的存在，可能有可以做我描述的脚本？

我已经编写了 C# 程序，它读取 XML（下面的片段）并进行映射和生成密钥，但只是想是否所有这些 - 另一个轮子改造。

```
 <Tables>
    <Table inTbl="A" outTbl="B">
      <Keys>
        <Key name="it_pk" type="GUID">
      </Keys>
      <Mappings>
        <Column inCol="hxkey" outCol="it_tariff"  />
        <Column inCol="txt" outCol="it_description" />
        <Column inCol="uq1" outCol="it_uq1" />
        <Column inCol="date1" outCol="it_startdate" />
        <Column inCol="date2" outCol="it_stopdate" />
      </Mappings>
    </Table>
  </Tables> 
```

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T23:11:59.337

这几乎正​​是 SSIS 的设计目的，但它不像您当前的系统那样“通用”，但设置您所描述的内容非常容易。

你有一个控制流和一个数据流。您的控制流可以包含许多数据流（例如，同步表 A，然后是 B，然后是 C）和其他任务（例如，移动文件、迭代、自定义脚本）。

在您的数据流中，您可以定义源、目标和转换。您的来源几乎可以是任何东西。然后，您可以执行派生列并更改数据类型转换以执行您所描述的操作。然后您的目的地获取转换后的数据（例如 SQL 表、SQL 插入语句、SQL 更新语句）

这是使用 Visual Studio 完成的，我认为您可以在 5 分钟内敲出一个简单的包来同步两个表。然后，您可以使用 SQL 代理对其进行调度。

如果您想评估其他选项，这称为 ETL btw（提取、转换、加载），但我认为 SSIS 非常适合。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-06-06T12:43:14.687

除了上述出色的答案之外，即使 Visual Studio 包设计器工具不合适，SSIS 也是在该领域实现编程解决方案的一个很好的平台。

实际上，该平台比基于它构建的 Visual Studio 工具更灵活且完成得更好。

# optimization - 在 OpenGL 中绘制位掩码图像的最快方法

> ID：924524
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T05:32:53.813
> 
>         
> 
> 标签：optimization, opengl

使用现代硬件，使用“位掩码”绘制图像的最快方法是什么，即指定是否绘制给定像素的掩码（例如，可以从“魔术粉”像素中提取）使用OpenGL？

我应该只使用 alpha 混合并将不可见像素设置为 a=0 吗？我应该使用旧的“AND 黑白蒙版然后 OR 图像 on black bg”技术吗？我应该使用 alpha 通过测试吗？我应该使用着色器吗？

这很重要，因为我正计划绘制大量此类图像 - 尽我所能。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T05:51:18.940

如果遮罩和纹理总是相同的（例如用于喷溅），您可能应该使用预乘颜色值的混合。这通常只是将纹理与背景相加（无需按像素相乘）。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-31T03:12:12.343

你绝对应该使用 alpha pass 测试——默认情况下它设置为 >0.08，所以如果你将像素设置为 0.0 alpha，你会自动得到这个。

# java-me - 如何在带有断点的 netbeans 中调试 j2me 应用程序？

> ID：924525
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T05:32:56.513
> 
>         
> 
> 标签：java-me

我无法使用断点检查我的 j2me 应用程序的执行流程。我正在使用Netbeans IDE。谷歌搜索我知道设置断点后，我需要运行应用程序，然后当AMS到达断点时，如果我继续按F6，我会知道执行流程.但这似乎对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T09:52:47.473

如果 IDE 没有执行您想要的操作，可以尝试在断点之前添加此代码：

```
try
{
     throw new RuntimeException();
} 
catch(RuntimeException rex)
{
     rex.printStackTrace();
} 
```

# python - 在 Django 中捕获隐含的感兴趣信号

> ID：924530
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T05:34:24.140
> 
>         
> 
> 标签：python, mysql, django, collaborative-filtering

设置背景：我感兴趣：

*   在用户浏览网站时捕获对书籍感兴趣的隐含信号。该站点使用 mysql、memcached、ngnix 和 apache 用 django (python) 编写

例如，假设我的网站销售书籍。当用户浏览我的网站时，我想跟踪他们查看了哪些书籍，以及查看了多少次。

并不是说我会以这种方式存储数据，但理想情况下，我可以即时访问以下结构：

```
{user_id : {book_id: number_of_views, book_id_2: number_of_views}} 
```

我意识到这里有几种方法：

*   一些平面文件日志

*   每次将对象写入数据库

*   写入 memcached 中的对象

我真的不知道性能影响，但我宁愿不要在每个页面视图上都写入数据库，并且写入日志和稍后计算结构的延迟似乎不够快，无法提供好的建议-在您使用该站点时飞行，并且 memcached 方法看起来不错，但是将这个 obj 保存在内存中是有代价的：您可能会丢失它，并且它永远不会被写入“永久”的某个地方。

你会建议什么方法？（不必是上述之一）谢谢！

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T10:50:57.137

如果这些数据不是一个可能或可能不可用的不重要统计数据，我建议采用简单的方法并使用模型。它肯定会每次都访问数据库。

除非您绝对肯定这些查询**实际上**会降低整体体验，否则无需担心。即使您优化了这个，其他*意外*查询也很有可能会浪费更多的 CPU 时间。如果您正在测试所有其他查询，我假设您不会问这个问题。那么，为什么要冒险对此进行过早优化呢？

模型方法的一个优点是*有一个 API*。当您测试并决定优化后，您可以保留此 API 并使用其他东西更改底层模型（这很可能比模型更复杂）。

我肯定会先选择一个模型，看看它的表现如何。（以及项目的其他部分如何执行）

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T06:08:49.293

*你会建议什么方法？（不必是上述之一）谢谢！*

嗯......这就像在一个只有一扇门的四壁房间里说我想离开房间但不是通过唯一的门......

我曾经读过一篇文章（现在无法获取链接），它说 memcache 可以处理内存中的大量（facebook 使用它）数据集，而性能几乎没有下降......我的建议是你需要在 memcache 上探索更多，我认为它会成功。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T06:22:03.190

可以探索文档数据存储（mongo/couchdb）或持久键值存储（tokyodb、memcachedb 等）。

我没有明确的建议，因为最终解决方案取决于多种因素 - 负载、您学习/部署新技术的意愿、数据大小......

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T08:20:00.453

在我看来，一种方法可能是使用 memcached 来保留计数器，但定期运行一个 cron 来将 memcached 中的值存储到数据库或磁盘。这样，您将获得 memcached 的所有性能，但在发生崩溃的情况下，您丢失的数据不会超过几分钟。

# database - 您将如何构建数据库文件系统 (DBFS)？

> ID：924531
> 
>         
> 
> 赞同：11
> 
>         
> 
> 时间：2009-05-29T05:34:55.950
> 
>         
> 
> 标签：database, linux, operating-system, filesystems, bsd

数据库文件系统是一种文件系统，它是数据库而不是层次结构。最初的想法并不太复杂，但我想我会问是否有人考虑过他们如何做这样的事情？一个简单的计划可能会遗漏哪些问题？我对实现的第一个猜测可能类似于 Linux 平台的文件系统（可能在现有文件系统之上），但我真的不太了解如何启动它。这是一个短暂的想法，我怀疑我是否会坚持下去，但我希望至少能满足我的好奇心。

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2010-02-23T10:02:46.807

[DBFS](http://web.archive.org/web/20130515225529/http://tech.inhelsinki.nl:80/dbfs/)是 KDE 的一个非常好的 PoC 实现。它不是直接将其实现为文件系统，而是基于对传统文件系统的索引，并构建新的用户界面以使用户可以访问结果。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-30T22:09:50.143

最简单的方法是使用带有数据库后端的[fuse来构建它。](http://en.wikipedia.org/wiki/Filesystem_in_Userspace)

更困难的事情是将其作为内核模块（VFS）。

在 Windows 上，您可以使用[IFS](http://www.microsoft.com/whdc/devtools/ifskit/default.mspx)。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-06-14T21:33:18.847

我不太确定您所说的“数据库文件系统是一个文件系统，它是一个数据库而不是层次结构”。

正如 Osama ALASSIRY 所提到的，使用[“用户空间中的文件系统”(FUSE)可能是一个好主意。](http://fuse.sourceforge.net/)[FUSE wiki 列出了许多](http://sourceforge.net/p/fuse/wiki/DatabaseFileSystems)关于数据库支持的文件系统以及您可以通过类似 SQL 的查询进行搜索的文件系统的现有项目。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T05:46:10.507

也许[这](http://www.ibphoenix.com/main.nfs?a=ibphoenix&page=ibp_waterloo)是了解它如何工作的一个很好的起点。

这是Firebird[架构](http://www.firebirdsql.org)的[基本概述。](http://www.ibphoenix.com/main.nfs?a=ibphoenix&page=ibp_waterloo)

Firebird 是一个开源 RDBMS，因此如果您有兴趣，也可以深入了解一下。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2011-03-04T18:21:03.533

你问这个已经有一段时间了。我很惊讶没有人提出显而易见的建议。看看大型机和小型机，尤其是 iSeries-OS（现在称为 IBM-i，以前称为 iOS 或 OS/400）。   

如何将关系数据库做为海量数据存储相对容易。Oracle 和 MySQL 都有这些。问题是它必须对最终用户应用程序基本上无处不在。  

因此，应用转换的步骤是：

1) 普通分层文件系统中的所有内容

2) BLOB 中的数据，数据库中有少量元数据。包含一些目录信息的文件。  

3) BLOB 中的大数据，数据库中有大量元数据和复杂结构。具有与其关联的大量元数据的文件，基本上可以理解结构。  

4) 对象中暴露的 BLOB 的内部结构 <--> 具有大量元数据的关系图。虽然可能存在可导出的表单，但应用程序自然而然地与数据库一起工作，文件作为存储库的概念丢失了。  

# editor - 是否有任何编辑器可以让您查看您处理过的文件的修订版？

> ID：924533
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T05:36:09.147
> 
>         
> 
> 标签：editor

我正在寻找一个编辑器，它可以让我逐行查看我对文件所做的所有更改。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T05:48:04.327

它是日食。它还通过添加插件支持多种语言。您可以通过与本地历史比较来比较每个更改。只是您必须采取预防措施，如果您更改了eclipse编辑器以外的文件，此工具将无助于修改更改。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T05:50:55.057

Eclipse 就是这样做的。它根据文件保存维护每个修订的“本地历史”。已经救了我好几次了。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T06:05:56.550

Eclipse 具有每次保存文件时都会更新的本地历史记录。您可以打开文件的更改日志并将其与以前的版本进行比较。它还可以恢复已删除的文件。

Apple 的 Xcode 3.x 具有项目快照功能，可以对所有文件进行快照，以便您可以比较并稍后返回。

至于使用“真正的”版本控制系统，当然，你也应该这样做。如果你在一个小组中工作，那基本上是必须的。

但这并不会使编辑器提供的本地历史工具过时。我认为这些更像是 Undo 的自然延伸。就像我不能再使用 Windows 记事本因为它只有一个撤消级别一样，我开始期待编辑器允许我撤消上周所做的更改。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T05:40:46.440

您将需要某种版本控制软件来跟踪您的所有更改，以及一个差异/合并工具。大多数流行的版本控制系统（Subversion、TFS、Source Safe 等）都带有内置的可视差异工具。

例如，对于 Java，您可以将[Eclipse](http://eclipse.org)与名为[Subclipse的](http://subclipse.tigris.org)[Subversion](http://subversion.tigris.org)插件一起使用。

还有独立的差异/合并工具可用。这是一个适用于 Windows 的好方法：[Winmerge](http://winmerge.org/)

如果你喜欢[Vim](http://vim.org)，有一个名为 vimdiff 的内置 difftool。（这将是具有差异功能的编辑器的示例）。

我确信[Emacs](http://www.gnu.org/software/emacs/)也有可用的差异工具，但我不知道。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T05:41:14.287

通过使用像 Subversion/CVS/Git 这样的修订控制程序，您可以使用任何编辑器并运行例如“svn diff”。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T06:14:43.310

[这](http://www.spinellis.gr/blog/20080825/index.html)不完全是您所需要的，但您可能会觉得它很有趣。

* * *

## 回答 #7

> 赞同：-1
> 
>             
> 
> 时间：2009-05-29T05:46:28.463

没有编辑器可以保存您所做的修订。编辑者必须连接到 SVN 才能检查他们的修订历史，就像在 Zend Studio for Eclipse 中一样。

# sql - ORA-4030 甲骨文：如何解决

> ID：924534
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-29T05:36:56.167
> 
>         
> 
> 标签：sql, oracle, memory

在我们的 oracle 服务器（10 g）中，有时会出现 ORA-4030 错误。

> ORA-04030: 尝试分配 nn 字节时进程内存不足

我们知道这与内存大小调整有关。我们正在尝试一些内存设置。

除此之外，想知道，

(1) 任何特定的 SQL 查询用法都会导致这种错误

(2) 可以应用任何 Oracle SQL 查询调优来避免这种情况

您的回复会有所帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T08:21:42.057

1) sorts,distinct,group 和 join hash 最有可能给你这个错误！2）你使用什么操作系统？在 linux 中，您可以使用 ulimit -a 查看您为用户提供的资源。

您应该为 PGA 增加每个进程的内存。

问候

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T10:33:05.863

可能导致错误的一件事是不释放游标。在 .net 中，一个 SQLStatement = 一个 db 游标。确保应用程序正在关闭（并处置）它正在使用的 SQL 语句。

# mysql - 在 phpmyadmin 中将“pma_history”标记为崩溃

> ID：924543
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T05:40:21.467
> 
>         
> 
> 标签：mysql, phpmyadmin

我在使用 mysql 时遇到问题，我正在获取 Table。'\phpmyadmin\pma_history' 被标记为崩溃，应该修复。

这给我的网站访问数据库带来了问题

谁能帮我摆脱这个错误。  

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T18:57:57.027

从控制台（或任何可以运行命令的地方）运行“修复表 phpmyadmin.pma_history”。请参阅[修复表](http://dev.mysql.com/doc/refman/5.1/en/repair-table.html)命令。[检查表](http://dev.mysql.com/doc/refman/5.1/en/check-table.html)也很有帮助。

# svn - SVN 日志未显示对文件所做的所有修订

> ID：924547
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-05-29T05:41:10.717
> 
>         
> 
> 标签：svn, tortoisesvn

我在几周前就开始使用 SVN。我现在面临一个奇怪的问题。我们有一个文件，由我添加到存储库中。另一位开发人员昨天检查了它，对其进行了一些修改，并将其提交到存储库。今天，我对该文件进行了一些修改并将其提交到存储库。但是当我提交该文件时它没有要求我合并更改，所以现在我只有我修改过的版本，其他开发人员所做的更改甚至没有显示在日志中。

我在这里想念什么？我应该如何合并这两个更改？我们使用 TortoiseSVN 作为客户端。

编辑：所有其他开发人员都能够在他们的 SVN 客户端中看到日志条目！！因此，似乎提交已正确完成。

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2012-08-06T19:01:25.050

我们刚才也发生了同样的事情。其他人都可以看到最新的修订，除了提交它的人。修复他的 svn 目录没有帮助...显示全部没有帮助....

事实证明，当您发出 Show Log 命令时，您有 3 个选项框：

*   仅显示受影响的路径

*   停止复制/重命名

*   包括合并的版本

当他选择 Include Merged Versions 框时，TortoiseSVN 在显示日志中再次检索到几乎相同的修订集，但这次包括了最新的修订！取消选中该框不会删除最新版本。

我的理论是 Tortoise 在本地缓存 SVN 信息，并使用它而不是通过网络访问。更改主要选项会强制它重新读取 SVN 日志历史记录。

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2017-06-11T02:20:21.007

在桌面右击，你会看到tortoiseSVN，点击tortoiseSVN->Settings。转到保存的数据并清除图片中提到的日志。如果您有任何其他问题，请告诉我。![在此处输入图像描述](https://i.stack.imgur.com/hXvUE.png)

* * *

## 回答 #3

> 赞同：4
> 
>             
> 
> 时间：2009-05-29T05:49:27.087

听起来你应该处于这种情况，引用[海龟书](http://svnbook.red-bean.com/)：

> **本地更改和过时** 
> 
>       工作目录和存储库中的文件都已更改。文件的 svn 提交将因“过期”错误而失败。该文件应首先更新；svn update 命令将尝试将公共更改与本地更改合并。如果 Subversion 不能以合理的方式自动完成合并，它会留给用户解决冲突。

我会验证两件事：

1.  其他开发人员的工作实际上是正确提交的。如果日志没有反映这些更改，我猜可能是它们没有正确提交。

2.  在您没有意识到的情况下，您的工作副本没有被更新/合并。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T05:49:26.213

听起来您的工作副本没有正确更新。我不熟悉 TortoiseSVN，但请尝试更新您的工作副本并再次检查日志。您的更改可能已被静默合并。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2016-12-28T17:46:41.053

我遇到了同样的问题，它没有显示日志历史记录，现在通过清除 SVN 设置中的已保存数据来解决

# xml - XPath、XQuery 和 XPointer 之间的区别

> ID：924551
> 
>         
> 
> 赞同：68
> 
>         
> 
> 时间：2009-05-29T05:42:22.290
> 
>         
> 
> 标签：xml, xpath, xquery

`XPath`和`XQuery`和有什么区别`XPointer`？据我所知，`XQuery`是`XPath`. 我有一些基本的知识`XPath`。是否有任何可用的功能`XPath`不在`XQuery`？昨天，我听到一个新词，`XPointer`。我很困惑。哪种语言用于哪种目的？

* * *

## 回答 #1

> 赞同：65
> 
>             
> 
> 时间：2009-05-29T05:58:54.530

维基百科是解决此类问题的好地方。通常，[XPath](http://en.wikipedia.org/wiki/XPath)是一种用于在 DOM 中简洁地精确定位 XML 节点的语言。  [XQuery](http://en.wikipedia.org/wiki/XQuery)是 XPath 的超集，它还提供类似于 SQL 的[FLWOR语法。](http://en.wikipedia.org/wiki/FLWOR)最后，[XPointer](http://en.wikipedia.org/wiki/Xpointer)包括 XPath，但也提供了一个更简单的基于位置的寻址方案。  

当然，您可以随时阅读 W3C 规范以获取完整的详细信息。

* * *

## 回答 #2

> 赞同：63
> 
>             
> 
> 时间：2013-12-18T09:10:10.890

尽管 Matthew 的回答给人留下了良好的第一印象，但关于上述标准还有很多要讲的，还有很多相关的。网上有一篇来自 XML Holland 用户组杂志的好文章，它讲述了很多关于 XQuery 的历史，并从不同角度看待这些标准。第一部分在这里非常相关：

> [XQuery](http://www.w3.org/TR/xquery/)代表[XML 查询语言](http://www.w3.org/XML/Query/)。这已经说明了本质。它是一种从大量 XML 文件中选择子集和子结构的语言。可以将结果处理成适合用于例如后续流程或在 Web 浏览器中显示的内容。[XPath](http://www.w3.org/TR/xpath20/)在 XQuery 中被大量使用。
> 
> 所有 XML 标准都有自己的范围。我会举几个。[XSLT](http://www.w3.org/TR/xslt20/)是一种用于将 XML 转换为其他格式的语言。[XPointer](http://www.w3.org/TR/xptr-framework/)是 XPath 的扩展，用于在 XML 片段甚至节点的子部分中更准确地寻址节点。[XLink](http://www.w3.org/TR/xlink11/)是定义关系的标准。[XInclude](http://www.w3.org/TR/xinclude/)是一种使用例如 XLink 关系将多段 XML 组合成一个的标准。和[XProc](http://www.w3.org/TR/xproc/)是一个标准，可以用来描述如何处理 XML 文档以获得所需的最终结果。它以 XML 表示，并逐步描述流程，也称为 XML 管道。在 XProc 中，您使用 ao XQuery、XSLT 和 XInclude 语言（因此也间接使用 XPath、XPointer 和 XLink）来表达在每个步骤中准确需要完成的内容。
> 
> 所有这些标准都捆绑在一起。它们是相关的，并且相互依赖。下一张图片很好地总结了一些提到的 XML 标准之间的重叠，您也可以在[W3Schools](http://www.w3schools.com/xsl/xpath_intro.asp)找到该图片：

![什么是 XPath](https://i.stack.imgur.com/EQ8y6.gif)

完整的文章可以在这里找到：http: [//grtjn.blogspot.nl/2011/10/xquery-novelties-revisited.html](http://grtjn.blogspot.nl/2011/10/xquery-novelties-revisited.html)

！

* * *

## 回答 #3

> 赞同：17
> 
>             
> 
> 时间：2010-01-23T19:11:59.050

嗯，我认为 XQuery 是值得区分的。XPath 和 XPointer 几乎相同，都用于 XML 节点选择。另一方面，XQuery 是 XPath 的一个很大的扩展。例如，它提供了声明自定义函数的可能性。所以它更像是一种编程语言，它本机地与 XML 一起工作。您可以在此处查看一些示例：[embedding-xquery-in-java](http://rrusin.blogspot.com/2010/01/embedding-xquery-in-java.html) 

问候

* * *

## 回答 #4

> 赞同：7
> 
>             
> 
> 时间：2016-07-08T06:06:58.873

XPath 有意限制为读取现有节点。

作为 XSLT，XQuery 可以创建节点。它还可以更新节点（使用 XQuery 更新工具）。

从我的 XQuery 实现者的角度来看 ;-)

# installation - winpcap 静默安装

> ID：924555
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-05-29T05:43:47.280
> 
>         
> 
> 标签：installation, winpcap

我现在正在做安装设置。我想静默安装 winpcap.exe。是否有任何开关可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T06:09:44.503

由于误用，静默安装已被删除。你基本上有三个选择：

*   无需静默安装程序即可安装

*   使用允许静默安装的第三方安装程序（[Nmap 安装程序](http://nmap.org/download.html#windows)允许您静默安装 WinPCap）

*   手动安装

*   获取 WinPcap Pro，此安装程序允许静默安装。

# javascript - 即使在正文中，是否允许 HTML 脚本元素在外部？

> ID：924564
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-05-29T05:47:17.463
> 
>         
> 
> 标签：javascript, html

在 HTML 中，是否`<script>`允许元素是外部的并且`<script src="myscript.js">`即使在`<body>`文档中也可以使用？

* * *

## 回答 #1

> 赞同：11
> 
>             
> 
> 时间：2009-05-29T05:51:31.497

是的。这就是许多小部件的工作方式，例如 Google 地图。确保您指定类型：

```
<script type="text/javascript" src="action.js"></script> 
```

# git - 可以包含在构建中以进行可追溯性的“svn info”的Git替代品？

> ID：924574
> 
>         
> 
> 赞同：52
> 
>         
> 
> 时间：2009-05-29T05:50:35.867
> 
>         
> 
> 标签：git

我正在寻找“svn info”的 Git 替代品。

今天我在我的构建中添加了一些 Subversion 通过“svn info”命令提供给我的信息，然后将其推送到在启动期间打印的源文件中。这样我总是知道那个构建来自哪里以及如何重新获得它。

如果你有像 URL、Repository Root、Repository UUID 和 Revision 这样的“svn info”，那么你在部署的内容和构建系统之间就有了很好的联系。如果有人报告了错误，您就知道该软件的来源，并且由于该信息是自动包含的，因此人为错误的风险较小。

现在的问题是，我需要从 Git 获取哪些信息，以便以后确定该构建的来源？以及如何使用该信息切换回该版本？

（也许我还需要添加一些关于“构建计算机”的信息，因为 Git 是分布式的。）

* * *

**更新**：使用 rev-parse 真的很有用，我得到了这样的东西：

```
cj@zap:~/git_test$ git rev-parse HEAD
72ce5f3e13c61f76fde5c58cefc85eed91b6f1f8 
```

有了这个神奇的数字，以后就可以做到：

```
cj@zap:~/git_test$ git checkout 72ce5f3e13c61f76fde5c58cefc85eed91b6f1f8 
```

而我又回到了原来的位置。

* * *

**更新**：我认为如果我从 VonC 提供的脚本中提取一些部分并将它们放入我的构建文件中，我将得到我正在寻找的结果。

* * *

**更新**：

关于“git describe”的注释。您需要在分支历史记录中较早地使用真正的标签 (tag -a) 才能完成这项工作，否则您将得到类似的结果。

```
fatal: cannot describe '72ce5f3e13c61f76fde5c58cefc85eed91b6f1f8' 
```

该问题也在*[Git Tag Does the Wrong Thing by Default](http://www.rockstarprogrammer.org/post/2008/oct/16/git-tag-does-wrong-thing-default/)*中有所描述。

但请注意，结帐似乎仍然有效，即使那是一条错误消息。

```
git checkout 72ce5f3e13c61f76fde5c58cefc85eed91b6f1f8 
```

不过，正常情况似乎是您创建了类似“ver1.0”标签的内容，然后如果您继续工作，您会得到如下内容：

```
cj@zap:~/git_test$ git describe 
ver1.0-2-g4c7a057
cj@zap:~/git_test$ git tag -a ver2.0
cj@zap:~/git_test$ git describe 
ver2.0
cj@zap:~/git_test$ git commit . -m "something..."
Created commit ac38a9d: something...
 1 files changed, 1 insertions(+), 0 deletions(-)
cj@zap:~/git_test$ git describe 
ver2.0-1-gac38a9d 
```

因此，当您`describe`正确使用它时，它确实有效，并且可能会产生更易于阅读的结果，而且它也非常有用。

* * *

## 回答 #1

> 赞同：77
> 
>             
> 
> 时间：2013-05-15T09:49:18.890

我知道答案已经被接受，但这可能会对正在寻找远程和分支信息的人有所帮助。

```
 git remote show origin 
```

* * *

## 回答 #2

> 赞同：31
> 
>             
> 
> 时间：2009-05-29T06:25:07.383

要完成查尔斯的答案，您还可以制作一个显示“sn info”之类信息的脚本，就像[这个](http://blog.inquirylabs.com/2008/06/12/git-info-kinda-like-svn-info/)（已经[提到那里](http://kerneltrap.org/mailarchive/git/2007/11/12/406496)）

```
#!/bin/bash

# author: Duane Johnson
# email: duane.johnson@gmail.com
# date: 2008 Jun 12
# license: MIT
# 
# Based on discussion at http://kerneltrap.org/mailarchive/git/2007/11/12/406496

pushd . >/dev/null

# Find base of git directory
while [ ! -d .git ] && [ ! `pwd` = "/" ]; do cd ..; done

# Show various information about this git directory
if [ -d .git ]; then
  echo "== Remote URL: `git remote -v`"

  echo "== Remote Branches: "
  git branch -r
  echo

  echo "== Local Branches:"
  git branch
  echo

  echo "== Configuration (.git/config)"
  cat .git/config
  echo

  echo "== Most Recent Commit"
  git --no-pager log  -n1
  echo

  echo "Type 'git log' for more commits, or 'git show' for full commit details."
else
  echo "Not a git repository."
fi
---
popd >/dev/null 
```

这会产生类似的东西：

```
== Remote URL: origin git@github.com:canadaduane/my-project.git
== Remote Branches:
  origin/work
  trunk
  trunk@1309
  trunk@2570
  trunk@8

== Local Branches:
  master
* work

== Configuration (.git/config)
[core]
  repositoryformatversion = 0
  filemode = true
  bare = false
  logallrefupdates = true
[svn-remote "svn"]
  url = svn+ssh://svn.my-project.com/srv/svn
  fetch = my-project/trunk:refs/remotes/trunk
[remote "origin"]
  url = git@github.com:canadaduane/my-project.git
  fetch = refs/heads/*:refs/remotes/origin/*
[github]
  user = canadaduane
  repo = my-project

== Most Recent Commit
commit b47dce8b4102faf1cedc8aa3554cb58d76e0cbc1
Author: Duane Johnson <duane.johnson@gmail.com>
Date:   Wed Jun 11 17:00:33 2008 -0600

    Added changes to database schema that will allow decentralization from content pointers table

type 'git log' for more, or 'git show' for full commit details. 
```

* * *

## 回答 #3

> 赞同：9
> 
>             
> 
> 时间：2009-05-29T06:03:42.433

在 git 中，即使跨分布式代码，提交 id 在项目中也是唯一的。您还可以签出提交 id，因此如果您想要一个标识符，而不是让您能够回到生成构建的代码的状态，您只需要提交 id。

```
git rev-parse HEAD 
```

当然，您可能希望确保工作树或索引中没有任何待处理的更改，因此您可能需要检查是否没有类似以下内容的输出：

```
git diff --name-status HEAD 
```

或仅使用以下退出代码：

```
git diff --quiet HEAD 
```

您可能想要记录的有关构建机器的唯一内容是环境因素，例如工具链版本以及任何不是来自存储库的工具所处的状态。

如果你有一个中央主存储库，你可以记录它的 url，尽管提交 id 在项目的所有克隆中都是唯一的，它不是识别提交的关键信息。

* * *

## 回答 #4

> 赞同：8
> 
>             
> 
> 时间：2015-06-16T12:31:43.643

您可以通过以下方式获取远程信息，就像我们在“svn info”中获取的一样：

```
git 远程 -v

```

* * *

## 回答 #5

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T06:56:29.670

```
git describe 
```

是你所需要的全部。只要确保您至少创建了一个（正确的）标签。

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T21:32:31.863

我不知道这是否是您想要的，但是如果您想在构建期间嵌入某种版本信息，请标记您的点发布，并看看 Git 本身是如何做到的（Linux 内核使用相同的机制）使用[Makefile](http://repo.or.cz/w/git.git?a=blob;f=Makefile#l1227)和[GIT-VERSION-GEN](http://repo.or.cz/w/git.git?a=blob;f=GIT-VERSION-GEN)脚本*（两个链接都指向 repo.or.cz 的 gitweb）*。

GIT-VERSION-GEN 反过来使用[git-describe](http://www.kernel.org/pub/software/scm/git/docs/git-describe.html "git-describe - 显示可从提交中访问的最新标签")。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2017-04-25T17:49:36.593

这是 gitinfo.ps1（或纯粹主义者的 Get-GitInfo.ps1），Duane Johnson 的 shell 脚本的 PowerShell 版本：

```
# From http://stackoverflow.com/a/924657/990504
# Duane Johnson's script translated to PowerShell by Jonathan Fischer 2015.04.25

Push-Location .

# Find base of git directory
while ( $true )
{
  if ( Test-Path -PathType container .git )
  {
    # Show various information about this git directory
    Write-Output "== Remote URL: $(git remote -v)"

    Write-Output "`n== Remote Branches: "
    git branch -r

    Write-Output "`n== Local Branches:"
    git branch

    Write-Output "`n== Configuration (.git/config)"
    Get-Content .git/config

    Write-Output "`n== Most Recent Commit"
    git log --max-count=1

    Write-Output "Type 'git log' for more commits, or 'git show' for full commit details."
    break
  }

  # Try parent directory.
  Set-Location ..
  # Stop if at root of drive.
  if ( (Get-Location).Path -match "[A-Z]:\\$" )
  {
    Write-Error "Not a Git repository."
    break
  }
}

# Note: even though the popd was not strictly necessary in the bash version
# unless the script was sourced/dotted, PowerShell has the questionable behavior
# where scripts modify the current directory (and environment!) of the calling
# process. So we need the Pop-Location.
Pop-Location 
```

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2019-06-18T06:48:35.227

您可以在**git**中创建**别名**。

 **```
git config --global alias.info 'rev-parse HEAD' 
```

然后你可以在 git 中使用相同的命令，

```
git info 
```

# javascript - 如何在浏览器中显示excel图表？

> ID：924575
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-05-29T05:50:54.743
> 
>         
> 
> 标签：javascript, excel, activex

我有一个包含 excel 图表的 excel 表。我可以使用 iframe 在浏览器上显示 entier excel 表。但是，我只想在浏览器的 excel 工作表中显示图表。

我如何实现这一目标？我看到它需要 Javascript + ActiveX API。我试过但无法让它工作。

请参阅下面给出的代码。它不起作用，因为我无法动态设置“对象”标签的数据属性。它不允许。

```
<object id="objFrame" data="" type="application/vnd.ms-excel"></object>

<script>
var Excel = new ActiveXObject("Excel.Application"); 
Excel.Visible = false;
document.getElementById("objFrame").data  = Excel.Workbooks.Open("Test.xls").Sheets("Chart1");
Excel.Quit();
</script> 
```

有没有其他方法可以实现这一目标？请发布示例代码。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T16:41:04.593

[SpreadsheetGear for .NET](http://www.spreadsheetgear.com/)提供了加载 Excel 工作簿、插入值、计算然后在服务器上呈现图表（或包含图表的单元格范围）的能力，然后可以在浏览器中显示。[您可以在此处](http://www.spreadsheetgear.com/support/samples/imaging.aspx)查看实时 ASP.NET（C# 和 VB）示例。

免责声明：我拥有 SpreadsheetGear LLC

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T05:58:35.547

您应该检查[此工具](http://www.aspose.com/categories/file-format-components/aspose.cells-for-.net-and-java/default.aspx)，我相信这将完全实现您正在寻找的内容，而无需将称为 Office COM 服务器的内存膨胀/泄漏加载到浏览器内存中，并且感觉您违反了安全最佳实践。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2018-01-02T12:49:18.313

您可能需要检查[Funfun Excel 插件](https://www.funfun.io/1/msaddin)。基本上，Funfun 允许您直接在 Excel 中使用 JavaScript，如下图所示。

[![在此处输入图像描述](https://i.stack.imgur.com/YfqkR.png)](https://i.stack.imgur.com/YfqkR.png)

在这里，我有一个示例图表，它使用 HighChart.js 与电子表格中的数据一起绘制。您可以在 Excel 右侧看到图表。然后，您可以单击图表左上角的按钮以在默认浏览器中打开图表。看起来像这样。

[![在此处输入图像描述](https://i.stack.imgur.com/srwUn.png)](https://i.stack.imgur.com/srwUn.png)

此外，如果您想在浏览器中同时显示电子表格和图表。你有两个选择。

**首先**是在线使用Excel。然后，您的浏览器上的内容与本地 Excel 中的内容相同。

[![在此处输入图像描述](https://i.stack.imgur.com/AlJAm.png)](https://i.stack.imgur.com/AlJAm.png)

**至于第二个选项，** Funfun 还有一个在线编辑器，您可以在其中使用 JavaScript 代码和数据进行探索。

[![在此处输入图像描述](https://i.stack.imgur.com/PO56e.png)](https://i.stack.imgur.com/PO56e.png)

您可以在下面的链接中查看此示例的详细代码。

[https://www.funfun.io/1/edit/5a439b96b848f771fbcdedf0](https://www.funfun.io/1/edit/5a439b96b848f771fbcdedf0)

***披露：我是 Funfun 的开发者***

# c# - 使用 .NET 填充 html 列表控件

> ID：924592
> 
>         
> 
> 赞同：8
> 
>         
> 
> 时间：2009-05-29T05:58:21.817
> 
>         
> 
> 标签：c#, .net, html, vb.net

我有一个这样定义的列表：

```
<ul id="myList" class='myClass'>
    <li class="myItemClass">Item 1</li>
    <li class="myItemClass">Item 2</li>
</ul> 
```

使用 .NET 如何将项目动态添加到列表中？我还需要在每个新项目上指定类名

* * *

## 回答 #1

> 赞同：15
> 
>             
> 
> 时间：2009-05-29T07:45:52.923

您甚至可以使用该 HTML，添加 runat="server" 您将能够将其视为 HTMLControl，无论它是什么控件，我经常使用 div 执行此操作

```
<ul id="myList" runat="server" class="myClass">
    <li class="myItemClass">Item 1</li>
    <li class="myItemClass">Item 2</li>
</ul> 
```

然后你得到那个 HTMLControl 并使用它

```
HtmlGenericControl li;

for (int x = 3; x <= 10; x++)
{
    li = new HtmlGenericControl("li");
    li.Attributes.Add("class", "myItemClass");
    li.InnerText = "Item " + x;

    myList.Controls.Add(li);
} 
```

你最终会得到：

```
 <ul id="myList" runat="server" class="myClass">
        <li class="myItemClass">Item 1</li>
        <li class="myItemClass">Item 2</li>
        <li class="myItemClass">Item 3</li>
        <li class="myItemClass">Item 4</li>
        <li class="myItemClass">Item 5</li>
        <li class="myItemClass">Item 6</li>
        <li class="myItemClass">Item 7</li>
        <li class="myItemClass">Item 8</li>
        <li class="myItemClass">Item 9</li>
        <li class="myItemClass">Item 10</li>            
    </ul> 
```

当然，您可以使用有序或无序列表，它们也在下面的 ASP.NET Web 控件中。

```
<asp:BulletedList runat="server" ... 
```

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2009-05-29T06:59:50.737

你可以使用 asp:BulletedList 之类的

```
<asp:BulletedList ID="MyList1" CssClass="MyClass" runat="server">
  <asp:ListItem Text="Item1" class="MyClass" />
</asp:BulletedList> 
```

添加添加代码，如

```
ListItem item = new ListItem("Item2");
item.Attributes.Add("class", "MyClass");
MyList1.Items.Add(item); 
```

或者，如果出于某种特定原因您需要使用 ul 标签，那么您可以添加一个 runat="server" 到它。例如

```
<ul id="MyList2" class="MyClass" runat="server">
  <li class="MyClass">Item1</li>
</ul> 
```

像这样的代码

```
HtmlGenericControl li = new HtmlGenericControl("li");
li.Attributes.Add("class", "MyClass");
li.InnerText = "Item2";
MyList2.Controls.Add(li); 
```

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T06:11:33.970

解决此问题的最简单方法是使用 asp 中继器控件

```
<ul id="myList" class='myClass'>
<asp:Repeater ID="repeaterMyList" Runat="server">
<ItemTemplate>
  <li class="myItemClass">
   <%# Eval("Item") %>
  </li>
</ItemTemplate>
</asp:Repeater>
</ul> 
```

[编辑] - 请记住在 repeaterMyList 上设置数据源并在代码隐藏中的转发器控件上调用 databind。

```
repeaterMyList.DataSource = someDataTable;
repeaterMyList.DataBind(); 
```

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T06:58:20.273

我假设您有正当理由不使用 BulletedList 网络服务器控件。不管怎样，这是一个有趣的编程练习，它说明了 Htmlservercontrol 架构的内部结构以及它们如何映射到简单的 HTML 标记。

HTML`ul`和`li`标签不直接映射为 HTMLServer 控件。这意味着即使您将`runat="server"`属性添加到列表中，它的内容也不会作为列表项直接访问。

但是，所有未直接映射为 Html 服务器控件的控件都可以通过`HtmlGenericControl`该类访问。这使得动态创建和修改此类控件成为可能。

因此，解决方案是双重的：

*   制作无序列表`runat="server"`，以便您可以在服务器端代码中访问它。此外，您应该在 list 中创建现有项目`runat="server"`，否则它们将只能作为`LiteralControl`包含前两个 listitem 作为纯文本的 an 来访问。

*   在代码中，访问列表的内容并向其添加类型为“li”的新 HtmlGenericControl。

**以下（基本简单）页面演示了此过程：**

* * *

```
<%@ Page Language="VB" AutoEventWireup="false" %>
<%@ Import Namespace="System.Collections.Generic" %>

<script runat="server">

  Private Shared addedItems As List(Of HtmlGenericControl)

  Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not Page.IsPostBack Then
      'On first load, instantiate the List.
      addedItems = New List(Of HtmlGenericControl)
    End If
  End Sub

  Protected Sub btn1_Click(ByVal sender As Object, ByVal e As System.EventArgs)
    'Add the previously created items to the UL list.
    'This step is necessary because
    '...the previously added items are lost on postback.
    For i As Integer = 0 To addedItems.Count - 1
      myList.Controls.Add(addedItems.Item(i))
    Next

    'Get the existing no. of items in the list
    Dim count As Integer = myList.Controls.Count

    'Create a new list item based on input in textbox.
    Dim li As HtmlGenericControl = CreateBulletItem()

    'Add the new list item at the end of the BulletedList.
    myList.Controls.AddAt(count, li)
    'Also add this newly created list item to the generic list.
    addedItems.Add(li)
  End Sub

  Private Function CreateBulletItem() As HtmlGenericControl
    Dim li As New HtmlGenericControl("li")
    li.InnerText = txtNewItem.Value
    li.Attributes("class") = "myItemClass"

    Return li
  End Function
</script>

<html>
<head runat="server">
  <title>Test Page</title>
</head>
<body>
  <form id="form1" runat="server">
    <div>
      <ul id="myList" class='myClass' runat="server">
        <li runat="server" class="myItemClass">Item 1</li>
        <li runat="server" class="myItemClass">Item 2</li>
      </ul>
      <input type="text" id="txtNewItem" runat="server" />
      <asp:Button ID="btn1" runat="server" Text="Add" OnClick="btn1_Click" />
    </div>
  </form>
</body>
</html> 
```

# mysql - 流利的 Nhibernate 和 MySql，方言问题

> ID：924595
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T05:59:04.030
> 
>         
> 
> 标签：mysql, nhibernate, fluent-nhibernate

我对流利的 nhibernate 和 mysql 有疑问。我正在这样做：

```
Fluently.Configure()    
.Database(MySQLConfiguration.Standard.ShowSql())    
.Mappings(m =>        
m.FluentMappings        
.AddFromAssemblyOf<ShopperMapping>())    
.BuildConfiguration();SchemaExport 
exp = new SchemaExport(cfg);
exp.Execute(true, false, false, true); 
```

但是这样做时，我会遇到诸如“方言不支持 DbType.Uint32”之类的失败。对于 Uint64 (ulong) 类型的映射属性，我得到相同的结果。为什么会这样？有人知道吗？我需要以其他方式映射吗？就像明确说明要使用哪种访问策略或类似的东西？

问候，约根

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-06-01T14:24:16.517

NHibernate 不支持无符号整数类型。NHibernate 实现的基本类型的完整列表可以[在文档](https://www.hibernate.org/hib_docs/nhibernate/1.2/reference/en/html_single/#mapping-types-basictypes)中找到。

我不知道它们为什么不存在的任何“官方词”，但如果我不得不猜测是[某些*主要数据库引擎](http://www.microsoft.com/sqlserver/2008/en/us/default.aspx)出于某种原因[不支持 unsigned integers](http://msdn.microsoft.com/en-us/library/ms187745.aspx)。

**对于适当小的“一些”值*

# oop - 基本 F# 问题：可变性、大小写标准、函数与方法

> ID：924596
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T05:59:32.610
> 
>         
> 
> 标签：oop, f#, functional-programming, naming-conventions, mutable

如果已经问过这些，请随时向我指出其他答案！

我只是在本月的新版本中开始使用 F#。我在 OO 和函数式语言（Haskell 和 Scheme，但不是 OCaml/ML）方面都有一些背景。到目前为止，在阅读 F# CTP 附带的小教程时，已经出现了几个问题。

1）可变变量比单子更受欢迎吗？如果是这样，在 F# 中是否完全避开了 monad？

2）我对使用的大写有点困惑。在本教程代码文件中，有时函数以小写字母开头，有时以大写字母开头。我知道 MS 倾向于喜欢带有函数和方法的初始上限，但在这里似乎有两种方法可以做到这一点。这对我来说没什么大不了的，因为我只是在自己的时间里玩耍，但我很好奇标准是什么。

3) 我对面向对象和功能样式的整个组合感到很困惑。`print_string "string"`有道理，但是这里是`List.map fn list`（除非 List 只是名称空间，如果是，请原谅我）。那么这里是`str.Length`。任何人都关心阐明何时使用什么，哪个是首选？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-05-29T06:10:22.597

关于可变性：F# 让你变得务实。我很少喜欢 state monad 而不是 mutable/ref，但你可以做任何你喜欢的事情。Monad 并没有被回避，但我认为人们倾向于只在它们明显获胜时才使用它们（例如异步编程）。

关于命名：“函数是值”这一事实存在张力，这意味着您可以选择用大写字母（因为它是一个函数，并且函数以大写字母开头）或用小写字母命名一个 let-bound 函数（因为它是一个 let-bound 值（恰好在其类型名称中有一个 '->'））。就我个人而言，我更喜欢始终对所有函数使用大写名称，但您会看到两种样式（特别是因为 F# 库本身的样式在过去一两年中一直在缓慢发展/标准化）。整个 .Net 似乎都在回避下划线，F# 库也不再是一个例外（还有一些名称使用下划线，但它们现在很突出，可能会被更改）。

关于功能风格：我不清楚你在问什么。对于 List.map，“List”是 F#*模块*的名称，“map”是该模块中的函数。成员函数（例如 str.Length）具有在整个 .Net 中普遍使用的优势，并在编辑器中提供了良好的智能感知体验。

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2009-05-29T06:50:08.450

1）我不会说 monads 被回避...你提到你有一些 Haskell 的背景 - 所以 F# 工作流是你想要研究的（术语工作流可能令人困惑，但这些只有一点点与业务流程有关）。一般来说，序列表达式和更普遍的计算表达式（又名工作流）将接近于 monad。这就是说 mutable 很常见，尽管我不确定“首选”是否是表达它的方式。他们每个人都有一席之地-就我个人而言，我从两本书开始-“F#基础”-但如果您想深入研究-请选择“专家F#”-两本书都很好。老实说，我需要 Foundations 来帮助我入门。

2) 根据我的经验，令人困惑的是 .NET 中的传统函数有一个真正不适合函数式编程的约定。因此，我觉得在 F# 中，当您查看“传统 .NET”命名函数的使用与 F# 中明显具有功能的元素时，有时可能会感到困惑......例如，在我上面提到的书中'Expert F#' - 他们提到您会在 camelCase 和 PascalCase 中看到诸如 List.map 和 Dates.Today 之类的 let 值（Pascal 案例是更传统的 .NET）。一个好的经验法则是，如果您停留在函数式世界中 - 使用更传统的函数式（camelCase）命名 - 但是如果您所做的预计会被其他 .NET 语言使用，请使用更多的 .NET规范（帕斯卡）。

3) 我同意 OO 和函数样式的组合可能会造成混淆。同样，我不确定哪个是首选，除了说 F#（功能性）在功能范式方面清楚地设置了自己的样式。然而，F# 是 .NET 世界中的一种函数式语言（请注意我上面提到的命名相对混乱）......所以，这又不是完全明确的。

希望这会有所帮助......信不信由你，当您使用 F# 并考虑其他具有 C++ 与 C 共享概念的语言（例如）时，它会变得更容易。就个人而言，命名开始变得有意义，并且当我开始了解到我是 F# 是一种在传统平台上运行的函数式语言时，这些概念开始起作用 - 旨在进行互操作（尽管我不确定将互操作称为无缝是否合适： D)

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T07:22:40.257

一般来说，monad（F# 中的“工作流”）比 Haskell 中的少得多，首先是因为可变变量可用，所以人们不太可能选择使用 state monad。其次，没有更高级的类型变量，这意味着您不能编写重载的代码来处理任何 monad，这使得使用它们的吸引力大大降低。

它们常用的一个地方是序列表达式（它真的很像 Haskell 中的列表推导，但它们与列表 monad 密切相关）。

# java - 我是否正确地实习我的字符串？

> ID：924597
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-05-29T06:03:06.943
> 
>         
> 
> 标签：java, memory-management

我想确保我不会破坏 permgen 空间，所以我正在仔细地练习我的字符串。

这两个语句等效吗？

```
String s1 = ( "hello" + "world" ).intern(); 

String s2 = "hello".intern() + "world".intern(); 
```

**更新**

我提出问题的方式与实际应用完全不同。这是我使用实习生的方法。

```
public String toAddress( Transport transport )
{
    Constraint.NonNullArgument.check( transport, "transport" );

    switch( transport )
    {
    case GOOGLE:
    case MSN:
        return ( transport.code() + PERIOD + _domain ).intern();
    case YAHOO:
    default:
        return _domain;
    }
}
private String _domain;  // is initialized during constructor
private static final String PERIOD = "."; 
```

* * *

## 回答 #1

> 赞同：10
> 
>             
> 
> 时间：2009-05-29T06:07:44.723

我能想到的最好的建议是：不要打扰。静态声明的字符串无论如何都将在常量池中，除非您动态地创建一个...错误的字符串，否则我想不出原因。

自 97 年以来，我一直在使用 Java 进行编程，但我从未真正使用过`String.intern()`.

编辑：看到你的更新后，我真的认为你不应该使用实习生（）。您的方法看起来非常正常，几乎没有理由使用 intern()。

我这样做的原因是它感染了优化，并且可能是过早的，你在猜测垃圾收集器。如果你的方法是短暂的，那么生成的字符串将在下一次次要 GC 中很快在年轻一代中死去，如果不是这样，它无论如何都会在成熟一代中被实习（因为需要更好的词） .

我想这可能是一个好主意的唯一一次是如果您花一点时间使用分析器并证明它对您的应用程序的性能有很大的影响。

* * *

## 回答 #2

> 赞同：10
> 
>             
> 
> 时间：2009-05-29T06:11:32.753

正如 jensgram 所说，这两个陈述并不等同。两条重要规则：

*   在代码中连接字符串文字以字符串常量结尾，因此这两个语句*完全相同*（它们将产生相同的字节码）：

    ```
    String x = "foo" + "bar":
    String x = "foobar"; 
    ```

*   字符串常量是自动实习的，你不需要显式地做

现在，这集中在文字上-您*实际上是*在调用`intern`文字，还是您的实际用例有些不同（例如，从您经常看到的数据库中获取的实习值）？如果是这样，请给我们更多的细节。

编辑：好的，基于问题编辑：*如果*您最终存储某个位置的返回值，它会长时间存在*并且*您最终会多次使用相同的地址，这*可以*节省一些内存。如果*不是*这样，实习实际上可能会让事情变得更糟。我不确定实习字符串是否会永远存在，但很有可能。*`toAddress()`*

 ***在我看来，这*不太可能*很好地利用实习，而且很可能会让事情变得更糟。你提到试图节省 permgen 空间 - 为什么你认为实习会有所帮助？无论如何，连接的字符串不会以 permgen 结尾，除非我错了。

* * *

## 回答 #3

> 赞同：7
> 
>             
> 
> 时间：2009-05-29T06:09:31.210

不可以。将两个实习字符串加在一起不会给你一个实习字符串。

也就是说，很少有人需要“仔细地练习琴弦”。除非您要处理大量相同的字符串，否则麻烦大于价值。

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T06:08:18.310

我会说不。`s1`将“helloworld”添加到池中，而`s2`由两个池化字符串“hello”和“world”组成。

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T06:17:24.850

更多信息将帮助我们了解您的查询...无论如何...

如果您手动想要为 HelloWorld 实习，那么使用第一个语句，就像在第二个语句中一样，您分别实习 hello 和 world。两种说法根本不一样。

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T06:24:20.100

在编写所有这样的代码之前，您可能希望获得某种形式的证明（也许通过分析）您正在“打击 permgen 空间”。

否则，您可能只是在进行通常不受欢迎的“过早优化”。有关为什么这可能是一件坏事的更多详细信息，请参阅[http://en.wikipedia.org/wiki/Optimization_(computer_science)#When_to_optimize 。](http://en.wikipedia.org/wiki/Optimization_(computer_science)#When_to_optimize)

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T08:12:41.497

在许多情况下，“仔细地实习”你的琴弦只会浪费一些时间。考虑以下情况：

```
void foobar(int x) {
  String s1 = someMethod(x).intern();
  ...
  ...
} 
```

所以 s1 是实习的，没有（堆）空间浪费？错误的！最有可能的是， someMethod(x) 的中间结果仍然存在于堆中的某处，需要进行垃圾回收。那是因为 someMethod() 以某种方式构造了字符串，并且（除非它返回文字）它在堆上做到了。但是然后...更好地查看永久空间的用途。它用于关于类的元数据和（哎呀）String.intern 表。通过实习所有的字符串，你正在做你想要避免的事情：猛击 permgen 空间。

更多信息在这里：[http ://www.thesorensens.org/2006/09/09/java-permgen-space-stringintern-xml-parsing/](http://www.thesorensens.org/2006/09/09/java-permgen-space-stringintern-xml-parsing/)

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T08:13:50.637

您使用的字符串数量对JVM 的永久生成*没有*影响，因为我们仍然在谈论一个*class*。

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T08:32:13.860

实习字符串基本上是等待发生的内存泄漏:(

除非您有非常非常好的理由[1]，否则不要这样做，而是将其留给 JVM。

[1] 如，“亲爱的老板，请不要解雇我。我有这些分析数据来支持我使用实习生的决定”:)

# algorithm - 线段中的等距点

> ID：924598
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T06:03:16.397
> 
>         
> 
> 标签：algorithm, geometry, distance

假设您在二维平面上有两个点 (a , b)。给定这两个点，找到线段上与最接近它的每个点等距且距离最小的最大点的最佳方法是什么。

我使用 C#，但任何语言的示例都会有所帮助。

```
List<'points> FindAllPointsInLine(Point start, Point end, int minDistantApart)  
{  
//    find all points  
} 
```

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-05-29T06:16:50.950

将问题解释为：

*   点之间`start`

*   并点`end`

*   之间均匀间隔的最大点数是多少`minDistanceApart`

然后，这相当简单：之间的长度`start`除以`end`，`minDistanceApart`向下舍入负1。（没有负1，您最终得到的是端点之间的距离数，而不是中间的额外点数）

执行：

```
List<Point> FindAllPoints(Point start, Point end, int minDistance)
{
    double dx = end.x - start.x;
    double dy = end.y - start.y;

    int numPoints =
        Math.Floor(Math.Sqrt(dx * dx + dy * dy) / (double) minDistance) - 1;

    List<Point> result = new List<Point>;

    double stepx = dx / numPoints;
    double stepy = dy / numPoints;
    double px = start.x + stepx;
    double py = start.y + stepy;
    for (int ix = 0; ix < numPoints; ix++)
    {
        result.Add(new Point(px, py));
        px += stepx;
        py += stepy;
    }

    return result;
} 
```

如果你想要所有的点，包括起点和终点，那么你必须调整 for 循环，并在 'start.x' 和 'start.y' 处开始 'px' 和 'py'。请注意，如果端点的准确性至关重要，您可能希望直接根据比率“ix / numPoints”执行“px”和“py”的计算。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T06:10:55.250

我不确定我是否理解您的问题，但是您是否要像这样划分线段？

前：

A +--------------------+ B

后：

A +--|--|--|--|--|--|--+ B

“两个破折号”是您的最小距离？如果是这样，那么将有无限多的点集满足这一点，除非您的最小距离可以精确地划分线段的长度。但是，可以按如下方式获得这样的一组：

1.  求直线的矢量参数方程

2.  求总点数（floor(length / minDistance) + 1）

3.  从 0 到 n 循环 i，找到沿线的每个点（如果您的参数方程从 0 到 1，则 t = ((float)i)/n）

[编辑] 看到 jerryjvl 的回复后，我认为你想要的代码是这样的：（在 Java-ish 中执行此操作）

```
List<Point> FindAllPointsInLine(Point start, Point end, float distance)
{
    float length = Math.hypot(start.x - end.x, start.y - end.y);
    int n = (int)Math.floor(length / distance);
    List<Point> result = new ArrayList<Point>(n);

    for (int i=0; i<=n; i++) {  // Note that I use <=, not <
        float t = ((float)i)/n;
        result.add(interpolate(start, end, t));
    }

    return result;
}

Point interpolate(Point a, Point b, float t)
{
    float u = 1-t;
    float x = a.x*u + b.x*t;
    float y = a.y*u + b.y*t;
    return new Point(x,y);
} 
```

[警告：代码未经测试]

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T06:21:29.650

找出适合线上的点数。计算 X 和 Y 坐标的步长并生成点。像这样：

```
lineLength = sqrt(pow(end.X - start.X,2) + pow(end.Y - start.Y, 2))
numberOfPoints = floor(lineLength/minDistantApart)
stepX = (end.X - start.X)/numberOfPoints
stepY = (end.Y - start.Y)/numberOfPoints
for (i = 1; i < numberOfPoints; i++) {
    yield Point(start.X + stepX*i, start.Y + stepY*i)
} 
```

# javascript - 使用 Jquery 通过单个链接调用不同的函数

> ID：924607
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T06:07:08.890
> 
>         
> 
> 标签：javascript, jquery, html

*我想用一个 href 链接来调用不同的函数。

第一次点击它应该调用 first_function()，第二次点击它应该调用 second_function。
就像使用相同链接在两个功能之间切换一样。建议最好的方法。*

> ***jQuery代码：***

```
$(function() {

 var IntervalId;

 function first_function() {
  //code goes here
 }; 

 function second_function(){  
  //code goes here
 }  

$("#link2").click((function(){
second_function();
}));

$("#link1").click((function(){
first_function();
}));

}); 
```

> ***html代码：***

```
<a href="javascript:void(0);" id="link2">Call function2</a>
<a href="javascript:void(0);" id="link1">Call function1</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-05-29T06:12:07.010

> “就像使用同一链接在两个功能之间切换一样。”

```
$("#link1").toggle(
 function first_function() {
  // Code goes here 
 },
 function second_function(){  
  // Code goes here 
 }  
); 
```

来自 jQuery 文档[`toggle(fn1, fn2,  [fn3, [fn4, [...]]]`）](http://docs.jquery.com/Events/toggle#fnfn2fn3.2Cfn4.2C...)：

> 每隔一次点击在两个或多个函数调用之间切换。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T06:12:40.490

最简单的方法是

```
var performFirstAction = true;

$(function() {

 function first_function() {
  // Code goes here 
 } 

 function second_function(){  
  // Code goes here 
 }  

 $("#link1").click(function(){
  if(performFirstAction) {
    first_function(); performFirstAction = false; }
  else {
    second_function(); performFirstAction = true; }
 });
}); 
```

或者使用 Tomalak 提到的切换，以及，

```
$(function() {

 function first_function() {
  // Code goes here 
 } 

 function second_function(){  
  // Code goes here 
 }  

 $("#link1").toggle(
   first_function,
   second_function
 );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T06:15:04.510

Javascript：

```
$(document).ready(function() {
    function first_function() {
        // Code goes here 
    }; 

    function second_function(){  
        // Code goes here 
    }

    $("#link").toggle(first_function, second_function);
}); 
```

HTML：

```
<!-- I'm pretty sure that <a> isn't the right tag for this. -->
<button id="link">Toggle between the two functions.</button> 
```

# apache-flex - Flex TextArea 单击按钮时保持焦点/选择

> ID：924614
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-29T06:09:37.107
> 
>         
> 
> 标签：apache-flex, actionscript-3

我想知道即使单击外部按钮，我如何将焦点/选择保持在 TextArea 上。

就像 RichTextEditor 是如何做的一样。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T07:07:14.700

在 click 事件的事件处理程序中，您将需要 stopImmediatePropagation() 和 preventDefault() ，然后使用选择/焦点处理您的业务。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-08-21T02:20:59.530

似乎`RichTextEditor`正在通过以下行完成其保持焦点`setTextStyles()`：

```
callLater(textArea.setFocus) 
```

我认为任何与 's 控件的用户交互`RTE`都将通过此方法进行，以便在控件事件完成后返回焦点。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2015-10-06T20:04:40.147

我对一个简单的文本框也有同样的问题。我有一个按钮可以拉出突出显示的值，然后 ajax 将其发送到服务器。但是当焦点从按钮上移开时，它的高亮值`window.getSelection().toString()`是空白的。

我可以通过简单地将焦点设置回文本区域来解决这个问题。我知道便宜的解决方案，但它有效。我使用 jQuery，但想出一个普通的 javascript 版本可能并不难。

```
$holder.on('click', '.name-add_option input', function(e)
{
  // Make sure the button doesn't do something silly like submit the form.
  e.preventDefault();

  // Set the focus to the text area I expect the highlighted text to be.
  $holder.find('.name-field textarea').focus();

  // Copy highlighted text.
  highlight = window.getSelection().toString();

  // Do stuff with highlighted data.
}); 
```

`$holder`是在我的上下文中样式为模式窗口的 div 的 jquery 句柄。

* * *

## 回答 #4

> 赞同：-2
> 
>             
> 
> 时间：2009-05-29T06:50:03.643

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="vertical">
    <mx:TextArea id="textArea" focusOut="{textArea.setFocus()}" />
    <mx:Button id="test" label="Test" />
</mx:Application> 
```

# xcode - 如何在依赖的 xcode 项目中设置断点

> ID：924628
> 
>         
> 
> 赞同：14
> 
>         
> 
> 时间：2009-05-29T06:13:58.927
> 
>         
> 
> 标签：xcode, macos

我有一个 XCode 项目（我的主要 xcode 项目有它的可执行文件）。它依赖于其他一些项目（在 Detail View 的 Project 选项卡下，它依赖于一些其他 xcode 项目）。

我的问题是如何在依赖项目的代码中设置断点？

我试过这个，但是这不起作用 1\. 打开我的主 xcode 项目 2\. 双击依赖的 xcode 项目之一 3\. 在源目录中，找到我要中断的文件并添加一个断点（通过单击侧面在编辑器的边框上，出现一个蓝色的“书签事物”） 4\. 返回“构建并运行”，我的应用程序确实运行了，但它从未在我在 #3 中设置的断点处中断。

有人可以帮帮我吗？我在这上面花了几天时间，我不知道为什么。

谢谢你。

* * *

## 回答 #1

> 赞同：28
> 
>             
> 
> 时间：2012-11-30T03:20:55.027

1）在你的项目中添加断点

2）在xcode中进入断点视图（项目导航器的左上角）视图的图标就像一个断点图标

3）右键单击所需的断点并选择“移动到”->“用户”

如果断点位于“用户”项目下，则所有项目都可以访问它。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2012-10-16T16:18:58.067

每当我在使用 Xcode GUI 设置断点时遇到问题时，我都设法使用调试器命令行（也就是说，输出窗口中的“lldb”提示符）来完成。例如，要在源文件“client.m”的第 42 行设置断点，请键入：

```
(lldb) b client.m:42 
```

除了解决这个特定问题之外，命令行调试提供了比任何 GUI 都大得多的灵活性和可自动化性。[LLDB 教程](http://lldb.llvm.org/tutorial.html "LLDB 教程")是一个很好的起点。（完全披露：我是 unix 和 gdb 的长期粉丝，所以这里有一些偏见）。

当然，正如其他人所提到的，请确保使用调试符号编译库/依赖项目。希望这可以帮助; 祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-11-10T01:15:32.603

我将在此处附上 Jon-Eric 的声音，并补充说，如果您习惯性地使用 Cmd+Enter 运行项目，则应考虑切换到 Cmd+Y 以每次启用 gdb。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-08-21T09:29:36.493

I've had similar problems with Xcode. The solution for me is to make sure that there is also a breakpoint in the main project that gets hit (as Kent mentions in his third point). I don't understand why this works though.

You should also only set breakpoints in a project when you've got it open. If you don't, they can start misbehaving: still stopping the flow of execution after you've disabled or deleted them, or not working when you think they're enabled.

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T09:56:07.950

这里有一些东西......（有些明显有些不是）

1）确保依赖项目是用调试符号编译的（我假设它是一个库）

2）确保您的活动可执行文件链接到您的依赖库的调试版本

3）在调用lib入口点之前在主项目中设置一个断点，*并*在lib的入口点设置一个bp......（除了你想要命中的真正断点...... )

我发现调试库的最佳方法是打开 lib 项目并将活动可执行文件设置为主项目，然后直接从库项目中点击“构建和调试”。

我希望这会有所帮助，祝你好运，玩得开心！

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-10-30T16:23:17.630

确保选择“构建和*调试*”（对于步骤 #4）。“Go”有时意味着“运行”（禁用断点），有时意味着“调试”（启用断点）。

此外，请确保在调试主项目时保持依赖项目处于打开状态。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2017-12-12T15:23:01.023

除了关于调试符号的肯特回复外，请检查主项目的构建设置中的 COPY_PHASE_STRIP 值，并确保在调试中将其设置为 NO。

# entity-framework - 挑战：让 Linq-to-Entities 生成体面的 SQL，而无需不必要的连接

> ID：924629
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-05-29T06:14:19.193
> 
>         
> 
> 标签：entity-framework, linq-to-entities

我最近在 msdn 的实体框架论坛上遇到了一个问题：http:
 [//social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/bb72fae4-0709-48f2-8f85-31d0b6a85f68](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/bb72fae4-0709-48f2-8f85-31d0b6a85f68)

问这个问题的人试图做一个相对简单的查询，涉及两个表，一个分组、排序依据和一个使用 Linq-to-Entities 的聚合。一个非常简单的 Linq 查询，在 SQL 中也很简单——人们每天都在尝试做的事情。

但是，当使用 Linq-to-Entities 时，结果是一个复杂的查询，其中包含许多不必要的连接等。我尝试过，如果仅使用纯 Linq，则无法让 Linq-to-Entities 从中生成一个体面的 SQL 查询针对 EF 实体。

在看到来自 EF 的相当多的怪物查询后，我认为 OP（以及我[和其他人](https://stackoverflow.com/questions/767049/linq-to-entities-excessive-joins-in-generated-sql)）可能做错了什么。也许有更好的方法来做到这一点？

所以这是我的挑战：使用[EF 论坛中的示例](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/bb72fae4-0709-48f2-8f85-31d0b6a85f68)并仅对两个实体使用 Linq-to-Entities，是否可以让 EF 生成 SQL 查询而无需不必要的连接和其他复杂性？

我希望看到 EF 生成的东西更接近于 Linq-to-SQL 对相同类型的查询所做的事情，同时仍将 Linq 用于 EF 模型。

**限制：**使用 EFv1 .net 3.5 SP1 或 EFv4（beta 1 是 VS2010/.net4 beta 的一部分，可从 Microsoft 下载）。不允许使用 CSDL->SSDL 映射技巧、模型“定义查询”、存储过程、数据库端函数或视图。模型和数据库之间只是简单的 1:1 映射，以及一个纯粹的 L2E 查询，它可以满足 MSDN 上原始线程的要求。两个实体之间必须存在关联（即我对原始线程的“解决方法#1”回答不是有效的解决方法）

**更新：**增加了 500pt 赏金。玩得开心。

**更新：**如上所述，使用 EFv4 / .net 4（β1 或更高版本）的解决方案当然有资格获得赏金。如果您使用的是 .net 4 post β1，请包括内部版本号（例如 4.0.20605）、您使用的 L2E 查询以及它生成并发送到数据库的 SQL。

**更新：**这个问题已在 VS2010 / .net 4 beta 2 中得到修复。虽然生成的 SQL 仍然有几个 [相对无害的] 额外嵌套级别，但它并没有像以前那样做任何疯狂的事情。在 SQL Server 的优化器尝试之后的最终执行计划现在已经尽可能好。+++ 负责 EFv4 的 SQL 生成部分的帅哥和帅哥...

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-06-01T22:05:50.437

如果我那么担心疯狂的 SQL，我就不会在数据库中进行任何分组。我将首先通过使用 ToList() 完成查询我需要的所有数据，同时使用 Include 函数在单个选择中加载所有数据。

这是我的最终结果：

```
var list = from o in _entities.orderT.Include("personT")
           .Where(p => p.personT.person_id == person_id && 
                       p.personT.created >= fromTime && 
                       p.personT.created <= toTime).ToList()
           group o by new { o.name, o.personT.created.Year, o.personT.created.Month, o.personT.created.Day } into g
           orderby g.Key.name
           select new { g.Key, count = g.Sum(x => x.price) }; 
```

这导致了一个更简单的选择：

```
SELECT 
1 AS [C1], 
[Extent1].[order_id] AS [order_id], 
[Extent1].[name] AS [name], 
[Extent1].[created] AS [created], 
[Extent1].[price] AS [price], 
[Extent4].[person_id] AS [person_id], 
[Extent4].[first_name] AS [first_name], 
[Extent4].[last_name] AS [last_name], 
[Extent4].[created] AS [created1]
FROM    [dbo].[orderT] AS [Extent1]
LEFT OUTER JOIN [dbo].[personT] AS [Extent2] ON [Extent1].[person_id] = [Extent2].[person_id]
INNER JOIN [dbo].[personT] AS [Extent3] ON [Extent1].[person_id] = [Extent3].[person_id]
LEFT OUTER JOIN [dbo].[personT] AS [Extent4] ON [Extent1].[person_id] = [Extent4].[person_id]
WHERE ([Extent1].[person_id] = @p__linq__1) AND ([Extent2].[created] >= @p__linq__2) AND ([Extent3].[created] <= @p__linq__3) 
```

此外，通过提供的示例数据，SQL Profiler 仅注意到 SQL 调用的持续时间增加了 3 毫秒。

就个人而言，我认为任何抱怨不喜欢 ORM 层的输出 SQL 的人都应该重新使用存储过程和数据集。他们根本还没有准备好进化，需要在众所周知的烤箱里再呆几年。:)

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-08-19T10:35:11.983

有趣的讨论。到目前为止，我已经使用了 2 个 ORM 模型（NHibernate 和 LINQ-to-Entities）。以我的经验，总有一条线是你必须放弃 ORM 来生成 SQL 并求助于存储过程或视图来实现最佳可扩展查询。话虽如此，我个人认为 LINQ 在更规范化的数据库上效果更好，所有嵌套查询/连接都不是主要问题。在某些情况下，为了提高性能或可伸缩性，您必须使用 DB 服务器功能（例如，在 SQL 2008 SE 上的索引视图仅适用于查询提示）并且您根本不能使用 ORM（iBatis 除外？）。

当然，使用 linq 生成的这些嵌套连接/查询不会获得最佳性能或可伸缩性，但请不要忘记 LINQ（或 NHibernate）在任何项目中提供的优势和开发优势。当然，它必须有一些优点。

最后，虽然我冒着比较苹果和橘子的风险，但我想问的不是更多：您想要快速的网站开发（asp.net webforms、swing）还是对您的 HTML（asp.net mvc、RoR）进行更多控制？选择最适合您要求的东西。

我的2美分！

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-06-02T07:35:09.543

linq 生成的 SQL 非常高效。它可能看起来很笨重，但它考虑到了表和约束等的关系。在我看来，你应该盲目地使用 linq 命令而不用担心规模。自动生成的大型查询有很多好处。它避免了关系约束中的任何失误，并为错误/异常添加了自己的包装器。

但是，如果您想自己编写 SQL 并且仍然想在 ORM 的范围内工作，那么请尝试 iBatis [http://ibatis.apache.org/](http://ibatis.apache.org/)您必须自己编写 SQL 并加入，因此它可以让您完全控制在后端模型之上。

就个人而言，只需使用 SQLMetal 和 linq。除非您需要，否则不要担心性能和规模。

# http - HTTP 部分 GET 是一种可靠的机制吗？

> ID：924633
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-29T06:15:43.560
> 
>         
> 
> 标签：http, http-headers

HTTP 部分 GET 是一种可靠的机制吗？如果是这样，为什么现代浏览器似乎仍然从头开始而不是恢复下载？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T06:35:11.007

根据我的经验，此功能并非在所有 Web 服务器中都普遍存在。可能是因为它没有被 Web 客户端广泛使用。有点像 HTTP HEAD 请求，可能会也可能不会实现。与往常一样，YMMV 取决于所涉及的客户端和服务器。

下载恢复机制基于 HTTP 范围请求标头，该标头指定您想要的内容的哪一部分（请参见[此处](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.2)）。在过去的几年里，我并没有搞砸这么多，所以你可能会更好地做更多的谷歌研究。这是一篇[博客文章](http://kuza55.blogspot.com/2008/02/http-range-request-range-request.html)的链接，其中讨论了有关此功能的一些最新进展。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T06:20:36.080

每当我使用 wget 下载大文件时，我可能会中断它们并使用 -c 继续。我不记得曾经收到损坏的文件。Safari 允许您恢复（而不是重新启动）停止的下载，在那里也可以正常工作。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T06:55:45.257

是的，如果做得好（If-Match etag...），它是可靠的。

# vb.net - 存储库记录中发生了奇怪的奇怪事情！

> ID：924640
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T06:17:23.493
> 
>         
> 
> 标签：vb.net, subsonic

亚音速 2.2。我使用存储库记录模式，其中一个表“约会”的约会Id 作为自动递增的整数。

我正在尝试更新它，但是当我用完全不同的东西更新字段时，脏列始终为零，并且出现异常。

**System.NullReferenceException：对象引用未设置为对象的实例。在 SubSonic.DataService.ExecuteQuery(QueryCommand cmd) 在 SubSonic.SubSonicRepository.Update[T](RepositoryRecord `1 item, String userName) at janji.Janji.Data.DB.Update[T](RepositoryRecord`1 item) 在 A:\Source\VS2008\Web\Apps\janji\janji\Classes\DAL\AllStructs.vb:line 197在 A:\Source\VS2008\Web\Apps\janji\janji\UI\Appt.aspx.vb:line 343 中的 janji.WebForm4.SaveData()** 

这是我的代码：

```
 Try
        If Appointment.AppointmentId > 0 Then

            Appointment.AddressName = uxHotel.Text
            Appointment.Address = uxAddress.Text
            Appointment.AppStartTime = Date.Parse(uxApptDate.SelectedDate.Value.ToShortDateString + " " + uxApptStartTime.SelectedDate.Value.ToShortTimeString)
            Appointment.ApptEndTime = Date.Parse(uxApptDate.SelectedDate.Value.ToShortDateString + " " + uxApptEndTime.SelectedDate.Value.ToShortTimeString)
            Appointment.Completed = uxCOmpleted.Checked
            Appointment.DropNumber = uxDropNum.Text
            Appointment.Total = 0
            Appointment.EmployeeId = 0
            Appointment.Model = uxModel.Text
            Appointment.DropAmount = Decimal.Parse(uxDropAmount.SelectedValue)
            Appointment.RoomNumber = uxRoom.Text

            'If Appointment.DirtyColumns.Count > 0 Then
            Janji.Data.DB.Update(Of Janji.Data.Appointment)(Appointment)
            'End If
        End If
    Catch ex As Exception
        _ErrorMessage = ex.ToString
        RetVal = False
        lErrors.Text = _ErrorMessage
        lErrors.Visible = True
    End Try 
```

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T07:30:14.407

您正在使用我们提供的结构而不是实例化 Appointment 对象。做你在这里所做的一切，但创建一个 Appointment 实例并为其分配值。然后将该实例传递给存储库。

# c++ - 不推荐使用增强精神标题

> ID：924642
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2009-05-29T06:19:16.190
> 
>         
> 
> 标签：c++, boost, boost-spirit

我正在关注 boost::spirit 的快速入门指南，当我包含以下内容时收到编译器警告：“此标头已弃用。请使用：boost/spirit/include/classic_core.hpp” 我应该担心这个吗？

（快速入门指南：[http](http://spirit.sourceforge.net/distrib/spirit_1_8_5/libs/spirit/doc/quick_start.html) ://spirit.sourceforge.net/distrib/spirit_1_8_5/libs/spirit/doc/quick_start.html ，我试图在这里编译的程序的完整源代码：[http://spirit.sourceforge。 net/distrib/spirit_1_8_5/libs/spirit/example/fundamental/number_list.cpp](http://spirit.sourceforge.net/distrib/spirit_1_8_5/libs/spirit/example/fundamental/number_list.cpp)）

编辑：此外，当我尝试使用推荐的 classic_core.hpp 和 classic_push_back_actor.hpp 头文件进行编译时，我收到以下编译器错误：

```
test7.cpp: In function 'bool parse_numbers(const char*, __gnu_debug_def::vector<double, std::allocator<double> >&)':
test7.cpp:18: error: 'real_p' was not declared in this scope
test7.cpp:18: error: 'push_back_a' was not declared in this scope
test7.cpp:23: error: 'space_p' was not declared in this scope
test7.cpp:23: error: 'parse' was not declared in this scope 
```

* * *

## 回答 #1

> 赞同：11
> 
>             
> 
> 时间：2009-05-29T06:33:42.583

[编辑：] 原来的答案已经严重过时了；特别是链接已损坏。Boost 的当前版本（自 2012-02-24 起）是 1.49.0。

提到的警告是`#include <boost/spirit.hpp>`不推荐使用的标头的结果；但是网络上的旧示例使用这种形式。要开始使用，请尝试[boost 教程](http://www.boost.org/doc/libs/1_48_0/libs/spirit/doc/html/spirit/qi/tutorials.html)。一旦您看到正确的包含和命名空间，大多数旧示例都可以轻松转换。

[旧答案：]

您必须使用 boost 1.39 或更高版本（通过 SVN）。本演示文稿应有助于：

*   [http://www.boostcon.com/site-media/var/spene/sphwiki/attachment/2009/05/07/SpiritV2.pdf](http://www.boostcon.com/site-media/var/sphene/sphwiki/attachment/2009/05/07/SpiritV2.pdf)

简而言之，有一种全新的做事方式，这些是要使用的命名空间：

*   `boost::spirit:qi`（对于解析器）

*   `boost::spirit::karma`（对于生成器库）

官方版本是 1.40，所以到那时文档可能会更新。

编辑：[boost SVN 存储库中的文档](http://svn.boost.org/svn/boost/trunk/libs/spirit/doc/html/index.html)正在处理中，可能以更忠实的方式反映新架构。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T12:36:01.823

当您包含经典标头时，解析器位于 boost::spirit::classic 命名空间中。尝试：

> 使用命名空间 boost::spirit::classic;

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T06:26:34.700

当一个库指示一个类/标题/方法/等时。已弃用，这意味着库的维护者很可能会停止维护该功能，并可能在将来将其删除。我建议尽早切换到建议的标题，这样可以避免将来头疼。

新标头处理功能的方式可能略有不同，因此您可能需要进行一些代码更改。

（我对boost了解不多，这只是一般评论）

# subsonic - GetTableSchema() 由于其保护级别而无法访问

> ID：924647
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T06:20:58.623
> 
>         
> 
> 标签：subsonic

根据 Scott Kohl 出色的 SubSonic 文档，尝试使用以下方法在 SubSonic 中实例化 Query（因为它显然不需要像构造 Query 对象的其他方法那样访问数据库）。问题是，生成的代码将此方法定义为私有 - 不是公共的。有一个更好的方法吗？最近是否从公共更改为私人？为什么？

谢谢。

```
SubSonic.Query query1 = new SubSonic.Query(TradeBender.Item.GetTableSchema()); 
```

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T07:25:06.413

您也可以尝试我正在尝试构建的新 wiki。它还没有完全发布 - 但到达那里：

[http://subsonicproject.com/docs](http://subsonicproject.com/docs)

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T06:33:27.140

SubSonic.Query 有点过时了。查看 SQLQuery 类。这是示例代码：

```
 Dim q As SubSonic.SqlQuery() = New SubSonic.Select().From("Table").Where("Field").IsEqualTo(1)

    ' Or

    Dim BookList As Generic.List(Of NorthWind.Data.Book) = New SubSonic.Select(). _
        From(NorthWind.Data.Tables.Book).Where("Field"). _
        IsEqualTo(1).ExecuteTypedList(Of NorthWind.Data.Book)() 
```

# makefile - $< 和 $@ 在 Makefile 中代表什么？

> ID：924652
> 
>         
> 
> 赞同：13
> 
>         
> 
> 时间：2009-05-29T06:23:10.053
> 
>         
> 
> 标签：makefile

任何人都可以解释一下和的`$<`含义`$@`吗`Makefile`？

* * *

## 回答 #1

> 赞同：23
> 
>             
> 
> 时间：2009-05-29T06:31:19.500

`$<`计算为 make 规则中的第一个“先决条件”，并`$@`计算为 make 规则中的“目标”。

这是一个例子：

```
file.o : file.c
        $(CC) -c $(CFLAGS) $(CPPFLAGS) $< -o $@ 
```

在这种情况下，将`$<`被替换为`file.c`和。`$@``file.o`

这些在像这样的通用规则中更有用：

```
%.o : %.c
        $(CC) -c $(CFLAGS) $(CPPFLAGS) $< -o $@ 
```

有关详细信息，请参阅[本手册](http://www.gnu.org/software/make/manual/make.html#Automatic-Variables)。

* * *

## 回答 #2

> 赞同：7
> 
>             
> 
> 时间：2009-05-29T06:34:07.263

`$@`是当前规则的目标。
`$<`是当前规则的第一个先决条件（“源”）的名称。

例如：

```
.c.o:
        $(CC) -c $(CFLAGS) -o $@ $< 
```

这将扩展为类似以下的命令：

```
gcc -c -Wall -o foo.o foo.c 
```

另见[GNU make 手册第 10.5.3 节，“自动变量”](http://www.gnu.org/software/make/manual/make.html#Automatic-Variables)。

# authentication - Silverlight 导航和身份验证服务

> ID：924658
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-29T06:25:36.870
> 
>         
> 
> 标签：authentication, silverlight-3.0, navigation

我正在使用导航应用程序模板创建银光应用程序。它供内部使用，因此使用 Windows 验证。有一个仪表板页面，其中显示了由登录用户 ID 过滤的几条记录。为了获取用户 ID（它是一个 int），我通过覆盖 GetAuthenticatedUser 并传递用户名（来自 IPrincipal）来调用 Web 服务。此服务需要一些时间才能返回详细信息。

当我导航到仪表板应用程序时，它完全呈现没有数据，因为用户服务是异步操作，我无法让呈现等到我的 GetAuthenticatedUser 完全完成。所以我创建了一个登录页面，它只显示一个进度条，直到我获得用户对象然后导航到仪表板。如果有人尝试使用 URL 直接访问仪表板，我希望他们导航回登录页面。

所以在仪表板构造函数中我添加了以下代码

```
 if (!UserService.Current.User.IsAuthenticated)
        {
            MessageBox.Show("Navigating away");
            Frame objContainer = this.Parent as Frame;
            objContainer.Navigate(new Uri("/Views/Login.xaml", UriKind.Relative));
        } 
```

虽然我收到消息框提示，但它实际上并没有带我进入登录页面，而是停留在仪表板页面中。我还尝试将此代码放在 OnNavigatedTo 覆盖中，但没有成功。

我也尝试使用 NavigationService 而不是 Frame，如下所示，没有运气

```
 if (!UserService.Current.User.IsAuthenticated)
        {
            MessageBox.Show("Navigating away");
            this.NavigationService.Navigate(new Uri("/Views/Login.xaml", UriKind.Relative));
        } 
```

它仍然不起作用。有谁知道只有在我拥有完全有效的用户对象时才能使某些页面可访问？如果他们试图在没有这个的情况下访问受限页面，我希望他们能够重定向到登录页面，这如何实现？

我正在使用 Silverlight 3 Beta

什里达尔

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-31T07:59:28.423

我终于找到了解决这个问题的方法。在 Constructo 中，我连接了 Loaded 事件处理程序，在事件处理程序中，我正在导航到另一个页面，现在它工作正常。

```
 public Dashboard()
    {
        InitializeComponent();
        this.Loaded += new RoutedEventHandler(Dashboard_Loaded);
    }

    void Dashboard_Loaded(object sender, RoutedEventArgs e)
    {
        if (!UserService.Current.User.IsAuthenticated)
        {
            Frame objContainer = this.Parent as Frame;
            if (objContainer != null)
            {
                objContainer.Navigate(new Uri("/Views/Login.xaml", UriKind.Relative));
            }
        }
    } 
```

这段代码工作得很好！

什里达尔

# delphi - 如何将对象转换为泛型？

> ID：924659
> 
>         
> 
> 赞同：7
> 
>         
> 
> 时间：2009-05-29T06:26:32.703
> 
>         
> 
> 标签：delphi, generics, delphi-2009

我正在尝试将返回的基础对象转换为特定的泛型类型。我认为下面的代码应该可以工作，但会产生内部编译器错误，还有其他方法可以做到这一点吗？

```
type
  TPersistGeneric<T> = class
  private
  type
    TPointer = ^T;
  public
    class function  Init : T;
  end;

class function  TPersistGeneric<T>.Init : T;
var
  o : TXPersistent; // root class
begin
  case PTypeInfo(TypeInfo(T))^.Kind of
    tkClass : begin
                // xpcreate returns txpersistent, a root class of T
                o := XPCreate(GetTypeName(TypeInfo(T))); // has a listed of registered classes
                result := TPointer(pointer(@o))^;
              end;
    else
      result := Default(T);
  end;
end; 
```

* * *

## 回答 #1

> 赞同：15
> 
>             
> 
> 时间：2009-05-29T10:45:59.533

我正在使用一个类型转换帮助器类，它执行类型转换并检查这两个类是否兼容。

```
class function TPersistGeneric<T>.Init: T;
var
  o : TXPersistent; // root class
begin
  case PTypeInfo(TypeInfo(T))^.Kind of
    tkClass : begin
                // xpcreate returns txpersistent, a root class of T
                o := XPCreate(GetTypeName(TypeInfo(T))); // has a listed of registered classes
                Result := TTypeCast.DynamicCast<TXPersistent, T>(o);
              end;
    else
      result := Default(T);
  end; 
```

这是课程：

```
type
  TTypeCast = class
  public
    // ReinterpretCast does a hard type cast
    class function ReinterpretCast<ReturnT>(const Value): ReturnT;
    // StaticCast does a hard type cast but requires an input type
    class function StaticCast<T, ReturnT>(const Value: T): ReturnT;
    // DynamicCast is like the as-operator. It checks if the object can be typecasted
    class function DynamicCast<T, ReturnT>(const Value: T): ReturnT;
  end;

class function TTypeCast.ReinterpretCast<ReturnT>(const Value): ReturnT;
begin
  Result := ReturnT(Value);
end;

class function TTypeCast.StaticCast<T, ReturnT>(const Value: T): ReturnT;
begin
  Result := ReinterpretCast<ReturnT>(Value);
end;

class function TTypeCast.DynamicCast<T, ReturnT>(const Value: T): ReturnT;
var
  TypeT, TypeReturnT: PTypeInfo;
  Obj: TObject;
  LClass: TClass;
  ClassNameReturnT, ClassNameT: string;
  FoundReturnT, FoundT: Boolean;
begin
  TypeT := TypeInfo(T);
  TypeReturnT := TypeInfo(ReturnT);
  if (TypeT = nil) or (TypeReturnT = nil) then
    raise Exception.Create('Missing Typeinformation');
  if TypeT.Kind <> tkClass then
    raise Exception.Create('Source type is not a class');
  if TypeReturnT.Kind <> tkClass then
    raise Exception.Create('Destination type is not a class');

  Obj := TObject(Pointer(@Value)^);
  if Obj = nil then
    Result := Default(ReturnT)
  else
  begin
    ClassNameReturnT := UTF8ToString(TypeReturnT.Name);
    ClassNameT := UTF8ToString(TypeT.Name);
    LClass := Obj.ClassType;
    FoundReturnT := False;
    FoundT := False;
    while (LClass <> nil) and not (FoundT and FoundReturnT) do
    begin
      if not FoundReturnT and (LClass.ClassName = ClassNameReturnT) then
        FoundReturnT := True;
      if not FoundT and (LClass.ClassName = ClassNameT) then
        FoundT := True;
      LClass := LClass.ClassParent;
    end;
    //if LClass <> nil then << TObject doesn't work with this line
    if FoundT and FoundReturnT then
      Result := ReinterpretCast<ReturnT>(Obj)
    else
    if not FoundReturnT then
      raise Exception.CreateFmt('Cannot cast class %s to %s',
                                [Obj.ClassName, ClassNameReturnT])
    else
      raise Exception.CreateFmt('Object (%s) is not of class %s',
                                [Obj.ClassName, ClassNameT]);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2013-02-20T10:03:05.363

Andreas 的上述回答非常出色。它确实帮助我在 Delphi 中使用泛型。请原谅我安德烈亚斯，因为我想知道 DynamicCast 是否有点复杂。如果我错了，请纠正我，但以下内容应该更简洁、安全、快速（无字符串比较）并且仍然具有功能性。

实际上，我所做的只是在 DynamicCast 类型参数上使用类约束，以允许编译器做一些工作（因为原始的总是除了非类参数），然后使用 TObject.InheritsFrom 函数来检查类型兼容性。

我还发现 TryCast 函数的想法非常有用（无论如何，这对我来说是一项常见任务！）

这当然是除非我错过了在类父类中寻找匹配名称的地方......恕我直言，考虑到类型名称可能与不同范围内的不兼容类匹配，这有点危险。

无论如何，这是我的代码（适用于 Delphi XE3... D2009 兼容版本的 TryCast 紧随其后）。

```
type
  TTypeCast = class
  public
    // ReinterpretCast does a hard type cast
    class function ReinterpretCast<ReturnT>(const Value): ReturnT;
    // StaticCast does a hard type cast but requires an input type
    class function StaticCast<T, ReturnT>(const Value: T): ReturnT;
    // Attempt a dynamic cast, returning True if successful
    class function TryCast<T, ReturnT: class>(const Value: T; out Return: ReturnT): Boolean;
    // DynamicCast is like the as-operator. It checks if the object can be typecasted
    class function DynamicCast<T, ReturnT: class>(const Value: T): ReturnT;
  end;

implementation

uses
  System.SysUtils;

class function TTypeCast.ReinterpretCast<ReturnT>(const Value): ReturnT;
begin
  Result := ReturnT(Value);
end;

class function TTypeCast.StaticCast<T, ReturnT>(const Value: T): ReturnT;
begin
  Result := ReinterpretCast<ReturnT>(Value);
end;

class function TTypeCast.TryCast<T, ReturnT>(const Value: T; out Return: ReturnT): Boolean;
begin
  Result := (not Assigned(Value)) or Value.InheritsFrom(ReturnT);
  if Result then
    Return := ReinterpretCast<ReturnT>(Value);
end;

class function TTypeCast.DynamicCast<T, ReturnT>(const Value: T): ReturnT;
begin
  if not TryCast<T, ReturnT>(Value, Result) then
    //Value will definately be assigned is TryCast returns false
    raise EInvalidCast.CreateFmt('Invalid class typecast from %s(%s) to %s',
      [T.ClassName, Value.ClassName, ReturnT.ClassName]);
end; 
```

正如所承诺的 D2009 版本（需要一些小的努力才能进入 ReturnT 类）。

```
class function TTypeCast.TryCast<T, ReturnT>(const Value: T; out Return: ReturnT): Boolean;
var
  LReturnTypeInfo: PTypeInfo;
  LReturnClass: TClass;
begin
  Result := True;
  if not Assigned(Value) then
    Return := Default(ReturnT)
  else
  begin
    LReturnTypeInfo := TypeInfo(ReturnT);
    LReturnClass := GetTypeData(LReturnTypeInfo).ClassType;
    if Value.InheritsFrom(LReturnClass) then
      Return := ReinterpretCast<ReturnT>(Value)
    else
      Result := False;
  end;
end; 
```

# c++ - 为什么未声明 NULL？

> ID：924664
> 
>         
> 
> 赞同：96
> 
>         
> 
> 时间：2009-05-29T06:30:20.497
> 
>         
> 
> 标签：c++, syntax, nodes

当我尝试编译这段代码时，我遇到了这个结构构造函数的问题：

```
typedef struct Node
{
    Node( int data ) //
    {
        this->data = data;
        previous = NULL; // Compiler indicates here
        next = NULL;
    }

    int data;
    Node* previous;
    Node* next;
} NODE; 
```

当我来的时候会发生这个错误：

```
\linkedlist\linkedlist.h||In constructor `Node::Node(int)':|
\linkedlist\linkedlist.h|9|error: `NULL' was not declared in this scope|
    ||=== Build finished: 1 errors, 0 warnings ===| 
```

最后一个问题是结构，但是当它在我的 main.cpp 中时它运行良好，这次它在头文件中并且给了我这个问题。我正在使用 Code::Blocks 来编译这段代码

* * *

## 回答 #1

> 赞同：151
> 
>             
> 
> 时间：2009-05-29T06:34:20.587

`NULL`不是 C 或 C++ 语言中的内置常量。事实上，在 C++ 中它或多或少已经过时了，只需使用普通文字`0`，编译器会根据上下文做正确的事情。

在较新的 C++（C++11 及更高版本）中，使用`nullptr`（如评论中所指出的，谢谢）。

否则，添加

`#include <[stddef.h](http://en.wikipedia.org/wiki/Stddef.h)>`

得到`NULL`定义。

* * *

## 回答 #2

> 赞同：40
> 
>             
> 
> 时间：2009-05-29T12:52:31.477

请务必使用 NULL。无论如何，它只是#defined 为 0，并且在语义上将它与整数 0 区分开来非常有用。

使用 0（因此为 NULL）存在问题。例如：

```
void f(int);
void f(void*);

f(0); // Ambiguous. Calls f(int). 
```

下一版本的 C++ (C++0x) 包括`nullptr`修复此问题。

```
f(nullptr); // Calls f(void*). 
```

* * *

## 回答 #3

> 赞同：16
> 
>             
> 
> 时间：2009-05-29T06:34:55.407

`NULL`不是核心 C++ 语言的本机部分，但它是标准库的一部分。您需要包含包含其定义的标准头文件之一。`#include <cstddef>`或者`#include <stddef.h>`应该足够了。

`NULL`如果包含`cstddef`or ，则保证 的定义可用`stddef.h`。不能保证，但如果您包含许多其他标准标头，您很可能会包含它的定义。

* * *

## 回答 #4

> 赞同：15
> 
>             
> 
> 时间：2009-05-29T06:34:16.657

您是否在此文件中包含“stdlib.h”或“cstdlib”？NULL 在 stdlib.h/cstdlib 中定义

```
#include <stdlib.h> 
```

或者

```
#include <cstdlib>  // This is preferrable for c++ 
```

* * *

## 回答 #5

> 赞同：4
> 
>             
> 
> 时间：2009-05-29T06:38:56.413

不要使用`NULL`，C++ 允许你使用朴素的`0`代替：

```
previous = 0;
next = 0; 
```

而且，与 C++11 一样，您通常不应该使用任何一个，`NULL` *或者* `0`因为它为您提供了更适合该任务`nullptr`的 type 。`std::nullptr_t`

# java - java - 如何使用jasper报告填充从Java子报告调用的图表的系列颜色

> ID：924665
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-29T06:31:12.963
> 
>         
> 
> 标签：java, charts, jasper-reports

我正在尝试使用 JasperReports 更改从 Java 中的子报表调用的图表的系列颜色

```
JRChartPlot pl;
JRFillObjectFactory fac;
JRFillChartPlot plot = new JRFillChartPlot(pl, fac); 
```

如何将 JRChartPLot 实例化为我的 JRFillChartPlot 构造函数？前面的代码给了我空指针异常

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T07:32:09.020

您需要使用 JRChartPlotFactoryclass 和 createObject 方法来实例化 JRChartPlot。可能，这个[源代码](http://www.java2s.com/Open-Source/Java-Document/Report/jasperreports-2.0.1/net/sf/jasperreports/engine/xml/JRChartPlotFactory.java.htm)可能有助于理解如何使用。

# c# - C# 如何检查 URL 是否存在/是否有效？

> ID：924679
> 
>         
> 
> 赞同：127
> 
>         
> 
> 时间：2009-05-29T06:35:15.373
> 
>         
> 
> 标签：c#, .net, url-validation

我正在 Visual c# 2005 中制作一个简单的程序，用于在 Yahoo! 上查找股票代码。Finance，下载历史数据，然后绘制指定股票代码的价格历史。

我知道获取数据所需的确切 URL，如果用户输入一个现有的股票代码（或至少一个带有 Yahoo! Finance 上的数据的代码），它工作得非常好。但是，如果用户制作股票代码，我会遇到运行时错误，因为程序试图从不存在的网页中提取数据。

我正在使用 WebClient 类，并使用 DownloadString 函数。我查看了 WebClient 类的所有其他成员函数，但没有看到可以用来测试 URL 的任何东西。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：151
> 
>             
> 
> 时间：2010-09-28T00:20:16.417

这是此解决方案的另一种实现：

```
using System.Net;

///
/// Checks the file exists or not.
///
/// The URL of the remote file.
/// True : If the file exits, False if file not exists
private bool RemoteFileExists(string url)
{
    try
    {
        //Creating the HttpWebRequest
        HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
        //Setting the Request method HEAD, you can also use GET too.
        request.Method = "HEAD";
        //Getting the Web Response.
        HttpWebResponse response = request.GetResponse() as HttpWebResponse;
        //Returns TRUE if the Status code == 200
        response.Close();
        return (response.StatusCode == HttpStatusCode.OK);
    }
    catch
    {
        //Any exception will returns false.
        return false;
    }
} 
```

来自： http: [//www.dotnetthoughts.net/2009/10/14/how-to-check-remote-file-exists-using-c/](http://www.dotnetthoughts.net/2009/10/14/how-to-check-remote-file-exists-using-c/)

* * *

## 回答 #2

> 赞同：119
> 
>             
> 
> 时间：2009-05-29T06:38:50.750

您可以发出[“HEAD”](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.4)请求而不是“GET”吗？因此，无需下载内容即可测试 URL：

```
// using MyClient from linked post
using(var client = new MyClient()) {
    client.HeadOnly = true;
    // fine, no content downloaded
    string s1 = client.DownloadString("http://google.com");
    // throws 404
    string s2 = client.DownloadString("http://google.com/silly");
} 
```

你会`try`/`catch`周围`DownloadString`来检查错误；没有错误？它存在...

* * *

使用 C# 2.0 (VS2005)：

```
private bool headOnly;
public bool HeadOnly {
    get {return headOnly;}
    set {headOnly = value;}
} 
```

和

```
using(WebClient client = new MyClient())
{
    // code as before
} 
```

* * *

## 回答 #3

> 赞同：38
> 
>             
> 
> 时间：2011-08-24T17:54:47.477

这些解决方案都很好，但是他们忘记了可能还有其他状态码而不是 200 OK。这是我在生产环境中用于状态监控等的解决方案。

如果目标页面存在 url 重定向或其他条件，则使用此方法返回 true。此外，GetResponse() 将引发异常，因此您不会得到它的 StatusCode。您需要捕获异常并检查 ProtocolError。

任何 400 或 500 状态码都将返回 false。所有其他都返回 true。此代码很容易修改，以满足您对特定状态代码的需求。

```
/// <summary>
/// This method will check a url to see that it does not return server or protocol errors
/// </summary>
/// <param name="url">The path to check</param>
/// <returns></returns>
public bool UrlIsValid(string url)
{
    try
    {
        HttpWebRequest request = HttpWebRequest.Create(url) as HttpWebRequest;
        request.Timeout = 5000; //set the timeout to 5 seconds to keep the user from waiting too long for the page to load
        request.Method = "HEAD"; //Get only the header information -- no need to download any content

        using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
        {
            int statusCode = (int)response.StatusCode;
            if (statusCode >= 100 && statusCode < 400) //Good requests
            {
                return true;
            }
            else if (statusCode >= 500 && statusCode <= 510) //Server Errors
            {
                //log.Warn(String.Format("The remote server has thrown an internal error. Url is not valid: {0}", url));
                Debug.WriteLine(String.Format("The remote server has thrown an internal error. Url is not valid: {0}", url));
                return false;
            }
        }
    }
    catch (WebException ex)
    {
        if (ex.Status == WebExceptionStatus.ProtocolError) //400 errors
        {
            return false;
        }
        else
        {
            log.Warn(String.Format("Unhandled status [{0}] returned for url: {1}", ex.Status, url), ex);
        }
    }
    catch (Exception ex)
    {
        log.Error(String.Format("Could not test url {0}.", url), ex);
    }
    return false;
} 
```

* * *

## 回答 #4

> 赞同：9
> 
>             
> 
> 时间：2009-05-29T07:07:07.837

如果我正确理解您的问题，您可以使用这样的小方法为您提供 URL 测试的结果：

```
WebRequest webRequest = WebRequest.Create(url);  
WebResponse webResponse;
try 
{
  webResponse = webRequest.GetResponse();
}
catch //If exception thrown then couldn't get response from address
{
  return 0;
} 
return 1; 
```

您可以将上述代码包装在一个方法中并使用它来执行验证。我希望这能回答你提出的问题。

* * *

## 回答 #5

> 赞同：6
> 
>             
> 
> 时间：2016-10-01T22:07:27.697

试试这个（确保你使用 System.Net）：

```
public bool checkWebsite(string URL) {
   try {
      WebClient wc = new WebClient();
      string HTMLSource = wc.DownloadString(URL);
      return true;
   }
   catch (Exception) {
      return false;
   }
} 
```

当调用 checkWebsite() 函数时，它会尝试获取传递给它的 URL 的源代码。如果获取源代码，则返回 true。如果不是，则返回 false。

代码示例：

```
//The checkWebsite command will return true:
bool websiteExists = this.checkWebsite("https://www.google.com");

//The checkWebsite command will return false:
bool websiteExists = this.checkWebsite("https://www.thisisnotarealwebsite.com/fakepage.html"); 
```

* * *

## 回答 #6

> 赞同：4
> 
>             
> 
> 时间：2011-05-08T09:23:36.687

此解决方案似乎很容易遵循：

```
public static bool isValidURL(string url) {
    WebRequest webRequest = WebRequest.Create(url);
    WebResponse webResponse;
    try
    {
        webResponse = webRequest.GetResponse();
    }
    catch //If exception thrown then couldn't get response from address
    {
        return false ;
    }
    return true ;
} 
```

* * *

## 回答 #7

> 赞同：4
> 
>             
> 
> 时间：2018-03-12T07:09:16.897

我一直发现异常处理起来要慢得多。

也许一种不那么密集的方法会产生更好、更快的结果？

```
public bool IsValidUri(Uri uri)
{

    using (HttpClient Client = new HttpClient())
    {

    HttpResponseMessage result = Client.GetAsync(uri).Result;
    HttpStatusCode StatusCode = result.StatusCode;

    switch (StatusCode)
    {

        case HttpStatusCode.Accepted:
            return true;
        case HttpStatusCode.OK:
            return true;
         default:
            return false;
        }
    }
} 
```

然后只需使用：

```
IsValidUri(new Uri("http://www.google.com/censorship_algorithm")); 
```

* * *

## 回答 #8

> 赞同：4
> 
>             
> 
> 时间：2018-06-21T08:39:32.130

```
WebRequest request = WebRequest.Create("http://www.google.com");
try
{
     request.GetResponse();
}
catch //If exception thrown then couldn't get response from address
{
     MessageBox.Show("The URL is incorrect");`
} 
```

* * *

## 回答 #9

> 赞同：3
> 
>             
> 
> 时间：2012-05-01T04:43:23.277

这是另一种选择

```
public static bool UrlIsValid(string url)
{
    bool br = false;
    try {
        IPHostEntry ipHost = Dns.Resolve(url);
        br = true;
    }
    catch (SocketException se) {
        br = false;
    }
    return br;
} 
```

* * *

## 回答 #10

> 赞同：3
> 
>             
> 
> 时间：2021-11-04T07:19:56.033

很多答案都比 HttpClient 旧（我认为它是在 Visual Studio 2013 中引入的）或没有 async/await 功能，所以我决定发布我自己的解决方案：

```
private static async Task<bool> DoesUrlExists(String url)
{
    try
    {
        using (HttpClient client = new HttpClient())
        {
            //Do only Head request to avoid download full file
            var response = await client.SendAsync(new HttpRequestMessage(HttpMethod.Head, url));

            if (response.IsSuccessStatusCode) {
                //Url is available is we have a SuccessStatusCode
                return true;
            }
            return false;
        }                
    } catch {
            return false;
    }
} 
```

我使用`HttpClient.SendAsync`with`HttpMethod.Head`只发出一个头部请求，而不是下载整个文件。就像 David 和 Marc 已经说过的那样，不仅 http 200 可以，所以我`IsSuccessStatusCode`习惯于允许所有成功状态代码。

* * *

## 回答 #11

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T06:45:12.173

Web 服务器以指示请求结果的 HTTP 状态代码进行响应，例如 200（有时 202）表示成功，404 - 未找到等（参见[此处](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)）。假设 URL 的服务器地址部分是正确的并且您没有收到套接字超时，那么异常很可能会告诉您 HTTP 状态代码不是 200。我建议检查异常的类并查看异常是否携带HTTP 状态码。

IIRC - 有问题的调用会引发 WebException 或后代。检查类名以查看是哪一个并将调用包装在 try 块中以捕获条件。

* * *

## 回答 #12

> 赞同：1
> 
>             
> 
> 时间：2012-02-20T05:19:01.190

我有一种更简单的方法来确定 URL 是否有效。

```
if (Uri.IsWellFormedUriString(uriString, UriKind.RelativeOrAbsolute))
{
   //...
} 
```

* * *

## 回答 #13

> 赞同：1
> 
>             
> 
> 时间：2016-09-16T10:18:06.207

继已经给出的示例之后，我想说，最好的做法是也将响应包装在这样的 using 中

```
 public bool IsValidUrl(string url)
    {
         try
         {
             var request = WebRequest.Create(url);
             request.Timeout = 5000;
             request.Method = "HEAD";

             using (var response = (HttpWebResponse)request.GetResponse())
             {
                response.Close();
                return response.StatusCode == HttpStatusCode.OK;
            }
        }
        catch (Exception exception)
        { 
            return false;
        }
   } 
```

# javascript - 为什么 HourGlass 不能在 Google Chrome 中处理同步 AJAX 请求？

> ID：924681
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T06:36:17.057
> 
>         
> 
> 标签：javascript, ajax, google-chrome

我正在执行一个函数，首先我将光标设置为等待状态（沙漏），然后我发送一个同步 AJAX 请求。得到响应后，我将光标设置为默认状态。

实际代码是这个..

// 测试 smtp 设置函数 TestSettings() { var buttonparams= new Object();

```
buttonparams.IsCommandButton = true;
buttonparams.ButtonId = "testsettings";
buttonparams.ButtonText = "Sending Test Mail...";
buttonparams.ButtonOrigText = "Test Settings";

if(buttonparams.IsCommandButton == true)
    HandleButtonStatus(true, buttonparams);

var request = function()
{
    var ret = SendForm(buttonparams);

    alert(ret);

}
window.setTimeout(request, 0); 
```

}

函数 SendForm(pButtonParams) { var http; 变量表单数据；

```
http = yXMLHttpRequest();

http.open("POST", "./", false);
http.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"); 
http.setRequestHeader("Req-Type", "ajax");
formdata = xEncodePair("_object", "PrefMgr")+ "&";
formdata += xEncodePair("_action", "SmtpTest")+ "&";
formdata += GetEncodedFormData();   

http.send(formdata);

if(http.status == 200)
{   
    if(pButtonParams.IsCommandButton == true)
        HandleButtonStatus(false, pButtonParams);

    return (http.responseText);
}   
else
{

    return ("Error " + http.status + ": " + http.statusText);   
} 
```

}

函数 HandleButtonStatus(pIsButtonStatusChange, pButtonParams) { var button = yById(pButtonParams.ButtonId);

```
if(pIsButtonStatusChange)
{
        document.body.style.cursor = "wait";
    button.value = pButtonParams.ButtonText;
    button.disabled = true;

}
else
{
    document.body.style.cursor = "default";
    button.disabled = false;
    button.value = pButtonParams.ButtonOrigText;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T08:02:26.073

尝试分配：

```
var st = document.body.style; 
```

然后`st`在两个函数中引用。这可能是 AJAX 回调函数中的范围问题。

编辑：使用回调函数恢复光标形状。不要忘记在 AJAX 调用失败时也这样做。

# asp.net - 有没有使用 MVP 模式的好的开源 ASP.NET 应用程序

> ID：924687
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T06:43:21.067
> 
>         
> 
> 标签：asp.net, asp.net-mvc, mvp

我正在尝试将现有的 Web 表单应用程序升级到即将推出的框架，并根据新的业务需求重写几个工作流程。我想在这个项目中介绍基于 TDD 的开发，但经过一些调查发现 ASP.NET MVC 对我没有帮助，因为我的 Web 现有应用程序正在使用大量 Infragistics UltraWebGrid 控件进行分组、分页、列移动等，并且没有好的选择ASP.NET MVC 世界中的网格。我还需要在这个版本中支持黑莓。因此，我计划在同一个项目中将 MVP 用于桌面客户端，将 MVC 用于黑莓客户端。  

我想知道是否有人在他们的项目中做过类似的事情，并使用 MVP 模式链接到任何好的开源 asp.net 应用程序。我不想使用 WCSF，因为它太重了。我看到了他们的 MVPBundle 示例应用程序，但它缺乏对 IoC（Unity 或 StructureMap）、Mocking 框架等现代工具的使用。  

问候， 苏尼尔

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T08:07:34.953

[Nerd Dinner](http://www.nerddinner.com/)的[最新版本](http://nerddinner.codeplex.com/)在ASP.NET MVC 应用程序中具有[移动支持。](http://www.hanselman.com/blog/MixMobileWebSitesWithASPNETMVCAndTheMobileBrowserDefinitionFile.aspx)

我不确定黑莓对 JS 的支持，但有很多网格/中继器类型的控件和机制可以使用 jQuery 或即将推出的[ASP.NET AJAX 4](http://aspnet.codeplex.com/Wiki/View.aspx?title=AJAX)模板控件。

# .net - 如何检测我的应用程序是否可以使用另一个程序集

> ID：924688
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T06:44:13.547
> 
>         
> 
> 标签：.net, exception, assemblies

我有一个调用 Windows winforms 应用程序的命令行 winforms 可执行文件。

有时 Ops 在部署应用程序时忘记在命令行 exe 中包含 windows exe，从而导致错误。

我该如何优雅地处理它并显示一个不错的错误，而不是：

> 未处理的异常：System.IO.FileNotFoundException：无法加载文件或汇编程序“MyappFoo，版本=5.1.4303.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。文件名：AppFoo.Program.Main(String[] args) 处的“MyAppFoo，版本=5.1.4303.0，Culture=neutral，PublicKeyToken=null”
> 
>   
>   
> 
> 警告：程序集绑定日志记录已关闭。要启用程序集绑定失败日志记录，请将注册表值 [HKLM\Software\M icrosoft\Fusion!EnableLog] (DWORD) 设置为 1。注意：与程序集绑定失败日志记录相关的一些性能损失。要关闭此功能，请删除注册表值 [HKLM\Software\Microsoft\Fus ion!EnableLog]。

编辑：

为了澄清一点，我如何拦截 FileNotFoundException，当

```
static int Main(string[] args)
{
   try
   {
      Console.WriteLine"MyPhooApp Command Line (c) PhooSoft 2008");
   }
   catch (System.IO.FileNotFoundException fe)
   {
      Console.WriteLine("Unable to find foo.exe");
      return -1;
   }
} 
```

也不写。

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-05-29T06:52:45.340

您可以使用 .NET 2.0 中引入的仅反射加载功能。这允许您加载程序集以进行检查，而无需将其实际加载到 appdomain 中。

[Assembly.ReflectionOnlyLoad](http://msdn.microsoft.com/en-us/library/0et80c7k.aspx)

[Assembly.ReflectionOnlyLoadFrom](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.reflectiononlyloadfrom.aspx)

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T08:10:00.893

您不能简单地使用 FileInfo.Exists 查找文件吗？

# .net - 为什么事件在 .NET 中没有返回类型？

> ID：924689
> 
>         
> 
> 赞同：7
> 
>         
> 
> 时间：2009-05-29T06:44:40.287
> 
>         
> 
> 标签：.net, events

事件也“做”一些类似方法的事情，但它们没有返回类型，只有 void？

我很想知道，为什么会这样？为什么他们不返回类型？

* * *

## 回答 #1

> 赞同：22
> 
>             
> 
> 时间：2009-05-29T06:48:58.560

因为事件可以由多个侦听器处理。事件处理程序的顺序不能保证（尽管我认为它们是按照实际订阅的顺序调用的。）

相反，对于想要“返回”某些数据的事件，约定是有一个可变的 EventArgs 对象，例如可以将其 Cancel 属性设置为 true 的 CancelEventArgs。与返回值相比，它的优点是链中的事件处理程序可以查看该属性以查看是否另一个处理程序已经设置了它。但是您仍然会遇到最后一个设置属性的人获胜的情况。

如果它是一个返回值，整个概念会复杂得多。

* * *

## 回答 #2

> 赞同：8
> 
>             
> 
> 时间：2009-05-29T06:58:11.943

实际上，事件*可以*有返回值。简单地说，这不是一个好主意，因为当可能有多个侦听器时，它需要更复杂的处理......更常见的是，可能有一个可设置的属性和一个`EventArgs`子类。

但这里有一个使用事件返回值的例子；这通常*不是*一个好主意；仅供参考：

```
using System;
delegate int SomeBizarreEvent(object sender); // non-standard signature
class Foo {
    public event SomeBizarreEvent Bizarro;    
    public void TestOverall() {
        SomeBizarreEvent handler = Bizarro;
        if (handler != null) {
            Console.WriteLine(handler(this));
        }
    }
    public void TestIndividual() {
        SomeBizarreEvent handler = Bizarro;
        if (handler != null) {
            foreach (SomeBizarreEvent child in handler.GetInvocationList()) {
                Console.WriteLine(child(this));
            }
        }
    }
}
class Program {
    static void Main() {
        Foo foo = new Foo();
        foo.Bizarro += delegate { return 1; };
        foo.Bizarro += delegate { return 5; };
        // writes 5 (the last result wins)
        foo.TestOverall();
        // writes 1, 5
        foo.TestIndividual();
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T06:49:25.267

他们不需要。想想看。他们会返回什么？

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T06:55:24.243

触发事件是一种单向信号。它们主要用于实现松耦合，因为事件的发起者不依赖于消费者。返回值将创建对消费者的依赖。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T07:02:28.860

它在事件系统的设计中......事件系统的主要目的是通知而不是确认。

事件是一种通知其侦听器（观察者）发生重大动作的方式。它的设计方式不仅是通知侦听器发生了重大动作，而且还向事件源确认这是什么？？？？被处理？？？否则......你如何决定做什么？？？

如果一个事件需要返回一个值，如果没有与之关联的处理程序，它将在哪里返回它。如果一个事件有多个处理程序怎么办......那么如何决定应该返回哪些处理程序值。

最重要的是，这些事件可以返回值。虽然这不是最佳做法。

* * *

## 回答 #6

> 赞同：-2
> 
>             
> 
> 时间：2009-05-29T06:52:54.200

这是因为 Event 是异步调用。您可以同时处理同一事件的多个副本。

因此，它们只传递信息，因为为了处理返回类型，事件引发者必须同步并等待事件处理程序完成。这将使它就像任何其他过程调用一样。

# unit-testing - 如何使用 Zend Framework 1.8 单元测试？

> ID：924690
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T06:44:41.207
> 
>         
> 
> 标签：unit-testing, zend-framework

在 Zend Framework 1.8 中，使用 Zend_Tool，框架现在可以自动生成控制器、动作等。

它的作用是在创建项目时还会创建一个测试目录。

```
quickstart
|-- application
|   |-- Bootstrap.php
|   |-- configs
|   |   `-- application.ini
|   |-- controllers
|   |   |-- ErrorController.php
|   |   `-- IndexController.php
|   |-- models
|   `-- views
|       |-- helpers
|       `-- scripts
|           |-- error
|           |   `-- error.phtml
|           `-- index
|               `-- index.phtml
|-- library
|-- public
|   `-- index.php
    `-- tests
|-- application
|   `-- bootstrap.php
|-- library
|   `-- bootstrap.php
    `-- phpunit.xml 
```

那么它有什么作用呢？我如何实际使用它？我正在阅读有关单元测试的内容，希望这将有助于更多地理解它。

谢谢，温伯特

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-07-26T14:51:23.707

您必须手动创建测试文件夹。我跟着这个[教程](http://www.zendcasts.com/unit-testing-with-the-zend-framework-with-zend_test-and-phpunit/2009/06/)。

# asp.net - 如何在 ASP.Net MVC 中获取 User 对象的 UserID？

> ID：924692
> 
>         
> 
> 赞同：73
> 
>         
> 
> 时间：2009-05-29T06:45:14.277
> 
>         
> 
> 标签：asp.net, membership

我有一些表具有与 aspnet_Users.UserID 相关的唯一标识符 UserID。当用户为这些表提交一些数据时，由于控制器方法有一个 [Authorize] 我得到一个用户对象。我可以使用 User.Identity.Name 获取用户名，但是如何让 UserID 能够建立（所有权）关系？

* * *

## 回答 #1

> 赞同：87
> 
>             
> 
> 时间：2009-05-29T19:58:07.093

似乎您无法从 User 对象中获取它，但您可以通过以下方式获取它：

```
Guid userGuid = (Guid)Membership.GetUser().ProviderUserKey; 
```

* * *

## 回答 #2

> 赞同：31
> 
>             
> 
> 时间：2014-01-30T12:55:56.593

这是解决方案：

包括：

```
using Microsoft.AspNet.Identity; 
```

然后使用扩展方法：

```
User.Identity.GetUserId(); 
```

* * *

## 回答 #3

> 赞同：27
> 
>             
> 
> 时间：2009-05-29T12:36:28.203

首先，这个答案不是严格意义上的 MVC 答案，而是 ASP.NET 答案。在这种情况下，您的站点是 MVC 的事实与解决问题无关。

* * *

唔。我不太确定您如何处理系统中的用户，但听起来您使用的`asp.net membership provider`是 .net 开箱即用的（非常邪恶的）。你说的事实暗示了这一点

*   aspnet_Users.UserID

*   UserID 是一个唯一标识符（阅读：GUID）。

对于使用默认[FormsIdentity](http://msdn.microsoft.com/en-us/library/system.web.security.formsidentity.aspx)的默认表单身份验证系统，它只有一个名为[Name](http://msdn.microsoft.com/en-us/library/system.web.security.formsidentity.name.aspx)的属性（正如您正确指出的那样）。这意味着它只有一个值来放置一些独特的用户信息。在您的情况下，您将*Name/UserName/DisplayName*放在`Name`属性中。我假设这个名称是他们的显示名称并且它是唯一的。无论您在这里投入什么价值，它都必须*是独一无二*的。

从中，您可以获取用户的 guid。

看一下这个。

```
using System.Web.Security;

....

// NOTE: This is a static method .. which makes things easier to use.
MembershipUser user = Membership.GetUser(User.Identity.Name);
if (user == null)
{
    throw new InvalidOperationException("User [" + 
        User.Identity.Name + " ] not found.");
}

// Do whatever u want with the unique identifier.
Guid guid = (Guid)user.ProviderUserKey; 
```

所以，每次你想抓取用户信息时，你都需要使用上面的静态方法从数据库中抓取它。

阅读MSDN 上有关[Membership 类](http://msdn.microsoft.com/en-us/library/system.web.security.membership.aspx)和[MembershipUser 类的所有信息。](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.aspx)

### 奖励答案/建议

因此，我会缓存该结果，因此您无需继续访问数据库。

```
... cont from above....
Guid guid = (Guid)user.ProviderUserKey;

Cache.Add(User.Identity.Name, user.UserID); // Key: Username; Value: Guid. 
```

否则，您可以创建自己的 Identity 类（从[IIdentity](http://msdn.microsoft.com/en-us/library/system.security.principal.iidentity.aspx)继承）并添加您自己的自定义属性，例如`UserID`. 然后，每当您进行身份验证（以及每个请求）时，您都可以设置此值。无论如何，这是一个硬核解决方案，所以现在就使用缓存。

高温高压

* * *

## 回答 #4

> 赞同：18
> 
>             
> 
> 时间：2013-01-17T03:08:00.190

`User.Identity`是`IPrincipal`- 通常是类型`System.Web.Security.FormsIdentity`

它对用户 ID 一无所知——它只是“身份”概念的抽象。

IIdentity界面只有[用户](http://msdn.microsoft.com/en-us/library/system.security.principal.iidentity.aspx)的“名称”，甚至没有“用户名”。

如果你使用默认的 MVC4，[`SimpleMembershipProvider`](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.simplemembershipprovider%28v=vs.111%29.aspx)你可以这样做：

```
WebSecurity.GetUserId(User.Identity.Name)   // User is on ControllerBase 
```

（WebMatrix`WebSecurity`中的 nuget 包在哪里`Microsoft.AspNet.WebPages.WebData`

你也可以使用

```
WebSecurity.CurrentUserName
WebSecurity.CurrentUserId 
```

*（如果您使用的是旧的更复杂的 ASPNET 会员系统[ASPNetMembershipProvider](http://msdn.microsoft.com/en-us/library/ms731049.aspx)，请查看@eduncan911 的答案）*

* * *

## 回答 #5

> 赞同：11
> 
>             
> 
> 时间：2009-05-29T20:08:04.887

如果您使用的是 ASP.NET Membership（它又使用 IPrincipal 对象）：

```
using System.Web.Security;
{
  MembershipUser user = Membership.GetUser(HttpContext.User.Identity.Name);
  Guid guid = (Guid)user.ProviderUserKey;
} 
```

User.Identity 总是返回当前用户的状态，无论是否登录。  

匿名与否，等等。所以登录检查：

```
if (User.Identity.IsAuthenticated)
{
  ...
} 
```

所以，把它们放在一起：

```
using System.Web.Security;
{
  if (User.Identity.IsAuthenticated)
  {
    MembershipUser user = Membership.GetUser(HttpContext.User.Identity.Name);
    Guid guid = (Guid)user.ProviderUserKey;
  }
} 
```

* * *

## 回答 #6

> 赞同：6
> 
>             
> 
> 时间：2014-01-09T02:39:30.387

**获取用户 ID 的最佳选择** 

添加下面的引用

```
using Microsoft.AspNet.Identity;
using Microsoft.AspNet.Identity.EntityFramework;
using Microsoft.Owin.Security;*

public myFunc()
{
   .....
   // Code which will give you user ID is 
   var tmp = User.Identity.GetUserId();

} 
```

* * *

## 回答 #7

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T14:39:01.153

如果您使用自己的 IPrincipal 对象进行授权，则只需将其转换为访问 Id。

例如：

```
public class MyCustomUser : IPrincipal
{
    public int UserId {get;set;}

    //...Other IPrincipal stuff
} 
```

这是一个关于创建自己的基于表单的身份验证的精彩教程。

[http://www.codeproject.com/KB/web-security/AspNetCustomAuth.aspx](http://www.codeproject.com/KB/web-security/AspNetCustomAuth.aspx)

这应该让您走上正确的道路，为您的用户创建身份验证 cookie 并访问您的自定义用户数据。

* * *

## 回答 #8

> 赞同：2
> 
>             
> 
> 时间：2014-02-27T18:08:26.670

```
using System.Web.Security;

MembershipUser user = Membership.GetUser(User.Identity.Name); 
int id = Convert.ToInt32(user.ProviderUserKey); 
```

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T07:17:26.180

它的 ProviderUserKey 属性。

```
System.Web.Security.MembershipUser u;
u.ProviderUserKey 
```

* * *

## 回答 #10

> 赞同：1
> 
>             
> 
> 时间：2013-08-05T09:54:05.607

简单的....

```
int userID = WebSecurity.CurrentUserId; 
```

* * *

## 回答 #11

> 赞同：0
> 
>             
> 
> 时间：2015-12-15T10:55:25.930

通常您可以只使用`WebSecurity.currentUserId`，但如果您在创建帐户之后就在 AccountController 中，并且您想使用用户 ID 将用户链接到其他表中的某些数据`WebSecurity.currentUserId`（以及上面的所有解决方案），不幸的是，在这种情况下返回-1，所以它不起作用。

幸运的是，在这种情况下，您可以方便地使用 UserProfiles 表的 db 上下文，因此您可以通过以下方式获取用户 ID：

```
UserProfile profile = db.UserProfiles.Where(
    u => u.UserName.Equals(model.UserName)
).SingleOrDefault(); 
```

我最近遇到了这个案例，这个答案会为我节省一大堆时间，所以把它放在那里。

# c# - C# 和 Visual Studio 2005 中的程序集之间的循环引用（再次...）

> ID：924693
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T06:45:20.860
> 
>         
> 
> 标签：c#, visual-studio-2005, n-tier-architecture

请先阅读以下主题：

[C# 和 Visual Studio 2005 中的程序集之间的循环引用](https://stackoverflow.com/questions/924382/circular-reference-between-assemblies-in-c-and-visual-studio-2005)

实现接口解决了我的问题，但没有实现我的目标。

我的目标是只使用来自 UI 层/程序集的 BO 层/程序集。这样我就可以保持干净的层到层参考。

因为我不想在 UI 层/程序集中为 BO 层/程序集和 ORMapper-层/程序集添加引用。

我只想在 UI 层/程序集中使用 BO 层/程序集。

同时有人建议我，只能使用反射，而不是 DI。真的吗？

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T07:19:45.753

如果您真的坚持将 ORM 层**隐藏**在 BO 层之后，那么依赖注入应该仍然可以帮助您。请注意，您将无法避免从您的 UI 线程中引用 DI 库，因为那将是您的业务对象的来源。

方法：

*   创建一个接口，其中包含加载数据以填充`User`对象的方法

*   在你的 ORM 项目中实现这个接口

*   在启动时，使用某种 DI 容器针对接口注册 ORM 实现（阅读您使用的任何 DI 库的详细信息，例如：www.ninject.org 以获得轻量级的东西）

*   为`User`对象提供一个构造函数，该构造函数采用填充接口的实例来加载数据

然后当你需要一个`User`对象时，你要求 DI 库创建它，DI 库将构造它`User`并给它一个 ORM 实现的引用。您还必须在 DI 调用中注入一些属性，以便“用户名”和“密码”能够用值完全填充它。

请注意，这并不是 DI 的发明目的……应用程序代码实际上应该直接处理 ORM 以创建/读取/更新/删除业务对象。

# tsql - 将表值函数应用于源表中某个列的每个值

> ID：924698
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-05-29T06:48:09.560
> 
>         
> 
> 标签：tsql

我有一个表，其中有一列中的值必须由某个函数拆分，比如说 F。函数 F 获取该值并将其拆分为一个值表 - 结果是一个表。   

将此函数应用于源表的每个值并拆分所有值的结果表的最有效方法是什么？我知道我可以使用游标，但我想知道是否存在一些更智能的解决方案？

结果应该是这样的：

```
SELECT F(column) FROM SourceTable 
```

但这是不可能的，因为 F 是表值的。

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-05-29T06:58:15.593

[交叉申请](http://msdn.microsoft.com/en-us/library/ms175156.aspx)应该可以解决问题。

```
SELECT *
FROM SourceTable
     CROSS APPLY F(Column) 
```

# python - 从文本文件中检索变量值的最佳方法？

> ID：924700
> 
>         
> 
> 赞同：55
> 
>         
> 
> 时间：2009-05-29T06:48:30.167
> 
>         
> 
> 标签：python, variables, text-files

提到[这个问题](https://stackoverflow.com/questions/868112/loading-files-into-variables-in-python)，我有一个类似但不一样的问题..

在路上，我会有一些文本文件，结构如下：

```
var_a: 'home'
var_b: 'car'
var_c: 15.5 
```

我需要python读取文件，然后创建一个名为var_a的变量，其值为'home'，依此类推。

例子：

```
#python stuff over here
getVarFromFile(filename) #this is the function that im looking for
print var_b
#output: car, as string
print var_c
#output 15.5, as number. 
```

我的意思是，这是否可能，甚至保留 var 类型？

请注意，我对文本文件结构拥有完全的自由，如果我建议的格式不是最好的，我可以使用我喜欢的格式。

**编辑**： ConfigParser 可以是一个解决方案，但我不太喜欢它，因为在我的脚本中，我将不得不引用文件中的变量

```
config.get("set", "var_name") 
```

但是我喜欢直接引用变量，就像我在 python 脚本中声明的那样......

有没有办法将文件作为 python 字典导入？

哦，最后一件事，请记住，我不知道文本文件中有多少变量。

**编辑 2**：我对 stephan 的 JSON 解决方案非常感兴趣，因为这样可以使用其他语言（例如 PHP，然后通过 AJAX JavaScript）简单地读取文本文件，但是在执行该解决方案时我失败了：

```
#for the example, i dont load the file but create a var with the supposed file content
file_content = "'var_a': 4, 'var_b': 'a string'"
mydict = dict(file_content)
#Error: ValueError: dictionary update sequence element #0 has length 1; 2 is required
file_content_2 = "{'var_a': 4, 'var_b': 'a string'}"
mydict_2 = dict(json.dump(file_content_2, True))
#Error:
#Traceback (most recent call last):
#File "<pyshell#5>", line 1, in <module>
#mydict_2 = dict(json.dump(file_content_2, True))
#File "C:\Python26\lib\json\__init__.py", line 181, in dump
#fp.write(chunk)
#AttributeError: 'bool' object has no attribute 'write' 
```

JSON 格式可以解决哪些问题？而且，如何读取文本文件中的 JSON 数组，并将其转换为 python 字典？

PS：我不喜欢使用 .py 文件的解决方案；我更喜欢 .txt、.inc、.whatever 不限于一种语言。

* * *

## 回答 #1

> 赞同：99
> 
>             
> 
> 时间：2009-05-29T07:54:55.713

> 但是我喜欢引用变量 direclty，正如我在 python 脚本中声明的那样。

假设您很乐意稍微更改语法，只需使用 python 并导入“config”模块。

```
# myconfig.py:

var_a = 'home'
var_b = 'car'
var_c = 15.5 
```

然后做

```
from myconfig import * 
```

您可以在当前上下文中按名称引用它们。

* * *

## 回答 #2

> 赞同：32
> 
>             
> 
> 时间：2009-05-29T06:56:12.460

您可以*将*文本文件视为 python 模块并使用以下方法动态加载它[`imp.load_source`](https://docs.python.org/2/library/imp.html#imp.load_source)：

```
import imp
imp.load_source( name, pathname[, file]) 
```

例子：

```
// mydata.txt
var1 = 'hi'
var2 = 'how are you?'
var3 = { 1:'elem1', 2:'elem2' }
//...

// In your script file
def getVarFromFile(filename):
    import imp
    f = open(filename)
    global data
    data = imp.load_source('data', '', f)
    f.close()

# path to "config" file
getVarFromFile('c:/mydata.txt')
print data.var1
print data.var2
print data.var3
... 
```

* * *

## 回答 #3

> 赞同：32
> 
>             
> 
> 时间：2009-05-29T06:57:58.403

使用配置解析器。

你的配置：

```
[myvars]
var_a: 'home'
var_b: 'car'
var_c: 15.5 
```

你的python代码：

```
import ConfigParser

config = ConfigParser.ConfigParser()
config.read("config.ini")
var_a = config.get("myvars", "var_a")
var_b = config.get("myvars", "var_b")
var_c = config.get("myvars", "var_c") 
```

* * *

## 回答 #4

> 赞同：18
> 
>             
> 
> 时间：2009-05-29T07:42:27.533

[使用JSON](http://docs.python.org/library/json.html)或[PyYAML](http://pyyaml.org/wiki/PyYAML)将您的文件加载到字典`the_dict`中（请参阅此步骤的 JSON 或 PyYAML 文档，两者都可以存储数据类型）并将字典添加到您的全局字典中，例如使用`globals().update(the_dict)`.

如果您希望它在本地字典中（例如在函数内部），您可以这样做：

```
for (n, v) in the_dict.items():
    exec('%s=%s' % (n, repr(v))) 
```

只要使用安全`exec`。如果没有，您可以直接使用字典。

* * *

## 回答 #5

> 赞同：7
> 
>             
> 
> 时间：2012-08-03T16:21:55.587

此处发布的其他解决方案对我不起作用，因为：

*   我只需要普通脚本文件中的参数

*   `import *`对我不起作用，因为我需要一种通过选择另一个文件来覆盖它们的方法

*   只是一个带有 dict 的文件并不好，因为我需要在其中添加评论。

所以我最终使用`Configparser`和`globals().update()`

测试文件：

```
#File parametertest.cfg:
[Settings]
#Comments are no Problem
test= True
bla= False    #Here neither

#that neither 
```

这就是我的演示脚本：

```
import ConfigParser

cfg = ConfigParser.RawConfigParser()
cfg.read('parametertest.cfg')       # Read file

#print cfg.getboolean('Settings','bla') # Manual Way to acess them

par=dict(cfg.items("Settings"))
for p in par:
    par[p]=par[p].split("#",1)[0].strip() # To get rid of inline comments

globals().update(par)  #Make them availible globally

print bla 
```

它现在只是一个包含一个部分的文件，但这很容易采用。

希望它对某人有帮助:)

* * *

## 回答 #6

> 赞同：4
> 
>             
> 
> 时间：2012-03-22T03:43:22.323

假设您有一个名为“test.txt”的文件，其中包含：

```
a=1.251
b=2.65415
c=3.54
d=549.5645
e=4684.65489 
```

并且您想找到一个变量（a、b、c、d 或 e）：

```
ffile=open('test.txt','r').read()

variable=raw_input('Wich is the variable you are looking for?\n')

ini=ffile.find(variable)+(len(variable)+1)
rest=ffile[ini:]
search_enter=rest.find('\n')
number=float(rest[:search_enter])

print "value:",number 
```

* * *

## 回答 #7

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T08:27:04.040

你的格式有多可靠？如果分隔符始终完全是“：”，则以下工作。如果没有，一个相对简单的正则表达式应该可以完成这项工作。

只要您使用相当简单的变量类型，Python 的 eval 函数就可以非常容易地将变量持久化到文件中。

（下面为您提供了一本字典，顺便说一句，您提到它是您首选的解决方案之一）。

```
def read_config(filename):
    f = open(filename)
    config_dict = {}
    for lines in f:
        items = lines.split(': ', 1)
        config_dict[items[0]] = eval(items[1])
    return config_dict 
```

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2016-02-20T17:55:43.263

[如果要加载的文件位于子目录中](https://stackoverflow.com/q/1260792/812102)或[以 dashes 命名，](https://stackoverflow.com/q/8350853/812102)则 hbn 的答案不会开箱即用。

在这种情况下，您可以考虑这种替代方法：

```
exec open(myconfig.py).read() 
```

或者在 python3 中更简单但已弃用：

```
execfile(myconfig.py) 
```

不过，我猜 Stephan202 的警告适用于这两个选项，并且线路上的循环可能更安全。

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2021-02-18T20:09:04.993

使用标准库从文本文件中读取变量的简单方法：

```
# Get vars from conf file
var = {}
with open("myvars.txt") as conf:
        for line in conf:
                if ":" in line:
                        name, value = line.split(":")
                        var[name] = str(value).rstrip()
globals().update(var) 
```

默认情况下，这会将每个变量读取为字符串。如果您需要将它们转换为文字变量（例如列表/元组/布尔），那么您需要使用 ast 模块：

```
import ast
ast.literal_eval(varname) 
```

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T07:55:57.770

您想要的似乎是以下内容，但**不推荐**这样做：

```
>>> for line in open('dangerous.txt'):
...     exec('%s = %s' % tuple(line.split(':', 1)))
... 
>>> var_a
'home' 
```

这会产生与 PHP 有点相似的行为[`register_globals`](http://php.chinaunix.net/manual/en/security.globals.php)，因此具有相同的安全问题。此外，`exec`我展示的使用允许任意代码执行。*仅*当您绝对确定文本文件的内容在所有情况下都可以信任时才使用此选项。

您应该真正考虑将变量绑定到本地范围而不是对象，并使用解析文件内容的库，以便不执行任何代码。所以：使用此处提供的任何其他解决方案。

（请注意：我添加此答案不是作为解决方案，而是作为明确的*非解决方案*。）

* * *

## 回答 #11

> 赞同：0
> 
>             
> 
> 时间：2020-02-24T05:43:30.377

如果您的数据具有常规结构，您可以逐行读取文件并填充您喜欢的容器。例如：

假设您的数据有 3 个变量：x、y、i。

一个文件包含 n 个这些数据，每个变量在其自己的行上（每条记录 3 行）。这里有两条记录：

```
384
198
0
255
444
2 
```

以下是您将文件数据读入列表的方法。（从文本中读取，因此相应地投射。）

```
data = []
try:
    with open(dataFilename, "r") as file:
        # read data until end of file
        x = file.readline()
        while x != "":
            x = int(x.strip())    # remove \n, cast as int

            y = file.readline()
            y = int(y.strip())

            i = file.readline()
            i = int(i.strip())

            data.append([x,y,i])

            x = file.readline()

except FileNotFoundError as e:
    print("File not found:", e)

return(data) 
```

# vba - 在 Excel 中的一列数据中查找和删除某些字符

> ID：924717
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T06:55:26.707
> 
>         
> 
> 标签：vba, excel, data-cleaning

我已将一些调试信息复制并粘贴到 Excel 工作表中。

但是，它在一列的某些单元格中包含一些“奇怪”的字符，否则应该只包含整数。使用 VBA 消除此类字符的最简单方法是什么？下面的列表中显示了一个示例：

```
1 **'␁'** <- I'm trying to get rid of the part that I have bolded
2 '␂'
3 '␃'
4 '␂' 
```

我想将该文件用作另一个应用程序中的数据源。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-31T19:16:21.657

试试这个（第一次在这里发布代码，所以请多多包涵；o）。我相信我对 VBA 代码的评论已经足够了，但有任何问题，请告诉我。

```
' Replaces all the charaters in vaFind with strReplace
Sub FindAndReplace(ByVal vaFind As Variant, ByVal strReplace As String, ByVal rngToSearch As Range)
' vaFind is an array containing all the strings you want to replace
' strReplace is what you want to replace it with
' rngToSearch is the range you want to Find & Replace your characters
Dim x As Long
For x = LBound(vaFind, 1) To UBound(vaFind, 1)

  rngToSearch.Cells.Replace What:=vaFind(x), Replacement:=strReplace, _
      LookAt:=xlPart, SearchOrder:=xlByRows, _
      MatchCase:=False, SearchFormat:=False, ReplaceFormat:=False
Next x

End Sub

' Now if you want to clean it automatically,
' Place the following code INTO any Sheets that you
' are have the debug data placed into.
' NOTE: prefix Asterick and question mark with a tilde to replace those characters "~*"
Private Sub Worksheet_Change(ByVal Target As Range)
' Calls the FindAndReplace sub, and removes all:
' astericks, apostrophes and "Whatever Else You need cleaned"'s
' In this case, in column A
If Not Intersect(Target, Me.Columns("A:A")) Is Nothing Then
Call FindAndReplace(Array("~*", "'", "Whatever Else You need cleaned"), "", Me.Columns("A:A"))
End If
' NOTE: This sub will be called whenever the sheet changes, and only process column A
' You can customize which columns, too.
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T08:12:51.653

我认为正则表达式可能是最简单的。我会使用 ADO 记录集并查看它。

**关于 RegEx 的一些注意事项**

```
''http://msdn.microsoft.com/en-us/library/ms974570.aspx
Dim objRegEx As RegExp
Set objRegEx = CreateObject("VBScript.RegExp")
objRegEx.IgnoreCase = True
objRegEx.Global = True

''This is a sample string, the field would go here
strText = "q@12""£c" 

''Find anything not a-z, 0-9
objRegEx.Pattern = "[^a-z0-9]"

''Replace with a dash, "" is fine too. 
strOut = objRegEx.Replace(strText, "-") 
```

**关于 ADO 和 Excel 的一些注意事项**

```
Set cn = CreateObject("ADODB.Connection")
Set rs = CreateObject("ADODB.Recordset")

strFile = ActiveWorkbook.FullName

strcn = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" _
& strFile & ";Extended Properties='Excel 8.0;HDR=Yes;IMEX=1';"

cn.Open strcn

rs.Open "SELECT * FROM [Sheet1$]", cn, 3 'adOpenStatic' 
```

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T22:00:51.477

这是一个对我有用的解决方案，虽然它可能不是很优雅：

```
Sub Macro1()
    ' Macro1 Macro
    Dim temp As String

    For u = 1 To 28000
        If Cells(u, 4) <> 0 Then
            Cells(u, 4).Select
            temp = Mid(ActiveCell.Text, 1, InStr(1, ActiveCell.Text, "'") - 1)
            Cells(u, 4) = temp
        End If
    Next
End Sub 
```

* * *

## 回答 #4

> 赞同：-1
> 
>             
> 
> 时间：2009-05-29T09:16:42.570

在调试时 - 您真的确定要删除它们吗？它们是 ASCII 控制字符。但话又说回来，我不知道你在调试什么......

您看到的字符是代表 ascii 控制字符的 unicode 字符 - 因此，无论您从哪里复制数据，都可以为您翻译它。

标准 excel 函数 Clean 被设计为删除 ASCII 控制字符，因此在这里不起作用。

但这会删除控制图片范围内的所有 unicode 字符

```
Sub Macro1()
  ' Macro1 Macro
  '
  For u = 9210 To 9216 
     a = Cells.Replace(ChrW(u), "") ' replaces values in whole Worksheet
  Next
End Sub

' use this to replace the values in a single column only
' i cant test this at the moment as i don't have Excel handy...
...
   a = Range("A1:A2800").Replace(ChrW(u), "") ' replaces values in Col A
... 
```

# c# - 当事件触发并尝试在不再存在的对象中执行事件处理程序时会发生什么？

> ID：924728
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-05-29T06:58:30.227
> 
>         
> 
> 标签：c#, events, event-handling

在一个班级 ClassA 中，我有一个计时器对象。在这个类中，我为计时器经过的事件注册了事件处理程序。在另一个类 ClassB 中，我有一个用于计时器已用事件的公共事件处理程序。所以我在 ClassA 中注册了 ClassB 的事件处理程序，如下所示：

```
myTimer.Elapsed += ClassBInstance.TimerElapsed 
```

如果我要创建一个新的 ClassBInstance 实例，并且当 ClassB 的事件处理程序的前一个实例仍然与计时器的 Elapsed 事件相关联时触发计时器 elapsed 事件，会发生什么？

例如：

```
ClassB classBInstance = new ClassB();
myTimer.Elapsed += classBInstance.TimerElapsed

classBInstance = new ClassB();
myTimer.Elapsed += classBInstance.TimerElapsed 
```

* * *

## 回答 #1

> 赞同：11
> 
>             
> 
> 时间：2009-05-29T07:04:16.580

AFAIK，只要有注册的事件，ClassBInstance 就不会被垃圾收集，因为该事件包含对它的引用。

您必须确保取消注册不再使用的实例的所有事件。

重要的是注册实例是 IDisposable 的情况，因为在释放实例时可能会触发该事件。在这种情况下，我发现让实例自行注册并在 Dispose 中取消注册是最简单的方法。

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-05-29T07:14:59.757

事件的实现使得只要您的发布者还活着，所有订阅者都会被发布者保持活跃，即使您没有对这些订阅者进行任何其他引用。

当然，这也意味着，如果您希望独立于发布者清理订阅者，则必须分离订阅者。

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T07:08:50.597

如果前一个实例仍然存在，并且新实例还连接了一个事件处理程序，则该事件将触发两个处理程序（一次一个）。重要的是要跟踪何时将事件处理程序附加到事件，并且在不再需要它们时也将它们分离。否则旧实例将继续存在于内存中，执行可能导致意外结果的事件处理程序。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-06-05T13:57:37.623

你可以使用我的 WeakEventHandler，基于 WeakReference。由于它保持对事件侦听器的弱引用，因此它不会强制侦听器存活。

[看到这个答案](https://stackoverflow.com/questions/371109/garbage-collection-when-using-anonymous-delegates-for-event-handling/955928#955928)

# mysql - 如何在终端中最好地显示返回太多字段的 MySQL SELECT？

> ID：924729
> 
>         
> 
> 赞同：324
> 
>         
> 
> 时间：2009-05-29T06:59:07.073
> 
>         
> 
> 标签：mysql, command-line, select, putty

我正在使用[PuTTY](https://www.putty.org/)运行：

```
mysql> SELECT * FROM sometable; 
```

`sometable`有很多字段，这会导致许多列试图在终端中显示。字段换行到下一行，因此很难将列标题与字段值对齐。

**在终端中查看此类数据有哪些解决方案？**

我没有也不想访问 phpMyAdmin - 或任何其他 GUI 界面。我正在寻找这样的命令行解决方案：[Save MySQL Query results into text or CVS file](http://www.tech-recipes.com/rx/1475/save-mysql-query-results-into-a-text-or-csv-file/)

* * *

## 回答 #1

> 赞同：684
> 
>             
> 
> 时间：2009-05-29T07:16:15.777

`\G` ***用代替*** 终止查询`;`。例如：

```
SELECT * FROM sometable\G 
```

此查询垂直显示行，如下所示：

```
*************************** 1\. row ***************************
                 Host: localhost
                   Db: mydatabase1
                 User: myuser1
          Select_priv: Y
          Insert_priv: Y
          Update_priv: Y
          ...
*************************** 2\. row ***************************
                 Host: localhost
                   Db: mydatabase2
                 User: myuser2
          Select_priv: Y
          Insert_priv: Y
          Update_priv: Y
          ... 
```

* * *

## 回答 #2

> 赞同：390
> 
>             
> 
> 时间：2011-06-21T08:54:33.473

您可能还会发现这很有用（仅限非 Windows）：

```
mysql> pager less -SFX
mysql> SELECT * FROM sometable; 
```

这将通过命令行工具管道输出`less`- 使用这些参数 - 将为您提供可以使用光标键水平和垂直滚动的表格输出。

按 键离开此视图`q`，这将退出该`less`工具。

* * *

## 回答 #3

> 赞同：50
> 
>             
> 
> 时间：2009-05-29T07:16:31.313

尝试启用垂直模式，`\G`用于执行查询而不是`;`：

```
mysql> SELECT * FROM sometable \G 
```

您的结果将以垂直模式列出，因此每列值将打印在单独的行上。输出会更窄，但显然更长。

* * *

## 回答 #4

> 赞同：43
> 
>             
> 
> 时间：2018-01-16T18:39:01.997

## 使用`mysql`'s`ego`命令

从`mysql`的`help`命令：

> ego (\G) 向mysql服务器发送命令，垂直显示结果。

因此，通过将 a 附加`\G`到您的`select`，您可以获得非常干净的垂直输出：

```
mysql> SELECT * FROM sometable \G 
```

## 使用寻呼机

您可以告诉 MySQL 使用`less`分页器及其`-S`选项，该选项可以截断宽行并为您提供可以使用箭头键滚动的输出：

```
mysql> pager less -S 
```

因此，下次您运行具有宽输出的命令时，MySQL 将允许您使用`less`分页器浏览输出：

```
mysql> SELECT * FROM sometable; 
```

如果您已完成寻呼机并想返回到 上的常规输出`stdout`，请使用以下命令：

```
mysql> nopager 
```

* * *

## 回答 #5

> 赞同：32
> 
>             
> 
> 时间：2012-05-09T19:26:18.667

您可以使用`--table`or`-t`选项，它将输出一组漂亮的结果

```
echo 'desc table_name' | mysql -uroot database -t 
```

或其他一些将查询传递给mysql的方法，例如：

```
mysql -uroot table_name --table < /tmp/somequery.sql 
```

输出：

```
+--------------+--------------+------+-----+---------+----------------+
| Field        | Type         | Null | Key | Default | Extra          |
+--------------+--------------+------+-----+---------+----------------+
| id           | int(11)      | NO   | PRI | NULL    | auto_increment |
| username     | varchar(30)  | NO   | UNI | NULL    |                |
| first_name   | varchar(30)  | NO   |     | NULL    |                |
| last_name    | varchar(30)  | NO   |     | NULL    |                |
| email        | varchar(75)  | NO   |     | NULL    |                |
| password     | varchar(128) | NO   |     | NULL    |                |
| is_staff     | tinyint(1)   | NO   |     | NULL    |                |
| is_active    | tinyint(1)   | NO   |     | NULL    |                |
| is_superuser | tinyint(1)   | NO   |     | NULL    |                |
| last_login   | datetime     | NO   |     | NULL    |                |
| date_joined  | datetime     | NO   |     | NULL    |                |
+--------------+--------------+------+-----+---------+----------------+ 
```

* * *

## 回答 #6

> 赞同：12
> 
>             
> 
> 时间：2017-09-12T15:25:26.600

为了补充我认为最好的答案，我也使用`less -SFX`了不同的方式：我喜欢将它添加到我`.my.cnf`的主文件夹中的文件中，示例 cnf 文件如下所示：

```
[client]
user=root
password=MyPwD
[mysql]
pager='less -SFX' 
```

这样做的好处是，`less`仅当查询的输出实际上超过一页时才使用，这里是所有标志的解释：

*   -S：单行，当行宽于屏幕时不要跳过行，而是允许向右滚动。

*   -F：**如果只有一屏则退出**，如果内容不需要滚动则只发送到标准输出。

*   -X：无初始化，禁用任何输出“较少”可能已配置为每次加载时输出。

注意：在`.my.cnf`文件中不要把`pager`命令放在`[client]`关键字下面；虽然它可能`mysql`很好用，但`mysqldump`会抱怨不承认它。

* * *

## 回答 #7

> 赞同：8
> 
>             
> 
> 时间：2015-06-25T08:42:03.630

默认寻呼机是标准输出。标准输出具有列限制，因此输出将被包装。您可以将其他工具设置为寻呼机来格式化输出。有两种方法。一是限制列，二是在vim中处理。

第一种方法：

```
➜  ~  echo $COLUMNS
179

mysql> nopager
PAGER set to stdout
mysql> pager cut -c -179
PAGER set to 'cut -c -179'
mysql> select * from db;
+-----------+------------+------------+-------------+-------------+-------------+-------------+-------------+-----------+------------+-----------------+------------+------------+-
| Host      | Db         | User       | Select_priv | Insert_priv | Update_priv | Delete_priv | Create_priv | Drop_priv | Grant_priv | References_priv | Index_priv | Alter_priv |
+-----------+------------+------------+-------------+-------------+-------------+-------------+-------------+-----------+------------+-----------------+------------+------------+-
| %         | test       |            | Y           | Y           | Y           | Y           | Y           | Y         | N          | Y               | Y          | Y          |
| %         | test\_%    |            | Y           | Y           | Y           | Y           | Y           | Y         | N          | Y               | Y          | Y          |
| localhost | phpmyadmin | phpmyadmin | Y           | Y           | Y           | Y           | Y           | Y         | N          | Y               | Y          | Y          |
| localhost | it         | it         | Y           | Y           | Y           | Y           | Y           | Y         | N          | Y               | Y          | Y          |
+-----------+------------+------------+-------------+-------------+-------------+-------------+-------------+-----------+------------+-----------------+------------+------------+-
4 rows in set (0.00 sec)

mysql> 
```

输出不完整。内容适合您的屏幕。

第二个：

在 .vimrc 中将 vim 模式设置为 nowrap

```
➜  ~  tail ~/.vimrc

" no-wrap for myslq cli
set nowrap

mysql> pager vim -
PAGER set to 'vim -'
mysql> select * from db;
    Vim: Reading from stdin...
+-----------+------------+------------+-------------+-------------+----------
| Host      | Db         | User       | Select_priv | Insert_priv | Update_pr
+-----------+------------+------------+-------------+-------------+----------
| %         | test       |            | Y           | Y           | Y
| %         | test\_%    |            | Y           | Y           | Y
| localhost | phpmyadmin | phpmyadmin | Y           | Y           | Y
| localhost | it         | it         | Y           | Y           | Y
+-----------+------------+------------+-------------+-------------+----------
~
~
~ 
```

* * *

## 回答 #8

> 赞同：2
> 
>             
> 
> 时间：2014-01-03T17:37:47.553

如果您以交互方式使用 MySQL，则可以将寻呼机设置为`sed`这样使用：

```
$ mysql -u <user> p<password>
mysql> pager sed 's/,/\n/g' 
PAGER set to 'sed 's/,/\n/g''
mysql> SELECT blah FROM blah WHERE blah = blah 
.
.
.
"blah":"blah"
"blah":"blah"
"blah":"blah" 
```

如果不用`sed`作寻呼机，输出是这样的：

```
"blah":"blah","blah":"blah","blah":"blah" 
```

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2018-12-20T03:27:14.480

我写了`pspg`- [https://github.com/okbob/pspg](https://github.com/okbob/pspg) 

这个寻呼机是为表格数据设计的——也支持 MySQL。

```
MariaDB [sakila]> 寻呼机 pspg -s 14 -X --force-uniborder --quit-if-one-screen
PAGER 设置为 'pspg -s 14 -X --force-uniborder --quit-if-one-screen'
MariaDB [sakila]> 现在选择（）；
MariaDB [sakila]> select * from nicer_but_slower_film_list 限制 100；

```

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T07:20:59.917

我相信腻子有你可以为窗口指定的最大列数。

对于 Windows，我个人使用 Windows PowerShell 并将屏幕缓冲区宽度设置得相当高。列宽保持固定，您可以使用水平滚动条查看数据。我遇到了和你现在一样的问题。

编辑：对于您必须通过 SSH 连接的远程主机，您可以使用 plink + Windows PowerShell 之类的东西

* * *

## 回答 #11

> 赞同：0
> 
>             
> 
> 时间：2013-01-04T04:12:34.720

您可以使用`tee`将查询结果写入文件：

```
tee somepath\filename.txt 
```

* * *

## 回答 #12

> 赞同：-2
> 
>             
> 
> 时间：2013-01-04T05:21:31.900

使用 Windows 命令提示符，您可以根据需要增加窗口的缓冲区大小以查看列数。这取决于表中的列数。

# sql-server - 用户映射查询

> ID：924730
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T06:59:36.307
> 
>         
> 
> 标签：sql-server, sql-server-2005

我想知道如何在 sql server 2005 中获取用户映射详细信息，登录用户是否具有数据库权限。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T07:36:01.867

[sp_helplogins](http://msdn.microsoft.com/en-us/library/ms190304.aspx)提供登录 + 数据库映射信息

# sql - 使用 bcp 将 csv 文件导入 sql 2005 或 2008

> ID：924733
> 
>         
> 
> 赞同：8
> 
>         
> 
> 时间：2009-05-29T07:00:14.293
> 
>         
> 
> 标签：sql, sql-server-2005, tsql, sql-server-2008, bcp

我有一个 csv 文件，我需要将其导入到 sql 2005 或 2008 中的表中。csv 中的列名和计数与表列名和计数不同。csv 由 ';' 分隔 .

例子

CSV 文件内容：

```
FirstName;LastName;Country;Age
Roger;Mouthout;Belgium;55 
```

SQL 人员表

```
Columns: FName,LName,Country 
```

* * *

## 回答 #1

> 赞同：12
> 
>             
> 
> 时间：2009-05-29T08:14:34.300

使用 bcp 导入时可以使用格式文件：

为您的表创建一个格式文件：

```
 bcp [table_name] format nul -f [format_file_name.fmt] -c -T 

 9.0
4
1       SQLCHAR       0       100     ","      1     FName             SQL_Latin1_General_CP1_CI_AS
2       SQLCHAR       0       100     ","      2     LName             SQL_Latin1_General_CP1_CI_AS
3       SQLCHAR       0       100     ","      3     Country           SQL_Latin1_General_CP1_CI_AS
4       SQLCHAR       0       100     "\r\n"   0     Age               SQL_Latin1_General_CP1_CI_AS 
```

编辑导入文件。诀窍是为要跳过的字段添加一个虚拟行，并添加一个“0”作为服务器列顺序。

然后使用此格式文件导入数据，指定您的输入文件、此格式文件和分隔符：

```
bcp [table_name] in [data_file_name] -t , -f [format_file_name.fmt] -T 
```

* * *

## 回答 #2

> 赞同：11
> 
>             
> 
> 时间：2009-05-29T12:33:07.617

我会创建一个临时表，批量插入批次，在新表中选择您需要的内容并删除临时表。

就像是

```
CREATE TABLE dbo.TempImport
(
    FirstName varchar(255),
    LastName varchar(255),
    Country varchar(255),
    Age varchar(255)
)
GO
BULK INSERT dbo.TempImport FROM 'PathToMyTextFile' WITH (FIELDTERMINATOR = ';', ROWTERMINATOR = '\n')
GO
INSERT INTO dbo.ExistingTable
(
    FName,
    LName,
    Country
)
SELECT  FirstName,
       LastName,
       Country
FROM       dbo.TempImport
GO
DROP TABLE dbo.TempImport
GO 
```

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T13:15:02.930

我现在更喜欢将这样的 XML 格式文件与 BULK INSERT 或 OPENROWSET 一起使用：

```
<?xml version="1.0"?>
<BCPFORMAT xmlns="http://schemas.microsoft.com/sqlserver/2004/bulkload/format" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <RECORD>
  <FIELD ID="1" xsi:type="CharTerm" TERMINATOR="|" COLLATION="SQL_Latin1_General_CP1_CI_AS"/>
  <FIELD ID="2" xsi:type="CharTerm" TERMINATOR="|" MAX_LENGTH="37"/>
  <FIELD ID="3" xsi:type="CharTerm" TERMINATOR="|" MAX_LENGTH="41"/>
  <FIELD ID="4" xsi:type="CharTerm" TERMINATOR="|" MAX_LENGTH="17"/>
  <FIELD ID="5" xsi:type="CharTerm" TERMINATOR="\r\n" MAX_LENGTH="10" COLLATION="SQL_Latin1_General_CP1_CI_AS"/>
 </RECORD>
 <ROW>
  <COLUMN SOURCE="1" NAME="i" xsi:type="SQLCHAR"/>
  <COLUMN SOURCE="2" NAME="j" xsi:type="SQLUNIQUEID"/>
  <COLUMN SOURCE="3" NAME="k" xsi:type="SQLNUMERIC" PRECISION="18" SCALE="0"/>
  <COLUMN SOURCE="4" NAME="l" xsi:type="SQLBINARY"/>
  <COLUMN SOURCE="5" NAME="m" xsi:type="SQLVARYCHAR"/>
 </ROW>
</BCPFORMAT> 
```

然后可以使用服务器端的 BULK INSERT 命令如下：

```
BULK INSERT foo FROM '\\mydomain.com\bar\bletch' WITH (FORMATFILE='foo.xml', ERRORFILE='foo.errors',  FIRSTROW = 1, BATCHSIZE=10000) 
```

或者，如果您想“进行中”修改数据，您可以使用

```
INSERT foo(i, j,k)
SELECT foo_delimited.i, foo_delimited.j, foo_delimited.k * 2
 OPENROWSET(BULK 'foo',
                   FORMATFILE= 'foo.xml')
        AS foo_delimited 
```

* * *

## 回答 #4

> 赞同：3
> 
>             
> 
> 时间：2018-06-13T08:33:58.960

对于信息，具有相同的结构，您可以使用这种语句：

```
bcp schema.Table in "/Samples/AdventureWorksDW/DimCurrency.csv" \
    -S db.url \
    -d databaseName \ 
    -U userName \
    -P pwd  \
    -t ; `# The field separator ` \
    -c  `# Insert as character and doesn't ask the data type`  \ 
    -q `# With quote -- seems to be mandatory` 
```

查看[示例](https://gerardnico.com/db/sql_server/bcp#csv)

# mysql - 重构基于用户的模块化网站

> ID：924737
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T07:02:11.000
> 
>         
> 
> 标签：mysql, ruby-on-rails, database, modular

我正在用 Ruby on Rails、MySQL 和 Javascript 开发一个网站。

该网站是模块化的，这意味着用户可以自定义他们的主页并将一个模块拖放到另一个它将存在的区域。可以删除模块的三列。（想想 iGoogle 或 Netvibes）

存储这些数据的最佳方式是什么，以便用户返回主页时可以快速重建？

我考虑过这样做的方式是，每个模块都获得一个对应于用户的 ID，它是行并且它在该行中的位置。（所以类似 ..user|column|row 的内容等于 1204|3|27，这意味着对于用户 #1204，此模块将位于第 3 列，距离顶部 27 个空格。

然后，当用户返回时，只需循环遍历，每个添加 1 直到它到达列的末尾，然后从另一列重新开始，直到所有 3 列都被填充。

我觉得这会很慢，而且必须有更好的方法来做到这一点。

有什么建议么？主要是寻找数据库结构，但如果你有一些与此相关的 Rails 代码，我不介意在 git 中看到。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T07:59:17.920

我认为最好的方法是将您的数据保存在单个文本字段中

例如 1204|3|27 应该在一个文本字段中......每个用户 id 都有一个良好的索引，您应该非常快速地获得配置。之后，您只需要“分解”“|”的配置 .

问候

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T16:44:20.750

我说的很直接：

```
class ModuleInstallation < AR::Base
  belongs_to :user
  belongs_to :module
  validates_presence_of :column
  validates_presence_of :row
end

class User < AR::Base
  has_many :module_installations, :order => :column
  has_many :modules, :through => :module_installations
end 
```

然后让您的控制器处理更多排序，类似这样的事情（未经测试，但请查看它和我用来获取概念的方法的文档）：

```
@columns = current_user.module_installations.group_by(&:column)
@columns.each { |column, modules| modules.sort! { |x,y| x.row <=> y.row } } 
```

那么你的看法就比较简单了：

```
<% @columns.each do |column, modules| %>
  <div class="column-<%= column %>">
    <% modules.each do |module| %>
      <div class="module">
        <%= module.to_html %>
      </div>
    <% end %>
  </div>
<% end %> 
```

# iphone - 消除 UIImage imageNamed: FUD

> ID：924740
> 
>         
> 
> 赞同：117
> 
>         
> 
> 时间：2009-05-29T07:03:34.210
> 
>         
> 
> 标签：iphone, caching, uikit, uiimageview, imagenamed

2014 年 2 月编辑：**请注意，这个问题来自 iOS 2.0！**从那时起，图像要求和处理发生了很大变化。Retina 使图像更大并且加载它们稍微复杂一些。借助对 iPad 和视网膜图像的内置支持，**您当然应该在代码中使用 ImageNamed**。

我看到很多人说`imageNamed`性能不好，但同样数量的人说性能好——尤其是在渲染`UITableView`s 时。例如，请参阅[此 SO 问题](https://stackoverflow.com/questions/316236/uiimage-imagenamed-vs-uiimage-imagewithdata)或iPhoneDeveloperTips.com 上的[这篇文章](http://iphonedevelopertips.com/memory-management/images-and-caching.html)

`UIImage`的`imageNamed`方法用于泄漏，因此最好避免，但已在最近的版本中修复。我想更好地了解缓存算法，以便合理地决定我可以信任系统在哪里缓存我的图像，以及我需要在哪里加倍努力并自己做。我目前的基本理解是它是一个简单`NSMutableDictionary`的`UIImages`文件名引用。它变得更大，当内存用完时，它会变得更小。

例如，是否有人确定背后的图像缓存`imageNamed`没有响应`didReceiveMemoryWarning`？苹果似乎不太可能不这样做。

如果您对缓存算法有任何见解，请在此处发布。

* * *

## 回答 #1

> 赞同：85
> 
>             
> 
> 时间：2009-06-02T07:33:52.963

**tldr：ImagedNamed 很好。它很好地处理内存。使用它并停止担心。**

**2012 年 11 月编辑**：请注意，这个问题来自 iOS 2.0！从那时起，图像要求和处理发生了很大变化。Retina 使图像更大并且加载它们稍微复杂一些。借助对 iPad 和视网膜图像的内置支持，您当然应该在代码中使用 ImageNamed。现在，为了后代：

Apple Dev Forums 上的[姊妹主题](https://devforums.apple.com/message/74625#74625)获得了更好的流量。具体来说[，Rincewind](https://devforums.apple.com/people/Rincewind)增加了一些权限。

> iPhone OS 2.x 中存在一些问题，即使在内存警告之后，也不会清除 imageNamed: 缓存。同时 +imageNamed: 已经得到了很多使用，不是为了缓存，而是为了方便，这可能比它应该的更放大了问题。

同时警告说

> 在速度方面，人们对正在发生的事情普遍存在误解。+imageNamed: 做的最重要的事情是从源文件中解码图像数据，这几乎总是会显着增加数据大小（例如，屏幕大小的 PNG 文件在压缩时可能会消耗几十 KB，但会消耗超过半 MB解压缩 - 宽度 * 高度 * 4)。相比之下 +imageWithContentsOfFile: 将在每次需要图像数据时解压缩该图像。正如您可以想象的那样，如果您只需要一次图像数据，那么您在这里一无所获，除了拥有图像的缓存版本，并且可能比您需要的时间更长。但是，如果您确实有需要经常重绘的大图像，那么还有其他选择，尽管我主要推荐的是避免重绘该大图像:)。
> 
> 关于缓存的一般行为，它确实基于文件名进行缓存（因此 +imageNamed: 的两个实例具有相同的名称应该导致对相同缓存数据的引用）并且缓存将随着您通过以下方式请求更多图像而动态增长+图像命名：。在 iPhone OS 2.xa 上，当收到内存警告时，错误会阻止缓存收缩。

和

> 我的理解是 +imageNamed: 缓存应该尊重 iPhone OS 3.0 上的内存警告。有机会时进行测试，如果发现情况并非如此，请报告错误。

所以你有它。imageNamed：不会砸碎你的窗户或谋杀你的孩子。这很简单，但它是一个优化工具。可悲的是，它的名字很糟糕，并且没有任何等价物可以这么容易使用 - 因此人们过度使用它并且当它只是完成它的工作时会感到不安

我向 UIImage 添加了一个类别来解决这个问题：

```
// header omitted
// Before you waste time editing this, please remember that a semi colon at the end of a method definition is valid and a matter of style.
+ (UIImage*)imageFromMainBundleFile:(NSString*)aFileName; {
    NSString* bundlePath = [[NSBundle mainBundle] bundlePath];
    return [UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%@/%@", bundlePath,aFileName]];
} 
```

Rincewind 还包含一些示例代码来构建您自己的优化版本。我看不出它值得维护，但这是为了完整性。

```
CGImageRef originalImage = uiImage.CGImage;
CFDataRef imageData = CGDataProviderCopyData(
     CGImageGetDataProvider(originalImage));
CGDataProviderRef imageDataProvider = CGDataProviderCreateWithCFData(imageData);
CFRelease(imageData);
CGImageRef image = CGImageCreate(
     CGImageGetWidth(originalImage),
     CGImageGetHeight(originalImage),
     CGImageGetBitsPerComponent(originalImage),
     CGImageGetBitsPerPixel(originalImage),
     CGImageGetBytesPerRow(originalImage),
     CGImageGetColorSpace(originalImage),
     CGImageGetBitmapInfo(originalImage),
     imageDataProvider,
     CGImageGetDecode(originalImage),
     CGImageGetShouldInterpolate(originalImage),
     CGImageGetRenderingIntent(originalImage));
CGDataProviderRelease(imageDataProvider);
UIImage *decompressedImage = [UIImage imageWithCGImage:image];
CGImageRelease(image); 
```

使用此代码的权衡是解码后的图像使用更多内存但渲染速度更快。

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2009-06-02T02:22:03.463

根据我的经验，由 imageNamed 创建的图像缓存不会响应内存警告。就内存管理而言，我有两个应用程序尽可能精简，但由于缺少内存，仍然莫名其妙地崩溃。当我停止使用 imageNamed 加载图像时，这两个应用程序都变得更加稳定。

我承认这两个应用程序都加载了一些较大的图像，但没有什么是完全不寻常的。在第一个应用程序中，我完全跳过了缓存，因为用户不太可能两次返回同一个图像。第二，我构建了一个非常简单的缓存类，就像你提到的那样 - 将 UIImages 保存在 NSMutableDictionary 中，然后在收到内存警告时刷新其内容。如果 imageNamed: 像那样缓存，那么我不应该看到任何性能升级。所有这些都是在 2.2 上运行的——我不知道这是否对 3.0 有任何影响。

您可以从我的第一个应用程序中找到关于此问题的其他问题：
 [StackOverflow question about UIImage cacheing](https://stackoverflow.com/questions/289360/problem-deallocing-memory-used-by-uiimageviews-with-fairly-large-image-in-an-uis)

另一个注意事项 - InterfaceBuilder 在幕后使用 imageNamed。如果您确实遇到此问题，请记住一些事情。

# git - 我可以知道提交的修订号吗？

> ID：924743
> 
>         
> 
> 赞同：11
> 
>         
> 
> 时间：2009-05-29T07:03:57.877
> 
>         
> 
> 标签：git

我可以通过 svn info 之类的命令查看 svn 中的修订号，但在 git 中我只能看到 sha 对象名称，有没有办法知道已经提交了多少修订？

* * *

## 回答 #1

> 赞同：9
> 
>             
> 
> 时间：2009-05-29T07:05:51.397

[git describe](http://www.kernel.org/pub/software/scm/git/docs/git-describe.html)将是获取此类信息的最接近的方法，正如[其他 SO question中所建议的那样](https://stackoverflow.com/questions/677436/how-to-get-the-git-commit-count)

```
[torvalds@g5 git]$ git describe parent
v1.0.4-14-g2414721 
```

> 即我的“父”分支的当前负责人基于`v1.0.4`，但由于它有几个提交，因此**描述添加了额外提交的数量（“14”）**和提交本身的缩写对象名称（“ `2414721`“） 在末尾。

> 额外提交的数量是由“ **`git log v1.0.4..parent`**”显示的提交数量。
> 
> 哈希后缀是“ `-g`”`+ 7-char`父级提示提交的缩写（原为`2414721b194453f058079d897d13c4e377f92dc6`）。

请注意，Git 2.22（2019 年第二季度）修改了最后一句，因为虽然最小值是 7 个字符，但明确的长度可以更长。

[`git describe`文档](https://github.com/git/git/blob/ffea0248bfb81316d1e87856c7cecb636da9675d/Documentation/git-describe.txt#L142-L143)现在说：

> 哈希后缀是“-g”+父级提示提交的**明确**`2414721b194453f058079d897d13c4e377f92dc6`缩写（原为）。

请参阅[Philip Oakley ( ) 的](https://github.com/PhilipOakley)[提交 ffea024](https://github.com/git/git/commit/ffea0248bfb81316d1e87856c7cecb636da9675d)（2019 年 4 月 6 日[）](https://github.com/PhilipOakley)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 18c3ae0](https://github.com/git/git/commit/18c3ae0d7abc3c76efa077cdb8a9c849ec1f40ef))^(中，2019 年 4 月 25 日）)[`PhilipOakley`](https://github.com/PhilipOakley)

^([`gitster`](https://github.com/gitster))

* * *

当然，你总是可以[计算你的提交](http://www.gitready.com/intermediate/2009/01/22/count-your-commits.html)

```
git shortlog -s -n
  135  Tom Preston-Werner
  15  Jack Danger Canty
  10  Chris Van Pelt 
```

> 该`-s`选项将所有提交消息压缩到提交数中，并且该`-n`选项按提交数对列表进行排序。

> 此命令也可能对 有用`changelogs`，因为您可以轻松转储每个人所做的所有更改。
> 
> 还有一些其他简洁的选项：
> 
> `-e`将附加电子邮件，并且您可以使用`-w`. 
> 
> 查看[手册页](http://www.kernel.org/pub/software/scm/git/docs/git-shortlog.html)以获取更多信息。

* * *

使用 Git 2.33（2021 年第三季度），您可以了解更多关于`git describe`精确输出格式的信息：

请参阅[Anders Höckersten ( ) 的](https://github.com/ahockersten)[提交 bfe35a6](https://github.com/git/git/commit/bfe35a61653c5789c9038b3fe9925941cf10f623)（2021 年 5 月 17 日[）](https://github.com/ahockersten)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([d8c6dc2 提交中](https://github.com/git/git/commit/d8c6dc2a5a5ce79356cdfcfe6dd624d95ff4eafd))^(，2021 年 6 月 10 日）)[`ahockersten`](https://github.com/ahockersten)

^([`gitster`](https://github.com/gitster))

> ## [`describe-doc`](https://github.com/git/git/commit/bfe35a61653c5789c9038b3fe9925941cf10f623): 明确缩写的默认长度
> 
> ^(签字人：Anders Höckersten)

> 澄清 git describe 中用于提交的缩写形式的默认长度。
> 
> 该行为在 Git 2.11.0 中进行了修改，但未更新文档以阐明新行为。

`git describe`现在在其[手册页](https://github.com/git/git/blob/bfe35a61653c5789c9038b3fe9925941cf10f623/Documentation/git-describe.txt#L66-L69)中包含：

> 不使用缩写对象名称的默认十六进制数字数（这将根据存储库中对象的数量而变化，默认值为 7），而是使用`<n>`数字，或者根据需要使用尽可能多的数字来形成唯一的对象名称。

`git describe`现在在其[手册页](https://github.com/git/git/blob/bfe35a61653c5789c9038b3fe9925941cf10f623/Documentation/git-describe.txt#L143-L147)中包含：

> 哈希后缀是“-g”+ parent 的提示提交的明确缩写（原为`2414721b194453f058079d897d13c4e377f92dc6`）。
> 
> 缩写的长度随着存储库的增长而缩放，使用存储库中对象的大致数量和围绕生日悖论的一些数学运算，默认为最小值 7。

# ruby-on-rails - 如何监控乘客 / mod_rails 进程？

> ID：924751
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-05-29T07:07:43.500
> 
>         
> 
> 标签：ruby-on-rails, monitoring, passenger, mod-rails

我已经搜索了该网站，但找不到任何合适的信息。由于周围总是有一些专家，我确​​信其中一个人确切地知道我在寻找什么:-)

我们在一个平衡的系统上：

```
Machine 1:     HAProxy load balancer
Machine 2 & 3: Apache mod_rails and (of course) our Rails applications 
```

那时我们能够使用 monit（或其他监控工具）监控所有 Mongrel 进程。

有没有什么方法可以使用 monit（或其他工具）对乘客流程进行简单而巧妙的监控？如何动态获取正在运行的进程的所有 pid 并将它们传递给监控？

马特

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T08:29:32.040

有多种选择。这里是其中的一些：

*   [乘客状态](http://www.modrails.com/documentation/Users%20guide%20Apache.html#_inspecting_phusion_passenger_8217_s_internal_status)工具可让您检查其内部状态

*   [FiveRuns Manage](http://blog.fiveruns.com/2008/7/30/another-look-phusion-passenger-and-fiveruns-manage)可以监控乘客安装

*   [Scout](http://scoutapp.com/)还可以监控乘客

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2011-04-29T18:16:29.210

我制作了一个插件，使 Monit 可以监控乘客进程：
 [https ://github.com/romanbsd/passenger_monit](https://github.com/romanbsd/passenger_monit)

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-08-20T22:09:13.527

它有点贫民窟，但运行这些命令

watchpassenger-status 

watchpassenger-memory-stats  

然后安装并运行 htop

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2013-06-23T10:14:05.687

我快速搜索了一下，我想我找到了你要找的东西。正如约翰托普利所说，他使用了一个运行“乘客身份”的脚本。 
[http://blog.slowb.ro/2013/06/18/add-passenger-status-to-monitoring-on-zenoss/](http://blog.slowb.ro/2013/06/18/add-passenger-status-to-monitoring-on-zenoss/)

# google-maps - 谷歌地图：如何查找地图内是否有任何标记

> ID：924755
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-05-29T07:08:52.670
> 
>         
> 
> 标签：google-maps

我已将我的谷歌地图显示划分为多个部分，现在我想知道是否有任何标记位于 / 任何颗粒单元内。   

任何帮助？

进一步解释：

我有地图边界  

```
map.getBounds(); 
```

方法，然后将其进一步划分为多个子边界。

我也把标记作为

```
map.addOverlay(markerObject); 
```

现在，我想找出单元格（我通过将地图除以边界得到的）是否包含任何标记。

*我已将整个地图边界划分为多个子边界* 

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T08:36:36.457

因此，将所有标记保留在数组中。每个标记都有一个名为 get_position( ) 的方法。完成将地图绑定划分为小的子边界后，您只需要遍历子边界并检查其中的标记。

PS。也看看[它](http://code.google.com/apis/maps/documentation/overlays.html#Marker_Manager)，在某些情况下可能有用。

* * *

假设您在子绑定单元格上：

```
var sub_bounds = new Array();
// here you've pushed into an array the sub bounds
for ( var i = 0; i<sub_bounds.length; ++i)
{
    for ( var j = 0; j < markers.length; ++j)
    {
       var lat = markers[j].get_position( ).lat;
       var lng = markers[j].get_position( ).lng;
       if ( sub_bounds[i].sw.lat<lat && lat<sub_bounds[i].ne.lat &&
            sub_bounds[i].sw.lng<lng && lng<sub_bounds[i].ne.lng)
       // marker within cell, do whatever you need to do
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-06-07T20:02:06.523

这是上述解决方案的替代方案，**无需**重复：

首先 - 你的 sub_bounds 有多大？分别说 10 个纬度和经度。

第二 - 标记的位置是 (floor(marker.lat / 10), floor(marker.lng / 10))

第三 - 每个标记都添加到地图中，并放入该子域的存储桶中。

所以 (40, -78) 将位于桶 (4,7) 即桶 [“4~7”]

> **更正：**将位于桶 (4,-7) 即桶[“4~-7”]

这将包含 40 到 50 lat 和 -70 到 -80 lng 之间的所有标记。

您可以使用 GLatLngBounds 作为在每个存储桶中保存所有这些标记的对象，这将为您提供一组很好的使用方法，例如根据当前存储桶中的标记计算存储桶的中心。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2010-11-11T19:23:22.693

这里可能给出了最好的解决方案：如何找出一个点是否在多边形内：

[如何使用谷歌地图检测一个点在多边形内？](https://stackoverflow.com/questions/3036408/how-to-detect-that-a-point-is-inside-a-polygon-using-google-maps)

# c# - 我对 WCF 缺少什么？

> ID：924756
> 
>         
> 
> 赞同：49
> 
>         
> 
> 时间：2009-05-29T07:09:08.690
> 
>         
> 
> 标签：c#, wcf, web-services

在这个阶段，我在 MS 技术方面的开发时间比我想记得的要长。当 .NET 出现时，我认为他们一针见血，随着每次迭代和版本，我认为他们的技术越来越强大，并期待着每一次发布。

但是，由于去年不得不与 WCF 合作，我必须说我发现这项技术很难使用和理解。最初它非常吸引人，但是当您开始深入了解它时，配置是一场噩梦，必须覆盖消息大小、消息中包含的对象数量、安全模型的复杂性、出现故障时处理代理以及最后的代理回到用代码而不是 XML 定义接口。

它只是不能开箱即用，我认为它应该。我们在测试自己或产品出厂时发现了上述所有问题。

我确实理解这一切背后的基本原理，但他们肯定会想出更简单的实现机制。

我想我要问的是，

*   我是否以错误的方式看待 WCF？

*   与替代品相比，它有什么优势？

*   什么情况下应该选择使用WCF？

好的，伙计们，很抱歉延迟回复，工作确实有一个讨厌的习惯，有时会妨碍你:)

一些澄清 我想我对 WCF 的主要描绘点可以归结为以下几个方面虽然它确实可以开箱即用，但您的左边却有一些重大的惊喜。如上所述，基本事物受到限制，直到被覆盖

1.  可以传递的字符串大小不能超过 8K

2.  单个消息中可以传递的对象数量受到限制

3.  代理不会自动从故障中恢复

4.  配置的数量虽然存在是件好事，但了解这一切以及使用什么以及在什么情况下可能很难理解。尤其是在现场部署具有不同安全要求的软件时。在谈到配置时，我们不得不将很多我们的软件隐藏在后端数据库中，因为现场的安全和网络人员试图在不了解的情况下更改配置文件中的内容它。

5.  将接口的配置保留在代码中，而不是转移到 XML 中明确定义的接口，几乎可以发布和使用任何东西。我知道我们可以从程序集中导出 XML，但它充满了垃圾，并且某些代码生成器会阻塞它。

我知道世界在前进，在过去（我已经开发了 22 年）我已经多次前进了，并且正在积极使用 WCF，所以不要误会我的意思，我确实理解它的用途和它的前进方向。

我只是认为应该有更简单的配置/部署选项可用，更简单的设置和更好的配置管理（可能是 SQL 配置提供程序，而不仅仅是 web.config/app.config 文件）。

* * *

## 回答 #1

> 赞同：15
> 
>             
> 
> 时间：2009-05-29T09:42:02.393

我现在一直在使用 WCF，我分享你的痛苦。看起来它被严重过度设计了，但我们会坚持很长时间，所以我正在努力学习它。

我可以肯定的一件事是，XML 很糟糕。除了使用 XML 来控制它之外，我什么都没有，并且已经切换到通过代码处理所有事情。

* * *

## 回答 #2

> 赞同：8
> 
>             
> 
> 时间：2009-05-29T14:26:55.483

您列出的担忧是：

* * *

1.  可以传递的字符串大小不能超过 8K

2.  单个消息中可以传递的对象数量受到限制

3.  代理不会自动从故障中恢复

4.  配置的数量虽然存在是件好事，但了解这一切以及使用什么以及在什么情况下可能很难理解。尤其是在现场部署具有不同安全要求的软件时等。在谈到配置时，我们不得不将很多我们的软件隐藏在后端数据库中，因为现场的安全和网络人员试图在不了解的情况下更改配置文件中的内容它。

5.  将接口的配置保留在代码中，而不是转移到 XML 中明确定义的接口，几乎可以发布和使用任何东西。我知道我们可以从程序集中导出 XML，但它充满了垃圾，并且某些代码生成器会阻塞它。

* * *

这是我的看法：

(1) 解决了客户对 ASMX 的担忧。它太开放了，没有办法轻易控制它。如果您知道在哪里看，8k 限制很容易解除。我想你可以认为这是一个惊喜，但这更像是一次性的事情。一旦你知道它，你可以举起它并永远完成它，如果你愿意的话。

(2) 也是可配置的。

(3) 是已知的，但是有一些样板方法可以解决这个问题。例如，StockTrader 代码展示了一种经过验证的模式[。](http://msdn.microsoft.com/en-us/netframework/bb499684.aspx)您可以在自己的应用程序中重复使用代码。不确定这是否在 WCF for .NET 4.0 中得到修复。我知道这是一个公开的请求。

(4) 配置是一头野兽。这是很多人关心的问题。这里的问题是 WCF 非常灵活，所有这些灵活性的配置都通过 xml 文件公开。它可能是压倒性的。一种似乎有效的方法是在需要时分小部分服用。  

(5) 我不明白。  

* * *

## 回答 #3

> 赞同：7
> 
>             
> 
> 时间：2013-03-18T20:17:05.753

我非常喜欢 ASP.NET MVC 和 Web API 而不是 WCF。如果我必须向刚接触 WCF 的开发人员总结一下，我会说：“WCF 是一种善意的尝试，旨在取代过度设计的 Java EE 风格的 RPC 开发。” 不幸的是，做出的许多决定都要求您成为配置低级别、不重要的项目（消息大小、超时、无意义的协议元素等）的专家，同时抽象出绝对关键的部分（URL 设计、参数序列化、响应序列化等）。 ）。我所知道的使用 WCF 与 Web API 的团队之间的生产力和恶化差异是白天和黑夜。

澄清一点：我一直讨厌 .NET Remoting 的核心概念。我觉得开发者需要彻底了解他们的应用程序的资源结构以及这些资源是如何序列化的。此外，在需要扩展的读取繁重的应用程序中，使用“POST”动词进行简单的数据检索是令人担忧的。

* * *

## 回答 #4

> 赞同：5
> 
>             
> 
> 时间：2009-05-29T08:22:47.700

我会在澄清后解决您的其余问题。同时，我可以解决您关于何时应该选择使用 WCF 的问题：始终。

WCF 是旧 ASMX 技术（包括 WSE）的替代品。它也是 .NET Remoting 的替代品。在可预见的未来，它是 .NET 中高级通信功能的唯一基础技术。

例如，考虑 Windows Azure。WCF 涵盖了“云计算”这一新概念的通信方面，这并非不可避免。然而，WCF 足够灵活，可以扩展到涵盖这些情况，而代码几乎没有变化。

如果您在使用 WCF 时遇到问题，那么您最好确保 Microsoft 知道它。WCF 是 .NET 中 Web 服务和其他面向服务的开发的现在和未来，因此他们非常有动力倾听您的意见并解决您的痛点。要么直接通过[Connect](http://connect.microsoft.com/visualstudio)联系他们，要么在这里在 SO 上提问（请用 WCF 标记），很多人会帮助你。

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2009-10-06T11:01:16.993

从程序员的角度来看，使用 WCF 的最大优势：将公开服务（操作、合同等）的定义与协议的特定细节分开，这与 ASMX 不同，在 ASMX 中，您使用属性直接在代码中将类公开为 Web 服务。使用我的一个真实示例：我们能够轻松地在 Web 服务和命名管道之间切换传输协议，无论哪种方式更适合部署和性能需求，而无需更改一行代码。

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T13:04:16.900

为了解决应用程序配置维护噩梦的问题，一些标准如 UDDI 或 WS-Discovery 存在，WS-Discovery 将在 .NET 4.0 中被 WCF 支持。

> 将接口的配置保留在代码中，而不是转移到 XML 中明确定义的接口，几乎可以发布和使用任何东西。我知道我们可以从 assembley 中导出 XML，但它充满了垃圾，并且某些代码生成器会阻塞它。

你能更明确一点吗？我认为您正在谈论在代码中配置的服务行为。您可以轻松地编写行为扩展代码来配置您在配置文件中谈论的内容，而不是代码，但我认为如果微软没有这样做，那是有充分理由的。例如具有这种行为的服务：

```
[ServiceBehavior(InstanceContextMode=InstanceContextMode.PerCall, ConcurrencyMode=ConcurrencyMode.Single)] 
```

实现知道该实例不在多个线程之间共享，因此它的开发方式不同于：

```
[ServiceBehavior(InstanceContextMode=InstanceContextMode.Single, ConcurrencyMode=ConcurrencyMode.Multiple)] 
```

在这种情况下，服务实现应该注意并发问题。该实现与属性 ServiceBehavior 相结合，因此在 XML 文件中移动此行为不是一个好主意。

如果您可以在配置文件中将 InstanceContextMode.PerCall 服务更改为 InstanceContextMode.Single 服务怎么办？你破坏了应用程序！

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2010-08-15T01:06:21.700

WCF 旨在用于 SOA 方法。专业地使用它是一场噩梦。我交付了一个使用 WCF 作为工具和地狱的 SOA 解决方案，数百个配置和隐藏技巧！我过去使用旧式 Web 服务和远程处理的分布式解决方案更稳定。我花了几天的时间来解决“底层连接已关闭：发生意外错误”错误的解决方案，这对于同一合同中的 4 种方法中的一种方法来说毫无意义。我非常失望。这让我回到了 .net 第一次引入很多承诺的时候，当我们动手时，地狱，日志问题出现了！

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T12:30:14.270

查看您如何提及 XML 和 SQL，您正在使用 WCF 构建 Web 应用程序或实际的 Web 服务（Web 上的服务，而不仅仅是 SOAP 交换）。

它有助于将 WCF 视为 .NET Remoting（或 DCOM、CORBA 等）的替代品，后者也恰好支持将 Web 服务作为传输之一。在程序集中声明的接口、代理的行为、某些配置选项和框架的其他方面，从 Web 应用程序的角度来看，看起来不自然和复杂——实际上，对于分布式对象的 DCOM 样式系统，它们确实是开箱即用的。

回答这个问题：不，您没有遗漏任何东西，并且将 WCF 用于 Web 应用程序很复杂，因为 WCF 不是用于构建 Web 应用程序的框架。可能这样的框架可以建立在它之上，但我不希望看到 WCF 本身更改为进入 Web 领域。

# iphone - 在 UITextView 中无法显示不同颜色的选定文本，我该怎么办？

> ID：924757
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-05-29T07:09:13.340
> 
>         
> 
> 标签：iphone, uikit

我想在 UITextView 中以不同的颜色显示文本并在其中一些下划线（以显示它们是错误的 - 通常在拼写检查器中完成），但这对于当前版本的 UIKit 是不可能的。我应该追求哪些其他选择？

我正在考虑将 UIScrollView 子类化（因为我正在处理很多文本）并使用 CoreGraphics 将文本blit 到 UIView（作为内容）中，并且当输入新文本时，我会将新文本 blit 到它上面。这是一个好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-06-05T09:44:02.427

推荐的方法是生成 HTML 并使用 UIWebView。这是一个滚动视图，因此您应该拥有所需的所有功能。

如果您想对文本进行更多控制，那么您的方法很好，尽管您可能可以使用 UIKit NSString 扩展来绘制您的文本。具体来说，您需要 drawAtPoint:withFont:

# c# - 是什么构成了应用程序控制台或 Windows 窗体应用程序？

> ID：924760
> 
>         
> 
> 赞同：17
> 
>         
> 
> 时间：2009-05-29T07:10:14.150
> 
>         
> 
> 标签：c#, .net, winforms, visual-studio-2008, console-application

[视觉工作室 2008]

我为控制台应用程序创建了一个新项目并将其修改为如下所示：

```
class Program
{
    static void Main (string[] args) {
        Thread.Sleep (2000);
    }
} 
```

然后我为 Windows 窗体应用程序创建了另一个项目并对其进行了修改：

```
 static class Program
{
    //[STAThread] commented this line
    static void Main (string[] args) { //Added args
        //Commented following lines
        //Application.EnableVisualStyles ();
        //Application.SetCompatibleTextRenderingDefault (false);
        //Application.Run (new Form1 ()); commented this line
        Thread.Sleep (2000);
    }
} 
```

现在我既没有在第一个应用程序中编写控制台功能（Console.Write 等），也没有在第二个应用程序中编写与表单相关的操作。长得跟我一模一样。

第一个应用程序仍然显示黑色窗口，第二个应用程序不显示任何内容。是什么让它这样工作？

* * *

## 回答 #1

> 赞同：33
> 
>             
> 
> 时间：2009-05-29T07:12:58.917

如果您使用 ILDASM 检查 exe 文件，您会发现 Manifest 中存在差异（查找“子系统”）。

在 Winforms 应用程序中：

```
.subsystem 0x0002       // WINDOWS_GUI 
```

在控制台应用程序中：

```
.subsystem 0x0003       // WINDOWS_CUI 
```

IL 代码可能存在更多差异。

当谈到是什么让编译器在这两种情况下发出不同的信号时，这是由项目文件的 OutputType 值控制的：

在 Winforms 应用程序中：

```
<OutputType>WinExe</OutputType> 
```

在控制台应用程序中：

```
<OutputType>Exe</OutputType> 
```

出于好奇，我还检查了类库项目的值：

```
<OutputType>Library</OutputType> 
```

* * *

## 回答 #2

> 赞同：10
> 
>             
> 
> 时间：2009-05-29T07:18:38.097

在项目属性、应用程序选项卡、输出类型中，您可以设置为“Windows 应用程序”或“控制台应用程序”。

我相信 VS 在幕后所做的正是 Fredrik 在他的帖子中提出的。

此外，将其设置为 Console Application 将显示 Windows Forms 项目的黑色控制台应用程序。

* * *

## 回答 #3

> 赞同：8
> 
>             
> 
> 时间：2009-05-29T07:25:24.663

在引擎盖下，winform 和控制台 exe 没有区别，除了 PE 头中的一个标志，上面写着“我需要一个控制台”。PE 标头不受 C# 控制（因为它是编译的东西，而不是运行时的东西），所以它是在项目文件中定义的（`<OutputType>...</OutputType>`）。

或在命令行 ( `csc /target:exe`vs `csc /target:winexe`)。

可以说，他们本可以使用编译器拦截的程序集级属性——但这真的有帮助吗？可能不是。

* * *

## 回答 #4

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T07:22:12.410

如果您查看项目文件 (csproj)，您会看到目标在此处定义为控制台或 Windows 应用程序。

# 3d - 计算对象在 3D 场景中的可见度以用于游戏逻辑/AI

> ID：924761
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-29T07:12:25.627
> 
>         
> 
> 标签：3d, visibility, shadow, ogre3d, light

我正在启动一个允许角色隐藏在黑暗区域的游戏项目。躲在黑暗的角落应该会让其他角色更难看到你。

我需要的是一种计算角色所在位置的光照条件的方法。

理想的情况是拥有一个

```
double getLightFactor(GameCharacter observer, GameCharacter target) 
```

因为我认为可能存在光线下降的照明条件，因此目标的不同侧面被不同数量的光线击中。但我很乐意接受

```
double getLightFactor(GameCharacter target) 
```

无论您从哪里观看，甚至是从哪里观看，都可以为特定角色获得光线

```
double getLightFactor(int x, int z) 
```

只是在地形中的特定地图点获得光线。

该方法需要考虑到光照条件在游戏过程中可能会发生变化，但由于它是基于回合的，因此可能允许进行一些繁重的计算。我打算让使用手电筒成为可能，因此也需要考虑它们（但它们可以单独建模和处理）。

我将使用 Ogre3d 来处理我的场景，但我很乐意接受通用解决方案甚至其他引擎的解决方案（我对引擎的选择并不是一成不变的）。

非常欢迎想法、论文或任何相关的东西！

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T07:18:25.053

考虑到当前的灯光设置，您可以从观察者的角度将场景渲染到屏幕外缓冲区（即使分辨率相当低）。然后你可以计算目标字符中间的平均亮度值。

我不了解 Ogre3d 引擎，但这应该是处理您的问题的一种相当通用的方法（毕竟它只是从不同的角度渲染场景......）

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T07:48:28.520

好家伙。这在很大程度上取决于引擎。我现在可以告诉你，你想要第二种选择。

照明如何工作？它是动态的还是静态的？让我们假设它是两者的结合。

对于静态照明，请检查附近的光照贴图。它要么是基于顶点的，要么是纹理的，无论哪种方式，您都可以在附近的几个点对其进行采样并对它们进行平均。看看引擎如何计算模型的光照，深入研究图形代码并查看数据的实际来源，您可以使用相同的来源。一些游戏具有体积光照信息，Quake 2 在 BSP 树中以每叶为基础执行此操作（易于检查），而 Quake 3 具有体积纹理（也易于检查）。

然后你需要添加动态灯光。您可以做到这一点的一种方法是向光源发射来自玩家的光线（可以肯定的是，来自玩家不同部位的几条不同的光线）。数一数被击中的数量，并根据光线的距离为每个数量添加一点点。所有体面的游戏引擎都有一个“发射射线并查看它击中什么”的程序，这就是 AI 如何进行视线以及如何确定子弹击中了什么以及撞到墙壁时会发生什么。不要将太多光线射得太远，因为它可能会很慢。

您不必过于频繁地重新计算此值，您可以在创建新光源时执行此操作，然后每隔一秒左右执行一次。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-06-26T21:58:41.147

根据环境的复杂性，您可以作弊并使用覆盖在地形上的 2D 光照贴图。每个单元格将具有基于附近光源的光强度值。即使是移动的物体也可以快速计算，并且可以快速访问以确定位置的“暗度”。

您可能必须使用简单的框或圆形算法在其上“标记”形状，具体取决于您拥有的灯光类型。

# javascript - 使用 jquery 在不同的功能之间切换，而不是从它离开的地方恢复

> ID：924773
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T07:17:23.933
> 
>         
> 
> 标签：javascript, jquery, html

第一个函数的代码在特定的间隔 5 秒 (div1,div2,div3) 上显示三个不同的 div。

第二个函数的代码用于停止显示 div。

在显示 div2 时，我单击了链接以停止它停止的那一点。
但在那之后我再次点击它，它显示 div1（它的切换很好）但我想继续下一个动作，即显示 div3。

> ***jQuery代码：***

```
$(function() {

 var IntervalId;

 function first_function() {
 var counter = 0,
 divs = $('#div1,#div2,#div3');
 function showDiv () {
           divs.hide() // hide all divs
          .filter(function (index) { return index == counter % 3; }) 
          .show('fast'); // and show it
          counter++;
 }; 
 showDiv();     
 IntervalId = setInterval(showDiv, 5000);
 }; 

 function second_function(){  
  clearInterval(IntervalId); 
 }  

 $("#link1").toggle(
 first_function,second_function
 );

}); 
```

> ***html代码：***

```
<a href="javascript:void(0);" id="link1">Toggle</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T07:25:48.017

将计数器的初始化移到 first_function() 之外：

```
$(function() {

 var IntervalId;
 var counter = 0,

 function first_function() {
 divs = $('#div1,#div2,#div3');
 ... 
```

在您的示例中，每次调用 first_function() 时，计数器都会设置回零。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T12:38:10.027

从...中得到快乐：

```
<script type="text/javascript">
$(function() {
  var divFunctions = [];
  var $divs = $('#div1,#div2,#div3');

  $divs.each(function() {
    var $this = $(this);
    divFunctions.push(function() {
      return function() {
        $divs.not($this).hide();
        $this.show("fast")
      };
    }());
  });

  var $toggle_button = $("#link1");
  $toggle_button.toggle.apply($toggle_button, divFunctions);
});
</script>

<body>
  <a href="javascript:void(0);" id="link1">Toggle</a>

  <div id='div1' style="display:none;">content1</div>
  <div id='div2' style="display:none;">content2</div>
  <div id='div3' style="display:none;">content3</div>
</body> 
```

# testing - 软件可扩展性测试是否有明确的模式？

> ID：924781
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-05-29T07:19:25.440
> 
>         
> 
> 标签：testing, scalability, design-patterns

我最近对识别软件可伸缩性测试的模式非常感兴趣。由于不同软件解决方案的可变性，似乎对于可扩展性测试软件问题的解决方案与设计和实现软件的解决方案一样多。对我来说，这意味着我们可能可以为这种类型的测试提炼出一些广泛使用的模式。

为了消除歧义，我会提前说我正在使用[维基百科](http://en.wikipedia.org/wiki/Scalability_testing)对可扩展性测试的定义。

我对提出具有详尽描述的特定模式名称的答案最感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-06-02T21:36:36.737

我知道的所有测试场景都使用相同的基本结构进行测试，这涉及在一个或多个针对要测试的处理代理的请求者上生成许多请求。[Kurt](https://stackoverflow.com/users/31056/kurt)的回答是这个过程的一个很好的例子。通常，您将运行测试以找到一些阈值并运行一些替代配置（更少的节点、不同的硬件等）以建立准确的平均数据。

请求者可以是生成请求的机器、网卡、特定软件或软件中的线程。它所做的只是生成一个可以以某种方式处理的请求。

处理代理是实际处理请求并返回结果的软件、网卡、机器。

但是，您对结果的处理决定了您正在执行的测试类型，它们是：

**负载/性能测试**：这是最常用的测试。处理的结果是看在各个级别或在各种配置中处理了多少。同样，库尔特在上面寻找的是一个例子。

**平衡测试**：扩展的一种常见做法是使用负载平衡代理，它将请求定向到进程代理。设置与负载测试相同，但目标是检查请求的分布。在某些情况下，您需要确保在处理代理之间实现请求的均匀（或尽可能接近）平衡，而在其他情况下，您需要确保处理特定请求者的第一个请求的处理代理处理所有后续请求（通常需要像这样的网络农场）。

**数据安全**：通过该测试收集结果并比较数据。您在这里寻找的是锁定问题（例如 SQL 死锁），它阻止写入或数据更改在可接受的时间内或更少的时间内复制到您正在使用的各个节点或存储库。

**边界测试**：这类似于负载测试，只是目标不是处理性能，而是存储效果性能。例如，如果您有一个数据库，那么在 I/O 性能下降到可接受的水平以下之前，您可以拥有多少行/表/列。

我还推荐[《容量规划的艺术》](http://oreilly.com/catalog/9780596518578/)作为关于该主题的优秀书籍。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-06-04T11:01:34.320

我可以在 Robert 的列表中再添加一种测试类型：**浸泡测试**。你选择一个合适的重测试负载，然后运行它很长一段时间——如果你的性能测试通常持续一个小时，那么运行它一整夜、一整天或一整周。您监控正确性和性能。这个想法是检测随着时间的推移缓慢建立的任何类型的问题：诸如内存泄漏、打包、偶尔的死锁、需要重建的索引等。

这是一种不同的可扩展性，但它很重要。当您的系统离开开发车间并上线时，它不仅会通过增加更多负载和更多资源而“横向”变大，而且在时间维度上也是如此：它将在生产机器上不间断地运行数周、数月或数年，这在开发过程中还没有完成。

# openoffice.org - 在 OpenOffice.org 演示文稿中嵌入源代码的最佳方法是什么？

> ID：924787
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T07:20:34.237
> 
>         
> 
> 标签：openoffice.org

在创建包含源代码片段的 (Impress) 演示文稿时，将这些片段包含在演示文稿中的最佳方式是什么？如果可能的话，我希望它们使用固定宽度的字体和适当的语法着色来呈现。

一个明显的答案是嵌入来自代码编辑器的屏幕截图，但这会导致在具有不同屏幕分辨率的投影仪上显示演示文稿时出现问题。也许可以创建一个可以正确缩放的矢量图形图像，或者甚至使用一些宏来渲染代码以提供正确的格式和颜色？是否存在以这种方式处理源代码的工具？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T07:27:25.207

不确定 Open Office 是如何工作的，但我想它能够呈现 HTML。如果我想将一些源代码复制到博客文章中，我通常会找到一个工具，可以让我将源代码复制为 HTML。我怀疑这也适用于 Open Office。

我认为[这是我用于 Visual Studio 的](http://blogs.microsoft.co.il/blogs/bursteg/archive/2007/11/21/copy-source-as-html-copysourceashtml-for-visual-studio-2008-rtm.aspx)。

# jquery - 如何使锚标签不引用任何内容？

> ID：924790
> 
>         
> 
> 赞同：175
> 
>         
> 
> 时间：2009-05-29T07:21:05.703
> 
>         
> 
> 标签：jquery, html

我使用 jQuery，我需要让一些锚标签不执行任何操作。

我通常这样写：

```
<a href="#">link</a> 
```

然而，这是指页面的顶部！

* * *

## 回答 #1

> 赞同：288
> 
>             
> 
> 时间：2009-05-29T09:55:56.780

有一些不太完美的解决方案：

**1.链接到假主播**

```
<a href="#"> 
```

问题：点击链接跳转回页面顶部

**2.使用'a'以外的标签**

使用 span 标签并使用 jquery 来处理点击

问题：破坏键盘导航，必须手动更改悬停光标

**3\. 链接到一个 javascript void 函数**

```
<a href="javascript:void(0);">
<a href="javascript:;"> 
```

问题：在 IE 中链接图像时中断

**解决方案**

由于这些都有自己的问题，我决定的解决方案是链接到一个假锚，然后从 onClick 方法返回 false：

```
<a href="#" onClick="return false;"> 
```

不是最简洁的解决方案，但它解决了上述方法的所有问题。

* * *

## 回答 #2

> 赞同：116
> 
>             
> 
> 时间：2009-05-29T07:24:44.510

如果你不想让它指向任何东西，你可能不应该使用`<a>`(anchor) 标签。

如果你想让某样东西看起来像一个链接，但不像一个链接，最好使用适当的元素（例如`<span>`），然后使用 CSS 设置样式：

```
<span class="fake-link" id="fake-link-1">Am I a link?</span>

.fake-link {
    color: blue;
    text-decoration: underline;
    cursor: pointer;
} 
```

另外，鉴于您将此问题标记为“jQuery”，我假设您要附加一个单击事件处理程序。如果是这样，只需执行与上述相同的操作，然后使用类似以下 JavaScript 的内容：

```
$('#fake-link-1').click(function() {
    /* put your code here */
}); 
```

* * *

## 回答 #3

> 赞同：47
> 
>             
> 
> 时间：2009-05-29T07:27:27.267

为了让它什么都不做，使用这个：

```
<a href="javascript:void(0)"> ... </a> 
```

* * *

## 回答 #4

> 赞同：37
> 
>             
> 
> 时间：2009-05-29T07:26:33.603

处理此问题的正确方法是在处理链接时用 jQuery “断开”链接

HTML

```
<a href="#" id="theLink">My Link</a> 
```

JS

```
$('#theLink').click(function(ev){
    // do whatever you want here

    ev.preventDefault();
    ev.stopPropagation();
}); 
```

最后两个调用停止浏览器解释点击。

* * *

## 回答 #5

> 赞同：32
> 
>             
> 
> 时间：2016-12-22T05:01:32.303

有很多方法可以做到这一点

不要添加和`href`属性

```
<a name="here"> Test <a> 
```

您可以添加 onclick 事件而不是 href 之类

```
<a name="here" onclick="YourFunction()"> Test <a> 
```

或者你可以像这样添加 void 函数，这将是最好的方法

```
<a href="javascript:void(0);"> 
<a href="javascript:;"> 
```

* * *

## 回答 #6

> 赞同：24
> 
>             
> 
> 时间：2009-05-29T07:25:28.393

你什么都没有是什么意思？

```
<a href='about:blank'>blank page</a> 
```

或者

```
<a href='whatever' onclick='return false;'>won't navigate</a> 
```

* * *

## 回答 #7

> 赞同：16
> 
>             
> 
> 时间：2013-01-10T12:57:32.927

应更新此答案以反映新的 Web 标准 (HTML5)。

这个：

```
<a tabindex="0">This represents a placeholder hyperlink</a> 
```

... 是有效的 HTML5。tabindex 属性使它像普通的超链接一样在键盘上聚焦。您也可以使用`span`前面提到的元素，但我发现使用`a`元素更优雅。

请参阅：[https](https://w3c.github.io/html-reference/a.html)
 ://w3c.github.io/html-reference/a.html
和：[https ://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-href](https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-href)

* * *

## 回答 #8

> 赞同：15
> 
>             
> 
> 时间：2009-05-29T07:27:44.690

我觉得你可以试试

```
<a href="JavaScript:void(0)">link</a> 
```

我在这里看到的唯一问题是高级浏览器安全性可能会提示执行 javascript。

虽然这是比

```
<a href="#" onclick="return false;">Link</a> 
```

这应该谨慎使用

阅读本文以获取一些指示[https://web.archive.org/web/20090301044015/http://blog.reindel.com/2006/08/11/a-hrefjavascriptvoid0-avoid-the-void](https://web.archive.org/web/20090301044015/http://blog.reindel.com/2006/08/11/a-hrefjavascriptvoid0-avoid-the-void)

* * *

## 回答 #9

> 赞同：12
> 
>             
> 
> 时间：2016-09-03T10:19:13.947

以下是`<a>`标签的`href`标签属性不引用的三种方式：

```
<a href="JavaScript:void(0)"> link </a>

<a href="javascript:;">link</a >

<a href="#" onclick="return false;"> Link </a> 
```

* * *

## 回答 #10

> 赞同：5
> 
>             
> 
> 时间：2014-01-03T21:19:10.200

确保你想要停止的所有链接都有`href="#!"`（或者你想要的任何东西，真的），然后使用这个：

```
jq('body').on('click.stop_link', 'a[href="#!"]',
function(event) {
     event.preventDefault();
}); 
```

* * *

## 回答 #11

> 赞同：5
> 
>             
> 
> 时间：2012-01-03T10:06:27.260

我知道这是一个老问题，但我想我还是要加两分钱：

这取决于链接要做什么，但通常情况下，我会将链接指向一个可能正在显示/执行相同操作的 url，例如，如果您正在弹出一些 about 框：

```
<a id="about" href="/about">About</a> 
```

然后用 jQuery

```
$('#about').click(function(e) {
    $('#aboutbox').show();
    e.preventDefault();
}); 
```

这样，*非常*旧的浏览器（或禁用 JavaScript 的浏览器）仍然可以导航到单独的 about 页面，但更重要的是，Google 也会选择并抓取 about 页面的内容。

* * *

## 回答 #12

> 赞同：5
> 
>             
> 
> 时间：2015-09-24T21:57:10.157

你可以有一个没有属性的 HTML 锚（`a`标签） 。`href`离开`href`属性&它不会链接到任何东西：

```
<a>link</a> 
```

* * *

## 回答 #13

> 赞同：4
> 
>             
> 
> 时间：2013-12-17T21:51:45.080

唯一对我有用的是以上的组合：

首先`li`在`ul`

```
<li><a onclick="LoadTab2_1()" href="JavaScript:void(0)">All Assigned</a></li> 
```

然后在 LoadTab2_1 我手动切换选项卡 div。

```
$("#tabs-2-1").hide();
    $("#tabs-2-2").show(); 
```

这是因为断开连接也会断开选项卡中的操作。

当主选项卡发生更改时，您还需要手动执行选项卡样式。

```
$("#secTab1").addClass("ui-tabs-active").addClass("ui-state-active").addClass("ui-state-hover").addClass("ui-state-focus");
    $("#secTab1 a").css("color", "#ffffff"); 
```

* * *

## 回答 #14

> 赞同：2
> 
>             
> 
> 时间：2017-05-22T12:03:13.053

你可以这样做

```
<a style='cursor:pointer' >Link</a> 
```

* * *

## 回答 #15

> 赞同：1
> 
>             
> 
> 时间：2014-05-16T12:56:32.587

```
<a href="#" onclick="SomeFunction()"  class="SomeClass">sth.</a> 
```

这是我的锚标签。所以在 onClick="" 事件上返回 false 在这里没有用。我刚刚删除了 href="#" 属性，它对我有用，就像下面一样

```
<a onclick="SomeFunction()"  class="SomeClass">sth.</a> 
```

我需要添加这个 CSS。

```
.SomeClass
{
    cursor: pointer;
} 
```

* * *

## 回答 #16

> 赞同：1
> 
>             
> 
> 时间：2017-01-02T16:24:36.360

我在 WordPress 网站上遇到了这个问题。下拉菜单上的标题始终具有该属性`href=""`，并且使用的标题插件仅允许使用标准 url。最简单的解决方案就是在页脚中运行此代码：

```
jQuery('[href=""]').click(function(e){
    e.preventDefault();
}); 
```

这将防止空白锚点做任何事情。

* * *

## 回答 #17

> 赞同：0
> 
>             
> 
> 时间：2020-05-13T09:14:13.947

React 不再支持`href="javascript:void(0)"`在你的锚标签中使用这样的函数，但这里有一些效果很好的东西。

```
<a href="#" onClick={() => null} >link</a> 
```

* * *

## 回答 #18

> 赞同：-1
> 
>             
> 
> 时间：2016-01-26T22:06:00.973

我知道这被标记为一个 jQuery 问题，但你也可以用 AngularJS 来回答这个问题。

在您的元素中，添加 ng-click 指令并使用作为单击事件的 $event 变量...防止其默认行为：

```
<a href="#" ng-click="$event.preventDefault()"> 
```

您甚至可以将 $event 变量传递给函数：

```
<a href="#" ng-click="doSomething($event)"> 
```

在该函数中，您可以对 click 事件执行任何操作。

* * *

## 回答 #19

> 赞同：-3
> 
>             
> 
> 时间：2021-04-15T11:21:08.067

在 HTML5 中只需删除该`href`属性

```
<a>Your text</a> 
```

# matlab - 从 USB-1024HLS DAQ 板生成 PWM/时钟信号

> ID：924808
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-29T07:25:56.613
> 
>         
> 
> 标签：matlab, hardware

该板是否有 API 函数调用，允许我在板上运行其他代码时在 500 kHz 的输出上生成时钟信号？提前感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-06-19T21:03:48.760

根据[支持的硬件文档](http://www.mathworks.com/products/daq/supportedio14004.html)，需要 2.8 或更高版本的[数据采集工具箱](http://www.mathworks.com/access/helpdesk/help/toolbox/daq/daq_product_page.html)来支持测量计算 USB-1024HLS 设备。假设您有 2.8 或更高版本，以下应该接近您的解决方案...

第一步是获取设备的硬件 ID。[DAQHWINFO](http://www.mathworks.com/access/helpdesk/help/toolbox/daq/daqhwinfo.html)函数应该对此有所帮助：

```
deviceInfo = daqhwinfo('mcc'); 
```

**从结构deviceInfo**获得的硬件 ID然后可用于使用[DIGITALIO](http://www.mathworks.com/access/helpdesk/help/toolbox/daq/digitalio.html)函数创建数字 I/O 对象 (DIO)：

```
dio = digitalio('mcc',hardwareID); 
```

[接下来，您必须使用ADDLINE](http://www.mathworks.com/access/helpdesk/help/toolbox/daq/addline.html)添加两条输出线（用于时钟信号和脉宽调制 (PWM) 信号）：

```
addline(dio,0:1,'out'); 
```

然后，您必须设置一些 DIO 属性。

```
set(dio,'TimerPeriod',0.000002);  % i.e. 500 kHz
set(dio,'TimerFcn',@update_outputs); 
```

函数**update_outputs**在每个定时器周期调用一次，并且应该将输出引脚设置为适当的值。[时钟信号](http://en.wikipedia.org/wiki/Clock_signal)只是在每个定时器周期在 0 和 1 之间来回切换。[PWM 信号](http://en.wikipedia.org/wiki/Pulse-width_modulation)也可能会在0 和 1 之间交替，但它不会在每个定时器周期都发生变化，而是根据您想要的脉宽调制类型在每个状态下保持一定的时间。以下是您的**update_outputs**函数可能最终的样子：

```
function update_outputs(obj,event)
  currentValues = getvalue(obj);
  clockValue = ~currentValues(1);
  pwmValue = pwm_compute();
  putvalue(obj,[clockValue pwmValue]);
end 
```

请注意，这使用[PUTVALUE](http://www.mathworks.com/access/helpdesk/help/toolbox/daq/putvalue.html)和[GETVALUE](http://www.mathworks.com/access/helpdesk/help/toolbox/daq/getvalue.html)来设置/获取输出引脚的值。您必须编写函数**pwm_compute**以便它为每个时间段计算一个新的 PWM 值。由于**pwm_compute**可能必须知道已经输出了多少值（即它已经被调用了多少次），您可以使用[持久变量](http://www.mathworks.com/access/helpdesk/help/techdoc/ref/persistent.html)来跟踪它：

```
function newValue = pwm_compute
  persistent nValues;
  if isempty(nValues)
    nValues = 0;
  else
    nValues = nValues+1;
  end
  ...
  % Compute the new value for the (nValues+1) time period
  ...
end 
```

这只是一种可能的解决方案。您可能会预先计算 PWM 信号并从向量或数据文件中提取每个定时器周期的值，或者您可能会使用传递给**update_outputs的**[**事件**数据结构](http://www.mathworks.com/access/helpdesk/help/toolbox/daq/timerfcn.html)来获取定时器事件的时间（相对于 DIO 定时器启动，我相信）。

 **最后，你必须启动 DIO：

```
start(dio); 
```

...并且，一旦你用完它，删除它并从内存中清除它：

```
delete(dio);
clear dio; 
```

## 一个潜在的绊脚石...

生成 500 kHz 信号可能很困难。它的频率如此之高，您*可能会*遇到问题，特别是“TimerFcn”，它在每个定时器周期调用一次。如果“TimerFcn”的运行时间超过 0.000002 秒，[则可能无法处理某些计时器事件](http://www.mathworks.com/access/helpdesk/help/toolbox/daq/timerfcn.html)，从而导致实际输出频率较低。我有一种感觉，您可能必须使用较低的信号频率才能使事情正常工作，但我可能是错的。=)

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-06-19T05:21:35.357

我在 Data Acquisition Toolbox 文档中找到了[示例：生成计时器事件。](http://www.mathworks.com/access/helpdesk/help/toolbox/daq/index.html?/access/helpdesk/help/toolbox/daq/f11-16754.html#f11-12837)

```
dio = digitalio('nidaq','Dev1');
addline(dio,0:7,'in');
set(dio,'TimerFcn',@daqcallback)
set(dio,'TimerPeriod',5.0)
start(dio)
pause(11)
delete(dio)
clear dio 
```

# actionscript-3 - flex中鼠标在屏幕上的位置

> ID：924818
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-29T07:30:23.483
> 
>         
> 
> 标签：actionscript-3, apache-flex, flex3

我正在尝试获取屏幕上的实际鼠标坐标，以便可以在该位置创建本机窗口，但我似乎无法找到正确的方法来正确执行此操作。

我尝试了各种方法，目前最接近的是：

```
this.contentMouseX and this.contentMouseY 
```

这给了我当前阶段的坐标，这很好，然后我补充说：

```
NativeApplication.nativeApplication.activeWindow.x and activeWindow.y 
```

哪个很接近，但这没有考虑应用程序标题栏。

我敢肯定，必须有一种更简单，更直接的方法，任何人都可以提供建议，因为我在谷歌上找不到它？

我试过 localToGlobal 不起作用，似乎“全局”是指在应用程序内，而不是对屏幕来说是全局的，这对我没有用。这是一个显示失败的示例...

```
<?xml version="1.0" encoding="utf-8"?>
<mx:WindowedApplication xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute">
    <mx:Script>
        <![CDATA[
            import mx.core.Application;

            private function click(evt:MouseEvent):void
            {
                var pt:Point = new Point( this.contentMouseX, this.contentMouseY );
                var global:Point = Application.application.localToGlobal( pt );

                trace( "local_x: " + pt.x + " x " + pt.y );
                trace( "global_x: " + global.x + " x " + global.y );
            }
        ]]>
    </mx:Script>

    <mx:HBox horizontalAlign="center" width="100%">
        <mx:Button id="butt" label="Click" click="click(event)" />
    </mx:HBox>
</mx:WindowedApplication> 
```

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-05-29T08:50:11.733

在一个错误的开始之后......对不起......

您可以使用 stage.nativeWindow.globalToScreen - 这将满足您的需求。

在窗口的位置（为了完整性）方面 - 您还可以查看 stage.nativeWindow.x 和 stage.nativeWindow.y --- 这将为您提供桌面上应用程序的位置 - 从那里 - 您可以定位相对于那个点。

```
<?xml version="1.0" encoding="utf-8"?>
<mx:WindowedApplication xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute">
<mx:Script>
<![CDATA[
import mx.core.Application;

private function click(evt:MouseEvent):void
{
  var pt:Point = new Point( this.butt.x, this.butt.y );
  var global:Point = Application.application.localToGlobal( pt );

  trace( "local_x: " + pt.x + " x " + pt.y );
  trace( "global_x: " + global.x + " x " + global.y );

  var p:Point = stage.nativeWindow.globalToScreen(new Point(this.butt.x, this.butt.y));

  trace(p.x + " x " + p.y);
  var na:NativeWindow = new NativeWindow(new NativeWindowInitOptions());
  na.visible = true;
  na.width = 100;
  na.height = 100;
  na.x = p.x;
  na.y = p.y;
  na.activate();

}
]]>
</mx:Script>

<mx:Button x="10" y="10" id="butt" label="Click" click="click(event)" />

</mx:WindowedApplication> 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T08:35:07.287

```
//get the application level mouse coordinate
var local_x : int = this.mouseX; 

//convert this x value into a global coordinate
var pt : Point = new Point(local_x, 0);
var global_x : int = this.localToGlobal(pt).mouseX; 
```

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T13:06:48.783

这是否有效：

```
private function click(evt:MouseEvent):void
{
  var pt:Point = new Point( evt.localX, evt.localY );
  var global:Point = new Point( evt.stageX, evt.stageY);

  trace( "local_x: " + pt.x + " x " + pt.y );
  trace( "global_x: " + global.x + " x " + global.y );
} 
```

# css - （简单）HTML 属性可以是属性还是仅适用于 CSS？

> ID：924822
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T07:34:18.063
> 
>         
> 
> 标签：css, properties, attributes, svg

[SVG 规范](http://www.w3.org/TR/SVG/styling.html#SVGStylingProperties)谈到了属性.. 这些是什么？可以将它们声明为与元素内联的属性吗？.. 还是只能在 CSS 样式表中声明？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T07:46:17.930

它们可以在内联和样式表中设置，但为了符合标准，我会选择通过外部样式表进行声明

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-06-24T18:55:09.307

两者都符合标准。使用其中一个或另一个的原因有几个。

*   规范说，CSS 样式声明的属性总是优先于 XML 属性中声明的属性

*   另一方面，如果使用属性，则无需解析 CSS 声明

*   您还可以从那里声明一个外部样式表并为您的 SVG 设置样式

简而言之，样式属性是所有这些道具，它们是特定渲染结果所必需的，主要与颜色有关。

等效示例：

```
<svg xmlns="http://www.w3.org/2000/svg">
  <rect fill="red"/>
<svg> 
```

* * *

```
<svg xmlns="http://www.w3.org/2000/svg">
  <rect style="fill: red"/>
<svg> 
```

* * *

```
<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style type="text/css">
    #fillme { fill: red; }
    </style>
  </defs>
  <rect id="fillme"/>
<svg> 
```

请注意，这些 CSS 声明在 CSS 规范 1 到 3 中是无效的。

干杯，

# c++ - VisualStudio C++ 中的 btw /MD 和 /MDD 有什么区别？

> ID：924830
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2009-05-29T07:38:51.987
> 
>         
> 
> 标签：c++, visual-studio, visual-studio-2005

c/c++->代码生成中 /MD 和 /MDD( 多线程调试 dll ) 有什么区别

视觉工作室的属性....

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-05-29T07:49:50.467

他们指定使用哪个运行时。两者都使用多线程动态 (DLL) 运行时，但 /MDD 版本使用调试版本并且还为您定义了 _DEBUG 符号。有关详细信息，请参阅[此 MSDN 页面](https://stackoverflow.com/questions/17903/should-developers-be-specialists-or-generalists)。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T08:53:54.457

调试版本 (MDD) 允许您在调试期间单步执行 C 和 C++ 库。对不正确的堆操作和内存泄漏还有额外的检查。对发布版本和调试版本都有依赖项（例如 DLL）可能会导致问题，因此建议您坚持使用 /MDD 获得调试版本，使用 /MD 获得发布版本。

对于 Visual Studio 2005/2008，如果您的应用程序使用 /MDD，但依赖于使用发布库构建的 DLL，您还需要在项目设置中包含发布库的清单。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T14:42:31.023

与 /MDd 链接的程序可能无法在大多数用户计算机上运行，​​因为标准库的调试版本不太可能安装在它们上。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2016-10-07T22:06:10.827

如果您在 VS 2012 中使用 /MDd 进行编译，您将获得以下依赖项：MSVCP110D.dll。

Visual C++ Redistributable Package 安装不会提供此 DLL。因此，如果要分发可执行文件，目标计算机必须安装 Visual Studio。

另一方面，使用 /MD 编译将依赖于 MSVCP110.dll，它**与**VS Redistributable Package 一起安装。

如我错了请纠正我..

# excel - 打印某些标签

> ID：924831
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T07:39:21.673
> 
>         
> 
> 标签：excel, printing

如何仅打印 Excel 文件中的某些选项卡。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T07:54:02.050

从 UI - 转到所需的工作表并转到文件 -> 打印

从 VBA -

```
Call Worksheets("MySheet").PrintOut 
```

或者

```
Call MySheet.PrintOut 
```

或者如果你有一个以上

```
Dim shts As New Collection
Call shts.Add(Sheet1)
Call shts.Add(Sheet3)
Call shts.Add(Sheet5)

Dim sht As Worksheet: For Each sht In shts
    Call sht.PrintOut
Next sht 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T08:38:47.620

单击要打印的工作表，选择打印，然后在打印下单击“活动工作表”。

此处的完整详细信息 -[用于 Excel 打印的 MS Office 帮助页面](http://office.microsoft.com/en-us/excel/HA010346461033.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-06-01T23:44:34.857

它也可以作为一个数组工作：

Thisworkbook.Sheets(array("Sheet1", "Sheet3", "Sheet5")). Printout 

or: 

Dim arString(1 to 3) as string 

arString(1) = "Sheet1" 

arString(2) = "Sheet3" 

arString( 3) = "Sheet5" 

Thisworkbook.Sheets(arString).Printout

无论哪种方式都可以。

# mono - Mono 与 Enterprise Library 4.1 的兼容性

> ID：924832
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-05-29T07:40:38.503
> 
>         
> 
> 标签：mono, enterprise-library

有人在单声道中使用最新的企业库 4.1 吗？我使用单声道迁移分析器分析了我的 Web 应用程序，发现所有企业库 dll 在单声道中都失败了。

我需要知道企业库 4.1 与 mono 2.4 不兼容是真的吗？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-11-17T20:00:14.840

我对此有更新。

**[Enterprise Library 4.0 现已开源](http://tirania.org/blog/archive/2008/Sep-09.html)**

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T19:44:41.003

我最初尝试让 EntLib 4.0 在 Mono 上运行：http:
 [//jpobst.blogspot.com/2008/10/smart-client-software-factory-on-mono.html](http://jpobst.blogspot.com/2008/10/smart-client-software-factory-on-mono.html)

我不知道是否有人尝试过 EntLib 4.1。不幸的是，除了试图让那个样本工作之外，我对 EntLib 一无所知。这似乎极其复杂。

找出答案的最好方法可能是尝试在 Mono 上运行您的应用程序，看看它是否有效。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-06-30T08:50:17.137

Ent Lib 4.1 还不兼容单声道。我将不得不改变我的计划不使用它。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-31T02:17:56.710

据我所知，Unity 还不是 Mono 友好的。

请记住，您始终可以使用 Moma 来检查这些 DLL。

我认为双方（MS 和 Novell）需要密切合作来解决这些遗留问题。

# grails - Grails Jsecurity 插件：增加会话超时

> ID：924838
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T07:44:18.900
> 
>         
> 
> 标签：grails, jsecurity

我正在使用带有 grails 1.1 的 Jsecurity 插件版本 0.3。我需要增加用户的会话超时。

任何线索我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-30T18:16:35.303

设置会话超时的另一种方法是安装[WebXML 插件](http://grails.org/plugin/webxml)并在 web.xml 中设置会话超时。这样做你不必每次都以编程方式设置它。

# silverlight - 在silverlight Deep Zoom 中获取点击图像的图像ID？

> ID：924839
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T07:44:20.087
> 
>         
> 
> 标签：silverlight, deepzoom

我正在使用 slverlight DeepZoom 设计类似于硬石纪念品的网站。我已经设法创建动态静态图像列表，并且它与所有缩放和平移功能都可以正常工作。

但我想获取单击图像的 id 或名称以在所选图像周围显示信息气球..（高亮显示）...基于图像 id，我将点击数据库并获取图像 dtails..

有人可以帮我解决这个问题吗？？？

,

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-08-27T07:51:15.337

我找到了一种方法来实现这一点.. 我已经在这里解释了..   [how-to-add-graphics-on](https://stackoverflow.com/questions/1270480/how-to-add-graphics-on-top-of-a-multiscaleimage/1270664#1270664)

# programming-languages - 某些语言是否有内在的处理器架构设计

> ID：924855
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-05-29T07:50:33.960
> 
>         
> 
> 标签：programming-languages, cpu-architecture

我很想知道某些语言是否在设计上更适合某些处理器架构。当我说架构时，我指的不是 ARM/PPC/MIPS，而是更多基于堆栈、累加器或寄存器的架构。

例如，我可以想到 Forth，它是一种堆栈架构。还有其他人吗？

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-05-29T07:59:23.300

是的，当然......它也有相反的方向：许多硬件架构旨在适应某些语言。

*   RISC 架构在很大程度上解决了人们从汇编语言转向编译语言（如 C/C++）的问题。

*   [Burroughs ](http://en.wikipedia.org/wiki/Burroughs_large_systems) [B5000](http://en.wikipedia.org/wiki/Burroughs_large_systems#B5000)有 Algol 而不是 assembler。

*   有几种不同的[Forth 芯片](http://www.ultratechnology.com/chips.htm)。

*   [Lisp 机器](http://en.wikipedia.org/wiki/Lisp_machine)旨在高效运行 Lisp。

*   Java 处理器在硬件中运行 Java 字节码。

*   一些 ARM 处理器具有（可选）[Java 加速技术](http://www.arm.com/products/multimedia/java/jazelle.html)。

可能还有更多的好例子可用。

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-05-29T07:53:58.430

是的，他们这样做。例如，[Occam](http://en.wikipedia.org/wiki/Occam_%28programming_language%29)编程语言最初专门针对[Transputer](http://en.wikipedia.org/wiki/Transputer)架构。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T07:55:43.793

也许这是一个聪明的答案，但是：

所涉及的处理器的汇编语言与架构紧密相关，因此，是的，确实存在一些确实如此的语言。

高级语言是否表现出同样的效果可能更有趣。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T08:25:28.990

我看到西蒙·佩顿·琼斯（Simon Peyton Jones）在 Google 视频上发表的一篇演讲中谈到了这一点。他提到，过去人们对编写专门用于执行特定语言的硬件非常感兴趣，但人们找到了解决问题的更好方法：让编译器更智能。看看哈斯克尔。GHC 从高级构造生成一些快得离谱的代码，但 Haskell 与 x86 汇编器非常不同，以至于两者看起来彼此陌生。Java 和 Lisp 也发生了同样的事情：Java 和 Lisp 在现代计算机上都非常快，并且充分利用了我们的处理器，但 Java 最初是为一个奇怪的基于堆栈的字节码编译的，很久以前，人们构建了 Lisp 机器。

Here's the video, by the way.  Most of it is not relevant to the current question but you may find it interesting, it's about "why functional programming is important" and how to make unit tests the easy way.

[http://video.google.com/videoplay?docid=-4991530385753299192&hl=en](http://video.google.com/videoplay?docid=-4991530385753299192&hl=en)

It's only been fairly recent (last decade or so?) that compilers have been smart enough to make Haskell and Java almost as fast as C, even though neither of them expose much of the underlying architecture.  Heck, GHC doesn't even use the stack, how wacky is that?

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T08:01:38.243

大多数语言都以[冯诺依曼架构](http://en.wikipedia.org/wiki/Von_Neumann_architecture)为目标，这是大多数 CPU 的基础。

Neil Butterworth 提到的 Occam for Transputer 是一个明显的例外。

VHDL 是另一个例外，它基于数据流概念，但它不是一种编程语言，它是一种硬件描述和仿真语言。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T08:06:26.703

最著名的例子当然是 c

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T08:07:07.450

C 是在 1970 年代初编写的，以适应 DEC [PDP-11](http://en.wikipedia.org/wiki/PDP-11)
例如，在 PDP-7 上，编程语言[B](http://en.wikipedia.org/wiki/B_(programming_language))只有一种数据类型，但将其移植到具有不同大小数据类型的 PDP-11，变量的数据类型是添加到语言中。

# iphone - iPhone dev：向图像添加重叠标签

> ID：924857
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T07:50:47.127
> 
>         
> 
> 标签：iphone

我正在尝试找出一种最佳方式来实现 iPhone 上本机通讯簿应用程序中显示的图片编辑功能。

在内置通讯录中，图片在编辑前是这样的：

[qkpic.com/2f7d4 http://qkpic.com/2f7d4](http://qkpic.com/2f7d4)

单击编辑后，请注意如何添加“编辑”叠加层并且图像变得可点击：

[qkpic.com/fb2f4 http://qkpic.com/fb2f4](http://qkpic.com/fb2f4)

实现这样的事情的最佳方法是什么？我应该从一开始就将图像设为按钮并首先禁用点击吗？如果是这样，向图像添加覆盖/标签需要哪些步骤（在上面的示例中，添加了灰色边框 + 文本“编辑”）

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T09:11:12.643

最简单的方法是使用 Interface Builder，创建一个容器视图，然后添加一个 UIImageView 和 UILabel 作为子视图。您将定位和设置文本和图像的样式，但将 UILabel 设置为隐藏。使整个容器视图响应触摸。这很容易做到，因为 UIView 是从 UIResponder 派生的，所以你所要做的就是覆盖 touchesEnded。每当您想更改文本标签时，只需将 UILabel 设置为 hidden=NO。

然而，还有更多。注意图像是如何圆角的？您需要覆盖 UIImageView 的 drawRect 方法来实现自定义绘图例程来执行此操作。周围有很多示例代码，它不是您原始问题的一部分，所以我会停在这里。

# c# - 字节转换的数字形成

> ID：924858
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T07:51:46.127
> 
>         
> 
> 标签：c#

如何格式化可转换为 Byte[] (array) 的数字；

我知道如何将结果值转换为 byte[]，但问题是如何格式化中间数。

这是通过数据，

```
 int packet = 10;
  int value = 20;
  long data = 02; // This will take 3 bytes [Last 3 Bytes] 
```

我需要长值，通过它我可以移动，我会像这样填充字节数组

```
Byte[0] = 10;
Byte[1] = 20;
Byte[2] = 00;
Byte[3] = 00;
Byte[4] = 02; 
```

字节 2,3,4 是数据

但是格式化中间值是问题所在。如何形成这个

这是示例

长数据= 683990319104；///我把它称为中间值。

这是我从内置应用程序中收到的号码。

```
 Byte[] by = new byte[5];

            for (int i = 0; i < 5; i++)
            {
                by[i] = (byte)(data & 0xFF);

                data>>= 8; 
            }

  Here 

 Byte[0] = 00;
 Byte[1] = 00;    //Byte 0,1,2  are Data  (ie data = 0)
 Byte[2] = 00;

 Byte[3] = 65;   //Byte 3 is value  (ie Value = 65)
 Byte[4] = 159;  // Byte 4 is packet (is Packet = 159); 
```

这是一个样本。

目前 BitConverter.GetBytes(..) 用于接收。

发送时字节，参数长。

所以我希望格式`683990319104`从

```
packet = 159
value = 65
data = 0 
```

我认为现在它的格式可以理解:)

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T07:55:30.377

不完全确定您到底在问什么，但我认为您正在寻找 BitConverter.GetBytes(data)。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T08:03:57.147

使用 3 个字节来定义 long 似乎不寻常；如果它只是 3 个字节......为什么很长？为什么不是int？

例如（请注意，我必须根据您的示例对您的字节修剪做出假设 - 您不会拥有完整的`int`/`long`范围......）：

```
static void Main() {
    int packet = 10;
    int value = 20;
    long data = 02;

    byte[] buffer = new byte[5];
    WritePacket(buffer, 0, packet, value, data);
    for (int i = 0; i < buffer.Length; i++)
    {
        Console.Write(buffer[i].ToString("x2"));
    }
    Console.WriteLine();
    ReadPacket(buffer, 0, out packet, out value, out data);
    Console.WriteLine(packet);
    Console.WriteLine(value);
    Console.WriteLine(data);
}
static void WritePacket(byte[] buffer, int offset, int packet,
    int value, long data)
{
    // note I'm trimming as per the original question
    buffer[offset++] = (byte)packet;
    buffer[offset++] = (byte)value;

    int tmp = (int)(data); // more efficient to work with int, and
                           //  we're going to lose the MSB anyway...
    buffer[offset++] = (byte)(tmp>>2);
    buffer[offset++] = (byte)(tmp>>1);
    buffer[offset] = (byte)(tmp);
}
static void ReadPacket(byte[] buffer, int offset, out int packet,
     out int value, out long data)
{
    // note I'm trimming as per the original question
    packet = buffer[offset++];
    value = buffer[offset++];
    data = ((int)buffer[offset++] << 2)
        | ((int)buffer[offset++] << 1)
        | (int)buffer[offset];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-06-02T12:03:29.953

哦，

```
Its simple

    int packet = 159
    int value = 65
    int data = 0

    long address = packet;

    address = address<<8;
    address = address|value;
    address = address<<24;
    address = address|data; 
```

现在地址的值是`683990319104`，我称之为中间值。让我知道确切的术语。

# diagram - 解释 ERD

> ID：924859
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T07:52:03.363
> 
>         
> 
> 标签：diagram, erd

CategorySection-Category 关系和 CategorySection-Categorization 关系有什么区别？

1.  CategorySection-Category 有一个箭头和一个黑点。

2.  CategorySection-Categorization 在两端都有一个箭头。

两者都应该是“有很多”关系，但该图使用不同的符号来表示这两种关系。

[![替代文字](https://i.stack.imgur.com/E5pq3.png)](https://i.stack.imgur.com/E5pq3.png)

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T08:04:38.033

这取决于您使用的符号，但通常：

*   乌鸦脚（箭头）表示许多

*   黑点表示需要

*   白点表示可选

请注意，仅仅因为绘制了图表并不能使其显示的关系变得合理，甚至可能。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T07:56:43.713

两端的 Crowfeet 表示多对多关系。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T08:05:19.827

*   一个 Category 可以有多个 CategorySection，但一个 CategorySection 可以属于一个 Category。

*   一个分类可以有多个分类，但一个分类只能属于一个分类。

*   一个 Categorization 可以有多个 CategorySection，一个 CategorySection 可以属于多个 Categorization。

我认为它告诉你可以创建许多不同的分类来定义不同的类别，但类别部分可以在不同的类别（和分类）之间共享。

# apache-flex - Flex：在影片剪辑的不同帧上绘制

> ID：924874
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T07:57:02.340
> 
>         
> 
> 标签：apache-flex, actionscript, movieclip, draw

如何使用 ActionScript 在影片剪辑的不同帧上绘图。也就是说，使它成为movieClip.gotoAndStop(0); 将显示与 movieClip.gotoAndStop(1) 不同的内容；

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T08:50:56.303

您可以在代码中使用 addFrameScript。

例如，假设您有一个与 CustomMovieClip 类关联的影片剪辑。

在 CustomMovieClip 的构造函数中，您可以编写如下内容（未经测试的代码）：

类 CustomMovieClip {

...

函数 CustomMovieClip() { stop();

// 将 drawGraphicsForFrame1 代码添加到第 0 帧中

addFrameScript(0, drawGraphicsForFrame1);

// 将 drawGraphicsForFrame2 代码添加到第 1 帧中

addFrameScript(1, drawGraphicsForFrame2); ...

}

私有函数 drawGraphicsForFrame1():void { stop();

变种精灵：精灵=新精灵（）；addChildAt(精灵, 1);

// 绘制精灵

sprite.graphics.lineStyle ...

}

私有函数 drawGraphicsForFrame2():void {

```
// remove the previous sprite (assumption: it's always at layer 1)

if (getChildAt(1) != null)
  removeChildAt(1);

 // draw new sprite

 var sprite:Sprite = new Sprite();
 addChildAt(sprite, 1);

 sprite.graphics.lineStyle ... 
```

}

...

# asp.net-mvc - 在 MS MVC 中将模型传递给布局

> ID：924879
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T08:00:15.640
> 
>         
> 
> 标签：asp.net-mvc, model

在视图中我传递模型强类型的方式是这样的：  

```
System.Web.Mvc.ViewPage<HomeModel> 
```

然后就使用它：  

```
<%= Model.Greeting %> 
```

如何在布局中使用强类型模型？

如果没有强输入，我可能会在控制器工厂添加必要的数据，然后通过 (LayoutModel)Viewdata["LayoutModel"]).Tralala 使用它，但我正在寻找更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T08:19:39.673

在您的视图中创建强类型属性：

```
<script runat="server">
    protected LayoutModel LayoutModel
    {
        get
        {
            return ViewData["LayoutModel"] as LayoutModel;
        }
    }
</script> 
```

# html - css浮动故障排除

> ID：924880
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T08:00:24.657
> 
>         
> 
> 标签：html, css

我有一个非常简单的 CSS 示例，详述如下。.entry 类生成一个带有 1px 黑色边框的简单框。下面的示例将在框内渲染“123”，在框外渲染“abc”和“xyz”，因为这些元素被标记为左右浮动。我的目标是让 .entry 内的 .box1 左对齐，而 .entry 内的 .box2 右对齐。

```
<html>
<head>
<style type="text/css">
        .entry 
    {
        width: 400px;
        border-style: solid;
        border-width: 1px;
        border-color: #000;
    }   
    .box1
    {
        width: 75px;
                float: left;
    }

    .box2
    {
        width: 300px;
                float: right;   
    }
</style>
</head>
<body>
        <div class="entry">
            123
            <div class="box1">abc</div>
            <div class="box2">xyz</div>
        </div>
</body>
</html> 
```

它在 IE 中渲染得很好，但在 Firefox 中却不行

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T09:22:52.057

由于浮动被从正常流程中取出，它们周围的盒子会塌陷。

我将首先解释为什么它在 IE 中工作。您通过在每个元素上设置宽度或高度来给它“布局”。在`width`这种情况下。有关此内容的更多信息，请参见[hasLayout](http://www.satzansatz.de/cssd/onhavinglayout.html)。这非常方便，因为它还可以解决您遇到的大多数其他 IE 错误。

神奇的子弹是：

```
高度：1%；/* 或任何其他值。IE6 错误地将高度视为最小高度。*/

```

或者如果您无法设置特定尺寸，请使用

```
缩放：1；/* 仅 IE 属性。不验证，但也不会造成任何伤害 */

```

因此，对于您的问题，使其在适当的浏览器中运行，有几个解决方案。如果将浮动元素的父元素也设置为 have `float`，则框将围绕子浮动元素展开。尽管这可能会在 DOM 中进一步引起麻烦，但我不知道您的其余标记如何。

然后可以设置一个更简单的方法来`overflow:hidden;`修复它。但是现在您必须注意长网址、代码片段或任何其他可能意外推出 div 的内容。如果你自己做整个网站，这通常不是什么大问题，如果你把它交给某人在 CMS 中使用，机会会稍大一些。不过，如果您无法解决布局周围的无数浮动问题，仍然值得冒险。

在末尾添加一个元素以清除浮动也是一种方法，但我发现前一种方法更容易。

我最好停止喋喋不休，你可能想看看代码：

```
 .entry {
  width: 400px;
  border: 1px solid #000;
  float: left;      /* Option 1 */
  overflow: hidden; /* Option 2 */
}   
.box1 {
  width: 75px;
  float: left;
 }
.box2 {
  width: 300px;
  float: right;   
 } 

```

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T08:19:50.407

由于您没有 Doctype，因此您正在触发[Quirks mode](http://www.quirksmode.org/css/quirksmode.html)。这使得浏览器比标准（AKA Strict）模式更容易出错。Internet Explorer 是这里最严重的违规者。

我怀疑您的问题是您希望 .entry 的边框围绕 .box1 和 .box2 延伸。有关更多详细信息，请参见[包含浮点数](http://complexspiral.com/publications/containing-floats/)，对于一些更好的解决方案，请参见包含浮点数的[方法。](http://www.ejeliot.com/blog/59)

当然，您的问题可能有所不同。[你说得比较含糊](http://catb.org/esr/faqs/smart-questions.html)。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T08:41:19.817

您需要清除 FF 的浮动：

```
.entry:after {
content: ".";
display: block;
height: 0;
clear: both;
visibility: hidden;
} 
```

我也会为 IE 做这件事：

```
.entry { min-height: 10px;} 
```

否则，我不明白为什么它不起作用......

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T08:52:56.767

试试这个; 我已经对其进行了测试，它适用于 FF 3、Safari 3.2、Opera 9.6 和 IE 7。

（我在 div 中添加额外文本行的原因`.box2`是为了确保`.entry`div 在添加额外内容时垂直拉伸）。

```
<html>
<head>
<style type="text/css">
    .entry 
    {
        width: 400px;
        border-style: solid;
        border-width: 1px;
        border-color: #000;
    }   
    .box1
    {
        width: 75px;
        float: left;
    }

    .box2
    {
        width: 300px;
        float; left;
        margin: 0 0 0 75px;
    }

    .entry span
    {
        width: 400px;
        float: left;
    }
</style>
</head>
<body>
        <div class="entry">
            <span>123</span>
            <div class="box1">abc</div>
            <div class="box2">xyz<br>More text</div>
        </div>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T10:30:37.507

尝试将溢出：隐藏（或自动）添加到 .entry{...}

# sql - SSIS 联合全部 - SSIS 中是否存在此项目的错误？

> ID：924884
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T08:00:55.593
> 
>         
> 
> 标签：sql, sql-server, database, ssis

我正在使用 SQL 2005 和 SSIS

我有 2 个数据源。

一个来自表 A，一个来自表 B。我想将数据从表 A 移动到表 B。但首先我从两者中获取 MAX 日期并比较它们。如果它们相同，那么我必须停止 SSIS 包或使用条件拆分。

但是，当表 B 中的 MAX 日期通过 Union ALL 时，它变为空白！

知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T08:10:07.960

联合所有转换都不会更改进入它们的数据。仔细检查并确保“maxdate”的输出列包含两个“maxdate”列。还要检查两者的数据类型。

事实上，我建议您删除带有“maxdate”的行，然后再次添加它，确保从两个输入中正确设置它。

# jquery - 当 jQuery 为元素创建新的包装对象时？

> ID：924885
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-29T08:01:20.507
> 
>         
> 
> 标签：jquery

谁能告诉我，如果我打电话给前任。

```
var obj1 = $('#element_id')
var obj2 = $('#element_id') 
```

obj1 会与 obj2 引用相同的 javascript 对象，还是会有 2 个不同的对象，它们具有相同的 HTML 元素？

那么复杂的选择器呢，比如 ('.my_class, .my-class2')，它包装了对象集合？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T08:04:15.693

它们将是不同的对象。

您可以很容易地测试自己：

```
var obj1 = $('#test');
var obj2 = $('#test');
var array = new Array();
array[0] = obj1;
alert(obj1 == array[0]);
alert(obj1 == obj2); 
```

第一个警报将是“真实的”。第二个将是“假的”。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T08:25:08.460

它们是不同的，这就是为什么[存储你的 jQuery 对象](http://www.sitecrafting.com/blog/jquery-caching-convention)是一种常见的做法，你可以减少选择器解析、DOM 遍历等......

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T08:28:10.933

是否有机会获得只有选择器的第一个对象？当我在该对象中存储一些值并想从代码的另一部分读取它们时，这是需要的。

# c - C main() 函数可以是静态的吗？

> ID：924890
> 
>         
> 
> 赞同：19
> 
>         
> 
> 时间：2009-05-29T08:02:38.990
> 
>         
> 
> 标签：c, static, linker

`main()`函数可以在 C 程序中声明吗`static`？如果是这样，那么它有什么用？

如果我使用汇编代码并`static main()`自己调用函数（考虑嵌入式程序），是否有可能？

* * *

## 回答 #1

> 赞同：37
> 
>             
> 
> 时间：2009-05-29T08:07:43.050

不。C 规范实际上在其中某处说（我读过规范，信不信由你）主函数不能是静态的。

原因是静态的意思是“不要让这个源文件之外的任何东西使用这个对象”。好处是当你去链接时它可以防止 C 中的名称冲突（如果你在不同的文件中有两个名为“is_initialized”的全局变量，那就太糟糕了……除非你做了它们，否则它们会被静默合并静止的）。它还允许编译器执行某些其他方式无法执行的优化。这两个原因就是为什么静态是一件好事。

由于您无法从文件外部访问静态函数，操作系统如何能够访问主函数来启动您的程序？这就是为什么 main 不能是静态的。

一些编译器特别对待“main”，当你将它声明为静态时，可能会默默地忽略你。

编辑：看起来我错了，规范说 main 不能是静态的，但它确实说它不能在托管环境中内联（如果你不得不问“托管环境”是什么意思，那么你就是在一个）。但是在 OS X 和 Linux 上，如果你声明 main static，那么你会得到一个链接错误，因为链接器找不到“main”的定义。

* * *

## 回答 #2

> 赞同：11
> 
>             
> 
> 时间：2009-05-29T13:48:56.870

您可以在源文件中调用*一个*静态函数`main()`，它可能会编译，但它不会是*该* `main()`函数，因为当启动代码（许多（旧）Unix 系统上的 crt0.o ) 电话`main()`。

给定代码：

```
static int main(int argc, char **argv)
{
    return(argv + argc);
}

extern int x(int argc, char **argv)
{
    return(main(argc, argv));
} 
```

带有 -Wall 的 GCC 很有帮助地说：

```
 warning: 'main' is normally a non-static function 
```

是的，这是可以做到的。不，这通常是一个错误——它不是*函数* `main()`。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T08:06:19.997

不，你不能这样做。如果你这样做，你将无法编译你的程序。因为静态函数只在同一个文件中可见，所以链接器将无法找到它并调用它。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T08:10:36.213

正如其他人所说，不，它不能。如果您打算将您的代码移植到 C++ 中，这会加倍，因为 C++ 标准规定 main() 实际上不必是一个函数。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T08:25:38.083

C对于“静态”有两个含义...

局部变量的静态意味着它可以在全局范围内使用。static 对于全局变量意味着只能在当前文件中使用。

函数的静态与将全局变量表示为静态具有完全相同的影响...静态函数仅在当前文件中可见...

因此 main 永远不能是静态的，因为它不能作为程序的主要入口点。

# javascript - 如何使用 javascript/jQuery 获取 iframe 链接到内部文档源？

> ID：924892
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T08:03:30.750
> 
>         
> 
> 标签：javascript, jquery, frame

我有一个 ID 为“appframe”的 iframe，源是 page.html，它位于同一台服务器上。我想使用 jQuery 获取页面的源代码。

```
alert($("#appframe").contents().find("html").html()); 
```

即使文档不包含那些标签，它也会返回`<head></head><body></body>`，它只包含“默认页面”，所以这正是它应该返回的内容。知道如何使用 jQuery 获取整个文档的正确源脚本吗？

例如。如果文档将是“测试”，那么这正是它应该返回的内容。

请注意：几周前我确实问过这个问题。不幸的是，我没有得到解决的答案。由于我的声誉较低（~85），我不能要求赏金......这对我来说没有多大意义。无论如何，它迫使我重新发布这个问题。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T11:24:07.740

调用检索标签`$("#appframe").contents().find("html").html()`内应包含的内容。`<html></html>`

在 IFRAME 的情况下，如果它还没有完成加载，它会返回`<head></head></body></body>`本来应该存在的空白。

如果您在 $(document).ready() 中进行调用，则 IFRAME 可能尚未完成加载。尝试从按钮单击事件内部进行调用。

请记住，如果您的 IFRAME 包含纯文本并且您尝试获取其 html()，它将包含上述空白的 head 和 body 标签，即使它们不存在。

如果您不需要访问 IFRAME 中的所有 HTML，则应调用 ("body").html() 来获取内容。尝试从按钮单击事件中调用它：

`alert($("#appframe").contents().find("body").html());`

# .net - .net 2.0 中的 System.DirectoryServices.AccountManagement

> ID：924893
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-05-29T08:03:46.070
> 
>         
> 
> 标签：.net, asp.net, active-directory, directoryservices

有没有：

> 字符串名称 = System.DirectoryServices.AccountManagement.UserPrincipal.Current.DisplayName；

.net 2.0 框架中的等价物？它使用 System.DirectoryServices.AccountManagement (ver 3.5) 参考。我尝试在 .net 2.0 框架上使用该文件，但无济于事。

基本上，我想检索 Windows 用户的完整用户名（名字和姓氏）（不是 Request.ServerVariables["REMOTE_USER"]，它只提供 Windows 用户名）

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-05-29T08:57:37.303

S.DS.AM 命名空间是在 .NET 3.5 中引入的，不幸的是，它没有 2.0 版本。

您可以使用 WindowsIdentity.GetCurrent().Name 查询 ASP.NET 应用程序中的当前 Windows 用户 - 这将为您提供 DOMAIN\UserName。

然后，您必须在 AD 中使用 DirectorySearcher 对象对该用户进行用户搜索，以便找到相应的 DirectoryEntry。这将为您提供该用户的所有信息。

```
 string currentUser = WindowsIdentity.GetCurrent().Name;

    string[] domainUserName = currentUser.Split('\\');
    string justUserName = domainUserName[1];

    DirectoryEntry searchRoot = new DirectoryEntry("LDAP://dc=(yourcompany),dc=com");

    DirectorySearcher ds = new DirectorySearcher(searchRoot);

    ds.SearchScope = SearchScope.Subtree;

    ds.PropertiesToLoad.Add("sn");
    ds.PropertiesToLoad.Add("givenName");

    ds.Filter = string.Format("(&(objectCategory=person)(samAccountName={0}))", justUserName);

    SearchResult sr = ds.FindOne();

    if (sr != null)
    {
        string firstName = sr.Properties["givenName"][0].ToString();
        string lastName = sr.Properties["sn"][0].ToString();
    } 
```

它有点复杂并且涉及 .NET 2.0 - 无法改变:-(

马克

# .net - 将 json.net 添加到项目中

> ID：924899
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T08:05:11.947
> 
>         
> 
> 标签：.net, visual-studio, json, json.net

我已经下载了 json.net。并通过单击添加引用添加 dll 文件。dll 文件现在出现在 bin 文件夹中。现在在代码中我尝试从 Json.net 调用函数

```
Imports Newtonsoft.Json.JsonReader
Partial Class _Default
    Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

End Sub
End Class 
```

我无法调用任何函数。即使在我写  的时候`Newtonsoft.Json.JsonReader`。没有出现的功能。

还有什么我想念的吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T08:36:07.033

这可能是因为 JsonReader 是一个抽象类，因此您不能创建它的实例并使用它的成员。尝试阅读 Json.net 文档，您可以在其中找到可以使用的类和成员。

我不确定您是否可以在不下载二进制文件的情况下下载文档，但您可以在[此处获得两者。](http://json.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=16593) 

# c - C 中 open(...O_DIRECT) 的可移植性？

> ID：924900
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T08:05:19.577
> 
>         
> 
> 标签：c, file, caching, disk

在 C 文件 I/O 中，该`O_DIRECT`标志可用于最小化正在`open()`编辑的文件的缓存影响。我知道这不是 POSIX 功能，自 2.4.10 版以来一直存在于 Linux 内核中，并且 Linus 通常反对该接口。在 NetBSD 下，它似乎像宣传的那样工作。示例调用：

```
int fd = 打开（文件名，O_DIRECT）；

```

我正在尝试编写一些低级磁盘基准测试实用程序，并且使用`O_DIRECT`看起来是测量磁盘和驱动器性能的潜在好方法，而不受操作系统文件系统/块缓存的影响。理想情况下，我希望能够在 Linux、Windows（Cygwin 可以）、Mac OS X 和 BSD 系统上运行基准测试。`O_DIRECT`就基准测试的可移植性和可靠性而言，绕过操作系统磁盘缓存的最佳方法是什么？有替代品吗？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2010-03-05T14:02:50.573

对于 Windows，您应该查看带有标志 FILE_FLAG_NO_BUFFERING 和 FILE_FLAG_WRITE_THROUGH 的 CreateFile 函数。（[http://msdn.microsoft.com/en-us/library/aa363858(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa363858(VS.85).aspx)）。但是你必须使用windows函数进行读写：SetFilePointer、WriteFile、ReadFile...

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T08:13:24.303

O_DIRECT 甚至在 Mac OS X 上都不存在（我只是在 /usr/include 中找到它，但它不存在）。至于 Linux，你的工具会做什么 hdparm 没有？

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T08:17:20.737

我认为 Windows 不支持它 - 至少我在 MSDN 中找不到任何提及。这意味着 Cygwin 可能也不支持它，因为 Cygwin 需要使用底层的 Windows 操作系统。

# asp.net - 从服务器端访问 html 控件

> ID：924911
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T08:08:39.133
> 
>         
> 
> 标签：asp.net, html

如何从 asp.net 中的代码访问 html 控件。我不想使用“runat=server”，因为它会导致问题。

我已经制作了一个空的 html 表，并且从我后面的代码中，我想将 <td> 添加到它。

请帮忙。

谢谢， 普拉奇

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T08:44:56.797

如果没有 runat="server"，这是不可能的。

你说这引起了问题。请说出它造成了什么问题。

* * *

您说您正在使用 getElementById 访问表？服务器控件的 ID 根据它所在的控件而变化。您需要获取更改后的 ID 才能使用：

```
var tab = getElementById("<%= myTable.ClientId %>"); 
```

或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T08:46:30.913

如果你想在后面的代码中访问它，你应该使用 runat=server 属性。

但也许您可以生成一些 javascript 代码，将 td/tr 添加到代码隐藏的表格中。您可以将它注册到您的页面以在启动时运行。  

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T08:46:36.217

运行=“服务器”

对于 table 和 tr 元素，后面的代码无法访问它们（因为这告诉框架将元素公开给服务器）。

你到底想做什么？您是否查看过[DataGrid](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datagrid.aspx)、[GridView](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.aspx)或简单的[Repeater](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.aspx)控件？这些允许您定义表结构并向其动态添加控件（通常通过数据绑定，尽管有一些方法可以将项目添加到他们的 ItemCollections）。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T08:53:37.403

您*可以*这样做的一种方法是添加一些内联脚本和公共字符串变量。在后面的代码中，创建一个公共类级变量：

```
public String myColumns 
```

然后在您的 Page_Load 事件中，将您的 HTML 创建为字符串并将其保存在您的 myColumns 变量中：

```
protected void Page_Load() {
//do stuff
myColumns = someStringWithTDTagsInIt
} 
```

然后在您的 .aspx 页面中，执行以下操作：

```
<table id=maintable"><tr><%=myColumns %></tr></table> 
```

它应该在您的 Page_Load 事件（或任何您想要的事件，如果您希望它在单击按钮或其他东西时加载）中呈现您的 HTML，而不使用“runat = server”标签。

请注意，这不是实现此目的的*推荐*方法（控件通常更有效），但这应该是您提出的问题的有效解决方案。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2010-01-07T12:00:39.593

简单的例子。

只需放置 runat="server" 即可访问 .

html 控件无法在服务器端访问。如果您放置 runat 服务器，则它可以在服务器中访问。

# jquery - 如何使用 jquery 制作简单的向下滑动 div

> ID：924914
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T08:09:57.117
> 
>         
> 
> 标签：jquery, html

好的，我是 jquery 的新手，只是在学习。我有一堆 div，我想在一个盒子里每 2 秒左右滑动一次。因此，例如，可能是一张苹果的图片，然后用橙色代替，等等......有没有一种简单的方法可以用 jquery 做到这一点？（我不关心访问者是否将鼠标悬停在 div 上，或者类似的东西）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T08:15:18.653

你的意思是这里的调低效应：http: [//malsup.com/jquery/cycle/](http://malsup.com/jquery/cycle/)？（甚至是[他们初学者演示页面上的向下滚动效果](http://malsup.com/jquery/cycle/begin.html)？）

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T08:15:44.487

jQuery 有可以使用的 slideDown 和 SlideUp 方法。例如，您可以有两个或多个 div 彼此重叠（使用适当的 z-index），然后使用上述方法显示适当的一个。

# css - 有没有办法使 DIV 不可选择？

> ID：924916
> 
>         
> 
> 赞同：157
> 
>         
> 
> 时间：2009-05-29T08:10:07.553
> 
>         
> 
> 标签：css

这是一个有趣的 CSS 问题给你！

我有一个带有透明背景的文本区域，上面覆盖了一些我想用作水印的文本。文本很大，占据了文本区域的大部分。看起来不错，问题是当用户单击文本区域时，有时会选择水印文本。我希望水印文本永远无法选择。我期待如果 z-index 中的某些内容较低，它将无法选择，但浏览器在选择项目时似乎并不关心 z-index 层。有没有什么技巧或方法可以让这个 DIV 永远无法选择？

* * *

## 回答 #1

> 赞同：228
> 
>             
> 
> 时间：2009-05-29T08:17:00.363

前段时间我写了一个简单的 jQuery 扩展来禁用选择：[Disabling Selection in **jQuery**](http://aleembawany.com/2009/01/20/disable-selction-on-menu-items-with-this-jquery-extension/)。您可以通过调用它`$('.button').disableSelection();`

或者，使用 CSS（跨浏览器）：

```
.button {
        user-select: none;
        -moz-user-select: none;
        -khtml-user-select: none;
        -webkit-user-select: none;
        -o-user-select: none;
} 
```

* * *

## 回答 #2

> 赞同：68
> 
>             
> 
> 时间：2011-04-07T13:37:08.887

以下 CSS 代码几乎适用于现代浏览器：

```
.unselectable {
    -moz-user-select: -moz-none;
    -khtml-user-select: none;
    -webkit-user-select: none;
    -o-user-select: none;
    user-select: none;
} 
```

对于 IE，必须使用 JS 或在 html 标签中插入属性。

```
<div id="foo" unselectable="on" class="unselectable">...</div> 
```

* * *

## 回答 #3

> 赞同：49
> 
>             
> 
> 时间：2014-07-18T18:06:20.877

只需在 css 中添加一些内容，即可更新 aleemb 的原始、备受赞誉的答案。

我们一直在使用以下组合：

```
.unselectable {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    -o-user-select: none;
    user-select: none;
} 
```

我们从以下网址获得了添加 webkit-touch 条目的建议：http: 

[//phonegap-tips.com/articles/essential-phonegap-css-webkit-touch-callout.html](http://phonegap-tips.com/articles/essential-phonegap-css-webkit-touch-callout.html)

2015 年 4 月：只是用可能派上用场的变体更新我自己的答案。如果您需要动态选择/不选择 DIV 并愿意使用[Modernizr](http://modernizr.com/)，则以下内容在 javascript 中可以很好地工作：

```
 var userSelectProp = Modernizr.prefixed('userSelect');
    var specialDiv = document.querySelector('#specialDiv');
    specialDiv.style[userSelectProp] = 'none'; 
```

* * *

## 回答 #4

> 赞同：22
> 
>             
> 
> 时间：2009-05-29T08:22:36.203

正如 Johannes 已经建议的那样，背景图像可能是仅在 CSS 中实现这一目标的最佳方式。

JavaScript 解决方案还必须影响“dragstart”才能在所有流行的浏览器中生效。

JavaScript：

```
<div onselectstart="return false;" ondragstart="return false;">your text</div> 
```

jQuery：

```
var _preventDefault = function(evt) { evt.preventDefault(); };
$("div").bind("dragstart", _preventDefault).bind("selectstart", _preventDefault); 
```

富有的

* * *

## 回答 #5

> 赞同：20
> 
>             
> 
> 时间：2014-11-23T07:02:45.987

您可以`pointer-events: none;`在您的 CSS中使用

```
div {
  pointer-events: none;
} 
```

* * *

## 回答 #6

> 赞同：6
> 
>             
> 
> 时间：2009-05-29T08:13:54.410

你可以试试这个：

```
<div onselectstart="return false">your text</div> 
```

* * *

## 回答 #7

> 赞同：6
> 
>             
> 
> 时间：2009-05-29T08:15:48.090

textarea 的简单背景图像还不够吗？

* * *

## 回答 #8

> 赞同：4
> 
>             
> 
> 时间：2010-12-11T11:30:19.563

WebKit 浏览器（即 Google Chrome 和 Safari）具有类似于 Mozilla 的 -moz-user-select:none 的 CSS 解决方案

```
.no-select{    
    -webkit-user-select: none;
    cursor:not-allowed; /*makes it even more obvious*/
} 
```

* * *

## 回答 #9

> 赞同：2
> 
>             
> 
> 时间：2013-04-17T08:31:11.437

同样在 IOS 中，如果您想摆脱出现在触摸屏上的灰色半透明覆盖，请添加 css：

```
-webkit-tap-highlight-color: rgba(0,0,0,0);
-webkit-touch-callout: none; 
```

* * *

## 回答 #10

> 赞同：-1
> 
>             
> 
> 时间：2014-12-09T09:26:13.623

利用

onselectstart="返回假"

它可以防止复制您的内容。

* * *

## 回答 #11

> 赞同：-1
> 
>             
> 
> 时间：2015-03-18T21:11:00.137

确保将位置显式设置为绝对或相对，以便 z-index 用于选择。我有一个类似的问题，这为我解决了。

* * *

## 回答 #12

> 赞同：-3
> 
>             
> 
> 时间：2016-07-02T16:53:12.737

不确定您的用例，但您可以使其可拖动。

# java - type="xsd:base64Binary" 的 Axis Web 服务

> ID：924921
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T08:12:20.717
> 
>         
> 
> 标签：java, web-services, axis

所以我有一个定义如下消息部分的wsdl

```
<wsdl:message name="processEnvelopeResponse">
    <wsdl:part name="processEnvelopeReturn" type="xsd:base64Binary"/>
</wsdl:message> 
```

这映射到一个 xsd，然后导入其他 xsd 等等。

我有以下问题：

1.  如何从 xsd 生成消息部分对象

> 忽略这个，我已经找到答案了，只要把xsd导入wsdl文件就可以了。稍后会更好地解释

2.  如何以允许我直接填充消息对象并将其通过网络传递的方式生成客户端对象

3.  我如何调用 web 服务，将生成的对象转换为 base64Binary（这个假设上述是不可能的）

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-07-24T09:53:15.033

因此，回答我自己的问题，我能够生成工件以从 xsd 列表中调用 Web 服务，但在调用 Web 服务时我无法使用它们。

所以我最终不得不手动生成 XML，幸运的是我这是一个小调用。

```
String input="XML";
byte[] s = port.processEnvelope(input.getBytes()); 
```

由于响应也来自 xsd:base64Binary，因此我必须将传入的字符串映射到 xml 对象中才能处理响应。

```
String xmloutput = new String(s,"UTF-8"); 
```

然后我把 xmloutput 通过 jdom 我得到了我的数据。

总而言之，实现网络服务的愚蠢方式。

# parsing - 解析源代码 - 不同语言的唯一标识符？

> ID：924929
> 
>         
> 
> 赞同：11
> 
>         
> 
> 时间：2009-05-29T08:14:14.427
> 
>         
> 
> 标签：parsing, language-agnostic, programming-languages

我正在构建一个接收源代码作为输入并分析代码的多个方面的应用程序。它可以接受来自许多常用语言的代码，例如 C/C++、C#、Java、Python、PHP、Pascal、SQL 等（但不支持许多语言，例如 Ada、Cobol、Fortran）。一旦知道了语言，我的应用程序就知道该做什么（我有不同的处理程序用于不同的语言）。

目前我要求用户输入编写代码的编程语言，这很容易出错：尽管用户知道编程语言，但其中一小部分（在极少数情况下）由于鲁莽而点击了错误的选项，这会破坏系统（即我的分析失败）。

在我看来，应该有一种方法可以（在大多数情况下）从输入文本本身找出语言是什么。几个注意事项：

*   我收到的是纯文本而不是文件名，所以我不能使用扩展名作为提示。

*   用户无需输入完整的源代码，也可以输入代码片段（即包含/导入部分可能不包含在内）。

*   我很清楚，我选择的任何算法都不是 100% 证明的，当然对于非常短的输入代码（例如 Python 和 Ruby 都可以接受），在这种情况下我仍然需要用户的帮助，但是我想尽量减少用户在流程中的参与，以尽量减少错误。

例子：

*   如果文本包含“x->y()”，我可以确定它是 C++ (?)

*   如果文本包含“public static void main”，我可以确定它是 Java（？）

*   如果文本包含“for x := y to z do begin”，我可以肯定它是 Pascal (?)

我的问题：

1.  您是否熟悉任何标准库/方法来自动确定输入源代码的语言是什么？

2.  什么是唯一的代码“令牌”，我当然可以用它来区分一种语言和另一种语言？

我正在用 Python 编写代码，但我相信这个问题与语言无关。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-05-29T08:30:05.767

Vim 有一个自动检测文件类型的特性。如果你下载 vim 源代码，你会发现 /vim/runtime/filetype.vim 文件。

对于每种语言，它都会检查文件的扩展名，并且对于其中一些（最常见的），它有一个可以从源代码中获取文件类型的函数。你可以检查一下。代码很容易理解，并且有一些非常有用的注释。

* * *

## 回答 #2

> 赞同：7
> 
>             
> 
> 时间：2009-05-29T16:17:55.890

构建一个通用标记器，然后对它们使用贝叶斯过滤器。使用现有的“用户勾选框”系统对其进行训练。

* * *

## 回答 #3

> 赞同：4
> 
>             
> 
> 时间：2009-09-08T06:37:21.323

这是一个简单的方法。只需在每种语言上运行解析器。无论哪种语言在没有遇到任何错误（或错误最少）的情况下走得最远，都会获胜。

该技术具有以下优点：

*   您已经拥有执行此操作所需的大部分代码。

*   分析可以在多核机器上并行完成。

*   大多数语言可以很快被淘汰。

*   这种技术非常强大。在使用模糊分析（例如 Baysian）时可能看起来非常相似的语言在运行实际解析器时可能会出现许多错误。

*   如果一个程序用两种不同的语言正确解析，那么一开始就没有任何区分它们的希望。

* * *

## 回答 #4

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T08:31:01.083

我知道一个甚至可以区分同一文件中几种不同语言的程序是[ohcount](http://labs.ohloh.net/ohcount)。你可能会在那里得到一些想法，虽然我真的不知道他们是怎么做到的。

一般来说，您可以寻找独特的模式：

*   运算符可能是一个指标，例如`:=`Pascal/Modula/Oberon，`=>`或者 C# 中的整个 LINQ

*   关键字将是另一种，因为可能没有两种语言具有相同的关键字集

*   标识符的大小写规则，假设代码的编写符合最佳实践。可能是一个非常弱的规则

*   标准库函数或类型。特别是对于通常严重依赖它们的语言，例如 PHP，您可能只使用一长串标准库函数。

您可以创建一组规则，如果匹配，每个规则都指示一组可能的语言。与结果列表相交有望只为您提供一种语言。

然而，这种方法的问题在于，您需要进行标记化和比较标记（否则您无法真正知道运算符是什么，或者您发现的内容是否在注释或字符串中）。不过，每种语言的标记化规则也不同；仅在空格和标点符号处拆分所有内容可能不会产生非常有用的标记序列。您可以尝试几种不同的标记化规则（每个规则也将指示一组特定的语言）并使您的规则与指定的标记化匹配。例如，尝试在带有一个注释的 VB 片段中查找单引号字符串（用于尝试 Pascal）可能会失败，但另一个标记器可能会更幸运。

但是，由于您无论如何都想执行分析，因此您可能有针对您支持的语言的解析器，因此您可以尝试通过每个解析器运行代码段并将其作为指示符（正如 OregonGhost 所建议的那样）。

* * *

## 回答 #5

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T08:59:19.857

我认为这个问题是不可能的。您能做的最好的事情就是想出某个程序使用特定语言的概率，即便如此，我猜想产生一个可靠的概率是非常困难的。一下子想到的问题：

*   使用 C 预处理器等功能可以有效地完全掩盖底层语言

*   寻找关键字是不够的，因为关键字可以在其他语言中用作标识符

*   寻找实际的语言结构需要您解析代码，但要做到这一点，您需要了解语言

*   您如何处理格式错误的代码？

这些似乎足以解决问题。

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T08:26:57.833

一些想法：

$x->y() 在 PHP 中是有效的，所以如果你认为是 C++，请确保没有 $ 符号（尽管我认为你可以将函数指针存储在 C 结构中，所以这也可能是 C）。

`public static void main`如果大小写正确，它是 Java - 编写 Main 并且它是 C#。如果考虑到许多脚本语言或 Pascal 等不区分大小写的语言，这会变得复杂。另一方面，C# 中的 [] 属性语法似乎相当独特。

您也可以尝试使用一种语言的关键字——例如，`Option Strict`或者`End Sub`是 VB 等的典型关键字，而`yield`C# 和`initialization`/`implementation`是 Object Pascal/Delphi。

如果您的应用程序无论如何都在分析源代码，那么您的代码尝试将您的分析代码扔给每种语言，如果它真的失败了，那是错误的语言:)

* * *

## 回答 #7

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T08:46:20.943

我的方法是：

创建一个字符串或正则表达式列表（区分大小写和不区分大小写），其中每个元素都分配了一个语言列表，该元素是其指示符：

*   类 => C++、C#、Java

*   接口 => C#、Java

*   实现 => Java

*   [属性] => C#

*   程序 => 帕斯卡，模数

*   创建表/插入/ ... => SQL

等然后逐行解析文件，匹配列表的每个元素，并计算命中。

点击次数最多的语言获胜；）

* * *

## 回答 #8

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T09:23:24.723

词频分析（有点扭曲）怎么样？解析源代码并对其进行分类，就像垃圾邮件过滤器一样。这样，当无法 100% 识别的代码片段输入到您的应用程序时，您可以让它显示用户可以从中选择的最接近的匹配项 - 然后可以将其输入您的数据库。

* * *

## 回答 #9

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T10:36:03.453

这是给你的一个想法。对于您的 N 种语言中的每一种，找到该语言中的一些文件，每种语言 10-20 个就足够了，每个文件都不会太短。将一种语言的所有文件连接在一起。调用这个 lang1.txt。GZip 到 lang1.txt.gz。您将拥有一组 N langX.txt 和 langX.txt.gz 文件。

现在，获取相关文件并将其附加到每个 langX.txt 文件，生成 langXapp.txt 和相应的 gzip 压缩 langXapp.txt.gz。对于每个 X，找出 langXapp.gz 和 langX.gz 的大小之间的差异。最小的差异将对应于文件的语言。

免责声明：这仅适用于较长的文件。此外，它的效率不是很高。但从好的方面来说，你不需要了解任何关于语言的知识，它是完全自动的。它还可以检测自然语言并区分法语或汉语。以防万一你需要它:)但主要原因，我只是觉得尝试一下很有趣:)

* * *

## 回答 #10

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T09:26:37.540

最防弹但也是工作量最大的方法是为每种语言编写一个解析器，然后按顺序运行它们，看看哪个会接受代码。如果代码有语法错误，这将无法正常工作，并且您很可能不得不处理这样的代码，人们确实会犯错误。实现这一点的快速方法之一是为您支持的每种语言获取通用编译器，然后运行它们并检查它们产生了多少错误。

启发式方法在一定程度上起作用，您支持的语言越多，您从它们那里获得的帮助就越少。但是对于最初的几个版本，这是一个好的开始，主要是因为它实现速度很快，并且在大多数情况下工作得很好。您可以检查特定关键字、经常使用的 API 中的函数/类名称、某些语言结构等。最好的方法是检查文件对于每种可能的语言有多少这些特定内容，这将有助于解决一些语法错误，用户定义的函数，其名称如`this()`没有此类关键字的语言、注释和字符串文字中的内容。

无论如何，您有时很可能会失败，因此仍然需要一些用户覆盖语言选择的机制。

* * *

## 回答 #11

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T08:39:10.693

很有意思的问题，不知道能不能通过代码片段来区分语言，不过这里有一些思路：

*   一种简单的方法是注意单引号：在某些语言中，它用作字符包装，而在其他语言中，它可以包含整个字符串

*   一元星号或一元 & 运算符明确表明它是 C/C++/C# 之一。

*   Pascal 是唯一一种使用两个字符进行赋值的语言（在给定的语言中）`:=`。Pascal 也有许多独特的关键字（开始、子、结束……）

*   使用[函数初始化类](http://www.javaworld.com/javaworld/jw-11-2001/jw-1102-java101.html?page=5)可能是 Java 的一个很好的提示。

*   不属于一个类的函数消除了java（`max()`例如没有）

*   基本类型的命名（bool vs boolean）

*   这提醒了我：C++ 在不同的项目中看起来会*非常*不同（`#define boolean int`）所以你永远不能保证你找到了正确的语言。

*   如果您通过散列算法运行源代码并且看起来相同，那么您很可能正在分析 Perl

*   缩进是 Python 的一个很好的提示

*   您可以使用语言本身提供的函数（例如[`token_get_all()`](http://us.php.net/manual/en/function.token-get-all.php)PHP）或第三方工具（例如Python 的[pychecker](http://pychecker.sourceforge.net/)）来检查语法

总结：这个项目会写出一篇有趣的研究论文（恕我直言），如果你想让它运作良好，请准备好投入**大量**精力。

* * *

## 回答 #12

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T10:15:00.860

我认为你永远不应该依赖一个单一的功能，因为片段中的缺失（例如有人系统地使用 WHILE 而不是 for）可能会让你感到困惑。

还要尽量远离全局标识符，如“IMPORT”或“MODULE”或“UNIT”或 INITIALIZATION/FINALIZATION，因为它们可能并不总是存在，在完整源中是可选的，并且在片段中完全不存在。

方言和类似的语言（例如 Modula2 和 Pascal）也很危险。

我会为一堆跟踪关键标记的语言创建简单的词法分析器，然后简单地计算一个关键标记与“其他”标识符的比率。给每个标记一个权重，因为有些标记可能是消除方言或版本之间歧义的关键指标。

请注意，这也是允许用户插入“已知”关键字以增加检测率的便捷方式，例如提供运行时库例程或类型的标识符。

* * *

## 回答 #13

> 赞同：1
> 
>             
> 
> 时间：2009-06-03T07:13:28.023

没有办法做到万无一失，但我个人会从运算符开始，因为它们在大多数情况下是“一成不变的”（我不能说这适用于所有语言，因为我只知道有限的一组）。这将大大缩小范围，但还不够。例如，“->”用于许多语言（至少 C、C++ 和 Perl）。

我会去做这样的事情：

为每种语言创建一个特征列表，这些可能是运算符、评论风格（因为大多数使用某种易于检测的字符或字符组合）。

例如：某些语言的行以字符“#”开头，包括 C、C++ 和 Perl。除了前两个之外，其他人在他们的词汇表中使用#include 和#define 吗？如果您在行首检测到此字符，则该语言可能就是其中之一。如果字符在行的中间，则语言很可能是 Perl。

此外，如果您找到模式 := 这会将其范围缩小到一些可能的语言。

等等。

我将有一个包含找到的语言和模式的二维表，经过分析，我会简单地计算哪种语言的“命中率”最多。如果我想让它变得非常聪明，我会给每个功能一个权重，这将表示该功能包含在该语言的片段中的可能性有多大。例如，如果您可以找到一个以 /* 开头并以 */ 结尾的片段，那么它很可能是 C 或 C++。

关键字的问题是有人可能将其用作普通变量，甚至在注释中使用。它们可以用作决定者（例如，如果其他一切都相同，则 C++ 中的“类”一词比 C 更可能），但您不能依赖它们。

在分析之后，我会提供最有可能的语言作为用户的选择，其余的命令也是可选的。因此，用户只需单击一个按钮即可接受您的猜测，或者他可以轻松切换。

* * *

## 回答 #14

> 赞同：1
> 
>             
> 
> 时间：2009-06-03T07:36:17.663

回答 2：如果有“#！” 和翻译的名字，那么你肯定知道它是哪种语言。（不敢相信其他人没有提到这一点。）

# command-prompt - 是否可以将可执行文件传递给 MS-DOS 程序？

> ID：924935
> 
>         
> 
> 赞同：-5
> 
>         
> 
> 时间：2009-05-29T08:15:53.550
> 
>         
> 
> 标签：command-prompt

是否可以将a  作为参数传递`ELF 32-bit LSB executable(a.exe), version 1 (SYSV)`给 a ？`MS-DOS executable (EXE) (b.exe), OS/2 or MS Windows`反过来也行？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T08:20:07.910

您可以将路径传递给可执行文件，而不是传递可执行文件？

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-06-11T01:34:29.770

不，不可能通过命令行传递 exe，最接近的方法是将其通过管道输入，但您必须在标准输入上执行 setmode 到二进制。但更好的解决方案是将exe的路径传递给您的仿真加载器，让它加载exe并通过缓冲区/指针/引用将数据传递给模拟器。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-06-11T01:42:50.283

转到命令行并（假设您要将路径传递给“a.exe”）键入“a.exe /？”

它是否提供了有关如何将“b.exe”传递给它的说明？

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2011-03-02T13:31:58.737

我相信在 Linux 上使用 wine 是可能的。

# html - 使用 iframe 或 Object 标签将网页嵌入另一个

> ID：924946
> 
>         
> 
> 赞同：33
> 
>         
> 
> 时间：2009-05-29T08:20:50.293
> 
>         
> 
> 标签：html, iframe, object

在我维护的最近上线的基于 Web 的系统中，它创建了一个 Object 元素以在主网页中嵌入第二个网页。（实际上主网页包含菜单和标题，主应用程序页面在对象中）

例如

```
<object id="contentarea" standby="loading data, please wait..."  
    title="loading data, please wait..." width="100%" height="53%" 
    type="text/html" data="MainPage.aspx"></object> 
```

此应用程序的旧版本使用 IFRAME 来执行此操作。我发现通过使用对象标签，嵌入式网页的行为与以前托管在 IFRAME 中时的行为不同。例如，在 IE 中，工具提示不起作用（我将发布一个单独的问题！），并且看起来嵌入页面无法访问脚本中的父页面，尽管如果它是 IFRAME 则可以.

我被告知在 IFRAME 上偏爱对象标签的原因是 IFRAME 已被弃用，因此不能依赖于未来版本的浏览器。这是真的吗？是否最好在 iframe 上使用 Object 标签来嵌入网页？或者 IFRAME 是否有可能在未来得到很好的支持（在我老了很久之后，并且过了我维护的应用程序的使用寿命之后）？

* * *

## 回答 #1

> 赞同：45
> 
>             
> 
> 时间：2009-05-29T08:48:04.903

[IFRAME 元素](http://www.whatwg.org/specs/web-apps/current-work/#the-iframe-element)是[即将到来的 HTML5 标准](http://www.whatwg.org/specs/web-apps/current-work/)的一部分。此外，HTML5 是由主要的浏览器供应商（Mozilla、Opera、Safari、IE）开发的，这基本上保证了我们将在可预见的将来拥有 IFRAME 元素。其中一些已经支持一些 HTML5 元素，如 AUDIO 和 VIDEO 以及一些新的 JavaScript API。

[OBJECT 元素在 draft 中](http://www.whatwg.org/specs/web-apps/current-work/#the-object-element)也是如此，但那是因为 IFRAME 和 OBJECT 将有不同的用途。IFRAMES 主要用于沙盒 Web 应用程序。

所以，我的建议是使用 IFRAME 而不是 OBJECT。

* * *

## 回答 #2

> 赞同：9
> 
>             
> 
> 时间：2015-09-29T21:54:12.720

`iframe`如果您要嵌入 HTML 页面，这里是和之间的一个明显区别`object`：

*   更新`iframe`将`src`更改浏览器历史记录（添加新条目）

*   更新`object`不会`data`改变浏览器历史

此外，如果页面嵌入在标签中，拖放似乎不起作用`object`，但在`iframe`标签中起作用。我注意到它亲自使用`react-draggable`，我可以看到有人有同样的问题（[https://stackoverflow.com/questions/31807848/replacing-iframe-with-object-tag-drag-and-drop-not-working](https://stackoverflow.com/questions/31807848/replacing-iframe-with-object-tag-drag-and-drop-not-working)）

* * *

## 回答 #3

> 赞同：8
> 
>             
> 
> 时间：2009-05-29T08:28:24.913

IFRAME 不是 XHTML 1.0 Strict DTD 的一部分。我相信它们在 HTML 4 和 XHTML 1.0 Transitional 中完全有效。仅出于这些原因，IFRAME 将在很长一段时间内继续得到支持。

许多书签和分析代码仍然使用 IFRAME。

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T08:38:39.837

尽管 W3C 规范可能表明 IFRAME 标记已被弃用（至少在 XHTML 中），但浏览器开发人员不一定完全遵循这些规范所说的内容（IE6 有人吗？）

由于目前 IFRAME 的使用如此普遍，而且 W3C 似乎无法确定它们是否是未来的一部分（HTML 4.01 与 XHTML），我很确定它们是几乎所有使用的更安全的实现浏览器。

# c - 在 C 中解析字符串

> ID：924955
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-29T08:23:43.847
> 
>         
> 
> 标签：c, string, parsing, str-replace

仅使用 C

我想解析一个字符串并且：

1.  计算字符串中某个字符的出现次数（例如，计算`'e'`传入字符串中的所有 s）

2.  一旦计数（或者甚至在我计数时）用 3 替换 e

* * *

## 回答 #1

> 赞同：9
> 
>             
> 
> 时间：2009-05-29T08:34:48.190

好吧，你要么是懒惰，要么是卡住了，假设卡住了。

您需要一个带有签名的函数，例如

```
int ReplaceCharInString(char* string, char charToFind, char charThatReplaces)
{

} 
```

在你需要的功能里面

1.  声明一个整数来计算出现次数

2.  从字符串的开头移动到结尾的循环

3.  在循环内部，要检查的 if 语句是当前字符 charToFind，

4.  增加出现次数并执行替换的语句

5.  在循环之后，您需要返回出现次数

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T08:37:26.267

此函数将接受一个字符串，将每个 'e' 替换为 '3'，并返回它执行替换的次数。它安全、干净、快速。

```
int e_to_three(char *s)
{
    char *p;
    int count = 0;
    for (p = s; *p; ++p) {
        if (*p == 'e') {
            *p = '3';
            count++;
        }
    }
    return count;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T09:50:20.097

一般来说，最好使用标准库函数而不是自己滚动。而且，碰巧的是，有一个标准库函数可以在字符串中搜索一个字符并返回一个指向它的指针。（它处理一个字符串，所以请查看具有前缀“str”的函数）（库函数几乎肯定会被优化为使用专门的 CPU 操作码来执行任务，而手写代码则不会）

1.  将临时指针（比如“ptr”）设置到字符串的开头。

    *   在一个循环中，使用ptr作为参数调用上面的函数，并将其设置为返回值。

    *   增加一个计数器。

    *   当找不到'e'时，将指针处的字符设置为“3”中断。

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T08:35:29.483

这是一个帮助您入门的外壳。在这里询问您是否需要任何帮助。

```
#include <string.h>
#include <stdio.h>

int main(){
    const char* string = "hello world";
    char buffer[256];
    int e_count = 0;
    char* walker;

    // Copy the string into a workable buffer
    strcpy(buffer,string);

    // Do the operations
    for(walker=buffer;*walker;++walker){
        // Use *walker to read and write the current character
    }

    // Print it out
    printf("String was %s\nNew string is %s\nThere were %d e's\n",string,buffer,e_count);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T10:35:48.853

你们中的一些人是从中间开始的。

一个更好的开始将是

```
char *string = "hello world";
Assert(ReplaceCharInString(string, 'e', '3') == 1);
Assert(strcmp(string, "h3llo world") == 0); 
```

# c# - 如何将事件接收器附加到共享点中的自定义列表？

> ID：924964
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-05-29T08:26:23.263
> 
>         
> 
> 标签：c#, sharepoint

将事件接收器附加到 sharepoint 中的自定义列表需要哪些步骤？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T10:00:01.950

这可以通过至少两种不同的方式来完成：

1.  创建一个功能，在功能激活后，您有适当的代码附加到特定列表（[使用此 URL](http://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopment/thread/6ca86d4f-5c8c-4e48-8940-811799260e36)获得一些帮助）

2.  或者您可以有一个控制台应用程序，该应用程序将代码附加到特定列表（再次使用与上述 URL 中相同的代码）

如需进一步帮助[，请访问此处](http://www.davehunter.co.uk/Blog/Lists/Posts/Post.aspx?ID=69)。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T11:24:16.243

有几种方法可以将 EventReceiver 附加到列表、ContentType 或站点。看看[Brian Wilson 的关于这个主题的博客文章](http://blogs.msdn.com/brianwilson/archive/2007/03/18/event-handlers-part-3-register-event-handlers-plus-free-site-settings-manage-event-handlers-add-on.aspx)，并描述了几种方法来做到这一点。

他还开发了一个 SharePoint 功能，该功能部署了一个配置页面，您可以在其中通过 UI 附加和删除 EventReceiver。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2013-10-07T17:01:23.320

您可以转到元素文件并编辑标签 Receivers，将属性 ListUrl 的值更改为您的 URL，例如，如果您的列表称为客户，插入`<Receivers ListUrl="Lists/Customers">`
 试试这个，祝你好运

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2020-01-24T09:46:23.637

您所要做的就是替换 Elements.xml 中的以下行：

```
<Receivers ListTemplateId="*number*"> 
```

和

```
<Receivers ListUrl="Lists/*your list name*"> 
```

**请注意**，“Url”只有第一个字符大写

# java - 如何使用使用 SSL 和通配符/自签名证书保护的 Maven 2 存储库？

> ID：924968
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-29T08:27:05.837
> 
>         
> 
> 标签：java, maven-2, ssl, keytool

我正在尝试通过使用自签名证书保护的 SSL 使用 Maven 2 存储库。我按照[HTTPS 和 Java 中的自签名证书中](http://cvs.peopleware.be/training/maven/maven2/selfSignedSslCertificates.html)的说明进行操作，但我没有工作。

我认为是因为证书是通配符证书。所以我想知道我是否应该做一些不同的事情来导入通配符证书？

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-06-03T01:29:08.953

毕竟问题不在于使用通配符证书。我必须将用于签署服务器证书的 CA 证书导入**jssecacerts**密钥库而不是**cacerts**：

```
keytool -keystore %JAVA_HOME%\jre\lib\security\jssecacerts -import -file cacert.pem 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2014-12-14T15:21:27.540

而是篡改所有java应用程序的证书，生成一个单独的只有maven使用的证书文件，然后使用MAVEN_OPTS设置-D参数。

-Djavax.net.ssl.trustStore=/private/${ACCOUNT}/java/keystore.pks -Djavax.net.ssl.trustStorePassword=${PASSWORD}

见：
 [https ://developer.cloudbees.com/bin/view/DEV/Maven+with+untrusted+SSL+Certificates](https://developer.cloudbees.com/bin/view/DEV/Maven+with+untrusted+SSL+Certificates)

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T09:49:39.303

*   尝试`-Djavax.net.debug=ssl`按照该页面的建议使用并包含输出

*   验证您认为问题是通配符的假设 - 尝试使用非通配符自签名证书

# java - 如何使用 Maven 的程序集插件将 Implementation-Version 值添加到 jar 清单？

> ID：924969
> 
>         
> 
> 赞同：9
> 
>         
> 
> 时间：2009-05-29T08:27:56.817
> 
>         
> 
> 标签：java, maven-2, build-process, jar, manifest

我想使用 maven 程序集插件在我的 jar 文件中的清单中添加一个 Implementation-Version 行，以反映 POM 版本号。

请注意，这与[我最近](https://stackoverflow.com/questions/921667/how-do-i-add-an-implementation-version-value-to-a-jar-manifest-using-maven/921753)关于 jar 插件的另一个问题相似但不同。

* * *

## 回答 #1

> 赞同：12
> 
>             
> 
> 时间：2009-05-29T08:32:48.007

其实我是个傻瓜..你这样做的方式完全相同，即

```
<configuration>
 <archive>
  <manifest>
   <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
  </manifest>
 </archive>
</configuration> 
```

愚蠢的问题。应该先尝试一下，真的。

# msbuild - Msbuild 根据目标参数列表复制到多个位置？

> ID：924972
> 
>         
> 
> 赞同：7
> 
>         
> 
> 时间：2009-05-29T08:28:26.300
> 
>         
> 
> 标签：msbuild, copy, msbuild-task, msbuild-propertygroup

我有一个要复制到多个位置的目录。

说我有

*   主页.aspx

我想把它复制到

*   abc/home.aspx

*   def/home.aspx

*   ghi/home.aspx

所以我有两个问题：

*   如何定义列表 abc、def、ghi？

*   如何使用此列表的每个元素执行我的复制任务？

* * *

## 回答 #1

> 赞同：10
> 
>             
> 
> 时间：2009-06-09T15:23:13.543

这是我放在一起的一个实际示例，它显示了您正在寻找的内容：

```
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="Test" ToolsVersion="3.5">

  <!--Declare an ItemGroup that points to your file you want to copy.-->
  <ItemGroup>
    <ItemToCopy Include=".\Home.aspx" />
  </ItemGroup>

  <!--Declare an ItemGroup that points to your destination Locations-->
  <ItemGroup>
    <DestLocations Include=".\abc\home.aspx" />
    <DestLocations Include=".\def\home.aspx" />
    <DestLocations Include=".\ghi\home.aspx" />
  </ItemGroup>

  <Target Name="CopyFiles">
    <!--Run the copy command to copy the item to your dest locations-->
    <!--This is where the magic happens.  The % sign before the DestLocations reference says to use
    Batching.  So Copy will be run for each unique FullPath MetaData in the DestLocations ItemGroup.-->
    <Copy SourceFiles="@(ItemToCopy)" DestinationFolder="%(DestLocations.FullPath)" />
  </Target>
</Project> 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-06-01T13:49:42.720

您应该感兴趣的概念称为[Batching](http://msdn.microsoft.com/en-us/library/ms171473(VS.80).aspx)。

我已经在我的博客[http://www.sedodream.com/PermaLink,guid,5f1e0445-ce3d-4052-ba80-42fd19512d42.aspx中介绍了这个确切的场景](http://www.sedodream.com/PermaLink,guid,5f1e0445-ce3d-4052-ba80-42fd19512d42.aspx)

这是该博客条目的文本，您可以在上面的链接中下载提到的文件。

* * *

今天有人告诉我一位同事遇到了 MSBuild 问题。他告诉我他正试图将一组文件复制到一组不同的服务器上。但问题是他不知道如何在不执行多个复制任务调用的情况下实现这一点。我告诉他，他可以使用 MSBuild Batching 实现这一目标。批处理是一次对一组项目（批次）执行任务（或目标）的过程。一个批次还可以包括单个项目。所以在这种情况下，我们需要为他想要部署到的每台服务器执行一次复制。我创建了一个简单的 msbuild 文件，它以两种不同的方式演示了这一点。第一种方式使用任务批处理，可以在 Test 目标中看到。另一个使用目标批处理，可以在 DoItCore 目标中看到。我还创建了一个干净的目标，

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="Test">

      <ItemGroup>
            <SourceFiles Include="*.txt"/>
            <Dest Include="One;Two;Three;Four;Five"/>
      </ItemGroup>

      <Target Name="Test">
            <Copy SourceFiles ="@(SourceFiles)" DestinationFolder="%(Dest.FullPath)"/>
            <Message Text="Fullpath: %(Dest.FullPath)"/>
      </Target>

      <!-- These targets demonstrate target batching -->
      <Target Name="DoIt" DependsOnTargets="DoItCore"/>
      <Target Name="DoItCore" Inputs="@(SourceFiles)" Outputs="%(Dest.FullPath)">
            <Copy SourceFiles="@(SourceFiles)" DestinationFolder="%(Dest.FullPath)"/>
      </Target>

      <!-- This will clean up the files -->
      <Target Name="Clean">
            <CreateItem Include="%(Dest.FullPath)\**\*">
                  <Output ItemName="FilesToDelete" TaskParameter="Include"/>
            </CreateItem>
            <Delete Files="@(FilesToDelete)"/>
      </Target>
</Project> 
```

批处理是 MSBuild 的高级主题，肯定会被忽略。我不得不承认我自己没有写足够的东西而感到内疚。有一些很好的批处理资源，它们在下面列出。

* * *

这是我发布的其他一些与批处理相关的博客条目。

*   [MSBuild 批处理第 1 部分](http://www.sedodream.com/PermaLink,guid,5f1e0445-ce3d-4052-ba80-42fd19512d42.aspx)

*   [MSBuild 批处理第 2 部分](http://www.sedodream.com/PermaLink,guid,b721bc22-c375-4e1e-bcc9-512dd64096bb.aspx)

*   [MSBuild 批处理第 3 部分](http://www.sedodream.com/PermaLink,guid,cab57d7f-9d6e-4358-8491-dc033fb3bacc.aspx)

*   [MSBuild RE：在团队构建中强制构建代理](http://www.sedodream.com/PermaLink,guid,096a2e3f-fcff-4715-8d00-73d8f2491a13.aspx) 

谢谢，赛义德·易卜拉欣·哈希米

我的书：[Microsoft Build Engine 内部：使用 MSBuild 和 Team Foundation Build](https://rads.stackoverflow.com/amzn/click/com/0735626286)

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T08:39:48.913

你真的最好把它当作一个学习练习，而不是把 MSBUILD 当作一个魔法盒子。  [Patrick Smacchia 的这篇文章](http://www.codeproject.com/KB/books/msbuild.aspx)为您提供了所涉及的大部分技术。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-31T02:08:30.507

有一个项目组，您可以在其中建立此目的地列表（“<Destination>abc</Destination>...等）。然后使用此列表（@Destination）调用复制任务。

如果您搜索它，我相信您会找到很多示例。[http://keithhill.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&_c=BlogPart&partqs=cat%3dMSBuild](http://keithhill.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&_c=BlogPart&partqs=cat%3dMSBuild)

# wpf - DelegateCommand 是否与“附加行为”相同？

> ID：924978
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-05-29T08:30:15.923
> 
>         
> 
> 标签：wpf, silverlight, mvvm, delegatecommand

我一直在使用CodePlex的[MVVM Visual Studio 模板中的](http://wpf.codeplex.com/Wiki/View.aspx?title=WPF%20Model-View-ViewModel%20Toolkit)**DelegateCommand 。**这对于让 View 能够在其 ViewModel 上执行命令**非常有效。**

 **我在某处读到应该在 MVVM 中使用“**附加行为**”。据我所知，“附加行为”是与 DelegateCommand 相同类型的模式，但**Silverlight**使用它，因为它没有命令。

这是**正确的**吗？或者，除了 DelegateCommand 之外，“附加行为”是否具有不同的性质并且值得学习？

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-05-29T08:57:00.330

DelegateCommand（或 RelayCommand，几乎相同，但接受参数）只是 ICommand 接口的轻量级实现，它允许 ViewModel 轻松公开命令。

附加行为是将事件链接到命令的一种方式。例如，大多数 WPF 控件没有 Command 属性，因此您通常无法定义命令来对其事件做出反应。通过附加行为，您可以将任何控件的任何事件“绑定”到 ViewModel 的命令。看看[Marlon Grech 的实现](http://marlongrech.wordpress.com/2008/12/13/attachedcommandbehavior-v2-aka-acb/)，这对我来说似乎是最灵活的

# asp.net-mvc - 替换 LINQ 中的实体

> ID：924979
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-05-29T08:30:38.357
> 
>         
> 
> 标签：asp.net-mvc, linq, replace

我在 ASP.NET MVC 中使用编辑视图，编辑后它返回编辑后的实体。将编辑后的值返回数据库的最佳方法是什么。

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Edit(int id, Movies EditedMovie)
    {
        var orginalMovie = _db_linq.Movies.First(e => e.Id == id);
        if (!ModelState.IsValid)
            return View(orginalMovie);

        _db_linq.Movies.Attach(EditedMovie, true);
        _db_linq.SubmitChanges();

        return RedirectToAction("Index");
    } 
```

返回错误“无法使用已在使用的键添加实体。”

`orginalMovie = EditedMovie;`不起作用，我也有单独复制每个属性，即

```
orginalMovie.Name = EditedMovie.Name; 
```

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T08:40:42.860

**对于实体框架**：

改变：

```
 _db_linq.Movies.Attach(EditedMovie, true); 
```

到：

```
 _db_linq.Movies.ApplyPropertyChanges(EditedMovie); 
```

* * *

## 回答 #2

> 赞同：-1
> 
>             
> 
> 时间：2009-05-29T08:50:25.460

我从未使用过，但存在：http: [//msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.applypropertychanges.aspx](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.applypropertychanges.aspx)

# javascript - 使用 ASP.NET 3.5 的每个用户操作上的“请稍候”图像

> ID：924984
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-29T08:32:42.470
> 
>         
> 
> 标签：javascript, dom, dom-events, updatepanel, asp.net-3.5

在我们的 ASP.NET 3.5 应用程序中，我们希望实现“请稍候..”功能：在每个用户操作（按钮单击、选项卡更改等）上，我们将在页面顶部显示一个小微调器（实际上在我们已经使用了一个单独的框架）。

我们想到了这个解决方案：

1.  “劫持”`_doPostBack`拦截每个事件，显示微调器图像，然后执行原始`_doPostBack`功能

2.  在 ASP.NET 代码隐藏中注册一个客户端脚本块以在处理结束时隐藏图像

我的问题是：您认为这是一个好的解决方案吗？它当然不是很优雅，但似乎很有效。是否有另一种解决方案/模式来做这种事情？

PS：我们不使用 JQuery，我们使用`UpdatePanels`

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T12:03:00.750

由于您已经在使用 UpdatePanel，您只需向页面添加一个[UpdateProgress](http://msdn.microsoft.com/en-us/library/bb386421.aspx)控件并将其关联到您的 UpdatePanel。

这将在从 UpdatePanel 内部启动部分回发时自动显示，并在请求完成后隐藏。

下面是一个示例，只需将 img 标签指向一个微调器图像。您可以将控件放置在您希望它出现的位置。

```
<asp:UpdateProgress runat="server" AssociatedUpdatePanelID="updatePanel1">
  <ProgressTemplate>
    <img src="./images/somespinner.gif" />Please wait...
  </ProgressTemplate>
</asp:UpdateProgress> 
```

* * *

## 回答 #2

> 赞同：-1
> 
>             
> 
> 时间：2009-05-29T08:42:21.687

我确定您可以将进度指示器附加到 UpdatePanel。无论是通过事件处理程序还是通过属性，我都不记得是哪个，已经有一段时间了，我使用的是 jQuery 而不是 UpdatePanels。

富有的

# delphi - 如何使用 Delphi 将部分透明的图像打印到 PDF Canvas？

> ID：924986
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-05-29T08:33:22.953
> 
>         
> 
> 标签：delphi, pdf, printing, canvas, transparency

我的程序需要向打印机输出一个（相当复杂的）表格，包括几个图像。`Printer.Canvas`在选择 PDF 打印机 (PDF995) 后，我目前正在使用 Delphi (2006) 执行此操作。这就像一种享受。

但是，我现在遇到了一个问题：需要将一个部分透明的图像放置在其他元素（边框、背景等）之上，而该文本的某些部分仍然可以通过图像的某些部分看到。

通过使用该属性，在常规屏幕上执行此操作对`Canvas`常规 s 效果很好。但是，当我尝试在打印机上执行此操作时，它并不总是有效。当我在 PDF 打印机上尝试此操作时，它永远不会起作用：背景变黑，或者（迄今为止最好的结果）变白，但仍会覆盖其下方的任何内容。`TBitmap``TransparentColor`

我尝试通过在 Word 文档中插入具有 alpha 透明度（又名半透明）的 PNG 图像，然后将其发送到所述 PDF 打印机来实现相同的结果。半透明度消失，但像素透明度保持不变。因此，至少应该以某种方式成为可能。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-05-30T07:39:48.607

您提到您正在使用 TransparentColor 属性，所以说您真的不需要 alpha 透明度并且可以使用二进制透明度（每个像素的透明度关闭或打开）是否正确？

如果是这样，则可以从您的位图中生成一个区域。

然后将此区域用作剪切区域并绘制位图。

PDF 打印机可能能够正确处理剪切区域。

这是从位图生成区域的示例，它用于制作非矩形形式，但想法相同：
 http: [//www.delphi-central.com/BitmapShapedForm.aspx](http://www.delphi-central.com/BitmapShapedForm.aspx)

这是为您的 TCanvas 设置剪辑区域的另一个示例：
 [http ://www.efg2.com/Lab/OtherProjects/PrinterDemo2.htm](http://www.efg2.com/Lab/OtherProjects/PrinterDemo2.htm)

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T13:08:55.703

我认为您无法使用 pdf 打印机实现部分透明度。您可以做的是获取[VisPDF](http://www.vispdf.com/)包。有了它，您可以为您在应用程序中实际生成的 pdf 中包含的图像添加蒙版。如果这不是一个选项，您可以将所有背景内容合并到一个图像中。在这张图片上绘制 alphachanneled 的东西。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-05-29T17:55:07.917

我之前也遇到过这个问题，如果我没记错的话，我最终做的是创建一个我操作的屏幕外位图，然后在我再次复制完成并在我发送到打印机的画布​​上使用新的位图副本.

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-05-30T02:35:38.163

您可能需要考虑在应用程序中使用第三方 PDF 组件将画布直接呈现为 PDF。我在为红外热像仪开发的商业产品中使用这种技术进行专业报告（RTF、Radioemtric JPEG、表格、文本等）。我对性能和质量非常满意。我正在使用[llPDFLib](http://www.llion.net/llpdflib.php)的组件刚刚更新，我相信现在支持全图像透明度。

祝你好运。根据我的经验，使用 Alpha 通道打印图像有时会很有挑战性。

# java - JDBC批量更新问题

> ID：924988
> 
>         
> 
> 赞同：9
> 
>         
> 
> 时间：2009-05-29T08:33:28.710
> 
>         
> 
> 标签：java, jdbc, batch-file

我对 Java-JDBC API 和 Oracle 数据库有一个稍微独特的要求。我将 autoCommit 设置为默认值，这对于 Oracle 是正确的，并且我正在使用类似于此[链接](http://www.exampledepot.com/egs/java.sql/BatchUpdate.html)的示例。

但是，当我添加说 1000 个批次并假设每个批次都是插入时。让我们假设大约 20 条记录违反了某些约束，我希望剩余的 980 条记录到数据库并忽略 20 条记录。在上面的示例中，当一行违反任何事务**时，即使我在 catch 块中提交，事务也只会提交到第一次失败**。

我知道只有当您相当确定所有行都将通过并且异常处理不是一个时才进行批量更新，但我计划修补现有数据库，因此某种“不良做法”是可以的:) 任何代码示例都会高度赞赏。

**** 更多细节 ****

使用简单插入/更新是不行的，因为我正在处理接近 3M 行，所以每 1000 条记录进行批处理。与批量更新 < 300 毫秒相比，简单地在循环中添加 1000 个插入（忽略异常）会花费更多时间（每 1000 条记录大约需要 5 秒）。

问题：使用 Oracle 数据库，驱动程序似乎在第一次失败时停止，即当批处理 1000 行并且第 100 行失败时，我希望它继续运行到第 1000 行。我认为这不能在 JDBC（使用 Oracle）中完成 就像[链接](http://www.exampledepot.com/egs/java.sql/BatchUpdate.html)表明只有少数数据库支持这样的特性，可能 Oracle 不是一个

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-05-29T09:34:49.053

您可以使用使用 SAVE EXCEPTIONS 子句的 PL/SQL 存储过程，这将允许您发出批量更新，然后返回那些无法更新的行。这是几个示例链接：

[http://rwijk.blogspot.com/2007/11/save-exceptions.html](http://rwijk.blogspot.com/2007/11/save-exceptions.html)

[http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:8912264456901](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:8912264456901)

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-05-29T10:52:26.823

您应该插入到没有约束的工作表中，然后删除或修复违规内容，然后在单个 SQL 语句中将其余部分插入到实际表中。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T09:21:09.033

你可以试试这个：从 50 或 100 批开始。（选择一个大小，这样它们就有很大的概率被成功处理）。那些失败的，一个一个处理。

其他可能性：禁用约束、加载数据、删除违反约束的行。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T09:47:23.957

我应该首先检查是否存在违反约束的情况，如果没有违反约束，则插入该记录。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-06-01T11:14:08.587

我正在寻找“使用 Oracle 数据库驱动程序似乎在第一次失败时停止，即当批处理 1000 行并且第 100 行失败时，我希望它继续运行到第 1000 行”这一行的一些解决方案。基本上我想知道这是否可以使用 Oracle JDBC 驱动程序来完成。

然而，已经提出了各种答案（大多数/所有我已经考虑过）1）禁用约束/加载数据/删除有问题的行/重复多次2）在加载数据之前进行所有检查3）减少批次大小为 50 - 100。

不幸的是，我无法在加载之前进行检查，并将批量大小设为 50 或 100 意味着需要更多时间来完成我拥有的 5M 行（事实上，总时间增加到几个小时，而不是批量大小为 1000 的 40 分钟）。我已经采取保持 1000 的批量大小接受**问题，**并将代码放在“while”循环下并完成工作，直到我们填满所有行。

就像我说的那样，由于**ORACLE BATCH JDBC**在第一次失败后无法继续进行，因此这个问题的答案将是“不可行”，只需接受约束并记录这个工具需要大约 40 分钟才能完成的事实:)

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2012-06-07T23:52:32.477

你能试试 Oracle merge-when-not-matched 语句吗？示例：[http ://www.idevelopment.info/data/Oracle/DBA_tips/SQL/SQL_14.shtml](http://www.idevelopment.info/data/Oracle/DBA_tips/SQL/SQL_14.shtml)

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2013-02-20T15:35:17.827

有一个异常表并确保您的 proc 永远不会引发异常，而是将所有异常保存在数据库中。全部完成后，查询异常表并查看记录无法通过。

# java - 如何缓存 InputStream 以供多次使用

> ID：924990
> 
>         
> 
> 赞同：32
> 
>         
> 
> 时间：2009-05-29T08:34:44.010
> 
>         
> 
> 标签：java, caching, inputstream, apache-poi

我有一个文件的 InputStream，我使用 apache poi 组件来读取它，如下所示：

```
POIFSFileSystem fileSystem = new POIFSFileSystem(inputStream); 
```

问题是我需要多次使用同一个流，并且 POIFSFileSystem 会在使用后关闭流。

缓存输入流中的数据然后将更多输入流提供给不同的 POIFSFileSystem 的最佳方法是什么？

编辑1：

缓存是指存储以备后用，而不是作为加速应用程序的一种方式。将输入流读入数组或字符串然后为每次使用创建输入流是否更好？

编辑2：

很抱歉重新提出问题，但在桌面和 Web 应用程序中工作时条件有所不同。首先，我从我的 tomcat Web 应用程序中的 org.apache.commons.fileupload.FileItem 获得的 InputStream 不支持标记，因此无法重置。

其次，我希望能够将文件保存在内存中，以便在处理文件时更快地访问和减少 io 问题。

* * *

## 回答 #1

> 赞同：23
> 
>             
> 
> 时间：2009-05-29T08:46:44.783

你可以用一个版本装饰 InputStream 被传递给*POIFSFileSystem*，当 close() 被调用时，它会用 reset() 响应：

```
class ResetOnCloseInputStream extends InputStream {

    private final InputStream decorated;

    public ResetOnCloseInputStream(InputStream anInputStream) {
        if (!anInputStream.markSupported()) {
            throw new IllegalArgumentException("marking not supported");
        }

        anInputStream.mark( 1 << 24); // magic constant: BEWARE
        decorated = anInputStream;
    }

    @Override
    public void close() throws IOException {
        decorated.reset();
    }

    @Override
    public int read() throws IOException {
        return decorated.read();
    }
} 
```

## 测试用例

```
static void closeAfterInputStreamIsConsumed(InputStream is)
        throws IOException {
    int r;

    while ((r = is.read()) != -1) {
        System.out.println(r);
    }

    is.close();
    System.out.println("=========");

}

public static void main(String[] args) throws IOException {
    InputStream is = new ByteArrayInputStream("sample".getBytes());
    ResetOnCloseInputStream decoratedIs = new ResetOnCloseInputStream(is);
    closeAfterInputStreamIsConsumed(decoratedIs);
    closeAfterInputStreamIsConsumed(decoratedIs);
    closeAfterInputStreamIsConsumed(is);
} 
```

## 编辑 2

您可以在 byte[] （slurp 模式）中读取整个文件，然后将其传递给 ByteArrayInputStream

* * *

## 回答 #2

> 赞同：23
> 
>             
> 
> 时间：2009-08-20T00:15:33.557

试试 BufferedInputStream，它为另一个输入流添加了标记和重置功能，然后重写它的 close 方法：

```
public class UnclosableBufferedInputStream extends BufferedInputStream {

    public UnclosableBufferedInputStream(InputStream in) {
        super(in);
        super.mark(Integer.MAX_VALUE);
    }

    @Override
    public void close() throws IOException {
        super.reset();
    }
} 
```

所以：

```
UnclosableBufferedInputStream  bis = new UnclosableBufferedInputStream (inputStream); 
```

并`bis`在之前使用 inputStream 的任何地方使用。

* * *

## 回答 #3

> 赞同：5
> 
>             
> 
> 时间：2011-02-15T15:20:32.680

这可以正常工作：

```
byte[] bytes = getBytes(inputStream);
POIFSFileSystem fileSystem = new POIFSFileSystem(new ByteArrayInputStream(bytes)); 
```

getBytes 是这样的：

```
private static byte[] getBytes(InputStream is) throws IOException {
    byte[] buffer = new byte[8192];
ByteArrayOutputStream baos = new ByteArrayOutputStream(2048);
int n;
baos.reset();

while ((n = is.read(buffer, 0, buffer.length)) != -1) {
      baos.write(buffer, 0, n);
    }

   return baos.toByteArray();
 } 
```

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2013-09-23T12:34:40.617

使用以下实现进行更多自定义使用 -

```
public class ReusableBufferedInputStream extends BufferedInputStream
{

    private int totalUse;
    private int used;

    public ReusableBufferedInputStream(InputStream in, Integer totalUse)
    {
        super(in);
        if (totalUse > 1)
        {
            super.mark(Integer.MAX_VALUE);
            this.totalUse = totalUse;
            this.used = 1;
        }
        else
        {
            this.totalUse = 1;
            this.used = 1;
        }
    }

    @Override
    public void close() throws IOException
    {
        if (used < totalUse)
        {
            super.reset();
            ++used;
        }
        else
        {
            super.close();
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T08:43:25.023

如果文件不是那么大，则将其读入一个数组并从该数组中创建一个`byte[]`POI 。`ByteArrayInputStream`

如果文件很大，那么您不必在意，因为操作系统会尽其所能为您进行缓存。

[编辑] 使用[Apache commons-io](http://commons.apache.org/io/)以有效的方式将文件读入字节数组。不要使用`int read()`，因为它逐字节读取文件*非常*慢！

如果你想自己做，使用一个`File`对象来获取长度，创建数组和从文件中读取字节的循环。您必须循环，因为`read(byte[], int offset, int len)`可以读取少于`len`字节（通常会）。

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T08:46:21.897

“缓存”到底是什么意思？您是否希望不同的 POIFSFileSystem 从流的开头开始？如果是这样，那么在您的 Java 代码中缓存任何内容绝对没有意义。它将由操作系统完成，只需打开一个新流。

或者你想在第一个 POIFSFileSystem 停止的地方继续阅读吗？那不是缓存，而且很难做到。如果你不能避免流被关闭，我能想到的唯一方法是编写一个瘦包装器来计算已读取的字节数，然后打开一个新流并跳过那么多字节。但是当 POIFSFileSystem 内部使用类似 BufferedInputStream 的东西时，这可能会失败。

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T14:12:29.397

这就是我将如何实现，以安全地与任何 InputStream 一起使用：

*   编写自己的 InputStream 包装器，在其中创建一个临时文件以镜像原始流内容

*   将从原始输入流中读取的所有内容转储到此临时文件中

*   当流被完全读取时，您将在临时文件中镜像所有数据

*   使用 InputStream.reset 将内部流切换（初始化）为 FileInputStream(mirrored_content_file)

*   从现在开始你将失去原始流的引用（可以收集）

*   添加一个新方法 release() ，它将删除临时文件并释放任何打开的流。

*   您甚至可以从*finalize*调用 release()以确保临时文件已释放，以防您忘记调用 release() （大多数情况下您应该避免使用*finalize*，始终调用一个方法来释放对象资源）。请参阅[为什么要实现 finalize()？](https://stackoverflow.com/questions/158174/why-would-you-ever-implement-finalize)

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2010-12-18T01:08:30.350

```
public static void main(String[] args) throws IOException {
    BufferedInputStream inputStream = new BufferedInputStream(IOUtils.toInputStream("Foobar"));
    inputStream.mark(Integer.MAX_VALUE);
    System.out.println(IOUtils.toString(inputStream));
    inputStream.reset();
    System.out.println(IOUtils.toString(inputStream));
} 
```

这行得通。IOUtils 是公共 IO 的一部分。

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2017-11-30T14:27:09.867

这个答案迭代了以前的答案^([1](https://stackoverflow.com/a/1303314/48136) | [2](https://stackoverflow.com/a/18959357/48136))基于`BufferInputStream`. 主要变化是它允许无限重用。并负责关闭原始源输入流以释放系统资源。您的操作系统定义了这些限制，并且您不希望程序用完文件句柄（*这也是为什么您应该始终“使用”响应，例如使用 apache`EntityUtils.consumeQuietly()`*）。**编辑**更新了为使用 的贪婪消费者处理的代码`read(buffer, offset, length)`，在这种情况下，可能会发生`BufferedInputStream`努力查看源代码的情况，此代码可以防止这种使用。

```
public class CachingInputStream extends BufferedInputStream {    
    public CachingInputStream(InputStream source) {
        super(new PostCloseProtection(source));
        super.mark(Integer.MAX_VALUE);
    }

    @Override
    public synchronized void close() throws IOException {
        if (!((PostCloseProtection) in).decoratedClosed) {
            in.close();
        }
        super.reset();
    }

    private static class PostCloseProtection extends InputStream {
        private volatile boolean decoratedClosed = false;
        private final InputStream source;

        public PostCloseProtection(InputStream source) {
            this.source = source;
        }

        @Override
        public int read() throws IOException {
            return decoratedClosed ? -1 : source.read();
        }

        @Override
        public int read(byte[] b) throws IOException {
            return decoratedClosed ? -1 : source.read(b);
        }

        @Override
        public int read(byte[] b, int off, int len) throws IOException {
            return decoratedClosed ? -1 : source.read(b, off, len);
        }

        @Override
        public long skip(long n) throws IOException {
            return decoratedClosed ? 0 : source.skip(n);
        }

        @Override
        public int available() throws IOException {
            return source.available();
        }

        @Override
        public void close() throws IOException {
            decoratedClosed = true;
            source.close();
        }

        @Override
        public void mark(int readLimit) {
            source.mark(readLimit);
        }

        @Override
        public void reset() throws IOException {
            source.reset();
        }

        @Override
        public boolean markSupported() {
            return source.markSupported();
        }
    }
} 
```

要重用它，如果不是，请先关闭它。

但一个限制是，如果在读取原始流的全部内容之前关闭流，则此装饰器将包含不完整的数据，因此请确保在关闭之前读取整个流。

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2013-06-17T11:25:15.363

我只是在这里添加我的解决方案，因为这对我有用。它基本上是前两个答案的组合:)

```
 private String convertStreamToString(InputStream is) {
    Writer w = new StringWriter();
    char[] buf = new char[1024];
    Reader r;
    is.mark(1 << 24);
    try {
        r = new BufferedReader(new InputStreamReader(is, "UTF-8"));
        int n;
        while ((n=r.read(buf)) != -1) {
            w.write(buf, 0, n);
        }
        is.reset();
    } catch(UnsupportedEncodingException e) {
        Logger.debug(this.getClass(), "Cannot convert stream to string.", e);
    } catch(IOException e) {
        Logger.debug(this.getClass(), "Cannot convert stream to string.", e);
    }
    return w.toString();
} 
```

# postgresql - PostgreSQL 数据库大小增加

> ID：924993
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-05-29T08:35:08.767
> 
>         
> 
> 标签：postgresql

我有一个奇怪的问题。我的 postgresql (8.3) 的大小正在增加。所以我做了一个转储，然后清理了数据库，然后重新导入了转储。数据库大小减少了大约 50%。

一些信息： (1) AUTOVACUUM 和 REINDEX 在后台定期运行。(2) 数据库编码为ASCII。(3) 数据库位置：/database/pgsql/data (4) 系统：Suse-Ent。10.

任何提示表示赞赏

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-05-29T11:57:44.617

如果死元组的堆积超出了 可以解释的范围`max_fsm_pages`，则常规 VACUUM 将无法释放所有内容。最终结果是，随着死空间的不断积累，数据库将随着时间的推移而变得越来越大。运行 VACUUM FULL 应该可以解决这个问题。不幸的是，在大型数据库上可能需要很长时间。

如果你经常遇到这个问题，你要么需要更频繁地吸尘（autovacuum 可以在这里提供帮助），要么增加`max_fsm_pages`设置。当运行 VACUUM VERBOSE 时，它会告诉你有多少页面被释放，如果`max_fsm_pages`超过了就会给你一个警告，这可以帮助你确定这个值应该是什么。有关详细信息，请参阅手册。[http://www.postgresql.org/docs/8.3/static/runtime-config-resource.html#RUNTIME-CONFIG-RESOURCE-FSM](http://www.postgresql.org/docs/8.3/static/runtime-config-resource.html#RUNTIME-CONFIG-RESOURCE-FSM)

幸运的是，8.4 的可见性地图解决了这个问题。Despesz 像往常一样在这个主题上有一个很棒的故事：http: [//www.depesz.com/index.php/2008/12/08/waiting-for-84-visibility-maps/](http://www.depesz.com/index.php/2008/12/08/waiting-for-84-visibility-maps/)

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T09:40:49.027

在不了解您的特定设置的更多细节的情况下，会想到一些事情。AUTOVACUUM 运行时，是否在尝试回收磁盘空间，您是否可以通过服务器日志验证它？

其次，特别是如果之前的答案是否定的，您的 AUTOVACUUM 值可能不正确。我强烈建议您阅读有关该主题的以下内容：[http ://www.postgresql.org/docs/8.3/interactive/routine-vacuuming.html#AUTOVACUUM](http://www.postgresql.org/docs/8.3/interactive/routine-vacuuming.html#AUTOVACUUM)

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T11:39:29.270

如果您还没有，请检查您的系统是否有长时间运行的空闲事务。它们将防止 VACUUM（手动和自动）清理空间。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T09:48:57.993

不需要运行重新索引。

以详细的方式运行数据库范围的真空，并检查 fsm 设置提示的最后几行 - 也许这是错误的。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-05-29T11:18:21.123

你也试过`VACUUM FULL`吗？（警告，它会长时间锁定您的数据库。）我不确定这`AUTOVACUUM`是否如此急切......

# itextsharp - iTextSharp HTMLWorker img 未找到 404

> ID：924996
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-05-29T08:35:52.103
> 
>         
> 
> 标签：itextsharp

我遇到的问题是 HTMLWorker.ParseToList 函数将在以下标记时抛出异常（ 404 - not found ）：

```
<img alt="none" src="/image.jpg" /> 
```

在 src 中有一个死链接。我希望它不加载图像并继续。

现在有没有人可以配置这个或有类似的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2010-05-13T10:14:53.093

路径必须是绝对路径，例如：c:\images\image.jpg

你可以这样做

```
Server.MapPath(relativeUrl) 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2014-12-27T09:37:49.110

我是固定的。但是这个;

c:\images\image.jpg 作为 localhost:3524\images\image.jpg

```
<img alt="none" src="http://localhost:3524/image.jpg" /> 
```

创建您的主机配置。

```
 html = html.Replace("img src=\"", "img src=\"http://localhost:3524"); 
```

它的措辞。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2010-04-09T05:21:32.567

您可以扩展`HTMLWorker`以包含一个过滤器，以在将 HTML 传递给您的扩展方法之前删除（或替换）您想要的任何 HTML`HTMLWorker`元素`ParseToList()`。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2010-07-09T13:38:35.047

看看这个线程

[http://www.draggerco.com/node/2](http://www.draggerco.com/node/2)

对我很有用...

我刚换了

```
string siteUrl = HttpContext.Current.Request.Url.AbsoluteUri.Replace(HttpContext.Current.Request.Url.AbsolutePath, ""); 
```

和

```
string siteUrl = HttpContext.Current.Server.MapPath([your_path_for_images_in_string]); 
```

** 注意：为此，请使用 HtmlWorker.Parse() 方法************` 
```