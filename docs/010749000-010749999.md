# StackOverflow 问答 10749000-10749999

# wso2 - WS02：错误未发现在此服务器中部署的工件。忽略碳应用

> ID：10749001
> 
> 赞同：2
> 
> 时间：2012-05-25T05:38:13.147
> 
> 标签：wso2, wso2esb, esb, wso2carbon

此处概述了从 pojo 创建轴服务的以下过程：网络研讨会：使用 Carbon Studio 为本地和云构建应用程序。我创建了网络研讨会中描述的轴服务。我成功地做了一个 mvn 包。我在eclipse中成功启动了WS02 ESB。

但是当我将我的应用程序部署到 WS02 ESB 时，我在控制台中看到以下内容：

信息 - ApplicationManager 部署 Carbon 应用程序：MyCarbonApp-1.0.0.car... 警告 - ApplicationManager 在此服务器中找不到部署的工件。忽略

Carbon 应用程序：MyCarbonApp-1.0.0.car 并且该服务未出现在 ESB 控制台的 Web 服务列表中。

当我查看名为 MyAxisService.service 的文件时，我看到以下内容：

```
 #Contains the information about the axis2 service generation information from the eclipse workspace
#Fri May 25 15:53:09 NZST 2012
Class-name=com.unisys.comms.esbselection.MyAxisService
Type=FROM_CLASS
Service-name=MyAxisService
Projects=MyCarbonApp 
```

这个警告是什么意思？
我该怎么做才能进一步调查原因？创建应用程序时我错过了一些明显的步骤吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-17T04:57:00.287

请按照以下步骤解决此问题。

1.  转到 carbon.xml 文件，位于 ....\wso2esb-4.9.0\repository\conf
2.  向 xml elemet EnterpriseServiceBus ApplicationServer 添加新的服务器角色
3.  重启服务器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T06:24:17.140

此错误意味着在您的 Carbon 应用程序存档 (CAR) 中找到的 C-App 工件的服务器角色与 ESB 的服务器角色不匹配。

原因是，Axis2 Web 服务默认具有“ApplicationServer”的服务器角色。因此，如果您将其部署在 WSO2 AS 上，它将毫无问题地部署。但在本例中，您尝试将其部署到 WSO2 ESB。由于 WSO2 ESB 具有服务器角色“EnterpriseServiceBus”，而您的 Axis2 Web 服务具有服务器角色“ApplicationServer”，因此它们彼此不匹配。结果是 C-App 部署程序将忽略 C-App。

要解决这个问题，您需要更改 Axis2 Web 服务的服务器角色。为此，请按照以下步骤操作。

1.  转到您创建的 C-App 项目并浏览到 C-App 的“Artifacts”文件夹中的 Axis2 Service Artifact 文件夹。
2.  在这个 Axis2 服务项目中，您将看到一个名为“Artifact.xml”的文件。双击文件打开此文件。
3.  双击文件后，文件将在工件编辑器中打开。向下滚动编辑器。
4.  在那里，您将在名为“服务器角色”的标签旁边看到一个下拉菜单。
5.  从下拉列表中选择“EnterpriseServiceBus”选项，然后单击 Eclipse 工具栏上的“全部保存”按钮。
6.  转到 Carbon Studio 中的 Servers 视图，然后单击 Carbon Server 前面的展开图标（在本例中为 WSO2 ESB）
7.  展开服务器后，您将能够看到您在 ESB 中部署的服务器模块（C-App 项目）。
8.  右键单击 ESB 服务器下的 C-App 模块并选择“重新部署”。

现在您将看到 Carbon Studio 重新部署了 C-App 项目，如果您正确执行了上述所有步骤，您的 Axis2 Web 服务将部署在 ESB 中。

希望这可以帮助！！

谢谢。

/哈莎娜

# node.js - Node.js，协议缓冲区 - 如何获取帖子有效负载以便我可以解析？

> ID：10749005
> 
> 赞同：0
> 
> 时间：2012-05-25T05:38:39.653
> 
> 标签：node.js, protocol-buffers

客户将协议缓冲区发布到我的网址。我需要获取可以解析的有效负载。我正在使用快递，但我会采取任何有效的方法。

```
app.post('/n/bidder', function(req, res){

    var payload = ??????;

    var mypb_schema  = schema['Feeds'];
    var brr_fu = mypb_schema.parse(payload); 
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:02:27.477

您必须从`req`输入流中接收有效负载并组合这些部分：

```
var buffertools = require('buffertools');

app.post('/n/bidder', function (req, res) {
  var payload = [];

  req.on('data', function (data) {
    payload.push(data);
  });
  req.on('end', function () {
    var payload = buffertools.concat.apply(null, payload);

    var mypb_schema = schema['Feeds'];
    var brr_fu = mypb_schema.parse(payload);

    // rest of code here

  });

}); 
```

# core-data - CoreData：删除多对多关系中的实体

> ID：10749007
> 
> 赞同：1
> 
> 时间：2012-05-25T05:38:58.060
> 
> 标签：core-data, many-to-many

在我的CoreData数据模型中，有一个Note实体，一个Tag实体，它们之间有多对多的关系，所以每个Note可以有很多Tag，每个Tag可能属于很多Note。

标签以逗号分隔的字符串形式输入：cat、dog、pig

然后我将字符串拆分为“猫”、“狗”、“猪”

假设我有一个带有标签'cat'，'dog'，'pig'的便笺，并且我删除了'pig'并添加了'bird'，首先我有一个字符串：“cat，dog，bird”然后是“cat” , '狗', '鸟',

现在我该怎么办？我应该删除此注释的所有标签并重新添加所有标签吗？但是一旦我删除了所有标签，共享相同标签的其他笔记会丢失这些标签吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T09:24:25.083

您将删除对象与从关系中删除对象混淆了。

首先，检查您的关系的删除规则：

![删除规则](../Images/4285bb53c2db53fd5a84ead996f682e2.png)

如果删除规则是“nullify”，那么这意味着您可以从关系中删除对象而不删除对象。在这种情况下，这听起来像是您想要的：您希望能够从与特定笔记的关系中删除标签，而不会影响使用该标签的所有其他笔记。

关于实际修改与新标签集的关系，您可以做两件事。第一种方法就像您提到的那样，只需从笔记中删除所有标签并重新添加它们。这实际上是一个很好的计划。当然，当您添加标签时，您需要首先检查每个标签是否存在，如果存在，请将现有标签添加到关系中。

在伪代码中：

1.  删除当前笔记中的所有标签。
2.  制作一个可变集合，以保存您要添加的集合。
3.  获取链接标签的新字符串数组
4.  对于每个标签字符串，请执行以下操作：
    1.  创建谓词以查找具有该名称的 Tag 对象。创建一个获取请求，并执行它。
    2.  查看结果：如果有返回的标签（即结果数组中有 >0 个对象），请将其添加到您的可变集合中。
    3.  如果没有返回标签（即没有具有该名称的标签），则创建一个新的 Tag 对象。将其添加到您的可变集合中。
5.  将 Note 的`tags`属性设置为新的标签集。

另一种方法是调用`NSMutableSet *mySet = [yourNote mutableSetValueForKey:@"tags"]`. 这将返回一组可变的标记对象，并且您对集合所做的任何更改都会被 Core Data 自动看到。因此，您可以从中删除一个对象，然后该对象将不再存在于关系中，或者您可以将另一个标签添加到集合中，它将与笔记相关。

在任何时候，我们都没有从数据库中删除对象。您的所有标签仍然存在，我们只是更改了哪些标签与哪些笔记相关。

# c++ - 将光照应用到 gl_Quad 中的特定复选框

> ID：10749008
> 
> 赞同：0
> 
> 时间：2012-05-25T05:39:03.337
> 
> 标签：c++, opengl

我想在这个棋盘格中的白盒和黑盒上应用不同的照明。到目前为止我所做的。

myDisplay 函数中的嵌套循环正在创建框。

```
GLfloat ambientColor[] = {0.2f, 0.2f, 0.2f, 1.0f}; //Color(0.2, 0.2, 0.2)
GLfloat lightColor0[] = {0.5f, 0.5f, 0.5f, 1.0f}; //Color (0.5, 0.5, 0.5)
GLfloat lightPos0[] = {4.0f, 0.0f, 8.0f, 1.0f}; //Positioned at (4, 0, 8)
GLfloat lightColor1[] = {0.5f, 0.2f, 0.2f, 1.0f}; //Color (0.5, 0.2, 0.2)
//Coming from the direction (-1, 0.5, 0.5)
GLfloat lightPos1[] = {-1.0f, 0.5f, 0.5f, 0.0f};
void myInit(void)
{
glClearColor (1,1,0,0);
glPointSize(10);
glLineWidth(10.0);
glColor3f(1,1,1);
gluOrtho2D(0,640,0,480); 
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
//gluPerspective(45,2,-2,2);
gluLookAt(100.0,200.0,200.0,//eyeposition
    0.0,0.0,0.0,//ccenter
    0.0,1.0,0.0);//up direction 
}
void myDisplay(void)
{
int posx=10;
int posy=10;
int posWidth=60;
int posHeight=60;
bool whiteORBlack=true;

glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glMatrixMode(GL_MODELVIEW);

glEnable(GL_LIGHTING);
glShadeModel(GL_SMOOTH);
glEnable(GL_LIGHT0);
glEnable(GL_COLOR_MATERIAL);

 // glLightfv(GL_LIGHT1, GL_DIFFUSE, lightColor1);
 // glLightfv(GL_LIGHT1, GL_POSITION, lightPos1);
for(int j=1;j<=8;j++)
{
    for(int i=1;i<=8;i++)
    {
        if(whiteORBlack==true)
        {
            glBegin(GL_QUADS);
            glColor3f(0,0,0);
glLightfv(GL_LIGHT0, GL_DIFFUSE, lightColor0);
    glLightfv(GL_LIGHT0, GL_POSITION, lightPos0);

glLightModelfv(GL_LIGHT_MODEL_AMBIENT, ambientColor);
glLightfv(GL_LIGHT0, GL_DIFFUSE, lightColor0);
glLightfv(GL_LIGHT0, GL_POSITION, lightPos0);

            glVertex2i(posx,posy);
            glVertex2i(posx+posWidth,posy);
            glVertex2i(posx+posWidth,posy+posHeight);
            glVertex2i(posx,posy+posHeight);
            whiteORBlack=false;

        }
        else if(whiteORBlack==false)
        {
            glBegin(GL_QUADS);
            glColor3f(1,1,1);

            glVertex2i(posx,posy);
            glVertex2i(posx+posWidth,posy);
            glVertex2i(posx+posWidth,posy+posHeight);
            glVertex2i(posx,posy+posHeight);
            whiteORBlack=true;
        }
            posx=posx+posWidth;
    }

    if(whiteORBlack==false)
    {
        whiteORBlack=true;
    }
    else
    {
        whiteORBlack=false;
    }
    posy=posy+posHeight;

    posx=10;
}

//glPopMatrix();
//glutSwapBuffers();
glEnd();
glFlush();
 }
  void main(int argc,char ** argv)
 {
glutInit(&argc,argv);
glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB);
glutInitWindowSize (640,480);
glutInitWindowPosition(100,150);
glutCreateWindow("FINAL LAB");
myInit();
glutDisplayFunc(myDisplay);
//glEnable(GL_LIGHTING);
//glEnable(GL_LIGHT0);
//glLightfv(GL_LIGHT0,GL_AMBIENT,light0_ambient);
//glLightfv(GL_LIGHT0,GL_DIFFUSE,ligth0_diffuse);
//glEnable(GL_DEPTH_TEST);
//glEnable(GL_CULL_FACE);
//glEnable(GL_BLEND);
//glEnable(GL_LINE_SMOOTH);
//glLineWidth(2);
//glMatrixMode(GL_PROJECTION);
/*gluPerspective(40,1,1,10);
glMatrixMode(GL_MODELVIEW);
gluLookAt(0.0,0.0,5.0,0.0,0.0,0.0,0.0,1.0,0.0);*/
glutMainLoop();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:47:39.087

我假设您必须将所有`glLightfv`内容设置为`lightColor1`等。

而不是每次都交换这个，我可能会将照明设置为黑色，绘制所有黑色，然后将照明设置为白色，并绘制所有白色。

如果我错了，那么屏幕截图可能会帮助您更好地回答您。

# java - 开源 Linux 服务器项目

> ID：10749009
> 
> 赞同：5
> 
> 时间：2012-05-25T05:39:05.223
> 
> 标签：java, c++, linux, open-source, enterprise

我有兴趣研究并尝试为开源项目做出贡献。由于我运行的是 linux 桌面，所以有很多我熟悉的开源项目，并且我对其中一些做出了一些贡献。我找到这些项目，仅仅是因为我需要它们。除此之外，我在游戏开发方面做了很多工作，因为我发现这很有趣。

但是，我运行的程序和企业运行的程序完全不同：我假设。我真的很想看看被企业或组织广泛使用的东西（不像我的横向卷轴）。我还没有真正接触过很多企业开发，因为我还在上大学，我的副业只是管理 apache 服务器。我的第一个选择是 apache httpd 服务器，但它似乎是用 C 编写的。我正在寻找用 java/c++ 编写的东西。

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T05:47:16.293

一些基于 Java 的开源项目可能会引起人们的兴趣，它们拥有庞大的社区并且通常用于商业：

*   Eclipse（IDE 和工具）
*   Apache Commons（通用库）
*   Netty（网络库）
*   OpenJDK（开源 Java 实现本身）
*   JBoss（应用服务器）
*   播放框架（Web 框架）
*   Clojure（JVM 之上的现代 Lisp 衍生语言）
*   Hadoop（大数据处理）

一句忠告——选择你个人感兴趣/热衷的东西。然后，您将获得更多乐趣，获得更大的满足感，并可能因此做出更有意义的贡献。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:10:42.767

只是我头顶的几件事

看看 Apache 网站，他们的一些产品是基于 Java 的。

*   Tomcat：网络应用服务器
*   Solr：企业搜索引擎

CMS前面他们是

*   Liferay：基于java的内容管理系统
*   dotCMS ：从未使用过，但认为它的意思很好

# scala - 如果 Int 不能为 null，那么 null.asInstanceOf[Int] 是什么意思？

> ID：10749010
> 
> 赞同：36
> 
> 时间：2012-05-25T05:39:06.763
> 
> 标签：scala, null

作为测试，我写了这段代码：

```
object Ambig extends App {
  def f( x:Int    ) { println("Int"   ) }
  def f( x:String ) { println("String") }
  f( null.asInstanceOf[Int   ] )
  f( null.asInstanceOf[String] )
  f(null)
} 
```

我期待在最后一次调用 f() 时出错，说它不明确。编译器接受了它，并产生了这个输出：

```
Int
String
String 
```

现在我猜测这与 Int 不是 AnyRef 的事实有关，因此适用于 f(null) 的 f 的唯一版本是 f(x:String)。但是，如果 Int 不能为 null，那么 null.asInstanceOf[Int] 是什么意思？repl 说它是 Int 类型的：

```
scala> :type null.asInstanceOf[Int]
Int 
```

但我真的不明白它是如何工作的。毕竟，如果我尝试将 String 转换为 Int，那么一切都会崩溃：

```
scala> "foo".asInstanceOf[Int]
java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Integer
    at scala.runtime.BoxesRunTime.unboxToInt(Unknown Source)
        ... 
```

当然这是意料之中的——“foo”不能变成 Int。但是 null 也不能，那么为什么将 null 转换为 Int 工作呢？大概是某种形式的装箱，但是类型仍然是Int，不能为null...

我错过了什么？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-25T08:09:11.703

转换`null`为 an的行为`Int`取决于它执行的上下文。

首先，如果将 a`null`转换为 a `Int`，它实际上意味着一个装箱整数，其值为`null`。如果将表达式放在预期类型所在的上下文中`Any`（这在幕后被翻译`Object`，因为在 JVM 字节码中，没有办法引用原始类型和具有相同引用的引用类型），那么这个value 不会进一步转换 - 这就是`println(null.asInstanceOf[Int])`打印`null`.

但是，如果您在一个原始的上下文中使用这个相同的装箱整数值`Int`但是，如果您在需要原始(Java`int`，它将被转换为原始类型，并且`null`（作为引用类型的默认值）转换为`0`（原始类型的默认值）。

如果泛型方法执行此转换，那么自然而然地，你会得到`null`回报。

但是，如果这个方法是专门的，那么它的返回类型是`Int`（在这种情况下是一个原始整数），所以这个`null: Any`值必须像以前一样转换为一个原始类型。

因此，运行：

```
object Test extends App {
  println(null.asInstanceOf[Int])

  def printit(x: Int) = println(x)

  printit(null.asInstanceOf[Int])

  def nullint[T] = null.asInstanceOf[T]

  println(nullint[Int])

  def nullspecint[@specialized(Int) T] = null.asInstanceOf[T]

  println(nullspecint[Int])
} 
```

产生：

```
null
0
null
0 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-25T18:13:46.263

事情是这样的：`asInstanceOf`不一定有意义。这个方法的作用是告诉编译器停止制造意义，并相信你所说的。

现在，如果您想知道它为什么返回 0，那是因为`asInstanceOf`适用于`AnyRef`，而不是`AnyVal`。当应用于 an`AnyVal`时，它将使用 boxed 版本，并且 boxed`null`的值为 0。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-25T05:41:19.997

看起来它只是自动将其转换为零：

```
scala> null.asInstanceOf[Int]
res0: Int = 0 
```

当然，与 null 不同，0 可以是`Int`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-26T18:46:15.253

首先，我们都同意我们不能分配`null`给[http://www.scala-lang.org/api/current/index.html#scala.Null](http://www.scala-lang.org/api/current/index.html#scala.Null)`scala.Int`中记录的

其次，为什么当我们这样做时`println(null.asInstanceOf[Int])`，它会给出`null`？
这是因为 println 的实现。它最终调用java`String.valueOf`方法，即

```
return (obj == null) ? "null" : obj.toString(); 
```

如果您`null.asInstanceOf[Int] == null`在 shell 中执行 a，它将返回 true，但它会给出相反的警告，即“使用 `==' 比较 Int 和 Null 类型的值将始终产生 false”。我认为这可能是 scala 类型擦除的问题。

做 a`println`只需要一个 scala.Any 类型，所以`null.asInstanceOf[Int]`实际上还没有发生转换。所以我们只需要记住，当你分配`null.asInstanceOf[Int]`给一个 Int 时，转换是在运行时基于 Scala 的擦除语义发生的，它会为它分配 0。

顺便说一句，您仍然可以在没有任何编译错误的情况下执行 af(null)，因为 scala 正在为您进行隐式转换

```
 null -> java.lang.Integer -> scala.Int 
```

但是，您会看到它在运行时爆炸。

# c# - 如何读取 xmlnode 和内部 ChildNodes 并从输入类型文本更新？

> ID：10749015
> 
> 赞同：0
> 
> 时间：2012-05-25T05:39:35.113
> 
> 标签：c#, asp.net, xml

我有一个这样的xml文件......

```
<AnimationPackage>
<condition>
<name>Some Condition 0</name>
<url>http://www.google.com.pk</url>
<rehab>
  <name>Some rehab 0</name>
  <url>http://www.youtube.com</url>
</rehab>
<rehab>
  <name>Some rehab 1</name>
  <url>http://www.youtube.com</url>
</rehab>
<rehab>
  <name>Some rehab 2</name>
  <url>http://www.youtube.com</url>
</rehab>
</condition>
<condition>
<name>Some Condition 1</name>
<url>http://www.google.com.pk</url>
<rehab>
  <name>Some rehab 0</name>
  <url>http://www.youtube.com</url>
</rehab>
<rehab>
  <name>Some rehab 1</name>
  <url>http://www.youtube.com</url>
</rehab> 
```

如何计算标签名称也像 Atfirst`<Conditions>`然后`<rehab>`For that condtions 然后来自`<rehab>`标签的内部文本`<name>`和`<url>`标签。我试过这个，但在第一次阅读它不起作用..任何帮助PLZ。

```
XmlDocument readDoc = new XmlDocument();
readDoc.Load(MapPath("JkGroups.xml"));
conditions = readDoc.SelectNodes("AnimationPackage/condition").Count;
rehab = readDoc.SelectNodes("AnimationPackage/condition/rehab").Count;
lblApptitle.Text = dt.Rows[0]["packageName"].ToString();
XmlNodeList nodeListName = readDoc.SelectNodes("AnimationPackage/condition/rehab/name");
XmlNodeList nodeListUrl = readDoc.SelectNodes("AnimationPackage/condition/rehab/url");
for (rehabCount = 0; rehabCount < rehab; rehabCount++)
{
    rehabNodeName = nodeListName[0].ChildNodes[rehabCount].InnerText;
    rehabNodeUrl = nodeListUrl[0].ChildNodes[rehabCount].InnerText;
    rehabtr += "<tr><td style='width: 106px;padding-left: 20px;' >Rehab title</td><td>"
                                      + "<input type='text' value='" + rehabNodeName + "' id='txtRehabSupportTitle" + rehabCount + "' runat='server' /></td><td>"
                                      + "<input type='text' value='" + rehabNodeUrl + "' id='txtRehabSupportURL" + rehabCount + "' runat='server' /></td></tr>";
}
string rehabBody = "<table id='tblRehab'>" + rehabtr + "<tr><td></td><td></td><td><p>Type support product buy URL</p></td></tr><tr>"
                            + "<td><td>&nbsp;</td><td>&nbsp;</td></tr></table>"; 
```

缺少一些代码，但我只想在 xml 中提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:29:23.887

试试这个代码

```
 XDocument doc = XDocument.Load("c://test.xml");
        var animationPackage = doc.Descendants("AnimationPackage");
        int count = 0;
        foreach (XElement condition in animationPackage.Descendants("condition"))
        {
            count++;
            String name = condition.Element("name").Value;
        }
        //print count . . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:00:15.653

或者您可以使用更多 linq 功能并在一个表达式中计算：

```
XDocument doc = XDocument.Load(@"c:\test.xml");
int rehabCount = doc.Root.Descendants()
.Where(x => x.Name == "rehab").Count(); // 5

 var rehabValues = doc.Root.Descendants("rehab")
 .Elements().Select(tag => tag.Value); 
```

结果：

康复计数：`5`

康复价值观：

`IEnumerable<String>`（10 项）：

```
Some rehab 0

http://www.youtube.com

Some rehab 1

http://www.youtube.com

Some rehab 2

http://www.youtube.com

Some rehab 0

http://www.youtube.com

Some rehab 1

http://www.youtube.com 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:04:14.153

```
XDocument xDoc = XDocument.Load(......);
var result = xDoc.Descendants("condition")
                .Select(c => new {
                    Name = c.Element("name").Value,
                    Rehabs = c.Descendants("rehab")
                              .Select(r=>new {
                                    Name = r.Element("name").Value,
                                    Url = r.Element("url").Value
                              })
                              .ToArray()

                })
                .ToArray();

Console.WriteLine("Condition#: " + result.Length);
foreach (var cond in result)
{
    Console.WriteLine("\tCondition[" + cond.Name + "]: " + cond.Rehabs.Length);
    foreach (var rehab in cond.Rehabs)
    {
        Console.WriteLine("\t\t"+ rehab.Name + " , " + rehab.Url);
    }
} 
```

# linux - Linux 字典

> ID：10749017
> 
> 赞同：0
> 
> 时间：2012-05-25T05:39:36.297
> 
> 标签：linux, dictionary, n-gram

我需要包含所有可用语言的单词表的文件。我搜索了一下，发现[ftp.gnu.org](ftp://ftp.gnu.org)主机`aspell`目录包含很多字典，但是当我提取它们时，我没有找到任何包含单词数据的原始文件。我需要它来生成 n-gram 并可能识别特定文本中的语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:19:38.167

文件*/usr/share/dict/british-english*包含在*wbritish*包中，它又是来自[Kevin 单词列表页面的](http://wordlist.sourceforge.net/)*Ispell 英语单词列表*，其他词典也可供下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T15:12:18.237

我发现这个[https://skydrive.live.com/?cid=3732e80b128d016f&resid=3732E80B128D016F!3584&id=3732E80B128D016F%213584](https://skydrive.live.com/?cid=3732e80b128d016f&resid=3732E80B128D016F!3584&id=3732E80B128D016F%213584)这正是我想要的。

# php - PHP 和必应翻译 API

> ID：10749019
> 
> 赞同：6
> 
> 时间：2012-05-25T05:39:43.990
> 
> 标签：php, translation, access-token, azure-marketplace

我已在 Azure Marketplace 注册，我有一个客户端 ID 和一个客户端“机密”，但到目前为止我尝试的所有操作都会导致“400 Bad Request”错误。非常感谢！

这是我一直在尝试的一个相当基本的代码示例（我已经编辑了客户端 ID 和秘密值）。我在理解 post 变量可以通过 URL 请求传递的情况下进行操作......我希望这是正确的。

```
$authURL = 'http://datamarket.accesscontrol.windows.net/v2/OAuth2-13&grant_type=client_credentials&client_id={CLIENT_ID VALUE HERE}&client_secret={CLIENT_SECRET VALUE HERE}&scope=http://api.microsofttranslator.com';
$chpre = curl_init();
curl_setopt($chpre, CURLOPT_URL, $authURL );
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
$xpre = curl_exec($chpre);

$texttobetranslated = "الذي تقدمه";
$BingURL = "http://api.microsofttranslator.com/v2/Http.svc/Translate?text=" . $texttobetranslated . "&from=ar&to=en";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $BingURL );
$x = curl_exec($ch); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-20T10:14:32.933

我创建了一个易于使用且易于集成到任何 PHP 项目的 PHP 小类。你可以在[这里](https://github.com/torayeff/phpbing)找到它。这是代码：

```
 <?php
    class BingTranslation
    {
        public $clientID;
        public $clientSecret;

        public function __construct($cid, $secret)
        {
            $this->clientID = $cid;
            $this->clientSecret = $secret;
        }

        public function get_access_token()
        {   
            //if access token is not expired and is stored in COOKIE
            if(isset($_COOKIE['bing_access_token']))
                return $_COOKIE['bing_access_token'];

            // Get a 10-minute access token for Microsoft Translator API.
            $url = 'https://datamarket.accesscontrol.windows.net/v2/OAuth2-13';
            $postParams = 'grant_type=client_credentials&client_id='.urlencode($this->clientID).
            '&client_secret='.urlencode($this->clientSecret).'&scope=http://api.microsofttranslator.com';

            $ch = curl_init();
            curl_setopt($ch, CURLOPT_URL, $url); 
            curl_setopt($ch, CURLOPT_POSTFIELDS, $postParams);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);  
            $rsp = curl_exec($ch); 
            $rsp = json_decode($rsp);
            $access_token = $rsp->access_token;

            setcookie('bing_access_token', $access_token, $rsp->expires_in);

            return $access_token;
        }

        public function translate($word, $from, $to)
        {
            $access_token = $this->get_access_token();
            $url = 'http://api.microsofttranslator.com/V2/Http.svc/Translate?text='.$word.'&from='.$from.'&to='.$to;

            $ch = curl_init();
            curl_setopt($ch, CURLOPT_URL, $url); 
            curl_setopt($ch, CURLOPT_HTTPHEADER, array('Authorization:bearer '.$access_token));
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);  
            $rsp = curl_exec($ch); 

            preg_match_all('/<string (.*?)>(.*?)<\/string>/s', $rsp, $matches);

            return $matches[2][0];
        }

        public function translate2($word, $from, $tos)
        {
            //translates 1 word to several languages
            //$tos is array of languages to translate to
            //returns array of translations as $result['en']=>'Hello'

            $access_token = $this->get_access_token();

            $result[$from] = $word;

            foreach($tos as $to)
            {
                $url = 'http://api.microsofttranslator.com/V2/Http.svc/Translate?text=hello&from='.$from.'&to='.$to;

                $ch = curl_init();
                curl_setopt($ch, CURLOPT_URL, $url); 
                curl_setopt($ch, CURLOPT_HTTPHEADER, array('Authorization:bearer '.$access_token));
                curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);  
                $rsp = curl_exec($ch); 

                preg_match_all('/<string (.*?)>(.*?)<\/string>/s', $rsp, $matches);

                $result[$to] = $matches[2][0];
            }

            return $result;
        }
    }
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-07T09:52:26.170

请将此代码放在您的标题部分..这对我来说非常适合..享受它

```
<div id='MicrosoftTranslatorWidget' class='Light' style='color:white;background-color:#555555'></div>
<script type='text/javascript'>
setTimeout(function(){{
var s=document.createElement('script');
s.type='text/javascript';
s.charset='UTF-8';
s.src=((location && location.href && location.href.indexOf('https') == 0)?'https://ssl.microsofttranslator.com':'http://www.microsofttranslator.com')+'/ajax/v3/WidgetV3.ashx?siteData=ueOIGRSKkd965FeEGM5JtQ**&ctf=False&ui=true&settings=Manual&from=';
var p=document.getElementsByTagName('head')[0]||document.documentElement;
p.insertBefore(s,p.firstChild); 
}},0);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-15T07:14:13.330

以下是基于必应翻译 API 的最新凭据为我工作的最新代码：

```
<?php 
$key1 = "??????";  //enter your azure key here
$endpoint = 'https://languagetranslationservice.cognitiveservices.azure.com/sts/v1.0/issuetoken';  //enter your azure end point here
$from = "en";  //Support Languages: https://docs.microsoft.com/en-us/azure/cognitive-services/translator/language-support
$to = "te";
$inputStr = "welcome to paradise";

function getToken($key1, $endpoint)
{
    $ch = curl_init();
    $data_string = json_encode('{body}');
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array(
            'Content-Type: application/json',
            'Content-Length: ' . strlen($data_string),
            'Ocp-Apim-Subscription-Key: ' . $key1
        )
    );
    curl_setopt($ch, CURLOPT_URL, $endpoint);
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $strResponse = curl_exec($ch);
    curl_close($ch);
    return $strResponse;
}

// function for translation
function curlRequest($url)
{
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: text/xml"));
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    $curlResponse = curl_exec($ch);
    curl_close($ch);
    return $curlResponse;
}

//start translation
$accessToken = getToken($key1, $endpoint);
$params = "text=" . urlencode($inputStr) . "&to=" . $to . "&from=" . $from . "&appId=Bearer+" . $accessToken;
$translateUrl = "http://api.microsofttranslator.com/v2/Http.svc/Translate?$params";
$curlResponse = curlRequest($translateUrl);
$output = simplexml_load_string($curlResponse);
echo $output;
?> 
```

# linux - Linux ssh 无密码登录不起作用？

> ID：10749020
> 
> 赞同：1
> 
> 时间：2012-05-25T05:39:50.653
> 
> 标签：linux, ssh

```
bharathi-1397@bharathi-1397:~$ ssh-keygen 
Generating public/private rsa key pair.
Enter file in which to save the key (/home/local/bharathi-1397/.ssh/id_rsa): 
/home/local/bharathi-1397/.ssh/id_rsa already exists.
Overwrite (y/n)? y
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in /home/local/bharathi-1397/.ssh/id_rsa.
Your public key has been saved in /home/local/bharathi-1397/.ssh/id_rsa.pub.
The key fingerprint is:
de:e3:e5:f6:a3:8e:83:76:f0:7d:d6:e1:b3:d6:cc:93 bharathi-1397@bharathi-1397
The key's randomart image is:
+--[ RSA 2048]----+
|                 |
|                 |
|                 |
|                 |
|        S        |
|       ...     . |
|        .+o.. .++|
|        o.+=o +E=|
|       . .o++=oo+|
+-----------------+ 
```

接下来我从 .ssh/id_rsa.pub 复制内容并存储在远程机器中。

```
 bharathikannan.r@172.20.2.7:~$ mkdir .ssh
 bharathikannan.r@172.20.2.7:~$ vi authorized_keys 
```

将复制的内容粘贴到 authorized_keys 但下次我尝试登录时会询问密码为什么？ssh bharathikannan.r@172.20.2.7 bharathikannan.r@172.20.2.7的密码：

为什么它要求密码？. 我按照正确的步骤操作。不知道为什么要密码？

```
ssh -v bharathikannan.r@172.20.2.7
OpenSSH_5.8p1 Debian-7ubuntu1, OpenSSL 1.0.0e 6 Sep 2011
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Applying options for *
debug1: Connecting to integ-build3 [192.168.5.173] port 22.
debug1: Connection established.
debug1: identity file /home/local/bharathi-1397/.ssh/id_rsa type 1
debug1: Checking blacklist file /usr/share/ssh/blacklist.RSA-2048
debug1: Checking blacklist file /etc/ssh/blacklist.RSA-2048
debug1: identity file /home/local/bharathi-1397/.ssh/id_rsa-cert type -1
debug1: identity file /home/local/bharathi-1397/.ssh/id_dsa type -1
debug1: identity file /home/local/bharathi-1397/.ssh/id_dsa-cert type -1
debug1: identity file /home/local/bharathi-1397/.ssh/id_ecdsa type -1
debug1: identity file /home/local/bharathi-1397/.ssh/id_ecdsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_4.3
debug1: match: OpenSSH_4.3 pat OpenSSH_4*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.8p1 Debian-7ubuntu1
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Server host key: RSA 66:3e:67:25:65:22:f0:70:3d:e3:ce:3b:14:49:7e:76
debug1: Host '172.20.2.7' is known and matches the RSA host key.
debug1: Found key in /home/local/bharathi-1397/.ssh/known_hosts:5
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey,gssapi-with-mic,password
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /home/local/bharathi-1397/.ssh/id_rsa
debug1: Authentications that can continue: publickey,gssapi-with-mic,password
debug1: Trying private key: /home/local/bharathi-1397/.ssh/id_dsa
debug1: Trying private key: /home/local/bharathi-1397/.ssh/id_ecdsa
debug1: Next authentication method: password
bharathikannan.r@172.20.2.7's password: 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T20:42:19.587

根据您的描述，您在您的家中创建了 .ssh 目录，然后在同一目录中创建了 .authorized_keys 文件（您的家，不在 ~/.ssh/ 中）。请确保文件在正确的位置。

此外，以下命令可以轻松设置您：

```
user@host:~$ ssh-copy-id user@otherhost 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-16T05:02:28.917

您可能没有 ~/.ssh 目录或没有 .ssh/authorized_keys 文件。请注意，在手动创建 ~/.ssh/authorized_keys 文件时，您很容易获得错误的权限之一。

```
chmod 700 ~/.ssh
chmod 600 ~/.ssh/id_rsa
chmod 644 ~/.ssh/id_rsa.pub  
chmod 644 ~/.ssh/authorized_keys
chmod 644 ~/.ssh/known_hosts
restorecon -R ~/.ssh 
```

真正的问题是最后一个，SELINUX（这是我偶然发现的，我总是这样做）。您可以随时尝试将其设置为允许和/或检查 audit.log。

```
# ll -Z ~/.ssh/authorized_keys
-rw-r--r--. root root unconfined_u:object_r:admin_home_t:s0 /root/.ssh/authorized_keys
# restorecon -R ~/.ssh
# ll -Z ~/.ssh/authorized_keys
-rw-r--r--. root root unconfined_u:object_r:ssh_home_t:s0 /root/.ssh/authorized_keys 
```

失败所有这些登录到目标机器并创建完整的密钥结构

```
ssh-keygen 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T05:57:52.250

它要求输入密码，因为您没有告诉客户端机器使用什么密钥。

您可以通过以下两种方式之一执行此操作：

1）当您终端进入远程机器时，使用以下命令：

`ssh -i /path/to/your/privatekey user@host`

2）`~/.ssh/config`在您的客户端计算机上创建文件并插入以下内容：

```
Host your.hostname.tld
IdentityFile /path/to/your/privatekey 
```

如果您要使用多个不同的键，则方法 1 很棒。每次连接到给定主机时，方法 2 都是自动的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-15T09:43:30.093

`.ssh`目录应该在`700`两个系统上。

```
drwx------ .ssh 
```

# jquery - Jquery 文本样式和加载

> ID：10749025
> 
> 赞同：0
> 
> 时间：2012-05-25T05:40:20.880
> 
> 标签：jquery, css, jquery-animate, slide, pjax

我的 pjax 动画文本有问题，并且在动画过程中内容框中的链接变为粗体，这非常令人不安。另一个问题是，当动画已经结束并且内容改变之后，有时新内容还没有加载，我也不喜欢。我需要一些可以改变动画速度以完全匹配内容加载的东西..

这是代码：

```
<?php if($_SERVER["HTTP_X_PJAX"]): ?>
  <div id="main">first body</div>
<?php else: ?>
  <html>
  <head>
  <script src="http://pjax.heroku.com/jquery.js"></script>
  <script src="http://pjax.heroku.com/jquery.cookie.js"></script>
  <script src="http://pjax.heroku.com/jquery.pjax.js"></script>
  <script type="text/javascript">
     $(function() {
      $('a').pjax('#main');
        $('#main').bind('pjax:start', function() {
        $('#main').animate({
          height: 'hide',
          opacity: 'hide'
        }, 'fast')
      }).bind('pjax:end', function() {
        $('#main').animate({
          height: 'show',
          opacity: 'show'
         }, 'slow')
      });
    });
  </script>
  </head>
  <body>
<?php
  $header = "this is header
  <br/> <a href='test2.php' data-pjax='main'>GO</a>";
  $date = date("Y-m-d H:i:s");
  $footer = "this is first footer";
  echo "$header<br/>$date<br /><div id='main'>first body</div><br />$footer";
?>
  </body>
  </html>
<?php endif; ?> 
```

这里也是链接，所以你可以明白我的意思： http: [//www.bluereservations.com/pjax.php](http://www.bluereservations.com/pjax.php)

# eclipse - 如何通过多个 Eclipse rcp 作业实现真正的并发

> ID：10749028
> 
> 赞同：0
> 
> 时间：2012-05-25T05:40:25.050
> 
> 标签：eclipse, multithreading, rcp, jobs

我有一个 Eclipse rcp 应用程序，它有时可能同时运行多个作业。在某些情况下，其中一些作业可能需要暂停一段指定的时间。我注意到，虽然调用 Thread.sleep() 可以做到这一点，但它似乎也对其他工作产生了一些不利影响。当我尝试与 UI 交互时，我什至在应用程序的标题上出现（不响应）。我错误地认为每个作业实例都有自己的线程，但最近发现事实并非如此。在我的脑海中，我唯一能想到的就是在每次创建作业时显式创建一个 Thread 实例，然后通过 Job.setThread() 将前者设置为后者。对此事的任何反馈将不胜感激！感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:04:48.500

我不建议直接攻击底层线程，因为管理线程池是 JobManager 的责任，并且 API 对此没有任何假设。

而是尝试使用以下 Job' 方法：

```
#boolean sleep()
#void wakeUp()
#void join() 
```

文章“On the Job: The Eclipse Jobs API”也可能有所帮助： http: [//www.eclipse.org/articles/Article-Concurrency/jobs-api.html](http://www.eclipse.org/articles/Article-Concurrency/jobs-api.html)

# .net - 如何在 .NET 中获取本地化的标点符号规则？

> ID：10749030
> 
> 赞同：2
> 
> 时间：2012-05-25T05:40:29.603
> 
> 标签：.net, internationalization

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T09:05:03.470

The `System.Globalization` namespace doesn't include punctuation rules. Punctuation really is part of linguistic rules (alongside grammar), whereas the globalization namespace is more about national standards.

I don't know if it helps much, but the example you showed can be solved through regular localization. You could --and should-- include format strings (obviously only those that you use to construct display text) in the resources so that localizers can make changes not just to the punctuation, but to anything else that is necessary (another example being the ordering of the substrings, which may need to be reversed in some languages).

```
string.Format(MyResources.FormatNameAndAssociatedQuantity, this.nameOfAGuy, this.quantityAssociatedWithTheGuy); 
```

with the English version of this string being `"{0}: {1}"` and its French localization `"{0} : {1}"` (with a space before the colon).

# jquery - 如何使用 Jquery 制作多个内容弹出窗口

> ID：10749032
> 
> 赞同：0
> 
> 时间：2012-05-25T05:40:32.927
> 
> 标签：jquery, css

如何使用jquery为不同的按钮显示不同的内容

```
<div id="output"></div>  
<div id="overlay" class="web_dialog_overlay"></div>
<div id="dialog" class="web_dialog">
<table style="width: 100%; border: 0px;" cellpadding="3" cellspacing="0">
  <tr>
     <td class="web_dialog_title">Email this Article</td>
     <td class="web_dialog_title align_right">
        <a href="#" id="btnClose">Close</a>
     </td>
  </tr>

  <tr>
<td colspan="2" style="text-align: center;">

content
</td></tr></table> 
```

```
$(document).ready(function () { 
    $("#btnShowSimple").click(function (e) {
        ShowDialog(false);  
        e.preventDefault(); 
    });
    $("#btnShowShare").click(function (e) {
        ShowDialog(false); 
        e.preventDefault(); 
    }); 
    $("#btnClose").click(function (e) {
        HideDialog(); 
        e.preventDefault(); 
    }); 
    $(document).keyup(function(e) {
        if (e.keyCode == 27) { 
            HideDialog(); 
        }
    });
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:51:18.410

我会把它放在`content`一个`div`元素中： `<div id="myContent">content</div>` 然后在脚本中： `$("#myContent").html("New content");` 在每个函数中。像这样的东西：

```
$(document).ready(function () { 
    $("#btnShowSimple").click(function (e) {
        ShowDialog(false);  
        $("#myContent").html("Simple content");
        e.preventDefault(); 
    });
    $("#btnShowShare").click(function (e) {
        ShowDialog(false); 
        $("#myContent").html("Share content");
        e.preventDefault(); 
    }); 
    $("#btnClose").click(function (e) {
        HideDialog(); 
        e.preventDefault(); 
    }); 
    $(document).keyup(function(e) {
        if (e.keyCode == 27) { 
            HideDialog(); 
        }
    });  }); 
```

**编辑**

这是我对[您在评论中链接到](http://www.ezzylearning.com/tutorial.aspx?tid=6942119)的代码（相关部分）所做的事情：

```
 $("#btnShowSimple").click(function (e)
  {
     $("#dialog").html("Simple");
     ShowDialog(false);
     e.preventDefault();
  });

  $("#btnShowModal").click(function (e)
  {
     $("#dialog").html("Modal");
     ShowDialog(true);
     e.preventDefault();
  }); 
```

# matlab - 如何在matlab中更改聚类点的颜色

> ID：10749033
> 
> 赞同：1
> 
> 时间：2012-05-25T05:41:00.570
> 
> 标签：matlab

我正在实施 AP 聚类算法。我不知道如何为不同的聚类点分配不同的颜色。

我的代码段是：

```
 I=find(diag(E)>0) %  Find number of cluster head
    K=length(I); %cluster head
    fprintf('Number_of_clusters:''%d',length(I))
    [tmp c]=max(distance(:,I),[],2);
    c(I)=1:K ;              
    idx=I(c)
    for k=1:K
    ii=find(c==k)% cluster points
    end; 
```

我必须为不同的集群成员设置不同的颜色，例如集群一的红色，第二个集群的蓝色等等。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T06:08:53.537

下面是一个示例，说明如何用红点绘制一个集群，用绿色加号绘制一个集群：

```
n = 100;
cluster1 = randn([n,2]); % 100 2-D coordinates 
cluster2 = randn([n,2]); % 100 2-D coordinates 
hold on
plot(cluster1(:,1),cluster1(:,2),'r.'); %plotting cluster 1 pts
plot(cluster2(:,1),cluster2(:,2),'g+'); %plotting cluster 2 pts 
```

![在此处输入图像描述](../Images/3ba6098545ae33253911420c341c8a88.png)

`cluster1`现在只需将您的数据转换为与和（集群 1 和集群 2 中的点的矩阵）相同的形式`cluster 2`，然后您可以绘制它们。

假设您没有固定数量的集群。然后你可以这样做：

```
%Defines some order of colors/symbols
symbs = {'r.', 'g+','m*','b.','ko','y+'}; 

figure(1)
hold on
for i = 1:num_clusters,
   % Some code here to extract the coordinates in one particular cluster...
   plot(cluster(:,1),cluster(:,2),symbs{i});
end 
```

[使用 petrichor 评论中关于colorspec](http://mathworks.com/help/techdoc/ref/colorspec.html)的此链接，了解您可以定义的所有不同符号/颜色组合。

# c++ - CodeBlocks makefile 项目总是重建

> ID：10749036
> 
> 赞同：0
> 
> 时间：2012-05-25T05:41:25.813
> 
> 标签：c++, ide, makefile, codeblocks

我已经建立了一个make项目，我可以构建我的项目。

但我有一个问题：当我构建我的项目时，它总是重新构建（如果它是最新的，它会重新构建）？

我已经设置了 Make Config： ![在此处输入图像描述](../Images/fdc3963616517c26fe815ffa65b1a675.png)

Build Log 不显示命令行“nmake -q -f makefile.nmake”，只显示命令行“nmake -f makefile.nmake”；

谢谢您的答复。

PS：我的英文很差，不知道我把问题描述清楚了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:15:59.997

你没有说你的项目有多大。

无论如何，一些 IDE 在解析代码时会触及文件。这使得 makefile 认为文件已被修改，并且需要重建它们。

如何防止重建？没有把握。您可以尝试使用另一个 IDE，或者不为您的项目使用 makefile。对于打开的文件，可能会发生重建。

# java - 由于缓冲区溢出导致数据流断开

> ID：10749038
> 
> 赞同：0
> 
> 时间：2012-05-25T05:41:29.430
> 
> 标签：java, inputstream

我在 java 中使用 HttpURLConnection 从数据提供者获取 Stream(JSON)。BufferedReader 用于读取和处理是在多线程中实现的。当 JSON 流达到每秒 200 个时很好，如果提供者断开更多流并出现此错误

```
Force closing connection to xxx.xxx.xxx.xx because it reached the maximum allowed backup (buffer size is 2343 messages) 
```

我用来检索数据的代码是。

```
pool = new ThreadPoolExecutor(150, 200, 0L, TimeUnit.SECONDS, new LinkedBlockingQueue());
connection = getConnection(dataCollectorURL, username, password);
inputStream = connection.getInputStream();

            if(inputStream!=null)
            {
                int responseCode = connection.getResponseCode();
                if (responseCode >= 200 && responseCode <= 299) {
                    long time = Runtime.getRuntime().freeMemory();
                    BufferedReader reader = new BufferedReader(new InputStreamReader(new GZIPInputStream(inputStream, 100*1024),"utf-8"),100*1024);
                    BufferedReader errorReader = null;
                    String line = reader.readLine();
                    while(line != null){

                        jParser = new ObjectMapper().getJsonFactory().createJsonParser(line);
                        try
    {
        pool.execute(new ParseJSONTwitter(jParser.readValueAsTree()));
        if(loopCount==100)
        {
            printThreadStatus();
            loopCount = 0;
        }
        loopCount++;
    }
    catch(IOException e)
    {
        e.printStackTrace();
    }
                        if(reader.ready())
                        {
                            line = reader.readLine();

                        }
                        else
                        {
                            line = null;

                        }

                    }

                    if(!(responseCode>=200 && responseCode<=299) || line==null)
                    {
                        if(inputStream!=null)
                        {
                            inputStream.close();//To free n/w resources
                        }
                        reconnect();

                    }
                } else {
                    handleNonSuccessResponse(connection);
                        if(inputStream!=null)
                            {
                                inputStream.close();//To free n/w resources
                            }
                            reconnect();
                }
            } 
```

难道我做错了什么？为什么会出现这个错误？有谁知道这个问题？？？

谢谢。-维宾

# c# - 如何在c#中删除额外生成的行

> ID：10749039
> 
> 赞同：-1
> 
> 时间：2012-05-25T05:41:44.397
> 
> 标签：c#, ms-access-2007

当我运行我的代码时出现问题然后它显示如下`

```
asp:GridView ID="gvdetails"  runat="server" EnableViewState="false" AutoGenerateColumns="false" AlternatingRowStyle-CssClass="hidden-column">
            Columns >
            asp:TemplateField HeaderStyle-CssClass="hidden-column">

ItemTemplate>
table class="tborder" width="100%" cellspacing="1" cellpadding="6" border="0" align="center">
thead >
    tr >
        td width="100%" colspan="5" class="tcat">

            Similar Threads
        </td>
    </tr>
</thead>

tr class="thead" align="center">
<td class="thead" width="40%">CompanyFName</td>
<td class="thead" width="15%" nowrap="nowrap">CompanySName</td>

</tr>
<tr>
td class="alt2">
<%# Eval("CompanyFName") %> 
</td>
td class="alt2">
<%# Eval("CompanySName") %> 
</td>
</tr>

/table>

/ItemTemplate>

/asp:TemplateField>
/Columns>
/asp:GridView> 
```

![在此处输入图像描述](../Images/a3f2013fb3367864c24ff09410032dc8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:13:40.543

如果您需要实现如下所示的网格视图。

```
|       Similar threads     |    
| companyFName|CompanySName |
|dxfgf        | sdfsdf      |
|dxfgf        | sdfsdf      |
|dxfgf        | sdfsdf      |
|dxfgf        | sdfsdf      |
|dxfgf        | sdfsdf      |
|dxfgf        | sdfsdf      | 
```

检查[ASP.NET Real World Controls](http://aspnetrealworldcontr.codeplex.com/)，有关更多信息，请查看[此](http://blogs.msdn.com/b/mattdotson/archive/2006/03/01/real-world-gridview-two-headed-grouping-gridviews.aspx)博客文章。

# asp.net-mvc-3 - 将查询字符串值传递到视图模型

> ID：10749043
> 
> 赞同：1
> 
> 时间：2012-05-25T05:42:06.743
> 
> 标签：asp.net-mvc-3, razor, asp.net-mvc-routing

我有一个父子情况，例如我的用户类和我的用户工作子类（实体框架脚手架类）。我使用控制器向导来搭建 CRUD 方法和视图。它构建了两个 Create 方法，Get 和 httpPost 方法。

在正常情况下，我希望将用户的 id 传递到 get 中，以便将其传递到 html.beginform() 部分中填充的模型中，然后将其传递到 post 中。

我不确定这样做的正确方法是什么？我已经修改了 Get 如下

```
public ActionResult Create(int id)
 {
     this.ViewData.Add("id", id);
     return View();
 } 
```

和 Create.shtml 如下

```
@model UserWork

@{
    ViewBag.Title = "Create";
    int id = (int)ViewData["id"];
}

<h2>Create</h2>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"></script>

@using (Html.BeginForm(routeValues:new {user_id = @id})) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Userwork</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.user_id)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.user_id)
            @Html.ValidationMessageFor(model => model.user_id)
        </div>
...... 
```

（我将脚手架的 user_id 字段保留为可编辑，因此我可以测试在表单加载时看到它们预填充）表单加载的字段中没有我的 id 值，这是实现此目的的正确方法吗？

干杯蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:48:13.243

可以在 ViewData 中传递 Id，但我会改用 ViewBag，因为您使用的是 MVC3。它基本上是 ViewData 的基于动态的包装器，无需进行强制转换

控制器：

```
this.ViewBag.UserId = userId; 
```

`ViewBag.UserId`然后，您可以像在视图中一样访问 ViewBag 属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:59:26.473

您没有将任何模型传递给您的视图。这对我来说是错误的。您的视图是`UserWork`模型的强类型，因此控制器操作通常应该将该模型的实例传递给视图，而不是使用任何 ViewData 或 ViewBag：

```
public ActionResult Create(int id)
{
    var model = new UserWork();
    model.user_id = id;
    return View(model);
} 
```

在视图中：

```
@model UserWork

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"></script>

@using (Html.BeginForm() {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Userwork</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.user_id)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.user_id)
            @Html.ValidationMessageFor(model => model.user_id)
        </div>
...... 
```

另请注意，在`Html.BeginForm`您不需要重新传递的情况下，`user_id`因为您在表单中为此字段提供了相应的编辑器模板。但通常不应该有文本输入字段，以便用户可以修改正在编辑的实体的 id。在这种情况下，您可以使用路线数据或隐藏字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T07:56:31.963

所以我最初的问题提出了其他几个关于我对 MVC 和路由的理解的问题。我确定如果我将一个参数作为整数传递给表单中的路由

```
http://mydomain/controller/myaction/123 
```

如果我的操作方法是形式

```
public ActionResult Create(int id)
        {} 
```

一切都很酷，但如果它的形式

```
 public ActionResult Create(int user_id)
        {} 
```

然后我得到一个异常，即未填充所需的参数 user_id。我添加了一个额外的映射，如下所示，这似乎正确地填充了视图。

```
routes.MapRoute("Create", "{controller}/Create/{user_id}",new {action = "Create"}); 
```

我决定不实例化模型并将其传递到视图中，因为它使用上面的路由将用户 ID 正确地传递到模型的 user_id 字段中。

干杯蒂姆

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T10:13:49.787

我在父->子关系方面遇到了同样类型的问题。但我通过创建以下路线解决了这个问题：

```
routes.MapRoute(
                "route_name",
                "Parents/{parent_id}/{controller}/{action}/{id}",
                new { action = "list", id = UrlParameter.Optional },
                new { parent_id= @"\d+" }
            ); 
```

在你的情况下，它会变成-

```
routes.MapRoute(
                "User_Route",
                "Users/{user_id}/{controller}/{action}/{id}",
                new { action = "list", id = UrlParameter.Optional },
                new { user_id= @"\d+" }
            ); 
```

和 UserWorke 的示例 url-

```
(siteurl)/Users/1/UserWork/list
(siteurl)/Users/1/UserWork/New
(siteurl)/Users/1/UserWork/Edit/1 
```

等等……

使用这条路线很容易从一个动作导航到另一个动作，因为您不需要在重定向时一次又一次地传递 user_id。并在 URL 中提供有关您正在导航的内容的清晰图片。

# android - 如果 GPS、WIFI、蓝牙打开，则更改图像视图

> ID：10749045
> 
> 赞同：0
> 
> 时间：2012-05-25T05:42:08.840
> 
> 标签：android, gps, bluetooth

我有 3 个 GPS、WIFI、BLUETOOTH 的图像视图，如果 GPS、WIFI、BLUETOOTH 开启（以编程方式），我想更改每个图像视图的背景图像

如果 GPS、BLUETOOTH 开启，图像应该会改变，否则没有

我试过但它不工作

final LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

```
 gpsimg.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub

        if (!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){
            //Toast.makeText(this, "GPS is Enabled in your devide", Toast.LENGTH_SHORT).show();
            //showGPSDisabledAlertToUser();
            Intent myIntent = new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
            startActivity(myIntent);

            gpsimg.setImageResource(R.drawable.gps);

            }else if(locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){
                gpsimg.setImageResource(R.drawable.gps);
            }

    }
}); 
```

蓝牙代码在这里

```
 mBtAdapter = BluetoothAdapter.getDefaultAdapter();

    if(!mBtAdapter.isEnabled())
    {

        bluetoothimg.setImageResource(R.drawable.bt_grey);
         Log.i(TAG ,"BLUETOOTH DISABLED") ;

    } 
            bluetoothimg.setOnClickListener(new View. OnClickListener() {

        public void onClick(View v) {
        // TODO Auto-generated method stub
            Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
            int REQUEST_ENABLE_BT = 1;
            startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT );
             bluetoothimg.setImageResource(R.drawable.bt);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:53:54.727

`setImageResource`在调用之前使用，`startActivityForResult`并且`startActivity`作为：对于 GPS：

```
gpsimg.setImageResource(R.drawable.gps);
startActivity(myIntent); 
```

对于蓝牙：

```
 bluetoothimg.setImageResource(R.drawable.bt);    
 startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:47:37.180

试试这个：

```
bluetoothimg.setBackgroundDrawable(getResources().getDrawable(
                    R.drawable.bt)); 
```

# .net - 从 WPF 中的用户控件加载 Windows

> ID：10749048
> 
> 赞同：1
> 
> 时间：2012-05-25T05:42:46.530
> 
> 标签：.net, wpf

我有一个窗口（主窗口），我在其中使用停靠面板并在该停靠面板中加载用户控件。这个用户控件（Newplan usercontrol）有一堆按钮和一个内容控件，还有两个按钮下一步和取消。

我需要做的是，当我按下下一个按钮时，它正在加载下一步的用户控件（根据堆栈面板中的按钮），所以当用户处于最后一步时（完成并在 newplan 用户控件的内容控件内并在 newplan 用户控件内完成按钮。所以当按下 finsih 按钮时，主启动窗口（主窗口）应该会出现。

我怎样才能做到这一点。

这是我的第一篇文章。抱歉英语和描述不佳。

# php - Heart Internet 上的 SOAP 错误

> ID：10749052
> 
> 赞同：0
> 
> 时间：2012-05-25T05:42:55.610
> 
> 标签：php, soap, loopback

我在托管在英国心脏互联网上的服务器上编写了以下代码。

```
// Pull in the NuSOAP code
require_once('./lib/nusoap.php');
// Create the server instance
$debug = 1;
$server = new soap_server;
// Register the method to exposes
$server->register('hello');
// Define the method as a PHP function
function hello($name) {
    return 'sucess ' . $name;
}
// Use the request to (try to) invoke the service
$HTTP_RAW_POST_DATA = isset($HTTP_RAW_POST_DATA) ? $HTTP_RAW_POST_DATA : '';
$server->service($HTTP_RAW_POST_DATA);
exit(); 
```

之后，当我试图用这个来调用它时

```
 $siteurl   =   get_option('siteurl');
 $siteurl    =   $siteurl.'/wp-content/plugins/soapserverfortest.php';
 @$client     = new nusoap_client($siteurl);
  // Call the SOAP method
 @$result     = $client->call('hello', array('name' => 'cubet'));
 // Display the result
return $result; 
```

我没有得到结果。

当我们联系 Heart 互联网时，他们说，

> 问题很可能是soap测试正在尝试使用环回连接——即通过端口80连接到同一台服务器和从同一台服务器连接。
> 
> 出于安全和性能原因，此类连接在我们的服务器上被阻止

谁能告诉我如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:37:16.940

Sergey 建议您尝试更改：

```
$siteurl   =   get_option('siteurl');
$siteurl    =   $siteurl.'/wp-content/plugins/soapserverfortest.php'; 
```

至：

```
 $siteurl   =   get_option('http://localhost/wp-content/plugins/soapserverfortest.php'); 
```

它可能有效，但我认为 Heart Internet 是一个共享主机，每个 IP 地址有多个客户端——在这种情况下它可能不起作用。值得一试。如果不是，我建议尝试不同的主机（或寻找其他解决方案——您真的需要使用自己的 Web 服务吗？）

# g++ - 构建和链接共享库

> ID：10749058
> 
> 赞同：19
> 
> 时间：2012-05-25T05:43:40.590
> 
> 标签：g++, cygwin, shared-libraries

我正在尝试使用 g++ 在 windows cygwin 平台上构建共享库，然后将其与另一个 cpp 文件链接：我使用以下命令：

```
// generate object file

g++ -g -c -Wall -fPIC beat11.cpp -o beat11.o

// to generate library from the object file

g++ -shared -Wl,-soname,libbeat.so.1 -o libbeat.so.1.0.1 beat11.o -lc

// to link it with another cpp file; -I option to refer to the library header file

g++ -L. -lbeat -I . -o checkbeat checkbeat.cpp 
```

链接时，出现以下错误：

```
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: 
     cannot find -llibbeat.so.1.0.1

collect2: ld returned 1 exit status 
```

图书馆创建得很好，但我只能找到 libbeat.so.1.0.1，而不是 libbeat.so 或 libbeat.so.1（或者他们不应该在那里？）

其他问题之一建议创建指向 libbeat.so.1.0.1 的符号链接，但这也不起作用

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-05T13:40:57.080

使用`-l<libname>`指定要链接的库时，链接器会先搜索，`lib<libname>.so`然后再搜索`lib<libname>.a`。

在您的情况下，它不起作用，因为库文件名没有`.so`后缀。

您可以创建 simlink

```
libbeat.so -> libbeat.so.1.0.1 
```

或者

```
libbeat.so -> libbeat.so.1
libbeat.so.1 -> libbeat.so.1.0.1 
```

您也可以使用`-l:libbeat.so.1.0.1`（如果您的链接器支持它，请检查参数`man ld`说明`-l`）。另一种选择是不指定库`-l`

```
g++ -o checkbeat checkbeat.cpp -I . -L. libbeat.so.1.0.1 
```

请注意，您链接到的库应使用其符号放在对象/源文件之后 - 否则链接器可能找不到符号。

# ios - 使用 NSURLProtocol 编辑标题？

> ID：10749063
> 
> 赞同：2
> 
> 时间：2012-05-25T05:44:00.847
> 
> 标签：ios, iphone, ipad, mobile-safari

如何使使用`file://`url 协议打开的网页发送标头`"Access-Control-Allow-Origin: *"`

我想可以通过 NSURLProtocol 来做，但我不知道怎么做。

这是为了修复我在使用`file://`url的页面时收到的错误`Origin null is not allowed by Access-Control-Allow-Origin.`

# nsurlconnection - 'NSRangeException'，原因：'*** -[__NSArrayM objectAtIndex:]：空数组的索引 1 超出范围'

> ID：10749065
> 
> 赞同：0
> 
> 时间：2012-05-25T05:44:24.223
> 
> 标签：nsurlconnection, nsrangeexception

我创建了一个从互联网下载音乐的类，当我在完成第一首歌曲下载后尝试下载歌曲时，我得到了错误

```
 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 1 beyond bounds for empty array' 
```

我的代码在这里，

```
 - (void)connectionDidFinishLoading:(NSURLConnection *)connection {
  [connection release];

    NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

//[responseData release];

  dict=[responseString JSONValue];
  //title is  NSArray object
  title=[dict valueForKey:@"sTitle"];

  URLTitle=[[NSMutableArray alloc]init];
  [URLTitle addObjectsFromArray:title];

   [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
   NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
   NSString *documentsDirectoryPath = [[paths objectAtIndex:0]stringByAppendingPathComponent:@"pslamsSongs.mp3"];
   NSLog(@"path %@",documentsDirectoryPath);
   [receivedData writeToFile:documentsDirectoryPath atomically:YES];

if (receivedData) {
     UIAlertView *alt = [[UIAlertView alloc] initWithTitle:@"Download Completed" message:@"Download Music completed, you can access the music from iTunes" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
    [alt show];
    [alt release];
   }

 }

 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
   {

  return [URLTitle count];
   }

  - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
   {
newCell = nil;

newCell = [tableView dequeueReusableCellWithIdentifier:identifier];

if(newCell == nil)
{
    NSLog(@"newCell ===================");
    NSArray *nibViews = [[NSBundle mainBundle] loadNibNamed:@"downloadPageCell" owner:self options:nil];
    newCell  = [ nibViews lastObject];
}

   newCell.downloadButton.tag=indexPath.row;

  [newCell.downloadButton addTarget:self action:@selector(downloadButtonPressed:) forControlEvents:UIControlEventTouchUpInside];

newCell.downloadButton.tag=indexPath.row;

return newCell;
  }

  - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {

 }

  -(void)downloadButtonPressed:(UIButton*)sender
    {

  UIButton *btn1 = (UIButton *)sender;

 //**i got the error in this line**

   appendString=[URLTitle objectAtIndex:btn1.tag];

  appendString= [appendString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

 URL= [staticURL stringByAppendingString:appendString];

  NSLog(@"download button pressed");
  downloadURL=[[NSURL alloc]initWithString:URL];

  theRequest = [NSURLRequest requestWithURL:downloadURL cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:60];
  receivedData = [[NSMutableData alloc] initWithLength:0];
  connection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self startImmediately:YES];

  } 
```

当我完成第一个下载后单击下一个下载时，我的数组变为空，有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T10:14:35.157

每次下载完歌曲时，都会分配一个新的 NSMutableArray，将其分配给 URLTitle，然后将新下载的对象添加到那里。它与将对象添加到现有的 NSMutableArray 不同，因此每次下载新歌曲时它都会首先变为空。

尝试在 viewDidLoad 方法中只分配一次 URLTitle：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    URLTitle = [[NSMutableArray alloc]init];
} 
```

并在*connectionDidFinishLoading*方法中`[URLTitle addObjectsFromArray:title];`保持原样。

# java - 纪元时间与当前年份的日期

> ID：10749069
> 
> 赞同：1
> 
> 时间：2012-05-25T05:44:39.650
> 
> 标签：java, datetime, epoch

```
String mytime = "5177706";

long epoch = Long.parseLong( mytime );

Date expiry = new Date( epoch * 1000 ); 
```

当我将纪元时间转换为日期时，结果是

> 1970 年 3 月 2 日星期一 05:45:06 SGT

纪元时间的原因，年份是1970年，虽然答案的日期和月份是期望的结果。

**如何将年份转换为当前年份作为输出，例如。2012 年 3 月 2 日星期一 05:45:06 SGT？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:08:05.737

基本上你只想这样做：

```
Calendar cal = Calendar.getInstance();
cal.setTime(expiry);
cal.set(Calendar.YEAR, 2012);
Date expiryThisYear = cal.getTime(); 
```

提出了一些有趣的问题，关于你最初是如何将 517706 作为输入的，但世界有时是一个奇怪的地方 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:52:16.693

以下代码将`epoch`5177706 秒添加到当年的 1 月 1 日，即 2012 年 1 月 1 日 00:00:00:000 GMT。

```
public static void main(String[] args) {
    String mytime = "5177706";
    long epoch = Long.parseLong(mytime);

    // Get January 1st of the current year in GMT.
    Calendar calendar = Calendar.getInstance();
    calendar.setTimeZone(TimeZone.getTimeZone("GMT"));
    calendar.set(Calendar.MONTH, Calendar.JANUARY);
    calendar.set(Calendar.DAY_OF_MONTH, 1);
    calendar.set(Calendar.HOUR_OF_DAY, 0);
    calendar.set(Calendar.MINUTE, 0);
    calendar.set(Calendar.SECOND, 0);
    calendar.set(Calendar.MILLISECOND, 0);

    // Convert epoch to milliseconds and add to January 1st of the current year.
    Date expiry = new Date(calendar.getTime().getTime() + epoch * 1000);

    // Output the expiry date in Asia/Singapore (SGT) time.
    DateFormat format = new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy");
    format.setTimeZone(TimeZone.getTimeZone("Asia/Singapore"));
    System.out.println(format.format(expiry));
} 
```

上面的代码输出`Thu Mar 01 06:15:06 SGT 2012`. `Mar 02 05:45:06 SGT`由于以下原因，月、日和时间与预期不同：

*   [新加坡标准时间 (SGT)](http://en.wikipedia.org/wiki/Singapore_Standard_Time)于 1981 年 12 月 31 日从 UTC+07:30 更改为 UTC+08:00，因此时间增加 30 分钟：

    `Mar 02 05:45:06 SGT`+ 30 分钟 = `Mar 02 06:15:06 SGT`。

*   2012 年是闰年，所以减去一天：

    `Mar 02 06:15:06 SGT`- 1 天 =`Mar 01 06:15:06 SGT`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:56:07.710

你的问题不是很清楚（听起来像一些奇怪的硬件问题）。无论如何，您只需添加自您提供的日期以来经过的时间（以毫秒为单位）。

1.  `msOriginal`是您在 ms 中提供的日期。
2.  `msElapsed`是自 1970 年以来经过的总毫秒数。这等于`2012 - 1970 = 42`年。
3.  `msElapsedLeapYears`是经过的闰年总天数。如果您查看 wiki 文章，[闰年列表，](http://en.wikipedia.org/wiki/List_of_leap_years)您可以看到有 11 年。所以你必须考虑11天。

以上 3 个字段的总和为您提供了您正在寻找的结果。请注意，日期不会在同一天（3 月 1 日不是 2012 年的星期日）。如果您希望这一天保持不变，则必须是 2015 年（45 年）。基本上，经过的天数 mod 7 需要为 0 才能使日期落在同一天。

此示例代码是在 groovy 中完成的，因此语法与常规 java 略有不同。

```
long epoch = 5177706l;
Calendar current = Calendar.getInstance();
current.setTimeInMillis(epoch*1000);
println current.getTime();
long msOriginal = (epoch*1000);
long msElapsed = 42l*365*24l*3600*1000;
long msElapsedLeapYears = 11l*24*3600*1000;
current.setTimeInMillis(msOriginal+msElapsed+msElapsedLeapYears);
println current.getTime(); 
```

结果：

```
Sun Mar 01 16:15:06 CST 1970
Thu Mar 01 16:15:06 CST 2012 
```

# cross-domain - 使用 Tumblr 在子域上的 Respond.js

> ID：10749070
> 
> 赞同：2
> 
> 时间：2012-05-25T05:44:42.427
> 
> 标签：cross-domain, tumblr, media-queries, responsive-design

[我的网站](http://www.stevechab.com)是响应式的。[博客部分](http://blog.stevechab.com)使用指向 Tumblr的子域，但 Respond.js 的跨域版本不起作用。我正在这样做：

```
<script src="http://www.stevechab.com/scripts/respond.min.js"></script>
<link href="http://www.stevechab.com/scripts/respond-proxy.html" id="respond-proxy" rel="respond-proxy">
<link href="http://www.stevechab.com/scripts/respond.proxy.gif" id="respond-redirect" rel="respond-redirect">
<script src="http://www.stevechab.com/scripts/respond.proxy.js"></script> 
```

我认为问题在于respond.proxy.gif 和respond.proxy.js 不在blog.stevechab.com 上……但这不会破坏拥有Respond.js 的跨域版本的目的吗？我的假设是正确的，还是我错过了什么？有解决办法吗？

注意：我试过[http://www.tumblr.com/themes/upload_static_file](http://www.tumblr.com/themes/upload_static_file) ...没有骰子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T20:11:15.047

@史蒂夫查布，

*respond.js*和*respond.proxy.js*不适合你 有两个原因。

1.  您在源域中有*response-proxy.html*文件，而该文件应该从您的子域 ( *blog.stevechab.com* ) 或任何其他外部域提供。

2.  链接到具有相对 url 的 css 文件时， *respond.js* / *respond.proxy.js*似乎存在错误。要修复它，请使用绝对 url。您的主站点使用 css 样式表的相对 url，而您的博客使用绝对 url。

    *   *注意：Bug 是由 respond.proxy.js ajax/xml 函数引起的*

请在下面找到重新修订的工作标记，以使*respond.js*和*respond.proxy.js*在您的网站上工作。

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="http://www.stevechab.com/styles/styles.css">
<!--[if (lt IE 9) & (!IEMobile 7)]>
<link href="//blog.stevechab.com/scripts/respond-proxy.html" id="respond-proxy" rel="respond-proxy">
<link href="//www.stevechab.com/scripts/respond.proxy.gif" id="respond-redirect" rel="respond-redirect">
<![endif]-->
</head>
<body>
<!-- Your content goes here. -->

<!--[if (lt IE 9) & (!IEMobile 7)]>
<script src="//www.stevechab.com/scripts/respond.min.js"></script>
<script src="//www.stevechab.com/scripts/respond.proxy.js"></script>
<![endif]-->
</body>
</html> 
```

*   GitHub 上的响应.js
    *   [http://github.com/scottjehl/Respond](http://github.com/scottjehl/Respond)

*   用于 Wordpress 的 Respond.js 插件
    *   [http://wordpress.org/plugins/respondjs/](http://wordpress.org/plugins/respondjs/)

*   Twitter Bootstrap 使用的 Respond.js
    *   [http://getbootstrap.com/getting-started/](http://getbootstrap.com/getting-started/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T15:54:01.880

引用`respond.js`自述文件：

> Respond.js 通过 AJAX 请求 CSS 的原始副本来工作，因此**如果您将样式表托管在 CDN（或子域）**上，则需要上传代理页面以启用跨域通信。

——我的重点。跨域版本旨在使您能够处理从另一个域加载的样式表，而不是`respond.js`正在处理的域。但是，在 Tumblr 的情况下，您添加*了第三个*域：`static.tumblr.com`，您的代理脚本和 gif 已经登陆。那不能也不会奏效。

# c++ - C++11 可变参数模板：默认索引数组值

> ID：10749078
> 
> 赞同：2
> 
> 时间：2012-05-25T05:46:35.920
> 
> 标签：c++, c++11, tuples, variadic-templates

[这是一个使用从Johannes Schaub-litb](https://stackoverflow.com/users/34509/johannes-schaub-litb)和[Luc Danton](https://stackoverflow.com/users/726300/luc-danton)的答案改编的代码打印元组的简短程序。

```
#include <iostream>
#include <tuple>

template<int ...>
struct seq { };

template<int N, int ...S>
struct gens : gens<N-1, N-1, S...> { };

template<int ...S>
struct gens<0, S...> {
  typedef seq<S...> type;
};

template <int ...S, typename ...T>
void print(const std::tuple<T...> & tup, seq<S...> s) {
  int res[] = { (std::cout << std::get<S>(tup) << " ", 0)... };
  std::cout << std::endl;
}

int main() {
  std::tuple<double, int, char> tup(1.5, 100, 'c');
  print(tup, gens<std::tuple_size<decltype(tup)>::value >::type());
  return 0;
} 
```

print 的第二个参数将始终是`gens<N>::type()`，其中`N`是元组的大小。我试图通过提供默认参数来避免打印第二个参数：

```
template <int ...S, typename ...T>
void print(const std::tuple<T...> & tup, seq<S...> s = gens<std::tuple_size<decltype(tup)>::value >::type()) {
  int res[] = { (std::cout << std::get<S>(tup) << " ", 0)... };
  std::cout << std::endl;
} 
```

但是，结果是编译器错误：

> tmp5.cpp: 在函数'void print(const std::tuple<_Elements ...>&, seq) [with int ...S = {}; T = {double, int, char}]':
> tmp5.cpp:23:12: 错误：不完整的类型'std::tuple_size&>' 用于嵌套名称说明符

**你知道有什么方法可以在`S...`没有第二个参数的情况下提供函数`print`吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:30:06.480

`S...`问题是如果您不提供第二个函数参数，编译器将无法推断索引序列。当它到达默认参数时，它需要知道是什么`S...`，所以它不能使用默认参数来确定它。

这可以通过提供`print`构建索引列表的重载并转发到接受索引列表的重载来解决：

```
template <typename ...T>
void print(const std::tuple<T...> & tup) {
  print(tup,typename gens<sizeof...(T)>::type());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T08:43:01.950

不，那里没有。

事实上，这个问题不仅限于可变参数模板，它发生在所有模板函数中：参数的模板类型不能从其默认值推导出来。

```
template <typename T>
void func(T = 0) {} // expected-note {candidate template ignored:\
                                      couldn't infer template argument 'T'}

int main() {
  func(); // expected-error {no matching function for call to 'func'}
} 
```

你需要换档。

The easiest way to do so would be to provide an overload that would be tasked with passing the second argument. After all, default arguments are just syntactic sugar to avoid writing a forwarding function.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T07:23:23.970

可能有更好的方法，但我能想到的最简单的方法是添加额外的间接级别：

```
#include <iostream>
#include <tuple>

template<int ...>
struct seq { };

template<int N, int ...S>
struct gens : gens<N-1, N-1, S...> { };

template<int ...S>
struct gens<0, S...> {
  typedef seq<S...> type;
};

template <typename ...T, int ...S>
void print_impl(const std::tuple<T...> & tup, seq<S...>) {
  int res[] = { (std::cout << std::get<S>(tup) << " ", 0)... };
  std::cout << std::endl;
}
// Pass args to real implementation here
template <typename ...T>
void print(const std::tuple<T...> & tup)
{
    print_impl(tup, typename gens<sizeof...(T)>::type());
}

int main() {
  std::tuple<double, int, char> tup(1.5, 100, 'c');
  print(tup);
  return 0;
} 
```

# spreadsheet - 如何在 ms excel 中显示隐藏的行？

> ID：10749081
> 
> 赞同：1
> 
> 时间：2012-05-25T05:46:42.057
> 
> 标签：spreadsheet, excel-2003

我相信我不必把我的代码放在这里，因为这不是代码相关的东西，反正我有一个 MS Excel 2003 电子表格，它是由我的一位办公室同事传给我的，我不知道他们做了什么到它，但是缺少某个列（特别是 A 列）。我试图在打印预览中查看它，但它以某种方式显示了我一直在寻找的隐藏列。现在让我困扰的是，怎么可能在打印预览上，当我回到正常视图时，A 列是无处可见的。我试图突出显示所有内容并尝试取消隐藏/隐藏它，但它仍然不存在。我希望有人可以指导我完成这些事情。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:53:58.293

选择之间的两列，右键单击标题，单击取消隐藏。例如：![在此处输入图像描述](../Images/6422f4f0ca57d07c97069fcdc7b3835d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:55:33.947

尤里卡......由于没有人回应，幸运的是我从我的一位受信任的大师那里得到了一个小费，然后他告诉我去 Window，然后选择 Unfreeze Panes，然后瞧，我一直在寻找的缺失列已经找到. 呜呜呜呜呜呜……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T10:28:18.580

我最近遇到的另一个可能的问题是您可能在文件中打开了过滤器 - 因此请检查以确保它们已关闭！

# user-interface - 我要做很多system()命令行操作windows c++ MFC项目，弹出黑框，有没有办法抑制呢？

> ID：10749086
> 
> 赞同：1
> 
> 时间：2012-05-25T05:47:06.560
> 
> 标签：user-interface, mfc, system, dos

我正在为 Windows (7) 编写一个应用程序，它必须运行许多只能使用系统调用才能完成的“dos 样式”命令行程序。当我运行系统调用时，大黑框弹出然后消失。它使执行看起来超级草率而且慢得多（我确实喜欢其中的 25 个，而且看起来很糟糕）我想将它们完全隐藏在屏幕上并让它们运行......有没有办法做到这一点？我已经翻遍了，我找不到任何关于这个的..

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T05:53:20.987

代替`system`，您可以使用`ShellExecute`并指定`SW_HIDE`。或者，您可以使用`CreateProcess`并指定`DETACHED_PROCESS`. 下面是一段演示代码，它为您在命令行中指定的可执行文件创建了一个分离的进程：

```
#define WIN32_LEAN_AND_MEAN
#include <windows.h>

#include <stdio.h>

void system_error(char *name) {
// Retrieve, format, and print out a message from the last error.
// The `name' that's passed should be in the form of a present tense
// noun (phrase) such as "opening file".
//
    char *ptr = NULL;
    FormatMessage( FORMAT_MESSAGE_ALLOCATE_BUFFER |
        FORMAT_MESSAGE_FROM_SYSTEM,
        0, GetLastError(), 0, (char *)&ptr, 1024, NULL);

    printf("\nError %s: %s\n", name, ptr);
    LocalFree(ptr);
}

PROCESS_INFORMATION p;

BOOL WINAPI die(DWORD reason) {
    TerminateProcess(p.hProcess, 1);
    return TRUE;
}

int main(int argc, char **argv) {

    STARTUPINFO s;

    memset(&s, 0, sizeof s);
    s.cb = sizeof(s);

    if (!CreateProcess(argv[1], argv[2], NULL, NULL, TRUE,
        DETACHED_PROCESS, NULL, NULL, &s, &p))
    {
        system_error("Spawning program");
        return 1;
    }

    SetConsoleCtrlHandler(die, TRUE);

    WaitForSingleObject(p.hProcess, INFINITE);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:16:17.720

如果您在这些命令行完成的任务之间存在依赖关系，则最好使用 CreateProcess 或 ShellExecuteEx，因为它们将允许您在结果进程句柄上使用 WaitForSingleObject，如此处[所述](http://bobmoore.mvps.org/Win32/w32tip58.htm)。因此，您可以等待一项任务完成，然后再开始下一项。

# android - 图像存储在数据库中

> ID：10749096
> 
> 赞同：0
> 
> 时间：2012-05-25T05:47:44.493
> 
> 标签：android, database

BLOB是唯一可以将图像存储在数据库中的数据类型吗？使用BLOB有什么优势。BLOB数据类型的可移植性如何。请给出基于图像存储的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:04:13.777

除了将字节存储在**Blob**类型的列中，另一种方法是将字节转换为`Base64`字符串并将该字符串简单地存储在**Text**类型的列中。关于便携性，您可以决定哪个更好并且您更喜欢哪个。我个人喜欢玩字符串而不是字节:)

要将图像转换为 Base64 字符串：

```
ByteArrayOutputStream stream = new ByteArrayOutputStream();
mBitmap.compress(Bitmap.CompressFormat.JPEG, 80, stream);
final byte[] byteArray = stream.toByteArray();
final String imgString = Base64.encodeToString(byteArray, Base64.DEFAULT); 
```

要将 Base64 字符串转换为图像：

```
byte[] byteArray = Base64.decode(imgString, Base64.DEFAULT);
Bitmap mBitmap = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:55:25.367

您可以将该图像的字节数组存储在数据库中，而不是存储图像。您可以将该图像转换为字节数组并存储在数据库中。当您想要检索该图像时，您将从将该字节数组转换为位图获得字节数组，你会得到你的形象。

[http://www.coderanch.com/t/550604/Android/Mobile/Help-insert-retreive-image-database](http://www.coderanch.com/t/550604/Android/Mobile/Help-insert-retreive-image-database)

# amazon-ec2 - 如何备份 aws ec2 实例/临时存储？

> ID：10749099
> 
> 赞同：18
> 
> 时间：2012-05-25T05:47:57.057
> 
> 标签：amazon-ec2, amazon-web-services, ec2-api-tools

我使用 ec2 实例附带的临时存储将我的数据库保存在 /mnt。要使用 ec2 api 工具进行备份，我们需要一个卷 ID，但在 aws 控制台中，我只能找到 8gb 根存储的卷 ID。

如果要备份临时存储，我该怎么办？是否有备份实例存储的替代方法？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-25T08:27:05.767

首先，您永远不应该在[Amazon EC2](http://aws.amazon.com/ec2/)**中的临时存储上存储任何具有持久价值的东西**，除非您确切知道自己在做什么并准备始终进行时间点备份等 - 您的问题似乎*表明*您*可能*误解了临时存储的概念、[Amazon EC2 实例存储](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/InstanceStorage.html)和[Amazon EBS](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/AmazonEBS.html)之间的各自区别以及对数据安全和备份要求的重大影响：

 **临时存储**将在停止/启动周期中丢失，**并且**通常会消失**，因此您绝对不想将任何具有持久价值的东西放在那里，即**只将临时数据放在那里您可以承受丢失或轻松重建**，例如交换文件或在计算过程中使用的严格的临时数据。当然，例如，您可能会在那里存储大量索引，但必须准备好在出于任何原因（例如重启、硬件故障等）清除存储后重建这些索引。

*   [这就是 Eric Hammond 在您应该在 Amazon EC2 上使用 EBS 引导实例](http://alestic.com/2012/01/ec2-ebs-boot-recommended)中出色总结的众多原因之一，其中概述了两种存储概念的历史和差异，并评估了临时存储的剩余可能优势（主要是丰富且免费） ）。

### 问题方案

这些解释应该阐明为什么您无法使用仅适用于 EBS 卷（即 EBS 快照）的机制来备份临时存储卷。因此，您可以通过您选择的常规操作系统级备份工具来备份前者，例如[Duplicity](http://duplicity.nongnu.org/)是一种流行的选择，可以选择性地促进[Amazon S3](http://aws.amazon.com/s3/)，正如我对[最容易使用实时 linux 服务器的备份软件的](https://serverfault.com/a/387143/10305)回答中所述。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-14T08:59:42.457

临时存储或实例存储，就像 /tmp 文件夹一样，其内容在重新启动后会消失。当然，临时驱动器内容不会在软重启时被破坏，但它们应该被视为已被破坏，因为您无法实际控制或预测实例何时决定死亡。

这已经被指出了。

我想指出的是，如果您适当地创建和配置 AMI，您仍然可以使用临时存储来大幅提高（读取）吞吐量，只要您还保留 EBS 驱动器用于实际存储。

我目前使用的是带有 bcache 的 Linux (Ubuntu Tahr) 实例。这主要是因为 bcache 内核支持相对较新（IIRC，第一个使用 bcache 的版本是 3.10），而且您肯定想要尽可能新的内核。此外，Tahr 是 Ubuntu 的下一个 LTS 版本，当我的项目即将启动时，它是最终版本；）

**Bcache，在其默认配置中，允许您从临时存储的读取**速度中受益，同时为您提供 EBS 的持久性：它需要一个快速缓存设备（临时 SSD）并使用它来加速一个慢速设备（EBS），通过缓存设备写入（即同时写入临时缓存和 EBS）。

这意味着，如果实例崩溃或以其他方式停止，您仍然可以直接挂载 EBS 卷而无需缓存，并访问您的所有数据，就像仅使用 EBS 卷一样。您还可以重新配置现在已擦除的临时设备并将它们重新配置为 EBS 的缓存，以重新享受非常快速的读取和查找。

我的特定设置是两个 EBS 设备，使用 mdadm 以条带模式突袭 + 两个临时 SSD 设备也以相同的方式突袭。然后我用 bcache 配置它们，使用临时数组作为缓存，使用 EBS 数组作为“备份”设备。EBS 驱动器可以是任意大小，并且您始终可以扩展它们（使用 EC2 有点棘手，因为您必须创建当前 EBS 卷的快照，然后基于该快照创建新的更大的卷 - 您无法调整大小现有的 EBS 卷）。

当然，您必须创建一个在启动时在实例内部运行的脚本，以配置临时存储并将其作为缓存设备附加到您的 EBS 支持的备份设备上。我鼓励阅读并尝试使用[mdadm](http://www.linuxmanpages.com/man8/mdadm.8.php)和[bcache](http://bcache.evilpiepirate.org/)。

作为记录，使用 Cassandra 压力工具进行测试，与仅对临时驱动器进行条带化相比，使用临时驱动器 bcached 的 EBS 卷获得**更好的读取性能。**这是因为bcache中使用的算法非常聪明。

使用临时驱动器作为缓存还可以减少网络流量并且具有成本效益，因为它可以减少 EBS 上的 I/O，从而减少您的每月账单。

另请注意 bcache 提供的不同类型的缓存：

1.  回写：将 SSD 用作读/写设备，仅在需要从缓存中逐出页面时才写入备份设备。这对于 EC2 临时设置**没有**用，因为它会使您的备份设备在崩溃或停止时无用。
2.  直写：所有写入都进入缓存和备份。这确保了备份设备始终与缓存设备一样是最新的，并且它始终可以在没有缓存设备的情况下使用。对 EC2 有用。
3.  Write around：所有写入都直接发送到备份设备，并且在将来某个时间对该数据发生读取请求之前不会写入缓存设备。只有读取缓存在缓存设备上。这与直写一样安全，如果您知道在不久的将来不太可能读取您的写入内容，这将非常有用。这避免了用不经常请求的数据填充缓存设备，从而**为**请求的数据提供更多空间。举几个例子，文件上传服务器、写入大量日志数据的系统等。如果您知道整个数据集明显大于临时存储大小，那么这很可能是最有效的大量用例中的选项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-02T23:26:46.383

如果您能够配置软件 RAID 镜像，则可以将 EBS 支持的磁盘附加到实例，配置镜像，然后等待复制完成。在我已经创建实例之后（并且我不想关闭并重新启动），我已经成功地使用这种方法将“临时”数据移动到 EBS 中。

获得 EBS 上的数据后，请使用 EBS 图像进行备份。

当您在不同的相同实例上运行数据的多个副本时，此方法特别有效，但您只需要将其中一个持久化到 EBS（在我的情况下，使用 Couchbase 服务器，CB 数据位于临时驱动器上，但我有一个镜像到 EBS 的实例，因此我集群上的所有数据最终都在 EBS 中）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-28T16:52:29.450

任何文件级备份解决方案（不基于 EBS 快照）都可以备份您的临时存储。也就是说，您应该考虑何时使用临时存储，并有充分的理由将其用于持久数据。对于某些应用程序，例如 Cassandra，这是推荐的配置。在这种情况下，您的备份解决方案将主要将数据从临时存储转储到 EBS 卷，该卷将被快照或直接转储到 S3。在某些情况下，您可以定义复制并确保临时设备中的所有数据也复制到 EBS 卷。**

# c - 如何消除字符串连接输出中不必要的符号？

> ID：10749101
> 
> 赞同：0
> 
> 时间：2012-05-25T05:48:05.187
> 
> 标签：c, string

该代码是使用库函数复制和连接字符串。我使用的代码：

```
#include<stdio.h>
#include<conio.h>
#include<string.h>
#define MAX 100
char* newStrCpy(char string1[],char string2[])
{
        int i=0;
        while(string1[i]!='\0')
        {
            string2[i]=string1[i];
            i++;
        }
return (string2);
}
char* newStrCat(char destination[],char arr[])
{
int a=0;
int destlen=0;
while(destination[destlen]!='\0')
{
    destlen ++;
}
while(a<(MAX-destlen))
{
    destination[(destlen+a)]=arr[a];
    a++;
}
return destination;
}
void main()
 {
char string1[MAX],string2[MAX];
int i=0,j=0;
char bak[5]="\n is";
char som[50]=" the concatenated array.";
fflush(stdin);

printf("Enter a string:\n");
scanf("%[^\n]s",&string1);
newStrCpy(string1,string2);
printf("The copied string is:\n");
while(string2[i]!='\0')
{
    printf("%c",string2[i]);
    i++;
}
newStrCat(string2,bak);
newStrCat(string2,som);
printf("\nThe conctenated string is:\n");
while(string2[j]!='\0')
{
    printf("%c",string2[j]);
    j++;
}
fflush(stdout);
getch();
} 
```

我得到的输出：

```
Enter a string:
Welcome!! 
```

复制的字符串是：

```
Welcome!!
he concatenated string is:
Welcome!!
is the concatenated string 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:51:59.833

确保将空终止符（字符串的最后一个字符）复制到`newStrCpy/Cat`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:52:18.990

你需要初始化你的`string2`数组：

```
char string2[MAX] ={'\0'}; 
```

这可确保***所有成员都设置为`\0`***[[Ref #1]]，并且您不必`\0`在复制后手动将 a 附加到您的字符串数组。
目前，您的`string2`数组永远不会以空值终止，因此`while`循环会继续，直到遇到 a`\0`并输出不属于您的字符串的垃圾。

另外，在旁注中，

```
fflush(stdin); 
```

使您的程序具有**Undefined Behavior**的野兽，不要使用它。
`fflush()`保证在输出流上工作`stdout`。

* * *

[[参考 #1]]
**C99 标准 6.7.8.21**

> 如果大括号括起来的列表中的初始值设定项少于聚合的元素或成员，或者用于初始化已知大小数组的字符串文字中的字符少于数组中的元素，则聚合的其余部分应隐式初始化与具有静态存储持续时间的对象相同。

# sql - SQL-计算所有存储过程中特定单词的出现次数

> ID：10749105
> 
> 赞同：2
> 
> 时间：2012-05-25T05:48:14.407
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我需要计算所有存储过程中某个特定单词的出现次数。

即在特定数据库中的所有存储过程中，单词“place”出现了多少次？

我试图使用游标来做到这一点，但我没有得到任何地方！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T06:24:51.710

我会使用[`object_definition`函数](http://msdn.microsoft.com/en-us/library/ms176090.aspx)并以这种方式[`sys.procedures`查看：](http://msdn.microsoft.com/en-us/library/ms188737.aspx)

```
declare @word varchar(128)
set @word = 'place'

select name, (len(object_definition(object_id)) -  len(replace(object_definition(object_id), @word, ''))) / len (@word) as qty
from sys.procedures
where object_definition(object_id) like '%'+@word+'%' and type = 'P'
order by name 
```

**在注释后添加**，所有存储过程中出现的所有特定单词：

```
declare @word varchar(128)
set @word = 'place'

select sum((len(object_definition(object_id)) -  len(replace(object_definition(object_id), @word, ''))) / len (@word)) as qty
from sys.procedures
where object_definition(object_id) like '%'+@word+'%' 
```

这是工作（并在评论后更新）示例：[http ://sqlfiddle.com/#!3/a759c/7](http://sqlfiddle.com/#!3/a759c/7)

# c# - 使用 WP7 ListBox SelectedItem

> ID：10749111
> 
> 赞同：1
> 
> 时间：2012-05-25T05:48:49.383
> 
> 标签：c#, silverlight, windows-phone-7

在导航到 Listbox SelectionChanged 上的另一个页面时，我想用它传递文本块值，而不是发送列表框的项目索引。我怎样才能做到这一点？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:32:28.693

创建一个新的数据绑定应用程序。

查看生成的源代码。它显示了如何做到这一点的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T10:57:19.090

请尝试以下操作：
**XAML 源代码中的 ListBox：**

```
<ListBox x:Name="listBox" FontSize="26" SelectionChanged="listBox_SelectionChanged">
    <ListBoxItem Content="Item1"/>
    <ListBoxItem Content="Item2"/>
    <ListBoxItem Content="Item3"/>
    <ListBoxItem Content="Item4"/>
    <ListBoxItem Content="Item5"/>
    <ListBoxItem Content="Item6"/>
</ListBox> 
```

**在 .xaml.cs 代码中：**

```
 public void SurahsList_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            string r = ((ListBox)sender).SelectedValue.ToString();
            NavigationService.Navigate(new Uri("/page.xaml?selecteItem=" + r, UriKind.Relative));
        } 
```

**在 page.xaml.cs 代码中：**

```
protected override void OnNavigatedTo(NavigationEventArgs e)
        {
            try
            {
                string selectedItem= "";
                if (NavigationContext.QueryString.TryGetValue("selectedItem", out selectedItem))
                {
                    if(null != selectedItem) {
                    // your code
                    }
                }
            }
            catch (Exception ex)
            {
                if (System.Diagnostics.Debugger.IsAttached)
                {
                    MessageBox.Show(ex.Message);
                }
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T05:59:47.410

为了获得选定的 ListBoxItem，您只需执行以下操作：

```
private void btnGetSelected_Click(object sender, RoutedEventArgs e)
{
    ListBoxItem selectedItem =this.listBox.ItemContainerGenerator.ContainerFromItem(this.listBox.SelectedItem) as ListBoxItem;
    var textblock = selectedItem.Content
} 
```

[资源](http://windowsphonegeek.com/tips/WP7-ListBox-SelectedItem)

# php - 编程php时会话值在页面之间不持久的原因可能是什么？

> ID：10749112
> 
> 赞同：2
> 
> 时间：2012-05-25T05:49:06.700
> 
> 标签：php, session

我现在使用 php session 来存储值并在页面之间传递它。

我进行基本检查，例如确保`session_start()`在每个页面上调用并检查浏览器中设置的 sessionid cookie，但该值在页面之间不是持久的。

例如，我设置`$_SESSION["abc"]='abc'`在一页上，但是当我在另一页上打印时，它为空。

我注意到使用文件存储cookie值时，没有在指定路径创建相应的cookie文件。未创建会话文件的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T05:55:10.603

这对你有用吗？

```
<?php

session_start();

if (!isset($_SESSION['foo']))
    $_SESSION['foo'] = 'hello';

var_dump($_SESSION['foo']); 
```

如果您多次加载该页面，您是否看到过消息`hello`？

如果是，那么您的问题与您的代码有关，这意味着您可能会以某种方式破坏会话值，但如果上述方法不起作用，则可能是您`session.save_path`的代码不可写。

这给了你什么？

```
<?php

var_dump(is_writable(ini_get('session.save_path'))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T06:24:25.623

注意你是否在每一页的末尾销毁。请删除它，因为当你在每一页上销毁会话时，会话中没有持久性。此外，如果您使用某种注销代码，请在该部分代码上销毁该会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T05:59:26.977

您可以更改会话路径（如果允许）并在 .htaccess 中设置 0777 权限

```
php_value session.save_path  /home/your_domain.gr/public_html/tmp 
```

错误日志也有什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T05:52:44.403

您的服务器目录中有一个目录名称“tmp”，它用于保存会话临时文件，确保该文件夹具有读写权限。

# opengl - OPENGL 混合功能 - 以分层方式缓慢替换颜色

> ID：10749114
> 
> 赞同：4
> 
> 时间：2012-05-25T05:49:07.293
> 
> 标签：opengl

我想要做的是在鲜红色（1,0,0,1）之上添加带有alpha（0.1,0,0,0.2）的深红色。对于第一层它工作正常，结果是 (0.9 ,0 ,0, 1); 但是，当红色值达到 0.5 时，它不能低于该值。

第一层用以下等式演示，并且工作正常：

```
glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA);
ColorBuffer color = (1,0,0,1)      Bright Red
SourceColor color = (0.1,0,0,0.2)  Dark Red

GL_ONE = 1   ,  GL_ONE_MINUS_SRC_ALPHA = 1 - 0.2 = 0.8

Cf = (ColorSource * One) + (ColorBuffer * One Minus Src Alpha);
Cf = ((0.1,0,0)*1 )   +  ((1,0,0) * 0.8);
Cf =   0.1,0,0        +     0.8,0,0;
Cf =   0.9,0,0  // Here is the result 
```

现在在许多层之后再往下走，它将到达目标颜色更暗的点：0.5，现在颜色永远不会变暗，如下所示，它以 0.5,0,0 开头，但结果为 0.5,0， 0：

```
Cf = ((0.1,0,0)*1 )   +  ((0.5,0,0) * 0.8);
Cf =    0.1,0,0       +       0.4,0,0;
Cf =    0.5,0,0 
```

这是结果，这意味着颜色缓冲区没有改变，我覆盖的颜色不再有任何影响。

如何让我的深红色分层，直到它取代鲜红色？

演示问题的简单处理草图 - 你会注意到这里我正在尝试 GL_SRC_ALPHA 并且它仍然存在这个问题：

[http://studionu.net/files/OPENGL_test.zip](http://studionu.net/files/OPENGL_test.zip)

下图描述了左边的问题，右边是想要的效果。

![红色问题上的红色](../Images/f8b5088ae22c1256e71be0518228797d.png)

**编辑这里是代码**

所以这是我的代码：

我设置了一个纹理缓冲区对象并附加到一个 FBO：

```
 'gl.glGenTextures(1, drawTex, 0);    
  gl.glBindTexture(GL.GL_TEXTURE_2D, drawTex[0]);
  gl.glTexParameteri(GL.GL_TEXTURE_2D, GL.GL_TEXTURE_MIN_FILTER, GL.GL_LINEAR);
  gl.glTexParameteri(GL.GL_TEXTURE_2D, GL.GL_TEXTURE_MAG_FILTER, GL.GL_LINEAR);
  gl.glTexParameteri(GL.GL_TEXTURE_2D, GL.GL_TEXTURE_WRAP_S, GL.GL_CLAMP_TO_EDGE);
  gl.glTexParameteri(GL.GL_TEXTURE_2D, GL.GL_TEXTURE_WRAP_T, GL.GL_CLAMP_TO_EDGE);
  gl.glTexImage2D(GL.GL_TEXTURE_2D, 0, GL.GL_RGBA8, 1000, 500, 0, GL.GL_BGRA,    GL.GL_UNSIGNED_BYTE, null);  '

' // Creating FBO.
  gl.glGenFramebuffersEXT(1, drawFBO, 0);
  gl.glBindFramebufferEXT(GL.GL_FRAMEBUFFER_EXT, drawFBO[0]);
  gl.glFramebufferTexture2DEXT(GL.GL_FRAMEBUFFER_EXT, GL.GL_COLOR_ATTACHMENT0_EXT, GL.GL_TEXTURE_2D, drawTex[0], 0);
  int stat = gl.glCheckFramebufferStatusEXT(GL.GL_FRAMEBUFFER_EXT);
  if (stat != GL.GL_FRAMEBUFFER_COMPLETE_EXT) System.out.println("FBO error");
  gl.glBindFramebufferEXT(GL.GL_FRAMEBUFFER_EXT, 0);' 
```

然后我清除帧缓冲区：

```
' gl.glBindFramebufferEXT(GL.GL_FRAMEBUFFER_EXT, drawFBO[0]);

  // Drawing to the first color attachement of drawFBO (this is where drawTex is attached to).
  gl.glDrawBuffer(GL.GL_COLOR_ATTACHMENT0_EXT);    
  gl.glViewport(0, 0, 1000, 500);

    gl.glColor4f(0.0, 0.0, 0.0, 0.0);   

  gl.glClear(gl.GL_COLOR_BUFFER_BIT);

  // Unbinding drawFBO. Now drawing to screen again.
  gl.glBindFramebufferEXT(GL.GL_FRAMEBUFFER_EXT, 0);   ' 
```

在这里，我绑定帧缓冲区并绘制到其中，并在此处设置颜色膨胀：

```
'  gl.glBindFramebufferEXT(GL.GL_FRAMEBUFFER_EXT, drawFBO[0]);
  // Drawing to the first color attachement of drawFBO (this is where drawTex is attached to).
  gl.glDrawBuffer(GL.GL_COLOR_ATTACHMENT0_EXT);    

 // Setting orthographic projection.   
  gl.glMatrixMode(GL.GL_PROJECTION);
  gl.glPushMatrix();      
  gl.glLoadIdentity();
  gl.glOrtho(0.0, 1000, 0.0, 500, -100.0, +100.0);
  gl.glMatrixMode(GL.GL_MODELVIEW);
 gl.glPushMatrix();   
 gl.glLoadIdentity();

  gl.glViewport(0, 0, 1000, 500);

  gl.glDisable(GL.GL_TEXTURE_2D);

 gl.glEnableClientState(GL.GL_VERTEX_ARRAY);
 gl.glVertexPointer(2, GL.GL_FLOAT, 0, paintBuffer);
 // gl.glHint (gl.GL_POINT_SMOOTH_HINT, gl.GL_NICEST);    
 // gl.glEnable(gl.GL_POINT_SMOOTH);
 gl.glEnable(gl.GL_VERTEX_PROGRAM_POINT_SIZE);

 gl.glEnable(gl.GL_BLEND);      
 gl.glEnable(gl.GL_DEPTH_TEST);
 gl.glDepthFunc(gl.GL_NICEST);
 gl.glDisable(gl.GL_ALPHA_TEST);
 gl.glAlphaFunc(gl.GL_LESS, 0.01);

 gl.glPointSize(35.0);  

  float kBrushOpacity = 0.05/3.0; 

  println(kBrushOpacity);

  float  colorchange = 1.0;

 if (timer>200) {
   colorchange = 0.5; //////COLOR GETS DARKER
  }

 if (timer>400) {
   //colorchange = 0.2; //////COLOR GETS DARKER AGAIN
 }

  timer++;
 gl.glDisableClientState( gl.GL_COLOR_ARRAY );
  gl.glColor4f(colorchange, 0, 0.0, kBrushOpacity);  
  gl.glBlendFuncSeparate(gl.GL_SRC_ALPHA, gl.GL_ONE_MINUS_SRC_ALPHA,gl.GL_SRC_ALPHA, gl.GL_ONE_MINUS_DST_ALPHA);////////THIS IS THE OPENGL BLEND EQUATION FOR PREMULTIPLIED COLORS

  gl.glDrawArrays(GL.GL_POINTS, 0, count); //Count tells us how many point exist to be drawn.
 gl.glDisable(gl.GL_BLEND);     //Dont use blend when drawing the texture to screen. Just draw it.

 gl.glDisableClientState(GL.GL_VERTEX_ARRAY);
  gl.glMatrixMode(GL.GL_PROJECTION);
  gl.glPopMatrix(); 
 gl.glMatrixMode(GL.GL_MODELVIEW);
 gl.glPopMatrix();    
 // Unbinding drawFBO. Now drawing to screen again.
  gl.glBindFramebufferEXT(GL.GL_FRAMEBUFFER_EXT, 0);   ' 
```

在这里，我在屏幕上绘制纹理：

```
' gl.glDrawArrays(GL.GL_POINTS, 0, count); //Count tells us how many point exist to be drawn.
gl.glDisable(gl.GL_BLEND);      //Dont use blend when drawing the texture to screen. Just draw it.

gl.glDisableClientState(GL.GL_VERTEX_ARRAY);
gl.glMatrixMode(GL.GL_PROJECTION);
gl.glPopMatrix(); 
gl.glMatrixMode(GL.GL_MODELVIEW);
gl.glPopMatrix();     
// Unbinding drawFBO. Now drawing to screen again.
gl.glBindFramebufferEXT(GL.GL_FRAMEBUFFER_EXT, 0);   

// Setting orthographic projection. 
gl.glMatrixMode(GL.GL_PROJECTION);
gl.glPushMatrix();    
gl.glLoadIdentity();
gl.glOrtho(0.0, width, 0.0, height, -100.0, +100.0);
gl.glMatrixMode(GL.GL_MODELVIEW);
gl.glPushMatrix();    
gl.glLoadIdentity();

 gl.glViewport(0, 0, width, height);

 // Drawing texture to screen.
 gl.glEnable(GL.GL_TEXTURE_2D);
 gl.glActiveTexture(GL.GL_TEXTURE0);
  gl.glBindTexture(GL.GL_TEXTURE_2D, drawTex[0]);
 gl.glTexEnvf(GL.GL_TEXTURE_ENV, GL.GL_TEXTURE_ENV_MODE, GL.GL_REPLACE);
 gl.glBegin(GL.GL_QUADS);
gl.glTexCoord2f(0.0, 1.0);
gl.glVertex2f(0.0, 0.0);

 gl.glTexCoord2f(1.0, 1.0);
 gl.glVertex2f(width, 0.0);

 gl.glTexCoord2f(1.0, 0.0);
 gl.glVertex2f(width, height);

 gl.glTexCoord2f(0.0, 0.0);
 gl.glVertex2f(0.0, height);
  gl.glEnd();
  gl.glBindTexture(GL.GL_TEXTURE_2D, 0);

  gl.glMatrixMode(GL.GL_PROJECTION);
  gl.glPopMatrix(); 
 gl.glMatrixMode(GL.GL_MODELVIEW);
gl.glPopMatrix();   ' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T05:59:43.773

请问您为什么选择 GL_ONE 作为源因子？您的混合公式的总乘数值大于 1 的事实意味着只需将相同的颜色与自身混合并使其变亮，当您在尝试使其变暗时达到平衡时，您会看到这一点。

如果您使用更常见的源因子 GL_SRC_ALPHA，我认为它的行为应该符合您的预期。你有没有选择使用它的原因？

如果您使用 GL_SRC_ALPHA 和 GL_ONE_MINUS_SRC_ALPHA 作为源/目标混合因子，则不会因执行混合而偏向于使图像变亮，因为乘法因子的总和为 1。

编辑：我不同意使用 GL_SRC_ALPHA 仍然会有同样的问题。我在 excel 中对公式做了一个快速模型，如下所示。混合的值最终收敛到源颜色 (0.1f)。如果您想更快地收敛，请使用更大的 src alpha 值。

参数：

```
Source Red = 0.1
Source Alpha = 0.2
Dest Red = 1.0 (iteration==0), Result[iteration-1] (iteration != 0)
1-Src Alpha = 0.8
Result = Src Red * Src Alpha + Dest Red * One_Minus_Src_Alpha 
```

结果：

列：

```
0: Iteration
1: Source Red    
2: Source Alpha
3: Dest Red
4: 1-Src Alpha
5: Result

0   1   2   3       4   5
------------------------------------------------
0   0.1 0.2 1.00    0.8 0.82   (0.1 * 0.2 + 1.0  * 0.8 = 0.82)
1   0.1 0.2 0.82    0.8 0.68   (0.1 * 0.2 + 0.82 * 0.8 = 0.68) 
2   0.1 0.2 0.68    0.8 0.56   (etc...)
3   0.1 0.2 0.56    0.8 0.47
4   0.1 0.2 0.47    0.8 0.39
5   0.1 0.2 0.39    0.8 0.34
6   0.1 0.2 0.34    0.8 0.29
7   0.1 0.2 0.29    0.8 0.25
8   0.1 0.2 0.25    0.8 0.22
9   0.1 0.2 0.22    0.8 0.20
10  0.1 0.2 0.20    0.8 0.18
11  0.1 0.2 0.18    0.8 0.16
12  0.1 0.2 0.16    0.8 0.15
13  0.1 0.2 0.15    0.8 0.14
14  0.1 0.2 0.14    0.8 0.13
15  0.1 0.2 0.13    0.8 0.13
16  0.1 0.2 0.13    0.8 0.12
17  0.1 0.2 0.12    0.8 0.12
18  0.1 0.2 0.12    0.8 0.11
19  0.1 0.2 0.11    0.8 0.11
20  0.1 0.2 0.11    0.8 0.11
21  0.1 0.2 0.11    0.8 0.11
22  0.1 0.2 0.11    0.8 0.11
23  0.1 0.2 0.11    0.8 0.10
24  0.1 0.2 0.10    0.8 0.10
25  0.1 0.2 0.10    0.8 0.10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T02:56:51.900

答案是使用与 GIMP 或 Photoshop 或 SKetchbook 等绘图程序相同的方法。他们从不混合任何新绘制到画布上的东西，它只是在每次调用结束时绘制为纹理四边形。这么快你永远看不到它......无论如何，这对我有用，希望它可以帮助其他人。

# android - Android：出现片段不工作运行时异常

> ID：10749115
> 
> 赞同：0
> 
> 时间：2012-05-25T05:49:21.597
> 
> 标签：android, android-fragments, layout-inflater

我创建了一个示例片段应用程序。我有两个片段，如列表片段和细节片段。片段类的代码：

```
public class ListFragment1 extends ListFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
                "Blackberry", "WebOS", "Ubuntu", "Windows7" };
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_1, values);
        setListAdapter(adapter);
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        String item = (String) getListAdapter().getItem(position);
        DetailFragment fragment = (DetailFragment) getFragmentManager()
                .findFragmentById(R.id.detailFragment);
        if (fragment != null && fragment.isInLayout()) {
            fragment.setText(item);
        } else {
            Intent intent = new Intent(getActivity().getApplicationContext(),
                    DetailActivity.class);
            intent.putExtra("value", item);
            startActivity(intent);

        }

    }
} 
```

细节片段类：

```
public class DetailFragment extends Fragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.e("Test", "hello");
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.details, container, false);
        return view;
    }

    public void setText(String item) {
        TextView view = (TextView) getView().findViewById(R.id.detailsText);
        view.setText(item);
    }
} 
```

和Activity类DetailActivity类

```
public class DetailActivity extends FragmentActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Need to check if Activity has been switched to landscape mode
        // If yes, finished and go back to the start Activity
        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
            finish();
            return;
        }

        setContentView(R.layout.details_activity_layout);
        Bundle extras = getIntent().getExtras();
        if (extras != null) {
            String s = extras.getString("value");
            TextView view = (TextView) findViewById(R.id.detailsText);
            view.setText(s);
        }
    }
} 
```

主要活动类：

```
public class MyFragmentActivity extends FragmentActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

主要的.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <fragment
        android:id="@+id/listFragment"
        android:layout_width="150dip"
        android:layout_height="wrap_content"
        class="My.fragment.ListFragment1" ></fragment>

    <fragment
        android:id="@+id/detailFragment"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        class="My.fragment.DetailFragment" >
        <!-- Preview: layout=@layout/details -->
    </fragment> 
```

我的 Logcat 跟踪是..

```
 05-28 10:42:28.866: W/dalvikvm(484): Unable to resolve superclass of LMy/Fragment/MyFragmentActivity; (21)
05-28 10:42:28.866: W/dalvikvm(484): Link of class 'LMy/Fragment/MyFragmentActivity;' failed
05-28 10:42:28.906: D/AndroidRuntime(484): Shutting down VM
05-28 10:42:28.906: W/dalvikvm(484): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
05-28 10:42:28.906: E/AndroidRuntime(484): Uncaught handler: thread main exiting due to uncaught exception
05-28 10:42:28.945: E/AndroidRuntime(484): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{My.Fragment/My.Fragment.MyFragmentActivity}: java.lang.ClassNotFoundException: My.Fragment.MyFragmentActivity in loader dalvik.system.PathClassLoader@44e8c748
05-28 10:42:28.945: E/AndroidRuntime(484):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2417)
05-28 10:42:28.945: E/AndroidRuntime(484):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
05-28 10:42:28.945: E/AndroidRuntime(484):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
05-28 10:42:28.945: E/AndroidRuntime(484):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
05-28 10:42:28.945: E/AndroidRuntime(484):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-28 10:42:28.945: E/AndroidRuntime(484):  at android.os.Looper.loop(Looper.java:123)
05-28 10:42:28.945: E/AndroidRuntime(484):  at android.app.ActivityThread.main(ActivityThread.java:4363)
05-28 10:42:28.945: E/AndroidRuntime(484):  at java.lang.reflect.Method.invokeNative(Native Method)
05-28 10:42:28.945: E/AndroidRuntime(484):  at java.lang.reflect.Method.invoke(Method.java:521)
05-28 10:42:28.945: E/AndroidRuntime(484):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-28 10:42:28.945: E/AndroidRuntime(484):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-28 10:42:28.945: E/AndroidRuntime(484):  at dalvik.system.NativeStart.main(Native Method)
05-28 10:42:28.945: E/AndroidRuntime(484): Caused by: java.lang.ClassNotFoundException: My.Fragment.MyFragmentActivity in loader dalvik.system.PathClassLoader@44e8c748
05-28 10:42:28.945: E/AndroidRuntime(484):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
05-28 10:42:28.945: E/AndroidRuntime(484):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
05-28 10:42:28.945: E/AndroidRuntime(484):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
05-28 10:42:28.945: E/AndroidRuntime(484):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
05-28 10:42:28.945: E/AndroidRuntime(484):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2409)
05-28 10:42:28.945: E/AndroidRuntime(484):  ... 11 more 
```

我的 Manifest.xml 是

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="My.Fragment"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name="MyFragmentActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="DetailActivity"></activity>

    </application>

</manifest> 
```

这是我从互联网来源获得的第一个片段程序，在运行此应用程序时，我得到了运行时异常，一些类未找到异常。请给我正确的方法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:07:55.253

您的包在 Android Manifest 中称为 My.Fragment，但在布局中您已将其指定为 My.fragment

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:10:56.967

当您的代码中将`My.fragment`其定义为`My.Fragment`.

这就是为什么你得到一个`ClassNotFoundException`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T13:18:56.780

您的`main.xml`代码包含一个带有 id 的片段`detailfragment`。它应该是线性布局而不是片段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T08:53:49.817

在 main.xml 文件中，您应该正确定义 class="My.fragment.DetailFragment"。

我在网上看到了这个例子，我也有同样的例外。

我用包名定义了“DetailFragment”位置，它可以工作！

但是在这个原始示例中，它是由项目名称定义的，因此片段无法找到该类。

# php - MYSQL 和 PHP 获取记录的性能

> ID：10749119
> 
> 赞同：2
> 
> 时间：2012-05-25T05:50:20.223
> 
> 标签：php, mysql

## 方案 1

我有一张桌子可以说“成员”。在该表“成员”中，我有 7 个字段（memid、login_name、密码、年龄、城市、电话、国家/地区）。在我的表中，我有 10K 条记录。我需要获取一条记录。所以我正在使用这样的查询

```
mysql_query("select * from member where memid=999"); 
```

## 方案 2

我有同一张表，称为“成员”，但我像这个成员和 member_txt 一样拆分表。所以在我的 member_txt 表中，我有 memid，age，phone，city，country ），在我的成员表中，我有 memid，login_name，密码 。

哪个是快速获取数据的最佳方案？是去单个表还是参考将表分成两个？

注意：我需要获取 PHP 和 MYSQL 中的特定数据。请让我知道哪种方法最好遵循。我们有 10K 条记录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:00:57.930

为了您自己的健康，请使用单表方法。

只要您使用主键`memid`，事情就会变得快如闪电。这是因为`PRIMARY KEY`自动分配了一个索引，它基本上告诉了数据的确切位置，并消除了遍历数据的需要，否则它会这样做。

来自[http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)

> 索引用于快速查找具有特定列值的行。如果没有索引，MySQL 必须从第一行开始，然后读取整个表以查找相关行。桌子越大，成本越高。如果表有相关列的索引，MySQL 可以快速确定要在数据文件中间查找的位置，而无需查看所有数据。如果一个表有 1,000 行，这至少比顺序读取快 100 倍。如果您需要访问大部分行，顺序读取会更快，因为这样可以最大限度地减少磁盘寻道。

您的第二种方法只会使您的系统更复杂，并且没有任何好处。

使用场景 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:52:42.350

请设置 memid 主键/唯一键，然后拥有一张桌子比拥有两张桌子要快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T05:54:42.177

一般来说，只要您通过主键访问它，您应该不会看到 10k 行对性能有太大影响。

另请注意，从一张表中提取数据也比从两张表中提取数据要快。

如果要进一步优化，请使用 select 语句中的列名而不是 * 运算符。

# ruby-on-rails - 如何使用 Rails 上的参数动态更改模型的字段？

> ID：10749120
> 
> 赞同：3
> 
> 时间：2012-05-25T05:50:26.550
> 
> 标签：ruby-on-rails, ruby, activerecord, model

我对 Ruby on Rails 上的模型有疑问：

我在 Rails 上有这个方法，它接收列的名称和该列的新值：

```
def change_attribute
    field = params[:field]
    new_value = params[:new_value]
    person = Person.find(params[:id])
    person.update_attribute(field, new_value)
    render :text=>"", :layout=>false
end 
```

但这会给我一个错误：该字段不存在，我认为它应该是：name，：lastname 等。

如何将我的字段变量动态地转换为其中一个以使此功能起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:21:14.003

您应该检查您输入的字段名称是否`params[:field]`与原始字段名称完全相同（没有额外的空格等）。您可以通过`puts params[:field].inspect`并在终端（启动 rails 服务器的位置）中检查它。

根据[update_attribute](http://apidock.com/rails/v3.2.1/ActiveRecord/Persistence/update_attribute)的文档，我们将能够传递字符串或符号作为字段名称。因此，在将字段参数传递给`update_attribute`. 如您所见，此处为：

```
def update_attribute(name, value)
  name = name.to_s
  raise ActiveRecordError, "#{name} is marked as readonly" if self.class.readonly_attributes.include?(name)
  send("#{name}=", value)
  save(:validate => false)
end 
```

它首先被转换为字符串，然后调用 setter。正如@jdoe 提到的，它没有验证模型（请参见`save(:validate => false)`代码中的行），因此在使用此方法时应该注意这一点。

# sql-server-2008 - 如何在一个 SQL 查询中重新组合具有不同值的记录

> ID：10749121
> 
> 赞同：1
> 
> 时间：2012-05-25T05:50:26.930
> 
> 标签：sql-server-2008, group-by

假设我有下表：

```
Name - Country - Age
--------------------
Toto - Switzerland - 10
Titi - France - 12
Tata - Italy - 21
Tutu - England - 13
Tete - Italy - 14 
```

我想创建一个`sql query`尽可能简单的方法来重新组合生活在定义的分组国家的人们，例如：

A组=瑞士+意大利B组=法国+英格兰

我不知道如何创建一个可以在同一组中有多个不同的`group`withn my ...`records``column``values`

有人可以帮我吗？

更多信息：`SQL Server 2008 database`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T06:00:15.917

你的意思是这样吗？

```
SELECT COUNT(Name), GroupA, GroupB FROM
   (`SELECT Name, Country, Age,
   Country='Switzerland' OR Country='Italy' As GroupA,
   Country='France' OR Country='England' As GroupB)
Group By GroupA, GroupB 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T05:59:09.780

```
 Select * from (select *,case when Country ='Switzerland' then 'A'
                         when Country ='Italy' then 'A'  
                         when Country ='France' then 'B'  
                         when Country ='England' then 'B'  
                    else 'C' end) classification from table1)
         order by classification 
```

这将根据您的标准对 ppl 进行分组。如果这个分组是静态的，你可以有单独的表并使用内部连接。这将使查询更具可读性

# ruby-on-rails - 如何使用正则表达式删除 memcached 中的键（使用 Dalli+RoR）。

> ID：10749122
> 
> 赞同：5
> 
> 时间：2012-05-25T05:51:00.473
> 
> 标签：ruby-on-rails, ruby, memcached, ruby-on-rails-3.2, dalli

如何使用正则表达式删除 memcached 中的键（使用 Dalli+Rails）

```
 def expire_all
   expire_fragment(Regexp.new("/customers/customers"))
   expire_fragment(Regexp.new("/customers/customers\/"))
   expire_fragment(Regexp.new("/agreements/agreements"))
   expire_fragment(Regexp.new("/agreements/agreements\/"))
  end 
```

不适用于 memcached。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T06:49:18.243

Memcached 无法迭代其键，因此正则表达式过期不起作用。请参阅[文档](http://api.rubyonrails.org/classes/ActionController/Caching/Fragments.html#method-i-expire_fragment)。

看看[这个](http://quickleft.com/blog/faking-regex-based-cache-keys-in-rails)潜在的解决方法，虽然它是劳动密集型的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T09:21:28.000

安装 gem dalli-store-extensions [https://github.com/defconomicron/dalli-store-extensions](https://github.com/defconomicron/dalli-store-extensions)

在清扫车

```
expire_fragment /#{Regexp.escape(restaurant.id)}\/stocks*/ 
```

# c# - 如何充值列表中的元素数量以使其等于十？

> ID：10749129
> 
> 赞同：0
> 
> 时间：2012-05-25T05:51:57.977
> 
> 标签：c#

我有一个 City 类，里面有一个 Detail 类：

```
public class City {

        public string PartitionKey { get; set; }
        public string RowKey { get; set; }
        public string Notes { get; set; }

        public class Detail
        {
            public Detail()
            {
                ImageFile = String.Empty;
                Explanation = new HtmlText();
            }
            public string ImageFile { get; set; }
            public HtmlText Explanation { get; set; }
        }

} 
```

在我的代码中，我有一些行来检查有多少细节，如果少于十个，那么我添加新的 City.Details。我正在使用下面的代码来执行此操作，但它位于几种不同的方法中，看起来并不干净。有什么方法可以简化这一点，并将检查、计数和添加的逻辑添加到我的基本 City 类中？

```
foreach (int index in Enumerable.Range(0, 10 - vm.Details.Count()))
            {
                vm.Details.Add(new City.Detail());
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:01:22.967

您可以将 MinReached 和 FillDetails 方法添加到您的 City 类。第一个检查您是否已经达到最小值，第二个添加新的详细信息最多十个。

```
public bool MinReached()
{
    return this.Details.Count >= 10;
}

public void FillDetails()
{
    for (int i = Details.Count; i <= 10; i++)
        this.Add(new City.Detail());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T06:04:18.797

如果您总是需要提供 10 个详细信息，可以在这些行上做一些事情

```
Enumerable.Range(0, count).Select(i => new City.Detail()).ToList(); 
```

这仅适用于 10 个详细信息，或者如果您想添加余数，然后计算差异，然后将`.Concat()`其附加到现有列表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T05:58:45.850

为什么不能使用 for 循环

```
for (int i = 0; i < 10 - vm.Details.Count(); i++) vm.Details.Add(new City.Detail()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T06:02:00.467

我不确定您的 cm 变量是什么类型，但如果您想向 City 类添加一些东西，您可以向 City 类添加一个静态方法，命名为 SetDetailSize 之类的东西，它接受 Detail 对象的集合和您想要强制的大小集合，然后只需调用 City.SetDetailSize 方法传入您的集合。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T06:10:45.847

正如其他人所说，使用类似下面的东西

```
 while(vm.Details.Count() < 10)
      vm.Details.Add(new City.Detail()); 
```

甚至是构造的常规

```
 for(int x = vm.Details.Count(); x < 10; x++)
      vm.Details.Add(new City.Detail()); 
```

否则，当其他人阅读您的代码（或者您在 3 个月后查看它）时，反应会是“嗯？” 而不是自动识别正在发生的事情。

以下是解决问题的三种方法：

1）只需在创建 City 对象时添加十个详细信息，使用它们，然后在必要时创建更多

2) 如果真的没有 10 个细节，为什么还需要 10 个细节？尽可能让您的对象真正代表它们所代表的内容。因此，也许您正在尝试解决更深层次问题的症状。但如果不是这样的话，那么……

3）正如其他人所提到的，只需将此逻辑移动到您的基类中。

编辑：我还应该在 #3 上明确表示您需要一种方法来使此过程自动化，因此您不必显式调用使用额外详细信息填充它的过程。我从您的代码中没有足够的信息来知道如何准确地告诉您这样做，但是如果您想提供更多信息来说明为什么拥有 10 个详细信息很重要，那么我相信我可以提供进一步的帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T06:05:48.217

“..使用 LINQ 执行此操作，这将完全消除对 for 循环的需要”。当然你可以用 linq 来做，但这并不意味着循环不会发生。使用 ForEach linq 运算符。但是这段代码与你写的类似，除了它是 linq 风格

LINQ 代码

```
Enumerable.Range(0, 10-vm.Details.Count()).ToList().ForEach(counter=>vm.Details.Add(new City.Detail()); 
```

编辑

认为这会解决你的问题。一旦你的类实例化，默认填充 10 个城市。使用计数器检查其中有多少虚拟元素。用户添加细节后，将虚拟元素替换为用户的输入。把它放在你的基类中，然后你就可以忘记在其他地方添加额外的细节

```
public class City 
{

   int counter = 0;
   public City()
   {
       //fill 10 elements by default
       Enumerable.Range(0, 10).ToList().ForEach(counter =>vm.Details.Add(new City.Detail());
   }
.
.
}

//Now define your add method as following
public void AddDetails(Details d)
{
   //remove the dummy element  
   vm.Details.RemoveAt(counter);
  //add original element and increase the counter, so next element would be added at next index
   vm.Details.insert(counter++, d);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-25T14:06:55.840

另一种选择是为 List 集合创建扩展方法。这将允许您从应用程序中的任何位置调用 Detail 对象列表上的方法。请执行下列操作：

```
public static class ExtensionMethods
{
     public static void SetDetailSize(this List<City.Detail> details, int size)
     {
          for (int i = 0; i < size - details.Count; i++) 
             details.Add(new City.Detail());    
     }
} 
```

这解决了代码重复问题，因为在任何拥有 City.Detail 对象列表的地方，您都可以进行以下调用。

```
vm.Details.SetDetailSize(10); 
```

确保您有一个引用 ExtensionMethods 类的命名空间的 using 语句。

# c# - 单击注销时会话到期

> ID：10749151
> 
> 赞同：0
> 
> 时间：2012-05-25T05:53:55.320
> 
> 标签：c#, session

我正在使用登录页面（使用 c#，visual studio 2008）。用户必须在其中输入名称和密码。

单击登录后，它将重定向到主页。现在，如果我单击注销，它将重定向到登录页面。到现在还好。

我的问题是，此时（注销后）如果我按下`Back button`它再次将我带到主页。但是，在这里我想收到一条消息说

```
You are already logged out. Please Login again 
```

它不应该让我访问主页。

怎么做...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:58:54.057

在所有应用程序页面的标题中检查会话状态。我通常使用该`$_SESSION['password']`变量，因为如果会话有效，则始终有密码。下面是代码的样子：

```
<%
    if(!Session['password']) {
        Response.Write("<script>location.replace('login.aspx?error=loggedOut')</script>")
    }
%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:00:30.687

你能在登录页面处理onbeforeunload JS事件并阻止主页显示吗？

[http://www.4guysfromrolla.com/demos/OnBeforeUnloadDemo1.htm](http://www.4guysfromrolla.com/demos/OnBeforeUnloadDemo1.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T06:04:38.833

使用此代码：

```
protected void logout_OnClick(object sender, EventArgs e)
{
Session.Abandon();
Response.Redirect("login.aspx");
}

protected void Page_Init(object sender, EventArgs e)
{
Response.Cache.SetExpires(DateTime.UtcNow.AddMinutes(-1));
Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.Cache.SetNoStore();
} 
```

# android - repo snc 错误致命：无法读取捆绑包

> ID：10749165
> 
> 赞同：2
> 
> 时间：2012-05-25T05:55:49.160
> 
> 标签：android, clone, bundle, sync, repository

在执行 git clone 和 repo init 之后，我正在尝试同步 android repo 的列表。

我运行了 repo sync 命令并启用了跟踪。

跟踪显示以下错误：

```
fatal: Could not read bundle 
```

回购同步不起作用或返回，尽管它过夜。

有人可以阐明他们之前遇到的任何类似错误以及他们为解决该错误所做的工作吗？

# lisp - 如何调用 lambda 在 LISP 中传递参数

> ID：10749167
> 
> 赞同：2
> 
> 时间：2012-05-25T05:56:15.727
> 
> 标签：lisp, elisp

> **可能重复：**
> [如何在 Elisp 中传递 lambda 表达式](https://stackoverflow.com/questions/5357656/how-to-pass-a-lambda-expression-in-elisp)

我有以下代码：

```
(defun my-map (p l)
  (mapcar (lambda (el) (p el)) l))

(defun test ()
  (my-map (lambda (x) (+ x 1)) (list 1 2 3))) 
```

（这是示例 - 不是我尝试编写的实际代码）。它抱怨它找不到函数 p：

```
Debugger entered--Lisp error: (void-function p)
  (p el)
  (lambda (el) (p el))(1)
  mapcar((lambda (el) (p el)) (1 2 3))
  my-map((lambda (x) (x + 1)) (1 2 3))
  test()
  eval((test) nil)
  eval-expression((test) nil)
  call-interactively(eval-expression nil nil)
  recursive-edit()
  debug(error (void-variable test))
  eval(test nil)
  eval-expression(test nil)
  call-interactively(eval-expression nil nil 
```

我猜它将 a`p`视为符号而不是外部范围内的变量。如何让它发挥作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T06:16:07.263

你想用`funcall`.

> funcall 是“C 源代码”中的内置函数。
> 
> (funcall FUNCTION &rest ARGUMENTS)
> 
> 将第一个参数作为函数调用，将剩余的参数传递给它。返回函数返回的值。因此，(funcall 'cons 'x 'y) 返回 (x . y)。

# ruby - 将 ruby 代码包装到类中时出错

> ID：10749168
> 
> 赞同：0
> 
> 时间：2012-05-25T05:56:19.300
> 
> 标签：ruby, class

我是一个 RoR 新手。我在 ruby​​ 中创建了一个小应用程序，它具有执行代码的小功能。

例如

```
 def abc(xyz)
    some code
 end

 def ghi(xyz)
    some code
 end

 def jkl(output)
    some code
 end

 xyz = abc[ARGV(0)]
 output = ghi(xyz)
 puts jkl(output) 
```

现在，当我使用 ruby​​ .rb 在命令提示符下运行此代码时，它可以很好地执行并返回所需的结果。但是当我尝试创建一个类并将整个代码添加到它时，例如

```
 class Foo
     def abc(xyz)
    some code
 end

 def ghi(xyz)
    some code
 end

 def jkl(output)
    some code
 end

 xyz = abc[ARGV(0)]
 output = ghi(xyz)
 puts jkl(output)
 end 
```

它会生成类似 **“Foo:Class (NoMethodError) 的未定义方法'abc'”的错误**

我想问的是，我应该如何将此代码添加到一个类中，以便它变得更加可插入并获得所需的结果。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:05:04.083

正如本文所写，这些都是实例方法。您需要像这两个示例一样使它们成为类方法，或者您可以将它们保持原样并创建该类的实例。无论哪种方式，您都应该将最后三个语句移到类定义之外。

```
class Foo
  class << self
    def abc(xyz)
      some code
    end

    def ghi(xyz)
      some code
    end

    def jkl(output)
      some code
    end
  end
end
xyz = Foo.abc('something')
output = Foo.ghi(xyz)
puts Foo.jkl(output) 
```

或者....

```
class Foo
  def self.abc(xyz)
    some code
  end

  def self.ghi(xyz)
    some code
  end

  def self.jkl(output)
    some code
  end
end
xyz = Foo.abc('something')
output = Foo.ghi(xyz)
puts Foo.jkl(output) 
```

编辑：要在评论中回答您的问题，这就是您将如何实例化类并使用实例方法调用。

```
class Foo
  def abc(xyz)
    some code
  end

  def ghi(xyz)
    some code
  end

  def jkl(output)
    some code
  end
end
bar = Foo.new
xyz = bar.abc('something')
output = bar.ghi(xyz)
puts bar.jkl(output) 
```

如果您还没有任何 Ruby 学习材料，您可能想查看[Chris Pine 的教程](http://pine.fm/LearnToProgram/)，其中包括关于[类](http://pine.fm/LearnToProgram/?Chapter=09)及其工作方式的部分。至于书籍，一般来说[这](https://rads.stackoverflow.com/amzn/click/com/0321584104)是一本很棒的 Ruby书籍，[这里](https://stackoverflow.com/q/149060/366051)是关于 Rails 书籍的问题。我建议在深入了解 Rails 之前先掌握 Ruby。

# android - 在设备选择器中看不到 Android 模拟器

> ID：10749169
> 
> 赞同：6
> 
> 时间：2012-05-25T05:56:19.750
> 
> 标签：android, android-emulator

我这里有一个奇怪的问题。当我启动模拟器时，它会在一段时间后启动，但它没有显示在 Android 设备选择器中（有时会显示）。有没有人遇到过这种情况？

[这](http://tinypic.com/r/2ih76ed/6)是情况的屏幕截图。如您所见，一个模拟器在端口 5554 (GingerBreadGoogleAPI) 上运行，但设备选择器显示没有模拟器或设备连接。cmd`./adb devices`没有列出任何设备。我在具有 2GB RAM 的 Kubuntu OS 上运行 Linux 3 内核。

一种解决方案（我这样做）是简单地启动另一个模拟器。但我不想解决这个问题，而是想知道为什么会这样。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-25T06:08:35.283

它有时会发生；我也面临这个问题。

我一直在尝试 kill-server & start-server

您可以在 SDK_Folder/platform-tools 下找到 ADB

先做

```
./adb kill-server 
```

然后

```
./adb start-server 
```

并检查

```
./adb devices 
```

# php - 使用 PHP 清理 URL

> ID：10749170
> 
> 赞同：0
> 
> 时间：2012-05-25T05:56:25.367
> 
> 标签：php, http, url, url-mapping

所以我正在尝试在 PHP 中构建一个干净的 url 系统，以将这样的 URL 更改`http://example.com/index.php?projects=05`为：`http://example.com/projects/05`

到目前为止，我已经弄清楚了如何使用`parse_url`映射看起来像`http://example.com/index.php/projects/05`但我不知道如何从 URL 中删除“index.php”的 URL。有没有办法使用 .htaccess`index.php`从 url 字符串中删除？

我知道这是一个简单的问题，但经过广泛的谷歌搜索，我找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:02:45.243

您需要在 Apache 中使用 mod_rewrite 执行此操作。您需要将所有 URL 重定向到您的 index.php，然后，也许使用 parse_url，弄清楚如何处理它们。

例如：

```
# Turn on the rewrite engine
RewriteEngine On

# Only redirect if the request is not for index.php
RewriteCond %{REQUEST_URI} !^/index\.php

# and the request is not for an actual file
RewriteCond %{REQUEST_FILENAME} !-f

# or an actual folder
RewriteCond %{REQUEST_FILENAME} !-d

# finally, rewrite (not redirect) to index.php
RewriteRule .* index.php [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:01:05.887

我正在使用以下 .htaccess 文件来删除 url 的 index.php 部分。

```
# Turn on URL rewriting
RewriteEngine On

# Installation directory
RewriteBase /

# Protect hidden files from being viewed
<Files .*>
    Order Deny,Allow
    Deny From All
</Files>

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !favicon.ico$

RewriteRule .* index.php/$0 [PT] 
```

否则我可以推荐 Kohana 框架作为参考（他们也有一个相当不错的 url 解析器和控制器系统）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:01:07.580

在你的 .htaccess 中有这样的东西：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php [QSA,L] 
```

（确保启用了重写模块）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T08:55:00.637

将实际文件/文件夹与 URL 分离的概念称为*路由*。许多 PHP 框架都包含这种功能，主要使用[mod_rewrite](https://httpd.apache.org/docs/current/rewrite/)。有一篇关于[PHP URL Routing](http://josephscott.org/archives/2008/11/php-url-routing-pur/)的不错的博客文章，它实现了一个简单的独立路由器类。

它创建这样的映射：

```
mysite.com/projects/show/1 --> Projects::show(1) 
```

所以请求的 URL 会导致调用`show()`类的函数，`Projects`参数为`1`.

您可以使用它来构建漂亮的 URL 到 PHP 代码的灵活映射。

# database - 主写和从读的数据库复制滞后（延迟）

> ID：10749172
> 
> 赞同：1
> 
> 时间：2012-05-25T05:56:44.220
> 
> 标签：database, database-design, replication, scalability

我们有一个读写主机和复制的从读取服务器。在某些 Web 用例中，数据会被发布并立即读取以发送回服务器。立即读取是在读取从属设备上完成的，由于延迟，数据还没有在那里更新。

我知道这可能是复制设置的常见问题，我们是新手，非常感谢任何关于我们必须克服这种情况的选项的输入。

我现在能想到几个选择：

*   始终从主设备立即读取。
*   通过使用强大的服务器来减少延迟。
*   取消复制并分片数据库。

谢谢，克里斯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T19:20:54.113

这种架构的一个常见解决方案是使用内存数据网格 (IMDG)。IMDG（在某些情况下称为分布式缓存）可以帮助您在不同服务器之间进行同步，而无需支付数据库访问延迟或处理开发自己的复制机制。

XAP Elastic Caching（参见[http://www.gigaspaces.com/datagrid](http://www.gigaspaces.com/datagrid)）是该领域的领先产品之一，甚至还有一个免费的社区版，可用于商业项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T02:52:31.713

这取决于您使用的数据库，以及您希望解决此问题的级别。

在数据库级别，您可以尝试研究几个关键字：

*   复制滞后
*   半同步复制和同步复制

在 MySQL 中，您可以找到：

*   MySQL 5.6（还不是 GA）
*   加莱拉集群

如果您想在应用程序级别解决此问题，那么“写入后始终读取主机”将是一个很好的解决方案。

# java - 计算字符串中字符出现的次数

> ID：10749176
> 
> 赞同：0
> 
> 时间：2012-05-25T05:57:10.767
> 
> 标签：java, string, exception, string-parsing

我正在尝试编写一个Java程序，该程序将字符串作为输入并计算字符串中字符的出现次数，然后打印一个新字符串，该字符串后跟出现次数。

## 例如

输入字符串：

```
aaaabb 
```

输出字符串：

```
a4b2 
```

输入字符串：

```
aaaaabbbc 
```

输出字符串：

```
a5b3c1 
```

我正在发布我的 java 代码。
它在投掷`StringOutOfBoundException`

```
/*Write a routine that takes as input a string such as "aabbccdef" and o/p "a2b2c2def" or "a4bd2g4" for "aaaabddgggg".*/

import java.util.Scanner;

public class CountingOccurences {

public static void main(String[] args) {

    Scanner inp= new Scanner(System.in);
    String str;
    char ch;
    int count=0;

    System.out.println("Enter the string:");
    str=inp.nextLine();

    while(str.length()>0)
    {
        ch=str.charAt(0);
        int i=0;

        while(str.charAt(i)==ch)
        {
                count =count+i;
                i++;
        }

        str.substring(count);
        System.out.println(ch);
        System.out.println(count);
    }

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-26T07:28:46.427

```
public class StringTest{
public static void main(String[] args){

    String s ="aaabbbbccccccdd";
    String result="";
    StringBuilder sb = new StringBuilder(s);

    while(sb.length() != 0){
        int count = 0;
        char test = sb.charAt(0);
        while(sb.indexOf(test+"") != -1){
            sb.deleteCharAt(sb.indexOf(test+""));
            count++;
        }
        //System.out.println(test+" is repeated "+count+" number of times");
        result=result+test+count;
    }
    System.out.println(result);         
}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T05:58:43.640

这就是问题：

```
while(str.charAt(i)==ch) 
```

这将一直持续到它从末尾掉下来......当`i`它与字符串的长度相同时，它将要求超出字符串末尾的字符。你可能想要：

```
while (i < str.length() && str.charAt(i) == ch) 
```

您还需要`count`在较大循环的每次迭代开始时设置为 0 - 毕竟计数会重置 - 并更改

```
count = count + i; 
```

到：

```
count++; 
```

...或摆脱`count`或`i`。毕竟，它们总是具有相同的价值。就个人而言，我只使用一个变量，在循环*内声明和初始化。*事实上，这是一个通用的风格点——在需要时声明局部变量比在方法的顶部声明它们更简洁。

但是，您的程序将永远循环，因为这没有任何用处：

```
str.substring(count); 
```

字符串在 Java 中是不可变的 -`substring`返回一个*新*字符串。我想你想要：

```
str = str.substring(count); 
```

请注意，这仍然会为“aabbaa”输出“a2b2a2”。可以吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T06:49:30.740

我不想给出完整的代码。所以我想给你挑战并从中获得乐趣。我鼓励您使代码更简单，并且只有 1 个循环。

基本上，我的想法是将字符比较并排配对。例如，将 char 1 与 char 2 进行比较，将 char 2 与 char 3 进行比较，等等。当 char N 与 char (N+1) 不同时，则重置字符数。您只能在一个循环中执行此操作！在处理这个时，形成一个新的字符串。不要使用与输入相同的字符串。这很令人困惑。

请记住，让事情变得简单很重要。看着复杂的代码，开发人员的生活已经够难了。

玩得开心！

汤米“我应该成为一名老师”奎

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T06:57:31.937

如果这是一个真正的程序而不是一个研究项目，那么看看使用 Apache Commons [StringUtils](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html)类 - 特别是 countMatches 方法。

如果这是一个学习项目，那就坚持下去，从你的探索中学习:)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-25T05:59:18.847

您应该能够利用[`StringUtils`](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html)类和[`countMatches()`](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#countMatches%28java.lang.String,%20java.lang.String%29)方法。

> 公共静态 int countMatches(String str, String sub)
> 
> ```
> Counts how many times the substring appears in the larger String. 
> ```

尝试以下操作：

```
int count = StringUtils.countMatches("a.b.c.d", "."); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-01-10T14:45:55.103

我认为您正在寻找的是：

公共类问题2 {

```
/**
 * @param args the command line arguments
 */
public static void main(String[] args) throws IOException {
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    String input = br.readLine().toLowerCase();
    StringBuilder result = new StringBuilder();
    char currentCharacter;
    int count;

    for (int i = 0; i < input.length(); i++) {
        currentCharacter = input.charAt(i);
        count = 1;
        while (i < input.length() - 1 && input.charAt(i + 1) == currentCharacter) {
            count++;
            i++;
        }
        result.append(currentCharacter);
        result.append(count);
    }

    System.out.println("" + result);
} 
```

}

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-12-24T10:45:21.803

尝试这个：

```
import java.util.Scanner;

    /* Logic: Consider first character in the string and start counting occurrence of        
              this character in the entire string. Now add this character to a empty
              string "temp" to keep track of the already counted characters.
              Next start counting from next character and start counting the character        
              only if it is not present in the "temp" string( which means only if it is
              not counted already)
public class Counting_Occurences {

    public static void main(String[] args) {

        Scanner input=new Scanner(System.in);
        System.out.println("Enter String");
        String str=input.nextLine();

        int count=0;
        String temp=""; // An empty string to keep track of counted
                                    // characters

        for(int i=0;i<str.length();i++)
        {

            char c=str.charAt(i);  // take one character (c) in string

            for(int j=i;j<str.length();j++)
            {

                char k=str.charAt(j);  
    // take one character (c) and compare with each character (k) in the string
            // also check that character (c) is not already counted.
            // if condition passes then increment the count.
                if(c==k && temp.indexOf(c)==-1)                                                                          
                {

                    count=count+1;

                }

            }

             if(temp.indexOf(c)==-1)  // if it is not already counted
             {

            temp=temp+c; // append the character to the temp indicating
                                         // that you have already counted it.

System.out.println("Character   " + c + "   occurs   " + count + "    times");
             }  
            // reset the counter for next iteration 
              count=0;

        }

    }

} 
```

# mysql-python - 安装和运行 CVSAnaly2 时 python-mysql 出错

> ID：10749178
> 
> 赞同：0
> 
> 时间：2012-05-25T05:57:20.250
> 
> 标签：mysql-python

我正在尝试安装 CVSAnaly2，它的安装和运行在链接[https://sites.google.com/site/arnamoyswebsite/Welcome/updates-news/howtoinstallandruncvsanaly2inubuntu1110](https://sites.google.com/site/arnamoyswebsite/Welcome/updates-news/howtoinstallandruncvsanaly2inubuntu1110)中进行了说明。

但是，当我尝试运行命令`cvsanaly2 -u root -p ****`时，出现以下错误：

```
Traceback (most recent call last):
  File "/usr/local/bin/cvsanaly2", line 5, in <module>
    pkg_resources.run_script('cvsanaly2==2.1.0', 'cvsanaly2')
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 467, in run_script
    self.require(requires)[0].run_script(script_name, ns)
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 1200, in run_script
    execfile(script_filename, namespace, namespace)
  File "/usr/local/lib/python2.7/dist-packages/cvsanaly2-2.1.0-py2.7.egg/EGG-INFO/scripts/cvsanaly2", line 37, in <module>
    retval = pycvsanaly2.main.main (sys.argv[1:])
  File "/usr/local/lib/python2.7/dist-packages/cvsanaly2-2.1.0-py2.7.egg/pycvsanaly2/main.py", line 265, in main
    config.db_hostname)
  File "/usr/local/lib/python2.7/dist-packages/cvsanaly2-2.1.0-py2.7.egg/pycvsanaly2/Database.py", line 604, in create_database
    db.connect ().close ()
  File "/usr/local/lib/python2.7/dist-packages/cvsanaly2-2.1.0-py2.7.egg/pycvsanaly2/Database.py", line 473, in connect
    raise DatabaseException (str (e))
pycvsanaly2.Database.DatabaseException: (2002, "Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)") 
```

任何人都知道如何解决这个错误？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T21:21:22.757

在上面的链接中，提到要安装 Python MySqldb，我们需要使用“sudo apt-get install python-mysqldb”命令。但是，没有提到我们需要先安装MySql Server，然后再安装python-mysqldb。

因此，我使用“sudo apt-get install python-mysqldb”删除了 python mysql。然后，我按照这些步骤使其工作。

1) 使用“sudo apt-get install mysql-server”命令安装 MySql Server 2) 使用“sudo apt-get install python-mysqldb”命令安装 python MySql

而且，它奏效了:)

# grails - 无法将反向 url 映射的变量传递给 remoteFunction

> ID：10749179
> 
> 赞同：2
> 
> 时间：2012-05-25T05:57:22.957
> 
> 标签：grails

假设我有一个 url 映射

“博客/$year/$month/$day”（控制器：'blog'）

我无法将 $year、$month 和 $day 的值传递给 remoteFunction，以便它生成正确的 url。

没有变量，默认规则将匹配并且生成的 url 会像“/controller/action” 我知道我可以将参数传递给 remoteFunction - 所以传入的 url 将匹配规则，但是反向 url 映射怎么样 - 用于生成ajax 端点的 url。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-25T05:36:58.120

如果您正在寻找一种将 url 映射中的参数放入 remoteFunction() 调用的方法，grails 手册说这可以通过在收到请求后访问控制器中的 params 映射来完成：

```
static mappings = {
   "/$blog/$year/$month/$day/$id"(controller: "blog", action: "show")
} 
```

> “URL 中的各个标记将再次映射到 params 对象，其值可用于年、月、日、id 等。”

[http://grails.org/doc/latest/guide/theWebLayer.html#urlmappings](http://grails.org/doc/latest/guide/theWebLayer.html#urlmappings)

# jquery - 播放 youtube 视频时如何暂停背景音乐

> ID：10749180
> 
> 赞同：0
> 
> 时间：2012-05-25T05:57:33.220
> 
> 标签：jquery, html

我正在使用 HTML5 音频标签播放一些背景音乐，页面上还有一个 YouTube 视频。我不知道如何在播放 YouTube 视频时自动停止背景音乐。

```
<audio id="player" autoplay src="War drums.mp3"></audio>
    <div id="music">
<button id="play" onclick="document.getElementById('player').play()"></button>
<button id="pause" onclick="document.getElementById('player').pause()"></button>
<button id="up" onclick="document.getElementById('player').volume+=0.1"></button>
<button id="down" onclick="document.getElementById('player').volume-=0.1"></button>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:33:46.657

您可能需要查看[YouTube JavaScript Player API](https://developers.google.com/youtube/js_api_reference)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:53:27.583

看起来你需要类似的东西：

```
var youtubeplayer = document.getElementById('youtubeid');

youtubeplayer.addEventListener("onStateChange", function(e) {

   if (e === 1) {
       document.getElementById('player').pause();
   } else {
       document.getElementById('player').play();
   };

}); 
```

不过，在使用 API 参考之前，我会好好阅读它。

# google-app-engine - 带有谷歌应用引擎的 JSF。不确定如何调用 managedbean 中的方法

> ID：10749181
> 
> 赞同：0
> 
> 时间：2012-05-25T05:57:42.497
> 
> 标签：google-app-engine, jsf, exception

我正在使用带有 JSF 的谷歌应用引擎。我想在用户按下该按钮时调用一个函数：

```
<p:commandButton value="Ajax Submit" action="#{todo.test}" /> 
```

我把 todo 放在 src->package test123 下。

```
package test123;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.event.ActionEvent;

@ManagedBean(name="todo")
@SessionScoped
public class Todo {  

    public void test(ActionEvent event){ 
  System.out.println("lol");    
    }
} 
```

但是当我按下按钮时，会发生错误：像这样：

```
 javax.el.MethodNotFoundException: /Template/default.xhtml @39,38 action="#{todo.test}": Method not found: test.Todo@7929b073.test() 
```

我错了吗？还是我需要做一些配置？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T05:59:24.747

使用`actionListener="#{todo.test}"`或尝试：

```
public void test()
{ 
  System.out.println("lol");    
} 
```

有关详细信息，请参见此处：[action 和 actionListener 之间的区别](https://stackoverflow.com/questions/3909267/differences-between-action-and-actionlistener)

# database - 在数据库中存储 jQuery 对象

> ID：10749188
> 
> 赞同：0
> 
> 时间：2012-05-25T05:58:12.317
> 
> 标签：database, jquery

我有一些可拖动的对象，我希望用户拖动它们，然后按“保存”并在第二天返回页面以进一步拖动它们。可拖动对象包括带有事件处理程序等的动态 html。

我想将这些对象存储在数据库中，然后能够重新加载它们。

什么是实现这一目标的好方法？

我想出的一种可能的方法是将所有 DOM 代码存储在容器 div 中，作为字符串存储在数据库中，然后将其插入页面并运行脚本来为特定元素添加新的事件处理程序......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:13:59.887

我想将它们存储为字符串是最好的解决方案。只需将列类型“长文本”放入数据库！

# jquery - 如何检查元素当前是否正在拖动

> ID：10749189
> 
> 赞同：11
> 
> 时间：2012-05-25T05:58:15.180
> 
> 标签：jquery, jquery-ui

我希望能够检查调用函数时是否正在发生事件。当使用 .draggable() 上下拖动我的自定义滚动条时，我调用了一个函数，并且当我的容器滚动时，我也调用了一个函数。问题是两者同时运行，这使得它出现故障。

所以我的问题是如何执行“if”语句检查当前是否正在拖动滚动条，以便阻止它执行其余的函数代码？

我不是在问一个元素是否有一个“绑定”到它的事件，而是在问这个事件是否在特定时刻被触发。

我可以这样做吗？还是我需要采取另一种方法？

这是我的代码的样子：

```
$('.container').scroll(function(){
    //get the heights of the container and it's contents and the difference
    //get the height of the scroll bar and it's container and the difference
    //declare the top property of scroll bar from this info
});
function scrolly() {
    //get the heights of the elements described above
    //declare the scrollTop of the container
}
$('.bar').draggable({
    axis: 'y',
    containment: 'parent',    
    drag: function() {
        scrolly();
    }
}); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-25T06:04:58.473

**更新**

您可以使用此条件来确定您的栏是否被拖动：

```
if ($('.bar').is('.ui-draggable-dragging')) {
    return; // bar is being dragged
} 
```

# .htaccess - 301重定向所有断开的链接

> ID：10749191
> 
> 赞同：0
> 
> 时间：2012-05-25T05:58:41.343
> 
> 标签：.htaccess

有没有办法将所有损坏的链接重定向到主页？

我使用了以下内容，但它给了我一个重定向循环。

```
Redirect 301 / http://www.domain.com/ 
```

以下内容也不适用于 wordpress 网站。

```
ErrorDocument 404 / 
```

有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T06:18:00.990

我在我的 wordpress 网站上的每个断开的链接上都使用了以下内容来解决这个问题。

`ErrorDocument 404`不适用于**WordPress**网站。

```
Redirect 301 /tags/something http://yoursite.com/ 
```

# android - 从位图在 imageView 中设置图像时出现 NullPointerException？

> ID：10749198
> 
> 赞同：0
> 
> 时间：2012-05-25T05:59:17.287
> 
> 标签：android, xml, nullpointerexception, expansion

我正在使用来自[http://developer.android.com/guide/market/expansion-files.html的 APK 扩展文件](http://developer.android.com/guide/market/expansion-files.html)

代码 ：

```
String[] path= getAPKExpansionFiles(this,2,0);
ZipResourceFile expansionFile;
try {
        expansionFile = new ZipResourceFile(path[0]);
        InputStream fileStream = expansionFile.getInputStream("assets/Tablet/Chester_the_cat/chester_the_cat_2.png");
        Bitmap bit=BitmapFactory.decodeStream(fileStream);
            iv_new=(ImageView)findViewById(R.id.iv_new);
            iv_new.setImageBitmap(bit); 
```

我在这一行得到这个 NullPointerException

```
 iv_new.setImageBitmap(bit); 
```

在 XML 中，我的 ImageView 是：

```
 <ImageView android:id="@+id/iv_new"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:16:42.847

你`setContentView(View)`用包含 ImageView 的布局调用了吗？

# windows-phone-7 - 如何在应用程序启动 WP7 之前给出指令。？

> ID：10749205
> 
> 赞同：0
> 
> 时间：2012-05-25T05:59:33.980
> 
> 标签：windows-phone-7

我想偶尔显示一些指令，当应用程序安装并开始运行应用程序时，我有 3 个屏幕截图图像一个一个用户点击图像它将转发到下一个图像，所以我如何在 Windows 手机中做到这一点7.?

注意：这只是第一次安装应用程序并查看。

谢谢..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:27:44.790

创建另一个 xaml 页面并将用户重定向到它，以防它是应用程序的第一次启动。

在新创建的页面的加载事件中放置以下代码：

```
 NavigationService.RemoveBackEntry(); 
```

应该是这样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:12:12.990

可能您可以创建一个`UserControl`在 MainPage 刚刚加载时显示的内容。

# git - Git 提交作者信息 - Christian S. 到底是谁？

> ID：10749211
> 
> 赞同：3
> 
> 时间：2012-05-25T06:00:20.050
> 
> 标签：git

我最近开始使用 git。我尝试按照设置我的用户信息的说明进行操作，但似乎出现了可怕的错误：

```
[test@h] git config --list
user.name=**MY NAME**
user.email=**MY EMAIL**
core.repositoryformatversion=0
core.filemode=true
core.bare=false
core.logallrefupdates=true
remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*
remote.origin.url=** URL **
branch.master.remote=origin
ranch.master.merge=refs/heads/master 
```

到现在为止还挺好。我的姓名和电子邮件地址似乎设置正确

```
[test@h] git add somefile 
```

我添加了一个文件，现在想提交它：

```
[test@h] git commit -m "test commit"     
[master 280efe4] test commit
Author: Christian S. <strcat@****.com>
1 file changed, 0 insertions(+), 0 deletions(-)
create mode 100644 somefile 
```

突然冒出来……克里斯蒂安·S。

我忽略了什么？我不知道这个名字和电子邮件地址来自哪里。这是我忘记在某处覆盖的默认值吗？

编辑：删除个人信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T06:37:36.943

好的，多亏了 pst，我找到了解决方案。我在开发服务器上工作，其中有一个系统范围的 .zshrc 文件。

显然 .zshrc 文件的来源是：http: [//www.strcat.de/dotfiles/dot.zshexports](http://www.strcat.de/dotfiles/dot.zshexports)

在这个文件中，作者的姓名和电子邮件地址是硬编码的：

```
if [[ -x `which git` ]]; then
   (( ${+GIT_AUTHOR_EMAIL} )) || export GIT_AUTHOR_EMAIL = "..."
       ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T06:23:22.467

这些给你什么：

```
git config --system -l
git config --global -l
git config --local -l 
```

或在 Linux 中：

```
echo $GIT_AUTHOR_NAME 
```

或在 Windows 中：

```
echo %GIT_AUTHOR_NAME% 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:08:39.887

打开配置文件`your-repo/.git/config`并检查那里是否有 [user] 设置。

存储库中的配置文件将覆盖全局 .gitconfig 文件。

# android - 无法比较android中的两个字符串

> ID：10749213
> 
> 赞同：2
> 
> 时间：2012-05-25T06:00:21.390
> 
> 标签：android, string-comparison, callblocking

我是安卓新手。我正在开发一个阻止不需要的电话的应用程序。现在，当我尝试将传入号码与联系人号码进行比较时，我被困在这里。这是代码。请帮忙。在这里检查复选框时，我需要阻止来自陌生人的所有电话（不在联系人中）

```
Bundle extra=intent.getExtras();//new
telephonyManager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
if(extra!=null)//new=== getting the blocked number {
    state=extra.getString(telephonyManager.EXTRA_STATE);
    if(state.equals(telephonyManager.EXTRA_STATE_RINGING)) {
        number=extra.getString(telephonyManager.EXTRA_INCOMING_NUMBER);
        Log.w("INCOMMING NUMBER",number);
    }
}
if(noStrangers_cb.isChecked()){
    Cursor phones1 = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null,null, null);
    while (phones1.moveToNext()){
        String phoneNumber = phones1.getString(phones1.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
        Log.d("NUMBER IN CONTACT",phoneNumber );

        //boolean val= number== phoneNumber;
        //String no=number;
        //Log.d("ASSIGNING NUMBER TO NO = ", no);
        //Collator c=Collator.getInstance();
        if(!phoneNumber.equals(number))
            {
            Log.d("IF ", "STRANGERS"+number);
            //Log.d("NUMBER CHECKING", "NUMBER = "+number+"CONTACT = "+phoneNumber);
            try {
                telephonyService.endCall();
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            }
    }
    phones1.close();
}//end if Strangers 
```

日志猫： ![在此处输入图像描述](../Images/711c6b819d238712a162d755eab39ebd.png)

更新的代码如下：

```
if(allContacts_cb.isChecked())
                     {
                      Log.d("BLOCK ALL CONTACTS","blocking contacts.........." );
                      Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null,null, null);
                       while (phones.moveToNext())
                       {
                        String phoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                        Log.d("NUMBER IN CONTACT ",phoneNumber );
                        String num=phoneNumber.replace("-","");
                        String incom=incomingNumber;
                        String s1="0"+num;
                        String s2="+91"+num;
if((num.equals(incomingNumber))||((s1).equals(incomingNumber))||(s2).equals(incomingNumber))//if(phoneNumber.compareTo(no)==0)//&&(checking==true))
                        { 
                          Log.d("IF ", "INSIDE IF OF BLOCKING CONTACTS");//+cn+"num"+n);
                          Log.d("NUMBER CHECKING", "NUMBER = "+number+"CONTACT = "+phoneNumber);
                          try {
                            ending1=telephonyService.endCall();
                            if(ending1)
                             {  
                             for(int i=1;i<=1;i++)
                             {
                              android.telephony.SmsManager sms = android.telephony.SmsManager.getDefault();
                              sms.sendTextMessage(incom, null, SMS, null, null);
                              break;
                             }
                              }
                              } catch (Exception e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                                }

                          } 
                        else
                        {
                            if(noStrangers_cb.isChecked())
                            {
                                try {
                                    telephonyService.endCall();
                                } catch (RemoteException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                }
                            }
                        }
                          }//end of while
                          phones.close();
                         }//end if allContacts 
```

谁能帮我..拜托..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:34:20.067

从您的号码中替换 _ 字符不是您的最终解决方案。您应该阅读[PhoneNumberUtils](http://developer.android.com/reference/android/telephony/PhoneNumberUtils.html)，或者这里是[最好的库“libphonenumber”](http://code.google.com/p/libphonenumber/)，可用于与电话号码相关的各种类型的操作。

阅读[有关 libphonenumber](http://code.google.com/p/libphonenumber/)的详细信息。

以下是可用于您目的的代码片段。

```
public boolean isCallerInDatabase(String caller, String phoneNumberFromDb) {
        phoneUtil = PhoneNumberUtil.getInstance();
        if(phoneUtil.isNumberMatch(caller, phoneNumberFromDb) != PhoneNumberUtil.MatchType.NO_MATCH) {
            //Number matched 
            Log.i("TEST", "NUMBER MATCHED");
            return true;
        }
        Log.i("TEST", "NUMBER NOT MATCHED");
        return false;       
    } 
```

* * *

***更新：Android 将该库添加为实用程序类。***

*Android 本身已经为电话相关的帮助方法添加了[PhoneNumberUtils类。](http://developer.android.com/reference/android/telephony/PhoneNumberUtils.html)要比较两个电话号码，您应该使用[PhoneNumberUtils.compare](http://developer.android.com/reference/android/telephony/PhoneNumberUtils.html#compare%28java.lang.String,%20java.lang.String%29)方法。*

快乐编码:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T07:06:59.617

您可以将电话号码中的字符串“-”替换为“”，然后使用该字符串进行比较。

```
string no= Phonecontactno.StringReplace("-",""); 
```

现在使用此字符串与传入的编号进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:13:07.643

尝试以下条件可能对您有帮助

```
if(!(phoneNumber.toString().equals(number.toString))) 
```

# symfony - 如何从 Symfony2 中的两种不同形式获取信息并保存？

> ID：10749216
> 
> 赞同：0
> 
> 时间：2012-05-25T06:00:39.843
> 
> 标签：symfony

实际上，我有一个带有输入的表单来持久化一个实体。我想在其他地方创建另一个包含更多信息的表单，并且我想保存第一个表单中提交的所有内容。我不能以相同的形式包含第二个输入，因为这不是同一个视图。解决此问题的最佳方法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:28:52.120

这听起来很难。

我是否理解正确：

您拥有一些必要信息和一些可以为空的附加信息的实体。

现在有两种表格，一种是创建具有所需信息的实体，而您不想使用附加信息更新表格。

它是否正确？

我会尝试两件事：

1.  默认 您创建一个包含所有字段的 FormType，并有两个仅呈现所需字段的视图（为此不要使用 form_rest）。比文档中描述的表单处理方式。这可能不适用于验证。

2.  使用 FormModels 在 Form/Model/FormModelClass 下，您有两个类，它们仅具有一种表单所需的属性。Form 组件与它们交互并将所有属性映射到此模型。当表单提交成功且有效时，您可以手动将属性映射回原始实体并将其持久化

# python - 从单个函数调用返回连续结果

> ID：10749222
> 
> 赞同：0
> 
> 时间：2012-05-25T06:01:05.637
> 
> 标签：python, events, data-structures, asynchronous

我遇到了一个问题。就像这样，一个函数通常返回一个结果。我想要的是在某个时间范围内返回连续的结果流（可选）。

函数重复返回单个函数调用的结果是否可行？

在浏览网络时，我确实遇到了 gevent 和 threading。如果有任何提示如何解决它，它会起作用吗？

我只需要在每个任务完成后立即调用该函数执行工作并返回结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:11:21.183

为什么你需要这个问题没有在问题中指定，所以很难知道你需要什么，但我会给你一个大概的想法，还有代码。

您可以以这种方式返回：（`return var1, var2, var3`但我认为这不是您需要的）

您有多种选择：阻塞或非阻塞。阻塞意味着在您调用函数时您的代码将不再执行。非阻塞意味着它将并行运行。您还应该知道，您肯定需要修改调用该函数的代码。

那就是如果你想要它在一个线程中（非阻塞）：

```
def your_function(callback):
    # This is a function defined inside of it, just for convenience, it can be any function.
    def what_it_is_doing(callback):
        import time
        total = 0
        while True:
            time.sleep(1)
            total += 1
            # Here it is a callback function, but if you are using a
            # GUI application (not only) for example (wx, Qt, GTK, ...) they usually have
            # events/signals, you should be using this system.
            callback(time_spent=total)

    import thread
    thread.start_new_thread(what_it_is_doing, tuple(callback))

# The way you would use it:
def what_I_want_to_do_with_each_bit_of_result(time_spent):
    print "Time is:", time_spent

your_function(what_I_want_to_do_with_each_bit_of_result)
# Continue your code normally 
```

另一种选择（阻塞）涉及一种特殊的函数`generators`，在技术上被视为迭代器。因此，您将其定义为函数并充当迭代器。这是一个示例，使用与另一个相同的虚拟函数：

```
def my_generator():
    import time
    total = 0
    while True:
        time.sleep(1)
        total += 1
        yield total

# And here's how you use it:
# You need it to be in a loop !!
for time_spent in my_generator():
    print "Time spent is:", time_spent

# Or, you could use it that way, and call .next() manually:
my_gen = my_generator()
# When you need something from it:
time_spent = my_gen.next() 
```

**请注意**，在第二个示例中，代码没有意义，因为它并没有真正以 1 秒的间隔调用，因为每次调用它`yield`或`.next`调用它时都会运行其他代码，这可能需要一些时间。但我希望你明白这一点。

同样，这取决于你在做什么，如果你使用的应用程序有一个“事件”框架或类似的框架，你需要使用它，如果你需要它阻塞/非阻塞，如果时间很重要，你的调用代码如何应该操纵结果...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:12:57.683

您的 gevent 和线程在正确的轨道上，因为一个函数执行它被编程做的事情，要么一次接受 1 个 var，要么接受一个集合并返回一个集合或一个 var。必须调用该函数以返回任一结果，并且连续的处理流可能已经发生，否则您正在询问内核指针或类似内容的循环，而您不是，所以...

因此，**封装函数的调用代码**很重要，函数、任何函数，例如，即使是真/假布尔函数也只会执行直到它的变量完成，所以在你的情况下必须有一个无限期监听的调用函数. 如果它不存在，你应该写一个；）

调用封装的代码当然很重要。

人们不会有足够的信息来提供太多帮助，除非在超级一般意义上，我们可以告诉你你现在或应该在某个框架的事件循环中，或者已经在某种形式的其他代码循环中——这就是你想听/准备数据。

对于这类事情，我喜欢“函数式编程”、“映射函数”。我认为。我不能在我的代表级别发表评论，否则我会限制我的猜测。:)

为了从其他人那里获得更好的答案，请发布一些示例代码并尽可能展示您的 API。

# php - 多文件上传（数组）php

> ID：10749227
> 
> 赞同：2
> 
> 时间：2012-05-25T06:01:26.753
> 
> 标签：php, html, upload

**PHP 脚本**

```
 $count = 0;
    foreach ($_FILES['filesToUpload'] as $file) {
      //upload process
      echo $file[$count]['tmp_name'].',';
      $count ++;
    } 
```

**HTML**

```
<form method="POST" action="action-here" enctype="multipart/form-data">
<input class="btn" name="filesToUpload[]" type="file" multiple="" />
<input class="btn primary" type="submit" value="Submit">
</form> 
```

我这样做主要是错误的。我想要做的是让你选择文件然后php脚本像数组一样处理它？

我不断退出，例如`1,i,C,,,`。

我知道进行多次上传的其他方法，但我知道这是最简单的方法之一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T06:06:45.753

```
foreach ($_FILES['filesToUpload']['error'] as $k => $error) {
  echo $_FILES['filesToUpload']['tmp_name'][$k].',';
} 
```

提示：使用`print_r($_FILES)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:07:02.400

你应该[这样](http://www.php.net/manual/en/features.file-upload.post-method.php)写：

```
echo $file['tmp_name'][$count].','; 
```

# php - 在类中实现 __autoload

> ID：10749231
> 
> 赞同：0
> 
> 时间：2012-05-25T06:01:51.030
> 
> 标签：php, autoload

有没有一种方法可以`__autoload`在类中定义，所以每当我访问未定义的类时，PHP 都会运行`__autoload`类方法？

```
<?php 
class Test {
    public function __construct() {
        echo 'Instantiating ', __CLASS__, "\n";
    }

    public function __autoload($className) {
        echo "Loading $className\n";
        require_once($className . '.php');
    }

    public function test() {
        $test = new AnotherClass();
    }
}

$bill = new Test();
$bill->test(); 
```

另一个类.php：

```
<?php
class AnotherClass {
    public function __construct() {
        echo 'Instantiating ', __CLASS__, "\n";
    }
} 
```

输出：

> ```
> 实例化测试
> 加载另一个类
> 实例化另一个类
> 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:03:03.870

不，`__autoload`函数必须是全局的。

但是，`SPL`有一种方法可以将任何*可调用对象*注册为自动加载函数：[`spl_autoload_register()`](http://www.php.net/manual/en/function.spl-autoload-register.php). 但是，使用类方法没有多大意义——您可能只是创建实例，注册方法，然后再也不使用该实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:04:15.710

此页面包含有关如何在类中实现自动加载的信息（PHP 手册）[spl_autoload_register](http://www.php.net/manual/en/function.spl-autoload-register.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:12:07.360

这行得通！！！

```
class ClassAutoloader {
    public function __construct() {
        spl_autoload_register(array($this, 'loader'));
    }
    private function loader($className) {
        echo 'Trying to load ', $className, ' via ', __METHOD__, "()\n";
        include $className . '.php';
    }
} 
```

# java - 如何检查工作表是否存在？

> ID：10749234
> 
> 赞同：0
> 
> 时间：2012-05-25T06:02:26.257
> 
> 标签：java, apache-poi

我想在阅读之前检查文件（xls 或 xlsx）中是否存在给定的工作表（按名称或编号）。我正在使用事件 API 来解决内存占用问题，因此我不想使用 org.apache.poi.ss.usermodel.Workbook 对象。

我正在使用带有 JDK7 的 Apache POI 3.7。有人可以帮帮我吗？

谢谢，

段落

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:19:00.923

对于这两种格式，使用 UserModel 代码进行检查的方法是相同的。

但是，您已经询问了事件 API。这些级别要低得多，因此两种格式之间的差异必须由您处理，因为两者之间没有任何东西可以隐藏它们。（如果您想要轻松的生活，只需为您的服务器购买更多内存并坚持使用 UserModel！）

对于 .xls 文件格式 (HSSF)，工作表的详细信息存储在文件顶部附近。开始处理文件，并等待*BoundSheetRecord* (sid=0x0085) 过去。当您看到所有这些时，您就会知道您的工作表是否在文件中。如果是，则正常处理。如果没有，请中止。

对于 .xlsx 文件格式 (XSSF)，打开文件并获取工作簿部分（它相当小）。检查是否存在哪些工作表，然后根据此决定是否要处理。如果您使用的是 XSSFReader，请调用`getWorkbookData()`以获取 Workbook 部分，然后可能使用 XmlBeans 来处理它（通过`WorkbookDocument.Factory`）

# javascript - 在 Firefox 扩展中创建内存泄漏的 JQuery 选项卡

> ID：10749237
> 
> 赞同：0
> 
> 时间：2012-05-25T06:02:47.600
> 
> 标签：javascript, jquery-ui, memory-leaks, firefox-addon, jquery-tabs

我在我的 Firefox 扩展中使用 jQuery 选项卡库。标签功能在我的扩展程序中运行良好。然而，它正在创建一个僵尸隔间。

这就是我使用标签的方式：

```
$j(mydiv).find('#targetid').tabs({selected: 2}); 
```

当我评论这一行并安装扩展时，没有内存泄漏。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:15:36.440

问题是 jQuery UI 存在于浏览器窗口中，只要浏览器窗口保持打开状态，它就会保持“活动”状态。但是，这些选项卡位于内容选项卡中，一旦您关闭该选项卡，它们就会消失。jQuery UI 必须在某处保留对选项卡的本地引用，并且即使在选项卡关闭后（僵尸隔间），该引用也不会让选项卡收集垃圾。一种解决方案是找到该参考并摆脱它。但是，即使您以这种方式解决了它（我不能，因为我对 jQuery 了解不够） - 由于 jQuery UI 设计为在网页中运行，因此问题可能会在稍后再次出现，因此不会考虑这种内存泄漏那里。

更健壮的解决方案是在与它负责的 UI 相同的上下文中运行 jQuery UI。这样，当您关闭选项卡时，jQuery UI 及其小部件都将被释放 - 不再有僵尸隔间。这可以使用[消息管理器](https://developer.mozilla.org/en/The_message_manager)来完成，例如：

```
// Load content script into the current tab
var contentScriptURL = "chrome://.../content/contentScript.js";
gBrowser.selectedBrowser.messageManager.loadFrameScript(contentScriptURL, false); 
```

然后使用mozIJSSubscriptLoader`contentScript.js`将 jQuery 和 jQuery UI 加载到其上下文[中](https://developer.mozilla.org/en/XPCOM_Interface_Reference/mozIJSSubScriptLoader)：

```
var scriptLoader = Components.classes["@mozilla.org/moz/jssubscript-loader;1"]
                     .getService(Components.interfaces.mozIJSSubScriptLoader);
scriptLoader.loadSubScript("chrome://.../content/jquery.js");
var jQuery = jQuery.noConflict(true);
scriptLoader.loadSubScript("chrome://.../content/jquery-ui.js", jQuery);
...
$j(mydiv).find('#targetid').tabs({selected: 2}); 
```

此内容脚本与在您的叠加层中运行的脚本具有相同的 chrome 权限，但一旦关闭选项卡，它将被卸载 - 以及它可能保留对该选项卡内容的任何引用。

# c++ - 为什么我们需要 C++ 中的模板关键字？

> ID：10749243
> 
> 赞同：3
> 
> 时间：2012-05-25T06:03:30.793
> 
> 标签：c++, templates, syntax, language-lawyer

一个函数模板：

```
template<class T> T 
max(T a, T b){return (a > b)? a: b;} 
```

使用时：

```
max<int>(a, b); // Yeah, the "<int>" is optional most of the time. 
```

但如果你允许，我们可以这样写模板：

```
T max<class T>(T a, T b){return (a > b)? a: b;} 
//I know the return type T is not in its scope, don't focus on that. 
```

因此，我们可以像普通函数一样维护相同形式的声明和使用。甚至不需要引入和键入关键字“模板”。我认为类模板会是一样的吗？那么还有什么其他的原因让模板变成了我们今天所知道的形式吗？

我更改了表格，以便您不必关注返回类型：

```
auto max<class T>(T a, T b) -> T {return (a > b)? a: b;}
//This is C++11 only and ugly i guess. 
//The type deduce happens at compile time 
//means that return type really didn't to be a problem. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:07:53.803

我想到的直接答案是：
仅仅因为提出模板提案的人这么说，而标准委员会中没有人认为输入这些额外的`8`字符会是一种开销。

另一方面：
模板的语法一开始就复杂且令人生畏，确保关键字的存在`template`使代码读者更直观地知道他们正在处理模板，而不是 C++ 提供的任何其他野兽或任何实现特定的构造（读取编译器扩展）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T06:11:09.167

你必须`T`在使用它之前声明它，所以它真的**必须**是

```
<class T> T max(T a, T b){return (a > b)? a: b;} 
```

但是它不清楚是什么`<class T>`- 编译器很可能会对此感到困惑。`template`前面清楚地表明`<`不是运算符，而是包含类型声明的大括号。

从这个角度来看，您的第二个示例应该是可能的，但请记住，这种语法只能在 C++11 中使用，并且模板是在更早之前引入的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T06:10:34.310

我相信这个问题依赖于编译器实现的简单性：C++ 中使用的任何名称都必须至少在用于帮助编译器能够从头开始解析之前声明（原因我不知道）。这就是你有奇怪的新语法来声明函数的原因之一，它允许在参数之后定义返回类型。

所以这里的原因是，阅读您的示例，T 是使用的第一个名称，但它之前没有声明，所以编译器不知道它是什么或它在什么样的表达式中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T07:28:15.717

您很快就会使用这种方法解析问题：

```
template <typename> int f(); // Current declaration syntax, type template argument.
template <int> int f();      // Current declaration syntax, non-type template argument.

void f<class>(); // New declaration syntax, type argument. 
void f<int>(); // New declaration syntax, non-type argument.
(void) f<int>(); // (void) is a cast , f is instantiation of f<class> with type int. 
```

# google-tv - 谷歌电视模拟器浏览器

> ID：10749244
> 
> 赞同：1
> 
> 时间：2012-05-25T06:03:38.767
> 
> 标签：google-tv

我已经安装了带有 KVM 和 Android SDK 的 Linux 操作系统。之后，我安装了 Google TV Add-on。

接下来，我创建了 AVD Google TV Addon (Google, Inc.) - API Level 12，屏幕分辨率为 720p。

运行模拟器后，模拟器运行正常，但模拟器不包含任何浏览器。如何安装浏览器（谷歌浏览器）？我想在 Google TV 模拟器中运行我的网络应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T20:51:31.233

模拟器不支持浏览器。请参阅此帖子以获取解决方法： [没有 chrome 浏览器的 Google TV 模拟器？](https://stackoverflow.com/questions/8209387/google-tv-emulator-without-chrome-browser)

另外，请提交功能请求：

[http://code.google.com/p/googletv-issues/](http://code.google.com/p/googletv-issues/)

# iphone - 将 UIImage 转换为 CGImage 会导致图像旋转

> ID：10749245
> 
> 赞同：5
> 
> 时间：2012-05-25T06:03:43.203
> 
> 标签：iphone, uiimage, cgimage, cgimageref

我正在尝试通过我的自定义裁剪器裁剪图像。不是来自 UIImagePickerController 的。现在，我通过处理 UIImagePicker 的委托在 UIImgeView 中显示从 Image Picker 捕获的图像：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo {
    imvOriginalImage.image = image;
} 
```

对于裁剪，我必须将此图像转换为 CGImageRef。图像以纵向模式拍摄。现在，当我在 CGImageRef 中转换此图像时，图像方向会发生变化。即使我使用以下内容：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo {
    //imvOriginalImage.image = image;
    CGImageRef imgRef = [image CGImage];
    UIImage *img = [UIImage imageWithCGImage:imgRef];
    [imvOriginalImage setImage:img]; 
```

}

图像方向改变。这只发生在那些以纵向模式拍摄的图像上。横向图像没有这个问题。

1.  为什么会这样？
2.  如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T06:07:41.013

这是 iPhone 相机与 Home 按钮相比旋转图像。它使用作为图像元数据的[EXIF](https://en.wikipedia.org/wiki/Exif)。看到这个线程：

[iPhone图像旋转](https://stackoverflow.com/questions/1260249/resizing-uiimages-pulled-from-the-camera-also-rotates-the-uiimage)

# blackberry - 黑莓中弹出虚拟键盘时如何将文本框滚动到适当的位置

> ID：10749250
> 
> 赞同：0
> 
> 时间：2012-05-25T06:04:00.800
> 
> 标签：blackberry, java-me, lwuit, lwuit-form

我正在使用 J2ME、Lwuit 和 Blackberry api 来开发我的应用程序。

我的表单包含文本框和工具栏。触摸文本框时，虚拟键盘出现然后消失。这是由于工具栏而发生的。即使我删除了工具栏，文本框仍保留在虚拟键盘下方而不是向上滚动。触摸手机出现问题，我们必须使用触摸屏。

我希望文本框向上滚动到适当的级别，以方便用户使用。

有没有人遇到过同样的问题！请分享解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:22:46.220

您知道黑莓触控开发需要不同的 UI 库吗？如果你不导入这个特定的库，你会发现外国问题。您必须导入一个名为 UI_RIM_Touch.jar 的库，如果您使用资源编辑器生成此项目，您可以在项目的根目录中找到此文件。试试这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T10:24:40.960

LWUIT 在该特定功能中存在错误。它可能已在[代号一](http://www.codenameone.com/)中修复，但我不确定。

# android - 访问在 initComponent sencha 中声明的变量

> ID：10749251
> 
> 赞同：3
> 
> 时间：2012-05-25T06:04:01.760
> 
> 标签：android, iphone, model-view-controller, extjs

我需要在 sencha 中以 mvc 模式呈现模板，所以在 InitComponent 上我已经声明了一些变量，但我无法在 init 函数之外访问这些变量。我做了以下尝试

```
Ext.define('casta.view.Intro', {
    extend: 'Ext.tab.Panel',
    //alias: 'widget.currentDate', //this makes it xtype 'currentDate'
    //store: 'CurrentDateStore',

    initComponent: function(){
        this.planetEarth = { name: "Earth", mass: 1.00 };

        this.tpl = new Ext.Template(['<tpl for".">', '<p> {name} </p>', '</tpl>'].join(''));
        this.tpl.compile();
        this.callParent(arguments);

    },
    html:this.tpl.apply(this.planetEarth)
}); 
```

错误

```
this.tpl is undefined
[Break On This Error]   

html:this.tpl.apply(planetEarth) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:28:47.260

我很确定这不是 JavaScript 作用域的工作方式......

在您的示例中，有两种方法可以做您想做的事情：

```
//this is the bad way imo, since its not really properly scoped.
// you are declaring the planeEarth and tpl globally
// ( or wherever the scope of your define is. )
var plantetEarth = { name: "Earth", mass: 1.00 }
var tpl = new Ext.Template(['<tpl for".">', '<p> {name} </p>', '</tpl>'].join(''));
tpl.compile();
Ext.define('casta.view.Intro', {
    extend: 'Ext.tab.Panel',
    //alias: 'widget.currentDate', //this makes it xtype 'currentDate'
    //store: 'CurrentDateStore',

    initComponent: function(){

        this.callParent(arguments);

    },
    html:tpl.apply(planetEarth)
}); 
```

或者

```
//I would do some variation of this personally.
//It's nice and neat, everything is scoped properly, etc etc
Ext.define('casta.view.Intro', {
    extend: 'Ext.tab.Panel',
    //alias: 'widget.currentDate', //this makes it xtype 'currentDate'
    //store: 'CurrentDateStore',

    initComponent: function(){

        this.tpl = new Ext.Template(['<tpl for".">', '<p> {name} </p>', '</tpl>'].join(''));
        this.tpl.compile();
        this.tpl.apply(this.planetEarth);
        this.html = this.tpl.apply(this.planetEarth)
        this.callParent(arguments);

    },

}); 
```

# regex - 正则表达式验证 grails 类日期格式

> ID：10749262
> 
> 赞同：0
> 
> 时间：2012-05-25T06:04:33.090
> 
> 标签：regex, grails, pattern-matching, grails-constraints

我目前在一个 grails 项目中工作，我最终遇到了一个关于 grails 中匹配约束的问题。我的字段应该只接受一个类似日期格式的字符串，就像这样：

> *2012 年 10 月 25 日下午 5:00*

这可能在使用正则表达式的匹配约束中吗？我总是很难使用正则表达式进行数据过滤，因为它有点令人困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T06:29:38.630

如果它是数据，为什么不使用标准日期格式化程序对其进行验证？喜欢：

```
static constraints = {
   mydate validator: {
      try {
         Date.parse('MM-dd-yyyy hh:mma', it)
         return true
      } catch (ParseException e) {
         return false
      }
   }
} 
```

顺便说一句，在这种情况下`Date`可以解析不太有效的日期（并将其转换为正确的值，例如`15am`）`3pm`。如果您需要完全有效的格式，您可以将其与原始值进行比较：

```
static constraints = {
   mydate validator: {
      try {
         Date date = Date.parse('MM-dd-yyyy hh:mma', it)
         return Date.format('MM-dd-yyyy hh:mma', date) == it
      } catch (ParseException e) {
         return false
      }
   }
} 
```

或者您可以`SimpleDateFormat`改用：

```
final static DateFormat DATEFORMAT = new SimpleDateFormat('MM-dd-yyyy hh:mma') 

static constraints = {
   mydate validator: {
      try {
         Date date = DATEFORMAT.parse(it)
         return DATEFORMAT.format(date) == it
      } catch (ParseException e) {
         return false
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:19:38.557

没有可以使用的 Date 对象吗？我不知道，但我可以帮助你使用正则表达式：

构建正则表达式并不困难，尤其是在您的情况下：

```
^\d{2}-\d{2}-\d{4} \d{2}:\d{2}[AP]M$ 
```

`^`匹配字符串的开头

`$`匹配字符串的结尾

`\d`是一个数字

`{2}`是一个量词，使前一个字符需要 2 次

`[AP]`是匹配的字符类`A`或`P`

**这个正则表达式只检查格式，而不是数字是否代表有效的日期或时间！**（例如 99-99-0000 35:61PM 有效）

阅读我的博客文章[每个程序员都应该知道的关于正则表达式](http://blog.xisb.de/?p=4)的一些更简短的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:21:50.083

试试这个：`^(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])-((?:19|20)\d\d) ([0-1]?[0-9]|2[0-4]):([0-5][0-9])(?::([0-5][0-9]))?(AM|PM)$`

```
^ Start of string
    (0[1-9]|1[012]) Month
    -
    (0[1-9]|[12][0-9]|3[01]) Day
    -
    ((?:19|20)\d\d) Year

    ([0-1]?[0-9]|2[0-4]) HH
    :
    ([0-5][0-9]) MM
    (?::([0-5][0-9]))? optional :SS
    (AM|PM)
$ End of string 
```

它捕获月、日、年、小时、分钟、秒和 AM/PM。

**编辑：**正如 Vikas 指出的那样，它不会检查一个月可以有多少天。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T07:25:25.503

**尝试这个**

```
\b(?:(?:(?:0?[469]|11)\-(?:0?(?:[1-9]|[12][0-9])|30)\-(?:1[7-9][0-9]{2}|200[0-9]|201[0-2]))|(?:(?:0?[13578]|1[02])\-(?:0?(?:[1-9]|[12][0-9])|3[01])\-(?:1[7-9][0-9]{2}|200[0-9]|201[0-2]))|(?:(?:0?2)\-(?:0?(?:[1-9]|1[0-9])|2[0-8])\-(?:1[7-9][0-9]{2}|200[0-9]|201[0-2]))) +(?:(?:(?:0?([0-9])|1[0-2])):(?:0?([0-9])|[1-5][0-9])(?:[AP]M))\b 
```

或者

```
\b(?:(?:(?:0?[469]|11)\-(?:0?(?:[1-9]|[12][0-9])|30)\-(?:1[7-9][0-9]{2}|200[0-9]|201[0-2]))|(?:(?:0?[13578]|1[02])\-(?:0?(?:[1-9]|[12][0-9])|3[01])\-(?:1[7-9][0-9]{2}|200[0-9]|201[0-2]))|(?:(?:0?2)\-(?:0?(?:[1-9]|1[0-9])|2[0-9])\-(?:1[7-9][0-9]{2}|200[0-9]|201[0-2]))) +(?:(?:(?:0?([0-9])|1[0-2])):(?:0?([0-9])|[1-5][0-9])(?:[AP]M))\b 
```

**注意：** 两种模式都有一个共同的限制，即`dates`如果`month`is 则匹配无效`february`。If-else 条件在某些 RegEx 风格中被接受，但不存在用于算术运算的此类函数。可能在不久的将来，这可能会在某些 RegEx 风格中实现，但我认为 RegEx 基本上不是这种情况。

1.  ***第一个模式找不到任何大于`28`二月的日期。而且它永远不会匹配任何无效的日期。***
2.  ***第二个与上面完全相同，但对于它来说，数字是`29`。***

*众所周知，使用 RegEx无法**完全解决这个问题。***

# java - 与 datetime 一起检查哪个更大

> ID：10749267
> 
> 赞同：-4
> 
> 时间：2012-05-25T06:04:58.360
> 
> 标签：java, datetime, date

我有两个日期时间值，我不知道如何比较它们。我知道如果我只有日期值，那么 before() 和 after() 方法会起作用，但我不知道 Datetime 值。我所做的一切都在下面请告诉我它是否正确？？如果它不是一个好方法并且有更好的选择，请指导我。

```
Date now = new Date();
DateTime currenttime = new DateTime(now, TimeZone.getTimeZone("IST"));
DateTime edate = e.getEnd().getDateTime();                 
if(currenttime.getValue()>edate.getValue())
{
       //here I want to do the logic to delete this event.         
} 
```

e 指的是谷歌日历的事件对象。我在这里要做的就是检查事件 e 是否超过今天的日期和时间。如果是，那么我想删除该事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:15:59.570

您可以使用 jdk Calendar 来获取和检查日期：

```
public boolean isDatePass(Date date) {
    Calendar calendar = Calendar.getInstance();

    // Getting day of year and year of checked date:
    calendar.setTime(date);
    int checkedYear = calendar.get(Calendar.YEAR);
    int checkedDay = calendar.get(Calendar.DAY_OF_YEAR);

    // Getting day of year and year of current date:
    calendar.setTime(new Date());
    int currentYear = calendar.get(Calendar.YEAR);
    int currentDay = calendar.get(Calendar.DAY_OF_YEAR);

    if(checkedYear != currentYear) {
        return checkedYear < currentYear;
    }

    return checkedDay < currentDay;

} 
```

对于尤达日期时间：

```
public boolean isDatePass(DateTime date) {
    // Getting day of year and year of checked date:
    int checkedYear = date.getYear();
    int checkedDay = date.getDayOfYear();

    // Getting day of year and year of current date:
    DateTime currentTime = new DateTime(now, TimeZone.getTimeZone("IST"));
    int currentYear = currentTime.getYear();
    int currentDay = currentTime.getDayOfYear();

    if(checkedYear != currentYear) {
        return checkedYear < currentYear;
    }

    return checkedDay < currentDay;

} 
```

不仅是天，还有时间：

```
public boolean isDatePass(DateTime date) {

    DateTime currentTime = new DateTime(now, TimeZone.getTimeZone("IST"));
    return date.isAfter(currentTime);
} 
```

更简单的解决方案（根据 javadoc 将 null 传递给 isAfter/isBefore 这意味着当前或现在）：

```
public boolean isDatePass(DateTime date) {
    return date.isAfter(null); // but it does not take in account time zone
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T06:02:05.540

```
public String deleteEvents() throws ParseException {
    try {

        boolean evtDelMsg = false;
        int iEvtCnt = 0;
        int totalEvents = lstEvents.size();

        System.out.println("events are :"+lstEvents.getItems().toString());

        if(lstEvents.size()>0)
        {
                for(Event e : lstEvents.getItems())
                {
                    System.out.println("startdate is "+e.getStart().toString());
                    Date now = new Date();                 

                   try
                   { 
                      if((new Date()).getTime() < e.getEnd().getDateTime().getValue())
                      {
                         evtDelMsg = EventManager.deleteEvent(getGoogleCalObj(), selectedCalId, e.getId());
                        iEvtCnt++; 
                      }
                   }
                   catch(NullPointerException npe)
                   {
                     System.out.println("edate is null so creating");
                     processImportedEventsData();
                   }
               }
        }
        else
        {
            System.out.println("no events in this calendar");
        }

        setInfoMsg("Successfully deleted " + iEvtCnt + " Events out of total " + totalEvents);

        createEventFlag = true;            
        processImportedEventsData();     

    } 
    catch (IOException ex)
    {
        Logger.getLogger(ManageCalendar.class.getName()).log(Level.SEVERE, null, ex);
    }       
    return null;
} 
```

这对我有用，我只是使用事件的长值，即“e”日期和时间，并与今天的日期时间进行比较。getValue() 方法以毫秒为单位返回长值。这让它变得有点简单。然后在循环中我删除了所有调用 EventManager 的 deleteEvent() 的事件。

# jquery - jquery如何调用onclick函数

> ID：10749269
> 
> 赞同：0
> 
> 时间：2012-05-25T06:05:12.267
> 
> 标签：jquery, jquery-ui

我有这样的jquery日历代码

```
<script>
$(document).ready(function() {
    $('#calTwo').jCal({
        day: new Date( (new Date()).setMonth( (new Date()).getMonth() + 2 ) ),
        days: 7,
        showMonths: 1,
        monthSelect:    true
    });
});
</script> 
```

在我的身体比赛中如下

```
<body>
<span id="calTwo"></span>
</body> 
```

上面的代码工作正常，但我的要求不是使用 span id 标签，而是需要使用文本字段并与文本字段相邻的一个日历图像。通过单击该图像日历应该会显示出来，无论我选择的日期应该显示在文本字段中。

我是 Jquery 新手，不知道如何实现这个功能有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:16:28.557

除了使用 jCal，您还可以使用 jQuery UI [datepicker](http://jqueryui.com/demos/datepicker/)

HTML：

```
Date: <input id="calTwo" type="text"></input>​ 
```

Javascript：

```
$(document).ready(function() {
    $('#calTwo').datepicker().option({"setDate": new Date()});
});​ 
```

示例： http: [//jsfiddle.net/YQ7k8/](http://jsfiddle.net/YQ7k8/) 该示例很丑，因为 jsfiddle 没有 jQuery UI css。看看[http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)看看它在正确的主题下的样子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:09:29.060

就像是：

```
<input id="calTwo" /> <img src="..." id="calTwoIcon" />

<script>
$('#calTwoIcon').click(function() {
    $('#calTwo').focus();
});
</script> 
```

那是你要找的吗？我刚刚放置了一个图像并分配了一个点击事件，在被调用时将聚焦日历输入，该输入应该会显示日历。或者你可以这样做`$('#calTwo').trigger('click');`。

# android - Android中的复选框选择错误？

> ID：10749272
> 
> 赞同：3
> 
> 时间：2012-05-25T06:05:23.250
> 
> 标签：android, list, listview, checkbox

在我的应用程序中，我正在选择要订购的商品。我的问题是如果我选中要订购的复选框，甚至还选中了另一个复选框。意味着如果我选择单个 Item ，则会检查两个 Item。

从 5 个项目开始，它被正确检查并显示在订购页面中。从第 6 项开始，如果我选择它会在订购页面中显示一些其他项目。

这是我的清单代码：

```
 public View getView(final int position, View convertView, ViewGroup parent) {
        View view = convertView;
        final ViewHolder viewHolder;
        if (view == null) {         
              view = inflater.inflate(R.layout.appetiserlistview, null);
            viewHolder = new ViewHolder();
            viewHolder.image=(ImageView)view.findViewById(R.id.appetiserimage);
            viewHolder.text = (TextView) view.findViewById(R.id.appetisertext);
            viewHolder.desc=(TextView)view.findViewById(R.id.appetiserdesc);
            viewHolder.price=(TextView)view.findViewById(R.id.appetiserprice);
            viewHolder.checkbox = (CheckBox) view.findViewById(R.id.bcheck);

            view.setTag(viewHolder);
        } else {
            viewHolder = (ViewHolder) view.getTag();
        }

        viewHolder.image.setImageBitmap(bmps[position]);

        viewHolder.price.setText(prices[position]);
        viewHolder.desc.setText(descs[position]);
        viewHolder.checkbox.setTag(itemnames[position]);
        ViewHolder holder = (ViewHolder) view.getTag();
        holder.text.setText(itemnames[position]);
        viewHolder.checkbox.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                if (((CheckBox) v).isChecked())
                {
                    arr.add(itemnames[position]);
                    itemprice.add(prices[position]);
                       image.add(bmps[position]);

                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:21:45.793

根据 listview 的行为，它不会在滚动时间 Inflayet 时保存其项目的状态，因此您应该使用布尔值数组来保持复选框的状态，

```
public class FriendListAdapter extends BaseAdapter {
    private LayoutInflater mInflater;
    private boolean isCheck[] = new boolean[Data.fbFriendList.size()];
 // Data.fbFriendList is arraylist contains data
    public FriendListAdapter() {

        mInflater = LayoutInflater.from(mContext);
        Arrays.fill(isCheck, Boolean.FALSE);
    }

    @Override
    public int getCount() {
        return Data.fbFriendList.size();
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(final int position, View convertView,
            ViewGroup parent) {
        View hView = convertView;
        if (convertView == null) {
            hView = mInflater.inflate(R.layout.friend_item, null);
            ViewHolder holder = new ViewHolder();
            holder.profile_pic = (ImageView) hView
                    .findViewById(R.id.profile_pic);
            holder.name = (TextView) hView.findViewById(R.id.name);
            holder.checkBox = (CheckBox) hView.findViewById(R.id.checkBox);
            hView.setTag(holder);
        }

        final ViewHolder holder = (ViewHolder) hView.getTag();

        if (isCheck[position]) {
            holder.checkBox.setChecked(true);
        } else {
            holder.checkBox.setChecked(false);
        }

        try {
            holder.profile_pic.setImageBitmap(Utility.model.getImage(
                    Data.fbFriendList.get(position).getFbFriendFBid(),
                    Data.fbFriendList.get(position)
                            .getFbFriendThumbImgUrl()));
            holder.name.setText(Data.fbFriendList.get(position)
                    .getFbFriendName());

        } catch (Exception e) {
            e.printStackTrace();
            holder.name.setText("");
        }

        holder.checkBox.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                if (holder.checkBox.isChecked())
                    isCheck[position] = true;
                else
                    isCheck[position] = false;
            }
        });

        return hView;
    }

}

class ViewHolder {
    ImageView profile_pic;
    TextView name;
    CheckBox checkBox;
} 
```

这里的 isCheck[] 是一个在 Adapter 类中用于保持复选框状态的布尔数组，而 Data.fbFriendList 是一个数组列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:23:13.817

`ListView` 它不仅是一个基本属性，`checkboxes`而且将具有`Edittext`与`other input controls`实际发生的相同的价值`list view`

仅创建正在显示的项目。

当您`scroll`创建新项目时，将根据先前的显示状态检查复选框以查看当前显示。 **解决方案1：** 创建一个`list`在其中`store the states of all checkboxes(or list items)`和调用`bindview() method`检查复选框的状态并根据列表检查和取消选中它们也创建`checkbox listener`以便`oncheckchange`事件更改列表中复选框（或列表项）的状态，这样您就可以获得解决方案

**解决方案2：**

如果您只需要一个复选框，那么您可以使用启用多项选择的 listview 属性

**编辑1：**

设置此属性

```
android:choiceMode="multipleChoice" 
```

对你来说 2

[点击链接](http://developer.android.com/reference/android/widget/ListView.html) 并[查看此属性](http://developer.android.com/reference/android/widget/AbsListView.html#CHOICE_MODE_MULTIPLE)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:44:10.150

您必须保存所有复选框的状态并相应地恢复它们。这是我已经发布的示例。如果您遇到任何问题，请告诉我。我会尽力帮助你。

检查此链接

[如何实现一个获取所有复选框状态并将选中项的值添加到arraylist的按钮？](https://stackoverflow.com/questions/10190083/how-to-implement-a-button-that-gets-all-checkboxs-state-and-adds-the-value-of-c/10191369#10191369)

# java - 将域分配给 IP 地址

> ID：10749276
> 
> 赞同：2
> 
> 时间：2012-05-25T06:05:34.337
> 
> 标签：java, http, sockets

如何让我的 Java 应用程序在某个套接字（例如 172.16.1.10:8080）上运行 HTTP 服务器并使其在网络上的另一台计算机连接到域（例如`http://myjavadomain.com`）时被重定向到套接字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:23:47.357

如果您使用的是 Apache Tomcat，那么以下配置将对您有所帮助。

Fot Apache Tomcat 您必须在 TOMCAT_HOME 位置的配置位置中的主机条目上进行。

请按照以下步骤对您有帮助

1）在文件中 2）的位置找到`server.xml`文件，使以下主机条目`conf``TOMCAT_HOME``server.xml`

```
<Host name="www.xyz.com" debug="0" appBase="webapps/mynewhost" unpackWARs="true" autoDeploy="true" xmlValidation="false" xmlNamespaceAware="false">
    <Logger className="org.apache.catalina.logger.FileLogger" directory="logs"  prefix="mynewhost_log." suffix=".txt" timestamp="true"/>
</Host>

In appBase property place the location of your web app 
```

3）现在在浏览器中打开上面的网址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:20:02.177

如果您想运行一个成熟的 HTTP 服务器，那么您可能需要使用一些外部库。例如，[Tomcat](https://en.wikipedia.org/wiki/Apache_Tomcat)是用 Java 编写的，但也有 SUN 的[httpserver 包](http://docs.oracle.com/javase/6/docs/jre/api/net/httpserver/spec/index.html)。如果它只是一个简单的套接字服务器，你可以使用 java.net 包中的内置类：

```
ServerSocket server = new ServerSocket(8080);

while (running) {
    Socket socket = server.accept();
    handleConnection(socket);
} 
```

这将侦听端口 8080 上的传入套接字连接，并`Socket`在客户端连接时创建一个新连接。然后，您可以通过`Socket`'`InputStream`和与客户端通信`OuputStream`，您可能会在单独的线程中执行此操作，以便您`ServerSocket`可以继续侦听来自其他客户端的传入连接。

至于您问题的第二部分：默认情况下，Web 浏览器将连接到端口 80，您可以通过多种方式进行端口转发。[本网站](http://www.cyberciti.biz/faq/linux-port-redirection-with-iptables/)提供了一种使用 iptables 的可能解决方案：

```
iptables -t nat -I PREROUTING --src 0/0 --dst 172.16.1.10 -p tcp --dport 80 -j REDIRECT --to-ports 8080 
```

但最简单的解决方案是在连接到您的机器时直接指定端口号，例如

```
http://myjavadomain.com:8080 
```

这是假设您的 DNS 已配置为已将 myjavadomain.com 解析为 172.16.1.10。

# php - kaching-php CakePHP2.0 的购物车插件配置问题

> ID：10749280
> 
> 赞同：0
> 
> 时间：2012-05-25T06:05:50.843
> 
> 标签：php, cakephp, cakephp-2.0, shopping-cart, cart

我做了以下步骤在我的 cakephp2.0 中配置 kaching-php 购物车插件。将插件放在 app/plugin 文件夹中并导入数据库。之后将 app/config/routes.php 中的数据替换为

```
<?php
include (APP . ‘plugins’ . DS . ‘kaching’ . DS . ‘config’ . DS . ‘routes.php’);
Router::connect(‘/’, array(‘plugin’=>’kaching’, ‘controller’ => ‘carts’, ‘action’ => ‘category’, ‘1’));
?> 
```

在这些配置之后，我得到了这个错误，无法打开流：没有这样的文件或目录然后我将上面的代码更改为

```
include (APP . 'Plugin' . DS . 'kaching' . DS . 'config' . DS . 'routes.php');
Router::connect('/', array('Plugin'=>'kaching', 'controller' => 'carts', 'action' => 'category', '1')); 
```

现在我收到此错误错误：找不到 CartsController。

请让我知道我们可以将这些插件与 cakephp2.0 一起使用，或者是否有任何其他购物车插件可以与我们的 cakephp2.0 网站集成。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:49:51.477

这是“插件”而不是“插件”，数组键区分大小写

尝试 ：

```
include (APP . 'Plugin' . DS . 'kaching' . DS . 'config' . DS . 'routes.php');
Router::connect('/', array('plugin'=>'kaching', 'controller' => 'carts', 'action' => 'category', '1')); 
```

希望这可以帮助！

# javascript - 停用列表的一个按钮/拇指

> ID：10749282
> 
> 赞同：0
> 
> 时间：2012-05-25T06:05:53.443
> 
> 标签：javascript, jquery, arrays, html-lists

我有一个视频数组，然后是与该数组对应的拇指列表。当您单击其中一个按钮时，需要在视频期间将其停用。我有它，以便在第一次单击后，它会停用整个列表

```
$('li', '.thumbs').on('touchend click', function() {
    $("#myVid").on("loadeddata", function() {
        $("#bigPic").addClass("move");
        $("#MyT").fadeOut(750);
    });
    playVideo2( $(this).index() );
    $('li', '.thumbs').unbind();
}); 
```

如果列表中的每个项目都是这样设置的：

```
<li rel='1' id="first">
    <div style="top:0px;">
        <img src="graphics/filler.png" alt="" width="280" height="128" />
    </div>
</li> 
```

每个人的 id 都不同，我可以只放 the`id`而不是 ，然后自己`.thumbs`拥有`unbind`或转动`off`它吗？我知道这一定是低效的，但我不知道该怎么做。我会`this()`以某种方式使用吗？如果是这样，*如何*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:21:43.333

您可以使用全局变量来检查正在播放的视频。

```
//init
var currentlyPlaying = undefined; 
```

在您的事件处理部分中，您将此变量设置为单击按钮的 ID。

```
currentlyPlaying = $(this).attr('id'); 
```

通过该设置，您可以在脚本中执行任何操作之前检查变量。

```
if ( !(currentlyPlaying == $(this).attr('id')) ) {
  // your script
} 
```

或者，您当然可以按照您的建议使用 ID 解除绑定。

```
$('li', '.thumbs #' + $(this).attr('id')).unbind(); 
```

# wcf - 如何在 Windows Phone 7 中将字节图像发送到服务？

> ID：10749283
> 
> 赞同：1
> 
> 时间：2012-05-25T06:05:53.787
> 
> 标签：wcf, windows-phone-7

```
void SendPost()
            {
                var url = "http://{ipaddress}/Network/Records/Registration?fname=tt&lname=tt&username=dddddddd&password=tt";

                HttpWebRequest myRequest = (HttpWebRequest)WebRequest.Create(url);
                myRequest.Method = "POST";
                myRequest.ContentType = "application/x-www-form-urlencoded";

                myRequest.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), myRequest);
    }
void GetRequestStreamCallback(IAsyncResult asynchronousResult)
        {
            HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
            System.IO.Stream postStream = request.EndGetRequestStream(asynchronousResult);
            string parametersString = "";

            byte[] byteArray = System.Text.Encoding.UTF8.GetBytes(str);
            // Write to the request stream.
            postStream.Write(byteArray, 0, byteArray.Length);
            postStream.Close();
            // Start the asynchronous operation to get the response
            request.BeginGetResponse(new AsyncCallback(GetResponseCallback), request);
}

 void GetResponseCallback(IAsyncResult asynchronousResult)
        {

                HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
                HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);
                Stream streamResponse = response.GetResponseStream();
                StreamReader streamRead = new StreamReader(streamResponse);
                string responseString = streamRead.ReadToEnd();
                // Close the stream object
                streamResponse.Close();
                streamRead.Close();
                // Release the HttpWebResponse
                response.Close();
} 
```

我编写了上面的代码以将图像作为字节发送。它没有给出任何错误。但是图像没有正确上传。我在下面的代码中传递 base64 图像字符串。

```
byte[] byteArray = System.Text.Encoding.UTF8.GetBytes(str); 
```

请告诉我出了什么问题。为什么图片无法正确上传？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:13:24.047

请参阅：[带参数的照片上传到 PHP 页面](https://stackoverflow.com/questions/10373250/photo-upload-with-parameters-to-a-php-page)

这： http: [//nediml.wordpress.com/2012/05/10/uploading-files-to-remote-server-with-multiple-parameters/](http://nediml.wordpress.com/2012/05/10/uploading-files-to-remote-server-with-multiple-parameters/)

# c# - MVC3 中的简单下拉列表

> ID：10749288
> 
> 赞同：0
> 
> 时间：2012-05-25T06:06:26.783
> 
> 标签：c#, asp.net-mvc-3

开发我的第一个 MVC3 应用程序。我有一个简单的视图，它有 2 个对象（对象 A，对象 B）。对象 B 是可选的。我已经创建了一个包含两个对象的模型，并且控制器工作得很好，将数据来回传递给视图。

我试图放入一个简单的 DropDownList 供用户决定是否要为对象 B 输入数据。下拉列表很简单 - 两个值“是”和“否”。
例如：继续“B”部分？
[是]
[否]

在视图上，用户填写对象 A 的所有表单项。然后，他们可以选择填写对象 B 的项目。如果他们想这样做，我希望他们选择“是”（我是当时使用 Jquery 显示更多页面）。

我的问题：如何制作一个简单的下拉列表（甚至是基本的 HTML 输入 type="select"...），在他们提交表单后我可以在控制器中访问？

在我的控制器中，我想做以下
事情： * 为对象 A做事
* 检查他们是否选择了是
* 为对象 B做事

像“是/否”下拉菜单这样简单的东西是否需要进入模型？它没有输入任何内容 - 它只是用户在视图中做出的决定。我知道必须有一种简单的方法来做到这一点（ViewBag？）但我是新手，显然迷路了。

TL;DR - 如何在可以在控制器中访问的视图上创建简单的下拉列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T13:06:27.283

在对象的 HTTPPOST 中从视图中获取值的经验法则是将输入控件的 id 和 name 属性命名为与 Models 属性名称相同。一个简单的方法是使用 Html 助手。

```
 public class Model
    {
        public Model()
        {
            List<SelectListItem> options = new List<SelectListItem>();
            options.Add(new SelectListItem { Value = true.ToString(), Text = "yes" });
            options.Add(new SelectListItem { Value = false.ToString(), Text = "no" });
            ContinueOptions = options;
        }
        public bool Continue { get; set; }
        public IEnumerable<SelectListItem> ContinueOptions { get; set; }
    } 
```

在您看来：

```
@Html.DropDownListFor(m => Model.Continue, Model.ContinueOptions) 
```

在您的控制器中：

```
[HttpPost]
public ActionResult Edit(Model model)
{
    bool continueOn = model.Continue;   

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:13:36.857

是的，您的下拉菜单应该是模型的一部分，否则控制器将无法从用户那里得到*Check 以查看他们是否选择了 Yes*的答案。

```
public SomeViewModel
{
  public ObjectA A { get; set; }
  public ObjectB B { get; set; }
  public bool? IsBSelected { get; set; }
} 
```

我通常使用`bool?`只是因为我想知道用户是否选择了其他选项，但使用`bool`也可以。

# ajax - jQuery AJAX 请求错误状态 0

> ID：10749293
> 
> 赞同：2
> 
> 时间：2012-05-25T06:06:51.077
> 
> 标签：ajax, jquery

我一直在本地开发应用程序，但在实际服务器上遇到了麻烦。

每当我使用 jQuery 提交 AJAX 请求时，它都会给我一个带有 error`status:0`和 and的错误`statusText: 'error'`。

Chrome 检查器甚至没有显示请求的响应代码，它只是说失败。

当我仔细检查它时，我注意到所有数据都已发送并且 PHP 文件实际处理了它。例如，在下面的请求中，确实创建了用户。错误的响应代码阻止了其他请求的执行（因为它们依赖于“成功”的响应）。

![](../Images/ff11ecbe074723f2ff5d0e8d8ed881bd.png)

这是一个示例请求：

```
var cct = $.cookie('ttc_csrf_cookie'); // csrf protection
var sUrl = "<?= base_url(); ?>user/create/";
var serialized = { 
    name: me.name, 
    email: me.email, 
    oauth_provider: 'facebook', 
    oauth_uid: me.id,
    ttc_csrf_token: cct
};
$.ajax({
    url: sUrl,
    type: "POST",
    data: serialized,
    error: function(someStuffHere) {
            //* THIS CODE RUNS. SHOWS ERROR STATUS: 0 */
    },
    success: function(user_id) {
        //******** THIS HERE NEVER RUNS ***********///    
    }
}); 
```

这是相应的PHP代码：

```
public function create() {
    if($this->input->post()) {
        $user['name'] = $this->input->post('name');
        $user['email'] = $this->input->post('email');
        $user['oauth_provider'] = $this->input->post('oauth_provider');
        $user['oauth_uid'] = $this->input->post('oauth_uid');
        $user['last_activity'] = date('Y-m-d H:i:s');

        $user_id = $this->Users->create_user($user);
        $this->session->set_userdata('user_id', $user_id);
        echo $user_id;
    }
} 
```

这两个片段只是一个例子。所有 AJAX 请求都不会在实时服务器上运行。

可能是什么？谢谢！

**更新：**我已经缩小范围，并且在回显结果时会出现问题。当我注释掉 echo 时，不会抛出任何错误（当然，不会发送任何结果）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:17:11.143

原来问题是由`compress_output`CodeIgniter 中的选项引起的。当它设置为 true 时，`echo`' 不起作用。感谢所有试图提供帮助的人！

# jsp - 请解释以下3种语句以及何时在jsp中使用它们？

> ID：10749294
> 
> 赞同：-1
> 
> 时间：2012-05-25T06:07:01.143
> 
> 标签：jsp

```
response.setHeader("Cache-Control","no-store"); 
response.setHeader("Pragma","no-cache"); 
response.setDateHeader ("Expires", 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:13:29.057

这些缓存控制设置可用于您不希望浏览器在本地存储内容的页面。大多数 Web 开发人员不想使用这些，因为它们可能会对性能产生负面影响。当您拥有大量动态资源时，您可能想要使用它的示例。

expires 标签告诉浏览器页面在渲染后过期。“因此，将 EXPIRES 设置为 0 可用于在每次访问时强制进行修改检查。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:17:48.963

需要设置相应的HTTP头属性，防止JSP页面输出的动态内容被浏览器缓存。您可以通过在 JSP 页面的开头执行以下 scriptlet 来防止它们被缓存在浏览器中来做到这一点。您需要这两个语句来处理一些较旧的浏览器版本。

```
<%
response.setHeader("Cache-Control","no-cache"); //HTTP 1.1
response.setHeader("Pragma","no-cache"); //HTTP 1.0
response.setDateHeader ("Expires", 0); //prevents caching at the proxy server
%> 
```

在 HTML 标头中使用 meta 标签也可以达到同样的效果：

```
<meta http-equiv="Pragma" content="no-cache">
 <meta http-equiv="Cache-Control" content="no-cache">
 <meta http-equiv="Expires" content="Thu, 01 Dec 2011 00:00:00 GMT"> 
```

您可以参考[此处](https://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers)了解更多信息。

# facebook - 我想获取用户访问令牌而不是应用程序访问令牌

> ID：10749302
> 
> 赞同：0
> 
> 时间：2012-05-25T06:07:51.617
> 
> 标签：facebook, facebook-access-token

我想获取用户访问令牌，因为我需要获取用户的帖子和评论。

当我使用 Graph API Explorer 时，它生成的访问令牌是正确的，它会显示我的帖子和评论以及其他一些数据。但是，当尝试使用此代码获取帖子和评论时，它不会返回我的帖子和评论，并且只返回一些我不需要的其他数据。

```
 require_once('facebook.php');

 $config = array(
    'appId' => '383128895071077',
    'secret' => '6a9ab479186f53db5c531a3fa5f91be0',
 );

$facebook = new Facebook($config);
$access_token = $facebook->getAccessToken();
$result = $facebook->api('/me/feed/', array('access_token' => $access_token)); 
```

我搜索了所有谷歌并通过不同方式获取访问令牌，但我无法获得我的帖子和评论。我一定是做错了什么，需要尽快解决。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:19:27.293

你应该检查这个例子 [Facebook php sdk 例子](https://github.com/facebook/php-sdk/blob/master/examples/example.php)

你应该检查我们是否有这样的用户访问令牌

```
 // Get User ID
    $user = $facebook->getUser();

    // We may or may not have this data based on whether the user is logged in.
    //
    // If we have a $user id here, it means we know the user is logged into
    // Facebook, but we don't know if the access token is valid. An access
    // token is invalid if the user logged out of Facebook.

    if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

// Login or logout url will be needed depending on current user state.
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl();
} 
```

一旦我们获得用户详细信息，您就可以确保用户已登录应用程序并授权该应用程序。

**对于提要，**
您应该具有[扩展权限](https://developers.facebook.com/docs/authentication/permissions/#extended_perms)read_stream

然后你可以阅读墙上的饲料。

# linux - apachectl start 找不到 httpd 但它在那里？

> ID：10749304
> 
> 赞同：0
> 
> 时间：2012-05-25T06:07:59.250
> 
> 标签：linux, apache, unix, installation, webserver

完全是 Unix 和 Apache 世界的新手。

刚刚通过 X-Win32 SSH 在远程服务器上配置并安装了 Apache（据我所知是成功的）。

在 bin 目录中，我看到列出了“httpd”。

要启动 Web 服务器，我提供了有关服务器状态的说明：

> 从您的安装 Apache 目录类型，'./bin/apachectl start'。

但是，我收到以下错误（11-14 只是显示它在那里）：

```
server.edu(11): ls
bin     cgi-bin conf    htdocs  icons   include libexec logs    man     proxy
server.edu(12): cd bin
server.edu(13): ls
ab              apxs            dbmmanage       htpasswd        logresolve
apachectl       checkgid        htdigest        httpd           rotatelogs
server.edu(14): cd ..
server.edu(15): ./bin/apachectl start
./bin/apachectl: apache/bin/httpd: not found
./bin/apachectl start: httpd could not be started 
```

任何帮助是极大的赞赏。

谢谢你！

**编辑**@h4b0

```
server.edu(98): pwd
/home/scf-25/gmcnulty/apache_1.3.42/apache

server.edu(99): ls -l bin/httpd
-rwxr-xr-x   1 gmcnulty     28880 May 24 22:12 bin/httpd 
```

**EDIT2** @h4b0

```
server.edu(102): ls
ab              apxs            dbmmanage       htpasswd        logresolve
apachectl       checkgid        htdigest        httpd           rotatelogs

server.edu(103): cd ../..

server.edu(104): ls
ABOUT_APACHE            NOTICE                  README                  cgi-bin                 htdocs
INSTALL                 NWGNUenvironment.inc    README-WIN.TXT          conf                    icons
LICENSE                 NWGNUhead.inc           README.configure        config.layout           logs
Makefile                NWGNUmakefile           WARNING-WIN.TXT         config.status           src
Makefile.tmpl           NWGNUtail.inc           apache                  configure

server.edu(105): ./apache/bin/apachectl start
fopen: No such file or directory
httpd: could not open error log file apache/apache/logs/error_log.
./apache/bin/apachectl start: httpd could not be started 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:18:14.577

*   检查权限`httpd`
*   `apache/bin/httpd`真的存在吗？`pwd`在第 11 行显示目录的输出

# entity-framework - 如何检查 DbContext.Set 存在于模型中？

> ID：10749307
> 
> 赞同：6
> 
> 时间：2012-05-25T06:08:13.307
> 
> 标签：entity-framework, ef-code-first, dbcontext

我有一种情况，我可能正在使用多个 DbContext，这些 DbContext 可能包含也可能不包含 SomeEntity 的 DbSet。

自然，如果我触发 SaveChanges 并且该实体不存在，则会发生以下错误：

> 实体类型 SomeEntity 不是当前上下文模型的一部分。

如何检查模型中是否存在实体或实体集，如果不存在则将有问题的代码短路？

理查德

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-26T15:53:21.290

调用时应立即抛出异常，`Set<NotMappedEntityType>`因此最简单的方法是捕获异常并根据需要进行处理。

复杂的解决方案要求您浏览映射元数据并搜索必须与 CLR 类型同名的映射实体类型。您可以在派生的上下文类中添加此方法来检查实体类型的存在：

```
public bool Exists<TEntity>() where TEntity : class
{
    string entityName = typeof(TEntity).Name;
    ObjectContext objContext = ((IObjectContextAdapter)this).ObjectContext;
    MetadataWorkspace workspace = objContext.MetadataWorkspace;
    return workspace.GetItems<EntityType>(DataSpace.CSpace).Any(e => e.Name == entityName);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-04T19:12:32.827

EF Core 2.x 更新扩展方法：如果不存在则返回 NotFound，如果模型上定义了实体 TEntity，则返回 DbSetType 或 ViewType。

```
 public enum QueryType
    {
        DbsetType,
        ViewType,
        NotFound
    }

    public static class DbContextExtensions
    {
        public static QueryType GetQueryType<TEntity>(this DbContext context) where TEntity : class
        {
            var metaData = context.Model.FindEntityType(typeof(TEntity));

            if (metaData == null)
                return QueryType.NotFound;

            return metaData.IsQueryType ? QueryType.ViewType : QueryType.DbsetType;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-11T14:15:43.440

这是我的简化答案：

```
public partial class MyDbContext : DbContext
{
   public bool Exists<Tx>() where Tx : class
   {
       var attachedEntity = this.ChangeTracker.Entries<Tx>().FirstOrDefault();
       return (attachedEntity != null);
   }
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-09-03T16:16:15.537

我经常使用以下实现。

（我已在上下文类实现的单独接口中声明了此方法。）

```
public bool EntitySetExists<T>(T entity) where T : class
{
    return this.Set<T>().Local.Any(e => e == entity);
} 
```

如果在这种情况下您看到它抱怨“Any()”扩展方法，只需坚持“使用 System.Linq;” 如果丢失。

# php - 如何从请求 URI 中删除版本前缀并使用正确的文档根？

> ID：10749308
> 
> 赞同：3
> 
> 时间：2012-05-25T06:08:22.073
> 
> 标签：php, apache, .htaccess, mod-rewrite

我们需要支持几个主要和次要版本的 web 服务，所以我们决定在 URL 中使用这样的版本：

```
http://service/ # 上次部署的服务版本
http://service/1/ # 指向最后部署的主要版本 1.x 的符号链接
http://service/1.2/ # 指向最后部署的次要版本 1.2.x 的符号链接

```

我们将所有标签存储在文件夹中，并将符号链接到正确的版本：

```
这里是apache的根目录：
lrwxr-xr-x 1 xxxx xxxx 28 May 23 15:21 1 -> /home/site/tags/20120523084844-HEAD
lrwxr-xr-x 1 xxxx xxxx 28 Apr 27 15:21 1.1 -> /home/site/tags/20120427152123-HEAD
lrwxr-xr-x 1 xxxx xxxx 28 May 23 08:48 1.2 -> /home/site/tags/20120523084844-HEAD
lrwxr-xr-x 1 xxxx xxxx 28 May 24 16:12 2 -> /home/site/tags/20120524161232-HEAD
（此处为上次部署版本的源代码）
......

```

这里有一个问题，因为我们将在 PHP 的 REQUEST_URI 中有版本前缀，而 Symfony 路由器不会将它与模式匹配。我们怎样才能削减那个版本前缀，但仍然使用特定目录作为文档根目录？

例如，当我们向`http://service/1.2/some/handler/pattern`1.2 目录中的 then 代码发出请求时，PHP 中的 REQUEST_URI 将是 /some/handler/pattern

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:59:02.250

这是一个有趣的问题。

我认为它不能只用 htaccess 来完成，至少不能没有丑陋的黑客。REQUEST_URI 始终保存原始请求，据我所知，无法对其进行编辑（如果我们尝试通过 E=REQUEST_URI="something" 将内容分配给变量 REQUEST_URI，那么将创建一个名为“REDIRECT_REQUEST_URI”的环境变量）。

我对 Symfony 不熟悉，所以我不知道编辑处理路由的脚本有多容易。如果这很容易，你可以做类似的事情

```
RewriteRule ^[1-9.]/(.*)$ - [R,QSA,NC,E=HANDLER:$1] 
```

然后在 PHP 中，您可以将处理程序复制到 request_uri：

```
$_SERVER['REQUEST_URI'] = $_SERVER['REDIRECT_HANDLER']; 
```

除了像这样更改 PHP，我只能想到这个：首先硬重定向到处理程序，将版本信息放在查询字符串中。然后捕获该请求，并软重定向到版本/处理程序。Request_uri 将被正确设置，但它很丑陋并且非常容易出错。

也就是说，我完全同意 Gerben 关于使用子域进行版本控制的观点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T19:33:59.760

尝试这个：

```
RewriteEngine On
RewriteBase /

RewriteCond $1 !^[0-9.]+/
RewriteRule ^(.*) /1.2/$1 [L] 
```

唯一的想法是您一次只能测试版本，如果您想要不同的版本，则必须更改 htaccess。

我可以建议使用子域进行版本控制吗？

# sql - Sql查询输入的记录是否是当天的第一条记录

> ID：10749309
> 
> 赞同：-2
> 
> 时间：2012-05-25T06:08:28.000
> 
> 标签：sql, sql-server

假设我们有一个表，其中包含 UserID 、日历日期和 taskName 作为列。

请让我知道，从 sql 查询我们是否可以找到对于用户 id 是否是当天在表中输入的第一条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:11:36.577

计算表中的记录数

```
declare @count int
select @count=count(*) from table where 
      convert(Varchar,CalendarDate,111)=Convert(Varcar,GetDate(),111) 
      and UserID=@userid
if @count = 1
begin
   print 'first record'
end 
```

如果计数 > 1 比它的第一个记录和如果 1 比它的第一个记录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:12:48.180

```
 Select count(*)  from table where userid =:userid and date =current_date 
```

如果您想在插入后检查输入的记录是不是首先在插入之后运行，否则在插入之前运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T06:13:41.147

如果表在同一天包含多个用户的记录，则必须忽略时间部分。

```
Select Count(*) From <TableName> Whre convert(Varchar,CalendarDate,111)=Convert(Varcar,GetDate(),111) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T06:58:43.577

您可以在此处使用窗口函数[ROW_NUMBER()](http://msdn.microsoft.com/en-us/library/ms186734.aspx)。

```
SELECT  UserID, 
        CalendarDate, 
        TaskName,
        ROW_NUMBER() OVER(PARTITION BY UserID, DATEADD(DAY, 0, DATEDIFF(DAY, 0, CalendarDate)) ORDER  BY CalendarDate, TaskName) AS RowNumber
FROM    T 
```

或者，如果您有 SQL-Server 2008 或更高版本：

```
ROW_NUMBER() OVER(PARTITION BY UserID, CAST(CalendarDate AS DATE) ORDER  BY CalendarDate, TaskName) AS RowNumber 
```

这样做是为 UserID 和 CalendarDate 的每个组合（删除时间部分）分配它自己的按日期顺序递增的序列（剩余时间部分，然后是任务名称）。`PARTITION BY`告诉`ROW_NUMBER`函数何时再次从 1 开始（即新日期或新用户 ID），然后该`ORDER BY`部分告诉`ROW_NUMBER`如何对序列进行排序。例如

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T06:58:58.960

> 选择 case when ((select count(*) from table where convert(Varchar,calendardate,111)=Convert(Varchar,GetDate(),111) and userid=(your userid))>0) then 1 else 0 end

# c - 从同一个dll调用多个函数

> ID：10749310
> 
> 赞同：0
> 
> 时间：2012-05-25T06:08:29.263
> 
> 标签：c, windows, winapi, dll

这可能是一个简单的问题。我在 SO 中搜索了答案，但找不到要查找的内容，这就是我在这里发布问题的原因。以下是我的疑问，

我正在开发一个使用 Windows 默认 dll 的应用程序。我正在使用来自同一个加载的 dll 的多个函数。例如：

```
HINSTANCE hinstLib;
hinstLib = LoadLibrary( "Crypt32.dll" ); 
```

稍后使用以下代码导出函数：

```
CertOpenStore = (fptr1)GetProcAddress(hinstLib, "CertOpenStore"); 
```

现在我想使用同一个 dll 中的另一个函数。在这种情况下，我将如何执行上述操作：

```
CertAddEncodedCertificateToStore(CertOpenSystemStore(0,"TrustedPublisher"),PKCS_7_ASN_ENCODING |X509_ASN_ENCODING,pbEncodedCert,dwSize,CERT_STORE_ADD_REPLACE_EXISTING,NULL); 
```

两者都`CertAddEncodedCertificateToStore`属于`CertOpenSystemStore`同一个dll？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T06:24:41.037

就像你之前做的一样，但函数名称不同：

```
fptr1 OtherFunc = GetProcAddress(hinstLib, "OtherFunc"); 
```

# objective-c - iPad 分体式键盘

> ID：10749311
> 
> 赞同：9
> 
> 时间：2012-05-25T06:08:34.817
> 
> 标签：objective-c, ipad, keyboard-events

我正在创建一个类似于 iPad 的 iMessage 应用程序的应用程序，它可以发送消息。因此，当显示键盘时，消息视图和输入附件视图的底部有一个输入视图。此外，当键盘在停靠或未停靠时显示时，必须正确调整消息视图的大小。

我遇到的问题是来自 UIKeyboardWillChangeFrameNotification 的通知数据不一致。

首先，用户可以通过 3 种方式取消键盘连接：

1.  按住右下键，然后向上滑动
2.  长按右下键，弹出菜单时选择“取消停靠”
3.  长按右下键，弹出菜单时选择“拆分”

对于案例 #1，来自 UIKeyboardWillChangeFrameNotification 的通知数据是一致的。这是数据：

```
userInfo = {
    UIKeyboardFrameBeginUserInfoKey = "NSRect: {{0, 0}, {768, 304}}";
} 
```

对于案例 #2 和 #3，数据不一致，这是我收到的：

```
userInfo = {
    UIKeyboardAnimationCurveUserInfoKey = 0;
    UIKeyboardAnimationDurationUserInfoKey = "0.25";
    UIKeyboardBoundsUserInfoKey = "NSRect: {{0, 0}, {768, 304}}";
    UIKeyboardCenterBeginUserInfoKey = "NSPoint: {384, 872}";
    UIKeyboardCenterEndUserInfoKey = "NSPoint: {384, 1136}";
    UIKeyboardFrameBeginUserInfoKey = "NSRect: {{0, 0}, {768, 304}}";
    UIKeyboardFrameChangedByUserInteraction = 0;
    UIKeyboardFrameEndUserInfoKey = "NSRect: {{0, -264}, {768, 304}}";
} 
```

奇怪的是，当我在案例 #2 或 #3 下监听 UIKeyboardDidChangeFrameNotification 时，数据按预期输入：

```
userInfo = {
    UIKeyboardFrameBeginUserInfoKey = "NSRect: {{0, 0}, {768, 304}}";
} 
```

为什么通知数据不同？有没有人找到一种明确的方法来检测拆分键盘事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-10T09:35:32.850

没有明确的方法没有。

我在接下来的步骤中解决了这个问题：

1.  获取当前方向。
2.  如果方向是横向，那么我得到UIKeyboardFrameEndUserInfoKey 的**高度**。必须等于216。表示键盘是Split mode，否则不是；
3.  如果方向是纵向，那么我得到UIKeyboardFrameEndUserInfoKey 的**高度**。必须等于216。表示键盘是Split mode，否则不是；

例如，我更新了我的[要点。](https://gist.github.com/bimawa/5963666)使用 convertRect 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-15T00:09:51.260

这是确定键盘是否拆分的一种有点笨拙但可靠的方法。

```
NSArray *classPath = @[
  @"KeyboardAutomatic",
  @"KeyboardImpl",
  @"KeyboardLayoutStar",
  @"KBKeyplaneView",
  @"KBSplitImageView"
];
UIView *splitView = textField.inputAccessoryView.superview;
for (NSString *className in classPath) {
  for (UIView *subview in splitView.subviews) {
    if ([NSStringFromClass([subview class]) rangeOfString:className].location != NSNotFound) {
      splitView = subview;
      break;
    }
  }
}
BOOL isSplit = [splitView.subviews count] > 1; 
```

显然，为了让它工作，你需要一个非零的 UITextField/UITextView `inputAccessoryView`（你可以只使用一个空视图）。

*注意：*的行为`textField.inputAccessoryView.superview`非常挑剔，通常取决于在调用 之前已经显示过一次键盘`superview`。此外，为了通过 App Store 提交过程，我从私有类名中删除了“UI”前缀。这并不能保证 Apple 不会标记您的应用程序，但这种方法以前已经成功使用过。

我只在 iOS7 上测试过它，但如果它在其他版本的 iOS 上不起作用，可以使用类似的方法。

# php - 为文件上传创建进度条并将其移动到亚马逊服务器

> ID：10749313
> 
> 赞同：1
> 
> 时间：2012-05-25T06:08:36.593
> 
> 标签：php, amazon-s3

我正在开发 PHP 中的图像上传功能，我将在上传时显示上传进度条**`swfuploader`**。但问题是上传图片后，我正在创建上传图片的缩略图（这将需要一些协商时间）并将原始图片移动到亚马逊服务器。但是显示的进度条仅用于上传到我们的服务器，而不是用于上传到亚马逊服务器。我需要的是一种显示进度条的方法，其中还应该包括将图像移动到*亚马逊服务器*。对此的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:56:14.787

[Pipe Viewer](http://www.ivarch.com/programs/pv.shtml)可让您监控几乎所有流程的进度。

从中您可以将进度输入到您选择的显示中，我建议使用[jQuery Progress Bar](http://docs.jquery.com/UI/Progressbar)，因为它非常通用，易于设置并且有大量示例教程以防您遇到困难

# android - 将 TextView 添加到 scrollView 内的布局

> ID：10749315
> 
> 赞同：2
> 
> 时间：2012-05-25T06:08:40.697
> 
> 标签：android, layout, textview, scrollview

我`LinearLayout`在文件`ScrollView`中有一个。`xml`我需要在里面绘画和写作，`ScrollView`所以我在里面创建了一个`view`并且`layout`已经能够在里面绘画和写作使用：`canvas.draw()`并且`canvas.drawText()`，我的问题是在写文字时`canvas`没有清楚的字母，所以我需要添加一个`TextView`到`layout`的，不知道`ScrollView`该`class`怎么做。粘贴代码：

```
public class Calendario extends Activity{
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.calendar);        
        LinearLayout layout = (LinearLayout) findViewById(R.id.layout);
        MyView v = new MyView(this);
        layout.addView(v,250,2000);
     }

    private class MyView extends View{
        public MyView(Context context) {
            super(context);
        }
        protected void onDraw(Canvas canvas) {
            onDrawMethod();
            //Here draw and write text//
        }
     }
} 
```

![我只需要在里面添加文本视图](../Images/e0517ff9d2880f71e3afb84827565dbe.png) 我需要的图片：我只需要在谢谢里面添加文本视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:59:22.810

据我了解，您想以编程方式添加这些文本，方法是说

> 所以我需要在类的 ScrollView 的布局中添加一个 TextView

如果是这样，也许这篇 [文章](https://stackoverflow.com/questions/2395769/how-to-programmatically-add-views-to-views)会对你有所帮助。

# ruby-on-rails - Searchlogic 大数据搜索

> ID：10749316
> 
> 赞同：0
> 
> 时间：2012-05-25T06:08:43.520
> 
> 标签：ruby-on-rails

如何在大数据（3,000+ 条记录）中优化 Searchlogic 的搜索？

我在搜索具有 3,000 条记录且仅搜索用户名称的用户时遇到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:05:12.163

可能你想看看如何优化你的数据库。您可以为用户模型的可搜索列（存在于 WHERE SQL 子句中的列）创建索引。还要确保您不急于加载对象并仅选择所需的列而不是 SELECT * 子句。

# java - 创建一个类以从 derby 数据库中获取值

> ID：10749319
> 
> 赞同：1
> 
> 时间：2012-05-25T06:08:58.890
> 
> 标签：java, arrays, derby

我创建了一个类来连接到 derby 数据库。在程序中，我创建了表格并插入了一些水果名称作为值。我只是想知道如何创建另一个类来获取新数组中的水果名称值。

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.Statement;

public class FruitDatabase {

    public static void main(String[] args) throws Exception {
        Connection conn = getConnection();
        Statement stmt = conn.createStatement();

        stmt.executeUpdate("drop table fruit");
        stmt.executeUpdate("create table fruit (name CHAR(15))"); 
        stmt.executeUpdate("INSERT INTO fruit(name)VALUES('Apple')"); 
        stmt.executeUpdate("INSERT INTO fruit(name)VALUES('Orange')");
        stmt.executeUpdate("INSERT INTO fruit(name)VALUES('Banana')");
        stmt.executeUpdate("INSERT INTO fruit(name)VALUES('Pineapple')");
        stmt.executeUpdate("INSERT INTO fruit(name)VALUES('Mango')");
        stmt.executeUpdate("INSERT INTO fruit(name)VALUES('Kiwi')");
        stmt.executeUpdate("INSERT INTO fruit(name)VALUES('Grape')");
        stmt.executeUpdate("INSERT INTO fruit(name)VALUES('Strawberry')");
        stmt.executeUpdate("INSERT INTO fruit(name)VALUES('Pear')");
        stmt.executeUpdate("INSERT INTO fruit(name)VALUES('Peach')");
        ResultSet rs = stmt.executeQuery("SELECT * FROM fruit"); 
        outputResultSet(rs);

        rs.close();
        stmt.close();
        conn.close();
    }

    private static void outputResultSet(ResultSet rs) throws Exception {
        ResultSetMetaData rsMetaData = rs.getMetaData();
        int numberOfColumns = rsMetaData.getColumnCount();
        for (int i = 1; i < numberOfColumns + 1; i++) {
            String columnName = rsMetaData.getColumnName(i);
            System.out.print(columnName + "   ");

        }
        System.out.println();
        System.out.println("----------------------");

        String array [] = new String [numberOfColumns + 1];

        while (rs.next()) {
            for (int i = 1; i < numberOfColumns + 1; i++) {
                array[i] = rs.getString(i);
                System.out.println(array[i]);
            }

        }

    }

    private static Connection getConnection() throws Exception {
        Class.forName("org.apache.derby.jdbc.EmbeddedDriver");
        String url = "jdbc:derby:MyDbTest;create=true";
        return DriverManager.getConnection(url);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:50:13.690

将`array`您声明为私有变量，在静态块中对其进行初始化，并为其添加 getter 和 setter 方法。这里没有使用getter-setter，但这只是为了您的理解。

*FruitDatabase.java*

```
public class FruitDatabase {
    private static String[] array;

    public static String[] getArray() {
        return array;
    }

    public static void setArray(String[] arr) {
        array = arr;
    }

    public static void main(String[] args) throws Exception {
    ...
    }

    private static void outputResultSet(ResultSet rs) throws Exception {
    ... 
    while (rs.next()) {
            for (int i = 1; i < numberOfColumns + 1; i++) {
                array[i] = rs.getString(i);
                System.out.println(array[i]);
            }
    setArray(array);
    ....
    }
    ....
} 
```

然后从另一个类（假设 Display.java），你需要创建这个类的一个对象，然后你可以访问这个数组：

*显示.java*

```
public class Display {
    public static void main(String[] args) {
        String[] newArr = new String[FruitDatabase.getArray().length];
    int i=0;
    for(String s : FruitDatabase.getArray()){
        System.out.println(s);
            newArr[i++]=s;
    }
    }
} 
```

# url - Azure 域 url 未显示我的页面路由

> ID：10749322
> 
> 赞同：3
> 
> 时间：2012-05-25T06:09:20.387
> 
> 标签：url, azure, routing

我在尝试设置我的网站的 URL 时遇到问题。该项目基于 mvc azure。

通常 azure 的 URL 如下：`xyz.cloudapp.net`所以当我设置我的网站时，我添加了一个指向 azure 项目的域。`www.xyz.com`.

问题是，如果我尝试单击“联系”或“关于”按钮，我希望浏览器上的 URL 显示为`www.xyz.com/about`and `www.xyz.com/Contact`。但是每当我点击 about 或 contact 按钮时，浏览器 URL 仍然显示为`www.xyz.com`.

我的网站上有 50 多个页面，但 Google 仅将其作为一个索引。有人可以告诉我如何让这个 URL 显示我正在路由的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:19:47.573

使用域控制面板，可以使用 cname 或 A 记录进行路由。使用 Url 路由 "/Contact" 确保 "/"

对于 A 记录，使用 Azure 生产 VIP 并输入两个记录。一个主机名 null(xyz.com)，两个主机名 www(www.xyz.com)。也可能是您想要的名称（my.xyz.com）。

对于 cname，唯一的区别是不要使用 VIP。而是使用 xyz.cloudapp.net

对所有这些进程使用域控制面板。

[示例 Azure 网址](http://eticaret.cloudapp.net/)

[示例 Cname 网址](http://www.networklifecard.com/)

[DNS 检查](http://www.intodns.com/networklifecard.com)见文件末尾 WWW A 记录

# vba - 将单元格范围与列中的条件连接起来

> ID：10749323
> 
> 赞同：0
> 
> 时间：2012-05-25T06:09:24.597
> 
> 标签：vba, concatenation

我需要有关 vba 连接单元格的帮助。

我有一个电子表格：A 列包含一些值，例如 Product A 代表几行，Product B 代表几行，等等。我想连接，比如产品 A 的 BJ 列中的单元格，将值写入 K 列或其他工作表，然后对产品 B 执行相同的操作，依此类推，直到电子表格结束。

我认为这需要一些我正在学习的 vba 编码，但还不能很好地完成这项工作。请帮忙！

谢谢你，cj

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:10:44.823

我阅读它是因为您希望将单列中的所有内容放入另一个单元格中。这是一个例程，它将从您指定的单元格中获取所有数据，并将所有内容连接起来，直到数据中断

```
Option Explicit

Function ColConc(CellRef As Range, Delimiter As String)

Dim LoopVar As Long
Dim StartRow As Long
Dim EndRow As Long
Dim Concat As String
Dim Col As Long

Col = CellRef.column
StartRow = CellRef.Row
EndRow = CellRef.End(xlDown).Row

Concat = ""

For LoopVar = StartRow To EndRow
    Concat = Concat & Cells(LoopVar, Col).Value
    If LoopVar <> EndRow Then Concat = Concat & Delimiter
Next LoopVar

ColConc = Concat
End Function 
```

使用公式调用`=ColConc(A2," ")`，这将获取从单元格 A2 到该列末尾的所有内容，并以空格作为分隔符。
分隔符可以是任何字符串，因此您可以在数据之间放置任何内容。空白单元格结束用于连接成单个字符串的数据。
它仅适用于当前工作表 - 需要更多编码才能使该部分正常工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T13:19:42.910

> > > 我认为这需要一些 vba 编码

不，你不需要 vba :)

把这个公式放到K1里面拖下来

```
=B1&" "&C1&" "&D1&" "&E1&" "&F1&" "&G1&" "&H1&" "&I1&" "&J1 
```

这将连接数据`SPACE`作为分隔符。如果您不想要空间，则将上述公式修改为

```
=B1&C1&D1&E1&F1&G1&H1&I1&J1 
```

同样，如果您想连接 with`COMMA`作为分隔符，请使用此

```
=B1&", "&C1&", "&D1&", "&E1&", "&F1&", "&G1&", "&H1&", "&I1&", "&J1 
```

等等...

# c# - 如何在也是数据绑定的代码中创建平铺图像？

> ID：10749325
> 
> 赞同：1
> 
> 时间：2012-05-25T06:09:41.993
> 
> 标签：c#, .net, wpf, data-binding

当前在代码隐藏中，我动态创建 WPF Image 控件并将源绑定到自定义数据绑定。这最终将被添加到网格中以提供背景图像：

```
Image myImage = new Image();
myImage.Stretch = Stretch.UniformToFill;
myImage.SetBinding(Image.SourceProperty, myBinding); 
```

问题是我想平铺这个图像，所以我能找到的唯一方法是创建一个 ImageBrush 并设置 TileMode 属性。但是没有“SetBinding”功能，那我该如何完成我需要的呢？

```
ImageBrush myBrush = new ImageBrush();
myBrush.TileMode = TileMode.Tile;
// Can't do this!
myBrush.SetBinding(ImageBrush.SourceImageProperty, myBinding); 
```

有没有其他方法可以在代码隐藏中平铺这样的图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T09:13:11.767

您无需更改任何内容，只需使用 BindingOperations：

```
BindingOperations.SetBinding(myBrush, ImageBrush.ImageSourceProperty, myBinding); 
```

您需要定义视口并用画笔填充视口：

```
MyBrush.Viewport = new Rect(0, 0, 0.1, 0.1);
// Create a rectangle and paint it with the ImageBrush.
Rectangle rec = new Rectangle();
rec.Stroke = Brushes.LimeGreen;
rec.StrokeThickness = 1;
rec.Fill = MyBrush; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:55:18.880

我试过以下。在调试模式下，VisualBrush 的属性设置正确。当然，图像显示为拉伸图像。不知道为什么。希望能帮助到你。

财产

```
 public TileMode Mode { get; set; } 
```

绑定

```
 VisualBrush myBrush = new VisualBrush();

        Uri uri = new Uri("picture.png", UriKind.RelativeOrAbsolute);
        ImageSource src = new BitmapImage(uri);
        myBrush.Visual = new Image() { Source = src };

        this.Mode = TileMode.Tile;

        Binding bind = new Binding() { Source = Mode };
        BindingOperations.SetBinding(myBrush, VisualBrush.TileModeProperty, bind);

        this.Background = myBrush; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:52:02.940

我不喜欢代码隐藏，所以我很难快速编写代码隐藏示例。
这是标记示例：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>

    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>

    <Grid.Background>
        <ImageBrush ImageSource="Sample.jpg" TileMode="Tile" Viewport="0,0,0.5,0.5"/>
    </Grid.Background>
</Grid> 
```

`ImageSource="Sample.jpg"`您可以编写任何绑定表达式，而不是硬编码图像 ( )： `ImageSource="{Binding MyBackgroundImageUri}"`.

# sql - SQL Server算术溢出错误将表达式转换为数据类型int

> ID：10749326
> 
> 赞同：2
> 
> 时间：2012-05-25T06:09:43.083
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我有一个触发器，它在将记录插入表后执行。触发器基本上，调用一个函数并将值从插入传递到它。但是，虽然它有时有效，但我也不断收到以下错误：

```
Msg 8115, Level 16, State 2, Procedure UpdateNabersRating, Line 17
Arithmetic overflow error converting expression to data type int. 
```

触发器如下：

```
UPDATE BMS_Snapshot SET
    NABERS = dbo.SetmetricsNABERSCalculation(
        60,
        tbl.NetFloorArea,
        tbl.ElectricityCumulative,
        tbl.GasCumulative,
        tbl.ElectricityCumulativeMax,
        tbl.GasCumulativeMax,
        tbl.ElectricityMaxTotal,
        tbl.GasMaxTotal,
        tbl.NaturalGasConversionCubicMetersToMJ,
        tbl.SuburbId)
FROM
    (SELECT 
        Snap.SnapshotId AS SnapshotId,
        Snap.ElectricityCumulative AS ElectricityCumulative,
        Snap.GasCumulative AS GasCumulative,
        Building.NetFloorArea AS NetFloorArea, 
        Building.NABERSElecTotalMax AS ElectricityMaxTotal,
        Building.NABERSGasTotalMax AS GasMaxTotal,
        Building.NABERSExpiry As Expiry,
        NABERSTarget.ElecCumulativeMax AS ElectricityCumulativeMax,
        NABERSTarget.GasCumulativeMax AS GasCumulativeMax,
        [State].NaturalGasConversionCubicMetersToMJ AS NaturalGasConversionCubicMetersToMJ,
        Suburb.SuburbId AS SuburbId
     FROM inserted AS Snap 
        INNER JOIN AST_Building AS Building ON Snap.BuildingId = Building.BuildingId
        INNER JOIN ESD_Suburb AS Suburb ON Building.SuburbId = Suburb.SuburbId
        INNER JOIN ESD_State AS [State] ON Suburb.StateId = [State].StateId
        INNER JOIN AST_NABERSTarget NABERSTarget ON Snap.BuildingId = NABERSTarget.BuildingId AND
            Snap.TimeStamp = NABERSTarget.Timestamp
        /*Where Snap.SnapshotId IN (Select inserted.SnapshotId FROM inserted)*/) AS tbl
WHERE tbl.SnapshotId = BMS_Snapshot.SnapshotId AND BMS_Snapshot.Range = 1 
```

我一直在玩它一段时间，但似乎无法解决这个问题，特别是考虑到它有时会起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:27:22.047

将函数的参数更改为 FLOAT，而不是两个参数的 INT。

# silverlight - 创建集线器，如过滤器 Windows Phone 7.5

> ID：10749327
> 
> 赞同：1
> 
> 时间：2012-05-25T06:09:51.720
> 
> 标签：silverlight, windows-phone-7, filter

我有一个包含一些字符串的列表。我想创建过滤器，就像人员中心（或程序菜单）一样，按首字母过滤。如何为列表创建这样的东西？ ![在此处输入图像描述](../Images/46f01440e23c3691aad9100e7f95c9f1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:37:02.453

使用[Silverlight 工具包](http://silverlight.codeplex.com/releases/view/75888)`LongListSelector`中的。

[在http://www.windowsphonegeek.com/articles/LongListSelector-walkthrough](http://www.windowsphonegeek.com/articles/LongListSelector-walkthrough)有一个很棒的演练

# c# - 检测 JSON 中空属性和省略属性之间的区别

> ID：10749334
> 
> 赞同：1
> 
> 时间：2012-05-25T06:10:57.967
> 
> 标签：c#, .net, json, rest, datacontractjsonserializer

我有一个 RESTful 网络服务，它接收 JSON 并使用 DataContractJsonSerializer 将其反序列化为 ac# 类，尽管这可以更改。

其目的是更新资源上的字段

例如：

```
{
    "firstName" : "Martin"
} 
```

我不一定要更新所有字段，我希望找到一种方法来检测 JSON 中未指定和未指定的字段。

但是，我找不到执行此操作的方法，因为我不知道如何区分未指定字段和应更新为 null 的字段

例如：（不要更新任何字段）：

```
{} 
```

vs：（将 firstName 字段更新为 null）

```
{
    "firstName" : null
} 
```

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:44:41.243

我认为您可以使用用一些随机字符串初始化的字段

```
public class TestClass
{
    public string firstName = "some string";
} 
```

如果您使用 反序列`{"firstName" : null}`化，则 firstName 将为空。如果您使用`{}`firstName 反序列化不会改变 ( `some string`)

PS：如果您使用 DataContractJsonSerializer，请不要使用`DataContract`or属性`DataMember`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:26:55.277

我不确定谁在使用您的网络服务，但这听起来像是您应该决定然后告诉您的消费者它是如何工作的（而不是依靠消费者来做正确的事）。我认为说所有字段都*可以*或*不能*设置为 null 是不明智的，因此每个实例的处理方式都不同。

# c - 为什么 C 变量存储在特定的内存位置？

> ID：10749335
> 
> 赞同：7
> 
> 时间：2012-05-25T06:10:58.030
> 
> 标签：c

昨天我有一次面试，面试官问我存储变量的存储类。

我的回答战争：

```
Local Variables are stored in Stack.       
Register variables are stored in Register
Global & static variables are stored in data segment.  
The memory created dynamically are stored in Heap. 
```

他问我的下一个问题是：*为什么它们会存储在那些特定的内存区域中？*为什么`Local variable` **没有**被存储`register`（尽管我需要`auto`在我的程序中非常频繁地使用一个变量）？或者为什么全局或静态变量被`not`存储在`stack`？

然后我就一头雾水了。请帮我。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-25T06:13:16.763

因为存储区域决定了变量 的***作用域***和***生命周期。***

您可以根据您的要求选择存储规范，即：
***Lifetime：***您期望特定变量需要处于活动状态且有效的持续时间。
***范围：***您希望变量可访问的范围（区域）。

简而言之，每个存储区域提供不同的功能，您需要不同的功能因此不同的存储区域。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-25T06:18:32.347

实际上，C 语言并没有定义任何变量的存储位置。但是，它确实定义了三个存储类：静态、自动和动态。

静态变量是在程序初始化期间（在 之前`main()`）创建的，并且在程序终止之前一直存在。文件范围（“全局”）和静态变量属于该类别。虽然这些通常存储在数据段中，但 C 标准并不要求这种情况，并且在某些情况下（例如，C 解释器）它们可能存储在其他位置，例如堆。

自动变量是在函数体中声明的局部变量。它们在程序流到达其声明时或之前创建，并在超出范围时销毁；这些变量的新实例是为递归函数调用创建的。堆栈是实现这些变量的*便捷*方式，但同样，它不是必需的。如果您愿意，您也可以在堆中实现自动操作，并且它们通常也放置在寄存器中。在许多情况下，自动变量将在其生命周期内在堆栈和堆之间移动。

请注意，`register`自动变量的注释是一个*提示*——编译器没有义务对它做任何事情，事实上许多现代编译器完全忽略了它。

最后，动态对象（C 中没有动态变量之类的东西）指的是使用 或其他类似的分配函数显式创建的`malloc`值`calloc`。它们在显式创建时存在，并在显式释放时被销毁。堆是放置这些的方便位置 - 或者更确切地说，根据执行这种分配方式的能力定义堆。但同样，编译器实现可以自由地做它想做的任何事情。如果编译器可以执行静态分析来确定动态对象的生命周期，它可能能够将其移动到数据段或堆栈（但是，很少有 C 编译器进行这种“转义分析”）。

这里的关键点是 C 语言标准只定义给*定*值存在的时间。以及这一生命周期的最低限度——它可能会比要求的时间长。究竟如何将它放在内存中是一个主题，其中语言和库实现具有很大的自由度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T06:19:43.660

它实际上只是一个方便的实现细节。

如果他愿意，编译器可以在堆上生成局部变量。

在堆栈上创建它们更容易，因为在离开函数时，您可以根据堆栈的增长方向通过简单的加/减来调整帧指针，从而自动释放已使用的空间以供下一个函数使用。然而，在堆上创建本地人意味着更多的家务工作。

另一点是不能在堆栈上创建局部变量，如果编译器认为这样更合适并且有足够的寄存器可以这样做，它们可以只在寄存器中存储和使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T06:20:52.187

在大多数情况下，局部变量存储在寄存器中，因为当您进行函数调用时，寄存器是从堆栈中压入和弹出的。看起来它们在堆栈上。

实际上没有寄存器变量之类的东西，因为它只是 C 中一些很少使用的关键字，它告诉编译器尝试将其放入寄存器中。我认为大多数编译器只是忽略了这个关键字。

那为什么问你更多，因为他不确定你是否深入了解主题。事实上，寄存器变量实际上是在堆栈上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-19T07:34:54.393

在嵌入式系统中，我们有不同类型的存储器（只读非易失性（ROM），读写非易失性（EEPROM，PROM，SRAM，NVRAM，闪存），易失性（RAM））使用，而且我们有不同的要求（不能改变并且在电源循环后仍然存在，可以更改并且在电源循环后仍然存在，可以随时更改）我们拥有的数据。我们有不同的部分，因为我们必须乐观地将我们对数据的需求映射到不同类型的可用内存。

# javascript - Backbone.js：使用不同的数据更新集合

> ID：10749338
> 
> 赞同：1
> 
> 时间：2012-05-25T06:11:05.173
> 
> 标签：javascript, backbone.js, backbone.js-collections

我有一个模型的主干集合，这些模型在页面加载时传入的数据与获取时不同。

例如，页面加载时出现的属性是：

```
[{ name: 'cat', color: 'yellow' },
 { name: 'dog', color: 'brown' },
 { name: 'fish', color: 'orange' }] 
```

然后，在 fetch() 上（或者在页面存在时从服务器更新，数据如下所示：

```
[{ name: 'cat', current: 5, total: 100 },
 { name: 'dog', current: 6, total: 50 },
 { name: 'fish', current:7, total: 25 }] 
```

如何在保留旧数据的同时使用新数据更新主干集合？ID 不是从服务器分配的（名称保证是唯一的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:33:52.550

I ended up going with this. This will update the properties for models that exist while also removing models that did not come in and adding new ones.

```
Backbone.Collection.prototype.update = function(col_in){  
  var self = this,
      new_models = [];

  _(col_in).each(function(mod_in) {
    var new_model = self._prepareModel(mod_in),
        mod = self.get(new_model.id);
    if (mod) { 
      new_models.push(mod.set(mod_in, {silent:true}));
    } else { 
      new_models.push(mod_in);
    }
  });

  this.reset(new_models);
}; 
```

Note the use of `_prepareModel` this is important so that the Models can be identified via whatever "id" property is used in the Backbone Model object.

# asp.net - 在发布/部署期间将 DateTime.Now 插入到 Web.Config

> ID：10749340
> 
> 赞同：10
> 
> 时间：2012-05-25T06:11:17.093
> 
> 标签：asp.net, asp.net-mvc-3, web-config, web-config-transform

我想知道在我的 Web.Config 中部署/发布应用程序的日期。

有没有办法通过 web.config 转换来实现？

我可以用`xdt:Transform="Replace"`预定义的值替换任何节点，但是有没有办法使用一些自定义函数来计算该值（如`DateTime.Now`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:32:26.630

我认为您不能通过配置转换来做到这一点（尽管我不是 100% 确定）。

我建议使用[MSBuild 扩展包](http://msbuildextensionpack.codeplex.com/)，其中包含一个**DateAndTime**任务来获取当前日期和一个**Detokenise**任务来对文件执行令牌替换。

然后你可以：

1.  编辑您的网站 csproj 文件删除**AfterBuild**目标周围的评论，并将您的任务放在那里
2.  编写一个单独的 MSBuild 脚本并在您的站点构建后运行它。

希望有帮助。

# iphone - 在子视图上禁用从父视图接收触摸

> ID：10749343
> 
> 赞同：15
> 
> 时间：2012-05-25T06:11:36.123
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uigesturerecognizer

我有一个`UIView` `parentView`实现 a`UITapGuestureRecognizer`并在点击时执行某些操作。`parentView`有一个名为的子视图`childView`，它也实现了一个`UITapGuestureRecognizer`并在点击时执行某些操作。

有一个实例，我必须在动画期间关闭`childViews` `UITapGestureRecognizer`片刻，我注意到当它关闭并点击`childView`时，点击被拦截`parentView`。此外，我在该视图的顶部附加了一个工具栏，该工具栏没有附加任何手势识别器，并且它的触摸通过了 parentView （按钮几乎不起作用）。我想知道是否可以在不参考父母 UITapGestureRecognizer 的情况下禁用此功能？

我已经尝试使用 set 的`exclusiveTouches`属性`UIView`为 yes 并且它不起作用。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-24T09:56:49.643

在父手势识别器中，实现`UIGestureRecognizerDelegate`, 并实现以下方法：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch 
{
    if ([touch.view isKindOfClass:[ClassThatYouWantTouchesBlocked class]]) 
    {
        return NO;
    }
    else 
    {
        return YES; 
    }
} 
```

替换`ClassThatYouWantTouchesBlocked`为您希望其触摸被忽略的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T07:14:03.227

如果**从不关闭**ChildView 的点击手势识别器怎么办？如果它是从孩子的点击手势方法返回动画而不做任何事情。

如果它是一个**imageView** ，则可能会使用isAnimating**属性。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-02T15:48:52.263

将手势识别器添加到阻止子。

```
self.blockerView.addGestureRecognizer(UITapGestureRecognizer()) 
```

# asp.net-mvc-3 - mvc web 网格中的 TextArea

> ID：10749349
> 
> 赞同：0
> 
> 时间：2012-05-25T06:11:52.787
> 
> 标签：asp.net-mvc-3, webgrid

我有一个 GridView，如何在 TextArea 中显示“内容”字段的信息？

```
 @grid.GetHtml(  fillEmptyRows: false,
            mode: WebGridPagerModes.All,
            firstText: "<< First",
            previousText: "< previous",
            nextText: "Next >",
            lastText: "last >>",
            columns: new [] {
            grid.Column("NameInform", header: "Name"),
               .
               .
               .
               .
            grid.Column("Content", header: "Content"),
            grid.Column(
            "", 
            header: "  ",
            format: @<text>
                 @Html.ActionLink("Edit", "ModelosEdit", new { id = item.IdInform }) 
                |
                @Html.ActionLink("Delete", "Delete", new { id = item.IdInform })
              </text>    )}) 
```

祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:30:09.673

您可以像使用最后一列一样使用自定义格式：

```
grid.Column(
    "Content", 
    header: "Content", 
    format: 
        @<text>@Html.TextArea("Content", (string)item.Content)</text>
) 
```

# c# - 控制器中的 MVC 访问应用程序变量

> ID：10749350
> 
> 赞同：6
> 
> 时间：2012-05-25T06:11:53.630
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2

> **可能重复：**
> [如何在 asp.net mvc 3 razor 视图中访问应用程序变量？](https://stackoverflow.com/questions/5286301/how-do-you-access-application-variables-in-asp-net-mvc-3-razor-views)

是否可以使用 asp.net mvc2.0 访问控制器中的应用程序变量

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-25T06:40:40.883

例如，在 global.asax 中：

```
Application["AppVar"] = "hello"; 
```

在任何控制器方法中：

```
string appVar = HttpContext.Application["AppVar"] as string; 
```

**更新 (7/2018)：**
如果您需要从 DLL 库访问 MVC 全局应用程序数据：

```
using System.Web;
....
if (HttpContext.Current != null && HttpContext.Current.Application != null)
    string appVar = HttpContext.Current.Application["AppVar"] as string; 
```

检查 HttpContext.Current.Application 是否为 null 也更安全，因为一些假的 httpcontext 库（用于单元测试项目）可能有一个带有 null“Application”的有效上下文。

# android - 如何从 android 的图库中打开一个特定文件夹？

> ID：10749351
> 
> 赞同：6
> 
> 时间：2012-05-25T06:11:55.580
> 
> 标签：android, android-intent, android-gallery

我正在使用以下代码打开 android 默认图库应用程序。它会打开 sdcard 下的所有图像文件夹。如何只打开一个特定文件夹？

```
 Intent intent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
    intent.setType("image/*");
    startActivityForResult(Intent.createChooser(intent, "Pick any photo"), SELECT_IMAGE_FROM_GALLERY_CONSTANT); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T06:35:10.333

使用以下代码获取特定文件夹图像。

```
import java.io.File;
import android.app.Activity;
import android.content.Intent;
import android.media.MediaScannerConnection;
import android.media.MediaScannerConnection.MediaScannerConnectionClient;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class SDCARD123Activity extends Activity implements MediaScannerConnectionClient {
    public String[] allFiles;
    private String SCAN_PATH ;
    private static final String FILE_TYPE="image/*";

    private MediaScannerConnection conn;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        File folder = new File("/sdcard/Photo/");
        allFiles = folder.list();
        //   uriAllFiles= new Uri[allFiles.length];          
        for(int i = 0; i < allFiles.length; i++) {
            Log.d("all file path" + i, allFiles[i]+allFiles.length);
        }
        //  Uri uri= Uri.fromFile(new File(Environment.getExternalStorageDirectory().toString()+"/yourfoldername/"+allFiles[0]));
        SCAN_PATH=Environment.getExternalStorageDirectory().toString()+"/Photo/"+allFiles[0];
        System.out.println(" SCAN_PATH  " +SCAN_PATH);

        Log.d("SCAN PATH", "Scan Path " + SCAN_PATH);
        Button scanBtn = (Button)findViewById(R.id.scanBtn);
        scanBtn.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View v) {
                startScan();
            }});
    }

    private void startScan() {
        Log.d("Connected","success"+conn);
        if (conn!=null) {
            conn.disconnect();
        }
        conn = new MediaScannerConnection(this,this);
        conn.connect();
    }

    @Override
    public void onMediaScannerConnected() {
        Log.d("onMediaScannerConnected","success"+conn);
        conn.scanFile(SCAN_PATH, FILE_TYPE);    
    }

    @Override
    public void onScanCompleted(String path, Uri uri) {
        try {
            Log.d("onScanCompleted", uri + "success" + conn);
            System.out.println("URI " + uri);             
            if (uri != null) {
                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setData(uri);
                startActivity(intent);
            }
        } finally {
            conn.disconnect();
            conn = null;
        }
    }
} 
```

# mysql - M2M 关系还是 2 个 FK？

> ID：10749355
> 
> 赞同：0
> 
> 时间：2012-05-25T06:12:02.647
> 
> 标签：mysql, sql, django

以下哪种结构更可取：

```
# M2M
class UserProfile(models.Model):
    ...
    groups = models.ManyToManyField(Group)

class Group(models.Model):
    ... 
```

或者 -

```
# 2 FKs
class UserProfile(models.Model):
    ...

class Group(models.Models):
    ...

class GroupMember(models.Model):
    user = models.ForeignKey(UserProfile)
    group = models.ForeignKey(Group) 
```

哪个会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:24:46.447

两者本质上是一样的。当您执行 M2M 时，Django 会自动创建一个中间模型，这与您的模型非常*相似*`GroupMember`。但是，它还设置了一些 API 挂钩，允许您`Group`直接从`UserProfile`模型访问模型，而不必弄乱中间模型。

您可以使用`through`@San4ez 解释的方式添加相同的钩子，但您只会让事情变得更复杂。创建自定义`through`仅当您需要向关系添加其他字段时，否则，坚持使用默认值。

总而言之，#1 更好，只是因为它与 #2 完全相同，但更简单，没有多余的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:18:19.507

您还可以使用[through](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ManyToManyField.through)选项组合这两种变体

```
groups = models.ManyToManyField(Group, through='GroupMember') 
```

你是什​​么意思`better`？通常您不需要创建中间模型（必须存储[额外数据](https://docs.djangoproject.com/en/dev/topics/db/models/#intermediary-manytomany)的情况除外）。

`ManyToManyField`他的工作做得很完美，所以不要自己写它的功能。

# jquery - 如何呈现jquery ajax响应

> ID：10749360
> 
> 赞同：1
> 
> 时间：2012-05-25T06:12:44.160
> 
> 标签：jquery, ajax

我对 jquery ajax 很陌生，我试图弄清楚如何将从 php 返回的响应数据呈现为 json 以更新指定的 div。所以实际上我遇到了以下问题。

JavaScript：

```
<script type="text/javascript">
  $(document).ready(function() {
    $(".ajax_call").change(function() {
      var domain = document.domain;
      var count = $('.ajax_call :selected').val();
      var $parent = $(this).closest(".product_box");
      var modul_title = $("h4", $parent).text();
      $.ajax({
        url:'index/ajax',
        data:{mod_title:modul_title, domain:domain, count:count},
        cache:'false',
        datatype:'json',
        success: function(response) {
          if (response.status = modul_title) {
            $parent.fadeOut();
            $parents.(response).fadeIn();                            
          } else {
            alert("Oops, script is a no go");
          }    
        }   
      });
   });
}); 
```

和 HTML：

```
<div class="product_box">
  <h4><!-- php code generating --> header</h1>
  <div class="product">
    <div class="thumbnail-item">
      <a href=""></a>
      <!-- and couple of other divs what are rendering my output in my mvc view -->
      <div class="ajax_bar">
        <!-- and here comes the dropdown what is triggering an ajax call -->
        <select class="ajax_call" size="1" name="blala">
          <option value='50'>add more 50</option>
          <option value='100'>add more 100</option>
          <option value='150'>add more 150</option>
        </select>
      </div>
    </div>
  </div>
</div> 
```

我想要的是使用 ajax 调用更新呈现项目的数量。我不清楚如何呈现响应。我是否必须再次形成原始数据，我的意思是我的 html-php 代码看起来还是可以以其他方式完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:15:32.773

假设您要生成用户定义的 html，然后可以使用微模板[MicroTemplating](http://ejohn.org/blog/javascript-micro-templating/)

希望这是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:15:29.150

您需要使用 html 或文本方法才能显示

```
$parents.html(response).fadeIn();

or 

$parents.text(response).fadeIn(); 
```

代替`$parents.(response).fadeIn();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:13:46.060

```
$parents.(response).fadeIn(); 
```

应该

```
$parents.html(response).fadeIn(); 
```

或者

```
$parents.text(response).fadeIn(); 
```

[.html()](http://api.jquery.com/html)更新 $parents 的内容

阅读[.text()](http://api.jquery.com/text)

# r - 热图-调整颜色范围

> ID：10749367
> 
> 赞同：1
> 
> 时间：2012-05-25T06:13:16.920
> 
> 标签：r, heatmap, gplots

```
library(gplots)
shades= c(seq(-1,0.8,length=64),seq(0.8,1.2,length=64),seq(1.2,3,length=64))
 heatmap.2(cor_mat, dendrogram='none', Rowv=FALSE, Colv=FALSE, col=redblue(64),  
breaks=shades, key=TRUE, cexCol=0.7, cexRow=1, keysize=1) 
```

休息有一些问题。希望得到这方面的帮助。

运行代码后，我收到此错误消息

```
Error in image.default(1:nc, 1:nr, x, xlim = 0.5 + c(0, nc), ylim = 0.5 + : must have one more break than colour 
```

感谢您的时间和考虑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:31:03.577

好吧，我们没有 cor_mat，所以我们不能自己尝试这个，但问题似乎出在罐头上，不是吗？热图（以及通常基于图像的所有函数）与中断和颜色向量一起工作的方式是，中断定义了数据矩阵值的变化意味着颜色变化的点。简而言之，如果`break = c(1,2,3)`和您的`col = c("red", "blue")`：

1.  values < 1 将是透明的
2.  值 >= 1, <= 2 将被绘制为红色
3.  values > 2, <= 3 将被绘制为蓝色
4.  values > 3 将是透明的

您的代码中发生的情况是，使用“阴影”，您向 提供了长度为 3*64 的向量`break`，而`redblue(64)`只为您提供了 64 种颜色。尝试替换`redblue(64)`为`redblue(3*64-1)`.

# android - android中的反调试

> ID：10749368
> 
> 赞同：2
> 
> 时间：2012-05-25T06:13:20.930
> 
> 标签：android

任何人都进行了实际的 android 反调试检查。我知道有些事情像

```
IsDebuggerConnected()

boolean isDebuggable = (0 != (getApplicationInfo().flags & ApplicationInfo.FLAG_DEBUGGABLE)); 
```

我正在寻找类似于使用 NDK 的 ptrace 或其他无法调试进程句柄的任何其他机制的东西。例如，当应用程序启动时，diff 线程中的自调试不允许其他调试器获取进程。

对此的任何见解都将非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:00:16.930

没有办法可靠地阻止调试和反向工程您的应用程序。您可以通过模糊化使其变得更加困难，但如果值得进行逆向工程，它就会完成（Sovjet IT 专家确实设法对 System 360 进行了逆向工程，甚至用机器代码对其进行了修补） - 所以这是不值得的努力.

# android - Android - 防止没有特殊权限的用户退出应用或关机

> ID：10749370
> 
> 赞同：0
> 
> 时间：2012-05-25T06:13:25.437
> 
> 标签：android

我有以下要求。我需要防止非管理员用户退出 Android 应用程序。

那么，有什么办法可以禁用以下功能

1.  长按home键事件
2.  长按搜索键
3.  关机按钮按下

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:20:32.630

Android 中没有“管理员用户”的概念。如果不开发自定义 Android 固件，您将无法真正做到这一点。硬件/系统按钮由系统控制，因此您无法禁用或自定义它们。

# asp.net - Windows Azure - RPC 服务器不可用错误

> ID：10749372
> 
> 赞同：1
> 
> 时间：2012-05-25T06:13:30.710
> 
> 标签：asp.net, windows, azure, cloud

我们正在开发 Windows Azure 平台。如果我们在 Visual Studio 中工作，则该应用程序运行良好，但是当我们将其部署到 Windows Azure 并尝试从 URL 运行时，会创建其抛出的 RPC 服务器不可用。如果你们中的任何人面临同样的问题，请帮助我们解决同样的问题。

**[http://sharum1016854.cloudapp.net/WelcomePage.aspx](http://sharum1016854.cloudapp.net/WelcomePage.aspx)** --> 请点击任何按钮然后抛出以下错误。

**我们得到的错误是：**

> RPC 服务器不可用。（来自 HRESULT 的异常：0x800706BA） 说明：在执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Runtime.InteropServices.COMException：RPC 服务器不可用。（来自 HRESULT 的异常：0x800706BA）

源错误：

> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

> [COMException (0x800706ba): RPC 服务器不可用。（来自 HRESULT 的异常：0x800706BA）]
> D:\AzureApplication\LastTest\WelcomePage.aspx.cs:35
> System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) 中的 LastTest.WelcomePage.btnCreate_Click(Object sender, EventArgs e) +154 System.Web.UI.Page.ProcessRequestMain（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）+3707

请尽快给出一些相同的建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:06:26.897

最可能的原因是您的代码使用了您在角色启动期间部署在同一台计算机上的进程外 COM 服务器。稍后您在该服务器中实例化一个对象，COM 子系统为您提供一个代理对象。您的代码和 COM 服务器之间的通信是使用 RPC 完成的——一个 RPC 服务器在 out-proc COM 服务器内部启动。然后 COM 服务器崩溃，您所拥有的只是一个现在不存在的 COM 服务器（和不存在的 RPC 服务器）的代理。当您对悬空代理执行任何调用时，您会遇到此错误消息 - *RPC 服务器不可用*。

您必须找出 COM 服务器崩溃的原因以及崩溃的原因并采取相应措施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:24:44.223

我不太确定在哪里遇到问题。但是根据[http://social.technet.microsoft.com/wiki/contents/articles/4494.troubleshooting-the-rpc-server-is-unavailable.aspx](http://social.technet.microsoft.com/wiki/contents/articles/4494.troubleshooting-the-rpc-server-is-unavailable.aspx)，如果找不到计算机名称，则可能会出现此问题。我想知道您是否在代码中使用计算机名称。默认情况下，Windows Azure 计算机不在您的本地网络中，因此您无法使用计算机名称连接到本地计算机。如果要调用本地服务，可以使用 Windows Azure Connect。

此致，

明旭。

# java - 春天的@Transaction

> ID：10749377
> 
> 赞同：0
> 
> 时间：2012-05-25T06:14:09.170
> 
> 标签：java, spring

如果我将 Transaction 的默认值更改为`@Transactional(propagation = Propagation.SUPPORTS)`，其他属性会失去其默认值吗？我是否需要将其余属性显式定义为其默认值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:26:26.820

不，所有其他默认值将保持原样，不会更改。

# iphone - 在可编辑的 uitable 中移动一些行后出错

> ID：10749380
> 
> 赞同：0
> 
> 时间：2012-05-25T06:14:31.460
> 
> 标签：iphone, objective-c, ios, uitableview

我想在可编辑的 UITableView 中移动一些行后保存到数据库，但是发生错误我找不到错误原因。请就我的代码给我建议。谢谢！！

我的代码：

```
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath {
           return indexPath.section == 0 && indexPath.row < items.count;        
} 

- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath 
  toIndexPath:(NSIndexPath *)toIndexPath {

        isReOrderNoteList= YES;

        NSString *rowContent = [items objectAtIndex:fromIndexPath.row];
        [items removeObjectAtIndex:fromIndexPath.row];
        [items insertObject:rowContent atIndex:toIndexPath.row];
 }

//I'm using UIButton instead of Navigation barbutton.
- (IBAction)EditTable:(id)sender{

       f(TableView.editing)
        {
            if(isReOrderNoteList)
            {    
                [super setEditing:NO animated:NO]; 
                [TableView setEditing:NO animated:NO];
                [btn_Edit setTitle:@"Edit" forState:UIControlStateNormal];

                FMDatabase *dbS = [FMDatabase databaseWithPath:dbPath];     
                [dbS open]; 

                NSInteger tmp = 1; 
                NSLog(@" [self.items count] : %d", [ items count]);  **// Print 6 !!.** 

                for (NSInteger i = 0; i< [items count]; i++) {

                    Note *list = [[Note alloc] init];
                    list = [items objectAtIndex:i]; 
                    NSLog(@" list.itle : %@", list.title);  **//Error occurred at this line.**
                    NSLog(@" list.IDX : %d", list.IDX);
                    [dbS executeUpdate:@"Update test set sort_seq = ? where  idx = ? ", [NSNumber numberWithInt:tmp], [NSNumber numberWithInt:list.IDX]]; 
                    [list release];
                    tmp++; 
                }
                [dbS close];      
            }

            //Re-init 
            isReOrderNoteList = NO; 
        }
        else
        {
            [super setEditing:YES animated:YES]; 
            [TableView setEditing:YES animated:YES];      
            [btn_Edit2 setTitle:@"Done" forState:UIControlStateNormal]; 
        }

} 
```

错误 ：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSConcreteNotification title]: unrecognized selector sent to instance 0x892b550'
*** First throw call stack: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:20:26.433

您在代码末尾释放注释而不在“项目”数组上执行

```
 Note *list = [[Note alloc] init];
    list = [items objectAtIndex:i]; 
    NSLog(@" list.itle : %@", list.title);  **//Error occurred at this line.**
    NSLog(@" list.IDX : %d", list.IDX);
    [dbS executeUpdate:@"Update test set sort_seq = ? where  idx = ? ", [NSNumber numberWithInt:tmp], [NSNumber numberWithInt:list.IDX]]; 
    [list release]; 
```

它应该是

```
 Note *list = [items objectAtIndex:i]; 
    NSLog(@" list.itle : %@", list.title);  **//Error occurred at this line.**
    NSLog(@" list.IDX : %d", list.IDX);
    [dbS executeUpdate:@"Update test set sort_seq = ? where  idx = ? ", [NSNumber numberWithInt:tmp], [NSNumber numberWithInt:list.IDX]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:22:41.833

我认为它的 Alloc init 问题......所以尝试分配你在 uitableview 中使用的“rowContent”和其他字符串

# sql - 更改表并添加唯一键会导致错误

> ID：10749382
> 
> 赞同：5
> 
> 时间：2012-05-25T06:14:38.763
> 
> 标签：sql, sql-server, sql-server-2008

我有一张桌子叫`Animal`. `AnimalId`是主键&我想将该列设置`AnimalType_id`为唯一（我有一个`AnimalType`表，需要在这里设置一个外键）

```
ALTER TABLE Animal
ADD UNIQUE Animal.AnimalType_id int 
```

两个表中已经有数据，因此我无法删除该表。

然而，这会导致错误：

> 消息 102，级别 15，状态 1，第 2 行
> '.' 附近的语法不正确。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-25T06:27:33.490

请参阅[文档](http://msdn.microsoft.com/en-us/library/ms190273.aspx)以了解如何添加表约束。

```
ALTER TABLE Animal ADD CONSTRAINT UQ_Animal_AnimalTypeId UNIQUE (AnimalType_id) 
```

听起来 AnimalType_id 是一个外键，所以我只是想检查您是否理解，通过使此列唯一，您将关系建立为一对一 - 您只能拥有每种类型的一种动物。

由于您在添加唯一约束时遇到错误，因此我建议您实际上需要外键而不是唯一约束：

```
ALTER TABLE Animal
    ADD CONSTRAINT FK_Animal_AnimalType
    FOREIGN KEY
    (
        AnimalType_id
    )
    REFERENCES AnimalType
    (
        id
    ) 
```

我不得不猜测 AnimalType 表名的名称和它的主键列名 - 如果它们不正确，请更改它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T06:36:58.707

如果您养成为您创建的所有对象（甚至约束）命名的习惯，那么以后需要禁用、删除或更改约束时会更容易：

```
ALTER TABLE Animal ADD CONSTRAINT UQ_Animal_Type UNIQUE (AnimalType_id) 
```

通过创建唯一索引也可以获得更灵活的类似约束的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:17:13.330

我认为您正在尝试这样做：

```
ALTER TABLE Animal
ADD COLUMN AnimalType_id int; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T07:03:49.903

该列中的数据似乎不是唯一的。在列上创建唯一约束时，不能有任何重复的条目（最多可以有一个空值）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-06-29T14:38:33.927

尝试这个

> ALTER TABLE table_name 添加约束唯一（column_name）

# perl - 在 perl 中删除特定的 html 标签

> ID：10749383
> 
> 赞同：1
> 
> 时间：2012-05-25T06:14:45.733
> 
> 标签：perl

我有一个 html 文件存储在磁盘上（文件是[This](http://home.howstuffworks.com/home-improvement/construction/projects/return-on-investment-from-remodel2.htm)）。我想删除图像的所有 html 标签。这是我到目前为止所尝试的。

```
#!/usr/bin/perl -w
use HTML::TagFilter;
my $tf = new HTML::TagFilter;

open READ, "D:\\Scripts\\file.html" or die "Couldn't open file: $!"; 
$string1 = join("", <READ>); 
close READ;

my $self = HTML::TagFilter->new(deny => {img => {'all'}});
open (MYFILE, '>D:\\Scripts\\remove.html');
print MYFILE $tf->filter($string1);
close (MYFILE); 
```

如果我只是运行这个程序，它会打印

```
Odd number of elements in anonymous hash at remove everything else.pl line 9.
Parsing of undecoded UTF-8 will give garbage when decoding entities at C:/Perl64
/site/lib/HTML/TagFilter.pm line 499. 
```

该文件已存储，但没有删除图像标签（第 9 行是我应用过滤器的位置）。我在这里做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:14:02.200

首先，您应该始终*在* 程序开始时，尤其是在寻求帮助修复它之前。`use strict``use warnings`

您已经创建了两个`HTML::TagFilter`对象：`$tf`一个没有过滤器，`$self`一个删除`<img>`了元素。您已经习惯`$tf`了处理 HTML，因此您的数据不会改变。

这段代码有效，加上我提到的更正和其他一些。

```
use strict;
use warnings;

use HTML::TagFilter;

my $tf = HTML::TagFilter->new(deny => {img => {all => []}});

my $html = do {
  open my $fh, 'D:\Scripts\file.html' or die "Couldn't open file: $!";
  local $/;
  <$fh>;
};

open my $out, '>', 'D:\Scripts\remove.html' or die "Unable to open output file: $!";
print $out $tf->filter($html); 
```

# java - 使用嵌入式码头创建网页界面

> ID：10749385
> 
> 赞同：5
> 
> 时间：2012-05-25T06:15:03.737
> 
> 标签：java, javascript, html, embedded-jetty

我是 Web 开发和使用嵌入式码头的新手。下面提供的源代码是使用 eclipse IDE 开发的。我必须以编程方式启动码头服务器，我没有通过命令行启动它的选项。它需要是一个重量极轻的 Web 界面，因为它将从内存/处理速度低的系统启动。

我在 ECLIPSE 中开发了以下目录结构

```
 JettyExample <Project>
    src 
     sample_package
        HelloWorld.java
     WEB-INF
      index.html
      web.xml 
```

HelloWorld.java的源代码

```
 public static void main(String[] args) throws Exception
{

    Server server = new Server(8080);
    ResourceHandler resource_handler = new ResourceHandler();
    resource_handler.setDirectoriesListed(true);
    resource_handler.setResourceBase(args.length == 2?args[1]:".");
    resource_handler.setWelcomeFiles(new String[]{ "WEB-INF/index.html" });

    System.out.println("serving " + resource_handler.getBaseResource());

    HandlerList handlers = new HandlerList();
    handlers.setHandlers(new Handler[] { resource_handler, new DefaultHandler() });
    server.setHandler(handlers);
    server.start();
    server.join();

} 
```

index.html 是

```
 <html>
<head>
    <title>HTML Generator Sample Page</title>
</head>
<body>
    <h1 style="text-align: center;">
        Agent Management Interface</h1>
    <ol>
        <li>
            Start Platform</li>
        <li>
            Show Agent Status</li>
        <li>
            Create Dummy Agent</li>
        <li>
            Intiate Request Message</li>
        <li>
            Stop agent</li>
        <li>
            Stop Platform</li>
    </ol>
    <p>
        Enter option :</p>
    <p>
        <textarea cols="10" name="myTextBox" rows="1" style="width: 104px; height: 25px;"></textarea></p>
    <p>
        <input name="option_selector" type="submit" value="option_selector" /></p>
</body> 
```

web.xml 文件是带有欢迎文件列表的常用文件。当我运行服务器并在 Web 浏览器中启动 localhost:8080 时，出现 404 错误在 HelloWorld.java 主方法中正确。

任何提示/建议都会有所帮助 编辑 1：

我在类路径中包含 server-api.jar 文件和 jetty.jar 文件，并且没有使用 Maven 插件进行 Eclipse。

编辑2：

```
2012-05-25 14:40:39.253:DBUG:oejs.AsyncHttpConnection:async request (null null)@17160330 org.eclipse.jetty.server.Request@105d88a
2012-05-25 14:40:39.260:DBUG:oejs.Server:REQUEST / on   org.eclipse.jetty.server.nio.SelectChannelConnector$SelectChannelHttpConnection@1db05b2@127.0.0.1:8080<->127.0.0.1:55062
2012-05-25 14:40:39.264:DBUG:oejs.Server:RESPONSE /  200
2012-05-25 14:40:39.267:DBUG:oejs.AsyncHttpConnection:async request (null null)@17160330 org.eclipse.jetty.server.Request@105d88a
2012-05-25 14:40:39.272:DBUG:oejs.AsyncHttpConnection:async request (null null)@17160330 org.eclipse.jetty.server.Request@105d88a
2012-05-25 14:40:39.273:DBUG:oejs.Server:REQUEST /jetty-dir.css on org.eclipse.jetty.server.nio.SelectChannelConnector$SelectChannelHttpConnection@1db05b2@127.0.0.1:8080<->127.0.0.1:55062
2012-05-25 14:40:39.275:DBUG:oejs.Server:RESPONSE /jetty-dir.css  404 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:28:26.897

您已将欢迎文件设置为 WEB-INF/index.html。位于 WEB-INF 文件夹内的项目仅对 servlet 容器可见，在容器外无法访问。

这不起作用，因为 index.html 隐藏在 WEB-INF 后面。此外，在使用 WEB-INF 时，习惯上从应用程序的根目录访问它，例如 /WEB-INF/file.html：

```
resource_handler.setWelcomeFiles(new String[]{ "WEB-INF/index.html" }); 
```

如果您只包含 index.html 文件作为欢迎文件，并确保 index.html 位于应用程序的根目录中，Jetty 服务器应该能够找到它：

```
resource_handler.setWelcomeFiles(new String[]{ "index.html" }); 
```

请务必在进行此更改后重新启动 Jetty，因为应用程序将需要重新加载此信息。

此外，在服务器上配置新的 Web 应用程序时，通常最好将日志级别调高。服务器和框架通常在较低级别进行日志记录，因此它们不会干扰应用程序日志；但是，在这种情况下，当您在浏览器中加载 localhost:8080 时，您需要查看 servlet 容器尝试访问的资源。

为了进一步澄清，[ResourceHandler.setWelcomeFiles](http://jetty.codehaus.org/jetty/jetty-6/apidocs/org/mortbay/jetty/handler/ResourceHandler.html#setWelcomeFiles%28java.lang.String%5b%5d%29) Java 方法与在非嵌入式 Jetty 中通过 web.xml 配置服务器相同，使用以下 XML 条目：

```
 <welcome-file-list>
            <welcome-file>index.html</welcome-file>
    </welcome-file-list> 
```

[在 Embedding Jetty](http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty)的 Eclipse Wiki 页面上有一些示例和更多文档，请务必查看它们以获得更多指导。

**嵌入式 Jetty 6 的文件结构：**

这是我拥有的嵌入式 Jetty 副本的示例文件结构。请注意，index.html 位于根目录中，紧邻 src：

```
build.properties*  index.html*  README.textile*  src/   war/
build.xml*         licenses/    server/          test/  WEB-INF/ 
```

# mysql - 如何自动从表中删除数据？

> ID：10749390
> 
> 赞同：0
> 
> 时间：2012-05-25T06:15:51.647
> 
> 标签：mysql, phpmyadmin, xampp

我有一张桌子

它有四个字段：`Phone_number(primary key),City_name,Category_product and sub_Category`

我正在开发一个基于短信网关的 php 应用程序。每当用户发送和短信请求产品服务时，他的详细信息将保存在此表中。

现在，当用户发送短信时，我会将详细信息存储在表中，并等待用户根据需要发回包含更多详细信息的短信。

现在我想做的是：如果用户在 15 分钟内没有回应，他的详细信息应该自动从表中删除。我应该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:20:01.953

您向表中添加一列来存储它的发送时间。

然后您必须选择，您可以运行 cron 作业来清理数据，或者清理其他用户发送短信时无效的记录等。由于您将时间与数据一起存储，因此您可以轻松更改也从 15 分钟后超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:22:08.600

你必须使用一些调度。PHP 对调度没有任何原生支持。我的建议是创建一个桌面应用程序或一个侦听表以获取 SMS 响应的服务。如果它没有得到响应，那么它将删除相应的记录。您的工作将无限运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:25:34.730

如果这将是一个包含许多记录的表，您应该设置一个预订表，然后在下订单时复制记录。这样，如果预购表开始变慢，您可以随时清理。

正如 Ben 所说，它应该有一个用于检查的时间戳。

# javascript - 在 Chrome 中使用 Date.js 时，对象函数 Date() { [native code] } 没有方法“compareTo”

> ID：10749391
> 
> 赞同：4
> 
> 时间：2012-05-25T06:15:58.027
> 
> 标签：javascript, datejs

我在javascript中有这两个日期时间变量：

```
first_date = Date.parse('05/21/2012 0:00:00 ');
second_date = Date.today(); 
```

如果我正在使用（[http://code.google.com/p/datejs/wiki/APIDocumentation#compareTo](http://code.google.com/p/datejs/wiki/APIDocumentation#compareTo)）

```
return first_date.compareTo(second_date) 
```

然后发生异常：

`Object function Date() { [native code] } has no method 'compareTo'`在谷歌浏览器中。

我正在使用来自[http://www.datejs.com/的最新版本的 Date.js](http://www.datejs.com/)

如何解决这个问题？

我会提到其他函数（add(-5).days()、today() 等）工作正常。

PS：我看了一下这里（[http://code.google.com/p/datejs/issues/detail?id=129](http://code.google.com/p/datejs/issues/detail?id=129)）但没有解决方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T06:20:29.383

`first_date`并且`second_date`是根据您的代码的字符串，`Date.compare`除非您使用[svn-trunk 版本](http://datejs.googlecode.com/svn/trunk/build/date-en-US.js)，否则它甚至不存在。

datejs 定义`Date.prototype.compareTo`，因此您只能使用`date_obj_a.compareTo(...)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:21:15.497

```
first_date = Date.parse('05/21/2012 0:00:00 ');
second_date = Date.today();

console.log(first_date.compareTo(second_date)); // just working fine 
```

# android - 如何完全停止后台服务..？

> ID：10749393
> 
> 赞同：1
> 
> 时间：2012-05-25T06:15:59.980
> 
> 标签：android, service, android-service

嗨朋友们，我有一个问题要解决...我想彻底销毁服务，一旦我从 Activity 调用 onDestroy() 方法。但我的问题是我无法完全摧毁它。在后台它继续运行，我正在分享我尝试过的示例代码。

```
 //Activity Class
    public class ServiceToAct extends Activity {
    private static final String TAG = "BroadcastEvent";
    private Intent intent;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        intent = new Intent(this, BroadcastService.class);
        startService(intent);
        registerReceiver(broadcastReceiver, new       IntentFilter(myService.BROADCAST_ACTION));
    }

    /*@Override
    protected void onResume() {
        super.onResume();

    }*/

    @Override
    protected void onPause() {
        super.onPause();
        unregisterReceiver(broadcastReceiver);

    }

    @Override
    protected void onDestroy() {

        stopService(intent);

        Toast.makeText(this, "Destroy Completely", Toast.LENGTH_LONG).show();
    }

    private BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {

        }
    };
}

// service class
public class myService extends Service {

    private static final String TAG = "BroadcastEvent";
    public static final String BROADCAST_ACTION = "com.service.activity.myService";
    private final Handler handler = new Handler();
    Intent intent;

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        Toast.makeText(this, "created", Toast.LENGTH_LONG).show();
        intent = new Intent(BROADCAST_ACTION);
    } 

    @Override
    public void onStart(Intent intent, int startId) {
        super.onStart(intent, startId);
        Toast.makeText(this, "start", Toast.LENGTH_LONG).show();
        handler.removeCallbacks(sendToUI);
        handler.postDelayed(sendToUI, 1000); 
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        stopSelf();
        //stopService(intent);
        Toast.makeText(this, "Destroy", Toast.LENGTH_LONG).show();
    }

    private Runnable sendToUI = new Runnable() {

        @Override
        public void run() {
            myData();
            handler.postDelayed(this, 10000); 
        }
    };

    private void myData() {

        Log.d(TAG, "keep on entering");
        Toast.makeText(this, "Keep on despling in UI", Toast.LENGTH_LONG).show();

        sendBroadcast(intent);
    }
} 
```

在这里，实际上我想从服务更新我的 UI，我的一切都在工作，但是如果我销毁服务，它会继续调用 myData() 方法，如果我也关闭应用程序，我会收到 Toast 消息。我的问题是，一旦服务被破坏，我不想要那个 toast msg 我使用了 stopService(intent) 方法，它破坏了服务，但是后台方法 myData() 继续调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:17:50.023

停止服务完全使用这个..

**我的活动.java**

```
@Override
    public void onDestroy() {
      stopService(intent); 
        super.onDestroy();
        Toast.makeText(this, "Destroy", Toast.LENGTH_LONG).show();
    } 
```

**服务.java**

```
@Override
    public void onDestroy()
    {

        stopSelf();
        super.onDestroy();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:22:27.587

你最好不要直接调用 onXxx() 。在您的活动中使用 stopService(Intent i) 并在您的服务中使用 stopSelf() 来停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:19:31.643

更新 UI 后使用 stopService() 方法

或者

在活动中使用 bindService 而不是使用 startService。当活动销毁时，服务也销毁

# apache - Xampp 的 APACHE 不工作？

> ID：10749395
> 
> 赞同：1
> 
> 时间：2012-05-25T06:16:06.980
> 
> 标签：apache, xampp

我已经在我的笔记本电脑上安装/重新安装了 Xampp 服务器一百万次，但 Apache 仍然没有运行。起初，它会运行，但片刻之后它会自动停止。我不知道似乎是什么冲突。自从我遇到端口使用冲突以来，我已经检查了我的 Skype，但在这种情况下，我没有安装 Skype。有人可以指导我如何使我的 Apache 成功运行。请注意，我的 mySql 运行顺利，只有 Apache 不会。请帮忙..：（

附言

当我运行我的 xampp 控制面板时，mySql 运行平稳，而 Apache 会运行一会儿然后停止，在控制面板下方，它会说 apache[port 80] is busy。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T09:53:47.653

在我的系统（Windows 7）上导致此问题的原因是 WinHTTP Web 代理自动发现服务已停止运行。在计算机管理功能的服务部分（即通过从开始菜单上的计算机链接上的右键单击菜单中选择管理运行的应用程序），我发现 WinHTTP 发现服务设置为“手动”。我将其保留为“手动”，但启动了它，Apache 又开始工作了。

尽管我没有更改服务启动的“手动”性质，但我发现，在 Windows 重新启动后，WinHTTP 服务仍在运行（这对我来说有点令人费解，但确实如此）。我也不知道是什么原因导致该服务停止在我的机器上运行（'但我们又来了'！）

无论如何，运行 WinHTTP Web Proxy Auto-Discovery Service 似乎是 Apache 运行所必需的，因此请确保它正在运行！

编辑添加：我找到了问题的根本原因：我下载了一个使用 Pando（点对点文件共享应用程序）的免费游戏，以允许其他人也从我的机器上下载游戏（原则上，我没意见），它使用 TCP 端口 443，它正在阻止 Apache 运行。我假设（虽然对网络的了解还不够确定）上面提到的 WinHTTP Web 代理自动发现服务的运行正在设法共享（或以其他方式解决）端口 443 的使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-07T13:08:30.980

重新配置 Apache 以在不同的端口上运行

如果您不想关闭阻塞端口 80 的应用程序，您可能想要选择此路径。一个典型的原因可能是您想在同一台机器上同时运行 Apache 和 IIS。

要将 Apache 配置为在不同的端口上运行，请转到此路径“C:\xampp\apache\conf”（如果您将 Xampp 安装在不同的位置，则导航到此路径）并在记事本中打开 httpd.conf。搜索以下行：

![1号线](../Images/524d106491b10e20dc53f13f6b480c7d.png) 第 1 行：Listen 80

![2号线](../Images/8c9d0967053ccac6a55783f116c62798.png) 第 2 行：ServerName localhost:80

更改这两行，以便使用不同的数字而不是 80。我选择了 8000 而不是 80。确保这是一个空闲端口，没有被任何应用程序使用。

第 1 行：监听 8000
第 2 行：ServerName localhost:8000

保存文件并从 Xampp 运行 Apache

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T06:44:24.907

以管理员身份打开一个cmd（开始->“cmd”->右键单击“cmd.exe”->以管理员身份运行）

类型

```
netstat -nab 
```

找到写着的那一行

```
TCP    0.0.0.0:80 
```

好吧，或者基本上每一行都以 :80 结尾

查看阻塞该行上方端口的 exe。终止关联的程序 - 如果没有其他工作，任务管理器应该提供帮助。

编辑：如果 IIS 启动，通常会阻塞端口 80。不过，还有很多其他程序可以阻止端口 80。你也可以尝试

```
telnet localhost 80 
```

看看什么样的服务回答。或者...使用网络浏览器。或者...配置 apache 以使用不同的端口（但谁想这样做？）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T00:56:05.730

Try disabling your Anti-Virus software temporarily. It's known to cause Apache problems. Also check Apache error.log file to see if it has recorded any issues.

Also [try some other WAMPs](http://en.wikipedia.org/wiki/Comparison_of_WAMPs) to see if it's a common problem on your system.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-07T06:35:08.877

Skype 自动封锁 80 端口

停止 Skype - 尝试 apache 从 xampp 仪表板开始

如果 apache Works - 更改 Skype 设置

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-30T23:28:24.317

1）在系统托盘中，我们点击xampp图标。2) 选择 Apache> httpd.conf 3) 拨打 Listen 80。 4) 将 Listen to 9080 旁边的数字 80 更改。 5) 重新启动 XAMPP 的服务

# c# - 实体框架与企业库

> ID：10749398
> 
> 赞同：1
> 
> 时间：2012-05-25T06:16:40.053
> 
> 标签：c#, asp.net, sql-server, entity-framework, enterprise-library

我正在开发一个 asp.net 项目，客户端允许我远程访问数据库。

该数据库有两个用户。一个用户具有只读访问权限，而另一个用户具有所有者访问权限。客户说，出于读取数据的目的，我们应该使用第一个，而对于插入等，我们应该使用第二个。

客户还告诉我尽可能多地使用存储过程，因为有很多数据将来自数据库服务器。我想使用实体框架（edmx）。我可以使用存储过程吗？在实体框架之前，我一直在使用企业库来存储过​​程。我是否需要返回并将其与存储过程一起使用，以便所有与数据库相关的工作都在 db 服务器端完成，而不是使用实体框架将数据带到 Web 服务器？

另外，我怎样才能使用一个用户进行只读目的而其他用户访问同一个数据库进行插入？我需要创建两个网络配置吗？使用户只读并更快地获得结果是否有区别？

如果有更好的方法，请建议我。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:30:51.587

您可以在 EF 中使用存储过程。但要注意，让实体与存储过程一起工作真的很困难。

EF 生成查询而不写 sql 语句，它通过观察实体的变化来生成 sql 语句。它只是将您的实体映射到数据库表。因此，如果您有名为“Item”的表，它会在代码端创建一个对象“Item”。您可以使用代码操作“项目”实体并调用 EF 的相关方法以将实体中所做的更改反映到数据库中。

您可以根据操作动态创建连接字符串。

这个问题太宽泛了，所以我不知道这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:30:44.363

问他让你通过一个用户读取访问权并通过另一个用户插入访问权，他觉得他有什么优势，如果他有正当理由，那么只要确保他知道他在增加开发时间和维护方面做出权衡。

其次，使用存储过程与数据量有什么关系？如果您正在执行大量查询（如果您正在提取大量数据，则可能不会），那么您可以通过使用存储过程来略微减少网络流量，因为触发存储过程的请求将少于查询细绳。不过，这甚至不值得担心。

Jeff Atwood 实际上在这里对存储过程有一些很好的评论：http: [//www.codinghorror.com/blog/2004/10/who-needs-stored-procedures-anyways.html](http://www.codinghorror.com/blog/2004/10/who-needs-stored-procedures-anyways.html)

在这里： http: [//www.codinghorror.com/blog/2005/05/stored-procedures-vs-ad-hoc-sql.html](http://www.codinghorror.com/blog/2005/05/stored-procedures-vs-ad-hoc-sql.html)

通常，当人们想要限制开发人员使用存储过程时，这是为了获得不真实的好处，他们没有意识到他们无缘无故地减慢了开发速度。并不是说存储过程不好，但它们有它们的位置，并且有一条规则说它们应该尽可能广泛地使用是没有意义的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-25T06:20:03.953

实体框架不会发生在服务器端。它生成一个 sql 查询，该查询在 db 上执行。结果集它被 ef 映射到一个对象。这称为 ORM。谷歌应该有大量关于 ORMS 的信息。

布莱尔

# android - 将表单从 Android 应用程序直接提交到 SMS

> ID：10749402
> 
> 赞同：0
> 
> 时间：2012-05-25T06:17:23.673
> 
> 标签：android, forms, sms

我想要一个提交按钮，通过 SMS 将相关表单的内容直接发送到电话号码。但是，电话号码应该是私人的。数字可以编码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:33:23.420

您的提交按钮的 onClick 处理程序需要执行以下操作：

1.  浏览活动中的所有相关视图并获取当前值。
2.  从值创建一个文本字符串。
3.  创建一条以文本字符串作为消息正文的 SMS 消息并发送到您的服务器。

使用[android.telephony.SmsManager](http://developer.android.com/reference/android/telephony/SmsManager.html)发送 SMS 消息。请注意，您的应用需要特殊权限才能执行此操作。

这是一个教程，展示了如何完成所有这些操作：http: [//mobiforge.com/developing/story/sms-messaging-android](http://mobiforge.com/developing/story/sms-messaging-android)。

# ruby-on-rails - 为什么这段 Ruby 代码无法写入日志文件？

> ID：10749404
> 
> 赞同：3
> 
> 时间：2012-05-25T06:17:45.200
> 
> 标签：ruby-on-rails, ruby, logging, daemon

一旦脚本被守护，那么记录器就不能再写入文件了。那么我应该如何以及何时初始化日志？

```
require 'rubygems'
require 'daemons'
require 'logging'

def create_new_logger
    logger = Logging.logger['trend-analyzer']
    logger.add_appenders(
        Logging.appenders.rolling_file('./logs/trend-analyzer.log'),
        Logging.appenders.stdout
    )
    logger.level = :debug
    return logger
end

logger = create_new_logger

#this log message gets written to the log file
logger.debug Time.new 

Daemons.run_proc('ForestPress', :log_dir => '.logs', :backtrace => true) do
    running_as_daemon = true

    #this log message does NOT get written to the log file
    logger.debug Time.new

    loop do
        #this log message does NOT get written to the log file
        logger.info Time.new    
        sleep 5 
    end
end 
```

* * *

**编辑**

我注意到当前路径从我执行脚本的位置更改为`/`. 这可能是我无法记录消息的原因吗？

* * *

**编辑 2**

我现在在成为守护程序之前保存原始路径，然后使用`Dir.chdir`将路径设置为原始路径。然后我可以直接打开文件并写入它。但是日志记录宝石仍然无法写入它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:51:45.530

这是它开始工作的方式

```
require 'rubygems'
require 'daemons'
require 'logging'

def create_new_logger
    logger = Logging.logger['trend-analyzer']
    logger.add_appenders(
        Logging.appenders.rolling_file('./logs/trend-analyzer.log'),
        Logging.appenders.stdout
    )
    logger.level = :debug
    return logger
end

current_dir = Dir.pwd

Daemons.run_proc('ForestPress', :log_dir => '.logs', :backtrace => true) do
    Dir.chdir(current_dir)  

    logger = create_new_logger

    loop do
        puts Dir.pwd
        logger.debug Time.new   
        sleep 5 
    end
end 
```

# html - html5 文档类型属性

> ID：10749409
> 
> 赞同：0
> 
> 时间：2012-05-25T06:17:57.763
> 
> 标签：html, doctype

我已将我的站点文档类型从 XHTML 更新为 HTML5，

我目前有：

```
<!DOCTYPE html>
<html lang="en-GB" xml:lang="en-GB" dir="ltr" xmlns="http://www.w3.org/1999/xhtml"> 
```

我的问题是，当我从 xml 迁移到 html 时，属性 xml:lang 和 xmlns 是否仍然需要，我想不是，但想知道是否存在应该维护它们的任何情况？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:42:09.920

看看[全局属性](http://dev.w3.org/html5/markup/global-attributes.html)。

如果您有一个 xml 文档（[http://www.w3.org/TR/html5/global-attributes.html#the-lang-and-xml:lang-attributes](http://www.w3.org/TR/html5/global-attributes.html#the-lang-and-xml%3alang-attributes)） ，您应该只使用 xml 属性

# javascript - 从 django 视图中以 json 形式返回的数据中检索元素

> ID：10749411
> 
> 赞同：1
> 
> 时间：2012-05-25T06:18:12.533
> 
> 标签：javascript, python, ajax, django

在我`django`看来，我正在使用`simplejson`将一些搜索结果转换为`json`

```
vals = [('supposed to be a toaster.', 8),('we can do more than one thing.',14),("we could make a bicycle.",51)]

result={'results':vals}

serialized = simplejson.dumps(result) 
```

序列化=>

```
{"msg": "success!.",  "results": [["supposed to be a toaster.", 8], ["we can do more than one thing.", 14], [" we could make a bicycle.", 51]]} 
```

我可以通过以下方式将此序列化数据发送到 javascript 函数

```
return HttpResponse(serialized, mimetype="application/json") 
```

在我的 javascript 函数（使用 jquery）中，我可以将数据检索为

```
var data = $.parseJSON(res.responseText);
var results = data['results'] 
```

我想以以下格式显示结果

```
8  -- supposed to be a toaster. 
14 -- we can do more than one thing
51 -- we could make a bicycle 
```

我怎样才能在javascript中做到这一点？javascript 变量`results`包含 s

```
supposed to be a toaster.,8,we can do more than one thing.,14,we could make a bicycle.,51, 
```

我必须使用`regex`来分隔物品吗？还是有更好的解决方案？使用正则表达式的困难在于，字符串有时可能包含数字。

**编辑**

感谢 Priyank 和 alexey28 的回复，我试过了

```
for(var item in results) {
    var time = results[item][1];
    console.log('time='+time);
    var resStr =results[item][0];
    console.log('resStr='+resStr);
    formatedResult += time+ " --- " + resStr+'<br>';
}
$('#showresults').html(formatedResult); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:43:31.357

可变数据将包含数组，因此您可以：

```
var formatedResult = "";
for(var i = 0; i < data.length; i++) {
    var item = data[i];
    formatedResult += item[1] + " --- " + item[0];
}
// Set html for you <div id="resultOutput"></div>:
jQuery("div#resultOutput").html(formatedResult); 
```

# mysql - 如何使用 MYSQL 跟踪用户喜欢

> ID：10749412
> 
> 赞同：0
> 
> 时间：2012-05-25T06:18:14.377
> 
> 标签：mysql

对于像 Digg 这样的网站。如何使用 MYSQL 跟踪某人何时喜欢一篇文章？

跟踪喜欢的总数似乎很简单。我不明白的部分是如何 1\. 让用户不要只投票一次 2\. 允许用户点击他们的个人资料来查看他们喜欢的故事。

您是否会在表中有一列包含您只需添加逗号分隔的用户名的故事信息？您可以跟踪谁喜欢某个故事，但数据会变得非常庞大，尤其是对于像 digg 这样拥有 100,000 或更多用户的网站。您将如何让用户看到他们喜欢的所有故事？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:23:00.197

每个喜欢都需要一行。不要使用逗号分隔的列表。

* * *

> 如何 1\. 防止用户只对某事进行一次投票

在 articleid、userid 上创建唯一索引。

* * *

> 您将如何让用户看到他们喜欢的所有故事？

```
SELECT articleid FROM likes WHERE userid = 42 
```

* * *

> 但数据会变得巨大

是的，它可能会变得很大。大多数网站都可以轻松处理单个数据库。非常大的网站需要使用集群在多台机器上存储数据。需要对数据进行分区，以便应用程序知道在哪个服务器上查找数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:23:16.370

在社交网络中，这些天就像 Graph dataStructure。每个实体，如人、照片、视频、状态更新、评论等都是图的节点，而喜欢，不像是两个节点之间的连接。

理想情况下，您将有一个喜欢的表格，您只需在其中添加一个喜欢。您将在哪里存储喜欢的人、在列中喜欢的内容和其他信息。

复杂的社交网络不仅仅如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:24:17.773

您可以将喜欢存储在名为 story_likes 的单独表中，其中包含两列：story_id 和 user_id。

1）在数据库中放置一个约束，即这些组合应该是唯一的。这样你的用户只能喜欢一个故事一次。
2）您可以从该表中提取用户喜欢的故事，并使用您拥有的故事 ID 提取其他故事详细信息。100,000 行对于 MYSQL 数据库来说并没有那么大。

您还可以通过设置 state=ENUM('LIKED', 'DISLIKED') 列来允许用户不喜欢故事。

# android - 如何判断歌曲是否正在播放？

> ID：10749414
> 
> 赞同：0
> 
> 时间：2012-05-25T06:18:18.757
> 
> 标签：android, audio-player, android-music-player

我正在开发一个应用程序。

与我的申请有关，

我想通过任何其他音乐播放器应用程序或手机附带的默认音乐播放器知道背景中是否正在播放任何音频歌曲。

如果有人知道解决方案，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:29:33.007

你需要[`isPlaying()`](http://developer.android.com/reference/android/media/MediaPlayer.html#isPlaying%28%29)在`MediaPlayer`课堂上使用。

`isPlaying()`默认应用程序当前未播放时将返回 false `MediaPlayer`，因此您必须使用我们不知道的其他音乐应用程序。如果是这种情况，您可能应该发布您的代码。

# php - 非常奇怪的 php 包含行为..

> ID：10749417
> 
> 赞同：0
> 
> 时间：2012-05-25T06:18:21.643
> 
> 标签：php, include, cross-domain

包含 php 文件时，我遇到了一些非常奇怪的行为。
我需要加载一个与将要调用它的页面不在同一个域中的脚本。

我已经创建了一个使用 cURL 工作的系统，但我最近发现许多需要访问此脚本的站点都没有安装 cURL。但是，我确实注意到这些站点已`allow_url_fopen`设置为`on`. 有了这些知识，我开始创建一个新系统，让我只需将脚本包含在远程站点上。

只是测试一下，我将脚本编码`test.php`如下：

```
<?php 
echo("test");
?> 
```

我使用以下方法在远程页面上包含此脚本：

```
<?php
include("http://mydomain.com/script.php");
?> 
```

它没有问题，并且“测试”打印在页面顶部。

但是，如果我在脚本中添加一个函数并尝试从页面调用该函数，它就会崩溃。
更糟糕的是，这个网站关闭了 php 错误，我无法打开它。

为了完全确保我不只是弄乱了代码，我让自己`test.php`看起来像这样：

```
<?php
function myfunc()
{
return "abc";
}
?> 
```

然后在包含文件的页面上：

```
<?php 
include("http://mydomain.com/script.php");
echo(myfunc());
?> 
```

它崩溃了。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:23:05.740

这不是奇怪的行为，但是由于您是通过 Internet 加载文件（在本例中请注意万维网），因此在将文件发送到您的包含函数之前会对其进行解释。

由于脚本被解释，所以没有函数可见，而只有脚本的输出。

要么通过 FTP 加载它，要么为这些函数创建一个 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:28:46.870

您包括来自 test.php 的客户端输出，而不是服务器端源代码。将 test.php 重命名为 test.phpc 以防止执行脚本。然而，从安全的角度来看，这是危险的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:25:34.523

我的猜测：mydomain.com 的 Web 服务器`http://mydomain.com/script.php`会**解释PHP。**你只是那个脚本`including`的*结果*。简单`echo("test")`来说，就是“测试”。函数不会产生任何输出，并且不能用于`including`脚本。`http://mydomain.com/script.php`只需在浏览器中访问即可确认这一点，看看你得到了什么。您需要阻止 mydomain.com 实际解释 PHP 文件并将其作为纯文本返回。

**但是：**一开始这听起来是个坏主意。跨域包含是一种反模式。它不仅使您面临安全问题，而且还会使每个页面的加载速度都不必要地变慢。如果跨域包含是答案，那么您的问题是错误的。

# c++ - 将多个整数编码为双精度

> ID：10749419
> 
> 赞同：0
> 
> 时间：2012-05-25T06:18:49.587
> 
> 标签：c++, encoding

我想将一对整数编码为双精度数。例如说我想传递一个函数：

```
foo(int a, int b) 
```

但相反，我只想要一个双精度来表示两个整数（即）：

```
foo(double aAndB) 
```

目前，我通过在小数点的任一侧设置一个 int（即 10 和 15 将变为 10.15）然后将其转换为 stringstream 标记并提取这两个数字来做到这一点。

然而，当涉及到像 10 和 10 这样的数字时，这有一个明显的缺陷，即它变成了 10.1。

有没有办法通过一些棘手的数学方法来做到这一点，以便我可以传递一个代表 2 个整数的双精度函数？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T06:44:55.470

由于（通常）一个 double 有 64 位，每个 int 有 32 位，你会认为你可以直接将这些位存储到 double 中，例如：

```
int32_t i1 = rand();
int32_t i2 = rand();
int64_t x = (((int64_t)i1)<<32) | ((int64_t)i2);
double theDouble;
memcpy(&theDouble, &x, sizeof(theDouble)); 
```

......并且这样做“几乎有效”。也就是说，它适用于 i1 和 i2 的许多可能值——但并非适用于所有值。特别是，对于 IEEE754 浮点格式，指数位设置为 0x7ff 的任何值都将被视为指示“NaN”，并且浮点硬件可以（并且确实）将不同的 NaN 等效位模式转换回其首选将 double 作为参数传递时的 NaN 位模式等。

正因为如此，在大多数情况下，将两个 32 位整数填充到双精度中似乎是可行的，但是如果您使用所有可能的输入值对其进行测试，您会发现在某些情况下，这些值在它们停留在双精度中时会意外变异，并且当您再次解码它们时，它们会出现不同的值。

当然，您可以通过仅设置双精度的尾数位来解决此问题，但这只会为每个整数提供 26 位，因此您只能存储 +/- 33,554,432 左右的整数值。也许没关系，具体取决于您的用例。

我的建议是，找到一种不同的方式来做你想做的任何事情。将非浮点数据存储在浮点变量中是自找麻烦，特别是如果您希望您的代码完全可移植。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T06:34:20.563

如果你很幸运并且 int 是 double 的一半，你可以像这样存储 int：

```
整数a = 10；
诠释 b = 20;
双 d;

*(int *)&d = a;
*((int *)&d + 1) = b;

int outa = *((int *)&d);
int outb = *(((int *)&d) + 1);
printf("%d %d\n", outa, outb);

```

这通常不起作用/可移植性。如果 double 和 int 具有相同的位数，那么您想要的就是不可能的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T06:33:07.660

double 可以精确地表示最多 53 位的整数。如果你想保存一个 26 位和一个 27 位整数，这很容易：`double combined = bits27*67108864.0 + bits26;`

请注意，67108864 是 2^26。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T06:35:08.937

尝试像这样定义一个联合：

```
struct two_int {
    int a;
    int b;
};

union encoding {
    struct two_int a;
    double c;
}; 
```

但是这样做可能会带来便携性问题。请仔细检查这种方法是否适合您的情况。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T06:35:13.720

您可以通过使用二进制掩码并从“双”中提取信息来做到这一点。

例如：

```
double encode(int a, int b)
{
    double d = 0;
    d = d | a; 
    d = d | (b << 8);
    return d;
}

double decode(double d)
{
    a = d & 0xFF;
    b = (d >> 8) & 0xFF;
} 
```

在编码部分，a 将在双变量 d 的低 8 位中，b 将在 d 的高 8 位中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T06:36:46.283

如果你总是将两个整数传递给这个参数，那么传递一个双精度整数是没有意义的。而是将两个整数作为单独的整数传递，或者将它们包装在一个结构中。

你这样做的方式让你没有机会检测真正的双精度和两个整数之间的差异。因此，我得出结论，通过执行我上面描述的操作，您不会失去任何功能。

# android - Android - ActionBarSherlock - 在菜单中设置文本的文本颜色

> ID：10749420
> 
> 赞同：5
> 
> 时间：2012-05-25T06:18:50.133
> 
> 标签：android, menu, android-actionbar, actionbarsherlock, submenu

我想将文本的白色更改为橙​​色。

这是一个例子。

![动作条夏洛克](../Images/4f3b7dac2afb29e7cf95d689dd4ee585.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T06:55:47.927

这可以通过为您的操作栏设置一些样式来完成。这篇博文中有解释[http://android-developers.blogspot.com.au/2011/04/customizing-action-bar.html](http://android-developers.blogspot.com.au/2011/04/customizing-action-bar.html)

你需要为你的应用设置你的风格。

```
<style name="MyTheme" parent="android:style/Theme.Holo.Light">
     <item name="android:dropDownListViewStyle">@style/MyDropDownListView</item>
</style> 
```

然后您可以使用自己的文本颜色指定此样式。

```
<!-- style the items within the overflow menu -->
<style name="MyDropDownListView" parent="android:style/Widget.Holo.ListView.DropDown">
    <!-- This is the orange text color -->
    <item name="android:textColor">#CC3232</item>
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T15:15:56.957

`MenuItem`您可以通过使用`SpannableString`而不是轻松更改文本的颜色`String`。

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.your_menu, menu);

    int positionOfMenuItem = 0; // or whatever...
    MenuItem item = menu.getItem(positionOfMenuItem);
    SpannableString s = new SpannableString("My red MenuItem");
    s.setSpan(new ForegroundColorSpan(Color.RED), 0, s.length(), 0);
    item.setTitle(s);
} 
```

# google-apps-script - 在触发函数发送电子邮件之前，某些电子表格单元格未更新

> ID：10749427
> 
> 赞同：1
> 
> 时间：2012-05-25T06:19:43.673
> 
> 标签：google-apps-script, google-sheets

我有一个电子表格，它使用 Vmerge 和 Query 公式从其​​他 6 个电子表格中提取和累积所有必需的数据，所有合并的数据将转换为 pdf 并使用触发事件通过电子邮件发送到邮件 ID。

每次发布的附件邮件都包含所有标题和其他格式时，这里开始出现问题，但是提取的数据没有出现。似乎`-`打开同一个电子表格，一段时间后所有`-`（连字符）都被数据替换/希望在打开电子表格一段时间后所有数据更新。

[表格链接](https://docs.google.com/spreadsheet/ccc?key=0AjkkHlm3kCphdDB3MURnOUlmajZGem8taTJkSGU1emc)

![截屏](../Images/212684875200907cc8579153fe0ffb0a.png)

谁能指导我解决这个问题。

对于这个解决方案应该是 -> 应该更新所有数据，然后电子邮件脚本应该可以工作；或者它应该在电子邮件脚本开始之前更新。

或任何其他更好的想法表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:41:48.337

某些电子表格公式，如`ImportRange`和`ImportXml`（以及 Apps 脚本自定义公式）仅在有人登录电子表格时才进行评估。就像这些功能需要一个帐户来评估，例如，在`importRange`登录的帐户中必须有权访问正在导入的范围，如果您与某人而不是`importRange`源共享此电子表格，当此人查看此电子表格时，`importRange`函数将不起作用（好吧，除非您也在电子表格中并且已经对公式进行了评估）。

底线是，您不能拥有此公式并使用在时间驱动上触发的脚本（或其他不需要有人登录的触发器）并期望脚本能够读取此数据。

解决方法虽然很简单。执行该`importRange`函数在脚本中的作用！例如

```
var source = SpreadsheetApp.openById('source-spreadsheet-key');
var data = source.getSheetByName('List').getRange('I6:AT500').getValues();
//then save it somewhere
var s = Spreadsheet.getActive().getSheetByName('hidden-import');
s.getRange('I6:AT500').setValues(data);
SpreadsheetApp.flush(); //force the data to be written
//so all the other formulas on your spreadsheet get updated with the new data 
```

脚本难以模仿的所有“逻辑”公式，例如`query`and ，都可以留在电子表格中，但请参考我刚刚发明的这个“隐藏导入”表，而不是直接嵌套。`vmerge``importRange`

**[编辑]**

要仅复制非空行，请执行以下操作：

```
var data = SpreadsheetApp.openById('source-spreadsheet-key').
  getSheetByName('List').getDataRange().getValues();
Spreadsheet.getActive().getSheetByName('hidden-import').
  getRange(1,1,data.length,data[0].length).setValues(data); 
```

# iphone - NSURLRequest setHttpBody

> ID：10749432
> 
> 赞同：0
> 
> 时间：2012-05-25T06:20:07.293
> 
> 标签：iphone, nsurlrequest, multipartform-data, form-data

我收到了一个错误的帖子（php:echo $_POST），如下所示： **Array ( [email"aa@qq_com] => ------------------------ -----14737809831466499882746641449 内容处置：表单数据；名称=“密码”c8837b23ff8aaa8a2dde915473ce0991）**

我的代码：

```
// set header value ,   some random text that will never occur in the body  
NSString *boundary = @"---------------------------14737809831466499882746641449";   NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];   [request addValue:contentType forHTTPHeaderField: @"Content-Type"];         /*   now lets create the body of the post      */   NSMutableData *body = [NSMutableData data];              //  email part         
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];        
[body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"email\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];   
[body appendData:[anEmail dataUsingEncoding:NSUTF8StringEncoding]];     
[body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];          //  password part     [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];     
[body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"password\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];    
[body appendData:[aPassword dataUsingEncoding:NSUTF8StringEncoding]];     
[body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];          //  image part     [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];        
[body appendData:[[NSString stringWithFormat: @"Content-Disposition: form-data; name=\"uploadingImage\"; filename=%@\r\n", anImageName]                        dataUsingEncoding:NSUTF8StringEncoding]];    
[body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];   
[body appendData:[NSData dataWithData:aFileData]];     
[body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];             
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];  
// setting the body of the post to the reqeust  
[request setHTTPBody:body];         // now lets make the connection to the web  
NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:18:45.237

它应该是

```
name=\"password\"\r\n\r\n%@",password]; 
```

但现在你这样做

```
name=\"password\"\r\n%@\r\n",password]; 
```

希望你理解错误..

# ios - UITableView 中的自定义 UIButton 在被按下后保持突出显示

> ID：10749434
> 
> 赞同：2
> 
> 时间：2012-05-25T06:20:16.747
> 
> 标签：ios, xcode, uitableview, uibutton

我已经实现了一个自定义 UIButton，发布在 cocoacontrols.com：

[http://cocoacontrols.com/platforms/ios/controls/imageless-gradient-buttons](http://cocoacontrols.com/platforms/ios/controls/imageless-gradient-buttons)

我刚刚将项目转换为 ARC 并设置了按钮。它们可以工作，但在按下一次后，它们会保持突出显示的渐变。

要设置它们，我只是更改了故事板和 IBOutlets 上的类，并在 viewDidLoad 上选择了我想要的渐变。

关于可能是什么问题的任何想法？

**编辑**：我一直在花更多时间在它上面，而且问题似乎只发生在按钮位于 UITableView 上时。它在 UIViewController 上时可以正常工作

**编辑#2**：根据 NSLogs，当容器是 UIViewController 时，按下按钮时渐变恢复正常：

```
2012-05-26 10:53:17.950 GradientButtons[11507:f803] highlighthed
2012-05-26 10:53:18.040 GradientButtons[11507:f803] highlighthed
2012-05-26 10:53:18.140 GradientButtons[11507:f803] Normal 
```

但是当容器是 UTableViewController 时，按钮仍保持高亮渐变：

```
2012-05-26 10:55:20.969 GradientButtons[11507:f803] highlighthed
2012-05-26 10:55:21.069 GradientButtons[11507:f803] highlighthed 
```

我检查了 viewContentMode，所有按钮、UIView 和 UITableView（缩放到填充）都是一样的。将其更改为重绘不会改变行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T23:41:51.240

检查负责正常/突出显示的渐变绘制：

```
 if (self.state == UIControlStateHighlighted)
        gradient = self.highlightGradient;
    else
        gradient = self.normalGradient; 
```

您需要设置断点或添加 NSLog 以查看那里是否选择了正常渐变。如果没有，下一步将覆盖普通的 UIButton `drawRect`添加状态日志。使用它而不是彩色按钮来查看这是否是您的表格的标准 UIButton 行为（例如，您可能会在单击按钮后保持单元格突出显示，这会强制子视图也被突出显示）

* * *

根据您的日志，我发现它很有趣并重现了该问题，这似乎是要捕获突出显示状态的竞争条件`touchesEnded`（尝试按住单击大约一秒钟 - 状态将`normal`处于`touchesEnded`）。原因需要进一步调查，作为一种解决方法，您可以使用以下代码：

```
-(void) setHighlighted:(BOOL)highlighted
{
    NSLog(@"setHighlighted %@", highlighted ? @"Y": @"N");
    [super setHighlighted:highlighted];
    [self setNeedsDisplay];
} 
```

# arrays - Perl 以不同的方式加入？

> ID：10749438
> 
> 赞同：4
> 
> 时间：2012-05-25T06:20:30.617
> 
> 标签：arrays, perl, join

我正在研究 perl 模块并寻找以下形式的输出（字符串）：`a:value1 OR a:value2 OR a:value3 OR ...`

这些值`value1, value2, value3...`在一个数组中（例如，@values）。

我知道我们可以使用`join( ' OR ', @values )`以下形式创建连接字符串：`value1 OR value2 OR value3 OR ...`

但正如您在上面看到的，我需要在每个值之前附加`a:`一个附加值。

这样做的好方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T06:31:50.250

您通常将[map](http://perldoc.perl.org/functions/map.html)用于以下类型的事情：

```
#!/usr/bin/env perl
use strict;
use warnings;

my @array = qw(value1 value2 value3);
print join(" OR ", map "a:$_", @array),"\n"; 
```

输出：

```
a:value1 OR a:value2 OR a:value3 
```

`map`是一个简单的循环结构，当您想对列表的每个元素应用一些简单的逻辑而不会使代码过于混乱时，它很有用。

# iphone - 写入 plist 但是当我退出模拟时它是空的

> ID：10749440
> 
> 赞同：0
> 
> 时间：2012-05-25T06:20:41.227
> 
> 标签：iphone, xcode, plist

嗨，我实现了这个对象 PlistManager 以在我的项目中写入/读取 plist。问题是 plist 填充良好将运行（我希望）并且在进入后台时（我使用通知和 NSlog [Plistmanager readPlist:@"Database" ]) 我仍然可以读取之前输入的数据。

**关键是当我在 xcode 上停止模拟并再次运行时，plist 现在是空的。为什么？**

```
@interface ReadWritePlist : NSObject
+(void)writeToPlist:(NSString*)filePlist dic:(NSDictionary*)dic;
+ (NSMutableDictionary *)readPlist:(NSString*)filePlist;

@end

@implementation ReadWritePlist

+ (void)writeToPlist:(NSString*)filePlist dic:(NSDictionary*)dic
{

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    [dic writeToFile:[documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.plist",filePlist]] atomically:YES];

}

+ (NSMutableDictionary *)readPlist:(NSString*)filePlist {

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *filePath = [[documentsDirectory stringByAppendingPathComponent:filePlist] stringByAppendingPathExtension:@"plist"];
    NSMutableDictionary *dic=[[NSMutableDictionary alloc] initWithContentsOfFile:filePath];

    return dic;
} 
```

**解决了**

我刚刚找到了这些用于读/写 plist 的新方法并且它正在工作。我必须在 appdelegate (didFinishLaunchingWithOptions) 中添加“initializeFileDic”方法：

```
@implementation PlistManager

+ (NSMutableDictionary *)readPlist:(NSString*)filePlist {

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [[documentsDirectory stringByAppendingPathComponent:filePlist] stringByAppendingPathExtension:@"plist"];
NSMutableDictionary *dic=[[NSMutableDictionary alloc] initWithContentsOfFile:filePath];

return dic;
}

+ (void)writeToPlist:(NSString*)filePlist dic:(NSDictionary*)dic
{

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

    if ([dic writeToFile:[documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.plist",filePlist]] atomically:YES]) {
    NSLog(@"Ok done!");
    } 
    else{
            NSLog(@"Noo not done!");
    }
} 

+ (void)initializeFileDic:(NSString*)FileNameExt
{
    NSString *path = [[NSBundle mainBundle] bundlePath];
    NSString *startPath = [[path stringByAppendingPathComponent:FileNameExt]stringByAppendingPathExtension:@"plist"] ;
    NSString *documentsDirectoryPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *filePath = [[documentsDirectoryPath stringByAppendingPathComponent:FileNameExt]stringByAppendingPathExtension:@"plist"];

    NSLog(@"%@ \n,\n %@ ",startPath,filePath);
    if([NSDictionary dictionaryWithContentsOfFile: startPath]){
    NSLog(@"File %@ exists",filePath);
    }
    if (![[NSFileManager defaultManager] fileExistsAtPath:filePath]){
        if([[NSDictionary dictionaryWithContentsOfFile:startPath] writeToFile:filePath atomically:NO])
        NSLog(@"File copied inside App DocumentsDirectory\n\n");
    else
        NSLog(@"Error while trying to copy into DocumentsDirectory\n\n"); 
    }

}

@end 
```

任何人都可以解释什么是错的？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:41:00.187

您何时调用将数据保存到 plist？如果您从 Xcode 退出您的应用程序，那么它会立即终止，并且不会通过任何与终止或进入后台相关的应用程序委托方法，这是我怀疑您的代码所在的地方。

按下模拟器上的主页按钮是让这些方法运行的方法。

# c++ - 在 VC++ 的另一个文件中访问一个文件中声明的变量。（外部关键字使用）

> ID：10749442
> 
> 赞同：0
> 
> 时间：2012-05-25T06:20:45.453
> 
> 标签：c++, visual-c++, global-variables, extern

我有一个 VC++ 解决方案（使用 VS2008），有 2 个项目项目 A 和项目 B。

我在下面讨论的所有内容都是针对项目 A。

项目 A 有一个源文件 a.cpp，它包含一个头文件“ah”。"ah" 有一个变量 int varA；这是在 a.cpp 中修改的。

```
a.cpp:
int varA = x*2;
// also do some calculations with varA in a.cpp 
```

现在在同一个项目A中还有一个sourec文件b.cpp。现在可以说这个“b.cpp”也包含相同的头文件“ah”。IE

```
b.cpp
int varB = varA; // If I want to access varA & get the current value of varA here in b.cpp what should do ? Will it work if I declare varA as extern in a.h & include 
```

**这里需要注意的是，我不仅要从 b.cpp 中访问变量 varA，还要访问由 a.cpp 更新的该变量的当前值。**

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:37:12.960

创建头文件啊

```
extern int varA; 
```

在 A.cpp 中声明变量

```
int varA; 
```

在 b.cpp 中包含“Ah”

而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:32:46.690

在某个头文件中声明变量，然后将此头文件包含到您要使用它的 cpp 文件中。

# mysql - 关于使用 load infile 命令将大量数据加载到表中

> ID：10749445
> 
> 赞同：0
> 
> 时间：2012-05-25T06:20:52.707
> 
> 标签：mysql

将逗号分隔的 txt 文件加载到表中时出现问题。文件很大。它的大小为**2 GB**，包含**65 列**和**34 Lac**行。我做了以下设置来加载这个文件：

*   `Query-LOAD DATA LOCAL INFILE filename INTO TABLE tablename FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\r\n' IGNORE 1 LINES;`

在文件中`my.ini`我添加了以下变量

*   `[mysqld] max_allowed_packet=60M`
*   `[myisamchk] key_buffer_size=512M myisam_max_sort_file_size=3G`

我是mysql的新手。谁能帮我加载这个文件。当我运行上面的查询时，我得到了 4-5 次以下结果。

```
Query OK,0 rows affected(25.09 sec)
Records:0 Deleted:0 Skipped:0 Warnings:0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:28:27.420

尝试不使用 LOCAL 关键字，如果这不能解决您的问题，请发布文本文件的一些第一行，以便我们查看是否所有行都因不匹配参数中指定的模式而被忽略。

**更新 1：** 现在我看到您正在使用 '\r\n' 终止符

```
LINES TERMINATED BY '\r\n' 
```

您是否尝试过将此行修改为仅使用“\n”：

```
LINES TERMINATED BY '\n' 
```

?

**更新 2：** 尝试在 LOAD DATA 命令中指定表列；

```
LOAD DATA INFILE filename
INTO TABLE tablename
FIELDS TERMINATED BY ';' ENCLOSED BY '"' ESCAPED BY '\\' LINES TERMINATED BY '\r\n'(
`tableColumn1` , `tableColumn2`, ..., `tableColumn65`
) 
```

可能是文件和表的列数不匹配，或者文件列与表列的顺序不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:27:43.567

使用外部 ulil

```
mysqlimport --ignore-lines=1 --fields-optionally-enclosed-by="\"" --fields-terminated-by=, --lines-terminated-by="\r\n" --user=YOUR_USERNAME --password YOUR_DATABASE tablename.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T07:17:22.393

我自己找到了我的问题的答案。

1.我用gslipts软件**拆分了我的文件，并对**每个新创建的文件进行了相应的更改。

**2.之后，我以正确格式**打开这些文件半小时，然后**创建每个拆分的 csv 文件**（由 gslipts 创建的文件）并**触发加载数据命令**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-31T09:42:11.390

当您的 INFILE 很大时，必须调整 max_allowed_pa​​cket 以适应 5.6 的 refman 中每个此链接的最大 1G。 [https://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_max_allowed_pa](https://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_max_allowed_packet) ​​cket 准备工作可以包括“会话” SET local_infile=1; SET max_allowed_pa​​cket=1073741824（可能需要更多选项）在 LOAD DATA INFILE 文件名 INTO TABLE 表名 ..... 文件名之前可能需要完整路径，即。C:\文件夹\子文件夹\我的文件名.ext

警告将 .ini/.cfg 中的 max_allowed_pa​​cket 更改为 1G 可能会导致日常操作中出现意外的内存压力。使用您的会话变量来满足此会话期间的 1G 要求。如果你没有 1G 的内存可用于此目的，你无论如何也无法成功。

# tridion - 在 SDL Tridion 2011 的 Dreamweaver 模板构建块中处理多个组件演示

> ID：10749449
> 
> 赞同：4
> 
> 时间：2012-05-25T06:21:10.017
> 
> 标签：tridion, tridion-2011

我正在 SDL Tridion 2011 SP1 中开发 Dreamweaver TBB。在 TBB 中，我使用来自不同组件表示的数据。

```
My Template Building Block looks like this. 
```

主要成分：

```
<div>@@Component.Schema.Title@@</div>

<!-- TemplateBeginRepeat name="Fields.link" -->

    @@RenderComponentPresentation(Field, "tcm:1-8142-32")@@

<!-- TemplateEndRepeat --> 
```

组件模板：tcm:1-8142-32

它的 DWT TBB 看起来像这样。

```
<!-- TemplateBeginIf cond="Component.Fields.text" --> 
    <div>@@RenderComponentField("text",0)@@</div>
<!-- TemplateEndIf --> 
```

当我预览组件时，我得到了输出，并且所有组件演示都按预期执行。

输出：

```
SchemaName
    data1
    data2 
```

然后我创建了带有页面 TBB 的页面。

```
<html>
    <head></head>
    <body>
        <!-- TemplateBeginRepeat name="Components" -->
            @@RenderComponentPresentation()@@
        <!-- TemplateEndRepeat -->
    </body>
</html> 
```

输出不如预期。组件模板“tcm:1-8142-32”未执行。

输出：

```
SchemaName 
```

我也想让 SiteEdit 成为链接组件。

我是否需要在现有模板中添加额外的模板？我正在使用 Tridion 2012 UI。

我知道我们需要 add `isQueryBased`，属性必须设置为 true。

如果是，任何人都可以帮助该命令将其设置为真的吗？

我不知道问题出在哪里。

任何人都可以帮我修改代码并为嵌入式组件实现 SiteEdit 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T06:37:35.337

在 Dreamweaver 模板中，可以通过两种方式调用 RenderComponenetPresentation()。

1.  如果您正在遍历页面上的组件演示文稿（我认为这是您在做什么？）

2.  如果由于某种原因您需要使用不同的模板渲染组件，而不是您将其添加到页面的模板。

假设第一是您正在做的事情，那么您已经使用正确的模板将组件添加到页面中。因此，您可以调用 @@RenderComponentPresentation()@@ 而不使用这样的参数：

```
<html>
    <head></head>
    <body>
        <!-- TemplateBeginRepeat name="Components" -->
            @@RenderComponentPresentation()@@
        <!-- TemplateEndRepeat -->
    </body>
</html> 
```

“IsQueryBased”与您的问题无关。这连接到 SiteEdit 和动态组件演示。

更新 -

看起来您在这里有 2 个问题：

1.  如何为链接组件调用 RenderComponentPresentation
2.  如何使组件成为“SiteEditable”

查看问题 1 - 假设您的组件数组不是页面上的组件演示文稿，您的初始方法几乎是正确的：

```
@@RenderComponentPresentation(Component.ID,"tcm:xx-xx-xx")@@ 
```

您应该能够从数组中获取组件 ID，但您需要自己指定 ComponentTemplate ID。

出于测试目的，首先对组件模板的 Tcm ID 进行硬编码。

由于将 Tcm ids 放在模板中是不好的做法，因此您需要编写一个 TBB 以使其在包中可供您使用。然后，您可以替换您用于测试的 Tcm Id。

关于您的 SiteEdit 问题，[本指南](http://www.sdltridionworld.com/community/extension_overview/siteedit-2009-essentials.aspx)可能会有所帮助，如果没有发布一个新问题，详细说明您的问题的确切性质。

# objective-c - 发送到 Objective-C 中的对象的消息可以被监视或打印出来吗？

> ID：10749452
> 
> 赞同：10
> 
> 时间：2012-05-25T06:21:19.537
> 
> 标签：objective-c, ios, xcode

> **可能重复：**
> [在Objective-C中拦截方法调用](https://stackoverflow.com/questions/1618474/intercept-method-call-in-objective-c)
> [如何记录iOS应用程序中使用的所有方法](https://stackoverflow.com/questions/7270502/how-to-log-all-methods-used-in-ios-app)

例如，`UIViewController`iOS 中的对象在其视图显示给用户之前会收到许多消息：

1.  `viewWillAppear`
2.  `viewWillLayoutSubviews`
3.  `viewDidLayoutSubviews`
4.  `viewDidAppear`
5.  ...

因为框架的源代码是不可见的，所以我们不得不依赖书籍或博客，或者有没有办法打印或监视所有通过（1）Objective-C 或（2）任何工具发送到该对象的消息?

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-25T07:37:43.743

我使用（并且仍在使用）的最佳方法不是我的评论，而是调用：

```
(void)instrumentObjcMessageSends(YES); 
```

当我需要开始记录所有消息然后：

```
(void)instrumentObjcMessageSends(NO); 
```

不要忘记添加`#import <objc/runtime.h>`.
当我不再需要它时。烦人的事情是日志是在下面创建的`/tmp/msgSends-`，这意味着您必须打开终端并使用`tail`它以可读的方式查看它。

打印出来的内容是这样的：

```
- CustomTableViewController UIViewController _parentModalViewController
- CustomTableViewController UIViewController isPerformingModalTransition
- CustomTableViewController UIViewController setInAnimatedVCTransition:
- CustomTableViewController UIViewController viewWillMoveToWindow:
- CustomTableViewController UIViewController isPerformingModalTransition
- CustomTableViewController UIViewController parentViewController
- CustomTableViewController UIViewController _popoverController
- CustomTableViewController UIViewController _didSelfOrAncestorBeginAppearanceTransition
- CustomTableViewController UIViewController parentViewController
- CustomTableViewController UIViewController __viewWillDisappear:
- CustomTableViewController UIViewController _setViewAppearState:isAnimating:
- CustomTableViewController UIViewController automaticallyForwardAppearanceAndRotationMethodsToChildViewControllers 
```

注意：自从我上次使用这种方法以来已经有一段时间了，看起来这种方法没有记录私有方法的子类。因此，如果您有一个`DummyClass`with`-(void)_dummyMethod`作为私有然后有一个`DummySubClass`with`-(void)_dummyMethod`实现，则不会记录该消息。

**对于 iOS，这仅适用于模拟器。**

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-25T06:53:03.410

您可以使用 DTrace 监视正在运行的应用程序以查看调用的方法和类。您可以在命令行上使用 DTrace 轻松监控在模拟器中运行的 iOS 应用程序，首先您需要找到应用程序的 PID，`ps`然后您可以运行 DTrace 探针，如下所示：

```
sudo dtrace -q -n 'objc1234:::entry { printf("%s %s\n", probemod, probefunc); }' 
```

其中 1234 是应用程序的进程 ID。

这将产生如下所示的输出：

```
UIStatusBarItemView -isVisible
UIStatusBarLayoutManager -_positionAfterPlacingItemView:startPosition:
UIView(Geometry) -frame
CALayer -frame
UIStatusBarLayoutManager -_startPosition
UIView(Geometry) -bounds
CALayer -bounds
UIStatusBarItemView -standardPadding
UIStatusBarItem -appearsOnLeft
UIStatusBarItem -leftOrder 
```

例如，如果您只对跟踪单个类感兴趣，则`UIView`可以使用：

```
sudo dtrace -q -n 'objc1234:UIView::entry { printf("%s %s\n", probemod, probefunc); }' 
```

如果您想跟踪`dealloc`对所有类的所有调用，您可以使用：

```
sudo dtrace -q -n 'objc1234::-dealloc:entry { printf("%s %s\n", probemod, probefunc); }' 
```

显然，您可以将这些组合起来只看到`UIView` `dealloc`s：

```
sudo dtrace -q -n 'objc1234:UIView:-dealloc:entry { printf("%s %s\n", probemod, probefunc); }' 
```

如果您希望能够区分某个类的特定对象，您还可以`self`使用以下命令打印对象 ( ) 的内存地址：

```
sudo dtrace -q -n 'objc1234:UIView:-dealloc:entry { printf("%s (0x%p) %s\n", probemod, arg0, probefunc); }' 
```

DTrace 非常强大，可以做的比我在这里展示的要多得多。

# android - 模拟传感器

> ID：10749457
> 
> 赞同：1
> 
> 时间：2012-05-25T06:21:45.687
> 
> 标签：android, android-emulator

是否有可以在 Android 模拟器上模拟的传感器类型，或者我必须为任何传感器（当然是设备）使用外部工具？我的意思就像我可以在 Eclipse 中使用 DDMS 透视图来模拟电话或位置，也许有一个传感器（如光或温度）我也可以控制并向模拟器发送参数。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:30:51.600

我认为您可以为此目的使用**SensorSimulator 。**[在这里下载它的链接..还有助于如何使用传感器模拟器](http://code.google.com/p/openintents/wiki/SensorSimulator)

# javascript - Javascript替换未转义的斜杠

> ID：10749461
> 
> 赞同：0
> 
> 时间：2012-05-25T06:22:02.410
> 
> 标签：javascript, regex, node.js, replace

我想用反斜杠替换字符串中未转义的斜杠。但是奇怪的事情发生了：

```
"\content\hs\gj\home.css".replace(/\\/gi,"/") 
```

返回“contenthsgjhome.css”。我明白，如果将其更改为

```
"\\content\\hs\\gj\\home.css".replace(/\\/gi,"/")` 
```

然后它将按预期工作，但我无法更改字符串，因为它只是 nodejs 的输出`path.join("conetnt", "hs", "gj", "home.css")`。

我该做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T06:34:01.093

它返回的原因是`"contenthsgjhome.css"`您的字符串中根本没有任何反斜杠，因为字符串文字中的单个反斜杠将被忽略，除非它们对转义以下字符有意义（例如，`"\\"`或`"\n"`）。`"\c"`作为转义没有特殊含义，因此它被解释为`"c"`.

```
"\content\hs\gj\home.css" 
```

结束与以下内容相同：

```
"contenthsgjhome.css" 
```

所以没有反斜杠可供`.replace()`查找。

（请注意，如果您*确实*在字符串文字中转义了反斜杠，那么`"\\"`这只是文字语法的一部分，并且一旦被解释，结果字符串只有一个反斜杠`"\"`。）

也许如果您可以解释“这只是 FS 的输出”的意思，那么有人可以提供更多建议。这是 JSP/ASP/PHP/etc 输出 JS 代码时的常见问题 - 转义需要在 JS 解释器看到之前发生在 JSP/ASP/PHP/etc 代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-26T18:38:14.237

```
yourstring.split(String.fromCharCode(92)).join('/') 
```

# oracle - DBMS_JOB 中的 DDL 语句

> ID：10749467
> 
> 赞同：0
> 
> 时间：2012-05-25T06:22:15.670
> 
> 标签：oracle, ddl, dbms-job

我正在尝试使用 DBMS_JOB 安排作业（出于安全原因，我不能使用 DBMS_SCHEDULER），它使用 DDL 语句。

```
DECLARE
job_num NUMBER;
BEGIN
DBMS_JOB.SUBMIT(job => job_num,
what => 'BEGIN EXECUTE IMMEDIATE ''CREATE TABLE temp1 (ID NUMBER)''; END;'
);
DBMS_OUTPUT.PUT_LINE('JobID'||job_num);
DBMS_JOB.RUN(job_num);
END;
/ 
```

它无法执行给我一条错误消息：

> ORA-12011：执行 1 个作业失败 ORA-06512：在“SYS.DBMS_IJOB”，第 548 行 ORA-06512：在“SYS.DBMS_JOB”，第 278 行 ORA-06512：在第 8 行

从匿名块中删除**DBMS_JOB.RUN()**语句后，我至少能够创建（并保存）作业。当我检查作业时，它已将其保存为 **执行** BEGIN EXECUTE IMMEDIATE 'CREATE TABLE temp1 (id NUMBER) '; 结尾;

如果我独立执行它，它显然会执行。当我尝试通过调用 DBMS_JOB.RUN() 来执行整个事情时，它唯一一次失败了。

在 DBMS_JOB 中使用 DDL 语句作为参数是否有限制？我在文档中找不到任何指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T13:17:27.917

在回应其他评论者的观点时——动态创建表是一个危险信号，通常表明您确实应该使用全局临时表——有几个问题。

1.  `DBMS_JOB.RUN`您是否有需要致电的理由？您的调用`DBMS_JOB.SUBMIT`是告诉 Oracle 在父事务提交后立即异步运行该作业。所以，通常，你会打电话`DBMS_JOB.SUBMIT`，然后只是'COMMIT'。
2.  提交作业的用户是否具有`CREATE TABLE`直接授予的权限？我的猜测是用户只有`CREATE TABLE`通过角色授予的权限。这将允许您以交互方式而不是在作业中运行匿名 PL/SQL 块。如果是这样，您将需要 DBA 直接授予您`CREATE TABLE`权限，而不是通过角色。
3.  当作业失败时，会在警报日志中写入一条带有错误消息的条目。您（或者更有可能是 DBA）能否从警报日志中获取错误消息和错误堆栈并将其发布到此处（假设它不是来自 #2 的权限问题）。

# java - 当我尝试使用按钮在 j2me 上导航表单时出现 NullPointException

> ID：10749472
> 
> 赞同：2
> 
> 时间：2012-05-25T06:22:49.503
> 
> 标签：java, java-me, nullpointerexception, lwuit, midp

我无法通过单击按钮将主页链接到第二页。它抛出一个 NullPointException。有人可以告诉我我错在哪里了吗？

```
import java.io.InputStream;
import javax.microedition.lcdui.Displayable;
import javax.microedition.midlet.*;
import com.sun.lwuit.*;
import com.sun.lwuit.animations.CommonTransitions;
import com.sun.lwuit.events.ActionEvent;
import com.sun.lwuit.events.ActionListener;
import com.sun.lwuit.layouts.BorderLayout;
import com.sun.lwuit.layouts.BoxLayout;
import com.sun.lwuit.plaf.UIManager;
import com.sun.lwuit.util.Resources;
import java.io.IOException;

public class standings extends MIDlet implements ActionListener{

   public Command cmdSelect; 
   public Form fform, selectLgform;
   public Button btnSelectLeague,btnHelp,btnAbout,btnExit;
   public TextArea taHome,taAbout, taHelp, taSelectLg;
    private InputStream iStream;
    private StringBuffer strBuffer;
    private Form selectLgForm;
    public void startApp() {
        Display.init(this);
        try {
            Resources rs= Resources.open("/restheme.res");
            UIManager.getInstance().setThemeProps(rs.getTheme("Theme2"));
        } catch (Exception e) {
            e.getMessage();
        }
       displayMainForm();
    }

  public void displayMainForm()
  {
   fform = new Form("Football League Standings");
   taHome= new TextArea(5,20,TextArea.ANY);
   fform.setLayout(new BorderLayout());
   fform.setTransitionInAnimator(CommonTransitions.createFade(1000));
   iStream     = getClass().getResourceAsStream("/intro.txt");
   strBuffer   = new StringBuffer();
        int next    = 1;
        try {
            while((next = iStream.read()) != -1) {
                char nextChar = (char) next;
                strBuffer.append(nextChar);
            }
        } catch (IOException ex) {
            ex.printStackTrace();
        }

        taHome.setText(strBuffer.toString());
        strBuffer   = null;
        taHome.setFocusable(false);
        taHome.setEditable(false);
        taHome.setUIID("Label");

        //fform.addComponent(BorderLayout.CENTER,taHome);

        btnSelectLeague= (new Button("Select league"));
        btnHelp= (new Button("Help"));
        btnAbout= (new Button("About"));
        btnExit= (new Button("Exit"));

    Container mcont = new Container(new BoxLayout(BoxLayout.Y_AXIS));
      mcont.addComponent(taHome);
      mcont.addComponent(btnSelectLeague);
      mcont.addComponent(btnHelp);
      mcont.addComponent(btnAbout);
      mcont.addComponent(btnExit);
      fform.addComponent(BorderLayout.CENTER, mcont);
      btnSelectLeague.addActionListener(this);
      btnHelp.addActionListener(this);
      btnAbout.addActionListener(this);
      btnExit.addActionListener(this);

   fform.show();
  }

  /* Command exitCommand = new Command("Exit");
   fform.addCommand(exitCommand);

   fform.addCommandListener(this);
    }
  }*/
   public void selectLgForm()
    {
        selectLgForm= new Form("Select League");
        taSelectLg= new TextArea(5,20,TextArea.ANY);
        selectLgForm.setLayout(new BorderLayout());
        selectLgForm.setTransitionInAnimator(CommonTransitions.createFade(1000));
        iStream     = getClass().getResourceAsStream("/selectlg.txt");
        strBuffer   = new StringBuffer();
        int next    = 1;
        try {
            while((next = iStream.read()) != -1) {
                char nextChar = (char) next;
                strBuffer.append(nextChar);
            }
        } catch (IOException ex) {
            ex.printStackTrace();
        }

        taSelectLg.setText(strBuffer.toString());
        strBuffer   = null;
        taSelectLg.setFocusable(false);
        taSelectLg.setEditable(false);
        taSelectLg.setUIID("Label");

        selectLgForm.addComponent(BorderLayout.CENTER,taAbout);

    //START OF MENU BUTTONS
        selectLgForm.addCommand(new Command("Back")
        {
            public void actionPerformed(ActionEvent e)
            {
                displayMainForm();
            }

        });

        selectLgForm.show();
    }//END OF MENU BUTTONS

    public void pauseApp() {
    }

    public void destroyApp(boolean unconditional) {
    }

  public void actionPerformed(ActionEvent ae) {
       if(ae.getSource()==btnSelectLeague){
            selectLgForm();
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T09:47:57.293

我最好的猜测是：
-`selectLgForm.addComponent(BorderLayout.CENTER,taAbout)`抛出 NullPointerException 因为`taAbout`为空。
- 或`iStream = getClass().getResourceAsStream("/selectlg.txt");`抛出 NullPointerException，因为文本文件不在您认为的位置。

# jquery - Jquery：仅在第一次单击“加载更多...”时加载下一页

> ID：10749473
> 
> 赞同：0
> 
> 时间：2012-05-25T06:22:58.520
> 
> 标签：jquery, ajax

如果是 DIV，我需要在每次单击末尾的文本“加载更多”时加载内容。我目前拥有的代码如下：

```
<div id="Container"> <p class="load">load more</P> </div> 
```

和

```
$(".load:last").click(function(){
$(".load:last").load("nextPage.php", function() {
$(this).hide();

$("div#Container").append($(this).html());
$("div#Container").append("<p class=\"load\">load more...</p>");

}); 
```

第一次单击有效，因为它从 nextPage.php 加载更多内容。然而，随后的点击不会触发加载。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:39:00.823

```
 $(".load:last").live('click', function () {
        $(this).remove();
        //Or
        // $(this).hide();
        $(".load:last").load("nextPage.php", function () {
            $("div#Container").append($(this).html());
            $("div#Container").append("<p class=\"load\">load more...</p>");
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:39:31.820

作为`.load`每次附加到`div#Container`新的，您应该使用实时事件处理程序，`.load`如下所示：

```
$("div#Container").on('click', '.load', function() {
  $(this).parent('div#Container').load('nextPage.php', function() {
     $('div#Container').append("<p class=\"load\">load more...</p>");
  })
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:42:32.107

尝试使用**jquery 的 .live() 方法或 .on()**，这将为现在和将来与当前选择器匹配的所有元素附加一个事件处理程序。

[单击此处获取 jquery 中 .live 事件的信息和示例，](http://api.jquery.com/live/)
我希望这一定能解决您的问题。

祝你好运！:)

# php - sql查询中的小修改需要

> ID：10749478
> 
> 赞同：1
> 
> 时间：2012-05-25T06:23:17.447
> 
> 标签：php, sql

以下是我的 sql 查询，我在其中为 facility_id 分配来自 $fid 的值。请让我知道以下代码有什么问题，以便我可以相应地删除它们

```
$fid = 101;
$q = 'select r_present,r_reminder 
    from z_events 
    where resident_id = ? 
        and r_added > date_sub(curdate(), interval 37 day) 
        and fascility_id='."$fid". '
    group by r_added 
    order by r_added 
    desc limit 4'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T06:26:12.173

小错字在 fid 和 group 之间添加空格，如下所示：

```
$q = 'select r_present,r_reminder 
from z_events 
where resident_id = ? 
    and r_added > date_sub(curdate(), interval 37 day) 
    and fascility_id='.$fid. ' 
group by r_added 
order by r_added 
desc limit 4'; 
```

和下一个建议：不需要用双引号括起来 $fid`"`

在这里，我假设您的字段 facility_id 是整数类型。如果它的字符串然后添加双引号`""`给它，如：

```
$q = 'select r_present,r_reminder 
from z_events 
where resident_id = ? 
    and r_added > date_sub(curdate(), interval 37 day) 
    and fascility_id="'.$fid. '" 
group by r_added 
order by r_added 
desc limit 4'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:28:29.363

请试试这个：

```
$fid = 101;
    $q = "select r_present,r_reminder from z_events where resident_id = ? and r_added > date_sub(curdate(), interval 37 day) and fascility_id=$fid group by r_added order by r_added desc limit 4"; 
```

# ruby-on-rails - 如何在 Rails 开发环境中存根？

> ID：10749479
> 
> 赞同：1
> 
> 时间：2012-05-25T06:23:20.020
> 
> 标签：ruby-on-rails, ruby

我正在寻找一种可靠的方法来在我的开发环境中动态地存根某些方法。一个示例用例是当我需要进行通常需要访问 Facebook Graph API 但我无法访问 Internet 的开发时。我希望能够对 fb_graph 方法的调用存根，这样看起来就好像我已通过身份验证并拥有配置文件数据。理想情况下，我可以通过较小的配置更改来打开或关闭存根。

有任何想法吗？我假设像摩卡这样的东西可以处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:46:59.357

您可以使用 VCR gem，它将初始 HTTP 请求的结果记录到 yml 文件中，然后在后续 http 请求中使用该 yml 文件的内容。然后可以将其配置为忽略 VCR 逻辑并始终发出 HTTP 请求（如果需要）：

[https://www.relishapp.com/myronmarston/vcr](https://www.relishapp.com/myronmarston/vcr)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T10:50:45.540

摩卡当然可以。但是感觉有点奇怪。

您还可以执行依赖注入之类的操作。

例如：

```
class User < AR::Base

  def find_friends
    Facebook.find_friends(facebook_id)
  end

end

class Facebook

  def self.find_friends(id)
    # connect to Facebook here
  end

end

class FakeFacebook

  def self.find_friends(id)
    # a fake implementation here
  end

end 
```

在初始化程序内部：

```
if Rails.env.development?
  User::Facebook = FakeFacebook
end 
```

# android - android 4.0 API 中的 Dom 解析器

> ID：10749481
> 
> 赞同：1
> 
> 时间：2012-05-25T06:23:31.270
> 
> 标签：android, ksoap2, domparser

我的问题是 Dom Parser 不能在 Android 4.0 中工作，但它在 2.2 上工作，如果我在我的 4.0 模拟器中运行项目而不是下面的行不执行，这不会给出任何错误。

```
Document doc = db.parse(inStream); 
```

以下是我的 Java 代码：-

```
public class TestParsingActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        StringBuffer sb = new StringBuffer();

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                .permitAll().build();
        StrictMode.setThreadPolicy(policy);

        System.setProperty("http.proxySet", "true");
        System.setProperty("http.proxyHost", "192.168.1.220");
        System.setProperty("http.proxyPort", "315");

        String NAMESPACE = "Dipak";
        String SOAP_ACTION = "Dipak/Start";
        String METHOD_NAME = "Start";
        String url = "http://google.co.uk/Dip/service1.asmx";

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        PropertyInfo p = new PropertyInfo();
        String qry = "select Password from Profiles where ID = (select uid from userprofiles where name = 'Dipak')";

        p.setName("SQL");
        p.setValue(qry);
        request.addProperty(p);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        HttpTransportSE httpTransport = new HttpTransportSE(url);
        httpTransport.debug = true;

        System.out.println("three**************");

        try {
            httpTransport.call(SOAP_ACTION, envelope);
            System.out.println("four**************");
            // SoapObject response=(SoapObject)envelope.bodyIn;
            SoapObject response = (SoapObject) envelope.getResponse();

            System.out.println("response =====>>>> "
                    + response.getProperty(0).toString());
            // SoapObject response=(SoapObject)envelope.getResponse();
            // SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
            System.out.println("success**************");

            sb.append(response);
            System.out.println("Data from Search Job =====>>>> "
                    + sb.toString());
            // return response.toString();

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try {
            DocumentBuilderFactory factory = DocumentBuilderFactory
                    .newInstance();

            DocumentBuilder db = factory.newDocumentBuilder();
            InputSource inStream = new InputSource();

            System.out.println("Data from try  =====>>>> " + sb.toString());

            inStream.setCharacterStream(new StringReader(sb.toString()));

            System.out
                    .println("Data from try  =====>>>>11111111111111111111111111111 ");

            Document doc = db.parse(inStream);
            System.out
                    .println("Data from try  =====>>>>22222222222222222222222222222 ");

            Element root = doc.getDocumentElement();

            String root1 = doc.getTextContent();
            System.out
                    .println("Value of root................................................................................"
                            + root);
            System.out
                    .println("Value of root1................................................................................"
                            + root1);
            System.out
                    .println("................................................................................5");
        } catch (Exception e) {
            // TODO: handle exception
        }

    }
} 
```

任何帮助将不胜感激，对不起我糟糕的英语交流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:31:04.930

你为什么不使用

```
response.getPropertyAsString(index); 
```

或者

```
response.getPropertyAsString("PROPERTY_NAME"); 
```

?

但是您仍然想使用 Dom 解析器，您可以使用`HttpTransportSE.responseDump`获取 XML 格式的响应并尝试解析 XML 而不是 ksaop2 的响应格式。

# iphone - 如何在iphone应用程序中将浮点值转换为四舍五入

> ID：10749483
> 
> 赞同：1
> 
> 时间：2012-05-25T06:23:44.093
> 
> 标签：iphone, xcode

我有一个浮点值我想四舍五入到最接近的总数我找到了一些数学函数但不起作用

现在潜在利润是 300.52 那么如何四舍五入呢？

```
 float potentialprofit=otherthanCereniaAnnual*totalProfit;
     NSString*potentialProfitTitle=[NSString stringWithFormat:@"%.2f",potentialprofit];

[potentialProfit setTitle:potentialProfitTitle forState:UIControlStateNormal]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T06:35:26.787

```
int result = (int)ceilf(myFloat );
int result = (int)roundf(myFloat );
int result = (int)floor(myFloat);

float result = ceilf(myFloat );
float result = roundf(myFloat );
float result = floor(myFloat); 
```

我想这会对你有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T06:29:28.980

尝试这个：

```
float f = ...;
f = (int)(f+0.5); 
```

如果你想处理负值，试试这个：

```
f = (int)(f < 0 ? f-0.5 : f+0.5); 
```

# jquery - 处理 cjuiautocomplete 显示异常

> ID：10749485
> 
> 赞同：0
> 
> 时间：2012-05-25T06:23:55.193
> 
> 标签：jquery, autocomplete, yii

我尝试了来自 te 源的代码

[我用于 CJUIAutoComplete 的源代码](http://www.yiiplayground.cubedwater.com/index.php?r=UiModule/jui/ziiAutocomplete)

没有得到错误显示为未授权的错误请帮助我，我是 Yii 框架的新手，也是调试的新手。

这是我的错误日志

```
2012/05/25 06:07:28 [error] [exception.CHttpException.403] exception 'CHttpException' with message 'You are not authorized to perform this action.' in C:\wamp\yii\framework\web\auth\CAccessControlFilter.php:157 

Stack trace:
#0 C:\wamp\yii\framework\web\auth\CAccessControlFilter.php(120) CAccessControlFilter->accessDenied(Object(CWebUser), 'You are not aut...')
#1 C:\wamp\yii\framework\web\filters\CFilter.php(39) CAccessControlFilter->preFilter(Object(CFilterChain))

#2 C:\wamp\yii\framework\web\CController.php(1146): CFilter->filter(Object(CFilterChain))
#3 C:\wamp\yii\framework\web\filters\CInlineFilter.php(59) CController->filterAccessControl(Object(CFilterChain))

#4 C:\wamp\yii\framework\web\filters\CFilterChain.php(131) CInlineFilter->filter(Object(CFilterChain))

#5 C:\wamp\yii\framework\web\CController.php(292): CFilterChain->run()

#6 C:\wamp\yii\framework\web\CController.php(266): CController->runActionWithFilters(Object(CInlineAction), Array)

#7 C:\wamp\yii\framework\web\CWebApplication.php(276): CController->run('autocompleteTes...')

#8 C:\wamp\yii\framework\web\CWebApplication.php(135): CWebApplication->runController('details/autocom...')

#9 C:\wamp\yii\framework\base\CApplication.php(162): CWebApplication->processRequest()

#10 C:\wamp\www\myapp\index.php(13): CApplication->run()

#11 {main}
REQUEST_URI=/myapp/index.php?r=details/autocompleteTest&term=asss
HTTP_REFERER=http://localhost/myapp/index.php?r=details/create 
```

**控制器代码是**

```
<?php
class DetailsController extends Controller
{
/**
 * @var string the default layout for the views. Defaults to '//layouts/column2', meaning
 * using two-column layout. See 'protected/views/layouts/column2.php'.
 */
public $layout='//layouts/column2';

/**
 * @return array action filters
 */
public function filters()
{
    return array(
        'accessControl', // perform access control for CRUD operations
    );
}

    public function actionAutocompleteTest() {
$res =array();

if (isset($_GET['term'])) {
    $qtxt ="SELECT name FROM {{details}} WHERE name LIKE :username";
    $command =Yii::app()->db->createCommand($qtxt);
    $command->bindValue(":name", '%'.$_GET['term'].'%', PDO::PARAM_STR);
    $res =$command->queryColumn();
}

echo CJSON::encode($res);
Yii::app()->end();
}

/**
 * Specifies the access control rules.
 * This method is used by the 'accessControl' filter.
 * @return array access control rules
 */
public function accessRules()
{
    return array(
        array('allow',  // allow all users to perform 'index' and 'view' actions
            'actions'=>array('index','view'),
            'users'=>array('*'),
        ),
        array('allow', // allow authenticated user to perform 'create' and 'update' actions
            'actions'=>array('create','update'),
            'users'=>array('@'),
        ),
        array('allow', // allow admin user to perform 'admin' and 'delete' actions
            'actions'=>array('admin','delete'),
            'users'=>array('admin'),
        ),
        array('deny',  // deny all users
            'users'=>array('*'),
        ),
    );
}

/**
 * Displays a particular model.
 * @param integer $id the ID of the model to be displayed
 */
public function actionView($id)
{
    $this->render('view',array(
        'model'=>$this->loadModel($id),
    ));
}

/**
 * Creates a new model.
 * If creation is successful, the browser will be redirected to the 'view' page.
 */
public function actionCreate()
{
    $model=new Details;

    // Uncomment the following line if AJAX validation is needed
    // $this->performAjaxValidation($model);

    if(isset($_POST['Details']))
    {
        $model->attributes=$_POST['Details'];
        if($model->save())
            $this->redirect(array('view','id'=>$model->id1));
    }

    $this->render('create',array(
        'model'=>$model,
    ));
}

/**
 * Updates a particular model.
 * If update is successful, the browser will be redirected to the 'view' page.
 * @param integer $id the ID of the model to be updated
 */
public function actionUpdate($id)
{
    $model=$this->loadModel($id);

    // Uncomment the following line if AJAX validation is needed
    // $this->performAjaxValidation($model);

    if(isset($_POST['Details']))
    {
        $model->attributes=$_POST['Details'];
        if($model->save())
            $this->redirect(array('view','id'=>$model->id1));
    }

    $this->render('update',array(
        'model'=>$model,
    ));
}

/**
 * Deletes a particular model.
 * If deletion is successful, the browser will be redirected to the 'admin' page.
 * @param integer $id the ID of the model to be deleted
 */
public function actionDelete($id)
{
    if(Yii::app()->request->isPostRequest)
    {
        // we only allow deletion via POST request
        $this->loadModel($id)->delete();

        // if AJAX request (triggered by deletion via admin grid view), we should not redirect the browser
        if(!isset($_GET['ajax']))
            $this->redirect(isset($_POST['returnUrl']) ? $_POST['returnUrl'] : array('admin'));
    }
    else
        throw new CHttpException(400,'Invalid request. Please do not repeat this request again.');
}

/**
 * Lists all models.
 */
public function actionIndex()
{
    $dataProvider=new CActiveDataProvider('Details');
    $this->render('index',array(
        'dataProvider'=>$dataProvider,
    ));
}

/**
 * Manages all models.
 */
public function actionAdmin()
{
    $model=new Details('search');
    $model->unsetAttributes();  // clear any default values
    if(isset($_GET['Details']))
        $model->attributes=$_GET['Details'];

    $this->render('admin',array(
        'model'=>$model,
    ));
}

/**
 * Returns the data model based on the primary key given in the GET variable.
 * If the data model is not found, an HTTP exception will be raised.
 * @param integer the ID of the model to be loaded
 */
public function loadModel($id)
{
    $model=Details::model()->findByPk($id);
    if($model===null)
        throw new CHttpException(404,'The requested page does not exist.');
    return $model;
}

/**
 * Performs the AJAX validation.
 * @param CModel the model to be validated
 */
protected function performAjaxValidation($model)
{
    if(isset($_POST['ajax']) && $_POST['ajax']==='details-form')
    {
        echo CActiveForm::validate($model);
        Yii::app()->end();
    }
}
} 
```

**表格代码**

```
<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'details-form',
    'enableAjaxValidation'=>false,
)); ?>

    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <?php echo $form->errorSummary($model); ?>

    <div class="row">
        <?php echo $form->labelEx($model,'id'); ?>

        <?php echo $form->textField($model,'id'); ?>
        <?php echo $form->error($model,'id'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'name'); ?>
        <?php $this->widget('zii.widgets.jui.CJuiAutoComplete', array(
    'name'=>'test1',
    'value'=>'test21',
    'source'=>$this->createUrl('details/autocompleteTest'),
    // additional javascript options for the autocomplete plugin
    'options'=>array(
            'showAnim'=>'fold',
    ),
));
    ?>
                <?php echo $form->error($model,'name'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'phone'); ?>
        <?php echo $form->textField($model,'phone'); ?>
        <?php echo $form->error($model,'phone'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'email'); ?>
        <?php echo $form->textField($model,'email'); ?>
        <?php echo $form->error($model,'email'); ?>
    </div>

    <div class="row buttons">
        <?php echo CHtml::submitButton($model->isNewRecord ? 'Create' : 'Save'); ?>
    </div>

<?php $this->endWidget(); ?>

</div><!-- form --> 
```

谢谢德文达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:37:20.903

你必须更新你的 DetailController：

```
array('allow', 
      // allow authenticated user to perform 'create', 'update' and 'autocompleteTest' actions
      'actions'=>array('create','update', 'autocompleteTest'),
      'users'=>array('@'),
), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:28:14.240

控制器代码：

name 是模型的属性（数据库表）

```
public function actionAutoCompleteLookup() {
    $res =array();

    if (isset($_GET['term'])) {

        $qtxt ="SELECT name FROM customer WHERE name LIKE :name";
        $command =Yii::app()->db->createCommand($qtxt);
        $command->bindValue(":name", '%'.$_GET['term'].'%', PDO::PARAM_STR);
        $res =$command->queryColumn();
    }

    echo CJSON::encode($res);
    Yii::app()->end();
} 
```

查看代码

创建 URL - 控制器名称/Actin（控制器中编写的函数名称）

```
 <?php $this->widget('zii.widgets.jui.CJuiAutoComplete', array(
    'name'=>'test2',
    'source'=>$this->createUrl('Customer/AutoCompleteLookup'),

             'options'=>array(
             'showAnim'=>'fold',
              ), 
));
    ?> 
```

感谢 Stackoverflow

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:52:38.977

试试这个对你来说很简单..

```
public function actionAutoCompleteLookup()
        {
           if(Yii::app()->request->isAjaxRequest && isset($_GET['q']))
           {

              $name = $_GET['q']; 

               $qtxt ="SELECT name FROM details WHERE name LIKE '%".$name."%'";
               $command =Yii::app()->db->createCommand($qtxt);

               $userArray =$command->queryColumn();

              $returnVal = '';
              foreach($userArray as $userAccount)
              {
                 $returnVal .= $userAccount->getAttribute('first_name').'|'
                                             .$userAccount->getAttribute('user_id')."\n";
              }
              echo $returnVal;
           }
        } 
```

在这样的视图代码中..

```
<?php $this->widget('CAutoComplete',
          array(
                         //name of the html field that will be generated
             'name'=>'name', 
                       //replace controller/action with real ids
             'url'=>array('detail/AutoCompleteLookup'), 
             'max'=>10, //specifies the max number of items to display

                         //specifies the number of chars that must be entered 
                         //before autocomplete initiates a lookup

             ));
    ?> 
```

它的工作正常...

# java - j2se 应用程序最佳实践

> ID：10749486
> 
> 赞同：0
> 
> 时间：2012-05-25T06:24:04.470
> 
> 标签：java, jdbc

我想构建一个简单的 CRUD 控制台应用程序，它由一组 10-20 个需要访问 CRUD 方法的类组成。我不想在每个需要数据库访问的方法中每次都创建一个连接。也许将所有创建部分放入一个单独的单例类中？
任何想法，最佳实践应该如何构建这种应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:44:57.170

一个教程就足够学习[如何设计DAO](http://balusc.blogspot.com/2008/07/dao-tutorial-data-layer.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:47:51.927

对于简单的 CRUD，一个快速但过度设计的解决方案是使用 Netbeans JPA 向导：

*   [来自数据库的](http://netbeans.org/kb/docs/javaee/ecommerce/entity-session.html#addEntity)实体类（检查*添加实体*部分）
*   来自实体的 JPA 控制器类（[小样本](http://www.ensode.net/roller/dheffelfinger/entry/automated_dao_generation_from_jpa)）

无需处理连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:30:32.473

创建一个具有所有功能的基类作为单独的方法。例如如下。

Connection getConnection() - 返回连接对象

void close() - 关闭连接

就像每个功能的实现方法一样。将您的操作类扩展到此基类并调用所需的函数。

前任：

```
 public class Insert extends Base {

// call the rquired functions

} 
```

如果需要，您可以参数化一些变量，如驱动程序名称、url、用户名、密码等，

# actionscript-3 - Flex 空闲应用程序到会话超时

> ID：10749494
> 
> 赞同：0
> 
> 时间：2012-05-25T06:24:53.470
> 
> 标签：actionscript-3, apache-flex, flex4, session-timeout

在我的 flex 应用程序中，我在空闲状态下使用事件侦听器进行会话。它不适合我。

这是我的代码：

我在方法中放置了下面的代码

```
this.systemManager.addEventListener(FlexEvent.IDLE,onUserIDLE); 
```

和调用函数 onUserIDLE

```
private function onUserIDLE(e:FlexEvent):void
{           
    if(e.currentTarget.mx_internal::idleCounter == 60000)
    {
        this.systemManager.removeEventListener(FlexEvent.IDLE,onUserIDLE);
        Alert.show("Session time Out");
        menuRO.logoutUser();
        signOutBtn_clickHandler();          
    }
} 
```

上面的代码不适用于我的应用程序，它没有进入 `if(e.currentTarget.mx_internal::idleCounter == 60000)`语句。请给我建议。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:54:44.243

根据[这篇](https://stackoverflow.com/questions/3080939/flex-4-idlecounter-seems-to-have-changed-most-online-examples-now-broken)文章，idleCounter 似乎发生了变化（mx_internal 组件总是会发生这种情况），所以我想你必须滚动你自己的计时器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T11:59:24.057

由于 Flex SDK 是开源的，您始终可以深入了解 SystemManager（以及 WindowedSystemManager）类源，以查看空闲逻辑仍然存在（我检查了 SDK v.4.6.0）并且工作正常。根据您的条件语句，您真的等待 100 分钟以查看它是否进入 IF 块？无论如何，您始终可以使用跟踪来跟踪 idleCounter 值。但是，如果您确定在您的代码中，那么了解您使用的是哪个版本的 flex SDK 以及哪个版本的 FlashPlayer 会很有帮助。

# c# - 枚举尚未开始或已完成

> ID：10749497
> 
> 赞同：3
> 
> 时间：2012-05-25T06:25:06.290
> 
> 标签：c#, wpf, dynamic-data-display

我正在开发一个应用程序，一切正常，但我遇到了异常

**枚举尚未开始或已经完成。**

这是我生成此异常的代码。

```
 for (int i = 0; i < SelectedItems.Count; i++)
                {
                    lineDS = new DataSet();
                    datDs = new DataSet();
                    datDs = DatelineData(SelectedItems[i].ToString(), Starttime, Endtime, NUDTextBox, txtSensorLess, dtpStartDate, dtpEndDate);
                    lineDS =GraphlineDraw(SelectedItems[i].ToString(),Starttime,Endtime,NUDTextBox,txtSensorLess,dtpStartDate,dtpEndDate);
                    if (datDs.Tables[0].Rows.Count > 0 & lineDS.Tables[0].Rows.Count > 0)
                    {
                        var dates = (from dr in datDs.Tables[0].AsEnumerable()
                                     select new
                                     {
                                         date = dr.Field<DateTime>("DateRecorded"),
                                     }.date).ToList();

                        var Rate = (from dr in lineDS.Tables[0].AsEnumerable()
                                    select new
                                    {
                                        rate = dr.Field<double>(SelectedItems[i])
                                    }.rate).ToList();
                        var datesDataSource = new EnumerableDataSource<DateTime>(dates);
                        datesDataSource.SetXMapping(x => dateAxis.ConvertToDouble(x));
                        var RateDataSource = new EnumerableDataSource<double>(Rate);
                        RateDataSource.SetYMapping(y => y);
                        CompositeDataSource compositeDataSourceSenssor = new CompositeDataSource(datesDataSource, RateDataSource);
                        plotter.AddLineGraph(compositeDataSourceSenssor, colors[i], 1, SelectedItems[i]);
                        //Items.Add(new ItemVM((Brush)converter.ConvertFromString(colors[i].ToString()), SelectedItems[i]));
                    }
                    plotter.LegendVisible = false;
                    //listview.ItemsSource = Items;
                } 
```

在上面的代码中

1.)SelectedItems 是一个数组列表，它包含用户在运行时选择的列名。

2.)DatelineData 是一种用于获取特定列日期的方法。

3.)GraphLineDraw 是一种用于获取列值的方法。

这是我的 DatelineData 方法：

```
 private DataSet DatelineData(string items, string Starttime, string Endtime, string NUDTextBox, string txtSensorLess, string dtpStartDate, string dtpEndDate)
    {
        try
        {                               
                SqlParameter colomNamePrm, startdatePrm, EnddatePrm, StartPrm, EndPrm;                                        
                connection = new SqlConnection(settings);
                connection.Open();
                DataSet dateDs = new DataSet();
                command = new SqlCommand();
                command.Connection = connection;
                command.CommandType = CommandType.StoredProcedure;
                command.CommandText = "GetAvgDate";
                colomNamePrm = new SqlParameter("@ColumnName", SqlDbType.VarChar);
                startdatePrm = new SqlParameter("@StartDate", SqlDbType.VarChar);
                EnddatePrm = new SqlParameter("@EndDate", SqlDbType.VarChar);
                StartPrm = new SqlParameter("@Start", SqlDbType.VarChar);
                EndPrm = new SqlParameter("@End", SqlDbType.VarChar);
                colomNamePrm.Value =items;
                startdatePrm.Value = dtpStartDate +" " + Starttime;
                EnddatePrm.Value = dtpEndDate + " " + Endtime;
                StartPrm.Value = NUDTextBox;
                EndPrm.Value = txtSensorLess;
                command.Parameters.Add(colomNamePrm);
                command.Parameters.Add(startdatePrm);
                command.Parameters.Add(EnddatePrm);
                command.Parameters.Add(StartPrm);
                command.Parameters.Add(EndPrm);
                adapter.SelectCommand = command;
                adapter.Fill(dateDs); 

            return dateDs;
        }
        catch (Exception ex) { throw ex; }
        finally
        {
            command.Dispose();
            adapter.Dispose();
            connection.Close();
        }
    } 
```

这是 GraphLineDraw 方法

```
 private DataSet GraphlineDraw(string selecteditem, string Starttime, string Endtime, string NUDTextBox, string txtSensorLess, string dtpStartDate, string dtpEndDate)
    {
        try
        {                                              
                SqlParameter colomNamePrm, startdatePrm, EnddatePrm, StartPrm, EndPrm;                                         
                connection = new SqlConnection(settings);
                connection.Open();
                DataSet objds = new DataSet();
                command = new SqlCommand();
                command.Connection = connection;
                command.CommandType = CommandType.StoredProcedure;
                command.CommandText = "getAvgColumn";
                colomNamePrm = new SqlParameter("@ColumnName", SqlDbType.VarChar);
                startdatePrm = new SqlParameter("@StartDate", SqlDbType.VarChar);
                EnddatePrm = new SqlParameter("@EndDate", SqlDbType.VarChar);
                StartPrm = new SqlParameter("@Start", SqlDbType.VarChar);
                EndPrm = new SqlParameter("@End", SqlDbType.VarChar);
                colomNamePrm.Value =selecteditem;
                startdatePrm.Value = dtpStartDate + " " + Starttime;
                EnddatePrm.Value = dtpEndDate + " " + Endtime;
                StartPrm.Value = NUDTextBox;
                EndPrm.Value = txtSensorLess;
                command.Parameters.Add(colomNamePrm);
                command.Parameters.Add(startdatePrm);
                command.Parameters.Add(EnddatePrm);
                command.Parameters.Add(StartPrm);
                command.Parameters.Add(EndPrm);
                adapter.SelectCommand = command;
                adapter.Fill(objds);                    

            return objds;
        }
        catch (Exception ex) { throw ex; }
        finally
        {
            command.Dispose();
            adapter.Dispose();
            connection.Close();
        }
    } 
```

请帮助其紧急。

**更新：**异常堆栈跟踪

```
 at System.ThrowHelper.ThrowInvalidOperationException(ExceptionResource resource)
   at System.Collections.Generic.List`1.Enumerator.System.Collections.IEnumerator.get_Current()
   at Microsoft.Research.DynamicDataDisplay.DataSources.EnumerablePointEnumerator`1.GetCurrent(Point& p)
   at Microsoft.Research.DynamicDataDisplay.DataSources.CompositeDataSource.CompositeEnumerator.GetCurrent(Point& p)
   at Microsoft.Research.DynamicDataDisplay.DataSources.DataSourceHelper.<GetPoints>d__0.MoveNext()
   at Microsoft.Research.DynamicDataDisplay.CoordinateTransformExtensions.<DataToViewport>d__0.MoveNext()
   at Microsoft.Research.DynamicDataDisplay.BoundsHelper.GetDataBounds(IEnumerable`1 points)
  at Microsoft.Research.DynamicDataDisplay.BoundsHelper.GetViewportBounds(IEnumerable`1 dataPoints, DataTransform transform)
  at Microsoft.Research.DynamicDataDisplay.LineGraph.UpdateCore()
 at Microsoft.Research.DynamicDataDisplay.ViewportElement2D.Update()
   at Microsoft.Research.DynamicDataDisplay.ViewportElement2D.OnOutputChanged(Rect newRect, Rect oldRect)
   at Microsoft.Research.DynamicDataDisplay.LineGraph.OnOutputChanged(Rect newRect, Rect oldRect)
   at Microsoft.Research.DynamicDataDisplay.ViewportElement2D.OnViewportPropertyChanged(Object sender, ExtendedPropertyChangedEventArgs e)
   at System.EventHandler`1.Invoke(Object sender, TEventArgs e)
   at Microsoft.Research.DynamicDataDisplay.Viewport2D.RaisePropertyChangedEvent(DependencyPropertyChangedEventArgs e)
   at Microsoft.Research.DynamicDataDisplay.Viewport2D.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
   at System.Windows.DependencyObject.NotifyPropertyChange(DependencyPropertyChangedEventArgs args)
   at System.Windows.DependencyObject.UpdateEffectiveValue(EntryIndex entryIndex, DependencyProperty dp, PropertyMetadata metadata,         EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue,        OperationType operationType)
 at System.Windows.DependencyObject.SetValueCommon(DependencyProperty dp, Object value, PropertyMetadata metadata, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType, Boolean isInternal)
   at System.Windows.DependencyObject.SetValue(DependencyPropertyKey key, Object value)
   at Microsoft.Research.DynamicDataDisplay.Viewport2D.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
   at System.Windows.DependencyObject.NotifyPropertyChange(DependencyPropertyChangedEventArgs args)
   at System.Windows.FrameworkElement.OnRenderSizeChanged(SizeChangedInfo sizeInfo)
   at Microsoft.Research.DynamicDataDisplay.Viewport2D.OnRenderSizeChanged(SizeChangedInfo sizeInfo)
   at System.Windows.ContextLayoutManager.fireSizeChangedEvents()
   at System.Windows.ContextLayoutManager.UpdateLayout()
   at System.Windows.ContextLayoutManager.UpdateLayoutCallback(Object arg)
   at System.Windows.Media.MediaContext.InvokeOnRenderCallback.DoWork()
   at System.Windows.Media.MediaContext.FireInvokeOnRenderCallbacks()
   at System.Windows.Media.MediaContext.RenderMessageHandlerCore(Object resizedCompositionTarget)
   at System.Windows.Media.MediaContext.RenderMessageHandler(Object resizedCompositionTarget)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate        catchHandler)
   at System.Windows.Threading.DispatcherOperation.InvokeImpl()
   at System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext(Object state)
   at System.Threading.ExecutionContext.runTryCode(Object userData)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
 at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Windows.Threading.DispatcherOperation.Invoke()
   at System.Windows.Threading.Dispatcher.ProcessQueue()
   at System.Windows.Threading.Dispatcher.WndProcHook(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate        catchHandler)
   at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32        numArgs)
   at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
   at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
   at System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
   at System.Windows.Threading.Dispatcher.Run()
   at System.Windows.Application.RunDispatcher(Object ignore)
   at System.Windows.Application.RunInternal(Window window)
   at System.Windows.Application.Run(Window window)
   at System.Windows.Application.Run()
   at IntelOptics_Vicksburg.App.Main() in C:\Documents and Settings\pc\Desktop\24-05-2012PM\Inteloptics Report        Codes\IntelOptics_Reports\IntelliOptics Reports\obj\x86\Debug\App.g.cs:line 0
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T07:10:34.710

在**通过**. `dates`_ `Rate`_ _ _**`plotter.AddLineGraph``compositeDataSourceSenssor`**

 **```
if (dates.Count() != Rate.Count())
{
    // serious problem:
    // won't work, since there are X values without Y values or vice versa
} 
```

而且，就像我在评论中所说，你真的应该使用`using`陈述

```
private DataSet DatelineData(...)
{
    using(var connection = new SqlConnection(settings))
    {
         SqlParameter colomNamePrm, startdatePrm, EnddatePrm, StartPrm, EndPrm;                                        
         connection.Open();
         using (var command = connection.CreateCommand())
         {
             ....
             return dateDs;
         }
    }
} 
```

摆脱讨厌的 try/catch/finally 块并`Dispose`自动调用。

**编辑：**我再次检查并相应地更改了我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:51:19.460

当在最后一行调用 MoveNext 两次时，通常会出现此问题。枚举器结束时调用 MoveNext。**

# lotus-notes - 将 Lotus Notes 文档导出为 CSV 和 Excel 文件

> ID：10749499
> 
> 赞同：0
> 
> 时间：2012-05-25T06:25:24.733
> 
> 标签：lotus-notes, export-to-excel, export-to-csv

任何人都可以建议我哪种方法（freefile 或 ole 对象创建）将 lotus notes 文档导出为 CSV 和 Excel 文件是有效的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T10:07:46.757

我也使用公式导出为 csv 和 excel。

@Command([FileExport]; "逗号分隔值"; "c:\text.csv")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T16:36:40.367

高效的？使用 NotesDXLExporter 导出为 DXL/XML。见[链接](http://www-304.ibm.com/support/docview.wss?uid=swg21206902)。简单的？在视图中选择文档并使用文件/导出，另存为类型：逗号分隔值。您可以使用需要导出的数据准备自己的视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T08:24:55.757

我得到了以下用于导出 CSV 文件的简单代码。

[[关联]](http://www.falsepositives.com/files/ViewCSVPrint.txt)

```
fileNum% = Freefile()
Open filename For Output As fileNum%

' use the view column titles as the CSV headers
Forall c In view.Columns
    If cns = "" Then    
        cns = c.title
    Else
        cns = cns + +","  + c.title         
    End If
End Forall      
Print #fileNum%, cns

 ' now get and print the values for each row and column
Set vc = view.AllEntries
Set entry = vc.GetFirstEntry()
While Not entry Is Nothing 
    rowstring = ""
    Forall colval In entry.ColumnValues
        If rowstring = "" Then
            rowstring = colval
        Else
            rowstring = rowstring + +","  + colval
        End If          
    End Forall
    Print #fileNum%, rowstring
    Set entry = vc.GetNextEntry(entry)
Wend
Close fileNum% 
```

# c# - Two Decimal places using c#

> ID：10749506
> 
> 赞同：77
> 
> 时间：2012-05-25T06:25:47.370
> 
> 标签：c#, formatting

```
decimal Debitvalue = 1156.547m;

decimal DEBITAMT = Convert.ToDecimal(string.Format("{0:0.00}", Debitvalue)); 
```

I have to get only two decimal places but by using this code I am getting 1156.547. Let me know which format I have to use to display two decimal places.

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-11-13T15:43:18.357

Your question is asking to display two decimal places. Using the following String.format will help:

```
String.Format("{0:.##}", Debitvalue) 
```

this will display then number with up to two decimal places(e.g. 2.10 would be shown as 2.1 ).

Use "{0:.00}", if you want always show two decimal places(e.g. 2.10 would be shown as 2.10 )

Or if you want the currency symbol displayed use the following:

```
String.Format("{0:C}", Debitvalue) 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-05-25T06:26:58.373

Use [`Math.Round()`](http://msdn.microsoft.com/en-us/library/as4h66hd) for rounding to two decimal places

```
decimal DEBITAMT = Math.Round(1156.547m, 2); 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2012-05-25T06:27:02.327

If you want to round the decimal, look at `Math.Round()`

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2016-04-15T22:35:54.897

The best approach if you want to ALWAYS show two decimal places (even if your number only has one decimal place) is to use

```
yournumber.ToString("0.00"); 
```

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2013-05-29T16:58:57.040

**I use**

```
decimal Debitvalue = 1156.547m;
decimal DEBITAMT = Convert.ToDecimal(string.Format("{0:F2}", Debitvalue)); 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2012-05-25T06:35:50.147

here is another approach

```
decimal decimalRounded = Decimal.Parse(Debitvalue.ToString("0.00")); 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2016-06-23T16:55:35.150

For only to display, property of `String` can be used as following..

```
double value = 123.456789;
String.Format("{0:0.00}", value); 
```

Using `System.Math.Round`. This value can be assigned to others or manipulated as required..

```
double value = 123.456789;
System.Math.Round(value, 2); 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-02-06T09:12:49.003

Another way :

```
decimal.Round(decimalvalue, 2, MidpointRounding.AwayFromZero); 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-01-06T07:46:49.163

Probably a variant of the other examples, but I use this method to also make sure a dot is shown before the decimal places and not a comma:

```
someValue.ToString("0.00", CultureInfo.InvariantCulture) 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-11-28T13:29:59.940

Another option is to use the [Decimal.Round Method](http://msdn.microsoft.com/en-us/library/system.decimal.round%28v=vs.100%29.aspx)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-10-18T14:00:16.177

If someone looking for a way to display decimal places even if it ends with **".00"**, use this:

```
String.Format("{0:n1}", value) 
```

**Reference:**

[https://docs.microsoft.com/pt-br/dotnet/standard/base-types/standard-numeric-format-strings#the-numeric-n-format-specifier](https://docs.microsoft.com/pt-br/dotnet/standard/base-types/standard-numeric-format-strings#the-numeric-n-format-specifier)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-03-18T08:05:57.823

To display two decimal digits, try the given syntax.

string.Format("{0:0.00}", Debitvalue)

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2020-03-20T11:36:44.320

In some tests here, it worked perfectly this way:

```
Decimal.Round(value, 2); 
```

Hope this helps

# java - 固定框架中面板的大小

> ID：10749509
> 
> 赞同：0
> 
> 时间：2012-05-25T06:26:04.487
> 
> 标签：java, swing, layout, layout-manager

我添加了一些`JPanel`设置为网格布局的组件，我正在添加`JFrame`设置为边框布局的组件。但我想修复面板的大小。当我的窗口最大化时，所有组件的大小都在增加。我希望面板位于窗口的**中心**，即使窗口最大化也具有***固定大小。***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T06:31:08.970

将面板`GridLayout`作为单个组件放入`GridBagLayout`没有约束的面板 - 它将居中。将带有 GBL 的面板添加`CENTER`到`BorderLayout`.

![](../Images/c058125e61cbffae7a1f5014b1bc0aa9.png)

有关上图，请参[见此示例](https://stackoverflow.com/questions/7180198/centering-a-jlabel-on-a-jpanel/7181197#7181197)。

* * *

[嵌套布局示例](https://stackoverflow.com/a/5630271/418556)还使用 GBL将图像居中在右侧滚动窗格的下部。

![](../Images/f9e492eec81701d836e83834a893afb0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:36:55.350

那么你不应该使用 BorderLayout，因为它只适合子组件。如果你仍然想在 JFrame 上使用 BoderLayout（因为你需要一些侧面板或类似的东西），你可以只包装你的 JPanel（使用 GridLayout ) 使用 GridBagLayout 或 BoxLayout 或类似的东西放入另一个 JPanel，然后将另一个 JPanel 放入 JFrame。

```
JPanel innerPanel = new JPanel();
innerPanel.setLayout(new GridLayout());
// fill and set your innerPanel

JPanel middlePanel = new JPanel();
middlePanel.setLayout(new GridBagLayout());
middlePanel.add(innerPanel, constraintsThatPlaceItWhereYouWantIt);

JFrame yourFrame = new JFrame();
yourFrame.setLayout(new BorderLayout());
yourFrame.add(middlePanel, BorderLayout.CENTER); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:32:14.633

```
 JFrame frame = new JFrame();
    frame.setSize(500, 500);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().setLayout(new BorderLayout());

    JPanel rootPanel = new JPanel();
    frame.getContentPane().add(rootPanel, BorderLayout.CENTER);
    rootPanel.setLayout(new GridBagLayout());

    JPanel contentPanel = new JPanel();

    Dimension dimension = new Dimension(300, 300);
    contentPanel.setMaximumSize(dimension);
    contentPanel.setMinimumSize(dimension);
    contentPanel.setPreferredSize(dimension);
    contentPanel.setBackground(Color.YELLOW);

    GridBagConstraints g = new GridBagConstraints();
    g.gridx = 0;
    g.gridy = 0;
    g.anchor = GridBagConstraints.CENTER;
    rootPanel.add(contentPanel, g);

    frame.setVisible(true); 
```

# c# - 如何检查 GAC 中是否存在程序集引用？

> ID：10749514
> 
> 赞同：2
> 
> 时间：2012-05-25T06:26:29.943
> 
> 标签：c#, visual-studio-2010, entity-framework, reference, gac

我的 EntityFramework 参考左侧有一个黄色三角形警告，我的项目说它丢失了。

> 无法解析此引用。找不到程序集“EntityFramework，Version=4.1.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089，processorArchitecture=MSIL”。检查以确保该程序集存在于磁盘上。如果您的代码需要此引用，您可能会遇到编译错误。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T06:34:00.370

GAC 路径是`C:\Windows\assembly`.

但是，您解决了您的错误，您必须使用 NuGet 安装 EntityFramework 包（或手动安装，但这更难并且不允许您升级）。

1.  如果您还没有安装[NuGet](http://www.google.gr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CGMQjBAwAQ&url=http://nuget.codeplex.com/releases&ei=GSe_T8q0ENLZ8QO2gKXGCg&usg=AFQjCNG2_W6S0YScmgF-kVT5cwcEUjvgmg&sig2=n5JA3fWpn0eKV9mX6N7R7w)
2.  右键单击您的项目和“管理 NuGet 包”
3.  搜索实体框架
4.  安装

稍后，您可以使用“更新”下的相同对话框来安装 EntityFramework 的更新版本。

如果您特别需要安装 4.1.0.0，因为第三方库正在使用它并且无法与更高版本一起使用，请从[此处](https://nuget.org/packages/EntityFramework)安装适当的软件包版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:43:42.677

运行安装程序。

[http://www.microsoft.com/en-au/download/details.aspx?id=8363](http://www.microsoft.com/en-au/download/details.aspx?id=8363)

我遇到过同样的问题。它现在固定了。GAC 中缺少实体框架 dll，它在运行安装程序后出现。

（您可以通过打开 GAC c:\windows\assembly 并查看它是否列出来验证 GAC 中是否缺少 dll。）

# html - 溢出？随着容器尺寸变大，元素被推出

> ID：10749515
> 
> 赞同：0
> 
> 时间：2012-05-25T06:26:42.793
> 
> 标签：html, css

当我将“.container”中的 css 从“width:800px”更改为“width:1900px”时，所有元素都会出现问题。并且橙色框保持向左侧倾斜而不是居中。有谁知道为什么会这样？我的朋友说这可能与溢出有关，但他不确定。

图片1：宽度：1900px

图2：宽800px HTML：

```
 <div id="orangeBox">

            <img src="images/logo.png" alt="Dash Logo" id="logo" />

            <div id="snappyText">
                <p>Ever think,"Where are the most mediocre places to eat around here? I want me some of that."</p>
            </div>  

            <div id="response">
                <p>Yeah, neither do we.</p>
            </div>

            <img src="images/whiteLine.png" alt="White Line" id="whiteLine" />

            <img src="images/iphone.png" alt="iPhone" id="iphone" />

            <img src="images/videoScreenshot.png" alt="Video Screenshot" id="videoScreenshot" />

            <img src="images/appStoreWhite.png" alt="App Store" id="appStoreWhite" />

            <div id="explanatoryText">
                <p>Dash is the quickest way to find good places to eat. In a world with too many choices and too much information, Dash clears the clutter and offers only the best in your area.</p> 
            </div>

            <ul id="menu">
                <li><a href="http://boxoutdev.com/">Blog</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>

            <a href="http://twitter.com/#!/thedashapp"><img src="images/twitterGray.png" alt="twitter" id="twitterGray" /></a>

            <a href="http://www.facebook.com/"><img src="images/facebookGray.png" alt="facebook" id="facebookGray" /></a>

        </div><!--end orangebox-->
    </div><!--end container--> 
```

CSS：

```
body{
    background: url(images/grayBackground.png);
}

/*orangeBox*/

#orangeBox{
    background-image:url(images/orangeBackground.png);
    background-repeat:no-repeat;
    position:relative;
}

.container{
    width:800px;
    margin:0 auto;
    position:relative;
} 
```

![宽度：1900 像素](../Images/8b429715d4426c5a7c3aff0a16a721af.png)

![宽度：800 像素](../Images/618300ca55c04bc3ace737b0f494b1e1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:24:05.357

你为什么不把你的css改成这个

```
min-width:800px;
    width:auto; 
```

试试它是否有效。

# unix - FTP 删除非空目录

> ID：10749517
> 
> 赞同：40
> 
> 时间：2012-05-25T06:26:51.457
> 
> 标签：unix, ftp

我已连接到 Unix 服务器，我正在尝试通过 FTP 删除`dir`包含多个文件的目录。如果我使用

```
ftp> delete dir/* 
```

我明白了

> 550 通配符不明确。

当我使用

```
ftp> prompt off
Interactive mode off.
ftp> mdelete dir/* 
```

我仍然得到

> 550 通配符不明确。

当我尝试

```
ftp> glob
Globbing on.
ftp> mdelete dir 
```

我被提示输入每个文件。

如何在不提示每个文件的情况下轻松删除/清空并删除目录？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-06-10T08:53:47.660

我让它分两步工作，在一个访问受限的服务器上，没有 SFTP，只有通过命令行的 FTP。

像这样 ：

```
mdelete folder_name/*
rmdir folder_name 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-11T09:58:13.800

如果您在服务器上隐藏了文件或文件夹（例如 .folder），则必须将 lftp 列表选项设置为“-a”。

所以这对我有用：

```
$ lftp -u user,pass server
> set ftp:list-options -a
> cd /folder/to/be/empty/
/folder/to/be/empty/> glob -a rm -r * 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-05-25T23:47:34.730

使用 lftp 登录你的服务器，这支持该`rm -r`命令。

```
lftp user, password server 
```

然后：

```
rm -r directory 
```

代表`-r`“递归”。

信息：

*   [http://en.wikipedia.org/wiki/Lftp](http://en.wikipedia.org/wiki/Lftp)
*   [http://en.wikipedia.org/wiki/Rm_%28Unix%29#Options](http://en.wikipedia.org/wiki/Rm_%28Unix%29#Options)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-05T23:30:10.487

$ ftp -i ...

将关闭 mdel 上的提示，这是您想要的。它不能在 ftp 内完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T06:32:33.493

rmdir 目录名

但是，此目录必须在当前目录中。

备忘单：[http ://www.cs.colostate.edu/helpdocs/ftp.html](http://www.cs.colostate.edu/helpdocs/ftp.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-07T16:15:53.470

我正在使用 Filezilla，它会递归删除文件夹。我相信 ftp 没有递归删除文件夹的命令。

# jquery - 使用 Jquery 更改文本和字体

> ID：10749521
> 
> 赞同：1
> 
> 时间：2012-05-25T06:26:58.597
> 
> 标签：jquery

**我将以下代码用于
1) 在 DIV 容器中显示更改的内容，因此如果有人在文本框中键入它应该同时显示键入的内容
2) 在选择字体时，字体应该应用于该内容**

**但它不工作不知道我在做什么错？**

```
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head>
<title>Change Contents</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.1/jquery.min.js"></script>

  <script type="text/javascript" language="javascript">
    $("#fs").change(function() {
    alert($(this).val());
    $('.changeMe').css("font-family", $(this).val());

});

$("#size").change(function() {
    $('.changeMe').css("font-size", $(this).val() + "px");
});
</script>
</head>

<body>
<form id="myform">
    <button>erase</button>
    <select id="fs"> 
        <option value="Arial">Arial</option>
        <option value="Verdana ">Verdana </option>
        <option value="Impact">Impact </option>
        <option value="Comic Sans MS">Comic Sans MS</option>
    </select>

    <select id="size">
        <option value="7">7</option>
        <option value="10">10</option>
        <option value="20">20</option>
        <option value="30">30</option>
    </select>
</form>

<br/>

<textarea class="changeMe">Text into textarea</textarea>
<div id="container" class="changeMe">
    <div id="float">
        <p>
            Text into container
        </p>
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:34:07.863

请在 jQuery ready() 子句中初始化您的处理程序。

```
$(function() {
}); 
```

您的代码可能如下所示：

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
```

...

```
<textarea id=ta class="changeMe">Text into textarea</textarea>
<div id="container" class="changeMe">
    <div id="float">
        <p>
            Text into container
        </p>
    </div>
</div>
    <script>
    $(window).load(function(){
        $('#ta').keyup(function(){
            $('#float').html("<p>"+$(this).val()+"</p>");
        });
        $("#fs").change(function() {
            $('.changeMe').css("font-family", $(this).val());
        });         
        $("#size").change(function() {
            $('.changeMe').css("font-size", $(this).val() + "px");
        });
    });
    </script>
</body>
</html> 
```

其他变化：

*   使用 jquery 1.7.1 而不是这个旧版本
*   使用文本区域的 id 来检测更改
*   使用“keyup”而不是“change”，以便立即更改（无需点击外部）

如果您只想更改 div，只需在最后两个处理程序中替换`$('.changeMe')`为`$('#float')`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:30:32.560

您缺少[准备好的处理程序](http://api.jquery.com/ready/)：

```
$(function(){
  // your code goes here
}); 
```

或者将您的代码放在`</body>`标签之前的底部，以便在您的代码运行时，它知道元素。

以下代码应该可以正常工作：

```
$(function(){

   $("#fs").change(function() {
     alert($(this).val());
     $('.changeMe').css("font-family", $(this).val());
   });

   $("#size").change(function() {
     $('.changeMe').css("font-size", $(this).val() + "px");
   });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:30:44.177

除了dystroy所说的之外，您还可以使用jQuery（因为您将其标记为jQuery，我假设您使用它）[准备好的](http://api.jquery.com/ready/)方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T06:31:58.907

它对我有用：http: [//jsfiddle.net/nanoquantumtech/YfQfr/](http://jsfiddle.net/nanoquantumtech/YfQfr/)

```
$(document).ready(function () {
        $("#fs").live('change', function () {
            alert($(this).val());
            $('.changeMe').css("font-family", $(this).val());

        });

        $("#size").live('change', function () {
            $('.changeMe').css("font-size", $(this).val() + "px");
        });

        $("#fs").trigger('change');

        $("#size").trigger('change');
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T06:28:51.913

不要将脚本放在标题中：它们在引用的 DOM 对象可用之前执行。

把它放在你身体的末端：

```
<script>
$(window).load(function(){
    $("#fs").change(function() {
    alert($(this).val());
    $('.changeMe').css("font-family", $(this).val());
    $("#size").change(function() {
        $('.changeMe').css("font-size", $(this).val() + "px");
    });
});
</script> 
```

# mysql - SQL 更新到自增列

> ID：10749523
> 
> 赞同：1
> 
> 时间：2012-05-25T06:27:11.203
> 
> 标签：mysql, sql

我正在创建一个测试数据库。我有一堆专栏，我想“清除”敏感信息，以便我可以处理它。

```
id   email
1    email1@no-reply.com
2    email2@no-reply.com
#    email#@no-reply.com 
```

基本上我想做的`UPDATE table SET email = "email" + id + "@no-reply.com`

我打算在 Python 中执行此操作，但认为在 SQL 中执行此操作会更容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:35:47.427

对于您的情况，它将是：

```
UPDATE table
SET email = CONCAT( "email", id, "@no-reply.com" ); 
```

我只是在我自己`late`的mysql表上使用它。结果如下：

```
mysql> update late
    -> set msg = concat( id, " ", msg );
Query OK, 74397 rows affected (4.15 sec)
Rows matched: 74397  Changed: 74397  Warnings: 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:31:49.267

是的，如果您正在使用更新，您应该已经拥有该 ID。如果是 php，它看起来像：

```
$query = 'Update email set email="email'.$id.'@no-reply.com where email.id='.$id; 
```

`$query`您正在构建的查询字符串在哪里，并且`$id`是您用来引用记录的记录 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-15T04:53:33.983

```
UPDATE table_reference
SET col_name1={expr1|DEFAULT} [, col_name2={expr2|DEFAULT}] ...
[WHERE where_condition]
[ORDER BY ...]
[LIMIT row_count] 
```

对于单表语法，**UPDATE**语句用新值更新命名表中现有行的列。**SET**子句指示要修改的列以及应给定的值。每个值都可以作为表达式给出，也可以使用关键字**DEFAULT**将列显式设置为其默认值。**WHERE**子句（如果给定）指定标识要更新哪些行的条件。如果**没有 WHERE**子句，所有行都会更新。如果指定了**ORDER BY**子句，则按指定的顺序更新行。**LIMIT**子句对可以更新的行数进行了限制。

# iphone - 在 iphone 中以编程方式打开蓝牙给出错误

> ID：10749527
> 
> 赞同：0
> 
> 时间：2012-05-25T06:27:36.087
> 
> 标签：iphone, objective-c, bluetooth

我想在 iPhone 中以语法方式打开蓝牙。这是我的代码——

```
Class BluetoothManager = objc_getClass("BluetoothManager");
id btCont = [BluetoothManager sharedInstance];
[btCont setPowered:YES]; 
```

我将 .header 文件放在以下路径下的 Header flolder 下：

/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.0.sdk/System/Library/PrivateFrameworks/BluetoothManager.framework/Headers

但问题是它给了我一个错误，即：找不到'BluetoothManager/BluetoothManager.h'文件

所以如果我在这里做错了什么，请告诉我。

我从以下链接中找到了所有这些东西：

[以编程方式在 iphone sdk 中打开蓝牙？](https://stackoverflow.com/questions/1743610/programmatically-turn-on-bluetooth-in-the-iphone-sdk)

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:22:11.677

通过尝试各种尝试，我找到了使用“GameKit”框架在蓝牙上运行的简单方法。

实施步骤：

1.  将 GameKit 框架添加到您的项目中。

2.  将类导入您的项目 -- #import GameKit/GameKit.h>

3.  创建 GKPeerPickerController 对象 GKPeerPickerController *connectionPicker;

4.  将此代码粘贴到 viewDidLoad

    connectionPicker = [[GKPeerPickerController alloc] init]; connectionPicker.delegate = self; [连接选择器显示]；

它向您显示打开蓝牙的警报弹出窗口，然后单击是，您将打开蓝牙。

但我不知道自定义弹出窗口，所以如果有人知道，请告诉我。

先感谢您。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:48:35.863

首先，为了确定，你知道你不能在运输应用程序中使用它，对吧？

看看[这个答案](https://stackoverflow.com/questions/10272349/ios-5-1-toggle-bluetooth-by-bluetoothmanager)，它解释了如何生成你需要的头文件。

# c# - 如何以编程方式创建系统还原点？

> ID：10749528
> 
> 赞同：6
> 
> 时间：2012-05-25T06:27:39.143
> 
> 标签：c#, windows, backup, restore-points

我正在寻找一种方法，通过按下按钮来创建具有当前日期和时间的系统还原点。我试过在网上搜索一种简单的方法来做到这一点，但我还没有找到。

我从以下位置找到了这个代码片段：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa378847%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378847%28v=vs.85%29.aspx)但它是在 VB 而不是 C# 中，我尝试转换它有点，但我不认为我在翻译它方面做得很好。

```
'CreateRestorePoint Method of the SystemRestore Class
'Creates a restore point. Specifies the beginning and 
'the ending of a set of changes so that System Restore 
'can create a restore point.This method is the 
'scriptable equivalent of the SRSetRestorePoint function.

Set Args = wscript.Arguments
If Args.Count() > 0 Then
    RpName = Args.item(0)
Else 
    RpName = "Vbscript"
End If

Set obj = GetObject("winmgmts:{impersonationLevel=impersonate}!root/default:SystemRestore")

If (obj.CreateRestorePoint(RpName, 0, 100)) = 0 Then
wscript.Echo "Success"
Else 
    wscript.Echo "Failed"
End If 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T06:31:49.673

这是用于创建还原点的 VB.NET 片段（可在[此处](http://www.codeproject.com/Tips/49359/Programmatically-Create-System-Restore-Point)找到）：

```
Dim restPoint = GetObject("winmgmts:\\.\root\default:Systemrestore")
If restPoint IsNot Nothing Then
     If restPoint.CreateRestorePoint("test restore point", 0, 100) = 0 Then
         MsgBox("Restore Point created successfully")
    Else
         MsgBox("Could not create restore point!")
     End If
End If 
```

应该很容易“翻译”为 C#。

这是取自[这个问题](https://stackoverflow.com/questions/32845/creating-system-restore-points-thoughts)的 C# 中的另一个片段：

```
private void CreateRestorePoint(string description)
{
    ManagementScope oScope = new ManagementScope("\\\\localhost\\root\\default");
    ManagementPath oPath = new ManagementPath("SystemRestore");
    ObjectGetOptions oGetOp = new ObjectGetOptions();
    ManagementClass oProcess = new ManagementClass(oScope, oPath, oGetOp);

    ManagementBaseObject oInParams =
         oProcess.GetMethodParameters("CreateRestorePoint");
    oInParams["Description"] = description;
    oInParams["RestorePointType"] = 12; // MODIFY_SETTINGS
    oInParams["EventType"] = 100;

    ManagementBaseObject oOutParams =
         oProcess.InvokeMethod("CreateRestorePoint", oInParams, null); 
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-03-11T09:02:14.027

迟到了，但我改进了 M4N 的答案......

```
/// <summary>
///     The type of event. For more information, see <see cref="CreateRestorePoint"/>.
/// </summary>
public enum EventType
{
    /// <summary>
    ///     A system change has begun. A subsequent nested call does not create a new restore
    ///     point.
    ///     <para>
    ///         Subsequent calls must use <see cref="EventType.EndNestedSystemChange"/>, not
    ///         <see cref="EventType.EndSystemChange"/>.
    ///     </para>
    /// </summary>
    BeginNestedSystemChange = 0x66,

    /// <summary>
    ///     A system change has begun.
    /// </summary>
    BeginSystemChange = 0x64,

    /// <summary>
    ///     A system change has ended.
    /// </summary>
    EndNestedSystemChange = 0x67,

    /// <summary>
    ///     A system change has ended.
    /// </summary>
    EndSystemChange = 0x65
}

/// <summary>
///     The type of restore point. For more information, see <see cref="CreateRestorePoint"/>.
/// </summary>
public enum RestorePointType
{
    /// <summary>
    ///     An application has been installed.
    /// </summary>
    ApplicationInstall = 0x0,

    /// <summary>
    ///     An application has been uninstalled.
    /// </summary>
    ApplicationUninstall = 0x1,

    /// <summary>
    ///     An application needs to delete the restore point it created. For example, an
    ///     application would use this flag when a user cancels an installation. 
    /// </summary>
    CancelledOperation = 0xd,

    /// <summary>
    ///     A device driver has been installed.
    /// </summary>
    DeviceDriverInstall = 0xa,

    /// <summary>
    ///     An application has had features added or removed.
    /// </summary>
    ModifySettings = 0xc
}

/// <summary>
///     Creates a restore point on the local system.
/// </summary>
/// <param name="description">
///     The description to be displayed so the user can easily identify a restore point.
/// </param>
/// <param name="eventType">
///     The type of event.
/// </param>
/// <param name="restorePointType">
///     The type of restore point. 
/// </param>
/// <exception cref="ManagementException">
///     Access denied.
/// </exception>
public static void CreateRestorePoint(string description, EventType eventType, RestorePointType restorePointType)
{
    var mScope = new ManagementScope("\\\\localhost\\root\\default");
    var mPath = new ManagementPath("SystemRestore");
    var options = new ObjectGetOptions();
    using (var mClass = new ManagementClass(mScope, mPath, options))
    using (var parameters = mClass.GetMethodParameters("CreateRestorePoint"))
    {
        parameters["Description"] = description;
        parameters["EventType"] = (int)eventType;
        parameters["RestorePointType"] = (int)restorePointType;
        mClass.InvokeMethod("CreateRestorePoint", parameters, null);
    }
} 
```

**例子：**

```
CreateRestorePoint("Example Restore Point", EventType.BeginSystemChange, RestorePointType.ModifySettings); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:35:56.490

```
var restPoint = GetObject(@"winmgmts:\\.\root\default:Systemrestore");
if(restPoint!=null)
{
    if(restPoint.CreateRestorePoint("", 0, 100) == 0)
    {
        //do something
    }
    else
    {
         //do something
    }
} 
```

# ftp - FTP文件发送不正确

> ID：10749530
> 
> 赞同：0
> 
> 时间：2012-05-25T06:27:46.650
> 
> 标签：ftp

我们有一些标签打印机 A4+，我们用它们为我们的仓库打印大量标签，因为我们想打印每个标签都不同的标签，我们决定为每个打印作业制作一个 DBF 文件，所以每次DBF 文件包含不同记录的数量，然后我们的 Web 服务向 A4+ 打印机发出 ftp 请求并将 DBF 文件 ftp 到打印机，然后将打印命令发送到打印机并打印 DBF 文件。大多数情况下，所有步骤都成功发生，但有时打印机上的 DBF 文件与 Web 服务上生成的 dbf 文件几乎没有区别，并且差异在文件的标题上，这种差异导致了问题，所以打印机打印标签但不打印到 DBF 文件的末尾，例如，如果 DBF 文件包含 500 条记录，

我们比较了托管 Web 服务的服务器上的 DBF 文件（这是我们创建 dbf 文件的地方）和打印机上 ftp 的文件，它们是相同的，只是文件头有点不同，它使这个问题。

我包括我们制作 DBF 文件的代码以及我们用来将该文件 ftp 到打印机的代码，并且我还附上了两个 DBF 文件作为示例。

我们的团队致力于该项目，我们研究了您网站上的帮助，但此时我们可以看到一切正常，我们无法调试此案例，也许您可​​以帮助我们解决这个问题。

------------------------创建 DBF 文件 ----------- -------------------------------------------

```
 private bool EportDBF(string filePath, List<BarcodeData> list)
   {
       string tableName = string.Empty;
       string folderPath = string.Empty;

       GetFileNameAndPath(filePath, ref tableName, ref folderPath);

       string connString = "Provider=Microsoft.Jet.OLEDB.4.0; Data Source=" + folderPath + "; Extended Properties=DBASE IV;";
       string createStatement = "Create Table " + tableName + " ( ";
       string insertStatement = "Insert Into " + tableName + " Values ( ";
       string insertTemp = string.Empty;

       OleDbConnection conn = new OleDbConnection(connString);

       try
       {

           createStatement += "[RW] varchar(4), ";
           createStatement += "[CODE] varchar(16), ";
           createStatement += "[DESC] varchar(16), ";
           createStatement += "[WEIGHT] varchar(16), ";
           createStatement += "[DATE] varchar(32), ";
           createStatement += "[RCODE] varchar(16), ";
           createStatement += "[BCODE] varchar(16) )";

           conn.Open();

           DataSet dsFill = new DataSet();

           OleDbDataAdapter daInsertTable = new OleDbDataAdapter(createStatement, conn);

           daInsertTable.Fill(dsFill);

           int row = 1001;

           foreach (var item in list)
           {
               insertTemp = insertStatement;

               insertTemp += "'" + row++ + "' , ";
               insertTemp += "'" + item.ItemCode + "' , ";
               insertTemp += "'0' , ";
               insertTemp += "'" + item.Weight + "' , ";
               insertTemp += "'" + item.DateTime + "' , ";
               insertTemp += "'" + item.ReferenceCode + "' , ";
               insertTemp += "'" + item.Barcode.ToString() + "' ) ;";

               daInsertTable = new OleDbDataAdapter(insertTemp, conn);

               daInsertTable.Fill(dsFill);
           }

           conn.Close();
           conn.Dispose();
       }
       catch (Exception ex)
       {
           conn.Close();
           conn.Dispose();

           return false;
       }

       return true;
   } 
```

------------------------ FTP DBF 文件到打印机------------ ----------------------

```
 private bool UpLoadDBF(List<BarcodeData> barcodeDatas, string path)
   {
       try
       {
           EportDBF(path, barcodeDatas);

           FtpWebRequest request;
           FtpWebResponse response;

           Stream sourceStream = new MemoryStream();
           Stream requestStream = sourceStream;
           StreamReader reader = new StreamReader(path);

           try
           {
               request = (FtpWebRequest)WebRequest.Create("ftp://" + printerIP + "/card/barcodes.dbf");
               request.Method = WebRequestMethods.Ftp.UploadFile;
               request.KeepAlive = false;
               request.Credentials = new NetworkCredential(user, password);

               byte[] byteArray = Encoding.Default.GetBytes(reader.ReadToEnd());
               sourceStream = new MemoryStream(byteArray);

               try
               {
                   requestStream = request.GetRequestStream();
               }
               finally 
               {
                   request.ContentLength = sourceStream.Length;

                   byte[] buffer = new byte[sourceStream.Length];
                   int count = 2048;
                   if (sourceStream.Length < count)
                       count = (int) sourceStream.Length;

                   int bytesRead = sourceStream.Read(buffer, 0, count);

                   do
                   {
                       requestStream.Write(buffer, 0, bytesRead);
                       bytesRead = sourceStream.Read(buffer, 0, count);

                   } while (bytesRead > 0);

                   sourceStream.Close();
                   requestStream.Close();
               }
           }
           catch (Exception ex)
           {
           }
           finally
           {
               request = null;

               sourceStream.Close();
               sourceStream.Dispose();

               reader.Close();
               reader.Dispose();

               requestStream.Close();
               requestStream.Dispose();
           }
       }
       catch (Exception ex)
       {
           return false;
       }

       return true;
   } 
```

* * *

所以提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:50:51.973

我不知道您为什么使用 Encoding.Default.GetBytes 来读取字节。而不是使用 FileStream 的 Read 方法来读取字节。希望这可以帮助。

# data-binding - wicket select propertymode--未定义获取方法

> ID：10749534
> 
> 赞同：1
> 
> 时间：2012-05-25T06:28:08.070
> 
> 标签：data-binding, wicket

我正在 wicket 中制作一个简单的下拉组件，如下所示：http://www.mkyong.com/wicket/wicket-select-example/

现在我得到错误：最后一个原因：没有为类定义获取方法：类 no.polaris.AdressaHomePage 表达式：2011

有人看到有什么问题吗？（它对 selectedYear 的吸气剂没有帮助）。

干杯 Terje Eithun

```
public class AdressaHomePage extends BasePage {

private String selectedYear = "2011";

public AdressaHomePage(final PageParameters parameters) {

    add(new FeedbackPanel("feedback"));

    Form<?> form = new Form<Void>("form") {

        @Override
        protected void onSubmit() {
            info("Selected year: " + selectedYear);
        }
    };
    add(form);  

    Select<String> yearSelector = new Select<String>("year-selector", new PropertyModel<String>(this, selectedYear));

    yearSelector.add(new SelectOption<String>("year1", new Model<String>("2012")));
    yearSelector.add(new SelectOption<String>("year2", new Model<String>("2011")));
    yearSelector.add(new SelectOption<String>("year3", new Model<String>("2010")));
    yearSelector.add(new SelectOption<String>("year4", new Model<String>("2009")));
    form.add(yearSelector);
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T08:40:37.940

新的 PropertyModel(this,"selectedYear")

注意引号。

# ios - 在应用程序运行时实现后台任务的最佳方法

> ID：10749541
> 
> 赞同：1
> 
> 时间：2012-05-25T06:28:48.987
> 
> 标签：ios, multithreading, ios4

在应用程序运行时在另一个线程中完成工作的 iOS 中实现任务的最佳方法是什么？

我想实现一个线程，在应用程序运行时每 10 分钟检查一次更新。有这样的可能性来实现吗？我想我无法实现一个无限循环的线程，因为苹果会拒绝该应用程序，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:31:36.877

你绝对不需要一个无休止地空闲的线程，但我无法想象苹果会因为*这个*原因拒绝你的应用程序：但这根本不是一个好的应用程序设计。

我怀疑你真正想做的是有一个每十分钟运行一次的[“ `NSTimer`”任务。](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Timers/Timers.html)

还有可能向[`performSelector:withObject:afterDelay:`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/performSelector%3awithObject%3aafterDelay%3a)对象发送消息，然后让该消息触发一个单独的线程来完成后台工作。

# python - 仅当子类覆盖方法时才执行类属性的 copy()

> ID：10749547
> 
> 赞同：2
> 
> 时间：2012-05-25T06:29:22.827
> 
> 标签：python, inheritance, decorator

我正在努力实现以下目标：

```
class Data(object):
    def __init__(self, data):
        self.data = data
        self.valid = False
        #Analyze and validate data
        self.preprocess_data()
        self.validate_data()

    def preprocess_data():
        pass

    def validate_data():
        #process data

class MyData(Data):
    def __init__():
        super(MyData,self).__init__(data)

    def preprocess_data(self):
        #preprocess it 
```

当子类执行覆盖的 **`preprocess_data`**方法时，我想自动执行以下操作： `self.data = self.data.copy()`

如何做到这一点（如果有的话）？我考虑过装饰**`preprocess`**，但我认为在基类中装饰的重写方法不会继承“装饰”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:52:40.210

```
class Data(object):
    def __init__(self, data):
        self.data = data
        self.valid = False
        #Analyze and validate data
        self._preprocess_data()
        self.validate_data()
    def _preprocess_data(self):
        if self.preprocess_data.im_func != Data.preprocess_data.im_func:
            self.data = self.data.copy()
        return self.preprocess_data() 
```

这会测试后面的函数`self.preprocess_data`是否为`Data.preprocess_data`; 如果不是，它会复制您的数据。当然，这需要您调用`_preprocess_data`您的类，以便实际执行附加代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T07:48:41.983

这可以通过装饰器和简单的元类轻松解决。这有点hacky，但完全符合您的要求。

```
import functools

class DataMeta(type):
    def __new__(cls, name, bases, dictn):
        fn = dictn.get('preprocess_data')
        if fn:
            if getattr(fn, '_original', False) is False:
                @functools.wraps(fn)
                def wrapper(self, *args, **kwargs):
                    self.data = self.data.copy()
                    return fn(self, *args, **kwargs)
                dictn['preprocess_data'] = wrapper
        return type.__new__(cls, name, bases, dictn)

def base_method(fn):
    fn._original = True
    return fn

class Data(object):
    __metaclass__ = DataMeta

    def __init__(self, data):
        self.data = data
        self.valid = False
        #Analyze and validate data
        self.preprocess_data()
        self.validate_data()

    @base_method
    def preprocess_data(self):
        print "Original preprocess_data called"

    def validate_data(self):
        pass

class MyData(Data):
    def __init__(self, data):
        super(MyData, self).__init__(data)

    def preprocess_data(self):
        print "Overridden preprocess_data called"

class MyData1(Data):
    def __init__(self, data):
        super(MyData1, self).__init__(data)

class Dummy(object):
    def copy(self):
        print 'Copying data'

md = MyData(Dummy()) # Prints 'Copying data'
md1 = MyData1(Dummy()) # Doesn't print it, since MyData1 doesn't override preprocess_data 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T07:51:46.217

我会投票支持@ThiefMaster 的做事方式。如果你想让你的生活复杂化，你可以使用带有[装饰器的](http://docs.python.org/library/functools.html)[元类](https://stackoverflow.com/a/6581949/1043456)：

```
from functools import wraps

class PreprocessMetaclass(type): 
    def __new__(cls, name, bases, dct):

        try:
            if Data in bases and "preprocess_data" in dct:
                f = dct["preprocess_data"]
                @wraps(f)
                def preprocess_data(self, *args, **kwargs):
                    self.data = self.data.copy()
                    return f(self, *args, **kwargs)

                attrs = dct.copy()
                attrs["preprocess_data"] = preprocess_data
        except NameError as e:
            # This is if Data itself is being created, just leave it as it is.
            # Raises an NameError, because Data does not exist yet in "if Data in bases"
            attrs = dct

        return super(PreprocessMetaclass, cls).__new__(cls, name, bases, attrs)

class Data(object):
    # This here works if the subclasses don't specify
    # their own metaclass that isn't a subclass of the above.
    __metaclass__ = PreprocessMetaclass

    def __init__(self, data):
        self.data = data
        self.valid = False
        #Analyze and validate data
        self.preprocess_data()
        self.validate_data()

    def preprocess_data(self):
        self.data["newkey"] = 3

    def validate_data(self):
        print "This is the result: self.data =", self.data

class MyData(Data):
    def __init__(self, data):
        super(MyData,self).__init__(data)

    def preprocess_data(self):
        """The docs of the subclass"""
        self.data["newkey"] = 4

if __name__ == "__main__":
    dct1, dct2 = {"data": 1}, {"mydata": 2}

    print "Create Data"
    d = Data(dct1)

    print "Create MyData"
    md = MyData(dct2)

    print "The original dict of Data (changed):", dct1
    print "The original dict of MyData (unchanged):", dct2

    # If you do that, you will see that the docstring is still there,
    # but the arguments are no longer the same.
    # If that is needed (you don't have arguments, but the subclass might have)
    # then just enter the same arguments as the subclass's function
    # help(MyData) 
```

**PS**这是我第一次需要使用元类，但这是完美的场景。您需要在创建类之前（之前`__init__`）覆盖函数定义。现在，您可能不需要它，但更一般地说，您可能被迫使用它。

一个更简单的例子：

```
if not (self.preprocess_data is Data.preprocess_data):
    self.data = self.data.copy()
self.preprocess_data() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T08:02:14.997

简单地说：

```
class Data(object):

    # Part of user API
    def preprocess_data():
        self.data = self.data.copy()
        self.preprocess_data_impl()

    # Part of internal API    
    def preprocess_data_impl():
        pass

class MyData(Data):

    def preprocess_data_impl():
        # Do stuff 
```

我知道这不像使用装饰器那样迷人，但可以很容易地了解实际发生的情况。

# jquery - jQuery动态div

> ID：10749552
> 
> 赞同：1
> 
> 时间：2012-05-25T06:29:49.363
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, jquery-ui

我使用以下jquery在我的rails视图中动态添加表单元素。添加按钮有效，但删除按钮不可点击。

```
$(document).ready(function() {
           $('#btnAdd').click(function() {
               var num     = $('.clonedInput').length;
               var newNum  = new Number(num + 1);

               var newElem = $('#input' + num).clone().attr('id', 'input' + newNum);

               newElem.children(':first').attr('id', 'name' + newNum).attr('name', 'name' + newNum);
               $('#input' + num).after(newElem);
               $('#btnDel').attr('disabled','');

               if (newNum == 5)
                   $('#btnAdd').attr('disabled','disabled');
           });

           $('#btnDel').click(function() {
               var num = $('.clonedInput').length;

               $('#input' + num).remove();
               $('#btnAdd').attr('disabled','');

               if (num-1 == 1)
                   $('#btnDel').attr('disabled','disabled');
           });

           $('#btnDel').attr('disabled','disabled');
       }); 
```

这是表单代码：

```
<form id="myForm">
    <div id="input1" style="margin-bottom:4px;" class="clonedInput">
        Name: <input type="text" name="name1" id="name1" />
    </div>

    <div>
        <input type="button" id="btnAdd" value="add another name" />
        <input type="button" id="btnDel" value="remove name" />
    </div>
</form> 
```

谢谢！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:19:38.260

试试这个小提琴[http://jsfiddle.net/269HU/](http://jsfiddle.net/269HU/)

```
use $("#id").attr('disabled',false);   --> for enable 
```

和

```
use $("#id").attr('disabled',true);   --> for disable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:53:08.213

答案在这里找到并解释...... [http://digitalmeaning.co/thoughts/using-jquery-to-duplicate-a-section-of-a-form-maintaining-accessibility/](http://digitalmeaning.co/thoughts/using-jquery-to-duplicate-a-section-of-a-form-maintaining-accessibility/)

“对于更高版本的 jQuery，将按钮代码更改为

$('#btnDelW1').attr('disabled',true);

或者

$('#btnDelW1').attr('disabled',false);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:37:36.147

尝试删除

```
.click(function() { 
```

有了这个

```
.on('click',function() { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T06:44:03.850

`$('#btnDel').attr('disabled', '');`实际上并没有删除该`disabled`属性 - 它只是将其设置为空字符串，并且在空白时它仍然处于活动状态！改用这个：

```
 $('#btnDel').removeAttr('disabled'); 
```

jsfiddle：http: [//jsfiddle.net/LzdHg/](http://jsfiddle.net/LzdHg/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-25T06:37:35.820

试试jQuery的live方法

```
$('#btnDel').live('click', function() {
               var num = $('.clonedInput').length;

               $('#input' + num).remove();
               $('#btnAdd').attr('disabled','');

               if (num-1 == 1)
                   $('#btnDel').attr('disabled','disabled');
           }); 
```

[http://api.jquery.com/live/](http://api.jquery.com/live/)

# drupal - 向 drupal 6 评论表单添加额外字段

> ID：10749553
> 
> 赞同：0
> 
> 时间：2012-05-25T06:30:00.213
> 
> 标签：drupal, drupal-6, drupal-modules

我需要在 drupal 评论表单中添加一个额外的“名称”字段。我使用 hook_form_alter 实现了这个。现在这个领域来了。我无法控制它的位置。现在它是最后一个。我改变了重量，然后它也没有影响。

```
function comment_extra_form_alter(&$form, &$form_state, $form_id) {
global $user;
$output = '';
   if (!$user->uid) {
    switch ($form_id) {        
          case 'comment_form':
            $form['admin']['name'] = array(
              '#type' => 'textfield',
              '#title' => t('Name'),
              '#weight' => -1,
              '#size' => 60,
              '#maxlength' => 60,
              '#default_value' => $author,

            );

            $output .= comment_render($form);

            break;
    }
    return $output;
}
} 
```

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:55:22.467

**请尝试此代码段，并阅读原因。**

```
function hook_form_alter(&$form, &$form_state, $form_id) {
  global $user;
  $output = '';
  switch ($form_id) {
   case 'comment_form':
     $form['_author']['#weight'] = -50;
     $form['subject']['#weight'] = -49;
     $form['name'] = array(
     '#type' => 'textfield',
     '#title' => t('Name'),
     '#weight' => -48,
     '#size' => 60,
     '#maxlength' => 60,
     '#default_value' => $user,
     );
     $form['comment_filter']['#weight'] = -47;
     $output .= comment_render($form);
   break;
}
return $output;
} 
```

原因是：您还需要为其他字段设置权重，这有助于您设置自定义字段的权重。

我认为上面的片段会帮助你。如果需要进一步的需要，请告诉我，一定会有所帮助。

# unix - 更改端口以进行 SSH 访问？

> ID：10749558
> 
> 赞同：0
> 
> 时间：2012-05-25T06:30:20.877
> 
> 标签：unix, ssh

我是 SSH 访问的新手，正在尝试访问禁用端口 22 的本地计算机。悬停 我打开了不同的端口，想知道如何尝试使用该端口访问机器。

`ssh example@10.1.1.5`

端口号去了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T06:33:09.877

您可以使用 -p 选项：

```
ssh -p1022 example@10.1.1.5 
```

# replication - 消息传递、分布式任务调度、缓存复制框架（Java）

> ID：10749561
> 
> 赞同：1
> 
> 时间：2012-05-25T06:30:33.787
> 
> 标签：replication, messaging, cluster-computing, distributed-computing, high-availability

我需要一个集群框架：消息传递、集群加入/离开、分布式任务调度和缓存复制。最好都是在同一个框架下处理，从 DB 初始化 IP，具有裂脑保护，具有领导者选举（和重新选举）。我没有大量的服务器（1-10，可能不会更多）。

注意 - 我的服务器与每个服务器内存缓存（至少我计划共享的部分）应该从领导者复制到追随者的点相同。具体来说，像 EHCAche、terracotta 和 hazelcast（至少在它们的默认配置中）这样的解决方案并不适合。

我应该在哪里看的任何想法？我即将放弃并在 jgroups 上推出自己的产品，但决定再给它一次机会。如果可能的话，请用以前的框架经验来支持你的答案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-28T22:25:07.307

将 Zookeeper 与 Curator 一起使用，您可能会准确地实现您指定的项目。

[http://zookeeper.apache.org/](http://zookeeper.apache.org/)

*   来自该站点：“ZooKeeper 是一个集中式服务，用于维护配置信息、命名、提供分布式同步和提供组服务。所有这些类型的服务都以某种形式被分布式应用程序使用。每次实现它们都有修复不可避免的错误和竞争条件需要做很多工作。由于实施这些服务的难度，应用程序最初通常会忽略它们，这使得它们在发生变化时变得脆弱并且难以管理。甚至如果正确完成，这些服务的不同实现会在部署应用程序时导致管理复杂性。”

[http://curator.apache.org/](http://curator.apache.org/)

馆长给你

*   **食谱**：一些常见的 ZooKeeper “食谱”的实现。这些实现建立在策展人框架之上。
*   **框架**：Curator 框架是一个高级 API，它极大地简化了 ZooKeeper 的使用。它添加了许多基于 ZooKeeper 的功能，并处理管理与 ZooKeeper 集群的连接和重试操作的复杂性。
*   **实用程序**：使用 ZooKeeper 时有用的各种实用程序。Client 捆绑的 ZooKeeper 类的替代品，它负责一些低级的内务管理并提供一些有用的实用程序。
*   **错误**：Curator 如何处理错误、连接问题、可恢复异常等。
*   **扩展**：curator-recipes 包实现了 ZooKeeper 文档中描述的常见配方。为避免使该包膨胀，具有垂直吸引力的食谱/应用程序将使用命名约定 curator-x-name 放入单独的“扩展”包中。

# jquery - 下拉选择背景图片更改

> ID：10749563
> 
> 赞同：0
> 
> 时间：2012-05-25T06:30:40.783
> 
> 标签：jquery, asp.net, css, drop-down-menu, background-image

[我使用来自http://www.misfitgeek.com/2011/04/jquery-styled-dropdownlist/](http://www.misfitgeek.com/2011/04/jquery-styled-dropdownlist/) 的jquery 下拉选择框，
它工作正常，除了我想在单击时将背景更改为 0bg_select.png 并且当下拉菜单打开时图像前一个。任何人都可以帮助

```
 <!-- aspx -->
                <link href='Styles/Selectbox.css' rel='stylesheet' type='text/css' />
                    <script src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.5.1.js'
                            type='text/javascript' charset='utf-8'></script>
                    <script type='text/javascript' src='Scripts/jquery.selectbox-0.5.js'>
                    </script>
                    <script src='Scripts/PageScript.js' type='text/javascript'></script>
        <asp:DropDownList runat='server' name='Items' id='Items'
                              class='StyledDD' ClientIDMode='Static'>
              <asp:ListItem>One</asp:ListItem>
              <asp:ListItem>Two</asp:ListItem>
              <asp:ListItem>Three</asp:ListItem>
              <asp:ListItem>Four</asp:ListItem>
            </asp:DropDownList>

        <!--    jquery function  -->
            $(document).ready(function () {
                $('.StyledDD').selectbox();
            });

    <!-- CSS --->
    /* Drop down styles*/
    div.selectbox-wrapper {
      position:absolute;
      width:400px;
      background-color:white;
      border:1px solid #ccc;
      margin:0px;
      margin-top:-10px;
      padding:0px;
      text-align:left;
      max-height:200px;
      overflow:auto;
    }

    /*Drop down list styles*/
    div.selectbox-wrapper ul {
      list-style-type:none;
      margin:0px;
      padding:0px;
    }
    /* Selected item in dropdown list*/
    div.selectbox-wrapper ul li.selected {
      background-color: #EAF2FB;
    }
    /*
 * jQuery selectbox plugin
 *
 * Copyright (c) 2007 Sadri Sahraoui (brainfault.com)
 * Licensed under the GPL license and MIT:
 *   http://www.opensource.org/licenses/GPL-license.php
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * The code is inspired from Autocomplete plugin (http://www.dyve.net/jquery/?autocomplete)
 *
 * Revision: $Id$
 * Version: 0.5
 * 
 * Changelog :
 *  Version 0.5 
 *  - separate css style for current selected element and hover element which solve the highlight issue 
 *  Version 0.4
 *  - Fix width when the select is in a hidden div   @Pawel Maziarz
 *  - Add a unique id for generated li to avoid conflict with other selects and empty values @Pawel Maziarz
 */
jQuery.fn.extend({
    selectbox: function(options) {
        return this.each(function() {
            new jQuery.SelectBox(this, options);
        });
    }
});

/* pawel maziarz: work around for ie logging */
if (!window.console) {
    var console = {
        log: function(msg) {
        }
    };
}
/* */

jQuery.SelectBox = function (selectobj, options) {

    var opt = options || {};
    opt.inputClass = opt.inputClass || "selectbox";
    opt.containerClass = opt.containerClass || "selectbox-wrapper";
    opt.hoverClass = opt.hoverClass || "current";
    opt.currentClass = opt.selectedClass || "selected";
    opt.debug = opt.debug || false;

    var elm_id = selectobj.id;
    var active = -1;
    var inFocus = false;
    var hasfocus = 0;
    //jquery object for select element
    var $select = $(selectobj);
    // jquery container object
    var $container = setupContainer(opt);
    //jquery input object 
    var $input = setupInput(opt);
    // hide select and append newly created elements
    $select.hide().before($input).before($container);

    init();

    $input
    .click(function () {
        if (!inFocus) {
            $container.toggle();
        }
    })
    .focus(function () {
        if ($container.not(':visible')) {
            inFocus = true;
            $container.show();
        }
    })
    .keydown(function (event) {
        switch (event.keyCode) {
            case 38: // up
                event.preventDefault();
                moveSelect(-1);
                break;
            case 40: // down
                event.preventDefault();
                moveSelect(1);
                break;
            //case 9:  // tab     
            case 13: // return
                event.preventDefault(); // seems not working in mac !
                $('li.' + opt.hoverClass).trigger('click');
                break;
            case 27: //escape
                hideMe();
                break;
        }
    })
    .blur(function () {
        if ($container.is(':visible') && hasfocus > 0) {
            if (opt.debug) console.log('container visible and has focus');          
        } else {
            hideMe();
        }
    });

    function hideMe() {
        hasfocus = 0;
        $container.hide();
    }

    function init() {
        $container.append(getSelectOptions($input.attr('id'))).hide();
        var width = $input.css('width');
        $container.width(width);
        $container.attr('padding-left', '30px');
    }

    function setupContainer(options) {
        var container = document.createElement("div");
        $container = $(container);
        $container.attr('id', elm_id + '_container');
        $container.addClass(options.containerClass);

        return $container;
    }

    function setupInput(options) {
        var input = document.createElement("input");
        var $input = $(input);
        $input.attr("id", elm_id + "_input");
        $input.attr("type", "text");
        $input.addClass(options.inputClass);
        $input.attr("autocomplete", "off");
        $input.attr("readonly", "readonly");
        $input.attr("tabIndex", $select.attr("tabindex")); // "I" capital is important for ie

        return $input;
    }

    function moveSelect(step) {
        var lis = $("li", $container);
        if (!lis) return;

        active += step;

        if (active < 0) {
            active = 0;
        } else if (active >= lis.size()) {
            active = lis.size() - 1;
        }

        lis.removeClass(opt.hoverClass);

        $(lis[active]).addClass(opt.hoverClass);
    }

    function setCurrent() {
        var li = $("li." + opt.currentClass, $container).get(0);
        var ar = ('' + li.id).split('_');
        var el = ar[ar.length - 1];
        $select.val(el);
        $input.val($(li).html());
        return true;
    }

    // select value
    function getCurrentSelected() {
        return $select.val();
    }

    // input value
    function getCurrentValue() {
        return $input.val();
    }

    function getSelectOptions(parentid) {
        var select_options = new Array();
        var ul = document.createElement('ul');
        $select.children('option').each(function () {
            var li = document.createElement('li');
            li.setAttribute('id', parentid + '_' + $(this).val());
            li.innerHTML = $(this).html();
            if ($(this).is(':selected')) {
                $input.val($(this).html());
                $(li).addClass(opt.currentClass);
            }
            ul.appendChild(li);
            $(li)
            .mouseover(function (event) {
                hasfocus = 1;
                if (opt.debug) console.log('over on : ' + this.id);
                jQuery(event.target, $container).addClass(opt.hoverClass);
            })
            .mouseout(function (event) {
                hasfocus = -1;
                if (opt.debug) console.log('out on : ' + this.id);
                jQuery(event.target, $container).removeClass(opt.hoverClass);
            })
            .click(function (event) {
                var fl = $('li.' + opt.hoverClass, $container).get(0);
                if (opt.debug) console.log('click on :' + this.id);
                $('li.' + opt.currentClass).removeClass(opt.currentClass);
                $(this).addClass(opt.currentClass);
                setCurrent();
                hideMe();
            });
        });
        return ul;
    }

};

    /* Hover state for dropdown list */
    div.selectbox-wrapper ul li.current {
      background-color: #CDD8E4;
    }

    /* Drop down list items style*/
    div.selectbox-wrapper ul li {
      list-style-type:none;
      display:block;
      margin:0;
      padding:2px;
      cursor:pointer;
    }

    /* Look and feel of select box */
    .selectbox
    {
      margin: 0px 5px 10px 0px;
      padding-left:2px;
      font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;
      font-size:1em;/* Resize Font*/
      width : 190px; /* Resize Width */
      display : block;
      text-align:left;
      background: url('../images/bg_select.png') right;
      cursor: pointer;
      border:1px solid #D1E4F6;
      color:#333;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:17:35.263

只有在选择/单击下拉列表以及选项发生更改时才能更改图像。无法检测下拉菜单何时打开或关闭。

# .net - 通用处理程序与直接引用

> ID：10749571
> 
> 赞同：0
> 
> 时间：2012-05-25T06:31:28.950
> 
> 标签：.net, entity-framework, dll, generic-handler

在我正在处理数据访问层的项目中，我试图决定如何将数据和对象发送到下一层（和程序员）。是不是更好地告诉他

1.  引用我的 dll，或者
2.  我应该构建一个通用处理程序并让他从那里获取对象（即 json 格式）

如果我理解正确，在 2\. 的情况下，他将不得不自己处理对象，而在 1\. 的情况下，他将拥有我构建的实体。

注意：其他人很可能需要获取相同的数据，但我们还没有做到这一点。同样的问题 - 我应该把它变成一个网络服务，还是让他们访问处理程序？

# c++ - 带有多个源文件的 LD_PRELOAD

> ID：10749573
> 
> 赞同：0
> 
> 时间：2012-05-25T06:31:40.560
> 
> 标签：c++, linux, g++, ld-preload

我编写了 LD_PRELOAD 模块，我的所有源代码都在.cpp 中`source.cpp`，但现在我需要添加`crypt.cpp`一些我需要的类的文件，我如何使用多个 .cpp 文件通过 g++ 编译 LD_PRELOAD？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T11:05:55.250

如果您构建预加载库的命令是：

```
g++ -fPIC -shared -o preload.so source.cpp 
```

那么您将其更改为：

```
g++ -fPIC -shared -o preload.so source.cpp crypt.cpp 
```

即，您只需将文件名添加到编译 .cpp 文件的命令行末尾。

# java - 我在 S60 Emulator 上部署应用程序时收到 LinkageError: bad major version at offset=6

> ID：10749579
> 
> 赞同：4
> 
> 时间：2012-05-25T06:31:52.170
> 
> 标签：java, java-me, linker-errors, midp, s60

我实际上使用 S60 SDK 开发 J2ME 项目，我的项目给了我错误，

```
Uncaught exception!
com.ibm.oti.error.LinkageError: (com/yoke/symbian/YokeApp) bad major version at offset=6
    at java.lang.Class.forNameImpl(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at com.nokia.mj.impl.vmport.VmPort.Class_forName(VmPort.java:71)
    at com.symbian.j2me.midp.runtimeV2.Application.constructAction(Application.java:490)
    at com.symbian.j2me.midp.runtimeV2.Application.startRequest(Application.java:435)
    at com.symbian.j2me.midp.runtimeV2.Application.event(Application.java:304)
    at com.symbian.j2me.midp.runtimeV2.ApplicationEvent.dispatch(ApplicationEvent.java:90)
    at com.symbian.j2me.midp.runtimeV2.ApplicationThread.run(ApplicationThread.java:30)
-VM verbose connection exited 
```

因为我正在从 ProjectProperties -> Javacompiler 将项目的合规级别从 1.3 更改为 1.6（我已安装）。

基本上，当我从 git 存储库创建新项目时，它默认符合 1.3 级，所以我更改了它。

因为在两个类中我使用 String... &`@SuppressWarnings("rawtypes")`

如果我将合规级别更改回 1.3，此错误将继续存在。

我不明白为什么会这样。我实在是搞不定。但我发现的唯一方法是创建新项目。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:23:52.567

停止使用注释并返回到合规级别 1.3。

java-me 开发不支持合规级别 1.5。

java-me 代码不支持注解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T04:20:56.577

我实际上解决了这个错误，现在将 jdk1.3 用于 eclipse 中的项目。感谢 QuickRecipesOnSymbianOS。

我已经下载并安装了 jdk1.3.3 并在 eclipse 首选项 -> Java -> 已安装的 JRE（包含已安装 jdk 的文件夹的路径）中提供它。不提供 jre 文件夹，而是提供完整的 jdk 文件夹。它将添加到您项目的构建路径中。

安装后不要忘记设置环境变量。

# ios - 禁用 iCloud？

> ID：10749581
> 
> 赞同：0
> 
> 时间：2012-05-25T06:32:12.993
> 
> 标签：ios, iphone, icloud

我不想使用 iCloud，我的上一个版本被 Apple 标记为使用它，即使我认为我从未设置任何东西。我所有的配置都关闭了 iCloud 的复选框。我没有添加任何权利。

```
#include <sys/xattr.h>
- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{
    const char* filePath = [[URL path] fileSystemRepresentation];

    const char* attrName = "com.apple.MobileBackup";
    u_int8_t attrValue = 1;

    int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
    return result == 0;
} 
```

所以现在我正在尝试上面的代码示例。

我这样称呼它：

```
[self addSkipBackupAttributeToItemAtURL:"/var/apps/xxxxx/myapp/library/mydatabase.db"] 
```

我没有收到错误，但该死的 iCloud 仍然认为它会支持它。

我需要修改上面的程序吗？我正在发送一个静态字符串，那应该不同吗？我有一个带有下降路径的 NSString，但程序需要一个 URL？不知道该怎么做，否则会有所作为

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:42:48.373

在 filePath String 中设置文件路径。

```
NSURL *filePathURL = [[NSURL alloc]  initFileURLWithPath:filePath];
[self addSkipBackupAttributeToItemAtURL:filePathURL]; 
```

# tomcat - 如何在 tomcat 的应用程序上下文中设置默认数据库模式

> ID：10749584
> 
> 赞同：3
> 
> 时间：2012-05-25T06:32:21.857
> 
> 标签：tomcat, db2

这是我在 tomcat 的 localhost 文件夹中的 NXYTEST.xml

```
<Context path="/test" reloadable="true" docBase="D:\Development\workspace\NXYTEST\WebContent" workDir="D:\Development\workspace\NXYTEST\work">
    <Resource auth="Container" driverClassName="com.ibm.db2.jcc.DB2Driver" maxActive="20" maxIdle="10" maxWait="-1" name="jdbc/ebank_ds" password="abc123" type="javax.sql.DataSource" url="jdbc:db2://172.31.17.114:60012/TESTDB" username="con2nns" />
</Context> 
```

我的项目启动并获得数据库连接，但出现如下错误：

```
DB2 SQL error: SQLCODE: -204, SQLSTATE: 42704, SQLERRMC: CON2NNS.PUB_APPPAR caused by: DB2 SQL error: SQLCODE: -204, SQLSTATE: 42704, SQLERRMC: CON2NNS.PUB_APPPAR cause: com.ibm.db2.jcc.c.SqlException: DB2 SQL error: SQLCODE: -204, SQLSTATE: 42704, SQLERRMC: CON2NNS.PUB_APPPAR 
```

我想将“testschema”设置为默认架构，请帮助我，谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T12:56:11.033

您应该能够添加`url=`到此字符串的末尾：

```
:currentSchema=MySchema; 
```

所以，你的最终看起来像：

```
jdbc:db2://172.31.17.114:60012/TESTDB:currentSchema=testschema; 
```

# c++ - 在 C++ 中以高性能将 double 转换为 char*

> ID：10749585
> 
> 赞同：27
> 
> 时间：2012-05-25T06:32:25.040
> 
> 标签：c++, performance, type-conversion

我的应用程序需要将双精度值转换为 char* 以写入仅接受字符的管道。执行此操作的常用方法是使用*sprintf()*函数或使用iomanip.h 头文件中的*ostringstream*。

事实证明，这两者的表现都非常糟糕。而且我的应用程序需要经常进行这种转换，以至于它成为主要的瓶颈。

还有其他我可以使用的功能吗？我可以使用什么逻辑来编写高效的转换函数？到目前为止，我唯一能想到的就是使用除法和 mod 操作来获取每个单独的数字，并将这些数字附加到 char* 以获得整个 double 值。不过，这似乎不是一个好方法，而且本身性能可能会很差。

提前感谢您的想法。

编辑：关于如何使用 char* 存在一些混淆。char* 将是写入管道的 fwrite 函数的参数。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-25T06:48:20.213

如果您想打印 double 类型可以支持的任何数字，请使用那里的任何库来完成这项工作。它可以帮助您保持理智：[为什么“dtoa.c”包含这么多代码？](https://stackoverflow.com/questions/3173056/why-does-dtoa-c-contain-so-much-code)

如果您想以 double 类型打印数字的子集。例如，小数点后最多 4 位，小数点前不超过 5 位，则可以将数字四舍五入并转换为 int 类型，然后再使用除法和 mod 打印出来。我可以确认这种方法的性能。

* * *

**编辑：** 如果您最初的目的是发送数据进行通信，那么发送 double 的二进制形式将是最快和最准确的方法（不会因转换而损失精度）。其他答案中解释了这样做的方法。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-25T06:53:21.157

您可以将 std::ostream`write`和 std::istream`read`方法用于任何数据类型，您只需将数据重新解释为 char 指针：

```
double value = 5.0;
std::ostream os;
//...
os.write(reinterpret_cast<const char*>(&value), sizeof(value));
//..
std::istream is;
is.read(reinterpret_cast<char*>(&value), sizeof(value)); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-25T06:45:01.760

如果您想逐字节读取数据。使用这种技术

```
double dbl = 2222;
char* ptr = (char*)(&dbl); 
```

这将返回 dbl 的最低字节。ptr++ 将引用 dbl 的第二个字节。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-25T13:09:00.167

你能控制管道的两端吗？您只是想通过双打隧道还是需要双打的有效文本表示？

如果您只是在挖隧道并且管道清洁度为 8 位，请使用上述答案之一。

如果您需要字符串，请使用上述其他答案之一。

如果您的问题是管道只有 7 位宽，则在写入时转换为[基数 64](https://stackoverflow.com/q/342409/1002025) ，然后在读取时再次转换为基数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-25T12:01:38.433

```
/*

_ecvt_s Converts a double number to a string.

Syntax:

errno_t _ecvt_s( 
   char * _Buffer,
   size_t _SizeInBytes,
   double _Value,
   int _Count,
   int *_Dec,
   int *_Sign
);

[out] _Buffer
Filled with the pointer to the string of digits, the result of the conversion.

[in] _SizeInBytes
Size of the buffer in bytes.

[in] _Value
Number to be converted.

[in] _Count
Number of digits stored.

[out] _Dec
Stored decimal-point position.

[out] _Sign
Sign of the converted number.

*/

#include <stdio.h>
#include <stdlib.h>
#include <errno.h>

...
char *buf = (char*) malloc(_CVTBUFSIZE);
int decimal;
int sign;
int err;

err = _ecvt_s(buf, _CVTBUFSIZE, 1.2, 5, &decimal, &sign);

if (err != 0) {
// implement error handling
}
else printf("Converted value: %s\n", buf);

... 
```

希望这可以帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-25T07:00:23.047

您系统上的缓慢部分`sprintf`可能不一定是转换双精度，而是解析格式字符串。这对您来说可能是个好消息，因为您可以优化掉它。

此外，努力记录你所拥有的关于`double`你需要处理的值的范围、准确性和性质的所有知识，并用它来开发一个特殊的算法。

假设您的输入绝不是次正规数，使用已知的固定精度和准确度，相对高性能的结果可能如下所示：

```
itoa((int)((f + 0.00001) * 10000)) 
```

但是，您已经知道的`sprintf`和方法是唯一完全通用且可移植的解决方案。`ostream`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-25T06:46:47.793

一些系统提供`dtostre`和`dtostrf`转换功能 - 可能值得进行基准测试。您可以查看`sprintf()`源代码（例如 GNU 版本）以获取想法，根据需要选择`%e`和`%f`/或`%g`格式，避免格式字符串解释步骤，甚至使其可内联，并调整性能以适应口味 - 您可能可以删除NaN、infinity 和其他值的特殊大小写，如果您知道不必处理它们。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-25T06:50:43.237

使用`ftoa`会比`sprintf`它在内部使用的稍微好一点。[在此处](https://stackoverflow.com/questions/2302969/how-to-implement-char-ftoafloat-num-without-sprintf-library-function-i)查看相关问题 另请查看 ftoa 在您的库源代码中的实现方式，看看您是否可以针对您的特定场景对其进行改进。

这似乎`ftoa`根本不标准，我的错。这是一个[讨论，显示了一个](http://www.microchip.com/forums/m183763.aspx)声称比 sprintf 快得多的实现。您需要在自己的目标环境中进行分析，并使用 double 而不是 float 来实现。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-13T07:22:29.940

关于 dtostre，还有一个扩展版本 dtostren0( [https://github.com/63n0m3/Stdlib_extension](https://github.com/63n0m3/Stdlib_extension) )，程序员可以决定返回的数字以人类友好的方式显示多少小数位（不带 e+n），正常人会写的方式。它仍然取决于原始 dtostre。披露：我是作家。

# xml-parsing - 如何使用 javax.xml.transform 包在 xml 文件的转换中集成进度条？

> ID：10749591
> 
> 赞同：0
> 
> 时间：2012-05-25T06:32:41.327
> 
> 标签：xml-parsing, progress-bar, xslt

我正在使用 javax.xml.transform 包来转换巨大的 XML 文件......这个过程需要很多时间......最终用户将无法看到进度。有没有办法将进度条与转换过程相结合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T01:08:11.103

我通过报告到目前为止已经读取了多少输入文件来完成这种事情。例如，将`InputStream`您正在从中读取输入 XML 文件的 包装在 a`javax.swing.ProgressMonitorInputStream`中，然后从中`javax.xml.transform`读取。

当输入来自远程 URL 时，我的同事使用的模式是这样的：

```
URLConnection c = new URL(url).openConnection();
ProgressMonitorInputStream pm = new ProgressMonitorInputStream(parentComponent,
                "Transforming XML", c.getInputStream());
pm.getProgressMonitor().setMaximum(c.getContentLength());

// now read from 'pm' 
```

这与报告您的转换进度不同，但只要转换不等到它在生成输出之前读取整个文件，它就应该关闭。

# blackberry - 在 BlackBerry Bold 9000 模拟器中找不到符号 PhoneCall.getPhoneNumber

> ID：10749595
> 
> 赞同：0
> 
> 时间：2012-05-25T06:32:55.927
> 
> 标签：blackberry

我是黑莓应用程序开发的新手。我正在尝试在我的应用程序中检索来电号码，并且它在黑莓曲线设备和黑莓触摸模拟器上运行良好，但是在 BlackBerry Simulator Bold 9000 上运行此应用程序时，它显示“运行时异常”和“错误开始：Symbol PhoneCall.getPhoneNumber is not found”这样，这是我的代码，

```
import java.io.IOException;
import net.rim.blackberry.api.phone.AbstractPhoneListener;
import net.rim.blackberry.api.phone.Phone;
import net.rim.blackberry.api.phone.PhoneCall;
import net.rim.device.api.system.RadioInfo;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.Dialog;

/**
* This class extends the UiApplication class, providing a
* graphical user interface.
*/
public class MyApp extends UiApplication
{
/**
 * Entry point for application
 * @param args Command line arguments (not used)
 */ 
public static void main(String[] args)
{
    // Create a new instance of the application and make the currently
    // running thread the application's event dispatch thread.
    MyApp theApp = new MyApp();       
    theApp.enterEventDispatcher();
}

/**
 * Creates a new MyApp object
 */
public MyApp()
{        

    // Push a screen onto the UI stack for rendering.
    pushScreen(new HomeScreen());
    Phone.addPhoneListener(new PhoneCallInterceptor());
}    
}
final class PhoneCallInterceptor extends AbstractPhoneListener {

public PhoneCallInterceptor() {

}

public void callIncoming(final int callId) {

    final PhoneCall call = Phone.getCall(callId);  
    final String number = call.getPhoneNumber();    //Here its throws an error.

  }
} 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T20:43:16.857

[PhoneCall](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/blackberry/api/phone/PhoneCall.html).getPhoneNumber() was added in OS 4.7\. You BlackBerry 9000 simulator is likely running OS 4.6, so this method isn't present. The best alternative to use is [PhoneCall](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/blackberry/api/phone/PhoneCall.html).getDisplayPhoneNumber() but that will only give you the phone number if the number doesn't match any user in the device contact list. When the number matches a contact, you will get the contact name instead.

# php - PHP 使用数据透视表将数据导出到 xls

> ID：10749602
> 
> 赞同：4
> 
> 时间：2012-05-25T06:33:34.087
> 
> 标签：php, excel, pivot-table

如何将 PHP 中的数据导出到也具有数据透视表的 Excel 电子表格？有什么好的教程吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T06:40:33.210

对于包含数据透视表的导出，您只有三个选项。

*   Ilia Alshanetsky 的[Excel 扩展](http://ilia.ws/archives/222-PHP-Excel-Extension.html)（仅限 xls，需要商业组件）
*   PHP 的[COM 扩展](http://uk3.php.net/manual/en/book.com.php)（需要在服务器上运行支持 COM 的电子表格程序，例如 MS Excel 或 OpenOffice Calc）
*   [COM ( PUNO](http://www.wstech2.net/index.php?do=0a,01,05) )的 Open Office 替代方案（需要在启用 Java 支持的服务器上安装 Open Office）

# java - OpenExr、Swig 和 Java

> ID：10749608
> 
> 赞同：0
> 
> 时间：2012-05-25T06:34:09.540
> 
> 标签：java, java-native-interface, swig, openexr

我尝试创建一个解决方案，允许我在 Java 中读取 OpenExr 图像并将像素数据用于 JOGL 中的纹理。因为在 Java 中没有免费的 OpenExr 库（没有找到任何工作），我的想法是使用 ILM OpenExr 库编写一个小型 c++ 程序并用 Swig 包装它，这样我就可以使用 JNI 加载和使用 dll爪哇。

我构建了 OpenExr 库并在 Visual Studio 2005 中设置了 Swig。它已经创建了一个 dll，允许我获取图像的尺寸，所以我猜工具链运行正常。

h 文件：

```
#include <ImfRgbaFile.h>
#include <ImathBox.h>
#include <ImathVec.h>
#include <ImfRgba.h>
#include <ImfArray.h>
#include <iostream>
#include "String.h"
#include "RgbaStruct.h"

using namespace std;

class OpenExrReader {

    private:
        int width;
        int height;
        Imf::Array2D<Imf::Rgba> newPixels;
        Rgba rgba;

    public:

        //constructor
        OpenExrReader::OpenExrReader();
        //destructor
        OpenExrReader::~OpenExrReader();
        //methods
        int OpenExrReader::readExrFile(const char *filePath);
        int OpenExrReader::getHeight();
        int OpenExrReader::getWidth();
        Rgba OpenExrReader::getScruct(int i, int j);
}; 
```

.cpp 文件：

```
#include "OpenExrReader.h"

OpenExrReader::OpenExrReader() {

    width = 0;
    height = 0;
}

OpenExrReader::~OpenExrReader() {

}

int OpenExrReader::readExrFile(const char *filePath) {

    const char* fileName = filePath;

    try {

        Imf::RgbaInputFile file(fileName);
        Imath::Box2i dw = file.dataWindow();
        Imath::V2i dim(dw.max.x - dw.min.x + 1, dw.max.y - dw.min.y + 1);

        width = dw.max.x - dw.min.x + 1;
        height = dw.max.y - dw.min.y + 1;

        newPixels.resizeErase(height, width);

        int dx = dw.min.x;
        int dy = dw.min.y;

        file.setFrameBuffer(&newPixels[0][0] - dw.min.x - dw.min.y * width, 1, width);
        file.readPixels(dw.min.y, dw.max.y);
    }
    catch (Iex::BaseExc &e) {

        std::cerr << e.what() << std::endl;
    }

    return 0;
}

int OpenExrReader::getHeight() {

    return height;
}

int OpenExrReader::getWidth() {

    return width;
}

Rgba OpenExrReader::getScruct(int i, int j) {

    struct Rgba rgba = {newPixels[i][j].r,
                        newPixels[i][j].g,
                        newPixels[i][j].b,
                        newPixels[i][j].a};

    return rgba;
} 
```

Rgba 结构：

```
#include <half.h>

#ifndef RGBASTRUCT_H
#define RGBASTRUCT_H

struct Rgba{

    half r;
    half g;
    half b;
    half a;
};

#endif 
```

Swig 接口文件：

```
/* File : OpenExrReader.i */
%module OpenExrReaderDll

%{
/* Put header files here or function declarations like below */
#include "OpenExrReader.h"
#include "RgbaStruct.h"
%}
%include "OpenExrReader.h"
%include "RgbaStruct.h" 
```

Java测试程序：

```
public class OpenExrReaderMain {

static {

    System.loadLibrary("OpenExrReader");
}

/**
 * @param args
 */
public static void main(String[] args) {

    OpenExrReader reader = new OpenExrReader();
    reader.readExrFile("C:\\path\\someExrFile.exr");

    int height  = reader.getHeight();
    int width = reader.getWidth();

    for(int i = 0; i < height; i++) {

        for(int j = 0; j < width; j++) {

            Rgba rgba = reader.getScruct(i, j);

            SWIGTYPE_p_half r = rgba.getR();
            SWIGTYPE_p_half g = rgba.getG();
            SWIGTYPE_p_half b = rgba.getB();
            SWIGTYPE_p_half a = rgba.getA();

            System.out.print("r: " + r + " || ");
            System.out.print("g: " + g + " || ");
            System.out.print("b: " + b + " || ");
            System.out.print("a: " + a);
            System.out.println();
        }
    }
  }
} 
```

就像我说的那样，这是可行的，但我不是为每个像素得到这个像素数据：

```
r: SWIGTYPE_p_half@6b8741 || g: SWIGTYPE_p_half@17cfa2a || b: SWIGTYPE_p_half@c0a52 || a: SWIGTYPE_p_half@79c3e2 
```

最初的想法是我必须在某个时候将像素数据复制到 Java 缓冲区中才能在 JOGL 中使用它。所以我写了getScuct(int i, int j) 方法来获取一个像素的rgba-data，并尽量保持JNI接口简单。

现在的问题是 Swig 不知道如何将 ILM half 数据类型转换为 Java 数据类型。起初我尝试将浮点值存储在 Rgba 结构中，因为 Swig 知道如何转换这些值。根据 OpenExr 文档，将 half 转换为 float 应该没问题，但每次我尝试这样的事情时：

```
half a = newPixels[i][j].r;
float b = a; 
```

我从 VS 收到一条错误消息，上面写着：

```
OpenExrReader.obj : error LNK2001: unresolved external symbol "private: static union half::uif const * const half::_toFloat" (?_toFloat@half@@0QBTuif@1@B) 
```

我想出的另一个解决方案是使用 Swig 类型映射并告诉包装器将 ILM 一半转换为 Java 浮点数，但我不确定这是否可能。

因为我对 c++ 和 VS 知之甚少，而且这是我第一次使用 Swig 和 JNI，所以我完全不知道如何解决这个问题。

那么，有谁知道如何解决这个问题，以便我可以将像素数据转换为 java 数据类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:04:25.467

这是因为`half`没有为 SWIG 定义结构。尝试包含头文件

```
%include "half.h" 
```

你应该可以访问一半的类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:50:15.037

我找到了一个适合我的解决方案。添加预处理器宏后：

OPENEXR_DLL 和 PLATFORM_WINDOWS

在 Visual Studio 中，我能够将半值转换为浮点数，然后 swig 将它们转换为正确的 java 数据类型。

# c - 执行 AIX 内核扩展程序时出错

> ID：10749612
> 
> 赞同：0
> 
> 时间：2012-05-25T06:34:39.703
> 
> 标签：c, kernel, aix, kernel-extension

我是 AIX 的新手。我在编译内核扩展时遇到了很多错误。在那之后，我终于编译并链接了。

但是当我执行二进制文件时，我得到了这个错误。

```
bash# ./sysconfig_1 load ./question.exp
Could not load program ./sysconfig_1:
        The program does not have an entry point or 
           the o_snentry field in the auxiliary haeder is invalid.
Examine file headers with the 'dump -ohv' command 
```

有人可以帮我吗？

```
//sysconfig_1.c
#include <sys/types.h>
#include <sys/sysconfig.h>
#include <sys/device.h>
#include <sys/errno.h>

main(int argc, char *argv[])
{
    struct cfg_load cl;
    struct cfg_kmod ck;
    int rc;
    int act = -1;
    if (argc == 3)
    {
        if ((strcmp(argv[1], "load")) == 0)
            act = SYS_KLOAD;
        else if (strcmp(argv[1], "unload") == 0)
            act = SYS_KULOAD;
    }

    if (act == -1)
    {
        printf("usage: %s load|unload <kmod>\n, argv[0]");
        exit(1);
    }

    cl.path =argv[2];
    cl.libpath = NULL;

    if (act == SYS_KLOAD)
    {
        /* Load Kernel Module */
        rc = sysconfig(SYS_KLOAD, &cl, sizeof(struct cfg_load));
        if (rc == CONF_SUCC)
            printf("kload returns %d, kmid = %x\n", rc, cl.kmid);
        else
            printf("kload returns %d, errno = %d\n", rc); //, errno);

        if ((rc == CONF_SUCC) && (cl.kmid != 0))
        {
            /*
             * Invoke entry point (kmod) or config routine (dd)
             * for kernel extension with CFG_INIT parameter.
             */
            ck.kmid = cl.kmid;
            ck.cmd = CFG_INIT;
            rc = sysconfig(SYS_CFGKMOD, &ck, sizeof(struct cfg_kmod));
            if (rc == CONF_SUCC)
                printf("cfgkmod returns %d, kmid = %x\n", rc, cl.kmid);
            else 
                printf("cfgkmod returns %d, errno = %d\n", rc); // , errno);
        }
    } else {
        /* Query to determine if kernel module is loaded. */
        rc = sysconfig(SYS_QUERYLOAD, &cl, sizeof(struct cfg_load));
        if (rc == CONF_SUCC)
            printf("queryload returns %d, kmid = %x\n", rc, cl.kmid);
        else
            printf("queryload returns %d, errno = %x\n", rc); // , errno);

        if ((rc == 0) && (cl.kmid != 0))
        {
            /*
             * Invoke entry point (kmod) or config routine (dd)
             * for kernel extension with CGW_TERM parameter.
             */
            ck.kmid = cl.kmid;
            ck.cmd = CFG_TERM;
            ck.mdiptr = 0;
            ck.mdilen = 0;
            rc = sysconfig(SYS_CFGKMOD, &ck, sizeof(struct cfg_kmod));
            if (rc == CONF_SUCC)
                printf("cfgkmod returns %d, kmid =%x\n", rc, cl.kmid);
            else
            {
                printf("cfgkmod returns %d, errno =%d\n, rc); //, errno");
                exit(rc);
            }
            /* Unconfigure kernel module. */
            rc = sysconfig(SYS_KULOAD, &cl, sizeof(struct cfg_load));
            if (rc == CONF_SUCC)
                printf("unload returns %d, kmid =%x\n", rc, cl.kmid);
            else
                printf("unload returns %d, errno =%d\n", rc); // , errno);
        }
    }
    exit(rc);
}

//question.c
#include <stdio.h>
#include <sys/device.h>
question_init(int cmd, struct uio *uio)
{
    switch(cmd) {
        case CFG_INIT: {
            printf("question_init: command=CFW_INIT \n");
            break;
            } 
        case CFG_TERM: {
            printf("question_init:command=CFG_TERM \n");
            break;
            }
        default:
            printf("question_init:command=%d\n", cmd);
    }
    return 0;
}

question()
{
    return 42;
} 
```

我是这样编译的。我误会了什么？

```
bash# gcc -D_KERNEL -Wall -g -pipe -maix64 -ffreestanding -msoft-float -c sysconfig_1.c
bash# gcc -D_KERNEL -Wall -g -pipe -maix64 -ffreestanding -msoft-float -c question.c
bash# /usr/bin/ld -o sysconfig_1 -b64 -K -bI:/usr/lib/kernex.exp -lsys -lcsys -lc_r sysconfig_1.o 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:15:11.520

您的程序不打算在独立环境中运行，所以我猜这`-ffreestanding`是导致问题的选项。该`main`函数显然被认为是普通函数，而不是入口点。

# actionscript-3 - 使用 Linkage 从库中加载音频文件时出错

> ID：10749616
> 
> 赞同：0
> 
> 时间：2012-05-25T06:35:10.187
> 
> 标签：actionscript-3, flash, audio, loops

我从库中加载音频文件时遇到问题，我以前在外部加载声音文件，如下所示：

var s1:Sound = new Sound(new URLRequest("Sound/Melody1.mp3"));

但是我现在需要从库中加载它们，因为我遇到了 mp3 文件的循环问题。

下面是我的尝试，但是我收到错误消息：场景 1，图层“动作”，第 1 帧，第 21 行 1061：通过静态类型 flash.media:Sound 的引用调用可能未定义的方法 attachSound。

/* 单击播放/停止声音 1 单击符号实例播放指定的声音。再次单击符号实例会停止声音。*/

Btn_Melody1.addEventListener(MouseEvent.CLICK, fl_ClickToPlayStopSound1);

var fl_SC1:SoundChannel;

//这个变量记录你是想播放还是停止声音 var fl_ToPlay1:Boolean = true;

函数 fl_ClickToPlayStopSound1(evt:MouseEvent):void

{

```
if (fl_ToPlay1)

{
    var s1:Sound = new Sound();
    s1.attachSound("Melody1");
    fl_SC1 = s1.play(0,999);

}
else
{
    fl_SC1.stop();
}
fl_ToPlay1 = ! fl_ToPlay1; 
```

}

我看不出我做错了什么，任何和所有的帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:41:44.477

如果您正在做 AS3，则没有`attachSound`方法`MovieClip`（参见[doc](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/MovieClip.html)）（存在于 AS2 中）。

为了在库中使用声音。

1 - 为声音添加链接名称（例如：）`Sound0`；

2 - 实例化你的声音：

```
var sound : Sound = new Sound0();
//do nasty stuff with your sound ! 
```

# php - 循环遍历复杂的 php 数组

> ID：10749617
> 
> 赞同：-3
> 
> 时间：2012-05-25T06:35:10.387
> 
> 标签：php, arrays

```
Array (
  [0] => Array ( 
    [event_title] => Registration
    [event_id] => 17
    [location_id] => 113
  )
  [1] => Array (
    [event_title] => Sunday Collections
    [event_id] => 67
    [location_id] => 113
  )
  [2] => Array (
    [event_title] => School Tuition
    [event_id] => 68
    [location_id] => 113
  )
) 
```

谁能告诉我如何从这个数组中提取和`event_title`提取？我实际上想以表格的形式显示它。`event_id``location_id`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T06:39:11.560

该数组实际上非常**简单**。

```
foreach($array as $item) {

    $event_title = $item['event_title'];
    $event_id = $item['event_id'];
    $location_id = $item['location_id'];    

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T06:44:35.953

```
<table><?php
    foreach($array as $arr) {
        echo '<tr><td>'.
            $arr['event_title'].
            '</td><td>'.
            $arr['event_id'].
            '</td><td>'.
            $arr['location_id'].
            '</td></tr>'.PHP_EOL;
     }
?></table> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T06:45:24.550

要将其显示在表格中，您可以执行以下操作：

```
<table>
  <tr>
    <th>Event Title</th>
    <th>Event ID</th>
    <th>Location ID</th>
  </tr>
<?php foreach($array as $item): ?>
  <tr>
    <td><?php echo $item['event_title'] ?></td>
    <td><?php echo $item['event_id'] ?></td>
    <td><?php echo $item['location_id'] ?></td>
  </tr>
<?php endforeach; ?>
</table> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T06:42:19.623

```
foreach ($arr as $event){
    echo $event["event_title"] . "\t" . $event["event_id"] . "\t". $event["location_id"] . "\n";
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T06:45:28.577

```
foreach ($array as $row) {
  ...
  echo "<td>{$row['event_title']}</td>";
  ...
} 
```

# silverlight - 需要 XAML 教程

> ID：10749625
> 
> 赞同：2
> 
> 时间：2012-05-25T06:35:54.897
> 
> 标签：silverlight, xaml

我是 Silverlight 的新手。

我需要一个教程来帮助我理解 XAML 样式、资源和对象绑定到 UI。

请推荐任何书籍或链接。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:39:46.923

[http://www.codingconvention.com/tutorials/Silverlight-XAML](http://www.codingconvention.com/tutorials/Silverlight-XAML)

[http://silverlightcorner.blogspot.in/2012/01/wpf-data-binding-tutorial-1.html](http://silverlightcorner.blogspot.in/2012/01/wpf-data-binding-tutorial-1.html)

[http://xamlandmore.blogspot.in/](http://xamlandmore.blogspot.in/)

希望这些会有所帮助...!!!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T07:42:48.517

[http://www.wpftutorial.net/XAML.html](http://www.wpftutorial.net/XAML.html)

这会很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T08:09:09.097

这可能非常有用...

[http://silverlighttutorials.blogspot.in/](http://silverlighttutorials.blogspot.in/)

[http://www.smashingapps.com/2009/05/02/15-excellent-and-useful-microsoft-silverlight-tutorials-resources.html](http://www.smashingapps.com/2009/05/02/15-excellent-and-useful-microsoft-silverlight-tutorials-resources.html)

带有示例代码的功能详细说明..

[http://www.dotnetcurry.com/ShowArticle.aspx?ID=735](http://www.dotnetcurry.com/ShowArticle.aspx?ID=735)

# python - 使用 statprof 分析 Django 视图 - 不能在线程中使用信号

> ID：10749627
> 
> 赞同：4
> 
> 时间：2012-05-25T06:36:08.187
> 
> 标签：python, django, profiling

[statprof](http://pypi.python.org/pypi/statprof/)是 Python 的统计分析工具。文档说它只能用于分析主线程。因此，如果您使用它来分析在使用时处理请求期间调用的某些函数`./manage.py runserver`，它会引发 ValueError: signal only works in main thread。

我看到了两种可能的方法来解决这个问题（除了从控制台调用函数，这是可能的，但不那么方便）：

1) 破解 statprof，使其不使用信号 - 但如何做到这一点并不明显，或者是否有可能。

2) 使 runserver 命令在主线程中运行所有内容。

也许还有其他解决方案？有人在 django 视图中使用过 statprof 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:57:51.460

如果您`./manage.py runserver --noreload`在使用 statprof 时这样做，它将在单个线程中运行开发服务器并解决此问题。

# class - joomla 将 html 添加到菜单链接标题

> ID：10749629
> 
> 赞同：2
> 
> 时间：2012-05-25T06:36:16.023
> 
> 标签：class, joomla, menu, tags, href

希望是一个简单的...

我想在 Joomla (v2.5.4) 菜单链接中添加以下内容以及链接文本：

```
<i class="icon-book"></i> 
```

像这样：

```
<li>
 <a href="page-name.html"><i class="icon-book"></i> Library</a>
</li> 
```

我曾尝试将上述标签作为 html 放在菜单标题中，但 joomla 不会保留/保存它并将其剥离。

任何帮助/想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:20:42.120

Joomla 不允许在菜单标题中使用任何标签，即使是 HTML 编码（即 & lt; 等）。要按照您想要的方式进行操作，您必须使用支持它的第三方菜单系统 - 周围有很多这样做的，您可以查看[Joomla的](http://extensions.joomla.org)[菜单系统](http://extensions.joomla.org/extensions/structure-a-navigation/menu-systems)部分！[扩展目录](http://extensions.joomla.org)。

否则，在 Joomla！您可以使用“链接类型选项”面板中的参数。

在这种情况下，您可以通过输入“Link CSS Style”参数为`<a>`标签分配一个类 。`aCSSClass`然后您的`<a>`标签将呈现为`<a class="aCSSClass" href=...`

然后你可以在你的模板 CSS 文件中定义类并做你想做的事。

# windows-phone-7 - 如何在银光形状上制作透明效果

> ID：10749630
> 
> 赞同：0
> 
> 时间：2012-05-25T06:36:28.563
> 
> 标签：windows-phone-7

我需要在银色灯光形状上制作透明效果。就像我们在 PNG 图像上所做的那样。怎么做？例如，如果我在 PNG 图像上切了一个洞，我就能看穿。如何在银光形状上做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:20:14.470

我在Expression Blend中尝试了两个形状，这很容易，你绘制这两个形状并选择它们然后你右键单击>组合>排除重叠，你有一个新的形状缺少重叠部分，你可以看穿. :)

或者我认为你也可以使用不透明蒙版，但我以前从未使用过它们。

# c - 听（）忽略积压值

> ID：10749636
> 
> 赞同：6
> 
> 时间：2012-05-25T06:36:49.187
> 
> 标签：c, sockets, listen, backlog

据我了解，**积压**决定了*连接队列*的大小。届时任何大于此大小的额外请求都将被丢弃（*这个说法对吗？？*）。

现在我有一个非常简单的程序*server.c*

```
socket()
bind()
listen(..., 5)
while(1)
{
  accept()
  read()
  write()
  sleep(3)
  close()
} 
```

现在，我一次启动 8 个客户端**来**连接到该服务器。令人惊讶的是，服务器为所有 8 个客户端提供服务，但它应该只排队 5 个客户端，其余 3 个客户端请求应该被拒绝。另一个有趣的点是即使我把这个积压值设为 0，结果还是一样的。然后我尝试评论listen（）调用，所有8个客户端连接都被拒绝。

有人可以对此提供任何意见吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T06:40:20.980

backlog 参数是关于队列大小的*提示。*所以你不能指望它做你所要求的。

[`listen()`](http://pubs.opengroup.org/onlinepubs/009695399/functions/listen.html)

这个[答案](https://stackoverflow.com/questions/5111040/listen-ignores-the-backlog-argument)似乎涵盖了它。

还有更多信息，引用自我的 Ubuntu 系统上的 listen(2) 手册页：

backlog 参数定义了 sockfd 的挂起连接队列可以增长到的最大长度。如果连接请求在队列已满时到达，客户端可能会收到带有 ECONNREFUSED 指示的错误，或者，如果底层协议支持重传，则可能会忽略该请求，以便稍后重新尝试连接成功。

请注意，它到处都说“可能”。

# javascript - Backbone.js toJSON() 不包括属性

> ID：10749639
> 
> 赞同：1
> 
> 时间：2012-05-25T06:36:57.347
> 
> 标签：javascript, asynchronous, backbone.js, backbone-relational

我真的无法绕过这个。*出于某种*原因，（我怀疑它与异步请求有关）我的模型属性没有使用 toJSON() 函数正确转换。FWIW，我正在尝试使用 django-relational fetchRelated() 进行延迟加载。

这是我发出 fetchRelated() 请求并创建新视图的地方。

```
$.when(usermodel.fetchRelated("movies")).then(function(){
        var newview = new UserMovieList({model: usermodel});
        newview.render(); 
    }); 
```

这会调用以下渲染函数：

```
render: function(){
        $(this.el).html(this.template({}));

        var usermodel = this.model; 

        var wrapper = $(".movies");
            var recipes = usermodel.get("movies");
            movies.each(function(movie){
                var movie_item = new UserMovieListItem({
                    model:movie
                });
                movie_item.render(); 
                wrapper.append(movie_item.el);
            });
        return this; 
```

然后调用 UserMovieListItem 渲染函数：

```
render: function(){
        console.log("movies to JSONify", this.model.attributes);
console.log("movies JSONified", this.model.toJSON());
        $(this.el).html(this.template(this.model.toJSON()));
        return this; 
```

这是踢球者。第一个console.log (this.model.attributes) 按原样显示所有属性。看起来非常好。但是 (this.model.toJSON()) 只返回在 fetchRelated() 之前提供的 URI 和 id 属性。这到底是怎么回事？如果我将 UserMovieListItem 中的 this.model 与“更改”绑定到渲染，那么它将*渲染*，但在半秒左右之后......}，

我的用户模型定义如下：

```
window.User = Backbone.RelationalModel.extend({
    urlRoot: '/movie/api/v1/users/',
    relations: [{
        type: Backbone.HasMany,
        key: 'movies',
        relatedModel: 'Movie',
        collectionType: 'UserMovieCollection',
        reverseRelation: {
            key: 'user',
            includeInJSON: 'id'
        }
    }],
    select: function(){
        var model = this; 
        model.set({selected: true});
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:21:14.990

`fetchRelated`返回对象数组`jqXHR`，您需要以这种方式将其与 $.when 一起使用：

```
$.when.apply(null, usermodel.fetchRelated("movies")).then(function(){
    var newview = new UserMovieList({model: usermodel});
    newview.render(); 
}); 
```

# wcf - 数据服务 - 按子值查找实体

> ID：10749649
> 
> 赞同：0
> 
> 时间：2012-05-25T06:37:37.377
> 
> 标签：wcf, linq, entity-framework, wcf-data-services

我正在将 WCF 数据服务与 Entity Framework 4.1 一起使用

我有 2 个具有多对多关系的表。我正在尝试基于子值获取实体。

```
Table 1 (Suppliers) -> ID (PrimaryKey) ,Name ,isEnabled ,Timestamp
Table 2 (Categories) -> RGID (PrimaryKey) , Name, etc.... 
```

我试图写这样的URI。我的目标是检索所有具有 RGID = 3 的类别的供应商。

```
http://localhost/WCFS/WCFService.svc/Suppliers?$expand=Categories&$filter=RGID eq 3 
```

像这样

```
 http://localhost/WCFS/WCFService.svc/Suppliers?$expand=Categories&$filter=Categories/RGID eq 3 
```

没运气。对于我得到的第二次尝试

```
The 'RGID ' is not allowed at position 11\. Member access or specifying a type identifier on a resource set reference is not allowed. 
```

那怎么办？？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:45:57.730

使用导航：

```
~/Categories(3)/Suppliers 
```

# c# - 活动单元格地址

> ID：10749653
> 
> 赞同：1
> 
> 时间：2012-05-25T06:38:03.040
> 
> 标签：c#, excel, vsto, vba

> **可能重复：**
> [如何从 excel 中获取单元格地址](https://stackoverflow.com/questions/2628603/how-can-i-get-the-cell-address-from-excel)

是否可以使用 vsto 或 c# 或任何使用 vba 的提示在 excel 中获取活动单元格地址，如 A1048576。

我能够获得活动的单元格行和列，但它显示整数值，我想要像 A10 或 B15 这样的单元格地址

# c# - 在运行时访问资源并获取字符串

> ID：10749654
> 
> 赞同：0
> 
> 时间：2012-05-25T06:38:25.660
> 
> 标签：c#, android, xamarin.android

我试过这个在我的常量类中获取资源字符串

```
public static string OdVName = Resources.System.GetString(Resource.String.NewOrder); 
```

它给我一个未找到的错误。

我如何访问这些资源，说我如何在不指向视图的情况下获得价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:41:54.287

> 我试过这个在我的常量类中获取资源字符串

首先你需要获取资源的Activity对象，作为你可以获得的上下文。

```
String str = context.getResources().getString(R.string.NewOrder); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:02:22.687

跟随 Samir Magroliya... 如果你没有得到 String res 的话。只需转到菜单->项目->清理项目

# android - 不幸的是，我的 android 应用程序已停止

> ID：10749655
> 
> 赞同：0
> 
> 时间：2012-05-25T06:38:31.727
> 
> 标签：android, sqlite

运行下面的代码后，我的应用程序没有响应。代码对我来说似乎是正确的，但无法理解发生了什么问题。

```
package com.navigationsystem;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase;
import android.hardware.SensorManager;
import android.util.Log;

public class DBAdapter {

    public static final String NODE_ID="nodeID";
    public static final String NODE_NAME="nodeName";
    public static final String VALUE1="value1";
    public static final String EDGE_ID="edgeID";
    public static final String TOTAL ="total";
    public static final String SOURCE_NODE_ID ="sourceNodeID";
    public static final String DESTINATION_NODE_ID ="destinationNodeID";

    private static final String TAG = "DBAdapter";
    private static final String DATABASE_NAME = "Graph";
    private static final String DATABASE_TABLE1 = "nodes";
    private static final String DATABASE_TABLE2 = "edges";
    private static final int DATABASE_VERSION = 1 ;

    private static final String DATABASE_CREATE ="create table nodes ( " 
        +"nodeID int PRIMARY KEY AUTO_INCREMENT NOT NULL," 
        +"nodeName varchar (20) NOT NULL," 
        +"value1 int NULL," 
        +"edgeID int NULL," 
        +"total int NOT NULL );"

        +"create table edges ( edgeID int PRIMARY KEY AUTO_INCREMENT," 
        +"sourceNodeID int NOT NULL ," 
        +"destinationNodeID int NOT NULL ," 
        +"value1 int NOT NULL );";

    private final Context context;
    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public DBAdapter(Context ctx)
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper
    {
        DatabaseHelper(Context context)
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db)
        {
            db.execSQL(DATABASE_CREATE);
        }
        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion,int newVersion)
        {
            Log.w(TAG, "Upgrading database from version " + oldVersion
                    + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS titles");
            onCreate(db);
        }
    }

    public DBAdapter open() throws SQLException
    {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    public void close()
    {
        DBHelper.close();
    }

    public long addEdges(String nodeName,String value1,String edgeID) throws SQLException
    {

        ContentValues cv = new ContentValues();
        cv.put(NODE_NAME, nodeName);
        cv.put(VALUE1, value1);
        cv.put(EDGE_ID, edgeID);
        return db.insert(DATABASE_TABLE1,null,cv);

    }

} 
```

和数据库调用者类是：

```
package com.navigationsystem;

import android.app.Activity;
import android.os.Bundle;

public class NavigationSystemActivity extends Activity
{

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);

        final DBAdapter db = new DBAdapter(this);
        db.open();
        db.addEdges("A","4","1");
        db.close();
    }
} 
```

我想将值存储在数据库中，但既没有创建表，也没有运行我的应用程序。

请纠正我做错了什么。

谢谢。

编辑：logcat 错误

```
05-25 11:56:49.583: E/AndroidRuntime(9622): FATAL EXCEPTION: main
05-25 11:56:49.583: E/AndroidRuntime(9622): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.navigationsystem/com.navigationsystem.NavigationSystemActivity}: android.database.sqlite.SQLiteException: near "AUTO_INCREMENT": syntax error: , while compiling: create table nodes ( nodeID int PRIMARY KEY AUTO_INCREMENT NOT NULL,nodeName varchar (20) NOT NULL,value1 int NULL,edgeID int NULL,total int NOT NULL );
05-25 11:56:49.583: E/AndroidRuntime(9622):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at android.os.Looper.loop(Looper.java:137)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at android.app.ActivityThread.main(ActivityThread.java:4424)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at java.lang.reflect.Method.invokeNative(Native Method)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at java.lang.reflect.Method.invoke(Method.java:511)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at dalvik.system.NativeStart.main(Native Method)
05-25 11:56:49.583: E/AndroidRuntime(9622): Caused by: android.database.sqlite.SQLiteException: near "AUTO_INCREMENT": syntax error: , while compiling: create table nodes ( nodeID int PRIMARY KEY AUTO_INCREMENT NOT NULL,nodeName varchar (20) NOT NULL,value1 int NULL,edgeID int NULL,total int NOT NULL );
05-25 11:56:49.583: E/AndroidRuntime(9622):     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:134)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at android.database.sqlite.SQLiteStatement.acquireAndLock(SQLiteStatement.java:260)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:84)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:1899)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1839)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at com.navigationsystem.DBAdapter$DatabaseHelper.onCreate(DBAdapter.java:97)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:165)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at com.navigationsystem.DBAdapter.open(DBAdapter.java:112)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at com.navigationsystem.NavigationSystemActivity.onCreate(NavigationSystemActivity.java:18)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at android.app.Activity.performCreate(Activity.java:4465)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-25 11:56:49.583: E/AndroidRuntime(9622):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-25 11:56:49.583: E/AndroidRuntime(9622):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:09:26.830

你犯了一个小的语法错误。更改`AUTO_INCREMENT`为`AUTOINCREMENT`。

* * *

## 编辑：

您还提到只有一个表正在创建。这可能是因为您试图将两个创建语句合并为一个。试试这个：

```
private static final String DATABASE_CREATE_1 = "CREATE TABLE NODES ( ... );";
private static final String DATABASE_CREATE_2 = "CREATE TABLE EDGES ( ... );"; 
```

然后在您的`onCreate`方法中，调用`execSQL`每个字符串：

```
db.execSQL(DATABASE_CREATE_1);
db.execSQL(DATABASE_CREATE_2); 
```

在更改生效之前，您需要清除现有数据库。只有在您这样做之后，才会`onCreate`再次调用它。

> 设置 --> 应用程序 --> [应用程序名称] --> 清除数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:08:01.897

需要的关键字是“自动增量”而不是 AUTO_INCREMENT。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:11:13.283

使用`AUTOINCREMENT`而不是`AUTO_INCREMENT` 尝试此查询：

```
create table nodes ( nodeID int PRIMARY KEY AUTOINCREMENT NOT NULL,nodeName varchar (20) NOT NULL,value1 int NULL,edgeID int NULL,total int NOT NULL ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T07:26:50.930

尝试...

```
private static final String DATABASE_CREATE ="create table nodes ( " 
    +"nodeID INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL," 
    +"nodeName VARCHAR (20) NOT NULL," 
    +"value1 INTEGER," 
    +"edgeID INTEGER," 
    +"total INTEGER NOT NULL );"

    +"create table edges ( edgeID INTEGER PRIMARY KEY AUTOINCREMENT," 
    +"sourceNodeID INTEGER NOT NULL ," 
    +"destinationNodeID INTEGER NOT NULL ," 
    +"value1 INTEGER NOT NULL );"; 
```

此外，在尝试此操作之前，您需要删除现有数据库（或清除数据），因为 如果数据库已经存在，则不会再次调用`onCreate(...)`您的方法。`SQLiteOpenHelper`

# oracle - Oracle中的父子关系

> ID：10749665
> 
> 赞同：2
> 
> 时间：2012-05-25T06:39:50.183
> 
> 标签：oracle, parent-child, recursive-query

我有一个存储在表中的父子关系考虑以下示例

```
Id        Name    ParentId
------------------------------
1         Node1      -1
2         Node2      -1
3         Node3       1
4         Node4       1
5         Node5       3
6         Node6       5
7         Node7       2 
```

这里 ParentId = -1 表示它是根级节点。现在我想编写一个 SQL 查询，它将返回父类别所有级别的子级。

例如，对于 Id = 1，它应该返回 3、4、5、6。

```
Parent     Child   
-------------------
1            3    
1            4    
1            5    
1            6 
```

我指的是[这个问题](https://stackoverflow.com/questions/207309/sql-query-for-parent-child-relationship)，但它是针对 sql-server 的，并且输出不如预期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:41:47.843

```
 select parentid parent, id child
   from table1
connect by prior id = parentid
  start with parentid = 1 
```

# html - Mod_Rewrite 重定向

> ID：10749669
> 
> 赞同：0
> 
> 时间：2012-05-25T06:40:20.280
> 
> 标签：html, mod-rewrite, redirect, http-status-code-301

我的主机上的 mod_rewrite 有问题。一切正常，但我改变了我的目录组织，所以现在谷歌在改变之前索引的所有页面都有错误的扩展名（我决定在名称末尾添加一个 .html，现在 url 看起来像“www.mydomain.com /page_name/details_on_page/page_id/name_of_resource.html" 而之前它就像 "www.mydomain.com/page_name/details_on_page/page_id/name_of_resource") 并返回 404 错误。

我怎么能写一个 mod_rewrite COND 然后一个规则将缺少 html 扩展名的 301 页面重定向到 .html 页面？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:24:28.400

试试这个：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !\.html$
RewriteRule ^page_name/(.+)$ /page_name/$1.html [R=301,L] 
```

# java - sqlloader 完成数据加载时收到通知

> ID：10749677
> 
> 赞同：0
> 
> 时间：2012-05-25T06:41:03.723
> 
> 标签：java, oracle10g, sql-loader

我有一个 java 代码，我通过它调用 bat 文件。此 bat 文件包含对 sqlldr 的调用，该调用将数据从 txt 文件加载到表中（在 oracle 中）。这是调用bat文件的java代码

```
ProcessBuilder pb = new ProcessBuilder(new File(".").getAbsolutePath()
                + File.separator + "ld.bat");
        System.out.println("Before start");
Process start;
            try {
                start = pb.start();

        } catch (IOException e) {

            e.printStackTrace();
        } 
```

在此代码下方，我正在创建新线程并执行其他任务。数据的加载在后台进行。加载完成后，我想做一些任务（例如，将 txt 数据文件移动到另一个位置）。有没有办法在 sqlldr 完成数据加载后得到通知。我遇到了一个解决方法 - 我可以继续检查 d 表中的行数并将其与原始 txt 文件中的行数进行比较。但我想知道是否有其他解决方案。我也不想使用`start.waitFor()` ，因为这会使我的其他活动暂停。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:23:37.933

我不确定我是否完全理解您的问题-您是否有任何理由不能将批处理脚本的调用放入新线程中？

例如

```
new Thread("Load Data"){
  @Override
  public void run() {
    // load data
    // move txt data file
  }
}.start();

// do other activities 
// (Presumably they're not dependent on the data having been loaded...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T23:32:53.173

这是确切的解决方案，已经过测试。

当 sqlldr 启动时，下面的代码等到它结束，然后执行“一些业务”

```
 Runtime rt = Runtime.getRuntime();
    Process proc = rt.exec(sqlldrRunCmd);
    int exitVal = proc.waitFor();
    System.out.println("Process exitValue: " + exitVal);

    // some business in here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-05T22:25:10.393

我有同样的问题，并解决如下：

```
 public void runSqlldr() throws IOException, Exception {
        String sqlldrRunCmd = StartParserEngineHW3G2G.SQLLDRPATH
                + " userid='" + DBHelper.username + "/" + DBHelper.password + "@" + StartParserEngineHW3G2G.TNSNAME + "'"
                + " control='" + this.ctlFile.getAbsolutePath() + "'"
                + " log='" + this.logFile.getAbsolutePath() + "'"
                + " direct=true rows=1000000 errors=1000000000";
    Runtime rt = Runtime.getRuntime();
    Process proc = rt.exec(sqlldrRunCmd);

    while(true){
        if(logFile.exists() && logFile.length() > 0){
            System.out.println(logFile + " is exist and sqlldr completed and lentgh is " + logFile.length());
            proc.destroy();
            break;
        }
        else{
            System.out.println(logFile + " is not exist, and waiting and logfile length is " + logFile.length());
            Thread.sleep(3000);
        }

    }
} 
```

# c++ - GCC C/C++ 双重行为

> ID：10749678
> 
> 赞同：2
> 
> 时间：2012-05-25T06:41:18.840
> 
> 标签：c++, c, gcc, double

> **可能重复：**
> [C++ 双精度和四舍五入](https://stackoverflow.com/questions/6875007/c-double-precision-and-rounding-off)

代码：

```
int main(void)
{
    double a = 12;
    double b = 0.5;
    double c = 0.1;

    std::cout.precision(25);
    std::cout << a << std::endl;
    std::cout << b << std::endl;
    std::cout << c << std::endl;
    std::cout << a + b << std::endl;
    std::cout << a + c << std::endl;

    return 0;
} 
```

输出：

```
12
0.5
0.1000000000000000055511151
12.5
12.09999999999999964472863 
```

为什么 GCC 代表 0.1 和 0.5 不同？添加时，它们的表示方式不同。似乎 0.5 和整数 a 的表示方式与其他浮点数不同。或者这只是 io 库中发生的事情？是什么导致了这种行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T06:56:58.337

正如具有有限位数的十进制数只能精确表示为 10 的幂和的数字一样，二进制浮点数只能精确地表示为 2 的幂和的数字。

在这种情况下，`0.1`不能表示为 2 的有限幂和，而`0.5`and`12`可以（`0.5`等于 2 ^(-1)并且`12`等于 2 ³ + 2 ²）。

再举一个例子，0.75 也可以用二进制浮点数精确表示，因为它可以表示为 2 ^(-1) + 2 ^(-2)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T06:45:29.533

0.1 不能用二进制精确表示，因为它不是 2 的幂，必须用一个非常、非常、非常接近的数字来表示。这就是为什么教导学生`==`在比较浮点数时永远不要使用运算符，而银行应用程序几乎总是将钱存储为两个整数，即美元金额和便士数量。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-25T06:46:07.233

这些问题的默认答案：

[每个计算机科学家都应该知道的关于浮点运算的知识](http://perso.ens-lyon.fr/jean-michel.muller/goldberg.pdf)

基本上，这是浮点编码的不准确性。你有大约 17 个有效数字，做算术运算会减少它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T06:48:36.507

读这个

[http://floating-point-gui.de/](http://floating-point-gui.de/)

# javascript - 如何使用asp从设备中的WinCE 5.0 OS读取.ini文件

> ID：10749679
> 
> 赞同：0
> 
> 时间：2012-05-25T06:41:29.760
> 
> 标签：javascript, activex, windows-ce

我需要通过 ASP 读取 WinCE 5.0 设备文件系统中的 .ini 文件。下面是读取文件的脚本。**但设备无法创建“Scripting.FileSystemObject”类型的 ActiveX 对象**

---------ReadINIFile.inc------

```
<%
function GetINIString(Section, KeyName, Default, FileName)
{
  var INIContents, PosSection, PosEndSection, sContents, Value, Found;

  //Get contents of the INI file As a string;
  INIContents = GetFile(FileName)

  //Find section;
  PosSection = InStr(1, INIContents, "[" + Section + "]", 1);
  if(PosSection>0)
  {
    //Section exists. Find end of section;
    PosEndSection = InStr(PosSection, INIContents, '\r\n' + "[");
    //?Is this last section?;
    if(PosEndSection == 0)
    { 
        PosEndSection = Len(INIContents)+1;
        //Separate section contents;
        sContents = Mid(INIContents, PosSection, PosEndSection - PosSection)
        if (InStr(1, sContents, '\r\n' + KeyName + "=", 1) > 0) 
        {
            Found = True;
            //Separate value of a key.;
            Value = SeparateField(sContents, '\r\n' + KeyName + "=", '\r\n');
        }
    }
  }
  if(isempty(Found))
  { 
    Value = Default;
  }
  return Value;
}

//Separates one field between sStart && sEnd

function SeparateField(sFrom,sStart,sEnd)
{
  var PosB;
  PosB = InStr(1, sFrom, sStart, 1);
  if(PosB > 0)
  {
    PosB = PosB + Len(sStart);
    var PosE;
    PosE = InStr(PosB, sFrom, sEnd, 1);
    if(PosE == 0)
    { 
        PosE = InStr(PosB, sFrom, '\r\n', 1);
    }
    if (PosE == 0) 
    {
        PosE = Len(sFrom) + 1;
    }
    SeparateField = Mid(sFrom, PosB, PosE - PosB);
  }
}

//File functions

function GetFile(FileName){
  var FS;
  FS = new ActiveXObject("Scripting.FileSystemObject");
  //Go To windows folder if(full path ! specified
  if(InStr(FileName, "%3A%5C") = 0 && Left (FileName,2)!="\\")
  { 
    FileName = FS.GetSpecialFolder(0) + "1" + FileName;
  }
  //On Error Resume Next

  return FS.OpenTextFile(FileName).ReadAll;
}

function WriteFile(FileName,Contents)
{
  var FS;
  FS = new ActiveXObject("Scripting.FileSystemObject");
      //On Error Resume Next

      //Go To windows folder if(full path ! specified
      if(InStr(FileName, "%3A%5C") == 0 && Left (FileName,2)!=="/")
      {
        FileName = FS.GetSpecialFolder(0) + "1" + FileName;
      }

  var OutStream;
  OutStream = FS.OpenTextFile(FileName, 2, True);  
}
function GetINIStringVirtual(Section, KeyName, Default, FileName)
{
  return GetINIString(Section, KeyName, Default,  Server.MapPath(FileName));
}
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:26:54.000

Windows CE中`FSO`不存在 (FileSystemObject)

所以在 CE 中必须是：

```
FS = new ActiveXObject("FILECTL.FileSystem"); 
```

**更新**文件参考是：`MSCEFile.dll`

**注意**我不确定这是否适用于 WinCE 5，因为它是旧操作系统

**Windows 和 WinCE 之间的文档** [FSO 差异](http://support.automation.siemens.com/WW/llisapi.dll?func=cslib.csinfo&lang=en&objid=13408815%20&caller=view)

# asp-classic - 无法执行操作 对象已关闭 asp

> ID：10749683
> 
> 赞同：-3
> 
> 时间：2012-05-25T06:41:47.567
> 
> 标签：asp-classic

我正在执行 .vbs 文件并在其中调用存储过程。

```
function getJobHistory(byval ServerName)

    '****************************
    '* Connecting to server

    dim rsArray

    msgbox(ServerName)

    cn.open "Provider=SQLOLEDB.1;Data Source=" & ServerName & ";Integrated Security=SSPI"

    cmd.activeconnection =cn
    MsgBox(cn.State)

    If Err.Number <> 0 Then
        Call HandleErrors(Err.Number, Err.Description, "Error Connecting To Server " & ServerName & "") 
    end if 

    'cmd.commandtext = "SELECT * FROM SYS.SYSDATABASES"
    'query1="SELECT * FROM SYS.SYSDATABASES"

    sql = "exec UMRDB..sp_Getobsoletebackupfile 0,0,0,'','','','',0,'','','',0"

    mobjwritelog.Write(query)

    'query=query & " insert into UMRDB..FileInfo select * from #fileinfo"
    'query=query & " drop table #disk drop table #file"
    'cmd.commandtext = query
    'rs.Open query,cn

    set rs=cn.Execute(sql)

    'MsgBox(rs.RecordCount) 

    do while not rs.BOF and not rs.EOF
        rsArray=rs.GetRows()
        nr=UBound(rsArray,2)
        MsgBox(nr)
        rs.MoveNext
    loop

    rs.Close

    ' end if
end function
'*********************** 
```

它给了我如下错误

```
Error: Operation is not allowed when the object is closed.
Code: 800A0E78
Source:  ADODB.Recordset 
```

在查询分析器中执行相同的存储过程。执行过程需要 17 秒。当我在 .vbs 脚本或 asp 页面上执行时会发生什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:58:49.900

看起来好像您还没有打开记录集，因为包含 rs.open 的行被注释掉了

编辑：实际上仔细观察，似乎特定行正在引用另一个查询。但是，记录集仍需要打开才能使用它。

# nsconnection - 使用 NSConnection 连接到“www.google.com”时出现错误

> ID：10749687
> 
> 赞同：5
> 
> 时间：2012-05-25T06:42:06.283
> 
> 标签：nsconnection

使用 连接到“www.google.com”时出现错误`NSConnection`。

我找不到原因。任何帮助将不胜感激。

```
NSString *urkString = @"www.google.com";
NSURL *url = [NSURL URLWithString:urkString];

NSURLRequest *request = [NSURLRequest requestWithURL:url
                                          cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval:60];

_connection = [[NSURLConnection alloc]initWithRequest:request delegate:self];  
if(_connection)
{
    _receivedData = [[NSMutableData alloc] init];
}
else
{
    UIAlertView *alertView = [[UIAlertView alloc]initWithTitle:@"Error" message:@"Cannot connect to the Web site." delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:nil, nil];

    [alertView show];
    [alertView release];
} 
```

但是它调用了这个方法。错误是：

`Error Domain=NSURLErrorDomain Code=-1002 "unsupported URL" UserInfo=0x4c9feb0 {NSErrorFailingURLStringKey=www.google.com, NSErrorFailingURLKey=www.google.com, NSLocalizedDescription=unsupported URL, NSUnderlyingError=0x4c9fdf0 "unsupported URL"}`

```
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    _endSystemDate = [self getSystemDate];
    _receivedData = nil;
    _connection = nil;
    _status = @"Completed";
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-25T06:50:38.903

尝试`NSString *urkString = @"http://www.google.com";`您需要对每个 URL 都有 URL Scheme。即`http://`或`https://`

# php - 销毁空会话变量

> ID：10749689
> 
> 赞同：0
> 
> 时间：2012-05-25T06:42:10.717
> 
> 标签：php, html, session

我已经为我的网站创建了会话。要开始会话，我在网站的每个链接上都编写了以下代码：

```
session_start();
if(isset($_SESSION['User']))
{
  //session_start();
  $sesvar = $_REQUEST['sid'];
} 
else
{
  $sesvar = " ";
} 
```

但是当我单击注销按钮时会话被破坏。但是 sid 的值（即设置会话变量的参数设置为 null。）为了破坏会话，我编写了以下代码：

```
if(isset($_REQUEST['out']))
{
    session_start();
    session_unset();
    //unset($_SESSION['User']);
    session_destroy();
    header("Location:login.html");
    exit;   
} 
```

注销后，我得到 sid=null 之后，如果我单击网站的任何链接，欢迎消息仍然存在，会话变量为空。请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:48:39.527

您实际上没有使用会话变量来存储会话数据。

我假设在下面的代码中您正在尝试使用会话变量来存储一些值

```
$sesvar = $_REQUEST['sid']; 
```

你做错了方式，存储你需要将它存储在超级全局`$_SESSION`数组中的任何会话数据。例如。

```
$_SESSION['var'] = $_REQUEST['sid']; 
```

并检查或获取您需要检查的值`$_SESSION`

# jquery - Jquery：从一个页面重定向到另一个页面

> ID：10749692
> 
> 赞同：2
> 
> 时间：2012-05-25T06:42:20.527
> 
> 标签：jquery, html

我在两个不同的位置有两个 js 页面（Source.js 和 Target.js），现在我要做的就是当用户单击源页面的下拉列表时，它将用户重定向到目标页面，反之亦然。我正在为您提供所有位置和所有内容的确切编码，我只想知道如何从一页切换到第二页。

Source.js 编码

```
var SourceSc = function() {
var that = {};
var _view = null;
var _childPanel = "#content";
var _sourceDlgMgrC = null;
var BEGIN = "BEGIN";
var STARTING = "STARTING";
var END = "END";
var TARGET = "TARGET";  
var _state = BEGIN;
that.create = function(parent, panel) {

    _parent = parent;
    _panel = panel;
    _transition(STARTING);
};
that.destroy = function() {
    _transition(END);
};
that.eventTargetLanguageView = function() {
    _transition(TARGET_LANGUAGE_VIEW);
};
var _transition = function(newState) {
    _state = newState;
    switch(_state) {                
        case STARTING: _enterStarting(); break;
            case TARGET: _enterTargetDlg(); break;
        case END: _enterEnd(); break;
    }
};
var _enterStarting = function() {
    modelMgr.loadInclude('code/app/sc/LoggedIn/sc/Source/c/SourceDlgMgrC.js', function() {
        modelMgr.getHTML('code/app/sc/LoggedIn/sc/Source/Source.html', function(html) {
            _sourceDlgMgrC = SourceDlgMgrC();
            _sourceDlgMgrC.create(_childPanel);
            var req = {};
            var fnSuccess = function(res) {
                _view = SourceV();
                _view.create(that, _panel, html, res);                  
            };              
        });
    });
};  
var _enterTargetDlg = function() 
{
//now what i have to write here, to load target page
};
var _enterEnd = function() {
     //coding of destroy    
};  
return that;};
var SourceV = function() {
var that = {};

var _sc = null;
var _panel = null;

that.create = function(sc, panel, html, res) {
    _sc = sc;
    _panel = panel;
    that.layoutUi(html);
    that.bindEvents();  
};  
that.layoutUi = function(html) {

    $(_panel).html(html);       
};
that.bindEvents = function() {

    $('#viewList').change(_sc.eventTargetLanguageView);
};
that.destroy = function() {
    $(_panel).html('');
    _panel = null;
    _sc = null;
};
return that; }; 
```

我可以发布 source.html 完整编码，但我想这会少用所以我只会发布下拉列表编码

```
 <select id = "viewList" class="fl width160">
            <option>Source</option>
            <option>Target</option>
        </select> 
```

现在目标页面的编码也完全相同，但 Target.js 的位置是“code/app/sc/LoggedIn/sc/Target/Target.js”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T06:07:09.553

试试这个......（仅作为示例）

```
 codeLoadingMgr.loadInclude( path + '/AdminSc.js', function() {
 _adminSc = AdminSc();
  _adminSc.create(that, path, _childPanel,_selectedAdminTab, _programId); 
   }); 
```

# java - 在 vaadin 中显示 PDF

> ID：10749693
> 
> 赞同：0
> 
> 时间：2012-05-25T06:42:23.570
> 
> 标签：java, eclipse, vaadin

我想在我的 UI 中显示 PDF 并收到以下错误：

```
May 25, 2012 11:29:11 AM com.vaadin.Application terminalError
SEVERE: Terminal error:
com.vaadin.event.ListenerMethod$MethodException
Cause: java.lang.AbstractMethodError: eu.livotov.tpt.gui.vdv.core.SinglePageDocumentRenderer.generateCell(Lcom/vaadin/ui/Table;Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
at com.vaadin.event.ListenerMethod.receiveEvent(ListenerMethod.java:532)
at com.vaadin.event.EventRouter.fireEvent(EventRouter.java:164)
at com.vaadin.ui.AbstractComponent.fireEvent(AbstractComponent.java:1219)
at com.vaadin.ui.Button.fireClick(Button.java:550)
at com.vaadin.ui.Button.changeVariables(Button.java:217)
at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.changeVariables(AbstractCommunicationManager.java:1445)
at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariableBurst(AbstractCommunicationManager.java:1393)
at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariables(AbstractCommunicationManager.java:1312)
at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.doHandleUidlRequest(AbstractCommunicationManager.java:763)
at com.vaadin.terminal.gwt.server.CommunicationManager.handleUidlRequest(CommunicationManager.java:296)
at com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:501)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:538)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:478)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:225)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:937)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:406)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:183)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:871)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:110)
at org.eclipse.jetty.server.Server.handle(Server.java:346)
at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:589)
at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1065)
at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:823)
at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220)
at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:531)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:40)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:529)
at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.AbstractMethodError: eu.livotov.tpt.gui.vdv.core.SinglePageDocumentRenderer.generateCell(Lcom/vaadin/ui/Table;Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
at com.vaadin.ui.Table.getVisibleCellsNoCache(Table.java:1691)
at com.vaadin.ui.Table.refreshRenderedCells(Table.java:1479)
at com.vaadin.ui.Table.attach(Table.java:3341)
at com.vaadin.ui.AbstractComponentContainer.attach(AbstractComponentContainer.java:97)
at com.vaadin.ui.AbstractComponentContainer.attach(AbstractComponentContainer.java:97)
at com.vaadin.ui.AbstractComponentContainer.attach(AbstractComponentContainer.java:97)
at com.vaadin.ui.AbstractComponentContainer.attach(AbstractComponentContainer.java:97)
at com.vaadin.ui.AbstractComponent.setParent(AbstractComponent.java:560)
at com.vaadin.ui.AbstractComponentContainer.addComponent(AbstractComponentContainer.java:211)
at com.vaadin.ui.TabSheet.addTab(TabSheet.java:294)
at com.vaadin.ui.TabSheet.addTab(TabSheet.java:332)
at com.vaadin.ui.TabSheet.addTab(TabSheet.java:311)
at com.complete.raspberry.webui.FileAdminView$SearchFormLayout$2.buttonClick(FileAdminView.java:166)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.vaadin.event.ListenerMethod.receiveEvent(ListenerMethod.java:512)
... 32 more 
```

我的代码是这样的：

```
Button advanceSearchButton = new Button("Advance Search",
   new Button.ClickListener() {
    public void buttonClick(ClickEvent event) {

     DocumentViewer viewer = new DocumentViewer();
     viewer.loadDocument ( new PdfDocument ( new java.io.File ( "C:/handbook.pdf" ) ) );
     System.out.println("Pages pdf : " + viewer.getPagesCount());                           
     VerticalLayout myTabCoursPDF = new VerticalLayout();
     myTabCoursPDF.addComponent(viewer);  
     tabsheet.addTab(myTabCoursPDF); 
```

我还在我的项目中包含了以下 JAR：

*   icepdf-core.jar
*   icepdf-pro.jar
*   icepdf-pro-intl.jar
*   tpt-core.jar

现在我的代码有什么问题......任何人都可以帮助我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T21:36:26.230

根据您发布的堆栈跟踪，“eu.livotov.tpt.gui.vdv.core.SinglePageDocumentRenderer”类中未实现“generateCell”方法。添加新选项卡时会调用它。根据[这个线程](https://vaadin.com/forum/-/message_boards/view_message/1436559)，TPT 库可能不适合与 Vaadin 一起使用。

点击监听器本身看起来不错。

```
Caused by: java.lang.AbstractMethodError: eu.livotov.tpt.gui.vdv.core.SinglePageDocumentRenderer.generateCell(Lcom/vaadin/ui/Table;Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
at com.vaadin.ui.Table.getVisibleCellsNoCache(Table.java:1691)
at com.vaadin.ui.Table.refreshRenderedCells(Table.java:1479)
at com.vaadin.ui.Table.attach(Table.java:3341)
at com.vaadin.ui.AbstractComponentContainer.attach(AbstractComponentContainer.java:97)
at com.vaadin.ui.AbstractComponentContainer.attach(AbstractComponentContainer.java:97)
at com.vaadin.ui.AbstractComponentContainer.attach(AbstractComponentContainer.java:97)
at com.vaadin.ui.AbstractComponentContainer.attach(AbstractComponentContainer.java:97)
at com.vaadin.ui.AbstractComponent.setParent(AbstractComponent.java:560)
at com.vaadin.ui.AbstractComponentContainer.addComponent(AbstractComponentContainer.java:211)
at com.vaadin.ui.TabSheet.addTab(TabSheet.java:294) 
```

# android - 收到短信时显示通知

> ID：10749701
> 
> 赞同：0
> 
> 时间：2012-05-25T06:43:14.787
> 
> 标签：android, eclipse, jakarta-ee

我已经创建了一个`NotificationView`类来显示接收通知，`SMS`它工作正常，但是当我点击它时`Notification`它不会清理并且通知图标保留在通知栏上但我希望清理它请指定我一些提示或示例代码提前谢谢或者抱歉，如果查询没有被清除..我标记了代码

谢谢

上的`displayNotification`方法`OnReceive``BroadcastReceiver`

```
private void displayNotification(String msg){
    Intent i = new Intent(this.context,NotificationView.class);
    i.putExtra("ID", ID);
    /*i.putExtra("msg",msg);*/
    PendingIntent pendInt = PendingIntent.getActivity(context, 0, i, 0);
    Notification notif = new Notification(R.drawable.notify,"Receiving SMS",System.currentTimeMillis());
    NotificationManager nm = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
    notif.setLatestEventInfo(context, "SMS", msg, pendInt);
    notif.flags |= Notification.DEFAULT_ALL;
    notif.flags |= Notification.DEFAULT_VIBRATE;
    notif.flags |= Notification.DEFAULT_LIGHTS;
    notif.flags |= Notification.FLAG_AUTO_CANCEL;       
    notif.ledARGB = Color.WHITE;                         
    notif.ledOnMS = 1500;                         
    notif.ledOffMS = 1500;      
    nm.notify(ID, notif);
} 
```

这是 NotificationView 类的代码。

```
public void onCreate(Bundle savedInstanceState){

    super.onCreate(savedInstanceState);
    setContentView(R.layout.notificationview);
    txtNotify = (TextView)findViewById(R.id.txtNotification);
    ID = getIntent().getExtras().getInt("ID");
    /*txtNotify.setText(getIntent().getExtras().getString("msg"));*/
}

private View.OnClickListener txtClick = new View.OnClickListener() {    
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(v.getId()){
        case R.id.txtNotification:
            NotificationManager nm = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
            txtNotify.setText("");              
            nm.cancel(ID);          
            nm.cancelAll();
            NotificationView.this.startActivity(new Intent(NotificationView.this,ZigbeeActivity.class));
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:47:14.750

为什么在下面的代码中使用管道（“|”）

```
notif.flags |= Notification.FLAG_AUTO_CANCEL; 
```

删除它并检查

```
notif.flags = Notification.FLAG_AUTO_CANCEL; 
```

# sql - 插入/更新/删除每一行 SQL

> ID：10749709
> 
> 赞同：0
> 
> 时间：2012-05-25T06:44:34.663
> 
> 标签：sql, stored-procedures, store

我在表 TABLE1 中有以下数据

```
SessionID
S1
S2
S3 
```

我在另一个 TABLE2 中有以下数据

```
EmployeeID | Session
1          | NULL
2          | NULL
3          | NULL 
```

我想做的是更新/插入每一行示例

```
UPDATE table2 SET Session= (SELECT SessionID FROM TABLE1)
INSERT INTO( COPY each row and insert 2nd row session id from table1) 
```

预期结果：表 2

```
EmployeeID | Session
1          | S1
2          | S1
3          | S1
1          | S2
2          | S2
3          | S2
1          | S3
2          | S3
3          | S3 
```

任何见解都会有所帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:51:08.340

听起来您希望 TABLE2 中的每一行当前在 TABLE2 中的每一行和 TABLE1 中的每一行的每个组合中都有一行。如果是这样...

```
BEGIN TRAN

SELECT * INTO #temp FROM TABLE2

DELETE TABLE2

INSERT TABLE2
(
    EmployeeID,
    Session
)
SELECT
    temp.EmployeeID,
    TABLE1.SessionID
FROM TABLE1 CROSS JOIN #temp temp

DROP #TEMP

COMMIT TRAN 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:56:15.167

我建议创建一个单独的 Employee 表。要将数据插入到您的 EmployeeSession (TABLE2)：

```
INSERT INTO EmployeeSession ( EmployeeID, SessionID )
    SELECT Employee.ID, [Session].ID
    FROM Employee, [Session] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:30:49.753

我认为该`MERGE`声明有帮助：

```
MERGE INTO TABLE2 t2
    USING (SELECT t2.EmployeeID, t1.SessionID
FROM TABLE2 t2
CROSS JOIN TABLE1 t1) t
        ON t2.EmployeeID = t.EmployeeID AND t2.Session = t.SessionID
    WHEN NOT MATCHED BY TARGET THEN
        INSERT (EmployeeID, Session) VALUES(t.EmployeeID, t.SessionID)
    WHEN NOT MATCHED BY SOURCE THEN
        DELETE
; 
```

# bash - 命令在 Linux 终端中运行，但不在 bash 脚本中

> ID：10749711
> 
> 赞同：0
> 
> 时间：2012-05-25T06:44:36.627
> 
> 标签：bash, shell

我想自动化修复某些视频的索引的过程。下面是我的代码。

```
for f in ~/Videos/Temp/*
do
    f=$(echo $f | sed 's/ /\\ /g')
    name=$(echo $f | sed 's/Temp/Fixed/1')
    mencoder -forceidx "$f" -o "$name" -oac copy -ovc copy
done 
```

我遇到的问题是 mencoder 声称它无法在变量 $f 中找到文件存储。

```
MEncoder svn r34540 (Ubuntu), built with gcc-4.6 (C) 2000-2012 MPlayer Team
File not found: '/home/name/Videos/Temp/file\ name.avi'
Failed to open /home/bryan/Videos/Temp/file\ name.avi.
Cannot open file/device.

Exiting... 
```

当我使用扩展变量将命令打印到终端并运行它时，它工作得很好。我什至修改了上面的代码以打印出修复每个视频的命令，将其粘贴到新脚本中，一切顺利。我在 Ubuntu 上运行它。关于可能导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:14:59.497

正如其他人指出的那样，您不需要手动转义文件名中的空格。但是，您也不需要使用`sed`来修改路径。

```
for f in ~/Videos/Temp/*
do
    mencoder -forceidx "$f" -o "${f/Temp/Fixed}" -oac copy -ovc copy
done 
```

只有第一次出现的“Temp”被替换为“Fixed”，因此您不必担心文件名中的意外替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:24:43.860

```
 find ~/Videos/Temp/ -type f -print0 | while IFS= read -r -d $'\0' f; do
        name=$(echo "$f" | sed 's/Temp/Fixed/1')
        mencoder -forceidx "$f" -o "$name" -oac copy -ovc copy
    done 
```

# iphone - 如何从 iPhone 应用程序注销并将其重定向到登录页面？

> ID：10749716
> 
> 赞同：0
> 
> 时间：2012-05-25T06:44:48.730
> 
> 标签：iphone, logging, uitabbarcontroller, logout

我正在开发一个 tabBar 应用程序，我将登录页面预设为 modalviewcontroller。稍后从页面登录后，我将显示 TabBar。在其中一个选项卡中，我有我的 LogOut View 控制器，我想在其中注销并反过来将应用程序重定向到登录页面。我需要删除所有加载的数据，然后在我再次重新登录时使用输入的数据重新登录。我进行了很多搜索，但找不到任何帮助。有人可以帮助我如何实现此功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:50:52.927

如果您将登录视图显示为模型视图，那么没问题。当您的用户成功登出时，您可以再次执行此操作。只需再次显示登录页面即可。

但我的建议是，您应该以应用程序的根视图登录并签入应用程序委托，如果用户已经登录，则请参阅您的应用程序主页，否则请参阅登录页面。在注销按钮处，jst 弹出登录视图控制器。这是根视图控制器

if([[DataModel sharedDataModel] getValueForKey:USER_SESSION_ID]!=nil) { objLoginController=[[LoginController alloc] initWithNibName:@"LoginController" bundle:nil];

```
 UINavigationController *temp=[[UINavigationController alloc] initWithRootViewController:objLoginController];
    self.mNavigationController=temp;

    [temp release];
    [objLoginController release];
    objLoginController = nil;

    if(objHomeController==nil)
    {
        objHomeController=[[HomeController alloc] initWithNibName:@"HomeController" bundle:nil];
    }

    [self.mNavigationController pushViewController:objHomeController animated:NO];

    [objHomeController release];
    objHomeController=nil;

    [mNavigationController setDelegate:self];
    mNavigationController.navigationBar.hidden=TRUE;
    [self.view addSubview:mNavigationController.view];
}
else
{
    objLoginController=[[LoginController alloc] initWithNibName:@"LoginController" bundle:nil];

    UINavigationController *temp=[[UINavigationController alloc] initWithRootViewController:objLoginController];
    self.mNavigationController=temp;

    [temp release];
    [objLoginController release];
    objLoginController = nil;

    [mNavigationController setDelegate:self];
    //mNavigationController.navigationBar.hidden=TRUE;
    //[mNavigationController setNavigationBarHidden:NO animated:YES];
    [self.view addSubview:self.mNavigationController.view];
} 
```

# string - 查找字符串的索引

> ID：10749723
> 
> 赞同：0
> 
> 时间：2012-05-25T06:45:08.550
> 
> 标签：string, delphi, search

我在文件打开对话框上有一个过滤器

```
 Docs := 'Indscannet fil (*.jpg)|*.jpg|Indscannet fil (*.tif)|*.tif|' +
          'Word 2007 dokument (*.docx)|*.docx|Word 2003 dokument (*.doc)|*.doc|' +
          'PDF fil (*.pdf)|*.pdf|Alle filer (*.*)|*.*'; 
```

当我选择了一个文件，假设它被称为 stack.pdf，我想知道它是类型 5 (jpg=1, tif=2, docx=3, doc=4, pdf=5)

如何以最简单的方式做到这一点？

这一切的原因是用户几乎总是添加几个相同类型的文档，如果这是一个 PDF，我知道我的过滤器中的编号为 5，下次用户添加文件时，我可以将 dlgOpen.FilterIndex 设置为 5e开始，这样他们就不必每次都选择它。如果是 20 个文档，它可能会节省几分钟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:15:58.220

更新：正如@David Heffernan 在下面的评论中提到的，`FilterIndex`并不总是与实际的文件扩展名匹配；所以你不应该使用`FilterIndex`来确定文件类型。因此，您必须提取文件扩展名并使用它；

您可以定义已知的文件类型枚举，例如：

```
TKnowFiles = (kfUnknown, kfJpg, kfTif, ...) 
```

你也可以定义他们的名字，比如

```
const FilterNames = array[TKnownFiles] of string = ('Any file', ...); 
```

然后您可以使用 RTTI 函数`getEnumName/getEnumValue`转换`kfJpg`为字符串表示形式并在运行时构建`Filter`字符串。还使用枚举允许您轻松维护和扩展您的代码（如果您必须在下周在 tif 和 docx 之间插入 BMP 文件怎么办？docx、doc、pdf 变成 4、5、6 而不是 3、4、5 并且您可以编辑您的代码。）
可能的解决方案之一是：

```
type
    TKnownFileTypes = (kftUnknown, kftJpg, kftTif, kftDocx, kftDoc, kftPdf);
const
    FileFilterNames : array[TKnownFileTypes] of string = (
                            'Alle filer',
                            'Indscannet fil',
                            'Indscannet fil',
                            'Word 2007 dokument',
                            'Word 2003 dokument',
                            'PDF fil');

procedure TForm4.Button1Click(Sender: TObject);
const KnownFiles = [low(TKnownFileTypes) .. high(TKnownFileTypes)];
var filterString : string;
    fext : string;
    kf : TKnownFileTypes;
    kfs : string;

    resultFileType : TKnownFileTypes;
begin
    for kf in KnownFiles - [kftUnknown] do begin
        kfs := getEnumName(typeinfo(TKnownFileTypes), ord(kf));
        Delete(kfs, 1, 3);
        LowerCase(kfs);

        FilterString := FilterString +
                        Format('%s (*.%s)|*.%s|', [FileFilterNames[kf], kfs, kfs]);

    end;
    FilterString := FilterString + Format('%s (*.*)|*.*', [FileFilterNames[kftUnknown]]);
    OpenDialog1.Filter := FilterString;

    if not OpenDialog1.Execute() then exit;

    fext := ExtractFileExt(OpenDialog1.FileName);
    Delete(fext, 1,1); //delete .dot
    fext := 'kft' + fExt;

    resultFileType := kftUnknown;
    for kf in KnownFiles - [kftUnknown] do begin
        kfs := getEnumName(typeinfo(TKnownFileTypes), ord(kf));
        kfs := LowerCase(kfs);
        if kfs <> fext then continue;

        resultFileType := kf;
    end;

    ShowMessage(Format('File Type: %s', [FileFilterNames[resultFileType]]));
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:52:25.387

您可以使用[`ExtractFileExt`](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.ExtractFileExt)从完整路径中提取文件扩展名。

或使用`openDialog.FilterIndex`属性来获取所选过滤器的索引（在您的情况下为 pdf 为 5）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T15:30:12.133

我的解决方案是

```
function ExtensionIndex(const aFilter, aFile: string): integer;
var
  List: TStringList;
  Buffer: TStringList;
  i: Integer;
  Key: string;
  fExt: string;
begin
  Result := - 1;
  i := 0;
  List := TStringList.Create;
  List.LineBreak := '|';
  List.Text := aFilter;
  Buffer := TStringList.Create;
  Buffer.Sorted := False;
  try
    while i < List.Count do
      begin
        inc(i);
        Key := AnsiLowerCase(List[i]);
        inc(i);
        Buffer.Add(Key);
      end;
    fExt := AnsiLowerCase(ExtractFileExt(aFile));
    for i := 0 to Buffer.Count - 1 do
      if Buffer[i] = '*' + fExt  then
        begin
          Result := i + 1;
          exit;
      end;
  finally
    FreeAndNil(Buffer);
    FreeAndNil(List);
  end;
end; 
```

这对我有用。

# python-2.7 - 如何更快地获得具有给定href的第一个元素

> ID：10749725
> 
> 赞同：0
> 
> 时间：2012-05-25T06:45:21.677
> 
> 标签：python-2.7, lxml

我有工作示例，它生成具有给定 href 的 html 元素列表。但我只需要第一个，速度很重要，如何优化这段代码？

```
import lxml.html
input = """<div class="post" style="height: 36px; ">
some div text 
<a href="http://site.com/" target="_blank">Look here</a>, 
some div text also </div>
"""
root = lxml.html.fromstring(input)
el = root.xpath("//*[@href='http://site.com/']")[0]
el.text 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T09:03:38.750

确保它真的更快的唯一方法是测量、测量、测量。timeit[模块](http://docs.python.org/library/timeit.html)可以提供帮助。

回到你的问题，这个怎么样？

```
text = root.xpath('//*[@href='http://site.com/'][1]/text()') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T14:47:06.897

您可以在 xpath 表达式中使用索引：`(//*[@href='http://site.com/'])[1]`

# c# - jquery ajax弹出错误

> ID：10749727
> 
> 赞同：0
> 
> 时间：2012-05-25T06:45:24.893
> 
> 标签：c#, jquery, ajax

我想显示动态框的弹出窗口。每次单击时，我都应该从数据库中获取相应的 id 并显示详细信息。我无法在 ajax jquery 的数据中正确获取公司 ID，并且没有显示弹出窗口。

jquery的代码：

我正在使用 jquery ui 模式弹出

```
 <script type="text/javascript">
      $.fx.speeds._default = 1000;
      $(document).ready(function () {
          $("div[id*='window']").live('click', function (e) {
              $.ajax({
                  url: 'Default2.aspx/get_details',
                  type: 'Get', 
                  dataType: 'json',
                  data: { id: $(this).attr('id').replace(/window/g, '') },
                  success: function (data) {
                      $('<div></div>').appendTo('body').html('<div>' + data.comp_name + '</div><div>' + data.comp_name + '</div>').dialog({
                          modal: true, title: 'Test message', zIndex: 10000, autoOpen: true,
                          width: 460, height: 300, modal: true, resizable: false, closeOnEscape: false,
                          show: "slide", hide: "explode",
                          buttons: {
                              Ok: function () {
                                  $(this).dialog("close");
                              }
                          },
                          close: function (event, ui) {
                              $(this).remove();
                          }
                      });
                  }
              });
          });
      });

  </script> 
```

我背后的代码：

```
public void get_details()
   {

       DataSet dset = new DataSet();
       SqlConnection cn = new SqlConnection(@"Data Source=kar_WS4;Initial Catalog=datas;User ID=sa;Password=****");
       string qry = "Select comp_companyId,comp_name,comp_status from Company where comp_companyId=@comp_companyId ";
       SqlDataAdapter sda = new SqlDataAdapter(qry, cn);
       sda.Fill(dset);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:49:56.667

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="CompayJqueryUI.aspx.cs"
    Inherits="CompanyDisplay.CompayJqueryUI" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link href="Scripts/css/ui-lightness/jquery-ui-1.8.20.custom.css" rel="stylesheet"
        type="text/css" />
    <script src="Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery-ui-1.8.20.custom.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $.fx.speeds._default = 1000;
        $(document).ready(function () {
            $("div[id*='window']").live('click', function (e) {
                $.ajax({
                    url: "WebService.asmx/GetCompanyDetails", type: "Post", dataType: "json",
                    data: JSON.stringify({ id: $(this).attr('id').replace(/window/g, '') }),
                    contentType: "application/json; charset=utf-8",
                    success: function (msg) {
                        var data = $.parseJSON(JSON.stringify(eval("(" + msg.d + ")")));

                        $('<div></div>').appendTo('body').html('<div>' + data.Name + '</div><div>' + data.City + '</div>').dialog({
                            modal: true, title: 'Test message', zIndex: 10000, autoOpen: true,
                            width: 460, height: 300, modal: true, resizable: false, closeOnEscape: false,
                            show: "slide", hide: "explode",
                            buttons: {
                                Ok: function () {
                                    $(this).dialog("close");
                                }
                            },
                            close: function (event, ui) {
                                $(this).remove();
                            }
                        });
                    },
                    error: function (msg) {

                    }
                });
            });
        });
    </script>
</head>
<body>
    <div id="window1">
        Test1
    </div>
    <br />
    <br />
    <br />
    <br />
    <div id="window2">
        Test2
    </div>
</body>
</html>

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using Entity;

namespace CompanyDisplay
{
    public partial class CompayJqueryUI : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        public Company GetCompanyDetails(int id)
        {
            if (true)   //authorize 
            {
                //SqlConnection cn = new SqlConnection(@"Data Source=KURIOS_WS4;Initial Catalog=Dreams;User ID=sa;Password=SageCRMv71");
                //string qry = "Select comp_companyId,comp_name,comp_status from Company where comp_companyId=@comp_companyId ";
                //SqlCommand cmd = new SqlCommand(qry, cn);
                //SqlDataReader reader = cmd.ExecuteReader();

                Company entity = new Company();
                entity.Id = 2;
                entity.Name = "Test";
                entity.City = "Bangalore";

                //Or

                //if (reader.Read())
                //{
                //    entity.Id = int.Parse(reader["comp_companyId"].ToString());
                //    entity.Name = reader["comp_name"].ToString();
                //    entity.City = reader["comp_status"].ToString();
                //}

                return entity;
            }
            else
            {
                return new Company();
            }
        }
    }
}

using System;
using System.Collections.Generic;
using System.Web;
using System.Web.Services;
using System.Web.Script.Services;
using System.Web.Script.Serialization;
using CompanyDisplay;

namespace CompanyDisplay
{
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    [ScriptService]
    public class WebService : System.Web.Services.WebService
    {
        [WebMethod]
        [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
        public string GetCompanyDetails(int id)
        {
            return new JavaScriptSerializer().Serialize(new CompayJqueryUI().GetCompanyDetails(id));
        }
    }
} 
```

# java - 从时间戳获取日期

> ID：10749732
> 
> 赞同：0
> 
> 时间：2012-05-25T06:45:59.267
> 
> 标签：java, date-format, simpledateformat

我的代码是：

```
import java.text.*;
import java.util.Date;

public class DateEx {
    public static void main(String[] args) {
        //String valueFromDB = "2012/06/06 00:00:00";

        String valueFromDB = "2012-12-31 00:00:00.0";
        Date d = new Date(valueFromDB);
        SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy");
        String dateWithoutTime = sdf.format(d);

        System.out.println("sdf.format(d) " + dateWithoutTime);

    }
} 
```

它适用`"2012/06/06 00:00:00"`，我需要通过`"2012-12-31 00:00:00.0"`它显示非法参数。可能是因为我`"-"`在日期中使用过，或者是因为时间戳小数秒。我需要`dd-mm-yyyy`格式的日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-22T08:59:49.090

这可能会有所帮助。

```
long dateTimeStamp = 1487269800;
Timestamp stamp = new Timestamp(dateTimeStamp*1000);
Date changeDate = new Date(stamp.getTime()); 
```

输出：

```
Date :Fri Feb 17 00:00:00 IST 2017 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:57:28.723

要将字符串解析为 Date 类型，请使用以下代码：

```
DateFormat formatter;
Date date;
formatter = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");
date = (Date)formatter.parse("2012-12-31 00:00:00"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T06:58:35.150

试试这个 -

```
SimpleDateFormat sdf1 = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss.S");
String valueFromDB = "2012-12-31 00:00:00.0";
Date d1 = sdf1.parse(valueFromDB);
SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy");
String dateWithoutTime = sdf.format(d1);
System.out.println("sdf.format(d) " + dateWithoutTime); 
```

# java - 关闭上下文时出现 Jetty 错误：java.lang.IllegalStateException: IDLE,initial

> ID：10749735
> 
> 赞同：3
> 
> 时间：2012-05-25T06:46:12.053
> 
> 标签：java, asynchronous, jetty, nio

我遇到了异步码头响应的问题！我正在使用嵌入式 Jetty 与反应器循环接口，并在循环处理它们时收集响应，然后在答案出现在收集器哈希中时完成 Jetty 请求。

即使收集器哈希中存在某些内容，我也看到关闭上下文的错误-我认为上下文已超时，我试图检测到这一点而不是调用完成，但这不起作用。我尝试检查 ((AsyncContinuation)ctx).isInitial() 以查看上下文是否可以关闭，但它没有做任何事情。

这是错误：

```
INFO: e0d879983e682c0d6 API Request happens
May 25, 2012 4:39:00 AM server.Reactor$Parser parse
INFO: Received data { data from reactor }
May 25, 2012 4:39:00 AM server.AsyncHTTPRequestProcessor run
INFO: --->API http request in collector:
May 25, 2012 4:39:00 AM server.AsyncHTTPRequestProcessor run
INFO: Collector in async stuff:
2012-05-25 04:39:00.846:WARN:oejut.QueuedThreadPool:
java.lang.IllegalStateException: IDLE,initial
    at org.eclipse.jetty.server.AsyncContinuation.complete(AsyncContinuation.java:569)
    at server.AsyncHTTPRequestProcessor.run(AsyncHTTPRequestProcessor.java:72)
    at org.eclipse.jetty.server.handler.ContextHandler.handle(ContextHandler.java:1119)
    at org.eclipse.jetty.server.AsyncContinuation$1.run(AsyncContinuation.java:875)
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:599)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:534)
    at java.lang.Thread.run(Thread.java:679) 
```

这是 Jetty 端点：

```
package server;
import java.io.*;
import java.nio.channels.Selector;
import java.text.MessageFormat;
import java.util.*;
import java.util.Map.Entry;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.ConcurrentLinkedQueue;
import java.util.logging.Level;
import java.util.logging.Logger;

import javax.servlet.AsyncContext;
import javax.servlet.AsyncEvent;
import javax.servlet.AsyncListener;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.eclipse.jetty.continuation.*;

public class APIRequestHandler extends HttpServlet
{
    private static final long serialVersionUID = -446741424265391138L;

    private ConcurrentHashMap<String, clientconnData> key2clientconn;
    private ConcurrentLinkedQueue<APIMessage> queue;
    private ConcurrentHashMap<String, String> collector;
    private int timeout;
    private Logger logger;
    private Selector selector;

    public APIRequestHandler(Logger logger, Selector selector, ConcurrentLinkedQueue<APIMessage> queue,
            ConcurrentHashMap<String, String> collector, ConcurrentHashMap<String, clientconnData> key2clientconn2, int timeout)
    {
        this.logger = logger;
        this.selector = selector;
        this.queue = queue;
        this.collector = collector;
        this.timeout = timeout;
        this.key2clientconn = key2clientconn2;
    }

    public void doGet(HttpServletRequest req, HttpServletResponse res)
            throws java.io.IOException
            {
        //System.out.println("request URI=" + req.getRequestURI());

        String rid = req.getParameter("rid");
        String clientconnId = req.getParameter("id");
        String msg = req.getParameter("json");

        // We do a null check to avoid the favicon call and other broken calls
        if(clientconnId==null || rid==null || msg==null){
            PrintWriter out = res.getWriter();
            res.setStatus(200);
            res.setContentType("application/json");
            out.println("{");
            out.println("\"response\":{\"success\":\"false\",\"response\":\"request missing parameters\"}");
            out.println("}");
            out.close();
        }
        else if(!this.key2clientconn.containsKey(clientconnId))
        {
            PrintWriter out = res.getWriter();
            res.setStatus(200);
            res.setContentType("application/json");
            out.println("{");
            out.println("\"rid\":"+"\""+rid+"\"");
            out.println(",");
            out.println("\"rtime\":"+0); // milliseconds
            out.println(",");
            out.println("\"response\":{\"success\":\"false\",\"response\":\"clientconn with not found on server\"}");
            out.println("}");
            out.close();
        }
        else// everything is fine, proceed as normal
        {
            logger.log(Level.INFO,"From API: "+msg);

            // Send to channel
            APIMessage m = new APIMessage();
            m.rid = rid;
            m.id = clientconnId;
            m.json = msg + "\r\n";

            // create the async context, otherwise getAsyncContext() will be null
            final AsyncContext ctx = req.startAsync();

            // set the timeout
            ctx.setTimeout(this.timeout);
            ctx.getRequest().setAttribute("rid",rid);
            ctx.getRequest().setAttribute("startTime",System.currentTimeMillis()); // start time

            // set up selector/queue
            queue.add(m);
            this.selector.wakeup();

            // attach listener to respond to lifecycle events of this AsyncContext
            ctx.addListener(new AsyncListener() {
                public void onComplete(AsyncEvent event) throws IOException {
                    log("onComplete called");

                    // NOTE: errors and timeouts are handled with other events.
                    // Successful comm with clientconn handled by AsyncHTTPRequestProcessor.            
                    ServletRequest asyncContextReq = event.getAsyncContext().getRequest();

                    int httpStatusCode = 500;
                    if(asyncContextReq.getAttribute("status") != null)
                        httpStatusCode = (Integer) asyncContextReq.getAttribute("status");
                    Object response = "{}";
                    if(asyncContextReq.getAttribute("response") != null)
                        response = event.getAsyncContext().getRequest().getAttribute("response");

                    long startTime = (Long) asyncContextReq.getAttribute("startTime");
                    long endTime = System.currentTimeMillis();
                    long elapsedTime = endTime - startTime;

                    // Do the response
                    HttpServletResponse ctxRes = (HttpServletResponse)event.getAsyncContext().getResponse();

                    ctxRes.setStatus(httpStatusCode);
                    ctxRes.setContentType("application/json");
                    ctxRes.getWriter().println("{");
                    ctxRes.getWriter().println("\"rid\":"+"\""+asyncContextReq.getParameter("rid")+"\"");
                    ctxRes.getWriter().println(",");
                    ctxRes.getWriter().println("\"rtime\":"+elapsedTime); // milliseconds
                    ctxRes.getWriter().println(",");
                    ctxRes.getWriter().println("\"response\": "+response);

                    ctxRes.getWriter().println("}");
                    ctxRes.getWriter().flush();

                }
                public void onTimeout(AsyncEvent event) throws IOException {
                    log("onTimeout called");

                    // gateway timeout (on clientconn request)
                    ServletRequest asyncContextReq = event.getAsyncContext().getRequest();
                    asyncContextReq.setAttribute("status",500); // request timeout
                    asyncContextReq.setAttribute("response", "{}");
                }
                public void onError(AsyncEvent event) throws IOException {
                    log("onError called");

                    ServletRequest asyncContextReq = event.getAsyncContext().getRequest();
                    asyncContextReq.setAttribute("status",500); // request timeout
                    asyncContextReq.setAttribute("response", "{}");
                }
                public void onStartAsync(AsyncEvent event) throws IOException {
                    log("onStartAsync called");
                }
            });

            // spawn some task in a background thread
            ctx.start(new AsyncHTTPRequestProcessor(ctx,collector,logger));
        }
    }
} 
```

处理异步响应：

```
package server;
import java.io.IOException;
import java.text.MessageFormat;
import java.util.Date;
import java.util.Map.Entry;
import java.util.concurrent.ConcurrentHashMap;
import java.util.logging.Logger;

import javax.servlet.AsyncContext;

import org.eclipse.jetty.server.AsyncContinuation;

public class AsyncHTTPRequestProcessor implements Runnable {

    private ConcurrentHashMap<String, String> collector;
    private Logger logger;
    private AsyncContext ctx;
    private String responseStr = null;

    public AsyncHTTPRequestProcessor(AsyncContext _ctx, 
            ConcurrentHashMap<String, String> _collector, Logger _logger) {
        ctx = _ctx;
        collector = _collector;
        logger = _logger;
    }

    @Override
    public void run() {

        logger.info("AsyncContinuation start");

        //if(!((AsyncContinuation)ctx).isInitial()){
        String rid = (String) ctx.getRequest().getAttribute("rid");
        int elapsed = 0;
        if(rid !=null)
        {

            logger.info("AsyncContinuation rid="+rid);

            while(elapsed<ctx.getTimeout())
            {
                if(collector.containsKey(rid)){
                    responseStr = collector.get(rid);
                    collector.remove(rid);

                    logger.info("--->API http request in collector:"+responseStr);
                    ctx.getRequest().setAttribute("status",200);
                    ctx.getRequest().setAttribute("response", responseStr);
                    ctx.getRequest().setAttribute("endTime",System.currentTimeMillis());
                    break;
                }
                try {
                    Thread.sleep(10);
                    elapsed+=10;
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
            //}
            logger.info("Collector in async stuff:");
            for(String key:collector.keySet()){
                logger.info(key+"->"+collector.get(key));
            }

            for(Entry<String, String> x:collector.entrySet()){
                logger.info(x.getKey()+"->"+x.getValue());
            }
            ctx.complete();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T02:38:03.803

我也遇到了这个问题。如果 AsyncContext 已关闭，AsyncContext.complate() 方法似乎会抛出 java.lang.IllegalStateException。我认为您应该再次检查您的程序以了解 AsyncContext 是否已关闭在调用 complate() 方法之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T10:44:22.917

我认为您应该在调用 complate() 方法之前再次检查程序以查明 AsyncContext 是否已关闭。这对我的问题有效。

# javascript - 将列表项动态添加到 Jquery Mobile 中的无序列表中

> ID：10749737
> 
> 赞同：0
> 
> 时间：2012-05-25T06:46:42.757
> 
> 标签：javascript, jquery, html, json, jquery-mobile

在有人向我指出关于 stackoverflow 的类似问题之前，我已经搜索并阅读并尝试了所有提供的解决方案，但均无济于事。顺便说一句，我理解它会有一个空列表，如下所示：

```
<ul data-role='listview' data-theme='b' data-inset='true' id='resultsList'>
   <!-- keep empty for dynamically added items -->
</ul> 
```

然后在你的 javascript/jquery 中你会这样（记住我从 JSON 对象获取我的数据）：

```
var resultLength = jsonObject.results.length;
var listItems = [];

for(var i=0;i<resultLength;i++){
   var firstname = jsonObject.results[i].FN;
   var lastname = jsonObject.results[i].SN;

   //Add result to array
   listItems.push("<li><a href='#'>"+firstname+" "+lastname+"</a></li>");
}

//Append array to list and refresh
$('#resultsList').append(listItems.join(' '));
$('#resultsList').listview('refresh'); 
```

但是......它不起作用。我是 jquery 的新手，所以这可能是我在某个地方犯的一个非常愚蠢的错误。如果有人知道为什么这不起作用，我将不胜感激！现在已经为此苦苦挣扎了2天。如果需要更多信息，请随时询问。

编辑 - 按要求添加 JSON

```
{"results":
[
 {   "GUID":"F45B0504-376C-4772-81C2-B920E23E1332",
     "I#":"4202265241081",
     "FN":"JOHN",
     "DOB":"1942-02-26",
     "SEX":"M",
     "SN":"KHUNOU",
     "U#":"VH00041750",
     "TYPE":"P"},

{    "GUID":"BB69F24F-424A-4B10-8A48-E94197894855",
     "I#":"3909035071082",
     "FN":"JOHN E",
     "DOB":"1939-09-03",
     "SEX":"M",
     "SN":"RIVETT CARNAC",
     "U#":"VH00156354",
     "TYPE":"P"
}
],
"ok":"true"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:33:23.680

您的代码看起来不错，并且将 JSON 排除在等式之外表明它有效：http: [//jsfiddle.net/b5h5Y/](http://jsfiddle.net/b5h5Y/)

由于代码有效，因此可能会发布 JSON 本身的示例，或者您访问它的方式似乎是弱点？

# java - 面临来自 IBM WAS7 的 Web 服务调用问题

> ID：10749740
> 
> 赞同：0
> 
> 时间：2012-05-25T06:46:49.033
> 
> 标签：java, web-services, websphere, websphere-7

我在 Oracle Weblogic 11G 上部署了一个 Web 服务。Web 服务已使用 weblogic 的内部测试客户端进行了测试，并且正在运行。

此 Web 服务的客户端存根是使用 IBM WAS 7 内置脚本 (WSDL2JAVA.SH) 构建的。然后，存根用于调用 Web 服务并已部署在 IBM WAS7 上。

下面的问题是由 Web 服务调用的。

对它自己的存根的方法调用会引发此异常。

奇怪的是，根据客户端请求的活动记录在日志中。

这意味着 Web 服务正在获取请求，但客户端无法分析响应。

请帮忙。

[5/24/12 13:02:27:655 GMT+05:30] 00000027 SystemErr R java.lang.ClassCastException：com.ibm.ws.webservices.engine.xmlsoap.SOAPElement 与 java.lang.String [5 /24/12 13:02:27:655 GMT+05:30] 00000027 SystemErr R at $Proxy21.inquireFinnOneLMS（未知来源）[5/24/12 13:02:27:655 GMT+05:30] 00000027 SystemErr R at com.iflex.fcat.hdfc_ln.LNRoot.sendRequest(LNRoot.java:1296) [5/24/12 13:02:27:655 GMT+05:30] 00000027 SystemErr R at com.iflex.fcat.hdfc_ln .RSLoanAccountSummaryBean.doProcess(RSLoanAccountSummaryBean.java:175)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:30:26.167

您是针对提供的 wsdl 文件还是针对服务本身提供的 wsdl URL 运行 wsdl2java？

乍一看，这似乎是生成客户端时使用的 WSDL 与实际运行的服务之间的脱节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T17:11:54.513

您是否运行了 endptEnabler.sh（或 endptEnabler.bat）

-> endptEnabler.sh -v -CCtrace=*=all -CCtracefile=/tmp/trace.log myEAR.ear

检查此以获取详细信息；

[http://www.ibm.com/developerworks/websphere/techjournal/0404_bose/0404_bose.html](http://www.ibm.com/developerworks/websphere/techjournal/0404_bose/0404_bose.html)

这是一个链接，其中报告并解决了与 endptEnabler 相关的问题 [http://fixunix.com/websphere/558857-accessing-jax-ws-endpoint.html](http://fixunix.com/websphere/558857-accessing-jax-ws-endpoint.html)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T10:23:05.573

已发现该问题存在于 IBM WAS 服务器上，并已在下一个 FixPack 中得到修复。

WAS 库无法理解 SOAP 元素并且正在抛出错误。

# android - admob 横幅无法在三星 Galaxy Note 中显示

> ID：10749741
> 
> 赞同：0
> 
> 时间：2012-05-25T06:47:00.820
> 
> 标签：android, admob

这是我的 logcat 回复

```
05-25 06:32:45.552: I/Ads(408): onFailedToReceiveAd(Ad request successful, but no ad returned due to lack of ad inventory.)
05-25 06:43:37.802: I/Ads(408): adRequestUrlHtml: <html><head><script src="http://media.admob.com/sdk-core-v40.js"></script><script>AFMA_buildAdURL({"kw":[],"preqs":4,"session_id":"11876839087358837237","u_sd":1.5,"seq_num":"5","slotname":"MY_AD_UNIT_ID","u_w":533,"msid":"oriental.orientalDaily","simulator":1,"cap":"a","adtest":"on","js":"afma-sdk-a-v6.0.0","isu":"B3EEABB8EE11C2BE770B684D95219ECB","cipa":0,"format":"320x50_mb","net":"ed","app_name":"2.android.oriental.orientalDaily","hl":"en","u_h":853,"carrier":"310260","ptime":680039,"u_audio":4});</script></head><body></body></html>
05-25 06:43:37.952: I/Ads(408): To get test ads on this device, call adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
05-25 06:43:38.002: I/Ads(408): adRequestUrlHtml: <html><head><script src="http://media.admob.com/sdk-core-v40.js"></script><script>AFMA_buildAdURL({"preqs":5,"session_id":"11876839087358837237","u_sd":1.5,"seq_num":"6","slotname":"a14fb2149ab3ccb","u_w":533,"msid":"oriental.orientalDaily","simulator":1,"cap":"a","js":"afma-sdk-a-v6.0.0","isu":"B3EEABB8EE11C2BE770B684D95219ECB","cipa":0,"format":"320x50_mb","net":"ed","app_name":"2.android.oriental.orientalDaily","hl":"en","u_h":853,"carrier":"310260","ptime":680229,"u_audio":4});</script></head><body></body></html>
05-25 06:43:39.202: I/dalvikvm(408): Jit: resizing JitTable from 1024 to 2048
05-25 06:43:39.993: W/webcore(408): Can't get the viewWidth after the first layout
05-25 06:43:42.372: W/webcore(408): Can't get the viewWidth after the first layout
05-25 06:43:42.405: W/Ads(408): Invalid unknown request error: Cannot determine request type. Is your ad unit id correct?
05-25 06:43:42.405: D/webviewglue(408): nativeDestroy view: 0x4e5768
05-25 06:43:42.412: I/Ads(408): onFailedToReceiveAd(Invalid Ad request.)
05-25 06:43:42.672: I/Ads(408): Received ad url: <url: "http://googleads.g.doubleclick.net:80/mads/gma?preqs=5&session_id=11876839087358837237&u_sd=1.5&slotname=a14fb2149ab3ccb&u_w=533&msid=oriental.orientalDaily&cap=a&js=afma-sdk-a-v6.0.0&isu=B3EEABB8EE11C2BE770B684D95219ECB&cipa=0&format=320x50_mb&net=ed&app_name=2.android.oriental.orientalDaily&hl=en&u_h=853&carrier=310260&ptime=680229&u_audio=4&u_so=p&output=html&region=mobile_app&u_tz=0&ex=1&client_sdk=1&askip=0&caps=interactiveVideo_clickTracking_sdkAdmobApiForAds&jsv=24" type: "admob" afmaNotifyDt: "null">
05-25 06:43:43.044: D/webviewglue(408): nativeDestroy view: 0x4cc800
05-25 06:43:43.044: I/Ads(408): onFailedToReceiveAd(Ad request successful, but no ad returned due to lack of ad inventory.) 
```

没有错误，但未能在 Galaxy Note 中显示，但其他设备可以显示。

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T21:06:13.247

从日志来看，您似乎正在发出两个请求，这有点奇怪。无论如何，您的第一个请求不起作用，因为您需要指定一个发布者 ID 来代替`MY_AD_UNIT_ID`.

# perl - 通过 perl CGI 脚本上传文件

> ID：10749747
> 
> 赞同：2
> 
> 时间：2012-05-25T06:47:54.883
> 
> 标签：perl, apache, file-upload, cgi

我正在尝试在 localhost 服务器（Linux 平台上的 Apache 2.2）上上传文件，但我收到**Internal Server Error 500**。

服务器运行良好（因为我可以通过 CGI 脚本打印所有环境变量），即使经过大量谷歌搜索，我也无法找到我的方式。

这是我的 HTML 代码：

```
<FORM ACTION="http://localhost/cgi-bin/upload.cgi" METHOD="post" ENCTYPE="multipart/form-data">
<INPUT TYPE="file" NAME="photo">
<INPUT TYPE="submit" NAME="Submit" VALUE="Submit Form">
</FORM> 
```

这是我的 cgi 脚本，它被放置在 /var/www/cgi-bin 中，我已授予此文件的完全权限。

```
#!/usr/bin/perl -w
use CGI;

$upload_dir = "/home/myuser/Desktop/upload";
$query = new CGI;
$filename = $query->param("photo");
$filename =~ s/.*[\/\\](.*)/$1/;
$upload_filehandle = $query->upload("photo");

open UPLOADFILE, ">$upload_dir/$filename";
while ( <$upload_filehandle> )
{
print UPLOADFILE;
}
close UPLOADFILE;

print $query->header ();

print <<END_HTML;
<HTML>
<HEAD>
<TITLE>Thanks!</TITLE>
</HEAD>
<BODY>
<P>Thanks for uploading your photo!</P>
    <P>Your photo:</P>
<img src="/home/myuser/Desktop/upload/$filename" border="0">
</BODY>
</HTML> 
```

请有人给我一个提示来解决上述简单问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:13:01.090

检查 apache 错误日志（通常在 /var/log/httpd/error_log 中找到）中的警告或错误消息。我怀疑问题是上传目录不可被网络服务器[写入。](http://www.g-loaded.eu/2008/12/09/making-a-directory-writable-by-the-webserver/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:39:15.053

**print "内容类型：text/html\n\n";** 这是一个内容类型的标头，它告诉接收 Web 浏览器它将接收什么样的数据——在本例中，是一个 HTML 文档。如果您忘记包含它，或者如果您在打印此标题之前打印了其他内容，当您尝试访问 CGI 程序时，您将收到**“内部服务器错误” 。**

EOF 处也缺少 END_HTML。

# json - cakephp Web服务如何编写允许我上传文件的动作

> ID：10749752
> 
> 赞同：4
> 
> 时间：2012-05-25T06:48:04.890
> 
> 标签：json, web-services, cakephp, rest, file-upload

我正在使用 cakephp 2.1.0

我有一个帖子控制器，它基本上创建一个帖子，其 id 为整数、标题、图像为字符串

我有一个控制器操作，它可以与允许我上传文件并创建新 Post 记录的视图一起使用。该操作称为 admin_add

这是有效的。

但是，我想公开此操作 admin_add 以便内置于 Adob​​e Flex 的桌面应用程序可以调用它。

最好我想使用 RESTful 动作。

基本上我想将此操作创建为 Web 服务。

我在网上看到的大多数教程都倾向于只读操作，例如视图和索引。

我需要向 cakephp 应用程序代码添加哪些更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T07:31:50.413

一段时间后我想通了。

假设以下设置

*   Cakephp 2.x
*   此处的操作对匿名用户是公开的

**步骤 1.由 josegonzalez安装[Webservice 插件。](https://github.com/josegonzalez/webservice_plugin)**

步骤 1.1。为 json 设置 Router::parseExtensions

步骤 1.2。将“Webservice.Webservice”添加到 PostController 的组件中

步骤 1.3。加载插件

* * *

**步骤 2\. 您需要为 PostController 更改以下操作**

```
 public function add() { 

    if ($this->request->is('post')) {

        // create new Post -- this will grab the file from the request data
        $newPost = $this->Post->createNew($this->request->data);

        if ($newPost) {
            $this->Session->setFlash(__('Your Post has been saved'));
            // for normal webpage submission
            if (empty($this->request->params['ext'])) {
                $this->redirect('/');                   
            } else {        
                // for json response to Flex client 
                $result = $newPost;
                $error = null;
                $id = null;
            }
        } else {
            $this->Session->setFlash(__('Your Post could not be saved. Please, try again.'));
            // for json response for failure to create
            if (!empty($this->request->params['ext'])) {

                    $result = null;
                    $error = 'Your Post could not be saved.';
                    $id = null;

            }

        }
        // this is for json response via Webservice.Webservice
        $this->set(compact('result', 'error', 'id'));

    }

    } 
```

* * *

**[第 3 步。设置您的 Flex 代码，如这里](https://stackoverflow.com/a/10772830/80353)答案中所述。这就是[您](https://stackoverflow.com/a/10914689/80353)在 Flex Actionscript 中检索 JSON 响应的方式。**

* * *

**第 4 步。您应该期望得到一个 json 响应，其中包含 3 个变量 result、error、id 和 cake validationErrors。您可以选择按照插件中的说明将validationErrors 列入黑名单。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T17:41:40.167

听起来您的 Cakephp 应用程序或多或少已正确设置，但稍后会出现。您现在面临的挑战是让您的 Adob​​e Flex 代码将所需的数据发布到 Cakephp 操作 url。我看到您正在使用管理员操作，因此我假设需要用户登录才能访问该操作。我知道 MINISCULE flex 代码，但是你需要在 Flex 中做的是这样的：

1.  使用具有管理员访问权限的用户名/密码组合将 Flex POST 到您的 /user/login 页面，并将响应 cookie 和会话信息保存到变量中。使用这样的东西：

    ```
    var request:URLRequest = new URLRequest(url);
    request.method = "POST";
    request.data = variables; //variables includes username and pw
    try {           
        navigateToURL(request);
    }

    catch (e:Error) {
    // handle error here
    } 
    ```

2.  然后将 Flex POST（在请求标头中包含 cookie）以图像数据作为请求的主体（内容）发送到您的 admin/posts/action。

然后，您在 cakephp 操作中所要做的就是获取 $this->data['body'] 并将其保存到文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T12:51:23.067

在您的网站上，您可以制作一个上传文本和图像等的普通表单。

然后，无论您想从哪里上传图像，您只需发送正确的 POST 信息。

例如，如果您想完全使用来自另一台服务器的服务，您可以使用 CURL 并使用如下代码发送表单数据：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, array('file' => '@/folder/image.jpg'));
curl_setopt($ch, CURLOPT_URL, 'http://website.com/posts/add');
curl_exec($ch);
curl_close($ch); 
```

我不确定 Flex 是否支持 CURL，但它应该有类似的东西。

# android - 实现搜索功能，就像 eBay 为 Android 做的那样

> ID：10749754
> 
> 赞同：0
> 
> 时间：2012-05-25T06:48:13.800
> 
> 标签：android

我想在我的 android 应用程序中实现搜索功能。我在 eBay android 移动应用程序上播种了这个，搜索非常快速和流畅。

你知道这在手机端和服务器端是怎么做的吗？任何与此类似的示例项目？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T11:31:59.820

为此，我在手机端使用了肥皂协议和 XMLPullParser。搜索速度很快。

# node.js - 如何在 Tower.js 中使用一对多关系？

> ID：10749758
> 
> 赞同：2
> 
> 时间：2012-05-25T06:48:27.573
> 
> 标签：node.js, coffeescript, towerjs

因此，我一直在生成不同的脚手架，尝试使用 Tower 的一对多关系功能，但我不知道如何实际链接相关实例以利用关系。例如，我最近的脚手架是这样生成的：

```
tower generate scaffold User email:string firstName:string lastName:string hasMany:posts

tower generate scaffold Post title:string body:text userId:integer belongsTo:user 
```

现在，在 Rails 中，post 模型上的 userId 字段将与共享该 id 的用户形成连接，然后您可以使用它来访问关系。但在这里它似乎没有做任何事情。尝试使用此处的任何代码：[https](https://github.com/viatropos/tower/wiki/1-n) ://github.com/viatropos/tower/wiki/1-n只会给我错误。

在 Tower 控制台中，我能够创建一个示例用户并发布（我也可以通过运行服务器并使用网页上的表单很容易地做到这一点），如下所示：

```
tower> user = new App.User

tower> user.attributes = { email: "bill@bill.com", firstName: "bill", lastName: "billiams" }

tower> post = new App.Post

tower> post.attributes = { title: "A Post", body: "This is a short post.", userId: "4fbf23224503fe670e000006" } 
```

这些实例被持久化到数据库中，但是当我尝试如下代码时：

```
tower> user.get('posts').exists() 
```

我得到“TypeError：无法调用未定义的方法‘存在’”。同样，调用：

```
tower> user.get('posts').create(title: 'Berlin never sleeps.') 
```

产生“TypeError：无法调用未定义的方法'create'”。如果我在模型或控制器中尝试这样的事情，也会发生同样的事情。我真的被困在这里，并且已经尝试了几天来弄清楚它是如何工作的，但我不知道还能去哪里看。如果有人有我可以偷看的示例代码，那就太棒了，否则各种解释也会有所帮助。谢谢。

[编辑：我的工作示例，以及解释步骤的详细自述文件，可以在这里找到：[https](https://github.com/edubkendo/demoApp) ://github.com/edubkendo/demoApp ]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:32:50.467

现在通过方法而不是 getter 访问关系：

```
user.posts().all (error, posts) -> console.log(posts) 
```

该`posts()`方法返回一个`Tower.Model.Relation.HasMany.Scope`对象，该对象是`Tower.Model.Scope`. “范围”允许您对数据库进行查询：

```
user.posts().where(title: /a/).asc('createdAt').all() 
```

仅供参考，以下是建立关系的方式。首先，当您执行以下操作时：

```
class App.User extends Tower.Model
  @hasMany 'posts' 
```

`@hasMany 'posts'`转到[/tower/model/relations.coffee#L50](https://github.com/viatropos/tower/blob/5ab716d7995bc82b216c317e1f0200a3aad3f5a9/src/tower/model/relations.coffee#L50)，它构造一个`Tower.Model.Relation.HasMany`对象，该对象扩展`Tower.Model.Relation`. 该类`Tower.Model.Relation`定义了类上的关联方法/getter `owner`，即`App.User`：[/tower/model/relation.coffee#L85](https://github.com/viatropos/tower/blob/5ab716d7995bc82b216c317e1f0200a3aad3f5a9/src/tower/model/relation.coffee#L85)。

当你这样做时`user.posts()`，它会构造一个新的`Tower.Model.Relation.HasMany.Scope`：[/tower/model/relations.coffee#L85](https://github.com/viatropos/tower/blob/5ab716d7995bc82b216c317e1f0200a3aad3f5a9/src/tower/model/relations.coffee#L85)，它为你提供所有的 finder/persistence 方法，与 do 相同`App.User.asc('createdAt').all()`。关系子类`Tower.Model.Scope`为了自定义关联的查找/创建/更新/删除方法，就是这样。

最后一件事，API 将在接下来的几周内更改，因为我们使用字段方法（即`user.get('email')`）对其进行规范化。很快，它就会变成这样：

```
user.get('posts').all()
user.posts.all() # a getter, if getter/setter support is available in the browser, and it is available in node.js 
```

但是现在，使用这个：

```
user.posts().all (error, posts) -> 
```

希望有帮助。

# javascript - 主干.js 和 el 属性

> ID：10749759
> 
> 赞同：7
> 
> 时间：2012-05-25T06:48:28.467
> 
> 标签：javascript, backbone.js

```
(function ($) {
window.AppView = Backbone.View.extend({
  el: $("body"),
  events: {
    "click #add-friend":  "showPrompt",
  },
  showPrompt: function () {
    var friend_name = prompt("Who is your friend?");
  }
});
var appview = new AppView;
})(jQuery); 
```

1.  谁能解释一下`el`这里有什么。是元素吗？
2.  el 参数是否接受对象，如果可以，我可以将自定义视图对象传递给需要添加按钮或元素的地方...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T07:02:34.917

1.  是的，它是一个 DOM 元素。
2.  不，您不能传递自定义对象。您可以指定一个现有元素，或者从视图的、 和`tagName`属性`className`创建一个。如果不指定元素，则默认为`id``attributes``div`

这一切都在[官方文档](http://documentcloud.github.com/backbone/#View-el)中...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T07:16:23.393

Alladnian 回答了它，但我要补充一点，在使用时`el`您可以使用`$el`哪个是您的视图元素的缓存 jQuery 对象。

因此，您始终可以只传递您希望使用的标签（为了一致性、简洁性和灵活性），然后引用它`$el`以将其用作 jQuery 对象。

```
this.$el.addClass("active"); 
```

# ruby-on-rails-3 - Rails 动态布局选择和编辑

> ID：10749766
> 
> 赞同：2
> 
> 时间：2012-05-25T06:49:04.767
> 
> 标签：ruby-on-rails-3, templates, layout, dynamic

我想在我的管理界面中创建一个可以编辑布局的部分。例如，如果编辑了主布局，我希望这反映在所有页面上。理论上我可以在数据库中拥有每个布局并以这种方式运行，但每次请求视图时都会进行额外的数据库查找。相反，我希望能够直接编辑模板文件并将其保存。我知道这在公共目录之外，那么我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T06:06:22.547

您始终可以使用会话进行临时存储。

您可能会发现这个 gem 很有用：

[动态液体模板](https://github.com/akitaonrails/dynamic_liquid_templates)

基本上，模板是根据控制器实例变量选择的，您始终可以从会话存储中设置该变量以避免数据库查找。

# ruby-on-rails - rails 1.2.3 中的 Json 格式问题

> ID：10749770
> 
> 赞同：1
> 
> 时间：2012-05-25T06:49:44.790
> 
> 标签：ruby-on-rails, json, format

我知道 rails 1.2.3 现在已经过时了，但是我在 rails 1.2.3 中有一个项目要处理。我想以 json 格式输出结果。我在用

渲染 :json => @result.to_json 并返回

它给了我{成功：“假”}

相反，我想要 {"success": "false"}

我不能像现在这样升级。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:11:01.650

尝试添加`ActiveSupport::JSON.unquote_hash_key_identifiers = false`到`environment.rb`.

# android - 如何获得 RXlev sub 、 RxQual sub 和 TA(Timing Advance) 的值

> ID：10749771
> 
> 赞同：1
> 
> 时间：2012-05-25T06:49:46.827
> 
> 标签：android, android-ndk

我正在 Android 中开发一个简单的应用程序。我使用电话管理器服务在（Db）中获取 RSSI 和 RSCP 以及 EcNo 值。

我怎样才能获得 TA（Timing Advance）和 Rxlev Sub 值..通过哪个服务获得值？？？就像（电话管理器）

# java - 从 URL 下载文件

> ID：10749772
> 
> 赞同：1
> 
> 时间：2012-05-25T06:49:52.700
> 
> 标签：java, io, outputstream

我用 Java 编写了一个线程程序来从 URL (https) 下载文件。有时，下载的文件的大小会从其原始大小减小。

如何在不丢失数据的情况下下载文件？

## 代码

```
public class Download extends Observable implements Runnable {
    private static final int MAX_BUFFER_SIZE = 1024;        
    public static final int DOWNLOADING = 0;    
    public static final int PAUSED = 1; 
    public static final int COMPLETE = 2;   
    public static final int CANCELLED = 3;  
    public static final int ERROR = 4;  
    private URL url; 
    private int size; 
    private int downloaded; 
    private int status; 

    public Download(URL url){
        this.url = url;
        size=-1;
        downloaded=0;
        status=DOWNLOADING;
        download();
    }

    public String getURL(){
        return url.toString();
    }   

    public void error(){
        status = ERROR;
        stateChanged();
    }

    private void download(){
        Thread thread = new Thread(this);
        thread.start();
    }

    @Override
    public void run() {     
        RandomAccessFile randomAccessFile = null;
        InputStream inputStream = null;
        try{
            HttpsURLConnection connection = getSSLCertficate(getURL());
            connection.setRequestMethod("GET");
            connection.setRequestProperty("Range","bytes=" + downloaded + "-");
            connection.connect();
            if(connection.getResponseCode()/100 != 2){
                error();
            }
            int contentLength = connection.getContentLength();
            if(contentLength <1){
                error();
            }
            if(size == -1){
                size = contentLength;
                stateChanged();
            }
            randomAccessFile = new RandomAccessFile("/home/user/Desktop/dotproject-2.1.5.tar.gz","rw");         
            randomAccessFile.seek(downloaded);
            inputStream = connection.getInputStream();
            while(status == DOWNLOADING){
                byte buffer[];
                int finalSize=size - downloaded;
                if ( finalSize > MAX_BUFFER_SIZE) {
                    buffer = new byte[MAX_BUFFER_SIZE];
                } else {
                    buffer = new byte[size - downloaded];
                }
                int read = inputStream.read(buffer);
                if(read == -1)
                    break;              

                randomAccessFile.write(buffer, 0, read);                
                downloaded += read;             
                stateChanged();
            }           

        }catch (Exception e) {

        }
    }

    private void stateChanged(){
        setChanged();
        notifyObservers();
    }

    private HttpsURLConnection getSSLCertficate(String urlPath) throws NoSuchAlgorithmException, KeyManagementException, IOException{
        SSLContext ctx = SSLContext.getInstance("TLS");
        ctx.init(new KeyManager[0],new TrustManager[]{new DefaultTrustManager()},new SecureRandom());
        SSLContext.setDefault(ctx);

        URL url = new URL(urlPath);
        HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();
        conn.setHostnameVerifier(new HostnameVerifier() {

            @Override
            public boolean verify(String arg0, SSLSession arg1) {               
                return true;
            }
        });

        return conn;
    }

    public static void main(String[] args) throws MalformedURLException {
        Download d = new Download(new URL("https://192.16.1.130/Source.tar.gz"));
        d.run();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:08:54.750

请在 finally 部分关闭您的输入流（而不是自动刷新所有数据）：

```
try {
    ....
} catch(...) {
    ...
} finally {
    // This will guaranty you get all data:
    inputStream.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:32:15.050

你太复杂了。这是如何复制字节流，任何字节流。

```
int count;
byte[] buffer = new byte[8192]; // you can tune this value
while ((count = in.read(buffer)) > 0)
{
  out.write(buffer, 0, count);
} 
```

您不需要大小为预期输入长度的缓冲区；您甚至不需要知道`HttpURLConnection`.

# ios - 谷歌分析 iOS 编码问题

> ID：10749773
> 
> 赞同：2
> 
> 时间：2012-05-25T06:49:53.127
> 
> 标签：ios, cocoa-touch, nsstring, google-analytics

我正在尝试通过 Google Analytics 在我的应用程序上记录事件。我决定希望以 JSON 格式记录这些事件，以便稍后处理，因此需要记录事件类别，例如

```
{gameplay:'idByName'} 
```

和事件标签，例如：

```
{o:['838','851','793','843'], g:[1], t:'6'} 
```

数据的含义无关紧要，但重要的是，在将这些字符串报告给 Google 之前，我在控制台上看到这些字符串很好，当我在分析仪表板中查看它们时（遗憾的是，24 小时后）我得到了错误的字符串，例如：

```
{gameplay:idByName} 
```

或者

```
{o:[64,*14,)3,800], g:[1], t:!} 
```

现在我无法验证控制台上的哪个标签属于分析仪表板上的哪个标签，但从中可以理解的是，这些字符由于某种原因被损坏了。另外，我正在使用

```
\' 
```

用于在 NSString 中定义单个撇号的格式。任何关于为什么会发生这种情况的想法都将被欣然接受。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T08:35:30.180

很明显，JSON 是可能的（保留对象结构）并且数字数据不会导致问题，因为`g:[1]`报告正确。

所以问题在于你的单引号。谷歌的处理很可能使用单引号，也可能使用反斜杠。

我会首先为您的字符串值尝试双引号，您可能还需要使用反斜杠对其进行转义。尝试混合使用分隔符

```
 {o:[\'838\',\"851\","793",'843'], g:[1], t:'6'} 
```

并查看结果中哪些正确到达。

# sql-server-2008 - 从 SQL Server 2008 中删除大量数据

> ID：10749776
> 
> 赞同：2
> 
> 时间：2012-05-25T06:50:05.813
> 
> 标签：sql-server-2008, sql-delete

我有一个场景，我必须在多个表中进行更新，这些表相互依赖，例如有关系，来自网页的大数据，其中有很多文本框、复选框和下拉列表。

我正在使用 jQuery.ajax 来保存数据。新的数据保存方法写在那里，它正在工作。

现在为了更新目的处理大量数据非常困难。

我有一个想法，我将删除所有数据并将其另存为新行。这是个好主意吗？

我应该在这里做什么记住更新所有这些记录我必须花一个星期来编写一个 Update 方法。

请在这种情况下指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T10:52:52.807

你的问题很模糊，但我认为你是这样说的：

*   我可以将数据插入到我的数据库中
*   更新我的数据看起来很困难，所以我宁愿只删除然后再插入（因为我已经编写了该代码）

我会说这是一个坏主意，原因如下（毫无疑问还有更多）：

*   即使您只是删除，您仍然需要确定要删除的正确行，以正确的顺序从表中删除等。所以无论如何您不太可能节省很多时间
*   您将为应用程序添加不必要的复杂性和额外的维护工作：事务处理、要维护的额外代码、权限更改等。
*   以触​​发器和/或过程的形式向数据库添加服务器端逻辑将变得更加困难，因为 DELETE 并不一定意味着 DELETE，它可能意味着 UPDATE 的开始（我的意思是逻辑上，而不是物理上）和维护以及可能破坏基于 DML 操作或事件的任何代码、跟踪或审计是一个巨大的痛苦
*   数据库将需要进行更多日志记录，因为您已将一项操作分为两部分

也许您有充分的理由想要避免 UPDATE，但是“很难编写”不应该是其中之一（如果我过度简化了您的情况，请道歉）。

如果您准确地解释什么是“困难”，提供一些有关“大量数据”意味着什么的背景，显示一些表结构和代码来说明您的困难等，您可能会得到更有用的答案。

# java - JList/ListModel getElements 不工作

> ID：10749783
> 
> 赞同：0
> 
> 时间：2012-05-25T06:50:39.053
> 
> 标签：java, swing, file-io, jlist, defaultlistmodel

我在获取 ListModel 的所有元素时遇到问题，当我尝试将字符串写入文件时，它们会输出如下内容：

```
[Ljava.lang.String;@79b43f[Ljava.lang.String;@79b43f 
```

那我做错了什么？这是导致悲伤的代码：

```
for (int i = 0; i < listModel.getSize(); i++)
        {
            String[] temp = listModel.getElementAt(i).toString().split("-");
            bw.write(temp[0]);
            bw.write(temp[1]);

            System.out.println(temp[0]);
        } 
```

bw 是一个 bufferedWriter 而 listModel 是我制作的一个自定义列表模型。你可能会注意到我已经拆分了字符串，这是因为我想从每个列表行中提取两个不同的值，我只是完成了 setText(text + "-" + text) 在我的 customCellRenderer 实现中，以便使我能够使用 "-" 字符作为分隔符来提取两个值

```
public class CustomCellRenderer extends JLabel
implements ListCellRenderer
{
    JLabel left, right;
}

public CustomCellRenderer() 
{
    setOpaque(true);
}

@Override
public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus)
{        
    String leftData = ((String[])value)[0];
    String rightData = ((String[])value)[1];

    // simply will not function how i want it to.. GRR
    leftData = String.format("%-50s", leftData);

    setText(leftData + "-   " + rightData);

    if (isSelected)
    {
        setBackground(list.getSelectionBackground());
        setForeground(list.getSelectionForeground());
        setBackground(list.getSelectionBackground());
        setForeground(list.getSelectionForeground());
    }
    else
    {
        setBackground(list.getBackground());
        setForeground(list.getForeground());
        setBackground(list.getBackground());
        setForeground(list.getForeground());
    }

    return this;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:30:58.530

似乎在您的自定义列表模型中， listModel.getElementAt(i) 返回一个数组。如果您需要进一步的帮助，请检查并在此处发布您的自定义列表模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:53:52.853

你发布的不是`ListModel`- 它是`ListCellRenderer`。但这确实强化了您的每个项目`JList`都是 a的想法`String[]`- 例如，您将每个值转换`JList`为 a`String[]`以进行渲染。

```
String leftData = ((String[])value)[0];
String rightData = ((String[])value)[1]; 
```

似乎在`ListModel`填充的位置存在一些混淆。您的帖子/代码表明您认为它正在被填充`ListCellRenderer`- 事实并非如此。它只是在研究如何显示`ListModel`.

因此，可以在“让您感到悲伤的代码”中快速修复：

```
String[] temp = (String[]) listModel.getElementAt(i);
bw.write(temp[0]);
bw.write(temp[1]); 
```

但是，我不会真正鼓励这样做，因为您将拥有未经检查的班级演员表。

相反，我建议您首先考虑为什么要填充`ListModel`with `String[]`？例如，您是否构建`JList`如下：

```
JList myList = new JList(new String[]{"A","B"}, new String[]{"C","D"}); 
```

# memory - dnode内存泄漏？

> ID：10749786
> 
> 赞同：1
> 
> 时间：2012-05-25T06:50:47.997
> 
> 标签：memory, memory-leaks, dnode

我想测试dnode的性能，所以我尝试从客户端发送一个字符串到服务器，服务器用相同的字符串回调客户端。服务器的内存使用量一直在增加，服务器在 691 调用后崩溃。是我的javascript代码错误吗？有什么想法可以解决这个问题吗？非常感谢！

客户：

```
// client:  
var DNode = require('dnode');  
var sys = require('sys');  

DNode(function () {
    this.clientCall = function() {
        sys.puts("... client call!");
    };
}).connect("192.168.1.201", 6060, {reconnect:1000}, function (remote, con) {  
    sys.puts("server Connected!");

    var cnt = 0;

    var str = '';
    for(var i=0; i<1024 * 1024; ++i)
    {
        str += 'a';
    }

    function func2() {
        remote.func1(str, function(str) {
            cnt ++;
            sys.puts("" + cnt + ": " + str.length);
            if(cnt < 1000)
            {
                process.nextTick(function () {
                    func2();
                });
            }
        });
    }

    process.nextTick(function () {
        func2();
    });

});  

sys.puts("Client running!") 
```

服务器：

```
// server:  
var DNode = require('dnode');  
      var sys = require('sys'); 

var server = DNode(ChatServer).listen(6060);

function ChatServer (client, con) {
    var cnt=0;

    this.func1 = function (str, f) {cnt++;
        sys.puts(cnt);
        f(str)
    };
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T05:06:06.247

内存泄漏的bug修复了，太好了：

[https://github.com/substack/dnode/issues/98#issuecomment-6524256](https://github.com/substack/dnode/issues/98#issuecomment-6524256)

# c# - 如何用小数（19,4）声明属性

> ID：10749789
> 
> 赞同：1
> 
> 时间：2012-05-25T06:50:54.407
> 
> 标签：c#, decimal

想用小数（8,4）声明一个小数属性。但是 C# 的默认值是十进制（18,2）。

```
 public class GroupItems
    {

        public GroupItems()
        {

        }

        public string ItemCode { get; set; }
        public string ItemDesc { get; set; }
        public decimal ItemPrice { get; set; }
        public decimal ItemAmount { get; set; }
        public double ItemQty { get; set; }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:54:00.100

你不能直接这样做。您可以使用 set 方法来实现此行为。

```
 private decimal _myProperty;

    public decimal MyProperty
    {
        get { return _myProperty; }
        set {
            if (value <= 99999999) //for 8 
            {
                _myProperty = Math.Round(value,4);
            }
            else
            {
                throw new InvalidOperationException();
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:53:48.820

你可以为你想要实现的事情做这样的事情

```
 decimal _ItemPrice; 
  public decimal ItemPrice 
  { get
    { return Math.Round(_ItemPrice, 2) } 
    set
    { _ItemPrice = value;}
  } 
```

您需要按照上面的代码更改属性的获取和设置。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-25T06:55:55.293

.net 十进制的精度是“28-29 位有效数字”，这对于这种情况来说已经足够了。[关联](http://msdn.microsoft.com/en-us/library/364x0z75%28v=vs.80%29.aspx)

# git - 使用 DVCS 的人的 CVCS

> ID：10749790
> 
> 赞同：1
> 
> 时间：2012-05-25T06:50:56.217
> 
> 标签：git, version-control

我通常在学校项目和其他个人项目中使用 Git。对于实习，我们必须使用非常集中的内部源代码控制系统（这似乎与我一直在阅读的颠覆工作流程非常相似）。但是，由于从未使用过集中式 VCS，我真的不太了解最好的工作流程。使用集中式 VCS 将如何影响我的工作流程以及使用它的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:55:55.103

这会更慢（因为所有操作都是远程的），并且您将提交的所有内容都将立即可供所有人使用（一旦更新），但您可能不会发现这么多问题。

您可能不得不放弃使用分支的想法，因此请准备好使用配置或小技巧（环境变量）。尽量不要重命名或移动文件，因为这通常成本高昂并且会破坏旧版本控制系统的历史。

不要害怕：它更慢，功能更弱，但也更简单、更容易。如果你愿意，你可以在本地使用 git，因为你只需要从提交中排除“.git”目录（如果可能的话，只在你的`master`分支中提交）。

只需检查它不是一个超级旧的系统，您必须在其中集中锁定文件（获取所有权），然后才能更改它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T20:58:03.757

只需在本地使用 git，并在大型 CM 系统启动时需要的 Big Push 合并更改。如果需要，假装它是一种有趣的 zip 文件技术；-)

大多数大公司的集中式 CM 系统（具有混合工程学科）仍然基于泰坦尼克号时代的绘图办公室实践，当时主图纸是在高岭土和亚麻布上，并用印度墨水绘制的。必须很好地保护它们免受任何损坏的可能性 - 没有图纸，没有船，因此您可能会看到所有过程。

DVCS（例如 git）是对消除这种担忧的一种回应——复制 master 现在在软件社区中是一项零成本活动，特别是因为 sha1 提供了轻松验证您是否拥有正确副本的方法。大型系统甚至需要几十年的时间才能稍微放松对权力杠杆的掌握......

# jquery - 页面开始警报出现在上一个屏幕上而不是下一个屏幕上

> ID：10749792
> 
> 赞同：0
> 
> 时间：2012-05-25T06:51:07.917
> 
> 标签：jquery, jsf-2, web

我正在使用 JSF 2.0 制作一个在线应用程序，其中包含按特定顺序排列的多个屏幕流。

现在我想在屏幕完成加载后在第三个屏幕上显示一个警报（通过在第二个屏幕上按下一步）。我在屏幕 3 上使用以下 jQuery

```
$(document).ready(function() {

    //some other code         

    var isSaved = $('input[id$="isSaved"]').val();
        if(isSaved == 'false'){
            alert($('input[id$="coverageSelectedOnBasisOfItems"]').val());
        }   
} 
```

现在的问题是警报出现在第二个屏幕上。在我单击确定后，出现第三个屏幕。

我正在从屏幕 2 上的提交按钮上的函数返回一个字符串，其中包含重定向到屏幕 3 的地址。

知道为什么会发生这种情况以及解决此问题的任何方法吗？

我也在`windows.load`函数中尝试了上面的代码......

感谢任何形式的帮助。

# android - Android 的令牌模式

> ID：10749795
> 
> 赞同：1
> 
> 时间：2012-05-25T06:51:30.723
> 
> 标签：android, multithreading, asynchronous, android-asynctask, token

我有一个 Android 项目，在其中我从服务器获取令牌进行身份验证，并将其用于对服务器的进一步查询。令牌大约在 10 分钟后过期，所以我必须获取一个新令牌。我现在的模式是这样的：

**1-**在用户首次启动应用程序时获取令牌

**2-**使用“请稍候”对话框阻止用户输入，这样他就不会尝试使用来自其他活动的空令牌发送查询

**3-**保存令牌和时间戳，停止阻止用户输入

**4-**定期检查`onCreate()`活动方法中的时间戳

**5-**必要时更新。

我的问题是这个；如果用户打开一个活动并且令牌已过期，我的应用程序会再次阻止用户输入并尝试获取令牌。但是，在后台，应用程序的正常逻辑/流程继续，并尝试使用旧令牌或空令牌向服务器发送查询。

所以我想阻止这个查询任务 - 这`AsyncTask`类似于令牌获取 - 并在令牌获取完成后启动它。我如何使用这种模式，这是一个正确的模式吗？

**让一个线程等待另一个线程完成？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:19:14.707

我会考虑使用带有自定义身份验证器的 Android 帐户管理器来处理令牌。SampleSyncAdapter向您[展示](http://developer.android.com/resources/samples/SampleSyncAdapter/index.html)了如何进行。使用[AccountManager](http://developer.android.com/reference/android/accounts/AccountManager.html)的 getAuthToken 获取当前令牌。在身份验证器中，您可以包含在超时时使令牌无效的逻辑，这将导致身份验证器在下一次请求令牌时联系服务器。

但我想你的项目实现它的开销可能太大了。对于您当前的设置，我看到了两种方法：

1.  也许您可以尝试简单地[取消](http://developer.android.com/reference/android/os/AsyncTask.html#cancel%28boolean%29)当前查询并在检索到新令牌后触发新查询？
2.  使用[Java 同步原语](http://docs.oracle.com/javase/tutorial/essential/concurrency/)进行阻塞。例如，创建一个“锁定”对象并在异步任务和更新令牌的地方使用它：

    ```
    protected Result doInBackground(Params... params) {
        //
        // the request and other stuff that does not require the token.

        synchronized(lock) {
            //
            // communicate with the server.
        }
    } 
    ```

# android - 默认打开地图

> ID：10749798
> 
> 赞同：0
> 
> 时间：2012-05-25T06:51:46.747
> 
> 标签：android, google-maps, android-intent

我有一个基于谷歌地图的应用程序，我正在使用意图打开路线规划器。但是，当应用程序启动时，它会向用户提示带有默认浏览器和地图选项的对话框。但是，我希望当应用程序启动时，它应该默认在地图中打开。下面我发布我的代码。

```
public class RoutePlannerActivity extends MapActivity {
public static final String TAG = "Route planner";
MapView mapView;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mapView = (MapView)findViewById(R.id.mapView);
    mapView.setBuiltInZoomControls(true);
    Log.d(TAG, "onCreate");
    Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
            Uri.parse("http://maps.google.com/maps?saddr=28.6667,77.2167&daddr=28.5700,77.3200")); 
    startActivity(intent);
}//onCreate

protected boolean isRouteDisplayed() {
    Log.d(TAG, "Route displayed");
    return true;
}//isRouteDisplayed
}//class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:58:39.800

如果你想摆脱对话框，你可以给意图一个关于你想使用哪个包的提示。在 startActivity() 之前添加：
`intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");`
Credits to [this previous post](https://stackoverflow.com/questions/2662531/launching-google-maps-directions-via-an-intent-on-android)。我建议在发布之前搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:59:42.263

试试这个代码摆脱对话框..

```
Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse("http://maps.google.com/maps?" + "saddr=23.0286423,72.5580967&daddr=23.0559485,72.5423041"));
        intent.setClassName("com.google.android.apps.maps","com.google.android.maps.MapsActivity");
        startActivity(intent); 
```

# iphone - 如何在 iPhone 画廊的邮件中附加图像？

> ID：10749799
> 
> 赞同：0
> 
> 时间：2012-05-25T06:51:48.803
> 
> 标签：iphone, ios, ipad

我可以从 iPhone 库中检索图像并将其显示在 imageView 中，但我无法将其附加到邮件中......它只显示一个？邮件中的图片....任何人都可以帮我解决这个问题...谢谢

[http://imageshack.us/photo/my-images/826/screenshot20120525at124.png/](http://imageshack.us/photo/my-images/826/screenshot20120525at124.png/)

这是我在发送邮件时收到的屏幕截图....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:55:50.393

```
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
picker.mailComposeDelegate = self; 
[picker setSubject:@"My Image Is Attached"];

// other mail settings here

//Attachment imageData1 is NSData of your image.
[picker addAttachmentData:imageData1 mimeType:@"image/png" fileName:@"foo.png"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:57:41.690

请尝试以下代码：

```
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
picker.mailComposeDelegate = self;

[picker setSubject:@"Hello"];

// Set up recipients
NSArray *toRecipients = [NSArray arrayWithObject:@"first@example.com"]; 
NSArray *ccRecipients = [NSArray arrayWithObjects:@"second@example.com", @"third@example.com", nil]; 
NSArray *bccRecipients = [NSArray arrayWithObject:@"fourth@example.com"]; 

[picker setToRecipients:toRecipients];
[picker setCcRecipients:ccRecipients];  
[picker setBccRecipients:bccRecipients];

// Attach an image to the email
NSString *path = [[NSBundle mainBundle] pathForResource:@"rainy" ofType:@"png"];
NSData *myData = [NSData dataWithContentsOfFile:path];
[picker addAttachmentData:myData mimeType:@"image/png" fileName:@"rainy"];

// Fill out the email body text
NSString *emailBody = @"It is raining";
[picker setMessageBody:emailBody isHTML:NO];

[self presentModalViewController:picker animated:YES];
[picker release]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T06:57:48.053

你应该有这样的东西：

```
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
[picker setSubject:....]
... 
```

你所要做的就是：

```
NSData *data = UIImagePNGRepresentation(image);

[picker addAttachmentData:data mimeType:@"image/png" fileName:@"TheNameYouWant"]; 
```

`image`类型在哪里`UIImage`。

更新：

不能只是延迟的问题吗？您发布的屏幕截图正是我在加载图像时得到的图像。您是否尝试过等待几秒钟...？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T07:42:30.293

首先在您的项目中导入名为 - MessageUI.framework 的框架。

然后导入

```
#import <MessageUI/MFMailComposeViewController.h> 
```

在您的 viewcontroller.h 部分。现在添加委托

```
<MFMailComposeViewControllerDelegate> 
```

现在您可以使用邮件编辑器视图了。

```
-(IBAction)showMail:(id)sender //this is your UIButton action
{
    MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
    picker.mailComposeDelegate = self; 
    [picker setSubject:@"write your subject here"];

    UIImage *image = [UIImage imageNamed:@"anyImage.png"]; 

    //convert UIImage to NSData to add it as attachment

    NSData *imageData = UIImagePNGRepresentation(image);

    //this is how to attach any data in mail, remember mimeType will be different
    //for other data type attachment.

   [picker addAttachmentData:imageData mimeType:@"image/png" fileName:@"image.png"];

   //showing MFMailComposerView here
   [self presentModalViewController:picker animated:YES]; 
```

}

完成工作后，您可以关闭 MFMailComposerView，如下所示：-

```
-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error
{
    if(result == MFMailComposeResultCancelled)
        NSLog(@"Mail has cancelled");
    if(result == MFMailComposeResultSaved)
        NSLog(@"Mail has saved");

    [self dismissModalViewControllerAnimated:YES];
} 
```

希望这会有所帮助。

谢谢你！

# c# - 如何在我们的 .aspx 页面中显示 Html 页面？

> ID：10749801
> 
> 赞同：-1
> 
> 时间：2012-05-25T06:51:52.350
> 
> 标签：c#, asp.net

我写了这段代码

```
 public partial class monograph : System.Web.UI.Page
    {
        public string path = "file:///D:/CD IP/Html/Monographs/";
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void LinkButton1_Click(object sender, EventArgs e)
        {
            path = path + Label1.Text + ".htm";
            Response.Redirect(path);
        }
    } 
```

如何从上面的代码打开html页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:54:28.817

为什么要使用“file:///D:/CD IP/Html/Monographs/”来打开 HTML 页面。如果您的 aspx 和 html 页面位于同一文件夹中，则您必须使用相对路径或只提供 HTML 文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:56:18.897

使用相对网址。在您的应用程序或网站中托管您的 html。

像这样的东西

```
Response.Redirect("~/Html/Monographs/"+fileName+".htm"); 
```

文件：对用户 pc 进行假设

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:57:20.377

如果您想在 asp.net 中显示您的 html 文件，请在项目文件夹中使用任何名称创建文件夹并放置您的 hmtl 文件。例如

假设我创建了 palinData 文件夹并在其中复制了 1.html。你可以给一个链接

```
lnk.HRef=Server.Mappath("~") + "/plainData/1.html" 
```

# java - ValidatorException：在 java 中找不到受信任的证书

> ID：10749803
> 
> 赞同：4
> 
> 时间：2012-05-25T06:52:03.627
> 
> 标签：java

在使用 p12 文件从 Java 服务器尝试 Apple 推送通知时，出现错误。我的 p12 文件或 Java 代码有问题吗？

```
run:
@:theodore nonis
C=IN, CN=Apple Development IOS Push Services: com.ducont.myPushApp, UID=com.ducont.myPushApp
theodore nonis
ok
init Stores...
javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: No trusted certificate found
        at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1591)
        at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:187)
        at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:181)
        at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:975)
        at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:123)
        at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:516)
        at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:454)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:884)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1096)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1123)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1107)
        at javatest.Main.APNSender(Main.java:88)
        at javatest.Main.main(Main.java:114)
Caused by: sun.security.validator.ValidatorException: No trusted certificate found
        at sun.security.validator.SimpleValidator.buildTrustedChain(SimpleValidator.java:304)
        at sun.security.validator.SimpleValidator.engineValidate(SimpleValidator.java:107)
        at sun.security.validator.Validator.validate(Validator.java:218)
        at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:126)
        at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:209)
        at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:249)
        at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:954)
        ... 9 more
BUILD SUCCESSFUL (total time: 2 seconds) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-10T13:16:09.317

这可能是由 java 1.9 引起的，切换到 java 1.8 可能会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-17T05:30:30.460

在 Windows 上尝试以下步骤：

从这里下载 jars [https://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html](https://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html)

将 local_policy.jar 和 US_export_policy.jar 复制到 $JAVA_HOME/jre/lib/security（注意：这些 jars 已经存在，因此您必须覆盖它们）。

然后重新启动您的应用程序以消除此异常。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-25T07:03:27.057

这是证书问题。可以有两种解决方案：

1 使用可信证书

2 禁用证书检查。对于普通的 java 代码，它可以这样做（[阅读这里](http://www.rgagnon.com/javadetails/java-fix-certificate-problem-in-HTTPS.html)）。

在 p12 中应该有一些设置 TrustManages 的可能性。

# ruby-on-rails - 使用 self 获取模型中的当前对象，rails

> ID：10749806
> 
> 赞同：1
> 
> 时间：2012-05-25T06:52:21.303
> 
> 标签：ruby-on-rails, model, self

我想知道是否可以在模型中获取当前对象？即我有一个

最喜欢的关系模型

```
belongs_to :user
belongs_to :lesson 
```

我的课程模型是

```
has_many :favorite_relationships
has_many :users, :through => :favorite_relationships 
```

我也与我的用户模型有关联（不重要）

我一直在尝试在我的 FavoriteRelationship 中执行该方法

```
def lesson_owner
    self.lesson.user
end 
```

在 FavoriteRelationship 中检索属于该课程的用户，但它似乎不起作用。它什么也不返回，即使我这样做了

```
self.lesson.inspect 
```

即使是在 FavoriteRelationship 模型中检索的课程也不起作用。有人可以阐明如何做到这一点吗？

我本质上想要与 FavoriteRelationship 模型相关的课程。在我的 FavoriteRelationship 表中，我有属性，

```
:id, :user_id, :lesson_id. 
```

并且 :lesson_id 应该是我试图获取的值，所以我可以在之后获得用户

感谢您的帮助和时间

@更新。

所以当用户喜欢别人的课程时，我基本上会尝试授予“徽章”。我有..

```
def create
    @lesson = Lesson.find(params[:favorite_relationship][:lesson_id])
    puts 'before favorite'
    current_user.favorite!(@lesson) 
    puts 'after favorite'
    @favorite_relationship = @lesson.user    
    respond_to do |format|
      format.html { redirect_to @lesson }
      format.js
    end
end 
```

我的徽章授予来自...

```
 grant_on 'favorite_relationships#create', :badge => 'got-favorited',
         :to => :lesson_owner 
```

它接受一个返回我授予谁的方法，这就是我创建该方法的原因。

当我做

```
puts self.lesson.inspect 
```

什么都没有出现，没有 nil 或任何东西。我知道我最喜欢的作品，它在数据库中创建了关系。我唯一能想到的事情是……它试图在建立关系之前授予徽章。嗯...我放了打印语句，它似乎在 create_favorite_relationship 被调用并返回后进入了课程所有者。也许它还没有在数据库中创建它？像一毫秒太快？收藏是异步发生的。

我需要建立更多的协会吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:50:57.627

那么，这会`self.lesson.inspect`返回什么？`nil`还是`NoMethodError`？向我们展示您的迁移并检查数据库中的实际内容。这可能是您的关系只是缺少课程的链接（`lesson_id`为 NULL）...

# internet-explorer-8 - 软连字符在 IE8 中不起作用

> ID：10749814
> 
> 赞同：0
> 
> 时间：2012-05-25T06:52:44.343
> 
> 标签：internet-explorer-8, html

软连字符 ( `&shy;`) 在 IE8 中不起作用。
我正在使用它将 div 中的长单词分成多行。
它适用于IE7，IE9和其他浏览器，有什么补救措施吗？

尝试 jsFiddle.net 示例：

[http://jsfiddle.net/puv75/](http://jsfiddle.net/puv75/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:32:57.867

幸运的是，这似乎是 IE 9 模拟 IE 8 的方式中的一个错误，而不是真正的 IE 8。请参阅[http://code.google.com/p/hyphenator/issues/detail?id=153](http://code.google.com/p/hyphenator/issues/detail?id=153)

# iphone - 如何设置日期选择器的 GMT，日期选择器显示错误的时间

> ID：10749815
> 
> 赞同：0
> 
> 时间：2012-05-25T06:52:55.763
> 
> 标签：iphone, uidatepicker

当我设置 time Zome 时，locale time zone 仍然 datepicker 返回错误的时间。

```
datepicker.timeZone = [NSTimeZone localTimeZone]; 
```

它应该显示为 2012-04-20 12:20 但它显示的是 2012-04-20 12:02:42 + 0000

如何将印度的时区设置为 datepicker？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:29:46.277

我认为你应该设置你的 dateformatter`Locale`如下：

```
-(void)localDate:(NSDate*)date
{
    NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease]; 
    [dateFormatter setDateFormat:@"yyyy-MM-dd"]; // set your formatter how you want
    NSDate * t = [dateFormatter dateFromString:[date description]];

    //[dateFormatter setDateStyle:NSDateFormatterMediumStyle]; //you can set date format style
    NSLocale *usLocale = [[[NSLocale alloc] initWithLocaleIdentifier:@"yourLocalidentifier"] autorelease]; 
    //you can reach your local identifier from here: [NSLocale availableLocaleIdentifiers]

    [dateFormatter setLocale:usLocale];
    NSLog(@"%@",[dateFormatter stringFromDate:t]); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-19T10:13:14.017

对于日期选择器中的印度时区

**目标 C**

```
NSTimeInterval seconds = 5 * 60 * 60 + 30;
datePicker.timeZone = [NSTimeZone timeZoneForSecondsFromGMT:seconds]; // Like GMT+5:30 
```

**在斯威夫特 3**

```
let seconds: TimeInterval = 5*60*60 + 30
datePicker.timeZone = TimeZone(secondsFromGMT: Int(seconds))  // Like GMT+5:30 
```

# java - 哪些 SWING 元素可以添加到 ButtonGroup 中才有意义？

> ID：10749818
> 
> 赞同：3
> 
> 时间：2012-05-25T06:52:59.617
> 
> 标签：java, swing, buttongroup

虽然，每个`AbstractButton`都可以添加到`ButtonGroup`（根据[Java API](http://docs.oracle.com/javase/6/docs/api/javax/swing/ButtonGroup.html)），但我想问一下，添加哪些元素真正有意义。

以下两个肯定可以：

*   `JRadioButton`
*   `JRadioButtonMenuItem`

我想知道：

*   `JCheckBox`<- 与 一样`JRadioButton`，继承自`JToggleButton`
*   任何其他`AbstractButton`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:21:23.377

`ButtonGroup`用于为一组按钮创建多重排除范围。使用相同的对象创建一组按钮`ButtonGroup`意味着“打开”其中一个按钮会关闭组中的所有其他按钮。

A`ButtonGroup`可以与继承自 的任何对象集一起使用`AbstractButton`。通常 a`ButtonGroup`包含`JRadioButton`、 JRadioButtonMenuItem 或的实例`JToggleButton`。将`JButton`or的实例`JMenuItem`放在 a 中`ButtonGroup`并且`JButton`不`JMenuItem`实现选定状态是没有意义的。

最初，未选择组中的所有按钮。选择任何按钮后，始终会在组中选择一个按钮。无法以编程方式将按钮设置为“关闭”，以清除按钮组。要呈现“未选择”的外观，`JRadioButton`请在组中添加一个不可见的，然后以编程方式选择该按钮以关闭所有显示的`JRadioButtons`. 例如，可以连线带有标签“none”的普通按钮来选择不可见的`JRadioButton`.

有关使用的示例和更多信息，`ButtonGroups` [请参阅 The Java Tutorial 中的 How to Use`JRadioButtons`](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html#radiobutton)部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T07:34:46.710

除了上面的答案之外-还有一种方法可以创建 ButtonGroup 以允许清除组中的选择（不会选择任何组按钮时的状态）而无需任何其他代码-只需扩展 ButtonGroup 并覆盖 setSelected 方法这样：

```
public void setSelected ( ButtonModel model, boolean selected )
{
    if ( selected || !unselectable )
    {
        super.setSelected ( model, selected );
    }
    else
    {
        clearSelection ();
    }
} 
```

这将允许按钮被取消选中。

# css - 很难在包含背景图像的网页上将文本（水平）居中

> ID：10749823
> 
> 赞同：0
> 
> 时间：2012-05-25T06:53:21.673
> 
> 标签：css, html

我花了很多时间搜索，测试（使用许多很好的例子）如何在页面上完成居中测试（水平），但我找不到问题的根本原因。要么背景图像不会显示，但在所有情况下，文本都会在左上角紧贴页面左侧（很可能是由于使用 .）。如果图像显示，文本将显示在图像下方的左下角（即使使用绝对位置。）我尝试的最新代码示例如下：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>

  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  <title>Arizona Sunset</title>

  <style type="text/css"

.image {
    position:relative;
 }

.text {
left: 0;
position:absolute;
text-align:center;
top: 315px;
width: 100%
 }

 </style>

 </head>
 <body>

 <div class="image">
<img src="bg-image5.jpg" width="100%" height="2540"/>
<div class="text">
   Yadda, Yadda, Yadda
</div>
 </div>
  </body> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:59:35.103

```
<div class="image">
<img ...>
</div>

<div class="text>
text
</div>

body {
width: 100%;
}

.image {
position: relative;
}

.text {
margin: 0 auto;
text-align: center;
...
} 
```

我通常通过让浏览器自动执行`margin`设置为中心`auto`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T10:06:10.243

这将是使用背景图像的某种标准方式。将图像放入其中`body`，文本可以在 a 内`div`（这里`div's` `id`是“内容”）。试试下面的代码。删除评论，看看会发生什么。（当然`background-image`在`body`删除评论时评论`content`）

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>

<style type="text/css">
body{
background-image:url('bg-image5.jpg');
//background-repeat: no-repeat; //Image repeats automatically in the whole body of the page.
}

#content {
  //background-image:url('reminder2.jpg'); //If used here, image shows up only where there is text. Use minimum height or something else to include the whole image if necessary.
  text-align:center;
  //min-height:1000px;
}
</style>
</head>

<body>
  <div id="content">
  <p>Text, text, text, text, text, text, text, text, text</p>
  </div>
</body> 
```

几个链接：

*   [http://www.quackit.com/html/codes/html_background_image_codes.cfm](http://www.quackit.com/html/codes/html_background_image_codes.cfm)
*   [http://www.echocho.com/htmlbackgrounds02.htm](http://www.echoecho.com/htmlbackgrounds02.htm)

背景图像本身不应该是重要的。它增加了网站的视觉效果，但它不是应该整体显示的重要图像（它在背景上，它不是图像库中的图像等）。如果您想在不同页面`sections`或`div's`单个页面上使用多个图像，则背景图像的正常可重复性和功能可能是一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:00:29.190

放在

```
 text-align:center; 
```

在 .image 类中

并使用 css

```
background-image:url('paper.gif'); 
```

将背景放入 .image div

# java - ADF如何将列名转换为属性名称

> ID：10749824
> 
> 赞同：0
> 
> 时间：2012-05-25T06:53:22.500
> 
> 标签：java, oracle-adf

我是 ADF 的新手，现在我得到了 table 的列 Name 就像 USER_NAME 一样，在 ADF EO VO 中，属性名称将转换为另一种模式，如 UserName，但属性名称可以更改为用户想要的任何名称，所以是有什么方法可以根据列名获取VO的属性名吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:02:27.267

您转到 VO.xml 属性并设置提示。导航到概述部分并选择属性并转到编辑。设置一个提示，在这种情况下将是标签。在 ui 上，您可以通过以下方式访问它：

```
label=#{bindings.sampleAttribute.hints.label} 
```

# python - Python ABC 似乎允许不完整的实现

> ID：10749825
> 
> 赞同：1
> 
> 时间：2012-05-25T06:53:26.887
> 
> 标签：python, abstract-class, abc

我正在尝试创建基类并强制所有子类实现它的接口。我`abc`为此目的使用该模块。

这是基类：

```
class PluginBase:
    __metaclass = abc.ABCMeta
    @abc.abstractmethod
    def strrep(self):
            return
    @abc.abstractmethod
    def idle(self):
            print 'PluginBase: doing nothing here'
            pass
    @abc.abstractmethod
    def say(self, word):
            print 'PluginBase: saying a word ''', word, '\''
            return 
```

这是孩子：

```
class ConcretePlugin(PluginBase):
    def __init__(self, val):
            print 'initialising ConcretePlugin with value of %d' % val
            self.val = val
    def strrep(self):
            print 'ConcretePlugin = %d' % self.val
            return
    #'idle' method implementation is missing
    def say(self): # missing argument here; saying our own word =)
            print 'ConcretePlugin: this is my word'
            return 
```

本次测试：

```
child = ConcretePlugin(307)
child.strrep()
child.idle()
child.say() 
```

产生以下结果：

```
initialising ConcretePlugin with value of 307
ConcretePlugin = 307
PluginBase: doing nothing here
ConcretePlugin: this is my word 
```

不要抱怨不完整的实施！

所以我的问题是抽象基类是否不是真正抽象的。如果它们不是，那么是否有某种方法可以进行健壮的打字？

**注意：**我已经命名了示例类`PluginBase`并`CompletePlugin`表明我需要确保客户端类实现正确的接口。

我试过派生`PluginBase`自`object`，但这没有区别。我正在使用 Python 2.7.1

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:55:40.007

更改`__metaclass`为`__metaclass__`。否则它只是一个普通的隐藏属性。

```
>>> ConcretePlugin(123)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: Can't instantiate abstract class ConcretePlugin with abstract methods idle 
```

# c# - 从 web.config 检索用户名和密码

> ID：10749826
> 
> 赞同：0
> 
> 时间：2012-05-25T06:53:29.627
> 
> 标签：c#, session

我正在使用 c#。

我已经像这样在 web.config 中添加了用户名和密码。

```
<add key="userName" value="MyName"/>

<add key="userPassword" value="MyPassword"/> 
```

现在我想检索这些值。意味着正在使用两个文本框输入用户名和密码。测试它们的代码是，

```
if(textBox1.text=="some code" and textbox2.text=="some code")
{
response.redirect("login.aspx");
} 
```

我应该在“一些代码”的地方写什么来从 web.config 中检索用户名和密码，以便我可以将它们与用户条目进行比较？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:59:57.770

你可以使用 -->`System.Configuration.ConfigurationManager.AppSettings["MyName/MyPassword"]`

但是，将 pwd 放在配置文件中是有风险的，为什么不将其放入 db 表中并在检查之前对其进行查询呢？

# delphi - 从 adoquery 获取数据到 stringlist

> ID：10749830
> 
> 赞同：3
> 
> 时间：2012-05-25T06:53:44.810
> 
> 标签：delphi

好的，我有一个应该返回所有问题编号的查询。我想要的是获取返回的每个问题编号并将其添加到字符串列表中。

```
ADOQuery1.SQL.Clear;
SQLQuery := 'SELECT issue FROM Comics WHERE SeriesName = '+Quotedstr(SeriesName)+' AND Volume = '+quotedstr(VolumeNumber);

ADOQuery1.SQL.Add(SQLQuery);
ADOQuery1.Active := true; 
```

所以一旦我得到这个，将结果放入字符串列表的最佳方法是什么。我尝试过使用`ADOQuery1.GetFieldList(issuelist,'issue');`，但不确定这是否真的很重要，或者我是否做得对`tlist`。`tstringlist`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T07:22:03.287

您不想使用 GetFieldList。这将返回数据集中字段对象的列表。你需要做这样的事情：

```
ADOQuery1.Open;
ADOQuery1.First;
while not ADOQuery1.Eof do
begin
  issuelist.Add(ADOQuery1.FieldByName('issue').AsString);
  ADOQuery1.Next;
end; 
```

# winapi - GetDeviceCaps 的 HORZSIZE

> ID：10749831
> 
> 赞同：3
> 
> 时间：2012-05-25T06:53:48.227
> 
> 标签：winapi, gdi

我正在阅读 Programming Windows 5th edition。这本书告诉我 HORZSIZE=25.4*HORZRES/LOGPIXELSX。下图是我的结果：

![在此处输入图像描述](../Images/d8ec929f52867a78f4214b6d79ba4874.png)

如果用公式计算HORZSIZE，应该是25.4*1280/96=338.6666....

这怎么可能发生？

我期待着你的回答！

顺便说一句：我正在使用笔记本电脑，Geforce 8400M GS，15.4 英寸。分辨率 1280*800，Windows 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:34:27.337

很多时候，HORZSIZE 和 LOGPIXELSX 指标对计算机显示器无效。这是因为显示器驱动程序提供了有关显示器宽度的错误信息。同时，这些设置对打印机非常有效。

顺便说一句，在您的公式中 HORZRES/LOGPIXELSX 以英寸为单位为您提供监视器的宽度，乘以 25.4 将英寸转换为毫米。

您可以通过测量显示器宽度（在标尺的帮助下）并计算正确的 DPI 来解决该问题。

# android - Android - setSoTimeout 不起作用

> ID：10749835
> 
> 赞同：1
> 
> 时间：2012-05-25T06:54:15.480
> 
> 标签：android, android-asynctask, httpconnection, socket-timeout-exception

所以我遇到了一个不工作的套接字超时。我遵循了现有帖子给出的所有说明，但它仍然无法正常工作（我从未收到套接字超时异常）。这是我的代码：

```
AsyncTask<String, Void, String> task = new AsyncTask<String, Void, String>() {
   @Override
   protected String doInBackground(String... params) {
      String location = params[0];

      try {
         HttpGet httpGet = new HttpGet(location);
         HttpParams httpParameters = new BasicHttpParams();

         // Set the timeout in milliseconds until a connection is established.
         // The default value is zero, that means the timeout is not used.
         int timeoutConnection = 0;
         HttpConnectionParams.setConnectionTimeout(httpParameters,
               timeoutConnection);

         // Set the default socket timeout (SO_TIMEOUT)
         // in milliseconds which is the timeout for waiting for data.
         int timeoutSocket = 2000;
         HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

         DefaultHttpClient client = new DefaultHttpClient(httpParameters);
         Log.d(this.getClass().getSimpleName(), "STARTING CLIENT!!! ");
         HttpResponse response = client.execute(httpGet);
         Log.d(this.getClass().getSimpleName(), "CLIENT CANCELLED!!! ");

         if (statusLine.getStatusCode() == HttpStatus.SC_OK) {
            ByteArrayOutputStream out = new ByteArrayOutputStream();
            response.getEntity().writeTo(out);
            return new Scanner(out.toString()).useDelimiter("\\A").next();
         } else {
            return "";
         }
      } catch (IOException e) {
         e.printStackTrace();
         return null;
      } catch (URISyntaxException e) {
         e.printStackTrace();
         return null;
      }
   }

   @Override
   protected void onPostExecute(String result) {
      try {
         // doStuff
      } catch (Exception e) {
         e.printStackTrace();
      }
   }
};
task.execute(location); 
```

所以我应该在两秒后得到一个套接字超时异常，但客户端只是忽略了这一点。有什么帮助吗？

提前致谢

* * *

所以这里是所有的代码：

```
public void fetch(String location) {    
    AsyncTask<String, Void, String> task = new AsyncTask<String, Void, String>() {
        @Override
        protected String doInBackground(String... params) {
            String location = params[0];

            try {
                HttpGet httpGet = new HttpGet(location);
                HttpParams httpParameters = new BasicHttpParams();
                // Set the timeout in milliseconds until a connection is established.
                // The default value is zero, that means the timeout is not used. 
                int timeoutConnection = 0;
                HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
                // Set the default socket timeout (SO_TIMEOUT) 
                // in milliseconds which is the timeout for waiting for data.
                int timeoutSocket = 2000;
                HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

                DefaultHttpClient client = new DefaultHttpClient(httpParameters);
                Log.d(this.getClass().getSimpleName(), "STARTING CLIENT!!! ");
                HttpResponse response = client.execute(httpGet);
                Log.d(this.getClass().getSimpleName(), "CLIENT CANCELLED!!! ");

                if (statusLine.getStatusCode() == HttpStatus.SC_OK) {
                    ByteArrayOutputStream out = new ByteArrayOutputStream();
                    response.getEntity().writeTo(out);
                    return new Scanner(out.toString()).useDelimiter("\\A").next();
                } else {
                    return "";
                }
            } catch (IOException e) {
                e.printStackTrace();
                return null;
            } catch (URISyntaxException e) {
                e.printStackTrace();
                return null;
            }
        }

        @Override
        protected void onPostExecute(String result) {
            try {
                //doStuff
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    };
    task.execute(location);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:19:15.903

不久前，我遇到了类似的问题。我做了一些实验，发现当我在模拟器中运行我的应用程序时，超时不起作用，而当我在真实设备上运行它时，它确实起作用了。我用`DefaultHttpClient`,`HttpUrlConnection`和对其进行了测试`AndroidHttpClient`，所有三个都显示了相同的结果；在模拟器中大约 20 秒后出现 IOexception (UnknownHostException)，无论设置的超时如何。

谷歌搜索显示其他人也报告了超时问题：

*   [http://code.google.com/p/android/issues/detail?id=2409](http://code.google.com/p/android/issues/detail?id=2409)
*   [Android上的Http连接超时不起作用](https://stackoverflow.com/questions/3075506/http-connection-timeout-on-android-not-working)
*   [http连接超时问题](https://stackoverflow.com/questions/4577804/http-connection-timeout-issues)
*   [使用 DefaultHTTPClient 发出 HTTPGet 请求时的套接字超时](https://stackoverflow.com/questions/5254264/socket-timeout-when-making-httpget-requests-using-defaulthttpclient)

建议的解决方案都不适合我，所以我想唯一可靠的解决方案是自己管理超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-17T13:23:50.010

请参阅：[https ://stackoverflow.com/a/20031077/2609238](https://stackoverflow.com/a/20031077/2609238)

问题可能出在 Apache HTTP 客户端中。请参阅 HTTPCLIENT-1098。在 4.1.2 中修复。

超时异常尝试反转 DNS IP，以进行日志记录。这需要额外的时间才能真正触发异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:04:51.353

在我的示例中，设置了两个超时。连接超时抛出“java.net.SocketTimeoutException: Socket is not connected”和套接字超时“java.net.SocketTimeoutException: The operation timed out”。

```
HttpGet httpGet = new HttpGet(url);
HttpParams httpParameters = new BasicHttpParams();
// Set the timeout in milliseconds until a connection is established.
// The default value is zero, that means the timeout is not used. 
int timeoutConnection = 3000;
HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
// Set the default socket timeout (SO_TIMEOUT) 
// in milliseconds which is the timeout for waiting for data.
int timeoutSocket = 5000;
HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
HttpResponse response = httpClient.execute(httpGet); 
```

如果您想设置任何现有 HTTPClient 的参数（例如 DefaultHttpClient 或 AndroidHttpClient），您可以使用函数 setParams()。

httpClient.setParams(httpParameters);

# c++ - C ++ cin.ignore 导致段错误？

> ID：10749836
> 
> 赞同：1
> 
> 时间：2012-05-25T06:54:17.837
> 
> 标签：c++, arrays, segmentation-fault, cin

```
int client::add_user(item & item_in)
{
    char temp[ASIZE];
    cout << "\n\nEnter the name of your item: ";
    cin.get(temp, 100, '\n');
    cin.ignore(100, '\n');
    get_upper(temp);
    item_in.name = temp;

    cout << "\n\nEnter in effect one: ";
    cin.get(temp, 100, '\n');
    cin.ignore(100, '\n');
    get_upper(temp);
    item_in.effect1 = temp;

    cout << "\n\nEnter in effect two: ";
    cin.get(temp, 100, '\n');
    cin.ignore(100, '\n');
    get_upper(temp);
    item_in.effect2 = temp;

    cout << "\n\nEnter in effect three: ";
    cin.get(temp, 100, '\n');
    cin.ignore(100, '\n');
    get_upper(temp);
    item_in.effect3 = temp;

    cout << "\n\nEnter in effect four: ";
    cin.get(temp, 100, '\n');

    cout << "this";
    cin.ignore(100, '\n');
    cout << "that";

    get_upper(temp);
    item_in.effect4 = temp; 
```

...了解我确信这段代码有很多问题，我遇到的问题是前四个块运行得很好，但是当我使用 g++ 编译这段代码并运行它时，“this”显示，然后是分段错误，没有“那个”。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:42:48.623

根据您的另一个问题，看起来参数`item_in`是一个具有多个`char *`字段的结构。存在一个严重的问题，因为数组`temp`仅在此函数的持续时间内存在。您正在将临时数组的地址分配给`item_in`. 当函数返回时，数组超出范围，它的内存不再是你的。

您可以通过为指针分配内存并复制数据来解决此问题，但**最好**的解决方案是使用`std::string`C++ 标准库。它可以按您的预期处理资源管理和分配工作等操作。

# matlab - 操作数组的特定元素

> ID：10749840
> 
> 赞同：1
> 
> 时间：2012-05-25T06:55:02.687
> 
> 标签：matlab, simulink

我在 simulink 模型中有两个长度不同的矢量信号。现在，我想将较短信号的值添加到较长信号的特定元素中。让我用一个例子来解释一下：

假设，信号 A 的值为 [1 2 3 4 5]，信号 B 的值为 [2 4 8]。我想将 B 的值添加到 A 的第 1、第 3 和第 5 个元素，得到 [3 2 7 4 13]。相应的 matlab-command 将是`A([1 3 5])=A([1 3 5])+B`.

[`Insert Zero`通过使用-Block](http://www.mathworks.de/help/toolbox/comm/ref/insertzero.html)将 B 填充到与 A 相同的长度，然后添加两个向量，在 Simulink 中应该可以实现同样的事情。不幸的是，这个块需要我没有的通信系统工具箱。除了使用嵌入式 matlab 函数之外，您还有其他可能性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:57:53.680

您可以尝试使用选择器块来模拟 MATLAB 中的索引，我现在没有 Simulink，所以这里有一个模型的 powerpoint 版本。在选择器块中，您可以硬编码所需的索引，也可以使用块上的端口输入索引。

在这种情况下，模型实现，

```
Y = A([1 3 5 7 9]) + B; 
```

有关详细信息，请参阅[选择器块文档。](http://www.mathworks.com/help/toolbox/simulink/slref/selector.html)

![在此处输入图像描述](../Images/7b7d53959a22a6981301e7fd3bb4bcef.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:01:59.847

这不是你的问题，但你正在做的不是如何将两个不等间隔的信号加在一起。问题是您没有修改`A`. 假设`B`有值`[10 10 10]`。嗯，这意味着`B`有一个常数值 10，所以我们`A`只想成为`A + 10`。不是`[10 2 13 4 15]`。

通常，您希望将信号内插到相同的间距，然后添加它们。首先生成与数组相对应的时间向量，然后将更粗略采样的信号插入另一个。

```
% Let's say t runs from 0 to 100
tA = linspace(0, 100, 5);
tB = linspace(0, 100, 3);
Bi = interp1(tB, B, tA);
combined = A + Bi; 
```

`Bi`是上面的重要变量，在您的示例中，它具有 value `[2 3 4 6 8]`。如果您有信号处理工具箱，该功能`resample`对于一般信号可能会更好。

因此，如果您认为这更准确地描述了信号加法，您就知道在 Simulink 中的何处查找。寻找 Simulink 重采样模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T10:43:18.353

虽然我不知道如何插入零块将信号填充到相同的长度。计算您指定的索引非常容易。

我会做这样的事情：

```
a = zeros(1000,1);
b = rand(20,1);
indexes = round(linspace(1,numel(a),numel(b)))
a(indexes) = a(indexes)+b; 
```

# iphone - 当应用商店有新版本可用时，通过代码检查和更新应用程序

> ID：10749842
> 
> 赞同：2
> 
> 时间：2012-05-25T06:55:18.880
> 
> 标签：iphone, ios, xcode4.3

在我的应用程序中，我想检查应用程序商店中是否有我的应用程序的任何更新版本。如果有，则必须通过警报消息通知用户，如果他/她选择升级，我想更新新版本。我想通过我的应用程序完成所有这些。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T07:14:46.197

您可以在服务器上存储最新的应用程序版本字符串。激活应用程序后，从服务器请求此信息并将其与包含在应用程序 Info.plist 中的版本字符串进行比较。

您可以像这样在 Info.plist 中获取版本

```
[[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleShortVersionString"] 
```

如果字符串不同，您可以在应用商店中显示更新版本可用的警报。您还可以从警报直接链接到应用商店。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:17:46.517

你可以这样做：假设你刚刚开始制作一个应用程序。您在应用程序的配置文件或类似文件中对其版本（1.0）进行硬编码。

然后，您可以使用通用 xml 配置文件，应用程序每次启动并连接到 Internet 时都会读取该配置文件。在该 xml 中，创建一个名为“lastest_version”的字段，您可以在其中设置该值。

当应用程序启动时，您可以检查 xml。如果您的硬编码值为 1.0 并且在 xml 中您得到 1.1，这意味着您需要更新。

我们就是这样做的，就像 Philippe 说的，我们也使用 plist 来存储原始版本值。

# python - 如何在python中为除法运算设置最小值？

> ID：10749846
> 
> 赞同：1
> 
> 时间：2012-05-25T06:55:36.073
> 
> 标签：python, division, minimum, integer-division

是否有标准库函数可以为除法运算设置最小值，例如：

```
min(1, a/b) 
```

这将确保上述操作的最小值始终为 1，而不是 0。

如：

```
min(1, 1/5)
1 
```

另外，我如何四舍五入：

```
round_up(1/5) = 1 
```

当我除以 1/5 时，我总是得到“0”，即使使用 ceil 函数：

```
math.ceil(1/5)
0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:27:27.013

如果你想使用浮点除法作为默认值，你可以这样做`from __future__ import division`：

```
>>> 1/5
0
>>> from __future__ import division
>>> 1/5
0.2
>>> math.ceil(1/5)
1.0 
```

如果您需要结果为整数类型，例如用于索引，您可以使用

```
int(math.ceil(1/5)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T07:00:08.130

```
In [4]: 1/5
Out[4]: 0

In [5]: math.ceil(1/5)
Out[5]: 0.0

In [7]: float(1)/5
Out[7]: 0.2

In [8]: math.ceil(float(1)/5)
Out[8]: 1.0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T06:57:25.807

的结果`1/5`已经是一个整数。如果你想要浮点版本，你需要做`1.0/5`. 然后该`math.ceil`功能将按您的预期工作：`math.ceil(1.0/5) = 1.0`.

如果您使用的是变量而不是常量，请使用该`float(x)`函数将整数转换为浮点数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T07:01:38.910

你可以为这样的整数做一个向上取整的函数

```
>>> def round_up(p, q):
...     d, r = divmod(p, q)
...     if r != 0:
...         d += 1
...     return d
... 
>>> round_up(1, 5)
1
>>> round_up(0, 5)
0
>>> round_up(5, 5)
1
>>> round_up(6, 5)
2
>>> 
```

您的示例不起作用，因为整数除以整数是整数。

至于你的最小问题 - 你写的可能是你能做的最好的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-10T18:21:30.097

我对标准库中的任何内容一无所知，但如果您只是想确保答案永远不会小于 1，那么该函数非常简单：

```
def min_dev(x,y):
    ans = x/y
    if ans < 1:      # ensures answer cannot be 0
        return 1
    else:            # answers greater than 1 are returned normally
        return ans 
```

相反，如果您希望汇总每个答案：

```
def round_up(x,y):
    ans = x//y         # // is the floor division operator
    if x % y == 1:     # tests for remainder (returns 0 for no, 1 for yes)
        ans += 1       # same as ans = ans + 1
        return ans
    else:
        return ans 
```

这将用余数四舍五入任何答案。我相信 Python 3.3（我知道 3.4）默认为整数除法返回一个浮点数： [https ://docs.python.org/3/tutorial/introduction.html](https://docs.python.org/3/tutorial/introduction.html)

# css - Codeigniter 本地主机 CSS

> ID：10749848
> 
> 赞同：0
> 
> 时间：2012-05-25T06:55:41.220
> 
> 标签：css, codeigniter, localhost

我已经在广泛的论坛上搜寻了解决方案，但无济于事。

我在本地主机上运行一个应用程序，我想在我的 html 页面中链接到我的 CSS 样式。

普遍的共识是我应该使用`base_url() . "css/main.css"`来创建一个链接。

问题在于我希望我网络上的其他人能够使用我的应用程序。但是当他们从他们的计算机链接到我的页面时，他们会看到

```
link rel="stylesheet" type="text/css" href="http://localhost/codeigniter/css/main.css 
```

这当然不会将 CSS 加载到页面，因为 css 文件在我的本地主机上，而不是他们的。

请告诉我这个问题有一个优雅的解决方案。Codeigniter 让我有点发疯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:00:34.260

将 $config["base_url"] 值修改为分配给您计算机的 IP 地址。像：

```
$config["base_url"] = "http://192.168.1.5/codeigniter/"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:23:30.397

您在这里需要的是根据 ENVIRONMENT 设置基本网址

```
switch(ENVIRONMENT) {
    case 'localhost':
        $config['base_url'] = 'http://localhost/codeigniter/whatever/';
        break;
    case 'anothercomputer':
        $config['base_url'] = 'http://anotherdomain.com/';
        break;
    default: //live
        $config['base_url'] = 'http://yourdomain.com/';
} 
```

显然，您需要通过检查例如 $_SERVER['SERVER_NAME'] 等在`index.php`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-25T07:03:31.217

有 3 种向文档添加 CSS 样式的方法，最常见的方法是外部的，使用此代码从外部 file.css 获取样式：

```
<link rel="stylesheet" type="text/css" href="your_css_file_location.css" /> 
```

css 文件应为 .css 格式，另一种方法是使用内部，样式标签位于标签之间，

```
 <style type="text/css"> your style here </style> 
```

最后是内联，

```
<body style="background-color: #FF0000;"> 
```

希望你得到这个，祝你有美好的一天。

# android - 错误：Android MapActivity：无法获取连接工厂客户端

> ID：10749849
> 
> 赞同：0
> 
> 时间：2012-05-25T06:55:45.573
> 
> 标签：android, google-maps

我有同样的错误：我发现应用程序启动并且有灰色网格显示并且没有地图。Logcat 中的错误是：Android MapActivity : Couldn't get connection factory client 请在下面找到 xml、manifest 和 java 文件：

我的清单文件是：

```
 <?xml version="1.0" encoding="utf-8"?>
        <manifest xmlns:android="http://schemas.android.com/apk/res/android"
            package="maps.google"
            android:versionCode="1"
            android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name=".Main"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我的 XML 文件是：main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:apiKey="0A8yftT7fCdjnsszwITqiWCc7xwH9hxSoXC44Ag"
    android:clickable="true" /> 
```

我的 Java 文件也很到位。

```
package maps.google;

import android.os.Bundle;
import android.view.MotionEvent;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;

public class Main extends MapActivity {
    MapView map;
        long start, stop;

        @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        map = (MapView) findViewById(R.id.mapview);
    }

    class Touchy extends Overlay {
        public boolean onTouchEvent(MotionEvent e, MapView m) {

            return false;
        }
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T11:57:35.860

在命令提示符中设置您的 jdk 路径，如下所示:::

```
Step1:: C:/program files/java/jdk6/bin>

Step2:: C:/program files/java/jdk6/bin>keytool -v -list -alias androiddebugkey -keystore "C:\Users\Agarwal\.android\debug.keystore"

Step3:: enter password android

Step4:: copy MD5 Figerprint and [click here][1]

Step5:: Copy the APIKEY and paste it in your xml file. 
```

**注意：：**在第 2 步中，只需更改 debug.keystore 的路径。

# c# - 没有使用 $.get 从 ActionResult 获得结果

> ID：10749850
> 
> 赞同：0
> 
> 时间：2012-05-25T06:55:46.433
> 
> 标签：c#, ajax, asp.net-mvc

我正在使用 jquery get 尝试刷新 partialView 并且它不起作用。我至少有正确的语法吗？我是 C# 的新手

//我的javascript是（工作正常）

```
function takeSquare(square) {
   var x = $(square).attr('x');
   var y = $(square).attr('y');

    alert(x + y);

$.get("Home/updateBoardSquare", { posX: y, posY: y }, function (html) {
    $("#gameBoard").replaceWith(html);
});

alert(html);
} 
```

我的 C# 是

```
 public ActionResult updateBoardSquare(int posX, int posY){

        String boardHtml = "";

        for (int i = 0; i < 15; i++) {
            for (int k = 0; k < 15; k++) {

                if (board[i, k] == null)
                    board[i, k] = new BoardSquare(i, k);

                if (i == posX && k == posY) 
                    board[posX, posY].takeSquare((String) Session["color"]);

                boardHtml += board[i, k].getHtml();
            }
        }

        ViewData["board"] = boardHtml;

        return PartialView();

    } 
```

我只是从 get 语句中没有得到任何东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:35:33.143

Internet Explorer 无法处理相对 url。

用这个：

```
function takeSquare(square) {
   var x = $(square).attr('x');
   var y = $(square).attr('y');

    alert(x + y);

$.get('@Url.Action("Home", "updateBoardSquare")', { posX: y, posY: y }, function (html) {
    $("#gameBoard").replaceWith(html);
});

} 
```

看？我`@Url.Action`用来让 Razor 生成要使用的 url。好处是它适用于根网站和托管在虚拟目录中的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:23:09.540

> 我只是从 get 语句中没有得到任何东西

您正在尝试`html`在成功回调之外使用该变量。

此外，您似乎已经倒置了`y`两次使用该变量：

```
$.get("Home/updateBoardSquare", { posX: x, posY: y }, function (html) {
    $("#gameBoard").replaceWith(html);
    alert(html);
}); 
```

# java - WAS 6 到 WAS 7 迁移 Java EE 代码

> ID：10749859
> 
> 赞同：0
> 
> 时间：2012-05-25T06:56:57.803
> 
> 标签：java, jakarta-ee, rad

在我使用 iRAD 迁移工具将我的 Java EE 项目从 WAS6 自动迁移到 WAS7 之后，我遇到了很多错误。这些错误在 JSP 页面中看起来很模糊。我现在使用的是 JDK 1.5（以前是 1.4）

错误：

*   语法错误，插入“}”完成EnumBody

*   `convertEnum()`类型中的方法`BeanUtil`不适用于参数 ( `AgreeState`)

*   标记“ `catch`”的语法错误，无效`AnnotationName`

源代码非常好。我是否缺少其他配置？

# c# - 如何将变量数据绑定到 Windows 窗体中的 GridView

> ID：10749862
> 
> 赞同：0
> 
> 时间：2012-05-25T06:57:09.520
> 
> 标签：c#, winforms

大家好，我在 for 循环中的程序中有一些变量，变量的值将在 for 循环中动态出现。我想将这些值绑定到网格视图。我知道如何将 SQL 服务器数据绑定到网格。但是这里怎么处理。如何排列列值。任何人都可以帮助我。

我有这些变量

```
string changedFile  
int parentIssue 
List<String> Authors 
```

我想在 for 循环中将这 3 个字段添加到网格视图中。有没有办法写出for循环的一面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:15:02.163

只需将列表分配为数据源。

```
dataGridView1.DataSource = Rows; 
```

您可以在 select 语句中排列列。

```
private System.Windows.Forms.DataGridViewComboBoxColumn Authors;
this.Authors.HeaderText = "Authors";
this.Authors.Name = "Authors";
this.dataGridView1.Columns.Add(this.Authors);
this.Authors.Items.AddRange(new object[] {
            "Ayn Rand",
            "Tagore"}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T07:19:22.527

你可以试试这样的

```
public class BindingObject
{
    public int intMember;
    public string stringMember;
    public string nullMember;
    public BindingObject(int i, string str1, string str2)
    {
        intMember = i;
        stringMember = str1;
        nullMember = str2;
    }
} 

////Somewhere
ArrayList list = new ArrayList();
list.Add(new BindingObject(1, "One", null));
list.Add(new BindingObject(2, "Two", null));
list.Add(new BindingObject(3, "Three", null));
dataGrid1.DataSource = list; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:04:49.690

如果你必须在循环本身中设置，你必须在 aspx 中为 gridview 定义一个模板

```
<asp:GridView ID="gridViewField" ClientIDMode="Static"   runat="Server" AutoGenerateColumns="false"
               onrowdatabound="gridViewField_RowDataBound"  HorizontalAlign="Center"  AlternatingRowStyle-BackColor="#ddecfe" >
               <Columns>                   
                   <asp:TemplateField HeaderText="Field Name">
                       <ItemTemplate>
                           <asp:Label runat="server" ID="lblFieldName"></asp:Label>
                       </ItemTemplate>
                   </asp:TemplateField>
</columns>
</asp:GridView> 
```

在 for 循环中，您可以获取代码隐藏 cs 文件中的每一行，如下所示

```
var lblFieldName= gridViewField.Rows[i].FindControl("lblFieldName") as Label
lblFieldName.Text=your loop data 
```

我是你的循环变量

# ajax - 使用 ObjectInputStream 在 Servlet 中接收 Ajax 请求？

> ID：10749863
> 
> 赞同：0
> 
> 时间：2012-05-25T06:57:16.337
> 
> 标签：ajax, servlets, inputstream

我以以下格式发送我的 Ajax 请求

```
xmlhttp.open("POST","http://172.16.xx.xx:8080/ajax/validate",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send(send); //where send is a string retrieved from textarea 
```

这是我的 Servlet 代码

```
ObjectInputStream in =new ObjectInputStream(request.getInputStream()); 
String inputxmlstring=(String) in.readObject(); 
```

我收到以下异常

```
java.io.StreamCorruptedException: invalid stream header: 3C3F786D 
```

代码有什么问题？我的请求标头内容类型有什么问题吗？

**编辑 1**

```
 BufferedInputStream in =new BufferedInputStream(req.getInputStream());
             byte[] buf=new byte[req.getContentLength()];
             while(in.available()>0)
             {
              in.read(buf);
             }
             String inputxmlstring=new String(buf);
             System.out.println(inputxmlstring); 
```

如果我将此代码用于 Servlet，我会收到以下错误

```
14:13:27,828 INFO  [STDOUT] [Fatal Error] :1:1: Content is not allowed in prolog
.
14:13:27,843 INFO  [STDOUT] org.xml.sax.SAXParseException: Content is not allowe
d in prolog. 
```

**编辑 2**
我使用此代码进行解析。字符串*inputxmlstring*已在 Edit1 中使用。

```
DocumentBuilderFactory fty1 = DocumentBuilderFactory.newInstance();
fty1.setNamespaceAware(true);
DocumentBuilder builder1 = fty1.newDocumentBuilder();
ByteArrayInputStream bais1 = new ByteArrayInputStream(inputxmlstring.getBytes());
Document xmldoc1=builder1.parse(bais1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:41:49.830

仅当您知道它是使用 ObjectOutputStream 编写的另一端时，才应**使用 ObjectInputStream。**

当客户端使用**ObjectOutputStream 时，它会写入特殊字节来指示它是对象流。如果这些字节不存在，ObjectInputStream 将抛出 StreamCorruptedException。**

在您的情况下，您应该**使用 request.getInputStream() 阅读，**因为 XMLHttpRequest 不是使用 ObjectOutputStream 发送的。

# java - windows 7，一些 SWT 对话框显示不完整

> ID：10749874
> 
> 赞同：0
> 
> 时间：2012-05-25T06:57:50.817
> 
> 标签：java, windows-7, swt

我在 windows XP 上开发了一个 RCP，但是在 windows 7 上运行时，一些对话框显示不完整。通常，对话框底部的小部件只显示一半，另一半因对话框不够大而被隐藏。

问题发生在win7上，我的XP中的所有对话框都显示正常。

而且我尝试改变XP和win7的分辨率，在所有分辨率xp都可以正常运行，但是win7失败了。

我生成了一些 swt 和 jface 的对话框，它们在 XP 中运行良好，在 win7 中不完整。\

有没有人有一些想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:52:59.950

我只能建议将您的 RCP 更新到最新版本。SWT/JFace 需要适应 Windows 7 UI 的细节，所以如果你使用的是旧版本，它必然会导致问题。要获得更具体针对您的情况的任何建议，如果没有重现该现象的特定代码，就不会发生这种情况。

# ios - 如何获取在 AVAudioPlayer 中播放的歌曲的剩余时间

> ID：10749876
> 
> 赞同：2
> 
> 时间：2012-05-25T06:58:07.007
> 
> 标签：ios, avaudioplayer

我是 iPhone 新手。我正在研究音频播放器。我必须在音频播放器中显示歌曲的当前时间和剩余时间。在视频播放器中，它将默认获取，但在音频播放器中，它没有得到，因此我编写了一个获取歌曲当前时间的逻辑。下面的代码就是为此

```
int minutes = (int)audioPlayer.currentTime / 60;
int seconds = (int)audioPlayer.currentTime % 60;
startDurationLabel.text = [NSString stringWithFormat:@"%d:%02d",minutes,seconds]; 
```

这里 audioPlayer 是 AVAudioPlayer 的实例， startDurationLabel 是显示歌曲当前时间的标签。

但我正在努力让这个逻辑起作用并显示歌曲的剩余时间

如果有人知道这一点，请帮助我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:22:50.397

尝试这个

```
CGFloat remainingTime =   audioPlayer.duration - audioPlayer.currentTime 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T07:03:23.937

```
NSTimeInterval remaining = audioPlayer.duration - audioPlayer.currentTime; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-09T08:01:38.880

尝试这个 -

```
NSString *strTimeLeft = [self getTimeFromTimeInterval:CMTimeGetSeconds(_player.currentItem.duration) - CMTimeGetSeconds(_player.currentTime)]; 
```

在您的课程中添加此方法

```
- (NSString*)getTimeFromTimeInterval:(NSTimeInterval)timeInterval
{
    NSInteger interval = (NSInteger)timeInterval;
    NSInteger seconds = interval%60;
    NSInteger minutes = (interval/ 60)%60;
    //NSInteger hr = (interval/3600)%60;

    NSString *strTime = [NSString stringWithFormat:@"%02d:%02d",minutes,seconds];
    return strTime;
} 
```

# asp.net - 文件上传权限被拒绝 Godaddy 共享主机

> ID：10749880
> 
> 赞同：8
> 
> 时间：2012-05-25T06:58:39.237
> 
> 标签：asp.net, file-upload, file-permissions

我在 Godaddy 共享主机上有一个 Web 应用程序。它是一个 asp.net 应用程序。一切正常，但是当我上传一些文件时，它会给出错误“拒绝访问路径'PATH'。”

我尝试了几种方法，例如授予我从 Godaddy 控制面板上传文件的文件夹的完全权限。

我也看到了这篇文章并试图按照他说的：[http ://forums.asp.net/t/1052417.aspx/1](http://forums.asp.net/t/1052417.aspx/1)

但没有帮助。

谁能建议我那里有什么问题。它在 IIS 7 下。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-03-17T06:48:25.503

1.  打开“文件管理器”
2.  导航到文件夹并将鼠标悬停在它上面
3.  单击“名称”列右边缘的小“向下”箭头（见图）
4.  点击“更改权限”
5.  选择用户（如果您正在通过您的站点上传文件，您很可能希望使用“Plesk IIS 工作进程身份帐户”）并根据需要设置权限

[![在此处输入图像描述](../Images/496b7c92f21827e154e1d54ae0c7fcec.png)](https://i.stack.imgur.com/KX3G2.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-25T07:58:48.810

按照这个： [来源](http://support.godaddy.com/groups/web-hosting/forum/topic/access-to-the-path-is-denied-2/)- [2](http://support.godaddy.com/groups/web-hosting/forum/topic/access-to-the-path-is-denied/)

“使用 Windows 主机帐户设置目录权限”</p>

[http://support.godaddy.com/help/article/6481](http://support.godaddy.com/help/article/6481)

*如果它不能解决您的问题，您应该向您的托管服务提供商询问访问权限。*

参考： [删除对 Windows 主机帐户上目录的 Web 访问](http://support.godaddy.com/help/article/3989/removing-web-access-to-directories-on-a-windows-hosting-account)

> 删除该目录的“匿名访问”IIS 设置。删除此权限的结果是您只能使用您的主机帐户或通过 FTP 访问该目录。无论您是否知道主机帐户用户名和密码，您都无法通过任何 Web 浏览器访问该目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-12T06:33:38.993

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Collections.Generic;
using System.IO;
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            BindGrid();
        }
    }
    protected void BindGrid()
    {
        string[] filePaths = Directory.GetFiles(Server.MapPath("~/images/"));
        List<ListItem> files = new List<ListItem>();
        foreach (string filePath in filePaths)
        {
            files.Add(new ListItem(Path.GetFileName(filePath), filePath));
        }
        GridView1.DataSource = files;
        GridView1.DataBind();
    }
    protected void btnUpload_Click(object sender, EventArgs e)
    {
        if (FileUpload1.HasFile)
        {
            FileUpload1.SaveAs(Server.MapPath("~/images/") + FileUpload1.FileName);
            BindGrid();
        }
        else //enter code here
        {
            Response.Write("Please select file to upload");
        }
    }
    protected void DownloadFile(object sender, EventArgs e)
    {
        string filePath = (sender as LinkButton).CommandArgument;
        Response.ContentType = ContentType;
        Response.AppendHeader("Content-Disposition", "attachment; filename=" + Path.GetFileName(filePath));
        Response.WriteFile(filePath);
        Response.End();
    }
    protected void DeleteFile(object sender, EventArgs e)
    {
        string filePath = (sender as LinkButton).CommandArgument;
        File.Delete(filePath);
        BindGrid();
    }
} 
```

# iphone - 如何在 ASIHttpRequest 中发送带有 JSON 数据的 POST 请求？

> ID：10749887
> 
> 赞同：1
> 
> 时间：2012-05-25T06:59:07.913
> 
> 标签：iphone, ios, json, post, asihttprequest

我在我的 ios 项目中使用 ASIHttpRequest，我的同事使用**Tastypie**作为**服务器**，他告诉我必须发布一个 JSON 格式的字符串作为 Http 正文（使用 application/json），但我找不到这个 Content-Type除了`"application/x-www-form-urlencoded"`和`"multipart/form-data"`。

那么如何发送**JSON**格式的 POST 请求**`ASIHttpRequest`**呢？

# nhibernate - 如何从具有到表的间接链接的表中映射类中的包/列表/集

> ID：10749888
> 
> 赞同：0
> 
> 时间：2012-05-25T06:59:15.120
> 
> 标签：nhibernate, nhibernate-mapping

我知道标题可能听起来有点奇怪，但我附上了数据库设计的屏幕。我有两个主表，它们之间存在多对多关系。但是我们使用多对多表中的主键来引用另一个名为 ResourceAllcoation 的表，其中包含外键 (ProjectResourceID)

现在，在 Resource 实体中获得一袋 ResourceAllocation 的最佳方法是什么？有没有直接的方法可以在 nhibernate 中做到这一点？

目前我的休眠映射有一个到 ProjectResource 表的一对多包，然后引用 ResourceAllocation 表，我觉得这可能不是最好的方法。

请原谅我的无知。任何想法表示赞赏。 ![在此处输入图像描述](../Images/4bb63f39031cdfff6d9e0464cd7495b3.png)

@kalki，当我实现你的映射时，我发现生成的 sql 查询是

```
SELECT 
* 
FROM PROJECTRESOURCE P 
LEFT OUTER JOIN RESOURCEALLOCATION  R 
ON P.PROJECTRESOURCEID=R.ID WHERE P.RESOURCEID=1 
```

但这不起作用，因为 ProjectResource 没有 PROJECTRESOURCEID 列

如果生成的查询是

```
SELECT * 
FROM PROJECTRESOURCE P 
LEFT OUTER JOIN RESOURCEALLOCATION R 
ON P.ID = R.PROJECTRESOURCEID
WHERE P.RESOURCEID=1 
```

它会起作用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:51:14.850

您可以使用 NHibernate 中的多对多和 IdBag 进行映射

# php - 如何使用 php 将一些元素附加到 xml 中的特定元素？

> ID：10749892
> 
> 赞同：-1
> 
> 时间：2012-05-25T06:59:32.970
> 
> 标签：php, xml, arrays, dom, xpath

我正在尝试使用 PHP 在 XML 文件中附加一些数据。

我正在搜索一个词是否已经存在于 XML 中。

如果它存在，我只需要将数据附加到它，否则我必须创建整个元素。

为此，我正在使用 DOMXPath。代码如下：

```
$fname="ontology.xml";  

$xml=new DomDocument;
$xml->Load($fname);

$xpath = new DOMXPath($xml);

$query = '//RelatedTerms/words/word/word_title[.="'.$word.'"]';

$entries=$xpath->query($query);

 if($entries->length!=0)
{   
    foreach($entries as $entry)
    {
        $wordElement=$xml->getElementsByTagName($entry->parentNode->nodeName)->item(0);
//Problem is here even if the <word> is found at the second position it append the element to the first <word> element.

            $newIsaElement=$xml->createElement('isa');
            $newIsaTitleElement=$xml->createElement('isa_title',"sample");
            $newRelevanceTitle=$xml->createElement('relevance',"9");

            $newIsaElement->appendChild($newIsaTitleElement);
            $newIsaElement->appendChild($newRelevanceTitle);

            //$newIsaTitleElement->appendChild($newIsaElement);
            $wordElement->appendChild($newIsaElement);
            $xml->save($fname); 

    }
}
else
{
    echo "In Here!";        

    $words=$xml->getElementsByTagName('words')->item(0);
    $newWordElement=$xml->createElement('word');
    $newWordTitleElement=$xml->createElement('word_title',$word);
    $newIsaElement=$xml->createElement('isa');
    $newIsaTitleElement=$xml->createElement('isa_title',"test");
    $newRelevanceTitle=$xml->createElement('relevance',"2");

    $newWordElement->appendChild($newWordTitleElement);
    $newIsaElement->appendChild($newIsaTitleElement);
    $newIsaElement->appendChild($newRelevanceTitle);
    $newWordElement->appendChild($newIsaElement);

    $words->appendChild($newWordElement);

    $xml->save($fname);
} 
```

我想将该元素添加到找到该单词的同一元素中。请帮我解决这个问题！

谢谢！

PS：如果需要，这里是xml文件的格式！

```
<RelatedTerms>
<words>
    <word>
        <word_title>algo</word_title>
        <isa>
            <isa_title>algorithm</isa_title>
            <relevance>9</relevance>
        </isa>
        <hasa>
            <hasa_title>Algorithmic Example</hasa_title>
            <relevance>7</relevance>
        </hasa>
        <akindof>
            <akindof_title>Pseudo Code</akindof_title>
            <relevance>8</relevance>
        </akindof>
        <partof>
            <partof_title>Data Structures</partof_title>
            <relevance>9</relevance>
        </partof>
    </word>
            <word>
                   <word_title>algo</word_title>
                   <isa>
                      <isa_title>test</isa_title>
                       <relevance>9</relevance> //instead of adding it here it adds to the above element
                    </isa>
            </word>
</words> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:02:42.590

`$entries`不是一个数组，它是一个 DOMNodeList 对象。用 . 检查是否为空`$entries->length == 0`。

# ruby-on-rails - Rails 3 - 如何在 javascript 文件中使用样式表的编译名称？

> ID：10749896
> 
> 赞同：2
> 
> 时间：2012-05-25T06:59:57.053
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, asset-pipeline

我在 rails 应用程序中有 javascript 文件，我在其中拉入这样的样式表 -

```
 loadAssets: function(){ 
    var stylesheet = document.createElement('link');
    stylesheet.href = "<%= asset_path('lib/myStyles.css') %>"; 
    stylesheet.rel = 'stylesheet';
    stylesheet.type = 'text/css';
    document.getElementsByTagName('head')[0].appendChild(stylesheet);
} 
```

但是这里使用的asset_path 助手，只是给出了简单的myStyles.css 名称，它应该是那个css 文件的编译名称。

因此，我无法使缓存过期并获取新的 myStyles.css 文件。

所以，我的问题是，我怎样才能在我的 javascript 文件中获得这个 myStles.css 文件的编译名称。上面包含 javascript 文件的代码也会被编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:23:42.577

```
<%= asset_path('lib/myStyles.css'), :digest => true) %> 
```

# android - Android - 抛物线运动

> ID：10749899
> 
> 赞同：-2
> 
> 时间：2012-05-25T07:00:03.280
> 
> 标签：android

我在表面视图中有一个移动的物体，它从固定位置移动。

我需要将它设置为像抛物线一样移动..我的对象像使用 x 和 y 一样绘制所以我这样做

不知道使用该线程如何计算 X 和 y 请帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:03:48.470

基本公式是：

y=x^2 + m

（m 是 x 偏移量）（2 可以是高于 2 的偶数，但现在使用 2）

您的起始位置的坐标为 y0, x0

所以你的第一个位置是：

```
y = x0^2 + y0 
```

对于下一步，像这样计算您的 x 值

```
x = x0+(n*stepsize) 
```

x0 是您的初始 x 值（见上文）。stepsize 是每个步骤的像素偏移量（现在只需使用 1） n​​ 是绘图循环中的当前步骤，如下所示： for(int n=0;n<100;n++)

然后用这个 x 值计算你的 y 值

```
y = x^2 + y0 
```

**主要编辑：**

所以我想到了另一种方法来做你想做的事情，这更简单：

首先，您需要定义起点 (x0|y0) 和终点 (x1|y1) 坐标。然后使用单独的公式计算动画期间的新位置。

计算距离

```
x0x1 = x1 - x0
y0y1 = y1 - y0 
```

定义您想要多少个动画步长（假设是 20）将距离除以该值，并在每个动画步长中将该步距添加到最后一个坐标。

现在要使整个事物成为抛物线，您必须将距离分开，而不是事件，而是对数，至少在运动开始时。但请在尝试之前先尝试前者。

这是一种更加数字化的方法 - 我希望它有所帮助。

# php - 如何使用 PHP 在文件夹中获取第一个修改过的文件？

> ID：10749901
> 
> 赞同：1
> 
> 时间：2012-05-25T07:00:07.197
> 
> 标签：php, file, dir, datemodified

如何获得第一个修改的文件？

到目前为止，我有：

```
$dir = $path.'/';
$firstMod = '';

$p = 1;
foreach (scandir($dir) as $file) {
if (is_file($dir.$file) && ... ) {

if($p == 1) break;
}
} 
```

如果我想获取最后一个文件但不是最后修改但最后一个文件夹顺序我应该使用什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:15:10.063

您可以尝试将数组中的所有文件作为修改的日期写入密钥，而不是根据日期重新排序数组并获取首先修改的数组的第一个元素。

```
<?php
    $folder = "files/";
    $handle = opendir($folder);
    $files=array();
    while ($file = readdir($handle)){   
        if( $file != ".." && $file != "." ){
            $key = filemtime($file);
            $files[$key] = $file ;
        }
    }
    closedir($handle);

    ksort($files) ;

    echo reset($files);
    ?> 
```

# php - 如何检查服务器是否能够处理 SOAP 请求

> ID：10749903
> 
> 赞同：30
> 
> 时间：2012-05-25T07:00:09.690
> 
> 标签：php, soap, nusoap, soap-client

如何检查服务器是否能够在运行时处理 SOAP 请求？我需要在我的脚本执行之前验证它。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-15T10:15:46.627

您可以使用：

```
if (extension_loaded('soap')) {
  // Do things
} 
```

[http://php.net/manual/en/function.extension-loaded.php](http://php.net/manual/en/function.extension-loaded.php)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-01-05T10:41:46.590

从 SSH 你可以运行：

```
php -i | grep Soap 
```

这将返回类似：

```
Soap Client => enabled
Soap Server => enabled 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-05-25T07:39:58.487

在 PHP 中检查是否启用了 SOAP 使用内置函数`class_exists()`：

`var_dump(class_exists("SOAPClient"));`

用户也可以检查任何模块类。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-09-01T11:46:11.173

在命令行中键入以下内容：

```
>>  php -r 'echo (extension_loaded("soap")?"LOADED\n":"not loaded\n");' 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-03-18T13:15:53.637

在一个 php 文件中：

```
<?php
echo phpinfo();
?> 
```

然后查找 SOAP，您将看到 SOAP 是否已安装并启用

编辑：使用 php CLI（命令行界面）的其他解决方案要小心，因为您没有用于 CLI 和 Web 服务器（例如 apache）的相同 php.ini。因此它可能会有所不同。

那么如果你使用 apache 并且想查看是否启用了 soap，最好在命令行中指明 apache php.ini 文件，例如：

```
php -c /etc/php/apache2/php.ini -i | grep Soap 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-04-17T08:25:31.887

嗯...我是新手，我很糟糕：我在“test.php”文件中尝试过这个。

```
<?php
    if (extension_loaded('soap')) 
    {
        echo phpinfo();
    }
    else //will redirect to sth else so you know it doesn't work
    {
        header("Location: http://localhost/index.html");
        die();
    }
?> 
```

我看到自己正在查看一个“phpinfo()”页面，其中包含一个名为：“soap”的段落。

很抱歉造成误解。

**要安装 SOAP：**
检查您的“php.ini”文件，寻找“扩展名”。
你应该找到一行：
`extension=php_soap.dll`或`;extension=php_soap.dll`
“;” 表示已评论。
取消注释它。
如果你没有找到线，然后把它放在那里。
`extension=php_soap.dll`
确保 dll 文件实际上位于默认文件夹`php/ext`中。如果不是，检查phpinfo()是不是你的版本是VC6，VC11的VC9，到php下载页面： http: [//windows.php.net/download#php-5.6](http://windows.php.net/download#php-5.6)获取对应版本的php压缩文件。
从他们的 /ext 文件夹中窃取他们的“php_soap.dll”并将其放入您的文件夹中。
你都准备好了！
重新启动您的服务器，然后转到您的 phpinfo() 测试页面以检查它是否有效。

祝你好运。
注意：phpinfo() 简单的 test.php 文件：

```
<php
    echo phpinfo();
?> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-17T07:42:01.057

PEAR 包没有在 phpinfo() 中列出，所以如果“soap”没有出现在你的“test.php”页面上，这是正常的！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-04T22:05:33.120

您可以使用 phpinfo 脚本查看是否安装了 SOAP。

http://[your-domain.com]/phpinfo.php

# ios - 使用 AFNetworking 失败发布序列化对象

> ID：10749904
> 
> 赞同：0
> 
> 时间：2012-05-25T07:00:14.247
> 
> 标签：ios, afnetworking

我有一个数据对象，称为 DataElement。它包含一串经过 Base64 转换的图像字节，以及几个其他字段。

我正在尝试将此发布到我的 wcf 服务并收到错误消息“预期状态代码在 (200-299) 中，得到 400。

目标是将数据+图像发布到 WCF（休息）服务，并获得修改后的图像——对我正在处理的内容进行端到端测试。

在我的 post 方法中，如果我将对象上的编码字符串留空，一切都会正常工作 - 但如果该字符串不是空的，我会收到此错误。

我的 WCF 服务甚至没有被击中，它只是轰炸了错误。这是我的发布方法......我做错了什么？

```
- (void)postDataToServer:(NSString*)server dataElement:(DataElement*)dataElement asJson:(BOOL)useJson
{
NSString *urlString = [[NSString alloc] init];
NSData *encodedData;

urlString = [[server copy] stringByAppendingString:@"EchoXml"];
encodedData = [self encodeDataElementAsXml:dataElement];

NSURL *url = [NSURL URLWithString:urlString];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];

NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST" path:urlString parameters:nil];
[request setHTTPBody:encodedData];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    [_responseTextView setText:[NSString stringWithFormat:@"Successfully uploaded file to %@", urlString]];

    NSObject *httpResponseObject;

    httpResponseObject = [self parseResponseAsXml:responseObject];

    if ([httpResponseObject isKindOfClass:[DataElement class]])
    {
        DataElement *dataElement = (DataElement *)httpResponseObject;
        _responseTextView.text = dataElement.DataText;
        if (dataElement.DataImageBase64 != nil)
        {
            UIImage *dataImage = [self getImageFromString:dataElement.DataImageBase64];
            self.responseImageView.image = dataImage;
        }
    }

    NSLog(@"Successfully uploaded file to %@", urlString);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    // It goes here immediately
    [_responseTextView setText:[NSString stringWithFormat:@"Error: %@", error]];
    NSLog(@"Error: %@", error);
}];

[operation start];
} 
```

编辑：抱歉，当我将其粘贴到格式时，格式变得不稳定...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:19:57.840

您的代码的重要部分是：

```
NSString* urlString = [server stringByAppendingString:@"EchoXml"];    
NSURL *url = [NSURL URLWithString:urlString];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];    
NSMutableURLRequest *request = [httpClient 
    requestWithMethod:@"POST" path:urlString parameters:nil]; 
```

AFNetorking 请求的实际 URL 是`AFHTTPClient`的基本 URL，并`path`附加了指定的 URL。

您的错误是您`urlString`再次指定相同的内容。

因此，如果`urlString`是`http://your.server.com/EchoXml`，那么您请求的有效 URL 是`http://your.server.com/EchoXmlhttp://your.server.com/EchoXml`。如您所见，这是行不通的。

将您的基本 URL 和路径修复为更合适的内容。由于您没有说出您要访问的 URL，因此很难提供更多详细信息。也许`server`应该是基本 URL 和`EchoXml`路径？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T20:49:13.133

我知道回答我自己的问题的方式不好——但我发现并解决了这个问题。最重要的是，我上面使用的代码很好——也许不是最优的（正如库尔特指出的那样），但它做了它应该做的事情。

问题出在我的 WCF 服务上 - 默认情况下，REST 服务请求的上传限制为 65k。我重新配置了服务以允许大文件上传，一切都很好。

# java - 整数验证问题并显示用户输入了无效数据

> ID：10749906
> 
> 赞同：2
> 
> 时间：2012-05-25T07:00:16.010
> 
> 标签：java, swing

这是针对我作为家庭作业的一部分正在编写的 Java 程序。我不想为我完成工作，但我被困住了。我对 Java 还很陌生，并且使用的是 NetBeans IDE 7.0.1。

在尝试验证用户输入时，我在处理一些异常时遇到了困难。该程序将根据用户输入记录慈善捐赠。但是，我没有成功验证捐赠金额文本字段输入。如果用户输入文本而不是数字，我希望他们被通知他们的输入无效，并且我希望异常处理来处理错误并在用户修复他们的输入后继续。任何帮助是极大的赞赏。

这是我的代码：

```
package donorgui;

import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import java.io.*;
import java.awt.*;

public class DonorGUI extends JFrame
{

// Components
private JPanel panel;
private JTextArea results;
private JButton entryButton;
private JButton exitButton;
private JButton clearButton;
private JTextField donorField;
private JTextField charityField;
private JTextField pledgeField;

//create variables
String[] donorName = new String[20];
String[] charityName = new String[20];
double[] donationAmt = new double[20];
int i = 0;

// Constants for the window size
private final int WINDOW_WIDTH = 750;
private final int WINDOW_HEIGHT = 510;

//Constructor
public DonorGUI(){

    // Set the title.
    setTitle("Donor");

    // Specify what happens when the close button is clicked.
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    // Build the panel that contains the other components.
    buildPanel();

    // Add the panel to the content pane.
    add(panel);

    // Size and display the window.
    setSize(WINDOW_WIDTH, WINDOW_HEIGHT);
    setVisible(true);
}

//The buildPanel method creates a panel containing other components.
private void buildPanel(){

    // Create labels to display instructions.
    JLabel message1 = new JLabel("Name of the Donor:");
    JLabel message2 = new JLabel("Name of the Charity:");
    JLabel message3 = new JLabel("Amount of the Pledge:");

    //instantiate the results area
    results = new JTextArea(25,60);

    // Create text fields to receive user input
    donorField = new JTextField(10);
    charityField = new JTextField(10);
    pledgeField = new JTextField(10);

    //create the user buttons to cause action
    entryButton = new JButton("Enter Donation.");
    entryButton.addActionListener(new EntryButtonListener());
    exitButton = new JButton("EXIT");
    exitButton.addActionListener(new ExitButtonListener());
    clearButton = new JButton ("Clear Fields");
    clearButton.addActionListener(new ClearButtonListener());

    // Create a panel.
    panel = new JPanel();

    //set the LayoutManager
    panel.setLayout(new FlowLayout());

    // Add the labels, text fields, and button to the panel.
    panel.add(message1);
    panel.add(donorField);
    panel.add(message2);
    panel.add(charityField);
    panel.add(message3);
    panel.add(pledgeField);
    panel.add(results);
    panel.add(entryButton);
    panel.add(exitButton);
    panel.add(clearButton);

}
private class EntryButtonListener implements ActionListener {

    public void actionPerformed(ActionEvent e) {

        donorName[i] = donorField.getText();
        charityName[i] = charityField.getText();
        donationAmt[i] = Double.parseDouble(pledgeField.getText());
        results.append(donorName[i]+" "+charityName[i]+" "+donationAmt[i]+"\n ");
        i++;
    } 
}
public boolean donationAmt(String amount) {
    int i = 0;
    try {
        i = Integer.parseInt (amount);
        return true;
    }
    catch (NumberFormatException e) {
        JOptionPane.showMessageDialog(null, "Invalid Input.  Please enter a dollar amount");
        return false;
    }

}
private class ClearButtonListener implements ActionListener {
    @Override
    public void actionPerformed (ActionEvent e) {
        donorField.setText("");
        charityField.setText("");
        pledgeField.setText("");
        }
}
private class ExitButtonListener implements ActionListener {

    public void actionPerformed(ActionEvent e) {
        System.exit(0);
    }
}

/* Application method */
public static void main(String[] args){

    DonorGUI rpc = new DonorGUI();
} 
```

}

**这是我修改后的代码。经过一些用户输入测试后，当我使用 100.00、40.00 等...而不是整美元金额（例如 100、40 等）时出现异常。有什么想法吗？**

```
package donorgui;

import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import java.io.*;
import java.awt.*;

public class DonorGUI extends JFrame
{
// Components
private JPanel panel;
private JTextArea results;
private JButton entryButton;
private JButton exitButton;
private JButton clearButton;
private JTextField donorField;
private JTextField charityField;
private JTextField pledgeField;

//create variables
String[] donorName = new String[20];
String[] charityName = new String[20];
double[] donationAmt = new double[20];
int i = 0;

// Constants for the window size
private final int WINDOW_WIDTH = 750;
private final int WINDOW_HEIGHT = 550;

//Constructor
public DonorGUI(){

    // Set the title.
    setTitle("Donor");

    // Specify what happens when the close button is clicked.
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    // Build the panel that contains the other components.
    buildPanel();

    // Add the panel to the content pane.
    add(panel);

    // Size and display the window.
    setSize(WINDOW_WIDTH, WINDOW_HEIGHT);
    setVisible(true);
}

//The buildPanel method creates a panel containing other components.
private void buildPanel(){

    // Create labels to display instructions.
    JLabel message1 = new JLabel("Name of the Donor:");
    JLabel message2 = new JLabel("Name of the Charity:");
    JLabel message3 = new JLabel("Amount of the Pledge:");

    //instantiate the results area
    results = new JTextArea(25,60);

    // Create text fields to receive user input
    donorField = new JTextField(10);
    charityField = new JTextField(10);
    pledgeField = new JTextField(10);

    //create the user buttons to cause action
    entryButton = new JButton("Enter Donation.");
    entryButton.addActionListener(new EntryButtonListener());
    exitButton = new JButton("EXIT");
    exitButton.addActionListener(new ExitButtonListener());
    clearButton = new JButton ("Clear Fields");
    clearButton.addActionListener(new ClearButtonListener());

    // Create a panel.
    panel = new JPanel();

    //set the LayoutManager
    panel.setLayout(new FlowLayout());

    // Add the labels, text fields, and button to the panel.
    panel.add(message1);
    panel.add(donorField);
    panel.add(message2);
    panel.add(charityField);
    panel.add(message3);
    panel.add(pledgeField);
    panel.add(results);
    panel.add(entryButton);
    panel.add(exitButton);
    panel.add(clearButton);

}
private class EntryButtonListener implements ActionListener {

    public void actionPerformed(ActionEvent e) {

        donorName[i] = donorField.getText();
        charityName[i] = charityField.getText();
                if (donationAmt(pledgeField.getText())) {
                    donationAmt[i] = Double.parseDouble(pledgeField.getText());
                }
        results.append(donorName[i]+" "+charityName[i]+" "+donationAmt[i]+"\n ");
        i++;
    } 
}

public boolean donationAmt(String amount) {
   if(amount==null || amount=="" || amount.length()<1){  //checking for empty field
        JOptionPane.showMessageDialog(null, "Please enter a dollar amount");
        return false;
    }

    for(int i = 0; i < amount.length(); i++){  //verifying dollar amount entered as number
            if (!Character.isDigit(amount.charAt(i))){ 
                JOptionPane.showMessageDialog(null, "Invalid input.  Please enter a dollar amount");
                return false;
            } 
    }
    return true;

}

private class ClearButtonListener implements ActionListener {
    @Override
    public void actionPerformed (ActionEvent e) {
        donorField.setText("");
        charityField.setText("");
        pledgeField.setText("");
        }
}
private class ExitButtonListener implements ActionListener {

    public void actionPerformed(ActionEvent e) {
        System.exit(0);
    }
}

/* Application method */
public static void main(String[] args){

    DonorGUI rpc = new DonorGUI();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:03:22.953

你可以使用[`InputVerifier`](http://docs.oracle.com/javase/7/docs/api/javax/swing/InputVerifier.html)，[这里](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html#inputVerification)讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T07:30:30.847

```
private class EntryButtonListener implements ActionListener {

    public void actionPerformed(ActionEvent e) {

        donorName[i] = donorField.getText();
        charityName[i] = charityField.getText();
        if(donationAmt(pledgeField.getText())){
            donationAmt[i] = Double.parseDouble(pledgeField.getText());
            results.append(donorName[i] + " " + charityName[i] + " " + donationAmt[i] + "\n ");
            i++;
        } 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:18:22.740

像这样的东西会起作用。这会检查以确保金额​​不为空，并且仅包含基于您现有方法的数字。

```
public boolean donationAmt(String amount) {
       if(amount==null || amount=="" || amount.length()<1){  //check so that the amount field is not empty, pherhaps you can add a check so the amound is not 0 :)
            JOptionPane.showMessageDialog(null, "Invalid Input. The amount cannot be empty");
            return false;
        }

        for(int i = 0; i < amount.length(); i++){  //loop thru the string and check so that each char is a digit
                if (!Character.isDigit(amount.charAt(i))){ 
                    JOptionPane.showMessageDialog(null, "The amount can contain only numbers");
                    return false;
                } 
return true; 
```

如果要确保金额不为 0，一种方法是将金额解析为 int，然后检查`parsedAmount<0`. 这应该在验证金额不为空且仅为数字（ei last:) ）后完成，以避免 NPE 和 numberformatexception

# iphone - iPhone：实时 GPS 报告的省电方式

> ID：10749913
> 
> 赞同：3
> 
> 时间：2012-05-25T07:00:35.727
> 
> 标签：iphone, gps

## 我想做的事：

我想让我的 iPhone 经常（稍后正式定义）将我的 GPS 位置上传到中央服务器。我想以最省电的方式做到这一点。

## 我知道的研究：

苹果文档：

[https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html#//apple_ref/doc/uid/TP40007126](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html#//apple_ref/doc/uid/TP40007126)

堆栈溢出链接：

回应 1

> 回应：存在证明；其他一些工具可以做到
> 
> [如何在使用 GPS 时减少 iPhone 电池消耗](https://stackoverflow.com/questions/7646170/how-to-reduce-iphone-battery-consumption-while-using-gps)

回应 2

> 响应：仅跟踪信号塔的变化
> 
> [iPhone GPS - 电池消耗极快](https://stackoverflow.com/questions/8689626/iphone-gps-battery-draining-extremely-fast)
> 
> [iPhone在后台运行周期性进程-电池优化方式](https://stackoverflow.com/questions/7349417/iphone-running-periodical-process-in-the-background-battery-optimized-way)

## 问题

我的问题有点含糊，因为我对“经常”的定义实际上取决于电池寿命可以承受的程度。例如，如果电池可以每 5 分钟更新一次，我想每 5 分钟更新一次；如果电池可以每 10 秒执行一次，我想每 10 秒执行一次。

我真的很想明白

*   可以实现不同的方式（改变重要的位置、计时器、背景？）连续上传 GPS 位置
*   优点缺点
*   每种情况下电池寿命大约可以持续多长时间

这似乎是一个相当普遍和普遍的问题。有谁知道：

*   对各种方法的深入分析
*   或者如果有一个单一的“最佳”方式来做到这一点？

[版主：请随意标记此评论 wiki。我很想得到很多不同的答案+对它们的成本效益分析。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:12:51.637

在此处查看[Apple 文档](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW1)。

> 重大变化定位服务为具有蜂窝无线电的设备提供低功耗定位服务。此服务仅在 iOS 4.0 及更高版本中可用，还可以唤醒挂起或未运行的应用程序。

这一切都取决于用例。如果用户将停留在某个位置并且您只想跟踪他是否离开该国，那么跟踪显着的位置变化将是最合适的。但是，这对于导航应用程序来说不够精确。

选择“Apple 算法”的一个好处是，如果出现电池问题，他们会为您优化它。（-：

# c# - 使用父母作为事件发送者

> ID：10749919
> 
> 赞同：-2
> 
> 时间：2012-05-25T07:01:01.410
> 
> 标签：c#, events

我有一个面板，在那个面板上有一个图片框和一个标签。我想要做的是当我点击标签或图片框时，事件会读取发件人是面板。示例代码：

```
Panel panel1 = new Panel();
Label label1 = new Label();
PictureBox pb = new PictureBox();
panel1.Size = new Size(500,500);
this.Controls.Add(panel1);
label1.Text = "Some text";
panel1.Controls.Add(label1);
pb.Image = somePath;
panel1.Controls.add(pb);
panel1.Click += onClick;
label1.Click += onClick;
pb.Click += onClick; 
```

面板和所有内容都在循环中添加。

```
private void onClick(object sender, EventArgs e)
{
    if(sender == panel1)
    {
        //do something
    }
} 
```

这是事件方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:07:57.060

> 我想要做的是当我点击标签或图片框时，事件会读取发件人是面板。

这`sender`完全取决于调用事件的代码。如果实际调用它的不是面板，那么它不太可能如此呈现。在某些情况下（按钮等），有一个公开的方法可以导致事件被直接调用，但不是在这里。坦率地说，我认为您最好的选择可能是：

```
panel1.Click += onClick;
label1.Click += (sender,args) => onClick(panel1,args);
pb.Click += (sender,args) => onClick(panel1,args); 
```

即手动转发，欺骗发件人。

更好的方法可能是使用`.Tag`, 或者只是为不同的行为使用不同的处理程序，而不是在单个处理程序内切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T07:03:17.537

[阅读MSDN 上的**is**](http://msdn.microsoft.com/en-us/library/scekt9xw%28v=vs.71%29.aspx)关键字：**is**运算符用于检查对象的运行时类型是否与给定类型兼容。

您需要检查发件人控件是否是面板，而不是您可以通过以下操作来做到这一点......

```
 if(sender is Panel ) 
```

或者

```
 if(sender.GetType() == typeof(Panel)) 
  {
             //do something     
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:09:00.350

利用

```
if(sender is Panel) 
{
    //Do Something     
} 
else if (sender is Label)
{
    //Do something
}
else if (sender is PictureBox)
{
    //Do somethin
} 
```

# iphone - UIButtons 是动态的，不会根据所选按钮的标签正确更改其背景图像。

> ID：10749920
> 
> 赞同：0
> 
> 时间：2012-05-25T07:01:01.797
> 
> 标签：iphone

-(void)setButtons_AsPerTheMatrixSelection

{

```
 int x = 7;
    int y = 60;

    for (int j = 0; j <= 35; ++j)
    {
        if (j <= 5)
            btnMatrix = [[UIButton alloc] initWithFrame:CGRectMake(x, y, width, height)];
        else if (j > 5  && j <= 11)
            btnMatrix = [[UIButton alloc] initWithFrame:CGRectMake(x-306, y+51, width, height)];
        else if (j > 11  && j <= 17)
            btnMatrix = [[UIButton alloc] initWithFrame:CGRectMake(x-612, y+102, width, height)];
        else if (j > 17  && j <= 23)
            btnMatrix = [[UIButton alloc] initWithFrame:CGRectMake(x-918, y+153, width, height)];
        else if (j > 23  && j <= 29)    
            btnMatrix = [[UIButton alloc] initWithFrame:CGRectMake(x-1224, y+204, width, height)];
        else if (j > 29  && j <= 35)
            btnMatrix = [[UIButton alloc] initWithFrame:CGRectMake(x-1530, y+255, width, height)];

        btnMatrix.tag = j;
        [btnMatrix setBackgroundImage:imgDefaultBG forState:UIControlStateNormal];
        btnMatrix.userInteractionEnabled = TRUE;
        [btnMatrix addTarget:self action:@selector(changeImage:) forControlEvents:UIControlEventTouchUpInside];

        [viewWithButtons addSubview:btnMatrix];
        [self.view addSubview:viewWithButtons];

        x = x + 51;
        y = y;
        [arrButton addObject:btnMatrix];
    } 
```

}

这是我根据 6*6 矩阵添加动态按钮的代码

在这里我也添加了按钮标签，

现在我要单击按钮并想使用此代码更改背景图像...

-(void)changeImage:(id)sender

{

```
UIImage *img = [UIImage imageNamed:@"No.png"];

UIButton *tmpButton = (UIButton *)[self.view viewWithTag:btnMatrix.tag];

NSLog(@"btn.tag is... %d",tmpButton.tag);

[btnMatrix setBackgroundImage:img forState:UIControlStateNormal]; 
```

}

当我单击任何按钮时，它总是会更改最后一个标记按钮的图像...

我必须更改所选按钮本身的背景。

怎么可能。

请指导我，我没有得到我做错的部分。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:06:55.553

```
-(void)changeImage:(UIButton*)sender  
{
    UIImage *img = [UIImage imageNamed:@"No.png"];
    [sender setBackgroundImage:img forState:UIControlStateNormal];
} 
```

顺便说一句，你的代码太乱了，你可以这样做

```
int pw = 306;
int ph = 51;

int ch = 6;
int cv = 6;

for ( int i = 0 ; i < cv ; ++i )
{
    for ( int j = 0 ; j < ch ; ++j )
    {
        UIButton *btnMatrix = [[[UIButton alloc] initWithFrame:CGRectMake(7+pw*j, 51+ph*i, width, height)] autorelease];
        btnMatrix.tag = i*ch+j;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T07:10:35.703

在此方法中尝试此更改：

```
-(void)changeImage:(id)sender
{
   UIButton *Btnmatrix = (UIButton *)sender
   UIImage *img = [UIImage imageNamed:@"No.png"];
   [Btnmatrix setBackgroundImage:img forState:UIControlStateNormal];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T07:16:51.227

在你的功能中

```
-(void)setButtons_AsPerTheMatrixSelection 
```

使您的按钮本地化如下

```
for (int j = 0; j <= 35; ++j)
{
    if (j <= 5){
    UIButton   *btnMatrix = [[UIButton alloc] initWithFrame:CGRectMake(x, y, width, height)];
      btnMatrix.tag = j;
    [btnMatrix setBackgroundImage:imgDefaultBG forState:UIControlStateNormal];
    btnMatrix.userInteractionEnabled = TRUE;
    [btnMatrix addTarget:self action:@selector(changeImage:) forControlEvents:UIControlEventTouchUpInside];

    [viewWithButtons addSubview:btnMatrix];
}

// and so on every button

} 
```

希望这会帮助你。对不起，我的英语不好 ：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T07:22:11.820

在我看来，它似乎`btnMatrix`是一个 ivar，并且由于您在添加它们时将其连续分配给每个按钮，因此在您完成创建按钮后，它将保留对您最后一个按钮的引用。更改您的行以检查`sender`对象：

```
UIButton *tmpButton = (UIButton*)sender.tag; 
```

# php - 自己调用 PHP 函数

> ID：10749921
> 
> 赞同：0
> 
> 时间：2012-05-25T07:01:13.047
> 
> 标签：php, recursion

在下面的脚本函数 clean($data) 中调用它，我理解它是如何在语句**$data[clean($key)] = clean($value);中清理数据的。**？？？任何帮助表示赞赏..我正在尝试解决这个问题，因为我是 PHP 新手。问候。

```
if (ini_get('magic_quotes_gpc')) {
function clean($data) {
    if (is_array($data)) {
        foreach ($data as $key => $value) {
            $data[clean($key)] = clean($value);
        }
    } else {
        $data = stripslashes($data);
    }

    return $data;
}           

$_GET = clean($_GET);
$_POST = clean($_POST);
$_REQUEST = clean($_REQUEST);
$_COOKIE = clean($_COOKIE); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:09:57.907

**你的问题：**

因此，如果我理解正确，您想知道该行中的功能是什么

```
 $data[clean($key)] = clean($value); 
```

**答案：**

请参阅该函数的主要目的是使用 php 的[stripslashes](http://php.net/manual/en/function.stripslashes.php)方法从字符串中删除斜杠。

如果输入项是一个数组，那么它会尝试通过在键和值上调用自身来清理数组的键以及数组的值。

[在 php 中，数组就像哈希图，您可以使用foreach](http://php.net/manual/en/control-structures.foreach.php)循环遍历键和值，如下所示

```
 foreach ($data as $key => $value) {....} 
```

因此，如果您想在代码片段中总结算法，如下所示

1.  检查输入是否为数组。如果不是，则转到步骤 4
2.  对于数组的每个项目，通过调用其上的 clean 方法来清除键和值（递归）
3.  返回数组
4.  使用 stripslashes 方法 5 清理输入字符串返回清理后的输入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:11:30.233

据我了解，它不是清理密钥，而是使用干净的密钥创建一个新元素，而未清理的密钥仍然存在。

$a['foo\bar'] : 值\ue

变成

$a['foo\bar'] : 值\ue

$a['foobar'] : 值

如果我错了，有人纠正我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:14:09.873

如果这样写，也许你会更好地理解代码：

```
foreach ($data as $key => $value) {
            $key = clean($key); // Clean the key, the
            $value = clean($value); // Clean the value
            $data[$key] = $value; // Put it in the array that will be returned
        } 
```

假设你有一个这样的数组： $_POST = array(0 => 'foo', 1 => array('bar' => 'baz')); 将发生以下情况：

```
Call clean($_POST);
call clean 0
call clean 'foo'
$return[0] = 'foo'
call clean 1
call clean 'bar'
call clean 'baz'
$return[1] = array('bar' => 'baz'); 
```

您可能应该阅读以下内容：http: [//www.codewalkers.com/c/a/Miscellaneous/Recursion-in-PHP/](http://www.codewalkers.com/c/a/Miscellaneous/Recursion-in-PHP/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T07:27:57.823

该函数的主要目的是*清理*关联数组**或**单个变量。关联数组是一个数组，您可以在其中定义该键的键和值；PHP 中使用的特殊数组`$_GET` `$_POST`也是如此，等等。

“清理”的意思是检查魔术引号是否处于活动状态——当您将动态数据发布到 PHP 页面时，这会导致这些数组中的某些字符被反斜杠转义。 `$_GET["Scarlett"] = "O' Hara"`变成魔术引号`$_GET["Scarlett"] = "O\' Hara"`

因此，如果魔术引号处于活动状态，则该函数会处理此问题，并剥离斜杠，以便字符串保留其正确的值，而不是转义值。

该算法检查传递给函数的数据是否为数组，如果不是，则直接清除该值。

```
$string = "Escapes\'in\'a string";
clean($string); 
```

*   它是一个数组吗？不，然后返回stripslashes（我的数据）

    $array = array("key\'​​with\'escapes"=>"value\'with\'escapes", "另一个\'key"=>"另一个值"); 干净（$数组）

*   它是一个数组吗？是的。因此，使用 循环遍历每个键/值对`foreach`，获取键并像第一个示例一样清理它；然后取值并执行相同操作并将清理后的版本放入数组中。

如您所见，该函数有两种不同的行为，由“if”语句区分。如果您传递一个数组，则会激活第二个行为，该行为又会传递一对*字符串*，而不是数组，从而触发第一个行为。

**不过，我的想法是这个功能不能正常工作。**有没有人有同样的感觉？我还没有对其进行测试，但它似乎并没有在替换它们的意义上“清理”键/值，而是在未清理的版本中*添加*了清理后的版本。

# javascript - 在jquery mobile中执行页面加载功能

> ID：10749925
> 
> 赞同：1
> 
> 时间：2012-05-25T07:01:36.723
> 
> 标签：javascript, jquery, html, jquery-mobile

我正在使用 Jquery mobile 构建一个移动应用程序。您需要知道的是，我也在使用内容渲染器。所以我只有一个数据角色页面。这就是我在内容渲染器中所做的。与 <%= incBody %> 我得到了我的页面的内容。

```
<body <%=incBodyAttr%>>

<div data-role="page" class="type-index" data-theme="g">

<%=incBody%>

</div>

</body> 
```

我认为这有点你需要知道的。现在真正的问题。目前我有一个函数 load() 你可以在这里看到它。

```
function load(){
var userId =  $("#userId").val();
$.ajax({
            url: "~SYSTEM.URL~~CAMPAIGN.URL~/SelligentMobile/Webservice/WebService.asmx/getNieuwtjes",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            data: "{'userId':'" + userId + "'}",
            success: function (response) {       
            var nieuwtjes = response.d;
              if (nieuwtjes.length > 0) {   
                        $.each(nieuwtjes, function (i, entity) {
                    $('#nieuwtjesList').append(
                            $("<li/>").append($("<a/>")
                        .attr("href",'~PROBE(239)~&NEWSID=' + entity.nieuwtjeId)
                    .text(entity.nieuwtjeOnderwerp)
                    )
                    );
                    $('#nieuwtjesList').trigger("create");
                        $('#nieuwtjesList').listview('refresh');     
                  });
            } 
        }        
      });
} 
```

现在这个负载是由一个按钮触发的。但我想做的是每次页面加载时，它都会执行这个函数。

有人可以帮忙吗？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:03:24.617

您应该准备好使用 jQuery DOM：

```
$(function() {
  // call load() after DOM ready
  load();
}); 
```

您也可以用作

```
$(document).ready(function() {
  load();
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T07:04:37.973

从文档就绪处理程序调用它：

```
$(document).ready(function() {
   load();
}); 
```

或者，假设您没有将参数传递给`load()`：

```
$(document).ready(load); 
```

第一种方法允许您在调用之前或之后做其他事情`load()`，如果您需要：只需在匿名函数中添加更多代码。

请参阅[`.ready()`文档](http://api.jquery.com/ready/)。

# ios - 使用“为任何添加的文件夹创建文件夹引用”添加的文件夹中的文件未更新

> ID：10749926
> 
> 赞同：0
> 
> 时间：2012-05-25T07:01:38.150
> 
> 标签：ios, app-bundle

我需要在应用程序包中创建一个文件夹来管理我的资源文件、图像、声音等。所以我使用“**为任何添加的文件夹创建文件夹引用**”将我的资源文件夹添加到 xcode 。

**问题**

当我想更新此文件夹中的文件（添加文件、重命名、添加子文件夹）时遇到问题，在我构建它（模拟器和设备）之后，文件夹没有更新以反映我的更改，我必须`Product > Clean`做出它更新。我想知道我是否会发布我的产品，这是否会导致问题，每次我更新资源时都强制用户重新安装我的应用程序不是一件好事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:05:00.877

资源文件将在编译时有效地复制到您的应用程序包中。如果它在清理后工作，并且您看到它在您的手机上运行良好，那么当您在提交之前存档应用程序时，正确的文件将被复制到应用程序包中。因此，在您确定在提交时存档之前也进行清理之前，我不会担心这一点。

# iphone - 在我的 iPhone 中集成了 Facebook 应用程序，但是当我在墙上发帖时，我的朋友无法分享我该怎么办？

> ID：10749928
> 
> 赞同：1
> 
> 时间：2012-05-25T07:01:44.107
> 
> 标签：iphone, ios, facebook

我使用 facebook 集成我的一个 iOS 应用程序，它共享报价。但问题是，当我的时间轴上引用帖子时，我的朋友们无法分享“喜欢”和“评论”。我想分享以请查看附加屏幕截图，所以最好的解决方案是我的 FB 应用程序中存在问题，或者我必须在 iOS 中为此编写代码。

[FB截图](http://www.freeimagehosting.net/newuploads/pnsoo.png)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:19:54.440

我检查了你的截图。这基本上看起来像fb“像帖子”。因为没有人可以分享这篇文章。我建议您使用最新的 ios fb sdk 3.1.1，然后将该 FB sdk 与您的 ios 应用程序集成。然后使用下面的代码

对于 ios 6 及更高版本，请使用 ios 6 原生 fb post 方法：

```
if(NSClassFromString(@"SLComposeViewController") != nil) {

        UIApplication* app = [UIApplication sharedApplication];
        app.networkActivityIndicatorVisible = NO;

        SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

        SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result){
            if (result == SLComposeViewControllerResultCancelled) {

                NSLog(@"\nCancelled");                
            } else
            {
                NSLog(@"\nDone");
            }

            [controller dismissViewControllerAnimated:YES completion:Nil];
        };
        controller.completionHandler =myBlock;

        [controller setInitialText:FB_POST_FEED_INITIAL_TEXT_MSG];
        [controller addURL:[NSURL URLWithString:BITLY_VIEW_LINK]]; // youtube video link

        [self presentViewController:controller animated:YES completion:Nil];
} 
```

否则使用这个 FB sdk 方法：

```
 [FBSession openActiveSessionWithReadPermissions:nil
                                       allowLoginUI:YES
                                  completionHandler:
     ^(FBSession *session,
       FBSessionState state, NSError *error) {
         switch (state) {
             case FBSessionStateOpen:
                 //first shows the hud view then initiating the post message feed process
                 [self postFBMessageOnUserWall];
                  break;
             case FBSessionStateClosed:
                 //need to handle
                 break;
             case FBSessionStateClosedLoginFailed:
                 //need to handle
                 break;
             default:
                 break;
         }
     }];

-(void)postFBMessageOnUserWall {
    NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                             FB_POST_FEED_INITIAL_TEXT_MSG, @"name", BITLY_VIEW_LINK, @"link", nil];

     [FBRequestConnection
      startWithGraphPath:@"me/feed"
      parameters:params
      HTTPMethod:@"POST"
      completionHandler:^(FBRequestConnection *connection,
                          id result,
                          NSError *error) {

          //show the alert says that message successfully posted in your wall
          [self performSelectorOnMainThread:@selector(showAlertFromMainThread:) withObject:error waitUntilDone:NO];

          NSLog(@"\n\nfb post feed error status  = %@", error);
      }];
} 
```

# css - 将 2 个块并排放置，将一个块设置为宽度：自动填充视口

> ID：10749929
> 
> 赞同：2
> 
> 时间：2012-05-25T07:01:54.727
> 
> 标签：css, css-float

这里有很多关于这个话题的讨论，但仍然无法得到我想要的。我有 2 个 div 块，我想并排放置。

最左侧包含树形菜单和背景颜色。我将宽度设置为自动并希望背景颜色垂直填充视口，而不管树菜单中有多少节点。

我希望右侧块的内容以 2px 的边距紧挨着左侧块，并具有自动高度和宽度来填充剩余空间并获得任何溢出的滚动条。

我发现让左侧块垂直填充视口的唯一方法是设置位置：绝对和顶部：0px，底部：0px。但是当我这样做时，我无法弄清楚如何定位右块，以便它填充剩余空间，因为左框随着树的扩展和折叠而扩展和收缩宽度。

有没有办法根据左框的当前宽度来设置右框的宽度？

基本上我有 2 个 div，这些 div 具有以下 css ......

```
.treeMenu {
    position: absolute;
    top: 0px;
    bottom: 0px;
    width: auto;
    margin-right:2px;
    padding: 10px;
    background: rgba(218, 235, 245, 6); 
}

.viewer {
    position: relative;
    float:right;

    width: 100%;   
         //100% fills the view port width which is not what I want
         //a fixed width is not what I want either as it will not adjust to the size of the tree menu.
         //if I could set the width or left margin based on the position of the left block's right side I think I could get it to work.

    height: 100%; 
    border: solid;

  } 
```

****感谢 Wesley 解决我的问题**** 工作代码...

HTML：

```
<div class="wrapper">
    <div class="treeMenu" >
        &nbsp;
    </div>
    <div class="viewer">
        &nbsp;
    </div>
</div> 
```

CSS：

```
body {
    width: 100%;
    margin: 0 auto;
    font: 100% Arial, Arial, Helvetica, sans-serif;
}

.wrapper {
    position: absolute;
    width: 100%;
    height: 100%;
}

.treeMenu {
    position: absolute;
    top: 0px;
    bottom: 0px;
    width: auto;
    margin-right:20px;
    padding: 10px;
    background: rgba(218, 235, 245, 6);
}

.viewer {
    position: relative;
    float:right;
    height: 100%; 
    border: solid;
    overflow-x:scroll;
    overflow-y:scroll;
} 
```

jQuery：

```
$(document).ready(function() {
    $("div.viewer").append("<img id='theImg' src='Images/FM-000-T01 TITLE INDEX QMC 1824 (1).jpg'/>");
    $('div.viewer').width(($(document).width() - $('div.treeMenu').width())-28);
});

$(window).resize(function() {
       $('div.viewer').width(($(document).width() - $('div.treeMenu').width())-28);
}).resize(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:30:09.740

我想不出只用 CSS 来处理你想要的方法。也许这是可能的，但我怀疑是否有一个干净的解决方案可以跨浏览器工作。

但是，使用一点 javascript 应该不难。

It's a bit hard to understand what you want exactly, try following code ([jsFiddle here](http://jsfiddle.net/QjbyP/)):

html:

```
<div id="treeMenu">menu abc</div>
<div id="viewer">this is the viewer</div> 
```

javascript (using jQuery because it's easy):

```
$(document).ready(function() {
    $(window).resize(function() {
       $('#viewer').width($(document).width() - $('#treeMenu').width());
    }).resize();
}); 
```

css:

```
html,body {
    height: 100%;
}
#treeMenu {
    display: inline-block;
    background: rgba(218, 235, 245, 6);
    height: 100%;
}
#viewer {
    display: inline-block;
    position: absolute;
    display: inline-block;
    background-color: red;
    height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T11:48:57.050

## pureCSS cross-browser solution: [(demo on dabblet.com)](http://dabblet.com/gist/2787449)

**html:**

```
<div id="wrap">
    <div id="treeMenu">
        <div class="content">menu abc</div>
    </div>
    <div id="viewer">
        <div class="content">menu abc</div>
    </div>
</div> 
```

**css:**

```
#wrap {
    position: absolute;
    top: 0;
    height: 100%;
    left: 0;
    width: 100%;
}

#treeMenu, #viewer {
    height: 100%;
}

#treeMenu {
    float: left;
    background: rgba(218, 235, 245);
    padding-right: 3px;
}

#viewer {
    background: red;
    overflow-y: auto;
} 
```

# qt - 使用高速互联网连接时降低 readyRead() 的 CPU 成本

> ID：10749930
> 
> 赞同：4
> 
> 时间：2012-05-25T07:01:55.083
> 
> 标签：qt, qt4.8

我试图分析我的程序，它是一个文件下载器。我使用 5`QNetworkRequest`来提高传输速度，它们都连接到同一个 `readyRead()`插槽。

我使用 QMap 来缓冲那些字节数组。

当下载速度达到，例如 5 MiB/s 时，我发现 CPU 成本显着上升，接近 100%，`readyRead()`每秒调用 30 次。

对此有什么建议吗，例如我可以让 QNetworkReply 缓冲其 io 设备，减少发出的信号量吗？

**UPDATA**

我在 readyReady() 中做了一些调试输出：（`reply`这里是从 sender() 转换而来的）

`qDebug() << "Got: " << reply->readAll().length() << " bytes";`

并且每秒大约输出 30 个，每个包含 1500 个字节

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:16:16.250

快速查看您的代码后，我有一个提示。您正在使用为附加数据重新分配内部缓冲区的`QByteArray::append`成员 ( )。`downloadBuffers`如果您能够预测将在每个下载缓冲区中存储多少数据，则可以使用`QByteArray::reserve`确切的数据量。如果你不能，你可以简单地保留 ie 1mb 并在每次你的下一个 append 超过 current 时逐步保留 1mb 内存`QByteArray::capacity`。例如，您可以`downbufferSize`为每个缓冲区保留。这是一个轻微的优化，但应该给你一些时间

# jquery - 是否可以将数据从上传者（文件输入标签）传递到另一个？

> ID：10749938
> 
> 赞同：0
> 
> 时间：2012-05-25T07:03:16.957
> 
> 标签：jquery, uploader

是否可以将所有数据从上传者（文件输入标签）传递到另一个？在 javascript 或 jquery 中。

我想要做的是在一个上传器中加载文件并将其传递给另一个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:08:21.177

由于安全问题，您无法访问这些标签的值。

但是，使用 File API，您可以将选定的文件读入内存并用它做任何事情。

您可以将图像大小调整为缩略图大小，并通过 base64 编码将其放入新的源中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:11:09.167

不，这是不可能的。

但是，如果必须的话。有一些外部组件，例如 flash 的 java applet 上传组件，它们将为您提供路径。

# java - Java: using command pattern in the following code

> ID：10749946
> 
> 赞同：0
> 
> 时间：2012-05-25T07:03:30.720
> 
> 标签：java, design-patterns, refactoring

I have code similar to following:

```
void processObjectRecursively(Object obj)
{
    Field[] fields = obj.getClass().getDeclaredFields();

    for(Field field : fields)
    {
        FieldType type = FieldUtils.getType(field); // FieldType is enum
        Object value = field.get(obj);

        switch(type)
        {
            case A:
            processObjectRecursively(value);
            continue;

            case LIST:
            processList((List<?>)value);
            continue;

            case B:
            processB(value);
            continue;

            case C:
            processC(value);
            continue;
        }
    }
}

void processList(List<?> list)
{
    for(Object obj : list)
    {
        processObjectRecursively(obj);
    }
}

void processB(Object obj)
{
    // do something
}

void processC(Object obj)
{
    // do something
} 
```

Now. I don't like this long switch case. So I'm thinking of creating commands and populating a Map with them where the type is the key and the value is its corresponding command object. With this, the method would look something like:

```
void processObjectRecursively(Object obj)
{
    Field[] fields = obj.getClass().getDeclaredFields();

    for(Field field : fields)
    {
        FieldType type = FieldUtils.getType(field); // FieldType is enum
        Object value = field.get(obj);
        Command command = commandMap.get(type);
        command.execute(value, this); // 'this' needed for calling processObjectRecursively()
    }
} 
```

But for this I will need to create one interface and four more classes. So is this approach okay or is it over-engineered? Can you suggest any other simpler approach to achieve the same effect?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:20:46.330

Command pattern sounds fine here. But I would rather look for possibility of solving this with various value types, instead of using `Object`. So, I can simply write one-liner like below,

```
value.process() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T07:10:55.077

What will happen if there is new type for processing. In first approach you will add case. In case in switch. If you use command pattern, you need to inject the new command and its type and its up and running. I will use Second approach any day

Also why you need to pass *this*? recurciveProcessing can be command which uses map to get the command to handle request?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T07:23:49.810

I agree its always better to avoid switch case statement. So creating a command map would do. Another easier approach could be to add the process method inside your enum so that every enum type knows how to process the data.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T07:07:28.500

There's nothing wrong with that switch block. The JVM has nice ways of dealing with it which don't impact on performance.

# opencv - 如何在 OpenCV 中设置 ROI，以便在视频源中进行面部和嘴部检测？

> ID：10749948
> 
> 赞同：0
> 
> 时间：2012-05-25T07:03:40.563
> 
> 标签：opencv

我们在项目中使用 OpenCV，我们计划检测面部，然后使用创建的矩形作为我们的 ROI，然后检测那里的嘴巴。我们如何设置视频的投资回报率？我们搜索了如何，但只能找到静止图像的答案。我们想将我们的 ROI 设置为检测到的人脸的下 1/3 或下半部分。

使用了“haarcascade_mcs_mouth.xml”，但矩形放置在错误的位置。在右眉附近检测到嘴巴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:40:36.303

然后，您可以首先将嘴部级联搜索限制在您已经检测到的底面区域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-03T08:03:59.287

对于图像和视频，过程是相同的。如果矩形在错误的位置，那么你可能在寻找与框架有关的嘴点时犯了错误。实际上 会给你坐标** wrt face**。因此，当您为嘴的坐标定义点时，您必须确保添加面部坐标。前任。 我希望我清楚我的观点。**`mouth_cascade.detectMultiScale(faces, mouth);`**
`mouth_cascade.detectMultiScale(faces[j], mouth); for( size_t i=0; i < mouth.size(); i+++ {` `Point pt1( faces[j].x + mouth[i].x, faces[j].y + mouth[i].y);` `Point pt2( pt1.x + mouth[i].width, pt1.y + mouth[i].height);` `rectangle( frame, pt2, pt1, cvScalar(0, 0, 0, 255), 1, 8, 0); }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T08:40:17.787

您应该添加代码，因为这里的实际问题有点令人困惑。

为视频或图片设置 ROI 没有区别，对于视频，您只需有一个循环，其中 Mat 帧不断更新。（我假设您使用的是 C++ API 而不是 C API）。

至于如何在脸的下半部分创建 ROI，请查看本[教程](http://opencv.itseez.com/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html#cascade-classifier)（顺便说一下使用视频）和[cv::detectMultiScale()](http://opencv.itseez.com/modules/objdetect/doc/cascade_classification.html?highlight=haar%20cascades)函数。

如果您查看教程，您会看到他们创建的面部 ROI 如下所示：

```
Mat faceROI = frame_gray( faces[i] ); 
```

如果您查看人脸，您会发现它是一个 std::vector< Rect >，因此 faces[i] 是一个包含由 face_cascade.detectMultiScale( ... ) 检测到的人脸的 Rect。因此，不要直接使用该 Rect 创建 faceROI，而是使用仅包含下半部分的不同 Rect。看看什么是[cv::Rect](http://opencv.itseez.com/modules/core/doc/basic_structures.html?highlight=rect_#Rect_)，你会发现它是由左上角的 Rect.x 和 Rect.y 坐标定义的，然后是 Rect.width 和 Rect.height。因此，相应地创建 ROI：

```
Rect tmp = faces[i]; //the Rect you want is the same as the original Rect
tmp.y = faces[i].y+faces[i].height/2; //except that it starts from half the face downwards (note that in image coordinates, origin is the topleft corner, and y increases downwards.
Mat faceROI = frame_gray(tmp); 
```

# c# - 最佳实践：将数据从 DGV 写入 SQL Server 表

> ID：10749952
> 
> 赞同：1
> 
> 时间：2012-05-25T07:04:04.837
> 
> 标签：c#, winforms, sql-server-2008-r2

我有一个未绑定`DataGridView`的可见字段。

[用户可以以与本文](http://www.codeproject.com/Articles/36850/DataGridView-Copy-and-Paste)类似的方式将数据从剪贴板复制到此 DGV

现在我想将这些数据移动到 SQL Server 上的一个表中。

有人建议我执行以下操作：

*   创建一个采用单个参数并将该输入写入表的存储过程
*   循环遍历 DGV 中的项目，将每个项目馈送到存储过程中，然后将它们写入表中

我是否可以不只是抓取 DGV 中的所有项目并立即将它们插入到目标表中，而不必循环？

或者循环方法（最多 2,000 次迭代）是这种情况下的最佳实践？（或者没有特别的最佳实践？！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:02:48.710

如果您正在考虑使用存储过程，那么您可以遵循 Erland Sommarskog 提出的一些传递值数组的示例；

看一眼;

[http://www.sommarskog.se/arrays-in-sql-2008.html](http://www.sommarskog.se/arrays-in-sql-2008.html) <- 基于表值参数的 SS 2008。

[http://www.sommarskog.se/arrays-in-sql-2005.html](http://www.sommarskog.se/arrays-in-sql-2005.html) <- SS 2005 的选项。我已经多次使用[XML 方法，发现它非常有用。](http://www.sommarskog.se/arrays-in-sql-2005.html#XML)

如果您使用的是 SS 2008，那么您可能会调查他[使用数据表作为源的示例](http://www.sommarskog.se/arrays-in-sql-2008.html#DataTable)。

不确定这些是否被认为是最佳实践，但它肯定是值得深思的。

# objective-c - 如何将 UISwitch 从 0/1 更改为开/关

> ID：10749958
> 
> 赞同：2
> 
> 时间：2012-05-25T07:04:27.163
> 
> 标签：objective-c, ios, xcode

可能是我的问题太简单了，但我不知道如何解决我的问题。我在代码中创建了 UISwitch：

```
 UISwitch *soundSwitch = [[[UISwitch alloc]initWithFrame:CGRectMake(155, 10, 150, 50)] autorelease]; 
```

它显示具有 1/0 值的开关。我想显示开/关。如果我将 UISwitch 置于设计器模式，它会显示开/关。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:09:30.087

据我所知，如果当前本地是英语，那么它将显示“开/关”如果它是另一种语言，它将显示 I/0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T07:15:56.423

看看[这个](http://www.catamount.com/blog/uicustomswitch-customizing-uiswitch-color-it-change-labels/)，我想会帮助你..

# testing - 如何以编程方式按下警报确定按钮？

> ID：10749959
> 
> 赞同：2
> 
> 时间：2012-05-25T07:04:29.770
> 
> 标签：testing, selenium, selenium-rc, alert

如何以编程方式在 JS 警报中按下 OK 按钮？

我想要做什么：每次创建警报后，按下 OK 按钮。

这是用于使用 Selenium RC 的 UI 测试。

另外，我已经检查过：[单击 Alert (Selenium IDE) 内的 OK 按钮](https://stackoverflow.com/questions/1348937/click-in-ok-button-inside-an-alert-selenium-ide)。

`chooseOkOnNextConfirmation()`编辑：在单击生成警报的按钮之前，我已经使用并放置了它。我也试过把它放在后面。没有任何效果！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:05:14.537

使用 chooseOkOnNextConfirmation 你可以做到这一点。

```
selenium.chooseOkOnNextConfirmation();  // prepares Selenium to handle next alert
selenium.click(locator);
String alertText = selenium.getAlert(); // verifies that alert was shown
assertEquals("This is a popup window", alertText); 
```

有关更多信息，请通过此链接[链接](http://release.seleniumhq.org/selenium-core/0.8.0/reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:05:37.803

你不能。除非您使用可以控制浏览器的东西（例如 selenium）。

如果您确实使用 selenium，请查看[警报（Selenium IDE）中的单击 OK 按钮](https://stackoverflow.com/questions/1348937/click-in-ok-button-inside-an-alert-selenium-ide)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:07:46.630

如果您可以模拟空格键或输入键的按键，那么这将消除警报。但是，您最好从外部执行此操作，因为它们往往会阻止警报出现。

如果这是 JavaScript，您最好使用`console.log()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T09:52:06.273

如果您实际上可以看到一个警报对话框，那么它就无法完成。Selenium 应该为您处理它。但是，[正如 Selenium 文档中所述](http://seleniumhq.org/docs/05_selenium_rc.html#handling-browser-popup-windows)：

> Selenium 尝试向您隐藏这些对话框（通过替换 window.alert、window.confirm 和 window.prompt），这样它们就不会停止执行您的页面。如果您看到警报弹出窗口，可能是因为它在页面加载过程中触发，这对于我们来说保护页面通常为时过早。

这是 Selenium RC（因此也是 Selenium IDE）的一个已知限制，也是开发 Selenium 2 (WebDriver) 的原因之一。如果要捕获`onload`JS 警报，则需要[使用 WebDriver](http://seleniumhq.org/docs/03_webdriver.html#popup-dialogs) [警报处理](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/Alert.html)。

也就是说，您可以使用[`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)或[`selenium.keyPressNative()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html#keyPressNative%28java.lang.String%29)填写任何文本，然后`Enter`盲目地按下并确认对话框。这不是最干净的方法，但它可以工作。但是，您将无法收到该`alert`消息。

`Robot`将所有有用的键映射到常量，所以这很容易。使用`keyPressNative()`, 您希望将`10`其用作 press`Enter`或`27`for的值，`Esc`因为它适用于[ASCII 代码](http://web.cs.mun.ca/~michael/c/ascii-table.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-27T03:38:40.097

selenium.chooseOkOnNextConfirmation(); 在 Selenium RC 为我工作。

我们必须注释 Alert OK 按钮的代码，然后它才会起作用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-30T21:57:16.527

```
$this->chooseOkOnNextConfirmation();
$this->click('locator');
$this->getConfirmation(); 
```

上面的过程对我使用 Selenium RC 和 PHPUnit 有效

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-18T10:09:12.193

斯威夫特 3

您想在显示警报和确定并取消按钮中尝试此代码

```
let sharephotoAction = UIAlertController.init(title: "Confirm Ticket", message:"Please Collect Your Ticket Before 1 Hours Ago in Location", preferredStyle: .alert )
        sharephotoAction.addAction(UIAlertAction(title: "Ok", style: .default, handler: { (alertAction) in

            _ = Timer.scheduledTimer(timeInterval: 0.5, target: self, selector: #selector(self.Save), userInfo: nil, repeats: false)

        }))
        sharephotoAction.addAction(UIAlertAction(title: "Cancle", style: .default, handler:nil))

        self.present(sharephotoAction, animated: true, completion:nil) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-12-11T08:55:21.817

您可以使用 GSEvent.h 处理任何类型的按键事件，它在 GraphicsServices 框架中可用，它是私有框架（因此，您无法在应用商店提交）。

# interface - 在 Clojure 中实现接口和调用 Java 常量（新手）

> ID：10749960
> 
> 赞同：1
> 
> 时间：2012-05-25T07:04:32.050
> 
> 标签：interface, clojure, java-interop

我正在尝试在 Clojure 中为 google adwords api 编写一个包装器，但在常量和接口方面遇到了困难。Java 代码如下所示：

```
CampaignServiceInterface campaignService =
    user.getService(AdWordsService.V201109.CAMPAIGN_SERVICE); 
```

通常你可以用例如 (Math/PI) 在 Clojure 中调用常量，但是当我写的时候：

```
(def user (AdWordsUser. ))
(.getService user (AdWordsService/V201109/CAMPAIGN_SERVICE)) 
```

我只是得到“没有这样的名称空间”。另外，我对如何正确实现接口有点一无所知。我想我应该使用“reify”，但我被卡住了。

接口链接：http: [//google-api-adwords-java.googlecode.com/svn-history/r234/trunk/docs/com/google/api/adwords/v201003/cm/CampaignServiceInterface.html](http://google-api-adwords-java.googlecode.com/svn-history/r234/trunk/docs/com/google/api/adwords/v201003/cm/CampaignServiceInterface.html)

```
(defn campaign-service [ ]
(reify 
  com.google.adwords.api.v201109.cm.CampaignServiceInterface
  (get [this] ??)))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T09:33:50.177

如果我没看错的话，它`AdWordsService.V201109.CAMPAIGN_SERVICE`是 AdWordsService 内部类的一个静态常量。

要访问内部类，您需要使用 java 的内部名称修饰方案**；用 $ 符号将内部类与其外部类分开：

`AdWordsService$V201109/CAMPAIGN_SERVICE`

** JVM 实际上并没有内部类的概念，所以 java 通过创建一个独立的类来“伪造”它`AdWordsService$V201109`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T07:53:14.800

1.关于访问常量。你进口了`AdWordsService`吗？如果不是，您可以`AdWordsService`使用完全限定名称访问：`some.package.name.AdWordsService/V201109/CAMPAIGN_SERVICE`，或通过[导入](http://clojuredocs.org/clojure_core/clojure.core/import)宏导入它。

2.在这里查看示例：http: [//clojuredocs.org/clojure_core/clojure.core/reify](http://clojuredocs.org/clojure_core/clojure.core/reify)

```
(defn campaign-service [ ]
(reify   
  com.google.adwords.api.v201109.cm.CampaignServiceInterface
  (get [_ selector] (some-function selector))
  (mutate [_ operations] (some-function-2 operations)))) 
```

# android - 如何为 EditText 设置边框颜色以进行验证错误

> ID：10749962
> 
> 赞同：5
> 
> 时间：2012-05-25T07:04:40.093
> 
> 标签：android, android-layout, android-widget

我在 android 应用程序中对我的登录表单应用验证。

如果任何`EditText`字段为`null`（空），那么我想为它设置红色边框`EditText`。

如果用户在这个红色边框中填写任何数据，`EditText`那么它应该变成默认的 EditText。

我该如何实施？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-25T07:08:39.077

只是一个提示：

你为什么不使用`EditText.setError("Oh, this is wrong");`

[相关](http://developer.android.com/reference/android/widget/TextView.html#setError%28java.lang.CharSequence%29)文件说：

> 将 TextView 的右侧复合可绘制对象设置为“错误”图标，并设置当 TextView 获得焦点时将在弹出窗口中显示的错误消息。当任何关键事件导致 TextView 的文本发生更改时，图标和错误消息将重置为 null。如果错误为空，则错误消息和图标将被清除。

[另一个涵盖此主题的博客条目。](http://blog.donnfelker.com/2011/11/23/android-validation-with-edittext/)

# c++ - iOS中的静态框架和链接

> ID：10749963
> 
> 赞同：0
> 
> 时间：2012-05-25T07:04:42.487
> 
> 标签：c++, ios, xcode, frameworks, static-linking

我有一个 xcode 工作区，其中设置了一些依赖于 Boost 1_49（构建为 iOS 框架）的项目库，一个静态框架（来自[https://github.com/kstenerud/iOS-Universal-Framework](https://github.com/kstenerud/iOS-Universal-Framework)的假框架) 然后是一个使用静态框架的测试应用程序。

测试应用程序还使用了 boost。

我想做一些测试，看看是否有可能让测试应用程序在与框架不同的 boost 版本上运行。通过这种方式，我们可以将框架作为一个独立的框架交付，而对使用我们框架的应用程序中需要使用的 boost 版本没有任何限制。

因此，我将测试应用程序设置为使用 boost 1_48，并将框架设置为使用 1_49。我进行了设置，以便所有使用 boost 的项目都**没有**设置将 boost 框架链接到二进制文件中，并且我拥有的框架项目实际上根本没有在其中引用 boost；它仅引用其依赖项生成的所有 .a 库。

项目
A - Boost.framework 1_49

项目B

MyFramework
- ProjectA.a
- ProjectB.a

TestApp
- MyFramework.framework - Boost.framework 1_48

然后我在框架和测试应用程序中添加了一些代码来打印出 boost 版本。两个地方都打印出版本 1_49，而不是 1_48。另外，我尝试在测试应用程序中添加一些代码以进入boost（例如，只获取当前时间），xCode调试器将我带入ProjectA中包含的boost版本，而不是进入ProjectA中包含的boost版本测试应用程序。

链接发生了什么？如何让应用程序仅使用 TestApp 中包含的 boost 版本？

谢谢，里
龙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:49:39.453

似乎问题在于应用程序中的一些其他库也在 Boost 1.49 中链接，所以即使我认为我使用的是 1.48，1.49 也在那里。那好吧。

# javassist - 如何在 Javassist 中获取同步的块对象参数

> ID：10749968
> 
> 赞同：0
> 
> 时间：2012-05-25T07:04:54.993
> 
> 标签：javassist

大家好，我要获取同步块参数，比如

```
 String obj;  
    synchronized(obj){
        ... 
    } 
```

如何使用 Javassist 在字节码级别获取参数“obj”？欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T13:21:54.430

您将不得不使用 Javassist 或 ASM 的低级 API 来分析字节码指令以执行您想要的操作。

```
 Object obj;
 synchronized(obj){
   //...
 } 
```

翻译成

```
 0:   aload_0
 1:   getfield        #2; //Field obj:Ljava/lang/Object;
 4:   dup
 5:   astore_1
 6:   monitorenter
 ... 
```

*monitorenter*指令是同步块的开始，而 astore_1 指令就在此之前将 obj 字段值放在堆栈顶部 - 这就是您要查找的值。

# php - 使用 php 和 querypath 更改属性

> ID：10749969
> 
> 赞同：1
> 
> 时间：2012-05-25T07:05:06.883
> 
> 标签：php, querypath

我想使用 PHP & QueryPath 来查找文档中的所有图像，然后`src`像这样修改它：

我想改变

```
http://test.com/test/name.jpg 
```

到

```
http://example.com/xxx/name.jpg 
```

我可以使用找到特定的类名

```
$qp2 = $qp->find('body'); 
```

现在，当我想找到所有`img`内容以更改`src`：

```
foreach ($qp2->find('img') as $i) {
    //here change the src
} 
```

但是当我执行

```
echo $qp2->html(); 
```

我只看到最后一张图片。哪里有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T21:27:43.497

像这样？

```
foreach($qp2->find('img') as $key as $img) {
    echo $img->html();
} 
```

有时，当您重新使用 qp 对象时，您必须使用 top() 或 end()。就像是：

$qp = htmlqp($lpurl);

```
foreach ($qp->find('img') as $key => $img){ 
  print_r($img->attr('src'));
  $url = parse_url ($img->attr('src'));
  print_r($url);
  echo '<br/>';
  if (!isset($url['scheme']) && !isset($url['host']) && !empty($url['path'])){
    $newimg = $htmlpath . '/' . $url['path'];
    $img->end()->attr('src', $newimg);
    echo $img->html();
  }
}

foreach ($qp->top()->find('script') as $key => $script){ 
  print_r($script->attr('src'));
  $url = parse_url ($script->attr('src'));
  print_r($url);
  if (!isset($url['scheme']) && !isset($url['host']) && !empty($url['path'])){
    $newjs = $htmlpath . '/' . $url['path'];
    echo '<br/>';
    echo 'this is the modified ' . $newjs;
  }
} 
```

# visual-studio-2010 - 将 C++ 项目从 Visual Studio 2008 转换为 Visual Studio 2010 - lib 参考

> ID：10749973
> 
> 赞同：0
> 
> 时间：2012-05-25T07:05:43.000
> 
> 标签：visual-studio-2010

将VS2008项目转换为VS2010项目时，我可以用mfcs100.lib替换mfcs90.lib吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:09:11.227

是的，你可以而且应该。环顾四周，我发现了一些可能会有所帮助的文档，并更多地解释了您需要做什么。

Microsoft 的 TN033 技术说明对这些 MFC 链接库进行了简要记录：http: [//msdn.microsoft.com/en-us/library/hw85e4bb.aspx](http://msdn.microsoft.com/en-us/library/hw85e4bb.aspx)

关于 mfcsxxx.lib 文件的简要总结如下： MFCSxx[U][D].LIB 库与 MFC 共享 DLL 一起使用。这些库包含必须静态链接到应用程序或 DLL 的代码。

```
* The "U" designates that the library is built for Unicode.
* The "D" designates that the library is built for Debug.
* If the number in the library is 90, then it's compiled with and for Visual Studio 2008 (VC++ 9.0)
* If the number in the library is 100, then it's compiled with and for Visual Studio 2010 (VC++ 10.0) 
```

请注意，虽然 mfcsxxx.lib 文件具有静态链接到输出二进制文件的代码，但它们与 MFC 的 DLL 版本一起使用 - 当静态链接 MFC 时，使用 [nu]afxcw[d].lib 库（其中“n”或“u”确定库是否为 Unicode，“d”用于调试版本）。

# bash - BASH脚本：索引是变量时$@的第n个参数？

> ID：10749976
> 
> 赞同：17
> 
> 时间：2012-05-25T07:05:46.817
> 
> 标签：bash, shell, argv

我想检索 $@ 的第 n 个参数（传递给脚本的命令行参数列表），其中 n 存储在一个变量中。

我试过 ${$n}。

例如，我想获取调用的第二个命令行参数：

```
./my_script.sh alpha beta gamma 
```

并且索引不应该是显式的，而是存储在变量 n 中。

源代码：

```
n=2
echo ${$n} 
```

我希望输出为“beta”，但我收到错误：

```
./my_script.sh: line 2: ${$n}: bad substitution 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-25T07:12:14.597

您可以使用*变量间接*。它独立于数组，并且在您的示例中可以正常工作：

```
n=2
echo "${!n}" 
```

**编辑：** *变量间接*可以在很多情况下使用。如果存在变量`foobar`，则以下两个变量展开会产生相同的结果：

```
$foobar

name=foobar
${!name} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-25T07:14:09.700

试试这个：

```
#!/bin/bash
args=("$@")
echo ${args[1]} 
```

好的，用一些 $n 或其他东西替换“1”...

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-25T07:19:07.360

以下也有效：

```
#!/bin/bash
n=2
echo ${@:$n:1} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-25T07:16:14.150

便携式（非 bash 特定）解决方案是

```
$ set a b c d
$ n=2
$ eval echo \${$n}
b 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-25T07:18:14.160

`eval`可以帮助您间接访问变量，这意味着对表达式求值两次。

你可以这样做`eval alph=\$$n; echo $alph`

# jquery - 正则表达式验证器将正则表达式<&>符号编码为<>，导致jQuery验证失败

> ID：10749978
> 
> 赞同：3
> 
> 时间：2012-05-25T07:06:09.673
> 
> 标签：jquery, asp.net-mvc-3, jquery-validate

`[RegularExpression]`在将代码写入客户端时，我从 MVC 的验证器中获取了一个 HTML 编码值。这不是错误消息的问题（因为它应该被编码以供以后显示），但它确实搞砸了正则表达式:) 在字符串字段上，我的正则表达式如下所示：

```
[RegularExpression(@"^[^\<\>]*$", ErrorMessage = "May not contain <,>")] 
```

当它被 mvc3 写出时，它看起来像这样：

```
<input ... data-val-regex-pattern="^[^\&amp;lt;\&amp;gt;]*$" 
           data-val-regex="May not contain &amp;lt;,&amp;gt;" .../> 
```

编辑：

*   由于编码的原因，它也很吸引人`<>`，但也被以下词语绊倒：
*   `t`像蒂姆
*   `g`像山羊
*   可能`;`但我没有测试它

此正则表达式的目的是过滤掉 < 和 >，而不是禁用页面上的所有验证并在服务器端执行它。该字段接受多种 unicode 语言，并且只有 12 个字符长。

我的选择如下：

1.  在一个页面上禁用 asp.net 输入完整性检查并仅在操作中检查
2.  找到一个复杂的正则表达式来匹配 3+ unicode 范围 +/- 破折号和数字 - .net + js compat。
3.  *编写一个没有客户端验证的自定义正则表达式验证器*
4.  使用`[Remote]`验证器在服务器端执行此操作，就像我们对其他字段执行的操作一样

我现在倾向于#3，但我真的很想找到一种方法来保持内置功能。有什么办法可以禁用此输出转义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T03:24:22.923

我花了一段时间，但我发现了现在看起来很明显的东西：使用[unicode literals](http://www.utf8-chartable.de/)而不是实际 characters `<>`。

我的正则表达式最终是这样的，并且可以在 .Net 和 JS 中使用

```
// \u003c = <,  \u003e = >
[RegularExpression(@"^[^\u003C\u003E]*$", ErrorMessage = "...")] 
```

* * *

我最终得到了一个自定义验证属性，以防止到处都有该代码。更好的是这个正则表达式的自定义“默认”对象适配器和自定义 jquery 验证，从而允许附加格式的第二个正则表达式。再工作一天。这是自定义类和验证：

正则表达式属性的自定义子类：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false)]
public class RegexUnsafeChars : RegularExpressionAttribute
{
    public RegexUnsafeChars() : base(@"^[^\u003C\u003E]*$")
    {
        base.ErrorMessage = "May not contain <,>";
    }
} 
```

因为这是一个自定义属性，并且提供者只检查 EXACT 匹配，所以我们需要手动声明适配器。值得庆幸的是，我们可以重用内置的正则表达式。将此代码添加`Application_Start()`到`Global.asax.cs`

```
DataAnnotationsModelValidatorProvider.RegisterAdapter(
            typeof(RegexUnsafeChars), 
            typeof(RegularExpressionAttributeAdapter)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:17:48.060

jQuery 验证应该可以正常工作，并且在我测试时确实可以正常工作。这些值已正确编码。

模型：

```
public class MyViewModel
{
    [DataType(DataType.MultilineText)]
    [RegularExpression(@"^[^\<\>]*$", ErrorMessage = "May not contain <,>")]
    public string Text { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new MyViewModel();
        model.Text = "<Hello";
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        return View(model);
    }
} 
```

看法：

```
@model MyViewModel

<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>

@using (Html.BeginForm())
{
    @Html.EditorFor(x => x.Text)
    @Html.ValidationMessageFor(x => x.Text)
    <button type="submit">OK</button>
} 
```

结果：

![在此处输入图像描述](../Images/1a222a6e9c58c286841804506fc03c63.png)

不显眼的客户端验证工作正常。

# android - JQuery Mobile app 通用疑点

> ID：10749979
> 
> 赞同：0
> 
> 时间：2012-05-25T07:06:16.147
> 
> 标签：android, jquery-mobile, cordova

我是 JQuery 移动新手。需要一些帮助才能开始。

我的计划是一个移动应用程序（跨平台的 android 和 Iphone），它将获取和更新数据到 web 服务。这将是一组 html。我需要访问图库和相机，所以我认为它应该与 PhoneGap 集成。

*   现在，html 页面托管在与 Web 服务相同的域中。在集成到 Phonegap 时想知道我是否需要将 Html 移动到应用程序或将 htmls 保留在远程服务器中并放置一个 web 视图以从那里加载 html。基本上在示例中，我已经看到了带有 htmls 的应用程序本身，所以想知道最佳策略。

*   在 Android 应用程序中有一个硬件后退按钮。基本上我有一个登录页面、主页和详细信息页面。在主页中，如果按下硬件后退按钮，我应该要求注销。我进行了搜索，但没有办法处理相同的问题。

*   可能我会删除相机功能，然后它将是纯 JQuery Mobile 并且没有 Phonegap。所以这将直接在设备的浏览器中加载。所以如果也只在 JQuery mobile 中，这个硬件后退按钮也可以处理。

请指导我正确的方向。

-提前谢谢米娅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:55:04.400

回复您的第一点：应用商店通常禁止在远程服务器中托管完整的 html 页面的做法（至少 iOS 最近阅读了指南）。相反，您应该只从服务器检索数据（例如，以 json/xml 的形式）。为此，您可以使用 Backbone 或任何其他 MVC/MVVC 平台创建您的移动应用程序。您的基本页面将在应用程序中 - 由 phonegap webview 显示 - 以及一些模板。每次用户转到另一个页面时，您从服务器获取一些 json 数据，然后使用模板处理您的数据以生成完整的 html。

这个过程比提供完整的 html 页面（它更像是一个移动站点而不是移动应用程序）更有意义，因为只有数据（什么是动态的）是从服务器发送的，这使得有效负载更小（对于有限的移动设备更好）带宽能力）。

对于第二点，我猜你的意思是当应用程序关闭或通过这个后退按钮进入后台时，你想在你的应用程序中调用注销功能。您需要捕获[系统事件](https://stackoverflow.com/questions/5156067/catch-when-android-application-went-on-background)，但这不是您可以直接在 Phonegap 中处理的事情，您需要为此进行一些本机 Java 编码。但首先检查[phonegap 插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android)是否有此类功能，但我还没有看到任何功能。

对于第三点，如果您说您不想使用 phonegap，您的“移动应用程序”将只是一个“移动站点”。这很好，但是你对那个“后退按钮”的控制就更少了。您将只能控制诸如关闭窗口（卸载前）之类的 Web 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:42:01.453

1.  可以在服务器上拥有完整的 HTML，并且我已经使用这种方法为 iOS 应用商店批准了一个应用。但是，有明显的缺点，包括您失去离线功能。

2.  您可以为后退按钮添加事件侦听器`document.addEventListener('backbutton', onBackButton, false);`

3.  据我所知，您无法使用移动网站处理后退按钮。

# android - startActivity 后显示对话框

> ID：10749981
> 
> 赞同：0
> 
> 时间：2012-05-25T07:06:46.693
> 
> 标签：android, android-dialog

在我的应用程序中，用户点击一个按钮通过发送特定意图返回主屏幕`startActivity()`

但我想在用户进入主屏幕后显示一个对话框（由 AlertDialogBu​​ilder 构建）。我会`finish()`在进入主屏幕后打电话。我该怎么做？

或者更一般地说，在调用 startActivity 以启动不属于我的活动（现在是主屏幕）后如何显示对话框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:13:04.240

请看这个

[从后台线程弹出对话框Android](https://stackoverflow.com/questions/1027149/popup-dialog-android-from-background-thread)

根据链接

使用通知系统——不要使用对话框代替通知

如果您的后台服务需要通知用户，请使用标准通知系统——不要使用对话框或 toast 来通知他们。对话或吐司会立即获得焦点并打断用户，将注意力从他们正在做的事情上转移开：用户可能在对话出现的那一刻正在输入文本，并且可能意外地对对话进行操作。用户习惯于处理通知，可以在方便时拉下通知栏来回复您的消息。

[什么是 Android 对话框通知？](https://stackoverflow.com/questions/6202503/what-are-android-dialog-notifications) 创建通知的指南在这里：http: [//developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:12:06.000

如果你需要显示对话框，为什么不写代码在 oncreate() 之后的第一行显示对话框。如果你只想在按下后退按钮返回屏幕后显示对话框，创建一个变量，当按下后退按钮，分配一个特定的值。在 oncreate 中，给出一个 if 条件，检查该特定条件是否满足。如果满足，则在 if 块中，编写显示对话框的代码。

希望你知道创建对话框的代码。如果不知道，请告诉我。我会给你代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:24:49.273

如果您想在此处显示警报对话框，我将发布其中的一个示例

```
 private void quitApplication(){
    new AlertDialog.Builder(this)
    .setTitle("Exit")
    .setMessage("Abandon this game?")
    .setIcon(android.R.drawable.ic_dialog_alert)
    .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            finish();
        }
    })
    .setNegativeButton("No", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {}
    })
    .show();
} 
```

现在你需要做的就是在你的按钮点击事件上调用这个 quitApplication 函数。希望它可以帮助你。:)

# php - SugarCRM Studio 模块字段抛出 oData 为空错误

> ID：10749985
> 
> 赞同：0
> 
> 时间：2012-05-25T07:07:09.337
> 
> 标签：php, oop, open-source, sugarcrm

我已通过 SugarCRM 6.4 CE 中的 Studio 将字段添加到潜在客户模块，然后从代码中删除了该字段。现在，当我去工作室并列出潜在客户模块的字段时，它会抛出错误

> `oData`是`null`。

任何人都可以解释为什么会发生这种情况以及如何取回字段列表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:22:12.390

我有同样的问题并通过设置所有模块字段的标签来解决它

# matlab - 如何识别簇头

> ID：10749991
> 
> 赞同：-2
> 
> 时间：2012-05-25T07:07:56.067
> 
> 标签：matlab

> **可能重复：**
> [如何在matlab中更改聚类点的颜色](https://stackoverflow.com/questions/10749033/how-to-change-color-of-cluster-points-in-matlab)

你好，我是垫实验室的新手。我正在实现 AP 聚类算法。我必须识别簇头并用不同的符号表示它。

```
 n=50;

    for i=1:n

    X(i,1)=rand()*500;
    X(i,2)=rand()*500;
    end

    for i=1:n
    plotcircle(X(i,1),X(i,2),3,'r');
    end
    x=X(:,1);
    y=X(:,2);
    for i=1:n
    for j=i:n
      distance(i,j)=(sqrt((X(i,1)-X(j,1))^2 +(X(i,2)-X(j,2))^2 ));
    distance(j,i)=distance(i,j);
    end
    end

    Availability=zeros(n,n); 
    Responsibility=zeros(n,n); 
    distance=distance+1e-2*randn(n,n)*(max(distance(:))-min(distance(:))); 
    factor=0.5; 
    for iter=1:100

     PrevResp=Responsibility;
     AvailabilityS=Availability+distance; 
     [X1,I]=max(AvailabilityS,[],2);
     for i=1:n 
     AvailabilityS(i,I(i))=-1000; 
     end;
     [Y2,I2]=max(AvailabilityS,[],2);
     Responsibility=distance-repmat(X1,[1,n]);
     for i=1:n 
     Responsibility(i,I(i))=distance(i,I(i))-Y2(i); 
     end;
     Responsibility=(1-factor)*Responsibility+factor*PrevResp; 

     Aold=Availability;
     Rp=max(Responsibility,0);
     for k=1:n 
     Rp(k,k)=Responsibility(k,k); 
     end;
     Availability=repmat(sum(Rp,1),[n,1])-Rp;
     dA=diag(Availability);
     Availability=min(Availability,0);
     for k=1:n 
     Availability(k,k)=dA(k); 
     end;
     Availability=(1-factor)*Availability+factor*Aold; 
     end;

     E=Responsibility+Availability 
     I=find(diag(E)>0)  % Number of Cluster head
     K=length(I);%   Number of clusters
     fprintf('Number_of_clusters:''%d',length(I))
     [tmp c]=max(distance(:,I),[],2);
     c(I)=1:K ;              
     idx=I(c)

     for k=1:K
     ii=find(c==k)%  group data points to k clusters
     end;

     selected=X(I,:);%  ERROR-----------select cluster head  but always at boundaries
     plot(x(I),y(I),'b*'); 
```

第一个错误-----簇头绘制在边界第二个问题是我们必须绘制不同颜色的 ii 个簇

请帮助我...请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:15:27.753

如果你把它放在matlab中，你会得到不同颜色的簇：

```
n=50;
X = 500*rand([n,2]);

% Computing the euclidean distance between each pair of 50 points
distance = zeros(n); %[50 x 50] matrix

for i=1:n
    for j=i:n
        distance(i,j)=(sqrt((X(i,1)-X(j,1))^2 +(X(i,2)-X(j,2))^2 ));
        distance(j,i)=distance(i,j);
    end
end

Availability=zeros(n,n);
Responsibility=zeros(n,n);
distance=distance+1e-2*randn(n,n)*(max(distance(:))-min(distance(:)));
factor=0.5;
for iter=1:100

    PrevResp=Responsibility;
    AvailabilityS=Availability+distance;
    [X1,I]=max(AvailabilityS,[],2);
    for i=1:n
        AvailabilityS(i,I(i))=-1000;
    end;
    [Y2,I2]=max(AvailabilityS,[],2);
    Responsibility=distance-repmat(X1,[1,n]);
    for i=1:n
        Responsibility(i,I(i))=distance(i,I(i))-Y2(i);
    end
    Responsibility=(1-factor)*Responsibility+factor*PrevResp;

    Aold=Availability;
    Rp=max(Responsibility,0);
    for k=1:n
        Rp(k,k)=Responsibility(k,k);
    end;
    Availability=repmat(sum(Rp,1),[n,1])-Rp;
    dA=diag(Availability);
    Availability=min(Availability,0);
    for k=1:n
        Availability(k,k)=dA(k);
    end
    Availability=(1-factor)*Availability+factor*Aold;
end

E=Responsibility+Availability
I=find(diag(E)>0)  % Number of Cluster head
K=length(I);%   Number of clusters
fprintf('Number_of_clusters:''%d',length(I))

C = zeros(n,1);
for j = 1:n,
   d = zeros(length(I),1);
   for i = 1:length(I),
       d(i) = distance(j, I(i))
   end

   [mval,midx] = min(d)
   C(j) = midx;
end

symbs= {'r+','g.','bv','m*'};
hold on
for i = 1: length(I),
    plot(X(C==i,1),X(C==i,2),symbs{i})
    plot(X(I(i),1),X(I(i),2),symbs{i},'MarkerSize',20)
end 
```

# css - css 菜单 - 下拉菜单出现延迟，我有一个为所有图像运行的预加载器脚本

> ID：10749993
> 
> 赞同：0
> 
> 时间：2012-05-25T07:08:11.263
> 
> 标签：css, drop-down-menu

我的下拉菜单有一些图像没有立即出现的问题。我已经为所有图像添加了预加载器，因为我认为这可能是问题，但它们仍然闪烁。下拉菜单位于“公寓”下方。我的预加载器代码是我正在使用的 javascript，现在已将其添加到我的代码中。

```
 <style>

   #container  {
width: 950px;
margin: 0px auto;
top: 0px;
background-color:#000000;
}

   #nav {
width: 950px;
margin: 0px auto;
z-index:100;
   }

  #nav ul {
 list-style-type: none;
  }

  #nav ul li {
 float: left;
 position: relative;
 }

 #nav ul li a {
 padding:0px 0px 0px 0px;
 display:block;
 border-bottom: none;

 }

  #nav ul li ul {
 display: none
 }

 #nav ul li:hover ul {
 display: block;
 position: absolute;
 text-decoration:none;
 border-bottom: none;
 }

 #nav ul li:hover ul li a {
 display:block;
 padding:0px;
 width: 139px;
 background:#000;
 color:#fff;
 }

#nav ul li:hover ul li a:hover {
border-bottom: 1px solid #FFE300;
}

 #nav li.list1 {
background-image: url(images/main_nav/image.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 127px; height: 30px;
 }

 #nav li.list2 {
background-image: url(images/main_nav/image_over.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 139px; height: 30px; }

 #nav li.list3 {
background-image: url(images/main_nav/image_over.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 177px; height: 30px; }

  #nav li.list4 {
background-image: url(images/main_nav/image_over.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 195px; height: 30px; }

  #nav li.list5 {
background-image: url(images/main_nav/image.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 128px; height: 30px; }

   #nav li.list6 {
background-image: url(images/main_nav/image.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 134px; height: 30px; }

 #nav a#item1 {
background-image: url(images/main_nav/image.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 127px; height: 30px; }

  #nav a#item2 {
background-image: url(images/main_nav/image.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 139px; height: 30px; }

  #nav a#item3 {
background-image: url(images/main_nav/image.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 177px; height: 30px; }

  #nav a#item4 {
background-image: url(images/main_nav/image.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 195px; height: 30px; }

  #nav a#item5 {
background-image: url(images/main_nav/image.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 128px; height: 30px; }

  #nav a#item6 {
background-image: url(images/main_nav/image.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 134px; height: 30px; }

   #nav a#item7 {background-image: url(images/main_nav/image.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 134px; height: 30px; }

   #nav a#item8 {background-image: url(images/main_nav/image.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 134px; height: 30px; }

   #nav a#item1:hover {
background-image: url(images/main_nav/image_over.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 127px; height: 30px; text-decoration:none; }

   #nav a#item2:hover {
background-image: url(images/main_nav/image_over.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 139px; height: 30px; text-decoration:none;}

    #nav a#item3:hover {
background-image: url(images/main_nav/image_over.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 177px; height: 30px;text-decoration:none; }

    #nav a#item4:hover {
background-image: url(images/main_nav/image_over.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 195px; height: 30px;text-decoration:none; }

    #nav a#item5:hover {
background-image: url(images/main_nav/image_over.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 128px; height: 30px; text-decoration:none;}

    #nav a#item6:hover {
background-image: url(images/main_nav/image_over.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 134px; height: 30px; text-decoration:none;}

    #nav a#item7:hover {background-image: url(images/main_nav/image_over.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 134px; height: 30px; }

    #nav a#item8:hover {background-image: url(images/main_nav/image_over.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 134px; height: 30px; }

   .current1 {
background-image: url(images/main_nav/image_over.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 127px; height: 30px;}

   .current2 {
background-image: url(images/main_nav/image_over.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 139px; height: 30px; }

   .current3 {
background-image: url(images/main_nav/image_over.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 177px; height: 30px; }

    .current4 {
background-image: url(images/main_nav/image_over.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 195px; height: 30px; }

     .current5 {
background-image: url(images/main_nav/image_over.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 128px; height: 30px; }

    .current6 {
background-image: url(images/main_nav/image_over.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 134px; height: 30px; }

   .current7 {background-image: url(images/main_nav/image_over.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 134px; height: 30px; }

   .current8 {background-image: url(images/main_nav/image_over.jpg); background-repeat: no-repeat; border:none; background-position: 0px 0px; width: 134px; height: 30px; }

  .none {display:none;}
  </style> 
```

```
 <body>
  <div id="container">
  <div id="nav">
<ul>
    <li class="current1"><span class="none">STORY</span></li>
    <li class="list2"><a href="#" id="item2"><span class="none">APARTMENTS</span></a>
   <ul>
        <li class="list7"><a href="page.html" id="item7"><span class="none">GALLERY</span></a></li>
        <li class="list8"><a href="page.php" id="item8"><span class="none">FLOORPLANS</span></a></li>
        </ul>
    </li>
    <li class="list3"><a href="page.html" id="item3"><span class="none">MEET THE LOCALS</span></a></li>
     <li class="list4"><a href="page.html" id="item4"><span class="none">MEET THE CREATORS</span></a></li>
     <li class="list5"><a href="page.html" id="item5"><span class="none">LOCATION</span></a></li>
     <li class="list6"><a href="page.php" id="item6"><span class="none">CONTACT</span></a></li>
</ul>
  </div><!--end nav-->
  </div>

  </body> 
```

javascript 预加载器

```
 var images = new Array()
    function preload() {
        for (i = 0; i < preload.arguments.length; i++) {
            images[i] = new Image()
            images[i].src = preload.arguments[i]
        }
    }       
    preload(
        "images/main_nav/Apartments_over.jpg",
        "images/main_nav/Apartments.jpg",
        "images/main_nav/Contact_over.jpg",
        "images/main_nav/Contact.jpg",
        "images/main_nav/Floorplans_over.jpg",
        "images/main_nav/Floorplans.jpg",
        "images/main_nav/Gallery_over.jpg",
        "images/main_nav/Gallery.jpg",
        "images/main_nav/MeetTheCreators_over.jpg",
        "images/main_nav/MeetTheCreators.jpg",
        "images/main_nav/MeetTheLocals_over.jpg",
        "images/main_nav/MeetTheLocals.jpg",
        "images/main_nav/Story_over.jpg",
        "images/main_nav/Story.jpg"

                ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:27:45.840

您可以将菜单图像组合在一个精灵中，例如使用[此工具](http://spritegen.website-performance.org/)。您只需替换生成的 css 中的规则名称并将背景图像设置为更通用的规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T07:32:12.813

需要在body onload中执行preloader函数

尝试改变这个

```
<body> 
```

对此

```
<body onload="javascript:preload"> 
```

# eclipse - 检查 Eclipse 更新期间未找到存储库

> ID：10749995
> 
> 赞同：9
> 
> 时间：2012-05-25T07:08:21.933
> 
> 标签：eclipse

日食 3.7.2

运行`help -> Check for Updates`，Eclipse下面弹出`Problem occurred`窗口，

```
Contacting sofware sites has encountered a problem.
No repository found at file:///tmp/formic_xxxxxx/update. 
```

确认后停止处理。如何解决？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-25T07:25:46.013

在 URL 指定的那个位置，它期望看到一个`content.xml`和`artifact.xml`文件以及插件和可能的其他文件。这些文件不太可能出现在该 URL 中。

修复或删除 URL（在*Preferences* → *Install/Update* → *Available Software Sites*中）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T14:49:59.837

我也有这个问题。似乎 Eclipse 更新程序仅适用于未明确指向文件的存储库的尾随“/”。

例如

*   好的：[http ://emonic.sourceforge.net/updatesite/nchc/site.xml](http://emonic.sourceforge.net/updatesite/nchc/site.xml)
*   好的：http: [//download.eclipse.org/releases/juno/](http://download.eclipse.org/releases/juno/)
*   不行：http: [//download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno)

[在这里查看说明。感谢德文郡。](http://www.digitalsanctuary.com/tech-blog/general/no-repository-found-containing-error-when-update-eclipse.html/comment-page-1#comment-215287)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T05:11:59.497

有这个问题。不仅仅是一个，而是十几个“未找到”的存储库。尝试了其他一些事情，但是“Eclipse 更新程序仅适用于未明确指向文件的存储库的尾随“/”。” 解决方案对我有用。

注意：明确使用“编辑...”按钮不起作用。一旦添加了“/”，它就会警告“重复条目”并禁用“更新”控件。

相反，选择所有与“eclipse”相关的项目，“导出”到文件，关闭 eclipse，然后按照指定在 UltraEdit 中编辑文件，然后“导入”文件。在此之后，更新工作。

评论：为什么这些更新（eclipse 和 Android 也有）在更新过程中有这么多流程问题，这告诉我这两组软件包的开发人员没有使用这些方法。我想知道他们用什么。

Eclipse Indigo 2012，显然现在主要是 2012 年 2 月到 2013 年 4 月。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-25T16:31:21.270

在切换到新的 mars 候选版本时，我也遇到了这个问题。上述解决方案都没有对我有用。如果有人遇到同样的问题，我终于成功了：

删除我的文件夹中的**`.eclipse`**和文件夹。**`.p2`****`C:\Users\[my user]\`**

之后，我还“重新安装”了 Eclipse，这甚至可能没有必要。

# nodes - OpenText LiveLink 中的节点是什么？

> ID：10749998
> 
> 赞同：0
> 
> 时间：2012-05-25T07:08:40.973
> 
> 标签：nodes, opentext, livelink

LiveLink 中的节点是什么？

在我使用 LiveLink 的大部分时间里，他们都在使用 Node 很多次。

什么是节点对象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T06:34:58.697

*Livelink 节点*是由[Livelink ECM Server](http://www.opentext.com/2/global/products/products-opentext-ecm-suite.htm)管理的对象。您在 Livelink 中创建的特定文档、文件夹、电子邮件、项目、任务、讨论是 Livelink 节点。例如，如果您想浏览系统中的对象，您通常从内置的根容器（企业工作区或个人工作区）开始，然后继续使用文件夹路径到您的文档。

现在我们来看看术语*node*的原因。Livelink 在层次结构中组织对象，在计算机科学中可以表示为[树。](http://en.wikipedia.org/wiki/Tree_structure)一[棵树](http://en.wikipedia.org/wiki/Tree_structure)由[节点](http://en.wikipedia.org/wiki/Node_%28computer_science%29)组成。节点可以是[*容器（分支）*](http://en.wikipedia.org/wiki/Root_node#Terminology)和[*终端（叶子）*](http://en.wikipedia.org/wiki/Root_node#Terminology)，而整个树以[*根节点*](http://en.wikipedia.org/wiki/Root_node#Terminology)开始。节点通过父子关系连接 - 就像在文件系统中一样；只有 Livelink 有更多的*节点类型*；不仅是文件夹和文件。如果你想创建一个新的节点类型，你会看到 API 发布了一个`LLNode`你可以继承的类来定义你的特殊节点的特性和行为。

因此，Livelink 节点是您在某个容器中创建的现有对象实例；其他人会根据他们的业务场景将其称为文档或其他对象。Livelink 管理的对象层次结构通常被 Livelink 开发人员和管理员称为节点树。

--- 费尔达

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:01:57.493

只是为了补充 Ferdinand Prantl 的答案，您可以在那里找到大多数节点类型的列表：[http ://www.rssd.esa.int/llinksupport/adminhelp/webadmin/ot_ini-nodetypemap.html](http://www.rssd.esa.int/llinksupport/adminhelp/webadmin/ot_ini-nodetypemap.html)

此外，如果您想要一些有关 Livelink 开发的重要资源，[请访问 http://www.greggriffiths.org/](http://www.greggriffiths.org/)。

不要忘记在知识中心（您应该可以访问）上搜索或询问， http: [//knowledge.opentext.com/](http://knowledge.opentext.com/)。很难找到有关如何使用现有 API 或 Web 服务的文档，但以正确的方式这样做确实有助于提高性能（服务器端和客户端）。