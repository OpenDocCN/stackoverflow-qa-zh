# StackOverflow 问答 10824000-10824999

# html - 影响背景颜色的行高

> ID：10824000
> 
> 赞同：2
> 
> 时间：2012-05-30T20:46:20.060
> 
> 标签：html, css

我在 div 内有几行文本，它们交替背景颜色以使其更易于阅读。每个都有一个 display: block; 属性，因此背景颜色跨越了 div 的整个宽度。

但是，这会使每一行文本相距甚远。如果我用 line-height 将线条拉得更近，背景颜色将不再适当地覆盖文本。

这是显示正在发生的事情的图像： ![例子](../Images/15af27e463f2b8a1ff69011c827b6d0c.png)

有没有人有关于如何让它看起来像原来的任何建议，减去行之间的空间？

编辑：这是一个 jfiddle 示例：http: [//jsfiddle.net/f8K3T/](http://jsfiddle.net/f8K3T/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:00:49.207

您的标记中有明确的换行符。

这些具有非零高度，因此存在间隙。

我叉了你的小提琴：http: [//jsfiddle.net/zmA8N/](http://jsfiddle.net/zmA8N/)

我想这就是你所追求的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:48:48.400

您可以在文本元素上使用 margin-top 和 margin-bottom 使它们靠得更近。
还要确保 padding:0;

如果您提供 css 样本或 JS fiddle 我可以给出准确的值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T20:51:07.063

您可以改为使用 css 属性 height: #px; 而是在 div 元素上，而不是定义行高。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T21:08:39.020

[像这样](http://jsfiddle.net/f8K3T/1/)删除`<br />`标签

如果你想要行之间的间距，只需添加：`span{ margin-bottom: 3px; }`

# java - Java Stack Overflow 折磨了我好多年

> ID：10824002
> 
> 赞同：1
> 
> 时间：2012-05-30T20:46:34.330
> 
> 标签：java, stack-overflow

我刚刚加入了这个很棒的社区，但很遗憾我承认我在这里的第一篇文章与一个痛苦的错误有关。当我做我的**家庭作业**时，我遇到了各种各样的错误。到目前为止的故事：

*   我必须创建一个继承 JButton 功能的抽象 Brick 类，它支持一个抽象方法，我称之为brickSpecialAction()，由各种砖子类（小丑砖、洗牌砖、彩色砖）实现。
*   我还必须创建一个继承 JFrame 并为游戏添加棋盘功能的 Grid 类，并将功能扩展到每次用户没有可用动作时改变关卡，并且超过分数阈值，每次按下时就像一个 ActionListener其中一块砖等等
*   除了这些类，我还有一些小类，比如关卡，它们支持游戏，但到目前为止没有做任何戏剧性的事情，或者与错误有​​关的任何事情。
*   **错误的来源：**在制作 Brick 的第一个子类 ColourBrick（具有一定背景颜色的砖块）期间，我必须提供brickSpecialAction 方法的实现，每次我都会由侦听器类（Grid）调用按那种类型的砖。现在，起初，该方法以空指针异常折磨了我可怜的灵魂。在对代码进行了一些进一步的研究和改进之后，我想出了一个可行的解决方案，但实际上只是造成了更大的混乱：它没有正确执行，并且手头出现了 StackOverflowError。

**到目前为止的课程：**

**基础砖类**

```
package gr.teicrete.epp.ooplab.brickbreaker;

import java.awt.Color;
import java.awt.Container;
import java.awt.Point;
import javax.swing.JButton;
import javax.swing.JFrame;

/**
 * The Brick class will provide general functionality to our bricks.
 *
 * @author Fokis
 */
public abstract class Brick extends JButton{

    private Point brickPosition; // The brick's position
    private Container cont;

    /**
     * The Brick constructor used to initialize the bricks. Not really used as
     * we cannot instantiate the brick class, being abstract and such.
     *
     * @param posx The brick's x position
     * @param posy The brick's y position
     */
     public Brick(int posx, int posy) {
        this.brickPosition = new Point(posx, posy);
        this.setVisible(true);
     }

     /**
      * The public accessor method to the brick's position
      * @return The brick's position
      */
      public Point getBrickPosition() {
         return this.brickPosition;
      }

     /**
      * The public accessor method to the brick's container.
      *
      * @return The grid's container.
      */
      public Grid getContainer() {
         return (Grid) this.cont;
      }

      public abstract int brickSpecialAction(Brick brickie);
 } 
```

基本的 ColorBrick 类：

```
package gr.teicrete.epp.ooplab.brickbreaker;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Point;
import java.awt.event.MouseEvent;
import java.util.Random;

/**
 * The ColourBrick class provides functionality to the colourful bricks.
 *
 * @author Fokis
 */
 public class ColourBrick extends Brick {

/**
 * The constructor used to initialize our colour bricks.
 *
 * @param posx The x position of the brick. Used for indexing later.
 * @param posy The y position of the brick. Used for indexing later.
 * @param seed The seed to the random number generator, so as to pick
 * colours available at each level.
 */
public ColourBrick(int posx, int posy, int seed) {
    super(posx, posy);
    this.setBackground(this.pickColour(seed));
    this.setPreferredSize(new Dimension(50, 44));
}

/**
 * Public method used to initialise our bricks with a colour.
 *
 * @param seed the initial seed we provide to the random number generator
 * @return The color of the brick to be initialized.
 */
 public Color pickColour(int seed) {

    Random randomColour = new Random(); // A random object, for RNG
    Color assignedColor; // Used to store the color we picked

    int potentialColour = randomColour.nextInt(seed); // Picking a random num

    switch (potentialColour) {
        case 0:
            assignedColor = Color.RED;
            break;
        case 1:
            assignedColor = Color.CYAN;
            break;
        case 2:
            assignedColor = Color.GREEN;
            break;
        case 3:
            assignedColor = Color.YELLOW;
            break;
        case 4:
            assignedColor = Color.PINK;
            break;
        case 5:
            assignedColor = Color.MAGENTA;
            break;
        case 6:
            assignedColor = Color.BLACK;
            break;
        case 7:
            assignedColor = Color.ORANGE;
            break;
        case 8:
            assignedColor = Color.GREEN;
            break;
        default:
            // Not really needed, but we provide it to ensure that the compiler
            // won't argue that assignedColor might be uninitialized
            assignedColor = null;
    }
    return assignedColor;
}

/**
 * The method used to destroy the bricks that we click on.
 *
 * @param brickie Used for the recursive calls of the method.
 * @return The total number of bricks destroyed.
 */
@Override
public int brickSpecialAction(Brick brickie) {

    int totalRemovedBricks = 0; // Used to calculate the total number of removed bricks

    this.setVisible(false); // Making it invisible
    totalRemovedBricks++; // Counting it as a brick destroyed, in order to calculate the score later

    Grid omnigrid = (Grid) this.getTopLevelAncestor();
    Point brickPosition = this.getBrickPosition();

    for (int i = 0; i < 4; i++) {
        switch (i) {
            case 0:
                // Checking to see if the brick above the one we have now has the same colour as the one we are in now
                if (omnigrid.getBrickByXAndY(brickPosition.x, brickPosition.y + 1).getBackground().equals(this.getBackground())) {
                    totalRemovedBricks += brickSpecialAction(omnigrid.getBrickByXAndY(brickPosition.x, brickPosition. y + 1));
                }
                break;
            case 1:
                // Checking to see if the brick beyond the one that we have now has the same colour as the one we are in now
                if (omnigrid.getBrickByXAndY(brickPosition.x, brickPosition.y - 1).getBackground().equals(this.getBackground())) {
                    totalRemovedBricks += brickSpecialAction(omnigrid.getBrickByXAndY(brickPosition.x, brickPosition.y - 1));
                }
                break;
            case 2:
                // Checking to see if the brick on the left of the one we have now has the same colour as the one we are in now
                if (omnigrid.getBrickByXAndY(brickPosition.x - 1, brickPosition.y).getBackground().equals(this.getBackground())) {
                    totalRemovedBricks += brickSpecialAction(omnigrid.getBrickByXAndY(brickPosition.x - 1, brickPosition.y));
                }
                break;
            case 3:
                // Checking to see if the brick on the right of the one we have now has the same colour as the one we are in now
                if (omnigrid.getBrickByXAndY(brickPosition.x + 1, brickPosition.y).getBackground().equals(this.getBackground())) {
                    totalRemovedBricks += brickSpecialAction(omnigrid.getBrickByXAndY(brickPosition.x + 1, brickPosition.y));
                }
                break;
        }
    }
    return totalRemovedBricks; // returning the total ammount of bricks destroyed used to calculate the score later
}
} 
```

和网格类：

```
package gr.teicrete.epp.ooplab.brickbreaker;

import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JFrame;

/**
 * The Grid class will provide objects that will be used as our board for the
 * game.
 *
 * @author Fokis
 */
 public class Grid extends JFrame implements ActionListener {

private Levels currentLevel; // A reference to the current level
private int generalHiscore; //  A variable storing the current HiScore
private float currentScore = 0.0f; // A variable storing the current Score
private int levelsElevated = 1; // A variable used to store the levels the player has elevated each time
private boolean changed;
private String playerName; // A variable used to store the current player's name

/**
 * The Grid constructor. Pretty much handles everything. From initialising
 * player score to filling the grid with bricks.
 *
 * @param playerName The current player's name.
 */
public Grid(String playerName) {
    super();
    this.currentLevel = new Levels(levelsElevated);
    this.generalHiscore = 0;
    this.currentScore = 0;
    this.playerName = playerName;
    this.setLayout(new GridLayout(currentLevel.getLevelRows(), currentLevel.getLevelColumns()));
    initialize();
    pack();

    this.setVisible(true);
    this.setTitle("Player name: " + playerName + " Current Score: " + currentScore + " Hiscore: " + currentLevel.getHiScore()); // To be reviewed.
    this.setDefaultCloseOperation(Grid.EXIT_ON_CLOSE);
}

/**
 * The method that will be invoked everytime we need to change the level
 *
 * @return Whether or not the method was successful.
 */
public boolean changeLevel() {
    levelsElevated++;
    this.currentLevel = new Levels(levelsElevated);
    this.setLayout(new GridLayout(currentLevel.getLevelRows(), currentLevel.getLevelColumns()));
    return true;
}

/**
 * The method that will be invoked everytime we need to see if the game
 * should change level, or if the player lost.
 */
public void checkState() {
    if (hasAvailableMoves() == false && isAboveScoreThreshold() == true) {
        changed = changeLevel();
    } else if (hasAvailableMoves() == false && isAboveScoreThreshold() == false) {
        System.out.println("What a pity. You lost.");
    }
}

/**
 * The method that will be used to calculate the score.
 *
 * @param removedBricks The total number of bricks removed each time. Used
 * to actually calculate the score.
 * @return The player's current score.
 */
public float calculateScore(int removedBricks) {
    if (removedBricks <= 4) {
        currentScore += removedBricks;
    } else if (removedBricks >= 5 && removedBricks <= 12) {
        currentScore += (removedBricks * 1.5);
    } else {
        currentScore += 2 * removedBricks;
    }

    if (currentScore > currentLevel.getHiScore()) {
        currentLevel.setHiScore(currentScore);
    }

    return currentScore;
}

/**
 * The method that will be used to check if the player is above each level's
 * winning score threshold.
 *
 * @return The current state of the player's score.
 */
public boolean isAboveScoreThreshold() {
    if (currentScore >= currentLevel.getLevelRequiredScore()) {
        return true;
    } else {
        return false;
    }
}

/**
 * The method that will be used to check if the player has available moves
 * left. Will later be used to check whether or not we should change level.
 * NOT YET IMPLEMENTED.
 *
 * @return Whether or not the player has available moves left
 */
public boolean hasAvailableMoves() {
    return true;
}

/**
 * The method that will be invoked everytime we need to parse one of the
 * bricks.
 *
 * @param x The x position of the brick
 * @param y The y position of the brick
 * @return The brick that we want to manipulate.
 */
public Brick getBrickByXAndY(int x, int y) {
    return (Brick) this.getContentPane().getComponent((y * this.currentLevel.getLevelRows()) + x);
}

/**
 * The method that will be invoked to actually fill our Grid with bricks.
 */
public void initialize() {

    int acceptedBricks; // To be used for calculation of acceptedBricks

    for (acceptedBricks = 0; acceptedBricks < currentLevel.getLevelTotalBricks(); acceptedBricks++) {
        for (int x = 1; x <= currentLevel.getLevelRows(); x++) {
            for (int y = 1; y <= currentLevel.getLevelColumns(); y++) {
                Brick newBrick = new ColourBrick(x, y, currentLevel.getLevelAvailableColours());
                newBrick.addActionListener(this);
                this.add(newBrick);
                acceptedBricks++;
            }
        }
    }
}

@Override
public void actionPerformed(ActionEvent evt) {
    Brick brickClicked = (Brick) evt.getSource();
    calculateScore(brickClicked.brickSpecialAction(brickClicked));
    this.setTitle("Player name: " + playerName + " Current Score: " + currentScore + " Hiscore: " + currentLevel.getHiScore());
    this.checkState();
}
} 
```

**重要提示：**我不会便宜到向其他人寻求项目或问题的解决方案，我只是希望有人向我解释为什么我会出现此错误。在那之后，我将尝试独自解决这个问题。但请帮助我。我已经很努力了。

**编辑：**堆栈跟踪：

```
Exception in thread "AWT-EventQueue-0" java.lang.StackOverflowError
    at java.awt.Component.isVisible_NoClientCode(Component.java:1288)
    at java.awt.Component.isVisible(Component.java:1285)
    at javax.swing.JComponent.setVisible(JComponent.java:2639)
    at gr.teicrete.epp.ooplab.brickbreaker.ColourBrick.brickSpecialAction(ColourBrick.java:90)
    at gr.teicrete.epp.ooplab.brickbreaker.ColourBrick.brickSpecialAction(ColourBrick.java:101)
    at gr.teicrete.epp.ooplab.brickbreaker.ColourBrick.brickSpecialAction(ColourBrick.java:101)
    at gr.teicrete.epp.ooplab.brickbreaker.ColourBrick.brickSpecialAction(ColourBrick.java:101)
    at gr.teicrete.epp.ooplab.brickbreaker.ColourBrick.brickSpecialAction(ColourBrick.java:101)
    at gr.teicrete.epp.ooplab.brickbreaker.ColourBrick.brickSpecialAction(ColourBrick.java:101)
    at gr.teicrete.epp.ooplab.brickbreaker.ColourBrick.brickSpecialAction(ColourBrick.java:101)
    at gr.teicrete.epp.ooplab.brickbreaker.ColourBrick.brickSpecialAction(ColourBrick.java:101)
    at gr.teicrete.epp.ooplab.brickbreaker.ColourBrick.brickSpecialAction(ColourBrick.java:101)
    at gr.teicrete.epp.ooplab.brickbreaker.ColourBrick.brickSpecialAction(ColourBrick.java:101)
    at 
```

它一直像这样一直在吓人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:51:06.380

您的brickSpecialAction() 方法包含对其自身的调用。如果没有适当的控制，这会使您陷入无限递归循环。StackOverflow 错误经常是由这种情况引起的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:00:13.187

出现问题是因为您检查上面的块是否颜色相同，如果是则重复相同的逻辑，并且该逻辑正在检查下面的块是否颜色相同，如果是则重复相同的逻辑。因此，如果顶部的块与底部的块颜色相同，则它会来回弹跳，直到出现堆栈溢出。也许在您检查它们时删除这些块，或者制作一些标志以表示它们已经被标记为要删除并更改逻辑以检查它而不是无限地重新诅咒。

我猜你的代码还有其他问题，但这可能会让你克服当前的错误......

```
public int brickSpecialAction(Brick brickie) {

    int totalRemovedBricks = 0; // Used to calculate the total number of removed bricks
    if (!this.isVisible)    //Or whatever you can check to see if you have set this invisible already
        return;             // You've already executed on this block
    this.setVisible(false); // Making it invisible 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T21:08:12.483

你的问题绝对是brickSpecialAction() 中的递归

[从概念上讲，这](http://en.wikipedia.org/wiki/Flood_fill)与您要完成的工作非常相似。

# r - 如何完善以下 R 图？

> ID：10824004
> 
> 赞同：1
> 
> 时间：2012-05-30T20:46:43.757
> 
> 标签：r, plot

我在 R 中有以下情节：

```
x = c(0, 1e-10, 1e-08, 1e-06, 1e-05, 0.001, 0.1);
y = c(22000, 21490, 17252, 9204, 6118, 5092, 4998);
z = c(85.59, 85.59, 85.58, 85.49, 85.29, 85.29, 85.29);

x1 = c(0, 1e-10, 1e-08, 1e-06, 1e-05, 0.001, 0.1);
y2 = c(22000, 20039, 15185, 7705, 5436, 5223, 4933);
z2 = c(85.59, 85.59, 85.58, 85.53, 85.46, 85.49, 85.49);

y = y / 60;

y2 = y2 / 60;

x = log(x);

par("mar")
par(mar = c(par("mar")[1:3], 5.1))

plot(x,y, type="n", lwd=4, ylab="", xlab="threshold", xaxt="n",yaxt="n")

axis(1,lwd=4)
axis(2,lwd=4)

points(x, y, type = "l", lwd=4)

points(x, y, col="red", cex=2, pch=19)

points(x, y2, lwd=4, type="o", lty=2, col="black");

points(x, y2, col="red", cex=2, pch=19);

par("usr")
par(usr = c(par("usr")[1:2], 84,86))

axis(4, lwd=4)
points(x, z, type="l", lwd=4)

points(x, z, col="blue", cex=2, pch=15)

points(x, z2, type="l", col="black", lty=2, lwd=4)

points(x, z2, col="blue", cex=2, pch=15)

mtext("Measure1", side = 4, col = "blue",line=3)
mtext("Measure2", side = 2, col = "red",line=3) 
```

它对我来说几乎是完美的，但我只想根据以下内容对其进行调整：

1.  左 y 轴和 x 轴 - 它们更粗，但由于某种原因，粗体部分并未在*整个*轴上延伸。

2.  我想让数字和标签的字体更大一点，也许是粗体。

3.  我什至可能想将字体更改为 Times，但从我在网上看到的情况来看，这对我来说听起来很麻烦。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:14:14.977

正如@thelatemail 在上面的评论中提到的那样，您的第一个问题可以通过以下功能来回答`box`：

```
box(lwd=4) 
```

如果您只希望带有轴的边是粗体，那么您需要添加一个`bty`参数：

```
box(lwd=4, bty="u") # For all the different kind of boxes see ?par. 
```

要更改标签的字体和大小，您必须在and语句中使用参数`font`和`cex.lab`或：`cex.axis``plot``axis`

```
axis(1, font=2, cex.axis=1.1) #font=2 correspond to bold face. See ?par for more information 
```

最后对于字体，您可以使用参数`family`，但是它在各种输出设备上的工作方式不同。您将在此答案的“字体”部分`?x11`和[此答案](https://stackoverflow.com/a/7121913/1451109)中找到有关该主题的更多信息。

```
axis(1, family="Times") #This will work with Cairo devices for example. 
```

这是您的绘图，`cex.axis`设置为 1.1，粗体字体和粗体 U 形框以及 Times 字体： ![在此处输入图像描述](../Images/80e1e3ed3464ba452e9e4f1bcd93d89b.png)

# css - CSS 声明中的两个点是什么意思？

> ID：10824007
> 
> 赞同：23
> 
> 时间：2012-05-30T20:46:57.283
> 
> 标签：css, twitter-bootstrap, css-selectors

这是来自[Twitter Bootstrap的一些代码](http://twitter.github.com/bootstrap/)

```
.navbar .nav.pull-right .dropdown-menu,
.navbar .nav .dropdown-menu.pull-right {
  left: auto;
  right: 0;
} 
```

那么从那是什么`.nav.pull-right`意思呢？（注意有两个点）

我在[这里](http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/)搜索过，因为我认为它是某种选择器，但我找不到它。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-30T20:49:09.463

两个点表示两个类别。

IE 它正在选择所有具有 nav 和 pull-right 类的元素，它的目标 HTML 看起来像这样

```
<div class="nav pull-right"></div> 
```

它也不一定意味着它正在寻找一个 div 。它可以是任何元素。

根据您的完整选择器，它会匹配这些 `.navbar .nav.pull-right .dropdown-menu, .navbar .nav .dropdown-menu.pull-right`

```
<element class='navbar'>
    <element class='nav pull-right'>
        <element class='dropdown-menu'>It would match this!</element>
    </element>
</element> 
```

也

```
<element class='navbar'>
    <element class='nav'>
        <element class='dropdown-menu pull-right'>It would also match this!</element>
    </element>
</element> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-30T20:49:02.087

这意味着一个元素同时具有类`nav`和`pull-right`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-30T20:51:49.687

选择器查找任何具有该类的元素，该类`nav`也有一个类`pull-right`：

```
<div class="nav pull-right"></div> 
```

`class`附带说明一下，选择器和属性中的顺序都无关紧要。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-30T20:50:05.503

`.nav.pull-right`表示匹配具有“nav”类和“pull-right”类的元素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-11T07:33:18.513

2 个点实际上**同时匹配 2 个类（选择器）**

在阅读了汇总的答案后，我仍然不是很清楚，并且在阅读 [*.container div { }*](https://css-tricks.com/whats-the-difference/ "What's the difference between .container div { } and div.container {}")[和](https://css-tricks.com/whats-the-difference/ "What's the difference between .container div { } and div.container {}")[*div.container { }*](https://css-tricks.com/whats-the-difference/ "What's the difference between .container div { } and div.container {}")后进行了研究并得出了一个深思熟虑的理解，其中讨论了**点**（本例）和**空格**之间的区别选择器（匹配第一个选择器的孩子）。[](https://css-tricks.com/whats-the-difference/ ".container div { } 和 div.container {} 有什么区别")

 ******回忆一下关于 CSS 选择器的经验法则：

1.  **空格**（在选择器中）表示右选择器是左选择器的子选择器
2.  **点**捐赠一个**类选择器**
3.  否则，**标签选择器，** *例如 <DIV> 或 <H3> 或 <td>*

其中规则 2 和 3 在某种程度上可以互换

* * *

**原始场景：**

```
.nav.pull-right 
```

将第一个点类选择器转换为标记选择器（将规则 2 与规则 3 互换）成为**标记+点方案**

```
ul.pull-right 
```

最后，结果是微不足道的，它匹配了所有定义了 pull-right 类的 ul 标记

PS我不会再混淆了，希望各位读者不要再混淆了

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-17T12:22:05.200

这是我对重复问题的回答。我已经付出了很多努力，以至于我想与“原始”帖子分享。

它只选择具有“move”和“up”类的元素。 [http://www.w3schools.com/cssref/css_selectors.asp](http://www.w3schools.com/cssref/css_selectors.asp)

```
div{
  width: 60px;
  height: 60px;
  background: beige;
  border: solid black;
  float:left;
  margin: 10px;
  text-align: center;
  line-height: 60px;
  font-family: arial;
  font-weight: bold;
}
.separator{
  width: 5px;
  height: 60px;
  border: solid black;
  background: grey;
  clear: both;
}

.move.up{
  background: green;
}

//Additional knowledge
.class1 .class2{
  background: orange;
}
span div{
  background: purple;
}

.class3, .class4{
  background: brown;
}
```

```
<div class="separator"></div>
<div class="move">
  1
  </div>
<div class="up">
  2  
</div>
<div class="move up">
  3
</div>
<div class="move classyclass up">
  4
</div>
<div class="separator"></div>

<!-- Additional knowledge :) -->
<div class="class1">
  5
  </div>
<div class="class2">
  6
  </div>
<div class="class1 class2">
  7
  </div>
<div class="class1 classyclass class2">
  8
  </div>
<span>
  <div>8.1</div>
</span>
<div class="separator"></div>
<div class="class3">
  9
  </div>
<div class="class4">
  10
  </div>
<div class="class3 class4">
  11
  </div>
<div class="class3 classyclass class4">
  12
  </div>
```******

# php - Mysql 按日期排序未按预期工作

> ID：10824012
> 
> 赞同：2
> 
> 时间：2012-05-30T20:47:23.630
> 
> 标签：php, mysql, sql-order-by

我正在使用 php 从我的 mysql 数据库中提取记录，并希望通过名为 expdate 的数据库字段对它们进行排序。

提醒的日期以 17-04-12 的格式作为 varchar 存储在表中。

我正在使用以下代码提取所有记录并按 expdate 列对其进行排序。

```
 <table border="0" style="text-align:left;">
      <tr style="text-align:left;">
        <th style="text-align:left;" width="200px"  scope="col">Name</th>
        <th style="text-align:left;" width="200px"  scope="col">Email</th>
      <th style="text-align:left;" width="200px" scope="col">Telephone</th>
      <th style="text-align:left;" width="200px" scope="col">Current Cover Expires</th>
      </tr>
    <?php
    $today = date("d-m-y");
    $result = mysql_query("SELECT * FROM ymeg_chronoforms_data_NewsletterSubscribe ORDER BY expdate")or die(mysql_error());

    echo '<tr style="text-align:left;">';
    while($row = mysql_fetch_array($result))
      {
        echo '<td style="text-align:left;">';  
      echo $row['name'];
      echo '</td>'; 
      echo '<td style="text-align:left;">'; 
      echo $row['email'];
         echo '</td>'; 
    echo '<td style="text-align:left;">'; 
      echo $row['tel'];
         echo '</td>'; 
     echo '<td style="text-align:left;">'; 
      echo $row['expdate'];
        echo '</td>'; 
      echo "</tr>";
      }

      ?>

    </table> 
```

问题是，列的排序非常随机，它输出记录并按此日期顺序对它们进行排序：

```
08-07-12
17-05-12
17-05-13 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T20:50:27.593

尝试

```
order by STR_TO_DATE(expdate, '%d-%m-%y') 
```

（下次使用真正的日期格式......日期数据;））

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:51:42.723

在 MySQL 中以正确的日期格式存储日期。最好重新排列日期选择器生成的格式，然后将重新排列的日期正确存储在 MySQL 中。这应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T20:50:16.777

需要使用数据转换：

```
$today  = date("d-m-y");
$result = mysql_query("SELECT * FROM ymeg_chronoforms_data_NewsletterSubscribe ORDER BY  STR_TO_DATE(expdate,'%d-%m-%Y')") or die(mysql_error()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T20:50:35.013

好吧，这是很好的安排，我可以确认 2008 年 7 月 12 日在 2017 年 5 月 12 日之前，这也是在 2017 年 5 月 13 日之前......

我猜你必须为你选择的日期指定一个特定的格式

*   expdate 是一个 VARCHAR：就像其他成员所说，使用 STR_TO_DATE(expdate, '%d/%m/%Y')
*   expdate 是一个日期：使用 DATE_FORMAT(expdate, '%d/%m/%Y')

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-30T20:50:53.020

尝试这个

```
$result = mysql_query("SELECT * FROM ymeg_chronoforms_data_NewsletterSubscribe ORDER BY expdate DESC")or die(mysql_error()); 
```

使用 ASC=上升

使用 DESC=后代

# facebook - Facebook“喜欢”按钮不显示元数据信息

> ID：10824016
> 
> 赞同：0
> 
> 时间：2012-05-30T20:47:31.693
> 
> 标签：facebook, facebook-graph-api

我是使用 Facebook API 的新手。我想在我的网站上使用 Facebook Like 按钮。我无法在我的页面上获取元数据信息。我想，我一定错过了一些微不足道的东西。mata信息是：

```
<meta property="og:title" content="Testing"/>
<meta property="og:type" content="article"/>
<meta property="og:url" content="http://localhost:8080/SocialPay/test.html"/>
<meta property="og:image" content="http://upload.wikimedia.org/wikipedia/commons/thumb/0/06/Facebook.svg/215px-Facebook.svg.png"/>
<meta property="og:site_name" content="SOCIAl DG"/>
<meta property="og:description" content="Social networking site for buying and selling content."/> 
```

页面中的代码是

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=104879852980588";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like" data-send="false" data-layout="button_count" data-width="200" data-show-faces="false" 
    data-href="http://localhost:8080/SocialPay/test.html"></div> 
```

有人可以指出我错过了什么。我也在本地测试页面。是不是这个问题。

# c# - 如何停止当前服务？

> ID：10824025
> 
> 赞同：-1
> 
> 时间：2012-05-30T20:48:30.473
> 
> 标签：c#, windows-services

我想要做的是，如果满足某个条件，停止服务。

我可以通过以下方式停止服务

```
 ServiceController sc = new ServiceController("serviceName");
 sc.Stop(); 
```

有没有办法在不传入服务名称的情况下停止当前服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:52:20.837

有一个没有参数的[构造函数。](http://msdn.microsoft.com/en-us/library/708fb7c4)

这应该为您提供一个位于当前运行的 Windows 服务上下文中的服务控制器实例。

# java - 获取文件的元数据

> ID：10824027
> 
> 赞同：20
> 
> 时间：2012-05-30T20:48:45.207
> 
> 标签：java, metadata

可以知道java中文件的元数据吗？如果是，如何在java中获取文件的元数据？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-30T20:56:41.310

您可以从文件中获取一组基本的元数据。

```
Path file = ...;
BasicFileAttributes attr = Files.readAttributes(file, BasicFileAttributes.class);

System.out.println("creationTime: " + attr.creationTime());
System.out.println("lastAccessTime: " + attr.lastAccessTime());
System.out.println("lastModifiedTime: " + attr.lastModifiedTime());

System.out.println("isDirectory: " + attr.isDirectory());
System.out.println("isOther: " + attr.isOther());
System.out.println("isRegularFile: " + attr.isRegularFile());
System.out.println("isSymbolicLink: " + attr.isSymbolicLink());
System.out.println("size: " + attr.size()); 
```

有些事情是平台相关的，可能会抛出异常或返回意外结果。

您可以在[管理元数据（文件和文件存储属性）](http://docs.oracle.com/javase/tutorial/essential/io/fileAttr.html)中阅读更多内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-30T20:55:54.593

FITS 是一个命令行应用程序，它捆绑了许多可以识别和表征文件（提取元数据）的工具。它还有一个java API

*   [http://code.google.com/p/fits/](http://code.google.com/p/fits/)
*   [http://code.google.com/p/fits/wiki/developer_documentation](http://code.google.com/p/fits/wiki/developer_documentation)

还有许多可以执行类似任务的识别和表征工具。Apache Tika、Pronom Droid、Jhove 等

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-03T13:32:38.443

## 从java程序获取文件元数据

```
package demo.test;

import java.io.File;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.nio.file.attribute.BasicFileAttributeView;
import java.nio.file.attribute.BasicFileAttributes;
import java.nio.file.attribute.FileTime;
import java.text.SimpleDateFormat;

public class FileCreationTime {
public  String getCreationDetails(File file)
    {       
       try{         
        Path p = Paths.get(file.getAbsolutePath());
        BasicFileAttributes view
           = Files.getFileAttributeView(p, BasicFileAttributeView.class)
                  .readAttributes();
        FileTime fileTime=view.creationTime();
        return (""+new SimpleDateFormat("dd/MM/yyyy HH:mm:ss").format((fileTime.toMillis())));
       }
       catch(IOException e){ 
        e.printStackTrace(); 
       }
       return ""; 
   }

   public static void main(String...str){
       System.out.println
           (new FileCreationTime().getCreationDetails(new File("D:/connect.png")));
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-07T19:47:45.893

我认为很容易使用这个以下项目从任何文件中获取信息。

```
import java.io.File;

public class FileInfo{
    public static void main (String []args){
        File f = new File("file100.txt");
        if(f.exists()){
            System.out.println("Name: "+ f.getName());
            System.out.println("Path: "+ f.getAbsolutePath());
            System.out.println("Size: "+ f.length());
            System.out.println("Writeable: "+ f.canWrite());
            System.out.println("Readable: "+ f.canRead());
        }else{
            System.out.println("The File does not exist");
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-31T06:23:51.713

使用 Java 7，你有[nio2](http://docs.oracle.com/javase/tutorial/essential/io/fileio.html)包，新的*Path.class*提供你正在寻找的一切

# jtable - 单击该行时如何获取选定的行？

> ID：10824032
> 
> 赞同：0
> 
> 时间：2012-05-30T20:49:03.000
> 
> 标签：jtable

嗨，我需要知道在哪个事件上使用哪种方法，当我单击此行时，我想获取选定的行，假设这个 JTable 包含 3 列，如果我得到选定的行，我如何访问其中的数据它的3个细胞？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T04:57:46.170

要使用的事件是 JTable table.getSelectedRow()，它返回所选行的 int 类型的索引。您可以发表如下声明：

```
 int selectedRow = table.getSelectedRow();
 int value# = table.getValueAt(selectedRow, column #); 
```

# hadoop - Amazon EMR：使用数据初始化集群

> ID：10824033
> 
> 赞同：3
> 
> 时间：2012-05-30T20:49:03.613
> 
> 标签：hadoop, amazon-s3, hdfs, emr

我正在使用 Amazon EMR，并且能够使用 CLI 工具创建和运行作业流。作业运行良好。但是，当我尝试将数据从 S3 和名称节点的本地文件系统加载到我的 EMR 集群的 HDFS 时，我遇到了问题。

我想从 S3 填充 HDFS。我正在尝试使用 S3DistCp 工具来执行此操作。我正在运行这个命令：

```
elastic-mapreduce --jobflow $JOBFLOWID --jar s3://us-east-1.elasticmapreduce/libs/s3distcp/1.0.1/s3distcp.jar --arg --src --arg 's3n://my-bucket/src' --arg --dest --arg 'hdfs:///my-emr-hdfs/dest/' 
```

我在日志中收到两个可能相关的错误。在 mapreduce 作业输出中，作业完成到 100%，但最终失败：

```
INFO org.apache.hadoop.mapred.JobClient (main):     Map output records=184
ERROR com.amazon.elasticmapreduce.s3distcp.S3DistCp (main): 21 files failed to copy 
```

在名称节点守护程序日志中，我收到此异常：

```
INFO org.apache.hadoop.ipc.Server (IPC Server handler 13 on 9000): IPC Server handler 13 on 9000, call addBlock(/mnt/var/lib/hadoop/tmp/mapred/system/jobtracker.info, DFSClient_-1580223521, null) from xx.xx.xx.xx:xxxxx: error: java.io.IOException: File /mnt/var/lib/hadoop/tmp/mapred/system/jobtracker.info could only be replicated to 0 nodes, instead of 1
java.io.IOException: File /mnt/var/lib/hadoop/tmp/mapred/system/jobtracker.info could only be replicated to 0 nodes, instead of 1 at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:1531)
at org.apache.hadoop.hdfs.server.namenode.NameNode.addBlock(NameNode.java:685)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563)
at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388)
at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1059)
at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382) 
```

我在创建工作流时设置了 dfs.replication=1 。我的节点是 c1.mediums，我试图推送到 HDFS 的数据低于 3GB。所以它不应该是一个磁盘外的问题。但也许我错过了一些东西。

两个问题：1) 了解 S3DistCp 失败的原因吗？2）第二个问题有些无关。是否可以创建一个作业流，其中第一个作业是 S3DistCp 作业以使用数据初始化集群？

任何见解表示赞赏。谢谢。

更新：我在评论下面的测试似乎没有用。这是来自日志的更多信息。

```
WARN org.apache.hadoop.hdfs.DFSClient (Thread-15): Error Recovery for block null bad datanode[0] nodes == null
WARN org.apache.hadoop.hdfs.DFSClient (Thread-15): Could not get block locations. Source file "/mnt/tmp/mapred/system/jobtracker.info" - Aborting...
WARN org.apache.hadoop.mapred.JobTracker (main): Writing to file hdfs://xx.xx.xx.xx:xxxx/mnt/tmp/mapred/system/jobtracker.info failed!
WARN org.apache.hadoop.mapred.JobTracker (main): FileSystem is not ready yet!
WARN org.apache.hadoop.mapred.JobTracker (main): Failed to initialize recovery manager. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T23:57:28.947

对于第一个查询“Jobtracker.info 只能复制到 0 个节点，而不是 1”希望这会有所帮助： [http](http://wiki.apache.org/hadoop/FAQ#What_does_.22file_could_only_be_replicated_to_0_nodes.2C_instead_of_1.22_mean.3F) ://wiki.apache.org/hadoop/FAQ#What_does_.22file_could_only_be_replicated_to_0_nodes.2C_instead_of_1.22_mean.3F 从以上链接：

> 3.13。“文件只能复制到 0 个节点，而不是 1 个”是什么意思？
> 
> NameNode 没有任何可用的 DataNode。这可能是由多种原因引起的。检查 DataNode 日志、NameNode 日志、网络连接……请查看页面： [CouldOnlyBeReplicatedTo](http://wiki.apache.org/hadoop/CouldOnlyBeReplicatedTo)

当启动数据节点守护程序有延迟时，我在尝试部署单节点集群时遇到了类似的问题

# php - PHP session var 是否已设置？

> ID：10824038
> 
> 赞同：1
> 
> 时间：2012-05-30T20:49:12.877
> 
> 标签：php, session, isset

这是一小段代码，从单个 .php 文件的顶部逐字复制和粘贴：

```
if (!isset($_SESSION)) { session_start(); }

require_once('rb.php');
require_once('Util.php');

echo("Here is the session: ");
echo(print_r($_SESSION, true));
$isDevel = $_SESSION['isDevel'];
print_r("isDevel is: $isDevel\n");

if (! isset($_SESSION['isDevel'])) {
    die("connections.php: isDevel needs to be set by now!  SESSION: " . 
      print_r($_SESSION, true));
} 
```

这是执行过程中的输出：

```
Here is the session: Array
(
    [isDevel] => This is a string.
    [configObj] => 
)
isDevel is: This is a string.
connections.php: isDevel needs to be set by now! SESSION: Array ( [isDevel] => This is a string. [configObj] => ) 
```

显然 $_SESSION['isDevel'] 已设置，否则我将无法将其打印出来。但是`isset`测试失败了，声称`$_SESSION['isDevel']`没有定义，但同时打印出来！

我已经检查了文档，但我看不出我是如何搞砸的。

**编辑：**

JA 要求将某些东西分配给会话的代码。是这个（来自另一个文件）：

```
if (!isset($_SESSION)) { session_start(); }
$isDevel = 'This is a string.';
$_SESSION['isDevel'] = $isDevel; 
```

Chris 评论说他认为我运行的代码与我发布的代码不同。不对。虽然也许您的意思是除了这里发布的代码之外还有更多的事情发生？如果是这样，那么是的，但是由于代码分布在多个文件中，因此我无法比现有的更好地压缩它。

无论如何，让我明确一点：我在上面发布的代码正在执行，正如你所看到的那样，按照你看到的顺序。[虽然我看到我遗漏了一个 echo() 以使第一个 print_r 不可见——我将在预编辑问题描述中修复它，以避免太多混乱；为了清楚起见，我将添加两个我省略的 require_once 目标，以便代码是逐字复制和粘贴的。] 因此，即使我们可以在 $_SESSION 数组中*看到*该死的 isDevel ，它也没有通过 isset 测试。

我至少很高兴人们怀疑我犯规，因为它证明这个问题非常微妙，足以掩盖一个明显的解释:)

**编辑2：**

报告这件事很尴尬，但我觉得我应该感谢那些花时间帮助我的人。问题是复制和粘贴错误——我报告的代码确实被执行了。但我引用的代码不是负责输出“isDevel 现在需要设置！”的代码。相反，我错误地剪切并粘贴了该消息，然后忘记编辑文本以反映我将其粘贴到的语义。所以代码正在执行，但它没有表现出我归因于它的奇怪行为。

很抱歉浪费了你们的集体时间。我应该对这个错误搜索更聪明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:53:22.743

在检查会话变量之前启动会话。

```
session_start();
if(!isset($_SESSION['isDevel'])) {
//code here
} 
```

# python - 过滤匹配给定逻辑公式的对象

> ID：10824040
> 
> 赞同：0
> 
> 时间：2012-05-30T20:49:17.680
> 
> 标签：python, parsing, filter

我有一个 Python 对象数组，我想获取所有对给定逻辑公式计算为真的对象。

假设对象是任务跟踪系统中的任务。每个任务都有状态、受让人和截止日期。现在，我想获取对于此公式计算为 true 的所有对象：

```
(assignee=cdecker OR due=tomorrow) AND status=open 
```

对于对象字段（`assignee`和`status`）之类的东西，检查相等性将是一件简单的事情，而`due=tomorrow`将是在对象上调用的函数。

是否有一个简单的解析器可以用来解析表达式，然后为我的起始集中的所有对象评估它（基本上将所有文字连接到函数调用）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:13:23.980

尝试[pyparsing](http://pyparsing.wikispaces.com/)。这是一个支持相等、布尔运算和嵌套括号的语法解析器：

```
from pyparsing import *

expr   = Forward()
factor = Forward()
term   = Forward()

iand   = Literal("AND").suppress()
ior    = Literal("OR").suppress()
ieq    = Literal("=").suppress()
lpar   = Literal("(").suppress()
rpar   = Literal(")").suppress()
ident  = Word(alphas)
atom   = ident | lpar + expr + rpar

factor << Group(atom + ZeroOrMore(ieq + atom))("equal")
term   << Group(factor + ZeroOrMore(iand + term))("and")
expr   << Group(term  + ZeroOrMore(ior + expr))("or") 
```

您可以将其应用于您的公式以获得类似树的结构，您可以稍后对其进行评估，例如：

```
formula = "(assignee=cdecker OR due=tomorrow) AND status=open"
tree = expr.parseString(formula, parseAll=True)
print tree.asXML() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:07:31.203

定义一个执行测试的函数，然后：

```
[obj for obj in list_of_obj if func(obj)] 
```

# javascript - Highcharts - 强制显示 x 轴中的类别，即使没有数据

> ID：10824041
> 
> 赞同：9
> 
> 时间：2012-05-30T20:49:18.280
> 
> 标签：javascript, highcharts

我想知道是否有一种方法可以强制 Highcharts 显示传递到其 x 轴的所有类别，而无需提供填充数据以使其正常工作。例如，[http://jsfiddle.net/cbargren/Sdnqu/](http://jsfiddle.net/cbargren/Sdnqu/)指定了 3 个额外的 x 轴类别（foo、bar、baz），但没有任何实际数据（该系列不一定有相应类别的数据），并且他们没有出现在图表上。这可以做到吗？谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-30T21:23:42.397

将 xAxis 上的最大值设置为要显示的最后一个类别的索引。看到这个[jsfiddle](http://jsfiddle.net/Sdnqu/2/)

```
xAxis: {
       categories: ['Apples', 'Bananas', 'Pears', 'Oranges', 'foo', 'bar', 'baz'],
       max:6
}, 
```

# python - 带有列表的字符串格式化 - 字符串格式化的更多 Pythonic 解决方案

> ID：10824042
> 
> 赞同：1
> 
> 时间：2012-05-30T20:49:22.210
> 
> 标签：python, string

所以假设我有一串文本：

```
"""Blah blah blah %s. And also blah blah blah %s. Oh! One more thing, blah blah blah %s!!!""" 
```

和一个值列表：

```
values = ['foo', 'bar', 'baz', ...] 
```

现在，我有几个变量（在我的情况下，类似于 7，尽管我可以将其减少到 3 或 4）并且我想将它们全部插入这里，但是，有五个条件可以导致不同的值对于变量（以及一些输入），所以我想做的是获取一个列表，然后将其弹出。通常我会这样做：

```
"""Blah blah blah %s. And also blah blah blah %s. Oh! One more thing, blah blah blah %s!!!""" % (VariableA, VariableB, VariableC) 
```

是否可以以相对简单的方式使用值列表来代替？

我试图想出一种更 Pythonic 的字符串格式化方式，而不是在多个 if 条件中设置多个变量

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T20:53:55.443

使用`.format()`，您可以展开列表，使其值成为函数的参数：

```
>>> vars = [1, 2, 3, 4]
>>> print '{} {} {} {}'.format(*vars)
1 2 3 4 
```

正如@TryPyPy 指出的那样，使用旧式字符串格式的等效语法将是：

```
>>> vars = [1, 2, 3, 4]
>>> print '%s %s %s %s' % tuple(vars)
1 2 3 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:02:41.737

也不要忘记 python 模板：

```
d = {'foo':"F.O.O", 'bar':'BAR'}
Template('$foo and $bar').substitute(d) 
```

给出：

```
'F.O.O and BAR' 
```

# android - 我怎样才能在矩形形状的android内画一条线

> ID：10824047
> 
> 赞同：3
> 
> 时间：2012-05-30T20:49:37.463
> 
> 标签：android, line, shape

我有一个像这样的自定义矩形

```
<?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" android:padding="10dp">
    <solid android:color="#FFFFFF" />
    <stroke android:width="1dip" android:color="#ff6600" />
    <corners
        android:bottomRightRadius="5dp"
        android:bottomLeftRadius="5dp"
        android:topLeftRadius="5dp"
        android:topRightRadius="5dp"/>
</shape> 
```

我想像这样在矩形内画一条线

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="line" >
    <solid android:color="@color/cafe" />    
    <stroke android:width="5dip" 
    android:color="#FF0000" android:dashWidth="5dip"/>
</shape> 
```

我该怎么做，帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T21:19:11.797

关键字是[`layer-list`](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)。这是一个完全基于 xml 的非常好的示例：[Android：当设置为背景时，如何使用 layer-list 和 shape 元素绘制水平规则？](https://stackoverflow.com/questions/4146795)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:17:49.167

您可以通过扩展 View 类并覆盖 onDraw 方法来实现自定义视图。在 onDraw() 中，您可以使用 Canvas 类中的方法来绘制您需要的形状。不要忘记首先在方法中调用 super.onDraw()。

[在这里](http://www.androidcompetencycenter.com/2009/08/creatingcustomviews/)找到一个例子。

# android - Appengine 中的共享文件夹已连接未更新

> ID：10824051
> 
> 赞同：0
> 
> 时间：2012-05-30T20:49:46.813
> 
> 标签：android, google-app-engine, sync, android-c2dm

我做了一个 Appengine 连接的 Android 项目。工作意志。制作了自定义实体类和服务类以及数据存储区，如[Tut:Customizing your project](https://developers.google.com/eclipse/docs/appeng_android_add_rpc)中所示。

我的问题：当我向服务类添加新方法，然后使用警告消息时，也更新“请求文件”，但仅在 AppEngine 的共享文件夹中。更改未在我的 Android-Project 的共享文件夹中生效。我使用的方法在[Fine Tuning your project](https://developers.google.com/eclipse/docs/appeng_android_tuning)

So how to make my Android project's shared folder to update with the Appengine-projects Shared folder中有所描述...

在我的共享文件夹类中还有一个警告，因为域无法完全验证类型 path.to.my.server.Service 类不可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:26:20.397

```
<linkedResources>
    <link>
        <name>shared</name>
        <type>2</type>
        <location>$%7BPARENT-1-PROJECT_LOC%7D/CloudSync-
                             AppEngine /shared</location>
    </link>
</linkedResources> 
```

这就是 yourProject-Android/.project 文件的外观，而不是在其中包含硬编码值。我有错误，因为我将文件复制到其他位置。

# facebook - Facebook 连接 403 访问被拒绝

> ID：10824055
> 
> 赞同：1
> 
> 时间：2012-05-30T20:50:17.347
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我正在将 Facebook JavaScript SDK 用于我目前正在从事的项目。它之前一直运行良好，但是当我今天打开它时，无法访问URL [http://connect.facebook.net/en_US/all.js 。](http://connect.facebook.net/en_US/all.js)当我使用 Firebug 检查网络时，我注意到服务器返回 403 Access Denied。

是我做错了什么还是Facebook服务器问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:07:28.980

终于发现是 Facebook 的新 HTTPS 功能在干扰。使用[https://connect.facebook.net/en_US/all.js](https://connect.facebook.net/en_US/all.js)解决了这个问题。似乎有人错误地配置了他们的服务器。

# matlab - Matlab 3D视图矩阵

> ID：10824056
> 
> 赞同：12
> 
> 时间：2012-05-30T20:50:18.867
> 
> 标签：matlab, view, 3d

设`A`为 MATLAB 的 4x4 视图矩阵，通过以下方式从视图函数获得：

```
A = view; 
```

`A(1:3,1:3)`应该对应于旋转和缩放，
`A(1:3,4)`应该对应于平移，并且
`A(4,:)`应该只是`[0 0 0 1]`.

将相机参数设置为以下简单场景时：

```
camproj('orthographic')
set(gca, 'CameraPosition', [0,0,0])
set(gca, 'CameraTarget', [0,0,1])
set(gca, 'CameraUpVector', [0,1,1]) 
```

我明白的`A = view`是：

```
-1 0 0  0.5
 0 1 0 -0.5
 0 0 1 -0.5
 0 0 0    1 
```

现在我不知道我们的 0.5 是从哪里来的。请注意，我将相机位置设置为 [0,0,0]，因此应该没有平移。

另一个特点，通过以下方式将相机位置设置为 [0,0,10]：

```
set(gca, 'CameraPosition', [0,0,10]) 
```

导致 A:=view 矩阵变为

```
1 0  0 -0.5
0 1  0 -0.5
0 0 -1  5.5
0 0  0    1 
```

所以我注意到 -0.5 已更改为 5.5 in `A(3,4)`，这在某种程度上与 5 = 10 / 2有关。
也就是说，将相机位置更改为 [0,0,a] 会使视图矩阵`A(3,4)`大致更改为`a / 2`.

这……很奇怪？奇特？奇怪的？

更新：另一个特点是 A(1:3,1:3) 的行列式是 -1，尽管对于旋转矩阵它应该是 1。当它是 -1 时，这意味着它不仅是旋转，而且是反射。为什么我们需要反思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T14:19:13.353

在 Matlab 2013a 中尝试相同的操作 .. 您会发现结果符合预期 ...我不知道您使用的是哪个版本的 Matlab .. 但它肯定在 8.1 版中已修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T04:18:27.147

不熟悉 matlab，但是：在 3d 图形中，您总是区分投影矩阵和相机矩阵。

投影从相机为零的“相机空间”进入投影空间。应用投影矩阵后，屏幕坐标计算为 x' = x/w 等。因此，在透视下，投影矩阵所做的就是将 z 移动到 w 中。在正字法中，可能会将 z 添加到 x 中。

但它也经常包括窗口变换。在相机空间中，相机位于 0 并且向下看 z，因此坐标更接近 -1..1。但是窗口坐标是 0..1，因此通常是 *.5、+.5 或否定等。

您看到的奇怪之处在于将相机和投影混合在一起。我相信matlab两者都有。使用相机矩阵移动和旋转相机。仅将投影用于窗口坐标和透视效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T08:33:27.597

我有根据的猜测是，matlab 允许您将其设置为像素坐标在（-0.5*viewport 大小，0.5*viewport 大小）的范围内，但在内部使用更常见的像素坐标系，其中每个像素的坐标在（0，视口大小）的范围内。

# java - JComboBox 不显示箭头

> ID：10824059
> 
> 赞同：5
> 
> 时间：2012-05-30T20:50:23.973
> 
> 标签：java, swing, layout, jcombobox

我一直在搜索这个网站和谷歌来解决我的问题，但我找不到任何东西。我认为它应该可以正常工作；但是，事实并非如此。我的 JComboBox 的箭头图标没有出现，我找不到任何地方将其可见性设置为 true。

这是我的代码：

```
public class Driver implements ActionListener {

private JTextField userIDField;
private JTextField[] documentIDField;
private JComboBox repository, environment;
private JButton close, clear, submit;
private JFrame window;

    public Driver()
    {
    window = makeWindow();
    makeContents(window);
    window.repaint();
    }

    private JFrame makeWindow()
    {
    JFrame window = new JFrame("");
    window.setSize(500,300);
    window.setLocation(50,50);
    window.getContentPane().setLayout(null);
    window.setResizable(false);
    window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    window.setVisible(true);

    return window;
    }

    private void makeContents(JFrame w)
    {
    makeDropDowns(w);
    w.repaint();
    }

    private void makeDropDowns(JFrame w)
    {       
    String[] repositoryArray = {"Click to select", "NSA", "Finance", "Test"};
    repository = new JComboBox(repositoryArray);
    repository.setSelectedIndex(0);
    repository.addActionListener(this);
    repository.setSize(150,20);
    repository.setLocation(175,165);
    repository.setEditable(false);
    w.add(repository);

    String[] environmentArray = {"Click to select", "Dev", "Test", "Qual"};
    environment = new JComboBox(environmentArray);
    environment.setSelectedIndex(0);
    environment.addActionListener(this);
    environment.setSize(150,20);
    environment.setLocation(175,195);
    //environment.setEditable(false);
    w.add(environment,0);
}

    public void actionPerformed(ActionEvent e) 
    {

    String repositoryID = "null", environmentID = "null";

    if (e.getSource() == repository)
        {
        repositoryID = (String)repository.getSelectedItem();
        }

    if(e.getSource() == environment)
        {
        environmentID = (String)environment.getSelectedItem();
        }
    }
} 
```

这是问题图片的链接：

![图片](../Images/9963333dc4563ee827773e80d1d62eef.png)

如果有人可以提供帮助，那就太棒了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-01-06T23:14:51.080

这似乎不是您遇到的问题，但是由于箭头消失的相同问题，我发现了这篇文章。

在我的情况下，这是由于我错误地使用`.removeAll()`了`JComboBox`而不是`.removeAllItems()`当我试图清空然后`JComboBox`在刷新我正在使用的数据后重用。只是想我会将其作为答案，以防其他人出于类似原因遇到此线程。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T21:26:01.563

您显示的代码有效，但看起来您正在与封闭容器的默认[布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)作斗争。这里，`ComboTest`是 a`JPanel`默认为`FlowLayout`。

附录：一般情况下，不要*使用*绝对[定位](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)，如你的[更新](https://stackoverflow.com/posts/10824059/revisions)所示。我已将示例更改为使用`GridLayout`；注释掉`setLayout()`调用以查看默认值，`FlowLayout`.

![在此处输入图像描述](../Images/f207be8b766e03960afcf935c9dc8ec5.png)

```
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JPanel;

/**
* @see https://stackoverflow.com/a/10824504/230513
*/
public class ComboTest extends JPanel {

    private JComboBox repository = createCombo(new String[]{
        "Click to select", "NSA", "Finance", "Test"});
    private JComboBox environment = createCombo(new String[]{
        "Click to select", "Dev", "Test", "Qual"});

    public ComboTest() {
        this.setLayout(new GridLayout(0, 1));
        this.add(repository);
        this.add(environment);
    }

    private JComboBox createCombo(String[] data) {
        final JComboBox combo = new JComboBox(data);
        combo.setSelectedIndex(1);
        combo.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                System.out.println(e.getActionCommand()
                    + ": " + combo.getSelectedItem().toString());
            }
        });
        return combo;
    }

    private void display() {
        JFrame f = new JFrame("ComboTest");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new ComboTest().display();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-06T22:41:15.957

I had the same issue. I fixed it by revalidating and repainting the panel with the following code :

```
myPanel.revalidate();
myPanel.repaint(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-15T21:52:12.503

也许有点晚了，但对于那些仍在寻找一种简单且安全的方式来使用 JComboBox 的人来说，可以使用这个：

```
public class FixedJComboBox<E>
        extends JComboBox<E> {
    // Copied constructors
    public FixedJComboBox() {
        super();
    }
    public FixedJComboBox(ComboBoxModel<E> aModel) {
        super(aModel);
    }
    public FixedJComboBox(E[] items) {
        super(items);
    }
    public FixedJComboBox(Vector<E> items) {
        super(items);
    }

    @Override
    public void setBounds(int x, int y, int width, int height) {
        super.setBounds(x, y, width, height);

        // The arrow is the first (and only) component
        // that is added by default
        Component[] comps = getComponents();
        if (comps != null && comps.length >= 1) {
            Component arrow = comps[0];
            // 20 is the default width of the arrow (for me at least)
            arrow.setSize(20, height);
            arrow.setLocation(width - arrow.getWidth(), 0);
        }
    }
} 
```

[如此处](https://bugs.java.com/bugdatabase/view_bug.do;jsessionid=ee99ea619431cffffffffc3500b716110c50?bug_id=4148046)所述，该错误是由错误地将箭头的位置和大小设置为 引起的`(0,0)`，然后是一些重绘问题。通过简单地覆盖该`setBounds()`函数，在 UI/布局管理器错误地更新了箭头后，箭头总是被纠正。

此外，由于新组件是在旧组件之后添加的（即更高的索引），因此箭头将始终位于数组中的第一个元素（假设您不删除并重新添加箭头）。

此类的缺点是箭头的宽度现在由常量而不是 UI/布局管理器确定。

# ruby - 在 ruby 中对复杂对象进行排序失败

> ID：10824063
> 
> 赞同：0
> 
> 时间：2012-05-30T20:50:39.807
> 
> 标签：ruby, sorting, sinatra

当我尝试对包含对象的数组进行排序时出现以下错误

> # 未定义的方法“match_id”

我没有调用 sort 就可以很好地恢复对象（两次排序尝试都会导致相同的错误）

```
get '/' do
  content_type :json

  @matches = []

  build_matches_object(@matches, 'C:\Users\Steve\Desktop\BoxRec Boxing Records_files\BoxRec Boxing Records.htm')

  @matches.sort! { |a,b| a.match_id <=> b.match_id }
  #@matches.sort_by { |a| [a.match_id] }

  @matches.to_json
end 
```

该对象在以下函数中创建（build_matches_object）

```
def build_matches_object(myscrape, boxrec_path)
  doc = Nokogiri::HTML(open(boxrec_path))

  match_date = ''

  doc.xpath("//table[@align='center'][not(@id) and not(@class)]/tr").each do |trow|

    #Try get the date
    if trow.css('.show_left b').length == 1
      match_date = trow.css('.show_left b').first.content
      match_date = Time.parse(match_date)
    end

    #if a match row
    if trow.css('td a').length == 2 and trow.css('* > td').length > 10

      #CODE REMOVED THAT GETS THE BELOW VARIABLES USED TO BUILD MATCH (KNOW IT RETURNS THEM FINE

      #create the match object
      match = {
        :number_of_rounds => trow.css('td:nth-child(3)').first.content.to_i,
        :weight_division => trow.css('td:nth-child(4)').first.content,
        :first_boxer_name => first_boxer_td.css('a').first.content,
        :first_boxer_href => first_boxer_href,
        :second_boxer_name => second_boxer_td.css('a').first.content,
        :second_boxer_href => second_boxer_href,
        :date_of_match => match_date,
        :rating => rating,
        :match_id => matchid
      }  

      myscrape.push(match)

    end
  end

end 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:54:17.910

您假设它是一个带有`match_id`方法的对象，而它似乎是一个简单的散列。

```
a[:match_id] <=> b[:match_id] 
```

# php - google maps api v3上搜索到的地址与最近的现有地标之间的距离

> ID：10824064
> 
> 赞同：4
> 
> 时间：2012-05-30T20:50:44.457
> 
> 标签：php, javascript, google-maps, google-maps-api-3, distance

我正在使用 Google Maps API v3 开发网页。我目前有一个功能地图和搜索栏。我需要能够在地图上的一个 KML 文件上显示从搜索地址到最近地标的距离。我怎样才能做到这一点？

这是页面的代码：

```
<script type="text/javascript">
    var geocoder;
    var map; 
    var marker;
    var layers = [];
  function initialize() {
    geocoder = new google.maps.Geocoder ();
    var latlng = new google.maps.LatLng (41, -73.4);
    var myOptions = {
      zoom: 7,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
        }
      map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);
      marker = new google.maps.Marker({map:map});

        layers[0] = new google.maps.KmlLayer('http://dl.dropbox.com/u/80233620/South-and-North-County-Trailway.kml',
            {preserveViewport: true});
        layers[1] = new google.maps.KmlLayer('http://www.nyc.gov/html/dot/downloads/misc/cityracks.kml', 
            {preserveViewport: true});
        layers[2] = new google.maps.KmlLayer('http://dl.dropbox.com/u/80233620/NWS%20Radar%20Images.kmz', 
            {preserveViewport: true});
    for (var i = 0; i < layers.length; i++) {
                layers[i].setMap(map);
              }
        }

    function codeAddress () {
        var address = document.getElementById ("address").value;
        geocoder.geocode ( { 'address': address}, function(results, status)  {
        if (status == google.maps.GeocoderStatus.OK)  {
            map.setCenter(results [0].geometry.location);
            marker.setPosition(results [0].geometry.location);
            map.setZoom(14);
            } 
        else {
            alert("Geocode was not successful for the following reason: " + status);
                }
        }); 
                            }
    function toggleLayer(i) {
      if(layers[i].getMap() === null) {
        layers[i].setMap(map);
      }
      else {
        layers[i].setMap(null);}
    }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:08:27.350

您不能像那样访问 KML 图层中的数据

[https://developers.google.com/maps/documentation/javascript/layers#KMLLayers](https://developers.google.com/maps/documentation/javascript/layers#KMLLayers)

> 由于 KML 可能包含大量要素，因此您可能无法直接从 KmlLayer 对象访问要素数据。相反，在显示要素时，它们会呈现为看起来像可点击的 Maps API 叠加层。

相反，您可以手动处理 XML 并添加标记，然后使用[几何库](https://developers.google.com/maps/documentation/javascript/reference?hl=en-US#spherical) 并`computeDistanceBetween()`获取距离。我通常将距离乘以某个数字来计算转弯（距离公式得到直线距离）。我相信周围`1.2`是最准确的。

# c++ - 如何使用 QT/C++ 显示网页

> ID：10824066
> 
> 赞同：4
> 
> 时间：2012-05-30T20:50:55.050
> 
> 标签：c++, qt

我正在尝试使用以下代码显示网页

```
 QWebView *view = new QWebView();
    view->load(QUrl("qrc://images//sample page.html/"));
    view->show(); 
```

示例 page.html 已添加到项目资源/图像中。网页框架正在加载，但我看不到任何 html 数据。

我用下面的网址进行了测试，它加载了页面

```
 view->load(QUrl("http://www.google.com/")); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:19:05.450

您将必须执行以下几个步骤：

1）获取`QWebPage`对象：

```
 QWebPage *page = view->page(); 
```

2）获取`QWebFrame`对象：

```
 QWebFrame *frame = page->currentFrame(); 
```

3)`toHtml`在当前帧调用成员函数：

```
 QString html = frame->toHtml(); 
```

当然，您需要在两者之间添加适当的错误检查。

# objective-c - 使用标准用户默认值更新视图之间的数据

> ID：10824069
> 
> 赞同：0
> 
> 时间：2012-05-30T20:51:00.900
> 
> 标签：objective-c, ios

I have a table view (view 1) with some cells that when selected let's the user configure some app settings on another view (view 2). 此过程由导航控制器管理，并且始终从标准用户默认设置存储和检索设置。

问题开始于这些属性之一显示在单元格的详细文本标签上的视图 1 上，并在文本标签中的视图 2 上进行编辑。

如果用户正在编辑属性，在视图 2 上的文本标签上，并且他按下后退按钮返回到视图 1，它的单元格的详细文本标签不会立即更新。（在退出视图时，我已将数据保存在用户默认值上并强制同步，并且在加载视图 1 时我强制 tableview 重新加载数据）

仅在视图出现在 iPhone 模拟器上之后 0.4 秒强制 tableView 上的 reloadData 后才更新详细文本标签，而不是之前。这对用户来说可能有点刺耳。

有没有人有更好的解决方案？完美的解决方案将是易于实施和即时的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:06:02.013

更好的解决方案是在将数据保存为默认值的同时，通过委托协议或某种其他形式的通信将更改的信息从视图 2 传递到视图 1。如果由于某种原因您保存到 NSUserDefaults 失败，那么这会中断，但它应该可以解决您的滞后问题。

# python - Django 模型：根节点在未保存的节点中显示为子节点

> ID：10824074
> 
> 赞同：3
> 
> 时间：2012-05-30T20:51:08.483
> 
> 标签：python, django, django-models

我正在尝试在 django 中建模树结构。这是我所拥有的简化版本：

```
from django.db import models

class Node(models.Model):
    parent = models.ForeignKey("Node", null=True)
    name = models.CharField(max_length=20)

    def child_cnt(self):
        return self.node_set.count()

    def __unicode__(self):
        return self.name 
```

到目前为止，一切都很好。有用。但是，如果我现在开始创建这样的层次结构：

```
from ....models import Node
root = Node()
root.name = "ROOT"
root.parent = None
root.save()

n = Node()
print n.child_cnt()
>> 1
print n.node_set.all()
[<Node: ROOT>] 
```

那么根节点作为一个子节点在里面做`n`什么呢？我怎样才能避免这种情况？

一旦我打电话，问题就消失了，但是在管理站点内`n.save()`看到一个用 1 初始化的节点有点讨厌。`child_cnt`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:43:21.323

我知道这听起来很疯狂，但我花了几分钟试图解决你的问题，但我尝试过的任何尝试都没有奏效。无论如何，对于Tree ForeignKey，我在网上找到了另一个解决方案，这是一个完整的库，负责处理这种类型的Key，[https://github.com/django-mptt/django-mptt](https://github.com/django-mptt/django-mptt) 你可以试试，它可能适合你。我讨厌不得不为这么小的东西添加一个库，但是我找不到更好的东西。

此外，如果您不想导入整个库，您可以只将 TreeForeignKey 带入您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:58:03.357

好的，经过一些研究 - 以下是结果：

首先，请注意 - 当使用具有递归关系的 ForeignKey 时，您应该使用“self”而不是类名： [https ://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models .外键](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey)

然后 - ForeignKey 是 OneToOne 关系。在枚举其父节点时枚举节点子节点是不正确的......回到问题 - 当你调用 node_set.all() - 这似乎是作为 Node.objects.all() 执行的，这就是它显示的原因新创建的节点实例的项目（未保存在数据库中）。实际上 node.node_set 不能在这里用于获取节点的外键。为了有几个孩子到一个节点 - 你必须使用 ManyToManyField，例如：

```
children = models.ManyToManyField('self', null=True) 
```

然后使用以下命令调用它：

```
node.children.all() # for all children 
```

或者

```
node.children.count() 
```

**编辑**：

简要分析：

```
class A(model):
    parent = ForeignKey(B) 
```

然后

```
a = A()
b = B()
b.parent_set.all() 
```

将返回所有以 B 作为父级的 A，或所有具有 parent_id = b.id 的 A。在你的情况下，你实际上有：

```
a = A()
b = A()
b.parent_set.all() 
```

将返回所有具有 b(==a) 作为父级的 A，在这种情况下 a.parent_id = b.id，但 b.id 为 None（未保存），因此您将获得所有具有 parent_id = 的节点（b）没有任何。

事实上，这种行为对于非递归关系也是一样的。在第一个示例中，使用 parent=None 保存 A()，您将在 b.parent_set.all() 中为所有未保存的 B 获取它。

# c# - HTTP 处理程序将文件限制为只读/仅查看而不是可下载的 C# ASP.NET 网页

> ID：10824080
> 
> 赞同：1
> 
> 时间：2012-05-30T20:51:47.780
> 
> 标签：c#, asp.net, file, download, httphandler

我有一个带有在线文件​​库的客户。她希望能够在表单库“ReadOnly”中制作她的一些文件。

现在，当您查看文件库页面时，所有文件都会显示。

当您单击一个文件时，它会打开标准浏览器窗口并询问您是否要打开或下载该文件。基本上她想限制一些文件只允许你打开而不是下载文件。

我很确定这是不可能的，因为这是一种用户偏好浏览器设置类型的东西，但我想在告诉她知道之前我会得到一些输入。

现在我正在使用我编写的名为文件处理程序的 asp.net HTTP 处理程序。

```
 public void ProcessRequest(HttpContext context)
    {
        if (this.FileName != null)
        {
            string path = String.Concat(ConfigurationManager.UploadsDirectory, this.FileName);
            string contentType = Utility.IO.File.GetContentType(this.FileName);

            if (File.Exists(path) == true)
            {
                context.Response.Buffer = true;
                context.Response.Clear();
                context.Response.Cache.SetCacheability(HttpCacheability.NoCache);
                context.Response.ContentType = contentType;
                context.Response.AddHeader("content-disposition", String.Format("inline; filename={0}", (Url.Encode(this.DisplayFileName))));
                context.Response.TransmitFile(path);
                context.Response.Flush(); 
                context.Response.End();
            }
            else
            {
                throw new HttpException(404, "File Not Found");
            }
        }
    } 
```

这个函数（Utility.IO.File.GetContentType）是一个简单的实用函数，我用来根据文件扩展名获取内容类型。

无论如何，我可以在此代码中更改任何内容以使其文件为只读或“仅查看”。也许我可以添加某种类型的标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-05T21:50:04.237

回答我自己的问题。这是不可能的。

# c - 如何使用结构成员动态分配成员数组？

> ID：10824081
> 
> 赞同：0
> 
> 时间：2012-05-30T20:51:48.807
> 
> 标签：c, arduino

这是我想要做的：

```
//Define a structure to store multistep sequences.
struct Command 
{
  int Steps; //Number of steps in the seq
  int StepCount; //must be set to -1
  int Seq[Steps][NUMSERVOS + 1];
}; 
```

例如，`Command`初始化可能如下所示：

```
Command Home = {1,-1,{90, 90, 90, 90, 90, 90, 1000}}; 
```

该行将导致 int`Array Seq`的大小为`[7][1]`( `NUMSERVOS == 6`)

我想`Array Seq[][]`用`Steps`.

问题是：

1.  `Steps`不是一个常数整数。
2.  `Steps`不是静态的。

无论如何我可以使用在数组之前初始化的成员为数组动态分配内存吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:24:09.010

Arduino 是一个资源有限的小型平台。一般来说，在嵌入式系统中使用动态分配是一个坏主意，在一点点 8 位上使用它是一个非常糟糕的主意。动态内存的问题太多了：它需要一个堆，这是 8 位用户买不起的奢侈品，它会给你带来碎片和内存泄漏的问题，而且它非常非常慢。

你应该做的是分析程序的输入并确定最坏的情况，然后静态分配足够的内存来覆盖最坏的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:57:27.090

**警告：**最初发布时带有 C++ 标签。模板解决方案不适用于普通的旧 C。

您可以考虑以这种方式使用模板：

```
//Define a structure to store multistep sequences.
template<int n>
struct Command 
{
    // n = Number of steps in the seq
    int StepCount; //must be set to -1
    int Seq[n][NUMSERVOS + 1];
}; 
```

我假设您希望此值仅在您创建命令时才有用，因为您正在尝试使用静态数组。然后，您将能够以这种方式实例化您的结构：

```
Command<1> Home = {-1, {90, 90, 90, 90, 90, 90, 1000}}; 
```

现在，如果您仍然想从那里获取 Steps，您仍然可以在您的结构中以这种方式创建一个 getter：

```
int Steps() const
{
    return n;
} 
```

**C解**

实际上，如果您按照使用 C99 或 C11 编译器提供的方式编译代码，由于对可变长度数组的支持，它可能会起作用。不过，我不能确保 VLA 在结构中被接受。

# javascript - javascript datepicker - 日期相同 - 但持续时间需要为“1”

> ID：10824090
> 
> 赞同：0
> 
> 时间：2012-05-30T20:53:02.240
> 
> 标签：javascript, jquery, jquery-ui

当 datepicker 结束日期与开始日期相同时，total_days 返回值“0”。当两个日期相同时，我是否可以在代码中放置一个“+1”以允许该值为“total_days”的“1”？

```
var calcDate = function() {
    var start = $('#conference_date_in').datepicker('getDate');
    var end = $('#conference_date_out').datepicker('getDate');
    var days = (end - start) / 1000 / 60 / 60 / 24;

    if( days >= 0 ) {
    document.getElementById('total_days').value = days;
    }
}

$('#conference_date_out').change(calcDate);
$('#conference_date_in').change(calcDate); 
```

# javascript - Underscore.js .filter() 和 .any()

> ID：10824091
> 
> 赞同：5
> 
> 时间：2012-05-30T20:53:06.433
> 
> 标签：javascript, underscore.js

我有一个`event`名为`events`. 每个`event`都有，一个包含对象`markets`的数组。`market`里面还有另一个名为 的数组`outcomes`，包含`outcome`对象。

在[这个问题](https://stackoverflow.com/q/10821657/1048572)中，我要求使用 [Underscore.js] 方法来查找所有具有市场的事件，这些事件的结果具有名为`test`. 答案是：

```
// filter where condition is true
_.filter(events, function(evt) {

    // return true where condition is true for any market
    return _.any(evt.markets, function(mkt) {

        // return true where any outcome has a "test" property defined
        return _.any(mkt.outcomes, function(outc) {
            return outc.test !== "undefined" && outc.test !== "bar";
        });
    });
}); 
```

这很好用，但我想知道如果我想过滤每个市场的结果，我将如何改变它，以便`market.outcomes`只存储等于`bar`. 目前，这只是给我提供了具有**某些**固定`test`属性的结果的市场。我想去掉那些没有的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T21:26:22.067

[使用splice 方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)进行数组删除，使其成为一个简单的循环：

```
var events = [{markets:[{outcomes:[{test:x},...]},...]},...];
for (var i=0; i<events.length; i++) {
    var mrks = events[i].markets;
    for (var j=0; j<mrks.length; j++) {
        var otcs = mrks[j].outcomes;
        for (var k=0; k<otcs.length; k++) {
            if (! ("test" in otcs[k]))
                 otcs.splice(k--, 1); // remove the outcome from the array
        }
        if (otcs.length == 0)
            mrks.splice(j--, 1); // remove the market from the array
    }
    if (mrks.length == 0)
        events.splice(i--, 1); // remove the event from the array
} 
```

此代码将从数组中删除所有没有`test`属性的结果、所有空市场和所有空事件。`events`

下划线版本可能如下所示：

```
events = _.filter(events, function(evt) {
    evt.markets = _.filter(evt.markets, function(mkt) {
        mkt.outcomes = _.filter(mkt.outcomes, function(otc) {
            return "test" in otc;
        });
        return mkt.outcomes.length > 0;
    });
    return evt.markets.length > 0;
}); 
```

# xamarin.ios - MonoTouch.Dialog：通过触摸 DialogViewController 中的任何位置来关闭键盘

> ID：10824092
> 
> 赞同：16
> 
> 时间：2012-05-30T20:53:08.240
> 
> 标签：xamarin.ios, monotouch.dialog

*注意：有两个类似的 SO 问题**[(1)](https://stackoverflow.com/questions/3463778/can-i-dismiss-the-iphone-keyboard-by-touching-the-background-of-dialogviewcontro) [(2)](https://stackoverflow.com/questions/7408937/monotouch-dialog-dismissing-a-keyboard)**，但它们都没有提供答案。*

**TL;DR：如何通过让用户触摸视图中的任何空白区域来关闭 MonoTouch.Dialog 中的键盘？**

我正在使用 MonoTouch.Dialog 和 UITabBarController 编写应用程序。我的标签之一是“设置”...

![设定画面](../Images/f246cb587a8b8a061e126edf33866e38.png)

当用户开始打字时，键盘挡住了标签栏...

![在此处输入图像描述](../Images/f6661b5d9edf3a92609485ce8c8ffda9.png)

使用 MonoTouch.Dialog，关闭键盘的唯一方法是转到最后一个字段并按“返回”键。考虑到用户在键盘消失之前无法按下任何选项卡这一事实，我想要一种更好的方法来做到这一点。即，如果用户点击屏幕上的任何其他位置，则关闭。

如果没有 MonoTouch.Dialog，这很容易：只需覆盖 TouchesBegan 并调用 EndEditing。但这不适用于 MT.D。我已经尝试将 DialogViewController 子类化并在那里覆盖 TouchesBegan，但它不起作用。我目前不知所措。

或者，我想知道，我最好放弃标签栏，这样我就可以使用顶部带有“后退”按钮的 UINavigationController，它不会被键盘隐藏？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-02T17:54:45.213

我建议您使用不会干扰 TableView 事件处理程序的点击手势识别器：

```
var tap = new UITapGestureRecognizer ();
tap.AddTarget (() => dvc.View.EndEditing (true));
dvc.View.AddGestureRecognizer (tap);
tap.CancelsTouchesInView = false; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T22:16:58.703

你也错过了我的问题：[可以通过触摸 MonoTouch.Dialog 中的单元格外部来关闭键盘吗？](https://stackoverflow.com/questions/10097490/can-the-keyboard-be-dismissed-by-touching-outside-of-the-cell-in-monotouch-dialo) :-)

这是我对 MonoTouch.Dialog 的#1 功能请求。

回答你的问题：不。这是不可能的。我四处寻找和询问，但没有找到任何答案。

我假设因为它只是一个分段（分组）表，如果它没有分段，就不会有任何点击的地方。然而，这只是我的猜测。

我希望 miguel 或从事 monotouch 工作的人能回答这个问题并说是否有可能。可能是未来的增强？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T02:10:19.370

我想出了一个让我足够满意的解决方法，所以我正在回答我自己的问题。

```
// I already had this code to set up the dialog view controller.
var bc = new BindingContext (this, settings, "Settings");
var dvc = new DialogViewController (bc.Root, false);

// **** ADD THIS ****
dvc.TableView.DraggingStarted += (sender, e) => {
    dvc.View.EndEditing (true);
}; 
```

每当用户稍微拖动视图时，这将关闭键盘。我找不到与 tableview 相关的触摸事件，所以这是下一个最好的事情。我欢迎任何其他想法。干杯!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-02T13:58:01.870

使用拖动手势而不是建议的点击（不干扰表格视图手势）的一种解决方法是覆盖 MonoTouch.Dialog.DialogViewController.SizingSource （或 MonoTouch.Dialog.DialogViewController.Source，如果你不想要不均匀行）并将其提供给 DialogViewController。我不知道它是否非常干净或安全。

```
public class CustomTableViewSource : MonoTouch.Dialog.DialogViewController.SizingSource
{
 public CustomTableViewSource(MonoTouch.Dialog.DialogViewController dvc) : base(dvc)
 {

 }

 public override void DraggingStarted(UIScrollView scrollView)
 {
   base.DraggingStarted(scrollView);

   if (scrollView != null)
   {
     scrollView.EndEditing(true);
   }
 } 
```

}

# web-services - 是否可以在 HTTP(S) 请求中发送另一个 IP 地址？

> ID：10824093
> 
> 赞同：0
> 
> 时间：2012-05-30T20:53:13.557
> 
> 标签：web-services, ip

有一个 Web 服务（在 Intranet 环境中）检查客户端 IP，如果它不是有效 IP，则拒绝该请求。有没有机会在这个网络服务上用 IP 作弊？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:56:23.690

发送带有假 IP 地址的 IP 数据包是完全可能的。但是，您不会收到回复，因为回复将针对虚假 IP 地址。这意味着您无法建立 TCP 连接（HTTP(S) 依赖于该连接），因为它们需要双向 IP 流量。

# asp.net-mvc-3 - Html.BeginForm() 执行 post onload

> ID：10824100
> 
> 赞同：0
> 
> 时间：2012-05-30T20:53:41.180
> 
> 标签：asp.net-mvc-3

我有一个包含多个表单的视图，当视图加载最后一个 BeginForm 时，它会执行一个帖子到它的控制器方法。控制器处理多个视图的动作。我错过了什么？

我希望名为 Foo 的视图在它执行的 Bar 控制器中执行 Foo 操作 onload ，但是即使我添加了后置动词，它也会在最后一个 BeginForm() 中执行操作。

# java - 将 jscrollbar 附加到另一个组件

> ID：10824102
> 
> 赞同：2
> 
> 时间：2012-05-30T20:53:58.973
> 
> 标签：java, swing, jscrollpane, jscrollbar

在我的应用程序中，我有两个相互重叠的摆动组件，看起来像这张图片。问题是橙色组件需要一个垂直滚动条，但我希望组件的右边缘保持完全对齐（并且宽度可以随着用户使应用程序变宽或变窄而变化）。如果我使用类似网格布局的东西，滚动条会占用空间，然后滚动条会与红色组件的右边缘对齐。

![在此处输入图像描述](../Images/0e38b5ba584bf6e60719a2e097a828f3.png)

我在想我可能需要使用滚动条组件并单独添加它并使用它来控制橙色组件。有没有办法将滚动条附加到这样的另一个组件？我认为不使用滚动窗格会很困难。我也愿意接受有关如何解决此问题的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:07:00.763

实施您建议的方法应该不会太难。将橙色组件包装在 a 中`JScrollPane`，但将滚动窗格配置为隐藏两个滚动条。然后，将滚动窗格中垂直滚动条的滚动模型设置为独立滚动条的滚动模型。即使滚动窗格滚动条被隐藏，如果模型被链接，它仍然会滚动。有关一些代码，请参阅[我在这个问题中的回答](https://stackoverflow.com/questions/6379255/how-to-scroll-two-jtextpanes/6379682#6379682)- 这是一个不同的应用程序，但原理相似。

或者，您可以使用`JScrollPane`带有可见垂直滚动条的 a，并在红色组件旁边添加一个间距组件以使其保持对齐。我想你可以用`GridBagLayout`两列。第一行包含红色组件和分隔符，第二行包含带有橙色组件的滚动窗格，它跨越两列。然后，您只需从 中获取滚动条组件的`JScrollPane`宽度，并将间隔的首选宽度设置为相同的值。这种策略的一个缺点是，如果滚动条宽度发生变化（例如，由于 UI 变化），可能难以保持间隔大小的更新。

# jquery - ie8 可排序不工作

> ID：10824105
> 
> 赞同：0
> 
> 时间：2012-05-30T20:54:14.913
> 
> 标签：jquery, jquery-ui, internet-explorer-8, jquery-ui-sortable

我有一个非常复杂的嵌套排序设置

我在[http://jsfiddle.net/mwagner72/Phbzc/创建了一个 jsfiddle](http://jsfiddle.net/mwagner72/Phbzc/)

问题是在使用ie8时，点击重新排列按钮，然后使用蓝色框作为拖动手柄。如您所见，它不起作用。在其他浏览器中运行良好。

我在 jquery 网站上看到了一张真实的票（我相信它是相关的）：http: [//bugs.jqueryui.com/ticket/5197](http://bugs.jqueryui.com/ticket/5197)

但我不明白如何实施该错误票证中提到的任何修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T17:16:37.177

我发现 Internet Explorer 8 在尝试拖动`A`或`IMG`元素时会进行控制，从而阻止 sortable 起作用。

在您的示例中，删除`A`并将拖动手柄更改为 a`SPAN`可能会起作用。

# perl - 如何在perl中将一个文件的哈希键与另一个文件的哈希值进行比较

> ID：10824107
> 
> 赞同：0
> 
> 时间：2012-05-30T20:54:18.010
> 
> 标签：perl

我有两个文件。一个文件只包含键，另一个文件同时具有键和值。我如何将一个文件的键与另一个文件的值进行比较？

```
 example of file1 
  steve
  robert
  sandy
  alex

  example of file2
  age25, steve
  age29, alex
  age30, mindy
  age50, rokuna
  age25, steve

  example of output
  age25, steve
  age29, alex 
```

这是我到目前为止所拥有的

```
 my $age_name="file1.txt";
    my $name="file2.txt";
    open my  $MYFILE, "<", $name or die "could not open $name \n";
    open my  $MYFILE2, "<", $age_name or die "could not open $age_name \n";
    while(<$MYFILE>) {
    my ($key, $value) = split(",");
    my $secondfile = <$MYFILE2>;

    if ( defined $secondfile ) {
        my ($key2, $value2) = split(","); 
        if ($value2=~m/$key/) {
        print "$key2 - $value2 \n";
        }
    }

    }
    close $MYFILE;
    close $MYFILE2; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:59:12.720

您正在从第一个文件中读取一行，从第二行中读取一行。问题是线条不必相关。经典的解决方案是将一个文件读入散列，然后在读取第二个文件时使用散列进行查找：

```
#!/usr/bin/perl
use strict;
use warnings;

my %age_of;
open my $AGE, '<', 'file2.txt' or die $!;
while (<$AGE>) {
    chomp;
    my ($age, $name) = split /, /;
    $age_of{$name} = $age;
}

open my $NAME, '<', 'file1.txt' or die $!;
while (<$NAME>) {
    chomp;
    print "$age_of{$_}, $_\n" if exists $age_of{$_};
} 
```

# ios - 同时录制/播放iOS的简便方法

> ID：10824108
> 
> 赞同：1
> 
> 时间：2012-05-30T20:54:22.380
> 
> 标签：ios, core-audio

我曾尝试使用音频队列来实现这一点，但徒劳无功。一旦我的输出队列开始调用它的回调，输入队列就会停止运行。有什么我想念的吗？或者我最终将不得不在音频单元和远程 i/o 中挖掘。

# ruby-on-rails - Ruby on Rails 教程完整文件

> ID：10824109
> 
> 赞同：1
> 
> 时间：2012-05-30T20:54:26.790
> 
> 标签：ruby-on-rails, ruby, railstutorial.org

在阅读本教程（ruby.railstutorial.org 中的那个）的过程中，我迷路了，并且在某处的代码中有错误。是否有人拥有完整应用程序的完整文件，以便我可以将工作版本与我的版本进行比较？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:58:46.887

你可以在[github上找到这些文件](https://github.com/railstutorial/sample_app_2nd_ed)

# html - 根据窗口宽度动态显示/隐藏内容

> ID：10824110
> 
> 赞同：2
> 
> 时间：2012-05-30T20:54:28.183
> 
> 标签：html, css, dhtml

我正在建立一个网站，我需要它的行为，以便如果窗口是全屏的（或宽度 > X px 的任何大小） - 它应该显示侧边栏。如果用户将窗口的宽度调整到一定程度以下，侧边栏应该消失（显示：无）。

一个典型的例子是谷歌的新闻页面（news.google.com）——有一个右侧边栏，只有当页面宽度超过某个阈值时才可见。

我通常很擅长搜索谷歌/堆栈交换并找到我需要的答案，但在这种情况下，也许是因为使用了“动态”这个词，但我想不出任何其他方式来表达它，我得到了很多不是我需要的命中。

如果我自己想一个解决方案，我可能会添加一个 javascript 侦听器，它不断监视“可视区域”的 x 值，并有一个不断运行的函数，如果可视区域 X 值较低，它会执行类似的操作超过我的阈值，将我的 sidbar div 的样式更改为 display:none。我认为这会起作用，但我不知道这是否是最好的方法。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T20:57:05.403

[最大宽度的](http://msdn.microsoft.com/en-us/library/windows/apps/hh453836.aspx)媒体查询呢？

```
@media screen and ( max-width: 768px ) {
 /* When the viewport is 768px or less, 
    hide #sidebar */
    #sidebar {
        display: none;
    }
} 
```

演示：http: [//jsfiddle.net/jonathansampson/6Pvyt/show/](http://jsfiddle.net/jonathansampson/6Pvyt/show/)

对于 IE6-8，[https://github.com/scottjehl/Respond](https://github.com/scottjehl/Respond)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:58:14.830

我相信 CSS 媒体查询是 Jonathan Sampson 已经回答的最佳解决方案，

但是正如你在关于使用 javascript 监听器的问题中暗示的那样，我认为我最好用 jQuery 的 on 事件来解释一个更好的 (IMO) JS 解决方案。

例如

```
jQuery(window).on({
    "resize": function(){
        if(jQuery(window).width() > 750) {
             //code to show sidebar
            jQuery(#sidebar).removeclass("hidden");
        } else {
            //code to hide sidebar e.g.
            jQuery(#sidebar).addclass("hidden");
        }
}
    };
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T20:57:28.127

您需要的是 CSS 媒体查询。 [http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

我使用 Twitter 的[引导](http://twitter.github.com/bootstrap/)框架，其中包括一整套响应式屏幕功能。

# c# - GET 上的 WCF WebGet 字典参数

> ID：10824111
> 
> 赞同：0
> 
> 时间：2012-05-30T20:54:30.290
> 
> 标签：c#, wcf, wcf-rest, webget

我想创建一个 WCF RESTful 服务方法，它可以在查询字符串中接收任意数量的参数，并将它们发送到方法上的某种类型的键、值集合参数。例如：

如果我打电话

“http://localhost/Service.svc/DoWork?p1=test&p2=testAgain”

我希望方法实现看起来像：

```
 [WebGet]
    public void DoWork(Dictionary<string,string> values)
    {
        // Add your operation implementation here
        return;
    } 
```

并且`values`参数将包含具有各自值的 p1、p2 键。

我怎样才能做到这一点？我的一种方法是定义一个自定义 UriTemplate 并将所有内容发送到一个字符串参数并将其解析出来，但是“&”字符正在抛出和危险的论坛请求异常。我不禁想到有一种更简单的方法可以实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:10:20.830

您可以通过 访问请求查询字符串`WebOperationContext.Current.IncomingRequest.UriTemplateMatch.RequestUri.Query`。然后，您可以使用`HttpUtility.ParseQueryString`将其解析为 a `NameValueCollection`，这与`Dictionary<string, string>`您想要的 a 类似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T22:53:59.650

你能从 HttpContext.Current.Request.QueryString 对象中提取这些信息吗？

# user-interface - wxPython 的最佳拖放 GUI 构建器

> ID：10824112
> 
> 赞同：2
> 
> 时间：2012-05-30T20:54:32.920
> 
> 标签：user-interface, wxpython

wxPython 最好的拖放 GUI 构建器是什么？我试过wxGLade，但我非常不喜欢它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:08:55.307

如果您刚开始使用 Python 进行 GUI 编程，我强烈建议您放弃 wxPython 转而使用 PySide/PyQt4。它有一个更简单的 API，Qt-Designer 是我用过的最好的拖放式 GUI 设计器之一。加上 PySide/PyQt4 有据可查。

# asp.net - 限制网页仅在开发环境中运行

> ID：10824114
> 
> 赞同：1
> 
> 时间：2012-05-30T20:54:36.200
> 
> 标签：asp.net, asp.net-mvc

将 MVC 视图限制为仅在开发环境中可用且不能从任何其他环境访问的最佳方法是什么。

这是一个测试页面，如果站点在开发人员环境之外运行，我不希望用户访问该页面。在 IIS 下本地托管或使用 Visual Studio 内置 Web 服务器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T22:05:03.390

~~您可以检查当前的 Web 服务器是否为 Visual Studio 开发服务器：~~

 ~~```
public static bool IsDevWebServer()
{
    return HttpContext.Current.Request.ServerVariables["SERVER_SOFTWARE"] == null || HttpContext.Current.Request.ServerVariables["SERVER_SOFTWARE"] == string.Empty;
} 
```~~  ~~没有注意到你想要在本地 IIS 下的测试页面，如果你已经准备好使用[web.config 转换](http://msdn.microsoft.com/en-us/library/dd465326.aspx)（如果你不应该）并在 appSettings 下设置一些值，例如：

```
<add key="DevEnv" value="True" /> 
```

然后将其转换为发布 web 配置并设置 false ：

```
<add key="DevEnv" value="False" xdt:Transform="SetAttributes" xdt:Locator="Match(key)" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:12:12.473

只需将重定向到该页面设置为“http://localhost/path/file.aspx”

当他们尝试访问该页面时，这应该会引发错误。如果您不想抛出该错误，那么当他们尝试在测试环境之外访问该页面时，您可以将它们重定向到不同的页面。~~

# android - ContextMenu 文本溢出

> ID：10824115
> 
> 赞同：1
> 
> 时间：2012-05-30T20:54:39.173
> 
> 标签：android, contextmenu, word-wrap

当用户单击显示多个子类别的任何列表项时，我试图在我的 ListActivity 上放置一个 ContextMenu。不要费心告诉我其他选择（ExpandableList、RadioButton 等）。

我怎样才能显示完整的文本，而不是被截断？这是我填充 ContextMenu 的方式：

```
 @Override  
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {  
        super.onCreateContextMenu(menu, v, menuInfo);  

        //Fill context menu with appropriate subcategory
        menu.setHeaderTitle("Categories");
        for(String item : menuItem)
        {
            menu.add(0, v.getId(), menu.size()+1, item);
        }
    } 
```

*请注意，menuItem 只是一个 String[ ] 数组*

这是我的上下文菜单。[ContextMenu](http://i.imgur.com/zHhmL.png) 我觉得自己像个白痴，没有足够的声誉来张贴图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T04:21:53.950

我知道的唯一方法是从 XML 而不是仅在代码中创建菜单并更改文本大小，以便所有文本都适合。我环顾四周，找不到任何有关更改程序生成菜单的文本大小的信息。

有关从 XML 创建上下文菜单的文档在[这里](http://developer.android.com/guide/topics/ui/menus.html#FloatingContextMenu)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-26T17:29:18.857

我遇到了类似的问题；但是，我使用的是菜单资源 xml，而不是通过代码设置标题。

对于标题将被截断的场景，菜单项可以包含标题和“android:titleCondensed”。

据我所知，如果您需要更多自定义行为，则需要指定自己的布局资源来描述与标准 Android 菜单资源提供的相比更复杂的行为。本质上，您可以用自己的布局覆盖默认布局。

如果您以编程方式设置字符串以在不同时间实现具有不同项目的上下文菜单，您可以考虑在 xml 菜单资源中指定标题和压缩标题，然后在 onCreateContextMenu 中，您可以添加逻辑来为每个项目调用“setMenuItemVisibility”以过滤掉您不想在任何给定时间显示的项目。

# php - 与 SSL 相关的 Facebook 连接问题

> ID：10824125
> 
> 赞同：0
> 
> 时间：2012-05-30T20:55:42.237
> 
> 标签：php, facebook, openssl, facebook-php-sdk

最近我在我的网站上启用了 ssl 加密。我正在使用 PHP SDK 与 facebook 连接。问题是当我浏览 HTTPS 并尝试让当前用户使用

```
$facebookUser = $this->facebook->getUser(); 
```

响应总是错误的......如果我尝试对 HTTP 进行同样的操作，它会完美运行......

我需要更改一些设置吗？我确定 ssl encription 正在工作。Facebook api没有抛出任何异常......

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:05:20.373

我不知道您的问题的解决方案，但我敢打赌 URL 不太正确。

为了帮助诊断这一点，请尝试使用 http 调试代理，如 Fiddler2。它允许您构建和提交 http(s) 请求，并检查响应。您还可以将其用作代理来查看您的应用程序生成和发送了哪些 http(s) 消息，以及返回了哪些响应。

# mercurial - hg rebase abort 失败：“未知修订”

> ID：10824130
> 
> 赞同：16
> 
> 时间：2012-05-30T20:55:56.757
> 
> 标签：mercurial, mercurialeclipse

有时，在使用 MercurialEclipse 插件执行变基时，我的存储库会陷入奇怪的状态。它将陷入“变基”状态，但是当我尝试中止变基（例如“hg rebase -a”）时，我收到以下错误消息：

> 中止：未知修订版“ *xxxx* ”！

其中 xxxx 是修订哈希。通常在这一点上，我已经放弃了执行 rebase 的所有希望——我只是想回到我的存储库没有搞砸的更快乐的时光。到目前为止，我的解决方案是核对我的项目目录并再次克隆它。有没有更温和的解决方案？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-25T12:51:41.403

只需删除 .hg/rebasestate，您的 repo 就可以工作了。

[这个](http://permalink.gmane.org/gmane.comp.version-control.mercurial.devel/36296)线程中描述的补丁调用了内部函数 clearstate ，它只是取消了这个文件的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:18:36.517

在与此类似的情况下，我通常会这样做：

```
$ hg check
$ hg verify
$ hg up -C default 
```

而不是`default`，使用您正在处理的任何分支。这需要时间，但重新克隆 repo 也是如此。

它通常会有所帮助。

# actionscript-3 - 如何更改 Flex ArrayCollection 中项目的值

> ID：10824131
> 
> 赞同：0
> 
> 时间：2012-05-30T20:55:59.743
> 
> 标签：actionscript-3, apache-flex

我有一个预定义值的 ArrayCollection。我想为 arrayCollection 中的项目分配一个新值。这个新值是在 datagrid ItemEditEnd 之后定义的。

```
private var tabRV :Array=[
                {thevalue:"25",height:"115",col:"foo"},
                {thevalue:"45",height:"115", col:"foo"},
                {thevalue:"15",height:"115",col:"bb"},
                {thevalue:"95",height:"115", col:"aa"},
                ];

    [Bindable] 
    public var acRDV:ArrayCollection=new ArrayCollection(tabRV); 
```

我的 ItemEditEnd，如下所示：

```
private function getCellInfo(event:DataGridEvent):void {

            // Get the new value from the editor.
            var newVal:String = event.currentTarget.itemEditorInstance.htmlText;

            // Get the old value.
            var oldVal:String = 
                event.currentTarget.editedItemRenderer.data[event.dataField]; 
            DP_LISTEREDVCLI[event.rowIndex].thevalue=newVal;
            DP_LISTEREDVCLI[event.rowIndex].col=1;
            trace("xml new val "+DP_LISTEREDVCLI[event.rowIndex].[event.columnIndex]+"/"+DP_LISTEREDVCLI[event.rowIndex].[DP_LISTEREDVCLI.length]);

        } 
```

我希望创建一个通用函数 DP_LISTEREDVCLI[event.rowIndex][event.columnIndex] 但它不起作用。实际上，在这种情况下，一个新属性正在创建 [event.columnIndex 值]

感谢您的帮助

# iphone - UIScrollView 阻止我的 UIGesture 进行视图转换

> ID：10824134
> 
> 赞同：2
> 
> 时间：2012-05-30T20:56:26.587
> 
> 标签：iphone, ios, uiscrollview, uigesturerecognizer

所以我在[这里](http://dl.dropbox.com/u/53813770/SMPrototypeB.zip)做这个项目，来测试一些我感兴趣的东西，比如使用 UIGestures 的视图转换。

我目前正在测试视图转换在其中包含 UIWebViews 和 UIScrollViews 等内容时的行为方式。我目前发现的是，如果您的 UIScrollView 大于视图框架，那么如果您使用 UIGesture 更改视图，则转换（使用手势）将被阻止。（如向左或向右滑动）

我想知道是否有解决此问题的方法或我不知道的解决方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T01:42:08.870

尝试使用

`gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`

为它返回 no ，看看它是否有效。

# php - Chrome 中未定义 XML 实体

> ID：10824136
> 
> 赞同：0
> 
> 时间：2012-05-30T20:56:31.880
> 
> 标签：php, xml

我的浏览器告诉我：

```
error on line 2 at column 308899: Entity 'ntilde' not defined 
```

并且特定行在我的xml中为：

```
<LastName>Trevi&ntilde;o</LastName> 
```

名字原本是`Treviño`，但是通过php的`htmlentities`函数修改了。

我该怎么做才能让 php 和 xml 玩得很好？

* * *

*在 Mac 上使用 Chrome 19。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T15:54:57.380

显然使用`htmlspecialchars`和`htmlentities`串联可以解决问题。

```
htmlspecialchars(htmlentities($value)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:59:35.370

您实际上是在生成 XML 还是 HTML？他们不是一回事。HTML 定义了一堆实体（IIRC），而 XML 几乎没有“内置”——只有一些像`&amp;`和`&lt;`.

当您可以直接使用文本时，为什么还要使用实体？只需确保您使用的编码是一致的（UTF-8 将是一个不错的选择）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T20:59:42.107

您不需要在 XML 中编码波浪字符。它会抛出错误。在这种情况下，最好的办法可能是将文本包装在 CDATA 中。

```
<LastName><![CDATA[Trevi&ntilde;o]]></LastName> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T21:00:19.720

尝试为 htmlentities 指定编码

```
htmlentities($string,ENT_QUOTES,'UTF-8'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-16T14:58:26.730

应该是：Treviño。您的 DTD 文件中可能缺少实体？像这样的东西：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Customer
[
<!ENTITY ntilde "&#241;">
]>

<Customer>
<LastName>Trevi&ntilde;o</LastName>
</Customer> 
```

# php - Symfony2 无法正确呈现 php 模板

> ID：10824139
> 
> 赞同：0
> 
> 时间：2012-05-30T20:56:51.597
> 
> 标签：php, symfony

我在 Symfony2 中渲染 PHP 模板而不是 Twig 模板时遇到问题。问题是 Symfony 出于某种原因无法解释模板中的 PHP 代码。Symfony 不是解释 PHP 代码块，而是将它们简单地呈现为纯文本。我尝试遵循文档并将表单呈现为模板[。](http://symfony.com/doc/current/book/forms.html#rendering-the-form) 当我在控制器中写

```
return $this->render('MyStudyBundle:Default:new.html.twig', array(
    'form' => $form->createView(),
)); 
```

正如我所料，表单加载。但是当我将“new.html.twig”更改为“new.html.php”并尝试在 php 模板中呈现表单时 - 结果我有 HTML 页面，其中 php 代码只是像纯文本一样显示。问题是为什么 Symfony 不解释 php 模板中的 php 代码块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:01:30.967

您需要启用 PHP 模板引擎。

在您的*app/config/config.yml 中*：

```
framework:
     templating:    { engines: ['twig', 'php'] } 
```

这可能对您有所帮助：[How to use PHP instead of Twig for Templates](http://symfony.com/doc/current/cookbook/templating/PHP.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T23:47:37.807

您需要在 app/config.yml 文件中启用 PHP 模板引擎，并将您的模板保存为 .php 而不是 .twig

# javascript - 如何在 aspx-response 中设置 $.post() 函数的“状态”参数？

> ID：10824147
> 
> 赞同：0
> 
> 时间：2012-05-30T20:57:18.833
> 
> 标签：javascript, jquery, android, asp.net

我有一个带有一些 JS 代码的 HTML 页面，它是从 Android 加载的`WebView`。此 JavaScript 使用[jQuery-post-function](http://api.jquery.com/jQuery.post/)调用`HandleAndroidJSON.aspx`带有数据的 -site，并返回带有`data`-、`status`-（和`jqXhr`-）参数的回调函数：

```
function syncWithServer() {
    var dataToSend = Android.getDataToSend();
    $.post("HandleAndroidJSON.aspx", { data: dataToSend }, callbackDataFromServer);
}

function callbackDataFromServer(data, status) {
    Android.setDataFromServer(data, status);
} 
```

“Android”变量是`JavaScriptInterface`在 Android 中创建的，它可以从 JS 调用 Android 方法。

在我的`HandleAndroidJSON.aspx.cs`-file 中，我根据从 Android 收到的数据写了一个响应：

```
public partial class HandleAndroidJSON : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

        Response.Clear();
        Response.ContentType = "text/plain";

        // Read request parameter and deserialize JSON data.
        string jsonDataFromClient = Request.Params["data"];

        // ... Do stuff with the data ...

        if (error != null)
        {
            //This goes into the data-parameter of the callbackFunction
            Response.Write(error); 
            //Response.Status = "403 Error"; //This seems to only be HTTP-status responses,
                                   //not the one used as parameter in the callback-function
        }
        else
        {
            //This does too
            Response.Write(jsonDataToSend); 
        }
        Response.End();
    }
} 
```

- 方法按预期在回调函数的- 参数中`Response.Write()`返回`data`，但我似乎无法设置`status`- 参数 -**它总是返回相同的字符串**：“成功”并且如果我设置 - 属性也不会改变`Response.Status`。

所以问题很简单，如何从 aspx.cs-code 设置 -function 的`status`-parameter `callbackDataFromServer`（从 jQuery-post-function 调用）？

**编辑**：我不是在谈论[HTTP 的状态代码](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)。设置 -property 的`StatusDescription`-、`StatusCode`- 和`Status`- 属性`Response`不会更改`status`回调函数的 -parameter。

**EDIT2**：我认为处理 JavaScript 代码中的状态参数不能解决问题，因为无论如何我都必须再次验证 Android 中的数据（因为可以通过 JavaScript 注入来避免错误处理）。`callbackDataFromServer`正如当前代码所示，我想通过 -function 中的 status-parameter 将它传递给 Android-method 。

**EDIT3**：即使我似乎无法找到是否可以从 aspx 代码中设置 -parameter 的直接答案，但除了-parameter`status`之外，您唯一可以更改的似乎是可以设置的属性成为aspx 站点中的属性。`data``jqXhr.status``Response.StatusCode`

还有`jqXhr.statusText`一个包含字符串的属性，但它似乎是基于状态代码的默认文本，而不是`Response.StatusDescription`（将状态代码设置为 200，将状态描述设置为“成功”返回为“确定”，这是默认的状态码 200）。

这是我正在阅读的主题：[Get the jqXhr.responseText on a jQuery getJSON request using JSONP](https://stackoverflow.com/questions/9949146/get-the-jqxhr-responsetext-on-a-jquery-getjson-request-using-jsonp)

**EDIT4**：我现在发现将 设置`StatusCode`为一个值，这意味着出现问题，将导致没有数据被发送，即使`Response.Write()`- 方法已被调用，这违背了我试图实现的目的。

那么正确的问题是：如果出现问题，**我如何正确传递错误文本（来自 ASP.NET，通过 jQuery），而不是数据？以及如何确保我正在传输的数据是错误或 JSONData？** 我认为简单的方法是检查数据是否以“{”或“[”开头，但我觉得这有点像黑客。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:14:52.370

为了获取状态码，您可以使用`status`成功回调的第三个参数的属性`jqXHR`，这里是小提琴[http://jsfiddle.net/prD5c/](http://jsfiddle.net/prD5c/)

所以你的功能看起来像

```
function callbackDataFromServer(data, status,jqXhr) {
    console.log(jqXhr.status);
    Android.setDataFromServer(data, status);
} 
```

你可以使用`statusCode`类似的

```
$.ajax({
  statusCode: {
    202: function() {
      alert("success");
    },
    403:function(){
      alert(error);
    }
  }
}); 
```

当您使用`$.post`时，您可以`ajaxSetup`像这样定义它

```
$.ajaxSetup({
      statusCode: {
        202: function() {
          alert("success");
        },
        403:function(){
          alert(error);
        }
      }
    }); 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# sql - SQL 查询中的语法错误

> ID：10824151
> 
> 赞同：0
> 
> 时间：2012-05-30T20:57:29.897
> 
> 标签：sql, sql-server

```
DECLARE @startRowIndex int  
  set @startRowIndex=0
  Declare @maximumRows int 
  set @maximumRows=5

SET ROWCOUNT 5;

WITH OrderedEmployees As

SELECT *, ROW_NUMBER() OVER (Order By EmployeeID ASC) as RowNum FROM Employees 

 SELECT * FROM OrderedEmployees Where RowNum > @startRowIndex
 Order By EmployeeID ASC 
```

我从一个网站上得到了这个查询，但是当我在 SQL Server Management Studio 中运行它时，它给了我以下错误，请帮帮我，我直觉这只是一个语法错误，让我很困惑，请帮帮我

> 消息 156，级别 15，状态 1，第 10 行
> 关键字“SELECT”附近的语法不正确

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:59:30.203

我相信这就是你想要的：

```
DECLARE @startRowIndex int  
  set @startRowIndex=0
  Declare @maximumRows int 
  set @maximumRows=5

SET ROWCOUNT 5

;WITH OrderedEmployees As
(
    SELECT *, ROW_NUMBER() OVER (Order By EmployeeID ASC) as RowNum 
    FROM Employees 
)
SELECT * 
FROM OrderedEmployees 
Where RowNum > @startRowIndex
Order By EmployeeID ASC 
```

不过，我真的不知道你为什么选择使用`ROWCOUNT`而不是仅仅过滤你的 CTE。我会使用：

```
DECLARE @startRowIndex int  
  set @startRowIndex=0
  Declare @maximumRows int 
  set @maximumRows=5

;WITH OrderedEmployees As
(
    SELECT *, ROW_NUMBER() OVER (Order By EmployeeID ASC) as RowNum 
    FROM Employees 
)
SELECT * 
FROM OrderedEmployees 
Where RowNum > @startRowIndex AND RowNum <= @maximumRows
Order By EmployeeID ASC 
```

# perl - perl 打开和读取文件的哈希

> ID：10824152
> 
> 赞同：2
> 
> 时间：2012-05-30T20:57:30.473
> 
> 标签：perl, hash, io

无论出于何种原因，我不得不尝试一些大的有序文件处理，我开始尝试使用以下方式使用文件哈希：

```
my %fo=();#File operations hash
foreach my $fn("file1","file2","file3","file4"){
        open($fo{$fn}{"if"},"<","$fn") or die ("Error open input file $fn: $!");#Input file
        $fo{$fn}{"v"} = <$fo{$fn}{"if"}>;#read one record
} 
```

所以当打印 Dumper(\%fo) 我得到：

```
$VAR1 = {
      'file1' => {
                   'v' => undef,
                   'if' => \*{'::$__ANONIO__'}
                 },
      'file2' => {
                   'v' => 'GLOB(0x8f5f098)',
                   'if' => \*{'::$__ANONIO__'}
                 },
      'file3' => {
                   'v' => undef,
                   'if' => \*{'::$__ANONIO__'}
                 },
      'file4' => {
                   'v' => 'GLOB(0x8edf1e0)',
                   'if' => \*{'::$__ANONIO__'}
                 }
    }; 
```

我的问题是，当“指针”是哈希时，如何正确读取文件？该文件正在正确打开并且文件不是空的，但我在 Dumper 输出中找不到这些行，并且我不确定如何/从 GLOB（哈希）中解释什么。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:07:31.437

`<...>`可以是[`readline(...)`](http://perldoc.perl.org/functions/readline.html)和的快捷方式[`glob('...')`](http://perldoc.perl.org/functions/glob.html)。您希望它是前者，但在这种情况下它是后者。

你可以使用

```
readline( $fo{$fn}{"if"} ) 
```

或者

```
<{$fo{$fn}{"if"}}>          # Add curlies around the expression. 
```

或者

```
use IO::Handle qw( );       # Not needed in 5.14+
$fo{$fn}{"if"}->getline() 
```

来解决你的问题。

# java - Eclipse 中的有界不匹配。“该类型不是有界参数的有效替代品”

> ID：10824154
> 
> 赞同：0
> 
> 时间：2012-05-30T20:57:34.733
> 
> 标签：java, generics

我有一个通用类 Storage 和另一个通用类 StoragePlus。对于下面带有粗体注释的行，我收到了一个有界错误不匹配错误。

这是我第一堂课的代码。

```
public class Storage<T extends Comparable<? super T>> {
//private T t;
private T[] isafe;
public int max;
private int nextIndex;

public Storage(int maxNum, T[] seedArr){

    if(maxNum < 0){
        throw new IllegalArgumentException();
    }
    else{

        isafe = Arrays.copyOf(seedArr, maxNum);
        nextIndex = 0;
        max = maxNum;

    }
} 
```

这是第二类的代码。

```
public class StoragePlus <T> extends Storage<T>{ **//getting an error here**

public StoragePlus(int maxNum, T[] arr){
    super(maxNum,(Comparable[]) arr);
}

@Override
public boolean equals(Object obj){
    if(obj == null|| obj.getClass() != this.getClass()){
        return false;
    }
    else{
        if(obj == this){
            return true;    
        }
        else{
            @SuppressWarnings("unchecked")
        Storage<?> temp = (Storage<T>) obj; **// also getting an error here**
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:18:11.213

我想你想要

```
Storage<T extends Comparable<T>>
StoragePlus<T extends Comparable<T>> extends Storage<T> 
```

在 equals 中，您将只能转换`Object`为`Storage<?>`. 否则，您需要`@SuppressWarnings`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:17:14.187

因为你没有限制`T`for `StoragePlus`。

# python - matplotlib 图例位置编号

> ID：10824156
> 
> 赞同：43
> 
> 时间：2012-05-30T20:57:37.980
> 
> 标签：python, matplotlib

我开始使用 Python 进行科学计算，我非常喜欢它，但是我对 matplotlib.pylab.legend 函数的一个特性感到困惑。特别是，位置功能允许使用数字指定图例的位置，遵循以下方案：

*   最佳——0
*   右上角 -- 1
*   左上角——2
*   左下——3
*   右下 -- 4
*   对——5
*   左中——6
*   中右——7
*   下中心 -- 8
*   上中部——9
*   中锋——10

有谁知道你为什么不使用小键盘上的排序？即中心 - 5，右上角 - 9等。

我只是好奇是否有人知道。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-30T21:26:39.700

[文档](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.legend)显示了这个例子：

```
legend( ('label1', 'label2', 'label3'), loc='upper left') 
```

大概，你可以写`loc=2`，但你为什么要写？使用英文单词更具可读性。

至于为什么他们没有枚举与数字小键盘对齐的值，我想他们当时并没有考虑数字小键盘。

**编辑：**这里值得包含[Joe Kington](https://stackoverflow.com/users/325565/joe-kington)评论的全文：

> 实际上，他们当时是故意模仿 matlab 的行为。请参阅 MATLAB 文档中的“过时位置值”部分`legend`：[mathworks.com/help/techdoc/ref/legend.html](http://www.mathworks.com/help/techdoc/ref/legend.html)

# java - 实现抽象列表

> ID：10824157
> 
> 赞同：2
> 
> 时间：2012-05-30T20:57:38.323
> 
> 标签：java

我正在查看[http://docs.oracle.com/javase/tutorial/collections/custom-implementations/index.html](http://docs.oracle.com/javase/tutorial/collections/custom-implementations/index.html)教程，我尝试做同样的事情：

```
class MyArrayList<T> extends AbstractList<T> {

    private final T[] a;

    MyArrayList(T[] array) {
        a = array;
    }

    @Override
    public T get(int index) {
        return a[index];
    }

    @Override
    public T set(int index, T element) {
        T oldValue = a[index];
        a[index] = element;
        return oldValue;
    }

    @Override
    public int size() {
        return a.length;
    }

    @Override
    public Object[] toArray() {
        return (Object[]) a.clone();
    }

    public static void main(String[] args) {
        String[] arr = {"one", "two", "three"};
        MyArrayList<String> list = new MyArrayList<String>(arr);
        list.get(1);
        list.add(1, "seven");
        System.out.println(list);
    }
} 
```

尝试插入元素时出现异常：

```
Exception in thread "main" java.lang.UnsupportedOperationException
    at java.util.AbstractList.add(Unknown Source) 
```

为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T21:00:58.940

您没有覆盖方法`add()`。

AbstractList的[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/AbstractList.html#add%28java.lang.Object%29)指出：

> 请注意，除非覆盖 add(int, Object)，否则此实现会引发 UnsupportedOperationException。

解决方法是……覆盖该方法。或者不使用该`add()`方法，以便您`MyArrayList`的 ' 的大小是不可变的（但不是它的值） - 就像一个数组，这是您存储值的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:03:12.890

从抽象列表的[java文档中：](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractList.html)

“要实现可修改的列表，程序员必须额外覆盖 set(int, E) 方法（否则会引发 UnsupportedOperationException）。如果列表是可变大小的，程序员必须额外覆盖 add(int, E) 和 remove( int) 方法。”

您必须覆盖 add 方法:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T21:00:58.690

`add`如果你想要一个可变列表，你需要实现方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T21:01:10.627

`add`在列表中是可选的。AbstractList 实现它以抛出异常。如果你想让它做其他事情，那么你可以简单地覆盖它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-02T14:01:28.230

首先，你真的需要实现一个抽象列表吗？在大多数情况下，java List 对你来说就足够了。

实现抽象类的烦人部分是您必须实现每个抛出 UnsupportedOperationException 的方法。

# c# - 使用 C# 将 csv 文件转换为 json

> ID：10824165
> 
> 赞同：32
> 
> 时间：2012-05-30T20:58:08.447
> 
> 标签：c#, json, csv

我想知道是否有人编写了一个实用程序来使用 C# 将 CSV 文件转换为 Json。从上一个关于stackoverflow的问题中，我知道了这个不错的实用程序-https: [//github.com/cparker15/csv-to-json](https://github.com/cparker15/csv-to-json)，目前我打算参考它，但现有的C#实现会很有帮助！谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-30T21:27:15.957

如果你可以使用`System.Web.Extensions`，这样的事情可以工作：

```
var csv = new List<string[]>(); // or, List<YourClass>
var lines = System.IO.File.ReadAllLines(@"C:\file.txt");
foreach (string line in lines)
    csv.Add(line.Split(',')); // or, populate YourClass          
string json = new 
    System.Web.Script.Serialization.JavaScriptSerializer().Serialize(csv); 
```

您可能对 csv 文件有更复杂的解析要求，并且您可能有一个封装一行数据的类，但关键是一旦您拥有一组行，您就可以使用一行代码序列化为 JSON。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-10-06T20:49:52.027

[Cinchoo ETL](https://www.nuget.org/packages/ChoETL.JSON/) - 一个开源库，只需几行代码即可轻松将 CSV 转换为 JSON

对于示例 CSV：

```
Id, Name, City
1, Tom, NY
2, Mark, NJ
3, Lou, FL
4, Smith, PA
5, Raj, DC 
```

示例代码，

```
string csv = @"Id, Name, City
1, Tom, NY
2, Mark, NJ
3, Lou, FL
4, Smith, PA
5, Raj, DC
";

StringBuilder sb = new StringBuilder();
using (var p = ChoCSVReader.LoadText(csv)
    .WithFirstLineHeader()
    )
{
    using (var w = new ChoJSONWriter(sb))
        w.Write(p);
}

Console.WriteLine(sb.ToString()); 
```

输出 JSON：

```
[
 {
  "Id": "1",
  "Name": "Tom",
  "City": "NY"
 },
 {
  "Id": "2",
  "Name": "Mark",
  "City": "NJ"
 },
 {
  "Id": "3",
  "Name": "Lou",
  "City": "FL"
 },
 {
  "Id": "4",
  "Name": "Smith",
  "City": "PA"
 },
 {
  "Id": "5",
  "Name": "Raj",
  "City": "DC"
 }
] 
```

小提琴示例：[https ://dotnetfiddle.net/pclnsT](https://dotnetfiddle.net/pclnsT)

查看[CodeProject](https://www.codeproject.com/search.aspx?q=Cinchoo%20ETL)文章以获得更多帮助。

**更新：** 如果您的 CSV 文件有重复的列名或没有名称，请使用以下步骤生成 JSON 文件

```
string csv = @"Id, Name, 
1, Tom, NY
2, Mark, NJ
3, Lou, FL
4, Smith, PA
5, Raj, DC
";

StringBuilder sb = new StringBuilder();
using (var p = ChoCSVReader.LoadText(csv)
    .WithField("Id", position: 1)
    .WithField("Name", position: 2)
    .WithField("City", position: 3)
    .WithFirstLineHeader(true)
    )
{
    using (var w = new ChoJSONWriter(sb))
        w.Write(p);
}

Console.WriteLine(sb.ToString()); 
```

小提琴示例：[https ://dotnetfiddle.net/pP5Du6](https://dotnetfiddle.net/pP5Du6)

免责声明：我是这个库的作者。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-07-19T00:40:51.617

我使用了 Dictionary 并使用 newtonsoft 返回了 json

```
public string ConvertCsvFileToJsonObject(string path) 
{
    var csv = new List<string[]>();
    var lines = File.ReadAllLines(path);

    foreach (string line in lines)
        csv.Add(line.Split(','));

    var properties = lines[0].Split(',');

    var listObjResult = new List<Dictionary<string, string>>();

    for (int i = 1; i < lines.Length; i++)
    {
        var objResult = new Dictionary<string, string>();
        for (int j = 0; j < properties.Length; j++)
            objResult.Add(properties[j], csv[i][j]);

        listObjResult.Add(objResult);
    }

    return JsonConvert.SerializeObject(listObjResult); 
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-09-13T06:58:39.250

```
Install Nuget package NewtonSoft.Json
Add reference dll Microsoft.VisualBasic

using System.Linq;
using Newtonsoft.Json;
using Microsoft.VisualBasic.FileIO;
using System.IO;
using System;
using System.Collections.Generic;
using System.Globalization;

namespace Project
{
    public static class Program
    {
        public static void Main(string[] args)
        {
            string CSVpath = @"D:\New Folder\information.csv";
            string analyticsData = ReadFile(CSVpath);
        }

        private static string ReadFile(string filePath)
        {
            string payload = "";
            try
            {
                if (!string.IsNullOrWhiteSpace(filePath) && File.Exists(filePath) && Path.GetExtension(filePath).Equals(".csv", StringComparison.InvariantCultureIgnoreCase))
                {
                    string[] lines = File.ReadAllLines(filePath);

                    if (lines != null && lines.Length > 1)
                    {
                        var headers = GetHeaders(lines.First());
                        payload = GetPayload(headers, lines.Skip(1));
                    }
                }
            }
            catch (Exception exp)
            {
            }
            return payload;
        }

        private static IEnumerable<string> GetHeaders(string data)
        {
            IEnumerable<string> headers = null;

            if (!string.IsNullOrWhiteSpace(data) && data.Contains(','))
            {
                headers = GetFields(data).Select(x => x.Replace(" ", ""));
            }
            return headers;
        }

        private static string GetPayload(IEnumerable<string> headers, IEnumerable<string> fields)
        {
            string jsonObject = "";
            try
            {
                var dictionaryList = fields.Select(x => GetField(headers, x));
                jsonObject = JsonConvert.SerializeObject(dictionaryList);
            }
            catch (Exception ex)
            {
            }
            return jsonObject;
        }

        private static Dictionary<string, string> GetField(IEnumerable<string> headers, string fields)
        {
            Dictionary<string, string> dictionary = null;

            if (!string.IsNullOrWhiteSpace(fields))
            {
                var columns = GetFields(fields);

                if (columns != null && headers != null && columns.Count() == headers.Count())
                {
                    dictionary = headers.Zip(columns, (x, y) => new { x, y }).ToDictionary(item => item.x, item => item.y);
                }
            }
            return dictionary;
        }

        public static IEnumerable<string> GetFields(string line)
        {
            IEnumerable<string> fields = null;
            using (TextReader reader = new StringReader(line))
            {
                using (TextFieldParser parser = new TextFieldParser(reader))
                {
                    parser.TextFieldType = FieldType.Delimited; parser.SetDelimiters(","); fields = parser.ReadFields();
                }
            }
            return fields;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-06-07T12:29:25.957

**仅**依赖于Newtonsoft.Json ，这是一个辅助方法，给定一组 CSV 行，第一个是标题。

```
 public static IEnumerable<JObject> CsvToJson(IEnumerable<string> csvLines)
    {
        var csvLinesList = csvLines.ToList();

        var header = csvLinesList[0].Split(',');
        for (int i = 1; i < csvLinesList.Count; i++)
        {
            var thisLineSplit = csvLinesList[i].Split(',');
            var pairedWithHeader = header.Zip(thisLineSplit, (h, v) => new KeyValuePair<string, string>(h, v));

            yield return new JObject(pairedWithHeader.Select(j => new JProperty(j.Key, j.Value)));
        }
    } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-10-24T14:02:08.660

我使用[ChoETL](https://github.com/Cinchoo/ChoETL)：

```
using ChoETL;
using System.IO;

public class FromCSVtoJSON
{
    public FromCSVtoJSON()
    {

    }

    public void convertFile(string inputFile, string outputFile)
    {
        using (var writer = new ChoJSONWriter(outputFile))
        {
            using (var reader = new ChoCSVReader(inputFile).WithFirstLineHeader())
            {
                writer.Write(reader);
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-30T21:13:01.693

从[同一个 SO 答案](https://stackoverflow.com/questions/662859/convert-csv-xls-to-json)中，有一个指向[这篇文章](http://staceyw1.wordpress.com/2008/11/13/back-to-csv-convert-csv-text-to-objects-via-json/)的链接。

**CsvToJson 扩展方法**

```
/// <summary>
/// Converts a CSV string to a Json array format.
/// </summary>
/// <remarks>First line in CSV must be a header with field name columns.</remarks>
/// <param name="value"></param>
/// <returns></returns>
public static string CsvToJson(this string value)
{
    // Get lines.
    if (value == null) return null;
    string[] lines = value.Split(new string[] { Environment.NewLine }, StringSplitOptions.RemoveEmptyEntries);
    if (lines.Length < 2) throw new InvalidDataException("Must have header line.");

    // Get headers.
    string[] headers = lines.First().SplitQuotedLine(new char[] { ',' }, false);

    // Build JSON array.
    StringBuilder sb = new StringBuilder();
    sb.AppendLine("[");
    for (int i = 1; i < lines.Length; i++)
    {
        string[] fields = lines[i].SplitQuotedLine(new char[] { ',', ' ' }, true, '"', false);
        if (fields.Length != headers.Length) throw new InvalidDataException("Field count must match header count.");
        var jsonElements = headers.Zip(fields, (header, field) => string.Format("{0}: {1}", header, field)).ToArray();
        string jsonObject = "{" + string.Format("{0}", string.Join(",", jsonElements)) + "}";
        if (i < lines.Length - 1)
            jsonObject += ",";
        sb.AppendLine(jsonObject);
    }
    sb.AppendLine("]");
    return sb.ToString();
} 
```

在上面的扩展中调用的某些方法似乎存在问题（请参阅原始博客文章的评论），但它应该可以让您大部分时间到达那里。

**编辑**这是关于拆分 CSV 行的[另一个 SO 答案。](https://stackoverflow.com/questions/3268622/regex-to-split-line-csv-file)您可以使用建议的正则表达式解决方案之一来创建自己的`SplitQuotedLine`方法：

```
public static string SplitQuotedLine(this string value, char separator, bool quotes) {
    // Use the "quotes" bool if you need to keep/strip the quotes or something...
    var s = new StringBuilder();
    var regex = new Regex("(?<=^|,)(\"(?:[^\"]|\"\")*\"|[^,]*)");
    foreach (Match m in regex.Matches(value)) {
        s.Append(m.Value);
    }
    return s.ToString();
} 
```

以上我没有测试，如有错误请见谅。

此外，似乎[Zip 是一种 LINQ 扩展方法](http://msdn.microsoft.com/en-us/library/dd267698.aspx)，因此可以解决该问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-04T13:32:38.570

这是我的。它可以解析几个世纪以来的 9k CSV 记录。哈哈

```
class CSVTOJSON
{
    public string ConvertToJSON()
    {
        string json = string.Empty;
        string csv = string.Empty;

        using (StreamReader reader = new StreamReader("data.csv"))
        {
            csv = reader.ReadToEnd();
        }

        string[] lines = csv.Split(new string[] { "\n" }, System.StringSplitOptions.None);

        if (lines.Length > 1)
        {
            // parse headers
            string[] headers = lines[0].Split(',');

            StringBuilder sbjson = new StringBuilder();
            sbjson.Clear();
            sbjson.Append("[");

            // parse data
            for (int i = 1; i < lines.Length; i++)
            {
                if (string.IsNullOrWhiteSpace(lines[i])) continue;
                if (string.IsNullOrEmpty(lines[i])) continue;

                sbjson.Append("{");

                string[] data = lines[i].Split(',');

                for (int h = 0; h < headers.Length; h++)
                {
                    sbjson.Append(
                        $"\"{headers[h]}\": \"{data[h]}\"" + (h < headers.Length - 1 ? "," : null)
                    );
                }

                sbjson.Append("}" + (i < lines.Length - 1 ? "," : null));
            }

            sbjson.Append("]");

            json = sbjson.ToString();
        }

        return json;
    }
} 
```

但它有效。

控制台日志：

```
Converting CSV to JSON
CSV has 9486 data
Total duration converting CSV to JSON: 00:00:00.0775373 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-05T20:49:21.940

试试这个并转换`CSV`为`JSON`对象：

```
public static List<object> CsvToJson( string body, string[] column ) {
    if ( string.IsNullOrEmpty( body ) ) return null;
    string[] rowSeparators = new string[] { "\r\n" };
    string[] rows = body.Split( rowSeparators, StringSplitOptions.None );
    body = null;
    if ( rows == null || ( rows != null && rows.Length == 0 ) ) return null;
    string[] cellSeparator = new string[] { "," };
    List<object> data = new List<object>( );
    int clen = column.Length;
    rows.Select( row => {
        if ( string.IsNullOrEmpty( row ) ) return row;
        string[] cells = row.Trim( ).Split( cellSeparator, StringSplitOptions.None );
        if ( cells == null ) return row;
        if ( cells.Length < clen ) return row;
        Dictionary<object, object> jrows = new Dictionary<object, object>( );
        for ( int i = 0; i < clen; i++ ) {
            jrows.Add( column[i], cells[i]?.Trim( ) );
        }
        data.Add( jrows );
        return row;
    } ).ToList( );
    rowSeparators = null; rows = null;
    cellSeparator = null;
    return data;
}

var data = CsvToJson("csv_input_str", new string[]{ "column_map" })
string jsonStr = new JavaScriptSerializer { MaxJsonLength = int.MaxValue }.Serialize( data ); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-01-04T05:13:53.650

确保在解析大型 csv 文件之前在 web.config 中添加以下内容。

```
 <system.web.extensions>
       <scripting>
           <webServices>
               <jsonSerialization maxJsonLength="50000000"/>
           </webServices>
       </scripting>
   </system.web.extensions> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-01-21T18:35:15.640

尝试这个：

```
 StreamReader sr = new StreamReader(filePath);
 while ((line = sr.ReadLine()) != null)
 {
      //Console.WriteLine(line);
      string[] csv = line.Split(',');
      var dictionary = new Dictionary<string, string>();
      dictionary.Add("dispatching_base_number",csv[0]);
      dictionary.Add("available_vehicles", csv[1]);
      dictionary.Add("vehicles_in_trips", csv[2]);
      dictionary.Add("Cancellations", csv[3]);
      string jsonN = new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(dictionary);
      Console.WriteLine("Sending message: {0}",jsonN);
 } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-08-17T18:17:33.387

我寻找这个问题的答案最后我通过使用字典解决了它

```
public static void CreateJsonFromCSV()
{
    string path = "C:\\Users\\xx\\xx\\xx\\xx\\lang.csv";
    string textFilePath = path;
    const Int32 BufferSize = 128;

    using (var fileStream = File.OpenRead(textFilePath))
    using (var streamReader = new StreamReader(fileStream, Encoding.UTF8, true, BufferSize))
    {
        String line;
        Dictionary<string, string> jsonRow = new Dictionary<string, string>();

        while ((line = streamReader.ReadLine()) != null)
        {

            string[] parts = line.Split(',');

            string key_ = parts[0];
            string value = parts[1];

            if (!jsonRow.Keys.Contains(key_))
            {
                jsonRow.Add(key_, value );
            }

        }
        var json = new JavaScriptSerializer().Serialize(jsonRow);
        string path_ = "C:\\XX\\XX\\XX\\XX\\XX.csv";
        File.WriteAllText(path_, json);
    }

} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-10-23T05:35:51.087

首先，将 csv 文件加载到数据表中，并将其序列化为 Json 文档。它使用可以明智地解析 csv 的 OLEDB 提供程序，

感谢 Jim Scott，[https://stackoverflow.com/a/1050278/6928056](https://stackoverflow.com/a/1050278/6928056)

由 K_B 提供，[https: //stackoverflow.com/a/2979938/6928056](https://stackoverflow.com/a/2979938/6928056)

```
using System.Data;
using System.Data.OleDb;
using System.Globalization;
using System.IO;
using Newtonsoft.Json;

static string ConvertCsvToJson(string path, bool isFirstRowHeader)
{
    string header = isFirstRowHeader ? "Yes" : "No";

    string pathOnly = Path.GetDirectoryName(path);
    string fileName = Path.GetFileName(path);

    string sql = @"SELECT * FROM [" + fileName + "]";

    using(OleDbConnection connection = new OleDbConnection(
              @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + pathOnly + 
              ";Extended Properties=\"Text;HDR=" + header + "\""))
    using(OleDbCommand command = new OleDbCommand(sql, connection))
    using(OleDbDataAdapter adapter = new OleDbDataAdapter(command))
    {
        var dataTable = new DataTable();
        dataTable.Locale = CultureInfo.CurrentCulture;
        adapter.Fill(dataTable);
        return JsonConvert.SerializeObject(dataTable, Formatting.Indented);
    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-03-24T15:49:41.183

bc3tech 解决方案的小变化，即避免外部依赖（在 Newtonsoft.Json 上），而是使用 System.Text.Json（dotnet core 3+）

```
public static IEnumerable<string> CsvToJson(string fileName, char delim = '|')
{
    var lines = File.ReadLines(fileName); 
    var hdr = new List<string>(lines.First().Trim().Split(delim));
    foreach (var l in lines.Skip(1).Where(l => (l.Trim() != String.Empty))) 
    {
        var val = l.Trim().Split(delim);
        var ds = hdr.Zip(val, (k, v) => new { k, v }).ToDictionary(x => x.k, x => x.v);
        yield return JsonSerializer.Serialize(ds);
    }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-11-13T19:28:54.730

将平面 csv 文件转换为简单 json 格式对象集合的简单方法。适用于第一行带有标题行的文件。这种方法的一部分是在 SO 的其他地方找到的。添加对 Microsoft.VisualBasic 的引用。

```
using Microsoft.VisualBasic.FileIO;
public static StringBuilder ReadCsv()
    {
        var path = @"X:\...\input.csv";
        using (TextFieldParser csvParser = new TextFieldParser(path))
        {
            csvParser.CommentTokens = new string[] { "#" };
            //Remember to use your own separator
            csvParser.SetDelimiters(new string[] { ";" });
            csvParser.HasFieldsEnclosedInQuotes = false;

            StringBuilder json = new StringBuilder();
            string[] colNames = new string[0];
            string[] fields = new string[0];

            json.Append("[");

            int counter = 0;
            while (!csvParser.EndOfData)
            {
                if (counter == 0)
                {
                    //Read properies' names
                    colNames = csvParser.ReadFields();
                    counter++;
                    Console.WriteLine($"{colNames.Length} columns detected!");
                }
                else
                {
                    // Read current line fields, pointer moves to the next line.
                    // Read the properties' values
                    fields = csvParser.ReadFields();

                    json.Append("{");

                    for (int i = 0; i < colNames.Length; i++)
                    {
                        json.Append($"\"{colNames[i]}\":{TryParse(fields[i])}");
                        if (i != colNames.Length - 1)
                        {
                            json.Append(",");
                        }
                    }
                    json.Append("},");
                    Console.WriteLine($"Writing record nr.: {counter}");
                    counter++;
                }
            }
            json.Length--; //Remove trailing comma
            json.Append("]");
            return json;
        }
    }

string TryParse(string s)
    {
        if (string.IsNullOrEmpty(s)) return "null";
        //Remember to set your decimal character here!
        if (s.Contains('.'))
        {
            double dResult;
            //This works on my computer, could be different on your machine
            if (double.TryParse(s, NumberStyles.AllowDecimalPoint,
                                CultureInfo.InvariantCulture, out dResult))
                return dResult.ToString(CultureInfo.InvariantCulture);
        }
        else
        {
            int intResult;
            if (int.TryParse(s, out intResult))
                return intResult.ToString(CultureInfo.InvariantCulture);
        }
        return "\"" + s + "\"";
    } 
```

* * *

这应该为您提供一个简单的 json 对象列表。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2020-12-10T01:22:38.513

如果您正在寻找**仅限 C# 的解决方案**，这可能对您有用。我最近遇到了同样的问题，并创建了这种方法来克服。

```
public static string ConvertToJsonStructure(string csvDataAsString, char delimiter = ',', bool hasHeaders = true)
    {
        var output = string.Empty;
        if (string.IsNullOrEmpty(csvDataAsString))
            return "{}";

        var rows = csvDataAsString.Split(new string[] { Environment.NewLine }, StringSplitOptions.None);
        var headers = hasHeaders ? rows[0].Split(delimiter) : null;
        var colCount = headers?.Length;
        var jsonStart = "{";
        var jsonEnd = "}";

        if (rows.Length > (1 + (hasHeaders ? 1 : 0)))
        {
            jsonStart = "[";
            jsonEnd = "]";
        }

        output = output + jsonStart;

        int startIndex = hasHeaders ? 1 : 0;

        for (int i = startIndex; i < rows.Length; i++)
        {
            var cols = rows[i].Split(delimiter);

            if (colCount == null)
                colCount = cols.Length;

            var tempJson = "{";

            for (int j = 0; j < colCount.Value; j++)
            {
                if (hasHeaders)
                    tempJson = tempJson + $"\"{headers[j]}\":";

                var isNumber = Regex.IsMatch(cols[j], @"^\d + $");
                var val = isNumber ? cols[j] : $"\"{cols[j]}\"";
                tempJson = tempJson + val;

                if (j < colCount.Value - 1)
                    tempJson = tempJson + ",";

            }

            tempJson = tempJson + "}";

            if (i < rows.Length - 1)
                tempJson = tempJson + ",";

            output = output + tempJson;
        }

        output = output + jsonEnd;

        return output;
    }
} 
```

你需要将你的内容作为字符串传递给这个方法，你可以做这样的事情来读取你的 csv

```
var csvAsString = File.ReadAllText("TestCsv.csv");

        var result = CsvToJson.ConvertToJsonStructure(csvAsString); 
```

# svn - SVN 导入文件

> ID：10824175
> 
> 赞同：0
> 
> 时间：2012-05-30T20:58:48.570
> 
> 标签：svn, copy

我正在尝试将 ZIP 文件复制到 SVN 服务器。我不想对文件进行版本控制。它只是我的标签的二进制文件。我正在使用这个命令。

svn import "D:\Projetos\Stoneage\BFS\trunk\release\BFS_2015.zip" "https://10.20.43.53:8556/svn/StoneAge/Engenharia de Software/BFS/tag/2015/release/BFS_2015.zip " -m "测试"

CMD 不显示任何错误。并且文件未导入到目标文件夹。

我使用正确的命令吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:02:18.520

`svn import`用于导入目录。对于单个文件使用`svn add`, 比`svn commit`. 如果不对文件进行版本控制，则无法将文件放入存储库。

# batch-file - 如何将标准输入重定向到 Windows 命令行中的文件？

> ID：10824178
> 
> 赞同：19
> 
> 时间：2012-05-30T20:59:06.683
> 
> 标签：batch-file, cmd, stdin, cat

在 Unix 上，我会做类似的事情：

```
cat > file.txt 
```

如何在 Windows 命令提示符或批处理文件上执行此操作？

**编辑：**基本上，我正在寻找`cat`没有参数的功能（它从标准输入读取并将其吐回标准输出）。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-05-15T13:36:08.480

`TYPE CON`

CON 是用于控制台输入的 MS-DOS 设备。您可以按如下方式重定向到文件：

`TYPE CON>output.txt`

要终止，请点击`Ctrl`+`C`或`Ctrl`+ `Z`, `Enter`( `Ctrl`+ `Z`= EOF)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-30T22:10:22.597

如果您只想读取标准输入并将您读取的内容写入标准输出，那么 FINDSTR 可能会起作用，具体取决于您如何使用它。

只要在参数列表的末尾将输入指定为单个文件名，FINDSTR 就会输出输入的精确二进制图像。

```
findstr "^" file.txt 
```

管道或重定向也可能起作用，具体取决于输入的内容：

```
findstr "^" < file.txt
or
type file.txt | findstr "^" 
```

如果在使用带有 FINDSTR 的重定向或管道输入时发生以下任何情况，则输出将被破坏：

*   任何输入行 > 8191 字节
*   最后一行输入没有被 \n 终止。（如果重定向输入，命令可能会挂起）

如果指定了多个输入文件，FINDSTR 将不起作用，因为在这种情况下，文件名将用作每行输出的前缀。

FINDSTR 与 cat 的不同之处还在于它不能同时从标准输入和命名文件中读取。

请参阅[Windows FINDSTR 命令有哪些未记录的功能和限制？](https://stackoverflow.com/questions/8844868/what-are-the-undocumented-features-and-limitations-of-the-windows-findstr-comman)了解更多信息。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-01-14T22:07:15.807

我想`more.exe`可能是你正在寻找的。

它可以从控制台获取输入：

```
more > file1.txt 
```

或者从另一个`TYPE CON` **不**处理的文件中输入：

```
type file1.txt | more > file2.txt 
```

（`more`似乎在您的文件中附加了一个换行符并展开了选项卡，所以不要在二进制数据上使用它！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T21:05:03.167

标准输入：

批处理文件：

```
:: set /p MyVar=   Prompts user for stdin information

set /p MyVar=

echo %MyVar% > filename 
```

# php - 如何将数据传递给自定义 TCPDF 类？

> ID：10824188
> 
> 赞同：0
> 
> 时间：2012-05-30T20:59:47.713
> 
> 标签：php, pdf, tcpdf

到目前为止我有这个：

```
class MYPDF extends TCPDF {

  public function Header(){}

  public function Footer(){}

} 
```

我想做这样的事情

```
class MYPDF extends TCPDF {

    protected $info;

    public function setInfo($info){
        $this->info = $info;
    }
    public function Header(){
         // use $info here
    }
    public function Footer(){
        //use $info here
    }
} 
```

但是它似乎不喜欢它......当我创建 MYPDF 和 setInfo 的实例时，它似乎没有从页眉或页脚中读取它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T21:02:22.887

在您的 Header 和 Footer 函数中访问变量为`$this->info`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-12T12:56:25.500

Header 和 Footer 分别有它们的`$this->getHeaderData()`and 和`$this->getFooterData()`，可以从类外部使用 setHeaderData 和 setFooterData 进行设置。[参见 sourceforce 讨论](https://sourceforge.net/p/tcpdf/discussion/435311/thread/505a9e13/#db72)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T21:04:50.830

TCPDF 类中有内置函数称为 Header 和 Footer。文档可以在这里找到：[http ://www.tcpdf.org/doc/classTCPD.html](http://www.tcpdf.org/doc/classTCPDF.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-07T11:34:19.240

如果外部数据或变量要传入页眉或页脚函数，则需要单独调用**包含**关键字的连接。记住**require_once**在这里不起作用。例子-

```
include ("../../inc/my_con.php"); 
```

这不完全是您的解决方案，但您可以尝试这个概念。

# jenkins - 如何在 Jenkins 的构建页面上直接显示信息？

> ID：10824194
> 
> 赞同：11
> 
> 时间：2012-05-30T21:00:44.450
> 
> 标签：jenkins

我想在 Jenkins 中有以下工作流程：

*   用户点击“立即构建”
*   用户填写构建参数
*   用户点击“构建”
*   生成信息（通过脚本）并与“继续”按钮一起呈现给用户
*   用户单击“继续”按钮，这只会触发另一个作业

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-02T09:44:54.317

[作为使用 groovy 脚本插件的解决方案的替代方案，您可以使用Rich Text Publisher Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Rich+Text+Publisher+Plugin)生成带有 REST 命令的按钮和信息- 您不必编写 groovy 脚本，只需编写标记。

它在构建执行后添加了一个自定义 html 标记来构建页面。它允许使用文件或环境变量配置消息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-04-27T16:43:07.177

在 Jenkins Pipeline 方法中用作

`script{ currentBuild.displayName = Build_Display (this will be overwrite the Job number) currentBuild.description = Build_description }`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-02T00:33:03.507

1.  使用该`Execute shell`操作创建一个设置环境变量的 shell 脚本。例如：`echo "BUILD_DESCRIPTION=example" >BUILD_DESCRIPTION.setting`。

2.  使用该`Inject environment variables`操作来执行 shell 脚本。

3.  使用该`Set build description`操作将构建描述设置为由 shell 脚本设置的变量（例如`${BUILD_DESCRIPTION}`）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-04T16:49:55.590

创建一个更新构建描述的“执行系统 ​​Groovy 脚本”。请参阅[如何通过 REST API 提交 Jenkins 作业？](https://stackoverflow.com/questions/10865538/how-to-submit-jenkins-job-via-rest-api)在构建描述中创建一个按钮。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-28T03:14:16.280

如果我理解正确，您需要一个“确认按钮”或“您确定”按钮：

在 Jenkins 管道中，您可以通过询问用户输入来做到这一点。

```
timeout(time: 15, unit: "MINUTES") {
    input message: 'Are the info correct?'
} 
```

这种方法的问题是，如果用户不采取任何行动，你会让一个 Jenkins 工作程序（或进程）运行最多 X 分钟，这会使 Jenkins 创建一个很长的构建队列。

[这](https://www.jenkins.io/doc/pipeline/steps/pipeline-input-step/#input-wait-for-interactive-input)是文档。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T21:50:48.657

如果我得到了你想做的正确的事情（更多来自标题，更少来自描述）你应该只使用这个[Publisher Plugin](https://wiki.jenkins-ci.org/display/JENKINS/HTML+Publisher+Plugin)：

如果没有帮助，请尝试在您的问题中添加更多信息。

# django - 谷歌应用引擎不加载管理静态媒体文件

> ID：10824197
> 
> 赞同：1
> 
> 时间：2012-05-30T21:00:55.803
> 
> 标签：django, google-app-engine, django-admin

我是 Django 的新手。我正在使用 Google App-engine 和 Google CloudSQL 为 django1.2 项目提供服务。我一直在关注[这里](https://docs.djangoproject.com/en/1.2/intro/tutorial02/)的教程并且遇到了障碍。

我在我的 settings.py 中启用了管理后端，但是当我转到[http://www.examplesite.com/admin/](http://www.examplesite.com/admin/)时，找不到 css 文件。

管理 html 页面加载正常，但静态文件给出 404。

这是我的 app.yml：

```
application: myapp
version: 1
runtime: python27
api_version: 1
threadsafe: true

libraries:
- name: django
  version: "1.2"

builtins:
- django_wsgi: on 
```

我在 settings.py 中将这些保留为默认值：

```
# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash if there is a path component (optional in other cases).
# Examples: "http://media.lawrence.com", "http://example.com/media/"
MEDIA_URL = ''

# URL prefix for admin media -- CSS, JavaScript and images. Make sure to use a
# trailing slash.
# Examples: "http://foo.com/media/", "/media/".
ADMIN_MEDIA_PREFIX = '/media/' 
```

我知道这些文件位于 google_appengine/lib/django_1_2/django/contrib/admin/media/

我是否需要将这些静态资源复制到我的项目目录中？还是我设置错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:08:01.387

在 GAE 中，您需要在 app.yaml 中使静态文件可访问

[https://developers.google.com/appengine/docs/python/config/appconfig#Static_Directory_Handlers](https://developers.google.com/appengine/docs/python/config/appconfig#Static_Directory_Handlers)

# php-5.3 - phpDocumentor，不工作，PHP 警告：strftime()：依赖系统的时区是不安全的

> ID：10824201
> 
> 赞同：0
> 
> 时间：2012-05-30T21:01:04.230
> 
> 标签：php-5.3, pear, strftime, phpdoc

> **可能重复：**
> [如何修复与时区相关的 PHP 错误（function.strtotime 和 function.date）](https://stackoverflow.com/questions/8811603/how-to-fix-php-errors-related-to-timezone-function-strtotime-and-function-date)

我在 CentOS 5.7 64 上安装了最新版本的 PhpDocumentor-1.4.0a2.tgz，我目前的灯安装是 php 5.3.3

我在用

> 梨安装 phpDocumentor-alpha

安装后显示如下：

> 警告：strtotime()：依赖系统的时区设置是不安全的。您*需要*使用 date.timezone 设置或 date_default_timezone_set() 函数。如果您使用了这些方法中的任何一种，但仍然收到此警告，您很可能拼错了时区标识符。我们在 PEAR/Validate.php 的第 454 和 486 行选择了 'America/New_York' 作为 'EDT/-4.0/DST'

我知道这个错误与php的版本有关，并且5.3与PEAR不兼容。
我不介意，因为安装过程给了我一个确定。

我试图生成文档，由于某种原因它没有完成。

```
$ phpdoc -c /usr/share/pear/data/PhpDocumentor/user/bigstep.ini 
```

> PHP 警告：strftime()：依赖系统的时区设置是不安全的。您*需要*使用 date.timezone 设置或 date_default_timezone_set() 函数。如果您使用了这些方法中的任何一种，但仍然收到此警告，您很可能拼错了时区标识符。我们在第 370 行的 /usr/share/pear/PhpDocumentor/phpDocumentor/Smarty-2.6.0/libs/Smarty_Compiler.class.php 中为 'EDT/-4.0/DST' 选择了 'America/New_York'

这是一个不应停止文档生成的 php 警告。但是，该过程进入中间，最后不生成文件。

看来我必须自己检查这些库。有没有人以前见过这个错误，我接下来应该尝试什么来解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:02:52.153

在 php.ini 中设置时区

# regex - 我无法让这个正则表达式正常工作

> ID：10824204
> 
> 赞同：0
> 
> 时间：2012-05-30T21:01:29.937
> 
> 标签：regex, url, preg-match, expression, match

我绝望地试图让 John Grubers URL 识别正则表达式正常工作！我写的这个简单函数总是返回 false，即使里面有一个明显的 URL！

我正在尝试在 2 个不同的函数中测试任何 url 和特定于 web 的 url。我对正则表达式相当陌生，所以这几乎可以肯定是我！

功能：

```
<?php
function isweburl($url)
{
return(preg_match("(?i)\b((?:https?://|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:       [^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!    ()\[\]{};:'\".,<>?«»“”‘’]))", $url));

}

function isanyurl($url)
{
echo "suspected url:$url<br>";
return(preg_match("/(?i)\b((?:https?://|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:    [^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!    ()\[\]{};:'\".,<>?«»“”‘’]))/", $url));

}

$test=isanyurl('http://www.sega.com');
var_dump($test);
echo "<br>web test:<br>";
$test=isweburl('http://www.sega.com');
var_dump($test);
?> 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:31:01.923

下面是你的正则表达式。
我认为 preg_match 需要一个正则表达式分隔符“/ regex /”或“~ regex ~”。
但是，如果您将分隔符用作正则表达式正文中的字符，则必须对其进行转义。

```
"     
 (?i)\b
 (
      (?:
           https?://
        |  www\d{0,3}[.]
        |  [a-z0-9.\-]+[.][a-z]{2,4}/
      )
      (?:
           [^\s()<>]+
        |  \(
           (
                [^\s()<>]+
             |  
                (
                     \([^\s()<>]+\)
                )
           )*
           \)
      )+
      (?:
           \(
           (
                [^\s()<>]+
             |  
                (
                     \([^\s()<>]+\)
                )
           )*
           \)
        |  [^\s`!    ()\[\]{};:'\".,<>?«»“”‘’]
      )
 )
" 
```

由于您`/`用作角色，请尝试使用不同的分隔符。
展开 -

```
"~
 (?i)\b
 (
      (?:
           https?://
        |  www\d{0,3}[.]
        |  [a-z0-9.\-]+[.][a-z]{2,4}/
      )
      (?:
           [^\s()<>]+
        |  \(
           (
                [^\s()<>]+
             |  
                (
                     \([^\s()<>]+\)
                )
           )*
           \)
      )+
      (?:
           \(
           (
                [^\s()<>]+
             |  
                (
                     \([^\s()<>]+\)
                )
           )*
           \)
        |  [^\s`!    ()\[\]{};:'\".,<>?«»“”‘’]
      )
 )
~x" 
```

# jquery - 使用Ajax、jQuery时维护a:visited links的方法

> ID：10824209
> 
> 赞同：0
> 
> 时间：2012-05-30T21:01:46.777
> 
> 标签：jquery, ajax

我正在使用 jQuery ajax 将内容加载到我的网页中。

当用户点击一个链接时，href 会变成不同的颜色，表示他们点击了该链接。然而，问题是当从页面中刷新 ajax 内容以加载其他内容，然后再返回时，用户之前所做的 href 选择将不再保留。

我正在寻找一种方法来跟踪用户在浏览 ajax 网站时访问了哪些链接，以便所有`a:visited`链接都保持不变。

内容是动态的，由 MySQL 数据库提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:04:48.693

如果您使用 ajax 加载内容，我会假设之前单击的内容是简单地使用类来跟踪？

```
$(document).on('click', 'a', function(e) {
    e.preventDefault();
    //do some ajax stuff
    $(this).addClass('visited');
}); 
```

[小提琴](http://jsfiddle.net/adeneo/VCGbF/3/)

如果您正在使用 ajax 重新加载内容，并希望记住访问过的链接，那么它们将不会被记住。您可能需要使用 cookie、本地存储或跟踪服务器上单击的内容，例如在会话变量中使用获取内容的同一 ajax 调用中的正确链接进行更新。

那么问题是为什么要从数据库中重新加载内容，而不是在页面上已经存在内容时将其分离并重新附加。

# python - 如何在使用 python argparse 定义 add_argument 后添加参数

> ID：10824211
> 
> 赞同：1
> 
> 时间：2012-05-30T21:01:49.687
> 
> 标签：python, argparse

我会在 add_argument 有条件地添加*选择参数。*

例子：

```
>> parser.add_argument('service')
>> args, remaining_argv = parser.parse_known_args()

>> parser.add_argument('action', choices=actions) # args.service == bind
>> parser.add_argument('action') # args.service = apache 
```

有没有办法，有类似的东西？

```
>> parser.add_argument('service')
>> parser.add_argument('action')
>> args, remaining_argv = parser.parse_known_args()
>> if args.service == 'bind':
>>     parser.add_argument('action').append_option('choices', actions) 
```

# wpf - WPF：更改嵌套在堆栈面板中的扩展器内的所有文本框的值

> ID：10824212
> 
> 赞同：0
> 
> 时间：2012-05-30T21:01:54.337
> 
> 标签：wpf, vb.net, textbox, stackpanel, expander

这是我第一次使用 WPF。这有点像一场噩梦，但我已经完成了足够多的项目，我现在不想从一个表单应用程序重新开始。

我的问题是：我在扩展器中有 50 个文本框，而扩展器又位于堆栈面板中。我需要将每个文本框的值存储在一个数组中。在表单中，我可能会这样做（顺便说一下，我正在使用 vb.net）：

```
Dim i As Integer
Dim values() as string
For i = 0 To 49
values(i) = form1.Controls("TextBox" & i).text
Next i 
```

（假设我的文本框被命名为 Textbox1、Textbox2、Textbox3 等）

如何在 WPF 中做到这一点？我尝试过使用 Trees（我认为它们被称为？）但每次都失败了，现在放弃了。

哦，我还忘了提到扩展器中还有其他控件（与文本框配对的标签）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:12:32.470

这属于编码恐怖类别，但如果你想继续研究它，FrameworkElement 上有一个名为 FindName ( [http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.findname.aspx](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.findname.aspx) )的方法会做你需要的。它递归地搜索它的子元素，只需命名您的扩展器并在代码隐藏中使用 FindName 来获取所有文本框。

# c# - C# 中的完整目录列表

> ID：10824214
> 
> 赞同：-2
> 
> 时间：2012-05-30T21:01:54.933
> 
> 标签：c#

> **可能重复：**
> [如何执行完整的递归目录和文件扫描？](https://stackoverflow.com/questions/6604885/how-can-i-perform-full-recursive-directory-file-scan)

我找不到任何信息，如何在 C# 中创建完整的目录列表，包括里面的所有文件及其所有子文件夹的文件，即：

```
c:\a.jpg
c:\b.php
c:\c\d.exe
c:\e\f.png
c:\g\h.mpg 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T21:04:05.427

您可以使用[DirectoryInfo.GetFiles](http://msdn.microsoft.com/en-us/library/ms143327) ("C:\*.*", [SearchOption.AllDirectories](http://msdn.microsoft.com/en-us/library/ms143448) );

这将返回一个对象数组[`FileInfo`](http://msdn.microsoft.com/en-us/library/system.io.fileinfo)，其中包括文件名的 Name 和 FullName 属性。

话虽如此，我不会在“C:\”上执行此操作，因为您将返回一个*巨大*的数组，但此技术将在适当的文件夹上正常工作。

如果您使用的是 .NET 4，我建议您改用[EnumerateFiles](http://msdn.microsoft.com/en-us/library/dd413343)，它将返回一个`IEnumerable<T>`而不是一个数组。

但是请注意，上面的代码很可能会失败，因为它需要完全权限才能搜索文件系统。如果您无法访问您尝试搜索的文件系统的特定部分，则会引发 SecurityException。

另外-如果您只对*文件名*而不是完整`FileInfo`信息感兴趣，则可以使用[Directory.EnumerateFiles](http://msdn.microsoft.com/en-us/library/dd383571.aspx)代替，它会返回`IEnumerable<string>`带有所有相关文件名的 an 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:07:15.007

有一篇带有代码示例的[MSDN 文章](http://support.microsoft.com/kb/303974)可以做到这一点。

这是钱：

```
void DirSearch(string sDir) 
{
    try 
    {
        foreach (string d in Directory.GetDirectories(sDir)) 
        {
            foreach (string f in Directory.GetFiles(d, txtFile.Text)) 
            {
                lstFilesFound.Items.Add(f);
            }
            DirSearch(d);
        }
    }
    catch (System.Exception excpt) 
    {
        Console.WriteLine(excpt.Message);
    }
} 
```

# email - 发送电子邮件 codeigniter 函数返回“收件人地址被拒绝：未找到域”而不是 false

> ID：10824217
> 
> 赞同：0
> 
> 时间：2012-05-30T21:02:05.007
> 
> 标签：email, codeigniter, error-handling

我正在使用代码点火器。我测试将电子邮件发送到错误的不存在地址，例如 t@t.com。

我的代码只是这样的控制器的一种方法：

```
function test() {
    $this->email->from('mymail@gmail.com');
    $this->email->to(htmlentities("t@t.com"));
    $this->email->subject('test');
    $this->email->message("Just a test !");     

    $r = $this->email->send();      
    if (!$r)
        echo "not sent, wrong email";
    else
        echo "sent";
} 
```

基本上，send() 函数返回 true 或 false。但它不起作用！我得到的错误信息如下：

```
 A PHP Error was encountered

    Severity: Warning

    Message: mail() [function.mail]: SMTP server response: 550 5.1.2 <t@t.com>: Recipient address rejected: Domain not found

    Filename: libraries/Email.php

    Line Number: 1540

not sent, wrong email 
```

我有消息，所以 send() 函数回复 false 但我也有错误消息，这是我不想要的！

这是一个阻塞点。任何人都知道为什么 send() 函数不返回 true 或 false 回复？

提前感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:15:28.480

我已经尝试过了，它应该可以正常工作，我得到：**未发送，错误的电子邮件。**

您使用的是哪个版本的 CI？确保它是最后一个。

以防万一，请检查CI 文件夹中**system/libraries下的****Email.php**库

 **```
protected function _send_with_mail()
{
    if ($this->_safe_mode == TRUE)
    {
        if ( ! mail($this->_recipients, $this->_subject, $this->_finalbody, $this->_header_str))
        {
            return FALSE;
        }
        else
        {
            return TRUE;
        }
    }
    else
    {
        // most documentation of sendmail using the "-f" flag lacks a space after it, however
        // we've encountered servers that seem to require it to be in place.

        if ( ! mail($this->_recipients, $this->_subject, $this->_finalbody, $this->_header_str, "-f ".$this->clean_email($this->_headers['From'])))
        {
            return FALSE;
        }
        else
        {
            return TRUE;
        }
    }
} 
```

检查里面的函数**_send_with_mail()**看起来和上面的一模一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:15:43.027

摆脱错误的一种快速而肮脏的技巧是在邮件功能前加上'@'：

```
$r = @$this->email->send(); 
```**

# python - 根据输入+另一个变量打印变量

> ID：10824220
> 
> 赞同：2
> 
> 时间：2012-05-30T21:02:22.853
> 
> 标签：python, variables, printing, input

所以我现在正在尝试学习python。我是一个初学者程序员，只有有限的网页设计和 CMS 管理经验。

我决定创建一个简单的小程序，询问用户一个 NASCAR 团队的车号。每个团队都有一组与之相关的变量。到目前为止，我做了 #1 和 #2 并想在完成其余部分之前测试代码的操作。

我遇到了一个问题，我认为我一定是想错了，或者我错过了知识，因为我刚刚开始学习用语言编写代码。

基本上，它要求他们输入车号，当他们输入时，它会显示“司机（车号）”，所以如果我输入“2”，它会显示“司机2”。但我希望它调用另一个变量 driver2，如果正确完成，它将显示“Brad Keselowski”。

这是我的代码：

```
# NASCAR Numbers
# Display Driver Information Based on your Car Number Input

print("\t\t\tWelcome to NASCAR Numbers!")
print("\t\t Match Car Numbers to the Driver Names.")
input("\nPress the Enter Key to Play")

# 1 - Jamie McMurray
carnumber1 = ("1")
driver1 = ("Jamie McMurray")
make1 = ("Chevrolet")
sponsor1 = ("Bass Pro Shops/Allstate")
# 2 - Brad Keselowski
carnumber2 = ("2")
driver2 = ("Brad Keselowski")
make2 = ("Dodge")
sponsor2 = ("Miller Lite")

inputnumber = input("\nWhat car number do you want to lookup?\n\nCar Number:\t#")
driver = "driver"
print(driver + inputnumber) 
```

谁能带领我朝着正确的方向前进？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:09:43.833

您没有利用必要的数据结构。每当您想将一个值映射到另一个值时，您可能需要一个*字典*。每当您有一个连续的项目列表时，您都需要一个列表。

```
>>> # NASCAR Numbers
... # Display Driver Information Based on your Car Number Input
... 
>>> print("\t\t\tWelcome to NASCAR Numbers!")
            Welcome to NASCAR Numbers!
>>> print("\t\t Match Car Numbers to the Driver Names.")
         Match Car Numbers to the Driver Names.
>>> cars = [] # Use a list to store the car information.
>>> cars.append({'driver': 'Jamie McMurray', 'make': 'Chevrolet', 'sponsor': 'Bass Pro Shops/Allstate'}) # Each individual car detail should be in a dictionary for easy lookup.
>>> cars.append({'driver': 'Brad Keselowski', 'make': 'Dodge', 'sponsor': 'Miller Lite'})
>>> inputnumber = input("\nWhat car number do you want to lookup?\n\nCar Number:\t#")

What car number do you want to lookup?

Car Number: #2
>>> driver = cars[inputnumber-1]['driver'] # Python lists start at zero, so subtract one from input.
>>> print("driver" + str(inputnumber))
driver2
>>> print(driver)
Brad Keselowski 
```

顺便说一句：使用`input`是危险的，因为无论用户类型如何被评估为 python。考虑使用`raw_input`，然后手动将输入转换为整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:13:17.473

尝试这样的事情：

```
from collections import namedtuple

Car = namedtuple('Car', 'driver make sponsor')

cars = [
        Car('Jim', 'Ford', 'Bass Pro Shops'),
        Car('Brad', 'Dodge', 'Miller Lite'),
        ]

inputnumber = input("\nWhat car number do you want to lookup?\n\nCar Number:\t#")
print(cars[int(inputnumber) - 1].driver) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T22:25:43.817

编辑：

1.  添加评论
2.  将 raw_input() 更改为 input() 因为他使用的是 Python 3

.

```
# I create a class (a structure that stores data along with functions that
# operate on the data) to store information about each driver:
class Driver(object):
    def __init__(self, number, name, make, sponsor):
        self.number = number
        self.name = name
        self.make = make
        self.sponsor = sponsor

# Then I make a bunch of drivers, and store them in a list:
drivers = [
    Driver(1, "Jamie McMurray", "Chevrolet", "Bass Pro Shops/Allstate"),
    Driver(2, "Brad Keselowski", "Dodge", "Miller Lite")
]

# Then I use a comprehension (x for d in drivers) - it's kind of
# like a single-line for statement - to look at my list of drivers
# and create a dictionary so I can quickly look them up by driver number.
# It's a shorter way of writing:
#   number_index = {}  # an empty dictionary
#   for d in drivers:
#       number_index[d.number] = d
number_index = {d.number:d for d in drivers}

# Now I make a "main" function - this is a naming convention for
# "here's what I want this program to do" (the preceding stuff is
# just set-up):
def main():
    # show the welcome message
    print("\t\t\tWelcome to NASCAR Numbers!")
    print("\t\t Match Car Numbers to the Driver Names.")

    # loop forever
    # (it's not actually forever - when I want to quit, I call break to leave)
    while True:
        # prompt for input
        # get input from keyboard
        # strip off leading and trailing whitespace
        # save the result
        inp = input("\nEnter a car number (or 'exit' to quit):").strip()

        # done? leave the loop
        # .lower() makes the input lowercase, so the comparison works
        #   even if you typed in 'Exit' or 'EXIT'
        if inp.lower()=='exit':
            break

        try:
            # try to turn the input string into a number
            inp = int(inp)
        except ValueError:
            # int() didn't like the input string
            print("That wasn't a number!")

        try:
            # look up a driver by number (might fail)
            # then print a message about the driver
            print("Car #{} is driven by {}".format(inp, number_index[inp].name))
        except KeyError:
            # number[inp] doesn't exist
            print("I don't know any car #{}".format(inp))

# if this script is called directly by Python, run the main() function
# (if it is loaded as a module by another Python script, don't)
if __name__=="__main__":
    main() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T21:13:16.873

`input`要使代码以最少的更改工作，在更改`raw_input`两次后，您可以使用它来代替`print(driver + inputnumber)`：

```
 print(vars()[driver + inputnumber]) 
```

然而，这是一个相当糟糕的方法：`vars()`给你一个变量的字典，所以你应该自己创建一个字典，键是车号。

您可以将每辆汽车/驾驶员建模为一个字典，如下所示：

```
# A dictionary to hold drivers
drivers = {}

# 1 - Jamie McMurray
jamie = {} # each driver modelled as a dictionary
jamie["carnumber"] = "1"
jamie["name"] = "Jamie McMurray"
jamie["make"] = "Chevrolet"
jamie["sponsor"] = "Bass Pro Shops/Allstate"

drivers[1] = jamie

# 2 - Brad Keselowski
brad = {}
brad["carnumber"] = "2"
brad["name"] = "Brad Keselowski"
brad["make"] = "Dodge"
brad["sponsor"] = "Miller Lite"

drivers[2] = brad

inputnumber = raw_input("\nWhat car number do you want to lookup?\n\nCar Number:\t#")

inputnumber = int(inputnumber) # Convert the string in inputnumber to an int

driver = drivers[inputnumber] # Fetch the corresponding driver from drivers

print(driver) # Print information, you can use a template to make it pretty 
```

很快，您就会意识到对其进行建模的自然方法是创建一个类来表示司机（可能还有其他类来表示汽车）。

# list - Prolog：两个列表的差异

> ID：10824228
> 
> 赞同：1
> 
> 时间：2012-05-30T21:03:02.183
> 
> 标签：list, prolog

Prolog 很新。我正在尝试提供两个列表并将两者的差异返回给我。第二个列表中可以包含绑定变量和未绑定变量。我已经尝试过跟踪它，它一直递归并在 NewL 中给了我一个正确的列表，但是在返回的路上它否定了我所做的所有删除。出了什么问题？谢谢您的帮助！

```
% Find difference between two lists, return result in Difference
difference(List,[H|T],Difference) :-   % When H is unbound var, use Tail
    var(H),!,difference(List,T,Difference),!.

difference(List,[H|T],Difference) :- % When H is bound var, remove from List.
    subtract(List,[H],NewL),
    difference(NewL,T,Difference),!. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T08:50:26.643

假设减法/3 来自[SWI-Prolog 库](http://www.swi-prolog.org/pldoc/doc_for?object=subtract/3)，因此是正确的，那么您只剩下一种可能性：您忘记在第二个参数上声明基本情况，这会驱动递归。

并考虑到来自@mog 的评论，应**仅**在需要时使用剪切。当然，决定何时**需要**可能很困难......

# android - 如何在 Content Provider 中更新、插入、删除而不生成通知？

> ID：10824229
> 
> 赞同：0
> 
> 时间：2012-05-30T21:03:10.110
> 
> 标签：android, android-contentprovider

我在 SQLite 数据库之上编写了一个自定义内容提供程序。内容提供者扩展[了 SQLiteContentProvider](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android-apps/2.2_r1.1/com/android/providers/calendar/SQLiteContentProvider.java/?v=source)。内容提供者在许多插入、删除或更新操作结束时发送通知。现在我希望对数据库进行一些更新、插入和删除操作，但不希望生成任何通知。如何做到这一点？

代码示例来自`SQLiteContentProvider#bulkInsert`

```
@Override
    public int bulkInsert(Uri uri, ContentValues[] values) {
        int numValues = values.length;
        mDb = mOpenHelper.getWritableDatabase();
        mDb.beginTransactionWithListener(this);
        try {
            for (int i = 0; i < numValues; i++) {
                Uri result = insertInTransaction(uri, values[i]);
                if (result != null) {
                    mNotifyChange = true;
                }
                mDb.yieldIfContendedSafely();
            }
            mDb.setTransactionSuccessful();
        } finally {
            mDb.endTransaction();
        }

        onEndTransaction();
        return numValues;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:07:52.513

我建议在调用您不希望收到通知的 update/insert/delete 时使用不同的 URI

所以你会有`YourMetadata.CONTENT_URI`并且`YourMetadata.CONTENT_URI_DONT_NOTIFY`

然后你可以正常执行插入/更新/删除..在你通知之前检查你的uri是否是你不应该通知的

如果您有 URI 匹配器，则可以使用匹配结果中的代码来确定您在哪个 URI 上进行了批量插入

如果没有，您可以使用

```
boolean notifyChanges = YourMetadata.CONTENT_URI.equals(uri); //will be true if we want to notify on the URI 
```

然后在插入后使用 notifyChanges 的值来确定是否要通知。

# jquery - 如何使用 ajax 提交 ajax 生成的表单 (html)

> ID：10824230
> 
> 赞同：1
> 
> 时间：2012-05-30T21:03:12.250
> 
> 标签：jquery, ajax, forms

我需要创建一个具有给定值的表单（条目的编辑功能）。

我的表单是由 ajax 代码生成的，如下所示：

```
echo '<p class="validateTips">Bitte alle Felder ausfüllen!</p>
        <form id="coffee_talk_edit" action="edit.php?action=event_edit" method="post" accept-charset="utf-8" enctype="multipart/form-data">
            <table>
                <tr>
                    <td class="event_width">Datum:</td>
                    <td>
                        <select name="day_from" id="day_from_e">
                            <option value="none" class="bold italic">Tag</option>';
                                for($i=1; $i<=31; $i++){
                                    if ($i == $getDate_day) {
                                        echo '<option value="'.$i.'" selected>'.$i.'</option>';
                                    } else echo '<option value="'.$i.'">'.$i.'</option>';
                                }
                        echo '</select>
                        <select name="month_from" id="month_from_e">
                            <option value="none" class="bold italic">Monat</option>';
                                for($i=1; $i<=12; $i++){
                                    if ($i == $getDate_month) {
                                        echo '<option value="'.$i.'" selected>'.$month_name[$i].'</option>';
                                    } else echo '<option value="'.$i.'">'.$month_name[$i].'</option>';
                                }
                        echo '</select>
                        <select name="year_from" id="year_from_e">
                            <option value="none" class="bold italic">Jahr</option>';
                                for($i=$year; $i>=2008; $i--){
                                    if ($i == $getDate_year) {
                                        echo '<option value="'.$i.'" selected>'.$i.'</option>';
                                    } else echo '<option value="'.$i.'">'.$i.'</option>';
                                }
                        echo '</select>
                    </td>
                </tr>
                <tr>
                    <td>Thema:</td>
                    <td class="topic"><input type="text" name="topic" id="topic_e" value="'.$getTheme.'"/></td>
                </tr>
                <tr>
                    <td>Referent:</td>
                    <td class="contributer"><input type="text" name="contributer" id="contributer_e" value="'.$getContributer.'"/></td>
                </tr>
                <tr>
                    <td>Beginn:</td>
                    <td class="begin"><input type="text" name="begin_hour" id="begin_hour_e" value="'.$getBegin_hour.'"/>:<input type="text" name="begin_min" id="begin_min_e" value="'.$getBegin_min.'"/> Uhr</td>
                </tr>
                <tr>
                    <td>Ort:</td>
                    <td class="place"><input type="text" name="place" id="place_e" value="'.$getPlace.'"/></td>
                </tr>
                <tr>
                    <td>Eintritt:</td>
                    <td class="entrance"><input type="text" name="entrance_euro" id="entrance_euro_e" value="'.$getEntrance_euro.'"/>,<input type="text" name="entrance_cent" id="entrance_cent_e" value="'.$getEntrance_cent.'"/> €&lt;/td>
                </tr>
                <tr>
                    <td>Flyer:</td>
                    <td class="flyer">
                        <input type="hidden" name="MAX_FILE_SIZE" value="5734400">
                        <input type="file" name="image" id="image">
                    </td>
                </tr>
            </table>
            <input type="hidden" name="coffee_talk_edit_submit" value="true" />​​​​​​​​​​​​​​​​​
        </form>'; 
```

ajax代码：

```
$(".edit_event").live("click", function() {
    var currentID = $(this).data("event-id");
    var currentTable = $(this).data("table");

    if (currentTable == 'Coffee_talk') {
        $.ajax({
            url: 'edit.php?action=event_select&id=' + currentID + '&table=' + currentTable,
            type: 'GET',
            dataType: 'html',
            success: function (select) {
                $("#dialog_edit_event_coffee_talk").html(select);
                $("#dialog_edit_event_coffee_talk").dialog("open");
            }   
        });
        return false;
    } 
} 
```

这是将打开的 jQuery UI 模态表单（带有验证）：

```
var topic_e = $("#topic_e"),
contributer_e = $("#contributer_e"),
place_e = $("#place_e"),
year_from_e = $("#year_from_e"),
month_from_e = $("#month_from_e"),
day_from_e = $("#day_from_e"),
begin_hour_e = $("#begin_hour_e"),
begin_min_e = $("#begin_min_e"),
entrance_euro_e = $("#entrance_euro_e"),
entrance_cent_e = $("#entrance_cent_e"),
allFields_e = $( [] ).add(topic_e).add(contributer_e).add(place_e).add(year_from_e).add(month_from_e).add(day_from_e).add(begin_hour_e)
                    .add(begin_min_e).add(entrance_euro_e).add(entrance_cent_e);

$( '#dialog_edit_event_coffee_talk' ).dialog({
    autoOpen: false,
    resizable: false,
    height: 370,
    width: 400,
    modal: true,
    buttons: {          
        "Übernehmen": function() {
            var bValid = true;
            var form = $('#coffee_talk_edit');  
            var data = form.serialize();  

            allFields_e.removeClass( "ui-state-error" );

            bValid = bValid && checkEmpty( topic_e );
            bValid = bValid && checkEmpty( contributer_e );
            bValid = bValid && checkEmpty( place_e );
            bValid = bValid && checkNone( year_from_e );
            bValid = bValid && checkNone( month_from_e );
            bValid = bValid && checkNone( day_from_e );

            bValid = bValid && checkRegexp( begin_hour_e, /^([0-9])+$/i, "Nur Zahlen erlaubt" );
            bValid = bValid && checkRegexp( begin_min_e, /^([0-9])+$/i, "Nur Zahlen erlaubt" );
            bValid = bValid && checkRegexp( entrance_euro_e, /^([0-9])+$/i, "Nur Zahlen erlaubt" );
            bValid = bValid && checkRegexp( entrance_cent_e, /^([0-9])+$/i, "Nur Zahlen erlaubt" );

            alert (bValid);
            if ( bValid ) { 
                alert('valid');
                $.ajax({
                    url: "include/scripts/event_edit.php",
                    type: "POST",
                    data: data,
                    dataType: 'json',
                    success: function (reqCode) {
                        //Termin erfolgreich bearbeitet
                        $("#dialog_edit_event_ok").dialog( "open" );
                        $("#dialog_edit_event_coffee_talk").dialog( "close" );
                    }
                });
            }
        },
        "Schließen": function() {
            $( this ).dialog( "close" );
        }
    },
    close: function() {
        allFields.val( "" ).removeClass( "ui-state-error" );
    }
}); 
```

无需在 ajax 中生成表单，一切正常。仅使用 $("#dialog_edit_event_coffee_talk").html(select); 生成表单 不被识别。

所以这一步

```
var form = $('#coffee_talk_edit');  
var data = form.serialize(); 
```

不工作。我无法对表单产生任何影响（ID 为 #coffee_talk_edit）。即使我会删除验证内容，也永远无法提交新的 ajax 请求，因为表单无法识别。

我认为它缺少 .live() 问题。但我不知道如何处理这个。知道怎么做吗？

# internet-explorer-7 - 我该怎么做“背景尺寸：封面；” 或“背景尺寸：包含；” 在IE7下？

> ID：10824232
> 
> 赞同：0
> 
> 时间：2012-05-30T21:03:17.177
> 
> 标签：internet-explorer-7, css

我有一个 200x200 像素的 div，我在其中放置了一个背景图像。div 可调整大小并保持比例。

在最近的浏览器中，“背景尺寸：封面；” 或“背景尺寸：包含；” 工作正常，但在 IE7 下，它不起作用。

有没有人有建议/技巧来解决这个问题？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:26:57.063

如果图像比 div 小，你能不使用下面的 CSS 重复它吗？

```
{
background-image:url('bg.gif');
background-repeat:repeat-y;
} 
```

如果没有，您能否提供一个指向已部署代码的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T17:14:51.723

试试[jQThumb](https://github.com/pakcheong/jqthumb)。它旨在修复 IE6、IE7 和 IE8 中的背景大小问题

# android - 安卓平板到串口通信

> ID：10824238
> 
> 赞同：1
> 
> 时间：2012-05-30T21:03:42.827
> 
> 标签：android, serial-port, usb, tablet

我无法理解如何通过串行连接与我的 android 应用程序进行通信以与自定义板进行通信。安卓软件支持USB主机模式。

我的 android 3.1+ 平板电脑作为 USB 主机 <-----packet of bytes-----> 9600 波特率的自定义板

以下是我对设置我的应用程序的理解：

1.  使用 USB 管理器我找到了我的 USB 设备（自定义板）
2.  找到我的 USB 设备后，我设置了一个 USBInterface 进行通信。
3.  使用 USBInterface 我需要找到 USBEndpoint（有人可以告诉我那是什么吗？）
4.  我现在可以使用 USBDeviceConnection 发送和接收信息。

任何有助于理解该过程的帮助都会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T00:00:07.857

将端点视为具有定义行为的虚拟管道，类似于套接字。

USB CDC 设备的端点由控制端点、批量输入、批量输出和“中断”端点组成。控制端点是双向的，用于配置连接。配置连接后，BULK IN 是平板电脑接收数据的地方（想想 RX），而 BULK OUT 是平板电脑发送数据的地方（想想 TX）。中断端点是 IN-ONLY 并且将通知平板电脑来自设备的任何状态更改。

端点位置和功能由设备在其 USB 接口描述符中指定。主机协议栈将检索该描述符并使其可供应用层使用。

您将使用控制端点来配置波特率、奇偶校验、停止位等项目。

# foreach - SMARTY > 嵌套 foreach 循环 > 总计数器

> ID：10824244
> 
> 赞同：0
> 
> 时间：2012-05-30T21:04:20.627
> 
> 标签：foreach, nested, smarty, iteration, counter

我有一个嵌套的 smarty foreach 循环。我正在尝试在 div 上获得按顺序编号的输出*（参见示例）* 在内部数组上使用键或索引或 .iteration 不能按我想要的方式工作。我可以看到正在发生的事情，但我想要某种方式来保持整体运行计数，而不是部分计数，这会在外循环的每个分支上不断重置。我尝试了很多事情都没有成功。任何人都可以帮忙吗？非常感激。

```
{foreach from=$children item='child'}

{if $child.show_in_menu}

{* loop through grandchildren *}

{foreach from=$child item='grandchild'  name='grandchildrenpages' key=k}

{if $grandchild.show_in_menu}

<div class="view-{$k}"></div>

{/if}
{/if}
{/foreach}
{/if}
{/foreach} 
```

**期望的输出**

```
<div class="view-1"></div>
<div class="view-2"></div>
<div class="view-3"></div>
<div class="view-4"></div>
<div class="view-5"></div>
<div class="view-6"></div>
<div class="view-7"></div>
<div class="view-8"></div> 
```

**电流输出**

```
<div class="view-0"></div>
<div class="view-1"></div>
<div class="view-2"></div>
<div class="view-1"></div>
<div class="view-2"></div>
<div class="view-5"></div>
<div class="view-6"></div>
<div class="view-7"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:23:53.900

使用 {counter}：

```
{foreach from=$children item='child'}
        {if $child.show_in_menu}
    {foreach from=$child item='grandchild'  name='grandchildrenpages' key=k}
                {if $grandchild.show_in_menu}
        <div class="view-{counter}"></div>
                {/if}
    {/foreach}
        {/if}
{/foreach} 
```

（顺便说一句，你的例子有一个 {/if} 比需要的多，我想这是一个错字

# android - 如何在 android 模拟器中为特定的屏幕尺寸设置屏幕分辨率..？

> ID：10824246
> 
> 赞同：0
> 
> 时间：2012-05-30T21:04:23.760
> 
> 标签：android, emulation

例如屏幕尺寸为 7 英寸。现在对于 7 英寸的屏幕，可以有不同的屏幕分辨率。那么如何在模拟器中为7寸屏幕设置480*800的分辨率呢？提前致谢..！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:05:12.307

您可以在创建模拟器时执行此操作。

![在此处输入图像描述](../Images/09d49c6aad2af01ba100af010b616f6e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:25:22.317

当您启动模拟器时，您可以输入诊断长度的屏幕尺寸。我使用 6。然后我认为是 96 作为默认值。

# delphi - TListView中的同步删除？

> ID：10824252
> 
> 赞同：-6
> 
> 时间：2012-05-30T21:04:56.020
> 
> 标签：delphi, delphi-7

我有一个包含很多项目的列表视图。我想删除一些同步的项目。那可能吗？我有大约 100 个线程同时访问 ListView 以删除其中的项目。

例如：

```
 procedure Thread1 ; stdcall;
 var
  item : TlistItem;
 begin
  //...
  item.delete;
  //...
 end;

 procedure Thread2 ; stdcall;
 var
  item : TlistItem;
 begin
  //...
  item.delete;
  //...
 end;

 /.... and so on 
```

线程同时被触发（它们之间可能相差 1ms）。然后我得到很多错误和AccessViolations。请帮忙。谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T07:43:23.953

If I were you, I'd create a data structure that the main application thread and all the update threads have access to, and that can be synchronised, and that ONLY the main app thread uses to update the VCL control, if this is the way you need to go.

# python - wxpython SearchCtrl 触发了两个事件

> ID：10824259
> 
> 赞同：0
> 
> 时间：2012-05-30T21:05:32.063
> 
> 标签：python, events, wxpython

我正在使用带有下拉菜单的 SearchCtrl，但我在处理这些事件时遇到了一些问题。当我单击![截图 searchctrl](../Images/5eb6f7732912b6d6c3477e47f866da4d.png)搜索按钮旁边的小箭头时，`EVT_SEARCHCTRL_SEARCH_BTN`会触发 ，这不是我想要的。我只希望`EVT_MENU_RANGE`在我点击一个项目后触发，而不是`EVT_SEARCHCTRL_SEARCH_BTN`在我点击它之前。

```
self.search_ctrl = wx.SearchCtrl(self.panel_1, -1,
                                 style=wx.TE_PROCESS_ENTER)
self.search_menu = wx.Menu()
self.search_items = {"text1":"value1", "text2":"value2"}
for txt in self.search_items:
    self.search_menu.Append(-1, txt)
self.search_ctrl.SetMenu(self.search_menu)
self.Bind(wx.EVT_SEARCHCTRL_SEARCH_BTN, self.search, self.search_ctrl)
self.Bind(wx.EVT_MENU_RANGE, self.onSearchMenu) 
```

虽然我可能应该将 id 添加到菜单绑定中，但这不会导致问题。当我注释掉搜索按钮绑定时，代码按预期工作。

**更新**
显然这不是问题，而是searchctrl的“功能”。我尝试了 wxpython 演示，如果我只是单击搜索按钮而不是箭头，菜单也会显示。它显然是一个按钮，而不是我认为的两个按钮。
有没有办法完成我最初的要求？我必须手动修改 textctrl，还是有其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:16:31.033

我看到的所有示例都建议您在调用菜单绑定时需要指定一系列 ID。

也许默认情况下它会绑定到意想不到的东西......？

**编辑**- 根据您的更新，您似乎需要为我制作一个自定义控件..

# c# - 有人可以解释为什么我会收到一个模棱两可的调用错误吗？

> ID：10824260
> 
> 赞同：0
> 
> 时间：2012-05-30T21:05:33.437
> 
> 标签：c#, linq, lambda

我有一个简单的对象，我正在创建一个集合。从该集合中，我需要找到具有相同 TransitMapSegmentID 的重复项。

```
public class LineString
{
    public int TransitLineID { get; set; }
    public string TransitLineName { get; set; }
    public int TransitMapSegmentID { get; set; }
    public string HexColor { get; set; }
    public double[][] Coordinates { get; set; }
}

var lineStrings = new List<LineString>(); 
```

使用下面的代码，我从下面的 lambda 表达式中得到一个“不明确的调用匹配”错误。谁能解释为什么？

```
var result = lineStrings
             .Where(a => lineStrings
             .Count(b => b.TransitMapSegmentID == a.TransitMapSegmentID) > 1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:09:11.877

如果要根据它们查找所有重复行`TransitMapSegmentID`，请使用[`Enumerable.GroupBy`](http://msdn.microsoft.com/en-us/library/bb534304.aspx)：

```
var result = lineStrings
            .GroupBy(ls => ls.TransitMapSegmentID)
            .Where(grp => grp.Count() > 1)
            .SelectMany(grp => grp); 
```

# jquery-mobile - jQuery Mobile 加载微调器不显示？

> ID：10824262
> 
> 赞同：1
> 
> 时间：2012-05-30T21:05:42.670
> 
> 标签：jquery-mobile

有没有办法通过设置延迟来测试负载微调器？我知道在某些情况下，页面只是加载速度很快以显示加载微调器。我需要仔细检查以确保它正确加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:14:55.473

```
$.mobile.showPageLoadingMsg(true) 
```

# ruby-on-rails - mongo_mapper_acts_as_versioned 保存时间类型时失败

> ID：10824265
> 
> 赞同：0
> 
> 时间：2012-05-30T21:06:06.493
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongomapper, bson, rails-3.0.10

我正在尝试使用我分叉的[https://github.com/Bramanga/mongo_mapper_acts_as_versioned](https://github.com/Bramanga/mongo_mapper_acts_as_versioned) gem 在我的 mongomapper 模型上设置版本控制。但是，每当我尝试保存我的 Finding 模型时，如果我尝试使用 Time 类型保存它就会失败（我必须使用它，因为 MongoDB 只支持 utc 时间，而不是日期）。

模型：

```
class Finding
  require 'carrierwave/orm/mongomapper'
  include MongoMapper::Document
  ensure_index 'finding.document'
  plugin MongoMapper::Acts::Versioned 

  attr_accessible :found_date, :target_date, :abated_date

  key             :found_date,          Time
  key             :target_date,         Time
  key             :abated_date,         Time

  belongs_to      :client
  many            :uploads, :dependent => :destroy
  many            :documents, :dependent => :destroy

  timestamps!

  def found_date=(date)
    if date.present?
      self[:found_date] = Chronic.parse(date).utc.beginning_of_day
    else
      self[:found_date] = nil
    end
  end

  def target_date=(date)
    if date.present?
      self[:target_date] = Chronic.parse(date).utc.beginning_of_day
    else
      self[:target_date] = nil
    end
  end

  def abated_date=(date)
    if date.present?
      self[:abated_date] = Chronic.parse(date).utc.beginning_of_day
    else
      self[:abated_date] = nil
    end
  end
end 
```

终端输出：

> 加载开发环境（Rails 3.0.10）
> 
> [1](https://github.com/Bramanga/mongo_mapper_acts_as_versioned)撬（主）> 发现 = Client.first.findings.build

=> <#Finding _id: BSON::ObjectId('4fc67c8f4e484f267c000002'), client_id: BSON::ObjectId('4f7119884e484f25bd005ee8'), custom_fields: {}, legacy_attachments: [], tags: []>

> [2] 撬（主）> find.save

=> 真

> [3] 撬（主）>finding.found_date =“2012 年 12 月 24 日”

=> “2012 年 12 月 24 日”

> [4] 撬（主）>find.save

**BSON::InvalidDocument：当前不支持 ActiveSupport::TimeWithZone；请改用 UTC 时间实例。来自/home/bramanga/.rvm/gems/ruby-1.9.2-p290@actionlog/gems/bson-1.6.2/lib/bson/bson_c.rb:24:in `serialize'**

我不知道如何解决这个问题。也许我只是做错了。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:41:40.607

分叉回购后修复了我自己的问题。我的解决方案在[这里](https://github.com/Bramanga/mongo_mapper_acts_as_versioned.git)。

该问题与`mongodb`的支持的日期类型有关。它只支持`UTC`时间戳格式。在持久化到数据库之前，我添加了自己的`escape_mongo`方法来转换为安全类型：`timestamp`

```
def escape_mongo(obj)       
    obj.is_a?(Date) || obj.is_a?(Time) ? Date.to_mongo(obj) : obj   
end 
```

# bittorrent - 如果我为同一组文件在两个不同的源上创建一个 torrent 文件并指定相同的跟踪器，它们会完全相同吗？

> ID：10824275
> 
> 赞同：2
> 
> 时间：2012-05-30T21:06:46.087
> 
> 标签：bittorrent

我想为同一组文件创建一个 torrent 文件，但最终可能会在两台或多台计算机上创建。我想知道如果我使用相同的跟踪器 url 和相同的块大小，这两个 torrent 文件是否会完全匹配。更具体地说，如果我有一组计算机，其中一些拥有来自主机 A 的 torrent 文件，而另一些拥有来自主机 B 的 torrent 文件，跟踪器会识别出它们都在使用相同的 torrent 文件，从而使它们能够一起共享或将种子文件对于它们生成的每个源都是唯一的，从而分割对等点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:13:01.790

如果它与您从中创建种子的文件相同，则它们是相同的。两台电脑上生成的种子是一样的，只要确保你使用相同的软件来生成种子。

确保对两个文件进行哈希处理以确保它们相同。

# javascript - 如何在 html 页面中嵌入 .wmv 并使用 javascript 播放/停止/更改文件？

> ID：10824281
> 
> 赞同：2
> 
> 时间：2012-05-30T21:07:24.310
> 
> 标签：javascript, html, media, wmv

我试图找到一个好的示例来教我如何嵌入 .wmv 文件以在没有控件栏的 IE 中的 windows 媒体播放器中播放，并能够使用 js plus 更改播放的文件以便能够停止并再次播放.

告诉我你是否知道一个好的样品。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-30T21:31:04.753

虽然使用 Flash 播放器，或者甚至更好的是 HTML5 视频（如果可能的话）会比使用 WMP 更好，但这里有一些代码（我从[这个页面](http://www.emanueleferonato.com/2006/08/03/embedding-a-wmv-file-in-your-web-page/)中提取）可以帮助您开始在网页中放置 WMP 对象：

```
<OBJECT ID="MediaPlayer" WIDTH="192" HEIGHT="190" CLASSID="CLSID:22D6F312-B0F6-11D0-94AB-0080C74C7E95" STANDBY="Loading Windows Media Player components..." TYPE="application/x-oleobject">
<PARAM NAME="FileName" VALUE="videofilename.wmv">
<PARAM name="ShowControls" VALUE="true">
<param name="ShowStatusBar" value="false">
<PARAM name="ShowDisplay" VALUE="false">
<PARAM name="autostart" VALUE="false">
<EMBED TYPE="application/x-mplayer2" SRC="videofilename.wmv" NAME="MediaPlayer" WIDTH="192" HEIGHT="190" ShowControls="1" ShowStatusBar="0" ShowDisplay="0" autostart="0"> </EMBED> 
```

不过，我不确定用 JavaScript 控制它的好方法。对不起。

# javascript - var that = this - 你能帮我理解吗

> ID：10824283
> 
> 赞同：1
> 
> 时间：2012-05-30T21:07:30.923
> 
> 标签：javascript

> **可能重复：**
> [什么 var that = this; 在javascript中是什么意思？](https://stackoverflow.com/questions/4886632/what-does-var-that-this-mean-in-javascript)

我经常在 Javascript 代码中找到这个作业：

```
var that = this; 
```

这是一个例子：

```
function Shape(x, y) {
    var that= this;

    this.x = x;
    this.y = y;

    this.toString= function() {
        return 'Shape at ' + that.x + ', ' + that.y;
    };
} 
```

你能解释一下为什么需要这样做吗？

请记住，我非常熟悉 PHP 或 Java，但不熟悉 Javascript 对象模型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T21:11:00.603

它使内部函数可以访问调用 Shape() 方法的实例。这种类型的变量访问称为“闭包”。有关更多详细信息，请参见此处：[https ://developer.mozilla.org/en/JavaScript/Guide/Closures](https://developer.mozilla.org/en/JavaScript/Guide/Closures)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T21:11:09.313

该值是`this`在调用函数时设置的。

设置`that`为`this`保留该函数内部定义的函数的该值（因为否则它将获得一个值，`this`这取决于*它*（内部函数）的调用方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T21:10:08.377

构造`this`函数中的 是指将从它构建的对象。但是，`this`它的内部方法可能不再引用同一个对象。

`this`所以我们通过保留变量来解决这个问题`that`。这样，我们仍然可以在不使用`this`变量的情况下引用创建的对象。

```
function Shape(x, y) {
    var that= this;

    this.toString= function() {
        //"this" in here is not the same as "this" out there
        //therefore to use the "this" out there, we preserve it in a variable
    };
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T21:11:14.237

*   Shape 是一个 JavaScript 类。它有成员 toString() 和私有属性 this.x
*   this 指的是当前的类实例。
*   为了让 toString() 意识到它在“当前类实例”下运行，您分配 that = this。因为变量 'that' 可以在 toString() 的范围内访问。这就是所谓的“我”运算符。

# apache-flex - FlashBuilder4.6/AIR 移动文本输入损坏

> ID：10824286
> 
> 赞同：0
> 
> 时间：2012-05-30T21:07:31.780
> 
> 标签：apache-flex, air, flash-builder, flexbuilder

我正在使用 FB4.6/AIR 创建一个移动应用程序。当我的视图中有 TextInput 字段时，我遇到了几个问题。如果我有一个 TextField (StageText)，其中预先填充了文本（即来自数据对象），当视图加载时，TextField 将闪烁文本，直到它最终停止并且文本消失。选择 TextField 后，文本将重新出现。显然，这不是一个理想的情况。因此，在做了一些研究之后，我通过使用 SkinClass - 'spark.skins.mobile.TextInputSkin' 绕过了使用 StageText。这解决了闪烁的文本问题，但是，现在在 TextField 中输入文本后，在某个点之后，文本似乎重复了几次，因此这个词，在这种情况下是一个电子邮件地址，变得无法识别（即 John .Doe@MyEmail.com 将变为 John.Doe@MyEmail.com@MyEmail。

显然，我需要为其中一种情况找到解决方案。建议？

提前致谢。

# facebook - Accessing data using facebook graph API in fb_graph [rails]

> ID：10824294
> 
> 赞同：0
> 
> 时间：2012-05-30T21:08:21.027
> 
> 标签：facebook, permissions, fb-graph

I encounter something annoying while playing around with the facebook graph API. I'm using [fb_graph](https://github.com/nov/fb_graph) which is a ruby wrapper for the facebook sdk. I'm not sure if this issue I encounter is a limitation of the facebook sdk or I should contact the owner of fb_graph.

So, using fb_graph, this is how I would connect to a user:

```
jane = FbGraph::User.fetch('janeid', :access_token => "janeaccesstoken") 
```

jane.friends will list all of jane's friends. However, if I try to get jane's friends birthday or email, it returns nil. In other words,

```
jane.friends[0].birthday => nil 
```

But, I can access friends[0] birthday this way:

```
bill = FbGraph::User.fetch(jane.friends[0].id, :access_token => "janeaccesstoken") 
```

In other words, if I wanted a list of all jane's friends' birthdates, I cannot do this:

```
@jane.friends.each do |friend|
  puts friend.birthday
end 
```

instead, it will have to be something like this

```
@jane.friends.each do |friend|
  friendname = FbGraph::User.fetch(friend.id, :access_token => "janeaccesstoken")
  puts friendname.birthday
end 
```

I guess it's not too bad but it does make me wonder why this is the case, because actually only some info is nil. Name, for example, is not.

```
@jane.friends.each do |friend|
  puts friend.name # => works!
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:13:26.120

The answer is here: [https://github.com/nov/fb_graph/issues/237](https://github.com/nov/fb_graph/issues/237).

# entity-framework - 对象上下文注入到 mvc web api

> ID：10824295
> 
> 赞同：0
> 
> 时间：2012-05-30T21:08:24.883
> 
> 标签：entity-framework, asp.net-web-api

我在 asp.net mvc web api 中的操作上有一个自定义 AuthorizeAttribute。我需要将我的 EF ObjectContext 注入其中。

开发服务器启动后的第一个请求始终有效。以下是失败的。ObjectContext 已被处理，对于我的生活，我无法弄清楚如何为每个请求注入该死的东西。

这是我的 FilterProvider。

```
 public class UnityFilterAttributeFilterProvider : IFilterProvider
    {
        public UnityFilterAttributeFilterProvider(IUnityContainer container)
        {
            _container = container;
        }

        private IUnityContainer _container;

        public IEnumerable<Filter> GetFilters(HttpConfiguration configuration, HttpActionDescriptor actionDescriptor)
        {
            if (configuration == null)
            {
                throw Error.ArgumentNull("configuration");
            }
            if (actionDescriptor == null)
            {
                throw Error.ArgumentNull("actionDescriptor");
            }

            IEnumerable<Filter> first =
                actionDescriptor.ControllerDescriptor.ControllerType.GetCustomAttributes(true)
                    .Select(instance => new Filter((IFilter)instance, FilterScope.Controller));

            IEnumerable<Filter> second =
                from instance in actionDescriptor.GetFilters()
                select new Filter(instance, FilterScope.Action);

            foreach (var filter in first.Concat(second))
            {
                if (filter.Instance is HeroineAuthorizeAttribute)
                    _container.BuildUp(filter.Instance as HeroineAuthorizeAttribute);
            }

            return first.Concat(second);
        }
    } 
```

_container.BuildUp 在第一次请求时被调用，但在后续请求中不会被调用。

当这不起作用时，我加倍使用 ApiControllerActionInvoker。这里是：

```
 public class InjectingActionInvoker : ApiControllerActionInvoker
    {
        private readonly IUnityContainer _container;

        public InjectingActionInvoker(IUnityContainer container)
        {
            _container = container;
        }

        public override System.Threading.Tasks.Task<System.Net.Http.HttpResponseMessage> InvokeActionAsync(HttpActionContext actionContext, System.Threading.CancellationToken cancellationToken)
        {
            foreach (var filter in actionContext.ActionDescriptor.GetFilters())
            {
                if (filter is HeroineAuthorizeAttribute)
                {
                    var f = filter as HeroineAuthorizeAttribute;
                    f.UserRepository = _container.Resolve<IUserRepository>();
                }

            }
            return base.InvokeActionAsync(actionContext, cancellationToken);
        }
    } 
```

果然，注入发生在第一个请求上，而不是随后的。但这一切都发生在调用 OnAuthorization 之后，所以没有多大意义。我想我还是会提到它。

嗯...那我该怎么做呢？

我只是想我也会展示我的 Application_start 。我相信你可以填空。

```
 var container = CoinUnityContainerFactory.GetUnityContainer();

    DependencyResolver.SetResolver(new HeroineDependencyResolver(container));
    GlobalConfiguration.Configuration.ServiceResolver.SetResolver(new HeroineServiceResolver(container)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:05:10.593

最终，我确实推出了自己的会员提供程序，只是覆盖了 SqlMembershipProvider。

但是 ObjectContext 不是我自定义属性的主要原因，因此自定义成员资格提供程序本身并不能解决问题。我仍然留下我原来的问题，在哪里注入我的对象上下文，只有目标发生了变化。

还有一个额外的问题是 MembershipProvider 以 MembershipUser 为中心，但我之前处理过并行用户，所以很容易绕过。

最后这一切都解决了。（见下面的编辑。）

```
 public override void Init()
    {
        this.AuthorizeRequest += new EventHandler(WebApiApplication_AuthorizeRequest);
        base.Init();
    }

    void WebApiApplication_AuthorizeRequest(object sender, EventArgs e)
    {
        var provider = Membership.Provider as HeroineMembershipProvider;
        if (provider != null)
            provider.UserRepository = _container.Resolve<IUserRepository>();
    } 
```

这被称为每个请求，并且每次都注入一个新的回购。我更新的属性取决于 Membership.Provider 而不是直接取决于对象上下文。

我花了一段时间才意识到我实际上在做什么。

问题是，我不使用 FormsAuthentication。身份验证是通过在标头中发送的加密票证进行的。这就是为什么我需要我的自定义身份验证属性。MVC 不使用无 cookie 身份验证，这本质上就是我正在做的事情。

所以我只使用 Membership.Provider 作为一个容器来承载一个新的对象上下文。似乎我还不如使用 HttpContext.Current.Items。这是我想的快速答案。

不过，最后，新的 MembershipProvider 允许我在使用 FormsAuthentication 的其他非 api Web 应用程序中清理我的代码（顺便说一下，FilterAttributeFilterProvider 的工作方式与 IMO 一样）。所以我不介意这个，事实上。

任何人都有更好/更简单的想法，或者对我需要提醒的安全漏洞感到不满，请告诉我。

**编辑**

从 MVC 4.0 beta 到 RC，很多事情都发生了变化。长话短说，我从[这个](http://www.asp.net/web-api/overview/extensibility/using-the-web-api-dependency-resolver)好人那里获得灵感。MembershipProvider 的创建和 UserRepo 的注入现在进入**BeginScope** () 方法。干净的？也许。

# python - 在python中解析xml

> ID：10824298
> 
> 赞同：1
> 
> 时间：2012-05-30T21:08:44.713
> 
> 标签：python, xml, minidom

我通过网络获取的 xml 代码如下所示

```
<?xml version='1.0' ?><liverequestresponse><liverequesttime>180</liverequesttime><livemessage></livemessage></liverequestresponse> 
```

我的 python minidom 代码是

```
import urllib, urllib2, time
from xml.dom.minidom import parse
response = urllib2.urlopen(req)
the_page = response.read() 
#print the_page 
dom = parse(response)
name = dom.getElementsByTagNameNS('liverequestresponse')
print name[0].nodeValue 
```

给出了一些错误

```
print the_page 
```

工作正常

或者，如果它们是比 minidom 更好的任何其他库，请告诉我.. 我更喜欢预装在 linux 上的库

**更新**

*错误*

```
Traceback (most recent call last):
  File "logout.py", line 18, in <module>
    dom = parse(response)
  File "/usr/lib64/python2.7/xml/dom/minidom.py", line 1920, in parse
    return expatbuilder.parse(file)
  File "/usr/lib64/python2.7/xml/dom/expatbuilder.py", line 928, in parse
    result = builder.parseFile(file)
  File "/usr/lib64/python2.7/xml/dom/expatbuilder.py", line 211, in parseFile
    parser.Parse("", True)
xml.parsers.expat.ExpatError: no element found: line 1, column 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:16:19.150

如果您在阅读响应内容`response.read`之前使用过。`parse(response)`第二次调用`response.read`（`parse`正在执行）将导致一个空字符串。

最简单的解决方案是放弃第一个`response.read`呼叫。但是，如果您出于某种原因确实需要响应字符串，您可以尝试：

```
import urllib, urllib2, time
import StringIO
from xml.dom.minidom import parse
response = urllib2.urlopen(req)
the_page = response.read() 
#print the_page 
dom = parse(StringIO.StringIO(the_page))
name = dom.getElementsByTagName('liverequesttime')
text = name[0].firstChild
print text.nodeValue 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:23:13.873

一种使用[lxml](http://lxml.de/)的方法，最近在 Python 中非常使用它来解析 XML，结果和性能都非常好：

```
import urllib2
from lxml import etree

with urllib2.urlopen(req) as f:
    xml = etree.parse(f)

xml.find('.//liverequesttime').text 
```

最后一行的输出将是：`180`

# c++ - 对 Vector 的多线程只读访问。复制还是锁定？

> ID：10824299
> 
> 赞同：6
> 
> 时间：2012-05-30T21:08:50.947
> 
> 标签：c++, multithreading, performance, vector

想知道我是否可以了解您对在这种情况下应该做什么的想法。

假设我有 4 到 8 个线程，并且我有一个永远不会被写入的值向量，只能由线程读取。

我可以选择为每个线程创建向量的副本，然后在线程之间不锁定线程，尝试访问共享副本。或者，我可以锁定该向量的一份副本并让所有线程访问它。

与复制向量相比，线程锁的延迟是多少？向量必须有多大才能使锁的开销比复制向量更快？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T21:10:27.103

如果没有线程写入它，您可以安全地共享它而无需任何锁定或复制。只有在涉及写访问时才会发生数据竞争。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-30T21:11:44.710

假设向量在线程开始访问它后没有改变，则不需要锁定它。如果填充向量的线程在读取器线程开始读取之前完成填充，则无需任何进一步同步即可安全。

# jquery - jQuery 插件/验证

> ID：10824304
> 
> 赞同：1
> 
> 时间：2012-05-30T21:09:00.533
> 
> 标签：jquery, validation

我正在使用来自[http://docs.jquery.com/Plugins/Validation#Validator的 jQuery 表单验证器](http://docs.jquery.com/Plugins/Validation#Validator)

如何验证其他输入按钮。

输入按钮 1：验证表单输入按钮 2：不得验证

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:28:57.833

`<button>`在大多数浏览器中， or的默认操作`<input type="button">`是提交，并且 jQuery Validation 在提交时进行验证。你可以`<button type="button">`改用。单击此类按钮不会验证表单。

`type="submit"`即使您希望提交按钮元素，也建议添加按钮元素，因为`<button>`在某些浏览器中默认类型不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:20:07.110

根据您链接到的 jQuery 文档页面上的示例，您只需将要验证的字段的类设置为“必需”。没有那个类的不应该验证。看看下面每个类的属性值有何不同。

```
<label for="cemail">E-Mail</label>
<input id="cemail" name="email" size="25" class="required email" />

<label for="curl">URL (optional)</label>
<input id="curl" name="url" size="25" class="url" value="" /> 
```

另外，我对这个 jQuery 表单插件非常满意，它可能更容易定制： [https ://github.com/posabsolute/jQuery-Validation-Engine](https://github.com/posabsolute/jQuery-Validation-Engine)

# ruby - 如何只允许 Ruby 函数中的参数为某种类型？

> ID：10824307
> 
> 赞同：6
> 
> 时间：2012-05-30T21:09:27.897
> 
> 标签：ruby, function, parameters, arguments

例如，如果我有

```
def function(arg)
  #do stuff
end 
```

我如何只允许`arg`成为一个数组？我可以做

```
def function(arg)
  if arg.class != 'Array'
    return 'Error'
  else
    #do stuff
  end
end 
```

但是有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T21:14:54.643

您不能 `def function(Array arg)`像其他语言那样做，但是您可以将第二个代码段的四行替换为一行：

```
def function(arg)
  raise TypeError unless arg.is_a? Array
  # code...
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-30T21:50:16.093

其他人指出了如何在技术上强制执行某种类型的论点，但你正在与红宝石思维方式进行一场根本性的战斗。谷歌搜索“鸭子打字”。

在 ruby​​ 世界中，我们通常不关心参数的类型，而是关心它是否满足我们想要用它做的接口。换句话说，它像鸭子一样嘎嘎叫吗？够好了！

假设您正在尝试将 Array 用于某事：

```
def function(arg)
  arg.each do |a|
    puts a
  end
end 
```

如果你这样称呼它：`function(1)`，你会得到`NoMethodError: undefined method 'each'`

让我们使用您将其强制为数组的想法。

```
def function(arg)
  raise TypeError unless arg.is_a? Array
  arg.each do |a|
    puts a
  end
end 
```

好的，现在我们犯了一个不同的错误，但是如果使用数组以外的东西调用该方法，它*仍然*会产生错误。

此外，这个呢？

```
function("Hello World".chars) 
```

哎呀，我们有一个错误，尽管该功能*可以工作！*

红宝石方式更像是：

```
def function(arg)
  if arg.respond_to? :each
    arg.each do |a|
      puts a
    end
  else
    puts arg
  end
end 
```

现在您的函数适用于各种输入：

```
function([1,2,3,4])
function("foo")
function("foo".chars) 
```

至于函数的正确性，您使用测试而不是编译器来覆盖它。但那完全是另一回事了。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T21:14:36.597

很好地考虑到 Ruby 是动态类型的，您不能以类似的方式强制执行它，例如在 C 中。您实际上可以将它与类进行比较，而不是与字符串进行比较。

`arg.is_a?(Array)`

为了改进你的例子，我会写：

```
 def function(arg)
   raise TypeError unless arg.is_a?(Array)
   # Do stuff
 end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T21:49:16.350

Ruby 不支持类型检查——至少，不能将参数类型声明为方法签名的一部分。一般来说，调用者负责传递正确的对象，或者传递的对象负责转换自己。但是，您当然可以进行自己的强制。事实上，about.com 有[一个](http://ruby.about.com/od/control/a/The-Case-Statement.htm)使用 case 语句进行这种类型检查的示例。

以下是一些额外的例子：

```
# Ask your object to convert itself to an array.
def foo my_object
  my_object.to_a
end

# Give your object a #to_a method if it doesn't already have one.
def foo my_object
  unless my_object.respond_to? :to_a
    def my_object.to_a
      # perform your type conversion
    end
  end
end

# Do your own type conversions.
def foo my_object
  case my_object
  when Array
    p my_object
  when String
    my_object.scan /\d+/
  end
end 
```

您可以混合和匹配这些技术中的任何一种，当然还有其他技术。Ruby 是一种非常灵活的语言。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T22:27:46.970

您可以确定将参数转换为数组，而不是引发错误，但您应该在提供参数的例程中工作，以便它首先为您提供数组。

```
def function(*arg)
  a = arg.flatten
  p a
end

function("ab")
function(1,2)
function([1,2])

#=>
#["ab"]
#[1, 2]
#[1, 2] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T04:54:14.917

如果您的示例中的接收器是微不足道的，并且它被定义为函数而不是方法，那么您可能希望将参数转换为接收器。

```
class Array
  def function
    # do stuff
  end
end 
```

# stream - 奇怪的网络广播格式

> ID：10824309
> 
> 赞同：1
> 
> 时间：2012-05-30T21:09:42.103
> 
> 标签：stream, format, media, radio

我需要编写一个能够接收此无线电流的应用程序：[http](http://mp32.bbc.streamuk.com:80/) ://mp32.bbc.streamuk.com:80/ 虽然听起来很简单，但我不知道他们使用什么流媒体格式。有什么想法我怎么能找到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:29:10.350

看起来流以 MIME 类型的音频\mpeg 呈现，因此它可能是 MP3 流——这是 SHOUTcast 流的相对标准，您的 URL 就是其中之一。

我不确定您所说的“接收”无线电流是什么意思。如果您正在寻找制作播放器/收音机实用程序，我会查看 tRio 之类的东西，它是开源的，可以作为您滚动自己的播放器的起点。关于滚动你自己的，我已经用 MP3 流（在 Python 中）做了类似的事情，但不适用于 SHOUTcast。[这里](https://stackoverflow.com/questions/187552/how-do-i-capture-an-mp3-stream-with-python)和[这里](https://stackoverflow.com/questions/2881230/convert-shoutcast-stream-to-playable-samples-in-python)的 SO 问题对我的工作很有帮助。

[如果“接收”您的意思是“捕获到文件”（即 rip），您可能会考虑在命令行程序（如flcy](http://www.thregr.org/~wavexx/software/fIcy/)）周围编写一个包装器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:42:30.540

问题是你不应该偷流。如果您很好地询问 BBC Worldservice，我相信能够适应他们的职权范围是让他们的流广泛可用。

如果您想知道它是一个 mp3 流。只要去世界服务网站，那里就有描述如何倾听的页面。我更喜欢VLC...

顺便说一句，它是一个 32 kbps mp3 广播流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T23:04:43.530

由于它是 BBC，根据您所在的位置，您很有可能无法接收到流。只要你在英国，他们就会提供相当多的流媒体（音频、视频），但在外面，大部分都无法访问。

我只是摆弄了一下（来自荷兰），这就是我得到的：

```
E:\tmp>wget.exe http://mp32.bbc.streamuk.com/listen.pls
--00:56:25--  http://mp32.bbc.streamuk.com/listen.pls
           => `listen.pls'
Resolving mp32.bbc.streamuk.com... 194.50.90.138
Connecting to mp32.bbc.streamuk.com|194.50.90.138|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: unspecified [audio/x-scpls]

    [ <=>                                              ] 70            --.--K/s

00:56:30 (2.89 MB/s) - `listen.pls' saved [70]

E:\tmp>type listen.pls
[playlist]
NumberOfEntries=1
File1=http://mp32.bbc.streamuk.com:8020/

E:\tmp>c:wget.exe http://mp32.bbc.streamuk.com:8020/
--00:57:04--  http://mp32.bbc.streamuk.com:8020/
           => `index.html'
Resolving mp32.bbc.streamuk.com... 194.50.90.138
Connecting to mp32.bbc.streamuk.com|194.50.90.138|:8020... failed: Connection refused. 
```

`connection refused`说话量很大。[http://mp32.bbc.streamuk.com/](http://mp32.bbc.streamuk.com/)上的状态页面显示尚未达到最大连接数，因此很可能与数字出口限制有关。

# php - 以编程方式 CSS 背景的最佳方式？

> ID：10824310
> 
> 赞同：3
> 
> 时间：2012-05-30T21:09:42.043
> 
> 标签：php, jquery, css

我想从我的数据库中获取图像，并将其用作背景。这是微不足道的，但有没有比我目前的方法更好/更快的方法。

目前，我使用 Javascript（在 中`<head>`）加载我的背景图片，因为我的 CSS 是链接的而不是内部的：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type='text/javascript'>
    $(document).ready(function(){
        $('body').css('background', 'url(/_images/galleries/lg_<?php echo getBackgroundImage(); ?>) no-repeat top center white');
    });
</script> 
```

加载页面后，加载背景大约需要半秒钟。我认为延迟可归因于加载外部 JS 等。此外，上述代码作为一个组件包含在内，因此我不必在网站的每个页面中复制/粘贴该代码。`<body>`不包含在此包含的组件中。

有*更快*更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T21:18:14.567

由于您正在向文档中添加脚本，因此您可能只需添加一个`<style>`带有您需要的 CSS 的块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T22:03:12.210

我看到这已经回答了但是......

> 我认为延迟可以归因于加载外部 JS

是的。默认情况下，Javascript 会阻止。虽然有一些[方法可以解决这个问题](http://www.stevesouders.com/blog/2009/04/27/loading-scripts-without-blocking/)，但它们依赖于延迟 javascript 的加载。而且您仍然必须等待 javascript 加载，然后才能加载图形以放入后台。使用 j08691 的方法可以避免这个问题，但是如果您希望脚本运行得更快，则可以在 CSS 文件中[内联图像数据](http://www.websiteoptimization.com/speed/tweak/inline-images/)（您可以在 HTML 中执行此操作，但是图像的缓存受到 html 缓存的限制 - 通常CSS 文件将更易于缓存）。当然，如果您想支持较旧的浏览器，那么您将需要 Varies: User-agent 标头和用于不兼容浏览器的不同代码。

# java - Apache POI：在 Map 中存储键和总和

> ID：10824312
> 
> 赞同：0
> 
> 时间：2012-05-30T21:09:43.963
> 
> 标签：java, if-statement, hashmap, apache-poi, poi-hssf

我有一个看起来像这样的 excel 电子表格：

```
+-----------------+--------+----------------------+
| Title           | Value  |  Average Price List  |
+-----------------+--------+----------------------+
|                 |        |                      |   
| Item 1          |   10   |        9.99          |
| Item 2          |   20   |        9.99          |
| Item 3          |   30   |        8.99          |
| Total Royalty A |        |                      |
|                 |        |                      |
+-----------------+--------+----------------------+
| Item 1          |   10   |        9.90          |
| Item 2          |   20   |        5.69          |
| Item 3          |   30   |        9.99          |
| Total Royalty B |        |                      |
|                 |        |                      |
+-----------------+--------+----------------------+ 
```

我想得到平均列的总值。但是，我需要使用“**总版税 A** ”和“**总版税 B** ”将总数分开；最终的意思是结果应该是这样的：

```
Total Royalty A = 10.99
Total Royalty B = 11.88 
```

我使用了一个 HashMap，其中的键是来自“ **Total Royalty B ”的“Total Royalty** **A** ”。我在*if 语句*中的代码有问题：

 ***```
if(totalCell.getCellType() == Cell.CELL_TYPE_STRING) 
```

我认为的问题是标题下有一个空/空白单元格。我尝试使用不同的技术来跳过空单元格，但问题一直在该行发生。如果有人可以就如何解决这个问题给我任何建议，我将不胜感激。

这是应该处理执行上述说明的方法：

```
 public HashMap monthlyAverageUnitsTotal (HSSFSheet sheet, int colAvgNum, int colTitle )
    {

        HashMap hm = new HashMap();

        double sum = 0.0;
        String key = null;

        for(Row row : sheet)
        {

            Cell saleAverageCell = row.getCell(colAvgNum);
            Cell totalCell = row.getCell(colTitle);

            if(totalCell.getCellType() == Cell.CELL_TYPE_STRING)
            {
               String totalCellValue = totalCell.getStringCellValue().toString().trim();

               if(totalCellValue.startsWith("Total Royalty"))
               {
                   key = totalCell.getStringCellValue().toString().trim();

               }
            }

            if(saleAverageCell.getCellType() == Cell.CELL_TYPE_NUMERIC)
            {
                double saleAverageCellValue = saleAverageCell.getNumericCellValue();
                sum += saleAverageCellValue;

                // put the element in the map
                hm.put(key, sum);

                // return the value of sum to 0
                sum = 0.0;

            }

        }

        return hm;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:45:10.493

我有一个功能要求，涉及解析包含大量数据的 Excel 电子表格。为了利用单元格值问题，我创建了一个以字符串格式返回单元格值的函数，因此我不会遇到字符串、数字、日期、布尔或空白单元格的问题（它不处理公式值）：

```
//Cell celdaActual is the actual cell in a row in a sheet in the book, the class
//has Spanish names and comments and is big for a post, so I'm just posting
//this function
public String getCellValue() {
    String strValor = "";
    int intValor;
    double dblValor;
    SimpleDateFormat objSimpleDateFormat;
    if (celdaActual != null) {
        strValor = celdaActual.toString();
        switch (celdaActual.getCellType()) {
            case Cell.CELL_TYPE_STRING:
                strValor = strValor.trim();
                break;
            case Cell.CELL_TYPE_NUMERIC:
                if (DateUtil.isCellDateFormatted(celdaActual)) {
                    objSimpleDateFormat = new SimpleDateFormat("dd/MM/yyyy");
                    strValor = objSimpleDateFormat
                        .format(celdaActual.getDateCellValue());
                } else {
                    dblValor = celdaActual.getNumericCellValue();
                    if (Math.floor(dblValor) == dblValor) {
                        intValor = (int)dblValor;
                        strValor = String.valueOf(intValor);
                    } else {
                        strValor = String.valueOf(dblValor);
                    }
                }
                break;
            case Cell.CELL_TYPE_BLANK:
                strValor = "";
                break;
            case Cell.CELL_TYPE_ERROR:
                strValor = "";
                break;
            case Cell.CELL_TYPE_BOOLEAN:
                strValor = String.valueOf(celdaActual.getBooleanCellValue());
                break;
        }
    }
    return strValor;
} 
```

希望对你有效。***

# c# - 在 Visual Studio 中加载转储文件

> ID：10824313
> 
> 赞同：1
> 
> 时间：2012-05-30T21:09:48.293
> 
> 标签：c#, visual-studio-2005, dmp

我没有成功尝试从 Visual Studio 加载 .DMP 文件，这让我现在很头疼……任何帮助都将不胜感激。

Windows 窗体 C# 应用程序在 Windows 7 机器上运行的 VS 2005 框架 2.0 中

我从调试文件夹运行 .exe（即 exe 是通过在“调试”模式和“混合平台”而不是“发布”模式下构建解决方案生成的）。

打开任务管理器，选择进程，右键单击并选择“创建转储文件”创建 myapp.dmp 文件。

dmp 文件是在应用程序正常运行时创建的，没有异常。我只是想看看在创建用户转储时所有线程在哪里。

然后，我将 myapp.dmp 文件复制到运行应用程序的同一文件夹中。该文件夹包含所有 dll 和 pdb 文件以及 .exe。

我双击 myapp.dmp，该文件显示在解决方案资源管理器中，但是当我在解决方案资源管理器中双击它时，没有任何反应。我使用 F5 运行，但收到​​错误消息，提示“找不到或不匹配 myapp.exe 的调试信息”。符号文件中没有本机符号。

我还尝试从 Visual Studio.Net“文件菜单”+“打开”打开 .dmp 文件并选择 .dmp 文件。在 Visual Studio 中打开一个大的二进制文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:26:09.213

您需要在 Visual Studio 中设置符号路径：http: [//msdn.microsoft.com/en-us/library/b8ttk8zy%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/b8ttk8zy%28v=vs.80%29.aspx)，它应该能够为您的应用找到符号只要 pdb 位于与运行应用程序的文件夹相同的文件夹中并且未剥离私有符号，或者您根据链接添加这些 pdb 的路径。根据链接，您还需要 MS 符号的路径。

# python - Python：如何将包含十六进制字节的字符串转换为十六进制字符串

> ID：10824319
> 
> 赞同：17
> 
> 时间：2012-05-30T21:10:00.300
> 
> 标签：python, string, hex

我在想 binascii 是我正在寻找的模块，但我似乎无法得到我正在寻找的确切结果。

这就是我想做的。我想转换：

```
>>> s = '356a192b7913b04c54574d18c28d46e6395428ab'
>>> print len(s)
40 
```

到

```
>>> hs = '\x35\x6a\x19\x2b\x79\x13\xb0\x4c\x54\x57\x4d\x18\xc2\x8d\x46\xe6\x39\x54\x28\xab'
>>> print len(hs)
20 
```

任何 Pythonistas 都知道一种很酷的（或者，坦率地说，实用的）方法来做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-30T21:11:36.023

在**所有版本的 Python**中，您都可以使用该函数 [`binascii.a2b_hex()`](https://docs.python.org/2/library/binascii.html#binascii.a2b_hex)（也称为[`binascii.unhexlify()`](https://docs.python.org/2/library/binascii.html#binascii.unhexlify)）：

```
>>> import binascii
>>> s = '356a192b7913b04c54574d18c28d46e6395428ab'
>>> binascii.a2b_hex(s)
'5j\x19+y\x13\xb0LTWM\x18\xc2\x8dF\xe69T(\xab' 
```

在**Python 3.x**中，您可以使用[`bytes.fromhex(s)`](https://docs.python.org/3/library/stdtypes.html#bytes.fromhex).

在**Python 2.x**中，您可以使用`hex`str-to-str 编解码器：

```
>>> s.decode("hex")
'5j\x19+y\x13\xb0LTWM\x18\xc2\x8dF\xe69T(\xab' 
```

编解码器内部调用`binascii.a2b_hex()`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T21:18:10.503

带`binascii`模块：

```
>>> from binascii import unhexlify
>>> s = '356a192b7913b04c54574d18c28d46e6395428ab'
>>> unhexlify(s)
'5j\x19+y\x13\xb0LTWM\x18\xc2\x8dF\xe69T(\xab' 
```

# svn - 颠覆合并困境

> ID：10824322
> 
> 赞同：2
> 
> 时间：2012-05-30T21:10:17.607
> 
> 标签：svn, merge

我有一个 svn 存储库，我搞砸了一个合并 - 不幸的是，我没有立即意识到这一点，并且从那时起对存储库进行了额外的更改。这是情况的抽象快照

```
r100 - 创建的分支
r101 - 对主干的更改
r102 - 对主干的更改
r103 - 切换到分支
r104 - 更改为分支
r105 - 重新集成分支（忘记在此处将主干更改合并到分支中）
r106 - 更改为中继
r107 - 将主干恢复为 r102
r108 - 将主干更改合并到分支
r109 - 重新整合分支

```

如何将~~r108~~ r106 的更改重新应用到主干？

编辑：为了澄清，我已经将分支重新集成到主干，但是我需要重新应用在第一次中断合并后对主干所做的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T00:08:56.467

为什么这行不通？

```
$ svn merge -c106  ^/trunk 
```

这应该将修订 #106 添加回主干。`--ignore-ancestry`如果您没有使用语法进行还原，您可能需要执行一个操作`svn merge`，而只是在还原时简单地覆盖文件。

# windows - BAT 复制命令失败 - 在 && 之后继续？

> ID：10824323
> 
> 赞同：0
> 
> 时间：2012-05-30T21:10:21.913
> 
> 标签：windows, for-loop, batch-file, copy

所以我试图在网上搜索解决方案，但找不到任何解决方案。基本上，我有这样的命令：

```
for /D %%X in (s*) do copy f1.txt %%X\f1.txt && copy f2.txt %%X\f2.txt 
```

但是，如果 f1.txt 不存在，我会得到 a`The system cannot find the file specified`并且 f2.txt 不会为给定目录复制。

即使 f1.txt 不存在，我如何才能解决这个问题以复制 f2.txt？请注意，我不能简单地分成两条不同的行，因为我将这些复制语句放在一个`for`包含许多命令的巨大循环中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:37:18.360

感谢您的回复江铃。它使我找到了这个[网页](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ntcmds_shelloverview.mspx?mfr=true)。

在那里，我发现我应该将 && 更改为 & 实际上：

> command1 & command2：用于在一个命令行上分隔多个命令。Cmd.exe 运行第一个命令，然后运行第二个命令。

所以应该是：

```
for /D %%X in (s*) do copy f1.txt %%X\f1.txt & copy f2.txt %%X\f2.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:16:06.917

更改`&&`为`||`

# jquery - 在 jQuery 中使用 getScript 加载错误的内容

> ID：10824332
> 
> 赞同：0
> 
> 时间：2012-05-30T21:11:34.317
> 
> 标签：jquery

我在使用最新的 jQuery 时遇到了 $.getScript() 的问题，在我的代码中我有这个：

```
$(document).ready(function{
    $.getScript("file.js");
}); 
```

file.js 是这样的：

```
var x, y;

function xyz(){
};

function abc(){
}; 
```

在firebug中调试时，file.js的内容是这样的：

```
function xyz(){
};

function abc(){
};

var x, y;

function xyz(){
}; 
```

我怎样才能解决这个问题？我使用 getScript 错了吗？

# mysql - Mysql“SELECT *”挂起

> ID：10824335
> 
> 赞同：3
> 
> 时间：2012-05-30T21:11:49.097
> 
> 标签：mysql

我的 MySQL 数据库有两个数据库，我们称它们`apple`为`banana`. `apple`有一张桌子，我们称之为`mydata`。

```
> use apple;
Database changed

> SELECT * FROM mydata;
...
3379 rows in set (0.00 sec)

> SELECT mydata.* FROM mydata;
...
3379 rows in set (0.00 sec) 
```

`SELECT *`当我在同一个数据库中使用时，一切正常。一旦我切换数据库，我就会得到奇怪的行为。

```
> use banana;
Database changed

> SELECT mydata.* FROM apple.mydata;
...
3379 rows in set (0.00 sec)

> SELECT * FROM apple.mydata;
[hangs!] 
```

为什么会挂起？MySQL认为`*`导致它挂起的方法是什么，而`mydata.*`更具体并且不会导致挂起。

笔记：

*   根据“SHOW FULL PROCESSLIST”，运行挂起查询的连接不是在运行命令，而是处于“睡眠”状态。
*   这个问题是间歇性的：我的查询做了一年半，然后几个小时前都开始冻结。五分钟前，他们停止了冻结，目前没有问题。

任何想法为什么不合格`SELECT *`不运行，而合格的`SELECT mydata.*`立即运行？

谢谢，

乔纳森

# gnuplot - Gnuplot 不对称 xy 误差线

> ID：10824336
> 
> 赞同：3
> 
> 时间：2012-05-30T21:11:49.963
> 
> 标签：gnuplot

我需要一些关于 Gnuplot 4.4 的帮助——我一直在尝试在 x 和 y 维度上绘制带有误差线的 2D 数据散点图。

x 和 y 维度都有高/低误差线，即误差线不是对称的，因此每个数据点使用六个值（x、y、xlow、xhigh、ylow、yhigh）。Gnuplot 的手册页说这是可能的，我[在网上找到了示例](http://t16web.lanl.gov/Kawano/gnuplot/datafile-e.html)- 这两种情况都建议使用每个数据点包含六个记录的数据文件（（x，y，xlow，xhigh，ylow，yhigh）格式），但我可以不要为了我的生活让 Gnuplot 表现得很好。

在绘制单个测试点（1.0 3.0 0.25 0.5 0.25 0.5）时，我能做的最好的事情是绘制一个带有漂浮在附近空间中的无实体误差条的测试点图。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T23:39:53.810

您的误差线“无实体”的原因是您的 x (1.0) 不在 xlow (.25) 和 xhigh (.5) 之间。你的 y (3.0) 也不在你的 ylow (.25) 和 yhigh (0.5) 之间。

如果您希望低点和高点代表与中心变量的*差异*，您应该使用如下命令：

```
plot "test.dat" u 1:2:($1-$3):($1+$4):($2-$5):($2+$6) with xyerrorbars t "test point" 
```

在您的测试文件上运行它，我得到以下图：

![提问者示例点图](../Images/189c221de88ed0ec256c5cbb4b26b473.png)

# jquery - 页面滚动器上的 jQuery 活动类

> ID：10824338
> 
> 赞同：0
> 
> 时间：2012-05-30T21:12:04.843
> 
> 标签：jquery

这是代码：http: [//jsfiddle.net/5UzfT/](http://jsfiddle.net/5UzfT/)

滚动内容时如何添加活动类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:24:50.727

我假设它是应该处于活动状态的菜单项，如果是这样，请添加`this`到您的链接中：

```
<a href="#" onClick="Animate2id('#c1', this);return false">Content 1</a> 
```

并做：

```
<script type="text/javascript">
  function Animate2id(id2Animate, elm){
    $(elm).addClass('active').siblings().removeClass('active');
    var animSpeed=1500; //animation speed
    var easeType="easeInOutExpo"; //easing type
    $("html, body").stop().animate({scrollTop: $(id2Animate).offset().top}, animSpeed, easeType);
  }
</script> 
```

[小提琴](http://jsfiddle.net/adeneo/5UzfT/2/)

这仅在单击菜单时有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:20:16.203

看看这个

[http://imakewebthings.com/jquery-waypoints/](http://imakewebthings.com/jquery-waypoints/)

当您向下滚动时，检查上面的菜单会更改活动焦点。

# jquery - 如何使用 jQuery 循环函数

> ID：10824341
> 
> 赞同：1
> 
> 时间：2012-05-30T21:12:20.183
> 
> 标签：jquery

```
function character_1() {
    $("#character_1").animate({"top": "0"}, 3000, function() {
        $(this).fadeOut(2000);
        character_2();
    });
};

function character_2() {
    $("#character_2").animate({"top": "0"},3000, function() {
        $(this).fadeOut(2000);
        character_3();
    });
};

function character_3() {
    $("#character_3").animate({"top": "0"},3000, function() {
        $(this).fadeOut(2000);
        character_1();
    });
};

$(document).ready(function() {
    character_1();
}); 
```

上面的代码。它不会返回 character_1(); 我想让它们作为循环运行。有人帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T21:14:36.193

它确实返回了，但它没有任何关系，它已经动画化并淡出。

在该功能中添加警报并自己查看。

```
function character_1() {
    alert("I'm back!!!"); // <<=====================
    $("#character_1").animate({"top": "0"}, 3000, function() {
        $(this).fadeOut(2000);
        character_2();
    });
}; 
```

[**现场演示**](http://jsfiddle.net/4vXGz/)

如果要切换元素，请使用`toggle`：

```
$(this).toggle(2000); // instead of "fadeOut(2000)"; 
```

只要确保`this`在通话之间保留。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T21:29:51.677

正如我在评论中提到的：您的循环很好，但是所有元素在执行后都会淡出`character_3()`，因此您看不到返回到`character_1()`. 您需要先将动画重置为原始状态，然后才能调用`character_1()`. 查看下面的示例，了解如何将其设置回原始状态。

此外，由于fadeOut 动画，排序很少，所以我在fadeOut 回调中调用下一个动画，以便正确排序。

**编辑：**我做了一些优化并使用计时器而不是无限循环。检查下面，

**无需更改代码即可处理任意数量的盒子**

```
$(function() {
    var $chars = $('.chars');
    var curIndex = 0, charTop = 0;

    function animateChars() {
        setTimeout(function() {
            if (curIndex >= $chars.length) {
                curIndex = 0;
                if (charTop == 200) {
                    charTop = 0;
                } else {
                    charTop = 200;                    
                }
                $.when($chars.fadeIn(2000)).then(animateChars());
            } else {
                console.log(curIndex);
                $chars.eq(curIndex).animate({
                    "top": charTop
                }, 3000, function() {
                    $(this).fadeOut(2000, function() {
                        curIndex++;
                        animateChars();
                    });
                });
            }

        }, 100);
    }
    animateChars();
}); 
```

[**演示**](http://jsfiddle.net/69jUR/5/)

# javascript - 在鼠标轨迹中显示图像

> ID：10824343
> 
> 赞同：1
> 
> 时间：2012-05-30T21:12:26.563
> 
> 标签：javascript, image, html, mouse, trail

我有两张图片，一张是黑白的，另一张是彩色的。我想要做的是让用户将鼠标拖到顶部的黑白图像上，以便它显示下面的彩色版本。

我不想使用 Flash。有什么想法可以在 HTML 5 或 Javascript 中完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:24:51.433

我还没有尝试过，但它应该可以工作：

1.  在隐藏的 IMG 标签中加载黑白图像
2.  IMG 的 onLoad，使用 drawImage() 将其内容绘制到 CANVAS 对象中。（画布绝对位于带有彩色图像的 IMG 顶部）
3.  编写 javascript 在鼠标拖动时从画布上擦除像素（即将它们的 alphas 设置为零）

注意： IE8 或更早版本不原生支持画布对象：[http ://en.wikipedia.org/wiki/Canvas_element#Support](http://en.wikipedia.org/wiki/Canvas_element#Support)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:17:42.240

您可能想查看 JQuery UI 的[Droppable](http://jqueryui.com/demos/droppable/#default)插件。基本上，您可以让 2 张图像可以相互拖动和放置，一旦发生这种情况，第三张图像就会变得可见。

这是一个[JSFiddle](http://jsfiddle.net/UFdvY/)示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T21:34:54.803

我想我可能完全误读了你的问题，所以我用我认为你的意思创建了一个新的答案。如果你想要的只是在鼠标悬停时隐藏黑白图像，你可以用 jquery 做这样的事情。

```
$('.BandWImage').hover(function(){
    $(this).fadeOut(100);
    $('.ColorImage').fadeIn(500);
}); 
```

colorImage 的样式可以是：“display:none;” 开始，并使用 CSS 放置在黑白图像的后面。将鼠标悬停在黑白图像上后，它将淡出，而彩色图像将淡入。

# python - sqlite3 是否压缩数据？

> ID：10824347
> 
> 赞同：34
> 
> 时间：2012-05-30T21:12:48.820
> 
> 标签：python, sqlite

我有一个 7.4Gb 的 csv 文件。[使用python 脚本](https://gist.github.com/2838964)将其转换为 sqlite 数据库后，输出数据库为 4.7Gb，约为原始大小的 60%。

csv 有大约 150,000,000 行。它有标题：

```
tkey,ipaddr,healthtime,numconnections,policystatus,activityflag 
```

每行看起来像

```
261846,172.10.28.15,2012-02-03 16:15:00,22,1,1 
```

该脚本使用 healthtime 将数据拆分为表 192 表

当我第一次看到这些数字时，我以为我在某个地方犯了错误。从仅写入健康时间 192 次而不是 150,000,000 次的附加效率中，我应该期望文件大小减少多大？

**编辑：**我一发布这个我就意识到了答案。我删除了大约 40% 的字符串，因此大小减少了 40%。

**编辑2**让我们计算纯文本之间的大小差异：

```
"261846,172.10.28.15,2012-02-03 16:15:00,22,1,1" 
```

和数据库条目：

```
db(261846,'172.10.28.15',22,1,1) 
```

首先，我们在纯文本表示中从 46 个字符减少到 26 个字符。

剩下的字符是：

```
"261846,172.10.28.15,22,1,1" 
```

或 26 个字节。如果每个整数都需要以 32 位（4 字节）存储，那么我们有：

12 字节 (ipaddr) + 4 字节 * 4（整数字段）= 28 字节。

所以看起来转换为整数会降低存储效率，而我的所有收益都来自于减少每行中存储的字符数。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-30T21:18:07.450

SQLite 没有运行压缩算法，但它将数据存储在二进制文件而不是文本文件中。这意味着可以更有效地存储数据，例如使用 32 位（4 字节）数字来表示`10,000,000`，而不是将其存储为 8 字节的文本（如果文件是 unicode 则更多）。

如果您有兴趣，这里有更多关于[SQL 数据库文件格式的详细信息。](http://www.sqlite.org/fileformat.html)

那有意义吗？

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-12-04T01:40:56.093

默认情况下，SQLite 不会压缩它写入磁盘的数据；但是，SQLite 确实有一组“专有扩展”用于该目的和其他目的。`ZIPVFS`在以下链接中查找。

[http://www.sqlite.org/support.html](http://www.sqlite.org/support.html)和 [http://www.hwaci.com/sw/sqlite/prosupport.html](http://www.hwaci.com/sw/sqlite/prosupport.html)

通过将字段编码为整数，您可以在数据中实现大量“压缩”。例如，IP 地址被设计成适合一个字（4 个字节）。地址的每个八位字节可以用一个字的一个字节来表示。

```
string[] octets = '172.168.0.1'.split('.')
int ip = atoi(octets[0]) << 24
ip |= atoi(octets[1]) << 16
ip |= atoi(octets[2]) << 8
ip |= atoi(octets[3]) 
```

此外，您的时间戳可能以 Unix 时间表示，即自纪元以来的秒数。

```
UPDATE mytable SET healthtime = CAST(strftime('%s',healthtime) AS INTEGER); 
```

[查看日期和时间函数](http://sqlite.org/lang_datefunc.html)

注意`CAST`上面 SQL 中的指令： SQLite 不对列强制类型，因此您可能将一组数字存储为字符串；增加你的字段大小超过必要的（这也会使某些查询表现得很奇怪）。

还有一件事：字段大小不是故事的唯一部分。请记住，索引也占用空间，整数索引更有效——就磁盘大小和性能而言。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-28T11:26:33.137

我的 GIT 存储库中有一个相当大的 SQLite 文件，我想知道为什么我的存储库总大小没有增长那么多，反而比我的 SQLite- 文件还要小`.db`。事实证明，GIT 默认压缩存储库。对我的`.db`-file 的快速检查也表明了这一点，因为压缩`.db`-file 会生成一个 zip-archive，它只有`.db`-file 大小的 20%。

因此，至少在默认设置下，SQLite 看起来并没有以压缩方式存储数据。然而，不管怎样，将一个大的 SQLite 文件添加到 GIT 存储库可能会很好，因为 GIT 会自动执行压缩。

# python - 在文本小部件 Tkinter 中更改选择文本

> ID：10824351
> 
> 赞同：1
> 
> 时间：2012-05-30T21:13:01.163
> 
> 标签：python, tkinter, python-2.7

我将如何`Text`在 Tkinter 中为小部件实现类似的功能？

我想要做的是有一个`Text`小部件显示文本，但是当用户单击它并且小部件处于焦点时，文本消失了？

例如，点击前的文本框：

```
[...] 
```

单击并聚焦后的文本小部件：

```
[] 
```

如果没有输入任何内容并且小部件失焦：

```
[...] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T23:18:09.690

只需为按钮单击 ( `<1>`) 添加绑定，然后在该事件的处理程序中删除文本。然后，为小部件失去焦点时添加一个绑定 ( `<Leave>`) 以在小部件为空时插入“...”。

# php - PHP 幻灯片无法在 Internet Explorer 上运行

> ID：10824358
> 
> 赞同：1
> 
> 时间：2012-05-30T21:13:36.843
> 
> 标签：php, javascript, html, drupal, slideshow

我通过直接访问 PHP“page.tpl.php”在我的 Drupal 站点的登录页面上编辑了幻灯片，现在该站点无法在 IE8 上运行。它在 Mozilla 和 Chrome 上正常运行（通过允许鼠标悬停和幻灯片链接），但在 Internet Explorer 上出现故障。我只编辑了一小部分代码以允许使用基本的 HTML 标记，而不仅仅是幻灯片图像。我改变了这个：

```
<div class="slideshow">
                <?php
                if($lang_name == "en"){
                ?>
                    <img src="<?php print $base_path . $directory; ?>/images/slideshows/ENGreplacementworkingoncomputer.png" width="950" height="355" alt="Legal Logik"/>
                    <img src="<?php print $base_path . $directory; ?>/images/slideshows/ENGreplacementhandshake.png" width="950" height="355" alt="Legal Logik"/>
                    <img src="<?php print $base_path . $directory; ?>/images/slideshows/ENGreplacementgirlstanding.png" width="950" height="355" alt="Legal Logik"/>
                <?php
                }else{
                ?>
                    <img src="<?php print $base_path . $directory; ?>/images/slideshows/FRreplacementworkingoncomputer.png" width="950" height="355" alt="Legal Logik"/>
                    <img src="<?php print $base_path . $directory; ?>/images/slideshows/FRreplacementhandshake.png" width="950" height="355" alt="Legal Logik"/>
                    <img src="<?php print $base_path . $directory; ?>/images/slideshows/FRreplacementgirlstanding.png" width="950" height="355" alt="Legal Logik"/>
                <?php
                }
                ?> 
```

对此：

```
<div class="slideshow">
                <?php
                if($lang_name == "en"){
                ?>
                    <a href="https://www.legallogik.com/incorporation">
                    <img onmouseout="this.src='<?php print $base_path . $directory; ?>/images/slideshows/IncorporationENG1.png'" onmouseover="this.src='<?php print $base_path . $directory; ?>/images/slideshows/IncorporationENG2.png'" src="<?php print $base_path . $directory; ?>/images/slideshows/IncorporationENG1.png" width="950" height="355" alt="Legal Logik"/>
                    <a href="https://www.legallogik.com/business-transactions">
                    <img onmouseout="this.src='<?php print $base_path . $directory; ?>/images/slideshows/TransactionsENG1.png'" onmouseover="this.src='<?php print $base_path . $directory; ?>/images/slideshows/TransactionsENG2.png'" src="<?php print $base_path . $directory; ?>/images/slideshows/TransactionsENG1.png" width="950" height="355" alt="Legal Logik"/>
                    <a href="https://www.legallogik.com/services">
                    <img onmouseout="this.src='<?php print $base_path . $directory; ?>/images/slideshows/ServicesENG1.png'" onmouseover="this.src='<?php print $base_path . $directory; ?>/images/slideshows/ServicesENG2.png'" src="<?php print $base_path . $directory; ?>/images/slideshows/ServicesENG1.png" width="950" height="355" alt="Legal Logik"/>
                <?php
                }else{
                ?>
                    <a href="https://www.legallogik.com/fr/forfaits-dincorporation">
                    <img onmouseout="this.src='<?php print $base_path . $directory; ?>/images/slideshows/IncorporationFR1.png'" onmouseover="this.src='<?php print $base_path . $directory; ?>/images/slideshows/IncorporationFR2.png'" src="<?php print $base_path . $directory; ?>/images/slideshows/IncorporationFR1.png" width="950" height="355" alt="Legal Logik"/>
                    <a href="https://legallogik.com/fr/Transactions-Commerciales">
                    <img onmouseout="this.src='<?php print $base_path . $directory; ?>/images/slideshows/TransactionsFR1.png'" onmouseover="this.src='<?php print $base_path . $directory; ?>/images/slideshows/TransactionsFR2.png'" src="<?php print $base_path . $directory; ?>/images/slideshows/TransactionsFR1.png" width="950" height="355" alt="Legal Logik"/>
                    <a href="https://legallogik.com/fr/nos-services">
                    <img onmouseout="this.src='<?php print $base_path . $directory; ?>/images/slideshows/ServicesFR1.png'" onmouseover="this.src='<?php print $base_path . $directory; ?>/images/slideshows/ServicesFR2.png'" src="<?php print $base_path . $directory; ?>/images/slideshows/ServicesFR1.png" width="950" height="355" alt="Legal Logik"/>
                <?php
                }
                ?> 
```

其他一切都保持不变。如果有人有任何解决方案或可以指出我正确的方向，将不胜感激。

PS ($lang_name =="en") 是因为该站点安装了翻译模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:11:41.293

我认为这与您的 PHP 脚本的 HTML 输出有关，而不是实际的 PHP 本身。添加分号可能会解决问题。

```
<img onmouseout="this.src='<?php print $base_path . $directory;?>/images/slideshows/TransactionsFR1.png';" 
```

# android - 创建可移植的android开发环境

> ID：10824359
> 
> 赞同：10
> 
> 时间：2012-05-30T21:13:38.283
> 
> 标签：android, eclipse, portability, avd

我想要一个便携的安卓开发环境，我可以随身携带（例如U盘）。这个想法是有一个文件夹，其中包括：

*   蚀
*   安卓-sdk
*   jdk
*   .android（包含 avd 和密钥的文件夹）
*   工作区

我安装了 Eclipse 3.7.0，添加了 ADT 插件和

*   在 eclipse.ini 文件中添加了选项“-vm ../jdk/bin/”
*   将 eclipse android-sdk 变量设置为相对路径 (../android-sdk)
*   将 Eclipse 工作区设置为相对路径
*   将 eclipse 密钥文件夹设置为相对路径

问题是如何使 avd 具有便携性？.android 文件夹如何可移植？我看到一些解决方案提到了创建环境变量，但我正在考虑一个开箱即用的解决方案，或者尽可能多的自动化过程。操作系统应该是 windows 7，但理想情况下应该适用于任何版本。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-20T14:36:09.987

我想我找到了一种在 Mac 和 Windows 上执行此操作的方法。我已经在多台计算机上测试了这两种解决方案，但并不详尽。

我的方法与您基本相同，但问题是 Eclipse 中 Android SDK 的相对路径由于某种原因破坏了 AVD 管理器。它不允许我运行现有的或创建新的 AVD。我通过包含一个“initial_setup”脚本来解决这个问题，该脚本将运行一次，以根据用户解压缩此包的位置设置 Android SDK。它还为它们创建初始 AVD。因此，他们下载并解压缩包，运行 initial_setup 脚本，并且可以使用默认的 Android 开发环境。

**关键是更新 Eclipse ADT 插件首选项以使用 Android SDK 的绝对路径。**这是通过下面脚本中的这一行来完成的。请注意，首选项文件的路径是相对于工作空间的（并且工作空间路径设置为相对于 Eclipse 安装）。

```
echo com.android.ide.eclipse.adt.sdk=$sdk_path >> ./workspace/.metadata/.plugins/org.eclipse.core.runtime/.settings/com.android.ide.eclipse.adt.prefs 
```

**Mac 使用说明**

这是我解压后的目录结构：

```
android_dev_environment (root)
  - android-sdk-macosx
  - eclipse
  - initial_setup
  - workspace 
```

以下是 initial_setup 的内容：

```
#!/bin/bash 
# Set the Android SDK path in Eclipse. Must be the absolute; a relative path
# does not work with the AVD Manager.
cd "$(dirname "$0")"
sdk_path=`pwd`/android-sdk-macosx
echo "Setting Android SDK path in Eclipse..."
echo com.android.ide.eclipse.adt.sdk=$sdk_path >> ./workspace/.metadata/.plugins/org.eclipse.core.runtime/.settings/com.android.ide.eclipse.adt.prefs
echo "Android SDK path set."

# Create a new AVD
echo "Creating new AVD..."
echo no | $sdk_path/tools/android create avd -n Android403 -t 1 --force
echo "AVD created." 
```

**视窗说明**

这是我解压后的目录结构：

```
android_dev_environment (root)
  - android-sdk-windows
  - eclipse
  - initial_setup.bat
  - java
  - workspace 
```

Windows 版本在 java 目录中有自己的本地 JDK 6。Eclipse 需要知道它，所以编辑 eclipse\eclipse.ini。[在 -vmargs 行上方](http://wiki.eclipse.org/Eclipse.ini#Specifying_the_JVM)添加以下行：

```
-vm 
..\Java\jdk1.6.0_33\bin\javaw.exe 
```

以下是 initial_setup.bat 的内容：

```
REM Set the Android SDK path in Eclipse. Must be the absolute; a relative path
REM does not work with the AVD Manager.
cd > temp.txt 2>&1
set /p sdk_path= < temp.txt
del temp.txt
set sdk_path=%sdk_path%\android-sdk-windows
set sdk_path=%sdk_path:\=\\%
set sdk_path=%sdk_path::=\:%

echo “Setting Android SDK path in Eclipse...”
echo com.android.ide.eclipse.adt.sdk=%sdk_path%>> .\workspace\.metadata\.plugins\org.eclipse.core.runtime\.settings\com.android.ide.eclipse.adt.prefs
echo “Android SDK path set.”

REM Create a new AVD
echo “Creating a new AVD...”
echo no | .\android-sdk-windows\tools\android create avd -n Android403 -t 1 --force
echo “AVD created.”

pause 
```

**对于 64 位 Windows**，您还需要调整 Android SDK 中的 find_java.bat 文件，以便它找到随包安装的 Java。将以下行添加到 android-sdk-windows\tools\lib\find_java.bat （在它运行以注释“rem Check we have a valid Java.exe ...”开头的自己的检查之前）

```
set java_exe=%~dp0\..\..\..\Java\jdk1.6.0_33\bin\java.exe
set javaw_exe=%~dp0\..\..\..\Java\jdk1.6.0_33\bin\javaw.exe
if defined javaw_exe goto :EOF 
```

**如何使用环境包**

1.  解压缩包
2.  双击android_dev_environment文件夹中的initial_setup，将Android SDK路径设置为用户的绝对路径，并创建默认的AVD
3.  在 eclipse 目录中运行 Eclipse 可执行文件

**注意：**在 Mac 或 PC 上多次运行 initial_setup 不会造成任何伤害。如果用户在 initial_setup 之后移动整个目录，则开发环境将中断，但从新位置运行 initial_setup 将修复它。我计划在这些说明中包含一个 README 文件。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T22:03:13.330

如果您愿意使用 linux，您可以在闪存驱动器上使用便携式操作系统，并在任何带有 USB 驱动器的计算机上使用您喜欢的所有设置和程序。或者使用 live cd 并保存到另一个位置。我不知道你怎么能用windows做到这一点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T16:35:53.500

虽然上面的“批准”答案有很多很好的信息，这些信息对我有帮助！但我想指出另一个答案，它对“便携”这个词有不同的 - 更直接的 - 字面意思。

查看适用于 Android 手机[的 Terminal-IDE ！](http://Terminal-IDE.com/)

Terminal-IDE 提供了一个集成开发环境 (IDE)，它可以在非 root 的 Android 手机上运行！

它还为您的手机提供出站和入站的 SSH 功能！因此，您可以从其他计算机直接登录您的手机！很酷。

坦率地说，我认为 Terminal-IDE 是对 Android 环境的一个了不起的贡献。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-04T09:00:59.217

上面的答案工作正常。

如果您期待将您的 Android 平板电脑用作 Android 开发工具，请查看“AIDE - Android IDE - Java, C++”。这是[一个链接](https://play.google.com/store/apps/details?id=com.aide.ui)！这确实是一个不错的选择，我目前正在使用它并在旅途中编写代码。还允许导出签名的 APK。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-02-18T20:42:11.937

我创建了一个可移植的 android sdk 包（包含 ant/jdk/jre），可在此处获得：

[http://staticchaos.freeoda.com/android/sdk/](http://staticchaos.freeoda.com/android/sdk/)

但是，您只能靠自己来使用 IDE。

# css - 选择组中的子元素，并对每个组进行不同的处理

> ID：10824361
> 
> 赞同：2
> 
> 时间：2012-05-30T21:13:48.263
> 
> 标签：css, css-selectors

假设我在 a 中有多个列表项`<ul>`，并且有比包含`.aggregated`该类的项组。像这样：

```
<ul>
    <li></li>
    <li></li>
    <li></li>
    <li class="aggregated"></li>
    <li class="aggregated"></li>
    <li class="aggregated"></li>
    <li class="aggregated"></li>
    <li class="aggregated"></li>
    <li class="aggregated"></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li class="aggregated"></li>
    <li class="aggregated"></li>
    <li class="aggregated"></li>
    <li class="aggregated"></li>
    <li class="aggregated"></li>
    <li></li>
    <li></li>
    <li></li>
    <li class="aggregated"></li>
    <li class="aggregated"></li>
</ul> 
```

我需要能够对这些`<li>`元素组中的每一个进行不同的样式设置，基本上给每个组一个不同的背景颜色。所以，第一组的`<li class="aggregated">`背景是蓝色的，第二组的背景是黄色的，等等。我不想依赖 JS，也不想添加任意的类名或 ID。我想使用已经存在的代码。

可能的？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:39:52.790

好的，这*是*可能的。但它非常脆弱，并且依赖于可预测的类，还需要现代浏览器：

```
/* presentational stuff */

li ~ li.aggregated,
li.aggregated ~ li.aggregated {
    background-color: #f90;
}

li.aggregated ~ li:not(.aggregated) ~ li.aggregated {
    background-color: #ffa;
}

li.aggregated ~ li:not(.aggregated) ~ li.aggregated ~ li:not(.aggregated) ~ li.aggregated {
    background-color: #cfc;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/HH99P/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T21:21:58.430

如果您查看任何具有其之前的元素没有的类的项目，您可以定义组编号并相应地增加它们。

```
var groupNum = 1;
// Get all <li>
$("ul li").each( function() {
    var element = $(this);
    if( element.hasClass("aggregated") ) {
        if( !element.prev().hasClass("aggregated") ) {
            // Prev element was not in this group. increment the group number
            groupNum++;
        }
        switch( groupNum ) {
            case 1:
                // group #1 styles
                // element.css( "background-color", "#FFF" );
                break;
            case 2:
                // group #2 styles
                // element.css( "background-color", "#00F" );
                break;
        }
    }
} ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T21:19:18.713

您可以为不同的 bgColors 使用不同的类，或者将第二类添加到组中并将 bgColor 放入这些类中（如果您有某种目的，它们都必须具有聚合类）。

```
<ul>
    <li></li>
    <li class="aggregated bg1"></li>
    <li class="aggregated bg1"></li>
    <li class="aggregated bg1"></li>
    <li></li>
    <li class="aggregated bg2"></li>
    <li class="aggregated bg2"></li>
    <li class="aggregated bg2"></li>
    <li></li>
    <li class="aggregated bg3"></li>
    <li class="aggregated bg3"></li>
</ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T22:17:04.563

您可以使用 div 对项目进行分组，而不是向组的每个列表项添加自定义类，例如：

```
<ul>
    <li></li>
    <li></li>
    <li></li>
    <div class="group">
      <li></li>
      <li></li>
      <li></li>
    </div>
</ul> 
```

然后您可以使用选择器选择您感兴趣的组`nth-of-type`，例如：

```
ul > .group:nth-of-type(1) > li
{
    background-color:red;
} 
```

`nth-of-type`选择器允许您按数字、关键字或公式选择项目。

* * *

示例[jsFiddle](http://jsfiddle.net/wTxGv/1/)。

# assembly - 低级语言中的栈和栈帧

> ID：10824364
> 
> 赞同：4
> 
> 时间：2012-05-30T21:14:09.373
> 
> 标签：assembly, stack

我试图围绕函数调用的概念，因为它们与堆栈相关。这个问题是在低级语言而不是高级语言的背景下提出的。

据我所知，当调用函数时，局部变量和参数会存储在堆栈上的堆栈帧中。每个堆栈帧都与单个函数调用相关联。我不太清楚的部分是谁负责创建框架？我的程序是否应该查看程序中的函数声明并手动将局部变量复制到堆栈上的新框架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T01:23:48.087

是的...

假设你有一种像 C 这样允许递归的语言。为此，函数的每个实例都必须独立于该函数的其他实例。堆栈是完美的地方，因为代码可以在不知道物理地址的情况下“分配”和引用分配中的项目，它都是通过引用访问的。您所关心的只是在函数的上下文中跟踪该引用并将堆栈指针恢复到您进入函数时的位置。

现在您必须有一个调用约定，一个适合递归等。两个流行的选择（使用简化模型）是寄存器传递和堆栈传递。您可以拥有并且实际上将拥有混合（基于寄存器的您将用完寄存器并且必须恢复到堆栈以获取剩余参数）。

假设我正在谈论的虚构硬件神奇地处理返回地址，而不会弄乱寄存器或堆栈。

注册通过。定义一组特定的硬件/处理器寄存器来保存参数，假设 r0 始终是第一个参数，r1 第二个，r2 第三个。并假设返回值为 r0 （这是简化的）。

堆栈传递。让我们定义你压入堆栈的第一件事是最后一个参数，然后是最后一个参数。当您返回时，可以说返回值是堆栈上的第一件事。

为什么要声明调用约定？这样调用者和被调用者都确切地知道规则是什么以及在哪里可以找到参数。寄存器传递在表面上看起来很棒，但是当您用完寄存器时，您必须将内容保存在堆栈中。当您想从被调用者变为另一个函数的调用者时，您可能必须在调用寄存器中保留项目，以免丢失这些值。你在堆栈上。

```
int myfun ( int a, int b, int c)
{
    a = a + b;
    b+=more_fun(a,c)
    return(a+b+c);
} 
```

a、b 和 c 在调用 more_fun 之后使用，more_fun 至少需要 r0 和 r1 来传递参数 a 和 c，因此您需要将 r0 和 r1 保存在某处以便您可以 1) 使用它们来调用 more_fun () 和 2)，这样您就不会丢失从 more_fun() 返回后需要的值 a 和 b。您可以将它们保存在其他寄存器中，但是如何保护这些寄存器不被调用函数修改。最终，东西被保存在堆栈上，堆栈是动态的，通过引用而不是物理地址访问。所以

有人想给 myfun 打电话，我们正在使用注册密码。

```
r0 = a
r1 = b
r2 = c
call myfun
;return value in r0

myfun:
r0 = r0 + r1 (a = a + b)
;save a and b so we dont lose them
push r0 (a)
push r1 (b)
r0 = r0 (a) (dead code, can be optimized out)
r1 = r2 (c)
call more_fun
;morefun returns something in r0
pop r1 (recover b)
r1 = r1 + r0 (b = b+return value)
pop r0 (recover a)
;r0 is used for returning a value from a function
r0 = r0 + r1 (= a+b)
r0 = r0 + r2 (=(a+b)+c)
return 
```

调用函数（caller）知道在r0、r1、r2中准备三个参数，并在r0中取一个返回值。被调用者知道接受 r0,r1,r2 作为传入参数并在 r0 中返回，并且它知道当它成为某个其他函数的调用者时必须保留一些东西。

如果我们使用堆栈通过调用约定传递参数

```
int myfun ( int a, int b, int c)
{
    a = a + b;
    b+=more_fun(a,c)
    return(a+b+c);
} 
```

现在我们必须制定一些寄存器规则，我们是否定义调用规则来说明 1）您可以销毁任何寄存器（但 sp 和 pc 和 psr），2）您必须保留每个寄存器，以便当您返回调用函数永远不会看到它的寄存器发生变化，或者你是否定义了 3）有些寄存器是临时的，可以随意修改，有些如果使用则必须保留。我要说的是，为了简单起见，您可以销毁除 sp、pc 和 spr 之外的寄存器。

我们还有一个问题要解决。谁清理堆栈？当我调用 morefun 时，堆栈中有两个项目进入，只有退出时的返回值，谁清理堆栈。两种选择，调用者清理，被调用者清理，我选择调用者清理。这意味着被调用者必须以找到它的方式从带有堆栈的函数返回，它将任何东西留在堆栈上，并且不会从堆栈中取出太多东西。

呼叫者：

```
push c
push b
push a
call myfun
pop result
pop and discard
pop and discard 
```

假设使用此硬件，堆栈指针 sp 指向堆栈上的当前项

```
myfun:
;sp points at a
load r0,[sp+0] (get a)
load r1,[sp+1] (get b)
add r0,r1 (a = a+b)
store [sp+0],r0 (the new a is saved)
;prepare call to more_fun
load r0,[sp+2] (get c)
load r1,[sp+0] (get a)
push r0 (c)
push r1 (a)
call more_fun
;two items on stack have to be cleaned, top is return value
pop r0 (return value)
pop r1 (discarded)
;we have cleaned the stack after calling more_fun, our offsets are as
   ;they were when we were called
load r1,[sp+1] (get b)
add r1,r0 (b = b + return value)
store [sp+1],r1
load r0,[sp+0] (get a)
load r1,[sp+1] (get b)
load r2,[sp+2] (get c)
add r0,r1 (=a+b)
add r0,r2 (=(a+b)+c)
store [sp+0],r0 (return value)
return 
```

所以我在飞行中写了所有这些，可能有一个错误。所有这一切的关键是你必须定义一个调用约定，如果每个人（调用者和被调用者）都遵循调用约定，它会使编译变得容易。诀窍是制定有效的调用约定，正如您在上面看到的，我们必须修改约定并添加规则以使其即使对于这样一个简单的程序也能正常工作。

堆栈帧呢？

```
int myfun ( int a, int b)
{
    int c;
    c = a + b;
    c+=more_fun(a,b)
    return(c);
} 
```

使用基于堆栈的

呼叫者

```
push b
push a
call myfun
pop result
pop and discard 
```

被调用者

```
;at this point sp+0 = a, sp+1 = b, but we need room for c, so
sp=sp-1 (provide space on stack for local variable c)
;sp+0 = c
;sp+1 = a
;sp+2 = b
load r0,[sp+1] (get a)
load r1,[sp+2] (get b)
add r0,r1
store [sp+0],r0 (store c)
load r0,[sp+1] (get a)
;r1 already has b in it
push r1 (b)
push r0 (a)
call more_fun
pop r0 (return value)
pop r1 (discarded to clean up stack)
;stack pointer has been cleaned, as was before the call
load r1,[sp+0] (get c)
add r1,r0 (c = c+return value)
store [sp+0],r1 (store c)(dead code)
sp = sp + 1 (we have to put the stack pointer back to where 
   ;it was when we were called
;r1 still holds c, the return value
store [sp+0],r1 (place the return value in proper place 
   ;relative to callers stack)
return 
```

被调用者，如果它使用堆栈并移动堆栈指针，它必须把它放回它被调用时的位置。您可以通过在堆栈上添加正确数量的东西以进行本地存储来创建堆栈框架。您可能有局部变量，并且通过编译过程您可能提前知道您还必须保留一定数量的寄存器。最简单的方法是将所有这些加起来，并将整个函数的堆栈指针移动一次，然后在返回之前将其放回一次。您可以变得更聪明，并在调整偏移量的过程中不断移动堆栈指针，这会更难编码并且更容易出错。像 gcc 这样的编译器倾向于将堆栈指针移动到函数中并在离开之前返回它。

一些指令集在调用时将内容添加到堆栈中，并在返回时将其删除，您必须相应地调整偏移量。同样，您围绕调用另一个函数的创建和清理可能需要处理与堆栈的硬件使用相关的处理（如果有）。

假设您进行调用时的硬件将返回值推送到堆栈顶部。

```
int onefun ( int a, int b )
{
    return(a+b)
}

onefun:
;because of the hardware
;sp+0 return address
;sp+1 a
;sp+2 b
load r0,[sp+1] (get a)
load r1,[sp+2] (get b)
add r1,r2
;skipping over the hardware use of the stack we return on what will be the
;top of stack after the hardware pops the return address
store [sp+1],r1 (store a+b as return value)
return (pops return address off of stack, calling function pops the other two 
   ;to clean up) 
```

一些处理器在调用函数时使用寄存器来保存返回值，有时硬件会指示哪个寄存器，有时编译器会选择一个并将其用作约定。如果您的函数没有调用任何其他函数，您可以不使用返回地址寄存器并将其用于返回，或者您可以在某个时刻将其压入堆栈，然后在返回之前将其弹出然后使用它返回. 如果您的函数确实调用了另一个函数，则您必须保留该返回地址，以便对下一个函数的调用不会破坏它并且您无法找到回家的路。因此，如果可以，您可以将其保存在另一个寄存器中，也可以将其放入堆栈

使用我们定义的上述寄存器调用约定，加上一个名为 rx 的寄存器，当进行调用时，硬件会为您将返回地址放在 rx 中。

```
int myfun ( int a, int b)
{ 
   return(some_fun(a+b));
}

myfun:
;rx = return address
;r0 = a, first parameter
;r1 = b, second parameter
push rx ; we are going to make another call we have to save the return
        ; from myfun
;since we dont need a or b after the call to some_fun we can destroy them.
add r0,r1 (r0 = a+b) 
;we are all ready to call some_fun first parameter is set, rx is saved
;so the call can destroy it
call some_fun
;r0 is the return from some_fun and is going to be the return from myfun, 
;so we dont have to do anything it is ready
pop rx ; get our return address back, stack is now where we found it 
       ; one push, one pop
mov pc,rx ; return 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:28:16.477

通常，处理器供应商或第一家为处理器开发流行语言编译器的公司将定义函数调用者在调用函数之前应该做什么（堆栈上应该有什么，各种寄存器应该包含什么等）以及被调用者应该做什么。函数应该在它返回之前执行（包括恢复某些寄存器的值，如果它们已被更改等）。对于某些处理器，多种约定已变得流行，并且确保任何给定函数的代码将使用调用代码所期望的约定通常非常重要。

在具有少量寄存器的 8088/8086 上，出现了两个主要约定：C 约定，它指定调用者应在调用函数之前将参数压入堆栈，然后将其弹出（意味着唯一的被调用的函数应该从堆栈中弹出是返回地址），以及 Pascal 约定，它指定被调用的函数除了弹出返回地址之外，还应该弹出所有传递的参数。在 8086 上，Pascal 约定通常允许代码稍微小一些（因为堆栈清理只需要对每个可调用函数进行一次，而不是对每个函数调用一次，并且因为 8086 包含一个 RET 版本，它向*之后*的堆栈指针*弹出返回地址。Pascal 约定的一个缺点是它要求被调用函数知道要传递多少字节的参数。如果调用的函数没有弹出正确的字节数，堆栈损坏几乎肯定会发生。*

 *在许多较新的处理器上，具有少量固定参数的例程通常不会将其参数压入堆栈。相反，编译器供应商将指定在调用函数之前将前几个参数放入寄存器中。这通常比使用基于堆栈的参数实现更好的性能。但是，具有许多参数或可变参数列表的例程仍必须使用堆栈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T23:10:20.670

为了扩展 supercat 的答案，设置堆栈帧是调用和被调用函数的共同责任。堆栈帧通常指的是例程的特定调用本地的所有数据。然后，调用例程首先将任何基于堆栈的参数压入堆栈，然后通过调用例程将返回地址压入堆栈，从而构建外部堆栈帧。然后，被调用的例程通过（通常）将当前帧指针压入（保存）堆栈，并设置一个指向下一个空闲堆栈槽的新指针来构建堆栈帧的其余部分（内部堆栈帧）。然后它为堆栈上的局部变量保留堆栈，并且根据所使用的语言，此时也可能会初始化它们。然后可以使用帧指针来访问基于堆栈的参数和局部变量，一个带有负数，另一个带有正偏移量。从例程退出时，旧堆栈帧被恢复，本地数据和参数被弹出，如 supercat 所述。*

# perl - Perl Unicode 内部 - 与 utf8 混淆

> ID：10824366
> 
> 赞同：10
> 
> 时间：2012-05-30T21:14:22.407
> 
> 标签：perl, unicode, utf-8

在有人告诉我 RTFM 之前，我必须说 - 我已经深入研究了：

*   [为什么现代 Perl 默认避免使用 UTF-8？](https://stackoverflow.com/questions/6162484/why-does-modern-perl-avoid-utf-8-by-default)
*   [使用 Perl 采用 Unicode 方式的清单](https://stackoverflow.com/q/3735721/632407)
*   [如何在perl中将字符串与变音符号匹配？](https://stackoverflow.com/questions/7429964/how-to-match-string-with-diacritic-in-perl)
*   [如何使用现代 perl 和 utf8 默认值“使用 My::defaults”？](https://stackoverflow.com/questions/6412799/perl-how-to-make-use-mydefaults-with-modern-perl-utf8-defaults)
*   和许多其他人（例如[perluniintro](http://perldoc.perl.org/perluniintro.html)和其他人）-但是-*当然*，错过了一些东西

所以，基本代码：

```
use 5.014;           #getting 'unicode_strings' feature
use uni::perl;       #turning on many utf8 things
use Unicode::Normalize  qw(NFD NFC);
use warnings;
while(<>) {
    chomp;
    my $data = NFD($_);
    say "OK" if utf8::is_utf8($data);
} 
```

此时，*从**utf8*编码的STDIN 我得到了一个正确的*unicode*字符串`$data`，例如“\w”将匹配多字节`[\p{Alphabetic}\p{Decimal_Number}\p{Letter_Number}]`（可能更多）。没关系并且有效。

AFAIK`$data`不包含 utf8，而是格式的**字符串**`perl's internal Unicode`。

现在的问题：

*   我如何确保（测试）任何`$other_data`包含有效的 Unicode 字符串？
*   utf8::is_utf8($data) 的目的是什么？整个[utf8](http://perldoc.perl.org/utf8.html) pragma 对我来说是个谜。

我知道这`use utf8;`只是为了告诉 Perl 我的源代码在 utf8 中（所以当我的脚本以 BOM 标志开头时做类似的事情 - 对于 BigEndian） - 从 Perl 的角度来看，我的源代码就像一个外部文件 - Perl 应该知道它是什么编码......

在上面的示例`utf8::is_utf8($data)`中将打印 OK - 但我不明白为什么。

Perl 内部不使用 utf8，所以我的 utf8 数据文件被转换为 Perl 内部的 Unicode，那么为什么*返回*`utf8::is_utf8($data)`true`$data`不是utf8 格式？或者是命名错误，函数应该命名为 uni::is_unicode($data)???

 *提前感谢您的澄清。

Ps：@brian d foy - 是的，我仍然没有*有效的 Perl 编程*书 - 我会得到它 - 我保证 :) /joking/

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T21:28:27.900

`is_utf8`返回有关使用哪种内部存储格式的信息，期间。

*   它与字符串的值无关（尽管某些字符串只能以两种格式之一存储）。
*   它与字符串是否已被解码无关。
*   它与字符串是否包含使用 UTF-8 编码的内容无关。
*   这不是任何形式的有效性检查。

现在回答你的问题。

* * *

> 整个 utf8 pragma 对我来说是个谜。

`use utf8;`告诉`perl`您的源代码是使用 UTF-8 编码的。如果您不这么说，则`perl`有效地假定它是 iso-8859-1（作为内部机制的副作用）。

utf8:: 命名空间中的函数与 pragma 无关，它们有多种用途。

*   `utf8::encode`和`utf8::decode`：有用的编码和解码功能。类似于 Encode 的`encode_utf8`and `decode_utf8`，但它们在原地工作。
*   `utf8::upgrade`和`utf8::downgrade`：很少使用，但对于解决 XS 模块中的错误很有用。更多关于这下面。
*   `utf8::is_utf8`: 我不知道为什么有人会使用它。

* * *

> 我如何确保（测试它），而不是任何 $other_data 包含有效的 unicode 字符串？

“有效的 Unicode 字符串”对您意味着什么？Unicode 对于不同的情况有不同的有效定义。

* * *

> utf8::is_utf8($data) 的目的是什么？

调试。它窥探了 Perl 的胆量。

* * *

> 在上面的例子中 utf8::is_utf8($data) 将打印 OK - 但不明白为什么。

因为 NFD 恰好选择返回一个包含 UTF8=1 格式字符串的标量。

Perl 有两种存储字符串的格式：

*   UTF8=0 可以存储一个 8 位值的序列。
*   UTF8=1 可以存储 72 位值的序列（尽管实际上限制为 32 或 64 位。）

第一种格式使用更少的内存并且在访问字符串中的特定位置时速度更快，但它可以包含的内容受到限制。（例如，它不能存储 Unicode 代码点，因为它们需要 21 位。）Perl 可以在两者之间自由切换。

```
use utf8;
use feature qw( say );

my $d = my $u = "abcdé";
utf8::downgrade($d);  # Switch to using the UTF8=0 format for $d.
utf8::upgrade($u);    # Switch to using the UTF8=1 format for $u.

say utf8::is_utf8($d) ?1:0;   # 0
say utf8::is_utf8($u) ?1:0;   # 1
say $d eq $u          ?1:0;   # 1 
```

通常不必担心这一点，但是有错误的模块。尽管`use feature qw( unicode_strings );`. 可以使用`utf8::upgrade`和`utf8::downgrade`将标量的格式更改为 XS 函数所期望的格式。

* * *

> 或者它是错误命名的，函数应该命名为 uni::is_unicode($data)???

那也好不到哪里去。Perl 无法知道一个字符串是否是 Unicode 字符串。如果您需要跟踪它，您需要自己跟踪它。

UTF8=0 格式的字符串可能包含 Unicode 代码点。

```
my $s = "abc";  # U+0041,0042,0043 
```

UTF8=1 格式的字符串可能包含不是 Unicode 代码点的值。

```
my $s = pack('W*', @temperature_measurements); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-30T21:43:21.353

> 我如何确保（测试它），而不是任何 $other_data 包含有效的 unicode 字符串？

您无法事后确定字符串是否具有字符语义或字节语义。Perl 不会为您跟踪它。您必须通过仔细编程来跟踪它：在边界处编码和解码；字节语义`:raw` [层](http://p3rl.org/PerlIO)`:encoding(foo)`，字符语义层。为您的变量和函数使用[命名约定](http://www.joelonsoftware.com/articles/Wrong.html)，以清楚地区分语义并使错误代码*看起来*不正确。

> utf8::is_utf8($data) 的目的是什么？

它告诉你`SvUTF8`旗帜的存在，仅此而已。这对大多数开发人员来说几乎完全没用，因为它是内部的东西。该标志并不意味着字符串具有字符语义，它的缺失并不意味着字符串具有字节语义。

> 整个 utf8 pragma 对我来说是个谜。

可能是因为它被过度记录，因此令人困惑。大多数开发人员在说它的目的是在源代码中启用 Unicode 文字的部分之后就可以停止阅读。

> 在上面的例子中 utf8::is_utf8($data) 将打印 OK - 但不明白为什么。

因为 uni::perl 启用了`use open qw(:utf8 :std);`. 从 STDIN 读取的任何输入`<>`都将被解码。之后的标准化步骤不会改变这一点。*

# ios - UIWebview阻塞主线程，同时渲染html5

> ID：10824369
> 
> 赞同：1
> 
> 时间：2012-05-30T21:14:29.073
> 
> 标签：ios, uiwebview, webkit

在我的应用程序中，我使用 UIWebview 呈现 HTML5 网站。当我选择一个下拉菜单时，会出现一个带有嵌入式 UITableView 的弹出框。在表格视图中选择条目时，JS 会加载数据。似乎 Webkit 在主线程中同步加载数据。下面提供了堆栈跟踪。这会导致主线程挂起一段时间并冻结 UI。

我遵循 UIWebview 指南，在主线程上创建 Web 视图。

相同的网站在 Mobile Safari 上运行良好。任何帮助表示赞赏。

```
#0  0x3367e004 in mach_msg_trap ()
#1  0x3367e200 in mach_msg ()
#2  0x3589a3f2 in __CFRunLoopServiceMachPort ()
#3  0x3589912a in __CFRunLoopRun ()
#4  0x3581c4a4 in CFRunLoopRunSpecific ()
#5  0x3581c36c in CFRunLoopRunInMode ()
#6  0x33edd7ca in WebCore::ResourceHandle::loadResourceSynchronously ()
#7  0x33bf5c04 in WebCore::FrameLoader::loadResourceSynchronously ()
#8  0x339ebd5a in WebCore::DocumentThreadableLoader::loadRequest ()
#9  0x339eb984 in WebCore::DocumentThreadableLoader::DocumentThreadableLoader ()
#10 0x33b65fd4 in WebCore::DocumentThreadableLoader::loadResourceSynchronously ()
#11 0x33f4880a in WebCore::ThreadableLoader::loadResourceSynchronously ()
#12 0x339eb5bc in WebCore::XMLHttpRequest::createRequest ()
#13 0x339eb35a in WebCore::XMLHttpRequest::send ()
#14 0x339eaeea in WebCore::JSXMLHttpRequest::send ()
#15 0x339ead98 in WebCore::jsXMLHttpRequestPrototypeFunctionSend ()
#16 0x356de598 in JSC::Interpreter::privateExecute ()
#17 0x3575d0ec in JSC::Interpreter::executeCall ()
#18 0x3575ccd0 in JSC::call ()
#19 0x339d5f0e in WebCore::JSEventListener::handleEvent ()
#20 0x339d5bd2 in WebCore::EventTarget::fireEventListeners ()
#21 0x338dc7c6 in WebCore::EventTarget::fireEventListeners ()
#22 0x338e2d38 in WebCore::Node::handleLocalEvents ()
#23 0x338e2588 in WebCore::EventDispatcher::dispatchEvent ()
#24 0x338e233a in WebCore::EventDispatchMediator::dispatchEvent ()
#25 0x338e230e in WebCore::EventDispatcher::dispatchEvent ()
#26 0x338e2266 in WebCore::Node::dispatchEvent ()
#27 0x33e757f4 in WebCore::Node::dispatchChangeEvent ()
#28 0x33c278aa in WebCore::HTMLFormControlElement::dispatchFormControlChangeEvent ()
#29 0x33eeb7a8 in WebCore::SelectElement::menuListOnChange ()
#30 0x33eeb7be in WebCore::SelectElement::dispatchBlurEvent ()
#31 0x33c35670 in WebCore::HTMLSelectElement::dispatchBlurEvent ()
#32 0x338e1a4e in WebCore::Document::setFocusedNode ()
#33 0x338e1788 in WebCore::FocusController::setFocusedNode ()
#34 0x33bdfdfe in WebCore::Element::blur ()
#35 0x33b802d0 in -[DOMElement blur] ()
#36 0x358c97e4 in __invoking___ ()
#37 0x358247b0 in -[NSInvocation invoke] ()
#38 0x358243ce in -[NSInvocation invokeWithTarget:] ()
#39 0x306824c0 in -[UIThreadSafeNode forwardInvocation:] ()
#40 0x358c8a82 in ___forwarding___ ()
#41 0x35823650 in __forwarding_prep_0___ ()
#42 0x30511acc in -[UIWebBrowserView resignFirstResponder] ()
#43 0x305e6658 in -[UIWebSelectTableViewController tableView:didSelectRowAtIndexPath:] ()
#44 0x3047bae4 in -[UITableView _selectRowAtIndexPath:animated:scrollPosition:notifyDelegate:] ()
#45 0x304f57aa in -[UITableView _userSelectRowAtPendingSelectionIndexPath:] ()
#46 0x346ad932 in __NSFireDelayedPerform ()
#47 0x3589aa32 in __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ ()
#48 0x3589a698 in __CFRunLoopDoTimer ()
#49 0x3589926e in __CFRunLoopRun ()
#50 0x3581c4a4 in CFRunLoopRunSpecific ()
#51 0x3581c36c in CFRunLoopRunInMode ()
#52 0x3559b438 in GSEventRunModal ()
#53 0x303f7e7c in UIApplicationMain () 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T04:58:12.410

您能否更具体地说明您是如何调用请求并将数据传递到 UIWebView 的？

比如：你有没有设置UIWebViewDelegate来控制willStartLoading和didFinishLoading？您是否将 NSURLRequest 设置为同步或异步？

通常，委托在单独的线程上加载 UIWebView，这样 main 就不会被阻塞。我认为您需要在某些参数上做更多的工作才能使其正确。

# c# - 仅从集合中获取第一个元素

> ID：10824372
> 
> 赞同：3
> 
> 时间：2012-05-30T21:14:40.900
> 
> 标签：c#, linq, nhibernate, linq-to-nhibernate

我正在尝试检索存储为列表的属性实体的所有记录。这个实体有照片的集合，这个集合最多可以填充5张图片。

为了减少加载时间，我想检索属性列表，并且在每个属性中只检索集合中的第一张照片。由于这个查询

```
List<Domain.Property> data = session.Query<Domain.Property>()
                       .Fetch(x => x.Photos.First())
                       .ToList(); 
```

给我这个错误。一个获取请求必须是一个简单的成员访问表达式；'[100002]' 是一个 SubQueryExpression。参数名称：relatedObjectSelector。

所以我用

```
List<Domain.Property> data = session.Query<Domain.Property>()
                       .ToList(); 
```

我试图在列表和 foreach 循环中检索属性以访问每个属性并在 nhib 中加载照片对象。像这样的会话

```
 var a = PropertyViewModel.FromDomainModel(data, session);

 public static List<PropertyViewModel> FromDomainModel(IList<Property> x, ISession session)
        {
            List<PropertyViewModel> dataVm = new List<PropertyViewModel>();

            foreach (Property p in x)
            {
                Photo firstPhoto = session.Get<Photo>(p.Photos[0].Id);

                dataVm.Add(new PropertyViewModel(p, firstPhoto));
            }
            return dataVm;
        }

public PropertyViewModel(Property x, Photo y)
        {
            Id = x.Id;
            ...
            Photo = new Photo();
            Photo = y;
        } 
```

这种方法即使看起来不错（至少对我来说:)）它会根据 nhib 加载。profiler 65 个实体（其中 Photo 标识符是 46 个 load 和 Property 19 个标识符）。 **（它应该为每个属性加载 19 个属性标识和 19 个照片标识。第一个图像）。**

我应该在这里做错什么？

我不熟悉预测，所以它应该是最后的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T00:52:30.660

我认为如果没有投影 ( `.Select()`) 调用，您将无法做到这一点。

使用 foreach 时加载这么多照片的原因是因为您正在访问一个照片集合，`p.Photos[0]`该集合会触发 NHibernate 对集合的延迟加载。所有照片都从数据库中加载，然后将使用索引器选择第一张照片`[0]`。

即使您使用 LINQ 的`.First()`方法而不是索引器，延迟加载也可能会在此处触发，因为您不是在`IQueryable`实例上调用它，而是在动态代理对象上调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:38:18.743

如果您在 Domain.Photo 和 Domain.Property 之间有关系，那么对照片进行查询并急切加载属性会更容易，类似这样（我还没有测试过它是否可以编译，但它应该给你大概的概念）：

```
var subQuery = QueryOver.Of<Domain.Property>().Select(x => x.Min(y => y.Photos));
List<Domain.Photo> data = session.QueryOver<Domain.Photo>()
     .WhereRestrictionOn(x => x.Id).IsIn(subQuery)
     .Fetch(x => x.Property).Eager
     .List(); 
```

# sql - SQL Server 2008 中表格结果的分组和计数选择

> ID：10824382
> 
> 赞同：2
> 
> 时间：2012-05-30T21:15:21.987
> 
> 标签：sql, sql-server-2008, tsql, group-by

我有 3 个表（一个持有结果/投票，两个是查找表）如下：

## **投票**

```
areaid    - which links to an area table to get area name
townid    - which links to a town table to get town name
votingyn  - if a person is voting or not (Y or N) 
```

考虑上表具有以下测试数据：

```
1,2,'Y'
1,3,'N'
2,1,'Y'
3,3,'N' 
```

.. 等等，areid 倍数，townid 倍数，当然还有一个 Y 或 N 如果投票

所以..我正在尝试找到获得以下结果的最有效方法：

按 areaid 分组，获得不同的 townid 计数以及有多少 Y 或 N 投票（如果 areadid 和 townid 连接到名称的查找表）：

```
area 1,     town1,       voting Y,   voting N
-------------------------------------------------
AREA 1      TOWN 1       23          12
AREA 2      TOWN 2       15          7 
```

不确定这是否足够清楚..任何帮助都非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T21:26:16.860

这样的事情应该这样做（未经测试）：

```
SELECT a.Name AS 'Area', t.Name AS 'Town',
  SUM(CASE v.votingyn WHEN 'Y' THEN 1 ELSE 0 END) AS 'Yes'
  SUM(CASE v.votingyn WHEN 'N' THEN 1 ELSE 0 END) AS 'No'
FROM VOTES AS v
  JOIN TOWN AS t ON v.townid = t.id
  JOIN AREA AS a ON v.areaid = a.id
GROUP BY (a.Name, t.Name) 
```

# datetime - Doctrine 2 - 按日期时间字段的日期部分过滤结果

> ID：10824383
> 
> 赞同：0
> 
> 时间：2012-05-30T21:15:24.490
> 
> 标签：datetime, doctrine-orm

我有一个名为`Szerzodes`.datetime 字段的学说实体`exportalva`。是否有可能以某种方式获取`exportalva`字段的日期部分是给定值的记录？例如，我想获取在给定日期导出的记录，而不考虑时间。我试过

```
$em->createQuery("SELECT sz FROM Szerzodes sz WHERE DATE(sz.exportalva) = '2012-05-17'") 
```

但它失败了，因为 DATE() 不是 DQL 的已知函数。现在我暂时使用

```
$em->createQuery("SELECT sz FROM Szerzodes sz WHERE sz.exportalva LIKE '2012-05-17%'") 
```

但这对我来说似乎是一个丑陋的黑客。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T03:17:30.687

考虑到您的数据库中有一个*DATETIME*字段，可能是使用*LIKE*（这完全取决于数据库和表的引擎）您没有使用针对 DATE 操作进行优化的算法。

[一种解决方案是使用DQL](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#id2)支持的**BETWEEN**运算符指定一整天（从它的第一秒到最后一秒） ，如 EBNF 所示：

```
$em->createQuery("SELECT sz FROM Szerzodes sz WHERE sz.exportalva BETWEEN '2012-05-17 00:00:00' AND '2012-05-17 23:59:59'") 
```

如果您真的想为此使用函数，那么始终在值中使用函数而不是在条件中使用的列也是一个好主意。某些数据库（如 MySQL）不在本机函数修改的列中使用索引。[您可以使用DQL 用户定义函数](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/cookbook/dql-user-defined-functions.html)创建一个名为**DATE**的用户函数，该函数可以满足您的期望（它可以轻松完成上述示例）。

# android - 禁用双击或检测第二次点击位置

> ID：10824388
> 
> 赞同：3
> 
> 时间：2012-05-30T21:15:39.850
> 
> 标签：android

我有一个带有 GestureDetector 和扩展 SimpleOnGestureListener 的 GLSurfaceView。我需要能够通过快速点击它们来选择表面视图上的多个项目。我覆盖了 onSingleTapUp 以快速检测触摸，因为 onSingleTapConfirmed 太慢了。现在的问题是，如果表面视图上的两个项目彼此靠近并且用户快速点击一个然后另一个，那么 onSingleTapUp 方法会为第一个项目调用，而不是第二个。第二个调用 onDoubleTap 方法，无论它是否被覆盖。

为了解决这个问题，我尝试简单地不覆盖 onDoubleTap 方法，并且我还尝试在覆盖的 onDoubleTap 中不执行任何操作并返回 false。两者都解决不了问题。第二次点击仍然不会调用 onSingleTapUp 方法。

我决定尝试在 onDoubleTap 方法中检测第二次点击并从那里选择项目。问题在于从 onDoubleTap 返回的运动事件包含“双击的第一次点击的向下运动事件”。- [http://developer.android.com/reference/android/view/GestureDetector.OnDoubleTapListener.html](http://developer.android.com/reference/android/view/GestureDetector.OnDoubleTapListener.html)

有什么方法可以禁用双击，更改双击时间使其永远不会触发，将双击半径更改为非常小的值，或者在 onDoubleTap 方法中获取第一个点击位置？

这是我的 SimpleOnGestureListener：

```
public class ViewGestureListener extends
    GestureDetector.SimpleOnGestureListener {

    private ViewRenderer renderer;
    private GLSurfaceView surfaceView;

    public ViewGestureListener(GLSurfaceView surfaceView,
        ViewRenderer renderer) {
        this.renderer = renderer;
        this.surfaceView = surfaceView;
    }

    // Pan
    @Override
    public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
        float distanceY) {
        renderer.pan(distanceX, distanceY);
        surfaceView.requestRender();
        return true;
    }

    // Double touch and release
    @Override
    public boolean onDoubleTap(MotionEvent e) {
        // Note: e.getX() doesn't return the second tap's location!
        renderer.singleTouch(e.getX(), e.getY());
        surfaceView.requestRender();
        return true;
    }

    @Override
    public boolean onSingleTapUp(MotionEvent e) {
        renderer.singleTouch(e.getX(), e.getY());
        surfaceView.requestRender();
        return true;
    }
} 
```

谢谢，马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-25T18:40:27.710

*我可能来不及帮助这篇文章的作者，但我刚刚遇到了同样的问题，所以这里是其他想知道它的人的答案。*

**回答：**

您需要覆盖以下方法，它将为您提供第二次点击的向下、移动和向上事件：

> onDoubleTapEvent(MotionEvent e)

如果你想要第二次点击的向上运动，那么：

```
onDoubleTapEvent(MotionEvent e) {
         if(e.getAction() != MotionEvent.ACTION_UP) {
                return false;  // Don't do anything for other actions
         }

         // YOUR CODE HERE

         return true;
} 
```

祝你好运！/卡洛斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-25T13:56:21.980

它没有很好的记录，但为了忽略双击，并将其检测为两个单独的水龙头，设置`null`为双击监听器就足够了。

```
GestureDetector gd = new GestureDetector(context, gestureListener);
gd.setOnDoubleTapListener(null); 
```

适用于`GestureDetector`和`GestureDetectorCompat`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-27T00:03:24.993

GestureDetector.OnDoubleTapListener 有以下方法

```
enter code here
public class ViewGestureListener extends GestureDetector.SimpleOnGestureListener,
GestureDetector.OnDoubleTapListener {

@Override
public boolean onSingleTapConfirmed(MotionEvent e) {
    Log.d(TAG, "onSingleTapConfirmed");
    return false;
}
@Override
public boolean onDoubleTap(MotionEvent e) {
    Log.d(TAG, "onDoubleTap");
    return false;
}
@Override
public boolean onDoubleTapEvent(MotionEvent e) {
    Log.d(TAG,"onDoubleTapEvent");
    return false;
} 
```

OnDoubleTapEvent 在每次双击后调用。您可以在此处返回 true 并分别获取每个水龙头。

# sql-server-2008 - 如何在合并复制中使用 Int ID

> ID：10824391
> 
> 赞同：0
> 
> 时间：2012-05-30T21:15:56.870
> 
> 标签：sql-server-2008, merge-replication

我将在 SQL 2012 中为可以同步数据的离线客户端使用合并复制。

合并复制过程为每个正在复制的表添加了一个 guid，但我也想知道如何添加一个额外的 int id？

例如，我们的客户打电话给支持服务台，他们必须确定他们不想与向导打交道的特定记录。

标识列是理想的，但是这将如何与复制一起工作？每个站点是否必须具有不同的身份范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:37:28.873

答案就在这里，

[https://dba.stackexchange.com/questions/18807/what-happens-when-identity-range-isexceeded](https://dba.stackexchange.com/questions/18807/what-happens-when-identity-range-isexceeded)

基本上每个客户都有两个范围。一旦他们用完第一个范围并同步，他们将获得一个新范围。

如果在超出两个范围的表中发生插入，则会引发错误。发生这种情况的唯一方法是用户在进行同步之前插入 2000 条记录。如果可能，可以增加范围大小。

# android - JSOUP 解析谷歌图片

> ID：10824396
> 
> 赞同：1
> 
> 时间：2012-05-30T21:16:09.070
> 
> 标签：android, parsing, jsoup, google-image-search

我想在 Android 中使用 JSOUP 解析 Google 图片的缩略图和完整图片的链接。android 部分实际上并不重要，因为我需要的只是选择器语法。我搜索了教程或类似问题，但找不到任何有价值的信息。

要获取图像，链接是*[https://www.google.com/search?tbm=isch&q=search-string](https://www.google.com/search?tbm=isch&q=search-string)*。

下面是 Chrome 的 Webkit 的屏幕截图，您可以看到缩略图的链接。如果我能得到它，那么尝试自己获取完整图像的链接将是一个好的开始。

[全尺寸](https://i.imgur.com/eVBD5.jpg) ![截屏](../Images/f4cdf97f97d047e98effcfb2eb3b6012.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-23T16:45:53.737

它会选择`"#rg div.rg_di img"`

所以例如像

```
Document doc = Jsoup.connect("https://www.google.com/search?tbm=isch&q=search-string")
            .userAgent("Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.1916.114 Safari/537.36")
            .get()

doc.select("#rg div.rg_di img") 
```

# php - ping 域并在 csv 文件中写出 ip

> ID：10824401
> 
> 赞同：0
> 
> 时间：2012-05-30T21:16:19.213
> 
> 标签：php, ping

我有一个循环，在其中循环多个域并 ping 主题：循环如下所示：

```
foreach ($rows[1] as $domains){
$domain='www.'.$domains;
$output = shell_exec('ping -c1 '.$domain.'');
echo "<pre>$output</pre>";

} 
```

我的问题：是否可以为每个循环域写出结果 IP 地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:19:04.963

当然，只需使用[gethostbyname](http://php.net/manual/en/function.gethostbyname.php)（PHP 文档）。例子：

```
foreach ($rows[1] as $domains){
   $domain='www.'.$domains;
   $output = shell_exec('ping -c1 '.$domain.'');
   echo "<pre>$output</pre>";
   echo gethostbyname($domain);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:21:39.570

试试这个

```
foreach ($rows[1] as $domains){
    $domain='www.'.$domains;
    $ip = gethostbyname($domain);
    echo $domain.','.$ip.'\n';
}

//OUPUT HEADERS
header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: private",false);
header("Content-Type: application/octet-stream");
header("Content-Disposition: attachment; filename=domains.csv;" );
header("Content-Transfer-Encoding: binary"); 
```

# java - 保护用于公共身份验证的 Rest Web 服务 - 服务器到服务器

> ID：10824405
> 
> 赞同：0
> 
> 时间：2012-05-30T21:16:35.310
> 
> 标签：java, rest

我有一个公共 RESTful API，用于对接受明文形式的用户 ID 和密码的 Web 应用程序进行用户身份验证（见下文）。用户名作为路径参数在 url 路径中传递，密码是查询字符串参数。HTTP GET 来自服务器端的另一个 Web 应用程序（http 客户端请求），这个 API 是否安全？我的印象是，如果请求是从服务器到服务器的，则无法看到 URL。我主要担心有人可以使用类似 firebug 的工具查看流量并获取用户 ID 和密码。

**REST 端点：**

```
HTTP GET https://host:80/user/joebob?password=pass123 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:57:19.753

肯定有人可以通过简单的网络嗅探器看到用户名和密码。如果您是 POST 请求，为什么 URL 中的参数是？它们应该像普通的 POST 一样在体内，然后至少 SSL 保护启动并且人们无法嗅探它们。另一种选择是让您查看 HTTP Basic Auth。

# tsql - TSQL 在链接服务器上查询视图的最有效方法是什么？

> ID：10824406
> 
> 赞同：2
> 
> 时间：2012-05-30T21:16:36.203
> 
> 标签：tsql, view, ssms, linked-server

我有两个 SQL Server，我是系统管理员。一个是名为 LIGHT 的 2008R2 服务器，因为该盒子几乎没有活动。另一个是名为 HEAVY 的 2005 年服务器，它在一天中看到了相当不错的、持续的活动量。两台服务器位于同一个数据中心。我在 LIGHT 上创建了一个链接服务器，以便它可以看到 HEAVY。

我创建了一个关于 HEAVY 的视图，以便在过去几天按天计算每个位置的销售额，或多或少：

```
SELECT BusinessDate,
       Location,
       SUM(Sales)
FROM   Last7DaysOfSales
GROUP BY BusinessDate, Location 
```

当我使用 SSMS 在 HEAVY 上运行此视图时，它会在 30 秒内运行。当我通过链接服务器连接从 LIGHT 运行相同的视图时，需要 17 分钟！我希望使用视图意味着“繁重的工作”将在 HEAVY 上完成，并将视图的结果发送到 LIGHT。考虑到可笑的运行时间，LIGHT 似乎正在拉动所有记录并自己完成工作？

我可以处理这个问题的最有效方法是什么？是否有可能让 HEAVY 在本地处理执行并将结果传递给 LIGHT？还是我唯一的选择是在 HEAVY 上创建一个夜间进程，每晚将此视图的结果转储到一个表中，然后简单地让 LIGHT 获取表中的数据？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:28:53.717

如果您想强制在远程机器上完成处理，我建议使用[OPENQUERY 。](http://msdn.microsoft.com/en-us/library/ms188427.aspx)例如：

```
SELECT *
FROM   OPENQUERY(
        HEAVY,
        'SELECT BusinessDate,
               Location,
               SUM(Sales)
        FROM   MyDatabase.dbo.Last7DaysOfSales -- Note the dot notation
        GROUP BY BusinessDate, Location') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:36:58.030

或者把它放在一个视图或存储过程中。并从远程机器访问它们。

# asp.net - Windows 2008 64 位操作系统检索 COM 类工厂失败

> ID：10824408
> 
> 赞同：0
> 
> 时间：2012-05-30T21:16:50.087
> 
> 标签：asp.net

**我正在通过我的网站在服务器端进行 excel 自动化。代码使用 excel 互操作 dll。我正在部署的服务器是 64 位 windows 2008 。我尝试了我在网络上研究的大多数选项，但仍然收到以下消息。**

尝试的选项：1) 配置 IIS 7 应用程序池以接受 32 位应用程序 - 失败 2) 使用目标平台作为 X86 重建代码 - 失败 3) 在 C:\Windows\SysWOW64\config\systemprofile\Desktop 下创建桌面文件夹 - 失败

由于以下错误，检索具有 CLSID {00024500-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：80040154 未注册类（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）。

异常详细信息：System.Runtime.InteropServices.COMException：检索具有 CLSID {00024500-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败，原因是以下错误：80040154 未注册类（来自 HRESULT 的异常：0x80040154（REGDB_E_CLASSNOTREG） ））。

# c++ - 使用 swprintf() 打印“0x0”的格式字符串应该是什么？

> ID：10824409
> 
> 赞同：1
> 
> 时间：2012-05-30T21:16:50.847
> 
> 标签：c++

我试过了`swprintf(buff, 4, L"%#03x", value)`，但是当`value = 0`我得到`000`而不是`0x0`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T21:19:01.680

您需要文字中的“0x”，例如“0x%03x”。该`x`格式仅以十六进制打印数字，不添加 0x 装饰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:21:58.367

使用`L"0x%x", value`. 使缓冲区只有四个元素可能是一个坏主意（只要`value`大于`0xF`）。您应该存储返回值并确保字符串没有被截断：

```
int n = swprintf(buff, sizeof buff, L"0x%x", value);

if (n >= sizeof buff) { /* truncation! */ } 
```

# html - JSONP 从外部文件读取文本

> ID：10824411
> 
> 赞同：2
> 
> 时间：2012-05-30T21:17:02.377
> 
> 标签：html, jsonp

请帮忙

我有 JSON 对象的外部链接，链接：[http](http://creativescream.com/html5ws/api/news) ://creativescream.com/html5ws/api/news 。现在我必须在我的网站上阅读 json，但我不能这样做。我曾经制作我的 json 文件，并且工作正常，但这不是我必须从外部链接读取 JSON 的优点。

我尝试了这段代码，但它不起作用：

```
 <script>
        $.getJSON("http://creativescream.com/html5ws/api/news",
        function(json){
            for(i=0; i<3; i++){
                var newsTitle = json.contents[i].title;
                var newsContent = json.contents[i].news;
                var newsAuthor = json.contents[i].author;
                var newsLink = json.contents[i].url;
                $("#latest_news").append("<h2>" + newsTitle + "</h2><br />");
                $("#latest_news").append("<p>" + newsContent + "</p><br /><a href='" + newsLink + "' target='_blank'>[Pročitaj opširnije]</a><br />");
                $("#latest_news").append("<span style='color: #000000; font-weight: bold;margin-left:10px; '>Author: " + newsAuthor + "</span><br /><br />");
            }
        });
    </script> 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:26:47.960

该站点没有返回 jsonp，jquery 也没有这样对待它。添加 ?callback=? 到 URL 的末尾，以便 jquery 将其视为 jsonp 并告诉服务器要注入响应的函数名称。

# ruby-on-rails - routes.rb 的问题

> ID：10824412
> 
> 赞同：0
> 
> 时间：2012-05-30T21:17:07.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我对 routes.rb 有疑问

在我的网络应用程序中，我有两个带有登录表单的页面

“/home/index”和“/users/index”

这是我的路线文件

```
 controller :home do
    get     'login'   => :index
    post    'login'   => :create
  end

  controller :users do
    get     'login'   => :index
    post    'login'   => :post_login
  end

  get "home/index"

  get "home/create"

  get "home/show"

  get "private/index"

  get "users/index"

  get "users/get_login"

  get "users/post_login"

  resources :users do
    collection do
      get  'get_login'
      post 'post_login'
    end
  end 
```

问题是，如果我在“home/index”中使用登录，它会执行主控制器的正确操作“create”，而如果我在“users/index”页面登录，它会再次执行“create”而不是“post_login” “， 为什么？

我在“/home/index”和“/users/index”中用于我的表单的代码是相同的......

这是简单的形式

```
<%= form_tag do %>

    <table>
        <tr>
            <td>
                <%= text_field_tag :name, params[:name] %>
            </td>
        </tr>
        <tr>            
            <td>
                <%= password_field_tag :password, params[:password] %>
            </td>
        </tr>
        <tr>
            <td>
                <%= submit_tag "Login" %>           
            </td>
        </tr>
<% end %>
        <tr>            
            <td>
                <%= link_to 'Registrazione', users_index_url %>             
            </td>
        </tr>

    </table> 
```

用户控制器代码：

```
class UsersController < ApplicationController

      def index

      end  

      def post_login
        redirect_to "http://www.google.it"
      end

    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:23:24.440

我将拥有用户，仅作为资源：

```
 controller :home do
    get     'login'   => :index
    post    'login'   => :create
  end

  get "/users" => 'users#index'
  post "/users" => 'users#post_login'

  get "home/index"

  get "home/create"

  get "home/show"

  get "private/index" 
```

在唯一的数组中，只需添加您正在使用的操作...

# php - 默认 PHP 配置文件

> ID：10824413
> 
> 赞同：1
> 
> 时间：2012-05-30T21:17:12.050
> 
> 标签：php

我正在寻找 PHP 5.2.17 的默认 php.ini 文件的副本。

有谁知道在哪里可以下载副本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:22:56.363

[http://php.net/releases/index.php](http://php.net/releases/index.php)

下载：PHP 5.2.17 (tar.bz2) PHP 5.2.17 (tar.gz)

*   [http://museum.php.net/php5/php-5.2.17.tar.bz2](http://museum.php.net/php5/php-5.2.17.tar.bz2)
*   [http://museum.php.net/php5/php-5.2.17.tar.gz](http://museum.php.net/php5/php-5.2.17.tar.gz)

它位于基本目录中（已提取）。

“php.ini-dist”或“php.ini-recommended”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:23:27.567

src 中有一个 php.ini-dist 和 php.ini-recommended，你可以试试：

[http://us.php.net/get/php-5.2.17.tar.gz/from/a/mirror](http://us.php.net/get/php-5.2.17.tar.gz/from/a/mirror)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T21:25:14.313

PHP版本可以在这里下载：http: [//php.net/releases/index.php](http://php.net/releases/index.php)

您还可以查看 GitHub 存储库的旧版本：[https ://github.com/php](https://github.com/php)

您正在寻找文件**php.ini-dist**或**php.ini-recommended**。

# xml - Clojure 中对 XML 文档的多次更改

> ID：10824419
> 
> 赞同：2
> 
> 时间：2012-05-30T21:17:56.180
> 
> 标签：xml, clojure, zipper

我正在为一个简单的项目尝试clojure（第一次）。我需要更新一个给定 csv 文件的 xml 树。我正在逐行读取 csv 文件，提取一些值，循环给定一些值的节点并插入具有另一个值的子节点。

这在我第一次插入项目时工作正常。我第二次得到 NullPointerException （没有痕迹）。我从从 insert-child 获得的返回值中查找根，并将该根节点传递给下一个循环。不知何故，第二次插入在该根元素上失败了。有人知道这里出了什么问题吗？或对此代码的一般反馈，因为这是我第一次尝试编写一些 Clojure。

```
(require 'clojure.string)
(require '[clojure.java.io :as io])
(require '[clojure.xml :as xml])
(require '[clojure.zip :as zip])
(require '[clojure.data.zip.xml :as zf])

(def business-object-config (xml/parse "BusinessObject.config"))
(def zipped (zip/xml-zip business-object-config ))

(defn sql-table-name [table-name]
  (second (re-matches #"(.*?)(Base|ExtensionBase|$)" table-name)))

(defn insert-sqlpropertyname-elem [loc name]
  (zip/root (zip/insert-child loc {:tag :SqlPropertyName :content [name]})))

(defn get-entity-node [table-name crm-name business-objects]
  (first (zf/xml-> business-objects :Entities
    :Entity [:CrmName (zf/text= (clojure.string/lower-case (sql-table-name table-name)))]
    :EntityItems
    :EntityItem [:CrmPropertyName (zf/text= (clojure.string/lower-case crm-name))])))

(defn process-line [line business-objects]
  (let [{crm-name 0 table-name 1 sql-name 6} (clojure.string/split line #";")
        node (get-entity-node table-name crm-name business-objects)]
    (insert-sqlpropertyname-elem node sql-name)))

(defn process-csv []
  (with-open
    [rdr (io/reader "input.csv")]
      (loop [lines (vec (take 5 (rest (line-seq rdr))))
             index (dec (count lines))
             boc zipped]
        (if (neg? index)
          boc
        (recur lines (dec index) (process-line (nth lines index) boc))))))

(spit "out.xml" (with-out-str (xml/emit (process-csv)) :pad true)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:16:34.473

好的，我不知道这是否是正确的方法，但是如果我在 insert-child 的结果上调用 root 而不是在 root 上调用 xml-zip 一切正常。不知道在每次突变后压缩整个结构是否是最佳做法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T23:10:54.733

不太有用的 NPE 通常意味着您从树的一侧跑到某个地方。

我怀疑您不需要`zip/root`在 insert-sqlpropertyname-elem 中调用。

# android - Android 订阅和 Google API

> ID：10824426
> 
> 赞同：7
> 
> 时间：2012-05-30T21:18:36.707
> 
> 标签：android, api, oauth-2.0, subscription

我正在尝试在我的应用程序中使用来自 Google Play 的新 Android 订阅系统（我的应用内计费已经正常工作）。我已成功完成订阅计费，但我现在想使用 android 文档 (http://developer.android.com/guide/market/billing/billing_subscriptions.html) 中所示的 google api 检索有关此订阅的信息.

我希望我的服务能够执行 API 调用来检索这些信息，但是我在身份验证方面遇到了问题（使用 oauth2）。到目前为止，这就是我所做的（在我的 php 服务中）：

```
require_once 'google-api-php-client/src/apiClient.php'

const SERVICE_ACCOUNT_NAME = 'email from services account access';
$key = 'content of my private key retrieved from services account access';    

$client = new apiClient();
$cred = new apiAssertionCredentials(SERVICE_ACCOUNT_NAME, array('https://www.googleapis.com/auth/androidpublisher'), $key);
$assertion = $cred->generateAssertion(); // This generate my encrypted JWT 
```

然后我尝试使用此 JWT 对象检索访问令牌。问题是，当我使用给定的访问令牌时，我收到开发人员帐户不拥有应用程序的错误，这是不正确的。

（我知道这不是这样做的方法，但我只是想使用 JWT 检索 access_token 以了解它为什么不起作用，如果我按照 google apis 文档中的指示进行操作，它也不起作用）。

我需要从服务器进行此 API 调用，因此无需涉及最终用户（无需手动同意）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T20:25:36.193

我遇到了同样的问题，最终发现目前服务帐户无法访问 Play API。

我不确定 Google 何时计划修复此问题，但您可以通过创建 Web 应用程序客户端 ID 并设置基本登录页面以首先使用新的 Web 应用程序客户端数据生成代码并转到 $client- 来解决此问题>createAuthUrl():

```
$client = new apiClient();

$key = file_get_contents(KEY_FILE);
$client->setClientId(CLIENT_ID);
$client->setClientSecret(CLIENT_SECRET);
$client->setRedirectUri(MY_WEBAPP_URL);
$client->setDeveloperKey($key);
$client->setScopes(array('https://www.googleapis.com/auth/androidpublisher'));

$authUrl = $client->createAuthUrl();
print "<a class='login' href='$authUrl'>Connect Me!</a>"; 
```

这应该会将您带到 Google 登录页面，您应该使用开发者帐户登录。当您授权应用程序时，它将带您回到您在设置客户端 ID 时定义的 Web 应用程序 URL，并将 CODE 作为获取参数。您可以使用生成令牌（更重要的是，刷新令牌），如下所示：

```
$url = 'https://accounts.google.com/o/oauth2/token';

$fields = array(
    'grant_type'=>'authorization_code',
    'code'=>$code,
    'client_id'=>CLIENT_ID,
    'client_secret'=>CLIENT_SECRET,
    'redirect_uri'=>MY_WEBAPP_URL
);

// cURL call to OAuth URL with $fields sent as POST 
```

这应该会返回带有刷新令牌的 JSON 数据。保存此令牌并在您需要生成访问令牌时使用它进行另一个调用。您将基本上运行与获取刷新令牌相同的代码，但使用不同的字段：

```
$fields = array(
    'grant_type'=>'refresh_token',
    'refresh_token'=>$refresh_token,
    'client_id'=>CLIENT_ID,
    'client_secret'=>CLIENT_SECRET,
); 
```

这将为您提供一个访问令牌，您可以使用它从以下 URL 获取购买数据： `https://www.googleapis.com/androidpublisher/v1/applications/[PACKAGE]/subscriptions/[SKU]/purchases/[PURCHASE_TOKEN]?access_token=[ACCESS_TOKEN]`

诀窍是获取刷新令牌，一旦你拥有了其余的应该非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:20:59.050

我有同样的问题。发生这种情况是因为您在 Google API 中授权不拥有该应用程序的用户并尝试获取低于您的应用程序的数据。

在这个主题中，它得到了很好的描述。[http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=2528691&topic=16285&ctx=topic](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=2528691&topic=16285&ctx=topic)

您应该通过 OAuth2 授权应用程序的所有者，然后使用 Google API 获取令牌。

# mysql - 如何针对单个父表设计多个子表？

> ID：10824428
> 
> 赞同：2
> 
> 时间：2012-05-30T21:18:42.023
> 
> 标签：mysql, database, database-design

如果有人能告诉我正确的方法是什么，我将不胜感激：

*   我有一个带有主键的父表`master_id`。
*   我有五个与 master_id 关联的子表，以一对多的关系记录语义上不同类型的数据（并且不适合抽象）
*   每个子表中唯一的公共字段是`master-id`（外键）、`created_by`（user_id）、`created_time`（时间戳）。

目的是在网页上按时间顺序发布与主 ID 关联的每个子行（想象一个论坛帖子样式显示），PHP 构建每个“帖子”（即行）略有不同，具体取决于子表（和因此可用的数据字段）。

我是否认为无论表结构如何都没有简单的方法来查询这个（并且最好在 PHP 中完成排序）？将 3 个公共字段垂直分区到与字段组合的单个表中是否有任何优势`table`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T22:32:57.133

这是一个非常难以解决的问题，我自己解决了这个问题。不幸的是，我没有一个好的答案。您可以使用 UNION 和各种类型的 JOIN，但您可能会严重影响数据库的性能。另外，您会遇到诸如您想要最近 30 个按时间顺序排列的条目之类的问题。您必须在每个子表中查询 30 个条目（可能总共 150 个条目）并在代码中对它们进行排序，因为您不知道哪些子表具有最近的 30 个条目。150 行只是为了拉 30，废话。

老实说，我发现实现这种事情的最好方法是有一个表，可能是你的主表，有专门用于你想从你的子表中显示的内容的列。例如，在您的主表中有类似于、、、、和的列（例如，`master_id`如果您`created_by`尝试实现 Facebook 的时间线之类的东西）。您可以在子表上设置触发器，以便当您将数据插入其中之一时，它也会自动填充主表中的数据。然后，当您显示时间线时，您只需查询主表，而完全不关心子表。`created_time``notification_text`

您的架构将类似于：

```
Table master
- master_id
- created_by
- created_time
- notification_text

Table child1
- id
- master_id
- data1 (used to generate notification_text in master)

Table child2
- id
- master_id
- data21 (collectively used to generate notification_text in master)
- data22 (collectively used to generate notification_text in master)
- data23 (collectively used to generate notification_text in master)

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:28:32.287

你做明星模特怎么样？它通常用于创建数据仓库，但是您可以尝试在您的解决方案中使用类似的东西。如果您对星型模型不熟悉，可以[在此处](http://en.wikipedia.org/wiki/Star_schema)查看更多信息。

希望能帮助到你。

# javascript - 使用java脚本在android上提交表单

> ID：10824429
> 
> 赞同：0
> 
> 时间：2012-05-30T21:18:42.690
> 
> 标签：javascript, android, iphone, html, safari

我在表单中使用以下`javascript`代码：`validate/submit`

```
function SendForm()  {
            var formlist = document.getElementById ("formlist");
            var buttonRadios = document.getElementsByName ("film");
            var selected = false;
            for (var i = 0; i < formationRadios.length; i++) {
                if (formationRadios[i].checked) {
                    selected = true;
                    break;
                }
            }
            if (selected) {
                 document.formlist.submit ();

            }
            else {
           //nothing to do
            }            
        } 
```

在 Html 方面：

```
<form  method="post" name="formlist"  action="films.php" OnChange="SendForm();">
...
<input type="radio" name="film" id="spman" value="spman" required="required"><label for="spman">Spider Man</label>
...

<select class="required" name="date" id="date">
<option selected value="13-05-2012">13 May 2012</option>
...
</select>
</form> 
```

***这适用于 android 下的 firefox beta，但不适用于 android 默认浏览器***。它也适用于 Firefox 桌面浏览器。

你能告诉我它有什么问题吗，我在萤火虫控制台中没有错误。

更新：

我终于找到了问题，它不是来自代码，而是来自 iPhone/iPad 错误，点击标签时检查单选框，以获取更多信息：

[http://v4.thewatchmakerproject.com/blog/how-to-fix-the-broken-ipad-form-label-click-issue/](http://v4.thewatchmakerproject.com/blog/how-to-fix-the-broken-ipad-form-label-click-issue/)

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:26:51.617

从 Android 2.2 开始，内置浏览器不支持通过`document`对象（Like `document.name_of_your_form.submit()`）访问表单。尝试以下可能性之一：

`id`属性：

HTML

```
<form id="formlist"> 
```

JavaScript

```
var formlist = document.getElementById("formlist"); 
```

`name`属性

HTML

```
<form name="formlist"> 
```

JavaScript

```
var formlist = document.forms["formlist"]; 
```

或者

```
var formlist = document.formlist; 
```

# c# - 序列化和反序列化如何在内部工作？

> ID：10824431
> 
> 赞同：1
> 
> 时间：2012-05-30T21:18:57.713
> 
> 标签：c#, .net, json, json.net

我有很多遗留代码`json`是通过使用 for 循环手动解析的。这`O(n)`通常需要时间。我知道`json.net`在这方面会更好，`time`但`space`深入了解它是如何工作的，这将帮助我做出明智的决定，是否值得努力实际继续并投入时间和人力将所有内容转移到 json.net。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T23:14:08.007

为了将您的问题解释为更笼统的问题，假设您正在寻找有关为各种场景选择哪种 JSON 序列化实现的建议。

我知道这个问题的三个明显答案：

*   牛顿软件 JSON.NET
    *   提供丰富的功能和出色的性能
*   服务栈文本
    *   提供简单性和出色的性能
*   BCL JsonSerializer
    *   避免了第 3 方库依赖，但速度明显较慢

如果您不关心 3rd 方库依赖项，请选择第一个选项，因为它会为您提供性能和功能。如果您不需要大量功能，请评估 ServiceStack.Text 是否满足您的需求（如果不确定，请使用 JSON.NET）。在任何其他情况下，坚持你所拥有的。

此外，在您知道该特定区域是性能瓶颈（或以其他方式需要更换，例如因为它是一个维护问题）之前，不要花时间通过替换您的 JSON 代码来提高您的代码速度。如果您正在考虑替换代码以获得性能，请隔离一些方法来使用替代实现或库针对类似场景对当前代码进行分析和基准测试，以避免基于假设做出决定。

最后，除非您特别计划能够修改它的来源（或者需要能够理解它），否则了解它在内部是如何工作的不应成为您决策过程中的一个因素。

# python - 如何在 Flask 应用程序中收集性能指标？

> ID：10824438
> 
> 赞同：5
> 
> 时间：2012-05-30T21:19:30.357
> 
> 标签：python, flask

收集对烧瓶应用程序发出的所有 HTTP 请求的指标的最佳方法是什么。

我想测量的是：

*   延迟 - 每个请求的时间。
*   速率 - 每分钟的请求数等。
*   No of failures - 如果有失败，有多少等。

此外，我想将对可变路径的请求分组为一个。例如，对路由“/resource/”的所有请求都应针对名为“RESOURCE”的度量标准进行测量，而不是针对每个资源单独进行测量。

我目前计划通过编写一个装饰器来做到这一点。缺点是我需要为每种方法添加装饰器。Flask 有没有办法为我提供自动测量这些的钩子。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T05:18:49.633

查看[`flask.Flask.before_request`](http://flask.pocoo.org/docs/api/#flask.Flask.before_request)和[`flask.Flask.teardown_request`](http://flask.pocoo.org/docs/api/#flask.Flask.teardown_request)装饰器的文档。您需要一些简单*快速*的东西来将您的指标发送到 - 查看[石墨](http://graphite.wikidot.com/)和[比例尺](https://github.com/Greplin/scales)以获取合适的后端示例。

一旦你有你的日志聚合后端，那么注册两个函数以在每个请求之前和之后执行就很简单了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-14T15:24:34.900

查看[New-Relic](https://newrelic.com/docs/python/new-relic-for-python)。它支持烧瓶，并会给你你想要的措施（和更多）。

# r - 如何安装和管理多个版本的 R

> ID：10824440
> 
> 赞同：3
> 
> 时间：2012-05-30T21:19:47.890
> 
> 标签：r, ubuntu, installation

我正在使用具有旧版本 R 的机器。我在机器上没有 root 访问权限，并且系统管理员正在休假。

所以我的问题是，我如何安装和管理（尤其是软件包）最新版本的 R？显然我需要下载 R 包并安装它，但社区提供的一些详细说明会有所帮助。

这里是菜鸟。帮助将不胜感激。谢谢

# java - 这个方法是什么意思？

> ID：10824441
> 
> 赞同：0
> 
> 时间：2012-05-30T21:19:52.980
> 
> 标签：java, collections

```
Comparator<? super E> comparator() 
```

此方法在 Sorted Set 接口中声明。

超级是什么意思？

上述方法与通用方法和带有通配符参数的方法有何不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:43:42.587

这意味着比较的类型可以是当前类型的超类型。

例如。您可以拥有以下内容：

```
static class A {
}

static class B extends A {
}

public static void main(String[] args) {

    Comparator<A> comparator = new Comparator<A>() {
        public int compare(A a1, A b2) {
            return 0;
        }
    };

    // TreeSet.TreeSet<B>(Comparator<? super B> c)
    SortedSet<B> set = new TreeSet<B>(comparator);

    // Comparator<? super B> comparator()
    set.comparator();
} 
```

在这种情况下，`A`是 的超类型`B`。

希望这有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T21:21:40.930

A`SortedSet`需要有一些规则来确定排序。`Comparator`就是这些规则的执行。该接口提供了一种获取对它的引用的方法，以便您可以将其用于其他目的，例如创建另一个使用相同排序规则的集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T21:22:12.867

从[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html#comparator%28%29)：

“返回用于对该集合中的元素进行排序的比较器，如果该集合使用其元素的自然排序，则返回 null。”

:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T22:14:16.030

答案在接口声明中：`public interface SortedSet<E> extends Set<E> { ...`

这意味着任何`implements` `SortedSet`应该指定它们将使用哪种*类型的类。*例如

```
class MyClass implements SortedSet<AnotherClass> 
```

这将产生（使用eclipse），一堆方法，如

```
 public Comparator<? super AnotherClass> comparator()
{
    return null;
}

public boolean add( AnotherClass ac)
{
    return false;
} 
```

`AnotherClass`正如 Paul Vargas 指出的那样，这当然适用于所有子类。

您可能缺少的另一个方面是 Comparator 也是一个接口：`public interface Comparator<T>`. 所以你返回的是这个的实现。

出于兴趣，使用 Comparator 接口的另一种有用方法是将其匿名指定为`Arrays.sort(Object[] a, Comparator c)`方法的一部分：

如果我们有一个 Person 类，我们可以使用此方法对年龄和姓名进行排序，如下所示：

```
 Person[] people = ....;
// Sort by Age
    Arrays.sort(people, new Comparator<Person>()
    {
        public int compare( Person p1, Person p2 )
        {
            return p1.getAge().compareTo(p2.getAge());
        }
    });

// Sort by Name
    Arrays.sort(people, new Comparator<Person>()
    {
        public int compare( Person p1, Person p2 )
        {
            return p1.getName().compareTo(p2.getName());
        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T22:22:19.483

这里的“超级”意味着该方法不需要为 E 返回一个比较器。它可能会为 E 的任何超类返回一个比较器。所以，为了具体化，如果 E 是字符串，这个方法可以给你一个更通用的对象的比较器。

泛型方法将声明它自己的新泛型参数。此方法仅引用由类声明声明的泛型参数`SortedSet<E>`E。通用方法不太常见。它们通常是静态的，例如 Arrays 方法

```
public static <T> List<T> asList(T...) 
```

在这里，T 仅在此方法中声明和使用。它表明返回列表中的对象类型与 vararg 参数中的对象类型相同。

我不确定通配符参数的确切定义。? 是通配符。当您获得通配符参数时的一般模式`List<?>`是您可以从中取出对象并将它们转换为 Object 但您不能放入任何东西。

# css - 我的响应式网站在移动设备上看起来不正确？

> ID：10824446
> 
> 赞同：0
> 
> 时间：2012-05-30T21:20:30.320
> 
> 标签：css, html, mobile, responsive-design, fluid-layout

我遵循了一个很棒的教程来设计响应式导航菜单。在我的台式电脑上测试菜单时，一切看起来都很棒。然后作为测试，我在手机上查看了该网站 - Sony Ericsson Aino（我知道是蹩脚的），看起来菜单无法获取 CSS（style.css）。奇怪，因为我已经正确链接了我的样式表。我不确定这是否是我的手机，但谁能看到我在这里做错了什么？访问 www.testing123.co.za 。问题是我没有任何平板电脑、机器人或其他移动设备来查看网站，所以我不知道网站（菜单）是否在这些设备上运行。

你需要我在这里复制CSS吗？否则，您始终可以对其进行源代码处理。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T03:24:52.110

艾诺使用[NetFront浏览器](http://www.access-company.com/products/mobile_solutions/netfrontmobile/browser/index.html)3.5

此手机支持的 ​​CSS/HTML 标准在此处列出：http: [//dl-www.sonymobile.com/cws/download/1/708/159/1277364112/DW-88004-dg_web_browser_nf3_r31a.pdf](http://dl-www.sonymobile.com/cws/download/1/708/159/1277364112/DW-88004-dg_web_browser_nf3_r31a.pdf) [参见第 12 页]

我建议您从一些非常基本的 CSS 开始并进行测试，然后继续添加到您的样式表中，直到它不起作用为止。

注意：较旧的 NetFront 浏览器（低于 3.5 版）将在媒体查询后忽略样式表的其余部分。

另一方面，您的样式表具有从大到小列出的媒体查询。从移动优先的角度来看，您应该颠倒这些，所以最小的是第一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:29:38.880

您正在使用`nav`带有 XHTML 1.0 DOCTYPE 的 HTML5 元素。改变：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

至

```
<!DOCTYPE html>
<html> 
```

# hadoop - mahount 伪分布中的 RowSimilarityJob 和 ItemSimilarityJob 是否分布？

> ID：10824449
> 
> 赞同：0
> 
> 时间：2012-05-30T21:21:11.240
> 
> 标签：hadoop, distributed-computing, mahout

有人知道 mahout 中的 ItemSimilarityJob 和 RowSimilarityJob 是伪分布式作业还是完全分布式作业？我的意思是它们只是将输入拆分到多个节点，或者它们是所使用的相似性度量的“真实”分布式实现。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:20:08.267

它们确实是分布式的，是的。

# c++ - 检索数据结构对齐信息

> ID：10824450
> 
> 赞同：3
> 
> 时间：2012-05-30T21:21:19.877
> 
> 标签：c++, c, visual-c++, gcc, data-structures

大多数“通用”C/C++ 编译器（用于 gcc/g++、通用智能手机的编译器、Visual C++ 等）中是否有可用的机制来检索或生成[数据结构对齐](http://en.wikipedia.org/wiki/Data_structure_alignment)信息？（请注意，该术语包括对齐、填充和排列。）我希望无需在目标平台上运行任何 C/C++ 代码即可获得此信息。

（例如，这些数据是否可以通过 DWARF/DWARF2 在支持它的编译器上可靠地获得？）

**更新：**是的，可以将[pahole](http://lwn.net/Articles/206805/)与 gcc 一起使用。（我想知道这是否适用于 mingw32，如果可以，用于输出 DWARF2 数据的“-g”标志是否会修改代码生成。）不幸的是，gcc 不是我必须支持的唯一编译器。（Visual C++ 是最有可能的第二个候选者。）

**更新 2：**对于 Visual C++ [，这](https://stackoverflow.com/questions/2138890/layout-of-compiled-objects)看起来很有希望。我相信在 Visual C++ 和 g++ 之间，涵盖了 Windows、Linux、Mac OS X、iOS 和 Android NDK。

**更新 3：**仅供参考，我获取此类信息的主要原因是避免在 CPU 受限条件下为高性能加载而反序列化。如果您能想到比编写一些使用数据结构对齐信息的自定义工具更好的方法来实现这一点，请随时发布。我的投票手指很痒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:07:07.703

我不确定其他编译器，但在 VC 中，您可以强制 struct 成员与 pragma 对齐。事实上，如果您正在编写使用结构的 IPC 机制，您*应该*以编程方式强制对齐两个进程使用的任何声明。这样，如果任一应用程序偏离标准结构成员对齐方式，您就可以消除潜在的错误。

```
#pragma pack(push, 1) // forces 1 byte alignment

typedef struct
{
    int sample;
    char sample2;
}FIVE_BYTES;

#pragma pack(pop) // returns to whatever alignment was in use prior to the push 
```

[有关详细信息，请参阅 MSDN](http://msdn.microsoft.com/en-us/library/2e70t5y1%28v=vs.80%29.aspx)

# jquery - 剑道 ui 工具提示位置

> ID：10824452
> 
> 赞同：1
> 
> 时间：2012-05-30T21:21:40.083
> 
> 标签：jquery, kendo-ui

我正在使用剑道 ui 进行网页设计，目前我被困在验证工具提示的位置上。奇怪的是，对于任何下拉菜单，它都出现在我希望它出现的位置，即在输入下方，但对于纯文本输入，验证工具提示出现在输入元素旁边。这使我的页面看起来不一致。我已经在剑道文档中搜索了工具提示，但它没有我希望的那么详细，也没有提供太多帮助。

任何想法如何确保我的验证工具提示，无论它应用的元素类型如何，都出现在正在验证的字段下方？

有关更多说明，请参阅屏幕截图：

![在此处输入图像描述](../Images/051821040844a9eaaaaa7c365ba9d1cd.png)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-19T14:05:48.747

我找到的最佳解决方案是覆盖 CSS .k-tooltip-validation 并将其放置在您想要的任何位置，如下例所示：

```
.k-tooltip-validation {
        margin-top: -40px !important; 
} 
```

希望能帮助到你！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T11:22:19.723

这实际上取决于页面的标记和样式。添加`display: block`到输入字段可能会解决问题，或者如果您使用`float`s，则将 a`clear:left`和必要的添加`margin`到验证消息中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-10T23:30:39.150

**你可以试试这样的。**

我遇到了很多麻烦，因为我可以向 validate 事件添加一个回调处理程序，但它不是只在帖子上调用模糊事件，我希望内联实时显示在顶部的摘要中。

首先禁用 validateOnBlur 以便不会弹出默认内容。

```
 var validatable = $("form").kendoValidator( { 
    validateOnBlur:false,
    ...
    }); 
```

**接下来，您可以添加自己的验证回调。**

正如我所指出的，这不会被称为模糊。

```
 validateOnBlur:false,
        validate: function (e) {
          ....
        }, 
```

**调用 validate on blur 使字段更新为蓝色。**

由于我们禁用了此功能，因此请确保它在表单发布和模糊中都被调用。

```
 $("#input, textarea").on("blur", function (validator) {
        validator.validatable.validate();
    }.bind(null,this));

      // valid on submit where you like
    submit: function () {
        if (this.validatable.validate()) {
            $("#form1").submit();
        }
    }, 
```

**总结很容易做到。我将它们放在页面顶部的带有类错误部分的控件中**

我复制错误并将它们放在页面上的其他地方的摘要中。我还使用一些 jquery 在标签前放了一个小星星。请注意**next()**是具有错误文本的跨度。

```
 validate: function (e) {
            $(".k-invalid").next().each(function () {
                $(".errors-section").append($(this).text()).show();
                $(this).text("");
            });
        }, 
```

这对我有用。

# python - 如何使用 ndb 获取数据存储条目客户端的唯一标识符？

> ID：10824454
> 
> 赞同：0
> 
> 时间：2012-05-30T21:21:49.870
> 
> 标签：python, google-app-engine, app-engine-ndb

现在我正在使用 ndb ，因为它已经退出了实验阶段。我需要重新考虑几件事，而我遇到的一件事是为模型实体客户端获取唯一标识符。我如下抓取实体并将它们发送到客户端

```
questions = Questions.query()
self.values_for_client()["questions"] = questions 
```

然后客户端我遍历每个条目，然后我设置一个链接以进一步调查模型条目。

```
{% for question in questions %}
    <tr>
        <td><a href = "/view_details/{{question.key}}">View</a></td>
    </tr>
{% endfor %} 
```

我曾经得到一个像**asdfer234234===**这样的唯一标识符，但现在我从 {{question.key}}得到像**Key('Questions',%203)这样的东西。**然后我会捕获这个唯一标识符并像使用它一样使用它

```
question_key = Key(str(cgi.escape(key)))
question = Questions.all().filter("__key__ =", question_key).get() 
```

如何使用 ndb 复制这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:33:53.233

你想要 question.key.urlsafe()

[https://developers.google.com/appengine/docs/python/ndb/keyclass#Key_urlsafe](https://developers.google.com/appengine/docs/python/ndb/keyclass#Key_urlsafe)

# iphone - 新 iphone - 如何从开发者设备中删除应用程序

> ID：10824460
> 
> 赞同：0
> 
> 时间：2012-05-30T21:22:26.953
> 
> 标签：iphone, ios, xcode4.3

非常简单的问题。尝试谷歌搜索

我刚买了一部新的 iPhone 4S 并从备份中恢复。开发应用程序未显示，但现在正在将应用程序部署到设备，旧应用程序显示（例如，显示旧的 display.png）。有没有办法从 iPhone 中完全删除它？类似于`rm -rf`在模拟器中？如果我进入 Organizer，我可以看到我可以“删除”该应用程序，但它显然存在错误的 default.png（并且可能是错误的 sqlite db）。我怎样才能完全删除它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:47:09.527

Well, you have tried all the way and other answer describe you how to delete the app from device, `*and still if you are getting the same issue*`, **then** i would suggest you to use following alternate way :

**1 ) Connect your device to your iTunes**

**2 ) Click on Apps in your LIBRARY section**

**3 ) Delete your app by right click**

It will surely help you. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:28:30.023

如果您只是从设备中删除该应用程序，那么您只需像其他任何应用程序一样删除它，您可以通过管理器知道，或者长按并单击图标上的“x”。

如果您在替换资源后仍然存在资源问题并且您正在直接构建到设备，则可能需要从磁盘中删除临时目录。

用于构建的临时目录位于您的主目录中：

〜/库/开发人员/Xcode/DerivedData。

删除应用程序的临时目录，这将保证从新构建中删除所有旧资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T22:37:36.167

按住设备上的应用程序图标，然后单击 X 按钮并选择删除。

然后在 XCode 中，导航到 Product 菜单并选择 Clean。

在您的设备上重新构建应用程序，一切都应该正常工作（前提是您按此顺序执行这些步骤）。:)

希望这可以帮助！

# hadoop - Hadoop：未设置 JAVA_HOME

> ID：10824462
> 
> 赞同：2
> 
> 时间：2012-05-30T21:22:45.157
> 
> 标签：hadoop, java-home, appletviewer

像世界上的其他人一样，我正在关注[这个 hadoop 教程](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)。我到了格式化HDFS的地步，我得到了这个：

```
user@linux01:~$ sudo $HADOOP_INSTALL/bin/hadoop namenode -format
Error: JAVA_HOME is not set. 
```

这很有趣，我在 /etc/profiles 中设置了 JAVA_HOME。

```
user@linux01:~$ tail -n 4 /etc/profile
export JAVA_HOME=/usr/local/jdk1.6.0_32/bin
export JDK_HOME=$JAVA_HOME
export PATH=$PATH:/usr/local/jdk1.6.0_32/bin
export HADOOP_INSTALL=/usr/local/hadoop/hadoop-1.0.3 
```

我是不是搞砸了？

```
user@linux01:~$ echo $JAVA_HOME
/usr/local/jdk1.6.0_32/bin
user@linux01:~$ ls $JAVA_HOME
appletviewer  extcheck       jar        javac    and so forth... 
```

似乎工作。也许它*绝对必须*在我的 hadoop-env.sh 中设置？

```
# The java implementation to use.  Required.
export JAVA_HOME=$JAVA_HOME 
```

懒惰，是的，但不管有没有这个评论，我仍然得到“JAVA_HOME is not set”。我的想法不多了。有人看到我缺少的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:52:01.373

谢谢@Chris Shain 和@Chris White 的提示。我以 su 的身份运行 hadoop，而 su 不会自动知道我设置的环境变量。我以我的 hadoop 用户身份登录（我已将 hadoop 安装目录分配给该用户），并且能够格式化 hdfs。

次要问题：当我尝试启动 Hadoop 时，NameNode 和 JobTracker 启动成功，但 DataNode、SecondaryNameNode 和 TaskTracker 启动失败。我挖了一点。NameNode 和 JobTracker 是通过 hadoop-daemon.sh 启动的，而 DataNode、SecondaryNameNode 和 TaskTracker 是通过 hadoop-daemon*s*.sh 启动的。这里的解决方案是在 conf/hadoop-env.sh 中正确设置 JAVA_HOME。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T08:09:12.500

首先是一般注意事项：如果您正在使用 CYGWIN，请以管理员身份登录到您的系统。

我在执行 namenode -format 时遇到了 Java_Home 未找到的问题。以下是我所做的修复它

1.  在文件夹名称中没有空格的位置从程序文件中重新安装 JDK。例如：D:/Installations/JDK7

2.  进入hadoop（1.2.1版）安装的bin文件夹并编辑“hadoop”配置文件。这是没有文件扩展名的文件。

3.  搜索 java_home 变量

4.  就在变量 $JAVA_HOME 的第一个实例之前，我添加了这一行：

导出 JAVA_HOME=/cygdrive/D/Installations/JDK7/

## 这是它现在的样子：

```
fi

export JAVA_HOME=/cygdrive/D/Installations/JDK7/

# some Java parameters
if [ "$JAVA_HOME" != "" ]; then
  #echo "run java in $JAVA_HOME"
  JAVA_HOME=$JAVA_HOME
fi 
```

* * *

注意：/cygdrive/ 必须在您的 jdk 安装路径之前。不需要驱动器号后的冒号，路径应该有正斜杠。

此外，我确实在系统环境属性中设置了 JAVA_HOME。只是为了双重肯定。

运行程序，它现在就可以工作了。

> 块引用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-15T19:02:48.880

尝试使用短名称以避免路径中出现空格。

"C:\Program Files" 应该具有短名称 C:\Progra~1（您可以使用 DOS dir 命令或在文件资源管理器的地址栏中输入它来验证它）。

以这种方式设置您的 JAVA_HOME：

导出 JAVA_HOME="/cygdrive/c/Progra~1/Java/jdk1.7.0_10"

用户2540312回答

# bash - 为什么我的代码没有按我想要的那样工作？

> ID：10824465
> 
> 赞同：1
> 
> 时间：2012-05-30T21:23:01.573
> 
> 标签：bash

我有这个代码：

```
total=0;
ps -u $(whoami) --no-headers | awk {'print $1'} | while read line; 
                          do vrednost=$(pmap $line | tail -n1 | column -t | cut -d" " -f3 | tr "K" " "); 
                          total=$(( vrednost + total ))
                          echo $total 
                          done
                          echo total: $total 
```

如您所见，我的代码总结了我所有进程的使用情况。当我每次都回显我的总数时，它工作正常，但最后......当我希望总数成为一个值（`echo total: $total`）时，它仍然为零。但在 (in `while`) 之前具有正确的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:35:56.853

[BASH 常见问题解答 #24：“我在管道中的循环中设置变量。为什么它们在循环终止后消失？或者，为什么我不能通过管道读取数据？”](http://mywiki.wooledge.org/BashFAQ/024)

```
#!/bin/bash
while read ...
do
  ...
done < <(ps ...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T23:44:34.057

好吧，挑挑拣拣。您可以在 BASH 或 AWK 中执行此操作，但不要同时执行。您已经看到了一个 BASH 示例，这是一个 AWK 示例：

```
ps  -e -o user -o vsz | awk -v USER="$(whoami)" '
    BEGIN {TOTAL = 0}
    END {print "Total is " TOTAL}
    {
        if ($1 == USER) {
            TOTAL += $2
        }
    }
' 
```

awk 就像一种编程语言，它假设一个循环（如`perl -n`）并处理文件中的每一行。每个字段（通常由空格分隔）都有一个`$`变量。第一个是`$1`，第二个是`$2`，等等。

该`-v`选项允许我在`USER`运行 awk 之前定义一个 awk 变量（在本例中）。

该`BEGIN`行是我在运行`awk`脚本之前想要做的。在这种情况下，初始化`TOTAL`为零。（注意：这实际上没有必要，因为未定义的变量会自动赋予零值）。这`END`条线是我之后想要做的。在这种情况下，打印出我的总数。

因此，如果第一个字段 ($1) 等于我的用户，我会将第二个字段 (vsize) 添加到我的总数中。

所有 awk 程序都被包围，`{...}`并且它们通常有单引号，以防止 shell 插值`$1`等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T22:27:24.457

让我们减少您需要的额外进程的数量:)

```
declare -i total=0
for size in $( ps -u $(whoami) --no-header -o vsz ); do
    total+=$size
done
echo $total 
```

首先，使用各种选项`ps`来生成所需的进程大小列表（以千字节为单位）。使用 bash for 循环遍历该列表，在使用“整数”属性声明的参数中保留运行总计，以便于算术。所需的金额现在在 中`total`，可用于您需要的任何用途。总和包括`ps`进程本身使用的内存。

使用`while`（Dennis 的建议）并避免流程替换（William 的建议）：

```
ps -u $(whoami) --no-header -o vsz | { 
  while read -r var; do
    ((total+=$var))
  done
  echo $total
} 
```

（对于真正的单线，这是我从[https://stackoverflow.com/a/453290/1126841](https://stackoverflow.com/a/453290/1126841)`dc`借来的命令：

```
ps -u $(whoami) --no-header -o vsz | dc -f - -e '[+z1<r]srz1<rp' 
```

这个总和包括`ps`and`dc`命令本身使用的内存。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T21:33:37.603

尝试这个

```
#!/bin/bash
total=0;
for line in `ps -u $(whoami) --no-headers | awk {'print $1'}`; 
do 
  vrednost=$(pmap $line | tail -n1 | column -t | cut -d" " -f3 | tr "K" " "); 
      total=$(( $vrednost + $total ))
      echo $total 
done
echo "total: $total" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T14:09:00.487

Ignacio 的回答很好，但过程替换不可移植。还有一个更简单的解决方案。您需要在计算它的同一子shell中回显总数：

```
... | { while read line; do ...; done; echo total: $total; } 
```

# java - 编组/解组基于 2 个不同模式的 2 个不同类

> ID：10824466
> 
> 赞同：3
> 
> 时间：2012-05-30T21:23:09.230
> 
> 标签：java, xml, spring, jaxb2

我试图在 spring beans 配置文件中配置一个 jaxb2Marshaller，但我对 Spring 和 JAXB 很陌生，所以我可能会以错误的方式去做。

我想要实现的是同一个 bean，它将编组/解组基于 2 个不同模式的 2 个不同类。也许那是不可能的，因为当我配置并运行我的测试时，它们在配置中的第二类（AccountResponse）中失败了。

这是 XML 配置：

```
<bean id="jaxb2Marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="marshallerProperties">
        <map>
            <entry key="com.sun.xml.bind.namespacePrefixMapper">
                <bean id="NamespacePrefixMapperImpl" class="org.lp.soa.controller.xml.LpsNamespacePrefixMapper" />
            </entry>
        </map>
    </property>
    <property name="classesToBeBound">
        <list>                              
            <value>org.lp.soa.controller.data.request.AccountRequest</value>
            <value>org.lp.soa.controller.data.response.AccountResponse</value>
        </list>
    </property>     
    <property name="schemas">
        <list>
        <value>classpath:schema/AccountRequest.xsd</value>
        <value>classpath:schema/AccountResponse.xsd</value>
        </list>
    </property>
</bean> 
```

如果我从配置中注释掉**AccountRequest.xsd**值，然后再次运行我的测试，第二类 (AccountResponse) 的编组/解组，它们都通过了，如果我取消注释它，我得到错误：org.xml.sax.SAXParseException ：cvc-elt.1：找不到元素“accountResponse”的声明。

我是不是走错路了？难道不能用两个模式处理两个类吗？

谢谢，约夫。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-29T07:40:56.993

> “如果我从配置中注释掉 AccountRequest.xsd 值，然后再次运行我的测试，则第二类 (AccountResponse) 的编组/解编组都通过了，如果我取消注释它，我会收到错误：org.xml.sax。 SAXParseException：cvc-elt.1：找不到元素“accountResponse”的声明。”

听起来 SchemaFactory.newSchema() 创建的 Schema 对象只处理列表中的第一个 xsd。

如果您在同一个命名空间（targetNamespace？）中有多个模式文件，那么可能是这个错误导致了麻烦：

[https://issues.apache.org/jira/browse/XERCESJ-1130](https://issues.apache.org/jira/browse/XERCESJ-1130)

我为解决这个错误所做的工作是创建一个包含其他 xsd 文件的父 xsd 文件，然后使用 LSResourceResolver 实现在 xml 配置中设置“schemaResourceResolver”属性（参见[http://blog.frankel.ch/xml-验证-with-importedincluded-schemas](http://blog.frankel.ch/xml-validation-with-importedincluded-schemas)例如）..

在您的 xml 配置中添加以下内容：

parent.xsd 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
           xmlns="http://www.yourdomain.com/FIXED/EXAMPLE"
           targetNamespace="http://www.yourdomain.com/FIXED/EXAMPLE"
           elementFormDefault="qualified"
           version="1.000"
           id="some_id">
    <xs:include schemaLocation="AccountRequest.xsd"/>
    <xs:include schemaLocation="AccountResponse.xsd"/>
</xs:schema> 
```

在您的 xml 配置中，将 schemas 属性更改为：

```
<property name="schemas">
        <list>
        <value>classpath:schema/parent.xsd</value>
        </list>
</property> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:47:04.300

Try using [MOXy](http://wiki.eclipse.org/EclipseLink/Examples/MOXy/EclipseLink-OXM.XML). You could have a schema mapping defined by annotation, and the other mapping configured in a xml file.

As far as I know, XStream doesn't provide xml validations, so you could try to do a schema validation before unmarshal. Using JAXB you could validate required elements/attributes using `@XmlElement/@XmlAttribute(required=true)` annotation.

# iphone - 如何相对于用户握持设备的方式绕 Y 轴旋转？

> ID：10824468
> 
> 赞同：5
> 
> 时间：2012-05-30T21:23:18.347
> 
> 标签：iphone, ios, accelerometer, gyroscope, core-motion

我记得在 WWDC 上，有一个演讲展示了 OpenGL ES 中的一个茶壶，它随着设备的移动而旋转。茶壶似乎在太空中静止不动。

当应用程序启动时，茶壶从特定位置开始。然后当设备旋转时，茶壶也会旋转以在空间中静止不动。

在这次演讲中，他们提到我们必须获得“参考框架”，例如在应用启动时，它告诉我们用户最初是如何握住设备的。

例如，这是加速度计轴：

![加速度计](../Images/9b964b1a61c1201d28faf87adaba0ef7.png)

我想知道围绕 Y 轴的旋转，但与用户握持设备的方式有关。因此，当用户将其直立并围绕 Y 旋转时，我需要知道该旋转值。

我认为关键是从读数中消除重力？我还用陀螺仪瞄准 iPhone 4 / 4S，但我认为 CoreMotion 会自动对它们进行传感器融合。

我怎么知道用户围绕 Y 轴旋转了多少设备？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:59:14.237

从你的另一个问题[为什么CoreMotion从未调用过这个CMDeviceMotionHandler？](https://stackoverflow.com/questions/10832650/why-is-this-cmdevicemotionhandler-never-called-by-coremotion)我知道您在 iOS 4 上工作 - iOS5 中的情况略有变化。一般来说，陀螺仪数据或更好的加速度计和陀螺仪数据传感器融合（如 DeviceMotion 中所做的）是获得正确结果的最佳方法。

因此，如果您启动并运行它，您将需要使用[CMAttitude 的 multiplyByInverseOfAttitude](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMAttitude_Class/Reference/Reference.html#//apple_ref/occ/instm/CMAttitude/multiplyByInverseOfAttitude:)方法来获取所有相对于您的参考帧的 CMDeviceMotion 结果。只需将第一个 CMAttitude 的引用存储在类成员中，然后在所有后续调用中使用它调用 multiplyByInverseOfAttitude。那么 CMDeviceMotion.attitude 的所有成员都将参考这个参考框架。

为了获得围绕 Y 轴的旋转，第一种方法是采用欧拉角，即[CMAttitude.roll](http://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMAttitude_Class/Reference/Reference.html#//apple_ref/occ/instp/CMAttitude/roll)。如果您只需要跟踪小动作，这可能没问题。如果动作更广泛，您将遇到关于[云台锁定](http://en.wikipedia.org/wiki/Gimbal_lock)的麻烦。然后你需要像四元数运算这样的高级技术来获得稳定的结果，但这听起来像是一个自己的问题。

# jquery - Asmx Web 服务返回 xml 而不是 json，试图删除 从服务输出

> ID：10824471
> 
> 赞同：9
> 
> 时间：2012-05-30T21:23:33.597
> 
> 标签：jquery, json, jqgrid, asmx

在过去的 3 个小时里，我一直在寻找 100 个链接，例如将 scriptfactory 添加到 webconfig、3 个错误、设置内容类型等。

我无法弄清楚实际上是什么错误。

环境：在 .net 4.0 上运行的服务 在 .net 4.0 上运行的 Web 应用程序

要求：我需要将 jqGrid 与 asmx Web 服务绑定，该服务将 json 作为字符串返回给我。 **Web 服务文件包含以下代码。**

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
[ScriptService]
public class SampleService : System.Web.Services.WebService
{
    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string GetJsonServerProcess()
    {
        int memory = 1;
        string json = string.Empty;
        var obj = (System.Diagnostics.Process.GetProcesses().Where(r => r.WorkingSet64 > memory).Select(p => new { p.ProcessName, p.WorkingSet64 }).ToArray());
        json = Lib.ToJSON(obj);
        return json;
    }
} 
```

**Javascript如下**

```
<script type="text/javascript">
    $(document).ready(function () {
        jQuery("#jqgajax").jqGrid({
            ajaxGridOptions: { type: "POST", contentType: 'application/json; charset=utf-8'  },
            url:'http://localhost:1092/SampleService.asmx/GetJsonServerProcess',
            datatype: "json",
            data: "{}",
            colNames: ['ProcessName', 'WorkingSet64'],
            colModel: [
                        { name: 'ProcessName', index: 'ProcessName', width: 55 },
                        { name: 'WorkingSet64', index: 'WorkingSet64', width: 90 }
                    ],
            rowNum: 10,
            width: 700,
            rowList: [10, 20, 30],
            sortname: 'invdate',
            viewrecords: true,
            sortorder: "desc",
            caption: "New API Example"
        });
    });
</script> 
```

**HTML如下**

```
<table id="jqgajax">
</table>
<div id="jqgajax">
</div> 
```

单击调用按钮时的 Web 服务输出

```
<string xmlns="http://tempuri.org/">
[{"ProcessName":"Dropbox","WorkingSet64":22736896},
 {"ProcessName":"fdhost","WorkingSet64":1941504},
 {"ProcessName":"IntelliTrace","WorkingSet64":39276544}
]
</string> 
```

请建议我缺少什么。 `<string xmlns="http://tempuri.org/">`标签激怒了我。我假设这些标签不会让我的网格能够绑定。

**更新：**

**ASMX 服务现在如下所示。**

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
[ScriptService]
public class SampleService : System.Web.Services.WebService
{
    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public List<demo> GetJsonServerProcess()
    {
        List<demo> test = new List<demo>();

        for(int i=1;i<=10;i++)
            test.Add(new demo { ProcessName = string.Format("Sample {0}",i), WorkingSet64 = i });

        var re = test;
        return re;
    }
}

public class demo
{
    public string ProcessName { get; set; }
    public int WorkingSet64 { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T22:01:49.737

单击 Invoke 按钮将返回 XML，因为请求未指定`contentType: 'application/json; charset=utf-8'`. 因此，单击 Invoke 按钮的实验并没有真正的帮助。

您的代码中的主要问题是您将数据转换为 web 方法内的字符串。线

```
json = Lib.ToJSON(obj); 
```

不需要。通常做的是返回对象。`GetJsonServerProcess`应该更改为类似

```
[ScriptService]
public class SampleService : System.Web.Services.WebService
{
    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public List<Process> GetJsonServerProcess()
    {
        int memory = 1;
        return System.Diagnostics.Process.GetProcesses()
                   .Where(r => r.WorkingSet64 > memory)
                   .Select(p => new { p.ProcessName, p.WorkingSet64 })
                   .ToList();
    }
} 
```

下一个问题是等待 jqGrid 的默认输入格式是另一种（参见[此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:retrieving_data#json_data)）。因此，您需要指定`jsonReader`哪些描述数据格式。在您的情况下，它将类似于

```
jsonReader: {
    repeatitems: false,
    id: "ProcessName",
    root: function (obj) { return obj; },
    page: function () { return 1; },
    total: function () { return 1; },
    records: function (obj) { return obj.length; }
} 
```

此外，您永远不应该`http://localhost:1092/`在 Ajax 中使用前缀，`url`因为出于安全原因，您只能从同一站点获取数据。`data`jqGrid 中的参数与 jQuery 中的参数有另一个含义，因此您应该删除`data: "{}"`并`type: "POST"`从`ajaxGridOptions`to移动`mtype: "POST"`。结果你会有类似的东西

```
$(document).ready(function () {
    $("#jqgajax").jqGrid({
        mtype: "POST",
        ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },
        url: '/SampleService.asmx/GetJsonServerProcess',
        postData: "{}", // remove all parameters which jqGrid send typically
        datatype: "json",
        colNames: ['ProcessName', 'WorkingSet64'],
        colModel: [
            { name: 'ProcessName', index: 'ProcessName', width: 155 },
            { name: 'WorkingSet64', index: 'WorkingSet64', width: 190 }
        ],
        jsonReader: {
            repeatitems: false,
            id: "ProcessName",
            root: function (obj) { return obj; },
            page: function () { return 1; },
            total: function () { return 1; },
            records: function (obj) { return obj.length; }
        },
        rowNum: 10,
        loadonce: true,
        gridview: true,
        height: 'auto',
        rowList: [10, 20, 30],
        viewrecords: true,
        sortorder: "desc",
        caption: "New API Example"
    });
}); 
```

我没有测试代码，但它应该更接近您的需要。

**更新**：您应该通过更改来修复代码`jsonReader`。[您可以在此处](http://www.ok-soft-gmbh.com/jqGrid/jqGridWebASMX.zip)下载工作演示。它显示网格

![在此处输入图像描述](../Images/34682e473ef5da968f53d71dd8ba07c8.png)

我在服务器端使用了代码

```
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Web.Services;

namespace jqGridWebASMX
{
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    [System.Web.Script.Services.ScriptService]
    public class SampleService : WebService
    {
        [WebMethod]
        public List<Demo> GetJsonServerProcess()
        {
            const int memory = 1;
            return Process.GetProcesses()
                .Where (r => r.WorkingSet64 > memory)
                .Select(p => new Demo {
                    Id = p.Id,
                    ProcessName = p.ProcessName,
                    WorkingSet64 = p.WorkingSet64
                })
                .ToList();
        }
    }

    public class Demo
    {
        public int Id { get; set; }
        public string ProcessName { get; set; }
        public long WorkingSet64 { get; set; }
    }
} 
```

在客户端

```
$("#list").jqGrid({
    mtype: "POST",
    ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },
    url: '/SampleService.asmx/GetJsonServerProcess',
    postData: "{}", // remove all parameters which jqGrid send typically
    datatype: "json",
    colNames: ['ProcessName', 'WorkingSet64'],
    colModel: [
        { name: 'ProcessName', index: 'ProcessName', width: 200 },
        { name: 'WorkingSet64', index: 'WorkingSet64', width: 120,
            formatter: 'integer', sorttype: 'int', align: 'right' }
    ],
    jsonReader: {
        repeatitems: false,
        id: "Id",
        root: function (obj) { return obj.d; },
        page: function () { return 1; },
        total: function () { return 1; },
        records: function (obj) { return obj.d.length; }
    },
    rowNum: 10,
    loadonce: true,
    gridview: true,
    height: 'auto',
    pager: '#pager',
    rowList: [10, 20, 30],
    rownumbers: true,
    viewrecords: true,
    sortorder: "desc",
    caption: "New API Example"
});
$("#pager_left").hide(); // hide unused part of the pager to have more space 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-13T10:08:02.463

好的，我遇到了同样的错误，经过大量试验和错误，这是我的“快速而肮脏”的解决方案；

```
$.get(url, {var1: parameter1, var2: parameter2}, function(data){
    data = JSON.parse($(data).find("string").text());
    alert("data.source: " + data.source);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-21T07:16:36.697

此代码完美运行

```
SqlDataAdapter sda = new SqlDataAdapter(strsql, ConfigurationManager.ConnectionStrings["BTConString"].ToString());
DataSet das = new DataSet();
sda.Fill(das);
Context.Response.Output.Write(JsonConvert.SerializeObject(das, Newtonsoft.Json.Formatting.Indented));
Context.Response.End();

return string.Empty; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-01T13:58:36.547

以下代码应该可以解决问题：

```
this.Context.Response.ContentType = "application/json; charset=utf-8";
this.Context.Response.Write(json); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-17T10:19:57.470

```
 response = await client.GetAsync(RequestUrl, HttpCompletionOption.ResponseContentRead);
                if (response.IsSuccessStatusCode)
                {
                    _data = await response.Content.ReadAsStringAsync();
                    try
                    {
                        XmlDocument _doc = new XmlDocument();
                        _doc.LoadXml(_data);
                        return Request.CreateResponse(HttpStatusCode.OK, JObject.Parse(_doc.InnerText));
                    }
                    catch (Exception jex)
                    {
                        return Request.CreateResponse(HttpStatusCode.BadRequest, jex.Message);
                    }
                }
                else
                    return Task.FromResult<HttpResponseMessage>(Request.CreateResponse(HttpStatusCode.NotFound)).Result; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-07T06:42:37.293

在功能开始之前把下面

```
[System.Web.Services.WebMethod(EnableSession = true)]
[ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)] 
```

使功能无效

当函数结束时放在下面的行

```
this.Context.Response.ContentType = "application/json; charset=utf-8";
this.Context.Response.Write(json); 
```

示例程序

```
 [System.Web.Services.WebMethod(EnableSession = true)]
        [ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
        public void testJson()
        {
            string json = "{}";
            this.Context.Response.ContentType = "";
            this.Context.Response.Write(json);
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-05T07:12:17.280

您可以将您的网址放在邮递员中并使用响应

像这样我正在使用php

```
<?php

$curl = curl_init();

curl_setopt_array($curl, array( CURLOPT_URL => 'your url', CURLOPT_RETURNTRANSFER => true, CURLOPT_ENCODING => '', CURLOPT_MAXREDIRS => 10, CURLOPT_TIMEOUT => 0, CURLOPT_FOLLOWLOCATION => true, CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1, CURLOPT_CUSTOMREQUEST => 'GET', ));

$response = curl_exec($curl);

curl_close($curl); echo $response;

?> 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-07-18T10:55:45.917

对于有效的 JSON 响应，请使用此代码..

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
[ScriptService]
public class SampleService : System.Web.Services.WebService
{
    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public void GetJsonServerProcess()
    {
        int memory = 1;
        string json = string.Empty;
        var obj = (System.Diagnostics.Process.GetProcesses().Where(r => r.WorkingSet64 > memory).Select(p => new { p.ProcessName, p.WorkingSet64 }).ToArray());
        json = Lib.ToJSON(obj);
       this.Context.Response.ContentType = "application/json; charset=utf-8";
            this.Context.Response.Write(json);

    }
} 
```

# excel - 如何在不丢失 VSTO 中的表格格式的情况下将值数组分配给 Excel 单元格

> ID：10824474
> 
> 赞同：2
> 
> 时间：2012-05-30T21:23:43.857
> 
> 标签：excel, formatting, vsto

这可能是一件容易的事，但现在它让我无法理解。我根据一些新发现改写了这个问题。

我在 Excel 插件中广泛使用二维值数组来提高原始速度。

我使用扩展方法提取单元格数组并对其进行修改，然后将值放回原处。

## 例如：

```
// Get all cells in the worksheet - this is a formatted table including headings
Range range = worksheet.UsedRange;

// Get all values as a 2D array
object[,] cells = range.GetCellArray();

... // do things to the array 

// Assign the entire array back to worksheet, but table formatting is erased
Range.Value = cells; 
```

表格格式只会被数组赋值删除。这一直到`ListObject`被删除的命名表条目。

## 有没有办法保持表格格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:09:07.640

事实证明，如果您替换格式化表格的标题行的单元格，您将完全丢失表格。

解决方案是仅替换标题下的行。

```
// Get all cells in the worksheet - this is a formatted table including headings
Range range = worksheet.UsedRange;

// Get all values as a 2D array
object[,] cells = range.GetCellArray();

... // do things to the array 

// Assign the entire array MINUS THE HEADING ROW, back to worksheet
cells = cells.SubArray(2, 1, cells.RowCount() - 1, cells.ColumnCount());
EXCEL.Range targetRange = worksheet.GetRange(1, 2, cells.ColumnCount(), cells.RowCount());
targetRange.Value = cells; 
```

、和方法都是我之前创建的扩展方法，但是您可以从它们的名称和示例中了解它们的作用`SubArray`。`GetRange``RowCount``ColumnCount`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T17:39:17.850

可能有更好的方法，但我的第一个想法是将数组输出到临时工作表，然后将输出和选择性粘贴 - > 值复制到您想要的范围内。最后，删除临时表。

# core-plot - 自定义标签问题

> ID：10824477
> 
> 赞同：0
> 
> 时间：2012-05-30T21:23:51.393
> 
> 标签：core-plot

我想我发现了一个类似于问题 104 的错误

我有一个条形图。我的轴是用约束固定的，我使用绘图区域左侧的填充和 X 轴的自定义标签。

显示最后一个条很重要，所以我的 xRange 从下面的代码开始

```
plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat([[posicoes lastObject] floatValue]) length:CPTDecimalFromFloat(tipoEscalaGrafico*60*13)]; 
```

除了标签之外，一切都完美无缺。

在下面的打印中，您可以看到问题

[http://3.bp.blogspot.com/-BLWrnrZ1MZY/T8aMqEc3PzI/AAAAAAAAAG8/sXhIgvuuj_0/s1600/Captura+de+Tela+2012-05-30](http://3.bp.blogspot.com/-BLWrnrZ1MZY/T8aMqEc3PzI/AAAAAAAAAG8/sXhIgvuuj_0/s1600/Captura+de+Tela+2012-05-30) +às+18.05.01.png

标签不尊重填充。

如果我滚动图表，那么它会像下面的屏幕一样尊重填充

[http://1.bp.blogspot.com/-uvFem8xERAo/T8aMmaLRl2I/AAAAAAAAAG0/DZx_UwCcmbA/s1600/Captura+de+Tela+2012-05-30](http://1.bp.blogspot.com/-uvFem8xERAo/T8aMmaLRl2I/AAAAAAAAAG0/DZx_UwCcmbA/s1600/Captura+de+Tela+2012-05-30) +às+18.05.01+(2).png

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:53:48.117

我有一个继承自 CPTXYGraph 的类，我做了下面的方法来添加自定义 labl=els

```
-(void)setarLabelsEixoX:(NSArray *)labels naPosicao:(NSArray *)posicaoLabels;{
CPTXYAxisSet *axisSet = (CPTXYAxisSet *)self.axisSet;
CPTXYAxis *x          = axisSet.xAxis;

x.labelingPolicy = CPTAxisLabelingPolicyNone;
NSUInteger labelLocation     = 0;
NSMutableArray *customLabels = [NSMutableArray arrayWithCapacity:[labels count]];
for ( NSNumber *tickLocation in posicaoLabels ) {
    CPTAxisLabel *newLabel = [[CPTAxisLabel alloc] initWithText:[labels objectAtIndex:labelLocation++] textStyle:x.labelTextStyle];
    newLabel.tickLocation = [tickLocation decimalValue];
    newLabel.offset       = x.labelOffset; 
    newLabel.alignment = CPTAlignmentCenter;
    [customLabels addObject:newLabel];        
}

axisSet.xAxis.majorTickLocations = (NSSet*)posicaoLabels;
x.axisLabels = [NSSet setWithArray:customLabels]; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:31:35.607

我用最新的 Core Plot 代码做了一些测试。我看不出有什么问题。您是否确认错误标签的刻度位置实际上超出了绘图范围？您使用的是什么版本的 Core Plot？

# core-data - 核心数据多对多父子关系

> ID：10824479
> 
> 赞同：1
> 
> 时间：2012-05-30T21:23:58.547
> 
> 标签：core-data, ios5, many-to-many, nsfetchrequest

如果这个问题已经存在于以不同方式发布的网站上，我深表歉意，但浏览后我找不到任何东西。我在核心数据中有一个名为**category**的实体，它存储类别和子类别对象。我想在类别和子类别之间建立关系。在我的应用程序中，我有以下要求：

*   子类别可以属于多个类别。
*   类别可以有多个子类别
*   一个类别将包含其父母和孩子的列表。

所以真的，子类别只是类别。

我想要的是找到一种方法来创建我的类别实体以具有该父子关系以及每个类别的父母列表和子列表。

有人可以提出解决这个问题的方法吗？我需要一个“联结”实体吗？在利用整个对象图概念（如果可能的话）的同时，从实体获取类别对象并填充其父级和子级列表的获取请求是什么样的

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:23:09.387

只需创建`Category`实体并为其自身添加两个关系：`subCategories`和`parentCategories`，它们当然是彼此的反向关系。现在您可以非常简单地访问相应的列表：

```
NSSet *children = category.subCategories;
NSSet *parents  = category.parentCategories; 
```

# asp.net - 如何在 sqldatasource 的 gridview ASP.NET VS 中使用具有默认参数的过程

> ID：10824490
> 
> 赞同：1
> 
> 时间：2012-05-30T21:25:02.973
> 
> 标签：asp.net, sql-server, visual-studio-2010, gridview, sqldatasource

我想使用一个存储过程，它可以使一些参数具有空值，然后测试它是否参数为空并进行一些编码，该过程工作正常......但是当我想在sqldatasource的gridview中使用它时模式助手它也可以工作....但是当我运行我的网页时，它在第一次执行时显示一个空的gridview，sqldatasource将只用一个值填充过程：来自会话变量的@nomgiac

然后当我想搜索它时，用 3 个参数填充程序.. 只是为了给我另一个结果

请注意，即使结果不同但它返回相同的查询

这是存储过程

```
 create proc rechercherGIACetAffiche @nomgiac varchar(20),@nom varchar(30) = null,@par varchar(50) = null
           as
            begin
            IF @nom is null and @par is null
                begin
                    select [ID_Dossier] as 'ID_Dossier'
                      ,[ID_Entreprise] as 'ID_Entreprise'
                      ,[Date_Depot] as 'Date_Dépôt'
                      ,[Type_Etude] as 'Type_Etude'
                      ,[Dernier_Type] as 'Dernier_Type'
                      ,[Eligibile] as 'Eligibilité'
                      ,[Fiche_Information] as 'Fiche_Information'
                      ,[Buletin_Adhesion] as 'Bulletin_d’adhésion'
                      ,[Fiche_Renseignment] as 'Fiche_Renseignment'
                      ,[Attestation] as 'Attestation'
                      ,[Date_Debut] as 'Date_Début'
                      ,[Date_Fin] as 'Date_Fin'
                      ,[ID_Cabinet] as 'ID_Cabinet'
                      ,[Montant_Demander] as 'Montant_Demander'
                      ,[Duree] as 'Durée'
                      ,[Porcentage_Taux] as 'Pourcentage,Taux' from Dossier where Nom_Giac = @nomgiac
                      return 
                end
            if  @par is not null and @nom='CNSS' 
              begin
              select d.[ID_Dossier] as 'ID_Dossier'
              ,d.[ID_Entreprise] as 'ID_Entreprise'
              ,[Date_Depot] as 'Date_Dépôt'
              ,[Type_Etude] as 'Type_Etude'
              ,[Dernier_Type] as 'Dernier_Type'
              ,[Eligibile] as 'Eligibilité'
              ,[Fiche_Information] as 'Fiche_Information'
              ,[Buletin_Adhesion] as 'Bulletin_d’adhésion'
              ,[Fiche_Renseignment] as 'Fiche_Renseignment'
              ,[Attestation] as 'Attestation'
              ,[Date_Debut] as 'Date_Début'
              ,[Date_Fin] as 'Date_Fin'
              ,[ID_Cabinet] as 'ID_Cabinet'
              ,[Montant_Demander] as 'Montant_Demander'
              ,[Duree] as 'Durée'
              ,[Porcentage_Taux] as 'Pourcentage,Taux' 
              from dbo.Dossier d inner join entreprise e on d.ID_Entreprise=e.ID_Entreprise
              where CNSS_Entreprise=@par and d.Nom_Giac=@nomgiac 
              return 
              end

            else if @par is not null and @nom='RS'  
              begin
              select [ID_Dossier] as 'ID_Dossier'
              ,[ID_Entreprise] as 'ID_Entreprise'
              ,[Date_Depot] as 'Date_Dépôt'
              ,[Type_Etude] as 'Type_Etude'
              ,[Dernier_Type] as 'Dernier_Type'
              ,[Eligibile] as 'Eligibilité'
              ,[Fiche_Information] as 'Fiche_Information'
              ,[Buletin_Adhesion] as 'Bulletin_d’adhésion'
              ,[Fiche_Renseignment] as 'Fiche_Renseignment'
              ,[Attestation] as 'Attestation'
              ,[Date_Debut] as 'Date_Début'
              ,[Date_Fin] as 'Date_Fin'
              ,[ID_Cabinet] as 'ID_Cabinet'
              ,[Montant_Demander] as 'Montant_Demander'
              ,[Duree] as 'Durée'
              ,[Porcentage_Taux] as 'Pourcentage,Taux'  
              from dbo.Dossier 
              where  Nom_Giac=@nomgiac and ID_Entreprise in( select ID_Entreprise
                                                             from dbo.Entreprise
                                                             where Raison_Social=@par) 
                                                             return                                            
              end
           else if @par is not null and @nom ='Date'
            begin
             declare @v smalldatetime,@b smalldatetime
              set @b=SUBSTRING(@par,1,4)
              set @v=SUBSTRING(@par,5,8)
            select [ID_Dossier] as 'ID_Dossier'
              ,[ID_Entreprise] as 'ID_Entreprise'
              ,[Date_Depot] as 'Date_Dépôt'
              ,[Type_Etude] as 'Type_Etude'
              ,[Dernier_Type] as 'Dernier_Type'
              ,[Eligibile] as 'Eligibilité'
              ,[Fiche_Information] as 'Fiche_Information'
              ,[Buletin_Adhesion] as 'Bulletin_d’adhésion'
              ,[Fiche_Renseignment] as 'Fiche_Renseignment'
              ,[Attestation] as 'Attestation'
              ,[Date_Debut] as 'Date_Début'
              ,[Date_Fin] as 'Date_Fin'
              ,[ID_Cabinet] as 'ID_Cabinet'
              ,[Montant_Demander] as 'Montant_Demander'
              ,[Duree] as 'Durée'
              ,[Porcentage_Taux] as 'Pourcentage,Taux'  
            from Dossier 
            where Date_Depot between @b and @v and Nom_Giac like @nomgiac
            return 
            end 
            end 
```

tis 是 sqldatasource 代码：

```
<asp:SqlDataSource ID="DOSIIER_RECHERCHE_ET_AFFICHE" runat="server" 
                     ConnectionString="<%$ ConnectionStrings:OfficeConnectionString %>" 
                     SelectCommand="rechercherGIACetAffiche" SelectCommandType="StoredProcedure">
                     <SelectParameters>
                         <asp:SessionParameter Name="nomgiac" SessionField="Nom_GIAC" Type="String" />
                         <asp:ControlParameter ControlID="RecherhcerComboBox" DefaultValue="" Name="nom" 
                             PropertyName="SelectedValue" Type="String" />
                         <asp:SessionParameter DefaultValue="" Name="par" SessionField="Recherche" 
                             Type="String" />
                     </SelectParameters>
                 </asp:SqlDataSource> 
```

这是网格视图：

```
<asp:GridView  ID="DossierGV" runat="server" 
                          AutoGenerateColumns="False" AllowPaging="True" AllowSorting="True" 
                        DataKeyNames="ID_Dossier" PageSize="5" 
                              DataSourceID="DOSIIER_RECHERCHE_ET_AFFICHE" >
                             <Columns>
                              <asp:BoundField DataField="ID_Dossier" HeaderText="ID_Dossier" ReadOnly="True" 
                                  SortExpression="ID_Dossier" />
                              <asp:BoundField DataField="ID_Entreprise" HeaderText="ID_Entreprise" 
                                  SortExpression="ID_Entreprise" />
                              <asp:BoundField DataField="Date_Dépôt" HeaderText="Date_Dépôt" 
                                  SortExpression="Date_Dépôt" />
                              <asp:BoundField DataField="Type_Etude" HeaderText="Type_Etude" 
                                  SortExpression="Type_Etude" />
                              <asp:BoundField DataField="Dernier_Type" HeaderText="Dernier_Type" 
                                  SortExpression="Dernier_Type" />
                              <asp:BoundField DataField="Eligibilité" HeaderText="Eligibilité" 
                                  SortExpression="Eligibilité" />
                              <asp:BoundField DataField="Fiche_Information" HeaderText="Fiche_Information" 
                                  SortExpression="Fiche_Information" />
                              <asp:BoundField DataField="Bulletin_d’adhésion" HeaderText="Bulletin_d’adhésion" 
                                  SortExpression="Bulletin_d’adhésion" />
                              <asp:BoundField DataField="Fiche_Renseignment" HeaderText="Fiche_Renseignment" 
                                  SortExpression="Fiche_Renseignment" />
                              <asp:BoundField DataField="Attestation" HeaderText="Attestation" 
                                  SortExpression="Attestation" />
                              <asp:BoundField DataField="Date_Début" HeaderText="Date_Début" 
                                  SortExpression="Date_Début" />
                              <asp:BoundField DataField="Date_Fin" HeaderText="Date_Fin" 
                                  SortExpression="Date_Fin" />
                              <asp:BoundField DataField="ID_Cabinet" HeaderText="ID_Cabinet" 
                                  SortExpression="ID_Cabinet" />
                              <asp:BoundField DataField="Montant_Demander" HeaderText="Montant_Demander" 
                                  SortExpression="Montant_Demander" />
                              <asp:BoundField DataField="Durée" HeaderText="Durée" SortExpression="Durée" />
                              <asp:BoundField DataField="Pourcentage,Taux" HeaderText="Pourcentage,Taux" 
                                  SortExpression="Pourcentage,Taux" />
                          </Columns>
                             <SelectedRowStyle BackColor="#F2E488" Font-Bold="True" />
                      </asp:GridView> 
```

# node.js - 使用节点和套接字 io 在连接时向客户端发送消息

> ID：10824491
> 
> 赞同：0
> 
> 时间：2012-05-30T21:25:03.820
> 
> 标签：node.js, websocket, socket.io

我如何向*特定*客户端发送消息，更具体地说，是刚刚连接到应用程序的客户端，而不向已经在网站上的其他访问者广播？

```
 io.sockets.on('connection', function(client) {
   }); 
```

似乎每次有新访客连接时都会向所有人广播。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T00:21:08.567

```
var io = require('socket.io').listen(80);

io.sockets.on('connection', function (socket) {

    socket.emit('greetings', { greeting:'hello, new visitor' });

    socket.on('greetingFromVisitor', function (data) {
        console.log(data);
    });

}); 
```

# java - 如何在android中完成由父活动创建的两个或多个活动

> ID：10824499
> 
> 赞同：0
> 
> 时间：2012-05-30T21:25:28.373
> 
> 标签：java, android

我正在创建一个应用程序，其中活动 A 创建活动 B，活动 A 转到后台，活动 B 在前台..

当在活动 B 中按下返回时，活动 A 进入前台，活动 B 进入后台。现在活动 A 在后台再次创建活动 C，活动 A 在后台，活动 C 在前台。即现在 C 是前台，活动 A，B 在背景

当在活动 C 中按下返回时，活动 A 进入前台，活动 C 进入后台..

即现在A是前台，活动C，B在后台

现在，如果在 Activity A den 中按下 Back，我应该完成所有活动，即 A、B、C 并且应该关闭应用程序......

如何实现这一点任何人都可以帮助我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:30:11.693

这是 Android 的默认行为。你不必为此做任何特别的事情。

# android - 使用对象而不是字符串处理 AsyncTask

> ID：10824501
> 
> 赞同：1
> 
> 时间：2012-05-30T21:25:49.417
> 
> 标签：android, multithreading, listview, android-asynctask, restful-architecture

如何处理Android 中的**对象**和**线程？**我想看看是否有办法将**AsyncTask**类（`doInBackground()`和`onPostExecute()`方法）**与 Objects 而不是 Strings 一起使用**。我还想**与 UI 交互**。

是否有一个好的教程可以开始或任何提示？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:26:51.180

您可以像下面的示例中那样子类化 AsyncTask。

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
  protected Long doInBackground(URL... urls) {
     int count = urls.length;
     long totalSize = 0;
     for (int i = 0; i < count; i++) {
         totalSize += Downloader.downloadFile(urls[i]);
         publishProgress((int) ((i / (float) count) * 100));
     }
     return totalSize;
  }

  protected void onProgressUpdate(Integer... progress) {
     setProgressPercent(progress[0]);
  }

  protected void onPostExecute(Long result) {
     showDialog("Downloaded " + result + " bytes");
  }
} 
```

在此示例中，“URL”是参数类型，Long 是结果类型（传递给 onPostExecute()），Integer 是可选的进度指示器。参数类型、进度类型和结果类型如果未使用，则可以是“无效”类型。

[您可以在此处](https://developer.android.com/reference/android/os/AsyncTask.html)找到此示例和更长的说明

与 ui 的交互必须发生在 onPostExecute() 中。

# bash - shell : 命令是可移植的吗？

> ID：10824503
> 
> 赞同：5
> 
> 时间：2012-05-30T21:25:51.370
> 
> 标签：bash, shell, null, zsh, csh

是否建议`:`在所谓的可移植脚本上使用 shell 的 null 命令？它是否可以处理 csh、zsh、tcsh 以及它可能存在的任何外壳？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T21:28:30.470

是的。它是*标准*的null 实用程序。参考： http: [//pubs.opengroup.org/onlinepubs/000095399/utilities/colon.html](http://pubs.opengroup.org/onlinepubs/000095399/utilities/colon.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:59:06.970

当然，`:`内置的已经在[Thompson shell](http://en.wikipedia.org/wiki/Thompson_shell)中——它在 1975 年被[记录](http://man.cat-v.org/unix-6th/1/sh)在[Unix V6](http://en.wikipedia.org/wiki/Version_6_Unix)中。这比`PATH`变量、stderr 重定向`2>`和`cd`命令（然后拼写为`chdir`）等常用功能更早。

在 Thompson shell 中，`:`表示[`goto`](http://man.cat-v.org/unix-6th/1/goto)命令的标签。如果您从未尝试调用`goto`以 开头的行`: `，则该行实际上是注释。[Bourne shell](http://en.wikipedia.org/wiki/Bourne_shell)是我们所知道的Bourne/POSIX shell 的祖先，从来没有`goto`我知道的，但保留`:`为 no-op 命令（它已经存在于[Unix V7](http://cm.bell-labs.com/7thEdMan/)中）。

# c++ - 二维数组的 MPI 数据类型

> ID：10824506
> 
> 赞同：0
> 
> 时间：2012-05-30T21:26:15.920
> 
> 标签：c++, mpi

几个小时我试图通过 MPI 将 2D 数组发送到不同的线程。代码看起来像这样（我会留下评论以展示我已经尝试过的技巧）：

类型定义：

```
// Define datatype
//MPI_Type_contiguous(N, MPI_INT, &mpi_vector);
//MPI_Type_vector(N, N, N, mpi_vector, &mpi_matrix);
//MPI_Type_vector(N, N, N, MPI_INT, &mpi_matrix);
//MPI_Type_contiguous(N, MPI_INTEGER, &mpi_vector);
//MPI_Type_contiguous(N, mpi_vector, &mpi_matrix);
MPI_Type_vector(N, N, 0, MPI_INTEGER, &mpi_matrix);
//MPI_Type_commit(&mpi_vector);
MPI_Type_commit(&mpi_matrix); 
```

发送和接收：

```
int** tmp = new int*[N];
switch(r) {
case T1:
    inputMatrix(tmp, 2);
    MPI_Send(tmp, 1, mpi_matrix, T2, 0, MPI_COMM_WORLD);
    //task_T1();
    break;
case T2:
    //task_T2();
    inputMatrix(tmp, -1);
    MPI_Recv(tmp, 1, mpi_matrix, T1, 0, MPI_COMM_WORLD, &s);
    for(int i = 0; i < N; i++)
    {
        for(int j = 0; j < N; j++) {
            cout << "  " << tmp[i][j];
        }
        cout << endl;
    }
    break;
} 
```

我需要完成这件事直到早上（7 小时内），我希望 smb 能够帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T21:39:41.587

MPI**不支持**每行单独分配的矩阵，也就是指向行的指针数组。MPI*仅适用*于行在内存中连续存储的平面数组。使用平面数组：

```
int** tmp = ... 
```

应该成为

```
int* tmp = new int[rows*cols]; 
```

然后`tmp[row][col]`应该作为`tmp[row*cols + col]`.

您可以从`MPI_INT`单行构造一个连续类型，然后从整个矩阵的前一个连续类型构造一个连续类型。您还可以构造单个连续类型的`rows*cols` `MPI_INT`元素。第一种方法更灵活，因为您可能需要稍后发送单独的行。

# caching - 父实体上的缓存隔离级别警告

> ID：10824508
> 
> 赞同：1
> 
> 时间：2012-05-30T21:26:19.280
> 
> 标签：caching, jpa-2.0, eclipselink, glassfish-3, isolation-level

添加第二个持久性单元并将我的应用程序的数据源更改为 XADataSource (MySQL) 后，我现在在 glassfish 日志中收到关于我父实体的隔离级别的令人困惑的警告：

```
WARN  o.e.p.s.f.j.ejb_or_metadata : Parent Entity BaseEntity has an isolation
level of: PROTECTED which is more protective then the subclass Contact with
isolation: null so the subclass has been set to the isolation level PROTECTED. 
```

经过一番研究，我认为这个隔离级别警告消息来自 EclipseLink 的缓存机制。但我没有在我的应用程序的任何地方指定隔离级别，因此我的配置中的某些内容似乎触发了 BaseEntity 类的隔离级别为“受保护”。该文档没有说明可能导致它被自动分配到该级别的原因 - 请参阅[用户指南](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching/Shared_and_Isolated)。

对单个用户的小规模测试表明，该应用程序似乎按预期工作，但这条警告消息并没有让我觉得将它推广给大众感到不舒服。

任何人都可以对此信息有所了解吗？我的担忧有效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T01:34:29.820

经过一番研究，我发现这个警告与使用 XADataSource 无关。我早些时候开始对 EclipseLink 的多租户进行一些探索，结果发现这是罪魁祸首。

参考[http://wiki.eclipse.org/EclipseLink/Examples/JPA/Multitenant#Persistence_Usage_for_Multiple_Tenants](http://wiki.eclipse.org/EclipseLink/Examples/JPA/Multitenant#Persistence_Usage_for_Multiple_Tenants)：

> 使用此架构时，有一个可用于常规实体类型的共享缓存，但多租户类型必须在缓存中受到保护，因此 MULTITENANT_SHARED_EMF 属性必须设置为 true。

仅供参考——在查看代码时，ClassDescriptor.initializeCaching() 中还有其他 3 种情况，其中缓存隔离被降级为 PROTECTED：

1.  如果实体有一个 DatabaseMapping 将其标记为不可缓存。
2.  如果实体具有不具有共享隔离级别的 ForeignReferenceMapping。
3.  如果实体具有不具有共享隔离级别的 AggregateObjectMapping。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:47:43.343

这里的缓存实现只是试图同步parnet和子实体的隔离级别。但我认为你应该覆盖默认的保护隔离级别。因为“Serializeable”隔离级别是最具保护性且性能较差的隔离级别。您可以使用已提交读或可重复读级别，具体取决于您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:45:32.217

这只是一个关于缓存隔离的警告，它与数据库隔离无关，所以你可以忽略它。

有关缓存隔离的更多信息，请参阅，

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching/Shared_and_Isolated](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching/Shared_and_Isolated)

如果您还没有进行任何缓存配置，那就太奇怪了。默认情况下，所有内容都应该是共享的，要获得受保护的内容，您必须禁用相关实体的疼痛，例如使用 @Cacheable(false)？

# python - Django url 模板返回 NoReverseMatch

> ID：10824523
> 
> 赞同：0
> 
> 时间：2012-05-30T21:27:43.030
> 
> 标签：python, django, django-templates

[从这里](https://stackoverflow.com/questions/10807601/getting-django-url-template-tag-to-return-something-usefulthrows-reverse-error)继续提问。根据@dannyroa 修复模板后 - 从模板名称中删除引号我仍然收到 NoReverseMatch 错误：

```
NoReverseMatch at /transfers/41/
Reverse for 'description_url' with arguments '(u'\u05ea\u05e7\u05e6\u05d9\u05d1 \u05d4\u05e9\u05db\u05e8 - \u05d1\u05d9\u05ea \u05d4\u05e0\u05e9\u05d9\u05d0',)' and keyword arguments '{}' not found.
Request Method: GET
Request URL:    http://127.0.0.1:8000/transfers/41/
Django Version: 1.4
Exception Type: NoReverseMatch
Exception Value:    
Reverse for 'description_url' with arguments '(u'\u05ea\u05e7\u05e6\u05d9\u05d1 \u05d4\u05e9\u05db\u05e8 - \u05d1\u05d9\u05ea \u05d4\u05e0\u05e9\u05d9\u05d0',)' and keyword arguments '{}' not found. 
```

现在的模板：

```
<a href='{% url description_url transfer.description %}'>{{transfer.description}}</a> 
```

网址配置：

```
url(r'^description/(?P<description>[\w ]+)/$',
                            'transfers.views.description_ListView',
                            name = 'description_url') 
```

风景：

```
def description_ListView(requesst,**kwargs):

    template_name = 'transfers/description.html'

    o = get_list_or_404(Transfer, description =kwargs['description'])
    #print ('o:',o)
    context_object_name = "transfer_name_list" 
    return render_to_response(template_name,{context_object_name:o,'description':kwargs['description']}) 
```

这个问题真的开始让我失望了。我知道我可以在传输模型（可能使用@permalink）上编写一个特定的方法，为每个视图返回正确的 url。但这是很多工作，而且这样做肯定令人沮丧，只是因为我在使用 {%url %} 模板标签时遭遇了惨痛的失败

谢谢您的帮助

# objective-c - 褪色 CCLayerColor 不起作用

> ID：10824524
> 
> 赞同：0
> 
> 时间：2012-05-30T21:27:47.717
> 
> 标签：objective-c, ipad, cocos2d-iphone, fade, cclayer

我想淡化一个 CCLayerColor，这似乎很简单，但它只是不起作用......这是我所做的：

**加载屏幕.h**

```
@interface LoadingScreen : CCLayerColor{

}

-(id)init;
-(void)setOpacity:(GLubyte)opacity;

@end 
```

**加载屏幕.m**

```
@implementation LoadingScreen

-(id)init{
    if ((self=[super initWithColor:ccc4(66 , 66, 66, 255)])){

        self.isTouchEnabled = NO;

    }
    return self;

}

-(void)setOpacity:(GLubyte)opacity{

    for( CCNode *node in [self children] )
    {
        if( [node conformsToProtocol:@protocol(CCRGBAProtocol)] )
        {
            NSLog(@"conforms to protocol!");
            [(id<CCRGBAProtocol>) node setOpacity: opacity];
        }
    }
}

@end 
```

**游戏层.m**

```
-(id)init{
timer = [NSTimer scheduledTimerWithTimeInterval:0.001 target:self selector:@selector(checkIfLoaded) userInfo:nil repeats:YES];
}

-(void)checkIfLoaded{
    NSLog(@"still doing stuff");
    if(doneInitializing ==YES){
        NSLog(@"done");
        [timer invalidate];
        NSLog(@"FADE NOW !!!!");
        id fade = [CCFadeOut actionWithDuration:2.5];
        [loadingLayer runAction:fade];
        [self performSelector:@selector(removeLoadingLayer) withObject:nil afterDelay:3.5];

    }

    if(loadingScreenPushed == NO && doneInitializing == NO){
        NSLog(@"adding Layer");
        loadingScreenPushed = YES;
        loadingLayer = [LoadingScreen node];
        [self addChild:loadingLayer z:10];

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:59:18.133

据我记得，淡入淡出动作会根据当前的不透明度值在每个刻度上计算新的不透明度。您将标准 CCLayerColor setOpacity 方法替换为新方法。尝试添加

```
[super setOpacity: opacity]; 
```

到你的 setOpacity: 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:45:35.110

好的...一些事情：

1：为什么要创建一个不同的类`LoadingScreen`......它似乎有点多余，最好的是：声明一个变量类型`CCColorLayer`，`GameLayer`就是这样，然后用......初始化它......它`loadingScreen=[CCColorLayer layerWithColor...etc]`更适合优化，它是自动释放的。

第二：更换

```
id fade = [CCFadeOut actionWithDuration:2.5];
[loadingLayer runAction:fade]; 
```

与：（`[loadingLayer runAction:[CCFadeOut actionWithDuration:2.5]];`它更快）

第三：试试这个：

```
if(loadingScreenPushed == NO && doneInitializing == NO){
//stuff
}else if(doneInitializing ==YES){
//stuff
} 
```

我认为您正在做的是检查是否在屏幕上添加了图层并将其删除...但是您不能在屏幕上添加图层..因为您稍后会添加它...所以是的..颠倒这些，一切都应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-20T15:50:56.910

我自己对此进行了一些研究，原因与 the_critic 首先提出这个问题的原因相同，我得到的结果至少可以说是令人惊讶的。我正在为 iPad iOS 8.4 构建：1）似乎 CALayer 子类的子类上的“超级 setOpacity”不起作用！（我从可以想象的各个方向对此进行了攻击）。2) 获取 CALayer 子类的子类的不透明度值在 setOpacity 调用失败时返回正确的值。

IE：

```
@interface IntermediateLayerType : CALayer.....
@interface FinalLayerType : IntermediateLayerType.... 
```

在 FinalLayerType 的某些方法中...

```
[self setOpacity:1.0f];
[super setOpacity:0.0f];
NSLog(@"The opacity set was: %f", [self opacity]); 
```

产生答案：“不透明度设置为：1.0”我认为您遇到了同样的错误！我的解决方法如下：

在相同的“某种方法”中......

```
CALayer *myBaseInstance = (CALayer *)self;

[myBaseInstance setOpacity:0.0f]; 
```

在我损失了一天半的开发时间之后，这对我有用。我希望这可以帮助其他 iPad 开发人员。维维。

# java - 阻止 Chrome 在运行小程序/插件时始终尝试更新 Java 和 Silverlight？

> ID：10824525
> 
> 赞同：5
> 
> 时间：2012-05-30T21:27:58.317
> 
> 标签：java, silverlight, google-chrome, google-chrome-extension

我们最近添加了一个基于 Silverlight 的插件 (Plupload)，除了一个问题外，它运行良好：

如果您尝试在 Chrome 中使用它，您的浏览器将弹出消息“Silverlight 已被阻止，因为它已过时”。

我很欣赏谷歌试图强迫用户更新（否则他们永远不会这样做），但这单枪匹马地使我们的客户支持负载增加了三倍。有人知道通过 Javascript/Html 代码强制它在 Chrome 中运行的方法吗？

我们已经在许多使用 Java 小程序的站点上看到了同样的问题。由于 Oracle 不断进行小更新，因此您要求升级 9/10 次有效地保持“最新”似乎几乎是不可能的。

# python - 带有 readline 的线程

> ID：10824532
> 
> 赞同：0
> 
> 时间：2012-05-30T21:28:41.397
> 
> 标签：python, python-2.7

我有一个包含数十万行的巨大文件。我需要在每一行上运行相同的进程。我的计划是创建几个线程来加快进程。每当我在使用踩踏和队列模块之前进行多线程处理时。但是我不知道如何应用队列。我真正需要做的是逐行读取文件，因为文件太大而无法完成整个操作。我想也许我可以使用 .put() 一次将一件事添加到队列中，然后立即将其传递给线程，但似乎如果我这样做，线程可能会发生冲突。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:44:54.663

每行有多少处理。

如果不是很多，那么您可能会因为多个线程争用文件所在的设备而减慢速度？您可能想事先拆分文件并将组件放在不同的设备上？然后，只需为每个文件或每组文件启动一个进程就很简单了。

我会为此使用 split, xargs -P unix 命令

# c++ - Axter EzLogger - 如何删除警告或错误消息？i686-apple-darwin10-g++-4.2.1 (GCC) 4.2.1

> ID：10824534
> 
> 赞同：1
> 
> 时间：2012-05-30T21:28:49.743
> 
> 标签：c++, templates, logging, gcc

我正在使用 http://axter.com/ezlogger/index.htm 上提供的[EzLogger](http://axter.com/ezlogger/index.htm)

我试图从该网站编译简单的示例代码来测试 C++ 记录器。我有一些错误，我发现我可以使用 -fpermissive gcc 选项编译它。现在，我有这样的警告消息：

```
In file included from src/ezlogger_headers.hpp:18,
src/ezlogger.hpp: In static member function ‘static void axter::ezlogger<EZLOGGER_OUTPUT_POLICY, EZLOGGER_FORMAT_POLICY, EZLOGGER_VERBOSITY_LEVEL_POLICY>::log_out(const char*, int, const char*, axter::ext_data, bool, const T&)’:
src/ezlogger.hpp:248: warning: there are no arguments to ‘get_log_stream’ that depend on a template parameter, so a declaration of ‘get_log_stream’ must be available
src/ezlogger.hpp:248: warning: there are no arguments to ‘get_log_prefix_format’ that depend on a template parameter, so a declaration of ‘get_log_prefix_format’ must be available
src/ezlogger.hpp:249: warning: there are no arguments to ‘get_log_stream’ that depend on a template parameter, so a declaration of ‘get_log_stream’ must be available
src/ezlogger.hpp: In static member function ‘static void axter::ezlogger<EZLOGGER_OUTPUT_POLICY, EZLOGGER_FORMAT_POLICY, EZLOGGER_VERBOSITY_LEVEL_POLICY>::log_out(const char*, int, const char*, axter::ext_data, bool, const T1&, const T2&)’:
src/ezlogger.hpp:255: warning: there are no arguments to ‘get_log_stream’ that depend on a template parameter, so a declaration of ‘get_log_stream’ must be available
src/ezlogger.hpp:255: warning: there are no arguments to ‘get_log_prefix_format’ that depend on a template parameter, so a declaration of ‘get_log_prefix_format’ must be available
src/ezlogger.hpp:256: warning: there are no arguments to ‘get_log_stream’ that depend on a template parameter, so a declaration of ‘get_log_stream’ must be available
src/ezlogger.hpp: In static member function ‘static void axter::ezlogger<EZLOGGER_OUTPUT_POLICY, EZLOGGER_FORMAT_POLICY, EZLOGGER_VERBOSITY_LEVEL_POLICY>::log_out(const char*, int, const char*, axter::ext_data, bool, const T1&, const T2&, const T3&)’:
src/ezlogger.hpp:262: warning: there are no arguments to ‘get_log_stream’ that depend on a template parameter, so a declaration of ‘get_log_stream’ must be available
src/ezlogger.hpp:262: warning: there are no arguments to ‘get_log_prefix_format’ that depend on a template parameter, so a declaration of ‘get_log_prefix_format’ must be available
src/ezlogger.hpp:263: warning: there are no arguments to ‘get_log_stream’ that depend on a template parameter, so a declaration of ‘get_log_stream’ must be available 
```

有没有办法删除警告信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:00:24.117

我不确定我是否找到了自己问题的答案。

首先，我注意到一篇[文章](http://www.agapow.net/programming/cpp/no-arguments-that-depend-on-a-template-parameter)，其中暗示了在较新版本的 C++ 标准中可以更正的内容。当使用多个带有“模板”的基类时，“应该”明确指定方法属于哪个基类。在帖子中，将使用保留字“this”。在我的例子中，函数是静态的，我必须在函数前面加上 get_log_stream，前面带有双冒号的类名。

# android - 如何创建仅接受整数值的首选项

> ID：10824540
> 
> 赞同：11
> 
> 时间：2012-05-30T21:29:11.020
> 
> 标签：android, android-edittext, android-preferences

有没有办法在只接受整数值的*PreferenceFragment*中创建首选项？我可以实现一个*EditTextPreference*并注册一个*OnPreferenceChangeListener*如果用户输入不是数字的字符串，我可以在其中拒绝更改，但我更喜欢仅用于保存数字并且不允许用户输入任何其他内容的东西, 可能只显示一个拨号盘键盘.. 我不存在这样的偏好，因为*Preference*的每个后代都映射到布尔值 ( *CheckBoxPreference* )、字符串 (*EditTextPreference) 或字符串数​​组 ( *MultiSelectListPreference*)，即没有首选项映射到整数，但也许你们中的一些人可以给我一个提示，或者至少告诉我是否有比我上面提出的更好的解决方案。

**Grey 提出的解决方案：**

```
EditText editText = ((EditTextPreference)    
                             findPreference("intent_property")).getEditText();
editText.setKeyListener(new NumberKeyListener() {
    @Override
    public int getInputType() {
        // The following shows the standard keyboard but switches to the view 
        // with numbers on available on the top line of chars
        return InputType.TYPE_CLASS_NUMBER;
        // Return the following to show a dialpad as the one shown when entering phone
        // numbers.
        // return InputType.TYPE_CLASS_PHONE
    }

    @Override
    protected char[] getAcceptedChars() {
        return new String("1234567890").toCharArray();
    }
}); 
```

更短的解决方案，它不允许将键盘更改为拨号盘，但需要更少的代码：

```
EditText editText = ((EditTextPreference) 
                             findPreference("intent_property")).getEditText();
editText.setKeyListener(new DigitsKeyListener()); 
```

我不喜欢这个解决方案的一件事：用户可以输入 0000 并且它被接受并保存在共享首选项（这是一个字符串）中作为“0000”.. 这需要您实现 OnSharedPreferenceChangeListener 来拦截更改共享首选项并删除此首选项中的前导零或直接在此首选项上实现更改侦听器并返回 false 以拒绝带有尾随零的数字（**告诉我是否有更好的解决方案来解决最后一个问题，不涉及实现您自己的首选项**）。如果我们可以修改*OnPreferenceChangeListener*中的*newValue*那就太好了。

 ** * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-07T10:45:20.550

有一种更简单的方法可以做到这一点。只需将 XML 中的 EditTextPreference 设置为 android:numeric="integer" （您可以将其设置为整数、有符号或小数）。

Eclipse（或您正在使用的任何工具）不会将其显示为可能的属性，而只需将其写入您的 EditTextPreference 并清理您的项目。你会看到它不会给你任何错误。:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-01T10:14:23.750

在阅读了建议的解决方案后，我仍然认为自定义偏好是要走的路。我确实以粗体字阅读了您的评论，但设置基本`EditTextIntegerPreference`功能实际上非常简单，它将解决您在用户输入例如“0000”时遇到的剩余问题。

只是预先说明：由于您通常希望能够在应用程序的多个位置使用首选项，因此就我而言，正确实现 an`EditTextIntegerPreference`会将其值存储在`Integer`. 这样您就可以在任何地方检索 int 值，而无需先解析或强制转换它。

但是，为了保持这个答案的重点和紧凑，我实际上将展示一个常规的扩展`EditTextPreference`，这意味着在引擎盖下，该值仍将存储为一个字符串。如果您真的热衷于让“正确”的实现发挥作用，我不介意稍后再写。不过，它不应该太棘手，因此您可能想先自己尝试一下。:)

```
public class EditTextIntegerPreference extends EditTextPreference {

    private Integer mInteger;

    public EditTextIntegerPreference(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        getEditText().setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_SIGNED);
    }

    public EditTextIntegerPreference(Context context, AttributeSet attrs) {
        super(context, attrs);
        getEditText().setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_SIGNED);
    }

    public EditTextIntegerPreference(Context context) {
        super(context);
        getEditText().setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_SIGNED);
    }

    @Override public void setText(String text) {
        final boolean wasBlocking = shouldDisableDependents();
        mInteger = parseInteger(text);
        persistString(mInteger != null ? mInteger.toString() : null);
        final boolean isBlocking = shouldDisableDependents(); 
        if (isBlocking != wasBlocking) notifyDependencyChange(isBlocking);
    }

    @Override public String getText() {
        return mInteger != null ? mInteger.toString() : null;
    }

    private static Integer parseInteger(String text) {
        try { return Integer.parseInt(text); }
        catch (NumberFormatException e) { return null; }
    }    
} 
```

这解决了“0000”问题的原因是，我们只是在存储之前将用户键入的值转换为 int，然后在检索时将其插入到字符串中。这意味着任何前导零（当然，“0”除外）都会自动消失。

'number' 输入类型将限制用户只能输入输入数字，因此该`parseInteger(...)`方法主要是出于理智的原因而存在，尽管`NumberFormatException`如果您尝试输入空字符串或`null`字符串，它会捕获 a。同样，你可以让它更漂亮，我现在还没有这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T21:39:18.113

我想你可以调用 getEditText() 来获取 EditText obj，然后用 NumberKeyListener 调用 setKeyListener。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T11:31:20.640

您应该使用 PreferenceActivity，它基本上用于显示 xml 文件之类的首选项。在此活动中，您可以使用复选框、编辑文本并将值保存到首选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-17T19:30:42.770

您也可以在尝试 parseInt() 数字后遇到异常时重新打开对话框。这是一个示例代码：

```
public class MyEditTextPreference extends EditTextPreference {

        private EditText _editText;

        public MyEditTextPreference(Context context, AttributeSet attrs) {
            super(context, attrs);
            _editText = getEditText();
        }

        @Override
        public void onDismiss(DialogInterface dialog) {

            super.onDismiss(dialog);

            try {
                Integer.parseInt(_editText.getText().toString());
            } catch (NumberFormatException e) {

                ((Dialog) dialog).show();
            }
        }
    } 
```*

# reporting-services - SSRS 更正文本问题的 XY 散点图

> ID：10824541
> 
> 赞同：1
> 
> 时间：2012-05-30T21:29:24.440
> 
> 标签：reporting-services, charts, ssrs-2008

我正在开发一个 SSRS 2008 R2 RDL 文件。目前，我正在尝试在此 RDL 中获取一个表格，以 Scantron 方式列出每个问题和答案。所有 8 个问题都有相同的 4 个可能值。我在 SSRS 中使用 XY 散点图。这是我的设计选项卡的样子： ![设计选项卡](../Images/f26190e074c91b7f61aea583f49ef734.png)

但这不正确，因为预览选项卡如下所示： ![预览选项卡](../Images/4cfaed4846f2180e586df7db0b8a53af.png)

我遵循了 URL 中的第二种方法：

[http://blogs.msdn.com/b/seanboon/archive/2009/06/03/working-with-xy-scatter-charts-in-reporting-services-2008.aspx](http://blogs.msdn.com/b/seanboon/archive/2009/06/03/working-with-xy-scatter-charts-in-reporting-services-2008.aspx)

那么我该如何解决这个问题，以便每个问题出现在单独的行上？

这是我的存储过程的输出：

```
question                    answer
Housing Has                     resources
Family/Social Support           Has resources
Community/Individual Support    Resource not available
Financial                   Unknown
Healthcare                  Unknown
Transportation                  Needs assistance to obtain
Educational                 Resource not available
Vocational                  Needs assistance to obtain 
```

# xcode - 使用 presentModalViewController 后无法移除 UIView

> ID：10824543
> 
> 赞同：0
> 
> 时间：2012-05-30T21:29:43.253
> 
> 标签：xcode, uiview

我使用 presentModalViewController 来呈现视图，然后在尝试使用 removeFromSuperview 删除 UView 之后，它不再工作了。

在我使用命令 presentModalViewController 之前，从 superview 中删除 Uiview 没有问题。

发生了什么变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T22:55:41.917

首先，`presentModalViewController`不推荐使用，因此您不应该使用它。
根据[UIViewController 类参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html)，您应该`presentViewController:animated:completion:`改用。

其次，如果您使用任何`present??ViewController`方法，为了解除它，您应该使用适当的方法，`dismiss??ViewController`如下所示：

```
// Present the view controller
[self presentViewController:viewController animated:YES completion:NULL];

// Later, to dismiss it:
[self dismissViewControllerAnimated:YES completion:NULL]; 
```

# php - mysql显示分数1到10

> ID：10824545
> 
> 赞同：-2
> 
> 时间：2012-05-30T21:29:49.867
> 
> 标签：php, mysql, mysql5

如何在查询中显示 1 到 10 分。

例如，我得到 10 条记录，我想匹配最高的 10 条，依此类推。

```
SELECT DISTINCT c.id, c.title, cv.title2 , match ( c.title, c.title2, c.title3, c.title4 ) against ('Support' IN BOOLEAN MODE) AS score
FROM table1 AS c 
WHERE match ( c.title, c.title2, c.title3, c.title4 ) against ('Support' IN BOOLEAN MODE) 
```

当我进行搜索时，我的数据库会返回一组结果。

如果关键字匹配 c.title、c.title2、c.title3、c.title4 中的 50 个关键字（这只是一个示例），那么我想将 10 分中的 10 分显示为分数，并说这是完美匹配。

如果关键字匹配 c.title、c.title2、c.title3、c.title4 中的 45 个关键字（这只是一个示例），那么我想显示 10 分中的 9 分作为分数。

如果关键字匹配 c.title、c.title2、c.title3、c.title4 中的 30 个关键字（这只是一个示例），那么我想显示 7 分（满分 10 分）作为分数，有些完美。

如果关键字与 c.title、c.title2、c.title3、c.title4 中的 2 个关键字匹配（这只是一个示例），那么我想显示 10 分中的 1 分作为某些关键字匹配的分数。

等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:46:58.533

我认为您只是缺少明显的解决方案。只是按照分数排序...

```
SELECT DISTINCT c.id, c.title, cv.title2 , match ( c.title, c.title2, c.title3, c.title4 ) against ('Support' IN BOOLEAN MODE) AS score
FROM table1 AS c 
WHERE match ( c.title, c.title2, c.title3, c.title4 ) against ('Support' IN BOOLEAN MODE)
ORDER BY score DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T12:29:37.843

好的，我想我明白了。

```
SELECT DISTINCT c.id, c.title, cv.title2 , (match ( c.title, c.title2, c.title3, c.title4 ) AGAINST('desktop') * 4.5 )  AS score
FROM job
WHERE
match ( c.title, c.title2, c.title3, c.title4 ) AGAINST('desktop')
ORDER BY score DESC 
```

如果我能写得更好，请告诉我。

# ruby-on-rails - 在 ActiveRecord 中手动排序

> ID：10824547
> 
> 赞同：3
> 
> 时间：2012-05-30T21:30:04.487
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sorting, activerecord

我的数据库中的每个`company`都有很多`projects`，每个公司在注册时都会获得一个“常规任务”项目。该特定项目不能被其公司删除，它被视为`tasks`尚未分配给公司其他项目之一的特殊存储库。

在显示公司的项目时，我希望它们按字母顺序显示，但唯一的例外是“常规任务”出现在顶部。这需要对项目进行某种特殊处理以进行分类。我该如何服用：

```
@projects = @company.projects 
```

并对其进行排序，以便我们得到这样的列表：

```
'General tasks'
'ABC Project'
'BFA Project'
'ZNS Project' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:38:00.410

您可以在 SQL 中执行此操作。这是一个适用于 PostgreSQL 的示例。无法弄清楚如何制作与数据库无关的版本，但您应该能够根据您的 RDBMS 对其进行定制。

```
@projects = @company.projects.order("name != 'General tasks', name") 
```

`!=`返回一个布尔值，并且在 PostgreSQL 中`false`出现在前面，`true`因此我们不需要 EQUAL 来确保首先显示名称为“General tasks”的记录。其余项目将按名称排序。

另一种方法是在您的项目表中添加一列，将“常规任务”项目标记为特殊项目，例如：

```
add_column :projects, :permanent, :boolean, :default => false 
```

然后，您可以在不使用原始 SQL 的情况下进行排序：

```
@projects = @company.projects.order(:permanent, :name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-13T18:43:58.170

正如我[在这里](https://stackoverflow.com/a/29039262/1103543)回答的那样，我刚刚发布了一个 gem ( [order_as_specified](https://github.com/panorama-ed/order_as_specified) )，它允许您像这样进行本机 SQL 排序：

```
@company.projects.order_as_specified(name: ['General tasks', 'ABC Project', ...]) 
```

如果您不提前知道（或不想计算）完整的选项列表，这对您的用例可能不是很好。好处是它适用于 Postgres、MySQL 和 SQLite。

# java - 在 Mac OSX 上使用 JMF

> ID：10824552
> 
> 赞同：0
> 
> 时间：2012-05-30T21:30:23.220
> 
> 标签：java, video, jmf, mpeg

我正在尝试使用 JMF（Java 媒体框架）播放视频。我现在已经尝试了来自四个不同网站的示例代码。我正在使用运行 Lion 的 Mac。

每次我加载我拥有的 mpg 文件时，我都会得到：

```
Unable to handle format: MPEG, 352x240, FrameRate=29.9, Length=126720 
```

这是什么意思？JMF有问题吗？我正在使用跨平台版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:11:00.833

您可以尝试[Jffmpeg](http://jffmpeg.sourceforge.net/)，它为 JMF 提供 MPEG 编解码器（以及许多[其他格式](http://jffmpeg.sourceforge.net/formats.html)）。但是，请记住，[最后一个版本](http://sourceforge.net/projects/jffmpeg/files/jffmpeg/)是 2006 年。

另一种选择，如果[FMJ](http://fmj-sf.net/index.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:54:04.110

跨平台版本可能不会支持太多格式。有一些[性能包](http://www.oracle.com/technetwork/java/javase/download-142937.html)可能会有所帮助。但是 MAC 没有性能包，而且可能永远不会。

# excel - Excel：如何从单元格的输出中检索公式并对其进行评估？

> ID：10824553
> 
> 赞同：1
> 
> 时间：2012-05-30T21:30:31.833
> 
> 标签：excel, equation, evaluate, substitution

例如：

我在 A1 中有这个公式：2*x+3*x

B1 中的这个公式： =SUBSTITUTE($A$1,"x",E1) 所以我在 B1 中的输出是 2*1+3*1

现在，我想要对该操作进行评估，使其显示 5 而不是 2*1+3*1

我不介意它是在同一个单元格上还是在不同的单元格上，但我该怎么做呢？

我尝试了 =VALUE(B1) 但它给了我一个错误，我尝试了 =INDIRECT("B1",0) 但它也给了我一个错误。我不熟悉这些功能，所以我不确定它们是否是我需要的。有什么建议么？

如果可能的话，我想在不使用宏的情况下做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:42:02.980

你可以使用一个小的 UDF

```
Function Eval(exp As String)

    Dim rv
    rv = Application.Evaluate(exp)
    Eval = IIf(IsError(rv), CVErr(xlValue), rv)

End Function 
```

然后在工作表中：

```
=Eval(SUBSTITUTE(B4,"x",5)) 
```

# spring.net - Spring.NET 资源文件

> ID：10824555
> 
> 赞同：0
> 
> 时间：2012-05-30T21:30:51.733
> 
> 标签：spring.net

```
<spring>
  <context type="Spring.Context.Support.XmlApplicationContext, Spring.Core">
    <resource uri="file://C:/config1.xml" />
    <resource uri="file://C:/config2.xml" />
    <resource uri="file://C:/config3.xml" />
    <resource uri="config://spring/objects" />
  </context>
</spring> 
```

除了在配置文件中指定 XML 文件位置，有没有办法在应用程序启动后以编程方式指定这些资源文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:18:21.103

是的，你可以

```
IApplicationContext ctx = 
  new XmlApplicationContext("file://C:/config1.xml","file://C:/config2.xml", ..); 
```

有关更多信息，请参阅spring.net 文档中的[实例化容器](http://www.springframework.net/doc-latest/reference/html/objects.html#objects-factory-instantiation)。

# php - 如何检查 domain.com 或 sub.domain.com？

> ID：10824556
> 
> 赞同：1
> 
> 时间：2012-05-30T21:30:55.487
> 
> 标签：php, http

我试过`$_SERVER['HTTP_HOST']`& `$_SERVER['SERVER_NAME']`，但它们都返回**sub.domain.com**，我希望它检查 URL 是*sub.domain.com*，还是*只是 domain.com*。

脚本在 sub.domain.com 上运行，它们都返回相同的数据。

`$_SERVER['HTTP_HOST']`返回：sub.domain.com `$_SERVER['SERVER_NAME']`返回：sub.domain.com

我希望只获取 url 的 domain.com 部分。由于脚本可以在任何子域名上运行，因此我不确定如何执行此操作，因为上述两个变量都返回相同的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T21:33:23.833

我会检查 HTTP_HOST。通常两者相同，但有时 SERVER_NAME 设置不同。如有疑问，请同时检查它们。

> **'HTTP_HOST'**
> 主机的内容：当前请求的标头，如果有的话。

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

至于如何检查，你可以对主域名进行字符串替换，看看结果字符串是否为空。剩下的就是子域。

* * *

到目前为止，您正在寻找一些琐碎的字符串操作，这里是最后两部分：

```
$yourhost = implode('.', array_slice(explode('.', $_SERVER['HTTP_HOST']), -2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:36:20.437

您可以尝试以下功能（在 php.net 上找到）

```
<?php 
function getHost($Address) { 
$parseUrl = parse_url(trim($Address)); 
return trim($parseUrl[host] ? $parseUrl[host] : array_shift(explode('/', $parseUrl[path],     2))); 
} 

getHost("example.com"); // Gives example.com 
getHost("http://example.com"); // Gives example.com 
getHost("www.example.com"); // Gives www.example.com 
getHost("http://example.com/xyz"); // Gives example.com 
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T21:36:36.037

小脏*黑客*：

```
$explodedHost = explode('.', $_SERVER['HTTP_HOST']);
$size         = count($explodedHost);
$domain       = $explodedHost[$size - 2] . '.' . $explodedHost[$size - 1] . 'com';
if ($_SERVER['HTTP_HOST'] == $domain) {
  // you are on domain.com
} 
```

# jmeter - 如何比较 JMeter 中定义的用户变量？

> ID：10824557
> 
> 赞同：0
> 
> 时间：2012-05-30T21:31:01.737
> 
> 标签：jmeter

这就是我所拥有的：

```
. . .
**Loop Controller**
+- **HTTP Request** getting data from one source
   +- **BSF PostProcessor** copying the data from the request into variables
+- **SOAP/XML-RPC Request** getting data from another source
   +- **XPath Extractors** (several) copying the data from the request into variables
+- **If Controller**
   +- **BSF PostProcessor**
. . . 
```

我可以通过查看结果树看到使用调试采样器正确设置的所有变量。

我已经尝试了几件事。我搜索的所有内容都建议我应该使用 If Controller。是的，如果控制器已启用。

我真正需要做的是这个比较：`"${opp_Name1}" == "${opp_Name1}";` <--我已经完成了有和没有分号的比较，没有区别。

当我查看查看结果树时，似乎没有触发 If 控制器。在 If Controller 下方，如果条件为真，我有一个 BSF PostProcessor 来设置另一个变量；运行后，这个新变量不会出现在 Debug Sampler 中，我的所有其他变量都会按预期显示在 Debug Sampler 中。在 If 控制器中，我还尝试使用“将条件解释为变量表达式？” 检查和未检查没有任何区别。

有什么建议或想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:28:04.757

嗯。根据以下架构，对我来说可以正常工作：

```
. . .
**Loop Controller**
+- **BeanShell Sampler** : vars.put("var1","test");
+- **BeanShell Sampler** : vars.put("var2","test");
+- **If Controller** : "${var1}"=="${var2}"
   +- **BeanShell Sampler**
. . . 
```

（条件解析为“真”，执行子采样器）。

对此的几点说明：

1.  查看 jmeter.log (%JMETER_HOME%/bin 目录) 以获取来自 IF 控制器的可能消息（如果解释代码时出现错误，则假定条件为假，并在 jmeter.log 中记录一条消息）。

2.  取消选中复选框“将条件解释为变量表达式？” 在[IF 控制器的控制面板](http://jmeter.apache.org/usermanual/component_reference.html#If_Controller)上- 如果选中。

3.  调查这个问题的答案：[JMeter "if controller" with parameters?](https://stackoverflow.com/questions/5702621/jmeter-if-controller-with-parameters) . 这可能会有所帮助。

# c++ - Lua RPC 和用户数据

> ID：10824558
> 
> 赞同：2
> 
> 时间：2012-05-30T21:31:04.030
> 
> 标签：c++, lua, rpc, lua-userdata

我目前在我的程序中使用 luarpc 进行进程间通信。现在的问题是，由于我的 tolua++ 绑定将类实例存储为用户数据，我无法使用这些函数中的任何一个，导致 luarpc 无法处理用户数据。我现在的问题是，如果您知道用户数据始终只有一个指针（4 个字节）并且附加了一个用于调用和索引操作的元表，是否可以（以及如何）传输用户数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T00:43:03.120

你不能。

userdata 是指针还是对象都没有关系。您不能通过它们任意 RPC 的原因是数据没有存储在*Lua*中。因此 LuaRPC 无法正确传输。

指向地址空间的指针对于其他进程绝对没有价值。如果它在另一台机器上运行，则更是如此。您必须实际传输数据本身才能使 RPC 工作。LuaRPC 可以进行这种传输，但仅限于它可以理解的数据。它唯一能理解的数据是存储在 Lua 中的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:58:02.570

好的，我现在开始工作了。我所做的是对于用户数据参数/返回，我将实际的 ptr + 元表名称（类型名称）发送给客户端。然后，客户端使用 __index 方法附加一个元表，该方法使用类型名创建一个新的助手，并附加一个带有您要访问的字段的助手。然后，当您从该 userdata 调用或读取字段时，客户端将用于调用 typetable 的字段和 userdata 的数据发送到服务器。

读取变量：

```
 lua_pushlightuserdata(L,msg.read<void*>());
#ifndef RPC_SERVER
    luaL_getmetatable(L,"rpc.userdata");
    int len = msg.read<int>();
    char* s = new char[len];
    msg.read((uint8*)s,len);
    s[len] = '\0';
    lua_pushlstring(L,s,len);
    lua_setfield(L,-2,"__name");
    lua_pushlightuserdata(L,TlsGetValue(transporttls));
    lua_setfield(L,-2,"__transport");
    lua_setmetatable(L,-2);
#endif 
```

写变量：

```
 else
    {
        msg.append<RPCType>(RPC_USERDATA);
        msg.append<void*>(lua_touserdata(L,idx));
#ifdef RPC_SERVER
        lua_getmetatable(L,idx);
        lua_rawget(L,LUA_REGISTRYINDEX);
        const char* s = lua_tostring(L,-1);
        int len = lua_strlen(L,-1);
        msg.append<int>(len);
        msg.append(s,len);
#endif
        lua_settop(L,stack_at_start);
    } 
```

用户数据索引：

```
checkNumArgs(L,2);
ASSERT(lua_isuserdata(L,1) && isMetatableType(L,1,"rpc.userdata"));

if(lua_type(L,2) != LUA_TSTRING)
    return luaL_error( L, "can't index a handle with a non-string" );
const char* s = lua_tostring(L,2);
if(strlen(s) > MAX_PATH - 1)
    return luaL_error(L,"string to long");

int stack = lua_gettop(L);
lua_getmetatable(L,1);
lua_getfield(L,-1,"__name");
const char* name = lua_tostring(L,-1);
if(strlen(name) > MAX_PATH - 1)
    return luaL_error(L,"string to long");
lua_pop(L,1); // remove name

lua_getfield(L,-1,"__transport");
Transport* t = reinterpret_cast<Transport*>(lua_touserdata(L,-1));
lua_pop(L,1);

Helper* h  = Helper::create(L,t,name);
Helper::append(L,h,s);
return 1; 
```

好吧，我或多或少地重写了完整的 rpc 库以使用命名管道和窗口，但我认为代码应该为任何人提供足够的信息来实现它。

这允许如下代码：

```
local remote = rpc.remoteobj:getinstance()
remote:dosmthn() 
```

在客户端。它目前不允许添加新字段，但这就是我现在所需要的：D

# c# - 将项目划分为列

> ID：10824562
> 
> 赞同：3
> 
> 时间：2012-05-30T21:31:12.513
> 
> 标签：c#

我有一个动态数量的项目，最多分为 4 列，然后使用正确的 html 格式，可以说：

```
string[] s = { "1", "2", "3", "4", "5", "6", "7", "8", "9" }; // from 1 to n itens 
```

要格式化成这个 html：

```
<ul>
  <li>
     1
     2
     3
  </li>
  <li>
     4
     5
  </li>
  <li>
     6
     7
  </li>
  <li>
     8
     9
  </li>
</ul> 
```

**编辑：我的网站问题：**

如果您有单词作为 itens，以这种方式放置 itens 会将单词组织成按字母顺序排列的列（人们以这种方式阅读），而不是按字母顺序排列的行。喜欢：

```
a d g i
b e h j
c f 
```

代替：

```
a b c d
e f g h
i j 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T21:52:12.597

假设您想平均分配任何剩余部分，这将完成这项工作：

```
string[] s = { "0", "1", "2", "3", "4", "5", "6", "7", "8", "9" };

// create the 4 buckets with equal distribution
var buckets = Enumerable.Repeat(s.Length / 4, 4).ToArray();

// distribute any remainders evenly starting from the first bucket
var rem = s.Length % 4; 
for (var i = 0; i < rem; i++) buckets[i]++;

var idx = 0;
Console.WriteLine("<ul>");
foreach (var bucket in buckets)
{
    Console.WriteLine("\t<li>");
    foreach (var _ in Enumerable.Range(1, bucket))
    {
        Console.WriteLine("\t\t{0}", s[idx++]);
    }
    Console.WriteLine("\t</li>");
}
Console.WriteLine("</ul>"); 
```

* * *

对于上面的代码，这是一些极端情况返回的内容。

`{}`= 列表中有 4 个空项目

`{ "1", "2", "3"}`= 前三项中的1、2、3，第四项为空

`{ "1", "2", "3", "4", "5"}`= 第一项中的 1、2，其他项中的 3、4、5

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:46:04.663

Just loop over the array distributing the array items with a few if statements within it.

```
int j = 0;

for (int i = 0; i < s.Length; i++)
{
    if (j == 0)
      // put s[i] in column 1 j = j +1
    else if (j == 1)
      // put s[i] in column 2 j = j +1
    else if (j == 2)
      // put s[i] in column 3 j = j +1
    if (j == 3)
      // put s[i] in column 4 set j = 0
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T21:57:41.097

由于您想按列而不是按行进行分组，因此请意识到您最终将不得不对索引进行一些操作。最简单的方法是将项目转换为项目/索引对，并以某种方式按这些索引分组。

```
s.Select((tr, ti) => new { Index = ti, Item = tr })
 .GroupBy(tr => tr.Index % SOME_MAGIC_NUMBER) 
```

如果您想改为按行分组，请将`%`运算符更改为除法`/`，然后您将被设置。现在，这将获取您的所有项目并将它们分组到您指定的任意数量的项目中（基于行或列）。要转换它们，您所要做的就是另一个选择：

```
.Select(tr => "<li>" + string.Join(" ", tr.Select(tstr => tstr.Item.ToString()).ToArray()) + "</li>") 
```

这将以您想要的任何格式为您提供所有列表项的列表。如果你想`<br />`在每个元素之间包含，`<li>`那么只需更改`string.Join`调用的第一个参数。

# string - 如何在 OpenGL 中的 3d 场景上打印字符串

> ID：10824564
> 
> 赞同：4
> 
> 时间：2012-05-30T21:31:19.647
> 
> 标签：string, opengl, fonts, bitmap

我需要一些帮助才能在 opengl 3d 场景上打印字符串。我在使用模型视图矩阵和投影矩阵时遇到了一些问题。据我了解，投影矩阵用于场景设置，模型视图矩阵用于绘制和转换场景中的对象。所以，要在 3D 场景上绘制一些东西，我知道下一个过程最需要完成：

*   为 3d 场景设置投影矩阵
*   为 3d 场景设置模型视图矩阵
    *   画opengl的东西
*   为 2d 叠加设置投影矩阵
*   为 2d 叠加设置模型视图矩阵
    *   为 hud 绘制 opengl 的东西

这是正确的程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T23:03:48.077

对于 2D 渲染，您可以将投影矩阵视为画布，将 movelview 视为文本的位置。您想像这样设置正交投影：

glOrtho(0.0F, windowWidth, 0.0F, windowHeight, -1.0F, 1.0F);

使用此投影，每个单位意味着一个像素 (glTranslate2f(120.0, 100.0) 会将您的文本定位在像素 (120, 100)。此投影映射屏幕左下角的 (0,0)。如果您想将其映射到左上角，您可以执行以下操作：

glOrtho(0.0F, windowWidth, windowHeight, 0.0F, -1.0F, 1.0F);

至于如何渲染文本，OpenGL 默认不支持它，这意味着您必须创建字体渲染库或使用现有的渲染库。在此之前，您需要牢记您对文本渲染的需求：是平面还是 3D？它将是静态的或转换的（缩放、旋转）等。

在这里你可以找到关于 opengl 文本渲染技术的调查，包括优缺点和库： [http ://www.opengl.org/archives/resources/features/fontsurvey/](http://www.opengl.org/archives/resources/features/fontsurvey/)

我开始使用 FTGL 来渲染 TTF 字体，但是 lib 正在破坏我的游戏性能。所以我决定实现我自己的字体库并使用纹理字体，它并不比 TTF 好，但它可以满足我的需要。

我使用了这个程序：[http](http://www.angelcode.com/products/bmfont/) ://www.angelcode.com/products/bmfont/ 它采用 TTF 字体并导出纹理和文件描述符，其中包含您将用于渲染的纹理中的每个字母位置、大小和填充。

希望有帮助。

# c# - Active Directory 创建用户

> ID：10824566
> 
> 赞同：0
> 
> 时间：2012-05-30T21:31:37.210
> 
> 标签：c#, active-directory

我正在尝试通过 C# 脚本将用户添加到活动目录。我在互联网上找到了这个脚本（我自己没有做）。问题是当我尝试添加用户时出现此错误：

> 指定的目录服务属性或值不存在。

这是我现在拥有的代码：

```
private void buttonCreateUser_Click(object sender, EventArgs e)
{
    CreateADSUser(textboxUsername.Text, textboxPassword.Text);
}

public string CreateADSUser(string username, string password)
{
    String RootDSE;
    try
    {
        DirectorySearcher DSESearcher = new DirectorySearcher();
        RootDSE = DSESearcher.SearchRoot.Path;

        RootDSE = RootDSE.Insert(7, "CN=Users,");

        DirectoryEntry myDE = new DirectoryEntry(RootDSE);
        DirectoryEntries myEntries = myDE.Children;

        DirectoryEntry myDirectoryEntry = myEntries.Add("CN=" + username, "user");
        myDirectoryEntry.Properties["userPrincipalName"].Value = username;
        myDirectoryEntry.Properties["name"].Value = username;
        myDirectoryEntry.Properties["Password"].Value = password;
        myDirectoryEntry.Properties["samAccountName"].Value = username;
        myDirectoryEntry.Properties["FullName"].Value = username;
        myDirectoryEntry.Properties["AccountDisabled"].Value = 0;
        myDirectoryEntry.Properties["PasswordRequired"].Value = 1;

        // Permanent Password?
        myDirectoryEntry.Properties["permpass"].Value = 1;
        myDirectoryEntry.CommitChanges();

        DSESearcher.Dispose();
        myDirectoryEntry.Dispose();

        textboxReports.Text = "Worked!";
        return "Worked!";
    }
    catch (Exception ex)
    {
        textboxReports.Text = ex.Message;
        return ex.Message;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:28:56.410

这里的问题是这些属性实际上都不存在：

```
myDirectoryEntry.Properties["Password"].Value = password; 
myDirectoryEntry.Properties["FullName"].Value = username; 
myDirectoryEntry.Properties["AccountDisabled"].Value = 0; 
myDirectoryEntry.Properties["PasswordRequired"].Value = 1; 
myDirectoryEntry.Properties["permpass"].Value = 1; 
```

这不是您写信给的：

```
myDirectoryEntry.Properties["name"].Value = username; 
```

按顺序（从上到下）这里是实际的属性名称：

*   密码 -`unicodePwd`
*   全名 -`displayName`
*   帐户已禁用 -`userAccountControl`
*   PasswordRequired - `userAccountControl`（实际上你设置了相反的 - 仅当不需要密码时）
*   permPass - `unicodePwd`（不确定这个目标是什么）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T22:57:19.647

没关系，我已经解决了！

这就是它现在的样子：

```
using (var pc = new PrincipalContext(ContextType.Domain))
            {
                using (var up = new UserPrincipal(pc))
                {
                    up.SamAccountName = textboxUsername.Text; // Username
                    up.EmailAddress = textboxEmail.Text; // Email
                    up.SetPassword(textboxPassword.Text); // Password
                    up.Enabled = true;
                    up.ExpirePasswordNow();
                    up.Save();
                }
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T11:36:01.247

通过 System.DirectoryServices.AccountManagement ..

```
 PrincipalContext ouContex = new PrincipalContext(ContextType.Domain, "TestDomain.local",           "OU=TestOU,DC=TestDomain,DC=local");

        for (int i = 0; i < 3; i++)
        {
            try
            {
                UserPrincipal up = new UserPrincipal(ouContex);
                up.SamAccountName = "TestUser" + i;
                up.SetPassword("password");
                up.Enabled = true;
                up.ExpirePasswordNow();
                up.Save();
            }
            catch (Exception ex)
            {

            }
        } 
```

通过 System.DirectoryServices

```
To use this namespace you need to add reference  System.DirectoryServices.dll 

       DirectoryEntry ouEntry = new DirectoryEntry("LDAP://OU=TestOU,DC=TestDomain,DC=local");

        for (int i = 3; i < 6; i++)
        {
            try
            {
                DirectoryEntry childEntry = ouEntry.Children.Add("CN=TestUser" + i, "user");
                childEntry.CommitChanges();
                ouEntry.CommitChanges();
                childEntry.Invoke("SetPassword", new object[] { "password" });
                childEntry.CommitChanges();
            }
            catch (Exception ex)
            {

            }
        } 
```

# c++ - 返回类型上的重载运算符 []

> ID：10824569
> 
> 赞同：1
> 
> 时间：2012-05-30T21:32:00.687
> 
> 标签：c++

有一件事一直困扰着我的大脑：我试图根据返回类型重载 [] 运算符。这是我需要做的：

```
class A {

private:
    double* data_;
    int N_;
public:
    A (N=0):N_(N){
        data_ = new double[N];
    }
    ~A {delete[] data_;}

    double operator[] (const int i) {
        return data_[i];
    }

    double* operator[] (const int i) {
        return &data[i]; // for example; in fact here i need to return some block of data_ 
    }
}; 
```

此代码不会编译；这就是我的问题。有人可以帮我解决这个问题吗？

PS：我知道如何在返回类型上重载普通函数，例如：

```
int foo ();
string foo (); 
```

我使用了我在这个论坛上读到的一些技巧。这样：

```
struct func {
    operator string() { return "1";}
    operator int() { return 2; }
};

int main( ) {
    int x    = func(); // calls int version
    string y = func(); // calls string version
    double d = func(); // calls int version
    cout << func() << endl; // calls int version
    func(); // calls neither
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-30T21:33:39.313

两个方法重载必须有不同的*签名*。返回类型不是方法签名的一部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T08:48:06.270

您可以使用与函数相同的“技巧”，即使用带有转换运算符的代理对象：

```
class A
{
  private:
    double* data_;
    int N_;
  public:
    A (int N = 0)
      : N_(N), data_(new double[N])
    {}
    ~A() { delete[] data_; }

    struct proxy
    {
        int i;
        double * data;
        operator double() const
        {
            return data[i];
        }

        operator double*()
        {
            return &data[i];
        }

        operator double const *() const
        {
            return &data[i];
        }
    };

    proxy operator[] (int const i) {
        proxy p { i, data_ };        
        return p;
    }

    proxy const operator[] (int const i) const {
        proxy p { i, data_ };        
        return p;
    }
};

int main()
{
  {
    A a(12);

    double d = a[0];
    double * pd = a[0];
  }

  {
    A const ca(12);

    double d = ca[0];
    //double * pd = ca[0]; // does not compile thanks to overloads on const
    double const * pcd = ca[0];
  }
} 
```

但是，我认为这是一个*糟糕*的想法。让您`operator[]`返回一个值或指向该值的指针肯定会使您的类的用户感到困惑，此外还会使其在两种类型都可能的表达式中使用变得不切实际。例如，`std::cout << a[0];`不会编译（模棱两可的重载）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T21:47:17.987

Probably you need something like that:

```
class A {

private:
    double* data_;
    int N_;
    ... // other stuff
public:
    double operator[] (const int i) const { // note const here
        return data_[i];
    }

    double& operator[] (const int i) { // note reference here
        return data_[i];
    }
}; 
```

also operator should be public to have a sense.

# javascript - 如何在尊重 Ctrl-click 在新选项卡中打开 URL 的同时导航到 URL？

> ID：10824573
> 
> 赞同：8
> 
> 时间：2012-05-30T21:32:22.503
> 
> 标签：javascript, dom-events, unobtrusive-javascript

我希望能够（从 Javascript）导航，就好像单击了链接一样（但不一定在单击链接时 - 可能是另一个动作）。

我知道`window.location.href = '...';`and `window.location.replace('...');`，但是这些方法不允许用户通过按住`Cmd`(OS X) 或. 来指定新窗口、新选项卡等`Ctrl`。我希望能够在不手动检查这些键的状态的情况下做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-05T15:08:30.317

如果你想同时处理点击，正常和 ctrl-click 这就是我使用的：

```
$("li").on("click", function(e){
    var url = $(this).find("a").attr("href");
    if(e.ctrlKey){
        $('<a href="'+ url + '" target="_blank"></a>')[0].click();
    } else {
        document.location = url;
    }
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T04:09:41.960

这仅在您从用户触发的单击处理程序中执行时才有效，否则，浏览器会将其检测为不需要的弹出窗口并阻止它：

```
<div id="test">open in new tab</div>

$('#test').click(function(){    
    openInNewTab('http://example.com');
});

function openInNewTab(url)
{
    $('<a href="'+ url + '" target="_blank">open in new tab</a>')[0].click();
} 
```

我认为没有其他选择，因为这是一种安全行为。

# azure - Azure：使用远程桌面时，我在哪里可以找到我的角色日志？

> ID：10824574
> 
> 赞同：5
> 
> 时间：2012-05-30T21:32:32.887
> 
> 标签：azure, remote-desktop

当我在本地运行我的工作角色时，我可以打开 Windows Azure Compute Emulator 应用程序并查看我的工作进程的标准输出和错误。

当我将桌面远程访问到我的 Azure 实例时，我不知道从哪里获得相同的信息。我在哪里可以找到标准输出和错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T22:25:32.010

如果您想在实际部署中查看工作进程的标准输出和错误，则需要进行一些额外的配置。此数据必须存储在持久存储中。

第一步是在您的`WorkerRole`. 此处必须指定存储帐户。

下一步是向`OnStart()`您的`WorkerRole`. 在这里，您不仅可以配置标准输出和错误，还可以按照以下代码示例中提供的方式侦听 Windows 事件和诊断信息。

```
public override bool OnStart()
{
    DiagnosticMonitorConfiguration diagConfig = 
        DiagnosticMonitor.GetDefaultInitialConfiguration();

    // Windows event logs
    diagConfig.WindowsEventLog.DataSources.Add("System!*");
    diagConfig.WindowsEventLog.DataSources.Add("Application!*");
    diagConfig.WindowsEventLog.ScheduledTransferLogLevelFilter = LogLevel.Error;
    diagConfig.WindowsEventLog.ScheduledTransferPeriod = TimeSpan.FromMinutes(5);

    // Azure application logs
    diagConfig.Logs.ScheduledTransferLogLevelFilter = LogLevel.Verbose;
    diagConfig.Logs.ScheduledTransferPeriod = TimeSpan.FromMinutes(5);

    // Performance counters
    diagConfig.PerformanceCounters.DataSources.Add(
        new PerformanceCounterConfiguration()
    {
        SampleRate = TimeSpan.FromSeconds(5),
        CounterSpecifier = @"\Processor(*)\% Processor Time"
    });
    diagConfig.PerformanceCounters.ScheduledTransferPeriod = 
        TimeSpan.FromMinutes(5);
    DiagnosticMonitor.Start(
        "Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString", diagConfig);
    return base.OnStart();
} 
```

完成这些设置后，您的诊断数据将在配置的 Azure 表存储中可见。您可以在这里轻松编写工具来可视化您的数据，但也有一些商业工具为此内置了功能。例如 [Cerebrata 诊断管理器](http://cerebrata.com/Products/AzureDiagnosticsManager/Download.aspx)。

如果由于某种原因您不想使用 Azure 存储来存储日志文件，您可以实现一个自定义跟踪侦听器，该侦听器可能会在其他任何地方写入日志。[这](http://msdn.microsoft.com/en-us/library/ff647545.aspx)是有关如何执行此操作的说明。您可以简单地打开一个 http 端口并将它们传输到您自己的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T22:24:18.540

跟踪消息不会存储在 Window Azure 中的任何位置，相反，如果您正确配置 Azure 诊断，这些消息将从那里发送到 Windows Azure 表存储（WADLogsTable 表），您可以获得它们。

如果您想知道如何启用 Azure 跟踪诊断，请访问以下链接并查找**Windows Azure 诊断演示**代码示例：

[http://msdn.microsoft.com/en-us/library/windowsazure/hh411529.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh411529.aspx)

[您可以在此处](http://msdn.microsoft.com/en-us/magazine/ff714589.aspx)了解有关 Azure 诊断的详细信息。

# css - -webkit-溢出滚动：触摸；在 iPad 上中断滚动 iFrame

> ID：10824576
> 
> 赞同：0
> 
> 时间：2012-05-30T21:32:40.507
> 
> 标签：css, ipad, iframe, scroll

从我能找到的所有内容中，我需要包括 -webkit-overflow-scrolling: touch; 和溢出：在 iFrame 封闭 div 的 css 中的自动。

然而，我发现，如果我不包含 -webkit-overflow-scrolling: touch;，iFrame 将用 2 个手指滚动。但是，如果我将其包括在内，则滚动不再有效。

这是我的带有样式的html示例。我实际上正在使用 CSS 文件，但也尝试过这种方式......

```
<div class="wrapper">
    <div class="treeMenu" ></div>
    <div class="viewer" style="overflow: auto; -webkit-overflow-scrolling: touch">
        <iframe class='ifrm' scrolling='yes'></iframe>
    </div>      
</div> 
```

阅读这篇[文章后](https://stackoverflow.com/questions/10620736/webkit-overflow-scrollingtouch-breaks-on-ipad-when-toggeling-visibility-on-ipa)，我认为这可能是因为我正在动态删除 iFrame 并将其添加到 div 中。所以我把它改成了一个静态元素，并动态地改变了 iFrame 的 src。这并没有解决问题。

在用户点击链接以填充 iFrame 之前，我正在根据用户交互调整 div 的大小。这可能是问题吗？

关闭 webkit 调用并用 2 根手指滚动是可以的，只是滚动很不流畅。事实上，它可能对某些用户无法使用。我希望为 iPad “正确”设置滚动可以提高滚动性能。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:31:34.130

`-webkit-overflow-scrolling: touch``<iframe>`如果页面上有任何地方，即使它不是`<iframe>`您尝试滚动的地方，也无法正常工作。它是如何创建或显示的并不重要。

# grid - Extjs4 树面板从网格面板借用

> ID：10824580
> 
> 赞同：0
> 
> 时间：2012-05-30T21:33:04.280
> 
> 标签：grid, treepanel, extjs4.1

我试图在 tree.Panel 上实现可锁定功能，所以我从 grid.Panel 借来

```
Ext.tree.Panel(Ext.grid.Panel, ['bothCfgCopy','normalCfgCopy','lockedCfgCopy']); 
```

但现在我的网格列是对象，即树上的 column.$className。Panel 将返回一个对象，因为它们已被转换。我现在如何隐藏列，因为所有功能（例如 hide()、setVisible() 都已丢失）？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:09:16.620

It might not still be relevant, but [here's](https://github.com/matsbryntse/ExtJS4-Lockable-Tree/branches) an example of a buffering locking grid.

You can set buffering to false and use as is, or you can use it as a guideline for you current implementation.

# c# - 棘手的 Quartz.NET 场景

> ID：10824581
> 
> 赞同：8
> 
> 时间：2012-05-30T21:33:16.273
> 
> 标签：c#, oracle, windows-services, cron, quartz.net

好的，这里有一点背景。我有一个大型 Web 应用程序 (MVC3)，它可以处理各种不重要的事情。**我需要这个 Web 应用程序能够在 Oracle 数据库**中安排临时 Quartz.NET 作业。然后，我希望稍后通过**Windows 服务**执行这些作业。理想情况下，我想安排它们以均匀的间隔运行，但可以选择通过 Web 应用程序添加作业。

基本上，所需的架构是这样的一些变体：

Web 应用程序 <--> Quartz.NET <--> 数据库 <--> Quartz.NET <--> Windows 服务

到目前为止我编写的代码：

*   （目前）计划和运行作业的 Windows 服务。从长远来看，这显然不会是这种情况，但我想知道我是否可以保留它并对其进行修改，使其基本上代表上图中的两个“Quartz.NET”。
*   网络应用程序（我想细节在这里不是很重要）
*   作业（实际上只是*另一个*Windows 服务）

还有一些重要的注意事项：

*   它必须从 Windows 服务运行，并且必须通过 Web 应用程序进行调度（以减少 IIS 上的负载）
*   假设上面的项目符号仍然适用，上面的架构可以重新排列一点。

现在，有几个问题：

1.  这甚至可能吗？
2.  假设（1）通过，你们认为最好的架构是什么？请参阅我编写的第一个项目符号。
3.  有人可以给我一些 Quartz 方法，这些方法可以帮助我查询数据库，以便在它们已经安排好后执行？

只要它符合条件，就会有关于这个问题的赏金。如果问题在此之前以令人满意的方式回答，我仍然会将赏金奖励给答案的发布者。因此，无论如何，如果您在这里给出一个好的答案，您将获得赏金。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-31T21:10:54.650

我将尝试按照您提出问题的顺序回答您的问题。

1.  是的，有可能做到这一点。这实际上是使用 Quartz.Net 的一种常见方式。事实上，您也可以编写一个管理 Quartz.Net 调度程序的 ASP.Net MVC 应用程序。

2.  建筑学。理想情况下，在高层次上，您的 MVC 应用程序将使用 Quartz.Net API 与作为 Windows 服务安装在某处的 Quartz.Net 服务器通信。Quartz.Net 使用远程处理进行远程通信，因此使用远程处理的任何限制都适用（例如 Silverlight 不支持它等）。Quartz.Net 提供了一种将其安装为开箱即用的 Windows 服务的方法，因此除了将服务本身配置为使用（在您的情况下）AdoJobStore 以及启用远程处理。关于如何正确安装该服务需要注意一些事项，所以如果您还没有这样做，请查看[这篇文章](http://jvilalta.blogspot.com/2011/12/installing-quartnet-20-beta-1-as.html)。

在内部，在您的 MVC 应用程序中，您需要获取对调度程序的引用并将其存储为单例。然后在您的代码中，您将安排作业并通过此唯一实例获取有关调度程序的信息。你可以使用这样的东西：

```
public class QuartzScheduler
{
    public QuartzScheduler(string server, int port, string scheduler)
    {
        Address = string.Format("tcp://{0}:{1}/{2}", server, port, scheduler);
        _schedulerFactory = new StdSchedulerFactory(getProperties(Address));

        try
        {
            _scheduler = _schedulerFactory.GetScheduler();
        }
        catch (SchedulerException)
        {
            MessageBox.Show("Unable to connect to the specified server", "Connection Error", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
        }
    }
    public string Address { get; private set; }
    private NameValueCollection getProperties(string address)
    {
        NameValueCollection properties = new NameValueCollection();
        properties["quartz.scheduler.instanceName"] = "RemoteClient";
        properties["quartz.scheduler.proxy"] = "true";
        properties["quartz.threadPool.threadCount"] = "0";
        properties["quartz.scheduler.proxy.address"] = address;
        return properties;
    }
    public IScheduler GetScheduler()
    {
        return _scheduler;
    }
} 
```

此代码设置您的 Quart.Net 客户端。然后访问远程调度程序，只需调用

```
GetScheduler() 
```

1.  查询 下面是一些从调度程序获取所有作业的示例代码：

    ```
    public DataTable GetJobs()
    {
        DataTable table = new DataTable();
        table.Columns.Add("GroupName");
        table.Columns.Add("JobName");
        table.Columns.Add("JobDescription");
        table.Columns.Add("TriggerName");
        table.Columns.Add("TriggerGroupName");
        table.Columns.Add("TriggerType");
        table.Columns.Add("TriggerState");
        table.Columns.Add("NextFireTime");
        table.Columns.Add("PreviousFireTime");
        var jobGroups = GetScheduler().GetJobGroupNames();
        foreach (string group in jobGroups)
        {
            var groupMatcher = GroupMatcher<JobKey>.GroupContains(group);
            var jobKeys = GetScheduler().GetJobKeys(groupMatcher);
            foreach (var jobKey in jobKeys)
            {
                var detail = GetScheduler().GetJobDetail(jobKey);
                var triggers = GetScheduler().GetTriggersOfJob(jobKey);
                foreach (ITrigger trigger in triggers)
                {
                    DataRow row = table.NewRow();
                    row["GroupName"] = group;
                    row["JobName"] = jobKey.Name;
                    row["JobDescription"] = detail.Description;
                    row["TriggerName"] = trigger.Key.Name;
                    row["TriggerGroupName"] = trigger.Key.Group;
                    row["TriggerType"] = trigger.GetType().Name;
                    row["TriggerState"] = GetScheduler().GetTriggerState(trigger.Key);
                    DateTimeOffset? nextFireTime = trigger.GetNextFireTimeUtc();
                    if (nextFireTime.HasValue)
                    {
                        row["NextFireTime"] = TimeZone.CurrentTimeZone.ToLocalTime(nextFireTime.Value.DateTime);
                    }

                    DateTimeOffset? previousFireTime = trigger.GetPreviousFireTimeUtc();
                    if (previousFireTime.HasValue)
                    {
                        row["PreviousFireTime"] = TimeZone.CurrentTimeZone.ToLocalTime(previousFireTime.Value.DateTime);
                    }

                    table.Rows.Add(row);
                }
            }
        }
        return table;
    } 
    ```

[您可以在Github](https://github.com/adometry/QuartzNetManager/blob/master/ClickForensics.Quartz.Manager/QuartzScheduler.cs)上查看此代码

# vim - 如何格式化如下所示？

> ID：10824583
> 
> 赞同：5
> 
> 时间：2012-05-30T21:33:30.567
> 
> 标签：vim, formatting, text-width

这些是我在 .vimrc中**的格式选项：**

```
set formatoptions=tqronw
set formatlistpat=^\\([\\-\\*]\\\|[0-9]\\+[.)]\\)\\s*
set textwidth=72
set autoindent 
```

**1）**
我的文字：

```
- This is my text this is my text this is my text this is my text this is my text this is my text. 
```

格式化后的输出：

```
- This is my text this is my text this is my text this is my text this is my 
 text this is my text. 
```

预期输出：

```
- This is my text this is my text this is my text this is my text this is my 
  text this is my text. 
```

**2）**
我的文字：

```
for Biochemistry, conducted a quality clinical study to determine the effects of microwave cooking on food 
```

格式化后的输出：

```
for Biochemistry, conducted a quality clinical study to determine the
 effects of microwave cooking on food 
```

预期输出：

```
for Biochemistry, conducted a quality clinical study to determine the
effects of microwave cooking on food 
```

**编辑**
*为我的第一个问题找到了解决方案:)
文本中有（不可见）nbsp（无中断空格）。
当我用普通空格替换时，格式符合预期*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T06:29:12.617

让我对你的第二个问题进行大胆的猜测。尝试添加：

```
set nosmartindent 
```

# makefile - makefile 将特定变量作为先决条件

> ID：10824586
> 
> 赞同：9
> 
> 时间：2012-05-30T21:33:39.470
> 
> 标签：makefile, gnu-make

相关：[目标特定变量作为 Makefile 中的先决条件](https://stackoverflow.com/questions/1340060/target-specific-variables-as-prerequisites-in-a-makefile)

我正在尝试制作一个 Makefile，它使用特定于目标的变量来指定目标文件和最终可执行文件的输出目录。这个想法是维护两个独立的二进制版本，一个“发布”版本和一个带有额外调试信息的“调试”版本。

我的问题是'make'每次都会进行干净的构建，即使我没有改变任何东西。我很确定这是因为'make'在'debug'或'release'目标的先决条件中的变量声明之前评估目标'corewars'的先决条件。

Makefile 如下所示。

```
CXX=g++
LD=g++
LDFLAGS=
CXXFLAGS=-Iinclude -Wall -Wextra
OBJECTS=main.o Machine.o Core.o ProcessQueue.o Instruction.o
OUTPUT_DIR:=Test/

.PHONY: default
.PHONY: all
.PHONY: release
default: release
all: release
release: OUTPUT_DIR:=Release/
release: corewars

.PHONY: debug
debug: CXXFLAGS+=-DDEBUG -g
debug: OUTPUT_DIR:=Debug/
debug: corewars

corewars: $(OUTPUT_DIR) $(addprefix $(OUTPUT_DIR),$(OBJECTS))
    $(LD) -o $(addprefix $(OUTPUT_DIR),corewars) $(addprefix $(OUTPUT_DIR),$(OBJECTS))

Release:
    mkdir -p $@
Debug:
    mkdir -p $@

%.o: %.cpp include/%.h
    $(CXX) -c $(CXXFLAGS) $< -o $(OUTPUT_DIR)$@

.PHONY: clean
clean:
    $(RM) -r Release
    $(RM) -r Debug 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-30T22:28:19.053

首先，非虚假配方[**必须**创建一个目标，`$@`而不是`$(OUTPUT_DIR)$@`](http://make.mad-scientist.net/rules.html)。还要考虑将目录依赖项转换[为仅订单的](http://www.gnu.org/software/make/manual/make.html#Prerequisite-Types)先决条件。

为了在`$(OUTPUT_DIR)`先决条件列表中获得适当的值，您必须使用[辅助扩展](http://www.gnu.org/software/make/manual/make.html#Secondary-Expansion)，因为否则，在主要扩展期间，将`OUTPUT_DIR:=Test/`使用全局定义而不是特定于目标的定义。

不幸的是，我想不出一种理智的方法来使用目标特定变量使其工作，而不求助于二次扩展和 vpath 魔法。就我个人而言，我宁愿先设置环境（找出 的值`OUTPUT_DIR`等），然后使用正确的值重新执行 Make。

```
ifndef OUTPUT_DIR

.PHONY: default all release debug

default all: release

release: export OUTPUT_DIR := Release/
debug:   export OUTPUT_DIR := Debug/
debug:   export EXTRA_CXXFLAGS := -DDEBUG -g

release debug:
    @$(MAKE)

else

# ...
CXXFLAGS := -Iinclude -Wall -Wextra $(EXTRA_CXXFLAGS)

PROGRAM := $(OUTPUT_DIR)corewars
OBJECTS := $(addprefix $(OUTPUT_DIR), \
    main.o Machine.o Core.o ProcessQueue.o Instruction.o)

# Default target.
$(PROGRAM): $(OBJECTS) | $(OUTPUT_DIR)
    $(LD) -o $@ $<

$(OUTPUT_DIR)%.o: %.cpp | $(OUTPUT_DIR)
    $(CXX) -c $(CXXFLAGS) $< -o $@

$(OUTPUT_DIR):
    mkdir -p $@

endif # OUTPUT_DIR 
```

这两部分可以拆分为单独的 makefile，根（启动器）一个，以及做实际工作的一个，以使整个事情更易于管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-12T18:35:23.700

特定于目标的变量仅在目标配方及其递归先决条件的上下文中可用。也就是说，**特定于目标的变量不能用作目标或先决条件**。

[一种解决方法是那里](https://stackoverflow.com/questions/2580934/how-to-specify-different-debug-release-output-directories-in-qmake-pro-file/62350130#62350130)的makefile 。

# javascript - 将日期选择器添加到嵌套表单字段

> ID：10824587
> 
> 赞同：2
> 
> 时间：2012-05-30T21:33:43.177
> 
> 标签：javascript, ruby-on-rails, jquery-ui, calendar, nested-forms

我正在尝试将 jquery-ui 日期选择器添加到我的应用程序的嵌套表单字段中，但是当我使用新字段更新 DOM 时，我没有让日期选择器显示在创建的字段上。这是我为该应用程序工作的代码。

```
<%= form_for(@load) do |f| %>
  <%= f.error_messages %>

  <%= f.fields_for :destinations do |builder| %>
    <%= render "destination_fields", :f => builder %>
  <% end %>
  <p><%= link_to_add_fields " Add Destination", f, :destinations %></p> 
<% end %> 

_destination_fields.html.erb
============================
<fieldset>
  <%= f.text_field :arrival_date, :placeholder => "From:", :class => "datepicker" %>
</fieldset> 
```

添加字段的咖啡脚本：

```
jQuery ->

    $('form').on 'click', '.add_fields', (event) ->
        time = new Date().getTime()
        regexp = new RegExp($(this).data('id'), 'g')
        $(this).before($(this).data('fields').replace(regexp, time))
        event.preventDefault() 
```

添加字段的功能：

```
def link_to_add_fields(name, f, association)
    new_object = f.object.send(association).klass.new
    id = new_object.object_id
    fields = f.fields_for(association, new_object, child_index: id) do |builder|
      render(association.to_s.singularize + "_fields", f: builder)
    end
    link_to(name, '#', class: "add_fields btn btn-primary icon-plus", data: { id: id, fields: fields.gsub("\n",""), :class => "datepicker" })
end 
```

我编写的用于显示日期选择器的 javascript：

```
$(function() {
  $(".datepicker").datepicker({ dateFormat: 'yy-mm-dd', autoSize:true });
});

$(function() {
    $('.add_fields').on('click', function(){
      $(this).datepicker({ dateFormat: 'yy-mm-dd', autoSize:true });
    });
}); 
```

我在堆栈溢出时看到了其他解决此问题的方法，但他们的实现都没有解决我的问题。如您所见，javascript 检查带有“datepicker”类的任何字段，然后将 datepicker 类添加到其中。我很确定您需要向单击时添加新字段的按钮添加一个回调函数，这就是我所做的，但我不确定为什么我的函数无法正常工作。如果您需要更多信息来帮助解决这个问题，我很乐意提供。

# 解决方案编辑：

我将咖啡脚本文件更改为以下内容以使其按预期工作：

```
 jQuery ->
   datepicker_update = -> $("input.datepicker").datepicker({ dateFormat: 'yy-mm-dd', autoSize:true })

  $('form').on 'click', '.add_fields', (event) ->
    time = new Date().getTime()
    regexp = new RegExp($(this).data('id'), 'g')
    $(this).before($(this).data('fields').replace(regexp, time))
    event.preventDefault()
    datepicker_update() 
```

这是下面提供的两者的组合答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T22:07:38.690

您对“.add_fields”按钮的单击事件的回调是朝着正确方向迈出的一步。用你的模板代码和不清楚的 HTML 对我来说有点难以分辨，但以下似乎是问题所在：

```
$(function() {
    $('.add_fields').on('click', function(){
      //Below $(this) refers to $('.add_fields'). I assume that is a button and is not what you want to apply the datepicker to. 
      $(this).datepicker({ dateFormat: 'yy-mm-dd', autoSize:true });
    });
}); 
```

您正在尝试将日期选择器应用于 $('.add_fields')。我通常做的是创建一个 datepicker_update 函数，如下所示：

```
function datepicker_update(){
    $(".datepicker").datepicker({ dateFormat: 'yy-mm-dd', autoSize:true });
} 
```

然后，每当我用新的日期字段更新 DOM 时，我都会确保给它们 .datepicker 类，然后我调用 datepicker_update() 来查找任何 .datepicker 字段并将它们转换为日期选择器。您可能希望包含一个测试以查看给定字段是否已经应用了 datepicker，尽管我相信 jQuery UI 可能已经这样做了？

此外，最好在一个事件回调中包含 datepicker_update 和添加字段的过程，否则它可能会导致您尝试更新尚未完全进入 DOM 的字段的日期选择器的时间问题。确保您的代码以正确的顺序执行...也许尝试使用一些 console.logs 来检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-11T14:10:02.510

由于自定义侦听器和嵌套表单侦听器同时工作，因此侦听`click`有时可能不起作用。我们的自定义监听器可能在嵌套表单之前完成。在这种情况下，最后添加的字段将不会得到处理。

所以不要使用下面的代码

```
 $('.add_fields').on('click', function(){ 
```

使用`fieldAdded`由嵌套形式触发的事件，如下所示，

```
 $(document).on('nested:fieldAdded', function(event){
    // this field was just inserted into your form
     $(this).datepicker({ dateFormat: 'yy-mm-dd', autoSize:true });
  }) 
```

[在这里](https://github.com/ryanb/nested_form#javascript-events)查看详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T22:09:16.310

```
$(function() {
    $('.add_fields').on('click', function(){
      $('input.datepicker').datepicker({ dateFormat: 'yy-mm-dd', autoSize:true });
    });
}); 
```

# oracle - 为什么“缺少右括号”错误？

> ID：10824590
> 
> 赞同：2
> 
> 时间：2012-05-30T21:34:00.537
> 
> 标签：oracle, oracle10g, oracle11g

为什么查询会产生此错误？

> ORA-00907: 缺少右括号
> 00907\. 00000 - “缺少右括号”

```
select * from
(
  (select * from dual) alias1,

  (select * from dual) alias2
) 
```

我在 10g 和 11g 上出现错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:44:56.580

SQL 语法不正确。删除外圆括号，如下所示：

```
select * from 
(select * from dual) alias1, 
(select * from dual) alias2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:40:12.633

你的括号是平衡的，但是解析器很混乱，在它的混乱中，它产生了一个次优的错误消息。

你可以这样写：

```
SELECT *
  FROM (SELECT * FROM Dual) Alias1
  JOIN (SELECT * FROM Dual) Alias2 ON 1 = 1; 
```

# javascript - JavaScript - 自动启动方法

> ID：10824591
> 
> 赞同：0
> 
> 时间：2012-05-30T21:34:01.503
> 
> 标签：javascript

我有一个表格：

```
<tr>
<td class="td_left">Repeat password</td>
<td class="td_right"><input type="password" 
value="DEFAULT"
name="repass" size="40" id="repass_id" 
onkeypress="CorrectPass('repass_id')" onfocus="CorrectPass('repass_id')" 
onkeyup="CorrectPass('repass_id')" value="" /></td>
<td class="td_info"><div id="repass_correct"></div></td>
</tr> 
```

当我在该字段中单击鼠标时，开始启动方法“CorrectPass('repass_id')”。但我想，当我加载这个页面时，这个方法总是自动启动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:37:06.307

```
<script type="text/javascript">
   window.onload = function ()
   {
      CorrectPass('repass_id');
   };
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:37:19.487

把它放在body标签中。

```
<body onload="CorrectPass('repass_id')">
....
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T21:36:22.450

如果您想自动启动脚本，只需在标签之间编写它，如下所示：

```
<script type="text/javascript">
CorrectPass('repass_id')
</script> 
```

将其放在文档中的任何位置 - 最好介于`<head>`和`</head>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T21:36:46.400

> 但我想，当我加载这个页面时，这个方法总是自动启动

```
window.onload = function() {
  CorrectPass('repass_id');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T21:37:55.257

如果你使用 jQuery 并且想在 DOM 树完全加载后运行这个函数，那么使用

```
$(function() { CorrectPass('repass_id') }); 
```

# performance - 有没有办法加快 R 中的库加载速度？

> ID：10824592
> 
> 赞同：8
> 
> 时间：2012-05-30T21:34:20.167
> 
> 标签：performance, r, statistics

我有一个将`ggplot2`在第一行加载的 Rscript。

虽然加载库并不需要太多时间，因为这个脚本可能会在命令行中执行数百万次，所以速度对我来说真的很重要。

有没有办法加快这个加载过程？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T21:40:15.567

不要重新启动——保持一个持久的 R 会话，然后向它发出请求。像[Rserve](http://rforge.net/Rserve)这样的东西可以提供这一点，例如[FastRWeb](http://www.rforge.net/FastRWeb/)就很好地使用了它——用毫秒往返来生成图表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T22:09:03.267

Dirk 所说的，加上您可以使用该`exists`函数有条件地加载库，如

```
if ( ! exists( "some.function.defined.in.the.library" )){
    library( the.library )
} 
```

因此，如果您将其放入脚本中，您可以在同一个 R 会话中多次运行该脚本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T10:27:58.767

作为[@MikeDunlavey 回答](https://stackoverflow.com/a/10824958/755257)的补充：

实际上，两者都`library`检查`require`包是否已经加载。以下是`microbenchmark`我得到的一些时间安排：

```
> microbenchmark (`!` (exists ("qplot")), 
                  `!` (existsFunction ('qplot')),  
                  require ('ggplot2'),  
                  library ('ggplot2'),   
                  "package:ggplot2" %in% search ())

## results reordered with descending median:
Unit: microseconds
                             expr     min       lq   median       uq     max
3              library("ggplot2") 259.720 262.8700 266.3405 271.7285 448.749
1        !existsFunction("qplot")  79.501  81.8770  83.7870  89.2965 114.182
5              require("ggplot2")  12.556  14.3755  15.5125  16.1325  33.526
4 "package:ggplot2" %in% search()   4.315   5.3225   6.0010   6.5475   9.201
2                !exists("qplot")   3.370   4.4250   5.0300   6.2375  12.165 
```

为了比较，第一次加载：

```
> system.time (library (ggplot2))
   User      System verstrichen 
  0.284       0.016       0.300 
```

（这是几秒钟！）

最后，只要不需要`require`和之间的因子 3 = 10 μs，我会选择，否则使用.`"package:ggplot2" %in% search()``require``%in% search ()`

# ruby - 如何判断我的 Ruby 服务器脚本是否过载？

> ID：10824594
> 
> 赞同：3
> 
> 时间：2012-05-30T21:34:50.037
> 
> 标签：ruby

我的服务器上运行了一个守护进程的 ruby​​ 脚本，如下所示：

```
@server = TCPServer.open(61101)                         
loop do                                                 
  @thr = Thread.new(@server.accept) do |sock|
    Thread.current[:myArrayOfHashes] = []   # hashes containing attributes of myObject
    SystemTimer.timeout_after(5) do
      Thread.current[:string] = sock.gets
      sock.close

      # parse the string and load the data into myArrayOfHashes

      Myobject.transaction do           # Update the myObjects Table
        Thread.current[:myArrayOfHashes].each do |h|
          Thread.current[:newMyObject] = Myobject.new
          # load up the new object with data
          Thread.current[:newMyObject].save
        end
      end

    end
  end
  @thr.join
end 
```

该服务器接收和管理我在 Mac OS 10.6 上运行的 rails 应用程序的数据。客户端在 15 日每 15 分钟调用一次服务器，而我目前只有 16 个左右的客户端在 15 日每 15 分钟调用一次，我想知道以下几点：

1.  如果两个客户端几乎同时调用，一个客户端的连接尝试会失败吗？
2.  我如何才能确定我的服务器可以同时容纳多少个客户端连接？
3.  如何监控我的服务器使用了多少内存？

另外，是否有一篇文章您可以指点我，讨论实现这种服务器的最佳方式？我的意思是我可以让多个服务器实例监听同一个端口吗？那会有帮助吗？

我正在使用 Bluepill 来监控我的服务器守护进程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T00:14:26.403

**1 和 2**
答案是否定的，两个相互靠近的客户端连接不会导致连接失败（但是多个客户端连接可能会失败，见下文）。

原因是操作系统在所有服务器套接字中都有一个默认的所谓的*侦听队列。*因此，即使您`accept`在程序中调用的速度不够快，操作系统仍会继续为您缓冲传入的连接。只要监听队列没有被填满，它就会缓冲这些连接。

那么这个队列的大小是多少呢？

在大多数情况下，通常使用的默认大小是 5。大小是在您创建套接字并调用`listen`此套接字之后设置的（请参阅[此处的监听手册页](http://linux.die.net/man/2/listen)）。

因为 Ruby会`TCPSocket`自动为您调用`listen`，如果您查看 C 源代码，`TCPSocket`您会发现它确实将大小设置为 5：

[https://github.com/ruby/ruby/blob/trunk/ext/socket/ipsocket.c#L108](https://github.com/ruby/ruby/blob/trunk/ext/socket/ipsocket.c#L108)

`SOMAXCONN`在这里定义为 5：

[https://github.com/ruby/ruby/blob/trunk/ext/socket/mkconstants.rb#L693](https://github.com/ruby/ruby/blob/trunk/ext/socket/mkconstants.rb#L693)

现在，如果您没有足够快地调用 accept 并且队列被填满，会发生什么？答案可在以下手册页中找到`listen`：

> backlog 参数定义了 sockfd 的挂起连接队列可以增长到的最大长度。如果队列已满时连接请求到达，客户端可能会收到带有 ECONNREFUSED 指示的错误，或者，如果底层协议支持重传，则可能会忽略该请求，以便稍后重新尝试连接成功。

但是，在您的代码中，如果超过 5 个客户端尝试同时连接，则可能会导致队列填满：您在`@thr.join`循环结束时调用。

当你这样做时，实际上发生的事情是你的服务器不会接受任何新的传入连接，直到你接受线程中的所有东西都完成执行。

因此，如果数据库内容和您在接受线程中执行的其他操作需要很长时间，则侦听队列可能会同时填满。这取决于您的处理需要多长时间，以及有多少客户端可能同时连接。

**3**
你没有说你在哪个平台上运行，但是在 linux/osx 上最简单的方法就是[`top`](http://linux.die.net/man/1/top)在你的控制台中运行。对于更高级的内存监控选项，您可能需要查看这些：

[ruby/ruby on rails 内存泄漏检测](https://stackoverflow.com/questions/161315/ruby-ruby-on-rails-memory-leak-detection)
[跟踪 heroku 上的应用程序内存使用情况](https://stackoverflow.com/questions/8986217/track-application-memory-usage-on-heroku)

# paypal - GetShippingDetails 检索未定义的索引

> ID：10824595
> 
> 赞同：0
> 
> 时间：2012-05-30T21:34:53.047
> 
> 标签：paypal

标题几乎是不言自明的，当我收到包含所有 shinanigan 的 ?token 并调用 GetShippingDetails 时，我只得到了应该通过的*部分*变量 - 但也没有错误出现；

我的“测试账户”（买家）有*所有*地址、姓名、电话和其他未配置的东西，但这些变量不会出现。我得到的只是`$resArray["email"]`和`$resArray["firstName"]`所有其他人都作为未定义的索引出现。我正在使用默认的贝宝向导文件。

有人跳过这道篱笆吗？

* * *

所以，我试过`print_r($resArray)`返回这个：

> 数组（[TOKEN] => EC-79Y444941M2394358 [CHECKOUTSTATUS] => PaymentActionNotInitiated [TIMESTAMP] => 2012-06-05T11:08:41Z [CORRELATIONID] => 1c27fb16fd35 [ACK] => 成功 [VERSION] => 64 [BUILD ] => 2975009 [EMAIL] => moshma_1337887106_per@gmail.com [PAYERID] => M5FLRP2QZLGHG [PAYERSTATUS] => 已验证 [FIRSTNAME] => Mosh [LASTNAME] => Mage [COUNTRYCODE] => US [CURRENCYCODE] => EUR [AMT] => 9.00 [ITEMAMT] => 9.00 [SHIPPINGAMT] => 0.00 [HANDLINGAMT] => 0.00 [TAXAMT] => 0.00 [INSURANCEAMT] => 0.00 [SHIPDISCAMT] => 0.00 [L_NAME0] => HAMS [L_QTY0 ] => 1 [L_TAXAMT0] => 0.00 [L_AMT0] => 9.00 [L_DESC0] => 描述 [L_ITEMWEIGHTVALUE0] => 0.00000 [L_ITEMLENGTHVALUE0] => 0.00000 [L_ITEMWIDTHVALUE0] => 0.00000 [L_ITEMHEIGHTVALUE0] =>00000 [PEALAYEREQUEST_0_CURRencyCode] => eur [paymentrequest_0_amt] => 9.00 [PEALAGEREQUEST_0_0_ITEMAMT] => 9.00 [peaysrequest_0_sshippingmat] =>> 0.00 [paysect_0_0_handlingamt] PAYMENTREQUEST_0_INSURANCEOPTIONOFFERED] => false [L_PAYMENTREQUEST_0_NAME0] => HAMS [L_PAYMENTREQUEST_0_QTY0] => 1 [L_PAYMENTREQUEST_0_TAXAMT0] => 0.00 [L_PAYMENTREQUEST_0_AMT0] => 9.00 [L_PAYMENTREQUEST_0_DESC0] => descricao [L_PAYMENTREQUEST_0_ITEMWEIGHTVALUE0] => 0.00000 [L_PAYMENTREQUEST_0_ITEMLENGTHVALUE0] => 0.00000 [L_PAYMENTREQUEST_0_ITEMWIDTHVALUE0] => 0.00000 [L_PAYMENTREQUEST_0_ITEMHEIGHTVALUE0] => 0.00000 [PAYMENTREQUESTINFO_0_ERRORCODE] => 0）EUR [PEALDIONREQUEST_0_AMT] => 9.00 [PEALDREREQUEST_0_ITEMAMT] => 9.00 [PEALDIONREQUEST_0_SHIPPICTAMT] => 0.00 [peaysrequest_0_handlingamt] => 0.00 [paymentrequest_0_0_taxamt] L_PAYMENTREQUEST_0_NAME0] => HAMS [L_PAYMENTREQUEST_0_QTY0] => 1 [L_PAYMENTREQUEST_0_TAXAMT0] => 0.00 [L_PAYMENTREQUEST_0_AMT0] => 9.00 [L_PAYMENTREQUEST_0_DESC0] => descricao [L_PAYMENTREQUEST_0_ITEMWEIGHTVALUE0] => 0.00000 [L_PAYMENTREQUEST_0_ITEMLENGTHVALUE0] => 0.00000 [L_PAYMENTREQUEST_0_ITEMWIDTHVALUE0] => 0.00000 [L_PAYMENTREQUEST_0_ITEMHEIGHTVALUE0] => 0.00000 [PAYMENTREQUESTINFO_0_ERRORCODE] => 0)EUR [PEALDIONREQUEST_0_AMT] => 9.00 [PEALDREREQUEST_0_ITEMAMT] => 9.00 [PEALDIONREQUEST_0_SHIPPICTAMT] => 0.00 [peaysrequest_0_handlingamt] => 0.00 [paymentrequest_0_0_taxamt] L_PAYMENTREQUEST_0_NAME0] => HAMS [L_PAYMENTREQUEST_0_QTY0] => 1 [L_PAYMENTREQUEST_0_TAXAMT0] => 0.00 [L_PAYMENTREQUEST_0_AMT0] => 9.00 [L_PAYMENTREQUEST_0_DESC0] => descricao [L_PAYMENTREQUEST_0_ITEMWEIGHTVALUE0] => 0.00000 [L_PAYMENTREQUEST_0_ITEMLENGTHVALUE0] => 0.00000 [L_PAYMENTREQUEST_0_ITEMWIDTHVALUE0] => 0.00000 [L_PAYMENTREQUEST_0_ITEMHEIGHTVALUE0] => 0.00000 [PAYMENTREQUESTINFO_0_ERRORCODE] => 0)0.00 [PAYMENTREQUEST_0_HANDLINGAMT] => 0.00 [PAYMENTREQUEST_0_TAXAMT] => 0.00 [PAYMENTREQUEST_0_INSURANCEAMT] => 0.00 [PAYMENTREQUEST_0_SHIPDISCAMT] => 0.00 [PAYMENTREQUEST_0_INSURANCEOPTIONOFFERED] => false [L_PAYMENTREQUEST_0_NAME0] => HAMS [L_PAYMENTREQUEST_0_QTY0] => 1 [L_PAYMENTREQUEST_0_TAXAMT0] => 0.00 [ L_PAYMENTREQUEST_0_AMT0] => 9.00 [L_PAYMENTREQUEST_0_DESC0] => descricao [L_PAYMENTREQUEST_0_ITEMWEIGHTVALUE0] => 0.00000 [L_PAYMENTREQUEST_0_ITEMLENGTHVALUE0] => 0.00000 [L_PAYMENTREQUEST_0_ITEMWIDTHVALUE0] => 0.00000 [L_PAYMENTREQUEST_0_ITEMHEIGHTVALUE0] => 0.00000 [PAYMENTREQUESTINFO_0_ERRORCODE] => 0 )0.00 [PAYMENTREQUEST_0_HANDLINGAMT] => 0.00 [PAYMENTREQUEST_0_TAXAMT] => 0.00 [PAYMENTREQUEST_0_INSURANCEAMT] => 0.00 [PAYMENTREQUEST_0_SHIPDISCAMT] => 0.00 [PAYMENTREQUEST_0_INSURANCEOPTIONOFFERED] => false [L_PAYMENTREQUEST_0_NAME0] => HAMS [L_PAYMENTREQUEST_0_QTY0] => 1 [L_PAYMENTREQUEST_0_TAXAMT0] => 0.00 [ L_PAYMENTREQUEST_0_AMT0] => 9.00 [L_PAYMENTREQUEST_0_DESC0] => descricao [L_PAYMENTREQUEST_0_ITEMWEIGHTVALUE0] => 0.00000 [L_PAYMENTREQUEST_0_ITEMLENGTHVALUE0] => 0.00000 [L_PAYMENTREQUEST_0_ITEMWIDTHVALUE0] => 0.00000 [L_PAYMENTREQUEST_0_ITEMHEIGHTVALUE0] => 0.00000 [PAYMENTREQUESTINFO_0_ERRORCODE] => 0 )00 [PAYMENTREQUEST_0_INSURANCEOPTIONOFFERED] => false [L_PAYMENTREQUEST_0_NAME0] => HAMS [L_PAYMENTREQUEST_0_QTY0] => 1 [L_PAYMENTREQUEST_0_TAXAMT0] => 0.00 [L_PAYMENTREQUEST_0_AMT0] => 9.00 [L_PAYMENTREQUEST_0_DESC0] => descricao [L_PAYMENTREQUEST_0_ITEMWEIGHTVALUE0] => 0.00000 [L_PAYMENTREQUEST_0_ITEMLENGTHVALUE0] => 0.00000 [ L_PAYMENTREQUEST_0_ITEMWIDTHVALUE0] => 0.00000 [L_PAYMENTREQUEST_0_ITEMHEIGHTVALUE0] => 0.00000 [PAYMENTREQUESTINFO_0_ERRORCODE] => 0)00 [PAYMENTREQUEST_0_INSURANCEOPTIONOFFERED] => false [L_PAYMENTREQUEST_0_NAME0] => HAMS [L_PAYMENTREQUEST_0_QTY0] => 1 [L_PAYMENTREQUEST_0_TAXAMT0] => 0.00 [L_PAYMENTREQUEST_0_AMT0] => 9.00 [L_PAYMENTREQUEST_0_DESC0] => descricao [L_PAYMENTREQUEST_0_ITEMWEIGHTVALUE0] => 0.00000 [L_PAYMENTREQUEST_0_ITEMLENGTHVALUE0] => 0.00000 [ L_PAYMENTREQUEST_0_ITEMWIDTHVALUE0] => 0.00000 [L_PAYMENTREQUEST_0_ITEMHEIGHTVALUE0] => 0.00000 [PAYMENTREQUESTINFO_0_ERRORCODE] => 0)00000 [L_PAYMENTREQUEST_0_ITEMWIDTHVALUE0] => 0.00000 [L_PAYMENTREQUEST_0_ITEMHEIGHTVALUE0] => 0.00000 [PAYMENTREQUESTINFO_0_ERRORCODE] => 0)00000 [L_PAYMENTREQUEST_0_ITEMWIDTHVALUE0] => 0.00000 [L_PAYMENTREQUEST_0_ITEMHEIGHTVALUE0] => 0.00000 [PAYMENTREQUESTINFO_0_ERRORCODE] => 0)

再一次，所有未定义的都出现了：

> 注意：未定义索引：第 43 行 D:\Program Files\EasyPHP-5.3.9\www\YSHLM\paypal-landing.php 中的 SALUTATION
> 
> 注意：未定义索引：第 45 行 D:\Program Files\EasyPHP-5.3.9\www\YSHLM\paypal-landing.php 中的 MIDDLENAME

这适用于 SUFFIX、BUSINESS、PAYMENTREQUEST_0_SHIPTONAME、PAYMENTREQUEST_0_SHIPTOSTREET、PAYMENTREQUEST_0_SHIPTOSTREET2、PAYMENTREQUEST_0_SHIPTOCITY、PAYMENTREQUEST_0_SHIPTOSTATE、PAYMENTREQUEST_0_SHIPTOCOUNTRYCODE、PAYMENTREQUEST_0_SHIPTOPHONENUM、ADDRESSSTATUS、INVNUM。

这可能是 sandbox.paypal.com 上的配置错误吗？无论如何，我去仔细检查了，但我*确实*（至少）设置并保存了送货地址（商品需要去的地方，对吗？）。地址不是真实的，但我需要一个真实的地址吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:23:25.763

我真的希望 Paypal 能清理他们的文档，这与我上次与他们合作时完全不同。无论如何，只要看看我的旧代码，我就可以使用 GetShippingDetails 提取变量，您也可以随时使用它`print_r($resArray);`来查看所有内容。

```
EMAIL
PAYERID
PAYERSTATUS
SALUTATION
FIRSTNAME
MIDDLENAME
LASTNAME
SUFFIX
COUNTRYCODE
BUSINESS
SHIPTONAME
SHIPTOSTREET
SHIPTOSTREET2
SHIPTOCITY
SHIPTOSTATE
SHIPTOCOUNTRYCODE
SHIPTOZIP
ADDRESSSTATUS
INVNUM
PHONENUM 
```

实际上刚刚发现这个：[https](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_GetBillingAgreementCustomerDetails) ://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/ e_howto_api_nvp_r_GetBillingAgreementCustomerDetails 我猜贝宝改变了他们的方法名称？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:39:53.073

在我的 CallShortcutExpressCheckout 上，我`NOSHIPPING=1`定义了标志。这就是问题所在。我仍然需要检查一些变量，但没有一个对购物车系统造成问题。

感谢您的尝试，@David Nguyen，看来我是我自己的 Brutus。

# android - Android 上的大文本阴影

> ID：10824597
> 
> 赞同：0
> 
> 时间：2012-05-30T21:35:05.630
> 
> 标签：android, textview

我有一个应用程序，我正在尝试将文本阴影添加到 TextView。问题是：阴影总是很细。我希望它更厚。

我正在尝试生成“模因”，正如你们中的一些人可能从互联网上的“有趣网站”中知道的那样。我的目标是这样的字体：

[http://d24w6bsrhbeh9d.cloudfront.net/photo/4324188_460s.jpg](http://d24w6bsrhbeh9d.cloudfront.net/photo/4324188_460s.jpg)

我使用的是完全相同的字体 Impact。问题是，当我添加黑色边框阴影时，阴影不够明显，也不够宽。它几乎不引人注意。

我正在定义一个 FrameLayout，底部有图片和两个文本字段，一个在顶部，一个在底部。他们两个人都几乎看不到阴影。

我一直在使用参数 shadowDy、shadowDx 等。我知道 shadowRadius 是实际定义边框大小的参数，但我一直在尝试使用高于 1 和低于 1 的值，但我似乎无法得到任何好结果。大小和阴影密度的变化很小，但没有什么用处。

我考虑过另一种选择，这是不得已而为之，将文本绘制两次，在 BG 中使用较大的黑色字体并对齐字符间距，使黑色文本成为前面白色文本的阴影。

先感谢您 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:41:03.943

您将无法使用基本的 TextView 阴影来实现该效果。我会考虑添加一个中风：

[https://stackoverflow.com/a/2151964/321697](https://stackoverflow.com/a/2151964/321697)

[http://developer.android.com/reference/android/graphics/Paint.Style.html](http://developer.android.com/reference/android/graphics/Paint.Style.html)

# android - 扩展TextView时如何强制画布仅使用部分区域来绘制文本

> ID：10824599
> 
> 赞同：0
> 
> 时间：2012-05-30T21:35:24.497
> 
> 标签：android, android-canvas

我正在创建一个扩展 TextView 的自定义视图。我需要的是左侧的几个标签和 TextView 右侧的另一个检查器。

所以我可以绘制这些标签，然后保存画布并正确翻译它，以便可以在位图旁边绘制文本。我就是这样做的。

```
canvas.drawBitmap(bitmap1, 0, top, paint);
canvas.drawBitmap(bitmap2, bitmap1_width, top, paint);

canvas.save();
canvas.translate(bitmap1_width + bitmap2_width, 0); 
```

这里我想调用 super.onDraw 但要求它使用宽度，以便减去两个位图和检查器的宽度。

然后我可以打电话给我

```
canvas.drawBitmap(checker, checkerLeft, top, null); 
```

那么在翻译画布之后，我怎样才能告诉 super.onDraw 中的画布只使用测量的宽度呢？请随时提出任何替代方案。我确实想使用画布，因为我的要求比这个例子复杂一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:47:41.847

好的，我通过在调用 super.onDraw() 之前使用 canvas.scale(sx, sy) 更改比例因子来做到这一点。

这是以我想要的方式显示文本。如果有更好的答案，请发表。

```
canvas.save();
canvas.translate(margin, 0);
canvas.scale(scaleX, 1f);
super.onDraw(canvas);
canvas.restore(); 
```

# iphone - 需要在视图顶部显示一个旋转立方体

> ID：10824600
> 
> 赞同：0
> 
> 时间：2012-05-30T21:35:31.267
> 
> 标签：iphone, ios, user-interface, opengl-es

我的应用程序顶部有一个半透明图像的视图，我需要在该视图上显示一个 3D 立方体（甚至是一个 3D 外观相似的立方体 - 由 3 个多边形组成）。
立方体的每个面都是可触摸的，并且一旦被触摸就应该被识别。即，用它的 ID 触发一个事件，或者每次触发它自己的事件，这反过来又会转动立方体......我怎样才能做到这一点？

我将尝试想象我所追求的：

**所以，从这个显示的立方体开始......** ![在此处输入图像描述](../Images/70d730bc5d97c1d0f8d8ad6eb6d1da3e.png)

**摸红脸后** ![在此处输入图像描述](../Images/3e3fef13a49a4bcaed8a84c5c11be925.png)

这段代码只是显示了一个触发事件的简单可触摸按钮，这就是我现在所拥有的

```
@implementation cubeView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code

        [self setBackgroundColor:[UIColor clearColor]];
        UIImageView *view = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Label.png"]];
        // For RETINA DISPLAY create an image named Label@2x.png and make it twice big in x and in y
        [self addSubview:view];
        UILabel * lbl = [[UILabel alloc] initWithFrame:CGRectMake(20,20,100,30)];
        [lbl setText:@"Hello"];
        [lbl setBackgroundColor:[UIColor clearColor]];
        [self addSubview:lbl];
    }
    return self;
} 
```

**视图控制器**

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIView *container = [[[UIView alloc] initWithFrame:CGRectMake(100, 0, 400, 200)]  
autorelease];
    [self.view addSubview:container];
    container.alpha = 0.2;
    UIButton *b = [UIButton buttonWithType:UIButtonTypeCustom];
    b.frame = CGRectMake(0, 0, 201, 98);
    cubeView *cb = [[[SS alloc] initWithFrame:CGRectMake(0, 0, 201, 98)] autorelease];
    [b setImage:[self imageWithView:cb] forState:UIControlStateNormal];
    [container addSubview:b];
    [b addTarget:self action:@selector(clicked:)forControlEvents:UIControlEventTouchUpInside];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:47:36.160

I am not sure as to what exactly your question is, but if you want to figure out a way to rotate the cube,you'll need some coordinates which specify its edges and vertices. i have a rotating cube for my project, which uses rotation matrices to find the final coordinates of it. you need to feed in the angle through which you have to rotate.to 'turn' it, you need to go through the angle in steps of whatever speed/precision you like and keep a specific pause between successive calls of the 'view' cube function so that it rotates gradually. showing the cube works in matlab using the 'patch' command.maybe there's some similar function in ios dev.

# android - 无法在相对布局中呈现视图

> ID：10824601
> 
> 赞同：0
> 
> 时间：2012-05-30T21:35:46.930
> 
> 标签：android

我有一个相对布局，并且想要一个填充其高度的左对齐视图：

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#FF0" >

    <LinearLayout
        android:id="@+id/stripe"
        android:layout_width="20dp"
        android:layout_height="fill_parent"
        android:background="#F00"
        android:layout_alignParentLeft="true" 
        android:layout_alignParentTop="true"/>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/stripe" 
        android:layout_alignParentTop="true" 
        android:text="Some long string." />
</RelativeLayout> 
```

我看到为“条纹”保留的 20dp 宽度，但没有得到预期的红色填充。我确定“条纹”视图的可见性设置为可见（而不是不可见）。知道为什么这不起作用吗？

谢谢

# wso2 - carbon 应用程序中的 wso2 自定义调解器

> ID：10824602
> 
> 赞同：2
> 
> 时间：2012-05-30T21:35:50.437
> 
> 标签：wso2, esb, wso2carbon, mediator

我开发了一个自定义调解器及其相应的工厂/序列化器类，以便我可以在序列中为其配置复杂的配置选项。这是使用碳工作室的碳应用程序项目制作的。

问题是我可以使配置元素工作的唯一方法是在**.car**文件之外部署 jar文件。

我可以只部署**.car**文件以使其工作吗？我必须将**META-INF/services**文件夹放在哪里才能正常工作？

这是我的 CarbonAppProject 结构

```
CarbonApp
+--artifacts
   +--lib
   +--library
      +--bundle
         +--jXLS <-- Java Library Artifact
   +--synapse
      +--mediator
         +--XlsToObjectMediator <-- Custom Mediator Artifact
+--builder
+--META-INF
   +--services
      +--org.apache.synapse.config.xml.MediatorFactory <-- FILE
      +--org.apache.synapse.config.xml.MediatorSerializer <-- FILE
+--src
   +--main
      +--java
         +--<package> <-- mediator, factory and serializer clases 
```

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:06:04.407

你不能让它与这个版本的 Carbon Studio 一起工作，但它可以让它与它的新版本一起工作。[您可以从http://builder1.us1.wso2.org/~developerstudio/developer-studio/2.0.0/RC1/wso2-developer-studio_2.0.0.RC1.zip](http://builder1.us1.wso2.org/~developerstudio/developer-studio/2.0.0/RC1/wso2-developer-studio_2.0.0.RC1.zip)获得更新的版本

脚步。

1.  创建 ESB 自定义中介项目并在那里创建中介源
2.  将 META-INF/services 文件夹复制到同一个项目的 src/main/resources 文件夹中。
3.  使用 Maven 构建 Custom Mediator 项目
4.  创建一个 Java Library Artifact 项目并确保向其中添加 jXLS 库。
5.  使用 Maven 构建 Java 库工件项目
6.  创建碳应用项目
7.  添加 Custom Mediator Project 和 Java Library Artifact 项目作为 Carbon 应用程序项目的依赖项。
8.  使用 Maven 构建 C-App 项目

现在，您将能够在 ESB 中毫无问题地运行 ESB Custom Mediator。

```
.
|-- pom.xml
`-- src
    `-- main
        |-- java
        |   `-- ddd
        |       `-- dd.java
        `-- resources
            `-- META-INF
                `-- services
                    |-- org.apache.synapse.config.xml.MediatorFactory
                    `-- org.apache.synapse.config.xml.MediatorSerializer 
```

您的调解员项目结构将与上述类似

希望这可以帮助！！

谢谢。

/哈莎娜

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T07:04:17.217

我不认为在 JavaLibraryArtifact 项目和 Custom mediator 项目之间声明项目级别的依赖关系可以解决这个问题。

但是您可以通过将依赖项添加到调解器项目中的实际 3rd 方库来实现此目的。

脚步：

1.  右键单击 Custom mediator 项目，选择 Build Path -> Configure Build Path
2.  转到库选项卡并选择“添加罐子”按钮。这将填充项目浏览器对话框
3.  在项目浏览器中展开 JavaLibraryArtifact 项目并从那里的文件列表中选择 jXLS 库，然后单击“确定”

现在，您已将 jXLS 添加到自定义中介项目构建路径中。因此，您不会在您的 Custom Mediator 项目中看到任何错误。

如果您打开 Custom mediator 项目的 .Classpath 文件，您将看到类似于以下内容的条目。

```
<classpathentry kind="lib" path="/JavaLibArtifactProject/jXLS.jar"/> 
```

为了避免来自 Maven 的编译错误，您需要在 Custom mediator 项目 pom.xml 中添加一个 Dependency to jXLS library。

通过执行上述步骤，您可以避免在项目中复制 JXLS 库。

希望这可以帮助！！

谢谢。

/哈莎娜

# c++ - 在 C++ 中传递字符数组

> ID：10824612
> 
> 赞同：0
> 
> 时间：2012-05-30T21:36:31.207
> 
> 标签：c++, arrays

在传递用于通过地址（即直接通过其名称或`&name[0]`）引用字符串的字符指针时，必须传递原始字符串，因为我们是通过地址传递的。

但是，在执行以下代码后，我得到了第一个元素的两个不同的地址值，令人惊讶的是，它们相隔 2 个字节。

另外，在函数中修改字符串的内容，并没有改变传递的数组的内容，但这是因为一个新的字符串会产生一个新的地址，对吧？

但是关于第一个元素的地址不同，这怎么可能呢？

```
#include<conio.h>
#include<stdio.h>
#include<iostream.h>

void fn(char *arr)
{
    cout<<endl<<&arr;
    arr="hi";
}

void main()
{
    clrscr();
    char *arr="hey";
    cout<<endl<<"main "<<&arr;//the address is different from that in fn
    fn(arr);
    cout<<endl<<arr;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T21:40:09.890

您通过**value传递一个****指针**，然后比较指针的地址和副本，这当然不同。如果您想检查它们是否指向相同的内存地址，您可以这样做：

 **```
std::cout << (void*)arr << std::endl; 
```

> 在函数中修改字符串的内容，并没有改变传递的数组的内容

您不是在修改字符串的内容，而是重新分配指针的副本以指向不同的字符串文字。另请注意，修改指向的内存（文字）将是未定义的行为。

编译器让代码通过（即编译它）的唯一原因是有一个向后兼容的特性，它允许你有一个`char*`指向字符串内容的文字（类型`const char[]`）。你应该得到一个警告，你应该避免这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T02:42:17.277

仅供参考。我无法评论有关传递字符数组的类似问题，因为它已作为副本关闭，但这个问题相当重要，所以希望你不介意我是否交叉发布。

在生产应用程序中使用字符串时，您通常使用 UTF-8，因为它无需付出太多努力就能显着增加市场。

[http://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

大多数应用程序还使用字符串类来封装字符。然后你可以使用类似的东西：

void fn(..., const std::string &static_string, ...);

在你的标题中。如果您使用像 gettext 这样的库，您的代码如下所示：

printf(gettext("突然有一行很好.."));

其中英文字符串充当本地化文件的直观索引，您可以在安装或运行时快速轻松地切换语言。

如果您因为使用 C 而不能使用类，那么 gettext 文档也涵盖了这种情况。**

# c# - 使用 AJAX 方法填充 DropDownList 错误 500

> ID：10824615
> 
> 赞同：0
> 
> 时间：2012-05-30T21:36:46.227
> 
> 标签：c#, jquery

我正在尝试使用 AJAX 填充下拉列表，但我收到了方法错误 500。我花了一整天的时间尝试在几个论坛上找到的所有内容，但似乎没有任何帮助。

如果有人可以在这里帮助我，那就太好了。谢谢！

**ddl.aspx**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="ddl.aspx.cs" Inherits="TSS.Administrator.ddl" %>

<%@ Register TagPrefix="ajax" Namespace="AjaxControlToolkit" Assembly="AjaxControlToolkit" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager runat="server">
    </asp:ScriptManager>
    <div>
        <asp:DropDownList ID="ddlCourseLevel" runat="server">
        </asp:DropDownList>
        <ajax:CascadingDropDown ID="ccdCourseLevel" runat="server" Category="CourseLevel"
            TargetControlID="ddlCourseLevel" PromptText="---Select CourseLevel" LoadingText="Loading Countries.."
            ServiceMethod="BC" ServicePath="~/WebServices/ws1.asmx">
        </ajax:CascadingDropDown>
    </div>
    </form>
</body>
</html> 
```

**ws1.asmx**

```
<%@ WebService Language="C#" CodeBehind="ws1.asmx.cs" Class="TSS.ws1" %> 
```

**ws1.asmx.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Data;
using System.Data.SqlClient;
using System.Collections.Specialized;
using System.Configuration;
using AjaxControlToolkit;
using System.Web.Script.Services;

namespace TSS
{
    /// <summary>
    /// Summary description for ws1
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    [System.Web.Script.Services.ScriptService]
    public class ws1 : System.Web.Services.WebService
    {

        dbConnection dbConn = new dbConnection();

        [WebMethod]
        public CascadingDropDownNameValue[] BC(string knownCategoryValues, string category)
        {

            DataTable dt = new DataTable();

            //CourseLevelDAL _courseLevelDAL = new CourseLevelDAL();

            dt = Admin_Course_WebService.PopulateCourseLevel();

            //create list and add items in it by looping through dataset table
            List<CascadingDropDownNameValue> courseleveldetails = new List<CascadingDropDownNameValue>();
            foreach (DataRow dtrow in dt.Rows)
            {
                string Name = dtrow["Name"].ToString();
                string Id = dtrow["Id"].ToString();
                courseleveldetails.Add(new CascadingDropDownNameValue(Name, Id));
            }
            return courseleveldetails.ToArray();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:53:10.687

使用调试工具Fiddler，发现找不到Web Method BC，之所以找不到，是因为它是静态方法。我将其更改为公共并添加了属性 [System.Web.Script.Services.ScriptService]。有效！

# c# - 使用 HtmlAgilityPack 计算特定子节点

> ID：10824623
> 
> 赞同：2
> 
> 时间：2012-05-30T21:37:36.613
> 
> 标签：c#, html, xpath, html-agility-pack

我在 HtmlAgilityPack 中使用的这个 XPath 选择有很多麻烦。

我想选择`li`嵌套在另一个`li`女巫中的所有元素（如果它们存在）`a`带有`id="menuItem2"`. 这是html示例：

```
<div id="menu">
  <ul>
    <li><a id="menuItem1"></a></li>
    <li><a id="menuItem2"></a>
       <ul>
          <li><a id="menuSubItem1"></a></li>
          <li><a id="menuSubItem2"></a></li>
       </ul>
    </li>  
    <li><a id="menuItem3"></a></li>
  </ul>
</div> 
```

这是我一直在使用的 XPath。当我失去这部分`/ul/li`时，它会得到我`a`想要的标签，但我需要他的后代......这个 XPath 总是返回 null。

```
string xpathExp = "//a[@id='" + parentIdHtml + "']/ul/li";
HtmlNodeCollection liNodes = htmlDoc.DocumentNode.SelectNodes(xpathExp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:29:06.190

以下 XPath 应该可以工作。

```
string xpathExp = "//li/a[@id='" + parentIdHtml + "']/following-sibling::ul/li"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T04:01:15.853

从您的描述中，我认为您想选择`<li>`包含带有 id和?的`<a>`标签的两个元素`menuSubItem1``menuSubItem2`

如果是这样，那么这就是您所需要的

```
//li[a/@id="menuItem2"]//li 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T22:20:50.167

为您的 xpath 试试这个：

```
string xpathExp = "//li[a/@id='" + parentIdHtml + "']/ul/li"; 
```

问题是您选择了`a`没有子节点的节点本身`ul`。您需要先选择`li`节点，然后过滤其`a`子节点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T22:41:28.017

XPath 太乱了。您正在使用 HtmlAgilityPack，您不妨利用 LINQ。

```
//find the li -- a *little* complicated with nested Where clauses, but clear enough.
HtmlNode li = htmlDoc.DocumentNode.Descendants("li").Where(n => n.ChildNodes.Where(a => a.Name.Equals("a") && a.Id.Equals("menuItem2", StringComparison.InvariantCultureIgnoreCase)).Count() > 0).FirstOrDefault();
IEnumerable<HtmlNode> liNodes = null;
if (li != null)
{
    //Node found, get all the descendent <li>
    liNodes = li.Descendants("li");
} 
```

# google-app-engine - Google App Engine：Bulkuploader：int64 太大错误

> ID：10824625
> 
> 赞同：2
> 
> 时间：2012-05-30T21:37:45.770
> 
> 标签：google-app-engine, bulkloader

使用 bulkuploader 将数据上传到数据存储时出现此错误。以前的 csv 文件可以很好地上传数据。新的 csv 文件有一个包含字符串列表的额外字段。（例如 A、B、E、G、E、F）。以下是我得到的错误。

```
Traceback (most recent call last):
  File "/opt/google_appengine_1.6.4/google/appengine/tools/adaptive_thread_pool.py", line 176, in WorkOnItems
    status, instruction = item.PerformWork(self.__thread_pool)
  File "/opt/google_appengine_1.6.4/google/appengine/tools/bulkloader.py", line 764, in PerformWork
    transfer_time = self._TransferItem(thread_pool)
  File "/opt/google_appengine_1.6.4/google/appengine/tools/bulkloader.py", line 935, in _TransferItem
    self.request_manager.PostEntities(self.content)
  File "/opt/google_appengine_1.6.4/google/appengine/tools/bulkloader.py", line 1420, in PostEntities
    datastore.Put(entities)
  File "/opt/google_appengine_1.6.4/google/appengine/api/datastore.py", line 576, in Put
    return PutAsync(entities, **kwargs).get_result()
  File "/opt/google_appengine_1.6.4/google/appengine/datastore/datastore_rpc.py", line 786, in get_result
    results = self.__rpcs[0].get_result()
  File "/opt/google_appengine_1.6.4/google/appengine/api/apiproxy_stub_map.py", line 592, in get_result
    return self.__get_result_hook(self)
  File "/opt/google_appengine_1.6.4/google/appengine/datastore/datastore_rpc.py", line 1556, in __put_hook
    self.check_rpc_success(rpc)
  File "/opt/google_appengine_1.6.4/google/appengine/datastore/datastore_rpc.py", line 1191, in check_rpc_success
    rpc.check_success()
  File "/opt/google_appengine_1.6.4/google/appengine/api/apiproxy_stub_map.py", line 558, in check_success
    self.__rpc.CheckSuccess()
  File "/opt/google_appengine_1.6.4/google/appengine/api/apiproxy_rpc.py", line 156, in _WaitImpl
    self.request, self.response)
  File "/opt/google_appengine_1.6.4/google/appengine/ext/remote_api/remote_api_stub.py", line 248, in MakeSyncCall
    handler(request, response)
  File "/opt/google_appengine_1.6.4/google/appengine/ext/remote_api/remote_api_stub.py", line 397, in _Dynamic_Put
    'datastore_v3', 'Put', put_request, put_response)
  File "/opt/google_appengine_1.6.4/google/appengine/ext/remote_api/remote_api_stub.py", line 177, in MakeSyncCall
    self._MakeRealSyncCall(service, call, request, response)
  File "/opt/google_appengine_1.6.4/google/appengine/ext/remote_api/remote_api_stub.py", line 185, in _MakeRealSyncCall
    request_pb.set_request(request.Encode())
  File "/opt/google_appengine_1.6.4/google/net/proto/ProtocolBuffer.py", line 56, in Encode
    self.Output(e)
  File "/opt/google_appengine_1.6.4/google/net/proto/ProtocolBuffer.py", line 205, in Output
    self.OutputUnchecked(e)
  File "/opt/google_appengine_1.6.4/google/appengine/datastore/datastore_pb.py", line 4400, in OutputUnchecked
    self.entity_[i].OutputUnchecked(out)
  File "/opt/google_appengine_1.6.4/google/appengine/datastore/entity_pb.py", line 2380, in OutputUnchecked
    self.property_[i].OutputUnchecked(out)
  File "/opt/google_appengine_1.6.4/google/appengine/datastore/entity_pb.py", line 1307, in OutputUnchecked
    self.value_.OutputUnchecked(out)
  File "/opt/google_appengine_1.6.4/google/appengine/datastore/entity_pb.py", line 945, in OutputUnchecked
    self.referencevalue_.OutputUnchecked(out)
  File "/opt/google_appengine_1.6.4/google/appengine/datastore/entity_pb.py", line 675, in OutputUnchecked
    self.pathelement_[i].OutputUnchecked(out)
  File "/opt/google_appengine_1.6.4/google/appengine/datastore/entity_pb.py", line 135, in OutputUnchecked
    out.putVarInt64(self.id_)
  File "/opt/google_appengine_1.6.4/google/net/proto/ProtocolBuffer.py", line 402, in putVarInt64
    raise ProtocolBufferEncodeError, "int64 too big" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-20T21:56:39.793

将有问题的条目的数据类型从 更改`IntegerProperty`为`StringProperty`可能会有所帮助。

我遇到了同样的问题，因为我将实体存储`user_id`为，但是当遇到更大的数字时，它根本无法容纳它。所以我像现在一样存储它。`Users``Integer``String`

# meteor - Meteor：当使用“空格”字符时，跨浏览器的自动更新在我的应用程序中失败

> ID：10824632
> 
> 赞同：2
> 
> 时间：2012-05-30T21:38:12.933
> 
> 标签：meteor

这是一件奇怪的事情。我已经启动并运行了我的第一个 Meteor 应用程序。

您可以在以下网址看到它：http: [//www.howli.st](http://www.howli.st)

这是正在发生的事情：

1.  按下过程以使用示例数据将您带到数据输入屏幕，您可以在其中弹出一些值
2.  从右上角获取会话引用，然后在另一个浏览器中再次打开 howli.st，然后将该会话引用粘贴到右侧的框中以“检索数据”
3.  两个浏览器现在都在同一个会话中，如果您在其中一个中键入数据，它将在另一个中更新。

小故障：以下是表单绑定框的一系列更改所发生的情况：

1.  “你好”->“你好”
2.  "hello world" -> "hello"**注意其他浏览器没有变化**
3.  "helloworld" -> "helloworld"**其他浏览器现在更新了！**

这是我的应用程序中的代码：

html:

```
 <tr>
       <td>form binding</td>
       {{#each sessioninfo}}
       <td colspan="2"><input type="text" id="formbinding" value={{formbind}} ></td
       {{/each}}    
    </tr> 
```

js：

```
Template.thedata.events = {    
 'keyup #formbinding':function(){
     //save formbinding to MyItems
     var thisSession = Session.get("thisSession");
     MySessions.update({_id: thisSession}, {$set : { formbind : $('#formbinding').val()}});
  }
};

Template.thedata.sessioninfo = function(){
    return MySessions.find({}); 
}; 
```

感激地收到任何帮助。

**更新**如果我使用变量 theformbind = $('#formbinding').val() 传递给我的更新语句，那么另一个浏览器会更新，但它只显示空格之前的文本，即

1.  abcd -> abcd
2.  ab cd -> ab

在 mongodb 中查看正确的值“ab cd”已存储

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T01:27:21.620

o_O

再看一眼，我现在看到了

```
<td colspan="2"><input type="text" id="formbinding" value={{formbind}} ></td> 
```

在表单绑定周围没有`"`，因此您希望它是

```
<td colspan="2"><input type="text" id="formbinding" value="{{formbind}}"></td> 
```

这样它就允许包含空格的东西（而不是对它们提出新的论点）。

# drupal - Drupal 第一个模块——500 内部服务器错误

> ID：10824633
> 
> 赞同：0
> 
> 时间：2012-05-30T21:38:14.603
> 
> 标签：drupal, drupal-6, drupal-modules

这是我的第一个模块。一个星期以来，我一直在尝试成功安装我的模块。

我走遍了每一行。甚至正在安装架构并在系统表中进行条目。但是在启用模块之后它仍然显示 500 Internal Server Error，直到我从系统表中删除该条目。

请指导我做错了什么。

*注意： sisattribute 表已经在 drupal 数据库中创建*

我的 .install 文件

```
<?php

/**
* @file
*/

function sisinstitute_install() {
 drupal_install_schema('sisinstitute');
 variable_set('node_options_sisinstitute', array('status'));

 $attributes = array();

 $attributes['Country'] = array(
  'US' => 'United States of America',
  'AD' => 'Andorra',
  'AE' => 'United Arab Emirates',
  'AF' => 'Afghanistan',
 );

$s = "INSERT INTO {sisattribute} (domain, akey, avalue, weight) VALUES ('%s', '%s', '%s', %d)";
$prevdomain = '';
$weight = 0;
foreach ($attributes as $domain => $attribute) {
if ($domain != $prevdomain) $weight=0;
foreach ($attribute as $key => $value) {
  db_query($s, $domain, $key, $value, $weight);
  $weight++;
}
$prevdomain = $domain;
}
}

function sisinstitute_disable() {
drupal_set_message(t('Please note that they will now have reduced functionality, and will not be protected by previous access controls.'), 'warning');
}

function sisinstitute_uninstall() {
 drupal_uninstall_schema('sisinstitute');

db_query($s = "DELETE FROM {sisattribute} WHERE domain IN ('Country')");
}

function sisinstitute_schema() {
  $schema['sisinstitute'] = array(
   'fields'        => array(
    'vid'         => array('type' => 'int', 'not null' => TRUE, 'default' => 0),
    'nid'         => array('type' => 'int', 'not null' => TRUE, 'default' => 0),
    'country'     => array('type' => 'varchar', 'length' => 100),
    'www'         => array('type' => 'varchar', 'length' => 100),
    'phone'       => array('type' => 'varchar', 'length' => 100),
    'email'       => array('type' => 'varchar', 'length' => 50),
    'provstate'   => array('type' => 'varchar', 'length' => 50),
    'zip'         => array('type' => 'varchar', 'length' => 10),
    'city'        => array('type' => 'varchar', 'length' => 100),
    'address'     => array('type' => 'varchar', 'length' => 100),
    'orglanguage' => array('type' => 'varchar', 'length' => 100),
    'isactive'    => array('type' => 'int', 'default' => 1),

  ),
  'primary key' => array('vid'),
  'indexes' => array(
  'nid'     => array('nid')
  ),
  );

  return $schema; 
  } 
```

还有我的 .module 文件：

```
<?php
// $Id$

/**
*@File
*Module for Institution support in SIS package
*/

/**
*hook_help()
*/

/**
*hook_menu()
*/

/**
*hook_perm()
*/
function sisinstitute_perm() {
  return array('access institute', 'create institute', 'edit institute', 'delete institute', 'view belonged institute', 'view all institutes');

}

/**
*hook_access()
*/
function sisinstitute_access($op, $node. $account=NULL) {
 if (empty($account)) {
  global $user;
  $account = $user;
 }

 if (is_numeric($node)) $node = node_load($node);

 if (!isset($account->sisinstitute_nid) && module_exists('sisstudent')) {
  _sisstudent_load($account);
 }

 if (!isset($account->sisinstitute_nid) && module_exists('sisstaff')) {
  _sisstaff_load($account);
 }

 switch($op) {
  case 'create': return user_access('create institute', $account);
  case 'update': return user_access('edit institute', $account);
  case 'delete': return user_access('delete institute', $account);
  case 'view'  : {
                  if (user_access('view all institutes', $account))
                    return TRUE;
                  elseif (user_access('view belonged institute', $account) && $account->sisinstitute_nid == $node->nid)
                    return TRUE;
                  else return FALSE;
                 }
 }
}

/**
*hook_node_info()
*/

function sisinstitute_node_info() {
 return array(
  'sisinstitute' => array(
  'name' => t('Institute'),
  'module' => 'sisinstitute',
  'description' => t("Institute for SIS"),
  'title_label' => t("Name"),
  'body_label' => t("Note"),
)
);

}

/**
*hook_form()
*/
function sisinstitute_form(&$node) {
 $type = node_get_types('type', $node);

 //$form['#attributes']['class'] = 'sismcomponent_node_form';

 $form['title'] = array(
  '#type' => 'textfield',
  '#title' => check_plain($type->title_label),
  '#required' => TRUE,
  '#default_value' => $node->title,
  // '#weight' => module_exists('content') ? content_extra_field_weight($node->type, 'title') : -18,
  );

$form['isactive'] = array(
 '#type' => 'checkbox',
 '#title' => t('Active'),
 '#default_value' => $node->isactive,
);

return $form;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:18:13.223

嗯知道了:-)（8小时后）

功能 sisinstitute_access($op, $node.$account=NULL) {

$node 后面有句点而不是逗号

# javascript - Javascript 在 IE8 中不起作用

> ID：10824636
> 
> 赞同：2
> 
> 时间：2012-05-30T21:38:43.630
> 
> 标签：javascript, internet-explorer-8, scheduler

我在使用 javascript 处理 userclick 事件的应用程序中使用 dhtmlxscheduler。该应用程序一直运行良好，现在它在 IE8 中无法正常运行。没有进行任何代码更改。它在 IE7、IE8 兼容模式和所有其他浏览器中运行良好。我的问题是，如果没有我们方面的任何更改，应用程序 javascript 怎么会突然在 IE8 中无法正常工作？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T07:47:05.800

放入`<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9" >`你的`html head tag`试试。打开兼容性视图会将 IE 转换为 IE7 呈现。您可以查看兼容性参考链接[http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx#SetMode](http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx#SetMode)

# javascript - “Uncaught TypeError: undefined is not a function”错误只发生在生产中——不在开发中

> ID：10824638
> 
> 赞同：3
> 
> 时间：2012-05-30T21:39:05.757
> 
> 标签：javascript, jquery, ruby-on-rails

出现了一个奇怪的错误，我们有点难过。

该错误仅出现在生产中 - 而不是本地。

每次加载网页时，都会生成以下 JavaScript 错误：“Uncaught TypeError: undefined is not a function。”

代码的位置在以前可以正常工作的第 3 方代码（即 Colorbox）中。

我们使用 jQuery 和 Rails。这可能与 Rails 将文件合并为一个巨型 JS 文件的顺序有关吗？

要重现并查看错误，请访问[www.panabee.com](http://www.panabee.com)。在 Firebug 或 Chrome 的开发者工具中查看错误。该错误将出现在主页上（第一印象真棒）。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T22:08:29.133

all.zip 的第 10587 行。

```
* Date: Mon May 16 05:32:54 PDT 2011
*/"use strict",function(a,b,c){function z(b){ 
```

将“使用脚本”后的 , 更改为 ; - 由于语法问题，此处函数 def 变为未定义。

# jquery-mobile - 使用 pageid 创建指向页面的链接不适用于使用 jQuery Mobile 的 MVC

> ID：10824639
> 
> 赞同：1
> 
> 时间：2012-05-30T21:39:06.657
> 
> 标签：jquery-mobile, asp.net-mvc-4

我正在使用带有 MVC 的 jQuery Mobile。我不知道如何使用 pageid 创建指向汽车控制器索引页面的链接。我在 _Layout.cshtml 中定义了两个页面： 第一页：

```
<div data-role="page" id="CarID">
<div data-role="header">
  <ul>
     <li><a href="@Url.Content("~/Car/Index/#CarID")">1\. Page Car</a></li>
     <li><a href="@Url.Content("~/Car/Index/#MaintID")">2\. Page Maint</a></li>
  </ul>
</div>
<div data-role="content">
   @RenderSection("PageCar") 
```

第二页：

```
<div data-role="page" id="MaintID">
<div data-role="header">
   <ul>
      <li><a href="@Url.Content("~/Car/Index/#CarID")" >1\. Page Car</a></li> 
      <li><a href="@Url.Content("~/Car/Index/#MaintID")">2\. Page Maint</a></li> 
   </ul>
</div>
<div data-role="content">
   @RenderSection("PageMaint") 
```

问题是这些链接在主控制器的索引页面中呈现部分，而不是汽车控制器中的索引页面。没有页面 id 的链接可以工作，所以 href="@Url.Content("~/Car/Index") 可以工作，但显然由于没有页面 id，我不知道如何获取特定的页面 ID。我尝试了所有类型的链接, 没有一个将无法正常工作或将我带到主控制器索引视图：

```
<li><a href="#MainID")">2 Page Maint</a></li>
<li><a href="@Url.Action("Index", "Car", new { id ="MaintID" })">2 Page Maint</a></li> 
<li>@Html.ActionLink("2 Page Maint", "Index", "Car", new { id = "Maint" }) </li> 
```

有人可以帮助创建带有 pageid 的汽车控制器索引页面的链接吗？任何帮助将不胜感激。谢谢

# javascript - jquery 选择器复选框

> ID：10824640
> 
> 赞同：0
> 
> 时间：2012-05-30T21:39:14.227
> 
> 标签：javascript, jquery

我的页面比较复杂，我很确定它的 jquery 表现得很奇怪。所以我会先添加相关内容，如果有人需要更多信息，请告诉我，我会提供。

前提是有一个包含关键字气泡的 div。这些气泡有一个工具提示（qTip 插件），其中包含您可以选择和取消选择的相关信息。有时关键字具有重叠的相关信息，因此当取消选择一个时，需要同时取消选择所有其他关键字。此气泡列表是通过 ajax 动态构建的，并且可以继续实时添加到页面中。

问题是，当我单击某些复选框时，它们并没有取消选中，但是如果我在另一个工具提示中单击同一个复选框，它就可以工作……现在也可以让原来的复选框正常工作。我不知道为什么有些工作而其他人不工作。我认为这与实时 onlick 函数绑定和/或选择器的编写方式有关。

以下函数基于 json 对象写入工具提示的 html 内容，因此假设内容存在。底部的 jquery 代码是我绑定到复选框的函数。

```
function constructSpecializationsHTML(data){
    var html = '';
    for(i = 0; i < data.specializations.length; i++){
        if(data.specializations[i].name != ''){
            html += "<span class='is-specialization-line'>";
            html +=     "<input class='is-specialization-checkbox' type='checkbox' name='" + data.specializations[i].name + "' checked='" + isSpecializationChecked(data.specializations[i].name) + "'/>";
            html +=     "<span>" + data.specializations[i].name + "</span>";
            html += "</span><br />"; 
        } else {
            html += "This keyword is not known in our ontology";
        }
    }
    return html;
}

$(document).on("click", ".is-specialization-checkbox", function(){ 
    var $checkboxs = $(".is-specialization-checkbox[name='" + $(this).attr("name") + "']")
    $checkboxs.prop("checked", !$checkboxs.prop("checked"));
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:33:38.900

首先，当点击事件触发时，“checked”属性已经改变，这意味着你的复选框的状态是不同的。

改变

```
!$checkboxs.prop("checked") 
```

至

```
$(this).prop("checked") 
```

解决了。

其次，当您只显示一个工具提示时，您的选择只会返回一个复选框。如果您在选中或取消选中之前显示所有工具提示，则会返回正确的数字。我的猜测是 qTip 在显示之前不会将工具提示的 html 添加到 DOM。这就是为什么不是所有类似名称的复选框都未选中的原因（至少我认为就是这样！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:43:40.637

```
$(document).on("click", ".is-specialization-checkbox", function(){
    var $checkboxs = $(".is-specialization-checkbox[name='" + $(this).attr("name") + "']")
    $checkboxs.not($(this)).prop("checked", false);
}); 
```

更改`this`为`$(this)`- 这样，被单击的特定复选框将被排除在取消选择之外。

# javascript - 用户滚动时创建一个javascript弹出框

> ID：10824652
> 
> 赞同：1
> 
> 时间：2012-05-30T21:40:19.300
> 
> 标签：javascript, jquery, html

有点不同的问题！

有谁知道哪里有插件或指出我正确的方向来创建这样的东西：http: [//mashable.com/2012/05/30/kings-social-media/](http://mashable.com/2012/05/30/kings-social-media/)

当您读完一篇文章时，屏幕右下方会出现一个框！

有任何想法吗？

谢谢瑞奇

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T21:49:08.480

[我发现的博客](http://digitaldreamer.net/blog/2010/5/9/getting-browsers-scroll-position-javascript/)中的一个简单示例：

```
function getScrollY() 
{
    var y = 0;
    y = document.body.scrollBottom;
    return y
} 
```

然后将其用作 .js 包含（类似于[我找到的这个 JSFiddle](http://jsfiddle.net/XAa3Y/57/)）：

```
(function($) 
{
    $area.scroll(function(e) 
    {
        if($(this).scrollBottom() < $('#divToShowBoxOn').offset().left)
            alert("Zomg you scrolled to my box!");
    }
})(jQuery)​ 
```

面积是您要测量的地方

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:34:58.270

jQuery inView 插件非常棒。只需在页面底部放置一个 div，当它进入视图时，此处理程序将调用您的函数。

[http://remysharp.com/2009/01/26/element-in-view-event-plugin/](http://remysharp.com/2009/01/26/element-in-view-event-plugin/)

# javascript - 不要禁用选中的复选框jquery

> ID：10824654
> 
> 赞同：0
> 
> 时间：2012-05-30T21:40:31.450
> 
> 标签：javascript, forms, checkbox

我有一堆具有共同属性的复选框，`class="all"`我想禁用除被选中的复选框之外的所有复选框，因为目前我无法取消选中它。此代码禁用`class="all"`. 如何从该代码中排除当前选中的复选框，以便取消选中它？

```
 $('.all').click(function() {
    $('.all').attr('disabled', $(this).is(':checked'));
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:41:28.063

```
$('.all').click(function() {
    $('.all').not(this).attr('disabled', $(this).is(':checked'));
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:44:46.050

```
$('#disable_all').click(function() {
   $('.all:not(:checked)').attr('disabled', 'disabled');
}); 
```

注意：`#disable_all`可以是按钮或链接

# java - JMenuItem 构造函数不接受操作

> ID：10824660
> 
> 赞同：0
> 
> 时间：2012-05-30T21:41:19.793
> 
> 标签：java, swing, jmenuitem

`JMenuItem`具有以下构造函数：（来源：[GrepCode](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/javax/swing/JMenuItem.java#JMenuItem)）

```
public JMenuItem(Action a) {
    this();
    setAction(a);
} 
```

但是，当我的代码有

```
import javax.swing.*;
import java.awt.event.ActionEvent;

public class ActionTest extends JApplet {

    private final JFrame frame = new JFrame("Title");
    private final JMenuBar menuBar = new JMenuBar();
    private final JMenu fileMenu = new JMenu("File");
    protected Action someAction;
    private JMenuItem someButton = new JMenuItem(someAction);

    public ActionTest() {}

    @Override
    public final void init() {
        frame.setJMenuBar(menuBar);
        menuBar.add(fileMenu);
        fileMenu.add(someButton);
        someButton.setText("Button");
        someAction = new AbstractAction("Title") {

            public void actionPerformed(ActionEvent event) {
                //do stuff
            }
        };
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        JApplet applet = new ActionTest();
        applet.init();
    }
} 
```

我按下`JMenuItem`，甚至没有调用 actionPerformed()。

这是一个错误，还是我的方法完全错误？

经过更多研究，我发现[这](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/javax/swing/event/EventListenerList.java#EventListenerList.add%28java.lang.Class%2Cjava.util.EventListener%29)是最终归结为的方法。它似乎实现了一个浅拷贝，它[应该简单地指向我在构造函数中给它的同一个内存块](http://en.wikipedia.org/w/index.php?title=Object_copy&oldid=493063601#Shallow_copy)。

当我将文件菜单添加到菜单栏时，应该会发生同样的事情。添加文件菜单时，它引用内存块。该内存块内的任何内容都是显示的内容。然后，我添加菜单项，它出现在`JMenu`.

当我处理`Action`s 或构造函数时，它会有所不同。有人可以解释其中的区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:42:50.377

从您发布的内容看来，您在初始化 JMenuItem 时还没有定义您的操作。因此，因为您传入 null，所以不会触发任何操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:44:51.913

`someButton` is initialized before `someAction`, so you are passing null to the `JMenuItem`. Initialize `someButton` after you have created `someAction` and everything will go fine.

# c# - asp.net c# 连接到本地 Db vs2008

> ID：10824661
> 
> 赞同：1
> 
> 时间：2012-05-30T21:41:23.340
> 
> 标签：c#, asp.net, database, connection-string

我正在使用 VS 2008 使用 c# webapp 制作一个 ASP.net，并在我的项目中添加了一个新的 sql 数据库项。我将表格添加到数据库中。在数据库资源管理器中，测试连接有效。我想我有两个问题。一：在应用程序中，如何使用连接字符串连接数据库？或者我应该使用什么连接字符串？第二：如何在数据库中添加用户名和密码？

现在我在 web.config 文件中使用这个连接字符串，但是当我运行应用程序时它超时并说它无法建立连接。错误在 conn.open 行。

```
add name="ReportsConnectionString" connectionString="Data Source=(local); Initial     Catalog=REPORTS;Integrated Security=True" providerName="System.Data.SqlClient" 
```

我在我的页面的代码隐藏之一中有此代码。

```
string sqlquery = "SELECT * FROM reportitems";
using (SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["ReportsConnectionString"].ConnectionString))
    {
        conn.Open();
        using (SqlCommand comm = new SqlCommand(sqlquery, conn))
        {
            using (SqlDataAdapter adapter = new SqlDataAdapter(comm))
            {
                DataSet ds = new DataSet();
                adapter.Fill(ds, "reportitems");
                DataRowCollection dra = ds.Tables["reportitems"].Rows;

                foreach (DataRow dr in dra)
                {
                    string DRZ = dr[0].ToString();
                     //more stuff here
                 }
            }
         }
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:54:20.790

通常，使用 Data Source 参数的这种语法可以在您的本地 PC 上访问 SqlServer Express `yourpcname\SQLEXPRESS`。确保启动 Management Studio 并查看服务器名称请求。

对于您问题的安全部分，我想您不想要集成安全选项（Windows 用户），但您想要 SQLServer 用户。在这种情况下，您可以将`User ID`and`Password`参数用于连接字符串：

```
Data Source=MYPC\SQLEXPRESS;Initial Catalog=REPORTS;User Id=MYNAME;Password=MYPASS; 
```

但是，这仅在您将此用户添加到 SQLServer 后才有效。您可以使用 Management Studio 应用程序的界面，也可以执行这样的脚本

```
USE [master]
GO
CREATE LOGIN [MYNAME] WITH PASSWORD=N'MYPASS', DEFAULT_DATABASE=[master]
GO
USE [REPORTS]
GO
CREATE USER [MYNAME] FOR LOGIN [MYNAME]
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:51:58.547

连接字符串`Integrated Security=True`部分表示服务器将使用运行站点的应用程序池的凭据，您无需指定用户名或密码。但是，应用程序池身份将需要访问您的数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T21:54:36.747

访问[http://www.connectionstrings.com/](http://www.connectionstrings.com/)以获得有关为各种应用程序设置连接字符串的各种方法的良好入门。这将向您展示为什么 (local) 不起作用但 .\SQLEXPRESS 起作用以及如何向其添加用户名和密码。[这是一个来自http://www.connectionstrings.com/sql-server-2008](http://www.connectionstrings.com/sql-server-2008)的示例

> 数据源=myServerAddress；初始目录=myDataBase；用户ID=myUsername；Password=myPassword；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T22:18:21.793

正如其他人所说，您需要一个运行的 SqlExpress 引擎，因为 .mdf 不是平面文件。它是一个 SQL Server Express 数据库文件，您需要连接到它。

但是没有说的是您的 App_Data 文件夹中的数据库需要附加到 SqlServer 实例。此步骤仅在第一次连接中执行一次。

在[http://www.connectionstrings.com/sql-server-2008](http://www.connectionstrings.com/sql-server-2008)中，您将在“连接到本地 SQL Server Express 实例时附加位于数据目录中的数据库文件”部分中找到一个示例，如下所示：

```
Server=.\SQLExpress;AttachDbFilename=|DataDirectory|mydbfile.mdf; Database=dbname;Trusted_Connection=Yes; 
```

您也可以阅读以下内容：http: [//msdn.microsoft.com/en-us/library/ms247257.aspx](http://msdn.microsoft.com/en-us/library/ms247257.aspx)

我相信你需要运行一些脚本和类似的东西来创建一个用户并在这个数据库中为这个用户分配权限，然后更改连接字符串（一旦连接了数据库），所以我看不到一点将数据库放在 App_Data 文件夹中。我相信如果从一开始就使用 SqlServer 工具创建数据库并从应用程序连接到它应该会更好。

# mysql - 其他情况下为空

> ID：10824662
> 
> 赞同：1
> 
> 时间：2012-05-30T21:41:25.103
> 
> 标签：mysql

我正在使用 case when 更新多个列。我不希望对未按时处理的案件采取任何行动。我读到这可以通过使用开始结束来完成，但这对我不起作用。

我的语法是：

```
update site_configuration set value = 
    case 
        when attribute_name="hostname" then "abcdef" 
        when attribute_name="backend" then "ab" 
        when attribute_name="col" then "col" 
        else 
            begin 
            end
    end case 
where uid="abcdef"; 
```

这个语法看起来对吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:44:16.063

Use just

```
else `value` 
```

In this case the value of the `value` column will be left the same

Instead you can add one more condition to your `where`

```
where uid="abcdef" AND attribute_name IN ('hostname', 'backend', 'col') 
```

in this case you just omit `else` clause

# vim - Vim：如何获得我当前所处的模式

> ID：10824665
> 
> 赞同：10
> 
> 时间：2012-05-30T21:41:50.190
> 
> 标签：vim

我正在编写一个用于以特殊方式注释代码的插件，并且在可视模式或正常模式下调用时它的行为应该有所不同。

是否有函数或某种方法可以确定调用函数时用户所处的模式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T21:46:20.123

There's

> mode([expr]) Return a string that indicates the current mode.

[http://vimdoc.sourceforge.net/htmldoc/eval.html#mode%28%29](http://vimdoc.sourceforge.net/htmldoc/eval.html#mode%28%29)

but that might not work since you're probably going to start command mode in the rhs of the mapping.

A more robust way would be to set up slightly different mappings like

```
nmap <Leader>c :call MyFunc('n')<CR>
vmap <Leader>c :call MyFunc('v')<CR> 
```

and use the argument value to know what mode the user was in.

# asp.net - 用于管理 ASP.NET 会话的 SQL Server 不起作用

> ID：10824670
> 
> 赞同：1
> 
> 时间：2012-05-30T21:42:05.050
> 
> 标签：asp.net, iis-7, sql-server-2008-r2, session-state

我按照此处[如何配置 SQL Server 以管理 ASP.NET 会话](https://stackoverflow.com/questions/4880824/how-to-configure-sql-server-to-manage-asp-net-sessions)以创建 ASPState db 中的方向进行操作。我在 IIS 7 中有 2 个 Web 应用程序。在 IIS Web 应用程序设置中，我转到“会话状态”并将会话状态设置为“SQL Server”并提供连接字符串。在每个 Web 应用程序 web.config 中，我添加

```
<sessionState
       mode="SQLServer"
       allowCustomSqlDatabase="false"
       sqlConnectionString="data source=server;user id=user;password=password"
       cookieless="false"
       timeout="7200"
/> 
```

我创建一个会话，

```
Session["Data"] = "test" 
```

在 Web App A 中，然后在同一浏览器中转到 Web App B 进行打印

```
Response.Write(Session["Data"]); 
```

它什么也没显示。我可以看到表中有数据：ASPState 数据库下的 ASPStateTempApplications 和 ASPStateTempSessions。另外，我在事件日志中看不到任何错误。谁能想到我做错了什么？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:58:04.133

```
You can not get session that belongs to App-A from App-B and vice versa. 
```

会话与 cookie 相关联，并且 app-a 和 app-b 之间的 cookie 不同，是随机制作的。即使设置了一些相同的 cookie，然后数据库将会话与应用程序 ID 连接起来，每个应用程序的 ID 也是不同的。

所以即使你有相同的数据库，应用程序id不同，cookies不同，你也无法从a到b获取会话。

存档的唯一可能方法是制作您的自定义会话代码，并且有些人知道您在 app-A 和 app-B 上具有相同的用途，因此将它们连接在一起。

# regex - 为 NLP 语言编码文本的高效 SQL 语句

> ID：10824671
> 
> 赞同：1
> 
> 时间：2012-05-30T21:42:08.127
> 
> 标签：regex, string, postgresql, query-optimization, substring

## 背景

locution 是由至少两个单词组成的名词短语，例如：

*   黑橄榄
*   辣椒酱
*   玫瑰芬苹果土豆

单独的单词*黑色*和*橄榄*是形容词（*黑色*- JJ）和名词（*橄榄*- NN）。但是，人类知道*黑橄榄*是一个名词（将其与*绿橄榄*区分开来）。

这里的问题是如何最有效地将标准化成分名称列表（例如上面的列表）转换为自然语言处理器（NLP）的特定格式。

## 示例数据

该表可以按如下方式创建：

```
CREATE TABLE ingredient_name (
  id bigserial NOT NULL, -- Uniquely identifies the ingredient.
  label character varying(30) NOT NULL
); 
```

以下 SQL 语句显示了实际的数据库记录：

```
insert into ingredient_name (label) values ('alfalfa sprout');
insert into ingredient_name (label) values ('almond extract');
insert into ingredient_name (label) values ('concentrated apple juice');
insert into ingredient_name (label) values ('black-eyed pea');
insert into ingredient_name (label) values ('rose finn apple potato'); 
```

## 数据格式

一般格式为：

```
lexeme1_lexeme2_<lexemeN> lexeme1_lexeme2_lexemeN NN 
```

鉴于上面的单词列表，NLP 期望：

```
black_<olive> black_olive NN
hot_pepper_<sauce> hot_pepper_sauce NN
rose_finn_apple_<potato> rose_finn_apple_potato NN 
```

数据库有一个表 ( `recipe.ingredient_name`) 和一个列 ( `label`)。标签被规范化（例如，单个空格、小写）。

## SQL 语句

产生预期结果的代码：

```
CREATE OR REPLACE VIEW ingredient_locutions_vw AS 
SELECT
  t.id,
   -- Replace spaces with underscores
  translate( t.prefix, ' ', '_' )
  || '<' || t.suffix || '>' || ' ' ||
  translate( t.label, ' ', '_' )
  || ' NN' AS locution_nlp
FROM (
  SELECT
    id,

    -- Ingredient name
    label,

    -- All words except the last word
    left( label, abs( strpos( reverse( label ), ' ' ) - length( label ) ) + 1 ) AS prefix,

    -- Just the last word
    substr( label,
       length( label ) - strpos( reverse( label ), ' ' ) + 2
    ) AS suffix
  FROM
    ingredient_name
  WHERE
    -- Limit set to ingredient names having at least one space
    strpos( label, ' ' ) > 0
) AS t; 
```

## 问题

在上述代码中拆分`prefix`（除第一个之外的所有单词）和（仅最后一个单词）的更有效（或优雅）的方法是什么？`suffix`

系统是 PostgreSQL 9.1。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:09:18.960

```
CREATE OR REPLACE VIEW ingredient_locutions_vw AS 
SELECT
    t.id,
    format('%s_<%s> %s NN', 
        array_to_string(t.prefix, '_'), 
        t.suffix, 
        array_to_string(t.label, '_')
    ) AS locution_nlp
FROM (
    SELECT
        id,

        -- Ingredient name
        label,

        -- All words except the last word
        label[1:array_length(label, 1) - 1] AS prefix,

        -- Just the last word
        label[array_length(label, 1)] AS suffix
    FROM (
        select id, string_to_array(label, ' ') as label
        from ingredient_name
    ) s
    WHERE
    -- Limit set to ingredient names having at least one space
    array_length(label, 1) > 1
) AS t; 
```

* * *

```
select * from ingredient_locutions_vw ;
 id |                      locution_nlp                      
----+--------------------------------------------------------
  1 | alfalfa_<sprout> alfalfa_sprout NN
  2 | almond_<extract> almond_extract NN
  3 | concentrated_apple_<juice> concentrated_apple_juice NN
  4 | black-eyed_<pea> black-eyed_pea NN
  5 | rose_finn_apple_<potato> rose_finn_apple_potato NN
(5 rows) 
```

# sql-server - 数据脚本生成问题

> ID：10824673
> 
> 赞同：0
> 
> 时间：2012-05-30T21:42:30.950
> 
> 标签：sql-server, ssms

我很少使用 SQL Server，并且在专业环境中我很清楚！我正在做一个宠物项目，但我在创建脚本时遇到了问题。

我有一个在线数据库，我需要从中提取所有内容。我使用 SQL Server Management Studio 中的任务 > 生成脚本选项。以下是脚本创建的一个插入语句的示例（我有 1,000 个这样的插入语句）：

```
INSERT [dbo].[NewComics] ([NewComicId], [Title], [Subtitle], [ReleaseDate], [CollectionId]) VALUES (366, N'Hawk & Dove 1:                                                                                      ', N'First Strikes                                                                                       ', CAST(0x00009F6F00000000 AS DateTime), 248) 
```

我对此有两个问题：

(a) 我想从两个标题元素中删除所有空格 (b) 我不想要 HEX 日期 - 我想要像 2006-09-01 (yyyy-mm-dd) 这样的可读内容

```
INSERT [dbo].[NewComics] ([NewComicId], [Title], [Subtitle], [ReleaseDate], [CollectionId]) VALUES (366, N'Hawk & Dove 1:', N'First Strikes', '2006-09-01', 248) 
```

将大约 3,000 个插入语句更改为这种修订格式的最快方法是什么？

仅供参考 - 这是桌子的设计：

```
[NewComicId] [int] NOT NULL,
[Title] [nchar](100) NOT NULL,
[Subtitle] [nchar](100) NULL,
[ReleaseDate] [datetime] NOT NULL,
[CollectionId] [int] NOT NULL, 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T20:44:30.867

是的，生成脚本可悲地将日期时间列编写为 CONVERT(binary_value, Datetime)。我会尝试回答为什么（或者更重要的是，如果有办法改变行为）。我怀疑原因是为了避免在具有不同语言环境/区域设置等的不同机器上运行脚本时出现任何问题。我不知道是否有办法在此期间改变这种情况，但 Management Studio 不是编写数据脚本的唯一方法...您可以查看第三方产品，例如 Red-Gate 的 SQL 数据比较。

如果它真的只有 3,000 行，并且您打算在不同的服务器上运行生成的脚本，请停止使用向导并执行此操作（乍一看，这看起来很可怕，但它会执行您想要的几件事 - 输出脚本准备好复制、粘贴和运行，具有格式良好且可读的日期，以 1000 为单位批量插入多行 VALUES，中间使用 GO 命令，甚至可以处理标题、副标题和 collectionid 中潜在的 NULL 值）：

```
DECLARE @newtable SYSNAME = 'dbo.NewComics';

SET NOCOUNT ON;

;WITH x AS (SELECT TOP (4000) s = '(' 
    + CONVERT(VARCHAR(12), NewComicId) + ','
    + COALESCE('N''' + REPLACE(RTRIM(Title), '''', '''''') + '''', 'NULL') + ',' 
    + COALESCE('N''' + REPLACE(RTRIM(SubTitle), '''', '''''') + '''', 'NULL') 
    + ', ''' + CONVERT(CHAR(8), ReleaseDate, 112) + ' '
    + CONVERT(CHAR(8), ReleaseDate, 108) + ''','
    + CONVERT(VARCHAR(12), COALESCE(CollectionId, 'NULL')) + ')',
  rn = ROW_NUMBER() OVER (ORDER BY NewComicId)
  FROM dbo.OldComics ORDER BY NewComicId
),
y AS
(
SELECT [/*a*/] = 1, [/*b*/] = 'SET NOCOUNT ON;
GO
INSERT ' + @newtable + ' VALUES'
UNION ALL 
SELECT 2, s = CASE WHEN rn > 1 THEN ',' ELSE '' END + s
 FROM x WHERE rn BETWEEN 1 AND 1000
UNION ALL 
SELECT 3, 'GO' UNION ALL 
SELECT 4, s = CASE WHEN rn > 1001 THEN ',' ELSE '' END + s
 FROM x WHERE rn BETWEEN 1001 AND 2000
UNION ALL 
SELECT 5, 'GO' UNION ALL 
SELECT 6, s = CASE WHEN rn > 2001 THEN ',' ELSE '' END + s
 FROM x WHERE rn BETWEEN 2001 AND 3000
UNION ALL 
SELECT 7, 'GO' UNION ALL 
SELECT 8, s = CASE WHEN rn > 3001 THEN ',' ELSE '' END + s
 FROM x WHERE rn BETWEEN 3001 AND 4000
)
SELECT [/*b*/] FROM y ORDER BY [/*a*/]; 
```

（如果你正好有 3000 或 3001 行，你可能不得不使用它，或者如果你有超过 4000 行，则添加另外几个联合，等等。）

如果要将数据移动到同一实例上的不同表或不同数据库，请使用 @swasheck 提供的脚本（同样，停止使用向导）。

您可能已经注意到这里的一个共同趋势：*如果您不喜欢它为 dates 输出的二进制格式，请停止使用生成脚本向导*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T19:07:04.963

所以如果这是我，我会做的是在一个单独的数据库中建立表结构：

```
CREATE TABLE NewComics (
[NewComicId] [int] identity (0,1) NOT NULL,
[Title] [nvarchar](100) NOT NULL,
[Subtitle] [nvarchar](100) NULL,
[ReleaseDate] [datetime] NOT NULL,
[CollectionId] [int] NOT NULL
);

ALTER TABLE [NewComics]
ADD CONSTRAINT PK_NewComicsID PRIMARY KEY; 
```

然后使用 SQL 清理数据，如下所示：

```
INSERT INTO [NewDatabase].[dbo].[NewComics] (Title, Subtitle, ReleaseDate, CollectionID) 
SELECT 
    LTRIM(RTRIM(Title))
    , LTRIM(RTRIM(Subtitle))
    , CAST(ReleaseDate as Datetime)
    , CollectionID 
FROM [OldDatabase].[dbo].[NewComics]; 
```

或者，您可以使用相同的`SELECT`查询：

```
SELECT 
    NewComicID
    , LTRIM(RTRIM(Title))
    , LTRIM(RTRIM(Subtitle))
    , CAST(ReleaseDate as Datetime)
    , CollectionID 
FROM [OldDatabase].[dbo].[NewComics]; 
```

作为导入/导出数据任务的源（在您习惯的同一菜单中`Generate Scripts`）。`[OldDatabase]`在此服务器上将是源，`[NewDatabase]`在此服务器上将是目标。确保选中所有身份插入的框。

# android - android显示很多文字

> ID：10824674
> 
> 赞同：1
> 
> 时间：2012-05-30T21:42:44.620
> 
> 标签：android, eclipse, text

我有一个类似页面的食谱，其中包含大量文本。包含步骤和所有内容的多行文本。这基本上是一个食谱。无论如何，我都需要一种显示所有这些文本的方法，因为文本视图只是将它们全部放在一起，而它只是一大堆没有人可以阅读的单词。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:47:40.650

Use a webview. Then you can style your content as well.

[http://developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:55:55.820

`TextView`实际上，您可以使用[SpannableString](http://developer.android.com/reference/android/text/SpannableString.html)和[SpannableStringBuilder](http://developer.android.com/reference/android/text/SpannableStringBuilder.html)一次完成相当多的格式化。它可能不是您最简单的解决方案，但如果您想减少布局中的视图数量，或者如果您需要回收视图，它确实很有用。

这是一个[很好的例子](http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring)。更改文本大小、字体、文本颜色等很容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T22:01:48.790

还可以考虑使用滚动视图（如果您当然使用诸如编辑文本或文本视图之类的控件，我和派都会推荐 web 视图，唯一的事情通常是我觉得它完全不愉快。

```
WebView wv = (WebView)this.findViewById(R.id.splashWebView);
wv.setWebViewClient(new WebViewClient() {  
  @Override  
  public boolean shouldOverrideUrlLoading(WebView view, String url)  
  {  
    view.loadUrl(url);
    return true;
  }  
}); 
wv.loadUrl("file:///android_asset/html_no_copy/demo_welcome.html"); 
```

demo_welcome.html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Demo Html</title>
    <link rel="stylesheet" type="text/css" href="demo.css" />
  </head>
  <body>
    <H1>Testing One Two Three</H1>
    <a href="test.html">CLICK HERE</a><p>
    <a href="file:///android_asset/html_no_copy/test.html">OR HERE</a>
  </body>
</html>

test.html:

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <link rel="stylesheet" type="text/css" href="test.css" />
    <title>Insert title here</title>
  </head>
  <body>
    <H1>TEST.HTML</H1>
  </body>
</html> 
```

# java - 就对象大小而言，Dalvik 是否比 HotSpot 更需要内存？

> ID：10824677
> 
> 赞同：26
> 
> 时间：2012-05-30T21:43:06.517
> 
> 标签：java, android, memory-management, dalvik

我一直想知道一个对象在 Android 上占用了多少内存。有许多与 HotSpot JVM 相关的资源（如[this](http://kohlerm.blogspot.com/2008/12/how-much-memory-is-used-by-my-java.html)）告诉我们一个空对象占用 8 个字节，一个空数组占用 12 个字节，并且所有对象都与 8 字节边界对齐。因此，一个没有额外字段的对象应该占用 8 个字节，具有至少一个额外字段的最小对象 – 16 个字节，一个空数组 – 16 个字节，对吧？

我在这件事上没有找到关于 Dalvik 的具体信息，并决定通过测试来弄清楚。运行测试得到了**令人惊讶的结果**。

关于计算方法的几句话。Android 的 Object.hashCode() 实现只是简单地返回指向转换为 int 的对象的指针。（看起来很明显也很笼统，但 [另一个惊喜] 结果证明，它不在 HotSpot JVM 上——例如，用 HotSpot 运行 MemTest 并查看）。因此，我使用 Dalvik 上 hashCode() 的简单性，通过连续分配测试类的两个实例来计算 Android 上的对象大小，分配的空间量应该等于它们的 hashCode() 之差值（假设 Dalvik 将它们分配在完全随机的地址上毫无意义）。只是为了确保我总是在每个测试类中连续分配 4 个对象，这总是提供相同的 hashCode() 差异。所以，我相信这个方法的正确性是毫无疑问的。

下面是测试的源代码：

```
public class MemTest {
    public static void run() {
        Object o1 = new Object();
        Object o2 = new Object();
        Object o3 = new Object();
        Object o4 = new Object();

        EmptyObject eo1 = new EmptyObject();
        EmptyObject eo2 = new EmptyObject();
        EmptyObject eo3 = new EmptyObject();
        EmptyObject eo4 = new EmptyObject();

        ObjectWithBoolean ob1 = new ObjectWithBoolean();
        ObjectWithBoolean ob2 = new ObjectWithBoolean();
        ObjectWithBoolean ob3 = new ObjectWithBoolean();
        ObjectWithBoolean ob4 = new ObjectWithBoolean();

        ObjectWithBooleanAndInt obi1 = new ObjectWithBooleanAndInt();
        ObjectWithBooleanAndInt obi2 = new ObjectWithBooleanAndInt();
        ObjectWithBooleanAndInt obi3 = new ObjectWithBooleanAndInt();
        ObjectWithBooleanAndInt obi4 = new ObjectWithBooleanAndInt();

        ObjectWithLong ol1 = new ObjectWithLong();
        ObjectWithLong ol2 = new ObjectWithLong();
        ObjectWithLong ol3 = new ObjectWithLong();
        ObjectWithLong ol4 = new ObjectWithLong();

        ObjectWith4Ints o4i1 = new ObjectWith4Ints();
        ObjectWith4Ints o4i2 = new ObjectWith4Ints();
        ObjectWith4Ints o4i3 = new ObjectWith4Ints();
        ObjectWith4Ints o4i4 = new ObjectWith4Ints();

        ObjectWith4IntsAndByte o4ib1 = new ObjectWith4IntsAndByte();
        ObjectWith4IntsAndByte o4ib2 = new ObjectWith4IntsAndByte();
        ObjectWith4IntsAndByte o4ib3 = new ObjectWith4IntsAndByte();
        ObjectWith4IntsAndByte o4ib4 = new ObjectWith4IntsAndByte();

        ObjectWith5Ints o5i1 = new ObjectWith5Ints();
        ObjectWith5Ints o5i2 = new ObjectWith5Ints();
        ObjectWith5Ints o5i3 = new ObjectWith5Ints();
        ObjectWith5Ints o5i4 = new ObjectWith5Ints();

        ObjectWithArrayRef oar1 = new ObjectWithArrayRef();
        ObjectWithArrayRef oar2 = new ObjectWithArrayRef();
        ObjectWithArrayRef oar3 = new ObjectWithArrayRef();
        ObjectWithArrayRef oar4 = new ObjectWithArrayRef();

        byte[] a0b1 = new byte[0];
        byte[] a0b2 = new byte[0];
        byte[] a0b3 = new byte[0];
        byte[] a0b4 = new byte[0];

        byte[] a1b1 = new byte[1];
        byte[] a1b2 = new byte[1];
        byte[] a1b3 = new byte[1];
        byte[] a1b4 = new byte[1];

        byte[] a5b1 = new byte[5];
        byte[] a5b2 = new byte[5];
        byte[] a5b3 = new byte[5];
        byte[] a5b4 = new byte[5];

        byte[] a9b1 = new byte[9];
        byte[] a9b2 = new byte[9];
        byte[] a9b3 = new byte[9];
        byte[] a9b4 = new byte[9];

        byte[] a12b1 = new byte[12];
        byte[] a12b2 = new byte[12];
        byte[] a12b3 = new byte[12];
        byte[] a12b4 = new byte[12];

        byte[] a13b1 = new byte[13];
        byte[] a13b2 = new byte[13];
        byte[] a13b3 = new byte[13];
        byte[] a13b4 = new byte[13];

        print("java.lang.Object", o1, o2, o3, o4);
        print("Empty object", eo1, eo2, eo3, eo4);
        print("Object with boolean", ob1, ob2, ob3, ob4);
        print("Object with boolean and int", obi1, obi2, obi3, obi4);
        print("Object with long", ol1, ol2, ol3, ol4);
        print("Object with 4 ints", o4i1, o4i2, o4i3, o4i4);
        print("Object with 4 ints and byte", o4ib1, o4ib2, o4ib3, o4ib4);
        print("Object with 5 ints", o5i1, o5i2, o5i3, o5i4);

        print("Object with array ref", new Object[]{oar1, oar2, oar3, oar4});

        print("new byte[0]", a0b1, a0b2, a0b3, a0b4);
        print("new byte[1]", a1b1, a1b2, a1b3, a1b4);
        print("new byte[5]", a5b1, a5b2, a5b3, a5b4);
        print("new byte[9]", a9b1, a9b2, a9b3, a9b4);
        print("new byte[12]", a12b1, a12b2, a12b3, a12b4);
        print("new byte[13]", a13b1, a13b2, a13b3, a13b4);
    }

    static void print(String title, Object... objects) {
        StringBuilder buf = new StringBuilder(title).append(":");
        int prevHash = objects[0].hashCode();
        int prevDiff = -1;
        for (int i = 1; i < objects.length; i++) {
            int hash = objects[i].hashCode();
            int diff = Math.abs(hash - prevHash);
            if (prevDiff == -1 || prevDiff != diff) {
                buf.append(' ').append(diff);
            }
            prevDiff = diff;
            prevHash = hash;
        }
        System.out.println(buf.toString());
    }

    /******** Test classes ******/

    public static class EmptyObject {
    }

    public static class ObjectWith4Ints {
        int i1;
        int i2;
        int i3;
        int i4;
    }

    public static class ObjectWith4IntsAndByte {
        int i1;
        int i2;
        int i3;
        int i4;
        byte b;
    }

    public static class ObjectWith5Ints {
        int i1;
        int i2;
        int i3;
        int i4;
        int i5;
    }

    public static class ObjectWithArrayRef {
        byte[] b;
    }

    public static class ObjectWithBoolean {
        boolean b;
    }

    public static class ObjectWithBooleanAndInt {
        boolean b;
        int i;
    }

    public static class ObjectWithLong {
        long l;
    }
} 
```

**结果如下：**

```
java.lang.Object: 16
Empty object: 16
Object with boolean: 16
Object with boolean and int: 24
Object with long: 24
Object with 4 ints: 32
Object with 4 ints and byte: 32
Object with 5 ints: 32
Object with array ref: 16
new byte[0]: 24
new byte[1]: 24
new byte[5]: 32
new byte[9]: 32
new byte[12]: 32
new byte[13]: 40 
```

总结一下结果：

*   8 字节边界对齐与 HotSpot 上的相同，这是唯一相同的地方。

*   普通对象最少 16 个字节（HotSpot 上为 8 个字节）

*   显然，一个空对象本身占用 12 个字节（HotSpot 上为 8 个），并且有 4 个额外字节的空间，直到对象大小从 16 个字节“跳跃”到下一个 24 个字节的边界。

*   空数组最少 24 个字节（HotSpot 上为 12 个）

*   类似地，数组本身占用 20 个字节（HotSpot 上为 12 个字节），并且在对象大小从 24 字节“跳跃”到下一个 32 字节边界之前，还有 4 个额外字节的数组数据空间。

**补充：（**响应 Louis 的建议）另一个压力测试表明，即使分配一百万个 Object 实例，任何两个实例之间的距离也绝不会小于 16 字节。这证明了对象之间潜在的 8 字节空洞肯定是进一步分配的死空间，否则当大约一半的内存已分配给对象时，dalvik 肯定也应该将其中一些放入“空洞”中，压力测试将返回 8，而不是 16。

```
public static void run2() {
    int count = 1024 * 1024;
    Object[] arr = new Object[count];
    for (int i = 0; i < count; i++) {
        arr[i] = new Object();
    }
    int[] hashes = new int[count];
    for (int i = 0; i < count; i++) {
        hashes[i] = arr[i].hashCode();
    }
    Arrays.sort(hashes);

    int minDist = Integer.MAX_VALUE;
    for (int i = 1; i < count; i++) {
        int dist = Math.abs(hashes[i] - hashes[i - 1]);
        if (dist < minDist) {
            minDist = dist;
        }
    }
    System.out.println("Allocated "+ count + " Objects, minimum distance is "+ minDist);
} 
```

我是否认为与 HotSpot 相比，Dalvik 的**对象多占用 8 个字节**，**数组占用多 8-12 个字节？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-09T21:32:22.203

（是的，这是一个老问题，但结果有点有趣，所以我稍微戳了一下。）

该`Object.clone()`方法需要对对象进行完整的按位复制。为此，它需要知道一个对象有多大。如果您查看`dvmCloneObject()`，您会发现它对数组使用一种方法，对对象使用另一种方法。

对于数组，它调用`dvmArrayObjectSize()`，它将数组长度乘以元素宽度（1、2、4 或 8），然后添加数组数据相对于对象开头的偏移量。每个对象都有一个 8 字节的标头；数组的宽度为 4 字节，并包含额外的 4 字节填充，以确保 64 位值正确对齐。因此，对于 5 元素数组`short`，它将是 16 + 5 * 2。

对于普通对象，它只是使用`objectSize`类对象中的字段。这是由一个相当复杂的函数设置的`computeFieldOffsets()`。该函数确保所有对象引用首先出现（因此 GC 在扫描时可以少跳过），然后是所有 64 位字段。为确保 64 位字段正确对齐，它可能会向上移动 32 位原始字段之一以填充内容。（如果没有适当的 32 位字段，您只会得到 4 个字节的填充。）

我应该补充一点：所有字段都是 32 位的，除了64 位的`long`和。`double`对象引用是 32 位的。

所以很难准确地说出非数组对象有多大，但一般来说，你取 8 字节的对象头，将附加字段的宽度相加，然后四舍五入到下一个 8 字节的倍数——最后是因为所有对象都必须是 64 位对齐的。

这就是理论。为了在实践中看到它，我将其添加到`dvmCloneObject()`：

```
ALOGD("class=%s size=%d", clazz->descriptor, clazz->objectSize); 
```

并看到 logcat 输出如下：

```
D dalvikvm: class=Ljava/util/Locale; size=24
D dalvikvm: class=Ljava/util/Date; size=16 
```

Locale 有 4 个参考字段，Date 有一个`long`字段，因此这些值符合预期。

理想情况下，这正是需要多少空间。但是，该对象是用 分配的`mspace_calloc()`，这又增加了 4 或（有时）8 字节的开销。因此，上述值所需的*实际空间将是 32 和 24，这与您的实验结果相匹配。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T22:39:20.827

我没有你的答案，但我可以建议你在源代码中查找更多信息的几个地方。

您可以查看 dalvik/vm/oo/Object.h 中的 DataObject 和 ArrayObject 结构。基于此，似乎一个空对象应该只占用 8 个字节，而一个空数组应该占用 12 个字节。这似乎与您的结果不符，尽管我不知道为什么。

您还可以查看 ClassObject 结构中 objectSize 字段的用法以获取更多信息。快速搜索该字段的用法表明 dalvik/vm/alloc/Alloc.cpp 中的 dvmAllocObject 方法似乎负责为新对象分配内存。

# ruby-on-rails-3 - 获取满足特定条件的数组项的计数

> ID：10824679
> 
> 赞同：14
> 
> 时间：2012-05-30T21:43:15.040
> 
> 标签：ruby-on-rails-3

我有一个名为@friend_comparisons 的数组，其中填充了许多用户对象。然后我使用以下命令对数组进行排序：

```
@friend_comparisons.sort! { |a,b| b.completions.where(:list_id => @list.id).first.counter <=> a.completions.where(:list_id => @list.id).first.counter } 
```

这是通过与每个用户关联的某个计数器对数组进行排序（其细节对问题并不重要）。

我想找出数组中有多少用户对象的计数器大于某个数字（比如说 5）。我该怎么做呢？

这是我目前解决问题的方法：

```
@friends_rank = 1
for friend in @friend_comparisons do
  if friend.completions.where(:list_id => @list.id).first.counter > @user_restaurants.count
    @friends_rank = @friends_rank + 1
  end
end 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-08-03T05:35:56.560

您可以直接使用 Array#count。

```
@friend_comparisons.count {|friend| friend.counter >= 5 } 
```

文档：[http ://ruby-doc.org/core-2.2.0/Array.html#method-i-count](http://ruby-doc.org/core-2.2.0/Array.html#method-i-count)

（对于 ruby​​ 1.9.3 相同）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-30T21:58:18.787

Array#select 将完成工作。

文档：[http ://www.ruby-doc.org/core-1.9.3/Array.html#method-i-select](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-select)

你可能会做这样的事情：

```
number_of_users = @friend_comparisons.select{|friend| friend.counter >= 5 }.size 
```

# android - Android Google Checkout 替代方案

> ID：10824680
> 
> 赞同：0
> 
> 时间：2012-05-30T21:43:15.817
> 
> 标签：android, google-checkout, in-app-billing

我必须创建一个应用程序，用户在其中进行交易，然后给我（应用程序的所有者）一定数量的钱，以便将 deel 提供给世界其他地方。我正在考虑通过 Google Checkout 实现这一目标，但我在应用计费 sdk 中偶然发现了 Android。我的问题是，是否可以在我的场景中使用应用计费？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:56:51.990

谷歌应用计费仅适用于应收账款（AFAIK），即我能看到您这样做的最有效方式是进行交易，然后收取名为（“交易费”/“交易费”）的项目和然后应用程序正常运行。

不建议您开始使用自己的支付系统，如果不是其他任何东西，支持可能随时下降，您的应用开始违反 ToS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T22:09:41.527

我得到了答案 :) 我们可以在非托管产品的应用计费中使用 :)

# matrix - scilab - 找到指数与矩阵的积分

> ID：10824682
> 
> 赞同：1
> 
> 时间：2012-05-30T21:43:29.793
> 
> 标签：matrix, exponential, integral, scilab

我该怎么做呢：

H = 积分( exp(At) * B dt)，从 0.0 到 0.1？

目标是从连续状态观察器发展出离散状态观察器。但是，从来没有从 scilab 得到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:53:14.317

您想要的可能是：
C. Van Loan：计算涉及矩阵指数的积分，IEEE Transactions on Automatic Control，第 23 卷，第 3 期，第 395–404 页，1978 年 6 月

例如，从这里：
[http ://www.cs.cornell.edu/cv/ResearchPDF/computing.integrals.involving.Matrix.Exp.pdf](http://www.cs.cornell.edu/cv/ResearchPDF/computing.integrals.involving.Matrix.Exp.pdf)

# imagemagick - imagemagick 删除像素簇

> ID：10824684
> 
> 赞同：3
> 
> 时间：2012-05-30T21:43:38.593
> 
> 标签：imagemagick

原图：

![在此处输入图像描述](../Images/fcbc3517be261832c13a2bd4b6c0e2e1.png)

我想隔离并移除（即变成白色）周围有大量空白的小块像素。我想变成白色的像素区域示例：

![在此处输入图像描述](../Images/3410fc6f5dc3fb85efbf1f8ac7735649.png)

目标是获得更大的完整空白区域。最终结果示例：

![在此处输入图像描述](../Images/2b246e29eb3b34e73ae698894a039007.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-27T14:43:34.573

可以使用带有 imagemagick 的中值滤波器过滤掉小像素簇，如下所示：

```
convert gmyjf.jpg -median 5 gmyjf2.jpg 
```

（其中 gmyjf.jpg 将是原始文件的路径）

# objective-c - git log --follow 在 XCode 上显示

> ID：10824687
> 
> 赞同：0
> 
> 时间：2012-05-30T21:43:45.647
> 
> 标签：objective-c, xcode, git, xcode4

我只是在我的 xcode 项目中移动了文件并试图保留提交历史。它可以通过`git --follow`但不是仅在执行 git log 并且 XCode 没有捕获这一点时起作用。完成这项工作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:48:41.933

从命令行使用 git。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T22:02:38.587

我也注意到了这个问题。从 Xcode 5.1 Beta 3 开始，它似乎已修复。

# php - 2个商店中具有相同类别名称的Magento csv导入适用于1个类别

> ID：10824688
> 
> 赞同：1
> 
> 时间：2012-05-30T21:43:51.743
> 
> 标签：php, magento, csv, import

我有一个具有类别结构的 magento 商店，我将这样描述：

```
Root Category -> Sub Category 
```

假设我有 2 个根类别，每个都分配给一个商店，每个类别名称相同：

```
Default Category -> Items
Spanish Category -> Items 
```

我有 2 个这样描述的网站：

```
website (website code) -> store (root category) -> store view (store code):

English Website (base) -> English (Default Category) -> US (en_us)
Spanish Website (es)   -> Spanish (Spanish Category) -> Columbia (es_co) 
```

我有一个这样的 csv 导入文件：（截断）

```
sku,           _store,  _type,   _category,  _product_websites, etc...
test_product,  en_us,  virtual,  Items,      base
{blank}     ,  es_co,  {blank},  Items,      es 
```

这可以正确验证，正确地在英语和西班牙语网站之间创建 1 个产品拆分。什么不起作用，它只会将其添加到西班牙商店的类别中。我的假设是 Magento 会足够聪明地识别该产品正在添加到商店 (en_us) 并将其应用于该商店根目录的子类别，特别是因为用于产品导入类别的键不是唯一的。

最新创建的类别似乎赢了。在这种情况下，我在创建西班牙语网站->项目之前创建了默认网站->项目。如果我尝试将产品导入到有两个冲突类别名称的单个网站，这一点就会变得很清楚。

假设这个导入：

```
sku,           _store,  _type,   _category,  _product_websites, etc...
test_product,  en_us,  virtual,  Items,      base 
```

这也将产品添加到**西班牙网站->项目**类别

我的问题是，我做错了吗？我是否在某处遗漏了一个关键元素来避免这种情况？这是一个已知的问题？我无法通过谷歌找到任何指向这个问题的东西。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T17:51:18.953

我不认为有一个很好的解决方案，但这是我的解决方法：

基本上，我会在其他商店中具有相同名称的所有类别中添加前缀。

例如：

```
store1->category1
store2->es_category1 
```

使用 csv 进行大量导入

然后重命名这些类别。

不是很好，但很有效。希望这可以帮助某人...

干杯

# python - Matlab的交换错误

> ID：10824691
> 
> 赞同：2
> 
> 时间：2012-05-30T21:44:13.713
> 
> 标签：python, matlab, ieee-754, floating-point-precision

和有什么区别

```
.3+.3+.3+.1 == 1 
```

返回 false，而

```
.3+.3+.1+.3 == 1 
```

返回真？这也适用于 Python。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T21:58:41.267

这是由于浮点运算。您可以使用[ieee754](http://www.mathworks.com/matlabcentral/fileexchange/25326-ieee-754-binary-representation)函数查看浮点表示。

```
>> ieee754(.3+.3+.3+.1)

ans =

0011111111101111111111111111111111111111111111111111111111111111

>> ieee754(.3+.3+.1+.3)

ans =

0011111111110000000000000000000000000000000000000000000000000000 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T22:20:32.910

这是一般有限精度算术的一般结果。以给定精度表示的可能浮点数集仅形成所有实数集的子集。因此，只有那些精确等于计算机上可用浮点表示的有限数量的数字。因此，除非您的数字之一与其有限精度表示完全相同，否则在内存中表示为字节的实际数字实际上只是一个近似值。然后，在使用这些数字执行算术运算时，您将得到错误传播。对数值分析进行一些研究，以便对此类事物进行更全面和更精确的定义。

# sql - 主键的 SQL 外键问题

> ID：10824693
> 
> 赞同：0
> 
> 时间：2012-05-30T21:44:20.197
> 
> 标签：sql, sql-server

我在连接**MSSQL Management Studio 上的两个表时遇到问题。** 我的目标是通过外键连接表，如果我删除用户，我希望第二个表条目将被自动删除。我计划为此使用 DELETE Cascade 方法。

```
User:
CREATE TABLE [dbo].[Users](
[ID] [bigint] IDENTITY(1,1) NOT NULL,
[Email] [nvarchar](89) NOT NULL,
[Name] [nvarchar](25) NOT NULL,
[Midname] [nvarchar](25) NOT NULL,
[Surname] [nvarchar](25) NOT NULL,
[Phone] [varchar](15) NOT NULL,
[Country] [smallint] NOT NULL,
[Manager] [nvarchar](89) NOT NULL,
[Referrer] [nvarchar](89) NOT NULL,
[Rank] [tinyint] NOT NULL,
CONSTRAINT [PK_Users] PRIMARY KEY CLUSTERED 
(
[Email] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,      ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
  ) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO 
```

电子邮件是主键

```
Payments:
 CREATE TABLE [dbo].[Investments](
[ID] [bigint] NOT NULL,
[Investor] [nvarchar](89) NOT NULL,
[Sum] [decimal](19, 4) NOT NULL,
[Currency] [smallint] NOT NULL,
[Credit] [decimal](19, 4) NOT NULL,
[CreditRate] [decimal](19, 4) NOT NULL,
[Rate] [tinyint] IDENTITY(1,1) NOT NULL,
[Date] [smalldatetime] NOT NULL,
[Comment] [nvarchar](max) NOT NULL,
CONSTRAINT [PK_Investments] PRIMARY KEY CLUSTERED 
(
        [ID] ASC
 )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,     ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
  ) ON [PRIMARY]

 GO 
```

ID 是主键

**我的 FK 应该是 USER->PAYMENTS 还是 PAYMENTS->USER？**

当我尝试通过电子邮件-> 投资者使用外键连接用户-> 付款时，它告诉我这样的错误：

> 表“付款”中的列与现有主键或唯一约束不匹配。

你能解释一下问题出在哪里吗？我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T22:28:22.813

将您的结构更改为：

```
CREATE TABLE [dbo].[Users](
[ID] [bigint] IDENTITY(1,1) NOT NULL,
[Email] [nvarchar](89) NOT NULL,
[Name] [nvarchar](25) NOT NULL,
[Midname] [nvarchar](25) NOT NULL,
[Surname] [nvarchar](25) NOT NULL,
[Phone] [varchar](15) NOT NULL,
[Country] [smallint] NOT NULL,
[Manager] [nvarchar](89) NOT NULL,
[Referrer] [nvarchar](89) NOT NULL,
[Rank] [tinyint] NOT NULL);

ALTER TABLE [Users]
ADD CONSTRAINT PK_UsersID PRIMARY KEY (ID); 
```

进而

```
CREATE TABLE [dbo].[Investments](
[ID] [bigint] NOT NULL,
[UserID] [bigint] NOT NULL,
[Sum] [decimal](19, 4) NOT NULL,
[Currency] [smallint] NOT NULL,
[Credit] [decimal](19, 4) NOT NULL,
[CreditRate] [decimal](19, 4) NOT NULL,
[Rate] [tinyint] IDENTITY(1,1) NOT NULL,
[Date] [smalldatetime] NOT NULL,
[Comment] [nvarchar](max) NOT NULL);

ALTER TABLE Investments
ADD CONSTRAINT PK_InstestmentsID PRIMARY KEY (ID);

ALTER TABLE Investments
ADD CONSTRAINT FK_UsersInvestments
FOREIGN KEY (UserID)
REFERENCES Users(ID); 
```

然后`Users.ID`加入`Investments.UserID`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T21:55:56.483

我搜索了您看到的错误消息（没有表名），普遍的共识似乎是您的表中没有正确设置a `PRIMARY KEY`or contraint。`UNIQUE`该错误还告诉我您（可能）正在使用 SQL Server。

来自[technet.microsoft.com](http://technet.microsoft.com/en-us/library/ms165684%28v=sql.105%29.aspx)：

> 外键关系的主键端的列必须参与主键或唯一约束。在为您选择的一个表设置主键或唯一约束后，您可以为该表定义其他关系。

检查你`PRIMARY KEYS`的两个表。如果没有表的实际 DDL，就很难提供更多帮助。

**编辑：**你在你的表中有`Email`，但我没有在表中看到一个字段。您要加入哪些领域？`PRIMARY KEY``Users``Email``Investments`

# java - Tapestry XML 输出

> ID：10824695
> 
> 赞同：0
> 
> 时间：2012-05-30T21:44:36.283
> 
> 标签：java, xml, tapestry

我对 Tapestry 框架很感兴趣，但由于以下几个原因，它存在一些问题：

我必须生成的输出必须是 XML。根据[http://tapestry.apache.org/content-type-and-markup.html](http://tapestry.apache.org/content-type-and-markup.html)这没什么大不了的。但是当涉及到使用 actionlink、组件或所有其他 Tapestry 好东西时，生成的代码不应该是锚或 div，而是一些自定义的 xml 元素/属性。

是否有可能在没有很多痛苦的情况下进行归档？欢迎使用 Tapestry 的背景机制的变通方法或内部结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T23:02:18.350

虽然[actionlink](http://tapestry.apache.org/current/apidocs/org/apache/tapestry5/corelib/components/ActionLink.html)将始终呈现为锚 (a) 标记，但[Any](http://tapestry.apache.org/current/apidocs/org/apache/tapestry5/corelib/components/Any.html)组件可以呈现为任意 xml 元素，并且它和许多其他 Tapestry 组件将根据其定义呈现任意（非正式）参数。

例如，（假设你的类中有一个名为“getTheTime”的java方法，我的返回`System.currentTimeMillis()`）

```
<xyz t:type="actionlink" t:id="someaction">
    a element</xyz>

<xyz t:type="any"
        attribute1="${theTime}"
        attribute2="prop:theTime"
        attribute3="theTime">
    xyz element</xyz> 
```

将呈现为：

```
<a href="/app/page.someaction">a element</a>
<xyz attribute1="1338418847753" attribute2="1338418847753"
        attribute3="theTime">xyz element</xyz> 
```

为了获得两者的组合，您需要滚动自己的组件。一旦您更好地了解挂毯，这将非常简单。

看一下 ActionLink.java （及其超类）的源代码，您应该能够弄清楚。

# javascript - 在javascript中访问位置对象的最佳方法是什么？

> ID：10824701
> 
> 赞同：0
> 
> 时间：2012-05-30T21:45:09.153
> 
> 标签：javascript, object

我应该使用以下哪项将`location`对象分配给 javascript 中的局部变量？

```
var l = location;
var l = window.location;
var l = window.document.location; 
```

为什么有这么多方法？有什么区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:46:17.363

我会使用`window.location`, 来帮助确保我真正谈论的是全局对象的属性，而不是碰巧被调用的某个局部变量`location`。

[W3C 规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/history.html#dom-location)说：

> Window 接口的 location 属性必须返回该 Window 对象的 Document 的 Location 对象。

所以这两个确实是等价的（实际上是完全相同的对象）。

`location`恰好是 的简写`window.location`，只要`location`范围内没有其他变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T21:46:53.760

它们都指向同一个对象。虽然，`window.location`更明确，跨浏览器兼容，并且可以防止与`location`在不同范围内命名的其他变量发生冲突。

> 为什么有这么多方法？

浏览器差异/过去时代的遗迹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T21:53:57.827

在 Web 浏览器中，`window`始终位于变量查找链的顶部。因此，全局变量`x`也是`window.x`。例如：

```
<script>
var x = 1;
window.alert(window.x);
</script> 
```

会警觉`1`。同样，如果链中不再调用*局部*变量，`location`也将解析。`window.location`*`location`*

 ** * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-30T21:49:59.587

window.location 是 _top 位置。document.location 是当前的 html 页面位置

如果您在 iframe 中，则 iframe 的 document.location 会有所不同，因为 window.location 指的是父页面。

通过对此进行检查，您可以通过检查它们是否相同来打破框架。如果不打破未经授权的框架。或检查我的 i 框架的父页面是否正确，如果不重定向到正确的页面。*

# performance - Variant of subset sum

> ID：10824703
> 
> 赞同：1
> 
> 时间：2012-05-30T21:45:11.133
> 
> 标签：performance, algorithm

I read through all subset sum topics and still have issues with implementing the algorithm for the following problem.

Given the array A of N integers (N<=20) where

*   a[i]<=20
*   values do not have to be unique

and an integer K (K<=20).

**Rules**:

*   Array items equal to K are "covered" with K.
*   If sum of two or more array numbers is equal to K, these numbers are also covered.
*   Each number in the array can be covered only once.

**Example**:

N=6, integers: 1, 1, 2, 3, 4, 5

**K=4**

**Possible coverages**:

1.  coverage
    *   4 is covered.
    *   1, 1, 2 are covered as 1+1+2=4.
2.  coverage
    *   4 is covered.
    *   1, 3 are covered as 1+3=4.

**K=5**

**Possible coverages**:

1.  coverage
    *   5 is covered.
    *   1,1,3 are covered as 1+1+3=5.
2.  coverage
    *   5 is covered.
    *   1,4 are covered as 1+4=5.
    *   2,3 are covered as 2+3=5.

**Goal:**

For given array A and integer K, find all possible "coverages". I need all coverages, not only one which covers most of the array items.

**I have tried with two approaches**:

1.  **Brut force algorithm**. Checking all possible subsets of all possible sizes works, but takes too much time even for only 10 numbers. I need it to finish in no more than 500ms.
2.  First, I sorted the array in descending order. Then for each possible number of sub-sums I create "slots". I loop through the array and put numbers in the slots following the rules like:
    *   Put number in the slot if its sum becomes equal to K.
    *   Put number in the slot having the least sum of all slots.
    *   Put number in the slot which gives the closet sum to K of all slots.

Well, the second approach works and works fast. But I found scenarios where some coverages are not found.

I would appreciate if somebody offered idea for solving this problem.

I hope I explained the problem well.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:59:31.207

我没有现成的答案，但我建议看一下“装箱问题”，它在这里可能很有用。

主要问题是找到所有可能的和给出数字 K。所以试试这个：

```
Collection All_Possible_Sums_GivingK;

find_All_Sums_Equal_To_K(Integer K, Array A)
{
    /* this function after finding result
    add it to global Collection AllPossibleSumsGivingK; */
    find_All_Elements_Equal_To_K(Integer K, Array A); 

    Array B = Remove_Elements_Geater_Or_Equal_To_K(Integer K, Array A);

    for all a in A {
        find_All_Sums_Equal_To_K(Integer K-a, Array B-a) 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:14:15.047

我从一个较早的答案修改了这个，我给了一个不同的子集和变体：[https ://stackoverflow.com/a/10612601/120169](https://stackoverflow.com/a/10612601/120169)

我在具有上述数字的 K=8 案例上运行它，我们在两个不同的地方重用 1 用于两个“覆盖”之一。让我知道它是如何为您工作的。

```
public class TurboAdder2 {
    // Problem inputs
    // The unique values
    private static final int[] data = new int[] { 1, 2, 3, 4, 5 };
    // counts[i] = the number of copies of i
    private static final int[] counts = new int[] { 2, 1, 1, 1, 1 };
    // The sum we want to achieve
    private static int target = 8;

    private static class Node {
        public final int index;
        public final int count;
        public final Node prevInList;
        public final int prevSum;
        public Node(int index, int count, Node prevInList, int prevSum) {
            this.index = index;
            this.count = count;
            this.prevInList = prevInList;
            this.prevSum = prevSum;
        }
    }

    private static Node sums[] = new Node[target+1];

    // Only for use by printString and isSolvable.
    private static int forbiddenValues[] = new int[data.length];

    private static boolean isSolvable(Node n) {
        if (n == null) {
            return true;
        } else {
            while (n != null) {
                int idx = n.index;
                // We prevent recursion on a value already seen.
                // Don't use any indexes smaller than lastIdx
                if (forbiddenValues[idx] + n.count <= counts[idx]) {
                    // Verify that none of the bigger indexes are set
                    forbiddenValues[idx] += n.count;
                    boolean ret = isSolvable(sums[n.prevSum]);
                    forbiddenValues[idx] -= n.count;
                    if (ret) {
                        return true;
                    }
                }
                n = n.prevInList;
            }
            return false;
        }
    }

    public static void printString(String prev, Node n, int firstIdx, int lastIdx) {
        if (n == null) {
            printString(prev +" |", sums[target], -1, firstIdx);
        } else {
            if (firstIdx == -1 && !isSolvable(sums[target])) {
                int lidx = prev.lastIndexOf("|");
                if (lidx != -1) {
                    System.out.println(prev.substring(0, lidx));
                }
            }
            else {
                while (n != null) {
                    int idx = n.index;
                    // We prevent recursion on a value already seen.
                    // Don't use any indexes larger than lastIdx
                    if (forbiddenValues[idx] + n.count <= counts[idx] && (lastIdx < 0 || idx < lastIdx)) {
                        // Verify that none of the bigger indexes are set
                        forbiddenValues[idx] += n.count;
                        printString((prev == null ? "" : (prev + (prev.charAt(prev.length()-1) == '|' ? " " : " + ")))+data[idx]+"*"+n.count, sums[n.prevSum], (firstIdx == -1 ? idx : firstIdx), idx);
                        forbiddenValues[idx] -= n.count;
                    }
                    n = n.prevInList;
                }
            }
        }
    }

    public static void main(String[] args) {
        for (int i = 0; i < data.length; i++) {
            int value = data[i];
            for (int count = 1, sum = value; count <= counts[i] && sum <= target; count++, sum += value) {
                for (int newsum = sum+1; newsum <= target; newsum++) {
                    if (sums[newsum - sum] != null) {
                        sums[newsum] = new Node(i, count, sums[newsum], newsum - sum);
                    }
                }
            }
            for (int count = 1, sum = value; count <= counts[i] && sum <= target; count++, sum += value) {
                sums[sum] = new Node(i, count, sums[sum], 0);
            }
        }
        printString(null, sums[target], -1, -1);
    }
} 
```

# php - XAMPP server session not working

> ID：10824707
> 
> 赞同：0
> 
> 时间：2012-05-30T21:45:21.447
> 
> 标签：php, html

I have installed a XAMPP server on my MAC laptop.I am able to access my php files from an HTML request on my Laptop and $_SESSION is working if i use [http://localhost.Things](http://localhost.Things) work as expected by persisting session information across php files. My other friend who is on my LAN network tried to connect to my XAMPP server php files using the same HTML files in his laptop.When ever he sends request $_SESSION[] is not working and am not getting data persisted across pages.HY other friend has enabled cookies on his browser too.He is using Safari too to connect.

Could you please tell what could be the issue?.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:51:09.463

当你创建一个会话时，你必须给它一个可以工作的域。如果您使用**localhost**作为域或**127.0.0.1**创建会话，而当您的朋友从 LAN 中的另一台计算机连接时，它将根本无法工作。尝试使用您的 LAN IP 地址来创建 cookie

# ruby-on-rails - Ruby on Rails - 如何创建一个 url 来传递参数？

> ID：10824708
> 
> 赞同：0
> 
> 时间：2012-05-30T21:45:23.193
> 
> 标签：ruby-on-rails, ruby

我做了这个命名空间和路由：

命名空间 :api 做资源 :create_kpi, :except => [:edit, :destroy] end

控制器如下所示：

```
class Api::CreateKpiController < ApplicationController
  def create
    temp = Kpi.new(params[:data])  

    puts "temp: "
    puts temp.inspect    
  end
end 
```

我想做这样的事情：

```
POST    http://127.0.0.1:my_port/api/create_kpi?data="some stuff" 
```

但我不确定如何使用我拥有的设置构建 url。我的网址应该是什么样子？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:56:39.267

您不应该在 POST 请求的查询参数中传递数据，因此您的 url 应该看起来像 HOST:PORT/api/create_kpi 并且 POST DATA 应该有 data="some stuff"

这是一个卷曲示例

```
curl -i http://HOST:PORT/api/create_kpi -F data="some stuff" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:57:45.343

看起来您的路线条目应该创建一个名为`api_create_kpi_path`或类似您在链接中使用的帮助程序。您可以只传递要添加为查询参数的路由助手参数，因此`api_create_kpi_path(:data => "some stuff")`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T21:58:46.390

如果我理解正确，你有一个控制器，你想知道在视图中放什么？

在这种情况下，由于您要发布数据，请查看[form_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html)和[form_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html)，rails 将为您构建所有内容以提交帖子。

一个非常有用的入门资源是[权威指南](http://guides.rubyonrails.org/form_helpers.html#dealing-with-basic-forms)。

# django - django：删除引用为 ManyToManyField 的模型

> ID：10824709
> 
> 赞同：0
> 
> 时间：2012-05-30T21:45:26.890
> 
> 标签：django, django-models, django-admin

我有一个模型：

```
class picture(models.Model):
    name = models.CharField(null=False, blank=False, max_length=128)
    collections = models.ManyToManyField('collection', null=False, blank=False)
    sizes = models.ManyToManyField('picture_size', null=False, blank=False)
    papers = models.ManyToManyField('picture_paper', null=False, blank=False)
    base_price = models.DecimalField(decimal_places=2, null=False, blank=False, default=2000, max_digits=10)
    img_icon = models.FileField(blank=False, null=False, upload_to='pic_icons')
    img_large = models.FileField(blank=False, null=False, upload_to='pic_large')
    img_huge = models.FileField(blank=False, null=False, upload_to='pic_huge')
    is_active = models.BooleanField(blank=False, null=False, default=True) 
```

和图片纸：

```
class picture_paper(models.Model):
    name = models.CharField(null=False, blank=False, max_length=128)
    price_per_ssm = models.DecimalField(null=False, blank=False, decimal_places=2, max_digits=10)
    is_active = models.BooleanField(null=False, blank=False, default=True) 
```

我在管理员中注册了他们的模型，可以创建一个 picture_paper 但不能删除它：

> （1054，“‘where 子句’中的未知列‘picture_paper_id’”）

它正在构建的 SQL 是这样的：

```
'DELETE FROM `core_picture_papers` WHERE `picture_paper_id` IN (%s)' 
```

解释 core_picture_papers：

```
id  int(11) NO  PRI     auto_increment
picture_id  int(11) NO  MUL     
paper_id    int(11) NO  MUL 
```

我的模型设置是否完全错误（我正在尝试构建一个纸类字典并将它们与图片挂钩 - 图片可能与几种尺寸或一个等相关）？或者我缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:24:15.020

我会说您正在尝试删除`picture_paper`与现有对象相关的`picture`对象。由于您的 M2M 不能为 Null 或 Blank，因此当您尝试删除它时会出现错误。

查看有关[on_delete](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.on_delete)参数的 Django 文档。您可能需要将其设置为`PROTECTED`并正确处理异常。

# ruby-on-rails - rails, sorting an array based on attributes in desc order

> ID：10824720
> 
> 赞同：0
> 
> 时间：2012-05-30T21:46:27.093
> 
> 标签：ruby-on-rails, sorting

ive been trying to sort an array in desc order but have been having trouble doing so.

i have...

```
microposts = Micropost.from_users_followed_by(self)
pub_messages = PubMessage.find_pub_messages_for(self.id)
(microposts + pub_messages).sort! { |a,b| a[:time_ago] <=> b[:time_ago] } 
```

however the last line returns everything in ascending order. doing

```
.reverse 
```

fixes it, but i heard it's not very efficient to do so. i tried doing

```
(microposts + pub_messages).sort! { |a,b| -a[:time_ago] <=> -b[:time_ago] } 
```

but it gives an error that it can't find -@

i tried

```
(microposts + pub_messages).sort! { |a,b| b[:time_ago] <=> a[:time_ago] } 
```

but it doesn't change it either (i swapped b and a around). what am i doing wrong? in the meantime, when i do the methods

```
find_pub_messages_for and from_users_followed_by 
```

i do something like

```
default_scope order: 'pub_messages.created_at DESC'
default_scope order: 'microposts.created_at DESC' 
```

in my models when i retrieve them. however is that a waste? because in the end, im sorting them again based on **both** microposts and pub_messages as seen in the line

```
(microposts + pub_messages).sort! { |a,b| a[:time_ago] <=> b[:time_ago] } 
```

thanks a bunch!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:49:24.507

```
(microposts + pub_messages).sort! { |a,b| b[:time_ago] <=> a[:time_ago] } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T21:01:00.770

i finally got it to work. i had to do...

```
(microposts + pub_messages).sort! { |a,b| b[:created_at] <=> a[:created_at] } 
```

apparently :time_ago didn't work for me in sorting

# netty - Out of x channels, only one transitions from state OPEN to CONNECTED

> ID：10824723
> 
> 赞同：0
> 
> 时间：2012-05-30T21:46:54.243
> 
> 标签：netty

I'm fairly new to both network programming in general and Netty in particular, so pray forgive my ignorance.

I wrote a small server using Netty's NIO transport, and thus far everything went smoothly. Now I implemented a test that tries to verify that my server does indeed support multiple concurrent connections. Much to my surprise, out of x (I tried different numbers between 10 and 100) connections to my server I open with a test client, only one transitions from state OPEN via BOUND to CONNECTED. All the others never make it past OPEN.

Before I dive into implementation details I would rather like to know whether someone can think of a general explanation for this phenomenon, or has experienced the same problem. Any hints are appreciated.

Regards, Olaf

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:37:45.223

事实证明，42 是在正确的轨道上：深埋在 spring xml 配置中的某个地方，突然出现了一个线程池配置，该配置将核心池大小和最大池大小都设置为 1。愚蠢的我。

# android - Android maps itemizedoverlay ConcurrentModificationException

> ID：10824729
> 
> 赞同：0
> 
> 时间：2012-05-30T21:47:23.880
> 
> 标签：android, exception, concurrency, map, itemizedoverlay

I have a map with custom overlay and a bunch of markers. Because I'm doing markers grouping when zoom change happens I have to clear overlay, regroup items for new zoom and lay then on map again. I'm doing this in backround thread to get things smooth. So you click to zoom, markers disappear, busy indicator shows in corner and new markers appear on map. all is smooth as it should however I get concurent modification exception when you zoom twice in row or zoom in and zoom out immediatelly. I've read plenty about this but none solutions are ok for me yet. For example moving map moification to onPostExecute which is on UI does prevent this but freezes map for a time markers are drawn and it looses its smoothness. I tried to make markders list on itemized overlay synchronized list but did not help. How can I prevent this?

**This is what I call on zoom change:**

```
private void drawItems() {
  final MyMapView mw = this.mapView;

  //remove existing first
  //mw.getOverlays().remove(stuffOverlay);
  stuffOverlay.clearAll();
  //mw.invalidate();

  new AsyncTask<String, Integer, String>() {
    @Override
    protected void onPreExecute() {
      super.onPreExecute();
      ((ProgressBar)findViewById(R.id.mapProgressBar)).setVisibility(View.VISIBLE);
    }

    @Override
    protected String doInBackground(String... params) {
      //get items on map
      HashMap<String, JSONArray> groupedItems = getItemsForZoom(mw.getZoomLevel());

      if (groupedItems==null)
        return "done";

      //create a copy of it sometimes it was throwing concurentmodificationexception
      HashMap<String, JSONArray> groupedItemsCopy = new HashMap<String, JSONArray> (groupedItems);

      Iterator it = groupedItemsCopy.entrySet().iterator();
      while (it.hasNext()) { //loop over markers
        try {
          //get item 
          HashMap.Entry<String, Object> pair = (HashMap.Entry)it.next();
          JSONArray itemsInMarker = (JSONArray) pair.getValue();
          JSONObject itemData = (JSONObject) itemsInMarker.get(0);

          //get truncated coordinates
          String coordsKey = pair.getKey();
          String[] coordsSplitted = coordsKey.split("_");

          //add first marker to map
          GeoPoint gp = new GeoPoint((int)(Double.parseDouble(coordsSplitted[0])*1E6), (int)(Double.parseDouble(coordsSplitted[1])*1E6));
          OverlayItem markerOverlay = new OverlayItem(gp, "marker", "snipper text");
          Drawable markerPic = ServerCall.drawableFromUrl(((JSONObject)((JSONObject)itemData.get("picture")).get("1")).get("picture_full")+"_0.png");
          //markerPic.setBounds(0, 0, markerPic.getIntrinsicWidth(), markerPic.getIntrinsicHeight());
          markerPic.setBounds(-25, -25, 50, 50);
          markerOverlay.setMarker(markerPic);
          stuffOverlay.addOverlay(markerOverlay, itemData);

          if (stuffOverlay.size() > 0) {
            mapView.getOverlays().add(stuffOverlay);
          }
        } catch (JSONException e) {
          e.printStackTrace();
        } catch (IOException e) {
          e.printStackTrace();
        }
      }
      return "done";
    }

    @Override
    protected void onPostExecute(String result) {
      super.onPostExecute(result);
      ((ProgressBar)findViewById(R.id.mapProgressBar)).setVisibility(View.GONE);
      mapView.invalidate();
    }
  }.execute();
} 
```

**This is my itemized overlay:**

```
private class StuffOverlay extends ItemizedOverlay {
  private List<OverlayItem> mOverlays = Collections.synchronizedList(new ArrayList<OverlayItem>());
  private ArrayList<JSONObject> mStuff = new ArrayList<JSONObject>();
  public int currentItem;
  Map mMap;

  public StuffOverlay(Drawable defaultMarker, Map map) {
    super(boundCenterBottom(defaultMarker));
    mMap = map;
    populate(); //keep here
  }

  public void addOverlay(OverlayItem overlay, JSONObject stuffData) {
    synchronized (mOverlays) {
      mOverlays.add(overlay);
    }

    mStuff.add(stuffData);
    setLastFocusedIndex(-1);  //keep here
    populate();
  }

  public void clearAll() {
    synchronized (mOverlays) {
      mOverlays.clear();
    }

    setLastFocusedIndex(-1); //keep here
    populate();
  }

  @Override
  protected OverlayItem createItem(int i) {
    synchronized (mOverlays) {
      return mOverlays.get(i);
    }
  }

  @Override
  public int size() {
    synchronized (mOverlays) {
      return mOverlays.size();
    }
  }

  public void draw(Canvas canvas, MapView mapView, boolean shadow) {
    if (!shadow) {
      super.draw(canvas, mapView, false);
    }
  }
} 
```

**And this is what I'm getting ;o(**

```
05-30 20:45:35.485: W/dalvikvm(1139): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
05-30 20:45:35.485: E/AndroidRuntime(1139): Uncaught handler: thread main exiting due to uncaught exception
05-30 20:45:35.495: E/AndroidRuntime(1139): java.util.ConcurrentModificationException
05-30 20:45:35.495: E/AndroidRuntime(1139):     at java.util.AbstractList$SimpleListIterator.next(AbstractList.java:64)
05-30 20:45:35.495: E/AndroidRuntime(1139):     at com.google.android.maps.OverlayBundle.draw(OverlayBundle.java:44)
05-30 20:45:35.495: E/AndroidRuntime(1139):     at com.google.android.maps.MapView.onDraw(MapView.java:476)
05-30 20:45:35.495: E/AndroidRuntime(1139):     at android.view.View.draw(View.java:6535)
05-30 20:45:35.495: E/AndroidRuntime(1139):     at android.view.ViewGroup.drawChild(ViewGroup.java:1531)
05-30 20:45:35.495: E/AndroidRuntime(1139):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1258) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T03:15:11.163

我认为问题可能与这里的这些行有关：

```
 if (stuffOverlay.size() > 0) {
        mapView.getOverlays().add(stuffOverlay);
      } 
```

您只需将对象添加`stuffOverlay`到地图叠加数组一次，您甚至可以在 stuffOverlay 中包含任何项目之前执行此操作。我会转到`mapView.getOverlays().add(stuffOverlay);`stuffOverlay 被实例化的地方。

# wcf - 如何为 Silverlight 创建一体化安装程序 - WCF - SQL Server 数据库

> ID：10824734
> 
> 赞同：2
> 
> 时间：2012-05-30T21:47:53.020
> 
> 标签：wcf, silverlight, windows-installer

我有如下要求为使用 WCF 服务和 SQL Server 作为数据库的 Silverlight 应用程序创建安装程序。

目标是创建一个在服务器上安装应用程序、服务和 SQL Server 数据库的一体化程序包。尽管该软件包应包含所有三个，但用户也应该能够单独安装它们。例如。Silverlight 应用程序不需要安装在服务器上，WCF 服务不需要安装在客户端等等。

我现在正在尝试使用 Wix 安装程序，这是我第一次使用 Wix。到目前为止它看起来不错，但我不确定它是否符合以下所有要求。

要求：

*客户应该确信应用程序将安装在 Windows Server 2008 R2 上，而不会降低操作系统或其他应用程序的性能。*

*   安装程序相关要求
*   在安装/卸载期间和之后不需要重新启动服务器
*   彻底卸载
*   遵守 Windows 资源保护 (WRP)
*   允许用户控制安装位置
*   符合内核模式组件要求
*   将共享组件安装到正确位置
*   不要用旧版本覆盖非专有文件
*   支持用户账户控制安装
*   正确配置包标识
*   遵循创建自定义操作的最佳实践
*   遵循组件规则
*   安装/卸载
*   支持命令行安装
*   使用 Windows Installer 的应用程序必须通过带有 /qn 开关的命令行以安静模式成功安装。

我想知道 Wix 是正确的工具还是有其他更好的免费工具。Visual Studio 安装项目似乎不灵活，或者可能是我错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:59:12.433

如果你想要一个免费的工具，Wix 应该是你的选择。一开始使用它并不容易，但它可以完成工作。VS 安装项目专为小型简单安装包而设计，您不能根据您的要求将其视为一个选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T06:17:38.703

[Advanced Installer](http://www.advancedinstaller.com/release-9.1.html)最近添加了对 Silverlight 应用程序的专用支持。它还涵盖了您的其他要求，包括 SQL Server 数据库。唯一的缺点是它是一个商业工具，所以你需要获得许可证。

但是，如果您想要一个免费工具，WiX 允许您将几乎任何东西侵入到您的安装程序中。因此，如果您喜欢它，您应该坚持使用它并开始实施自定义操作，这些操作涵盖了 Windows Installer 不支持的要求。

# c# - WPF 中样式定义的转换错误

> ID：10824735
> 
> 赞同：0
> 
> 时间：2012-05-30T21:47:59.837
> 
> 标签：c#, wpf, xaml

我正在编写以下代码..当然，解决方案已构建并编译所有内容，但是当我按 F5 或开始时，我收到以下错误消息。

*无法将属性“Style”中的值转换为“System.Windows.Style”类型的对象。只能基于目标类型为“矩形”的样式。标记文件中的对象“System.Windows.Shapes.Rectangle”出错*

这是代码：

```
 <Style x:Key="Connector1" TargetType="Rectangle" BasedOn="{StaticResource Style123}">
    <Setter Property="Fill" Value="Aqua"  />
</Style>
<Style x:Key="Connector1_DragThumb" TargetType="Rectangle" BasedOn="{StaticResource Style123}">
    <Setter Property="IsHitTestVisible" Value="true"/>
    <Setter Property="Fill" Value="Yellow"/>
    <Setter Property="Stroke" Value="Black"/>
</Style> 
```

任何帮助表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:54:06.877

该错误表明`StaticResource Style123`您所基于的此样式本身并不具有`TargetType="Rectangle"`.

您只能将`Rectangle`样式基于另一种`Rectangle`样式或其基类（或使用默认值`{StaticResource {x:Type Rectangle}}`）。

# c++ - Value Printed 根据之后的说明进行更改

> ID：10824740
> 
> 赞同：0
> 
> 时间：2012-05-30T21:48:35.173
> 
> 标签：c++, cout

我似乎编写了一个及时倒退的类。请允许我解释一下：

我有一个函数，`OrthogonalCamera::project()`它将矩阵设置为某个值。然后，我打印出该矩阵的值。

```
cam.project();

std::cout << "My Projection Matrix: " << std::endl << ProjectionMatrix::getMatrix() << std::endl; 
```

`cam.project()`将矩阵推入 ProjectionMatrix 的堆栈（我正在使用 std::stack 容器），并且`ProjectionMatrix::getMatrix()`只返回堆栈的顶部元素。如果我只运行这段代码，我会得到以下输出：

```
 2      0      0      0      
 0      7.7957 0      0      
 0      0      -0.001 0      
-1     -1      -0.998 1 
```

*但是，如果我在调用**后将*这些代码运行到行*`std::cout`*

```
float *foo = new float[16];

Mat4 fooMatrix = foo; 
```

然后我得到这个输出：

```
 2      0      0      0      
 0     -2      0      0      
 0      0      -0.001 0      
-1      1      -0.998 1 
```

我的问题如下：我可能会做什么，这样在我打印一个值*后执行的代码会改变正在打印的值？*

我正在使用的一些功能：

```
static void load(Mat4 &set)
{
    if(ProjectionMatrix::matrices.size() > 0)
        ProjectionMatrix::matrices.pop();

    ProjectionMatrix::matrices.push(set);
}
static Mat4 &getMatrix()
{
    return ProjectionMatrix::matrices.top();
} 
```

和

```
void OrthogonalCamera::project()
{
    Mat4 orthProjection = { { 2.0f / (this->r - this->l), 0, 0, -1 * ((this->r + this->l) / (this->r - this->l)) },
    { 0, 2.0f / (this->t - this->b), 0, -1 * ((this->t + this->b) / (this->t - this->b)) },
    { 0, 0, -2.0f / (this->farClip - this->nearClip), -1 * ((this->farClip + this->nearClip) / (this->farClip - this->nearClip)) },
    { 0, 0, 0, 1 } }; //this is apparently the projection matrix for an orthographic projection. 

    orthProjection = orthProjection.transpose();

    ProjectionMatrix::load(orthProjection);
} 
```

编辑：谁格式化了我的代码，谢谢。我对这里的格式不太好，现在看起来好多了:)

进一步编辑：我已经验证了 fooMatrix 的初始化在我调用 std::cout*后正在运行。*

UPTEENTH 编辑：这是初始化 fooMatrix 的函数：

```
typedef Matrix<float, 4, 4> Mat4;

template<typename T, unsigned int rows, unsigned int cols>
Matrix<T, rows, cols>::Matrix(T *set)
{
    this->matrixData = new T*[rows];

    for (unsigned int i = 0; i < rows; i++)
    {
        this->matrixData[i] = new T[cols];
    }

    unsigned int counter = 0; //because I was too lazy to use set[(i * cols) + j]

    for (unsigned int i = 0; i < rows; i++)
    {
        for (unsigned int j = 0; j < cols; j++)
        {
            this->matrixData[i][j] = set[counter];
            counter++;
        }
    }
} 
```

g第[64]次编辑：这不仅仅是输出问题。我实际上必须在其他地方使用矩阵的值，它的值与所描述的行为一致（无论我是否打印它）。

树第三次编辑：通过调试器运行它又给了我一个*不同*的价值：

```
-7.559 0      0      0      
0      -2     0      0      
0      0      -0.001 0      
1      1      -0.998 1 
```

a(g [64] , g [64] )th 编辑：在 linux 上编译不存在问题。仅在带有 MinGW 的 Windows 上。会不会是编译器错误？那会让我很难过。

最终编辑：它现在可以工作了。我不知道我做了什么，但它有效。我已经确定我使用的是最新版本，它没有确保因果关系仍然有效的代码，并且它可以工作。感谢您帮助我解决这个问题，stackoverflow 社区。和往常一样，你一直乐于助人，容忍我的迟钝。我将对任何可能导致这种不可预测性的未定义行为或指针错误保持高度警惕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T22:40:13.337

您不是在逐条编写程序指令。您正在向 C++ 编译器描述其行为，然后它会尝试在机器代码中表达相同的行为。

只要*可观察到*的行为没有改变，编译器就可以重新排序您的代码。

换句话说，编译器几乎肯定会重新排序您的代码。那么为什么可观察到的行为会发生变化呢？

因为您的代码表现出*未定义的行为*。

同样，您正在编写 C++ 代码。C++ 是一种标准，一种说明代码“含义”的规范。您正在根据一项合同工作，“只要我，程序员，编写可以根据 C++ 标准解释的代码，那么你，编译器，将生成一个行为与我的源代码相匹配的可执行文件”。

如果您的代码做了本标准中未指定的*任何事情*，那么您就违反了本合同。*您输入了无法*根据 C++ 标准解释其行为的编译器代码。然后所有的赌注都取消了。编译器信任你。它相信你会履行合同。它分析您的代码并基于您将编写具有明确定义的代码的假设生成一个可执行文件。你没有，所以编译器是在错误的假设下工作的。然后它建立在这个假设之上的任何东西也是无效的。

垃圾进垃圾出。:)

可悲的是，没有简单的方法来查明错误。您可以仔细研究每段代码，也可以尝试在调试器中逐步检查有问题的代码。或者在看到“错误”值的地方闯入调试器，并研究反汇编以及如何到达那里。

这是一种痛苦，但这对你来说是未定义的行为。:) 静态分析工具（Linux 上的 Valgrind，根据您的 Visual Studio 版本，/analyze 开关可能可用也可能不可用。Clang 内置了类似的选项）可能会有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T22:36:53.493

你的编译器是什么？如果您使用 gcc 进行编译，请尝试打开[彻底和详细的警告](https://stackoverflow.com/questions/5088460/flags-to-enable-thorough-and-verbose-g-warnings/9862800#9862800)。如果您使用的是 Visual Studio，请将警告设置为 /W4 并将所有警告视为错误。

一旦你完成了这些并且仍然可以编译，如果错误仍然存​​在，那么通过 Valgrind 运行程序。很可能在你的程序中的某个时刻，在更早的时刻，你读到了某个数组的末尾，然后写了一些东西。你写的东西会覆盖你想要打印的东西。因此，当您将更多内容放入堆栈时，读取某个数组的末尾会将您置于内存中完全不同的位置，因此您正在覆盖其他内容。Valgrind 就是为了捕捉这样的东西而设计的。

# mysql - MySQL 嵌套查询

> ID：10824750
> 
> 赞同：0
> 
> 时间：2012-05-30T21:49:50.453
> 
> 标签：mysql, select

我有两张桌子，一张包含产品，一张购买。我试图找到每种产品最近 3 次购买价格的平均值。因此，在下面的示例中，对于产品“bean”，我希望返回产品时间 1230854663 之前最后 3 个购买价格的平均值，即客户 C、D、E 的平均值（239）

**产品**

```
+-------+------------+
| Name  | time       |
+-------+------------+
| beans | 1230854764 |
+-------+------------+ 
```

**购买**

```
+----------+------------+-------+
| Customer | time       | price |
+----------+------------+-------+
| B        | 1230854661 |   207 |
| C        | 1230854662 |   444 |
| D        | 1230854663 |    66 |
| E        | 1230854764 |    88 |
| A        | 1230854660 |   155 |
+----------+------------+-------+ 
```

我想出了一个嵌套的选择查询，它几乎可以让我到达那里，即如果我对时间进行硬编码，它就可以工作：

`SELECT products.name,(SELECT avg(temp.price) FROM (select purchases.price from purchases WHERE purchases.time < 1230854764 order by purchases.time desc limit 3) temp) as av_price from products products`

但是，如果查询引用 product.time 而不是像下面这样的硬编码时间，我会收到一个错误，即列 products.time 不存在。

`SELECT products.name,(SELECT avg(temp.price) FROM (select purchases.price from purchases WHERE purchases.time < products.time order by purchases.time desc limit 3) temp) as av_price from products products`

我不确定我是否在嵌套查询中犯了一个简单的错误，或者我正在以完全错误的方式解决这个问题，应该使用连接或其他构造，无论哪种方式我都被卡住了。任何帮助都会受到极大的欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:19:13.447

您查询中的唯一问题是您没有在内部查询中提到**产品**表。

```
SELECT products.name,(SELECT avg(temp.price) 
FROM (select purchases.price from purchases,products 
WHERE purchases.time < products.time order by purchases.time desc limit 3) temp) as
av_price from products products 
```

# c# - 用 C# 进行数学除法

> ID：10824753
> 
> 赞同：3
> 
> 时间：2012-05-30T21:50:18.027
> 
> 标签：c#, math, double

这有一个可能很简单的答案，但我无法弄清楚 -

```
double Result = 1 / 12; 
```

返回 0，而

```
double Result2 = 24 / 12; 
```

返回 2

发生了什么事，我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T21:51:40.880

试试这个：

```
double Result = 1 / (double)12; 
```

或这个：

```
double Result = 1 / 12D; 
```

在 C#（以及许多其他语言）中，整数除法返回一个整数。通过将操作数之一转换为`double`或显式声明文字`double`，您可以强制除法表达式返回 a`double`并且不截断小数位后。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T21:51:49.333

它正在做整数数学，因为右边的数字被评估为整数。

试试`1.0/12`；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T21:52:10.270

我认为你需要塑造你的价值观

```
double Result = (double)1 / (double)12 
```

与基于整数的数学有关总是返回一个整数.....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T21:52:59.990

这也可以

```
Decimal.Divide(1, 12) 
```

它的结果精度更高，但范围更小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T21:57:44.633

问题在于`1`and`12`是整数（类型为`int`，而不是`double`）。这意味着这些值会忽略小数点之后的任何内容。当你将 1 除以 12 时，你得到 0.083。由于小数点后的任何内容都将被截断`int`，因此您只剩下`0`.

要获得预期的结果，您的操作数之一必须是 type `double`。您可以通过更改`1`为`1.0`或 12 来做到这一点`12.0`（或两者，只要至少一个操作数是 a `double`）。

# testing - HP QC 中的缺陷状态类型

> ID：10824761
> 
> 赞同：0
> 
> 时间：2012-05-30T21:50:54.740
> 
> 标签：testing, qa, hp-quality-center, defects

我正在使用 HP QC 来管理缺陷（刚刚开始）并且对各种缺陷状态类型有疑问......

我们有：

1.  新 - 新缺陷
2.  打开 - ？？
3.  活动 - 正在调查缺陷
4.  已修复 - 开发团队已发布修复需求重新测试
5.  准备测试 - 不言自明

我知道还有其他状态”，但我不完全确定 open 的含义，尤其是...

即在什么情况下缺陷是开放的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T09:28:50.130

在组织良好的缺陷管理系统中，定义了不同的（用户）角色。流程中的每一步都由某个角色维护。

开放意味着缺陷由高级人员检查，并且可以由求解器分配或拾取。

例如：

1.  开发人员/测试人员记录缺陷 -> 状态变为新的。开发人员/测试人员无法将状态更改为打开/活动或其他。缺陷只是坐在那里等待。

2.  测试经理（或缺陷协调员/高级测试员）检查缺陷。（完整性、有效性、重复性等）。当缺陷正常时，他将状态更改为打开。他还可以指定一个求解器。

3.  当求解器开始处理缺陷时，他会将状态更改为活动。每个人都可以看到谁在忙于处理这个缺陷（调查或解决）。

4.  求解器修复缺陷并将状态更改为已修复。

5.  Testmanager 收集所有已修复的缺陷并将测试人员分配给它们。状态更改为准备（重新）测试。

等等

# oracle - Oracle 插入如果不存在语句

> ID：10824764
> 
> 赞同：51
> 
> 时间：2012-05-30T21:51:41.540
> 
> 标签：oracle

```
insert into OPT (email, campaign_id) values('mom@cox.net',100)
where not exists( select * from OPT where (email ="mom@cox.net" and campaign_id =100)) ; 
```

> 错误报告：SQL 错误：ORA-00933：SQL 命令未正确结束 00933\. 00000 - “SQL 命令未正确结束” *原因：
> *操作：

如果 Oracle 中不存在新行，如何插入新行？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-05-19T22:01:44.400

```
insert into OPT (email, campaign_id) 
select 'mom@cox.net',100
from dual
where not exists(select * 
                 from OPT 
                 where (email ='mom@cox.net' and campaign_id =100)); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-31T08:17:50.437

根据已经存在的另一条记录插入某些内容（在 Oracle 中）的正确方法是使用[MERGE](http://www.oracle-developer.net/display.php?id=203)语句。

请注意，这个问题已经在这里回答了 SO：

*   [如果行不存在，oracle 插入](https://stackoverflow.com/questions/3147874/oracle-insert-if-row-not-exists)
*   [如果不存在则插入 oracle](https://stackoverflow.com/questions/1702832/insert-if-not-exists-oracle)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-10-22T07:12:04.373

```
MERGE INTO OPT
USING
    (SELECT 1 "one" FROM dual) 
ON
    (OPT.email= 'mom@cox.net' and OPT.campaign_id= 100) 
WHEN NOT matched THEN
INSERT (email, campaign_id)
VALUES ('mom@cox.net',100) 
; 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-05-19T22:01:49.980

```
insert into OPT       (email,        campaign_id) 
select 'mom@coxnet' as email, 100 as campaign_id from dual MINUS
select                 email,        campaign_id from OPT; 
```

如果OPT中已经有一条带有`mom@cox.net`/的记录，则将从记录中减去该记录，并且不会插入任何内容。另一方面，如果没有这样的记录，则不会减去任何内容并且值/将被插入。`100``MINUS``select 'mom@coxnet' as email, 100 as campaign_id from dual``MINUS``mom@coxnet``100`

正如*p.marino*已经指出的那样，`merge`它可能是解决您的问题的更好（和更正确）的解决方案，因为它是专门为解决您的任务而设计的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-07T10:50:11.133

另一种方法是利用`INSERT ALL`oracle 的语法，

```
INSERT ALL 
    INTO table1(email, campaign_id) VALUES (email, campaign_id)
WITH source_data AS
 (SELECT 'mom@cox.net' email,100 campaign_id
  FROM   dual
  UNION ALL
  SELECT 'dad@cox.com' email,200 campaign_id
  FROM   dual)      
SELECT email
      ,campaign_id
FROM   source_data src
WHERE  NOT EXISTS (SELECT 1
        FROM   table1 dest
        WHERE  src.email = dest.email
        AND    src.campaign_id = dest.campaign_id); 
```

`INSERT ALL` *还允许我们基于作为源的子查询对多个表执行条件插入*。

有一些非常干净和很好的例子可供参考。

1.  [oracletutorial.com](https://www.oracletutorial.com/oracle-basics/oracle-insert-all/#:%7E:text=The%20conditional%20multitable%20insert%20statement,tables%20based%20on%20specified%20conditions.&text=If%20you%20specify%20the%20ALL,executes%20the%20corresponding%20INTO%20clause.)
2.  [oracle-base.com/](https://oracle-base.com/)

# ms-access - 宏在通过 Outlook 发送电子邮件报告时经常崩溃

> ID：10824769
> 
> 赞同：1
> 
> 时间：2012-05-30T21:52:05.283
> 
> 标签：ms-access, ms-access-2007

我使用计划任务运行 Access 2007 宏以通过 Outlook、记事本、Excel 2003 和 html 格式的多个 Access 报告发送电子邮件。大约 50% 的时间，Access 应用程序崩溃并自动重新启动并自行修复并创建备份……我能做些什么来防止应用程序崩溃？

我不知道它是否与问题有关，但应用程序中唯一的 VBA 是防止宏通过电子邮件发送空报告，如果报告的数据源查询中有零记录。我在报告的属性/事件/“无数据”/偶数过程中设置了这个（选项比较数据库

Private Sub Report_NoData(取消为整数)

结束子）

非常感谢您的帮助，纳撒尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:07:26.103

当您的报告没有数据时它会失败吗？在 NoData 事件中，您需要设置 Cancel=True 以便在没有数据时停止报告。打开报告的代码需要捕获该错误并相应地处理它（而不是发送电子邮件）。

通过 Outlook 发送电子邮件可能会遇到 MAPI 安全问题。我使用来自 FMS 的插件 Total Access Emailer 来自动处理来自 Access 的电子邮件。它允许您将报告附加到为列表中的每个人过滤的消息中：[http ://www.fmsinc.com/MicrosoftAccess/Email.asp](http://www.fmsinc.com/MicrosoftAccess/Email.asp)

希望有帮助。

# php - 在 PHP 中生成随机唯一数字数组

> ID：10824770
> 
> 赞同：19
> 
> 时间：2012-05-30T21:52:09.653
> 
> 标签：php

我正在尝试从 0-n 生成一个随机数数组，然后随机播放（但确保键和值不匹配）。

例如：

```
0 => 3
1 => 2
2 => 4
3 => 0
4 => 1 
```

请注意，键和值都是从 0 到 4，但没有一个键和值是相同的。

有什么想法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-03-27T08:29:15.617

一个更短的解决方案：

```
$random_number_array = range(0, 100);
shuffle($random_number_array );
$random_number_array = array_slice($random_number_array ,0,10);

print_r($random_number_array); 
```

结果将是：

```
[0] => 53
[1] => 6
[2] => 16
[3] => 59
[4] => 8
[5] => 18
[6] => 62
[7] => 39
[8] => 22
[9] => 26 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T22:06:08.180

```
$max = 5;
$done = false;
while(!$done){
    $numbers = range(0, $max);
    shuffle($numbers);
    $done = true;
    foreach($numbers as $key => $val){
        if($key == $val){
            $done = false;
            break;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-09-24T18:55:15.230

这将生成一个包含 0 到 100 的 10 个随机数的数组：

```
array_map(function () {
       return rand(0, 100);
   }, array_fill(0, 10, null)); 
```

结果：

```
array(10) {
  [0]=>
  int(15)
  [1]=>
  int(97)
  [2]=>
  int(20)
  [3]=>
  int(64)
  [4]=>
  int(57)
  [5]=>
  int(38)
  [6]=>
  int(16)
  [7]=>
  int(53)
  [8]=>
  int(56)
  [9]=>
  int(22)
} 
```

解释：

*   `array_fill(0, 10, null)`将生成一个包含 10 个空项的数组
*   `array_map`将回调（第一个参数）应用于它接收到的数组的每个项目（第二个参数）。在这个例子中，我们只是为每个数组项返回一个随机数。

游乐场：[https ://3v4l.org/FffN6](https://3v4l.org/FffN6)

如果您需要确保每个生成的数字都是唯一的：

```
$uniqueNumbers = 100;
$picked = [];
$uniqueRandomNumbers = array_map(function () use(&$picked, $uniqueNumbers) {
    do {
      $rand = rand(0, $uniqueNumbers);
    } while(in_array($rand, $picked));

    $picked[] = $rand;

    return $rand;
}, array_fill(0, $uniqueNumbers, null)); 
```

[https://3v4l.org/mSWBo#v8.0.9](https://3v4l.org/mSWBo#v8.0.9)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-30T21:59:52.343

天真的解决方案：

```
$n = 10;
$rands = array();
for($i=0; $i<$n;$i++) {
  $ok = false;
  while(!$ok) {
    $x=mt_rand(0,$n-1);
    $ok = !in_array($x, $rands) && $x != $i;
  }
  $rands[$i]=$x;
}

var_dump($rands); 
```

有效的解决方案：

```
$n = 100;  
$numbers = range(0, $n-1);
$rands = array();
for ($i=0; $i < $n; $i++) {
  $ok = false;
  while (!$ok) {
    $x = array_rand($numbers);
    $ok = !in_array($numbers[$x], $rands) && $numbers[$x] != $i;
  }
  $rands[$i] = $numbers[$x];
  unset($numbers[$x]);
}

var_dump($rands); 
```

**编辑：** s/rand/mt_rand/

**编辑#2：**正如@AMayer 所述，两种解决方案都可能陷入僵局。我站得更正了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-30T22:51:19.423

我相信这是一个相当长但也非常有效的解决方案。与此处发布的其他解决方案相反，这不会死锁（除非`$size<2`），并且每次一个值不适合时，这不会进行完全洗牌。相反，它只会用另一个随机值替换该值。

```
function unique_list($size=5) {

    function all_unique($numbers) {
        foreach ($numbers as $key=>$value)
            if ($key==$value) return false;
        return true;
    }
    function flip($a, $b, &$numbers) {
        $numbers[$a] = $numbers[$a] + $numbers[$b];
        $numbers[$b] = $numbers[$a] - $numbers[$b];
        $numbers[$a] = $numbers[$a] - $numbers[$b];
    }

    $flip_count = 0;
    $numbers = range(0,$size-1);
    shuffle($numbers);

    while (!all_unique($numbers)) {
        foreach ($numbers as $key=>$value) {
            if ($key==$value) {
                flip($key, rand(0,$size-1), $numbers);
                $flip_count++;
                break;
            }
        }
    }

    printf("Flipped %d values\n", $flip_count);
    return $numbers;

}

$list = unique_list(10);
print_r($list); 
```

以上将打印类似于

```
Flipped 1 value(s)
Array
(
    [0] => 2
    [1] => 5
    [2] => 7
    [3] => 9
    [4] => 6
    [5] => 3
    [6] => 1
    [7] => 8
    [8] => 0
    [9] => 4
) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-04T11:52:54.753

组合`range(...)`（首先生成原始数组）、`shuffle(...)`（随机化数组）和`array_intersect_assoc(...)`（检查结果数组）是什么？

```
$numbers = range(0, 4);
do {
    shuffle($numbers); // print_r($numbers);
    $matchingKeyValuePairs = array_intersect_assoc(array_keys($numbers), array_values($numbers)); // print_r($matchingKeyValuePairs);
} while (! empty($matchingKeyValuePairs)); 
```

此解决方案可能会为大量元素带来一些性能问题。但它可以通过处理`$matchingKeyValuePairs`. 因此，虽然现在的逻辑就像“如果有，`matchingKeyValuePairs`那么再试一次”，一个更有效的逻辑可能是“如果有，`matchingKeyValuePairs`那么`matchingKeyValuePairs`从数组中剪切，随机化这个子数组（多次，如果需要），然后合并回来了”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-23T23:24:37.993

这里的方法是创建一个从 0 到 n 的数字范围，然后随机播放。然后我们寻找键值匹配，并交换它们的对。如果我们没有要交换的对，则与最后一个项目交换，除非该项目是最后一个项目，否则我们与第一个项目交换。

```
<?php
$n = 5;
$values = range(0, $n);
shuffle($values);
$matched = array_filter($values, function($v, $k) {return $k === $v;}, ARRAY_FILTER_USE_BOTH);
foreach(array_chunk($matched, 2) as list($a, $b)) {
    if($b === null) {
        $swap_key = array_key_last($values);
        if($swap_key == $a) {
            $swap_key = array_key_first($values);
        }
        list($values[$a], $values[$swap_key]) = [$values[$swap_key], $a];
    } else {
        list($values[$a], $values[$b]) = [$b, $a];
    }
} 
```

当 n 为 5 时的示例洗牌：

```
array (
  0 => 0,
  1 => 5,
  2 => 1,
  3 => 3,
  4 => 4,
  5 => 2,
) 
```

这里我们有键匹配：

```
0, 3 and 4. 
```

所以我们交换键 0 和 3 的值，以及最后一个键 4。

```
array (
  0 => 3,
  1 => 5,
  2 => 1,
  3 => 0,
  4 => 2,
  5 => 4,
) 
```

（`array_key_first`鉴于此处的范围，可以将其交换为 0。我将其保留，因为它更明确。）

# set - 用 M 的子集覆盖 M 的 k 组合集的算法

> ID：10824775
> 
> 赞同：1
> 
> 时间：2012-05-30T21:52:27.160
> 
> 标签：set, combinations, combinatorics

我正在开发一个应用程序，我想要获取 M 中所有可能的元素 k 组合的集合 C（带有 ||M|| = m），并用子集的 k 组合集合覆盖 C M 中的 N_i，与 ||N_i|| = n < m ∀ N_i

所以有 (m 选择 k) 个组合要覆盖，n 个元素的每个集合 Q_i 将包含 (n 选择 k) 个组合。

我想要的是一种构造集合 Qi 的算法，使得 q 最小化（即，尽可能接近（m 选择 k）/（n 选择 k））

因此，例如，如果 m=100、k=3 和 n=10，我想要最小的 10 个元素集，使得它们各自的 3-组合集覆盖 (100 选择 3) 3- M的组合

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:21:38.670

我在 Math Overflow 上交叉发布了[这个问题](https://mathoverflow.net/questions/98421/how-to-cover-set-of-k-combinations-of-m-with-subsets-of-m)

事实证明，这是一个在组合学中被广泛使用的问题，称为**覆盖设计问题**。

一般来说，没有算法可以保证最小值，尽管有些算法非常接近最小值。[你可以在这里](http://www.ccrwest.org/cover.html)找到现有的已知覆盖物和研究

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:40:59.087

我不确定这是否有帮助，但我已经编写了一个类来处理处理二项式系数的常用函数，这是您的问题所属的问题类型。它执行以下任务：

1.  将任何 N 选择 K 的所有 K 索引以良好的格式输出到文件。K-indexes 可以替换为更具描述性的字符串或字母。这种方法使得解决这类问题变得非常简单。

2.  将 K 索引转换为已排序二项式系数表中条目的正确索引。这种技术比依赖迭代的旧已发布技术快得多。它通过使用帕斯卡三角形固有的数学属性来做到这一点。我的论文谈到了这一点。我相信我是第一个发现并发表这种技术的人，但我可能是错的。

3.  将已排序二项式系数表中的索引转换为相应的 K 索引。

4.  使用[Mark Dominus](http://blog.plover.com/math/choose.html)方法计算二项式系数，它不太可能溢出并且适用于更大的数字。

5.  该类是用 .NET C# 编写的，并提供了一种通过使用通用列表来管理与问题相关的对象（如果有）的方法。此类的构造函数采用一个名为 InitTable 的 bool 值，当它为 true 时，将创建一个通用列表来保存要管理的对象。如果此值为 false，则不会创建表。无需创建表即可执行上述 4 种方法。提供了访问器方法来访问表。

6.  有一个关联的测试类，它显示了如何使用该类及其方法。它已经用 2 个案例进行了广泛的测试，并且没有已知的错误。

要了解此类并下载代码，请参阅[制表二项式系数](http://tablizingthebinomialcoeff.wordpress.com/)。

将此类转换为您选择的语言应该不难。

从您对问题的描述来看，您似乎应该为 N 设置一个循环（如果 K 也发生变化，则为另一个循环），然后为该 N，K 组合创建一个二项式系数对象（BC）。使用 BC 对象调用 GetBinCoeff() 的无符号长版本以获取组合总数。然后设置另一个循环来遍历每个 BC 对象的组合总数。在该循环中，调用 BC GetKIndexes 方法来获取每个索引（即组合）的 K-Indexes，然后进行计算。我不确定您要最小化什么。如果我的建议不够清晰或不够有用，请尝试发布更详细的示例，清楚地显示您正在寻找的结果。

# xcode - Tableview 自定义行名

> ID：10824777
> 
> 赞同：0
> 
> 时间：2012-05-30T21:52:43.213
> 
> 标签：xcode, tableview, row

我正在制作一个应用程序，我将在导航栏中有一个带有“添加”按钮的表格视图，这个“添加”按钮创建一个新行，但问题是我无法弄清楚如何给行提供唯一名称. 为了让用户决定名称，我包含了一个带有纯文本字段的警报。然后用户应该在字段中写下名称，然后将调用新行。但是我该怎么做呢？我使用了 Xcode 中提供的 tableview 模板，它根据添加新行的时钟为每一行赋予一个新名称。我只想先弹出一个警报，然后让用户输入新行的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:43:17.267

您必须以某种方式识别每一行。一种方法是使用表中的索引作为标识符。我猜您将该行添加到映射到表行或类似内容的 NSArray 中，因此您知道新行的索引。您只需在 UITableView 上使用此方法更新该索引的行：

```
- (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

假设您只有一个部分，您的数组称为“arrayWithRowsData”，并且您将新行放在最后，您可以使用以下命令创建索引路径：

```
int newRowIndex = [arrayWithRowsData count] - 1;
NSIndexPath* indexPath = [NSIndexPath indexPathForRow:newRowIndex inSection:0]; 
```

希望能帮助到你。

# asp.net-mvc-3 - LabelFor 行为

> ID：10824781
> 
> 赞同：0
> 
> 时间：2012-05-30T21:52:49.913
> 
> 标签：asp.net-mvc-3, html

我刚刚修复了代码中的一个错误，但我不明白为什么会这样。我有一个`LabelFor(u => u.SomeName, "Select a value")`. `SomeName`是一个枚举值，控件是一个单选按钮组。当我单击`label`它时，它将单选按钮组的值更改为第一个单选按钮，这也是该枚举的默认值。

当我将所有`LabelFor`s更改为`Label`我没有问题时，错误已修复，但我真的很想了解这一点。

谁能告诉我为什么单击`LabelFor`标签会更改我的单选按钮值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:00:12.080

经过更多的研究，我现在明白了，但我不会删除它，以防万一其他人遇到这个问题。

labelfor`<label for='element'>`在单击该标签时会生成一个，它还将选择它绑定到的控件。

在这种情况下，我选择绑定到标签的枚举的默认值。

# android - 在 android 应用程序中使用 .net 服务？

> ID：10824784
> 
> 赞同：2
> 
> 时间：2012-05-30T21:53:02.610
> 
> 标签：android, .net, web-services, ksoap2

我正在从 android 代码访问 wcf 服务
Web 服务是[http://www.nbrm.mk/klservice/kurs.asmx](http://www.nbrm.mk/klservice/kurs.asmx) 我的问题是 SoapObject 构造函数和 HttpTransportSE 对象的调用方法中的参数是什么？

这是代码

```
public class ExchangeMoneyMKActivity extends Activity {
private static final String SOAP_ACTION = "http://nbrm.mk/callService";

private static final String METHOD_NAME = "callService";

private static final String NAMESPACE = "http://nbrm.mk/";
private static final String URL = "http://www.nbrm.mk/klservice";
TextView txt;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    txt=(TextView)findViewById(R.id.txtView1);
    callService();
}
private void callService() {
    // TODO Auto-generated method stub
    try{
        SoapObject request=new SoapObject(NAMESPACE,METHOD_NAME);
        SoapSerializationEnvelope envelope=new SoapSerializationEnvelope(SoapEnvelope.VER11);

    envelope.dotNet=true;
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    androidHttpTransport.call(SOAP_ACTION, envelope);
    Object result = (Object)envelope.getResponse();
     txt.setText(result.toString());
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:18:47.003

```
 private static final String METHOD_NAME = "GetExchangeRate";

private static final String NAMESPACE = "http://www.nbrm.mk/klservice/";
private static final String SOAP_ACTION=NAMESPACE+METHOD_NAME;
private static final String URL = "http://www.nbrm.mk/klservice/kurs.asmx?kurs"; 
```

METHOD_NAME 是我从 Web 服务调用的方法的名称，NAMESPACE 是来自 url 的域 + 根文件夹

# windows - 测试互联网间歇性

> ID：10824785
> 
> 赞同：0
> 
> 时间：2012-05-30T21:53:05.553
> 
> 标签：windows, cmd

我想知道是否有办法为 Windows 编写一个 cmd 脚本或其他东西，让我知道我的互联网连接何时中断。

在 Ubuntu 中，我会编写一个 shell 脚本来每秒 ping 一次 Google，如果不可能记录时间等。

是否可以在 Windows 中做类似的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T03:13:31.803

可能有更好的方法来监控连接状态。但这是您指定的逻辑的 Windows 批处理实现。

```
@echo off
setlocal enableDelayedExpansion
set log="internetStatus.txt"
set "status="

>>%log% echo %date% %time%: Begin monitoring
for /l %%A in () do (
  >nul ping -n 2 -w 1000 google.com && (
      if "%status%"=="FAIL" (
        >>%log% echo %date% %time%: internet connection succeeded
        set "status=OK"
      )
  ) || (
      if "%status%"=="OK" (
        >>%log% echo %date% %time%: Internet connection to google.com failed
        set "status=FAIL"
      )
  )
) 
```

# javascript - jQuery Deferreds & Ajax - 如何访问 jqXHR 对象？

> ID：10824786
> 
> 赞同：1
> 
> 时间：2012-05-30T21:53:05.977
> 
> 标签：javascript, jquery, ajax, jquery-deferred

在[有关 Deferreds 的 jQuery 文档中](http://api.jquery.com/jQuery.when/)，有一个返回 ajax args 的示例，包括 jqXHR：

```
$.when( $.ajax("test.php") ).then(function(ajaxArgs){ 
    alert(ajaxArgs[1]); /* ajaxArgs is [ "success", statusText, jqXHR ] */
}); 
```

但似乎文档是错误的。`ajaxArgs`实际上是`$.ajax`呼叫的响应。

我需要访问 jqXHR 对象，因为我需要一些关于实际调用的元数据，但它似乎很老套。这就是我目前正在做的事情，但必须有更好的方法（交叉手指）。

```
xhr = $.ajax({
    'url': src,
}).done(function () {
    var meta = xhr.getResponseHeader(...);
}); 
```

访问我需要的 jqXHR 数据的最佳/最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:57:40.880

使用第三个参数：

```
.then(function(text,status,xhr) {
   var meta = xhr.getResponseHeader(...);
}); 
```

但是请注意，如果您将多个延迟传递给`$.when`，它将是第一个参数的第三个索引，第二个或第三个索引，具体取决于您想要标头的请求。

```
$.when( $.ajax("test.php"),$.ajax("test.php"),$.ajax("test.php") ).then(function(){ 
    var meta1 = arguments[0][2].getResponseHeader(...);
    var meta2 = arguments[1][2].getResponseHeader(...);
    var meta3 = arguments[2][2].getResponseHeader(...);
}); 
```

# iphone - Iphone 保存数据并返回上一个视图控制器

> ID：10824787
> 
> 赞同：1
> 
> 时间：2012-05-30T21:53:13.500
> 
> 标签：iphone, ios5, storyboard

我有一个使用情节提要设计的表视图控制器。这在导航栏上有一个添加按钮，我使用情节提要创建了所有这些。单击添加按钮时，我有一个视图控制器视图来添加数据，并且导航栏上有一个保存按钮。单击保存按钮时，我希望用户保存数据并返回到 TableViewController。所有的设计都是使用故事板完成的。单击保存按钮时，我正在调用 IBAction 保存方法。我可以保存数据，但是如何以编程方式返回到以前的 TableViewController。

谢谢 prerna

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T22:44:32.950

在您的 IBAction 保存方法中，调用：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

# c# - 创建缩略图失败并创建空白图像

> ID：10824792
> 
> 赞同：1
> 
> 时间：2012-05-30T21:54:00.147
> 
> 标签：c#, thumbnails, image-capture

我有一个奇怪的问题，我列出了一个单词列表，并通过对单词进行谷歌搜索来创建屏幕截图。在它创建了 50 个屏幕截图之后，它开始创建空白图像！

有人可以帮我解决问题吗！

PS：如果我需要更清楚，请告诉我！

这是我用来创建屏幕截图的代码......在我的主页上，我只是循环我的话！

有人可以帮我解决问题吗

```
public class GeneateScreenshot
 {
 public void GenerateScreenshot()
  {

  }
public Bitmap GenerateScreenshot(string url)
{
    // This method gets a screenshot of the webpage
    // rendered at its full size (height and width)

    return GenerateScreenshot(url, -1, -1);
}

public Bitmap GenerateScreenshot(string url, int width, int height)
{
    // Load the webpage into a WebBrowser control

    WebBrowser wb = new WebBrowser();
    wb.ScrollBarsEnabled = false;
    wb.ScriptErrorsSuppressed = true;
    wb.Navigate(url);
    while (wb.ReadyState != WebBrowserReadyState.Complete) { Application.DoEvents(); }

    // Set the size of the WebBrowser control
    wb.Width = width;
    wb.Height = height;

    if (width == -1)
    {
        // Take Screenshot of the web pages full width
        wb.Width = wb.Document.Body.ScrollRectangle.Width;
    }

    if (height == -1)
    {
        // Take Screenshot of the web pages full height
        wb.Height = wb.Document.Body.ScrollRectangle.Height;
    }

    // Get a Bitmap representation of the webpage as it's rendered in the WebBrowser control
    Bitmap bitmap = new Bitmap(wb.Width, wb.Height);
    wb.DrawToBitmap(bitmap, new Rectangle(0, 0, wb.Width, wb.Height));
    wb.Dispose();

    return bitmap;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:52:41.200

我怀疑该`DrawToBitmap`函数不是将 WebBrowser 控件转换为图像的正确方法。查看以下链接，看起来您需要使用一些本机方法才能可靠地执行此操作：

[WebBrowser.DrawToBitmap() 还是其他方法？](https://stackoverflow.com/questions/2434156/webbrowser-drawtobitmap-or-other-methods)

[将 WebBrowser.Document 转换为位图？](https://stackoverflow.com/questions/5006825/converting-webbrowser-document-to-a-bitmap)

[http://www.codeproject.com/Articles/58605/HTML-to-Image-in-C](http://www.codeproject.com/Articles/58605/HTML-to-Image-in-C)

PS 在玩这段代码的时候，我很快就被谷歌的机器人检测器发现了，所以你可能也遇到了麻烦。

# openssl - 我应该使用哪个版本的 openssl？

> ID：10824795
> 
> 赞同：7
> 
> 时间：2012-05-30T21:54:16.953
> 
> 标签：openssl

[openssl.org](http://openssl.org)上同时更新了三个不同版本的 openssl ：0.98、1.0.0、1.0.1？它们之间有什么区别，我该如何选择要使用的版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-15T09:39:35.043

[https://en.wikipedia.org/wiki/OpenSSL](https://en.wikipedia.org/wiki/OpenSSL)

有一个按时间线顺序排列的易于阅读的表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T06:22:55.990

要了解版本之间的差异，您可以在[此处](http://www.openssl.org/news/changelog.html)查看 OpenSSL 的更改日志。要了解 1.0.0 有何不同，请查看“0.9.8n 和 1.0.0 [2010 年 3 月 29 日] 之间的变化”下方的条目。

例如支持名称约束证书扩展的一些差异。要了解 1.0.0h 和 1.0.1 之间的区别，请参阅 Changes between 1.0.0h and 1.0.1 [2012 年 3 月 14 日]。

选择 OpenSSL 版本的标准：这完全取决于您的使用。例如，如果要使用 GCM 进行 TSL，则需要使用 1.0.0。

此更改日志将有助于您确定要使用的版本。

# asp.net - 使用实体框架和 WPF/Silverlight 或 ASP.Net 进行验证

> ID：10824797
> 
> 赞同：1
> 
> 时间：2012-05-30T21:54:21.003
> 
> 标签：asp.net, wpf, entity-framework-4, validation

在使用带有实体框架的 POCO 类的 wpf 应用程序中，对数据执行验证的最佳方法是什么。我知道数据注释，但如果我没有完全错的话，它们更多地用于 ASP.Net MVC 而不是 WPF（我没有找到很多 WPF 示例）。早些时候，我让我的 Domain 类实现 IDataErrorInfo 接口，但我不确定这是否是正确的方法。如果我想在稍后阶段与 Silverlight 应用程序或 ASP.NET 应用程序共享我的 EntityFramework 类，那么我最好的方法是什么，以便我可以重用我的验证规则。（对于 ASP.net，我相信我的 IDataErrorInfo 处理错误的方式将毫无用处？）。我可以找到很多类似的问题，但没有一个特别符合我的需求。如果有人能指出我正确的方向，那就太好了

我一直在我的域模型上使用 T4 模板来生成 POCO 类，并且也一直将这些 POCO 类对象用作业务对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:23:59.417

开箱即用，WPF 验证使用`IDataErrorInfo`和/或`ValidationRule`绑定。 `IDataErrorInfo`作为部分类，它提供了一种方法来绑定附加逻辑以确保值有效（IE：Person.Age 属性在 1-100 之间）并且`ValidationRule`能够在将值应用于绑定（即：Person.Age 属性根本就是一个整数）。 `IDataErrorInfo`显然，仅当 Binding 的值使用兼容的数据类型更新时才有用，`ValidationRule`如果有人在您的 Age 文本框中键入“十”而不是 10 并且数据类型不兼容，则 's 很有帮助。

`IDataErrorInfo`可用于所有 WPF/Silverlight/ASP.NET 项目，（请参阅：[如何在 ASP.NET 中使用 IDataErrorInfo](http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validating-with-the-idataerrorinfo-interface-cs)）

而`ValidationRule`'s 将与 Bindings 一起使用，因此在 ASP.NET 项目中没有用处。它们可以被认为等同于 Javascript 验证。

简而言之，`IDataErrorInfo`这正是您正在寻找的，并且将为这些技术提供最多的重用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T22:36:13.463

EF 验证不支持开箱即用的 IDataErrorInfo。注释不仅用于验证，还可用于定义模型（例如，Required、MaxLenght、StringLength 属性等）。开箱即用您可以使用更多机制来验证您的实体 - 通过从 ValidationAttribute 派生、使用 CustomValidationAttribute 或通过实现 IValidatableObject 来编写您自己的属性。这就是 EF 开箱即用的支持。如果这些都不适合您，则可以通过覆盖 DbContext.ValidateEntity() 方法来替换内置验证，并使用任何适合您的验证机制。几个有用的链接： http: [//blogs.msdn.com/b/adonet/archive/2010/12/15/ef-feature-ctp5-validation.aspx](http://blogs.msdn.com/b/adonet/archive/2010/12/15/ef-feature-ctp5-validation.aspx) http://blogs.msdn.com/b/adonet/存档/2011/05/27/ef-4-1-validation.aspx

# objective-c - Google 的“Google 搜索 2.0”应用程序如何在 iOs 上启动其他应用程序？

> ID：10824800
> 
> 赞同：0
> 
> 时间：2012-05-30T21:54:26.343
> 
> 标签：objective-c, ios, search, launcher

我总是读到只能从 iOs 中的应用程序启动类似 url 的服务，但现在我看到新的“Google Search 2.0”应用程序有一个面板，您可以在其中点击一个图标并打开另一个 Google 的应用。

如果您尚未在 iphone 上安装该应用程序，它会将您重定向到应用程序商店。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:56:03.793

其他 Google 应用程序已注册可以打开它们的 URL 方案。如果提供的 URL 方案与已安装的应用程序不匹配， UIApplication 的`-canOpenURL:`方法将返回 NO，因此在这种情况下，它们将重定向到相关应用程序的 App Store 链接。

# magento - magento 主题安装

> ID：10824802
> 
> 赞同：2
> 
> 时间：2012-05-30T21:54:37.210
> 
> 标签：magento

我有一个相当简单的问题。

我想安装一个新的 magento 主题。在文档中，它说用主题的“app”和“skin”文件夹覆盖默认的“app”和“skin”文件夹。

" *8\. 将模板 themeXX 文件夹中的 "app" 和 "skin" 文件夹上传到您的 Magento 根文件夹（接受替换）* "

**但是，当我这样做时，它会提示我通过 magento 安装向导再次下载 magento。**

对我来说，将新主题的“app”和“skin”文件夹的内容复制到magento框架的默认“app”和“skin”文件夹中听起来更合理，因为它们包含一些其他可能应该的文件夹保持不变。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:59:58.487

您是否首先在要运行它的文件夹中安装了默认 Magento？在继续安装团队之前，您需要运行 Magento 安装。

如果它一直提示您，请检查您浏览器地址栏中的地址是否正确。要安装 magento，您将被重定向到`[magento]/downloader/`

作为最后的手段，您可以打开`index.php`并删除重定向下载器文件夹的代码，但此时您最好重新安装 Magento（删除目录中的所有内容并再次按照安装步骤操作），因为可能出现问题。

安装 Magento 后，请检查您是否看到默认商店界面，并在安装其他任何东西（包括主题）之前访问管理区域！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T03:26:01.283

绝对不需要覆盖应用程序和皮肤文件夹。事实上，如果你这样做，你可以很容易地覆盖 Magento 的所有功能并破坏你的系统。

这就是为什么您会收到新的安装提示。

您正在安装的主题是什么，他们提供该信息的页面的链接是什么？

通常一个主题会被打包成一个如下所示的文件夹结构：

```
theme_package
theme_package/app
theme_package/app/code
theme_package/app/code/local
theme_package/app/code/local/Namespace
theme_package/app/code/local/Namespace/Themename
theme_package/app/code/local/Namespace/Themename/Block
theme_package/app/code/local/Namespace/Themename/etc
theme_package/app/design
theme_package/app/design/frontend
theme_package/app/design/frontend/base
theme_package/app/design/frontend/base/themename
theme_package/app/design/frontend/base/themename/layout
theme_package/app/design/frontend/base/themename/template
theme_package/skin
theme_package/skin/css
theme_package/skin/js 
```

等等。

如您所说，此内容需要合并。

其中许多文件夹已经存在，例如 app/code/、app/design/frontend/base/、skin/css/、skin/js/

只需复制任何新文件或文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T07:25:39.687

@george 我知道这里已经有一段时间没有说过任何话了，但我只是想让人们知道您只需添加到 app/design/frontend/default/[theme name] 和 skin/frontend 以供将来参考/default/[theme name] 文件夹，如 sg3s 所述。今晚我为此浪费了大约 4 个小时 b/ci 购买了一个主题，但他们没有指定您只需要添加到文件夹而不覆盖它们。

# jquery - 使用 serializeArray 和观察者模式列出应用程序

> ID：10824806
> 
> 赞同：0
> 
> 时间：2012-05-30T21:55:16.620
> 
> 标签：jquery, json, observer-pattern, serializearray

我正在尝试创建一个列表应用程序，该应用程序将允许用户将项目输入到将在提交时动态创建的文本字段（列表标记）。然后，我希望能够删除单独添加的任何项目（使用将添加到每个列表标签旁边的删除按钮）。

到目前为止，我在提交输入字段后设法创建了对象数组。

我怎样才能只获取 Array Object 的“值”以便动态创建我的列表标签？我怎样才能删除选定的元素？

我想通过使用观察者模式来完成该应用程序。

请参阅下面的代码：http: [//jsfiddle.net/Lk3p8/](http://jsfiddle.net/Lk3p8/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:12:26.283

我已经创建了您的[jsFiddle](http://jsfiddle.net/Lk3p8/2/)的更新版本，它似乎可以满足您的需求。

...编辑...更新以反映您的要求。我没有注意到您将其保存在值数组中。对于那个很抱歉。我还对您的标记做了一些细微的更改。

```
$(document).ready(function(){

var deleteBtn = "<input class='deleteitem' type='button' value='Delete' name='delete' id='delete' />";
var values = [];
$("#myForm").submit(function(){
    var frm= $("#myForm").serializeObject();

    values.push(frm.item);

    $("#display").append("<li><p>" + frm.item +"</p>"+  deleteBtn +"</li>");
    return false;
});

$("#display").on("click", ".deleteitem", function(event){
    var removeItem = $(this).parent().children('p').text();
     $('.log').after("<p>"+removeItem +  " removed</p>");      
    $(this).parent().remove();

    values = jQuery.grep(values, function(value) {
       return value != removeItem;
    });

    console.log(values);
});

}); 
```

概念标记的证明不是最好的，但你明白了。

# sql - 在 X 秒内查找重复日期时间 - 返回重复时间

> ID：10824810
> 
> 赞同：-1
> 
> 时间：2012-05-30T21:55:31.757
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005, self-join

我正在使用的查询是：

```
SELECT  
 a.What_Tech,  
 a.callid FirstCallid,  
 b.Callid SecondCallid,  
 a.[segStart_dateTime] FirstCallTime,  
 b.[segStart_dateTime] SecondCallTime,  
 DateDiff(second, a.[segStart_dateTime], b.[segStart_dateTime]) as [myDiff]  
FROM CallVolume.AreaGeneratedActivity a
JOIN CallVolume.AreaGeneratedActivity b on  
  a.calling_pty = b.calling_pty  
  and a.[segStart_dateTime] < b.[segStart_dateTime]  
  and dbo.getdateonly(a.segStart_dateTime) = dbo.getdateonly(b.segStart_dateTime)  
WHERE ABS(DateDiff(second, a.[segStart_dateTime], b.[segStart_dateTime])) > 60  
  and ABS(DateDiff(second, a.[segStart_dateTime], b.[segStart_dateTime])) <= 1800 
```

返回的是：

```
|What_Tech|FirstCallid|SecondCallid|FirstCallTime|SecondCallTime|myDiff
| 技术1 | 21134601 | 21136023 | 09:19:41 | 09:20:43 | 62
| 技术1 | 21134601 | 21134507 | 09:19:41 | 09:19:41 | 886
| 技术1 | 21134601 | 21134602 | 09:19:41 | 09:34:27 | 887

```

我想要的是不同的FirstCallids：

```
|What_Tech|FirstCallid|SecondCallid|FirstCallTime|SecondCallTime|myDiff
| 技术1 | 21134601 | 21134676 | 09:19:41 | 09:20:43 | 62
| 技术1 | 21136023 | 21136024 | 09:34:27 | 09:35:27 | 1

```

以下是表中的一些示例数据：

```
INSERT [dbo].[TestData](callid, What_Tech, segStart_dateTime, segStop_dateTime, duration)
SELECT 21134601, N'Tech1', '20120307 09:19:41', '20120307 09:20:35', 54 UNION ALL
SELECT 21134676, N'Tech1', '20120307 09:20:43', '20120307 09:21:30', 47 UNION  ALL
SELECT 21136023, N'Tech1', '20120307 09:34:27', '20120307 09:36:54', 147 UNION ALL
SELECT 21148838, N'Tech1', '20120307 12:00:29', '20120307 12:02:05', 96 UNION ALL
SELECT 21149159, N'Tech1', '20120307 12:04:32', '20120307 12:05:46', 74 UNION ALL
SELECT 21163170, N'Tech1', '20120307 14:50:08', '20120307 14:52:36', 148 
```

请注意，返回的示例数据和我想要的只是示例，而不是直接来自 INSERT 语句中给出的示例数据

* * *

`calling_party`发布的查询（一旦我删除了缺少的连接条件`INSERT`并将函数调用更改为内联计算）在给定提供的示例数据的情况下产生这些结果：

```
What_Tech  FirstCallId  SecondCallId  FirstCallTime        SecondCallTime       myDiff
---------  -----------  ------------  -------------------  -------------------  ------
Tech1      21134601     21134676      2012-03-07 09:19:41  2012-03-07 09:20:43  62
Tech1      21134601     21136023      2012-03-07 09:19:41  2012-03-07 09:34:27  886
Tech1      21134676     21136023      2012-03-07 09:20:43  2012-03-07 09:34:27  824
Tech1      21148838     21149159      2012-03-07 12:00:29  2012-03-07 12:04:32  243 
```

鉴于此，您能否根据您提供的实际样本数据定义您期望的结果，而不是从我们看不到的一组略有不同的数据中显示所需的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T23:09:17.520

[CROSS APPLY](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)将使联接只取第一行，`b7`从而消除您面临的重复问题。**但！**如果您允许calling_pty 的第三次调用表示为对(second_call,third_call)，这只会产生令人满意的结果，即SecondCall 可以是其他行中的FirstCall。如果您想在第二次之后消除所有呼叫，您将需要不同的方法。

[这是 Sql Fiddle DEMO 版本。](http://sqlfiddle.com/#!3/0b921/5)

```
select 
    a.What_Tech,  
    a.callid FirstCallid,  
    b.Callid SecondCallid,  
    a.[segStart_dateTime] FirstCallTime,  
    b.[segStart_dateTime] SecondCallTime,  
    DateDiff(second, a.[segStart_dateTime], b.[segStart_dateTime]) as [myDiff]  
  from testdata a
 cross apply
 (
   select top 1
       CallId,
       [segStart_dateTime]
     from testdata
  -- Filtering by a.calling_pty is missing 
    where testdata.segStart_dateTime > dateadd (second, 60, a.segStart_dateTime)
      and testdata.segStart_dateTime <= dateadd (second, 1800, a.segStart_dateTime)
    order by testdata.segStart_dateTime
) b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T22:11:01.503

例如，您可以选择`GROUP BY`第一个呼叫 ID（以及您要选择的仅与第一个呼叫 ID 关联的所有列），然后选择`MIN(b.callid)`. 但是，您将需要从这个最小的第二个调用 ID 进行子查询或进一步连接，以达到第二个调用 ID 的任何属性，因为从逻辑上讲，第一个调用不会唯一标识第二个调用。

# c++ - 为什么我不能手动提供模板参数？

> ID：10824811
> 
> 赞同：3
> 
> 时间：2012-05-30T21:55:46.187
> 
> 标签：c++, gcc, c++11, variadic-templates

我有一个可变参数模板函数`f`。这编译得很好（使用`g++ -std=c++11`并且可能使用`c++0x`）：

```
#include <tuple>

template<int ...>
struct seq { };

template <typename ...T, int ...S>
void f(std::tuple<T...> arg, seq<S...> s) {
  // ... do stuff
}

int main() {
  f<int>(std::tuple<int>(10), seq<0>());
  return 0;
} 
```

编译器会自动填写`int ...S`有效的。

但是，我似乎无法手动提供整数参数：

```
int main() {
  f<int, 0>(std::tuple<int>(10), seq<0>());
  return 0;
} 
```

**输出：**

> /tmp/t.cpp：在函数“int main()”中：/tmp/t.cpp:12:42：错误：没有
> 匹配函数调用“f(std::tuple, seq<0>)”< br> /tmp/t.cpp:12:42: 注意：候选是：/tmp/t.cpp:7:6: 注意：
> 模板 void f(std::tuple<_TElements ...>,
> seq) /tmp /t.cpp:7:6：注意：模板参数
> 扣除/替换失败：

我相信我已经阅读过，从技术上讲，应该只为模板函数提供一个可变参数模板参数包（在第一种情况下，它完全由上下文决定），所以这就解释了（？）。

对于调试，GCC 中有没有办法输出用于`...S`to`stderr`或的扩展`stdout`？当它们一开始不编译时，它对于调试这样的东西非常有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:46:20.460

我不知道手动指定两个模板参数包的方法。由于模板包可能包含任意多个参数，因此编译器无法知道您的意思是第一个停止和第二个开始的时间。不过，自动或部分自动扣除似乎可行，但我不确定这是否只是 g++ 的一些慷慨......

我不确定您实际上要做什么，但我敢打赌您不需要同时使用两个模板包。您可能会引入一层间接，例如，

```
template <typename ... Tuple_Elements>
void do_something_with_single_value(std::tuple<Tuple_Elements...> arg, int s) {
  // ... do stuff 
}

template <typename Tuple_Type, int ...S>
void f(Tuple_Type arg, seq<S...> s) {
  // ... do stuff which needs all S at the same time
  // ... call do_something_with_single_value in compile time loop to access tuple elements
} 
```

也许您的签名暗示您的功能有太多责任。尝试创建具有明确职责的较小功能。

有一种方法可以输出为 T 和 S 推导出的参数，但前提是编译器可以确定匹配。为此，您需要在编译时引发错误：

```
template <typename ...T, int ...S>
void f(std::tuple<T...> arg, seq<S...> s) {
static_assert(std::tuple_size<std::tuple<T...>>::value < 0, "Provoked error message");
    // ... do stuff
} 
```

这将在您的工作示例中生成以下输出：

```
stack.cpp: In function ‘void f(std::tuple<_Elements ...>, seq<S ...>) [with T = {int}, int ...S = {0}]’:
stack.cpp:15:34:   instantiated from here
stack.cpp:10:2: error: static assertion failed: "Provoked error message" 
```

# c# - 是否可以在 Monotouch 中更改 UITabBarController 上的实际 ViewController

> ID：10824821
> 
> 赞同：1
> 
> 时间：2012-05-30T21:56:27.887
> 
> 标签：c#, xamarin.ios, uitabbarcontroller

我有一个 Monotouch 应用程序，在 AppDelegate 上，RootViewController 是一个 TabBarController，这个 TabBarController 有 5 个 ViewController，让我们说 view1 到 view5，我使用

```
tabBarController.SelectedIndex = 2; 
```

选择应用程序启动时将加载哪个 viewController 并且默认 tabBar 是 view3，现在我需要显示另一个 viewController，让我们说从 view1 更改为带有代码的 view5，这可能吗？有一种方法可以在我的 TabBar 的一个按钮上模拟 clic，这也可以...

更新：

我试过：

```
view1.TabBarController.ViewControllers[4].PresentViewController(view5, true, delegate{}); 
```

它可以工作，但是 view5 显示在 TabBar 上，我也试试这个：

```
view1.TabBarController.TabBar.Items[4]. //I don't know which method could invoke the click 
```

我在哪里选择要单击的标签栏项目

我认为解决方案接近这个，问题是view5总是显示在TabBar上并阻止它......

解决了：

```
view1.TabBarController.SelectedIndex = 2; //where the number is the view zero-based 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:16:36.797

这是你想要的？您可以从任何点击处理程序中调用它。

```
AppDelegate.Current.NavController.PushViewController(new View5(), true); 
```

在我的 AppDelegate 类中，我有：

```
public partial class AppDelegate : UIApplicationDelegate
{
    public static AppDelegate Current { get; private set; }
    public UINavigationController NavController { get; private set; }

    public override bool FinishedLaunching (UIApplication app, NSDictionary options)
    {
        Current = this;
        NavController = new UINavigationController();
        ...
    }
} 
```

还是您只想切换选项卡：[如何以编程方式更改 TabBarViewController 中的视图？](https://stackoverflow.com/q/4729300/353147)

# ruby-on-rails - 回形针不保存照片

> ID：10824823
> 
> 赞同：0
> 
> 时间：2012-05-30T21:56:39.307
> 
> 标签：ruby-on-rails, paperclip

我已经查看了许多类似的问题并尝试了没有成功的解决方案。我正在使用 rails 3 和 paperclip 3。我已经成功安装了 ImageMagick，如回形针 github 上的教程所示。

在我的模型中：

```
has_attached_file :photo, :styles => { :medium => "300x300>", :thumb => "100x100>" }, :default_url => "/profile_photo_store/missing.png"
attr_accessible :photo 
```

在我的数据库中，我添加了这些列：

```
:photo_file_name, :photo_content_type, :photo_file_size, :photo_updated_at 
```

在我的编辑视图中：

```
<%= form_for(@user, :url => user_path, :html => { :multipart => true }) do |f| %>
  <div class="field">
    <b>Add a Photo</b><br />
    <%= f.file_field :photo %>
  </div><br />
<% end %> 
```

在我的节目视图中

```
<%= image_tag @user.photo.url(:medium) %> 
```

我可以说照片正在发送，因为我看到它是通过 Firebug 发送的。然而，missing.png 仍在显示。回形针在哪里保存文件？我究竟做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:30:15.167

无法解决这个答案，所以我切换到carrierwave ......之后我遇到了类似的问题。使用包管理器重新安装 ImageMagick，而不是从解决它的源代码构建。显然，当从源代码构建时，bin 文件保存在 /usr/local/bin 中，而我的 rails 应用程序看不到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-20T00:00:20.027

请检查控制器中的 strong 参数是否接受 :photo。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T22:31:32.583

在 Rails 3.2 中，回形针附件存储在您的公共文件夹 public/system/users/[photo or avatar...]/... 中。您可以检查它们是否通过并被保存。我在您的代码中没有看到任何明显的错误。您可以使用此迁移来确保：

```
class AddAttachmentAvatarToUsers < ActiveRecord::Migration
  def self.up
    add_column :users, :photo_file_name, :string
    add_column :users, :photo_content_type, :string
    add_column :users, :photo_file_size, :integer
    add_column :users, :photo_updated_at, :datetime
  end

  def self.down
    remove_column :users, :photo_file_name
    remove_column :users, :photo_content_type
    remove_column :users, :photo_file_size
    remove_column :users, :photo_updated_at
  end
end 
```

您可以删除默认照片代码，或将其编辑为“/images/...”并在您的公共文件夹中创建一个图像文件夹，因为这是回形针查找文件的位置。似乎回形针仍然以“旧”方式配置（所有资产都在公用文件夹中）：在用户模型中

```
has_attached_file :photo, :styles => { :medium => "200x200>", :thumb => "60x60>" },
                         :default_url => "/images/default_:style_avatar.png" 
```

如果你愿意，你可以尝试只写：

```
<%= form_for(@user) do |f| %>
... 
```

# javascript - 定位 jQuery 下拉菜单，使其完全显示在移动设备的屏幕上

> ID：10824824
> 
> 赞同：3
> 
> 时间：2012-05-30T21:56:44.620
> 
> 标签：javascript, jquery, mobile

我有一个基本的 jQuery 下拉菜单，并且正在移动设备上进行测试，特别是手机。

我遇到的一个问题是右侧的子菜单有时会超出屏幕边缘，因为一个或多个项目中的文本太长。当然，用户可以稍微向右滚动，但这不是一个很好的解决方案。[这里](https://stackoverflow.com/questions/3087122/detect-if-a-web-drop-down-menu-is-going-to-display-off-screen)有一个类似的问题，但我无法得到建议的答案（另外我还在摸索，因为我对 JS/jQuery 还是完全陌生）。

一般的想法似乎是获取当前子菜单的左侧位置+宽度（确保它们首先显示，然后再次隐藏它们或显示它们并在用户点击菜单时移动它们）并查看该值是否大于屏幕宽度。如果是，那么它应该由差值向左移动。但是，我的尝试似乎对元素没有任何作用，并且菜单部分显示在屏幕外。目前，我有这个（在身体加载后运行）：

```
var menus = $('#navbar').find('.subMenu');
menus.show();
menus.each(function(index) {
  var offsetMenu = $(this).offset();
  var diff = screen.width - ($(this).outerWidth + offsetMenu.left);
  if(diff < 0) {
    $(this).offset({top:offsetMenu.top, left:offsetMenu + diff});
  }
  });
menus.hide(); 
```

jQuery版本为1.7.2，HTML结构如下（简化版）：

```
<div id="navbar">
  <ul>
    <li class="dropdown"><a href="#">Link A</a></li>
    <li class="dropdown"><a href="#">Link B</a>
      <ul class="subMenu">
        <li><a href="#">Link 1</a></li>
        <li><a href="#">Link 2</a></li>
      </ul>
    </li>
  </ul>
</div> 
```

我怎样才能让它工作？

编辑：这也是相关的CSS。

```
#navbar ul.subMenu {
    position:absolute;
    display:none;
    background-color:#FFAF1E;
}
#navbar ul.subMenu li {
    clear:both;
}
#navbar a {
    text-decoration:none;
    color:#0C1F6E;
    display:block;
    padding-right:10px;
    padding-left:10px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T05:26:37.107

我终于得到了以下工作：

```
function adjustSubMenus()
  {
      var menus = $('#navbar').find('.subMenu');
      menus.each(function(){
          $(this).css("left","");
          adjustSingleMenu($(this))
          } );
  }
  function adjustSingleMenu(element)
  {
      element.show();
      var thisMenuWidth = element.outerWidth();
      var thisMenuPos = element.offset();
      var diff = (thisMenuWidth + thisMenuPos.left) - window.outerWidth;
      if(diff > 0) {
          element.css("left", function() { return thisMenuPos.left - diff; });
      }
      element.hide();
  }
  $('body').ready(function() {
      $(window).resize(adjustSubMenus());
      if(window.outerWidth <= 720) {
          $('html').mousedown(function() {
              $('#navbar').find('.subMenu').each(function(index) { 
                if($(this).is(":visible") ) {
                    $(this).css("left","");
                    $(this).hide(); 
                    }
              } );
          });

          $('#navbar').mousedown(function(event) {
              event.stopPropagation();
          });

          $('.dropdown').mousedown(function() {
              var ele = $(this).find('.subMenu');
              $('#navbar').find('.subMenu').each(function(index) { 
                if(!$(this).is(ele) && $(this).is(":visible") ) {
                    $(this).css("left","");
                    $(this).hide(); 
                    }
              } );
              if(ele.is(":visible")) {
                  ele.css("left","");
                  ele.hide();
              }
              else {
                  adjustSingleMenu(ele);
                  ele.show();                 
              }
              });
      }
      else
      {
          $('.dropdown').hover(
              function() { $(this).find('.subMenu').stop(true,true).slideDown("fast"); },
              function() { $(this).find('.subMenu').stop(true,true).hide(); } 
          );
      }
  }); 
```

唯一需要注意的是，如果您在更改手机方向时打开了一个菜单，则该菜单可能会出现在屏幕之外。关闭并重新打开菜单将解决此问题。其他一切都完美无缺。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T22:03:59.690

您可以尝试创建*仅*适用于移动设备的 CSS（与 CSS 类名称相关联），然后在检测到窄屏幕或移动设备时，将 CSS 类添加到您的元素中。

Javascript：

```
if (is_mobile)
{
    $(".subMenu").addClass('mobile');
} 
```

CSS：

```
/* CSS */
.mobile { width:100%; left:0 !important; position:absolute; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T22:12:08.677

函数不应该检查子菜单的宽度加上它的左偏移量，然后如果它大于屏幕宽度，那么将左值设置为 0 并将其宽度设置为屏幕宽度？

例如

```
 var menus = $('#navbar').find('.subMenu'),
        screenWidth = $(window).width();
        //screenWidth = screen.width; //I assume this calculates the screens width properly
    menus.show();
    menus.each(function(index) {
      var thisMenu = $(this),
          thisMenuWidth = thisMenu.outerWidth(),
          thisMenuLeft = thisMenu.offset().left;
      if(screenWidth < (thisMenuWidth + thisMenuLeft)) {
        thisMenu
            .width(screenWidth)
            .css({ //could replace this with .addClass("yourClass") and add this styling to that "yourClass" instead
             "left": "0", 
             "position": "absolute"
            });
      }
      });
    menus.hide(); 
```

更新：

我假设 screen.width 是您已经为移动设备设计的一些特殊计算。我现在改变了这条线。以上应该工作。我看到你已经有了一个解决方案，尽管它不能修复菜单的宽度。如果菜单比屏幕宽，上面将固定它的宽度。

# sockets - 通过 Wifi 进行原始套接字通信 - 接收器无法接收数据包

> ID：10824827
> 
> 赞同：2
> 
> 时间：2012-05-30T21:56:57.903
> 
> 标签：sockets, raw-sockets

我正在尝试使用原始套接字将数据包从发送器发送到接收器。当我在我的 Mac 或我的朋友戴尔（两者都安装了 Ubuntu 12.04）上同时部署发射器和接收器时，代码运行良好。我在两个不同的终端窗口中运行发射器和接收器，它工作正常。

但是当我在一台机器上运行发射器并在另一台机器上运行接收器时，接收器没有收到任何数据包。有人可以指出问题吗？我对套接字编程非常陌生，因此请原谅任何愚蠢的错误。

发射器：

/* 使用 sendto 发送数据包的函数 */

```
int SendPacket(int sockaddress,struct packet *mypacket, int packet_len)
{
   int sent= 0;
   if((sent = write(sockaddress, mypacket, packet_len)) != packet_len)
     { return 0; } 
   else
     { return 1; }

} 
```

/* 为监视器接口创建原始套接字并将套接字绑定到接口的函数
*/

```
 int create_raw_socket(char *dev) 
 {  
struct sockaddr_ll sll;
struct ifreq ifr;
int fd, ifi, rb;

bzero(&sll, sizeof(sll)); 
    bzero(&ifr, sizeof(ifr));

fd = socket(PF_PACKET, SOCK_RAW, htons(ETH_P_ALL));

assert(fd != -1);

strncpy((char *)ifr.ifr_name, dev, IFNAMSIZ);
ifi = ioctl(fd, SIOCGIFINDEX, &ifr);
assert(ifi != -1);
sll.sll_protocol = htons(ETH_P_ALL);
sll.sll_family = PF_PACKET;
sll.sll_ifindex = ifr.ifr_ifindex;
    sll.sll_pkttype = PACKET_OTHERHOST;
rb = bind(fd, (struct sockaddr *)&sll,sizeof(sll));
assert(rb != -1);

return fd;  
  } 
```

/* 主功能 */

```
 int main(int argc, char**argv)
  {
   int x,fd,s; 

    int sockaddress,len;
    char dest_packet[PACKET_LENGTH];
    int count= atoi(argv[2]);
    char ch;
   struct packet mypacket;
   struct ieee80211_radiotap_header ratap_header;
   struct ieee80211_hdr_3addr iee802_header;
   unsigned char addr1[ETH_ALEN] = {0xFF,0xFF,0xFF,0xFF,0xFF,0xFF}; 
   unsigned char addr2[ETH_ALEN] = {0x13,0x22,0x33,0x44,0x55,0x66};
   unsigned char addr3[ETH_ALEN] = {0x13,0x22,0x33,0x44,0x55,0x66};

   /* Radio tap header data */
   ratap_header.it_version = 0x00;
   ratap_header.it_pad = 0x00;
   ratap_header.it_len = 0x06;  
   ratap_header.it_pad2 = 0x00; 
   ratap_header.it_present = 0x8000;

   mypacket.rtap_header = ratap_header;

   /* ieee80211 header data */

    iee802_header.frame_ctl = 0x0801;
    iee802_header.duration_id = 0x0000;
    strcpy(iee802_header.addr1,addr1);
    strcpy(iee802_header.addr2,addr2);
    strcpy(iee802_header.addr3,addr3);
    iee802_header.seq_ctl = 0x1086;

    mypacket.iee802_header=iee802_header;

   /* Payload */

   unsigned char payload[PACKET_LENGTH]="test";
   unsigned char stop_injection[5]="stop";
   strcpy(mypacket.payload , payload);

   len = sizeof(mypacket) ;

   /* Sending the packet over the interface */
   printf("\n Press Y to start packet injection \n");
   while((ch = getchar()) != 'Y');

  while((count--) > 0)
   {

     sockaddress = create_raw_socket(argv[1]);
   if(!SendPacket(sockaddress, &mypacket, len))
     perror("Error sending packet");
   else
     {
     printf("Packet sent successfully with payload : %s\n" , mypacket.payload);

     printf("\n size of the packet being send is %d \n " , len);
     }

   }

  /* Packet to indicate the end of reception */

  strcpy(mypacket.payload , stop_injection);
  len = sizeof(mypacket) ;
  int temp=SendPacket(sockaddress , &mypacket , len);

  close(sockaddress);
  printf("\n End of packet transmission ........................ \n");
  return 0; 
 } 
```

接收者 ：

```
int main(int argc, char **argv)
{
 struct sockaddr addr;
 int sock_fd, fromlen,s;
 char buf[PACKET_LENGTH];
 char *dev = argv[1];
 struct packet mypacket;
 struct packet *ptr;
 int recv_count=0;

 sock_fd = create_raw_socket(dev);   /* Creating the raw socket */

 printf("\n Waiting to receive packets ........ \n"); 

 while(1)
  {

  fromlen=sizeof(addr);

  int x= recvfrom(sock_fd,&mypacket,sizeof(struct packet),0,&addr,&fromlen);

  struct sockaddr_ll* temp;
  temp = (struct sockaddr_ll*)(&addr);

  if(temp->sll_pkttype == 4)     
   {
   recv_count++;

   if(strcmp(mypacket.payload , "stop") == 0)
    break; 

   /* Payload received */

   printf("\nPayload  Received from client    :    %s   \n ",  mypacket.payload);

   } 

}
  close(sock_fd);
return 0; 
```

数据结构 ：

```
 struct ieee80211_radiotap_header {
unsigned char it_version;
unsigned char it_pad;
uint16_t it_len;    
    uint16_t it_pad2;   
uint32_t it_present;
 };

/* Structure for 80211 header */

struct ieee80211_hdr_3addr {
    uint16_t frame_ctl;
    uint16_t duration_id;
    unsigned char addr1[ETH_ALEN];
    unsigned char addr2[ETH_ALEN];
    unsigned char addr3[ETH_ALEN];
    uint16_t seq_ctl;
} __attribute__ ((packed));

/* Structure of the packet containing the radiotap header, ieee802.11 header and payload 
 */

 struct packet {
   struct ieee80211_radiotap_header rtap_header;
   struct ieee80211_hdr_3addr iee802_header;
   unsigned char payload[30];

 }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-21T07:07:02.563

```
#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <pthread.h>
#include <sys/socket.h>
#include <sys/ioctl.h>
#include <linux/sockios.h>
#include <net/ethernet.h> /* the L2 protocols */
#include <linux/if.h>
#include <linux/if_arp.h>
#include <arpa/inet.h>

#define NIC_NAME "wlan0"

/*our MAC address*/
static uint8_t gu8a_src_mac[6]  = {0x11, 0x22, 0x33, 0x44 0x55, 0x66};

/*other host MAC address*/
static uint8_t gu8a_dest_mac[6] = {0x77, 0x88, 0x99, 0xAA, 0xBB, 0xCC};

int32_t get_nic_index (uint8_t *pu8_nic_card_name);

void* sock_recv_thread (void *p_arg);

int
main (void)
{
    struct sockaddr_ll  s_dest_addr;
    int32_t             s32_sock        = -1;
    int32_t             s32_res         = -1;
    pthread_t           ul_recv_thd_id  = -1;
    uint16_t            u16_data_off    = 0;
    uint16_t            u16_i           = 0;
    uint8_t             *pu8a_frame     = NULL;
    uint8_t             *pu8a_data      = NULL;

    printf ("Socket raw test\n");

    (void) memset (&s_dest_addr, 0, sizeof (s_dest_addr));

    pu8a_frame = (uint8_t *) calloc (ETH_FRAME_LEN, 1);

    if( NULL == pu8a_frame )
    {
        printf ("Could not get memory for the transmit frame\n");
        goto LABEL_CLEAN_EXIT;
    }

    u16_data_off = (uint16_t) (ETH_FRAME_LEN - ETH_DATA_LEN);

    pu8a_data = pu8a_frame + u16_data_off;

    s32_sock = socket (AF_PACKET, SOCK_RAW, htons (ETH_P_ALL));

    if( -1 == s32_sock )
    {
        perror ("Could not create the socket");
        goto LABEL_CLEAN_EXIT;
    }

    printf ("Socket created\n");

    fflush (stdout);

    (void) pthread_create (&ul_recv_thd_id, NULL, sock_recv_thread, &s32_sock);

    sleep (1);

    s_dest_addr.sll_family      = AF_PACKET;
    /*we don't use a protocol above ethernet layer, just use anything here*/
    s_dest_addr.sll_protocol    = htons(ETH_P_ALL);
    s_dest_addr.sll_ifindex     = get_nic_index ((uint8_t *) NIC_NAME);
    s_dest_addr.sll_hatype      = ARPHRD_ETHER;
    s_dest_addr.sll_pkttype     = PACKET_OTHERHOST; //PACKET_OUTGOING
    s_dest_addr.sll_halen       = ETH_ALEN;
    /*MAC - begin*/
    s_dest_addr.sll_addr[0]     = gu8a_dest_mac[0];
    s_dest_addr.sll_addr[1]     = gu8a_dest_mac[1];
    s_dest_addr.sll_addr[2]     = gu8a_dest_mac[2];
    s_dest_addr.sll_addr[3]     = gu8a_dest_mac[3];
    s_dest_addr.sll_addr[4]     = gu8a_dest_mac[4];
    s_dest_addr.sll_addr[5]     = gu8a_dest_mac[5];
    /*MAC - end*/
    s_dest_addr.sll_addr[6]     = 0x00;/*not used*/
    s_dest_addr.sll_addr[7]     = 0x00;/*not used*/

    /*set the frame header*/
    (void) memcpy (pu8a_frame, gu8a_dest_mac, ETH_ALEN);
    (void) memcpy (pu8a_frame+ETH_ALEN , gu8a_src_mac, ETH_ALEN);

    printf ("******Sending data using raw socket over '" NIC_NAME "'\n");

    while( 1 )
    {
        (void) memset (&pu8a_data[u16_data_off], '\0', ETH_DATA_LEN);

        (void) snprintf ((char *) &pu8a_data[u16_data_off],
                         ETH_DATA_LEN,
                         "Raw packet test, %d",
                         u16_i++);

        s32_res = sendto (s32_sock,
                          pu8a_frame,
                          ETH_FRAME_LEN,
                          0,
                          (struct sockaddr*)&s_dest_addr,
                          sizeof(s_dest_addr));

        if( -1 == s32_res )
        {
            perror ("Socket send failed");
            goto LABEL_CLEAN_EXIT;
        }

        sleep (1);
    }

    /*printf ("Waiting for receive thread to exit\n");
    pthread_join (ul_recv_thd_id, NULL);*/

LABEL_CLEAN_EXIT:
    if( s32_sock > 0 )
    {
        close (s32_sock);
    }

    printf ("***** Raw Socket test- end\n");

    return EXIT_SUCCESS;
}

void*
sock_recv_thread (void *p_arg)
{
    struct sockaddr_ll  s_src_addr;
    int32_t             s32_sock        = * ((int32_t *)p_arg);
    int32_t             s32_res         = -1;
    uint16_t            u16_data_off    = 0;
    uint8_t             *pu8a_frame     = NULL;

    printf ("Socket receive thread\n");

    u16_data_off = (uint16_t) (ETH_FRAME_LEN - ETH_DATA_LEN);

    pu8a_frame = (uint8_t*) calloc (ETH_FRAME_LEN, 1);

    if( NULL == pu8a_frame )
    {
        printf ("Could not get memory for the receive frame\n");
        goto LABEL_CLEAN_EXIT;
    }

    (void) memset (&s_src_addr, 0, sizeof (s_src_addr));

    s_src_addr.sll_family       = AF_PACKET;
    /*we don't use a protocol above ethernet layer, just use anything here*/
    s_src_addr.sll_protocol     = htons(ETH_P_ALL);
    s_src_addr.sll_ifindex      = get_nic_index ((uint8_t *) NIC_NAME);
    s_src_addr.sll_hatype       = ARPHRD_ETHER;
    s_src_addr.sll_pkttype      = PACKET_HOST;//PACKET_OTHERHOST;
    s_src_addr.sll_halen        = ETH_ALEN;

    s32_res = bind (s32_sock,
                    (struct sockaddr *) &s_src_addr,
                    sizeof(s_src_addr));

    if( -1 == s32_res )
    {
        perror ("Could not bind to the socket");
        goto LABEL_CLEAN_EXIT;
    }

    printf ("Socket bind successful\n");

    while( 1 )
    {
        struct sockaddr_ll  s_sender_addr;
        socklen_t           u32_sender_addr_len = sizeof (s_sender_addr);

        (void) memset (&s_sender_addr, 0, sizeof (s_sender_addr));

        s32_res = recvfrom (s32_sock,
                            pu8a_frame,
                            ETH_FRAME_LEN,
                            0,
                            (struct sockaddr *) &s_sender_addr,
                            &u32_sender_addr_len);

        if( -1 == s32_res )
        {
            perror ("Socket receive failed");
            break;
        }
        else if( s32_res < 0 )
        {
            perror ("Socket receive, error ");
        }
        else
        {
            uint16_t u16_i = 0;

            printf ("Received data from ");

            for( u16_i=0; u16_i<sizeof(s_sender_addr.sll_addr)-2; u16_i++ )
            {
                printf ("%02x:", s_sender_addr.sll_addr[u16_i]);
            }

            printf ("\t");

            printf ("Received data %s\n\n", &pu8a_frame[u16_data_off]);
        }

    }

LABEL_CLEAN_EXIT:
    return (NULL);
}

int32_t
get_nic_index (uint8_t *pu8_nic_card_name)
{
    int32_t         s32_sock_fd     = -1;
    int32_t         s32_res         = -1;
    struct  ifreq   s_ifr;

    (void) memset (&s_ifr, 0, sizeof (s_ifr));

    s32_sock_fd = socket (AF_INET, SOCK_DGRAM, 0);

    if( -1 == s32_sock_fd )
    {
        perror ("get_nic_index(): socket failed");
        goto LABEL_CLEAN_EXIT;
    }

    s_ifr.ifr_addr.sa_family = AF_INET;

    strncpy(s_ifr.ifr_name, (char *) pu8_nic_card_name, IFNAMSIZ);

    s32_res = ioctl(s32_sock_fd, SIOCGIFINDEX, &s_ifr);

    if( -1 == s32_res )
    {
        perror ("get_nic_index(): ioctl failed");
    }

    close (s32_sock_fd);

LABEL_CLEAN_EXIT:
    return (s_ifr.ifr_ifru.ifru_ivalue);
} 
```

# javascript - Javascript：多变量声明 - 变量何时可用？

> ID：10824828
> 
> 赞同：2
> 
> 时间：2012-05-30T21:57:16.967
> 
> 标签：javascript, scope, variable-declaration

假设我以以下方式声明变量列表：

```
var a = "value_1"
  , b = "value_2"
  , c = b; 
```

的期望值是`c`多少？换句话说，变量的范围是在逗号之后立即可用，还是直到分号才可用？

这与下面的代码片段相反，其中的值很明显`c`将为`"value_2"`：

```
var a = "value_1";
var b = "value_2";
var c = b; 
```

我想我会问而不是在浏览器中测试，只是假设行为是一致的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T22:00:37.807

请参阅[逗号运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comma_Operator)：

> 逗号运算符计算其两个操作数（从左到右）并返回第二个操作数的值

所以`b = "value_2"`之前被评估过`c = b`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T22:16:44.397

这并不是问题的真正答案，但是当面对同一事物的两种表达方式之间的这种选择时，请始终选择不那么模棱两可的表达方式。

在您的第二个代码片段中，每个人都清楚最终状态是什么。对于第一个，好吧，你必须在这里问一个问题才能知道 :) 如果你在一个月后回到代码，或者如果其他人这样做，那么你将不得不经历相同的查找过程出实际意义。我认为您保存的 6 个字符不值得。

# asp.net-mvc - 如何将 RavenDB 和相关的数据访问放在它自己的项目中？

> ID：10824831
> 
> 赞同：1
> 
> 时间：2012-05-30T21:57:26.133
> 
> 标签：asp.net-mvc, ravendb

我想将 RavenDB 用于基于 ASP.NET MVC3 构建的个人博客项目。

我喜欢在我的解决方案中有多个项目，因此我将有一个 Web 项目和另一个类库作为博客引擎，使用 RavenDB 作为 Web 项目将调用的数据存储。

我应该如何设置 RavenDB，以便可以从类库中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T15:10:33.250

您可能会考虑的一种选择是使用控制反转/依赖注入来创建 DocumentStore 的实例作为单例，并通过构造函数将其注入到您的服务中。我正在使用 Munq，所以我的示例将使用它，但是还有很多其他 IOC 框架需要考虑。

```
// In your Global.asax Application_Start
// MUNQ.  This will give you a RavenDB IDocumentStore as Singleton
var ioc = MunqDependencyResolver.Container;
ioc.Register<IDocumentStore>(c => InitializeRaven()).WithLifetimeManager(new ContainerLifetime());

// Initialize yourself some RavenDB
public static IDocumentStore InitializeRaven()
{
    DocumentStore instance = new DocumentStore { Url = "http://localhost:8080/" };
    instance.Initialize();
    return instance;
} 
```

这将为您提供一个 DocumentStore 实例，以在应用程序的整个生命周期中使用。

这是一个 Stack Overflow 问题，可能会给您一些额外的指导（Autofac）：

[ASP.NET MVC 3、RavenDB 和 Autofac 问题加上 2 其他 Autofac 问题](https://stackoverflow.com/questions/5516601/asp-net-mvc-3-ravendb-autofac-issue-plus-2-other-autofac-questions)

还有一个 MSNBC 使用它的例子（Ninject）：

[http://development.msnbc.msn.com/_news/2011/08/19/7419461-ninjectmvc3-dependency-injection-in-30-seconds-or-less?lite](http://development.msnbc.msn.com/_news/2011/08/19/7419461-ninjectmvc3-dependency-injection-in-30-seconds-or-less?lite)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T06:20:24.700

您是否阅读过一些关于 RavenDB 的[教程/文档？](http://ravendb.net/docs/intro)您创建一个`DocumentStore`允许您连接和查询数据库的方法：

```
public IEnumerable<Company> GetCompanies()
{
    using (var dc = new DocumentStore("localhost", 8080).Initialize())
    using (var session = dc.OpenSession())
    {
        return session
            .Query<Company>("regionIndex")
            .Where("Region:Europe")
            .ToArray();
    }
} 
```

# f# - F# - 将整数乘以浮点数

> ID：10824836
> 
> 赞同：8
> 
> 时间：2012-05-30T21:57:44.043
> 
> 标签：f#, functional-programming

可能是一个愚蠢的问题，但我刚开始使用 F#，我遇到了一个小问题。

假设我有这样的功能：

```
let multiplyByTwo x = x * 2 
```

当我这样称呼它时：

```
let result = multiplyByTwo 5 
```

一切正常，结果是 10。

当我这样称呼它时：

```
let result = multiplyByTwo 2.5 
```

我希望得到 5 或 5.0 作为结果。然而实际结果是这样的：

> 让结果 = multiplyByTwo 2.5;;
> ---------------------------------^^^
> 
> 标准输入（4,28）：错误 FS0001：此表达式应具有类型
> 
> ```
> int 
> ```
> 
> 但这里有类型
> 
> ```
> float 
> ```

因为我希望这个函数有点通用（即接受浮点数和整数），所以我不喜欢这个。我的问题当然是：如何解决这个问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-30T22:06:14.250

当您在 F# 中编写数字文字（例如`2`or `3.14`）时，编译器会将其视为特定类型的值，因此使用数字文字的代码不会是多态的。您可以将输入转换为单一类型并使用该类型（如`float`desco 的答案）或使用 F# 的更高级功能...

`inline`如果您将代码标记为（这样，编译器可以表示附加约束并静态解析它们）并且您只使用多态原语（带有附加静态约束），则可以以多态方式编写某些数字操作。

标准运算符在`inline`函数中是多态的，F# 库提供了一种获取表示 1 和 0（虽然不是 2）的多态值的方法，但这足以编写您想要的函数：

```
let inline twoTimes n = 
  let one = LanguagePrimitives.GenericOne
  n * (one + one)

twoTimes 2
twoTimes 2.0 
```

如果您想让它变得更好，您可以定义一个数字文字（请参阅[Daniel 对早期 StackOverflow 问题的回答](https://stackoverflow.com/questions/4732672/how-to-write-a-function-for-generic-numbers)），然后您实际上可以只写：

```
let inline twoTimes n = n * 2G 
```

特殊的数字文字`2G`被转换为对一个函数的调用，该函数`NumericLiteralG`使用我上面使用的技术对指定数量的通用 1 值求和（因此它对大数字无效！）有关更多信息，您还可以查看我最近的文章在[F# 中编写通用数字代码](http://tomasp.net/blog/fsharp-generic-numeric.aspx)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-30T22:07:21.067

```
let inline mulBy2 x = (float x) * 2.0

let a = mulBy2 3 // 6.0 : float
let b = mulBy2 2.5 // 5.0 : float
let c = mulBy2 "4" // 8.0 : float 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-30T22:35:06.067

如果您不害怕使用“小技巧”，这可能很有用：

```
// Copied from Core.LanguagePrimitives.IntrinsicFunctions.retype
[<NoDynamicInvocation>]
let inline retype (x:'a) : 'b = (# "" x : 'b #)

let inline multiplyByTwo (x:'a) = x * (retype 2:'a)

// use
let result1 = multiplyByTwo 5 // 10
let result2 = multiplyByTwo 2.5 // 5.0 
```

此构造不是类型安全的，因为类型检查是在运行时完成的。此外，报价相对缓慢。

# c# - 在 C# 中接受多种选择的 API 设计？

> ID：10824839
> 
> 赞同：1
> 
> 时间：2012-05-30T21:57:45.227
> 
> 标签：c#

我有一个接口/抽象类，其中实现可以支持任意大小的字典`Name`，`identifier`. 每个实现都将具有不同的格式，`identifier`具体取决于实现。

调用者需要`Name`从提供者那里检索 s 列表，并使用这些列表来询问用户他关心哪个。用户可以选择一个或多个。

我考虑了以下设计，其中调用者获取一个名称数组并通过传入一个整数数组来设置用户的选择，识别用户选择的名称的数组索引。

```
public abstract String[] GetNames();
public abstract void SetNamesToUse(int[] names); 
```

对此不满意，我还考虑了一个传递对象列表的模型：

```
public class NameObject {
    public bool SelectedByUser;
    public String Name;
    private String ProviderSpecificData;
}

...

public abstract List<NameObject> GetNames();
public abstract void SetNamesToUse(List<NameObject> names); 
```

这对呼叫者来说似乎更干净、更容易。

我还有什么其他选择？你是如何解决类似问题的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:10:10.050

那这个呢？

```
interface IIdentifier
{
    string Name {get;}
}

abstract class Identifier<T> : IIdentifier
{
    private readonly string _name;
    private readonly T _id;
    public string Name {get;set;}

    protected Identifier(string name, T id)
    {
        _id = id;
        _name = name;
    }
}

class GuidIdentifier : Identifier<Guid>
{
    public GuidIdentifier(string name, Guid identifier)
        :base(name, identifier)
    {
        //?
    }
}

class UserOptions
{
    private IEnumerable<IIdentifier> _identifiers;

    public IEnumerable<IIdentifier> Identifiers {get {return _identifiers;}}

    public IIdentifier Selected {get;set;}

    public UserOptions(IEnumerable<IIdentifier> identifiers)
    {
        _identifiers = identifiers;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:31:15.223

我喜欢你第二个例子的一致性。它与使用 NameObject 类或 List<> 无关。您也可以使您的第一个示例保持一致：

```
public abstract String[] GetNames();
public abstract void SetNamesToUse(String[] names); 
```

要全选，你现在可以简单地写

```
SetNamesToUse(GetNames()); 
```

根据我的经验，一个用例不足以从众多可能的设计选项中进行选择。但是，如果您为更多用例编写客户端代码，事情就会开始向您扑来。

在我上面的单行示例中，GetNames() 调用看起来模棱两可。是从用户那里获取名称的调用还是获取所有可用名称的调用？更改方法名称可以澄清这一点：

```
SetNamesToUse(GetAllNames()); 
```

Ferenc Mihaly [http://theamiableapi.com](http://theamiableapi.com)

# extjs - 在 ExtJs 中选择复选框时生成带有复选框的对话框

> ID：10824843
> 
> 赞同：1
> 
> 时间：2012-05-30T21:58:02.833
> 
> 标签：extjs

我是 Ext-js 的新手，请参考 sencha.com 获取教程。我正在尝试修改 ext-js 2.2 中的现有应用程序构建。它具有特定的页面以下复选框选项。

```
var assetPermissions = [
    { id: 'MF',  name: 'Mutual Funds' },
    { id: 'ETF', name: 'ETFs' },
    { id: 'CE',  name: 'Closed End Funds' },
    { id: 'ST',  name: 'Stocks' },
    { id: 'VA',  name: 'Variable Annuities' },
    { id: 'FI',  name: 'Bonds' },
            { id: 'SMA', name: 'Separately Managed Accounts'  },
    { id: 'MO',  name: 'Models' },
    { id: 'MM',  name: 'Managed Models' },
    { id: 'UD',  name: 'User Defined' },
    { id: 'I:MD',  name: 'Model Dashboard' },
    { id: 'I:SC',  name: 'Screener' },
    { id: 'CUAS',  name: 'Create Custom Assets & Folders' },
            { id: 'OA', name: 'Other Assets'}
]; 
```

现在我希望当用户在复选框中选择“其他资产”选项时，应该提示另一个复选框，类似这样。

```
Name                         Select
ABC
XYZ 
                Save | Cancel 
```

我还想要该对话框的保存和取消按钮，并保存对其所做的更改。

那么任何人都可以建议如何在 ExtJs 中做到这一点。谢谢。

# windows - msi 的加载程序快照

> ID：10824847
> 
> 赞同：1
> 
> 时间：2012-05-30T21:58:12.530
> 
> 标签：windows, debugging, dll, windows-installer

是否可以为 .msi 包打开“加载程序快照”并记录安装期间加载的 dll？我知道如何为 .exe 执行此操作，但不知道如何为 .msi 执行此操作。

# profiler - 如何连接 SqlDataAdapter 以使用 mvc mini profiler 分析数据库操作

> ID：10824852
> 
> 赞同：4
> 
> 时间：2012-05-30T21:58:32.880
> 
> 标签：profiler, mvc-mini-profiler

我查找了[如何实例化 Profiled DataAdapter 以与 MVC MINI PROFILER 一起使用？](https://stackoverflow.com/questions/6925314/how-could-i-instantiate-a-profiled-dataadapter-to-use-with-mvc-mini-profiler)但这也没有回答我的问题。

我在 SqlDatasource 类中有一些这样的代码 -

```
protected SqlCommand sqlCommand;

public SqlDatasource(String query, String connectionString) : this(connectionString)
    {
        this.sqlCommand.CommandText = query;
    }

public DataTable getResults()
    {
        DataTable table = new DataTable();

        SqlDataAdapter adapter = new SqlDataAdapter(this.sqlCommand);
        SqlCommandBuilder commandBuilder = new SqlCommandBuilder(adapter);
        adapter.Fill(table);
        return table;
    } 
```

我想要一种在调用 getResults() 时挂接到 SqlDataAdapter 的方法。我搜索了很多，但似乎还没有办法让我这样做。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T00:24:17.670

为此提供了一个类`ProfiledDbDataAdapter`，您可以在现有的`SqlDataAdapter`.

当我尝试使用它时，我发现我需要使用该`Fill(DataSet)`方法而不是`Fill(DataTable)`else 我总是收到错误消息“在调用 'Fill' 之前尚未初始化 SelectCommand 属性。” 尽管设置了两个适配器的`SelectCommand`属性。

# windows-phone-7 - 在哪里保留长字符串以绑定到文本块？

> ID：10824853
> 
> 赞同：2
> 
> 时间：2012-05-30T21:58:33.333
> 
> 标签：windows-phone-7, data-binding, textblock

这太愚蠢了，我在任何地方都找不到它！

到目前为止，我使用的 texblock 文本很少，所以我只是将它声明为 text="my_short_text" 中的属性。现在我有几行文本，我觉得放在 xaml 中真的很奇怪。我尝试创建一个新的 text.txt 资源文件并尝试使用 Path 或 Source 绑定到 texblock 但它不起作用！我必须在哪里保留我的资源？

我知道这是一个菜鸟问题，但我对 WP7 和 C# 很陌生！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T00:03:19.163

应用程序资源文件的使用是您想要存储字符串、整数等的地方......

对于 WP7，MSDN 上有一篇文章：[How to: Build a Localized Application for Windows Phone](http://msdn.microsoft.com/en-us/library/ff637520%28v=vs.92%29.aspx)。向下滚动到标题为*用资源文件中的字符串替换硬编码字符串*的部分。

在 MSDN 文章中都有使用资源的示例；即使它用于本地化，您也可以使用相同的概念。

# android - RenderScript 中的最大三角形计数

> ID：10824856
> 
> 赞同：2
> 
> 时间：2012-05-30T21:58:43.607
> 
> 标签：android, renderscript

我编写了一个快速应用程序来感受 RenderScript 的限制，并发现当达到大约 65,000 个三角形时，系统根本不会绘制任何额外的三角形。例如，如果我创建一个包含 70,000 个三角形的圆柱体，则圆柱体中缺少一个楔形，对应于超过 ~65,000 个计数的三角形。三角形是有纹理的，为了便于编写应用程序，我只是使用了一个`TriangleMeshBuilder`类，因此没有进行真正的优化，例如使用 trifans 或 tristrips。硬件是三星 Galaxy Nexus。LogCat 报告的堆大小约为 15MB，其中 3% 可用。我没有收到有关图形系统或 RenderScript 的错误或警告。

谁能解释三角形被丢弃的原因？我是否处于 RenderScript 可以正常处理的硬件限制？

**更新**发生在三星 Galaxy Nexus (4.0.3)、三星 Galaxy Tab 7.0+ (3.2) 和摩托罗拉 Xoom (3.2) 上。全部在大约 65,000 个三角形的同一点上。这些设备中的每一个都有不同的 GPU。

**更新 2**针对史蒂夫布莱克威尔的见解，我有一些额外的想法。

第 710-712 行确实将`int`索引向下转换为`short`，因此正如史蒂夫指出的那样，65536 变为 0。此外，第 757 行的“演员表”与其说是演员表，不如说是告诉 RenderScript 最终将发送给它的二进制数据的格式。RenderScript 要求将所有数据打包到称为 an 的 RenderScript 特定数据类型中，`Allocation`以便从 Java 移动到 RenderScript 运行时，并且需要告知数据结构。根据 Steve 认为这是一个错误的观点，第 757 行通知 RenderScript 将索引数据视为`short`（无符号 16 位），但它向它发送一个 32 位有符号值（由于缺少检查和处理无符号，这将被接受，然后只使用低 16 位，因此为什么我们在低于此阈值和三角形时会绘制一些东西当我们过去时连接回第一个索引）。

子类化`TriangleMeshBuilder`看看我是否可以让它接受这些值作为整数来增加这个限制不起作用，这让我相信在我们无法访问的深层代码的某个地方，有一个对无符号短裤的额外引用。看起来唯一的解决方法是按照史蒂夫的建议添加额外的顶点缓冲区，这很容易用现有的`Mesh.AllocationBuilder`类完成。我还将在 Developer Hangouts 中与 Google 一起提出，以确定这实际上是错误还是故意的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T22:23:13.847

我对 RenderScript 几乎一无所知，所以我不知道这是一些固有的限制、硬件问题还是与 TriangleMeshBuilder 相关的问题，但我敢打赌，在编号 65535 之后，您的三角形已经用完了。

这是一个幻数，因为它是无符号 16 位整数的最大值。（[维基百科](https://en.wikipedia.org/wiki/Integer_%28computer_science%29#Common_integral_data_types)）

我怀疑代码中的某处有一个`unsigned short`包含三角形数量的。它不会出现在 Java 代码中，因为 Java 没有无符号值。并且限制可能不是硬件，因为 CPU 寄存器/路径 >= 32 位。所以我会检查TriangleMeshBuilder。

**编辑：**

这是[第 553 行](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/renderscript/Mesh.java#553)的一个很好的发现。每个索引的值都必须适合`short`. 看起来沮丧正在发生在[第 710-712 行](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/renderscript/Mesh.java#710)。

我假设你在打电话`addTriangle()`。该函数需要三个`int`s，然后显式转换为`short`. 我认为这是一个错误，因为向下转换是无声地发生的，这不是您对函数签名的期望。

在[第 768 行](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/renderscript/Mesh.java#768)，该虚假数据被传递给[`Allocation.copy1DRangeFromUnchecked()`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/renderscript/Allocation.java#549). 我没有一直遵循它，但我想在某些时候，那些有符号的值会被强制转换为无符号：-32768 到 -1 会变回 32768 到 65535。所以把索引变成负数看起来很糟糕，但它只是重新解释相同的数据，这并不是一个真正的问题。

真正的问题从您发送 65536 之类的值开始。当 65536 转换为 a`short`时，它变成 0。这是真正的数据丢失。现在您指的是不同的索引，而强制转换为 unsigned 并不能解决它。

真正的关键是这`copy1DRangeFromUnchecked()`是一个重载函数，其中一个[重载需要一个`int[]`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/renderscript/Allocation.java#535)，所以这些都不是问题。

对于解决方法，我想您可以继承`TriangleMeshBuilder`并覆盖成员变量`mIndexData[]`和方法`addTriangle()`。或者，也许您可​​以使用多个顶点缓冲区。或者在某个地方提交错误报告？无论如何，有趣的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T20:19:06.343

这可能是因为 OpenGL ES 只允许`short`元素索引，而不是`int`. 资料来源：[http](http://duriansoftware.com/joe/An-intro-to-modern-OpenGL.-Chapter-2.1:-Buffers-and-Textures.html) ://duriansoftware.com/joe/An-intro-to-modern-OpenGL.-Chapter-2.1:-Buffers-and-Textures.html （搜索“OpenGL ES”）

# qt - 在 QT 中绘制一个装饰填充的椭圆

> ID：10824858
> 
> 赞同：5
> 
> 时间：2012-05-30T21:58:50.797
> 
> 标签：qt

我想在 QT 中绘制一个实心椭圆，放大和缩小时不会改变它的大小。现在我有以下内容：

```
QPen pen = painter->pen();
pen.setCosmetic(true);
pen.setWidth(5);
painter->setPen(pen);
QBrush brush = painter->brush();
brush.setStyle(Qt::SolidPattern);
painter->setBrush(brush);
painter->drawEllipse(p, 2, 2); 
```

当我缩小边界和填充之间的间隙时。所以它看起来像2个同心圆。当我放大填充物时，边界会变得越来越大。知道如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T22:00:48.697

相反，我会看[`ItemIgnoresTransformations`标志](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html#GraphicsItemFlag-enum)，这将使项目本身“化妆品”，而不仅仅是笔。这是一个工作示例：

```
#include <QtGui>

class NonScalingItem : public QGraphicsItem
{
public:
    NonScalingItem()
    { setFlag(ItemIgnoresTransformations, true); }

    QRectF boundingRect() const
    { return QRectF(-5, -5, 10, 10); }

    void paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget)
    {
        QPen pen = painter->pen();
        pen.setCosmetic(true);
        pen.setWidth(5);
        pen.setColor(QColor(Qt::red));
        painter->setPen(pen);
        QBrush brush = painter->brush();
        brush.setStyle(Qt::SolidPattern);
        painter->setBrush(brush);
        painter->drawEllipse(QPointF(0, 0), 10, 10);
    }
};

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    QGraphicsScene *scene = new QGraphicsScene;
    QGraphicsView *view = new QGraphicsView;
    NonScalingItem *item = new NonScalingItem;

    scene->addItem(item);
    view->setScene(scene);

    /* The item will remain unchanged regardless of whether
       or not you comment out the following line: */
     view->scale(2000, 2000);

    view->show();
    return app.exec();
} 
```

# php - IIS 上的 PHP - 执行返回 1

> ID：10824859
> 
> 赞同：3
> 
> 时间：2012-05-30T21:59:06.883
> 
> 标签：php, iis, windows-server-2008, exec

我在 Windows Server 2008 机器上安装了 ImageMagick、IIS 6、Ghostscript 和 PHP 5.3.1，并试图将 PDF 文件转换为 JPG 缩略图。

但是，它似乎不起作用——调用`exec()`产生的返回码为 1（据我了解，这意味着发生了一些一般性错误）。输出变量只是一个空数组。`$output`只是一个空数组。如果我使用`system()`而不是`exec()`

从命令行运行命令似乎可以工作，所以我最初的猜测是一个简单的权限问题......该目录是 PHP 可写的，因为将 PDF 上传到目录的脚本有效，并且我已经验证每个人都有权限也写入目录。

此外，安全模式已关闭。

关于问题可能是什么的任何想法？

相关代码：

```
<?php
    $output = array();
    $ret = 0;
    echo exec('convert D:\content\myfile.pdf[0] D:\content\myfile_thumb_1.jpg', $output, $ret);
    var_dump($ret);
?> 
```

*注意：虽然我会在 Mac OS X 上的 Apache 上对此进行测试，但我似乎无法正确安装 ImageMagick 或 Ghostscript。*

我还确保了以下几点：

*   文件名的正确大小写（无论如何都是小写）
*   除了简单的 convert.exe 之外，还使用 ​​convert.exe 的完整路径

更新：

检查任务管理器后，convert.exe 正在运行并占用 CPU 时间，提示我这是某种文件权限……我现在要检查一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:17:52.207

事实证明，IIS 中的某些内容存在权限问题——该网站在与 CMD 的命令不同的用户下运行，这显然导致它无法在 IIS 下运行，因为它的权限比 CMD 的权限小。

# windows - 通过添加/删除卸载不会删除它应该删除的文件、注册表项或服务

> ID：10824860
> 
> 赞同：2
> 
> 时间：2012-05-30T21:59:08.480
> 
> 标签：windows, cmd, uninstallation, windows-installer

所以我一直试图了解 Windows Installer 是如何工作的，试图解决这个问题。就目前而言，我去添加/删除程序并删除软件。
我猜这会调用`msiexec.exe /x {product id}`并删除该软件。问题是它真正删除的唯一东西是桌面图标和几个文件，我认为是一个注册表项。

从那以后，我一直试图了解`msiexec.exe /x`它被调用时的确切作用。我认为它会遍历文件`InstallExecuteSequence`中的表格`.msi`并运行所有操作？我真的不是百分百确定。我看到，查看`.msi`文件内部，有一个`RemoveFile`和`RemoveRegistry`表，还有一个 DeleteService 操作，但我只是不明白它们是如何组合在一起的，以及为什么在我安装软件时它没有删除它放入的所有内容。

此处的最终目标是卸载服务、删除注册表项并删除在程序文件中创建的根文件夹。任何人都可以提供任何见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:05:35.463

删除文件等用于升级到新版本。即旧版本有一个old.dat文件，新版本有new.dat，所以你告诉msi删除old.dat，进行整理。

您是否测试过在干净的机器上会发生什么，因为如果我遇到这种行为，我立即怀疑注册表/安装程序数据库会被搞砸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T22:06:31.967

因为您的最终目标是卸载服务/软件，您可以使用以下命令（从“cmd”-shell 运行它）：

```
 wmic product where name="product name" call uninstall 
```

要查看 wmic 命令的更多示例/文档：[转到此处](http://www.tech-recipes.com/rx/2947/windows_uninstall_application_command_line/)

# android - Android：使用 onTouchListener() 在循环中执行线程

> ID：10824867
> 
> 赞同：-1
> 
> 时间：2012-05-30T21:59:53.747
> 
> 标签：android, ontouchlistener

嗨，在我的应用程序中有 8 个按钮。每个按钮在单击时配置 onclickListener() 字符串被写入套接字。现在我希望当我按住按钮时，字符串必须循环写入。这是我想要做的。

```
bLeft.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View arg0, MotionEvent event) {
            // TODO Auto-generated method stub
            MyThread start = new MyThread();
             boolean isReleased = event.getAction() == MotionEvent.ACTION_UP || event.getAction() == MotionEvent.ACTION_CANCEL;
             boolean isPressed = event.getAction() == MotionEvent.ACTION_DOWN;

        while (isPressed) {

                start.execute(ip, "left");

                break;
        }
            return false;
        }
    }); 
```

不知何故，我不知道为什么它不起作用。start,execute(string, string) 执行 AsyncTask 类中的线程以创建套接字和输出流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-19T03:24:11.593

asyncronos 任务只能执行一次……您正试图在 while 循环中使用它……这意味着您正在尝试重复使用它……您需要为 while 循环的每次迭代重新初始化 start。 ..

```
 while (ispressed){
      start = new YourAsyncTask();
      start.execute(params);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:33:45.267

```
bLeft.setOnTouchListener(new View.OnTouchListener() {

    @Override
    public boolean onTouch(View arg0, MotionEvent event) {
        // TODO Auto-generated method stub
        MyThread start = new MyThread();
         boolean isReleased = event.getAction() == MotionEvent.ACTION_UP || event.getAction() == MotionEvent.ACTION_CANCEL;
         boolean isPressed = event.getAction() == MotionEvent.ACTION_DOWN;

    while (isPressed) {

            start.execute(ip, "left");

            break;
    }
        return false;
    }
}); 
```

首先， isReleased 不会被使用，所以去掉那个变量会使事情变得更复杂。

秒的事情确保它在 while 循环中结束，例如：

`Log.d("debugText", "I am in the while")'

并记录新闻状态。这将使调试时更清楚。

还可以查看以下有关[无痛线程](http://developer.android.com/resources/articles/painless-threading.html)的 Android 文档。确保您使用的是正确的东西。

调试后，您可能会明白为什么它没有执行。如果不是，则需要更多信息。

# svn - 多个项目的SVN结帐

> ID：10824870
> 
> 赞同：3
> 
> 时间：2012-05-30T22:00:16.260
> 
> 标签：svn

假设我有一个相当大的存储库，其中包含许多项目。我实际上参与了大多数项目。我应该在本地拥有“一个大的工作副本”，利用稀疏目录功能来获得我需要的东西，还是每个项目都有自己的工作副本。优缺点都有什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T22:08:15.700

我想说影响采取哪种方法的两个最大因素是：

*   所有项目是否共享大量库代码？
*   您是否在所有项目的同一分支上工作？

如果所有单独的项目共享大量库代码并且被认为是同一个软件套件的一部分，那么拥有一个工作副本是有意义的，因为它可以最大限度地减少重新构建的数量并确保在一个项目中所做的更改在另一个（最大限度地减少破坏构建的机会）。

另一方面，如果这些项目中的每一个都针对不同的客户，并且每个项目都有不同的时间尺度并且需要在不同的分支上完成（项目 A 处于 RC 阶段并且只需要修复显示停止的错误修复，项目 B处于 alpha 阶段并且可以进行大量修改）然后采用单独的稀疏工作副本方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T22:12:47.120

我有同样的情况。我在一个结构中检查了所有项目，而不是使用稀疏目录。然后，只需选择所需的文件夹并提交/更新，就可以很容易地一次更新所有项目，或者一次只更新一个项目/文件夹。这样您就可以在需要时获得 spase 目录的好处，或者完整的更新/提交，而不是一一进行。我的收藏大约 5GB，60k 个文件，无论是每个项目级别还是完整的，它仍然非常快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T22:04:59.880

每个项目一个，以便每次提交（和回滚）都特定于该项目。如果您打算使用 capistrano 或任何其他部署工具，这也很重要。您还限制每个项目的访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T22:21:38.090

正如@the_mandrill 所说，这取决于您的项目是否是一个连贯整体的一部分，例如，组合在单个 Java EE Web 应用程序中的 jar 文件。

在类似情况下，我使用一个包含整体构建配置的伞式项目，并通过`svn::externals`. 在 Java 世界中，这与基于 Maven 的构建实践非常吻合，尽管存在一些缺点。

我计划在 Visual Studio 项目和解决方案中尝试类似的方法，但到目前为止我只进行了简单的实验。

# android - Android 以编程方式描边

> ID：10824871
> 
> 赞同：1
> 
> 时间：2012-05-30T22:00:22.047
> 
> 标签：android, android-canvas, textview

我想在 Android 中的文本上画一个黑色的笔触。

我看过这个例子： [How do you draw text with aborder on a MapView in Android?](https://stackoverflow.com/questions/1723846/how-do-you-draw-text-with-a-border-on-a-mapview-in-android)

解决方案覆盖 onDraw() 以创建笔划的位置。

问题是，我还是相对刚开始使用 Android，我不知道如何过渡到使用该解决方案。

在我的 onCreate 中，我设置了文本字体（它是自定义的）：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeatures();

    // Set content view and component listeners
    setContentView(R.layout.meme_maker);
    setListeners();

    context = this;

    Typeface tf = Typeface.createFromAsset(getAssets(), "fonts/Impact.ttf");
    TextView mmt = (TextView) findViewById(R.id.meme_maker_title);
    TextView ttc = (TextView) findViewById(R.id.top_text_canvas);
    TextView tbc = (TextView) findViewById(R.id.bottom_text_canvas);

    ttc.setTypeface(tf);
    tbc.setTypeface(tf);
    mmt.setTypeface(tf);
} 
```

我有一个 onClickListener，我在其中更改 TextView 的文本内容，基于用户在 TextEntry 中编写他/她想要的文本并随后单击按钮。

```
ImageView ii = (ImageView) findViewById(R.id.insert_image);
    ii.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            EditText tt = (EditText) findViewById(R.id.top_text_text);
            EditText bt = (EditText) findViewById(R.id.bottom_text_text);

            TextView ttc = (TextView) findViewById(R.id.top_text_canvas);
            TextView btc = (TextView) findViewById(R.id.bottom_text_canvas);

            ttc.setText(tt.getText().toString().toUpperCase());
            btc.setText(bt.getText().toString().toUpperCase());
        }
    }); 
```

到目前为止，这很简单。我的问题是：如何插入文字的笔画？在哪里？我需要创建 Canvas 和 Paint 对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T23:15:52.303

为 TextView 中呈现的文本获取阴影的最简单方法是设置[此答案](https://stackoverflow.com/questions/2486936/android-shadow-on-text/2487340#2487340)中描述的样式。这需要很少的工作，听起来它在你的情况下可以正常工作。

使用您链接到的技术涉及扩展现有的 View 类，覆盖 onDraw()，并在传递给 onDraw() 的画布上使用 Canvas.drawText() 来自己呈现文本。在某些情况下，这可能正是您所需要的，但对于您当前的情况来说，这听起来有点矫枉过正。如果您想进一步研究它，可以阅读[有关该主题的 Android 开发指南](http://developer.android.com/guide/topics/ui/custom-components.html)。

# jquery - DIV 内的动画内容

> ID：10824872
> 
> 赞同：4
> 
> 时间：2012-05-30T22:00:27.580
> 
> 标签：jquery, animation

好吧，这有点难以解释，因此有点难以搜索，所以如果之前有人问过，请原谅我。我会在我的解释彻底。

我有一个带有不同数量图标的网页。当用户点击一个图标时，它应该在一个`DIV`. 这就是棘手的地方。无论用户单击哪个图标，内容都应加载到相同的`DIV`. 但是，一次只能看到一个图标的内容。因此，如果加载了“A”的内容，并且用户单击“B”，则“A”的内容应该淡出并替换为淡入的内容“B”，与“C”、“D”相同， " 等（可能最多约 5 个）。内容的大小可以变化很大，因此`DIV`内容的包含需要对其高度进行动画处理以适应当前内容。

我卡住的地方是动画。我已经弄清楚了如何隐藏和显示不同的内容，基本上是通过设置`display: none;`“和`display: block;`基于用户点击位置的不同内容部分，但我不知道如何让任何类型的动画进行。

我愿意使用预制脚本，但请记住，图标和内容区域位于不同的包装器中，因此普通的 jQuery 选项卡脚本或手风琴脚本无法正常工作。

到目前为止，这是我的脚本：

```
$(document).ready(function() {  
    $(".heading").click(function(event) {       
        // remove active class from previous, add to current
        $(".hidden.active").removeClass("active");
        $(".hidden." + activeContent).addClass("active");       
    }); 
}); 
```

`.hidden`和的 CSS `.active`：

```
.hidden {
    display: none;
}
.hidden.active{
    display: block !important;
} 
```

如有必要，可以修改任何内容，但不能因为它们位于单独的包装器中。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T22:18:17.013

看看这个[jsFiddle](http://jsfiddle.net/BsrJy/1/)；这是你想要做的事情吗？

**HTML**

```
<div id="content">
    <div id="content-1" class="content-container">...</div>
    <div id="content-2" class="content-container">...</div>
    <div id="content-3" class="content-container">...</div>
</dvi>

<div id="buttons">
    <a href="#" data-target="content-1">Content 1</a>
    <a href="#" data-target="content-2">Content 2</a>
    <a href="#" data-target="content-3">Content 3</a>
</div>​ 
```

**JavaScript**

```
// Hide all but First Content Container //
$('.content-container').hide().first().show();

// Bind to Button click Event //
$('#buttons a').bind('click', function(e){
    e.preventDefault();

    // Set New Target from Button data-target Attribute //
    var $target = $('#'+$(this).data('target'));

    // Fade Out :visible Content and Fade In Target Content //
    $('.content-container').filter(':visible').fadeOut('slow', function(){
        $target.fadeIn('fast');
    });
}); 
```

你也可以分别用[slideUp()](http://api.jquery.com/slideUp/)和slideDown()替换[fadeOut()](http://api.jquery.com/fadeOut/)和[fadeIn(](http://api.jquery.com/fadeOut/) [)](http://api.jquery.com/slideDown/)来实现不同的动画效果。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T22:08:09.453

add `overflow:hidden`，否则`div`将在您有机会制作动画之前捕捉以适应新内容的宽度/高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T22:21:41.227

给你：http: [//jsfiddle.net/huckepick/XtuX2/](http://jsfiddle.net/huckepick/XtuX2/)

它还不是很花哨。但它很简单，易于理解且易于扩展。

更新：[添加了对动画大小更改的支持](http://jsfiddle.net/huckepick/XtuX2/2/)

```
$('#menu button').click(function() {
  var identifier = $(this).attr("data-content-reference");
  var newContent = $("#content-" + identifier).html();
  $('#display').fadeOut('slow', function() {
    $("#display").html(newContent);
    $('#display').animate({
      opacity: 1,
      height: 'toggle'
    }, 300, function() {
      // Animation complete.
    });
  });
});
```

```
.hidden-content {
  display: none;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="menu">
  <button data-content-reference="a">A</button>
  <button data-content-reference="b">B</button>
  <button data-content-reference="c">C</button>
  <button data-content-reference="d">D</button>
  <button data-content-reference="e">E</button>
  <button data-content-reference="f">F</button>
</div>
<div id="display">
  content goes here!
</div>

<div class="hidden-content" id="content-a">some content from A</div>
<div class="hidden-content" id="content-b">some content from B
  <br/>new line</div>
<div class="hidden-content" id="content-c">some content from C
  <br/>new line
  <br/>new line</div>
<div class="hidden-content" id="content-d">some content from D
  <br/>new line
  <br/>new line
  <br/>another one</div>
<div class="hidden-content" id="content-e">some content from E</div>
<div class="hidden-content" id="content-f">some content from F</div>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T22:29:32.377

抱歉，如果我误解了（如上面提到的[adeneo](http://jsfiddle.net/)的 jsfiddle 会非常有帮助），但您似乎只需要[`fadeOut()`](http://api.jquery.com/fadeOut/)调用 to[`fadeIn()`](http://api.jquery.com/fadeOut/)作为回调，如下所示：

```
// try it out on http://jsfiddle.net/XyUps/1/

$(document).ready(function() {
    $("button").click(function() {
        $(".active").fadeOut(1000, function() {
            $(this).siblings("div").addClass("active").fadeIn();
            $(this).removeClass("active");
        });
    });
}); 
```

在这里，第二个参数`fadeOut()`是回调，一个在动画完成时运行的函数：这​​是在 jQuery 中使动画连续的好方法（只需将它们放在后续行上就会同时运行它们，这可能不是你想要的）。

一旦掌握了基本原理，您就可以使用该[`animate()`](http://api.jquery.com/animate/)函数以相同的方式为更多/不同的属性设置动画（`fadeOut`是`animate({display: 'none'})` *等*的简写）。

# c# - Visual Studio 2010 - 选择影响批量构建输出的解决方案配置

> ID：10824875
> 
> 赞同：2
> 
> 时间：2012-05-30T22:00:38.147
> 
> 标签：c#, visual-studio-2010, visual-studio

# 概括

我在使用 Visual Studio 2010 时遇到了一个非常奇怪的行为，我不确定这是否是一个错误，或者是否存在一些扭曲的逻辑来解释为什么它会以这种方式运行。

执行摘要是，当我使用 Batch Build->Select All->Rebuild 为我的所有项目构建所有配置时，VS2010 根据当前选择的解决方案配置生成不同的输出二进制文件。这真的很烦人，因为某些项目输出无法正确运行（在启动时给出“[项目名称]已停止工作”错误对话框），**具体取决于在批量构建期间选择了哪个解决方案配置**。

# 更多细节

我有一个包含 3 个 C# 项目的解决方案（1 个 .dll 输出项目，由其他 2 个 .exe 输出项目引用）。在 .exe 输出项目中，**项目 A**具有`Release`和`Debug`项目配置。**项目 B**具有`Debug`、`Release-x86`和`Release-x64`配置，因为它需要运行一些不同的构建后脚本才能为其提供正确的版本 3rd 方库。

我有 4 个解决方案配置：`Debug`、`Release`、`Release-x86`和`Release-x64`. `Release-x86`并`-x64`设置为仅构建项目 B。`Release`并`Debug`构建项目 A 和共享 dll 项目。

如果我`Debug`从当前配置下拉框中选择解决方案配置，并且全部批量构建，那么当我尝试运行项目 A 的发布配置时，它无法运行。如果我从下拉列表中选择任何其他解决方案配置，然后全部批量构建，则它会成功运行。当我比较生成的 .exe 文件时，我可以看到这两种情况有所不同。

# 问题

这是 VS2010 的一些已知预期行为吗？如果是这样，有人可以提示为什么会出现这个问题以及如何解决它？这是VS2010中的错误吗？

# 后续线索？[编辑]

这可能与VS2010如何处理“项目引用”有关吗？正如我所提到的，两个 .exe 项目都引用了 dll 项目，称之为**Project D**。我通过选择添加引用 -> 项目 -> 项目 D 添加了该引用（例如，对项目 A）。但当然，项目 A 的不同配置想要使用项目 D 的不同配置版本。当我检查项目 A ->属性下的项目 D 引用，我看到一个不可编辑的路径字段。根据选择的解决方案配置，我看到`...\Project D\bin\Release\Project D.dll`或```...\Project D\bin\Debug\Project D.dll`，而且我看不出有任何方法可以控制这一点，所以我猜 VS2010 正试图聪明地选择项目配置的细节。但更奇怪的是，如果我选择 Batch Build -> Select All -> Clean 来删除所有已编译的文件，那么这些引用路径将更改为`...\obj\...`而不是`...\bin\...`在我检查它们时，并且我似乎无法将它们改回来，除非删除和重新添加项目引用。

# 后续 2 [Edit2]

我之前撒了一点谎，我实际上有 2 个 .dll 项目（比如项目 D 和 E），其中 D 通过项目引用引用 E。

我很确定 VS2010 中的项目引用有问题或奇怪的东西是罪魁祸首，我认为我已经找到了选择解决方案配置相关行为的根本原因，步骤如下

1) I Batch Build -> Select All -> Clean，删除所有以前编译的二进制文件。

2) 我从下拉列表中选择一个调试解决方案配置。

3）我批量构建->仅选择项目A发布->重建。

通过查看输出窗口，我看到 VS2010 知道项目 A 依赖于 D，而 D 依赖于 E，因此它会尝试以相反的顺序构建它们。它成功构建了项目 E 的 Release 配置。但是它尝试构建项目 D 的 Release 配置但失败，因为它抱怨缺少 E dll 文件的缺失**调试**版本。同样，由于缺少 D 的 Debug 版本，A 无法构建。

因此，选择解决方案配置似乎覆盖了项目到项目引用中引用项目的配置。

应该是这样吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:19:29.243

经过进一步搜索，我发现这是 VS2010 中的一个已知错误，被微软标记为“Wont Fix”。VS2010 中的 Batch Build 简直坏掉了。如果您认为这和我一样愚蠢，请继续向他们表达自己。

[https://connect.microsoft.com/VisualStudio/feedback/details/556158/batch-build-links-to-wrong-referenced-projects](https://connect.microsoft.com/VisualStudio/feedback/details/556158/batch-build-links-to-wrong-referenced-projects)

# scala - 如何在 Ubuntu 11.10 的类路径中使用 ScalaCheck 启动 Scala 解释器？

> ID：10824878
> 
> 赞同：1
> 
> 时间：2012-05-30T22:00:55.267
> 
> 标签：scala, scalacheck

Scala 已安装并且工作正常。
scalacheck.jar 放在 /bin 中。
我使用了以下命令

```
$ scala -cp scalacheck.jar 
```

之后，当我尝试以下命令时，

```
scala> import org.scalacheck.Prop.forAll 
```

我收到以下错误。

```
<console>:7: error: object scalacheck is not a member of package org
   import org.scalacheck.Properties
              ^ 
```

我在使用 scalacheck 时可能犯了一些错误，请纠正我并给出正确的命令，以便我能够在解释器模式下在 Ubuntu 中使用 scalacheck。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T22:09:53.727

将可执行文件放在路径上与 jar 放在类路径上不同，所以你的 jar 放在里面`/bin`并没有改变任何东西。

只需使用：

```
scala -cp path_to_your.jar 
```

你应该没事。

例如，如果您`scalachek.jar`在其中，`/bin`则使用：

```
scala -cp /bin/scalacheck.jar 
```

**编辑：**

把罐子放进去`/bin`可能不是最好的主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:17:31.687

你可以像这样使用它：

```
kjozsa@walrus:~$ scala -version
Scala code runner version 2.9.2 -- Copyright 2002-2011, LAMP/EPFL
kjozsa@walrus:~$ locate scalacheck.jar
/usr/share/scala/lib/scalacheck.jar
kjozsa@walrus:~$ scala -cp /usr/share/scala/lib/scalacheck.jar
Welcome to Scala version 2.9.2 (OpenJDK 64-Bit Server VM, Java 1.7.0_03-icedtea).
Type in expressions to have them evaluated.
Type :help for more information.

scala> import org.scalacheck.Prop.forAll
import org.scalacheck.Prop.forAll

scala> 
```

# linux - 如何在 Linux 中向应用程序发出信号而不杀死它？

> ID：10824886
> 
> 赞同：39
> 
> 时间：2012-05-30T22:01:50.100
> 
> 标签：linux, signals

我有一个看门狗应用程序。它监视我的主应用程序，该应用程序可能由于某种原因而崩溃（我知道这很糟糕，但这不是重点）。

我将此看门狗编程为接受 SIGUSR1 信号以停止监视我的应用程序的存在。我用

```
kill -SIGUSR1 `pidof myapp` 
```

这真的很好用。当我尝试向没有内置此功能的旧版本看门狗发出信号时，我的问题就出现了。在这种情况下，kill 信号会杀死看门狗（终止进程），这会导致进一步的并发症（重新启动设备） .

有没有办法用 SIGUSR1 向我的看门狗发出信号，以便在这个特定信号未处理时它不会终止？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-30T22:48:50.687

来自关于信号处理的[GNU 文档：](http://ftp.gnu.org/old-gnu/Manuals/glibc-2.2.3/html_chapter/libc_24.html#SEC477)

> SIGUSR1 和 SIGUSR2 信号被放在一边，供您以任何方式使用。如果您在接收信号的程序中为它们编写信号处理程序，它们对于简单的进程间通信很有用。在 Signaling Another Process 部分中有一个示例显示了 SIGUSR1 和 SIGUSR2 的使用。 **默认操作是终止进程**。

SIGINFO 的默认操作是什么都不做，所以它可能更合适：

> SIGINFO：信息请求。在 4.4 BSD 和 GNU 系统中，当用户在规范模式下键入 STATUS 字符时，该信号被发送到控制终端的前台进程组中的所有进程；请参阅导致信号的字符部分。如果进程是进程组的leader，默认的动作是打印一些关于系统的状态信息以及进程在做什么。**否则默认是什么都不做**。

[SIGHUP](http://en.wikipedia.org/wiki/SIGHUP)在控制终端关闭时发出，但由于大多数守护程序未连接到终端，因此将其用作“重新加载”并不少见：

> 守护程序有时使用 SIGHUP 作为重启自身的信号，最常见的原因是重新读取已更改的配置文件。

顺便说一句，您的看门狗可以不时读取配置文件，以了解它是否应该重新启动该过程。

我个人最喜欢看门狗是[supervisor](http://supervisord.org/index.html)。

```
$ supervisorctl start someapp
someapp: started

$ supervisorctl status someapp
someapp                RUNNING    pid 16583, uptime 19:16:26

$ supervisorctl stop someapp
someapp: stopped 
```

查看是否`kill -l`返回您平台上的信号列表并尝试其中一些，但 SIGUSR1 似乎是一个糟糕的选择。

```
$ kill -l
 1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL       5) SIGTRAP
 6) SIGABRT      7) SIGBUS       8) SIGFPE       9) SIGKILL     10) SIGUSR1
11) SIGSEGV     12) SIGUSR2     13) SIGPIPE     14) SIGALRM     15) SIGTERM
16) SIGSTKFLT   17) SIGCHLD     18) SIGCONT     19) SIGSTOP     20) SIGTSTP
21) SIGTTIN     22) SIGTTOU     23) SIGURG      24) SIGXCPU     25) SIGXFSZ
26) SIGVTALRM   27) SIGPROF     28) SIGWINCH    29) SIGIO       30) SIGPWR
31) SIGSYS      34) SIGRTMIN    35) SIGRTMIN+1  36) SIGRTMIN+2  37) SIGRTMIN+3
38) SIGRTMIN+4  39) SIGRTMIN+5  40) SIGRTMIN+6  41) SIGRTMIN+7  42) SIGRTMIN+8
43) SIGRTMIN+9  44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12 47) SIGRTMIN+13
48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14 51) SIGRTMAX-13 52) SIGRTMAX-12
53) SIGRTMAX-11 54) SIGRTMAX-10 55) SIGRTMAX-9  56) SIGRTMAX-8  57) SIGRTMAX-7
58) SIGRTMAX-6  59) SIGRTMAX-5  60) SIGRTMAX-4  61) SIGRTMAX-3  62) SIGRTMAX-2
63) SIGRTMAX-1  64) SIGRTMAX 
```

[更新]

Carpetsmoker 评论 Linux 和 BSD 之间的行为差​​异：

> SIGINFO 似乎在 GNU libc 和 BSD 上工作不同；在 BSD 上，它按照您的描述工作，但在 Linux 上，它要么不存在，要么与 SIGPWR 相同......在这方面 GNU libc 手册似乎不正确（您的 kill -l 输出也没有显示 SIGINFO )...我不知道为什么 GNU 不支持它，因为我发现它非常有用... – Carpetsmoker

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T22:48:18.533

接收到 SIGUSR1 时的默认操作是在处理程序不存在时终止。这意味着你不能再用那个信号做你想做的事了。

如果不更新看门狗，您将无能为力（我假设您无法在发送信号之前从程序中区分看门狗版本）。

# xcode4 - Xcode 无法使用所选设备运行：xCode 4.2.1

> ID：10824896
> 
> 赞同：1
> 
> 时间：2012-05-30T22:02:53.810
> 
> 标签：xcode4

我正在使用模拟器进行测试并收到此错误消息。如何选择合适的（模拟器）设备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:15:35.893

在 Xcode 窗口的左上角，您有一个包含所有目标的组合框。选择 iOS 一个，然后选择适当的模拟器。您应该检查您的 iOS 目标的“部署目标”是否等于或低于模拟器版本。

您可以在项目导航器（左侧面板）中单击您的项目来管理您的目标。选择目标后，“部署目标”位于“摘要”和“构建选项”选项卡下。

希望能帮助到你。

# ruby-on-rails - 耙路线未显示路线，但硬编码时存在

> ID：10824898
> 
> 赞同：4
> 
> 时间：2012-05-30T22:02:57.280
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, routes, omniauth

我在登录过程中使用 Devise 和 Omniauth。出于某种原因，我可以很好地访问“users/auth/facebook”或“users/auth/twitter”路线。但是当我执行 rake 路由时它们不会出现，所以我不知道获取这些路径的辅助方法是什么（例如 something_something_path）。有人可以帮我吗？

我不能显示我的所有路由，但我可以说唯一匹配“/users/auth/...”的路由是这个（来自 rake 路由）：

```
 user_omniauth_callback        /users/auth/:action/callback(.:format)    {:action=>/(?!)/, :controller=>"users/omniauth_callbacks"} 
```

顺便说一句，当我说我“可以很好地访问路线”时，我的意思是这有效（将我正确重定向到 facebook 或 twitter）：

```
<%= link_to "Connect", "users/auth/facebook" %> 
```

此外，路由应该是用户模型的默认 Devise omniauth 路由

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T15:28:47.603

关于为什么这没有出现在 中`rake routes`，首先要注意任务是如何实现的。它是[railties](https://github.com/rails/rails/blob/3-2-stable/railties/lib/rails/tasks/routes.rake)的一部分，它会显示[如下](https://github.com/rails/rails/blob/3-2-stable/railties/lib/rails/tasks/routes.rake#L4)所示的路线：

```
Rails.application.routes.routes 
```

所以我们可以看到它正在询问`Rails.application`它的路线。

* * *

接下来请注意，[Omniauth gem](https://github.com/intridea/omniauth/) “是一个使用 Rack 中间件的灵活身份验证系统”。

因为它使用 Rack 中间件，所以它不“知道”任何关于`Rails.application`used by 的信息`rake routes`，因此它的路由不会出现在该任务中。

您可以在[这个 Railcast](http://railscasts.com/episodes/151-rack-middleware)中很好地介绍 Rack 中间件。

* * *

再深入一点，我们可以看到`rake middleware`出现`OmniAuth::Builder`在堆栈中的 rails 应用程序之前。那么它是如何处理`auth/twitter`路由的呢？

它通过`request_path`在其中检查 a 来做到这一点，您可以在[此处](https://github.com/intridea/omniauth/blob/1.0-beta/lib/omniauth/strategy.rb#L41)`call`查看检查，并且您可以在此处查看 是如何[构建](https://github.com/intridea/omniauth/blob/1.0-beta/lib/omniauth/strategy.rb#L138)的（默认情况下是，在您的情况下是.`request_path``path_prefix``auth``name``twitter`

将 Omniauth 与 Devise 一起使用时，`path_prefix`会自动设置，如此[处](https://github.com/plataformatec/devise/blob/v1.5/lib/devise/omniauth.rb#L13)所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T22:11:19.037

为什么他们不出现在 rake 路线上，我不确定。但是如果你想知道他们的别名，你可以在这里找到他们：[https ://github.com/plataformatec/devise/wiki/OmniAuth%3A-Overview](https://github.com/plataformatec/devise/wiki/OmniAuth%3A-Overview)

从他们的文档中：

> 目前，Devise 仅允许您将一种模型设为全能。在创建一个名为 User omniauthable 的模型后，如果“devise_for :users”已经添加到您的 config/routes.rb 中，Devise 将创建以下 url 方法：
> 
> user_omniauth_authorize_path（提供者） user_omniauth_callback_path（提供者）

因此，如果您`devise_for :model`的路线中有您应该看到该 url 方法。

例子：

```
<%= link_to "Sign in with Facebook", user_omniauth_authorize_path(:facebook) %> 
```

此外，如果您查看设计的实现，您可以看到 URL 助手在那里：

[https://github.com/plataformatec/devise/blob/master/lib/devise/omniauth/url_helpers.rb](https://github.com/plataformatec/devise/blob/master/lib/devise/omniauth/url_helpers.rb)

# jquery - jQuery将多个日期下拉列表复制到隐藏字段

> ID：10824899
> 
> 赞同：0
> 
> 时间：2012-05-30T22:03:08.737
> 
> 标签：jquery

我有一个带有 3 个下拉框的表单来选择月/日/年。我需要通过隐藏字段提交以 ISO 8601 格式（例如“2012-05-30”）选择的信息。如何使用 jQuery 根据在这些下拉框中选择的内容来构建日期值？

HTML 类似于：

```
<select name=month>
   <option>01</option>
   <option>02</option>
   <option>etc...</option>
</select>

<select name=day>
   <option>01</option>
   <option>02</option>
   <option>etc...</option>
</select>

<select name=year>
   <option>2012</option>
   <option>2013</option>
   <option>etc...</option>
</select>

<input type="hidden" name="date" value=""> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:33:54.407

尝试这个。

```
 <form id="test" method="post">
    <select name="month" class="date1">
       <option value="01">January</option>
      <option value="02">February</option>
    </select>

   <select name="day" class="date1">
     <option value="01">01</option>
    <option value="02">02</option>
   </select>
  <select name="year" class="date1">
    <option value="2012">2012</option>
    <option value="2013">2013</option>
 </select>
 <input type="hidden" name="date" value="">
 <input type="submit"/>
</form> 
```

请参阅演示中的 javascript。

[尝试演示](http://jsfiddle.net/ShWz8/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T22:06:44.687

> 我需要通过隐藏字段提交以 ISO 8601 格式（例如“2012-05-30”）选择的信息。

```
$('#formId').submit(function(){

  var dt = $('select[name=year] option:selected').text()
      + '-' +  $('select[name=month] option:selected').text() 
      + '-' + $('select[name=day] option:selected').text();

  $('input[name=date]').val(dt);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T22:07:16.530

在表单提交上做：

```
$("#myForm").submit(function() {
    var value = $("#myYearSelect").val()
    value += "-" + $("#myMonthSelect").val()
    value += "-" + $("#myDaySelect").val();
    $("#myHiddenInput").val(value);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T22:05:07.337

```
var mydate = $('input[name=year]').val() + '/' +  $('input[name=month]').val() +  '/' + $('input[name=day]').val();

$('input[name=date]').val(mydate); 
```

# php - 如何在 zend 框架中按可选方式进行分组？

> ID：10824905
> 
> 赞同：3
> 
> 时间：2012-05-30T22:03:33.293
> 
> 标签：php, mysql, zend-framework, zend-db

我`fetchAll`在zend中有一个功能：

```
public function fetchAll($where = 1, $order = null, $limit = null, $group = null, array $fields = null)
{
    $where = (null == $where) ? 1 : $where;

    $fields = (!isset($fields)) ? '*' : $fields;

    $select = $this->db->select()
                       ->from("table", $fields)
                       ->where($where)
                       ->order($order)
                       ->group($group)
                       ->limit($limit, $offset);
    echo $select; exit;
    $result = $this->db->fetchAll($select);
    return $this->getResultObjects($result);
} 
```

我可以调用这个函数`$this->fetchAll('field = 1', null, 10)`；

我可以`$order to null`并且查询可以正常工作，但`$group`由于某种原因不能。

我怎样才能做到这一点，以便该组是可选的，并且只有当我坐在某个东西上时才进入？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T22:05:59.500

这些方法是链接的，因此您可以将其拆分：

```
$select = $this->db->select()
  ->from("table", $fields)
  ->where($where);
  ->order($order)
  ->limit($limit, $offset);

if ($group) { 
  $select->group($group);
}

$result = $this->db->fetchAll($select);
return $this->getResultObjects($result); 
```

链中的每个方法（`from`、`where`、`order`等）都返回一个`Zend_Db_Select`. 因此，每次您调用其中一个方法时，您都可以立即从同一个类中调用另一个方法。

这些代码块是相同的：

```
// With chaining

$select = $this->db->select()
  ->from("table", $fields)
  ->where($where);
  ->order($order)
  ->limit($limit, $offset);

// No chaining

$select = $this->db->select();
$select = $select->from("table", $fields);
$select = $select->where($where);
$select = $select->order($order);
$select = $select->limit($limit, $offset); 
```

您可以看到为什么首选链接。注意：`$select =`在非链示例中，赋值 ( ) 大多是多余的，我只是将其保留以显示笨拙。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T22:06:30.410

你可以这样做：

```
$select = $this->db->select()
                   ->from("table", $fields)
                   ->where($where)
                   ->order($order)
                   ->limit($limit, $offset);

if(!empty($group)){
    $select->group($group)
} 
```

这是有效的，因为教义不会在您调用 execute 时执行您的查询。所以在那之前你可以继续构建查询。

哦，我以为你的问题是关于教义的。但是显然它与 ZendDb 以类似的方式工作。请参阅迈克 B 的答案。

# python - 如何从分组数据创建数据框

> ID：10824906
> 
> 赞同：2
> 
> 时间：2012-05-30T22:03:44.790
> 
> 标签：python, pandas

我有一个数据框（我们称之为“csv”），我想对其进行分组并获取组中第一个元素的值。例子：

```
A   B   C  D
foo bar happy yellow
foo bar sad   green
foo ape last  laugh 
```

我想要这个作为输出：

```
A   B   C
foo bar happy
foo ape last 
```

我目前这样做：

```
grp1 = csv.groupby(['A','B'])
lst = [(A,B,csv.ix[group[0]]['C']) for (A,B),group in grp1.groups.items()]
df = DataFrame(lst,columns=['A','B','C'])
df.to_csv('grp.csv',cols=['A','B','C'],index=False) 
```

但这似乎效率低下。我真的必须先创建一个列表，然后再`dataframe`从中创建一个吗？有没有办法`dataframe`直接创建一个，或者对原始文件进行某种索引或其他操作，`dataframe`以便我可以处理每个组中的第一条记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:11:17.123

您可以使用`aggregate`来定义您的聚合函数，它将只保留列的第一个元素并删除其他元素。

```
 In [60]: grp = df.groupby(['A', 'B'])

    In [61]: grp.aggregate({'C': lambda c: c.ix[c.first_valid_index()]})
    Out[61]:
                 C
    A   B  
    foo ape   last
        bar  happy 
```

# javascript - FB.login 对话框卡在 IE9 上的权限上

> ID：10824908
> 
> 赞同：2
> 
> 时间：2012-05-30T22:04:02.907
> 
> 标签：javascript, facebook, internet-explorer, facebook-graph-api

这是我的代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
<title></title>
</head>
<body>
<div id="fb-root">
</div>
<script>
       window.fbAsyncInit = function () {
        FB.init({
            appId: 'XXXXXX', // App ID
            channelUrl: '//localhost:63651/channel.htm', // Channel File
            status: true, // check login status
            cookie: true, // enable cookies to allow the server to access the session
            xfbml: true,  // parse XFBML
            oauth: true
        });

        // Additional initialization code here
    };

    // Load the SDK Asynchronously
    (function (d) {
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) { return; }
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    } (document));
</script>
<input type="button" value="login" id="login" onclick="return login();" />
<script>

    function login() {

        FB.login(function (response) {
            if (response.authResponse) {
                console.log('Welcome!  Fetching your information.... ');
                FB.api('/me', function (response) {
                    alert(response);
                    console.log('Good to see you, ' + response.name + '.');
                });
            } else {
                console.log('User cancelled login or did not fully authorize.');
            }
        }, { scope: 'email,user_work_history,publish_stream' });

    }
</script>
</body>
</html> 
```

所以我的问题是，facebook 对话框卡在 IE9 上的权限上，请参阅下面![脸书错误](../Images/e2dedbf5cd5e78e9da486dc0305583e0.png)
的 chrome 它可以工作，但出现此错误

```
Unsafe JavaScript attempt to access frame with URL https://www.facebook.com/dialog/permissions.request from frame with URL http://localhost:63651/plans/. Domains, protocols and ports must match. 
```

我使用了与 fb 文档中描述的相同的代码。

有什么帮助吗？
如果需要，我可以提供更多详细信息。我没有所有选择。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:44:59.597

尝试将 channelURL 文件放在互联网上（没有 localhost url）和默认的 http 端口（80）。问题可能是它无法识别连接的不同端口，或者它希望它在互联网上发布（不是本地主机）

```
 FB.init({
        appId: 'XXXXXX', // App ID
        channelUrl: '//your-website.com/channel.htm', // Channel File
        status: true, // check login status
        cookie: true, // enable cookies to allow the server to access the session
        xfbml: true,  // parse XFBML
        oauth: true
    }); 
```

# linux - web2py：发送电子邮件：从本地主机的 EHLO 后失去连接

> ID：10824910
> 
> 赞同：2
> 
> 时间：2012-05-30T22:04:17.870
> 
> 标签：linux, email, smtp, centos, web2py

我正在尝试使用 Centos 上的 postfix 服务器在 web2py 中发送电子邮件。我可以使用 gmail SMTP 服务器成功发送它，但是当我将设置更改为：

```
mail.settings.server='127.0.0.1:25'
mail.settings.login = 'user:pass' 
```

没有电子邮件送达。我检查了日志，我看到了这个：

```
postfix/smtpd[31521]: connect from localhost[127.0.0.1]
postfix/smtpd[31521]: lost connection after EHLO from localhost[127.0.0.1]
postfix/smtpd[31521]: disconnect from localhost[127.0.0.1] 
```

我能够使用本地邮件命令成功发送电子邮件。我是linux新手，请多多包涵。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T13:40:49.093

根据您的 web2py 版本，尝试设置 mail.settings.tls = False

# iphone - 每次打开相机时都不会使用 UIImageViewController cameraDevice

> ID：10824911
> 
> 赞同：5
> 
> 时间：2012-05-30T22:04:18.743
> 
> 标签：iphone, objective-c, uiimagepickercontroller

我希望我的应用只使用前置摄像头。所以我实现了以下代码。

```
if ([UIImagePickerControllerisCameraDeviceAvailable:UIImagePickerControllerCameraDeviceFront]) {
   self.imagePickerController.cameraDevice = UIImagePickerControllerCameraDeviceFront;
} 
```

这在我第一次打开相机时有效（它使用前置摄像头）。但是如果我取消照片然后重新进入相​​机，它正在使用后置摄像头。

每次取消/重新进入摄像头时，它都会在前后摄像头之间切换......

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:37:48.290

I was having the same problem and resolved the issue in my case by including autorelease on the call to allocate the UIImagePickerController as shown here

UIImagePickerController *cameraUI = [[[UIImagePickerController alloc] init] autorelease];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T12:18:57.030

```
Tr this code .I used this code and it is working fine .Use this code either in button action or viewwillappear or viewdidload and dismiss the camera view properly
    imgPicker =[[UIImagePickerController alloc] init];
    imgPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
    imgPicker.cameraDevice=UIImagePickerControllerCameraDeviceFront;
    imgPicker.showsCameraControls = YES;
    imgPicker.allowsEditing = YES;
    imgPicker.delegate=self;
    [self presentViewController:imgPicker
                       animated:NO completion:nil]; 
```

# mysql - Mysql：按列计数（带连接）

> ID：10824915
> 
> 赞同：1
> 
> 时间：2012-05-30T22:04:43.940
> 
> 标签：mysql, join, count

我有以下查询：

```
Table zone: zone_id, country_id, city_id

SELECT zone.zone_id, city_name
FROM zone
INNER JOIN city
ON city.city_id = zone.city_id
WHERE country_id = 3 
```

结果：

```
zone_id | city_id
----------------------
17      | New York
16      | Los Angeles 
```

和其他查询：

```
Table zone , Table management relation: zone_id

SELECT COUNT(user_id)
FROM management
WHERE zone_id = 17

SELECT COUNT(user_id)
FROM management
WHERE zone_id = 16 
```

结果

```
first query: Count             second query:  Count
             -------                          --------
             5                                2 
```

如何将 count() 加入到第一个查询结果的每一行？，以这种方式：

```
zone_id | city_id      | users
--------------------------------
17      | New York     | 5
16      | Los Angeles  | 2 
```

我试过这个：

```
SELECT zone.zone_id, vNombre, COUNT(user_id) AS users
FROM zone
INNER JOIN city
ON city.city_id = zone.city_id
INNER JOIN management
ON management.zone_id = zone.zone_id
WHERE country_id = 3
GROUP BY user_id 
```

但我发现这个：

```
zone_id | city_id      | users
--------------------------------
17      | New York     | 5
17      | New York     | 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:15:16.750

```
SELECT   zone_id, city_name, COUNT(user_id) AS users
FROM     zone
  INNER JOIN city       USING (city_id)
   LEFT JOIN management USING (zone_id)
WHERE    country_id = 3
GROUP BY zone_id, city_name 
```

# php - 一个提交按钮的多个操作 cakephp

> ID：10824917
> 
> 赞同：1
> 
> 时间：2012-05-30T22:04:52.053
> 
> 标签：php, cakephp, cakephp-1.3

是否有可能在 cakephp 应用程序的两个不同控制器中调用两个不同操作的按钮？例如，假设我在页面上有一个文本框和一个下一步按钮，当我单击下一步按钮时，我希望将输入文本框中的数据保存到数据库并移动到下一页（移动到另一个页面是另一个控制器动作）

这可能吗？

让我知道，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T22:30:55.237

你的概念是完全错误的想法。有不同的方法，但你的“两个按钮”完全是误导。我猜是因为您不了解 MVC 设计模式，请阅读它。

当您提交表单时，我们将其命名为 /reports/step1，数据验证只需将其保存并重定向到 /reports/step2。

做不同事情的不同形式应该总是分开的。如果你开始在同一个动作中做多件事情并且看到事情肯定会变得混乱。只需寻求最佳实践技术：如果一个方法同时做两件事，请重构它。

# objective-c - 如何从定义绑定但在代码中的对象访问 Cocoa IB 绑定？

> ID：10824922
> 
> 赞同：1
> 
> 时间：2012-05-30T22:05:08.793
> 
> 标签：objective-c, cocoa, binding, qtkit

我有一个类（文件的所有者），它有一个 QTMovieViewer 子类（movieViewer）和一个 QTMovie（电影）的实例。QTMovieViewer 是一个 IBOutlet，QTMovie 不是。

在 IB 中，我使用 KVC 为movieViewer 设置了绑定到电影。如何在代码中从 movieViewer 访问电影？

我曾考虑向 IB 添加一个对象来表示 QTMovie，但问题是这不是一个 IBOutlet，而是在文件所有者的代码中创建的。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T00:14:50.783

为什么要使用电影视图作为查找电影的起点？为什么不从充当该 NIB 所有者的控制器开始呢？

无论如何，`QTMovieView`（没有“er”）有一个`movie`属性，它可能反映`movie`绑定绑定到的任何电影。

# c++ - qtpropertybrowser 速度慢

> ID：10824924
> 
> 赞同：1
> 
> 时间：2012-05-30T22:05:24.057
> 
> 标签：c++, qt

我注意到[qtpropertybrowser](http://doc.trolltech.com/solutions/4/qtpropertybrowser/index.html)对于大量属性可能相当慢。有人可以推荐加速它的方法，或者可能是与 QT 应用程序一起使用的更好选择吗？我已经看到了：http: [//qt-project.org/forums/viewthread/5490](http://qt-project.org/forums/viewthread/5490)但是，那里描述的修复似乎并没有显着加快速度。

谢谢！

# css - 网站在 IE 8 中不显示滚动条（不溢出）

> ID：10824926
> 
> 赞同：0
> 
> 时间：2012-05-30T22:05:40.893
> 
> 标签：css, internet-explorer, html, scrollbar, overflow

我已经研究过这个问题，这是我所知道的：这很可能是 CSS 问题。大多数答案都指向删除 CSS 中的“溢出”代码但是，我的 CSS 中没有类似的代码。看起来我网站上的 CSS 比我研究的问题中使用的网站要复杂一些。（我没有自己编码，我只是一个卑微的设计师！）

有人知道为什么会这样吗？

网站：www.100apparel.org

非常感谢 ：）

PS：我的幻灯片在主页上以 chrome 显示时也有问题。有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:14:44.640

只是想添加一些我发现的东西，高度：100；解决方案对我不起作用，而我实际发现的是 Windows 8（IE 10，甚至在旧模式下渲染），是问题的原因。此行为受以下控制：

```
-ms-overflow-style: 
```

此处列出：http: [//msdn.microsoft.com/en-gb/library/ie/hh771902 (v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/ie/hh771902(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T22:23:17.297

考虑把它放在你的 CSS 中以强制垂直滚动条：

```
html {
height: 101%; /* setting height to 101% forces scroll bar to display */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T22:22:50.777

你的CSS代码看起来像这样......

```
div.wrapper {
background-color:#F8F8F8;
width: 924px;
_width: 924px;
margin: 0 auto;
} 
```

把它改成这个看看是否有帮助......

```
div.wrapper {
overflow: auto;
background-color:#F8F8F8;
width: 924px;
margin: 0 auto;
} 
```

# jquery - 在 Ajax 调用期间保持 ASP.Net 会话处于活动状态

> ID：10824927
> 
> 赞同：2
> 
> 时间：2012-05-30T22:05:41.863
> 
> 标签：jquery, asp.net, asp.net-mvc

通过 $.get (JQuery) 进行的 Ajax 调用是否使 Asp.Net 会话状态保持活动状态？我注意到该请求包含 asp.net 会话 cookie。这是否意味着每次您使用 Ajax $.get 请求击中控制器操作时都会重置滑动会话到期超时？

我知道它适用于传统的整页请求（非 Ajax）吗？

就我而言，我正在对部分 MVC3 视图进行一系列 Ajax 调用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T22:24:12.847

是的，据我了解，对 Web 服务器的任何请求都会使会话保持活动状态。Javascript 用于创建标准请求并捕获响应，以便您可以更新屏幕上的 UI 元素。

# ruby-on-rails - 如何在 Rails 中将 JSON 数据转换为 PList 数据？

> ID：10824929
> 
> 赞同：1
> 
> 时间：2012-05-30T22:05:49.900
> 
> 标签：ruby-on-rails, json

我正在查询一个传回 JSON 数据的外部服务。我想将此数据格式化为二进制 PList 以将其发送给客户端。如何在 Rails 中进行转换？这是一个复杂的数据结构，包含数组和哈希以及字符串和整数。

根据评论，我正在尝试这个：

```
def friends_facebook
  @graph = Koala::Facebook::GraphAPI.new(current_user.facebook_token.token)
  render :plist => JSON.parse(@graph.get_connections("me", "friends").to_json)
end 
```

导致错误（在渲染线上）：

```
incompatible encoding regexp match (ASCII-8BIT regexp with UTF-8 string) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:13:00.720

使用[http://plist.rubyforge.org/](http://plist.rubyforge.org/)和[http://flori.github.com/json/](http://flori.github.com/json/)：

```
JSON.parse(input).to_plist 
```

`to_plist_node`您可能必须为您的数据结构编写自己的方法。

# mysql - SQL - 如果其中一个 ID 具有某个列值，则选择所有匹配的 ID

> ID：10824931
> 
> 赞同：1
> 
> 时间：2012-05-30T22:06:07.197
> 
> 标签：mysql, sql

我不知道如何措辞这个问题，但它更容易解释。

如果我有一个看起来像这样的表：

```
+-------+----------+--------+
| 用户 | 结果 | 水平 |
+-------+----------+--------+
| 1 | 胜利 | 1 |
| 1 | 胜利 | 2 |
| 1 | 胜利 | 3 |
| 2 | 胜利 | 1 |
| 2 | 击败 | 2 |
| 3 | 击败 | 1 |
| 4 | 击败 | 1 |
| 5 | 击败 | 1 |
+-------+----------+--------+

```

我希望能够只选择在第 3 级获胜的“用户”。所以选择会返回：

```
+-------+----------+--------+
| 用户 | 结果 | 水平 |
+-------+----------+--------+
| 1 | 胜利 | 1 |
| 1 | 胜利 | 2 |
| 1 | 胜利 | 3 |
+-------+----------+--------+

```

其他人不会因为没有完成第 3 关而被退回。

非常感谢！我希望我解释清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T22:06:55.943

如果您只想知道哪些用户在第 3 关获胜：

```
SELECT User FROM my_table WHERE Result = 'Victory' AND Level = 3 
```

但是，如果（如您所示）您想要所有这些用户的结果（感谢@Andomar 和@ConradFrix 在下面的评论）：

```
SELECT DISTINCT m1.*
FROM   my_table AS m1
  JOIN my_table AS m2 USING (User)
WHERE  m2.Result = 'Victory'
   AND m2.Level  = 3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T22:21:45.453

您可以使用一个`exists`子句，例如：

```
select  *
from    scores s
where   exists
        (
        select  *
        from    scores vl3
        where   vl3.user = s.user
                and vl3.Result = 'Victory'
                and vl3.Level >= 3
        ) 
```

# sql - FROM 子句中的错误：在“{”附近。无法解析查询文本

> ID：10824935
> 
> 赞同：-2
> 
> 时间：2012-05-30T22:06:26.760
> 
> 标签：sql, tsql, reporting-services, ssrs-2008, bids

我正在尝试对数据集执行以下查询：

```
SELECT 
  S.CUSIP, S.SecName, 
  ISNULL(RA.FinInstCode, '') AS RemarketingAgent, 
  S.IssueDate, S.MaturityDate, F2.FinInstName AS Trustee, 
  CASE WHEN SC1.ExpirationDate IS NULL 
    THEN '' ELSE ISNULL(F1.FinInstCode, '') END 
  AS CreditProvider, 
  CASE WHEN SC1.ExpirationDate IS NULL 
    THEN '' ELSE ISNULL(C1.CreditEnhancementCode, '') END 
  AS CreditType, 
  SC1.ExpirationDate AS CreditExpirationDate, 
  SC1.RefNum AS RefNumber
FROM
  dbo.SecurityCreditEnhancementProvider SC1, 
  dbo.FinInst F1, 
  dbo.LUCreditEnhancement C1, 
  { oj { oj dbo.Security S 
LEFT OUTER JOIN
  dbo.FinInst F2 ON S.TrusteeID = F2.FinInstID } 
LEFT OUTER JOIN
  dbo.FinInst RA ON S.RemarketingAgentID = RA.FinInstID }
WHERE
  S.SecID = SC1.SecID 
AND 
  SC1.CreditProviderID = F1.FinInstID 
AND 
  SC1.CreditEnhancementID = C1.CreditEnhancementID 
AND 
  C1.CreditEnhancementCode = 'LOC' OR
  C1.CreditEnhancementCode = 'LIQUIDITY' 
AND 
  (S.ActiveFlag = 'A') 
AND 
  (S.SecTypeID NOT IN (4, 7))
ORDER BY CreditExpirationDate 
```

尝试运行查询时，我得到的错误是“FROM 子句中的错误：'{'。无法解析查询。”

任何解决此问题的帮助将不胜感激。

谢谢，

编辑 1：这是查询设计器更改代码后的样子：

```
FROM         { oj { oj { oj { oj { oj dbo.SecurityCreditEnhancementProvider SC1 LEFT OUTER JOIN
                  dbo.FinInst F1 ON SC1.CreditProviderID = F1.FinInstID } LEFT OUTER JOIN
                  dbo.LUCreditEnhancement C1 ON SC1.CreditEnhancementID = C1.CreditEnhancementID } LEFT OUTER JOIN
                  dbo.Security S ON S.SecID = SC1.SecID } LEFT OUTER JOIN
                  dbo.FinInst F2 ON S.TrusteeID = F2.FinInstID } LEFT OUTER JOIN
                  dbo.FinInst RA ON S.RemarketingAgentID = RA.FinInstID } 
```

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:24:35.380

在这种情况下格式化代码可能会有所帮助。您的`FROM`子句中有不正确的语法。我还更新了查询以在所有表​​上使用 JOIN 语法，而不是在表之间使用逗号。

```
SELECT S.CUSIP
    , S.SecName
    , ISNULL(RA.FinInstCode, '') AS RemarketingAgent
    , S.IssueDate
    , S.MaturityDate
    , F2.FinInstName AS Trustee
    , CASE WHEN SC1.ExpirationDate IS NULL THEN '' ELSE ISNULL(F1.FinInstCode, '') END AS CreditProvider
    , CASE WHEN SC1.ExpirationDate IS NULL THEN '' ELSE ISNULL(C1.CreditEnhancementCode, '') END AS CreditType
    , SC1.ExpirationDate AS CreditExpirationDate
    , SC1.RefNum AS RefNumber
FROM dbo.SecurityCreditEnhancementProvider SC1
LEFT JOIN dbo.FinInst F1
    ON SC1.CreditProviderID = F1.FinInstID 
LEFT JOIN dbo.LUCreditEnhancement C1
    ON SC1.CreditEnhancementID = C1.CreditEnhancementID 
LEFT JOIN dbo.Security S 
    ON S.SecID = SC1.SecID 
LEFT OUTER JOIN dbo.FinInst F2 
    ON S.TrusteeID = F2.FinInstID
LEFT OUTER JOIN dbo.FinInst RA 
    ON S.RemarketingAgentID = RA.FinInstID
WHERE (C1.CreditEnhancementCode = 'LOC' OR C1.CreditEnhancementCode = 'LIQUIDITY' )
    AND (S.ActiveFlag = 'A') 
    AND (S.SecTypeID NOT IN (4, 7))
ORDER BY CreditExpirationDate 
```

# javascript - 来自 JSON 文件的 Jquery UI 自动完成结果

> ID：10824943
> 
> 赞同：0
> 
> 时间：2012-05-30T22:07:01.330
> 
> 标签：javascript, jquery, ajax, json, autocomplete

我在成功解析 JSON 文件以在 JQuery UI 自动完成中使用时遇到了很大的困难

请查看我的开发页面：[http ://www.zyredesign.com/autocomplete](http://www.zyredesign.com/autocomplete)

JSON的组织不如我希望的那样好，因为项目键是ID，例如：

{“140”：“阿巴斯”，“375”：“讴歌”}

ETC....

这是我的 javascript 尝试：

```
$(document).ready(function() {

    $('#cars').autocomplete({
        source: function()
        {

            $.getJSON('json.json', function(data)
            {
                cars_array = new Array();

                $.each(data, function(k, v) { 

                    cars_array.push(v);

                 })

                alert( cars_array);

                return cars_array;
            })

        },
        minLength: 3,
        focus: function( event, ui ) {},
        select: function( event, ui ) {
            $('#suggestions').html(ui);

            return false;
        }
    });

});

/*
function get_json()
{
var items = new Array();

$.getJSON('json.json', function(data) {
  var items = [];

  alert(  eval ("(" + data + ")") ); 

 // $.each(data, function(key, val) {
    //items.push('<li id="' + key + '">' + val + '</li>');

 // });

  $('<ul/>', {
    'class': 'my-new-list',
    html: items.join('')
  }).appendTo('body');
});

return items;
}
*/ 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T22:22:31.553

您为 source: 属性提供的函数不返回值。$.get() 函数可以，但不会到达 source 属性。

```
 source: function()
    {
        $.getJSON('json.json', function(data)
        {
            cars_array = new Array();
            $.each(data, function(k, v) { 
               cars_array.push(v);
            })
            return cars_array;
        })
        //You need to return something here
    } 
```

此外，您以同步模式使用对 json 文件的异步调用可能是一个问题。换句话说，考虑一下：

```
 $.getJSON('json.json', function(data)
    {
        cars_array = new Array();
        $.each(data, function(k, v) { 
           cars_array.push(v);
        })

        //Now you definitely have the cars so you can do the autocomplete
        $('#cars').autocomplete({
            source:cars_array,
            minLength: 3,
            focus: function( event, ui ) {},
            select: function( event, ui ) {
            $('#suggestions').html(ui);
            return false;
        }
    }); 
```

# javascript - 为什么同一域下的不同 URL 无法访问我的 localStorage 数据？

> ID：10824948
> 
> 赞同：2
> 
> 时间：2012-05-30T22:07:44.080
> 
> 标签：javascript, local-storage

我正在主干网中制作一个移动网络应用程序： [http ://example.com/mobile/index/](http://example.com/mobile/index/)

用户登录后，我将令牌存储在 localStorage 中并重定向到骨干网中的搜索路由： [http ://example.com/mobile/index/search](http://example.com/mobile/index/search)

我的印象是 localStorage 信息可以在整个域中共享，但 localStorage 令牌只能从后一个 URL 访问。为什么不是这样？如何共享整个 example.com 域的 localStorage？

如果有人知道的话，附带一点 - m.example.com、example.com 和 www.example.com 的信息会以类似的方式共享吗？

提前谢谢了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T22:18:54.227

那不应该发生。

1.  你确定它们有相同的起源吗？它们必须具有相同的：

    *   **子域：** `http://example.com`并且`http://www.example.com`是不同的来源

    *   **协议：** `http://www.example.com`并且`https://www.example.com`是不同的起源

2.  或者，它`localStoarge`可能已满，因此新数据被默默忽略。

3.  如果您在本地进行开发，请确保不要混合`localhost`和`127.0.0.1`（那些碰巧引用同一物理机器的不同来源）。

4.  如果您在本地进行开发并将页面作为`file:`资源加载（即 URL 实际上以 开头`file://`），浏览器可能会将每个`file:`URL 视为不同的来源，或者至少将不同的目录视为不同的来源。

# javascript - 如何获取 JSON 数据并使用 d3.js 创建折线图？

> ID：10824949
> 
> 赞同：1
> 
> 时间：2012-05-30T22:07:55.967
> 
> 标签：javascript, d3.js

我有一个响应大型 JSON 数组的 php 脚本。这是其中很小的一部分：

```
{
"BR_RioDeJaneiro": [
    {
        "timeRange": "12:00:00 AM-12:19:59 AM",
        "average": "4.3653"
    },
    {
        "timeRange": "12:20:00 AM-12:39:59 AM",
        "average": "4.5386"
    }
]
} 
```

时间范围实际上上升到`11:50:00 AM-11:59:59 PM`. 我希望`timeRange`成为域并且`average`成为范围。我想创建一个折线图，将每个时间范围内的平均值可视化。我知道有一个`d3.json()`函数可用于获取 json 数据，但我很难理解如何设置域、范围和创建可视化。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T22:25:32.050

本教程做了很多你问如何做的事情：

[http://www.recursion.org/d3-for-mere-mortals/](http://www.recursion.org/d3-for-mere-mortals/)

它构建了一个由日期和值组成的基于路径的折线图。

在您的情况下，您需要做一些工作将字符串日期范围转换为可用于绘制的真实日期。

另外，请注意，如果时间范围是连续的（即每个时间范围都在最后一个结束时开始），您不需要关心结束日期。

# php - CodeIgniter：检测视图中是否发生错误

> ID：10824950
> 
> 赞同：0
> 
> 时间：2012-05-30T22:08:01.143
> 
> 标签：php, codeigniter, buffer

我正在使用 codeigniter 并有一个主视图，它根据我传递的参数调用另一个视图，因此例如我可能会从控制器传递类似这样的内容：

```
$data['view'] = 'login';

$this->load->view('main', $data); 
```

这一切都很好而且花花公子，但是，我试图同样很好地传递我的错误页面。在我的错误页面中，我有一些类似于我的控制器的东西，我在其中设置了一个视图，然后调用主视图。

如果我还没有处理任何视图，这可以正常工作，例如，如果我在控制器中收到 PHP 错误。但是，如果我在视图中遇到错误，它将处理主视图两次（因此 html/head/body 标记两次）

如果我只是在没有主视图的情况下吐出错误页面，则内容可能会出现在任何地方，例如标题标签，所以我需要重新生成整个页面。

我知道它正在处理当前视图，因此清除当前正在生成输出的东西的输出并没有什么意义，但无论如何都可以这样做。这意味着当错误页面命中时，清除生成的任何内容，然后从错误页面输出任何内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:47:03.897

数据字符串是个好主意，但是我真的不想在应用程序中重写任何东西，我们必须有大约 200 个视图。

我最终在 PHP 中使用对象缓冲区并将其放在每个错误文件的顶部：

```
ob_end_clean();
ob_end_flush();
@ob_clean();

ob_start();
ob_clean();

//show code

exit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T22:29:39.057

您可以通过将视图作为数据返回而不是将它们发送到浏览器来构建字符串：

```
$output = $this->load->view('my_view', $data, TRUE); 
```

然后在最后，设置最终的输出字符串：

```
$this->output->set_output($output); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T00:58:20.497

您可以在视图中调用视图。

因此，如果您在控制器中按照您所说的去做：

```
$data['view'] = 'login';
$this->load->view('main', $data); 
```

然后在 main.php 视图文件中，您可以执行以下操作：

```
<? if(isset($view)):
$this->load->view($view);
endif;?> 
```

如果您将多个值发送到该部分的主视图中，您也可以在那里使用嵌套的 if 或 switch 语句，我可能会将其全部包装在容器 div 中，因为这就是我的角色。如果它引发错误，您可以调整路径。

# python - Python Imaging LIbrary 在哪里保存对象

> ID：10824951
> 
> 赞同：0
> 
> 时间：2012-05-30T22:08:01.730
> 
> 标签：python, image, image-processing, python-imaging-library

我正在使用 PIL 的 Image.save 方法，但找不到文件的放置位置。我已经进行了系统搜索，但仍然没有运气。

我的代码如下所示： print imageObj.save(fileName, "JPEG")

并给出正确的 None 响应来表示它正在工作。知道他们去哪里以及如何找到他们吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:14:20.070

在设置文件名变量时，您应该选择一个位置来保存图像。
`filename = "/Users/clifgray/Desktop/filename.jpeg"`
`imgObj.save(filename)`

# iphone - 将 UIView 加载到数组中，然后使用它们

> ID：10824954
> 
> 赞同：0
> 
> 时间：2012-05-30T22:08:21.077
> 
> 标签：iphone, ios, uiview, nsarray

我正在尝试创建一组视图，然后我可以在我的申请人中滑动。

我试图在我的视图中设置我的数组确实加载然后将数组中的第一个视图加载到视图中。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    self.title = @"Prototype";
    //Initalizse the swipe gestuer listener
    [self setupLeftSwipeGestureRecognizer];
    [self setupRightSwipeGestureRecognizer];

    //alloc and init viewcontroller nibs
    self.detailViewA = [[DetailViewController alloc]initWithNibName:@"DetailViewController" bundle:[NSBundle mainBundle]]; 
    self.detailViewB = [[DetailViewControllerB alloc]initWithNibName:@"DetailViewControllerB" bundle:[NSBundle mainBundle]];
    self.detailViewC = [[DetailViewControllerC alloc]initWithNibName:@"DetailViewControllerC" bundle:[NSBundle mainBundle]];
    // Create Array
    viewArray = [NSArray arrayWithObjects:detailViewA_, detailViewB_, detailViewC_, nil];

    // set detail View as first view
    [self.view addSubview:[viewArray objectAtIndex:0]];

} 
```

之后它崩溃了。并产生此消息。

```
2012-05-31 10:06:33.769 SMPrototypeB[2394:707] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[DetailViewController superview]: unrecognized selector sent to instance 0x131b00' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T22:10:48.820

您正在添加一个视图控制器作为子视图，但您需要做的是添加该视图控制器的视图。

```
UIViewController *tempVC = (UIViewController*)[viewArray objectAtIndex:0];
[self.view addSubView:tempVC.view]; 
```

# c++ - Linux 上哪个版本的 C++ 库符合“ISO C++ 11”标准？

> ID：10824963
> 
> 赞同：5
> 
> 时间：2012-05-30T22:09:33.937
> 
> 标签：c++, c++11, standards

目前我的电脑上有 Debian Squeeze(AMD64 linux)、libstdc++5 和 libstdc++6。

这些 C++ 库是否符合 ISO 标准 C++11？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T02:03:23.767

不，它们不完全符合，但它们有元素：

[stdlibc++ 上的 C++11 支持](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html)（这是最新版本，不是您拥有的版本）

[GCC 版本上的 C++11 支持](http://gcc.gnu.org/projects/cxx0x.html)

您最好的选择是尝试[libc++](http://libcxx.llvm.org/)（为 clang 开发，但也适用于 GCC 4.4）。您也可以尝试下载和编译最新的 clang 或 GCC 版本。

只有 MS 在 VC 11 中有一个完全实现的 C++11 库（或者他们声称，是的，这对您没有帮助，抱歉）。

# java - Spring Controller：如何正确重定向到操作并包含模型参数？

> ID：10824966
> 
> 赞同：2
> 
> 时间：2012-05-30T22:09:46.213
> 
> 标签：java, spring, spring-mvc

我有一个弹簧控制器`UserController`，我有以下方法（不包括业务逻辑）：

```
 @RequestMapping(value = "new", method = RequestMethod.GET)
public String getNewUserForm(Model model) {
    model.addAttribute("action", "Create");
    model.addAttribute(new User());
    return "users/edit";
}

@RequestMapping(value = "create", method = RequestMethod.POST)
public String getCreateUser(@ModelAttribute("user") User user, BindingResult result, RedirectAttributes attr) {
    attr.addFlashAttribute("user", user);
    return "redirect:view";
}

@RequestMapping(value = "view", method = RequestMethod.GET)
public String getViewUser(Model model) {
    return "users/view";
} 
```

我最终得到三个“操作”（新建、创建和查看）。我要实现的是：`app.com/users/new`在浏览器中输入。将显示创建用户表单`users/edit`。提交表单时，它会调用`users/create (POST)`. 成功创建用户后，我想将用户转发到`users/view`，并在不可编辑的页面中显示输入数据。我不能只是返回`view`，因为那样 url 仍然存在`app.com/users/create`。我想让它读`app.com/users/view`。

现在，我正在使用一个`RedirectAttributes`对象，结合返回`redirect:view`，它可以工作。但感觉应该有更好的方法来实现这一点。我尝试使用`redirect:view`without`RedirectAttributes`并且该模型不可用。

另一种选择是在 url 中传递用户 ID（例如：）`app.com/users/view/1`并从数据库加载数据。但考虑到我已经拥有该对象的最新版本，这似乎是不必要的数据库往返。我将为“漂亮的 url”实现此功能，但如果用户对象可用，我将无法选择不加载它。

像这样的东西：

```
 @RequestMapping(value = "view", method = RequestMethod.GET)
public String getViewUser(Model model, @RequestParam(required = false) String id) {

    if(!model.containsAttribute("user")){
        //get it from the db with the optional request parameter
    }

    return "users/view";
} 
```

推荐我的方法吗？还是我完全看错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T06:10:38.160

更好的方法是重定向到`app.com/users/view/1`.

*首先，因为您*拥有对模型所做的最新更改，但没有其他并发用户可能同时进行的更改。

其次，因为它使您的应用程序无状态，因此同时更具可扩展性和更简单。

第三，因为查看页面可能需要比编辑页面更多的用户信息。有一个很大的详细信息页面显示用户的许多关联是很常见的，但在编辑页面中只有一些可修改的信息。因此，保存编辑页面的模型以使其对视图页面可用是不够的。

第四，因为这种方式，显示用户详细信息的逻辑在一个地方，并且只有一个可能的 URL 可以做到这一点。

第五，因为这样，用户可以为 URL 添加书签，或通过电子邮件将其发送给某人，如果他稍后返回此 URL，它将起作用。而在您当前的解决方案中，该 URL 仅在您之前编辑过用户时才有效。

# javascript - 打开（{modal:true}）抛出 NSException

> ID：10824967
> 
> 赞同：0
> 
> 时间：2012-05-30T22:09:47.893
> 
> 标签：javascript, titanium, modal-dialog, nsexception

当我单击我的 rightNavButton 以尝试打开一个新窗口时，我收到一个 NSException。但是，当我这样做时，它会突然退出模拟器并给我一个 NSException 错误。我已经对该主题进行了研究，但没有遇到同样的问题。我试图打开的 js 文件中没有任何错误，这是我不断收到的错误：

```
{[ERROR] The application has crashed with an unhandled exception. Stack trace:
0   CoreFoundation                      0x0238c58c __exceptionPreprocess + 156
1   libobjc.A.dylib                     0x024e0313 objc_exception_throw + 44
2   CoreFoundation                      0x02344ef8 +[NSException raise:format:arguments:] + 136
3   Foundation                          0x007313bb -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 116
4   UIKit                               0x00be51d6 -[UIWindowController transition:fromViewController:toViewController:target:didEndSelector:] + 290
5   UIKit                               0x009ea65d -[UIViewController presentModalViewController:withTransition:] + 3478
6   DiscountShelving                    0x00198716 -[TiApp attachModal:toController:animated:] + 166
7   DiscountShelving                    0x00198751 -[TiApp attachModal:toController:animated:] + 225
8   DiscountShelving                    0x0019865a -[TiApp showModalController:animated:] + 474
9   DiscountShelving                    0x00063172 -[TiWindowProxy openOnUIThread:] + 2978
10  Foundation                          0x006b594e __NSThreadPerformPerform + 251
11  CoreFoundation                      0x0236d8ff __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 15
12  CoreFoundation                      0x022cb88b __CFRunLoopDoSources0 + 571
13  CoreFoundation                      0x022cad86 __CFRunLoopRun + 470
14  CoreFoundation                      0x022ca840 CFRunLoopRunSpecific + 208
15  CoreFoundation                      0x022ca761 CFRunLoopRunInMode + 97
16  GraphicsServices                    0x041921c4 GSEventRunModal + 217
17  GraphicsServices                    0x04192289 GSEventRun + 115
18  UIKit                               0x00944c93 UIApplicationMain + 1160
19  DiscountShelving                    0x000045da main + 410
20  DiscountShelving                    0x00002ea5 start + 53
2012-05-30 14:58:46.035 DiscountShelving[19335:207] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Attempting to begin a modal transition from <UINavigationController: 0x6d39e90> to <UINavigationController: 0x6d438d0> while a transition is already in progress. Wait for viewDidAppear/viewDidDisappear to know the current transition has completed'
*** Call stack at first throw:
(
    0   CoreFoundation                      0x0238c5a9 __exceptionPreprocess + 185
    1   libobjc.A.dylib                     0x024e0313 objc_exception_throw + 44
    2   CoreFoundation                      0x02344ef8 +[NSException raise:format:arguments:] + 136
    3   Foundation                          0x007313bb -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 116
    4   UIKit                               0x00be51d6 -[UIWindowController transition:fromViewController:toViewController:target:didEndSelector:] + 290
    5   UIKit                               0x009ea65d -[UIViewController presentModalViewController:withTransition:] + 3478
    6   DiscountShelving                    0x00198716 -[TiApp attachModal:toController:animated:] + 166
    7   DiscountShelving                    0x00198751 -[TiApp attachModal:toController:animated:] + 225
    8   DiscountShelving                    0x0019865a -[TiApp showModalController:animated:] + 474
    9   DiscountShelving                    0x00063172 -[TiWindowProxy openOnUIThread:] + 2978
    10  Foundation                          0x006b594e __NSThreadPerformPerform + 251
    11  CoreFoundation                      0x0236d8ff __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 15
    12  CoreFoundation                      0x022cb88b __CFRunLoopDoSources0 + 571
    13  CoreFoundation                      0x022cad86 __CFRunLoopRun + 470
    14  CoreFoundation                      0x022ca840 CFRunLoopRunSpecific + 208
    15  CoreFoundation                      0x022ca761 CFRunLoopRunInMode + 97
    16  GraphicsServices                    0x041921c4 GSEventRunModal + 217
    17  GraphicsServices                    0x04192289 GSEventRun + 115
    18  UIKit                               0x00944c93 UIApplicationMain + 1160
    19  DiscountShelving                    0x000045da main + 410
    20  DiscountShelving                    0x00002ea5 start + 53
)
terminate called after throwing an instance of 'NSException'
[INFO] Application has exited from Simulator}

var btnCart = Titanium.UI.createButton({
title:'Cart'
});

btnCart.addEventListener('click', function(e){
var cartWin = Titanium.UI.createWindow({
    url:'../MainWindows/shoppingCart.js',
    barColor:'12235b',
    opacity: 1,
    zIndex: 1
});
cartWin.open({modal:true});
})

win.rightNavButton = btnCart; 
```

如果有人知道这个问题或过去曾遇到过这个问题并已解决，请尽快告诉我！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:34:42.030

我在我的应用程序中遇到了类似的崩溃。

我刚刚实现了一个睡眠方法，例如：

```
function sleep(milliseconds)
{
    var start = new Date().getTime();

    while((new Date().getTime() - start) < milliseconds)
    {
        // Do nothing
    }
} 
```

并在打开窗口之前调用它，例如：

```
sleep(1000);
myWin.open(); 
```

# javascript - 充足的 SDK 与 Raphael

> ID：10824969
> 
> 赞同：0
> 
> 时间：2012-05-30T22:09:54.370
> 
> 标签：javascript, charts, svg, raphael

我们正在评估一个用于报告项目的 SVG/VML 库。有没有人有使用 Ample SDK 和 Raphael 的经验并且可以提供输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:57:06.387

这在很大程度上取决于您的需求，因为两者的目标截然不同。

Ample SDK 提供了一个设备齐全的框架，用于处理图形用户界面的几乎所有方面，尤其是 SVG (1.1) 界面。请注意，它目前处于测试阶段（0.9.3），访问[Ample SDK 网站](http://www.amplesdk.com/)后，似乎当前版本不缺少问题。

Raphaël 旨在提供一个用户友好的 API，用于在各种浏览器上处理矢量图形渲染。它在 IMO 方面做得很好，但这是它的唯一目的。它非常成熟（目前是 2.1.0 版）并得到维护（参见[Raphaël github](https://github.com/DmitryBaranovskiy/raphael)）。

如果您正在寻找的只是自定义绘制的形状和 IE 的向后兼容性 - 绝对选择 Raphaël，但如果您需要一个全能、可扩展的解决方案 - 使用 Ample SDK。

*您应该注意到 Raphaël 在较旧的渲染引擎上使用 VML，因此支持 IE 8 和 7，而[Ample 的 SVG 包仅与现代浏览器兼容](http://www.amplesdk.com/about/compatibility/)。*

# c# - 为需要 x64 运行的 .aspx 页面更改平台

> ID：10824971
> 
> 赞同：0
> 
> 时间：2012-05-30T22:10:04.823
> 
> 标签：c#, powershell, exchange-server

我有一个程序用于更改 Exchange 365 的用户密码。为此，我使用了用于 powershell 的 exchange online 模块。为了从我的应用程序中调用这些模块，我必须将其设置为 x64。我正在尝试使用相同的想法将此应用程序的变体放在网站上，以便用户可以从他们的网站更改密码。但是，我没有办法通过 .aspx 页面指定我需要它在哪个架构上。我正在使用 Web 服务在服务器上本地执行操作。

无论如何我可以指定架构或解决此问题的任何方式，以便我可以导入交换模块？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T23:30:59.683

无论如何，脚本将始终在服务器上运行。因此，您始终可以将参数从 UI 发布到服务器端代码。因此，您可以从[服务器端 C# 代码](https://stackoverflow.com/questions/10723264/powershell-c-invoking-a-pipeline-asynchronously-displaying-the-results)中执行导入模块。确保模块[已正确安装在目标系统](https://stackoverflow.com/questions/10501484/powershell-installing-modules-on-target-system)（x86 或 x64）上

# java - 异常处理java..请解释帮助

> ID：10824975
> 
> 赞同：-1
> 
> 时间：2012-05-30T22:10:33.913
> 
> 标签：java

这是异常处理的一个例子吗？

```
try{
  ...
} catch (InterruptedException e) {
  System.out.println("Item "+id+": interrupted!");
} 
```

什么时候可能发生？我的意思是我应该如何触发异常？

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:15:20.897

是的 - 那是异常处理。您已经捕获了异常并在那里对其进行了处理，而不是将其传递回调用树。

如果您想忽略异常（小心）、记录异常或使用附加信息包装异常，您可以这样做。

异常不会像*抛出那样被**触发*- 例如

 *```
if (variable==null){
  throw new NullPointerException("Variable cannot be null!");
} 
```

我建议你看一下[关于异常的 Java 教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T00:30:45.517

这里只是说明你不应该忘记 finally 子句。finally 子句是放置要运行的代码的地方，无论是否抛出和捕获异常（例如，清理代码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T22:16:41.663

异常处理意味着您正在处理在正常执行代码时可能出错的东西。您会注意到某些方法“抛出”异常。这意味着他们会立即告诉您某些事情可能会在那里出错，因此他们会让您在代码中准备如何处理该问题。

一个例子是使用 FileIO 读取/写入文件。在该操作中可能会出现一堆问题（都不是你的错）。文件的路径可能无效，也许操作系统已将其锁定并且当前对您不可用等。因此，您的应用程序不会崩溃，而是尽可能地管理异常并希望继续前进。

您正在处理的 InterruptedException 主要发生在多线程环境中，此时正在等待或休眠或以某种方式暂停的踏板被中断。这完全取决于您要如何处理它。尽管不建议这样做，但在某些情况下会捕获并忽略异常。根据您的用例，您管理异常的方式需要对您的应用有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T22:17:28.220

是的。请注意在尝试/捕获之间保持清晰。当抛出异常时，您应该了解发生的位置和原因。用 try/catch 包围意味着“我正在做一些“冒险”的事情，如果发生错误，这就是原因”。

关于 wiki 的更多内容：[http ://en.wikipedia.org/wiki/Exception_handling](http://en.wikipedia.org/wiki/Exception_handling)*

# shell - 在 Windows 上使用命令提示符运行应用程序

> ID：10824979
> 
> 赞同：0
> 
> 时间：2012-05-30T22:10:41.283
> 
> 标签：shell, command-line, command, vlc

我在 Program Files (x86)/VideoLAN/VLC 中有我的 VLC 媒体播放器。使用命令提示符，如果我 cd 进入该文件夹，我只需键入“vlc”，程序就会运行。

但我希望能够从任何文件夹中输入“vlc”并运行我的 VLC 播放器。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:13:14.623

`\Program Files (x86)\VideoLAN\VLC\vlc.exe`

或`PATH`使用附加的 vlc 路径设置您的环境变量

# python - 使用循环打印副本，Python

> ID：10824983
> 
> 赞同：0
> 
> 时间：2012-05-30T22:10:58.627
> 
> 标签：python, winapi

我有一个简单的 python 脚本，可以在文件夹中打印 pdf。我希望用户能够使脚本打印 pdf 的多个副本。

这是脚本：

```
import arcpy, glob, win32api, os

pdfLoc = arcpy.GetParameterAsText(0)

# Loop through pdf directory and print from pdf
for pdfname in glob.glob(os.path.join(pdfLoc, "*.pdf")):

    fullpath = os.path.join(pdfLoc, pdfname)
    #print filename
    win32api.ShellExecute(0, "print", pdfname, None, ".", 0)

del fullpath
del pdfname
del pdfLoc 
```

我在想一些简单的东西，比如另一个 for 循环来读取副本数并使其循环多次（即，如果用户想要 3 个副本，则循环将读取这个并通过打印循环循环 2 次）

我希望这是有道理的。任何建议表示赞赏。

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T22:21:27.810

这与您想要做的非常接近。此示例从可选的额外命令行参数获取副本数，然后打印每个文档的多个副本：

```
import sys, glob, win32api, os

pdfLoc = sys.argv[1]
try:
    copies = int(sys.argv[2])
except:
    copies = 1

for pdfname in glob.glob(os.path.join(pdfLoc, "*.pdf")):
    fullpath = os.path.join(pdfLoc, pdfname)
    for copy in range(copies):
        win32api.ShellExecute(0, "print", pdfname, None, ".", 0) 
```

# javascript - 使用 JavaScript 自定义确认对话框

> ID：10824984
> 
> 赞同：9
> 
> 时间：2012-05-30T22:10:59.783
> 
> 标签：javascript, jquery, dialog, callback, confirm

我想创建一个类似于`confirm()`显示对话框（带有问题和 2 个按钮的 div）的 JavaScript 函数，并`true`在用户单击“确定”或`false`其他方式时返回。

是否可以使用 JavaScript/jQuery 但**没有**插件（例如 jQuery UI 或 Dialog）来做到这一点？因为我正在尝试减少尺寸和往返时间......

我试图编写这段代码，但我不知道如何让函数“等待”用户点击。

我想以这种方式使用我的功能：

```
answer=myConfirm("Are you sure?") 
```

通过这种方式，我可以在多个上下文中使用相同的函数，只需更改作为参数传递的问题。[这与confirm()](http://www.pageresource.com/jscript/jconfirm.htm)的行为相同

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-30T22:17:09.017

与等待用户输入然后从函数返回不同，在 JavaScript 中更常见的是提供一个回调函数，当您等待的操作完成时将调用该回调函数。例如：

```
myCustomConfirm("Are you sure?", function (confirmed) {
    if (confirmed) {
        // Whatever you need to do if they clicked confirm
    } else {
        // Whatever you need to do if they clicked cancel
    }
}); 
```

这可以按照以下方式实施：

```
function myCustomConfirm(message, callback) {
    var confirmButton, cancelButton;

    // Create user interface, display message, etc.

    confirmButton.onclick = function() { callback(true); };
    cancelButton.onclick = function() { callback(false); };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T22:24:33.053

如果使用 jQuery，为什么不实现[jQueryUI](http://jqueryui.com)呢？并使用[Dialog](http://jqueryui.com/demos/dialog/#modal-confirmation)函数如下：

> 作为 2 部分：

**HTML**

```
<div id="dialog-confirm" title="ALERT">
    <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>Are you sure?</p>
</div> 
```

**脚本**

```
$( "#dialog-confirm" ).dialog({
    resizable: false,
    modal: true,
    buttons: {
        "OK": function() {
            $( this ).dialog( "close" );
        },
        Cancel: function() {
            $( this ).dialog( "close" );
        }
    }
}); 
```

> **全部在脚本中：**

```
$(function() {
    $("<div />").attr("id", "dialog-confirm").append(
        $("<p />").text('Are you sure?').css("text-align", "center").prepend(
            $("<span />").addClass("ui-icon ui-icon-alert").css({
                float: 'left',
                margin: '0 7px 20px 0'
            })
        )
    ).dialog({
        resizable: false,
        modal: true,
        title: "ALERT",
        buttons: {
            "OK": function() {
                answer=1;
                $(this).dialog("close");
            },
            "Cancel": function() {
                answer=0;
                $(this).dialog("close");
            }
        }
    });
}); 
```

## [**jsFiddle**](http://jsfiddle.net/SpYk3/cgepE/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T22:29:42.797

这确实应该通过回调来完成。最接近您所追求的是使用带有一些自定义事件的发布和订阅模型。

为此：

当用户单击是按钮时，触发一个名为 clickedYes 的自定义事件。对“不”做同样的事情

```
$('#yesbtn').click(function(){
    $(document).trigger('clickedYes');
});

$('#nobtn').click(function(){
    $(document).trigger('clickedNo');
}); 
```

现在我们需要“监听”或订阅这些事件并在上下文中执行适当的操作。

**让我们创建一个假设情况**：您的用户单击删除并且您想要确认该选择。

如果他们点击是，首先设置你想要发生的事情：

```
$(document).unbind('clickedYes'); //Unbind any old actions
$(document).bind('clickedYes',function(){
    //Code to delete the item
    //Hide the popup
}); 
```

那么如果他们单击“否”，您希望发生什么：

```
$(document).unbind('clickedNo'); //Unbind any old actions
$(document).bind('clickedNo',function(){
    //Hide the popup and don't delete
}); 
```

所以我们设置了监听 clickedYes 或 clickedNo 的操作。现在我们只需要向用户显示弹出窗口，以便他们必须单击是或否。当他们这样做时，他们将触发上述事件。

因此您的 myConfirm() 函数将执行以下操作：

```
function myConfirm(msg){
    //change the message to 'msg'
    //Show the popup
} 
```

所以顺序是：

1.  将自定义事件的触发器绑定到是和否按钮
2.  在提示之前 - 取消绑定任何旧操作并附加您的新操作
3.  向用户显示一个弹出窗口，使他们触发您的操作。

这将允许您像这样调用函数 myConfirm('Are you sure'); 这不是你所追求的……但我认为不可能完全按照你的意愿去做。

# sql - 删除具有空白列值的行

> ID：10824988
> 
> 赞同：0
> 
> 时间：2012-05-30T22:11:28.220
> 
> 标签：sql

我在 SQL 中有一个人员表，并且我有列：id、lastname、firstname、address、city。一个人的城市是空的，所以我想要一个查询来删除包含具有空白城市列值的人的行。即使没有引发错误，下面的代码也没有这样做。

```
DELETE FROM persons pers
WHERE lastname = 'saire' AND address = 'NULL' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T22:15:43.697

以下 SQL 命令应删除所有城市值为空的记录。试试这个。

```
DELETE FROM persons
where city IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-25T14:31:01.597

```
$q = "DELETE FROM `table_name` WHERE `city` =''"; 
```

# mp3 - sox 在其源重新编译并支持 mp3 后仍然不支持 mp3

> ID：10824990
> 
> 赞同：2
> 
> 时间：2012-05-30T22:11:43.103
> 
> 标签：mp3, centos, sox

我正在尝试在 CentOS 5 上重新编译支持 mp3 的 sox 源代码。注意 sox-12.18.1-1.el5_5.1 已经在我的 CentOS 机器上安装了一段时间。

在[http://techblog.netwater.com/?p=4](http://techblog.netwater.com/?p=4)之后，我使用 yum 安装了以下软件包。

```
yum install gcc-c++ libmad libmad-devel libid3tag libid3tag-devel lame lame-devel  flac-devel libvorbis-devel make 
```

./configure 显示以下内容。

```
BUILD OPTIONS
Debugging build............no
Distro name ...............not specified!
Dynamic loading support....no
Pkg-config location........$(libdir)/pkgconfig
Play and rec symlinks......yes
Symlinks enabled...........yes

OPTIONAL DEVICE DRIVERS
ao (Xiph)..................no
alsa (Linux)...............no
coreaudio (Mac OS X).......no
sndio (OpenBSD)............no
oss........................yes
pulseaudio.................no
sunaudio...................no

OPTIONAL FILE FORMATS
amrnb......................no
amrwb......................no
ffmpeg.....................no
flac.......................yes
gsm........................yes (in-tree)
lpc10......................yes (in-tree)
mp3........................yes
 id3tag....................yes
 lame......................yes
 dlopen lame...............no
 mad.......................yes
 dlopen mad................no
oggvorbis..................yes
sndfile....................no
wavpack....................no

OTHER OPTIONS
ladspa effects.............no
magic support..............yes
png support................no
GOMP support...............yes 
```

但是在执行“make && make install”之后，发出

```
sox test.mp3 tmp1.mp3 reverse 
```

返回

```
sox: Failed reading test.mp3: Do not understand format type: mp3 
```

我在这里想念什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-18T21:41:07.503

我遇到过同样的问题。

确保服务器上没有安装其他 Sox：

```
yum remove sox 
```

下一个：

```
make uninstall
make clean
./configure
make
make install 
```

# c# - 从另一个类获取 GraphicDeviceManager

> ID：10824991
> 
> 赞同：0
> 
> 时间：2012-05-30T22:11:47.183
> 
> 标签：c#, graphics, xna

我一直在寻找一种在不从 Microsoft.Xna.Framework.Game 继承的其他类中使用 GraphicDeviceManager 的方法

我正在使用游戏状态管理示例。

我有一个名为“FirstLevel”的类，它本质上是示例中的 GamePlayScreen，我试图让该类使用 GraphicsDeviceManager 来执行如下代码；

```
 this.graphics.PreferredBackBufferWidth = 1920;
        this.graphics.PreferredBackBufferHeight = 1080; 
```

但它不知道“图形”实际上是什么。

在获取 GraphicsDeviceManager 并在 FirstLevel 类中使用它方面，我有哪些选择？

我不能从 Microsoft.Xna.Framework.Game 继承，因为我的类已经从 GameScreen 继承。

我听说您可以使用 DrawableGameComponent 类来访问 GraphicsDeviceManager，例如从此类继承的类“ScreenManager”。

我不能将 Microsoft.Xna.Framework.Game 传递给 firstLevel 的构造函数，因为调用它的其他类需要让 GraphicsDeviceManager 传递给它。

有帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T00:05:57.513

通常是将游戏实例作为 Game 参数传递给您的 GameScreen 构造函数。

GraphicDeviceManager 用于初始化图形，在游戏中您应该使用游戏实例提供的 GraphicsDevice 实例。

```
public class GameScreen {

    public Game Game;
    public GameScreen(Game game) {
        this.Game = game;
    }   

    public void Update()
    {
       Game.GraphicsDevice....
    }                                
} 
```

# c++ - 来自 shell 的 C++ 输入重定向

> ID：10824992
> 
> 赞同：1
> 
> 时间：2012-05-30T22:11:47.673
> 
> 标签：c++, linux, shell, input, io-redirection

我确信这是一个简单的问题，但是在用 C++ 创建模拟 shell 时，我不太了解项目的一个方面。

基本上，我们正在创建一个名为 myShell 的程序，使用命令“./myShell”调用。这将打开自定义外壳，但我想要做的是直接从带有令牌“-c”的命令调用外部函数。

例如，命令：“./myShell -c ls -l”将调用 linux ls 函数。一旦程序被实际调用，我就可以这样做，但不是在此之前（即打开 ./myShell，然后键入 ls -l"。

我是流程新手，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:25:34.500

你有代码等待用户输入，解释它从用户读取的命令，运行它们，然后在循环中返回等待用户输入，就像这个伪代码：

```
int main(int argc, char *argv[]) {
    bool must_exit = false;
    while (!must_exit) {
        string input = read_user_input();
        must_exit = interpret_and_run(input);
    }
    return 0;
} 
```

修改您的函数以连接`argv`s 并在进入循环之前运行它们：

```
int main(int argc, char *argv[]) {
    bool must_exit = false;
    if (argc > 2 && !strcmp(argv[1], "-c")) {
        string input = concatenate(argv); // From 1 to N, not from 0 to N
        must_exit = interpret_and_run(input);
    }
    while (!must_exit) {
        string input = read_user_input();
        must_exit = interpret_and_run(input);
    }
    return 0;
} 
```

# android - 如何在覆盖的“getView”函数中获取项目在 Android 列表视图中的 y 位置？

> ID：10824993
> 
> 赞同：0
> 
> 时间：2012-05-30T22:11:51.817
> 
> 标签：android, listview, position

我有一个自定义列表，其中我重载了 getView 函数，并且我需要知道正在绘制的当前项目的 y 位置。我需要它与整个列表相关，而不仅仅是屏幕上可见的列表。我怎样才能找到这个？

编辑：项目有不同的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:21:54.190

由于您想要相对于列表顶部的那个（而不是可见屏幕的顶部，您可以使用以下方法计算它：

```
int yPos = view.getHeight() * position; 
```

编辑：不同的高度？这可能会损害性能，因为回收器没有太大帮助。

我不认为这种情况有什么神奇的方法。实际上，您要做的是保留列表位置和 y 偏移量的数组，例如

```
// Item at position 0, top starts at 0, height is 15
pos[0][0] = 0
pos[0][1] = 15

// Next item starts one pixel down from previous item's top, is 10 pixels tall
pos[1][0] = 16
pos[1][1] = 10 
```

只需从 getView 中填充。请注意，此解决方案跟踪每个项目的单个高度以及绝对偏移量 - 因为需要前一个项目的位置 + 高度来确定下一个项目的位置。

# ruby-on-rails - 将关联对象标记为销毁不起作用

> ID：10824994
> 
> 赞同：0
> 
> 时间：2012-05-30T22:11:57.803
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

文档显示这是您标记和关联对象以进行销毁的方式，但它不起作用。怎么来的？

文档位于[http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html) 显示：

```
member.avatar_attributes = { :id => '2', :_destroy => '1' }
member.avatar.marked_for_destruction? # => true
member.save
member.reload.avatar # => nil 
```

我有：

约会.rb

```
class Appointment < ActiveRecord::Base
  belongs_to :time_block
end 
```

时间块.rb

```
class TimeBlock < ActiveRecord::Base
  has_one :appointment
  accepts_nested_attributes_for :appointment, :allow_destroy => :true, 
                                              :reject_if => :all_blank

end 
```

* * *

```
(rdb:144) @time_block.appointment_attributes = {"_destroy"=>"1", "id"=>"48"}

(rdb:144) p @time_block.appointment.marked_for_destruction?
false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-22T03:07:25.453

`mark_for_destruction`仅当您添加`autosave: true`到模型时才有效。

所以改变 time_block.rb 使用：

`has_one :appointment, autosave: 'true'`

有关详细信息，请参阅[https://apidock.com/rails/ActiveRecord/AutosaveAssociation/mark_for_destruction](https://apidock.com/rails/ActiveRecord/AutosaveAssociation/mark_for_destruction)。

> 仅当为此关联模型启用父级上的 :autosave 选项时才有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T23:42:39.597

如果您希望在销毁 TimeBlock 时销毁约会，请包括：

```
has_one :appointment, :dependent => :destroy 
```

有关更多信息，请参阅：[RailsGuides](http://guides.rubyonrails.org/association_basics.html)

# android - 获取 Git Hub 评论

> ID：10824996
> 
> 赞同：0
> 
> 时间：2012-05-30T22:12:06.543
> 
> 标签：android, github, http-get

基本上，我需要从 Git 的 Web API 获取 JSON 数据。伟大的！做过某事。

所以，现在我在一个 android 应用程序中有一个 ListView，每个列表元素都是标题和 json 中的前 140 个字符（jsonObject.getString("title"/"body")）。当用户单击列表元素时，将加载一个包含所有评论的对话框。

所以每个问题（JSONObject）都应该有它自己的评论，实际上我可以在 repo 的 HTML 版本中看到评论。但是，我到底该如何下载 JSON 格式的评论呢？到目前为止，这是原始问题 JSON 对象中的“comments”元素：

```
"comments": 1,
"milestone": null,
"number": 18, 
```

因此，在 android 中做这些事情应该不是什么大问题。我可以检测用户的列表项选择，然后在 JSON 对象中获取任何字符串（我认为 ID 是帮助查找该问题的评论的关键）。但是，我无法弄清楚我应该如何使用 GET 就像它在此页面上的 HTTP 动词 ( [http://developer.github.com/v3/](http://developer.github.com/v3/) ) 下所说的那样，我也无法弄清楚如何使用此页面上获取单个评论 ( [http://developer.github.com/v3/issues/comments/](http://developer.github.com/v3/issues/comments/) ) 下的命令。

最后，我在网页上使用 PHP 脚本来访问原始 JSON。因此，我可以设想这样一种情况，即我运行另一个 PHP 脚本以根据用户所做的列表选择 (getID) 获取评论 JSON，然后根据需要在屏幕上使用它。但是我不能在不知道如何获得评论的情况下做到这一点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:29:20.667

好吧，获取所有问题的网址是这样的

[https://api.github.com/repos/octocat/Hello-World/issues](https://api.github.com/repos/octocat/Hello-World/issues)

如您所见，您将收到问题列表。

之后只需选择问题（假设有 2 条评论的数字 26）并添加到 url “26/comments”

[https://api.github.com/repos/octocat/Hello-World/issues/26/comments](https://api.github.com/repos/octocat/Hello-World/issues/26/comments)

你会有你的评论！