# StackOverflow 问答 11726000-11726999

# asp.net - 如何在 ASP.NET 中使用水平滚动创建 GridView，但前两列是固定的

> ID：11726006
> 
> 赞同：1
> 
> 时间：2012-07-30T16:50:49.910
> 
> 标签：asp.net, gridview

我想创建一个包含 ID、名称和其他 20 列的 Gridview。所以它溢出，我需要使用滚动，但 ID 和名称是固定的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T06:21:37.983

你的意思是你想要固定的标题并冻结一些列？如果是的话，我写的jQuery插件可以做到这一点！

![在此处输入图像描述](../Images/f29e578a691e0a6cccb0203065367b32.png)

看网站： http: [//gridviewscroll.aspcity.idv.tw/](http://gridviewscroll.aspcity.idv.tw/)

支持的浏览器

*   Internet Explorer 7、8（IE 9 兼容性）
*   Internet Explorer 9 (9.0.8112)
*   Windows 7 预览版上的 Internet Explorer 10
*   谷歌浏览器(23.0.1271.64 m)
*   火狐 (16.0.2)
*   苹果 Safari (5.1.7)

# activemq - ActiveMQ 动态队列的名称中有 dynamicQueues

> ID：11726015
> 
> 赞同：2
> 
> 时间：2012-07-30T16:51:34.387
> 
> 标签：activemq, jndi

我正在使用动态队列进行测试，名称为 dynamicQueues/Foo，但在 Web 控制台中，我看到队列名称为 dynamicQueues/Foo 而不仅仅是 Foo。

其他代码（不是我们的）使用相同的 dynamicQueues/Foo 但控制台上的队列名称只是 Foo 所以可以说事情是错位的。

我已按照此处的说明进行操作：http: [//activemq.apache.org/jndi-support.html](http://activemq.apache.org/jndi-support.html)

我对 Web 控制台中报告的队列名称是否应该包含 dynamicQueues 感到困惑——因此很难调试我们的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T23:11:12.730

您应该在控制台窗口中看到 Foo ，是的。

此代码将在**FOO**上生成一条消息，并在 Web 控制台（amq 5.6.0）中将队列显示为 FOO：

```
Properties props = new Properties();
props.setProperty(Context.INITIAL_CONTEXT_FACTORY,"org.apache.activemq.jndi.ActiveMQInitialContextFactory");
props.setProperty(Context.PROVIDER_URL,"tcp://127.0.0.1:61616");
javax.naming.Context ctx = new InitialContext(props);
ConnectionFactory cf = (ConnectionFactory)ctx.lookup("ConnectionFactory");
Connection conn = cf.createConnection();
Destination dest = (Destination)ctx.lookup("dynamicQueues/FOO");
Session s = conn.createSession(false, Session.AUTO_ACKNOWLEDGE);
MessageProducer prod = s.createProducer(dest);
prod.send(s.createTextMessage("Hello, World!")); 
```

您确定您使用 JNDI 来查找队列并且您没有在 jndi.properties 中配置任何内容吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:24:18.810

（我无法回复上面的评论，很抱歉在这里回答。）

这是我的问题（在 scala 中）：

这有效，队列称为 FOO
val destination = JmsConnectionFactory.initialContext.lookup("dynamicQueues/FOO").asInstanceOf[Destination]
val consumer = session.createConsumer(destination)

这不，队列被称为 dynamicQueues/FOO
val queue = session.createQueue("dynamicQueues/FOO")
val consumer = session.createConsumer(queue)

叹息，我想这是有道理的。

# junit4 - 方法时模拟错误

> ID：11726017
> 
> 赞同：0
> 
> 时间：2012-07-30T16:51:42.527
> 
> 标签：junit4, mockito

我只是想存根方法但得到空指针异常。我有点空白这里发生了什么。

我的方法：

```
OauthStatus validate(HttpServletRequest request, 
            boolean accessTokenRequired) throws OauthProviderException; 
```

存根是：

```
Mockito.when(oauthProviderMock.validate((MockHttpServletRequest) Mockito.anyObject(), (boolean)Mockito.anyBoolean())).
                thenReturn(new OauthStatus()); 
```

我看到模拟没有错，但会引发空指针异常。

知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:37:31.720

删除你的演员`(MockHttpServletRequest)`，`(boolean)`所以它看起来像这样

```
Mockito.when(oauthProviderMock.validate(Mockito.any(HttpServletRequest.class), Mockito.anyBoolean())).
        thenReturn(new OauthStatus()); 
```

根据[anyObject API](http://mockito.googlecode.com/svn/branches/1.6/javadoc/org/mockito/Matchers.html#anyObject%28%29)，它将返回`null`，因此您可能会在`NPE`这里看到您的。

根据[anyBoolean API](http://mockito.googlecode.com/svn/branches/1.6/javadoc/org/mockito/Matchers.html#anyBoolean%28%29)，它将返回`false`，因此不需要强制转换。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-31T20:19:37.183

解决方法是通过使用匿名类而不是 Mockito 以编程方式模拟该方法。

前任：

```
 oauthProvider = new OauthProvider(){

      validate( HttpServletRequest req, boolean flag) throws Exception{
           throw new RuntimeException();
       }

 }; 
```

# java - 将字符串拆分为单个单词 Java

> ID：11726023
> 
> 赞同：50
> 
> 时间：2012-07-30T16:52:11.110
> 
> 标签：java

我想知道如何将一个大字符串分成一系列较小的字符串或单词。例如：

> 我想遛狗。

我想要一个 string: `"I"`，另一个 string:`"want"`等。

我该怎么做？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-07-30T16:54:29.857

使用`split()`方法

**例如：**

```
String s = "I want to walk my dog";
String[] arr = s.split(" ");    

for ( String ss : arr) {
    System.out.println(ss);
} 
```

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2015-07-28T11:26:07.923

作为更通用的解决方案（但仅限 ASCII！），在单词之间包含任何其他分隔符（如逗号和分号），我建议：

```
String s = "I want to walk my dog, cat, and tarantula; maybe even my tortoise.";
String[] words = s.split("\\W+"); 
```

正则表达式意味着分隔符将是任何不是单词 [\W] 的内容，至少以一个 [+] 为一组。因为 [+] 是贪婪的，所以它会采用例如 ';' 和 ' ' 一起作为一个分隔符。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2015-01-31T22:12:26.377

正则表达式也可用于拆分单词。

`\w`可用于匹配单词字符 ( `[A-Za-z0-9_]`)，以便从结果中删除标点符号：

```
String s = "I want to walk my dog, and why not?";
Pattern pattern = Pattern.compile("\\w+");
Matcher matcher = pattern.matcher(s);
while (matcher.find()) {
    System.out.println(matcher.group());
} 
```

输出：

```
I
want
to
walk
my
dog
and
why
not 
```

请参阅 Java API 文档以了解[Pattern](http://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-11-04T02:37:19.073

如果您的短语包含重音字符，请参阅我的[其他答案：](https://stackoverflow.com/a/40414384/1431979)

```
String[] listeMots = phrase.split("\\P{L}+"); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-09-10T08:57:12.103

还有另一种方法，使用[StringTokenizer](http://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html)：

```
String s = "I want to walk my dog";
StringTokenizer tokenizer = new StringTokenizer(s);

while(tokenizer.hasMoreTokens()) {
    System.out.println(tokenizer.nextToken());
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-11-20T05:56:17.643

要在单词之间包含任何分隔符（就像除了所有小写和大写字母之外的所有内容），我们可以这样做：

```
String mystring = "hi, there,hi Leo";
String[] arr = mystring.split("[^a-zA-Z]+");
for(int i = 0; i < arr.length; i += 1)
{
     System.out.println(arr[i]);
} 
```

这里的正则表达式意味着分隔符将是任何不是大写或小写字母`[^a-zA-Z]`的，至少一个 [+] 为一组。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-07-19T17:54:35.593

您可以使用该类`split(" ")`的方法，`String`并且可以获得每个单词，如下所示：

```
String s = "I want to walk my dog";
String []strArray=s.split(" ");
for(int i=0; i<strArray.length;i++) {
     System.out.println(strArray[i]);
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-30T16:53:25.163

采用[`split()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)

```
String words[] = stringInstance.split(" "); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-04-24T12:32:05.320

你可以使用 Apache commons 的 StringUtils 类

```
String[] partsOfString = StringUtils.split("I want to walk my dog", StringUtils.SPACE) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-05-19T10:28:35.987

此正则表达式将按空格分割单词，如空格、制表符、换行符：

```
String[] str = s.split("\\s+"); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-07-29T17:50:24.573

```
StringTokenizer separate = new StringTokenizer(s, " ");
String word = separate.nextToken();
System.out.println(word); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-06-22T06:42:07.573

***Java String split() 方法示例***

```
 public class SplitExample{  
        public static void main(String args[]){  
            String str="java string split method";  
            String[] words=str.split("\\s");//splits the string based on whitespace  

            for(String word:words){  
                System.out.println(word);  
            }  
        }
    } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-08-04T14:28:47.067

```
class test{

    public static void main(String[] args){
                StringTokenizer st= new StringTokenizer("I want to walk my dog.");

                while (st.hasMoreTokens())
                    System.out.println(st.nextToken());

            }
        } 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2019-01-21T17:18:06.127

```
String[] str = s.split("[^a-zA-Z]+"); 
```

# java - 在Java中将格式化字符串转换为HTML

> ID：11726030
> 
> 赞同：-1
> 
> 时间：2012-07-30T16:52:51.417
> 
> 标签：java, html

我正在发布带有空格的消息（使用 计算`string.format`）并尝试按原样显示在 HTML 中。但未能如愿。

代码：

```
final String format = "|%1$-35s|%2$-20s|%3$-30s|%4$-20s|\n";
str = String.format(format,currentInputTag,currentInputVal,currentOutTag,currentOutVal)
str.replaceAll(" ", "&nbsp;"); 
```

字符串输出（我希望它的样子）：

```
|Input tag                          |Value               |Output tag                    |Value               |
|FlightLegReportedUtcDatetime       |2012-07-25T01:54:00 |ns3:EstOffGroundDateTime      |2012-07-25T01:54:00 | 
```

但我得到： ![在此处输入图像描述](../Images/f3c11f3177fddf7df035b65749298a6e.png)

HTML：

标签|输入标签 |值 |输出标签 |值 |/标签
标签|FlightLegReportedUtcDatetime |2012-07-25T01:54:00 |ns3:EstOffGroundDateTime |2012-07-25T01:54:00 |/标签

我不确定，即使空格数正确，我也会看到如上所示的输出。顺便说一句，删除 <> 以显示标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:03:06.410

您可以编辑代码并将输出包装到`<pre></pre>`这将带来有效的 html 和（如果未定义不同）固定宽度的字体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:57:15.673

如果您希望它是理想的，而不需要繁琐的计算空格，请将每一列括在表格单元格中。

如果您不同意表格并希望根据空间计数确定显示偶数列，则使用等宽字体并指定空格中的最大列大小。

# actionscript-3 - AS3 将变量参数传递给通用功能菜单/子项

> ID：11726043
> 
> 赞同：3
> 
> 时间：2012-07-30T16:53:45.447
> 
> 标签：actionscript-3, events, variables, drop-down-menu, parameter-passing

我不是代码天才，而是动作脚本的粉丝。你能帮我解决这个问题吗：

我有一个函数，根据选择的对象，将事件侦听器调用到已经在舞台上的一组“子项目”（我想在单击时重用这些更改参数的子项目，而不是创建几个实例和几个代码）。

因此，对于每个选定的“案例”，我必须将不同的变量传递给那些“子项目”，如下所示：

```
function fooMenu(event:MouseEvent):void {
    switch (event.currentTarget.name)
    {
        case "btUa1" :
            trace(event.currentTarget.name);
            // a bunch of code goes here
            //(just cleaned to easy the view)
            /*
            HELP HERE <--
            here is a way to pass the variables to those subitems
            */

            break;
    }
}

function fooSub(event:MouseEvent):void
{
    trace(event.target.data);
    trace(event.currentTarget.name);
    // HELP PLEASE <-> How can I access the variables that I need here ?
}

btUa1.addEventListener(MouseEvent.CLICK, fooMenu);
btUa2.addEventListener(MouseEvent.CLICK, fooMenu);

btTextos.addEventListener(MouseEvent.CLICK, fooSub);
btLegislacao.addEventListener(MouseEvent.CLICK, fooSub); 
```

有人帮我吗？非常感谢提前。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:12:41.203

（我不确定我的问题是否正确，而且我已经有一段时间没有在 AS3 中开发了。）

如果您想简单地创建带有将在单击（或其他事件）时调用的参数的函数，您可以简单地使用它：

```
btUa1.addEventListener(MouseEvent.CLICK, function() {
  fooMenu(parameters);
});

btUa2.addEventListener(MouseEvent.CLICK, function() {
  fooMenu(other_parameters)
}):

public function fooMenu(...rest):void {
  for(var i:uint = 0; i < rest.length; i++)
  {
     // creating elements
  }
} 
```

如果你想调用分配给其他东西的事件监听器，你可以使用 DispatchEvent

```
btnTextos.dispatchEvent(new MouseEvent(MouseEvent.CLICK)) 
```

* * *

请记住，您不能使用 btTextos.addEventListener(MouseEvent.CLICK, carregaConteudo("jocasta")); 因为您在添加 Eventlistener 时传递的第二个参数将被视为函数本身 - 有两种使用 addEventListener 的正确方法：

1：

```
function doSomething(event:MouseEvent):void
{
  // function code
}
element.addEventListener(MouseEvent.CLICK, doSomething); //notice no brackets 
```

2：

```
element.addEventListener(MouseEvent.CLICK, function() { // function code }); 
```

所以：

```
function fooSub(event:MouseEvent, bla:String):void 
{ 
trace(event.currentTarget.name+" - "+bla); 
// bla would be a clip name. 
} 

codebtTextos.addEventListener(MouseEvent.CLICK, function(e:MouseEvent) { fooSub(e, "jocasta") } ); 
```

* * *

如果您希望动态生成内容，或者尝试这样的操作：

```
btUa1.addEventListener(MouseEvent.CLICK, function() {
    createMenu(1);
});

btUa2.addEventListener(MouseEvent.CLICK, function() {
    createMenu(2);
});

function createMenu(id):void
{
    // Switching submenu elements
    switch (id)
    {
        case 1:
            createSubmenu([myFunc1, myFunc2, myFunc3]); // dynamically creating submenus in case you need more of them than u already have
            break;
        case 2:
            createSubmenu([myFunc4, myFunc5, myFunc6, myFunc7]);
            break;
        default:
            [ and so on ..]
    }
}

function createSubmenu(...rest):void {
    for (var i:uint = 0; i < rest.length; i++) 
    {
        var mc:SubItem = new SubItem(); // Subitem should be an MovieClip in library exported for ActionScript
        mc.addEventListener(MouseEvent.CLICK, rest[i] as function)
        mc.x = i * 100;
        mc.y = 0;
        this.addChild(mc);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:15:28.083

您的问题相当模糊；你想“通过”什么“变量”？“将变量传递给子项”是什么意思？通常“通过”意味着调用一个函数。

如果您可以更具体地说明您尝试做的事情，那将会有所帮助。与此同时，这里有三件事可能会得到你想要的：

您可以使用括号表示法获取任何对象的任何成员。

```
var mc:MovieClip = someMovieClip;  
var xVal:Number = mc.x;     // The obvious way
xVal = mc["x"];             // This works too
var propName:String = "x";
xVal = mc[propName] ;       // So does this. 
```

您可以使用变量引用函数

```
function echo(message:String):void { 
    trace(message); 
}
echo("Hello");                      // The normal way
var f:Function = echo; 
f("Hello");                         // This also works 
```

您可以使用 function.apply 调用具有数组中所有参数的函数

```
// Extending the above example...
var fArgs:Array = ["Hello"];
f.apply(fArgs);    // This does the same thing 
```

在这三件事之间（以及`rest`另一张海报提到的参数），您可以编写一些非常灵活的代码。动态代码肯定是以性能为代价的，但只要调用频率为每秒几百次或更少，您就永远不会注意到差异。

# php - 使用 PHPUnit 和半永久数据库进行单元测试

> ID：11726045
> 
> 赞同：3
> 
> 时间：2012-07-30T16:53:49.613
> 
> 标签：php, phpunit

我是单元测试的新手，我正在尝试在我正在处理的现有项目中开始使用 PHPUnit。

我面临的问题是我有很多单元测试需要一个足够公平的数据库。我已经建立了一个 SQLite 数据库，仅用于单元测试。有时我想为新测试删除并重新创建数据库（我指的是每个单独的类），以防止不必要的数据冲突。

但是，如果我在同一个类中有相互依赖的单元测试，有时我不希望这种情况发生；这些可能需要访问在先前测试中保存的数据。

我目前在每个类的 setUp() 函数中都获得了一个“新鲜”的数据库。我没想到的是这个函数（与 __construct() 一样）会在所述类中的每个测试用例之后运行。

有没有办法可以用每个测试类刷新数据库？还是我对整个过程的处理不正确？

任何提示表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:41:21.813

我最近（大约一年前）也开始使用 PHPUnit。我做的第一件事是为我当时正在从事的项目设置单元测试。我认为测试数据访问层也是一个好主意，并为您做了类似的事情。我花了几天的时间来设置，最后我完成了需要 8 分钟才能运行的单元测试！99% 的时间都花在了设置和拆除测试数据库上。这悲剧！

我所做的是重构项目，这样实际上只有一个类需要与数据库对话，并为此进行了集成测试，但没有单元测试。这意味着我的项目现在必须使用依赖注入来促进测试。我最终得到了一套大约在 2-3 秒内运行的测试和一个几乎可以自己编写的项目。维护和进行更改/添加是一个梦想，我希望我所有的代码都是这样编写的。

基本上，我想说的是，您应该将代码更改为易于测试，而不是尝试强制单元测试以适应并非以测试驱动方式设计的代码。您现在投资的时间（如果可以的话）将在以后用红利偿还！

**咬紧牙关，现在重构！**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T17:11:23.977

setUp 和 tearDown 功能完全按照您提到的方式进行，即为每次测试执行设置测试环境，然后在每次测试用例执行后进行清理。

您可能想要做的是在套件级别设置数据库数据提供程序。

[套房级固定装置](http://www.phpunit.de/manual/3.0/en/fixtures.html#fixtures.suite-level-setup)

这可能不是真正获得真正独立单元测试的最佳方法（即，您可以为 DB 等设置模拟数据提供程序）。但这是你可以做的事情，应该满足你的直接需求。

# css - 每个盒子都有不同的背景？

> ID：11726046
> 
> 赞同：0
> 
> 时间：2012-07-30T16:46:18.960
> 
> 标签：css

我尝试更改`<td>`标签内每个框的图像背景，但是当我尝试更改其中一个背景时，我获得了所有框的相同背景。但这不是我想要的。
这是页面的方面： ![在此处输入图像描述](../Images/4335e78d69c6b6bcf7bfac4474593343.png)

`CSS`我使用的盒子是这样的：

```
<style type='text/css'>
div.myautoscroll {
    height: 80ex;
    width: auto;
    background: white;
    background-image: url(cieloprato.jpg);
    overflow: hidden;
    border: 1px solid #444;
    margin: 1em;
}
div.myautoscroll:hover {
    overflow: auto;
}
div.myautoscroll p {
    padding-right: 16px;
}
div.myautoscroll:hover p {
    padding-right: 0px;
}
</style> 
```

我尝试为每个`<div>`元素添加唯一标识符或类，并通过**CSS**中的选择器获取它，但出现了问题。

我想更改第二个背景，但如果我尝试更改它，`css`也会更改我的第一个背景。您可以看到两个框的背景是相同的`cieloprato.jpg`。我想为第二个或第三个盒子插入另一个背景。
如何修改**CSS代码**？
[这是我的 HTML 页面](http://nathan3000.altervista.org/My_Site/DataTables-1.9.2/examples/basic_init/tabella%20con%20scrollbar%20e%20pagination%20-%20ma%20da%20sistemare.html#)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:07:09.127

是的，为所有 div.myautoscroll 设置了背景图像（您会看到相同的图像）。您可以（例如）在为每个 div.myautoscroll 生成表期间添加“#myautoscroll_1”、“#myautoscroll_2”...“#myautoscroll_n”。并添加css代码：

```
#myautoscroll_1 {
   background-image: url(image_1.jpg);
}

#myautoscroll_2 {
   background-image: url(image_2.jpg);
}

#myautoscroll_n {
   background-image: url(image_n.jpg);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:10:02.917

或者，CSS 允许您通过[:nth-child()](http://www.w3schools.com/cssref/sel_nth-child.asp)伪类按（基于一的）索引选择元素，因此您可以执行以下操作：

```
div.myautoscroll{ /*Generic formatting for all your boxes*/
    height: 80ex;
    width: auto;
    background: white;
    overflow: hidden;
    border: 1px solid #444;
    margin: 1em;
}
#example tr:nth-child(1) div.myautoscroll{
    /* Selects all boxes in the first row of your table,
       you can use :first-child here too */
    background-image: url(cieloprato.jpg); /* This, or any other image */ }
#example tr:nth-child(2) div.myautoscroll{
    /* Selects all boxes in the second row of your table. */
    background-image: url(some_other_image.jpg); /* The image for the second box */ }
#example tr:nth-child(3) div.myautoscroll{
    /* Same as above, just for the third row */
    background-image: url(yet_another_image.jpg); /* Third image */ }
div.myautoscroll:hover {
    overflow: auto;
}
div.myautoscroll p {
    padding-right: 16px;
}
div.myautoscroll:hover p {
    padding-right: 0px;
} 
```

# mysql - 使用 MySQL 搜索的问题

> ID：11726048
> 
> 赞同：0
> 
> 时间：2012-07-30T16:54:05.150
> 
> 标签：mysql

我对 MySQL 有疑问，我正在构建一个搜索表单，用户将能够在其中搜索产品，从 MySQL 表的两列中搜索术语。我有“Modelo”栏和“Concepto”栏。当我尝试搜索您可以在“Concepto”中找到的值时，它运行良好，但当该值在“Modelo”中时，它运行不佳。

这是语法：

```
SELECT * FROM hoja1
WHERE Concepto LIKE '%$buscar%' or
  Modelo LIKE '%$buscar%'
LIMIT $inicio, $TAMANO_PAGINA 
```

例如，我在 Modelo 列上有这个值

```
8345GS
FLEX AUT 1 
```

如果我搜索 8354GS 它不起作用，屏幕上不会出现任何内容。但如果我发现只有`GS`表格可以找到价值。与“FLEX AUT 1”相同，当我搜索`FLEX AUT 1`它时似乎什么也没有，但`FLEX`没有问题。事实上，我的代码无法搜索`Modelo`列上的整个值。但是当我在表格上搜索值时没有问题`Concepto`

对不起我的英语不好。我希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:22:28.367

第一条记录是#0，所以请确保您`$inicio`从 0 开始，而不是 1。

# c# - 如何选择 xyz 空间中radius 中的所有项目？

> ID：11726051
> 
> 赞同：3
> 
> 时间：2012-07-30T16:54:16.307
> 
> 标签：c#, .net, linq

所以我有一个`List`of `string`s 格式像`{itemname}-{x}-{y}-{z}`( `x`, `y`, `z`are `typeof(int)`)。`xyz`我在 3d空间中有一点。从我的观点来看，我想使用 LINQ 获取所有`List`在一些半径`R`( ) 中的项目。`typeof(int)`如何用 LINQ 做这样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T17:00:51.327

我会把它分成两个任务：

*   将字符串解析为更有用的格式
*   按距离过滤

因此，您的查询将类似于：

```
var query = values.Select(text => ItemPoint.Parse(text))
                  .Where(item => item.DistanceFrom(point) < radius); 
```

（如果您确实需要返回文本表单，您可以在解析时将其存储在项目中，然后再进行`Select`调用。）

现在你已经有了很容易分离的方法来编写：`ItemPoint.Parse(string)`和`ItemPoint.DistanceFrom(Point)`. 如果您对其中任何一种方法有*疑问*，请创建另一个提供更多详细信息的问题，但 LINQ 可能无关紧要。

（对于解析部分，您可能需要考虑使用`string.Split`.）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:01:19.997

这是 LINQ 的相关部分：

```
// List of strings formated like {itemname}-{x}-{y}-{z}
List<string> test = new List<string>
{
    "name1-1-1-2",
    "name2-0-1-2",
    "name3-0-0-3"
};

var res = test
    .Select(tmp =>
        {
            string[] items = tmp.Split('-');
            return new
                {
                    x = int.Parse(items[1]),
                    y = int.Parse(items[2]),
                    z = int.Parse(items[3])
                };
        })
    .Where(tmp => (tmp.x + tmp.y + tmp.z) < 4)  // Insert the right math formula here.
    .ToList(); 
```

对于实际的数学公式，只需 google 或搜索它：[Algorithm for calculate a distance between 2 3-dimensional points?](https://stackoverflow.com/questions/8914669/algorithm-for-calculating-a-distance-between-2-3-dimensional-points)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T17:08:09.970

这是一个示例，说明如何通过构造匿名类型的实例来分组坐标和未解析的值直到`Where`子句，然后切断坐标以获取未解析的值。

```
var itemPoints = new List<string> {
    "quick-1-2-3"
,   "brown-11-22-13"
,   "fox-10-42-33"
,   "jumps-19-23-31"
};
int x0=2, y0=1, z0=0, rSquare = 25;
var itemNames = itemPoints.Select(
    s => {
        var tt = s.Split('-');
        return new {
            Unparsed = s
        ,   x = int.Parse(tt[1])
        ,   y = int.Parse(tt[2])
        ,   z = int.Parse(tt[3])
        };
    }
).Where(p => (p.x-x0)*(p.x-x0)+(p.y-y0)*(p.y-y0)+(p.z-z0)*(p.z-z0) < rSquare)
.Select(p => p.Unparsed)
.ToList(); 
```

[距离公式对笛卡尔距离公式](http://en.wikipedia.org/wiki/Cartesian_coordinate_system#Distance_between_two_points)的两边进行平方，以避免取平方根的成本。

# asp.net - MSDeploy 包缺少文件

> ID：11726052
> 
> 赞同：3
> 
> 时间：2012-07-30T16:54:24.647
> 
> 标签：asp.net, msbuild, webdeploy, microsoft-web-deploy

我正在使用 MSBuild 构建一个 Web 应用程序项目并添加参数来创建包文件。这一切都很好。`_PublishedWebSites`我在输出中得到两个文件夹：

```
AppName
AppName_Package 
```

在`ApplicationName`文件夹中，整个网站都在那里，我可以简单地将这个文件夹复制到网站上，它就会运行。

在 Package 文件夹中，我得到了预期的 5 个文件：

```
AppName.deploy.cmd
AppName.-readme.txt
AppName.SetParameters.xml
AppName.SourceManifest.xml
AppName.zip 
```

但是，在部署包时，`AppName.dll`缺少 Web 应用程序 dll ( ) 以及其他一些重要的引用依赖项。

检查包本身确实会发现这些文件实际上已从 Web 应用程序`bin`目录中丢失。

这很奇怪，考虑到文件都在根`AppName`文件夹中，而不是在`AppName_Package`文件夹中找到的包中。

我所做的唯一与 MSDeploy 相关的修改是我正在覆盖`CopyAllFilesToSingleFolderForPackageDependsOn`目标以从库项目中复制一些处理程序，这一切都很好。

```
<PropertyGroup>
    <CopyAllFilesToSingleFolderForPackageDependsOn>
        CustomCollectFiles;
        $(CopyAllFilesToSingleFolderForPackageDependsOn);
    </CopyAllFilesToSingleFolderForPackageDependsOn>
</PropertyGroup>
<Target Name="CustomCollectFiles">
    <ItemGroup>
        <_CustomFiles Include="..\Libraries\CodeLibrary1\**\*.ashx" />
        <FilesForPackagingFromProject  Include="%(_CustomFiles.Identity)">
            <DestinationRelativePath>$(ProjectDir)%(RecursiveDir)%(Filename)%(Extension)</DestinationRelativePath>
        </FilesForPackagingFromProject>
    </ItemGroup>
</Target> 
```

因此，我无法确定为什么 Web 应用程序的 DLL，并且`bin`在包创建过程中仅从目录中删除了一些其他（引用的）DLL（但不是全部 - 可能是 3%）。

任何想法我应该在日志文件中寻找什么？

**编辑：（**对赛义德的回应）：

我真的很感谢你回答我的帖子。不幸的是，我不确定我们是否在同一页面上。就像我说的，我可能没有很好地解释我的问题，无法真正让其他人了解我的问题到底是什么。让我再次尝试澄清一下

将外部文件复制到我的 Web 应用程序中不是问题。我知道浏览我的帖子并看到非常常见的“CopyAllFilesToSingleFolderForPackageDependsOn”元素会引发一些危险信号、警报、铃声和口哨声。。这似乎是人们正在努力解决的一个常见问题，正如您所指出的，它的执行存在一些问题。这对我来说没问题。

我的问题更多地与项目引用的 DLL 有关，最重要的是应用程序 DLL 本身没有被复制。

今天更多的调整揭示了一些我不知道的事情。例如：

在 TFS 上启动构建会输出几件事：

1.  来自 TFS 的源输出到源目录 (SourceDir)

    *   这仅包含签入 TFS 的输出
    *   这不包括项目或文件引用，只包括在 TFS 中提交的内容
2.  构建的输出在两个文件夹中

    *   二进制文件（包括项目和文件引用）
    *   来源（仅限 TFS 中包含/提交的内容）

在 Binaries 中，我找到了 _publishedWebsites 文件夹，以及所有项目和文件引用，而在 Sources 中，只有检入 TFS 的文件。

我的问题或困惑是认为当我将以下参数传递给 MSBuild Arguments 时，它将获取构建 (_PublishedWebsites) 的输出并使用这些文件来创建包。它不这样做。

实际过程基于 SOURCES 文件夹中的文件构建一个包。所以，这是我的困境/困惑，因为我没有将我的应用程序 dll 提交到源代码中，它没有包含在包中，因此没有被发送到测试服务器上的测试站点。

```
/p:DeployOnBuild=True /p:DeployTarget=MsDeployPublish /p:CreatePackageOnPublish=True /p:MSDeployPublishMethod=RemoteAgent /p:MSDeployServiceUrl=http://<mytestsite> /p:DeployIisAppPath="<AppName>" /p:UserName=<domain\user> /p:Password=<mypassword> /p:SkipExtraFilesOnServer=false /p:AllowUntrustedCertificate=True 
```

总结一下，一旦我在我的开发机器上“签出以进行编辑”我的应用程序 DLL，他们编译解决方案，最后将应用程序 DLL 提交到源代码控制，然后它被包含在包中，因为它只是作为另一个包含在包中源项。

所以，我想这是我的错，因为我不了解如何将 TFS BUILD 的输出放入源文件夹，并将其包含到 msdeploy 使用的包中。

可能有一些非常基本的东西我错过或只是略过 - 并且不理解，包创建来自 Sources 文件夹而不是 _PublishedWebsites 文件夹。我也不明白如何将 MSBuild 编译的应用程序 dll 和项​​目引用的 dll 放入我的包中——替换源代码控制中已提交的源项目。

我希望这不会完全浪费你的时间，因为我错过了一个

```
source=<some-parameter> 
```

某处。
我很感激你可以指导我找到任何现有的资源，这些资源已经解释了我应该能够理解它并让它工作的地方。或者如果在这里告诉我很容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T17:45:34.403

这里的问题是 CopyAllFilesToSingleFolderForPackage 目标本身没有被 VS2012 目标调用。我们做了很多改变，这可能是我们这边的倒退。我会调查一下，看看是否有什么我们可以做的。幸运的是，更新它以获得您正在寻找的行为应该非常简单。而不是使用 CopyAllFilesToSingleFolderForPackageDependsOn 您应该能够使用 PipelineCollectFilesPhaseDependsOn 作为替代方案。您应该能够将上面的内容更改为

```
<PropertyGroup>
    <PipelineCollectFilesPhaseDependsOn>
      CustomCollectFiles;
      $(PipelineCollectFilesPhaseDependsOn);
      </PipelineCollectFilesPhaseDependsOn>    
</PropertyGroup>

<Target Name="CustomCollectFiles">
    <Message Text="Inside of CustomCollectFiles" Importance="high"/>
    <ItemGroup>
      <_CustomFiles Include="C:\Temp\_NET\WAP-AfterPublish\MvcApplication1\additional files\**\*" />

      <FilesForPackagingFromProject  Include="%(_CustomFiles.Identity)">
        <DestinationRelativePath>additional files\%(RecursiveDir)%(Filename)%(Extension)</DestinationRelativePath>
      </FilesForPackagingFromProject>
    </ItemGroup>
</Target> 
```

我刚刚对 VS2012 和 VS2010 都进行了尝试，所以这似乎比 CopyAllFilesToSingleFolderForPackageDependsOn 方法更好。你能试试看，让我知道你发现了什么吗？

# javascript - 使用 JavaScript 将日期/时间添加到我的 asp.net 用户控件

> ID：11726057
> 
> 赞同：0
> 
> 时间：2012-07-30T16:54:32.260
> 
> 标签：javascript, asp.net, vb.net

我有一个用户控件，我在其中获取服务器时间并使用 AJAX 计时器每秒更新一次。这非常慢，有人告诉我最好在客户端执行此操作。

所以我想出了这个......但它不起作用。有什么建议么？

```
 <%@ Control Language="VB" AutoEventWireup="false" CodeFile="DateTime.ascx.vb" Inherits="UserControls_WebUserControl" %>

<script type="text/javascript">
    window.onload = function () {
        getDate();
    };

    function getDate() {
        var dt = new Date();
        var element = document.getElementById("client_time");

        element.text = dt.toDateString();
    }

</script>
   <form name="headerForm">
   <asp:Table Width="100%" ID="formatTable" runat="server">
            <asp:TableRow>
                <asp:TableCell ColumnSpan="2">
                    <asp:Image ImageUrl="~/Logo.jpg" ID="Image1" runat="server" />
                </asp:TableCell>
                <asp:TableCell>
                    <input type="text" size="10" maxlength="10" value="" name="client_time"  />

                </asp:TableCell>

            </asp:TableRow>
        </asp:Table>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:44:13.507

您已填写`name`元素的字段，但缺少通过`getElementById`. 另外，`.text`不会做任何事情，你需要设置它的`value`属性。

`innerHTML`由于您的输入限制为 10 个字符，您可以尝试删除它以显示完整的日期字符串，或者您可以简单地使用或某些此类方法写入表格单元格。

To get time in a human readable format you can take a look at: [http://www.quackit.com/javascript/tutorial/javascript_date_and_time.cfm](http://www.quackit.com/javascript/tutorial/javascript_date_and_time.cfm)

# jsf - h:selectOneMenu 绑定到 int 错误“验证错误：值无效”

> ID：11726059
> 
> 赞同：3
> 
> 时间：2012-07-30T16:54:50.057
> 
> 标签：jsf, integer, selectonemenu, jsf-1.1

我坚持使用 JSF RI 1.1_02 并看到这个问题。

这是我期望工作的 Facelet 代码：

```
<h:form>
    <h:selectOneMenu value="#{bean.num}" converter="javax.faces.Integer">
        <f:selectItem itemLabel="one"   itemValue="1" />
        <f:selectItem itemLabel="two"   itemValue="2" />
        <f:selectItem itemLabel="three" itemValue="3" />
    </h:selectOneMenu>
    <h:commandButton value="submit" />
    <h:messages />
</h:form> 
```

请求范围的bean：

```
public class Bean {
    private int num;

    public void setNum(Integer aNum) {
        num = aNum;
    }

    public Integer getNum() {
        return num;
    }
} 
```

我收到[Validation Error: Value is not valid](https://stackoverflow.com/questions/9069379/validation-error-value-is-not-valid)并且无法想象当我编写了这么少不需要任何转换器的代码时我做错了什么。我是否遗漏了一些明显的东西，或者这是 JSF RI 1.1_02 中的错误？

我可以通过简单地将支持 bean 中的属性类型更改为来解决这个问题，`String`但是当（自动）转换应该为我提供时，我不得不这样做而感到沮丧。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T20:00:52.803

我花时间创建了一个 JSF RI 1.1_02 操场环境，并且能够重现您的问题。检查源代码后，罪魁祸首似乎`<f:selectItem>`从未将值转换为与提交值相同的类型。所以基本上它是将项目值`String`与提交的值进行比较，`Integer`并且这种比较永远不会返回`true`。

这是一个非常尴尬的错误，在技术上只能通过替换`UISelectOne`组件来解决（`UISelectMany`顺便暴露了相同的错误）。问题出在私有`matchValue()`方法中。自定义转换器（我最初想到的一个解决方案）不会以任何方式提供帮助，因为它根本不会被调用以获取`<f:selectItem>`值。

升级到[Mojarra 1.2_15](http://javaserverfaces.java.net/)立即解决了这个问题。

* * *

**更新**：如果你真的，*真的*，不能升级，我找到了一个利用 EL 强制的解决方法：如果你引用 EL 中的值而不是静态字符串，那么它们被隐式处理为`Long`. 如果您将属性类型从 更改`Integer`为`Long`，那么它可以在没有任何转换器的情况下工作。

```
<h:selectOneMenu value="#{bean.num}">
    <f:selectItem itemLabel="one"   itemValue="#{1}" />
    <f:selectItem itemLabel="two"   itemValue="#{2}" />
    <f:selectItem itemLabel="three" itemValue="#{3}" />
</h:selectOneMenu> 
```

和

```
private Long num; 
```

# java - 使用 JNI 从 C 启动 Java 主方法会导致 OpenGL 错误

> ID：11726062
> 
> 赞同：0
> 
> 时间：2012-07-30T16:55:15.227
> 
> 标签：java, c, java-native-interface, jogl

我正在用 Java 创建一个程序，它将与 C 库接口以从硬件获取图像并使用 OpenGL（使用 JOGL）显示。所以工作流程是这样的：

`Hardware -> C -> disk image file -> Java -> JOGL`

我的`Java -> JOGL`部分工作正常。图像完全显示，我可以一次加载多个图像。我也有`Hardware -> C`工作，C 中的一个临时查看器显示图像创建得很好。

问题的症结在于：我希望能够`main()`在 C 中启动 Java 程序的方法，然后仅使用 C 中的 JNI 代码显示图像（使用我创建的静态方法）。但是，当我这样做时，图像会被截断，我只能得到前 20 行左右。我知道我正在加载整个图像，因为我可以检查图像中每个像素的像素值。只有显示被截断。我加载的每张图像都显示相同数量的像素。

简而言之，这是 C 代码：

```
int main () { ...
    HMODULE * jvm_dll;

    //HWND hWnd = GetConsoleWindow();
    //ShowWindow( hWnd, SW_HIDE );

    env = create_vm(&jvm, jvm_dll);

    if (env == NULL) { return 1; }

    //Create a new String array with one blank String
    cls = (*env)->FindClass(env,"java/lang/String");
    arg = (*env)->NewStringUTF(env,"");
    args = (jobjectArray)(*env)->NewObjectArray(env, 1, cls, arg);

    //Call the main method with the String array argument
    cls = (*env)->FindClass(env, "path/to/package/program");
    mID = (*env)->GetStaticMethodID(env, cls, "main", "([Ljava/lang/String;)V");
    (*env)->CallStaticVoidMethod(env, cls, mID, args);

    PrintStackTrace(env);

    blockAndClose(jvm, env, jvm_dll);

    return ret;
}

int blockAndClose() {...
    int ret = 0;

    if (jvm == 0 || env == 0) {
        FreeLibrary(*jvm_dll);
        return 1;
    }

    ret = (*jvm)->DestroyJavaVM(jvm);
    if(jvm_dll) {
        FreeLibrary(*jvm_dll);
        jvm_dll = 0;
    }

    env = 0;
    jvm = 0;

    return ret;
} 
```

我知道我只发布了 C 部分，但是当我纯粹在 Java 中运行 Java 部分时它正在工作。在这一点上，C 部分只是一个“启动器”，所以我想知道为什么它会影响代码的运行。有什么建议么？

**编辑：**

这是加载图像的代码。我使用 JAI 将图像作为`PlanarImage`类型加载（`TiledImage`类是子类）。

```
tempI = JAI.create("fileload", path);

DataBufferUShort dbOut = null;
ColorModel CM = PlanarImage.getDefaultColorModel(DataBuffer.TYPE_USHORT, tempI.getNumBands());
SampleModel SM = CM.createCompatibleSampleModel(tempI.getWidth(), tempI.getHeight());

//Ensure that the buffer is in the internal format (USHORT)
if (tempI.getData().getDataBuffer().getDataType() != DataBuffer.TYPE_USHORT) {
    DataBuffer dBIn = tempI.getData().getDataBuffer();

    short [] dBPixels = new short[dBIn.getSize()];

    switch(dBIn.getDataType()) {
        case DataBuffer.TYPE_BYTE:
        DataBufferByte dBByte = (DataBufferByte)dBIn;
        byte [] pByte = dBByte.getData();
        for (int b = 0; b < pByte.length; b++)
        { dBPixels[b] = (short)((double)pByte[b] / 0xFF * 0xFFFF); }
        dbOut = new DataBufferUShort(dBPixels, dBPixels.length);
        break;
        case DataBuffer.TYPE_SHORT:
        DataBufferShort dBShort = (DataBufferShort)dBIn;
        dBPixels = dBShort.getData();
        dbOut = new DataBufferUShort(dBPixels, dBPixels.length);
        break;
    } //SWITCH DATA TYPE --END

    WritableRaster rs = Raster.createWritableRaster(SM, dbOut, new Point(0,0));
    tempI = new TiledImage(0,0,tempI.getWidth(),tempI.getHeight(),0,0,SM,CM);
    ((TiledImage)tempI).setData(rs);
} 
```

# asp.net-mvc - MVC.NET 空文本

> ID：11726064
> 
> 赞同：1
> 
> 时间：2012-07-30T16:55:23.607
> 
> 标签：asp.net-mvc, text, textbox

MVC 中是否有任何方法可以为文本字段指定“空文本”？

空文本通常是文本框的属性，当文本为空时显示，并在 OnClick 中清除。

例如：让文本框说“在此处输入...”，然后 onFocus 将清除该文本并允许您输入条目，但是如果文本为空，则“在此处输入...”将再次显示。

我正在尝试找出是否有任何方法可以在没有任何额外编码的情况下开箱即用，因为此功能得到第 3 方控件（即 Telerik 的 AJAX 控件）的广泛支持，有人知道 MS 是否做出了任何规定提供类似的东西？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T16:57:10.217

您可以使用 HTML5[`placeholder`](http://davidwalsh.name/html5-placeholder)属性：

```
@Html.TextBoxFor(x => x.SomeProperty, new { placeholder = "some default text" }) 
```

如果您需要支持较旧的浏览器，您总是可以使用 javascript 实现相同的效果。例如，现有的 jQuery 插件如[jQuery.placeholder](https://github.com/danielstocks/jQuery-Placeholder/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:57:35.500

[`placeholder`](http://www.w3schools.com/html5/att_input_placeholder.asp)在 HTML 5 中使用属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:58:50.800

在 HTML 中没有您所指的东西，至少没有这样称呼。3rd 方控件自己实现了此功能。

在 HTML 5 中有一个称为占位符的属性，但这不会出现在非 html5 兼容的浏览器（IE8、IE7、旧版本的 FF 等）中。

跨浏览器的唯一方法是使用 javascript 来实现该功能。

# vbscript - 这个脚本（使用 Outlook 发送电子邮件）如何工作？

> ID：11726067
> 
> 赞同：3
> 
> 时间：2012-07-30T16:55:31.027
> 
> 标签：vbscript, outlook

谁能帮我理解 MAPI 的工作原理？我有这个使用 MAPI 发送电子邮件的简单 vbscript。它工作得非常好，但是，我不知道它是如何做到的......后台发生了什么？

```
Const ForReading = 1

Set args = WScript.Arguments
sqlFile = args.Item(0)
logFile = args.Item(1)

Dim ToAddress
Dim FromAddress
Dim MessageSubject
Dim MyTime
Dim MessageBody
Dim MessageAttachment
Dim ol, ns, newMail
MyTime = Now

ToAddress = "my@email.com"
MessageSubject = "Subject goes here"
MessageBody = "Body message goes here." 
MessageAttachment = ""&logFile&""
Set ol = WScript.CreateObject("Outlook.Application")
Set ns = ol.getNamespace("MAPI")
Set newMail = ol.CreateItem(olMailItem)
newMail.Subject = MessageSubject
newMail.Body = MessageBody & vbCrLf & MyTime
newMail.RecipIents.Add(ToAddress)
newMail.Attachments.Add(MessageAttachment)
newMail.Send 
```

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:12:36.003

您在上面这段代码中所做的实际上是使用已安装的 Outlook 版本来发送邮件。Outlook 很可能正在使用 MAPI，但您在此处实际使用的 API 接口是基于 COM 的 Outlook 自动化。诸如此类的代码将利用 Outlook 通过 Outlook 可以配置为使用的任何邮件传输系统发送电子邮件。但是，仅发送电子邮件消息的开销就很大。根据您在网络上的本地电子邮件服务器或通过哪些电子邮件服务器，可能会有更有效的方式来发送电子邮件。但是，如果这工作正常并且目前满足您的需求，请不要认为这意味着按照您上面的方式进行操作有任何问题。这一切都是为了了解您可用的工具以及如何最好地将它们应用于您的特定问题空间。

在您的代码中，您正在控制 Outlook 并告诉它创建一封电子邮件。您将邮件传递给 Outlook，然后 Outlook 实际上使用已配置的配置文件来确定如何将邮件传递给已配置的 Exchange 服务器或其他已安装/配置的邮件传输代理 (mta)。

# .net - .NET Fluent 代码设计最佳实践

> ID：11726070
> 
> 赞同：0
> 
> 时间：2012-07-30T16:55:38.920
> 
> 标签：.net, fluent, fluent-interface

今天我尝试为我的 OpenXml 电子表格单元制作一些流畅的界面。我写了这个： http: [//pastebin.com/64dZ8ji7](http://pastebin.com/64dZ8ji7)

这可以用作：

`var newCell = _cell.For.Column(1).For.Row(1).WithContent("Hello").Create();`

我的问题在下一个。pastebin 中的代码是流利编写此类内容的好方法吗？或者，也许我们有一些最佳实践/普遍接受的指导方针？如何判断你的界面是否足够流畅？

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:58:14.560

您应该查看[CodePlex 上的 StyleCop 项目 StyleCop](http://stylecop.codeplex.com/)。

`StyleCop analyzes C# source code to enforce a set of style and consistency rules. It can be run from inside of Visual Studio or integrated into an MSBuild project. StyleCop has also been integrated into many third-party development tools.`

我对 StyleCop 执行的指导方针非常满意。

# image-processing - 如何在matlab中使用边缘在图像上嵌入水印？

> ID：11726071
> 
> 赞同：0
> 
> 时间：2012-07-30T16:55:40.800
> 
> 标签：image-processing, matlab

在一个学校项目中，我想执行以下步骤以在 matlab 中制作水印图像

*   从图像中提取边缘
*   在此边缘插入标记
*   重建图像
*   提取标记

有人可以给我一个链接，让我知道如何做或帮助我做到这一点吗？先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T19:58:31.997

您想为图像添加水印吗？为什么不只是覆盖整个事情。

如果你有图片

```
img = imread('myimage.jpg')
wm  = imread('watermark.jpg') 
```

您可以将水印的大小调整为图像的大小

```
wm_rs = imresize(wm, [size(img,1) size(img,2)], 'lanczos2');

img_wm(wm_rs ~= 0) = wm_rs; %This sets non-black pixels to be the watermark. (You'll have to slightly modify this for color images) 
```

如果你想把它放在图像的边缘，你可以像这样提取它们

边缘=边缘（rgb2gray（img），'canny'）

然后您可以将边缘存在的像素设置为水印像素

```
img_wm = img;
img_wm(edges ~= 0) = wm_rs(edges~=0); 
```

如果您想要透明度，您可以混合使用 img 和 wm_rs 像素值，而不是直接分配。

您可能需要调整我对彩色图像所说的一些内容，但大多数应该是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T20:21:30.157

这里是一个很好的简单示例，如何使用 MATLAB（在空间域中）嵌入水印：http: [//imageprocessingblog.com/digital-watermarking/](http://imageprocessingblog.com/digital-watermarking/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-13T03:24:36.773

请参见下面的示例（R2017b 或更高版本）：

```
% your params
img = imread('printedtext.png');
Transparency = 0.6;
fontColor = [1,1,1]; % RGB,range [0,1]
position = [700,200];

%% add  watermark
mask = zeros(size(img),'like',img);
outimg = insertText(mask,position,'china', ...
    'BoxOpacity',0,...
    'FontSize',200,...
    'TextColor', 'white');
bwMask = imbinarize(rgb2gray(outimg));
finalImg = labeloverlay(img,bwMask,...
    'Transparency',Transparency,...
    'Colormap',fontColor);
imshow(finalImg) 
```

# excel - 单元格引用公式

> ID：11726073
> 
> 赞同：1
> 
> 时间：2012-07-30T16:55:41.793
> 
> 标签：excel

正在使用这个公式*SheetName!CellAddress*

我需要以如下方式将其他 2 张纸（即（sheet2 和 sheet3））上可用的数据导入到第 1 页中

行值将是交替的，即分别来自工作表 2 的一个值和来自工作表 3 的另一个值

试过这样 =Sheet2!C2 =Sheet3!D2

当我拖动其他值时，我只得到偶数单元格中的值，例如（c4，d4，c6，d6）如果我将 for 公式更改为

=Sheet2!C1 =Sheet3!D1 我只得到偶数单元格中的值，例如 (c3,d3,c5,d5)

但我需要的是行中的连续单元格（c1，d1，c2，d2，c3，d3 ...）

那么我需要使用什么公式来获得这个结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:08:23.750

我仍然不是 100% 清楚这个问题在问什么，所以如果下面的答案对你不起作用，请告诉我。

听起来您正在寻找的东西可以通过`OFFSET`巧妙地使用`IF`语句来完成。

假设您的公式将在列中`A`，从 开始`A2`。然后将以下公式输入`A2`（为便于阅读添加了行拆分；将其删除）：

```
= IF(MOD(COUNTA(A$1:A1),2)=0, OFFSET(Sheet2!$C$1, COUNTA(A$1:A1) / 2, 0), 
    OFFSET(Sheet3!$D$1, COUNTA(A$1:A1) / 2, 0)) 
```

然后向下拖动公式。

它能做什么：

*   `MOD(COUNTA(A$1:A1),2)=0`- 检查我们是在奇数行还是偶数行。
*   `COUNTA(A$1:A1)/ 2`- 占用当前单元格上方的非空单元格数量的一半。
*   `OFFSET(Sheet2!$C$1, COUNTA(A$1:A1) / 2, 0)`- 取`COUNTA(A$1:A1)/ 2`下面的单元格`Sheet2!$C$1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:19:53.830

这是一个相当基本的方法：

1.  将前两个公式输入为*文本*- 您可以通过将单元格编号格式化为文本或在公式前加上撇号来执行此操作。

2.  选择单元格并填写以获得：

    ```
    =Sheet2!C2
    =Sheet3!D2 
    =Sheet2!C3
    =Sheet3!D3
    =Sheet2!C4
    =Sheet3!D4
    ... 
    ```

3.  选择列并选择`Data|Text to Columns|Finish`将文本更改为值。

# ios - 如何使用另一个类的整数？

> ID：11726074
> 
> 赞同：0
> 
> 时间：2012-07-30T16:55:45.007
> 
> 标签：ios

我正在制作一个多项选择测验应用程序。在我的主课中，我有一个名为“points”的整数，用于显示在测验视图中获得的当前分数。但是，我还想在另一个类的视图中显示分数，这告诉用户他的答案是正确的。

我知道如果一个类是另一个类的子类，你可以这样做，但如果它们不相关，你可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:08:17.383

我会研究像 Singleton Objects 这样的东西

[此链接提供了简单单例对象的基本示例，](http://maniacdev.com/2009/07/global-variables-in-iphone-objective-c/)您可以使用它在类之间共享变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:16:42.033

一种方法是设置`points`为全局变量。像这样：

1.  在您的`AppDelegate.h`文件中，在以下内容之后插入这一行`@end`：

    外部 int 点；

2.  在任何需要读取/写入点的类中，在 .h 文件中`@end`，添加以下行：

    整数点；

# google-analytics - 使用网站 IP 地址设置 Google Analytics

> ID：11726078
> 
> 赞同：1
> 
> 时间：2012-07-30T16:56:12.750
> 
> 标签：google-analytics

试图在我的网站上设置谷歌分析跟踪。现在它处于 QA 阶段，网站还没有正式启动虚 URL。所以我们使用站点 IP 地址来输入网络资源 URL。

但是，我们在 GA 中没有得到任何数据，我想知道是不是因为我们使用的是 IP 而不是 url。

我看到一个帖子问同样的问题但还没有答案：[Google Analytics - IP Address as Website URL](https://stackoverflow.com/questions/3407449/google-analytics-ip-address-as-website-url)

# ruby-on-rails - Rails 从管理面板生成视图

> ID：11726079
> 
> 赞同：1
> 
> 时间：2012-07-30T16:56:14.067
> 
> 标签：ruby-on-rails, content-management-system

我正在开发一个简单的 CMS，管理员应该能够从管理面板配置主菜单（项目位置、添加新项目、删除其他项目等）。所以我发现最好的方法不仅仅是在数据库中创建新表，而是动态创建视图，这就是我的问题。在我看来，没有必要使用数据库，因为菜单会经常显示（它在每个页面上）并且管理员不会经常更改它。

我希望 Rails 为 ex 创建视图（代码）。views/layouts/_main_menu.html.haml 包括管理员想要放在那里的任何内容。有没有什么宝石，或者我应该用某种红宝石脚本来做？有没有人在做类似的事情并且可以用代码支持我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:50:59.977

好吧，在生产中，您必须重新启动服务器才能重新加载新视图……所以我认为这不是最好的方法……

我会亲自将所有内容存储在数据库中并正确缓存所有内容（具有适当过期的片段缓存，请看这里：http: [//37signals.com/svn/posts/3113-how-key-based-cache-expiration-works](http://37signals.com/svn/posts/3113-how-key-based-cache-expiration-works) )

这样，如果菜单/页面未被编辑，它们将永远不会从 SQL 重新加载

# c# - 在菜单控件中覆盖渲染方法的正确方法是什么

> ID：11726097
> 
> 赞同：0
> 
> 时间：2012-07-30T16:57:20.883
> 
> 标签：c#, asp.net, html, menu, overriding

我确实进行了调查，但我没有为我的问题找到好的和建设性的信息。这就是为什么我的问题是关于我想以自己的方式扩展和呈现控件的控件。我正在使用 SharePoint，但 SharePoint aspnet 控件是密封的，因此我无法从中派生。

我拥有的是一个菜单控件，它源自： System.Web.UI.WebControls.Menu 或 Microsoft.SharePoint.WebControls.AspMenu 我看不出有什么大的区别。我有数据源/数据提供者。

```
SiteMapDataSource dataSource = this.GetDataSource() as SiteMapDataSource;
SiteMapProvider provider = dataSource.Provider; 
```

所以我有所有需要的元素。

现在基类有很多不同的方法可以覆盖，但我不知道如何开始。

我应该在哪里以及如何创建要呈现的控件？我在哪里渲染这些控件？它们存在的 html 的控制？

```
<ul>
 <li> </li>
 ...
</ul> 
```

然后如何根据提供者构建菜单？

**只是一个小的更新以提供完整的图片：** 我这样做是因为我需要将第一个控件呈现为不是链接和文本，而是作为图像链接并将图像设置为提供的 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:01:48.997

您好，您可以在菜单上使用扩展方法

```
public static void YourExtension(this Menu control)
{
     control.YourPropertyTarget = ....;
} 
```

# shell - 从文件中提取特定值并将其分配给变量

> ID：11726099
> 
> 赞同：0
> 
> 时间：2012-07-30T16:57:23.893
> 
> 标签：shell

下面是文件

```
TMPQM>CSQN205I   COUNT=     213, RETURN=00000000, REASON=00000000
CSQM401I ?TMPQM
QUEUE(Q1)                     TYPE(QLOCAL)
QSGDISP(QMGR)             CURDEPTH(0)
CSQM401I ?TMPQM
QUEUE(Q2)                     TYPE(QLOCAL)
QSGDISP(QMGR)             CURDEPTH(23)
CSQM401I ?TMPQM
QUEUE(Q3)               TYPE(QLOCAL)
QSGDISP(QMGR)             CURDEPTH(150)
CSQM401I ?TMPQM 
```

我的目的是获得价值，

```
Q=Q1
V=0

Q=Q2
V=23

Q=Q3
V=150 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:44:16.247

你可以使用 bash 吗？不是最有效的，但这里有一个 bash 脚本：

```
#!/bin/bash
SAVEIFS=$IFS
IFS=$(echo -en "\n\b")

count=1
for queue in `grep "QUEUE" input.txt`
do
    # Strip the beginning up to (
    q1="${queue#*(}"
    # Strip the end from ) on
    q2="${q1%%)*}"
    q[$count]=$q2
    count=$((count+1))
done

count=1
for value in `grep "CURDEPTH" input.txt`
do
    # Strip the beginning up to (
    v1="${value##*(}"
    # Strip the end from ) on
    v2="${v1%)*}"
    v[$count]=$v2
    count=$((count+1))
done

for index in 1 2 3
do
    echo "Q=${q[$index]}"
    echo "V=${v[$index]}"
done
IFS=$SAVEIFS 
```

花哨的 for 循环只是为了处理 bash 中带有空格的行的循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:44:23.503

pcregrep 和 sed 的组合将完成这项工作。pcregrep 通过 -M 选项支持多行匹配

```
-bash-3.2$ pcregrep -M -o '^QUEUE[(](.+?)[)].*\n.*CURDEPTH[(](\d+?)[)]$' trial.txt | sed -e 's/^QUEUE(\([^)]\+\)).*$/Q=\1/g' -e 's/.*CURDEPTH(\([^)]\+\))/V=\1/g'  
Q=Q1
V=0
Q=Q2
V=23
Q=Q3
V=150 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T06:32:59.337

我的解决方案：

```
grep -oP '(?<=QUEUE|CURDEPTH)\S+' input.txt | tr -d '()' | (while read NAME && read VAL; do echo $NAME=$VAL; done) 
```

它比@cravoori 的解决方案灵活一点，因为您可以轻松地格式化输出。该行的输出是...

```
Q1=0
Q2=23
Q3=150 
```

...您可以`source`然后使用 , 等直接`$Q1`阅读`$Q2`。

# android - 为什么应用程序有时会在 killProcess 上重新启动？

> ID：11726100
> 
> 赞同：11
> 
> 时间：2012-07-30T16:57:25.720
> 
> 标签：android, android-activity, activity-lifecycle, android-windowmanager

通常，通过调用退出我的应用程序：

```
android.os.Process.killProcess(android.os.Process.myPid()); 
```

表现良好，无事故。

但是每隔一段时间，应用程序会再次重新启动（退出后！）。

相关的日志片段显示：

```
.631: I/Process(15495): Sending signal. PID: 15495 SIG: 9
.641: W/AudioFlinger(121): write blocked for 252 msecs, 1279 delayed writes, thread 0xdc18
.651: I/ActivityManager(164): Process com.ef.myapp (pid 15495) has died.
.651: I/WindowManager(164): WIN DEATH: Window{463659e8 com.ef.myapp/com.ef.myapp.MainActivity paused=false}
.661: I/AudioService(164):  AudioFocus  abandonAudioFocus() from android.media.AudioManager@460b2b98
.701: I/ActivityManager(164): Start proc com.ef.myapp for activity com.ef.myapp/.MainActivity: pid=15589 uid=10077 gids={3003} 
```

我知道，根据 Android 操作系统的设计，[killProcess()](http://developer.android.com/reference/android/os/Process.html#killProcess%28int%29)不是终止应用程序的正确方法。这是因为[killProcess()](http://developer.android.com/reference/android/os/Process.html#killProcess%28int%29)[立即](https://stackoverflow.com/a/7493571)停止该进程，而没有给应用程序任何方式或机会来阻止它或为它做准备。

我知道当我调用[finish()](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)时，应用程序堆栈只是被推到后台（并且仍然存在于内存中）。Android 自己决定何时关闭应用程序（即从内存中删除其实例），通常这是在应用程序成为“最旧的未使用时间最长的”时完成的。如果它真的是[最后一个](https://stackoverflow.com/a/4924116/722603)，它的行为实际上更可预测。

问题是[finish()](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)只会停止并破坏它被调用的活动。它不会停止应用程序或其他活动产生的其他活动。因此，为了便于在开发过程中进行测试和调试，我使用 [killProcess()](http://developer.android.com/reference/android/os/Process.html#killProcess%28int%29)作为一种方便的快捷方式。

*但现在我看到这有应用程序有时会*在杀死自己后立即重新启动的副作用——所有这些都**在 30 毫秒内**。

一个简单的解决方案是遍历所有应用程序的活动并[完成（）](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)它们。但在继续此之前，我很想了解Android 操作系统中是**什么**让应用程序自己复活。

**为什么**Android会让一个被杀死的应用程序重新启动？

为什么不一致？（即*有时*）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T07:37:11.213

应用程序首次从安装程序、Web 浏览器和通过 IDE（IntelliJ、Eclipse 等）启动的方式存在一个**已知错误。**请尝试在**不启动它**的情况下安装您的应用程序，然后**从可用应用程序列表中启动它**，看看问题是否消失。请参阅很久以前提交的与该问题相关的这些问题：

[http://code.google.com/p/android/issues/detail?id=2373](http://code.google.com/p/android/issues/detail?id=2373)

[http://code.google.com/p/android/issues/detail?id=26658](http://code.google.com/p/android/issues/detail?id=26658)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T17:44:55.720

您的应用程序是在单个进程中运行，还是在多个进程中运行？`killProcess`会杀死一个进程，不一定是你的整个应用程序。尝试`ActivityManager#killBackgroundProcesses(String packageName)`改用。

如果这不起作用，看起来这些[链接](https://groups.google.com/d/msg/android-developers/snTPpksX9TU/3L3MIx_SIusJ)可能[有助于](https://stackoverflow.com/q/6121300/844882)解释进程被终止时系统的行为。

顺便说一句，Android 系统正在重新启动您的应用程序......出于开发目的操纵其行为（即通过阻止应用程序在强制关闭时重新启动）是可以的，但是当您推送您的应用程序时您不应该这样做到生产。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T18:09:28.013

从[ADT 17.0.0 开始](http://developer.android.com/tools/sdk/eclipse-adt.html)，有一个静态字段`BuildConfig.DEBUG`可以帮助您进行调试。例如，您可以拥有一个包含所有正在运行的活动实例的静态类。然后你可以一次完成所有这些。我认为它比`killProcess()`……更好。</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-24T09:34:24.110

请点击它具有您问题的预期答案的链接。 [android.os.Process.killProcess(pid) 确实再次重新启动了进程](https://stackoverflow.com/questions/23234921/android-os-process-killprocesspid-did-restrat-the-processes-again)

# sql - 用户 GETDATE() 将当前日期放入 SQL 变量

> ID：11726107
> 
> 赞同：20
> 
> 时间：2012-07-30T16:57:56.160
> 
> 标签：sql, tsql

我正在尝试使用以下命令将当前日期转换为 SQL 存储过程中的变量

```
DECLARE @LastChangeDate as date
SET @LastChangeDate = SELECT GETDATE() 
```

这给了我以下错误：“'SELECT'附近的语法不正确”

这是我编写的第一个存储过程，所以我不熟悉变量在 SQL 中的工作方式。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-30T17:00:22.273

你不需要`SELECT`

```
DECLARE @LastChangeDate as date
SET @LastChangeDate = GetDate() 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-30T17:00:05.123

只用`GetDate()`不`Select GetDate()`

```
DECLARE @LastChangeDate as date 
SET @LastChangeDate = GETDATE() 
```

但如果是 SQL Server，您也可以在声明的同一步骤中初始化...

```
DECLARE @LastChangeDate date = getDate() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-30T16:59:38.717

```
DECLARE @LastChangeDate as date 
SET @LastChangeDate = GETDATE() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T16:59:45.370

```
SELECT @LastChangeDate = GETDATE() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-14T20:31:00.830

您也可以使用`CURRENT_TIMESTAMP`它。

根据[BOL](https://msdn.microsoft.com/en-us/library/ms188751.aspx) `CURRENT_TIMESTAMP`是`ANSI SQL`等价于`GETDATE()`

```
DECLARE @LastChangeDate AS DATE;
SET @LastChangeDate = CURRENT_TIMESTAMP; 
```

# javascript - JQuery 从表中删除选定的行

> ID：11726117
> 
> 赞同：2
> 
> 时间：2012-07-30T16:58:43.047
> 
> 标签：javascript, jquery, html

假设我有一张桌子：

```
 <table id="mytable">
    <tr>1</tr>
    <tr>2</tr>
    <tr>3</tr>
    <tr>4</tr>
    <tr>5</tr>
    <tr>6</tr>
    ...
    ...
   </table> 
```

我知道你可以`('#mytable').find("tr:gt(n)").remove();` 用来删除第 n 行之后的所有行。但是是否有类似的功能可以让您指定要删除的行范围？说我想将第 2 行删除到第 5 行？还是我只想删除第 2 行？

我是否必须为每一行添加一个 id 才能实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T17:03:12.410

您可以将[jQuery slice(start,[end])](http://api.jquery.com/slice/)用于范围，将[eq(index)](http://api.jquery.com/eq/)用于单行。

```
var myRows = $("table tr").slice(1,5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:02:42.737

这样可以吗？

`$('#mytable tr:gt(2):lt(5)').remove();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:03:03.733

```
$('#mytable').find('tr').filter(function(index){
    return index >=2 && index <=5;
}).remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T17:04:26.930

尝试过滤它的功能：

```
var rangeFunction = function(index){
  return index >=2 && index <=5;
};

$('#mytable').filter(rangeFunction).remove(); 
```

这是常用的方法。如果您只想要简单的线性范围，请尝试：

```
$("#mytable tr").slice(2, 4).remove(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T17:05:56.420

您可以尝试使用[:eq() 选择器](http://api.jquery.com/eq-selector/)：

```
$("#mytable").find("tr:eq(index)").remove(); 
```

要删除一系列行，您可以使用该选择器并遍历它们

# dynamic - SELECT FROM (lv_tablename) 错误：输出表太小

> ID：11726124
> 
> 赞同：2
> 
> 时间：2012-07-30T16:58:54.143
> 
> 标签：dynamic, abap, opensql

我有一个 ABAP 类方法，比如 select_something。select_something 有一个导出参数，比如 et_result。et_result 是标准表类型，因为直到运行时才能确定 et_result 的类型。

该方法有时会给出一个简短的转储，说**With ABAP/4 Open SQL array select, output table is too small** at " **select * into table et_result from (lv_tablename) where...** "

错误分析：

**......在这种特殊情况下，数据库表是 3806 字节宽，但内部表只有 70 字节宽。**

我也试过“任何桌子”，错误是一样的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T08:27:50.910

您可以返回数据引用。您的查询将不再失败，之后您可以将数据分配给正确键入的字段符号。

```
" Definition
class-methods select_all
  importing
    !tabname type string
  returning
    value(results) type ref to data.

...
...

" Implementation
method select_all.
  data dref type ref to data.
  create data dref type standard table of (tabname).
  field-symbols <tab> type any table.
  assign dref->* to <tab>.
  select * from (tabname) into table <tab>.
  get reference of <tab> into results.
endmethod. 
```

此外，我同意@vwegert 的观点，即应尽可能避免动态查询（以及相关的编程）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T17:50:22.803

你试图做的事情在很多层面上看起来都非常错误。除非有人用枪指着您的头并且门已锁紧，否则切勿使用 SELECT FROM（无论如何）。您将失去系统可能为您提供的各种静态错误检查。例如，编译器将不再能够告诉您“嘿，您正在读取的表是 3806 字节宽”。即使您使用常量，它也无法分辨。你会发现这很困难，会产生短暂的转储，尤其是在 unicode 和 NUC 系统之间切换时，很可能是在生产系统中。没有什么好玩的。

（实际上，在 SELECT 语句中动态表名有一些 - 非常非常非常少 - 很好的用途。我大约每两到三年需要一次，而且我编写了很多奇怪的东西。尽可能避免使用它们，即使以编写更多代码为代价。只是不值得稍后修复损坏的东西。）

然后，更改泛型**形式**参数类型不会对**实际**参数的类型做任何事情。如果您将 STANDARD TABLE OF mandt WITH DEFAULT KEY 传递给您的方法，则该表将包含 3 个字符的行。它将是一个标准表，因此，它也将是一个任意表，仅此而已。你可以在任何你喜欢的地方扭曲泛型类型，没有办法像你使用它们那样使用泛型类型来强制正确性。由调用者确保使用了所有正确的类型。那是一种糟糕的飞行方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T08:24:20.250

完全同意 vwegert，但如果除了使用动态选择语句和动态类型参数之外，绝对没有其他方法（通常有）执行您的任务，请在运行时对表的类型和参数进行一些检查.

使用 CL_ABAP_TYPEDESCR 及其子类来执行此操作。

这样，您可以在运行时处理错误而无需程序转储，

但正如 vwegert 所说，这种动态的东西是纯粹的邪恶，并且肯定会在运行时的某个时候中断。添加必要的错误处理很可能比将代码重新设计为非动态 SQL 和类型化参数需要更多的工作和更难

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T04:15:12.893

首先，我同意 vwegert 的回应，如果可以的话尽量避免动态 sql 选择

也就是说，检查短转储。如果错误是异常类，您可以将 SELECT 语句包装在 try/catch 块中，并至少阻止它转储。

你也可以试试“ `INTO CORRESPONDING FIELDS OF TABLE et_result`”。如果 ET_RESULT 是动态的，您可能必须使用 RTTS 将其转换为正确的结构。[这](http://help.sap.com/abapdocu_731/en/abendynamic_sql_abexa.htm)可能会给你一些想法......

# java - 一个解决运动方程的java程序？（没有什么科学的只是一个 java 查询）

> ID：11726126
> 
> 赞同：1
> 
> 时间：2012-07-30T16:59:01.163
> 
> 标签：java

这根本不是科学，我只需要一些关于 java 的帮助。所以如果你知道，有 3 个运动方程。

我们将只关注 1，即 v=u+at 现在忘记所有技术术语。你可以看到有4个变量。

但是如果我尝试在 java 中计算这个值，我将始终要求用户提供 u、a 和 t 的值并提供输出 v。但在现实生活中，我们可以计算任何变量的值如果我们有其他方程，这个方程。

那么，有没有一种方法可以询问所有输入，并且用户可以选择在 4 个输入中的一个输入中不输入任何输入，并且将进行计算。

例如：如果我输入 2=v,1=u 和 3=a，当我被问到 t 的值时，我只需按 Enter。我可以做些什么来找到空白空间吗？

现在我知道有一种方法可以执行 if 循环，但这会很长，而且我也有点懒惰。所以我只是问有没有一种快速的方法可以做到这一点？

现在我是一个对java知识有限的初学者，所以请不要讽刺并告诉我我是否错了，更有可能我错在哪里。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:11:04.570

直接求解其他变量：

```
v=u+at
u=v-at
a=(v-u)/t
t=(v-u)/a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:07:13.443

你想要的是一个方程组求解器（有或没有 Java）。

请参阅[https://discursive.atlassian.net/wiki/display/CJCOOK/Solving+a+System+of+Linear+Equations](https://discursive.atlassian.net/wiki/display/CJCOOK/Solving+a+System+of+Linear+Equations)其中文章使用 Java 设置表示方程组的矩阵并使用 org.apache 求解.commons.math.linear.RealMatrix 包。

您可以谷歌“线性方程组”以查看有关此过程/如何实现自己的过程的更多信息。

当您让用户选择 4 个方程中的 3 个时——有某种形式，他们可以输入 3 个或更多值，然后插入矩阵求解器并返回第 4 个答案。否则，您可以按关键字区分输入（google argparse 了解如何使用命令行执行此操作或查看[How to parse command line arguments in Java？](https://stackoverflow.com/questions/367706/is-there-a-good-command-line-argument-parser-for-java)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-01T10:49:49.470

你可以这样做...

```
import java.util.Scanner;
class motion
{
    public static double i(String str)
    {
     return Double.parseDouble(str);
    }
    public static void main(String args[])
    {
        String v1,u1,a1,S1;
        double v,u,a,S;
        Scanner sc=new Scanner(System.in);
        System.out.println("Enter the following values and \"?\" to find that value");
        System.out.print("v=");
        v1=sc.next();
        System.out.print("u=");
        u1=sc.next();
        System.out.print("a=");
        a1=sc.next();
        System.out.print("S=");
        S1=sc.next();
        if(v1.equals("?"))
        {
            u=i(u1);
            a=i(a1);
            S=i(S1);
            v=Math.sqrt(((u*u)+2*a*S));
            System.out.println("Final velocity="+v+" m/s");
        }
        else if(u1.equals("?"))
        {
            v=i(v1);
            a=i(a1);
            S=i(S1);
            u=Math.sqrt((v*v)-2*a*S);
            System.out.println("Initial velocity="+u+" m/s");
        }
        else if(a1.equals("?"))
        {
            u=i(u1);
            v=i(v1);
            S=i(S1);
            a=((v*v)-(u*u))/2*S;
            System.out.println("Acceleration="+a+" m/s^2");
        }
        else
        {
            u=i(u1);
            v=i(v1);
            a=i(a1);
            S=((v*v)-(u*u))/2*a;
            System.out.println("Displacement="+S+" m");
        }
    }
} 
```

# c - 在 linux 内核中构建模块需要哪些文件/目录？

> ID：11726130
> 
> 赞同：1
> 
> 时间：2012-07-30T16:59:34.703
> 
> 标签：c, linux, linux-kernel, embedded

我正在使用包含 Angstrom 分布的 beaglebone。因为没有构建目录，所以我从 kernel.org 下载了内核源代码，但它的大小对于我的 SD 卡（~430 MB）来说太大了。所以我想到了删除一些不需要的文件或目录。

哪些目录不是构建内核模块所必需的？还有其他方法可以仅获取这些文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:58:39.410

您可以在您的 PC 上交叉编译内核 - 它会更快、更舒适。

您所要做的就是获得交叉编译器。我记得有一些为 beagleboard 准备的，所以你可以尝试使用它们。当然你也可以自己构建——有crosstool-ng或者buildroot之类的工具，可以帮到你很多。

# html - 如何在 WPF 中显示 HTML 帮助文件

> ID：11726133
> 
> 赞同：0
> 
> 时间：2012-07-30T16:59:43.867
> 
> 标签：html, wpf, xaml, html-helper

我有一个 HTML 格式的帮助文件，需要在 WPF 中的 MVVM 应用程序中显示。我不想使用任何与 WinForms 相关的东西，也不想依赖 ActiveX 或 IE。在 WPF 中是否没有一种简单且开箱即用的方法来执行此操作？我是否需要经历编写转换器和其他不需要的代码的麻烦？

# ruby - Hashie::Mash 从字符串恢复

> ID：11726137
> 
> 赞同：2
> 
> 时间：2012-07-30T17:00:02.783
> 
> 标签：ruby, hash

我在这个问题上很挣扎。我已将 a 存储`Hashie::Mash`到一个字符串中，并且很难将其恢复为哈希。

这是字符串：

`"--- !map:Hashie::Mash \ncreated_at: Mon Jul 30 15:42:20 +0000 2012\nid: 229965155759439872\nid_str: \"229965155759439872\"\ntext: \"#streetart encore plus impressionnant de plus pr\\xC3\\xA8s http://t.co/lUUmXFYs\"\nsource: <a href=\"http://twicca.r246.jp/\" rel=\"nofollow\">twicca</a>\ntruncated: false\nin_reply_to_status_id: \nin_reply_to_status_id_str: \nin_reply_to_user_id: \nin_reply_to_user_id_str: \nin_reply_to_screen_name: \nuser: !map:Hashie::Mash \n id: 15762429\n id_str: \"15762429\"\n name: Cyroul\n screen_name: Cyroultwit\n location: Paris\n description: alias Cyril Rimbaud, explorateur de TAZ, creative Technologist, fondateur du laboratoire Curiouser, enseignant au CELSA et casseur de mythes publicitaires.\n url: http://www.cyroul.com\n protected: false\n followers_count: 7431\n friends_count: 1065\n listed_count: 481\n created_at: Thu Aug 07 12:05:21 +0000 2008\n favourites_count: 10\n utc_offset: 3600\n time_zone: Paris\n geo_enabled: false\n verified: false\n statuses_count: 12726\n lang: fr\n contributors_enabled: false\n is_translator: false\n profile_background_color: 1A1B1F\n profile_background_image_url: http://a0.twimg.com/profile_background_images/6800607/main-cyr.jpg\n profile_background_image_url_https: https://si0.twimg.com/profile_background_images/6800607/main-cyr.jpg\n profile_background_tile: false\n profile_image_url: http://a0.twimg.com/profile_images/2018752881/tete-etoiles-petit-128_normal.jpg\n profile_image_url_https: https://si0.twimg.com/profile_images/2018752881/tete-etoiles-petit-128_normal.jpg\n profile_link_color: 2FC2EF\n profile_sidebar_border_color: 181A1E\n profile_sidebar_fill_color: \"252429\"\n profile_text_color: \"666666\"\n profile_use_background_image: true\n show_all_inline_media: true\n default_profile: false\n default_profile_image: false\n following: false\n follow_request_sent: false\n notifications: false\ngeo: \ncoordinates: \nplace: \ncontributors: \nretweet_count: 0\nentities: !map:Hashie::Mash \n hashtags: \n - !map:Hashie::Mash \n text: streetart\n indices: \n - 0\n - 10\n urls: \n - !map:Hashie::Mash \n url: http://t.co/lUUmXFYs\n expanded_url: http://yfrog.com/nw86guqj\n display_url: yfrog.com/nw86guqj\n indices: \n - 51\n - 71\n user_mentions: []\n\nfavorited: false\nretweeted: false\npossibly_sensitive: false\n"`

我怎样才能找回哈希？提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:05:09.563

看起来您使用 YAML[序列化](http://www.skorks.com/2010/04/serializing-and-deserializing-objects-with-ruby/)了字符串。你可以像这样反序列化它：

```
require "yaml"
require "hashie"

YAML.load(your_string) 
```

# iphone - 故事板中的当前选项卡

> ID：11726143
> 
> 赞同：0
> 
> 时间：2012-07-30T17:00:14.107
> 
> 标签：iphone, objective-c, xcode, uitabbarcontroller

如果我使用 storybard 创建一个 Tab Bar Application 项目模板并将其放在我的 AppDelegate.m 中：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
NSLog(@"Root: %@", self.window.rootViewController);
NSLog(@"Current ViewController: %@", /*self.window.rootViewController.selectedIndexOrSomething?*/  );
return YES;
} 
```

它说：根：<UITabBarController：0x6b20360>

所以我猜 TabBarController 已经添加为窗口属性的子视图，因为除了 NSLog 之外，我没有以任何其他方式接触过 AppDelegate。

如何记录*当前*选项卡/ViewController？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:22:55.690

你会想要这样做：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSLog(@"Root: %@", self.window.rootViewController);
    NSLog(@"Current ViewController: %@", ((UITabBarController *)self.window.rootViewController).selectedViewController );
    return YES;
} 
```

# git - 查看单个文件历史的“x”提交的完整文件差异（托管在 git 中）

> ID：11726144
> 
> 赞同：4
> 
> 时间：2012-07-30T17:00:17.173
> 
> 标签：git, git-diff, git-log, difftool, mergetool

假设我在 git 中有一个名为 的文件`filex.code`，我想查看该文件最新版本的*完整代码，并**突出显示每个更改的部分*——都在一个地方。所以一个-paned 的提交历史，几乎就像我在做一个-paned 差异，但是查看历史版本而不是从不同的分支合并。`x`*`x``filex.code``x`*

 *越大`x`越好。跨平台会很棒，但是三巨头中的任何一个都可以。能够编辑最新版本也很棒，但只读可视化已经足够了。

请注意，这与[简单](https://stackoverflow.com/questions/1786027/how-to-view-file-history-in-git)的文件提交历史不同，因此其他精彩的[`gitk path/to/file`](https://stackoverflow.com/a/1321962/1028230)（或 SourceTree 或您喜欢的任何可视化 git 客户端）不是我想要的。 [`git log -p`](https://stackoverflow.com/a/1786184/1028230)也接近了，它的输出诱人地包含了我想要的所有信息，只是它都是线性的，几乎是“程序化”的输出格式，而不是像你最喜欢的三窗格 GUI 那样的良好的、相对非分层的、可视化的格式'd 合并工具的。

（**编辑：**另一个非常酷的选项最终仍然存在仅显示每行的最新源和线性输出的缺点[`git blame`](https://stackoverflow.com/a/3458509/1028230)，但它很酷。）

所以我也不是在寻找[设置 difftool](https://stackoverflow.com/a/255212/1028230)，我不认为。我不想区分文件的两个已知版本，而是想将`x`历史编辑的迭代可视化到单个文件。

要求太多？这是 WTFA（编写“神奇”应用程序 [自己]）的情况吗？

较小的选择：是否有一个三窗格的合并工具，我可以欺骗显示单个文件的最后三个提交？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:17:04.593

此脚本并排打开文件的最后 N 个修订版本。

```
#!/usr/bin/env python
import os, sys, tempfile
from shutil import rmtree
from subprocess import call, Popen, PIPE
from optparse import OptionParser
from traceback import print_exc

COMMAND = 'vim -d'

def vcall(cmd, **kwargs):
    if options.verbose:
        print ' '.join(cmd)
    return call(' '.join(cmd) if sys.platform == 'darwin' else cmd, 
                **kwargs)

parser = OptionParser('usage: %s [-n <number of revisions>] filename' % 
                      sys.argv[0])
parser.add_option('-n', '--num', dest='N', type='int', 
                  help='number of revisions', default=3)
parser.add_option('-v', '--verbose', dest='verbose',
                  help='be verbose', default=False, action='store_true')
(options, args) = parser.parse_args()
if len(args) != 1:
    parser.error('incorrect number of arguments')
filename = args[0]

if vcall('git rev-parse'.split()) != 0:
    sys.exit(1)

try:
    cmd = 'git rev-list HEAD --'.split() + [filename]
    if options.verbose:
        print ' '.join(cmd)
    pipe = Popen(' '.join(cmd) if sys.platform == 'darwin' else cmd, 
                 stdout=PIPE).stdout
    revs = []
    for i, line in enumerate(pipe):
        if i == options.N:
            break
        revs.append(line.rstrip())
except:
    print_exc()

N = len(revs)
if N == 0:
    sys.exit('fatal: ambiguous argument %s: path not in the working tree' % 
             filename)
elif N < options.N:
    sys.stderr.write('%s has only %d revision%s' % 
                     (filename, N, 's' if N > 1 else ''))

tempdir = ''
try:
    tempdir = tempfile.mkdtemp()
    head, tail = os.path.split(filename)
    tempfiles = []
    for i in xrange(N):
        tempfiles.append(tail + ('.%d' % i if i else ''))
    for i, f in enumerate(tempfiles):
        with open(os.sep.join((tempdir, f)), 'w') as fout:
            vcall(['git', 'show', '%s:./%s' % (revs[i], filename)], stdout=fout)
    vcall(COMMAND.split() + list(reversed(tempfiles)), shell=True, cwd=tempdir)
except:
    print_exc()
finally:
    try:
        if tempdir and os.path.isdir(tempdir):
            rmtree(tempdir)
    except:
        print_exc() 
```

笔记：

1.  Vimdiff 有一个限制，只能在 4 个（第一个）缓冲区中突出显示差异，但至于并排显示 - 显示所有文件修订版（例如 N=20 效果很好）。为了避免 N>4 的警告，请使用`COMMAND = 'vim -O'`并排查看版本，根本没有任何差异。

2.  对于 SO 风格来说，脚本已经变得太大了，但它现在已经非常安全了——但对于有经验的人来说足够简单。*

# javascript - Mootools 提交表单仅在通过 id 选择表单时有效

> ID：11726147
> 
> 赞同：2
> 
> 时间：2012-07-30T17:00:25.427
> 
> 标签：javascript, forms, mootools, submit

我一直在尝试通过 FF 14 上的 mootools (1.4.5) 提交表单。该表单不包含名为 submit 的输入（这通常是问题所在）。我想要的是 onchange 选择提交表单。半小时后，下面的代码是我第一次尝试让它工作。objSelect 是一个选择对象，包含在我需要提交的表单中。

```
$(''+objSelect.getParent('form').get('id')).submit(); 
```

.

**下面的代码不能正常工作的原因是什么？**

```
// Without the explicit cast to string (''+); doesn't work
$(objSelect.getParent('form').get('id')).submit(); 
```

也不

```
// Most obvious way; doesn't work
objSelect.getParent('form').submit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:31:53.380

您不能拥有通过旧 DOM 级别 API 导出的保留名称的子节点 - 请参阅此处的表单是如何表示的：[http ://www.quirksmode.org/js/forms.html#access](http://www.quirksmode.org/js/forms.html#access)

所以基本上 - 在元素级别，如果你有：

*   形式
    *   输入[名称=foo]
    *   输入[名称=栏]

`form.foo`并将`form.bar`在表单元素对象上引用这些元素。

你的问题是：

*   形式（使用`.submit`and`.reset`方法）
    *   按钮[名称=提交]

现在`form.submit`停止引用提交方法并开始引用输入元素。

您仍然可以通过以下方式提交此表格：

*   重命名错误的元素或从表单中删除。
*   通过从干净的表单调用提交来作弊。

`new Element("form").submit.call(this.getParent("form"));`

基本上，您使用干净的提交方法创建一个新的表单元素。它返回一个对象，然后您以其他“脏”形式作为上下文调用该方法。

这和做的一样

```
Array.prototype.slice.call(arguments) 
```

# javascript - 使用图像模拟重力的 2D 物理引擎

> ID：11726149
> 
> 赞同：2
> 
> 时间：2012-07-30T17:00:27.167
> 
> 标签：javascript, image, physics-engine

我正在寻找一个 2D 物理引擎来使用图像模拟重力，最好是具有透明度的 PNG 图像。因此引擎将知道如何根据图像的不透明部分计算碰撞。我只发现了适用于原始形状和基本 HTML 元素的 Javascript 引擎，但不适用于图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:38:05.623

我不知道有什么方法可以做你想做的事，但你可以尝试在 HTML5 Canvas 中绘制你的形状并使用[Box2D.js](https://github.com/hrj/box2d-js)来处理形状碰撞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-12T11:04:54.723

一个人认为你可以做的是计算图像的凸包（[你可以看看这里](http://geomalgorithms.com/a10-_hull-1.html)），然后使用这些包来计算碰撞等等（例如，使用[GJK ，你可以](https://en.wikipedia.org/wiki/Gilbert%E2%80%93Johnson%E2%80%93Keerthi_distance_algorithm)[在这里](https://youtu.be/Qupqu1xe7Io)或[这里](http://box2d.org/files/GDC2010/GDC2010_Catto_Erin_GJK.pdf)找到一些很好的解释）

正如 micnic 所指出的，我想您确实可以使用[Box2D.js](https://github.com/hrj/box2d-js)并提供`b2PolygonShape`为什么图像的非透明像素（或者您可以计算它们的轮廓并使用轮廓作为输入`b2PolygonShape`）

# parallel-processing - 使用网络计算机的 Matlab 并行处理

> ID：11726156
> 
> 赞同：7
> 
> 时间：2012-07-30T17:01:30.267
> 
> 标签：parallel-processing, cluster-computing, matlab

我熟悉`matlabpool`, 和`parfor`用法，但我仍然需要加快计算速度。

我的 1GB 网络中有一台功能更强大的计算机。两台计算机都有 R2010b，并且具有相同的代码和路径。

使用两台计算机进行并行计算的最简单方法是什么？

我今天使用的代码示例：

--- main.m---

```
matlabpool('open', 3);
% ...
x = randn(1e5,1);
y = nan(size(x));
parfor k = 1 : length(x)
    y(k) = myfunc(x(k));
end 
```

--- myfunc.m---

```
function y = myfunc(x)
    y = x; % some computation
return 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T17:19:19.390

对于真正的集群计算，您需要[分布式计算工具箱](http://www.mathworks.nl/products/distriben/)，您可以在[并行计算信息页面上](http://www.mathworks.nl/products/parallel-computing/)阅读：

> 在不更改代码的情况下，您可以在计算机集群或网格计算服务上运行相同的应用程序（使用 MATLAB Distributed Computing Server™）。您可以交互或批量运行并行应用程序。

但是安装（=购买）一个工具箱只是为了将一台计算机添加到工作池中可能有点太贵了。幸运的是还有其他选择：http: [//www.mathworks.com/matlabcentral/fileexchange/13775](http://www.mathworks.com/matlabcentral/fileexchange/13775)

我个人没有使用过这个，但认为它绝对值得一看。

# java - 使用 LinkedList Java 的空中交通管制程序出现问题

> ID：11726162
> 
> 赞同：0
> 
> 时间：2012-07-30T17:01:59.600
> 
> 标签：java, linked-list, implementation

我已经在这个程序上工作了几个星期，这是我们在 Java 编程课上的最后一个项目，它让我（和许多其他学生）非常头疼。我们需要创建一个程序，允许用户输入、显示和删除新飞机以及飞机的速度、高度和飞机类型。在让主类与其他类进行交流方面，我遇到了最多的问题。因此，我不知道我的 LinkedList 是否会正常工作，或者根本不知道。我担心列表不会正确地将所有字段存储在一起，并且节点没有正确编码。我真的可以使用您可以提供的任何帮助或建议。代码如下。我愿意接受任何和所有建议。

主班。这是用户将与程序交互的地方。我一直很难让其他类的方法在这个类中工作。我敢肯定，我缺少一些简单的东西。

```
package airTraffic;

import java.util.*;

public class Main {

static Scanner in = new Scanner(System.in);

public static void main(String[] args) {

    do {
        try {
            System.out.println("Please enter command to proceed: ");
            System.out.println("Enter new aircraft = e");
            System.out.println("Display all aircraft = d");
            System.out.println("Show specific flight = s");
            System.out.println("Remove specific flight = r");
            String command = in.next();
            in.next(command);

            if ( (in.next(command)).equals("e") ) {
                ATControl.addToList();  // need to somehow "start" this class 

            } else if ( (in.next(command)).equals("d") ) {
                ATControl.displayAll();

            } else if ( (in.next(command)).equals("s") ){
                ATControl.showFlight();

            } else if ( (in.next(command)).equals("r") ) {
                ATControl.removeFlight();

            } else if ( (in.next(command)).equals(null) ) {
            }
        } catch (InputMismatchException exc) {
            System.out.println("Wrong entry, please try again:");
        }
    } while (true);
}
} 
```

链表和节点——我称之为飞机。我认为这是存储和创建列表的地方。对列表的操作发生在下一个类（ATControl）中，或者至少我认为会发生。

```
package airTraffic;

import java.util.LinkedList;

public class Aircraft  {

// stores data
private static final int INITIAL_ALLOCATION = 20;
private int size = INITIAL_ALLOCATION; 

//declare LinkedList and node names
static LinkedList <String> list = new LinkedList <String> ();
private Aircraft head = new Aircraft ();
private Aircraft tail = new Aircraft ();

// tells list to add nodes
public  void addNodes (int n, LinkedList<String> s) {
    s = list;
    head.next = tail;
    tail.next = tail;
    size = n;
    Aircraft temp = head;
    for (int i= 0; i < size; ++i) {
        temp.next = new Aircraft ();
        temp = temp.next;
    }
    temp.next = tail;
}

private String value;
Aircraft craft;

public Aircraft (String v) {
    value = v;
}

public Aircraft () {

}

public String get () {
    return value;
}

public void set (String v) {
    value = v;
}

public Aircraft next = null;

//auto generated method from ATControl 
public static void add(String flight) {
    // a for or while loop might be needed here. Seems to easy to just have an empty add class

}
//auto generated method from ATControl
public static void remove() {

}
 } 
```

ATControl 类。这是（我认为）列表被操纵的地方，允许用户添加、删除和显示航班。

```
package airTraffic;

import java.util.*;

public class ATControl{

// implement Aircraft class (node) - empty argument list?? 
Aircraft aircraft = new Aircraft ();

static Scanner in = new Scanner (System.in);

// list of planes 
static String [] planeList = {"Wide-body Airliner = w", "Regional Airliner = r", "Private Plane = p", 
        "Military = m", "Cargo only: c", "Unknown = u"};

//add plane and details
public static void addToList () {
    System.out.printf("Enter flight number: ");
    String flight = in.nextLine();
    Aircraft.add(flight);

    //type of plane
    System.out.printf("Enter type of plane, ", "Choose from: " + planeList);
    String type = in.nextLine();
    try {
    if (type == "w") {
         System.out.println("Wide-body Airliner");
    }else if (type == "r") {
             System.out.println("Regional Airliner");
    }else if (type == "p") {
         System.out.println("Private Plane");
    }else if (type == "m") {
         System.out.println("Military");
    }else if (type == "c") {
         System.out.println("Cargo only");
    }else if (type == "u") {
         System.out.println("Unknown");
    } else type = null;
        }
    catch (InputMismatchException i) {
        System.out.println("You must enter valid command: " + planeList);
    }
    Aircraft.add(type);

    //plane speed
    System.out.printf("Enter current speed: ");
    String speed = in.nextLine();
    Aircraft.add(speed);

    //add Altitude 
    System.out.printf("Enter current altitude: ");
    String alt = in.nextLine();
    Aircraft.add(alt);
}

//show flight
public static void showFlight () {
    System.out.printf("Enter flight number for details: ");
    in.nextLine();
    Aircraft.get(Aircraft, index);
}

// display all flights
public static void displayAll () {
    System.out.printf("All flights: " );

}

//remove flight
public static void removeFlight () {
    System.out.printf("Enter flight number to be removed: ");
    in.nextLine();
    Aircraft.remove();
}   
} 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:07:37.250

要“启动”ATControl，您需要创建它的一个新实例：

```
ATControl control = new ATControl();
control.addToList(); 
```

和你的一样`Aircraft`。您将希望使用 创建新实例`new`，然后`Add()`在它们上调用 等。

您可能还希望将您的`Scanner`from main 传递到新的 ATControl 并使用它来读取输入，而不是使用全新的`Scanner`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:31:56.380

*   您的一般设计似乎忽略了面向对象的原则。在我看来，飞机应该将其类型、速度和高度集中在一个对象中。

*   为什么要重新发明轮子？JRE 中已经内置了大量预制的（并且经过良好测试的）集合类（例如 ArrayList、LinkedList）。利用它们来保存您的飞机实例。

这两项更改应该会大大减少您需要编写/维护的代码量，并且程序的整体复杂性应该会大大降低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:59:26.913

使用面向对象设计时，请将您的对象视为实际对象的表示。您的飞机类别应该代表一架实际的飞机。飞机应该跟踪与之相关的事物。因此，航班号、速度、高度等内容应该是该类的属性。

```
public class Aircraft{
    private int speed;
    private int altitude;
    private int flightNum;
    //
    //Regional Airliner, Military, Private Plane, etc.
    private String type;

    public void setSpeed(int speed){
        this.speed = speed;
    }
    public int getSpeed(){
        return speed;
    }
    //
    //TODO: Getters and Setters for the rest of the aircraft properties

} 
```

现在几乎所有其他事情都应该由您的 ATControl 类处理。在这种情况下，使用 Aircraft 类型的数组列表似乎更合乎逻辑。

```
public class ATControl{
    private ArrayList<Aircraft> currentFlights;

    //
    //Constructor gets called on initialization
    public ATControl(){
        currentFlights = new ArrayList<Aircraft>();
    }

    //
    //User input should be handled in main class and passed into this
    public void addFlight(int flightNum, int speed, int altitude){
        Aircraft newCraft = new Aircraft();

        //
        //assign the properties we just got from the user to our new aircraft
        newCraft.setFlightNumber(flightNum);
        newCraft.setSpeed(speed);
        //
        //Now add our new flight to the list of current flights
        currentFlights.add(newCraft);

    }

} 
```

您的主要课程几乎可以保持原样。不过，我会在那里处理所有用户输入。

```
public class Main {

    static Scanner in = new Scanner(System.in);

    public static void main(String[] args) {
       ATControl denverTrafficControl = new ATControl();
       //
       //Handle user input here: get the speed, altitude, flightNum, etc..

       denverTrafficControl.addFlight(flightNum, speed, altitude);

    }
} 
```

这就是应该这样做的方式。希望这有助于您更好地掌握面向对象的设计。让主类处理 I/O，而您的其他实际“对象”类处理数据。祝你好运。

# javascript - 将表单输入传递给 highcharts 然后重建图表

> ID：11726167
> 
> 赞同：1
> 
> 时间：2012-07-30T17:02:39.997
> 
> 标签：javascript, jquery, ruby-on-rails, highcharts

我正在使用 highcharts 从数据库中的值表生成图表。我希望能够选择一个日期范围以传递给 highcharts javascript。

我正在使用 jquery 日期选择器。所以这些值被填写在表格中

```
<form id='myform'>
<label for="from">From</label>
<input type="text" id="from" name="from"/>
<label for="to">to</label>
<input type="text" id="to" name="to"/>
<div class="demo">
<input type="submit" value="Submit"> 
```

并希望将其提交给 highcharts

```
$(function() {
        new Highcharts.Chart({ 
```

这都位于视图中。在脚本标签中。有人能告诉我如何将输入表单中的日期值传递到这个 javascript 函数中，然后使用用户输入值重建页面上的图表吗？如何访问“to”和“from”标签然后刷新图表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:51:37.250

您应该通过访问从输入字段中获取日期：

```
document.getElementById('from').value; 
```

编辑：更好的方法是使用 jQuery datepicker 事件：

```
$('.selector').datepicker({
    onSelect: function(dateText, inst) { ... }
}); 
```

并尝试将日期作为 javascript 日期对象获取。

要设置图表轴的范围，您可以使用：

```
chart.xAxis[0].setExtremes(Date.UTC(startYear, startMonth - 1, startDay), Date.UTC(endYear, endMonth - 1, endDay)); 
```

在您的提交功能中。设置轴极值后，图表将自动重绘。

# c++ - 如何从另一个函数执行一个函数？

> ID：11726169
> 
> 赞同：2
> 
> 时间：2012-07-30T17:02:44.967
> 
> 标签：c++, qt, function

我有这个代码：

```
#ifndef FUNCSTARTER_H
#define FUNCSTARTER_H

#endif // FUNCSTARTER_H

#include <QObject>

class FunctionStarter : public QObject
{
    Q_OBJECT
public:
    FunctionStarter() {}
    virtual ~FunctionStarter() {}

public slots:
    void FuncStart(start) {
        Start the function
    }
}; 
```

在 FuncStart 函数中，您可以将函数作为参数放入，然后它会执行该参数（也称为函数）。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:06:06.280

要么你传递一个函数指针，要么你定义一个仿函数类。仿函数类是重载 operator() 的类。这样，类实例就可以作为函数调用。

```
#include <iostream>

using namespace std;

class Functor {
public:
    void operator()(void) {
        cout << "functor called" << endl;
    }   
};

class Executor {
    public:
    void execute(Functor functor) {
        functor();
    };  
};

int main() {
    Functor f;
    Executor e;

    e.execute(f);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T17:04:59.523

您将函数指针作为参数传递。这称为**回调**。

```
typedef void(*FunPtr)();  //provide a friendly name for the type

class FunctionStarter : public QObject
{
public:
    void FuncStart(FunPtr) { //takes a function pointer as parameter
        FunPtr();  //invoke the function
    }
};

void foo();

int main()
{
    FunctionStarter fs;
    fs.FuncStart(&foo); //pass the pointer to the function as parameter
                        //in C++, the & is optional, put here for clarity
} 
```

# c++ - 数值向量运算符重载+右值参考参数

> ID：11726171
> 
> 赞同：9
> 
> 时间：2012-07-30T17:02:56.543
> 
> 标签：c++, operator-overloading, numerical, rvalue-reference

我有下面的数字向量模板类（用于数值计算的向量）。我正在尝试编写`D=A+B+C`所有变量都是`Vector`对象的位置。`A`,`B`且`C`不应修改。我的想法是使用`Vector operator+(Vector&& B)`，以便在（希望）`Vector`从返回Rvalue`B+C`之后，所有后续添加都存储在该对象中，即为所有后续添加窃取 Rvalue 的存储。这是为了消除新对象的创建和所需的存储。

我的问题是我可以从每个`Vector operator+(Vector&& B)`从未调用过的函数的输出语句中看到。我不明白为什么，因为如果我有一个重载的虚拟函数`foo(Vector& B)`和`foo(Vector&& B)`try `foo(A+B+C)`，那么第二个函数会完全按照我的希望调用。

很抱歉这个冗长的问题，但这是我在这里的第一个问题，我想尽可能清楚。

关于我明显做错了什么或为什么我不应该尝试这个的任何建议，将不胜感激。

```
template <typename T>
class Vector
{
        int n;
        T* v;
        Vector();
        ~Vector();
        Vector(const Vector& B);
        Vector(Vector&& B);
        inline Vector operator+(const Vector& B) const;
        inline Vector operator+(Vector&& B) const;
};

template <typename T>
Vector<T>::Vector(const Vector<T>& B)
{
        ...
}

template <typename T>
Vector<T>::Vector(Vector<T>&& B)
{
        ...
}

template <typename T>
Vector<T> Vector<T>::operator+(const Vector<T>& B) const
{
        Vector<T> C;
        ...
        return C;
}

template <typename T>
Vector<T> Vector<T>::operator+(Vector<T>&& B) const
{
        ...do stuff to B
        return B;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T17:10:35.577

在表达式中：

```
D=A+B+C 
```

`A`并且`B`是左值，所以调用`A+B`调用`Vector::operator(const Vector&)`

它返回一个右值，我们称之为`tmp`，所以下一个子表达式是`tmp+C`。

`C`也是一个左值，所以它`Vector::operator(const Vector&)`再次调用。返回另一个右值，让我们调用它`tmp2`

最后的子表达式是`D=tmp2`，但您的类型没有移动赋值运算符，因此使用了隐式定义的复制赋值运算符。

即，您永远不会`operator+`在右侧使用右值调用，并且唯一具有右值参数的表达式是您尚未为右值定义的赋值。

最好定义重载*的非成员*运算符：

```
Vector operator+(const Vector&, const Vector&);
Vector operator+(Vector&&, const Vector&);
Vector operator+(const Vector&, Vector&&);
Vector operator+(Vector&&, Vector&&); 
```

这适用于右值和左值的任何组合。（总的来说`operator+`，无论如何通常应该是非会员。）

**编辑：**下面的替代建议不起作用，在某些情况下会导致模棱两可。

如果您的编译器支持它（我认为只有 clang 支持），另一种选择是保留您现有的`Vector::operator+(Vector&&)`但`Vector::operator+(const Vector&)`用两个由 ref-qualifier 区分的重载替换您的：

```
Vector Vector::operator+(const Vector& v) const&
{
  Vector tmp(*this);
  tmp += v;
  return tmp;
}

Vector Vector::operator+(const Vector& v)&&
{
  *this += v;
  return std::move(*this);
} 
```

当已知它是右值时，它会重用`*this`，即当加法的左侧是右值时它使用移动语义，而原始代码只能在右侧是右值时使用移动语义。（注意，上面的代码假设您已经按照`operator+=`David Rodriguez 的回答中的建议定义了一个成员）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:22:21.987

我建议您将其`operator+=`作为成员方法提供，然后从`operator+`定义为的自由函数中重用该方法：

```
template <typename T>
Vector<T> operator+( Vector<T> lhs,              // by value
                     Vector<T> const & rhs ) {
    lhs += rhs;
    return lhs;
} 
```

`a + b + c`给定一个分组为的调用，编译器将为第一次调用`(a+b) + c`创建一个副本，在原地 ( ) 修改该副本，然后*将其移动*到返回值中。然后它将返回的值（除非它忽略移动）*移动*到 second 的参数中，在那里它将再次被修改，然后*移动*到返回值。`a``operator+``lhs += rhs`**`operator+`**

 ***总体而言，将创建一个新对象，保存 的结果`a+b+c`，提供等效于的语义：

```
Vector<T> tmp = a;
tmp += b;
tmp += c; 
```

但有了更好、更紧凑的语法`a + b + c`。

* * *

请注意，这不会很好地处理`a + (b+c)`，并且会创建*两个*对象，如果您想支持它，您将需要产生多个重载。***

# php - 无法确定 wordpress 侧边栏内容来自

> ID：11726178
> 
> 赞同：1
> 
> 时间：2012-07-30T17:03:27.930
> 
> 标签：php, wordpress

我继承了这个项目，原来的设计师早就不在了。而且我对 Wordpress 不是很熟悉。

在[这个页面上](http://coloradohypnosis.com.s51572.gridserver.com/medical-hypnosis/)，我不知道这个侧边栏是如何生成的。我`grep`在整个目录中寻找诸如“Bill Johnson”或“Rocky Mountain News”之类的内容，但它不在 Wordpress 文件中。因此，它必须是数据库的一部分。

但是该网站没有小部件或帖子。在 Pages 下，我没有看到包含侧边栏的选项。

这是 wp-content/themes 目录中的代码。

边栏.php： `<?php print get_post_meta($post->ID, "sidebar_var", true); ?>`

页面.php：

```
<div id="content">
    <div id="left">

    <?php if (have_posts()) : ?>
        <?php while (have_posts()) : the_post(); ?>
            <?php the_content('Read the rest of this entry &raquo;'); ?>
        <?php endwhile; ?>
    <?php else : ?>
        <p>Sorry, no posts matched your criteria.</p>
    <?php endif; ?>

    <!-- End #left --><br class="cl" /></div>

<?php get_sidebar();?>

  <!-- End #content --><br class="cl" /></div>

<?php get_footer();?> 
```

非常感谢任何指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:50:51.727

感谢 Cthulhu 的建议，检查数据库，`wp_postmeta`表中有一条记录，`meta_key`字段设置为 value `sidebar_var`。同一记录的`meta_value`字段具有侧边栏 html。不知道为什么最初的设计师会这样做，但我会重构以使用小部件。

# php - 从自制软件在 Mac OSX Lion 上安装 php 5.4 - 缺少 mysqli 扩展

> ID：11726190
> 
> 赞同：7
> 
> 时间：2012-07-30T17:04:31.003
> 
> 标签：php, macos, mysqli, installation

[我从homebrew](https://github.com/josegonzalez/homebrew-php/)安装了 php 5.4 ，还有 mysql。我正在使用带有网络共享的内置 Apache 服务器。

我安装了 phpMyAdmin，它告诉我：缺少 mysqli 扩展。

我做了以下步骤：在我设置的 php.ini 中：

```
extension = mysqli.so
mysqli.default_socket = "/tmp/mysql.sock" 
```

然后重新启动 Apache。

当我检查时，`phpinfo()`我没有看到任何 Mysql 扩展。*phpMyAdmin*中的错误仍然存​​在。

我基本上不知道如何检查 Mysqli 是否随我的 PHP 安装一起提供。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-01T11:11:44.863

你需要安装支持mysql的php。因此，如果您已经安装了 php54，那么：

```
brew uninstall php54 
```

然后

```
brew install php54 --with-mysql 
```

希望有帮助！

# android - Android 如何处理下载图像的大小？

> ID：11726192
> 
> 赞同：0
> 
> 时间：2012-07-30T17:04:31.967
> 
> 标签：android

我正在开发一个应用程序，该应用程序在启动时会从网络下载图像并将其显示在主要活动中。

我担心的是此图像在具有不同屏幕密度的设备上的大小。

**例如**：假设我正在下载一个 400x200 像素的图像。它会在 Galaxy S (480x800 res) 和 Galaxy S3 (1280x720 res) 上显示为 400x200，还是在 Galaxy S3 上调整为更大的尺寸？

关于它如何工作以及在处理下载的图像时如何与不同屏幕兼容的任何提示？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:13:20.720

除非网站做了一些花哨的用户代理切换来为请求的图像提供不同的分辨率，否则图像文件应该是相同的。但是，在显示图像时，它将调整大小以适应屏幕（例如，如果在 ImageView 中缩放）。由于不同设备的内存限制不同，如果您检索的图像未进行下采样，则在显示时可能会遇到内存不足错误（文件大小保持不变，只是内存大小是这里的问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:32:45.710

假设您在 ImageView 中显示图像，您确实需要关注以下几件事：

ImageView 上的 layout_width/layout_height 和 scaleType 设置。

Android 将根据这些设置处理放大/缩小。

如果需要，您可以动态调整宽度/高度。使用类似于以下的代码：

```
// banner image layout adjustment
LayoutParams lp = mImageView.getLayoutParams();
lp.width = mImageView.getDrawable().getIntrinsicWidth() ;
lp.height = mImageView.getDrawable().getIntrinsicHeight() ;
mImageView.setLayoutParams(lp); 
```

但要小心将此视图保持在一些预定义的范围内……例如设备屏幕的宽度/高度。

# jquery - 基于点击的if语句

> ID：11726193
> 
> 赞同：0
> 
> 时间：2012-07-30T17:04:38.097
> 
> 标签：jquery, click, if-statement

我正在尝试检查 div 元素的 html 是否包含“您输入的代码不正确”。但是，我需要在点击发生后检查这是否属实。到目前为止，这是我所拥有的：

```
if($('.wpcf7-form-control').click()) {
    if($('.wpcf7-not-valid-tip-no-ajax').html() == 'Your entered code is incorrect.'){
        $('.sidebar-demo').delay(800).click();
    }
    else{
        $('#formalert').delay(800).click();
    }
} 
```

这会产生无限循环的点击，我很确定我错误地形成了语句，但被卡住了。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:09:22.367

您必须将处理程序函数传递给 click 事件。此外，jquery-ify 表单一次，然后使用它。查询相同元素的 DOM 既昂贵又多余。

```
 - Edits: Use "===" it tests for value and type, does not use coercion.

    - Edits: Declare your variables with only one var statement.

    - Edits: This is purely a stylistic preference but I use a "$" when I jQuery select an element to remind myself that it has been jQueryified.

 var $wpcformControl = $('.wpcf7-form-control'),
 $wpcf7Ajax = $('.wpcf7-not-valid-tip-no-ajax'),
 $sideBarDemo = $('.sidebar-demo'),
 $formAlert = $('#formalert');

 $wpcformControl.click(function() {
     if($wpcf7Ajax.val() === 'Your entered code is incorrect.') {
         $sideBarDemo.delay(800).click();
     }
     else{
         $formAlert.delay(800).click();
     }
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:10:09.443

尝试：

```
$('.wpcf7-form-control').click(function() {

    if($('.wpcf7-not-valid-tip-no-ajax').text() == 'Your entered code is incorrect.') {
        $('.sidebar-demo').delay(800).click();
    }
    else{
        $('#formalert').delay(800).click();
    }

}); 
```

不确定是否可以强制单击页面元素，尽管就像您在这里尝试做的那样：

```
$('#formalert').delay(800).click(); 
```

和这里：

```
$('.sidebar-demo').delay(800).click(); 
```

我记得一年前这是可能的，但我认为较新的浏览器现在出于安全原因限制了这一点。

# css - sublimelinter：csslinter 的问题

> ID：11726195
> 
> 赞同：0
> 
> 时间：2012-07-30T17:04:40.707
> 
> 标签：css, node.js, sublimetext

我已经在 mac os x mountain lion (10.8) 中安装了 sublime text 2，以及插件 sublime linter。对于 css 验证，插件需要 node.js。

当我启动 sublime text 时，控制台会显示：

```
ValueError: Error from csslint: /Users/carloslopez/Library/Application Support/Sublime Text 2/Packages/SublimeLinter/sublimelinter/modules/libs/csslint/linter.js:23
    var report = CSSLint.verify(code, ruleset);
                         ^
TypeError: Cannot call method 'verify' of undefined
    at Object.exports.lint (/Users/carloslopez/Library/Application Support/Sublime Text 2/Packages/SublimeLinter/sublimelinter/modules/libs/csslint/linter.js:23:26)
    at Socket.<anonymous> (/Users/carloslopez/Library/Application Support/Sublime Text 2/Packages/SublimeLinter/sublimelinter/modules/libs/jsengines/node.js:31:31)
    at Socket.EventEmitter.emit (events.js:85:17)
    at Pipe.onread (net.js:424:51) 
```

如何解决？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:51:37.480

捆绑的 csslint-node.js 已损坏。使用 npm 为 node.js 提供的 csslint-node.js 作为解决方法

[https://registry.npmjs.org/csslint/-/csslint-0.9.8.tgz](https://registry.npmjs.org/csslint/-/csslint-0.9.8.tgz)

# android - 在 Android 谷歌地图中显示路线

> ID：11726196
> 
> 赞同：0
> 
> 时间：2012-07-30T17:04:54.307
> 
> 标签：android, json, google-maps, google-maps-api-3, kml

由于谷歌禁用了 kml 输出，我不知道如何使用 JSON 显示两个地理点之间的路线。有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:23:47.693

生成行车路线的选项有：

1.  [Google Maps API v3 路线](https://developers.google.com/maps/documentation/javascript/directions)服务

2.  [Google Maps API 网络](https://developers.google.com/maps/documentation/directions/)服务

Web 服务将返回[JSON](https://developers.google.com/maps/documentation/directions/#JSON)。

# c# - WCF Restful 服务 GET/POST

> ID：11726209
> 
> 赞同：8
> 
> 时间：2012-07-30T17:06:03.047
> 
> 标签：c#, wcf, rest

我可以做这样的事情吗？

```
[OperationContract]    
[WebInvoke
  (  
    Method = "POST",
    ResponseFormat = WebMessageFormat.Json,
    RequestFormat = WebMessageFormat.Json,
    BodyStyle = WebMessageBodyStyle.Bare,
    UriTemplate = "/abc{integerParam}"
  )
]
ResultStruct abc( int integerParam, CustomClass secondParam ); 
```

这里的想法是我可以在 url 中传递第一个参数（整数），但 secondParam 来自 POST。这甚至可能吗？

我从 WCF REST 开始，不确定如何分配参数。任何指示都会有所帮助，谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-30T18:49:46.793

是的，你可以，这里来自[A Guide to Designing and Building RESTful Web Services](http://msdn.microsoft.com/en-us/library/dd203052.aspx)

```
[ServiceContract]
public partial class BookmarkService
{
    [WebInvoke(Method = "PUT", UriTemplate = "users/{username}")]
    [OperationContract]
    void PutUserAccount(string username, User user) {...}

    [WebInvoke(Method = "DELETE", UriTemplate = "users/{username}")]
    [OperationContract]
    void DeleteUserAccount(string username) {...}

    [WebInvoke(Method = "POST", UriTemplate = "users/{username}/bookmarks")]
    [OperationContract]
    void PostBookmark(string username, Bookmark newValue) {...}

    [WebInvoke(Method = "PUT", UriTemplate = "users/{username}/bookmarks/{id")]
    [OperationContract]
    void PutBookmark(string username, string id, Bookmark bm) {...}

    [WebInvoke(Method = "DELETE", UriTemplate = "users/{username}/bookmarks/{id}")]
    [OperationContract]
    void DeleteBookmark(string username, string id) {...}
    ...
} 
```

对我来说，这种设计 RESTful Web 服务的方式很糟糕。这个 ServiceContrcat 是：

*   **不可维护**，脆弱的远程接口
*   必须创建太多方法
*   多态性不存在

我相信，远程接口应该是**稳定**和**灵活**的，我们可以使用基于消息的方法来设计 Web 服务。

你可以在这里找到详细的解释：[Building RESTful Message Based Web Services with WCF](http://www.codeproject.com/Articles/712689/Building-RESTful-Message-Based-Web-Services-with-W)，代码示例在这里：[Nelibur](https://github.com/Nelibur/Nelibur) and Nelibur nuget package [here](https://www.nuget.org/packages/Nelibur)

# regex - 如何创建一个正则表达式来标识两个没有嵌入字符的字符串

> ID：11726213
> 
> 赞同：1
> 
> 时间：2012-07-30T17:06:09.150
> 
> 标签：regex, vba

我试图在 VBA 中识别一个正则表达式，它将识别括号内两个字符串的出现，没有插入括号。

例如，搜索字符串 A 是`ccc`，搜索字符串 B 是`yyy`。

所以，这个目标字符串：

`(aaa, xxx (ccc,ddd, yyy) abc)`

由于以下匹配，应该返回 true：

`(ccc, ddd, yyy)`

但是这个目标字符串：

`(aaa, xxx (ccc, abc) yyy)`

`(ccc, yyy)`应该返回 false ，因为由于中间的右括号它没有匹配。

我试过使用“非”字符，例如，

`\(.*ccc[^\(\)]*yyy*\)`

这就是说“只要在两者之间 *没有*`ccc`出现 1 次或多次左括号或右括号，就给我带有and的字符串。`yyy`

 *但是它一直返回整个字符串。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:25:24.997

我想你有两个问题

1.  要匹配的模式。我用了`".*?(\(" & strIn1 & "[^\)]+" & strIn2 & "\))"`
2.  返回匹配的部分

关键部分是，即在第二个字符串之前的*任何地方*
`"[^\)]+"`
都不能有右括号

 *```
Function ValidateText(strIn1 As String, strIn2 As String, strTarget As String) As String
Dim objRegex As Object
Dim bMatch As Boolean
Set objRegex = CreateObject("vbscript.regexp")
With objRegex
s = ".*?\(.*(" & strIn1 & "[^\)]+" & strIn2 & ".*\))"
.Pattern = ".*?\(.*(" & strIn1 & "[^\)]+" & strIn2 & ").*\)"
bMatch = .TEst(strTarget)
If bMatch Then
ValidateText = "this portion matched " & vbNewLine & .Replace(strTarget, "$1") & vbNewLine & "for " & strIn1 & " " & strIn2
Else
ValidateText = "no match for " & vbNewLine & .Replace(strTarget, "$1") & vbNewLine & "for " & strIn1 & " " & strIn2
End If
End With
End Function

Sub Test1()
MsgBox ValidateText("ccc", "yyy", "(aaa, xxx (ccc,ddd, yyy) abc)")
MsgBox ValidateText("ccc", "yyy", "(aaa, xxx (ccc, abc) yyy)")
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:28:20.497

对此的简单解决方案：

```
\( ?ccc ?, ?yyy ?\) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T00:00:53.273

这是做你想做的吗？我不是最好的正则表达式，但我认为你需要否定两个括号。顺便说一句，“*”是零个或多个，所以这里`[^\(^\)]*`的意思是零个或多个不是左括号或右括号的字符：

```
\(.*ccc[^\(^\)]*yyy.*\) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T17:32:35.267

在您提出的 regex`\(.*ccc[^\(\)]*yyy*\)`中，第一个实例的`.*`消耗量将超过您的预期，因为[VBA 正则表达式是贪婪的](http://msdn.microsoft.com/en-us/library/ms235254.aspx)- 这对于带有`*+?`量词的正则表达式来说是正常的。

如果要匹配“包含我的搜索字符串 'foo' 和我的搜索字符串 'bar'，但不包含子表达式的左括号和右括号”，一种获取方法如下：

```
\([^\)]*foo[^\)]*bar[^\)]*\) 
```

此正则表达式将涵盖 foo 和 bar 在同一组括号中的大多数情况。但是，这与文本不匹配

```
(foo, (baz, qux), bar) 
```

即使你暗示它应该。你需要它来匹配那个案例吗？

您可能还想查看 MSDN 参考页面以获取有关惰性`*+?`量词的信息，如果您想为此构建一个真正强大的正则表达式，您将需要了解[反向引用和后向断言](http://msdn.microsoft.com/en-us/library/thwdfzxy)。**

# mobile - 移植移动应用程序的最佳方式

> ID：11726214
> 
> 赞同：0
> 
> 时间：2012-07-30T17:06:19.977
> 
> 标签：mobile, cross-platform

我是安卓开发者。

我需要创建在单个代码库上运行的不同应用程序（单个应用程序但在不同设备上运行），并使它们在 iPhone、meego 手机和 Windows 手机上运行。

我该如何开始？哪个是用于移植到不同平台的最佳 IDE？

请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:16:38.627

[PhoneGap](http://phonegap.com/)是著名的跨平台应用程序框架

# java - 构造函数和类的奇怪行为。应用程序在构造函数上永远挂起

> ID：11726215
> 
> 赞同：0
> 
> 时间：2012-07-30T17:06:33.653
> 
> 标签：java

**更新注意：**调试后，我问了另一个问题的结果：[Class Constructor failed throwing Exception on Class Loading](https://stackoverflow.com/questions/11738383/class-constructor-fails-throwing-exception-on-class-loading)

首先，我想不出一个更好的名字来回答我的问题，我要问的是：**WEIRD BEHAVIOR**。如果您认为更合适的内容，请编辑。

现在，我将尽可能地简化它，遗憾的是我不能放弃给我带来问题的代码。

我有一个**A 类**、一个**B 类**和一个**Z 类**。

**A 类和 B 类**非常相似，都有一个具有相同参数的构造函数，并且每个都有一个调用 SOAP Web 服务的方法，一个执行**Operation A**，另一个执行**Operation B**。

现在，有什么问题？`Class Z`实例化两者`Class A`，`Class B`然后 on`someMethod()`调用对象的方法分别执行操作 A 和 B。

由于某种原因，似乎没有调用 ClassB 的构造函数，并且从调用构造函数的那一刻起没有打印任何内容，程序**永远**`System.out.println()`挂起，我的意思是，它永远不会抛出异常或继续做任何事情。看看 A 类和 BI 类的第一行如何打印一个标志，它不为 B 类打印。

 ****我试过的**

1.  在`ClassZ`我更改了 Class A 和 B -> **RESULTS**的顺序：它挂在同一个地方，现在甚至没有调用 Class A 构造函数和方法
2.  在 ClassB 上，我评论了所有内容，并开始逐条取消评论，从 Constructor 开始，然后是 MethodB，这就是我卡住并来到这里的地方，因为我发现的内容对我和我工作场所的任何人都没有意义。**结果->**

    **2.1**如果我评论所有内容，`methodB`但最后返回 false 并保持 Constructor 原样，它会继续正常执行

    **2.2**如果我取消注释 2.1 上的所有内容，加上`methodB`它从 WebService 调用 operationB 并检查其结果的部分，它会继续正常执行

    **2.3**如果我再取消注释，当我开始使用数据库时，它就会挂起。

3.  我检查了到数据库的连接数，它仍然有很多可用的

**让我感到困惑的是，如果它与数据库相关，为什么它会像这样挂在构造函数上？**

**普遍事实**

1.  我正在使用 JDBC 连接到 MySQL 数据库
2.  我有 try{}catch(Exception e){} 周围的所有内容，并且我在 e 上打印所有内容，但它只是不打印任何内容，没有抛出异常。

这是他们的样子：

**A类：**

```
// ClassA.java

public ClassA{
    private UserInfo user;
    private WebServiceADelegate port;
    private Connection conn;

    public ClassA (UserInfo user, Connection conn) throws Exception {
        System.out.println("CLASS A CONSTRUCTOR");
        this.user = user;
        this.conn = conn;
        this.port = new WebServiceAService().getForwardingPort();
    }

    public boolean methodA(List<String> list){
        // Check some stuff on database using this.conn
        // Get the values to invoke SOAP service using this.conn
        status = port.operationA(values);
        if(status > 0)
            return true;
        return false;
    }

} 
```

**B类：**

```
// ClassB.java

public ClassB{
    private UserInfo user;
    private WebServiceBDelegate port;
    private Connection conn;

    public ClassB (UserInfo user, Connection conn) throws Exception {
        System.out.println("CLASS B CONSTRUCTOR");
        this.user = user;
        this.conn = conn;
        this.port = new WebServiceBService().getForwardingPort();
    }

    public boolean methodB(List<String> list){
        // Check some stuff on database using this.conn
        // Get the values to invoke SOAP service using this.conn
        status = port.operationB(values);
        if(status > 0)
            return true;
        return false;
    }

} 
```

**Z类：**

```
// ClassZ.java

public ClassZ{
    private Connection conn;
    // ...        
    // ...
    public boolean someMethod (){
        System.out.println("GONNA CALL CONSTRUCTOR ClassA");
        ClassA webservice = new ClassA(user, conn);
        System.out.println("GONNA CALL METHOD FROM ClassA");
        if (!webservice.methodA(list) ){
            return false;
        }

        System.out.println("GONNA CALL CONSTRUCTOR ClassB");
        ClassB webservice2 = new ClassB(user, conn);
        System.out.println("GONNA CALL METHOD FROM ClassB");
        if (!webservice2.methodB(list) ){
            return false;
        }
        return true;
    }
} 
```

挂起时的最后一个输出总是：`"GONNA CALL CONSTRUCTOR ClassB"`

谢谢！

**更新：**

我调试了我的应用程序并修复了它，但它仍然很奇怪。明天我会详细说明，看看是否有人可以告诉我发生了什么。

长话短说：我`javax.persistence.NoResultException`在 ClassB 上导入，并且在 methodB 内部的某个点上我正在做`try{}catch(NoResultException nre){ //...}`......由于某种原因，当 JVM 在调用 Constructor 之前调用 ClassLoader 时，它抛出了上述异常，并且从那时起的行为很奇怪，执行结束。

涉及线程，这就是为什么我虽然挂了，但没有挂，线程结束了，我没有注意到。

附加说明：ClassB**没有**使用 JPA，并且它的导入和捕获不正确，一些非常旧的代码设法幸存下来。但是我认为这并不能证明错误是合理的。

我问了另一个问题，一个与调试结果有关的问题。您可以在[Class Constructor failed throwing Exception on Class Loading中检查它](https://stackoverflow.com/questions/11738383/class-constructor-fails-throwing-exception-on-class-loading)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:37:23.260

好吧，很难用提供的信息说，但一些提示我会检查：

1.  首先使用调试器并**进入**构造函数以真正确定它挂在哪里。知道它是构造函数调用是不够的。走进去。
2.  Web 服务调用很有可能挂起。所以你调用一个 webmethod，它不会永远返回。所以你的程序永远挂起。
3.  挂起可以是任何东西，但是当您处理数据库时，挂起很可能来自数据库锁。当您没有正确提交/回滚时，您很容易在此处产生死锁。

一些疯狂的猜测，但也许它有帮助......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:29:47.580

1.  该应用程序并没有永远挂起。这段代码在另一个线程中运行，所以当它执行失败时它在我没有注意到的情况下完成。
2.  问题实际上是在调用构造函数时。我的类路径中没有该类`javax.persistence.NoResultException`，因此 JVM ClassLoader 在创建实例时找不到它，并且在检查依赖项时它崩溃了。
3.  即使调试也很难找出问题所在，因为我有很多 try{}catch(Exception e){} 但即使`ClassLoader.loadClass()`JVM ClassLoader 说它会抛出**异常**（[ClassLoader.loadClass() 签名是](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#loadClass%28java.lang.String%29):)`public Class<?> loadClass(String name) throws ClassNotFoundException`它实际上是抛出一个[NoClassDefFoundError](http://docs.oracle.com/javase/6/docs/api/java/lang/NoClassDefFoundError.html)，它**不会扩展异常**，它扩展了 Throwable，因此没有被我捕获`catch(Exception e){}`，我必须这样做`catch(Throwable t){}`。
4.  至于为什么它会抛出一些不同的东西，那是因为 Java 的内部类加载是如何工作的。它比仅仅调用 loadClass 要复杂一些。它必须加载、链接、验证和初始化它。在某些时候，它应该`NoClassDefFoundError`在调用时抛出一个`defineClass()`。更多信息可以[在 JLS 的执行部分找到](http://docs.oracle.com/javase/specs/jls/se5.0/html/execution.html#44459)

有关正在发生的事情的更详细答案，请在调试后检查我关于此问题的其他问题，并且接受的答案[Class Constructor failed throwing Exception on Class Loading](https://stackoverflow.com/questions/11738383/class-constructor-fails-throwing-exception-on-class-loading)**

# ios - cocos2d 使对象跟随触摸/手指

> ID：11726218
> 
> 赞同：0
> 
> 时间：2012-07-30T17:06:45.293
> 
> 标签：ios, cocos2d-iphone

我用 cocos2d 制作了我的第一个应用程序，所以我在这里很新

我的第一个问题：

我不会让物体（船）跟随我的手指。

```
-(void) ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event
{
    CGPoint location = [self convertTouchToNodeSpace: touch];
    NSLog(@"location X: %f", location.x);
    NSLog(@"location Y: %f", location.y);

    if(startGameButtonIsPressed == YES) {
        [boat runAction: [CCMoveTo actionWithDuration:1 position:location]];
    }
} 
```

它确实跟随，但它不是流动的。如果我快速移动手指，它就会停止，并且只有在我停止时才会跟随。

**第二个问题**

如何计算两点之间的距离。

```
CGPoint currentLocation = ccp(boat.position.x, boat.position.y);    
float distanceApart = ccpDistance(currentLocation, location); 
```

问题是，currentLocation 在每个点上都不是恒定的，它每次都有其他值......为什么？

也许是因为我有滚动背景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:23:58.000

您`[boat runAction: [CCMoveTo actionWithDuration:1 position:location]];`每秒调用多次，这会导致多个`CCMoveTo`操作同时运行。这不是**cocos2d 的 Action 工具**的设计用途。

如果您希望小船以您定义的较慢速度跟随触摸，则您不能将多个动作排队`CCMoveTo`以响应`ccTouchMoved:`。

相反，将`UITouch`对象（或`NSValue`s 的`CGPoint`s）推到`NSMutableArray`. 然后定义一个回调函数，让您的船在每次 CCMoveTo 完成后保持移动。

示例代码：

```
//...defined elsewhere, e.g. your header file:
    #define kBoatMoveTag 123

    NSMutableArray *touchQueue; //treat the array like a queue.
                                //don't forget to alloc it before using.

-(void) ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event
{
    CGPoint location = [self convertTouchToNodeSpace: touch];
    NSLog(@"location X: %f", location.x);
    NSLog(@"location Y: %f", location.y);

    [touchQueue insertObject:[NSValue valueWithCGPoint:location] atIndex:0];
    [self continueBoatMovement];
}

-(void)continueBoatMovement {
    //if no queued point, or boat is already moving...
    if(touchQueue.count < 1 || [boat getActionByTag:kBoatMoveTag]) {
        return; //dont do anything 
    }

    NSValue valueOfPt = [touchQueue lastObject];
    [touchQueue removeLastObject];
    CGPoint newPt = [valueOfPt CGPointValue];
    float distance = ccpDistance(boat.position, newPt);
    float duration = distance / boatSpeed; //you must define boatSpeed somewhere

    CCMoveTo *move = [CCMoveTo actionWithDuration:duration position:newPt];

    CCSequence *moveSeq = [CCSequence actionOne:move two:[CCCallFunc actionWithTarget:self selector:@selector(continueBoatMovement)]];
    moveSeq.tag = kBoatMoveTag;
    [boat runAction:moveSeq];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T10:57:04.133

```
- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event{
    CGPoint location = [touch locationInView:[touch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];
    //Declare the lastTouchLocation as a CGPoint
    lastTouchLocation = location;
}

-(void) ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event
{
    CGPoint location = [self convertTouchToNodeSpace: touch];    
    CGPoint moveBy = ccpSub(location, lastTouchLocation);
    //Vary the duarion to make the sprite move slower.
    [self runAction:[CCMoveBy actionWithDuration:1 position:location]];
    lastTouchLocation = location;
} 
```

在 cocos 2d ver 2 中，触摸调度程序是 CCDirector 的一部分，不再是单例类。因此调用它以使委托函数工作。

```
[[[CCDirector sharedDirector] touchDispatcher] addTargetedDelegate:self priority:0 swallowsTouches:NO]; 
```

# jquery - Jquery - 隐藏一个 ID，除非另一个 ID 可见

> ID：11726220
> 
> 赞同：1
> 
> 时间：2012-07-30T17:06:47.660
> 
> 标签：jquery, hide, visible

这是我的脚本，我不确定我缺少什么来完成这项工作，这将有助于解决很多问题。谢谢

```
$(document).ready(function() {
    $("#btnUpdate1_div, #btnAddress1_div, #btnUpdate2_div, #btnAddress2_div").hide();
    $("#StepArea_lnkAddressBook, #StepArea_linkToAddressBookItem").hide();
    if ("#StepArea_warningAddressBook") {
        $("#StepArea_lnkAddressBook, #StepArea_linkToAddressBookItem").show();
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T17:07:48.990

您可以使用`.is(':hidden')`或`.is(':visible')`喜欢以下内容：

```
if( $("#StepArea_warningAddressBook").is(':hidden') ) {  // change condition what you want
  $("#StepArea_lnkAddressBook, #StepArea_linkToAddressBookItem").show();
} 
```

相关参考：

*   **[。是（）](http://api.jquery.com/is/)**

*   **[：可见的](http://api.jquery.com/visible-selector/)**

*   **[：隐](http://api.jquery.com/hidden-selector/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:01:52.587

好的，我得到了答案，我必须改变我提出问题的方式。

```
$(document).ready(function() {
if ($("#StepArea_lnkAddressBook, #StepArea_linkToAddressBookItem").is(":visible")){
 $("#StepArea_lnkAddressBook, #StepArea_linkToAddressBookItem").hide();
}else if (
    $("#StepArea_warningAddressBook").is(':visible')) {
        $("#StepArea_lnkAddressBook, #StepArea_linkToAddressBookItem").show();
} 
```

});

# php - 控制器中的 CakePHP“使用”变量似乎改变了模型行为？

> ID：11726221
> 
> 赞同：1
> 
> 时间：2012-07-30T17:06:50.693
> 
> 标签：php, cakephp, cakephp-2.0

当我使用控制器的默认模型并且不设置 $uses 变量时，模型的行为与它们各自模型文件中的声明相同。但是，当我使用 $uses 变量时，似乎没有附加任何行为或验证标准。

例子：

```
 class OrdersController extends CakeCartAppController {
        public $helpers = array('CakeCart.ProductDisplay');
        public $components = array('CakeCart.AuthorizeNet','Security');
        public $uses = array('Order','CompanyLogin','Invoice');//COMMENTING THIS LINE OUT MAKES IT WORK! 
```

……

```
 //see if order information validates
     $this->Order->set($orderinfo);
     if ($this->Order->validates()) {//ONLY WORKS WHEN THE USES VARIABLE IS NOT DECLARED 
```

编辑！

自己解决了，麻烦了。基本上，由于这是一个插件，您必须在插件的命名空间中声明“使用”关联：

```
 public $uses = array('CakeCart.Order','CompanyLogin','CakeCart.Invoice'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:51:14.710

自己解决了，麻烦了。基本上，由于这是一个插件，您必须在插件的命名空间中声明“使用”关联：

```
public $uses = array('CakeCart.Order','CompanyLogin','CakeCart.Invoice'); 
```

# iis - IIS 7 查询字符串长度

> ID：11726224
> 
> 赞同：3
> 
> 时间：2012-07-30T17:06:58.867
> 
> 标签：iis, asp.net-web-api

我正在使用 Asp Net Mvc 4 Web Api，我需要使用查询字符串长度 > 2000 个符号发出请求

我已经在 web.config 中设置了 maxQueryStringLength="10000" 参数。在我的开发人员机器上一切正常在 IIS 上，它仅在 querystring < 2000 个符号时才有效，但如果 querystring > 2000 个符号我得到一个错误：404 Not Found

有什么考虑吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-06-04T11:59:58.497

聚会迟到了，但是，这是我们为了摆脱它而改变的三点：

在`web.config`中，添加`httpRuntime`标签属性`maxQueryStringLength`：

```
<system.web>
  <httpRuntime maxQueryStringLength="32768" />
</system.web> 
```

再次在 中`web.config`，添加`requestLimits`标签属性`maxQueryString`：

```
<system.webServer>
  <security>
    <requestFiltering>
      <requestLimits maxQueryString="32768" />
    </requestFiltering>
  </security>
<system.webServer> 
```

如果仍然无法治愈，请从 IIS 配置`ISAPI Filters`部分中删除 `UrlScan`过滤器。最后一个在我的情况下成功了。但是，请注意，它会带来安全风险。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T17:10:34.490

您是否还设置了 maxUrl 长度？

> maxUrl 可选的 uint 属性。
> 
> 指定 URL 的最大长度，以字节为单位。
> 
> 默认值为 4096。

[http://www.iis.net/ConfigReference/system.webServer/security/requestFiltering/requestLimits](http://www.iis.net/ConfigReference/system.webServer/security/requestFiltering/requestLimits)

# c# - 如何显示结构的字段？

> ID：11726225
> 
> 赞同：4
> 
> 时间：2012-07-30T17:06:59.663
> 
> 标签：c#, debugging, struct

我创建了一个结构：

```
public struct User {
   public string name;
   public string email;
   public string age;
} 
```

然后创建一个：

```
 User user = new User();
 user.name = "Freewind";
 user.email = "abc@test.com";
 user.age = 100; 
```

然后显示它：

```
MessageBox.Show(user.ToString()); 
```

我希望它可以打印用户结构的所有字段，但事实并非如此。它只是显示：

```
MyApp.User 
```

有没有一种简单的方法来显示结构的所有字段？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T17:09:07.737

覆盖`ToString`结构上的方法：

```
public override string ToString()
{
    return String.Format("name={0}, email={1}, age={2}", this.name, this.email, this.age);
} 
```

请注意，这不是自动的，您必须手动将任何字段/属性添加到字符串中。

通过反射，您可以执行以下操作：

```
public override string ToString()
{
    Type type = this.GetType();
    FieldInfo[] fields = type.GetFields();
    PropertyInfo[] properties = type.GetProperties();
    User user = this;

    Dictionary<string, object> values = new Dictionary<string, object>();
    Array.ForEach(fields, (field) => values.Add(field.Name, field.GetValue(user)));
    Array.ForEach(properties, (property) =>
        {
            if (property.CanRead)
                values.Add(property.Name, property.GetValue(user, null));
        });

    return String.Join(", ", values);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:12:52.000

使用反射并循环遍历所有属性，如下所示： var sourceProperties = typeof(User).GetProperties();

```
 foreach (PropertyInfo sourceProperty in sourceProperties)
  {
    MessageBox.Show( sourceProperty.Name );
    MessageBox.Show( sourceProperty.GetValue( user, null, null ) );
  } 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:50:24.473

显示结构的内容非常容易，在初始化结构后，您需要做的就是确保准确指定要显示的新“用户”对象中的变量。这可以通过在新的“用户”对象名称之后添加一个句点来完成，如下所示：

```
MessageBox.Show(user.name); 
```

这将显示“用户”对象的名称。这可以通过将“name”替换为“email”或“age”来使用任何其他用户对象变量轻松完成。顺便说一句，通常最好将诸如年龄（或任何数字）之类的东西存储在“int”或“byte”中，因为这使您可以比尝试将数字存储在字符串中更容易地更改值。这是一个例子：

```
public struct User {
    public string name;
    public string email;
    public int age;
}

or

public struct User {
    public string name;
    public string email;
    //use a byte to hold a value between 0 and 255 (most people don't live to be 255)
    public byte age;
} 
```

当试图显示这个变量时，只需在变量名称后使用“ToString()”，如下所示：

```
MessageBox.Show(user.age.ToString()); 
```

这会将 int 或 byte 转换为字符串，以便可以在“MessageBox.Show”方法中使用。希望这有帮助！

编辑：此外，当尝试显示结构中的所有变量时，只需执行以下操作：

```
MessageBox.Show("Name: " + user.name + Environment.NewLine + "Email: " + user.email + Environment.NewLine + "Age: " + user.age + Environment.NewLine); 
```

这将显示：

```
Name: FreeWind
Email: abc@test.com
Age: 100 
```

消息框内。

# haskell - Haskell，不同类型列表的列表，检索值（frac knapsack prob）

> ID：11726229
> 
> 赞同：0
> 
> 时间：2012-07-30T17:07:10.350
> 
> 标签：haskell, knapsack-problem

到目前为止，我正在尝试在 haskell 中解决分数背包问题

代码：

```
{- Input "how much can the knapsack hole <- x" "Possible items in sack [(label, value, weight), ...]" -}
knap x [] = []
knap x y = if length y == 1 then 
```

输入列表的形式为 [([Char], Integer, Integer), ... ] 列表列表（字符列表、整数和整数）。

我的问题是试图找出可能放入背包的每件物品的标签、价值和重量。（从列表列表中提取值）

在我的前奏>提示中，我正在做一些尝试

ghci 输出：

```
Prelude> let x = [("label 1", 2, 14), ("label 2", 1, 15)]
Prelude> :t x
x :: [([Char], Integer, Integer)]
Prelude> length x
2
Prelude> x !! 0
("label 1",2,14)
Prelude> x !! 0 !! 1

<interactive>:1:1:
    Couldn't match expected type `[a0]'
                with actual type `([Char], Integer, Integer)'
    Expected type: [[a0]]
      Actual type: [([Char], Integer, Integer)]
    In the first argument of `(!!)', namely `x'
    In the first argument of `(!!)', namely `x !! 0' 
```

如您所见，我正在尝试做清单！指数 ！！尝试从“项目”中拉出重量的索引。执行此操作的正确语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:17:03.870

`(a,b,c)`是一个元组，而不是一个列表。你不能`!!`在元组上使用。毕竟：`!!`元组的类型是什么？

从元组中获取值的方法是使用这样的模式匹配：

```
let (name, x, y) = theTuple in
-- ... 
```

模式匹配通常也是获得列表头部的首选方式。因此，处理元组列表的函数通常看起来像这样：

```
f [] = -- handle the empty list
f ((name, x, y) : rest) =
  -- do something with name, x and y and then recurse on rest 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T17:20:03.017

好吧，该`!!`运算符仅适用于列表，正如您从其类型签名中看到的那样：`[a] -> Int -> a`.

如果您想坚持使用元组，您可以为 3 元组定义自己的函数，其风格为[`fst`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3afst)和[`snd`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3asnd)。您可以通过模式匹配来做到这一点；就像是：

```
first :: (a,b,c) -> a
first (a,_,_) = a 
```

但是，最好为项目设计数据类型，并使用记录来提取您需要的字段。

```
data Item = Item { label  :: String
                   value  :: Int
                   weight :: Int
                 } 
```

然后制作一个`x`可以使用的新项目`let x = Item {label = "label 1", value = 2, weight = 14}`

Now you could model your knapsack as a list of items of type `[Item]`, and to get the value of the first item, you could use `value $ knapsack !! 0`, where `knapsack` is your list of items.

# android - 创建表语句中的 Sqlite 异常

> ID：11726231
> 
> 赞同：3
> 
> 时间：2012-07-30T17:07:14.857
> 
> 标签：android, sqlite

我有`database`两张桌子。最近，我插入了一个新行（`key_today`），我得到以下信息`sqlite` `exception`：

```
android.database.sqlite.SQLiteException: near "text": syntax error: create table tasks (_id integer primary key autoincrement, title text not null,location text not null, body text not null ,  goaldate text not null ,  absolutedate text not null ,  currentdate text not null ,  prio text not null,  done text not null,  category text not null,  timespent text not null,  pososto text not null,  father text not null,  check text not null ); 
```

我已经更改了方法以包含新行，但我真的找不到我做错了什么。

这是我的代码，提前谢谢你

```
public static final String KEY_TITLE = "title";
public static final String KEY_BODY = "body";
public static final String KEY_ROWID = "_id";
public static final String KEY_FATHER="father";//father's id
public static final String KEY_location = "location";
public static final String KEY_GOAL_DATE = "goaldate";
public static final String KEY_ABSOLUTE_DATE = "absolutedate";
public static final String KEY_DATE_CURRENT = "currentdate";
public static final String KEY_PRIO= "prio";
public static final String KEY_DONE = "done";
public static final String KEY_CATEGORY = "category";
public static final String KEY_TIME_SPEND = "timespent";
public static final String KEY_POSOSTO = "pososto";
public static final String KEY_TODAY= "check";

public static final String KEY_STITLE = "atitle";
public static final String KEY_ROID = "_id"; 
public static final String KEY_SCOLOR = "color";

private static final String TAG = "ListDatabase";
/**
 * @uml.property  name="mDbHelper"
 * @uml.associationEnd  
 */
private DatabaseHelper mDbHelper;
private SQLiteDatabase mDb;

/**
 * Creating   database tables
 */
private static final String DATABASE_CREATE =
    "create table tasks (_id integer primary key autoincrement, "

    + "title text not null,"
    +"location text not null, " 
    + "body text not null , "
    +" goaldate text not null , "
    +" absolutedate text not null , "
    +" currentdate text not null , "
    +" prio text not null, "
    +" done text not null, "
    +" category text not null, "
    +" timespent text not null, "
    +" pososto text not null, "
    +" father text not null, " 
    +" check text not null );"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T17:20:06.157

`Check`是[SQLite 中的保留字](http://www.sqlite.org/lang_keywords.html)；尝试重命名该列或将其放在 SQL 语句中的（转义）双引号中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T17:19:04.753

以下是导致问题的原因：

```
... check text not null)
    ^^^^^ 
```

[`check`](http://www.sqlite.org/lang_keywords.html)是 SQLite（和一般的 SQL）中的关键字。

将其放在这样的双引号中以避免此类问题：

```
... "check" text not null) 
```

# django - Django CMS 页面随机出现 NoReverseMatch 错误

> ID：11726234
> 
> 赞同：2
> 
> 时间：2012-07-30T17:07:30.110
> 
> 标签：django, mod-wsgi, django-cms

我将 Django CMS 2.3 用于具有类似配置的几个项目。奇怪的是，对于一个项目，我在随机时间不断收到随机页面的 NoReverseMatch 错误：

```
TemplateSyntaxError: Caught NoReverseMatch while rendering: Reverse for 'cms_page_change_template' with arguments '(12L,)' and keyword arguments '{}' not found. 
```

刷新错误页面后，它再次工作。从追溯看来，错误发生在试图呈现 CMSToolbar 时。我只在带有 mod_wsgi 的服务器上收到此错误。我无法在开发服务器上本地复制它。

你有任何线索，可能是什么问题？你经历过类似的事情吗？

# android - 每天更新安卓应用？

> ID：11726236
> 
> 赞同：1
> 
> 时间：2012-07-30T17:07:35.817
> 
> 标签：android, google-play

所以我有一个我正在开发的安卓游戏，它依赖于每天都有一个新的“关卡”或谜题。现在，我正在考虑每天向 Google Play 推出更新。这似乎是一种幼稚的方法，所以我想知道是否有人对我每天如何获取新内容有更好的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T17:11:21.897

您可以将新关卡上传到 a `server`，手机会自动检查是否有新关卡可用。

看看[parse](http://www.parse.com)，它们为您的 Android 应用程序提供服务器功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:52:03.463

如果可能的话，我会说你应该尝试将拼图中的所有内容表示为 json 字符串。您可能需要也可能不需要本地数据库，但我认为您可能希望每次拉取存储超过一天，原因是因为您不能指望每天都进行可靠更新，因此最好每次抓取几个时间。只需将您成功安装的最后一个发送到服务器。Parse 很好，但您将数据和信息交给第三方。您可以将拼图存储在 SharedPreferences 中。只需确保每个拼图都有一个日期和唯一编号。JSON 是获取和接收数据的首选方式。您可以在 Jersey 中轻松地将自己的服务器实现为 restful 服务，但如今许多服务也是用 php 或 python 编写的。因此，您只需要一项服务即可。而已。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T18:06:21.763

我同意 json 方法，您可以有一个更新端点，将本地存储中的 json 文件与您网站上的文件进行比较。如果它们不同，请获取新源并返回，否则返回类似

```
{status:"up to date"} 
```

一旦你有了这个工作，我会把“源”扔到redis或memcache中，让你的更新端点在你正在读取的密钥和你的更新脚本将要写入的密钥之间切换。

```
var active = 0;
var cache = new Array();
var cache[0] = new Buffer();
var cache[1] = new Buffer();

function ReadActive() {
  return cache[active];
}

function WriteToMirror(newValue) {
  cache[1-active] = newValue;
  active = 1 - active;
}

function UpdateStatus(currentValue) {
  var cacheValue = cache[active];
  if(cacheValue  === currentValue)
    return {status:"up to date"};

  return cacheValue;
} 
```

# html - 如何停止在 div 之外显示图像

> ID：11726238
> 
> 赞同：28
> 
> 时间：2012-07-30T17:07:38.917
> 
> 标签：html, css

考虑这段代码...

```
<div id="outer" style="position:absolute;width:100px;height:100px;border:1px solid black">
  <div id="inner">
    <img src="http://rabbitempire.org/wp-content/uploads/Pet-Rabbit-Facts.jpg">
  </div>
</div> 
```

我需要添加什么样式才能使它只有图像的左上角可见？

请注意，我不想使用背景图像，因为问题实际上是关于 div 的，信不信由你，但兔子不是我的应用程序的一部分。哦，在“现实生活”中，我不会使用内联 CSS。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-30T17:11:20.253

```
div#outer { overflow:hidden; }​ 
```

在这里演示：http: [//jsfiddle.net/J34aJ/](http://jsfiddle.net/J34aJ/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-12-16T16:00:49.847

您可以只应用`img { max-width: 100%; height: auto; }`到图像标签

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-30T17:12:21.813

您可以丢失`#inner`div 并添加`overflow: hidden;`到`#outer`div。

```
#outer {
  overflow: hidden;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T17:09:27.893

就这么简单：

```
overflow: hidden; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T17:11:54.127

重写你的外部 div 样式以应用`overflow:hidden`

```
<div id="outer" style="position:absolute;width:100px;height:100px;border:1px solid black; overflow:hidden;">
      <div id="inner">
        <img src="http://rabbitempire.org/wp-content/uploads/Pet-Rabbit-Facts.jpg">
      </div>
    </div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T17:12:00.697

添加`overflow: hidden`到您的`#outer`规则：http: [//jsfiddle.net/saluce/qJWte/](http://jsfiddle.net/saluce/qJWte/)

```
<div id="outer" style="position:absolute;width:100px;height:100px;border:1px solid black; overflow: none">
  <div id="inner">
    <img src="http://rabbitempire.org/wp-content/uploads/Pet-Rabbit-Facts.jpg">
  </div>
</div>​ 
```

# php - 如何使用 PHPExcel 设置公式“=''Sheet Name''!B10”

> ID：11726242
> 
> 赞同：1
> 
> 时间：2012-07-30T17:08:05.863
> 
> 标签：php, phpexcel

这个想法是从工作表 a 到工作表 b 设置动态值，其中工作表 b 的新值随着工作表 a 值的变化而变化。

在这里，我定义了所有可用于将值从工作表 a 设置到工作表 b 的方法，但所有这些方法都不是动态更新的。

```
$ba = $objPHPExcel->getSheet(1)->getCell('B10')->getCalculatedValue();

$objPHPExcel->getActiveSheet()->setCellValue('B12', $ba); 
```

我使用的代码是准确的，但它设置了 B10 的计算值，它等于“=SUM(B4:B5)”，它给出了一个值“X”并在 Excel 表上打印“X”。

如果我使用

```
$ba = $objPHPExcel->getSheet(1)->getCell('B10')->getValue(); 
```

“不是 getCalculatedValue()”

在这种情况下，它将创建一个公式`'=SUM(B4:B5)'`并生成 B4 到 B5 值的总和，但来自同一张工作表而不是来自我要从中获取的工作表。

实际的公式是`='sheet name'!B10`

但是当我用这个作为

```
$objPHPExcel->getActiveSheet()->setCellValue('B12', '=''Fixed Cost''!B10'); 
```

这将产生错误。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T17:17:56.030

```
$objPHPExcel->getActiveSheet()->setCellValue('B12', "='Fixed Cost'!B10"); 
```

# match - 跨两个工作簿中的多个列的 VLOOKUP

> ID：11726245
> 
> 赞同：1
> 
> 时间：2012-07-30T17:08:15.237
> 
> 标签：match, vlookup, excel

我有 2 个工作簿。

首先被称为`June2122.xls`

它具有`Last Name`(B2:B300)、`First Name`(C2:B300) 等列...

其次是`June Emails.xls`

它具有`Last Name`(B2:B300)、`First Name`(C2:C300)、`Email Address`(D2:D300) 等列。这三列位于一个名为`Data_Table`

我需要做的是将`First Name`and `Last Name`(B2:C2) from`June2122.xls`与`First Name`and `Last Name`(B2:C2) from 进行比较`June Emails.xls`。`June Emails.xls`如果它们匹配，那么我需要将（D2）中的电子邮件地址填充到新的单元格中`June2122.xls`

所有单元格都被格式化为“常规”。

我已经尝试了几个公式，我得到的最接近的是这个：

`=IF(ISNA(VLOOKUP(B2,'June Emails.xls'!Data_Table,2,TRUE)),0,VLOOKUP(C2,'June Emails.xls'!Data_Table,3,TRUE))`

我得到的只是电子邮件应该填充的单元格中的“错误”。

有人能帮忙吗？首先十分感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T14:41:18.330

嗨，我知道这是一个老话题，但我刚刚发现堆栈溢出，

以下公式将根据连接值进行查找，而无需添加额外的连接字段

```
=IFERROR(INDEX(Sheet1!C$2:C$7,MATCH((A2&B2),(Sheet1!A$2:A$7&Sheet1!B$2:B$7),0),0),0) 
```

**注意：这是一个数组公式，所以记得使用 Ctrl-Shift-Enter 让它工作:)

所以你可以看到每个部分引用的内容（对不起，我使用了我自己的虚拟数据）这是两个数据表

上面的公式在 Sheet2 的单元格 C2 中使用，并针对 Sheet1 列 A 和 B 查找 Sheet2!A2 和 B2 的值

![表 1](../Images/eb957055b49a273695c2197c53a3cb0a.png)

![表 2](../Images/f676e155c33a7ac1238806030f050f28.png)

弄清楚这个公式为我节省了几天的工作时间，我希望它有所帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:38:08.843

我想到了。出于演示目的，我将用于测试工作簿。

`test1.xlsx`, 包含名字、姓氏、电话号码且没有电子邮件地址的工作簿 ![在此处输入图像描述](../Images/39ea46be9e15783c9a53d9f50e5ac455.png)

`test2.xlsx`, 包含名字、姓氏和电子邮件地址的工作簿 ![在此处输入图像描述](../Images/5cad4467c7541f2b88049ca1bedd8a86.png)

所以我需要通过使用 VLOOKUP 检查名称是否匹配来`test2.xlsx`填充每条记录的电子邮件地址。`test1.xlsx`

**步骤 1.)**我必须组合`first_name`和`last_name`字段并将值存储在一个单元格中。

去做这个：

**一种。**在每个工作簿中创建一个新列。我给它取名`full_name` ![在此处输入图像描述](../Images/38e48804e7b51048633b7eb8947e00eb.png)

![在此处输入图像描述](../Images/9508d42668da7a749ffdc9e976300d27.png)

**湾。**在每个工作簿的新列中，创建 forumla `=(A2&B2)`。这会将两个值连接在一起。像这样：

![在此处输入图像描述](../Images/b2384253cc2af5e4709e38279ebde048.png)

**C。**然后选择该新`full_name`列中的所有字段并复制然后粘贴特殊>值（以摆脱公式）

![在此处输入图像描述](../Images/11097285178a3a09b9c0c4a3c56ae111.png)

**步骤 2.)**现在我们有了新列，其中包含需要在每个工作簿中查找的数据，我们将在工作簿中创建一个包含电子邮件地址 ( `test2.xlsx`) 的新范围。所以突出显示这两列`full_name`并`email_address`定义一个名称。

![在此处输入图像描述](../Images/666c2ba833f0e97e19b4664564797145.png)

**第 3 步。）**现在返回您的`test1.xlsx`工作簿（没有填充电子邮件地址的工作簿）并在空`email_address`单元格（我们将从 E2 开始）中，在公式栏中输入以下公式：

`=VLOOKUP(D2,test2.xlsx!emailinfo,2,FALSE)`

请记住，VLOOKUP 函数的语法是：

`= VLOOKUP ( lookup_value , table_array , col_index_num , range_lookup )`

**第 4 步。）**现在假设某人没有电子邮件地址，比如 Tom Jones。我们将`#N/A`在我们的单元格中获得一个令人讨厌的值： ![在此处输入图像描述](../Images/720ef0f54067c7aa057e723c6132a294.png)

要摆脱这个：

**一种。**通过单击 1 选择所有列标题 ![在此处输入图像描述](../Images/ac04c540f00cde48443ea66ae26c0a2a.png)

**湾。**单击数据 > 过滤器图标。取消选中`(Select All)`并仅选中`#N/A`。 ![在此处输入图像描述](../Images/13592447f4b51166227a15e80b9ba214.png)**C。**单击确定。回到工作簿，只需突出显示包含值的电子邮件字段`#N/A`并删除。

**前：**

![在此处输入图像描述](../Images/e9d6d3f5bedcec6230e997a6b93022cc.png)

**后：**

![在此处输入图像描述](../Images/55a7c2a2ea3f3399248b3311a06cd895.png)

**d。**要么关闭你的过滤器，要么回到过滤器设置并重新检查，现在你将拥有看起来干净的空白空间，`(Select All)`而不是到处都是令人讨厌的s。`#N/A`

（显然，对于像这样的小表，上面的内容似乎有点不切实际，但我正在使用的 ACTUAL 工作簿包含数千条记录，所以这些技巧非常方便）

希望这对将来的其他人有所帮助！请留下任何意见或替代方案或建议，我们始终感谢您的反馈！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:10:41.387

在没有看到数据的情况下，我最好的问题是您希望“FALSE”作为 VLookup 中的最后一个标准，而不是“真”，因为您想要完全匹配。

[http://office.microsoft.com/en-us/excel-help/vlookup-HP005209335.aspx](http://office.microsoft.com/en-us/excel-help/vlookup-HP005209335.aspx)

另外：您能否使用跟踪公式评估来准确告诉我们论坛的哪一部分导致“错误”答案。

# google-app-engine - 用于 Google App Engine 上自定义域的 SSL 的 Google 帐户登录重定向循环

> ID：11726248
> 
> 赞同：4
> 
> 时间：2012-07-30T17:08:23.483
> 
> 标签：google-app-engine, ssl, redirect-loop

我在我的 Google App Engine 应用程序 ( [https://www.gqueues.com](https://www.gqueues.com) ) 上为自定义域设置了 SSL (VIP )。

对于我的大多数用户来说，一切都很好。使用 Google Apps 帐户（使用 OpenId）登录的用户完全没有问题。大多数使用 Google 帐户登录的用户也没有任何问题。

但是，少数 Google 帐户用户收到重定向循环错误

(ERR_TOO_MANY_REDIRECTS) 当他们尝试登录时，如下图所示。

![重定向循环](../Images/46369a0fe709abb488fa7d2146291a7f.png)

这是我用来创建登录 url 的代码。过去 3 年它运行良好，唯一改变的是它现在转到 https 而不是 http：

```
loginURL = users.create_login_url("https://www.gqueues.com/main") 
```

*主页*面需要登录：

```
@login_required
def get(self): 
```

我无法使用我的任何测试帐户或机器重现重定向循环。但是，我的一位用户报告说它似乎在这两个地址之间循环：

```
https://appengine.google.com/_ah/loginform?state=xxxxxxxxxxx
https://www.gqueues.com/_ah/conflogin?state=xxxxxxxxxxxxxx 
```

在有关重定向循环的其他一些 SO 帖子中，人们建议其中一些身份验证页面正在被缓存，但我已经检查过，所有这些页面都使用没有被缓存的 302 重定向。

![伊姆古尔](../Images/e1b816d98f8e6490dbac3b73e329d14d.png)

此外，我已经让有问题的用户清除了他们的浏览器缓存和 cookie，并确保他们没有阻止第三方 cookie，但这些都没有帮助。该问题发生在各种浏览器和操作系统上，因此我认为它与特定设置无关。

唯一可行的方法是让有问题的用户在 apppot 地址上访问我的应用程序： [https ://gqueues-hrd.appspot.com](https://gqueues-hrd.appspot.com)

当然，这根本不是真正的解决方案。我在 GAE 上花费数千美元购买 SSL 证书和 VIP 的原因是，用户看到的所有内容都在我的自定义域中（因此我使用的是自己的证书，而不是来自 Google 的共享证书）。

有没有人（尤其是 App Engine 团队的）知道发生了什么？似乎问题出在 App Engine 中实现的 Google 帐户登录代码的某个地方，或者可能与自定义域代码的新 SSL 相关。

非常感谢，

卡梅伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:57:43.570

我们认为我们已经发现了 App Engine 方面的问题，并且我们正在努力修复。谢谢！

# angularjs - 在 AngularJS 中对 DOM 进行后处理

> ID：11726249
> 
> 赞同：1
> 
> 时间：2012-07-30T17:08:39.970
> 
> 标签：angularjs

我想将 target="_blank" 添加到通过链接过滤器的 HTML 片段中。也就是说，我需要在内容完全渲染*后对 DOM 进行后处理。*

看到这个 jsFiddle。

[http://jsfiddle.net/ADukg/410/](http://jsfiddle.net/ADukg/410/)

我怀疑这与指令的优先级有关，但到目前为止改变它并没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T18:00:04.360

你可以用这样的 setTimeout 来做到这[一点](http://jsfiddle.net/ADukg/411/)。即使时间为0，它也只会在角度完成处理后运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T10:22:36.693

问题是链接过滤器将在评估指令后添加“a”标签，而 element.find('a') 将找不到任何东西。

我认为最好的解决方案是编写自己的 url 过滤器，然后调用链接过滤器并且不使用指令。

**更新**

我也为此创建了一个 jsfiddle：http: [//jsfiddle.net/jomikr/ADukg/420/](http://jsfiddle.net/jomikr/ADukg/420/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-07T08:21:07.917

1.  打开文件`angular-sanitize.js`
2.  转到**第 525 行**
3.  将其更改为`writer.start('a', {href:url, target:'_blank'});`

警告 - 现在，linky 将为每个链接添加目标 _blank！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-27T16:58:45.047

Renan 的答案效果很好，但不适用于页面加载后添加的链接。

如果您需要将 _target 空白添加到新链接，请尝试使用带有监视事件的过滤器：

**JS**

```
app.directive('targetBlank', function() {
    return {
        restrict: 'A',
        link: function(scope, element, attrs) {
            scope.$watch(attrs.targetBlank, function(){
                element.find('a').attr('target', '_blank');
            });
        }
    };
}); 
```

**HTML**

```
<div ng-bind-html="textModel | linky" target-blank="textModel"></div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-15T07:49:00.790

以及仅使用控制器中的功能怎么样。

我在控制器中使用它：

```
$scope.getTarget = function(isExternal) {
    return isExternal ? '_blank' : '';
} 
```

在html中：

```
<div ng-repeat="slide in slides" data-slider-id="{{$index}}">
    <a ng-hide="{{slide.link == ''}}" 
       href="{{slide.link}}" 
       target="{{getTarget(slide.isExternal)}}">
... 
```

# asp.net-mvc-3 - 对 WCF Web 服务进行身份验证

> ID：11726253
> 
> 赞同：1
> 
> 时间：2012-07-30T17:09:12.153
> 
> 标签：asp.net-mvc-3, wcf, rest, wcf-security

我们有一个 WCF RESTful 服务在 IIS 7 上运行并运行良好。我们的用户通过来自我们的 MVC3 网站的一些调用访问它，该网站位于单独的 Web 服务器上并使用表单身份验证。

我们想让事情变得更安全一点，这样不仅任何人都可以调用服务上的方法；只有在 MVC 网站中经过身份验证的人才能成功进行这些调用。非常感谢有关如何以这种方式限制 Web 服务调用的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:15:24.800

您可以在 WCF 服务端启用表单身份验证，如[本文](http://msdn.microsoft.com/en-us/library/bb398990.aspx)所示（通过启用`ASP.Net Compatibility Mode`）。确保客户端（MVC 应用程序）和服务器都使用相同的 machineKey，以便 MVC 应用程序生成的身份验证 cookie 对 WCF 服务仍然有效。然后在调用 REST 方法时，只需将实际的客户端身份验证 cookie 附加到请求中即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:27:08.517

这是一些链接：

1.  [http://www.codeproject.com/Tips/372422/Secure-WCF-RESTful-service-using-OAUTH](http://www.codeproject.com/Tips/372422/Secure-WCF-RESTful-service-using-OAUTH)
2.  [http://www.codeproject.com/Articles/149738/Basic-Authentication-on-a-WCF-REST-Service](http://www.codeproject.com/Articles/149738/Basic-Authentication-on-a-WCF-REST-Service)
3.  [http://www.codeproject.com/Articles/162726/Digest-Authentication-on-a-WCF-REST-Serv](http://www.codeproject.com/Articles/162726/Digest-Authentication-on-a-WCF-REST-Serv)

我更喜欢使用 Auth 协议而不是修改 HTTP 标头的第一种方法。

# excel - 如何在 Excel 或 R 中绘制此类图形？

> ID：11726259
> 
> 赞同：1
> 
> 时间：2012-07-30T17:09:44.217
> 
> 标签：excel, r, graphics

我希望你能帮助我。在这个图形中

![图形](../Images/304152c761a3c0209696b449c6419089.png)

您可以看到数字数据集的密度 D 与 Phi 和 Sigma。如何在 Excel 或 R 中绘制此类图形？我已经用谷歌搜索了，但还没有找到。

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T17:20:30.250

尝试[fill.contour](http://stat.ethz.ch/R-manual/R-patched/library/graphics/html/filled.contour.html)。我稍微编辑了文档中给出的示例（添加`nlevels = 5`）并得到以下内容：

![在此处输入图像描述](../Images/799715a99b801f7961fd5d697aad38d3.png)

它看起来有点像您想要的，但是在没有数据的情况下很难重新创建您的示例。作为参考，这是我使用的代码：

```
require(grDevices) # for colours
filled.contour(volcano, color = terrain.colors, asp = 1, nlevels=5) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T17:12:14.870

以下是帮助您入门的参考：http: [//freecode.com/articles/creating-charts-and-graphs-with-gnu-r](http://freecode.com/articles/creating-charts-and-graphs-with-gnu-r)

# ios - NSLocalizedString 中的“%”符号

> ID：11726265
> 
> 赞同：4
> 
> 时间：2012-07-30T17:10:19.730
> 
> 标签：ios, nslocalizedstring

我有以下代码行：

```
NSLog([NSString stringWithFormat:NSLocalizedString(@"KEY", nil),80.1]); 
```

80.1 是一个浮点数，它被插入到本地化字符串中。这工作正常。但是我想在本地化字符串中有一个 % 符号。我尝试过使用 %%，但它不输出 % 符号 - 而是输出一个空格、数字 5302，并且还删除了 %% 字符之前的部分字符串。

如何在 NSLocalizedString 返回的字符串中添加 % 符号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:12:57.220

我认为问题不在于`NSLocalizedString`，而`NSLog`在于 ' 对`%`符号的解释。如果您将格式字符串传递给`NSLog`，并将您想要显示的字符串作为对象参数，则百分号`%`应该保留：

```
NSLog(@"%@", [NSString stringWithFormat:NSLocalizedString(@"KEY", nil),80.1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T22:25:43.497

或者： NSLog 的第一个参数是格式字符串。你有一个格式字符串，所以你应该把它传递给 NSLog：

```
NSLog (NSLocalizedString (@"KEY", nil), 80.1); 
```

# xml - 使用 VBS 搜索 XML 并更改值

> ID：11726266
> 
> 赞同：1
> 
> 时间：2012-07-30T17:10:19.373
> 
> 标签：xml, vbscript

我创建了一个用于无人值守 Windows7 安装的应答文件。我希望能够即时修改一些设置（时区、计算机名称等），但我是 VBScript/XML 的新手。我在这个站点上找到了一篇整洁的文章[VBScript Find a node in XML node and replace the value](https://stackoverflow.com/questions/7830215/vbscript-find-a-node-in-xml-node-and-replace-the-value?answertab=oldest#tab-top) on how to use xpath。我的一些麻烦是针对节点（我认为），因为我还没有找到使用格式的示例。我试过使用 full 和 just ，但在完整的答案文件中有几个具有相同组件名称的节点。建议...请？:)

```
<unattend xmlns="urn.schemas-microsoft.com:unattend">        
    <settings pass="specialize">
        <component name="Microsoft-Windows-Shell-Setup" processorArchitecture="amd64" publicKeyToken="*REMOVED*" language="neutral" versionScope="nonSxS" xmlns:wcm="http://schemas.microsoft.com/WMIConfig/2002/State" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
            <ProductKey>*REMOVED*</ProductKey>
            <RegisteredOwner>*REMOVED*</RegisteredOwner>
            <DisableAutoDaylightTimeSet>false</DisableAutoDaylightTimeSet>
            <ComputerName>*</ComputerName>
            <DoNotCleanTaskBar>true</DoNotCleanTaskBar>
            <BluetoothTaskbarIconEnabled>false</BluetoothTaskbarIconEnabled>
            <CopyProfile>true</CopyProfile>
            <ShowWindowsLive>false</ShowWindowsLive>
            <TimeZone>VarTime</TimeZone>
        </component>
    </settings>
</unattend> 
```

与 VB 混在一起，我能够自己想出一个人。我很欣赏这篇文章。这也会提示输入用户框。有什么理由为什么这样的事情不能有效地完成工作吗？

```
Set xml = CreateObject("Msxml2.DOMDocument.3.0")

xml.Async = "False"
xml.load "path.xml"

strTime = InputBox("Please Select your Time Zone.")
strTimeZone = "Nothing"         

if strTime= "1" then strTimeZone= "Eastern Standard Time"
if strTime= "2" then strTimeZone= "Central Standard Time"
if strTime= "3" then strTimeZone= "Mountian Standard Time"
if strTime= "4" then strTimeZone= "Pacific Stardard Time"

Set TimeZone = xml.selectSingleNode("//unattend/settings/component/TimeZone")

TimeZone.Text = strTimeZone

'Save the xml document with the new settings.
strResult = xml.save("path.xml") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:48:48.063

这个脚本

```
 Dim oFS    : Set oFS  = CreateObject("Scripting.FileSystemObject")
  Dim sFSpec : sFSpec   = oFS.GetAbsolutePathName("..\testdata\xml\ns-xpath-01.xml")
  Dim sNS    : sNS      = "xmlns:a='urn.schemas-microsoft.com:unattend'"
  Dim oXML   : Set oXML = CreateObject("Msxml2.DOMDocument")
  oXML.setProperty "SelectionLanguage", "XPath"
  oXML.setProperty "SelectionNamespaces", sNS
  oXML.async = False
  oXML.load sFSpec
  If 0 = oXML.parseError Then
     WScript.Echo oXML.xml
     WScript.Echo "-----------------"
     Dim sXPath : sXPath    = "/a:unattend/a:settings/a:component/a:TimeZone"
     Dim ndFnd  : Set ndFnd = oXML.selectSingleNode(sXPath)
     If ndFnd Is Nothing Then
        WScript.Echo sXPath, "not found"
     Else
        WScript.Echo ndFnd.text
        WScript.Echo "-----------------"
        ndFnd.text = "Abracadabra"
        WScript.Echo oXML.xml
     End If
  Else
     WScript.Echo oXML.parseError.reason
  End If 
```

输出：

```
<unattend xmlns="urn.schemas-microsoft.com:unattend">
        <settings pass="specialize">
                <component>
                        <TimeZone>VarTime</TimeZone>
                </component>
        </settings>
</unattend>

-----------------
VarTime
-----------------
<unattend xmlns="urn.schemas-microsoft.com:unattend">
        <settings pass="specialize">
                <component>
                        <TimeZone>Abracadabra</TimeZone>
                </component>
        </settings>
</unattend> 
```

展示了如何在 XPath 表达式中使用**SelectionNamespaces属性和前缀。**

**PS**[在这里](https://stackoverflow.com/a/11782233/603855)查看如何查找/更改属性（使用基本相同的代码） 。

**PP:**

[更多](https://stackoverflow.com/a/15396987/603855)相同。

# php - 修改以删除初始 ul 标签

> ID：11726272
> 
> 赞同：0
> 
> 时间：2012-07-30T17:10:42.430
> 
> 标签：php

如何调整此代码以便从生成的列表中删除第一个 ul 标记？甚至可以这样做吗？

这将是我想要得到的结果：

```
<ul>  <--remove this initial tag
   <li></li>
   <li></li>
</ul>
<ul>
   <li></li>
   <li></li>
</ul> 
```

列表生成器

```
 function buildMenu($parent, $menu)
    {
       $menulist = "";
       if (isset($menu['parents'][$parent]))
       {
          $menulist .= "<ul>\n";
           foreach ($menu['parents'][$parent] as $itemId)
           {
              if(!isset($menu['parents'][$itemId]))
              {
                 $menulist .= "   <li><a href='".$menu['items'][$itemId]['menuURL']."'>".$menu['items'][$itemId]['menuName']."</a></li> \n";
              }
              if(isset($menu['parents'][$itemId]))
              {
                 $menulist .= "   <li><a href='".$menu['items'][$itemId]['menuURL']."'>".$menu['items'][$itemId]['menuName']."</a>";
                 $menulist .= buildMenu($itemId, $menu);
                 $menulist .= "</li> \n";
             }
             }
             $menulist .= "</ul> \n";
       }
       return $menulist;
    }?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:16:18.393

设置分隔符。请注意 $first 添加到函数 vars 中，然后在底部的所有其他调用中添加 FALSE

```
function buildMenu($parent, $menu, $first = TRUE)
{
   $menulist = "";
   if (isset($menu['parents'][$parent]))
   {
       $menulist .= $first ? "" : "<ul>\n";
       foreach ($menu['parents'][$parent] as $itemId)
       {
          if(!isset($menu['parents'][$itemId]))
          {
             $menulist .= "   <li><a href='".$menu['items'][$itemId]['menuURL']."'>".$menu['items'][$itemId]['menuName']."</a></li> \n";
          }
          if(isset($menu['parents'][$itemId]))
          {
             $menulist .= "   <li><a href='".$menu['items'][$itemId]['menuURL']."'>".$menu['items'][$itemId]['menuName']."</a>";
             $menulist .= buildMenu($itemId, $menu, FALSE);
             $menulist .= "</li> \n";
         }
         }
         $menulist .= "</ul> \n";
   }
   return $menulist;
}?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-30T17:19:07.797

代替

```
$menulist .= "<ul>\n"; 
```

经过

```
$menulist .= strlen($menulist) ? "<ul>\n":""; 
```

# java - Grails...返回 PagedResultList 的模拟标准

> ID：11726279
> 
> 赞同：2
> 
> 时间：2012-07-30T17:11:30.597
> 
> 标签：java, hibernate, grails, junit, criteria

在我的控制器中，我有一个使用条件来命中数据库并获取结果的操作。

```
params.max = Math.min(params.max ? params.int('max') : 20, 100)    
def c = DomainObj.createCriteria()
    def result =[]
    result = c.list(params) {
        'eq'("employerid", id)
        } 
```

我以这种方式在我的测试用例中模拟了这个调用：

```
def result=[DomainObj1]         
            def mycriteria =[
                list: {Object params=null,Closure cls -> result}                    
                ]

DomainObj.metaClass.static.createCriteria = {mycriteria} 
```

到目前为止工作正常。

但在控制器中，有一行代码显示 result.totalCount，其中 result 是条件查询的输出，属于 PagedResultList 类型。但是在测试用例中，我将结果模拟为arrayList，而不是PagedResultList。因此，如果从测试用例运行，代码会在 result.totalCount 处中断。

关于如何模拟对 PagedResultList 而不是 arraylist 的标准响应的任何想法，以便它具有 totalCount

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:28:06.173

看看[它的界面](http://grails.org/doc/latest/api/grails/orm/PagedResultList.html)。你可以像这样编写它

```
result = new PagedResultList(list: inctanceList, totalCount: inctanceList.size()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-01T18:44:50.117

对于 Grails3，您可以使用 Groovy 的[`tap`](https://docs.groovy-lang.org/latest/html/groovy-jdk/java/lang/Object.html#tap(groovy.lang.Closure))闭包：

```
PagedResultList<Foo> list = new PagedResultList<Foo>(null).tap {
    totalCount = 23
    resultList = [ foo1, foo2, foo3 ]
} 
```

# ruby-on-rails - 如何使用 Upstart、Unicorn 和 PostgreSQL 启动 Rails 应用程序？

> ID：11726284
> 
> 赞同：1
> 
> 时间：2012-07-30T17:12:12.960
> 
> 标签：ruby-on-rails, ubuntu, upstart, foreman

我使用以下 Upstart 脚本在引导时启动 Rails 应用程序（作为服务）。它适用于 SQLite 作为数据库引擎。我在 Ubuntu 10.04 上，我使用 Unicorn。

```
start on runlevel [2345]
stop on starting rcS
respawn

env RVM_SHELL=/usr/local/rvm/bin/rvm-shell
env RUBY_VERSION="1.9.2"
env APP_ROOT=/home/pillango/pillango/case-management-database
env RAILS_ENV=production

script
  chdir $APP_ROOT
  $RVM_SHELL $RUBY_VERSION -c 'RAILS_ENV=$RAILS_ENV foreman start'
end script 
```

我切换到 Postgres (8.4)。当我使用命令从控制台午餐时，应用程序运行良好，`RAILS_ENV=production foreman start`但我无法让它在启动时启动，就像我使用 SQLite 时一样。

有什么想法可以让它在启动时与 Postgres 一起工作吗？

# java - 可以在老年代创建对象吗？

> ID：11726287
> 
> 赞同：6
> 
> 时间：2012-07-30T17:12:16.790
> 
> 标签：java, garbage-collection

作为一个新创建的对象被分配给新的一代。是否有可能将新创建的对象直接分配给老一代或老一代？如果是，那么基于哪些？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T17:18:47.130

请参阅“[有关 HotspotTM JavaTM 虚拟机中垃圾收集的常见问题](http://java.sun.com/docs/hotspot/gc1.4.2/faq.html)”：

> *对象会直接分配到老年代吗？*
> 
> 在 1.4.1 中有两种情况，分配可能直接发生在老年代。
> 
> 如果年轻代分配失败，并且对象是一个不包含任何对象引用的大数组，则可以直接将其分配到年老代。在某些特定情况下，此策略旨在通过从老年代分配来避免收集年轻代。
> 
> 有一个标志（在 1.4.2 和更高版本中可用）l-XX:PretenureSizeThreshold= 可以设置来限制年轻代的分配大小。任何大于此的分配都不会在年轻代中尝试，因此将被分配到老年代之外。
> 
> 1) 的阈值大小为 64k 字。PretenureSizeThreshold 的默认大小为 0，表示可以在年轻代中分配任何大小。
> 
> 在 1.4.2 案例 1) 中，增量收集器 (-Xincgc) 的 64k 字阈值仍然有效。对于默认收集器和并发收集器（-XX:+UseConcMarkSweepGC），阈值已更改，因此只有在分配的大小大于整个年轻代（可用空间时它是空的）。据观察，在某些情况下，默认收集器和并发收集器的 1.4.1 策略仅导致完全收集（没有进行年轻代收集）。我们认为这足以提高门槛。

# ruby-on-rails - Gemfile 正在加载两次。为什么？我该如何阻止它？

> ID：11726289
> 
> 赞同：3
> 
> 时间：2012-07-30T17:12:33.060
> 
> 标签：ruby-on-rails, ruby, rvm, bundler, gemfile

我的 Gemfile 似乎加载了两次。当我运行 bundle install 我看到...

宝石文件：

```
source 'http://rubygems.org'

gem 'haml'                    # asset engine
gem 'jquery-rails'
gem 'rails',                  '= 3.1.1'
gem 'readable_exceptions'
gem 'sass-rails',             "= 3.1.4"  # asset engine
gem 'uglifier'                # asset engine
gem 'bundler',                ">= 1.0.18" # 1.0.18 is required for proper asset pipeline support
gem "rake", "=0.8.7"
gem "resque"
gem 'date_validator'
gem "typhoeus"
gem 'newrelic_rpm'
gem "scout_rails"
puts "Loading Gemfile" 
```

输出：

```
Loading Gemfile
Loading Gemfile
Using rake (0.8.7) 
Using multi_json (1.3.6) 
Using activesupport (3.1.1) 
```

我相信这会导致我的开发环境出现问题，其中所有内容都被加载了两次。当我使用乘客独立运行服务器时，我有奇怪的日志，例如：

开发日志：

```
/app/models/facebook_application.rb:47: warning: already initialized constant APP_PROPERTIES
/app/models/facebook_application.rb:59: warning: already initialized constant ADJUSTABLE_MIGRATIONS
/app/models/facebook_application.rb:210: warning: already initialized constant MAX_TRIES 
```

什么样的系统问题会导致所有内容都被加载两次？

我是：

*   使用 RVM
*   我已删除所有系统红宝石宝石
*   使用捆绑器
*   我已删除 .rvmrc 文件
*   不使用宝石
*   使用 ruby​​-1.9.2-p320
*   使用导轨 3.1.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:36:40.333

也许我遗漏了一些东西，但看起来 gem 'scout-rails' 后面有一行写着 puts 'Loading Gemfile'

所以也许不是你要加载你的 Gemfile 两次（这实际上不会成为问题，因为我们可以捆绑安装一整天而不会损坏任何东西），但它看起来就像你的那样，因为你放了一条线说它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:39:59.147

这就是 Bundler 的工作方式。它执行一些检查以满足现有的依赖关系。Bundler`Gemfile`在它自己的 DSL 中运行以获得依赖关系树。

Ruby 级别禁止双重要求：第一次`require`加载文件，下一次调用返回`false`表明该文件已经在聚会上，无需再次加载。所以我怀疑 Bundler 会导致你的错误。

顺便说一句，您不必使用`bundle exec`命令`rails`。Rails 核心团队成员[在这里](http://blog.wyeworks.com/2011/12/27/bundle-exec-rails-executes-bundler-setup-3-times)解释了原因。

顺便说一下 #2:`install`是 default`bundle`的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-19T10:17:17.763

我遇到了同样的问题，这是由于`Dsl#eval_gemfile`从以下位置被调用两次引起的：

1.  [https://github.com/bundler/bundler/blob/67320924db1f1910b17fae0a9268b02077874d26/lib/bundler/cli/install.rb#L60](https://github.com/bundler/bundler/blob/67320924db1f1910b17fae0a9268b02077874d26/lib/bundler/cli/install.rb#L60)（当真`@bundler_version >= Gem::Version.new("1.14")`）
2.  [https://github.com/bundler/bundler/blob/67320924db1f1910b17fae0a9268b02077874d26/lib/bundler/cli/install.rb#L62](https://github.com/bundler/bundler/blob/67320924db1f1910b17fae0a9268b02077874d26/lib/bundler/cli/install.rb#L62)

这并不意味着您的 gem 被加载了两次（如前所述，它正在处理 Ruby 的`require`实现）。但是，当您尝试从 gemfile 打印一些信息时，这很烦人。

如果您的问题与一次打印一些信息有关，那么解决方法可能是（没有更好的）：

```
if $YOUR_ONCE_CHECK.nil?
  puts "Doing it only once"
  $YOUR_ONCE_CHECK = true
end 
```

我将在下面放置相应的堆栈跟踪以获取详细信息：

```
gems/bundler-1.17.0/lib/bundler/dsl.rb:47:in `instance_eval'
gems/bundler-1.17.0/lib/bundler/dsl.rb:47:in `eval_gemfile'
gems/bundler-1.17.0/lib/bundler/plugin.rb:60:in `gemfile_install'
gems/bundler-1.17.0/lib/bundler/cli/install.rb:60:in `run'
gems/bundler-1.17.0/lib/bundler/cli.rb:235:in `block in install'
gems/bundler-1.17.0/lib/bundler/settings.rb:143:in `temporary'
gems/bundler-1.17.0/lib/bundler/cli.rb:234:in `install'
gems/bundler-1.17.0/lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'
gems/bundler-1.17.0/lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'
gems/bundler-1.17.0/lib/bundler/vendor/thor/lib/thor.rb:387:in `dispatch'
gems/bundler-1.17.0/lib/bundler/cli.rb:27:in `dispatch'
gems/bundler-1.17.0/lib/bundler/vendor/thor/lib/thor/base.rb:466:in `start'
gems/bundler-1.17.0/lib/bundler/cli.rb:18:in `start'
gems/bundler-1.17.0/exe/bundle:30:in `block in <top (required)>'
gems/bundler-1.17.0/lib/bundler/friendly_errors.rb:124:in `with_friendly_errors'
gems/bundler-1.17.0/exe/bundle:22:in `<top (required)>'
bin/bundle:23:in `load'
bin/bundle:23:in `<main>' 
```

另一个电话：

```
gems/bundler-1.17.0/lib/bundler/dsl.rb:47:in `instance_eval'
gems/bundler-1.17.0/lib/bundler/dsl.rb:47:in `eval_gemfile'
gems/bundler-1.17.0/lib/bundler/dsl.rb:12:in `evaluate'
gems/bundler-1.17.0/lib/bundler/definition.rb:34:in `build'
gems/bundler-1.17.0/lib/bundler.rb:135:in `definition'
gems/bundler-1.17.0/lib/bundler/cli/install.rb:62:in `run'
gems/bundler-1.17.0/lib/bundler/cli.rb:235:in `block in install'
gems/bundler-1.17.0/lib/bundler/settings.rb:143:in `temporary'
gems/bundler-1.17.0/lib/bundler/cli.rb:234:in `install'
gems/bundler-1.17.0/lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'
gems/bundler-1.17.0/lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'
gems/bundler-1.17.0/lib/bundler/vendor/thor/lib/thor.rb:387:in `dispatch'
gems/bundler-1.17.0/lib/bundler/cli.rb:27:in `dispatch'
gems/bundler-1.17.0/lib/bundler/vendor/thor/lib/thor/base.rb:466:in `start'
gems/bundler-1.17.0/lib/bundler/cli.rb:18:in `start'
gems/bundler-1.17.0/exe/bundle:30:in `block in <top (required)>'
gems/bundler-1.17.0/lib/bundler/friendly_errors.rb:124:in `with_friendly_errors'
gems/bundler-1.17.0/exe/bundle:22:in `<top (required)>'
bin/bundle:23:in `load'
bin/bundle:23:in `<main>' 
```

# android - 在 View 的子类中接收广播

> ID：11726293
> 
> 赞同：0
> 
> 时间：2012-07-30T17:12:46.627
> 
> 标签：android, broadcastreceiver

我正在设计一个 的子类`Button`，预计它会不时更新（特别`Broadcasts`是，每当收到特定内容时）。如果我在 . 的上下文中工作`Activity`，我会将广播接收器附加`onResume`在`onPause`. 但是，视图不会接收这些事件，如果我附加了一个侦听器/接收器，我不确定如果包含的活动处于“暂停”状态，我是否能够更新 UI - 同样，我'不想在不需要的时候让听众保持联系。

所以我的问题是，在派生视图中，哪个是监视外部事件（通过侦听器或广播）的最佳方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:54:51.450

我正在做类似的事情，我将 a 子类化了`TextView`。我的结构使得我的所有数据都在 Activity 中接收、处理，然后发送到`TextView`.

我用来发送数据的结构类似于`Observable/Observer pattern`. 我有一个`update()`方法`TextView`可以调用，然后更新文本。我有一个`List`我迭代并在收到数据时`TextViews`调用每个。`update()`为了区分`TextViews`我在实例化时分配了一个静态 ID 变量。

我认为在你的情况下可以做类似的事情。我正在通过 a 接收 JSON 数据，`Socket`因此它应该适用于广播。

# cassandra - 连接到在 CQL 3 中创建的 Cassandra KEYSPACE

> ID：11726294
> 
> 赞同：1
> 
> 时间：2012-07-30T17:12:49.783
> 
> 标签：cassandra

我使用 cassandra cql3 创建了一个 KEYSPACE，并尝试使用 Cassandra jdbc 驱动程序连接到它。当我尝试这样做时，我得到了错误：

java.sql.SQLSyntaxErrorException: InvalidRequestException(why:Keyspace MYKEYSPACE does not exist) at org.apache.cassandra.cql.jdbc.CassandraConnection.(CassandraConnection.java:139) at org.apache.cassandra.cql.jdbc.CassandraDriver.connect (CassandraDriver.java:92) 在 java.sql.DriverManager.getConnection(DriverManager.java:582) 在 java.sql.DriverManager.getConnection(DriverManager.java:207)

连接字符串为：jdbc:cassandra://localhost:9160/MYKEYSPACE ?version=3.0.0

我可以从命令行连接并检查键空间是否存在。(cqlsh -3 本地主机 9160); 使用 KEYSPACE MYKEYSPACE

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:18:51.233

我的猜测：JDBC 区分大小写。试试小写。

# python - 如何将字符串的元素放入具有某种行为的列表中

> ID：11726305
> 
> 赞同：2
> 
> 时间：2012-07-30T17:13:32.303
> 
> 标签：python, list, dictionary

```
list1 =  ['A', 'B']
list2 = [[(1, 1), (1, 2), (1, 3), (1, 4), (2, 1), (2, 2), (2, 3), (2, 4)]] 
```

我需要我的输出：

```
[[(1, 1), (1, 2), (1, 3), (1, 4)],[(2, 1), (2, 2), (2, 3), (2, 4)]] 
```

现在，如果我知道：

*   子列表 1 = 4 的长度
*   sublist2 的长度 = 4

那我怎么能把所有这些都放在字典里，比如：

```
{'A':length of sublist1, 'B':length of sublist2} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T17:27:17.587

使用 split 和 groupby：

```
>>> from itertools import groupby
>>> data = [map(int, (z for z in x.split(','))) for x in string1.split()]
>>> a, b = [list(j) for j in groupby(data, key=operator.itemgetter(0))]
>>> a
[[1, 1], [1, 2], [1, 3], [1, 4]]
>>> b
[[2, 1], [2, 2], [2, 3], [2, 4]] 
```

然后你可以这样做：

```
>>> dict(zip(list1, (len(i) for i in (a,b))))
{'A': 4, 'B': 4} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:26:33.603

您可以按如下方式获取列表列表：

```
from collections import defaultdict

data = defaultdict(list)
for val in string1.split():
    v1, v2 = val.split(',')
    data[v1].append(v2)
result = [[(int(key), int(v)) for v in values] for key, values in data.items()] 
```

要获取字典，您可以执行以下操作：

```
d = dict(zip(list1, result)) 
```

这为您提供了一个包含`list1`as 元素的列表。要获得长度，您可以执行以下操作：

```
d = dict([(key, len(ls)) for key, ls in zip(list1, result)]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T17:28:40.580

看起来你必须稍微处理一下你的数据才能减少到你想要的程度。就像下面第一部分演示的那样，然后您必须创建一个字典，然后在字典中查找值。这是您的示例数据的代码。你应该在此基础上再接再厉。

```
>>> string1 = '1,1 1,2 1,3 1,4 2,1 2,2 2,3 2,4'
>>> list1 = string1.split(',')
>>> list2 = [tuple(map(int, a.split(','))) for a in list1]
[(1, 1), (1, 2), (1, 3), (1, 4), (2, 1), (2, 2), (2, 3), (2, 4)]

>>> temp_dict = {}
>>> for each in list2:
...     a = each[0]
...     if a in temp_dict:
...             temp_dict[a].append(each)
...     else:
...             temp_dict[a] = [each]
... 
>>> temp_dict.values()
[[(1, 1), (1, 2), (1, 3), (1, 4)], [(2, 1), (2, 2), (2, 3), (2, 4)]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T17:36:54.833

获取您的元组列表并根据每个元组中的第一个数字将其拆分为单独的列表。在同一步骤中，将过滤后的列表添加到具有相应键 from 的字典中`list1`。由于`list2`（复制如下）中的双括号，实际数据在`list2[0]`.

```
//note the double brackets, data is in list2[0], not list2
list2 = [[(1, 1), (1, 2), (1, 3), (1, 4), (2, 1), (2, 2), (2, 3), (2, 4)]]

d = dict()

for i in range (0, len(list1)):
     d[list1[i]] = [x for x in list2[0] if x[0] == i+1]
     //on the first run though, list[i] will be 'A' and will be set to [(1, 1), (1, 2), (1, 3), (1, 4)]
     //on the 2nd run though, list[i] will be 'B' and will be set to [(2, 1), (2, 2), (2, 3), (2, 4)] 
```

打印`d`显示格式化数据

```
print(d)
//prints {'A': [(1, 1), (1, 2), (1, 3), (1, 4)], 'B': [(2, 1), (2, 2), (2, 3), (2, 4)]} 
```

编辑：我误读了这个问题（我以为你想要字典中的实际数据，而不仅仅是长度）。要获取列表的长度而不是内容，只需将第二个列表理解包装在`len()`like

```
len([x for x in list2[0] if x[0] == i+1]) 
```

更改后，`d`将包含长度，而不是数据：

```
print(d) //{'A': 4, 'B': 4} 
```

# extjs - 如何防止网格列重复相同的数据

> ID：11726308
> 
> 赞同：1
> 
> 时间：2012-07-30T17:14:06.907
> 
> 标签：extjs, extjs4, extjs4.1

我正在使用 ExtJS 开发一个应用程序，并且在我的一个模型中，我有一个数组类型的字段，我如何`dataIndex`在网格中设置一个以便在我编辑一个单元格时数据不会重复？

我的代码如下所示。

![在此处输入图像描述](../Images/f0c228bca8a980b891e60efc8ec979d8.png)

```
{
        xtype: 'button',
        icon : Webapp.icon('add1.png'),
        iconAlign : 'top',
        handler : function() {  
            var gridView = Ext.ComponentQuery.query('gridpanel')[1];
            grid = gridView.headerCt;
            if(grid.getGridColumns().length >= 1){
                var column = Ext.create('Ext.grid.column.Column', { dataIndex: 'interval', text : contador, 
                    editor: {xtype: 'textfield', flex: 0.5, editable: true}});
                grid.insert(gridView.columns.length, column);
                gridView.getView().refresh();
                var botao = Ext.getCmp('buttonRemoverColuna');
                botao.setDisabled(false);
            }
            contador++;
        }
    }

Ext.define('model', {
extend : 'Ext.data.Model',
fields : [ {
    name : 'id',
    type : 'long'
}, {
    name : 'name',
    type : 'string'
}, {
    name: 'interval',
    type: 'array'
}]
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:44:01.453

简单的答案是您必须为插入不同`dataIndex`配置的每个新列提供。

现在每个人都得到`dataIndex: 'interval'`.

这意味着，如果您`interval`在商店的字段中为该记录输入一个值，则连接到该字段的每一列都`interval`将显示该值。

一种简单的方法是将处理程序更改为：

```
handler : function() {  
    var gridView = Ext.ComponentQuery.query('gridpanel')[1],
        grid = gridView.headerCt,
        columnCount = grid.getGridColumns().length;

    if (columnCount >= 1){
        var column = Ext.create('Ext.grid.column.Column', { 
                dataIndex: 'interval' + columnCount, 
                text: contador, 
                editor: {xtype: 'textfield', flex: 0.5, editable: true}
            });

        grid.insert(gridView.columns.length, column);
        gridView.getView().refresh();
        var botao = Ext.getCmp('buttonRemoverColuna');
        botao.setDisabled(false);
    }
    contador++;
} 
```

具体来说，来自处理程序的以下配置将给它一个递增的`dataIndex`，即`interval1`, `interval2`, `interval3`,`interval4`等。我对您的服务器端设置一无所知，所以我不知道它是否适合您：

```
dataIndex: 'interval' + columnCount, 
```

**编辑：**

假设您没有定义自定义`array`数据类型，您的`interval`字段数据类型实际上将默认为`string`. 使用网格列的配置很容易完成您想要的操作`renderer`，我稍后会发布一个示例，但您也可以将数据类型更改回`string`.

**例子：**

基本思想是将渲染器添加到列配置中，`interval`通过将实际`interval`字段值拆分为数组来显示添加列中的各个值。您仍然需要实现具有单独配置的网格列，`dataIndex`如上所示，以便我们可以识别哪些列与哪些`interval`数组值匹配。

```
handler : function() {  
    var grid = Ext.ComponentQuery.query('gridpanel')[1],
        header = grid.headerCt,
        intervalIndex = header.getGridColumns().length - 1;

    if (intervalIndex >= 0){
        var column = Ext.create('Ext.grid.column.Column', { 
                dataIndex: 'interval' + intervalIndex, 
                text: contador, 
                editor: {
                    xtype: 'textfield', 
                    intervalIndex: intervalIndex,
                    flex: 0.5, 
                    editable: true
                },

                // this will make the values display properly when not editing
                renderer: function(value, meta, record) {
                    var intervals = record.get('interval').split(',');
                    return intervals[intervalIndex];
                }
            });

        grid.insert(gridView.columns.length, column);
        gridView.getView().refresh();
        var botao = Ext.getCmp('buttonRemoverColuna');
        botao.setDisabled(false);
    }
    contador++;
} 
```

您还需要网格上`beforeedit`的`edit`事件侦听器。

当您*开始*行编辑时，`beforeedit`处理程序会将`interval`值拆分为正确的列字段。

 *处理程序会将来自不同列的`edit`更新字段值连接到单个字符串中，并在您*完成*行编辑`interval`时将其应用于实际字段。

 *```
Ext.create('Ext.grid.Panel', {
    // your other grid configs...
    listeners: {

        // this will make the values display properly when you start a row edit
        beforeedit: function(plugin, edit) {
            plugin.editor.items.each(function(field) {
                var idx = field.intervalIndex;
                if (idx) {
                    var value = edit.record.get('interval').split(',')[idx];
                    Ext.defer(function() {
                        field.setValue(value);
                    }, 10);
                }
            });
        },

        // update the value of the real "interval" field when done editing
        edit: function(plugin, edit) {
            var intervalArray = [],
                var regex = /interval\d/;

            Ext.Object.each(edit.newValues, function(key, value) {
                if (regex.test(key)) {
                    intervalArray.push(value);
                }
            });

            // sets the interval value into a comma seperated value string
            edit.record.set('interval', intervalArray.join(','));
        }
    }
}); 
```

使用上面的`edit`侦听器，模型`interval`字段的值将使用您添加的列中的值作为 CSV 字符串进行更新，例如：`'value1,value2,value3,etc'`.

在服务器端解析字符串由您决定。但在大多数编程语言中，都有一种`stringValue.split(",")`函数可以将 CSV 字符串转换为真实数组。

如果您希望该`interval`值更“类似数组”，您也可以将其括在括号中：

```
edit.record.set('interval', '[' + intervalArray.join(',') + ']') 
```

我不知道这是否有助于您的解析。**

# c# - 如何创建可以编辑并更新回原始列表的子列表

> ID：11726313
> 
> 赞同：1
> 
> 时间：2012-07-30T17:14:45.760
> 
> 标签：c#, list, reference, parameter-passing

我正在为一个玩扑克的程序编写代码。我的问题是关于列表中的参考和价值传递。

我的程序有一个 Player 对象、一个 Dealer 对象和一个 PokerTable 对象。PokerTable 有两个玩家列表，一个称为玩家，一个称为获胜者。玩家列表被传递给 Dealer 对象的DetermineWinner 方法，该方法传回包含获胜者（或在平局情况下为获胜者）的列表。PokerTable 然后使用获胜者列表来确定向谁付款。

```
 class PokerTable
    {
        private Dealer dealer;
        private List<Player> players;
        private List<Player> winners;            

        private void EndHand()
        {
            winners = dealer.DetermineWinner(players);
            PayPlayers();
            winners.Clear();
            PrepareForNextHand();
        }

        private void PayPlayers()
        {
           /* code here uses the winners list to determine
            * how much to pay each winner and adds that money
            * to the player object */
        } 
```

我的问题是向获胜者列表中的玩家对象添加金钱是否也会影响原始玩家列表中的原始玩家对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:34:26.117

`List<Player>`是对`Player`对象的引用列表。

如果两个单独列表中的引用指向相同，`Player`则更新`Player`一个列表中的 a 似乎也会更改`Player`另一个列表中的引用。

```
class Player
{
     internal int Money;
}

// ...

    Player player = new Player{ Money = 700 };
    List<Player> list1 = new List<Player>{player};
    List<Player> list2 = new List<Player>{player};

    list1[0].Money = 400;

    Assert.AreEqual(400, list2[0].Money); // Assertion passes. 
```

另一方面，如果您的列表指向一个值类型，那么更改当然不会反映：

```
var money = 700;
var list1 = new List<int>{money};
var list2 = new List<int>{money};

list1[0] = 400;

Assert.AreNotEqual(400, list2[0]); // Assertion passes. 
```

# android-emulator - 无法从 android 中的 GPS 获取位置（未调用 onLocationChanged）

> ID：11726314
> 
> 赞同：1
> 
> 时间：2012-07-30T17:14:48.840
> 
> 标签：android-emulator, windows-mobile-gps

我的问题是我无法使用 LocationManager 类和 LocationListener 获取 GPS 坐标。也许如果我向您展示我的代码，您就会明白。这是我调用的代码`OnCreate()`：

```
 locMgr = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    currentLocListener = new MyLocationListener();
    locMgr.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, currentLocListener);
    locMgr.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, currentLocListener); 
```

我有一个`MyLocationListener`实现类的类`LocationListener`

```
public class MyLocationListener implements LocationListener {

    @Override
    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        String coordinates[] = {""+location.getLatitude(),""+location.getLongitude()};
        double lat = Double.parseDouble(coordinates[0]);
        double lng = Double.parseDouble(coordinates[1]);
        GeoPoint p = new GeoPoint((int)(lat*1E6), (int)(lng*1E6));
        mc.animateTo(p);
        mc.setZoom(19);

        MyMapOverlays marker = new MyMapOverlays(p);
        List<Overlay> listofOverLays = mapview.getOverlays();
        listofOverLays.clear();
        listofOverLays.add(marker);
        mapview.invalidate();
    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub
        Toast.makeText(getApplicationContext(), "GPS is disabled", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub
        Toast.makeText(getApplicationContext(), "GPS is Enabled", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub
    }
} 
```

我可以通过在 DDMS 的 Emulator Control 中模拟位置来获取位置。所以我尝试在我的真实手机上进行测试。当我将它安装在手机上时，虽然我打开了 GPS 和 wifi，但它无法自动获取当前位置。

我尝试在我的真实手机上运行另一个谷歌地图应用程序，它运行良好。我不明白代码有什么问题......谁能帮助我？

# jquery - jQuery getJSON 之后获取数据

> ID：11726315
> 
> 赞同：1
> 
> 时间：2012-07-30T17:14:53.410
> 
> 标签：jquery, ajax, facebook, json, facebook-graph-api

我正在尝试通过 facebook Graph API 获取照片。这是我的代码：

```
function getImgURL(photos, m) {
  n=0;
  while (typeof photos[n] !== 'undefined') {
    photourl[m] = photos[n].images[2].source;
    n++;
    m++;
  }
}

$('document').ready(function() {
  var url = "https://graph.facebook.com/179877662120200";
  var json = $.ajax(url);
  console.log(json);
  console.log(json.responseText);
  var photos = $.parseJSON(json);
  console.log(photos);
  console.log(photos);
  var m = 0;
  getImgURL(photos, m);
  while (typeof photos.paging !== 'undefined') {
    json = $.ajax(photos.paging.next);
    photos = $.parseJSON(json);
    getImgURL (photos, m);
  }
}); 
```

所以查看日志，它将变量 json 作为对象返回。该对象的一个​​属性是“responseText”，但是当我尝试将其打印到控制台时，它返回“未定义”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:20:21.560

AJAX/JSON-P 请求是（通常 - 总是在 JSON-P 的情况下）异步操作 - 您需要在回调中接收和处理响应，而不是在请求之后。

你认为你得到的对象实际上是 jQuery 生成的延迟对象，而不是响应。

所以：

```
$.getJSON(url).done(function(response) {
    console.log(response); //here's your response
}); 
```

或者，如果您出于某种原因希望稍后声明回调：

```
var req = $.getJSON(url);
//other, synchronous code here
req.done(function(response) { console.log(response); }); 
```

其他几点：

1) jQuery 自动解析作为 JSON-P 请求的一部分返回的 JSON 字符串，因此您不需要像现在这样自己解析它

2）你的`n`var 是（看似）全球性的

3）你可能想改进你的缩进，因为代码不是超级可读

4）您的循环可以简化为`while(photos[n]) {...`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T17:24:31.127

```
var json = $.ajax({
    'url': "https://graph.facebook.com/179877662120200",
    'success': function(json) {
        console.log(json);
        console.log(json.responseText);
    }
}); 
```

# testing - 使用规范进行测试，railstutorial 第 3 章中的 capybara 不起作用（have_selector('title', :text => ' | Home')）

> ID：11726316
> 
> 赞同：10
> 
> 时间：2012-07-30T17:14:56.500
> 
> 标签：testing, capybara, ruby-on-rails-3.2, rspec-rails, spork

我正在研究 ruby​​.railstutorial.org/ruby-on-rails-tutorial-book。我正在使用 rails 3.2.7、spork、rspec、capybara、launchy 和一些警卫 :)

我在第 3 章中遇到了一个非常奇怪的测试问题：

似乎测试不适用于`<head>`-Tag 内的内容。如果我将`<title>`-tag 放在`<body>`-tag 而不是 head-tag 内，它可以正常工作。当我将-tags 放在内部`<h1>`-Tags 上方时，它也可以工作。这很奇怪，不是吗？`<title>``<head>`

请帮我弄清楚。

该示例来自：ruby.railstutorial.org/chapters/static-pages#code:title_test：

```
it "should have the right title" do
  visit '/static_pages/home'
  page.should have_selector('title',
                    :text => "Ruby on Rails Tutorial Sample App | Home")
end 
```

错误消息是：

> 失败：
> 
> 1）静态页面主页应该有标题'Home'失败/错误：page.should have_selector('title', :text => '| Home') Capybara::ExpectationNotMet: expected to find css "title" with text " | Home”，但没有匹配项。还找到了“”，它匹配选择器但不是所有过滤器。# ./spec/requests/static_pages_spec.rb:15:in `block (3 levels) in '

那个正在工作：

```
it "should have the h1 'Sample App'" do
  visit '/static_pages/home'
  page.should have_selector('h1', :text => 'Sample App')
end 
```

呈现的 HTML 文件：

```
<!DOCTYPE html>
<html>
<head>
  <title>Ruby on Rails Tutorial Sample App | Home</title>
  <!-- some css,js stuff -->
</head>
<body>

<h1>Sample App</h1>
<p>
  This is the home page for the
  <a href="http://railstutorial.org/">Ruby on Rails Tutorial</a>
  sample application
</p>

</body>
</html> 
```

谢谢

编辑：您可以在 github 上找到我正在使用的文件： [https ://github.com/farukg/sample_app/](https://github.com/farukg/sample_app/)

规范文件的链接： [https ://github.com/farukg/sample_app/blob/master/spec/requests/static_pages_spec.rb](https://github.com/farukg/sample_app/blob/master/spec/requests/static_pages_spec.rb)

我所做的解释：主页的代码就像它应该的那样。about 页面的代码有自己的布局，在 title-tag 上方有一个 h1-tag，表明它出于某种原因可以工作。最后，帮助页面在正文标签内有它的标题标签，它也可以工作。

我很困惑，为什么我会有这么奇怪的行为？

守卫的完整输出：

```
> Run all
Bundle already up-to-date
Running all specs
Running tests with args ["--drb", "--colour", "-f", "progress", "-r", "/home/faruk/.rvm/gems/ruby-1.9.3-p125/gems/guard-rspec-1.2.0/lib/guard/rspec/formatters/notification_rspec.rb", "-f", "Guard::RSpec::Formatter::NotificationRSpec", "--out", "/dev/null", "--failure-exit-code", "2", "spec"]...
..FFF.....Neues Fenster in aktueller Browsersitzung erstellt.
.FF..

Failures:

  1) Static pages Home page having application layout should have_selector head title 'Home'
     Failure/Error: page.should have_selector('head title',
     Capybara::ExpectationNotMet:
       expected to find css "head title" with text "Ruby on Rails Tutorial Sample App | Home" but there were no matches. Also found "", which matched the selector but not all filters.
     # ./spec/requests/static_pages_spec.rb:23:in `block (3 levels) in <top (required)>'

  2) Static pages Home page having application layout should have content 'Home'
     Failure/Error: page.should have_content("Ruby on Rails Tutorial Sample App | Home")
       expected there to be text "Ruby on Rails Tutorial Sample App | Home" in "Sample App This is the home page for the Ruby on Rails Tutorial sample application"
     # ./spec/requests/static_pages_spec.rb:30:in `block (3 levels) in <top (required)>'

  3) Static pages Home page having application layout should have css title 'Home'
     Failure/Error: page.should have_css("title", :text => "Ruby on Rails Tutorial Sample App | Home")
     Capybara::ExpectationNotMet:
       expected to find css "title" with text "Ruby on Rails Tutorial Sample App | Home" but there were no matches. Also found "", which matched the selector but not all filters.
     # ./spec/requests/static_pages_spec.rb:36:in `block (3 levels) in <top (required)>'

  4) Static pages about page with own layout should JUST have_selector head title 
     Failure/Error: page.should have_selector('head title')
     Capybara::ExpectationNotMet:
       expected to find css "head title" but there were no matches
     # ./spec/requests/static_pages_spec.rb:86:in `block (3 levels) in <top (required)>'

  5) Static pages about page with own layout should have_selector head title 'About Us'
     Failure/Error: page.should have_selector('head title',
     Capybara::ExpectationNotMet:
       expected to find css "head title" with text "Ruby on Rails Tutorial Sample App | About Us" but there were no matches
     # ./spec/requests/static_pages_spec.rb:93:in `block (3 levels) in <top (required)>'

Finished in 0.66215 seconds
15 examples, 5 failures

Failed examples:

rspec ./spec/requests/static_pages_spec.rb:20 # Static pages Home page having application layout should have_selector head title 'Home'
rspec ./spec/requests/static_pages_spec.rb:27 # Static pages Home page having application layout should have content 'Home'
rspec ./spec/requests/static_pages_spec.rb:33 # Static pages Home page having application layout should have css title 'Home'
rspec ./spec/requests/static_pages_spec.rb:83 # Static pages about page with own layout should JUST have_selector head title 
rspec ./spec/requests/static_pages_spec.rb:90 # Static pages about page with own layout should have_selector head title 'About Us'
Done.

> Neues Fenster in aktueller Browsersitzung erstellt.
Neues Fenster in aktueller Browsersitzung erstellt. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-13T06:12:12.057

只是因为`<title>`在`<head>`里面所以它没有出现。

使用它，解决了我的问题：

```
page.should have_selector 'title', :visible => false 
```

提示：您可以应用相同的方法来检查其他`<head>`元素，`<meta>`例如，以确保您（并且您会一直）对 Google 友好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T02:57:45.377

我刚刚在 Github 上查看了你的项目，看来你使用的是 capybara 的边缘版本：

宝石文件

```
gem 'capybara', :git => 'git://github.com/jnicklas/capybara.git' 
```

Gemfile.lock

```
GIT
  remote: git://github.com/jnicklas/capybara.git
  revision: e561d249555195cdd0e9251246fc75aae876f833
  specs:
      capybara (2.0.0.beta2)
      mime-types (>= 1.16)
      nokogiri (>= 1.3.3)
      rack (>= 1.0.0)
      rack-test (>= 0.5.4)
      selenium-webdriver (~> 2.0)
      xpath (~> 1.0.0.beta1) 
```

如果不出意外，我敢说这是你问题的原因。（果然，我的[参考项目](https://github.com/prusswan/sample_app)在更新 capybara 以使用 edge 版本后完全崩溃了）

因此，除非您热衷于帮助[Capybara 2](https://groups.google.com/forum/#!msg/ruby-capybara/0tRg-sxs7fs/1PNyRm9wSe0J)的 beta 测试，否则您最好坚持使用[此处](http://ruby.railstutorial.org/chapters/static-pages#code-gemfile_rspec)列出的 1.1.2 版本。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-19T13:00:17.240

如果您使用的是 Capybara 2，则可以使用如下`have_title`方法：

`page.should have_title("Ruby on Rails Tutorial Sample App | Home")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T13:13:27.623

在推迟了这么久之后，这对我来说也是新的。感谢stackoverflow，我能够在描述之后立即在规范文件顶部使用render_views修复一些测试。我从

```
 describe "GET 'home'" do
   it "returns http success" do
     get 'home'
     response.should be_success
 end 
```

但是在没有使用布局的情况下，我得到了这个错误：text Capybara::ExpectationNotMet: expected to find css "title" with text "Home | Ruby on Rails Tutorial Sample App" 但没有匹配项。但除此之外，在 gem 文件中使用 gem 'capybara', '1.1.2' 之后，我的测试通过了。但我也在路线中使用 get 'home' 作为动作匹配。我希望这有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T17:42:27.137

你能用这个测试吗：

```
page.should have_selector('head title',
                          :text => "Ruby on Rails Tutorial Sample App | Home") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T11:44:42.757

目前最简单的方法是从页面 html 访问 Title 元素，这将返回标题：

```
page.html.match(/<title>(.*)<\/title>/)[1].to_s 
```

不理想，因为它是在 html(!!) 上使用正则表达式，但会起作用。可能最好写一个辅助函数

```
# put in spec/support/utilities.rb
def page_title(page)
  page.html.match(/<title>(.*)<\/title>/)[1].to_s
end 
```

那么你的测试可以写成

```
page_title(page).should eq( "Ruby on Rails Tutorial Sample App | Home" } 
```

# iphone - 创建 iOS 框架/捆绑 NSLog 后不允许记录变量值？

> ID：11726318
> 
> 赞同：-4
> 
> 时间：2012-07-30T17:15:04.707
> 
> 标签：iphone, ios, ios5, frameworks, ios-frameworks

我使用[http://db-in.com/blog/2011/07/universal-framework-iphone-ios-2-0/](http://db-in.com/blog/2011/07/universal-framework-iphone-ios-2-0/)创建了 iOS 框架（在 MAC 中打开 URL，因为在 Windows 上找不到 404。）

现在我将**NSLogs**保存在我的框架文件中。当我记录简单消息时，它将打印在控制台上。但是当我尝试打印任何变量值时，它会给我**SIGBART**错误。

制作框架时是否有任何限制？框架代码是否单独处理？

**编辑：**

```
NSLog(@"my variable : %@",variableName); 
```

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:30:24.610

实际上 variableName 的类型非常重要。而且我注意到你在一开始就错过了@。

```
NSLog(@"my variable : %@",variableName); // note @ in the beginning. assume variableName is an object type. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:24:38.220

我遇到了同样的问题并通过将“仅构建活动架构”设置为“是”来解决它

# doctrine-orm - 如何配置学说 2 以便它可以找到 setup.php 文件？

> ID：11726319
> 
> 赞同：0
> 
> 时间：2012-07-30T17:15:15.127
> 
> 标签：doctrine-orm

1.  当我执行时：

    ```
    doctrine orm:schema-tool:create 
    ```

    我得到：

    ```
    '"@php_bin@"' is not recognized as an internal or external command, operable program or batch file. 
    ```

    我通过将 bin\doctrine.php 更改为以下内容来解决此问题：

    ```
    php "C:\Program Files\DoctrineORM-2.2.2\bin\doctrine.php" %* 
    ```

2.  现在，我走得更远了。从命令行执行以下命令时：

    ```
    doctrine orm:schema-tool:create 
    ```

    部分输出如下：

    ```
    Fatal error: require_once(): Failed opening required 'Doctrine/ORM/Tools/Setup.php' (include_path='.;C:\xampp\php\PEAR') in  C:\Users\bam1216\Documents\Development\DoctrineTutorial\project\bootstrap_doctrine.php on line 7 
    ```

    失败的文件是 bootstrap_doctrine.php 的第 7 行，也就是下面的 require_once 行：

    ```
    use Doctrine\ORM\Tools\Setup;

    require_once "Doctrine/ORM/Tools/Setup.php"; 
    ```

    它所指的 Setup.php 位于我的机器上的 C:\Program Files\DoctrineORM-2.2.2\Doctrine\ORM\Tools\Setup.php。如何配置它以找到该设置文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:24:08.107

我通过更改 PHP 的包含路径来解决此问题。我在 bootstrap_doctrine.php 的开头添加了以下几行：

```
$path = 'C:\Program Files\DoctrineORM-2.2.2';
set_include_path(get_include_path() . PATH_SEPARATOR . $path); 
```

# machine-learning - 为什么 libsvm 在同一数据集上创建不同的结果

> ID：11726326
> 
> 赞同：4
> 
> 时间：2012-07-30T17:16:02.153
> 
> 标签：machine-learning, computer-vision, svm, libsvm

我正在使用 libsvm，尽管我使用相同的参数训练函数两次运行相同的程序，但在模型中创建了不同的 probA 和 probB 值。

这是我的代码

```
public boolean Train()
{
    System.out.println("debug 16- mparameter :  "+ m_parameter.svm_type + " " + m_parameter.kernel_type + " " + m_parameter.gamma + " " + m_parameter.C + " " + m_parameter.cache_size + " " + m_parameter.eps + " " + m_parameter.shrinking + " " +m_parameter.probability + " " + m_parameter.nr_weight );
    System.out.println("training...");
    m_model=svm.svm_train(m_problem,m_parameter);
    System.out.print("debug 16- mparameter :  "+ m_parameter.svm_type + " " + m_parameter.kernel_type + " " + m_parameter.gamma + " " + m_parameter.C + " " + m_parameter.cache_size + " " + m_parameter.eps + " " + m_parameter.shrinking + " " +m_parameter.probability + " " + m_parameter.nr_weight );
    System.out.println(" Prob AB : " + m_model.probA[0]+  " " +m_model.probB[0]+ " "  );

    for(int i=0;i<m_problem.l;i++)
    {

        for(int j=0;j<featureSetSize;j++)
        {
            System.out.print(m_problem.x[i][j].index + " "+ m_problem.x[i][j].value);
        }   
        System.out.print(m_problem.y[i]+ "\n");
    }
    return true;
} 
```

我检查打印输出，一切都相同，但每次运行程序时产生的 probA 和 probB 值都不同。

这里是打印输出

```
debug 16- mparameter :  0 2 0.0078125 0.03125 40.0 0.001 0 1 0debug 16- mparameter :  0             2 0.0078125 0.03125 40.0 0.001 0 1 0 Prob AB : 0.625358670608583 6.877246970538699E-4 
1 4.2671854734111552 8.9323843416370113 -2.16877637130801664 1.29411764705882255 -4.1436464088397796 -3.58778625954198567 -7.9584775086505198 -1.40983606557377079 -4.74878444084278910 -0.3508771929824554511 -0.4000000000000003612 1.31868131868131751.0
1 -8.4695201037613492 5.7295373665480443 1.9324894514767944 -2.117647058823535 -7.6243093922651936 -10.07 -6.6782006920415238 -8.0655737704918029 0.01620745542949819710 -10.011 -9.012 10.01.0
1 0.479896238651102542 -10.03 10.04 2.23529411764705985 -3.75690607734806656 -3.81679389312977077 10.08 10.09 3.679092382495948510 -1.929824561403508611 -2.012 1.31868131868131751.0
1 5.1491569390402072 -3.2028469750889683 8.3797468354430364 -1.05882352941176455 3.86740331491712656 -7.1755725190839697 0.7266435986159178 -3.2459016393442629 7.8606158833063210 -1.403508771929825411 -2.012 1.4285714285714271.0
1 -0.0129701686121919122 8.2562277580071183 -0.194092827004219264 1.8823529411764715 -5.3038674033149176 -3.35877862595419877 3.2179930795847768 -10.09 6.5964343598055110 1.929824561403508611 -4.812 -10.01.0
1 9.273670557717252 -2.8825622775800713 5.76371308016877754 1.52941176470588055 -4.4751381215469616 -4.1221374045801537 6.19377162629757558 4.7213114754098349 6.40194489465153910 -0.877192982456140411 -1.800000000000000712 1.53846153846153651.0
1 3.3333333333333322 1.17437722419928823 5.3080168776371314 1.52941176470588055 -4.36464088397796 -3.74045801526717547 3.6332179930795858 -0.327868852459015879 7.99027552674230210 -0.701754385964912711 -3.599999999999999612 1.31868131868131751.0
1 2.76264591439688622 1.38790035587188683 5.1561181434599154 1.29411764705882255 -4.254143646408846 -4.4274809160305347 1.1418685121107268 -0.098360655737705479 7.017828200972445510 -1.403508771929825411 -1.199999999999999312 1.53846153846153651.0
1 9.0402075226977952 5.4804270462633463 0.177215189873418674 2.1176470588235295 -4.6961325966850836 -4.27480916030534357 2.52595155709342668 0.49180327868852569 6.49918962722852510 0.701754385964912711 -7.012 -0.32967032967033031.0
1 1.43968871595330582 10.03 -4.2109704641350214 2.1176470588235295 -4.4751381215469616 -3.96946564885496227 -7.7508650519031148 0.065573770491802469 -8.8654781199351710 -1.754385964912280811 -2.199999999999999312 1.4285714285714271.0
1 -3.82619974059662752 7.36654804270462553 -0.54852320675105484 1.05882352941176455 0.05524861878453186 -3.2061068702290077 3.0449826989619388 -2.196721311475419 9.6758508914100510 -3.33333333333333411 -3.399999999999999512 1.64835164835164961.0
1 -1.7769130998702992 8.6476868327402133 -3.4345991561181434 1.6470588235294135 -4.4751381215469616 -4.1984732824427487 2.52595155709342668 -3.18032786885245949 7.99027552674230210 -1.929824561403508611 -1.599999999999999612 1.2087912087912081.0
1 -9.4811932555123222 7.93594306049822153 -5.9324894514767934 10.05 10.06 6.183206106870237 -10.08 -7.7377049180327879 -8.11993517017828210 -2.982456140350877611 -1.800000000000000712 -0.43956043956043981.0
1 2.81452658884565572 2.2419928825622793 4.8691983122362874 2.05 -4.4751381215469616 -4.1221374045801537 -0.242214532871972928 -1.93442622950819759 6.46677471636952810 -1.754385964912280811 -1.599999999999999612 1.4285714285714271.0
1 7.3540856031128432 -5.4804270462633463 6.4050632911392434 -10.05 -10.06 10.07 2.87197231833910048 3.54098360655737749 5.17017828200972610 -2.80701754385964911 2.599999999999999612 2.30769230769230841.0
1 6.3942931258106342 5.3380782918149473 1.17299578059071764 2.70588235294117575 -4.8618784530386746 -5.1145038167938937 -1.5224913494809698 5.6393442622950839 -5.98055105348460310 -3.684210526315789411 -2.199999999999999312 2.6373626373626372.0
1 -10.02 3.73665480427046333 2.01687763713080064 3.41176470588235155 -4.309392265193376 -4.9618320610687037 -5.0173010380622848 3.54098360655737749 -3.35494327390599710 -2.456140350877192611 -9.612 -0.10989010989010952.0
1 -2.03631647211413822 -0.427046263345195243 6.8776371308016884 2.05 -4.5856353591160226 -4.04580152671755767 1.41868512110726648 0.59016393442622939 6.3371150729335510 -2.28070175438596611 -1.012 0.43956043956043982.0
1 -0.89494163424124552 4.0569395017793593 4.6666666666666664 2.23529411764705985 -4.254143646408846 -3.81679389312977077 0.138408304498270248 -3.18032786885245949 8.21717990275526610 -2.105263157894736311 -1.800000000000000712 2.74725274725274642.0
1 -2.55512321660181562 8.0071174377224213 1.84810126582278584 1.8823529411764715 -4.5856353591160226 -3.81679389312977077 3.3217993079584778 -4.81967213114754149 9.1247974068071310 -1.052631578947368111 -2.012 2.85714285714285772.0
1 -5.6420233463035012 0.106761565836299253 5.8481012658227844 1.52941176470588055 -5.63535911602216 -4.4274809160305347 -1.90311418685121238 1.47540983606557329 2.05834683954619310 -2.80701754385964911 -1.012 0.76923076923076832.0
1 -6.2645914396887162 7.82918149466192053 -0.88607594936708984 1.8823529411764715 -4.7513812154696136 -4.1221374045801537 0.207612456747405368 -0.36065573770491719 5.3970826580226910 -1.57894736842105311 -1.400000000000000412 1.7582417582417592.0
1 3.98184176394293132 1.95729537366547923 4.5822784810126584 1.6470588235294135 -4.4751381215469616 -4.1984732824427487 2.97577854671280138 -0.327868852459015879 8.8006482982171810 -1.929824561403508611 -1.400000000000000412 1.31868131868131752.0
1 10.02 -2.2775800711743783 4.37974683544303644 1.8823529411764715 -4.7513812154696136 -4.656488549618327 3.9446366782006938 -1.31147540983606539 8.34683954619124810 -1.228070175438597611 -1.800000000000000712 1.4285714285714272.0
1 2.60700389105058332 2.20640569395017753 5.5105485232067514 1.8823529411764715 -3.70165745856353656 -3.74045801526717547 0.79584775086505398 0.5573770491803289 6.9529983792544610 -0.877192982456140411 -1.599999999999999612 1.53846153846153652.0
1 1.90661478599221822 1.03202846975088923 4.7172995780590714 2.05 -3.97790055248618756 -3.74045801526717547 7.543252595155718 9.9672131147540999 -1.215559157212318610 10.011 -10.012 -6.9230769230769232.0
1 3.2036316472114132 2.1352313167259783 -10.04 8.5882352941176495 -5.63535911602216 -2.82442748091603067 -7.1626297577854678 2.09 -10.010 -7.36842105263157911 10.012 -5.7142857142857142.0
1 -2.6329442282749672 9.8220640569395033 -3.38396624472573754 2.1176470588235295 -4.6408839779005536 -4.04580152671755767 2.76816608996539778 -4.0655737704918049 10.010 -1.403508771929825411 3.400000000000000412 2.74725274725274642.0
1 -2.6588845654993522 8.2206405693950163 -0.71729957805907144 1.17647058823529355 -4.419889502762436 -4.4274809160305347 2.04152249134948078 -2.85245901639344279 8.83306320907617610 -1.403508771929825411 -1.012 1.4285714285714272.0
1 3.41115434500648362 4.76868327402135253 3.09704641350210964 0.94117647058823555 -4.8618784530386746 -4.4274809160305347 2.80276816608996538 3.93442622950819759 5.88330632090761810 -1.929824561403508611 -2.199999999999999312 1.31868131868131752.0 
```

第二轮

```
debug 16- mparameter :  0 2 0.0078125 0.03125 40.0 0.001 0 1 0debug 16- mparameter :  0 2 0.0078125 0.03125 40.0 0.001 0 1 0 Prob AB : 1.1138705486826292 -0.2588389268559099 
1 4.2671854734111552 8.9323843416370113 -2.16877637130801664 1.29411764705882255 -4.1436464088397796 -3.58778625954198567 -7.9584775086505198 -1.40983606557377079 -4.74878444084278910 -0.3508771929824554511 -0.4000000000000003612 1.31868131868131751.0
1 -8.4695201037613492 5.7295373665480443 1.9324894514767944 -2.117647058823535 -7.6243093922651936 -10.07 -6.6782006920415238 -8.0655737704918029 0.01620745542949819710 -10.011 -9.012 10.01.0
1 0.479896238651102542 -10.03 10.04 2.23529411764705985 -3.75690607734806656 -3.81679389312977077 10.08 10.09 3.679092382495948510 -1.929824561403508611 -2.012 1.31868131868131751.0
1 5.1491569390402072 -3.2028469750889683 8.3797468354430364 -1.05882352941176455 3.86740331491712656 -7.1755725190839697 0.7266435986159178 -3.2459016393442629 7.8606158833063210 -1.403508771929825411 -2.012 1.4285714285714271.0
1 -0.0129701686121919122 8.2562277580071183 -0.194092827004219264 1.8823529411764715 -5.3038674033149176 -3.35877862595419877 3.2179930795847768 -10.09 6.5964343598055110 1.929824561403508611 -4.812 -10.01.0
1 9.273670557717252 -2.8825622775800713 5.76371308016877754 1.52941176470588055 -4.4751381215469616 -4.1221374045801537 6.19377162629757558 4.7213114754098349 6.40194489465153910 -0.877192982456140411 -1.800000000000000712 1.53846153846153651.0
1 3.3333333333333322 1.17437722419928823 5.3080168776371314 1.52941176470588055 -4.36464088397796 -3.74045801526717547 3.6332179930795858 -0.327868852459015879 7.99027552674230210 -0.701754385964912711 -3.599999999999999612 1.31868131868131751.0
1 2.76264591439688622 1.38790035587188683 5.1561181434599154 1.29411764705882255 -4.254143646408846 -4.4274809160305347 1.1418685121107268 -0.098360655737705479 7.017828200972445510 -1.403508771929825411 -1.199999999999999312 1.53846153846153651.0
1 9.0402075226977952 5.4804270462633463 0.177215189873418674 2.1176470588235295 -4.6961325966850836 -4.27480916030534357 2.52595155709342668 0.49180327868852569 6.49918962722852510 0.701754385964912711 -7.012 -0.32967032967033031.0
1 1.43968871595330582 10.03 -4.2109704641350214 2.1176470588235295 -4.4751381215469616 -3.96946564885496227 -7.7508650519031148 0.065573770491802469 -8.8654781199351710 -1.754385964912280811 -2.199999999999999312 1.4285714285714271.0
1 -3.82619974059662752 7.36654804270462553 -0.54852320675105484 1.05882352941176455 0.05524861878453186 -3.2061068702290077 3.0449826989619388 -2.196721311475419 9.6758508914100510 -3.33333333333333411 -3.399999999999999512 1.64835164835164961.0
1 -1.7769130998702992 8.6476868327402133 -3.4345991561181434 1.6470588235294135 -4.4751381215469616 -4.1984732824427487 2.52595155709342668 -3.18032786885245949 7.99027552674230210 -1.929824561403508611 -1.599999999999999612 1.2087912087912081.0
1 -9.4811932555123222 7.93594306049822153 -5.9324894514767934 10.05 10.06 6.183206106870237 -10.08 -7.7377049180327879 -8.11993517017828210 -2.982456140350877611 -1.800000000000000712 -0.43956043956043981.0
1 2.81452658884565572 2.2419928825622793 4.8691983122362874 2.05 -4.4751381215469616 -4.1221374045801537 -0.242214532871972928 -1.93442622950819759 6.46677471636952810 -1.754385964912280811 -1.599999999999999612 1.4285714285714271.0
1 7.3540856031128432 -5.4804270462633463 6.4050632911392434 -10.05 -10.06 10.07 2.87197231833910048 3.54098360655737749 5.17017828200972610 -2.80701754385964911 2.599999999999999612 2.30769230769230841.0
1 6.3942931258106342 5.3380782918149473 1.17299578059071764 2.70588235294117575 -4.8618784530386746 -5.1145038167938937 -1.5224913494809698 5.6393442622950839 -5.98055105348460310 -3.684210526315789411 -2.199999999999999312 2.6373626373626372.0
1 -10.02 3.73665480427046333 2.01687763713080064 3.41176470588235155 -4.309392265193376 -4.9618320610687037 -5.0173010380622848 3.54098360655737749 -3.35494327390599710 -2.456140350877192611 -9.612 -0.10989010989010952.0
1 -2.03631647211413822 -0.427046263345195243 6.8776371308016884 2.05 -4.5856353591160226 -4.04580152671755767 1.41868512110726648 0.59016393442622939 6.3371150729335510 -2.28070175438596611 -1.012 0.43956043956043982.0
1 -0.89494163424124552 4.0569395017793593 4.6666666666666664 2.23529411764705985 -4.254143646408846 -3.81679389312977077 0.138408304498270248 -3.18032786885245949 8.21717990275526610 -2.105263157894736311 -1.800000000000000712 2.74725274725274642.0
1 -2.55512321660181562 8.0071174377224213 1.84810126582278584 1.8823529411764715 -4.5856353591160226 -3.81679389312977077 3.3217993079584778 -4.81967213114754149 9.1247974068071310 -1.052631578947368111 -2.012 2.85714285714285772.0
1 -5.6420233463035012 0.106761565836299253 5.8481012658227844 1.52941176470588055 -5.63535911602216 -4.4274809160305347 -1.90311418685121238 1.47540983606557329 2.05834683954619310 -2.80701754385964911 -1.012 0.76923076923076832.0
1 -6.2645914396887162 7.82918149466192053 -0.88607594936708984 1.8823529411764715 -4.7513812154696136 -4.1221374045801537 0.207612456747405368 -0.36065573770491719 5.3970826580226910 -1.57894736842105311 -1.400000000000000412 1.7582417582417592.0
1 3.98184176394293132 1.95729537366547923 4.5822784810126584 1.6470588235294135 -4.4751381215469616 -4.1984732824427487 2.97577854671280138 -0.327868852459015879 8.8006482982171810 -1.929824561403508611 -1.400000000000000412 1.31868131868131752.0
1 10.02 -2.2775800711743783 4.37974683544303644 1.8823529411764715 -4.7513812154696136 -4.656488549618327 3.9446366782006938 -1.31147540983606539 8.34683954619124810 -1.228070175438597611 -1.800000000000000712 1.4285714285714272.0
1 2.60700389105058332 2.20640569395017753 5.5105485232067514 1.8823529411764715 -3.70165745856353656 -3.74045801526717547 0.79584775086505398 0.5573770491803289 6.9529983792544610 -0.877192982456140411 -1.599999999999999612 1.53846153846153652.0
1 1.90661478599221822 1.03202846975088923 4.7172995780590714 2.05 -3.97790055248618756 -3.74045801526717547 7.543252595155718 9.9672131147540999 -1.215559157212318610 10.011 -10.012 -6.9230769230769232.0
1 3.2036316472114132 2.1352313167259783 -10.04 8.5882352941176495 -5.63535911602216 -2.82442748091603067 -7.1626297577854678 2.09 -10.010 -7.36842105263157911 10.012 -5.7142857142857142.0
1 -2.6329442282749672 9.8220640569395033 -3.38396624472573754 2.1176470588235295 -4.6408839779005536 -4.04580152671755767 2.76816608996539778 -4.0655737704918049 10.010 -1.403508771929825411 3.400000000000000412 2.74725274725274642.0
1 -2.6588845654993522 8.2206405693950163 -0.71729957805907144 1.17647058823529355 -4.419889502762436 -4.4274809160305347 2.04152249134948078 -2.85245901639344279 8.83306320907617610 -1.403508771929825411 -1.012 1.4285714285714272.0
1 3.41115434500648362 4.76868327402135253 3.09704641350210964 0.94117647058823555 -4.8618784530386746 -4.4274809160305347 2.80276816608996538 3.93442622950819759 5.88330632090761810 -1.929824561403508611 -2.199999999999999312 1.31868131868131752.0 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T08:55:53.273

也许数据在代码中的某个地方被打乱了，因此每次运行它时你都会得到一个稍微不同的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-09T01:19:03.257

你可以在训练和预测时放弃使用`-b 1`，因为这会使模型在`for`循环中变得不确定。但是，通过禁止`-b`我们无法估计概率。

# sharepoint - 在 SharePoint 中链接一对多（员工到薪资历史）列表

> ID：11726327
> 
> 赞同：0
> 
> 时间：2012-07-30T17:16:10.243
> 
> 标签：sharepoint, ms-access, one-to-many

这是我的问题：

[编辑]：好的，此时这几乎变成了一个单独的问题......我很抱歉。切入正题，这是我的业务需求。我有一个包含薪水字段的员工记录（列表中的一项）。我需要能够查看员工工资历史记录的报告。

而已。在我看来（这肯定来自 SQL/数据库背景），这意味着一个一对多的表（一个员工有很多薪水）。事实证明，这在 SharePoint 中并不那么简单，因为我必须过滤 Salary 字段以仅显示给定员工 SalaryHistory 列表中的 Salaries。

我的新问题是最好的方法是什么？是否可以仅使用带有 Salary 字段的 Employee 列表，然后以某种方式查看或显示该特定 Salary 字段的历史记录？例如，如果员工 00001 的薪水从 50,000 更改为 60,000，我可以查看显示此薪金字段历史记录的某种报告/页面吗？

[/编辑]

我想将现有的 MS Access/VBA 旧系统转换为 SharePoint 2010。现有的 MS Access 系统相当简单：一个员工数据库，其中包含典型的员工信息，包括工资历史。我遇到的一个问题是员工不仅有薪水，而且有薪水历史。这意味着主管应该能够查看员工的工资历史，而不仅仅是员工的当前工资。

在我看来，这是一个一对多的关系：一个 Employee 表链接到一个 Salary History 表（一对多是一个 Employee 在一段时间内可以有多个 Salaries）。

在 SharePoint 中实现此功能的最佳方式是什么？我曾尝试使用 InfoPath 以及一些自定义代码，但我似乎无法正确使用它。在我看来，这是一个相对简单的概念，但我在将其从概念转变为具体的 SharePoint 解决方案时遇到了麻烦。

有什么想法或建议吗？

谢谢，

格伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T00:15:19.980

这种设置在 SharePoint 中运行良好。唯一真正的基本要求是您的关系需要是“基本”设置。

两个表之间的关系需要两件事：

a) 您对父表使用标准的自动编号主键。

b）您为子表使用标准的长数字列。

事实证明，无论如何，以上都是 Access 的基本默认设置。因此，第一个提示/技巧是确保您正确设置您的关系。**如果**您正确执行此操作，则您可以扩大表格大小并将其发送到 SharePoint，您的关系数据将完好无损。

既然 SharePoint 支持级联删除（和删除限制）的关系数据库功能，那么如果您删除父记录，那么子表中的子记录将为您级联删除。

请记住，在上载期间，可能会更改“无意义”的 PK 编号 ID（这意味着也可能发生子 FK（外键）的级联更新。

因为你现有的关系百合不会正确，那么你最好“删除”关系，并重新创建它们。

另外不要忘记检查 Access 中的选项以使用“新”缓存格式。我说的是这个：

![在此处输入图像描述](../Images/1ed3a7c1c1d420438f5d736b6c39efcd.png)

此设置的结果令人惊叹，因为您的应用程序现在将在“离线”断开连接模式下运行。这意味着即使有多个用户都连接到这个数据库，如果你拔掉网络插头，他们都可以继续工作。它们都有一个本地高速缓存（这种设置通常可以围绕 sql server 运行）。因此，如果您在 10,000 条记录表上运行报告，则不需要任何带宽！

当互联网连接恢复或您从现场返回到有 Wi-Fi 的咖啡店时，数据将为您同步（所有连接用户之间的数据实时同步）。这种设置通常需要对现有 VBA 代码进行零更改。（有一个例外需要更改代码）。

现在，下一个问题/部分是如何设置关系，以便它们上升到 SharePoint。我在以下视频中解释了这些步骤：

[http://www.youtube.com/watch?v=3wdjYIby_b0&list=PL27E956A1537FE1C5&index=2&feature=plpp_video](http://www.youtube.com/watch?v=3wdjYIby_b0&list=PL27E956A1537FE1C5&index=2&feature=plpp_video)

请注意，在上面这意味着您必须使用关系向导，而不是关系设计窗口来正确设置这些关系。如果您执行上述操作，那么扩大到 SharePoint 将因此发送表格并在 SharePoint 上保持关系完整。

编辑：另外，在上面的视频中，我将数据库发布到 SharePoint，因为我有 Access Web Services 可用。您不需要发布，但您可以使用“数据库工具”选项卡并使用“SharePoint”按钮。 ![在此处输入图像描述](../Images/bd1653d0d5fb31d1da0c48695d759374.png)

# c# - 我需要擦除循环绘制的绘图

> ID：11726331
> 
> 赞同：1
> 
> 时间：2012-07-30T17:16:28.263
> 
> 标签：c#, graphics, drawing

这是我的代码

```
while (true)
{
    gg = this.CreateGraphics();
    b1 = new SolidBrush(Color.Red);
    b2 = new SolidBrush(Color.Blue);
    p1 = new Pen(Color.Red);

    neuron.transferFunction_output();
    for (int i = 0; i < 10; i++)
    {
        if (neuron.layer2[i] == 1)
        {
            gg.FillEllipse(b1, ox1 - 100 * i, oy2, (float)20, (float)20);
            for (int j = 0; j < 10; j++)
            {
                gg.DrawLine(p1, ox1 - 100 * i, oy2, ox1 - 100 * (float)j, oy3);
            }
        }
        else
        {
            gg.FillEllipse(b2, ox1 - 100 * i, oy2, (float)20, (float)20);
        }
    }
    for (int i = 0; i < 10; i++)
    {
        if (neuron.layer3[i] == 1)
        {
            gg.FillEllipse(b1, ox1 - 100 * i, oy3, (float)20, (float)20);
            for (int j = 0; j < 10; j++)
            {
                gg.DrawLine(p1, ox1 - 100 * i, oy3, ox1 - 100 * (float)j, oy4);
            }
        }
        else
        {
            gg.FillEllipse(b2, ox1 - 100 * i, oy3, (float)20, (float)20);
        }
    }
    for (int i = 0; i < 10; i++)
    {
        if (neuron.layer4[i] == 1)
        {
            gg.FillEllipse(b1, ox1 - 100 * i, oy4, (float)20, (float)20);
            for (int j = 0; j < 10; j++)
            {
                gg.DrawLine(p1, ox1 - 100 * i, oy4, ox1 - 100 * (float)j, oy5);
            }
        }
        else
        {
            gg.FillEllipse(b2, ox1 - 100 * i, oy4, (float)20, (float)20);
        }
    }
    for (int i = 0; i < 10; i++)
    {
        if (neuron.layer5[i] == 1)
        {
            gg.FillEllipse(b1, ox1 - 100 * i, oy5, (float)20, (float)20);
        }
        else
        {
            gg.FillEllipse(b2, ox1 - 100 * i, oy5, (float)20, (float)20);
        }
    }
    Thread.Sleep(1000);
    Application.DoEvents();
}//end while 
```

现在我想擦除循环中早些时候制作的图纸。意味着我不需要显示最后一次绘制的最后一次迭代中绘制的图纸。如果我使用`Graphics.clear(Color.SomeColor)`，那么每次迭代后整个背景颜色都会改变，我不想这样做。其次，如果在与之前相同的轨道上声明一个绘制相同线条但使用白色的方法（意味着一个用作橡皮擦的方法），那么我的代码会变得太长并且它的内存占用和耗时，因为我必须`Thread.Sleep()`在我的代码中使用到期出于某些原因。有没有其他方法可以擦除最后一张图？谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T17:19:45.597

```
while(true) {
    var g = someControl.CreateGraphics();
    draw(g);
} 
```

这种结构不会像人们希望的那样工作。这就是为什么你需要`DoEvents()`在你的循环中调用；您正在阻止消息泵。`CreateGraphics()`此外，您在处理程序之外调用和绘制`OnPaint`，因此当窗口执行刷新时，您绘制的任何内容都将被删除。

您应该将所有绘图代码移动到`OnPaint`处理程序中。这将为您提供每次需要时绘制的新表面（调用`Invalidate()`强制重新绘制），并使您与 Windows 消息泵保持一致，因此您可以删除对 (nasty) 的调用`DoEvents()`。您仍然可以以这种方式制作动画，并且您的代码变得更简单。

您可以更新循环中的逻辑交互，并`Invalidate()`在准备好绘制屏幕时调用。

我建议阅读：[Windows 消息循环。](http://en.wikipedia.org/wiki/Message_loop_in_Microsoft_Windows)

# c++ - GCC可以用来编译到定制平台吗？

> ID：11726334
> 
> 赞同：0
> 
> 时间：2012-07-30T17:16:39.387
> 
> 标签：c++, c, gcc, compiler-construction, platform

假设我们有一个新平台 X。
我们可以修改 GCC 以便它可以为该平台编译 C/C++ 吗？如果是这样，这些变化是什么以及有多大？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:32:15.257

可以做到，但如果这是一个全新的架构，这将是一项非常艰巨的任务。

您必须做的一些事情：

*   让 C 编译器为您的处理器生成汇编代码
*   编写一个能够组装上述汇编代码的汇编程序（即端口 GAS）
*   （可能）使用与特定于您的处理器的选项相关的功能扩展链接器（ld）
*   （可能）移植 binutils 的其他部分（如 objcopy 和 objdump）

您确定芯片制造商没有提供 GCC 的端口（或其他一些 C 编译器）吗？如果你是芯片制造商；你确定你真的需要这个定制的处理器，或者你能用一些现有的支持很好的处理器（例如ARM、AVR、PIC，...）吗？

# python - 连接多个 .fasta 文件

> ID：11726340
> 
> 赞同：2
> 
> 时间：2012-07-30T17:17:14.973
> 
> 标签：python, concatenation, fasta

我正在尝试将数百个 .fasta 文件连接成一个包含所有序列的大型 fasta 文件。我还没有在论坛中找到实现此目的的特定方法。我确实从[http://zientzilaria.heroku.com/blog/2007/10/29/merging-single-or-multiple-sequence-fasta-files](http://zientzilaria.heroku.com/blog/2007/10/29/merging-single-or-multiple-sequence-fasta-files)中看到了这段代码，我对它做了一些调整。

Fasta.py 包含以下代码：

```
class fasta:
    def __init__(self, name, sequence):
        self.name = name
        self.sequence = sequence

def read_fasta(file):
    items = []
    index = 0
    for line in file:
        if line.startswith(">"):
           if index >= 1:
               items.append(aninstance)
           index+=1
           name = line[:-1]
           seq = ''
           aninstance = fasta(name, seq)
        else:
           seq += line[:-1]
           aninstance = fasta(name, seq)

    items.append(aninstance)
    return items 
```

这是连接 .fasta 文件的改编脚本：

```
import sys
import glob
import fasta

#obtain directory containing single fasta files for query
filepattern = input('Filename pattern to match: ')

#obtain output directory
outfile = input('Filename of output file: ')

#create new output file
output = open(outfile, 'w')

#initialize lists
names = []
seqs = []

#glob.glob returns a list of files that match the pattern
for file in glob.glob(filepattern):

    print ("file: " + file)

    #we read the contents and an instance of the class is returned
    contents = fasta.read_fasta(open(file).readlines())

    #a file can contain more than one sequence so we read them in a loop
    for item in contents:
        names.append(item.name)
        seqs.append(item.sequence)

#we print the output
for i in range(len(names)):
    output.write(names[i] + '\n' + seqs[i] + '\n\n')

output.close()
print("done") 
```

它能够读取 fasta 文件，但新创建的输出文件不包含序列。我收到的错误是由于 fasta.py，这超出了我的能力范围：

```
Traceback (most recent call last):
  File "C:\Python32\myfiles\test\3\Fasta_Concatenate.py", line 28, in <module>
    contents = fasta.read_fasta(open(file).readlines())
  File "C:\Python32\lib\fasta.py", line 18, in read_fasta
    seq += line[:-1]
UnboundLocalError: local variable 'seq' referenced before assignment 
```

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T22:59:07.570

我认为使用`python`这项工作是矫枉过正。`.fasta`在命令行上，使用or扩展名连接单个/多个 fasta 文件的快速方法`.fa`是：

```
cat *.fa* > newfile.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:23:52.023

问题出在`fasta.py`：

```
else:
       seq += line[:-1]
       aninstance = fasta(name, seq) 
```

尝试`seq`在`read_fasta(file)`.

编辑：进一步解释

当您第一次调用`read_fasta`时，文件中的第一行不以 开头`>`，因此您将第一行附加到`seq`尚未初始化（甚至未声明）的字符串：您将字符串（第一行）附加到 null价值。堆栈中存在的错误解释了问题：

```
UnboundLocalError: local variable 'seq' referenced before assignment 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T16:48:17.050

不是python程序员，但似乎问题代码试图将每个序列的数据压缩在一行中，并用空行分隔序列。

```
 >seq1
  00000000
  11111111
  >seq2
  22222222
  33333333 
```

会成为

```
 >seq1
  0000000011111111

  >seq2
  2222222233333333 
```

如果这实际上是需要的，上述基于**cat**的解决方案将不起作用。否则**猫**是最简单和最有效的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T10:58:41.863

对于通过命令提示符的 Windows 操作系统：（注意文件夹应仅包含必需的文件）：

```
copy *.fasta **space** final.fasta 
```

享受。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-24T09:47:55.897

以下确保新文件总是在新行开始：

```
$ awk 1 *.fasta > largefile.fasta 
```

使用的解决方案`cat`可能会失败：

```
$ echo -n foo > f1
$ echo bar > f2
$ cat f1 f2
foobar
$ awk 1 f1 f2
foo
bar 
```

# javascript - 有什么方法可以区分 Windows 8 中的触摸与鼠标交互（HTML/JS）

> ID：11726342
> 
> 赞同：3
> 
> 时间：2012-07-30T17:17:16.957
> 
> 标签：javascript, html, touch, windows-8, mouseevent

我目前正在构建一个非常强调平移的应用程序，它在触摸和操作时看起来和感觉都很漂亮。但是，当使用鼠标时，带有典型的微软“块状”触摸轮，平移显然具有相同的“块状”平移效果。在为 Windows 8 开发时，有什么方法可以检测不同的输入，看看 JS 事件现在是如何捆绑在相同的“MSPointer”名称下的，所以我可以以不同的方式解释滚动行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:04:05.320

我一直在努力解决同样的问题，并发现实际上有一种方法可以使用事件的非标准“pointerType”属性来区分输入类型。诚然，romeboards 提到了“应用程序”，这似乎是一个 JavaScript/IE10 解决方案，所以我不确定它是否适合他们的问题。

[http://msdn.microsoft.com/en-gb/library/ie/hh772359(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/ie/hh772359(v=vs.85).aspx)

我知道这是一个古老的（-ish）问题，但是当我寻找解决方案时它很早就出现了，所以我想我会添加信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:47:46.540

专门在我的 JS 代码中解决了我的问题...在监视滚动动作时，我跟踪先前的滚动位置以及当前的滚动位置，通过监视其增长或下降的速度，我确定用户是否正在使用平滑“逐像素”滚动设备（触摸或平滑滚动鼠标滚轮），或者如果它们使用“块状”鼠标滚轮。就一般解决此问题而言，似乎没有 Microsoft 支持的解决方案。

# c# - 是否可以声明许多具有不同类型的通用委托的集合？

> ID：11726348
> 
> 赞同：4
> 
> 时间：2012-07-30T17:17:35.517
> 
> 标签：c#

我有一个关于 C# 泛型和委托的问题：

首先我描述一个普遍的问题---我想要一个委托的集合，这些委托应该有一个类似的形式，例如，我所有的委托都应该有这样的形式：接受两个相同类型的参数，并返回 int。我想对这些委托建模的最佳方法是使用通用委托：

```
public delegate int MyFunctionDel <T> (T a, T b); 
```

但是如何创建不同类型的 MyFunctionDel 集合？我不能这样声明：

```
List<MyFunctionDel <T>> mylist; //Compile error: cannot find type T 
```

其次，这就是我真正想要做的。我正在尝试做的事情可以通过上述问题来解决。但是您可以提供替代解决方案。

我写了一个类似集合的结构：它可以保存任何类型的数据。但是结构中的所有数据都应该属于同一类型。不幸的是，由于某些历史原因，这种结构并不通用。这个结构有一个比较方法。

但现在我需要为某些特定类型提供定制的比较器。我想要的行为是：如果结构中有一个用于数据类型的自定义比较器，则使用自定义比较器，否则使用原始的比较方法。这是我的演示代码：

```
/*
 *This piece of code demonstates my idea, but never works
 */

static class Program
{
    [STAThread]
    static void Main()
    {
        MyStructure s = new MyStructure ();

        //create a customized comparer using Comparison<T> generic delegate
        Comparison <string> myStirngComparer = (x , y)=> {
           return -x.CompareTo(y);
        };

        s.CustomizedComparers[typeof(string)] = myStirngComparer;

        System.Console.WriteLine (s.Compare("a" , "b")); //I am expecting the result to be 1
    }
}

class MyStructure
{
   //For simplicity, I won't put storage related code here

    public int Compare (object o1, object o2)
    {
       //let's suppose o1 and o2 are always of same type
       switch (o1.GetType())
       {
            case TypeCode.Single: return Compare<Single> ((Single)o1 , (Single)o2);  
            case TypeCode.Double: return Compare<Double> ((Double)o1 , (Double)o2); 
            case TypeCode.String: return Compare<String> ((String)o1 , (String)o2); 
            //and so on.....
       }
       return 0;            
    }

    //NOTE: code below won't work
    //But my logic is: use a Dictionary to store a map from "Type" to "Comparison<T>"
    //When doing the comparison, we first examine if there exists one Comparison<T> for 
    //Type T in the Dictionary

    //Compile failed here
    public Dictionary <Type , Comparison<T> > CustomizedComparers = new Dictionary <Type , Comparison<T> > ();

    private int Compare<T> (T a , T b)
    {
         if (CustomizedComparers.ContainsKey(typeof(T)))
         {
            Comparison<T> comp = CustomizedComparers[typeof(T)];
            return comp (a , b);
         }
         else return Comparer<T>.Default.Compare(a, b);
    }
} 
```

欢迎任何意见、建议和见解！谢谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:41:50.123

您可以`Dictionary<Type, Delegate>`在请求时创建代理并将其强制转换为正确的类型。考虑使用辅助类而不是 plain `Dictionary<Type, Delegate>`：

```
public class ComparersCollection
{
    private readonly Dictionary<Type, Delegate> _comparers =
        new Dictionary<Type,Delegate>();

    public void OverrideComparison<T>(Comparison<T> comparison)
    {
        if(comparison == null)
        {
            _comparers.Remove(typeof(T));
        }
        else
        {
            _comparers[typeof(T)] = comparison;
        }
    }

    public Comparison<T> GetComparison<T>()
    {
        Delegate comparison;
        if(_comparers.TryGetValue(typeof(T), out comparison))
        {
            return (Comparison<T>)comparison;
        }
        else
        {
            return Comparer<T>.Default.Compare;
        }
    }
} 
```

现在您可以使用：

```
Comparison <string> myStringComparer = (x, y) => -x.CompareTo(y);
s.CustomizedComparers.OverrideComparison(myStringComparer); 
```

和

```
var comparison = CustomizedComparers.GetComparison<T>();
return comparison(a, b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:44:36.530

我认为您真正想要做的是将比较器函数作为委托传递给字典的构造函数，而不是试图使其成为类型签名的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T19:31:15.330

你可以这样做：

```
static class Comparison
{
    static class Of<T>
    {
        static public readonly Func<T, T, int> Compare;

        static Of()
        {
            var type = typeof(T);
            if(type == typeof(string))
            {
                Comparison.Of<T>.Compare = (Func<T, T, int>)(object)new Func<string, string, int>((x, y) => x.CompareTo(y));
            }
            else if(type == typeof(int))
            { 
              //... can generated dynamically with expression or dynamicmethod.
            }
            else
            {
                throw new NotSupportedException();
            }
        }
    }

    static public int Compare<T>(T x, T y)
    {
        return Comparison.Of<T>.Compare(x, y);
    }
}

var a = "1";
var b = "2";
Comparison.Compare(a, b); //generic parameter is infered. 
```

# python - python循环输入文件

> ID：11726349
> 
> 赞同：16
> 
> 时间：2012-07-30T17:17:36.487
> 
> 标签：python, for-loop, file-io

我的问题与 Python 中的文件输入有关，使用`open()`. 我有一个`mytext.txt`包含 3 行的文本文件。我试图用这个文件做两件事：打印行，打印行数。

我尝试了以下代码：

```
input_file = open('mytext.txt', 'r')
count_lines = 0
for line in input_file:
    print line
for line in input_file:
    count_lines += 1
print 'number of lines:', count_lines 
```

结果：它正确打印了 3 行，但打印了“行数：0”（而不是 3）

* * *

我找到了两种方法来解决它，并让它打印`3`：

1）我使用一个循环而不是两个

```
input_file = open('mytext.txt', 'r')
count_lines = 0
for line in input_file:
    print line
    count_lines += 1
print 'number of lines:', count_lines 
```

2）在第一个循环之后，我再次定义 input_file

```
input_file = open('mytext.txt', 'r')
count_lines = 0
for line in input_file:
    print line
input_file = open('mytext.txt', 'r')
for line in input_file:
    count_lines += 1
print 'number of lines:', count_lines 
```

* * *

对我来说，似乎该定义`input_file = ...`仅对一个循环有效，就好像在我将它用于循环后它被删除了一样。但我不明白为什么，我可能还不是 100% 清楚，`variable = open(filename)`在 Python 中是如何处理的。

顺便说一句，我发现在这种情况下最好只使用一个循环。但是，我觉得我必须弄清楚这个问题，因为在某些情况下我可以/必须使用它。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-30T17:21:31.793

文件句柄是一个迭代器。遍历文件后，指针将定位在 EOF（文件末尾），迭代器将引发 StopIteration 退出循环。如果您尝试对指针位于 EOF 的文件使用迭代器，它只会引发 StopIteration 并退出：这就是它在第二个循环中计数为零的原因。`input_file.seek(0)`您可以在不重新打开文件的情况下倒带文件指针。

也就是说，在同一循环中计算行数会提高 I/O 效率，否则您必须第二次从磁盘读取整个文件才能计算行数。这是一个非常常见的模式：

```
with open('filename.ext') as input_file:
    for i, line in enumerate(input_file):
        print line,
print "{0} line(s) printed".format(i+1) 
```

在 Python 2.5 中，文件对象已配备`__enter__`并`__exit__`处理[`with`语句接口](http://effbot.org/zone/python-with-statement.htm)。这是类似于以下内容的语法糖：

```
input_file = open('filename.txt')
try:
    for i, line in enumerate(input_file):
        print line,
finally:
    input_file.close()
print "{0} line(s) printed".format(i+1) 
```

我认为 cPython 在收集垃圾时会关闭文件句柄，但我不确定这是否适用于每个实现 - 恕我直言，明确关闭资源句柄是更好的做法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T17:20:03.210

是否有某些原因您不能使用以下内容：

```
input_file = open('mytext.txt', 'r')
count_lines = 0
for line in input_file:
    print line
    count_lines += 1
print 'number of lines:', count_lines 
```

open 返回的东西是一个文件对象。文件对象在您遍历它们时会跟踪它们自己的内部位置，因此为了执行您首先尝试的操作，您必须手动将其倒回到开头，它不会自行完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T17:20:15.623

尝试`input_file.seek(0)`在两个循环之间添加一个。这会将文件倒回到开头，因此您可以再次循环播放它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-10T11:38:27.747

我瘦了你想要的模块文件输入。

[链接在这里](http://docs.python.org/2/library/fileinput.html)

```
if __name__ == "__main__":
for line in fileinput.input():
    if fileinput.isfirstline():
        print("current file: %s" % fileinput.filename())

    print("line number: %d, current file number: %d" % 
          (fileinput.lineno(), fileinput.filelineno())) 
```

# regex - 使用正则表达式如何根据其位置提取单词

> ID：11726351
> 
> 赞同：-1
> 
> 时间：2012-07-30T17:17:59.293
> 
> 标签：regex

我正在使用 Web ripper 从我的客户网站提取信息并将其发布到分类网站。我遇到的问题是年份模型和品牌都在一条线上，我需要将它们分开。

例如 2005 Acura MDX Touring 我需要将它放在 4 个单独的字段中

*   2005 年
*   制作极品
*   模型 mdx
*   风格巡回演出

使用网络开膛手，我可以在内容转换中使用正则表达式代码

所以当我输入

*   `\w+` 我得到 2005
*   `\w(?<!\d)[\w'-]*` 我得到讴歌

我需要并且非常感激的是获得第三个单词和第四个单词的正确正则表达式代码

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:42:03.233

我不熟悉 Web ripper，但您应该能够利用捕获组来使这变得相当简单：

```
(\w+)[ \t]+(\w+)[ \t]+(\w+)[ \t]+(\w+) 
```

现在 year 将在第一组捕获（通常是`\1`or `$1`），make 将在第二组捕获，等等。

我使用`[ \t]+`而不是`\s+`确保你不会抓住换行符，如果它肯定只是一个空格，你可以简化它。

# linux - Sendmail/procmail - 获取邮件发件人和邮件主题，utf8 编码问题

> ID：11726354
> 
> 赞同：0
> 
> 时间：2012-07-30T17:18:06.263
> 
> 标签：linux, character-encoding, debian, postfix-mta, procmail

我的 .procmailrc （真的很简单）：

```
:0c
| $HOME/send_sms.sh "`formail -xFrom:`" "`formail -xSubject:`" 
```

因此，名为“mail@domain.com”的发件人发送主题为“Subject test ąść”的消息。脚本“send_sms.sh”接收：

发件人： `=?UTF-8?Q?mail@domain.com?= <mail@domain.com>`

学科：`=?UTF-8?Q?Subject_test_=C4=85=C5=9B=C4=87?=`

我应该如何修改我的 .procmailrc 以获得明文？或者在我的脚本 send_sms.sh 中转换它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:44:23.140

[http://metacpan.org/pod/Email::MIME::RFC2047::Decoder](http://metacpan.org/pod/Email%3a%3aMIME%3a%3aRFC2047%3a%3aDecoder)在 Perl 中有一个简单的 RFC2047 解码器。您也许应该只解码您可以支持的字符集中的字符串，但是您的所有示例都是 UTF-8，所以如果您的脚本支持在 SMS 中发送 UTF-8，那么您应该没问题。对于其他字符集，也许您可​​以在发送之前在单独的步骤中转换为 UTF-8。

# ios - 我可以在 iOS 中使用 system() 吗？

> ID：11726355
> 
> 赞同：0
> 
> 时间：2012-07-30T17:18:06.517
> 
> 标签：ios, system

我想查看使用`system("ps x");`或类似功能处理的所有正在运行的进程。然后`kill`使用 .. 的不需要的进程`system("kill xxxx");`在 iOS 中是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:23:27.143

出于安全原因，这是不可能的。能够访问如此多的信息将允许其他人重新映像设备。

# sql - 在 Lucene 或 SQL 中获得更好的性能

> ID：11726358
> 
> 赞同：4
> 
> 时间：2012-07-30T17:18:16.873
> 
> 标签：sql, postgresql, search, lucene

我正在使用`PostgreSQL`数据库。

有一个名为 metadatavalue 的表，其结构如下：

```
metadatavalue_id    integer  Primary Key Auto Increment
metadta_field_id    integer  Foreign Key
text_Value      varchar
text_lang       varchar
place           integer 
```

当提交或添加任何内容时，就会创建一个包含近 25 个元数据字段的项目。

元数据值表已经包含

> 十五万 (150000) 条记录。

我正在为一个字段实现自动完成功能，比如说“作者”，它作为 metadata_field_id 存储在表中。

当我在 PgSQL 提示符下查询表时，返回结果大约需要 1 或 2 秒。

询问：

```
SELECT metadatavalue.text_value AS author, count(metadatavalue.text_value) AS count
   FROM metadatavalue
  WHERE (metadatavalue.metadata_field_id IN ( SELECT metadatafieldregistry.metadata_field_id
           FROM metadatafieldregistry
          WHERE metadatavalue.text_value LIKE 'Pra%' AND metadatafieldregistry.metadata_schema_id = 1 AND metadatafieldregistry.element::text = 'contributor'::text))
  GROUP BY metadatavalue.text_value; 
```

由于其自动完成，当用户输入值时，查询可能会运行 4-5 次。

所以，我正在考虑实现基于 LUCENE 的搜索。

其中，首先从后端创建索引，然后在每个新项目创建时运行一个线程来索引新项目。

我想知道[Apache Lucene](http://lucene.apache.org/)是更好的选择还是可以优化 SQL。

编辑：还有另一个包含元数据字段的表，它在元数据值表中用作值的外键（metadatafieldregistry.metadata_field_id）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:42:56.973

我想说，如果完成正确的索引，任何数据库都会优雅地处理至少一百万行，你没有理由进入 Lucene 或 Solr，这将向你介绍新任务，例如将索引与数据库的最新状态同步.

此外，Lucene 或 Solr 非常适合自由文本搜索。这意味着如果您在 Lucene“文档”中搜索“Bob Marley”，那么您将获得所有包含“Bob Marley”、“Marley Bob”或只有“Bob”且只有“Marley”甚至“Bob.. .很多文字......马利”。因此，使用 Lucene 还取决于您要涵盖的用例类型。

从您显示的查询中，我觉得如果您索引`metadatavalue.text_value` `metadatafieldregistry.metadata_schema_id`和`metadatafieldregistry.element`列，您将获得良好的性能。还可以尝试将您的查询转换为联接而不是`in`查询。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:40:30.553

通过对如此小的数据集进行前缀查询，只要正确索引所需的列，Solr 和 PostgreSQL 都应该执行得非常好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T11:27:25.890

您没有提到`metadatafieldregistry`表的架构（实际上您说您只有一张表，但您的查询使用了两张）

查看`explain analyze`输出以了解查询计划是什么，以及什么占用了扫描时间。您的子查询是相关的，这几乎肯定不是一个好的计划：通常，架构闻起来有 EAV 的味道。您可能会发现部分索引很有帮助，它可以生成仅包含您想要对其进行前缀搜索的那些文本值的索引（可能会限制 `metadata_schema_id`and `element`）

# wpf - 与硬件渲染相比，软件渲染减少了 CPU 使用率

> ID：11726361
> 
> 赞同：5
> 
> 时间：2012-07-30T17:18:35.320
> 
> 标签：wpf, rendering

我有这个 WPF 应用程序，它可以连续显示来自 5MP 数码相机的实时图像。图像首先从字节数组转换为位图源，然后显示在 Image 控件中：

```
m_imageControl.Source = MyBitMapSource; 
```

流式传输时，CPU 利用率约为 30-35%。“RenderCapability.Tier >> 16”表示“Tier 2”，所以我认为我的系统应该足够了，WPF 将尝试尽可能多地利用硬件渲染。

有趣的是，如果通过使用强制软件渲染：

```
RenderOptions.ProcessRenderMode = System.Windows.Interop.RenderMode.SoftwareOnly; 
```

CPU 使用率下降到 25% 左右，并且应用程序报告了相同的显示帧速率（没有性能影响）。

我对这个结果感到困惑，因为我认为硬件渲染应该比软件渲染提供更好的性能（更少的 CPU）。有人可以对此有所启发吗？

我的系统设置是：

*   操作系统：Windows 7 64-bit Utimate
*   CPU：英特尔 i3 530 四核 2.93HGHz
*   显卡：NVIDIA GeForce GT 520 1G 专用内存
*   显卡驱动程序：NVIDIA 8.17.12.9573 09/02/2012

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-07T19:18:04.943

[从这里](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/55ad9427-5b69-4870-b5e7-94b28ed861be)回答

> 图像首先从字节数组转换为位图源，然后显示在图像控件中："
> 
> 当您使用硬件渲染时，这会迫使它每帧将新图像序列化到您的 GPU。通常，GPU 可以缓存图像，因此序列化开销小于渲染开销 - 但在您的情况下，您会不断丢弃 GPU 上的图像，因此将其推送到 GPU 并渲染没有任何优势硬件。
> 
> 通过强制软件渲染，您可以避免每帧都向 GPU 推送，这就是为什么它在这种情况下实际上表现更好的原因。

# android - Android：在我们的 rom/设备上自动安装 apk

> ID：11726363
> 
> 赞同：-1
> 
> 时间：2012-07-30T17:18:47.497
> 
> 标签：android, installation, rom

我们开始致力于特殊用途的 android 项目

问题 1：请假设我们有我们的 android rom，我们用这个 rom 交付设备，所以我们有一个应用程序，在这个 rom 上名为*“ApplicationManager”*作为捆绑/预安装的应用程序，并且 ApplicationManager 拥有所有权限

这个ApplicationManager应用程序是否有可能无需安装确认或卸载我们安装的任何应用程序即可安装其他应用程序？*（我们的应用程序使用相同的证书签名，因此开发人员看起来相同）*

问题2：在未预装ApplicationManager的情况下是否有可能*[我们无法成功这种情况]*

问题 3：什么是 Android 的已知来源，我们如何才能成为 Android 上的已知来源？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:11:48.700

如果您有自己的 rom/设备，那么您**不**应该使用 ApplicationManager，但您**应该**修改 Build 的 makefile。

# php - Netbeans 自动完成不适用于班级分配

> ID：11726365
> 
> 赞同：0
> 
> 时间：2012-07-30T17:18:54.723
> 
> 标签：php, ide, netbeans-7

我有这个类保存在 foo.php

![在此处输入图像描述](../Images/38c91c9c32a6966fce00d246b0b3ae10.png)

然后这个类保存在 bar.php

![在此处输入图像描述](../Images/e3f05cf852257d63f2fbcf6106a57af4.png)

如您所见，自动完成建议不起作用。请注意，如果我将`Bar`类放在 foo.php 中，它确实有效。

只要它们在一个项目中，自动完成甚至应该在单独的文件上工作，对吗？

顺便说一句，我正在使用 Netbeans IDE 7.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:05:27.603

自己找到了答案：

必须在变量声明上方放置注释

```
/**
 *
 * @var LP_pdo
 */
 protected $hello; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:23:07.823

NetBeans 不知道它`$hello`已被实例化为 a `new LP_pdo()`，因此无法为您完成代码。

# mysql - 当我在表上只有一个值时，我无法在 MySQL 上找到确切的值

> ID：11726366
> 
> 赞同：-1
> 
> 时间：2012-07-30T17:18:54.833
> 
> 标签：mysql

> **可能重复：**
> [使用 MySQL 搜索时出现问题](https://stackoverflow.com/questions/11726048/problems-searching-with-mysql)

我有一个问题，我用这个语法做了一个搜索表单。

问题是，如果我找到确切的值，它什么也找不到。

例如，如果我只有一个带有“8345GS”的值，它什么也不会显示，但如果我有 3 或 4 行具有相同的值，它就可以工作。不知道是什么问题，这是声明

```
SELECT * FROM hoja1 WHERE Modelo LIKE '%$buscar%' or Concepto LIKE '%$buscar%' LIMIT $inicio, $TAMANO_PAGINA 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:21:39.837

$inicio 必须从零开始，当然你使用的是 1。这就是原因，因为只有超过 1 行才能看到结果。

# ios - Quartzcore 框架错误 iOS

> ID：11726370
> 
> 赞同：0
> 
> 时间：2012-07-30T17:19:12.330
> 
> 标签：ios, xcode, core-animation

我在我的 iOS 应用程序中使用石英核心框架已有一段时间了。就在最近，没有对框架进行任何更改，它在我的应用程序中导致了构建错误。在 CATransform3d.h 头文件中，发现了两个构建错误。有错误的代码如下。

```
@interface NSValue (CATransform3DAdditions) - Method type specifier must start with + or -

+ (NSValue *)valueWithCATransform3D:(CATransform3D)t; - expected selector for objective c method

@end

- (CATransform3D)CATransform3DValue; 
```

有谁知道为什么会出现以下构建错误？为什么他们会突然出现？我已经删除并重新添加了石英核心框架。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:19:34.260

在 XCode 4 中，在左侧边栏中，选择顶部的项目文件：

1) 确保在主视图中选择了您的目标，您应该在顶部看到 5 个选项卡，

2) 单击“构建阶段”选项卡，

3) 单击“Link Binary With Libraries”行左侧的箭头，

4）点击刚刚出现在该行底部的加号按钮，

5) 在搜索栏中输入“QuartzCore”，

6）你应该看到一个名为“iOS 4.3”的文件夹，里面有“QuartzCore.framework”，

7) 双击“QuartzCore.framework”将其添加到您当前的项目中。

然后它应该出现在左侧边栏中，如果您愿意，可以将其拖到框架文件夹中。

确保你做一个

```
#import <QuartzCore/QuartzCore.h> 
```

# android - 使用 3d Carousel 项目创建 SPB Carousel 风格

> ID：11726377
> 
> 赞同：0
> 
> 时间：2012-07-30T17:19:48.540
> 
> 标签：android, 3d, carousel

我想利用这个项目（我真的很喜欢！:)

[http://www.codeproject.com/Articles/146145/Android-3D-Carousel](http://www.codeproject.com/Articles/146145/Android-3D-Carousel)

并改变每个项目的角度以获得类似greate SBP 3D shell的东西（我不会像他们那样用NDK编写它，这只是为了证明我的目标）：

spb.com/android-software/shell/

为了更清楚，看看这个： [https ://picasaweb.google.com/106652353498756915046/July302012#5771003229411069650](https://picasaweb.google.com/106652353498756915046/July302012#5771003229411069650)

我想获得＃2，而不是＃1（我现在可以通过我提到的第一个项目获得）。

我必须使用 api 级别 10，所以 CarouselView 没有帮助我......

在此先感谢，伊莱拉姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:07:31.310

找到解决方案（：

修改 Carousel.getChildStaticTransformation()。之后`mCamera.translate()`和之前`mCamera.getMatrix()`添加：

`mCamera.rotateY(-(CarouselImageView)child).getCurrentAngle())`;

工作完美！

# java - java工作线程中的无限循环无视由ScheduledExecutorService暂停

> ID：11726378
> 
> 赞同：0
> 
> 时间：2012-07-30T17:19:52.707
> 
> 标签：java, multithreading

大家好，我有一个关于一串童话灯问题的问题。该程序是要显示一串仙女灯，并无限地遍历灯光对象的集合，打开和关闭它们。

我已经实现了这个在 ScheduledExecutorService 中执行，并将执行器设置为初始延迟为零，再延迟 30 秒

```
ScheduledExecutorService executor = Executors.newScheduledThreadPool(2);
`ScheduledFuture sequenceFutre = executor.scheduleWithFixedDelay(sequenceRunnable, 0, 30, TimeUnit.SECONDS);` 
```

我有这样的灯光数组列表的循环

```
 try {
        while (!pause) {
            for (int i = 0; i < theLights.size(); i++) {
                Light light = theLights.get(i);
                System.out.println(String.format(outputstr, (i + 1), light.turnOn()));
                Thread.sleep(HALF_SECOND_INTERVAL);
                System.out.println(String.format(outputstr, (i + 1), light.turnOff()));
            }
        }
    } catch (InterruptedException ie) {
        ie.printStackTrace();
    } catch(Error err) {
        err.printStackTrace();
    } 
```

我在这里缺少的部分是包裹在其中的可运行文件似乎不会在 30 秒处停止并在恢复之前等待 30 秒，这是要求。

有人可以帮忙吗？我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:37:17.880

每次执行都会调用您的可运行`run()`方法。您不应该在代码中使用 while 循环，您应该在每个序列完成后从 run 方法返回。

更新：

正如 OP 所指出的，一个“运行”应该基于时间长度，所以你的运行方法应该跟踪它已经运行了多长时间。即在 run 方法开始时记录当前时间，然后继续循环直到 30 秒过去，然后从 run 方法返回。

# lua - Lua定位/表格？

> ID：11726383
> 
> 赞同：1
> 
> 时间：2012-07-30T17:20:05.670
> 
> 标签：lua, lua-table

这对某些人来说应该是微不足道的，但我不明白：s

```
if Message == "!kanebot" then
    pos = {}
    pObj = Get_GameObj(pID)
    pos = Get_Position(pObj)
    pos2:AssignX(pos2:GetX()+ 4*math.cos(Get_Facing(Get_GameObj(pID))*(math.pi / 180)))
    pos2:AssignY(pos2:GetY()+ 4*math.cos(Get_Facing(Get_GameObj(pID))*(math.pi / 180)))
    pos2:AssignZ(pos2:GetZ()+ .3)
    reinf = Create_Object("Nod_Kane", pos)
    Attach_Script_Once(reinf, "M01_Hunt_The_Player")
    Attach_Script_Once(reinf, "M00_No_Falling_Damage_DME")
    InputConsole("%s has bought a kanebot.", Get_Player_Name_By_ID(pID))
end 
```

给出的错误是：尝试索引全局“pos2”（一个零值）

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:03:11.897

你把位置变成变量`pos`，然后是索引`pos2`。 `pos2`永远不会被初始化，所以当你尝试索引它时（`pos2:blah`）你会得到一个关于尝试索引的错误`nil`。

旁注：该`pos = {}`行完全是多余的，因为您`pos`稍后会覆盖两行。此外，这些变量中的大多数应该设置为本地变量，这样既更快又避免污染全局命名空间。

对您的代码和/或您正在使用的 API 一无所知的小重构：

```
if Message == "!kanebot" then
    local gameobj = Get_GameObj(pID)
    local pos = Get_Position(gameobj)
    pos:AssignX(pos:GetX()+ 4*math.cos(Get_Facing(getobj)*(math.pi / 180)))
    pos:AssignY(pos:GetY()+ 4*math.cos(Get_Facing(getobj)*(math.pi / 180)))
    pos:AssignZ(pos:GetZ()+ .3)
    local reinf = Create_Object("Nod_Kane", pos)
    Attach_Script_Once(reinf, "M01_Hunt_The_Player")
    Attach_Script_Once(reinf, "M00_No_Falling_Damage_DME")
    InputConsole("%s has bought a kanebot.", Get_Player_Name_By_ID(pID))
end 
```

# hadoop - Hadoop 作业的 CPU 时间意味着什么？

> ID：11726388
> 
> 赞同：7
> 
> 时间：2012-07-30T17:20:13.177
> 
> 标签：hadoop, timing, benchmarking

恐怕我不明白 Map-Reduce 作业的计时结果。例如，我正在运行的作业从作业跟踪器中为我提供了以下结果。

完成时间：1 分 39 秒

花费的 CPU 时间（毫秒） 150,460 152,030 302,490

CPU 时间 (ms) 中的条目分别用于 Map、Reduce 和 Total。但是，那么如何衡量“花费的 CPU 时间”以及它意味着什么？这是分配给作业的每个映射器和缩减器所花费的总累积时间吗？是否可以从框架中测量其他时间，例如随机播放、排序、分区等时间？如果是这样，怎么做？

困扰我的第二个问题。我在这里看到了一些帖子（[Link1](https://stackoverflow.com/questions/6860987/time-taken-for-hadoop-job-to-execute)，[Link2](https://stackoverflow.com/questions/10119460/measure-hadoop-job-time-using-jobcontrol)），建议在驱动程序类中使用 getTime() ：

```
long start = new Date().getTime();
boolean status = job.waitForCompletion(true);
long end = new Date().getTime();
System.out.println("Job took "+(end-start) + "milliseconds"); 
```

这不是在做 Job Tracker 输出中的第一个条目提供的内容吗？这是必要的吗？为 hadoop 作业计时的最佳方法是什么，尤其是当我想计时 IO 时间、计算每个节点/每个阶段的时间时？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-31T06:25:42.597

映射阶段包括：记录读取器、映射、组合器和分区器。

reduce阶段包括：shuffle、sort、reduce、output。

您看到的 CPU 时间是整个 map 阶段和整个 reduce 阶段......不仅仅是函数本身。这是一种令人困惑的术语，因为您拥有 map 函数和 reduce 函数，它们只是 map*阶段*和 reduce*阶段*的一部分。这是集群中所有节点的总 CPU 时间。

CPU时间与实时有很大不同。CPU时间是在CPU上花费的时间，而实时是你我作为人类所经历的。想一想：假设您有相同的作业在相同的数据上运行，但在一个 20 节点集群上，然后是 200 节点集群。总体而言，两个集群将使用相同数量的 CPU 时间，但 200 节点集群的实时运行速度将提高 10 倍。当您有一个共享系统同时在其上运行大量作业时，CPU 时间是一个有用的指标。

我不知道您将如何深入研究以获取每个阶段的 CPU 时间。不过，使用日期计时器可能不是您想要的。

# java - Java 如何读取和删除文件的内容。

> ID：11726389
> 
> 赞同：0
> 
> 时间：2012-07-30T17:20:13.710
> 
> 标签：java

在将它们添加到我的网页之前，我有一个包含大约 700 项需要编辑的列表。我尝试手动编辑每个项目，但它变得过于广泛，我想我可能会使用 Java 来读取和编辑文件，因为需要编辑的单词在每个项目中具有相同的开头和结尾。

我想我会从循环 Q 中的单词开始，保存它，当我有逻辑工作时，我会找出如何读取文本文件并再次做同样的事情。（如果有其他方法，我愿意提出建议）这是我到目前为止整理的代码，很久以前我用Java编写过代码，所以我现在基本上没有技能。

```
import javax.swing.JOptionPane;

public class CustomizedList
{

public static void main (String[] args)
{
    String Ord = JOptionPane.showInputDialog("Enter a word");
    String resultatOrd ="";

    for(int i = 0; i < Ord.length(); i++)
    {
        if(Ord.charAt(i) == 'y' && Ord.charAt(i) == 'e' && Ord.charAt(i) ==    

's')
        {
            resultatOrd += Ord.charAt(i);
            System.out.println(resultatOrd);
        }   

        else
        System.out.println("Wrong word.");
    }
}
} 
```

我不确定我做错了什么，但我输入的单词在逻辑上不起作用。我想从这个文本文件中删除两个单词：YES 和 NO，无论是小写还是大写。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T17:22:42.460

您的代码不可能正确：

```
if(Ord.charAt(i) == 'y' && Ord.charAt(i) == 'e' && Ord.charAt(i) ==  's') 
```

永远***是******假***的

 *解决方案：

```
Ord.toLower().contains("yes") 
```

或者（更糟糕但在您的情况下仍然正确）：

```
if(Ord.charAt(i) == 'y' && Ord.charAt(i+1) == 'e' && Ord.charAt(i+2) ==  's') 
```

如果你只是在寻找平等，你可以使用`equals()`

[http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#contains(java.lang.CharSequence](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#contains(java.lang.CharSequence) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:23:35.290

你的`if`测试：

```
if(Ord.charAt(i) == 'y' && Ord.charAt(i) == 'e' && Ord.charAt(i) == 's') 
```

永远不会是真的。您指定同一个字符必须是三个不同的东西。

搜索该方法[`String.equalsIgnoreCase`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)，以更好地测试您想要的单词。

例如：

```
if (word.equalsIgnoreCase("yes") || word.equalsIgnoreCase("no"))
    // do something with word 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:56:25.730

希望这会有所帮助，我尝试评论每个部分，让您了解每一行的作用。仅当“是”和“否”在各自的单独行上时才有效。

这是 I/O 的 Java 教程链接。我建议您有空时阅读它，有很多有用的信息[Java I/O 教程](http://docs.oracle.com/javase/tutorial/essential/io/)

```
import java.io.*;
import java.util.ArrayList;
public class test {

    public static void main(String[] args) throws Exception {
    //name of file to read
    File file = new File("filename.txt");

    //BufferedReader allows you to read a file one line at a time
    BufferedReader in = new BufferedReader(new FileReader(file));   

    //temporary Array for storing each line in the file
    ArrayList<String> fileLines = new ArrayList<String>();

    //iterate over each line in file, and add to fileLines ArrayList
    String temp=null;
    while((temp=in.readLine())!=null){
        fileLines.add(temp);        
    }
    //close the fileReader
    in.close();

    //open the file again for writing(deletes the original file)
    BufferedWriter out = new BufferedWriter(new FileWriter(file));

    //iterate over fileLines, storing each entry in a String called "line"
    //if line is equal to "yes" or "no", do nothing.
    //otherwise write that line the the file
    for(String line : fileLines){
        if(line.equalsIgnoreCase("yes")||line.equalsIgnoreCase("no")){
            continue;//skips to next entry in fileLines
        }
        //writes line, if the line wasn't skipped 
        out.write(line);
        out.write(System.getProperty("line.separator")); //newline
    }
    //save the new file 
    out.close();

    }

} 
```*

# encoding - 请求给定资源时的字符编码问题

> ID：11726392
> 
> 赞同：0
> 
> 时间：2012-07-30T17:20:22.197
> 
> 标签：encoding, http-headers

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:32:33.943

I think your parser is working fine. It's just that the page either **A)** is using mixed/incorrect encoding or **B)** is actually writing the unicode replacement character '�', ie the characters got munged somewhere before being output to the page (like going in/out the database). Where accents are correctly showing up, the page is using html entities, not the characters themselves.

if **A)** You could to try to detect coding (a pain, problematic).

if **B)** You can't do anything.

# model-view-controller - 解释“Backbone 不是严格的 MVC”

> ID：11726398
> 
> 赞同：0
> 
> 时间：2012-07-30T17:21:02.477
> 
> 标签：model-view-controller, backbone.js, definition

MVC 代表模型、视图和控制器。Backbonejs.or 通过与 Rails 的比较来解释这一点，更多内容请参见[此处](http://backbonejs.org/)和下方。因为不了解Rails，所以比较毫无意义。下面的摘录突出显示了控制器，这可能不是严格意义上的 MVC 的原因——不确定它推断出什么。Backbone 不是严格的 MVC 是什么意思？

**摘自 Backbonejs.org -site（来源[在这里](http://backbonejs.org/)）。**

> **Backbone 与“传统”MVC 有何关系？**
> 
> 模型-视图-控制器模式的不同实现往往对控制器的定义存在分歧。*如果有帮助的话，在 Backbone 中，View 类也可以被认为是一种控制器，* 调度源自 UI 的事件，而 HTML 模板作为真正的视图。我们称它为 View 是因为它代表 UI 的逻辑块，负责单个 DOM 元素的内容。
> 
> 将 Backbone 的整体结构与 Rails 等服务器端 MVC 框架进行比较，各部分排列如下：
> 
> *   **Backbone.Model** – 就像 Rails 模型减去类方法。在业务逻辑中包装一行数据。
> *   **Backbone.Collection** – 一组客户端模型，具有排序/过滤/聚合逻辑。
> *   **Backbone.Router** – Rails routes.rb + Rails 控制器操作。将 URL 映射到函数。
> *   **Backbone.View** – 一个合乎逻辑的、可重用的 UI。通常但不总是与模型相关联。
> *   **客户端模板**——Rails .html.erb 视图，渲染一大块 HTML。

我添加了斜体以强调为什么它显然不是 MVC。在上面我可以找到模型和视图 - 术语 - 但该术语`controller`被明确省略，而不是使用术语路由器、集合和模板。为什么路由器/集合/模板不是控制器？

我发现这个控制器定义`controller mediates input, converting it to commands for the model or view`（[此处](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)为维基百科）有点模糊。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:39:46.780

很有趣的说法，特别是因为 Rails 离实现 MVC 启发的设计模式还很远。实际上，我想说的是，BackboneJS 的解释更接近于 MVC 思想。

视图不应该只是一个愚蠢的模板。它应该负责所有的表示逻辑（并且，在经典 MVC、Model2 MVC 和 HMVC 模式的情况下，一个活动结构）。

Rails 框架实现的内容可以更好地描述为“ORM、模板、适配器”反模式，其中业务和表示逻辑都被迫进入他们所谓的“控制器”。

BackboneJS 实现的实际上更接近于 MVVM 设计模式，其中 viewmodel 为被动视图提供信息。然后视图决定如何处理它以及使用哪些模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T00:44:49.210

据我了解，传统的 MVC 模式具有以下要素：

模型 - 仅保存数据（可能是一些数据处理方法）

视图 - 呈现向用户展示部分数据的可视化和交互式元素。

控制器 - 处理模型和视图之间以及用户和代码之间的交互（例如，当模型更新时，重新渲染视图，当用户单击按钮时，更改模型中的数据）。

在 Backbone 中，没有明确的控制器。相反，此控制功能由以下人员执行：a) 视图本身（例如，设置事件侦听器以更新用户操作的模型） b) 处理要显示哪些视图的路由器和 c) 索引文件或其他 HTML/JS 代码。

# php - MySQL 内联 if 语句

> ID：11726401
> 
> 赞同：5
> 
> 时间：2012-07-30T17:21:21.130
> 
> 标签：php, mysql

我有一个查询，它从单个表中选择项目的名称、描述、日期等。该表有一个名为“已归档”的字段。如果一行在已归档字段中有 1，则表示它已归档。

我目前在这里使用此代码来显示我的项目列表，无论它是否已存档：

```
<?php
        // Request the text for zz
        $result = @mysql_query("SELECT oc_sysitem,oc_item,oc_itemdesc,oc_genre,oc_star,oc_alttxt,oc_iearchived,oc_url FROM catalog WHERE oc_sysitem LIKE('zz') ORDER BY oc_sysitem DESC, oc_item, oc_setnum +0 ASC");

        if (!$result) {
            exit('<p>Error performing query: ' . mysql_error() . '</p>');
        }
        //creating the table w/ headers
        echo '
        <table cellpadding="3px">
        <tr>
            <td style="width:360px;font-weight:bold"><p>Title</p></td>
            <td style="width:90px;font-weight:bold"><p>Genre</p></td>
            <td style="width:70px;font-weight:bold"><p>System</p></td>
            <td style="width:51px;font-weight:bold"><p>Rating</p></td>
        </tr>';     
        // Display each zz
        while ($row = mysql_fetch_array($result)) {
        echo '
        <tr title="' . $row['oc_item'] . ' ' . $row['oc_itemdesc'] . ', ' . $row['oc_alttxt'] . '" class="tblhover">
            <td style="width:360px"><a href="' . $row['oc_url'] .'" rel="nofollow">' . $row['oc_item'] . ' ' . $row['oc_itemdesc'] . '</a></td>
            <td style="width:90px">' . $row['oc_genre'] . '</td>
            <td style="width:70px">' . $row['oc_sysitem'] . '</td>
            <td style="width:51px"><img src="../../media/ocdb/' . $row['oc_star'] . '" alt="' . $row['oc_alttxt'] . '" title="' . $row['oc_alttxt'] . '" /></td>
        </tr>
        ';
        }       
        echo '</table>';        
        ?> 
```

如果已存档，我希望能够在标题旁边显示一个星号。我一直无法弄清楚如何添加 if 语句或正确的路径。欢迎任何建议，谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T17:30:09.957

MySQL有以下`IF`功能：

`if(expr1, expr2, expr3)`

如果`expr1`是`TRUE`返回`expr2`，否则返回`expr3`

看**[这里](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_if)**了解更多详情

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T17:23:58.807

您可以在 sql 中执行此操作

例子：

```
CASE WHEN Archived = 1 THEN Title + '*' ELSE Title END As Title 
```

在你的情况下

```
CASE WHEN oc_iearchived = 1 THEN oc_item + ' ' + oc_itemdesc + '*' 
ELSE oc_item + ' ' + oc_itemdesc END As [Title] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T17:27:59.443

在 PHP 中使用三元 if 语句可以使这变得简单。

```
 $title = $row['oc_item'] . ' ' . $row['oc_itemdesc'] . ', ' . $row['oc_alttxt'] . $row['oc_iearchived'] == 1 ? '*' : '';
 echo '
 <tr title="' . $title . '" class="tblhover">  
 //etc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T17:28:02.953

我强烈建议您不要在 SQL 中执行此操作——如果已`archived`设置，选择字段并在视图层（即在 PHP 中）打印星号同样容易。将此功能推送到数据库实际上并没有多大意义，尤其是对于这种微不足道的事情，这样做会使以后添加其他功能（例如，更改星号的样式）更加困难。

# authentication - 通过代理服务器连接到 Amazon S3

> ID：11726406
> 
> 赞同：1
> 
> 时间：2012-07-30T17:21:37.157
> 
> 标签：authentication, powershell, proxy, amazon-s3, amazon

试图确定如何通过 Powershell 传递代理身份验证凭据。我正在使用以下代码，它适用于非代理连接：

```
$AmazonS3 = [Amazon.AWSClientFactory]::CreateAmazonS3Client($S3AccessKeyID, $S3SecretKeyID)
$S3PutRequest = New-Object Amazon.S3.Model.PutObjectRequest 
$S3PutRequest.BucketName = $S3BucketName
$S3PutRequest.Key = $S3ObjectKey
$S3Response = $AmazonS3.PutObject($S3PutRequest) 
```

Amazon AWS SDK 文档提到使用 CreateAmazonS3Client 对象使用此方法：CreateAmazonS3Client(String, String, AmazonS3Config)。AmazonS3Config 似乎是一个 XML 文件，其中包含包含代理设置的信息，但我没有发现它的正确语法或文件的位置。

我将不胜感激有关如何正确配置此功能以向代理进行身份验证的任何建议或示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:08:13.563

我不认为它是一个 XML 对象，只是一个新的 S3Config 对象。

创建一个配置对象：

```
$config = New-Object Amazon.S3.AmazonS3Config
$config.ProxyHost = "whatever" 
```

以下是有关配置中包含的内容的一些文档：http: [//docs.amazonwebservices.com/sdkfornet/latest/apidocs/html/T_Amazon_S3_AmazonS3Config.htm](http://docs.amazonwebservices.com/sdkfornet/latest/apidocs/html/T_Amazon_S3_AmazonS3Config.htm)

然后，在创建连接时使用该配置。

```
$AmazonS3 = [Amazon.AWSClientFactory]::CreateAmazonS3Client($S3AccessKeyID, $S3SecretKeyID, $config)
$S3PutRequest = New-Object Amazon.S3.Model.PutObjectRequest 
$S3PutRequest.BucketName = $S3BucketName
$S3PutRequest.Key = $S3ObjectKey
$S3Response = $AmazonS3.PutObject($S3PutRequest) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-17T13:12:55.337

对于 Nodejs AWS SDK，您可以考虑与上述类似的解决方案，并且在[此处的](https://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/node-configuring-proxies.html)[AWS 文档](https://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/node-configuring-proxies.html) 中也有提及。

Node.js 的代码

```
npm install proxy-agent --save 
```

AWS SDK 配置对象中的实现

```
const proxy = require('proxy-agent');

AWS.config.update({
  httpOptions: { agent: proxy('http://internal.proxy.com') }
}); 
```

# c# - MVC3 注册表单最佳实践

> ID：11726408
> 
> 赞同：2
> 
> 时间：2012-07-30T17:21:40.057
> 
> 标签：c#, asp.net, asp.net-mvc-3

我正在创建一个简单的注册表单，我想知道是否有人可以给我一些最佳实践的列表。我知道注册表之间可能会有所不同，但可能需要注意一些准则或注意事项，例如漏洞。我的数据访问层将使用 Entity FrameWork 和 linq 来处理查询。

我认为有意义的做法：

*   当模型绑定到业务对象时验证表单（完成此操作的最佳方法是什么？）
*   服务器端验证和客户端验证
*   检查 SQL 注入？（这方面有什么最佳实践吗？）
*   为我的客户经理对象使用依赖注入

我的注册字段将如下所示：

*   名
*   姓
*   电子邮件（必须是来自少数几个网站的电子邮件，例如@gmail.com、@yahoo.com、@live.com）
*   学校
*   密码
*   状态（3 个左右选项的静态下拉列表）

我也非常希望电子邮件激活以及用户必须转到他或她的电子邮件才能使他们的帐户处于活动状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:24:48.803

*   使用`System.ComponentModel.DataAnnotations`命名空间来验证您的视图模型。
*   是的，进行服务器和客户端验证
*   实体框架已经处理 SQL 注入
*   如果您担心机器人向您的表单提交发送垃圾邮件，请考虑使用“验证码”

对于电子邮件部分：

过去，我创建了一个将电子邮件映射到随机生成的字符串的数据库表。当您发送完整的注册电子邮件时，请提供一个使用该随机字符串或 guid 或其他内容的链接：

`mydomain/completeregistration/7593098573903 whatever`

现在，一旦客户点击该链接，并且您处理了该请求，请在数据库中将其注册标记为完成。（这也应该具有阻止对该 URL 的后续请求的效果）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T17:24:57.983

使用客户端和服务器端**验证**。**永远不要只信任客户端验证**。

使用 DataAnnotations 和 jQuery 验证插件。您不需要编写客户端验证功能。当您使用 HTML Helper 方法呈现 HTML 元素时，MVC 将执行此操作。

实体框架将构建参数化查询。所以你不需要担心 SQL 注入。但是，如果您使用实体框架手动执行 SQL 语句/存储过程，则将其参数化是您的责任。

# javascript - 关于 jQuery 代码的 Internet Explorer 错误帮助

> ID：11726410
> 
> 赞同：0
> 
> 时间：2012-07-30T17:21:46.527
> 
> 标签：javascript, jquery, internet-explorer

我有一个 jQuery 图片库脚本，可以在除 Internet Explorer 之外的所有浏览器上正常工作。我得到错误

> 对象不支持此属性或方法。

我查了一下，似乎这通常是由同名的变量和代码元素引起的。不过，我的代码中没有看到任何重叠。错误说它位于以下代码中：

```
// Append new picture
jQuery('<img />')
    .attr('src', p)
    .attr('id', pid)
    .css({
        position: 'absolute',
        top: 0,
        left: 0,
        opacity: 0.0
    })
    .bind('click.gallery', function (event) {
        options.onClick.apply(this, [event, pict.get()]);
    })
    .appendTo('#' + id)
    .animate({opacity: 1.0}, {
        queue: false,
        duration: duration,
        easing: 'linear'
    })
    .load(function () {
        pict.data('loaded', true);
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:55:01.400

事实证明，页面中包含了一个双重脚本。（网站最初不是由我设计的）这显然是导致问题的原因。我删除了脚本，一切运行良好。

# objective-c - 未使用的表达式

> ID：11726413
> 
> 赞同：0
> 
> 时间：2012-07-30T17:22:02.517
> 
> 标签：objective-c, ios5, xcode4.3

新手来了 在以下代码中：

```
+ (NSString *)descriptionOfProgram:(id)program
{
    NSMutableArray *mutableCopyOfProgram = [program mutableCopy];
    NSString *descr = @"";
    for (int i=0; i<mutableCopyOfProgram.count; i++)
    {
        descr = [descr stringByAppendingString:(@"%@",[mutableCopyOfProgram objectAtIndex:i])];
    }
    return descr;
} 
```

我不断在循环中的代码上收到“未使用的表达式结果”警告。但是，当我在下一行返回表达式结果时，怎么可能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:51:42.840

您收到的警告是因为您应该使用`stringByAppendingFormat:`method 而不是`stringByAppendingString:`. 无论如何，我建议使用`NSMutableString`用于构建字符串。此外，最好使用`[mutableCopyOfProgram count]`而不是`mutableCopyOfProgram.count`. 以下代码应该适合您：

```
+ (NSString *)descriptionOfProgram:(id)program
{
    NSMutableArray *mutableCopyOfProgram = [program mutableCopy];
    NSMutableString *descr = [[NSMutableString alloc] init];
    for (int i=0; i < [mutableCopyOfProgram count]; i++)
    {
        [descr appendFormat:@"%@", [mutableCopyOfProgram objectAtIndex:i]];
    }
    return descr;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:31:53.007

使用`stringByAppendingFormat:`而不是`stringByAppendingString:`

我不认为`[mutableCopyOfProgram objectAtIndex:i]`你使用时使用过`stringByAppendingString:`，所以那将是未使用的。

格式类似于`@"%@", @"a string"`while 字符串 is just `@"a string"`，因此如果要使用格式，请确保使用正确的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:51:30.530

你有一些杂散的括号 () 也应该使用`stringByAppendingFormat:`

```
+ (NSString *)descriptionOfProgram:(id)program
{
    NSMutableArray *mutableCopyOfProgram = [program mutableCopy];
    NSString *descr = @"";
    for (int i=0; i<mutableCopyOfProgram.count; i++)
    {
        descr = [descr stringByAppendingFormat:@"%@", [mutableCopyOfProgram objectAtIndex:i]];
    }
    return descr;
} 
```

# objective-c - UINavigationController 后退按钮触发当前视图提前消失

> ID：11726414
> 
> 赞同：0
> 
> 时间：2012-07-30T17:22:06.697
> 
> 标签：objective-c, ios, uinavigationcontroller

我的 iPad 应用程序中有一个简单的导航控制器，但我遇到了一个以前从未见过的奇怪错误。我可以很好地将视图推送到视图控制器堆栈上，但是当我点击导航栏上的后退按钮时，视图会在滑出屏幕之前消失。我不会用 viewDidDisappear 或任何东西做任何时髦的事情。有没有其他人遇到过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:30:01.087

如果我遇到了这个问题，我会将日志消息添加到 viewWillDisappear、viewDidDisappear 和 dealloc。我假设您正在使用 ARC，但它并不是那么重要。

在所有情况下，我都会 NSLog 方法名称和视图，例如：

NSLog(@"viewWillDisappear: view=%@ animated=%d", self.view, animated);

确保在前两种方法中调用 super。

我怀疑您的视图已从其超级视图中删除或在您认为应该被释放之前被释放。

# uiview - 如何从子视图内的编程 UIButton 执行 segue？

> ID：11726415
> 
> 赞同：0
> 
> 时间：2012-07-30T17:22:18.487
> 
> 标签：uiview, uiviewcontroller, subview, segue

假设我有一个 UIViewController，其中包含一个以编程方式弹出的子视图 UIView。此 UIView 全部以编程方式制作（不在情节提要中）并包含一个 UIButton，我想从中转到另一个 UIViewController（在此处执行 segue）。

在情节提要中，我已经从第一个 UIViewController 到第二个进行了转场（模态）。问题来自 performSegueWithIdentifier，因为当用户点击子视图中的按钮时，我必须从父 UIViewController 调用它，而且我不确定如何调用该函数。

有谁能够帮助我？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:00:00.153

好的，它在这里发布，我得到了解决方案......

我没有专注于尝试从 UIView 调用函数，而是创建了一个委托模式，当我点击按钮时，我从主 UIViewController 调用函数。

我不知道这是否会帮助任何人，但它就在这里:)

# qt - 将 qt 项目转换为可重用库

> ID：11726418
> 
> 赞同：0
> 
> 时间：2012-07-30T17:22:29.850
> 
> 标签：qt, qt4

我有一个 qt 项目（包含 .h、.cpp、.ui 文件），我想将其转换为可重用的库，只需添加它即可在任何其他 qt 项目中使用（就像我们添加头文件一样）。

有什么办法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:03:30.897

你可以阅读这个线程：[Qt widget in dll](http://www.qtcentre.org/threads/17255-dll-using-qt) 该项目在附件中供你研究所有的扭结。

# html - XSLT 对不同元素进行分组

> ID：11726421
> 
> 赞同：0
> 
> 时间：2012-07-30T17:22:45.177
> 
> 标签：html, xslt, xpath, grouping

我知道有很多关于对 XSLT 元素进行分组的链接，但我无法让它工作，我在这里看看是否有人可以给我一个启发。

我需要对具有相同 id 的几个元素进行分组。

我的数据库是这样的：

![在此处输入图像描述](../Images/c0e45eeafcd722989d7e76726ffdb9f2.png)

我拥有的 XSLT 就是这个，读取数据库：

> [http://pastebin.com/hAuEaskA](http://pastebin.com/hAuEaskA)

这是我得到的 XML：

> [http://pastebin.com/4CrwsruZ](http://pastebin.com/4CrwsruZ)

但我想这样分组：

> [http://pastebin.com/mBa6Gctf](http://pastebin.com/mBa6Gctf)

有人可以给我一盏灯吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:37:44.733

对于 XSLT 1.0，我将使用[Muenchian 分组](http://www.jenitennison.com/xslt/grouping/muenchian.xml)，如下所示：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output indent="yes"/>

<xsl:key name="item-by-id" match="item" use="@id"/>

<xsl:template match="root">
  <xsl:copy>
    <xsl:apply-templates select="item[generate-id() = generate-id(key('item-by-id', @id)[1])]"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="item">
  <xsl:copy>
    <xsl:copy-of select="@* | key('item-by-id', @id)/*"/>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

那改变

```
<root>
    <item id="questionario_atendimento_cordialidade">
        <quantidade id="2">1</quantidade>
        <nota id="3">1</nota>
    </item>
    <item id="questionario_atendimento_cordialidade">
        <quantidade id="2">1</quantidade>
        <nota id="3">2</nota>
    </item>
    <item id="questionario_atendimento_cordialidade">
        <quantidade id="2">3</quantidade>
        <nota id="3">3</nota>
    </item>
    <item id="questionario_atendimento_cordialidade">
        <quantidade id="2">8</quantidade>
        <nota id="3">4</nota>
    </item>
</root> 
```

进入

```
<root>
   <item id="questionario_atendimento_cordialidade">
      <quantidade id="2">1</quantidade>
      <nota id="3">1</nota>
      <quantidade id="2">1</quantidade>
      <nota id="3">2</nota>
      <quantidade id="2">3</quantidade>
      <nota id="3">3</nota>
      <quantidade id="2">8</quantidade>
      <nota id="3">4</nota>
   </item>
</root> 
```

# ios - iPhone的加速器刷新率

> ID：11726425
> 
> 赞同：0
> 
> 时间：2012-07-30T17:23:01.243
> 
> 标签：ios, iphone, hardware

我想知道是否可以找到 iPhone 加速器的刷新率。适用于 iPhone2G（带有 ios 3.1）和 iPhone 4s。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:26:28.107

您可以使用[UIAccelerometer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAccelerometer_Class/Reference/UIAccelerometer.html)`updateInterval`上的方法设置刷新率

> 此属性以秒为单位。此属性的值被限制为某些最小值和最大值。最大值由硬件支持的最大频率决定。为确保能够及时传递设备方向事件，系统会根据需要确定适当的最小值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:48:55.210

我在这个答案中找到了答案：

[https://stackoverflow.com/a/11803180/169545](https://stackoverflow.com/a/11803180/169545)

最低刷新率为 10hz，最高为 100hz。

# c# - 来自数据网格工具提示的silverlight 4图像预览

> ID：11726428
> 
> 赞同：2
> 
> 时间：2012-07-30T17:23:11.867
> 
> 标签：c#, silverlight, xaml, datagrid, tooltip

我目前有一个数据网格，它可以根据服务器文件结构从我的数据库中获取结果。因此，我们创建 PDF 和 PPT，将它们加载到目录中，并相应地将它们添加到该数据库中。然后用户可以搜索他们需要的内容，结果会显示在我的数据网格中。有两列具有与该特定作品的每个 PDF 和 PPT 相关的图像超链接按钮。

然后，当用户单击 PDF 图标或 PPT 图标时，它会在另一个窗口中显示高分辨率片段。那里没有问题，但现在我想要它，以便当用户将鼠标悬停在图标上时，它会在 toptip 内显示高分辨率片段的预览。我可以将图像硬编码到工具提示中没有问题。因此，在这方面，我们创建了每个 PDF/PPT 的小缩略图预览图像。它们的大小都正确并准备就绪，我只需要将位置绑定到工具提示，以便它基本上显示每个高分辨率文档的“缩略图”预览。

这是我的 XAML：

```
<sdk:DataGridTemplateColumn x:Name="imageColPdf" Header="PDF" Width="SizeToHeader" IsReadOnly="False">
   <sdk:DataGridTemplateColumn.CellTemplate>
           <DataTemplate>
               <HyperlinkButton HorizontalAlignment="Center" VerticalAlignment="Center" DataContext="{Binding Path=FileName}" Click="HyperlinkButtonPDF_Click" >
                     <Image Source="/PrintOnDemand;component/Images/16x16/page_white_acrobat.png" Stretch="None"  HorizontalAlignment="Center" ></Image>
                          <ToolTipService.ToolTip>
                              <ToolTip>
                                   <ToolTip.Content>
                                       <Image DataContext="{Binding Path=FileName}" Name="LoadPDFImage" Loaded="PDFImageToolTip"/>
                                   </ToolTip.Content>
                               </ToolTip>
                           </ToolTipService.ToolTip>
                       </HyperlinkButton>
                   </DataTemplate>
               </sdk:DataGridTemplateColumn.CellTemplate>
           </sdk:DataGridTemplateColumn> 
```

然后这里是工具提示加载图像事件的代码隐藏：

```
private void PDFImageToolTip(object sender, RoutedEventArgs e)
    {

        string docname = ((System.Windows.FrameworkElement)((e.OriginalSource as Image).DataContext)).ToString();
        string baseUri = "http://localhost:51840/ShowDocument.aspx?DocumentName=" + docname + "&type=pdfjpg";
        var hostingWindow = HtmlPage.Window;
        hostingWindow.Navigate(new Uri(baseUri, UriKind.Absolute), "_blank");
    } 
```

我在单击事件上执行此方法来调用高分辨率文档，但是当我尝试通过工具提示加载图像时，每次调试（System.NullReferenceException）并且对象引用未设置为实例时都会出错一个东西。似乎无法获得图像的正确文件名/源路径。每次在字符串 docname 上都会失败。好的，我的问题是，我怎样才能让它正确地通过并显示我们已经设置的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T22:25:16.200

看起来您在调用 ToString() 之前将 DataContext 转换为 FrameworkElement，这是有意的吗？

> string docname = ((System.Windows.FrameworkElement)((e.OriginalSource as Image).DataContext)).ToString();

此处理程序中的发件人也应该是您的 Image 实例。也许这会更好地为您服务：

```
String docname = ((FrameworkElement)sender).DataContext.ToString() 
```

接下来，HyperLinkBut​​ton 上的 DataContext 绑定肯定对您没有任何帮助。您应该完全删除它。目前，绑定将在您的 FileName 字符串上查找 FileName 属性。

或者，从 Image 中删除 DataContext 绑定，它应该可以工作。

# javascript - 包含 jquery 的 Javascript 在 Internet Explorer 中不起作用

> ID：11726429
> 
> 赞同：0
> 
> 时间：2012-07-30T17:23:14.330
> 
> 标签：javascript, jquery, internet-explorer

因此，我一直在编写一个脚本，该脚本接受来自 10 个不同字段的输入，如果下拉列表中的任何内容发生更改，popScore 和 popLevel 也会相应更新。我遇到了一个小问题，它产生了一个小数点后 10 位左右的数字，所以我不得不将它四舍五入到 2。javascript 适用于除 Internet Explorer 之外的所有浏览器。**是什么导致它在 Internet Explorer 上失败？**

下面我只包含了其中一个下拉列表的 javascript 以节省空间，但它们之间的区别在于 popScore 的值和下拉列表中的项目数。popLevel 最多只能达到 5。

非常感谢任何有助于理解为什么它不起作用的帮助。谢谢。

```
 <script type="text/javascript">
 $(document).ready(function(){
  //global variables
  var popLevel = 0;
  var popScore = 0.00;
  var q1=0;
  var q2=0;
  var q3=0;
  var q4=0;
  var q5=0;
  var q6=0;
  var q7=0;
  var q8=0;
  var q9=0;
  var q10=0;
$('.selectionbox1').change(function() {
    if(q1 != 0){
        if(q1 == 1){
        popScore = popScore - 0.13;
        }
        else if(q1 == 2){
        popScore = popScore - 0.25;
        }
        else if(q1 == 3){
        popScore = popScore - 0.38;
        }
        else if(q1 == 4){
        popScore = popScore - 0.50;
        }
        else if(q1 == 5){
        popScore = popScore - 0.63;
        }
    }
    var b = document.getElementById("q1").value;
    if(b == 1){
        popScore = popScore + 0.13;
    }
    else if(b == 2){
        popScore = popScore + 0.25;
        }
    else if(b == 3){
        popScore = popScore + 0.38;
    }
    else if(b == 4){
        popScore = popScore + 0.50;
        }
    else if(b == 5){
        popScore = popScore + 0.63;
    }

    if(popScore > 4.00){
    popLevel=5;
    }
    else if(popScore > 3.00){
    popLevel=4;
    }
    else if(popScore > 2.00){
    popLevel=3;
    }
    else if(popScore > 1.00){
    popLevel=2;
    }
    else if(popScore > 0.00){
    popLevel=1;
    }

    //record the current value of the field changed
    var e = document.getElementById("q1");
    q1=e.options[e.selectedIndex].value;

    //round to 2 decimal places for score
    popScore = parseFloat(popScore.toFixed(2));

    //update the fields for pop score and pop level
    var txt = document.getElementById("popLevel");
    txt.innerHTML=popLevel;
    var txt2 = document.getElementById("popScore");
    txt2.innerHTML=popScore;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:27:56.627

浮点数并不准确。您应该始终将它们四舍五入以进行显示。当我`2.48+1.49`在 Chrome 中的 JS 控制台上键入时，我得到`3.9699999999999998`. 对于使用[http://en.wikipedia.org/wiki/IEEE_754](http://en.wikipedia.org/wiki/IEEE_754)的任何语言都是如此，这是最广泛使用的浮点格式。

这是对这个问题的一个很好的解释：http: [//docs.python.org/tutorial/floatingpoint.html](http://docs.python.org/tutorial/floatingpoint.html)它适用于 Python，但就像我之前提到的，大多数语言使用相同的格式。

# c++ - 使用 C++ 从 MongoDb 检索 binData 记录

> ID：11726436
> 
> 赞同：2
> 
> 时间：2012-07-30T17:23:52.437
> 
> 标签：c++, mongodb

有人可以指导我看一个关于如何使用 C++ 从 MongoDb 检索 binData 记录的示例吗？
我试过这段代码，但返回垃圾：

```
char* arrS;

while (dbResult->more())
{
    record = dbResult->next();
    strcpy(arrS, record.getField("s").binData(iLen));
} 
```

“s”是我的 binData 字段。提前感谢您，任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T22:51:24.167

该参数`iLen`实际上是 的（第二个）返回值`binData`。您可以像这样提取二进制内容：

```
int iLen;
const char* p = record["s"].binData(len);
std::string content(p, iLen); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-30T17:59:24.687

.binData() 返回一个 const char* 所以它应该返回一个指向二进制数据的指针。您只需将其复制到缓冲区中，无论是显式分配的还是动态的，例如字符串。

例如。

```
std::string arrS;
int iLen = 0;
arrS = record.getField("s").binData(iLen); 
```

我不确定 iLen 参数 - 通常这种模式用于传递缓冲区长度的值并返回复制的字节数，但[文档没有提到它](http://api.mongodb.org/cplusplus/current/classmongo_1_1_b_s_o_n_element.html#a8f4902eacf15f5069f4bb752bfd0aef4)。

如果是这样，您需要分配一个缓冲区：

```
char arrS[1000];
int iLen = sizeof(arrS);
memcpy(arrS, record.getField("s").binData(iLen)); 
```

# windows - 编写脚本

> ID：11726438
> 
> 赞同：1
> 
> 时间：2012-07-30T17:23:57.883
> 
> 标签：windows, bash

我是脚本新手，有一些问题。这是路径

```
c:/data/flow/gen/value/foo.txt
c:/data/flow/gen/secondvalue/cat.txt
c:/data/flow/gen/thirdvalue/bar.txt 
```

我必须编写一个脚本来获取文件夹 gen 中的所有 .txt 文件。

我正在写这样的东西。

```
find - path c:/*/gen/* -name "*.txt" | cat >> output.txt 
```

但我没有得到输出文件中的文件名。有人可以帮我弄这个吗。我只知道“gen”文件夹名称，它的路径对我来说是隐藏的。所以我必须相应地编写一个脚本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:15:11.290

在您的 -path 之前添加一个或多个目录。

删除 - 和 path 之间的空格，所以它读作“-path”。

在“*.txt”（以空格分隔）之后添加 -print 以方便移植。

这是“对 cat 的无用使用”-您的 find 命令可以执行附加操作-它更简单且速度更快。

这是cygwin吗？

您*可能*需要 \ 转义您的 c:\ - 冒号绝对是内置的 shell，但我不确定在这种情况下这是否重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:38:05.037

尝试这个：

```
find directory -name "*.txt" -print -exec cat '{}' \; > output.txt

-print              # prints the filename
-exec cat '{}'      # cats the file
> output.txt        # puts it all into output.txt 
```

您必须将目录替换为要搜索的目录。这将在 Linux shell 中有效，但在 Windows 中无效。

如果您使用的是 Windows，请尝试使用“查找文件和文件夹”功能。

# linux - 创建脚本生成链接，然后分析有效性，然后在系统默认浏览器中打开

> ID：11726441
> 
> 赞同：0
> 
> 时间：2012-07-30T17:24:05.653
> 
> 标签：linux, shell

在 Bash 编程中，我试图设置一个脚本来生成一个特定的链接。随后，我试图让该脚本打开所述链接，如果它没有 404。 `curl`并且我的系统上存在其他程序，但显然我无法获得自动打开的链接，除非明确定义命令，例如`firefox [generatedLink]`. 我可以用什么来执行以下操作：

（1）分析输出，`curl`判断生成的链接是否有效（即不返回404），
（2）提示用户是否要在浏览器中打开链接，如果是，则打开他们系统上的默认浏览器指向该生成的链接？

如果您认为我应该使用其他语言（C++、Python 等）执行此操作，请告诉我。

注意我只希望它在 Linux 上工作。它不需要是跨平台的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:53:02.073

```
if HEAD "${URL}" >/dev/null; then
    printf '%s' 'URL ok, open browser? [y/n] '
    read -n 1
    echo

    if [ "${REPLY}" = y ]; then
        xdg-open "${URL}"
    fi
else
    echo 'URL not ok.'
fi 
```

现在做一个简短的解释：

1.  `HEAD`是 libwww-perl 附带的一个快速脚本。我使用它是因为它很简单。它只是做一个`HEAD`请求，所以它是轻量级的，如果 URL 给出一个，它就会出错退出；
2.  询问部分在这里并不重要。这只是众多解决方案之一；
3.  `xdg-open`是一个很好的脚本，它可以检测您正在使用的桌面环境并使用那里的首选应用程序打开 URL。换句话说，它努力确保用户选择的浏览器将被使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:33:45.097

如果您 using `curl`，则只需使用`I`开关检查服务器的响应标头。

```
STATUS=`curl -I $URL | head -n 1`
#=> HTTP/1.1 200 OK 
```

根据您要查找的内容，您可以检查状态代码或消息。

```
STATUS=`curl -I $URL | head -n 1 | awk '{print $NF}'`

if [ $STATUS -eq "OK" ] ; then
    echo -n "URL returns an OK message, open browser (Y/n)?"
    read -s OKAY_BROWSER 
    if [ $OKAY_BROWSER -eq "Y" ]; then
          ...
    fi
fi 
```

# html - Mac/PC 上的字体渲染/行高问题（元素外部）

> ID：11726442
> 
> 赞同：70
> 
> 时间：2012-07-30T17:24:09.623
> 
> 标签：html, vertical-alignment, css, css-tables

# 该设计

信息小部件内容应在中间垂直对齐，如下所示：

![原始 PSD 设计](../Images/c86f7c2b88841d098810bca9e107a7db.png)

* * *

# 编码设计

### 视窗：Chrome 20 / FF 14 / IE 9

![Windows 编码设计](../Images/cd70f562aaf3e51e7efa9a8e83223f67.png)

### Mac（狮子 / 狮子山）：Chrome / FF

![Mac 编码设计](../Images/3b5d9762a98e0c9d8afcd8b6f691db8d.png)

* * *

# 编码

### HTML

```
<div class="info">
    <div class="weather display clearfix">
        <div class="icon"><img src="imgs/icons/thunderstorms.png" align="Thunderstorms" /></div>

        <div class="fl">
            <p class="temperature">82&deg; / 89&deg;</p>
            <p class="conditions">Thunderstorms</p>
        </div>
    </div>
    <div class="time display">
        <p>11:59 <span>AM</span></p>
    </div>
    <div class="date display clearfix">
        <p class="number fl">23</p>
        <p class="month-day fl">Jun <br />Sat</p>
    </div>
</div><!-- //.info --> 
```

### CSS

```
.info {
    display:table;
    border-spacing:20px 0;
    margin-right:-20px;
    padding:6px 0 0;
}
    .display {
        background-color:rgba(255, 255, 255, .2);
        border-radius:10px;
        -ms-border-radius:10px;
        color:#fff;
        font-family:"Cutive", Arial, sans-serif;
        display:table-cell;
        height:70px;
        vertical-align:middle;
        padding:3px 15px 0;
    }
        .display p {padding:0;line-height:1em;}
        .time, .date {padding-top:5px;}
            .time p, .date .number {font-size:35px;}
            .time span, .display .month-day, .conditions {
                font-size:14px;
                text-transform:uppercase;
                font-family:"Maven Pro", Arial, sans-serif;
                line-height:1.15em;
                font-weight:500;
            }
            .display .month-day {padding-left:5px;}
            .icon {float:left;padding:0 12px 0 0}
            .display .temperature {font-size:24px;padding:4px 0 0;}
            .display .conditions {text-transform:none;padding:2px 0 0;}
    .lt-ie9 .display { /* IE rgba Fallback */
        background:transparent;
        filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#20ffffff,endColorstr=#20ffffff);
        zoom:1;
    } 
```

* * *

# 问题

查看上面的编码设计图像，您可以看到它是如何摆脱对齐的。进一步查看后，文本正在 mac 上的元素之外呈现。

### 视窗

![Windows 编码设计对齐](../Images/36032eae7b6cfb2c5d72377f44de05b6.png)

### 苹果电脑

![Mac 编码设计对齐](../Images/dd0b3807dd4eaac06b5ac53909a7fb10.png)

* * *

# 笔记

我通过 Google Web Fonts 样式表嵌入字体。

* * *

# 经过测试

我尝试了以下方法：

*   在每个元素上设置行高。
*   在每个元素上设置字体权重。
*   在每个元素上设置高度。
*   每个元素上的高度/填充顶部的组合。
*   使用百分比/em/px 进行填充。

It seems that no matter what I try, the content will never center align perfectly across mac and pc.

* * *

# My Question(s)

It is possible to achieve what I'm trying to do in a simplistic manner?

Should I forgo the `display:table-cell;` route and set specific heights/paddings on each element and child? I will still run into padding/spacing issues between the two OS's.

What should I categorize this issue under? Line-height? Table-cells? OS? etc...

**Thanks in advance!**

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-07T08:19:32.867

If it is resolved by using a different font (Arial) then the issue is with the font, not with the CSS. As you have noticed font rendering differs between browsers.

One possible solution could be to download the Cutive font (I see it has a SIL license) and then run it through the Font Squirrel font-face generator. In "Expert" mode there is an option to "Fix Vertical Metrics" which might be what you are looking for.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-07-21T15:22:22.520

I came across this problem with a custom font that had been created for a client's brand. I opened the TTF font in Font Forge. The way I created uniformity with rendering was to adjust the values in Element->Font Info->OS/2->Metrics.

Win Ascent/Descent values appear to work differently to the other values. I had the following values:

`Win Ascent: 1000`

`Win Descent: 0`

`Typo Ascent: 750`

`Typo Descent: -250`

`HHead Ascent: 750`

`HHead Descent: -250`

I changed the Win Ascent and Descent values to:

`Win Ascent: 750`

`Win Descent: 250` (notice the positive value)

It appears you need to match the values except in my case I needed to invert the value of Win Descent to a positive one.

I have very limited knowledge about fonts but this did fix my problem. I generated the font as TTF and then ran it through a web font generator. The fonts now render identically on Mac/Windows 7/Android/iOS.

Hope this helps someone.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-29T07:30:22.790

My solution to this (very annoying problem):

*   Set all elements to float:left;

*   Set explicit line-heights;

*Enjoy a victory over cross-browser/platform css ridiculousness.*

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-11-09T19:11:27.777

For those who can't use Font Squirrel, I can confirm that this problem could be fixed in Font Forge for the font I was working with. Based on the answer provided by Luke, here are the steps I followed (no new information here, just providing easy-to-follow instructions):

1) Install FontForge (free) Download from: [https://fontforge.github.io/](https://fontforge.github.io/)

2) Open the problematic font in FontForge

3) Choose Element > Font Info [![在此处输入图像描述](../Images/3a969711bba1ecb3d571135eaf4f0a08.png)](https://i.stack.imgur.com/y0Mvx.png)

4) On the left panel, click OS/2, then click the Metrics tab

5) Change Win Ascent to the same number as HHead Ascent, and Win Descent to the POSITIVE value of HHead Descent (i.e., remove minus sign), then click OK. (If those numbers don't address the problem, try adjusting them until you find numbers that fix the issue for your specific font.) [![在此处输入图像描述](../Images/44aa7413c89bad61e47c701fe8145d70.png)](https://i.stack.imgur.com/IMBDp.png)

6) Click File > Generate Fonts. Choose the font type for your font. If the font is an .otf font, choose OpenType (CFF). Uncheck "Validate Before Saving". Set a name for your new font file. Click Generate. [![在此处输入图像描述](../Images/6ece8e56acca16aac199c96002de25e0.png)](https://i.stack.imgur.com/U2NpI.png)

Thanks to everyone who contributed answers to this question!

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-07-21T19:27:34.200

我认为使用这个网站[https://transfonter.org/](https://transfonter.org/)将节省您的时间，而不是下载 FontForg 程序，上传您的字体并切换“修复垂直指标”然后单击转换，它会给您一个可下载的 zip 文件夹，其中包含您选择的所有类型 [![在此处输入图像描述](../Images/a3cd1e0d339f56aa3c7e4cdceb98e89e.png)](https://i.stack.imgur.com/QQxLT.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-09-10T12:05:59.970

I also came across this issue. Luke's answer helped me. I had to adjust the fonts with FontForge using this settings:

![FontForge 设置](../Images/109a340158344e20252f11895c9acd4a.png)

Uncheck all "Is offset" checkboxes and also the "Really use Typo metrics" checkbox. I had most problems with Firefox and IE. Playing around with the value of "Win Descent" fixed it for those two browsers.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-30T17:37:05.970

Part of the problem may be in the way Windows/Mac OSX renders fonts. Specifically those that are brought in via @font-face. Have you tried switching out which font formats are being used?

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-12-11T11:03:17.983

I witnessed the same issue, with a custom font (Trade Gothic) served by FastFonts.

Windows did what it should have. But all other browsers on Linux based machines, Mac, iOS, Android suffered the problem.

My only solution was to match on the user agent, and namespace the body tag with .not-win

Then my styles could override the line-height specific to non-windows devices.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-01-10T23:50:58.550

Since you said in your comment to Jordan Brown that using Arial makes the alignment perfect, this is a font issue. It is likely that whoever created your font did not set the Ascent value properly.

If you have the TTF, upload it to [FontSquirrel](http://www.fontsquirrel.com/tools/webfont-generator), select the "Expert" option and then keeping all default options. The one that fixes it I believe is "Fix Vertical Metrics." but I had issues when changing the defaults so I recommend keeping them as-is.

Now the font line height renders the same on MAC and PC (it worked for me).

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-12-12T17:22:40.587

It's caused by font format history and Windows/Mac wars, there are different ways to compute line height and if they are not synced in the font you use things will go wrong on some systems

You need to fix your font (if the licensing allows it) or switch to one without this problem

Better, not to make your design depend on an exact value here

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-07-30T17:51:17.013

The Mac correctly displays the lengths below the baseline as belonging to line height. It seems that OS X counts bottom up whereas Windows calculates from the Top.

Since 1em is the width of the capital M of the used font it is usually smaller than the font's overall height.

Have you tried setting the line-height to be the same as the element height? This usually helps solve these kind of problems.

# ios - 每当添加视图时，iOS 应用程序都会崩溃

> ID：11726443
> 
> 赞同：0
> 
> 时间：2012-07-30T17:24:10.163
> 
> 标签：ios, facebook, uiview, uiviewcontroller

我正在使用带有 Parse 框架的 Facebook 身份验证。如果用户登录成功，我运行此代码

```
[self performSelectorOnMainThread:@selector(loginfbsucc) withObject:nil waitUntilDone:NO]; 
```

然后里面：

```
- (void)loginfbsucc{
    [self.view addSubview:mainscreen];
} 
```

我尝试添加该子视图。每当我添加该特定子视图时，应用程序就会崩溃，但如果视图名称不同，则不会。是否有一个原因？

# ms-access-2010 - Access 2010 更新查询错误

> ID：11726444
> 
> 赞同：0
> 
> 时间：2012-07-30T17:24:13.263
> 
> 标签：ms-access-2010

我正在尝试创建一个更新查询，该查询接受需要更新的值的参数。我的查询：

```
PARAMETERS FirstName Text ( 255 ), LastName Text ( 255 ), AccessLevel Short;
UPDATE   
tblUser SET tblUser.FName = [FirstName],   
tblUser.LName = [LastName],   
tblUser.AccessLevelID = [AccessLevel]
WHERE (((tblUser.UserID)=[Forms]![frmEditUser]![subfrmUsers].[Form]![UserID])); 
```

我的 VBA 代码在用户按下编辑按钮时运行：

```
If valid Then
    DoCmd.SetParameter "FirstName", Forms!frmEditUser!txtFName
    DoCmd.SetParameter "LastName", Forms!frmEditUser!txtLName
    DoCmd.SetParameter "AccessLevel", Forms!frmEditUser!cmbAccessLevel
    DoCmd.OpenQuery ("qryEditUserRecord")
    MsgBox "Success: Record edits have been applied", _
        vbOKOnly, "Record Edits Success"
    Me.Refresh
End If 
```

valid 只是一个布尔值，当所有控件都有数据时为真。错误是：

```
The object does not contain the Automation object "Drew" 
```

其中 Drew 是当前记录的 FName 值。此错误发生在第一个 SetParameter 命令中，我不知道该问题或如何解决它。如果我在 VBA 代码之外提示，则查询将按预期运行，但这正是我需要这样做的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:19:57.007

原来有一个非常不直观的解决方案，我在这里找到[http://social.msdn.microsoft.com/Forums/en-ZA/accessdev/thread/8538bd05-abc3-4cad-b284-bcbf7fa3dd69](http://social.msdn.microsoft.com/Forums/en-ZA/accessdev/thread/8538bd05-abc3-4cad-b284-bcbf7fa3dd69)

处理字符串参数时 DoCmd.Parameter "para", """" & Me.txtName & """"

我不知道为什么它需要四个双引号和一个 & 但确实如此。

# jquery - 为基于 CSS 的淡入一个接一个地结合 jQuery 延迟和 windowTimeout

> ID：11726446
> 
> 赞同：1
> 
> 时间：2012-07-30T17:24:37.813
> 
> 标签：jquery, css, timeout, jquery-animate, addclass

在这里挥舞大棒，只在个人项目上进行现代化改造。元素加载到页面上`opacity:0`，并将添加`opacity:1`一个具有 CSS3 过渡的类。我试图提示每个元素一个接一个地淡入。

通常，我可以使用下面的代码来提示淡入，但这使用 jQuery 的`.animate()`方法，我想要更高的帧速率和更少的 CPU 压力。

```
$('.test').each(function(i) {
    $(this).delay(i*100).animate({ opacity:1 }, 400); //CPU based!
}); 
```

添加一个类几乎是瞬时的（对我们人类来说），因此效果并没有那么大。

```
$('.test').each(function(i) {
    $(this).delay(i*100).addClass('show'); //instant coffee!
}); 
```

然后目标是在添加类之后设置超时，以便它有效地花费与原始动画相同的时间。**这就是我的问题：**该`setTimeout()`方法只能在窗口上运行......

```
$('.test').each(function(i) {
    $(this).delay(i*100).setTimeout(function(){ //doesn't work!
        $(this).addClass('show');
    }, 400);
}); 
```

如何延迟每个元素的功能并给该`addClass()`方法一些挂起时间？

```
$('.test').each(function(i) {
    var test = $(this);

    test.delay(i*100,function(){ //I wish!
        setTimeout(function(){
            test.addClass('show');
        },400);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:30:20.607

尝试以下操作：

```
$('.test').each(function(i) {
    var ind = i * 100;
    var test = $(this);
    setTimeout(function(){ 
        test.addClass('show');
    }, ind);
}); 
```

或者：

```
var $tests = $('.test')
var len = $tests.length;
var i = 0;
var test =  setInterval(function(){
                $tests.eq(i).delay(i*100).queue(function(){
                  $(this).addClass('show')
                })   
                i++;
                if (i == len) {
                    clearInterval(test)
                }
             }, 400) 
```

# php - Eclipse 中缺少“运行为... PHP 脚本”

> ID：11726450
> 
> 赞同：6
> 
> 时间：2012-07-30T17:24:53.367
> 
> 标签：php, eclipse, ide, eclipse-pdt

我新安装了 Eclipse 4.2 (Juno) + PDT 3.1.1，并且我选择了 PHP 透视图。我创建了空的“测试项目”PHP 项目并向其中添加了“test.php”文件。现在我想将此文件作为 PHP 脚本运行。但是当我右键单击“test.php”文件时，我的“运行方式...”上下文菜单中根本没有它。请帮忙。我累死。

附加信息：

*   我在我的 PC 上安装了 php5，我可以使用“php filename.php”语法在我的 Windows 命令行窗口中运行 .php 文件。

*   我在所谓的“一体化”Eclipse+PDT 包中尝试过同样的事情。同样的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T00:02:40.917

转到 Preferences>PHP>Debug，选中“Enable CLI Debug”。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-30T17:27:37.743

您不需要通过 Eclipse（或*任何*IDE，就此而言）“运行”您的 PHP 文件。您可以通过临时将您尝试检查的变量的值打印到页面来轻松进行调试。只需打开浏览器并导航到文件（例如：localhost/[page]?[querystring]）。

请记住，PHP 是一种**解释型**语言，而不是一种**编译型**语言（例如 Java 或 C#），因此您不必特别从任何地方“运行”它。只要您的服务器设置为处理 php 文件，您就可以通过浏览器查看它们。

使用 IDE 的代码完成功能并加快开发速度（而不是使用简单的文本编辑器）。在浏览器中测试。

# rest - ajax 调用 jquery 中的 rest api 不再起作用，是由于过期的 ssl 证书引起的吗？

> ID：11726451
> 
> 赞同：1
> 
> 时间：2012-07-30T17:24:54.453
> 
> 标签：rest, jquery, ssl

我有一个现有的应用程序，它通过对 REST 服务的 ajax 调用登录到服务器。它已经工作了几个月了。但是，最近它已停止工作。ajax 调用总是返回 .error

我没有触及应用程序的代码和服务器代码。通过浏览器通过相同的 REST 服务登录仍然有效，因此没有错。

我能看到的唯一区别是我们拥有的 SSL 证书已经过期。这可能是原因吗？

多一点信息。我的应用程序是用 Cordova 为 iOS 和 android 编写的。他们现在都没有为这些电话工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:45:03.617

是的，这将是问题的原因。

除非您明确告诉您的浏览器忽略该警告（至少是半永久性的），否则 AJAX 调用没有机会显示完整的浏览器警告，询问您是否要继续，尽管证书已过期。（请注意，一般用户无论如何都不应忽略无效证书警告。）

因此，浏览器会做正确的事情并在这种情况下使 XHR 调用失败。

您只需要安装一个既能被客户识别，又能在日期和时间上有效的证书。

# ios - 我们可以限制我们从 ios 应用内浏览器访问的域吗？

> ID：11726452
> 
> 赞同：1
> 
> 时间：2012-07-30T17:24:56.393
> 
> 标签：ios, browser

我正在开发一个 ios 应用程序，我希望使用应用程序内浏览器。但我希望限制使用应用内浏览器访问的域。（例如：仅限于 .com 网站。）有没有办法实施此限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:33:27.767

> 在 Web 视图开始加载框架之前发送。

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

> 参数
> 
> webView 即将加载新框架的 web 视图。请求内容位置。navigationType 启动加载请求的用户操作类型。
> 
> 返回值
> 
> YES，如果 web 视图应该开始** **加载内容；否则，否。**

您应该始终阅读[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:34:43.767

如果您需要知道是否可以使用 Web 视图执行某些操作，请先查看文档 - [UIWebView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)。

从那里，您可以看到它具有在加载内容时发送消息[的`delegate`属性。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/occ/instp/UIWebView/delegate)所以接下来，你看一下[协议](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006951)[的文档`UIWebViewDelegate`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006951)。

从那里，您可以看到委托在 Web 视图加载内容之前被发送[了一条`webView:shouldStartLoadWithRequest:navigationType:`消息。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIWebViewDelegate/webView%3ashouldStartLoadWithRequest%3anavigationType%3a)查看该方法的文档会告诉您，您只需`NO`从该方法返回即可取消加载内容。

因此，为实现该方法的 Web 视图提供一个委托，该方法`NO`在您看到不喜欢的 URL 时返回。

将来，请在 Stack Overflow 上询问之前检查文档。

# ruby-on-rails - Rails 为我的 URL 添加了奇怪的锚点

> ID：11726454
> 
> 赞同：0
> 
> 时间：2012-07-30T17:24:58.747
> 
> 标签：ruby-on-rails

我有一个`Video`模型。我`link_to`用来链接特定的视频。当我访问视频页面时，Rails 会附加到 URL 中的奇怪锚点，如下所示`#.UBbC5zF2bZ8`。我认为这与我的`to_params`方法有关：

```
def to_param
  "#{id}-#{title.parameterize}"
end 
```

我的`link_to`代码：

```
= link_to image_tag(video.thumb, size:"260x145"), video_path(video) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:12:09.100

这与轨道无关。

这是一个名为 AddThis 的共享/跟踪插件的功能。

这是他们支持页面上的一个类似问题：http: [//support.addthis.com/customer/portal/questions/370666-addthis-adds-a-random-number-onto-my-urls](http://support.addthis.com/customer/portal/questions/370666-addthis-adds-a-random-number-onto-my-urls)

# javascript - 如何使用 C# 为特定按钮事件调用 JavaScript 方法

> ID：11726455
> 
> 赞同：-1
> 
> 时间：2012-07-30T17:25:05.893
> 
> 标签：javascript, html, c#-4.0

我的任务是自动验证网页中的内容，该网页具有“从机场”和“到机场”文本字段以及一个`SearchFlights`按钮。点击`SearchFlights`按钮后，我得到了搜索结果，我需要将这些结果与我的预期值进行比较。

我正在使用 C# 和 HTML DOM 编程来设置文本字段中的文本并单击`SearchFlights`按钮。

现在，我如何捕获事件（例如`documentcompleted`）并保存这些结果，以便我可以将它们与预期的记录进行比较？我在该网络应用程序中的按钮如下所示：

```
<a tabIndex="5" class="searchRht" id="searchBtn" onclick="sF();SearchFlights();return false;" href="" /> 
```

单击按钮后，页面刷新，并出现一条消息，说“正在加载航班时刻表”，然后显示结果。看起来该`onclick`方法有两个函数调用：`sF()`和`SearchFlights()`.

我不确定如何捕获该网页返回的事件和信息。

下面是用于点击按钮的代码

```
doc = webBrowser1.Document;
btnElem = doc.GetElementById(streleid);
if (btnElem != null)
{
    btnElem.RaiseEvent("onclick");//click on serach button
    btnElem.RaiseEvent("sF()"); //error comes here
    Application.DoEvents();  // this will load the browser document again
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:30:39.703

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="MultipleFunction.aspx.cs" Inherits="MultiCust_MultipleFunction" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Execute Multiple function with a Button</title>
</head>

<script language="javascript" type="text/javascript">
function ShowMessage()
{
    alert("Hi");
}

</script>

<body>
    <form id="form1" runat="server">
    <div>
        <asp:Button ID="Button1" runat="server" OnClick="Button1_Click" Text="Button" /></div>
    </form>
</body>
</html> 
```

这是实现您正在寻找的东西的代码。

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;

public partial class MultiCust_MultipleFunction : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        this.Button1.Attributes.Add("onClick", "ShowMessage()");
    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        Response.Write("Zaq");
    }
} 
```

# io - Lua：我可以使用IO同时写两个文件吗？

> ID：11726456
> 
> 赞同：-3
> 
> 时间：2012-07-30T17:25:11.260
> 
> 标签：io, lua

我可以使用 IO 同时写入两个文件吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:31:19.930

根据您对“同时写入”的要求，在最简单的情况下，您可以打开多个文件并交叉写入两个文件：

```
local f1 = io.open('file1.txt', 'w')
local f2 = io.open('file2.txt', 'w')

f1:write('This will go to first file\n')
f2:write('Second file, Pi is: ', math.pi, '\n') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:28:17.190

是的你可以。我建议阅读有关[threading](http://lua-users.org/wiki/ThreadsTutorial)的精彩内容。线程允许多处理意味着一次运行两件事。在这种情况下，您有兴趣同时写入文件

# c - 以相同的名称创建共享内存段 - 返回错误？

> ID：11726461
> 
> 赞同：0
> 
> 时间：2012-07-30T17:25:48.280
> 
> 标签：c, linux, pipe, shared-memory

鉴于此代码：

```
char * pathname; // some string 
int returnValue = shm_open(pathname, O_CREAT | O_TRUNC | O_RDWR, mode);  // create a shared memory object 
```

如果我这样做：注意 - 相同的路径名！）

```
int returnValue2 = shm_open(pathname, O_CREAT | O_TRUNC | O_RDWR, mode);  // create a shared memory object 
```

我没有收到错误，返回值没问题（`0`）。

这是否意味着我正在重新创建共享内存段/对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:29:56.947

从`shm_open()` [手册页](http://linux.die.net/man/3/shm_open)引用：

> **返回值**：成功时，`shm_open()`返回一个非负文件描述符。失败时，`shm_open()`返回 -1。

基于此，我会说您已经创建并打开或打开了现有的共享内存对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T17:30:06.070

您只是重新打开现有的共享内存段。

> ```
> O_CREAT 
> ```
> 
> 如果共享内存对象不存在，则创建它。(...)
> 
> ```
> O_EXCL 
> ```
> 
> 如果还指定了 O_CREAT，并且具有给定名称的共享内存对象已经存在，则返回错误。

（来自 Linux[人 shm_open](http://www.kernel.org/doc/man-pages/online/pages/man3/shm_open.3.html)。）

此外，来自[POSIX](http://pubs.opengroup.org/onlinepubs/9699919799/functions/shm_open.html)（更明确一点）：

> ```
> O_CREAT 
> ```
> 
> 如果共享内存对象存在，则此标志无效，除非在下面的 O_EXCL 中注明。否则，创建共享内存对象。(...)

# jquery - jQuery Mobile 菜单手风琴无法正常工作

> ID：11726464
> 
> 赞同：1
> 
> 时间：2012-07-30T17:26:05.147
> 
> 标签：jquery, ajax, jquery-mobile, navigation, accordion

我正在尝试建立一个 jquerymobile 网站，但我在首页的手风琴菜单上遇到了一些问题，这是一个没有 jquerymobile 的手风琴的工作示例：http: [//dl.dropbox.com/u/ 22874377/Mobile/accordion.html](http://dl.dropbox.com/u/22874377/Mobile/accordion.html)但与 jquerymobile 一起使用时，它不起作用，如下所示：http: [//dl.dropbox.com/u/22874377/Mobile/app.html](http://dl.dropbox.com/u/22874377/Mobile/app.html)

几乎发生的事情是即使我将它设置为手风琴，它也会强制页面从 jquerymobile 转换并尝试加载子列表项，就好像它们包含在单独的页面上一样

关于为什么会这样的任何想法？或者我能做些什么来解决它？

如果您不想查看工作示例，这是简单的脚本

```
<style>
#nav li ul {
display: none; // used to hide sub-menus
}
</style>
<script>
$(document).ready(function () {
  var checkCookie = $.cookie("nav-item");
  if (checkCookie != "") {
    $('#nav > li > a:eq('+checkCookie+')').next().show();
  }
  $('#nav > li > a').click(function(){
      var navIndex = $('#nav > li > a').index(this);
      $.cookie("nav-item", navIndex);
      $('#nav li ul').slideUp();
       if ($(this).next().is(":visible")){
       $(this).next().slideUp();
       } else {
       $(this).next().slideToggle();
       }
   });
}); 
</script>
<ul id="nav" data-role="listview" data-inset="true">
                <li data-theme="c">
                    <a href="#home" data-transition="flip">
                        Home
                    </a>
                </li>
                <li data-theme="c" data-icon="arrow-d">
                    <a href="#">
                        Info
                    </a>
                    <ul>
                    <li data-theme="c"><a href="#" data-transition="flip">About Katie</a></li>
                    <li data-theme="c"><a href="#" data-transition="flip">Availability</a></li>
                    <li data-theme="c"><a href="#" data-transition="flip">Pricing</a></li>
                    <li data-theme="c"><a href="#" data-transition="flip">Contact</a></li>
                    <li data-theme="c"><a href="#" data-transition="flip">Downloads</a></li>
                    <li data-theme="c"><a href="#home" data-transition="flip">Back to Home</a></li>
                    </ul>
                </li>
                <li data-theme="c">
                    <a href="#home" data-transition="flip">
                        Galleries
                    </a>
                </li>
                <li data-theme="c" data-icon="arrow-d">
                    <a href="#home" data-transition="flip">
                        Client Proofs
                    </a>
                    <ul>
                    <li data-them="c"><a href="#" data-transition="flip">Monica &amp; Andrew's Excellent Wedding</a></li>
                    <li data-theme="c"><a href="#home" data-transition="flip">Back to Home</a></li>
                    </ul>
                </li>
                <li data-theme="c">
                    <a href="#home" data-transition="flip">
                        Testimonials
                    </a>
                </li>
            </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:34:53.393

你这里有问题

```
$(document).ready(function () {
 $('#nav > li > a').click(function(){
  if ($(this).attr('class') != 'active'){
  $('#nav li ul').slideUp();
  $(this).next().slideToggle();
 } 
```

});

文件应该用引号引起来

```
$('document').ready(function () { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:35:36.957

很快，只需检查示例中的不同链接元素，您就可以看到它们有 home&ui-page=nav-(a number) 作为 href 属性，这会导致它打开一个新页面：...Mobile/app.html#主页&ui-page=nav-0

这就是它在新页面中打开的原因，href 属性应该为空（或 #），因为您不会使用它来导航您的网站，而只是使用它来激活上下滑动...

（至于他们为什么得到这个，可能是因为你的自动用户界面......但我无法帮助你）

# javascript - 移动设备的动态视口始终包含固定尺寸的视频播放器

> ID：11726471
> 
> 赞同：1
> 
> 时间：2012-07-30T17:26:50.207
> 
> 标签：javascript, mobile, html5-video, responsive-design, viewport

我有一个通用的视频包装器，我试图让它响应移动设备。我想做的是动态改变视口，这样视频就可以在任何方向上总是适合它。我以为这很简单，但我正在拔头发。只换风景

基本上，视频的高度和宽度是在页面顶部配置的，并将此信息传递给 JW 播放器，它会相应地制作 Flash 或 HTML5 视频播放器。我还使用此信息，结合客户端宽度和高度来尝试设置视口，以便页面的视频部分始终可以整齐地放入其中，而无需缩放。

我已经在我的 Android Galaxy S II 上完成了我想要的设置，但它在 iPhone 上看起来仍然一团糟。而且我必须手动设置一个缩放比例，我知道这并不能帮助我找到一个通用的解决方案。

这是我到目前为止的要点：

[http://bit.ly/O1afMJ](http://bit.ly/O1afMJ)

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width = device-width, height = device-height" id="mvp" />
<script>                    
            /************ Bunch of player config stuff I've omitted *****************/

                        // These are the width and height of your player. For type "audio", the height is ignored. Default is 480x360\. 

            var width = 480;
            var height = 360;
</script>
<script type="text/javascript">

        // Detect whether device supports orientationchange event, otherwise fall back to
        // the resize event.
        var supportsOrientationChange = "onorientationchange" in window, orientationEvent = supportsOrientationChange ? "orientationchange" : "resize";

        window.addEventListener(orientationEvent, resizeView, false);

        // see if the height or width of the player is greater than the viewport, if so, resize it
        function resizeView() {

                if (document.documentElement.clientWidth < width) {
                        mvp.setAttribute('content', 'width=' + width, + ', height = device-height');
                }

                if (document.documentElement.clientHeight < height) {
                        mvp.setAttribute('content','height=' + height + ', initial-scale=0.6666, maximum-scale=0.6666'); // scale hacks to make this at least do what I want on my Droid, doesn't look nice on iPhone
                }
        };

</script>
</head>
<body>
<h2 id="title">title</h2>
<div id="blurb">blah blah blah</div>
<div role="main">
<div id="mediaspace">
  I'll be replaced by the JW Player
</div>
<script src="http://cdn.cengage.com/js/jwplayer/5.8/jwplayer.js" type="text/javascript">
</script>
<script src="player_mobile.js" type="text/javascript">
</script>
<script type="text/javascript">
        resizeView();
</script>
</body>
</html> 
```

也许 devicePixelRatio 会有所帮助？不确定！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:07:54.590

与其弄乱视口，不如使用[http://fitvidsjs.com/](http://fitvidsjs.com/)？这将根据容器调整视频大小。

希望有帮助

# java - 在 Java 中重命名 Dom 子节点

> ID：11726472
> 
> 赞同：-1
> 
> 时间：2012-07-30T17:26:57.550
> 
> 标签：java, xml, dom

我正在研究 DOM 元素。我可以重命名根节点，但我也想重命名子节点：示例：

```
<outcomes> to <ul> `
<para>     to <p> 
```

到目前为止：

元素元素 = doc.getDocumentElement();

```
 // Create an element with the new name
            Element element2 = doc.createElement("topic");

         // Copy the attributes to the new element
            NamedNodeMap attrs = element.getAttributes();
            for (int i=0; i<attrs.getLength(); i++) {
                Attr attr2 = (Attr)doc.importNode(attrs.item(i), true);
                element2.getAttributes().setNamedItem(attr2);
           }

         // Move all the children
            while (element.hasChildNodes()) {
                element2.appendChild(element.getFirstChild());
            }

            // Replace the old node with the new node
            element.getParentNode().replaceChild(element2, element); 
```

：它重命名根节点，但我也想重命名子节点我正在使用Java

是否有任何简单而具体的方法来重命名这些子节点

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:30:51.450

用于此的方法位于一种不起眼的位置：[Document.renameNode](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Document.html#renameNode%28org.w3c.dom.Node,%20java.lang.String,%20java.lang.String%29)

# php - mysql 搜索查询（选择）的最佳实践？

> ID：11726475
> 
> 赞同：0
> 
> 时间：2012-07-30T17:27:06.010
> 
> 标签：php, mysql, select

在 mysql 中进行数据搜索的最佳做法是什么：1-提取 100 条记录然后在数据库外部进行过滤或`WHERE`在 mysql 数据库中使用并提取确切需要的记录，即使`WHERE`会有点复杂（也涉及索引列) 2- 使用或不使用`JOIN`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:30:33.430

在数据库之外进行过滤表明您做错了。`WHERE`存在为您进行过滤。如果您的条件需要很长时间才能应用，您可能需要更好地索引。

使用`EXPLAIN`可以帮助确定查询中存在问题的位置。

如果你不知道如何调整你的`JOIN`，你可以尝试故意去规范化你的数据以提高性能。请记住，这需要复制数据并保持同步，因此这通常是最后的手段。

# android - 如何在 Android 中制作工具栏（如辅助操作栏）？

> ID：11726479
> 
> 赞同：7
> 
> 时间：2012-07-30T17:27:22.850
> 
> 标签：android, android-layout, android-widget, android-xml, android-gui

gmail 应用程序有这个工具栏，看起来类似于操作栏（甚至包括溢出菜单）。它是屏幕下方约 1/4 处的蓝色条。见图1：

![图 1](../Images/95d85074678d0f6c8a2fc7579bef35de.png)

我想要的酒吧用红色箭头指出。我浏览了文档并没有看到执行此操作的小部件。我怎样才能做一个这样的酒吧？

此外，如果您看到下方的橙色箭头，则表明此应用在顶部和底部都有一个操作栏。我很好奇这是如何完成的，但我的主要问题是如何在屏幕上的任何位置制作类似于操作栏的工具栏。

图 1 在电话上。我还包括下面的图像 2 和图像 3，它们分别是 7 英寸平板电脑和 10 英寸平板电脑。请注意，“拆分”操作栏位于带有平板电脑视图的单个栏上。

![图 2](../Images/d23a49ae295b33028d59e5a172ed57e3.png)

![图 3](../Images/7f64426429ca4056032cc22c25fdf20a.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T17:36:29.983

对于橙色条，您应该可以简单地将这个标签添加到您的清单中（在您的活动标签下）：

```
android:uiOptions="splitActionBarWhenNarrow" 
```

至于红色的，我想它只是`LinearLayout`带有 a `QuickContactBadge`、`TextView`s 和几个`Button`s 的 a ——而不是实际`ActionBar`实例。

# c# - C# 文本框具有初始文本，但如果用户更改它会存储更改

> ID：11726480
> 
> 赞同：0
> 
> 时间：2012-07-30T17:27:27.803
> 
> 标签：c#

所以我有一个用于存储服务器 URL 的文本框。尽管这可能随时更改，但我希望文本框最初存储当前 URL `http://example/`...。但是，当服务器 URL 更改时，我希望用户能够编辑此文本框`http://newurl/`并让文本框在程序下次启动时记住此更改。在 C# 中是否有一种简单的方法可以做到这一点，这是我什至可以做到的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:30:46.850

有很多方法可以做到这一点。它归结为从数据存储中加载默认值或用户特定值（可以像数据库中的设置文件一样简单）。

### 设置资源：

*   [http://msdn.microsoft.com/en-us/library/a65txexh.a​​spx](http://msdn.microsoft.com/en-us/library/a65txexh.aspx)
*   [http://msdn.microsoft.com/en-us/library/aa730869(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/aa730869(v=vs.80).aspx)
*   [http://msdn.microsoft.com/en-us/library/bb397755.aspx](http://msdn.microsoft.com/en-us/library/bb397755.aspx)

我刚刚搜索了“设置 MSDN”。设置上有更多信息，以及其他持久存储选项。选择很大程度上取决于应用程序的大小和规模，因此您必须自己做出决定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T17:30:56.623

好吧，您需要以*某种方式*在关闭时保留该值。常见的选项有：

*   只是文件（任何格式，例如 XML）
*   [用户设置](http://msdn.microsoft.com/en-us/library/aa730869.aspx)
*   一个数据库
*   某种远程存储

我们无法真正说出其中哪一个最合适。用户设置可能是最简单的。您可能应该考虑将这些保存在表单关闭或应用程序退出中；然后，当您的应用程序启动时，您需要加载已保留的任何设置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T17:31:44.837

您可以使用设置文件。当程序关闭时，

```
Properties.Settings.Default.URL = URLTextbox.Text;
Properties.Settings.Default.Save(); 
```

然后在您的加载事件中：

```
URLTextbox.Text = Properties.Settings.Default.URL; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T17:31:54.120

What you're describing is in general persistency. Your options include storing the string in a file, in the registry or in a database. There are probably other options, but those 3 are the most common ones.

# python - 使用 SciPy 规则网格在 Python 中进行快速二维插值以进行分散/不规则评估

> ID：11726484
> 
> 赞同：11
> 
> 时间：2012-07-30T17:27:44.233
> 
> 标签：python, numpy, scipy, interpolation, mesh

我有一个规则的训练值网格（向量 x 和 y，各自的网格 xmesh 和 ymesh 以及 zmesh 的已知值）但是要插值的一组分散/参差不齐/不规则的值（向量 xI 和 yI，我们对 zI 感兴趣[0] = f(xI[0],yI[0]) ... zI[N-1] = f(xI[N-1],yI[N-1])。这个插值将被称为百万次作为优化问题的一部分，因此性能太重要了，不能简单地使用一种方法来制作网格并进行跟踪。

到目前为止，我已经能够找到一个接近我想要的 Bpf 函数的 scipy.interpolate 函数。然而，因为它讲述了分散的输入，我认为它没有很好的性能，我想用我更好理解的样条、线性和最近邻插值方法来测试它，我希望它会更快。我能找到的所有实现这些的方法，将常规网格作为训练数据（如 RectBivariateSpline ）似乎也需要常规网格来插入值。

这段代码有望明确我的要求。

```
import numpy as np
import scipy as sp
import scipy.interpolate as interp

x = np.arange(0,2*np.pi,.1)
y = x
xmesh,ymesh = np.meshgrid(x,y)
zmesh = np.sin(xmesh)+np.cos(ymesh)
rbf = interp.Rbf(xmesh, ymesh, zmesh, epsilon=2)
xI = np.arange(0,np.pi,.05)
yI = xI
XI, YI = np.meshgrid(xI,yI)
# Notice how this is happy to take a vector or grid as input   
zI = rbf(xI, yI)
ZI = rbf(XI,YI) # equiv. to zImesh
myspline = interp.RectBivariateSpline(x, y, zmesh)
# myspline takes vectors as input but makes them into meshes for evaluation 
splineoutput = myspline(xI, yI) 
# myspline returns ZI but I want zI
print(splineoutput)
print(ZI)
print(zI) 
```

我可以做些什么来使用像 RectBivariateSpline 这样的函数但得到 zI （向量）而不是 ZI （网格）？或者，是否有另一个函数系列可以按照我想要的替代优化方法工作，如果是这样，我应该寻找什么？

快速提醒一下，我正在寻找的是一种快速优化技术，它具有相对较大的数据数组（20,000 多个条目），网格点之间的距离较小，并且数据非常平滑。我怀疑有一种很好、简单的方法可以用现有的库来做我需要的事情，但我找不到它。感谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T21:16:02.600

这个：[http ://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.RectBivariateSpline.ev.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.RectBivariateSpline.ev.html)

IE`myspline.ev(xI, yI)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-25T15:36:03.857

从 scipy v0.14.0 开始，[`RectBivariateSpline.__call__()`](http://docs.scipy.org/doc/scipy-0.16.0/reference/generated/scipy.interpolate.RectBivariateSpline.__call__.html#scipy.interpolate.RectBivariateSpline.__call__)采用一个可选的`grid=`关键字参数，默认为`True`：

> **网格**：*布尔*
> 
> 是在输入数组跨越的网格上评估结果，还是在输入数组指定的点上评估结果。

所以你可以使用：

```
splineoutput = myspline(xI, yI, grid=False) 
```

# database - 通过rest api公开数据的在线数据库如何管理其安全性？

> ID：11726498
> 
> 赞同：0
> 
> 时间：2012-07-30T17:28:37.657
> 
> 标签：database, security, rest

在线数据库提供商如何喜欢

mongolab.com,meteor.com，通过 rest 公开他们的 api

管理他们和用户数据的安全性 ?

我可以查看源代码并轻松了解所有数据和 api 密钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:04:15.257

为了强制执行授权，您必须在客户端和数据库之间有一个中介。这个中介可以用 Python/Java 或其他服务器端语言编写。此代码负责对客户端进行身份验证，然后授权对数据库的操作。

MongoDB 有自己的[身份验证和用户管理系统](http://www.mongodb.org/display/DOCS/Security+and+Authentication)，在某些情况下可以使用它来代替中介。然而，这个系统非常简单，通常缺乏公共 API 所需的基本功能。

# css - 如何使用 Sass/Compass 以编程方式定位多个背景？

> ID：11726500
> 
> 赞同：2
> 
> 时间：2012-07-30T17:28:41.173
> 
> 标签：css, ruby, sass, compass-sass

我试图弄清楚如何在 Sass 中以编程方式定位多个背景，使用单个图像（精灵）和多个位置。

背景的数量取决于分配给 $columns 的数量。我正在通过函数运行列数以确定左偏移量。顶部位置引用下一个精灵图像的位置。

所需的CSS：

```
.col-numbers {
background:
  url('numbers.png') 0 0 no-repeat,
  url('numbers.png') 94px -18px no-repeat,
  url('numbers.png') 188px -36px no-repeat,
  url('numbers.png') 282px -54px no-repeat,
  url('numbers.png') 376px -72px no-repeat;
} 
```

我尝试了一个简单的循环，这当然不起作用，因为它只是重复背景属性，并且不会产生预期的效果..

```
$columns: 12;

.col-numbers {
  @for $n from 1 through $columns {
    $left: (columns($n - 1, $columns) + gutters($columns));
    $top: (-$n + 1) * 18px;
    $background-pos: '#{$left} #{$top}';
    background: image-url('numbers.png') #{$background-pos} no-repeat;
  }
} 
```

我想我可能必须创建一个函数来返回一个可以传回的值列表，但我不知道如何做到这一点。任何帮助，将不胜感激。

编辑：

感谢 hopper 的回答，我能够通过轻微的修改来达到预期的结果（由于我在原始帖子中的错误）。

```
 $output: ();

    @for $n from 1 through $columns {
      $left: (columns($n - 1, $columns) + gutters($columns));
      $top: (-$n + 1) * 18px;
      $output: join(
        $output,
        (image-url('numbers.png') #{$left} #{$top} no-repeat),
        comma
      );
    }

    background: $output; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:52:57.727

您可以使用 SASS[连接函数](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#join-instance_method)将两个列表连接在一起，然后使用该主列表作为背景值。例如：

```
$columns: 12;

.col-numbers {
  $output: ();

  @for $n from 1 through $columns {
    $left: (columns($n - 1, $columns) + gutters($columns));
    $top: (-$n + 1) * 18px;
    $output: join(
      $output,
      (image-url('numbers.png'), $left $top no-repeat),
      comma
    );
  }

  background: $output;
} 
```

有关更多信息，请查看[SASS 参考的](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html)[列表](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#lists)部分。

# c# - 如何在 SelectListItems 列表中实现循环缓冲区？

> ID：11726501
> 
> 赞同：0
> 
> 时间：2012-07-30T17:28:45.787
> 
> 标签：c#, jquery, asp.net-mvc

我有一个列表，我根据我创建的枚举来填充一年中的所有月份。我的键和值设置为 Jan/01、Feb/02 等。如果当前月份是 Jan，那么我希望 DEC 设置为 selected = true，如果不是上个月设置为 selected = ture。如何设置选定的值

```
 List<SelectListItem> month = Framework.Enums.Month_List().Select(T => new          SelectListItem() { Text = T.Key, Value = T.Value.ToString() }).ToList();
        //make the previous month as "selected"
        int currentMonth = DateTime.Now.Month;
        if(currentMonth == 1) //which is Jan 
```

现在在这里我想将 Dec (12) 设置为选定值，否则设置上个月。

蒂亚苏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:55:09.113

难道不是这样吗？基本上你必须赶上一月份的边缘情况。下一部分只是在列表中找到正确的项目并将其选定属性设置为 True。

```
List<SelectListItem> month = Framework.Enums.Month_List().Select(T => new 
     SelectListItem() { Text = T.Key, Value = T.Value.ToString() }).ToList();
        //make the previous month as "selected"
        int currentMonth = DateTime.Now.Month;
        if(currentMonth == 1){
            month.Find(x=>x.Value == 12).Selected = true;
        }else{
           month.Find(x=>x.Value == ((currentMonth - 1).ToString())).Selected = true;
        }
        return month; 
```

# c# - 为不可修改的类型实现类似 IConvertible 的功能

> ID：11726502
> 
> 赞同：3
> 
> 时间：2012-07-30T17:28:57.180
> 
> 标签：c#, casting, datetimeoffset, iconvertible

简而言之，我有一个问题`IConvertible`：如果`DateTimeOffset`实施`IConvertible`，我不会有问题。

你不能使用扩展方法来实现一个接口，所以这条路是封闭的。结构 DateTimeOffset 不是部分的，因此不能以这种方式扩展。

在阅读一些 MSDN 文档时，我遇到了`TypeCode`枚举，这似乎是 IConvertible 正常工作所必需的。令我失望的是，枚举也不包含 TimeSpan，这关闭了使用带有and的类似`Tuple`结构的选项（即=P）`DateTime``TimeSpan``DateTimeOffset`

我的问题如下：您将如何实现具有基本 IConvertible 或类似支持的 DateTimeOffset 等效项？

该实现涉及具有`[index,TType] where TType : IConvertible`（setter、getter 和 try-getter）功能的花哨的惰性字典实现，并且它需要能够存储特定于时区的数据。

到目前为止我的想法：

*   创建一个新的`ISuperConvertible`接口，它实际上只是一个扩展`IConvertible`和`DateTimeOffset`一个特例。这通常会破坏我们对 IConvertible 的支持，但适用于这种非常具体的情况。优点和缺点？

*   使用两个“槽”来存储`DateTimeOffset`s，一个用于存储，一个`DateTime`用于半`int`小时偏移（所有时区都不是整小时 =/）。然后我们失去了`cache[ApplicationStrings.LastUpdate, default : DateTimeOffset.Min]`功能。

这些代表了我的主要想法，即 break `DateTimeOffset`and keep`IConvertible`或 break `IConvertible`and keep `DateTimeOffset`。

我对 C# 的内在特性仍然很陌生，因此任何见解都会有所帮助。你觉得呢？你有没有什么想法？

编辑：补充：

*   现在有一个使用 DateTime（固定时区）的工作解决方案，但现在也需要时区，最佳方案是在任何地方都使用 DateTimeOffset。本质上的问题不是重构，而是我的具体问题。
*   这是一个相当大的应用程序，它使用实体框架和其他更模糊的框架来与不同的服务和存储进行通信，因此保持它是一个简单的系统定义类型不会破坏 LINQ-to-X 优化等（我不知道这些有多难）是自己做的）。
*   我反对拆分数据，因为我不知道其他人何时会出现并注意到有一个 DateTime 用于时间戳，并且在不考虑偏移量（时区）的情况下使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:53:55.457

您可以在 DateTimeOffset 上创建自己的包装类，以实现 IConvertible。此类将具有 DateTimeOffset 属性，您将用于包装器属性和方法。并为它实现 IConvertible 的方法。例子：

```
public class DTOffset:IConvertible
{
    private DateTimeOffset DateTimeOffset;

    //Implementation of IConvertible
    public long ToInt64(IFormatProvider provider)
    {
        return DateTimeOffset.Ticks;
    }

    public DateTime ToDateTime(IFormatProvider provider)
    {
        DateTimeOffset.DateTime;
    }
    //and so on

    //wrapper properites of DateTimeOffset:
    public int DayOfYear{get{return DateTimeOffset.DayOfYear;}}

    public DateTime Date{get{return DateTimeOffset.Date;}}
    //and so on
} 
```

# objective-c - 正确使用 NSNotificationCenter？

> ID：11726504
> 
> 赞同：0
> 
> 时间：2012-07-30T17:29:07.350
> 
> 标签：objective-c, macos, model-view-controller, nsnotificationcenter

我想以每秒 2 或 3 行的顺序，从我的应用程序模型的深处向 UI 中的面板呈现适量的调试和日志记录消息 (NSStrings)。我预计在开发过程中主要需要这个，尽管我可能会将“控制台”留在生产中。我试图保持一个干净的 MVC 模式，因为我不知道这个应用程序的结果如何（它是一个辅助项目模拟引擎，没有商业用途。）

我已经实现了一种方法，通过将一行附加到 NSTextView 来将日志消息写入我的 NSWindowController 子类中的视图。它工作正常。但是，出于显而易见的原因，我不希望我的模型（消息的来源）了解有关 WindowController 的任何信息。所以：

*   NSNotificationCenter API 似乎符合要求。可以？我的替代方案是一系列日志机制，将消息向上传递链（模型->文档->窗口控制器->视图），这很混乱，或者让 WC 充当模型日志方法的委托（使 WC采用一个简单的协议。）再一次，这似乎有点草率。KVO 似乎不太适合这种情况，因为它不是一些模型状态属性正在改变。我错过了什么吗？

*   我是否应该期望每秒通过多个通知猛击 NSNotificationCenter 来显着影响性能？

编辑：我应该说，它确实有效，但对吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:43:24.703

每秒两个或三个通知根本不会影响性能。如果您觉得使用 NSNotificationCenter，请使用它。但是，对于日志记录机制，这可能是不必要的 - 对 NSLog 的简单调用还不够吗？

# html - 将表格宽度设置为 100% 不会填充区域

> ID：11726506
> 
> 赞同：0
> 
> 时间：2012-07-30T17:29:14.260
> 
> 标签：html, css, html-table

我的表格有问题，我在 CSS 中将宽度设置为**100%**，但它似乎仍然不起作用。然而，设置`<td>`宽度似乎是有效的。

继承人的**HTML：**

```
<table id="events-table">
   <tr class="primary">
      <td>Event</td>
      <td>Acts</td>
      <td>Location</td>
      <td>Date</td>
   </tr>
   <tr>
      <td>Sample</td>
      <td>Sample Acts</td>
      <td>Sample Location</td>
      <td>Friday 16/06/12 22:00</td>
   </tr> 
   <tr>
      <td>Sample</td>
      <td>Sample Acts</td>
      <td>Sample Location</td>
      <td>Friday 16/06/12 22:00</td>
   </tr> 
</table> 
```

这是**CSS：**

```
table#events-table { width:100%; }
table#events-table td { padding:6px; }
table#events-table td:nth-child(1) { width:30%; }
table#events-table td:nth-child(2) { width:25%; }
table#events-table td:nth-child(3) { width:25%; }
table#events-table td:nth-child(4) { width:20%; }
table#events-table tr:nth-of-type(odd) { background:#222; }
table#events-table tr:nth-of-type(even) { background:#111; }
#events-table .primary { font-weight:bold; background:#000 !important; } 
```

我相信这可能是我的样式表中的某些内容与之冲突，但我无法确定它是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:33:38.407

`float:left`从`class` **col**中删除似乎可以解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:34:07.247

我认为，`class` **col**中的问题（**style.css - 第 4 行**）

```
.col {
   display: inline;
   overflow: hidden;
   float: left;
   position: relative;
} 
```

# jquery - 显示使用 jquery ajax 加载不起作用

> ID：11726511
> 
> 赞同：-2
> 
> 时间：2012-07-30T17:29:33.660
> 
> 标签：jquery, ajax

我在使用 post 传递值时将我的 DOM ajax 升级为 jquery ajax，现在的问题是加载图像，我尝试按照此处的一些示例进行操作，但没有成功。这是我的代码：

```
function passLetter(str)
    {       
        $('#loadingImage').attr('style','display:');
        // $('#retail_group').html('<img src="/admin/images/ajax-loader.gif" style="text-align:center;">');
                    //$('#loadingImage').show();                                
        $.ajax({
        url: "getRetailGroup.php",
        type: "GET",
        async: false,
        data:  {"letter": str},
        success: function(data){
                $("#retail_group").html(data);
                //$('#loadingImage').hide();
            }
        });
        getletter = str;
    } 
```

对于 div：

```
<div id="retail_group">
<div id="loadingImage" style = "display:none">
<img src="/admin/images/ajax-loader.gif" style="text-align:center;" alt = "Loader" title = "Loader">
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:31:19.533

尝试这个：

```
 $('#loadingImage').show(); 
```

**或者**

```
 $('#loadingImage').css('display','block'); 
```

我认为您的`#loadingImage`div 已经有 CSS `display: none`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:31:59.807

代替：

```
$('#loadingImage').attr('style','display:'); 
```

尝试：

```
$('#loadingImage').show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:32:38.683

只需更改为 `$('#loadingImage').css('display','block');` 甚至更简单： `$('#loadingImage').show();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T17:42:04.403

一方面，您应该改用 jquery`show()`和`hide()`函数。

```
$('#loadingImage').show(); 
```

其次，确保您实际上可以根据浏览器中的图像路径获取图像

```
http://site.com/admin/images/ajax-loader.gif 
```

如果您使用 jquery 的显示/隐藏，那么您需要删除

```
style = "display:none"> 
```

放入`$('#loadingImage').hide();`您的文档就绪块

哦，如果你想用 jquery 将 css 设置为一个元素，它应该是这样的

```
$('#loadingImage').css("display","block"); 
```

**编辑**

您真正的问题是您正在用ajax 结果**替换html。** `retail_group`下次调用该函数时，不再`loadingImage`显示 div

```
$("#retail_group").html(data); 
```

您需要像这样更改您的功能：

```
function passLetter(str)
    {       
     $('#retail_group').html('<img src="/admin/images/ajax-loader.gif"/>');                       
        $.ajax({
        url: "getRetailGroup.php",
        type: "GET",
        async: false,
        data:  {"letter": str},
        success: function(data){
                $("#retail_group").html(data);
            }
        });
        getletter = str;
    } 
```

现在每次调用函数内部`retail_group`都会是图像，直到 ajax**成功完成**

# php - Json树输出

> ID：11726514
> 
> 赞同：0
> 
> 时间：2012-07-30T17:29:47.627
> 
> 标签：php, json

我想将此 json 输出更改为以下样式，有什么想法吗？

我的代码：

```
$queryFunctions = $db->getChatRoomData($userID , $userName, $userMessage, $roomID);
$rows['roomInfo'] = array();
while ($result = mysql_fetch_array($queryFunctions, MYSQL_ASSOC)) 
       {
               $row['uid'] = $result['uid'];
               $row['name'] = $result['userName'];
               $row['message'] = $result['messageText'];
               array_push($rows, $row);

        }
echo json_encode($rows); 
```

电流输出：

```
{"roomInfo":[],"0":{"uid":"50","name":"ali","message":"arz adab !"},"1":{"uid":"50","name":"ali","message":"arz adab !"},...} 
```

期望的输出：

```
{"roomInfo" : [{"uid":"50","name":"ali","message":"arz adab !"},{"uid":"50","name":"ali","message":"arz adab !"},...} 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T17:35:12.677

您需要`push`数据来`roomInfo`键入您的行。

```
$queryFunctions = $db->getChatRoomData(
    $userID , $userName, $userMessage, $roomID
);
$rows = array('roomInfo' => array());
while ($result = mysql_fetch_array($queryFunctions, MYSQL_ASSOC)) 
{
    $row['uid'] = $result['uid'];
    $row['name'] = $result['userName'];
    $row['message'] = $result['messageText'];
    array_push($rows['roomInfo'], $row);

}
print json_encode($rows); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T17:35:01.420

好的，那么您想要的是创建一个带有键“roominfo”的数组，该键映射到一个 roominfos 数组。

```
$queryFunctions = $db->getChatRoomData($userID , $userName, $userMessage, $roomID);
$rows['roomInfo'] = array();
while ($result = mysql_fetch_array($queryFunctions, MYSQL_ASSOC)) 
{
    $row['uid'] = $result['uid'];
    $row['name'] = $result['userName'];
    $row['message'] = $result['messageText'];
    array_push($rows['roomInfo'], $row);

}
echo json_encode($rows); 
```

# python - 错误：在 Python 2.7x86-Windows 7 机器上安装 lingpy1.0.1 时出现“无法找到 vcvarsall.bat”

> ID：11726517
> 
> 赞同：2
> 
> 时间：2012-07-30T17:29:57.913
> 
> 标签：python, error-handling

我正在尝试在 Windows 7 机器上使用 Python 2.7 安装 lingpy-1.0.1。我已经使用手动安装和 easy_install 进行了安装，两次都出现错误：“无法找到 vcvarsall.bat”

可以在此处找到错误的屏幕截图：http: [//i.imgur.com/OP8R8.png](http://i.imgur.com/OP8R8.png)

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:55:00.620

听起来它正在寻找 Visual Studio 安装。您可以改用 GCC；您可以下载[此套件](http://www.develer.com/oss/GccWinBinaries)，它会自动为您配置 Python。或者，如果您愿意，可以安装[MinGW](http://tdm-gcc.tdragon.net/)并在 Python 的 \Lib\distutils 文件夹下编辑 distutils.cfg，使其看起来像这样：

```
[build]
compiler=mingw32 
```

# python - numpy 矩阵作为方法的参数

> ID：11726524
> 
> 赞同：0
> 
> 时间：2012-07-30T17:30:12.480
> 
> 标签：python, numpy

我正在尝试将一个 numpy 矩阵传递给一个对象方法，但我不断收到 TypeError: test_obj() 恰好需要 1 个参数（给定 2 个）

我认为矩阵对象没有被正确解释为矩阵对象，但是当相同的代码作为简单函数运行时，它可以正常工作。如何让我的对象方法像简单函数一样工作？

代码：

```
from numpy import *

class Tester(object):
    def test_obj(x):
        print 'test obj:', type(x)

    def test_fun(x):
        print 'test fun:', type(x)

X = matrix('5.0 7.0')

test_fun(X)

tester = Tester()
tester.test_obj(X) 
```

输出：

```
test fun: <class 'numpy.matrixlib.defmatrix.matrix'>
Traceback (most recent call last):
  File "/home/fornarim/test_matrix.py", line 22, in <module>
    tester.test_obj(X)
TypeError: test_obj() takes exactly 1 argument (2 given) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T17:35:25.553

所有对象的方法都采用隐式**self**参数，因此您的方法 test_fun 必须是

```
def test_fun(self,arg): 
```

与 Java 不同，在 Python 中，您必须重新引用对象。

如下所述，也可以使用 @staticmethod 装饰器来指示函数不需要对对象的引用。

```
@staticmethod
def test_fun(arg): 
```

# node.js - NodeJs require('./file.js') 问题

> ID：11726525
> 
> 赞同：69
> 
> 时间：2012-07-30T17:30:17.313
> 
> 标签：node.js, require

我遇到了问题，包括要在我的 NodeJs 项目中执行的文件。

我在同一个目录中有两个文件：

**一个.js**

```
var test = "Hello World"; 
```

和

**b.js**

```
require('./a.js');
console.log(test); 
```

我执行 b.js`node b.js`并得到错误`ReferenceError: test is not defined`。

我浏览了文档[http://nodejs.org/api/modules.html#modules_file_modules](http://nodejs.org/api/modules.html#modules_file_modules)

我错过了什么？提前致谢。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-07-30T17:35:28.730

更改**a.js**以导出变量：

```
exports.test = "Hello World"; 
```

并将返回值赋给`require('./a.js')`一个变量：

```
var a = require('./a.js');
console.log(a.test); 
```

您经常会看到并可能使用的另一种模式是将某些东西（对象，函数）分配给**a.js**`module.exports`中的对象，如下所示：

 **```
module.exports = { big: "string" }; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-30T17:35:19.010

你误解了应该发生的事情。模块中定义的变量不共享。NodeJS 限定它们。

你必须用`module.exports`.

一个.js

```
module.exports = "Hello World"; 
```

b.js

```
var test = require('./a.js');
console.log(test); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-08T21:31:27.570

如果您想将变量导出到另一个文件中。有两种模式。一个是a.js
`global.test = "Hello World";`//这里test是全局变量，但是会被污染

另一个是
a.js `module.exports.test = "Hello World";`或exports.test="Hello World"; b.js `var test = require('./a.js');` //在b.js中测试可以得到a.js中的测试 console.log(test);**

# sql - 在经典 ASP 中将 SQL 导出到 Excel 的更快方法？

> ID：11726527
> 
> 赞同：0
> 
> 时间：2012-07-30T17:30:23.160
> 
> 标签：sql, sql-server, asp-classic

在 SQL Server Studio 中花费 1 秒时间查看超过 13000 行的视图在运行此代码的 ASP 页上在大约 2380 行之后超时。

有一个更好的方法吗？我一直在寻找 6 个月没有运气。

```
Server.ScriptTimeout=200
    dim updateNBK
    updateNBK = UCase(request.QueryString("SelTABLE"))

    dim allstring
    allstring = UCase(Request.QueryString("SelTABLE")) & " " & UCase(Request.QueryString("SelNBK"))

    allstring = LCase(allstring)
    dim checkforinject
    If(InStr(allstring, "'")<>0)then
        checkforinject = true
    Elseif(InStr(allstring, "--")<>0)then
        checkforinject = true
    End If

    If (checkforinject = true) then
        Response.Write("<b>Injection Detected</b><br/> You may not enter the following characters: ' or --")
    Elseif (checkforinject = false) then

    dim strSQL

        if(Request.QueryString("submitbutton") = "Download") then

        strSQL = "select COLUMN_NAME from INFORMATION_SCHEMA.COLUMNS  where TABLE_NAME = '" & UCase(request.QueryString("SelTABLE")) & "'"

        On Error Resume Next
        set arn = cnt.execute(strSQL)   

        dim datastr
        dim datahead
        datahead = "<table class='bluetable'><thead><tr><td colspan='30'>" & UCase(request.QueryString("SelTABLE")) & " contents</td></tr></thead>"
        dim columns
        colums = 0
        datastr = datastr & "<tbody class='datasheet'><tr class='selectblue'>"
        if not arn.EOF then
                    arn.movefirst

                    do
                        On Error Resume Next
                        datastr = datastr & "<td>" & arn(0) & "</td>"
                        columns = columns + 1
                        arn.movenext
                    loop until arn.EOF
                end if
        datastr = datastr & "</tr>"

        strSQL = "Select * from " & UCase(request.QueryString("SelTABLE"))

        if(UCase(Request.QueryString("SelNBK")) <> "") then

        strSQL = strSQL & " where SubmitterNBK = '" & UCase(Request.QueryString("SelNBK")) & "'"

        end if

        set arn = cnt.execute("Select TimestampColumnName from FormsInfo where FormOutput='" & UCase(request.QueryString("SelTABLE")) & "'")

        strSQL = strSQL & " ORDER BY " & arn(0) & " desc;"

        Response.Write "Test1"

        On Error Resume Next
        set arn = cnt.execute(strSQL)   
        dim counter
        counter = 0
        if not arn.EOF then
                    arn.movefirst
                    Response.Write "Test2"
                    dim cellnum
                    do
                    datastr = datastr & "<tr>"
                        On Error Resume Next
                        cellnum = 0
                        'datastr = datastr & "<td>" & arn.value.toString() & "</td>"
                        do
                        datastr = datastr & "<td>" & arn(cellnum) & "</td>"
                        cellnum = cellnum + 1
                        loop while cellnum < columns
                        arn.movenext
                        'Response.Write "TestLoop"
                        Response.Write "<br/>Loop ran " & counter & " times." 
                        counter = counter + 1
                    datastr = datastr & "</tr>"
                    loop until arn.EOF
                    Response.Write "<br/>Loop ended." 
        end if

        datahead = "<table class='bluetable'>"

        Response.Clear  

        Response.ContentType = "application/vnd.ms-excel" ' arbitrary 

        Response.AddHeader "Content-Disposition","attachment; filename=" & UCase(request.QueryString("SelTABLE")) & ".xls"

        Set adoStream = CreateObject("ADODB.Connection") 
        adoStream.Open() 
        adoStream.Type = 2

        Response.Write datahead & datastr 
        Response.Flush

        adoStream.Close 
        Set adoStream = Nothing 
        Response.End 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:18:30.183

我怀疑您的问题在于 VBScript 在字符串连接方面很*糟糕*- 看起来您正在做很多事情。

尽管 .NET StringBuilder 类对 VBScript 不可用，但有几个有用的库/代码示例可用。一个例子在这里：[http ://www.eggheadcafe.com/articles/20011227.asp](http://www.eggheadcafe.com/articles/20011227.asp)

可能需要对您的代码进行一些修改，但我敢打赌性能会大大提高。

这是使用上面链接中的代码的示例。请注意，您可能希望将 FastString 类放在包含文件中，以便可以在其他地方重用它。

```
Dim test : Set test = new FastString
Dim I
For I = 0 To 1000
  test.Append("TESTING")
Next
Response.Write test.Concat 
```

来自上面链接的代码：

```
Class FastString
  Dim stringArray, growthRate, numItems
  Private Sub Class_Initialize()
    growthRate = 50: numItems = 0
    ReDim stringArray(growthRate)
  End Sub
  Public Sub Append(ByVal strValue)
    ' next line prevents type mismatch error if strValue is null. Performance hit is negligible.
    strValue=strValue & ""
    If numItems > UBound(stringArray) Then ReDim Preserve stringArray(UBound(stringArray) + growthRate)
    stringArray(numItems) = strValue: numItems = numItems + 1
  End Sub
  Public Sub Reset
    Erase stringArray
    Class_Initialize
  End Sub
  Public Function Concat()
    Redim Preserve stringArray(numItems)
    concat = Join(stringArray, "")
  End Function
End Class 
```

**替代解决方案：**

如果您不介意没有样式单元格，您可以利用 ADO 记录集的“GetRows”功能。这个很少使用的解决方案在这种情况下非常有用：

```
Dim tableRows : tableRows = arn.GetString(,,"</td><td>","</td></tr><tr><td>","&nbsp;")
Response.Write "<table class='bluetable'>" & tableRows & "</table>" 
```

因此，您的输出变为：

```
Set arn = cnt.Execute(strSQL)   
Response.Clear  
Response.ContentType = "application/vnd.ms-excel"
Response.AddHeader "Content-Disposition","attachment; filename=" & UCase(request.QueryString("SelTABLE")) & ".xls"
Dim tableRows : tableRows = arn.GetString(,,"</td><td>","</td></tr><tr><td>","&nbsp;")
Response.Write "<table class='bluetable'>" & tableRows & "</table>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:28:29.973

我怀疑构建它的字符串是什么让它变得如此缓慢。VBScript 在这方面很糟糕。

我曾经使用一个名为 clsString 的类来完成这种工作。

我想就是这样： http: [//pcdispatchwiki.com/Intranet/includes/funcsSubsClasses.asp](http://pcdispatchwiki.com/Intranet/includes/funcsSubsClasses.asp)

从记忆里：

```
dim tmpStr : set tmpStr = new clsString
tmpStr.add "Hello"
tmpStr.add vbCRLF
tmpStr.add "World"
dim finalText : finalText = tmpStr.Value 
```

# asp.net - 嵌套用户控件的控件为空

> ID：11726531
> 
> 赞同：4
> 
> 时间：2012-07-30T17:30:30.377
> 
> 标签：asp.net, user-controls

我有一个嵌套的用户控件层次结构，并且发现我的一个嵌套用户控件中的所有本机控件在其 Page_Load 事件处理程序中都是 NULL。

这是我的布局：

```
Page
    UserControl1
        telerik:RadMultiPage
            telerik:RadGrid
                NestedViewTemplate
                    UserControl2 
```

在 UserControl2 的 Page_Load 处理程序中，所有本机控件都是 NULL。我很难找出原因。我猜这与它嵌套在网格内的事实有关。不确定解决此问题的最佳方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T09:28:43.383

似乎它与 Resharper 添加的我的注册指令有关。

我改变了：

```
<%@ Register TagPrefix="uc1" Namespace="My.Namespace" Assembly="My.Assembly" %> 
```

更明确地说：

```
<%@ Register src="UserControl2.ascx" tagname="MyUserControl2" tagprefix="uc1" %> 
```

这似乎已经解决了它。页面上实际上有很多选项卡，因此可能寄存器的名称空间版本不够明确，并且与另一个选项卡中的控件混淆了。

# apache-pig - 根据列的值构建字典

> ID：11726536
> 
> 赞同：1
> 
> 时间：2012-07-30T17:30:42.197
> 
> 标签：apache-pig

您如何根据特定列的值构建单词/标记字典（垂直存储）？此列可能包含空格/制表符分隔的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:10:34.743

我想做的与这个问题或多或少相同。

[从pig中的单行输入生成多行输出](https://stackoverflow.com/questions/11205235)

# ios - 如何使用一键打开/关闭手电筒？

> ID：11726543
> 
> 赞同：11
> 
> 时间：2012-07-30T17:30:59.997
> 
> 标签：ios

我可以用一个按钮打开手电筒，用另一个按钮将其关闭。但我只想用一个按钮来完成。但是，我没有允许我使用 bool isSelected 方法的框架。所以我对如何将两个功能合并到一个按钮中一无所知。

这是有效的代码：

```
-(void)onButtonPressed 
{

AVCaptureDevice *flashLight = [AVCaptureDevice 
defaultDeviceWithMediaType:AVMediaTypeVideo];
if([flashLight isTorchAvailable] && [flashLight
isTorchModeSupported:AVCaptureTorchModeOn])
{
    BOOL success = [flashLight lockForConfiguration:nil];
    if(success){
        [flashLight setTorchMode:AVCaptureTorchModeOn];
        [flashLight unlockForConfiguration];
    }
}

} 
```

我用它来关闭手电筒。

```
-(void)offButtonPressed {

AVCaptureDevice *flashLight = [AVCaptureDevice
defaultDeviceWithMediaType:AVMediaTypeVideo];
if([flashLight isTorchAvailable] && [flashLight
isTorchModeSupported:AVCaptureTorchModeOn])
{
    BOOL success = [flashLight lockForConfiguration:nil];
    if(success){
        [flashLight setTorchMode:AVCaptureTorchModeOff];
        [flashLight unlockForConfiguration];
    }
}

} 
```

我并不特别关注它的完成方式。只要手电筒在第一次轻敲时打开并在第二次轻敲时关闭，我就不会关心这种方法。

但是，我正在使用以编程方式制作的 barbuttonitems，所以请不要给我 IBAction 方法。如果建议的方法尽可能简单，我也会很感激，我认为我现在使用手电筒的方式过于复杂。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-06T22:57:36.697

我刚刚在我的应用程序上实现了这个功能。回答您的问题，这里是如何以一种方法合并这两个功能。

```
- (void) flashlight
{
    AVCaptureDevice *flashLight = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    if ([flashLight isTorchAvailable] && [flashLight isTorchModeSupported:AVCaptureTorchModeOn])
    {
        BOOL success = [flashLight lockForConfiguration:nil];
        if (success) 
        {
            if ([flashLight isTorchActive]) {
                [flashLight setTorchMode:AVCaptureTorchModeOff];
            } else {
                [flashLight setTorchMode:AVCaptureTorchModeOn];
            }
            [flashLight unlockForConfiguration];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-12-07T00:02:27.520

对于迅捷3

```
@IBAction func toggleFlash() {
    if let device = AVCaptureDevice.defaultDevice(withMediaType: AVMediaTypeVideo), device.hasTorch {
    do {
        try device.lockForConfiguration()
        let torchOn = !device.isTorchActive
        try device.setTorchModeOnWithLevel(1.0)
        device.torchMode = torchOn ? .on : .off
        device.unlockForConfiguration()
    } catch {
        print("error")
    }
} 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-26T09:17:59.163

**问题陈述 ：**

* * *

## 使用单个按钮打开和关闭移动设备（支持 iOS）上的手电筒。

**解决方案**：

1.  在视图控制器上创建一个按钮。
2.  设置按钮操作并将目标添加为自身。

> **注意：**在执行前在界面生成器中将标签设置为 101，这会将标签值初始化为 101。

下面是应该在***ViewController.m***文件中的 action 方法中编写的代码

* * *

```
- (IBAction)flashLightButtonTapped:(id)sender
{

    UIButton *button = sender;
    AVCaptureDevice *flashLight = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

    if (button.tag==101)
    {

        if ([flashLight isTorchAvailable] && [flashLight isTorchModeSupported:AVCaptureTorchModeOn])
        {
            BOOL success = [flashLight lockForConfiguration:nil];
            if (success)
            {
                if ([flashLight isTorchActive])
                {
                    [flashLight setTorchMode:AVCaptureTorchModeOff];
                }
                else
                {
                    [flashLight setTorchMode:AVCaptureTorchModeOn];
                }
                [flashLight unlockForConfiguration];
            }
        }
        button.tag=102;
    }
    else if (button.tag==102)
    {
        if ([flashLight isTorchAvailable] && [flashLight isTorchModeSupported:AVCaptureTorchModeOn])
        {
            BOOL success = [flashLight lockForConfiguration:nil];
            if (success)
            {
                if ([flashLight isTorchActive])
                {
                    [flashLight setTorchMode:AVCaptureTorchModeOn];
                }
                else
                {
                    [flashLight setTorchMode:AVCaptureTorchModeOff];

                }
                [flashLight unlockForConfiguration];
            }
        }
        button.tag=101;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-19T01:16:55.853

```
- (IBAction)flash:(UIButton *)sender;
{
    Class captureDeviceClass = NSClassFromString(@"AVCaptureDevice");
    if (captureDeviceClass != nil) {
        AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
        if ([device hasTorch] && [device hasFlash]){

            [device lockForConfiguration:nil];
            if (device.torchMode == AVCaptureTorchModeOff) {
                [device setTorchMode:AVCaptureTorchModeOn];
                [device setFlashMode:AVCaptureFlashModeOn];
                //TorchIsOn = YES;

                [self.flashton setHighlighted:YES];
            } else {
                [device setTorchMode:AVCaptureTorchModeOff];
                [device setFlashMode:AVCaptureFlashModeOff];
                //TorchIsOn = NO;

                [self.flashton setHighlighted:NO];
            }
            [device unlockForConfiguration];
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T18:05:03.387

在这里关闭评论，这就是我的想法：

```
.h

@property (nonatomic) int flashlightState;

.m

-(void) viewDidLoad:
{
    //Any previous code that you may have
    flashlightState = 0;
}
-(void) flashlightStateControl:
{

    if (flashlightState == 1)
    {
        offButtonPress();
        flashlightState = 0;
    }
    else
    {
        onButtonPress();
        flashlightState = 1;
    }
} 
```

这个想法是，你现在调用`flashlightStateControl()`. 那应该做你想做的，非常欢迎你调整它的一部分（你可能需要），但这是代码形式的一般想法。希望对你有用！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-08T11:10:30.887

**斯威夫特 5 版本**

```
@IBAction func toggleTorch() {
    guard let device = AVCaptureDevice.default(for: .video), device.hasTorch else {
        showTorchNotSupported()
        return
    }

    do {
        try device.lockForConfiguration()
        let torchOn = !device.isTorchActive
        try device.setTorchModeOn(level: 1.0)
        device.torchMode = torchOn ? .on : .off
        device.unlockForConfiguration()
    } catch {
        showTorchNotSupported()
    }
}

private func showTorchNotSupported() {
    let alertController = UIAlertController(title: "Flashlight is not supported", message: nil, preferredStyle: .alert)
    alertController.addAction(UIAlertAction(title: "Understand", style: .default, handler: nil))
    present(alertController, animated: true)
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-17T14:19:41.500

**基于 Chuy47 回答**的 Swift 5 解决方案：****

 **```
import Foundation
import AVFoundation

extension AVCaptureDevice {

    /// toggles the device's flashlight, if possible
    static func toggleFlashlight() {
        guard let device = AVCaptureDevice.default(for: AVMediaType.video), device.hasTorch else { return }
        do {
            try device.lockForConfiguration()
            let torchOn = !device.isTorchActive
            try device.setTorchModeOn(level: 1.0)
            device.torchMode = torchOn ? .on : .off
            device.unlockForConfiguration()
        } catch {
            print("Error toggling Flashlight: \(error)")
        }
    }
} 
```**

# javascript - 如何将 CSS 类添加到 CSS（不是 jquery 或 javascript）中的元素？

> ID：11726544
> 
> 赞同：3
> 
> 时间：2012-07-30T17:31:01.293
> 
> 标签：javascript, html, css

我希望我网页上的所有图像都具有 CSS 类“淡入淡出”，这样当它们第一次出现时，它们就会淡入视野。（我使用 CSS 动画来做淡入淡出。后来，我使用 jquery 来添加和删除类。）

我通常会制作一个 img 元素并使用`myImg.addClass("fadeIn")`，但该元素是在谷歌地图的代码中制作的，我无权访问元素。`img`实际创建元素的时间也不确定。

像这样的东西，在 CSS 中：

```
img {
   height: 100;
   width: 50;
   AddClassToThisElement: "fadeIn"  ***
} 
```

这样的事情可能吗？

**编辑**：我拥有的实际 CSS 是：

```
 img[src^="da"] {
    -webkit-animation-name: fadeInFrames;
    -webkit-animation-duration: 1s;
    -webkit-animation-iteration-count: 1;
    -webkit-animation-direction: normal;
    -webkit-animation-timing-function: linear;
    -webkit-animation-play-state: running;
    -webkit-animation-fill-mode: forwards;
  }

  .fadeOut {
    -webkit-animation-name: fadeOutFrames;
    -webkit-animation-duration: 1s;
    -webkit-animation-iteration-count: 1;
    -webkit-animation-direction: normal;
    -webkit-animation-timing-function: linear;
    -webkit-animation-play-state: running;
    -webkit-animation-fill-mode: forwards;
  } 
```

前者更具体，因此向元素添加类 fadeOut 不起作用。通过更改`.fadeOut`为`img[src^="da"].fadeOut`，后者现在更加具体，并且在元素中添加了 fadeOut 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:36:08.907

据我所知，CSS 无法做到这一点。

那么，我的建议是使用这样的东西：

```
img,
.fadeIn
{
    /* styling */
} 
```

现在所有图像的样式都与`.fadeIn`. 当然，您还必须为样式表中`img,`的每次使用添加任何相关的（伪）选择器/类。`.fadeIn`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:38:36.547

如果您使用 jQuery 进行淡入，您可能会想出一个对这些图像唯一的选择器，而不是使用基本的 $('.fadeIn') 选择器。

所以如果你在做

```
$('.fadeIn').fadeIn() 
```

您可能会发现 DOM 结构中有些东西是这些图像所独有的，例如

```
$('#SomeMapId div#SomeContainerId IMG').fadeIn() 
```

如果没有看到您的页面，我不能说 DOM 是否足够独特以使其工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T17:43:39.747

我同意 DragoonWraith 的观点，如果您真的希望“我网页上的所有图像”都具有这种淡化效果，那么您应该能够更通用地定位它们。但是，如果您需要更多特异性，请找出路径。我的回答类似于 Leslie Hanks（他在我完成此之前发布），除了据我了解，您最初不想使用 jQuery，而是想要使用 css 转换。因此，如果您需要更多特异性，请找出路径：

```
#someGoogleMapId .someDeepContainerClass img {
   /* apply the css transitions */
} 
```

# r - 用于在 r 中绘制多边形的颜色和坐标矩阵对象的循环

> ID：11726545
> 
> 赞同：1
> 
> 时间：2012-07-30T17:31:04.153
> 
> 标签：r, loops, colors, polygon

这是多边形坐标：

＃ 数据

```
greenM <-matrix(c(5,5,95,45,5,65,5,45,65,5,5,95),nrow=4,byrow=TRUE)
blueM <-matrix(c(35,15,65,35,45,35,5,75,35,5,45,65,35,15,65),
 nrow=5,byrow=TRUE)
purpleM <-matrix(c(95,5,15,95,5,5,35,75,5,35,45,35,55,45,15,95,5,15),
  nrow=6,byrow=TRUE)
redM <-matrix(c(35,45,35,35,75,5,5,95,5,5,75,35,35,45,35),
 nrow=5,byrow=TRUE)
yellowM <-matrix(c(95,5,15,45,5,65,35,15,65,35,45,35,55,45,
15,95,5,15),nrow=6,byrow=TRUE) 
```

这是情节（未循环，但我想用 short 自动化长代码，以便可以用 x 数量的颜色生成 x 数量的情节）

```
plot(NA,NA,xlim=c(0,10),ylim=c(0,100),asp=1,bty="n",axes=F,xlab="",ylab="")
polygon(greenM,col="green",border=NULL)
polygon(blueM,col="blue",border=NULL)
polygon(purpleM,col="purple",border=NULL)
polygon(redM,col="red",border=NULL)
polygon(yellowM,col="yellow",border=NULL) 
```

我怎样才能创建这样的外观，它将按顺序应用于具有不同颜色的坐标列表。

```
mycolist <- list (greenM, blueM, purpleM, redM, yellowM)
col1 <- c("green", "blue", "purple", "red", "yellow") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:51:55.493

查看`mapply`

```
mycolist <- list (greenM, blueM, purpleM, redM, yellowM)
col1 <- c("green", "blue", "purple", "red", "yellow")
plot(NA,NA,xlim=c(0,10),ylim=c(0,100),asp=1,bty="n",axes=F,xlab="",ylab="")
mapply(polygon,x=mycolist,col=col1) 
```

如果您不想将所有`NULL`输出都显示到屏幕上，只需将其包装在`invisible`.

```
invisible(mapply(polygon,x=mycolist,col=col1)) 
```

# iphone - UIViewController 遏制做得对吗？

> ID：11726546
> 
> 赞同：1
> 
> 时间：2012-07-30T17:31:04.367
> 
> 标签：iphone, objective-c, cocoa-touch, ipad, ios5

我正在开发一个 iPad 应用程序，它具有类似于网站的导航菜单：想象屏幕左侧的菜单带有一系列按钮，每次点击按钮时都会显示不同的控制器。

由于一些图形限制，我不能使用操作系统提供的任何容器控制器，所以我决定编写自己的容器类，在概念上类似于`UITabBarController`. 我想知道我使用的方法是否正确，尤其是`addChildViewController:`和的用法`didMoveToParentViewController:`

在我的容器的 init 中，我这样做：

```
MAHomeController *home = [[MAHomeController alloc] initWithNibName:@"MAHomeController" bundle:nil];
[self addChildViewController:home];
[home didMoveToParentViewController:self];
homeIndex = [self.childViewControllers indexOfObject:home];
[home release];

MAConfigHomeController *config = [[MAConfigHomeController alloc] initWithNibName:@"MAConfigHomeController" bundle:nil];
[self addChildViewController:config];
[config didMoveToParentViewController:self];
configIndex = [self.childViewControllers indexOfObject:config];
[config release];

MAViewerHomeController *viewer = [[MAViewerHomeController alloc] initWithNibName:@"MAViewerHomeController" bundle:nil];
[self addChildViewController:viewer];
[viewer didMoveToParentViewController:self];
viewerIndex = [self.childViewControllers indexOfObject:viewer];
[viewer release]; 
```

如您所见，我一次添加了所有内容控制器，并`didMoveToParentViewController:`在添加它们后立即调用。这个可以吗？

然后处理内容之间导航的方法执行如下操作：

```
// some stuff removed for brevity, mostly configuration stuff
UIViewController *fromCtrl = [self.childViewControllers objectAtIndex:currentIndex];
UIViewController *toCtrl = [self.childViewControllers objectAtIndex:index];
self.currentIndex = index;
[self transitionFromViewController:fromCtrl toViewController:toCtrl duration:0.7 options:opts animations:^(void) {} completion:^(BOOL finished) {
        if (completion)
            completion();
    }]; 
```

正如您在完成块中看到的那样，我没有调用`didMoveToParentViewController:`新转换的控制器，因为它之前已添加到`childViewControllers`容器中。而且我也不会删除旧控制器，因为实际上它会保留在`childViewCOntrollers`数组中，直到容器控制器被释放。

所有事件都被正确路由，即使是嵌套在 3 个主控制器内的子控制器也是如此。内存也不应该成为问题，因为通过模拟内存警告，不可见控制器的视图会在显示时被卸载并重新加载。

这个设计好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:33:17.367

如果您通读 iOS 开发中心的 View Controller 指南，addChildViewController: 和 didMoveToParentViewController: 没有任何约束，这会使您的操作顺序不正确。

The only thing I would do different is potentially delaying this so that iOS does not load the nibs until you actually show the view. I bet you if you run the profiler you will be loading all the nibs when you init your parent container.

# php - 如何在 PHP 中将文本区域值从一页传递到另一页

> ID：11726548
> 
> 赞同：0
> 
> 时间：2012-07-30T17:31:20.260
> 
> 标签：php, post, textarea

我有一个页面`page1.php`（比如说），这个页面上有一些文本区域框，比如 -

```
<form name="viewRun" action="/auto/page2.php" method="post">
    <td><textarea name="qatxt1 " rows="2" cols="20"></textarea></td>
    <td><textarea name="autotxt1 " rows="2" cols="20"></textarea></td>
    <input type="submit" name="save" value='Submit' style="background-color:#49743D;font-weight:bold;color:#ffffff;"> 
```

现在，用户填充 page1.php 上的文本区域框并单击`Submit`按钮，page2.php 被加载。问题是我无法检索用户在 page2 上的这些文本区域框中输入的评论。php。我在 page2.php 上有以下代码 -

```
<?php 
$varTemp= $_POST["qatxt1 "];
?> 
```

`$varTemp`只是空白。

您的帮助一如既往地受到高度赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T17:35:08.670

名称中不能有空格。

```
<textarea name="qatxt1 " rows="2" cols="20"></textarea> 
```

应该：

```
<textarea name="qatxt1" rows="2" cols="20"></textarea> 
```

然后你可以像这样阅读它：

```
$varTemp = $_POST["qatxt1"]; 
```

参考：[http ://www.w3.org/TR/html4/types.html#type-cdata](http://www.w3.org/TR/html4/types.html#type-cdata)

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

# ember.js - ember-data：如何制作保存/保存的闪存消息

> ID：11726549
> 
> 赞同：6
> 
> 时间：2012-07-30T17:31:21.890
> 
> 标签：ember.js, ember-data

为了在我的应用程序顶部制作一个黄色的“正在保存”/“已保存”指示消息，我想要一个布尔属性来指示当前是否有任何 ember 数据记录正在运行。

我试过这个：

```
App.store = DS.Store.create
  isSaving: (->
    for record in this.get('recordCache')
      if record?.getPath('stateManager.currentState.name') == 'inFlight'
        return true
    return false
  ).property('recordCache.@each.stateManager.currentState.name') 
```

但后来我发现这`recordCache`是不可观察的。

我不使用交易，只有`App.store.commit()`，所以我看了看`App.store.get('defaultTransaction')`，但它没有产生任何有用的东西。

我正在使用 RESTAdapter，所以如果我可以将它扩展到给我这条信息，那也可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T07:35:36.030

为什么不扩展模型、控制器和/或视图：

```
DS.Model.reopen({
    didCreate: function() {
        this.set('persisted', true);
    },
    didUpdate: function() {
        this.set('persisted', true);       
    },

    resetPersistenceFlag: function(){
        this.set('persisted', false);
    }.observes('isDirty')

});

Ember.Controller.reopen({
    contentPersistedObserver: function() {
        if (this.get('content.persisted') === true) {
            //do stuff here
        }  
    }.observes('content.persisted')
});

Ember.View.reopen({
    controllerContentPersistedObserver: function() {
        if (this.get('controller.content.persisted') === true) {
            //do stuff here
        }  
    }.observes('controller.content.persisted')
});​ 
```

这样您的控制器/视图将知道模型何时保存。它会为创建/更新控制器触发，但对于管理阵列的控制器则不会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T04:35:11.763

好吧，您可以简单地创建一个带有 didUpdate 属性的基础模型来处理显示您的通知消息，然后让您的每个模型扩展它。这确实是一个权宜之计的解决方案，但它暂时有效：

```
App.Model = DS.Model.extend
    didUpdate: ->
        # invoke your notification
        alert("All changes saved!")

App.User = App.Model.extend() 
```

但是....这将触发每条更新的记录。因此，您可能希望以这样一种方式创建您的通知类，即它不会一次打开多个已保存的通知……但这取决于您。

我目前正在从这个拉取请求[https://github.com/emberjs/data/pull/376](https://github.com/emberjs/data/pull/376)中实现一些基本的服务器验证方法，我希望我能想出一个更好的方法观察提交的状态（如果我这样做，当然会在这里发回）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T00:33:03.917

有一个更简单的解决方案：

```
App.MyView = Ember.View.extend({

    init: function () {
        this._super();
        var self = this;
        this.get('controller').content.on('didUpdate', function() {
            self.SomeCoolUpdateFunctionForMyView(self.$());
        });
    }
}); 
```

self.$() 对视图的 jquery 表示的引用。

# java - TextAreaSample JTextArea JScrollPane

> ID：11726551
> 
> 赞同：0
> 
> 时间：2012-07-30T17:31:29.253
> 
> 标签：java, swing, text-files, jtextfield, jtextarea

我将在同一区域显示 deneme2.txt 和 deneme1.txt。但只有我有 deneme1.txt 的结果。我想在左侧显示 deneme2.txt。但我做不到。

你能帮我吗？

我在分享时遇到问题，抱歉代码分享。

```
 import java.awt.Container;
    import java.awt.GridLayout;
    import java.io.FileNotFoundException;
    import java.io.FileReader;
    import java.io.IOException;

    import javax.swing.JFrame;
    import javax.swing.JScrollPane;
    import javax.swing.JTextArea;

public class TextAreaSample
{
public static void main(String args[])
{
    String title = (args.length == 0 ? "TextArea Example" : args[0]);
    JFrame frame = new JFrame(title);
    Container content = frame.getContentPane();
    content.setLayout(new GridLayout(0, 2));
    JTextArea leftTextArea = new JTextArea();
    JScrollPane rightPane = new JScrollPane(leftTextArea);

    try
    {
        leftTextArea.read(new FileReader("C:\\Denemeler\\deneme2.txt"), null);
    } catch (FileNotFoundException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    content.add(leftTextArea);

    JTextArea rightTextArea = new JTextArea()
        {
            public boolean isManagingFocus()
            {
                return false;
            }
        };

    JScrollPane leftPane1 = new JScrollPane(rightTextArea);
    JScrollPane rightPane1 = new JScrollPane(leftTextArea);
    try
    {
        leftTextArea.read(new FileReader("C:\\Denemeler\\deneme1.txt"), null);
    } catch (FileNotFoundException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    content.add(leftPane1);
    content.add(rightPane1);
    frame.setSize(250, 150);
    frame.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:49:25.877

这是问题所在：

这 `leftTextArea.read(new FileReader("C:\\Denemeler\\deneme2.txt"),null);`应该是`rightTextArea.read(new FileReader("C:\\Denemeler\\deneme2.txt"),null);`

所以整个程序是：

```
import java.awt.Container;
import java.awt.GridLayout;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;

public class QueueTest {

    public static void main(String args[]) {
        String title = (args.length == 0 ? "TextArea Example" : args[0]);
        JFrame frame = new JFrame(title);
        Container content = frame.getContentPane();
        content.setLayout(new GridLayout(0, 2));
        JTextArea leftTextArea = new JTextArea();
        JScrollPane rightPane = new JScrollPane(leftTextArea);
// JScrollPane leftPane = new JScrollPane(rightTextArea);
        JTextArea rightTextArea = new JTextArea();/* {
            public boolean isManagingFocus() { // i don't know why you have done this
                return false;
            }
        };*/
        try {
            rightTextArea.read(new FileReader("C:\\Denemeler\\deneme2.txt"), null);
        } catch (FileNotFoundException e) {
            System.out.println(e);
        } catch (IOException e) {
            System.out.println(e);
        }
        content.add(leftTextArea);
        leftTextArea.paste();
        rightTextArea.paste();
        JScrollPane leftPane1 = new JScrollPane(rightTextArea);
        JScrollPane rightPane1 = new JScrollPane(leftTextArea);
        try {
            leftTextArea.read(new FileReader("C:\\Denemeler\\deneme1.txt"), null);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        content.add(leftPane1);
        content.add(rightPane1);
        frame.setSize(250, 150);
        frame.setVisible(true);
    }
} 
```

有很多错误，但这会给出输出。

# javascript - Javascript：将页面（从页面列表）加载到 div 中，并在输入字段中显示其 URL？

> ID：11726552
> 
> 赞同：0
> 
> 时间：2012-07-30T17:31:30.967
> 
> 标签：javascript, html

这是背景：我有一个我编写的 Javascript 函数，它使用搜索字段来搜索相关链接的列表，并根据用户的偏好在同一页面上的 div 或新的 div 中显示他们搜索的链接使用 _blank 的窗口。

我很快意识到我的问题是，如果用户选择在 div 中而不是在新选项卡中加载页面，我希望他们仍然能够看到完整的页面 URL。我希望他们仍然能够复制/粘贴 URL。我想既然我已经有了创建完整链接的 Javascript 函数，我只需添加一个 'document.getElementByID('IDHERE').value = processesPage;，但是（无论出于何种原因）似乎不是在职的？

以下是我的 Javascript 供参考：

```
 /* Function to go jump to a user guide */
function goTo() {
    var searchAgainst = document.getElementById('guidesSearch').value; // get the search value
    nWT_check = localStorage.getItem('newWindowToggle');
    var processedPage = 'http://update.my-site.com/onlinehelp/';
    var findFlag = 0;

    for (i=0; i<allGuides.length; i++) {
        if (searchAgainst == allGuides[i]) {
            findFlag = 1;
            processedPage += allURLs[i];
            if (nWT_check == '0') {  //Check against the site options
                alert(processedPage); // ALERT to see if processedPage is correct. It is, and this alert triggers.
                document.getElementById('guidesLink').value = processedPage; // This does not seem to trigger?
                document.getElementById('guidesFrame').src = processedPage; // But then this does, which loads the new page in the DIV.
            }
            else if (nWT_check == '1') {
                window.open(processedPage,'_blank');
            }
        }
    }
    if (findFlag == 0) {
        $('#notFoundModal').modal();
    }
} 
```

所以基本上，它查看 localStorage 项，如果为 0，则执行 DIV，如果为 1，则执行新页面。我正在尝试调试 if (nWT_check == '0') { //检查站点选项部分。

我知道每个人的时间和知识都是宝贵的，人们没有时间一直调试复杂的代码，但是任何对我可能做错了什么或如何更好地解决这个问题的见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T01:02:30.180

我会尝试使用 jQuery 来设置字段的值：

```
$("#guidesLink").val(processedPage); 
```

这可能会通过设置输入字段值来解决一些潜在的浏览器怪癖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:37:17.300

您应该考虑使用 URL 哈希技术。

如果您的主页是`index.php`，因为每个页面都由 Ajax 加载，您可以`document.location.hash='...'`使用 JavaScript 将文档位置哈希 ( ) 更改为新值：

```
index.php#pageName 
```

所以当主页面加载的时候，用JavaScript看有没有hash值，然后用hash值，去用AJAX去抓取匹配的内容。

这篇文章解释了它是如何工作的细节：http: [//blog.mgm-tp.com/2011/10/must-know-url-hashtechniques-for-ajax-applications/](http://blog.mgm-tp.com/2011/10/must-know-url-hashtechniques-for-ajax-applications/)

这种技术的美妙之处在于，用户既可以添加书签也可以共享 URL，而且它仍然可以工作。

# grails - URL 有时会附加 jsessionid Grails / Spring Security

> ID：11726554
> 
> 赞同：6
> 
> 时间：2012-07-30T17:31:48.357
> 
> 标签：grails, spring-security

有时 Spring Security`jsessionid`会在我的 URL 的末尾附加一个。如果它一直发生或从不发生，不会打扰我，但它似乎几乎是随机的。我想知道为什么会发生这种情况，如果它与记住我不能正确使用 LDAP 有关吗？

`http://localhost:8080/myapplication/login/auth;jsessionid=A07D52CB78DB999947F3EED1917D60F6`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T03:55:57.407

JSESSIONID 由 tomcat（或其他 web 容器，请参阅[文档](http://docs.oracle.com/javaee/1.4/tutorial/doc/Servlets11.html)）创建，它不是来自 Spring Security。JSESSIONID 是 http session 的唯一 id，在应用程序使用 session 的情况下使用（在请求期间从 sesson 中放置/读取一些数据），但不存在 session cookie。在这种情况下，服务器尝试两种方式：设置 cookie 并将参数附加到所有链接。

主要是因为：

*   来自浏览器的第一个请求（根本没有 cookie）
*   浏览器发送了无效的 sessionid（例如，当服务器重新启动时，现有会话变得无效）

并且在这样的请求会话期间在服务器端使用（并创建了新会话）。

*PS 我不确定它是否与 LDAP 身份验证问题有关*

# rest - 将用户定义的 REST 接口版本添加到 WADL

> ID：11726558
> 
> 赞同：0
> 
> 时间：2012-07-30T17:31:56.467
> 
> 标签：rest, version, cxf, wadl

URI`foo/bar/?_wadl`允许我列出 REST 接口提供的服务。

有没有办法（使用注释或其他方式）让这个 XML 视图显示用户定义的版本号，以便我知道我正在查看的 REST 接口的版本？

# opengl - 如何将 Haskell 字符串转换为 Ptr (Ptr GLchar)？

> ID：11726563
> 
> 赞同：2
> 
> 时间：2012-07-30T17:32:17.293
> 
> 标签：opengl, haskell, ffi

我想调用函数

```
glShaderSource ::
 GLuint
 -> GLsizei
 -> GHC.Ptr.Ptr (GHC.Ptr.Ptr GLchar)
 -> GHC.Ptr.Ptr GLint
 -> IO () 
```

第三个参数是着色器程序，它是我程序中的一个 Haskell 字符串。如何将 Haskell`String`转换为 a`GHC.Ptr.Ptr (GHC.Ptr.Ptr GLchar)`以便我可以调用`glShaderSource`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T17:50:43.547

您可以使用`withCString`from`Foreign.C.String`将 Haskell C 字符串转换为临时 C 字符串。该字符串在调用开始时分配并在结束时释放。

```
withCString s $ \c_string -> let gl_string = castPtr c_string :: Ptr GLchar
                             in glShaderSource a b (foo gl_string) d 
```

强制转换是必要的，因为字符串封送处理函数使用该`CChar`类型，而 GL 使用该`GLchar`类型。它们都是 8 位有符号整数，我认为 OpenGL 库和 FFI 将来都不会更改其字符类型。如果您担心指针转换，您可以编写自己的封送处理函数。

**关于指针对指针类型：**

你现在有一个`Ptr GLchar`. 制作 a 的正确方法`Ptr (Ptr GLchar)`取决于 OpenGL 库的预期。例如，它是否需要一个指针数组？它是否需要`free`一些指针？它会写入其中一些字符串吗？该解决方案可能会涉及一些内存分配和指针复制。

# coded-ui-tests - 编码 UI：处理 IE 模式对话框

> ID：11726564
> 
> 赞同：2
> 
> 时间：2012-07-30T17:32:22.287
> 
> 标签：coded-ui-tests

您如何在 CodedUI 中处理 IE 模态对话框窗口？

代码片段将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T14:03:47.093

这可能对您的特定测试有帮助，也可能没有帮助。我有一个测试，我通过代码输入随机数据并且永远不知道会发生什么。在某些情况下，这种随机化会触发某些字段的对话框。

我有将检查 BrowerDialogAction 的代码，但有时当对话框不存在时，它会失败。这是解决方案：

```
try
        {
            BrowserWindow browserWindow = new BrowserWindow();
            browserWindow.PerformDialogAction(BrowserDialogAction.Ok);
        }
        catch (Exception)
        {
            // If a popup does not exists and an error is thrown, continue...
            Playback.PlaybackSettings.ContinueOnError = true;
        } 
```

我意识到这不是最好的解决方案，但它对我有用。如果对话框不存在，Lambda 和其他搜索将失败。如果存在，这将单击“确定”按钮。如果没有，它将抛出错误并继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T00:07:48.833

您可以通过检查主窗口 .HasFocus 属性是否为真来尝试检查模态窗口的外观。

通过单击打开的模式窗口记录测试应该可以正常工作，因此只需记录测试而不编写显式代码即可找到它。

# c# - 如何将项目添加到具有不同数据类型的列表中

> ID：11726565
> 
> 赞同：2
> 
> 时间：2012-07-30T17:32:31.717
> 
> 标签：c#, list

我正在开展一个项目，该项目将检索要发送的电子邮件列表。我在一个单独的类中有代码来创建我们需要的电子邮件项目：

```
public class EmailStructure
{
    public MailMessage Email { get; set; }
    public int MailId { get; set; }
    public int MailTypeId { get; set; }
} 
```

我有返回数据的代码并循环遍历数据集中的每条记录以创建新的`MailMessage`，我的问题是，当我尝试将其添加`MailMessage`到我的列表时，我收到一条错误消息：

> 参数类型 System.New.Mail.MailMessage 不可分配给参数类型“EmailStructure”。

显然我在这里做错了，但我无法弄清楚问题是什么。我的代码如下：

```
class SendMails
{
    public List<EmailStructure> emailMessages = new List<EmailStructure>();
    public List<GetOutboundEmailsResult> emailResults = new List<GetOutboundEmailsResult>();

    public Extract()
    {
        // get data from DB
    }

    public void Transform()
    {
        if(emailResults.Any())
        {
            foreach (GetOutboundEmailsResult item in emailResults)
            {
                var emailBody = GetEmailBody(item);

                // create email this returns the type as MailMessage
                var email = emailHandler.ComposeNewEmail(
                    System.Configuration.ConfigurationManager.AppSettings["Mailbox"],
                    item.MailboxFrom,
                    string.Empty,
                    string.Empty,
                    emailBody.ToString(),
                    true,
                    "test");

                // add email message to List<MailMessage>
                // need to add MailMessage, MailId, MailTypeId 
                emailMessages.Add(email); // error is appearing here
            }
        }
    }

    public Route()
    {
        // send the emailMessages
        foreach(var row in emailMessages)
        {
            // need to use the MailId, MailTypeId here from the list
            emailHandler.SendNewEmail(row.Email)
        }
    }
} 
```

如何将 MailMessage、Maild 和 MailTypeId 添加到我的列表中？我需要所有这些项目，以便我可以在稍后的过程中以一种方法发送电子邮件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T17:38:16.723

当后者持有s时，您正试图将 a`MailMessage`直接添加到。尝试类似：`emailMessages``EmailStructure`

```
emailMessages.Add(new EmailStructure()
{
    Email = email,
    MailId = 42,
    MailTypeId = 108
}); 
```

用任何合适的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:38:41.587

您正在尝试将 type 的对象添加到 type`MailMessage`的列表中`List<EmailStructure>`。那就是问题所在。

# batch-file - 如何获取字符串的最后一个单词？

> ID：11726570
> 
> 赞同：2
> 
> 时间：2012-07-30T17:32:38.950
> 
> 标签：batch-file

我有一个批处理文件，它以文件路径为参数

```
set filePath = %1 
```

现在，假设文件路径是：`C:\Temp\Folder`，我想`Folder`在一个新变量中设置。我怎样才能做到这一点？

我在网上搜索，所有解决方案都是这样的：

```
for %%A in (%filePath%) do set last=%%A 
```

但这仅适用于带空格的字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:35:40.963

您可以用空格替换斜杠，然后将其解析出来：

```
set filePath=%1
set filePath=%filePath:\= %
for %%A in (%filePath%) do set last=%%A 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T17:53:14.953

您可以`Folder`通过`C:\Temp\Folder`将`~n`修饰符应用于`%1`：

```
SET "last=%~n1" 
```

如果最后一项可能包含`.`，请`~nx`改用：

```
SET "last=%~nx1" 
```

修饰符应用于位置参数或循环变量，并从该`~n`参数或变量指定的路径中提取姓氏。修饰符提取姓氏的`~x`扩展名（从 last 开始的部分`.`）。因此，`~nx`提取（姓氏）名称和扩展名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-17T12:20:14.333

你可以试试

```
for /F "tokens=4*" %%G IN (Data.txt) DO (
set value1=%%G
echo %value1%
) 
```

**4** * 是你要取的字数

# c++ - 如何在 C++ 中使用 *& 传递数组

> ID：11726573
> 
> 赞同：0
> 
> 时间：2012-07-30T17:32:49.137
> 
> 标签：c++, arrays, function, memory, reference

我阅读了[动态数组](https://stackoverflow.com/questions/8056746/copying-from-one-dynamically-allocated-array-to-another-c)并使用它，但我有一个问题：当我将以下格式放入原型时：

```
void mmyfunc(int *& myArray)
{
 //implementation
} 
```

1.如果我将一个数组传递给它，如何调用它？因为我得到：

```
no matching function for call to 
```

2.当我使用以下实现时：

```
void NetworkSocket::resizeArray (int *&orig, int index, int size)
{
    int *resized =  new  int[size];
    for (int i = 0; i < size; i++)
    {
        if ( i == index )
            i++;

        resized[i] = orig[i];
    }
    delete [] orig;
    orig = (int *)new int[size];
    orig = resized;
} 
```

我在删除 [] 行中出现段错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:34:56.177

我只是假设你的意思是数组

```
int x[16]; 
```

你把这个函数称为

```
resizeArray (x, ...) 
```

所以`delete[]`- 明确地导致未定义的行为，因为它没有分配给`new[]`. 此外，`x`它驻留在自动内存中，因此它会自行清理。此外，您不能重新分配数组。**数组不是指针**。当作为参数传递时，它们会衰减为指针。

如果您将*数组*声明为

```
int* x = new int[16]; 
```

那么你的方法会奏效。但还不是完全 C++。

您可以只使用`std::vector`and `resize()`。不要重新发明轮子（除非这是一项任务）。

编辑：刚刚发现这个：

```
orig = (int *)new int[size];
orig = resized; 
```

会泄漏。删除多余的`new[]`.

编辑2：

什么是

```
if ( i == index )
        i++; 
```

应该做的？

# .htaccess - url重写不起作用

> ID：11726575
> 
> 赞同：0
> 
> 时间：2012-07-30T17:33:14.143
> 
> 标签：.htaccess

xammp 上的 htaccess（Windows）

我无法在本地主机上运行 .htaccess。我想做一个 url rewrite 这使得

**http://localhost/mywebsite/about.php**到**http://localhost/mywebsite/about**

这是我的 .htaccess，我已将其放入 C:\xampp\htdocs 中。顺便说一句，我的网站位于 C:\xampp\htdocs\mywebsite

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} -f
  RewriteRule ^(.*)$ $1.php
</IfModule> 
```

我已经 在**C:\xampp\apache\conf\http.conf中完成了****“LoadModule rewrite_module modules/mod_rewrite.so”** ，但仍然没有运气。

 **我很确定我的 mod_rewrite 已经在工作，但我不确定我的 .htaccess

任何人都可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:38:37.000

几乎。你有两个条件：

```
 RewriteCond %{REQUEST_FILENAME} !-d 
```

它检查请求是否映射到*不*存在的目录，并且：

```
 RewriteCond %{REQUEST_FILENAME} -f 
```

wchich 检查请求是否映射到*现有文件*。*如果它以* **.php 结尾**，您想要进行第二次检查以查看它是否映射到现有文件。因此，您想将第二个条件更改为：

```
 RewriteCond %{REQUEST_FILENAME}.php -f 
```**

# c# - 如何查看正则表达式的索引在不成功匹配上的距离

> ID：11726583
> 
> 赞同：0
> 
> 时间：2012-07-30T17:33:46.173
> 
> 标签：c#, .net, regex

> **可能重复：**
> [匹配失败的匹配字符串中的正则表达式索引](https://stackoverflow.com/questions/107382/regex-index-in-matching-string-where-the-match-failed)

如果我有主题：

```
0123456789abcdef... 
```

我有模式

```
\d+TEST 
```

显然它会失败。现在我想知道达到的最大指数。换句话说，正则表达式引擎会完成：

首先它匹配一个数字，因此它将索引移动到下一个也是数字的字符。将重复此步骤，直到正则表达式引擎找到数字`9`。因为下一个字符不是 a`T`它失败。**我想获取索引`10`，因为正则表达式引擎成功移动了 10 个字符，直到失败。**有没有办法获取这些信息？我必须检查几个文件的版权，我用正则表达式来做。如果我能知道正则表达式在哪个索引上失败，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:57:48.430

您需要进行两次单独的搜索。

在您的示例代码中，正则表达式引擎实际上已经到达字符串的末尾 - 当拒绝字符串时，引擎本身会考虑所有可能的匹配项。您无法获得“我移至第 10 个字符并停止”的信息，因为正则表达式引擎实际上在最终完成之前移至第 16 个字符。

对于您的要求，您首先要执行以下操作：

```
string source = @"0123456789abcdef";
Regex r = new Regex(@"\d+TEST")
MatchCollection matches = r.Matches(source); // Returns no matches 
```

这将返回您的完整字符串是否存在匹配项。如果失败，则执行以下命令：

```
if (matches.Count == 0) {
    r = new Regex(@"\d+");
    MatchCollection matches = r.Matches(source);
    int maxpos = -1;
    foreach (Match m in matches) {
        if (m.Index + m.Length > maxpos) maxpos = m.Index + m.Length;
    }

    // returns 10
    return maxpos;
} 
```

编辑：另一种选择是使“TEST”字符串成为可选匹配。然后，您可以查看匹配列表，其中将包括仅在数字上的匹配和在数字 + TEST 字符串上的匹配。

```
string source = @"0123456789abcdef";
Regex r = new Regex(@"\d+(TEST)?")
MatchCollection matches = r.Matches(source); // Returns one match of 10 digits at position 0 - 10. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-30T17:41:50.500

您可以迭代地执行此操作：

```
check for pattern \d+T
...then for patter \d+TE
....then for pattern \d+TES   and so on ...this way you can figure out how far you reached 
```

# ios - 自定义 UITableView - iOs

> ID：11726588
> 
> 赞同：1
> 
> 时间：2012-07-30T17:34:01.060
> 
> 标签：ios, xcode, uitableview, rss

我按照本教程创建了一个简单的 rss 阅读器...

[http://www.kieranmcgrady.com/blog/2012/4/25/tutorial-how-to-create-a-simple-rss-reader-for-ios.html](http://www.kieranmcgrady.com/blog/2012/4/25/tutorial-how-to-create-a-simple-rss-reader-for-ios.html)

问题是我在设计方面遇到了问题，因为一切都是以编程方式完成的。

我将如何使每个单元格成为占据页面的正方形，如果我向下滚动，它将进入显示下一个单元格的新页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:03:37.807

听起来您正在尝试复制[Reeder](http://reederapp.com/)的功能。如果是这种情况，您可能会发现这篇[文章](http://idevrecipes.com/2010/12/28/how-does-the-reeder-iphone-app-swipe-up-and-down-between-articles/)和[GitHub 项目](https://github.com/boctor/idev-recipes/tree/master/VerticalSwipeArticles)很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:57:16.870

你会更好（我认为）使用你自己的 UIViewControllers 和他们自己的文本/图像并将他们的视图添加到 UIScrollView 并启用分页。如果您正在寻找一些关于如何使用 UIScrollView 来实现此功能的教程，[这](http://chrisoxley.me/?p=44)将很有用。您可能无法准确找到您正在寻找的内容，您只需要划分您的问题，然后寻找解决方案。即阅读 RSS 提要。用页面创建 UIScrollView。创建自定义视图控制器。

# raphael - 拉斐尔 toFront() 怪事

> ID：11726592
> 
> 赞同：0
> 
> 时间：2012-07-30T17:34:23.213
> 
> 标签：raphael

所以我对 raphael.js 库有一个奇怪的问题，这对我来说毫无意义。我有一张世界地图，其中的点代表位置。许多点相互重叠。当我想挑出不同的位置时，我想将元素带到前台。

鉴于以下代码...

```
$("#peerIdSelector").change(function() {
    var peerSelected = $(this).val();
    var counter = 0;
    var antiCounter = 0;
    paper.forEach(function (el) {
        var peer = el.data("peer");
        if (peer === peerSelected) {
            //el.toFront();
            el.attr("fill", "#ffff00");
            counter++;
         } else {
            el.attr("fill", "#00ffff" );
            antiCounter++;
         }
    });
    alert(counter + " peers updated for " +  peerSelected + "\n" + antiCounter + " peers not updated")
}); 
```

当`el.toFront()`注释掉时，代码按预期工作，根据 if 语句找到正确数量的元素。但是，如果我包含该`el.toFront()`指令，那么只有第一个`if (peer === peerSelected)`遇到的会显示为 true，之后的每个其他都会显示为 false。

目前，我对导致这种行为的原因感到困惑。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:22:48.627

这就是 Raphael 的 forEach 函数的作用：

```
paperproto.forEach = function (callback, thisArg) {
    var bot = this.bottom;
    while (bot) {
        if (callback.call(thisArg, bot) === false) {
            return this;
        }
        bot = bot.next;
    }
    return this;
}; 
```

在当前项目上调用 toFront 将导致有问题的元素被移动到列表的末尾，因此 bot.next 将为 null 并且 while 循环将比您预期的更早退出。

我建议将此作为解决方案：

```
var frontSet = paper.set();
paper.forEach(function (el) {
    var peer = el.data("peer");
    if (peer === peerSelected) {
        frontSet.push( el );
        el.attr("fill", "#ffff00");
        counter++;
     } else {
        el.attr("fill", "#00ffff" );
        antiCounter++;
     }
});
frontSet.toFront(); 
```

# android - 在 Ubuntu 中使用电脑键盘的 Android 编辑文本

> ID：11726595
> 
> 赞同：1
> 
> 时间：2012-07-30T17:34:37.217
> 
> 标签：android, ubuntu, keyboard, android-edittext

在 Ubuntu 12.04 中，我无法`edittexts`使用电脑键盘书写……有人知道如何解决这个问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T17:41:18.917

（我假设你在这里使用模拟器）

尽管开发人员文档说默认启用键盘支持，但在 SDK rev 20 中似乎并非如此。我在模拟器的 config.ini 文件中明确启用了键盘支持，并且有效！

添加：`hw.keyboard=yes`

至：`~/.android/avd/<emulator-device-name>.avd/config.ini`

参考：http: [//developer.android.com/tools/devices/managing-avds-cmdline.html#hardwareopts](http://developer.android.com/tools/devices/managing-avds-cmdline.html#hardwareopts)

在 Mac OS 和 Linux 上，您可以使用一个终端命令编辑所有模拟器配置：

`for f in ~/.android/avd/*.avd/config.ini; do echo 'hw.keyboard=yes' >> "$f"; done`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:49:13.550

转到**AVD 管理器**--> 点击**EDIT** --> 点击HARDWARE 标签下的**NEW --> 选择****Keyboard support** --> 设置值**YES**（其默认值为 NO）

# asp.net - IIS - 如何检查网站是否正常工作？

> ID：11726601
> 
> 赞同：-1
> 
> 时间：2012-07-30T17:34:48.893
> 
> 标签：asp.net, iis, iis-7

简单地说，我在 IIS7 上创建了一个 asp.net 网站

当我单击“在 *:80(http) 上浏览 google.com”时，它会打开真正的 google.com，而不是我的……所以，我无法确定我的网站是否正常运行。（我不想让 google1.com 看到它正在工作）

我更改了主机文件：xxx.yyy.zzz.kkk google.com

现在，当我浏览 google.com 时它返回 404 not found 当我浏览 xxx.yyy.zzz.kkk 它返回 404 not found

我知道 IIS 工作正常……我知道物理路径是正确的……所以知道为什么浏览器返回 404 未找到吗？它与物理文件权限有关吗？我将所有权限授予 SYSTEM 并单击“确定”，然后当我再次检查时，它返回了以前的状态……我没有工作……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:43:17.017

也许aspnet注册到IIS有问题。以管理员权限运行它可能有助于解决问题：

`C:\Windows\Microsoft.Net\Framework..\v.....\aspnet_regiis.exe -i`

请用适当的值替换..。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:56:29.727

假设您的 IIS 应用程序启用了匿名身份验证，并且您没有启用任何特殊配置，则可能是授权问题。

确保为应用程序的物理文件夹的组`IIS_IUSRS`和/或用户授予必要的权限。`IUSR`

# java - 在 Java 中执行 MySQL 删除语句时遇到问题

> ID：11726607
> 
> 赞同：3
> 
> 时间：2012-07-30T17:35:08.137
> 
> 标签：java, mysql, jdbc

我正在尝试运行此代码并删除 MySQL 数据库中的某个记录，但出现此错误：

```
SQLException: Can not issue data manipulation statements with executeQuery().
SQLState:     S1009
VendorError:  0 
```

这是我目前拥有的代码：

```
package stringStuff;

import java.io.File;
import java.util.regex.*;
import java.sql.*;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class REGGY {

    /**
     * @param args
     */

    Connection connection;

    public REGGY() {
        try {
            Class.forName("com.mysql.jdbc.Driver").newInstance();
        } catch (Exception e) {
            System.err.println("Unable to find and load driver");
            System.exit(1);
        }
    }

    private void displaySQLErrors(SQLException e) {
        System.out.println("SQLException: " + e.getMessage());
        System.out.println("SQLState:     " + e.getSQLState());
        System.out.println("VendorError:  " + e.getErrorCode());
    }

    public void connectToDB() {
        try {
            connection = DriverManager
                    .getConnection("the connection works :P");
        } catch (SQLException e) {
            displaySQLErrors(e);
        }
    }

    public void executeSQL() {
        try {
            Statement statement = connection.createStatement();

            ResultSet rs = statement
                    .executeQuery("DELETE FROM content_resource WHERE RESOURCE_ID LIKE '%Hollow%'");

            rs.close();
            statement.close();
            connection.close();
        } catch (SQLException e) {
            displaySQLErrors(e);
        }
    }

    public static void main(String[] args) {

        String cool = new File(
                "/group/a45dea5c-ea09-487f-ba1c-be74b781efb1/Lessons/Hollowbody 5.gif")
                .getName();

        System.out.println(cool);

        REGGY hello = new REGGY();

        hello.connectToDB();
        hello.executeSQL();

        // TODO Auto-generated method stub

    }

} 
```

我能够运行 select * 查询没问题，但是当我尝试运行 DELETE 查询时它不会让我这样做。我已经在 MySQL 工作台中运行了这个命令并且它可以工作，但当我使用 Java 时它不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T17:36:43.277

你用`executeUpdate()`它代替。

`executeQuery()`仅适用于返回数据的语句。`executeUpdate`适用于不会返回日期的那些（更新、插入、删除，我也相信添加/删除表、约束、触发器等）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-30T17:38:16.033

改变

```
ResultSet rs = statement.executeQuery("DELETE FROM content_resource WHERE RESOURCE_ID LIKE '%Hollow%'"); 
```

到

```
int deletedRows = statement.executeUpdate("DELETE FROM content_resource WHERE RESOURCE_ID LIKE '%Hollow%'"); 
```

正如其他人所说，executeQuery() 应该用于返回数据的语句，通常是 select 语句。对于插入/更新/删除语句，您应该改用 executeUpdate()。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-30T17:37:20.120

要执行 DML 语句（插入、创建或删除），您必须使用`executeUpdate()`. 不是`executeQuery()`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T17:37:18.560

使用`executeUpdate`而不是`executeQuery`. JDBC 很沮丧，因为 delete 语句没有像`executeQuery`预期的那样返回记录集。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T17:39:06.593

使用`execute`而不是`executeQuery`.

据我所知，如果您正在执行返回结果集的查询（例如） ，`executeQuery`则必须使用。`select`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T17:37:03.407

确保您已设置`DELETE`语句的权限。出于安全目的，某些用户将不允许使用某些命令。

# jquery - 根据匹配的类数查询排序选择

> ID：11726615
> 
> 赞同：1
> 
> 时间：2012-07-30T17:35:28.870
> 
> 标签：jquery, css, jquery-ui-sortable

我想通过具有最匹配类的结果对**下拉菜单选择中的结果进行排序。** `checkbox`我想我可以使用`.length()`我只是不确定上下文。
这是代码。[jsfiddle](http://jsfiddle.net/mstiller/N5SwW/)

# ios - 如何从 UIButton 到选项卡栏项？

> ID：11726620
> 
> 赞同：1
> 
> 时间：2012-07-30T17:35:59.197
> 
> 标签：ios, uibutton, uitabbarcontroller, tabbar, segue

我有一个带有标签栏的应用程序，其中包含 5 个标签。我决定使用“主屏幕”而不是直接在第一个选项卡中打开应用程序。我的主屏幕将包含一条欢迎消息和 5 个按钮，可直接转到所需的选项卡。示例：第 4 个按钮将转到第 4 个选项卡。单击一个按钮后，不应再看到主屏幕。导航模式将通过标签栏。

My Home View Controller 5 个按钮和对 Tab Bar Controller 的引用，以传递单击的按钮。标签栏控制器 ( `@interface TabBar : UITabBarController <UITabBarControllerDelegate>`) 控制 5 个标签开始的屏幕。由于某些原因，我无法`[self.tabBarController setSelectedIndex:3];` 上班。我把它放进去`- (void)viewDidLoad`，但它什么也没做。

有人知道为什么不调用 setSelectedItem 吗？

**编辑**：看看那个问题：

```
self.tabBarController.selectedIndex = 1;

NSLog(@"%i", self.tabBarController.selectedIndex); 
```

在运行时，我得到 0 作为 NSLog 的结果...为什么设置器不工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-06T05:12:33.930

您可以自定义选项卡栏控制器的转场并命名转场（例如，使用“yourSegueName”）。

不仅仅是在所需的标签页调用 UITabBarController 和 setSelectedIndex ：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
if ([[segue identifier] isEqualToString:@"yourSegueName"]){
    UITabBarController *destController = [segue destinationViewController];
    [destController setSelectedIndex:3];
} 
```

}

# php - 您如何记录未找到的 404 页面的 URL？

> ID：11726629
> 
> 赞同：0
> 
> 时间：2012-07-30T17:36:36.070
> 
> 标签：php, apache, .htaccess, webserver

我已经搜索但没有找到......

我最近为一个网站创建了一个新布局。它现在正在直播。交通似乎正在下降。恐怕我忘了把一些页面移过来。有没有办法记录人们去但不存在的网址？

例如：如果 Joe 访问 www.sample.com/page3 并且该页面不存在，我希望它在服务器上的 say error.log 中记录 url

请提前告知和感谢。

# python - 默认情况下，python27 中的导入不应该是绝对的吗？

> ID：11726633
> 
> 赞同：17
> 
> 时间：2012-07-30T17:36:43.963
> 
> 标签：python, import

想象一下目录结构：

```
/
    一种/
        __init__.py
        b.py
        py
    py

```

文件`/a/b.py`看起来像：

```
进口c
应该_be_absolute = c

```

所有其他文件（包括`__init__`）都是空的。

运行测试脚本时（使用 python 2.7）：

```
import a.b
print a.b.should_be_absolute 
```

从`PYTHONPATH=/`一个空目录（所以没有`PYTHONPATH`从当前目录添加任何内容）我得到

```
<module 'a.c' from '/a/c.py'> 
```

根据[PEP 328](http://www.python.org/dev/peps/pep-0328/)和`import <> is always absolute`我期望的声明：

```
<module 'c' from '/c.py'> 
```

当我删除`/a/c.py`文件时，输出与预期一致。

我错过了什么？如果这是正确的行为 - 如何从（而不是）导入`c`模块？`b``a.c`

**更新：**

根据[python dev 邮件列表](http://python.6.x6.nabble.com/status-of-absolute-import-w-python-2-7-td1850742.html)，它似乎是文档中的一个错误。默认情况下，python27 中的导入**不是绝对的。**

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-31T13:58:38.973

您需要在 Python 2.7 上添加`from __future__ import absolute_import`或使用`importlib.import_module('c')`

它是 Python 3 的默认设置。

Python 中有一个错误：[`__future__.py`它的文档声称绝对导入在 2.7 中成为强制性的，但他们没有](http://bugs.python.org/issue14494).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:52:40.290

如果您只是添加`/`到 PYTHONPATH，那么搜索顺序可能仍在`c`当前目录中查找。如果您将所有内容都放在根包下并绝对引用它会更好：

```
/myPackage
    a/
        __init__.py
        b.py
        c.py
    __init__.py
    c.py 
```

还有一个 PYTHONPATH，例如： `export PYTHONPATH=/:$PYTHONPATH`

所以在你的`a.c`你会做这些：

```
from myPackage import c
from myPackage.c import Foo
import myPackage.c 
```

这样，它始终与您的包裹相关。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T10:08:02.137

“绝对”并不意味着您认为的那样。相反，这意味着发生了“通常”的包解析过程：首先，它在包的目录中查找，然后在 sys.path 的所有元素中查找；其中包括 PYTHONPATH 中的元素。

如果你*真的*想要，你可以使用 imp 模块之类的工具，但我建议你不要这样做。因为一般来说，您永远不必创建与标准 Python 发行版中的模块同名的模块。

# .net - .net Uri 区分大小写

> ID：11726635
> 
> 赞同：0
> 
> 时间：2012-07-30T17:36:57.620
> 
> 标签：.net, case-sensitive

好吧，假设我们有以下 2 个 uri

```
Uri uri1 = new Uri(@"http://localhost/test/");
Uri uri2 = new Uri(@"http://localhost/TEst/test123/");
Uri relativeUri = uri1.MakeRelativeUri(uri2); 
```

relativeUri 保存以下值“../TEst/test123/”

我想要值“test123/”

那么有没有办法让uri不区分大小写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:38:43.970

在构造 URI 之前将字符串小写：

```
Uri uri2 = new Uri(@"http://localhost/TEst/test123/".ToLowerInvariant()); 
```

# php - 复选框二维数组

> ID：11726646
> 
> 赞同：0
> 
> 时间：2012-07-30T17:37:22.943
> 
> 标签：php, javascript, html, checkbox

我有一个非常棘手的情况。我有一个技能列表，每个技能的级别为 1、2、3，除了每个技能名称之外，它们都表示为复选框。这些技能是从数据库中提取出来的。如果没有技能级别，正常的做法是将复选框的值指定为技能的 ID（进入复选框数组）。有没有办法将值存储在二维数组中，以便我可以访问检查的技能以及检查的技能级别？我还需要通过 Javascript 验证这些，以便用户选择的所有技能的最高技能水平不超过 5。

这是我编写的代码，但我无法通过 Javascript 检索检查的值：

```
$sql = "select * from Skill where Active=1";
    $res = mysql_query($sql);
    $count=0;
    echo '<tr>';
    while ($rr=mysql_fetch_assoc($res))
    {
    echo '<td>';
    echo "<input type=\"checkbox\" name=\"skill[][".$rr['SkillID']."]\" value=\"1\" /><span></span></input>";
    echo "<input type=\"checkbox\" name=\"skill[][".$rr['SkillID']."]\" value=\"2\" /><span></span></input>";
    echo "<input type=\"checkbox\" name=\"skill[][".$rr['SkillID']."]\" value=\"3\" /><span>".$rr['Name']."</span></input>";
    echo '</td>';
    $count++;
    if ($count % 3 == 0)
    {
    echo '</tr><tr>';
    }
    } 
```

任何帮助将非常感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:39:56.513

代替

```
<input ... name=\"skill[][".$rr['SkillID']."\" ... /> 
```

尝试

```
<input ... name=\"skill[]\" id=\"skill_".$rr['SkillID']."\" value=\"1" ... /> 
```

然后，要确定检查的总技能水平，可以使用 jQuery：

```
<script language="javascript">
    $("input[name=skill[]]").click(function() {
        var total = 0;
        $("input[name=skill[]]:checked").each(function() {
            total += $(this).val();
        });
        if (total > 5) {
            alert("Skill level too high.");
        }
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:44:09.907

这个怎么样：

```
<input name="skill[SKILL_ID][1]" value=1>
<input name="skill[SKILL_ID][2]" value=1>
<input name="skill[SKILL_ID][3]" value=1>
.
.
.
<input name="skill[NEXT_SKILL_ID][1]" value=1>
<input name="skill[NEXT_SKILL_ID][2]" value=1>
<input name="skill[NEXT_SKILL_ID][3]" value=1> 
```

# ios - UITableView 加载但没有显示

> ID：11726648
> 
> 赞同：0
> 
> 时间：2012-07-30T17:37:44.083
> 
> 标签：ios, uitableview

当我构建并运行时，没有显示任何内容。没有文字只是空单元格。

这是我的代码：

```
#import "plungerselection.h"

@implementation plungerselection
@synthesize tableData;

-(void) viewDidLoad
{
    tableData = [[NSArray alloc] initWithObjects:@"Turbo", @"Hollow Turbo", @"Single Pad", @"Dual Pad", @"Bullet", nil];
    [super viewDidLoad];
}

#pragma mark - TableView Data Source Methods 

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;{

    return [tableData count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    UITableViewCell *cell = nil;

    cell = [tableView dequeueReusableCellWithIdentifier:@"MyCell"];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MyCell"];

        cell.textLabel.text = [tableData objectAtIndex:indexPath.row];
    }

    return cell;

}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:27:41.343

确保您已在 Interface Builder 中连接数据源和委托连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:31:36.633

`dequeueReusableCellWithIdentifier:`如果在这种情况下没有发生返回，则您只是在单元格中设置文本`nil`（即使它发生了，也只会在所有需要的单元格进入队列之前发生几次）。您应该将文本设置在`if (cell == nil)`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    UITableViewCell *cell = nil;

    cell = [tableView dequeueReusableCellWithIdentifier:@"MyCell"];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MyCell"];
    }

    cell.textLabel.text = [tableData objectAtIndex:indexPath.row];

    return cell;

} 
```

# multithreading - egl - 可以在线程之间共享上下文

> ID：11726650
> 
> 赞同：13
> 
> 时间：2012-07-30T17:37:51.337
> 
> 标签：multithreading, egl

考虑到上下文句柄是从 main() 传递到线程函数的事实，是否允许从 main() 创建 egl 上下文并从另一个线程渲染？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-04T05:42:34.560

是的，当然是。

首先，您需要在一个线程中创建一个上下文：

```
 EGLint contextAttrs[] = {
     EGL_CONTEXT_CLIENT_VERSION, 2,
     EGL_NONE
};

LOG_INFO("creating context");
if (!(m_Context = eglCreateContext(m_Display, m_Config, 0, contextAttrs)))
{
    LOG_ERROR("eglCreateContext() returned error %d", eglGetError());
    return false;
} 
```

然后在另一个线程中创建一个共享上下文，如下所示：

```
 EGLint contextAttrs[] =
    {
        EGL_CONTEXT_CLIENT_VERSION, 2,
        EGL_NONE
    };

    if (m_Context == 0)
    {
        LOG_ERROR("m_Context wasn't initialized for some reason");
    }

    // create a shared context for this thread
    m_LocalThreadContext = eglCreateContext(m_Display, m_Config, m_Context, contextAttrs); 
```

当然，您必须有一些互斥体/信号量来同步您想要使用 GLES 进行的任何更新。例如你需要做一个

```
eglMakeCurrent(m_Display, EGL_NO_SURFACE, EGL_NO_SURFACE, EGL_NO_CONTEXT); 
```

在另一个线程可以调用之前在线程内

```
if (!eglMakeCurrent(m_Display, m_Surface, m_Surface, m_Context))
{
    LOG_ERROR("eglMakeCurrent() returned error %d", eglGetError());
} 
```

然后您可以从任一线程创建纹理、加载着色器等

# excel - 来自 VB excel 宏代码的错误 - msxml3.dll -2146697211 系统找不到指定的资源

> ID：11726661
> 
> 赞同：1
> 
> 时间：2012-07-30T17:38:44.023
> 
> 标签：excel, vba, vbscript, xmlhttprequest, msxml

我正在使用`MSXML.HTTPRequest`VB 宏 (excel) 中的对象与 HTTP 服务器进行通信。问题是它间歇性地抛出以下错误。

> msxml3.dll -2146697211 系统找不到指定的资源。

我在我的系统上注意到这发生在网络关闭时，但我的客户抱怨它在他的机器上间歇性地发生。鉴于他的系统安装了 Windows 7 并且有时可以运行，我认为这不是未安装正确库的问题。他已经在几个网络上尝试过，但仍然失败。

```
Function xmlHTTPPost(strURL, strData)
    Dim objHttp

    On Error Resume Next
    xmlHTTPPost = ""
    Set objHttp = CreateObject("Microsoft.XMLHTTP")
    If Err.Number <> 0 Then
        Err.Clear
        Set objHttp = CreateObject("MSXML2.XMLHTTP")
    End If
    If Err.Number <> 0 Then
        MsgBox "Error creating XMLHTTP object"
        Err.Clear
        Exit Function
    End If
    objHttp.Open "GET", strURL, False
    If Err.Number <> 0 Then
        Err.Clear
        Set objHttp = Nothing
        Exit Function
    End If
    objHttp.setRequestHeader "Content-Type", "application/x-www-form-urlencoded"
    objHttp.setRequestHeader "User-Agent", "Mozilla Compatible (MS IE 3.01 WinNT)"
    objHttp.Send
    If Err.Number <> 0 Then
        MsgBox "Error " & Hex(Err.number) & " sending to server:" & vbCrLf & Err.description
        xmlHTTPPost = "ERROR: " & Err.Source & " " & Err.Number & " " & Err.Description
        Err.Clear
    Else
        xmlHTTPPost = objHttp.responseText
    End If
    Set objHttp = Nothing
End Function 
```

它在我的盒子上运行良好，这是一个 Windows 7 + Microsoft Office 2007 安装。

我在网上查了很多，模糊地提到了两个原因。

1.  由于代理或防火墙导致的网络问题。在这种情况下，它不应该连接，而不是间歇性连接。
2.  库安装问题。同样，它根本不应该工作，但事实并非如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:18:54.673

现在我可以通过将方法从 GET 更改为 POST 来解决这个问题。该错误是间歇性的，但幸运的是它开始出现在我的开发机器上一次，并且将 HTTP 方法更改为 POST 就可以了。虽然这很奇怪，但它确实有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:37:13.933

我有时也会在我的服务器上得到这个。一旦我重新启动服务器，它就会开始正常工作，但又会间歇性地失败。我又不得不重新开始。错误消息是随机的和间歇性的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-22T02:07:24.253

FWIW，我得到了同样的错误。结果（最终）证明，XML 文件中存在错误。愚蠢的我，我原以为微软会提供更有意义的错误消息。如果您收到此错误，请尝试使用众多可用的 XML 检查程序之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T11:38:07.973

使用 MSXML v6.0，MSXML v3.0 不再随 Office 或 Windows 一起分发。v6.0 仅随 Windows 7 一起分发。但 office 2010+ 不再附带任何版本的 MSXML。这解释了您的问题的原因。

维基百科中也有描述：[http ://en.wikipedia.org/wiki/MSXML](http://en.wikipedia.org/wiki/MSXML)

# c# - 将部分构造函数参数传递给城堡温莎容器

> ID：11726663
> 
> 赞同：9
> 
> 时间：2012-07-30T17:38:48.383
> 
> 标签：c#, .net, castle-windsor

我有构造函数

```
Foo(IColor c , int someNumber) 
```

我只在运行时知道一些数字，我想在解析过程中调用这个构造函数并传递`someNumber`值和`IColor`要自动解析的值。

像这样的东西：

```
container.Resolve<IFoo>(someNumber); 
```

有可能做到吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-31T06:52:24.283

您应该更喜欢 Typed Factory 而不是使用像服务定位器这样的容器。只需定义工厂接口：

```
public interface IFooFactory {
    IFoo Create(int somenumber);
} 
```

并将其注册为类型工厂：

```
container.Register(Component.For<IFooFactory>().AsFactory()); 
```

然后使用依赖注入注入工厂并使用它：

```
var foo = fooFactory.Create(desiredArgumentValue); 
```

有关更多信息，[请阅读温莎文档](https://github.com/castleproject/Windsor/blob/master/docs/typed-factory-facility-interface-based.md)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-30T17:57:07.027

是的，在匿名类型的实例中传递构造函数参数；属性名称必须与构造函数参数名称匹配：

```
IColor desiredColor = //whatever
int desiredNumber = //whatever else
IFoo foo = container.Resolve<IFoo>(new { c = desiredColor, somenumber = desiredArgumentValue }); 
```

如果您使用的是不支持匿名类型（或者即使您不支持）的旧版 C#，您可以对字典执行相同操作：

```
IColor desiredColor = //whatever
int desiredNumber = //whatever
Dictionary<string, object> arguments = new Dictionary<string, object>();
arguments.Add("c", desiredColor);
arguments.Add("somenumber", desiredNumber);
IFoo foo = container.Resolve<IFoo>(arguments); 
```

# c++ - 禁用部分代码的简单方法

> ID：11726665
> 
> 赞同：35
> 
> 时间：2012-07-30T17:39:01.857
> 
> 标签：c++, c

这不是解决特定问题的典型问题，而是一种大脑锻炼，但我想知道是否有人有解决方案。

在开发中，我们经常需要禁用或切换部分代码来检查不同的方法。为此，我们使用 comments 或`#defines`，但我最喜欢的是：

```
//*
[code here]
//*/ 
```

现在，当您仅删除第一个斜杠时，代码将被注释掉。

问题：有没有办法实现类似**的 if-else**代码切换？我试图找到它，但我总是遇到一些问题并且找不到有效的解决方案。

也许你知道任何类似的技巧？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-30T17:44:30.063

用包装代码可以解决`#if 0`问题，但您仍然需要编辑代码以启用/禁用它。这并不比仅使用评论块好多少。

请注意，您还可以使用定义的预处理器常量：

```
#ifdef ENABLE_TESTS
// code that you want to run ONLY during tests 
#endif 
```

现在，在构建代码时，您可以在构建过程中选择性地定义/取消定义此常量 - IDE/makefile/build script/command-line - 而无需编辑代码：

```
$ gcc -DENABLE_TESTS source.c 
```

我添加了这个答案来平衡所有早期的`#if 0`答案，但是这个来自已接受答案的结构是*对特定问题*的最佳答案：`/**/ foo(); /*/ bar(); /**/`。**请谨慎**使用此类评论技巧。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-07-30T17:39:38.497

```
#if 0
...disabled code here
#endif 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-07-30T18:12:08.683

我不确定我应该发布这个，因为我认为它不是“好代码”，但我承认我使用以下技术作为一种快速切换的方法，以便能够在两个小片段之间快速切换当我只是检查一些东西时的代码：

```
// in the following , foo() is active:
/**/ foo(); /*/ bar(); /**/ 
```

现在只需删除前面的星号之一：

```
// now bar() is active:
/*/ foo(); /*/ bar(); /**/ 
```

当然，这不应该超过“只是检查”阶段......

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-07-30T17:46:00.850

预处理器 if-else 也可以

```
#if 1
  // ... enabled if 1
#else
  // ... enabled if 0
#endif 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-07-30T17:41:07.523

使用一些预处理器逻辑来帮助你：

```
#if 0
    //code goes here
#endif 
```

享受

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-07-31T07:42:29.260

*有时我使用下面的技巧在两个懒惰*的评论之间切换。

```
//* <-- remove the first slash
[code block 1]
/*/
[code block 2]
//*/ 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-07-31T04:47:01.680

好吧，如果在最终确定之前需要禁用**一次**或**两次**的代码，我更喜欢使用 IDE 提供的热键将代码注释掉，然后再进行注释。是的，我需要先选择代码块，但我不喜欢每次我需要禁用一部分代码时，再包含一个调试变量/预处理器指令/if 语句。大多数情况下都发生这种情况。

另一方面，如果我需要在 2 个代码块之间**反复切换**以找到正确的东西，那么我使用`if (0)`/`if (1)`来禁用/启用代码块。

```
[code block 1] 
```

之后

```
if (0)
{
    [code block 1]
}
else
{
    [code block 2]
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-07-30T17:45:42.640

如果您在编译时进行检查，则可以使用 Gigi 的答案，这将有条件地不编译代码段。请注意，预处理器不了解变量、sizeof 或编译器处理的其他内容（因此使用类似的东西`4 == sizeof(int)`不会飞）

如果您想编译一些不应该运行的调试代码，您可以使用常规条件语句，例如

```
bool debugging = false;

// banana banana banana

if (debugging)
{
    // do a bunch of stuff here
} 
```

然后，您可以使用调试器通过分配`debugging`为 true 来访问跳过的部分。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-07-30T17:48:59.380

宏是做到这一点的方法..

```
#define COMPILE 

#ifdef COMPILE

//code to comment begins
cout<<"ha ha ha"<<endl;
//code to comment ends 

#endif 
```

要禁用代码，只需注释掉#define compile line

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-02-21T15:30:57.390

有时也需要同步打开/关闭分散在程序中的代码块。

受[格雷厄姆早先的这篇文章的](https://stackoverflow.com/a/11729736/3337845)启发，我做了这样的事情：

```
void doNothing(){}
#define DO_IF(flag, code) flag ? code : doNothing(); 
```

例如，这可以如下使用：

```
DO_IF(collectStats, recordStats());
DO_IF(collectStats, store(pullStat())); 
```

一个更好的：

```
#define DO_IF(flag,code) if( flag ) { code; } 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-07-30T21:17:30.870

```
1 ? foo() : bar(); 
```

这执行`foo()`. 改为`1`a`0`来执行`bar()`。

与涉及预处理器指令或注释的建议不同，这两个可能的分支都已编译，因此您可以充分利用编译器的语法检查。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-04-19T11:35:23.697

有时我使用这种方法只是为了不让无限序列的 if-endif 定义过度膨胀代码。

**调试.hpp**

```
#ifdef _DEBUG
    #define IF_DEBUG(x) if(x)
#else
    #define IF_DEBUG(x) if(false)
#endif 
```

**例子.cpp**

```
#include "debug.hpp"

int a,b, ... ,z;

...

IF_DEBUG(... regular_expression_here_with_a_b_z ...) {
    // set of asserts
    assert(... a ...);
    assert(... b ...);
    ...
    assert(... z ...);
} 
```

这并不总是有效的，因为编译器可能会警告您在此类禁用的代码块中使用了未使用的变量。但至少它具有更好的可读性，并且可以抑制未使用的变量警告，例如：

```
IF_DEBUG(... regular_expression_here_with_a_b_z ...) {
    // set of asserts
    assert(... a ...);
    assert(... b ...);
    ...
    assert(... z ...);
}
else {
    (void)a;
    (void)b;
    ....
    (void)z;
} 
```

这并不总是一个好主意，但至少有助于重组代码。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-07-30T17:42:14.387

以下逻辑应包含最简单的方法

```
if(isMode1)
{
    //Code for mode1
}
else
{
    //Code for other modes
} 
```

虽然我认为正确的方法是使用[PreProcessor Directives](http://msdn.microsoft.com/en-us/library/ed8yd1ha.aspx)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-08-02T01:03:00.317

在我的代码中，我喜欢在 main.cpp 文件中执行此操作：

```
#define CRAZY_EXPERIMENT

#ifdef TEST
#include "Test.h"
#elif ANOTHER_TEST
#include "AnotherTest.h"
#elif CRAZY_EXPERIMENT
#include "CrazyExperiment.h"
#else

int main(int argc, int * argv[]){
    runTheProgramLikeNormal();
}

#endif 
```

您看到的头文件都包含自己的`main()`. 根据第一个定义的内容，程序中只有一个 main() 函数`#define`。如果该语句被完全省略，它默认为您看到的规范 main() 函数。

这使得为​​我的程序编写只关注一两个组件的测试变得很容易。最好的部分是测试标头与我的代码完全隔离，因此不会错误地留下（甚至链接）测试代码。

# java - 从另一个表更新一个表并更新日志中的事务

> ID：11726668
> 
> 赞同：-1
> 
> 时间：2012-07-30T17:39:09.453
> 
> 标签：java, mysql

我有一个包含三个表的数据库`stud_first`，`stud_second`并且`stud_audit`两者都`stud_first`具有`stud_second`相同的列名，即

```
name,
stud-id,
age,
class
number_of-course_taken 
```

我想`stud_second`始终获取插入`stud_firs`t 的任何数据，同时`stud_audit`应该记录复制的数据，即学生姓名的日志以及他们从 t 复制或删除到`stud_firs`t的时间`stud_second`。中的列`stud_audit`应如下所示

```
name,
time copied 
```

我想`mysql`单独做或结合`java`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:59:04.583

不是一个完整的答案，但这可能足以让您朝着正确的方向开始......

```
DELIMTER $$
CREATE TRIGGER stud_first_ar 
AFTER INSERT ON stud_first
FOR EACH ROW
BEGIN
  INSERT INTO stud_second
  (`name`, `stud-id`, `age`,`class`,`number_of-course_taken`) 
  VALUES
  (NEW.`name`,NEW.`stud-id`,NEW.`age`,NEW.`class`,NEW.`number_of-course_taken`);

  INSERT INTO stud_audit (`name`, `time copied`) 
  VALUES (NEW.`name`,UTC_TIMESTAMP());

END$$ 
```

如果您不关心时区问题，您可以使用`NOW()`代替。`UTC_TIMESTAMP()`

包含破折号和空格的列名的选择是非标准的......这是允许的，但是当您避免这样做时通常会更容易。

我实际上只有一个审计表，而不是两个单独的审计表。它可以是带有附加列的表的副本，用于“操作”（识别更改是由于插入、更新还是删除）、“参与者”（识别导致操作的进程或用户，以及 UTC 时间戳。

您可能还需要考虑 UPDATE 和 DELETE 操作的“审核”触发器，其中您有`OLD.`可用的特殊“”记录。

同样，这不是一个完整的答案，但这可能足以让您朝着正确的方向开始。

# android - 在不创建自己的闹钟应用程序的情况下实现独特的闹钟

> ID：11726669
> 
> 赞同：0
> 
> 时间：2012-07-30T17:39:23.213
> 
> 标签：android, android-intent, android-alarms

我之前（[在这里](https://stackoverflow.com/questions/11480708/using-intent-action-set-alarm-to-allow-application-to-set-a-unique-alarm)）问过这个问题，但是它没有受到关注，我觉得这对那些选择着手处理类似问题的人来说真的很有用。

基本上，我正在实现一个为用户设置警报的应用程序，并且在我当前的尝试中，我正在使用 ACTION_SET_ALARM 意图来设置系统警报。现在这可以正常工作，但有一个例外：每当我设置警报时，它都会发出一个全新的警报，直到最终警报数据库完全充满冗余警报。

我试图弄清楚如何设置独特的闹钟，而不必完全设计我自己的闹钟应用程序。必须有一种方法可以做到这一点，只需利用原生 Android 闹钟类的某些功能即可。

到目前为止我采用的方法：

*   Android 开发者文档；

*   几乎所有关于这个主题的论坛帖子；

*   利用我通过搜索deskclock源代码找到的各种其他意图；

*   导入Alarms 类，setAlarm 类。

对我来说，最后剩下的选择是使用 AlarmManager 类，但这实际上是在重新创建闹钟类，我希望这个应用程序是通用的（它可以应用于大多数闹钟应用程序），而不必依赖它自己。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:54:59.150

> 必须有一种方法可以做到这一点，只需利用原生 Android 闹钟类的某些功能即可。

欢迎您提出您的意见，尽管您的意见可能需要伴随您自己的 Android 分支和您自己的移动设备系列。

首先，实际上并没有太多的“原生 Android 闹钟类”。它主要只是[一个`Intent`动作字符串和一系列附加键](http://developer.android.com/reference/android/provider/AlarmClock.html)。闹钟功能的实现取决于设备和用户，尽管许多人会简单地使用 Android 开源项目中的一个。

此时，您会遇到两个问题：

1.  Android开源项目的应用不支持你想要的

2.  没有其他应用程序必须支持您想要的，因为它超出了记录的行为范围

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:04:10.960

您需要做的是使用 AlarmManager 广播出一个脉冲。这是让脉搏熄灭的最可靠方法。让广播接收器监听该脉冲并根据需要传递给服务或启动 Activity。在那里，您将检查您的警报条件列表并查看它们是否已满足。请注意，此时您还可以检查时间戳。是的，AlarmManager 比您可以使用的任何其他服务都可靠得多。

# json - JSON Schema 所需属性

> ID：11726670
> 
> 赞同：1
> 
> 时间：2012-07-30T17:39:24.110
> 
> 标签：json, rest, schema, jsonschema

我试图找到类似的答案，但找不到，所以这里是：

在为一个json文档定义schema的时候，如果我们根据需要定义一个属性，这个是对输入数据的要求，还是对输入输出的要求？示例：假设我们有一个名为 Id 的属性。资源始终存在此 Id，但此 Id 由服务器生成。如果我想发布我的架构以供公众使用，并且我允许某人创建此资源的实例，是否应根据需要定义 Id？所需的属性是否只是 API 的使用者必须发送以创建资源的那些属性，还是资源始终具有的所有属性，包括服务器生成的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T12:24:40.183

如果您需要验证“id”键是否存在，那么您应该将其设为必需。您可以做的是有两种不同的模式：一种用于验证来自用户的模式（无“id”），另一种用于验证 api 调用，一种包括“id”键

# javascript - 识别哪个 span 标签触发了 div 中的 javascript 函数

> ID：11726671
> 
> 赞同：3
> 
> 时间：2012-07-30T17:39:26.140
> 
> 标签：javascript, jquery

我有一个 div html 元素，它内联设置了点击事件（不是我想要的方式，而是遗留代码）。看这里

```
<div class="myDiv" onclick="triggerJavascript();" id="myDiv">

<span id="text1">Text 1<span>
<span id="text2">Text 2<span>
<span id="text3">Text 3<span>
<span id="text4">Text 4<span>
<span id="text5">Text 5<span> 
```

我要做的是识别click事件来自test5的哪个span标签，然后不要执行triggerJavascript函数中的逻辑，否则在triggerJavascript中完成逻辑。

我该如何设置？我正在使用 jquery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:45:46.023

您可以使用[`event.target`](https://developer.mozilla.org/en/DOM/event.target)以访问该元素。然而，为了获得这个元素，你必须`onclick`稍微改变你的属性：

```
<div class="myDiv" onclick="triggerJavascript(event);" id="myDiv"> 
```

然后您可以`event`访问`triggerJavascript`：

```
function triggerJavascript(e){
   var element = e.target;
} 
```

另请参阅[此答案](https://stackoverflow.com/questions/9766232/is-there-a-way-stop-bubble-in-javascript-without-e-parameter/9767971#9767971)以获得更详细的解释为什么`event`需要。

[**演示**](http://jsfiddle.net/cfUWU/)；[**带有 text5 检查的演示**](http://jsfiddle.net/cfUWU/1/)：

```
<script>function triggerJavascript(e){        
    if(e.target.id === "text5")
        alert("text 5 hit");
    e.stopPropagation();
}
</script>
<div class="myDiv" onclick="triggerJavascript(event);" id="myDiv">
    <span id="text1">Text 1</span> <!-- closing tags -->
    <span id="text2">Text 2</span>
    <span id="text3">Text 3</span>
    <span id="text4">Text 4</span>
    <span id="text5">Text 5</span>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:46:24.777

您不能使用`onclick="triggerJavascript();"`，否则事件目标（单击的范围）将不会传递给事件处理程序。

由于您声明您使用的是 jQuery，请使用以下命令：

```
$('#myDiv').click(function(evt) {
    alert("The target is: " + evt.target.id);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:52:08.590

***HTML***

```
<div class="myDiv" onclick="triggerJavascript(event);" id="myDiv">
  <span id="text1">Text 1<span>
  <span id="text2">Text 2<span>
  <span id="text3">Text 3<span>
  <span id="text4">Text 4<span>
  <span id="text5">Text 5<span>
</div> 
```

***JavaScript***

```
<script type="text/javascript">
   function triggerJavascript(event) {
      // event.target will catch the clicked element
      if (event.target.id !== 'text5') {
          // do something
      }
   }
</script> 
```

## **[演示](http://jsfiddle.net/J7FGv/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T17:52:51.367

如果您无法更改 HTML，您可以尝试以下操作：

```
var triggerJavascript = (function(){
    var clicked;
    $("#myDiv span").click(function(e){
        clicked = $(e.target).attr("id");
    });
    return function() {
        if (clicked == "text5") {
            return;
        }
        //do something cool...
    }
})(); 
```

尽管我猜想，不能保证 jQuery click 处理程序在实际`triggerJavascript`逻辑之前执行，所以这可能并不总是正常工作。

# iphone - 以编程方式访问应用标识符前缀

> ID：11726672
> 
> 赞同：53
> 
> 时间：2012-07-30T17:39:33.313
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ipad

如何以编程方式访问 Bundle Seed ID/Team ID/App Identifier Prefix 字符串？（据我所知，这些都是一样的）。

我正在使用 UICKeychainStore 钥匙串包装器在多个应用程序中保存数据。这些应用程序中的每一个在其权利 plist 中都有一个共享的钥匙串访问组，并共享相同的配置文件。默认情况下，钥匙串服务使用 plist 中的第一个访问组作为保存数据的访问组。当我调试 UICKeychainStore 时，这看起来像“AS234SDG.com.myCompany.SpecificApp”。我想将访问组设置为“AS234SDG.com.myCompany.SharedStuff”，但我似乎无法找到如何以编程方式获取访问组的“AS234SDG”字符串，并且希望避免对其进行硬编码如果可能的话。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2015-02-25T08:57:46.260

Info.plist 可以有你自己的信息，如果你用 写一个值`$(AppIdentifierPrefix)`，它会在构建阶段被替换为真正的应用标识符前缀。

所以，试试这个：

在您的 Info.plist 中，添加有关应用标识符前缀的信息。

```
<key>AppIdentifierPrefix</key>
<string>$(AppIdentifierPrefix)</string> 
```

然后，您可以使用 Objective-C 以编程方式检索它：

```
NSString *appIdentifierPrefix =
    [[NSBundle mainBundle] objectForInfoDictionaryKey:@"AppIdentifierPrefix"]; 
```

和斯威夫特：

```
let appIdentifierPrefix =
    Bundle.main.infoDictionary!["AppIdentifierPrefix"] as! String 
```

注意`appIdentifierPrefix`以句号结尾；例如`AS234SDG.`

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-08-07T08:22:56.253

您可以通过查看`kSecAttrAccessGroup`现有 KeyChain 项的访问组属性（即 ）以编程方式检索捆绑种子 ID。在下面的代码中，我查找现有的 KeyChain 条目，如果不存在则创建一个。一旦我有一个 KeyChain 条目，我就会从中提取访问组信息，并返回访问组的第一个由“。”分隔的组件。（句点）作为捆绑种子 ID。

```
+ (NSString *)bundleSeedID {
    NSString *tempAccountName = @"bundleSeedID";
    NSDictionary *query = @{
        (__bridge NSString *)kSecClass : (__bridge NSString *)kSecClassGenericPassword,
        (__bridge NSString *)kSecAttrAccount : tempAccountName,
        (__bridge NSString *)kSecAttrService : @"",
        (__bridge NSString *)kSecReturnAttributes: (__bridge NSNumber *)kCFBooleanTrue,
    };
    CFDictionaryRef result = nil;
    OSStatus status = SecItemCopyMatching((__bridge CFDictionaryRef)query, (CFTypeRef *)&result);
    if (status == errSecItemNotFound)
        status = SecItemAdd((__bridge CFDictionaryRef)query, (CFTypeRef *)&result);
    if (status != errSecSuccess) {
        return nil;
    }
    status = SecItemDelete((__bridge CFDictionaryRef)query); // remove temp item
    NSDictionary *dict = (__bridge_transfer NSDictionary *)result;
    NSString *accessGroup = dict[(__bridge NSString *)kSecAttrAccessGroup];
    NSArray *components = [accessGroup componentsSeparatedByString:@"."];
    NSString *bundleSeedID = [[components objectEnumerator] nextObject];
    return bundleSeedID;
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-10-13T09:49:26.887

这是@David H 答案的 Swift 版本：

```
static func bundleSeedID() -> String? {
        let queryLoad: [String: AnyObject] = [
            kSecClass as String: kSecClassGenericPassword,
            kSecAttrAccount as String: "bundleSeedID" as AnyObject,
            kSecAttrService as String: "" as AnyObject,
            kSecReturnAttributes as String: kCFBooleanTrue
        ]

        var result : AnyObject?
        var status = withUnsafeMutablePointer(to: &result) {
            SecItemCopyMatching(queryLoad as CFDictionary, UnsafeMutablePointer($0))
        }

        if status == errSecItemNotFound {
            status = withUnsafeMutablePointer(to: &result) {
                SecItemAdd(queryLoad as CFDictionary, UnsafeMutablePointer($0))
            }
        }

        if status == noErr {
            if let resultDict = result as? [String: Any], let accessGroup = resultDict[kSecAttrAccessGroup as String] as? String {
                let components = accessGroup.components(separatedBy: ".")
                return components.first
            }else {
                return nil
            }
        } else {
            print("Error getting bundleSeedID to Keychain")
            return nil
        }
    } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-03T15:10:25.947

这是一个很好的问题，但要实现您想要做的事情，可能有一个不需要检索捆绑种子 ID 的解决方案。

从这篇[文章中](http://shaune.com.au/ios-keychain-sharing-data-between-apps/)，关于您正在使用的相同钥匙串包装器：

> 默认情况下，它会在编写时选择您的 Entitlements.plist 中指定的第一个访问组，并在未指定任何访问组时搜索所有访问组。

然后将在授予访问权限的所有组中搜索密钥。因此，为了解决您的问题，您可以将所有捆绑应用程序的访问组添加到您的 entitlements.plist 中，而不是使用“共享的东西”组，将 $(CFBundleIdentifier) 作为您的第一个钥匙串组（然后您的钥匙串包装器将在此写入组），你都准备好了

# domain-driven-design - 聚合根中实体的操作

> ID：11726673
> 
> 赞同：4
> 
> 时间：2012-07-30T17:39:37.123
> 
> 标签：domain-driven-design, aggregateroot

如果我设计了如下所示的 AR，您认为我应该如何更新订单行对象之一中的属性？

例如，我如何更改我的订单行之一的标题（示例问题）

这是订单聚合根

```
public class Order
{
    private readonly int id;
    private readonly Customer customer; // Customer is another Aggregate
    private readonly IList<OrderLine> orderLines;
    private readonly IOrderLineFactory orderLineFactory;

    public Order(int id, Customer customer, IOrderLineFactory orderLineFactory)
    {
        this.id = id;
        this.customer = customer;
        this.orderLines = new List<OrderLine>();
        this.orderLineFactory = orderLineFactory;
    }

    public void AddOrderLine(Item item, int quantity)
    {
        OrderLine orderLine = orderLineFactory.Create(this, item, quantity);
        orderLines.Add(orderLine);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:18:23.540

```
Order order = orderRepository.find(orderId);
order.changeTitle(orderLineId, "New title"); 
```

其中 'orderLineId' 可以是行号或索引或其他东西，只要它是特定于聚合根的（不是全局 id）。请参阅[此](https://stackoverflow.com/a/7310984/625332)对类似问题的答案。

# php - 修改 Wordpress 函数 get_pagenum_link

> ID：11726674
> 
> 赞同：0
> 
> 时间：2012-07-30T17:39:37.800
> 
> 标签：php, wordpress, wordpress-theming

有没有可能我可以更改以下链接：

> xxx.com/page/2

至

> xxx.com/?paged=2

这里是当前功能：

```
function get_pagenum_link($pagenum = 1) {
    global $wp_rewrite;

    $pagenum = (int) $pagenum;

    $request = remove_query_arg( 'paged' );

    $home_root = parse_url(home_url());
    $home_root = ( isset($home_root['path']) ) ? $home_root['path'] : '';
    $home_root = preg_quote( trailingslashit( $home_root ), '|' );

    $request = preg_replace('|^'. $home_root . '|', '', $request);
    $request = preg_replace('|^/+|', '', $request);

    if ( !$wp_rewrite->using_permalinks() || is_admin() ) {
        $base = trailingslashit( get_bloginfo( 'url' ) );

        if ( $pagenum > 1 ) {
            $result = add_query_arg( 'paged', $pagenum, $base . $request );
        } else {
            $result = $base . $request;
        }
    } else {
        $qs_regex = '|\?.*?$|';
        preg_match( $qs_regex, $request, $qs_match );

        if ( !empty( $qs_match[0] ) ) {
            $query_string = $qs_match[0];
            $request = preg_replace( $qs_regex, '', $request );
        } else {
            $query_string = '';
        }

        $request = preg_replace( "|$wp_rewrite->pagination_base/\d+/?$|", '', $request);
        $request = preg_replace( '|^index\.php|', '', $request);
        $request = ltrim($request, '/');

        $base = trailingslashit( get_bloginfo( 'url' ) );

        if ( $wp_rewrite->using_index_permalinks() && ( $pagenum > 1 || '' != $request ) )
            $base .= 'index.php/';

        if ( $pagenum > 1 ) {
            $request = ( ( !empty( $request ) ) ? trailingslashit( $request ) : $request ) . user_trailingslashit( $wp_rewrite->pagination_base . "/" . $pagenum, 'paged' );
        }

        $result = $base . $request . $query_string;
    }

    $result = apply_filters('get_pagenum_link', $result);

    return $result;
} 
```

来自 wordpress-includes/link-template.php

如何修改函数而不在核心中编辑它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:00:18.880

从源头上看，您似乎应该能够禁用永久链接以使其进入这样的页面。

```
//start of function code 
// ...

if ( !$wp_rewrite->using_permalinks() || is_admin() ) {
    $base = trailingslashit( get_bloginfo( 'url' ) );
    if ( $pagenum > 1 ) {
        $result = add_query_arg( 'paged', $pagenum, $base . $request );
    } else {
        $result = $base . $request;
    }
}
//rest of function code 
// ... 
```

[文档`add_query_arg()`](http://codex.wordpress.org/Function_Reference/add_query_arg)

# javascript - 如何隐藏某些孩子（）。的父母（）。分区？

> ID：11726678
> 
> 赞同：1
> 
> 时间：2012-07-30T17:39:57.030
> 
> 标签：javascript, jquery, html

我只想`div.card1`在用户单击我制作的选择菜单时显示

```
<table id="flowerTheme">
  <tr>
    <td>
      <div class="card1">
         <div class="guess"><a href="#" id="flower1" class="quickFlipCta"><img src="Test Pictures/QuestionMark.gif" /></a></div>
         <div class="remember"><a href="#" class="quickFlipCta"><img src="Test Pictures/flower.gif" /></a></div>
      </div>
    </td>
    <td>
      <div class="card2">
         <div class="guess"><a href="#" id="flower1" class="quickFlipCta"><img src="Test Pictures/QuestionMark.gif" /></a></div>
         <div class="remember"><a href="#" class="quickFlipCta"><img src="Test Pictures/flower.gif" /></a></div>
      </div>
    </td>
  </tr>
</table> 
```

我有一个功能可以在用户单击图像时切换“选定”类。以下工作完美：

```
if($('.flowerThemePic').hasClass('selected') && $('.sixCardLayout').hasClass('selected')) {
    $('#flowerTheme').css('display', 'inline'); 
```

但是，正如我之前所说，我希望`card2`不必显示。我试过了：

```
if($('.flowerThemePic').hasClass('selected') && $('.sixCardLayout').hasClass('selected')) {
        $('#flowerTheme').not('.card2').css('display', 'inline') 
```

但这没有任何作用。我也试过：

```
if($('.flowerThemePic').hasClass('selected') && $('.sixCardLayout').hasClass('selected')) {
        $('#flowerTheme').find('div').not('.card2').css('display', 'inline') 
```

但这隐藏了两张牌。什么是正确的显示方法`card1`而不是`card2`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:44:51.543

关于什么 ：

```
$('#flowerTheme .card2').hide(); 
```

?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T17:45:10.777

```
$('#flowerTheme').css('display', 'inline');
$('.card2').hide(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T17:54:13.373

首先，在我看来`card1`，`card2`应该是`id`，而不是`class`。不同之处在于 ID 应该是唯一的，而类应该被重用。由于您正在使用`card1`并`card2`唯一标识这些卡，因此它们应该是 ID。此外，它们*可能*还需要一个类：可能`class="card"`，所以它们可以被称为一个组。

其次，我认为你应该使用 CSS，而不是 jQuery 来进行实际的隐藏/显示。考虑一下：

```
table#flowerTheme.selection-made :not(.selected) .card
{
    display: none;
} 
```

这将隐藏任何`class="card"`没有任何父元素的元素`class="selected"`。注意`.selection-made`on `#flowerTheme`- 这允许默认情况下显示每张卡片，但是当有人点击时，你会这样做`$('#flowerTheme').addClass('selection-made');`（`$(this).addClass('selected');`假设你正在使用`$(wherever selected goes).click()`它）。从您的问题中不清楚到底在哪里`selected`添加了类，但我建议这样做。它更容易维护，jQuery 需要做的工作更少，它为您提供了一种非常简单的方法来扩展卡片列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T17:58:56.857

您可以编写一个javascript函数来隐藏孩子...

```
function hideSpecificChildren(childClass){
     var child = document.getElementByClass(childClass);
     if(tab.style.display == "block") {
        tab.style.display = "none";
     }else {
    tab.style.display = "block";
     }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T18:11:55.973

试试这个：

```
$('#flowerTheme .card2').css('display','none').parent().show(); 
```

**[演示](http://jsfiddle.net/XBgUx/3/)**

**或者**

```
$('#flowerTheme .card2').hide().parent().show(); 
```

**[演示](http://jsfiddle.net/XBgUx/4/)**

# java - Future.get() 不返回所有结果

> ID：11726679
> 
> 赞同：0
> 
> 时间：2012-07-30T17:40:03.963
> 
> 标签：java, multithreading, executorservice, future

例如，我正在创建 15 个可调用任务并提交它们：

```
List<Future<MyResult>> futures = new ArrayList<Future<MyResult>>();
List<MyResult> myResults = new ArrayList<MyResult>();

for(int i = 1; i <= 15; i++){
    Callable<MyResult> task = new MyProcessor(//parameters);
    Future<MyResult> future = executorService.submit(task);
    futures.add(future);//used to iterate over to call get() to collect results in next for loop
} 
```

然后我收集 15 个 MyResult 对象：

```
for(Future<MyResult> future : futures){
  try {
    MyResult myResult = future.get();
    processorResults.add(myResult);
    } catch (InterruptedException e) {
      //...
    } catch (ExecutionException e) {
      //...
    }
} 
```

问题是：我有时会得到少于 15 个对象，而不是从 get() 方法中获取所有 15 个 MyResult 对象。有时 12 有时 10 有时甚至更少，有时全部 15。

我的印象是`get()`方法是一个阻塞调用，将等待所有 15 个线程返回各自的结果，但看起来我错过了其中的一些并继续前进。我做错了什么？我没有正确收集结果/等待结果吗？当任何 MyProcessor 任务抛出 ERROR 时会发生这种情况吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T17:42:10.020

这可能意味着您的某些工作引发了异常。很难从您的代码中分辨出来，但`ExecutionException`除了捕获和忽略它之外，您还需要做一些事情。

`Future.get()`throws`ExecutionException`当`Callable`您提交的`RuntimeException`从`call()`方法中抛出一个。`MyResult`只有当方法正常返回时，它才会返回您的`return`. 您可以通过执行以下操作获取引发的异常：

```
} catch (ExecutionException e) {
    // account for the throw here, the original exception is in e.getCause()
    // log it, count it, or ...
    logger.error("Job threw exception: " + e.getCause());
} 
```

> 我的印象是 get() 方法是一个阻塞调用，将等待所有 15 个线程返回各自的结果，

这是对的。当您调用它时`future.get()`，它将阻塞，直到作业完成 - 通过抛出异常或返回。如果正在运行的线程`get()`被中断，那么`get()`抛出一个`InterruptedException`也应该被捕获而不是被忽略的线程。

# java - 通过小程序访问 Javascript 函数

> ID：11726685
> 
> 赞同：0
> 
> 时间：2012-07-30T17:40:23.887
> 
> 标签：java, javascript

我正在尝试将我的 Java Applet 中的一些值传递给 javascript 函数

```
JSObject.getWindow(ui).eval("foo(123)"); 
```

`ui`: 我的FormMain。

我的名为“foo”的javascript函数不运行会发生什么？我的“foo”函数只有一个警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:29:41.433

你的函数放在哪里？也许它属于另一个执行上下文。当您调用“eval”时，它会在全局上下文中执行。因此，请提供您的 javascript 函数所在的确切位置。

# java - 解压saz文件java

> ID：11726688
> 
> 赞同：0
> 
> 时间：2012-07-30T17:40:43.750
> 
> 标签：java

我正在查看 java 文档，似乎没有办法专门解压缩 saz 文件，这些文件是由网络代理 Fiddler 创建的会话存档。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:48:53.137

据此[，](http://www.file-extensions.org/saz-file-extension)它是具有特定文件扩展名的常规 ZIP。使用[java.util.zip.ZipFile](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipFile.html#ZipFile%28java.io.File%29)。

关于这个扩展没有特定的方法——我认为对每个可能的扩展都没有特定的方法是有道理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:10:26.577

这应该可以解决问题

saz 文件是常规的 zip 文件

```
public static boolean unzipFiles(String srcDirectory, String srcFile, String destDirectory)
{
    try
    {
        //first make sure that all the arguments are valid and not null
        if(srcDirectory == null)
        {
            System.out.println(1);
            return false;
        }
        if(srcFile == null)
        {
            System.out.println(2);
            return false;
        }
        if(destDirectory == null)
        {
            System.out.println(3);
            return false;
        }
        if(srcDirectory.equals(""))
        {
            System.out.println(4);
            return false;
        }
        if(srcFile.equals(""))
        {   
            System.out.println(5);
            return false;
        }
        if(destDirectory.equals(""))
        {
            System.out.println(6);
            return false;
        }
        //now make sure that these directories exist
        File sourceDirectory = new File(srcDirectory);
        File sourceFile = new File(srcDirectory + File.separator + srcFile);
        File destinationDirectory = new File(destDirectory);

        if(!sourceDirectory.exists())
        {
            System.out.println(7);
            return false;
        }
        if(!sourceFile.exists())
        {
            System.out.println(sourceFile);
            return false;
        }
        if(!destinationDirectory.exists())
        {
            System.out.println(9);
            return false;
        }

        //now start with unzip process
        BufferedOutputStream dest = null;

        FileInputStream fis = new FileInputStream(sourceFile);
        ZipInputStream zis = new ZipInputStream(new BufferedInputStream(fis));

        ZipEntry entry = null;

        while((entry = zis.getNextEntry()) != null)
        {
            String outputFilename = destDirectory + File.separator + entry.getName();

            System.out.println("Extracting file: " + entry.getName());

            createDirIfNeeded(destDirectory, entry);

            int count;

            byte data[] = new byte[BUFFER_SIZE];

            //write the file to the disk
            FileOutputStream fos = new FileOutputStream(outputFilename);
            dest = new BufferedOutputStream(fos, BUFFER_SIZE);

            while((count = zis.read(data, 0, BUFFER_SIZE)) != -1)
            {
                dest.write(data, 0, count);
            }

            //close the output streams
            dest.flush();
            dest.close();
        }

        //we are done with all the files
        //close the zip file
        zis.close();

    }
    catch(Exception e)
    {
        e.printStackTrace();
        return false;
    }

    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:49:19.877

[这个页面](http://fiddler.wikidot.com/saz-files)，通过谷歌搜索“saz文件”找到，说：

> SAZ 文件只是特殊格式的 .ZIP 文件。如果将 .SAZ 文件重命名为 .ZIP，则可以使用标准 ZIP 查看工具打开它进行查看

所以它们只是具有不同扩展名的 zip 文件。完全像解压缩 zip 文件一样解压缩它们。

# sql - 更新/插入时的 sql 触发器

> ID：11726689
> 
> 赞同：-3
> 
> 时间：2012-07-30T17:40:51.843
> 
> 标签：sql, triggers

> **可能重复：**
> [SQL Server：如何创建只影响已更新/插入的行的触发器？](https://stackoverflow.com/questions/9065570/sql-server-how-do-i-make-a-trigger-that-only-affects-the-row-that-was-updated-i)

```
 Table User
  Userid(number)
  is_updated(char)

  Table Version
  Version_number(number)
  userid(number) 
```

现在，如果我在版本表中插入/更新值，我想使用触发器更新 is_updated 列，但是如何获取更新/插入行的用户 ID？

这是第一次使用触发器有人可以帮助我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:02:41.053

[在发布这样的问题之前，您可能应该查看有关CREATE TRIGGER](http://msdn.microsoft.com/en-us/library/ms189799%28v=sql.100%29.aspx)语句的在线书籍文档。触发器只不过是一个特殊的存储过程，它继承了两个特殊的虚拟表，*inserted*和*deleted*。所以尝试这样的事情：

```
create trigger dbo.version_TR01
on             dbo.version
for insert, update
as
begin

  --
  -- make sure everybody has a row in the user table
  --
  insert dbo.[user]( user_id , is_updated )
  select i.user_id , 'F'
  from inserted i
  where not exists ( select *
                     from dbo.[user] u
                     where u.user_id = i.user_id
                   )

  --
  -- mark everybody as updated
  --
  update dbo.[user]
  set is_updated = 'T'
  from dbo.[user] u
  join inserted   i on i.user_id = u.user_id

end 
```

那应该差不多了。

# signalr - 管理中心客户端请求的状态服务器端

> ID：11726690
> 
> 赞同：1
> 
> 时间：2012-07-30T17:41:00.113
> 
> 标签：signalr, signalr-hub

我创建了一个非常基本的集线器，我通过一个组获取`IHubContext`并调用我的 javascript 客户端方法*，因此无论他们有多少不同的连接，我总是可以将数据推送给同一个用户*，我将一些文本传递给和该文本附加在浏览器的多行文本框中。

这一切都非常好。该线程通常会运行长操作，通常使用集线器上下文附加有关操作状态的文本报告以调用客户端。

但是，我希望满足有人关闭浏览器然后稍后返回带有文本框的页面的情况。

现在，他们将开始从他们连接的操作点开始接收文本。如何从客户端向服务器发送请求以从操作开始时检索所有文本？

我的想法是有一个`StringBuilder`对象，我将每一行与我发送到客户端集线器的文本相同。

然后在连接集线器时，从客户端调用服务器端函数，该函数请求可以从`StringBuilder`对象中获取的全文`ToString();`

`StringBuilder`但是集线器如何知道从仍在执行的线程中从哪里获取对象呢？

或者

如果有办法将其推送到客户端，我如何在执行线程中知道用户已连接并将其发送`StringBuilder` `ToString()`给用户？

注意。我不想每次都重新发送完整的字符串！只有当用户刚刚连接并需要赶上时。

我认为了解如何做到这一点将有助于了解如何在集线器之外的服务器上处理 signalR 和状态。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T22:19:54.843

好吧，对于初学者来说，您可能应该将这些数据存储在某种持久性存储中（而不仅仅是在内存中的 StringBuilder 中）。尽管如此，您真正需要做的是存储带有时间戳的单个字符串。然后只需记住您最后一次看到逻辑用户并转储自他们首次连接到您的集线器时的所有条目。

JabbR 是 SignalR 的旗舰测试床应用程序，它执行类似的操作，只是它使用消息 ID 并询问自客户端收到的最后一个消息 ID 以来的所有消息 ID。[查看聊天中心的 GetPreviousMessages](https://github.com/JabbR/JabbR/blob/2ba7231bd6ffc67ebbbfb4595668461ce857bc36/JabbR/Hubs/Chat.cs#L336)了解详情。

# c# - 返回上一页

> ID：11726691
> 
> 赞同：0
> 
> 时间：2012-07-30T17:41:06.330
> 
> 标签：c#, asp.net

如果用户正在编辑并单击取消，我如何将他们返回到编辑之前的页面？不仅仅是让他们回到上一页，而是让他们回到他们决定编辑之前的状态。

如果我需要我更彻底，请询问。

我使用了这段代码，但它只是引用了上一页。我以前有一个关于问题的帖子，但找不到解决方案。

当用户单击添加新行按钮时，它会在编辑和取消表单中打开新行。如果用户单击取消它会自动将该行添加为空白，我不希望我希望删除该行。我在想是否可以在创建新行之前将其设置为返回其原始形式，否则会以相同的方式工作。

```
 protected void gv_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "Insert") //- this is needed to explain that the INSERT command will only work when INSERT is clicked
        {
            dbcon.Execute("INSERT INTO PROJ_ASP (TRANS_CD) VALUES('')", "ProjectASPConnectionString");

            gv.DataBind();
            gv.EditIndex = gv.Rows.Count - 1;
            gv.DataBind();

        }
    }
    protected void gv_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
  {

        ///When cancel is clicked, redirect page to orginal page

      Response.Redirect("Default.aspx"); 
```

我实际上认为我明白我的问题是什么，我设置它的方式是用户单击 INSERT 时，它会自动将一个空白行添加到数据库中，无论它是否为空。我该怎么做才能让它在所有行都完成之前将其插入数据库？我假设它是我将放在 gv_RowCommand 下的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:44:58.860

您可以使用[ASP.NET ViewState](http://msdn.microsoft.com/en-us/library/bb386448.aspx)属性来跟踪您的状态

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:54:26.603

我不知道这是否可以在 asp.net 中工作，但我在 PHP 中进行。发回上一页。

试试这个，不保证

```
<asp:Button ID="CancelButton" Text="Cancel" PostbackUrl="PreviousPage.aspx" /> 
```

并查看是否可以使用发布的值重新填充表单。

我遇到过的最简单的解决方案是使用 asp.net`<asp:MultiView />`或类似的东西

# ruby-on-rails - Rails CanCan 和 Scoped attr_protected

> ID：11726697
> 
> 赞同：0
> 
> 时间：2012-07-30T17:41:32.467
> 
> 标签：ruby-on-rails, cancan

我有一个使用 CanCan 1.6 的 Rails 3.1 应用程序。我正在使用`attr_protected ... :as => :api`. 我想使用`load_and_authorize_resource`, 但也剥离受保护的字段。有任何想法吗？

编辑：这是我目前的解决方法：

在orders#new 中，我跳过`load_resource`并只是授权。我使用适当的范围直接初始化新订单：

`@order = Order.new(params[:order], :as => :api)`

然后手动设置用户：

`@order.user = current_user`

当然不是什么大不了的事，但不如让 CanCan 本地加载和授权，就像我在其他地方做的那样优雅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:12:52.157

通常，如果您只有几个受保护的字段要提交，那么将值从参数哈希中提取并手动分配会更容易。

```
##save the parameter and delete it from the hash
role      = params[:employee][:role_id]
params[:employee].delete("role_id")

##create object and assign parameter manually
@employee = Employee.new(params[:employee])
@employee.role_id = role 
```

如果你有很多属性，你可以自动化手动分配。

```
##list protected attributes and create new employee
attr = Employee.protected_attributes ##["id", "type", "name"]

@employee = Employee.new

##loop through params and manually send value
params[:employee].each do |p|
    @employee.send("#{p}=", params[:employee]["#{p}"])
end 
```

没有时间完全测试第二部分，但这应该会让你朝着正确的方向前进。

# ruby-on-rails - 如何将 image_tag 与远程 URL 一起使用？

> ID：11726698
> 
> 赞同：2
> 
> 时间：2012-07-30T17:41:33.347
> 
> 标签：ruby-on-rails, paperclip

我有一个 rake 任务，它将我从 API 缓存的图像上传到我的 S3 存储桶。在我看来，我尝试输出图像，但它似乎不起作用。我想要做的是将图像缓存到我的文件系统中，将它们发送到 S3，我想使用我的 S3 存储桶中的图像位置，而不是我的文件系统。我的代码如下所示：

在我的 rails 控制台中，我这样做只是为了检查图像 url：

```
1.9.3p125 :002 > a.image
 => http:://s3-eu-west-1.amazonaws.com/ramen-hut/pictures/1.jpg?1343645629 
1.9.3p125 :003 > 
```

我在我的应用程序中使用 Paperclip，是否应该将 url 添加为“http:://”？显得比较诡异。我的 index.html.erb 中的代码如下所示：

```
<li>
  <%= movie.title %>
  <%= image_tag movie.image.url %>
</li> 
```

但这会产生以下html：

```
<li>
  Cowboy Bebop
  <img alt="1" src="/assets/http:://s3-eu-west-1.amazonaws.com/ramen-hut/pictures/1.jpg?1343645629">
</li> 
```

为什么它在我的 URL 前包含“/assets”/？

我按照教程配置了 Paperclip 为我的欧洲 S3 存储桶设置图像 url。所以在我的 environment.rb 中，我有这个：

```
#Signature correction for Paperclip and AWS
AWS::S3::DEFAULT_HOST = "s3-eu-west-1.amazonaws.com" 
```

我的初始化器目录中有一个 aws-signature.rb 文件，其中包含以下代码：

```
#Makes Paperclip use the correct URL for images
Paperclip.interpolates(:s3_eu_url) { |attachment, style|
  "#{attachment.s3_protocol}://s3-eu-west-1.amazonaws.com/#{attachment.bucket_name}/#{attachment.path(style).gsub(%r{^/}, "")}"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:45:39.467

URL 存在问题：`http:://`而不是`http://`image_tag 不知道它是绝对 URL。

您如何生成这些 URL？宝石还是您自己的代码？

# python - 鼠标悬停在 qgraphicsitem pyqt4 的绘制形状上

> ID：11726700
> 
> 赞同：1
> 
> 时间：2012-07-30T17:41:44.733
> 
> 标签：python, qt4, pyqt4, qgraphicsitem

我有一个带有绘制形状的 QGraphicsItem（下图）。如何检测鼠标指针是否在圆圈、文本或绿色矩形上？所有形状都是使用painter 方法绘制的（即：painter.drawText()）。

![在此处输入图像描述](../Images/059c766614836a0f109f7927eddc3155.png)

是否可以使用 QGraphicsItem 使其父级（也是 QGraphicsItem）并使用悬停鼠标事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:24:50.847

您建议的解决方案是最简单的方法 - 而不是从单个 GraphicsItem 绘制所有圆圈，使每个圆圈成为自己的 GraphicsItem 并使它们成为原始 GraphicsItem 的子级。然后，您可以为每个圆圈单独处理鼠标悬停事件。

# windows - slime-fancy 未使用 emacs sbcl slime windows 配置加载

> ID：11726712
> 
> 赞同：2
> 
> 时间：2012-07-30T17:42:21.103
> 
> 标签：windows, emacs, slime, sbcl

我有 sbcl 在 emacs 24.1 中工作的粘液，但无法打开粘液 repl。

*我可以使用 Mx slime 与劣质 lisp*缓冲区中的 sbcl 建立连接，但我无法调用 slime-repl 或在编辑 lisp 文件时获得漂亮的 lisp 自动缩进，即使我正在加载 slime-fancy contrib 。 emacs。我在启动期间没有收到任何错误消息。

当我尝试 Mx slime-repl 时，我得到 [No match]。

我的 .emacs 文件：

```
(setq inferior-lisp-program "sbcl")
(add-to-list 'load-path "c:/home/bin/emacs/site-lisp/slime/")
(require 'slime)
(require 'slime-autoloads)
(slime-setup '(slime-fancy)) 
```

我使用这种方法进行安装：

[http://www.pchristensen.com/blog/articles/installing-sbcl-emacs-and-slime-on-windows-xp](http://www.pchristensen.com/blog/articles/installing-sbcl-emacs-and-slime-on-windows-xp)

我注意到一种模式，几乎我用 Python 和 Clojure 尝试的所有东西都按照描述的方式工作，而我尝试的几乎所有东西都与常见的 lisp 工作有关。我也尝试过 eclipse 的 cusp。如果 windows 中的 common lisp 有更新的东西，我愿意尝试另一种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:03:21.123

在玩了 Sujoy 的答案并将其修剪以使其正常工作后，我意识到我最初的问题是由该`(require 'slime)`声明引起的。以下 .emacs 文件让 slime repl 按预期打开。

```
(setq inferior-lisp-program "sbcl")
(require 'slime-autoloads)
(slime-setup '(slime-fancy)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:12:57.137

只有 'slime-fancy 不会设置 REPL。试试下面的代码片段。将其放入缓冲区并进行评估。当然，您也不需要设置 hyperspec 根，但这很有帮助 :)

编辑：错过了我正在使用的自动加载，所以这是完整的配置。

键绑定（使用次要模式键映射，可以很容易地使用全局映射）

```
(define-key my-keys-map (kbd "<f5>") 'slime) 
```

自动加载

```
;; slime mode
(autoload 'slime "my-slime" "Slime mode." t)
(autoload 'slime-connect "my-slime" "Slime mode." t) 
```

这是我的粘液.el

```
(provide 'my-slime)
(eval-after-load "slime"
     (setq slime-lisp-implementations
     (slime-setup '(slime-asdf
                    slime-autodoc
                    slime-editing-commands
                    slime-fancy
                    slime-fontifying-fu
                    slime-fuzzy
                    slime-indentation
                    slime-mdot-fu
                    slime-package-fu
                    slime-references
                    slime-repl
                    slime-sbcl-exts
                    slime-scratch
                    slime-xref-browser))
     (slime-autodoc-mode)
     (setq slime-complete-symbol*-fancy t
           slime-complete-symbol-function 'slime-fuzzy-complete-symbol
           slime-when-complete-filename-expand t
           slime-truncate-lines nil
           slime-autodoc-use-multiline-p t)
     (add-hook 'lisp-mode-hook (lambda () (slime-mode t)))))
(require 'slime) 
```

# c# - 使用数据注释检查特定的电子邮件地址

> ID：11726717
> 
> 赞同：2
> 
> 时间：2012-07-30T17:42:53.013
> 
> 标签：c#, asp.net, regex

我将如何检查用户输入特定电子邮件地址的注册？例如，我希望我的注册表单只允许这些电子邮件地址：

*   @gmail.com
*   @yahoo.com
*   @live.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:49:40.410

像这样：

```
[RegularExpression( @"@(gmail|yahoo|live)\.com$", ErrorMessage = "Invalid domain in email address. The domain must be gmail.com, yahoo.com or live.com")]
public string EmailAddress { get ; set ; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:52:40.437

你甚至不需要正则表达式；您可以使用 split() 函数获取“@”之后的电子邮件地址部分，并根据您的允许提供商列表进行检查。

这本身并不能保证它是一个格式正确的电子邮件地址（可能需要一个正则表达式，而且有点复杂），但它会确保该地址以您列表中的一个域结尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:47:38.473

您可以使用 RegularExpressionValidator 控件和表达式来查找电子邮件域。如果您还没有样本，可以在[http://www.regexplib.com](http://www.regexplib.com)上找到样本。

您可能还需要一个执行相同服务器端检查的 CustomValidator。如果禁用 Javascript，用户可以绕过您的 RegularExpressionValidator。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T17:50:29.113

没有内置但您可以使用`[RegularExpression]`。您可以编写自定义`EmailAttribute`派生自`RegularExpressionAttribute`.

一个很好的实现在[这里完成](http://weblogs.asp.net/scottgu/archive/2010/01/15/asp-net-mvc-2-model-validation.aspx)

您可以使用以下正则表达式来检查电子邮件：

> ^[a-z0-9_\+-]+(\.[a-z0-9_\+-]+) *@[a-z0-9]+(\.[a-z0-9]+)* \. ([az]{2,4})$

除此之外，您可以拥有[数据注释扩展](http://dataannotationsextensions.org/Email/Create)，它具有`[Email]`允许验证电子邮件地址的属性。

# reverse-engineering - 简单程序反编译查询

> ID：11726724
> 
> 赞同：1
> 
> 时间：2012-07-30T17:43:29.590
> 
> 标签：reverse-engineering

这是一个简单的程序，我粘贴了为 x86_64 生成的程序集以及 C 源代码。

```
int main()
{
  4004b4:   55                      push   %rbp
  4004b5:   48 89 e5                mov    %rsp,%rbp
    int array[10];

    array[0] = 5;
  4004b8:   c7 45 d0 05 00 00 00    movl   $0x5,-0x30(%rbp)

    return 0;
  4004bf:   b8 00 00 00 00          mov    $0x0,%eax
} 
```

我知道 IDA-pro、dcc 等程序反编译工具，但我不知道这些程序如何计算出数组边界等细节。更一般地说，有没有办法弄清楚*只看组装*，

`movl $0x5,-0x30(%rbp)`实际上是对`int array[10]`吗？我可以看到，如果程序是用`-g`带有调试信息的 ie 编译的，那么`objdump`确实会显示源代码，我们可以弄清楚。当二进制文件缺少调试细节时，商业反编译器如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:23:36.890

I don't think you can figure that out in your example. There's too little code in that function.

If it were a bigger function that used the array multiple times you might find some tips pointing to that. Like base address + different offset popping in and out through out the generated machine code.

Weak assumption:

```
for (i = 0; i < 10; i++)
        array[i] = i * 2; 
```

This would allow you to assume, by looking at the generated code, that you're dealing with an array of 10 ints.

Stronger case:

```
int *array = NULL;
array = malloc(10 * sizeof *array);
if (array == NULL)
        return ENOMEM;
for (i = 0; i < 10; i++)
        array[i] = i * 2; 
```

This would make the fact that you're dealing with an array of 10 ints a certainty.

In your case you only have the raw information: the function allocated 10 * sizeof(int) bytes on the stack. (Which actually depends on the optimizer as well, but that's another topic).

So it's all about the heuristics and code pattern recognition algorithms that programs like IDA use to feed you as much reliable information as possible.

The rest is up to the reverser's experience.

# objective-c - 如何合并+alloc和-init？

> ID：11726726
> 
> 赞同：2
> 
> 时间：2012-07-30T17:43:32.803
> 
> 标签：objective-c, methods, nsobject

我正在为 NSObject 的子类编写一个方法，它合并了常见的 NSObject 方法“+alloc”和“-init”。这是为了在创建类的实例时节省时间。

（这个子类也是一个抽象类，就像是子类化NSObject的替代品，所以方法必须兼容子类化。）

对于方法“make”，这是最好的写法吗：

```
+(id)make
{
    id newObject = [[self.class alloc] init];

    return newObject;
} 
```

如果有更好的方法，那会是什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T17:45:20.843

更好的方法是只使用`+new`已经存在的 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T17:45:31.867

你可以使用`[self.class new]`与调用相同的东西`[[self.class alloc] init]`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T17:45:57.070

我发现`new`作品真的很好。

```
SomeObject *object = [SomeObject new]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T23:01:13.427

为了简单起见：

```
id newObject = [[self alloc] init]; 
```

您可以将其替换为：

```
id newObject = [self new]; 
```

但请记住，在许多已定义的对象中，您可以使用其他初始化程序，那么您需要使用：

```
...alloc] init...] 
```

结构体。

# vb.net - 文本框输入键 - 主面板中的子面板

> ID：11726729
> 
> 赞同：0
> 
> 时间：2012-07-30T17:43:55.027
> 
> 标签：vb.net

我遇到了这种情况的问题（见标题）。我在一个大面板中有 6 个子面板。我制作了一个继承自主文本框的 TextBox 类。我正在尝试使用 KeyPressed 事件处理程序来处理 Enter 键。当用户按下 Enter 键时，它会从子面板内的一个 TextBox 移动到下一个子面板。到目前为止，我已经让 Enter Key Event 处理程序为焦点所在的面板工作，而无需跳转到下一个面板。

下面是我用来控制动作的子程序。问题是我无法从一个子面板跳到另一个子面板。任何帮助，将不胜感激！

```
Protected Shared Sub NextControl(ByVal tControl As Control, ByVal Direction As Boolean)

    Dim pControl As Control = tControl.TopLevelControl
    tControl = pControl.GetNextControl(tControl, Direction)

    If Direction = False Then
        Dim tParent As Control
        While TypeOf tControl Is UserControl
            tParent = tControl.Parent
            tControl = pControl.GetNextControl(tControl, Direction)
            If tControl.Parent Is tParent Then
                Exit While
            End If
        End While
    End If

    If tBox_P00.ControlNesting > 0 Then
        'Dim i As Integer
        pControl = tControl.Parent
        For i As Integer = 0 To tBox_P00.ControlNesting - 2
            pControl = pControl.Parent
        Next
    End If

    If Not tControl Is Nothing Then
        Do Until (tControl.TabStop = True) AndAlso (tControl.Enabled = True) AndAlso (tControl.Visible = True) AndAlso (TypeOf tControl Is Tbx00)

            tControl = pControl.GetNextControl(tControl, Direction)

            'Last in the Panel
            If tControl Is Nothing Then

                tBox_P00.Select(0, tBox_P00.TextLength)
                Beep()
                Exit Sub

            End If
        Loop
        tControl.Focus()
    Else
        tBox_P00.Select(0, tBox_P00.TextLength)
        Beep()
    End If

    Exit Sub
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:06:07.187

听起来好像你把事情复杂化了。正如 HansPassant 提到的，您可以使用[GetNextControl](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.getnextcontrol.aspx)为您完成工作：

当按下回车键时，此代码会将焦点移动到表单上的下一个文本框（[基于选项卡索引顺序](https://stackoverflow.com/questions/1603444/how-can-i-set-the-tab-order-in-vb-net)）：

```
Private Sub TextBox1_KeyDown(sender As Object, e As System.Windows.Forms.KeyEventArgs) Handles TextBox1.KeyDown
    If e.KeyCode = Keys.Enter Then
        Dim ctl As Control = CType(sender, Control)
        Do
            ctl = Me.GetNextControl(ctl, True)
        Loop Until TypeOf ctl Is TextBox
        ctl.Focus()
    End If
End Sub 
```

然后，您可以扩展它以处理所有文本框 KeyDown 事件。

# c# - 使用 watin 登录网站 - c#

> ID：11726736
> 
> 赞同：0
> 
> 时间：2012-07-30T17:44:32.723
> 
> 标签：c#, watin

我拥有的测试站点显示一个弹出框以输入用户凭据。我可以使用登录到该站点

```
private CredentialCache GetCredential(LoginData loginData)
{

    ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3;
    CredentialCache credentialCache = new CredentialCache();
    credentialCache.Add(new System.Uri(loginData.LoginURL), "Basic", new NetworkCredential(loginData.LoginUserName, loginData.LoginPwd));
    return credentialCache;
}

//above code is thanks to another post on SO

public void SiteLogin(LoginData loginData)
{
    CookieContainer cookieContainer = new CookieContainer();
    HttpWebRequest request = WebRequest.Create(loginData.LoginURL) as HttpWebRequest;
    request.CookieContainer = cookieContainer;
    request.Method = WebRequestMethods.Http.Post;
    request.KeepAlive = false;
    request.ContentLength = 0;

    request.Credentials = GetCredential(loginData);
    request.PreAuthenticate = true;

    HttpWebResponse response = request.GetResponse() as HttpWebResponse;

    System.IO.Stream responseStream = response.GetResponseStream();
    System.IO.StreamReader reader = new System.IO.StreamReader(responseStream, Encoding.UTF8);
    string testString = reader.ReadToEnd(); //see what response is here, only for initial coding

} 
```

我无权访问测试网站，所以我不知道登录弹出窗口的控件名称是什么。

我如何使用 watin 执行类似的步骤？

# java - 使用父容器中子组件的 getBaseline(int w, int h)

> ID：11726739
> 
> 赞同：4
> 
> 时间：2012-07-30T17:44:40.813
> 
> 标签：java, swing

我有一个自定义的 swing 组件，它有一些子元素，包括 JTextField。我想为容器提供与 JTextField 相同的基线，因此我重写了容器中的 getBaseline 方法。但是，当为容器调用 getBaseline 时，并不总是设置 JTextField 的位置。我试图在容器的 getBaseline 方法中添加对 doLayout 的调用，但这没有帮助。我想要的是以下内容：

```
public int getBaseline(int w, int h) {
    Dimension size = textField.getPreferredSize();
    int textBaseline = textField.getBaseline(size.width, size.height);
    int textY = textField.getY();
    return textY + textBaseline;
} 
```

在上面的代码中 textY 等于 0。

我写了一些代码来说明这个问题。第一次单击“添加”时，基线是错误的。第二次是正确的。

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;

class CustomComponent extends JPanel {

    public CustomComponent() {
        setLayout(new GridBagLayout());
        textField.setColumns(8);
        layoutElements();
    }

    public void addComponent() {
        JPanel comp = new JPanel();
        comp.setPreferredSize(new Dimension(50, 200));
        comp.setBackground(Color.red);
        otherComponents.add(comp);
        layoutElements();
    }

    public int getBaseline(int w, int h) {
        Dimension size = textField.getPreferredSize();
        return textField.getY() + textField.getBaseline(size.width, size.height);
    }

    public Component.BaselineResizeBehavior getBaselineResizeBehavior() {
        return Component.BaselineResizeBehavior.CONSTANT_DESCENT;
    }

    private void layoutElements() {
        removeAll();
        GridBagConstraints constraints = new GridBagConstraints();
        constraints.anchor = GridBagConstraints.SOUTH;
        add(textField, constraints);

        for (JPanel comp : otherComponents)
            add(comp, new GridBagConstraints());
        if (getParent() != null)
            getParent().validate();
    }

    private JTextField textField = new JTextField();
    private ArrayList<JPanel> otherComponents = new ArrayList<JPanel>();
}

public class Main {

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        JPanel panel = new JPanel();
        panel.setLayout(new GridBagLayout());
        frame.getContentPane().add(panel);

        JButton addComponent = new JButton("Add");
        GridBagConstraints constraints = new GridBagConstraints();
        constraints.anchor = GridBagConstraints.BASELINE;
        panel.add(addComponent, constraints);

        final CustomComponent customComp = new CustomComponent();
        panel.add(customComp, constraints);

        addComponent.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent ae) {
                customComp.addComponent();
            }
        });

        frame.setSize(400, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:24:29.100

初步评论，只是一个确认：

可以确认外部布局的问题 GridBag（您的确切示例）或 MigLayout。如果外部布局是 FlowLayout，则可以修改。在这种情况下，在计算基线之前强制布局就足够了

```
@Override
public int getBaseline(int w, int h) {
    // helps with simple managers like FlowLayout
    // detoriates with powerful managers like GridBag or Mig
    doLayout();
    Dimension size = textField.getPreferredSize();
    return textField.getY() + textField.getBaseline(size.width, size.height);
} 
```

在 main 的外部面板中：

```
FlowLayout flow = new FlowLayout();
flow.setAlignOnBaseline(true);
panel.setLayout(flow); 
```

不多，但也许你可以从这里进一步挖掘......

**编辑**暂定解决方案（？或hack）和思考可能的原因

看起来它需要一个强制的两遍布局过程：

```
private void layoutElements() {
    removeAll();
    GridBagConstraints constraints = new GridBagConstraints();
    constraints.anchor = GridBagConstraints.SOUTH;
    add(textField, constraints);

    for (JPanel comp : otherComponents)
        add(comp, new GridBagConstraints());
    if (getParent() != null) {
        getParent().validate();
        getParent().revalidate();
    }
} 
```

请注意验证与重新验证的顺序 - 由于某些原因，两者都是需要的。不知道确切的机制，只是随机猜测：

*   布局发生自上而下，因此如果父级依赖于已布局所有孙子级的子级，则可以解释两遍的需要。与孙子相关的基线就是这样的条件
*   the first pass happens in a broader context, that is at the end of the first validate not all state is fully completed. Then a revalidate guarantees the second pass to happen *after* all the ongoing changes are completed.

# iphone - 错误：找不到“ZXingWidgetController.h”文件

> ID：11726740
> 
> 赞同：1
> 
> 时间：2012-07-30T17:44:43.037
> 
> 标签：iphone, objective-c, ios, qr-code, zxing

我收到此错误，我已尽我所能。我尝试添加相对路径或绝对路径，但没有任何工作。我还应该做些什么来让 ZXing 正常工作吗？我也没有使用 ARC，所以这是最新版本的 ZXing 的问题吗？我阅读了所有可用的博客/问题，但我不断收到此错误，我不知道为什么。任何帮助将不胜感激。

```
 In file included from /Users/KaushiK/Projects/Projects/iOS/ZXingProjectFolder/trunk/iphone/x/QRReaderViewController.mm:10:
/Users/KaushiK/Projects/Projects/iOS/ZXingProjectFolder/trunk/iphone/x/QRReaderViewController.h:10:9: fatal error: 'ZXingWidgetController.h' file not found 
```

# 导入“ZXingWidgetController.h”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:06:16.460

如果您有权访问它正在寻找“ `ZXingWidgetController.h`”的头文件，请确保包含该“标题搜索路径”的目录：

1.  在 Xcode 中选择您的项目并转到“ `Build Settings`”选项卡
2.  搜索“ `Header Search Paths`”
3.  确保此字段包含包含您要查找的头文件的目录
4.  然后你应该能够使用引号导入它：

#导入“ `ZXingWidgetController.h`”

如果您将此文件作为 Xcode 项目的一部分，您还可以确保它包含在您的构建目标中：

1.  选择头文件，打开`Utilities`右侧的“ ”面板
2.  确保在“Target Membership”下选择了您的构建目标

但是，如果此文件只是捆绑在一个框架中，那么请查看“构建阶段”选项卡并确保该框架列在“链接二进制文件与库”阶段下。然后使用尖括号导入它：

#import <ZXing/ZXingWidgetController.h>

# clojure - 在 clojure/webnoir 中关闭服务文件

> ID：11726744
> 
> 赞同：0
> 
> 时间：2012-07-30T17:44:52.310
> 
> 标签：clojure, noir

我在 webnoir 中有以下功能，可以从磁盘提供图像。

```
(defpage [:get "/GetPhoto"] {:keys [photoName]}
         (def file (io/input-stream  (str photoName ".jpg")))
         (resp/set-headers {"Content-Type" "image/jpeg"} file)) 
```

我假设我应该关闭文件，但是当我添加`(.close file)`到函数的末尾`java.io.IOException: Stream closed`时，访问 URL 时出现错误。处理这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:26:10.690

第二行的 def 很可能不是你想要的。我建议用`with-open`声明替换它。每次运行此函数时，都会为整个命名空间定义一个新符号。作为一般规则，调用`def`用于顶层或宏内部。

```
(defpage [:get "/GetPhoto"] {:keys [photoName]}
         (with-open [file (io/input-stream  (str photoName ".jpg"))]
           (resp/set-headers {"Content-Type" "image/jpeg"} file)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T05:51:42.077

显然你不能在函数结束时关闭文件，因为你对 noir/ring 所做的只是返回一个描述响应的数据结构。Ring 然后使用这个数据结构来实际响应客户端。在这种情况下，它会看到一个流并尝试从中读取。当您关闭它（显式或使用`with-open`）时，这将失败。

我希望您不必做任何事情，并且 ring 会在用尽后关闭流。

你不想嵌套`def`. 你不想嵌套`def`. 你不想嵌套`def`. 你不想...

# c++ - 析构函数末尾的分段错误

> ID：11726746
> 
> 赞同：7
> 
> 时间：2012-07-30T17:44:54.750
> 
> 标签：c++, segmentation-fault, destructor

我不知道这个问题是否会很清楚，因为我不能提供太多细节（我使用的是 TPL 并且自己写了很多行）。但我会试一试。

我遇到了我无法理解的分段错误。有一个结构（我没有设计但应该经过很好的测试），其析构函数看起来像这样

```
Data::~Data()
{
  if(A_ != 0) {
    delete A_;
    A_ = 0;
  }

  if(B_ != 0) {
    delete B_;
    B_ = 0;
  }

  if(C_ != 0) {
    delete C_;
    C_ = 0;
  }
} // HERE 
```

困扰我的是，在调试时，我发现段错误发生在标有“这里”的行。Data 类只有 A_、B_ 和 C_ 作为动态分配的属性。我还尝试在其他非动态复合属性上显式调用析构函数，以查看它们在销毁过程中是否出现问题，但段错误再次发生在析构函数的末尾。什么样的错误会在那时产生段错误？

我希望问题足够清楚，如果需要，我会添加详细信息。

编辑：感谢您的回复。我知道这是一段简陋的代码，但是整个库当然太大了（顺便说一下，它来自 Trilinos，但我认为错误不是他们的错，一定是我在处理他们的结构时的错误。我用短名称以使问题更紧凑）。有人在评论中提出的一些评论回复：

*   关于删除之前的检查和原始指针：正如我所说，这不是我的选择。我想这是一种双重保护，以防出现问题并且 A_、B_ 或 C_ 已被数据结构的其他所有者删除。选择 raw-pointers 与 shared_ptr 或其他安全/智能指针可能是因为此类几乎从未直接使用，而仅由具有指向 Data 的指针的类 Map 的对象使用。此类 Map 在同一个库中实现，因此他们可能选择原始指针，因为他们知道自己在处理什么以及如何处理。
*   是的，数据结构由同一对象的所有副本共享。特别是，有一个包含指向 Data 对象的指针的 Map 类。所有相互复制的地图共享相同的数据。引用计数器跟踪有多少 Map 持有指向数据的指针。最后一个要销毁的 Map 会删除数据。
*   数据结构的引用计数器工作正常，我检查了它。
*   我不是在调用这个类的析构函数。它由 Map 类对象的析构函数自动调用，该对象具有指向 Data 作为属性的指针。
*   Data 继承自 BaseData，它的（虚拟）析构函数不做任何事情，因为它只是一个定义类的接口。
*   很难发布重现问题的代码。出于很多原因。该错误仅出现在 2 个以上的进程（它是一个 mpi 程序）中，我猜一个进程有一些为空的列表并试图访问某个元素。
*   关于错误详情。我可以在这里给你调试期间错误回溯中的最后一项（我为错误的格式道歉，但我不知道如何说得好）：

    1.  > ../nptl/sysdeps/unix/sysv/linux/raise.c:64 处的 raise (sig=) 中的 0x00007ffff432fba5

    2.  > 0x00007ffff43336b0 在 abort () at abort.c:92

    3.  > ../sysdeps/unix/sysv/linux/libc_fatal.c:189 处的 __libc_message (do_abort=, fmt=) 中的 0x00007ffff436965b

    4.  > malloc_printerr 中的 0x00007ffff43736d6 (action=3, str=0x7ffff4447780 "free(): 损坏的未排序块", ptr=) 在 malloc.c:6283

    5.  > 0x00007ffff4379ea3 在 __libc_free (mem=) at malloc.c:3738

    6.  > /home/bartgol/LifeV/trilinos/trilinos-10.6.4-src/packages/epetra/src/Epetra_BlockMapData.cpp:110 中的 Epetra_BlockMapData::~Epetra_BlockMapData ( this=0x1461690, __in_chrg=) 中的 0x0000000000c21f71

最后，让我重申我的疑问：在析构函数的末尾会出现什么样的错误，即使所有属性都已被删除？再次感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T02:04:58.120

在函数退出时可能导致*段错误*的一个问题是**[堆或堆栈损坏](http://en.wikipedia.org/wiki/Memory_corruption)**。

您的程序的某些其他部分可能会导致问题。诸如**双重破坏**或**[缓冲区溢出](http://en.wikipedia.org/wiki/Buffer_overflow)**之类的东西可能会导致内存损坏。

通常，程序的调试版本会在函数退出时进行检查，以确保堆栈完好无损。如果不是，那么，您会看到结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T04:56:15.943

当类析构函数的显式主体完成时，它会继续执行一些隐式操作：它调用基类和成员析构函数（如果您有基类和具有非平凡析构函数的成员），并且如果有必要，它会调用原始内存释放函数`operator delete`（是的，在典型的实现`operator delete`中实际上是从析构函数内部调用的）。显然，这两个隐式过程之一导致了您的案例崩溃。如果没有更多信息，就无法准确地说出。

PS 风格上的代码很糟糕。为什么他们在做之前检查 null `delete`？*在析构函数*中将已删除的指针归零有什么意义？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T18:05:38.330

从您显示的稀缺代码中很难分辨。很容易你已经释放了你的类成员之一或你的基类在它自己的析构函数中使用的资源。

# windows-8 - WinRt WebView 控件处理控件内的导航

> ID：11726754
> 
> 赞同：6
> 
> 时间：2012-07-30T17:45:11.487
> 
> 标签：windows-8, webview, windows-runtime, windows-store-apps, winrt-xaml

我有一个使用 WebView 控件的 Metro 应用程序。我`NavigateToString`用来加载可能包含超链接的 html 文件。然后我想要做的是检测何时选择了这些超链接之一，而不是允许在 WebView 控件中导航，而是启动 IE 并在那里查看页面。

这是否可能在 WinRT 约束范围内，如果可以，如何实现？

到目前为止，我已经尝试捕获该`WebView_LoadCompleted()`事件，但尽管它确实在正确的时间触发，但我无法从`NavigationEventArgs`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T18:39:31.980

不幸的是，这不可能直接实现，因为 WebView 不包括诸如导航之类的事件（在 Windows Phone 中存在）。

幸运的是，Nick Randolph（出色的 Windows Phone 和 Windows 8 开发人员）使用脚本事件创建了一个解决方法。他在他的博客上写了一篇很棒的文章：

[http://nicksnettravels.builttoroam.com/post/2012/04/21/Limitations-of-the-WebView-in-Windows-8-Metro-Apps.aspx](http://nicksnettravels.builttoroam.com/post/2012/04/21/Limitations-of-the-WebView-in-Windows-8-Metro-Apps.aspx)

# javascript - 如何控制打印页面的样式？

> ID：11726755
> 
> 赞同：0
> 
> 时间：2012-07-30T17:45:15.727
> 
> 标签：javascript, css

我在我的网页上添加了 3 个打印按钮，每个按钮打印网页的一部分（div）。这是代码

```
function printPage(id)
{
   var html="<html>";
   //html+="<link rel="stylesheet" type="text/css" href="../css/template.css" />";
   html+= document.getElementById(id).innerHTML;
   html+="</html>";

   var printWin = window.open('','_blank','left=0,top=0,width=500,height=500,fullscreen=1,toolbar=0,scrollbars=0,status  =0');
   printWin.document.write(html);
   printWin.document.close();
   printWin.focus();
   printWin.print();
   printWin.close();
}

 <input name="b_print" type="button" class="ipt"   onClick="printPage('one');" value="Print One">
<input name="b_print" type="button" class="ipt"   onClick="printPage('two');" value="Print Two">
<input name="b_print" type="button" class="ipt"   onClick="printPage('three');" value="Print three"> 
```

因此，当我单击“打印”按钮时，会打开一个新窗口，打印成功并关闭它。我对此有几个问题

首先，我想在同一页面中弹出打印窗口。为此，我已将`_blank`属性`window.open`替换为`_parent`，但在打印后，页面不会重定向或返回到我启动打印的页面。如何避免这种情况？

其次，如何控制打印页面的样式？我试图链接一个样式表（如上面的代码所示），但它不起作用。

提前感谢您的任何帮助或建议

* * *

```
function printPage(printpage)
                {
                    var headstr = '<html><head></head>'+'<link rel="stylesheet" type="text/css" href="../css/template.css" />'+'<body><br/><br/><br/>';
                    var footstr = "</body>";
                    var newstr = document.all.item(printpage).innerHTML;
                    var oldstr = document.body.innerHTML;
                    document.body.innerHTML = headstr+newstr+footstr;                   
                    window.print();
                    document.body.innerHTML = oldstr;
                    return false;
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:02:16.310

您可以使用隐藏的 iframe，而不是使用弹出窗口。这将使事情保持在“同一页面”中。制作一个已经包含样式表路径的虚拟页面“print.html”。如果您有正确的路径，它将起作用。

在打印虚拟页面中，创建一个从父页面获取 HTML 内容的函数（在本例中为名为 HTMLStuff 的字符串），然后打印自身：

```
<iframe id="printf" src="print.html" name="printf"></iframe>

document.body.innerHTML = parent.htmlStuff;
window.print() 
```

您可以设置 iframe 的 SRC 并制作抓取不同内容的不同页面。还有其他方法可以做到这一点，但这非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-24T11:28:38.240

要在渲染页面以进行打印时应用样式表的一部分，您可以使用：

```
@media print {    
    /*
    Your css here
    */
} 
```

# xpath - xpath 选择器

> ID：11726756
> 
> 赞同：0
> 
> 时间：2012-07-30T17:45:18.900
> 
> 标签：xpath, css-selectors

我有以下 HTML：

```
<ul>
<li>
<p class="channel-show-time">Test 1</p>
</li>
<li>
<p class="channel-show-time">Test 2</p>
</li>
<li><span class="channel-show-carousel-label">Next</span>
<p class="channel-show-time">Test 3</p>
</li>
<li>
<p class="channel-show-time">Test 4</p>
</li>
</ul> 
```

我想选择`<p>`标签中的文本，从前面的 li 到跨度类为“channel-show-carousel-label”的 li，所以我想要文本“Test 2”。

我有 xpath 选择`<p>`标签中的文本 li 与 span 类，即：

```
xpath=//ul/li/span[@class='channel-show-carousel-label']/../p 
```

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:54:40.810

您可以使用以下 XPath：

```
//span[@class="channel-show-carousel-label"]/../preceding-sibling::li[1]/p/text() 
```

它说：找到具有所需类的跨度，转到其父级 (li)，找到最近的 li 同级，转到其 p 子级并返回其文本。

# python - python中的多个返回值

> ID：11726758
> 
> 赞同：5
> 
> 时间：2012-07-30T17:45:21.780
> 
> 标签：python

我想更改一个 python 函数以返回两个值。如何在不影响任何先前只期望一个返回值的函数调用的情况下实现这一点？

例如。

原始定义：

```
def foo():
    x = 2
    y = 2
    return (x+y) 
```

总和 = 富（）

氖定义：

```
def foo():
    x = 2
    y = 2
   return (x+y), (x-y) 
```

总和，差异 = foo()

我想以以前对 foo 的调用也保持有效的方式执行此操作？这可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-30T17:47:35.353

```
def foo(return_2nd=False):

    x = 2
    y = 2
    return (x+y) if not return_2nd else (x+y),(x-y) 
```

然后调用新版本

```
sum, diff = foo(True)
sum = foo() #old calls still just get sum 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T17:48:23.727

通过更改返回值的类型，您正在更改此函数与调用它的任何代码之间的“合同”。因此，您可能应该更改调用它的代码。

但是，您可以添加一个可选参数，该参数在设置时将返回新类型。这样的更改将保留旧合同并允许您拥有新合同。尽管有不同类型的返回类型很奇怪。那时，完全创建一个新函数或修复调用代码可能会更干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:47:26.960

很抱歉告诉你，函数重载在 Python 中是无效的。因为 Python 不执行类型强制，所以 foo 的多个定义会导致使用最后一个有效的定义。一种常见的解决方案是定义多个函数，或者在函数中添加一个参数作为标志（您需要自己实现）

# django - 是否可以在 Django 上向子模型添加“通过”模型？

> ID：11726763
> 
> 赞同：0
> 
> 时间：2012-07-30T17:45:44.107
> 
> 标签：django, inheritance, model

这是我正在尝试做的一个简明示例：

```
class Entity(models.Model):
    name = models.CharField(max_length=70)

class Individual(models.Model):
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=30)

class BookingAgent(Entity)
    staff = models.ManyToManyField(Individual, through='Role', related_name="employee")

class Role(models.Model):
    person = models.ForeignKey(Individual)
    company = models.ForeignKey(Entity)
    position = models.CharField(max_length=70) 
```

基本上，我有一个名为的父类`Entity`，它存储公司的所有基本信息，即地址等。然后我有一个`BookingAgent`是`Entity`. 当我尝试在`BookingAgent`模型上创建直通关系时，它不起作用。我得到错误：

> 'staff' 是通过模型 Role 手动定义的 m2m 关系，没有 Individual 和 BookingAgent 的外键

但是当在 Entity` 模型中定义直通关系时，它会起作用。

我的目标是让每个实体都有一份员工或成员个人名单。我想我明白为什么它不起作用，但我想不出一个优雅的解决方案。

谢谢！

更新：澄清一下，实体不是抽象基类，因为会有一些实体不是 BookingAgents、ManagementCompanies 等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:47:57.817

我认为您需要将“RoleTest”更改为“Role”，并且您需要有一个外键`BookingAgent`，而不是`Entity`（也不`Entity`应该是抽象基类？）

```
class BookingAgent(Entity)
    staff = models.ManyToManyField(Individual, through='Role', related_name="employee")

class Role(models.Model):
    person = models.ForeignKey(Individual)
    company = models.ForeignKey(BookingAgent) 
```

# c# - ListView 上的 DrawListViewItemEventArgs.DrawDefault 属性

> ID：11726766
> 
> 赞同：1
> 
> 时间：2012-07-30T17:45:54.247
> 
> 标签：c#, winforms, listview

我想为 ListView 中的一两个项目实现所有者绘制。

我找到了这处`DrawListViewItemEventArgs.DrawDefault`房产，但不清楚它的用途。这个属性的[MSDN 示例](http://msdn.microsoft.com/en-us/library/system.windows.forms.drawlistviewitemeventargs.drawdefault.aspx)只是打印它的值，这对于理解它的使用方式完全没有用。

我是否需要在每次调用时设置此属性`DrawItem()`，或者有没有办法为那些我不想拥有的项目设置此属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:04:21.093

如果我的记忆正确，您需要执行以下操作：

```
private void ListView1_DrawItem(Object sender, DrawListViewItemEventArgs e) {
  if (mycustomdraw) // Do we need to draw it or use the default drawing
  {
    e.DrawDefault = false; // This may be set to false by default
    // Draw the list item here
  }
  else
    e.DrawDefault = true; // Tell the listview to use the default drawing
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:05:39.970

仅当您希望正常的列表视图项目绘制发生时，才应将其设置为 true。在您的 DrawItem 事件处理程序返回后发生。并且会过度绘制您绘制的任何内容。

这不是典型的，您通常实现事件以以不同的方式绘制项目。这使得默认值 false 成为正常用法，事件处理程序完成后不会发生进一步的绘制。

# android - 为 Apache2 + FastCGI 设置启用数据压缩

> ID：11726774
> 
> 赞同：3
> 
> 时间：2012-07-30T17:46:30.720
> 
> 标签：android, python, apache2, gzip, fastcgi

这个问题与我之前的帖子有关： [Android ICS 的 CSS 加载问题](https://stackoverflow.com/questions/11575189/css-loading-issue-with-android-ics)。

**Android ICS 的默认浏览器和 Dolphin 浏览器**在哪里出现 CSS 和 JS 渲染问题。此内容由我的服务器后端引擎提供，该引擎使用（**Apache2 + FastCGI + Python**）设置。

在搜索可能的问题时，我发现问题的主要原因是，内容不是从服务器以压缩形式发送的。

因此示例*响应标头*看起来如下所示：

```
Connection  Keep-Alive
Content-Encoding    gzip
Content-Length  5997
Content-Type    text/css
Date    Sun, 29 Jul 2012 14:29:08 GMT
Keep-Alive  timeout=15, max=100
Server  Apache (Ubuntu)
Vary    Accept-Encoding 
```

如果从平面文件中提供相同的内容。响应标头如下所示。所有浏览器都正确呈现。

```
Accept-Ranges   bytes
Connection  Keep-Alive
Content-Encoding    gzip
Content-Length  1430
Content-Type    text/css
Date    Sun, 29 Jul 2012 14:28:57 GMT
Etag    "a9c06-176d-4c5e693c2a6c0"
Keep-Alive  timeout=15, max=100
Last-Modified   Sat, 28 Jul 2012 16:46:59 GMT
Server  Apache (Ubuntu)
Vary    Accept-Encoding 
```

还有一些方法，Android ICS 的默认浏览器和海豚浏览器无法呈现内容（特别是 css、js 内容）。它适用于所有其他浏览器。

但本质上，后端引擎也存在一些问题，因为它发送了未压缩的数据。在 Response 标头中，这里有几个有趣的点：

1.  响应标头包含显示“ **Content-Encoding gzip** ”的字段
2.  但 Content-Length 显示资源的未压缩版本的长度。

为了解决这个问题，我*在 Architecture 中尝试了一些小的改动*，在我认为可能是问题原因的地方。我注意到，**用 CGI 替换 fastCGI 解决了我的问题**，并且数据现在以压缩格式发送。

* * *

## 问题

虽然问题解决了，但我肯定*想使用 fastCGI*。所以我正在寻找可以解决问题的可能的配置更改。我在服务器的 Apache 设置中做了以下安排：

1.  **从可用的 Apache 模块**启用 deflate模块。****
***   我的`/etc/apache2/mods-enabled/deflate.conf`文件有以下文本：

    ```
    <IfModule mod_deflate.c>
              # these are known to be safe with MSIE 6
              AddOutputFilterByType DEFLATE text/html text/plain text/xml
              # everything else may cause problems with MSIE 6
              AddOutputFilterByType DEFLATE text/css
              AddOutputFilterByType DEFLATE application/x-javascript application/javascript application/ecmascript
              AddOutputFilterByType DEFLATE application/rss+xml
    </IfModule> 
    ```

    *   我有以下几行来使 fastCGI 与我在`/etc/apache2/sites-enabled/default`文件中的脚本一起工作。

    ```
    <Files my_script_name.py>
        SetHandler fastcgi-script 
    </Files>

    FastCgiServer /path_to_script/my_script_name.py -processes 4 -socket /tmp/my_script_name.sock 
    ```** 

 **## 问题

我尝试了各种配置更改，但似乎都没有解决我的问题。我在这里缺少什么来**启用 fastCGI 压缩**吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:21:11.717

最后，我能够在这里找到问题的解决方案： [http ://wiki.catalystframework.org/wiki/deployment/apache_fastcgi](http://wiki.catalystframework.org/wiki/deployment/apache_fastcgi)

在这里，为了回答一个问题：**为什么我的应用程序如此缓慢、提供空白页和/或反应不及时？**在常见问题解答部分，他们清楚地说明了这一点。

> **mod_fastcgi**和**mod_deflate**在某些版本的 apache（例如 Debian Lenny 库存包）下不能很好地共存。一种解决方法是不加载 deflate 模块。另一种解决方案是构建和**安装 mod_fastcgi 的最新快照版本**（可在 [http://www.fastcgi.com/dist/](http://www.fastcgi.com/dist/)找到）。

因此，正如帖子中所建议的那样，我在服务器上更新了**libapache2-mod-fastcgi**包，现在我正在客户端获取具有正确响应头值的压缩数据。**

# javascript - javascript onclick按钮在单击时不起作用

> ID：11726775
> 
> 赞同：0
> 
> 时间：2012-07-30T17:46:32.773
> 
> 标签：javascript, onclick

我无法让 javascript 一键调用函数。我必须多次单击该按钮才能执行。这是我到目前为止所尝试的：

```
<a href="javascript:delete_todo(4);void(0)"><img border="0" align="absmiddle" src="b_x.gif"></a>

<a href="javascript:delete_todo(4)"><img border="0" align="absmiddle" src="b_x.gif"></a>

<a href="javascript:void(0);" onclick="javascript:delete_todo(4)"><img border="0" align="absmiddle" src="b_x.gif"></a>

<a onclick="javascript:delete_todo(4)"><img border="0" align="absmiddle" src="b_x.gif"></a> 
```

该代码由另一个 javascript 函数添加，该函数使用 .innerHTML 将代码行添加到表 td

有没有人遇到过这个问题并找到了解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:49:57.960

事件处理程序应始终在 onclick 中。使用`javascript:`是不好的形式。

```
<a href="#" onclick="delete_todo(4);return false;">...</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:52:17.503

嗯...尝试删除属性`javascript:`。`onClick`这是 jsFiddle 中的工作示例：http: [//jsfiddle.net/ep7R9/](http://jsfiddle.net/ep7R9/)

# php - 如何将 id 与 mysql 中不同表的名称匹配？

> ID：11726777
> 
> 赞同：0
> 
> 时间：2012-07-30T17:46:39.187
> 
> 标签：php, mysql

```
A. event_choices

event_id | res_id | 
4        | 10     | 

B. restaurants 

res_id     | res_name | 
10         | xyz      | 

C. event
event_id   | event_name | 
4          | birthday   | 
```

我一直在尝试内部连接以尝试将名称与 id 匹配但不成功

```
select event_id as id from event_choices inner join restaurants on res_id.id = res_name 
```

任何帮助将不胜感激，对 php/mysql 来说非常新

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T17:49:20.157

尝试：

```
SELECT event_id, res_name FROM event_choices, restaurants WHERE event_choices.res_id = restaurants.res_id 
```

欣赏^_^

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T17:51:53.970

```
SELECT event.event_name, restaurants.res_name FROM event_choices 
    INNER JOIN restaurants ON event_choices.res_id = restaurants.res_id
    INNER JOIN event ON event_choices.event_id = event.event_id 
```

可以工作。

如果您选择`*`而不是`event.event_name`您应该获取所有数据并能够从中进行选择。您还可以选择 形式的特定字段`<table>.<field>`。

编辑：添加`res_name`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:51:49.827

尝试这个：

```
 select ec.event_id as id from event_choices ec inner join restaurants r on ec.res_id = r.res_id 
```

# java - 调试器不会停留在 Intellij IDEA 中的源代码处

> ID：11726778
> 
> 赞同：16
> 
> 时间：2012-07-30T17:46:43.510
> 
> 标签：java, debugging, intellij-idea

我有一个很奇怪的问题，我无法用 Intellij IDEA 解决。我正在使用包解析电子邮件文件，但我的邮件文件的标题`org.apache.james.mime4j`格式不兼容。`Date:`所以我从 mime4j 源创建了模块，并从我的磁盘中删除了 mime4j jar。

我找到了一个解析发生的地方。当我放在`System.out.println("Something")`那里时，我会在控制台中看到它。但是当我在 println 的行上放置一个断点时，它并没有停止。（但它在我的`main()`功能中停止）。

你知道为什么会发生这种情况吗？我已经使我的缓存无效。我使用 IDEA 11.1.2。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-30T22:25:14.830

IDEA 可能会缓存您的 jar 并使用缓存副本，仔细检查[模块依赖关系](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)，应该没有 jar 依赖关系，只有对包含源的模块的依赖关系。

也试试`File`| `Invalidate Caches`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-10T20:41:41.100

解决我的问题（相同的描述）的事情是同步源。请看下面的截图：

[![在此处输入图像描述](../Images/ab45481a8b401cc5882f7942649d1653.png)](https://i.stack.imgur.com/1SdnL.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-20T10:41:24.383

我也确实使缓存/重新启动无效，但没有积极的结果。

在我的情况下，应用程序进程停止但 IDEA 没有捕获断点。解决方案是在进程被冻结时单击暂停调试器：

[![在此处输入图像描述](../Images/00f20010f0b37953e95a6d6014a52a08.png)](https://i.stack.imgur.com/aVZxM.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-03T10:26:05.993

就我而言，我正在调试一个单元测试，并且模拟了带有断点的类。

# jquery - 替换文件输入类型=“文件”按钮的功能有效，但要求文件两次

> ID：11726780
> 
> 赞同：4
> 
> 时间：2012-07-30T17:46:47.180
> 
> 标签：jquery, jquery-mobile

使用 jQuery Mobile 1.7.1 替换 native 的按钮`input type="file"`。

代码有效，但在浏览/打开文件位上强制执行第二个请求。

我错过了什么？

Chrome 和 FF 上的行为相同（其他地方没有尝试过）。

```
<div id="fileInputButton"  data-role="button" data-icon="gear" style="width:150px;margin:0 auto; text-align:center">Import</div>

<div id="filename"></div>

<input style="opacity:0;" id="the_real_file_input" name="foobar" type="file">

 <script>
  $('#fileInputButton').click(function() {
    $('#the_real_file_input').click();
  });

  $('input[type=file]').bind('change', function() {
    var str = "";
    str = $(this).val();
    $("#filename").text(str);
  }).change();
 </script> 
```

谢谢你的帮助！

更新：在这个小提琴[http://jsfiddle.net/pg3Qf/](http://jsfiddle.net/pg3Qf/)中工作正常，直到应用 JQuery Mobile。（感谢@wirey！）

最终更新：这修复了双触发问题：

```
$('#fileInputButton').click(function(e) {
     e.stopImmediatePropagation();
     $('#the_real_file_input').click();
 }); 
```

而且，这修复了 Chrome 和 Safari 中的“C:\fakepath\”问题：

```
str = $(this).val().replace(/C:\\fakepath\\/i, ''); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T18:49:20.600

我不知道为什么，但使用 stopImmediatePropagation 会阻止它触发两次。看起来事件不会冒泡

```
$('#fileInputButton').click(function(e) {
     e.stopImmediatePropagation();
     console.log('triggered');
     $('#the_real_file_input').click();
 }); 
```

[http://jsfiddle.net/pg3Qf/3/](http://jsfiddle.net/pg3Qf/3/)

# xcode - 在头文件中声明一个可变字典（使用 addEntriesFromDictionary）

> ID：11726789
> 
> 赞同：0
> 
> 时间：2012-07-30T17:47:28.330
> 
> 标签：xcode

我需要多次使用：[mutableDict addEntriesFromDictionary:dictionary];

我不知道如何在头文件中声明**mutableDict 。**我尝试：

> @property (nonatomic, assign) NSMutableDictionary *mutableDict;
> 
> @property (nonatomic, 保留) NSMutableDictionary *mutableDict;
> 
> @property (nonatomic, retain, readwrite) NSMutableDictionary *mutableDict;

和更多...

我必须如何声明这个 NSMutableDictionary？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:36:13.377

`@property (nonatomic, retain) NSMutableDictionary *mutableDict;`如果您**不**使用 ARC，或者如果您正在使用 ARC，请在您的头文件`@property (nonatomic, strong) NSMutableDictionary *mutableDict;`中使用。

在您的实现中包含`@synthesize mutableDict;`或更好地`@synthesize mutableDict = _mutableDict;`在`@implementation YourClass`.

您还应该使用类似的东西对其进行初始化`_mutableDict = [[NSMutableDictionary alloc] init];`

如果您不需要从外部使用可变字典（例如：`[myobject.mutableDict addEntriesFromDictionary:dictionary];`您最好不要在头文件中定义它，而是在您的实现中定义它，例如：

```
@implementation YourClass {
    NSMutableDictionary *_mutableDict;
} 
```

并像上图一样初始化它

# f# - F# 签名文件 - 定义构造函数参数

> ID：11726790
> 
> 赞同：4
> 
> 时间：2012-07-30T17:47:32.507
> 
> 标签：f#

在为我无法完全解决的 F# 脚本文件创建签名文件时遇到错误。

要进行复制，请创建一个新的 F# 类库并添加一个文件 Test.fs：

```
namespace Signatures

open System

type Test (id : Guid, name : string) =

  member this.Id = id
  member this.Name = name 
```

这将建立良好。然后在上面新建一个签名文件Test.fsi：

```
namespace Signatures

open System

type Test =

  new : (Guid * String) -> Test

  member Id : Guid
  member Name : String 
```

这现在不会生成错误`Module 'Signatures' requires a value 'new : (Guid * String) -> Test`（这与两个文件中的构造函数签名不同时得到的错误不同）。我能找到的关于在签名文件中定义构造函数的唯一真实文档是[MSDN](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CGwQFjAA&url=http%3A%2F%2Fmsdn.microsoft.com%2Fen-us%2Flibrary%2Fdd233196.aspx&ei=yccWUPvSGKG_0QWc6YHADw&usg=AFQjCNGGGl5ofgFpxOv3oKq5pKxJmi_t2A&sig2=ghMSn3uXtlBzR0B-nlHiTA)，它处理无参数构造函数。

如果将鼠标悬停在 .fs 文件中的 Test 上，则构造函数的签名与 .fsi 文件中的签名匹配。我也尝试过更改构造函数，使其不是隐含的，没有欢乐。

我正在使用 VS2012 RC，并尝试过 .Net 4 和 4.5。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T19:31:00.123

评论太长了，所以我将其发布为答案。

`Test`的构造函数接收两个参数作为其参数，而不是一个元组的参数。我承认，`*`论点之间看起来令人困惑。但签名`Guid -> string -> Test`比这更糟糕。构造函数应该得到一些输入并产生一个新的类型实例。柯里化形式和部分应用程序在构造函数的上下文中没有意义。

我认为括号有助于澄清这里。

```
type Test (id : System.Guid, name : string) =
  member this.Id = id
  member this.Name = name 
```

产生`new : id:Guid * name:string -> Test`同时

```
type Test (tuple: System.Guid * string) =
  let id, name = tuple
  member this.Id = id
  member this.Name = name 
```

让我`new : tuple:(Guid * string) -> Test`参加 FSI 会议。我使用 F# 2.0/MonoDevelop 3.0 进行记录。

关于创建类型签名，我通常将代码发送到 F# Interactive 并将生成的签名复制到`fsi`文件中以避免错误。如果工具提示和 F# Interactive 在 VS2012 RC 上错误地显示类型签名，您应该在 fsbugs (at) microsoft (dot) com 上报告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T19:38:29.230

一对额外的括号可能很重要。考虑以下：

```
type T =
  static member Add(x, y) = x + y
  static member AddTuple((x, y)) = x + y 
```

在 C# 中，它显示为

```
int Add(int x, int y)
int AddTuple(Tuple<int, int> arg) 
```

切线，你不能在构造函数中做类似的事情：

```
type Test((id, name)) = class end //DOESN'T COMPILE 
```

由于构造函数已经采用元组形式的参数，你会期望`'a * 'b`它`('a * 'b)`是不同的东西。这与方法语法一致。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T17:53:32.877

如果有人想解释为什么会这样，我很想知道，但我刚刚开始摆弄语法，看看是否可以从编译器中得到更多揭示。

如果我删除括号是元组，它会编译，即改变这个：

```
new : (Guid * String) -> Test 
```

到：

```
new : Guid * String -> Test 
```

# heroku - 在 Windows 中卸载 heroku 插件

> ID：11726794
> 
> 赞同：1
> 
> 时间：2012-07-30T17:47:39.823
> 
> 标签：heroku

我尝试在我的 Windows 机器上安装 heroku-accounts 插件，但在首次尝试添加帐户时出现以下错误：

*！找不到资源*

现在对于所有命令，我收到错误：

*没有这样的帐户：*

即使当我尝试卸载插件时，我也会收到此错误，所以我完全死在水中。

有任何想法吗？

# google-analytics - 用于事件跟踪的 Google Analytics URL

> ID：11726796
> 
> 赞同：1
> 
> 时间：2012-07-30T17:47:45.003
> 
> 标签：google-analytics, google-analytics-api

我正在使用 Google Analytics 跟踪几个页面。每个页面都使用传递给 _trackPageView 的自定义 URL：

```
_gaq.push(['_trackPageview','/someurl']); 
```

（我们的网站在每个页面上都使用相同的 URL，所以我坚持使用虚拟 URL 来识别每个页面）。

这一切都很好，但我注意到虚拟 URL 没有与我稍后在同一页面上跟踪的任何事件相关联。事件记录得很好，但如果我查看标准报告中的事件->页面部分，显示的页面 URL 是该站点的主 URL，而不是我的虚拟 URL。因此，在我的情况下，每个事件最终都与站点的相同 URL 相关联，而不是前面定义的“/someurl”。

我没有对事件跟踪代码做任何特别的事情，只是平常`_gaq.push( [ "_trackEvent", ... ] );`

我有几个用户计时，他们表现出相同的行为。

有谁知道我是否可以指定一个虚拟 URL 与事件一起发送？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:19:18.993

抱歉，如果您已经考虑过这一点，但是您如何将虚拟 url 添加到事件标签并以这种方式区分不同页面上的事件？

# c++ - 初始化数组的更好方法

> ID：11726798
> 
> 赞同：0
> 
> 时间：2012-07-30T17:47:46.943
> 
> 标签：c++, arrays

看起来是一个新手问题，但是这个函数被调用了很多次，老实说每秒数千次，所以在这里优化是至关重要的。最好的方法是什么？

```
struct CHOLDELEM
{
    DWORD dwColor[3], dwItemId[3];
    int nPos[3], nLength[3];
    CItemElem* pItem[3];
    CHOLDELEM()
    {
        for( int i=0; i<=3; i++ )
        {
            dwColor[i] = dwItemId[i] = 0;
            nPos[i] = nLength[i] = 0;
            pItem[i] = NULL;
        }
    }
}; 
```

或与`memset`s？

`memset( dwColor, 0, sizeof( dwColor ) );`

或其他方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T17:55:02.070

只要您只对零初始化感兴趣，您就可以简单地做

```
CHOLDELEM() : dwColor(), dwItemId(), nPos(), nLength(), pItem()
  {} 
```

（不需要 C++11）。

但是，您可能想查看编译器为其生成的代码。如果它不是最优的，那么一个更好的主意可能是让你的结构保持一个 POD（没有构造函数）并在声明该类型的对象时“从外部”初始化它

```
CHOLDELEM c = {}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:52:14.950

如果您的编译器可以处理 C++11 初始化程序，那么您可以在构造函数初始化程序列表中设置数组值：

```
CHOLDELEM() :
    dwColor{0}, dwItemId{0}, nPos{0}, nLength{0}, pItem{nullptr}
    { } 
```

然后编译器将生成（非常优化的）代码来处理它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T18:04:34.340

我可能会使用这种`memset`方法，但我肯定想确保在添加更复杂的数据成员时它不会中断`CHOLDELEM`：

```
#include <type_traits>

// ...

    CHOLDELEM()
    {
        static_assert(std::is_trivially_copyable<CHOLDELEM>::value,
                      "It is no longer safe to use memset!");
        memset(this, 0, sizeof *this);
    } 
```

顺便说一句，`CHOLDELEM`是一个可怕的名字。你为什么不把它重命名为什么的`ElementHolder`？

# ms-access - 对访问报告中的计算字段求和

> ID：11726800
> 
> 赞同：0
> 
> 时间：2012-07-30T17:47:56.600
> 
> 标签：ms-access, report, sum, grouping

我有一些从查询中提取的字段，它们进入双重分组报告（按父项和子项分组）。在这些组中，有几个字段一起计算。然后将这些计数平均为“总父子平均值”。

```
Parent1     PARENT COMPLIANCE: 45% <- (40% + 50% / 2)
      Child1
           TOTAL WITHIN CHILD: 50
           CONDITION 1       : 20%
           CONDITION 2       : 40%
           CONDITION 3       : 60% <- Implies 30 out of 50 compliant
           CHILD COMPLIANCE  : 40% <- (20% + 40% + 60% / 3)
      Child2
           TOTAL WITHIN CHILD: 20
           CONDITION 1       : 25%
           CONDITION 2       : 100%
           CONDITION 3       : 25% <- Implies 5 out of 20 compliant
           CHILD COMPLIANCE  : 50% <- (25% + 100% + 50% / 3) 
```

目前，`PARENT COMPLIANCE`它位于父分组的标题中。当我使用类似的东西时`(ChildCompliance) / Count(Child)`，`Count(Child)`它应该工作（计算用作除数的孩子的数量）但`(ChildCompliance)`不会产生总和；它只从 Child1 中获取数字（在本例中为 40%）。目前，`PARENT COMPLIANCE: 20%`这是我得到的（因为它占 40% / 2）。

我`SUM(ChildCompliance)`在 Parent 标头中尝试过，但它要求 ChildCompliance 作为数据字段而不是我计算的字段（希望在查询中使用它，这样做太费力了）。

如何在父标题中汇总我的`CHILD COMPLIANCE`计算字段？

**澄清：**

基本上，归结为：我需要能够对 Parent 组中所有孩子的 CHILD COMPLIANCE 值求和。我无法弄清楚如何做到这一点。

# php - strftime：从哪里检索语言环境（en，es ...）？

> ID：11726801
> 
> 赞同：0
> 
> 时间：2012-07-30T17:47:56.707
> 
> 标签：php

我刚刚发现了这个功能`strftime()`。手册说：

> 根据区域设置格式化本地时间/日期”。

但是......从哪里检索语言环境（en，es......）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:50:11.030

PHP 将使用服务器的区域设置。您可以通过[setlocale()](http://php.net/manual/en/function.setlocale.php)进行设置。

# javascript - 使用 ajax 的动态内容（ruby on rails）

> ID：11726803
> 
> 赞同：5
> 
> 时间：2012-07-30T17:48:02.370
> 
> 标签：javascript, jquery, ruby-on-rails, ajax, json

我正在使用 Rails 和 jquery，我需要一个带有 ajax 的动态内容。

但我不知道如何获取当前用户ID

例如，网址是 www.mywebsite.com/users/ **20**

在我的 javascript 文件中，我需要用户 ID (20)

```
$.get("/users/<%= **20** %>.json", function(data)
      {

      }, "json"); 
```

提前感谢您的帮助。

* * *

还有另一种方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T17:58:42.563

通常我在页面中的某处放置一个`hidden`字段，我可以在 javascript 文件上轻松访问，然后请求将是这样的： `id``$("#user_id")`

```
var id = $("#user_id").val();
$.get("/users/"+id+".json", function(data) { }, "json"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T11:02:32.490

您可以将 rails 变量值分配给视图文件中的 javascript 变量，例如

> "<%= javascript_tag "var userId = #{@current_user.id};" %>"

并在任何你想要的地方访问 js 文件中的变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T17:52:59.167

```
$.get("/users/<%= params[:id] %>.json", function(data)
  {

  }, "json"); 
```

应该做的伎俩。

将代码段包含到 .erb 文件中或使用它创建一个 .js.erb 部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T18:50:28.510

很多选择：

1.  如果您有一个带有 id 的当前用户对象（*注意*：这必须在以 结尾的文件中`.js.erb`）：

    `$.get("/users/<%= @current_user.id %>.json", function(data){...}, "json");`

2.  如果您不想使用`.js.erb`文件，但仍需要在页面上的某处设置值，则使用 id 值设置数据属性或隐藏输入。

3.  如果您在 url 中有 id 值（就像您所在的当前 url 一样`www.mywebsite.com/users/20`，并且您希望 GET 请求使用 20 作为值），您可以使用`document.url`or`window.location.href`和一些字符串操作来获取 id。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T19:53:45.380

尝试 <%= escape_javascript(params[:id]) %> 我不完全确定 escape_javascript 是否必要或会有所帮助。

# java - 如何在模型/道接口中表示一个 ID

> ID：11726807
> 
> 赞同：0
> 
> 时间：2012-07-30T17:48:33.387
> 
> 标签：java, hibernate, mongodb

我目前正在重构遗留系统中的一些模型和 DAO 类，并希望使用 MongoDB 和各种关系数据库选项来测试持久性的性能。我正在努力寻找在界面中表示 ID 的最佳方式。我有以下包结构

```
mypackage.model.Model
mypackage.model.mongo.MongoModel
mypackage.model.mysql.MySQLModel 
```

模型界面看起来像这样

```
public interface Model {
    public String getValue();
    public void setValue (String value);
} 
```

MongoModel（在这种情况下使用吗啡）看起来像这样

```
import mypackage.model.Model
import com.google.code.morphia.annotations.Entity;
import com.google.code.morphia.annotations.Id;
import com.google.code.morphia.annotations.Property;
import org.bson.types.ObjectId;

@Entity(value="collectionname")
public class MongoModel implements Model {
    @Id private ObjectId id;
    @Property("value") String value;

    public ObjectId getId() {
        return id;
    }

    public void setId(ObjectId id) {
        this.id = id;
    }

    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }
} 
```

MySQLModel（在这种情况下使用休眠）看起来像这样

```
import mypackage.model.Model
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="tablename")
public class MySQLModel implements Model {
    @Id @GeneratedValue private Long id;
    @Column(name="value") private String value;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }
} 
```

由于 ID 的数据类型可能不同（在本例中为 Long 与 ObjectId），我如何在 Model 接口中表示 ID？

同样的问题也适用于我的 DAO。

```
mypackage.dao/ModelDAO
mypackage.dao.mongo.MongoModelDAO
mypackage.dao.mysql.MySQLModelDAO 
```

我考虑添加对 ID 的向上转换引用，如下所示

```
public interface Model {
    public Object getId ();
    public void setId (Object id);
    public String getValue ();
    public void setValue (String value);
} 
```

然后我可以创建一个 InvalidKeyFormat 异常，并在提供错误 ID 的情况下抛出该异常。但是，这缺少 ID 类型的编译时检查。

我还可以构建密钥生成机制并规范数据存储技术之间的密钥值，但使用 MongoDB 默认的 ObjectId 格式有好处。

这个问题有更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:26:29.507

对两个类都使用 GUID 并将 Id 设为只读，以便手头的数据库可以在保存时生成它。对于 Mongomodel，您需要在属性 getter/setter 中来回将 GUID 转换为 ObjectId，在 MongoDb 的情况下，只需填充 ObjectId 的字节以创建 GUID 并在存储库中使用时删除填充

```
public interface Model
{
    public Guid getId ();
    public String getValue ();
    public void setValue (String value);
} 
```

# python - Python：从该类中多处理作为类的数据成员的函数的有效解决方法

> ID：11726809
> 
> 赞同：8
> 
> 时间：2012-07-30T17:48:51.313
> 
> 标签：python, class, multiprocessing

在处理作为类的数据成员的函数时（由于 Pickling 问题），我知道有关多处理模块[限制的](https://stackoverflow.com/questions/7016567/picklingerror-when-using-multiprocessing)[各种](https://stackoverflow.com/questions/11321370/python-mutliprocess-member-functions-of-classes) [讨论](https://stackoverflow.com/questions/7545385/python-class-inheriting-multiprocessing-trouble-with-accessing-class-members?rq=1)。

但是在多处理中是否有另一个模块或任何类型的解决方法，它允许类似以下的东西（特别是不强制并行应用函数的定义以存在于类之外）？

```
class MyClass():

    def __init__(self):
        self.my_args = [1,2,3,4]
        self.output  = {}

    def my_single_function(self, arg):
        return arg**2

    def my_parallelized_function(self):
        # Use map or map_async to map my_single_function onto the
        # list of self.my_args, and append the return values into
        # self.output, using each arg in my_args as the key.

        # The result should make self.output become
        # {1:1, 2:4, 3:9, 4:16}

foo = MyClass()
foo.my_parallelized_function()
print foo.output 
```

注意：我可以很容易地做到这一点，方法是移出`my_single_function`类，并将类似的东西传递`foo.my_args`给`map`or`map_async`命令。但这会将函数的并行执行推到`MyClass`.

对于我的应用程序（并行一个大型数据查询，该查询检索、连接和清理每月的数据横截面，然后将它们附加到此类横截面的长时间序列中），*在类*，因为我的程序的不同用户将实例化具有不同时间间隔、不同时间增量、要收集的不同数据子集等的类的不同实例，这些都应该与该实例相关联。

因此，我希望实例也可以完成并行化的工作，因为它拥有与并行化查询相关的所有数据，并且尝试编写一些绑定到某些参数并存在于外部的 hacky 包装函数将是愚蠢的类（特别是因为这样的函数是非通用的。它需要类内部的各种细节。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T18:07:59.043

Steven Bethard[发布了一种方法](http://bytes.com/topic/python/answers/552476-why-cant-you-pickle-instancemethods)，允许对方法进行腌制/取消腌制。你可以像这样使用它：

```
import multiprocessing as mp
import copy_reg
import types

def _pickle_method(method):
    # Author: Steven Bethard
    # http://bytes.com/topic/python/answers/552476-why-cant-you-pickle-instancemethods
    func_name = method.im_func.__name__
    obj = method.im_self
    cls = method.im_class
    cls_name = ''
    if func_name.startswith('__') and not func_name.endswith('__'):
        cls_name = cls.__name__.lstrip('_')
    if cls_name:
        func_name = '_' + cls_name + func_name
    return _unpickle_method, (func_name, obj, cls)

def _unpickle_method(func_name, obj, cls):
    # Author: Steven Bethard
    # http://bytes.com/topic/python/answers/552476-why-cant-you-pickle-instancemethods
    for cls in cls.mro():
        try:
            func = cls.__dict__[func_name]
        except KeyError:
            pass
        else:
            break
    return func.__get__(obj, cls)

# This call to copy_reg.pickle allows you to pass methods as the first arg to
# mp.Pool methods. If you comment out this line, `pool.map(self.foo, ...)` results in
# PicklingError: Can't pickle <type 'instancemethod'>: attribute lookup
# __builtin__.instancemethod failed

copy_reg.pickle(types.MethodType, _pickle_method, _unpickle_method)

class MyClass(object):

    def __init__(self):
        self.my_args = [1,2,3,4]
        self.output  = {}

    def my_single_function(self, arg):
        return arg**2

    def my_parallelized_function(self):
        # Use map or map_async to map my_single_function onto the
        # list of self.my_args, and append the return values into
        # self.output, using each arg in my_args as the key.

        # The result should make self.output become
        # {1:1, 2:4, 3:9, 4:16}
        self.output = dict(zip(self.my_args,
                               pool.map(self.my_single_function, self.my_args))) 
```

然后

```
pool = mp.Pool()   
foo = MyClass()
foo.my_parallelized_function() 
```

产量

```
print foo.output
# {1: 1, 2: 4, 3: 9, 4: 16} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-30T04:31:46.150

`multiprocessing`如果你使用被调用的分支`pathos.multiprocesssing`，你可以直接在多处理的`map`函数中使用类和类方法。这是因为`dill`is 用来代替`pickle`or `cPickle`，并且`dill`可以在 python 中序列化几乎任何东西。

`pathos.multiprocessing`还提供了一个异步映射函数……它可以`map`使用多个参数（例如`map(math.pow, [1,2,3], [4,5,6])`）

请参阅： [多处理和莳萝可以一起做什么？](https://stackoverflow.com/questions/19984152/what-can-multiprocessing-and-dill-do-together)

和： http: [//matthewrocklin.com/blog/work/2013/12/05/Parallelism-and-Serialization/](http://matthewrocklin.com/blog/work/2013/12/05/Parallelism-and-Serialization/)

```
>>> from pathos.multiprocessing import ProcessingPool as Pool
>>> 
>>> p = Pool(4)
>>> 
>>> def add(x,y):
...   return x+y
... 
>>> x = [0,1,2,3]
>>> y = [4,5,6,7]
>>> 
>>> p.map(add, x, y)
[4, 6, 8, 10]
>>> 
>>> class Test(object):
...   def plus(self, x, y): 
...     return x+y
... 
>>> t = Test()
>>> 
>>> p.map(Test.plus, [t]*4, x, y)
[4, 6, 8, 10]
>>> 
>>> p.map(t.plus, x, y)
[4, 6, 8, 10] 
```

所以你可以做你想做的事，我相信。

```
Python 2.7.8 (default, Jul 13 2014, 02:29:54) 
[GCC 4.2.1 Compatible Apple Clang 4.1 ((tags/Apple/clang-421.11.66))] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import dill
>>> 
>>> class MyClass():
...   def __init__(self):
...     self.my_args = [1,2,3,4]
...     self.output = {}
...   def my_single_function(self, arg):
...     return arg**2
...   def my_parallelized_function(self):
...     res = p.map(self.my_single_function, self.my_args)
...     self.output = dict(zip(self.my_args, res))
... 
>>> from pathos.multiprocessing import ProcessingPool as Pool
>>> p = Pool()
>>> 
>>> foo = MyClass()
>>> foo.my_parallelized_function()
>>> foo.output
{1: 1, 2: 4, 3: 9, 4: 16}
>>> 
```

在此处获取代码： [https ://github.com/uqfoundation/pathos](https://github.com/uqfoundation/pathos)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-08T14:36:12.997

我相信有一个更好的优雅解决方案。将以下行添加到对类进行多处理的代码中，您仍然可以通过池传递方法。代码应该高于班级

```
import copy_reg
    import types

    def _reduce_method(meth):
        return (getattr,(meth.__self__,meth.__func__.__name__))
    copy_reg.pickle(types.MethodType,_reduce_method) 
```

有关如何腌制方法的更多了解，请参见下面的 [http://docs.python.org/2/library/copy_reg.html](http://docs.python.org/2/library/copy_reg.html)

# android - 使用 SpannableString 添加菜单项

> ID：11726814
> 
> 赞同：6
> 
> 时间：2012-07-30T17:49:14.160
> 
> 标签：android

我将 SpannableString 作为项目名称添加到菜单项，但是单击此菜单后，出现以下异常：

```
FATAL EXCEPTION: main
        java.lang.IllegalArgumentException: Invalid payload item type
        at android.util.EventLog.writeEvent(Native Method)
        at android.app.Activity.onMenuItemSelected(Activity.java:2306)
        at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:830)
        at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:160)
        at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:885)
        at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:545)
        at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:122)
        at android.view.View$PerformClick.run(View.java:9320)
        at android.os.Handler.handleCallback(Handler.java:587)
        at android.os.Handler.dispatchMessage(Handler.java:92)
        at android.os.Looper.loop(Looper.java:150)
        at android.app.ActivityThread.main(ActivityThread.java:4385)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:507)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
        at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T20:43:31.307

尝试覆盖，**onMenuItemSelected**而不是

**返回 super.onMenuItemSelected(featureId, item)。**使用**返回真**

# php - PHPMailer 发送带有警告的电子邮件：此邮件可能不是由 foo@gmail.com 发送的 了解更多 报告网络钓鱼

> ID：11726820
> 
> 赞同：8
> 
> 时间：2012-07-30T17:49:40.617
> 
> 标签：php, email, phpmailer

我正在使用 PHPMailer 从我的网站发送自动电子邮件，在测试时，我注意到 php mailer 发送的所有电子邮件都在收件人端生成以下警告：

此邮件的发送者可能不是：foo@gmail.com 了解更多 报告网络钓鱼

我想知道是否有办法避免这种情况？

PHP邮件程序代码：

```
//mail functions
require("mailer/class.phpmailer.php");
require("mailer/class.smtp.php");
require("mailer/class.pop3.php");

$mail = new PHPMailer();
$mail->IsSMTP();  
$mail->Host = "relay-hosting.secureserver.net";
$mail->Port = 25;  
$mail->IsHTML(true);
$mail->Username = "foo@gmail.com";  // SMTP username
$mail->Password = "pass"; // SMTP password

$mail->From = "foo@gmail.com";
$mail->FromName = "FOO";
$mail->AddAddress("fOO@gmail.com", "WIDB");
$mail->AddReplyTo("foo@gmail.com");
//$mail->AddAddress("foo@gmail.com");                  // name is optional

$mail->WordWrap = 50;                                 // set word wrap to 50 characters
//$mail->AddAttachment("/var/tmp/file.tar.gz");         // add attachments
//$mail->AddAttachment("/tmp/image.jpg", "new.jpg");    // optional name
$mail->IsHTML(true);                                  // set email format to HTML

$mail->Subject = 'Foo - Transaction Receipt';
$mail->Body    = $message;
$mail->AltBody = "nothing";

//send mail
$mail->Send(); 
```

我正在使用 GMail 并且启用了 SMTP...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T18:21:12.420

您可以为您的网站设置 google 应用程序并获得一个 Username@yourwebsite.com gmail 帐户（[更多信息在这里](http://www.google.com/enterprise/apps/business/)它是免费的），或者您需要在您当前的服务器上设置一个电子邮件地址，即 Username@yourwebsite。 com 并将其用作 $mail->from 地址。

您的电子邮件收件人收到邮件是因为您告诉 google 从您的服务器发送电子邮件，然后您告诉他们邮件来自 gmail，但事实并非如此，它来自您的个人服务器. 由于发件人地址和您的服务器地址不匹配，他们将其标记为垃圾邮件。这是 google 防止垃圾邮件的方式，对他们来说，如果你输入 $mail->from(YOURMOM@LOL.com) 就会一样。电子邮件仍会发送，但您的域名与 @ 地址不匹配。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-09T13:44:45.730

除了遵循上述准则之外，我注意到这里可能对某人有所帮助。

当我发送带有正文“请检查附加的工单”和 pdf 附件的电子邮件时，gmail 显示它并带有垃圾邮件警告（在收件箱内）

当我发送带有正文“您的工作订单已附加”和相同 pdf 附件的电子邮件时，gmail 没有显示任何警告。

我正在使用 java api 发送电子邮件

# jenkins - 在 NAS 上使用 Jenkins

> ID：11726822
> 
> 赞同：1
> 
> 时间：2012-07-30T17:49:48.857
> 
> 标签：jenkins

我计划在我们公司建立一个新的 Jenkins 服务器。出于多种原因（易于访问、访问控制等），我想将所有可部署的工件保留在 Jenkins 中。

如果这些可部署的工件保存在 NAS 上，公司会更愿意。这对我来说没问题。我可以将 Jenkins 设置为使用 NAS，并简单地将整个配置保留在那里。我担心某些项目可能会构建较慢，因为它是通过网络连接的远程驱动器。我想我可以将有问题的作业配置为使用本地工作目录来根据需要加快速度。

但是，如果有一种简单的方法来设置 Jenkins 以便工作目录自动在本地计算机上，而其他所有内容都可以在 NAS 上，那就太好了。这将需要更少的设置和我的工作。我不必记住在需要时设置本地工作目录，也不必跟踪哪些作业具有时髦的工作目录。

我看到有两种方法可以做到这一点：

*   设置 Jenkins，以便将工作目录计算为特定的本地目录。例如，如果作业是 on `/mnt/nas/jenkins/jobs/foo`，则工作目录将是`/opt/jenkins/jobs/foo`或`/opt/local/jenkins/foo`。

*   以某种方式配置整个系统，使某些目录在本地，而其他目录在 NAS 上。例如，除了本地存储之外，所有目录`/opt/local/jenkins/jobs/foo`都在 NAS 上。`/opt/local/jenkins/jobs/foo/workdir`

有没有办法将 Jenkins 配置为自动使用不同的目录作为工作目录，而不是`workdir`在作业目录下？或者有没有办法配置环境来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:51:25.187

我被告知有两种方法可以做到这一点：

*   设置一个slave，一个slave可以和Jenkins服务器在同一台机器上，让slave做所有的构建。从站将在本地构建，然后将信息发送回将在 NAS 上的 Jenkins 服务器。工作目录是本地的，因为它是进行构建的从站，但工件将在 NAS 上，因为 Jenkins 将在那里存储它们。
*   Jenkins 在其常规配置中有两个新选项。我第一眼就错过了他们。它们位于配置屏幕的最顶部，您必须按“*高级*”按钮才能看到它们。一个允许您指定工作目录的位置，因此它位于`$JENKINS_HOME`. 我可以`$JENKINS_HOME`在 NAS 上进行设置，然后告诉 Jenkins 将本地目录放在本地驱动器上。另一个允许我指定放置构建记录的位置。我可以将构建记录保存在 NAS 上（包括存档的工件），并`JENKINS_HOME`在本地机器上进行设置。

这正是我一直在寻找的。显然，其他人也需要同样的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:04:12.407

我们在日常工作中通过对 $JENKINS_HOME 下的某些子目录使用符号链接来做到这一点。在我们的案例中，我们希望将所有作业配置、历史记录和已发布的工件存储在 SAN 卷上，并将其余的 Jenkins 文件保留在本地存储上。这只是创建一个从 $JENKINS_HOME/jobs 到 SAN 卷上的目录的符号链接的问题。

在您的情况下，您似乎希望将 $JENKINS_HOME 设置为指向 NAS 上的目录，但将构建的工作区目录驻留在本地存储上。这也很简单，因为每个构建的工作空间都保存在一个子目录中；我*认为*这是 $JENKINS_HOME/workspace，抱歉我无法确认，因为我们的设置使用单独的构建从属服务器并且没有在主服务器上设置任何执行程序。

使用 NAS 的一个警告；我们在切换到 SAN 之前为 Jenkins 使用了 NAS，发现由于 Jenkins 无法删除由 NAS 上的快照功能创建的临时文件，我们经常会在保存作业配置更改时出错。当我们关闭快照时，问题就消失了。

# sql-server - ASP.NET MVC 3 使用除 aspnetdb.mdf 以外的 DB 来包含成员数据等

> ID：11726823
> 
> 赞同：1
> 
> 时间：2012-07-30T17:49:50.967
> 
> 标签：sql-server, database, asp.net-mvc-3, entity-framework-4

我正在 ASP.NET MVC 3 中创建一个 Web 应用程序。我想使用 SQL Server DB（开发中的 SQL Server Express）来存放成员资格、角色和其他相关信息。到目前为止，我一直依赖于自动生成的`aspnetdb.mdf`数据库，并且能够毫无问题地创建新用户、登录和注销。但是，我有另一个数据库，其中包含表示应用程序使用的类的表（使用 Entity Framework 4，这些类是基于数据库自动创建的）。

所以，我有两个数据库，但只想拥有一个，因为我不认为我的网站有大量用户，而且我真的不认为需要两个数据库。就我而言，`aspnetdb.mdf`数据库还没有真正的数据，所以我不需要担心保留这些数据。因此，解决方案可能是结合两个数据库，或者只是不`aspnetdb.mdf`首先创建数据库，而是从一开始就使用另一个数据库来容纳用户和成​​员表等。

我的问题是多部分的：

1）如果我保留了两个数据库，有没有办法从我的另一个数据库中引用数据库`aspnet_Users`中的表作为外键？`aspnetdb.mdf`我做了一些搜索，似乎这要么不可能，要么很不方便。如果这是可能的，这是一个坏主意吗？

2）我已经广泛阅读了如何将这些组合到一个数据库中，并且我已经看到了很多关于它的文章（包括这里的 SO）。看起来最好的（或至少是好的）方法是使用 aspnet_regsql.exe 工具来配置我的“其他数据库”，然后摆脱`aspnetdb.mdf`数据库并更改我的 Web.config 文件中的连接字符串引用我将保留的其他数据库。

当我遇到以下声明时，我正要开始进行更改：

> Aspnet_regsql 工具不应与在用户实例模式下运行的本地安装的 SQL Server Express 一起使用（即，连接字符串包含 User Instance=true）。

在[这里](http://msdn.microsoft.com/en-us/library/x28wfk74.aspx)找到。我的 Web.config 文件`user instance=true`到处都是。这是否意味着我不需要运行 aspnet_reqsql 工具？我可以只更改 Web.config 连接字符串并删除`aspnetdb.mdf`数据库吗？上线后是否需要将其更改`user instance=true`为其他内容？

3) 我已经到了假设我的问题的解决方案涉及 aspnet_regsql 工具以及对 Web.config 文件的一些更改的地步。如果有更简单/更好的解决方案，请告诉我。

澄清一下，我现在正在使用 SQL Express、VS Express 2010 和 ASP.NET MVC 3 进行开发。最终我会将站点移至托管生产环境。因此，我实施的任何解决方案都需要在我上线时继续使用。

就像我说的，我在互联网上做了很多阅读。我已经开始对所有这些东西如何协同工作形成一些想法，但我已经到了这样的地步：我阅读的越多，我的问题就越多，而明确的方向却让我望而却步。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:13:00.647

使用一个分贝。如果您使用的是实体框架 db-first，您可以在 SSMS 中创建所需的表，针对此 db 运行 aspnet_regsql 工具，然后在 Visual Studio 中从这些表中生成一个 .edmx 文件。完成后，您可以使用 AspNetMembershipProvider 作为 API 从代码中与用户交互，或者您可以直接从 dbcontext 类中获取用户。我建议使用 AspNetMembership 提供程序来创建用户。（无论如何，在新的 MVC 3 项目中有很多样板代码），但在特殊情况下，您可能需要直接从您的上下文中与 users 表进行交互。很高兴有选择，但尽量保持一致。

在 SSMS 中，我会编写出您的数据库架构的脚本，然后在您准备好上线时针对生产系统运行它。还有一个用于数据更改的脚本。将这些置于源代码控制之下。

如果您使用的是 Code-First，那么有很多方便的 nuget 包为您的成员资格类 dto 预定义了代码，然后您可以在它们旁边添加自己的 dto 类。

希望这可以帮助。

# php - 如何用 php/html 偏移图像？

> ID：11726825
> 
> 赞同：0
> 
> 时间：2012-07-30T17:49:53.000
> 
> 标签：php, html, css

**我在display.php**中的 foreach 循环在用户点击按钮时从 Main.html 调用，它应该为传递给它的每个 num 生成不同的图像，但是它只显示一个图像。有没有一种方法可以在第一个像素数量之后向右或向左移动每个图像？

**显示.php**

```
<?php
    $mysqli=mysqli_connect('localhost','root','','draftdb');
    if (!$mysqli)
    die("Can't connect to MySQL: ".mysqli_connect_error());

    $stmt = $mysqli->prepare("SELECT display.PICTURE_ID 
    FROM cards  
    INNER JOIN display ON cards.DISPLAY_ID = display.DISPLAY_ID 
    WHERE display.DISPLAY_ID=? AND cards.CARD_TYPE ='rare'" );

    $nums = isset($_POST['nums']) ? $_POST['nums'] : array();
    foreach((array)$nums as $key => $displayid)
    {
        $stmt->bind_param("i", $displayid);
        $stmt->execute();
        $stmt->bind_result($image);
        $stmt->fetch();
        header("Content-Type: image/jpeg");
        echo $image; 
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:53:15.597

该`header("Content-Type: image/jpeg");`指令将强制仅显示第一张图像。

而是编写一个包含`<img>`标签循环的页面，它们`src`指向此脚本（传入一个 ID 或其他内容，以便脚本打印出正确的图像）。

# php - WMD 编辑器回显 wmd-preview div 的值并查询有关将该值存储到数据库中的问题

> ID：11726827
> 
> 赞同：1
> 
> 时间：2012-07-30T17:50:00.453
> 
> 标签：php, javascript, jquery, ajax

我目前正在尝试将 WMD 编辑器添加到我的网站。到目前为止，我一切正常，但现在我遇到了困难：如何将输入的信息存储到我的数据库中？我创建了一个 JS/Ajax 函数，它将 textarea 的值分配给`$wmdVal`但实际上我的值是，`wmd-preview`因为它包含 html 格式的代码。如何获取 div 的值`wmd-preview`并为其分配 php 变量？或者将其存储在数据库中的最佳方法是什么？这是我的[示例](http://webprolearner.ueuo.com/dropdown-menu/test1.php)

**JS/AJAX 实时回显值**

```
<script>
$(document).ready(function() {
    var timer = null; 
    var dataString;   
    function submitForm(){
    $.ajax({ type: "POST",
         url: "test1.php",
         data: dataString,
             success: function(result){
            $('#wmd_result').html( $('#resultval', result).html()); 
              }
       });
        return false;
      }

 $('#wmd-input').on('keyup', function() {
clearTimeout(timer);
timer = setTimeout(submitForm, 1000);
var wmdVal = $("#wmd-input").val();
dataString = 'wmdVal='+ wmdVal;
});
}); 
</script> 
```

**PHP**

```
<?
if (isset($_POST['wmdVal'])){
    $wmdVal = $_POST['wmdVal']; 
    echo ('<div id="wmd_result"><span id="resultval"><h2>PHP Echo result:</h2>'.$wmdVal.'</span></div>');
        }
?> 
```

**HTML 大规模杀伤性武器编辑器**

```
<div id="wmd-editor" class="wmd-panel">
      <div id="wmd-button-bar"></div>
      <textarea id="wmd-input"><? $wmdVal ?></textarea>
</div>
<div id="wmd-preview" class="wmd-panel"></div>
<div id="wmd-output" class="wmd-panel"></div>   
<div id="wmd_result"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:58:03.500

在表单中放置一个隐藏字段，并在提交时获取值`wmd-preview`并将其分配到隐藏字段中，然后让表单提交。然后将数组中的隐藏字段`$_POST`作为普通输入字段访问并保存。

你可以访问`wmd-preview`as

```
 $("#myhidden").val($("#wmd-preview").html()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:07:42.323

如果我理解正确，我认为您只需更换

```
var wmdVal = $("#wmd-input").val(); 
```

和

```
var wmdVal = $("#wmd-preview").html(); 
```

在你上面的代码中。

# javascript - Javascript 参数中的单引号

> ID：11726829
> 
> 赞同：0
> 
> 时间：2012-07-30T17:50:15.640
> 
> 标签：javascript, asp.net, html, syntax, parameters

我有一个功能，单击时会填充父窗口的字段。在这种情况下，它是一个名称（文本）字段。

我遇到的问题是，如果该字段中有一个单引号（例如 Bill's Chili），该函数将失败，因为它将单引号读取为参数的结尾。

这是电话：

```
href="javascript:selectItem('recipe','recipe_name','<recipe_description')" 
```

同样，如果名称是 Bill's Chili，则会导致语法错误。

有没有办法自动将该单引号转换为 HTML 等效项，以便正确读取？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:53:29.173

对于该字段中的单引号，请在[此处](http://www.quackit.com/javascript/tutorial/javascript_escape_characters.cfm)`\'`使用有关转义字符的更多信息。

```
href="javascript:selectItem('Bill\'s Chilli','recipe_name','<recipe_description')" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:20:20.947

我找到的答案与我想象的完全不同。页面本身是用 ASP 编写的（对不起，我忘了提到，我认为这并不重要，因为该函数是 javascript 并且它是在 HTML 中调用的）。

因此，我只是使用了这个：

```
<%fixed_name = Replace(recipe_name,"'","") %> 
```

然后在函数调用中使用 fixed_name 而不是 recipe_name。

感谢您的所有帮助，它使我朝着正确的方向前进！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:53:16.247

尝试这个

```
href='javascript:selectItem("recipe","recipe_name","<recipe_description")' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T17:54:37.627

您可以尝试像这样使用转义的“双”引号：

href="javascript:selectItem(\"recipe\",\"recipe_name\",\"recipe_description\")"

请让我知道它是否有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T17:58:43.107

你可以使用[str.replace](http://www.w3schools.com/jsref/jsref_replace.asp)

只需将 " 替换为 " et ' 替换为 ' 。:)

但实际上，我假设您从 php 脚本（从某种存储）中获取所有这些东西，在这种情况下，您可以直接使用 php 转义引号，这样会更安全。

# c# - Filehelpers 数据链路连接到 Oracle DB

> ID：11726830
> 
> 赞同：3
> 
> 时间：2012-07-30T17:50:18.840
> 
> 标签：c#, oracle, filehelpers

[http://filehelpers.sourceforge.net/example_sqlstorage_extract.html](http://filehelpers.sourceforge.net/example_sqlstorage_extract.html)

上面的示例连接到 SQL Server。

我的要求是连接到 Oracle DB。我在 filehelpers 中找不到可以用来连接到 oracle DB 的类。如果您有任何想法，请提供帮助。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:08:46.423

您可以使用`GenericDatabaseStorage<T>`采用任何 ADO.NET`IDBConnection`类型的类。以下是来自[FileHelpers 源](http://opensourcejavaphp.net/csharp/filehelpers/GenericDatabaseStorageTests.cs.html)的示例。

```
[TestClass]
public class GenericDatabaseStorageTests
{
    [TestMethod]
    public void CurrencyOracleExtractToFile( )
    {
        GenericDatabaseStorage<OracleConnection, OracleCommand> storage =
            new GenericDatabaseStorage<OracleConnection, OracleCommand>( 
                typeof(TestRecord), 
                "User Id=SHELL;Password=shell;Data Source=ora9dev"
            );

        storage.SelectSql = "SELECT * FROM CURRENCY";
        storage.FillRecordCallback = new FillRecordHandler( FillRecordOrder );

        FileDataLink.EasyExtractToFile( storage, "tempord.txt" );

        FileDataLink link = new FileDataLink( storage );
        link.ExtractToFile( "tempord.txt" );

        TestRecord[] res = (TestRecord[])CommonEngine.ReadFile(typeof(TestRecord), "tempord.txt");

        if ( File.Exists( "tempord.txt" ) )
            File.Delete( "tempord.txt" );

        Assert.AreEqual( 3, res.Length );

        Assert.AreEqual( "AED", res[ 0 ].CurrencyCode );
        Assert.AreEqual( "AFA", res[ 1 ].CurrencyCode );
        Assert.AreEqual( "ALL", res[ 2 ].CurrencyCode );
    }

    public void FillRecordOrder( object rec, object[ ] fields )
    {
        TestRecord record = ( TestRecord )rec;

        record.CurrencyCode = ( string )fields[ 0 ];
        record.Name = ( string )fields[ 1 ];
    }
} 
```

# java - 向现有向量添加字段

> ID：11726836
> 
> 赞同：0
> 
> 时间：2012-07-30T17:50:38.823
> 
> 标签：java, file-io, vector

我有一个标准程序，其中列出了人们在面试新成员时使用的面试问题。问题是硬编码的，面试官会记录问题的答案。提交时的答案被添加到一个对象（称为 iQuestions）中，然后存储在服务器上的 .txt 文件中。好吧，时代变了，现在我们想在列表中添加其他问题，这很容易做到，但是当我更改服务器和客户端中的 iQuestions 时，旧记录会因“序列化对象”错误（对象保存的与我试图从中获取的程序中的对象不同。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:55:06.373

这就是没有在 Serializable 类中定义的静态 serialVersionUID 可能会在以后烧毁您的地方。正如您所说，您的可序列化类的新版本与用于保存数据的类不同，因此“自动”反序列化无法确定如何将数据读回新版本的类（[http： //www.javapractices.com/topic/TopicAction.do?Id=45](http://www.javapractices.com/topic/TopicAction.do?Id=45)）。如果您仍然可以访问原始 iQuestions 类，您可以考虑编写一个转换器，使用原始类对问题进行反序列化，然后将相关数据写入另一种格式（也许使用数据库存储问题会更可靠、更容易为了简单起见，在文本文件中更新或存储为 JSON？）。

# xcode - 为什么我不能编译这个命令行 OpenCV Mac 应用程序？

> ID：11726837
> 
> 赞同：3
> 
> 时间：2012-07-30T17:50:41.057
> 
> 标签：xcode, macos, opencv

以下是我的步骤：

1）创建一个命令行工具项目“OpenCV”

2）将文件添加到/usr/local/lib下的项目中，后缀为2.4.2，例如“libopencv_calib3d.2.4.2.dylib”

3）将“/usr/local/include”添加到项目的标题搜索路径

4）输入这个程序：

```
#include <opencv2/opencv.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv/cvaux.hpp>

int main(int argc, char** argv)
{
    IplImage * pInpImg = 0;

    // Load an image from file - change this based on your image name
    pInpImg = cvLoadImage("my_image.jpg", CV_LOAD_IMAGE_UNCHANGED);
    if(!pInpImg)
    {
        fprintf(stderr, "failed to load input image\n");
        return -1;
    }

    // Write the image to a file with a different name,
    // using a different image format -- .png instead of .jpg
    if( !cvSaveImage("my_image_copy.png", pInpImg) )
    {
        fprintf(stderr, "failed to write image file\n");
    }

    // Remember to free image memory after using it!
    cvReleaseImage(&pInpImg);

    return 0;
} 
```

但是，我收到错误：

```
ld: library not found for -lopencv_calib3d.2.4.2
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

哪里有问题？

我正在使用山狮和 Xcode 4.4

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T19:23:11.490

您不需要将 opencv 库添加到您的项目中，但您确实需要链接到库并设置库搜索路径。我能够使用以下设置编译和运行您的程序：

**搜索路径：** ![搜索路径](../Images/ac2a3600a0f99bb96bc18b31d585de18.png)

**图书馆链接：** ![链接库](../Images/76c7f2ad14e22155e92a5f3aed21b356.png)

# java - 单例实例化

> ID：11726840
> 
> 赞同：1
> 
> 时间：2012-07-30T17:50:50.503
> 
> 标签：java, singleton

我编写了如下所示的代码：

```
public class SiteMapFactory {

    public static ISiteMap getSiteMap(Locale loc) {
        ISiteMap returnMap = null;

        if (loc.equals(Locale.US)) {
            returnMap = SiteMap_en_US.getInstance();
        }
        if(loc.equals(new Locale("es","US"))){
            returnMap = SiteMap_en_US.getInstance();
        }
        if(loc.equals(Locale.CANADA)){
            returnMap = SiteMap_fr_CA.getInstance();
        }
        return returnMap;
    }
} 
```

我想为我们网站的 en_US（英语）和 es_US（西班牙语）返回相同的站点地图。所以我正在为西班牙语和英语版本实例化美国站点地图（第三方供应商正在将我们的英语页面转换为西班牙语）。站点地图的实例化方式是使用**singleton**。单例对象创建如下：

```
public class SiteMap_en_US extends SiteMapTree {
    private static SiteMap_en_US m_instance;

    private SiteMap_en_US() {}

    static {
        m_instance = new SiteMap_en_US();
        m_instance.init();
    }

    public static SiteMap_en_US getInstance(){
        return m_instance;
    }

    @Override
    protected void init() {
        //some code
    }
} 
```

我的问题是：我可以重复使用同一个单例对象两次吗？这是实例化单例对象的有效方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:57:44.017

是的，您可以重用相同的单例对象。

但是：如果这样做，则不必在对象中包含任何特殊处理来确定它用于哪种语言，它应该始终以相同的方式运行。

如果您必须使其行为不同，请考虑创建 SiteMap_en_US 的子类（可能是 SiteMap_es_US），该子类派生自 SiteMap_en_US 并有少量行为被覆盖。

可以在对象中进行各种区域设置检查以确定其行为，但我强烈建议考虑一种更易于维护的不同方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:54:06.660

这就是为什么许多人同意 Singleton 是一种反模式的原因。您需要对象的多个实例，每个语言环境一个。这不是单例。我喜欢说 Singleton 只是全局变量的委婉说法。您基本上允许以全局方式访问语言环境。

[Singleton - 反模式](http://accu.org/index.php/journals/337)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T18:05:16.360

您可以创建基础`class SiteMapUS`并扩展它以创建两个子类`SiteMapUSEnglish`和`SiteMapUSSpanish`.

```
public class SiteMapUS{
    protected SiteMapUS(){

    }
}

public class SiteMapUSEnglish{

    protected SiteMapUSEnglish(){

    }

    public SiteMapUSEnglish getInstance(){
        //return instance
    }

}

public class SiteMapUSSpanish{

    protected SiteMapUSSpanish(){

    }

    public SiteMapUSSpanish getInstance(){
        //return instance
    }

} 
```

将所有类放在单独的包中。

这是实现目标的最简单方法。使用这种方法的好处是您可以轻松地修改/添加与语言环境相关的更改，而无需修改其他代码。

# arm - STM32F4Discovery：接收 CAN 报文

> ID：11726846
> 
> 赞同：2
> 
> 时间：2012-07-30T17:51:24.337
> 
> 标签：arm, can-bus, stm32f4discovery

我不知道如何在[STM32F4Discovery](https://en.wikipedia.org/wiki/STM32#Discovery_boards)上接收 CAN 消息。我在 Silent_Loopback 模式下使用它，这意味着所有发送的消息都应该到达 CAN 控制器本身。发送消息时，我得到 Transmit_OK 状态，但是 FIFO 邮箱中没有任何内容。我跳过了 CAN 过滤器配置，以便接收所有消息而不是过滤掉任何消息。我究竟做错了什么？

```
/* Includes */
#include "stm32f4xx.h"
#include "stm32f4_discovery.h"

void Delay(__IO uint32_t nCount) {
    while(nCount--) {
    }
}

void RCC_Configuration(void) {
    /* ENABLE CLOCKS         */
    /* GPIOB clock enable    */
    RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOB, ENABLE);

    /* USART3 clock enable   */
       RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART3, ENABLE);
    /* CAN1 clock enable     */
    RCC_APB1PeriphClockCmd(RCC_APB1Periph_CAN1, ENABLE);

    /* CAN2 clock enable     */
    RCC_APB1PeriphClockCmd(RCC_APB1Periph_CAN2, ENABLE);
}

void GPIO_Configuration(void) {
    GPIO_InitTypeDef GPIO_InitStructureUSART;
    GPIO_InitTypeDef GPIO_InitStructureCAN_RX;
    GPIO_InitTypeDef GPIO_InitStructureCAN_TX;

    /* GPIO USART Configuration */
    GPIO_InitStructureUSART.GPIO_Pin = GPIO_Pin_10 | GPIO_Pin_11;
    GPIO_InitStructureUSART.GPIO_Mode = GPIO_Mode_AF;
    GPIO_InitStructureUSART.GPIO_OType = GPIO_OType_PP;
    GPIO_InitStructureUSART.GPIO_PuPd = GPIO_PuPd_NOPULL;
    GPIO_InitStructureUSART.GPIO_Speed = GPIO_Speed_50MHz;
    GPIO_Init(GPIOB, &GPIO_InitStructureUSART);

    /* Connect USART to AF */
    GPIO_PinAFConfig(GPIOB, GPIO_PinSource10, GPIO_AF_USART3); //USART_TX = PB10
    GPIO_PinAFConfig(GPIOB, GPIO_PinSource11, GPIO_AF_USART3); //USART_RX = PB11

    /* GPIO CAN_RX Configuration */
    GPIO_InitStructureCAN_RX.GPIO_Pin = GPIO_Pin_12;
    GPIO_InitStructureCAN_RX.GPIO_Mode = GPIO_Mode_AF;
    //GPIO_InitStructureCAN_TX.GPIO_OType = GPIO_OType_PP;
    //GPIO_InitStructureCAN_TX.GPIO_PuPd = GPIO_PuPd_NOPULL;
    //GPIO_InitStructureCAN_TX.GPIO_Speed = GPIO_Speed_50MHz;
    GPIO_Init(GPIOB, &GPIO_InitStructureCAN_RX);

    /* GPIO CAN_TX Configuration */
    GPIO_InitStructureCAN_TX.GPIO_Pin = GPIO_Pin_13;
    GPIO_InitStructureCAN_TX.GPIO_Mode = GPIO_Mode_AF;
    GPIO_InitStructureCAN_TX.GPIO_OType = GPIO_OType_PP;
    GPIO_InitStructureCAN_TX.GPIO_PuPd = GPIO_PuPd_NOPULL;
    GPIO_InitStructureCAN_TX.GPIO_Speed = GPIO_Speed_50MHz;
    GPIO_Init(GPIOB, &GPIO_InitStructureCAN_TX);

    /* Connect CAN_RX & CAN_TX to AF9 */
    GPIO_PinAFConfig(GPIOB, GPIO_PinSource12, GPIO_AF_CAN2); //CAN_RX = PB12
    GPIO_PinAFConfig(GPIOB, GPIO_PinSource13, GPIO_AF_CAN2); //CAN_TX = PB13
}

void USART_Configuration(void) {
    USART_InitTypeDef USART_InitStructure;

    /* USART3 configuration */
    /* 256000 baud, window 8 data bits, one stop bit, no parity, no hardware flow control, rx/tx enabled */
    USART_InitStructure.USART_BaudRate = 256000;
    USART_InitStructure.USART_WordLength = USART_WordLength_8b;
    USART_InitStructure.USART_StopBits = USART_StopBits_1;
    USART_InitStructure.USART_Parity = USART_Parity_No;
    USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
    USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;
    USART_Init(USART3, &USART_InitStructure);

    USART_Cmd(USART3, ENABLE);
}

void CAN_Configuration(void) {
    CAN_InitTypeDef CAN_InitStructure;

    /* CAN2 reset */
    CAN_DeInit(CAN2);

    /* CAN2 configuration */
    CAN_InitStructure.CAN_TTCM = DISABLE; // Time-triggered communication mode = DISABLED
    CAN_InitStructure.CAN_ABOM = DISABLE; // Automatic bus-off management mode = DISABLED
    CAN_InitStructure.CAN_AWUM = DISABLE; // Automatic wake-up mode = DISABLED
    CAN_InitStructure.CAN_NART = DISABLE; // Non-automatic retransmission mode = DISABLED
    CAN_InitStructure.CAN_RFLM = DISABLE; // Receive FIFO locked mode = DISABLED
    CAN_InitStructure.CAN_TXFP = DISABLE; // Transmit FIFO priority = DISABLED
    CAN_InitStructure.CAN_Mode = CAN_Mode_Silent_LoopBack; // Normal CAN mode
    CAN_InitStructure.CAN_SJW = CAN_SJW_1tq; // Synchronization jump width = 1
    CAN_InitStructure.CAN_BS1 = CAN_BS1_14tq; //14
    CAN_InitStructure.CAN_BS2 = CAN_BS2_6tq;  //6
    CAN_InitStructure.CAN_Prescaler = 4;      // Baudrate 500 kbps
    //CAN_InitStructure.CAN_Prescaler = 16;   // Baudrate 125 kbps
    if (CAN_Init(CAN2, &CAN_InitStructure)) { // Initialize CAN
        STM_EVAL_LEDInit(LED6); // Initialize and
        STM_EVAL_LEDOn(LED6);   // Turn ON blue LED if CAN initialization is successful
    }
}

void CAN_FilterConfiguration(void) {
    CAN_FilterInitTypeDef CAN_FilterInitStructure;

    /* CAN2 filter configuration */
    CAN_FilterInitStructure.CAN_FilterNumber = 0; // Filter number = 0 (0<=x<=13)
    CAN_FilterInitStructure.CAN_FilterMode = CAN_FilterMode_IdMask; // Filter mode = identifier mask based filtering
    CAN_FilterInitStructure.CAN_FilterScale = CAN_FilterScale_16bit;
    CAN_FilterInitStructure.CAN_FilterIdHigh = 0x0300 << 5; //0x0000;
    CAN_FilterInitStructure.CAN_FilterIdLow = 0x0000;
    CAN_FilterInitStructure.CAN_FilterMaskIdHigh = 0x03FF << 5;
    CAN_FilterInitStructure.CAN_FilterMaskIdLow = 0x0000;
    CAN_FilterInitStructure.CAN_FilterFIFOAssignment = CAN_FIFO0; // FIFO = 0
    CAN_FilterInitStructure.CAN_FilterActivation = ENABLE;
    CAN_FilterInit(&CAN_FilterInitStructure);
}

void CAN_TxMessage(void) {
    CanTxMsg TxMessage;

    /* CAN message to send */
    TxMessage.StdId = 0x321;
    TxMessage.ExtId = 0x01;
    TxMessage.RTR = CAN_RTR_DATA;
    TxMessage.IDE = CAN_ID_STD;
    TxMessage.DLC = 8;
    TxMessage.Data[0] = 0x04;
    TxMessage.Data[1] = 0x01;
    TxMessage.Data[2] = 0x00;
    TxMessage.Data[3] = 0x00;
    TxMessage.Data[4] = 0x00;
    TxMessage.Data[5] = 0x00;
    TxMessage.Data[6] = 0x00;
    TxMessage.Data[7] = 0x00;

    //while (1) {
        CAN_TransmitStatus(CAN2, 0);
        CAN_Transmit(CAN2, &TxMessage);
        if(CAN_TransmitStatus(CAN2, 0)){
            STM_EVAL_LEDInit(LED4); // Initialize and
            STM_EVAL_LEDOn(LED4);   // turn ON green LED if transmit was successful
        }
    //}
}

void CAN_OBDII_RequestCurrentData(int PIDNumber) {
    CanTxMsg TxMessage;

    TxMessage.StdId = 0x7DF; // PID request identifier
    TxMessage.ExtId = 0x7DF;
    TxMessage.RTR = CAN_RTR_DATA;
    TxMessage.IDE = CAN_ID_STD;
    TxMessage.DLC = 8;
    TxMessage.Data[0] = 0x02; // Number of additional bytes = 2
    TxMessage.Data[1] = 0x01; // Show current data = 1
    TxMessage.Data[2] = PIDNumber; // PID code number
    TxMessage.Data[3] = 0x00;
    TxMessage.Data[4] = 0x00;
    TxMessage.Data[5] = 0x00;
    TxMessage.Data[6] = 0x00;
    TxMessage.Data[7] = 0x00;

    CAN_Transmit(CAN2, &TxMessage); // Transmit OBDII PID request via CAN2/mailbox0
}

void CAN_RxMessage(void) {
    CanRxMsg RxMessage;
    int d0=0;
    while(1) {
        CAN_Receive(CAN2,CAN_FIFO0,&RxMessage);

        d0 = RxMessage.Data[0];
        d0 = RxMessage.Data[1];
        d0 = RxMessage.Data[2];
        d0 = RxMessage.Data[3];
        d0 = RxMessage.Data[4];
        d0 = RxMessage.Data[5];
        d0 = RxMessage.Data[6];
        d0 = RxMessage.Data[7];
    }
}

int main(void)
{
    /* Initialize Clocks */
    RCC_Configuration();

    /* Initialize GPIO */
    GPIO_Configuration();

    /* Initialize USART */
    USART_Configuration();

    /* Initialize CAN */
    CAN_Configuration();

    /* Initialize CAN Reception Filter */
    //CAN_FilterConfiguration();

    /* Transfer CAN message */
    CAN_TxMessage();

    /* Receive CAN message */
    CAN_RxMessage(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:16:32.950

您必须配置过滤器以接受所有消息（如果您没有任何过滤器，则不会接受任何消息）。但在您的示例中，您使用的是 CAN2，因此 FilterNumber 必须为 14 或更高。

```
#define CAN_FIFO_ID                0
#define CAN_FIFO                   CAN_FIFO0
#define CAN_FIFO_IN                CAN_IT_FMP0

/**
* @brief Default filter - accept all to CAN_FIFO
*/
void CAN_SetFilter()
{
    /* Default filter - accept all to CAN_FIFO*/
    CAN_FilterInitTypeDef CAN_FilterInitStructure;
    CAN_FilterInitStructure.CAN_FilterNumber = 14; // 0..13 for CAN1, 14..27 for CAN2
    CAN_FilterInitStructure.CAN_FilterFIFOAssignment = CAN_FIFO;
    CAN_FilterInitStructure.CAN_FilterMode = CAN_FilterMode_IdMask;
    CAN_FilterInitStructure.CAN_FilterScale = CAN_FilterScale_16bit;
    CAN_FilterInitStructure.CAN_FilterIdHigh = 0x0000;
    CAN_FilterInitStructure.CAN_FilterIdLow = 0x0000;
    CAN_FilterInitStructure.CAN_FilterMaskIdHigh = 0x0000;
    CAN_FilterInitStructure.CAN_FilterMaskIdLow = 0x0000;
    CAN_FilterInitStructure.CAN_FilterFIFOAssignment = CAN_FIFO_ID;
    CAN_FilterInitStructure.CAN_FilterActivation = ENABLE;
    CAN_FilterInit(&CAN_FilterInitStructure);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T15:10:08.867

分配给 CAN1 和 CAN2 的过滤器数量在 CAN_FMR 寄存器中定义，默认设置为 14，这是 CAN2 过滤器的开始。

这可以设置为 28，这意味着 CAN2 没有过滤器，所有 28 都分配给 CAN1，或者如果设置为 0，则所有 28 个过滤器都分配给 CAN2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-10T07:55:01.673

通常（如果您有有效的过滤器编号）在掩码模式下，任何掩码 = 零都会让所有内容通过。

# asp.net-mvc - ASP.NET MVC 4 拦截所有传入请求

> ID：11726848
> 
> 赞同：79
> 
> 时间：2012-07-30T17:51:35.247
> 
> 标签：asp.net-mvc, asp.net-mvc-4

有没有办法让我捕获到我的 ASP.NET MVC 4 应用程序的**所有**传入请求并运行一些代码，然后再继续请求到指定的控制器/操作？

我需要使用现有服务运行一些自定义身份验证代码，并且要正确执行此操作，我需要能够拦截来自所有客户端的所有传入请求，以仔细检查其他服务的某些内容。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-07-30T17:54:22.387

最正确的方法是创建一个继承[ActionFilterAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute.aspx)和 override`OnActionExecuting`方法的类。然后可以在`GlobalFilters`in中注册`Global.asax.cs`

当然，这只会拦截实际有路由的请求。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-07-30T17:57:54.217

您可以使用 HttpModule 来完成此操作。这是我用来计算所有请求的处理时间的示例：

```
using System;
using System.Diagnostics;
using System.Web;

namespace Sample.HttpModules
{
    public class PerformanceMonitorModule : IHttpModule
    {

        public void Init(HttpApplication httpApp)
        {
            httpApp.BeginRequest += OnBeginRequest;
            httpApp.EndRequest += OnEndRequest;
            httpApp.PreSendRequestHeaders += OnHeaderSent;
        }

        public void OnHeaderSent(object sender, EventArgs e)
        {
            var httpApp = (HttpApplication)sender;
            httpApp.Context.Items["HeadersSent"] = true;
        }

        // Record the time of the begin request event.
        public void OnBeginRequest(Object sender, EventArgs e)
        {
            var httpApp = (HttpApplication)sender;
            if (httpApp.Request.Path.StartsWith("/media/")) return;
            var timer = new Stopwatch();
            httpApp.Context.Items["Timer"] = timer;
            httpApp.Context.Items["HeadersSent"] = false;
            timer.Start();
        }

        public void OnEndRequest(Object sender, EventArgs e)
        {
            var httpApp = (HttpApplication)sender;
            if (httpApp.Request.Path.StartsWith("/media/")) return;
            var timer = (Stopwatch)httpApp.Context.Items["Timer"];

            if (timer != null)
            {
                timer.Stop();
                if (!(bool)httpApp.Context.Items["HeadersSent"])
                {
                    httpApp.Context.Response.AppendHeader("ProcessTime",
                                                          ((double)timer.ElapsedTicks / Stopwatch.Frequency) * 1000 +
                                                          " ms.");
                }
            }

            httpApp.Context.Items.Remove("Timer");
            httpApp.Context.Items.Remove("HeadersSent");

        }

        public void Dispose() { /* Not needed */ }
    }

} 
```

这就是您在 Web.Config 中注册模块的方式：

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
        <add name="PerformanceMonitorModule" type="Sample.HttpModules.PerformanceMonitorModule" />
    </modules>
<//system.webServer> 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-12-10T08:44:11.483

我认为您搜索的是：

```
Application_BeginRequest() 
```

[http://www.dotnetcurry.com/showarticle.aspx?ID=126](http://www.dotnetcurry.com/showarticle.aspx?ID=126)

你把它放进去`Global.asax.cs`。

```
 protected void Application_BeginRequest(object sender, EventArgs e)
    {
        HttpContext.Current.Request.....;
    } 
```

我将其用于调试目的，但我不确定它对您的情况有多好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-25T13:07:00.360

我不确定 MVC4，但我认为它与 MVC5 非常相似。如果您已经创建了一个新的 Web 项目 -> 查看，您应该会在方法中 `Global.asax`看到以下行。`FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);``Application_Start()`

`RegisterGlobalFilters``FilterConfig.cs`是位于文件夹中的文件中的一个方法`App_Start`。

正如@YngveB-Nilsen 所说`ActionFilterAttribute`，我认为这是要走的路。添加一个派生自`System.Web.Mvc.ActionFilterAttribute`. 这很重要，因为`System.Web.Http.Filters.ActionFilterAttribute`例如会因以下异常而失败。

> 给定的过滤器实例必须实现以下一个或多个过滤器接口：System.Web.Mvc.IAuthorizationFilter、System.Web.Mvc.IActionFilter、System.Web.Mvc.IResultFilter、System.Web.Mvc.IExceptionFilter、System.Web .Mvc.Filters.IAuthenticationFilter。

将请求写入调试窗口的示例：

```
public class DebugActionFilter : System.Web.Mvc.ActionFilterAttribute
{
  public override void OnActionExecuting(ActionExecutingContext actionContext)
  {
    Debug.WriteLine(actionContext.RequestContext.HttpContext.Request);
  }
} 
```

在`FilterConfig`-> `RegisterGlobalFilters`-> 中添加以下行：`filters.Add(new DebugActionFilter());`.

您现在可以捕获所有传入请求并修改它们。

# c++ - Boost 的 Dijkstra 算法教程

> ID：11726857
> 
> 赞同：7
> 
> 时间：2012-07-30T17:52:10.737
> 
> 标签：c++, visual-c++, boost, dijkstra

我很难弄清楚如何使用 Boost 的 Dijkstra 算法。我已经查看了他们的示例和文档，但我仍然无法理解如何使用它。

[Boost 的文档：http://www.boost.org/doc/libs/1_50_0/libs/graph/doc/dijkstra_shortest_paths.html] [Dijkstra 示例：http://www.boost.org/doc/libs/1_36_0 /libs/graph/example/dijkstra-example.cpp]

有人可以通过代码示例提供一步一步的解释来展示如何使用 Boost 的 Dijkstra 算法吗？我正在为我的图表使用 Boost 的 adjacency_list，就像上面的示例链接一样。（邻接列表：http: [//www.boost.org/doc/libs/1_50_0/libs/graph/doc/adjacency_list.html](http://www.boost.org/doc/libs/1_50_0/libs/graph/doc/adjacency_list.html)）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-01T22:53:27.227

关于评论中的问题：

1.  根据示例 VC++ 源代码中的注释，使用的[命名参数机制](http://www.boost.org/doc/libs/1_36_0/libs/graph/doc/bgl_named_params.html)存在一些问题。因此，我假设两个分支的想法基本相同，只是 VC++ 版本更加冗长（尽管我没有深入研究它足够长的时间来 100% 确定）。
2.  A`property_map`将顶点/边映射到与特定顶点/边关联的附加数据。例如`weightmap`，示例中的 将权重（旅行成本）与每条边相关联。
3.  `predecessor_map`用于记录所有顶点的路径（对于每个顶点，记录从根开始的路径上的前驱）。至于为什么需要它：嗯，这些信息是人们经常希望从算法中得到的东西。

4.  参数清楚地列在[说明](http://www.boost.org/doc/libs/1_36_0/libs/graph/doc/dijkstra_shortest_paths.html)中。注意这两个版本，一个带有命名参数，一个没有（后者在 VC++ 中使用）。

现在逐步[了解文档](http://www.boost.org/doc/libs/1_36_0/libs/graph/example/dijkstra-example.cpp)中给出的示例代码（请注意，我从未真正使用过 Boost.Graph，所以这不能保证正确性，我也只包括了相关部分并省略了`#if`for VC++）：

```
 const int num_nodes = 5;
  //names of graph nodes
  enum nodes { A, B, C, D, E };
  char name[] = "ABCDE";
  //edges of the graph
  Edge edge_array[] = { Edge(A, C), Edge(B, B), Edge(B, D), Edge(B, E),
    Edge(C, B), Edge(C, D), Edge(D, E), Edge(E, A), Edge(E, B)
  };
  //weights/travelling costs for the edges
  int weights[] = { 1, 2, 1, 2, 7, 3, 1, 1, 1 };
  int num_arcs = sizeof(edge_array) / sizeof(Edge);

  //graph created from the list of edges
  graph_t g(edge_array, edge_array + num_arcs, weights, num_nodes);
  //create the property_map from edges to weights
  property_map<graph_t, edge_weight_t>::type weightmap = get(edge_weight, g);

  //create vectors to store the predecessors (p) and the distances from the root (d)
  std::vector<vertex_descriptor> p(num_vertices(g));
  std::vector<int> d(num_vertices(g));
  //create a descriptor for the source node
  vertex_descriptor s = vertex(A, g);

  //evaluate dijkstra on graph g with source s, predecessor_map p and distance_map d
  //note that predecessor_map(..).distance_map(..) is a bgl_named_params<P, T, R>, so a named parameter
  dijkstra_shortest_paths(g, s, predecessor_map(&p[0]).distance_map(&d[0])); 
```

正如我个人在评论中提到的那样，我发现[柠檬](http://lemon.cs.elte.hu/trac/lemon/wiki/Documentation)使用起来比 Boost.Graph 更直观，所以也许你可能想看看它

# javascript - jQuery empty() 、 click() 和内存管理

> ID：11726864
> 
> 赞同：2
> 
> 时间：2012-07-30T17:52:47.417
> 
> 标签：javascript, jquery, html, cross-browser, jquery-events

只是想知道如何从内存的角度进行管理。

假设我有这个 HTML 页面。

```
<div id="container">
    <div id="someID"></div>
<div> 
```

和以下 jQuery 代码：

```
$("#someID").click(function(){
    //do something
}); 
```

现在在我的脚本中的某个地方，我需要清空（清除）以下所有内容`#container`：

```
$("#container").empty(); 
```

这会自动删除/取消绑定点击事件，还是我必须自己做？

这是浏览器特有的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T17:54:01.857

是的，该[`.empty()`](http://api.jquery.com/empty)方法取消绑定处理程序，并清除所有其他`jQuery.cache`嵌套在`#container`.

jQuery 仅将单个（通用）处理程序绑定到元素。所有其他处理程序和数据都存储在`jQuery.cache`. 每个元素的数据由 jQuery 直接放在 DOM 节点上的序列号交叉引用。

所以这是一个 jQuery 特定的系统。唯一与浏览器相关的问题是 jQuery 如何绑定通用处理程序，而 jQuery 也负责解除绑定。

* * *

*从文档：*

> *“为了避免内存泄漏，jQuery 在删除元素本身之前从子元素中删除了其他结构，例如数据和事件处理程序。”*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T17:59:33.283

我想你在找什么，是..

```
$('something').remove();  /removes element and children

$('something').empty(); // clears children 
```

两者都将删除所有`data`并`events`与已删除元素相关联。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T17:57:25.277

[`jQuery.empty()`](http://api.jquery.com/empty/)：

> 为了避免内存泄漏，jQuery 在删除元素本身之前从子元素中删除其他构造，例如数据和事件处理程序。
> 
> 如果您想删除元素而不破坏其数据或事件处理程序（以便以后可以重新添加），请`.detach()`改用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-31T16:57:37.883

`$("#container").unbind();` // 从元素中移除先前附加的事件处理程序。

`$('something').empty();` //清除孩子。

`$('something').remove();` // 移除元素和子元素。

# python - 使数组索引 1 而不是基于索引 0

> ID：11726866
> 
> 赞同：7
> 
> 时间：2012-07-30T17:52:57.767
> 
> 标签：python

如何使数组从下标 1 而不是 python 中的下标 0 开始？

基本上是在python中解决这个[问题。](http://www.mathworks.com/support/solutions/en/data/1-8G5UD6/index.html?product=EL&solution=1-8G5UD6)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-30T17:59:15.503

如果你真的想这样做，你可以创建一个包装列表的类，并实现`__getitem__`和`__setitem__`成为一个基础。例如：

```
def __getitem__(self, index):
  return self.list[index-1]

def __setitem__(self, index, value):
  self.list[index-1] = value 
```

但是，要获得 Python 列表的全部灵活性，您必须实现对切片、删除等的支持。如果您只想要一个简单的列表视图，一次一个项目，这应该可以为您完成。 '

有关创建类似于序列或映射的自定义类的更多信息，请参阅[Python 数据模型文档。](http://docs.python.org/reference/datamodel.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-30T18:44:40.910

您可以使用 enumerate() 方法

```
a = ['a', 'c', 'v', 's']
for i,v in enumerate(a, 1):
    print i, v

1 a
2 c
3 v
4 s 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-30T18:05:09.737

+1 到[最大](https://stackoverflow.com/users/1442918/max)。这是您可以尝试的其他方法：

只需`None`在列表的索引 0 处添加一个。这应该为您提供功能。`None`当您将列表传递给 MATLAB 时，您只需要记住剪掉前导

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-10T15:13:35.953

您可以使用`fidx`模块的自定义索引：

```
import fidx

# create custom type `list1b` from `list`
fidx.add(list, name='list1b')

# add a map for int indexes (i -> i-1)
fidx.list1b.set_index_map(int, lambda _,i: i-1, override=True)

# create your list
b = fidx.list1b([1,2,3])

print(b[1], b[2], b[3]) # (1, 2, 3) 
```

# jsf-2 - 在面孔消息 JSF 2.0 中添加 URL

> ID：11726870
> 
> 赞同：1
> 
> 时间：2012-07-30T17:53:13.243
> 
> 标签：jsf-2

要求是向用户显示一条面孔消息，其中应包含一个可点击的链接。faces 消息被添加到 backing bean 中。

我目前正在显示消息并在下一行显示链接。

有没有办法在面孔消息中组合链接。

```
 <h:inputHidden id="error"/>
 <h:message styleClass="error" for="error" />

<h:link value="Go to page"  outcome="login.xhtml"/> 
```

# .net - 自定义安装后使用添加引用将 dll 添加到 VS2010

> ID：11726876
> 
> 赞同：0
> 
> 时间：2012-07-30T17:53:21.190
> 
> 标签：.net, visual-studio-2010, installation, installshield

安装我们的自定义安装（使用 InstallShield 创建）后，用户应该能够使用 VS Add Reference 来查找 dll，而无需使用 Browse 手动添加它们。这适用于所有早期版本的 Visual Studio（使用 .NET、2005 和 2008 测试）。但是，dll 不存在于 VS2010 下的“添加参考”部分中。我尝试在安装后重新启动并将 .NET 框架过滤器更改为每个可用选项（2.0、3.0、3.5、3.5 CP、4、4 CP）...

欢迎任何想法......我在这里撞墙。

谢谢，-jp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:48:45.350

看来 VS2010 现在正在注册表中查看特定的 .NET 框架键（与 VS2008 及之前不同）。因此，用户必须使用 Chris 在他的回答中指出的链接 ( [http://support.microsoft.com/kb/306149](http://support.microsoft.com/kb/306149) )，而是添加到这些 .NET 框架关键位置。

例如，我希望我的程序集出现在 VS2010 Add Reference for .NET 选项卡中的所有版本的 .NET 框架过滤器中。因此，我将在 Win7 x64 机器上的以下 2 个位置添加我的程序集：

HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft.NETFramework\v2.0.50727\AssemblyFoldersEx

和

HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft.NETFramework\v4.0.30319\AssemblyFoldersEx

...如果它只是 32 位，只需从上面的路径位置中删除 Wow6432Node 键。希望这对其他人有帮助。-J.P

# c# - 中继器上的 ItemDataBound 错误

> ID：11726877
> 
> 赞同：1
> 
> 时间：2012-07-30T17:53:23.033
> 
> 标签：c#, asp.net, repeater, itemdatabound

我正在使用 asp.net 中的中继器，并在尝试调试时不断收到此错误。我已经在这个应用程序中有多个中继器，并且这些中继器都可以正常工作，没有问题。当我将这个添加到页面顶部时，会出现此错误。当我摆脱项目数据绑定部分时，不会出现该错误。我确实在 c# 中设置了一个具有正确名称的方法。

> 说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：CS1061：“ASP.default_aspx”不包含“rptCert_ItemDataBound”的定义，并且找不到接受“ASP.default_aspx”类型的第一个参数的扩展方法“rptCert_ItemDataBound”（您是否缺少 using 指令或装配参考？）

源错误：

```
Line 55: 
Line 56:         <b>Certifications</b><br />
Line 57:         <asp:Repeater ID="rptCert" runat="server" 
Line 58:             onitemdatabound="rptCert_ItemDataBound">
Line 59:             <HeaderTemplate>

<asp:Repeater ID="rptCert" runat="server" OnItemDataBound="rptCert_ItemDataBound">
        <HeaderTemplate>
            <table>
                <tr>
                    <td width="200px"></td>
                    <td width="30px"></td>
                </tr>
        </HeaderTemplate>
        <ItemTemplate>
            <tr>
                <td>
                    <asp:Label runat="server" ID="lblAcct"></asp:Label>
                </td>
                <td>
                    <asp:TextBox runat="server" ID="txtCert"></asp:TextBox>
                </td>
            </tr>
        </ItemTemplate>
        <FooterTemplate>
            </table>
        </FooterTemplate>
    </asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:56:15.420

你需要定义函数`rptCert_ItemDataBound`

您是否删除了后面的代码或不包含该功能-也许您有错误并且无法编译？

* * *

因为你的标题是这样说的：

```
Inherits="Interaction_Experience_Update._Default" 
```

at 的对象`Inherits="Interaction_Experience_Update._Default"`必须具有此模板的功能：

```
void rptCert_ItemDataBound(Object Sender, RepeaterItemEventArgs e)
  {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:13:08.393

我打电话给我的一个朋友，他说我陷入了无限循环。我通过右键单击屏幕右下方的图标停止了 ASP.NET Developer Server。停止后，它开始正常运行。提取数据并点击事件代码。

# python - 如何在 Python 2.7 中设置 HTTP 代理？

> ID：11726881
> 
> 赞同：77
> 
> 时间：2012-07-30T17:53:31.803
> 
> 标签：python

我正在尝试运行一个安装 pip: get-pip.py 的脚本，并且由于我的网络位于 HTTP 代理后面而导致连接超时。有什么方法可以在我的 Python 2.7 安装中配置 HTTP 代理，以便能够安装我要安装的东西？

注意：我使用的是 Windows。以下是我得到的错误：

```
C:\SetupFiles>python get-pip.py
Downloading/unpacking pip
  Cannot fetch index base URL http://pypi.python.org/simple/
  Could not find any downloads that satisfy the requirement pip
No distributions at all found for pip 
```

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-07-30T18:03:53.950

看起来`get-pip.py`已经更新为使用环境变量`http_proxy`和`https_proxy`.

视窗：

```
set http_proxy=http://proxy.myproxy.com
set https_proxy=https://proxy.myproxy.com
python get-pip.py 
```

Linux/OS X：

```
export http_proxy=http://proxy.myproxy.com
export https_proxy=https://proxy.myproxy.com
sudo -E python get-pip.py 
```

但是，如果这仍然对您不起作用，您始终可以使用[setuptools](https://pypi.python.org/pypi/setuptools)通过代理安装 pip，方法`easy_install`是设置相同的环境变量。

视窗：

```
set http_proxy=http://proxy.myproxy.com
set https_proxy=https://proxy.myproxy.com
easy_install pip 
```

Linux/OS X：

```
export http_proxy=http://proxy.myproxy.com
export https_proxy=https://proxy.myproxy.com
sudo -E easy_install pip 
```

然后一旦安装，使用：

```
pip install --proxy="user:password@server:port" packagename 
```

从[pip 手册页](http://manpages.ubuntu.com/manpages/lucid/man1/pip.1.html)：

> --proxy 让
> pip 使用代理服务器访问站点。这可以使用“user:password@proxy.server:port”表示法来指定。如果密码被遗漏，pip 会要求输入密码。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-26T09:36:59.617

在我的网络上，仅设置 http_proxy 对我不起作用。以下几点是相关的。

1 执行 sudo 时不会保留为您的用户设置的 http_proxy - 要保留它，请执行以下操作：

```
sudo -E yourcommand 
```

我通过首先安装 cntlm 本地代理来进行安装。这里的说明很简洁： http: [//www.leg.uct.ac.za/howtos/use-isa-proxies](http://www.leg.uct.ac.za/howtos/use-isa-proxies)

而不是学号，你会输入你的域用户名

2 要使用 cntlm 本地代理，请执行：

```
pip install --proxy localhost:3128 pygments 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-07T09:33:46.593

您几乎可以按照第一个答案中的描述安装`pip`（或任何其他软件包） 。`easy_install`但是，您也需要`HTTPS`代理。完整的命令序列是：

```
set http_proxy=http://proxy.myproxy.com
set https_proxy=http://proxy.myproxy.com
easy_install pip 
```

您可能还想为代理添加一个端口，例如`http{s}_proxy=http://proxy.myproxy.com:8080`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-18T16:42:43.303

您可以尝试从此处下载 pip 的 Windows 二进制文件：[http](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pip) ://www.lfd.uci.edu/~gohlke/pythonlibs/#pip 。

要使用 pip 下载其他模块，请参阅[@Ben Burn 的回答](https://stackoverflow.com/a/11727032/1165522)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-21T14:25:40.980

为了在代理后面使用 get-pip.py 安装 pip，我执行了以下步骤。我的服务器甚至落后于跳转服务器。

从跳转服务器：

```
ssh -R 18080:proxy-server:8080 my-python-server 
```

在“python服务器”上

```
export https_proxy=https://localhost:18080 ; export http_proxy=http://localhost:18080 ; export ftp_proxy=$http_proxy
python get-pip.py 
```

成功。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-16T05:11:49.707

```
cd C:\Python34\Scripts

set HTTP_PROXY= DOMAIN\User_Name:Passw0rd123@PROXY_SERVER_NAME_OR_IP:PORT#

set HTTP_PROXY= DOMAIN\User_Name:Passw0rd123@PROXY_SERVER_NAME_OR_IP:PORT#

pip.exe install PackageName 
```

# java - 数据库日期时间到 java.util.Date 的时区转换

> ID：11726883
> 
> 赞同：1
> 
> 时间：2012-07-30T17:53:38.710
> 
> 标签：java, hibernate, date, jdbc, timezone

我的任务是将存储在我的 DB（Sql Server）表的列中的时间转换为指定的时区。该列始终包含 UTC 时区的时间。

我面临的问题是，当休眠*读取*列并将其设置为我的实体类时，它会在应用程序服务器的时区设置时间。

例如：如果 DB 具有值 - 2012 年 7 月 7 日 10:30（实际上是 UTC），则休眠将映射日期字段设置为 2012 年 7 月 7 日 10:30 PST（假设 JVM 在 PST 运行）。

现在，如果此日期转换为任何其他时区.. 说 GMT+5:30，我会得到意想不到的结果

要解决上述问题...我编写了以下代码

```
 //Reading the DB time (which does not have timezone info)
 Date dbDate = entityObj.getDBUtcDate();

 //Setting GMT timezone to the date, without modifying the date
 Calendar c = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
 c.set(dbDate.getYear(), dbDate.getMonth(), dbDate.getDate()..., dbDate.getMinutes());

 Date utcDate = c.getTime(); 
```

使用上面的代码..我可以将数据库存储在**UTC***时*区中，但是当我使用以下逻辑转换到其他时区（比如 GMT+5:30）时

```
Calendar outCal = Calendar.getInstance(TimeZone.getTimeZone("GMT+5:30"));
outCal.setTimeInMillis(utcDate.getTime());

Calendar cal = Calendar.getInstance();
cal.set(Calendar.YEAR, outCal.get(Calendar.YEAR));
cal.set(Calendar.MONTH, outCal.get(Calendar.MONTH));
cal.set(Calendar.DAY_OF_MONTH, outCal.get(Calendar.DAY_OF_MONTH));
cal.set(Calendar.HOUR_OF_DAY, outCal.get(Calendar.HOUR_OF_DAY));                                              
cal.set(Calendar.MINUTE, outCal.get(Calendar.MINUTE));
cal.set(Calendar.SECOND, outCal.get(Calendar.SECOND));
cal.set(Calendar.MILLISECOND, outCal.get(Calendar.MILLISECOND));

//Converted date
Date pstTime = cal.getTime();
//Converted time mill seconds
long timeMilSec = pstTime.getTime(); 
```

转换日期的时间毫秒开始为负数（-54672...），这似乎表示无效时间。

我的问题是如何从数据库恢复时区信息（无需在数据库中有任何额外的列来专门存储时区信息）？

或者

如何将数据库时间转换为具有指定时区（UTC）的时间？

*PS：我希望以 java.util.Date/Calendar 的形式输出，因为我需要在这个日期再做一次转换*

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T18:06:52.637

Java 中的日期没有时区。它们只是一个普遍的瞬间。如果要在给定时区显示日期，则只需使用使用该时区初始化的 DateFormat：

```
DateFormat df = DateFormat.getInstance();
df.setTimeZone(TimeZone.getTimeZone("UTC"));
System.out.println("The date in the database, in the UTC time zone, is " 
                   + df.format(date)); 
```

你不需要转换任何东西。日期格式根据它格式化的通用瞬间以及您告诉它使用的时区打印适当的值。

同样，如果您想知道日期是星期一还是星期二，或者是 1 点钟还是 2 点钟，您需要先选择一个时区，将其转换为日历，然后向日历询问信息：

```
Calendar cal = Calendar.getInstance(someTimeZone);
cal.setTime(date);
System.out.println("The day for the date stored in the database, for the time zone "
                   + someTimeZone
                   + " is " + cal.get(Calendar.DATE)); 
```

旁注：不要使用不推荐使用的方法。有充分的理由不推荐使用它们。

# xforms - 获取唯一产品的总重量

> ID：11726884
> 
> 赞同：0
> 
> 时间：2012-07-30T17:53:54.403
> 
> 标签：xforms, xfdl

大家好，我需要你的帮助！我一直在编写一个代码，该代码将获取属于第二级循环的每个唯一产品 ID 的总权重。这是我正在使用的代码。但我得到的输出是 110，应该只有 60。先感谢您！

```
<xforms:bind calculate="sum(instance('Generated')/page1/table1/item[sublinesA[not(sublineA/prodid = preceding-sibling::sublinesA/sublineA/prodid)]]/sublinesA/sublineA[not(prodid = preceding-sibling::sublineA/prodid)]/weight)" nodeset"instance('Generated')/page1/table1/totalwgt"></xforms:bind>

    <item>
    <sublinesA>
         <sublineA>
             <prodid>AAA</prodid>
             <weight>10</weight>
         </sublineA>
         <sublineA>
             <prodid>AAA</prodid>
             <weight>10</weight>
         </sublineA>
         <sublineA>
            <prodid>BBB</prodid>
            <weight>20</weight>
         </sublineA>
    </sublinesA>
   </item>

   <item>
    <sublinesA>
         <sublineA>
             <prodid>BBB</prodid>
             <weight>20</weight>
         </sublineA>
         <sublineA>
             <prodid>BBB</prodid>
             <weight>20</weight>
         </sublineA>
         <sublineA>
             <prodid>CCC</prodid>
             <weight>30</weight>
         </sublineA>
   </sublinesA>
   </item>

    <item>
     <sublinesA>
         <sublineA>
             <prodid>CCC</prodid>
             <weight>30</weight>
         </sublineA>
     </sublinesA>
   </item> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T02:02:13.240

您的`calculate`表达式选择`sublinesA / sublineA / weight`其父`sublineA`元素的产品 ID 与其前一个*兄弟*元素不同的每个元素。因此，第二项`BBB`中的第一项`item`被计算在内，`CCC`第三项中的第一项也是如此。

如果您打算按项目计算重量，那么期望总和为 60 是错误的；您应该期待三个总和 30、50、30。

另一方面，如果您打算对给定表中所有项目的权重求和（并且考虑到计算的绑定方式，我猜您是这样），那么`[not(prodid = preceding-sibling::sublineA/prodid)]`这不是正确的谓词。

如果实例中只有一个`table1`实例，则只需替换`[not(prodid = preceding::sublineA/prodid)]`. 如果不止一个，您将需要做一些非常聪明的 XPath，或者可能重新构建文档以使其更容易做您需要的事情。

（这与您的问题无关，但我顺便指出您正在检查谓词两次；除非我遗漏了什么，否则可以删除第一个双重嵌套谓词而不改变表达式的含义。除非您的 XForms 引擎真的积极优化优化，我预计第一个谓词的唯一效果是减慢速度。）

# javascript - 事件委托，为什么这不起作用，按 id 选择目标

> ID：11726886
> 
> 赞同：0
> 
> 时间：2012-07-30T17:54:00.840
> 
> 标签：javascript, onclick, dom-events, event-delegation, targeting

* * *

**编辑#2：** 问题不存在了。这是某种范围界定问题。但现在它正在工作。对于给您带来的不便，我深表歉意。

* * *

在我的脚本的某些部分有一个事件委托并通过 id 指定目标。但是当我运行它时。这条线`if(evt.target.id == ("subtaskSubmit" + subtaskCounter))`似乎根本不起作用。这是我的代码：

```
var subtaskCounter = 0;
aWholeTask.addEventListener("click", function(evt){         
            //other event targets specifications ..

                if(evt.target.id == "divide"){  
                    var subtaskInput = document.createElement("input"), 
                    subtaskSubmit = document.createElements.button("submit"), // this is a special function i've made, don't bother about it. I've used it all over the place and it's working normally.
                    subtaskContainer = document.createElement("p");
                    subtaskContainer.style.marginLeft = "40px";
                    subtaskInput.id = "subtaskInput" + (++subtaskCounter);
                    subtaskInput.type = "text";

                    subtaskSubmit.id = "subtaskSubmit" + subtaskCounter;
                    subtaskContainer.appendChildren(subtaskInput,subtaskSubmit);                
                    aWholeTask.appendChild(subtaskContainer);
                }

                if(evt.target.id == ("subtaskSubmit" + subtaskCounter)){
                    //this event is the one that not working when i press on that element
                    alert("hello");                     

                }   
        }); 
```

**编辑：** 我做了一些更改来调试代码，结果很奇怪：

```
 var subtaskCounter = 0;
aWholeTask.addEventListener("click", function(evt){         
            //other event targets specifications ..

                if(evt.target.id == "divide"){  
                    var subtaskInput = document.createElement("input"), 
                    subtaskSubmit = document.createElements.button("submit"), // this is a special function i've made, don't bother about it. I've used it all over the place and it's working normally.
                    subtaskContainer = document.createElement("p");
                    subtaskContainer.style.marginLeft = "40px";
                    subtaskInput.id = "subtaskInput" + (++subtaskCounter);
                    subtaskInput.type = "text";

                    subtaskSubmit.id = "subtaskSubmit" + subtaskCounter;
                    subtaskContainer.appendChildren(subtaskInput,subtaskSubmit);                
                    aWholeTask.appendChild(subtaskContainer);
                }

                    if(evt.target.innerHTML == "Submit"){

                        alert(evt.target.id == ("subtaskSubmit" + subtaskCounter)); 
                        //And this surprisingly returns false !         
                    }   
            }); 
```

那么为什么会`evt.target.id == ("subtaskSubmit" + subtaskCounter)`退货`false`呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:30:14.913

看起来问题是因为您正在`subtaskCounter`由许多处理程序共享。调用 to 是否有循环`aWholeTask.addEventListener("click", ...)`？

如果有，那么在调用单击处理程序时，`subTaskCounter`将始终指向导致它退出循环的值。

**例子**

```
var subtaskCounter = 0;
while (subCounter < 5) {
    aWholeTask.addEventListener("click", function(evt){
        console.log(subTaskCounter);
    }); 
    subTaskCounter ++;
} 
```

在上面的示例中，您会注意到`subTaskCounter`调用单击处理程序时始终为 5（导致循环结束的值）。它是所有处理程序共享的同一个变量。如果这确实是您的问题，您需要*冻结您的闭包*。这是一种方法，使用自调用匿名函数。

```
var subtaskCounter = 0;
while (subCounter < 5) {
    aWholeTask.addEventListener("click", (function(frozenSubTaskCounter) {
        return function(evt){
            console.log(frozenSubTaskCounter);
        };
    })(subTaskCounter)); 
    // The line above creates a separate closure `frozenSubTaskCounter`
    // for each of the handlers
    subTaskCounter ++;
} 
```

在上面的示例中，您会看到`console.log()`它将输出您想要的值。

# sql - 联合2表并根据数据源设置值

> ID：11726890
> 
> 赞同：0
> 
> 时间：2012-07-30T17:54:07.980
> 
> 标签：sql, set, union

试图解决这个问题...

我需要一个查询，将两个表合并为 1，我在下面...

```
select PersonId, PersonFirstName, PersonLastName
from dbo.Person
UNION 
SELECT AdminId as PersonsId, AdminFirstName as PersonsFirstName, AdminLastName as       PersonsLastName
from dbo.UserAdmins 
```

我想创建一个新列并根据记录的来源为“Person”或“Admin”分配一个值。因此，如果记录 1-10 来自 dbo.Person，则新列将填写为“Person”，如果接下来的 5 条来自 Admin，则新列将填写为“Admin”。

这似乎比较简单，但不知道从哪里开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:55:51.440

您只需要添加一个具有所需值的新列：

```
select PersonId
    , PersonFirstName
    , PersonLastName
    , 'Person' as yourColName
from dbo.Person
UNION ALL
SELECT AdminId as PersonsId
    , AdminFirstName as PersonsFirstName
    , AdminLastName as       PersonsLastName
    , 'Admin' as yourColName
from dbo.UserAdmins 
```

# java - 如何让计时器在点击时停止

> ID：11726891
> 
> 赞同：1
> 
> 时间：2012-07-30T17:54:10.257
> 
> 标签：java, android, timer

我的计时器将在达到某个数字时停止。相反，我希望它在单击按钮时停止。我怎么做？这是我的代码目前的样子：

```
final TextView t1 = (TextView) findViewById(R.id.yourpay);

final Timer t =new Timer();
t.schedule(new TimerTask() {

        @Override
        public void run() {
            runOnUiThread(new Runnable() {

                    public void run() {
                        money = (PPS+Reserve);
                        Reserve = (money);
                        t1.setText("$" + money); //Place your text data here
                        counter++;

                        //Place your stopping condition over here. Its important to have a stopping condition or it will go in an infinite loop. 
                        if(counter == HPDPS)
                            t.cancel(); 
                    }
            }); 
        }
    }, 1000, 1000); 
```

如果可能的话，我希望它在按钮单击和计数器达到 HPDPS 时停止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:59:07.057

放入您的按钮`onClickListener()`：

```
if (t != null)
    t.cancel(); 
```

并从计时器中删除停止条件。

* * *

**代码示例（更新）：**

```
final TextView t1 = (TextView) findViewById(R.id.yourpay);

final Timer t =new Timer();
t.schedule(new TimerTask() {

    @Override
    public void run() {
        runOnUiThread(new Runnable() {

            public void run() {
                money = (PPS+Reserve);
                Reserve = (money);
                t1.setText("$" + money); //Place your text data here

                // Removed the stopping condition/counter

            }
        }); 
    }
}, 1000, 1000); // Do you really want to wait 1 second before executing the timer's code?  If not, change the 1st "1000" to a "0"

final Button b = (Button) findViewById(R.id.my_button_id); // Replace with your button's id
b.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        if (t != null)
            t.cancel();
        }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:57:31.027

使用倒数计时器。单击按钮时，只需停止计时器。

但是对于您刚刚创建的按钮，请在按钮上设置 OnClickListener，然后调用 timer.cancel() 或在侦听器的 onClick() 方法中停止它。

# c++ - 使用 C++ 更改 Fortran 输入文件中的变量

> ID：11726892
> 
> 赞同：1
> 
> 时间：2012-07-30T17:54:11.037
> 
> 标签：c++, loops, fortran

我希望有人能给我建议，以便从 C++ 应用程序轻松更改 Fortran 输入文件中各种变量的值。

我有一个用 Fortran 编写的模型，但正在编写一个 C++ 应用程序以循环执行模型，但在每次模型执行后更改模型参数的值。

任何意见，将不胜感激。

谢谢！

```
 .Pnd file Subbasin: 1 7/26/2012 12:00:00 AM ArcSWAT 2009.93.7
Pond inputs:
           0.000    | PND_FR : Fraction of subbasin area that drains into ponds. The value for PND_FR should be between 0.0 and 1.0\. If PND_FR = 1.0, the pond is at the outlet of the subbasin on the main channel
           0.000    | PND_PSA: Surface area of ponds when filled to principal spillway [ha]
           0.000    | PND_PVOL: Volume of water stored in ponds when filled to the principal spillway [104 m3]
           0.000    | PND_ESA: Surface area of ponds when filled to emergency spillway [ha]
           0.000    | PND_EVOL: Volume of water stored in ponds when filled to the emergency spillway [104 m3]
           0.000    | PND_VOL: Initial volume of water in ponds [104 m3]
           0.000    | PND_SED: Initial sediment concentration in pond water [mg/l]
           0.000    | PND_NSED: Normal sediment concentration in pond water [mg/l]
           0.000    | PND_K: Hydraulic conductivity through bottom of ponds [mm/hr].
               0    | IFLOD1: Beginning month of non-flood season
               0    | IFLOD2: Ending month of non-flood season
           0.000    | NDTARG: Number of days needed to reach target storage from current pond storage
          10.000    | PSETLP1: Phosphorus settling rate in pond for months IPND1 through IPND2 [m/year]
          10.000    | PSETLP2: Phosphorus settling rate in pond for months other than IPND1-IPND2 [m/year]
           5.500    | NSETLP1: Initial dissolved oxygen concentration in the reach [mg O2/l]
           5.500    | NSETLP2: Initial dissolved oxygen concentration in the reach [mg O2/l]
           1.000    | CHLAP: Chlorophyll a production coefficient for ponds [ ] 
           1.000    | SECCIP: Water clarity coefficient for ponds [m]
           0.000    | PND_NO3: Initial concentration of NO3-N in pond [mg N/l]
           0.000    | PND_SOLP: Initial concentration of soluble P in pond [mg P/L]
           0.000    | PND_ORGN: Initial concentration of organic N in pond [mg N/l]
           0.000    | PND_ORGP: Initial concentration of organic P in pond [mg P/l]
           5.000    | PND_D50: Median particle diameter of sediment [um]
               1    | IPND1: Beginning month of mid-year nutrient settling "season"
               1    | IPND2: Ending month of mid-year nutrient settling "season"
Wetland inputs:
           0.000    | WET_FR : Fraction of subbasin area that drains into wetlands
           0.000    | WET_NSA: Surface area of wetlands at normal water level [ha]
           0.000    | WET_NVOL: Volume of water stored in wetlands when filled to normal water level [104 m3] 
           0.000    | WET_MXSA: Surface area of wetlands at maximum water level [ha]
           0.000    | WET_MXVOL: Volume of water stored in wetlands when filled to maximum water level [104 m3]
           0.000    | WET_VOL: Initial volume of water in wetlands [104 m3]
           0.000    | WET_SED: Initial sediment concentration in wetland water [mg/l]
           0.000    | WET_NSED: Normal sediment concentration in wetland water [mg/l]
           0.000    | WET_K: Hydraulic conductivity of bottom of wetlands [mm/hr]
           0.000    | PSETLW1: Phosphorus settling rate in wetland for months IPND1 through IPND2 [m/year]
           0.000    | PSETLW2: Phosphorus settling rate in wetlands for months other than IPND1-IPND2 [m/year]
           0.000    | NSETLW1: Nitrogen settling rate in wetlands for months IPND1 through IPND2 [m/year]
           0.000    | NSETLW2: Nitrogen settling rate in wetlands for months other than IPND1-IPND2 [m/year]
           0.000    | CHLAW: Chlorophyll a production coefficient for wetlands [ ]
           0.000    | SECCIW: Water clarity coefficient for wetlands [m]
           0.000    | WET_NO3: Initial concentration of NO3-N in wetland [mg N/l]
           0.000    | WET_SOLP: Initial concentration of soluble P in wetland [mg P/l]
           0.000    | WET_ORGN: Initial concentration of organic N in wetland [mg N/l]
           0.000    | WET_ORGP: Initial concentration of organic P in wetland [mg P/l]
           0.000    | PNDEVCOEFF: Actual pond evaporation is equal to the potential evaporation times the pond evaporation coefficient
           0.000    | WETEVCOEFF: Actual wetland evaporation is equal to the potential evaporation times the wetland evaporation coefficient. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:37:50.183

查看可能适合您目的的 Fortran*名单I/O。*此功能的 IBM XL Fortran 文档位于[此处](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlf101l.doc/xlflr/namelistio.htm)。确保您查阅了您自己的编译器的文档，每个编译器在标准上都有一些奇怪的变化（或者标准可能不够严格）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:42:43.413

我不是 FORTRAN 方面的专家，但我想我会考虑为每个需要更改的参数使用命令行参数。但是，这只有在您使用 FORTRAN 2003 时才有可能。我认为 FORTRAN 95 仍然是最常用的 FORTRAN 标准之一，但我不确定这一点。如果您的 FORTRAN 实现确实支持命令行参数，请查看此站点是否可以帮助您了解如何使用它们： http: [//fortranwiki.org/fortran/show/Command-line+arguments](http://fortranwiki.org/fortran/show/Command-line+arguments) 否则，您可以使用 FORTRAN 程序从文本文件中读取这些值。如果您想变得非常讨厌，您可以让您的 C++ 程序实际更改 FORTRAN 源文件并在每次需要运行时重新编译它。如果您这样做，请先备份它。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T23:25:40.607

据我了解您的问题，您只需要在 C++ 中进行一些文本编辑。我想最简单的事情是在 C++ 代码中包含所有参数，并让该代码为每次运行编写完整的文本文件。如果您不想这样做，我建议使用一些模板工具箱，可能是[cpptemplate](https://bitbucket.org/ginstrom/cpptemplate/overview)或[teng](http://teng.sourceforge.net/)之类的东西，尽管可能有更多可用于 C++ 的模板引擎，这可能适合您的用例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T02:13:50.613

我的工具就像一个 20 字节的 ASCII 字段中有一个数字，一个“|” 符号和一个以“:”结尾的变量名。这些行是可变长度的。所以是这样的：

```
// ./bin/bin/g++ -o hackpond hackpond.cpp

#include <fstream>
#include <string>
#include <cstddef>
#include <sstream>
#include <iomanip>

int
main()
{
    std::string variable_you_want = "PND_SOLP";
    std::string line;
    std::fstream pond("test.pnd");
    std::getline(pond, line);
    while (! pond.eof())
    {
    std::string value, variable;
    std::size_t loc = pond.tellg();
    std::getline(pond, line);
        if (line == "Pond inputs:")
            continue;
        else if (line == "Wetland inputs:")
            continue;
        std::ostringstream hack();
        value = line.substr(0, 20);
        std::size_t colon = line.find(':', 20);
        if (colon == std::string::npos)
            continue;
        variable = line.substr(22, colon - 22);
    if (variable == variable_you_want)
    {
            double new_value = 666.66;
            pond.seekp(loc);
            std::ostringstream thing;
            thing << std::setw(20) << new_value;
            pond.write(thing.str().c_str(), thing.str().length());
    }
        if (pond.eof())
            break;
    }
} 
```

基本思想是您 1.记下要更改的行的`tellg`起始位置（`seekp`新块。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T05:00:01.000

我知道您要求使用 C++，但我的代码有非常相似的情况，并且我使用 shell 脚本。

我`sed s/var_name/value <template >input_file`用来更改模板中 var_name 的出现。我的文件格式设置为简化此操作，但 sed 是一个超级灵活的工具，我相信它可以满足您的要求。[这里](http://www.grymoire.com/Unix/Sed.html)有一个教程。

有了这个设置，我编写了一个脚本来循环这些`sed`命令和应用程序调用。这就像一个魅力。此外，学习一点脚本将帮助您处理各种其他任务，例如对所有这些不同运行生成的数据进行排序。

# playframework - 增强 playframework 中的 play 类

> ID：11726894
> 
> 赞同：1
> 
> 时间：2012-07-30T17:54:14.577
> 
> 标签：playframework

我想增强一些像*JPABase这样的游戏类，但是**PlayPlugin*类的“*增强*”方法永远不会被*JPABase 调用*。

 **如何增强*JPABase*？

谢谢您的帮助 ！**

# android - Android 使用按钮共享活动图像

> ID：11726896
> 
> 赞同：0
> 
> 时间：2012-07-30T17:54:19.600
> 
> 标签：android, image, button, imageview, share

我希望用户单击按钮时共享的图像

该图像是他使用绘画等许多功能制作的图像。当他单击共享按钮时，我希望共享意图“通过共享”。出现，让他选择他想要分享的地方

我找到了这段代码，但我从（路径）得到一个错误

```
Intent sharingIntent = new Intent(Intent.ACTION_SEND);
Uri screenshotUri = Uri.parse(path);
sharingIntent.setType("image/png");
sharingIntent.putExtra(Intent.EXTRA_STREAM, screenshotUri);
startActivity(Intent.createChooser(sharingIntent, "Share image using")); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:51:25.323

你在变量路径中放了什么？

路径是您之前保存位图的文件的路径（SD 卡或内部应用程序存储）。

图片一定要先保存是对的，但是如果现在不保存，怎么填充path变量呢？

# objective-c - iOS - touchesMoved 在子类 UIScrollView 中仅调用一次

> ID：11726900
> 
> 赞同：0
> 
> 时间：2012-07-30T17:54:31.597
> 
> 标签：objective-c, ios, uiscrollview, subclass, touchesmoved

我正在尝试将可移动的 UIImageViews 放在子类 UIScrollView 中，以便可以将它们拖到我的 UIScrollView 周围。我将 UISCrollView 子类化并且放置行为正常，但是当我尝试拖动图像时，touchesMoved 只评估一次。我的 UIScrollView 子类中的 touchesMoved 方法如下所示：

```
-(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    if (!self.dragging) {
        [self.nextResponder touchesMoved: touches withEvent:event]; 
    }else{
        [super touchesEnded:touches withEvent:event];
    }        
} 
```

它应该在移动触摸期间连续调用。谁能想到我的视图控制器中的 touchesMoved 方法只会被调用一次的原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T12:09:16.053

[IOS 5：UIScrollView 不传递触摸到 nextResponder](https://stackoverflow.com/questions/8485853/ios-5-uiscrollview-not-pass-touches-to-nextresponder)

代替：

[self.nextResponder touchesMoved:touches withEvent:event]; 利用：

[[self.nextResponder nextResponder] touchesMoved:touches withEvent:event];

# java - 从 Java 到 PHP 的 Nibble Hex

> ID：11726906
> 
> 赞同：0
> 
> 时间：2012-07-30T17:54:50.023
> 
> 标签：java, php, hex

我正在将一个应用程序从 java 转换为 php，但遇到了一些麻烦。

我有一个这样的字符串`98191107990D0000EF050000789C65970BCCD75318C7CFEFFC`......在java中有这个函数，我将此字符串作为参数传递：

```
private static byte[] decodeNibbleHex(String input)
  {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    char[] chars = input.toCharArray();
    for (int i = 0; i < chars.length - 1; i += 2) {
      char[] bChars = new char[2];
      bChars[0] = chars[i];
      bChars[1] = chars[(i + 1)];
      int val = Integer.decode("0x" + new String(bChars)).intValue();
      baos.write((byte)val);
    }
    return baos.toByteArray();
  } 
```

但是......我不知道用PHP翻译这个函数......我尝试了太多次，我变得疯狂！我尝试使用 for 循环，使用 this`eval("\$hex = 0x" . $dati[$i].$dati[$i+1] . ";");`和 this`$binary_string = pack("h*" , $dati[$i].$dati[$i+1]);`以及许多其他功能......

如果有人了解 Java 并且可以帮助我，我将不胜感激！

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:08:15.933

看看这里：

[http://www.php.net/manual/de/function.hexdec.php#100578](http://www.php.net/manual/de/function.hexdec.php#100578)

这不正是您想要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:09:54.197

如果我对您的 java 函数的理解是正确的，它将成对地获取字符串的字符，并将它们作为字节威胁并将它们放入 ByteArray 中。在 php 中没有字节数组之类的东西，但您可以在日常字符串中表示随机二进制数据。这是我对您的功能的看法（没有尝试与 java 代码的输出进行比较）。

```
$str= '98191107990D0000EF050000789C65970BCCD75318C7CFEFFC';

$output[] = array();
for ($i=0, $c = strlen($str) - 1; $i < $c; $i+=2) {
    $output[] = chr(intval($str[$i].$str[$i+1], 16));
}

print join($output); // binary string, not really useful in ascii terminal (-: 
```

总之，这似乎是一个`base16_decode()`函数，`base16_encode()`如下所示，您将返回输入字符串：

```
function base16_encode($str) {
    $byteArray = str_split($str);
    foreach ($byteArray as &$byte) {
        $byte = sprintf('%02x', ord($byte));
    }   
    return join($byteArray);
}
print base16_encode(join($output)); // should print back the original input. 
```

# php - 将数组从 jQuery AJAX 传递到 PHP 并将内容写入文件

> ID：11726908
> 
> 赞同：0
> 
> 时间：2012-07-30T17:54:56.200
> 
> 标签：php, jquery, ajax

我需要解析一个数组并将其发送到一个 PHP 文件，该文件会将内容写入文件。

这是功能

```
var label = a.text;
GetEl('emotion-label').innerHTML =  "I'm  " + a.text;

$.ajax({
    url: 'mehrabian_pad_subset with AB doubles 2d&3D.csv',
    success: function (data) {
        //parse your data
        //you can split into lines using data.split('\n') 
        //use regex functions to effectivley parse
        var new_label = GetEl('emotion-label').innerHTML;
        var label_custom = data.splitCSV();

        for (var i = 0; i < label_custom.length - 1; i++)
            if (label_custom[i][1] == a.text)
                $.post("JS/foo.php", {
                    data: label_custom[i]
                }, function (result) {
                    alert("test")
                }, "json");
    }
}); 
```

这是我的 php 文件

```
<?php
 $dir = '/var/www/devData/test';

 // create new directory with 777 permissions if it does not exist yet
 // owner will be the user/group the PHP script is run under
 if ( !file_exists($dir) ) {
  mkdir ($dir, 0777);
 }
 if (isset($_POST['data'])) {

         $stringData = $_POST['data'];
         $file = "/var/www/devData/test/ciao.txt"; 
         echo $stringData;
         echo "ciao";
         $fh = fopen($file, 'w') or die("can't open file");
         fwrite($fh, $stringData);
         fclose($fh); 
 }

 ?> 
```

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:46:46.790

我很容易解决了我创建了一个返回类似字符串的函数，因为我正是需要那个:)

```
function ArryToCsv(arr) {

  var csv = '';
  for(var i = 0; i <= arr.length-1 ; i++)
  csv +=   arr[i] + ';' ;
  csv += "\n";
  return csv;
}; 
```

我希望可以帮助某人；）

# sendmail - 如何配置 sendmail 并避免 localhost.localdomain？

> ID：11726912
> 
> 赞同：4
> 
> 时间：2012-07-30T17:55:12.287
> 
> 标签：sendmail

我已被添加到 CBL 列表中，因为我们使用 fedora 17 的服务器（我们已对其进行了更新）现在正在发送将自己标识为 localhost.localdomain 的邮件。

我已经从一台使用 fedora 17 的服务器运行了这个命令

echo “这将进入邮件正文。” | sendmail -s "Hello world" abraham.sustaita@gmail.com

这就是邮件中的内容：

```
Received: from app03.site.com (localhost.localdomain [127.0.0.1])
    by app03.site.com (8.14.5/8.14.5) with ESMTP id q6UHk0xp018117;
    Mon, 30 Jul 2012 17:46:00 GMT 
```

但是从其他使用 fedora 12 的服务器，相同的命令发送邮件：

```
Received: by app05.site.com (Postfix, from userid 0)
    id 2DFFF24E67E; Mon, 30 Jul 2012 17:46:38 +0000 (UTC) 
```

如何配置 sendmail 使其不发送 localhost.localdomain？我已遵循本指南：[http](http://www.redhat.com/magazine/025nov06/features/email/index.html) ://www.redhat.com/magazine/025nov06/features/email/index.html但它没有用......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T19:01:19.397

我已经能够解决这个问题。

我唯一要做的就是添加

```
dnl define(`confDOMAIN_NAME', `app05.site.com')dnl 
```

到

```
/etc/mail/sendmail.mc 
```

进而

```
make -C /etc/mail/ 
```

# java - Android XML 阅读器出错

> ID：11726913
> 
> 赞同：0
> 
> 时间：2012-07-30T17:55:24.593
> 
> 标签：java, android, xml, xml-parsing

我有一个可以正常工作的 XML 解析器，但是如果用户连接到未浏览应用程序的网络就会中断。放一个功能来检测用户是否连接，但是上面提到的问题，用户会连接但不能浏览。

我的代码如下：

```
public void chamaParser(){
    Boolean conected = Conectado(this);
    if(conected == true){
        new DoInBackground().execute();
    } else {
        mPullRefreshListViewRSS.onRefreshComplete();
        new AlertDialog.Builder(PullToRefreshListActivityRSS.this)
                .setTitle("Alerta!")
                .setMessage("Não foi possível estabelecer uma conexão com a Internet, verifique sua rede ou tente novamente mais tarde.")
                .setNeutralButton("OK", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {}
        }).show();
    }
}

public void do_update() {
    RssParser.parse();
}

public static boolean Conectado(Context context) {
    try {
        ConnectivityManager cm = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
        String LogSync = null;
        String LogToUserTitle = null;
        if (cm.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).isConnected()) {
            LogSync += "\nConectado a Internet 3G ";
            LogToUserTitle += "Conectado a Internet 3G ";
            return true;
        } else if(cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI).isConnected()) {
            LogSync += "\nConectado a Internet WIFI ";
            LogToUserTitle += "Conectado a Internet WIFI ";
            return true;
        } else {
            LogSync += "\nNão possui conexão com a internet ";
            LogToUserTitle += "Não possui conexão com a internet ";
            return false;
        }
    } catch (Exception e) {
        return false;
    }
}

private class DoInBackground extends AsyncTask<Void, Void, Void> implements DialogInterface.OnCancelListener {
    private ProgressDialog dialog;

    protected void onPreExecute() {
        //dialog = ProgressDialog.show(PullToRefreshListActivityRSS.this, "", "Carregando...", true);
        dialog = ProgressDialog.show(PullToRefreshListActivityRSS.this, "", "Carregando...", true, true, new DialogInterface.OnCancelListener(){
                @Override
                public void onCancel(DialogInterface dialog) {
                    mPullRefreshListViewRSS.onRefreshComplete();
                    DoInBackground.this.cancel(true);
                    // finish();
                }
        });
    }

    protected Void doInBackground(Void... unused) { 
        PodcastAdapterRSS.topBarRSS=true;

        do_update(); 
        return null; 
    } 
```

解析器 XML：

```
public class RssParser {

    public static void parse() {
        URL url;
        try {
            url = new URL("http://www.xxxx.com.br/feed/");
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();

            if(conn.getResponseCode() == HttpURLConnection.HTTP_OK) {
                DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
                DocumentBuilder db = dbf.newDocumentBuilder();
                Document doc;
                doc = db.parse(url.openStream());
                doc.getDocumentElement().normalize();
                NodeList itemLst = doc.getElementsByTagName("item");
                arrays.Title = new String[itemLst.getLength()];
                arrays.Link = new String[itemLst.getLength()];
                arrays.Description = new String[itemLst.getLength()];
                // arrays.PodcastMedia = new String[itemLst.getLength()];

                for(int i=0; i < itemLst.getLength(); i++){

                    Node item = itemLst.item(i);
                    if(item.getNodeType() == Node.ELEMENT_NODE){
                        Element ielem = (Element)item;
                        NodeList title = ielem.getElementsByTagName("title");
                        NodeList link = ielem.getElementsByTagName("link");
                        //NodeList description = ielem.getElementsByTagName("description"); 
                        NodeList content = ielem.getElementsByTagName("description");
                        //   NodeList media = ielem.getElementsByTagName("media:content");

                        //    String mediaurl = media.item(0).getAttributes().getNamedItem("url").getNodeValue();

                          arrays.Title[i] = title.item(0).getChildNodes().item(0).getNodeValue();
                          arrays.Link[i] = link.item(0).getChildNodes().item(0).getNodeValue();
                          arrays.Description[i] = content.item(0).getChildNodes().item(0).getNodeValue();

                    }
                }
            }

        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (DOMException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ParserConfigurationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

原木猫：

> 07-30 15:20:48.319: W/System.err(10997): java.net.UnknownHostException: www.xxxx.com.br 07-30 15:20:48.319: W/System.err(10997): 在java.net.InetAddress.lookupHostByName(InetAddress.java:508) 07-30 15:20:48.319: W/System.err(10997): 在 java.net.InetAddress.getAllByNameImpl(InetAddress.java:296) 07-30 15:20:48.319: W/System.err(10997): 在 java.net.InetAddress.getAllByName(InetAddress.java:258) 07-30 15:20:48.319: W/System.err(10997): 在 org .apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.(HttpConnection.java:69) 07-30 15:20:48.319: W/System.err(10997): at org.apache.harmony .luni.internal.net.www.protocol.http.HttpConnection.(HttpConnection.java:48) 07-30 15:20:48.319: W/System.err(10997): at org.apache.harmony.luni.internal .net.www.protocol.http.HttpConnection$Address.connect(HttpConnection.java:322) 07-30 15:20:48.319: W/System.err(10997): 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:89 ) 07-30 15:20:48.319: W/System.err(10997): 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHttpConnection(HttpURLConnectionImpl.java:285) 07- 30 15:20:48.319: W/System.err(10997): 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.makeConnection(HttpURLConnectionImpl.java:267) 07-30 15: 20:48.319: W/System.err(10997): 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.retrieveResponse(HttpURLConnectionImpl.java:1018) 07-30 15:20:48.319 : W/System.err(10997): 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:726) 07-30 15:20:48.329: W/System.err(10997): 在 tabbar.rss.RssParser.parse(RssParser.java:30) 07-30 15:20:48.329: W/System.err( 10997): 在 tabbar.rss.PullToRefreshListActivityRSS.do_update(PullToRefreshListActivityRSS.java:91) 07-30 15:20:48.329: W/System.err(10997): 在 tabbar.rss.PullToRefreshListActivityRSS$DoInBackground.doInBackground(PullToRefreshListActivityRSS.java :205) 07-30 15:20:48.329: W/System.err(10997): 在 tabbar.rss.PullToRefreshListActivityRSS$DoInBackground.doInBackground(PullToRefreshListActivityRSS.java:1) 07-30 15:20:48.329: W/System .err(10997): 在 android.os.AsyncTask$2.call(AsyncTask.java:185) 07-30 15:20:48.329: W/System.err(10997): 在 java.util.concurrent.FutureTask$Sync .innerRun(FutureTask.java:306) 07-30 15:20:48.329: W/System.err(10997): 在 java.util.concurrent.FutureTask.run(FutureTask.java:138) 07-30 15:20:48.329: W/System.err(10997): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088) 07-30 15:20:48.329: W/ System.err(10997): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581) 07-30 15:20:48.329: W/System.err(10997): 在 java.lang.Thread .run(Thread.java:1019) 07-30 15:20:48.329: W/dalvikvm(10997): threadid=1: 线程以未捕获的异常退出 (group=0x401fc560) 07-30 15:20:48.339: E/ AndroidRuntime（10997）：致命异常：主要 07-30 15:20:48.339：E/AndroidRuntime（10997）：java.lang.NullPointerException 07-30 15:20:48.339：E/AndroidRuntime（10997）：在 tabbar.rss .PullToRefreshListActivityRSS.populate_listview(PullToRefreshListActivityRSS.java:101) 07-30 15:20:48.339: E/AndroidRuntime(10997): 在 tabbar.rss。PullToRefreshListActivityRSS$DoInBackground.onPostExecute(PullToRefreshListActivityRSS.java:214) 07-30 15:20:48.339: E/AndroidRuntime(10997): 在 tabbar.rss.PullToRefreshListActivityRSS$DoInBackground.onPostExecute(PullToRefreshListActivityRSS.java:1) 07-30 15: 20:48.339: E/AndroidRuntime(10997): 在 android.os.AsyncTask.finish(AsyncTask.java:417) 07-30 15:20:48.339: E/AndroidRuntime(10997): 在 android.os.AsyncTask.access $300(AsyncTask.java:127) 07-30 15:20:48.339: E/AndroidRuntime(10997): 在 android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429) 07-30 15:20:48.339: E/AndroidRuntime(10997): 在 android.os.Handler.dispatchMessage(Handler.java:99) 07-30 15:20:48.339: E/AndroidRuntime(10997): 在 android.os.Looper.loop(Looper.java :130) 07-30 15:20:48.339: E/AndroidRuntime(10997): 在 android.app。ActivityThread.main(ActivityThread.java:3689) 07-30 15:20:48.339: E/AndroidRuntime(10997): at java.lang.reflect.Method.invokeNative(Native Method) 07-30 15:20:48.339: E /AndroidRuntime(10997): at java.lang.reflect.Method.invoke(Method.java:507) 07-30 15:20:48.339: E/AndroidRuntime(10997): at com.android.internal.os.ZygoteInit$ MethodAndArgsCaller.run(ZygoteInit.java:875) 07-30 15:20:48.339: E/AndroidRuntime(10997): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:633) 07-30 15: 20：48.339：E/AndroidRuntime（10997）：在 dalvik.system.NativeStart.main（本机方法）507) 07-30 15:20:48.339: E/AndroidRuntime(10997): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:875) 07-30 15:20:48.339: E/ AndroidRuntime(10997): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:633) 07-30 15:20:48.339: E/AndroidRuntime(10997): 在 dalvik.system.NativeStart.main(Native方法）507) 07-30 15:20:48.339: E/AndroidRuntime(10997): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:875) 07-30 15:20:48.339: E/ AndroidRuntime(10997): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:633) 07-30 15:20:48.339: E/AndroidRuntime(10997): 在 dalvik.system.NativeStart.main(Native方法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:38:54.493

尝试将此添加到您的清单中：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

如果这不起作用，请查阅以下两个问题的答案：

[Android java.net.UnknownHostException：主机未解析](https://stackoverflow.com/questions/3514398/android-java-net-unknownhostexception-host-is-unresolved)

[Android java.net.UnknownHostException: Host is unresolved (strategy question)](https://stackoverflow.com/questions/3293659/android-java-net-unknownhostexception-host-is-unresolved-strategy-question)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:14:30.140

您需要为您的 asynctask 提供一个超时处理程序，因为您已连接但未下载任何内容。设置大约 3000 - 5000 毫秒的超时时间

如何创建超时处理程序：

[Android - 为 AsyncTask 设置超时？](https://stackoverflow.com/questions/7882739/android-setting-a-timeout-for-an-asynctask)

# c# - ASP.NET MVC3 数据库操作

> ID：11726915
> 
> 赞同：0
> 
> 时间：2012-07-30T17:55:28.813
> 
> 标签：c#, asp.net-mvc-3

现在，我有一个显示数据库条目的简单 Web 应用程序。数据库中可见的字段之一是 bool?，它是 true、false 或两者都不是。数据库中的所有内容原本都应该有布尔值？两者都不设置。

这就是我想要工作的内容：当用户通过为布尔选择 true 或 false 来编辑表中的条目时？字段，我希望能够运行一些 C# 代码（我已经编写过）并从数据库中删除该条目。这意味着下次加载数据库时，所有条目将再次在 bool? 中选择 true 或 false？场地。

有人知道我怎么能简单地做到这一点吗？（一般来说，我对查询数据库或创建 Web 应用程序知之甚少。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T23:14:52.003

我的问题不是关于如何删除项目，而是更多关于如何从数据库中挑选出那些选择要删除的项目。

我发现这可以解决问题：

```
var toBeRemoved = from m in db.Issues
                           where m.Remove.HasValue && m.Remove
                           select m; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:55:56.980

我相信当您说“真、假或两者都不是”时，既不意味着数据库中的空值，所以，在没有看到您的代码的情况下，我相信您可以更改`SELECT`检索要显示视图的行`WHERE *field* IS NULL`的. 如果这没有帮助，请向我们发布一些控件、视图和模型代码。

# internet-explorer - Lightswitch 实体级别权限在 Internet Explorer 中无法正常工作

> ID：11726919
> 
> 赞同：3
> 
> 时间：2012-07-30T17:55:43.437
> 
> 标签：internet-explorer, permissions, visual-studio-lightswitch

我想我在 lightswitch 中发现了一个错误，我在整个谷歌搜索，试图找到其他有同样问题的人，但到目前为止还没有任何运气。

似乎 lightswitch 将实体的删除/插入/更新/查看权限缓存到临时 Internet 文件目录中名为 __GetEntitySetCanInformation?entitySetName=EntityName 的一些文件中。问题是，如果您使用不同的用户登录，实体的权限与前一个用户的权限相同。因此，如果您使用对某个实体具有更新权限的用户登录，当您使用其他用户登录时，即使他不应该拥有该实体，他也将拥有对该实体的更新权限。

我在chrome中没有这个问题。就在 Internet Explorer 中。在ie7和ie8中测试过，都存在同样的问题。也在其他电脑上测试过，都遇到了同样的问题。

我在我的应用程序中创建了一个注销按钮，该按钮调用一个执行所有注销操作的 asp.net 页面。我试图让它也删除所有cookie，但没有奏效。我找不到解决方案。

-- 添加 - 2012 年 8 月 2 日 --

我还在 MSDN 论坛中添加了关于此的讨论。那里也没有人为我解决这个问题，但还有更多关于此的信息。

讨论的链接是[http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/ec704f5f-77f1-40a8-9c6f-ea0fff56db75?prof=required](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/ec704f5f-77f1-40a8-9c6f-ea0fff56db75?prof=required)

# objective-c - 将对象从数组添加到字典

> ID：11726926
> 
> 赞同：0
> 
> 时间：2012-07-30T17:56:02.707
> 
> 标签：objective-c, ios, arrays, dictionary

我从 SQLite DB 获取行并尝试将它们插入字典。除了我不断收到错误！我收到错误“ARC不允许将Objective-C指针隐式转换为'const id *'”我知道这意味着我在向字典中添加对象时不能使用指针。那么我该如何修复它，以便将这些数组添加到字典中？

```
 NSArray *keyArray = [[NSMutableArray alloc] init ];
    NSArray *valueArray = [[NSMutableArray alloc ] init ];
    NSDictionary* dic;
    NSInteger dataCount = sqlite3_data_count(statement);
    while (sqlite3_step(statement) == SQLITE_ROW) {
        @try {
            for (int i = 0; i < dataCount; i ++)
            {
                NSString* key = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, i)];  
                NSString *value = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, i)];

                if ([value length] == 0)
                {
                    value = @"";
                }

                keyArray = [keyArray arrayByAddingObject:key];
                valueArray = [valueArray arrayByAddingObject:value];

            }

        }
        @catch (NSException *ex)
        {
            NSLog(@"%@,%@", [ex name], [ex reason]);
        }

        dic= [NSDictionary dictionaryWithObjects:valueArray forKeys:keyArray count:[keyArray count]]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T18:00:30.330

`dictionaryWithObjects:forKeys:count:`接受 C 风格的数组，而不是对象`NSArray`。`dictionaryWithObjects:forKeys:`可能会解决问题，但是您最好在构建可变字典时完全绕过s `NSArray`。

```
NSDictionary* dic;
NSMutableDictionary *tmp = [NSMutableDictionary dictionary];

for (int i = 0; i < dataCount; i ++)
{
    NSString* key = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, i)];  
    NSString *value = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, i)];
    [tmp setObject:value forKey:key];
}
dict = tmp; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-22T13:42:54.373

[dicBodyPost setValue:arrContactAddress forKey:@"contactAddress"];

# facebook - 获取喜欢链接的每个人的列表。

> ID：11726931
> 
> 赞同：0
> 
> 时间：2012-07-30T17:56:17.063
> 
> 标签：facebook, facebook-fql

如果我创建一个页面，是否可以在 facebook 上获取所有喜欢该页面的人的列表。例如，如果我创建[http://www.facebook.com/honeybadger](http://www.facebook.com/honeybadger)，作为管理员，我可以获得一个喜欢它的每个人的列表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:00:54.517

Facebook 文档似乎给出了您问题的确切答案。

[https://developers.facebook.com/docs/reference/fql/like/](https://developers.facebook.com/docs/reference/fql/like/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:19:56.843

```
SELECT user_id FROM like WHERE object_id = <INSERT_FACEBOOK_OBJECT_ID_HERE> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:01:20.517

您无法再获得喜欢 URL 或 Facebook 页面的用户列表。Facebook 已经采用了`page_fan`和`url_like`表，并在这些`uid`字段上创建了唯一的可索引列。

尝试这样的事情

```
SELECT uid FROM page_fan WHERE page_id IN (SELECT page_id FROM page WHERE username = "honeybadger") 
```

[引发 OAuth 异常：“您的语句不可索引。WHERE 子句必须包含可索引列。此类列在从http://developers.facebook.com/docs/reference/fql](http://developers.facebook.com/docs/reference/fql)链接的表中标有 * ”

您唯一能做的就是创建一个应用程序，让用户授权您的应用程序，然后测试经过身份验证的用户是否喜欢特定页面或链接。如果您要求正确的权限，您还可以测试他们的朋友是否喜欢您的应用。

实施此更改是为了防止垃圾邮件发送者从他们的页面粉丝或 URL 喜欢者那里获取 Facebook ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T17:00:49.900

更简单的方法是通过图形 api 获取它

```
https://graph.facebook.com/honeybadger/likes?access_token=valid_access_token 
```

# asp.net-mvc-3 - MVC3 razor Webgrid 分页和排序超过 2000 条记录

> ID：11726936
> 
> 赞同：5
> 
> 时间：2012-07-30T17:56:53.303
> 
> 标签：asp.net-mvc-3, sorting, razor, paging, webgrid

我正在使用类似于[此处提到的 webgrid](https://stackoverflow.com/questions/4342578/razor-webgrid-ajax-paging-and-sorting)

```
@{
    var grid = new WebGrid(canPage: true, rowsPerPage: ThisController.PageSize, canSort: true, ajaxUpdateContainerId: "grid");
    grid.Bind(Model.Employees, rowCount: Model.TotalRecords, autoSortAndPage: false);
    grid.Pager(WebGridPagerModes.All);
    @grid.GetHtml(htmlAttributes: new { id="grid" },
        columns: grid.Columns(
            grid.Column(format: (item) => Html.ActionLink("Edit", "Edit", new { EmployeeID = item.EmployeeID })),
            grid.Column("FullName"),
            grid.Column("Title")
        ));
} 
```

但在我的情况下，我期望超过 2000 条记录，我只想在每个页面上加载 50 条记录，以便页面加载更快。如何确保在加载页面时只加载前 50 条记录。当我的用户单击 page2 时，我想加载接下来的 50 组记录，依此类推。你们中的任何人都遇到过类似的情况，请给我一些示例代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T18:00:54.500

这篇 MSDN 杂志文章展示了您想要的内容：

[在 ASP.NET MVC 中充分利用 WebGrid](http://msdn.microsoft.com/en-us/magazine/hh288075.aspx)

阅读本节：添加分页和排序

> 如您所见，我们传递的数据包含完整的产品列表（在本例中为 295 个，但不难想象检索到更多数据的场景）。随着返回的数据量增加，您在服务和数据库上施加的负载越来越多，同时仍呈现相同的单页数据。但是有一个更好的方法：服务器端分页。在这种情况下，您只拉回显示当前页面所需的数据（例如，只有五行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:04:45.430

请参阅此链接，它讨论了在 webgrid 中使用大量数据进行分页的相同问题以及一个很棒的解决方案。

[使用 WebGrid Web Helper 进行高效分页](http://www.dotnetcurry.com/ShowArticle.aspx?ID=618)

希望这可以帮助 ！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-10T08:27:11.383

@{ var grid = new WebGrid(canPage: true, **rowsPerPage: 50** , canSort: true, ajaxUpdateContainerId: "grid");

-剩余代码与您的代码相同

}

只需将**rowsperpage:**更改为您要显示的行数

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-05-28T07:08:30.153

```
List<WebGridColumn> webGridColumn=new List<WebGridColumn>();
var grid=new WebGrid(source:model,
defaultSort:"stk_code",
rowsPerPage:Model.Count(),
canPage:true,
canSort:true);
webGridColumn.Add(grid.Column("stcode",header:"Stock Code",canSort:false)); 
```

# telerik - 如何在 Telerik 报告中计算组？

> ID：11726937
> 
> 赞同：0
> 
> 时间：2012-07-30T17:56:58.780
> 
> 标签：telerik, telerik-reporting

我有一份关于**物品**、**成分**和**食谱**的报告。我按项目分组，以便我可以创建包含该特定项目的食谱列表。例如：

1.  项目 001 鸡蛋
    1.  食谱 1
    2.  食谱 2
    3.  食谱 3
2.  项目 002 面粉
    1.  食谱 1
    2.  食谱 2

我在每个项目组下都有一个小计，用于计算食谱的数量。我试图在报告的最底部获得一个小计来计算项目组的数量。在上面的示例中，我希望总数为 2，但我的报告输出总数为 5，因为每个配方都包含该项目。我怎样才能只计算组的数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:40:20.770

我不是 100% 确定这会有所帮助，但请尝试 RowNumber()，它是功能之一。添加到 GroupFooter 中的文本框可能会为您提供所需的输出。

# email - TeamCity - 为特定项目自定义电子邮件通知

> ID：11726940
> 
> 赞同：14
> 
> 时间：2012-07-30T17:57:07.750
> 
> 标签：email, notifications, teamcity

我正在使用 TeamCity 5.1.5

我想根据每个项目自定义电子邮件通知模板。

项目 A：使用自定义电子邮件通知电子邮件模板来包含有关构建和测试结果的其他信息

项目 B、C、D ：使用默认的电子邮件通知模板

我仔细阅读了 TeamCity 文档并查看了 /config/_notifications/email 目录，似乎找不到任何表明可以在每个项目的基础上配置电子邮件模板的内容。任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-31T20:24:48.433

据我所知，模板文件不能在每个项目的基础上进行配置。

但是，使用 TeamCity 提供的[FreeMarker 表达式语法](http://freemarker.org/docs/dgui_template_exp.html#dgui_template_exp_comparison)和属性，您可以更新电子邮件模板以有条件地为给定项目提供某些信息。

例如：

```
<#if project.name = "Project A">
    Build Results: Passable
    Test Results: Smelly
</#if> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-15T03:02:11.647

后面跟@bilai，可以使用`build.name = "PROJECT_NAME" && buildType.name="CONFIGURATION_NAME"`or`buildType.externalId = "YOUR_BUILD_CONFIGURATION_ID"`进行更细粒度的控制。

查看我完整的模板代码：[https ://gist.github.com/YoungjaeKim/cf35ef3cba344a2f85e9](https://gist.github.com/YoungjaeKim/cf35ef3cba344a2f85e9)

# jsf - 未调用 JSF commandButton 操作

> ID：11726942
> 
> 赞同：1
> 
> 时间：2012-07-30T17:57:19.990
> 
> 标签：jsf, tomahawk

我有以下页面使用 JSF 将 .pdf 文件上传到服务器上指定的文件夹。但是，commandButton 操作似乎根本没有触发，因为我的 println() 和消息更新都没有显示。如果有人能解释这个问题，将不胜感激。

XHTML 页面：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:t="http://myfaces.apache.org/tomahawk"
    xmlns:f="http://java.sun.com/jsf/core" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="keywords" content="enter,your,keywords,here" />
        <meta http-equiv="description"
            content="A short description of this page." />
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />

        <link rel="stylesheet" type="text/css" href="Styles/style.css" />
        <script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery/jquery-1.7.2.min.js"></script>
    </head>
    <body>

        <h:form enctype="multipart/form-data">
            <h:outputText value="First Name: " />
            <h:inputText id="fname" size="40" value="#{userBean.firstName}" required="true"/> <br/>
            <h:outputText value="Last Name: " />
            <h:inputText id="lname" size="40" value="#{userBean.lastName}" required="true"/> <br/>
            <h:outputText value="Position Sought: "/>
            <h:inputText id="position" size="40" value="#{userBean.position}" required="true"/> <br/>
            <h:outputText value="File to upload: " />
            <t:inputFileUpload value="#{userBean.resume}" /> <br/>
            <h:commandButton value="submit" action="#{userBean.submit}" />
            <h:messages />
        </h:form>

    </body>
</html> 
```

面孔：

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config version="2.0" xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">
 <managed-bean>
  <managed-bean-name>userProcessor</managed-bean-name>
  <managed-bean-class>com.logic.UserProcessor</managed-bean-class>
  <managed-bean-scope>session</managed-bean-scope>
  <managed-property>
   <property-name>ID</property-name>
   <property-class>java.lang.String</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>firstName</property-name>
   <property-class>java.lang.String</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>lastName</property-name>
   <property-class>java.lang.String</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>password</property-name>
   <property-class>java.lang.String</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>resume</property-name>
   <property-class>java.lang.String</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>username</property-name>
   <property-class>java.lang.String</property-class>
   <value/>
  </managed-property>
 </managed-bean>
 <managed-bean>
  <managed-bean-name>userBean</managed-bean-name>
  <managed-bean-class>com.logic.UserBean</managed-bean-class>
  <managed-bean-scope>request</managed-bean-scope>
  <managed-property>
   <property-name>id</property-name>
   <property-class>java.lang.String</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>username</property-name>
   <property-class>java.lang.String</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>password</property-name>
   <property-class>java.lang.String</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>firstName</property-name>
   <property-class>java.lang.String</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>lastName</property-name>
   <property-class>java.lang.String</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>position</property-name>
   <property-class>java.lang.String</property-class>
   <value/>
  </managed-property>
  <managed-property>
   <property-name>resume</property-name>
   <property-class>org.apache.myfaces.custom.fileupload.UploadedFile</property-class>
   <value/>
  </managed-property>
 </managed-bean>
 <navigation-rule>
  <from-view-id>/addUser.xhtml</from-view-id>
  <navigation-case>
   <from-outcome>failure</from-outcome>
   <to-view-id>/addUser.xhtml</to-view-id>
  </navigation-case>
  <navigation-case>
   <from-outcome>success</from-outcome>
   <to-view-id>/Home_Menu.xhtml</to-view-id>
  </navigation-case>
 </navigation-rule>
 <navigation-rule>
  <from-view-id>/Home_Menu.xhtml</from-view-id>
 </navigation-rule>
 <navigation-rule>
  <from-view-id>/login.xhtml</from-view-id>
  <navigation-case>
   <from-outcome>failure</from-outcome>
   <to-view-id>/login.xhtml</to-view-id>
  </navigation-case>
  <navigation-case>
   <from-outcome>success</from-outcome>
   <to-view-id>/Home_Menu.xhtml</to-view-id>
  </navigation-case>
 </navigation-rule>
 <navigation-rule>
  <from-view-id>/upload_resume.xhtml</from-view-id>
  <navigation-case>
   <from-action>#{userBean.submit}</from-action>
   <from-outcome>success</from-outcome>
   <to-view-id>/Home_Menu.xhtml</to-view-id>
  </navigation-case>
  <navigation-case>
   <from-action>#{userBean.submit}</from-action>
   <from-outcome>failure</from-outcome>
   <to-view-id>/upload_resume.xhtml</to-view-id>
  </navigation-case>
 </navigation-rule>
</faces-config> 
```

和 bean.submit()

```
 public String submit() throws IOException {
        String fileName = FilenameUtils.getName(resume.getName());
        String contentType = resume.getContentType();
        InputStream is = resume.getInputStream();
        byte[] bytes = resume.getBytes();

        Date date = new Date();
        String ext = FilenameUtils.getExtension(fileName);
        System.out.println("File upload started");
        System.out.println("File name: " + fileName);
        System.out.println("Timestamp: " + contentType);
        System.out.println("Content type: " + date.toString());
        System.out.println("File extension: " + ext);

        // Now you can save bytes in DB (and also content type?)

        if(ext != "pdf"){
            FacesContext.getCurrentInstance().addMessage(null, 
                    new FacesMessage(String.format("File upload failed, please make sure that your file has the correct extension (.pdf)")));
            System.out.println("File upload failed: incorrect file extension.");
            return "failure";
        } else {
            writeInfoToDB();
            is.read(bytes);

            String folder = getFirstName().charAt(0) + getLastName();                           //will not work if folder does not exist
            File file = new File("C:\\Users\\MAR-PC01\\Desktop\\apache-tomcat-7.0\\uploads\\" 
                                 + folder + "\\" + fileName);
            file.createNewFile();
            FileOutputStream fos = new FileOutputStream(file);
            fos.write(bytes);

            FacesContext.getCurrentInstance().addMessage(null, 
                new FacesMessage(String.format("File '%s' of type '%s' successfully uploaded!", fileName, contentType)));

            return "success";
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T18:29:39.377

此表单使用JSF 默认**不**支持的`multipart/form-data`编码提交。只有根据[其文档](http://myfaces.apache.org/tomahawk/extensionsFilter.html)正确注册Tomahawk's 才会起作用。这个过滤器负责解析请求并将各个部分转换为正常的请求参数，以便 JSF 可以以通常的方式透明地应用请求参数（例如：提交的值和调用的操作）。**`ExtensionsFilter``web.xml``multipart/form-data``form-data`**

 **如果`ExtensionsFilter`由于 webapp 中的其他一些干扰因素而没有注册和/或无法正常工作，那么表单提交将永远不会进入 JSF 回发生命周期。

### 也可以看看：

*   [JSF 2.0 文件上传](https://stackoverflow.com/questions/5418292/jsf-2-0-file-upload/5424229#5424229)**

# javascript - For 循环主干集合

> ID：11726943
> 
> 赞同：12
> 
> 时间：2012-07-30T17:57:21.883
> 
> 标签：javascript, backbone.js, model, coffeescript, backbone.js-collections

对骨干来说相当新，所以这是一个非常基本的问题。我有一个 Backbone 集合传递给一个函数，我可以证明它已被传递并且集合中的模型具有 id。

这是我设置ID的方式 -

```
convertToMapObjects: (results)  =>
   objectList = new ObjectList()
   results.each(result)->
    testObj = new TestObject()
    testObj.set
      id = result.get("id")
    objectList.add(testObj) 
```

在另一个函数中（通过使模型触发事件来访问） -

```
getIds: (objects) =>
ids = (object.id for object in objects) 
```

我认为问题可能是因为我如何迭代集合，因为当我尝试做

```
for object in objects
   console.log(object) 
```

我看到了两个未定义的。它是否正确？如果是这样，为什么我不能使用 for 循环来遍历骨干集合？另外，有没有办法我可以这样做？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-30T18:26:59.813

Backbone 集合不是数组，因此`for ... in`不会产生您期望的结果。[`models`](http://backbonejs.org/#Collection-models)如果要使用简单循环，则需要查看集合的属性。

但是，Backbone 集合中[混合了各种 Underscore 方法](http://backbonejs.org/#Collection-Underscore-Methods)：

> **下划线方法 (28)**
> 
> **Underscore.js 的 Backbone 代理，在Backbone.Collection**上提供 28 个迭代函数。此处并未全部记录，但您可以查看 Underscore 文档以了解完整详细信息……</p>
> 
> *   forEach（每个）
> *   ...

因此，您可以使用[`map`](http://underscorejs.org/#map)或者[`pluck`](http://backbonejs.org/#Collection-pluck)如果您想避免访问该[`models`属性](http://backbonejs.org/#Collection-models)：

```
ids = objects.map (m) -> m.id
ids = objects.pluck 'id' 
```

该`pluck`方法或多或少只是一个特例，`map`但集合实现了本机版本而不是使用下划线版本，以便它们可以提取模型属性而不是简单的对象属性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T18:11:51.883

您想循环遍历集合的[`models`属性](http://documentcloud.github.com/backbone/#Collection-models)，而不是集合对象本身。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-31T03:43:00.617

```
for object in object.models 
```

这将为您提供集合中的模型

# meta-tags - meta http-equiv=content-language 是过时的多语言网站

> ID：11726953
> 
> 赞同：0
> 
> 时间：2012-07-30T17:57:57.610
> 
> 标签：meta-tags

我在[什么是过时的元 http-equiv=content-language 的 HTML5 替代方案中阅读了这个问题。](https://stackoverflow.com/questions/8116812/meta-http-equiv-content-language-is-obsolete)但它没有回答我的问题。那么，如果我有一个包含 4 个索引页面的简单站点，每个页面都使用不同的语言，我该如何指定语言？“考虑在根元素上指定语言”是指在每个 div 处指定？

```
<META HTTP-EQUIV="Content-Language" content="EN"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:44:04.207

所以，它必须看起来像这样：

```
<html lang="en-GB"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T23:15:24.800

> 根据 W3C 的建议，您应该在标签内使用 lang 属性声明每个网页的主要语言，如下所示：

`<html lang="en"> ... </html>`

在 HTML5 中，您可以为任何元素指定语言。这样您就可以在同一页面上使用多种语言。并超越特定元素的主要语言。[在这里](http://www.w3schools.com/tags/att_global_lang.asp)阅读更多

以下是所有支持的语言代码：

```
Code    Language (region)
af      Afrikaans
ar-ae   Arabic (U.A.E.)
ar-bh   Arabic (Bahrain)
ar-dz   Arabic (Algeria)
ar-eg   Arabic (Egypt)
ar-iq   Arabic (Iraq)
ar-jo   Arabic (Jordan)
ar-kw   Arabic (Kuwait)
ar-lb   Arabic (Lebanon)
ar-ly   Arabic (Libya)
ar-ma   Arabic (Morocco)
ar-om   Arabic (Oman)
ar-qa   Arabic (Qatar)
ar-sa   Arabic (Saudi Arabia)
ar-sy   Arabic (Syria)
ar-tn   Arabic (Tunisia)
ar-ye   Arabic (Yemen)
be      Belarusian
bg      Bulgarian
ca      Catalan
cs      Czech
da      Danish
de      German (Standard)
de-at   German (Austria)
de-ch   German (Switzerland)
de-li   German (Liechtenstein)
de-lu   German (Luxembourg)
el      Greek
en      English
en-au   English (Australia)
en-bz   English (Belize)
en-ca   English (Canada)
en-gb   English (United Kingdom)
en-ie   English (Ireland)
en-jm   English (Jamaica)
en-nz   English (New Zealand)
en-tt   English (Trinidad)
en-us   English (United States)
en-za   English (South Africa)
es      Spanish (Spain)
es-ar   Spanish (Argentina)
es-bo   Spanish (Bolivia)
es-cl   Spanish (Chile)
es-co   Spanish (Colombia)
es-cr   Spanish (Costa Rica)
es-do   Spanish (Dominican Republic)
es-ec   Spanish (Ecuador)
es-gt   Spanish (Guatemala)
es-hn   Spanish (Honduras)
es-mx   Spanish (Mexico)
es-ni   Spanish (Nicaragua)
es-pa   Spanish (Panama)
es-pe   Spanish (Peru)
es-pr   Spanish (Puerto Rico)
es-py   Spanish (Paraguay)
es-sv   Spanish (El Salvador)
es-uy   Spanish (Uruguay)
es-ve   Spanish (Venezuela)
et      Estonian
eu      Basque
fa      Farsi
fi      Finnish
fo      Faeroese
fr      French (Standard)
fr-be   French (Belgium)
fr-ca   French (Canada)
fr-ch   French (Switzerland)
fr-lu   French (Luxembourg)
ga      Irish
gd      Gaelic (Scotland)
he      Hebrew
hi      Hindi
hr      Croatian
hu      Hungarian
id      Indonesian
is      Icelandic
it      Italian (Standard)
it-ch   Italian (Switzerland)
ja      Japanese
ji      Yiddish
ko      Korean
ko      Korean (Johab)
ku      Kurdish
lt      Lithuanian
lv      Latvian
mk      Macedonian (FYROM)
ml      Malayalam
ms      Malaysian
mt      Maltese
nl      Dutch (Standard)
nl-be   Dutch (Belgium)
nb      Norwegian (Bokmål)
nn      Norwegian (Nynorsk)
no      Norwegian
pa      Punjabi
pl      Polish
pt      Portuguese (Portugal)
pt-br   Portuguese (Brazil)
rm      Rhaeto-Romanic
ro      Romanian
ro-md   Romanian (Republic of Moldova)
ru      Russian
ru-md   Russian (Republic of Moldova)
sb      Sorbian
sk      Slovak
sl      Slovenian
sq      Albanian
sr      Serbian
sv      Swedish
sv-fi   Swedish (Finland)
th      Thai
tn      Tswana
tr      Turkish
ts      Tsonga
uk      Ukrainian
ur      Urdu
ve      Venda
vi      Vietnamese
xh      Xhosa
zh-cn   Chinese (PRC)
zh-hk   Chinese (Hong Kong)
zh-sg   Chinese (Singapore)
zh-tw   Chinese (Taiwan)
zu      Zulu 
```

# c# - 泛型类型指针？并将字节数组转换为给定类型的泛型？

> ID：11726956
> 
> 赞同：9
> 
> 时间：2012-07-30T17:58:12.157
> 
> 标签：c#

好的，我想要做的基本想法是将字节数组转换为短或整数等。

一个简单的例子可能是：

```
 unsafe
        {
            fixed (byte* byteArray = new byte[5] { 255, 255, 255, 126, 34 })
            {
                short shortSingle = *(short*)byteArray;
                MessageBox.Show((shortSingle).ToString()); // works fine output is -1
            }
        } 
```

好的，所以我真正想做的是，对 Stream 类进行扩展；扩展读写方法。我需要以下代码的帮助：

```
unsafe public static T Read<T>(this Stream stream)
        {
            int bytesToRead = sizeof(T); // ERROR: Cannot take the address of, get the size of, or declare a pointer to a managed type ('T')
            byte[] buffer = new byte[bytesToRead];
            if (bytesToRead != stream.Read(buffer, 0, bytesToRead))
            {
                throw new Exception();
            }
            fixed (byte* byteArray = buffer)
            {
                T typeSingle = *(T*)byteArray; // ERROR: Cannot take the address of, get the size of, or declare a pointer to a managed type ('T')
                return typeSingle;
            }
        }

        unsafe public static T[] Read<T>(this Stream stream, int count)
        {
             // haven't figured out it yet. This is where I read and return T arrays
        } 
```

我觉得我必须使用指针来提高速度，因为我将致力于从 NetworkStream 类等流中写入和读取数据。谢谢你的帮助！

编辑：

当我试图弄清楚如何返回 T 数组时，我遇到了这个问题：

```
unsafe
        {
            fixed (byte* byteArray = new byte[5] { 0, 0, 255, 255, 34 })
            {
                short* shortArray = (short*)byteArray;
                MessageBox.Show((shortArray[0]).ToString()); // works fine output is 0
                MessageBox.Show((shortArray[1]).ToString()); // works fine output is -1

                short[] managedShortArray = new short[2];
                managedShortArray = shortArray; // The problem is, How may I convert pointer to a managed short array? ERROR: Cannot implicitly convert type 'short*' to 'short[]'
            }
        } 
```

**总结：我必须从字节数组转换为给定类型的 T 或给定长度的给定类型的 T 数组**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T18:16:37.547

由于 C# 中的指针限制，您不能将此函数设为通用函数。以下任何类型都可以是指针类型：

*   sbyte、byte、short、ushort、int、uint、long、ulong、char、float、double、decimal 或 bool。
*   任何枚举类型。
*   任何指针类型。
*   任何仅包含非托管类型字段的用户定义结构类型。

但是您不能对 T 设置限制`where T <can be pointer type>`。`where T : struct`非常接近，但还不够，因为用户定义的结构可以包含引用类型的字段。

有一种解决方法 - `System.Runtime.InteropServices.Marshal.PtrToStructure()`（如果它无法使用指定的对象类型，它只会抛出异常），但它也会扼杀任何已实现的性能改进。

我认为这样做的唯一方法是为所有需要的类型创建非泛型函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-22T17:50:03.583

编辑：添加到[C# 7.3的](https://docs.microsoft.com/en-us/visualstudio/releasenotes/vs2017-relnotes#csharp)`unmanaged` [约束](https://github.com/dotnet/csharplang/blob/master/proposals/csharp-7.3/blittable.md)。

在这一点上有点晚了，但随着 C# 7.3 的加入，`unmanaged`类型约束被添加了。

使用非托管类型约束，您可以使用泛型指针 ( `T*`) 等，前提是传入的类型是非托管的。

我测试了您提供的通用方法，它现在可以工作了。此外，您可以扩展它以返回一个数组，如下所示：

```
public static unsafe T[] ReadAsArray<T>(this Stream stream) where T : unmanaged
{
    var length = stream.Length;
    var returnArray = new T[length];

    for (var i = 0; i < length; i++)
    {
        int bytesToRead = sizeof(T); // no longer throws error
        byte[] buffer = new byte[bytesToRead];
        if (bytesToRead != stream.Read(buffer, 0, bytesToRead))
        {
            throw new Exception();
        }
        fixed (byte* byteArray = buffer)
        {
            T typeSingle = *(T*)byteArray; // no longer throws error
            returnArray[i] = typeSingle;
        }
    }

    return returnArray;
} 
```

您可以使用以下代码调用它，该代码将打印文件的内容：

```
using (var sourceStream = File.Open(filename, FileMode.Open))
{
    var byteArray = sourceStream.ReadAsArray<byte>();
    Console.Write(new string(byteArray.Select(b => (char)b).ToArray()));
} 
```

# visual-c++ - 不能在 MSVC 2010 中包含 Winsock2.h

> ID：11726958
> 
> 赞同：14
> 
> 时间：2012-07-30T17:58:17.167
> 
> 标签：visual-c++, winsock2, visual-studio-2010

我不能在 msvc++2010 项目中包含 WinSock2.h。起初我认为这是我做错了，所以我创建了一个空项目来测试我的理智。空项目如下

```
#include <Windows.h>
#include <WinSock2.h>

int main(void){

    system("echo Hello World");
    system("pause");
    return 0;

}; 
```

它可以在没有该行的情况下编译并正常工作，`#include <WinSock2.h>`但是当我尝试包含 WinSock2.h 时，它会因一长串错误而失败。

错误：

```
1>  Main.cpp
1>c:\program files\microsoft sdks\windows\v7.0a\include\ws2def.h(91): warning C4005: 'AF_IPX' : macro redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(460) : see previous definition of 'AF_IPX'
1>c:\program files\microsoft sdks\windows\v7.0a\include\ws2def.h(131): warning C4005: 'AF_MAX' : macro redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(479) : see previous definition of 'AF_MAX'
1>c:\program files\microsoft sdks\windows\v7.0a\include\ws2def.h(168): warning C4005: 'SO_DONTLINGER' : macro redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(402) : see previous definition of 'SO_DONTLINGER'
1>c:\program files\microsoft sdks\windows\v7.0a\include\ws2def.h(212): error C2011: 'sockaddr' : 'struct' type redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(485) : see declaration of 'sockaddr'
1>c:\program files\microsoft sdks\windows\v7.0a\include\ws2def.h(390): error C2059: syntax error : 'constant'
1>c:\program files\microsoft sdks\windows\v7.0a\include\ws2def.h(390): error C3805: 'constant': unexpected token, expected either '}' or a ','
1>c:\program files\microsoft sdks\windows\v7.0a\include\ws2def.h(524): warning C4005: 'IN_CLASSA' : macro redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(287) : see previous definition of 'IN_CLASSA'
1>c:\program files\microsoft sdks\windows\v7.0a\include\ws2def.h(530): warning C4005: 'IN_CLASSB' : macro redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(293) : see previous definition of 'IN_CLASSB'
1>c:\program files\microsoft sdks\windows\v7.0a\include\ws2def.h(536): warning C4005: 'IN_CLASSC' : macro redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(299) : see previous definition of 'IN_CLASSC'
1>c:\program files\microsoft sdks\windows\v7.0a\include\ws2def.h(547): warning C4005: 'INADDR_ANY' : macro redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(304) : see previous definition of 'INADDR_ANY'
1>c:\program files\microsoft sdks\windows\v7.0a\include\ws2def.h(549): warning C4005: 'INADDR_BROADCAST' : macro redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(306) : see previous definition of 'INADDR_BROADCAST'
1>c:\program files\microsoft sdks\windows\v7.0a\include\ws2def.h(583): error C2011: 'sockaddr_in' : 'struct' type redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(312) : see declaration of 'sockaddr_in'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(132): error C2011: 'fd_set' : 'struct' type redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(68) : see declaration of 'fd_set'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(167): warning C4005: 'FD_SET' : macro redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(102) : see previous definition of 'FD_SET'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(176): error C2011: 'timeval' : 'struct' type redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(111) : see declaration of 'timeval'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(232): error C2011: 'hostent' : 'struct' type redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(167) : see declaration of 'hostent'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(245): error C2011: 'netent' : 'struct' type redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(180) : see declaration of 'netent'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(252): error C2011: 'servent' : 'struct' type redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(187) : see declaration of 'servent'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(264): error C2011: 'protoent' : 'struct' type redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(199) : see declaration of 'protoent'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(360): error C2011: 'WSAData' : 'struct' type redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(322) : see declaration of 'WSAData'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(458): error C2011: 'sockproto' : 'struct' type redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(494) : see declaration of 'sockproto'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(500): error C2011: 'linger' : 'struct' type redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(531) : see declaration of 'linger'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(513): warning C4005: 'SOMAXCONN' : macro redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(544) : see previous definition of 'SOMAXCONN'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(542): warning C4005: 'FD_READ' : macro redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(562) : see previous definition of 'FD_READ'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(545): warning C4005: 'FD_WRITE' : macro redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(563) : see previous definition of 'FD_WRITE'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(548): warning C4005: 'FD_OOB' : macro redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(564) : see previous definition of 'FD_OOB'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(551): warning C4005: 'FD_ACCEPT' : macro redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(565) : see previous definition of 'FD_ACCEPT'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(554): warning C4005: 'FD_CONNECT' : macro redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(566) : see previous definition of 'FD_CONNECT'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(557): warning C4005: 'FD_CLOSE' : macro redefinition
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(567) : see previous definition of 'FD_CLOSE'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(1578): error C2375: 'accept' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(742) : see declaration of 'accept'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(1600): error C2375: 'bind' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(747) : see declaration of 'bind'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(1619): error C2375: 'closesocket' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(752) : see declaration of 'closesocket'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(1638): error C2375: 'connect' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(754) : see declaration of 'connect'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(1659): error C2375: 'ioctlsocket' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(759) : see declaration of 'ioctlsocket'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(1680): error C2375: 'getpeername' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(764) : see declaration of 'getpeername'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(1701): error C2375: 'getsockname' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(769) : see declaration of 'getsockname'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(1724): error C2375: 'getsockopt' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(774) : see declaration of 'getsockopt'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(1745): error C2375: 'htonl' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(781) : see declaration of 'htonl'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(1762): error C2375: 'htons' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(783) : see declaration of 'htons'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(1780): error C2375: 'inet_addr' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(785) : see declaration of 'inet_addr'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(1797): error C2375: 'inet_ntoa' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(787) : see declaration of 'inet_ntoa'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(1815): error C2375: 'listen' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(789) : see declaration of 'listen'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(1833): error C2375: 'ntohl' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(793) : see declaration of 'ntohl'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(1850): error C2375: 'ntohs' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(795) : see declaration of 'ntohs'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(1870): error C2375: 'recv' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(797) : see declaration of 'recv'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(1895): error C2375: 'recvfrom' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(803) : see declaration of 'recvfrom'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(1921): error C2375: 'select' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(811) : see declaration of 'select'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(1945): error C2375: 'send' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(818) : see declaration of 'send'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(1970): error C2375: 'sendto' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(824) : see declaration of 'sendto'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(1996): error C2375: 'setsockopt' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(832) : see declaration of 'setsockopt'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2018): error C2375: 'shutdown' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(839) : see declaration of 'shutdown'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2039): error C2375: 'socket' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(843) : see declaration of 'socket'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2063): error C2375: 'gethostbyaddr' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(850) : see declaration of 'gethostbyaddr'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2083): error C2375: 'gethostbyname' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(855) : see declaration of 'gethostbyname'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2101): error C2375: 'gethostname' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(857) : see declaration of 'gethostname'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2121): error C2375: 'getservbyport' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(861) : see declaration of 'getservbyport'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2141): error C2375: 'getservbyname' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(865) : see declaration of 'getservbyname'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2160): error C2375: 'getprotobynumber' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(869) : see declaration of 'getprotobynumber'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2178): error C2375: 'getprotobyname' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(871) : see declaration of 'getprotobyname'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2200): error C2375: 'WSAStartup' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(875) : see declaration of 'WSAStartup'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2219): error C2375: 'WSACleanup' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(879) : see declaration of 'WSACleanup'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2236): error C2375: 'WSASetLastError' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(881) : see declaration of 'WSASetLastError'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2253): error C2375: 'WSAGetLastError' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(883) : see declaration of 'WSAGetLastError'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2270): error C2375: 'WSAIsBlocking' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(885) : see declaration of 'WSAIsBlocking'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2287): error C2375: 'WSAUnhookBlockingHook' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(887) : see declaration of 'WSAUnhookBlockingHook'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2304): error C2375: 'WSASetBlockingHook' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(889) : see declaration of 'WSASetBlockingHook'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2321): error C2375: 'WSACancelBlockingCall' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(891) : see declaration of 'WSACancelBlockingCall'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2343): error C2375: 'WSAAsyncGetServByName' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(893) : see declaration of 'WSAAsyncGetServByName'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2370): error C2375: 'WSAAsyncGetServByPort' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(901) : see declaration of 'WSAAsyncGetServByPort'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2396): error C2375: 'WSAAsyncGetProtoByName' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(909) : see declaration of 'WSAAsyncGetProtoByName'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2421): error C2375: 'WSAAsyncGetProtoByNumber' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(916) : see declaration of 'WSAAsyncGetProtoByNumber'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2446): error C2375: 'WSAAsyncGetHostByName' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(923) : see declaration of 'WSAAsyncGetHostByName'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2473): error C2375: 'WSAAsyncGetHostByAddr' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(930) : see declaration of 'WSAAsyncGetHostByAddr'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2496): error C2375: 'WSACancelAsyncRequest' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(939) : see declaration of 'WSACancelAsyncRequest'
1>c:\program files\microsoft sdks\windows\v7.0a\include\winsock2.h(2517): error C2375: 'WSAAsyncSelect' : redefinition; different linkage
1>          c:\program files\microsoft sdks\windows\v7.0a\include\winsock.h(941) : see declaration of 'WSAAsyncSelect'
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我假设微软不会在他们的 SDK 中分发错误的头文件，这是怎么回事？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-30T18:05:05.813

我相信您会收到这些错误，因为 windows.h 将包含 winsock.h。颠倒包含的顺序，以便 WinSock2.h 位于 windows.h 之前。WinSock2.h 中有一些#defines 以防止 windows.h 包含 winsock.h

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-25T18:00:18.553

我确保 #include "Winsock2.h" 在任何 #include "windows.h" 和 "#include "Winsock.h" 之前，这解决了这个问题。

只是耐心的问题，逐个查看包含并建立此顺序，首先#include“Winsock2.h”然后#include“windows.h”

我检查了递归包含，我发现了包含（递归）一些#include“windows.h”和“#include“Winsock.h”的头文件并写了一个#include“Winsock2.h”。在这个文件中，我添加了#include "Winsock2.h"` 作为第一个包含。

# ruby-on-rails - 通过连接模型调用时虚拟属性不保持值？

> ID：11726959
> 
> 赞同：0
> 
> 时间：2012-07-30T17:58:27.580
> 
> 标签：ruby-on-rails, ruby, activerecord, attributes

也许是菜鸟问题，也许不是，也许我缺乏 OOT 但我仍然无法回答为什么我无法获得分配给 true 的实例变量 @upgrade 的值。

```
class OrderTemplate < ActiveRecord::Base
    belongs_to :user

    attr_writer :upgrade #to hold upgrade process across actions

    def upgrade
        @upgrade || false
    end

    def from_time
        p self.inspect
        ------------------------> they looks same
        p self.upgrade
        ------------------------> is true as is supposed to be

        p self.user.order_template.inspect
        ------------------------> they looks same
        p self.user.order_template.upgrade
        ------------------------> is false but i am expecting true

        self.user.has_time_bonus?
    end
end

class User < ActiveRecord::Base
    has_one :order_template

    def has_time_bonus?
        p self.order_template.upgrade
        ------------------------> is false but i am expecting true
    end

end 
```

请打我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:28:15.483

简短的版本是“activerecord 没有身份映射”（或者至少，它没有启用）。如果你这样做

```
an_order_template.user.order_template 
```

然后`user.order_template`导致`OrderTemplate`第二次从数据库中加载，因此您有两个不同的内存对象表示同一数据库行。第二个副本不会在内存中进行任何更改（包括您的实例变量）。

你可以通过这样做来解决这个问题

```
class OrderTemplate < ActiveRecord::Base
  belongs_to :user, :inverse_of => :order_template
end

class User < ActiveRecord::Base
  has_one :order_template, :inverse_of => :user
end 
```

该`:inverse_of`选项有助于 Active Record 加入点，以便当您这样做时

```
an_order_template.user.order_template 
```

rails 知道两个订单模板是同一个对象。

# c - exit(0) 的目的是什么？

> ID：11726964
> 
> 赞同：0
> 
> 时间：2012-07-30T17:58:46.077
> 
> 标签：c, linux, exit

我了解这`exit(1)`表示错误，例如：

```
if (something went wrong) 

     exit(EXIT_FAILURE); 
```

但是使用的目的是`exit(EXIT_SUCCESS);`什么？

处理流程时可能吗？例如对于`fork()`？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T17:59:49.883

这为调用程序的系统部分（通常是命令外壳）提供了一种检查程序是否正常终止的方法。

**编辑** ——开始——

`$?`顺便说一句，也可以通过使用shell 变量来查询交互式命令的退出代码。例如，这个失败`ls`的命令会产生一个退出代码 value `2`。

> ```
> $ ls -3
> ls: invalid option -- '3'
> Try `ls --help' for more information.
> $ echo $?
> 2 
> ```

**编辑** ——结束——

想象一个调用一系列程序的批处理文件（或 shell 脚本），并且根据每次运行的结果可能会选择一些操作或其他操作。该动作可能包括给用户的简单消息，或调用一些其他程序或程序集。

这是程序返回其运行状态的一种方式。

*另外*，请注意，*零*表示没有问题，任何*非零*值都表示有问题。

程序通常会使用不同的非零值来传递更多信息（不仅仅是非正常终止）。因此，非零退出值将用作可以识别特定问题的更具体的错误代码。这当然取决于可用代码的含义（通常/希望在文档中）

例如，[ls 手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?ls)的底部有以下信息：

> 退出状态为 0 表示正常，1 表示小问题，2 表示严重问题。

对于 Unix/Linux 手册页，查找标题为 EXIT STATUS 的部分以获取此信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:00:43.330

您只能通过调用 return 从主函数中退出程序。要从其他任何地方退出程序，您可以调用 exit(EXIT_SUCCESS)。例如，当用户单击退出按钮时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T18:03:13.167

这是一个系统调用。如果您查看手册页，总会有关于系统调用的好信息：

[http://linux.die.net/man/3/exit](http://linux.die.net/man/3/exit)

在 Linux 机器上，您只需`man exit`在终端中输入，就会出现此信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T18:03:50.357

有两种“正常”退出程序的方式：从返回`main()`或调用`exit()`。通常`exit()`用于并被认为是发出故障信号。但是，如果您不在`main()`，您仍然必须以某种方式退出。 `exit(0)`通常用于在不在时终止进程`main()`。

`main()`实际上对操作系统来说并不是一个特殊的功能，只是对运行时环境来说。实际加载的“函数”通常定义为`_start()`（由链接器处理，超出此答案的范围），用汇编语言编写，它只是准备环境并调用`main()`. 在 from 返回时`main()`，它还`exit()`使用 from 的返回值调用`main()`。

# jasmin - 如何在 jasmin 中创建 Hashmap？

> ID：11726965
> 
> 赞同：1
> 
> 时间：2012-07-30T17:58:52.657
> 
> 标签：jasmin

我想在 Jasmin 的一个类中创建一个 HashMap，它的等效 Java 将是：

```
class grammar {
Hashmap <String, Integer> memory= new Hashmap <String, Integer>;
} 
```

有什么关系

```
Ljava/util/HashMap 
```

任何帮助，将不胜感激

# jquery - Ember #each 每次都从数组中获取每个元素而不是整个数组？

> ID：11726967
> 
> 赞同：1
> 
> 时间：2012-07-30T17:58:55.987
> 
> 标签：jquery, arrays, binding, ember.js

我定义了一个 Ember 对象，它从 .json 文件中获取数据。

我正在使用 ember 和 x-handlebars 从已使用 Ember 数组控制器定义为 Ember 对象的一部分的数组输出图像。

数组定义如下：

```
{
     "gallery_small": ["data/images/gallery_01_small.jpg", "data/images/gallery_02_small.jpg"]  
} 
```

我当前的 html 是：

```
{{#each content.gallery_small}}
     {{#collection contentBinding="Application.projectdetailController"}}
          {{content.gallery_small}}
     {{/collection}}
{{/each}} 
```

当前输出的是

```
data/images/gallery_01_small.jpg,data/images/gallery_02_small.jpg
data/images/gallery_01_small.jpg,data/images/gallery_02_small.jpg 
```

**我想要的是**

```
data/images/gallery_01_small.jpg
data/images/gallery_02_small.jpg 
```

我怎样才能得到这个？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:51:31.637

通过这样做`{{#collection contentBinding="Application.projectdetailController"}}`，您正在定义一个新的上下文。所以在 {{content.gallery_small}} 中，内容是 Application.projectdetailController 的一个对象，它似乎是数组。

我会试试这个：

```
{{#each image in Application.projectdetailController.content}}
    {{image}}
{{/each}} 
```

如果它不起作用，请使用您的完整代码更新您的问题，或创建一个 jsfiddle，以便我更好地理解问题所在。

# javascript - 关闭 Javascript 后自动重启 Ajax 请求，然后再打开

> ID：11726969
> 
> 赞同：0
> 
> 时间：2012-07-30T17:58:59.133
> 
> 标签：javascript, ajax, local-storage, polling

当Javascript在关闭后打开时，有什么方法可以继续发送Ajax请求（例如，在轮询应用程序中，只要收到来自上一个请求的响应，就会发送请求，在页面加载时立即开始）由用户一段时间？

至于变量的值，我观察到行为不一致：一些浏览器在 Javascript 恢复时保留已经设置的变量的值，而另一些则没有。因此，如果我想在特定选项卡会话期间保存所有值，将所有变量（在复杂脚本中可能有数千个变量！）保存为局部变量（通过本地存储 API 或 jStorage ，在 IE6 和 IE7 中也可以使用）在关闭选项卡时会自动销毁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:10:06.920

如果 Ajax 依赖于 Javascript，那么当关闭的 javascript 支持在您的浏览器中恢复时不会以任何方式重新加载页面。

从 Ajax 定义：[http](http://en.wikipedia.org/wiki/Ajax_%28programming%29) ://en.wikipedia.org/wiki/Ajax_%28programming%29 我认为这是不可能的。

# javascript - 通过键盘导航表格？

> ID：11726976
> 
> 赞同：6
> 
> 时间：2012-07-30T17:59:25.673
> 
> 标签：javascript, jquery, html-table

我正在尝试制作一个可以执行以下操作的表格。

1.  行 x 列 = 3x3：好的
2.  通过键盘导航：好的
3.  当“焦点”（或其他东西）在单元格更新`div2`时`data-param2:`不起作用。
4.  在键盘上按 Enter 时，`div1`使用 data-param1 更新：不起作用

```
<html>
<head>
  <title>arrows.htm</title>
  <script language="javascript" type="text/javascript" src="js/keycode.js"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.js"></script>

  <script type="text/javascript">
    var b4 = "";
    var col = 1;
    var row = 1;

    function bg() {
     var rc = "r" + row + "c" + col;
     if (b4 == "") b4 = rc;
     document.getElementById(b4).style.backgroundColor = "white";
     document.getElementById(rc).style.backgroundColor = "yellow";
     b4 = rc;
    }

    function test(){
     document.getElementById("q").innerHTML=this.id;
    }

    function processKeyDown(e) {
     var keyCode;
     if(e.which) { keyCode = e.which; } 
     else {
      alert("Unknown event type.");
      return ;
     }

     processKeyHandle(keyCode);
    }

    function processKeyHandle(keyCode) {
     var nc = 0;
     switch(keyCode) {
      case VK_LEFT :
      if (col > 1) col--;
       bg();
       break;
      case VK_UP :
       if (row > 1) row--;
       bg();
       break;
      case VK_RIGHT :
       if (col < 3) col++;
       bg();
       break;
      case VK_DOWN :    
       if (row < 3) row++;
       bg();
      case VK_ENTER :   
       break;
     }
    }

    </script>
    </head>
    <body onload="bg()" onkeydown="processKeyDown(event);" >
      <div id="div1">test</div>
      <div id="div2">test2</div>
      <div>
        <table border="1" id="tab">
          <tr>
            <td id="r1c1"><img class="imgs" height="100" width="50" class="e" data-param1="666" data-param2="777" src="http://web.scott.k12.va.us/martha2/dmbtest.gif" /></td>
            <td id="r1c2">b0</td>
            <td id="r1c3">c0</td> 
          </tr>
          <tr>
            <td id="r2c1">a1</td>
            <td id="r2c2">b1</td>
            <td id="r2c3">c1</td>
          </tr>
          <tr>
            <td id="r3c1">a2</td>
            <td id="r3c2">b2</td>
            <td id="r3c3">c2</td>
          </tr>
       </table>
      </div>
    <script>
     $(".imgs").click(function(){
      var elmThis = $(this);
      $("#div1").text(elmThis.data("param1"));  
     });
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:54:11.770

我让它工作

```
<html>
<head>

</head>
<body onload="bg()" onkeydown="processKeyDown(event);" >
<div id="div1">test</div>
<div id="div2">test2</div>
<div>
    <table border="1" id="tab">
        <tr>
            <td id="r1c1" data-param1="r1c1 param1" data-param2="r1c1 param2">a0</td>
            <td id="r1c2" data-param1="r1c2 param1" data-param2="r1c2 param2">b0</td>
            <td id="r1c3" data-param1="r1c3 param1" data-param2="r1c3 param2">c0</td>
        </tr>
        <tr>
            <td id="r2c1" data-param1="r2c1 param1" data-param2="r2c1 param2">a1</td>
            <td id="r2c2" data-param1="r2c2 param1" data-param2="r2c2 param2">b1</td>
            <td id="r2c3" data-param1="r2c3 param1" data-param2="r2c3 param2">c1</td>
        </tr>
        <tr>
            <td id="r3c1" data-param1="r3c1 param1" data-param2="r3c1 param2">a2</td>
            <td id="r3c2" data-param1="r3c2 param1" data-param2="r3c2 param2">b2</td>
            <td id="r3c3" data-param1="r3c3 param1" data-param2="r3c3 param2">c2</td>
        </tr>
    </table>
</div>
<script language="javascript" type="text/javascript" src="js/keycode.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.js"></script>

<script type="text/javascript">
var b4 = "";
var col = 1;
var row = 1;

function bg() {
    var rc = "r" + row + "c" + col;
    if (b4 == "") b4 = rc;
    $("#"+b4).css("backgroundColor","white");
    $("#div2").text($("#"+rc).css("backgroundColor","yellow").data("param2"));
    b4 = rc;
}

function processKeyDown(e) {
    var keyCode;

    if(e.which) { 
        keyCode = e.which;
    } else {
        alert("Unknown event type.");
        return ;
    }

    processKeyHandle(keyCode);

}

function processKeyHandle(keyCode) {
    var nc = 0;
    switch(keyCode) {
    case VK_LEFT :
        if (col > 1) col--;
        bg();
        break;
    case VK_UP :
        if (row > 1) row--;
        bg();
        break;
    case VK_RIGHT :
        if (col < 3) col++;
        bg();
        break;
    case VK_DOWN :  
        if (row < 3) row++;
        bg();
        break;
    case VK_ENTER : 
        $("#div1").text($("#"+b4).data("param1"));
        break;
    }
}

</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:24:55.623

看起来您使用的`$.data()`不是 html5 属性`data-yournamehere`

如果要设置或访问它们，请执行以下操作：

`$(this).attr('data-param', 'set-the-value-here');`

要检索它，只需执行`$(this).attr('data-param');`

# ios - 使用 NSOperations 时的兄弟 NSManagedObjectContexts

> ID：11726979
> 
> 赞同：0
> 
> 时间：2012-07-30T17:59:37.527
> 
> 标签：ios, core-data, nsoperation, nsoperationqueue, magicalrecord

我在使用 NSOperations 的多线程应用程序中使用 CoreData 时遇到了一些麻烦。我通过 MagicalRecord (2.0.3) 使用嵌套的 ManagedObjectContexts，如下所示：

```
Root Context (saves to disk)
|
Main Thread Context (for populating the UI)
|
Sub-Context(s) (used to add/edit/remove data) 
```

我有一个 NSOperationQueue 来处理所有数据处理。

在大多数情况下，一切正常，我可以异步下载数据，然后将其提供给 NSOperation，然后将其写入其中一个子上下文。在操作结束时保存会将更改推送到主上下文并更新 UI。伟大的！

问题是，如果子上下文删除了一个实体并保存（将其推送到主上下文），同级子上下文仍然会认为它存在。因此，如果兄弟姐妹试图使实体出错并将其从其父级（主要上下文）中拉出，我会崩溃。

我有两个问题：

*   我应该使用 MOC 通知将推送到主 MOC 的更改合并回它的其他子节点吗？我这个并且正在发生另一次崩溃......
*   我什至应该有多个子上下文吗？MOC 应该与单个线程相关联（MagicalRecord 帮助我自动执行此操作），并且我有一个 NSOperationQueue 用于保存数据，所以我不应该只有 1 个子上下文吗？我已经验证有时我的保存是由不同的上下文执行的。

我会很感激任何建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:43:06.523

您可以并且应该拥有多个子上下文。但是，我不确定上下文的经典“线程隔离模式”是否是您应该拥有的模型。当您说上下文应该属于特定线程时，这就是您正在做的事情。MagicalRecord 2.0x 现在使用私有队列上下文，因此行为会有所不同。没有规则说兄弟上下文需要保持同步。你必须自己做。一个非常简单的解决方案是在您正在保存的上下文上收听“已保存”通知，然后在另一个线程上重置或创建新上下文。您可以通过通知或 MagicalRecord 提供的完成黑色来做到这一点。

希望这可以帮助

# c# - 将程序集反编译成项目

> ID：11726980
> 
> 赞同：2
> 
> 时间：2012-07-30T17:59:38.583
> 
> 标签：c#, visual-studio, decompiling, reflector

我想查看位于 System.dll 上的 Regex 类的一些私有变量的值。如果好奇为什么我会喜欢 twick 那个班看看[这个问题。](https://stackoverflow.com/questions/11726583/how-to-see-how-far-index-of-regex-went-on-unsuccessful-match)

所以我将不得不反编译`C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\System.dll`

我可以用反射器反编译它：

![在此处输入图像描述](../Images/39586a1879196ea2a9e7d4130275ea8e.png)

**现在我的问题是**有没有办法用所有这些类创建视觉工作室的解决方案。那里有数百个课程，我不想一个一个地把它们放到我的新项目中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T18:41:14.647

ILSpy 和 JustDecompile 都允许导出到 Visual Studio 项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T18:14:17.843

如果您想创建整个项目，请查看[http://www.reflector.net/](http://www.reflector.net/)它有一个名为 FileDisassembler [http://www.reflector.net/add-ins/](http://www.reflector.net/add-ins/)的插件，它可以满足您的需求.

# r - R：重叠的ggplots

> ID：11726981
> 
> 赞同：1
> 
> 时间：2012-07-30T17:59:40.340
> 
> 标签：r, ggplot2, histogram

我有一个关于 R 的快速问题。我正在尝试从我从文件中提取的一些数据中制作分层直方图，但我很难让 ggplot 与我一起工作。我不断收到此错误，我一直在寻找答案，但我没有看到太多。

```
 Error: ggplot2 doesn't know how to deal with data of class uneval
    Execution halted 
```

到目前为止，这是我的程序的简要介绍。

```
library("ggplot2")
ex <- '/home/Data/run1.DOC'
ex2 <- '/home/Data/run2.DOC'
...   
ex<- read.table(ex,header=TRUE)
ex2<- read.table(ex2,header=TRUE)
...
colnames(ex) <- c(1:18)
colnames(ex2) <- c(1:18)
...
Ex <- c(ex$'14')
Ex2 <- c(ex2$'14')
...
ggplot()+
geom_histogram(data = Ex, fill = "red", alpha = 0.2) +
    geom_histogram(data = Ex2, fill = "blue", alpha = 0.2) 
```

我的数据在文件中，看起来有点像这样：

```
head(ex,10)
        1     2      3     4      5  6   7   8     9  10    11    12
    1  1:28   400   0.42   400   0.42  1   1   2  41.8   0   0.0   0.0
    2  1:96  5599  39.99  5599  39.99 34  42  50 100.0 100 100.0 100.0
    3  1:53   334   0.63   334   0.63  1   2   2  62.1   0   0.0   0.0
    4  1:27  6932  49.51  6932  49.51 48  52  57 100.0 100 100.0 100.0
    5  1:36 27562 124.15 27562 124.15 97 123 157 100.0 100 100.0 100.0
    6  1:14  2340  16.71  2340  16.71 13  17  21 100.0 100 100.0  95.7
    7  1:96  8202  49.71  8202  49.71 23  43  80 100.0 100 100.0 100.0
    8  1:34  3950  28.21  3950  28.21 22  33  36 100.0 100 100.0 100.0
    9  1:60  5563  24.62  5563  24.62 11  24  41 100.0 100  96.5  75.2
    10 1:06  1646   8.11  1646   8.11  7   8  13 100.0 100  87.2  32.0
          13    14    15    16   17   18
    1    0.0   0.0   0.0   0.0  0.0  0.0
    2   93.6  82.9  57.9  24.3  0.0  0.0
    3    0.0   0.0   0.0   0.0  0.0  0.0
    4  100.0  97.1  87.1  57.1  0.0  0.0
    5  100.0 100.0 100.0 100.0 88.3 71.2
    6   40.0   0.0   0.0   0.0  0.0  0.0
    7   81.2  66.7  54.5  47.9 29.1  0.0
    8   76.4  55.7   0.0   0.0  0.0  0.0
    9   57.5  35.4  26.5   4.4  0.0  0.0
    10   0.0   0.0   0.0   0.0  0.0  0.0 
```

但要大得多。这意味着 ex 和 ex2 将是从 0 到 100 的百分比。 colnames 行将 %_above_30 之类的列标题更改为 R 更喜欢的内容，因此我将其更改为对每个列名进行编号。

有谁知道/看到这里的问题，因为我并没有真正得到它。谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T18:12:20.090

也许尝试将两个数据帧合二为一并将其提供给一个`geom_histogram`：

```
#maybe reshape it something like this (base reshape or the 
#reshape package may be a better tool)
dat <- data.frame(rbind(ex, ex2), 
    colvar=factor(c(rep("ex", nrow(ex)), rep("ex2", nrow(ex2))))

ggplot(data = dat, fill = colvar)+
    geom_histogram(position="identity", alpha = 0.2) 
```

这是未经测试的，因为您的代码不可重现（请参阅[此链接](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)以了解如何制作可重现的示例）。

这是我用一个可重现的例子谈论的想法：

```
library(ggplot2) 
path = "http://www-stat.stanford.edu/~tibs/ElemStatLearn/datasets/SAheart.data" 

saheart <- read.table(path, sep=",",head=T,row.names=1) 
fmla <- "chd ~ sbp + tobacco + ldl + adiposity + famhist + typea + obesity" 
model <- glm(fmla, data=saheart, family=binomial(link="logit"), 
    na.action=na.exclude) 
dframe <- data.frame(chd=as.factor(saheart$chd), 
    prediction=predict(model, type="response")) 

ggplot(dframe, aes(x=prediction, fill=chd)) + 
    geom_histogram(position="identity", binwidth=0.05, alpha=0.5) 
```

# php - 如何改进 PHP 的这个 NONCE 库？

> ID：11726984
> 
> 赞同：7
> 
> 时间：2012-07-30T17:59:50.067
> 
> 标签：php, security

这是我第一次使用 nonce，所以我从[http://fullthrottledevelopment.com/php-nonce-library](http://fullthrottledevelopment.com/php-nonce-library)下载了脚本。我不喜欢该代码，尤其是因为该函数以定义的时间间隔（默认为 300 秒）工作，因此有可能将合法请求视为无效。

例如，当随机数生成时，我们可以在 299 秒到 300 秒，所以随机数只能工作 1 秒。

我将库修改为以下函数。我所做的是使用 . 检查当前间隔和上一个间隔`nonce_create(time()-NONCE_DURATION)==$nonce`。有没有办法进一步改进功能？：

```
define( 'NONCE_UNIQUE_KEY' , '123123' );
define( 'NONCE_DURATION' , 300 );

function nonce_create($time=false){
    if(!$time)
        $time=time();
    $i=ceil($time/(NONCE_DURATION));
    return substr(md5($i.NONCE_UNIQUE_KEY),-12,10);
}

function nonce_is_valid($nonce){
    if (nonce_create()==$nonce || nonce_create(time()-NONCE_DURATION)==$nonce)
        return true;
    return false;
} 
```

另外，我对原始库有两个问题：

1.  为什么不`NONCE_UNIQUE_KEY`使用？作者是不是忘记了？
2.  为什么作者在这里除以二：`$i = ceil( time() / ( FT_NONCE_DURATION / 2 ) );`，它只工作了一半的时间（我试过了）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:54:51.493

这会产生一个随机数，但它不是加密随机数。这个库产生的值**绝**不能用于安全性，因为它严重依赖于时间的使用。攻击者知道当前时间，并且知道您的服务器时间，因为它在 http 响应标头中。此外，md5() 的 prng 输出并不像应有的那样随机。有许多针对 md5 的已知漏洞，绝对不应**将**其用于安全性。base 16 的 10 个字节也非常小，base256 的 16 个字节将是理想的。

如果您需要一个相当难以猜测的唯一值，那么这在大多数情况下都有效：

`sha1(uniqeid(mt_rand(),true));`

然而，这并不理想。输出是base16，非常浪费空间。uniqeid() 仍然使用时间，但是结果值中还有其他熵源。

**到目前为止，** Web 应用程序的最佳熵源是用于`/dev/urandom`访问`fopen()`它并读取 16 个字节的 base256 内容。/dev/urandom 是一个熵存储，它从操作系统、其硬件以及系统上所有应用程序的行为中收集随机源。

# linux - 更改类路径以启动 vm

> ID：11726988
> 
> 赞同：1
> 
> 时间：2012-07-30T18:00:16.870
> 
> 标签：linux, junit, virtual-machine, jdi

首先，我正在使用 linux :) 我正在尝试使用 JDI 启动 VM。我需要更改连接器中的参数。该连接器是来自 Bootstrap.virtualMachineManager() 的 LaunchingConnector 连接器。代码是这样的：

```
 for (LaunchingConnector connector : Bootstrap.virtualMachineManager().
       launchingConnectors()) {
        if (connector.name().equals("com.sun.jdi.CommandLineLaunch")) {
           Map<String, Connector.Argument> map = connector.defaultArguments();

           StringArgument arg = (StringArgument) map.get("main");
           arg.setValue(mainClass); //junit core

           arg = (StringArgument) map.get("options");
           arg.setValue(classpath); 
```

我正在尝试更改类路径，以便它查找 JUnit 核心，我告诉它，新的类路径是“../../lib/junit-4.6.jar”，类是“org.junit.runner。 JUnitCore”

当我尝试跑步时

```
 VirtualMachine vm = connector.launch(map); 
```

它会抛出 VMStartException，因为它尝试运行如下命令：

```
 /usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java ../../lib/junit-4.6.jar -Xdebug -Xrunjdwp:transport=dt_socket,address=CIS-Visitor:57881,suspend=y org.junit.runner.JUnitCore 
```

它没有改变类路径，最后它没有返回一个虚拟机。谁能告诉我改变这种情况的方法？我还想从命令中取出 -Xdebug 并更改端口号。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T17:00:29.843

我相信用于启动机器的类路径不会被您创建的新 VM 自动继承。但是，看起来如果您使用环境变量来定义类路径，它们就会被继承。有关类似问题，请参阅[无法运行 JDI 跟踪示例：错误：无法找到或加载主类。](https://stackoverflow.com/questions/14661122/cant-run-jdi-trace-example-error-could-not-find-or-load-main-class/16929194#16929194)

# javascript - 我应该如何定义以下模块以使其正常工作

> ID：11726990
> 
> 赞同：0
> 
> 时间：2012-07-30T18:00:27.117
> 
> 标签：javascript, backbone.js

我正在尝试使用类（模块）（1）扩展 Backbone.Collection var `MessageCollection.prototype`（2）。

我应该如何定义以下模块以使其正常工作？

* * *

(1)

```
/*global define, setTimeout*/
define([
    'underscore'
], function (_) {
    "use strict";

    return {
        startPolling: function () {
            this.polling = true;
            this.executePolling();
//            _.bindAll(this, 'onFetch', 'startPolling', 'stopPolling');
        },

        stopPolling: function () {
            this.polling = false;
        },

        executePolling: function () {
            this.fetch({success : this.onFetch});
        },

        onFetch: function () {
            var self = this;
            console.log(this); // undefined
            console.log(self); // undefined
            if (this.polling) { // Cannot read property 'polling' of undefined 
                setTimeout(this.executePolling, 1000 * 60 * this.minutes);
            }
        }

    }

    return Poll;

}); 
```

* * *

(2)

```
/*global define*/
define([
    'underscore',
    'backbone',
    'moment',
    '../utils/poller'
], function (_, Backbone, Poller) {
    'use strict';

    var MessageCollection = Backbone.Collection.extend({
        // some code
    });

    _.extend(MessageCollection.prototype, Poller);

    return MessageCollection;
}); 
```

* * *

```
var messageCollection = new MessageCollection();
messageCollection. startPolling(); // Cannot read property 'polling' 
                          // of undefined (see the comment on the code) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:05:13.903

问题可能出在您的`setTimeout`. 当一个函数被传递给 时`setTimeout`，它会在全局范围内执行。

因此，`this.executePolling`在全局范围内调用，这意味着`this`该函数内部将是`window`.

尝试将其更改为：

```
var that = this;
setTimeout(function(){
    that.executePolling
}, 1000 * 60 * this.minutes); 
```

# android - 以 csv 格式导出 Android 联系人

> ID：11726995
> 
> 赞同：1
> 
> 时间：2012-07-30T18:00:48.837
> 
> 标签：android, json

嗨，我是 android 新手，想知道如何以 csv 格式导出 android 联系人。

因为我需要将文件传输到 Web 服务器，然后需要将其存储在集中式数据库（MySQL）中，vCard 不太可取...

否则可能听起来很傻，但我可以将它转换为 JSON 吗？

你的重播对我来说真的很重要谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:02:41.513

阅读此答案：[Android 联系人提取](https://stackoverflow.com/questions/1588378/android-contacts-extraction)

看起来 VCard 是最简单的选择，因为它有一个 API。

# amazon-ec2 - 测试 Amazon EC2、RDS 和 ELB 性能

> ID：11726996
> 
> 赞同：3
> 
> 时间：2012-07-30T18:00:49.600
> 
> 标签：amazon-ec2, amazon-web-services, load-testing, performance-testing, amazon-rds

我有一个在亚马逊网络服务上运行的 PHP 应用程序。这是一个相对简单的 PHP 脚本，它基本上对 SQL 数据库进行简单的写入。此数据库是一个超大型 RDS 实例。PHP 在负载均衡器后面的大型 EC2 实例上运行。

我想做的是对我的脚本进行压力测试，以模拟大约 800 个同时连接的用户（是的，这确实是估计值）。

我听说过 Siege，但我不确定如何使用它来测试我的应用程序。如果我尝试从家里的连接运行它，我不确定我的 PC / ADSL 是否足够快以创建足够的流量来模拟 800 个用户同时攻击 EC2（因此是 RDS）。

是否建议在另一个区域中启动另一个 EC2 实例来简单地“围攻”我的应用程序？或者可能运行 2 个 EC2 实例，每个实例都围攻 400 个用户！？

希望这将彻底测试负载平衡、RDS 和 EC2。

有没有人有这种高并发用户测试的经验？

安迪

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T21:16:45.640

我写了一个脚本，它可能会帮助您满足您的需求，详情请[点击此处](http://www.http503.com/2012/run-jmeter-on-amazon-ec2-cloud/)，来源请[点击此处](https://github.com/oliverlloyd/jmeter-ec2)。

但首先，实际上，这是最重要的事情，您需要考虑什么定义了“用户”。虽然从描述性的角度来看似乎很明显，但从技术角度来看，您需要开始谈论每秒请求数。

既然 bug 熊已经不在了，要使用 ELB 对 Amazon 运行负载测试，您可能想知道几件事。

1.  在这种负载下，您很可能需要要求亚马逊“预热”东西。上次我研究这个时，我发现 ELB 本质上是一个在简单实例上运行的软件负载均衡器。像所有事物一样，这些实例具有吞吐量限制，并且往往会在每秒 40 个请求左右（非常模糊）达到最大值。它们会自动缩放，但此算法不适合负载测试，因此预热是亚马逊预先启动 X ELB，其中 X 基于您在请求中提供给它们的信息（请参阅我关于每秒请求数的第一点，而不是用户）。

2.  ELB 可以缓存 DNS，这在负载测试中可能会导致问题。如果您的测试工具是基于 java 的（如 JMeter），请使用：-Dsun.net.inetaddr.ttl=0

无论您选择哪种解决方案，都要非常清楚您的测试本身可能会成为瓶颈，您应该先检查这一点，然后再指责您正在测试的应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T18:09:56.453

有许多基于云的负载测试服务可用，包括

[http://blazemeter.com](http://blazemeter.com) http://www.neustar.biz/enterprise/web-performance

它们可能会变得非常昂贵，但话又说回来，可以启动许多 ec2 实例进行测试（加上您的工程时间）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T20:16:12.307

不要放弃围攻。它是一个简单但非常强大的负载测试工具。基本用法示例可能是：

```
siege -d 1 -c 10 http://url 
```

这将模拟大约每 1 秒发出请求的 10 个同时连接（用户）。如果您的 HTTP 请求和响应的大小足够小，那么您可能会很好 - 即使使用您的 DSL 连接。Siege 将向您显示统计数据，包括平均响应大小，因此您应该能够轻松估计您的限制是什么。如果连接的大小太大，那么使用单独的 EC2 实例的想法肯定会很好用。可能一个实例就足够了，但您可能必须增加正在运行 siege 的机器上的文件描述符限制（否则您将用完它们）：

```
sysctl -w fs.file-max=100000 
```

如果您想使用多个 URL 进行测试，您可以将它们放在一个文本文件中并告诉 siege 将其用作目标：

```
siege -d 1 -c 800 -i -t 2m -f urls.txt 
```

将模拟 800 个用户每 1 秒发出请求，持续 2 分钟。URL 将从 urls.txt 文件中随机选择 (-i)。

我建议运行几个测试，逐渐增加连接数。

当它完成或使用 ctrl+C 手动终止它时，您应该会得到很好的统计信息。如果测试会产生比您当前拥有的更多的流量，您将必须请求 AWS 支持的 ELB 预热。ELB 在响应流量高峰时扩展吞吐量的速度很慢。

默认情况下，Siege 使用 HTTP 1.1，因此如果您的服务器使用持久连接 - 它会起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T14:10:25.143

有许多工具可以从云中生成负载——这可能是您想要做的（这比设置自己的负载引擎容易得多）。一定要选择一个可以处理 DNS 负载平衡的...许多在测试期间无法处理新的 DNS 条目，因此不能准确地测试 ELB 应用程序。上面对 JMeter 的建议有所帮助，但仍不完全准确，因为一旦新 IP 可用，更大百分比的 VU 将切换到新 IP。真实用户将使用他们开始使用的 IP，只有新用户才会使用新添加的 IP。

我会拉皮条我们的软件，它可以准确地测试 ELB 站点 - [Web Performance Load Tester](http://www.webperformance.com/load-testing/)。您可以在这里试用免费版本：[http](http://www.webperformance.com/load-testing/free-load-tester-lite.html) ://www.webperformance.com/load-testing/free-load-tester-lite.html ，如有任何问题，请随时与我们联系。

# c# - 创建时在 Windows 服务中加载的全局数据需要由 WCF dll 访问

> ID：11726997
> 
> 赞同：0
> 
> 时间：2012-07-30T18:00:49.133
> 
> 标签：c#, wcf, windows-services

我有一个由 Windows 服务（使用 net.tcp 绑定）包装的 WCF dll，我想在 OnStart 期间加载服务中的全局数据，该数据可从 dll 中访问。这可能很简单，但我没有看到它。有什么建议么？

```
namespace MyApp
    {
        [ServiceContract]
        public interface IMyApp
        {   
            [OperationContract]
             bool Export(MyObj obj);  // omitted definition of myObj for brevity
        }

        [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
        class MyWCF : IMyApp
        {
            public bool Export(MyObj obj) 
            { 
            bool bResult;
                string sExportPath = GlobalObject.GetEnvironmentPath(obj.Env); //GlobalObject class is defined within this namespace

            bResult = RetrieveDocument(obj.ID, sExportPath);    
                return bResult;
            }
        }
    }

    ------------------------- windows service  ------------------------------
    using MyApp;

    namespace MyService
    {
        public partial class MyService: ServiceBase
        {
            internal static ServiceHost objServiceHost = null;

            public MyService()
            {
                InitializeComponent();
            }

            protected override void OnStart(string[] args)
            {
                if (objServiceHost != null)
                    objServiceHost.Close();

                bServiceStopped = false;
                objServiceHost = new ServiceHost(typeof(MyWCF));
                objServiceHost.Open();

                Trace.TraceInformation("Load globaldata");
                if (!GlobalObject.LoadGlobalData()))
                {
                    Log("Failure attempting to Load Global Data...");

                    var controller = new System.ServiceProcess.ServiceController("MyService");
                    controller.Stop();

                }
            }

        }

    } 
```