# StackOverflow 问答 11865000-11865999

# android - onActivityResult() 会重新开始我的活动吗？

> ID：11865001
> 
> 赞同：0
> 
> 时间：2012-08-08T12:56:04.720
> 
> 标签：android, android-asynctask, android-camera

在我的活动中，我正在使用 AsyncTask 设置所有视图，如 ImageView、TextViews 及其各自的数据。

后`asyncTask.Execute();`

我有一个`textView.onCLickListener`调用相机，在拍照后，活动中的 ImageView 设置为此图片。

但问题是在 onActivityResult(); 之后再次调用了我的 asyncTask；

这是我完整的活动代码：

```
public class UserProfileActivity extends Activity {

//many instance fiels here
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.user_profile);

        new LongOperation().execute("");

        userImage = (ImageView) findViewById(R.id.profileImage);
        userName = (TextView) findViewById(R.id.userName_profile);
        userLocation = (TextView) findViewById(R.id.userLocation_profile);
        editInfo = (TextView) findViewById(R.id.edit_profile);
        changeImage = (TextView) findViewById(R.id.changeImage_profile);
        userScore = (TextView) findViewById(R.id.userScore_profile);
        friendsLabel = (TextView) findViewById(R.id.userFriends_profile);

            changeImage.setOnClickListener(new View.OnClickListener() {

                public void onClick(View arg0) {
                    Intent cameraIntent = new Intent(
                            android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                    startActivityForResult(cameraIntent, CAMERA_REQUEST);
//Point 1
                }
            });
//Point 2
    }
    private class LongOperation extends AsyncTask<String, Void, String> {

        private InputStream is;
        private StringBuilder sb;
        private String result;
        private ProgressDialog dialog = new ProgressDialog(context);

        @Override
        protected String doInBackground(String... params) {

//Point 3
            try {
                HttpResponse response;

                    HttpPost httppost = new HttpPost(
                            "http://www.xxxxx.com/yyyy/zzzz");
                    //httpclient is global to maintain sessions
                    response = SignUpActivity.httpclient.execute(httppost);
                    HttpEntity entity = response.getEntity();
                    is = entity.getContent();

                try {
                    BufferedReader reader = new BufferedReader(
                            new InputStreamReader(is, "iso-8859-1"), 8);
                    sb = new StringBuilder();
                    sb.append(reader.readLine() + "\n");
                    String line = "0";
                    while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                    }
                    is.close();
                    result = sb.toString();
                } catch (Exception e) {
                    Log.e("error in reading input stream", e.toString());
                }
                try {
                    JSONObject jObj = new JSONObject(result);
                    String status = jObj.getString("status");
                    score = jObj.getInt("credits");
                    level = jObj.getInt("level");
                    image = jObj.getString("image");
                    fname = jObj.getString("fname");
                    lname = jObj.getString("lname");
                    city = jObj.getString("city");
                    email = jObj.getString("email");
                    clickedUserId = jObj.getInt("user_id");

                    JSONArray friendsJsonArray = jObj.getJSONArray("friends");
                    size = friendsJsonArray.length();

                    ArrayList<String> friendsNames = new ArrayList<String>();
                    friendsIds = new int[size];
                    for (int i = 0; i < size; i++) {

                        friendsNames.add(friendsJsonArray.getJSONObject(i)
                                .getString("name"));
                        friendsIds[i] = friendsJsonArray.getJSONObject(i)
                                .getInt("user_id");
                    }
                    adapter = new ArrayAdapter<String>(context,
                            R.layout.simple_listview_item, friendsNames);
                } catch (Exception e) {

                    Log.d("error in creating json object", e.toString());
                }
            } catch (Exception e) {
//Point 5
                Log.e("error main try", "Error in http connection" + e.toString());
            }
            return "Executed";
        }
        @Override
        protected void onPostExecute(String result) {

            friendsList.setAdapter(adapter);
            userScore.setText(score + " points" + "   level " + level);
            userName.setText(fname + "  " + lname);
            userLocation.setText(city);
            changeImage.setText("Change image");
            editInfo.setText("Edit");
            friendsLabel.setText("Friends");
            Bitmap bitmap = null;
            try {
                bitmap = BitmapFactory
                        .decodeStream((InputStream) new URL(image).getContent());
                userImage.setImageBitmap(bitmap);
            } catch (MalformedURLException e1) {

                e1.printStackTrace();
                userImage.setImageResource(R.drawable.xxx);
            } catch (IOException e2) {

                e2.printStackTrace();
                userImage.setImageResource(R.drawable.xxx);
            }

            if (dialog.isShowing()) {
                dialog.dismiss();
            }
        }

        @Override
        protected void onPreExecute() {

            this.dialog.setMessage("Please wait");
            this.dialog.show();
        }

        @Override
        protected void onProgressUpdate(Void... values) {

        }
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        super.onActivityResult(requestCode, resultCode, data);

//Point 4
        if (resultCode == RESULT_OK) {
            if (data != null) {

                photo = (Bitmap) data.getExtras().get("data");
                userImage.setImageBitmap(photo);

            }else{

                Intent intent = new Intent(UserProfileActivity.this,
                        UserProfileActivity.class);
                startActivity(intent);
            }
        } else {

            Intent intent = new Intent(UserProfileActivity.this,
                    UserProfileActivity.class);
            startActivity(intent);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:01:56.283

看起来您正在通过创建新意图并在 startActivityForResult 逻辑中启动活动来重新创建活动（代码的底部）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-17T06:43:17.353

它是内存泄漏的问题。尝试使用

```
BitmapFactory.Options bmOptions = new BitmapFactory.Options();
bmOptions.inSampleSize = 8; 
```

由于从相机拍摄的图像会产生巨大的位图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:03:11.710

收到图片后，您将再次开始活动。这就是调用 onCreate 并再次执行 AsyncTask 的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T11:19:13.107

相机活动旨在在后台运行。

因此使用意图调用相机

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(cameraIntent, CAMERA_REQUEST); 
```

将调用 doInBackground(String... params)

# apache-pig - Pig中的嵌套分组

> ID：11865003
> 
> 赞同：0
> 
> 时间：2012-08-08T12:56:10.637
> 
> 标签：apache-pig

我有这个数据结构

```
data: {mid: bytearray,country_code: bytearray,cnt: long}

4679201,RUS,1
4679201,GB,1
4679201,US,1
4681046,GB,2
4681046,TR,1
4681046,FR,1 
```

我需要遍历每个“中间”值并将其相应的数据存储在“csv”文件中。

```
STORE mid_data INTO '/mypath/4681046'; 
```

输出文件如下所示：

```
GB,2
TR,1
FR,1 
```

看起来已经有一个函数（org.apache.pig.piggybank.storage.MultiStorage）可以做到这一点，除了我不希望我的密钥（mid）成为输出的一部分。

谢谢

萨德克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:42:59.097

要在输出文件中仅存储最后 2 列，请使用 FOREACH。

前任：

```
view = FOREACH mid_data GENERATE country_code, cnt;
STORE view INTO '/yourpath/3452345'; 
```

# symfony - 教义加入错误“未定义的索引：ObjectHydrator.php 中的产品”（Symfony2）

> ID：11865004
> 
> 赞同：5
> 
> 时间：2012-08-08T12:56:11.383
> 
> 标签：symfony, doctrine-orm, repository

我正在尝试学习 Symfony2，目前在“本书”的“8：实体关系/关联（加入相关记录）”。只是与示例一起编码（三次检查我的代码），但后来我收到了这个错误：

> 注意：未定义索引：产品在 C:\My\Path\vendor\doctrine\lib\Doctrine\ORM\Internal\Hydration\ObjectHydrator.php 第 95 行

这是我的代码：

```
//src\Acme\StoreBundle\Repository\ProductRepository.php
public function findOneByIdJoinedToCategory($id)
{
    $query = $this->getEntityManager()
        ->createQuery('SELECT p, c 
            FROM AcmeStoreBundle:Product p 
            JOIN p.category c 
            WHERE p.id = :id')
        ->setParameter('id', $id);

    try {
        return $query->getSingleResult();
    } catch (\Doctrine\ORM\NoResultException $e) {
        return null;
    }
}

//src\Acme\StoreBundle\Controller\DefaultController.php
public function showAction($id)
{
    $product = $this->getDoctrine()
        ->getRepository('AcmeStoreBundle:Product')
        ->findOneByIdJoinedToCategory($id);

    if (!$product) {
        throw $this->createNotFoundException('No product found for id: '.$id);
    }

    $category = $product->getCategory();

    return $this->render('AcmeStoreBundle:Default:product.html.twig', array(
        'product' => $product,
        'category' => $category)
    );
} 
```

如果我使用这段代码，一切都会像它应该的那样工作：

```
//src\Acme\StoreBundle\Controller\DefaultController.php
public function showAction($id)
{
    $product = $this->getDoctrine()
        ->getRepository('AcmeStoreBundle:Product')
        ->find($id);

    if (!$product) {
        throw $this->createNotFoundException('No product found for id: '.$id);
    }

    $category = $product->getCategory();

    return $this->render('AcmeStoreBundle:Default:product.html.twig', array(
        'product' => $product,
        'category' => $category)
    );
} 
```

有任何想法吗？

编辑：产品实体：

```
<?php
namespace Acme\StoreBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

class Product
{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @ORM\Column(type="string", length=100)
 */
protected $name;

/**
 * @ORM\Column(type="decimal", scale=2)
 */
protected $price;

/**
 * @ORM\Column(type="text")
 */
protected $description;

/**
 * @ORM\Column(type="text", nullable="true")
 */
protected $extras;

/**
 * @ORM\ManyToOne(targetEntity="Category", inversedBy="product")
 * @ORM\JoinColumn(name="category_id", referencedColumnName="id")
 */
protected $category;

/**
 * Get id
 *
 * @return integer 
 */
public function getId()
{
    return $this->id;
}

/**
 * Set name
 *
 * @param string $name
 */
public function setName($name)
{
    $this->name = $name;
}

/**
 * Get name
 *
 * @return string 
 */
public function getName()
{
    return $this->name;
}

/**
 * Set price
 *
 * @param decimal $price
 */
public function setPrice($price)
{
    $this->price = $price;
}

/**
 * Get price
 *
 * @return decimal 
 */
public function getPrice()
{
    return $this->price;
}

/**
 * Set description
 *
 * @param text $description
 */
public function setDescription($description)
{
    $this->description = $description;
}

/**
 * Get description
 *
 * @return text 
 */
public function getDescription()
{
    return $this->description;
}

/**
 * Set extras
 *
 * @param text $extras
 */
public function setExtras($extras)
{
    $this->extras = $extras;
}

/**
 * Get extras
 *
 * @return text 
 */
public function getExtras()
{
    return $this->extras;
}

/**
 * Set category
 *
 * @param Acme\StoreBundle\Entity\Category $category
 */
public function setCategory(\Acme\StoreBundle\Entity\Category $category)
{
    $this->category = $category;
}

/**
 * Get category
 *
 * @return Acme\StoreBundle\Entity\Category 
 */
public function getCategory()
{
    return $this->category;
}
} 
```

类别实体：

```
<?php

namespace Acme\StoreBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * Acme\StoreBundle\Entity\Category
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class Category
{
/**
 * @var integer $id
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var string $name
 *
 * @ORM\Column(name="name", type="string", length=255)
 */
private $name;

/**
 * @ORM\OneToMany(targetEntity="Product", mappedBy="category")
 */
protected $products;

public function __construct()
{
    $this->products = new ArrayCollection();
}

/**
 * Get id
 *
 * @return integer 
 */
public function getId()
{
    return $this->id;
}

/**
 * Set name
 *
 * @param string $name
 */
public function setName($name)
{
    $this->name = $name;
}

/**
 * Get name
 *
 * @return string 
 */
public function getName()
{
    return $this->name;
}

/**
 * Add products
 *
 * @param Acme\StoreBundle\Entity\Product $products
 */
public function addProduct(\Acme\StoreBundle\Entity\Product $products)
{
    $this->products[] = $products;
}

/**
 * Get products
 *
 * @return Doctrine\Common\Collections\Collection 
 */
public function getProducts()
{
    return $this->products;
}
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-08T13:54:16.810

好的。您的问题是您在 Product 实体中说类别关系被“产品”反转，它应该是“产品”。只需将其更改为

```
/**
 * @ORM\ManyToOne(targetEntity="Category", inversedBy="products")
 * @ORM\JoinColumn(name="category_id", referencedColumnName="id")
 */
protected $category; 
```

它应该可以工作

# zen-cart - 在 zen 购物车模板中添加主页横幅

> ID：11865006
> 
> 赞同：0
> 
> 时间：2012-08-08T12:56:14.837
> 
> 标签：zen-cart

我已经创建了我的自定义模板。现在我想在主页中添加一个横幅。为此，我加入了 html_header.php 中的代码，并且我想添加 java 脚本文件并将其链接到该文件。我按照说明将文件添加到自定义模板的 jScript 文件夹中。现在我将我的 css 文件添加到 css 文件夹，但我无法找到链接这些文件的位置。

我在 jscript 文件夹中添加了 js 文件和文件夹的路径

CustomTemplate-jscript-（所有相关的js文件）。但是现在我无法提供 js 文件的链接，或者这些文件是自动链接的，如果是，那么我没有得到结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:07:21.530

如果 js 文件的名称以“jscript_”开头（例如 jscript_myscript.js），则 js 文件会在每个页面中自动链接。 css 文件的名称必须以“style”开头（例如 stylemystyle.css）

# playframework - 如何通过 play2 的演变来管理 heroku 上的数据库模式？

> ID：11865014
> 
> 赞同：0
> 
> 时间：2012-08-08T12:56:42.647
> 
> 标签：playframework, playframework-2.0

有没有办法通过heroku上的进化来管理数据库模式？从play2中，进化的命令行界面被移除了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:47:16.563

Play 2 目前没有用于运行演变的 CLI。您可以自动运行演进，也可以手动应用 SQL。

# php - PHP 中的“输出缓冲”以增加页面加载时间

> ID：11865024
> 
> 赞同：3
> 
> 时间：2012-08-08T12:57:31.460
> 
> 标签：php, outputstream, output-buffering

例如让 take ob 没有打开。每次 php 引擎面对 echo 时，它都会将那个东西返回给浏览器，对吗？所以我在考虑 ob 是收集所有数据而不是一次发送到浏览器将导致加载时间积极。但是，如果我错了，您能否解释一下 PHP 中真正的（“幕后站立”）含义以及您将在哪里使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:01:08.757

如果您的 PHP 脚本执行得很快，它不会产生明显的差异。如果您的 PHP 脚本执行缓慢，但输出很短（小的 HTML 文件），则没有什么区别。

唯一会产生影响的方法是脚本执行很长时间（例如从查询中返回大量数据）并且输出 HTML 太大以至于它对用户产生明显的影响以便发送在较小的片段中，因为输出大于它们的带宽。

基本上，它是一个执行速度很快的小文件，因为用户只从服务器下载少量数据，所以它是不可见的。如果代码需要很长时间执行但返回少量 HTML，用户仍然需要等待代码执行完成才能从服务器获取输出。如果代码需要很长时间执行并且输出太大以至于服务器可以将其发送给用户的速度比他们能够下载它的速度更快（服务器带宽超过用户带宽），那么将有一个可测量的差异该网站的用户 - 但只有那时。

# eclipse - 为 Eclipse 安装检查样式插件时出错

> ID：11865025
> 
> 赞同：9
> 
> 时间：2012-08-08T12:57:31.933
> 
> 标签：eclipse, checkstyle, sevntu-checkstyle

通过更新管理器为我的 eclipuse 安装 checkstyle 插件时出现以下错误

> 无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：EclipseCS SevNTU 插件功能 1.5.0 (com.github.sevntu.checkstyle.checks.feature.feature.group 1.5.0) 缺少要求：Sevntu eclipse-cs Extension Plugin 1.5.0 (com.github.sevntu. checkstyle.checks 1.5.0) 需要 'bundle net.sf.eclipsecs.core 0.0.0' 但找不到无法满足依赖关系：来自：EclipseCS SevNTU 插件功能 1.5.0 (com.github.sevntu.checkstyle.checks .feature.feature.group 1.5.0) 至：com.github.sevntu.checkstyle.checks [1.5.0]

我正在使用以下更新站点。

> [http://eclipse-cs.sf.net/update/](http://eclipse-cs.sf.net/update/)

我对此进行了很多搜索，但找不到合适的解决方案。请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-08T13:01:12.967

当你尝试安装被`Contact all update sites during install to find required software`检查？如果不是，它应该是：

![在此处输入图像描述](../Images/e9012d68fae997a1cebaab58ff2737b0.png)

**预期结果**

在 OP 的帖子中使用更新站点时，预期结果如下： ![在此处输入图像描述](../Images/95e96ab1b67c67f9b472907f645b91f7.png)

### 离线安装

从**[这个](http://eclipse-cs.sourceforge.net/downloads.html)**页面：

> 或者，可以从 Eclipse Checkstyle 插件的 SourceForge 下载站点下载 Checkstyle Eclipse 插件。下载包含一个存档更新站点（文件名 net.sf.eclipsecs-xxxbuildstamp-updatesite.zip），包含插件的所有必需和可选部分。
> 
> 该插件可以通过以下方式从存档的更新站点安装：
> 
> ```
> 1\. Via Eclipse's P2 Installation Manager similar as described above, pointing to the archive file instead
> 2\. Extracted into Eclipse's dropins folder. 
> ```

因此，步骤如下：

1.  **[从这里](http://sourceforge.net/projects/eclipse-cs/files/Eclipse%20Checkstyle%20Plug-in/5.5.0/)**下载上面提到的文件

2.  将下载的文件添加为“存档下载站点”，如下所示：

![在此处输入图像描述](../Images/79dfbe3a0065872a236d88e3c9ac9430.png)

3.  之后，您应该得到以下信息：

![在此处输入图像描述](../Images/84a7b4a5fe7d0c608026295f4bb078ca.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-10T06:51:36.833

我认为 Ashutosh 的回答应该有效，或者另一种选择是从 [http://sourceforge.net/projects/eclipse-cs/files/Eclipse%20Checkstyle%20Plug-in/5.5.0/](http://sourceforge.net/projects/eclipse-cs/files/Eclipse%20Checkstyle%20Plug-in/5.5.0/)下载 zip 存档 并解压缩它到 Eclipse 插件文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-07T17:52:44.250

我认为这里需要注意的是插件的主页[http://eclipse-cs.sourceforge.net/](http://eclipse-cs.sourceforge.net/)提供[http://sevntu-checkstyle.github.com/sevntu.checkstyle/update-site/](http://sevntu-checkstyle.github.com/sevntu.checkstyle/update-site/)作为安装 URL，但确实如此不工作（是吗？）。但是在[http://eclipse-cs.sourceforge.net/downloads.html](http://eclipse-cs.sourceforge.net/downloads.html)上给出了一个不同的安装 URL [http://eclipse-cs.sf.net/update/](http://eclipse-cs.sf.net/update/)，结果证明它可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-19T10:39:22.877

## **日食火星 (4.5.1)**

### 安装

您可以从**Marketplace**安装 Checkstyle 插件。

1.  **帮助 > Eclipse 市场...**

    [![日食市场](../Images/26ee5a07807af0b7564e5f7f10428d23.png)](https://i.stack.imgur.com/WVFDG.png)

2.  键入`"checkstyle plug-in"`并点击`Enter`。

    您也可以只键入`checkstyle`，然后从列表中选择插件。

    点击**安装**。

    [![安装](../Images/1672bbc45333c2dbb617c9bd67ad9682.png)](https://i.stack.imgur.com/HgOpW.png)

### 用法

1.  **窗口 > 显示视图 > 其他...**

    [![显示视图](../Images/73d4b56749747d5be2f0191760860579.png)](https://i.stack.imgur.com/8AAac.png)

2.  键入`checkstyle`> 选择视图（`Ctrl`+ 单击）>**确定**

    [![检查样式视图](../Images/947cc0b4391735190b7a4db9446c5671.png)](https://i.stack.imgur.com/LZyei.png)

3.  右键单击您的项目 > **Checkstyle > 使用 Checkstyle 检查代码**

    [![校验码](../Images/ae9c1f50f4aa54361f205497585799ec.png)](https://i.stack.imgur.com/wo328.png)

    输出将显示在 checkstyle 视图（2 个选项卡）中。

    如果您列出了某个类型的所有违规（使用箭头/右键单击/双击），您可以使用“返回主视图”箭头返回：

    [![返回箭头](../Images/fe06cf49f88f30f6ca1a464fdd6403a4.png)](https://i.stack.imgur.com/0H70p.png)

# jquery - 使用 kendoui 的网格中的外键

> ID：11865031
> 
> 赞同：0
> 
> 时间：2012-08-08T12:57:53.823
> 
> 标签：jquery, asp.net-mvc-3, kendo-ui

所以在我看来我有这个

```
<div id="grid"></div>

<script>
    $(document).ready(function () {
        dataSource = new kendo.data.DataSource({
            transport: {
                read: {
                    url: '@Url.Action("GetCityList", "City")',
                    dataType: "json",
                    type: "GET",
                    contentType: "application/json; charset=utf-8"
                },
                create: {
                url: '@Url.Action("create", "City")',
                type: "Post"
            },
                parameterMap: function (data, operation) {
                    if (operation != "read") {
                        var result = {};

                        for (var i = 0; i < data.models.length; i++) {
                            var ciudad = data.models[i];

                            for (var member in ciudad) {
                                result["ciudades[" + i + "]." + member] =                        ciudad[member];
                            }
                        }
                        return result;
                    }
                }

            },
            batch: true,
            pageSize: 30,
            schema: {
                model: {
                    id: "id",
                    fields: {
                        id: { editable: false, nullable: true },
                        descripcion: { validation: { required: true} },
                        DepartamentName: { field: "DepartamentName" },
                    }
                }
            }
        });

        $("#grid").kendoGrid({
            dataSource: dataSource,
            navigatable: true,
            pageable: true,
            height: 400,
            toolbar: ["create", "save", "cancel"],
            columns: [
                "descripcion",
            { field: "DepartamentName", title: "Name Departament", editor: categoryDropDownEditor, width: 150 }, 
                { command: "destroy", title: "&nbsp;", width: 110}],
            editable: true
        });
    });

</script>

<script>

    function categoryDropDownEditor(container, options) {

        $('<input data-text-field="name" data-value-field="name"  data-bind="value:' + options.field + '"/>')
                        .appendTo(container)
                        .kendoDropDownList({
                            autoBind: false,
                            dataSource: {
                                type: "json",
                                transport: {
                                    read: {
                                        url: '@Url.Action("GetDepartament", "city")
                                            }
                                }
                            }
                        });
    }
            </script> 
```

它告诉我没问题，但我的问题是，当它击中我的操作时，它会给我部门的名称而不是 id

当我改变我的功能这部分到这个

```
 $('<input data-text-field="name" data-value-field="name"  data-bind="value:' + options.field + '"/>')

 $('<input data-text-field="name" data-value-field="id"  data-bind="value:' + options.field + '"/>') 
```

有了它，我的动作很好，我得到了 id，但是在我的网格中，当我在下拉列表中选择网格中的一个部门时，它显示了我的 id（所以不是我想要的行为）

我该怎么做才能让它发挥作用？我猜它在绑定部分..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:46:54.383

前段时间我遇到了同样的问题。我的解决方案有点棘手。这个想法是使用“id|name”格式。我为该字段设置模板：

```
template: '#= (fldName).substring((fldName).indexOf("|", 0) + 1) #'; 
```

我设置了编辑器：

```
function(container, options) {
        $('<input id="autoComplete" data-bind="value:' + options.field + '"/>')
            .appendTo(container)                                    
            .kendoComboBox({
                dataTextField: "name",
                dataValueField: "id",
                minLength: 1,
                template: '#= (id).substring((id).indexOf("|", 0) + 1) #',
                filter: "contains",
                delay: 0,
                dataSource: new kendo.data.DataSource({
                    type: "json",
                    transport: {
                        read: {
                            url: "services/SearchContent",
                            type: "GET"
                        },
                        parameterMap: function (opt, operation) {
                            var val;
                            if(opt.filter) {
                                val = opt.filter.filters[0].value;
                            } else {                                                        
                                val = options.model[$("#autoComplete").data("bind").substring(6)];
                                val = (val).substring((val).indexOf("|", 0) + 1);
                            }
                            if(val == "") val = "a";
                            return {
                                searchString: val,
                                resultsCount: 10,
                                date: (new Date()).valueOf()
                            };
                        }
                    },
                    schema: {
                        data: "results",
                        type: "json"
                    },
                    serverFiltering: true
                })
            }); 
```

我的服务还通过用户输入动态过滤结果，但我认为您可以理解我的想法。当然，为了完成这项工作，您的网格服务外壳会为此列返回“id|name”格式，而不仅仅是“name”。

# xslt - XSLT/XPATH 新手，我正试图克服障碍

> ID：11865033
> 
> 赞同：1
> 
> 时间：2012-08-08T12:58:01.680
> 
> 标签：xslt, xpath

这应该很简单，我读到的所有内容都说 select = "name" 应该在 xml 文档中选择所有具有 "name" 的节点。所以我试图做一个简单的例子。这是 XML ：（它是一个简单的清单应用程序）。

```
<?xml version="1.0"?>
<inventory type="inventory">
<item type="zone" CanAdd="true">
    <title>Building</title>
    <item type="porch" CanAdd="true">
        <title>Porch</title>
    </item>
    <item type="receptionRoom" CanAdd="true">
        <title>Reception Room</title>
        <item type="doorInfo" CanAdd="true">
            <title>Door</title>
            <item type="doorStyleType" select="multi">
                <title>Door Style</title>
                <item>
                    <title>Internal</title>
                </item>
                <item>
                    <title>Plain</title>
                </item>
            </item>
            <item type="doorWinMaterialType" select="single">
                <title>Door Material</title>
                <item type="softwoodColours" select="single">
                    <title>Softwood - Stained</title>
                    <item>
                        <title>Stained Pine</title>
                    </item>
                </item>
            </item>
            <item type="doorwinFurnitureType" select="multi">
                <title>Door Furniture</title>
                <item>
                    <title>Door Handle</title>
                </item>
                <item>
                    <title>LetterBox Opening</title>
                </item>
            </item>
        </item>
    </item>
</item>
<propertyName><![CDATA[2 Street, Village]]></propertyName>
<propertyRef><![CDATA[15p9]]></propertyRef>
</inventory> 
```

.. 我需要开始用 XSLT 处理它。（在页面后面的 C# 代码中 - 该位起作用并将结果抛出到弹出窗口中。）

我正在使用的 XSLT 是：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
xmlns:xs="http://www.w3.org/2001/XMLSchema"
            >
<xsl:output method="xml" indent="yes"/>
<xsl:template match="/">
    <div>
            <h2>My Inventory</h2>
            <table border="1">
                <tr>
                    <td>
                    <xsl:value-of select="inventory/propertyName" />
                    </td>
                </tr>
            <xsl:for-each select ="item">
                <tr>
                    <td>
                        <xsl:value-of select="."/>
                    </td>  
                </tr>
            </xsl:for-each>
            </table>
        <p>Hello world</p>
   </div>
</xsl:template>
</xsl:stylsheet> 
```

在 for-each 循环中找不到“item”节点，我想我已经遇到了心理障碍。我敢肯定，当您知道答案时，答案非常简单，但是目前我还没有并且需要先解决这个问题，然后才能继续说。输出是：（在浏览器中）..

```
My Inventory
2 Street, Village 
(I expect a list of the "item" node values here in table rows..)
Hello world 
```

非常感谢，布雷特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:05:13.083

`item`您为循环指定的 XPath`<xsl:for-each>`是相对于当前节点进行评估的，即相对于文档根。为了选择`<item>`文档中任何嵌套深度的任何元素，您必须使用

```
//item 
```

但是，我认为您想要一些稍微不同的东西，因为`<item>`元素本身的文本就是它们`<title>`的文本以及任何嵌套`<item>`元素的文本。您可能正在寻找：

```
//item/title 
```

直接回应你的句子

> 我读到的所有内容都说 select = "name" 应该在 xml 文档中选择所有带有 "name" 的节点

这是不正确的。`select="name"`选择当前节点的子节点列表中名为“name”的所有元素，而不是 Xml 文档中的任何位置。

# sql - 限制在多个表上加入的内容

> ID：11865038
> 
> 赞同：0
> 
> 时间：2012-08-08T12:58:17.397
> 
> 标签：sql, sqlite

我想使用 SQLite 在多对多关系（tag-tags-post）上计算表的子集。我没有运气尝试了以下SQL：

```
SELECT tag.*, count(post.id)
FROM tag 
JOIN tags 
   ON tag.id = tags.tag_id 
JOIN post 
   ON post.id = tags.post_id 
   AND datetime(post.published) < datetime('2012-08-08 12:42:41.696451') 
GROUP BY tag.id, tag.name, tag.description, tag.slug 
ORDER BY tag.name 
```

我曾尝试将条件移至`WHERE`子句，但这并没有改变。如果没有条件，结果将按预期显示。

**编辑 1**

只是不清楚，通过删除`AND`条件，我得到了结果，尽管所有行都符合`post`预期。此外，以下查询

```
SELECT count(post.id) 
FROM post 
WHERE datetime(post.published) < datetime('2012-08-08 12:42:41.696451') 
```

提供正确的结果。

**编辑 2**

标签表中存在数据输入错误。查询现在工作正常。向大家道歉。投票删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:15:21.413

你有没有试过这个：

```
SELECT tag.id, tag.name, tag.description, tag.slug, count(post.id)
FROM tag JOIN
     tags 
     ON tag.id = tags.tag_id JOIN
     post 
     ON post.id = tags.post_id AND
        datetime(post.published) < datetime('2012-08-08 12:42:41.696451') 
GROUP BY tag.id, tag.name, tag.description, tag.slug
ORDER BY tag.name 
```

如果 tag 在 group by 中包含除四列之外的任何列，则原始 SQL 将生成错误。但是，要获得您想要的，您可能需要：COUNT(DISTINCT post.id)。

通过右外连接而不是连接来检查原始连接是否正常工作：

```
SELECT tag.id, tag.name, tag.description, tag.slug, count(post.id)
FROM tag right outer JOIN
     tags 
     ON tag.id = tags.tag_id right outer JOIN
     post 
     ON post.id = tags.post_id AND
        datetime(post.published) < datetime('2012-08-08 12:42:41.696451') 
GROUP BY tag.id, tag.name, tag.description, tag.slug
ORDER BY tag.name 
```

如果您得到前四列为 NULL 的行，那么您的 id 在表之间不匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T13:16:38.243

您的日期是否过于精确？

即：这行得通吗

```
SELECT tag.*, count(post.id) 
FROM tag  
JOIN tags  
   ON tag.id = tags.tag_id  
JOIN post  
   ON post.id = tags.post_id  
   AND datetime(post.published) < datetime('2012-08-08 12:42:41')  
GROUP BY tag.id, tag.name, tag.description, tag.slug  
ORDER BY tag.name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T14:23:54.577

可能选角有问题。我不确定是否需要演员表`DATETIME`。

尝试将内部连接替换为左连接，如果没有帖子符合条件，这将至少显示所有计数为 0 的标签：

```
SELECT tag.*, COUNT(DISTINCT post.id)
FROM tag 
  LEFT JOIN tags 
    ON  tag.id = tags.tag_id 
  LEFT JOIN post 
    ON  post.id = tags.post_id 
    AND post.published < '2012-08-08 12:42:41.696451' 
GROUP BY tag.id, tag.name, tag.description, tag.slug 
ORDER BY tag.name ; 
```

也可以尝试将时间缩短为毫秒： `'2012-08-08 12:42:41.696'`或秒： `'2012-08-08 12:42:41'`

# javascript - 如何用画布创建方格背景

> ID：11865041
> 
> 赞同：1
> 
> 时间：2012-08-08T12:58:28.660
> 
> 标签：javascript, canvas, background

我无法制作方格画布背景。屏幕目前显示充满整个屏幕的纯色。这个颜色就是两个循环`else`下语句中的fillStyle。`for`我使用模数运算符错了吗？或者是别的什么？

```
function createBackground(){
        if(!Modernizr.canvas) return;

        var canvas = document.createElement('canvas'),
            context = canvas.getContext('2d'),
            background = $('#game .background')[0],
            rect = background.getBoundingClientRect(), //returns the dimension of background
            gradient,
            monsterSize = monstr.settings.monsterSize;

        canvas.width = rect.width;
        canvas.height = rect.height;
        context.scale(rect.width, rect.height);

        /* create checker */
        cols = canvas.width / monsterSize;
        rows = canvas.height / monsterSize;

        console.log(cols); //8
        console.log(rows); //12
        console.log(monsterSize); //40
        for (var i=0; i<cols; i++){
            for (var j=0; j<rows; j++){
                if((i+j)% 2){ /* for every other block */
                    context.fillStyle = '#262626';
                    context.fillRect(i*monsterSize, j*monsterSize, monsterSize, monsterSize);
                } else {
                    context.fillStyle = '#E8E8E8';
                    context.fillRect(i*monsterSize, j*monsterSize, monsterSize, monsterSize);
                }
            };
        };

        /* add canvas to html element */
        background.appendChild(canvas); 
    }** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:20:30.303

您将画布缩放错误，使棋盘上的每个图块都变得如此之大，以至于您只能在屏幕上看到一个图块。

注释掉这一行：

```
context.scale(rect.width, rect.height); 
```

或者尝试用较小的数字（如`1`,`2`等）替换您传递的值，具体取决于您想要的缩放量 - 如果您甚至需要缩放。

见[演示](http://jsfiddle.net/Db7Jt/)。

# c# - WPF 中基于百分比的动态宽度

> ID：11865042
> 
> 赞同：8
> 
> 时间：2012-08-08T12:58:40.463
> 
> 标签：c#, wpf, dynamic, grid, width

也许你们可以帮我解决这个问题：我有一个字典和一个绑定到该字典的 ItemsControl。每个条目的 Key 决定了 ItemsControl 中每个 Item 的内容，而 Value 决定了每个 Item 的宽度。最大的问题是：宽度是一个百分比值，所以它告诉我，例如，我的 Item 的大小需要是其父项的 20%。

我怎样才能做到这一点？我知道网格能够使用基于星的宽度，但由于我必须在网格的开头定义 GridDefinition，因此我无法在 ItemsControl.ItemTemplate 中执行此操作。

当前代码：

```
<ItemsControl ItemsSource="{Binding Distribution}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"> 
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <Grid IsItemsHost="True" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel> 
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <!-- I NEED THIS TO BE A CERTAIN PERCENTAGE IN WIDTH -->
                <Label Content="{Binding Key.Text}" Foreground="{Binding Key.Color}"/> 
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

对此有什么想法吗？有什么优雅的方法可以解决这个问题吗？

谢谢！

*澄清*：百分比应该基于 ItemControls 父级！

*还有一个*：每个项目都应该是网格的一列，而不是一行。所以我需要所有项目在同一行中彼此相邻。

**解决方案**：

感谢您的帮助，这个问题可以通过使用 Multibinding 和 Binding 到 ItemsControl 的 ActualWidth 来解决。这样，每当 ItemsControl 的大小发生变化时，Items 也会发生变化。不需要网格。这个解决方案只创建一个相对宽度，但同样的解决方案当然可以应用于项目的高度。这是一个简短的版本，更全面的解释见下文：

*XAML*：

```
<ItemsControl ItemsSource="{Binding Distribution}" Name="itemsControl"  HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
         <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel IsItemsHost="True" Orientation="Horizontal" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel> 
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Label Content="{Binding Key.Text}" 
                       Foreground="{Binding Key.Color}">
                    <Label.Width>
                        <MultiBinding Converter="{StaticResource myConverter}">
                            <Binding Path="Value"/>
                            <Binding Path="ActualWidth" ElementName="itemsControl"/>
                        </MultiBinding>
                    </Label.Width>
                </Label>  
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

*转换器*：

```
class MyConverter : IMultiValueConverter
{
    public object Convert(object[] value, Type targetType, object parameter, CultureInfo culture)
    {
        //[1] contains the ItemsControl.ActualWidth we binded to, [0] the percentage
        //In this case, I assume the percentage is a double between 0 and 1
        return (double)value[1] * (double)value[0];
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

这应该可以解决问题！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T13:06:21.643

~~您可以实施`IValueConverter`~~.

**更新**。

`MultiBinding`会帮助你。这是示例：

1）xml：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication1"
        Title="MainWindow" Height="114" Width="404">
    <Grid>
        <Grid.Resources>
            <local:RelativeWidthConverter x:Key="RelativeWidthConverter"/>
        </Grid.Resources>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <ItemsControl ItemsSource="{Binding}"
                      x:Name="itemsControl">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Rectangle Fill="Green" Margin="5" Height="20" HorizontalAlignment="Left">
                        <Rectangle.Width>
                            <MultiBinding Converter="{StaticResource RelativeWidthConverter}">
                                <Binding Path="RelativeWidth"/>
                                <Binding Path="ActualWidth" ElementName="itemsControl"/>
                            </MultiBinding>
                        </Rectangle.Width>
                    </Rectangle> 
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Grid>
</Window> 
```

2）转换器：

```
public class RelativeWidthConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return ((Double)values[0] * (Double)values[1]) / 100.0;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

3）视图模型：

```
public class ViewModel : ViewModelBase
{
    public ViewModel()
    {
    }

    public Double RelativeWidth
    {
        get { return relativeWidth; }
        set
        {
            if (relativeWidth != value)
            {
                relativeWidth = value;
                OnPropertyChanged("RelativeWidth");
            }
        }
    }
    private Double relativeWidth;
} 
```

4）代码隐藏：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = new[] 
        { 
            new ViewModel { RelativeWidth = 20 },
            new ViewModel { RelativeWidth = 40 },
            new ViewModel { RelativeWidth = 60 },
            new ViewModel { RelativeWidth = 100 },
        };
    }
} 
```

`MultiBinding`更改时强制更新绑定目标`ActualWidth`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:03:59.977

您可以尝试`Grid`在`ItemTemplate`. 这`Grid`将有 2 列：1 列用于实际内容，1 列用于空白空间。您应该能够使用字典的 绑定这些列的宽度`Value`，可能借助`IValueConverter`.

如果内容需要居中，您需要创建 3 列，将第 0 列和第 2 列之间的空白区域分开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T02:04:55.677

我有一个无法使用网格的要求。

我创建了一个 ContentControl，它允许我包装内容以添加动态百分比宽度/高度。

```
/// <summary>
/// This control has a dynamic/percentage width/height
/// </summary>
public class FluentPanel : ContentControl, IValueConverter
{
    #region Dependencie Properties

    public static readonly DependencyProperty WidthPercentageProperty =
        DependencyProperty.Register("WidthPercentage", typeof(int), typeof(FluentPanel), new PropertyMetadata(-1, WidthPercentagePropertyChangedCallback));

    private static void WidthPercentagePropertyChangedCallback(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs dependencyPropertyChangedEventArgs)
    {
        ((FluentPanel)dependencyObject).OnWidthPercentageChange();
    }

    public int WidthPercentage
    {
        get { return (int)GetValue(WidthPercentageProperty); }
        set { SetValue(WidthPercentageProperty, value); }
    }

    public static readonly DependencyProperty HeightPercentageProperty =
        DependencyProperty.Register("HeightPercentage", typeof(int), typeof(FluentPanel), new PropertyMetadata(-1, HeightPercentagePropertyChangedCallback));

    private static void HeightPercentagePropertyChangedCallback(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs dependencyPropertyChangedEventArgs)
    {
        ((FluentPanel)dependencyObject).OnHeightPercentageChanged();
    }

    public int HeightPercentage
    {
        get { return (int)GetValue(HeightPercentageProperty); }
        set { SetValue(HeightPercentageProperty, value); }
    }

    #endregion

    #region Methods

    private void OnWidthPercentageChange()
    {
        if (WidthPercentage == -1)
        {
            ClearValue(WidthProperty);
        }
        else
        {
            SetBinding(WidthProperty, new Binding("ActualWidth") { Source = Parent, Converter = this, ConverterParameter = true });
        }
    }

    private void OnHeightPercentageChanged()
    {
        if (HeightPercentage == -1)
        {
            ClearValue(HeightProperty);
        }
        else
        {
            SetBinding(HeightProperty, new Binding("ActualHeight") { Source = Parent, Converter = this, ConverterParameter = false });
        }
    }

    #endregion

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if ((bool)parameter)
        {
            // width
            return (double)value * (WidthPercentage * .01);
        }
        else
        {
            // height
            return (double)value * (HeightPercentage * .01);
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

# django - MongoEngine - 否定查询运算符 - 替代 exclude()

> ID：11865043
> 
> 赞同：1
> 
> 时间：2012-08-08T12:58:46.690
> 
> 标签：django, mongodb, mongoengine, negation

我需要用否定进行查询。在 Django 中，我会使用`exclude()`但对于[MongoEngine 文档](http://mongoengine-odm.readthedocs.org/en/latest/apireference.html#mongoengine.queryset.QuerySet.exclude)排除意味着不同的东西。

是否有查询运算符或不同的函数来进行否定？

例子：

```
MyClass.objects.exclude(attribute="test") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-24T00:53:07.613

`not`您可以使用运算符前缀来否定其他运算符：

> `not`– 否定标准检查，可在其他运算符之前使用（例如`Q(age__not__mod=5)`）

（参见[MongoEngine 的文档](https://mongoengine-odm.readthedocs.org/en/latest/guide/querying.html?highlight=__not__)）。

这尤其适用于字符串查询，例如

`Post.objects(title__not__contains='Test')`

`exclude`过滤从数据库中检索到的文档的属性（请参阅[文档](https://mongoengine-odm.readthedocs.org/en/latest/guide/querying.html?highlight=exclude#retrieving-a-subset-of-fields)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T17:27:19.637

您可以像 ne 这样的否定运算符看到[http://mongoengine-odm.readthedocs.org/en/latest/guide/querying.html?highlight=ne](http://mongoengine-odm.readthedocs.org/en/latest/guide/querying.html?highlight=ne)

# jquery - jquery ajax中的跨域问题

> ID：11865046
> 
> 赞同：0
> 
> 时间：2012-08-08T12:58:55.493
> 
> 标签：jquery

我是跨域问题的新手，我已经开发了一个 UI 应用程序，我通过 Ajax 调用调用 Web**服务**. 如果我使用本地 IP **(http://192.168.1.71:8080/CNext)**运行该应用程序，但**“GET”**方法除外，我收到以下错误 **“访问被拒绝 JQuery.min.js”**。我的服务在其他机器上运行。我应该怎么做才能解决这个问题。我的 JQuery Ajax 代码如下。如何解决这个**跨域问题**

```
 $.ajax({
                url: securityGroupURL,
                data: JSON.stringify(testData),                    
                contentType: "application/json; charset=utf-8",

                type: "POST",
                dataType: "json",
                success: function(data) {                        
                    alert(data.SecurityGroupId);                            
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert("error :"+errorThrown);
                }
            });
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:38:02.650

确保您的 AJAX 请求中的域与页面的域和您的 javascript 文件相匹配。

# php - 生成随机的一次性 URL

> ID：11865053
> 
> 赞同：0
> 
> 时间：2012-08-08T12:59:19.937
> 
> 标签：php, security, url, random, hyperlink

我正在创建一个非常简单的应用程序，它允许（潜在员工的）推荐人上传他们自己的推荐信。以下是它的工作原理：

*   申请人提交参考电子邮件
*   参考收到一封自动生成的包含*唯一*URL 的电子邮件（出于安全原因）
*   参考跟随链接，回答安全问题（如果他希望多次访问该站点）
*   上传信

我被困在如何生成一个完全（好的，好的，准会做的）随机 URL 上。更重要的是：我如何确保点击链接会将引用指向正确的页面？每次发送随机 URL 时，我是否必须创建一个包含下拉框的新页面？

感谢您提供有关如何解决此问题的任何建议:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:14:24.720

我假设当你说你想生成一个随机 URL 时，你实际上是在要求生成一个随机字符串。这可能非常简单；这是一些伪代码：

```
for i = 1 to stringLength
    randomString[i] = floor(random() * 26) + 'a'
end 
```

换句话说，生成一个介于 0 到 25 之间的随机数，并将其添加到字符“a”的 ASCII 值中。这将生成一个随机的小写字母字符串，我认为这对于您的任务应该足够了。在 PHP 中，您将使用[rand](http://php.net/manual/en/function.rand.php)函数。建议使用[srand](http://www.php.net/manual/en/function.srand.php)函数为随机数生成器播种当前时间，就像给定链接末尾的示例一样。

至于第二部分；我建议您简化事情；与其生成带有随机 URL 的实际页面，不如简单地将随机字符串传递给查询字符串，例如：

www.mydomain.com/uploadReference.php?id=xxxxxxx

其中 xxxxxxx 是您的随机字符串。然后，您可以验证该字符串并使用 PHP 在数据库中查找它。就您的目的而言，这似乎是迄今为止最简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:06:15.280

您可以尝试使用从文件内容生成唯一式校验和的[哈希算法。](http://php.net/manual/en/function.hash.php)通常（例如使用[`md5()`](http://php.net/manual/en/function.md5.php)）原始内容中的一个字节更改会导致完全不同的哈希值。（*注意：* md5 有一些[碰撞漏洞](http://en.wikipedia.org/wiki/MD5#Collision_vulnerabilities)。）

如果您使用哈希的文件名存储上传的文件，您将能够在以后检索它，但对于更复杂的系统，应该建立一个数据库来建立随机 URL 和存储内容之间的关系.

如果您不想散列，下面的代码片段可能有助于生成随机 URL（但请确保如果 URL 已被使用，则可以防止意外覆盖）：

```
md5( sha1( time() + rand(0, time()) ) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:11:49.007

您还可以创建数字和字符的随机排列，以便

```
hash($previous) // is unique 
```

基本思想是“哈希”函数仅依赖于先前的值，从而创建一个新的唯一值。例如'0' -> '1', '1' -> '2', '9' -> 'a', 'z' -> '10', 'z0' -> '11'。这样的算法相对容易设计

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T13:06:48.087

您可以根据当前时间戳的某种形式的哈希或引用的唯一凭据（例如用户名或其他内容）创建唯一字符串。然后，您可以为 dropbox 创建一个页面，该页面将接受 URL 中的唯一字符串，以用于页面上的脚本，该脚本将检索数据库中该字符串映射的相关数据。

# sql - SQL 用 word 替换空的 SQL SELECT

> ID：11865057
> 
> 赞同：0
> 
> 时间：2012-08-08T12:59:37.647
> 
> 标签：sql, case

我正在尝试解决以下问题：

我想做一个选择，当结果为空时，它应该被替换为“空”，否则结果应该在那里。那是我的尝试：

```
select case (count*) 
       when 0 then 'empty'
       ELSE
       THEVALUEOFTHECOLUM
END AS RESULT

from Database.table where CarID = 12; 
```

感谢您的每一条评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:01:47.173

这应该可行，但您可能必须`COUNT(*)`根据使用的数据库将第二次出现的 VARCHAR 转换为：

```
SELECT
  CASE WHEN COUNT(*) = 0
    THEN 'empty'
    ELSE COUNT(*) -- CONVERT, TO_CHAR, ...
  END AS result
FROM Database.table where CarID = 12; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:46:53.080

是否可以使用一个查询对其进行编码？如果没有结果 -> 没有找到结果 else 显示所有结果，不仅仅是一个

```
declare @tmp table (id int) 
declare @cnt int 
insert into @tmp select col from table 
select @cnt = count(*) from @tmp 
if(@cnt = 0) 
begin     
select 'empty' 
end 
else 
begin     
select * from @tmp 
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:09:23.873

```
SELECT 
CASE
    WHEN Q.countvalue = 0 THEN 'Empty' 
    ELSE CONVERT(NVARCHAR(10), Q.countvalue) 
END AS RESULT
FROM 
    (
    SELECT COUNT(*) AS countvalue
    FROM   Database.table WHERE CarID = 12
    ) AS Q 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T13:11:58.633

这对我来说感觉很奇怪，但它会返回列数据。这不是一个查询，但它仍然是 setwise。

```
declare @tmp table (id int)
declare @cnt int
insert into @tmp select col from table
select @cnt = count(*) from @tmp
if(@cnt = 0)
begin
    select 'empty'
end
else
begin
    select * from @tmp
end 
```

# iphone - 为 iPhone 创建警报应用程序

> ID：11865060
> 
> 赞同：1
> 
> 时间：2012-08-08T13:00:00.443
> 
> 标签：iphone, objective-c, ios, alarm

我想在 iPhone 上创建一个独特的警报应用程序。但目前我能看到启动警报的唯一方法是让应用程序整夜运行，让它轮询当前时间。无论如何要让应用程序“唤醒”或在特定时间启动。我知道我可以使用[推送或本地通知](https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html)，但它们需要用户输入才能加载我的应用程序。考虑到这一点，我可以让我的应用程序通宵运行，但实际上什么都不做（如果不充电，可以节省电池），然后订阅警报本身的本地通知。

或者，我可以让 iPhone 在闹钟响起时运行我的应用程序，这样我就不必处理闹钟设置了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:05:39.647

不，您唯一的选择是使用本地或推送通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:11:01.240

我认为使用事件工具包框架在默认 iPhone 日历中添加事件。

# c# - Linq to XML C# 后代：如何读取同名的属性？

> ID：11865061
> 
> 赞同：1
> 
> 时间：2012-08-08T13:00:04.300
> 
> 标签：c#, xml, linq, linq-to-xml

我在网上搜索并找到了很多答案，但它们都适用于特定的课程或以另一种方式编写。

我有这个 XML 响应：

```
<return xsi:type="ns1:PlentySoapResponse_GetItemsBase">
        <ItemsBase xsi:type="ns1:ArrayOfPlentysoapobject_itembase">
           <item xsi:type="ns1:PlentySoapObject_ItemBase">
              <ItemID xsi:type="xsd:int">2</ItemID>
              <ItemNo xsi:type="xsd:string"/>
               ............. 
              <DeepLink xsi:type="xsd:string">/a-2/</DeepLink>
           </item>
           <item xsi:type="ns1:PlentySoapObject_ItemBase">
              <ItemID xsi:type="xsd:int">4</ItemID>
              <ItemNo xsi:type="xsd:string"/> 
```

我是这样读的：

```
XDocument loaded = XDocument.Parse(readString);
            for (int i = 0; i < 50; i++)
            {
            var items = from x in loaded.Descendants("return")
                                select new 
                                {
                                    ItemID = x.Descendants("ItemID").First().Value,
                                    Name = x.Descendants("Name").First().Value,
                                    EKnet = x.Descendants("PurchasePriceNet").First().Value
                                };

                foreach (var x in items)
                {
                    item[i, 0] = x.ItemID.ToString();
                    item[i, 1] = x.Name.ToString();
                    item[i, 2] = x.EKnet.ToString();
                }
            }
        else
        {
            MessageBox.Show("Wrong XML Call");
        }
        return item;
      } 
```

但我总是得到相同的项目属性。

有没有一种简单的方法来获取下一个项目属性？我读了一个带有“IEnumerable”的例子，但这总是使用一个特定的类，我不想使用它。

提前谢谢了。

编辑：

```
<SOAP-ENV:Body>
  <ns1:GetItemsBaseResponse>  
     <return xsi:type="ns1:PlentySoapResponse_GetItemsBase">
        <ItemsBase xsi:type="ns1:ArrayOfPlentysoapobject_itembase">
           <item xsi:type="ns1:PlentySoapObject_ItemBase">
              <ItemID xsi:type="xsd:int">2</ItemID>
              <ItemNo xsi:type="xsd:string"/>
              <ExternalItemID xsi:type="xsd:string"/>
              <EAN1 xsi:type="xsd:string">0023272005641</EAN1>
              <EAN2 xsi:type="xsd:string"/>
              <EAN3 xsi:type="xsd:string"/>
              <EAN4 xsi:type="xsd:string"/>
              <ISBN xsi:type="xsd:string"/>
              <ASIN xsi:type="xsd:string">B000NTAG66</ASIN>
              <Type xsi:type="xsd:int">0</Type>
              <Model xsi:type="xsd:string"/>
              <ProducerID xsi:type="xsd:int">0</ProducerID>
              <VATInternalID xsi:type="xsd:int">0</VATInternalID>
              <Marking1ID xsi:type="xsd:int">0</Marking1ID>
              <Marking2ID xsi:type="xsd:int">11</Marking2ID>
              <CustomsTariffNumber xsi:type="xsd:string"/>
              <FSK xsi:type="xsd:int">0</FSK>
              <Condition xsi:type="xsd:int">0</Condition>
              <Position xsi:type="xsd:string"/>
              <StorageLocation xsi:type="xsd:int">0</StorageLocation>
              <WebShopSpecial xsi:type="xsd:string">0</WebShopSpecial>
              <Published xsi:type="xsd:int">0</Published>
              <LastUpdate xsi:type="xsd:int">1344392167</LastUpdate>
              <ItemURL xsi:nil="true"/>
              <EbayEPID xsi:type="xsd:string"/>
              <ParcelServicePresetIDs xsi:type="ns1:ArrayOfPlentysoapobject_integer">
                 <item xsi:type="ns1:PlentySoapObject_Integer">
                    <intValue xsi:type="xsd:int">21</intValue>
                 </item>
              </ParcelServicePresetIDs>
              <ProducingCountryID xsi:type="xsd:int">1</ProducingCountryID>
              <FreeTextFields xsi:type="ns1:PlentySoapObject_ItemFreeTextFields">
                 <Free1 xsi:type="xsd:string"/>
                 <Free2 xsi:type="xsd:string"><![CDATA[http://games.shop.ebay.de/PC-Videospiele-/1249/i.html?LH_BIN=1&LH_ItemCondition=11&Plattform=Xbox%2520360&_trkparms=65%253A12%257C66%253A2%257C39%253A1%257C72%253A4674&rt=nc&_nkw=star+wars+force+unleashed&_catref=1&_dmpt=de_entertainment_games&_trksid=p3286.c0.m14&_sop=15&_sc=1]]></Free2>
                 <Free3 xsi:type="xsd:string"/>
                 <Free4 xsi:type="xsd:string">1</Free4>
                 <Free5 xsi:type="xsd:string">UK-Import: Spiel in Deutsch, Anleitung in Englisch</Free5>
                 <Free6 xsi:type="xsd:string">Actionspiele</Free6>
                 <Free7 xsi:type="xsd:string">XBOX 360</Free7>
                 <Free8 xsi:type="xsd:string">ages_12_and_over</Free8>
                 <Free9 xsi:type="xsd:string"/>
                 <Free10 xsi:type="xsd:string">1</Free10>
                 <Free11 xsi:type="xsd:string">0</Free11>
                 <Free12 xsi:nil="true"/>
                 <Free13 xsi:nil="true"/>
                 <Free14 xsi:nil="true"/>
                 <Free15 xsi:nil="true"/>
                 <Free16 xsi:nil="true"/>
                 <Free17 xsi:nil="true"/>
                 <Free18 xsi:nil="true"/>
                 <Free19 xsi:nil="true"/>
                 <Free20 xsi:nil="true"/>
              </FreeTextFields>
              <Texts xsi:type="ns1:PlentySoapObject_ItemTexts">
                 <Lang xsi:type="xsd:string">de</Lang>
                 <Name xsi:type="xsd:string">Star Wars: The Force Unleashed 1 - Xbox 360</Name>
                 <Name2 xsi:type="xsd:string"/>
                 <Name3 xsi:type="xsd:string"/>
                 <ShortDescription xsi:nil="true"/>
                 <LongDescription xsi:nil="true"/>
                 <TechnicalData xsi:nil="true"/>
                 <MetaDescription xsi:nil="true"/>
                 <Keywords xsi:type="xsd:string"/>
              </Texts>
              <PriceSet xsi:type="ns1:PlentySoapObject_ItemPriceSet">
                 <PriceID xsi:type="xsd:int">2</PriceID>
                 <Lot xsi:type="xsd:float">0</Lot>
                 <Unit xsi:type="xsd:string">C62</Unit>
                 <Unit1 xsi:type="xsd:string"/>
                 <Unit2 xsi:type="xsd:string"/>
                 <PackagingUnit xsi:type="xsd:string">1</PackagingUnit>
                 <Price xsi:type="xsd:float">20.99</Price>
                 <Price1 xsi:type="xsd:float">18.65</Price1>
                 <Price2 xsi:type="xsd:float">23.99</Price2>
                 <Price3 xsi:type="xsd:float">999</Price3>
                 <Price4 xsi:type="xsd:float">999</Price4>
                 <Price5 xsi:type="xsd:float">0</Price5>
                 <Price6 xsi:type="xsd:float">0</Price6>
                 <Price7 xsi:type="xsd:float">0</Price7>
                 <Price8 xsi:type="xsd:float">0</Price8>
                 <Price9 xsi:type="xsd:float">0</Price9>
                 <Price10 xsi:type="xsd:float">0</Price10>
                 <Price11 xsi:type="xsd:float">23.7</Price11>
                 <Price12 xsi:type="xsd:float">33.7</Price12>
                 <RRP xsi:type="xsd:float">0</RRP>
                 <VAT xsi:type="xsd:float">19</VAT>
                 <WeightInGramm xsi:type="xsd:int">0</WeightInGramm>
                 <WidthInMM xsi:type="xsd:int">0</WidthInMM>
                 <LengthInMM xsi:type="xsd:int">0</LengthInMM>
                 <HeightInMM xsi:type="xsd:int">0</HeightInMM>
                 <Position xsi:type="xsd:int">0</Position>
                 <ShowOnly xsi:type="xsd:int">0</ShowOnly>
                 <RebateLevelPrice6 xsi:type="xsd:int">0</RebateLevelPrice6>
                 <RebateLevelPrice7 xsi:type="xsd:int">0</RebateLevelPrice7>
                 <RebateLevelPrice8 xsi:type="xsd:int">0</RebateLevelPrice8>
                 <PurchasePriceNet xsi:type="xsd:float">14.38</PurchasePriceNet>
                 <Package xsi:type="xsd:int">0</Package>
                 <TypeOfPackage xsi:type="xsd:int">0</TypeOfPackage>
                 <UnitLoadDevice xsi:type="xsd:int">0</UnitLoadDevice>
              </PriceSet>
              <Stock xsi:type="ns1:PlentySoapObject_ItemStock">
                 <Limitation xsi:type="xsd:int">1</Limitation>
                 <MainWarehouseID xsi:type="xsd:int">2</MainWarehouseID>
                 <WebshopVisiblePositiveStock xsi:type="xsd:boolean">false</WebshopVisiblePositiveStock>
                 <WebshopInvisibleNoStock xsi:type="xsd:boolean">false</WebshopInvisibleNoStock>
                 <ChangeAvailablePositiveStock xsi:type="xsd:boolean">true</ChangeAvailablePositiveStock>
                 <ChangeNotAvailableNoStock xsi:type="xsd:boolean">true</ChangeNotAvailableNoStock>
                 <ChangeAvailablePositiveStockVariant xsi:type="xsd:boolean">false</ChangeAvailablePositiveStockVariant>
                 <ChangeNotAvailableNoStockVariant xsi:type="xsd:boolean">false</ChangeNotAvailableNoStockVariant>
                 <StorageLocation xsi:nil="true"/>
              </Stock>
              <Availability xsi:type="ns1:PlentySoapObject_ItemAvailability">
                 <AvailabilityID xsi:type="xsd:int">5</AvailabilityID>
                 <Webshop xsi:type="xsd:int">1</Webshop>
                 <WebAPI xsi:type="xsd:int">1</WebAPI>
                 <Inactive xsi:type="xsd:int">0</Inactive>
                 <AmazonFBA xsi:type="xsd:int">1</AmazonFBA>
                 <AmazonFEDAS xsi:type="xsd:string"/>
                 <AmazonProduct xsi:type="xsd:int">31</AmazonProduct>
                 <Gimahhot xsi:type="xsd:int">0</Gimahhot>
                 <GoogleBase xsi:type="xsd:int">0</GoogleBase>
                 <Hitmeister xsi:type="xsd:int">0</Hitmeister>
                 <MeinPaket xsi:type="xsd:int">0</MeinPaket>
                 <Mercateo xsi:type="xsd:int">0</Mercateo>
                 <Quelle xsi:type="xsd:int">0</Quelle>
                 <Moebelprofi xsi:type="xsd:int">0</Moebelprofi>
                 <Zalando xsi:type="xsd:int">0</Zalando>
                 <Restposten xsi:type="xsd:int">0</Restposten>
                 <Shopgate xsi:type="xsd:int">0</Shopgate>
                 <Shopperella xsi:type="xsd:int">0</Shopperella>
                 <ShopShare xsi:type="xsd:int">0</ShopShare>
                 <Tradoria xsi:type="xsd:int">0</Tradoria>
                 <TradoriaCategory xsi:type="xsd:int">0</TradoriaCategory>
                 <Yatego xsi:type="xsd:int">0</Yatego>
                 <AvailableUntil xsi:type="xsd:int">0</AvailableUntil>
                 <MaximumSalesOrderQuantity xsi:type="xsd:int">0</MaximumSalesOrderQuantity>
                 <Neckermann xsi:type="xsd:int">0</Neckermann>
              </Availability>
              <Others xsi:nil="true"/>
              <Categories xsi:nil="true"/>
              <AttributeValueSets xsi:nil="true"/>
              <ItemSuppliers xsi:nil="true"/>
              <ItemProperties xsi:nil="true"/>
              <ItemAttributeMarkup xsi:nil="true"/>
              <BundleType xsi:nil="true"/>
              <DeepLink xsi:type="xsd:string">/a-2/</DeepLink>
           </item> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:32:00.440

试试这个：

```
 XDocument loaded = XDocument.Parse(readString);
        var items = loaded
                    .Descendants("return")
                    .FirstOrDefault()
                    .Element("ItemsBase")
                    .Elements("item");
        int i = 0;
        foreach (var _item in items)
        {
            item[i, 0] = _item.Element("ItemID").Value;
            item[i, 1] = _item.Element("Texts").Element("Name").Value;
            item[i, 2] = _item.Element("PriceSet").Element("PurchasePriceNet").Value;
            i++;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:05:43.543

```
XDocument xdoc = XDocument.Parse(xml);
        var items = from ret in xdoc.Descendants("return")
                    from itb in ret.Descendants("ItemsBase")
                    from item in itb.Descendants("item")
                    select new {item};

        foreach (var item in items)
        {
            // do what you want with item,
        } 
```

# c# - 获取 Android 设备上已安装应用程序的列表 - C#

> ID：11865064
> 
> 赞同：1
> 
> 时间：2012-08-08T13:00:27.887
> 
> 标签：c#, android, xamarin.android

我正在使用 Mono for Android 在 C# 中开发应用程序。

我需要检索设备的已安装应用程序列表，但不知道从哪里开始。

谁能指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:10:37.557

这些可能是[这个](http://androidforums.com/application-development/132611-how-can-i-get-list-all-installed-apps.html)或[这个](http://androidstream.wordpress.com/2012/01/26/android-how-to-get-installed-applications-list-from-your-application/)甚至[这个](https://stackoverflow.com/questions/2695746/how-to-get-a-list-of-installed-android-applications-and-pick-one-to-run)- 这些是 java 的链接。

接下来要看的是如何从 mono- [that](https://stackoverflow.com/questions/7467469/monodroid-interop-betwen-java-and-c-sharp)调用那个 java-api 。

希望这是开始的好地方...

# python - 在 Python 3.0 中使用 Telnet 打印 Ascii 文本

> ID：11865065
> 
> 赞同：0
> 
> 时间：2012-08-08T13:00:38.120
> 
> 标签：python

因此，我无法实际打印发出“帮助”命令后看到的所有信息。我需要更改 skt.receive() 的长度吗？或者有没有办法简单地打印所有通过的数据？似乎必须有一种方法来解释您要打印的未知长度的数据？还是我以错误的方式处理这个问题。谢谢。

```
#!/usr/bin/python

host = '192.168.1.50'
port = 23
msg = "help\r"
msg2 = "y\r"

import socket
import sys
import time

try:
    skt = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
except socket.error, e:
    print("Error creating socket: %s" % e)
    sys.exit(1)

try:
    skt.connect((host,port))
except socket.gaierror, e:
    print("Address-related error connecting to server: %s" % e)
    sys.exit(1)
except socket.error, e:
    print("Error connecting to socket: %s" % e)
    time.sleep(15)
    skt.connect((host,port))
    sys.exit(1)

try:
    print(skt.send(msg))
    skt.send('help\r')
    print("SEND: %s" % msg) 
except socket.error, e:
    print("Error sending data: %s" % e)
    sys.exit(1)

while 1:
    try:
        buf = skt.recv(50000000000)
        if(len(buf)):
            print(buf)
            if 'AMX' in buf:
                print("Length buff")
                if 'AMX' in buf:
                    print(skt.send(msg))
                    #print("first wait")
                    #print("RECV: %s" % buf)
                    #time.sleep(9)
                    #print("second wait")
                    sys.exit(1)

    except socket.error, e:
        print("Error receiving data: %s" % e)
        sys.exit(1)
    if not len(buf):
        break
    sys.stdout.write(buf) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T13:08:22.683

您是否考虑过使用[telnetlib](http://docs.python.org/library/telnetlib.html "远程登录库")，而不是重新发明轮子？:)

例子：

```
import telnetlib

HOST = "192.168.1.50"

tn = telnetlib.Telnet(HOST)
tn.write("help\n")
print tn.read_all() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:19:05.210

因此 telnetlib def 使事情变得更容易并简化了流程。重新发明轮子没有意义。

# .net - OpenXML SDK 从 PowerPoint 幻灯片中删除图像

> ID：11865066
> 
> 赞同：1
> 
> 时间：2012-08-08T13:00:45.603
> 
> 标签：.net, vb.net, openxml-sdk

我正在使用 OpenXML SDK 操作 Power Point 幻灯片。幻灯片上有一张图片。我想要做的是，如果在服务器上找到特定图像，则将幻灯片图像替换为在服务器上找到的图像，否则完全删除图像。

我的替换工作正常，但是如果我尝试删除图像，我仍然会得到一个带有“无法显示此图像”的图像控件。

这是我正在做的删除图像的操作，注意 slidePart 是我正在操作的幻灯片：

```
'get the first image on the slide
Dim blip As Drawing.Blip = slidePart.Slide.Descendants(Of Drawing.Blip)().First()
blip.Remove()
slidePart.Slide.Save() 
```

谁能告诉我我做错了什么？任何建议将不胜感激，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:27:01.703

您想查找`Picture`与您的图像对应的元素并删除该元素。我倾向于按图像名称搜索以找到`Picture`元素，然后将其删除。这是我使用的代码的 C# 示例：

```
Picture imageToRemove = slidePart.Slide.Descendants<Picture>().SingleOrDefault(picture => picture.NonVisualPictureProperties.OuterXml.Contains(imageFileName));

if (imageToRemove != null)
{
    imageToRemove.Remove();
} 
```

# c# - Code First 使用已卸载的必需导航属性更新字段

> ID：11865069
> 
> 赞同：1
> 
> 时间：2012-08-08T13:00:53.907
> 
> 标签：c#, linq, entity-framework, ef-code-first, code-first

这似乎是 CodeFirst 的一个非常奇怪的行为，

我有一张桌子：

```
public string Name {get;set;}

[Required]
public virtual Table1 Table1 {get;set;}

[Required]
public virtual Table2 Table2 {get;set;}

[Required]
public virtual Table3 Table3 {get;set;} 
```

现在，如果我从数据库中得到这样的一行：

```
var row = database.Include("Table1").First();

row.name = "New name";
row.Table1.name = "New name";

database.SaveChanges(); 
```

它会抛出2个错误：

```
Table2 : The Table2 field is required.

Table3 : The Table3 field is required. 
```

问题是，为什么它会验证这 2 个未加载的未使用的引用？

我不希望加载整个实体，因为某些实体可以有很多引用，只更新 1 个字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:08:29.117

如果您使用`Required`属性标记任何内容，则在保存更改时它必须存在。EF 始终在保存期间验证整个实体，并且导航属性的处理方式与普通属性 => null = 异常相同。验证也不会按设计触发延迟加载。

您的选择是：

*   不使用`Required`属性
    *   您可以为每个导航属性添加不可为空的外键属性
    *   您可以使用 fluent-api 代替数据注释
*   关闭 EF 验证

# jquery - 带有滚动和拖动功能的 jquery 页面导航器

> ID：11865072
> 
> 赞同：0
> 
> 时间：2012-08-08T13:01:02.347
> 
> 标签：jquery

我用 jquery 创建了一个页面导航器。是带有纵横比 (1/10) 框的页面缩略图

**[演示](http://jsfiddle.net/gphp/Vmurd/1/)**

我可以拖动框#screen 并为窗口滚动设置动画，我可以滚动窗口并更新框位置。

我的问题是这两个动作的使用..当我拖动框..滚动发疯！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:44:12.590

滚动也发生在**#screen**框架上，因为它是绝对位置。如果你修复它，它会更好地工作：

```
#screen {
    border:1px solid red;
    position:fixed;
    cursor:pointer;
} 
```

此外，动画似乎不是一个好主意。如果您将其更改为正常滚动，它几乎可以工作。

```
$('html').scrollTop(currentPos.top).scrollLeft(currentPos.left); 
```

剩下的就是微调和玩弄边距。

# types - Arduino 串行对象数据类型，用于创建一个包含对端口的引用的变量

> ID：11865077
> 
> 赞同：8
> 
> 时间：2012-08-08T13:01:13.597
> 
> 标签：types, embedded, serial-port, arduino

我正在使用 ArduinoMega2560 开展一个项目。有多个串行端口可用，我想要一个变量来保存对其中一个的引用，如下所示：

```
SerialPort port;
if (something == somethingElse)
    port = Serial;
else
    port = Serial1;

byte b = 5;
port.write(b); 
```

但是，Arduino 文档要么有限，要么我没有找到我正在寻找的信息。我认为我需要它“Serial、Serial1 等的类型是什么？”。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-08T15:12:58.433

Serial 对象的基础 C++ 类型是`HardwareSerial`. 您可以在`<arduino path>\hardware\arduino\cores\arduino`. 然后，您可以使用如下代码使用指针：

```
HardwareSerial *port;
if (something == somethingElse)
    port = &Serial;
else
    port = &Serial1;

byte b = 5;
port->write(b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:24:25.230

我对Arduino一无所知，但在大多数微控制器上通常这样做的方式是直接指向外围设备的寄存器区域，在这种情况下是串行端口。假设您的 MCU 像这样映射这些寄存器：

```
// serial port 1
0x1234 SERIAL_CONTROL_REG
0x1235 SERIAL_DATA_REG
0x1236 SERIAL_STATUS_REG

// serial port 2
0x2000 SERIAL_CONTROL_REG
0x2001 SERIAL_DATA_REG
0x2002 SERIAL_STATUS_REG 
```

然后，您可以使用指针跟踪端口，如下所示：

```
#define SERIAL_PORT1 ((volatile uint8_t*)0x1234)
#define SERIAL_PORT2 ((volatile uint8_t*)0x2000)

typedef volatile uint8_t* serial_port_t;
...

serial_port_t port;

if (something == somethingElse)
    port = SERIAL_PORT1;
else
    port = SERIAL_PORT2; 
```

然后可以进一步扩展，以便您可以将寄存器用作变量，例如使用宏：

```
#define SERIAL_CONTROL_REG(offset) (*(offset + 0))
#define SERIAL_DATA_REG(offset)    (*(offset + 1))
#define SERIAL_STATUS_REG(offset)  (*(offset + 2))

if(SERIAL_STATUS_REG(port) & some_mask)
{
  SERIAL_DATA_REG(port) = 0xAA;
} 
```

这就是您通常为具有多个相同板载端口的 MCU 外设编写通用硬件驱动程序的方式。

# regex - 如何在 Emacs 中创建正则表达式来捕获双方括号之间的文本？

> ID：11865079
> 
> 赞同：3
> 
> 时间：2012-08-08T13:01:21.163
> 
> 标签：regex, emacs

我想在 Emacs 中创建一个正则表达式来捕获双方括号之间的文本。

我找到了这个正则表达式。它允许在方括号之间查找字符串，但它包括方括号：

```
"\\[\\[\\([^][]+\\)\\]\\(\\[\\([^][]+\\)\\]\\)?\\]" 
```

如何提取不包括方括号的双方括号之间的字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T14:15:36.683

此正则表达式将选择方括号，但通过使用组 1，您将只能获取内容：`"\\[\\[\\(.*\\)\\]\\]"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T13:03:34.683

你不能。Emacs 的正则表达式引擎不支持前瞻/后瞻断言。

作为一项工作，只需将您感兴趣的部分分组并访问子组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T16:44:03.763

要从字符串中提取数据，请使用`string-match`and `match-string`，如下所示：

```
(let ((my-string "[[some text][some more text]]")
      (my-regexp "\\[\\[\\([^][]+\\)\\]\\(\\[\\([^][]+\\)\\]\\)?\\]"))
  (and (string-match my-regexp my-string)
       (list (match-string 1 my-string) (match-string 3 my-string)))) 
```

评估为：

```
("some text" "some more text") 
```

要从缓冲区中提取数据，请使用`search-forward-regexp`字符串参数并将其拖放到`match-string`：

```
(and
 (search-forward-regexp "\\[\\[\\([^][]+\\)\\]\\(\\[\\([^][]+\\)\\]\\)?\\]" nil :no-error)
 (list (match-string 1) (match-string 3))) 
```

请注意，此移动指向匹配。

# sql - 将十进制值转换为日期 - Informix DB

> ID：11865083
> 
> 赞同：3
> 
> 时间：2012-08-08T13:01:33.110
> 
> 标签：sql, date, decimal, informix

我正在尝试在选择语句中将十进制值转换为日期

`SELECT user_id, extend(dbinfo("UTC_TO_DATETIME",min(creationdate)), year to fraction) AS earned_date FROM message`

但我收到了这个错误

```
 Value exceeds limit of INTEGER precision 
```

表中的字段定义是这样的

```
 creationDate      decimal(14,0) NOT NULL 
```

看来我没有使用正确的方式进行转换，知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T21:29:03.850

我认为您不需要`EXTEND`在这种情况下使用 -`EXTEND`用于更改 DATETIME 和 INTERVAL 值的比例。

`UTC_TO_DATETIME` [已经返回一个 DATETIME](http://publib.boulder.ibm.com/infocenter/idshelp/v115/index.jsp?topic=/com.ibm.sqls.doc/ids_sqs_1495.htm)值。

你有没有尝试过：

```
SELECT user_id, dbinfo("UTC_TO_DATETIME",min(creationdate)) AS earned_date
  FROM message 
```

那会产生什么？

**更新**

啊，一个例子让一切变得不同！

您传递的值不是`UTC_TO_DATETIME`预期的 UTC 日期时间。该函数需要一个表示秒的整数，而不是毫秒。就这么简单。

`DBINFO('UTC_TO_DATETIME', 1329994172574)`超过整数精度。

`DBINFO('UTC_TO_DATETIME', 1329994172574/1000)`另一方面，产生：

`2012-02-23 21:49:32`，我猜这是你所期望的？

如果您查看我之前提供的链接，它解释了小数秒的处理。（剧透：他们被忽略了。）

如果小数秒非常重要，我想你将不得不`EXTEND`将此函数的结果转换为小数秒，然后将 MOD(creationdate,1000)/1000 添加到它。

例如：

```
SELECT user_id, 
      (dbinfo("UTC_TO_DATETIME", MIN(creationdate)/1000 )::DATETIME YEAR TO FRACTION(3)
        + (MOD(MIN(creationdate),1000)/1000) UNITS FRACTION) AS earned_date
  FROM message 
```

（但就个人而言，无论如何我都倾向于**将此**逻辑放入 SPL 中，因此您可以这样称呼它： `SELECT user_id, millis_to_time(MIN(creationdate))...`并避免到处编写这种复杂的算法。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:45:58.287

像这样试试

```
select
    DT,
    DT_Date = convert(datetime,convert(varchar(8),left(dt,8)))
from
    (  -- Test data
    select DT = 19001231.000000
    ) a 
```

在这里，DT = 19001231

前 4 位 (1900) - 年，后 2 位 (12) - 月，后 2 位 (31) - 日期。

它应该与上述格式类似，然后只有您可以转换。希望对你有帮助，谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T21:25:56.953

我设法为此编写了一个存储过程，这似乎是唯一的解决方案？小数（14）以毫秒为单位，所以这里是解决方案

```
create procedure "informix".millis_to_time(milli_val decimal(14,0)) returning datetime year to fraction(3);

  define retval datetime year to fraction(3);
  define num_days int;
  define num_seconds int;
  define millis_in_day int;

  let millis_in_day = 86400000;
  let num_days = trunc(milli_val/millis_in_day,0);
  let num_seconds = (milli_val - (num_days * millis_in_day))/1000;

  let retval = extend(mdy(1,1,1970), year to fraction(3));
  let retval = retval + num_days units day;
  let retval = retval + num_seconds units second;

  return retval;
end procedure; 
```

# windows - 退出 git 控制台：如何执行批处理文件然后返回到 git 控制台？

> ID：11865085
> 
> 赞同：81
> 
> 时间：2012-08-08T13:01:37.917
> 
> 标签：windows, git, batch-file, cmd

我有一个名为的小型实用程序脚本`clear.bat`，可以对我的资源进行一些整理工作。

它是一个`.bat`文件，因此我可以轻松地在 Windows 资源管理器中双击它。

有时，我发现从我的 Git bash（msy​​sgit，如果这很重要）执行它更方便。

为此，我输入

```
cmd
clear.bat
exit 
```

`cmd`将我的 Git bash 变成一个普通的`cmd`窗口，我可以轻松地执行我的批处理。当我输入`exit`时，`cmd`环境被终止，我又回到了我的 Git bash 中。

这能以更简单的方式实现吗？

我试过了`cmd /C clean.bat`，因为[文档](http://ss64.com/nt/cmd.html)说

```
Syntax
      CMD [charset] [options]

      CMD [charset] [options] [/c Command] 

      CMD [charset] [options] [/k Command] 

Options   
   /C     Run Command and then terminate

   /K     Run Command and then return to the CMD prompt.
          This is useful for testing, to examine variables 
```

* * *

**编辑：**
刚注意到帖子坏了。

我想要的是`clean.bat`从 Git bash 中执行，而不必键入上面的三个命令（`cmd`、、、`clear.bat`）`exit`。我只想`.bat`从我的 Git bash 中执行该文件。显而易见的方法是创建一个单独的`.sh`文件来完成相同的工作，但这会导致双重代码。

* * *

**编辑2：** 当我执行`cmd /C clean.bat`时，Git bash 变成了一个普通的 CMD 环境，只显示提示。该文件`clean.bat`没有被执行。这就像我只是键入一样`cmd`。

此外，添加一个`/debug`开关实际上没有任何作用。似乎只`cmd`被评估并且所有进一步的参数都被忽略。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-08-09T06:50:09.277

在玩了一会儿之后，我自己找到了解决方案：

```
cmd "/C clean.bat" 
```

成功了。但是我不知道为什么...

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2016-04-16T03:16:34.710

`./clear.bat`会成功的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-10-16T12:22:38.190

[Git for Windows](https://git-for-windows.github.io/)（msysGit 已被 Git for Windows 1 取代）[常见](https://github.com/msysgit/msysgit)问题[解答](https://github.com/git-for-windows/git/wiki/FAQ#some-native-console-programs-dont-work-when-run-from-git-bash-how-to-fix-it)说您有 3 个选项：

*   运行使用该实用程序有问题的[`winpty`](https://github.com/rprichard/winpty)程序。这使您可以继续使用更好的 mintty 终端，但如果您需要许多程序的解决方法，可能会变得笨拙。

*   修改 Git Bash 的快捷方式以`bash`直接运行`mintty`，使其使用默认控制台主机并将其配置为“快速编辑”、合理的大小和回滚以及合适的 unicode 字体。您仍然必须忍受控制台主机的其他怪癖。

*   安装和使用[ConEmu](http://conemu.github.io/)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-29T08:35:21.007

我喜欢`start clean`，它会用 cmd 打开一个新窗口。这种方法有一些好处：

*   cmd.exe 获得本机控制台
*   新控制台具有原生 Windows 字符编码（例如 cp1251 与 utf8）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-10-16T12:54:00.847

在某些时候，Git for windows 增加了对`MSYS_NO_PATHCONV`环境变量的支持，所以除了@eckes 和@AlikElzin-kilaka 解决方案，你还可以

```
MSYS_NO_PATHCONV=1 cmd /c clean.bat 
```

一般来说，我更喜欢这种解决方案，因为它允许代码最接近于普通 bash，并且`MSYS_NO_PATHCONV`根据您的首选情况有多种导出方式。

注意：Git for Window 的 bash 不支持 MSYS2 环境变量`MSYS2_ARG_CONV_EXCL`

# 其他解决方案

## 奇怪的引用解决方案

为什么不`cmd "/c clean.bat"`创建其他错误？

事实证明，windows 中的参数解析不遵循与 *nix 中相同的通用规则。相反，在 Windows 中，参数的解析方式会根据[您编译的运行时](https://stackoverflow.com/a/12689342/4166604)不同。基本上在 Windows 中，命令行参数作为“一个字符串”传入，然后由运行时解析。

请参阅[此处](http://www.windowsinspired.com/how-a-windows-programs-splits-its-command-line-into-individual-arguments/)以获得比您想要的更多的解释。

例如`cmd`，然后以不同的方式解析参数`wscript.exe`

最后，您有望找到适合这种方法的东西，它是三种解决方案中最“窗口式”的

## 方法

[这在这里](http://www.mingw.org/wiki/posix_path_conversion)得到了很好的解释并且易于使用，但是添加了一个额外的`/`内容，这不利于可读性

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-22T04:58:26.890

这将起作用并且它也可以释放终端

```
 nohup ./nucleus.bat &
  less nohup.out 
```

# python - Python / Django - 如何更改模板内的变量？

> ID：11865087
> 
> 赞同：0
> 
> 时间：2012-08-08T13:01:45.390
> 
> 标签：python, django, variables, django-templates

我有一个需要在模板内更改的变量。

假设变量`foo`是`4`，但我需要的值是`foo + 1`。

然后我将在`if`声明中使用它，如下所示：

```
{% if bar == foo+1 %}
<p>Condition has been met!</p>
{% endif %} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T13:13:40.570

你可以做

```
{% if bar == foo|add:1 %}
<p>Condition has been met!</p>
{% endif %} 
```

或者另一个是：

```
{%with newfoo=foo|add:1 %}
  {% if bar == newfoo %}
  <p>Condition has been met!</p>
  {% endif %}
{%endwith%} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T13:08:03.840

如果您将逻辑保留在视图中而不是模板中，您的代码将更加透明和“djangoic”。因此，不要在模板中进行计算，而是`foo+1`将一个名为 的布尔变量传递给模板`foo_equals_bar`，或者传递给它变量`bar`然后`foo_incremented`比较它们。

看看它的可读性如何：

```
{% if foo_equals_bar %}
<p>Condition has been met!</p>
{% endif %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:09:12.630

```
{% with foo|add:"1" as foo1 %}
{% if foo1 ==  bar %}
<p>....</p>
{% endif %}
{% endwith %} 
```

# python - 如何通过 smtpd 和套接字接收电子邮件

> ID：11865090
> 
> 赞同：0
> 
> 时间：2012-08-08T13:01:47.590
> 
> 标签：python, sockets, smtp

我有一些代码试图接收从客户端服务器发送的电子邮件。电子邮件最终从服务器发送到客户端，并且客户端上的 SMTP 服务器应该能够接收此电子邮件。这是我的测试实现：

```
# define the SMTP server (with the real IP adress of the client of course)
server = smtpd.PureProxy(('XXX.XXX.XXX.XXX', 25), None)        
inputs = [server]
outputs = []
message_queues = {}
readable, writable, exceptional = select.select(inputs, outputs, inputs)

# Only one socket in the list returned (there is exactly one)
socket = readable[0]

# Accept the connection or get it or whatever
connection, client_address = socket.accept()

# get the data
data = connection.recv(1024)
print data 
```

经过相当长的一段时间后，收到了一些与电子邮件内容完全不同的数据。它总是

```
EHLO YYY.YYY.YYY.YYY 
```

用 YYY 表示服务器的地址。我不是 SMTP 和套接字方面的专家，但是我在正确接收 emai 及其内容方面做错了什么？

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:37:49.310

这`EHLO`是[SMTP 协议交换](http://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol#SMTP_transport_example)的一部分，它代表客户端向您的服务器发送问候语，但该服务器没有正确响应（因为它根本没有响应）。当客户端厌倦了等待“相当长的时间”时，会话超时并且您的服务器显示它收到的内容。

您似乎对哪个进程是服务器感到困惑。smtpd 模块创建服务器或邮件传输代理，而不是客户端。如[SMTPServer 的 smtpd 文档](http://docs.python.org/library/smtpd.html)中所述：

> 创建一个新的 SMTPServer 对象，该对象绑定到本地地址 localaddr。它将 remoteaddr 视为上游 SMTP 中继器。它继承自 asyncore.dispatcher，因此会在实例化时将自己插入到 asyncore 的事件循环中。

你似乎也有迷茫的`localaddr`感觉`remoteaddr`。localaddr 不是（正如您的评论所声称的）客户端的地址，而是该服务器应该接受来自哪里的连接。您可能想尝试代替您的代码：

```
server = smtpd.DebuggingServer(('localhost', 2525), None)
asyncore.loop() 
```

可以使用以下客户端代码（在单独的进程中）进行测试：

```
client smtplib.SMTP('localhost', 2525)
client.sendmail('from', 'to', 'body') 
```

最后，拥有一个远程地址为 None 的 PureProxy，如果它可以正常工作，它会将邮件代理到任何地方，这可能不是您在代理中想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:08:59.990

这是 ESMTP 协议对话框的正确开始。您的程序至少需要理解和处理基本的 SMTP 动词；见[RFC5321](https://www.rfc-editor.org/rfc/rfc5321)。

# javascript - 更改标签的属性值

> ID：11865094
> 
> 赞同：0
> 
> 时间：2012-08-08T13:01:59.273
> 
> 标签：javascript, jquery

我有一些这样的标签：

```
<path d="M 782.5 421 C 787.828 421 787.828 429 782.5 429 C 777.172 429 777.172 421 782.5 421 Z"
fill="#4572A7" stroke="#FFFFFF" stroke-width="0.000001" width="8" height="8"></path> 
```

而且我希望所有标签的宽度和高度都更大，而不是 8。但我很困惑，因为它们不在样式属性中。如何通过 javascript 或 jquery 更改它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T13:03:41.553

```
$('path').attr({width: 16, height: 16}) 
```

[http://api.jquery.com/attr](http://api.jquery.com/attr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:04:24.973

你可以像这样使用 jquery 的 attr 函数。

```
$('path').attr('height','55'); 
```

第一个参数是属性的名称，第二个是值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:04:56.603

试试这个

```
 $(function (){

    $('path').attr({width:12, height:12})

}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T13:07:41.203

尝试...

```
 $("path").attr("width","150"); 
```

# powershell - 内存不足

> ID：11865098
> 
> 赞同：1
> 
> 时间：2012-08-08T13:02:31.753
> 
> 标签：powershell, quest

我有一个内存问题，我需要有关 powershell 的帮助。对于以下代码：

```
function Get-PathPermissions {
        param ( [Parameter(Mandatory=$true)] [System.String]${Path} )
process {
    $groups=$null
    $groups=@{}
    $containers = Get-ChildItem -path $Path -recurse | ? {$_.psIscontainer -eq $true}
    if ($containers -eq $null) {break}
    foreach ($container in $containers) {
        Write-Output "Container: " $container
        $accts = (Get-ACL $container.fullname).Access
        foreach($acct in $accts) {
            $acctsQADObject = Get-QADObject -Identity ([string]$acct.IdentityReference) 
            if ($acctsQADObject.ObjectClass -contains 'group') {
                $Name = $acctsQADObject.Name
                $DN = $acctsQADObject.DN

                if (!$groups.ContainsKey($Name)) {
                    Write-Output "Adding $($Name) and $($DN)"
                    $groups.add($($Name),$($DN))
                }

            }
        }
    }
    foreach ($key in $groups.GetEnumerator() | Sort-Object Name -descending) {
        dumpGroup($key.value)
    }
}                
} 
```

对于每个`$accts`循环，我的记忆都会增加。例如，我从 1.41 GB 开始，然后不断攀升 1.42、1.43 ... 3.00GB+。这不是添加到组哈希，因为只有两个组用于测试。`$accts = $null`每次都需要设置吗？我认为每个循环都会创建`$accts`，破坏他之前的循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:05:23.477

您可以在处理每个文件后尝试调用垃圾收集。

# ember.js - Ember.js 在路由器中获取视图触发事件

> ID：11865099
> 
> 赞同：0
> 
> 时间：2012-08-08T13:02:38.017
> 
> 标签：ember.js

我有一个视图触发了一个在路由器状态内处理的事件。

```
<button {{action signUp this}} type="button" class="btn btn-primary">Sign-Up</button> 
```

这是一个处理程序：

```
signUp: (router, event) ->
    //how do I get an instance of the "View" class triggered an event? 
```

我可以使用 event.context 来获取 View 类的所有绑定属性，但实际上我想获取触发事件的 View 类的完整实例。任何提示如何实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T20:10:09.653

如果您想在视图中进行验证等，我建议您在视图上调用操作

```
// template
{{action signUp target="parentView"}} 
```

并将事件发送到路由器

```
// view
signUp: function() {
    // validation etc
    App.router.send('signUp',context);
} 
```

如果需要，您也可以操纵上下文以包含对当前视图 ( `this`) 的引用。

希望有帮助！

# autoconf - autoconf：使用 AS_INIT_GENERATED 在子目录中生成脚本

> ID：11865105
> 
> 赞同：0
> 
> 时间：2012-08-08T13:03:08.527
> 
> 标签：autoconf, vpath

如何使用`AS_INIT_GENERATE`生成与脚本不在同一目录中的`configure`脚本，特别是这样 VPATH 构建将得到尊重？

例如，对于`configure.ac`包含

```
AC_PREREQ([2.68])
AC_INIT([example],[0.1])
AS_INIT_GENERATED([src/file.sh]) || AS_EXIT
AC_OUTPUT 
```

运行命令

```
~ $ autoreconf .
~ $ mkdir build && cd build
~/build $ ../configure 
```

导致错误消息

```
../configure: line 1648: src/file.sh: No such file or directory
../configure: line 1655: src/file.sh: No such file or directory 
```

我想我必须在调用create之前确保该`src`目录存在，或者我做错了？`AS_INIT_GENERATE``src/file.sh`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T01:59:01.787

尝试这样的事情：

```
AC_PREREQ([2.68])
AC_INIT([example],[0.1])
test -d src || AS_MKDIR_P([src]) dnl <----- Create 'src' if it doesn't exist.
AS_INIT_GENERATED([src/file.sh]) || AS_EXIT
AC_OUTPUT 
```

# javascript - 带有全局变量、coffeescript 和回调的模块 csv

> ID：11865113
> 
> 赞同：0
> 
> 时间：2012-08-08T13:03:47.700
> 
> 标签：javascript, node.js, csv, coffeescript, global-variables

我正在使用 wdavidw 的 node-csv-parser 和咖啡脚本。我知道（或应该知道）变量作用域、绑定、全局变量，但是看着这段代码片段，我无法理解 @array varable 丢失了它的值甚至被分配了什么。

*脚本.咖啡：*

```
 require 'csv'
    find_lines = ->
        @array = []
        csv()
            .fromPath("#{__dirname}/Cities.csv", {delimiter:";"})
            .on 'data', (data, index) =>
                @array = data

    console.log @array

    find_lines() 
```

运行 script.coffe：

> ➜ 模块 git:(master) ✗ 咖啡脚本.coffee

代码输出为：

> 引用错误
> 引用错误
> 引用错误
> 引用错误

什么时候应该（根据 csv 值）：

> 城市 1
> 城市 2
> 城市 3

使用 csv 解析器中的*.transform*方法会产生相同的错误。

我是否误解了 node-csv-parser 的工作原理或这个模块有什么问题？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:22:59.897

让我们从一种可能的实现开始：

```
csv = require 'csv'

find_lines = ->
  array = []
  csv()
  .fromPath("#{__dirname}/Cities.csv", {delimiter:";"})
  .on 'data', (data) ->
    array.push data[0]
  .on 'end', ->
    console.log array

find_lines() 
```

请注意，您可能需要`array.push data[0]`“数据”回调以外的其他内容。

您不需要在`@array`此处使用，因为该`array`变量可用于“数据”和“结束”回调。这也消除了对胖箭头函数绑定的需要。在此实现中，该`array`变量仅在范围内可见，`find_lines`因此您将无法从函数调用外部记录其内容。

或者，您可以通过将其移动到模块范围来使其`array`可见，如下所示：`find_lines`

```
csv = require 'csv'
array = []

find_lines = ->
  csv()
  ... 
```

但是，（这是真正的关键点），直到您的模块代码的其余部分（包括对外部的任何调用）已经执行之后，该`array`变量才会**被修改。**如果不清楚，您应该复习一下 node.js 中回调和执行顺序的基础知识。`console.log``find_lines`

### 其他小问题

1.  `require 'csv'`应该`csv = require 'csv'`
2.  `array`没有被修改`data`，它被覆盖在每个新的 csv 行上

# objective-c - 使用继承时如何在目标C中获取调用者的类名？

> ID：11865114
> 
> 赞同：8
> 
> 时间：2012-08-08T13:03:49.770
> 
> 标签：objective-c, inheritance

我有一个名为 BaseClass 的基类。许多类派生自 BaseClass，即 SubClass1、SubClass2 和 SubClass3。

```
@interface  BaseClass: NSObject{
}
-(void)configure;
@end;

@implementation
-(void)configure{
NSLog(@"This needs to log from which sub class this method was called");
}
@end; 
```

可以通过创建子类的实例或在它们的实现中调用 configure 方法。

我需要知道这个方法是从哪个子类调用的。

这可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-08T13:10:49.203

不。方法无法知道它们是从哪个其他对象的方法调用的。甚至没有呼叫者身份的概念。可以从根本没有调用者对象的 C 函数调用方法。

> 我需要知道这个方法是从哪个子类调用的。

话虽如此，您可能只想知道对象是哪个（派生）类：

```
NSLog(@"My class: %@", NSStringFromClass([self class])); 
```

**2014 附录：**有一个 gnu 扩展[`__builtin_return_address`](http://gcc.gnu.org/onlinedocs/gcc/Return-Address.html)可用于此目的。[Mike Ash 展示](https://mikeash.com/pyblog/friday-qa-2014-01-10-lets-break-cocoa.html)了如何使用它来提取调用者符号名称（请参阅“调用者检查”）。我仍然认为整个方法有点脆弱，应该只用于调试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T20:16:27.613

接受的答案不正确。

```
NSArray *stack = [NSThread callStackSymbols];
NSString *methodThatDidLogging = [stack objectAtIndex:1]; 
```

您可以轻松地解析此字符串以获取调用者的类和方法名称。

我在我的自定义记录器中使用它来打印出记录消息的类和方法

干杯

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-07T02:08:11.957

您还可以使用：

```
const char* class_getName(Class cls) 
```

在 <objc/runtime.h> 中定义

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T13:07:54.760

答案取决于你想要类还是实例，以及它是你感兴趣的消息的发送者还是接收者。

对于接收方的类，可以使用`-class method`（声明在`NSObject`），即

```
-(void)configure
{
    NSLog(@"This logs from which sub class this method was called");
    NSLog(@"Class of this object is %@", [self class]);
} 
```

接收器实例是`self`当然的。如果是您感兴趣的发件人，则无法自动获取，但可以将其作为参数传递。所以你会有类似的东西

```
-(void)configure:(id)sender
{
    NSLog(@"This logs from which sub class this method was called");
    NSLog(@"Class of object that called this method is %@", [sender class]);
} 
```

# nginx - 如何在公司代理后面配置 Nginx

> ID：11865119
> 
> 赞同：10
> 
> 时间：2012-08-08T13:04:00.003
> 
> 标签：nginx

NginX 是否有等效于 apache 的 ProxyRemote 指令？

所以这个场景是我在一个公司代理后面，我想用 NginX 为各种服务做代理通行证。我会在 Apache 中执行以下操作：

ProxyPass /localStackOverflow/ [https://stackoverflow.com/](https://stackoverflow.com/)

ProxyPassReverse /localStackOverflow/ [https://stackoverflow.com/](https://stackoverflow.com/)

ProxyRemote [https://stackoverflow.com/](https://stackoverflow.com/) [http://(我的](http://(my)公司代理IP)

我知道我需要 NginX 中的 proxy_pass 指令，但找不到用于 ProxyRemote 的内容。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-27T17:49:05.647

不确定@tacos 响应如何工作 - 可能我错过了一些东西，但我能让它工作的唯一方法是重写 url 并传递给公司代理。如下所示：

```
http {
  server {
    listen 80;
    location / {
          rewrite ^(.*)$ "http://www.externalsite.com$1" break;
          proxy_pass http://corporate-proxy.mycorp.com:8080;
    }
  }
} 
```

这有效，但确实重写了 url，不确定这对原始用例是否重要..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T21:13:05.473

您在 Nginx 前端 Web 服务器后面代理的服务器称为上游服务器。您需要参考[HttpUpstreamModule](http://wiki.nginx.org/HttpUpstreamModule)的文档。这与您所熟悉的非常相似。如果您不需要负载平衡，您只需在配置中设置一个上游服务器，它将为您服务。

# java - 在 jodatime 中计算一个月的周数

> ID：11865123
> 
> 赞同：7
> 
> 时间：2012-08-08T13:04:20.130
> 
> 标签：java, jodatime

可以用jodatime计算一个月的周数吗？

我需要这样的东西：

**月份：七月**

*   第 27 周；1-7。七月
*   第 28 周；9-14。七月
*   第 29 周；16-21。七月
*   第 30 周；23-31。七月

**月份：八月**

*   第 31 周；1-4。八月
*   第 32 周；6-11。八月
*   第 33 周；13-18。八月
*   第 34 周；20-25。八月
*   第 35 周；27-31。八月

我知道我可以像这样在 joda 时间获得一年中的一周：

`new LocalDate().weekOfWeekYear()`

但我不知道如何获得相关日期。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T13:19:47.147

要检索一周的范围，只需创建一个指向一周的第一天和最后一天的对象，然后从中提取月份中的某一天。

```
int weekOfYear = 32;

LocalDate firstDay = new LocalDate().withWeekOfWeekyear(weekOfYear).withDayOfWeek(1);
LocalDate lastDay = new LocalDate().withWeekOfWeekyear(weekOfYear).withDayOfWeek(7);

System.out.println("Week of Year "+weekOfYear+"; "+firstDay.toString("d MMM")+" - "+lastDay.toString("d MMM")); 
```

您还可以像这样提取日期：

```
int weekStart = firstDay.getDayOfMonth();
int weekEnd = lastDay.getDayOfMonth(); 
```

然后，您也可以使用相同的技术来检索一个月中的周数。

```
int firstWeekInMonth = new LocalDate().withMonthOfYear(month).withDayOfMonth(1).getWeekOfYear();
int lastWeekInMonth = new LocalDate().withMonthOfYear(month).dayOfMonth().withMaximalValue().getWeekOfYear(); 
```

可能您可能希望将开始日期和结束日期限制在该月的范围内，否则您可能会得到“30 - 5 Sep”之类的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:40:08.960

修复一些变量：

```
int weekOfYear = 32;

LocalDate firstDay = new LocalDate().withWeekOfWeekyear(weekOfYear).withDayOfWeek(1);
LocalDate lastDay = new LocalDate().withWeekOfWeekyear(weekOfYear).withDayOfWeek(6);

int weekStart = firstDay.getDayOfMonth();    
int weekEnd = lastDay.getDayOfMonth();

System.out.println("Week of Year "+weekOfYear+"; "+weekStart+"-"+weekEnd+" "+month); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-10T02:26:45.853

我的解决方案，考虑到其他答案

```
 public List<Pair<LocalDate, LocalDate>> getWeeksInMonth(LocalDate data) {

        int firstWeekInMonth = data.withDayOfMonth(1).getWeekOfWeekyear();
        int lastWeekInMonth = data.dayOfMonth().withMaximumValue().getWeekOfWeekyear();

        List<Pair<LocalDate, LocalDate>> weeks = new cicero.minhasfinancas.util.array.ArrayList<>();
        while (firstWeekInMonth <= lastWeekInMonth) {

            LocalDate firstDay = new LocalDate().withWeekOfWeekyear(firstWeekInMonth).withDayOfWeek(1);
            LocalDate lastDay = new LocalDate().withWeekOfWeekyear(firstWeekInMonth).withDayOfWeek(7);
            weeks.add(new Pair<>(firstDay, lastDay));
            firstWeekInMonth++;
        }

        return weeks;
    }

    public class Pair<V1, V2>{

        V1 first;
        V2 second;

        public Pair(V1 first, V2 second) {
            this.first = first;
            this.second = second;
        }

        public V1 getFirst() {
            return first;
        }

        public void setFirst(V1 first) {
            this.first = first;
        }

        public V2 getSecond() {
            return second;
        }

        public void setSecond(V2 second) {
            this.second = second;
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-01T14:01:44.163

我认为这也是每周寻找的工作

```
String[] weekDays = {today.withDayOfWeek(DateTimeConstants.MONDAY).getDayOfMonth() +"",
            today.withDayOfWeek(DateTimeConstants.TUESDAY).getDayOfMonth()+ "",
            today.withDayOfWeek(DateTimeConstants.WEDNESDAY).getDayOfMonth() + "",
            today.withDayOfWeek(DateTimeConstants.THURSDAY).getDayOfMonth() + "",
            today.withDayOfWeek(DateTimeConstants.FRIDAY).getDayOfMonth() +"",
            today.withDayOfWeek(DateTimeConstants.SATURDAY).getDayOfMonth() +"",
            today.withDayOfWeek(DateTimeConstants.SUNDAY).getDayOfMonth() +""}; 
```

# sql - CASE 语句为标量变量返回多行

> ID：11865125
> 
> 赞同：0
> 
> 时间：2012-08-08T13:04:24.840
> 
> 标签：sql, sql-server

我有以下代码

```
 DECLARE @ProjectID INT
    DECLARE @getSLAPrjectID CURSOR
    SET @getSLAPrjectID = CURSOR FOR SELECT ProjectID FROM SLA

    OPEN @getSLAPrjectID

    FETCH NEXT
    FROM @getSLAPrjectID INTO @ProjectID
    WHILE @@FETCH_STATUS = 0
    BEGIN

    BEGIN

    SET @ScheduleVariance = (select case when (DATEDIFF(day,PlannedStartDate,PlannedEndDate)=0) THEN 0 ELSE (DATEDIFF(day,ActualStartDate,ActualEndDate)-DATEDIFF(day,PlannedStartDate,PlannedEndDate))/CAST(DATEDIFF(day,PlannedStartDate,PlannedEndDate) as float) END from SLA)

    -- other piece of code that is working fine

    END

    FETCH NEXT
    FROM @getSLAPrjectID INTO @ProjectID

    END

    CLOSE @getSLAPrjectID
    DEALLOCATE @getSLAPrjectID

    --end 
```

我收到以下错误：子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

请让我知道在这段代码中是否有任何替代 CASE 语句或替代标量变量的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:08:54.687

请尝试在子查询中使用 where 条件 SLA.ProjectID = @ProjectID。

```
SET @ScheduleVariance = (select case when (DATEDIFF(day,PlannedStartDate,PlannedEndDate)=0) THEN 0 ELSE (DATEDIFF(day,ActualStartDate,ActualEndDate)-DATEDIFF(day,PlannedStartDate,PlannedEndDate))/CAST(DATEDIFF(day,PlannedStartDate,PlannedEndDate) as float) END from SLA where SLA.ProjectID = @ProjectID) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:10:40.060

显然，这一行返回不止一行：

```
SET @ScheduleVariance = (select case when (DATEDIFF(day,PlannedStartDate,PlannedEndDate)=0)
                                     THEN 0
                                     ELSE (DATEDIFF(day,ActualStartDate,ActualEndDate)-DATEDIFF(day,PlannedStartDate,PlannedEndDate))/CAST(DATEDIFF(day,PlannedStartDate,PlannedEndDate) as float)
                         END from SLA) 
```

您需要以下条件之一来获取一行：WHERE 子句、聚合函数 (WHERE ?) 或 TOP 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:08:44.067

很可能是因为表 SLA 包含不止一行。要解决它，您应该添加一个 WHERE 子句，将结果缩小到一行。

我强烈建议**不要**使用 TOP 1，除非您绝对确定行集的第一行（正确排序）就是您要查找的行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T13:18:27.067

SLA 中有超过 1 行。`TOP 1`只要您使用`ORDER BY`确保查询是确定性的，您就可以解决这个问题。

```
SELECT  TOP 1 @ScheduleVariance = CASE WHEN (DATEDIFF(DAY, PlannedStartDate,PlannedEndDate) = 0) THEN 0 
                                ELSE (DATEDIFF(DAY, ActualStartDate, ActualEndDate) / CAST(DATEDIFF(DAY,PlannedStartDate, PlannedEndDate) AS FLOAT)) - 1 
                            END 
FROM    SLA
ORDER BY ProjectID 
```

但是，我怀疑您的查询中也缺少 where 子句。

```
SELECT  @ScheduleVariance = CASE WHEN (DATEDIFF(DAY, PlannedStartDate,PlannedEndDate) = 0) THEN 0 
                                ELSE (DATEDIFF(DAY, ActualStartDate, ActualEndDate) / CAST(DATEDIFF(DAY,PlannedStartDate, PlannedEndDate) AS FLOAT)) - 1 
                            END 
FROM    SLA
WHERE   ProjectID = @ProjectID 
```

或者

```
SET @ScheduleVariance = 
    (   SELECT  CASE WHEN (DATEDIFF(day,PlannedStartDate,PlannedEndDate) = 0) THEN 0 
                    ELSE (DATEDIFF(day, ActualStartDate, ActualEndDate) / CAST(DATEDIFF(DAY,PlannedStartDate, PlannedEndDate) AS FLOAT)) - 1 
                END 
        FROM    SLA
        WHERE   ProjectID = @ProjectID
    ) 
```

注意，我也整理了你的计算，所以改变了

```
(x - y) / y 
```

至

```
(x / y) - 1 
```

# c++ - 从 QCompleter 选择项目后无法清除 QLineEdit

> ID：11865129
> 
> 赞同：1
> 
> 时间：2012-08-08T13:04:35.920
> 
> 标签：c++, qt, qlineedit, qcompleter

当您选择一个项目（使用箭头键）并按回车时使用 PopupCompletion 模式 - lineEdit 应该为空（按下回车时我清除 lineEdit），但 lineEdit 不会为空。（如果您再次按“Enter”，它将清空 lineEdit）。所以我认为按回车确实清除了lineEdit，但按回车也告诉QCompleter将所选项目插入lineEdit，所以似乎什么也没发生。

但是，如果您单击使用箭头选择它的项目 - 一切正常。

我试图在互联网上找到解决方案，但我发现只有一个人有同样的问题： http: [//lists.trolltech.com/qt-interest/2006-10/thread00985-0.html](http://lists.trolltech.com/qt-interest/2006-10/thread00985-0.html)。遗憾的是没有答案。请阅读他的问题，因为这将有助于理解我的问题。

QCompleter 插入所选项目后如何清理 LineEdit？（捕捉激活信号无济于事）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T16:48:55.090

这里的问题是完成器实际上包含一个弹出窗口，它实际上是一个单独的`QAbstractItemView`小部件（请参阅[QCompleter::popup()](http://qt-project.org/doc/qt-4.8/qcompleter.html#popup)文档）。因此，当您在 QCompleter 上按“Enter”时，关键事件实际上会进入弹出窗口而不是行编辑。

有两种不同的方法可以解决您的问题：

## 选项1

将完成者的激活信号连接到行编辑的清除槽，但将其作为`QueuedConnection`：

```
QObject::connect(completer, SIGNAL(activated(const QString&)),
                 lineEdit, SLOT(clear()),
                 Qt::QueuedConnection); 
```

使用直接连接不起作用的原因是因为您本质上取决于从信号调用插槽的顺序。使用 a`QueuedConnection`可以解决这个问题。从代码维护的角度来看，我真的不喜欢这个解决方案，因为仅仅通过查看代码并不清楚你的意图是什么。

## 选项 2

在弹出窗口周围编写一个事件过滤器以过滤掉“Enter”键以明确清除行编辑。您的事件过滤器最终看起来像这样：

```
class EventFilter : public QObject
{
   Q_OBJECT
public:
   EventFilter(QLineEdit* lineEdit, QObject* parent = NULL)
      :QObject(parent)
      ,mLineEdit(lineEdit)
   { }
   virtual ~EventFilter()
   { }

   bool eventFilter(QObject* watched, QEvent* event)
   {
      QAbstractItemView* view = qobject_cast<QAbstractItemView*>(watched);
      if (event->type() == QEvent::KeyPress)
      {
         QKeyEvent* keyEvent = dynamic_cast<QKeyEvent*>(event);
         if (keyEvent->key() == Qt::Key_Return || 
             keyEvent->key() == Qt::Key_Enter)
         {
            mLineEdit->clear();
            view->hide();
            return true;
         }
      }
      return false;
   }

private:
   QLineEdit* mLineEdit;
}; 
```

然后，您将在完成者的弹出窗口中安装事件过滤器：

```
EventFilter* filter = new EventFilter(lineEdit);
completer->popup()->installEventFilter(filter); 
```

这个选项工作量更大，但更清楚你在做什么。此外，如果您愿意，您可以通过这种方式执行其他自定义。

# regex - 正则表达式匹配时间表达式 (mmmm:ss)

> ID：11865131
> 
> 赞同：1
> 
> 时间：2012-08-08T13:04:40.960
> 
> 标签：regex

我有一个要检查时间输入的应用程序。分钟（m，0-9999 之间的任何值）和秒（s，0-59 之间）的允许形式是：

```
s
ss
m:ss
...
mmmm:ss 
```

我目前的正则表达式是：

```
^([0-9]){0,4}(?=\:)\:?([0-5]){0,1}([0-9]){1}|([0-5]){0,1}([0-9]){1}$ 
```

符合上述所有条件，但我不希望它匹配

```
:ss 
```

虽然不匹配最后一个对我来说并不重要，但`:ss`我想知道：为什么它匹配最后一个（以及您如何建议我修改我的正则表达式以排除这种情况）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:19:11.253

尝试这个：

```
^(?:\d{1,4}:)?[0-5]?\d$ 
```

`:`如果我们之前至少匹配一个数字，我们只匹配一个冒号 ( )。您的模式允许冒号前面没有数字，因此您的文本可以以它开头。

工作示例：[http ://rubular.com/r/rFROIed8Pg](http://rubular.com/r/rFROIed8Pg)

一个更棘手的选项是`^\b\d{0,4}:?[0-5]?\d$`- 这使得冒号和分钟都是可选的，但不会匹配字符串开头的冒号。

* * *

关于评论的一些额外解释：

要禁止`mmm:s`（单个第二个数字），一种可能的模式是：

```
^(?:\d{1,4}:(?=\d{2}))?[0-5]?\d$ 
```

快速解释：

*   结局很简单：`[0-5]?\d$`- 0-59
*   第一部分比较棘手：
    *   `\d{1,4}:`- 匹配一到四位数字和一个冒号。
    *   `(?=\d{2})`- 但前提是冒号后跟两位数字！这是一个[前瞻](http://www.regular-expressions.info/lookaround.html)- 如果冒号后面只有一位数字，它将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:15:55.730

这说匹配

```
^([0-9]){0,4}(?=\:)\:?([0-5]){0,1}([0-9]){1} 
```

或者

```
([0-5]){0,1}([0-9]){1}$ 
```

试试这个

```
^([0-9]){0,4}(?=\:)\:?([0-5]){0,1}([0-9]){1}|:?([0-5]){0,1}([0-9]){1}$ 
```

# javascript - 如何触发这个 Javascript 函数

> ID：11865136
> 
> 赞同：0
> 
> 时间：2012-08-08T13:04:54.000
> 
> 标签：javascript

```
<script type="text/javascript">
var IE = document.all?true:false
if (!IE) document.captureEvents(Event.MOUSEMOVE)
document.onmousemove = getMousePos;
// Temporary variables to hold mouse x-y pos.s
var tempX = 30;
var tempY = 30;

function getMousePos(e) {
  if (IE) { // grab the x-y pos.s if browser is IE
    tempX = event.clientX + document.body.scrollLeft
    tempY = event.clientY + document.body.scrollTop
  } else {  // grab the x-y pos.s if browser is NS
    tempX = e.pageX
    tempY = e.pageY
  }  
  // catch/correct negative values 
  if (tempX < 0){tempX = 0}
  if (tempY < 0){tempY = 0}  

  // show the position values in the form
  document.MouseDisplay.MouseX.value = tempX;
  document.MouseDisplay.MouseY.value = tempY;
  return true;
}

// execute function
if (tempY < 30) {
 alert('tempY is found to be less than 30');
}

</script> 
```

我在 hotscript 和 codelifter [http://www.codelifter.com/main/javascript/capturemouseposition1.html](http://www.codelifter.com/main/javascript/capturemouseposition1.html)找到了这段代码，它来自一个旧线程，但我相信它有我需要实现的目标。每当鼠标 Y 位置小于 30 时，我都想执行一个函数。

我是编程初学者，希望可以从这里的示例中慢慢学习。

我的问题是，为什么没有触发警报命令？我在这里想念什么。我做了一个简单的按钮来调用它起作用的功能。

```
<script type="text/javascript">
function myFunction() {
alert('tempY is found to be less than 30');
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:10:56.847

没有尝试过您的代码，但假设它在鼠标移动时确实有效，要查看您的警报，只需在函数内移动该行：

```
var IE = document.all?true:false
if (!IE) document.captureEvents(Event.MOUSEMOVE)
document.onmousemove = getMousePos;
// Temporary variables to hold mouse x-y pos.s
var tempX = 30;
var tempY = 30;

    function getMousePos(e) {
      if (IE) { // grab the x-y pos.s if browser is IE
        tempX = event.clientX + document.body.scrollLeft
        tempY = event.clientY + document.body.scrollTop
      } else {  // grab the x-y pos.s if browser is NS
        tempX = e.pageX
        tempY = e.pageY
      }  
      // catch/correct negative values 
      if (tempX < 0){tempX = 0}
      if (tempY < 0){tempY = 0}  

      // show the position values in the form
      document.MouseDisplay.MouseX.value = tempX;
      document.MouseDisplay.MouseY.value = tempY;

      // execute function
      if (tempY < 30) {
       alert('tempY is found to be less than 30');
      }
      return true;
    } 
```

# c# - 如何在 GridViewRowCommand 事件中更新同一页面上 TextBox 的文本

> ID：11865138
> 
> 赞同：0
> 
> 时间：2012-08-08T13:04:55.637
> 
> 标签：c#, asp.net, ajax

嗨，我有一个 Gridview 和一个文本框，它们放在 Ajax 更新面板中。

来源如下：

```
<asp:UpdatePanel ID="UpdatePanelAdmissionDefaultSettings" runat="server">
<ContentTemplate>
<asp:GridView ID="GridViewMeritDetails" runat="server" AutoGenerateColumns="False" 
        BackColor="White" BorderColor="#5C5C5C" BorderStyle="Solid" BorderWidth="1px" 
        CellPadding="4" ForeColor="Black" CssClass="MeritGridStyle" 
            onrowdatabound="GridViewMeritDetails_RowDataBound" 
            onrowcommand="GridViewMeritDetails_RowCommand">
<RowStyle BackColor="#F7F7DE" />
<Columns>
<asp:BoundField HeaderText="Field Name" DataField="MeritField" />
<asp:BoundField HeaderText="Field ID" DataField="MeritFieldID" />
<asp:ButtonField CommandName="edit" HeaderText="Edit" Text="Edit" />
<asp:ButtonField CommandName="delete" HeaderText="Delete" Text="Delete" />
</Columns>
<FooterStyle BackColor="#CCCC99" />
<PagerStyle BackColor="#F7F7DE" ForeColor="Black" HorizontalAlign="Right" />
<SelectedRowStyle BackColor="#CE5D5A" Font-Bold="True" ForeColor="White" />
<HeaderStyle BackColor="#6B696B" Font-Bold="True" ForeColor="White" />
<AlternatingRowStyle BackColor="White" />
</asp:GridView>

<asp:TextBox ID="TextBoxMeritFieldName" runat="server"></asp:TextBox>
</ContentTemplate>
</asp:UpdatePanel> 
```

我的问题是，当我单击 GridView 中的编辑按钮时，我想在文本框中所选行的单元格中显示值。我已经给出了在 Gridview RowCommand 事件中显示它的代码。但它不起作用。

这是后面的代码：

```
protected void GridViewMeritDetails_RowCommand(object sender, GridViewCommandEventArgs e)
{
    int iRowIndex = Convert.ToInt32(e.CommandArgument);
    if (e.CommandName == "edit")
    {
        TextBoxMeritFieldName.Enabled = true;
        TextBoxMeritFieldName.Text = GridViewMeritDetails.Rows[iRowIndex].Cells[0].Text.Trim();
    }
    else if (e.CommandName == "delete")
    {
        //Add code to delete merit field
    }
} 
```

当我调试时，控件进入RowCommand并到达该行

```
TextBoxMeritFieldName.Text = GridViewMeritDetails.Rows[iRowIndex].Cells[0].Text.Trim(); 
```

但是文本没有显示在页面上。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:08:40.360

设置 UpdatePanel 的模式

```
<asp:UpdatePanel runat="server" UpdateMode="Conditional" ID="UpdatePanelAdmissionDefaultSettings" runat="server" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T06:39:47.933

感谢您的慷慨回复。

我已经得到了答案。

我在 UpdatePanelAdmissionDefaultSettings 部分添加了以下代码行

```
<asp:AsyncPostBackTrigger ControlID="GridViewMeritDetails" /> 
```

现在它变成了：

```
<asp:UpdatePanel Mode="Conditional" ID="UpdatePanelAdmissionDefaultSettings" runat="server"> 
```

```
<asp:TextBox ID="TextBoxMeritFieldName" runat="server"></asp:TextBox>
</ContentTemplate>
<Triggers>
<asp:AsyncPostBackTrigger ControlID="GridViewMeritDetails" />
</Triggers>
</asp:UpdatePanel> 
```

我得到了我需要的结果。早些时候，我的触发器部分是这样的：

```
<Triggers>
<asp:AsyncPostBackTrigger ControlID="GridViewMeritDetails" EventName="RowCommand"/>
</Triggers> 
```

我刚刚删除了 EventName 属性，它现在可以工作了......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:48:32.653

```
<asp:UpdatePanel Mode="Conditional" ID="UpdatePanelAdmissionDefaultSettings" runat="server">
 <ContentTemplate>
  <asp:GridView ID="GridViewMeritDetails" runat="server" AutoGenerateColumns="False" 
    BackColor="White" BorderColor="#5C5C5C" BorderStyle="Solid" BorderWidth="1px" 
    CellPadding="4" ForeColor="Black" CssClass="MeritGridStyle" 
        onrowdatabound="GridViewMeritDetails_RowDataBound" 
        onrowcommand="GridViewMeritDetails_RowCommand">
    <RowStyle BackColor="#F7F7DE" />
       <Columns>
          <asp:BoundField HeaderText="Field Name" DataField="MeritField" />
          <asp:BoundField HeaderText="Field ID" DataField="MeritFieldID" />
          <asp:ButtonField CommandName="edit" HeaderText="Edit" Text="Edit" />
          <asp:ButtonField CommandName="delete" HeaderText="Delete" Text="Delete" />
       </Columns>
       <FooterStyle BackColor="#CCCC99" />
       <PagerStyle BackColor="#F7F7DE" ForeColor="Black" HorizontalAlign="Right" />
       <SelectedRowStyle BackColor="#CE5D5A" Font-Bold="True" ForeColor="White" />
       <HeaderStyle BackColor="#6B696B" Font-Bold="True" ForeColor="White" />
       <AlternatingRowStyle BackColor="White" />
  </asp:GridView>

 <asp:TextBox ID="TextBoxMeritFieldName" runat="server"></asp:TextBox>
</ContentTemplate>
</asp:UpdatePanel> 
```

`Mode="Conditional"`设置更新面板的一项属性

# parallel-processing - CUDA 并行块的最佳数量

> ID：11865145
> 
> 赞同：2
> 
> 时间：2012-08-08T13:05:16.993
> 
> 标签：parallel-processing, cuda, gpu, gpgpu

如果每个块中的线程数已经大于 CUDA 内核的数量，那么同时启动一个块网格是否比一次启动一个块有任何性能优势？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T14:23:18.907

我认为有；一个线程块被分配给一个流式多处理器 (SM)，并且 SM 进一步将每个块的线程划分为 32 个线程的线程束（较新的架构可以处理更大的线程束），这些线程被调度为顺序执行（更多-更少）。考虑到这一点，将每个计算分成块会更快，以便它们占用尽可能多的 SM。这也意味着构建块是卡支持的每个线程的倍数的块（对于 SM 使用 32 线程线程的情况，一个块是 32 或 64 个线程而不是 40 个线程）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T05:54:58.010

**启动延迟**

启动延迟（在 GPU 上启动 API 调用）在 Linux 上为 3-8 µs，在 Windows Vista/Win7 上为 30-80 µs。

将一个块分配给一个 SM 需要 10-100s ns。

在一个块（32 个线程）中启动一个 warp 需要几个周期，并且在每个 SM 上并行发生。

**资源限制**

并发内核 - Tesla N/A 一次仅 1 个网格 - Fermi 一次 16 个网格 - Kepler 16 个网格（Kepler2 32 个网格）

最大块数（不考虑占用限制） - Tesla SmCount * 8 (gtx280 = 30 * 8 = 240) - Fermi SmCount * 16 (gf100 = 16 * 16 = 256) - Kepler SmCount * 16 (gk104 = 8 * 16 = 128)

有关每个块的线程、每个 SM 的线程、每个 SM 的寄存器、每个线程的寄存器等的限制，请参见占用计算器。

**Warps 调度和 CUDA 核心**

CUDA 核心是浮点/ALU 单元。每个 SM 都有其他类型的执行单元，包括加载/存储、特殊功能、分支等。一个 CUDA 内核相当于 x86 处理器中的一个 SIMD 单元。它不等同于 x86 内核。

占用率是每个 SM 的经线与每个 SM 的最大经线数的量度。每个 SM 的 warp 越多，warp 调度程序有一个合格的 warp 来调度的机会就越高。但是，占用率越高，每个线程可用的资源就越少。作为一个基本目标，您希望定位的目标超过

25% 特斯拉上 8 次经线 费米上 50% 或 24 次经线 开普勒上 50% 或 32 次经线（通常更高）

您会注意到在这些计算中与 CUDA 内核没有真正的关系。

To understand this better read the Fermi whitepaper and if you can use the Nsight Visual Studio Edition CUDA Profiler look at the Issue Efficiency Experiment (not yet available in the CUDA Profiler or Visual Profiler) to understand how well your kernel is hiding execution and memory latency.

# coldfusion - 在功能和性能方面指定参数/属性值时，True 和 False 是否等于 Yes 和 No？

> ID：11865147
> 
> 赞同：5
> 
> 时间：2012-08-08T13:05:28.337
> 
> 标签：coldfusion

使用 yes|no 与 true|false 是否存在任何已知的功能或性能差异？ColdFusion 文档指出布尔类型属性的值是用是/否指定的。例如，<cfargument required="yes|no" ....> 我使用 true 和 false 代替 yes|no，并且没有看到任何意外功能。

[编辑]我很欣赏这些回应，也许我在这种情况下想得更笼统。

ColdFusion 文档指出，某些参数的预期值为“yes|no”，例如[cfargument required](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7e47.html)。是否有任何见解为什么 yes|no 被记录为唯一的预期值，而不是 true|false 或声明“任何布尔值”是预期的？似乎有点模棱两可，不指示任何布尔类型，而不是仅声明“是|否”，如果 A）我们假设“任何布尔值”B）存在实际的性能差异。想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T13:22:02.810

ColdFusion 平等地评估是/否、真/假、1（或任何非零数）/0。这使得制作快捷布尔值变得容易，例如`<cfif myquery.recordcount>`或`<cfif len(FORM.myVar)>`不必将整数转换为真/假。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-09T12:44:26.803

`"yes/no"`是少了几个字符来输入。

`"true/false"`（和真/假）更符合其他编程语言。

在性能方面，就CF而言，它们都是字符串。直到您尝试在条件逻辑中使用它们，它们才会神奇地变成其他数据类型，例如 java.lang.Boolean。字符串和布尔值之间的转换非常快。这是 CF 大部分时间都在做的事情。你很难找到任何可靠的测试证明一个比另一个快。

为了代码的可维护性/可读性，最好坚持使用其中一个。

一些传统的 CF 标签功能特别需要“是/否”。它们根本不适用于“真/假”。我相信在 CF9+ 中不再是这种情况。

不要依赖 ColdFusion 文档是准确的或最新的。几乎所有将“是/否”列为默认/允许值的方法实际上都支持任何类型的布尔值。“是/否”、“真/假”、真/假、1/0 等。

恕我直言，对布尔值使用“是/否”是疯狂的。向后兼容旧 CF5 时代。糟糕的是，Adobe 仍在使用它来输出 java 布尔值。

例如。`writeDump( var: (not true) );`给你“不”。但是，我想要`false`？！嗯。

您可以通过调用来判断您的变量当前是什么 java 类`myVar.getClass().getName()`。您可以使用它来观看 CF 将您的数据从 Boolean 转换为 String 并再次转换为 Boolean，就像魔术一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:20:09.240

作为一个实验，你可以试试这个。对我来说，不使用“是”的一千万次迭代导致大部分时间减少了 100 毫秒。

```
<cfscript>
bln = true;
starttime = getTickCount();

for(i=0;i<10000000;i++){
if(bln eq true)
  foo="bar";
}
writeOutput(getTickCount()-startTime & '<br />');

starttime = getTickCount();

for(i=0;i<10000000;i++){
if(bln eq "yes")
  foo="bar";
}
writeOutput(getTickCount()-startTime & '<br />');
</cfscript> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-31T12:58:56.637

我们刚刚将一个项目升级到 CF2016，突然开始出现 java.lang.VerifyError "Incompatible argument to function" 错误。原来是cfform，我们使用accessible="true"。将值更改为“yes”不会***消除***错误。删除整个“可访问”表单标记确实如此。我们没有弄清楚这代表什么与 Flash 相关的噩梦，而是将其从表单中删除。

谢谢，Adobe。

# php - 检查数据中的转发日期

> ID：11865149
> 
> 赞同：0
> 
> 时间：2012-08-08T13:05:35.643
> 
> 标签：php, mysql

我正在尝试运行一个查询，该查询将从这里开始几天。基本上，今天，明天，等等。

这是我的代码..

```
$dateNow = date('Y-m-d');

$where .= ' AND `mb_sanctions`.`StartDate` > \'$dateNow\''; 
```

我不断在我的开发人员工具上获取变量..我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:08:37.477

假设`stardate`是一个日期列，为什么不直接使用：

```
$where .= ' AND `mb_sanctions`.`StartDate` > now()'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T13:08:39.640

我认为您的查询应该是：

```
$where .= ' AND `mb_sanctions`.`StartDate` > ''' . $dateNow . ''''; 
```

您将返回 $datenow 作为结果，因为您没有将日期连接到字符串上，而是返回了该变量的文字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T13:08:45.547

相反，你可以试试这个：

```
$where .= ' AND `mb_sanctions`.`StartDate` > CURRENT_DATE'; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T13:08:48.817

您可以`DATE_ADD( )`为此使用，例如：

```
DATE(DATE_ADD(CURDATE(),INTERVAL 1 DAY)) 
```

上面的查询输出明天的日期。

**[有关 DATE_ADD( ) 的更多信息](http://www.w3schools.com/sql/func_date_add.asp)**

或者你也可以这样做：

```
$where .= ' AND DATE(`mb_sanctions`.`StartDate`) > DATE(CURDATE())'; 
```

# gtk - 在 GTK+ 中让窗口显示在全屏窗口上方

> ID：11865150
> 
> 赞同：0
> 
> 时间：2012-08-08T13:05:36.430
> 
> 标签：gtk, x11

我有一个全屏窗口 (winA) 和另一个始终位于顶部的窗口 (winB)。

现在我需要让 winB 显示在 winA 上方，而 winA 仍然在任何其他窗口上方。

如何在 GTK+ 中做到这一点？谢谢。（也许这需要 Xlib？）

PS1：我不会使用 POPUP 窗口，因为它会将**所有**窗口都放在它下面。我只需要将 winB 放在 winA 上，而不是所有其他人。例如，如果我在全屏模式下观看视频，我不希望看到 winB。但是如果 winA 在这里，winB 就在它上面。

PS2：winA 和 winB 在同一个程序中。在这种情况下，它可以简化解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T17:53:31.927

告诉窗口管理器将 winB 保持在 winA 之上的主要方法是通过“transient for”提示，在 GTK+ 中使用[gtk_window_set_transient_for()](https://developer.gnome.org/gtk3/3.16/GtkWindow.html#gtk-window-set-transient-for)设置。

如果您的窗口不是对话框，则行为可能不会完全符合您的要求；您可以尝试使用[gtk_window_set_type_hint()](https://developer.gnome.org/gtk3/3.16/GtkWindow.html#gtk-window-set-type-hint)设置语义提示，看看是否可以帮助您。

但是行为基本上会随着窗口管理器（这是预期的）而变化。所以你有点需要忍受这一点，并假设人们会使用一个可以按照他们想要的方式工作的 WM。

# asp.net-mvc-3 - 访问网站时避免重定向到 ADFS 2.0 登录页面

> ID：11865156
> 
> 赞同：0
> 
> 时间：2012-08-08T13:05:48.850
> 
> 标签：asp.net-mvc-3, wif, adfs2.0

我正在开发一个 MVC 3 WIF 应用程序，它与 ADFS 2.0 和 AD 交换声明。它真的很好用，但有一个问题我似乎无法解决。

我想要做的是让匿名用户可以访问主页（HomeController），当他们进入不同的页面时，他们将被重定向到 ADFS-signin。我试图在我的 web.config 中添加一个位置，它在我`http://localhost/Home`手动输入时有效，但在我输入时无效`https://localhost`。

```
<location path="Home">
<system.web>
  <authorization>
    <allow users="?" />
  </authorization>
  <httpModules>
    <add name="WSFederationAuthenticationModule" type="Microsoft.IdentityModel.Web.WSFederationAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <add name="SessionAuthenticationModule" type="Microsoft.IdentityModel.Web.SessionAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </httpModules>
</system.web> 
```

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:48:13.170

强烈建议不要使用位置和授权 web.config 设置，因为它会在您的 MVC 应用程序中打开安全漏洞：

[http://forums.asp.net/t/1583850.aspx/1/10](http://forums.asp.net/t/1583850.aspx/1/10)

相反，您应该使用`[Authorize]`控制器或操作级别的属性来确定应授予哪些用户和角色访问权限。

对于您的问题，如果您没有`[Authorize]`指定，页面应该允许匿名访问。

# json - 从 .json 链接读取内容的最佳方式

> ID：11865157
> 
> 赞同：0
> 
> 时间：2012-08-08T13:05:49.883
> 
> 标签：json, parsing, appcelerator-mobile

我已经获得了 .json 文件的链接，检索内容然后解析它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:06:17.460

如果您尝试在 Titanium 移动版中执行此操作，那么...

1.  [使用Titanium.Network.HTTPClient](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.Network.HTTPClient)获取 JSON 数据
2.  [然后使用JSON.parse()](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Global.JSON)将响应转换为 JSON 对象

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:08:48.357

在 JavaScript 中你可以使用这个：[JSON in JavaScript](http://www.json.org/js.html)

并且在 PHP 中存在内置函数：[PHP 中的 JSON](http://us.php.net/json_encode)

当您使用 JavaScript 时，您可以通过简单的 Ajax 请求获取数据。

# iphone - 如何在按下按钮之前停止响应摇晃？

> ID：11865161
> 
> 赞同：0
> 
> 时间：2012-08-08T13:06:03.293
> 
> 标签：iphone, objective-c, ios, xcode, motion

我目前正在制作一个 iPhone 应用程序，并且动画会对轻微的震动做出反应，这是我的代码：

```
static BOOL SJHShaking(UIAcceleration* last, UIAcceleration* current, double threshold) {
double
deltaX = fabs(last.x - current.x),
deltaY = fabs(last.y - current.y),
deltaZ = fabs(last.z - current.z);

return
(deltaX > threshold && deltaY > threshold) ||
(deltaX > threshold && deltaZ > threshold) ||
(deltaY > threshold && deltaZ > threshold);
}

- (id)initWithFrame:(CGRect)frame
{
if (self) {
    // Initialization code
}
return self;
}

-(void)awakeFromNib{
[super awakeFromNib];
[UIAccelerometer sharedAccelerometer].delegate = self;
}

- (void) accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration      
*)    acceleration {
if (self.lastAction) {
    if (hasBeenShaken && SJHShaking (self.lastAction, acceleration, 0.7)) {
        hasBeenShaken = YES;
        animation.animationImages= [NSArray arrayWithObjects:
                                    [UIImage imageNamed:@"Frame01.png"],
                                    [UIImage imageNamed:@"Frame02.png"],
                                    [UIImage imageNamed:@"Frame03.png"],
                                    [UIImage imageNamed:@"Frame04.png"],
                                    [UIImage imageNamed:@"Frame05.png"],
                                    [UIImage imageNamed:@"Frame06.png"],
                                    [UIImage imageNamed:@"Frame07.png"],
                                    [UIImage imageNamed:@"Frame08.png"],
                                    [UIImage imageNamed:@"Frame09.png"],
                                    [UIImage imageNamed:@"Frame010.png"],
                                    [UIImage imageNamed:@"Frame011.png"],
                                    [UIImage imageNamed:@"Frame012.png"],
                                    [UIImage imageNamed:@"Frame013.png"],
                                    nil];

        [animation setAnimationRepeatCount:1];
        animation.animationDuration = 1;
        [animation startAnimating];
        [self performSelector:@selector(didFinishAnimating) withObject:nil     
        afterDelay:1.0];
        bottle.hidden=YES;

        NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/champagne   
        animate.wav", [[NSBundle mainBundle] resourcePath]]];
        NSError *error;
        audioPlayer2 = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
        audioPlayer2.numberOfLoops = 0;
        audioPlayer2.volume = 1;
        if (audioPlayer2 == nil);
        else
            [audioPlayer2 play];
        [audioPlayer3 stop];
        back.hidden = YES;

        } else if (hasBeenShaken && !SJHShaking(self.lastAction, acceleration, 0.2)) {
        hasBeenShaken = NO;
        }
        }

        self.lastAction = acceleration;
         }

        /*
        // Only override drawRect: if you perform custom drawing.
       // An empty implementation adversely affects performance during animation.
         - (void)drawRect:(CGRect)rect
       {
       // Drawing code
        }
        */

        -(void)dealloc{
       [UIAccelerometer sharedAccelerometer].delegate = nil;
        } 
```

在同一个视图控制器上，我在动画之前还有另一个页面，现在我需要他们按下“开始”按钮，然后他们可以摇晃，但在他们按下“开始”之前，如果他们摇晃，什么都不会发生。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:08:23.650

只需在他们按下按钮时设置一个变量。然后在判断是否发生抖动的方法中，首先检查按钮是否被点击。

例如，在 didAccelerate 方法中，您可以先检查按钮是否被按下，如果没有，则返回。

# java - Netty：在messageReceived中获取远程IP地址

> ID：11865165
> 
> 赞同：13
> 
> 时间：2012-08-08T13:06:20.303
> 
> 标签：java, networking, ip, netty

在我的班级（扩展 SimpleChannelHandler）中，我试图获取最初发送消息的 ip。

```
@Override
public void messageReceived(ChannelHandlerContext ctx, MessageEvent ev) throws Exception {
    String host = ((InetSocketAddress)ctx.getChannel().getRemoteAddress()).getAddress().getHostAddress();
    int port = ((InetSocketAddress)ctx.getChannel().getRemoteAddress()).getPort();
    LOG.debug(String.format("host:%s port:%d", host, port));

    .. 
```

这将打印 ip 10.0.0.1（网关），而不是正确的客户端地址 (10.52.45.4)。

有什么方法可以获取我想要的 ip，或者网络配置有问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T05:47:41.663

我猜你看到网关 ip 因为网关做了某种 NAT。如果是这样，您唯一的机会就是在您的协议中包含源 IP 地址并从那里提取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-04T00:50:48.407

以 10.0.0 开头的 IP 地址是内部 IP 地址，您可能将它连接到同一 WiFi 路由器上的某个东西。要获得 10.52.45.4 ip，您必须在路由器外部进行连接。（不要忘记端口转发）

# asp.net-mvc - UpdateModel 没有更新我的模型

> ID：11865169
> 
> 赞同：0
> 
> 时间：2012-08-08T13:06:25.967
> 
> 标签：asp.net-mvc, razor, updatemodel

我必须有一些错误的设置，因为我无法让 UpdateModel 函数根据通过 FormCollection 传入的信息正确更新我的模型。

我的视图看起来像：

```
@model NSLM.Models.Person
@{
    ViewBag.Title = "MVC Example";
}
<h2>My MVC Model</h2>
<fieldset>
    <legend>Person</legend>
    @using(@Html.BeginForm())
    {
        <p>ID: @Html.TextBox("ID", Model.ID)</p>
        <p>Forename: @Html.TextBox("Forename", Model.Forename)</p>
        <p>Surname: @Html.TextBox("Surname", Model.Surname)</p>
        <input type="submit" value="Submit" />
    }  
</fieldset> 
```

我的模型是：

```
 namespace NSLM.Models
    {
        public class Person
        {
            public int ID;
            public string Forename;
            public string Surname;
        }
    } 
```

我的控制器是：

```
 [HttpPost]
        public ActionResult Details(FormCollection collection)
        {
            try
            {
                // TODO: Add update logic here                
                Models.Person m = new Models.Person();

                // This doesn't work i.e. the model is not updated with the form values
                TryUpdateModel(m);

                // This does work 
                int.TryParse(Request.Form["ID"], out m.ID);
                m.Forename = Request.Form["Forename"];
                m.Surname = Request.Form["Surname"];

                return View(m);
            }
            catch
            {
                return View();
            }
        } 
```

正如您所看到的，如果我手动分配每个属性它工作正常，那么我没有设置什么可以让模型使用表单值更新？

谢谢，

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:12:12.067

到调用到达 action 方法时，任何自动模型绑定都已执行。尝试更改您的操作方法的输入参数以接受 Person 实例。在这种情况下，模型绑定器将尝试创建实例并根据表单传递的值填充它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T06:36:55.867

用模型中的属性替换字段，即：

```
namespace NSLM.Models
{
    public class Person
    {
        public int ID {get; set;}
        public string Forename {get; set;}
        public string Surname {get; set;}
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:18:44.227

尝试这个 ：

看法 ：

```
@model NSLM.Models.Person
@{
    ViewBag.Title = "MVC Example";
}
<h2>My MVC Model</h2>
<fieldset>
    <legend>Person</legend>
    @using(@Html.BeginForm())
    {
         @Html.HiddenFor(model => model.ID)

        <p>Forename: @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </p>
        <p>Surname: @Html.EditorFor(model => model.Surname)
            @Html.ValidationMessageFor(model => model.Surname)
        </p>
        <input type="submit" value="Submit" />
    }  
</fieldset> 
```

控制器 ：

```
[HttpPost]
public ActionResult Details(Person p)
{
    if (ModelState.IsValid)
    {
        db.Entry(p).State = EntityState.Modified;
        db.SaveChanges();
        return RedirectToAction("Index");
    }
    return View(p);
} 
```

# java - 通过 SSL 通过 Java 连接到 Web 服务可以从控制台而不是 Tomcat

> ID：11865170
> 
> 赞同：0
> 
> 时间：2012-08-08T13:06:30.277
> 
> 标签：java, tomcat, ssl, https

我有以下内容：

*   托管在受信任的企业域 Intranet 上的 Web 服务（托管在 IIS 中）
*   用于测试与 Web 服务的连接的 Java 控制台应用程序
*   托管在 Tomcat 中的 Java Web 应用程序（在 localhost 上运行）

我可以通过控制台应用程序成功地向 Web 服务发送和接收数据。但是，当我在 Tomcat 中托管的 Web 应用程序中使用完全相同的代码和库时，我收到 SSL 证书错误，说明：

```
suncertpathbuilderexception: unable to find valid certification path to requested target 
```

它可以通过控制台工作但不能通过本地主机上的 Tomcat 工作的任何原因。对于它的价值，当托管在 Tomcat 中时，它在我的开发（非本地主机）框上也不起作用。也许我在启动没有受信任证书的 Tomcat 时针对不同的 JRE？

该证书是由我公司受信任的企业权威签署的，所以我猜它是一种企业范围的自签名证书。当我签入管理控制台证书管理单元时，证书颁发机构在 Windows 受信任的证书颁发机构中注册。我怀疑这并不重要。

我是否必须使用`keytool`生成证书来添加到将托管此 Tomcat 应用程序的每台服务器上的信任库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:27:52.667

您的 Tomcat 安装可能使用了另一个 JVM。您需要检查您的安装。检查 JAVA_HOME 和 JRE_HOME 指向的位置。

JVM 不使用 Windows 受信任的证书颁发机构。

您必须使用 keytool 在每台服务器上导入您公司的受信任企业权威证书，但您不需要生成任何证书。

# javascript - 从类函数中删除类变量

> ID：11865171
> 
> 赞同：0
> 
> 时间：2012-08-08T13:06:33.843
> 
> 标签：javascript, javascript-events

我正在制作一个将被多次重新创建的课程，为了节省内存，我需要彻底删除它。基本上我需要尽可能访问它的包含变量。

这是示例：

```
function example(){
  this.id=0;
  this.action=function(){alert('tost');}
  this.close=function(){ delete this;}
}

var foo=new example(); 
```

**我的问题是：**

如何从**示例函数中访问****foo 变量**以便删除它？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:02:30.943

事实是您**不能**在 Javascript 中删除对象。

然后你使用**删除**操作符，它只接受某个对象的属性。因此，当您使用 delete 时，通常您必须向它传递类似`obj.p`. 然后你只传递一个变量名，实际上这意味着“全局对象的属性”，并且`delete p`与`delete window.p`. 不确定内部发生了什么，`delete this`但结果浏览器只是跳过它。

现在，我们实际删除的是`delete`什么？我们删除对对象的引用。这意味着对象本身仍然存在于内存中。要消除它，您必须删除对具体对象的**所有引用。**无处不在——来自其他对象、闭包、事件处理程序、链接数据，所有这些。但是 object 本身并没有关于它的所有 this 引用的信息，所以**没有办法从 object 本身中删除 object**。看看这段代码：

```
var obj = <our object>;
var someAnother = {
       ...
       myObjRef: obj
       ...
 }
var someAnotherAnother = {
       ...
       secondRef : obj
       ...
} 
```

要从内存中删除 obj ，您必须删除`someAnother.myObjRef` **和** `someAnoterAnother.secondRef`。您只能从了解所有这些的程序部分来做到这一点。

如果我们到处都有任意数量的引用，我们如何删除一些东西？有一些方法可以解决这个问题：

*   从那里只在程序中做一个点，这个对象将被引用。事实上 - 我们的程序中只有一个引用。然后我们删除它——对象将被垃圾收集器杀死。这是上面描述的“代理”方式。这有其缺点（语言本身尚不支持，并且需要将cool and nice 更改`obj.x=1`为`obj.val('x',1)`。此外，这不太明显，实际上您将对obj 的所有引用更改为对proxy 的引用。而proxy 将始终保留在内存中对象。根据对象的大小、对象的数量和实现，这可以给你带来一些利润或不给你一些利润。或者甚至让事情变得更糟。例如，如果你的对象的大小接近代理本身的大小 - 你将一文不值。

*   在每个使用对象的地方添加一个代码，该代码将删除对该对象的引用。它使用起来更加清晰和简单，因为如果您`obj.close()`在某个地方调用 a - 您已经知道删除它所需的一切。而不是`obj.close()`杀死对它的引用。一般来说 - 将此引用更改为其他内容：

    ```
     var x = new obj; //now our object is created and referenced
      x = null;// now our object **obj** still im memory 
      //but doest have a references to it 
      //and after some milliseconds obj is killed by GC...

      //also you can do delete for properties
      delete x.y; //where x an object and x.y = obj 
    ```

    但是使用这种方法，您必须记住，引用可能位于非常难以理解的地方。例如：

    ```
     function func() {
         var x= new obj;// our heavy object
         ...
         return function result() {
             ...some cool stuff..
         }
      } 
    ```

    引用存储在`result`函数的闭包中，当您对某个地方有引用时，obj 将保留在内存中`result`。

*   很难想象物体本身很重，最现实的场景 - 你里面有一些数据。在这种情况下，您可以向将清理此数据的对象添加清理功能。假设你有一个巨大的缓冲区（例如数字数组）作为对象的属性，如果你想释放内存 - 你可以清除这个缓冲区，内存中仍然有几十个字节的对象。并记住将您的函数放入原型中以保持实例较小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:09:28.243

`window.foo`将访问该全局变量。

```
this.close=function(){ delete window.foo; } 
```

但是，我记得[全局变量 delete 和 window 有一些可疑之处](http://perfectionkills.com/understanding-delete/)，因此您可能希望不这样做，并简单地使用`window.foo = null;`例如。

如果您想访问在另一个函数中定义的变量，您需要阅读[这个 SO question](https://stackoverflow.com/q/407048/324969)的答案。

由于您想要的是允许垃圾收集器释放该对象，因此您需要确保没有对该对象的引用。这可能非常棘手（即不可能），因为操作对象的代码可以通过全局和局部变量以及属性对其进行多次引用。

您可以通过创建代理来访问它来防止直接引用该对象，不幸的是，javascript 不支持动态 getter 和 setter（也称为 catch-alls）很好（在某些浏览器上您可能会实现它，[请参阅这个 SO question](https://stackoverflow.com/questions/994143/javascript-getter-for-all-properties)） ，因此您不能轻松地将所有字段和方法（无论如何都只是字段）访问重定向到底层对象，特别是如果底层对象添加了许多字段并动态地从中删除（即`this.anewfield = anewvalue`）。

这是一个简单的代理（[jsfiddle.net](http://jsfiddle.net/FuLyb/)上的代码）：

```
function heavyobject(destroyself, param1, param2) {
    this.id=0;
    this.action=function(){alert('tost ' + param1 + "," + param2);};
    this.close=function(){ destroyself(); }
}

function proxy(param1, param2) {
    object = null;
    // overwrites object, the only reference to
    // the heavyobject, with a null value.
    destroyer = function() { object = null; };
    object = new heavyobject(destroyer, param1, param2);
    return function(fieldname, setvalue) {
        if (object != null) {
            if (arguments.length == 1)
                return object[fieldname];
            else
                object[fieldname] = setvalue;
        }
    };
}
var foo = proxy('a', 'b');
alert(foo("action")); // get field action
foo("afield", "avalue"); // set field afield to value avalue.
foo("action")(); // call field action
foo("close")(); // call field close
alert(foo("action")); // get field action (should be 'undefined'). 
```

它通过返回一个函数来工作，当使用单个参数调用该函数时，会在包装对象上获取一个字段，并在使用两个参数调用时设置一个字段。它的工作原理是确保对重对象的唯一引用是函数中的`object`局部变量`proxy`。

重对象中的代码绝*不能*泄漏`this`（从不返回它，从不返回包含对 的引用的函数`var that = this`，从不将其存储到另一个变量的字段中），否则可能会创建一些指向重对象的外部引用，从而阻止其删除。

如果heavyobject的构造函数`destroyself()`从构造函数内部（或构造函数调用的函数）调用，它不会有任何效果。

另一个更简单的代理，它将为您提供一个空对象，您可以在其上添加字段、读取字段和调用方法。我很确定有了这个，没有外部参考可以逃脱。

代码（也在[jsfiddle.net](http://jsfiddle.net/X3BwQ/)上）：

```
function uniquelyReferencedObject() {
    object = {};
    f = function(field, value) {
        if (object != null) {
            if (arguments.length == 0)
                object = null;
            else if (arguments.length == 1)
                return object[field];
            else
                object[field] = value;
        }
    };
    f.destroy = function() { f(); }
    f.getField = function(field) { return f(field); }
    f.setField = function(field, value) { f(field, value); }
    return f;
}
// Using function calls
o = uniquelyReferencedObject();
o("afield", "avalue");
alert(o("afield")); // "avalue"
o(); // destroy
alert(o("afield")); // undefined
// Using destroy, getField, setField
other = uniquelyReferencedObject();
other.setField("afield", "avalue");
alert(other.getField("afield")); // "avalue"
other.destroy();
alert(other.getField("afield")); // undefined 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:13:11.890

这是一个关于 JavaScript 删除运算符的一些非常详细的信息的链接。

[http://perfectkills.com/understanding-delete/](http://perfectionkills.com/understanding-delete/)**

# javascript - BIRT 报告设计器问题？

> ID：11865172
> 
> 赞同：-1
> 
> 时间：2012-08-08T13:06:39.940
> 
> 标签：javascript, birt

我的报告中有一个参数只能是 2 个值。全部或一个数字。

我希望用户能够在此处键入 ALL，或者像 12345678 这样的数字。这可能吗？我希望 TextBox 拒绝任何不属于单词 ALL 或数字的输入。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-09T06:34:44.403

Yes you can do it,How you passed the parameters? If you are passing parameters using jsp ,you can do it using java script validation

cheers

# playframework - flash.error 有什么替代方法吗？

> ID：11865173
> 
> 赞同：0
> 
> 时间：2012-08-08T13:06:41.443
> 
> 标签：playframework, playframework-1.x

Tomcat 7 不支持 play-framework`#{if flash.success}`标签。我已经在几个不同的服务器上进行了测试。是否有任何其他解决方法来显示成功/错误消息？

谢谢。

编辑：我将tomcat降级到v6。事实证明我仍然无法显示错误。我认为这是因为我的服务器是如何设置的。Tomcat 位于 IIS 后面，通过 Boncode AJP 连接器连接。

# java - 将数据保存到托管的 .dat 文件

> ID：11865180
> 
> 赞同：0
> 
> 时间：2012-08-08T13:06:50.337
> 
> 标签：java, file, file-io

我正在使用这段代码将数据保存到 .dat 文件中：

```
void saveFile () {

    try {
        FileOutputStream fos = new FileOutputStream ("File.dat", true);
        DataOutputStream dos = new DataOutputStream (fos);
        dos.writeUTF (saves[count][0]);
        dos.writeUTF (saves[count][1]);
        dos.writeUTF (saves[count][2]);
        dos.writeUTF (saves[count][3]);
        dos.writeUTF (saves[count][4]);
        dos.writeUTF (saves[count][5]);
        JOptionPane.showMessageDialog (this, "The Record has been Saved Successfully",
                    "Record Saved", JOptionPane.PLAIN_MESSAGE);
        txtClear ();
        dos.close();
        fos.close();
    }
    catch (IOException ioe) {
        JOptionPane.showMessageDialog (this, "There are Some Problem with File",
                    "Problem", JOptionPane.PLAIN_MESSAGE);
    }

} 
```

我需要将 .dat 文件托管在某个在线域上 说[http://Domain.com/File.dat](http://Domain.com/File.dat) 我需要对这段代码做什么才能完成保存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:12:40.440

1-“域”在同一台服务器上管理，然后您只需将文件放在正确的位置（通常在“www”文件夹下，检查您的网络服务器配置）

2-这是另一台计算机，那么您必须将文件传输到那里（FTP？另一个使用套接字的Java代码？主机提供的API？...）

* * *

无关，但你应该`close`在`Streams`一个`finally`街区

```
xxxxxxxStream s = null;
try {
  s = new xxxxxxxStream();
} catch (WhateverException we) {
  ...
} finally {
  s.close();
} 
```

# web-applications - 不使用标签的单页应用程序

> ID：11865182
> 
> 赞同：2
> 
> 时间：2012-08-08T13:06:52.637
> 
> 标签：web-applications, hashtag

**是否可以（以及如何）在不**使用标签的情况下进行单页应用程序？

例如，在 Google+ 上，我们可以点击一些链接，然后 URL 会发生变化（但没有标签）但是我们看不到新页面的加载，只有页面的一部分正在加载和刷新。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:47:50.590

答案是使用 pushState。谢谢@Len。

[http://www.seomoz.org/blog/create-crawlable-link-friendly-ajax-websites-using-pushstate](http://www.seomoz.org/blog/create-crawlable-link-friendly-ajax-websites-using-pushstate) http://html5.gingerhost.com/

# c - SDL_init() 导致 c 文件不输出任何内容

> ID：11865186
> 
> 赞同：4
> 
> 时间：2012-08-08T13:07:11.530
> 
> 标签：c, sdl

我有以下代码。

```
#include <stdio.h>
#include <SDL/SDL.h>
#include <SDL/SDL_thread.h>

#ifdef __MINGW32__
#undef main
#endif

int main (int argc, char **argv)
{
    printf ("Kishore\n");

    if (SDL_Init (SDL_INIT_VIDEO | SDL_INIT_AUDIO | SDL_INIT_TIMER))
    {
        fprintf (stderr, "SDL: could not able to initialize SDL : %s", SDL_GetError());
        exit (1);
    }
} 
```

能够编译没有任何问题。但是，当我运行可执行文件时，它没有给出任何输出。使用的 gcc 命令：

```
gcc -lSDL test.c -o test.exe 
```

我有什么遗漏吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T16:44:12.390

您写入的所有内容`stdout`并被`stderr`重定向到文件中`stdout.txt`，并`stderr.txt`分别重定向到 exe 所在的位置。

为了避免这种重定向行为，您必须在调用 SDL_Init*之后*包含以下两行。

```
freopen( "CON", "w", stdout );
freopen( "CON", "w", stderr ); 
```

如果这不起作用，您可以查看[SDL 常见问题解答](http://sdl.beuc.net/sdl.wiki/FAQ_Console)，还有更多说明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T13:58:15.527

Windows 命令行程序使用`main`入口点并将文件句柄（通过 printf 语句）输出`stdout`到`stderr`控制台窗口。Windows GUI 程序使用入口点并且`WinMain`不设置文件句柄以转到控制台窗口（因为它们不初始化要输出到的控制台窗口），这就是您看不到语句输出的原因。`stdout``stderr``printf`

POSIX (Linux/Solaris/BSD/...) 使用`main`控制台和 GUI 应用程序的入口点，`stdout`并`stderr`正确设置它们，以便它们出现在终端/控制台窗口中。

SDL 是一种简化图形程序的跨平台 API，因此在 Windows 上，它使用`WinMain`入口点，因此它可以创建一个显示图形的窗口，而不会在其后面出现控制台窗口。SDL`WinMain`调用该`main`函数，因此您可以`main`在所有平台上使用入口点。

在过去，我发现：

```
test.exe | cat 
```

工作，但YMMV。

# internet-explorer - windows 8 internet explorer 10还有quirksmode吗？

> ID：11865188
> 
> 赞同：12
> 
> 时间：2012-08-08T13:07:13.183
> 
> 标签：internet-explorer, windows-8, quirks-mode

我想知道 Windows 8 上的 IE10 是否仍然有 Quirksmode。因为我们有一个 web 应用程序（仍然：|）可以与 quirksmode 一起使用，我想知道它是否仍然可以在 Windows 8 上运行。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-08T13:24:59.440

IE10 有两种怪异模式。新的称为“Quirks 模式”，其行为与 Firefox 和 Webkit 中的 quirks 模式完全相同 - 您可以通过删除`<!doctype>`. 所有 HTML5 和其他新功能都在此模式下工作。仅存在一些轻微的规范违规（不需要 CSS 尺寸等单位）。

旧的 quirks 模式称为“IE5 Quirks 模式”，其行为与 IE9 中的 quirks 模式相同。`X-UA-Compatible: IE=5`您可以使用HTTP 标头或`<meta http-equiv=X-UA-Compatible content="IE=5">`标签打开它。在这种模式下，IE 将页面呈现为旧版 IE5。

为了更好的理解，看看 IE 如何在新的 quirks 模式 ![新的怪癖模式](../Images/7102f1fa18b2ce006554f3890bc92006.png) 和 IE5 quirks 模式下呈现 Acid2 测试： ![IE5 怪癖模式](../Images/cf4c29e5cc2c1ff751152ceee007f21d.png)

如果您的应用程序也可以在 Chrome 和 Firefox 中运行，您可能需要使用 Quirks 模式；如果只支持 IE 的 quirks 模式，打开 IE5 quirks 模式。

来源：http: [//blogs.msdn.com/b/ie/archive/2011/12/14/interoperable-html5-quirks-mode-in-ie10.aspx](http://blogs.msdn.com/b/ie/archive/2011/12/14/interoperable-html5-quirks-mode-in-ie10.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T13:15:34.123

**Quirks**模式在 Windows 8 上的 IE10 开发人员工具（[**文档模式**](http://msdn.microsoft.com/en-us/library/dd565628%28v=vs.85%29.aspx#bdmodes)[）中列出 - 所以是的，它似乎是受支持的](http://blogs.msdn.com/b/ie/archive/2011/12/14/interoperable-html5-quirks-mode-in-ie10.aspx)。

# c - 为我自己的 C 库创建手册页

> ID：11865189
> 
> 赞同：3
> 
> 时间：2012-08-08T13:07:19.383
> 
> 标签：c, comments, manpage

在一些 C 源文件中，我看到了以下格式的注释：

```
/**
 *  @bla bla bla
 *  bla bla..
 */ 
```

有人告诉我，如果我正确地注释了我的`.c`/`.h`文件，那么使用某个工具，我可以自动从这些文件中自动生成手册页。

有人知道这是否可能吗？（怎么做，我应该使用哪个软件等）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T13:09:27.457

看起来你正在寻找[doxygen](http://www.doxygen.nl/index.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T13:10:09.983

您看到的那些评论可能是[doxygen](http://www.doxygen.nl/index.html)标记。这可以生成 man、HTML 和各种其他格式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T13:09:41.190

试试 doxygen

[http://www.doxygen.nl/index.html](http://www.doxygen.nl/index.html)

您显示的语法是 doxygen。AFAIK，它可以生成手册页（以及 HTML 和 LaTeX）。

# c# - 使用多个属性的高效 Hierarchal Linq 查询

> ID：11865191
> 
> 赞同：1
> 
> 时间：2012-08-08T13:07:22.113
> 
> 标签：c#, linq, collections

我有相当多的`foo { int id, int parentid, string name}`.

我正在寻找一个对象列表，`foo`其中对象的名称为“bar3”，并且是名为“bar2”的对象的子对象，该对象是 ID 为 的对象的子对象`1`。

我应该使用什么样的集合（我一直在使用查找和字典，但并没有取得很大的成功），我应该如何编写它以从中产生有效的功能？大约有 30K 个`foo`对象，我的方法快窒息而死。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:46:30.850

如果我真的必须坚持这个布局`foo`，我真的必须尽可能快地进行查找（我不关心内存大小，并且会重复重用相同的对象，所以设置一组的成本内存中的大型结构是值得的），那么我会这样做：

```
var byNameAndParentLookup = fooSource.ToLookup(f => Tuple.Create(f.parentid, f.name)); //will reuse this repeatedly
var results = byNameAndParentLookup[Tuple.Create(1, "bar2")].SelectMany(f => byNameAndParentLookup[Tuple.Create(f.id, "bar3")]); 
```

也就是说，如果我要将树数据存储在内存中，我更愿意创建一个树结构，其中每个`foo`都有一个`children`集合（可能是一个以名称为键的字典）。

编辑：解释一下。

```
fooSource.ToLookup(f => Tuple.Create(f.parentid, f.name)) 
```

遍历`fooSource`（无论我们的`foo`对象来自何处）中的所有项目，并为每个项目创建一个元组 the`parentid`和`name`. 这用作查找的键，因此对于每个 parentid-name 组合，我们可以使用该组合检索 0 个或多个 foo 对象。（这将使用默认字符串比较，如果您想要其他内容（例如不区分大小写），请创建一个`IEqualityComparer<Tuple<int, string>>`执行您想要的比较并使用的实现`.ToLookup(f => Tuple.Create(f.parentid, f.name), new MyTupleComparer())`）。

第二行可以分解为：

```
var partWayResults = byNameAndParentLookup[Tuple.Create(1, "bar2")];
var results = partWayResults.SelectMany(f => byNameAndParentLookup[Tuple.Create(f.id, "bar3")]); 
```

第一行只是简单地对我们的查找进行搜索，因此它返回了父 ID 为 1 且名称为“bar2”的那些 foo 对象的枚举。

`SelectMany`获取枚举或可查询的每个项目，并计算返回枚举的表达式，然后将其展平为单个枚举。

换句话说，它的工作原理有点像这样：

```
public static SelectMany<TSource, TResult>(this IEnumerable<TSource> source, Func<TSource, IEnumerable<TResult>> func)
{
  foreach(TSource item in source)
    foreach(TResult producedItem in func(item))
      yield return producedItem;
} 
```

在我们的例子中，通过的表达式获取在第一次查找中找到的元素的 id，然后查找任何以它为 parentid 并且名称为“bar2”的元素。

因此，对于每个 parentid 为 1 且名称为 bar2 的项目，我们找到每个项目的第一个项目的 id 作为其 parentid 和名称 bar3。这就是想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:33:57.437

看看这个：[QuickGraph](http://quickgraph.codeplex.com/) 我从来没有真正使用过它，但它似乎有据可查。或者，您可以尝试[C5 通用集合库](http://www.itu.dk/research/c5/)

我从这个[胎面得到这个](https://stackoverflow.com/questions/66893/tree-data-structure-in-c-sharp)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T13:19:34.517

我可以建议您先按 parentId 对所有项目进行分组，然后对其应用条件。首先，您需要找到带有 bar1 元素的组，而不是选择其所有子元素并尝试查找名称为 bar 2 的元素...

我可以建议这样的解决方案，它不是最好的，但它有效（thirdLevelElements 将包含所需的元素）。我用 foreachs 说清楚了，这个逻辑可以写在 linq 语句中，但对我来说理解起来会很复杂。

```
var items = new[]
                            {
                                new Foo{id=1,parentid = 0, name="bar1"},
                                new Foo{id=2,parentid = 1, name="bar2"},
                                new Foo{id=3,parentid = 2, name="bar3"},
                                new Foo{id=4,parentid = 0, name="bar12"},
                                new Foo{id=5,parentid = 1, name="bar13"},
                                new Foo{id=6,parentid = 2, name="bar14"},
                                new Foo{id=7,parentid = 2, name="bar3"}
                            };

            var groups = items.GroupBy(item => item.parentid).ToList();
            var firstLevelElements = items.Where(item => item.name == "bar1");
            List<Foo> secondLevelElements = new List<Foo>();
            foreach (var firstLevelElement in firstLevelElements)
            {
                secondLevelElements.AddRange(groups[firstLevelElement.id]
                    .Where(item => item.name == "bar2"));
            }
            List<Foo> thirdLevelElements = new List<Foo>();
            foreach (var secondLevelElement in secondLevelElements)
            {
                thirdLevelElements.AddRange(groups[secondLevelElement.id]
                    .Where(item => item.name == "bar3"));
            } 
```

# r - 在数据框上使用 If/Else

> ID：11865195
> 
> 赞同：37
> 
> 时间：2012-08-08T13:07:37.233
> 
> 标签：r

我有一个看起来像的数据集

```
data<-c(0,1,2,3,4,2,3,1,4,3,2,4,0,1,2,0,2,1,2,0,4)
frame<-as.data.frame(data) 
```

我现在想在这个数据框中创建一个新变量。如果“数据”列报告的数量为 2 或更多，我希望它在该行中有“2”，如果有 1 或 0（例如前两个观察值），我希望新变量有“1”表示该观察。

我正在尝试使用以下代码执行此操作：

```
frame$twohouses<- if (any(frame$data>=2)) {frame$twohouses=2} else {frame$twohouses=1} 
```

但是，如果我运行这 3 行脚本，“twohouses”列中的每个观察值都用 2 编码。但是其中一些应该用 1 编码。

所以我的问题是：我的 if else 行或脚本做错了什么？或者有没有其他方法可以做到这一点。

我的问题与此类似： [Using ifelse on factor in R](https://stackoverflow.com/questions/11275120/using-ifelse-on-factor-in-r)

但没有人回答这个问题。

提前谢谢了！

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-08-08T13:11:47.323

使用`ifelse`：

```
frame$twohouses <- ifelse(frame$data>=2, 2, 1)
frame
   data twohouses
1     0         1
2     1         1
3     2         2
4     3         2
5     4         2
...
16    0         1
17    2         2
18    1         1
19    2         2
20    0         1
21    4         2 
```

* * *

`if`和的区别`ifelse`：

*   `if`是一个控制流语句，以单个逻辑值作为参数
*   `ifelse`是一个向量化函数，将向量作为其所有参数。

的帮助页面`if`，可通过以下方式访问，`?"if"`也将指向您`?ifelse`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T13:11:50.160

试试这个

```
frame$twohouses <- ifelse(frame$data>1, 2, 1)
 frame
   data twohouses
1     0         1
2     1         1
3     2         2
4     3         2
5     4         2
6     2         2
7     3         2
8     1         1
9     4         2
10    3         2
11    2         2
12    4         2
13    0         1
14    1         1
15    2         2
16    0         1
17    2         2
18    1         1
19    2         2
20    0         1
21    4         2 
```

# java - 从 swing 程序中获得意外的输出

> ID：11865197
> 
> 赞同：0
> 
> 时间：2012-08-08T13:07:42.440
> 
> 标签：java, swing, jframe, fullscreen, translucency

在下面的代码中，为什么我得到一个不可见的窗口？做 `setUndecorated()`什么以及它用于何处。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Toolkit;

import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class UsingJLayer {

UsingJLayer()
{
    JFrame jfrm=new JFrame("Picasa Viewer");
    jfrm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    Dimension dim=Toolkit.getDefaultToolkit().getScreenSize();
    jfrm.setSize(dim);
    jfrm.setUndecorated(true);
    jfrm.setBackground(new Color(0,100,0,0));

    jfrm.setVisible(true);

}
public static void main(String[] args) {
    //JFrame.setDefaultLookAndFeelDecorated(true);
    SwingUtilities.invokeLater(new Runnable(){public void run(){new UsingJLayer();}});

} 
```

}

其次，如果我注释掉`jfrm.setUndecorated(true)`并改为使用`JFrame.setDefaultLookAndFeelDecorated(true);`，那么我会按预期得到一个半透明的窗口。那么，什么是`setUndecorated()`和`JFrame.setDefaultLookAndFeelDecorated(true);`。我必须使用其中一个，否则会引发异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:32:50.103

在框架上调用 SetUndecorated 以删除标题栏/最大化按钮/等。这是一个很好的例子：[http ://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shape_windows.html#shape](http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html#shaped)

# regex - 正则表达式匹配两个确切的键=值，无论顺序如何

> ID：11865200
> 
> 赞同：-1
> 
> 时间：2012-08-08T13:07:48.430
> 
> 标签：regex

首先，我知道我的问题可能与[这个](https://stackoverflow.com/questions/7138159/how-to-create-a-regex-that-will-match-regardless-of-the-sequence-of-characters)问题重复，但我需要的解决方案必须 100% 正确。而且我不太擅长正则表达式来实现这一点:)

我有 maaaaaaaaany 请求，其中传递的参数很少，例如`...&params=key1=value1|key2=value2|...`. 参数可能很少，我不知道顺序。我需要的是捕获包含精确`key1=myValue1`和的请求`key2=myValue2`，但它们可以是：

*   `key1=myValue1|key2=myValue2`
*   `key2=myValue2|key1=myValue1`
*   `key1=myValue1|key3=myValue3|key2=myValue2`

甚至更复杂。已知情况：

*   `params`只是请求的一部分，所以它可以是`?something=other&params=key1=value1|key2=value2`或`?params=key1=value1|key2=value2&something=other`
*   内部`params`参数没有白色字符，只有成对的`key=value`'s（用 分隔`|`）

需要明确的是：我**知道**两对 key=value 所以正则表达式仅用于匹配包含这 2 对的请求。请求可以以不同的方式排序。我无权访问请求本身，我只处理保存的数据（作为字符串）。

将使用正则表达式的语言是 PHP。但是我无法访问完整的代码，因为我们在 Web 应用程序界面中声明了正则表达式。

我想我需要两个积极的前瞻，就像`(?=[^\s]*(key1=myValue1)[^\s]*){1}(?=[^\s]*(key2=myValue2)[^\s]*){1}`但我无法让它工作并且时钟在滴答作响......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:10:37.907

使用两个前瞻：

```
^(?=.*\bkey1=myValue1\b)(?=.*\bkey2=myValue2\b) 
```

`\b`单词边界锚确保仅匹配整个字母数字“单词” 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:14:50.987

这是针对您的特定问题的非常精细的正则表达式。 [在此处查看现场演示。](http://rubular.com/r/3AEbqK66WA)

```
(?:^\?|&)params=(?:|[^&]*\|)([^=]+)=([^|&]*)(?=[^&]*\|\1=\2(?:[|&]|$))
|               |           |       |          |    | |    |
|               |           |       |          |    | |    Ensure the value
|               |           |       |          |    | |    is followed by a
|               |           |       |          |    | |    '|' or '&' or the
|               |           |       |          |    | |    end-of-string so
|               |           |       |          |    | |    as not to match
|               |           |       |          |    | |    a substring.
|               |           |       |          |    | |
|               |           |       |          |    | Use backreferences to
|               |           |       |          |    | refer to the preceding
|               |           |       |          |    | key/value pair found.
|               |           |       |          |    |
|               |           |       |          |    Logically it must be
|               |           |       |          |    true that the second
|               |           |       |          |    pair follows a '|'.
|               |           |       |          |
|               |           |       |          Keep searching for the
|               |           |       |          duplicate key/value pair as
|               |           |       |          long as we don't hit a '&'.
|               |           |       |
|               |           |       Consider all characters valid for a
|               |           |       value until we hit a '|' or '&'.  Also,
|               |           |       allow empty values (*).
|               |           |
|               |           Consider all characters valid for a key until we
|               |           hit a '='.  Therefore, expect having an odd
|               |           number of key/value entities to cause a problem.
|               |
|               Start searching immediately following the "params=" or after
|               a string of non-'&' characters followed by a '|'.
|
Start at the beginning of the string with a '?', or somewhere (anywhere) in
the string with a '&'. 
```

与其他解决方案相比，它的优势包括更严格地查找完整的键（而不是子字符串），当然，通过使用反向引用，根本不需要指定特定的键。

笔记：

1.  演示中的`\r\n`s 仅用于演示目的。
2.  不可能在环视断言中捕获；因此第一组匹配没有环视断言。
3.  此正则表达式不会防止 a`value1=key1`可能巧合匹配 a的可能性`key1=value1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:12:13.830

这适合吗？

```
(key[\d]+=[^|]+) 
```

在不知道您选择的语言的情况下，我无法提供一种使用它来提取组的方法。

这意味着以下内容：

```
Match "key" explicitly
Match any amount of numbers until you hit a non-number
Match "=" explicitly
Match any amount of characters that aren't a pipe "|" 
```

这将匹配由管道字符分隔的任意数量的 key#=value 对。

编辑：回应您的评论：

```
([A-Za-z\d]+=[^|]+) 
```

这表示：

```
Match any amount of alphabetical characters or numbers
Match "=" explicitly
Match any character that is not a pipe character "|" 
```

这将匹配以下任何一项：

```
key=value|myKey=MyValue|key2012=MyValue2012|country=usa|sex=female 
```

# xml - JAXB：解组并设置属性值的一部分

> ID：11865204
> 
> 赞同：1
> 
> 时间：2012-08-08T13:07:58.513
> 
> 标签：xml, jaxb, eclipselink, moxy

我得到一个长字符串作为属性，我想解组它的一部分。
这是元素的样子：

```
<Party id="PARTYID_1341592540748_ed044bd3-b8b2-40f9-a679-4daa411ecc45"> 
```

但我只想`1341592540748`被设置为 id。
是否可以即时编辑@XmlAttribute 字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:33:13.530

我建议实现一个实例`XmlAdapter`来包含这个逻辑。这种方法的优点是 XML 转换逻辑与您的域模型分开。使用注释`XmlAdapter`在字段/属性上设置An 。`@XmlJavaTypeAdapter`

**了解更多信息**

*   [http://blog.bdoughan.com/search/label/XmlAdapter](http://blog.bdoughan.com/search/label/XmlAdapter)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:47:58.220

一种方法可能是在 setter 方法中进行转换，如下所示（未测试）：

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Party {

  @XmlTransient long id;

  // traditional JavaBean accessors for the long, _not_ used by JAXB
  public long getId() { return id; }
  public void setId(long id) { this.id = id; }

  // converting accessors for JAXB
  @XmlAttribute(name = "id")
  public String getStringId() { return String.valueOf(id); }
  public void setStringId(String idStr) {
    // extract relevant bit of the string and parse it into a long
  }
} 
```

# php - 尝试使用（当前 php 日期 - mySQL 时间戳 = 天数差异）进行计算

> ID：11865207
> 
> 赞同：0
> 
> 时间：2012-08-08T13:08:10.630
> 
> 标签：php, mysql

我浏览了网站上的问题，我认为我遇到的问题更深入一些。我试过使用 difftime() 函数，但它对我来说结果为 0。

到目前为止，这就是我所做的

```
$currentDate =  time();
//echo $printDate;
//echo $currentDate;
$editedDate = date("Y-m-d ", strtotime($printDate)); 
$editedCurrentTime = date("Y-m-d ", $currentDate); 

echo "$editedDate </br>";
echo "$editedCurrentTime </br>";

$timeDiff = ($editedCurrentTime - $editedDate);
echo "$timeDiff </br>";
$numberDays = floor($timeDiff/(60*60*24)); 
```

我首先节省时间（）；在 currentDate 中，printDate 具有条目被放入数据库的日期。两者都已格式化，并且回显可以正确打印出来。第三个回声是由于某种原因减法变为 0 的地方。当我尝试 strtotime($currentDate) 时，editedCurrentTime 的回声变为 1970-01-01。我猜这是一个小问题，与它们采用不同格式的事实有关，但它仍然困扰着我。任何帮助将不胜感激。

这是输出的一个片段：

```
2012-08-01 
2012-08-08 
0 
2012-08-01 
2012-08-08 
0 
2012-08-01 
2012-08-08 
0 
2012-08-02 
2012-08-08 
0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:15:44.917

该`date()`函数根据您输入的格式返回一个**字符串。**您不能对字符串执行算术运算。

您应该做的是首先计算从数据库中检索的**时间戳**（整数）的差异，`time()`然后才使用`date()`函数格式化该差异。

（注意：您也应该在数据库中以 unix 纪元整数格式存储日期和时间。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:50:45.013

你在找这个吗？[如何使用PHP计算两个日期之间的差异](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php "如何使用PHP计算两个日期之间的差异")

# java - Java 套接字编写器

> ID：11865208
> 
> 赞同：0
> 
> 时间：2012-08-08T13:08:15.030
> 
> 标签：java, sockets

我正在使用 Java 套接字程序将整数和字符从服务器写回客户端

```
 PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true); 
```

我想在线上写一个 int32 和一个 8B 的字符。对于我写的整数

```
 out.printf("%04x",1); 
```

它在wireshark上显示为“30 30 30 31”，而我希望它显示为“01 00 00 00”。类似的 out.printf("%d",1); 它显示为“31”，而我想要它“01 00 00 00”。如何在电线上写一个 4B 的整数和一个 8B 的字符？表示是否与编码有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:14:23.840

使用 PrintWrite 将文本写入套接字并不理想，因为它会隐藏任何错误。

在您的情况下，您似乎想编写二进制文件，所以我建议您尝试一下。

```
DataOutputStream out = new DataOutputStream(
                       new BufferedOutputStream(clientSocket.getOutputStream()));

out.writeInt(1); 
```

但是，如果您想起诉小端格式，我会使用阻塞 NIO。

```
SocketChannel sc = 
ByteBuffer bb= ByteBuffer.allocateDirect(1024).order(ByteOrder.LITTLE_ENDIAN);

bb.putInt(1);
// put whatever else
bb.flip();
while(bb.remaining() > 0) sc.write(bb); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:12:20.923

是的。通过指定“%04x”和字符串转换，您可以为您的数据隐式选择十六进制编码（即将数字转换为 ASCII 字符串）。

改用 a`ByteBuffer`将整数转换为四个字节。有关详细信息，请参阅[此答案](https://stackoverflow.com/a/1936865/34088)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T13:13:23.490

如果要写入二进制数据，请不要使用 PrintWriter 或任何其他 Writer 作为包装器。尝试改用 DataOutputStream，它提供了一组用于写入 int 等的方法。

# javascript - 如何在jquery中减去时隙？

> ID：11865209
> 
> 赞同：0
> 
> 时间：2012-08-08T13:08:15.403
> 
> 标签：javascript, time

我试试这段代码

```
start_time = '08:15 AM'
end_time = '03:45 PM'
diff = end_time - start_time; 
```

只有我想在 jquery 中减去时间。我在 php 中尝试了如下相同的方法，它运行正常。但不在 jquery 中

```
$st = strtotime("07:30 AM");
$edt = strtotime("06:15 AM");
echo round(abs($st - $edt) / 60,2). " minute";
echo "<br>";

echo $timediff=($edt-$st)/60; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:11:20.817

使用[`Date()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)对象。你不能像你的问题那样减去字符串。

```
a = new Date(2012, 1, 2, 21, 1, 3, 5)
b = new Date(2012, 2, 3, 22, 2, 3, 5)
c = a - b // diff in milliseconds 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:12:58.817

`'08:00 AM'`并且`'03:00 PM'`是字符串，而不是数字，因此它们不能彼此相减。

您可以通过使用日期对象创建两个时间的日期并减去它们来找到小时差。

以下是 Date 构造函数的参数：

```
new Date(year, month, day, hours, minutes, seconds, milliseconds) 
```

所以

```
var start_d = new Date(0,0,0,8),
    end_d = new Date(0,0,0,11),
    diff = end_d - start_d; 
```

或者，您可以使用 Date 的方法来定义时间

```
var start_d = new Date(), // makes a new date object of current time
    end_d = new Date(), // same
    diff;

start.setHours(8);
end.setHours(11);

diff = end_d - start_d; 
```

这将返回以毫秒为单位的差异，以转换为小时：

```
diff_hours = diff / 1000 / 60 / 60; 
```

# wordpress - htaccess 防止 Wordpress 永久链接

> ID：11865211
> 
> 赞同：0
> 
> 时间：2012-08-08T13:08:21.640
> 
> 标签：wordpress, .htaccess, permalinks

我刚刚安装了一个 wordpress 博客，它将作为一个独立博客用于其他静态站点。博客已经完成，当我查看它时，一切看起来都很好......直到点击了一个永久链接（查看单个帖子）。单击后，用户将被重定向到主页。我相信是 htaccess 文件导致了这种情况。您可以通过查看博客站点来尝试一下：http: [//nathantrotter.com/blog/](http://nathantrotter.com/blog/)

这是我的 htaccess 文件（来自站点的根目录，wp 博客目录没有）...我需要创建另一行以使博客永久链接正常工作吗？如果是这样，是什么？

```
Options +FollowSymlinks
RewriteEngine on

RewriteRule ^admin$ admin/index.php
RewriteRule ^products/([A-Za-z0-9_-]+)$ /index.php?p=products&metal=$1
RewriteRule ^services/([A-Za-z0-9_-]+)$ /index.php?p=services&sub=$1
RewriteRule ^about/([A-Za-z0-9_-]+)$ /index.php?p=about&sub=$1
RewriteRule ^facilities/([A-Za-z0-9_-]+)$ /index.php?p=facilities&sub=$1
RewriteRule ^press/([0-9]+)/([A-Za-z0-9_-]+)$ /viewPress.php?id=$1
RewriteRule ^([A-Za-z0-9_-]+)$ /index.php?p=$1 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-08T13:16:21.320

这不是 htaccess 问题。只需进入 WP 永久链接设置页面并更新您现有的永久链接。这解决了它。

# express - 如何通过 cloudfoundry 使用 express 提供静态文件？

> ID：11865214
> 
> 赞同：1
> 
> 时间：2012-08-08T13:08:22.270
> 
> 标签：express, cloud-foundry

如何通过 cloudfoundry 使用 express 提供静态文件？我试图使用以下代码：

```
app.use(express.static(__dirname+'/www')); 
```

但是当我访问特定的 url 时，我遇到了一些奇怪的异常：

```
TypeError: Object #<SendStream> has no method 'on'
    at Object.static [as handle] (/var/vcap/data/dea/apps/FeedBack-0-c812c99aa3818946dd0bcf5538e2aecd/app/node_modules/express/node_modules/connect/lib/middleware/static.js:75:8)
    at next (/var/vcap/data/dea/apps/FeedBack-0-c812c99aa3818946dd0bcf5538e2aecd/app/node_modules/express/node_modules/connect/lib/proto.js:190:15)
    at Object.expressInit [as handle] (/var/vcap/data/dea/apps/FeedBack-0-c812c99aa3818946dd0bcf5538e2aecd/app/node_modules/express/lib/middleware.js:31:5)
    at next (/var/vcap/data/dea/apps/FeedBack-0-c812c99aa3818946dd0bcf5538e2aecd/app/node_modules/express/node_modules/connect/lib/proto.js:190:15)
    at Object.query [as handle] (/var/vcap/data/dea/apps/FeedBack-0-c812c99aa3818946dd0bcf5538e2aecd/app/node_modules/express/node_modules/connect/lib/middleware/query.js:44:5)
    at next (/var/vcap/data/dea/apps/FeedBack-0-c812c99aa3818946dd0bcf5538e2aecd/app/node_modules/express/node_modules/connect/lib/proto.js:190:15)
    at Function.handle (/var/vcap/data/dea/apps/FeedBack-0-c812c99aa3818946dd0bcf5538e2aecd/app/node_modules/express/node_modules/connect/lib/proto.js:198:3)
    at Server.app (/var/vcap/data/dea/apps/FeedBack-0-c812c99aa3818946dd0bcf5538e2aecd/app/node_modules/express/node_modules/connect/lib/connect.js:66:31)
    at Server.emit (events.js:67:17)
    at HTTPParser.onIncoming (http.js:1134:12) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T10:17:08.283

我也弄错了，我找到了答案；你可以这样做 ：

第一 `vmc delete yourapp`

第二`vmc push yourapp --runtime node08`

也许您在第一次将应用程序推送到云时选择了错误的 Node 运行时版本（node04、node06），并且服务器会记住您的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T13:33:22.530

这应该可以，如果您创建一个模板 express 应用程序，它被配置为从 ./public 文件夹提供静态资产。确保您的配置是这样的；

```
var app = express();

app.configure(function(){
  app.set('port', process.env.VCAP_APP_PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
}); 
```

如果您愿意，我可以尝试自己部署您的源代码，看看是否可以让它工作。

# ios - iOS 报亭应用程序：下载 ePub

> ID：11865227
> 
> 赞同：0
> 
> 时间：2012-08-08T13:08:50.007
> 
> 标签：ios, ios5, epub

我想为 iPhone 开发一个报亭应用程序。

我知道 Apple 建议将问题作为一个文件下载。Apple 对杂志应如何向读者展示有任何限制吗？我想将客户的移动网站转换为 epub，并将其显示在我们的应用程序中。

是否可以通过应用商店指南？

# php - 恶意用户会滥用这个吗？

> ID：11865232
> 
> 赞同：0
> 
> 时间：2012-08-08T13:09:01.813
> 
> 标签：php, security, input, textbox

我在页面上有一个文本框，如下所示：

```
<form action="verify.php" method="post">
<input type="text" width="30" name="securityCode"><br />
<input type="submit" value="Go" />
<form> 
```

在 verify.php 我有这个：

```
<?php
$enteredCode=$_POST['securityCode'];
//Other stuff
?> 
```

我想知道的是，这是否会带来恶意？例如，如果他们在文本框中输入了一些 PHP，它会起作用吗？

**编辑**

我不认为这很重要，但显然它很重要。如果他们输入了我设置`$_SESSION['passedSecurityCheck']`为的正确代码`true`，否则我将其设置为 false。很抱歉没有具体说明。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:10:37.113

就你所展示的而言，你没有用那个价值*做任何事情。*
因此，在那段代码中没有什么可以被滥用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:49:28.800

在我的脑海中，可能的问题：

1.  检查安全代码：

    *   您是否使用数据库来执行此操作 - 如果是，SQL 注入
    *   使用服务器上的文件来检查代码，有人可以嗅探其他人的文件
    *   您是否使用外部程序 - 有很多困难，包括（但不限于）shell、参数、文件名等
2.  安全码是什么意思？代码只是意味着访问一个简单的文本文件，包括添加其他用户、删除用户等。这里的列表是无穷无尽的

3.  如果另一个人（比如在图书馆里）忽略了用户的肩膀，那么该代码是纯文本还是使用该`password`字段？如果对某人来说只是偷偷摸摸地偷看的话并不容易。

我相信其他人可以想到其他事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:27:41.437

一个简单的比较（这个值是否等于那个值）本身不会允许恶意代码。

我更担心你如何比较它。如果您正在进行直接比较，那么我希望您没有使用可能在世界其他任何地方使用的值（例如，用户自己设置的密码，他们可能在其他地方使用），因为访问 where存储的安全码显示安全码。这本身并不是什么大问题（攻击者已经拥有访问权限），除非它可能被硬编码到文件本身中（在这种情况下，一个揭示源的漏洞利用 - 并且多年来已经有一些 - 揭示了如何登录），但如果用户可以设置代码，那么您刚刚透露了他们可能在其他网站上使用的密码。

# php - 菜单项动态排序 php mysql

> ID：11865233
> 
> 赞同：0
> 
> 时间：2012-08-08T13:09:03.520
> 
> 标签：php, mysql

我用**Php**和**MySql**编写了动态菜单。这是我的 MySql 表结构 =>

```
CREATE TABLE MENU(
id INT(3) NOT NULL AUTO_INCREMENT PRIMARY KEY,
sort_id BIGINT NOT NULL,
title VARCHAR(50) NOT NULL,
etc ...); 
```

这是html表单=>

```
<input type="text" name="title">
<select name="pos">
<?php
if ($r = $connection->query("SELECT id,sort_id,title from menu order by sort_id ASC")){
   $row = $r->fetch_assoc();
/* here with help of php I'm retrieving data from marked table. I need this because want to sort categories with help of this select element , forward or backwards */
echo  "<option value='" . $row['id'] . "'>" . $row['title'] . " After</option>";
}
?>
</select>
<input type="submit" name="ok"> 
```

你怎么能看到伙计们，我正在尝试借助 select 元素（带有 sort_id 列）对菜单项进行排序，但我无法决定如何使用 MySql 表中的**sort_id**数字进行操作，如何增加或减少来实现目标。

请帮忙，如果有人知道该怎么做或有想法吗？

**PS。我想对菜单项进行排序，而不是选择形式，而是在导航栏中，我没有在这里写。例如，如果第一个类别名为“one”，第二个类别为“three”，我想在菜单 NOT IN SELECT ELEMENT 中插入名为“two”的类别**

**更新**

这是插入脚本

```
<?php
   $main_sort_res = $connection->query("SELECT sort_id FROM menu WHERE id=" . $_POST['pos'] . "");
 $sort_num =  $main_sort_res->fetch_assoc();
if ($k = $con->query("SELECT id FROM menu WHERE id=" . $_POST['pos'] . " AND sort_id=(SELECT MAX(m_sort_id) FROM main_menu)")){ // here defined if selected element is last or not
if ($k->num_rows==0){  // not last element
    $connection->query("INSERT INTO menu(sort_id,title) VALUES(" . ($sort_num['sort_id']+1) . ",NULL,'" . $_POST['title'] . "')")
} else { // last element in select form
    $connection->query("INSERT INTO menu(sort_id,title) VALUES(" . ($sort_num['sort_id']+10000) . ",NULL,'" . $_POST['title'] . "')")
}

}
?> 
```

你怎么看我在 sort_id 中手动插入数字，这很糟糕，但我没有其他想法。从同一元素（我的意思是从选择元素）多次插入类别时，我感到困惑。原因是增加值 1 ，但我无法想象什么函数不匹配列中的 sort_id-s

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:34:40.777

您可以使用 jQuery UI 进行排序。一种解决方案可能是在有序列表下列出所有菜单项。然后使用 jQuery UI 可排序、可拖动您可以对菜单进行排序，然后将列表保存到数据库中。这是我所做的：

我有一个包含列的表：id、menu_name、位置

```
<?php
 $msg="";
// handle POST
if ($_POST) {
// use $i to increment the weight
$i=1;
// loop through post array in the order it was submitted
foreach ($_POST['menu'] as $menu_id) {
// update the row
$result = $db->query("UPDATE top_menu SET position=". $i . " WHERE id=". mysql_real_escape_string($menu_id));
$i++;
}
$msg="Menu re-ordered successfully";
}
?>
<table width="100%"  cellpadding="0" cellspacing="0" id="t_parenttable">
<tr><td>
<table width="100%" bgcolor="#6FD0FF" cellspacing="0" height="30px">
<tr>
<td width="20%"><strong>Top Menu</strong></td>
<td width="80%" align="right"><a href="loggedin.php?page=top_menu&mode=add">New Menu</a>&nbsp;|&nbsp;<a href="loggedin.php?page=top_menu&mode=sortMenu">Sort Level 0 Menu</a>&nbsp;|&nbsp;<a href="loggedin.php?page=top_menu">Go Back >></a></td>
</tr>
</table>
</td></tr>

<tr><td>
<table id="t_theList" width="100%" class="t_innertable">
<thead>
<tr>
  <th>Sort Menu</th>
</tr>
</thead>
<tbody>

<tr>
<td><?php 
if ($msg!="") {echo "<p>$msg</p>"; }?>
<form method="POST" action="">

<ol id="sort_list">
<?php 
if (!empty($_GET['id']))
{
    $id=$_GET['id'];
}
else
{
    $id=0;
}
$query="SELECT id, menu_name, position FROM top_menu WHERE parent_id='$id' ORDER BY position";
$result = $db->query($query);

// print the list items
while ($row = $db->fetch_array($result)) {
echo '<li><a href="#">
<input type="hidden" name="menu[]" value="'. $row['id'] .'" />
'. $row['menu_name'] .'</a></li>';
}
?>
</ul>

<input type="submit" name="reorder" value="Re-Order Menu" />

</form>
</td>
</tr>

</tbody>

</table>
</td></tr>

</table>

<script type="text/javascript">
// when the entire document has loaded, run the code inside this function
$(document).ready(function(){
// Wow! .. One line of code to make the unordered list drag/sortable!
$('#sort_list').sortable();
});
</script> 
```

为此需要的 js 文件是 jQuery、jQuery UI（可排序、可拖动）

```
<script src="path_to_jquery/jquery.js"></script>
<script src="path_to_jquery_ui/jquery_ui/development-bundle/ui/jquery.ui.core.js"></script>
<script src="path_to_jquery_ui/jquery_ui/development-bundle/ui/jquery.ui.widget.js"></script>
<script src="path_to_jquery_ui/jquery_ui/development-bundle/ui/jquery.ui.mouse.js"></script>
<script src="path_to_jquery_ui/jquery_ui/development-bundle/ui/jquery.ui.sortable.js"></script>
<script src="plugins/jquery_ui/development-bundle/ui/jquery.ui.draggable.js"></script> 
```

![在此处输入图像描述](../Images/afdcf44325238abfc8824faddc2b57ca.png)

快照在拖动列表项并将其放置在您想要的位置时显示图像

# c# - 关于插入和更新存储过程

> ID：11865236
> 
> 赞同：0
> 
> 时间：2012-08-08T13:09:07.667
> 
> 标签：c#, sql-server

我有一个注册页面，**起初我想在数据库中插入一些必填字段**，然后在**第二页中我想根据`userid`**.

所以**我想用存储过程来做到这一点，**这是最好的方法，**分别创建一个插入和更新存储过程，还是创建一个具有插入和更新的单一过程？**

在性能方面哪个最好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:13:58.233

在同一个查询中包含这些并没有性能提升，因为两个单独的存储过程仍然由数据库服务器预编译。这更像是一个维护问题而不是性能问题——我建议为插入和更新使用单独的存储过程，这比在单个脚本中将它们混合在一起更具可读性和明显性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:10:34.147

您可以创建一个用于插入的过程和另一个用于更新的过程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:14:54.203

您可以创建两个单独的存储过程，一个 for`INSERT`和一个 for `UPDATE`。这很简单，任何人都可以理解。

但是，如果您使用的是 MSSQL 2008 或更新版本，那么您可以创建一个存储过程并使用`MERGE`：

[技术网 SQL 合并](http://technet.microsoft.com/en-us/library/bb510625.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T13:16:55.687

编写单独的插入和更新过程会更有效，因为该过程不必考虑是插入还是更新，尽管效率节省将是最小的，所以我不会基于此做出决定，它应该更基于围绕可读性和可理解性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T13:17:21.270

任何性能差异都可以忽略不计。在某个地方肯定会有几微秒的差异，但它真的会那么小，而且一堆其他的小决定会消除差异。

那么唯一真正的区别是代码的清晰程度。根据您的描述，在我看来，“创建新用户”和“更新用户”被您的其余代码视为单独的关注点，因此应该分开。

如果出于某种原因，您的代码会发现更容易处理“根据需要创建或更新”操作，那将是另一回事，但这里没有任何迹象表明这种情况。

# xsd - xsd 分解出多重使用属性

> ID：11865247
> 
> 赞同：1
> 
> 时间：2012-08-08T13:09:40.577
> 
> 标签：xsd, refactoring

我不确定如何分解这段 XSD：

```
<xs:attribute name="status" use="required">
    <xs:simpleType>
        <xs:restriction base="xs:token">
            <xs:enumeration value="not run"/>
            <xs:enumeration value="passed"/>
            <xs:enumeration value="failed"/>
        </xs:restriction>
    </xs:simpleType>
</xs:attribute> 
```

`<test>`和`<step>`标签都需要它：

```
<?xml version="1.0" encoding="UTF-16"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
targetNamespace="FlowBi:Emis:FeatureTests" 
xmlns="FlowBi:Emis:FeatureTests" 
elementFormDefault="qualified" 
attributeFormDefault="unqualified">
<xs:element name="featureTests">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="test" minOccurs="1" maxOccurs="unbounded">
                <xs:complexType>
                    <xs:sequence> 
                        <xs:element name="summary" type="xs:string"/>
                        <xs:sequence>
                            <xs:element name="step" minOccurs="0" maxOccurs="unbounded">
                                <xs:complexType>
                                    <xs:simpleContent>
                                        <xs:extension base="xs:string">
                                            <xs:attribute name="status" use="required">
                                                <xs:simpleType>
                                                    <xs:restriction base="xs:token">
                                                        <xs:enumeration value="not run"/>
                                                        <xs:enumeration value="passed"/>
                                                        <xs:enumeration value="failed"/>
                                                    </xs:restriction>
                                                </xs:simpleType>
                                            </xs:attribute>
                                        </xs:extension>
                                    </xs:simpleContent>
                                </xs:complexType>
                            </xs:element>
                        </xs:sequence>
                    </xs:sequence>
                    <xs:attribute name="status" use="required">
                        <xs:simpleType>
                            <xs:restriction base="xs:token">
                                <xs:enumeration value="not run"/>
                                <xs:enumeration value="passed"/>
                                <xs:enumeration value="failed"/>
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:attribute>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
</xs:element>
</xs:schema> 
```

将重复部分分解出来并在每个使用它的地方引用它会很好，但我不确定如何为属性类型执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T16:40:35.547

这应该这样做

```
<?xml version="1.0" encoding="utf-16"?>
<!--Created with Liquid XML Studio 2012 Developer Edition 10.1.2.4113 (http://www.liquid-technologies.com)-->
<xs:schema xmlns="FlowBi:Emis:FeatureTests" attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="FlowBi:Emis:FeatureTests" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="featureTests">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="test" minOccurs="1" maxOccurs="unbounded">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="summary" type="xs:string" />
                            <xs:sequence>
                                <xs:element name="step" minOccurs="0" maxOccurs="unbounded">
                                    <xs:complexType>
                                        <xs:simpleContent>
                                            <xs:extension base="xs:string">
                                                <xs:attribute name="status" type="statusType" use="required" />
                                            </xs:extension>
                                        </xs:simpleContent>
                                    </xs:complexType>
                                </xs:element>
                            </xs:sequence>
                        </xs:sequence>
                        <xs:attribute name="status" type="statusType" use="required" />
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
    <xs:simpleType name="statusType">
        <xs:restriction base="xs:token">
            <xs:enumeration value="not run" />
            <xs:enumeration value="passed" />
            <xs:enumeration value="failed" />
        </xs:restriction>
    </xs:simpleType>
</xs:schema> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T19:28:57.753

@Sproty 提供的答案是正确的 (+1)。我会添加不适合评论的澄清/变体（因此是答案）......

通常，Sprotty 仅重用简单类型的原因与 XSD 中的属性通常不合格有关。由于您的示例中的属性是不合格的，因此只有在属性包装在属性组下时才能重用整个属性。基本上重用全局定义的属性意味着限定属性。

因此，这是重新使用属性声明的另一种可能性（与仅简单类型相反）：

```
<?xml version="1.0" encoding="UTF-16"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="FlowBi:Emis:FeatureTests" xmlns="FlowBi:Emis:FeatureTests" elementFormDefault="qualified" attributeFormDefault="unqualified">
    <xs:element name="featureTests">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="test" minOccurs="1" maxOccurs="unbounded">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="summary" type="xs:string"/>
                            <xs:sequence>
                                <xs:element name="step" minOccurs="0" maxOccurs="unbounded">
                                        <xs:complexType>
                                            <xs:simpleContent>
                                                <xs:extension base="xs:string">
                                                    <xs:attributeGroup ref="gaStatus" />
                                                </xs:extension>
                                            </xs:simpleContent>
                                        </xs:complexType>
                                </xs:element>
                            </xs:sequence>
                        </xs:sequence>
                        <xs:attributeGroup ref="gaStatus" />
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
    <xs:attributeGroup name="gaStatus">
        <xs:attribute name="status" use="required">
            <xs:simpleType>
                <xs:restriction base="xs:token">
                    <xs:enumeration value="not run"/>
                    <xs:enumeration value="passed"/>
                    <xs:enumeration value="failed"/>
                </xs:restriction>
            </xs:simpleType>
        </xs:attribute>         
    </xs:attributeGroup>
</xs:schema> 
```

# ruby-on-rails - 在 Rails 应用程序中配置 SMTP 邮件

> ID：11865249
> 
> 赞同：0
> 
> 时间：2012-08-08T13:09:52.457
> 
> 标签：ruby-on-rails

我正在使用 Devise gem 开发 Rails 应用程序以进行身份​​验证。我无法接收在设计过程中发送的电子邮件，例如忘记密码，因为似乎邮件配置不正确。

我试图在 production.rb 文件中添加配置

```
 config.action_mailer.delivery_method = :smtp
  config.action_mailer.default_url_options = { :host => 'smtp.mydomain.com' } 
```

我究竟做错了什么？我必须添加更多配置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:18:25.123

看看这里。

[http://railscasts.com/episodes/206-action-mailer-in-rails-3/](http://railscasts.com/episodes/206-action-mailer-in-rails-3/)

在那个 railscast 中有很多示例代码可以帮助你。

配置/初始化程序/setup_mail.rb

```
ActionMailer::Base.smtp_settings = {
  :address              => "smtp.gmail.com",
  :port                 => 587,
  :domain               => "railscasts.com",
  :user_name            => "railscasts",
  :password             => "secret",
  :authentication       => "plain",
  :enable_starttls_auto => true
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:31:04.920

我让它在环境下的 production.rb 文件中使用以下配置

```
config.action_mailer.default_url_options = { :host => "http://your_domain_name.com" }

     ActionMailer::Base.smtp_settings = {
                         :address        => "smtp.smtp_server_name.com",
                         :port           => 25,
                         :authentication => :plain
  } 
```

希望它可以帮助某人.. :)

# sql - 使用联合函数生成新列

> ID：11865250
> 
> 赞同：1
> 
> 时间：2012-08-08T13:09:59.647
> 
> 标签：sql, oracle, report

到目前为止，当涉及到任何 sql 时，我都是自学的，自学的问题在于，虽然您经常可以破解修复程序，但这可能不是实现目标的最佳实践。以下代码是这些黑客之一：

```
select breed, sum(mar_11) as mar_11, sum(apr_11) as apr_11
from (
  select d.breed, d.qty as mar_11, 0 as apr_11
  from dogs d
  where d.entry_date between '01-MAR-11' and '31-MAR-11'
  union all
  select d.breed, 0 as mar_11, d.qty as apr_11
  from dogs d
  where d.entry_date between '01-APR-11' and '30-APR-11'
) t
group by breed; 
```

上述代码的目标是提供一个格式化的报告，显示三月和四月出生的狗总数。当我们处理几个时间段时这很好，但是当您进入 20-30 个不同的时间段时，代码变得乏味和重复。

我设计的第二个技巧是使报告动态化并显示前六个月，而无需每个月重新编码。我已经使用 bash 脚本和 GNU Date 完成了这项工作，它们通过命令提示符传递变量。

```
(e.g.)
sqlplus64 ilove/dogs@dogville @myreport var1 var2 var3 var4 
```

我的问题如下：

1）我可以使用什么工具来提高我的sql语句的效率（即通过更改日期减少重复相同的代码）？

2）我想要实现的目标是不是被认为是好的做法（或者我应该通过数据透视表进行后处理）？

3) 如何在不需要 bash 和 GNU Date 的情况下使我的 sql 语句动态化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:19:06.963

```
select
  breed,
  SUM(CASE WHEN entry_date BETWEEN '01-Mar-11' AND '31-Mar-11' THEN qty ELSE 0 END) AS mar_11,
  SUM(CASE WHEN entry_date BETWEEN '01-APR-11' AND '30-APR-11' THEN qty ELSE 0 END) AS apr_11
FROM
  dogs
WHERE
  entry_date BETWEEN '01-Mar-11' AND '30-Apr-11'
GROUP BY
  breed 
```

**编辑：**本月和前 5 个月

```
select
  breed,
  SUM(CASE WHEN entry_date >= ADD_MONTHS(TRUNC(SYSDATE, 'MM'), -5)
            AND entry_date <  ADD_MONTHS(TRUNC(SYSDATE, 'MM'), -4)
           THEN qty ELSE 0 END)                                      AS month_1,
  SUM(CASE WHEN entry_date >= ADD_MONTHS(TRUNC(SYSDATE, 'MM'), -4)
            AND entry_date <  ADD_MONTHS(TRUNC(SYSDATE, 'MM'), -3)
           THEN qty ELSE 0 END)                                      AS month_2,
  SUM(CASE WHEN entry_date >= ADD_MONTHS(TRUNC(SYSDATE, 'MM'), -3)
            AND entry_date <  ADD_MONTHS(TRUNC(SYSDATE, 'MM'), -2)
           THEN qty ELSE 0 END)                                      AS month_3,
  SUM(CASE WHEN entry_date >= ADD_MONTHS(TRUNC(SYSDATE, 'MM'), -2)
            AND entry_date <  ADD_MONTHS(TRUNC(SYSDATE, 'MM'), -1)
           THEN qty ELSE 0 END)                                      AS month_4,
  SUM(CASE WHEN entry_date >= ADD_MONTHS(TRUNC(SYSDATE, 'MM'), -1)
            AND entry_date <  ADD_MONTHS(TRUNC(SYSDATE, 'MM'),  0)
           THEN qty ELSE 0 END)                                      AS month_5,
  SUM(CASE WHEN entry_date >= ADD_MONTHS(TRUNC(SYSDATE, 'MM'),  0)
            AND entry_date <  ADD_MONTHS(TRUNC(SYSDATE, 'MM'),  1)
           THEN qty ELSE 0 END)                                      AS month_6
FROM
  dogs
WHERE
      entry_date >= ADD_MONTHS(TRUNC(SYSDATE, 'MM'), -5)
  AND entry_date <  ADD_MONTHS(TRUNC(SYSDATE, 'MM'),  1)
GROUP BY
  breed 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T14:13:31.663

作为对@Dems 六个月跨度查询（对于评论来说太大）的一个次要（如果不是轻浮）补充，因为您使用的是 SQL*Plus，您可以使用它的[`new_value`](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve013.htm#sthref1336)子句和 [替换变量](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_five.htm#sthref453)来设置列标题以匹配月。

使用相同的`add_months(trunc(sysdate, 'MM'), n)`方法，您可以生成与过去六个月中的每个月匹配的文本标签。你可以使用任何你想要的格式，我已经`'Mon RR'`接近你原来的硬编码列名。每个生成的值都被别名为`x_month_1`etc.；该`column ... new_value ...`子句使脚本稍后在脚本中作为替换变量可用，您可以将其引用为`&y_month_1`.

```
column x_month_1 new_value y_month_1;
column x_month_2 new_value y_month_2;
column x_month_3 new_value y_month_3;
column x_month_4 new_value y_month_4;
column x_month_5 new_value y_month_5;
column x_month_6 new_value y_month_6;

set termout off

select to_char(add_months(trunc(sysdate, 'MM'), -5), 'Mon RR') as x_month_1,
       to_char(add_months(trunc(sysdate, 'MM'), -4), 'Mon RR') as x_month_2,
       to_char(add_months(trunc(sysdate, 'MM'), -3), 'Mon RR') as x_month_3,
       to_char(add_months(trunc(sysdate, 'MM'), -2), 'Mon RR') as x_month_4,
       to_char(add_months(trunc(sysdate, 'MM'), -1), 'Mon RR') as x_month_5,
       to_char(trunc(sysdate, 'MM'), 'Mon RR') as x_month_6
from dual;

set termout on
set verify off 
```

`termout off`/停止它`on`出现在输出中，并`verify off`停止它告诉您何时使用替换变量。

然后只需更改`AS`Dem 查询中的别名子句；而不是`AS month_1`使用`AS "&y_month_1"`. 需要双引号，因为我选择了带有空格的日期格式；这会阻止它导致错误。

或者，如果您希望将演示文稿与查询分开，请保留别名并使用另一个`column`子句来实现此目的：

```
column month_6 heading "&y_month_6" 
```

无论哪种方式，你都会得到类似的东西：

```
BREED          Mar 12     Apr 12     May 12     Jun 12     Jul 12     Aug 12
---------- ---------- ---------- ---------- ---------- ---------- ----------
Beagle              1          4          0          0          0          0
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T13:19:00.787

您可以使用 group by 将狗分组为月份和年份：

```
SELECT 
    breed, EXTRACT(MONTH FROM entry_date) AS month, EXTRACT(YEAR FROM entry_date) AS year, sum(qty) AS number_of_dogs
FROM
    dogs
GROUP BY 
    breed, EXTRACT(MONTH FROM entry_date), EXTRACT(YEAR FROM entry_date) 
```

然后，您可以添加逻辑以将结果过滤到特定时间范围。例如：

```
SELECT *
FROM
(
    SELECT 
        breed, EXTRACT(MONTH FROM entry_date) AS month, EXTRACT(YEAR FROM entry_date) AS year, sum(qty) AS number_of_dogs
    FROM
        dogs
    GROUP BY 
        breed, EXTRACT(MONTH FROM entry_date), EXTRACT(YEAR FROM entry_date)
)
WHERE
    year = 2012 AND month < 8 
```

会得到你今年一月到七月出生的狗的数量

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T13:19:50.020

我认为做你想要的：

```
select to_char(d.entry_date, 'YYYY-MM') as yyyymm, breed,
       sum(d_qty)
from dogs d
group by to_char(d.entry_date, 'YYYY-MM'), breed
order by 1, 2 
```

这会为每个月和品种创建一个单独的行。如果您需要将这些放在一行中，那么您需要 PIVOT 语法，或者在 Excel 中进行数据透视。

在 Excel 中旋转很可能就足够了。您也可以通过明确的方式进行调整（正如我认为其他响应者所建议的那样）：

```
select breed,
       sum(case when to_char(d.entry_date, 'YYYY-MM') = '2012-06' then d_qty end) as qty_201206,
       sum(case when to_char(d.entry_date, 'YYYY-MM') = '2012-05' then d_qty end) as qty_201205,
       ...
from dogs d
group by breed
order by 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T13:17:51.457

在 Oracle 中，有一个常用的习语来表示这样的枢轴，通常涉及`SUM(DECODE(...)))`or `SUM(CASE WHEN...THEN...)`。

```
select breed
,      sum(decode(TO_CHAR(entry_date,'YYYYMM'),'201103',qty,0) mar_11
,      sum(decode(TO_CHAR(entry_date,'YYYYMM'),'201104',qty,0) apr_11
from dogs d
group by breed; 
```

我希望这有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T13:18:35.073

看一下`PIVOT`

[http://www.orafaq.com/wiki/PIVOT](http://www.orafaq.com/wiki/PIVOT)

也`EXTRACT`或`TO_CHAR`过滤您的日期

# c# - 如何从端口列表中仅获取用户界面 Com 端口？

> ID：11865252
> 
> 赞同：0
> 
> 时间：2012-08-08T13:10:01.667
> 
> 标签：c#, .net-4.0, serial-port

我正在开发一个 C#.net 应用程序，在其中我与 USB 3G 调制解调器 Com 端口进行通信以发送和接收消息。

以下是我目前用于获取端口列表的代码：

```
string[] ports = SerialPort.GetPortNames(); 
```

现在我只想从端口列表中获取 UI 端口，例如，如果 3G 调制解调器有两个端口，例如 COM4 和 COM6，其中第一个是应用程序接口端口，另一个是 UI 端口。

如何以编程方式获取 UI 端口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:35:11.240

串行端口不知道另一端连接的是什么。您需要尝试打开每一个并发送类似的内容`"AT\r\n"`，并希望`"OK"`检查您的调制解调器连接的是哪个。

编辑：

```
 using System;
    using System.IO.Ports;
    using System.Collections;
    using System.Collections.Generic;
    using System.Text;

    private static bool IsModem(string PortName)
    {

      SerialPort port= null;
       try
       { 
         port = new SerialPort(PortName,9600); //9600 baud is supported by most modems
         port.ReadTimeout = 200;
         port.Open();
         port.Write("AT\r\n");

         //some modems will return "OK\r\n"
         //some modems will return "\r\nOK\r\n"
         //some will echo the AT first
         //so
         for(int i=0;i<4;i++) //read a maximum of 4 lines in case some other device is posting garbage
         {
              string line = port.ReadLine();
              if(line.IndexOf("OK")!=-1)
              {
                 return true;
              }
         }
        return false;

       }
       catch(Exception ex)
       {
         // You should implement more specific catch blocks so that you would know 
         // what the problem was, ie port may be in use when you are trying
         // to test it so you should let the user know that as he can correct that fault

          return false;
       }
       finally
       {
         if(port!=null)
         {
            port.Close();
         }     
       }

    }

    public static string[] FindModems()
    {
      List<string> modems = new List<string>();
      string[] ports = SerialPort.GetPortNames();

       for(int i =0;i<ports.Length;i++)
       {
         if(IsModem(ports[i]))
         {
           modems.Add(ports[i]);
         }
        }
        return modems.ToArray();
    } 
```

像这样的东西应该可以工作，我没有测试它（无法测试它）。

# c++ - 如何影响 Visual Studio 2010 中的 C++ 编译顺序

> ID：11865253
> 
> 赞同：2
> 
> 时间：2012-08-08T13:10:07.707
> 
> 标签：c++, visual-studio-2010, visual-c++, compilation

好的，我可能应该先提供更多背景信息。我正在开发在 Visual Studio 6 中开发的旧版 C++ 解决方案，因为我不喜欢 Visual Studio 6 UI，所以我已切换到带有 Daffodil 扩展的 Visual Studio 2010，以便在仍在工作和调试的同时使用 VC6 编译器构建旧版解决方案在 Visual Studio 2010 中（另外一个好处是，SourceSafe 集成在 Visual Studio 2010 中也好很多）。

该解决方案构建良好，但无法运行，根据旧项目所有者的说法，这是由为其中一个项目编译文件的顺序引起的。到目前为止，他一直是对的，我没有理由不相信他。现在我想我在某处读到 C++ 中文件的编译顺序没有规则，并且 Visual Studio IDE 根据文件名编译项目中的文件（但显然不是 Visual Studio 6 IDE），所以我为所有文件添加了后缀sourcefilenames 具有与 Visual Studio 6 项目中文件的编译顺序匹配的升序编译编号，并且看哪.. 编译顺序仍然与 Visual Studio 6 项目的编译顺序不匹配。那么是否有任何其他方式可以影响这一点，或者我是否以错误的方式解决这个问题？或者 IDE 是否实际上检查了 headerfilenames 而不是 sourcefilenames 来确定编译顺序？（我不愿意更改头文件名，因为这会导致大量代码更改）。

PS：我不是想弄清楚为什么编译顺序对程序运行很重要或如何解决这个问题，我只是想看看我是否可以影响 Visual Studio 2010 中的编译顺序来证明或反驳它很重要到这个项目编译的最终结果。

**更新：**也许这不是文件初始化惨败，*并且*项目所有者错了。我只是按照正确的顺序手动编译了所有文件（如 pwny 建议的那样）并运行程序，它会弹出一个异常消息框，提示“应用程序无法正确初始化（0xC0000005）”。看起来程序运行到了一个索引器用于指向集合对象的空指针的点。相关文件具有 .tem 文件扩展名而不是 .cpp（以及包含的 .hpp 头文件#includes .tem 文件），它可以追溯到 1994 年在无法自行构建的 makefile 项目中。当我从“调用堆栈”窗口导航到文件时，调试器拒绝向我显示任何信息。这是漫长的一天，所以我明天继续，也许将 makefile 项目变成一个 DLL，将文件重命名为 .cpp，摆脱循环包含，并希望最好。

# android - Android GCM 更新版本 3 中有哪些新内容？

> ID：11865256
> 
> 赞同：0
> 
> 时间：2012-08-08T13:10:30.263
> 
> 标签：android, android-c2dm, google-cloud-messaging

今天去SDK manager，发现google已经发布了GCM update verison 3。我试图找到update 3中有什么新的东西，但是找不到google发布的任何文档。

**我的问题**

1.  GCM 更新版本 3 中有哪些新内容，我们可以找到更新的任何文档吗？
2.  我们是否需要在客户端和服务器端用新的 jar 替换旧的 jar？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T16:46:00.947

幸运的是，我仍然拥有 GCM v1，并且我在 v1 和 v3 之间做了一个快速的文件夹差异。除了一些小的重构之外，添加的一个新特性是：

isRegisteredOnServer() 方法现在有一个生命周期，默认设置为 7 天。因此，如果您按照他们的示例客户端进行注册，您的应用程序将每 7 天将其registration_id 发布到您的服务器以进行更新。

当然，您可以使用新的 getRegisterOnServerLifespan() 和 setRegisterOnServerLifespan() 方法来更改它。

我注意到的一个有趣的重构是：整个代码都进行了更改以支持多个 SENDER_ID 进行注册。例如，以前他们使用它来注册：

```
GCMRegistrar.internalRegister(context, mSenderId); // mSenderId is a String 
```

现在他们使用这个：

```
GCMRegistrar.internalRegister(context, senderIds); // senderIds is a String array 
```

我认为官方文档没有提到任何关于注册多个 SENDER_ID 的内容。并且即使注册允许，但是在收到注册结果时，无法识别哪个registration_id属于哪个SENDER_ID。

# forms - Coldfusion 验证表格编号而不产生错误

> ID：11865268
> 
> 赞同：0
> 
> 时间：2012-08-08T13:10:51.050
> 
> 标签：forms, validation, coldfusion

我有一个提交到 iframe 的 ajax 表单。在服务器端，我想将输入验证为有效整数，如果未验证，则将其设置为默认值 0。初始解决方案是：

```
<cfparam name="FORM.integerField" default="0" type="integer"> 
```

但是，如果输入了字符串数据，则在表单提交时，服务器会抛出错误。我不希望抛出错误，我想检查数据类型并将其设置为默认值，如果它未通过检查，然后继续处理来自。我也尝试过类似的东西：

```
<cfqueryparam value="#atest#" cfsqltype="CF_SQL_NUMERIC"> <!-- inside my query -->

<cfif IsDefined(LSParseNumber(FORM.integerField))>

<cfif LSParseNumber(FORM.integerField)> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:18:02.097

```
<cfif NOT isValid("integer",FORM.integerField)>
    <cfset FORM.integerField = 0>
</cfif> 
```

我<3“isValid（）”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:09:38.353

对于您想要的东西，这可能有点矫枉过正，但它会完成这项工作。只需提供数字参数。

```
<cffunction name="CastAsInteger" access="public" returntype="String" output="false" hint="Returns the provided number if it matches the bits and sign, otherwise returns 0">
    <cfargument name="number" type="any" required="true" hint="Any string that may be an integer">
    <cfargument name="bits" type="numeric" default="32" required="false" hint="Number of bits to determine the max size of the integer">
    <cfargument name="signed" type="boolean" default="true" required="false" hint="If the integer is signed or unsigned">

    <cfset local.ReturnInt = Arguments.Number>

    <!--- Make sure it's just a number --->
    <cfif REFind("^-?[1-9]+[0-9]*$", local.ReturnInt) EQ false>
        <cfset local.ReturnInt = 0>
    </cfif>

    <!--- Check size --->
    <cfif Arguments.signed EQ true>
        <cfif local.ReturnInt LT PrecisionEvaluate(-(2^(Arguments.bits - 1))) OR local.ReturnInt GT PrecisionEvaluate((2^(Arguments.bits - 1)) - 1)>
            <cfset local.ReturnInt = 0>
        </cfif>
    <cfelse>
        <cfif local.ReturnInt LT 0 OR local.ReturnInt GT PrecisionEvaluate((2^Arguments.bits) - 1)>
            <cfset local.ReturnInt = 0>
        </cfif>
    </cfif>

    <cfreturn local.ReturnInt>
</cffunction> 
```

# winapi - Win32，资源文件，加载到内存中

> ID：11865269
> 
> 赞同：1
> 
> 时间：2012-08-08T13:10:53.877
> 
> 标签：winapi

这是我的`test.rc`文件：

```
shader.hlsl shaders "HLSL\\shader.hlsl" 
```

我知道它看起来不像通常的 rc 文件，但是当我使用这样的函数时。

```
D3DX11CompileFromResource(handle, L"shader.hlsl", NULL, NULL, NULL, "VS", "vs_4_0", 0, 0, NULL, &s, &err, &hr); 
```

它工作得很好，但我想将此文件加载到内存中。请告诉我该怎么做，因为我现在缺乏想法。我试过类似的东西。

```
HRSRC hSrc = FindResource(GetModuleHandle(0), L"shader.hlsl", L"shaders"); 
```

但没有成功。

### 编辑：

`FindResource()`返回 NULL！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:19:44.453

您走在正确的轨道上：您需要使用一系列`FindResource`// `LoadResource`：`LockResource`

```
HMODULE hModule = GetModuleHandle(NULL);
HRSRC hRes = FindResource(hModule, L"shader.hlsl", L"shaders"); 
HGLOBAL hMem = LoadResource(hModule, hRes);
LPVOID lpResource = LockResource(hMem);

DWORD size = SizeofResource(hModule, hRes); 
```

`lpResource`是指向您的资源的指针。`size`是内存块的字节大小。当然，完成后别忘了打电话`FreeResource(hMem)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:26:05.170

问题部分解决。事实上，我对“rcdata”类型的资源有问题，而不是“着色器”。我以第二个为例，但没有检查（真的很抱歉，我浪费了你的时间）。似乎除了“rcdata”之外的每个类型名称都有效。但为什么...？

**编辑：** 问题完全解决了。我只需要使用 RT_RCDATA 作为类型名称。似乎“rcdata”类型是一个标准名称。

# c# - 我们可以在 BackgroundWorker 中使用 DispatcherTimer 吗？

> ID：11865274
> 
> 赞同：1
> 
> 时间：2012-08-08T13:11:04.157
> 
> 标签：c#, .net, wpf

我有一些 WPF 应用程序。我需要在 a 中执行一些代码，`BackgroundWorker` 并`DispatcherTimer`为此使用。此外，该代码不使用 UI。

我的问题是这样可以吗？或者最好使用`Timer`or `while`& `Thread.Sleep`？

使用`Task`&`Timer`或`DispatcherTimer`代替更好`BackgroundWorker`吗？

所以我们有两种方法可供选择。（或者更多？）

1.  `BackgroundWorker`来电`DispatcherTimer || Timer || (While & Thread.Sleep)`

2.  `Task` 来电`DispatcherTimer || Timer || (While & Thread.Sleep)`

**我只需要知道最佳性能解决方案。**

这是一些代码

```
DispatcherTimer logManagerUpdater = new DispatcherTimer(DispatcherPriority.Background);
BackgroundWorker logManagerWorker = new BackgroundWorker();

private void StartLogManager()
{
    logManagerWorker.DoWork += new DoWorkEventHandler(logManagerWorker_DoWork);
    logManagerWorker.RunWorkerAsync();
}

void logManagerWorker_DoWork(object sender, DoWorkEventArgs e)
{
    if (this.logManagerWorker.CancellationPending)
    {
       e.Cancel = true;
       return;
    }

    logManagerUpdater.Interval = new TimeSpan(0, 0, 10);
    logManagerUpdater.Tick += new EventHandler(logManagerUpdater_Tick);  
    logManagerUpdater.Start();
}

void logManagerUpdater_Tick(object sender, EventArgs e)
{
   LogManagerJob();   
   LogDBManagerJob();  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T13:46:49.487

如果您的代码不使用 UI，那么`DispatcherTimer`是不必要的 - 它专门用于*在 Dispatcher 线程*（通常是 UI 线程）上触发代码。一个普通的计时器就足够了。

此外，在您发布的代码中，您实际上是在“创建后台线程来创建后台线程”。我建议您完全删除后台工作人员，并在您的`StartLogManager`方法中创建计时器。

# php - 在php中发送邮件时出错

> ID：11865275
> 
> 赞同：0
> 
> 时间：2012-08-08T13:11:10.240
> 
> 标签：php

我正在使用 php 的邮件功能来发送邮件，所以我正在调用类似的函数

```
mail($EMAIL_HOST_USER, "Invitation for conference ", $message); 
```

但我遇到了一个意外错误

```
<br />
<b>Parse error</b>:  syntax error, unexpected 'mail' (T_STRING) in <b>/opt/lampp/htdocs/UI/user/usernotify.php</b> on line <b>43</b><br /> 
```

我不确定我在哪里做错了。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:12:30.757

您在显示的行上方的某行有语法错误 - 很可能您忘记了分号或类似的东西。

# jquery-mobile - 单个复选框单击选中 Jquery mobile 中的所有复选框

> ID：11865277
> 
> 赞同：0
> 
> 时间：2012-08-08T13:11:25.467
> 
> 标签：jquery-mobile, cordova

在 jquery mobile 中，我为产品创建了一个单独的页面。它是从带有 phonegap 的查询 Local Sql-lite 数据库中动态加载的。下面的编码工作正常，并显示带有复选框的产品列表。但是，如果我单击一个复选框，则会选中所有复选框。屏幕上还会显示一些本机复选框。如何正确显示此复选框列表并在提交时获取选中的复选框值？

```
$('#productspage').live('pageinit',function(event){
    loadProducts();
});

// Load Products for Products page
function loadProducts()
{
    var db=window.openDatabase("salesorder", "1.0", "SalesOrder", 1048576);
    if(db!=null)
    {
        db.transaction(queryProductsTable, errorPT);
    }
    else
    {
        alert("table not exists");
    }
}

function queryProductsTable(tx)
{
    tx.executeSql('SELECT * FROM products', [], queryProductsSuccess, errorPT);
}

function errorPT(err) {
    alert("Error processing SQL: "+err.code);
}

//Query products and append to products_list
function queryProductsSuccess(tx, results) {
    var len = results.rows.length;
    $("#products_list").empty();
    for (var i=0; i<len; i++){
           var product_id=results.rows.item(i).productid; // Returns null
           var product_name=results.rows.item(i).productname;
           var product_price=results.rows.item(i).unit_price;
           var product_stock=results.rows.item(i).qtyinstock;
           $("#products_list").append("<input type='checkbox' name='products_check' id='"+product_id+"' value='"+product_name+"' price='"+product_price+"' stock='"+product_stock+"'  class='custom'><label for='"+product_id+"'>"+product_name+"</label>");
      }
      $("#products_list").trigger("create");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:20:19.757

您为每个复选框赋予了相同的名称。将行号附加到名称中，以便获得唯一名称。

# php - 如何在调整大小时找出文本区域的新尺寸（PHP）

> ID：11865279
> 
> 赞同：1
> 
> 时间：2012-08-08T13:11:38.150
> 
> 标签：php, resize, textarea

我的页面上有一个 textarea 元素，可以在各种浏览器中调整大小。我想在调整大小后找出新的维度（列和行），以便在重新加载页面时，我可以更新 php 脚本中的列和行属性。这样，textarea 元素尺寸将保持用户设置它们的方式。

有没有办法在没有 js 的情况下实现这一点，如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:15:09.993

不是没有javascript，没有。Javascript 是唯一可以查看此类数据并对其执行任何操作的客户端执行代码。PHP 在完成执行代码并将所有数据发送给用户之后，什么都不关心，所以就这样了。我没有尝试过silverlight，但我怀疑其中是否有任何东西可以返回其中的属性元素。你只剩下javascript了。

# vb.net - 不一致的 URL 生成行为

> ID：11865280
> 
> 赞同：0
> 
> 时间：2012-08-08T13:11:41.860
> 
> 标签：vb.net

我以前试过这个问题，但没有得到回应。我猜这可能是我提出问题的方式。

好的，下面的代码应该与此复选框一起使用：

```
 <ItemTemplate>
     <asp:CheckBox ID="recs" runat="server" onclick = "cmd_Click(this)" />
   </ItemTemplate> 
```

我们实施了全选/取消全选功能。

如果用户选中一个复选框，则下面的代码应该获取单元格 1 的值并附加到下面的链接。然后我们可以查看该链接的内容。

如果用户选中两个或更多复选框，代码会获取单元格 1 的值并将它们附加到链接中，用逗号分隔链接，然后我们就可以查看链接的内容。

问题是，如果我们只选中一个复选框，那么选中哪个复选框并不重要，我们会得到单元格 1 的值，并且该链接的内容总是正确显示。

但是，如果我们选中多个复选框，则链接的某些内容为空白。

最令人沮丧的是，每个链接都很好用。问题出现在您检查多个链接时。

任何想法下面的代码可能有什么问题？

```
Protected Sub GetCheck_Click(ByVal sender As Object, ByVal e As EventArgs)
    Dim uItems As String = String.Empty
    For Each r As GridViewRow In GridView1.Rows
        If CType(r.Cells(0).FindControl("recs"), CheckBox).Checked Then
            If uItems <> String.Empty Then
                uItems += ","
            End If
            uItems += "http://default.html?gen=" & r.Cells(1).Text & "&mode=print&o=N&s=0.4"
        End If
    Next
Response.Redirect("getPRecs.aspx?p=" & Server.recsEncode(uItems))
End Sub 
```

# android - phonegap如何从js调用jar方法

> ID：11865287
> 
> 赞同：0
> 
> 时间：2012-08-08T13:11:54.543
> 
> 标签：android, cordova

嗨，我在移动应用程序中。

我在 phonegap（html5、JQuery、JS）中开发了一个应用程序，我想将收据打印到蓝牙打印机。

我购买了一台 BT 打印机，我下载了制造商的 SDK，现在我想知道我必须遵循的方式才能完成我的应用程序。

打印机制造商 SDK 包含一个 .jar 库，我可以将其包含到我的项目中以公开打印机制造商的方法。

我按照所有步骤将上述 .jar 包含在我的项目中。

现在我想从我的应用程序中调用制造商 .jar 库中的方法。

这样做的正确方法是什么。

我必须创建一个phoneGap插件还是有其他方法？？？？

有没有分步教程？？？

提前谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:19:33.183

这个问题实际上有两个部分。

首先，您可以创建一个 phonegap 插件来与自定义 java 代码进行交互。在您的情况下，这将是使用罐子的“胶水”。

其次，如果 jar 在编译时可用，则需要将 jar 添加到项目中以便它包含在构建中，或者如果它仅在运行时可用（并且包含已编译的 dex 类，而不是可移植的 java 类）您使用 dex 类加载器加载它并通过反射调用它。但是，如果它是用于桌面的随机 jar，您将无法使用它。

# json - Treestore 为空 - JSON 有效吗？

> ID：11865288
> 
> 赞同：3
> 
> 时间：2012-08-08T13:11:54.723
> 
> 标签：json, extjs, tree, store

我的代码看起来像这样，但商店/树中没有数据。

JSON 存储是否有效？我需要`root`在 JSON 之上吗？

树面板中必须定义哪些列？

**JSON：**

```
{
   "status" : {
      "status" : 0,
      "msg" : "Ok",
      "protocolversion" : "1.1.json"
   },
   "value" : {
      "name" : "Root",
      "path" : "\/",
      "leaf" : false,
      "children" : [
            {
               "name" : "subfolder1",
               "path" : "\/subfolder1",
               "leaf" : false,
               "children" : []
            },
            {
               "name" : "subfolder2",
               "path" : "\/subfolder2",
               "leaf" : false,
               "children" : []
            },
            {
               "name" : "report1",
               "path" : "\/report1",
               "leaf" : true,
               "children" : []
            }
         ]
   }
} 
```

**我的 ExtJs 代码：**

**模型：**

```
// Model for store
     var oModel = Ext.define('TreeModel', {
        extend: 'Ext.data.Model',
        fields: [
           { name: 'name',         type: 'string' },
           { name: 'path',         type: 'string' }
        ]
     }); 
```

**店铺：**

```
 // Store with local proxy
     var oStore = Ext.create('Ext.data.TreeStore', {
        model: oModel,
        autoLoad: true,
        proxy: {
           type  : 'ajax',
           url   : './data/response.json'
        },
        reader: {
           type  : 'json',
           root  : 'value'
        }
     }); 
```

**树形面板：**

```
 // View with TreePanel
     var oTreePanel = Ext.create( 'Ext.tree.Panel', {
        store       : oStore,
        useArrows   : true,
        displayField: 'text',
        rootVisible : true,
        multiSelect : true,
        border      : 0,
        columns     : [
           {
              xtype    : 'treecolumn',
              dataIndex: 'name',
              text     : 'Tree',
              flex     : 3
           },
           {
              dataIndex: 'path',
              text     : 'Path',
              flex     : 2
           }
        ]
     } ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T10:45:49.270

您需要在您的 json 和阅读器的根目录中更改`value`为。`children`

思考的方式是这样的：阅读器的根告诉阅读器记录数据从哪里开始。但是因为树数据是嵌套的（一个节点可以有子节点）ExtJS 在每个节点中寻找另一个根（然后在后一个节点中寻找另一个根，以此类推）。

因此，如果您将阅读器的根称为“孩子”，如果它有节点，它将在节点内找到子`children`节点。

你同样可以称它为“subs”或“whatever”；您只需要确保在整个层次结构中使用相同的东西，包括 json 数据的根。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-30T15:24:48.783

这是一个树面板的示例，我能够使用“数据”作为子级在 MVC 结构中获得功能：

**JSON：**

```
Ext.data.JsonP.callback4({
    "message": "", "data": [
      {
          "descr": "TEST REASON",
          "leaf": false,
          "data": [
            {
                "descr": "TEST REASON",
                "leaf": true,
                "data": null
            }
          ]
      },
      {
          "descr": "Another Type Code",
          "leaf": false,
          "data": []
      },
      {
          "descr": "Quite A Different One I Think",
          "leaf": false,
          "data": [
            {
                "descr": "A Child Of That",
                "leaf": true,
                "data": null
            }
          ]
      }
    ]
}) 
```

**模型：**

```
Ext.define('App.model.treePanel', {
    extend: 'Ext.data.Model',
    fields: [
        { name: 'descr', type: 'auto' },
        { name: 'leaf', type: 'auto' }
    ],
    proxy: {
        type: 'jsonp',
        url: 'yourURL',
        //extraParams: {
        //},
        headers: { 'Content-type': 'text/json;  charset=utf-8', 'Accepts': 'text/json' },
        reader: {
            type: 'json',
            root: 'data',
            successProperty: 'success'
        }
    }
}); 
```

**店铺：**

```
Ext.define('App.store.treePanels', {
    extend: 'Ext.data.TreeStore',
    model: 'App.model.treePanel'
}); 
```

**看法：**

```
Ext.define('App.view.treePanel', {
    extend: 'Ext.tree.Panel',
    xtype:'treePanel',
    title: 'My Items',
    store: 'treePanels',
    rootVisible: false,
    //hideHeaders:true,
    columns: [
        {
            xtype: 'treecolumn',
            dataIndex: 'descr',
            text: 'Current Types and Reasons',
            flex: .5
        }
    ],
    tbar:{
        items: [
            {
                xtype: 'button',
                text: 'Remove Item'
            },
            {
                xtype: 'button',
                text:'Edit Item'
            }
            ]
    }
}); 
```

**请注意：`rootVisible:false`是必需的。**

# php - if else 语句

> ID：11865302
> 
> 赞同：0
> 
> 时间：2012-08-08T13:12:32.383
> 
> 标签：php, forms, validation, input, laravel

我正在使用 Laravel php 框架，并且我有一个带有 2 个上传字段的表单。字段工作正常，没有问题。.php 代码如下。

PS。对于那些不熟悉花括号的人来说，它基本上只是`<?php echo .... ?>`在刀片模板引擎中。

编码

```
{{  Form::label('upload_files', 'Lataa bändin LAVAKARTTA, esim .jpg (tiedosto      pakollinen)'); }}
{{  Form::file('upload_files', '', array('class' => 'form-field', 'form-text')); }}

{{  Form::label('upload_files_raider', 'Lataa bändin tekninen RAIDERI esim .txt (tiedosto pakollinen)'); }}
{{  Form::file('upload_files_raider', '', array('class' => 'form-field', 'form-text')); }} 
```

提交表单后，我将内容（文件）传递到我的上传目录。

在我的控制器中，我有以下代码：

```
$a = $formsubmit['esiintyva_artisti'];

// if no file dont upload
// $a is used to give the filename a ending that correspons to a user

if($_FILES['image']['error'] == 0){
//if(!isset($_FILES)){
    Input::upload('upload_files', 'public/uploads', $a . '-artistin-tai-bandin-lavakartta.jpg');
};

if($_FILES['image']['error'] == 0){
//if(!isset($_FILES)){
    Input::upload('upload_files_raider', 'public/uploads', $a . '-artistin-tai-bandin-raideri.txt');
}; 
```

继承人的问题：

当我提交没有任何上传文件的表单时，我收到一个错误：

```
Fatal error: Call to a member function move() on a non-object in /var/www/...../laravel/input.php on line 230 
```

提前感谢社区！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:20:01.503

错误可能来自您在未设置**$_FILES['image']**数组时检查它，因为您在表单中使用了**upload_files**和**upload_files_raider**。尝试使用 Input::file('upload_files') 检查上传文件：

```
if( !is_null(Input::file('upload_files')) ) {
    Input::upload('upload_files', 'public/uploads', $a . '-artistin-tai-bandin-lavakartta.jpg');
}

if( !is_null(Input::file('upload_files_raider')) ) {
   Input::upload('upload_files_raider', 'public/uploads', $a . '-artistin-tai-bandin-raideri.txt');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:33:28.860

只需检查 NULL 即可轻松解决该问题，if 语句如下：

```
 if ($file_upload == NULL) 
    {
        return View::make('site.form')->with('message', 'Choose the file to be uploaded!');
    }
    else 
    {
        Input::upload('file_upload', 'public/uploads', $date.' '.$upload_file_name);
    } 
```

# jquery - 移动设备上的 jquery .appendTo()

> ID：11865306
> 
> 赞同：0
> 
> 时间：2012-08-08T13:12:45.230
> 
> 标签：jquery, mobile, mobile-safari

我在想一件事。一旦使用 jquery 单击，我正在使用 .appendTo() 将项目发送到另一个列表。但是，一旦 .appendTo() 发生，我就会丢失新列表中项目的所有其他事件。有趣的是，这只发生在经过测试的移动设备（iPad、iPhone 等）上。有谁知道为什么会这样？

我要补充一点，我需要应用了 .appendTo() 的项目来保存手势事件。一旦应用了 .appendTo()，这些也会丢失。jquery .on() 可以保存手势事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:21:02.787

这首先取决于您如何绑定点击事件。不知道为什么它只会影响移动设备，但我假设，一旦移动到另一个容器，你就有一个不同的元素实例，没有它的事件。您是否尝试过使用 JQuery 监控冒泡事件[`.on()`](http://api.jquery.com/on/)？例如

```
$(body).on('click', '.itemInList', function() { ... }); 
```

这将处理当前元素和任何未来创建的元素的点击事件。

# java - 如何扩展 Java 堆栈跟踪的大小以查看堆栈底部？（触发堆栈溢出）

> ID：11865307
> 
> 赞同：16
> 
> 时间：2012-08-08T13:12:47.213
> 
> 标签：java, debugging, scala, stack-overflow, stack-frame

在 Java 中，有没有办法查看完整的、未截断的堆栈跟踪（例如，通过增加记录的帧数），或者以其他方式到达堆栈跟踪的*底部*？通常堆栈跟踪在 1024 帧处从顶部截断，但对于堆栈溢出问题，这是毫无价值的，因为您确实需要查看是谁发出了触发递归的调用，在底部附近。*在堆栈中间*截断会更好，但显然 Sun 的 JVM 不够聪明，无法做到这一点。

也许甚至是一些特殊的太阳特定标志？我尝试将堆栈大小减小到允许的最小值（-Xss1000），但这仍然超过 1024 帧的价值。

就我而言，我正在尝试调试 Hadoop 映射器中发生的堆栈溢出，但前提是在非常大的输入上运行时。我认为问题出现是因为递归操作（Scala's `foldRight`）正在一个非常非常大的链表上完成，我需要以非递归方式重写它......但我需要知道是谁调用了`foldRight`. 这是一个在很多地方直接和间接调用的基本例程，并且我正在使用大量代码，所以这是非常不明显的。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-08T20:03:54.800

尝试`-XX:MaxJavaStackTraceDepth`JVM 选项。

这是来自[Stas 博客的描述](http://stas-blogspot.blogspot.se/2011/07/most-complete-list-of-xx-options-for.html#MaxJavaStackTraceDepth)

> 最大限度。不。Java 异常的堆栈跟踪中的行数（0 表示全部）。对于 Java > 1.6，值 0 确实意味着 0。必须指定值 -1 或任何负数才能打印所有堆栈（在 Windows 上使用 1.6.0_22、1.7.0 进行测试）。对于 Java <= 1.5，值 0 表示一切，JVM 在负数上阻塞（在 Windows 上使用 1.5.0_22 进行测试）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T13:17:10.690

尝试使用 jstack：

[http://docs.oracle.com/javase/6/docs/technotes/tools/share/jstack.html](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jstack.html)

[http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-VM/html/tooldescr.html#gblfh](http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-VM/html/tooldescr.html#gblfh)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T13:17:36.537

您可以自己迭代堆栈跟踪

```
Throwable t =

for(StackTraceElement ste: t.getStackTrace()) {
    // is it a repeat??

} 
```

默认的 printStackTrace 将打印已记录的每个级别。您的问题是堆栈对于它放入堆栈跟踪的内容来说太深了。

你能尝试减少你的筹码量吗？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-08T13:17:52.233

如果您在调用进入可疑的堆栈溢出*之前*可以访问它，则可以生成一个额外的堆栈跟踪，例如`new Exception().getStackTrace`. 请注意，`foldRight`它本身不会产生无限递归。也许您只是内存不足，请尝试增加 JVM 的堆栈大小。

# javascript - 是否有必要使用 === 来比较 Javascript 中的字符串还是 == 就足够了？

> ID：11865308
> 
> 赞同：11
> 
> 时间：2012-08-08T13:12:50.357
> 
> 标签：javascript

> **可能重复：**
> [JavaScript === vs ==：我使用哪个“相等”运算符有关系吗？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

`===`由于意外的类型转换，我可以理解为什么在比较数字、布尔值、空字符串等时是必要的，例如

```
var foo = 1; 
var bar = true; 
// bar == foo => true
// bar === foo => false 
```

但是 在将变量与***非空***字符串`==`进行比较时会不会引入错误？在这种情况下使用over是否更有效？*`==``===`*

 ** * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T13:16:14.453

这已经在这里被问了很多，所以我会让一个更好的海报然后我自己回答。

看看这里： http: [//longgoldenears.blogspot.com/2007/09/triple-equals-in-javascript.html](http://longgoldenears.blogspot.com/2007/09/triple-equals-in-javascript.html)

3个等号表示“没有类型强制的平等”。使用三等号，值的类型也必须相同。

```
0==假 // 真
0===false // false，因为它们是不同的类型
1=="1" // true，自动类型强制
1==="1" // false，因为它们是不同的类型

```

**JavaScript 中 == 和===** [的区别](https://stackoverflow.com/questions/523643/difference-between-and-in-javascript)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T13:16:26.107

**始终**使用标识运算符 ( `!==`and `===`) 并仅在需要时手动执行类型强制 (例如`Boolean(someVar)`or )是一种很好的做法`Number(someVar)`。

[一个有趣的小提琴](http://jsfiddle.net/QjSYG/9/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T13:14:24.020

好吧，我自己回答了... 5 == "5"，但是 5 !== "5"，这可能是出乎意料的。不过，我会赞扬任何有更深入见解的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T13:17:56.480

"==" 在比较完成之前进行类型转换。这就是为什么 5 == "5" 是真而不是假的原因。

而 "===" 则不进行这种转换，因此只要类型不同， 5 === "5" 就不同。*

# xml - Indesign CS6 在文档文本框内容中导入 xml 内容

> ID：11865309
> 
> 赞同：0
> 
> 时间：2012-08-08T13:12:50.753
> 
> 标签：xml, adobe-indesign

我在文档上放置元素时遇到问题

```
var myDocument = app.activeDocument;
var productXML = new XML (xmlString);
        alert(productXML.children().length());
        x1=0;
        y1=0;
        x2=25;
        y2=25;
            for(myCounter = 0; myCounter < productXML.children().length(); myCounter++){
               alert(productXML.product[myCounter].name);
               element = myDocument.pages.item(0).textFrames.add(); 
                element.geometricBounds = [x1,y1,x2,y2]; 
                y1 = y1+25;
               element.contents = productXML.product[myCounter].name;
            } 
```

在上面的代码中，我得到了错误

y1 = y1+25；和 element.contents = productXML.product[myCounter].name;

当我在警报中显示产品名称时产品名称正确，但我无法将其分配给内容。并且改变 xy 位置也会引发错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:35:20.953

它只是类型转换问题....现在明白了

# python - 反转字典顺序python

> ID：11865311
> 
> 赞同：-6
> 
> 时间：2012-08-08T13:12:56.337
> 
> 标签：python, python-2.6

我有一个python字典如下：

```
DictValue = {
'Event1': {},
'Event2': {
    'copy3': {
        'SourcePath': 'souce3',
        'DestPath': 'dest3',
        'Platform': u 'Debug|Win32'
    },
    'copy2': {
        'SourcePath': 'souce3',
        'DestPath': 'dest2',
        'Platform': u 'Debug|Win32'
    },
    'copy1': {
        'SourcePath': 'souce1',
        'DestPath': 'dest1',
        'Platform': u 'Debug|x64'
    },
    'copy5': {
        'SourcePath': 'souce5',
        'DestPath': 'dest5',
        'Platform': u 'Release|Win32'
    },
    'copy4': {
        'SourcePath': 'souce4',
        'DestPath': 'dest4',
        'Platform': u 'Release|x64'
    }
}
} 
```

我想对 Dictionary 值进行排序，使其看起来像

```
{
'Event1': {},
'Event2': {
    'copy1': {
        'SourcePath': 'souce1',
        'DestPath': 'dest1',
        'Platform': u 'Debug|Win32'
    },
    'copy2': {
        'SourcePath': 'souce2',
        'DestPath': 'dest2',
        'Platform': u 'Debug|Win32'
    },
    'copy3': {
        'SourcePath': 'souce3',
        'DestPath': 'dest3',
        'Platform': u 'Debug|x64'
    },
    'copy4': {
        'SourcePath': 'souce4',
        'DestPath': 'dest4',
        'Platform': u 'Release|Win32'
    },
    'copy5': {
        'SourcePath': 'souce5',
        'DestPath': 'dest5',
        'Platform': u 'Release|x64'
    }
}
​} 
```

可能吗？请帮忙。我在用`python 2.6`

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T13:14:26.230

字典没有任何排序。如果您需要订购，您的选择是：

*   改为使用元组列表。
*   `.keys()`循环时排序（或`.values()`或`.items()`，取决于您的需要）
*   请改用[OrderedDict](http://docs.python.org/library/collections.html#collections.OrderedDict)。

# mainframe - 将文件加载到 csv 文件从桌面到大型机平面文件

> ID：11865319
> 
> 赞同：0
> 
> 时间：2012-08-08T13:13:31.433
> 
> 标签：mainframe, rexx

我有这样的要求，我需要将 csv 文件加载到大型机平面文件中。这是我到目前为止的想法 1-我们将创建文件，因为我们可以更新桌面 csv 文件路径 2-rexx 将检查此路径并将 csv 文件加载到大型机 pds。

我正在寻找 - 如何使用 REXX 将 csv 文件加载到大型机...？

谢谢，阿基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:25:06.983

和其他人一样，我不太确定你想要做什么。您是否要将 .csv 文件从 PC 传输到大型机 PDS 成员？接着？是否要解析上传的 .csv 文件？

我可以说至少会发生一件事 - .csv 文件可能是 ASCII 格式，当它传输到大型机时，它通常会自动转换为 EBCDIC 格式。同样，我对您的其他要求并不完全清楚。

# php - MySQLi - 获取数组和准备好的语句

> ID：11865320
> 
> 赞同：1
> 
> 时间：2012-08-08T13:13:37.953
> 
> 标签：php, arrays, mysqli, prepared-statement

我想显示表格中的行，但它不工作，它不回显任何东西。

```
$query = "SELECT * FROM table ORDER BY date DESC LIMIT ?, 10";
$stmt = $mysqli->stmt_init();
if ($stmt->prepare($query)) {

    $stmt->bind_param("i", $row_start);
    $stmt->execute();
    $stmt->bind_result($result);
    $stmt->fetch();
    $stmt->close();
}
while($row = mysqli_fetch_array( $result )) {
    echo $row['title'];
} 
```

我有旧 mysql ext 的代码，它可以工作。尝试使用 mysqli 获得相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:40:15.313

阅读以下链接：-

[Mysqli 抽象，从准备好的语句中获取数组](https://stackoverflow.com/questions/1872064/mysqli-abstraction-fetching-arrays-from-prepared-statements)

call_user_func_array(...) 函数只是使用给定数组调用 $query 对象上的 bindParam 或 bind_result 方法，就好像您已将数组的每个元素作为方法参数提供一样。

您可能希望使用下面的代码检查您遇到问题的 SQL 语句。为了使其完全可测试，我对其进行了一些重写，因为原始代码取决于抽象层中的语句类。

# actionscript-3 - ASDoc：如何在包中包含所有类（并且仅包含那些类）而不手动指定它们？

> ID：11865322
> 
> 赞同：1
> 
> 时间：2012-08-08T13:13:39.060
> 
> 标签：actionscript-3, apache-flex, asdoc

任务很简单，我需要在某个包中记录十几个 ActionScript / Flex 类，并且“只有”两个要求：

1.  **只有那些类应该被记录**，没有来自其他包的类。
2.  **我不想手动枚举所有类**，这会产生维护负担（每当从包中添加或删除新类时都需要更新 ASDoc 脚本）。

`-doc-sources`将允许我指定一个包目录的路径，这对第二点有好处，但会使第一点难以实现，因为在使用方法`-exclude-dependencies`时选项会引发错误。`-doc-sources`

指定要记录哪些类的另一种方法是`-source-path`+`-doc-classes`但`-doc-classes`不支持通配符，所以我认为我不能在上面扔一个包。

第三种方法是使用`-doc-namespaces`，但它需要一个 XML 文件，其中包含手动枚举的所有类，因此这也无济于事。

有没有办法通过当前的 ASDoc 实现来完成我的“简单”任务？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-03-09T12:57:54.057

使用[-package name"description"](http://help.adobe.com/en_US/flex/using/WSd0ded3821e0d52fe1e63e3d11c2f44bc36-7ffa.html)

# ios - 在 IndexPath 移动行时更新数据源的问题

> ID：11865326
> 
> 赞同：0
> 
> 时间：2012-08-08T13:13:53.623
> 
> 标签：ios, uitableview, ios5

我试图通过滑动手势将一行从一个位置移动到另一个位置，即。当我向右滑动任何单元格时，滑动的单元格应该转到单元格的底部，为此我已经编写了代码，并且它在某些情况下工作正常，即假设我在索引位置 0 处滑动单元格，它会正确到单元格的底部，假设我的数组中有**“A，B，C”**，所以表格显示“A，B，C”。现在假设我选择**“A”**在位置**0**处滑动它在底部现在表格将显示正确**的 B、C、A**。现在我滑动位于位置**1的****“C”** ，以便它应该到底部。现在我的表显示**C、A、B。******但事实上它应该显示**B,A,C。******

 ****下面是我的代码

```
if (state == JTTableViewCellEditingStateRight) 
{

   NSIndexPath *selectedIndexPath = [tableView indexPathForSelectedRow];

  [tableView moveRowAtIndexPath:selectedIndexPath toIndexPath:[NSIndexPath indexPathForRow:[self.rows count]-numberOfMoves inSection:0]];  
   [self moveRows];
} 

- (void)moveRows
{

    NSIndexPath *selectedIndexPath = [self.tableView indexPathForSelectedRow];
    NSString *selectedString = [self.rows objectAtIndex:selectedIndexPath.row];     

    [self.rows removeObjectAtIndex:selectedIndexPath.row];
    [self.rows insertObject:selectedString atIndex:[self.rows count]];   
} 
```

问候兰吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:38:17.653

让我们分析你的代码：

```
[self.rows insertObject:selectedString atIndex:[self.rows count]]; 
```

似乎您总是将新项目放在数组的末尾而不是新位置。

* * *

移动对象的正确方法是您的数据源如下：

```
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath {
    id _object = [self.rows objectAtIndex:fromIndexPath.row];
    [self.rows removeObjectAtIndex:fromIndexPath.row];
    [self.rows insertObject:_object atIndex:toIndexPath.row];
} 
```

它可能会帮助你。****

# android - Android webview - 缓存非法过期

> ID：11865327
> 
> 赞同：0
> 
> 时间：2012-08-08T13:13:55.500
> 
> 标签：android, webview

在 webview 中加载特定 url 时，我收到此警告

08-08 18:41:38.259：E/cache(3195)：非法过期：2013 年 8 月 8 日星期四 02:25:58 UTC

很多次。结果是在 webview 中打开该 url 需要花费大量时间。

这个警告是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:42:57.393

警告仅与模拟器一起出现。在设备上它工作正常。

# wpf - 在可见性更改触发器上更新填充颜色

> ID：11865328
> 
> 赞同：0
> 
> 时间：2012-08-08T13:13:55.873
> 
> 标签：wpf, triggers, visibility

我需要根据可见性的顺序更改 DataGrid 中矩形的颜色。例如，如果我有 5 行，并且如果第 3 行的矩形第一次变得可见，则应该将其填充为绿色。下一个可见的矩形应该是红色的，然后……

这是我的代码：

```
 <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Rectangle x:Name="colorBox" Height="15" Width="15"  Stroke="#9C9C9C" 
                                           Visibility="{Binding Path=IsDisplayable, 
                                                                Converter={StaticResource BoolVisibilityConverter}}">
                            <Rectangle.Style>
                                <Style TargetType="{x:Type Rectangle}">
                                    <Style.Triggers>
                                        <Trigger Property="Visibility" Value="Visible">
                                            <Setter Property="Fill" Value="{Binding Path=FillColor}" />
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Rectangle.Style>
                        </Rectangle>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate> 
```

我已经编写了这段代码，但它不起作用。从逻辑上讲，似乎没有错误，但实际上我认为当矩形的可见性发生变化时，这个触发器永远不会被调用。请给我一个很好的解决这个问题的方法。谢谢

IsDisplayable 属性在此处更新：

```
<DataGridTemplateColumn x:Name="CheckboxColumnHeader" 
                                Header="{Binding Source={x:Reference Name=treeView}, Path=DataContext.CheckboxColumnHeader}"
                                IsReadOnly="True" >
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <CheckBox x:Name="displayedObjects" IsChecked="{Binding IsDisplayable, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                        </CheckBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
                <DataGridTemplateColumn.CellStyle>
                    <Style TargetType="{x:Type DataGridCell}" BasedOn="{StaticResource {x:Type DataGridCell}}">
                        <Setter Property="HorizontalContentAlignment" Value="Center" />
                    </Style>
                </DataGridTemplateColumn.CellStyle>
            </DataGridTemplateColumn> 
```

最后，下面是代码：

```
public bool IsDisplayable
    {
        get
        {
            return this.isDisplayable;
        }
        set
        {
            if (this.isDisplayable!= value)
            {
                this.isDisplayable= value;
                //NotifyOfPropertyChange(() => this.isDisplayable);
                Action notify = () => NotifyOfPropertyChange(() => this.isDisplayable);
                Dispatcher.CurrentDispatcher.BeginInvoke(DispatcherPriority.ApplicationIdle, notify);
            }
        }
    }

    public Brush FillColor
    {
        get
        {
            return signalColors[currentColorIndex];
        }
        set
        {
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:34:25.737

你可以完全摆脱你的触发器......

```
 <DataGridTemplateColumn.CellTemplate>
             <DataTemplate>
                <Rectangle x:Name="colorBox" Height="15" width="15"
                           Fill="{Binding Path=FillColor}"
                           Visibility="{Binding Path=IsDisplayable, 
                                 Converter={StaticResource BoolVisibilityConverter}}"
                 />
             </DataTemplate>
      </DataGridTemplateColumn.CellTemplate> 
```

假设`FillColor`属性是类型`Brush`而不是`Color`！如果它是一种`Color`类型，则应用`ColorToBrushConverter`...

这可以在[CodePlex的](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CGAQFjAA&url=http://wpftoolkit.codeplex.com/&ei=pmoiUPCDB82rrAfP64G4AQ&usg=AFQjCNG8evhUk2o_B6fUUxRSuHf5AQdYAQ&sig2=UktbdT2GyxVdAo6IRVLytw)**扩展工具包**中找到...

```
 <Window .... 
          xmlns:Toolkit="clr-namespace:Microsoft.Windows.Controls.Core.Converters; assembly=WPFToolkit.Extended"
          ...>
          <DataGrid ...>
               ....

               <DataGridTemplateColumn.CellTemplate>
                  <DataTemplate>
                     <DataTemplate.Resources>
                          <Toolkit:ColorToSolidColorBrushConverter 
                             x:Key="colorToSolidBrushConverter" /> 
                     <DataTemplate.Resources> 
                     <Rectangle x:Name="colorBox" Height="15" width="15"
                           Fill="{Binding Path=FillColor, 
                                Converter={StaticResource colorToSolidBrushConverter}}"
                           Visibility="{Binding Path=IsDisplayable, 
                                 Converter={StaticResource BoolVisibilityConverter}}"
                      />
                 </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
                ....
          </DataGrid>
   </Window> 
```

# c++ - C 与 C++ 中 void* 的转换

> ID：11865329
> 
> 赞同：4
> 
> 时间：2012-08-08T13:13:57.117
> 
> 标签：c++, c

在 C 中，`void`指针被隐式类型转换为另一种类型。

见以下程序：

```
int main()
{
    void *p;
    int* ptr,i=5;
    p=&i;
    ptr=p; <---------------------------
    return 0;
} 
```

程序在C环境下运行[编译成功。](http://ideone.com/ZEW8d)

但是，如果在 C++ 环境下运行相同的程序，我会收到以下[错误](http://ideone.com/4WHUr)：

```
prog.cpp: In function ‘int main()’:
prog.cpp:8: error: invalid conversion from ‘void*’ to ‘int*’ 
```

这意味着在 C++ 中，我们需要显式地对`void`指针进行类型化。

那么，为什么`new`操作符的返回类型是void*呢？如何将其转换为所需的类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:18:00.053

如果你重载`operator new`，你确实会返回一个`void*`. 重载`operator new`基本上是一个简单的分配函数，就像`malloc()`在 C 中一样。

但是，当您*使用*operator时`new`，您所做的不仅仅是调用该函数；例如，您还隐式调用构造函数。`new`返回完全正确的类型是构造 with和重载`operator new`函数之间的另一个隐含区别。

C++ 给你一个错误，因为`void*`它可能指向*任何东西*。因此，如果您尝试将其分配给特定的事物，那么您所做的假设可能不正确。由于 C++ 是强类型的，因此您必须告诉编译器您的假设并明确说明；这就是类型安全提供的保护机制。C 不是强类型的，开发人员有责任小心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:17:23.080

编译器对`new`运算符进行了特殊处理，它从参数中获取类型，`new`并隐式转换为正确的类型。

如果您创建自己的`operator new`，则必须返回一个`void`指针，因为您实际上不知道类型，只知道您需要分配的内存量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T13:17:26.840

因为`new`不是函数，所以它是一个运算符，由编译器专门处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T13:18:01.567

C++ 对指针转换施加了更严格的规则。原因之一可能是因为 C++ 中的指针转换最终可能会导致机器代码，即它不是纯粹的装饰物。

例如类`A`继承`B`和`C`（按此顺序）。如果您将指针指向`C`并将其转换为`A`- 此结果为（原始）指针移位。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T13:18:33.017

您需要输入：

```
 ptr = (int *) p; 
```

new 的结果不是 void *。这取决于您正在创建的对象。如果你这样做

```
 ptr = new int [2]; 
```

不涉及重铸。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T13:54:55.010

> 那么，为什么 new 运算符的返回类型是 void* 呢？

你的意思是关键字`new`，用在新表达式中`int * p = new int[42];`吗？该表达式具有正确的类型，在这种情况下`int*`，因此不需要转换。

或者你的意思是内存分配功能`operator new()`？就像`malloc()`，这​​是处理原始内存，而不是类型化的对象，因此它的返回类型是 untyped `void*`。它由 new 表达式在内部使用，它知道正在创建的对象的类型，因此可以在对象完全构造后执行必要的指针转换。

在极少数情况下，当您想在自己的代码中使用它时，您必须自己将其转换为正确的类型；但是您几乎总是通过 new-expression 间接使用它，而不必担心这些细节。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-08T13:18:08.520

[http://www.cplusplus.com/reference/std/new/operator%20new/](http://www.cplusplus.com/reference/std/new/operator%20new/)

> operator new 可以作为常规函数显式调用，但在 C++ 中，new 是具有非常特定行为的运算符：具有 new 运算符的表达式，首先调用函数 operator new，并将其类型说明符的大小作为第一个参数，如果这成功了，然后它会自动初始化或构造对象（如果需要）。最后，表达式计算为指向适当类型的指针。

注意最后一句话。

# android - How to use XMLReader in TagHandler.handleTag(...)

> ID：11865334
> 
> 赞同：3
> 
> 时间：2012-08-08T13:14:05.810
> 
> 标签：android, html, textview, xmlreader

I am trying to add lists (`<ul>`, `<ol>`) to TextView. Usually you load HTML to TextView with

```
textview.setText(Html.fromHtml("some String with HTML in it")); 
```

but that does not work for all HTML tags. You can extend support for different tags with overriding default [TagHandler](http://developer.android.com/reference/android/text/Html.TagHandler.html) and calling it with

```
textview.setText(Html.fromHtml("some String with HTML in it", null, new MyTagHandler())); 
```

The question is: What does xmlReader in `android.text.Html.TagHandler.handleTag(boolean opening, String tag, Editable output, XMLReader xmlReader)` contain? Is it possible to get all `<li>` data for `<ul>` (or generally any element with it's contents) somehow using

```
if (tag.equals("ul")) {
  // some call to xmlReader
} 
```

And yes, I have seen those following threads already. I'm just looking for alternate solution.

*   [Html List tag not working in android textview. what can i do?](https://stackoverflow.com/questions/3150400/html-list-tag-not-working-in-android-textview-what-can-i-do)
*   [Android: How to use the Html.TagHandler?](https://stackoverflow.com/questions/4044509/android-how-to-use-the-html-taghandler)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:14:06.347

The XMLReader is actually only an interface, and the methods it defines can be read from the [API documentation](http://developer.android.com/reference/org/xml/sax/XMLReader.html).

The [ContentHandler](http://developer.android.com/reference/org/xml/sax/ContentHandler.html) that's used to handle the SAX events in the [Html](http://developer.android.com/reference/android/text/Html.html) class is known as [Html.HtmlToSpannedConverter](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3_r1/android/text/Html.java#385), which, in turn, uses its private [handleStartTag(String,Attributes)](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3_r1/android/text/Html.java#444) method to handle the starting tags of HTML elements. Thus the list of out-of-the-box supported elements seems to be br, p, div, em, b, strong, cite, dfn, i, big, small, font, blockquote, tt, a, u, sup, sub, h1...h6 and img. Finally, if the tag is not recognized, the [TagHandler](http://developer.android.com/reference/android/text/Html.TagHandler.html) given as a parameter to the HtmlToSpannedConverter is used, if it's not null.

The idea of a SAX handler is that you only get events from it: here's a start tag, here's a CDATA block, here's an end tag, etc etc. The other way of handling an XML document is by using a [DocumentBuilder](http://developer.android.com/reference/javax/xml/parsers/DocumentBuilder.html) to create a [Document](http://developer.android.com/reference/org/w3c/dom/Document.html) object of it. SAX parsers are used when you might have a large input stream which might not fit well into the memory, when you need to parse a document quickly or when you are receiving data from somewhere and want to parse it on the fly, before you have received all of it. Thus it is not possible to jump back and forth in an XML stream when using a SAX handler. So, to summarize an answer to your question "Is it possible to get all `<li>` data for `<ul>`": no, unfortunately not.

In your TagHandler you will probably want to emit a linebreak when you encounter a opening "ul" tag, then a "•" when you enter an opening "li" tag, and again linebreaks when you encounter a closing "li" or "ul" tag.

If you need to support nested lists, you could add a counter to your TagHandler so that it increments each time you encounter an opening "ul" and decrements when a closing "ul" is encountered. Then you can add different amounts of indentation for the bullet points based on the counter of nested lists.

Another way would be to create a stack of elements by adding an element to it when encountering an opening tag and removing it when encountering a closing tag. By going through the stack it would be easy to count the number of ancestor "ul" elements at any given time.

# asp.net - DataContext 是如何工作的？

> ID：11865335
> 
> 赞同：0
> 
> 时间：2012-08-08T13:14:07.920
> 
> 标签：asp.net, sql-server, linq-to-sql, webforms

我有一个名为 dtContext 的 DataContext，它有很多实体。现在我在数据库中的数据很大，所以我想知道如果我创建一个新的 DataContext 是否会将我数据库中的所有数据提取到实体中？意味着一旦更新完成，所有实体都填充了我数据库中的数据？还是仅在您从 LINQ 查询中调用实体时才获取数据？例如：

```
line 1: dtContext dt = new dtContext();
line 2: IEnumerable<MyEntity> query = from q in dt.MyEntities select q; 
```

在哪一行 MyEntities 将代表数据库中的实际数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:17:08.723

`ToList()`在您枚举查询或调用,等之前，它不会查询您的数据库`ToArray()`。这称为[延迟执行](http://www.hookedonlinq.com/DeferredExecution.ashx)。

> 许多标准查询运算符在使用 foreach 语句进行迭代时返回元素。这些操作符在请求第一个元素之前基本上没有工作，然后暂停直到请求下一个元素。在迭代返回的查询之前，不会对任何这些语句在内部执行任何工作。这种延迟执行允许您控制何时以及是否执行潜在的冗长工作。
> 
> 如果您希望立即实现查询，请调用 ToList、ToArray 或任何其他需要枚举整个序列以返回结果的运算符。
> 
> LINQ 利用了 C# 2.0 中添加的一种语言功能，该功能在编写迭代时一次返回一个元素的方法时变得更简单。yield return 语句本质上通过返回一个值来暂停循环，并在下次调用 MoveNext 时准确地从它停止的地方开始。
> 
> MSDN 库将使用延迟执行的运算符描述为：
> 
> 此方法使用延迟执行来实现。立即返回值是一个存储执行操作所需的所有信息的对象。在通过直接调用其 GetEnumerator 方法或使用 Visual C# 中的 foreach 或 Visual Basic 中的 For Each 枚举对象之前，不会执行此方法表示的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:17:31.223

没有答案。由于您没有编写查询，因此第一行不会获得任何数据。第二行也不会得到任何数据，因为您刚刚编写了查询但没有执行它。可以在迭代结果时执行查询（如 foreach、ToArray()、First() 等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T13:18:02.817

您指的是称为**急切加载**和**延迟加载**的功能，[您可能会发现这很有用](https://stackoverflow.com/questions/557830/does-linq-to-sql-automatically-lazy-load-associated-entities)，[还有这个](https://stackoverflow.com/questions/7863503/simple-eager-lazy-loading-examples-in-linq2sql)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T13:16:28.417

您尝试迭代查询的结果集的点。

如果要拉回数据的子集，请在查询中添加 where 子句。

# php - 如何禁止在“_private/session”目录中创建会话文件？

> ID：11865336
> 
> 赞同：1
> 
> 时间：2012-08-08T13:14:08.523
> 
> 标签：php, session, ini

我的网站有一个“_private/session”文件夹，它似乎为每个会话创建一个文件，然后保留该文件，导致我的托管计划因超过 1,024 个 inode 而违反。

该网站托管在 GoDaddy 上...我知道您要说什么...不要托管在 GoDaddy 上。但是，我将不胜感激帮助和建设性的意见。

每个目录的限制是 1,024 个 inode（文件和文件夹）。_private/session 目录今天到目前为止已经有超过 2,200 个文件，甚至还不到上午 9:00。这是服务器的事情吗？代码是由不再与我们合作的人开发的，所以我只剩下这些部分了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:14:08.523

在我发布这个问题之前...我查看了 php.ini 文件中的变量，并注意到会话保存有很多选项。例如，生命周期有一个变量（会话处于活动状态的时间长度）。我的设置得太高了。“垃圾收集器”运行的频率还有一个变量。这被设置为 1/1000，这意味着当新会话开始时有 0.1% 的机会清除垃圾。我将我的设置为 1/20，这意味着它将被清理得更多。此外，还有更改保存这些文件的文件夹的选项、创建子目录的选项、更改文件名的选项等等。很高兴我在发布我的问题之前看到了这个。希望这对其他人有帮助！

# c++ - 将样式表和图标添加到 QStyleOptionButton

> ID：11865339
> 
> 赞同：0
> 
> 时间：2012-08-08T13:14:17.650
> 
> 标签：c++, qt, qt4, c++11

我在委托实现的 paint() 方法中使用 QStyleOptionButton 。如何为 QStyleOptionButton 创建的按钮设置样式表和图标？

我可以设置图标，但图标已设置，该按钮的左侧..

我想在该按钮的顶部设置图标和样式表..

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:46:52.863

您必须创建要使用唯一对象名称设置样式的 QPushButton 的真实实例。然后你可以在 qcss 中使用它。如果你想继承它的外观，你`QStyleOptionButton`必须使用`initFrom(const QWidget * widget)`.`QStyleOptionButton`

IE

```
MyCustomDelegate: QAbstractItemDelegate
{
Q_OBJECT
    public:
        MyCustomDelegate(...) { styleB = new QPushButton(); styleB->setObjectName("MyCustomDelegateButton"); }
    private:
        QPushButton * styleB;
}; 
```

然后在 qcss 你做

```
#MyCustomDelegateButton
{
    background: green;
    color: red;
} 
```

这应该工作

# php - php下拉保留选择

> ID：11865345
> 
> 赞同：0
> 
> 时间：2012-08-08T13:14:24.027
> 
> 标签：php

在用户点击提交按钮后保留下拉选择 我只是在第 1-4 天工作

```
<?PHP
    $day = array( );
    $day[0] = "1";
    $day[1] = "2";
    $day[2] = "3";
    $day[3] = "4";
    $days=$day;   
?>

<select name="day"> 
     <option value="day">Day</option>
     <?PHP
        for ($days = 0; $days < 4; $days++) {           
            print"<option value='$day[$days]'>$day[$days]</option>";
        }
    ?>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:18:22.817

对于初学者，该代码需要认真重新思考。

您首先创建一个数组，然后无缘无故地将其添加到不同的变量中。

其次，您的值与索引仅相差一个数字，您可以轻松地即时计算。

最后，您在同一个数组中循环以仅使用索引（不需要数组）。

所以，把一些代码放在我的嘴里，它看起来像：

```
<select name="day"> 
    <option value="day">Day</option>
    <?php
        for ($day = 1; $day <= 4; $day++) {
            print"<option value='$day'>$day</option>";
        }
    ?>
</select> 
```

* * *

也就是说，您从未提到需要选择哪个项目。假设它是一个名为 的变量`$the_day`，这里还有一些代码：

```
<?php

$the_day = 4;

?><select name="day"> 
    <option value="day">Day</option>
    <?php
        for ($day = 1; $day <= 4; $day++) {
            $it_is = $day == $the_day ? 'selected="selected"' : '';
            print"<option value='$day' $it_is>$day</option>";
        }
    ?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:19:41.050

您可以在语句中使用选定的关键字

```
print"<option value='$day[$days]' selected='selected'>$day[$days]</option>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:19:56.047

You can pull the value passed in out of the `$_REQUEST` superglobal and check for it on each iteration. The `<option>` tag that you want preselected should include the `selected` attribute. Also, there is no need to create an array of consecutive integers when you can simply increment a counter in a loop. Something like this should work for you:

```
<select name="day"> 
<option value="day">Day</option>
<?php
    $day = null;
    if (array_key_exists('day', $_REQUEST) {
        $day = $_REQUEST['day'];
    }
    for ($i = 1; $i <= 4; $i++) {
       echo '<option value="' . $i . '"';
       if ($i == $day) {
           echo ' selected="selected"';
       }
       echo '>' . $i . "</option>\n";
    }
?>
</select> 
```

# javascript - canvg转换失败图像截止

> ID：11865347
> 
> 赞同：0
> 
> 时间：2012-08-08T13:14:25.337
> 
> 标签：javascript, image, canvas, svg, raphael

所以我正在尝试使用canvg js lib将我必须的raphael svg转换为画布，当我进行转换时，我拥有的填充一些raphael元素的图像最终被切割并移动到raphael中的某些位置svg转换完成后的元素。检查下面的图片。

![SVG 之前](../Images/a145aceb0d309677707b2a69be0bcba6.png)

![Canvg 转换后](../Images/c6411f735701d82c335c183d8af37cc8.png)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T00:46:55.893

在与 canvg 的创建者交谈后，他确定在他的脚本中需要修复一个小错误。他修复了它，现在这不是问题。只要确保您获取最新版本的 canvg 进行修复即可。

# gnuplot - 忽略 y=0 的点

> ID：11865349
> 
> 赞同：13
> 
> 时间：2012-08-08T13:14:31.343
> 
> 标签：gnuplot

我正在绘制一个图表，我想省略所有 y=0 的点。我不知道这些结果出现在哪一行，所以我不能告诉 gnuplot 只使用一些行。

这是可能的还是我必须编辑我的数据集（并将 y=0 替换为我范围之外的某个地方）？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-08T15:13:15.253

你可以很容易地做到这一点：

```
plot "mydataset.dat" u 1:($2 == 0 ? NaN : $2) 
```

这里我们使用 gnuplot 三元运算符来替换`0`with的值`NaN`。Gnuplot 会默默地忽略`NaN`，因此应该可以正常工作。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-01-09T18:08:52.950

优雅的方法是使用：

`set datafile missing`

例如，您可以这样做：

`set datafile missing '0'`

gnuplot 将跳过带有 0 符号的条目。您可以使用字符串以及 NaN 或 0.000。

# time - 这是什么时间格式？

> ID：11865352
> 
> 赞同：0
> 
> 时间：2012-08-08T13:14:41.207
> 
> 标签：time, format

我刚刚从 .mat 文件中提取了一些文件，其中一个数据集文件称为“PTIME”

但我不是 100% 格式是什么。这是一个例子..

1282813001.74319（不确定通过点的数字是否相关）

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:09:55.080

“Unix 时代”。[Unix 纪元](http://en.wikipedia.org/wiki/Unix_time)是 1970年1 月 1 日 00:00:00 UTC（或 1970-01-01T00:00:00Z）的时间。posix 时间表示自此纪元以来的毫秒数。

`1282813001 = Thu Aug 26 2010 10:56:41 GMT+0200`

该分数`74319`代表 10 微秒单位，即 0.74319 毫秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:20:15.077

那将是 Unix 纪元时间（或 POSIX 时间）。有几个在线转换器可供测试。这是我的谷歌搜索中显示的第一个：

[Epoch Converter - Unix 时间戳转换器](http://www.epochconverter.com/)

该页面还显示了如何转换为多种语言的日期。

# xcode - CorePlot：CPTPlotDataSource 提供多个图表

> ID：11865353
> 
> 赞同：0
> 
> 时间：2012-08-08T13:14:46.887
> 
> 标签：xcode, core-plot

我尝试在 OSX 应用程序的窗口中添加两个图形。我有两个自定义视图，每个视图都托管一个图表。此外，我有一个*viewController*将两个视图都称为插座并实现协议**CPTPlotDataSource**。

这两个图中的每一个都有 3 个图，它们都将*viewController*称为**dataSource**。

一切正常（两个图表都在启动时显示），直到我尝试将数据实际绘制到两个图表中。只有第一个绘​​制它的数据，只有第一个图形的标识符显示在 viewController 的*numberForPlot**方法*中。

 *现在我的问题是：*CPTPlotDataSource*向属于不同图形对象的图提供数据是否有问题？

非常感谢你的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T23:37:00.447

那应该可以正常工作。例如，Plot Gallery 示例应用程序中的 Composite Plot 演示显示了三个图形托管视图，每个视图在一个主视图中都有一个单独的图形。所有三个图都使用相同的控制器作为数据源。

确保您有一种独特的方式来识别数据源将服务的每个绘图。如果绘图是不同的类型，您可以检查绘图对象的类。如果其中一些是相同的类型，则给每个人一个唯一的标识符并在数据源中检查它。*

# c# - 使用 GPConnNet.dll 的 SQL Server 连接

> ID：11865354
> 
> 赞同：0
> 
> 时间：2012-08-08T13:14:47.140
> 
> 标签：c#, microsoft-dynamics, dynamics-gp, econnect

我正在尝试使用当前从 GP 登录的凭据连接到 Dynamics GP SQL Server 数据库。（对于上下文[http://blogs.msdn.com/b/developingfordynamicsgp/archive/2008/10/02/why-does-microsoft-dynamics-gp-encrypt-passwords.aspx](http://blogs.msdn.com/b/developingfordynamicsgp/archive/2008/10/02/why-does-microsoft-dynamics-gp-encrypt-passwords.aspx)）

使用 GPConnNet.dll 文档中提供的代码，我应该能够获得连接，但对于非 sa 用户却无法这样做，sa 和 dynsa 工作正常。我收到登录失败的 sql server 错误。

```
SqlConnectionStringBuilder cb = new SqlConnectionStringBuilder(connectionString);
SqlConnection sqlConn = new SqlConnection();
if (sqlConn.State != ConnectionState.Open)
{
    GPConnection.Startup();
    var gpconn = new GPConnection();
    gpconn.Init(<Key1>, <Key2>);
try
{
    sqlConn.ConnectionString = string.Format("database={0}", cb.InitialCatalog);
    gpconn.LoginCompatibilityMode = false;
    gpconn.Connect(sqlConn, cb.DataSource, cb.UserID, cb.Password);
    if (gpconn.ReturnCode != 1)
         throw new AuthenticationException("Could not authenticate with the GP credentials.");
}
catch (System.Runtime.InteropServices.SEHException)
{
    throw new AuthenticationException("Could not authenticate with the GP credentials.");
}
} 
```

连接字符串中的信息来自 Microsoft Dexterity 工具包。

```
public class GPUser
{
    public readonly static string DataBase = Dynamics.Globals.IntercompanyId.Value;
    public readonly static string UserID = Dynamics.Globals.UserName.Value;
    public readonly static string Password = Dynamics.Globals.SqlPassword.Value;
    public readonly static string DataSource = Dynamics.Globals.SqlDataSourceName.Value;
    public readonly static string ApplicationName = string.Format("{0}{1}", App.ProductName, "(gp)");
    public static string Server
    {
        get
        {
            //Returns the Server from the ODBC DSN
        }
    }
    public static SqlConnectionStringBuilder ConnectionString
    {
        get 
        {
            return new SqlConnectionStringBuilder
            {
                DataSource = Server,
                UserID = UserID,
                Password = Password,
                ApplicationName = ApplicationName,
                InitialCatalog = DataBase
            };
        }

    }
} 
```

对用户有什么要求吗？GPConnection 代码中是否有我遗漏的内容？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:10:15.683

此类将检索连接所需的正确数据。

```
public class GPUser
{
    public readonly static string DataBase = Dynamics.Globals.IntercompanyId.Value;
    public readonly static string UserID = Dynamics.Globals.UserId.Value;
    public readonly static string Password = Dynamics.Globals.SqlPassword.Value;
    public readonly static string DataSource = Dynamics.Globals.SqlDataSourceName.Value;
    public readonly static string ApplicationName = string.Format("{0}{1}", App.ProductName, "(gp)");
    public static SqlConnectionStringBuilder ConnectionString
    {
        get 
        {
            return new SqlConnectionStringBuilder
            {
                DataSource = DataSource,
                UserID = UserID,
                Password = Password,
                ApplicationName = ApplicationName,
                InitialCatalog = DataBase
            };
        }

    }
    public readonly static short CompanyId = Dynamics.Globals.CompanyId.Value;
    public readonly static DateTime UserDate = Dynamics.Globals.UserDate.Value;
} 
```

将 GPUser.ConnectionString 传递到此代码中将创建一个有效的 SQLConnection 对象，您可以使用该对象连接到 GP 数据库。

```
SqlConnectionStringBuilder cb = new SqlConnectionStringBuilder(connectionString);
SqlConnection sqlConn = new SqlConnection();
if (sqlConn.State != ConnectionState.Open)
{
    GPConnection.Startup();
    var gpconn = new GPConnection();
    gpconn.Init(<Key1>, <Key2>);
    try
    {
        sqlConn.ConnectionString = string.Format("database={0}", cb.InitialCatalog);
        gpconn.LoginCompatibilityMode = false;
        gpconn.Connect(sqlConn, cb.DataSource, cb.UserID, cb.Password);
        if (gpconn.ReturnCode != 1)
            throw new AuthenticationException("Could not authenticate with the GP    credentials.");
    }
    catch (System.Runtime.InteropServices.SEHException)
    {
        throw new AuthenticationException("Could not authenticate with the GP credentials.");
    }
} 
```

# xml - Kinect 照片库 - 如何？

> ID：11865357
> 
> 赞同：1
> 
> 时间：2012-08-08T13:14:51.477
> 
> 标签：xml, kinect

我想创建我的第一个 kinect 应用程序，它将是一个网格库，用户可以单击以放大并阅读说明。所有数据都存储在一个 xml 文件中。我从来没有使用过 kinect，所以我想要一些关于实现它的最佳方法的建议。我用 as3 做了类似的应用，例如，可以用手势替换鼠标输入吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:02:19.003

如果您更喜欢在 ActionScript 中工作，可以[使用 AIRKinect](http://as3nui.github.com/airkinect-2-core/)。它具有完整的 Kinect 数据访问层，但除此之外没有其他功能。您必须自己实现手势识别。

就性能而言，根据我的经验，用 AIR 做 Kinect 的东西是个坏主意。在我看来，将 C# 与官方[Kinect for Windows SDK](http://www.microsoft.com/en-us/kinectforwindows/)一起使用要快得多，而且更易于使用。一些教程和文档可以在[这里](http://www.microsoft.com/en-us/kinectforwindows/develop/learn.aspx)找到。

此 SDK 也不提供开箱即用的手势识别功能，因此您可能想尝试一下[Kinect DTW](http://kinectdtw.codeplex.com/)。其他可用 - Google 将提供帮助。

您的问题基本上是是否可以用手势代替鼠标输入。你当然可以。只需在执行某个手势时执行您想要的任何操作。

至于选择照片，在 C#/WPF 的情况下，您可以在鼠标在窗口内时修改鼠标位置。您可以使用骨骼跟踪中的一个手关节来计算适当的鼠标位置。

对于实际的选择行为（通常是点击），我不推荐使用手势。商业 Kinect 应用程序更喜欢视觉计时器的方法，只要将鼠标悬停在按钮上就会倒计时，一旦时间到了就激活它。这种方法避免了在执行手势时意外地将手移动到不同位置的问题。

你问了一个非常广泛的问题，所以我现在能做的就是给你一些指示。使用此答案中链接的资源，您应该武装起来并准备好自己开始。祝你好运！

# asp.net - 如何将按钮单击事件从一个页面传递到另一个页面按钮

> ID：11865359
> 
> 赞同：1
> 
> 时间：2012-08-08T13:14:51.923
> 
> 标签：asp.net, windows-phone-7

在我的 WP 7.1 应用程序中，我有两个名为“PAGE 1”、“PAGE 2”的页面，并且有两个按钮，其中第 1 页中的“BUTTON 1”和第 2 页中的“BUTTON 2”。但是我从第 1 页自动单击 BUTTON 1单击第 2 页中的按钮 2 .. 有可能吗?? 请尽快帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:38:01.613

有点不清楚你的情况是什么 - 所以我将为我能想象的场景写下答案：

如果两个页面在同一个视图上（即两个`PanoramaItem`s 在一个`Panorama`），则两个按钮都可以从代码隐藏中获得（如果您不使用`Command`s - 也就是说）。然后，您可以在事件处理程序中执行以下操作：

```
private void Button1_Click(object sender, EventArgs e)
{
    // Do action for Button1_Click
    // ...
    // Then call the event handler for Button2
    Button2_Click(sender, e);
} 
```

如果有两个不同的页面（即两个不同的 XAML），则必须通过`NavigationService`. 在`Button1View.xaml`：

```
// a flag remembering if the button has been clicked
private bool hasButton1BeenClicked = false;

// The event handler for Button1
private void Button1_Click(object sender, EventArgs e)
{
    // Do action for Button1_Click
    // ...
    // Then set a flag that says it has been clicked

}

// This method puts on the flag if the button was clicked
private string PrepareAddressToButtonView2(string uriToButtonView2) 
{
    if( hasButton1BeenClicked )
    {
        uriToButtonView2 = uriToButtonView2 + "?button1clicked=true";
    }
    return uriToButtonView2;
} 
```

当您到达第二个视图时，您必须手动触发第二个按钮的事件处理程序 - 但前提是在前一个视图上单击了 button1。在`Button2View.xaml`：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    if( NavigationContext.QueryString.ContainsKey("button1clicked") )
    {
        Button2_Click(null, null);
    }
} 
```

解决此问题的另一种方法是保存 Button1 的状态（在某处的静态字段中），然后在导航到 page2 时检查它。

希望这有帮助！

# android - 安卓按钮不起作用

> ID：11865362
> 
> 赞同：0
> 
> 时间：2012-08-08T13:15:03.917
> 
> 标签：android

我对android和java真的很陌生，到目前为止我一直在做视频教程。然而，在我第一次尝试自己的代码时，`Buttons`似乎没有人对我所做的任何事情做出反应，有什么问题吗？

我已经完成了几个类似的代码并复制并粘贴了一些示例，并且在所有示例中，当在 android 手机和平板电脑上运行时，都没有`Buttons`做任何事情。

```
public class Two extends Activity implements OnClickListener {

    Button showa;
    EditText et1;
    TextView ans1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.two);

        methodInit();
        showa.setOnClickListener(this);
    }
    private void methodInit() {
        // TODO Auto-generated method stub
        showa = (Button) findViewById(R.id.button1);
        et1 = (EditText) findViewById(R.id.et1);
        ans1 = (TextView) findViewById(R.id.ans1);

    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(v.getId()){

    case R.id.button1:
        String check = et1.getText().toString();
        et1.setText(check);
        if (check.contains("4")){
            ans1.setText("correct!!!");
                break;
        }

    }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:19:29.617

像这样使用

```
 protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.two);
    methodInit();       
   }
    private void methodInit() {
        // TODO Auto-generated method stub
       showa = (Button) findViewById(R.id.button1);
       et1 = (EditText) findViewById(R.id.et1);
       ans1 = (TextView) findViewById(R.id.ans1);
       showa.setOnClickListener(this);
  }

    public void onClick(View v) {
      // TODO Auto-generated method stub
       switch(v.getId()){

    case R.id.button1:
          String check = et1.getText().toString();
          et1.setText(check);
          if (check.contains("4")){
          ans1.setText("correct!!!");
         break;
      }
     }
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:57:14.933

再次查看您的代码后，我注意到您**实际上**正在设置`onClickListener`...我在下面发布的代码对我有用。尝试一下，看看会发生什么。

* * *

你需要`onClickListener`在你的`Button`.

看看下面的代码：

```
public class Two extends Activity implements OnClickListener {

    private Button showa;
    private EditText et1;
    private TextView ans1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.two);

        methodInit();
    }
    private void methodInit() {
        // TODO Auto-generated method stub
        showa = (Button) findViewById(R.id.button1);
        et1 = (EditText) findViewById(R.id.et1);
        ans1 = (TextView) findViewById(R.id.ans1);
        showa.setOnClickListener(this);

    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(v.getId()){

        case R.id.button1:
            String check = et1.getText().toString();
            et1.setText(check);
            if (check.contains("4")){
                ans1.setText("correct!!!");
                break;
            }
        }
    }
} 
```

# reporting-services - 可以为 SQL Server 2012 报告配置自定义错误处理程序吗？

> ID：11865365
> 
> 赞同：1
> 
> 时间：2012-08-08T13:15:12.393
> 
> 标签：reporting-services, error-handling, sql-server-2012

我在 SQL Server 2012 上将 SSRS 与 SOAP 数据源一起使用。当服务超时时，报告用户会在他/她的浏览器上看到以下文本...

*   报告处理过程中发生错误。(rsProcessingAborted)
    - 共享数据集“XXXLookup”的执行失败。(rsDataSetExecutionError)

    *   数据集“XXXLookup”的查询执行失败。(rsErrorExecutingCommand)

        *   对指定 URL 执行 Web 请求失败。(rsXmlDataProviderError)
            ® 操作已超时

有没有办法在 SQL Server 2012 Reporting Services 中配置自定义错误处理程序以提供用户友好的消息？（我已经搜索并发现了类似的问题，答案通常是否定的，在 2012 年之前的版本中，SSRS 无法捕获 rs 错误。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:06:45.120

尽管 SSRS 2012 在配置文件中包含一个“挂钩”SSRS 事件的部分，但根据 MSFT，您不应修改此部分（来自 MSDN[文档](http://msdn.microsoft.com/en-us/library/ms157273.aspx)）：

*“事件处理指定默认事件处理程序。不要修改此部分。此部分不可扩展。”*

那么......这会让你在哪里？您当然可以修改 SSRS 的 web.config 部分，如此处[所述](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/e8ca8a9f-9353-4099-9179-97fd3b39ed50/)。当然，这只允许您将默认（不友好）错误页面替换为稍微友好的错误页面，但不清楚您将如何动态填充这个新的自定义错误页面上的失败原因。其他客户也有同样的[问题](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/87989623-068f-4c45-84e9-d151635ac1b3/)，但 MSFT 似乎没有人回答。

那么，我会在这里做什么？这取决于您遇到此问题的报告数量。如果只有一小部分可能的报告，那么我可能会通过自定义扩展将逻辑放入报告本身，如果它没有在所需的时间段内返回数据，则会在报告上填充一个文本框。

还有一个更大的考虑是为什么这些报告呈现如此缓慢？我会问用户明显的问题，例如“是否有大量数据被返回 - 您是否需要/在每个报告中使用那么多数据？”和“如果返回大量数据，是否可以它显示为预先聚合（由源数据库）？另外，我会考虑通过索引、更优化的查询语法等来优化数据源的查询……

另一个考虑因素是报告何时超时？一天中有特定的时间吗？那个时候网络有拥堵吗？按照同样的思路，用户是否可以接受一点延迟，以便可以通过预定快照呈现报告，这也可能加快检索速度。

# mysql - 如何在mysql中连接两个表？

> ID：11865366
> 
> 赞同：0
> 
> 时间：2012-08-08T13:15:13.163
> 
> 标签：mysql

我有表格，分别是用户和列表。我在用户表中有两个字段，我需要做的是我想连接两个表，以便每个用户可以包含列表表中的条目数，并且我想根据用户获取列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:35:08.583

你可能想要像 JOIN 这样的东西：

```
SELECT * FROM users
JOIN list ON users.id_user = list.id_user 
```

这将输出表用户和表列表中的所有内容，并为每个列表重复用户。

注意：为此，您必须在两个表中都有用户标识符。

您可以添加 WHERE 条件来搜索特定的用户名或类似的东西。请提供您的用户和列表结构以获得更多帮助。

检查此示例以创建表：

```
CREATE TABLE `users` (
`id_user` INT(10) NOT NULL AUTO_INCREMENT,
`user_name` VARCHAR(50) NOT NULL,
`user_email` VARCHAR(50) NOT NULL,
PRIMARY KEY (`id_user`)
)

CREATE TABLE `list` (
`id_list` INT(10) NOT NULL AUTO_INCREMENT,
`id_user` INT(10) NOT NULL,
`list_name` INT(10) NOT NULL,
PRIMARY KEY (`id_list`)
) 
```

向两个表中添加一些数据并运行上面的示例以查看结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:17:13.737

您所描述的是外键关系，一个基本的关系数据库概念。在 MySQL 文档中搜索该术语应该会为您找到一些有用的文档。

# windows - 附加数据：错误值：2147942402。如何修复？

> ID：11865369
> 
> 赞同：13
> 
> 时间：2012-08-08T13:15:18.307
> 
> 标签：windows, scheduled-tasks

我有许多不同的计划任务，它们被设置为运行一些用 VB.Net 编写的可执行文件。当他们开始运行时，他们几乎总是收到一个错误，指出任务无法启动并引用此错误值：

附加数据：错误值：2147942402

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2018-02-09T22:41:31.970

我收到了同样的错误信息。[正如在另一个答案](https://serverfault.com/a/559314/156098)中指出的那样，事实证明错误代码`2147942402`实际上意味着`File Not Found`。

我正在以编程方式创建我的计划任务，结果发现我指定运行的可执行文件的路径中有错字，它实际上并不存在。一旦我更正了计划任务设置为运行的 exe 的文件路径，那么一切都按预期工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-26T15:51:10.633

当我尝试使用 Windows 调度程序使用 IE 运行网页时，我遇到了同样的问题。

按着这些次序：

-右键单击您的任务-> 属性。

-单击设置选项卡，查找“如果任务已在运行，则应用以下规则”，应位于对话框底部，并将 DropDownList 值设置为“停止现有实例”。

-单击操作选项卡，编辑您的任务，在程序/脚本下选择运行您的任务的应用程序的**完整路径**（在我的情况下，我将 iexplore.exe 替换为 C:\Windows\winsxs...\iexplore.exe）

希望这可以帮助你:-)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-04T07:54:00.530

我得到了相同的附加数据：错误值：2147942402。对我来说，有效的解决方案是删除任务并创建新任务，与删除的相同。您还可以尝试在任务正在运行时验证用户的密码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-20T16:16:28.033

更改权限、不同的文件或位置对我不起作用。我必须创建一个全新的任务并禁用旧任务，它对我有用。原始任务一定已经损坏了某些东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-10T16:48:52.790

I fixed this error by changing "Run whether user is logged on or not" to "Run Only when user is logged on" on the General tab of the task.

You must a valid user on the General tab-> security options-> "When running the task, use the following user account:"

# html - 嵌入的音频剪辑不起作用

> ID：11865371
> 
> 赞同：0
> 
> 时间：2012-08-08T13:15:26.263
> 
> 标签：html, audio, embed

我已经在网页中嵌入了一个音频剪辑，但是当我运行该页面时（在 IE 上，这对我来说是必需的），而不是给我一个音频控制栏（暂停/播放/等）它给了我一个大白框（水平的音频控制栏的形状），侧面有向上/向下箭头。

```
 <p style="text-align:center">

               <!--[if IE]><!-->

               <object data="overture.mp3" type="audio/mpeg" class id="02BF25D5-8C17-4B23-BC80-D3488ABDDC6B"
                codebase="http://www.apple.com/qtactivex/qtplugin.cab" width="280" height="25">

                <!--<![endif]-->

                <!--[if !IE]><!-->

                <object data="overture.mp3" type="audio/mpeg" width="280" height="25">

                <!--<![endif]-->

                    <param name="src" value="overture.mp3" />           
                    <param name="autoplay" value="true" />
                    <param name="autostart" value="true" />
                    <param name="controller" value="true" />
                    <param name="showcontrols" value="true" />

                    <embed src="overture.mp3" type="audio/mpeg" 
                    pluginspage="http://www.apple.com/quicktime/download"
                    width="280" height="25">

                    </embed>

               </object>
               </p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:43:12.907

尝试将其从段落标签中取出并首先将其放入 div 中，而且我相信您对 IE 的 if 语句应如下所示

```
<!--[if IE]> -->
<!--[endif]--> 
```

而不是

```
<!--[if IE]><!-->
<!--<![endif]--> 
```

HTML5 还支持一个音频标签，如下：

```
<audio controls="controls">
 <source src="song.mp3" type="audio/mp3" />
</audio> 
```

# python - Scipy径向基函数（scipy.interpolate.rbf）中的Python MemoryError

> ID：11865378
> 
> 赞同：7
> 
> 时间：2012-08-08T13:15:56.607
> 
> 标签：python, memory, numpy, scipy, interpolation

我正在尝试使用 Scipy Radial Basis Function (Rbf) 插入一个表示 2D 表面的不太大（~10.000 个样本）的点云。我得到了一些不错的结果，但是在我最后的数据集上，我一直得到`MemoryError`，即使错误在执行过程中几乎立即出现（RAM 显然没有被吃掉）。

我决定`rbf.py`从 Scipy 破解文件的副本，首先用一些打印语句填充它，这些语句非常有用。`_euclidean_norm`通过逐行分解方法，如下所示：

```
def _euclidean_norm(self, x1, x2):
    d = x1 - x2
    s = d**2
    su = s.sum(axis=0)
    sq = sqrt(su)
    return sq 
```

我在第一行得到错误：

```
File "C:\MyRBF.py", line 68, in _euclidean_norm
    d = x1 - x2
MemoryError 
```

该范数以 [[x1, y1], [x2, y2], [x3, y3], ..., [xn, yn]] 和 X2 的形式调用数组 X1，它是 X1 由类中的以下方法`Rbf`，已被我出于调试目的破解：

```
def _call_norm(self, x1, x2):
    print x1.shape
    print x2.shape
    print

    if len(x1.shape) == 1:
        x1 = x1[newaxis, :]
    if len(x2.shape) == 1:
        x2 = x2[newaxis, :]
    x1 = x1[..., :, newaxis]
    x2 = x2[..., newaxis, :]

    print x1.shape
    print x2.shape
    print

    return self._euclidean_norm(x1, x2) 
```

请注意，我打印了输入的形状。使用我当前的数据集，这就是我得到的（我手动添加了评论）：

```
(2, 10744)         ## Input array of 10744 x,y pairs
(2, 10744)         ## The same array, which is to be "reshaped/transposed"

(2, 10744, 1)      ## The first "reshaped/transposed" form of the array
(2, 1, 10744)      ## The second "reshaped/transposed" form of the array 
```

根据文档，基本原理是获得“从 x1 中的每个点到 x2 中的每个点的距离矩阵”，这意味着，由于数组是相同的，因此每对条目数组之间的距离矩阵（其中包含 X 和 Y 维度）。

我用小得多的数组（例如，形状 (2,5,1) 和 (2,1,5)）手动测试了操作，并且减法有效。

我怎样才能找出为什么它不适用于我的数据集？还有其他明显的错误吗？我应该检查我的数据集的某种形式的病态，还是对其进行一些预处理？我认为它的条件很好，因为我可以在 3D 中绘制它，并且浊点在视觉上形成得非常好。

任何帮助将不胜感激。

谢谢阅读。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T19:00:50.697

您的数据集应该没问题：出现错误是因为您没有足够的 RAM 来存储减法结果。

根据播放规则，结果将有形状

```
 (2, 10744,     1)
-(2,     1, 10744)
------------------
 (2, 10744, 10744) 
```

假设这些是 dtype float64 的数组，您需要 2*10744**2*8 = 1.72 GiB 的可用内存。如果没有足够的可用内存，numpy 将无法分配输出数组，并会立即失败并显示您看到的错误。

# php - 发布由 php 填充的选项框值

> ID：11865380
> 
> 赞同：0
> 
> 时间：2012-08-08T13:16:01.243
> 
> 标签：php, html

我有这段代码：

```
 <select id="frm_type" name="typeId">
                <?php foreach($product_types as $product) : ?>
                    <?php if ($product['id'] == $product_details['typeId']) $selected = " SELECTED"; else $selected = ""; ?>
                    <option value="<?=$product['id'];?>"<?=$selected;?>><?=$product['partNumber'];?> (<?=$product['title'];?>)</option>
                <?php endforeach; ?>
        </select> 
```

这只是用来自数据库的数据填充下拉列表/选项框。这在用于创建选择和发布项目的表单中效果很好，但是我希望在编辑页面上使用相同的功能。

编辑页面显示当前选定的值，如果未更改，则在发布时，此输入不会发布任何内容。

我相信我在上面使用 $selected... 的位显示了选定的选项（它确实如此）它只是不发送选定的数据。

任何人都可以提供任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:25:33.800

尝试

```
<select id="frm_type" name="typeId">
<?php foreach($product_types as $product) : 
        $selected = ($product['id'] === $product_details['typeId'])
                    ? "selected='selected'"
                    : ""; 
?>
      <option value="<?=$product['id']?>" <?=$selected?> > 
         <?=$product['partNumber']?> (<?=$product['title']?>)
      </option>
<?php endforeach; ?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:21:24.917

尝试

```
<select id="frm_type" name="typeId" disabled="disabled">
                <?php foreach($product_types as $product) : ?>
                    <?php if ($product['id'] == $product_details['typeId']) $selected = " selected='selected'"; else $selected = ""; ?>
                    <option value="<?=$product['id'];?>"<?=$selected;?>><?=$product['partNumber'];?> (<?=$product['title'];?>)</option>
                <?php endforeach; ?>
        </select> 
```

# php - 试图从 db 中获取当前页面的特定值

> ID：11865381
> 
> 赞同：0
> 
> 时间：2012-08-08T13:16:07.230
> 
> 标签：php, mysql, database, wordpress, nextgen-gallery

我正在尝试从 Nextgen Gallery 获取标题。

这是我的代码：

```
<?php 
global $nggdb;
$gallery = $nggdb->get_gallery(4, 'sortorder', 'ASC', true, 1, 0);
foreach($gallery as $image) {
    echo $image->alttext;
}
?> 
```

我知道这样我就可以进入数据库，而且我还能够获得第一张图片的标题。

但问题是我没有得到当前页面/图像标题。只有第一个。

如何获得动态标题（替代文本）而不仅仅是第一个？

# javascript - 我应该使用哪个：json-jquery 或 json2.js？

> ID：11865382
> 
> 赞同：1
> 
> 时间：2012-08-08T13:16:12.083
> 
> 标签：javascript, jquery, json, jquery-plugins

我很好奇这里是否有人有偏好，或者是否肯定应该使用一个库而不是另一个库？似乎 Json2.js 是“事实上的”标准。但是 JQuery-json 是一个 jquery 插件。由于我使用的是 JQuery，我想知道我应该使用哪一个。

[jQuery-json](http://code.google.com/p/jquery-json/)和[Json2.js](https://github.com/douglascrockford/JSON-js/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:24:49.887

我建议使用 Json2.js，因为它是浏览器标准的直接 polyfill。

该`JSON`对象是所有现代浏览器的内置功能。我们需要使用 Json2.js 之类的脚本的唯一原因是为了支持旧版浏览器，例如没有内置它的旧版 IE。它提供的语法与其他浏览器中内置的 JSON 对象相同，并且如果它已经存在，它不会覆盖内置对象。

JQuery 还使用内置的 JSON 对象，它也可用，所以归根结底，它几乎在做同样的事情，但是对于已经拥有 JSON 对象的浏览器，使用 jQuery 来包装它意味着你是添加一层不必要的语法。您可能关心也可能不关心这一点，但这几乎是它们之间的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:17:59.647

jQuery 多年来一直[支持原生 JSON](http://api.jquery.com/jQuery.parseJSON/)。不要为此使用插件。

如果您尚未使用 jQuery 或其他在旧浏览器中提供 JSON 支持的库，请使用 json2.js。

# opencv - OpenCV上的Libpng冲突？

> ID：11865389
> 
> 赞同：2
> 
> 时间：2012-08-08T13:16:28.867
> 
> 标签：opencv, conflict, libpng, conflicting-libraries

我正在尝试使用以下代码在我的 XCode 4.4（Mountain Lion）上打开 png 文件（适用于 jpg 文件）

```
Mat image = imread( "/Users/user_name/Desktop/result.png" );
imshow( "", image );
waitKey( 0 ); 
```

但是 OpenCV 向我抛出了这个错误：

```
libpng warning: Application built with libpng-1.4.12 but running with 1.5.4
OpenCV Error: Bad flag (parameter or structure field) (Unrecognized or unsupported array type) in cvGetMat, file /opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_graphics_opencv/opencv/work/OpenCV-2.4.2/modules/core/src/array.cpp, line 2482
libc++abi.dylib: terminate called throwing an exception 
```

似乎我的 png 文件是使用较新的 libpng 创建的，而 OpenCV 使用的是较旧的。那么我该如何解决这个问题呢？

编辑：更多信息

我正在使用带有 XCode 4.4 的 OSX Mountain Lion，并使用通过 MacPorts 安装的 OpenCV 2.4.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:09:43.027

不，这不是您的 png 文件的问题。创建它的版本无关紧要。它将是兼容的。问题出在您的 libpng 库中。

**使用 libpng-1.4.12 构建的应用程序**- 这意味着您的可执行文件已链接到 libpng 1.4.12。

**但是使用 1.5.4 运行**- 这意味着在运行时，您的可执行文件正在获取库的 1.5.4 版本（可能是动态库）。

OpenCV 2.4.2 附带 libpng - 1.5.9 - 这里似乎不匹配。

无论如何，要解决这个问题，请确保在链接期间，您链接到使用 OpenCV 构建的 libpng。如果您正在动态链接，请确保您的库路径首先包含 OpenCV 的第 3 方库路径。

# java - 根据一天中的时间更改精灵

> ID：11865390
> 
> 赞同：0
> 
> 时间：2012-08-08T13:16:29.570
> 
> 标签：java, android, static, bitmap, live-wallpaper

好的，我正在为 android 制作动态壁纸，我希望根据一天中的什么时间来更改即时显示的鱼。所以我将它添加到循环线程中

```
public static int getCurrentHour() {
    // TODO Auto-generated method stub
    //i set getfishcolor
    int getFishColor = 0;
    final Calendar c = Calendar.getInstance();
    int t = Calendar.AM_PM;
    final int h = Calendar.HOUR;
    int theHour = c.get(h);
    int isAM = c.get(t);
    //check the time to see what type it should be
    if (theHour + isAM == 8 + isAM)
    { getFishColor = 0;}
    //this is then called in current_fish
    else {getFishColor = 4;}
    //restart loop somehow
        return getFishColor;
} 
```

问题是渲染（）；在主类中只运行一次，所以如果它已经设置，鱼不会改变，但是当我尝试将它添加到我的 if 语句时，它说它不能是静态的。我应该如何实现此代码，使其不是静态的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T06:38:12.450

解锁画布后只需输入此代码。为此不需要静态。假设您正在调用画布 persec/putted 逻辑来多次调用它。

# java - 正则表达式来捕获键/值

> ID：11865391
> 
> 赞同：1
> 
> 时间：2012-08-08T13:16:36.000
> 
> 标签：java, regex

我有一个命令的输出，它基本上列出了其中的一堆键/值对。输出没有明显的格式，因此我认为正则表达式将是最好的方法。

输出： http: [//pastebin.com/Hfu4nP3M](http://pastebin.com/Hfu4nP3M)

基本上，我需要从第 21-30 行存储键/值对（逗号分隔）并将它们存储在地图中。

是否可以使用正则表达式来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:32:36.850

我不确定这是否是您想要的，但既然您说您需要存储第 21-30 行中的键/值对（逗号分隔），它们是

```
 {memory,
     [{total,38751504},
      {processes,13711212},
      {processes_used,13711198},
      {system,25040292},
      {atom,662409},
      {atom_used,653371},
      {binary,287088},
      {code,18209655},
      {ets,1358504}]}, 
```

我假设你想读取`memory`存储在里面的值`[...]`。

为此，您可以使用类似

```
//creating reader to get data from file
BufferedReader in = new BufferedReader(new InputStreamReader(
        new FileInputStream("data.txt")));// file with your data

StringBuilder sb = new StringBuilder();
String line = null;
while ((line = in.readLine()) != null) {
    sb.append(line.trim());// also remove unnecessary tabulators and
                            // spaces
}
in.close();

String data = sb.toString();

Pattern pattern = Pattern.compile("\\{memory,\\[(.*?)\\]");
Matcher m = pattern.matcher(data);
if (m.find()) {
    Pattern keyValuePattern = Pattern.compile("\\{(\\w*?),(\\d*?)\\}");
    Matcher matcher = keyValuePattern.matcher(m.group(1));
    while (matcher.find())
        System.out.println(matcher.group(1) + "->" + matcher.group(2));
} else
    System.out.println("not found"); 
```

输出

```
total->38751504
processes->13711212
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:38:50.597

这可能需要一些清理——我不经常使用正则表达式，也从不使用 Java。

尝试使用正则表达式：

```
[{,][^",}]*?[,}] 
```

即：找到等于'{'或','的字符，然后找到不是'"'、'}'或','的无限字符，直到找到等于'}'或','的字符为止。

要查找尚未用引号标记的所有内容，请将其匹配。

```
String s = p.match();
s = s.charAt(0) + '"' + s.substring(1, s.length() - 1) + '"' + s.charAt(s.length() - 1; 
```

然后将其放回日志中的正确位置。完成所有这些后，您可以使用 JSON 读取日志。

此外，您可能希望将日志保存在内存中，这样操作起来会更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:46:42.130

您可以逐行读取输出，直到使用 String.equals() 找到 '{memory' 是可以的。然后在以下所有行中，您可以执行

```
 String[] result = line.replaceAll("[\\[\\]}{ \t]|},", "").split(",");
    System.out.println(result[0] + "," + result[1]);
    if(line.contains("]"))
        break; 
```

# c++ - 如果我只需要其中的几个函数，是否值得包含一个大型 C++ 库？

> ID：11865394
> 
> 赞同：2
> 
> 时间：2012-08-08T13:16:44.597
> 
> 标签：c++, dll, shared-libraries

我有一个与 C++ 静态库和动态库相关的问题。假设现在您正在开发一个程序，并且可以在 C++ 库中找到一个功能。那么你有两种选择：一种是写一些代码（假设不要太多），然后重新实现功能；另一种是调用 C++ 库中的函数。但是，您要使用的 C++ 库是一个非常大的库，而您只使用了该库的一小部分。在这种情况下，什么是更好的选择？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T13:24:12.013

*   静态库链接只会将您的可执行文件与您有效使用的符号链接起来。假设您在 lib 中有 200 个函数并且仅使用 4 个（包括 lib 的内部调用），那么只有您使用的 4 个符号将链接到可执行文件中。因此与 2Mb 库链接可能会导致您的可执行文件仅添加 20k。

*   windows下的动态库应该是符号完整的，即DLL将包含200个符号而您只需要4个。虽然它不会对您的可执行文件大小产生很大影响（因为用于与DLL链接的lib只是一个符号转发器），它可能会影响加载时间和内存占用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T13:21:05.980

我不知道，是否有人可以在这里给出“正确”的答案。我认为这更像是个人选择。

如果库真的很大并且我需要，比如说其中的 2-3 个函数，我会完全避免使用库并实现它们（或者复制实现，如果许可证允许的话）。

例如，有几次我需要一些函数来以某种方式解析字符串。Boost有这样的功能。但是我不想在我的项目中添加对 Boost 的依赖，只是因为 2-3 个函数，20-50 行代码。我只是自己重新实现了它们。

但是，正如我已经说过的，这更像是个人选择。或者取决于限制，如果你有的话。

* * *

**编辑：**注意：您不需要“重新发明轮子”。**如果您需要这个库中的很多东西**，请使用它！不要尝试实现已经存在的东西（因为它已经被其他用户测试和使用过）。特别是如果它很复杂。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T13:19:03.963

使用该库，如果编译开销成为问题（对于大多数项目来说不是），那么重新实现它将是微不足道的。虽然现在您不必花时间编写额外的代码，但投入使用`#include`会更快，更不用担心。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T13:23:13.083

如果该库是一个已安装在您希望部署的系统上的共享库，那么使用它的开销很小——无论是在链接方面还是在运行时。

但是，如果需要部署有问题的库，静态链接的可能性可能值得研究。

任何一种情况都比编写自己的所用功能实现更可取。库版本已经过证明，而您的版本可能没有。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T13:40:40.320

这是非常主观的，很多因素都起到了你没有记录的作用。比如：10 年后你还会支持这个项目吗？如今，在 C++ 代码中，这几乎是肯定的。很有可能您会后悔无法轻松跟上库的维护版本，复制/粘贴代码会变旧，如果您不仔细记录，总有一天谁接管维护肯定不会享受这一点你做了什么。

然后是过早的优化角度。在 Windows 上加载的可执行映像需要很少的资源。例如，一个“大型”库是 10 兆字节的代码。这是 32 位进程中虚拟内存地址空间的 0.5%。专注于*virtual*，您无需为不使用的代码付费。按需分页操作系统的一个非常好的好处。很难证明花费大量时间来破解库并记录您在这样做的*可衡量*收益很小的情况下所做的事情是合理的。只有您可以进行成本/收益分析。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T13:24:00.727

如果该库的包含文件非常大，请使用前向声明。

如果链接是问题，请考虑共享库（也许只是为了开发）。

如果链接是问题并且这些功能很简单，也许可以考虑自己编写代码。

否则只能一击必杀。

# eclipse - 在eclipse RCP中为windowbuilder类制作处理程序

> ID：11865396
> 
> 赞同：0
> 
> 时间：2012-08-08T13:16:46.973
> 
> 标签：eclipse, handler, rcp, windowbuilder

我使用 windowbuilder 和 swt Designer 开发了一个带有一些标签、文本和底部的外壳。我可以将它作为 java 应用程序运行。我将该类添加到我的 Eclipse RCP 项目中，并将其链接到 RCP 中的菜单。当我运行 RCP 并单击菜单时，我收到一个错误，**即没有要为命令执行的处理程序...**

问题是我如何为从windowbuilder构建的类制作处理程序？

非常感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:47:55.417

在我尝试在 Eclipse 的 Juno CDT 版本上安装 Windowbuilder 后遇到了类似的问题。Windowbuilder 是新的...尝试使用默认附带 WB 的 Juno Java，它对我来说很好用...

# date - 以下日期格式说明 2012-08-08T15:04:33+0200

> ID：11865398
> 
> 赞同：3
> 
> 时间：2012-08-08T13:16:56.590
> 
> 标签：date, datetime, time

有人可以向我解释以下日期格式吗？

```
2012-08-08T15:04:33+0200 
```

我想

```
2012-08-08 // should be year-month-day 

15:04:33 // is hour:minutes:seconds

+0200 // should be the Timezone offset 
```

我不知道`T`意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:19:25.360

T 表示后面的一切都是时间

[https://en.wikipedia.org/wiki/ISO_8601](https://en.wikipedia.org/wiki/ISO_8601)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:19:41.160

您的细分是正确的， T 只是日期和时间的分隔符。

# javascript - 在 1 个方法中增加一个变量值会触发另一个方法的 for 循环，欢迎提出任何建议

> ID：11865405
> 
> 赞同：1
> 
> 时间：2012-08-08T13:17:18.747
> 
> 标签：javascript, jquery

我正在构建一个小的随机序列比较器以学习 js 对象，目前我遇到了一个问题，如果我在我的 completeMessage() 中增加限制变量，这将在我的 compareSequences() 的 for 循环中自动运行在无限循环中，谁能告诉我我哪里可能出错了？

有问题的2种方法：

```
compareSequences: function() {                
    var instance = this;
    var i = 0;

    for( i; i <= limit; i++ ) {
        console.log('Limit inside loop:', limit);

        if( stacks.randomSequence[i] != stacks.userSequence[i] ) {
            instance.errorMessage();
            return;
        }                 

        if( i === limit ) {
            instance.completeMessage();
        }

        console.log('Limit now', limit);
    }               
},

completeMessage: function() {
    var instance = this;
    alert('Well done you where right!');
    limit = 5; //currently set as test, changing to ++ results in infinite loop
    instance.selectors.startButton.removeAttr('disabled');
    overallScore++;
    instance.selectors.scoreCounter.html(overallScore);
}, 
```

链接到我的小提琴：http: [//jsfiddle.net/FNd79/22/](http://jsfiddle.net/FNd79/22/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:24:36.207

默认情况下，您的`limit`变量在全局范围内定义（作为 object 的属性`window`），在一个函数中更改它的值会在任何地方更改它。

请务必使用`var`.

您的问题是您在循环期间修改了上限，每次退出循环时它都会增加一个。

您在初始化循环时需要全局值，您可以在那时将其复制到局部变量：

```
compareSequences: function() {                
  var instance = this;
  var i = 0;
  var max = limit;
  for( i; i <= max; i++ ) {
      ...
  }
  ...
} 
```

您可以交替使用关键字`break`来确定退出循环。

```
if( i === limit ) {
  instance.completeMessage();
  break;
} 
```

# vba - VBA相当于hasext方法？

> ID：11865408
> 
> 赞同：1
> 
> 时间：2012-08-08T13:17:21.990
> 
> 标签：vba, excel

VBA 是否与 Java .hasnext 方法等效？

我正在尝试遍历 excel 工作簿中的很多工作表并打算使用

```
ActiveSheet.Next.Select 
```

在一个循环中，让我知道任何比这更有效的方法，因为我确信有。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T13:29:42.710

最好的方法是使用`For Each`循环方法。

这是一个示例：

```
Dim wks As Worksheet

'- Begin looping through workbook
For Each wks In ActiveWorkbook.Worksheets
    '- Do code with each worksheet
    msgbox wks.name
next wks 
```

在 VBA 中，这将遍历 中的工作表，并允许您使用变量`ActiveWorkbook`引用循环中的当前工作表。`wks`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T13:22:11.087

没有等价物，但是大多数支持索引的属性都有一个`.Count`属性可以告诉您需要迭代多少

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T13:38:11.380

正如上面已经提到的，没有等价于`.Hasnext`

您可以使用任何循环遍历工作表。这是一个 For 循环示例

```
Sub Sample()
    Dim ws As Worksheet

    For Each ws In ActiveWorkbook.Worksheets
        With ws
            '
            '~~> Your code here
            '
        End With
    Next
End Sub 
```

如果我想真正实现`Hasnext`某种东西，那么我也可以这样做

```
Sub Sample()
    If Hasnext(ActiveSheet.Index + 1) Then
        MsgBox Sheets(ActiveSheet.Index + 1).Name
    End If
End Sub

Function Hasnext(numb As Long) As Boolean
    Dim ws As Worksheet

    On Error Resume Next
    Set ws = Sheets(numb)
    On Error GoTo 0

    If Not ws Is Nothing Then Hasnext= True
End Function 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T13:26:01.773

使用像这样的循环怎么样`For Each x in Collection ... Next x`？如果到达列表末尾，它会自动终止。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T15:50:38.770

与 HasNext 最接近的是检查 Next 是否为“Nothing”。

```
Dim sh As Worksheet

Set sh = ActiveSheet

If Not sh.Next Is Nothing Then
    Set sh = sh.Next
End If 
```

但我同意其他人的观点，即 For Each..Next 并避免 Select and Activate 是更好的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T13:22:41.430

我不认为 VBA 直接等同于 hasext。如果您想检查一个集合中是否有对象，您可以执行类似的操作`If colX.Count > 0 then...end if`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-08T13:40:14.700

所有答案对这个问题都有帮助。

我想展示我最终做了什么，并且代码在答案中更具可读性。

我只是使用count方法并循环直到我的迭代器基本上等于count。

```
Sub Total_Sheet_Compiler()

    Dim sheetCount, i As Integer

    sheetCount = ActiveWorkbook.Sheets.Count

    i = 1

    Sheets("Sheet1").Select

    Do Until i = sheetCount

        ActiveSheet.Next.Select

        i = i + 1

    Loop

End Sub 
```

# android - 启动/停止线程

> ID：11865418
> 
> 赞同：2
> 
> 时间：2012-08-08T13:17:42.860
> 
> 标签：android, multithreading

在锁定/解锁设备时，我找不到任何有效的解决方案来停止/恢复线程，谁能帮忙，或者告诉我在哪里可以找到如何做？我需要在手机锁定时停止线程，并在手机解锁时重新启动线程。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T14:43:03.040

Java 在协作中断模型上运行以停止线程。这意味着您不能在没有线程本身合作的情况下简单地停止线程中途执行。如果要停止线程，客户端可以调用 Thread.interrupt() 方法请求线程停止：

```
public class SomeBackgroundProcess implements Runnable {

    Thread backgroundThread;

    public void start() {
       if( backgroundThread == null ) {
          backgroundThread = new Thread( this );
          backgroundThread.start();
       }
    }

    public void stop() {
       if( backgroundThread != null ) {
          backgroundThread.interrupt();
       }
    }

    public void run() {
        try {
           Log.i("Thread starting.");
           while( !backgroundThread.interrupted() ) {
              doSomething();
           }
           Log.i("Thread stopping.");
        } catch( InterruptedException ex ) {
           // important you respond to the InterruptedException and stop processing 
           // when its thrown!  Notice this is outside the while loop.
           Log.i("Thread shutting down as it was requested to stop.");
        } finally {
           backgroundThread = null;
        }
    } 
```

线程的重要部分是您不会吞下 InterruptedException 而是停止线程的循环并关闭，因为只有在客户端请求线程中断本身时您才会收到此异常。

因此，您只需将 SomeBackgroundProcess.start() 连接到解锁事件，并将 SomeBackgroundProcess.stop() 连接到锁定事件。

# ruby-on-rails - 在每个中保存依赖类的最佳方法？

> ID：11865419
> 
> 赞同：0
> 
> 时间：2012-08-08T13:17:44.987
> 
> 标签：ruby-on-rails, activerecord, model, associations

我有 2 个 Ruby on Rails 模型类 A 和 B，它们是依赖的，我想在保存另一个时保存一个。

我目前的解决方案是使用临时属性，例如[如何避免 ActiveRecord 模型双重保存？](https://stackoverflow.com/questions/9703797/how-to-avoid-activerecord-model-double-saving) 但是有更好的方法吗？

```
class A < ActiveRecord::Base  
  has_many :b

  attr_writer :save_b_values

  def save_b_values
    return @save_b_values if defined? @save_b_values
    true
  end

  before_save do
    save_b_values = false

    if save_b_values
      b.each do |bi|
        bi.save!
      end
    end
  end

  after_save do
    save_b_values = true
  end
end

class B < ActiveRecord::Base
  belongs_to :a, autosave: true
end 
```

# c++ - 扩展 ostringstream 错误 C++

> ID：11865421
> 
> 赞同：0
> 
> 时间：2012-08-08T13:17:50.383
> 
> 标签：c++

为了简化问题，我将这个类写`StringStream`在一个`Notifications.h`文件中：

```
namespace A {
namespace B {
namespace C {

extern std::locale g_classicLocale;
class StringStream : public virtual std::ostringstream
{
 public:
        StringStream() { imbue(g_classicLocale); }
        virtual ~StringStream() {};
};

} // namespace C
} // namespace B
} // namespace A 
```

现在，我正在尝试`StringStream`在我的`DBNotification.cpp`文件中使用：

```
 #include "Notifications.h"

 namespace A{
 namespace B{
 namespace C{

         DBNotification::DBNotification(){

         }
         DBNotification::~DBNotification(){

         }
         StringStream DBNotification::getValues(){

            // do some work and return me a StringStream Object
         }
 } // C
 } // B
 } // A 
```

当我构建源代码时，我得到：

```
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/ios_base.h: In copy constructor 'std::basic_ios<char, std::char_traits<char> >::basic_ios(const std::basic_ios<char, std::char_traits<char> >&)':
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/ios_base.h:779: error: 'std::ios_base::ios_base(const std::ios_base&)' is private
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/iosfwd:55: error: within this context
../Notifications.h: In copy constructor 'A::B::C::StringStream::StringStream(const A::B::C::StringStream&)':
../Notifications.h:49: note: synthesized method 'std::basic_ios<char, std::char_traits<char> >::basic_ios(const std::basic_ios<char, std::char_traits<char> >&)' first required here
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/streambuf: In copy constructor 'std::basic_stringbuf<char, std::char_traits<char>, std::allocator<char> >::basic_stringbuf(const std::basic_stringbuf<char, std::char_traits<char>, std::allocator<char> >&)':
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/streambuf:781: error: 'std::basic_streambuf<_CharT, _Traits>::basic_streambuf(const std::basic_streambuf<_CharT, _Traits>&) [with _CharT = char, _Traits = std::char_traits<char>]' is private
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/iosfwd:71: error: within this context
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/iosfwd: In copy constructor 'std::basic_ostringstream<char, std::char_traits<char>, std::allocator<char> >::basic_ostringstream(const std::basic_ostringstream<char, std::char_traits<char>, std::allocator<char> >&)':
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/iosfwd:79: note: synthesized method 'std::basic_stringbuf<char, std::char_traits<char>, std::allocator<char> >::basic_stringbuf(const std::basic_stringbuf<char, std::char_traits<char>, std::allocator<char> >&)' first required here 
```

有人可以让我知道发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:23:34.643

通常无法复制流。您的函数`DBNotification::getValues()`返回一个流对象。

请看[这个答案](https://stackoverflow.com/questions/7049770/problem-with-ostringstream-and-copy-constructor)

# sql - MSSQL 使用 Functions 索引和性能

> ID：11865432
> 
> 赞同：3
> 
> 时间：2012-08-08T13:18:07.537
> 
> 标签：sql, sql-server, sql-function

在我过去的经验中，我总是在需要选择数据集的简单情况下使用函数，没有很多复杂的逻辑，而且我还需要传递一个参数。

我最近被告知我应该不惜一切代价避免在 MSSQL 中使用函数，因为它们经常会导致性能问题，有时它们的使用会导致索引无法正确使用。任何人都可以谈谈这一点，并进一步详细解释这是否属实，以及背后的一些原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:32:26.360

你被天真地劝告过。

**标量函数**

`WHERE dbo.fn_get_year(tbl.field) = 2012`将混淆`tbl.field`并使其上的任何索引都无法使用。

例如，您会发现使用`WHERE tbl.field >= '20120101' AND tbl.field < '20130101'`.

在第一个示例中，必须处理每条记录，因为优化器无法*看穿函数*并推断出符合条件的记录范围。

在第二个示例中，您非常清楚您想要从点 a 到点 b 的连续记录块。这使优化器能够使用索引进行范围查找。

**表值函数**

所有这些*都*与`SELECT * FROM dbo.my_function(@parameter) AS data`. 以这种方式使用表值函数没有*任何问题。*

将函数的结果连接到另一个表或函数时会变得复杂。

如果函数是多语句*（带有`IF`块等），*则在处理连接之前返回函数的***整个***结果集。

如果该函数是一个内联函数*（只有一个`RETURNS TABLE AS SELECT blah FROM blah`）*，那么 SQL Server 会将其视为一个宏*（除非您告诉它不要这样做）*。这意味着您的函数代码被替换到您的查询中，并且为您的查询构建了一个全新的执行计划。这可能意味着由于索引优化等原因，只会处理您函数中的相关记录。

简而言之，请向建议您的人询问他们的建议*特别*具体。如果它仍然存在`never use functions`，请忽略它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:33:10.153

IMO 的反做法是在查询的 WHERE 子句中使用标量函数，而不使用任何其他可以为 SQL 提供良好选择性的过滤器。

例如

```
 SELECT columns
   FROM [table]
   WHERE dbo.myFunc(col1) = 55 
```

通常会导致表扫描，而不管`col1`.

正如其他人指出的那样，有一些例外，例如，可以在[索引计算列](https://stackoverflow.com/questions/6733264/schema-binding-with-computed-column-function)中使用确定性的模式绑定函数。

例如，考虑以下确定性函数：

```
CREATE FUNCTION dbo.myFunc(@id int)
returns int
WITH SCHEMABINDING
AS
    BEGIN
        return (@id + 1)
    END 
```

给定表（使用 MSSQL 默认 PK = 聚集索引）

```
CREATE TABLE MyTable
(
    ID INT Identity (1,1),
    SomeOtherColumn VARCHAR(50),

    CONSTRAINT PK_MyTable PRIMARY KEY(ID)
) 
```

填充了约 10 万条记录

```
select * from MyTable where ID < 100 -- Index Seek :) 
```

但是，运行标量函数并没有获得聚集索引的好处

```
select * from MyTable where dbo.MyFunc(Id) < 100 -- Index Scan :( 
```

使用标量函数作为计算列的基础

```
alter table MyTable add Computed as dbo.MyFunc(ID)

select * from MyTable where Computed < 100 -- Still Index Scan :( 
```

-- 但是，因为 Computed 列是确定性的并且是模式绑定的，所以它可以被索引：

```
CREATE INDEX IX1_MyTable on MyTable(Computed) 

select * from MyTable where Computed < 100 -- Index Seek :) 
```

有趣的是，现在应用该函数会导致索引查找 (SQL 2008R2)

```
select * from MyTable where dbo.MyFunc(ID) < 100 -- Index Seek :) 
```

# android - Android BroadcastReceiver 不起作用

> ID：11865434
> 
> 赞同：2
> 
> 时间：2012-08-08T13:18:10.570
> 
> 标签：android, broadcastreceiver

我有一个非常简单的问题让我发疯。我正在创建一个 BroadcastReceiver，在清单上声明它，但它不会运行。我试图让它在设备启动时触发。这是代码：

```
package com.vullnetdyla.bcreceiver;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class Receiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d("ftw", "It worked");
    }
} 
```

和清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.vullnetdyla.bcreceiver"
android:versionCode="1"
android:versionName="1.0">

<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<application android:label="@string/app_name"
    android:icon="@drawable/ic_launcher"
    android:theme="@style/AppTheme">

    <receiver android:name="com.vullnetdyla.bcreceiver.Receiver">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver>

</application> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T13:43:33.903

你有一些用户可以启动的活动吗？

如果不是这就是你的问题！由于安装应用程序（更具体的包）后的android 3.1处于停止状态并且没有收到任何广播。用户必须至少手动启动一次才能使其工作。请参阅Android 3.1[发行说明](http://developer.android.com/about/versions/android-3.1.html)中的​​“在已停止的应用程序上启动控件”部分。
另请参阅标志[FLAG_INCLUDE_STOPPED_PACKAGES](http://developer.android.com/reference/android/content/Intent.html#FLAG_INCLUDE_STOPPED_PACKAGES)、[FLAG_EXCLUDE_STOPPED_PACKAGES](http://developer.android.com/reference/android/content/Intent.html#FLAG_EXCLUDE_STOPPED_PACKAGES)。

# xcode - 是否可以在不使用 Interface Builder 的情况下创建 Mac 应用程序......？

> ID：11865436
> 
> 赞同：2
> 
> 时间：2012-08-08T13:18:23.373
> 
> 标签：xcode, interface-builder

我正在使用 XCode 和 Interface Builder 创建一个 NSStatus 项目对象。IBActions 和 IBOutlets 在我的 AppDelegate 类中，我使用它们没有任何问题。过了一会儿，我将 IBActions 和 IBOutlets 移动到一个单独的类中，在 MainMenu.nib 文件中创建了一个 NSObject，将 NSObject 类指向新的 IBActions 类文件。

但是后来我遇到了一些问题，菜单根本没有从 NSStatusItem 中弹出。我知道这是我的错误，我在绑定操作时使用 Interface Builder 做错了。对我来说，使用 Interface Builder 真的很复杂。

所以我刚刚使用我的代码创建了 NSStatusItem,NSMenu,NSMenuItem 然后设置目标和操作。它工作得很好，而且真的很容易编写代码而不是使用 IB。

但是我想确认我可以在不使用 Interface Builder 的情况下为 Mac 创建 Window 应用程序。是否可以 ..？

我承认我不擅长 IB（IB 非常适合那些更了解它的人，我来自 CPP/Java BacKground，甚至不知道 IB 是什么）。

如果我不使用 IB 而只使用 Xcode，是否需要 MainMenu.nib 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T15:03:25.790

您可以在没有 Interface Builder 的情况下创建应用程序，但您最终会比在 IB 的帮助下完成更多的工作。

这是我不久前读到的关于没有笔尖工作的文章系列的第一部分：

[http://lapcatsoftware.com/blog/2007/05/16/working-without-a-nib-part-1/](http://lapcatsoftware.com/blog/2007/05/16/working-without-a-nib-part-1/)

# javascript - 正则表达式比较html标签内的变量

> ID：11865439
> 
> 赞同：0
> 
> 时间：2012-08-08T13:18:29.210
> 
> 标签：javascript, regex, arrays

我一直在经历正则表达式的事情，并认为我们有一个数组，其中 html 标签存储为字符串.. 像`array=["</div>,"</a>", "<div id='test'>", "<a href='http://test/new.html'>", "</a>", "</div>", "<span style='color:#ffffff;'>"]`

如果我们一个一个地遍历数组，

如果我们想检测完整的标签和不完整的标签，例如，它`<div>`是打开的，然后`</div>`在位置上关闭..所以这两个属于完整的标签......`<span>`是打开的，但从不关闭，所以它属于不完整的打开标签，`</div>`在第一个位置是封闭的，所以它属于不完整的封闭标签。

这可以使用 JavaScript 完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T13:25:08.313

对于教授 Stack 数据类型的实用程序来说，这听起来像是一个很大的问题。在 Javascript 中，所有数组都使用堆栈函数，如此[处所示](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array#Methods)。

你怎么做呢？

从一个空堆栈开始。按顺序循环遍历数组的元素。对于每个项目：

*   如果它是一个打开的标签，把它推到你的堆栈上。
*   如果它是关闭标签，则从堆栈中弹出顶部项目
    *   检查两个标签是否匹配。（您必须关闭最近打开的项目，不是吗？）
    *   如果没有，失败

最后，当你完成你的数组时，检查堆栈是否为空。

*   如果不是，则不是每个标签都已关闭。失败
*   如果是这样，成功！

例如：

```
[<div>, <a>, <span>, </span>, </div>, </a>] 
```

将失败。推`div`，推`a`，推`span`。流行音乐`span`。Pop `a`, 不匹配`div`

它应该看起来像

```
[<div>, <a>, <span>, </span>, </a>, </div>] 
```

这将通过，因为在方法结束时堆栈将为空（长度为 0）。

* * *

**编辑：如果您想在单独的步骤中使用正则表达式：**

*要确定标签是否打开：*

```
tag.match(/<\//) == null 
```

这会检查标签是否包含字符`<\`

*要从标签中获取内容：*

```
var tagContent = tag.match(/\w+/)[0]; 
```

这会抓取一组单词字符。具体来说，第一组。它应该只获取标签名称并忽略任何属性，因为空格将结束表达式。匹配总是返回一个数组，以防你全局匹配（会有多个匹配），所以获取返回数组的第 0 个索引来获取值。

*比较两个标签：*

```
tag1Content == tag2Content 
```

这严重不需要正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T05:10:51.580

```
var stack=new Array();
var stackCount = 0;

 var array=["</div>","<div id='test'>", "<a href='http://test/new.html'>", "</a>", "</div>", "<span style='color:#ffffff;'>"];    
        for(var k=0;k<array.length;k++)
        {
                    alert("Eleemnt Selected:" + array[k]);
                    if(stackCount==0)
                        {
                        if(array[k].match(/<\//)==null)
                            {
                            stack.push(array[k]);
                            stackCount++;
                            alert("Pushed in to the stack as stack is empty" + stack);
                            }
                        else
                            {
                            alert("Ignored as it is a tag containing slash");
                            }

                        }
                    else
                        {
                        var tagType1=array[k].match(/<\//);
                        var tagType2=stack[0].match(/<\//);
                        var cmpTag1=array[k].match(/\w+/);  
                        var cmpTag2=stack[0].match(/\w+/);

                        //alert("Tag Type : Array element :" +tagType1 + "Stack element : " +  tagType2 + "Tag Name: Array element : " + cmpTag1 + "Stack Element : " +cmpTag2);
                        if(cmpTag1!=cmpTag2 && tagType1!=tagType2)
                            {   

                            stack.pop();
                            stackCount--;
                            alert("same Tags, so popped out from the stack" + stack);
                            }

                        else
                        {
                        stack.push(array[k]);
                        stackCount++;
                        alert("Pushed in to the stack as items compared are different");
                        }
                        }

        } 
```

Ive posted my answer...I tried and this is where I am... any feedbacks or improvemnts from your side??? I m concerned about the part, , since it is a closed tag, it should pop out.. right??

# html - Django 管理站点，html 标签

> ID：11865440
> 
> 赞同：0
> 
> 时间：2012-08-08T13:18:30.647
> 
> 标签：html, django

当我在 django 管理页面的文本字段中编写 html 标签并在我自己的视图中显示它们时，不会评估 html 标签。有没有办法这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T13:20:15.543

在您的模板中，使用[安全](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#std%3atemplatefilter-safe)：

```
 {{ myobj.html_field|safe }} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:20:43.707

[`safe`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#std%3atemplatefilter-safe)在模板中使用过滤器：

```
{{object.body|safe}} 
```

# c# - ASP.NET MVC 3 路由结构

> ID：11865447
> 
> 赞同：0
> 
> 时间：2012-08-08T13:18:57.217
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-routing

ASP.NET MVC 3 路由让我感到困惑。我觉得我已经阅读了所有我能读到的东西，但有时，我还是不明白。我正在尝试创建一个可以访问的 URL，看起来像

```
/authorized/home/children/{childID} 
```

我希望该 URL 显示为特定子项加载内容的 HTML 视图。我的观点定义如下：

```
/Views/Authorized/Home/Children/Child.cshtml 
```

在我的 global.asax.cs 文件中，我添加了以下路线：

```
 routes.MapRoute(
    "Child", // Route name
    "{controller}/Home/Children/{action}/{id}",
    new { controller = "Authorized", action = "Child", id = UrlParameter.Optional }
  ); 
```

在 AuthorizedController.cs 中，我有以下内容：

```
public ActionResult Child(string id)
{
  return View("~/Views/Authorized/Home/Children/Child.cshtml");
} 
```

如果我访问 /authorized/home/children，我会看到 Child.cshtml 的内容。但是，如果我访问 /authorized/home/children/1，我会得到 404。

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:29:05.987

您共享的路线与您所说的想要的路线不匹配。

你要：

```
/authorized/home/children/{childID} 
```

但是，您的路线期待：

```
/Authorized/Home/Children/{action}/{id} 
```

请注意那里的附加操作参数。孩子是你在控制器中的动作，还是孩子？如果是孩子，你应该更新你的路线：

```
 routes.MapRoute(
    "Child", // Route name
    "{controller}/Home/{action}/{id}",
    new { controller = "Authorized", action = "Children", id = UrlParameter.Optional }
  ); 
```

但是，如果是 Child，您需要从您的路线中删除 {action}，如下所示：

```
 routes.MapRoute(
    "Child", // Route name
    "{controller}/Home/Children/{id}",
    new { controller = "Authorized", action = "Child", id = UrlParameter.Optional }
  ); 
```

这将创建一个明确的路线，指向 Child 动作。

# go - Channels/Goroutines 抛出错误

> ID：11865448
> 
> 赞同：4
> 
> 时间：2012-08-08T13:18:58.807
> 
> 标签：go

我目前正在关注本教程[http://www.miek.nl/files/go/20120807-go.pdf](http://www.miek.nl/files/go/20120807-go.pdf)并在第 7 章讨论了通道/goroutines

但是，示例代码在您运行它之后就向我抛出错误。

```
package main

import (
    "fmt"
    "time"
)

var c chan int

func ready(w string, sec int) {
    time.Sleep(time.Duration(sec) * time.Second)
    fmt.Println(w, "is ready!")
    c <- 1
}

func main() {
    c := make(chan int)
    go ready("Tea", 2)
    go ready("Coffee", 1)
    fmt.Println("Waiting...")
    <-c
    <-c
} 
```

这是执行代码时的输出

```
daniel:go> go run goroutines.go 
Waiting...
Coffee is ready!
Tea is ready!
throw: all goroutines are asleep - deadlock!

goroutine 1 [chan receive]:
main.main()
    /home/daniel/Dropbox/code/go/goroutines.go:21 +0xee

goroutine 2 [syscall]:
created by runtime.main
    /build/buildd/golang-1/src/pkg/runtime/proc.c:221

goroutine 3 [chan send (nil chan)]:
main.ready(0x80bb0d4, 0x3, 0x2, 0x0)
    /home/daniel/Dropbox/code/go/goroutines.go:13 +0xe5
created by main.main
    /home/daniel/Dropbox/code/go/goroutines.go:18 +0x5e

goroutine 4 [chan send (nil chan)]:
main.ready(0x80bba30, 0x6, 0x1, 0x0)
    /home/daniel/Dropbox/code/go/goroutines.go:13 +0xe5
created by main.main
    /home/daniel/Dropbox/code/go/goroutines.go:19 +0x80

goroutine 5 [timer goroutine (idle)]:
created by addtimer
    /build/buildd/golang-1/src/pkg/runtime/ztime_386.c:69
exit status 2 
```

我的代码有问题吗？

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T13:24:36.053

是的，只是一个错字：

```
package main

import (
    "fmt"
    "time"
)

var c chan int

func ready(w string, sec int) {
    time.Sleep(time.Duration(sec) * time.Second)
    fmt.Println(w, "is ready!")
    c <- 1
}

func main() {
    c = make(chan int) // previously c := make(chan int)
    go ready("Tea", 2)
    go ready("Coffee", 1)
    fmt.Println("Waiting...")
    <-c
    <-c
} 
```

`main()`没有使用全局`c`，因为它声明了一个新的。

请注意，您不必在里面创建通道`main()`，在声明它的同时创建它：

```
var c = make(chan int) 
```

# html - 如何使用 Google Map api 导航路线？

> ID：11865453
> 
> 赞同：-1
> 
> 时间：2012-08-08T13:19:05.733
> 
> 标签：html, google-maps, web

我正在使用 Google 地图 api 导航用户位置到固定位置之间的路线，我使用 DirectionsService 导航但它不起作用。

```
<script type="text/javascript">

$( "#map-page" ).live( "pageinit", function() {

    var defaultLatLng = new google.maps.LatLng(22.983587,120.22599);  // Default to Hollywood, CA when no geolocation support
    // 建立 DirectionsService 物件
    var directionsService = new google.maps.DirectionsService();

    if ( navigator.geolocation ) {
        function success(pos) {
            // Location found, show map with these coordinates
            drawMap(new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude));
                // DirectionsRequest
        var request = {
        origin: new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude),  // 起點
        destination: new google.maps.LatLng(22.981666,120.194301),  // 終點
        waypoints: [],
        optimizeWaypoints: true, // 路線最佳化
        travelMode: google.maps.TravelMode.WALKING // 交通模式，目前有 開車/步行 以及腳踏車(僅限美國) 三種路線規劃
};

    directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      var route = response.routes[0];
      // 取得距離
      console.log(route.legs[0].distance.text);
      // 取得從起點至終點的大約時間
      console.log(route.legs[0].duration.text);
    }
});

        }

        function fail(error) {
            console.log(error);
            drawMap(defaultLatLng);  // Failed to find location, show default map
        }

        // Find the users current position.  Cache the location for 5 minutes, timeout after 6 seconds
        navigator.geolocation.getCurrentPosition(success, fail, {maximumAge: 500000, enableHighAccuracy:true, timeout: 6000});
    } else {
        drawMap(defaultLatLng);  // No geolocation support, show default map    
    }

    function drawMap(latlng) {
        var myOptions = {
            zoom: 10,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP

        };

        var map = new google.maps.Map(document.getElementById("map-canvas"), myOptions);

        // Add an overlay to the map of current lat/lng
        var marker = new google.maps.Marker({
            position: latlng,
            map: map,
            title: "Greetings!"
        });
    }
    </script> 
```

谁能告诉我怎么了，thx

顺便说一句，我有上面代码的演示

[http://appkon.com/demo/project2/maps.html](http://appkon.com/demo/project2/maps.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:43:09.377

查看 Chrome 中的 JavaScript 控制台，我收到错误消息，此资源即将出现 404，无法加载： [http ://appkon.com/demo/JQuery%20Mobile%20%E7%A8%8B%E5 %BC%8F%E7%A2%BC/ch9/maps.js](http://appkon.com/demo/JQuery%20Mobile%20%E7%A8%8B%E5%BC%8F%E7%A2%BC/ch9/maps.js)

我怀疑这是你问题的开始。我会解决这个问题，看看还有什么问题。这是使用 Chrome 开发工具调试 Maps API 的一个很好的参考视频： [http ://www.youtube.com/watch?v=nb4gvrNrDWw](http://www.youtube.com/watch?v=nb4gvrNrDWw)

# php - as3 中的 php CRYPT_BLOWFISH

> ID：11865456
> 
> 赞同：2
> 
> 时间：2012-08-08T13:19:12.043
> 
> 标签：php, actionscript-3, air, cryptography, blowfish

在 php 中，您可以使用[crypt](http://php.net/manual/en/function.crypt.php)函数并给它一个以“$2a$”开头的盐，以使用 CRYPT_BLOWFISH 对字符串进行加密。

例如。

```
echo crypt("test", "$2a$13$1mFan0ihXzWfxATGXSKRqe");
//output: $2a$13$1mFan0ihXzWfxATGXSKRqedMoYWoXpPizu4Q274LnpVVJ7gyza3Lq 
```

我尝试使用[as3crypto](http://code.google.com/p/as3crypto/)库在 as3 中生成输出。我试过的代码片段。

```
var key:ByteArray = Hex.toArray("$2a$13$1mFan0ihXzWfxATGXSKRqe");
var blowfish:BlowFishKey = new BlowFishKey(key);
var dataBytes:ByteArray = new ByteArray();
dataBytes.writeUTFBytes("test");
blowfish.encrypt(dataBytes);
var encrypted:String = Hex.fromArray(dataBytes).toUpperCase();
trace(encrypted);
//output: 986C8D386BEAD6AE 
```

我不认为那些河豚密码是一样的。根据 php.net 上的文档，基于 bcrypt 的 php 河豚是一种方法。在 as3 中，我还可以解密加密的消息。

我搜索了在 as3 中提供与 php 中相同的输出但没有成功的河豚库。任何人都知道如何在 actionscript 3.0 中生成与 php 相同的输出？

**更新**

我正在使用 adobe air。所以原生解决方案也是可以接受的。我可以创建一个本机扩展或使用 NativeProcess 来访问它来进行加密而不是 as3。

**更新 2** 现在我正在使用在[http://derekslager.com/blog/posts/2007/10/bcrypt-dotnet-strong-password-hashing-for-dotnet-and上找到的 bcrypt 类使用 c# 创建的命令行程序-mono.ashx](http://derekslager.com/blog/posts/2007/10/bcrypt-dotnet-strong-password-hashing-for-dotnet-and-mono.ashx)

# python - 如何从 numpy.datetime64 获取 unix 时间戳

> ID：11865458
> 
> 赞同：21
> 
> 时间：2012-08-08T13:19:14.603
> 
> 标签：python, numpy

如何从 numpy.datetime64 或 numpy.datetime_ 获取 UNIX 时间？

例如：

```
np.datetime_('2012-08-08 13:37:00') 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2017-08-30T20:12:42.740

为了考虑单位，我认为您需要执行以下操作：

```
def get_unixtime(dt64):
    return dt64.astype('datetime64[s]').astype('int') 
```

请注意，这会`[s]`在转换为整数之前转换为“秒”（the ）。这适用于 NumPy 1.12.1。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-03-27T17:11:11.540

numpy datetime64 具有可变单位：

摘自[官方文档](http://docs.scipy.org/doc/numpy-1.10.0/reference/arrays.datetime.html)：

> 内部存储的单位是从字符串的形式中自动选择的，可以是日期单位，也可以是时间单位。日期单位是年 ('Y')、月 ('M')、周 ('W') 和天 ('D')，而时间单位是小时 ('h')、分钟 ('m' )、秒 ('s')、毫秒 ('ms') 和一些额外的基于 SI 前缀秒的单位。

因此，首先我们需要使用 dtype 检查当前单元，例如：

```
>>> now = np.datetime64(datetime.datetime.now())
>>> now.dtype

# for ns unit, use:
dtype('<M8[ns]')
now.astype('int64')/1e9, dtype='int32'

# for us unit, use:
dtype('<M8[us]')
now.astype('int64')/1e6, dtype='int32'

# for ms unit, use:
dtype('<M8[ms]')
now.astype('int64')/1e3, dtype='int32' 
```

等等....

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-08T15:10:11.490

`np.datetime64('now')`对于numpy 1.6.1 与 1.7的值，我得到不一致的结果。

这适用于两者：

```
>>> import datetime
>>> import numpy as np
>>> now = np.datetime64(datetime.datetime.now())
>>> (now.astype('uint64') / 1e6).astype('uint32')
1344447810 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-07-25T14:44:29.933

我想发布我发现的解决方案，我认为它可能比转换为 uint 更好，因为我觉得类型转换可能存在问题。

```
>>> import numpy as np
>>> now = np.datetime64('now')
>>> ux_time = now.astype(np.timedelta64) / np.timedelta64(1, 'ms') 
```

我觉得这个解决方案好一点，因为它允许你选择你的 unix 时间单位。对于我正在进行的项目，我们使用“ms”，但如果需要，您可以指定不同的单位。

此外，这允许使用 numpy 将 datetime64 数组转换为 timedelta64：

```
>>> date_time_array.astype(np.timedelta64) / np.timedelta64(1, 'ms') 
```

我用它把从 pandas 中取出的 np.datetime64 列翻译成 unixtime 数组

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-17T21:07:26.627

首先你要知道数组的存储单元。然后您将数组视为 64 位整数并除以适当的比例因子以返回秒数。例如，如果您的日期时间数组以微秒 ( `dtype=<M8[us]`) 为存储单位存储，您可以这样做：

```
unix_time = dtarray.view("i8") / 1e6 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-03-02T10:04:50.357

这是@farenorth 答案的扩展和修改版本，它允许指定输出的精度：

```
from datetime import datetime, timezone

import numpy as np
# np.__version__: '1.21.5'

def get_unixtime(dt64, unit='s'):
    return dt64.astype(f'datetime64[{unit}]').astype(np.int64)

print(datetime(2022,3,2,tzinfo=timezone.utc).timestamp())
# 1646179200.0 # unix time in seconds

dt = np.datetime64(datetime(2022,3,2)) # tz naive in numpy!

for unit in 's', 'ms', 'us', 'ns':
    print(f"precision: {unit}, -> {get_unixtime(dt, unit)}")

# precision: s, -> 1646179200
# precision: ms, -> 1646179200000
# precision: us, -> 1646179200000000
# precision: ns, -> 1646179200000000000 
```

作为旁注，我们不能在这里使用`int`or `'int'`（本机 Python 类型），因为这会给出不正确的结果。相关：[将 numpy.datetime64 转换为 int 时出错](https://stackoverflow.com/q/71174053/10197418)。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-08T13:21:09.953

```
def get_unixtime(time):    
    return (time.astype(np.int64)/1e6).astype(np.int64)
get_unixtime(np.datetime64('now')) 
```

似乎返回了 UNIX 时间戳，我只检查了几个日期。

# c++ - 使用 clock() 函数调度任务时的问题

> ID：11865460
> 
> 赞同：0
> 
> 时间：2012-08-08T13:19:27.323
> 
> 标签：c++, scheduled-tasks, precision, clock

我想以不同的时间间隔安排任务：在 0.1 秒、0.9 秒 .... 2 秒等我使用 clock() C++ 函数返回自模拟开始以来的滴答数，并将滴答数转换为秒使用 CLOCKS_PER_SEC 但我注意到当瞬间是浮点数时任务没有安排，但当它是整数时它会。这里负责调度的代码部分：

```
float goal = (float) clock() / CLOCKS_PER_SEC + 0.4 ;  // initially (float) clock() / CLOCKS_PER_SEC = 0 ; 
if ((float) clock() / CLOCKS_PER_SEC == goal) 
     do stuff ; 
```

在这种情况下，它不起作用，但是当我安排任务在 3 秒内完成时，它就起作用了。是精度问题吗？？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-08T14:19:12.153

如果我要在 C++ 中实现一些计时器机制，我可能会将[`std::chrono`命名空间](http://en.cppreference.com/w/cpp/chrono)与[`std::priority_queue`](http://en.cppreference.com/w/cpp/container/priority_queue).

```
#include <functional>
#include <queue>
#include <chrono>
#include <sys/time.h>  // for `time_t` and `struct timeval`

namespace events
{
    struct event
    {
        typedef std::function<void()> callback_type;
        typedef std::chrono::time_point<std::chrono::system_clock> time_type;

        event(const callback_type &cb, const time_type &when)
            : callback_(cb), when_(when)
            { }

        void operator()() const
            { callback_(); }

        callback_type callback_;
        time_type     when_;
    };

    struct event_less : public std::less<event>
    {
        bool operator()(const event &e1, const event &e2) const
        {
            return (e2.when_ < e1.when_);
        }
    };

    std::priority_queue<event, std::vector<event>, event_less> event_queue;

    void add(const event::callback_type &cb, const time_t &when)
    {
        auto real_when = std::chrono::system_clock::from_time_t(when);

        event_queue.emplace(cb, real_when);
    }

    void add(const event::callback_type &cb, const timeval &when)
    {
        auto real_when = std::chrono::system_clock::from_time_t(when.tv_sec) +
                         std::chrono::microseconds(when.tv_usec);

        event_queue.emplace(cb, real_when);
    }

    void add(const event::callback_type &cb,
             const std::chrono::time_point<std::chrono::system_clock> &when)
    {
        event_queue.emplace(cb, when);
    }

    void timer()
    {
        event::time_type now = std::chrono::system_clock::now();

        while (!event_queue.empty() &&
               (event_queue.top().when_ < now))
        {
            event_queue.top()();
            event_queue.pop();
        }
    }
} 
```

要使用，只需使用 添加事件`events::add`，并每秒调用`events::timer`几次。

简单的**例子**：

```
void foo()
{
    std::cout << "hello from foo\n";
}

void done()
{
    std::cout << "Done!\n";
}

struct bar
{
    void hello()
    {
        std::cout << "Hello from bar::hello\n";
    }
};

auto now = std::chrono::system_clock::now();
bar b;

events::add(foo, now + std::chrono::seconds(2));

events::add(std::bind(&bar::hello, b), now + std::chrono::seconds(4));

events::add(done, now + std::chrono::seconds(6));

while (true)
{
    usleep(10000);  // TODO: Do some "real" work here instead...
    events::timer();
} 
```

上面的示例将打印：

```
来自foo的你好
来自酒吧的你好::你好
完毕！

```

每两秒打印一行。之后`"Done!"`程序将永远循环，什么也不做。

请注意，该程序包含大量 C++11 功能，但已使用 GCC 4.4.5 和 4.7.1 进行了测试。VC++2010 很遗憾没有`<chrono>`标头，但 VC++2012RC 显然有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:32:30.013

问题可能是因为您的浮点比较。这可以提供意想不到的结果。请避免这种情况。

参考[这个](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:24:06.740

CLOCKS_PER_SEC 在您的系统中是整数。在其他系统中，它也可以是浮动的。也将（浮动）放在它附近

# php - 请求页面时如何设置 Facebook 元标记？

> ID：11865472
> 
> 赞同：0
> 
> 时间：2012-08-08T13:20:03.197
> 
> 标签：php, mysql, facebook

如何根据加载的内容（不使用 jquery 或 ajax）设置 Facebook 的元标记，我正在从另一个页面加载内容，该页面基于通过 $_GET 接收的 id 执行 MySQL 选择。

我的意思是：页面 X 有一个链接列表，每个链接都有一个 id，通过从 mySQL 数据库中选择数据然后将页面包含在页面 X 中，该 id 被发送到另一个页面以生成内容

我通过测试注意到 Facebook 在请求页面时无法识别动态生成的内容

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-08T14:55:49.567

您可以从第一页将名称作为参数传递，也可以像这样从第二页进行 SQL 查找

```
<?php

$sth = $dbh->prepare('SELECT id,name FROM people WHERE id=?');
$r = $sth->execute(array($_GET['p']));

echo '<meta property="og:your_property" content="' . $r[0]['name'] . '" />';

$> 
```

# delphi - 字段名被截断

> ID：11865479
> 
> 赞同：0
> 
> 时间：2012-08-08T13:20:28.167
> 
> 标签：delphi, delphi-2010, firebird, firebird2.1

我正在尝试从 Delphi 7 迁移到 Delphi 2010。

我的第一个困难是 FIELDNAME 截断。

我正在使用一个包含名称超过 30 个字符（精确为 31 个字符）大小的列的表。

当查询打开时，会发生异常：

```
Field 'NUM_DIAS_ATRASO_BLOQ_FAT_PESSOA' not found 
```

在我更改了字段名称（使用别名，如`"NUM_DIAS_ATRASO_BLOQ_FAT_PESSO"`）后，一切都很好......

Delphi7 不会出现这个问题！

我该如何解决这个问题？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:18:15.923

问题解决了！

已安装更新 4 和 5。

# sharepoint - SharePoint 2007/2010 部署方法

> ID：11865481
> 
> 赞同：5
> 
> 时间：2012-08-08T13:20:31.203
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007, sharepoint-designer, wsp

几年来，我一直在为 SharePoint 2007/2010 进行开发。我现在意识到没有一家公司对新站点使用相同的部署方法。我想知道要部署的“最佳实践”是什么。

这是我使用的方法：

* * *

**1 - 避免使用 WSP 方法**

*   使用 SharePoint GUI 界面在**DEV**中创建站点（创建子站点、列表、库、页面等）。
*   通过 SharePointDesigner 自定义一些小事。
*   完成后，我们使用**stsadm -export打包****DEV**，然后使用**stsadm -import将其移植到****QA**和**PROD**。
*******   当我们需要对现有站点进行修改时，我们会创建一个控制台应用程序**(.exe)**来进行必要的修改，在**QA上对其进行测试，然后在****PROD**上运行它（并将每个操作记录在一个单独的 txt 文件中）。*   我们只使用 WSP 来部署 Webparts、EventReceiver 或将在不同站点上使用的东西。******

 ***** * *

**2 - 用 WSP 方法做所有事情**

*   每次我们要创建一个新站点时，我们都会使用一个供应 WSP，它通过代码创建所有内容（创建子站点、列表、库、页面等）。
*   我们通过创建一个新的空 SiteCollection 进行部署，然后安装供应 WSP 并激活它以创建所有内容。
*   当我们需要对站点进行修改时，我们会修改 WSP，以便它检查代码中是否存在内容并相应地修改需要更改的内容。

* * *

我个人（强烈）更喜欢方法＃1，因为我相信它更简单，更快。但我想知道其他一些意见，在这些情况下最佳做法是什么？我多年来一直使用方法#1，它实际上工作得很好。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:10:19.237

尝试在[sharepoint.stackexhange.com](https://sharepoint.stackexchange.com/)上重新发布您的问题。但首先检查下一个相关问题列表：

*   [什么是 Sharepoint(MOSS 2007) 开发/部署最佳实践](https://stackoverflow.com/questions/2967882/what-are-sharepointmoss-2007-developement-deployment-best-practices)

*   [在 #SharePoint2010 中使用备份和还原网站集作为部署方法有什么缺点？](https://sharepoint.stackexchange.com/questions/23809/whats-the-downside-of-using-backup-and-restore-site-collection-as-deployment-me)

*   [Sharepoint 解决方案部署](https://sharepoint.stackexchange.com/questions/27386/sharepoint-solution-deployment)

*   [用于部署到生产的 SharePoint 2010 包网站集](https://sharepoint.stackexchange.com/questions/5856/sharepoint-2010-package-site-collection-for-deployment-to-production)

*   [更新生产站点的最佳实践](https://sharepoint.stackexchange.com/questions/10650/best-practices-for-updating-production-site)****

# javascript - jQuery：从用户控件捕获点击事件

> ID：11865482
> 
> 赞同：0
> 
> 时间：2012-08-08T13:20:31.210
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc

我有带按钮的 UserControl。我正在尝试使用 jQuery 捕获此按钮的单击事件。我在 ascx 中的代码：

```
<link type="text/css" href="css/jquery-ui-1.8.22.custom.css" rel="stylesheet" />
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.22.custom.min.js"></script>
<script type="text/javascript" src="js/myjQueryCode.js"></script>

<button id="test-button">Test</button> 
```

myjQueryCode.js 中的代码。

我试过这个：

```
$('#test-button').bind('click', function() {
    alert("123");
}); 
```

还有这个：

```
$("[id$=test-button]")
    .button()
    .click(function() {
        alert("123");
}); 
```

还有这个：

```
$('#test-button')
    .button()
    .click(function() {
        alert("123");
}); 
```

没有什么是工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:23:47.423

您是否尝试将代码放在旁边`$(document).ready()`？试试这个：

```
$(document).ready(function(){

    $('#test-button').bind('click', function() {
        alert("123");
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:24:03.030

它应该只是：

```
$('#test-button').click(function () {
    console.log('Click activated.');
}); 
```

确保代码可以实际执行。例如，将语句包装在执行的函数中，如下所示：

```
(function () {
    // Write code here
}()); 
```

或者在文档准备好后执行，如下所示：

```
$(document).ready(function () {
    // Write code here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:23:58.640

尝试将您的脚本代码放在您的 html 代码之后 - 也许这会有所帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T13:24:57.530

您的 jQuery 代码在元素存在之前执行（因为`<script>`标签位于按钮的 HTML 之前），因此您需要将其包装在 DOM 就绪事件处理程序中。像这样：

```
$(document).ready(function() {
    $('#test-button').bind('click', function() {
        alert("123");
    });
}); 
```

有关更多信息，请查看[`.ready()`](http://api.jquery.com/ready/)函数的 API 文档和[jQuery 入门](http://docs.jquery.com/Tutorials%3aGetting_Started_with_jQuery)教程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T13:29:34.617

您使用 jQuery 的第一种方法，而不是引用 .button() 在 jsfiddle 中有效：http: [//jsfiddle.net/Cd5Qj/](http://jsfiddle.net/Cd5Qj/)

因此，很可能您的脚本标记中的 jQuery 库路径错误，或者您没有在 jQuery 块中包含代码，例如：

```
$(function(){
  ... //code here
}); 
```

...或者有一些我们无法检查的冲突，因为您没有在此处显示更多代码。

# c++ - Clang AST：外部 LinkageSpec 问题

> ID：11865486
> 
> 赞同：2
> 
> 时间：2012-08-08T13:21:03.983
> 
> 标签：c++, clang, abstract-syntax-tree, extern

我目前正在使用 clang 的 python 绑定编写一个静态 C++ 代码分析器，由于某种原因，我`extern`无法在 AST 中找到某些东西，即使有一个似乎是适当的 CursorKind (CXCursor_LinkageSpec)

我的意思是，当像我这样解析代码时，`extern int foo;`我只会`foo`在 AST 中找到我的变量，而不是它的链接规范的单一线索。

我错过了什么？
问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T08:05:13.580

类 VarDecl 有一个成员函数： *bool hasExternalStorage () const* 告诉你变量是否是外部的。

我正在使用 clang 的 C++ 库。希望它对您的 python 工作有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T04:38:17.833

Bit of a necroanswer but if you go in to clang\lib\Sema\SemaCodeComplete.cpp(in \llvm\tools\ if you follow llvm's installation instructions) and add the following line:

```
case Decl::LinkageSpec:  return CXCursor_LinkageSpec; 
```

To the switch in:

```
CXCursorKind clang::getCursorKindForDecl(const Decl *D) 
```

It should resolve the issue of clang's Python binder returning UNEXPOSED_DECL instead of the correct LINKAGE_SPEC. This change was made at revision 183352(2013-06-05).

Example from my version:

```
CXCursorKind clang::getCursorKindForDecl(const Decl *D) {
if (!D)
    return CXCursor_UnexposedDecl;

switch (D->getKind()) {
    case Decl::Enum:               return CXCursor_EnumDecl; 
    case Decl::LinkageSpec:  return CXCursor_LinkageSpec;
   // ...... 
```

# python - 发送十六进制数据

> ID：11865490
> 
> 赞同：7
> 
> 时间：2012-08-08T13:21:14.790
> 
> 标签：python, python-3.x

我正在使用一些可以通过十六进制命令控制的硬件。我已经有了一些 Python 代码片段，用于 telnet 控制使用 ASCII 命令的其他设备。

我该如何发送十六进制命令？例如，我将如何`skt.send('some ascii command\r')`使用十六进制值进行修改，以及存储这些值的最佳数据类型是什么？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-08T13:28:59.223

在 Python 2 中，使用字符串文字：

```
skt.send('\x12\r') 
```

在 Python 3 中，使用字节文字或[`bytes.fromhex`](http://docs.python.org/dev/library/stdtypes.html#bytes.fromhex)：

```
skt.send(b'\x12\r')
skt.send(bytes.fromhex('12 0d')) 
```

无论哪种情况，该[`bytearray`](http://docs.python.org/dev/library/functions.html#bytearray)类型都可能很有用，因为它是一种可变（可修改）类型，您可以使用整数和字节文字构造它：

```
skt.send(bytearray([0x02, 0x03, 0x00, 0x00, 0x05])) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T13:33:55.223

在 Python 3 下，你也有很棒的`bytes.fromhex()`功能。

```
>>> bytes.fromhex('AA 11 FE')
b'\xaa\x11\xfe'
>>> bytes.fromhex('AA11FE')
b'\xaa\x11\xfe' 
```

# android - android中的opengl es投影和相机

> ID：11865492
> 
> 赞同：1
> 
> 时间：2012-08-08T13:21:18.783
> 
> 标签：android, opengl-es, projection

我是 android opengl es 编程的新手。我已经学会了创建 3d 对象并使用 android sdk 中的 APIDemos 在屏幕上查看它们。但是，我无法理解投影调用 glFrustumf(..) 以及如何设置相机。如果有人解释 glFrustumf(..) 的工作原理，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:57:00.643

[OpengGL 红皮书的第 3 章](http://www.glprogramming.com/red/chapter03.html#name3)很好地解释了如何在 OpengGL 中设置相机及其视锥。

![视锥体](../Images/1fb3ec62ef885234d551df1e1ec5c00e.png)

我还建议您尝试[Nate Robins OpenGL 教程](http://user.xmission.com/~nate/tutors.html)，尤其是投影教程：

![投影教程](../Images/be1bb70d97490f7bffcac24fd4b59889.png)

# cakephp - CakePHP 忘记/重置密码

> ID：11865497
> 
> 赞同：0
> 
> 时间：2012-08-08T13:21:26.597
> 
> 标签：cakephp

我试图了解在 cakephp 2.1 中创建忘记密码功能的过程。这就是我想要发生的事情。

1.  用户点击忘记密码链接
2.  输入他们的电子邮件
3.  Cake 检查电子邮件是否存在
4.  如果确实如此，则会向它们发送一个链接，该链接带有附加到 url 的某种随机字符串
5.  他们点击链接并输入新密码
6.  数据库中的密码已更新
7.  用户可以登录

我找到了这篇[文章](https://stackoverflow.com/questions/6012066/cakephp-forgot-password)，但我希望有人能够提供一些示例代码给我看。

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:26:39.260

我最近在个人项目中做了类似的事情。这可能不是最好的解决方案，但这是我的过程：

1.  未登录的用户以“恢复密码”形式提交他的电子邮件。
2.  控制器找到电子邮件的所有者（如果有），生成代码并将其保存到用户模型中的专用列。然后向电子邮件发送一个编码链接，其中包含用户 ID 和生成的代码。
3.  用户访问他的电子邮件并单击链接。
4.  控制器接收参数并将其拆分为代码和ID，读取用户ID并检查代码是否匹配，如果匹配，则显示新密码表单，如果不匹配，则清除代码并要求用户重新启动进程。

笔记。

*   我使用 uuid 作为用户 ID，使用 10 长度的随机字符串作为代码。我通过“_”加入两者，以将代码发送到电子邮件。
*   在我的实现中，代码不会按时间过期，但如果用户登录或错过（很可能是通过猜测），代码将被清除。

# php - MySQL Query - 将字符串与集合类型进行比较

> ID：11865498
> 
> 赞同：3
> 
> 时间：2012-08-08T13:21:26.727
> 
> 标签：php, mysql, set

我的表格中有一个类型`SET('alpha','beta','gamma','delta','...','omega')`和名称为“字母”的列

我的 PHP 查询是

$string = "伽玛"

```
SELECT * FROM table WHERE alphabet LIKE "%$string%" 
```

因此，我想返回`gamma`column 中的所有行`alphabet`，而不管其他值也在那里，因为它是 SET 类型。

sql查询会是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T13:22:54.177

```
SELECT * FROM table WHERE find_in_set('$string', alphabet) > 0 
```

[FIND_IN_SET 文档](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)

# java - 在 jquery forntier 日历中加载文件时出错

> ID：11865499
> 
> 赞同：0
> 
> 时间：2012-08-08T13:21:27.873
> 
> 标签：java, jquery, jquery-plugins, playframework, playframework-2.0

我正在使用播放 2.0.2。并在游戏中实现了 jquery 日历插件。要将事件加载到日历中，我需要加载一个文件。但是，当我从游戏中进行操作时，我遇到了加载错误。

编写的代码是

```
var url1= '@routes.Assets.at("Calender.ics")';
jfcalplugin.loadICalSource("#mycal",url1,"html"); 
```

有人可以建议这个问题吗？（如果问题不清楚，请告诉我。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:27:02.200

检查失败原因的唯一方法是在浏览器中使用一些检查工具，即。`FireBug`为`FireFox`. 使用它，您可以检查发送的请求（或收到的响应）有什么问题。

也许创建的路径`to Calendar.ics`是错误的......也许`loadICalSource()`是坏的，没有人知道，只有你可以检查它。

还可以预览创建的网页的源 HTML 以检查语法是否没有错误。

**选择**

不想强迫您，但您可以从 github 克隆准备使用 FullCallendar 示例：[https](https://github.com/biesior/Play-20-Sample-FullCalendar-Java) ://github.com/biesior/Play-20-Sample-FullCalendar-Java 。

为了在 Play 2 中使用 ajax，最好使用[javascriptRoutes](https://stackoverflow.com/a/11133586/1066240)

# sql-server - SQL Server：在 FUNCTION 中使用大小写

> ID：11865501
> 
> 赞同：1
> 
> 时间：2012-08-08T13:21:29.250
> 
> 标签：sql-server, function, case

SQL 新手，经验丰富的 VBA-er 需要一些帮助。

我对需要获得特定类型的一些不同费用的交易有看法。费用在表格中，其中一些字段是必需的，而其他字段可能为 NULL。通过这种方式，我们可以获得一个通用的费用结构，并且仍然允许特定的特价。

我现在的目标是找到最佳匹配费用。这是以下费用：

1.  符合所有要求的标准，
2.  匹配所有可选条件或`NULL`为它们提供，
3.  具有通过 1\. 和 2 的所有费用中最匹配的可选标准。

现在我得到了这个代码的一个版本，但作为一个过程。但是，由于我需要在视图中使用它，因此我无法使用该版本，并且函数中不允许使用临时表）。

在查看了这个论坛和其他人之后，我得出一个仍然给出 2 个错误的结果：
1\. ErrorMessage: Incorrect syntax near `'@tblTEMP'`，
2\. ErrorMessage: Incorrect syntax near `'BEGIN'`。

我当前的脚本如下（使用局部变量表）：

```
ALTER FUNCTION [dbo].[fnStandardFeeBAK]
  (@Type_Id BIGINT, @Party_Id BIGINT, @I_A_Id BIGINT, @Grid_Id BIGINT,
  @Market_Id BIGINT, @Counterparty_Id BIGINT, @Product_Id BIGINT, 
  @DealDate DATETIME)
RETURNS TABLE

AS

BEGIN
  DECLARE @tblTEMP TABLE (Standard_Fee DECIMAL(38,8), Currency VARCHAR(50), 
  Unit VARCHAR(50), Unit2 VARCHAR(50), MatchScore BIGINT);
  WITH @tblTEMP AS 
  (SELECT Standard_Fee, V2.Element AS Currency, V1.Element AS Unit,
V2.Element+'/'+V1.Element AS Unit2,
  SF.I_A_Id, SF.Grid_Id, SF.Product_Id, SF.Counterparty_Id,
  (CASE WHEN SF.I_A_Id = @I_A_Id THEN 1 ELSE 0 END +
      CASE WHEN SF.Grid_Id = @Grid_Id THEN 1 ELSE 0 END +
      CASE WHEN SF.Product_Id = @Product_Id THEN 1 ELSE 0 END +
      CASE WHEN SF.Counterparty_Id = @Counterparty_Id THEN 1 ELSE 0 END) 
      AS MatchScore
  FROM tblStandard_Fee AS SF
  LEFT JOIN tblElement AS V1 ON V1.Element_Id = SF.Unit_Id
  LEFT JOIN tblElement AS V2 ON V2.Element_Id = SF.Currency_Id

  WHERE SF.Type_Id = @Type_Id AND SF.Party_Id = @Party_Id AND 
    SF.Market_Id = @Market_Id
    AND SF.Date_From < @DealDate 
    AND (SF.Date_To > @DealDate OR SF.Date_To IS NULL)
    AND (SF.I_A_Id = @I_A_Id OR SF.I_A_Id IS NULL)
    AND (SF.Grid_Id = @Grid_Id OR SF.Grid_Id IS NULL)
    AND (SF.Product_Id = @Product_Id OR SF.Product_Id IS NULL)
    AND (SF.Counterparty_Id = @Counterparty_Id OR SF.Counterparty_Id IS NULL))
RETURN
  SELECT Standard_Fee, Currency, Unit, Unit2
  FROM @tblTEMP
  WHERE MatchScore= MAX(MatchScore)
END 
```

如果不让我知道，我希望我的问题很清楚。

感谢您提出建议，甚至用最后一点解决我的问题！

* * *

所以 LittleBobbyTables 的所有帮助结合起来给了我一个工作的最终结果。请不要忘记给他学分。

工作代码：

```
ALTER FUNCTION [dbo].[fnStandardFeeBAK]
(@Type_Id BIGINT, @Party_Id BIGINT, @I_A_Id BIGINT, @Grid_Id BIGINT,
@Market_Id BIGINT, @Counterparty_Id BIGINT, @Product_Id BIGINT, @DealDate DATETIME)

RETURNS @YourTable TABLE 
(
    -- Columns returned by the function
    Standard_Fee DECIMAL(38,8), 
    Currency VARCHAR(50), 
    Unit VARCHAR(50), 
    Unit2 VARCHAR(50)
)
AS

BEGIN   
    WITH YourCTE(Standard_Fee, Currency, Unit, Unit2, MatchScore) AS
    (
    SELECT Standard_Fee, V2.Element AS Currency, V1.Element AS Unit,
        V2.Element + '/' + V1.Element AS Unit2,
        (CASE WHEN SF.I_A_Id = @I_A_Id THEN 1 ELSE 0 END +
        CASE WHEN SF.Grid_Id = @Grid_Id THEN 1 ELSE 0 END +
        CASE WHEN SF.Product_Id = @Product_Id THEN 1 ELSE 0 END +
        CASE WHEN SF.Counterparty_Id = @Counterparty_Id THEN 1 ELSE 0 END) 
        AS MatchScore
    FROM tblStandard_Fee AS SF
        LEFT JOIN tblElement AS V1 ON V1.Element_Id = SF.Unit_Id
        LEFT JOIN tblElement AS V2 ON V2.Element_Id = SF.Currency_Id

    --Type_ID, Party_ID and Market_Id are always present, others can have NULL values
    WHERE SF.Type_Id = @Type_Id AND SF.Party_Id = @Party_Id 
            AND SF.Market_Id = @Market_Id AND SF.Date_From < @DealDate 
            AND (SF.Date_To > @DealDate OR SF.Date_To IS NULL)
            AND (SF.I_A_Id = @I_A_Id OR SF.I_A_Id IS NULL)
            AND (SF.Grid_Id = @Grid_Id OR SF.Grid_Id IS NULL)
            AND (SF.Product_Id = @Product_Id OR SF.Product_Id IS NULL)
            AND (SF.Counterparty_Id = @Counterparty_Id OR SF.Counterparty_Id IS NULL)
    GROUP BY Standard_Fee, V1.Element, V2.Element, SF.I_A_Id, SF.Grid_Id, SF.Product_Id, SF.Counterparty_Id
    )
    INSERT @YourTable 
        SELECT Standard_Fee, Currency, Unit, Unit2
        FROM YourCTE 
        GROUP BY MatchScore, Standard_Fee, Currency, Unit, Unit2
        HAVING MatchScore = (SELECT MAX(MatchScore) FROM YourCTE)

     RETURN;
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:28:28.000

请参阅[Table-Valued User-Defined Functions](http://msdn.microsoft.com/en-us/library/ms191165%28v=sql.105%29.aspx)文档，正确的语法是：

```
ALTER FUNCTION dbo.fnStandardFeeBAK(@Type_Id BIGINT, @Party_Id BIGINT, 
    @I_A_Id BIGINT, @Grid_Id BIGINT,  @Market_Id BIGINT, 
    @Counterparty_Id BIGINT, @Product_Id BIGINT, 
    @DealDate DATETIME)

RETURNS @YourTable TABLE 
(
    -- Columns returned by the function
    Standard_Fee DECIMAL(38,8), 
    Currency VARCHAR(50), 
    Unit VARCHAR(50), 
    Unit2 VARCHAR(50)
)
AS 
```

最后：

```
 INSERT @YourTable 
    SELECT Standard_Fee, Currency, Unit, Unit2
    FROM YourCTE
    WHERE MatchScore= MAX(MatchScore)
    RETURN;
END; 
```

**编辑**：搞砸了 CTE，你不需要临时表。

把它们放在一起，你会得到：

```
ALTER FUNCTION dbo.fnStandardFeeBAK(@Type_Id BIGINT, @Party_Id BIGINT, 
    @I_A_Id BIGINT, @Grid_Id BIGINT,  @Market_Id BIGINT, 
    @Counterparty_Id BIGINT, @Product_Id BIGINT, 
    @DealDate DATETIME)

RETURNS @YourTable TABLE 
(
    -- Columns returned by the function
    Standard_Fee DECIMAL(38,8), 
    Currency VARCHAR(50), 
    Unit VARCHAR(50), 
    Unit2 VARCHAR(50)
)
AS

BEGIN
 WITH YourCTE (Standard_Fee, Currency, Unit, Unit2, MatchScore) AS 
  (SELECT Standard_Fee, V2.Element AS Currency, V1.Element AS Unit,
V2.Element+'/'+V1.Element AS Unit2,
  SF.I_A_Id, SF.Grid_Id, SF.Product_Id, SF.Counterparty_Id,
  (CASE WHEN SF.I_A_Id = @I_A_Id THEN 1 ELSE 0 END +
      CASE WHEN SF.Grid_Id = @Grid_Id THEN 1 ELSE 0 END +
      CASE WHEN SF.Product_Id = @Product_Id THEN 1 ELSE 0 END +
      CASE WHEN SF.Counterparty_Id = @Counterparty_Id THEN 1 ELSE 0 END) 
      AS MatchScore
  FROM tblStandard_Fee AS SF
  LEFT JOIN tblElement AS V1 ON V1.Element_Id = SF.Unit_Id
  LEFT JOIN tblElement AS V2 ON V2.Element_Id = SF.Currency_Id

  WHERE SF.Type_Id = @Type_Id AND SF.Party_Id = @Party_Id AND 
    SF.Market_Id = @Market_Id
    AND SF.Date_From < @DealDate 
    AND (SF.Date_To > @DealDate OR SF.Date_To IS NULL)
    AND (SF.I_A_Id = @I_A_Id OR SF.I_A_Id IS NULL)
    AND (SF.Grid_Id = @Grid_Id OR SF.Grid_Id IS NULL)
    AND (SF.Product_Id = @Product_Id OR SF.Product_Id IS NULL)
    AND (SF.Counterparty_Id = @Counterparty_Id OR SF.Counterparty_Id IS NULL))

  INSERT @YourTable 
    SELECT Standard_Fee, Currency, Unit, Unit2
    FROM YourCTE
    WHERE MatchScore= MAX(MatchScore)
  RETURN;
END; 
```

# backbone.js - Backbone.js 如何在传递给模板之前获取 i18n 值

> ID：11865503
> 
> 赞同：4
> 
> 时间：2012-08-08T13:21:46.213
> 
> 标签：backbone.js, internationalization, requirejs, handlebars.js

在 i18n 中使用 Backbone.js、Handlebars 和 Require.js。我有包含所有字符串翻译的 en_us.js 文件，但是如何处理将动态值发送到模板的情况？

我提前知道所有这些字符串，但是将它们硬编码到模板中似乎很乱，我可以传递一个预翻译的字符串吗？我将 hbs 模块用于 i18n 和带有 require.js 的模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T22:15:52.790

我认为这个问题与*i18n*无关，但与您需要仍需要计算的渲染数据的任何情况有关。

您应该在将数据发送到要呈现的模板之前对其进行处理，因此您的模板只需采用 a`key`并显示`value`.

如果您`Model.attributes`还没有准备好使用模板，则不应直接发送它们，而是准备它们，并在它们准备好时将它们发送到模板。

检查[此问题](https://stackoverflow.com/questions/9642439/computed-properties-in-backbone)中的答案，看看是否有任何答案符合您的需求。

# android - 如何添加短信发送和接收呼叫lomgs

> ID：11865510
> 
> 赞同：0
> 
> 时间：2012-08-08T13:22:07.910
> 
> 标签：android, sms, android-contacts

我正在做一个安卓项目。我正在消除所有来电，去电和未接来电。我还想添加发送和接收的短信。我怎样才能做到这一点？是否有一个库可以显示来自 android 手机的所有短信？

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:29:21.930

没有直接的图书馆。您必须使用内容提供程序（使用 URI 打开）并使用它获取消息。然后使用自定义适配器创建您自己的列表并将 SMS 数据添加到其中。

# c - 为什么在尝试从我的内核模块访问共享内存时出现“未处理的错误：不精确的外部中止”？

> ID：11865518
> 
> 赞同：1
> 
> 时间：2012-08-08T13:22:33.217
> 
> 标签：c, linux, linux-kernel, kernel, embedded-linux

我在内核模块中有这个：

```
/*global scope declared*/ 
static int array[10]={1,2,3,4,5,6,7,8,9,10}; 
```

而且我有完美的打开关闭读写功能，我想`array[8]`与此页面底部的用户空间应用程序共享。

**在内核模块中：**

```
static int *my_mmap (struct file *filep, struct vm_area_struct *vma ) {

    if (remap_pfn_range(vma,
                vma->vm_start,
                virt_to_phys(array)>> PAGE_SHIFT,
                10,
                vma->vm_page_prot) < 0) {
        printk("remap_pfn_range failed\n");
        return -EIO;
    }

    return 0; 
```

**用户空间源代码中的应用程序：**

```
#define LEN (64*1024)
/* prototype for thread routine */

#define FILE_PATH "/dev/my_module"

int main() 
{
    int i=0;
    int fd = open(FILE_PATH,O_RDWR);    
    int* vadr = mmap(0, LEN, PROT_READ|PROT_WRITE, MAP_SHARED, fd, 0);

    for (i=0;i<10;++i){

        printf("%d",*(vadr+i));
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:28:04.473

这在很多层面上都是错误的，我什至不知道从哪里开始:-)

1.  virt_to_phys 可能实际上不适用于 vmalloc 分配的内存，这是 Linux 在大多数平台上用于动态模块数据部分的内容。
2.  即使是这样，数据在物理内存中也可能根本不连续。
3.  数组可能未在页面边界上对齐。
4.  您的数据结构是 40 字节，您正在映射 10 页随机内核内存。
5.  如果处理器具有虚拟索引、物理标记 (VIPT) 缓存，当有多个虚拟映射到同一物理地址时，您可能会遇到缓存一致性问题。

可能还有更多问题，但这就是我想到的。

正确的做法不是在内核空间和用户空间之间共享数据，而是使用 copy_to_user 和朋友将其复制过来，除非您真的知道自己在做什么以及为什么。

如果你真的必须共享内存，那么分配一个空闲页面，从内核空间（例如kmap）和用户空间（就像你所做的那样）映射它，并希望你的平台没有VIPT缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:01:06.823

我是内核编程的新手，所以我可能会遗漏一些东西，但在这种情况下你不能使用 copy_to_user 吗？

```
 unsigned long copy_to_user(void __user * to, const void * from, unsigned long n); 
```

简单来说

```
to = address in userspace (destination)
from = address in kernel (source)
n = number of bytes to copy 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T03:51:03.737

您的数组是一个 char 数组，但您的用户空间程序将它作为一个 int 数组访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-16T21:52:16.140

有关如何在内核和用户空间之间正确共享数据的指南，请参阅[实现 mmap 以将数据从用户空间传输到内核空间。](https://coherentmusings.wordpress.com/2014/06/10/implementing-mmap-for-transferring-data-from-user-space-to-kernel-space/)我在我的自定义驱动程序中实现了它，它工作正常。但是，如果您不需要速度，则使用 copy_to_user 更安全、更容易。

# android - 我的 android 应用内购买无法使用错误产品无法购买

> ID：11865520
> 
> 赞同：1
> 
> 时间：2012-08-08T13:22:37.390
> 
> 标签：android, in-app-purchase, in-app-billing

我正在开发具有静态应用内产品 ID 的 android 应用内应用程序：android。测试。购买的效果很好，我还收到了 Toast 消息：谢谢。您的商品很快就会出现。但在实际产品 ID：com.android.example 无法正常工作。我不知道 toast 消息类现在我该怎么办。

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);

    mainview=(ImageView)findViewById(R.id.comcontractsol);

    mBillingObserver = new AbstractBillingObserver(this) {

        @Override
        public void onBillingChecked(boolean supported) 
        {
            Dungeon.this.onBillingChecked(supported);
        }

        @Override
        public void onPurchaseStateChanged(String itemId, PurchaseState state) 
        {

            if(itemId.equals("android.test.purchased"))
            {       
                mainview.setBackgroundResource(R.drawable.unlock);
                Dungeon.this.onPurchaseStateChanged(itemId, state);
                startActivity(new Intent(getApplicationContext(), secondActivity.class));
            }
        }
        @Override
        public void onRequestPurchaseResponse(String itemId, ResponseCode response) 
        {
            Dungeon.this.onRequestPurchaseResponse(itemId, response);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:09:02.560

你应该关心你的`product_id`和`item_id`。如果`product_id`无法匹配，则错误将是准确的。

1.创建.apk文件并将其上传到android市场但**不发布**它只发布您的产品ID。

2.现在用真实ID更改您的静态ID并运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T19:51:13.550

如果您希望**“com.android.example”**作为产品 ID，那么您必须按照以下步骤操作：

1.  创建 .apk 文件并将其上传到 android 市场，但**不要发布它**。

2.  找到 In-App purchase(items) 链接并创建一个产品并**发布它**。产品名称必须与**"com.android.example"**相同。所以我建议你使用一个有意义的产品 ID。

看到这个类似[的问题](https://stackoverflow.com/questions/10702900/testing-of-in-app-billing-application/10818667#10818667)

为了测试您的应用程序，您必须创建测试帐户，[请参阅此链接](http://developer.android.com/guide/google/play/billing/billing_testing.html)

# java - 休眠：将外键设置为引用现有父 PK 的新子表行

> ID：11865523
> 
> 赞同：0
> 
> 时间：2012-08-08T13:22:45.027
> 
> 标签：java, hibernate, orm

我正在使用 Hibernate 持久化父子对象。这里 Parent 带有一个`id`来自发件人系统的主键，并且始终是唯一的。
对于每个具有父 id 的新传入对象不存在，则父对象将使用我的应用程序数据库特定的主键插入到父表中，`ParentPK`并且子行将插入相应`ParentFK`的 .
如果我的应用程序数据库中已经存在父 ID，那么我只需更新父表。但是如果 ParentPK 已经存在，我应该如何为子行插入 ParentFK？表结构：

```
CREATE TABLE Parent(
    ParentPK bigint NOT NULL,
    TypeCode int NULL,
    Id bigint NULL,
    FullName varchar(50) NULL
}

CREATE TABLE Child(
    ChildPK bigint NOT NULL,
    Code int NULL,
    Designation int NULL,
    ParentFK bigint NULL
}

ALTER TABLE Child ADD
  CONSTRAINT FK_Child_Parent FOREIGN KEY(ParentFK)
    REFERENCES Parent (ParentPK) 
```

实体类：

```
@Entity
@Table(name="Parent")
public class ParentType extends HibernateEntity{

    @Id
    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="KeyGenerator")
    @GenericGenerator(name = "KeyGenerator",
        strategy = "services.db.hibernate.KeyGenerator")
    protected Long parentPK;

    protected String id;
    protected int typeCode;
    protected String fullName;

    @OneToMany(mappedBy="parent",targetEntity=ChildType.class,fetch=FetchType.LAZY,cascade = CascadeType.ALL)
    protected List<ChildType> child;
}

@Entity
@Table(name="Child")
public class ChildType extends HibernateEntity{

    @Id
    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="KeyGenerator")
    @GenericGenerator(name = "KeyGenerator",
        strategy = "services.db.hibernate.KeyGenerator")
    protected Long childPK;
    protected int code;
    protected int designation;

    @ManyToOne(cascade={CascadeType.ALL})
    @JoinColumn(name="ParentFK")
    protected ParentType parent;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T18:23:18.563

在 Hibernate（和 JPA）中，您主要不是使用 ID，而是使用对象实例。因此，您需要加载 的实例，`ParentType`然后将其设置为`ChildType`.

在 JPA 中（我更习惯于 JPA）它会是这样的：

```
long parentId = ...; // you get this from the sender system
ParentType parent =
    entityManager.find(ParentType.class, parentId);
// Now you can set the parent to instances of ChildType,
// and Hibernate will store the correct ID into the database. 
```

在休眠中它会像

```
...
ParentType parent =
    (ParentType)session.get(ParentType.class, parentId);
... 
```

# iphone - 如何在 iPhone sdk 中对 NSMutableArray 进行排序

> ID：11865525
> 
> 赞同：2
> 
> 时间：2012-08-08T13:22:58.447
> 
> 标签：iphone, ios, xcode, ios4

> **可能重复：**
> [如何在目标 c 中对 NSMutableArray 进行排序](https://stackoverflow.com/questions/11864309/how-to-sort-nsmutablearray-in-objective-c)

我想对包含值 434,34,4,45 的 NSMutablearray 进行排序

我正在使用此代码进行排序：

```
[arrayfinale sortUsingSelector:@selector(compare:)]; 
```

但它返回：

> 45,4,34,433

但我想要

> 4,34,45,433

谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T13:35:46.743

来自[苹果的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/c/tdef/NSComparator)

```
NSArray *sortedArray = [array sortedArrayUsingComparator: ^(id obj1, id obj2) {

    if ([obj1 integerValue] > [obj2 integerValue]) {
        return (NSComparisonResult)NSOrderedDescending;
    }

    if ([obj1 integerValue] < [obj2 integerValue]) {
        return (NSComparisonResult)NSOrderedAscending;
    }
    return (NSComparisonResult)NSOrderedSame;
}]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T13:39:44.503

使用以下代码

```
 NSArray *unsortedArray = [NSArray arrayWithObjects:@"60", @"4", @"60", @"50", @"12", @"10", @"1", nil];
   NSArray *sortedArray = [unsortedArray sortedArrayUsingComparator:^(id firstObject, id secondObject) {
   return [((NSString *)firstObject) compare:((NSString *)secondObject) options:NSNumericSearch]; }];
   NSLog(@"Array is ::%@",sortedArray); 
```

# bash - 使用 awk 更改文件中的值

> ID：11865528
> 
> 赞同：1
> 
> 时间：2012-08-08T13:23:11.667
> 
> 标签：bash, ksh

我有一个以下格式的属性文件（说文件名是 oldProperties.properties）

```
group1.value1=Hello
group1.value2=World
group1.value3=BlaBla
group1.vlaue4=blabla2 
```

现在我想开发一个脚本来更改属性文件中的特定值并创建一个新文件。该脚本应将属性的 propertyName 和 newValue 作为命令行参数。

```
changePropertyValue.ksh group1.value3 GoodBye 
```

结果文件（比如 newProperties.properties）应该如下所示

```
 group1.value1=Hello
    group1.value2=World
    group1.value3=GoodBye
    group1.vlaue4=blabla2 
```

为此，我在 changePropertyValue.ksh 中编写了这些代码行

```
property_name=$1
new_value=$2

old_properties=oldProperties.properties
new_properties=newProperties.properties

echo "" > $new_properties

cat $old_properties |  awk 'BEGIN{ FS="=";OFS="=" } {if($1=="$property_name") $2="$new_value"; print $0;}' >> $new_properties 
```

我正在启动这个

```
changePropertyValue.ksh group1.value3 GoodBye 
```

现在，当我对 newProperties 文件执行 grep 操作时，我得到了旧值，即

```
grep group1.value3 newProperties.properties
output 
group1.value3=BlaBla 
```

同时，如果我直接在命令行上启动 awk 命令，它工作正常，即如果我启动它

```
cat oldProperties.properties |  awk 'BEGIN{ FS="=";OFS="=" } {if($1=="group1.value3") $2="GoodBye"; print $0;}' | grep group1.value3

output is :-
group1.value3=GoodBye 
```

任何人都可以告诉我在编写脚本时我做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:40:38.960

`awk`program ( )周围的单引号`awk 'BEGIN...'`可防止`$property_name`. `awk`将您的调用更改为：

```
cat $old_properties |  awk "BEGIN{ FS=\"=\";OFS=\"=\" } {if(\$1==\"$property_name\") \$2=\"$new_value\"; print \$0;}" >> $new_properties 
```

注意外面的单引号已经被双引号代替了，所有原来的双引号都被转义了`\`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T14:12:37.230

另一种选择是将 的值`$property_name`作为变量传递给`awk`：

```
awk 'BEGIN{ FS="=";OFS="=" } {if($1==pname) $2=newval; print $0;}' pname="$property_name" newval="$new_value" $old_properties >> $new_properties 
```

# java - 将类成员序列化为 JSON 对象

> ID：11865533
> 
> 赞同：0
> 
> 时间：2012-08-08T13:23:29.800
> 
> 标签：java, android, jackson

我正在研究如何将 POJO 序列化为 json 字符串。我正在使用杰克逊库并遇到了问题。

json 对象中的值可以是字符串或字符串数​​组，如下所示...

```
{"mimeTypes":"all"} 
```

或者

```
 {"mimeTypes":["application/pdf", "application/msword"]} 
```

这是我目前的方法

```
@JsonIgnore
private String mimeTypes;
@JsonIgnore
private String[] mimeTypesArray;
@JsonRawValue
@JsonProperty("integration/enabled-mime-types")
private String mimeType;

public void setMimeTypes(String mimeTypes) {
    this.mimeTypes = mimeTypes;
    mimeType = mimeTypes;
}

public void setMimeTypes(String[] mimeTypes) {
    this.mimeTypesArray = mimeTypes;
    try {
        JSONArray jsonArray = new JSONArray(mimeTypes);
        this.mimeType = jsonArray.toString();
    } catch (JSONException e) {
        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
    }
} 
```

基本上我有一个字符串字段、一个字符串数组字段和一个我想添加到 json 对象的字符串字段。我在 setter 上序列化，因此对象映射器不必选择要使用的字段。

这感觉像是一种 hacky 的做事方式。会有更好的解决方案吗？我一直在阅读有关使用杰克逊视图的信息，但我不确定这是否可能解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:55:18.553

我还没有测试过，但我会尝试添加一个专门的方法来计算应该序列化的内容：

```
class MyMimeTypes {
    @JsonIgnore
    private String[] mimeTypesArray;

    /** A convenience method for setting just one item. */
    public void setMimeType(String mimeType) {
        this.mimeTypesArray = new String[] { mimeType };
    }

    public void setMimeTypes(String[] mimeTypes) {
        this.mimeTypesArray = mimeTypes;
    }

    // The JSON-specific part:

    @JsonProperty("mimeTypes")
    public Object jsonMimeTypes() {
        if (mimeTypesArray.length == 1)
            return mimeTypesArray[0];
        else
            return mimeTypesArray;
    }
} 
```

这样，如果数组中只有一项，则序列化值就是该项。否则整个数组将被序列化。

请注意，使用两个具有相同名称和不同签名的 setter 是一种不好的做法。违反 Java Beans 规范的 AFAIK。

也许您可以在这里使用 vararg 方法来替换两个 setter（但我不知道这如何与 Java Beans 规范一起使用）：

```
public void setMimeTypes(String... mimeTypes) {
    this.mimeTypesArray = mimeTypes;
} 
```

# c++ - 如何创建代码段大小应为 16 mb（字节码）大小的 c++ 程序

> ID：11865536
> 
> 赞同：0
> 
> 时间：2012-08-08T13:23:40.393
> 
> 标签：c++, c

我正在寻找在代码段大小应为 16 MB（C++ 字节码大小为 16 MB）中创建的方法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T13:30:35.770

在函数中复制并粘贴 __asm{} 中的 16MB 的 nop 指令。并且不要使用该功能。每个 nop 必须是 1 字节。然后你就会有东西了。那时您将需要动态代码更改机制。

您将 1 个 nop 复制到 2 个 nop 中。然后将 2 个 nop 复制到 4 个 nop 中。直到你这样做 24 次（24 位等于 1600 万个不同，对吗？）

我忘了告诉你，你需要为此禁用一些优化。或者您可以只使用关闭所有优化的数字火星。

建议您在单独的文件中执行此操作。（可能包括）

如果您希望链接更快，则应使其对齐 16 字节。

main_program.cpp 示例

```
#include<your_16MB_nop>
#include<....
....
int main(){/* whatever here */} 
```

your_16MB_nop 的样本

```
void func_never_used_directly()
{
    __asm
        {
         nop
         nop
         nop
         ... 16million times(just copy and paste each last block for 24 times)
         nop 
         }
 } 
```

# matlab - 使轴不可见或完全删除绘图

> ID：11865541
> 
> 赞同：4
> 
> 时间：2012-08-08T13:24:02.330
> 
> 标签：matlab, axes

我有一个包含 4 个图的 matlab gui。如果在列表中选择了不同的文件，则应更新第一个图。其他 3 个应仅在请求时可见（并计算）。

但是，在绘制一次后，我无法使图 2-4 不可见。

我试过

```
set(handles.axesImage, 'Visible', 'off'); 
```

但这只会删除轴，而不是整个情节。

编辑：除了使事物不可见之外，还可以实际删除内容吗？通常我会打电话`close(hfig);`，但这里我没有数字。

我试过

```
handles2hide = [axisObj;cell2mat(get(axisObj,'Children'))]; 
delete(handles2hide); 
```

但是对于未绘制的轴（启动后）失败了

编辑：我将代码更改为：

```
axisObj = handles.axesContour;
if ishandle(axisObj)
    handles2delete = get(axisObj,'Children');
    delete(handles2delete);
    set(axisObj,'visible','off') 
end
if (isfield(handles,'contour') && isfield(handles.contour,'hColorbar'))
    delete(handles.contour.hColorbar);
    delete(handles.contour.hColorbarLabel);
end 
```

然而，彩条保持未删除并`handles.contour.hColorbar`失败`Invalid handle object.`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T13:33:50.170

您不仅要隐藏轴，还要隐藏它们的所有子项：

```
handles2hide = [handles.axesImage;cell2mat(get(handles.axesImage,'Children'))];
set(handles2hide,'visible','off') 
```

仅当存储多个句柄时才需要 cell2mat`handles.axesImage`

请注意，您需要完整的句柄列表才能使所有内容再次可见。

**编辑**

如果要删除图形上的所有轴（包括颜色条）及其子项，可以执行以下操作（如果必须排除某些轴，可以`setdiff`在句柄列表中使用）：

```
ah = findall(yourFigureHandle,'type','axes')
if ~isempty(ah)
   delete(ah)
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T18:53:08.097

我用这个：

```
 set(allchild(handles.axes1),'visible','off'); 
    set(handles.axes1,'visible','off'); 
```

隐藏我的斧头。我在这里找到了解决方案： [可见轴关闭](http://www.gomatlab.de/gui-axes-visible-t660.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:33:33.533

您已经使用了子图和图的句柄：

```
h(1)=subplot(221);
    p(1)=plot(rand(10,1));
h(2)=subplot(222);
    p(2)=plot(rand(10,1));
h(3)=subplot(223);
    p(3)=plot(rand(10,1));
h(4)=subplot(224);
    p(4)=plot(rand(10,1));

set([h(2) p(2)],'visible','off') 
```

隐藏第二个情节。然而，@Jonas 的答案似乎更完整。这当然更容易，因为您不必像我在这里那样手动收集孩子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T08:24:42.270

我现在用

```
function z_removePlots(handles)

if (isfield(handles,'image') && isfield(handles.image,'hplot'))
    if ishandle(handles.image.hplot)
        delete(handles.image.hplot);
        delete(findall(gcf,'tag','Colorbar'));
        handles.image.hplot = 0;
        set(handles.axesImage, 'Visible', 'off');
    end
end
if (isfield(handles,'contour') && isfield(handles.contour,'hplot'))
    if ishandle(handles.contour.hplot)
        delete(handles.contour.hplot);
        handles.contour.hplot = 0;
        ClearLinesFromAxes(handles.axesContour)
        set(handles.axesContour, 'Visible', 'off');
    end
end
guidata(handles.output,handles); 
```

和

```
function ClearLinesFromAxes(axisObj)
if ishandle(axisObj)
    handles2delete = get(axisObj,'Children');
    delete(handles2delete);
end 
```

# linq - 如何动态映射实体类？

> ID：11865549
> 
> 赞同：0
> 
> 时间：2012-08-08T13:24:13.977
> 
> 标签：linq, entity-framework, linq-to-sql, asp.net-mvc-2

我有用于 Linq-To-Sql 的强类型实体类：

```
[Table(Name = "_Reference2")]
public class Customer
{
    [Column(Name = "_IDRRef")]
    public Binary Reference { get; set; }
    [Column(Name = "_Fld196")]
    public string Account { get; set; }
    // and so on...
} 
```

但事实证明，我们将拥有更多具有相同类型实体 ( `Customer`) 的数据库，但表名和列名不同，表结构也可能略有不同（例如数据类型）。

有没有办法根据数据库名称动态映射对此类的调用？我们可以动态更改表和列的名称吗？在这种情况下，最佳做法是什么？

我们希望将代码更改限制在“数据域”项目中，并保持解决方案的 Web UI 部分不变。

PS：数据库来自第三方软件，我们无法控制（不允许更改结构）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:10:12.597

您可以[在 XML 中使用映射](http://weblogs.asp.net/dwahlin/archive/2008/08/18/using-linq-to-sql-xml-mapping-files-step-by-step.aspx)并即时发出该 XML。这当然有一些限制 - 表的结构和数据类型必须与您的实体大部分匹配。如果他们不这样做，您还需要一个新课程。

# layout - ofbiz 主题布局：重新排序主屏幕组件

> ID：11865550
> 
> 赞同：0
> 
> 时间：2012-08-08T13:24:20.133
> 
> 标签：layout, ofbiz

我正在尝试更改 ofbiz 组件的位置，例如应用程序栏和主容器位置，我知道可能可以从 /common/widget/CommonScreens.xml 或类似的东西（例如另一个 xml 文件）进行更改，我很累没有运气找到负责呈现“应用程序导航”的文件，只是我迷路了。

所以我希望在这里找到我的答案，我想改变布局，默认界面是这样的： ![默认界面布局](../Images/01baf9a83bafaae07b920994c567ff58.png)

我想要的是（我用萤火虫做了这个）： ![需要的布局](../Images/5f346e4c89a0ec4dc124c20afb70ad73.png)

**我怎么能这样做？或者换句话说，我可以从哪里开始这样做？**

**把 CSS 和 HTML 留给我吧**，我只想开始，编辑主题布局，就像我在之前的截图中解释的那样。

抱歉，如果我不能清楚地给你我想要的东西，我的英语今天对我没有帮助:) 但如果还不清楚，你可以在评论中问我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:34:35.097

看看 OFBiz 中的其他主题。bizness_time 主题已经在使用类似的布局。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:47:15.280

我解决了我的问题，我这边出了点小错误，我做了一些修改；

**在 CSS 文件中：**

```
#app-navigation {
...
/* border-top: 0.1em solid #3E5A71; */ /*Removed*/
...
width: 200px; /*Added*/
float: left; /*Added*/
}
...
#app-navigation ul li ul li {
...
/* float: left;
 display: inline; */ /*Removed*/
...
}

/*Added*/
#container:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
} 
```

**在模板中：**

在 appbar.ftl 或 appbarOpen.ftl ：

```
<div id="container"> <!-- This is the Line that I Added -->

<#if userLogin?has_content>
... 
```

在 footer.ftl 中：

```
</div> <!-- This is the Line that I Added -->

<div id="footer">
... 
```

简单地 ：）

# c# - 如果数据库有一个空字段C#，如何在下拉列表中放置一个值

> ID：11865556
> 
> 赞同：0
> 
> 时间：2012-08-08T13:24:44.083
> 
> 标签：c#, asp.net

我有一个构建下拉菜单的中继器。有一个字段将 URL 放在 value 属性中。该字段在数据库中可以为空，因此对于没有 URL 的项目，该值为空。我需要用一些东西替换它，即使它只是'#'，这样验证才能工作。

**加价**

```
<ItemTemplate>
        <option data-siteid="<%# DataBinder.Eval(Container.DataItem, "SiteID") %>" value="<%# DataBinder.Eval(Container.DataItem, "URL") %>">
            <%# DataBinder.Eval(Container.DataItem, "Name") %>
        </option>
</ItemTemplate> 
```

**代码背后：**

```
private void BindMakeList()
    {
        var makeList = this.repository.GetMakes();

        rptDropDown.DataSource = makeList;
        rptDropDown.DataBind();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:27:49.027

怎么样：

```
value="<%# DataBinder.Eval(Container.DataItem, "URL") ?? "#" %>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:33:43.393

尝试在值字段中使用 String.IsNullOrEmpty

```
<%# String.IsNullOrEmpty(DataBinder.Eval(Container.DataItem, "SiteID")) ? "#": DataBinder.Eval(Container.DataItem, "SiteID")  %> 
```

# apache - .htaccess mod_rewrite 无法正常工作

> ID：11865567
> 
> 赞同：1
> 
> 时间：2012-08-08T13:25:14.880
> 
> 标签：apache, .htaccess, codeigniter, mod-rewrite, wamp

我在我的开发机器上使用 Wamp 来开发一个项目。这是我的 .htaccess：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?$1 [L] 
RewriteBase /project/ 
```

这是放在 localhost/project 中的，因此任何请求，例如 localhost/project/something ，都会被路由到 localhost/project/index.php/something

但是，它们被路由到 localhost/index.php/something

我怀疑这与我使用 RewriteBase 的方式有关。我如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T18:06:02.300

You need to remove the leading slash in your rule:

```
# no slash---------v
RewriteRule ^(.*)$ index.php?$1 [L] 
```

Apache kind of guesses whether the targets of a `RewriteRule` is a URL-path or a file-path. When it starts with a slash, it assumes it's a URL-path and that it's absolute, so it'll go to the document root's index.php. Without the slash, it'll either guess a file-path or use the rewrite base to help determine which to use.

You should also move the `RewriteBase` directive above your rule.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:32:01.383

为什么不将基础放在重写器中？

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /project/index.php?$1 [L] 
```

编辑：

这个问题可能会对您有所帮助：[htaccess RewriteBase](https://stackoverflow.com/questions/4844069/htaccess-rewritebase)

# sql - SQL：SybaseDB 并在 SELECT 子句中具有参数化变量

> ID：11865568
> 
> 赞同：0
> 
> 时间：2012-08-08T13:25:14.763
> 
> 标签：sql, database, sybase

我正在尝试创建一个存储过程，该过程从将参数化的数据库名称中进行选择。但是，我在这样做时遇到了很多麻烦。我正在尝试执行如下简单的操作：

```
DECLARE @tableName VARCHAR
SET @tableName = 'MY_TABLE_NAME'

SELECT
  *
FROM
  @tableName 
```

这会产生错误：`Incorrect syntax near '@tableName'.`

有人可以告诉我如何从参数化表名中进行选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:14:35.490

在这种情况下执行动态 SQL。

```
DECLARE @tableName VARCHAR 
SET @tableName = 'MY_TABLE_NAME'
exec('
SELECT
  *
FROM ' + @tableName ) 
```

# image - wordpress 上的条件图像小部件

> ID：11865569
> 
> 赞同：0
> 
> 时间：2012-08-08T13:25:17.500
> 
> 标签：image, wordpress, widget

嗨，我正在写作，因为我有一个图像，当您单击它时，它会重定向到链接，但是当您登录时，它应该重定向到其他链接我尝试使用条件小部件插件和很多东西，所以我需要您的帮助，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:30:47.253

您是在构建主题还是以其他方式编辑 php？然后你可以使用一个`<?php if ( is_user_logged_in() ) { ... } else { ... } ?>`结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:33:11.883

我使用登录条件文本小部件来制作我想要进行条件横幅重定向的内容

# iphone - ASIHTTPRequestErrorDomain Code=4 "请求被取消

> ID：11865570
> 
> 赞同：0
> 
> 时间：2012-08-08T13:25:22.333
> 
> 标签：iphone, ios, ios4, asihttprequest

下面的函数没有从服务器下载内容，它给出 ASIHTTPRequestErrorDomain Code=4 "请求被取消。

此函数是从 viewdidload 调用的。但是相同的 url 工作正常，**它在 -(void)downLoad:(id)sender event:(id)event 函数中下载内容很好，但在 -(void)startDownload 函数中没有.**

请让我知道我的函数中有什么问题/错误（-（void）startDownload）

**下面的功能工作正常**

```
-(void)downLoad:(id)sender event:(id)event{

self.tblViewDownload.userInteractionEnabled = NO;

IsRequestCompleted = NO;

CGPoint touchPosition = [[[event allTouches] anyObject] locationInView:self.tblViewDownload];
NSIndexPath *indexPath = [self.tblViewDownload indexPathForRowAtPoint:touchPosition];
UITableViewCell *Cell = [self.tblViewDownload cellForRowAtIndexPath:indexPath];

progress = [[UIProgressView alloc]initWithProgressViewStyle:UIProgressViewStyleBar];
progress.frame = CGRectMake(65, 55, 210, 25);
progress.progress = 0.0;
[Cell.contentView addSubview:progress];

UIButton* button = (UIButton*)sender;
button.hidden=YES;

if(!self.networkQueue)
    self.networkQueue = [[[ASINetworkQueue alloc] init] autorelease];

[self.networkQueue cancelAllOperations];
[self.networkQueue setQueueDidFinishSelector:@selector(queueCompleted:)];
[self.networkQueue setShowAccurateProgress:YES];
[self.networkQueue setDownloadProgressDelegate:progress];

[self.networkQueue setDelegate:self];

NSDictionary *aDict =[self.myUrlArray objectAtIndex:[indexPath row]];
NSString *aImgUrl = [aDict objectForKey:@"IMG_URL"];
NSString *aVideoUrl = [aDict objectForKey:@"VIDEO_URL"];
NSString *aAudioUrl = [aDict objectForKey:@"AUDIO_URL"];

NSArray *aPoemArrayUrls = [NSArray arrayWithObjects:aImgUrl,aVideoUrl,aAudioUrl,nil];

for(NSString* urlString in aPoemArrayUrls)
{
    NSURL *url = [NSURL URLWithString:urlString];
    ASIHTTPRequest *downloadAFileRequest = [[ASIHTTPRequest requestWithURL:url]retain];
    NSString *Filename = [urlString lastPathComponent];
    NSLog(@"%@ filename",Filename);
    [downloadAFileRequest setUserInfo:[NSDictionary dictionaryWithObject:@"request1" forKey:@"name"]];
    [downloadAFileRequest setDownloadDestinationPath:[[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] stringByAppendingPathComponent:Filename]];
    [downloadAFileRequest setShouldContinueWhenAppEntersBackground:YES];
    [downloadAFileRequest setDelegate:self];
    [downloadAFileRequest setDidFinishSelector:@selector(requestDone:)];
    [downloadAFileRequest setDidFailSelector:@selector(requestWentWrong:)];
    [downloadAFileRequest setShowAccurateProgress:YES];

    [self.networkQueue addOperation:downloadAFileRequest];
    //----
}

[self.networkQueue go];

} 
```

**下面的函数不起作用并给出 ASIHTTPRequestErrorDomain Code=4 "请求被取消**

```
-(void)startDownload{

if([self.myUrlArray count] > 0 ){

int count = [self.myUrlArray count];

int i = count - count;

NSLog(@"%d iiiiii",i);

NSIndexPath *myIP = [NSIndexPath indexPathForRow:i inSection:0];

UITableViewCell *Cell = [self.tblViewDownload cellForRowAtIndexPath:myIP];

progress = [[UIProgressView alloc]initWithProgressViewStyle:UIProgressViewStyleBar];
progress.frame = CGRectMake(65, 55, 210, 25);
progress.progress = 0.0;
progress.backgroundColor = [UIColor redColor];
[Cell.contentView addSubview:progress];

  if(!self.networkQueue)
      self.networkQueue = [[[ASINetworkQueue alloc] init] autorelease];

  [self.networkQueue cancelAllOperations];
  [self.networkQueue setQueueDidFinishSelector:@selector(queueCompleted:)];
  [self.networkQueue setShowAccurateProgress:YES];
  [self.networkQueue setDownloadProgressDelegate:progress];

  [self.networkQueue setDelegate:self];

  NSDictionary *aDict =[self.myUrlArray objectAtIndex:[myIP row]];
  NSString *aImgUrl = [aDict objectForKey:@"IMG_URL"];
  NSString *aVideoUrl = [aDict objectForKey:@"VIDEO_URL"];
  NSString *aAudioUrl = [aDict objectForKey:@"AUDIO_URL"];

  NSArray *aPoemArrayUrls = [NSArray arrayWithObjects:aImgUrl,aVideoUrl,aAudioUrl,nil];

  for(NSString* urlString in aPoemArrayUrls)
  {
      NSURL *url = [NSURL URLWithString:urlString];
      ASIHTTPRequest *downloadAFileRequest = [[ASIHTTPRequest requestWithURL:url]retain];
      NSString *Filename = [urlString lastPathComponent];
      NSLog(@"%@ filename",Filename);
      [downloadAFileRequest setUserInfo:[NSDictionary dictionaryWithObject:@"request1" forKey:@"name"]];
      [downloadAFileRequest setDownloadDestinationPath:[[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] stringByAppendingPathComponent:Filename]];
      [downloadAFileRequest setShouldContinueWhenAppEntersBackground:YES];
      [downloadAFileRequest setDelegate:self];
      [downloadAFileRequest setDidFinishSelector:@selector(requestDone:)];
      [downloadAFileRequest setDidFailSelector:@selector(requestWentWrong:)];
      [downloadAFileRequest setShowAccurateProgress:YES];

      [self.networkQueue addOperation:downloadAFileRequest];
  }

  [self.networkQueue go];

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:56:36.507

我想你忘了设置`IsRequestCompleted = NO;`第二个功能。另外，为什么要发送 cancelAllOperations？这很有可能是问题所在。

此外，无需`self.networkQueue`每次都自动释放和重新初始化它。只需为班级设置一次并在`-dealloc`.

# asp.net - 从文件后面的代码访问变量时如何嵌套 <% %>？

> ID：11865573
> 
> 赞同：1
> 
> 时间：2012-08-08T13:25:58.077
> 
> 标签：asp.net

好吧，我有这个很好用

```
<asp:LinkButton ID="abc" runat="server"
Text='<%#Eval("artist") %>'
PostBackUrl='<%#"~/welcome.aspx?artist="+Eval("artist")%>'> 
```

现在我想用 <%= str %> 代替 test 中的艺术家，这是一个变量 .cs 文件

谁能告诉我该怎么做？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:19:56.227

给你一个例子：

澳交所：

```
<asp:Repeater ID="repItems" runat="server">
    <ItemTemplate>
        <asp:Panel ID="pnlItem" runat="server">                       
            <asp:LinkButton ID="lnkItem" runat="server" Text='<%# Eval(FieldName) %>' ></asp:LinkButton>                  
        </asp:Panel>
    </ItemTemplate>        
</asp:Repeater> 
```

CS：

```
public partial class _Default : System.Web.UI.Page
{
    public string FieldName = @"Name";

    protected void Page_Load(object sender, EventArgs e)
    {
        List<ArtistInfo> artists = new List<ArtistInfo>();

        artists.Add( new ArtistInfo() { Name = "Lady GaGa", Location = "Nebraska" });
        artists.Add( new ArtistInfo() { Name = "Justin Timberlake", Location = "Memphis" });

        repItems.DataSource = artists;
        repItems.DataBind();
    }
}

public class ArtistInfo
{
    public string Name { get; set; }
    public string Location { get; set; }
} 
```

由于`<%# %>`只是意味着在数据绑定期间评估此表达式并返回其结果，因此您可以将任何您想要的东西放在那里。在这种情况下，我们使用 FieldName 的参数调用 Eval，该参数是在代码隐藏中定义的字符串。

# .net - .NET CF 参数化测试

> ID：11865577
> 
> 赞同：0
> 
> 时间：2012-08-08T13:26:18.617
> 
> 标签：.net, compact-framework, nunit, smart-device

是否可以在中创建参数化测试（如在 PHPUnit 中）

Microsoft.VisualStudio.SmartDevice.UnitTestFramework

或者

NUnitLite

我怎样才能更好地实施它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:46:53.760

[我从这里](https://launchpad.net/nunitlite)下载了最新的[nunitlite](http://www.nunitlite.com/)库，并使用反编译器检查了*netcf-2.0*和*netcf-3.5程序集的代码。*

 **据我所知，这些程序集包含几个适合参数化单元测试的属性，例如[[TestCase]](http://nunit.com/index.php?p=testCase&r=2.6.1)、[[TestCaseSource]](http://nunit.com/index.php?p=testCaseSource&r=2.6.1)、[[Range]](http://nunit.com/index.php?p=range&r=2.6.1)和[[Random]](http://nunit.com/index.php?p=random&r=2.6.1)。**

# web-services - 在 windows phone 7 中集成 NUnit 以测试异步 Web 服务

> ID：11865578
> 
> 赞同：1
> 
> 时间：2012-08-08T13:26:21.450
> 
> 标签：web-services, windows-phone-7, asynchronous, nunit, assertion

我正在尝试将 NUnit 集成到我的 windows phone 项目中以测试异步 Web 服务调用。我指的是 NUnitTestRunnerWP7 dll。这就是我所做的。

但是异步回调方法是在 Assert 语句之后调用的，因此它不起作用。回调后如何执行断言？如果我在回调中写入失败的断言，我的应用程序就会崩溃。

```
[Test]
public void TestAsyncFunc(){
        string result;
        ManualResetEvent manualReset = new ManualResetEvent(false);
        MyWebServiceClient client = GetMyWebServiceClient(); //added a service reference for asmx services
        client.LoginCompleted += delegate(object sender, EventArgs args)
        {
            result = args.Result.ToString();
            manualReset.Set();
        };
        client.LoginAsync("username", "password");
        if (!manualReset.WaitOne(5000))
            Assert.Fail();

        Assert.AreEqual("", result);
    } 
```

我不明白我错过了什么。任何帮助，将不胜感激。

提前致谢。

# ruby-on-rails-3 - 向朋友发送 Facebook 申请请求作为通知或在朋友墙上张贴

> ID：11865579
> 
> 赞同：0
> 
> 时间：2012-08-08T13:26:23.257
> 
> 标签：ruby-on-rails-3, facebook-graph-api, fb-graph

我使用 fbgraph、rails 3 和 facebook graph api 开发了一个 facebook 应用程序。我想在游戏（应用程序）中加入一些我的 Facebook 朋友，当我玩完游戏后，我想向所有这些朋友发送通知或想在他们的墙上发帖。重要的是我的那些朋友没有注册到我的应用程序。我知道许多应用程序很容易做到这一点，但遗憾的是我无法做到这一点。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:37:24.347

您是否尝试过[https://stackoverflow.com/a/5994488/624590](https://stackoverflow.com/a/5994488/624590)来获取朋友？基本上是这样的：

```
facebook_user = FbGraph::User.fetch(user.facebook_identifier, :access_token => user.facebook_access_token)
friends = facebook_user.fetch.friends 
```

此外，请确保您具有检索好友列表的正确 API 权限（应该是 read_friendlists 权限）。

获得朋友数据后，使用他们的 ID 获取他们的用户对象并定位`feed!`发布声明，以便在他们的墙上书写。但请注意不要向他们发送垃圾邮件；这不适合您的应用程序。

# python - UnicodeEncodeError：“ascii”编解码器无法对位置 0-6 中的字符进行编码：序数不在范围内（128）

> ID：11865582
> 
> 赞同：5
> 
> 时间：2012-08-08T13:26:45.180
> 
> 标签：python, pyqt, ascii, encode

我已经尝试了所有我能找到的解决方案，但似乎没有任何效果：

```
teext = str(self.tableWidget.item(row, col).text()) 
```

顺便说一句，我用希腊文写...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-08T13:28:02.063

显然，`self.tableWidget.item().text()`返回 Unicode，而您需要改用该`decode`方法：

```
self.tableWidget.item(row, col).text().encode('utf8') 
```

您真的很想查看[Python Unicode HOWTO](http://docs.python.org/howto/unicode.html)以充分了解 unicode 对象和它的字节编码之间的区别。

另一篇优秀的文章是Joel Spolsky（Stack Overflow 背后的人之一[）的 The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses! )。](http://www.joelonsoftware.com/articles/Unicode.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-01T07:26:37.083

尝试将以下代码放在开头
它完美地解决了我的问题

```
import sys
reload(sys)
sys.setdefaultencoding('utf8') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T13:28:11.510

```
teext = self.tableWidget.item(row, col).text().decode('utf-8') 
```

将“utf-8”替换为您的文本编码

# facebook - 用户是否需要授权我的 Facebook 应用通过我网站上的提要对话框发布？

> ID：11865583
> 
> 赞同：2
> 
> 时间：2012-08-08T13:26:45.430
> 
> 标签：facebook, facebook-apps

我想在网站上使用 Facebook[提要对话框](http://developers.facebook.com/docs/reference/dialogs/feed/)。看来我需要创建一个应用程序才能使用它。它是否正确？

在通过提要对话框发布之前，是否需要网站访问者授权我的 Facebook 应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T13:32:30.760

是的，这是正确的，您需要创建一个 Facebook 应用程序来获取您的应用程序 ID 和应用程序密码。用户无需授权您的应用程序使用提要对话框。

正如 Micah 所说，[Feed Dialog](https://developers.facebook.com/docs/reference/dialogs/feed/)上的文档规定：

> 这不需要任何扩展权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:28:20.733

从那个链接：

> 这不需要任何扩展权限。

所以不，用户不需要授权应用程序。

# html - Internet Explorer 不同的字体大小

> ID：11865587
> 
> 赞同：-1
> 
> 时间：2012-08-08T13:27:13.870
> 
> 标签：html, css, internet-explorer, font-size

我正在开发一个将在 IE7+ 中运行并支持英语和日语的网页，但字体大小有点问题。

在我的开发机器上，我使用的是 IE 9，并且我还有另外 2 台使用 IE8 的测试机器。网页的 X-UA-Compatible 设置为 IE=7。

我必须允许在具有固定宽度和高度的 span 元素中，只有 12 个汉字字符。而且我想将跨度的溢出设置为隐藏，并通过反复试验设置字体大小，以便 12 个汉字字符适合 2 行的跨度。

我将语言更改为日本 [ja-JP] 形式的互联网选项，在我的开发机器上，它看起来如何，我的一台测试机也是如此，但对于另一台测试机，字体大小有点大。TextSize 和 Encoding 在所有浏览器中都是相同的。

我试过用 px、em 和 pt 设置字体大小，但字体视觉大小的差异仍然存在。

关于这可能是什么原因的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T13:37:15.967

你不能这样做，因为你不知道最终用户电脑上会安装什么字体。当然，您可以做出一个很好的猜测（如果您专门针对 IE7，那么很可能无论如何都有可用的字体）。

但即便如此，它也可能取决于用户的 dpi 设置。此外，体面的浏览器允许您在不缩放屏幕的情况下调整字体大小。因此，您必须找到适用于 95% 情况的尺寸，并留出一些余量。

如果您真的需要像素完美，则需要图像而不是文本（尽管我仍然建议不要这样做）。只需接受这样一个事实，即您不能 100% 说出页面在客户端上的外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T03:50:26.390

如果它是基于浏览器的问题，那么可以通过检测它是哪个浏览器/版本来修复它，然后根据它是哪个浏览器添加一个 CSS 脚本（使用 Javascript 来执行此操作），每个 CSS 脚本包含不同的值字体大小等。

（顺便说一句，除此之外我无法帮助你，你需要在其他地方做进一步的研究）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T13:51:33.807

您应该使用图像而不是文本。您可以使用服务器的字体[即时生成它。](https://stackoverflow.com/questions/2070365/how-to-generate-an-image-from-text-on-fly-at-runtime)

# ios - 使用 Sencha 隐藏 iOs 状态栏

> ID：11865588
> 
> 赞同：0
> 
> 时间：2012-08-08T13:27:16.183
> 
> 标签：ios, sencha-touch

我正在使用 Sencha Touch 2 编写一个 iPad 应用程序，我需要我的应用程序是全屏的。我添加了

```
viewport:{
    autoMaximize:true,
} 
```

到我的 app.js，但我仍然有状态栏。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:32:42.867

四天前有人在[Sencha Touch 论坛](http://www.sencha.com/forum/showthread.php?234975-Hiding-iPad-Status-Bar-in-Native-apps)上问过这个问题：

提问者：

> 您好，我想知道是否有人知道如何在 Sencha Touch 2 原生打包应用程序上隐藏黑色 iPad 状态栏。我之前在创建 xcode UIWebView 时已经完成了它，但如果这可以通过 Sencha Touch 原生打包程序实现，那就太棒了。
> 
> 谢谢！

回应（来自高级论坛经理）：

> 我认为目前这是不可能的。

所以，我不得不说，对不起，但我认为这是不可能的。也许论坛上的某个人对此有“黑客”或技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:48:56.140

只需在您的 plist 中将其更改为“statusBar Initally hidden”。

# jquery - 里面的标签即使按钮被禁用也可点击 - 仅限 Webkit

> ID：11865589
> 
> 赞同：2
> 
> 时间：2012-08-08T13:27:24.167
> 
> 标签：jquery, button, webkit, tags

这是一个小提琴来证明我的观点。当我使用 时`$(document).on("click"....)`，我仍然可以单击禁用按钮内的标签。此行为不会发生在`$("button").click(`..

[小提琴](http://jsfiddle.net/QGMTV/)

有人可以解释这种差异吗？它是一个错误，还是 jQuery 的一个特性？

编辑：我想出的解决方法：

```
$(document).on("click", "button > *", function() {
    if ( $(this).parent().is(":disabled") )
    {    
        return false;
    }
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:37:05.673

我认为这种行为是由您将事件应用到的元素造成的。在第一个示例中，您将事件绑定到文档。在第二个示例中，您将事件绑定到按钮。这纯粹是推测，因为我没有查看 jQuery 源代码来实际查看使用 时执行了什么`$().on()`，但我认为选择器在事件触发后被解析。

例如，`document`获取点击事件，解析选择器以测试它应该应用于哪个，然后执行该函数。在第二种情况下，选择器在点击事件被绑定之前首先被解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:32:25.837

这一定是 JQuery 1.7.1 的一个错误。如果您移至 1.7.2 或 1.8，它就会消失。

# sql - SQL 集成服务：加载 CSV 的 XMLA 或 SSIS

> ID：11865592
> 
> 赞同：0
> 
> 时间：2012-08-08T13:27:33.757
> 
> 标签：sql, ssis, ddl, xmla

使用 XMLA 或 SSIS 将 CSV 数据加载/导入数据库是否更好？我的系统管理员建议使用 XMLA + DDL 而不是传统的 SSIS 来加载数据。

对我来说，听起来 SSIS 是首选方式。

任何建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:21:11.557

XMLA 与加载 CSV 文件无关。如果您只需要将 CSV 数据加载到关系数据库中，请使用 SSIS。如果需要使用多维数据或更改 Analysis Services 数据库的架构，请使用 XMLA。

# jquery - 基于会话变量的 MVC3 模态对话框

> ID：11865593
> 
> 赞同：0
> 
> 时间：2012-08-08T13:27:35.227
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui

我正在开发一个 MVC 应用程序，其中数据是特定年份的。因此，我需要确保在查询任何数据之前设置工作年份。[我之前问过这个问题并在这里](https://stackoverflow.com/questions/11364432/mvc3-global-variable)收到了回复。这可以很好地将用户重定向到另一个页面。但是，这是有问题的，因为会话即将到期（我不希望它成为无到期会话）。因此，如果会话过期且用户处于操作中间，我不希望页面被重置，因为重定向到另一个页面以选择年份。

经过长时间的介绍（抱歉，我想明确我需要什么），我问，如果会话为空，是否可以创建模式对话框？

例如：

```
if (Session["Year"] != null)
{
    ...
}
else
{
    modal dialog to set year and go on our merry way...
} 
```

我查看了 jquery UI 的示例，但它似乎并没有解决我的特定难题。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:31:33.260

是的，这是用于对话框的 jQuery UI 组件。不过，您必须将它放在您的视图中，因此您必须将您拥有的任何会话值传递给视图，以便您可以在那里进行逻辑测试。

[http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

更新：

您可以创建一个包含对话框的视图。接下来，您将覆盖在每个请求上执行的 OnActionExecuted Controller 操作。在此操作中，您将进行会话检查。

然后您将使用 ViewBag 将值传递给您的主/布局视图。在该视图中，只需对 ViewBag 值进行逻辑检查，并适当地显示对话框。

```
if (Session["Year"] != null)
{
    ...
}
else
{
@Html.Raw(@"
<script type='text/javascript'>
   $(document).ready(function(){ 
      $('#dialogID').dialog('open'); //I am not sure if this is proper way to open it
   });
</script>")
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:47:37.877

您可以在 javascript 中通过混合服务器端分配给 javascript 变量来执行此操作。例如。

```
<script>
    $(function(){ 
        var showDiag = @(ViewData["Year"] ?? false);
        if(showDiag){
            //code to show
        }
    });
</script> 
```

# grails - 使用 grails 后处理 *.js 文件

> ID：11865594
> 
> 赞同：2
> 
> 时间：2012-08-08T13:27:40.993
> 
> 标签：grails, gsp

我想知道是否有可能对 *.js 文件进行后处理，以便可以评估每个 gsp 表达式。

例如，我可以直接在 gsp 页面中编写以下代码：

```
<script type="text/javascript">
$.post("${createLink(controller:'mycontroller',action:'myaction')} " , {"id":id},function(){});
</script> 
```

并且表达式 ${createLink} 由 grails 评估。

但我也想在 grails 不处理的 *.js 文件中使用 ${createLink()} 。也许可以使用资源插件对每个 *.js 文件进行后处理并评估 gsp 表达式？

当然，我可以将我所有的 js 代码包装在一个单独的 gsp 页面中，但这似乎不是一个优雅的解决方案。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:46:34.383

这两种方法都应该适合你

*   [http://grails.org/plugin/gsp-arse](http://grails.org/plugin/gsp-arse)（独立）
*   [http://grails.org/plugin/gsp-resources](http://grails.org/plugin/gsp-resources)（它与资源插件一起使用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:58:28.347

另一种选择是执行类似的操作，将 url 存储在变量中

```
<script type="text/javascript">
  var url = "${createLink(controller:'mycontroller',action:'myaction')}";
</script> 
```

然后你可以使用你想要的所有 ajax 调用，并且仍然只设置一次 url。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:59:28.850

在 GSP 文件中使用 JS 哈希来保存重要的内容

```
<r:script>
 var linkobject={
   mylink:'${createLink(controller:"mycontroller",action:"myaction")}',
     linkA : '${params.id}',
    linkB: '${g.createLink(action: "getThreats")}',
    linkC: '${g.createLink(action: "addThreat")}',
    linkD: '${g.resource(dir: 'images/icons', file: 'folder.png')}'

}

</r:script> 
```

然后，在你的 JavaScript 文件中使用 JS 哈希来获得你需要的东西：

```
$.post(linkobject.mylink , {"id":linkobject.linkA},function(){}); 
```

# postgresql - pg_dump：命令行参数太多

> ID：11865596
> 
> 赞同：36
> 
> 时间：2012-08-08T13:27:45.860
> 
> 标签：postgresql, dump, database-backups, pg-dump

这个命令有什么问题：

```
pg_dump -U postgres -W admin --disable-triggers -a -t employees -f D:\ddd.txt postgres 
```

这给出了太多命令行参数的错误

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-08T13:41:38.320

看起来像它的 -W 选项。该选项没有任何价值。

```
-W, --password           force password prompt (should happen automatically) 
```

如果要在不输入密码的情况下运行命令，请使用 .pgpass 文件。 [http://www.postgresql.org/docs/9.1/static/libpq-pgpass.html](http://www.postgresql.org/docs/9.1/static/libpq-pgpass.html)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-01-09T17:08:38.390

对于后代，请注意 pg_dump 和 pg_restore（以及许多其他命令）无法处理文字处理器创建的长连字符。如果您从文字处理器剪切粘贴命令行，请确保它没有在编辑中将您的连字符转换为其他内容。否则，您将获得看起来正确但令人绝望地混淆这些工具中的参数解析器的命令行。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-04-12T07:22:22.670

pg_dump 和 pg_restore 需要在命令行询问密码，如果你输入命令，他们总是给出“命令行参数太多”的错误。您可以使用以下命令在命令行或批处理文件中设置相关环境变量：

```
"SET PGPASSWORD=<password>" 
```

这样您就不会被要求在批处理文件中手动输入密码。他们使用给定的环境变量。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-12-19T09:51:40.410

`-W`而不是通过为 postgres 设置临时变量来传递带有标志的密码：

```
PGPASSWORD="mypass" pg_dump -U postgres--disable-triggers -a -t employees -f D:\ddd.txt postgres 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-04-11T04:22:27.483

`-W` -> 将提示输入密码以获取完整的数据库转储，使用类似的东西

```
pg_dump -h 192.168.44.200 -p 5432 -U postgres -W -c -C -Fc -f C:\MMM\backup10_3.backup DATABASE_NAME 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-05-23T00:49:16.817

我从复制粘贴中得到了这个，其中 1 个破折号不同。

是：（`–-host=`第一个破折号是“长”破折号）更正以`--host=`解决它

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-12T11:10:48.777

另一种选择是添加`~/.pgpass`内容如下的文件：

```
hostname:port:database:username:password 
```

[在这里](https://www.postgresql.org/docs/current/libpq-pgpass.html)阅读更多

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-30T22:26:29.323

2021 年 11 月 30 日，pg v12，Windows 10

```
pg_dump -U postgres -W -F t postgres > C:\myfolder\pg.tar 
```

`-U "postgres"`作为用户名，

`-W`提示输入 psd，

`-F t`表示格式为 .tar，

`> C:\myfolder\pg.tar`是目标路径和文件名

# php - 在 Mac OS X 中使用 PHP 模块安装 ImageMagick Brew

> ID：11865600
> 
> 赞同：35
> 
> 时间：2012-08-08T13:28:01.873
> 
> 标签：php, macos, imagemagick, imagick

我已经使用`brew install imagemagick`. 这一切都很好，我可以从终端/命令行运行任何 ImageMagick 命令。

现在，当我尝试在 PHP 中使用 ImageMagick 类时，出现错误`Class 'Imagick' not found in ...`。我猜这是因为 ImageMagick 模块没有加载。

谁能帮我让这个东西在 PHP 中工作？谢谢！

***附加信息：***
*Mac OS X 版本：* 10.8：Mountain Lion
*PHP 版本*：5.3.13

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-17T16:00:54.440

经过大量的实验后，我才做到了这一点。目前，这似乎是 php 5.3 的方法：

```
brew tap josegonzalez/php
brew tap homebrew/dupes
brew install php53-imagick 
```

不知道何塞·冈萨雷斯是谁，但显然我们欠他的债......

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2018-05-16T07:40:59.873

`php72-imagick`现在已弃用，因为 imagick 是 php 二进制文件本身的一部分。用于`pecl`安装 imagick 例如：

```
brew install php
brew install imagemagick
brew install pkg-config
pecl install imagick 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-08-08T14:19:35.630

你的 ImageMagick 安装是不够的。您还需要 Imagick 包（`php72-imagick`对于 home brew 可能称为或类似）。

Imagick 本身不做这项工作，它是一个原生 PHP 扩展，用于*使用 ImageMagick API*创建和修改图像。

尝试通过搜索包的确切名称`brew search imagick`。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-11-30T11:08:29.557

我正在使用优胜美地。对我来说，解决方案是这里已经列出的答案和评论的组合。

```
brew install imagemagick
brew install php55-imagick 
```

编辑 /etc/php.ini 以包含 imagick

```
extension=/usr/local/Cellar/php55-imagick/{version of php55-imagick}/imagick.so 
```

例子：

```
extension = /usr/local/Cellar/php55-imagick/3.1.2_1/imagick.so 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2016-06-12T14:11:57.543

我遇到过同样的问题。如果您使用的是 php 5.6，这些是对我有用的步骤

1.  `brew install php56-imagick`
2.  `brew install imagemagick`
3.  `find /usr/local/Cellar -name "imagick.so"`
    将此命令输出的路径复制到您的 php.ini 文件中，
    例如`extension=/usr/local/Cellar/php56-imagick/3.3.0_2/imagick.so` 保存您的文件。现在仔细检查 imagemagick 类是否存在类型
4.  `php -r "print(class_exists('imagick'));"`

Brew 符号链接对我不起作用，因此我必须将完整路径名放入 php.ini 文件中才能使其正常工作。希望这可以帮助

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2018-05-22T09:53:53.087

这个对我有用：

```
brew install imagemagick       # If it's not already installed
mkdir /usr/local/lib/php/pecl  # On my system this dir didn't exist and this caused pecl install to fail
pecl install imagick 
```

[这里](https://github.com/Homebrew/homebrew-core/issues/26474#issuecomment-380396481)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-02-03T17:09:31.193

尝试：

```
brew install homebrew/php/php53-imagick 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-04-12T16:52:58.810

我一直在寻找在 Mojavie 上安装 imagick 的正确方法，并找到了完全有效的解决方案。

1.  酿造安装 imagemagick@6
2.  酿造安装 php@7.1
3.  安装标头（Xcode-select --install）
4.  从以下网址下载imagick源代码：[https ://pecl.php.net/package/imagick](https://pecl.php.net/package/imagick)
5.  打开终端并输入解压缩的文件夹 imagick-3.4.3/imagick-3.4.3 （在我的情况下）
6.  运行命令 phpize
7.  。/配置
8.  制作

现在，如果出现类似 MagicWand not found 的错误，请编辑文件 Makefile 并查找 CPPFLAGS = -I/usr/local/opt/imagemagick@6/include/。检查包含文件夹中是否没有其他文件夹。就我而言，它应该是这样的： CPPFLAGS = -I/usr/local/opt/imagemagick@6/include/ImageMagick-6

保存并返回终端并输入 make （完成后） sudo make install

imagick.so 位于 imagick-3.4.3/imagick-3.4.3/modules

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-06-08T14:25:24.967

好的，经过 1 小时后，我已经弄清楚了。mac 没有授予 pecl 脚本创建 PHP 目录的权限。要解决，请执行以下操作。

```
brew install imagemagick
Sudo pecl install imagick .  
php --ini | grep "Loaded Configuration File"
Add extension=imagick.so under extensions. 
```

安装将完成。然后，测试运行：

```
php -r "print(class_exists('imagick'));" 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-08T13:41:14.050

来自：[php错误：找不到类'Imagick'](https://stackoverflow.com/questions/3790191/php-error-class-imagick-not-found)

您是否添加`extension=imagick.so`到您的`php.ini`（或`/etc/php.d/imagick.ini`）文件中？

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-03-19T18:24:26.160

我已经安装了`imagemagick`和`php71-imagick`.

`brew upgrade imagemagick`- 为我做了诀窍。

您可能需要`sudo`：

`sudo brew upgrade imagemagick`

您可能需要重新启动`apache`// `php-fpm`。`<other webserver>`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-05-08T08:41:48.197

由于声誉，我无法添加评论，但要添加到此答案：

4 月 12 日 16:52 回答

格热戈日·米希凯维奇

I was getting a missing php.h file, so as per [Installing xdebug on MacOs Mojave - 'php.h' file not found](https://stackoverflow.com/questions/52623108/installing-xdebug-on-macos-mojave-php-h-file-not-found) I installed the necessary file via the below command:

sudo installer -pkg /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg -target /

# java - Hibernate+JPA+Spring 内存泄漏

> ID：11865602
> 
> 赞同：0
> 
> 时间：2012-08-08T13:28:10.997
> 
> 标签：java, spring, hibernate, memory

我正在使用 Hibernate、JPA、Spring 和 Struts2 开发一个 Web 应用程序。当我在我的 Web 服务器（VPS Tomcat）中运行该应用程序几个小时时，由于内存使用情况，操作系统会向 tomcat 发送一个 SIGKILL。我的服务器有 288Mb，当它达到 200Mb aprox 时，tomcat 会被杀死。有人告诉我，我需要更多内存，但我的应用程序很小并且没有太多流量，它还没有投入生产。我正在使用 postgresql，我的数据库大约 150Mb，它有很多图像。我曾尝试在 netbeans 中使用内存分析器，但 IDE 变慢了，我什么也找不到。

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:32:48.043

您是否在 finally 块中正确关闭了您的连接？

没有代码，只有这些信息很难回复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:37:25.333

我使用过 JProfiler 和 yourkit，但我对实际性能调整和内存使用的输出不满意，目前我们已切换到[java melody](https://code.google.com/p/javamelody/)。这不仅有助于开发和生产系统中的性能优化。Java melody 非常易于集成和配置，在生产中您只需更新 web.xml 即可启用或禁用

# android - 重新启动后应用程序抛出错误

> ID：11865605
> 
> 赞同：0
> 
> 时间：2012-08-08T13:28:13.710
> 
> 标签：android

当我尝试从“最近的应用程序”启动它时，我的应用程序会引发错误。问题 ：

1.  仅当应用程序长时间（大约一小时）处于非活动状态（停止）时才会出现错误。我自己无法捕捉到这个错误 - 当我自己杀死进程然后重新启动它时，没有错误！

2.  我在调试器中看不到异常日志，因为它在很长一段时间后断开连接。

如何在调试器中捕获此类错误？仅当操作系统自行终止应用程序时才会出现看起来错误。

**编辑**

我没有覆盖`onResume`方法。只是`onStart`，除了我的 SQLiteOpenHelper 的实例化之外，没有什么特别的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:42:47.410

即使您的应用程序处于暂停/停止状态，只要设备连接，log cat 仍然可以工作。确保您在 windows > devices > all logs 而不是 windows > devices > com.your.project 中选择了所有日志选项。所以当你尝试重新启动时崩溃必须记录在 logCat

如果仍然有任何问题，请从市场上安装 logcat 应用程序并参考它的日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:32:05.720

听起来你的可能有问题

```
OnResume 
```

称呼。你的应用程序在做什么？是否使用位置管理器？它是否有需要重新启动的服务或线程？请提供更多信息。

翻翻Android应用生命周期图：http: [//developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

它应该可以帮助您了解正在发生的事情。如果所有其他方法都失败了，请向 logcat 添加大量日志记录，然后查看输出结果。只要不拔掉设备，就不会在 Eclipse 中丢失它。如果你这样做了，你总是可以从命令行或 shell 运行“adb logcat”来查看到底发生了什么。

# android - Android BatteryManager 类建议

> ID：11865607
> 
> 赞同：0
> 
> 时间：2012-08-08T13:28:21.103
> 
> 标签：android, battery

我正在尝试构建一个我以前从未尝试过的应用程序，并寻求您的帮助来决定如何去做。

我打算制作一个应用程序，在其中向用户显示自定义电池电量。我在市场上看到很多应用程序都做同样的事情，但我不知道如何实现它。

例如，我打算使用我自己的自定义图像创建如下内容：https: [//play.google.com/store/apps/details?id=com.macropinch.pearl](https://play.google.com/store/apps/details?id=com.macropinch.pearl)

[https://play.google.com/store/apps/details?id=com.geekyouup.android.widgets.battery](https://play.google.com/store/apps/details?id=com.geekyouup.android.widgets.battery)

我已经研究并知道 android.os 中的 BatteryManager 类将是使用它的类。

但我主要的两个麻烦是：

1.  我想展示一张会根据当前电池电量不断变化的图像。
2.  如何在手机主屏幕上将应用 PIN 作为小部件固定在主屏幕上，指示当前电池电量。

我想到的方法：

1.  首先，我想我可以每隔 5 秒定期调用一次电池电流水平方法，然后根据电池电量我相应地更改图像。虽然我认为这不是最好的方法。请指导这种方法是否正确。如果不是，那么请建议什么可能是更有效和高效的方法。

另外我应该如何更改图像。精灵图像是最好的方法还是有其他方法可以轻松有效地做到这一点？

其次，我从来没有尝试过，所以你必须指导我如何准确地做到这一点。

如果您可以分享一些可以帮助我实现目标的代码，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:41:31.090

尝试阅读[android 开发者网站](http://developer.android.com/training/monitoring-device-state/battery-monitoring.html)上的教程。

# internet-explorer - 用于 Internet 访问的 Windows 身份验证弹出窗口

> ID：11865608
> 
> 赞同：1
> 
> 时间：2012-08-08T13:28:25.713
> 
> 标签：internet-explorer, google-chrome

我的许多用户都在一个严格控制的网络上，他们在访问 Internet 时需要填写额外的登录提示。在 IE (7/8) 中，此对话框具有保存凭据的选项，在 Chrome/FF 中，他们无法保存凭据，并且每次都必须重新输入。

我想了解为什么 IE 允许保存该信息而其他浏览器不允许（我的猜测与 ActiveX 有关）。

无论如何也可以在 chrome 中提供类似的功能，我们正试图将我们的用户推向我们为他们开发的应用程序的 chrome，但这个密码输入往往是许多人的症结所在。（我知道他们必须记住密码！喘气）

任何见解都会非常感谢

# sql - 如何在 MS SQL 中添加列约束

> ID：11865611
> 
> 赞同：0
> 
> 时间：2012-08-08T13:28:41.543
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2008-r2

我在 MS Sql 2008 r2 中有一个表，我想在列中添加一个约束，我只能接受 3 个值，例如

```
myColum      char(2)    constrain values (A1, B2, C3) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:30:39.007

像这样的东西：

```
myColum  char(2)  check (myColum in ('A1', 'B2', 'C3')) 
```

SQLFiddle：[http ://sqlfiddle.com/#!3/8e304](http://sqlfiddle.com/#!3/8e304)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T13:31:54.613

利用`SQL CHECK Constraint`sql server 支持的。

```
CREATE TABLE test
(
    myColum       char(2) NOT NULL
    CONSTRAINT chk_Person CHECK (myColum in ('A1', 'B2', 'C3')) 
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T13:30:29.903

```
ALTER TABLE <table>
ADD CHECK col in ('A1', 'B2', 'C3') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T13:31:54.580

尝试：

```
ALTER TABLE YourTable WITH CHECK ADD  CONSTRAINT ck_y CHECK (myColum in ('A1','B2','C3'))
GO 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T17:33:22.010

```
CREATE TABLE
(
 myColumn char(2) NOT NULL check(myColumn= 'A1' or myColumn= 'B2'  myColumn= 'C3') 
) 
```

# sql - 历史表状态下的 SQL 查询

> ID：11865612
> 
> 赞同：2
> 
> 时间：2012-08-08T13:28:52.307
> 
> 标签：sql, logic, operator-keyword

我有一个关于 sql 查询的简单逻辑问题。

一些文章有一个历史记录表，并且文章有一个带有 status_id 的行。一篇文章可以有各种状态，我只想得到这些文章，它们从来没有给定的状态。例如：

```
articlename | status_id
article1    |  2
article1    |  1
article1    |  3
article2    |  2
article2    |  3
article3    |  2
article3    |  3

SELECT * FROM article WHERE article.status_id != 2 GROUP BY article.id 
```

这只是我得到“article1”的错误代码，因为它有 2 行适合此语句。我认为解决方案很简单，但我现在无法得到-.-

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:34:58.463

您需要使用`NOT IN`删除所有状态为“2”的文章。

```
/* NOT IN BASED APPROACH */
SELECT * 
FROM article 
WHERE article.id NOT IN (
    SELECT article.id 
    FROM article
    WHERE article.status_id = 2)

/* NOT EXISTS BASED APPROACH */
SELECT * 
FROM article 
WHERE article.id NOT EXISTS (
    SELECT *
    FROM article
    WHERE article.status_id = 2)

/* JOIN BASED APPROACH */
SELECT *
FROM   article a1 LEFT JOIN
       article a2 
       ON a1.id = a2.id 
       AND a2.status_id = 2
WHERE  a2.id IS NULL 
```

# iphone - 如何将文件从文档目录复制到应用程序包？

> ID：11865613
> 
> 赞同：1
> 
> 时间：2012-08-08T13:28:51.807
> 
> 标签：iphone, objective-c, ios, xcode, nsdocumentdirectory

嗨，在我的应用程序启动中，我将调用 Web 服务调用，我将下载一些 zip 文件现在我需要将这些文件永久保存在我的应用程序包中，这样当我第二次启动我的应用程序时，我将只查找更新，如果没有更新我将只使用我以前保存的文件，所以我想利用文档目录并获取 zip 文件然后解压缩并将其保存在应用程序包中，这里我的问题是**如何将文件从 DocumentsDirectory 保存到我的应用程序包？** 我的方法是正确有效的方法还是我需要遵循其他一些方法来实现这一目标？提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T13:31:52.723

您不能写入应用程序的包 - 它是只读的，只有文档目录是可读写的。

您不需要移动文件，因为文档目录提供永久存储。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T13:41:34.107

在运行时修改的资源应该是 Documents 目录的一部分。iPhone 应用程序创建一个已签名的沙盒环境。如果您尝试修改任何捆绑资源或尝试添加/删除资源，它将不允许。它适用于模拟器，但不适用于设备。

因此，您应该将响应存储到文档目录而不是捆绑包。

# asp.net-mvc-3 - 在 mvc razor 视图中过滤下拉列表

> ID：11865619
> 
> 赞同：0
> 
> 时间：2012-08-08T13:29:06.517
> 
> 标签：asp.net-mvc-3, c#-4.0, razor

我有两张桌子

1.国家

*   ID
*   国家的名字

和其他表是

2.状态

*   州身份证
*   州名
*   国家 ID

我正在使用此代码在国家/地区的下拉列表中填充数据`citycontroller.cs`

```
ViewBag.countries = new SelectList(db.Couns.OrderBy(c => c.CountryName).ToList(), "ID", "CountryName"); 
```

在`create.cshtml`

```
 @Html.DropDownList("Select Country", ViewBag.countries as SelectList) 
```

我想要根据国家下拉列表的选择填充状态下拉列表的功能应该做什么？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:50:59.110

您可以使用 jQuery ajax 在选择国家/地区时加载州。

```
<script type="text/javascript">
 $(function(){
    $("#Country").change(function(){
      var states=""; 
      var countryId=$(this).val();
      $.getJSON("@Url.Action("GetStates","Home")/"+countryId,function(data){
           $.each(data,function(index,item){
              states+="<option value='"+item.ID+"'>"+item.StateName+"</option>";
           });
             $("#States").html(states);
      });

    });    
 });    

</script> 
```

假设`Country`是您的 Country DropDown`States`的 ID，并且是您的 States Dropdow 的 ID，并且您有一个操作方法，它接受国家 ID 作为参数并以 JSON 格式获取状态

```
public ActionResult GetStates(int id)
{
  var stateList=repo.GetStatesForCountry(id);
  return Json(stateList,JsonRequestBehaviour.AllowGet);
} 
```

假设`repo.GetStatesForCountry`根据传递的国家 ID 返回一个国家列表。`State`您可以用返回类对象列表的方法调用替换该函数调用。

***建议：***我会尽量避免使用动态 ViewBag /ViewData 方法来填充 Dropdwon 并切换到更强类型的方法。[这](https://stackoverflow.com/questions/10500642/how-to-fetch-selected-value-from-a-dropdownlist-in-mvc3/10500817#10500817)是一个如何做到这一点的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:44:35.553

如果您已经将状态列表下载到客户端计算机，那么 knockout.js 将是可行的方法。如果您只想下载与所选国家/地区相关的州，则应在选择国家/地区时对服务器进行 AJAX 调用，并让成功功能填充州列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:46:49.957

您将需要为此使用`Ajax`调用。您可能想看看我为与您的问题类似的问题提供的答案[。](https://stackoverflow.com/a/11553723/887149)

# java - Android：带有异步任务的 JSON 解析器（GET 和 POST 方法）

> ID：11865625
> 
> 赞同：4
> 
> 时间：2012-08-08T13:29:50.573
> 
> 标签：java, android

只想检查这个带有异步任务的 JSON Parser 是否正确完成？当我将此代码放入我的 Eclipse 时，此 (method.equals("POST") 带有红色下划线。它指出“方法”无法解决。对此有任何建议或帮助吗？谢谢。

```
public class JSONParser {

  static InputStream is = null;
  static JSONObject jObj = null;
  static String json = "";
  String url=null;
     List<NameValuePair> nvp=null;
     // constructor
     public JSONParser() {

   }

  // function get json from url
  // by making HTTP POST or GET method
   public JSONObject makeHttpRequest(String url, String method,
        List<NameValuePair> params) {
      BackGroundTask Task= new BackGroundTask(url, method,  params);
    try {
        return Task.execute().get();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return null;
    } catch (ExecutionException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return null;
    }
}
public class BackGroundTask extends AsyncTask<String, String, JSONObject>{
    List<NameValuePair> postparams= new ArrayList<NameValuePair>();
    String URL=null;
public BackGroundTask(String url, String method, List<NameValuePair> params) {
        URL=url;
        postparams=params;
    }
    @Override
    protected JSONObject doInBackground(String... params) {
        // TODO Auto-generated method stub
        // Making HTTP request
        try {
    // Making HTTP request 
        // check for request method

    if(method.equals("POST")){
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(postparams));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        }else if(method == "GET"){
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format(postparams, "utf-8");
            url += "?" + paramString;
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {

        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

   }
 }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T13:37:10.833

您忘记`method`在 BackGroundTask 类中声明属性。

**编辑**像这样：

```
public class BackGroundTask extends AsyncTask<String, String, JSONObject>{
    List<NameValuePair> postparams= new ArrayList<NameValuePair>();
    String URL=null;
    String method = null;
public BackGroundTask(String url, String method, List<NameValuePair> params) {
        URL=url;
        postparams=params;
        this.method = method;
    }
    @Override
    protected JSONObject doInBackground(String... params) {
        // TODO Auto-generated method stub
        // Making HTTP request
        try {
    // Making HTTP request 
        // check for request method

    if(method.equals("POST")){
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(postparams));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        }else if(method == "GET"){
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format(postparams, "utf-8");
            url += "?" + paramString;
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {

        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

   }
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:35:21.180

您需要在 BackGroundTask 中将方法设置为类变量。您正在将它传递给构造函数，但不会对其进行任何处理。使用与 url 和 postparams 相同的方式设置它。

# c++ - for循环的效率

> ID：11865628
> 
> 赞同：2
> 
> 时间：2012-08-08T13:30:08.117
> 
> 标签：c++, performance, for-loop

我需要堆栈溢出的意见来解决我脑海中关于循环效率的问题。现在，当我开始编程时，“让它工作”是一个重中之重，我的大多数 for 循环看起来都是这样的。

```
for (int i = 0; i < N; i++) {;} 
```

然后我很紧张，尤其是在 C++ 开发中，预增量可以为您节省一些调用，并且考虑到这将是 N 个调用并且它不会改变我习惯的可读性。

```
for (int i = 0; i < N; ++i) {;} 
```

这在一段时间内已经足够好了，但专注于可读性，在阅读了 Steve McConnell 的一些 Code Complete 之后，我明白了这一点。

```
for (int loop_index = 0; loop_index < loop_count; ++loop_index) {;} 
```

这些变量会根据代码的上下文而变化。然后我阅读了一些关于内置类型构造函数和赋值的 Effective C++。基本上这之间的区别

```
int i = 42; 
```

和

```
int i(42); 
```

是不是前者调用了构造函数和赋值运算符，而后者只调用了构造函数。所以我在编码时把它纳入了我的日常工作。所以我的问题是，这是编写 for 循环的最有效和可读的方式：

```
for (int loop_index(0); loop_index < loop_counter; ++loop_index) {;} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T13:35:49.753

实际上，

```
for (int i = 0; i < N; i++) {;} 
```

很好。`i`是一个`int`，所以编译器无论如何都会优化后增量。是否初始化`int`with`int i(42);`或 with`int i = 42;`也是一个品味问题。

我也会调用迭代器`i`，而不是`loop_index`. 前者是普遍理解的，而后者是陌生的。

但是，如果您正在处理迭代器，则情况会发生变化。机会`it++`仍然会优化到`++it`，但在这里，我宁愿使用预增量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T13:35:35.377

如果您不使用迭代器，那没关系，因为编译器会将其转换为相同的代码。

附录：如果您使用迭代器：

```
for(vector<int>::iterator i = a.begin(); i != a.end(); ++i) 
```

然后 ++i 是 i.operator++() 而 i++ 是 i.operator++(int) 这可能意味着两个不同的东西。

顺便提一句。如果这是一个问题，您可以衡量性能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T13:35:40.590

首先，你的最后一点是不正确的。这条线

```
int i = 42; 
```

确实复制初始化（参见这个相关[的 GoTW](http://www.gotw.ca/gotw/036.htm)）。那里没有任务。对于分配，你需要

```
int i;
i = 42; 
```

其次，在处理整数类型等内置函数时，编译器生成的代码可能没有区别。您应该分析不同的选项并查看。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T13:34:43.520

如果您使用内置类型或大多数迭代器，所有这些都将编译为相同的代码。

所以我会坚持使用最适合 C++ 的那个。

```
for (int i = 0; i < N; ++i) {;} 
```

或者如果你想罗嗦（但 i 和 k 传统上是循环索引）

```
for (int loop_index = 0; loop_index < loop_count; ++loop_index) {;} 
```

作为我最初主张的证据：这两段代码生成相同的汇编代码。（使用 OS X 编译的 g++ 4.0.1 `g++ -Os -S test.cpp`）

```
void f(int); // So that smart compilers can't optimise away the loop entirely.

void g()
{
  int N=100;
  // for( int i=0; i<N; i++)
  for (int i(0); i < N; ++i) 
  {
    f(i);
  }
} 
```

为了完整起见，生成的代码是：

```
.globl __Z1gv
__Z1gv:
LFB2:
    pushl   %ebp
LCFI0:
    movl    %esp, %ebp
LCFI1:
    pushl   %esi
LCFI2:
    xorl    %esi, %esi
    subl    $20, %esp
LCFI3:
L2:
    movl    %esi, (%esp)
    incl    %esi
    call    L__Z1fi$stub
    cmpl    $100, %esi
    jne L2
    addl    $20, %esp
    popl    %esi
    leave
    ret 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T13:44:12.713

虽然其他人已经很好地涵盖了 post-vs pre-increments 和初始化，但我想补充一点，`int i`在大多数情况下 using 比 更具可读性`int loop_index`，因为这是其他人都在使用和期望的。

您可能想要将其称为其他名称的唯一情况是当您有多个循环以及循环索引之间的复杂交互时。例如

```
for (int row = 0; row < rows; row++) {
    for (int column = 0; column < columns; column++) {
        stuff[row * columns + column] = calc_stuff(row, column);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T13:52:55.307

高效的？不，它很可能是相同的，因为大多数编译器会优化 int 和简单指针的后增量和初始化。至于 loop_index 是否比 i 更具可读性，IMO，对于简单的计数器来说，它的可读性较差。

如果它是一个迭代器，那就不同了，编译器不能总是优化迭代器的重载后增量或双重初始化。我也更喜欢将迭代对象的名称用于迭代器，因为这反映了更好的使用方式，当使用箭头 -> 运算符取消引用迭代器时，使用对象的名称看起来更自然。

# git - 从恢复提交的早期 git merge 中恢复文件

> ID：11865630
> 
> 赞同：0
> 
> 时间：2012-08-08T13:30:23.680
> 
> 标签：git

我现在处于奇怪的状态。

在一些错误的合并期间，同事做出了一个提交，该提交恢复了来自其中一个父级的所有更改，但它仍被视为该提交的父级。

在这个错误的合并之后发生了更多的提交，现在我们发现了。现在要做什么？

我们不能将当前主控与“已删除”提交合并，因为从技术上讲，它是一个祖先。现在要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:46:48.157

那很简单。

`git-revert -m 2`在错误的合并上工作得很好。

# ruby-on-rails - 在视图页面上显示格式化的数据库内容

> ID：11865635
> 
> 赞同：0
> 
> 时间：2012-08-08T13:30:44.240
> 
> 标签：ruby-on-rails

我有 Book.description 与以下存储在数据库中：

```
 aaa

    bbb

    test

    fsdfdsfs fds fd sf sdf ds 
```

我需要在我的视图页面中显示上述内容，包括换行符。

我试过`<%= @book.description.gsub(/\n/, '<br />')%>`了，但我收到以下错误消息：

```
private method `gsub' called for #<Hash:0xb662aa50> 
```

我也尝试过`<%= @book.description.html_safe%>`，但收到以下错误消息：

```
undefined method `html_safe' for #<Hash:0xb66625f4> 
```

非常感谢任何有关此问题的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:28:50.697

```
<%= simple_format(@book.description) %> 
```

# excel - Excel VBA：使用文本框中的新内容更新单元格

> ID：11865638
> 
> 赞同：1
> 
> 时间：2012-08-08T13:30:59.327
> 
> 标签：excel, row, insert-update, vba

我有一长排数据分成单元格。每个单元格填充一个文本框，我有 20 个文本框（假设我有 20 个单元格）。

下面的代码是我如何填充每个文本框...

```
Private Sub UserForm_Initialize()

Set rng = Worksheets("Risk&Issues").Range("A4")
i = 0: j = 1

txtbox_revri_idnum.Text = rng.Offset(i).Value
txtbox_revri_projname.Text = rng.Offset(i, j).Value: j = j + 1
txtbox_revri_isrefnum.Text = rng.Offset(i, j).Value: j = j + 1
...
txtbox_revri_projname.SetFocus 
```

在表单上，​​我有一个“更新”按钮，当按下该按钮时，将使用每个文本框中的新内容更新单元格（在工作表内）。“更新”按钮的代码如下...

```
Private Sub button_revri_update_Click()

ActiveCell.Value = txtbox_revri_projname.Value
ActiveCell.Offset(0, 1) = txtbox_revri_isrefnum.Value
ActiveCell.Offset(0, 2) = txtbox_revri_riskrefnum.Value
...
End Sub 
```

当我查看工作表时，我希望看到的是对填充文本框的每个单元格的更新。但是，我实际得到的是从我碰巧在单元格上按下鼠标的任何地方插入的新行。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:51:54.060

您的代码在活动单元格（“我碰巧按下鼠标的地方”）添加了一个新行，因为您使用了 ActiveCell。而是尝试类似：

```
Private Sub button_revri_update_Click()
Dim FirstRowCell as Range

Set FirstRowCell = ActiveSheet.Range("B1")
With FirstRowCell
   .Value = txtbox_revri_projname.Value
   .Offset(0, 1) = txtbox_revri_isrefnum.Value
   .Offset(0, 2) = txtbox_revri_riskrefnum.Value
End With
...
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:52:27.863

当您按上一个问题所示的“下一步”时，`i`已经设置了 的值。基于那个问题，你可以使用这个

```
Private Sub button_revri_update_Click()
    j = 1

    rng.Offset(i).Value = txtbox_revri_projname.Text
    rng.Offset(i, j).Value = txtbox_revri_isrefnum.Text: j = j + 1:
    rng.Offset(i, j).Value = txtbox_revri_riskrefnum.Text: j = j + 1
    rng.Offset(i, j).Value = TextBox4.Text: j = j + 1
End Sub 
```

# c# - 如何从标志枚举中获取数值？

> ID：11865639
> 
> 赞同：12
> 
> 时间：2012-08-08T13:31:01.323
> 
> 标签：c#, enums, enum-flags

> **可能重复：**
> [枚举返回 int 值](https://stackoverflow.com/questions/943398/enums-returning-int-value)
> [如何从枚举中获取数值？](https://stackoverflow.com/questions/1540779/how-to-get-the-numeric-value-from-the-enum)

**这不是其中任何一个的副本，感谢阅读问题模式**

假设我选择了一些我的标志枚举项：

```
[Flags]
public enum Options
{
    None = 0,
    Option_A = 1,
    Option_B = 2,
    Option_C = 4,
    Option_D = 8,
}

Options selected = Options.Option_A | Options.Option_B; 
```

的值`selected`应该对应3（即2 + 1）

我怎样才能把它变成一个int？

我已经看到了`selected`将 ToString() 转换为每个选项然后将 split() 转换为每个选项的示例，例如

```
"Option_A | Option_B" --> { "Option_A", "Option_B" }, 
```

然后重组为相应的枚举，并从中获取值，但这有点混乱。有没有更直接的方法来获得这些值的总和？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:37:34.860

没有太多选择，只做一个 if

```
List<int> composedValues = new .... 
if((selected & Option_A) == Options.Option_A)
    composedValues.Add((int)Options.Option_A);
else if((selected & Option_B) == Options.Option_B)
    composedValues.Add((int)Options.Option_B);
else if(...) 
```

最后，您将获得列表中结果的所有组成值的`composedValues`列表。

如果这不是您要的，请澄清。

# html - 用于创建现有 jsp 或 html 页面的移动版本的工具

> ID：11865641
> 
> 赞同：0
> 
> 时间：2012-08-08T13:31:15.613
> 
> 标签：html, jsp, mobile

我有一些现有的 jsp 页面和 html 页面，其中也包括 javascript。由于大量的页面手动编辑不是我的选择。那么有什么工具可以用来至少帮助我将它们转换为一些移动兼容版本。

我也查看了用于移动设备的 jquery，但它似乎没有任何现有文件的转换选项，尽管对于生成新文件来说它很棒。

对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:34:31.107

我强烈怀疑是否有一个工具可以做到这一点，它甚至会做什么？为移动平台制作专门的页面是一项非常人性化的任务。

你应该做的是查看你的 CSS 文件，它应该对你的整个应用程序是通用的，然后看看你能用它做什么。它可能不如专为小屏幕设计的页面好，但您应该能够消除最严重的问题。

有关一些示例和帮助，请参阅[http://www.seabreezecomputers.com/tips/mobile-css.htm](http://www.seabreezecomputers.com/tips/mobile-css.htm)。

# version-control - 恢复 tfs 中已删除的文件

> ID：11865644
> 
> 赞同：1
> 
> 时间：2012-08-08T13:31:26.937
> 
> 标签：version-control, tfs, file-recovery, undelete

我有一个巨大的存储库。不久前，一个名为 FooBar.xml 的文件已从 tfs 中的某个未知目录中删除。找到文件的最简单方法是什么？存储库中有数千个目录，因此手动检查每个目录以查找已删除文件并不是一个可行的选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T16:44:18.143

从 Visual Studio 命令提示符使用命令

`tf undelete $/TeamProject/FooBar.xml /noget /recursive`

这将取消删除存储库中名称为 FooBar.xml 的所有文件，并将取消删除的内容保留为挂起的更改。如果您可以将其缩小到存储库的特定分支或区域，这将加快速度。

然后，您可以浏览待处理的取消删除列表，确定要保留的文件并“撤消”其他待处理的更改。

# google-maps - 地图初始化后是否可以更改谷歌地图样式？

> ID：11865648
> 
> 赞同：9
> 
> 时间：2012-08-08T13:31:36.457
> 
> 标签：google-maps, google-maps-api-3

我了解如何使用如下自定义样式初始化地图：

```
var styles =   [
    {
      featureType: "water",
      stylers: [
        { visibility: "on" },
        { color: "#ffffff" }
      ]
    }
  ];

var mapOptions = {
      zoom: 13,
      maxZoom: 15,
      minZoom: 12,
      center: new google.maps.LatLng(50.924229,-1.396841),
      disableDefaultUI: true,
      mapTypeId: google.maps.MapTypeId.ROADMAP
      styles: styles
    };
    map = new google.maps.Map(document.getElementById('map'), mapOptions); 
```

但是一旦地图已经初始化，是否可以更改为另一种样式？例如，当某些事件被触发时改变地图的颜色？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-08T13:39:02.797

是的。只需使用

```
map.setOptions(mapOptions); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-08T13:45:43.430

是的，创建一个新的样式对象，然后通过设置选项来更改样式： map.setOptions({styles: styles});

# objective-c - 目标 c 正则表达式以 1 或 2 位数字开头

> ID：11865650
> 
> 赞同：1
> 
> 时间：2012-08-08T13:31:44.207
> 
> 标签：objective-c, regex, cocoa, nspredicate

**我需要 ex“ 17% off** etc etc”或“ **2% off** etc etc etc”的正则表达式，所以如果字符串以一位或两位数字开头，后跟百分号、空格和单词“off”

我试过

```
NSPredicate* test = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", @"^[0-9]{1,2}% off"];
if ( [test evaluateWithObject:candidate] )
{
.... etc.. 
```

但没有运气。

我很欣赏任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:47:24.683

使用这个命令行示例应用程序，它工作得很好。

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        NSArray *lines = @[ @"17% off etc.", @"2% off", @"off by 12%" ];
        NSPredicate* test = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", @"^[0-9]{1,2}% off.*"];

        [lines enumerateObjectsUsingBlock:^(NSString  *candidate, NSUInteger idx, BOOL *stop) {
            if ( [test evaluateWithObject:candidate] ){
                NSLog(@":)");
            } else{
                NSLog(@":(");
            }
        }];

    }
    return 0;
} 
```

输出：

```
2012-08-08 15:46:16.213 regextest[1305:303] :)
2012-08-08 15:46:16.215 regextest[1305:303] :)
2012-08-08 15:46:16.215 regextest[1305:303] :( 
```

* * *

如果该行包含更多字符，它应该看起来像

```
NSPredicate* test = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", @"^[0-9]{1,2}% off.*"]; 
```

表示`.*`可能存在任意数量的任意字符。

# html - 添加相对位置后，整个站点向下移动

> ID：11865651
> 
> 赞同：1
> 
> 时间：2012-08-08T13:31:45.377
> 
> 标签：html, css

![在为 fadeIn 数字 img 加载 jquery 之前](../Images/1bae69c1257cddd2d055ab184199cdea.png)

![在为 FadeIn number img 加载 thr jquery 之后](../Images/bb11a565f9cff78d3e0f5de33ee76f63.png)

在我加载包含一些 jquery 的数字图像后，整个站点向下移动。

可能是因为`position:relative`我正在使用？忽略`2px border`为某些元素插入的 I。我想检查元素包含的区域。

笔记：

食物的大图像与图像滑块-硬币滑块有关。

我拍摄的屏幕截图中没有显示页脚。

HTML：

```
<!doctype html>

<html>

    <head>
            <meta charset="UTF-8"/>
            <title> Foodstant Delivery </title>

        <link rel="stylesheet" type="text/css" media="screen" href="testCSS.css" />
        <link rel="stylesheet" type="text/css" href="coin-slider/coin-slider-styles.css"  />

        <script type="text/javascript" src="scripts/jquery-1.7.2.js"></script>
        <script src="jqfloat/jqfloat.js"></script>
        <script type="text/javascript" src="coin-slider/coin-slider.min.js"></script>

        <script type="text/javascript">
            $(document).ready(function() {
                $('#coin-slider').coinslider({ width:900, navigation: true, delay: 3000, hoverPause: true, effect: 'random' });

                $('#numb1').hide().delay(800).fadeIn('normal');

            });
        </script>

    </head>
<body>

    <div id="container">
        <div id="numb1">    
                <img src="images/number4.png" />
            </div> 

        <figure id="logo"> 
            <img src="images/logo23.png" alt="Foodstant Delivery logo" width="" height="" />
        </figure>   

        <figure id="abtex">
            <img src="images/abtext126.png" />
        </figure>   

        <div id="navbar">
            <ul>
                <li class="OP" id="OPM1"><img src="images/order.png"   /><a  href="Orders.html">Orders</a></li>
                <li class="OP" id="OPM"><img src="images/menupic3.png" /><a  href="Menu.html">Menu</a></li>
                <li class="OP"><img src="images/contact.png"  /><a href="ContactUs.html">Contact</a></li>
                <li class="OP"><img src="images/Pen.png"  /><a href="AboutUs.html" target="_blank">About Us</a></li>
                <li class="OP"><img src="images/pin.png"   /><a  href="Jobs.html">Jobs</a></li>
            </ul>   
        </div>

            <div id='coin-slider'>

                     <img src='images/slideshow1x.png' />
                            <span>
                                Description for img01
                            </span>

                     <img src='images/slideshow2x.jpg' />
                            <span>
                                Description for img01
                            </span>

                     <img src='images/slideshow3x.jpg' />
                            <span>
                                Description for img01
                            </span>

                     <img src='images/slideshow4x.jpg' />
                            <span>
                                Description for img01
                            </span>

</div>
        <footer>
            <figure id="footerBg">
                <img src="images/BG_F_S3.png" alt="Footer Background" width="" height="" />

            </figure>   

        <div id="ftex"> 
            <ul>

                <li> © 2012 Foodstant Delivery  </li>

                 <li><a href="Sitemap.html">Sitemap</a> </li>

                <li id="ss">Search Site </li>
            </ul>   

        </div>  

        </footer> 

</div>

</body>

</html> 
```

CSS：

```
* {
    margin: 0;
    padding:0;
}

@font-face {
    font-family: 'Conv_LITHOSPRO-REGULAR';
    src: url('fonts/LITHOSPRO-REGULAR.eot');
    src: local('☺'), url('fonts/LITHOSPRO-REGULAR.woff') format('woff'), url('fonts/LITHOSPRO-REGULAR.ttf') format('truetype'), url('fonts/LITHOSPRO-REGULAR.svg') format('svg');
}

body {
    background-image: url('images/BG-W1.png');
}
#container{
    max-width:1000px;
    margin: 0 auto; 
    position: relative; 
    padding: 0 auto;
    height: 790px;
    /*border: 2px solid blue;*/
#logo {
    float:left;

}

#abtex {
    float: left;
    border:2px solid blue;
}

#navbar {
    background: rgb(246,248,249); /* Old browsers */
    background: -moz-linear-gradient(top,  rgba(246,248,249,1) 0%, rgba(229,235,238,1) 46%, rgba(215,222,227,1) 65%, rgba(245,247,249,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(246,248,249,1)), color-stop(46%,rgba(229,235,238,1)), color-stop(65%,rgba(215,222,227,1)), color-stop(100%,rgba(245,247,249,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 46%,rgba(215,222,227,1) 65%,rgba(245,247,249,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 46%,rgba(215,222,227,1) 65%,rgba(245,247,249,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 46%,rgba(215,222,227,1) 65%,rgba(245,247,249,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 46%,rgba(215,222,227,1) 65%,rgba(245,247,249,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f6f8f9', endColorstr='#f5f7f9',GradientType=0 ); /* IE6-9 */

    border-top-left-radius: 10px;
    border-bottom-left-radius:10px;
    border-top-right-radius: 10px; 
    border-bottom-right-radius:10px;

    box-shadow: -3px -5px 10px  #888888;

    position: relative;
    top:-50px;
    clear:left;
    font-size: 26px;

    font-family: 'Conv_LITHOSPRO-REGULAR';
}

#navbar ul {
    list-style-position:inside;
    padding-top: 10px;
    padding-bottom: 10px;
}

#navbar ul li {     
        display: inline;
        padding:0 20px 0px 0px; 
        margin-bottom: 10px;
        list-style-type:disc;
    }

#navbar ul li.OP {
        /*list-style-image:url('images/order.png'); */
        padding-left: 20px;

}   

#navbar ul li.OP img {
    vertical-align: middle; 
}

li a:link {
  color: #EF174A;
  }

li a:visited {
  color: #BF4100;
  }

li a:hover {
  color: black;
  background-color:#D2D2D2;
  border-radius: 10px; 
  }

li a:active {
  color: #918FBC;
  } 

li a {
    text-decoration:none;
}  

#navbar ul li.OP a {
    padding-left: 10px;
}

#footerBg {
    position: relative;
    bottom:-63px;
    left:-50px;
}

#footerBg img {
    display: block;
}

#footertex {
    position: relative;
    top:-80px;

    /*border:2px solid black;*/

}

#ftex {
    position: relative;

}
#ftex ul {
    list-style-type:none;
    /*border:2px solid yellow;*/
    width:1200px;

}

#ftex ul li {
    display:inline;
    padding-right: 170px; 
    font-family: 'Conv_LITHOSPRO-REGULAR';
    font-size: 20px;
    /*border:2px solid red;*/
    color:#ffbf81;
}

#ftex li a:link {
  color: #ffbf81;
  border-bottom:4px solid #ffbf81;
  }

#ftex li a:visited {
  color: #ffbf81;
  border-bottom:4px solid #ffbf81;
  }

#ftex li a:hover {
  color: #ffbf81;
  background:none;
  border-radius: 0;
  border-bottom:4px solid #ffbf81;
  }

#ftex li a:active {
  color: #ffbf81;
  border-bottom:4px solid #ffbf81;
  } 

#ftex ul li#ss {
    border-bottom:4px solid #ffbf81;
    padding-right:5px;

}

#numb1 {
    position: relative;
    /*border:10px solid red;*/
    top:100px;
    border:2px solid red;

    right:-750px;
    /*z-index: 100;*/
    /*background:url(images/number2.png); */
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T13:46:06.350

导致网站下移的不是 jQuery，而是您的`numb1` `div`.

`div`元素占用页面空间。由于默认情况下`div`has `display: block`，它占据了页面顶部的整个“行”区域，即您放置它的位置。设置`position: relative`允许您更改 的位置`numb1`，但它仍然在页面上的原始位置（与以前相同的位置）**占用相同的空间。**

纠正此问题的一种方法是使用`position: absolute`，它将`numb1`从文档流中删除。

**编辑：**

从您的评论来看，我猜您希望相对于您的徽标和其他数字定位数字，而不会出现不同屏幕分辨率重叠的问题。解决此问题的一种方法是将所有数字（包括 ）放在页面顶部（包括`numb1`）`div`与`position: relative`. 然后你可以给`numb1` `position: absolute`. 这将允许您`numb1` **相对于包含的`div`**. 由于您在 中只有数字，因此`div`这基本上可以让您`numb1`相对于您的数字进行定位。

# titanium - 如何通过 Titanium 将事件添加到 iOS 模块中的默认日历？

> ID：11865656
> 
> 赞同：1
> 
> 时间：2012-08-08T13:31:55.923
> 
> 标签：titanium, titanium-modules

我想用 Titanium appcelerator 制作 iOS 模块。我已将 app.js 文件连接到 xCode。这一切都很好。我可以发送数据并获得响应。但是当我在默认日历中编写添加事件的代码时，它就崩溃了

```
EKEventStore *eventStore1 = [[EKEventStore alloc] init];
EKEvent *event  = [EKEvent eventWithEventStore:eventStore1];
event.title     = @"EVENT TITLE  4";
event.notes     = @"NOtes";
event.startDate = [[NSDate alloc] init];
event.endDate   = [[NSDate alloc] initWithTimeInterval:600 sinceDate:event.startDate];

[event setCalendar:[eventStore1 defaultCalendarForNewEvents]];
NSError *err;
[eventStore1 saveEvent:event span:EKSpanThisEvent error:&err];
NSLog(@" Error is %@",err); 
```

我如何解决这个问题？这是错误信息

```
output = run.run(args,False,False,o)
[DEBUG] File "/Users/mac03/Library/Application Support/Titanium/mobilesdk/osx/2.0.2.GA/iphone/run.py", line 41, in run
[DEBUG] sys.exit(rc)
[DEBUG] SystemExit: 65
[ERROR] Build Failed. See: /var/folders/5s/3wmzx34548d9jnj7z7v1ylc40000gn/T/mLmdFS2ti/test/build/iphone/build/build.log
mac03:test mac03$ titanium run 
```

我添加了 Eventkit.framework 并导入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:34:50.843

您需要更改您的 module.xconfig 文件以包含此行。

```
OTHER_LDFLAGS=$(inherited) -framework EventKit 
```

这会通知应用程序将 EventKit 框架构建到主二进制文件中，仅将其包含在您的模块 XCode 项目中是不够的。[查看文档的这一部分以获取更多信息。](http://docs.appcelerator.com/titanium/2.1/index.html#!/guide/iOS_Module_Development_Guide-section-29004946_iOSModuleDevelopmentGuide-AddingSpecialCompilerDirectives)

# ruby-on-rails - 如何在子文件夹中使用不同的局部和布局？

> ID：11865668
> 
> 赞同：2
> 
> 时间：2012-08-08T13:32:30.933
> 
> 标签：ruby-on-rails, ruby, layout, partials

我需要对`views/admin`文件夹中的任何内容使用单个部分。我的设置：

```
/app/views/
        + admin
            + accounts
            + users
        + layouts
            - application.html.slim
        + application
            - _header.html.slim
        + users
        + accounts 
```

我有一个部分调用`_header.html.slim`。`/views/application/`部分是从`/views/layouts/application.html.slim`.

我想为目录`_header.html.slim`下的任何内容呈现不同的部分`/views/admin`。我可以创建一个新的`_header.html.slim`并将其添加到`/views/admin/accounts`and `/views/admin/users`，但我不想重复我自己。我想要一个部分用于`admin`.

我怎么能这样？我尝试添加`/views/admin/application`和`/views/admin/layouts`文件夹，希望它们会覆盖`/view`目录中的文件夹，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:43:12.387

布局/application.html.slim：

```
- if controller.controller_name == "admin"
    == render :partial => "admin/header"
- else
    == render :partial => "application/header" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:42:42.720

文件夹本身的结构并不控制运行或应用哪些文件夹 - 文件夹结构实际上只是为了帮助您以一种有意义的方式组织它。

根据您的需要，您可以通过多种方式完成您正在寻找的内容：

[一种方法是使用此处概述](http://guides.rubyonrails.org/layouts_and_rendering.html#using-render)`render :layout => 'some_layout_name'`的选项在控制器中指定布局（包括所需的部分）（具体请跳至标题“2.2.11.2 The :layout Option”）。

另一种方法是在您的操作中设置一个变量，其中包含您要呈现的布局或部分布局的名称，并在您的视图中执行以下操作：

```
<% if @custom_partial == "slim" %>
  <%= render :partial => 'header.html.slim' %>
<% end %> 
```

因此，要么指定一个自定义布局（如果您希望包括部分的整个布局是自定义的），或者设置一个标志变量来控制哪些部分在什么时候被渲染，并使用该变量来控制视图中的渲染流程。这些选项中的哪一个适合您，实际上取决于哪个更清洁、最可靠并且对您的项目有意义；也就是说，由您决定。

# sharepoint - 以编程方式创建 SPAlert 时访问被拒绝错误

> ID：11865670
> 
> 赞同：1
> 
> 时间：2012-08-08T13:32:38.560
> 
> 标签：sharepoint, sharepoint-2007

我们正在使用sharepoint 2007

我们创建了用于以编程方式创建警报的自定义页面。

我们面临的问题是，如果登录用户是网站集管理员，那么只会触发电子邮件。

除网站集管理员外，对网站具有完全控制或贡献访问权限的用户收到拒绝访问错误。

我们尝试使用 SPSecurity.RunWithElevatedPrivileges 但在这种情况下也出现访问被拒绝错误。

对于下面的代码，我们没有收到拒绝访问错误，但在这种情况下，电子邮件没有被触发，

```
SPSecurity.RunWithElevatedPrivileges(delegate()
{
Guid siteId = SPContext.Current.Site.ID;
Guid webId = SPContext.Current.Web.ID;
using (SPSite oSite = new SPSite(siteId))
{
using (SPWeb oWeb = oSite.OpenWeb(webId))
{
oWeb.AllowUnsafeUpdates = true; 
SPUser oUser = oWeb.CurrentUser;
SPUser user = oWeb.EnsureUser(oUser.ToString());
SPList oList = oWeb.Lists[strLibraryName];
SPAlert oAlert = user.Alerts.Add();
oAlert.Filter ="<Eq><FieldRef Name="+strCol+"><Value type='Text'>" + strColValue + "</Value></Eq>";
oAlert.Title = "test alert";
oAlert.AlertType = SPAlertType.List; 
oAlert.EventType = SPEventType.All; 
oAlert.List = oList;
oAlert.AlertFrequency = SPAlertFrequency.Immediate;
oAlert.AlwaysNotify = true;
oAlert.Update(true);
}
}
}); 
```

请让我知道对此的解决方案是什么，或者我们如何在运行时以编程方式将用户添加/删除到网站集管理员

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:11:40.477

将声明和赋值向上移动到 using 语句之上。我认为警报已成功创建，但它是针对错误帐户的，因此您没有收到电子邮件。如果所有这些都在事件接收器中，您可以使用此行来获取实际用户：

```
SPUser user = oWeb.Users.GetByID(properties.CurrentUserId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:51:27.293

问题在于 EnsureUser() 方法，因此将其删除并在下面发布工作代码..

```
SPSecurity.RunWithElevatedPrivileges(delegate()
{
Guid siteId = SPContext.Current.Site.ID;
Guid webId = SPContext.Current.Web.ID;
using (SPSite oSite = new SPSite(siteId))
{
using (SPWeb oWeb = oSite.OpenWeb(webId))
{
oWeb.AllowUnsafeUpdates = true; 
SPUser oUser = oWeb.CurrentUser;
SPList oList = oWeb.Lists[strLibraryName];
SPAlert oAlert = oUser.Alerts.Add();
oAlert.Filter ="<Eq><FieldRef Name="+strCol+"><Value type='Text'>" + strColValue + "</Value></Eq>";
oAlert.Title = "test alert";
oAlert.AlertType = SPAlertType.List; 
oAlert.EventType = SPEventType.All; 
oAlert.List = oList;
oAlert.AlertFrequency = SPAlertFrequency.Immediate;
oAlert.AlwaysNotify = true;
oAlert.Update(true);
}
}
}); 
```

# javascript - 时区偏移计算

> ID：11865672
> 
> 赞同：2
> 
> 时间：2012-08-08T13:32:43.413
> 
> 标签：javascript, date, momentjs

假设服务器以这种格式给出日期：

```
 var date = '2012-08-08T15:04:33+0200'; 
```

如您所见，前一个日期的时区偏移量为两个小时。

假设我需要在不同时区的不同地方显示相同的日期。

[使用moment.js](http://momentjs.com)在具有不同时区的不同客户端中显示日期的正确方法是什么

我确实尝试了以下方法，但我不确定，因为我无法测试它。

```
 moment(date, "YYYY-MM-DDTHH:mm:ss").fromNow(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:57:37.993

`ZZ`根据文档，只需传递以下参数“Z”或根据您的日期格式就足够了。

所以在你的情况下应该是：

```
var date = '2012-08-08T15:04:33+0200';
moment(date, "YYYY-MM-DDTHH:mm:ssZ").fromNow(); 
```

# sql-server - sql server 选择变量并计算结果

> ID：11865673
> 
> 赞同：0
> 
> 时间：2012-08-08T13:32:45.283
> 
> 标签：sql-server, select, count, combinations

一些非常简单的事情，但我无法让它为我工作:)

```
select x.name, count(x.name) from <table_name> x where ...<complex and long>... 
```

它会引发错误，即 x.name 未与 group by 一起使用。

```
select x.name from <table_name> x where ...<complex and long>... 
```

工作正常并返回例如 6 个名称

```
select count(x.name) from <table_name> x where ...<complex and long>... 
```

也可以正常工作并返回例如数字 6

但是当我尝试通过以下方式添加组时，组合不起作用：

```
select x.name, count(x.name) from <table_name> x where ...<complex and long>...
group by x.name 
```

它有效，但所有计数都是 1 而不是 6。

问题是，我可以先将计数放入变量中，然后编写长 sql 语句来获取名称，但我不想编写长而复杂的 select 语句两次。必须有某种方法可以在一次选择中进行组合：获取所有名称，顺便告诉我他们有多少。

谢谢

附言

```
name    bla1    bla2
a       ...     ...     
a       foo     ...     
b       foo     ...     
c       ...     ...     
d       foo     ...     
d       foo     ...     
b       foo     ...     
c       foo     ... 
```

x.name where bla1 = foo 的结果将是：

```
a
b
d
d
b
c 
```

count(x.name) where bla1 = foo 的结果是：

```
6 
```

我想要的结果：

```
...variable definitions
select @foundName = x.name, @numOfAllFoundNames = count(x.name)
from <table_name> x where ...<complex and long>... 
```

应该是：@foundName = a（只是其中一个名字，不管是哪一个）@numOfAllFoundNames = 6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:40:27.113

试试这个 ：

```
select x.name, count(x.name) over () cnt 
from <table_name> x where ...<complex and long>... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T13:41:08.180

最简单的方法是`@@rowcount`在查询后使用；

```
select x.name from <table_name> x where ...<complex and long>...

select 'the number of rows is:', @@rowcount 
```

顺便说一句，如果您请求一个非聚合字段 ( `name`) 和一个聚合字段 ( `count(name)`)，您必须提供一个`group by`来告诉服务器要计算*什么*；您会看到 1，因为`group by name`将 应用于集合中的`count`每个*不同*名称 - 例如，`2`如果名称重复，您会看到少 1 行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:41:11.157

您可以在选择名称后使用[@@ROWCOUNT](http://technet.microsoft.com/en-us/library/ms187316.aspx)来获取复杂查询返回的行数。否则，没有简单的方法可以在选择每个名称的同一查询中获取名称的数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T13:41:52.880

你几乎做对了。

```
...variable definitions
set @numOfAllFoundNames = 0;
select @foundName = x.name, @numOfAllFoundNames = @numOfAllFoundNames+1
from <table_name> x where ...<complex and long>... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T13:43:08.147

这是很少使用的 COMPUTE 子句的工作：

```
SELECT x.name
FROM [table]
WHERE [... ]
COMPUTE COUNT(x.name) 
```

请注意 COMPUTE 已被弃用。

# android - 设置具有特定高度的列表视图项

> ID：11865674
> 
> 赞同：0
> 
> 时间：2012-08-08T13:32:45.973
> 
> 标签：android, xml, listview, height

我想调整具有特定高度的列表视图中的项目。

![在此处输入图像描述](../Images/88c38f4b89ba36b7176bfe2eb6a72fca.png)

我做的适配器：*?android:attr/listPreferredItemHeight*，当列表视图的高度为*fill_parent*时效果很好。

```
<TextView
    android:id="@+id/FirstText"
    android:layout_width="wrap_content" 
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:layout_weight="1"
    android:gravity="center_vertical"
    android:paddingBottom="10dip"
    android:paddingLeft="6dip"
    android:paddingTop="12dip"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="18dip"
    android:textColor="#000000" />

<ListView
    android:id="@+id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ffffff"
    android:cacheColorHint="#ffffff"
    android:divider="#4436f2"
    android:dividerHeight="1px"
    android:scrollbars="none"
    android:fadingEdge="none"/> 
```

但是当列表视图的高度是特定大小时不适合项目。

![在此处输入图像描述](../Images/8a96194b4f9dbb51a72c8aeeec9e7cd8.png)

```
<ListView
    android:id="@+id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="200sp"
    android:background="#ffffff"
    android:cacheColorHint="#ffffff"
    android:divider="#4436f2"
    android:dividerHeight="1px"
    android:scrollbars="none"
    android:fadingEdge="none"/> 
```

如何使用特定列表视图调整项目的高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:45:00.777

更好地使用自定义适配器，你可以做任何你想做的事

# c# - WebBrowser 控件给出错误 INET_E_DOWNLOAD_FAILURE

> ID：11865675
> 
> 赞同：1
> 
> 时间：2012-08-08T13:32:47.357
> 
> 标签：c#, .net, vb.net, webbrowser-control, iwebbrowser2

我在我的应用程序中使用扩展的 Web 浏览器控件。我收到错误`"INET_E_DOWNLOAD_FAILURE" (i.e - 2146697208)`，它关闭表单并给出错误消息“指定资源的下载失败”。发生此错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T22:41:55.217

您的 tcp 连接正在重置。导致错误。它可以由您的应用程序外部完成，即防火墙、ISP 策略……或者在它内部完成，例如关闭连接是您代码的一部分。

# asp.net - 如何在 DataGrid 中创建收藏夹？

> ID：11865677
> 
> 赞同：2
> 
> 时间：2012-08-08T13:32:49.573
> 
> 标签：asp.net, ajax

我有一个 DataGrid，我想在那里创建一个最喜欢的图标（如“star off”和“star on”）。当点击最喜欢的（星星）时，如果星星亮，它应该向服务器发送 1，如果星星熄灭，它应该向服务器发送 0。

# ios - 使用 PhoneGap 在 XCode 中读取大文件

> ID：11865680
> 
> 赞同：1
> 
> 时间：2012-08-08T13:33:00.757
> 
> 标签：ios, cordova

我目前正在使用 PhoneGap 2.0 API 编写一个 iOS 应用程序。

我正在使用 FileReader() 类尝试读取大小为 139KB 的文件的内容，但它在读取文件的过程中大约完成了一半，然后 XCode 和模拟器崩溃了。有没有更好的方法来存储这些数据或读取文件？

文件中存储的数据当前为 JSON 格式。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:15:58.793

我有这个问题 - 添加

```
 reader.onerror= function(evt) {console.log(evt.target.error.code);}
    reader.error= function(evt) {console.log(evt.target.error.code);} 
```

并且不再崩溃需要很长时间 - 不确定这是否是调试器写入控制台？

# java - 如何在休眠中使用工作日功能

> ID：11865682
> 
> 赞同：0
> 
> 时间：2012-08-08T13:33:03.407
> 
> 标签：java, mysql, hibernate

我有 MYSQL 查询

```
SELECT WEEKDAY(CreatedDate), 
    COUNT(CreatedDate), 
    CreatedDate FROM bug_List
GROUP BY 
    WEEKDAY(CreatedDate) 
```

但是我在休眠中找不到 WEEKDAY 函数有没有最好的方法来解决它

在这里我尝试了 nativeSQL 但我得到了空数组对象

query=session.createSQLQuery("SELECT weekday(CreatedDate), count(CreatedDate) FROM bug_list GROUP BY WEEKDAY(CreatedDate)");

```
 result=query.list();

        Iterator resultIterator = result.iterator();
        while(resultIterator.hasNext())
        {
            Object[] obj = (Object[]) resultIterator.next();
            for (int i = 0; i < obj.length; i++) {
                System.out.print(obj[i] + "\t");
                }
            System.out.println("");

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T13:48:35.930

`WEEKDAY`不是标准 SQL，因此如果您希望使用 Hibernate，则必须滚动自定义`HibernateDialect`，在其中执行以下操作...

```
registerFunction("weekday",
    new SQLFunctionTemplate(Hibernate.INTEGER, "to_char(?1,'D')")); 
```

[如此处](https://stackoverflow.com/a/1037698/591495)所见。

# python - 寻找不同类型的 divmod 函数

> ID：11865683
> 
> 赞同：3
> 
> 时间：2012-08-08T13:33:07.420
> 
> 标签：python, floating-point, division, modulus

Python的`divmod`功能运行正常，几乎就是我想要的。但是，对于需要执行的操作，它对非整数的行为需要稍有不同。运行以下代码时，您可能会看到正在尝试完成的操作。

```
>>> function = divmod
>>> from math import pi
>>> function(pi * pi, pi) == (pi, 0)
False
>>> 
```

*如何`function`在上面定义最终表达式的计算结果为`True`，而不是`False`？*如果有人能弄清楚如何得到`(pi, 0)`而不是`(3.0, 0.4448...)`，那将是答案。

**编辑 1：**现在对于一个更复杂的示例，以下代码应该 yield `[3, 2, 1, 3, 2, 1]`。

```
>>> x = 1 * pi ** 5 + \
        2 * pi ** 4 + \
        3 * pi ** 3 + \
        1 * pi ** 2 + \
        2 * pi ** 1 + \
        3 * pi ** 0
>>> digits = []
>>> while x:
        x, y = function(x, pi)
        digits.append(y)

>>> digits
[0.3989191524449005, 0.2212554774328268, 2.309739581793931, 0.1504440784612413,
2.858407346410207, 1.0]
>>> 
```

**编辑 2：**以下显示的代码可以正常工作，只是它具有意外但有效的输出。

```
import math

def convert_dec_to_pi(number):
    digits = get_pi_digits(number)
    digits, remainder = correct_pi_digits(digits)
    return make_pi_string(digits, remainder)

def get_pi_digits(number):
    digits = []
    while number:
        number, digit = divmod(number, math.pi)
        digits.append(digit)
    digits.reverse()
    return digits

def correct_pi_digits(digits):
    last = len(digits) - 1
    for index, digit in enumerate(digits):
        if index < last and digit % 1 != 0:
            a, b = get_digit_options(digit, digits[index + 1])
            digits[index:index+2] = a if 0 <= a[1] < math.pi else b
    digit, remainder = divmod(digits[-1], 1)
    digits[-1] = digit
    return digits, remainder

def get_digit_options(digit, next_digit):
    a, b = math.floor(digit), math.ceil(digit)
    if a not in range(4):
        return (b, (digit - b) * math.pi + next_digit), None
    if b not in range(4):
        return (a, (digit - a) * math.pi + next_digit), None
    c, d = ((a, (digit - a) * math.pi + next_digit),
            (b, (digit - b) * math.pi + next_digit))
    return (c, d) if digit - a < 0.5 else (d, c)

def make_pi_string(digits, remainder):
    return '{} base \u03C0 + {} base 10'.format(
        ''.join(str(int(d)) for d in digits), remainder) 
```

以下函数可用于反转操作并检查结果。

```
import re

def convert_pi_to_dec(string):
    match = re.search('^(\\d+) base \u03C0 \\+ (0\\.\\d+) base 10$', string)
    if not match:
        raise ValueError()
    digits, remainder = match.groups()
    return sum(int(x) * math.pi ** y for y, x in enumerate(reversed(digits))) \
           + float(remainder) 
```

以下代码不会引发`AssertionError`，因此很明显一切正常。

```
for n in range(1, 36):
    value = convert_dec_to_pi(n)
    print(value)
    assert convert_pi_to_dec(value) == n 
```

那么这让我想到了下面的例子。输出可以毫无问题地转换回来，但人们会期待一些稍微不同的东西。

```
>>> convert_dec_to_pi(math.pi * math.pi)
'30 base π + 0.44482644031997864 base 10'
>>> convert_pi_to_dec(_) == math.pi * math.pi
True
>>> 
```

字符串应该是`100 base π + 0.0 base 10`. 此时输出是准确的，但不是“正确的”。

**编辑 3：**以下示例可能会为我所追求的内容提供一些额外的见解。在运行具有不同 π 幂的循环后，我希望所有输出都具有`10... base π + 0.0 base 10`它们的形式。结果与此不同，如下所示。

```
>>> for power in range(20):
    print(convert_dec_to_pi(math.pi ** power))

1 base π + 0.0 base 10
10 base π + 0.0 base 10
30 base π + 0.44482644031997864 base 10
231 base π + 0.8422899173517213 base 10
2312 base π + 0.6461318165449161 base 10
23122 base π + 0.029882968108176033 base 10
231220 base π + 0.0938801130760924 base 10
2312130 base π + 0.7397595138779653 base 10
23121302 base π + 0.3240230542211062 base 10
231213021 base π + 0.017948446735832846 base 10
2312130210 base π + 0.05638670840988885 base 10
23121302100 base π + 0.17714406890720072 base 10
231213021000 base π + 0.5565145054551264 base 10
2312130133130 base π + 0.6366321966964654 base 10
23121301331302 base π + 3.9032618162071486e-05 base 10
231213013313020 base π + 0.00012262302157861615 base 10
2312130133123211 base π + 0.24905356925301847 base 10
23121301331232110 base π + 0.7824248909895828 base 10
231213013312321102 base π + 0.4580601707952492 base 10
2312130133123211021 base π + 0.4390387422112354 base 10
>>> convert_pi_to_dec('2312130133123211021 base π + 0.4390387422112354 base 10')
2791563949.5978436
>>> convert_pi_to_dec('10000000000000000000 base π + 0.0 base 10')
2791563949.5978436
>>> 
```

还显示了最后两个字符串如何等效，但输出应该是第二个字符串的形式。我发现`10000000000000000000 base π`和`2312130133123211021 base π`is之间的区别很有趣`0.4390387422112354 base 10`，但是这种区别对表示有很大的影响。输出应该如下所示。

```
1 base π + 0.0 base 10
10 base π + 0.0 base 10
100 base π + 0.0 base 10
1000 base π + 0.0 base 10
10000 base π + 0.0 base 10
100000 base π + 0.0 base 10
1000000 base π + 0.0 base 10
10000000 base π + 0.0 base 10
100000000 base π + 0.0 base 10
1000000000 base π + 0.0 base 10
10000000000 base π + 0.0 base 10
100000000000 base π + 0.0 base 10
1000000000000 base π + 0.0 base 10
10000000000000 base π + 0.0 base 10
100000000000000 base π + 0.0 base 10
1000000000000000 base π + 0.0 base 10
10000000000000000 base π + 0.0 base 10
100000000000000000 base π + 0.0 base 10
1000000000000000000 base π + 0.0 base 10
10000000000000000000 base π + 0.0 base 10 
```

*有什么我遗漏的东西，有没有解决这个问题的方法，或者这应该被认为是愚蠢的差事？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:17:42.943

认识到浮点运算在定义上是不精确的。像这样`pi*pi`的操作不能保证等于数学常数`π^2`（因为这个问题[`math.pi`](http://docs.python.org/library/math.html#math.pi)只与“可用精度”一样准确——这意味着它也不是正确的值）。因此，实际上不可能对浮点数进行操作，将它们视为实数。

一般的解决方案是检查与某个 epsilon 值的距离，但这有明显的局限性。您最好重新检查您的基本要求（为什么需要实数精度？）并尝试从不同的方向解决问题。

对于您描述的示例，为什么您需要实际使用 π 的值？您能否将 π 的实际计算留到最后，只对系数进行操作？

例如，`[3, 2, 1, 3, 2, 1]`直接存储列表，并使用它们是系数的隐式契约进行操作和转换，然后定义如下内容：

```
toFloat(ls,mult):
  pow = 0
  ret = 0
  for coef in ls:
    ret += coef * mult**pow
    pow += 1
  return ret 
```

作为打印前的最后一步。更好的是，您可以将这种行为封装在一个类中（我敢打赌以前有人做过）并 make `__str__()`do`toFloat()`的行为，以便显示您的对象为您提供可以获得的最精确的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T14:32:21.243

您正在寻找一种算法来确定浮点数的[非整数基表示。](http://en.wikipedia.org/wiki/Non-integer_representation)

由于 Rényi 和 Frougny，维基百科描述了一个贪心算法；这是一个实现的尝试：

```
from math import log, floor
def expansion(x, b):
    k = int(floor(log(x) / log(b)))
    d, r = divmod(x / float(b ** k), 1)
    digits = [int(d)]
    for _ in range(k):
        d, r = divmod(b * r, 1)
        digits.append(int(d))
    def rest(b, d, r):
        while r:
            d, r = divmod(b * r, 1)
            yield int(d)
    return digits, rest(b, d, r) 
```

这给出了字典顺序的初始扩展；您可以通过一些摆弄来获得字典顺序的终端扩展：

```
def expansion(x, b, greedy=True):
    if not greedy:
        m = (floor(b) / (b - 1)) - 1
    k = int(floor(log(x) / log(b)))
    d, r = divmod(x / float(b ** k), 1)
    if not greedy and r < m:
        d, r = d - 1, r + 1
    digits = [int(d)]
    for _ in range(k):
        d, r = divmod(b * r, 1)
        if not greedy and r < m:
            d, r = d - 1, r + 1
        digits.append(int(d))
    def rest(d, r):
        while r:
            d, r = divmod(b * r, 1)
            if not greedy and r < m:
                d, r = d - 1, r + 1
            yield int(d)
    return digits, rest(d, r) 
```

不幸的是，这仍然行不通，因为 OP 的扩展在第一个数字上是非贪婪的，但在最后一个数字上是贪婪的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-18T06:01:20.143

这个非常简单，似乎比 OP 更有效。我认为结果中的缺陷与精度有关：

```
import math
import struct
import os
from decimal import Decimal, getcontext

getcontext().prec = 1000

def digits_base_b(n, b):
    n = Decimal(n)
    b = Decimal(b)
    digits = {}
    while n >= b:
        exp = int(math.log(n, b))
        digit = int(n/b**exp)
        digits[exp] = digit
        n -= digit*b**exp
    return digits, n # n is less than b**1, idk how you want to handle those

def digits_2_str(digits, base):
    exps = sorted(digits, reverse=True)
    result = []
    format_spec = '%d*'+base+'^%d'
    for exp in exps:
        result.append(format_spec % (digits[exp], exp))
    return ' + '.join(result)

pi = Decimal(
'3.14159265358979323846264338327950288419716939937510'
'58209749445923078164062862089986280348253421170679'
'82148086513282306647093844609550582231725359408128'
'48111745028410270193852110555964462294895493038196'
'44288109756659334461284756482337867831652712019091'
'45648566923460348610454326648213393607260249141273'
'72458700660631558817488152092096282925409171536436'
'78925903600113305305488204665213841469519415116094'
'33057270365759591953092186117381932611793105118548'
'07446237996274956735188575272489122793818301194912'
'98336733624406566430860213949463952247371907021798'
'60943702770539217176293176752384674818467669405132'
'00056812714526356082778577134275778960917363717872'
'14684409012249534301465495853710507922796892589235'
'42019956112129021960864034418159813629774771309960'
'51870721134999999837297804995105973173281609631859'
'50244594553469083026425223082533446850352619311881'
'71010003137838752886587533208381420617177669147303'
'59825349042875546873115956286388235378759375195778'
'18577805321712268066130019278766111959092164201989'
)

if __name__ == '__main__':
    random_float = lambda: struct.unpack('d', os.urandom(8))[0]
    x = random_float()
    while x < pi: # some floats are no good, i've only tested with positives
        x = random_float()

    digits, leftover = digits_base_b(x, pi)
    print x, '='
    print digits_2_str(digits, u'\u03C0')

    for i in range(20):
        digits, leftover = digits_base_b(pi**i, pi)
        print float(pi**i), '=', digits_2_str(digits, u'\u03C0'), '+', float(leftover) 
```

**更新** 我从互联网上得到了 pi 的前一千位，并使用了它和 decimal.Decimal 并少了一些错误，但仍然有几个。因此，我相信差异与精度有关。此外，随着精度的提高，计算所花费的时间也会急剧增加。

# python - 处理python套接字中的超时错误

> ID：11865685
> 
> 赞同：36
> 
> 时间：2012-08-08T13:33:10.217
> 
> 标签：python, sockets, exception, error-handling

我试图弄清楚如何使用 try 以及处理套接字超时。

```
from socket import *

def main():
    client_socket = socket(AF_INET,SOCK_DGRAM)
    client_socket.settimeout(1)
    server_host = 'localhost'
    server_port = 1234
    while(True):
        client_socket.sendto('Message',(server_host,server_port))
        try:
            reply, server_address_info = client_socket.recvfrom(1024)
            print reply
        except socket.Timeouterror:
            #more code 
```

我添加套接字模块的方式是导入所有内容，但是如何处理文档中的异常，它说您可以使用 socket.timeouterror，但这对我不起作用。另外，如果我这样做了，我将如何编写 try 异常块`import socket`？有人还可以解释进口的区别吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-08T13:50:16.260

```
from foo import * 
```

将所有不带下划线的名称（或仅在 modules`__all__`属性中定义的名称）`foo`添加到当前模块中。

在上面的代码中，`from socket import *`您只想捕捉`timeout`到您已拉`timeout`入当前名称空间。

`from socket import *`提取内部所有内容的定义，`socket`但不添加`socket`自身。

```
try:
    # socketstuff
except timeout:
    print 'caught a timeout' 
```

许多人认为`import *`有问题并试图避免它。这是因为以这种方式导入的 2 个或多个模块中的公共变量名称会相互冲突。

例如，考虑以下三个 python 文件：

```
# a.py
def foo():
    print "this is a's foo function"

# b.py
def foo():
    print "this is b's foo function"

# yourcode.py
from a import *
from b import *
foo() 
```

如果你运行`yourcode.py`，你只会看到输出“这是 b 的 foo 函数”。

出于这个原因，我建议要么导入模块并使用它，要么从模块中导入特定名称：

例如，您的代码在显式导入时将如下所示：

```
import socket
from socket import AF_INET, SOCK_DGRAM

def main():
    client_socket = socket.socket(AF_INET, SOCK_DGRAM)
    client_socket.settimeout(1)
    server_host = 'localhost'
    server_port = 1234
    while(True):
        client_socket.sendto('Message', (server_host, server_port))
        try:
            reply, server_address_info = client_socket.recvfrom(1024)
            print reply
        except socket.timeout:
            #more code 
```

只是多一点打字，但一切都是明确的，对读者来说，一切都是从哪里来的很明显。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-09-20T19:12:35.590

我有足够的成功只是赶上`socket.timeout`和`socket.error`; 尽管可以出于多种原因引发 socket.error 。当心。

```
import socket
import logging

hostname='google.com'
port=443

try:
    sock = socket.create_connection((hostname, port), timeout=3)

except socket.timeout as err:
    logging.error(err)

except socket.error as err:
    logging.error(err) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T13:50:01.750

当您这样做时，`from socket import *`python 正在将模块加载`socket`到当前命名空间。因此，您可以使用模块的成员，就好像它们是在您当前的 python 模块中定义的一样。

当你这样做时`import socket`，一个模块被加载到一个单独的命名空间中。当您访问它的成员时，您应该在它们前面加上一个模块名称。例如，如果你想引用一个`socket`类，你需要写`client_socket = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)`.

至于 timeout 的问题 - 您需要做的就是更改`except socket.Timeouterror:`为`except timeout:`，因为`timeout`类是在`socket`模块内部定义的，并且您已将其所有成员导入您的命名空间。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-19T10:14:54.880

这是我在一个项目中使用的解决方案。

### `network_utils.telnet`

```
import socket
from timeit import default_timer as timer

def telnet(hostname, port=23, timeout=1):
    start = timer()
    connection = socket.socket()
    connection.settimeout(timeout)
    try:
        connection.connect((hostname, port))
        end = timer()
        delta = end - start
    except (socket.timeout, socket.gaierror) as error:
        logger.debug('telnet error: ', error)
        delta = None
    finally:
        connection.close()

    return {
        hostname: delta
    } 
```

### 测试

```
def test_telnet_is_null_when_host_unreachable(self):
    hostname = 'unreachable'

    response = network_utils.telnet(hostname)

    self.assertDictEqual(response, {'unreachable': None})

def test_telnet_give_time_when_reachable(self):
    hostname = '127.0.0.1'

    response = network_utils.telnet(hostname, port=22)

    self.assertGreater(response[hostname], 0) 
```

# objective-c - 如何为不同视图中给出的日期创建倒计时？

> ID：11865693
> 
> 赞同：0
> 
> 时间：2012-08-08T13:33:47.173
> 
> 标签：objective-c, ios, date, uidatepicker, countdown

嘿，当应用程序第一次启动或单击编辑按钮时，我会出现一个初始屏幕，我将使用日期选择器从用户那里获取目标日期。
然后我怎样才能在主屏幕上倒计时到这个给定的日期？
请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:56:28.337

听起来像是在询问如何在屏幕之间共享属性。有几种方法可以解决这个问题。

1.  将日期属性放入您的 appDelegate
2.  为您的初始屏幕提供对主屏幕的引用
3.  为您的主屏幕提供初始屏幕的参考
4.  创建一个为您管理数据的单例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:49:54.977

你可以这样使用 `timeIntervalSince`；

```
NSDate *chosenDate;

// Time interval between future date and todays date
NSTimeInterval *intervalInSeconds = [chosenDate timeIntervalSinceDate:[NSDate Date]]; 
```

然后你像这样把它转换成你选择的单位；

[如何计算两个日期之间的差异？](https://stackoverflow.com/questions/4371757/how-can-i-calculate-the-difference-between-two-dates)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:46:53.467

添加 NSTimer 并使用这两个变量 NSTimeInterval start = [[NSDate date] timeIntervalSince1970]; NSTimeInterval end = [selectedDate timeIntervalSince1970];

# asp.net-mvc-3 - 验证至少有一个字段填写在 dhtmlx 表单中

> ID：11865695
> 
> 赞同：-1
> 
> 时间：2012-08-08T13:33:49.823
> 
> 标签：asp.net-mvc-3, visual-studio-2010, dhtmlx

我的表单中有文本框和下拉菜单。我有一个名为“搜索”的按钮。当我输入值并单击搜索按钮时，我会显示搜索结果。

不需要输入所有值，用户必须输入至少一个值，否则我们必须给出输入至少一个值的验证消息。我该如何进行此验证？

我给了喜欢：

```
var fn = myForm.getItemValue("FirstName");
var ln = myForm.getItemValue("LastName");
var c = myForm.getItemValue("City");
var st = myForm.getItemValue("State");
var cnt = myForm.getItemValue("Country");
var zc = myForm.getItemValue("Zipcode");
var em = myForm.getItemValue("Email");
var ph = myForm.getItemValue("Phone");
if (fn == "" && ln == "" && c == "" && st == "" && zc == "" && em == "" && ph == "" ) {
alert("please enter atleast one value");
} 
```

我的警报工作正常，但我想在表单顶部以“请输入至少一个字段”的形式显示验证消息。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:41:08.273

在表格顶部添加一个`div`

```
<div id="message"></div> 
```

在您的脚本中，代替警报：

```
$("#message").html(""); 
```

# javascript - 在 Javascript 中，值没有出现，而是显示变量名称

> ID：11865699
> 
> 赞同：2
> 
> 时间：2012-08-08T13:34:04.070
> 
> 标签：javascript

```
function ProvideValue(){

    Values = document.getElementById('HiddenValue').value;

FirstCut = Values.split("@#@"); // This will return the array ID@-@VALUE@-@TYPE

    var CtrlId;
    for (i = 0; i < FirstCut.length - 1; i++) {

        Strings = FirstCut[i];
        SecondCut = Strings.split("@-@");

        if(SecondCut[2].match("TEXT")) {
            CtrlId = "" + SecondCut[0];
            document.getElementById(CtrlId).value = SecondCut[1];
        }
    }
} 
```

这是我的代码而不是 Id，我可以打印它。但是 CtrlId 不会被实际值替换。我收到错误 `document.getElementById(CtrlId).value is NULL`。我尝试对 ID 进行硬编码，然后其工作正常，但我无法对 controlID 进行硬编码，因为有 1000 个控件并且每次 ID 更改时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:52:37.663

**您的代码看起来不错**（除了隐含的全局变量¹），您的 HTML 文档中一定还有其他问题...我也不确定为什么您要从第*一次剪切*中遗漏最后一个值，因为您正在交互`length - 2`，因为`i`小于（不**小于** **或等于**），这意味着它一直到 value然后打破循环。`length - 1`**`length - 2`**

 **这是我创建的一个[JSFiddle](http://jsfiddle.net/FctrK/)，它使用您的代码并显示一些额外的控制台消息，并将值实际应用于隐藏输入提供的输入。

## ¹重要

我应用于`var`您的变量，因此它们不是*隐含的全局变量*，应该始终避免，因为它们只不过是隐藏错误的邪恶朋友。

## 我使用的代码

HTML 非常简单，但我确实有两个元素的 ID 都在隐藏字段的复合值中处理：

```
<input type="hidden" id="hidden" value="me@-@Rob@-@text@#@you@-@Mike@-@text" />
<input id="me" value="name" />
<input id="you" value="name" />​ 
```

脚本也很简单（出于 JSFiddle 简单的原因，可以在 DOM 上运行）：

```
var vals = document.getElementById('hidden').value;

var firstCut = vals.split("@#@");

for(var i = 0; i < firstCut.length; i++) {

    var ctrl = firstCut[i].split("@-@");

    if (ctrl[2].match("text")) {
      var id = ctrl[0];
      document.getElementById(id).value = ctrl[1];
    }
}​ 
```**

# python - 从 C 库提供的内存流创建 PIL 图像

> ID：11865701
> 
> 赞同：4
> 
> 时间：2012-08-08T13:34:04.397
> 
> 标签：python

我有一个指向`c`库提供的 png 数据的 char 指针。如何从内存中的这些数据在 python 中创建图像。该`c`函数如下所示：

```
char *getImage(int *imgSize); 
```

在 Python 中，我得到 char* 如下：

```
imSize = c_int()
img = c_char_p()
img = c_char_p(my_c_api.getImage(byref(imSize))) 
```

`char*`返回到 img 变量中，并且在变量中返回图像的大小（以字节为单位）`imSize`。

执行以下 python 脚本时：

```
im = Image.frombuffer("RGBA", (400,400),  img.value, 'raw', "RGBA", 0, 1) 
```

我得到一个`ValueError: buffer is not large enough`错误。我怀疑`frombuffer`调用中的 img 变量。我与 img 变量有什么关系，才能将图像数据正确传递给`frombuffer`调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T13:36:09.537

您需要将数据放在一个`StringIO`实例中并让 PIL 从中解析数据。

```
from cStringIO import StringIO

imgfile = StringIO(img.value)
im = Image.open(imgfile) 
```

`.frombuffer`假定原始图像数据，而不是 PNG 编码的数据。该`StringIO`对象提供了一个类似文件的对象来包装您的数据，因此 PIL 可以使用它。

# android - 为什么当我在其中调用 registerReceiver() 时反复调用 OnResume()？

> ID：11865703
> 
> 赞同：1
> 
> 时间：2012-08-08T13:34:07.513
> 
> 标签：android, onresume, registering

在我的应用程序中，我保持一个 TCP 连接来传输数据。我想实现以下场景；

我需要听网络变化，所以如果网络断开，我需要通知用户。如果网络再次出现，我需要自动连接并开始流式传输。还有一个限制：如果应用程序处于暂停状态，我不应该开始流式传输。为了实现这一点，我在我的 BaseActivity 中为 CONNECTIVITY_ACTION 注册了一个接收器，并在 onPause() 中注册了相同的 unregisterReceiver。

如果我运行这段代码，onResume() 会无限调用。什么地方出了错？请帮帮我。

提前致谢！

```
@Override 
protected void onResume() {
        System.out.println("onResume() in BaseActivity"); 
        registerReceiver(connectivityReceiver, new IntentFilter(
                ConnectivityManager.CONNECTIVITY_ACTION));

        super.onResume();
} 
```

并在 onPause()

```
@Override
    protected void onPause() {
        System.out.println("onPause() in BaseActivity");
        unregisterReceiver(this.connectivityReceiver);
        super.onPause();
    } 
```

这是我的广播接收器

```
private BroadcastReceiver connectivityReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {

                BaseActivity.this.connectionChange(netCheckerHelper(context));
        }
    }; 
```

# html - Chrome 21 上的单选按钮白色背景、flash 对象和 iFame

> ID：11865719
> 
> 赞同：3
> 
> 时间：2012-08-08T13:35:15.473
> 
> 标签：html, css, flash, google-chrome, iframe

当我们混合 Flash 对象和 UI 元素（如单选按钮）并将它们嵌入 iframe 时，就会出现问题。在 Chrome 21/Windows 上报告了问题。在 Chrome 20 上正常工作。

演示链接：

*   在 iFrame 上：http: [//jsbin.com/agaxur/1/edit](http://jsbin.com/agaxur/1/edit)
*   没有 iFrame：http: [//jsbin.com/agaxur/1/](http://jsbin.com/agaxur/1/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T15:53:23.677

我也有确切的问题。但我没有任何想法来解决它。

但是，我使用了一个`jQuery plugin`名为[prettyCheckboxes](http://www.no-margin-for-errors.com/projects/prettycheckboxes/) 作为解决方法，并使用了来自 [Niceforms](http://www.emblematiq.com/lab/niceforms/demo/niceforms.html)的透明单选按钮图像。

# visual-studio-2010 - 创建新的 VS2010 控制台应用程序时找不到 Solrnet 命名空间

> ID：11865730
> 
> 赞同：1
> 
> 时间：2012-08-08T13:35:46.560
> 
> 标签：visual-studio-2010, console-application, solrnet

我收到以下错误：

“找不到类型或命名空间名称‘SolrNet’（您是否缺少 using 指令或程序集引用？）”

我在 VS2010 中创建了一个新的控制台应用程序并在 program.cs 中添加了这一行

“使用 SolrNet；”

我已将项目引用添加到 SolrNet.dll 版本 0.4.0.2002。

某些版本的 solr 需要引用 system.web，但我不想这样做，我相信这个版本没有这个要求。我使用了对象浏览器并添加了对 Nhibernate、Castle、Niject 和所有其他对象的引用。

如何让我的控制台应用程序识别 SolrNet dll？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:35:46.560

在项目属性中，将 Target Framework 从 .NET Framework 4 Client Profile 更改为简单的 .NET Framework 4

# c# - asp.net 身份验证问题基本/windows

> ID：11865738
> 
> 赞同：0
> 
> 时间：2012-08-08T13:36:23.643
> 
> 标签：c#, asp.net, authentication, iis, basic-authentication

我正在查看一个 Intranet 站点（不是我开发的），它启用了基本身份验证。它需要更改为 Windows 身份验证，我已经在 IIS 中完成了此操作。

基本上我已经安装了 Visual Studio 2010 远程调试器来检查为什么它使用基本身份验证可以正常工作，但是当更改为 Windows 时它不会。

它挂在尝试的第一行，错误 401 未经授权：

```
 oReq.ContentType = "application/x-www-form-urlencoded";
        oReq.Method = "POST";

        // Set the script timeout to a desired value. Timeout value is specified in milliseconds.
        oReq.Timeout = 60000;

        WindowsIdentity wId = (WindowsIdentity)HttpContext.Current.User.Identity;
        WindowsIdentity wIdb4 = WindowsIdentity.GetCurrent();
        string name = wIdb4.Name;
        WindowsImpersonationContext wIdCon = wId.Impersonate();

        // Set credentials to use for this request. 
        oReq.Credentials = System.Net.CredentialCache.DefaultNetworkCredentials;

        Stream oDataStream = oReq.GetRequestStream();

        // Use EncodeParam to enocde the parameters passed in the URL
        String sParam = "...";

        UTF8Encoding encoding = new UTF8Encoding();
        Byte[] Buffer = encoding.GetBytes(sParam);
        oDataStream.Write(Buffer, 0, Buffer.Length);
        oDataStream.Close();
try
   {
      HttpWebResponse oResp = (HttpWebResponse)oReq.GetResponse();
      ....
   } 
```

没有意义，为什么它会通过基本身份验证而不是 Windows？此外，当我在本地机器 asp.net 服务器上运行该站点时，它工作正常。

# javascript - 如何在此代码中停止事件冒泡？

> ID：11865740
> 
> 赞同：3
> 
> 时间：2012-08-08T13:36:28.037
> 
> 标签：javascript, jquery, bpopup

```
$('#div1').on('click', '#otherDiv1', function(event){       
        //Show popup
        $('#popupDiv').bPopup({
            modalClose: false,
            follow: [false, false],
            closeClass: 'close'
        });             
        event.stopPropagation();

        $('#div2').on('click', '#otherDiv2', function (event) { 

             // here is ajax request         

            // close popup          
            $('#popupDiv').bPopup().close();
            event.stopPropagation();
        });

    } 
```

多次点击 otherDiv2 调用 ajax 函数，如何停止？

HTML 代码

```
<div id="div2">

<div id="div1"><div id="otherDiv1">Click</div></div>

    <div id="popupDiv"><div class="close">X</div> 
        <input id="otherDiv2" name="otherDiv2" type="submit" value="Click" />   
    </div>
</div> 
```

popupDiv 是动态创建的

当我单击 otherDviv1 时，弹出窗口打开，里面是一个用于 ajax 请求的按钮。当我单击按钮时，会调用一个请求并关闭弹出窗口。如果我再单击一次 otherDiv1 和按钮，则会调用两次请求，依此类推。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T13:38:18.447

它没有必要`click`在另一个中绑定第二个`click`。您的代码绑定`click`到`#otherDiv2`每个`click`到`#otherDiv1`. 对于以下过程不需要`stopPropagation()`.

```
$('#div1').on('click', '#otherDiv1', function(event) {
    //Show popup
    $('#popupDiv').bPopup({
        modalClose: false,
        follow: [false, false],
        closeClass: 'close'
    });
});

$('#div2').on('click', '#otherDiv2', function(event) {

    // here is ajax request         
    // close popup          
    $('#popupDiv').bPopup().close();
}); 
```

但是，如果您需要在另一个事件中绑定事件，则首先取消绑定该事件`#otherDiv2`，然后再次绑定。

```
$('#div1').on('click', '#otherDiv1', function(event) {
    //Show popup
    $('#popupDiv').bPopup({
        modalClose: false,
        follow: [false, false],
        closeClass: 'close'
    });

    $('#div2').off('click').on('click', '#otherDiv2', function(event) {

      // here is ajax request         
      // close popup          
      $('#popupDiv').bPopup().close();
   });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:43:10.863

我想你可以使用

```
event.stopImmediatePropagation() 
```

停止冒泡。

[http://api.jquery.com/event.stopImmediatePropagation/](http://api.jquery.com/event.stopImmediatePropagation/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:42:25.820

如果您使用相当新版本的 jQuery，每个 ajax 请求都会返回[Deferred](http://api.jquery.com/category/deferred-object/)对象，您可以将其存储在单击处理程序的外部范围中并进行分析，以便取消现有请求或只是不启动新请求。

还有一个称为节流的概念，并且有适用于您的 jquery[插件](http://benalman.com/projects/jquery-throttle-debounce-plugin/)。

# java - 我对 java 线程和 KeyEvent 有疑问？

> ID：11865744
> 
> 赞同：2
> 
> 时间：2012-08-08T13:36:50.227
> 
> 标签：java, multithreading, swing, blocking, keyevent

我需要一些关于我的程序的帮助。我的主线程中有一个阻塞功能等待用户单击“Enter”。然后，当用户按下回车键时，应该触发 keypressed 事件，这将解除阻塞功能。但是，当程序遇到阻塞功能时，它只是冻结并且不注册按键事件。

所以，我的问题是，一个事件是否是可运行的，只要用户点击进入，它就会被添加到线程中？如果是这样，我的代码应该可以工作，对吧？如果不是这种情况，并且每个事件都不是一个单独的线程，那么任何人都可以告诉我如何在这里解决我的问题吗？我的阻塞功能：

```
public String getInput() {
    synchronized(waitObject) {
        try {
            System.out.println("waiting");
            waitObject.wait(); // throws exception, cba to add it here
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
    return(myString);
} 
```

我的按键监听器代码：

```
public void keyPressed(KeyEvent e) {
    System.out.println("key pressed");
    char c = e.getKeyChar();
    if (c == e.VK_ENTER) {
        System.out.println("Enter pressed");
        synchronized(waitObject) {
            waitObject.notifyAll();
        }
    }
} 
```

以及获取输入的函数：

```
private String getCommand() {
    System.out.println("getting command");
    CommandField command = new CommandField((JFrame)(this));
    command.setPreferredSize(new Dimension(getWidth(), 30));
    m_panel.add(command, BorderLayout.NORTH);
    validate();
    command.requestFocus();
    System.out.println(command.getInput());

    return null;
} 
```

这个函数是从另一个 keylistener 调用的：

```
public class Listener implements KeyListener {
    public void keyPressed(KeyEvent e) {
        if (e.getKeyCode() == KeyEvent.VK_F2) {
            System.out.println(getCommand());
        }

    }
    public void keyReleased(KeyEvent e) {

    }
    public void keyTyped(KeyEvent e) {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:12:44.360

好的，`getCommand()`在事件线程上调用，然后`getInput()`在同一个线程上调用，然后`Object#wait()`在事件线程上调用，所以是的，你正在绑定事件线程并有效地冻结你的程序。

这些都不是必需的，如果您使用***事件驱动编程***的概念进行编码，则可以进行更简单的修复。您不想`wait()`在 Swing GUI 中调用并且在您的情况下不需要调用它，而是希望更改程序根据其状态响应输入的方式。如果您告诉我们更多关于您试图引起的确切行为的信息，我们可能会帮助您找到更好的解决方案。

**编辑**
考虑使用 JOptionPane 或模态 JDialog 来显示“阻塞”窗口，该窗口会停止主程序，直到对话框被处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T21:06:42.173

从 开始[`ImageApp`](https://stackoverflow.com/a/5129757/230513)，我在构造函数中添加了以下[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。按键时会`show()`弹出菜单`Enter`。您可以更改任意位置以适合您的使用。

```
this.getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "showPopup");
this.getActionMap().put("showPopup", new AbstractAction("showPopup") {

    @Override
    public void actionPerformed(ActionEvent e) {
        popup.show(ImageApp.this, 42, 42);
    }
}); 
```

附录：调出模态输入对话框，如下所示：

```
this.getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "dialog");
this.getActionMap().put("dialog", new AbstractAction("dialog") {

    @Override
    public void actionPerformed(ActionEvent e) {
        String value = JOptionPane.showInputDialog("What?");
        System.out.println(value);
    }
}); 
```

# sql - 优化我的（简单）SQL 查询（连接）

> ID：11865745
> 
> 赞同：1
> 
> 时间：2012-08-08T13:36:51.313
> 
> 标签：sql, join, firebird

我有一个查询似乎需要很长时间才能执行。自从我做了非常简单的选择/更新和 v.simple 连接之外的任何事情已经有一段时间（几年）了，所以我在这里有点生疏了！

```
SELECT count(distinct r.TAGCODE)
FROM RAWREADS r
where r.TAGCODE NOT IN (
    select distinct r.TAGCODE 
    from RAWREADS r, checkpoints c, guards g, INCIDENTITEMS i
        where r.TAGCODE = c.TAGNO
        or    r.TAGCODE = g.IDTAG
        or    r.TAGCODE = i.IDTAG
    ); 
```

如果缓慢（几秒钟），内部选择似乎可以正常工作，但是一旦我添加外部“不在其中的计数”，我最终不得不终止我的数据库连接 - 所以对应用程序没有好处！;)

我希望上面的查询清楚我想要实现的目标...获取所有 rawread 标记，其中该标记与检查点/警卫/事件中的相应列不匹配。

如果这很重要，我正在使用 Flamebird 数据库服务器（没有选择）和 FlameRobin 来运行查询。

在某些时候，我还需要向外部选择添加一个查询，以确保我不会选择任何标记代码为空或“”的 rawreads。

我已经从 out select 中删除了“char_length(tagcode) > 0”标准，希望加快速度，但我认为我的问题比这更根本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:45:43.933

许多数据库（可能还有 Firebird）无法轻松优化 NOT IN 条件。因此，您可能会尝试将其重写为 NOT EXTISTS。

另外看看内部选择，我认为你加入的方式产生了太多的行。这不是真正的连接，但也不是笛卡尔积。无论如何，我可以想象在那里做一个 UNION 也更有效率。

所以试试这个：

```
SELECT count(distinct r.TAGCODE)
FROM RAWREADS r
where NOT EXISTS (
    select 1
    from checkpoints c
    where c.tagno = r.tagcode
    union all
    select 1 
    from guards g
    where g.idtag = r.tagcode
    union all 
    select 1 
    from INCIDENTITEMS i
    where i.idtag = r.tagcode); 
```

如果你有索引`checkpoints(tagno)`，`guards(idtag)`那`incidentitems(idtag)`应该运行得相当快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T13:42:16.210

`NOT IN`将为其中的每一行调用内部子查询`RAWREADS`，因此该查询运行缓慢。如果您作为过程运行，则将子查询结果转储到临时表中并与该临时表进行内部连接并执行否定条件`TAGCODE`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T13:42:19.977

```
SELECT count(distinct r.TAGCODE)
FROM RAWREADS r
where NOT EXISTS (
    select *  
    from  checkpoints c, guards g, INCIDENTITEMS i
        where r.TAGCODE = c.TAGNO
        or    r.TAGCODE = g.IDTAG
        or    r.TAGCODE = i.IDTAG
    ); 
```

如果 sql 服务器

```
SELECT count(distinct r.TAGCODE)
FROM RAWREADS r
where NOT EXISTS (
    select TOp 1 1   
    from  checkpoints c, guards g, INCIDENTITEMS i
        where r.TAGCODE = c.TAGNO
        or    r.TAGCODE = g.IDTAG
        or    r.TAGCODE = i.IDTAG
    ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T14:30:45.567

下面的代码与 Firebird 2.5 兼容，而且速度很快。我现在无法测试它，但这是我的想法。它使用 CTR 来简化子查询代码。

```
with SQ1 as (
  select distinct r.TAGCODE as TAGCODE
  from RAWREADS r, checkpoints c, guards g, INCIDENTITEMS i
      where r.TAGCODE = c.TAGNO
      or    r.TAGCODE = g.IDTAG
      or    r.TAGCODE = i.IDTAG
)

SELECT count(distinct r.TAGCODE)
FROM RAWREADS r
left join SQ1 on (r.TAGCODE = SQ1.TAGCODE)
where SQ1.TAGCODE is NULL 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T10:09:33.763

在几乎所有 RDBMS 中，获得优化的 NOT IN 子句的最佳方法是在 WHERE 子句中编写带有失败条件的 LEFT OUTER JOIN，如下所示：

```
SELECT count(distinct r.TAGCODE)
FROM RAWREADS r
left outer join checkpoints c on r.TAGCODE = c.TAGNO
left outer join guards g on r.TAGCODE = g.IDTAG
left outer join INCIDENTITEMS i on r.TAGCODE=i.IDTAG
where 
  c.TAGNO is null AND
  g.IDTAG is null AND
  i.IDTAG is null 
```

从一般的角度来看，NOT IN 子句如下：

```
select * from TABLEA 
where TABLEA.ID NOT IN (SELECT ID from TABLEB) 
```

可以成功转换为

```
select TABLEA.*
from TABLEA 
left outer join TABLEB ON TABLEA.ID=TABLEB.ID
where TABLEB.ID is null 
```

如果 TABLEB 在列 ID 上有一个索引，则查询在从 TABLEA 中检索所有在 TABLEB 中没有对应项的记录方面非常快

# r - 如何在 R 中使用 readLines 删除空白行？

> ID：11865747
> 
> 赞同：5
> 
> 时间：2012-08-08T13:36:59.243
> 
> 标签：r

如果文件中有很多空行，如何在 R 中用 readLines 删除空行？

我知道我可以用`blank.lines.skip=T`in`read.table`删除它， in 怎么样`readLines`？

另外，如何`\n`使用 readLines 删除最后一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T13:53:25.307

如何使用选择运算符从 readLines 返回的字符向量中查找非空行？

```
# character vector mimicking readLine output, lines 2, 4, and 5 are blank
lines <- c("aaa", "", "ccc", "", "")
# [1] "aaa" ""    "ccc" ""    ""

# select lines which are blank
lines[which(lines=="")]
# [1] "" "" ""

# conversely, lines which are not
lines[which(lines!="")]
# [1] "aaa" "ccc" 
```

我在上面使用了假`readLine`数据，但实际上我没有看到 readLines 返回`\n`空行或最后一行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T15:06:34.063

一个可重现的例子：

```
 Z <- readLines(textConnection("line1 , stuff, other stuff\nline2 ,junk\nline3, a blank two lines follow\n\n\nline6\n"))
>     Z
[1] "line1 , stuff, other stuff"      "line2 ,junk"                     "line3, a blink two lines follow"
[4] ""                                ""                                "line6"                          
[7] ""                               
>     Z1 <- Z[sapply(Z, nchar) > 0] # the zero length lines get removed.
> Z1
[1] "line1 , stuff, other stuff"      "line2 ,junk"                     "line3, a blank two lines follow"
[4] "line6" 
```

@Andrie 建议你做这样的事情：

```
> Z <- scan(textConnection("line1 , stuff, other stuff\nline2 ,junk\nline3, a blink two lines follow\n\n\nline6\n"), 
            what="", sep="\n",blank.lines.skip=TRUE)
Read 4 items
>     Z
[1] "line1 , stuff, other stuff"      "line2 ,junk"                     "line3, a blink two lines follow"
[4] "line6" 
```

# android - Phonegap存储坐标

> ID：11865748
> 
> 赞同：0
> 
> 时间：2012-08-08T13:37:03.373
> 
> 标签：android, database, cordova, coordinates

我正在使用 Cordova 2.0.0，我正在 Android 2.2 上进行测试。

因此，经过 2 个线程和大量搜索后，我终于能够获得我的地理位置并将其显示在谷歌地图中。现在每次我打开应用程序时，它都会获取我的地理位置并在谷歌地图上用标记显示它。现在我希望程序存储数据。这是我第一次使用 html5,JS。当我制作本机应用程序时，我只使用了 SQLite 数据库。我将如何继续存储数据？

这是我到目前为止所拥有的，任何帮助教程、示例、帮助和建议将不胜感激。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>

     <head>

<meta name="viewport" content="width=device-width; height=device-height; user-scalable=no" />

<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>Beer Me</title>
<link rel="stylesheet" href="/master.css" type="text/css" media="screen" />
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
<script type="text/javascript">

function onLoad() {
document.addEventListener("deviceready", onDeviceReady, false);
}

function onDeviceReady() {
    navigator.geolocation.getCurrentPosition(onSuccess, onError,{'enableHighAccuracy':true,'timeout':10000});

}

//GEOLOCATION
var onSuccess = function(position) {
    alert('Latitude: '  + position.coords.latitude   + '\n' +
          'Longitude: ' + position.coords.longitude  + '\n');

    var myLat = position.coords.latitude;
    var myLong = position.coords.longitude;

    //MAP
    var mapOptions = {
        center: new google.maps.LatLng(myLat, myLong),
        zoom: 14,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"),
                                  mapOptions);

};

// onError Callback receives a PositionError object
//
function onError(error) {
    alert('code: '    + error.code    + '\n' +
          'message: ' + error.message + '\n');
}

     </script>
     </head>
     <body onload="onLoad()"> 
     <div id="map_canvas" style="width:100%; height:100%"></div>
     </body>
     </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:56:22.013

您可以像往常一样使用简单的 SQLite 数据库：http: [//docs.phonegap.com/en/2.0.0/cordova_storage_storage.md.html#Storage](http://docs.phonegap.com/en/2.0.0/cordova_storage_storage.md.html#Storage)

# php - 设置间隔不起作用

> ID：11865753
> 
> 赞同：0
> 
> 时间：2012-08-08T13:37:19.280
> 
> 标签：php, jquery, ajax

我试图进行实时聊天，但我遇到了一个问题：setInterval（用于检查新消息）不起作用：/...
这是我的 jQuery 代码

```
 $(function(){

        setInterval(function() {
            $.ajax({
                url: "./ajax/checknew.php",
                success: function(data) {
                    $("#chMsgCont").append(data);
                }
            });
        },1000);

        $('#chMsgCont').load('./ajax/msg.php', function() {
            var div = $('#chMsgCont');
            var o = div.offset().top;  
            div.scrollTop( o + 12302012 );
        });
}); 
```

我的 msg.php

```
<?php
include("../system/config.site.php");
$query = mysql_query("SELECT * FROM chat_msg ORDER BY timestamp ASC");
while($p = mysql_fetch_assoc($query)) {
    $auth = mysql_fetch_assoc(mysql_query("SELECT * FROM chat_users WHERE id = '".$p['auth_id']."'"));
    $update = mysql_query("UPDATE chat_msg SET new = 'no' WHERE id = '".$p['id']."'");
?>
<div class="chatMsg">
<p id="chatPMsg">
<span class="chatTime"><?php echo date("H:i", $p['timestamp']); ?></span>
<b><?php echo $auth['name']." ".$auth['surname']; ?></b><br />
<?php echo stripslashes($p['msg']); ?>
</p>
<p id="chatImg">
<img src="./images/thumb<?php echo $p['auth_id']; ?>.png" />
</p>
<div style="clear:both;"><!– –&gt; </div>
</div>
<?php
}
?> 
```

我的 checknew.php

```
<?php
include("../system/config.site.php");
$query = mysql_query("SELECT * FROM chat_msg WHERE new = 'yes' ORDER BY timestamp ASC");
if(mysql_num_rows($query) > 0) {
while($p = mysql_fetch_assoc($query)) {
    $auth = mysql_fetch_assoc(mysql_query("SELECT * FROM chat_users WHERE id = '".$p['auth_id']."'"));
?>
<div class="chatMsg">
<p id="chatPMsg">
<span class="chatTime"><?php echo date("H:i", $p['timestamp']); ?></span>
<b><?php echo $auth['name']." ".$auth['surname']; ?></b><br />
<?php echo stripslashes($p['msg']); ?>
</p>
<p id="chatImg">
<img src="./images/thumb<?php echo $p['auth_id']; ?>.png" />
</p>
<div style="clear:both;"><!– –&gt; </div>
</div>
<?php
}
} else {
    echo "";
}
?> 
```

setInterval 拒绝附加查询结果：/，这怎么可能？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-08T13:38:55.637

是否必须调用 window.setInterval() ？

# ruby - Watir：在复选框中选择一个项目

> ID：11865758
> 
> 赞同：1
> 
> 时间：2012-08-08T13:37:28.703
> 
> 标签：ruby, rubygems, watir

我正在使用 watir-webdriver，我试图从下面的 HTML 代码中选择一个框，例如“LC”作为输入，但我在让它工作时遇到了一些麻烦。请任何人有任何想法。谢谢

```
browser.checkbox(:value => 'LC').set 
```

错误消息 C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-2.0.4/lib/watir/element.rb:78:in `asse rt_exists': Unable to locate element, using {:value =>“LC”}（Watir::Exception::Un knownObjectException）

代码

```
<TD align="right">Reason:&nbsp;&nbsp;</TD>
                    <TD><style type="text/css"> 
select, ul { height: 40px; overflow: auto; width: 205px; border: 1px solid #000; }
ul { list-style: none; margin: 0; padding: 0; overflow-x: hidden;}
li { margin: 0; padding: 0; }
ul li {
position: relative;
}
li ul {
position: absolute;
left: 149px;
top: 0;
display: none;
}
label { display: block; color: WindowText; background-color: Window; margin:0; 
padding:0; width: 100%; }
label:hover { background-color: Highlight; color: HighlightText; display: block; }
</style>

<script type="text/javascript"> 
function appendValue(checkedValue) {
findFormElement("reason").value = ""
if(document.getElementById("CS").checked){
findFormElement("reason").value= findFormElemen"reason").value+document.getElementById   ("CS").id;
}
if(document.getElementById("LC").checked){
findFormElement("reason").value = findFormElement("reason").value + document.getElementById("LC").id;
}
if(document.getElementById("ND").checked){
    findFormElement("reason").value = findFormElement("reason").value +  document.getElementById("ND").id;
}
if(document.getElementById("NG").checked){
    findFormElement("reason").value = findFormElement("reason").value + document.getElementById("NG").id;
}
if(document.getElementById("NC").checked){
    findFormElement("reason").value = findFormElement("reason").value + document.getElementById("NC").id;
}
if(document.getElementById("WD").checked){
findFormElement("reason").value = findFormElement("reason").value + document.getElementById("WD").id;
}
};
</script>
<input name="reason" type="hidden" value></select><ul id="multisel">
<li><label for="CS"><input type="checkbox" name="CS" id="CS" onClick="appendValue   (&quot;CS&quot;)"/>Cannot Supply Within 2 Hours</label></li>
<li><label for="LC"><input type="checkbox" name="LC" id="LC" onClick="appendValue(&quot;LC&quot;)"/>Location Closed</label></li>
<li><label for="ND"><input type="checkbox" name="ND" id="ND" onClick="appendValue(&quot;ND&quot;)"/>No Drivers Available</label></li>
<li><label for="NG"><input type="checkbox" name="NG" id="NG" onClick="appendValue(&quot;NG&quot;)"/>No Vehicle Group Available</label></li>
<li><label for="NC"><input type="checkbox" name="NC" id="NC" onClick="appendValue(&quot;NC&quot;)"/>No Vehicles Available</label></li>
<li><label for="WD"><input type="checkbox" name="WD" id="WD" onClick="appendValue(&quot;WD&quot;)"/>Weekend Delivery</label></li>
</ul></TD>

select, ul { height: 40px; overflow: auto; width: 205px; border: 1px solid #000; }
ul { list-style: none; margin: 0; padding: 0; overflow-x: hidden;}
li { margin: 0; padding: 0; }
ul li {
position: relative;
}
li ul {
position: absolute;
left: 149px;
top: 0;
display: none;
}
label { display: block; color: WindowText; background-color: Window; margin: 0;   padding: 0; width: 100%; }
label:hover { background-color: Highlight; color: HighlightText; display: block; }
</style>

<script type="text/javascript"> 
function appendValue(checkedValue) {
findFormElement("reason").value = ""
if(document.getElementById("CS").checked){
findFormElement("reason").value = findFormElement("reason").value +  document.getElementById("CS").id;
}
if(document.getElementById("LC").checked){
    findFormElement("reason").value = findFormElement("reason").value + document.getElementById("LC").id;
}
if(document.getElementById("ND").checked){
    findFormElement("reason").value = findFormElement("reason").value + document.getElementById("ND").id;
}
if(document.getElementById("NG").checked){
    findFormElement("reason").value = findFormElement("reason").value +  document.getElementById("NG").id;
}
if(document.getElementById("NC").checked){
    findFormElement("reason").value = findFormElement("reason").value + document.getElementById("NC").id;
}
if(document.getElementById("WD").checked){
    findFormElement("reason").value = findFormElement("reason").value + document.getElementById("WD").id;
}
};
</script>
<input name="reason" type="hidden" value></select><ul id="multisel">
<li><label for="CS"><input type="checkbox" name="CS" id="CS" onClick="appendValue   (&quot;CS&quot;)"/>Cannot Supply Within 2 Hours</label></li>
<li><label for="LC"><input type="checkbox" name="LC" id="LC" onClick="appendValue(&quot;LC&quot;)"/>Location Closed</label></li>
<li><label for="ND"><input type="checkbox" name="ND" id="ND" onClick="appendValue(&quot;ND&quot;)"/>No Drivers Available</label></li>
<li><label for="NG"><input type="checkbox" name="NG" id="NG" onClick="appendValue(&quot;NG&quot;)"/>No Vehicle Group Available</label></li>
<li><label for="NC"><input type="checkbox" name="NC" id="NC" onClick="appendValue(&quot;NC&quot;)"/>No Vehicles Available</label></li>
<li><label for="WD"><input type="checkbox" name="WD" id="WD" onClick="appendValue(&quot;WD&quot;)"/>Weekend Delivery</label></li>
</ul></TD> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T13:55:40.097

复选框没有值；但是他们每个人都有一个`id`. 尝试

```
browser.checkbox(:id => 'LC').set 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-30T09:29:28.153

如果您最终在这里想要取消选择复选框，方法很**清楚**

# jquery - jQuery滑块向上/向下+ Twitter小部件冲突？

> ID：11865760
> 
> 赞同：0
> 
> 时间：2012-08-08T13:37:39.207
> 
> 标签：jquery, html, css, twitter, widget

这是一个[jsFiddle](http://jsfiddle.net/7PBmq/2/)代码，如果还没有插入[Twitter 小部件，它可以正常工作。](http://twitter.com/about/resources/widgets/widget_profile/)它所做的是向下和向上滑动内容（单击链接“单击此处”）。

[但是，一旦我从获取 Twitter 小部件](http://twitter.com/about/resources/widgets/widget_profile/)中插入默认代码（请参阅 html 部分，[这](http://jsfiddle.net/7PBmq/3/)是唯一更改的部分，添加了 Twitter 代码），它就不起作用，它不会向下滑动。

为什么 Twitter 小部件添加时它不向下滑动，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:52:10.110

[韦尔普，这对我来说看起来不错](http://jsfiddle.net/7PBmq/4/)。

我不知道...我只是移动了脚本，正确添加了资源，并添加了一个名为`<div id="twitterbox">`

然后在你的新 TWTR 脚本中，我定位了我希望 twitter 提要加载到的元素

```
id: 'twitterbox' 
```

然后我运行了 jsFiddle，它运行良好。也许这就是你所缺少的？

# javascript - 如何在函数运行之前隐藏 CSS？

> ID：11865762
> 
> 赞同：0
> 
> 时间：2012-08-08T13:38:01.067
> 
> 标签：javascript, jquery, css, mootools

我有一个基本功能，当没有点击答案时，它会在 div id“错误”中显示一条错误消息。这很好用，但是当我有背景颜色和图像时，会在 div 上显示样式。我正在使用 jquery 和 moo 工具，

在确定答案之前，有没有办法隐藏这种风格。

```
 <style type="text/css>

    #error {

      border: 1px solid;
      margin: 10px 0px;
      padding:15px 10px 15px 50px;
      background-repeat: no-repeat;
      background-position: 10px center;
      color: #D8000C;
      background-color: #FFBABA;
      background-image: url('../images/error.png');

    }
    </style>

    <div id="error"></div>

    <script type="text/javascript>
    function showAnswerAlert() {
        $('error').set('html', '<strong>Please select an answer above.<strong>')

    }
    function clearErrorBox() {
        $('error').set('html','');

    }
    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:40:33.920

最初隐藏 div 并显示在 showAnswerAlert 或您需要的任何地方

```
<div id="error" style="display:none"></div>

function showAnswerAlert() {
    $('error').set('html', '<strong>Please select an answer above.<strong>');
    $('error').show();
} 
```

或在文档准备好时隐藏错误 div

```
$(function(){
    $('error').hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T01:19:26.507

hide() 和 show() 不起作用的原因是因为那些 jQuery 函数，如果你使用 mootools，并且想使用“hide()”和“show()”，你需要编写如下函数：

```
window.addEvent('domready', function() {
    Element.implement({
  //implement show
    show: function() {
      this.setStyle('display','');
    },
    hide: function() {
      this.setStyle('display','none');
    }
  });
}); 
```

或者您可以这样做以显示：

```
$('error').setStyle('display','block'); 
```

这要隐藏：

```
$('error').setStyle('display','none'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:42:32.983

听起来这是对选定项目的验证。验证可以通过多种方式完成，但建议您查看 HTML5 验证，这可能就是您所需要的：

[http://diveintohtml5.info/forms.html](http://diveintohtml5.info/forms.html)

# powershell - 为什么远程 PowerShell 会话中的 TFS 身份验证失败？

> ID：11865764
> 
> 赞同：4
> 
> 时间：2012-08-08T13:38:02.050
> 
> 标签：powershell, tfs, powershell-remoting

当我直接在机器上运行以下 PowerShell 脚本时

```
Add-Type -Path "C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\ReferenceAssemblies\v2.0\Microsoft.TeamFoundation.VersionControl.Client.dll"

$basePath = "http://magv-dev-tfs:8080/tfs/MccCollection"
[Microsoft.TeamFoundation.Client.TeamFoundationServerFactory]::GetServer($basePath) 
```

我得到一个对象，其中设置了字段 AuthenticatedUserName、AuthenticatedUserDisplayName、AuthenticatedUserIdentity。

当我使用相同的凭据从同一台机器上的其他机器上的远程 PowerShellTab 中运行相同的脚本时，这 3 个字段是 emply：

```
AuthenticatedUserName           : 
AuthenticatedUserDisplayName    : 
AuthenticatedUserIdentity       : 
Uri                             : http://my-tfs:8080/tfs/mcccollection
TimeZone                        : System.CurrentSystemTimeZone
InstanceId                      : 
Name                            : my-tfs\MccCollection
Credentials                     : System.Net.SystemNetworkCredential
Culture                         : de-DE
SessionId                       : 7c76a150-f681-4b3c-9b0d-2836a3a5a908
ClientCacheDirectoryForInstance : 
HasAuthenticated                : False
TfsTeamProjectCollection        : magv-dev-tfs\MccCollection 
```

编辑：

至少我找到了一个解决[方法如何使用 [Microsoft.TeamFoundation.Client.TeamFoundationServerFactory]::GetServer 和来自 Powershell 的凭据](https://stackoverflow.com/questions/11864682/how-to-use-microsoft-teamfoundation-client-teamfoundationserverfactorygetser/11877883#11877883)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:44:53.823

在调用命令调用中添加 -credential 参数？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T17:49:43.027

使用 Visual Studio TFS 时，PowerShell 可以访问您在连接到项目时注册的连接。 [RegisteredTfsConnections](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.client.registeredtfsconnections.aspx)提供对已注册连接的访问​​，因此您不必费心将凭据放入代码中。

以下代码片段连接到 TFS 服务器，并返回一个 WorkItem。

```
[System.Reflection.Assembly]::LoadWithPartialName("Microsoft.TeamFoundation.Client")
[System.Reflection.Assembly]::LoadWithPartialName("Microsoft.TeamFoundation.WorkItemTracking.Client")
$regProjCollection = [Microsoft.TeamFoundation.Client.RegisteredTfsConnections]::GetProjectCollection("tfs2010\TFS2010-MyCollection")
$tfsTeamProjCollection = [Microsoft.TeamFoundation.Client.TfsTeamProjectCollectionFactory]::GetTeamProjectCollection($regProjCollection)
$ws = $tfsTeamProjCollection.GetService([type]"Microsoft.TeamFoundation.WorkItemTracking.Client.WorkItemStore")
$ws.GetWorkItem(2525)

```

# css - 如何从 Drupal 7 中的 H 标签中删除换行符？

> ID：11865768
> 
> 赞同：0
> 
> 时间：2012-08-08T13:38:16.567
> 
> 标签：css, drupal, tags

我已经尝试了 h2 的所有明显设置但没有成功 - 我仍然得到换行符！

这些是我尝试过但没有成功的 CSS 设置：

```
display: inline;
margin: 0px;
padding: 0px;
white-space:nowrap; 
```

还有其他解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:47:05.807

您应该使用`display: inline`h 标签，并确保连续元素也是内联元素（即 a `span`，而不是 a `p`）。

[在此处](http://jsfiddle.net/dDAzm/)查看实时示例

# mongodb - 如何以不区分大小写的方式在 mongo 中索引用户名？

> ID：11865770
> 
> 赞同：8
> 
> 时间：2012-08-08T13:38:19.607
> 
> 标签：mongodb

我正在编写一个网络服务，用户可以在其中选择一个用户名，该用户名必须是不区分大小写的唯一用户名。但是，我想允许他们使用区分大小写的用户名版本。

在插入时检查用户名没有不区分大小写的重复项的最佳方法是什么？我目前看到两种方法：

*   存储用户输入的小写版本和另一个版本，并仅索引小写版本
*   仅存储带有用户输入的大小写的版本并将其小写以进行比较，这违背了我认为索引的目的

有没有更好的办法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T14:43:22.443

存储最初输入的用户名和规范版本（应用程序的小写）是完全合理的。只需确保在设置用户名时更新模型中的规范字段，并通过规范字段的唯一索引检查是否违反约束。

此解决方案（原始和规范字段）有意义的另一种情况是文章，其中可能会重复使用相同的标题，但 slug（用于 URL）必须是唯一的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-01T15:41:20.853

MongoDB 3.4 现在包括创建真正不区分大小写的索引的能力。它是通过指定强度为 2 的排序规则生成的。

可能最简单的方法是在数据库本身上设置排序规则。然后所有查询都继承该排序规则并将使用它：

```
db.createCollection("cities", { collation: { locale: 'en_US', strength: 2 } } )
db.cities.createIndex( { city: 1 } ) // inherits the default collation
db.cities.find({city:"new york"}) //inherits default collation 
```

或者您可以逐个索引地执行此操作：

```
db.myCollection.createIndex({city: 1}, {collation: {locale: "en", strength: 2}}); 
```

并像这样使用它：

```
db.myCollection.find({city: "new york"}).collation({locale: "en", strength: 2}); 
```

欲了解更多信息：[https ://jira.mongodb.org/browse/SERVER-90](https://jira.mongodb.org/browse/SERVER-90)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-07T19:41:09.230

从**3.4**版（即将发布）开始，mongodb 似乎将支持*不区分大小写的索引。*请参阅此[票证](https://jira.mongodb.org/browse/SERVER-90)和[整理](https://docs.mongodb.com/master/reference/collation/)文档。

 **在从上述票证中获得的示例中，我们看到在and中`collation`使用**强度为 2**，执行不区分大小写的搜索：`createIndex``find`

```
> db.myCollection.createIndex({city: 1}, {collation: {locale: "en", strength: 2}});
> db.myCollection.insert({_id: 1, city: "New York"});
> db.myCollection.insert({_id: 2, city: "new york"});
> db.myCollection.find({city: "new york"}).collation({locale: "en", strength: 2});
{ "_id" : 1, "city" : "New York" }
{ "_id" : 2, "city" : "new york" } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-08T14:04:43.890

索引与它没有任何关系，索引可以使查找（搜索）更快。

```
db.userTable.find( { storedUserName: /^userEnteredUserName$/i } ); 
```

见[https://www.google.co.uk/search?q=mongodb+case+insensitive+search](https://www.google.co.uk/search?q=mongodb+case+insensitive+search)**

# xml - 使用值枚举验证 XML 属性，包括“”

> ID：11865771
> 
> 赞同：1
> 
> 时间：2012-08-08T13:38:26.337
> 
> 标签：xml, xsd, xsd-validation

我正在尝试验证传入的 XML。XML 有一个属性***verb=""***。XSD 有一个可能的***动词***值的枚举，它不包括***""***选项：

```
<xsd:attribute name="verb" use="required">
    <xsd:simpleType>
        <xsd:restriction base="xsd:NMTOKEN">
            <xsd:enumeration value="Create" />
            <xsd:enumeration value="Delete" />
            <xsd:enumeration value="Retrieve" />
            <xsd:enumeration value="RetrieveByContent" />
            <xsd:enumeration value="Update" />
        </xsd:restriction>
    </xsd:simpleType>
</xsd:attribute> 
```

我试图添加***`<xsd:enumeration value="" />`***，但没有奏效。谁能帮我修复 XSD？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:20:49.750

您应该使用`xsd:string`（或`xsd:token`任何更有意义的）作为基础而不是`xsd:NMTOKEN`. `xsd:NMTOKEN`等`xsd:NMTOKENS`是为了与 DTD 兼容而提供的。

# tsql - 选择不存在的位置，不包括标识列

> ID：11865772
> 
> 赞同：0
> 
> 时间：2012-08-08T13:38:30.343
> 
> 标签：tsql

我只从“转储”表中插入活动表中不存在的新记录。我的问题是有一个身份列我不想插入实时，我希望实时表身份列负责增加值，但我收到插入错误“插入错误：列名或数量提供的值与表定义不匹配。” 有没有办法解决这个问题，或者是唯一一起删除标识列的方法？

谢谢，山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:41:17.170

您需要列出查询中所有需要的列，不包括标识列。

永远不要使用`SELECT *`.

```
INSERT liveTable
(col1, col2, col3)
SELECT col1, col2, col3
FROM dumpTable dt
WHERE NOT EXISTS
(
  SELECT 1 
  FROM liveTable lt
  WHERE lt.Id == dt.Id
) 
```

专业提示：您还可以通过`OUTER JOIN`在转储表和实时表之间使用并使用`WHERE liveTable.col1 = NULL`（您可能需要使用转储表别名来限定选择的列名）来实现上述目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:09:41.150

我发现了这个问题......我的活动表没有将 ID 字段设置为身份，不知何故，当我创建它时，该字段设置不正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:41:36.800

您可以像这样在插入语句中保留该列

```
insert into destination (col2, col3, col4)
select col2, col3 col4 from source 
```

不要只做

```
insert into destination
select * from source 
```

# ruby-on-rails - 如何在 Rails 中为 select_tag 设置默认值并确保在页面刷新时重新加载默认值

> ID：11865775
> 
> 赞同：0
> 
> 时间：2012-08-08T13:38:37.900
> 
> 标签：ruby-on-rails, jquery, drop-down-menu, refresh, default-value

**背景**

我有一个带有 2 个下拉选项 A 和 B 的视图页面 (abc.html.haml)。A、B 是包含一组记录的列表，我通过 UI 展示其部分。

默认情况下，在点击控制器#index 操作（通过浏览器 url 调用）时，页面会填充 A 列表中的记录。

然后我有一个 Ajax 调用，它在选择下拉菜单时使用列表 B 中的记录填充同一页面。假设我现在使用下拉选项从状态 A 移动到 B。

**问题**

曾经，我在页面中填充了列表 B 中的记录，现在，***在页面刷新***时，我的下拉菜单仍然保持相同的状态“B”，但是在页面刷新时从控制器#action 加载的默认记录集来自列表 A（因此下拉菜单的状态应为“A”）。

关于如何解决这个问题的任何意见？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:26:58.507

我不确定我是否完全理解您的问题，但我能想到一些选择：

*   在下拉菜单中进行选择时，使用 javascript 更改 URL。您可以将参数添加到可以反映下拉列表状态的 URL，然后您可以在页面加载时解析这些参数。

*   给用户一个您控制的刷新按钮，然后您可以在刷新时将信息发送回控制器，以便您加载正确的默认值。

*   在用户进行选择时，通过 ajax 调用将当前用户选择存储在数据库中。我不知道您的应用程序的上下文，所以我不知道这有多可行。然后，如果它们存在，您显然可以在页面加载时加载它们。

然而，最简单的选择是重置页面刷新的所有控件，我认为用户无论如何都希望这种行为。

# python - python中的线性系统连接与scipy

> ID：11865779
> 
> 赞同：3
> 
> 时间：2012-08-08T13:38:59.930
> 
> 标签：python, signals, scipy

我目前正在使用 Scipy 的信号处理模块 scipy.signals 来检查线性时不变（LTI）系统。我想知道如何最好地将系统连接在一起。比如我要连接两个系统

```
from scipy import signal

a = signal.lti([T1,0],[T1,1])
b = signal.lti(1,[T2,1]) 
```

在系列中。我可以这样做

```
cnum=signal.convolve(a.num,b.num)
cden=signal.convolve(a.den,b.den)    
c=signal.lti(cnum,cden) 
```

得到结果系统。不过，这种表示法不是很优雅，尤其是当我们处理两个以上的系统时。此外，像这样并联连接两个系统或通过另一个系统反馈信号也不是那么简单。

我看到我可以安装 python-control 系统库，但如果 Scipy 以某种方式不包含此功能，我会感到相当惊讶。

如何最优雅地互连 LTI 系统？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-15T02:01:49.147

发布这个以防其他人出现。

您可以按如下方式开发信号处理功能以串联信号。

```
import scipy.signal as signal

def signal_processor(signals):
    """ Must pass an iterable containing sigal.lti signals """
    (result, signals) = (signals[0], signals[1:])
    for sig in signals:
        cnum = signal.convolve(result.num, sig.num)
        cden = signal.convolve(result.den, sig.den)
        result = signal.lti(cnum, cden)
    return result

 # Can then be used as follows:
 series_signal = signal_processor([sigA, sigB, sigC]) 
```

我将看看将其扩展到构建它以处理其他用例。

# javascript - 简单的 jQuery 链方法抛出错误

> ID：11865786
> 
> 赞同：0
> 
> 时间：2012-08-08T13:39:37.370
> 
> 标签：javascript, jquery

我有一个非常简单的 jQuery 方法链，它抛出了一个错误。它应该做的就是用新值（“test.html”）替换“#”。我这样做是因为我正在从数据库中检索一个值并想要更新标记中的特定链接。我已经验证了 href 属性实际上是“#”。但我收到“对象不支持此属性或方法”错误。我正在使用 jquery-1.7.1.min.js。

谁能告诉我这句话有什么问题：

```
$('a#protoPath').attr('href').html('test.html'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:41:43.903

`.attr('href')`返回当前属性内容，而不是另一个 jQuery 对象，因此它不能被链接。

`.attr('href', newValue)`如果你想真正改变它，你需要使用它。

如果您只想更改一个链接，`"#"`您`href`也需要更改选择器：

```
$('a[href="#"]') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:41:23.093

您正在尝试在元素属性上设置 HTML 内容，请尝试：

```
 $('a#protoPath').attr('href', 'test.html'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:41:23.903

试试这个：

```
$('a#protoPath').attr('href', 'test.html'); 
```

# jquery - ToggleClass 没有调整段落 fontSize

> ID：11865792
> 
> 赞同：0
> 
> 时间：2012-08-08T13:39:53.500
> 
> 标签：jquery, toggleclass

我很难让 jQuery 的 ToggleClass 增加和减少我的“p”字体大小。当点击增加图标时，我希望我的段落文本'id = #text'的字体大小增加16px，当再次点击图标时减少14px。我认为实现这一目标的最佳方法是使用 jQuery 的 ToggleClass，但它似乎无法正常工作。欢迎和赞赏任何建议或解决方案。

**jQuery代码：**

```
$(function(){
  $(".large-type").live("click",function(){
    $("#text").toggleClass("large");
  });
}); 
```

**HTML5 代码：**

```
<p id="text">
    MANHATTAN, KAN - The Longhorns, three games into their defense of the No. 1 ranking, come to  a place where the opponent is formidable, the crowd is raucous, and the reference might just wear out their whistles.<br><br> They come to face No. 13 Kansas State, an in-your-face team that reflects the personality of its coach, Frank Martin. The wildcats spend much of their games fouling and shooting free throws.<br><br>All 12,528 tickets have been sold, and coach Rick Barnes hopes the Longhorns can summon the fortitude Texas A&M showed in the packed Erwin Center on Saturday during a 72-67 loss to the Longhorns in overtime.<br><br>"It's gonna be flipped Monday," Barnes said. "We're not gonna have the house. I hope we go in with the same intensity A&M brought."<br><br>Kansas State has 13 consecutive victories at home, its longest streak in Manhattan since winning 20 straight in 1981-82.<br><br>The Longhoorns and Wildcats would not be called rivals, but you couldn't tell by their games in recent seasons.<br><br>Barnes is 8-4 against Kansas State. The Longhorns have won four of the last six, but five of those games were decided by four points or fewer. Texas has won the last two in Manhattan. K-State has a two-game winning steak in Austin.
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:53:06.123

在您的 css 中定义以下内容可能会解决您的问题。

```
#text { font-size:14px}
#text.large{ font-size:16px} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:42:53.683

类与 CSS 属性值不同。因此，您需要在 CSS 中为“大”类定义 font-size 属性才能使其工作：

```
.large{font-size: large;} 
```

# button - 在 tcp/ip 消息后更新 monodroid 中的按钮文本

> ID：11865805
> 
> 赞同：1
> 
> 时间：2012-08-08T13:40:45.183
> 
> 标签：button, dynamic, tcp, xamarin.android

> **可能重复：**
> [monodroid Timer](https://stackoverflow.com/questions/7097729/monodroid-timer)

我正在与 tcp/ip 服务器通信。服务器发送带有按钮新标签的消息。按钮文本已更改但未更新。只有当我点击按钮时它才会自我更新有什么建议吗？

找到它，使用：

```
private void OnTimeEvent(object source, ElapsedEventArgs e)
{
    RunOnUiThread(delegate {
        txv1.Text = count.ToString ();
        count++;
    });
} 
```

见线程：[monodroid Timer](https://stackoverflow.com/questions/7097729/monodroid-timer/7099330#7099330)

# .net - 需要在注册表中找到已注册 com dll 的 clsid

> ID：11865806
> 
> 赞同：0
> 
> 时间：2012-08-08T13:40:58.237
> 
> 标签：.net, vb.net, com, components

我创建了一个 COM dll 并将其注册到注册表中。但是我怎样才能在注册表中找到这个注册的 COM dll 的 clsid。因为当我在路径 HKEY_CLASSES_ROOT\Wow6432Node\CLSID 中打开注册表时，那里有很多条目。您能否提供一种方法来找到为我注册的 dll 找到 clsid 的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:54:07.880

DLL 可能承载零个或多个 coclass ( `CLSIDs`)。做一个反向搜索，并在下面搜索 DLL 路径或名称`HKEY_CLASSES_ROOT`，你会发现零个或多个这样的项目：

```
HKEY_CLASSES_ROOT\Wow6432Node\CLSID\{1C15D484-911D-11D2-B632-00C04F79498E}\InprocServer32
(Default) = "C:\Windows\SysWOW64\msvidctl.dll" 
```

你会这样读：

*   64 位 Windows 中的 32 位 CLSID ( `Wow6432Node`)
*   CLSID`{1C15D484-911D-11D2-B632-00C04F79498E}`
*   由 DLL ( `InprocServer32`)托管
*   由图书馆`C:\Windows\SysWOW64\msvidctl.dll`

# c# - 如何重写此代码以在 Telerik mvcextension 网格中从 cshtml 到 vbhtml 生成模板列

> ID：11865810
> 
> 赞同：0
> 
> 时间：2012-08-08T13:41:09.417
> 
> 标签：c#, asp.net-mvc, vb.net, telerik, telerik-mvc

我从这里得到了代码。 [http://demos.telerik.com/aspnet-mvc/razor/grid/templatesserverside](http://demos.telerik.com/aspnet-mvc/razor/grid/templatesserverside)

```
@model IEnumerable<Customer>
@{ Html.Telerik().Grid(Model)
        .Name("Grid")
        .Columns(columns =>
        {
            columns.Template(
                @<text>
                    <img 
                        alt="@item.CustomerID " 
                        src="@Url.Content("~/Content/Grid/Customers/" + item.CustomerID + ".jpg") " 
                      />
                </text>
            ).Title("Picture");
            columns.Bound(c => c.ContactName).Title("Name");
            columns.Bound(c => c.Phone);
        })
        .Sortable()
        .Scrollable(scrolling => scrolling.Height(250))
        .Pageable()
        .Render();
 } 
```

这是我尝试过的。

```
 @(Html.Telerik().
Grid(Model).
Name("Grid").
DataBinding(Function(o) o.SGrid().Select("Index", "Grid")).
Columns(Sub(columns)
                columns.Bound(Function(o) o.SGrid).Width(200).Title("SGridName")
                columns.Bound(Function(o) o.SGridName).Width(100).Title("SGridName")
                columns.Bound(Function(o) o.SGrid).Width(100).Title("SGrid")
                columns.Bound(Function(o) o.SGridStopped).Width(100).Title("SGrid")
        End Sub).Pageable(Function(o) o.PageSize(3))) 
```

我怎样才能将其重新写入 vbhtml ？

```
columns.Template(
                @<text>
                    <img 
                        alt="@item.CustomerID " 
                        src="@Url.Content("~/Content/Grid/Customers/" + item.CustomerID + ".jpg") " 
                      />
                </text>
            ).Title("Picture"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:52:31.703

试试这样：

```
columns.Template(Sub(item)@<text><img alt="@item.CustomerID" src="@Url.Content("~/Content/Grid/Customers/" & item.CustomerID & ".jpg")" /></text>End Sub).Title("Picture") 
```

# jquery - jQuery：如何读取 Django 视图返回的自定义对象？

> ID：11865818
> 
> 赞同：0
> 
> 时间：2012-08-08T13:41:22.100
> 
> 标签：jquery, django

这是我的`django view`

```
@csrf_exempt
@login_required
def get_playlists_for_user(request):
    """
    gets all playlists for user
    """
    logging.info('getting playlist for user - ' + str(request.user))
    playlists = UserPlaylist.objects.get_all_playlists_for_user(request.user)
    logging.info('user=%s, playlists=%s'%(request.user, playlists))
    return HttpResponse(playlists) 
```

这是通过以下方式`jQuery`调用它的方法`ajax`

```
$.ajax({
        url: '/getUserPlaylists',
        success: function(response, textStatus, jqXHR){

            console.log(response);
        },
        error: function(response, textStatus, jqXHR) {

        }
}); 
```

视图返回播放列表对象的列表

```
playlists=[<Playlist id:1, name:first, date_created:2012-08-05 06:28:31.954623+00:00, deleted:False>, <Playlist id:2, name:my, date_created:2012-08-06 12:47:13.023537+00:00, deleted:False>, <Playlist id:3, name:new, date_created:2012-08-06 12:48:45.708277+00:00, deleted:False>, <Playlist id:5, name:second, date_created:2012-08-06 21:19:33.050187+00:00, deleted:False>] 
```

的模式模型`Playlist`是

```
class Playlist(models.Model):
    name = models.CharField(max_length=30)
    date_created = models.DateTimeField(auto_now_add=True)
    date_modified = models.DateTimeField(auto_now=True)
    deleted = models.BooleanField(default=False) 
```

当我将它们登录到萤火虫时，我将它们视为

```
Playlist objectPlaylist objectPlaylist objectPlaylist object 
```

如何在 jQuery 中读取这些对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:43:54.150

您需要以 javascript 可以理解的形式返回 Python 对象，这通常是[json](http://www.json.org/)（javascript 对象表示法）。[因此，在您看来，使用 django 的序列化](https://docs.djangoproject.com/en/dev/topics/serialization/)程序将您的 django 查询集转换为 json ：

```
from django.core import serializers
...
json = serializers.serialize('json', playlists)
return HttpResponse(json, mimetype="application/json") 
```

在你的 ajax 中：

```
$.ajax({
       url: '/getUserPlaylists',
       dataType: "json",
       success: function(response, textStatus, jqXHR){
           for(var i = 0; i < response.length; i++ ){
               var playlist = response[i]['fields'];
               // Do something now with your playlist object
               console.log(playlist.name);
           }
       },
       error: function(response, textStatus, jqXHR) {
       }
}); 
```

这将意味着`response`您的 ajax`success`将是这样的（javascript 对象列表）：

```
[{ "model" : "playlist.Playlist", "pk" : 1, "fields" : { "name" : "...", ... } }] 
```

# android - 应用程序不适用于 4.0.3，但它适用于 2.3.3

> ID：11865821
> 
> 赞同：0
> 
> 时间：2012-08-08T13:41:27.170
> 
> 标签：android, android-arrayadapter, android-spinner, android-4.0-ice-cream-sandwich, android-sdk-2.3

我编写了一个应用程序，它可以在 android 2.3.3 上正常运行，但它不能在 android 4.0.3 上运行。

我在我的 AndroidManifest 文件中指定了 minsdk="10" 和 targetsdk="15"。

我在我的应用程序中使用 .net Web 服务，但在此页面上出现错误。

```
myspinner = (Spinner) findViewById(R.id.ihtiyacsec);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, SektorList);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        myspinner.setAdapter(adapter); 
```

SektorList 为空。

我正在使用 ksoap2 访问我的网络服务。

这是我的功能

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.bodyOut=request;
        envelope.dotNet = true;     
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.debug = true;

       try {

       androidHttpTransport.call(SOAP_ACTION, envelope);
       SoapObject response = (SoapObject) envelope.getResponse();
       SektorList = new String[response.getPropertyCount()];

      for(int i=0;i<response.getPropertyCount();i++){          
               SektorList[i] = response.getPropertyAsString(i).toString();     
      }      
} 
        catch (Exception e) {           
            e.printStackTrace();
       } 
```

当我调试项目时， androidHttpTransport.call(SOAP_ACTION, envelope) 不起作用，编译器跳转到 catch 块。

我知道我的肥皂动作是正确的（相同的代码在 2.3.3 中有效）。

我不知道是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:48:00.813

您正在主线程上执行（可能很慢）网络操作。如果您的目标 SDK 是 11 (Honeycomb) 或更高版本，这将`NetworkOnMainThreadException`在 Honeycomb 或更高版本上抛出一个错误，因为此行为可能会阻塞 UI 并导致应用程序无响应。

您可以使用[AsyncTask](https://developer.android.com/reference/android/os/AsyncTask.html)来解决这个问题，将数据加载到`doInBackground(..)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:48:58.773

这是一个非常普遍的问题。从 Android HC+ 开始，您不得在主 UI 线程中执行繁重的网络操作。要解决此问题，您可以：从清单中删除“targetsdk”标签（不推荐）或仅使用 asynctask 进行网络操作。

# c# - 无法添加 HtmlAgilityPack 作为参考

> ID：11865826
> 
> 赞同：0
> 
> 时间：2012-08-08T13:41:39.963
> 
> 标签：c#, visual-studio

这应该不难，但我不能将 HtmlAgilityPack.dll 添加为空 C# 项目中的引用。这是我所做的：

1.  已下载 HtmlAgilityPack.1.4.5.zip。
2.  解压它。
3.  在解决方案资源管理器中，我右键单击引用并选择“添加引用...”。
4.  我使用 Visual Studio 2008 并选择了 Net20/HtmlAgilityPack.dll。

现在 HtmlAgilityPack.dll 上有一个黄色三角形，我无法在其属性中编辑路径。如果我删除它并再次添加它，也会发生同样的事情。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:46:56.583

我在 1.4.5 也有同样的问题，尝试下载 1.4.0 版本。

[http://htmlagilitypack.codeplex.com/releases/view/44954](http://htmlagilitypack.codeplex.com/releases/view/44954)

我不确定为什么它不起作用，但如果你看[这里，](http://htmlagilitypack.codeplex.com/discussions/364171)你会看到其他人有同样的问题。

引用 ttraguth：

> 你好，
> 
> 我在这里将当前的 1.45 二进制文件集成到 .NET 3.5 应用程序中时遇到了同样的问题。
> 
> dotPeek 还将程序集显示为 4.0。
> 
> 也许你的 .targets 坏了？

# ruby-on-rails - Mongrel & Apache - 403 错误

> ID：11865827
> 
> 赞同：1
> 
> 时间：2012-08-08T13:41:42.457
> 
> 标签：ruby-on-rails, apache, mongrel

我正在尝试使用 Rails 和 Mongrel 启动并运行我的 rails 应用程序。将浏览器指向应用程序时，我不断收到 403 权限被拒绝 Apache 错误。

我可以确认我的 mongrel_rails 实例正在运行（端口 3001、3002 和 3003）。

这是我的 vhost.conf：

```
<Proxy balancer://mongrelcluster>
  BalancerMember http://127.0.0.1:3001
  BalancerMember http://127.0.0.1:3002
  BalancerMember http://127.0.0.1:3003
</Proxy>

<VirtualHost *:80>
  ServerName subdomain.domain.co.uk
  ServerAlias subdomain.domain.co.uk
  ProxyPass / balancer://mongrelcluster/
  ProxyPassReverse / balancer://mongrelcluster/
  ProxyPreserveHost on
</VirtualHost> 
```

我想我一定在这里遗漏了一些东西。我尝试在我的虚拟主机中添加一个 DocumentRoot 指令，该指令指向我的应用程序的根目录，但无济于事。

这是我的 mongrel 日志（RE 端口 3003）的一些输出：

> ** 信号准备就绪。期限 => 停止。USR2 => 重启。INT => 停止（不重新启动）。** Rails 信号已注册。HUP => 重新加载（无需重新启动）。它可能无法正常工作。** Mongrel 1.2.0.pre2 在 0.0.0.0:3003 2012-08-08 10:32:14 +0000 可用：调用 Dispatcher.dispatch # /usr/local/rvm/gems/ruby-1.9.3-p194 时出错/gems/mongrel-1.2.0.pre2/lib/mongrel/rails.rb:76:in `block in process' <internal:prelude>:10:in`synchronize' /usr/local/rvm/gems/ruby-1.9.3-p194/gems/mongrel-1.2.0.pre2 /lib/mongrel/rails.rb:74:in `process' /usr/local/rvm/gems/ruby-1.9.3-p194/gems/mongrel-1.2.0.pre2/lib/mongrel.rb:165:in` block in process_client' /usr/local/rvm/gems/ruby-1.9.3-p194/gems/mongrel-1.2.0.pre2/lib/mongrel.rb:164 :in `each' /usr/local/rvm/gems/ruby-1.9.3-p194/gems/mongrel-1.2.0.pre2/lib/mongrel.rb:164:in` process_client' /usr/local/rvm/gems/ruby-1.9.3-p194/gems/mongrel-1.2.0.pre2/lib/mongrel.rb:291:in `block (2 levels) in run'

我可以看到某处的调度存在错误（此错误仅在第三个也是最后一个端口上普遍存在）。我跑了

```
gem install dispatch 
```

但我仍然遇到这个问题。我不知道问题是否与 apache、mongrel 或两者有关。

有小费吗？

# openerp - 允许开放式 ERP 会计模块客户登录

> ID：11865833
> 
> 赞同：1
> 
> 时间：2012-08-08T13:42:07.540
> 
> 标签：openerp

我希望会计模块中的客户具有登录访问权限以查看他的交易。或者我是否可以在创建发票时将登录用户用作客户的其他方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T05:00:55.943

该[`share`模块](http://apps.openerp.com/addon/684)将让您与业务合作伙伴共享任何 OpenERP 文档。[您可以在snippetbucket.com](http://www.snippetbucket.com/2011/11/22/openerp-share-module/)上找到用户指南和截屏视频。

# python - 我不明白 Python 中的“来自”

> ID：11865835
> 
> 赞同：2
> 
> 时间：2012-08-08T13:42:13.637
> 
> 标签：python, glob

```
from glob import glob
from os.path import isfile
def countwords(fp):
   with open(fp) as fh:
       return len(fh.read().split())

print "There are" ,sum(map(countwords, filter(isfile, glob("*.txt") ) ) ), "words in the files." 
```

在第一行，为什么不只是简单地导入 glob 库？

在“import glob”前面使用“from glob”有什么理由吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T13:44:07.913

如果你写`import glob`，你将需要使用`glob.glob`.

`from glob import glob`获取`glob.glob`并使其可用`glob`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T13:43:52.343

```
>>> import glob
>>> dir(glob)
['__all__', '__builtins__', '__doc__', '__file__', '__name__', '__package__', 
 'fnmatch', 'glob', 'glob0', 'glob1', 'has_magic', 'iglob', 'magic_check', 
 'os', 're', 'sys'] 
```

您可以在此处查看 glob 模块中的所有函数，例如，您可能需要 glob 的迭代器版本，在这种情况下，您将使用：

```
from glob import iglob 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T13:44:33.140

如果你使用`import glob`，对于函数`glob("*.txt")`，你必须写`glob.glob("*.txt")`。

基本上，第一个`glob`是`from glob import glob`模块的名称，而第二个是函数的名称。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T13:45:25.447

`from glob import glob`将导入模块`glob`的属性`glob`何时`import glob`导入整个模块

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-08T13:47:35.067

这个链接似乎很好地解释了所有不同的变化：

[http://effbot.org/zone/import-confusion.htm](http://effbot.org/zone/import-confusion.htm)

最重要的是，从模块中导入特定事物只会让您直接引用该事物而不是整个模块。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-08T13:44:52.823

当您拥有`import`glob 时，您可以从该模块导入所有函数。当你有 时`from xyz import abc`，你只是从模块中导入`abc`函数。`xyz`在这种情况下，您是从模块中导入`glob`函数。`glob`

这样，在 Python 代码中，如果你想使用`glob`函数，而不是写`glob.glob`，你只需要写`glob`.

# wpf - 使用 WPF 和 C# 的 3 层应用程序

> ID：11865840
> 
> 赞同：0
> 
> 时间：2012-08-08T13:42:33.633
> 
> 标签：wpf, visual-studio-2010, c#-4.0, desktop-application

我最近阅读了 3 层架构，我想知道如何在使用 WPF 和 C#开发**桌面应用程序中应用它。**
对外部文章或资源的任何引用表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T13:52:52.257

“WPF 中的 3 层架构”立即让我回答您“MVVM - 模型视图视图模型”

这个快速入门[教程可以帮助您开始使用它。](http://www.codeproject.com/Articles/81484/A-Practical-Quick-start-Tutorial-on-MVVM-in-WPF)

无论如何，我强烈建议在 MVVM 中使用 WPF。我什至会说，在不使用 MVVM 的情况下使用 WPF 没有多大意义恕我直言

您还有一个更严格的框架，名为 PRISM，如果需要，请在 Google 上搜索

无论如何，对于 MVVM，更多的答案列在：

[这个线程](https://stackoverflow.com/questions/1405739/mvvm-tutorial-from-start-to-finish)

# android - android multiautocompletetextview：区分输入和选定的项目

> ID：11865841
> 
> 赞同：2
> 
> 时间：2012-08-08T13:42:37.863
> 
> 标签：android, autocompletetextview

在使用 MultiAutocompleteTextView 时，有什么方法可以区分用户完全键入的单词和他宁愿从下拉菜单中选择的单词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:18:21.507

是的，您可以使用 onItemClickListener 来查看他没有完全输入的内容。我想在您可以将它们从所有选定项目的列表中删除并且只有完全输入的项目之后。

```
yourMultiView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        //here you can save the clicked elements
        Log.i("yourPackage",((TextView)arg1).getText().toString());
    }
}); 
```

这就是我设法查看输入值和所选值之间的差异的方式。

# vim - 替换最后一次出现的行

> ID：11865845
> 
> 赞同：39
> 
> 时间：2012-08-08T13:42:52.297
> 
> 标签：vim

`:%s/one/two/`将替换第*一次*出现的`one`with `two`。有没有一种简单的方法可以代替*最后一次*出现？

我不能假设它在行尾旁边，并且在最后一次出现“抓取”时没有什么独特之处，类似于：

```
one two three one two three one two one two one two ... 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-08T13:49:27.790

最简单的方法是在匹配前允许任意文本，并使用以下命令指定匹配区域[`\zs`](http://vimdoc.sourceforge.net/htmldoc/pattern.html#/%5Czs)：

```
:%s/.*\zsone/two/ 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-08T13:49:06.603

因为 .* 是贪婪的，所以这应该有效：

```
:%s/\(.*\)one/\1two/ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T13:54:29.877

如果你想替换一行中的一个单词，你也可以说：

```
$?one<CR>cetwo<ESC> 
```

它将转到行尾 ( `$`) 并向后找到单词`one`( `?one<CR>`)。然后它将*更改*( `c`) 所有内容，直到带有字符串的单词的*结尾*( ) 。当然，您可以使用、等来改变。您甚至可以说更改接下来的 17 个字符。`e``two``e``E``f``F``c17l`

# c++ - 在 ogdf::GraphCopy 中复制一条边

> ID：11865847
> 
> 赞同：0
> 
> 时间：2012-08-08T13:43:02.607
> 
> 标签：c++, graph

我正在使用 OGDF 版本 2012.07。

我有一个 GraphCopy 代表 Graph 实例的副本。在对图副本进行操作时，它保存对原始节点和边的引用。在[GraphCopy 的文档中](http://www.ogdf.net/doc-ogdf/classogdf_1_1_graph_copy.html#details)，它说：

> 支持边分裂的图副本。
> 
> 类**GraphCopy**表示图的副本，并维护原始图的节点和边与副本之间的映射，反之亦然。
> 
> [...]

有一个方法[ogdf::GraphCopy::newEdge(edge eOrig)](http://www.ogdf.net/doc-ogdf/classogdf_1_1_graph_copy.html#afa878a77d5ce6b1a85a532cff6350fe1)记录如下：

> 使用原始边*eOrig*创建新边 ( *v,w* ) 。

 *该方法实现如下：

```
edge GraphCopy::newEdge(edge eOrig)
{
    OGDF_ASSERT(eOrig != 0 && eOrig->graphOf() == m_pGraph);
    OGDF_ASSERT(m_eCopy[eOrig].empty()); // no support for edge splitting!

    edge e = Graph::newEdge(m_vCopy[eOrig->source()], m_vCopy[eOrig->target()]);
    m_eCopy[m_eOrig[e] = eOrig].pushBack(e);

    return e;
} 
```

在第二个断言中，原始图中边*eOrig*的关联边副本的数量必须为零，这仅在删除边副本时才有可能，因为最初（当使用原始图初始化 GraphCopy 时）所有图副本中的边与原始图中对应的原始边相关联；因此，`m_eCopy[eOrig].empty()`对于所有边都是错误的。

我应该如何在不更改原始图形的情况下复制图形副本中的边**？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:12:54.290

我无法理解您对实施的解释。当我在 OGDF 网站上浏览源代码[GraphCopy.h](http://www.ogdf.net/doc-ogdf/_graph_copy_8h_source.html)时（上面写着 2012.07.），我看到了完全不同的类。有一个类**GraphCopy**（它是支持边缘分割的派生 GraphCopy 类的接口）和另一个不支持边缘分割的类**GraphCopySimple 。**

所以我的建议是检查你是否真的有正确的版本。

GraphCopySimple中的方法*newEdge(edge eOrig)***看起来**就像你想要的那样：

```
edge newEdge(edge eOrig) {
    OGDF_ASSERT(eOrig != 0 && eOrig->graphOf() == m_pGraph);
    edge e = Graph::newEdge(m_vCopy[eOrig->source()], m_vCopy[eOrig->target()]);
    m_eCopy[m_eOrig[e] = eOrig] = e;
    return e;
} 
```

但是还有一个问题。**GraphCopySimple**没有构造函数的实现，所以我猜它是抽象基类，所以你需要派生自己的 GraphCopy 类并实现缺失的函数。*

# actionscript-3 - 从列表到组的拖动项为空

> ID：11865849
> 
> 赞同：1
> 
> 时间：2012-08-08T13:43:04.977
> 
> 标签：actionscript-3, apache-flex

我正在将一个列表项拖到一个组中。该列表如下所示：

```
<s:List id="lstArtists" dragEnabled="true" dragMoveEnabled="true"/> 
```

该组有 dragenter- en dragdrophandlers：

```
<s:Group id="groupRemove" dragEnter="dragEnterHandler(event)" dragDrop="dragDropHandler(event)">
    <s:Image source="assets/images/trashcan.jpg" horizontalCenter="0" verticalCenter="0"/>
</s:Group> 
```

这些是处理程序：

```
protected function dragEnterHandler(event:DragEvent):void
{
    if(Object(event.dragInitiator).id == "lstArtists")
    {
        DragManager.acceptDragDrop(event.target as UIComponent);
    }
}

protected function dragDropHandler(event:DragEvent):void
{
    Alert.show(String(event.draggedItem));
} 
```

但 draggedItem 为空：

![调试器的屏幕截图](../Images/b6090b64ae6bdc76fc82f6cdde41f370.png)

如何访问拖动的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:21:35.823

我认为您可以通过以下方式获取该项目： (event.dragInitiator as List).getSelectedItem 或类似的东西。

# php - PHP 生成 00 - 29 之间的随机数

> ID：11865854
> 
> 赞同：3
> 
> 时间：2012-08-08T13:43:10.627
> 
> 标签：php

> **可能重复：**
> [在 PHP 中用前导零格式化数字](https://stackoverflow.com/questions/1699958/formatting-a-number-with-leading-zeros-in-php)

我的值介于 00 - 29 之间，需要使用 PHP 随机选择。我尝试使用 rand() 函数，但它给了我 0 - 29。而不是 00、01、02、03 ...等。

如何从 PHP 中随机获取 00 - 09 而不是 0 - 9？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-08T13:44:23.700

```
$random = sprintf("%02f", rand(0,29)); 
```

或者，如评论中所述：

```
$random = str_pad(rand(0,29), 2, "0", STR_PAD_LEFT); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:45:08.317

创建一个数组，如

```
$array = array('00','01','02','03'....,'29');
echo $array[array_rand($array)]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T13:46:52.060

使用[str_pad](http://php.net/manual/en/function.str-pad.php)：

```
$random = str_pad(rand(0, 29), 2, '0', STR_PAD_LEFT); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T13:44:52.153

a) 如果值低于 10，则添加“0”

b) 使用 number_format 处理输出

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T13:46:36.413

您可以使用 sprintf 格式化数字。

```
$number = rand(0,29);
$number = sprintf("%02d", $number); 
```

搜索 sprintf 的 PHP 手册

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T13:47:50.127

您也可以使用这种不依赖于附加功能的方法：

```
$n = rand(0, 29);
if( $n < 10 ) $n = "0" . $n; 
```

# c# - 通过回发持久化对象

> ID：11865870
> 
> 赞同：1
> 
> 时间：2012-08-08T13:44:17.943
> 
> 标签：c#, asp.net, post

# 问题

`PostBack`我需要通过ASP 页面上的a 来维护动态创建的表的状态。

## 细节

当用户访问该页面时，会根据存储在数据库中的信息创建一个 CheckBoxes 表。基本上，这些复选框以网格形式排列，根据数据库中的信息选中/取消选中和启用/禁用。它们也是彩色编码的，但这并不重要。

网格的尺寸和复选框的状态在 处确定`Page_Load`。我有一个名为的类`DisplayWell`，它只是一个`TableCell`包含 CheckBox 的类。页面本身有一个空白`Table`，我循环并添加`DisplayWell`s. 然后，用户可以对复选框的状态和少数几个 进行编辑`TextFields`，然后单击按钮进行保存。

我相信您知道，问题在于这些动态创建的对象在之后消失了`Page_Load`：服务器将它们交给客户端并且它们被销毁了。我需要能够保留表或对象数组的状态才能更新数据库。

到目前为止，我一直使用隐藏字段来存储我需要在回发中持久保存的信息，但仅限于一两个变量，这在这种情况下实际上是行不通的（通常我们谈论的是 96 个复选框，但它可以可以是任意数字）。我读过您可以将对象存储在会话变量中，但是对象的状态会在客户端进行更改吗？我也听说这是个坏主意。

编辑：测试后，更改未注册-我从会话变量中得到了相同的数组。

FWIW，这里是`Page_Load`：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {                
        if (Request.QueryString["Plate_INDEX"] != null &&
            Request.QueryString["Block_INDEX"] != null)
        {
            String sPIndex = Request.QueryString["Plate_INDEX"].ToString();
            String sBIndex = Request.QueryString["Block_INDEX"].ToString();
            if(-1 != Block_INDEX)
            {
                lblExpPlate.Text = "Edit a Solution";
                populateFields();
            }
            hfPlate_INDEX.Value = Plate_INDEX.ToString();
            hfBlock_INDEX.Value = Block_INDEX.ToString();                        
            createPlate();
            addToTable();                
        } // end queryString != null
    }
} // end Page_Load

private void createPlate()
{
    MTT_Plate_IO mpio = new MTT_Plate_IO();
    SqlDataReader plateReader = mpio.Get_Plate(Plate_INDEX);

    if (plateReader.Read())
    {
        r = (int)plateReader["Plate_Rows"];
        c = (int)plateReader["Plate_Columns"];
        hfPlate_INDEX.Value = plateReader["Plate_INDEX"].ToString();
        dwArr = new DisplayWell[r, c];
        for (int i = 0; i < r; i++)
        {
            for (int j = 0; j < c; j++)
            {
                dwArr[i, j] = new DisplayWell();
                dwArr[i, j].cb.Checked = false;
                dwArr[i, j].cb.Enabled = true;
            }
        } // end creation of plate                
    } // end plateReader
} //end createPlate();

private void addToTable()
{
    // create a header for the table
    TableRow header = new TableRow();
    TableHeaderCell blankCell = new TableHeaderCell();
    header.Cells.Add(blankCell); //blank cell to align with data

    // add numbers to top of plate
    for (int i = 1; i <= c; i++)
    {
        TableHeaderCell thc = new TableHeaderCell();
        thc.Text = i.ToString();
        header.Cells.Add(thc);
    }
    tblPlate.Rows.Add(header);

    //create the plate
    for (int i = 0; i < r; i++)
    {
        TableRow tr = new TableRow();
        TableCell rowHeader = new TableCell();
        rowHeader.CssClass = "style5";
        //add a letter to the beginning of the row
        String rowHeaderText = ((char)(i + 65)).ToString();
        rowHeader.Text = rowHeaderText;
        tr.Cells.Add(rowHeader);
        for (int j = 0; j < c; j++)
        {
            tr.Cells.Add(dwArr[i, j].tc);
        }

        tblPlate.Rows.Add(tr);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:00:46.083

感谢[Andrew-Barber](https://meta.stackoverflow.com/users/152134/andrew-barber)的建议，我希望他能出现并回答这个问题（你仍然可以！），我想出了解决方案：

在方法中创建对象`OnInit`并删除`if(!Page.IsPostBack)`块，而不是为页面的每个实例实例化对象。这发生在页面生命周期的早期，并将对象持久保存在服务器端的内存中，允许注册客户端所做的更改。

# c# - 交易失败。服务器响应是：SMTP 主机

> ID：11865871
> 
> 赞同：4
> 
> 时间：2012-08-08T13:44:19.267
> 
> 标签：c#, asp.net, smtpclient

我一直在尝试制作一个简单的电子邮件发送应用程序，但我被这个错误阻止了，我似乎找不到任何有这个问题的人（虽然有点不知道要搜索什么）

所以当我尝试发送我的电子邮件时，我遇到了这个错误，它只是用我的 SMTP 主机的名称返回这个错误，

> 交易失败。服务器响应是：smtp.host.com

如果我查看它崩溃的痕迹

> 在 System.Net.Mail.SmtpConnection.GetConnection(ServicePoint servicePoint)

这是代码示例，没什么特别的。

```
MailMessage mail = new MailMessage();
mail.From = new MailAddress(CurrentUser.email);
mail.Subject = txtSubject.Text;
mail.Body = txtMailBody.Text;

try
{
    foreach (ListItem user in lbSelectedUsr.Items)
    { 
        mail.To.Add(new MailAddress(user.email));
    }

    SmtpClient mailClient = new SmtpClient("smtp.host.com");
    mailClient.Send(mail);

    lblResultOK.Visible = true;
}
catch(Exception ex)
{
    lblResultOK.Visible = true;
} 
```

请注意，为了示例，SMTP 是假的。

我尝试使用无效的 SMTP，但它给了我不同的错误，所以 SMTP 似乎没问题，我也尝试输入凭据，同样的错误。关于发生了什么的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:26:07.770

我在 Web.Config 文件中正确设置了您的 SMTP 配置吗？我会说尝试通过 host="smtp.gmail.com" 发送示例电子邮件

```
<system.net>
<mailSettings>
  <smtp deliveryMethod="Network" from="emailAddress">
    <network host="smtp.gmail.com" port="587" userName="emailAddress" password="password" defaultCredentials="false"/>
  </smtp>
</mailSettings> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-12T12:13:25.277

下面的代码必须放在 web.config 中。注意点是defaultCredentials="false"

```
<system.net>
<mailSettings>
  <smtp from="aaa@yourdomain.com">
    <network host="mail.yourdomain.com" userName="aaa@yourdomain.com" password="your password" port="587" defaultCredentials="false"/>
  </smtp>
</mailSettings> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:13:38.453

服务器不接受来自运行您的应用程序的机器的中继。适当地配置服务器，或者在已经配置为中继的机器上运行代码（通常是域内的所有计算机；我假设您的计算机属于与 SMTP 服务器不同的域）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T14:10:06.377

尝试通过 google smtp 发送，如果每个都正常，则将其更改为您的 smtp 服务器信息。如果您这样做并且如果您的问题仍然存在，那么您必须检查您的 smtp 服务器。

*   这是一个很好的起点：( [GMailMailSender.zip](http://www.programmerfish.com/downloads/GmailMailSender.zip) )
*   并阅读它的教程，[在这里](http://www.programmerfish.com/send-email-using-gmail-in-aspnet-c/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-21T11:57:50.953

```
MailMessage mail = new MailMessage();
mail.From = new MailAddress(CurrentUser.email);
mail.Subject = txtSubject.Text;
mail.Body = txtMailBody.Text;

try
{
    foreach (ListItem user in lbSelectedUsr.Items)
    { 
        mail.To.Add(new MailAddress(user.email));
    }

    SmtpClient mailClient = new SmtpClient("smtp.host.com");
    mailClient.EnableSsl = true
    mailClient.Send(mail);

    lblResultOK.Visible = true;
}
catch(Exception ex)
{
    lblResultKO.Visible = true;
} 
```

# logging - 在 Hadoop 中打开用户登录

> ID：11865879
> 
> 赞同：0
> 
> 时间：2012-08-08T13:44:37.910
> 
> 标签：logging, hadoop, mapreduce

据我所知，Hadoop 应该记录来自映射器和减速器的标准输出和标准错误`${HADOOP_HOME}/logs/userlog/`，但这在我的配置中没有发生。

我不知道，如何从映射器和减速器打开日志记录？

没有一种打印方法有效，例如`System.out.println("...")`：`System.err.println("...")`和`LOG.error("...")`.

# php - 打印时 IE 不重新发送 cookie

> ID：11865880
> 
> 赞同：11
> 
> 时间：2012-08-08T13:44:44.093
> 
> 标签：php, jquery, internet-explorer, cookies, printing

我有一个由 PHP 页面 request.php 动态渲染的图像。由于其包含的数据的性质，无法缓存此图像。request.php 呈现的图像取决于用户的 cookie。当我从 IE8 和 IE9 打印时，在尝试下载 request.php 返回的图像时，这些 cookie 不会在请求标头中发送。我通过使用 Fiddler 和监视请求/响应标头来确定这一点。

我的第一个想法是将cookie信息放在request.php的URL中，但是这样做有问题。我设置的 cookie 是使用`httponly`标志集创建的（出于安全原因）。换句话说，我无法从脚本访问此 cookie。我确实使用 jQuery 来设置图像的源，使用类似`$("#myimage").attr("src", "request.php?d=" + dynamically_set_data_string);`There's no way to append any cookie information to this jQuery call because of the `httponly`flag。

我不能使用 base64 将图像数据直接包含在`src`属性中，因为图像太大（IE8 有 32KB 限制）。

是否有一种技巧可以强制 IE 在打印/打印预览期间对未缓存图像的请求中发送 cookie？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:36:26.263

经过研究，IE似乎无法在打印时在未缓存图像的请求标头中发送cookie数据。为了解决这个问题，我使用该`window.onbeforeprint`事件向`cache=true`我的图像 URL 添加一个参数。在后端，我为要在短时间内缓存的图像设置标题。虽然这不能解决问题（因为我不相信有真正的解决方法），但它确实规避了问题，并且 IE 能够打印图像。

# php - 使用 JMSI18nRoutingBundle 时如何禁用所有捆绑包的所有路由的国际化？

> ID：11865887
> 
> 赞同：6
> 
> 时间：2012-08-08T13:44:53.637
> 
> 标签：php, symfony, internationalization

我使用[Symfony2 的 JMSI18nRoutingBundle](http://jmsyst.com/bundles/JMSI18nRoutingBundle)来允许我的路由自动国际化。可以在 routing.yml 中禁用单个路由国际化，如下所示

```
index:
  pattern: /
  defaults: { _controller: AcmeBaseBundle:Welcome:indexRedirector }
  options:
    i18n: false 
```

但是，我通常在控制器中注释路由并在 routing.yml 中定义一个前缀：

```
AcmeApiBundle:
  resource: "@AcmeApiBundle/Controller/"
  type:     annotation
  prefix:   /api
  options:
    i18n: false 
```

在这种情况下，禁用国际化无法正常工作，并且只能通过将语言环境添加为 URL 的前缀来匹配路由。

如何禁用捆绑包中所有 URL 的国际化？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T14:21:52.310

在注释中指定选项。就像是：

```
/**
 * @Route("/", options={"i18n" = false})
 */ 
```

# c# - RateOfCountsPerSecond64 类型的性能计数器的值始终为 0

> ID：11865894
> 
> 赞同：2
> 
> 时间：2012-08-08T13:45:15.100
> 
> 标签：c#, performancecounter

我有一个更新两个性能计数器值的 WCF 服务。第一个定义为 NumberOfItems64，第二个定义为 RateOfCountsPerSecond64。当我更新它们的值时（我每秒执行几次），perfmon 会按预期显示第一个计数器的正确值，但总是说第二个计数器的值为 0。当我调试代码时，我可以看到第二个计数器的 RawValue 属性按预期更新...

这是我创建计数器的 PowerShell 代码：

```
$categoryName = "My category"

$exists = [System.Diagnostics.PerformanceCounterCategory]::Exists($categoryName)
if ($exists)
{
    [System.Diagnostics.PerformanceCounterCategory]::Delete($categoryName)
}

$counters = new-object System.Diagnostics.CounterCreationDataCollection

$counter = new-object System.Diagnostics.CounterCreationData
$counter.CounterType = [System.Diagnostics.PerformanceCounterType]::NumberOfItems64
$counter.CounterName = "# ops"
$counters.Add($counter)

$counter = new-object System.Diagnostics.CounterCreationData
$counter.CounterType = [System.Diagnostics.PerformanceCounterType]::RateOfCountsPerSecond64
$counter.CounterName = "# ops/sec"
$counters.Add($counter)

[System.Diagnostics.PerformanceCounterCategory]::Create($categoryName, $categoryName, [System.Diagnostics.PerformanceCounterCategoryType]::MultiInstance, $counters) 
```

这是我更新计数器值的代码：

```
long value = GetValue();
counter1.IncrementBy(value);
counter2.IncrementBy(value); 
```

我在 StackOverflow 上发现了这个问题，看起来和我的很相似：[RateOfCountsPerSecond32 类型的计数器总是显示 0](https://stackoverflow.com/questions/2238212/counter-of-type-rateofcountspersecond32-always-shows-0)，但它不能解决我的问题。

任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:24:13.520

重新启动计算机后，我的代码按预期工作......奇怪！！！！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-20T22:54:20.240

我在 C# 中遇到了同样的问题。我还发现重新启动修复了它。

另一件事似乎对我有用，在这样的块中初始化计数器：

```
counter.BeginInit();
counter.RawValue = 0;
counter.EndInit(); 
```

那是 C# 代码，但我猜 powershell 有一组相应的函数。

# c++ - Linux C++ 应用程序可以连接到远程 Windows DCOM API 吗？

> ID：11865895
> 
> 赞同：1
> 
> 时间：2012-08-08T13:45:23.747
> 
> 标签：c++, linux, dcom

我正在开发一个 linux c++ 应用程序。它的部分功能是与通过 DCOM API 公开的 Windows 上运行的第 3 方产品进行通信。

是否有稳定的解决方案可以让我从 linux 机器远程访问 DCOM API？

谢谢，

阿米尔。

# windows-phone-7 - 如何从隔离存储中读取其他类？

> ID：11865905
> 
> 赞同：0
> 
> 时间：2012-08-08T13:45:47.460
> 
> 标签：windows-phone-7

如何读取 MainPage.xaml/.cs 中的设置？

我使用此[设置示例](http://msdn.microsoft.com/en-us/library/ff431744%28v=vs.92%29.aspx#BKMK_Common)，但我没有其他类的访问权限。

例如：在 MainPage.xaml 我们有 TextBlock，在 SettingsWithoutConfirmation.xaml 我们有 TextBox，TextBlock 如何从 TextBox 读取此字符串（并将其保存到独立存储中）？

我是新手，请温柔；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:05:18.007

我不确定我是否完全理解你的问题。在任何 xaml 页面中，您可以使用以下内容访问已存储在隔离存储中的设置：

```
var settings = IsolatedStorageSettings.ApplicationSettings;
if( settings.Contains("name") ) {
    //the value is available here
}

//to store a value permanently
settings["name"] = "New Name" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:45:39.883

尝试这个：

将数据保存到设置：

```
var settings = IsolatedStorageSettings.ApplicationSettings;
settings.Add("myemail", "support@gmail.com"); 
```

从设置中获取数据：

```
var location = settings["myemail"].ToString();
settings["myemail"] = "support@gmail.com"; 
```

# gridview - 三层架构中具有复杂 sqldatasource 的 Gridview

> ID：11865909
> 
> 赞同：3
> 
> 时间：2012-08-08T13:46:04.713
> 
> 标签：gridview, sqldatasource, n-tier-architecture, 3-tier

我已经实现了一个 3 层架构，可以在下面的链接中看到

[http://geekswithblogs.net/edison/archive/2009/04/05/a-simple-3-tier-layers-application-in-asp.net.aspx](http://geekswithblogs.net/edison/archive/2009/04/05/a-simple-3-tier-layers-application-in-asp.net.aspx)

在上面的示例中，它使用 DataTable 作为 sqldatasource 并使用以下代码将其绑定到 gridview。

```
GridView1.DataSource = Client.GetClients();
GridView1.DataBind(); 
```

但是我的数据源不是数据表，它是一个常规的 sqldatasource，您可以在其中编辑、删除和更新。所以我不知道如何将它与我的表示层分开，还是应该真正分开？这是我的sqldatasource的代码：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:MyDbConn %>"
    DeleteCommand="DELETE FROM [OrderDetail] WHERE [RowNo] = @RowNo" InsertCommand="INSERT INTO [OrderDetail] ([FileNo], [PONumber], [MaterialCode], [MaterialDescription], [MaterialCategory], [UnitOfMeasure], [Quantity], [ContainerType], [LoadingDate]) VALUES (@FileNo, @PONumber, @MaterialCode, @MaterialDescription, @MaterialCategory, @UnitOfMeasure, @Quantity, @ContainerType, @LoadingDate)"
    SelectCommand="SELECT * FROM [OrderDetail]" UpdateCommand="UPDATE [OrderDetail] SET [FileNo] = @FileNo, [PONumber] = @PONumber, [MaterialCode] = @MaterialCode, [MaterialDescription] = @MaterialDescription, [MaterialCategory] = @MaterialCategory, [UnitOfMeasure] = @UnitOfMeasure, [Quantity] = @Quantity, [ContainerType] = @ContainerType, [LoadingDate] = @LoadingDate WHERE [RowNo] = @RowNo">
    <DeleteParameters>
        <asp:Parameter Name="RowNo" Type="Int32" />
    </DeleteParameters>
    <InsertParameters>
        <asp:Parameter Name="FileNo" Type="Int32" />
        <asp:Parameter Name="PONumber" Type="String" />
        <asp:Parameter Name="MaterialCode" Type="String" />
        <asp:Parameter Name="MaterialDescription" Type="String" />
        <asp:Parameter Name="MaterialCategory" Type="String" />
        <asp:Parameter Name="UnitOfMeasure" Type="String" />
        <asp:Parameter Name="Quantity" Type="Int32" />
        <asp:Parameter Name="ContainerType" Type="String" />
        <asp:Parameter Name="LoadingDate" Type="String" />
    </InsertParameters>
    <UpdateParameters>
        <asp:Parameter Name="FileNo" Type="Int32" />
        <asp:Parameter Name="PONumber" Type="String" />
        <asp:Parameter Name="MaterialCode" Type="String" />
        <asp:Parameter Name="MaterialDescription" Type="String" />
        <asp:Parameter Name="MaterialCategory" Type="String" />
        <asp:Parameter Name="UnitOfMeasure" Type="String" />
        <asp:Parameter Name="Quantity" Type="Int32" />
        <asp:Parameter Name="ContainerType" Type="String" />
        <asp:Parameter Name="LoadingDate" Type="String" />
        <asp:Parameter Name="RowNo" Type="Int32" />
    </UpdateParameters>
</asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T17:47:11.067

SqlDataSource 不适合 3 层架构。怎么做取决于你。您不必将其分开，但如果您想在这里拥有适当的 3 层架构，您需要在数据层中使用某种具有 CRUD 操作的数据库处理类。

您链接的文章清楚地解释了这一点。如果您不想使用 DataTable，您可以创建自己的 POCO 对象来处理数据，例如

```
public class Order {... } 
```

您的业​​务层方法如下所示

```
List<Order> GetOrders(...) {...} 
```

和数据

```
//CRUD naming convention
List<Order> ReadOrders (...)  {...} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T04:07:19.847

上面罗兰的回答已经解决了：-

1.  关于分层架构（假设 DAL / BL / UI 的拆分）如何与使用 SQLDataSource 无关，因为在使用 SQLDataSource 时没有这种分离。
2.  如何在不使用 SQLDataSouce 的情况下使用 POCO/Datatables 将其分离出来

关于你问题的最后一部分，我会给我 0.02 美元：-

1.  真的应该分开吗？

好吧，就像最现实的答案一样。这取决于。

这取决于诸如 - 您拥有 3 层架构的主要原因是什么？这种设计的一些优点包括更好的可维护性、更好的可测试性甚至更好的可扩展性。相反，使用 SQLDataSource 可能会加快您的开发速度。

我个人的经验是，由于上述某些原因，分层设计通常是一个更好的主意，因此我通常会避免使用 SQLDataSource，甚至 SQLDataSource 的开发速度优势也可以通过使用 CodeSmith 之类的代码生成器来抵消. 所以，从长远来看，我根本看不到使用 SQLDataSource 的任何好处

# c# - QNetworkAccessManager->get 在 DLL 中调用时冻结

> ID：11865911
> 
> 赞同：2
> 
> 时间：2012-08-08T13:46:08.703
> 
> 标签：c#, c++, qt, dll, qnetworkaccessmanager

我有一个 dll，我想在其中进行一些网络连接，这个 dll 作为非托管 DLL 从 C# 应用程序调用。所有初始化工作正常，但每次 ->get() 应该运行时都会冻结。我有这个代码：

```
.........
QUrl path(remotePath);
QNetworkRequest request(path);

currentFile.setFileName(localPath);
if(!currentFile.open(QIODevice::WriteOnly)){
doCallback("failed to open: " + localPath);
}
doCallback("before get: " + remotePath);
QNetworkReply* reply = this->manager->get(request);
doCallback("after get: " + localPath);
........... 
```

“获取之前”回调执行得很好，但从来没有“获取之后”执行，所以我猜当经理尝试 Get() 方法时它会完全冻结。我是否错过了什么，或者这只是通过 DLL 是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T00:37:57.813

我的猜测是您的 QT 库是针对 opensll 构建的。QNetworkAccessManager 查找 ssl dll、libeay32.dll 和 ssleay32.dll。Win32 LoadLibrary 在尝试加载这些 dll 时会挂起整个进程、UI、信号槽等所有内容。将这些 dll 复制到可执行文件的目录中，加载将很快成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T09:05:47.530

好的，所以我得到了这个工作，我想我会分享我的知识。使用我的非托管 dll，我导出了一个创建新 QCoreApplication 的 init 函数，之后我可以通过使用 QCoreApplication 对象作为执行所有网络的类的父级来使用事件循环。

```
QCoreApplication* coreApp = 0;
extern "C" __declspec(dllexport) void initdll()
{
    if (!coreApp) {
        int argc    = 0;
        coreApp = new QCoreApplication(argc, 0);
    }
    if(!MyFunc){
        MyFunc = new QtDll(coreApp);
    }
} 
```

通过在我尝试任何网络之前在我的 C#（或其他）应用程序中调用这个 init 函数，我通过添加事件循环的 exec 使其与我第一篇文章中的代码一起工作。

```
QNetworkReply* reply = this->manager->get(request);
currentReply = reply;
QEventLoop eLoop;
connect(reply, SIGNAL(readyRead()), this, SLOT(slotReadyRead()));
eLoop.exec( QEventLoop::ExcludeUserInputEvents ); 
```

感谢彼得的反馈。

# ios - 通过 iPhone 应用程序捐款

> ID：11865913
> 
> 赞同：-1
> 
> 时间：2012-08-08T13:46:14.807
> 
> 标签：ios, payment

我正在开发一个应用程序，用户可以通过该应用程序进行捐款。我阅读了有关 Apple 指南的内容，其中规定了以下内容

> 21.慈善和捐款
> 
> 21.1 可以向公认的慈善组织捐款的应用程序必须是免费的
> 
> 21.2 募捐必须通过 Safari 中的网站或短信进行

我会选择第一个选项。现在，我的问题是苹果所说的“**公认的慈善组织**”是什么意思。他们如何区分组织。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:55:26.303

我不知道其他国家的情况，但在加拿大**慈善组织**需要注册才能接受捐款并提供纳税申报表。

查看[http://www.oxfam.ca](http://www.oxfam.ca)的页脚，例如：

> 慈善登记：#12971 6866 RR0001

他们注册到[http://www.cra-arc.gc.ca/chrts-gvng/lstngs/menu-eng.html](http://www.cra-arc.gc.ca/chrts-gvng/lstngs/menu-eng.html)。我很确定苹果会要求政府机构进行注册。您应该研究适用于您所在国家/地区的法律。

# android - 如何在textview中显示隐藏密码？

> ID：11865914
> 
> 赞同：0
> 
> 时间：2012-08-08T13:46:15.120
> 
> 标签：android

我打开了一个edittext对话框的textview onclick，其中inputtype是密码。但是在单击对话框确定按钮后，edittext 值在 textview 上设置，但如果是密码，它会在 textview 上显示任何文本，知道如何在 android 的 textview 上设置隐藏文本（密码）吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T13:50:11.260

我想我理解您的要求...如果这不正确，请尝试更具体...您的英语有点难以理解。

我用一个复选框做到了这一点。你可以将你的代码绑定到任何东西......但这是最好的方法（如果它是你正在寻找的）

```
if (isChecked) {
            // This will display plain-text
            edittextPassword
                    .setTransformationMethod(SingleLineTransformationMethod
                            .getInstance());
        } else {
            // This will display *******
            edittextPassword
                    .setTransformationMethod(PasswordTransformationMethod
                            .getInstance());
        }    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:04:41.623

我不确定我是否理解您的问题，但根据标题，此示例应该可以帮助您：

```
EditText pass = (EditText) findViewById(R.id.password);
pass.setTypeface(Typeface.DEFAULT);
View showPass = findViewById(R.id.show_pass_checkbox);
showPass.setOnClickListener(new OnClickListener() {
      @Override
      public void onClick(View v) {
      String textValue = pass.getText().toString();
      if (((CheckBox) v).isChecked()) {
          pass.setText("");
          pass.setInputType(InputType.TYPE_CLASS_TEXT);
      }else {
          pass.setText    ("");
          pass.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_PASSWORD);
          pass.setTypeface(Typeface.DEFAULT);
      }
      pass.setText(textValue);
}}); 
```

# java - ClassCastException 因为类加载器？

> ID：11865917
> 
> 赞同：10
> 
> 时间：2012-08-08T13:46:30.443
> 
> 标签：java, jvm, classloader, scjp

在玩类加载器时，我遇到了以下异常：

```
Exception in thread "main" java.lang.ClassCastException: xxx.Singleton cannot be cast to xxx.Singleton 
```

这是否意味着来自类加载器的实例不能转换为另一个类加载器的类？

检查我的代码，感谢类加载器，即使使用“”安全性，我也可以在其中实例化 3 个单例。

```
public static void main(String[] args) throws Exception {
        URL basePath = new URL("file:/myMavenPath/target/classes/");

    Object instance = getClassInstance(Singleton.class);
    System.out.println(instance);
    //
    Object instance2 = getClassInstance(
            new URLClassLoader( new URL[]{basePath} , null )
                    .loadClass("my.Singleton")
    );
    System.out.println(instance2);
    //
    Object instance3 = getClassInstance(
            new URLClassLoader( new URL[]{basePath} , null )
                    .loadClass("my.Singleton")
    );
    System.out.println(instance3);

    // Only the 1st cast is ok
    Singleton testCast1 = (Singleton) instance;
    System.out.println("1st cast ok");
    Singleton testCast2 = (Singleton) instance2;
    System.out.println("2nd cast ok");
    Singleton testCast3 = (Singleton) instance3;
    System.out.println("3rd cast ok");
}

private static Object getClassInstance(Class clazz) throws Exception {
    Method method = clazz.getMethod("getInstance");
    method.setAccessible(true);
    return method.invoke(null);
}

class Singleton {

    private static final Singleton INSTANCE = new Singleton();

    public static Singleton getInstance() {
        return INSTANCE;
    }

    private Singleton() {
        Exception e = new Exception();
        StackTraceElement[] stackTrace = e.getStackTrace();
        if (!"<clinit>".equals(stackTrace[1].getMethodName())) {
            throw new IllegalStateException("You shall not instanciate the Singleton twice !",e);
        }
    }

    public void sayHello() {
        System.out.println("Hello World ! " + this);
    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T13:53:27.653

您不能在类加载器之间进行转换。类标识由完全限定名和类加载器组成。[在此处](http://www.ibm.com/developerworks/java/library/j-dyn0429/)检查**类身份危机** 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T13:48:27.613

是的，你是对的。

这在 OSGi 项目中经常发生，因为依赖管理不好。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-08T13:52:47.487

情况正是如此。您不能在由不同类加载器加载的类之间使用强制转换。

[这个问题，“跨类加载器转换”](https://stackoverflow.com/questions/2591779/cast-across-classloader)可能会让事情更清楚......

# ruby-on-rails - 使用 rspec 测试 simple_form 自定义输入

> ID：11865923
> 
> 赞同：6
> 
> 时间：2012-08-08T13:46:42.217
> 
> 标签：ruby-on-rails, rspec, simple-form

我想知道是否有人尝试使用 rspec 测试 simple_form 自定义输入，

我一直在查看 simple_form 测试，但我似乎找不到使用 rspec 使用他们的助手的正确方法。

谢谢，

# vbscript - 在 VBScript 中拉取远程 Windows 服务器架构

> ID：11865925
> 
> 赞同：1
> 
> 时间：2012-08-08T13:46:47.283
> 
> 标签：vbscript, wmi

我有以下代码。我正在尝试获取有关我要连接的远程计算机是 32 位还是 64 位的信息。我尝试在此代码的最后一个片段中执行此操作，但没有成功。这是错误（我更改了远程系统名称）：

> WshShell.RegRead：注册表项“\*remotesystem*\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment\PROCESSOR_ARCHITECTURE”中的根无效。

```
Option Explicit

Dim objWMISrvc,strRemoteComputer,colOSItems,objItem,args,OsType

'String variables
Dim strName,strCaption,strVersion,strCSDVer,strSerial,WshShell

'Adding this in to transfer FQDN variable to this script from ASP.net
Set args = WScript.Arguments
strRemoteComputer = args.Item(0)

Set objWMISrvc = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strRemoteComputer & "\root\cimv2")

CheckOSType objWMISrvc

Sub CheckOSType( objWMISrvc )
        Set colOSItems = objWMISrvc.ExecQuery("Select * from Win32_OperatingSystem",,48)
        For Each objItem in colOSItems
            strName = objItem.CSName 
            'strDesc = objItem.Description 
            'strManufac = objItem.Manufacturer 
            strCaption = objItem.Caption 
            strVersion = objItem.Version 
            strCSDVer = objItem.CSDVersion 
            strSerial = objItem.SerialNumber 
        Next

        Set WshShell = CreateObject("WScript.Shell")
        OsType = WshShell.RegRead("\\" & strRemoteComputer & "\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment\PROCESSOR_ARCHITECTURE")
        If OsType = "x86" then
            WScript.Echo "Windows 32bit system detected"
        elseif OsType = "AMD64" then
            WScript.Echo "Windows 64bit system detected"
        end if

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T17:10:42.867

您可以直接从 WMI 执行此操作，而无需读取注册表。只需使用此脚本遍历您的计算机名称。它返回“32”或“64”。

```
strComputer = "."

Set objWMIService = GetObject("winmgmt:\\" & strComputer & "\root\cimv2")

Set colProcessors = objWMIService.ExecQuery("Select * from Win32_Processor")

For Each objProcessor in colProcessors
    WScript.Echo objProcessor.AddressWidth     'or  objProcessor.DataWidth
    Exit For
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T16:41:18.087

要读取远程计算机的注册表，您必须使用[`StdRegProv`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393664%28v=vs.85%29.aspx)WMI 类

检查这个样本

```
const HKEY_LOCAL_MACHINE = &H80000002
strComputer = "."
Set oReg=GetObject( _
   "winmgmts:{impersonationLevel=impersonate}!\\" &_
    strComputer & "\root\default:StdRegProv")
strKeyPath = "SYSTEM\CurrentControlSet\Control\Session Manager\Environment"
strValueName = "PROCESSOR_ARCHITECTURE"
oReg.GetStringValue _
   HKEY_LOCAL_MACHINE,strKeyPath,strValueName,OsType
WScript.Echo  OsType 
```

# java - 仅更新键/值属性文件中的键？

> ID：11865927
> 
> 赞同：2
> 
> 时间：2012-08-08T13:46:47.963
> 
> 标签：java, properties

我正在尝试处理一个程序，获取给定的输入文件`in.properties`，我想再次将它写到一个新文件中，丢弃文件内容`out.properties`中的前缀`prefix`

即输入文件的内容是

```
prefix.sum.code.root=/compile/pkg 
```

输出文件的内容将是

```
sum.code.root=/compile/pkg 
```

这是我的代码：

```
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Properties;

public class Dummy {

public static void main(String args[])
{
    Properties prop =new Properties();

    try{
        //load a property file
        prop.load(new FileInputStream    ("C:\\Users\\user\\Desktop\\ant\\Filtering\\input.properties"));
        for (String key : prop.stringPropertyNames()){ 
            prop.remove(key);
        }
        prop.store(new FileOutputStream("C:\\Users\\user\\Desktop\\ant\\Filtering\\output.properties"), null);          
    }catch (IOException e)
    {
    e.printStackTrace();
    }
    }} 
```

'KEY' 的返回空值，我无法将新值更新到此字段中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:56:17.633

[`Properties.stringPropertyNames`](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html#stringPropertyNames%28%29)使用and应该可以很容易地做到这一点，[`Hashtable.remove`](http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html#remove%28java.lang.Object%29)作为.`Properties``Hashtable`

```
final Properties properties = ...;
for (final String name : properties.stringPropertyNames()) {
  if (name.startsWith("prefix.")) {
    properties.setProperty(name.substring(6, name.length()), properties.remove(name));
  }
} 
```

# jquery - jQuery json 数据可以从文件中正常工作，但不能从 php Web 服务中正常工作

> ID：11865930
> 
> 赞同：1
> 
> 时间：2012-08-08T13:46:49.047
> 
> 标签：jquery, json

我有一个返回 json 数据的 php web 服务。我的问题是，当我从 url 调用 json 数据时，什么都不返回，但是当调用具有完全相同数据的本地文件（从 url 复制）时工作正常。

我收到的 json 数据例如

```
{"ResponseData":[{"Code":"91010001","Description":"ISADORA ","retailprice":"52.0000000000"},{"Code":"91010002","Description":"ISADORA ","retailprice":"52.0000000000"}]} 
```

我用来获取 json 数据的脚本是

```
 <script>$.getJSON("url",

    function(data){

                    var output = '';

      $.each(data.ResponseData, function(i,data){
         output += '<li><a href="#">' + data.Code + '</a></li>';
         if ( i == 50 ) return false;

      });
         $('#listview1').append(output).listview('refresh');
    });

 </script> 
```

最后，我使用 ajax 脚本来显示 json 数据，但返回错误 [object Object]。

```
 <script>
 var obj 
  $.ajax({
url: 'url",
type: "GET",
dataType: 'json',
success: function( data ) {
  alert( "SUCCESS:  " + data );
},
error: function( data ) {
var obj = $.parseJSON(JSON.stringify(data));
  alert( "ERROR:  " + data );
} 
```

});

你知道如何解决这个问题吗？

提前致谢

**编辑：**

希望这会有所帮助：在应用程序中，我首先使用函数 obj2json 将数据转换为 json，然后使用 json2obj 填充数据。

**EDIT2：** 在 IE9 中，我必须单击允许块内容（用于脚本或 Active X）才能显示来自链接的数据。我如何对其他浏览器执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:56:33.123

当您说“Web 服务”而不是“本地文件”时，听起来您可能正在向不同的域发送请求。由于安全限制，浏览器不允许这样做。考虑要求远程服务支持[JSON-P](http://json-p.org/)进行跨站通信，或者通过你自己的服务器路由请求（即浏览器向你的服务器发送请求，你的服务器向远程服务器发送请求，你的服务器从远程服务器获得响应，您的服务器以相同的响应响应）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T13:53:26.640

你需要使用`JSON.parse(data)`

```
 $.getJSON("url",
function(data){
               data = JSON.parse(data);
               var output = '';
              $.each(data.ResponseData, function(i,data){
     output += '<li><a href="#">' + data.Code + '</a></li>';
     if ( i == 50 ) return false;

  });
     $('#listview1').append(output).listview('refresh');
}); 
```

# asp.net-mvc - 如何处理带有“非活动”项目的下拉列表？

> ID：11865935
> 
> 赞同：1
> 
> 时间：2012-08-08T13:46:54.603
> 
> 标签：asp.net-mvc

我在我的 MVC 4 应用程序中使用了一系列包含 ACTIVE 员工的下拉列表。用于填充这些列表的数据库表包含一个指示活动/非活动状态的标志。

问题是，我如何处理以前分配给案例的工作人员不再在公司工作，因此变得不活跃，从而不符合标准（活跃 == true）出现在列表中的情况？

在这种情况下，我希望选定的工作人员出现在他之前被选中的列表中，但他不应该出现在新病例的列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:57:28.693

一种选择是始终带回所有员工，并在创建选择列表时设置所有选项以使用包含“活动”状态标志的“数据-”属性。然后使用jquery，根据您是处于编辑模式还是创建模式，您可以根据选项的“data-”属性的值隐藏或显示元素。

# iphone - 在 UIimageview 层的边框和内容之间添加空间

> ID：11865943
> 
> 赞同：1
> 
> 时间：2012-08-08T13:47:18.407
> 
> 标签：iphone, objective-c, ios, xcode

嗨，我有内容有图像的 CALayer。现在我需要在其上添加 Tap 手势。怎么可能请给出任何例子来为CALayer添加Tap。

这是我的代码：

```
CALayer *imageLayer=[CALayer layer];
imageLayer.frame=frame;
imageLayer.cornerRadius=10.0;
imageLayer.borderWidth=2.0;
imageLayer.borderColor=[UIColor colorWithRed:0.957 green:0.957 blue:0.957 alpha:1].CGColor;
CALayer *imagecontent=[CALayer layer];
imagecontent.frame=CGRectMake(16, 26, 153, 153);
UIImage *image=[self.pageImages objectAtIndex:page];
imagecontent.contents=(id)image.CGImage;
imagecontent.masksToBounds = YES;   
[imageLayer addSublayer:imagecontent];
[self.scrollView.layer addSublayer:imageLayer]; 
```

在这里，我想为“图像内容”添加点击手势，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:58:58.257

您无法将手势识别器添加到图层，因此您需要将手势识别器添加到其包含的视图中，然后执行附加测试以查看点击是否恰好与相关图层重叠。

将点击手势识别器添加到图层的父视图（假设它被调用`parentView`），然后将此代码添加到手势识别器的选择器中：

```
- (void)handleTap:(UITapGestureRecognizer *)sender {
    CGRect layerFrame = CGRectMake(16, 26, 153, 153);
    CGPoint tapPoint = [sender locationInView:parentView];
    if (CGRectContainsPoint(layerRect, tapPoint)) {
        // The tap happened inside the rectangle of your layer
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:03:19.187

您也可以在 CALayer 上执行 hitTest: 以检查您是否正在点击该图层。只需查看苹果文档中的 hittest 即可。

# javascript - Uppercase tags in Internet Explorer 8

> ID：11865956
> 
> 赞同：0
> 
> 时间：2012-08-08T13:48:06.693
> 
> 标签：javascript, jquery, internet-explorer-8, jqgrid-asp.net

I have an HTML manipulation issue that manifests itself only in IE8.

I had recently written some javascript that analysed a tag and did something depending on what it was.

The piece of code assumed the tag was in lowercase.

```
if(value.indexOf('<input') == -1) 
```

This failed under IE8 and I have to fix it.

Now I could and a second check as follows:

```
if(value.indexOf('<input') == -1 && value.indexOf('<INPUT') == -1) 
```

This will catch both possibilities, but seems awfully messy.

Is there a better way to deal with this situation? Could JQuery deal with this?

"value" is an html string passed to my javascript function from JQGrid. Using IE8 the string is uppercase, using IE9, FF, Chrome, it is lowercase.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:50:28.567

This should do the trick:

`if(value.toLowerCase().indexOf('<input') == -1)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T13:50:32.017

Use

```
if(value.toLowerCase().indexOf('<input') == -1) { ... } 
```

or

```
if(!/\<input/i.test(value)) { ... } 
```

The latter being a regular expression with the ignore case flag set.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T13:52:53.450

Depending on your situation obviously you could also use jquery `.is()` function to test for an element [http://api.jquery.com/is/](http://api.jquery.com/is/)

for instance

```
$target.is("input") 
```

# javascript - 卸载加载了 Headjs 的 JS 文件

> ID：11865962
> 
> 赞同：0
> 
> 时间：2012-08-08T13:48:30.700
> 
> 标签：javascript, javascript-framework

我有一个页面可以在任何特定时间包含不同的内页。

每个内页都需要一个特定的 js 文件，该文件是使用 Headjs 动态加载的。

为了避免（方法和对象名称的）冲突，我想在加载新文件之前卸载旧的 js 文件。

有谁知道该怎么做，或者甚至可能吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:00:00.127

不。理论上没有什么比“卸载”javascript 文件更重要的了。一旦它加载它一直在那里。

但是可能还有其他避免“冲突”的技巧，主要是干净的代码。您的案例的一些示例是 1- 命名空间的使用 2- 避免全局变量 3- 定义范围内的所有内容并理解范围 4- 使用可理解的描述性变量名称，避免命名为 s、i、j 等的变量。除非您是习惯了，知道在做什么。另请注意，由于在请求页面时会加载 javascript 文件，因此会导致额外的流量使用巨大的变量和类名称。

假设您有同名但位于不同范围/命名空间中的函数示例：

```
var myclass;
if (something) myclass = Obj1;
else if (somethingelse) myclass = Obj2;
myclass.func(); 
```

所以你去吧，两个同名的函数，但存在于不同的类中。所以你可以在不同的实现之间切换

希望这可以帮助

# html - 我如何制作这样的桌子？

> ID：11865967
> 
> 赞同：0
> 
> 时间：2012-08-08T13:48:34.730
> 
> 标签：html, css, web-applications

[http://weknowwhatyouredoing.com/](http://weknowwhatyouredoing.com/)

我正在尝试制作一个像这样的表格，其中左侧有个人资料图片，粗体标题/名称和粗体标题/名称下方的文本，以及下方的日期/时间戳......基本上与在那个网站 (http://weknowwhatyouredoing.com/) 或更好的网站（或推特推文）上。

有人知道有关如何完成此操作的任何教程吗？我目前正在使用具有多列的表格，但似乎当一个单元格很大时，该行中的所有单元格都变成相同的高度，我不喜欢这样。在 android 中，这被称为列表视图，但我不确定它在 html/css 世界中是什么，有什么帮助吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:56:30.580

您可以使多个表格彼此相邻浮动。您展示的网站上的元素并没有像我所说的那样对齐。

可以在[此处](http://www.htmlcodetutorial.com/tables/index_famsupp_30.html)找到有关 rowspan 和 colspan 的教程。

如果您使图像跨越 3 行，您可以将粗体文本、内容和日期戳各放在一行中。如果行变得高于内容，您可以使用[valign在行中垂直定位元素。](http://www.w3schools.com/tags/att_td_valign.asp)如果 3 行加在一起高于包含图像的一个跨行，则可能会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:56:50.877

作为行高相等的问题的快速解决方案，您可以使用与[weknowwhatyouredoing.com](http://weknowwhatyouredoing.com/)上使用的相同的布局方法。

将每列包裹在一个单独的`<div>`中，然后将您的`<table>`放在里面。

4 个容器，4 个具有独立行高的桌子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:19:27.910

为什么不使用多个列表元素？表格绝对不会为您提供响应式设计的灵活性。可以根据需要在有限的限制下重新排列多列列表元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T14:00:48.950

你应该看看 Twitter Bootstrap CSS 库[Twitter Bootstrap](http://twitter.github.com/bootstrap/index.html) 它是纯 HTML5/CSS，只使用 div。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T14:01:31.237

为了提高您的 HTML 知识，您可以查看 W3C（Word Wibe Web Consortium）规范。例如，如果您看到[此页面](http://www.w3.org/TR/html4/struct/tables.html)，W3C 解释了 Table 元素的所有结构、属性。

您可以在 google 中找到很多教程（搜索“tutorial create Table HTML”）。

此外，您可以使用在特定网站中显示悬停元素的浏览器插件来帮助您了解网站结构。（ Firefox 和 Chrome 的[firebug](http://getfirebug.com/)，Opera 浏览器的 Dragonfly...）

# facebook - Facebook 注销不工作（会话总是重新创建）。CakePHP + Facebook 插件

> ID：11865968
> 
> 赞同：0
> 
> 时间：2012-08-08T13:48:36.290
> 
> 标签：facebook, cakephp, authentication, cakephp-1.3

所以，我已经有一段时间了，经历了一堆不同的问题，但仍然没有解决方案。

如果我定期登录，一切都很好，我可以按预期注销。但是，如果我使用 facebook 登录（授权应用程序），那么除非我从浏览器菜单中手动删除 cookie，否则无法注销。

按照该逻辑，我想使用此代码在注销操作中销毁 cookie（在我修改会话设置以跨子域工作之后，对于我的特殊情况）：

```
function logout() {
        if ($this->Cookie->read('Auth.User')) {
            $this->Cookie->delete('Auth.User');
        }
        $this->Auth->logout();
        unset($_SESSION['fb_MYAPP_ID_user_id']);
        unset($_COOKIE['fbm_MYAPP_ID']);
        unset($_COOKIE['fbsr_MYAPP_ID']);
        unset($_COOKIE['CAKEPHP']);
        //pr($_SESSION);pr($_COOKIE);exit(); //here I see that the cookies are in fact deleted
        $this->redirect($this->Auth->logout());
        $this->redirect('/login');
    } 
```

但每次注销重定向后，它都会让用户返回、登录并重新创建会话/cookie。

我经历了很多这样的问题和答案，但没有一个对我有用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:33:38.350

您不能简单地从 cookie 容器中取消设置 cookie，这只是请求中包含的 cookie 的服务器端表示。

要删除 cookie，您需要设置完全相同的 cookie（域、路径、名称），但过期时间已过 - 当客户端读取时，这将导致 cookie 不会与下一个请求一起发送。

[您可以在https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php#L132](https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php#L132)中看到这是如何完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:00:52.787

我最终使用了以下答案的组合：

[CakePHP + Facebook](https://stackoverflow.com/questions/5190421/cakephp-facebook)

[$facebook->getSession() 呼叫下方的呼叫中断页面](https://stackoverflow.com/questions/6876629/facebook-getsession-call-breaks-page-below-the-call)

第一个的代码更完整，但是已经过时了。我还保留了我在问题中的 unset() 调用，现在它似乎工作得很好。

# playframework-2.0 - Ebean OneToMany 的例外情况

> ID：11865970
> 
> 赞同：0
> 
> 时间：2012-08-08T13:48:48.633
> 
> 标签：playframework-2.0, one-to-many, ebean

我在 Play2.0.2 中使用 Ebeans 我有两个这样的模型：

```
@Entity
@Table(name="GRP_MST")
public class GroupMst extends Model {

@Id
@Constraints.Required
@Formats.NonEmpty
public String groupid;
......
@OneToMany(cascade = CascadeType.ALL)
public List<DtlMenuGrp> dtlMenuGrpList; // This one is giving problems 

} 
```

我的`DtlMenuGrp`模型看起来像：

```
@Entity
@Table(name="DTL_MENU_GRP")
public class DtlMenuGrp extends Model {

@Constraints.Required
@Formats.NonEmpty
public String groupid;
....
} 
```

我想在我的控制器中加入上述两个模型：

```
GroupMst groupMst = GroupMst.find.where().eq("groupid",data.get("grpid")).findUnique();
List<DtlMenuGrp> dtlMenuGrpList = groupMst.dtlMenuGrpList; 
```

但这给了我以下找不到列的例外情况：

```
Caused by: javax.persistence.PersistenceException: Query threw SQLException:Invalid column name 'group_mst_groupid'. 
Bind values:[1000] 
Query was:
select t0.groupid c0
        , t1.groupid c1, t1.rightid c2, t1.status c3, t1.createdby c4, t1.createdon c5 
from GRP_MST t0
left outer join DTL_MENU_GRP t1 on t1.group_mst_groupid = t0.groupid  
where t0.groupid = ?   
order by t0.groupid 
```

为什么我的专栏被投射为`group_mst_groupid`而不是`groupid`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:30:55.543

它不能被转换`gruopid`为你`DtlMenuGrp`也包含这样的字段（nota bene你没有忘记`@id`注释吗？）

有一些规则`Ebean`可以为关联创建字段键，并`group_mst_groupid`适合它，因为它是模型名称及其`@Id`字段的组合。我刚刚测试了它将如何使用您提供的模型定义生成 1.sql，它的创建方式与此完全一样：

```
create table DTL_MENU_GRP (
group_mst_groupid         varchar(255) not null,
groupid                   varchar(255))
; 
```

更重要的是，我对此没有任何错误。

我的建议是，尝试更改模型名称以避免在其名称中使用神秘的缩写，始终尝试`single`为模型和字段找到可能的最短单词。在真正需要之前，尽量避免使用注释覆盖表名。然后，您将能够更快地发现错误，并且如果需要手动修复它们...

IE。而是`GroupMst`（表`GRP_MST`）创建一个带有`id`字段的 Group 模型

```
@Entity
public class Group extends Model {

  @Id
  public Long id; //why not a numeric id? for an example Long ?

  @OneToMany(cascade = CascadeType.ALL)
  public List<Menu> menus;
  // ...

} 
```

只是猜测...

```
@Entity
public class Menu extends Model {

  @Id
  public Long id;
  // ...

} 
```

然后，使用 Ebean 从头开始​​生成整个 DDL，您会惊讶于它是多么简单和合乎逻辑……

# java - JSP直接调用函数的效率

> ID：11865974
> 
> 赞同：-1
> 
> 时间：2012-08-08T13:49:11.157
> 
> 标签：java, web-services, jsp, glassfish

让 JSP 页面直接调用我的 java 类是个好主意，还是更好地向我的 Web 服务发布 http 帖子？在可扩展性和安全性方面有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:04:17.683

JSP 文件用于生成 Servlet。所以 JSP-Files 和 Servlet 基本上是一样的。安全性或可扩展性没有区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:07:10.243

JSP 有自己的职责，视图生成。除非需要，否则在 JSP 中嵌入任何 java 代码是没有意义的。调用 Servlet/其他框架控制器来执行业务逻辑。

如果调用在同一个 Web 应用程序中，让我们说从 JSP1 到 JSP2（或）从 JSP1 到 Servlet2，那么 Web 服务调用没有意义。它们会很重。

# php - preg_match 不匹配

> ID：11865976
> 
> 赞同：1
> 
> 时间：2012-08-08T13:49:22.407
> 
> 标签：php, regex, preg-match

我正在尝试从`transaction(123456)`HTML中获取 ID

它似乎没有返回任何东西。

```
 $response = "</body> </html><script type='text/javascript'>transaction(123456);</script>";

 preg_match('/^transaction\((\d+)\)/', $response, $match);

 print_r($match);

if (is_numeric($match[1])) {
  echo "Your ID: " . $match[1];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T13:49:53.257

因为您有字符串 anchor 的开头`^`，而`transaction(`不是字符串的开头。删除它（或添加一个非贪婪匹配），它会工作（如[这个演示](http://viper-7.com/P0cIZC)所示）：

```
preg_match('/transaction\((\d+)\)/', $response, $match); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:51:02.560

```
preg_match('/^transaction\((\d+)\)/', $response, $match); 
```

应该

```
preg_match('/transaction\((\d+)\)/', $response, $match); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T13:51:19.677

```
$response = "</body> </html><script type='text/javascript'>transaction(123456);</script>";

preg_match('/transaction\((\d+)\)/', $response, $match);

print_r($match);

if (is_numeric($match[1])) {
  echo "Your ID: " . $match[1];
} 
```

这是你想要的代码。原因是，您的模式以“^”开头，这个字符意味着，您希望“事务”出现在字符串“$response”的前面，但是有“...”

# mongodb - 如何按字段值 $pull 数组元素（当元素是对象时）

> ID：11865979
> 
> 赞同：3
> 
> 时间：2012-08-08T13:49:45.370
> 
> 标签：mongodb

我正在使用 MongoDB 并尝试从与条件匹配的数据库中的文档中删除数组元素（它们本身是嵌入的文档）。为此，我尝试在更新命令中使用 $pull 运算符。但在某些情况下我无法完成这项工作（参见下面的描述）。我错过了什么？

提前致谢。

-萨钦

```
> use test
switched to db test

//First, insert a record with an array of addresses, with array elements being embedded objects with exactly 1 element (email)
> db.users.insert({
    name: 'smith',
    addresses:[{email:'a@b'},{email:'c@d'}]
    });... ... ...

//Result of the insertion
> db.users.find()
{ "_id" : ObjectId("50226b46545b516cdbadbcd9"), "name" : "smith", "addresses" : [ { "email" : "a@b" }, { "email" : "c@d" } ] }

//From records with name= Smith, try to $pull any array elements with email a@b

> db.users.update({name:'smith'}, {$pull:{addresses:{email:'a@b'}}});> 

//After successful $pull

> db.users.find()
{ "_id" : ObjectId("50226b46545b516cdbadbcd9"), "name" : "smith", "addresses" : [ { "email" : "c@d" } ] }

//Now insert  a record with an array of addresses, with array elements being embedded objects with exactly 2 elements (email, phone)

> db.users.insert({
    name: 'smith',
    addresses:[{email:'a@b', phone: '12345'},{email:'c@d',phone :'54321'}]
    });... ... ... 

//Result of the insertion

> db.users.find()
{ "_id" : ObjectId("50226b46545b516cdbadbcd9"), "name" : "smith", "addresses" : [ { "email" : "c@d" } ] }
{ "_id" : ObjectId("50226bfc545b516cdbadbcda"), "name" : "smith", "addresses" : [
        {
                "email" : "a@b",
                "phone" : "12345"
        },
        {
                "email" : "c@d",
                "phone" : "54321"
        }
] }

//From records with name= Smith, again try to $pull any array elements with email a@b

> db.users.update({name:'smith'}, {$pull:{addresses:{email:'a@b'}}})

// - Unsuccessful $pull (Why? How to fix this)
> db.users.find()
{ "_id" : ObjectId("50226b46545b516cdbadbcd9"), "name" : "smith", "addresses" : [ { "email" : "c@d" } ] }
{ "_id" : ObjectId("50226bfc545b516cdbadbcda"), "name" : "smith", "addresses" : [
        {
                "email" : "a@b",
                "phone" : "12345"
        },
        {
                "email" : "c@d",
                "phone" : "54321"
        }
] }

//Meanwhile, the single element pull still works as before -

> db.users.update({name:'smith'}, {$pull:{addresses:{email:'c@d'}}})

> db.users.find()
{ "_id" : ObjectId("50226b46545b516cdbadbcd9"), "name" : "smith", "addresses" : [ ] }
{ "_id" : ObjectId("50226bfc545b516cdbadbcda"), "name" : "smith", "addresses" : [
        {
                "email" : "a@b",
                "phone" : "12345"
        },
        {
                "email" : "c@d",
                "phone" : "54321"
        }
] }
> 
```

感谢您的回复，尽管那没有用。这是 Mongo shell 的脚本。

```
> db.users.find()
{ "_id" : ObjectId("50226b46545b516cdbadbcd9"), "name" : "smith", "addresses" : [ ] }
{ "_id" : ObjectId("50226bfc545b516cdbadbcda"), "name" : "smith", "addresses" : [
        {                               
                "email" : "a@b",
                "phone" : "12345"
        },
        {
                "email" : "c@d",
                "phone" : "54321"
        }
] }
> db.users.update({name:'smith'}, {$pull:{"addresses.email": 'a@b'}})
Modifier spec implies existence of an encapsulating object with a name that already represents a non-object, or is referenced in another $set clause
> db.users.find()
{ "_id" : ObjectId("50226b46545b516cdbadbcd9"), "name" : "smith", "addresses" : [ ] }
{ "_id" : ObjectId("50226bfc545b516cdbadbcda"), "name" : "smith", "addresses" : [
        {
                "email" : "a@b",
                "phone" : "12345"
        },
        {
                "email" : "c@d",
                "phone" : "54321"
        }
] }
> 
```

...所以基本上点符号没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:57:57.840

好的，所以我找到了答案。

首先，我使用的是 MongoDB 1.2.2，这个版本不支持上面描述的 update $pull 操作。

接下来，我升级到 MongoDB 2.06（最新稳定版）。然后当我使用 1.2.2 中创建的旧数据库时，结果相同。

接下来，我在 2.06 中创建了一个新数据库，然后尝试了 @sergio-tulentsev 的建议，即 db.users.update({name:'smith'}, {$pull:{"addresses.email": 'a@b '}}）

不幸的是，这也不起作用。

最后，我尝试了我无法执行的初始命令

db.users.update({name:'smith'}, {$pull:{addresses:{email:'a@b'}}})

它奏效了！！！

所以外卖： 1\. 更新 MongoDB 服务器 2\. 旧版本的数据库文件不起作用，只适用于新的数据库文件。现在我需要以某种方式将我的数据迁移到较新的版本。

更新：...此迁移就像发出 mongod --upgrade 命令一样简单。

# javascript - javascript提示多个变量

> ID：11865986
> 
> 赞同：1
> 
> 时间：2012-08-08T13:50:01.237
> 
> 标签：javascript, prompt

希望是直截了当的：

我想编写一些 javascript 代码来接收来自用户的多个变量的多个输入。有点像提示，但有三个选项（有点像一个盒子上的 3 个提示）。

关于解决此问题的最佳方法的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:09:21.380

创建一个包含必要字段的表单，并在其“提交”按钮上放置一个 JavaScript 处理程序。

要么在 HTML 中创建它并通过它们的 id 查询元素，要么直接使用 JS 中的 DOM 方法创建 - 你将从一开始就直接引用元素。

# php - 如果用户在 jquery 中单击刷新页面，如何显示上一个结果？

> ID：11865989
> 
> 赞同：2
> 
> 时间：2012-08-08T13:50:05.087
> 
> 标签：php, jquery, ajax

我正在工作图片库网站。图片搜索页面将像谷歌图片搜索一样工作。在滚动时，它使用 jquery 显示下一个结果。如果用户刷新页面，如何显示相同的结果？

谢谢， 沙姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:51:23.990

您可以使用查询字符串来获取用户搜索参数，也可以使用搜索文本字段在页面刷新时显示结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T16:20:55.797

使用查询参数仅有助于在刷新后从头开始显示页面，但我要做的是，

有两种选择，

1.  使用[cookie](http://www.quirksmode.org/js/cookies.html)
2.  使用 HTML5[本地存储或会话存储](https://developer.mozilla.org/en-US/docs/DOM/Storage)

我更喜欢第二种，但是这两种方式都可以缓存当前的搜索数据，以便以后使用。这将帮助您显示不同的结果页面，其中查询参数保持不变。

# sorting - 交叉表列组排序

> ID：11865997
> 
> 赞同：4
> 
> 时间：2012-08-08T13:50:30.953
> 
> 标签：sorting, jasper-reports, ireport, crosstab

我正在尝试对***交叉表***中的列组进行排序，但*iReport*正在按名称升序应用自己的排序。我尝试插入“Order By Exp.”，但没有成功。（未找到字段错误！）

按字段/变量添加我们自己的排序的正确方法是什么？或者我已经对数据进行了预排序，按原样查看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T11:56:15.540

我有一个类似的问题。我想显示数据库中的“标题”，但我不希望它按字母顺序排序，因为标题的顺序是用户确定的。

我有一个我想要排序的 HeadingOrder 字段。要在排序表达式中使用它，它必须在交叉表中。

我的专栏中有标题，所以制作了 2 个专栏组：1) HeadingOrder 2) 标题。

我删除了显示标题顺序号的文本字段并折叠了该区域，因此它不显示。这允许交叉表在使用 HearingOrder 字段作为主导排序时显示标题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T07:25:16.207

解决方法：

1.  将字段（将在列组中使用）与 sql 查询本身中的排序依据字段连接起来。假设字段名称为“title”，排序字段名称为“rank”，则

    ```
    select (mt.rank ||'-'|| mt.title) as title from my_tab mt 
    ```

    （上面特定于 postgresql 的查询）

2.  像往常一样在 corsstab 列组中使用这个“标题”字段。

3.  单击交叉表上“标题”列组的文本字段。

4.  从属性面板将其“文本字段表达式”编辑为*$V{title}.split("/")[1]*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-09T13:43:23.470

右键单击 ReportInspector 中的交叉表->单击交叉表数据，将打开一个新窗口。现在点击数据是预先排序的。这将完成工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-07T16:36:08.247

**[这是JasperReports](https://stackoverflow.com/questions/8172301/crosstab-sorting-in-jasperreports/21632977#21632977)**中交叉表排序的副本，并且引用**的基于隐藏组的“相当干净但棘手的解决方案”**效果很好

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-05T10:36:19.390

user1120946，对我来说，诀窍是禁用子组的总数（例如标题），并仅启用过度组的总数（例如 HeadingOrder）。然后只需将度量放在 HeadingOrderTotal 列中。

这意味着对第二个答案的评论。

# javascript - window.location.hash = ""; 强制在 Chrome 和 Safari 上重新加载框架集

> ID：11865999
> 
> 赞同：2
> 
> 时间：2012-08-08T13:50:40.183
> 
> 标签：javascript, html, google-chrome, safari, frameset

我有以下页面：

```
<head>
<script type="text/javascript">
  $(document).ready(function(){
    var hash = window.location.hash;
    var src = hash.substring(1); //remove #
    window.location.hash = "";
    if(src != ''){
      frames['principal'].document.location.href = decodeURIComponent(src);
    }
  });  
</script>
</head>
<frameset rows="18%,*" class="pagecontainer">
  <frame name="top" noresize src="site/paginatop.htm" target="top" scrolling="no" frameborder="0"/>
  <frameset cols="11%,*">
    <frame name="lateral" noresize src="site/paginalateral.htm" target="lateral" frameborder="0"/>
    <frame name="principal" id="principal" noresize src="site/paginahome.htm" target="principal" frameborder="0"/>
  </frameset>
</frameset> 
```

当我在散列中加载带有 URL 的页面时，散列被加载到框架 [主体] 中。
但是，当我清除哈希（window.location.hash = "";）时，Chrome 和 Safari 会重新加载页面，因此 frame[principal] 获取默认值（site/paginahome.htm）。我已经发现了一个报告该行为的错误[https://bugs.webkit.org/show_bug.cgi?id=24578](https://bugs.webkit.org/show_bug.cgi?id=24578)
任何解决方法将不胜感激！

提前致谢。

**已解决**
我找到了解决**window.history.replaceState**问题的方法：

```
$(document).ready(function(){
  var src = getHash();
  if(src != ''){
    frames['principal'].document.location.href = decodeURIComponent(src);
    var strBrowser = navigator.userAgent.toLowerCase();
    if (strBrowser.indexOf('chrome') > 0 || strBrowser.indexOf('safari') > 0) {
      if(history.pushState) {
        window.history.replaceState(null, window.document.title, '#');
      }
    }
    else {
      window.location.hash = "";
    }
  }
  setFavicon();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:03:00.700

在 Chrome 中，`window.location.hash = ""`不会重新加载页面。它只是将其滚动到顶部。

但也许使用 POST 会比散列更好地解决您的问题。