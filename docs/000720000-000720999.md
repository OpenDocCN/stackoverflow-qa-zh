# StackOverflow 问答 000720000-000720999

# sql-server-2005 - 使用 2008 恢复 2005 SQL 数据库时出现问题

> ID：720003
> 
> 赞同：1
> 
> 时间：2009-04-06T01:21:08.030
> 
> 标签：sql-server-2005, backup, sql-server-2008-express, database-restore

我有一个用 SQL Server 2005 创建的数据库并创建了一个备份 (*.bak) 现在我想用 2008 恢复它但是哎呀，我收到以下错误：

```
TITLE: Microsoft SQL Server Management Studio
------------------------------

Restore failed for Server 'SHIMMY-PC\SQLEXPRESS'.  (Microsoft.SqlServer.SmoExtended)

For help, click: http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&ProdVer=10.0.1600.22+((SQL_PreRelease).080709-1414+)&EvtSrc=Microsoft.SqlServer.Management.Smo.ExceptionTemplates.FailedOperationExceptionText&EvtID=Restore+Server&LinkId=20476

------------------------------
ADDITIONAL INFORMATION:

System.Data.SqlClient.SqlError: The media set has 2 media families but only 1 are provided. All members must be provided. (Microsoft.SqlServer.Smo)

For help, click: http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&ProdVer=10.0.1600.22+((SQL_PreRelease).080709-1414+)&LinkId=20476

------------------------------
BUTTONS:

OK
------------------------------ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-06T02:36:55.837

当您进行原始备份时，“目标”窗口列出了两个不同的路径。您选择了一个，假设备份将仅使用该一个路径。实际发生的是备份将自己条带化到两条路径上——每条路径的一半备份。您收到的还原消息是因为还原需要备份的两半，但只能找到一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T01:34:55.067

我不认为是2008的问题，您可以将备份安装回sql 2005。

看看这篇[文章](http://social.technet.microsoft.com/Forums/en-US/sqltools/thread/abf50e00-c9b0-4809-9e61-43ed8a53e968/)。

# c# - 如何从 C# ASP.NET 网页调用非托管 C/C++ 代码

> ID：720004
> 
> 赞同：6
> 
> 时间：2009-04-06T01:21:35.643
> 
> 标签：c#, asp.net, c++, dll, unmanaged

我有一个使用 C# 的 ASP.NET 网站，我想从非托管 C/C++ DLL 调用函数。我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-06T01:33:09.937

1.  创建一个非托管 dll：

    ```
    extern "C" __declspec(dllexport) __cdecl int sum(int a,int b); ----> 
    ```

2.  创建一个命名空间/类到 DllImport 上面的 DLL

    ```
    using System.Runtime.InteropServices;
    namespace ImportDLL
    {
    public class importdll
    {
    public importdll()
    {
    }

    DllImport("mysum.dll",
              EntryPoint="sum",
              ExactSpelling=false,
              CallingConvention = CallingConvention.Cdecl)]
    public extern int myfun(int a, int b);
    }
    } 
    ```

3.  在后面创建一个aspx代码

    ```
    using ImportDLL;
    namespace TEST
    {
     public int my_result;
     protected importdll imp = new importdll();
     my_result = imp.myfun(1,1);
    } 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-06T01:31:19.473

查看 P/Invoke。

[在 C# 中使用 P/Invoke 调用 Win32 DLL](https://msdn.microsoft.com/en-us/library/aa719104(v=vs.71).aspx)

如果它是 COM dll，那么您可以使用[COM Interop](http://msdn.microsoft.com/en-us/library/aa645736(VS.71).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-06-03T14:52:43.790

只需添加[pinvoke.net 即可](http://pinvoke.net/)满足您的 Win32 需求。

# jquery - 引用嵌套在 a 中的 2 个图像中的任何一个 使用 jQuery

> ID：720007
> 
> 赞同：2
> 
> 时间：2009-04-06T01:24:23.687
> 
> 标签：jquery, dom, css-selectors

我的 DOM 看起来像：

```
<div id="blah-1">
  <div class="class1">
     <div class="class11>
        <a href=""><img src=""></a> <b>blah</b>
        <a href=""><img src=""></a>
     </div>
  </div>
</div> 
```

我必须更改第一个或有时是第二个 img 的来源。

我正在使用 jQuery，但还没有强大的选择器处理能力！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T01:34:28.093

您可以使用 :eq(n) 在给定位置选择元素：

```
$("#blah-1 .class1 .class11 img:eq(0)").attr("src", newSource);
$("#blah-1 .class1 .class11 img:eq(1)").attr("src", newSource); 
```

哦，您在第 11 类之后缺少一个结束 "，不确定这是否是粘贴的代码。

# javascript - 运行 ajaxRequest.open 时未显示警报 3

> ID：720014
> 
> 赞同：0
> 
> 时间：2009-04-06T01:28:50.587
> 
> 标签：javascript, ajax

我的 AJAX 脚本有问题，我输入了一些警报以查看问题所在，这是我的脚本：

```
<script language="javascript" type="text/javascript">
    function positionUpdate(var1, var2){
        alert ("1");
        var queryString = "?var1=" + var1 + "&var2=" + var2;
        alert ("2");
        ajaxRequest.open("GET", "position_update.php" + queryString, true);
        alert ("3");
        ajaxRequest.send(null);
        alert ("4");
    }
</script> 
```

当我运行它时，警报 3 没有出现，所以看起来问题出在这条线上，但我不知道它是什么：

```
ajaxRequest.open("GET", "position_update.php" + queryString, true); 
```

谢谢，斯坦尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T01:36:56.713

您还没有实例化 ajaxRequest 对象。那时，它仍然是未定义的。

你需要先拥有这个：

```
try{
        // Opera 8.0+, Firefox, Safari
        ajaxRequest = new XMLHttpRequest();
    } catch (e){
        // Internet Explorer Browsers
        try{
            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try{
                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e){
                // Something went wrong
                alert("Your browser broke!");
                return false;
            }
        }
    } 
```

# jquery - 如何从子节点中选择父节点？

> ID：720017
> 
> 赞同：1
> 
> 时间：2009-04-06T01:31:46.727
> 
> 标签：jquery

我写了一些 jquery 代码来获取`div`另一个内部的点击事件，`div`就像这样。

```
<div class="parent">
  <div class="values_to_get">
    <div class="catch_click_event_here">
    </div>
  </div>
</div> 
```

`class="values_to_get"`所以现在有人可以帮助我，当我点击`div`with时，我需要在 div 中获取值`class="catch_click_event_here"`。`divs`我有一个列表`class="parent"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T01:40:03.023

```
$('div.catch_click').click(function (){
    variable = $(this).parent().attr('value');  //this is div.catch_click
}); 
```

In that way, you get the content of the 'value' attribute in the "values to get" div. Don't know what values you need, but just replace 'value' with the attribute you are looking for.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T01:37:21.720

如果您使用 jquery 1.3 或更高版本，您可以使用该[`closest`](http://docs.jquery.com/Traversing/closest)方法

```
$('.catch_click_event_here').click(function() {
    $(this).closest('.values_to_get').val();
}); 
```

# c# - 免费数学方程图像生成器

> ID：720026
> 
> 赞同：3
> 
> 时间：2009-04-06T01:36:57.197
> 
> 标签：c#, math

我正在寻找一个生成数学方程的组件。就像 wikipedia 所拥有的一样，但对于 Windows 服务器。

如果我输入 x^2，它将生成一个格式正确的 gif 作为输出

它必须在 IIS 和 .NET 上运行，而不是来自某个地方的 Web 服务。

有没有人见过这样做的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T01:43:46.197

[Check this out](http://www.codecogs.com/). They have a LaTeX like equation editor, and apparently the can compile their code with Visual Studio. You might be able to get something working related to your question.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T04:04:15.813

好吧，一种选择是编写您自己的解析器——即采用“x^2”并构建一个 .NET 3.5`Expression`来做同样的事情。拥有`Expression`后，您可以使用`Compile()`来获取可用于生成积分的委托（`Func<double,double>`例如）。这不是大量的工作（几个月前我花了大约 2 个小时来编写一个类似的（虽然是基本的）解析器）。

当然，您仍然需要担心成像方面......也许几个月前发布的[.NET 图表控件？](http://weblogs.asp.net/scottgu/archive/2008/11/24/new-asp-net-charting-control-lt-asp-chart-runat-quot-server-quot-gt.aspx)（不仅仅是 ASP.NET）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-03-23T21:55:03.007

我正在使用[MathJax](http://www.mathjax.org/)在网站中生成方程式，基本上我编写 HTML。我没有任何问题。

# php - PHP 立即回显

> ID：720030
> 
> 赞同：6
> 
> 时间：2009-04-06T01:40:14.333
> 
> 标签：php, io, echo

我有一个相当长的数据挖掘脚本，在其中的一部分我将一些信息回显到页面（实际上是在 foreach 循环期间。）

但是我注意到信息不是像我希望的那样立即发送到浏览器，而是以“段”的形式发送到浏览器。

在我的回声之后我可以使用一些功能来立即将所有数据发送到浏览器吗？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-06T01:43:31.050

你可能想要`flush()`. 但是，PHP 可能正在使用输出缓冲。有几种方法可以改变事情，但简而言之，你可以`flush()`，然后`ob_flush()`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-06T01:44:28.350

您可以尝试在每次回显后使用 flush()，但即使这样也不能保证根据您正在运行的 Web 服务器写入客户端。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-21T05:16:07.823

是的，将输出填充到 1024 字节将导致大多数浏览器开始显示内容。

但我们也从@nobody 对问题“[如何在每次 `echo` 调用后刷新输出？](https://stackoverflow.com/questions/3133209/how-to-flush-output-after-each-echo-call) ”的回答中了解到，1024 字节浏览器缓冲效果仅在浏览器必须猜测页面的字符编码时发生，可以通过发送正确的 Content-Type 标头（例如“Content-Type: text/html; charset=utf-8”），或通过适当的 html 元标记指定内容字符集。它在所有浏览器中都对我有用。

所以基本上，所有需要做的就是：

```
header('Content-Type: text/html; charset=utf-8');
ob_implicit_flush(true); 
```

不需要额外的填充或冲洗，这对代码有很大的美观效果！当然，标题必须在任何内容之前发送，并且还必须确保没有输出缓冲正在进行。

问题绝对为我解决了！如果它对您有用，请 (+1) @nobody 回答另一个问题。如果仍然遇到问题，我建议查看其他问题的答案，以了解可能会阻止隐式刷新正常工作的其他特定情况。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-06T02:33:59.150

另请注意，某些浏览器在响应正文包含一定数量的数据（如 256 或 1024 字节）之前不会开始显示任何内容。我在页面顶部附近看到了填充数据之前的应用程序，在它们进行刷新之前，它们有一个 1024 字符长的注释。这有点骇人听闻，但很有必要。

这适用于 Internet Explorer 和 Safari IIRC。

所以，

*   如果是第一次刷新，请确保您已输出至少 1024 字节（不包括 HTTP 标头）。
*   调用flush()
*   如果您可以确定存在输出缓冲，请发出 ob_flush()

我喜欢只使用

```
while (ob_get_level()) ob_end_flush(); 
```

在我的脚本开头附近的某个地方，然后只是

```
flush(); 
```

每当我想冲洗。这假定您根本不想要任何输出缓冲，即使它是在您的脚本之前设置的（例如在 PHP.ini 或 htaccess 配置中）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-06T01:52:04.680

您应该能够使用这样的东西来强制立即发送输出。将其放在您希望发送输出的代码部分。

```
flush();
ob_flush(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-11-09T18:34:49.017

呸！我终于找到了谷歌浏览器缓冲区问题的答案！感谢boymakesh 朝着正确的方向前进。这是我使用的功能：

```
function buffer_flush(){

    echo str_pad('', 512);
    echo '<!-- -->';

    if(ob_get_length()){

        @ob_flush();
        @flush();
        @ob_end_flush();

    }

    @ob_start();

} 
```

这就是我所说的：

```
show_view('global', 'header'); // Echos the <html><head>... tags and
                               // includes JS and CSS.

show_view('global', 'splash_screen'); // Shows a loading image telling
                                      // the user that everything's okay.

buffer_flush(); // Pretty obvious. At this point the loading view shows
                // up on every browser i've tested (chrome, firefox,
                // IE 7 & 8)

show_view('global', 'main'); // Has a loop that echos "Test $i<br>" 5
                             // times and calls buffer_flush() each time.

show_view('global', 'footer'); // End the html page and use JQuery to
                               // fade out the loading view. 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-07-31T13:05:13.270

要在 Google chrome 中完美解决此问题，请尝试以下操作：

```
$i = 0;
$padstr = str_pad("",512," ");
echo $padstr;

while ($i <= 4){
    $padstr = str_pad("",512," ");
    echo $padstr;
    echo "boysmakesh <BR> ";
     flush();
    sleep(2);
    $i = $i + 1;
} 
```

Ee 在发送每个回声之前发送 512 个字节。在刷新之前不要忘记放在`<BR>`内容的末尾。否则它在 Chrome 中不起作用，但在 IE 中起作用。

我们填充的数据取决于浏览器。对于某些浏览器来说，256 字节就足够了，但有些浏览器需要 1024 字节。对于铬，它是 512。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-03-04T11:19:12.987

```
ignore_user_abort(TRUE); // run script in background
set_time_limit(0); // run script forever
$interval=150000;
$i = 0;

if(
  strpos($_SERVER["HTTP_USER_AGENT"], "Gecko") or
  strpos($_SERVER["HTTP_USER_AGENT"], "WebKit")
){
  # important to change browser into quirks mode
  echo '<?xml version="1.0" encoding="iso-8859-1"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">';
}

function buffer_flush(){
    echo "\n\n<!-- Deal with browser-related buffering by sending some incompressible strings -->\n\n";
    for ( $i = 0; $i < 5; $i++ )
        echo "<!-- abcdefghijklmnopqrstuvwxyz1234567890aabbccddeeffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzz11223344556677889900abacbcbdcdcededfefegfgfhghgihihjijikjkjlklkmlmlnmnmononpopoqpqprqrqsrsrtstsubcbcdcdedefefgfabcadefbghicjkldmnoepqrfstugvwxhyz1i234j567k890laabmbccnddeoeffpgghqhiirjjksklltmmnunoovppqwqrrxsstytuuzvvw0wxx1yyz2z113223434455666777889890091abc2def3ghi4jkl5mno6pqr7stu8vwx9yz11aab2bcc3dd4ee5ff6gg7hh8ii9j0jk1kl2lmm3nnoo4p5pq6qrr7ss8tt9uuvv0wwx1x2yyzz13aba4cbcb5dcdc6dedfef8egf9gfh0ghg1ihi2hji3jik4jkj5lkl6kml7mln8mnm9ono -->\n\n";

    while ( ob_get_level() )
        ob_end_flush();

    if(ob_get_length()){
        @ob_flush();
        @flush();
        @ob_end_flush();
    }
    @ob_start();
}

ob_start(); 

do{

  if($i<10){
    buffer_flush(); 
    echo ". ";    
    buffer_flush(); 
    usleep($interval);

  } else {
    echo sprintf("<pre>%s</pre>", print_r($_SERVER,true));
    break;
  }

  $i++;

}while(true); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-05T10:32:40.263

在 IIS 7、IE 11（win 服务器）上运行 php 5.5 我发现这可以作为文件的开头行。请注意，将 while 语句放在标头之前会导致标头已写入错误。

```
header('Content-Type: text/html; charset=utf-8');
while (ob_get_level()) ob_end_flush();
ob_implicit_flush(true); 
```

脚本中对 ob_flush() 的进一步引用导致缓冲区不存在错误。

当我处理文件并将 sql 语句发送到浏览器时，这工作正常，但是当我连接数据库（ms 服务器 2008）时，直到脚本完成，我才返回任何输入。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-12-13T20:26:04.487

根据 thomasrutter 的回答，这种组合终于对我有用

```
while (ob_get_level()) ob_end_flush();
ob_implicit_flush(true); 
```

# c - How to interpret this debugging error

> ID：720033
> 
> 赞同：2
> 
> 时间：2009-04-06T01:41:03.240
> 
> 标签：c, debugging, segmentation-fault

As a hacker-in-training, I decided to go about making my own string_reverse function that takes a string, allocates memory for a new string, and returns a pointer to a new string, but I'm not getting what I desire, as this returns a segmentation fault.

```
#include <stdio.h>
#include <stdlib.h>

char* string_reverse(char* string);

char* string_reverse(char* string) {
  int len = 0;
  for (int i = 0; *(string + i) != '\0'; ++i)
    len++;

  char* result = (char*)malloc(len * sizeof(char));
  if (result == NULL){
    puts("Pointer failure");
    exit(EXIT_FAILURE);
  }

  for (int i = 0; *(string + i) != '\0'; ++i)
    *(result + (len - i)) = *(string + i);

  return *result;
}

int main() {
  char* str= "Ni Hao!";
  char* result = string_reverse(str);

  printf("%s\n", result);
  free(result);
  return 0;
} 
```

In return, I get this debugging message:

```
Starting program: /home/tmo/string_reverse 

Program received signal SIGSEGV, Segmentation fault.
0xb7e5b3b3 in strlen () from /lib/i686/cmov/libc.so.6 
```

How should I interpret this result?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-06T01:43:46.603

Your code didn't add the null terminator to the reversed string. As a result the printf function crashed trying to calculate it's length.

Change the malloc line to the following

```
char* result = (char*)malloc((len+1) * sizeof(char)); 
```

And you need to add the following line to the end of the string_reverse function in order to ensure the string has a null terminator.

```
result[len] = '\0'; 
```

Couple of other comments

*   sizeof(char) is not needed. The size of the char is one of the few types defined by the C standard and it's value is 1\.
*   The first loop can be replaced by a simple call to strlen

**EDIT**

Two other issues. The line which actually does the character copy appears to be incorrect. I believe it should be (len - i - 1). Otherwise the initial character write will occur at (result + len) which is the place of the null terminator.

```
*(result + ((len - i) - 1)) = *(string + i); 
```

Also, don't dereference result on return

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T01:49:22.690

Also you shouldn't be dereferencing result at the end of the function because its allready a pointer to your resulting string.

```
return result; 
```

# java - 有没有比 java.lang.Math.sqrt(double) 更精确的平方根函数

> ID：720038
> 
> 赞同：1
> 
> 时间：2009-04-06T01:44:10.330
> 
> 标签：java, math

我正在寻找平方根函数（在 java 中使用），它可以准确地给出至少 5-6 位小数的平方根。如果有办法控制 java.lang.Math.sqrt(double) 或任何外部数学库的准确性，请提及。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-06T02:36:11.517

你想解决什么问题？我相信[java.lang.Math 的 sqrt 应该准确到 full double width](http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Math.html)。您还需要更多吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-06T01:50:02.313

试试这个链接上的代码，它使用牛顿法计算大数的平方根（并获得 BigDecimal 输出），看看它是否符合您的需要。如果没有，你可以修改它:)。

[http://www.merriampark.com/bigsqrt.htm](http://www.merriampark.com/bigsqrt.htm)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-06T01:53:55.223

您可以使用此公式使其达到任意精度：

`http://en.wikipedia.org/wiki/Newton's_method#Square_root_of_a_number`

我怀疑它会特别快。您还需要一种方法来存储大于类型（双精度）精度的数字。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-06T01:54:42.833

您始终可以使用[Newton's Method](http://en.wikipedia.org/wiki/Newton's_method)实现您自己的方法。然后你可以让它尽可能准确（当然以 CPU 为代价）。

[C 中的数值食谱](http://www.nrbook.com/a/bookcpdf.php)有代码和深入的讨论。但是，请确保在您的产品中使用他们的代码之前检查许可证。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-06T01:56:49.817

您可以使用 BigDecimal 和 Newton-Raphson 之类的方法自行滚动。这将允许您指定精度。

如果您需要任何灵感，请查看数字食谱。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-06T09:05:24.453

**数学.sqrt**

*公共静态双sqrt（双a）*

返回**双精度值的正确舍入正平方根**。特别案例：

*   如果参数为 NaN 或小于零，则结果为 NaN。
*   如果参数是正无穷大，那么结果是正无穷大。
*   如果参数是正零或负零，则结果与参数相同。

否则，结果是最接近参数值的真正数学平方根的双精度值。

参数：

*   a - 一个值。

回报：

*   a 的正平方根。如果参数为 NaN 或小于零，则结果为 NaN。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-06T09:23:02.490

这个问题已经得到了足够彻底的回答，但这里有一个实验方法来验证它`Math.sqrt`是否准确：

```
import static java.lang.Math.*;
public class Test {
  public static void main(String[] args) {
    double max = 0;
    for (int i = 0; i < 100; i++) {
      double r = random();
      double err = abs(pow(sqrt(r), 2) - r) / ulp(r);
      if (err > max) max = err;
    }
    System.out.println(max);
  }
} 
```

这会打印出来`1.0`，确认文档所说的内容——返回的值`sqrt`将在一个精度单位内，以精确的答案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-07T16:57:54.337

```
public class SquareRoot {

    public void sqRoot_Efficient(int n){    //Time Complexity: O(log(n))
        for(int i=1;i<=n;i++){
            if((n/i)*(n/i) < n){
                System.out.println(n/i);
                break;
            }
        }
    }

    public static void main(String[] args) {
        SquareRoot sr=new SquareRoot();
        sr.sqRoot_Efficient(27);
    }
} 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2009-04-06T02:28:46.807

**我通常建议将 Apache commons 作为查找大多数任务的首选位置。但**似乎[commons.math](http://commons.apache.org/math/api-1.2/index.html)不包括 sqrt()。

 **# visual-studio - 如何让服务器块 <% %> 在 Visual Studio 中很好地格式化？

> ID：720042
> 
> 赞同：21
> 
> 时间：2009-04-06T01:48:44.890
> 
> 标签：visual-studio, visual-studio-2008

我最近经常使用 ASP.NET MVC，这意味着使用服务器会阻塞一堆。当我键入时，Visual Studio 会做这件奇怪的事情：

```
<% } %> 
```

然后按回车，我明白了：

```
<%
     }
     %> 
```

这是难看的，通常是我见过的最可怕的事情。我已经大量定制了 Ctrl+K+D 行为，当我这样做时，除了这种情况外，我得到的一切都看起来像我想要的那样。有人对如何定制这个有任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T15:23:42.640

看着行为。我不知道您是否可以仅为 HTML 编辑器覆盖它。它展示了 C# 编辑器首选项中定义的确切行为。

我想您可以在 C# 编辑器首选项中修改右括号的行为，但它会对您的 .cs 文件做一些丑陋的事情。

编辑：

我厌倦了试图找到其他方法来做到这一点。所以我写了这个宏。在 VS 2k8 中测试。不是2k5。你可以看到它的作用。另外，对 VB 感到抱歉，但它是宏编辑器的默认设置。

```
Sub FixFormatCurrentFile()

    Dim selection As TextSelection = DTE.ActiveDocument.Selection
    Dim fixed As String = "<% } %>"
    Dim regex As String = "\<\%:Wh*\}:Wh*\%\>"

    While selection.FindPattern(regex, vsFindOptions.vsFindOptionsRegularExpression)
        selection.ReplacePattern(regex, fixed, vsFindOptions.vsFindOptionsRegularExpression)
    End While
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-07T20:50:27.040

我想你用 Ctrl + K, Ctrl + D 格式化它

# c++ - 初始化和赋值

> ID：720049
> 
> 赞同：1
> 
> 时间：2009-04-06T01:52:13.683
> 
> 标签：c++, initialization, variable-assignment

我有一些看起来像这样的“遗留”代码（我无法更改，但需要添加）：

```
template<typename T> T Foo(T& target)
{
    //Assign to 'target', but never read from it before that.
    //Also, 'target' is going to be a POD-type.

    target = T();

    return target;
}

int main()
{
    float value = Foo(value);
} 
```

这感觉不安全（即确保`target`在使用之前从未分配过），这种接口是否存在任何其他潜在的致命问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T01:57:29.440

好吧..如果您执行代码：

```
T value; 
```

然后 value 将得到它的构造函数调用它。老实说，模板看起来就像构造函数只是被调用了两次。

此外，如果 T 只是普通的旧数据，则不会发生*致命*问题......

您究竟担心会发生什么？

# objective-c - NSLog incorrect encoding

> ID：720052
> 
> 赞同：12
> 
> 时间：2009-04-06T01:54:02.257
> 
> 标签：objective-c

I've got a problem with the following code:

```
NSString *strValue=@"你好";
char temp[200];
strcpy(temp, [strValue UTF8String]);
printf("%s", temp);
NSLog(@"%s", temp); 
```

in the first line of the codes, two Chinese characters are double quoted. The problem is printf function can display the Chinese characters properly, but NSLog can't.

* * *

Thanks to all. I figured out a solution for this problem. Foundation uses UTF-16 by default, so in order to use NSLog to output the c string in the example, I have to use cStringUsingEncoding to get UTF-16 c string and use %S to replace %s.

```
NSString *strValue=@"你好";
char temp[200];
strcpy(temp, [strValue UTF8String]);
printf("%s", temp);
strcpy(temp, [strValue cStringUsingEncoding:NSUTF16LittleEndianStringEncoding]);
NSLog(@"%S", temp); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-06T20:07:10.383

NSLog 的 %s 格式说明符在系统编码中，它似乎总是 MacRoman 而不是 unicode，所以它只能显示 MacRoman 编码的字符。NSLog 的最佳选择是使用本机对象格式说明符 %@ 并直接传递 NSString 而不是将其转换为 C 字符串。如果你只有一个 C 字符串并且你想使用 NSLog 来显示消息而不是 printf 或 asl，你将不得不做一些类似于 Don 建议的事情，以便首先将字符串转换为 NSString 对象。

所以，所有这些都应该显示预期的字符串：

```
NSString *str = @"你好";
const char *cstr = [str UTF8String];
NSLog(@"%@", str);
printf("%s\n", cstr);
NSLog(@"%@", [NSString stringWithUTF8String:cstr]); 
```

如果您决定使用 asl，请注意虽然它接受 UTF8 格式的字符串并将正确的编码传递给 syslog 守护程序（因此它将正确显示在控制台中），但它会在显示到终端时对字符串进行编码以进行可视化编码或记录到文件句柄，因此非 ASCII 值将显示为转义字符序列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T03:33:31.833

我的猜测是 NSLog 假设 8 位 C 字符串的编码与 UTF-8 不同，它可能不支持中文字符。虽然很尴尬，你可以试试这个：

```
NSLog(@"%@", [NSString stringWithCString: temp encoding: NSUTF8StringEncoding]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T01:56:23.797

I know you are probably looking for an answer that will help you understand what's going on.

But this is what you could do to solve your problem right now:

```
NSLog(@"%@", strValue); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-05-18T06:21:25.657

```
 #   define NSLogUTF8(a,b) NSLog(a,[NSString stringWithCString:[[NSString stringWithFormat:@"%@",b] cStringUsingEncoding:NSUTF8StringEncoding] encoding:NSNonLossyASCIIStringEncoding])

#define NSLogUTF8Ex(a,b) NSLog(a,[MLTool utf8toNString:[NSString stringWithFormat:@"%@",b]])

+(NSString*)utf8toNString:(NSString*)str{
    NSString* strT= [str stringByReplacingOccurrencesOfString:@"\\U" withString:@"\\u"];
    //NSString *strT = [strTemp mutableCopy];
    CFStringRef transform = CFSTR("Any-Hex/Java");
    CFStringTransform((__bridge CFMutableStringRef)strT, NULL, transform, YES);

    return strT;
} 
```

# javascript - 在 jQuery 中的 document.ready 中分配的 click()

> ID：720057
> 
> 赞同：3
> 
> 时间：2009-04-06T01:56:34.140
> 
> 标签：javascript, jquery

document.ready 中的分配（特别是*click(fn)*）是否适用于与选择器匹配的新附加元素？

如果没有，我怎样才能将它分配给这个新元素？我必须在每次追加后写作业还是有更好的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-06T02:12:05.833

您正在寻找[实时](http://docs.jquery.com/Events/live)功能。根据手册：

> 将处理程序绑定到所有当前和未来匹配元素的事件（如单击）。也可以绑定自定义事件。

所以如果你这样做：

```
$(document).ready(function() {
    $('div.test').live('click', function() { alert('yipee!'); });
    $('body').append('<div class="test">Click me!</div>');
}); 
```

当您单击 div 时，即使它是在绑定事件后添加的，您也会收到警报。

# java - Jama 的特征值分解函数的问题

> ID：720061
> 
> 赞同：2
> 
> 时间：2009-04-06T02:01:31.663
> 
> 标签：java, jama, eigenvector

当我使用`matrix.eig()`. 矩阵是：

```
1.2290 1.2168 2.8760 2.6370 2.2949 2.6402
1.2168 0.9476 2.5179 2.1737 1.9795 2.2828
2.8760 2.5179 8.8114 8.6530 7.3910 8.1058
2.6370 2.1737 8.6530 7.6366 6.9503 7.6743
2.2949 1.9795 7.3910 6.9503 6.2722 7.3441 
2.6402 2.2828 8.1058 7.6743 7.3441 7.6870 
```

该函数返回特征向量：

```
-0.1698  0.6764  0.1442 -0.6929 -0.1069  0.0365
-0.1460  0.6478  0.1926  0.6898  0.0483 -0.2094
-0.5239  0.0780 -0.5236  0.1621 -0.2244  0.6072
-0.4906 -0.0758 -0.4573 -0.1279  0.2842 -0.6688
-0.4428 -0.2770  0.4307  0.0226 -0.6959 -0.2383
-0.4884 -0.1852  0.5228 -0.0312  0.6089  0.2865 
```

Matlab 为相同的输入给出以下特征向量：

```
0.1698 -0.6762 -0.1439  0.6931  0.1069  0.0365
0.1460 -0.6481 -0.1926 -0.6895 -0.0483 -0.2094
0.5237 -0.0780  0.5233 -0.1622  0.2238  0.6077
0.4907  0.0758  0.4577  0.1278 -0.2840 -0.6686
0.4425  0.2766 -0.4298 -0.0227  0.6968 -0.2384
0.4888  0.1854 -0.5236  0.0313 -0.6082  0.2857 
```

matlab 和 jama 的特征值是匹配的，但前 5 列的特征向量符号相反，只有最后一列是准确的。

接受的输入类型是否有任何问题`Jama.Matrix.EigenvalueDecomposition.eig()` 或任何其他问题？请告诉我如何修复错误。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-06T03:35:21.780

这里没有错误，两个结果都是正确的 - 就像任何其他标量乘以特征向量一样。

有无数个有效的特征向量 - 大多数软件程序报告长度为 1 的向量只是惯例。Jama 报告的特征向量等于 Matlab 的 -1 倍，这可能只是他们使用的算法的产物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-18T06:48:27.683

对于给定的矩阵，特征值是唯一的，如果考虑多个，则其数量等于矩阵的维数。而相应的特征值可能不同，因为向量可以根据某个方向进行缩放。在您的帖子结果中，JAVA 和 Matlab 版本都是正确的。

此外，您可以检查特征值来自的 D 矩阵。你会发现它们是一样的。

# regex - ASP.net REGEX 问题：查找特定匹配项，然后跳过所有内容以结束标记

> ID：720064
> 
> 赞同：0
> 
> 时间：2009-04-06T02:05:01.123
> 
> 标签：regex

```
strRegex = New StringBuilder
strRegex.Append("<td class=""[\s\w\W]*?"">(?<strTKOWins>[^<]+)[\s]*?<span  
                 class='[\s\w\W]*?'>(T)KOs[\s\w\W]*?</span>[\s\S]*</td>")
                Regex = New System.Text.RegularExpressions.Regex(strRegex.ToString, 
                RegexOptions.None)
Matches = Regex.Match(results, strRegex.ToString) 
```

这是我的代码。我想匹配：

[？什么 ？请在此处插入您要匹配的内容]

问题是在 SPAN 标签结束后，我想跳过 Table Cell 内的所有内容并一直跳到结束标签`</td>`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-08T04:06:08.273

我不知道你想做什么。但是这个正则表达式会找到一个表格单元，其中有一个跨度，然后转到其相应的结束标记。填写您需要的所有细节并根据需要更改它....

例如，

文本：

```
<td class="td class"> anything at all in here?! <span class="span class">span text</span>text in the tablecell?</td> 
```

正则表达式：

```
<td\s+class=".*?">.*?<span\s+class=".*?">.*?</span>.*?</td> 
```

不知道所有这些“strTKOWins”废话是什么，或者您是否想在您的跨度中找到特定的东西？

```
(T)KOs[\s\w\W]*? 
```

我想我真的帮不上忙，除非你做出回应......

# database-design - Where do new companies in IT Business developing softwares, websites and databases find work from?

> ID：720066
> 
> 赞同：6
> 
> 时间：2009-04-06T02:06:58.810
> 
> 标签：database-design, search-engine

i am a qualified software engineer who has experience working on designing softwares, databases and websites but I don't understand how do companies find work for software database adn website development? Any advice will be much appreciated.. I do realise it may make me look dumb and may attract negative feedback but all through out my 15 years of experience, I have only worked for someone so I am a novice when it comes to working for own self... Thanks in advance..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T03:01:05.343

可以通过所有明显的方法找到工作，即通过个人/业务/关系、赞助、广告、营销、贸易展览和活动等建立网络。

通过招标过程也可以找到大量的工作。许多公司，以及几乎所有的政府部门，都将通过招标过程外包他们的合同。如果您访问大中型公司和许多政府部门的网站，您可以找到一个合同和招标页面，其中包含当前可供招标的所有工作。

反过来，其中许多公司还将列出国家或行业特定合同和招标网站/邮件列表，您可以订阅这些列表。他们还将在报纸和贸易杂志上宣传他们的合同。顺便说一句，如果你以前从未见过它，我想你可能会对政府需要做多少工作感到惊讶。另请注意，我对政府的使用不仅指中央政府，还指议会和国家治理。

当然，所有这些都是有代价的。投标合同可能非常昂贵。您不只是发送名片并进行 10 分钟的站立演示。许多合同必须被视为透明的，因此可以有几轮流程都需要特定形式的支持文件等。

因此，基本上，如果您最终自己外包合同，您最终将支付所选供应商在与您会面之前发生的所有失败投标的成本的一部分。但那是生意……最好给自己买一套西装。;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T03:53:23.187

我开始有机会并在此基础上建立业务。从最初的机会开始，我就花时间为下一个机会做准备，所以当它来临时我已经准备好了。这些机会来自我积极主动的网络（用户组、冷电话等）或通过联系人，只是随机机会。

这有点像鸡和蛋的困境。您需要工作来证明花费资源进行设置是合理的，并且您需要进行设置以便获得工作。

我会查看您的商业资产（您的网站、预制演示文稿、会计等）并问自己是否准备好。如果没有，您应该考虑在准备这些资产时进行一些分包，这样您就可以在准备时赚钱并学习一些东西。

您的最低资产清单可能如下所示；

1.  诚实和适用的网站（没有闪烁的位，也没有在其他州工作的承诺或保证，除非你真的可以支持它。KISS 规则在这里，你是一个小企业，有一个简单的网站是可以的）

2.  商业名片

3.  罐头演示您可以为目标市场做些什么

4.  一种适合您目标的方法。我不太确定这叫什么，但它可能是“为外部网站推出 Sitefinity CMS”。您需要一组可以构建的工具。如果您只是一名受雇的程序员，并且每次都从头开始，那么您真的应该考虑分包。

5.  会计和法人及设立工作

6.  如果您的业务失败该怎么办（即：您的收入来源是什么）

7.  如果您的业务取得巨大成功，该怎么做（即：您是否有其他可以快速加入的资源）

这不必很复杂，只需写出一份清单并在您​​继续进行时勾选或添加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T02:18:13.963

It is mostly from the contacts one have in other companies (which get software and web development services) or by biding for the projects on sites like [Odesk](http://odesk.com) and [elance](http://elance.com) etc. If you have limited team and resources then first route is good. Once you have some work from a big company or department in your kitty you can get future projects from there and on the basis of the quality of your current work.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-07T03:18:13.437

其中很多是建立网络并与人们建立良好的关系，因此他们会将您推荐给他们与之交谈的下一个人。我发现 www.craigslist.com 是一个开始的地方。你必须小心，因为它充满了骗局，人们只是想不劳而获。我在那里找到了几个很好的机会，并且知道也有。另一个地方是自由职业网站，但你会再次找到希望以低廉的价格完成高端/高质量工作的人。我发现最好的方法是开发或购买人们想要的产品并以此为基础。总而言之，这需要耐心，在这个领域，人们总是在寻找一个简单的出路，所以你需要坚持自己的技能，不要卖空自己，如果你擅长你所做的事情就会显示出来，人们会付钱为了它。话虽这么说，我并不是说出去为你的工作收取高价，但你也不想低估自己。看看你想进入的市场可以处理并专注于此。祝你好运。

# c++ - Calculating size of an array

> ID：720077
> 
> 赞同：13
> 
> 时间：2009-04-06T02:16:00.927
> 
> 标签：c++, c

I am using the following macro for calculating size of an array:

```
#define G_N_ELEMENTS(arr) ((sizeof(arr))/(sizeof(arr[0]))) 
```

However I see a discrepancy in the value computed by it when I evaluate the size of an array in a function (incorrect value computed) as opposed to where the function is called (correct value computed). Code + output below. Any thoughts, suggestions, tips et al. welcome.

DP

```
#include <stdio.h>

#define G_N_ELEMENTS(arr) ((sizeof(arr))/(sizeof(arr[0])))

void foo(int * arr) // Also tried foo(int arr[]), foo(int * & arr) 
                    // - neither of which worked
{
   printf("arr : %x\n", arr);
   printf ("sizeof arr: %d\n", G_N_ELEMENTS(arr));
}

int main()
{
   int arr[] = {1, 2, 3, 4};

   printf("arr : %x\n", arr);
   printf ("sizeof arr: %d\n", G_N_ELEMENTS(arr));

   foo(arr);
} 
```

Output:

```
arr : bffffa40
sizeof arr: 4
arr : bffffa40
sizeof arr: 1 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-04-06T02:28:21.287

That's because the size of an `int *` is the size of an int *pointer* (4 or 8 bytes on modern platforms that I use but it depends entirely on the platform). The `sizeof` is calculated at compile time, not run time, so even `sizeof (arr[])` won't help because you may call the `foo()` function at runtime with many different-sized arrays.

The size of an int array is the size of an int *array*.

This is one of the tricky bits in C/C++ - the use of arrays and pointers are not always identical. Arrays will, under a great many circumstances, decay to a pointer to the first element of that array.

There are at least two solutions, compatible with both C and C++:

*   pass the length in with the array (not *that* useful if the intent of the function is to actually work out the array size).
*   pass a sentinel value marking the end of the data, e.g., `{1,2,3,4,-1}`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-04-06T02:21:44.360

This isn't working because sizeof is calculated at compile-time. The function has no information about the size of its parameter (it only knows that it points to a memory address).

Consider using an STL vector instead, or passing in array sizes as parameters to functions.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-04-06T04:55:28.093

在 C++ 中，您可以像这样定义 G_N_ELEMENTS ：

```
template<typename T, size_t N> 
size_t G_N_ELEMENTS( T (&array)[N] )
{
  return N;
} 
```

如果您希望在编译时使用数组大小​​，方法如下：

```
// ArraySize
template<typename T> 
struct ArraySize;

template<typename T, size_t N> 
struct ArraySize<T[N]> 
{ 
  enum{ value = N };
}; 
```

感谢 j_random_hacker 纠正我的错误并提供更多信息。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-06T04:17:31.743

请注意，即使您尝试告诉 C 编译器函数中数组的大小，它也不会接受提示（my`DIM`等同于 your `G_N_ELEMENTS`）：

```
#include <stdio.h>

#define DIM(x)  (sizeof(x)/sizeof(*(x)))

static void function(int array1[], int array2[4])
{
    printf("array1: size = %u\n", (unsigned)DIM(array1));
    printf("array2: size = %u\n", (unsigned)DIM(array2));
}

int main(void)
{
    int a1[40];
    int a2[4];
    function(a1, a2);
    return(0);
} 
```

这打印：

```
array1: size = 1
array2: size = 1 
```

如果您想知道函数内部的数组有多大，请将大小传递给函数。或者，在 C++ 中，使用 STL 之类的东西`vector<int>`。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-06T06:18:54.617

**编辑：**自编写此答案以来就引入了 C++11，它包括完全执行我在下面显示的功能：[`std::begin`](http://en.cppreference.com/w/cpp/iterator/begin)和[`std::end`](http://en.cppreference.com/w/cpp/iterator/end). const 版本`std::cbegin`，`std::cend`也将进入标准的未来版本（C++14？），并且可能已经在您的编译器中。如果您可以访问标准功能，甚至不要考虑使用下面的我的功能。

* * *

我想在[Benoît 的回答](https://stackoverflow.com/questions/720077/calculating-size-of-an-array/720308#720308)基础上再做一点。

与其像其他人建议的那样仅将数组的起始地址作为指针传递，或者将指针加上大小，不如从标准库中获取提示，并将两个指针传递给数组的开头和结尾。这不仅使您的代码更像现代 C++，而且您可以在阵列上使用任何标准库算法！

```
template<typename T, int N>
T * BEGIN(T (& array)[N])
{
    return &array[0];
}

template<typename T, int N>
T * END(T (& array)[N])
{
    return &array[N];
}

template<typename T, int N>
const T * BEGIN_CONST(const T (& array)[N])
{
    return &array[0];
}

template<typename T, int N>
const T * END_CONST(const T (& array)[N])
{
    return &array[N];
}

void
foo(int * begin, int * end)
{
  printf("arr : %x\n", begin);
  printf ("sizeof arr: %d\n", end - begin);
}

int
main()
{
  int arr[] = {1, 2, 3, 4};

  printf("arr : %x\n", arr);
  printf ("sizeof arr: %d\n", END(arr) - BEGIN(arr));

  foo(BEGIN(arr), END(arr));
} 
```

如果模板不起作用，这是 BEGIN 和 END 的替代定义。

```
#define BEGIN(array) array
#define END(array) (array + sizeof(array)/sizeof(array[0])) 
```

**更新：**上面带有模板的代码可以在 MS VC++2005 和 GCC 3.4.6 中正常工作。我需要一个新的编译器。

我也在重新考虑这里使用的命名约定——伪装成宏的模板函数感觉不对。我确信我很快就会在我自己的代码中使用它，我想我会使用 ArrayBegin、ArrayEnd、ArrayConstBegin 和 ArrayConstEnd。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-06T02:28:10.880

If you change the foo funciton a little it might make you feel a little more comfortable:

```
void foo(int * pointertofoo) 
{              
   printf("pointertofoo : %x\n", pointertofoo);  
   printf ("sizeof pointertofoo: %d\n", G_N_ELEMENTS(pointertofoo));
} 
```

That's what the compiler will see something that is completely a different context than the function.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-06T04:53:14.870

```
foo(int * arr) //Also tried foo(int arr[]), foo(int * & arr) 
{              // - neither of which worked
  printf("arr : %x\n", arr);
  printf ("sizeof arr: %d\n", G_N_ELEMENTS(arr));
} 
```

sizeof(arr) 是 sizeof(int*)，即。4

除非您有充分的理由编写这样的代码，否则不要。我们现在处于 21 世纪，请改用 std::vector。

有关详细信息，请参阅 C++ 常见问题解答：http: [//www.parashift.com/c++-faq-lite/containers.html](http://www.parashift.com/c++-faq-lite/containers.html)

记住：“数组是邪恶的”

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-06T02:26:35.330

You should only call sizeof on the array. When you call sizeof on the pointer type the size will always be 4 (or 8, or whatever your system does).

MSFT's Hungarian notation may be ugly, but if you use it, you know not to call your macro on anything that starts with a 'p'.

Also checkout the definition of the ARRAYSIZE() macro in WinNT.h. If you're using C++ you can do strange things with templates to get compile time asserts if do it that way.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-09T01:55:06.260

现在我们已经`constexpr`在 C++11 中，类型安全（非宏）版本也可以在常量表达式中使用。

```
template<typename T, std::size_t size>
constexpr std::size_t array_size(T const (&)[size]) { return size; } 
```

与您的宏解决方案不同（它不会意外地对指针起作用），这将无法在无法正常工作的地方编译。您可以在需要编译时常量的地方使用它：

```
int new_array[array_size(some_other_array)]; 
```

话虽`std::array`如此，如果可能的话，你最好使用它。不要理会那些说要使用的人，`std::vector`因为它更好。`std::vector`是具有不同优势的不同数据结构。`std::array`与 C 风格的数组相比没有开销，但与 C 风格的数组不同，它不会在最轻微的刺激下衰减到指针。`std::vector`另一方面，要求所有访问都是间接访问（通过指针），并且使用它需要动态分配。如果您习惯使用 C 风格的数组，要记住的一件事是确保传递`std::array`给这样的函数：

```
void f(std::array<int, 100> const & array); 
```

如果不通过引用传递，则复制数据。这遵循大多数精心设计的类型的行为，但与传递给函数时的 C 样式数组不同（它更像是结构内部的 C 样式数组的行为）。

# c# - 扁平化 Linq 组查询

> ID：720079
> 
> 赞同：8
> 
> 时间：2009-04-06T02:16:45.213
> 
> 标签：c#, linq, group-by, linq-to-objects

我有一个这样的数据列表：

```
ID AddressPurpose Address ...
1  L
1  P
2  L
2  P
3  P
3  L
4  P
4  L
5  P
6  L 
```

我希望能够过滤数据，以便对于每个唯一数字，如果有 P 行，则返回它，否则返回 L 行。所以数据将如下所示：

```
ID AddressPurpose Address ...
1  P
2  P
3  P
4  P
5  P
6  L 
```

目前我有这个工作正常的查询：

```
var query = from c in list
            orderby c.AddressPurpose descending
            group c by c.ID
            into g
                select g;

var finalList = new List<Company>();
foreach (var list in query)
{
    finalList.Add(list.First());
}
return finalList; 
```

**有没有更好的方法可以在不使用额外的 foreach 的情况下做到这一点？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-06T02:30:47.193

你总是可以嵌套你的查询：

```
var query =
    from i in (
        from c in list 
        orderby c.AddressPurpose descending 
        group c by c.ID into g 
        select g)
    select i.First();

return query; 
```

我确信这不是唯一的方法（甚至可能不是最好的方法），但它确实将你的“foreach”包装到一个查询中。

**编辑**

实际上，您可以将其简化为：

```
var query = from c in list
            orderby c.AddressPurpose descending
            group c by c.ID into g
            select g.First(); 
```

这似乎给出了正确的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T02:32:08.220

你为什么不`select` `g.First()`代替？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T17:07:06.633

```
var finalList = list
  .GroupBy(c => c.ID)
  .Select(g => g.OrderByDescending(c => c.AddressPurpose).First())
  .ToList(); 
```

# svn - 您是否应该在代码和更改日志中评论更改？

> ID：720082
> 
> 赞同：5
> 
> 时间：2009-04-06T02:19:04.850
> 
> 标签：svn, git, version-control, comments, cvs

我注意到开发人员倾向于较少评论他们的更改，理由是目的/日期/原因在更改日志中。他们有一些非常合理的说法，即如果我们两者都需要，就会发生重复工作。我正在花费大量时间来跟踪更改。没有给出具体的方向，缺乏一致的方法让我有点生气。通常人们会同时做这两个吗？有没有我想尝试的工具来减少搜索时间。目前我们有 cvs、git 和 svn 实现。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-04-06T02:48:04.437

代码中的注释应该描述**代码当前所做**的事情。*仅当代码的预期行为*发生更改时，这些注释才会更改——如果修订只是一个错误修复，它们不应该更改。

更改日志中的注释应描述**此修订版中所做的更改**。

推论：避免在代码注释中放置修订号/日期和进行更改的程序员的姓名。（感谢两位乔纳森。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-06T02:29:06.650

不要用解释更改的注释来混淆您的代码。这只是需要维护的另一件事，并且可能不会始终如一，从而导致更多错误和更多更改。使用源代码管理注释功能来达到预期目的。

如果您*需要*在代码的注释中解释为什么某事以某种方式完成，那很好。只要不是每次更改都*需要它。*这会导致混乱的评论，比如

```
// fixed bug #3365 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T02:22:37.260

可以说。如果您更改代码但不更新评论，那么评论就会过时。我是这类事情的忠实拥护者，我忘记更新评论的频率比我想承认的要多。但是对变化的描述是（或至少应该是）永远不会错的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T02:27:29.963

在我看来不是。应该对代码进行注释，以便您可以轻松阅读代码。这对于修复了错误的代码来说更为必要。

这两个地方都应该得到很好的评论，并且很可能它们将包含重复的描述。但是，它们都出于不同的原因使用。当您通过源代码控制进行回溯时，通常是跟踪问题是如何引入的。有好的评论可以使这个过程更容易。代码注释允许您通过代码来尝试查找当前错误或添加下一个功能。

他们应该两者都做，并理解为什么这很重要。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T03:04:19.610

两个评论服务器的目的不同。代码注释是为了说明和解释这段代码的作用，它是如何工作的，它期望什么以及它返回什么。还有可能出现的特殊情况。

签入评论更多的是告知您做了哪些更改以及更改的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T02:27:41.710

不知道您是否使用注释工具，某些IDE（例如eclipse）与CVS 集成得很好，如果您使用cvs 注释工具，则可以准确地向您显示何时以及由谁修改了哪一行。

# python - 如何将 Django 模型元选项应用于我未编写的模型？

> ID：720083
> 
> 赞同：5
> 
> 时间：2009-04-06T02:21:26.780
> 
> 标签：python, django

我想将[“排序”](http://docs.djangoproject.com/en/dev/ref/models/options/#ordering)元选项应用于 django.contrib.auth.models 中的 Django 模型用户。通常我只是将 Meta 类放在模型的定义中，但在这种情况下我没有定义模型。那么我该把 Meta 类放在哪里来修改 User 模型呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-06T02:26:08.577

[这是 Django 手册建议您这样做的方式](http://docs.djangoproject.com/en/dev/topics/db/models/#specifying-the-parent-link-field)：

> 您还可以使用代理模型在模型上定义不同的默认排序。标准的 User 模型没有定义排序（故意的；排序很昂贵，我们不想在获取用户时一直这样做）。使用代理时，您可能希望定期按用户名属性进行排序。这很简单：

```
class OrderedUser(User):
    class Meta:
        ordering = ["username"]
        proxy = True 
```

> 现在普通用户查询将是无序的，而 OrderedUser 查询将按用户名排序。

**请注意，要使其正常工作，您需要对 Django 进行后备箱检出，因为它是相当新的。**

如果您无权访问它，则需要摆脱代理部分并以这种方式实现它，这可能会很麻烦。[查看这篇文章，了解如何做到这一点。](http://scottbarnham.com/blog/2008/08/21/extending-the-django-user-model-with-inheritance/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-06T03:35:39.020

保罗的回答很棒；我以前不知道新的代理支持。唯一的问题是您需要将代码定位到 OrderedUser 模型 - 这在某种意义上类似于简单地执行`User.objects.filter(....).order_by('username')`. 换句话说，它不那么冗长，但您需要明确地编写代码来定位它。（当然，如前所述，您还必须在后备箱上。）

我的感觉是，您希望对*所有* `User`查询进行排序，包括在您无法控制的第三方应用程序中。在这种情况下，对基类进行猴子修补相对容易，而且不太可能导致任何问题。在中心位置（例如您的 settings.py），您可以执行以下操作：

```
from django.contrib.auth.models import User
User.Meta.ordering = ['username'] 
```

更新：Django 1.5 现在支持可[配置的用户模型](https://docs.djangoproject.com/en/dev/releases/1.5-alpha-1/#configurable-user-model)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-06T02:27:28.200

您可以将用户子类化：

```
class OrderedUser(User):
    class Meta:
        ordering = ['-id', 'username'] 
```

或者您可以使用 ModelAdmin 中的排序：

```
class UserAdmin(admin.ModelAdmin):
    ordering = ['-id', 'username']

# unregister user since its already been registered by auth
admin.site.unregister(User)
admin.site.register(User, UserAdmin) 
```

注意：ModelAdmin 方法只会改变 admin 中的排序，不会改变查询的排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T02:37:57.940

联系作者并要求他们进行更改。

# asp.net - How to add CSS Styles to DataPager

> ID：720089
> 
> 赞同：1
> 
> 时间：2009-04-06T02:25:27.847
> 
> 标签：asp.net, css

I have a simple question. I have a ListView which I have added a DataPager control to.

At present the DataPager is just plain numeric based. Just wondering, is it possible to add CSS styles to the numeric numbers IE have a 1px solid border around each number ect.

Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-06-14T21:14:58.070

将 NumericButtonCssClass 插入 NumericPagerField

在我的示例中，我将其称为 datapagerStyle

```
 <asp:DataPager ID="DataPager1" runat="server" PagedControlID="ListView1" PageSize="20">
    <Fields>
        <asp:NextPreviousPagerField ButtonType="Button" ShowFirstPageButton="False" ShowNextPageButton="False"
            ShowPreviousPageButton="False" />
           <asp:NumericPagerField NumericButtonCssClass="datapagerStyle" />
        <asp:NextPreviousPagerField ButtonType="Button" ShowLastPageButton="False" ShowNextPageButton="False"
            ShowPreviousPageButton="False" />
    </Fields>
</asp:DataPager> 
```

然后在你制作的样式表中

```
.datapagerStyle
{
    color:black;
    border: 1px solid black;
} 
```

我认为这将解决您的问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T07:50:07.907

```
 <asp:DataPager ID="DataPager1" runat="server" PageSize="6" OnPreRender="DataPager1_PreRender">
                                <Fields>
                                    <asp:NumericPagerField ButtonCount="5" NumericButtonCssClass="numeric_button" CurrentPageLabelCssClass="current_page" NextPreviousButtonCssClass="next_button"/>
                                    <asp:NextPreviousPagerField ButtonType="Link" ShowLastPageButton="True" 
                                        ShowNextPageButton="false" ShowPreviousPageButton="False" ButtonCssClass="last_button" />
                                </Fields>
                            </asp:DataPager>

   <style type="text/css">
   .numeric_button{background-color:#384B69;color:#FFFFFF;font-family:Arial;font-weight:bold;padding:2px;  border:none;}
    .current_page{background-color:#09151F;color:#FFFFFF;font-family:Arial;font-weight:bold;padding:2px;}
    .next_button{background-color:#1F3548;color:#FFFFFF;font-family:Arial;font-weight:bold;padding:2px;}
    .last_button{background-color:#1F3548;color:#FFFFFF;font-family:Arial;font-weight:bold;padding:2px;}
   </style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T04:27:37.130

您需要查看 <PagerTemplate> 这里的一些信息：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.templatepagerfield.pagertemplate.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.templatepagerfield.pagertemplate.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T02:34:33.800

You can set CssClass for your control I think that can do what you want. I don't test it so just an ideal! Hope this helpfull 4 you! `CssClass="Pagging" Pagging{ border:1px solid #000; }`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-05T10:38:28.827

因为在 .NET 中，当它生成一个控件时，它会自动添加前缀，例如：controlID = "data_customer" 并变成了 ctrl_1_etc_ + data_customer。所以你必须在 CSS 文件中写下这个控件的所有长名称，它肯定可以工作！希望这对你有帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T05:30:23.080

正如 Nguyen Hiep 回答的那样，为控件设置一个 CSSClass 可能会有所帮助。然后查看控件生成的源代码。CssClass 可能没有删除边框的原因可能是 .NET 倾向于将生成的 HTML 元素包装在额外的 div 或表格中（边框可能设置在该 div 中包含的不同元素上）一旦你找出哪个元素有 css 类，使用 CSS 后代选择器删除边框。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-04-06T04:50:56.793

我不知道 DataPager 控件是什么。但是，如果它是某种分页*类，并且您想做一些类似于 StackOverflow 新问题页面底部的操作，那么是的，它在 CSS 中是完全可行的。

在大多数情况下，页码只是超链接。所以你可以做的是找出分页控件用于链接的类，并按照你想要的方式设置它们的样式。例如，如果 HTML 看起来像这样：

```
<div class="pagination">
    <span class="page_cur">1</span>
    <a href="news.php?page=2" class="page_num">2</a>
    <a href="news.php?page=3" class="page_num">3</a>
    <a href="news.php?page=4" class="page_num">4</a>
    <a href="news.php?page=5" class="page_num">5</a>
    ...
</div> 
```

然后你会想在你的 CSS 中包含这样的东西：

```
<style>
div.pagination > span.page_cur, div.pagination > a.page_num {
   display: block;
   float: left;
   padding: 4px;
}
div.pagination > span.page_cur {
   background-color: #ddd;
   border: 1px solid #ddd;
}
div.pagination > a.page_num {
   background-color: #fff;
   border: 1px solid #e0e0e0;
}
</style> 
```

如果您不知道用于分页编号的 CSS 选择器，我建议您查看一些有关 CSS 选择器的在线参考资料。Firefox 的 Firebug 插件在识别布局元素和当前应用于它们的样式方面也非常有帮助。

*StackOverflow 显然不喜欢带有下划线的 URL： [分页](http://en.wikipedia.org/wiki/Pagination_(web))

# python - 使用 Python 在文本中查找超链接（与 Twitter 相关）

> ID：720113
> 
> 赞同：13
> 
> 时间：2009-04-06T02:37:48.720
> 
> 标签：python, regex

如何解析文本并使用字符串查找所有超链接实例？超链接不会是 html 格式，`<a href="http://test.com">test</a>`而只是`http://test.com`

其次，我想转换原始字符串并将所有超链接实例替换为可点击的 html 超链接。

我在这个线程中找到了一个例子：

[将 URL 转换为 C# 字符串中的超链接的最简单方法？](https://stackoverflow.com/questions/32637/easiest-way-to-convert-a-url-to-a-hyperlink-in-a-c-string)

但无法在 python 中重现它:(

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-04-06T02:53:17.000

[这是将 URL 转换为 C# 字符串中的超链接](https://stackoverflow.com/questions/32637/easiest-way-to-convert-a-url-to-a-hyperlink-in-a-c-string/32648#32648)的最简单方法的 Python 端口？：

```
import re

myString = "This is my tweet check it out http://tinyurl.com/blah"

r = re.compile(r"(http://[^ ]+)")
print r.sub(r'<a href="\1">\1</a>', myString) 
```

输出：

```
This is my tweet check it out <a href="http://tinyurl.com/blah">http://tinyurl.com/blah</a> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2010-01-20T15:45:58.883

[这](http://mail.python.org/pipermail/tutor/2002-September/017228.html)是 2002 年以来更复杂的正则表达式。

@yoniLavi 将其缩小为：

```
re.compile(r'\b(?:https?|telnet|gopher|file|wais|ftp):[\w/#~:.?+=&%@!\-.:?\\-]+?(?=[.:?\-]*(?:[^\w/#~:.?+=&%@!\-.:?\-]|$))') 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-01-24T06:16:53.430

Django 也有一个不仅仅使用正则表达式的解决方案。它是[django.utils.html.urlize()](https://github.com/django/django/blob/master/django/utils/html.py#L236)。我发现这很有帮助，特别是如果您碰巧使用 django。

您还可以提取[代码](https://github.com/django/django/blob/master/django/utils/html.py#L236)以在您自己的项目中使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-25T22:57:03.217

Jinja2（Flask 使用这个）有一个过滤器`urlize`，它做同样的事情。

[文档](http://jinja.pocoo.org/docs/templates/#urlize)

# c# - 当（当前）只有一个实现接口的类时，您是否应该创建接口？

> ID：720115
> 
> 赞同：6
> 
> 时间：2009-04-06T02:39:20.213
> 
> 标签：c#, interface, yagni

如果可能有其他东西可以使用它，您应该始终创建一个接口，还是等到实际需要它然后重构以使用接口？

对接口进行编程通常似乎是合理的建议，但是还有 YAGNI ......

我想也许这取决于情况。现在我有一个对象代表一个可以包含食谱或其他文件夹的文件夹。我应该担心实现 IContainer 之类的东西，而不是直接使用 Folder 吗？以防将来我想要一个引用其他子食谱的食谱（比如一个苹果派食谱，它也是一个馅饼皮食谱的容器）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-06T02:43:09.627

这总是取决于情况。如果您知道将有另一个类使用该接口，那么是的，创建接口类以节省时间。但是，如果您不确定（并且大多数情况下您不确定），那么请等到您需要它。

现在这并不意味着忽略接口的可能性 - 考虑对象的公共方法等，着眼于稍后制作接口，但不要用任何你实际上不需要的东西弄乱你的代码库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T02:47:22.490

总会有一个使用它的测试，对吧（你做单元测试，不是吗？）。这意味着总是有 N + 1 个类使用它，其中 N 是在应用程序中使用您的类的类的数量。

除了依赖注入之外，接口的另一个目的是关注点分离，以便您的类实际上可以实现多个接口。

请记住所有这些，但如果一开始没有实现，您总是可以稍后通过重构引入接口。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-06T02:47:39.040

一般来说，如果只有一个类要实现它，您不应该为创建接口而烦恼，即使您预计它可能有一个类，因为可能会出现实现问题，直到该类在一个实际测试中才会出现场景，在这种情况下，过早创建的接口可能有太多的成员或可能缺少成员。

例如，.NET Framework Ba​​s 类库团队承认`ICollection`在包含`SyncRoot`属性时过早地进行了设计。对于后来的泛型`ICollection<T>`，他们决定将其删除（[http://blogs.msdn.com/bclteam/archive/2005/03/15/396399.aspx](http://blogs.msdn.com/bclteam/archive/2005/03/15/396399.aspx)）。

如果您要创建一个实现相同接口的模拟对象，那么这将被视为证明创建该接口的第二个实现。不过，并非所有单元测试都需要模拟风格的界面。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-06T02:44:44.757

我想说这更多地取决于您将要*使用*该类的地方，而不是可能实现该接口的类的数量。如果您只在一个或两个地方使用 Folder，那么我会说等到真正需要该接口，然后再实现它并进行重构。但是，如果文件夹要在 100 个不同的地方使用，那么您可以通过预先编程到界面来节省一些时间。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-06T02:54:47.947

将接口视为定义语义或概念的合同。这是一种通用方法，并不是特定于语言的。在 OO 的上下文中，如果您使用的是单一继承模型，那么在定义对象模型时优先选择接口而不是类是一个很好的案例，因为单一的超类路径非常宝贵，您希望将其保存为比定义在对象或方法上公开的属性更“实质性”的东西。

拥有 IContainer 语义（合同）是从文件夹中创建接口的一个相当糟糕的理由；最好让您的文件夹（如果它正在执行任何重要的逻辑）在您的语言的核心框架中“实现”（可能已经存在的）IContainer 或 ICollection 接口。

与往常一样，更好的选择完全取决于具体问题。如果您的食谱也是文件夹（？！），您可能正在考虑父子关系或组合关系 - 如果您的系统中有其他元素，可以（并且应该）使用接口表达的语义对使用这种语义组成的事物进行“操作”。

接口有一点开销（编程方面），而且，如果你发现自己只需要一组 Woof 和 IWoof 类和接口，那么你就会知道你可能不需要表达你在接口方面的问题——简单的类就足够了。

通常，对于任何 I，您都应该至少有几个具体的类（除了 IImpl 或 之外，还有更有意义的名称）。

希望有帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-06T04:59:05.450

很多人已经提出了非常合理的建议。我想补充的一件事是，如果您希望避免对具体类的直接硬依赖，那么接口将通过提供松散耦合来提供帮助。如果您正在创建基于插件的架构，那么接口绝对是您的最佳选择。此外，如果您计划并排或稍后编写单元测试，您可能会注意到调用文件夹类的代码必须携带一个具体的实现，以便调用代码可测试. 如果您的文件夹类的具体实现又与数据库或服务通信，那么您也需要将其转移到您的测试中，这将很快变得笨拙。只是我的2美分。

# bash - 将脚本的输出作为独立的 bash 命令运行

> ID：720122
> 
> 赞同：6
> 
> 时间：2009-04-06T02:44:25.523
> 
> 标签：bash, interop, scripting, pipe, xargs

假设您有一个 perl 脚本“foobar.pl”，它将以下内容打印到标准输出

```
date -R 
```

并且您希望将 perl 脚本输出的任何内容作为独立的 bash 命令运行（不要担心安全问题，因为它是在受信任的环境中运行的）。

如何让 bash 将其识别为独立命令？

我试过使用 xargs，但这似乎只想将*参数*传递给预定义的命令。

我希望 perl 脚本能够输出任意命令。

```
$command = 'date -R'
system($command); ## in the perl script 
```

以上不起作用，因为我希望它在现有的 cygwin 环境中运行......

```
foobar.pl | xargs bash -i {} 
```

以上不起作用，因为 bash 似乎正在运行一个新进程，因此 bash_profile 的初始化和设置没有被实例化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T03:04:31.263

```
`foobar.pl` 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T03:05:47.827

给定 perl 文件：

```
print "date"; 
```

以下 bash 命令将执行此操作。

```
> $(perl qq.pl)
Mon Apr  6 11:02:07 WAST 2009 
```

但这是在一个单独的外壳中运行的。如果您真的想在*当前*shell 的上下文中调用它，请执行以下操作：

```
$ perl qq.pl >/tmp/qq.$$ ; . /tmp/qq.$$ ; rm -f /tmp/qq.$$
Mon Apr  6 11:04:59 WAST 2009 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-06T07:11:10.297

**坏的：**

```
`perl foo.pl`
$(perl foo.pl) 
```

为什么这很糟糕？因为很多原因；最为显着地：

*   分词：您在这里所做的是获取 perl 脚本的输出，将其拆分为任何有空格、制表符或换行符的块，并将这些块作为要运行的命令的第一个块的参数。在非常简单的情况下，`$(echo 'date +%s')`它可能会起作用；但这只是你在这里真正做的事情的一个非常糟糕的代表。
*   您不能引用或使用任何其他`bash`shell 功能，如参数扩展、bash 关键字等。

**好，但不方便：**

```
perl foo.pl > mytmpfile; bash mytmpfile 
```

创建一个临时文件以将您的 perl 脚本的输出放入然后使用 bash 运行它是可行的，但它很不方便，因为您需要创建（并清理！）临时文件并将其放在可移植的可写（且安全！）位置。

还要记住不要使用`.`或`source`执行临时文件，除非你真的打算在活动 shell 中运行它。此外，当您使用`.`or时`source`，之后您将无法可靠地清理临时文件。

**可能是最好的解决方案：**

```
perl foo.pl | bash 
```

当然，假设您的 perl 脚本输出正确的 bash 语法，这在所有方面都是非常安全的（“安全”在最不容易出错的情况下）。

**做几乎相同的事情的替代品：**

```
bash < <(perl foo.pl)
bash <(perl foo.pl) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-06T02:53:43.317

尝试：

```
foobar.pl | bash 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T03:00:01.803

我不认为这正是你要找的东西，但它就是我所拥有的:-)

```
perl foo.pl > /tmp/$$.script; bash /tmp/$$.script; rm /tmp/$$.script 
```

祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-05T15:05:14.317

尝试使用 open($fh,"-|",$arg1,$arg2)

# winforms - winform mdi catch child form focus c#

> ID：720126
> 
> 赞同：2
> 
> 时间：2009-04-06T02:47:15.890
> 
> 标签：winforms, forms, focus, mdi

I would like to be able to catch a child window focus event, in an mdi form.

If i loose focus to the entire mdi application, then click on a child, it works, but if I had two child forms open, I cannot catch the focus event when clicking between them.

I am using Dotnet Framework 2.0, and I need the code solution that will run fine on a windows 2000 machine, and up.

Thanks in advance for all help and advice,

-regards Jeremy

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-14T01:35:11.990

override the child forms Activated event.

sample code:

```
private void addChild(){
        frmChild mychild = new frmChild();
        mychild.Activated += FActivated;
        mychild.MdiParent = this;
        mychild.Show();
}

private void FActivated(object sender, EventArgs e)
{
    MessageBox.Show("Activated one of the child.");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T02:52:34.083

I think you're looking for the [`Form.MdiChildActivate` event](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.mdichildactivate.aspx). This event will be fired in your MDI parent form.

# javascript - 显示/隐藏多个 div

> ID：720133
> 
> 赞同：0
> 
> 时间：2009-04-06T02:50:47.753
> 
> 标签：javascript, jquery

我试图一次触发一个 div 的显示/隐藏。

发生的事情是所有 div（.shareLink）同时打开。

下面是我的jQuery：

```
$(document).ready(function(){
$(".shareLink").hide();
$("a.trigger").click(function(){
$(".shareLink").toggle("400");
return false;
});
}); 
```

以下是我的 HTML：

```
<dl class="links">
    <dd>content</dd>
    <dt class="description">content</dt>
    <ul class="tools">      
        <li><a class="trigger" href="#">Share Link</a></li>
    </ul>
</dl>
<div class="shareLink">
<?php print check_plain($node->title) ?>
</div> 
```

对上述问题的任何帮助将不胜感激。

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T03:47:25.497

根据您的 HTML，您需要执行以下操作：

```
$(function() {
    $("div.shareLink").hide();
    $("a.trigger").click(function(){
        $(this).parents('dl.links').next('div.shareLink').toggle(400);
        return false;
    });
}); 
```

这会走到父 DL，然后移动到下一个 shareLink div 并切换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T03:13:19.167

```
$(".shareLink").toggle("400"); 
```

指页面上任何具有“.shareLink”类的 div。

您需要找到一种方法来区分要显示的特定 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T03:07:29.757

您可能想尝试：

```
$(document).ready(function(){
    $(".shareLink").hide();
    $("a.trigger").click(function(e){
        e.preventDefault();
        $(this).next().toggle("400");
    });
}); 
```

答案是它取决于文档的结构。这是可与上述功能一起使用的示例。

```
<a class="trigger">click here</a>
<div class="shareLink">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
</div> 
```

# java - Terracotta + Compass = Hibernate + HSQLDB + JMS？

> ID：720143
> 
> 赞同：2
> 
> 时间：2009-04-06T02:58:58.607
> 
> 标签：java, hibernate, jakarta-ee, cluster-computing, terracotta

我目前需要一个高性能的java存储机制。

这表示：

**1)**我有 10,000 多个具有 1 - 多关系的对象。

**2)**对象每 5 秒更新一次，最近的更新在系统故障的情况下保持不变。

**3）**对象需要在合理的时间内（1-5秒）可查询。（即：给我所有具有此时间戳的对象或给我这些位置边界内的所有对象）。

**4)**对象需要在各种 Glassfish 安装中可用。

目前：

我一直在使用 JMS 来分发对象，使用 Hibernate 作为 ORM，并使用 HSQLDB 来提供所需的可恢复性。

我对表演并不完全满意。尤其是其中的 JMS 部分。

在做了一些 Stack Overflow 研究之后，我想知道这是否是一个更好的解决方案。请记住，我对 Terracotta 给我的东西没有经验。

我会使用 Terracotta 在系统中分布对象，而其他东西需要能够“查询”这些对象的属性。

这听起来合理吗？它会满足这些性能限制吗？我应该考虑哪些其他解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T03:59:10.257

我知道这不是您所要求的，但是，您可能想从从 HSQLDB 切换到[H2](http://www.h2database.com/html/main.html)开始。H2 是一个相对较新的纯 Java DB。它是由编写 HSQLDB 的同一个人编写的，他声称性能要好得多。我已经使用了一段时间了，我对它非常满意。这应该是一个非常快速的过渡（添加一个 Jar，更改连接字符串，创建数据库），所以值得一试。

总的来说，我相信在用不同的架构重写应用程序之前尝试充分利用我所拥有的东西。尝试对其进行分析以首先识别瓶颈。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T13:11:21.130

起初，Lucene 不是你的朋友。（只读）

兵马俑将在逻辑层进行缩放！您的问题似乎与处理逻辑无关。它更多地围绕存储/通信点。

1.  找出你的瓶颈！对存储/逻辑/JMS 处理时间和开销进行基准测试！
2.  使用良好的 JMS 框架（例如 ActiveMQ）和良好/调整的配置来解决 JMS 问题。
3.  也许分布式键=>值存储是您的朋友。试试[伏地魔计划](http://project-voldemort.com/)！
4.  如果您喜欢使用 Hibernate 和 HSQL，请查看 Hibernate 二级缓存和连接池（c3po、容器驱动...）！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-27T14:31:49.840

过去有几个 Terracotta 用户构建了这样的系统，所以我可以通过存在证明告诉你它可以完成。:)

Compass 确实支持使用 Terracotta 进行集群，因此可能会对您有所帮助。我怀疑只要注意创建集群数据结构的方式，您可能会变得更快。

关于您的要求和兵马俑：

1) 从兵马俑的角度来看，10k 个物体非常小

2) 5 秒的更新率似乎不是问题。可能取决于有多少节点以及您是否可以利用任何自然分区。所有更新都将是持久的。

3) 1-5 秒的查询时间似乎很容易。为查找构建自己的组织良好的数据结构是棘手的部分。显然，您希望避免扫描所有数据。

4) Terracotta 目前支持 Glassfish v1 和 v2。

如果您在[Terracotta 论坛上](http://forums.terracotta.org)发帖，您可能会得到更多关于这个问题的 Terracotta 眼球。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T03:41:39.910

我目前正在为提供集合+列表语义的非常（非常）快速的键/值分布式哈希数据库编写客户端。数据库是 C99 并且需要 GCC，现在我正在与旧的 Java 网络 IO 作斗争，以打破我目前每秒 30,000 次获取/设置的障碍。希望一周内完成。通过我的帐户给我留言，我会在演出时间回来。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T06:38:48.843

凭借如此高的更新率，Lucene 几乎绝对**不是**您想要的，因为一旦文档被编入索引，就无法更新它。您必须将所有对象版本保留在索引中并选择具有最新时间戳的版本，这会影响您的性能。

我不是数据库专家，但我认为您应该研究最近出现在新闻中的任何一种分布式数据库解决方案。（沙发数据库，​​卡桑德拉）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-06T07:35:58.520

您没有说您为 JMS 使用的供应商是什么，但如果您在那里遇到瓶颈，我不会感到惊讶。我每秒从 ActiveMq 收到的消息不能超过 100 条，无论我在确认配置、队列大小等方面尝试什么，我们都无法将 CPU 占用超过百分之几。

解决方案是将许多查询批处理到一个 JMS 消息中。我们有一个简单的类，当它达到 200 个查询或达到超时（我们使用 20 毫秒）时发送一批消息，这使我们的消息吞吐量显着增加。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-06T11:26:50.867

也许你应该看看：[Prevayler](http://www.prevayler.org/)。

你的对象总是在内存中。您的对象的“更改”将被保留。您可以不时拍摄快照：每个对象都被持久化。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-27T06:02:11.707

有保证的消息传递将比易失的消息传递慢得多。鉴于每个对象每隔几秒更新一次，您可能会考虑批量更新（比如 500 次更改或时间说 1-10 毫秒的值），发送易失性消息，并批量处理您的事务。在这种情况下，您更有可能受到带宽的限制。调整您的用例，您可能会发现较小的批量大小也可以有效地工作。如果带宽很关键（假设您有 10 MB 或更慢的连接，那么您可以使用 JMS 上的压缩）

您可以使用自定义解决方案（也可能更简单）获得更高的性能，例如 Hazelcast 和 JGroups 是免费的（您可以添加一个执行数据库同步的节点，这样您的主应用程序就不会变慢）。有一些商业产品可以处理大约 50 万条持久消息/秒。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-07-03T18:07:51.710

Terracotta + jofti = 可查询的持久集群数据结构 在 google 上搜索 terracotta querymap 或访问 tusharkhairnar.blogspot.com 的 querymap 博客 您可能还需要集成 timasync 以更新您的数据库。数据库是您的记录系统，使用 terracotta 作为缓存和数据库卸载机制，您甚至可以批量异步更新以使其更快，以便我的 db 包含相当新的数据

Tushar tusharkhairnar.blogspot.com

# jquery - 异步页面加载 - 如何将参数传递给回调？

> ID：720152
> 
> 赞同：0
> 
> 时间：2009-04-06T03:05:25.957
> 
> 标签：jquery, asp.net-ajax

jQuery/ajax 异步回调的一部分仍然让我感到困惑，我敢肯定这只是因为我对 javascript 的了解不够。

尽可能简化代码，这就是我卡住的地方：

如果我创建一个 id 为“queuediv1”的空 div，我可以用这样的页面方法的结果填充它。

```
$(document).ready(function() { 
    $.ajax({ 
      type: "POST", 
      contentType: "application/json; charset=utf-8", 
      dataType: "json", 
      url: "test12.aspx/GetHtmlTest", 
      //data: "{ 'Dividend': '" + $("#Dividend").val() + "' }", 
      data: "{}", 
      // Error! 
      error: function(xhr, status, error) { 
          // Boil the ASP.NET AJAX error down to JSON. 
          //var err = eval("(" + xhr.responseText + ")"); 

          // Display the specific error raised by the server 
          //alert(err.Message); 
          alert("AJAX Error!"); 
      }, 
       success: function(msg) { 
        $("#queuediv1").removeClass('isequeue_updating'); 
        $("#queuediv1").html(msg); 
            //an unorderd list with the tag "browserxx" was just inserted into the div 
        $("#browserxx").treeview(); 
      } 
    }); 
}); 
```

这很好用；它不是障碍，它让我可以完全控制错误处理。但是，当我尝试扩展它时，我遇到了麻烦。如果我要更新页面的多个区域，我可以更改调用，以便使用正确的“数据”进行每个异步调用，但我无法告诉回调我想要的控件的 ID填充。

将我的案例简化为仍然存在问题的情况：

假设 DOM 中有 4 个 div，我想更新 id 的 queuediv1、queuediv2、queuediv3 和 queuediv4。我想尽可能多地重用代码。虽然要更新的 div 的数量和 id 实际上是动态的，但我认为这会起作用：

```
$(document).ready(function() { 
for (i= 1;i<=4;i++) 
{ 
     var divname ="#queuediv"+i; 

    $.ajax({ 
      type: "POST", 
      contentType: "application/json; charset=utf-8", 
      dataType: "json", 
      url: "test12.aspx/GetHtmlTest", 
      // data would be populated differently so that each div gets its own result- for now it doesn't matter 
      //data: "{ 'Dividend': '" + $("#Dividend").val() + "' }", 
      data: "{}", 
      // Error! 
      error: function(xhr, status, error) { 
          // Boil the ASP.NET AJAX error down to JSON. 
          //var err = eval("(" + xhr.responseText + ")"); 

          // Display the specific error raised by the server 
          //alert(err.Message); 
          alert("AJAX Error!"); 
      }, 
       success: function(msg) { 
        $(divname).removeClass('isequeue_updating'); 
        $(divname).html(msg); 
        $("#somethingfromthemsg").treeview(); 
      } 
    }); 
} 
}); 
```

但这永远行不通，因为在调用成功时，范围是错误的，并且每个回调的 divname 已经等于“#queuediv4”。只有那个 div 得到更新（4x）。有没有办法将变量传递给回调？还是我只是想问题错了。

我确实在这里找到了处理对 $.getJSON 的异步调用的类似内容：http: [//thefrontiergroup.com.au/blog/tag/jquery](http://thefrontiergroup.com.au/blog/tag/jquery)

该站点讨论了将回调包装在另一个匿名函数中以保留调用变量。这对范围来说是有意义的，但我不知道如何形成 $.ajax 调用的创建方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T03:30:24.180

您可以将 for 循环的每次迭代包装在一个匿名函数中，如下所示：

```
$(document).ready(function () {
    for (i = 1; i <= 4; i++) {
        (function () {
            var divname = "#queuediv" + i;
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "test12.aspx/GetHtmlTest",
                data: "{}",
                error: function (xhr, status, error) {
                    alert("AJAX Error!");
                },
                success: function (msg) {
                    $(divname).removeClass('isequeue_updating');
                    $(divname).html(msg);
                    $("#somethingfromthemsg").treeview();
                }
            });
        })();
    }
}); 
```

一个更简单的例子是：

```
<div id="output1"></div><div id="output2"></div><div id="output3"></div><div id="output4"></div><div id="output5"></div>
<script language="javascript">
    for (var a = 1; a <= 5; a++) {
        (function () {
            var divName = "output" + a;
            var b = a;
            setTimeout(function () { document.getElementById(divName).innerHTML = b; }, 2000);
        })();
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T03:46:09.820

请记住，JavaScript 是一种真正的函数式语言，所有函数（无论是否匿名）都是功能齐全的[闭包](http://en.wikipedia.org/wiki/Closure_(computer_science))，因此来自函数“外部”的变量仍然可用。

解决“传递参数”的通用方法是闭包的运行时构造：

```
function makeSuccessFunc (divname) {
    return function (msg) {
        $(divname).removeClass('isequeue_updating'); 
        $(divname).html(msg); 
        $("#somethingfromthemsg").treeview(); 
    };
}; 
```

所以你可以这样做：

```
$(document).ready(function() { 
for (i= 1;i<=4;i++) 
{ 
     var divname ="#queuediv"+i; 

    $.ajax({ 
      type: "POST", 
      contentType: "application/json; charset=utf-8", 
      dataType: "json", 
      url: "test12.aspx/GetHtmlTest", 
      // data would be populated differently so that each div gets its own result- for now it doesn't matter 
      //data: "{ 'Dividend': '" + $("#Dividend").val() + "' }", 
      data: "{}", 
      // Error! 
      error: function(xhr, status, error) { 
          // Boil the ASP.NET AJAX error down to JSON. 
          //var err = eval("(" + xhr.responseText + ")"); 

          // Display the specific error raised by the server 
          //alert(err.Message); 
          alert("AJAX Error!"); 
      }, 
       success: makeSuccessFunc (divname)
    }); 
} 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T14:01:55.580

点击。

这里有几篇关于闭包的好文章也对我有帮助：

JavaScript，是时候了解闭包了

[http://devlicio.us/blogs/sergio_pereira/archive/2009/02/23/javascript-time-to-grok-closures.aspx](http://devlicio.us/blogs/sergio_pereira/archive/2009/02/23/javascript-time-to-grok-closures.aspx)

C# 中的闭包

[http://www.lostechies.com/blogs/derickbailey/archive/2009/02/23/closures-in-c-variable-scoping-and-value-types-vs-reference-types.aspx](http://www.lostechies.com/blogs/derickbailey/archive/2009/02/23/closures-in-c-variable-scoping-and-value-types-vs-reference-types.aspx)

# asp.net - 如何使用带有 ASP.NET DataGrid 的存储过程

> ID：720155
> 
> 赞同：1
> 
> 时间：2009-04-06T03:07:38.820
> 
> 标签：asp.net, database, linq, ado

问题也可以是：

*调用存储过程来填充 DataGrid 的首选方式是什么？*

我目前正在开发一个 ASP.NET 页面，我想知道 Linq 是否适合与我的 SQL Server DB 一起使用。

ADO 看起来也不错，所以我只想就一般而言最合适的内容提供反馈。

LINQ 确实使调用存储过程变得容易，但我有点坚持尝试找出将结果集从存储过程放入数据网格的正确方法。

> 不要以为我想在那里做一个 foreach ..但是所有的例子似乎都指向那个方向.. 或者我只是很困惑

[我已经阅读了这篇博](http://blogs.interfacett.com/dan-wahlins-blog/2008/2/17/linq-and-lambdas-and-sprocsoh-my.html)文，而[这一篇](http://msdn.microsoft.com/en-us/library/bb546186.aspx)，似乎要走的路是 foreach 和 Ienumerable 方法。我对整件事有点困惑。

我还在考虑[创建电影数据库的教程，](http://www.asp.net/learn/mvc/tutorial-21-cs.aspx)在这种情况下，DataGrid 就变得不必要了。

> 访问简单的 SQL 过程并返回填充的数据网格或类似数据网格的数据表示模型的最简单、最直接的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T05:39:19.813

我建议使用 Linq to SQL。你认为你不应该使用任何 foreach 循环是正确的——你需要的只是数据绑定。

例如。在您后面的代码中，您可能有一个执行以下操作的 DataBind 事件：

```
protected void GridView1_DataBanding(object sender, EventArgs e)
{
            // Get an instance of our generated DataContext class.
            DAL.AdventureWorks db =
                new DAL.AdventureWorks(
                    WebConfigurationManager.ConnectionStrings["AdventureWorksCS"].ConnectionString);

            // Get a strongly typed List from the Stored Procedure output
            List<DAL.MySPResult> myData = db.MySP().ToList();

            GridView1.DataSource = myData;
} 
```

您需要在 Linq to SQL 类中设置您的存储过程，方法是将其拖到设计图面上。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T03:26:42.643

使用 SqlDataSource 是最直接的方法。如果您在业务层中隔离所有数据库调用，那么您可以简单地创建一个调用存储过程的 ObjectDataSource。虽然在这里可能感觉有点矫枉过正，但这是一项有用的技能，一旦掌握了它*就很*容易实施。

如果您将使用数据绑定控件，您真的不需要 LINQ 或 foreach 等，因为您不需要手动填充它（这就是数据绑定的全部内容）。

还有一件事——我**强烈**建议您使用*GridView*而不是 DataGrid；它更新，具有更多自动化功能，并且是更强大和更有吸引力的控件。如果您需要任何示例代码，请告诉我。

# svn - 在不同环境下进行测试的最佳方法？

> ID：720156
> 
> 赞同：0
> 
> 时间：2009-04-06T03:09:36.647
> 
> 标签：svn, path, cross-platform

我正在开发一个需要同时在**Mac OS X 和 Windows**上工作的 Java 项目。有许多变量存储各种资源和文件的**路径。**

处理它们的最佳方法是，将它们全部放在一个**单独的类**中（例如，常量）并在 SVN 中为文件维护**两个分支吗？**

**更新：**这**不仅仅是路径分隔符的问题**（正斜杠与反斜杠）。两个系统的目录结构不同。在 Mac 上，我将资源保存在不同的目录中。比如说，某处的图像，某处的日志文件。在 Windows 上，我可能会使用完全不同的目录。没有必要让所有目录都成为一棵树的一部分（即它们不在一个名为“资源”之类的主目录下的不同目录中）。这不一定是一种糟糕的编程习惯。有时您需要访问系统文件或系统范围的公共目录，而您不能将它们放在一个至高无上的目录下

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T03:11:54.270

您是否考虑过使用属性文件？ [Apache commons 配置](http://commons.apache.org/configuration/)应该是跨平台的，它可以智能地处理属性文件的位置。

这样，您只有一个构建，但配置文件是特定于操作系统的，维护、构建和测试应该要少得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T03:34:19.707

如果您使用的是 JDK 1.4 或更高版本，并且用户需要能够更改这些路径，则可以使用内置的[Preferences](http://java.sun.com/javase/6/docs/api/java/util/prefs/Preferences.html "喜好") API 来存储/更新它们。如果没有，您可以为每个操作系统定义常量，并调用`System.getProperty(os.name)`以确定使用哪个操作系统。这仍然可以防止您必须在每个平台上进行单独的构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T03:36:13.073

不确定到底是什么问题。（Java 被设计成与平台完全无关。）

看看java.io.File静态常量pathSeparator，pathSeparatorChar，以及separator，以及separatorChar。如果你有一个固定的树结构来组织你的资源（即点格式：resources.data.test.woof.txt），你可以使用 File.separatorChar 而不是 '.' 并且您有系统特定的路径。

另外，不要忽略信息量很大的 System.getProperty() 方法。

这应该足以在任何 FS 上行走任何路径。

# c# - 查找具有特定属性的所有类

> ID：720157
> 
> 赞同：32
> 
> 时间：2009-04-06T03:10:36.257
> 
> 标签：c#, .net, reflection, .net-3.5

我有一个 .NET 库，我需要在其中找到所有具有我定义的自定义属性的类，并且我希望能够在应用程序使用我的库时即时找到它们（即 - 我不希望在某处有一个配置文件，我声明程序集要查看和/或类名）。

我正在看，`AppDomain.CurrentDomain`但我对它并不太熟悉，也不确定需要如何提升权限（*如果可能*的话，我希望能够以最小的信任在 Web 应用程序中运行库，但信任越低越快乐我会成为）。我还想牢记性能（它是一个 .NET 3.5 库，因此 LINQ 完全有效！）。

那么`AppDomain.CurrentDomain`我最好/唯一的选择是循环遍历所有程序集，然后输入这些程序集吗？或者有没有其他方法

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2009-04-06T03:19:39.867

```
IEnumerable<Type> GetTypesWith<TAttribute>(bool inherit) 
                              where TAttribute: System.Attribute
 { return from a in AppDomain.CurrentDomain.GetAssemblies()
          from t in a.GetTypes()
          where t.IsDefined(typeof(TAttribute),inherit)
          select t;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-26T23:56:59.443

马克发布了一个很好的答案，但如果您愿意，这里有一个 linq 免费版本：

```
 public static IEnumerable<Type> GetTypesWith<TAttribute>(bool inherit) where TAttribute : Attribute
    {
        var output = new List<Type>();

        var assemblies = AppDomain.CurrentDomain.GetAssemblies();

        foreach (var assembly in assemblies)
        {
            var assembly_types = assembly.GetTypes();

            foreach (var type in assembly_types)
            {
                if (type.IsDefined(typeof(TAttribute), inherit))
                    output.Add(type);
            }
        }

        return output;
    } 
```

# javascript - 更清楚地解释 JavaScript 中的递归和执行流程？

> ID：720158
> 
> 赞同：5
> 
> 时间：2009-04-06T03:11:04.880
> 
> 标签：javascript, recursion

我正在阅读 Eloquent JavaScript 并且遇到了这个难题的示例：

> 考虑这个难题：从数字 1 开始，反复加 5 或乘以 3，可以产生无限数量的新数字。你将如何编写一个函数，给定一个数字，试图找到产生该数字的一系列加法和乘法？

这是解决方案的代码：

```
function findSequence(goal) {
  function find(start, history) {
    if (start == goal)
      return history;
    else if (start > goal)
      return null;
    else
      return find(start + 5, "(" + history + " + 5)") ||
             find(start * 3, "(" + history + " * 3)");
  }
  return find(1, "1");
}

print(findSequence(24)); 
```

如果 dod find 没有参数 start 和 goal 的值，有人可以弄清楚它是如何执行的吗？还有递归是怎么发生的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T03:19:07.717

但是`find` *没有*值就不会被执行`start`and `goal`。它首先使用 for 的值执行，而`1`for`start`的唯一值`goal`是`24`。

也许您对操作顺序感到困惑。在那里我们看到了一个函数的*声明*，`findSequence`. 在声明期间，不执行任何代码。该`findSequence`函数仅在稍后执行，在最后一行，执行该函数的结果被打印出来。

在 的声明中`findSequence`，还有另一个函数 的声明`find`。再一次，它直到稍后才会被执行。该`findSequence`函数只有*一行*可执行代码，即调用`find(1, "1")`. 执行那一行会`find`递归地触发执行若干次。该`find`函数引用`goal`; 当 Javascript 解释器执行代码时，`goal`总是引用 的参数`findSequence`，并且由于在这个例子`findSequence`中只被调用一次，`goal`所以总是具有相同的值，`24`。

您应该能够看到递归发生的位置。如果`start`等于`goal`，则函数停止；它返回它如何到达该数字的历史。如果`start`大于`goal`，则返回`null`，表示该路径不是目标编号的路径。如果`start`仍然小于`goal`，则该函数尝试以其起始值加 5*调用自身。如果返回非空值，则返回该值。*否则，它会尝试乘以 3 并返回该历史值。

请注意，尽管此代码可以返回许多数字，但它不能返回*所有*数字。`2`例如，如果目标是，`findSequence`则将返回`null`，因为无法通过添加或乘以来开始`1`和到达。`2``5``3`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T03:15:44.120

在 findSequence 内部调用 find 时，它可以访问在 findSequence 的定义中设置的目标变量。一个简单的例子是：

```
function outerFunction() {
  var a = 2;
  function innerFunction() {
    alert(a);
  }
  innerFunction();
}
outerFunction(); 
```

start 变量在执行时定义：

```
return find(1, "1"); 
```

实际上，初始变量为 1，目标变量为 24，第一次传递时的历史记录为“1”。

编辑：根据 Rob 的评论，闭包实际上并不是造成这种情况的原因，因为 find() 没有在 findSequence() 之外执行，范围界定导致找到目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T03:18:07.610

如果我正确理解您的问题：最后一行代码调用 findSequence()，目标为 24。在 findSequence() 中有一个名为 find() 的函数，该函数在 findSequence 的返回语句中定义并调用, start 等于 1，history 等于 1。

# php - SESSION中存储的数组后出现的数字

> ID：720161
> 
> 赞同：2
> 
> 时间：2009-04-06T03:12:37.640
> 
> 标签：php, arrays, session

我正在对存储在会话变量中的数组执行 print_r，并且由于某种未知原因，它在数组打印后添加了一个数字。

例子：

```
Array
(
    [0] => 868
    [userid] => 868
)
1 
```

如果我直接在函数本身中执行 print_r 并且在变量存储到会话变量之前，它不会添加该数字 1。

解决方案：

几乎在 Paolo 正确回答我的问题的同时，我找到了导致代码。

print_r 上的简单回显

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T13:50:15.687

我遇到过同样的问题。您可能正在回显 print_r() 的返回值为“true”。您必须设置 print_r() 以返回格式化文本，而不是它的成功或失败。

```
echo "Session: ".print_r($_SESSION,true)."<br />\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T03:14:26.357

您可以发布您用来执行此操作的代码`print_r`吗？获得 1 的最常见原因是当您尝试打印布尔值时：

```
$my_bool = true;
print $my_bool; // will be printed as 1
print_r($my_bool); // will also be printed as 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-01-24T09:05:19.637

除了使用`print_r`or `vardump`，您应该考虑使用[FirePHP](http://www.firephp.org/)或[PHP Quick Profiler](http://particletree.com/features/php-quick-profiler/)来帮助您调试和显示变量的值。

使用[FirePHP](http://www.firephp.org/)，您可以将值显示到 Firebug 的控制台中。使用[PHP Quick Profiler](http://particletree.com/features/php-quick-profiler/)，将在页面底部添加一个控制台，可用于显示您需要的任何值。

# objective-c - 框架链接错误，找不到图像？

> ID：720162
> 
> 赞同：3
> 
> 时间：2009-04-06T03:13:01.507
> 
> 标签：objective-c, xcode, macos, frameworks, linker

我在我的应用程序中使用 DarwiinRemote 的 WiiRemote.framework。

我已经通过下载源代码和需要垃圾收集以及为 10.5 构建解决了一些问题。但是，当我尝试将其添加到我的项目时，我收到控制台错误：

```
dyld: Library not loaded: @executable_path/../Frameworks/WiiRemote.framework/Versions/A/WiiRemote
Referenced from: /Users/chasemeadors/Documents/Apps in development/Animation/build/Debug/Animation.app/Contents/MacOS/Animation
Reason: image not found 
```

我在互联网上进行了一些搜索，但它们都是特定于框架的，对我来说并没有多大意义。所以我希望这里有人能给出一个简短、甜蜜、可以理解的答案？

框架的下载链接：（*注意*我的更改，即未进行垃圾收集） [http://sourceforge.net/project/downloading.php?group_id=183966&use_mirror=softlayer&filename=WiiRemoteFramework0.5-src.tar.gz&a=58980345](http://sourceforge.net/project/downloading.php?group_id=183966&use_mirror=softlayer&filename=WiiRemoteFramework0.5-src.tar.gz&a=58980345)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-06T04:50:28.947

该框架显然希望您的应用程序将其复制到应用程序包的 Frameworks 文件夹中。创建一个 Copy Files 构建阶段，将框架添加到其中，并将目标设置为 Frameworks 目录。

# cell - 知道使用并行编程和/或 Cell 处理器完成的任何很酷的项目吗？

> ID：720173
> 
> 赞同：1
> 
> 时间：2009-04-06T03:20:23.547
> 
> 标签：cell, parallel-processing, playstation

我一直在弄乱playstation 3上的单元处理器，并且制作了一些小程序（在两个点列表中查找每个点之间的距离，mandelbrot集生成器）我正在寻找更大的东西扩展我对平台的了解。我想我会看看细胞竞赛产生了哪些想法，看看我是否能找到任何想法，但我能找到的唯一一个只展示了获胜者，这些都是非常大的项目（绘制人脑图之类的东西） . 所以，我想知道是否有人有任何想法或他们已经完成的任何项目来让我开始。它不必特定于单元格。大多数涉及多个处理器的想法都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-01T18:12:06.633

那里有来自 Kiwicon 的[Crackstation](http://computerworld.co.nz/news.nsf/scrt/C50D36EFEC2B482ACC2573A00070EF83)项目。

大多数令人尴尬的并行问题在 Cell 上都很好，想到的一个例子是用于处理来自[GNU USRP的输入的 Cell cpu 的 FFTW 库的](http://gnuradio.org/trac/wiki)[Cell 特定版本](https://www.cgran.org/wiki/GcellizedFFTW)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T03:25:04.537

fold@Home 很好，基本上是任何生物/化学模拟器，这两个领域都充满了可以并行处理的数据，例如 DNA 解析，蛋白质折叠或药物开发。无论如何，我的观点是在这些领域有大量的文档、研究、论文和需求。所以你可能有兴趣考虑摆弄你的方式。

我在大学时从事 DNA 模拟工作。

# .net - Object.GetHashCode() 的默认实现

> ID：720177
> 
> 赞同：180
> 
> 时间：2009-04-06T03:25:14.863
> 
> 标签：.net, hash, gethashcode

默认实现如何`GetHashCode()`工作？它是否有效且足够好地处理结构、类、数组等？

我试图决定在什么情况下我应该自己打包，在什么情况下我可以安全地依赖默认实现来做好。如果可能的话，我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2009-04-06T04:29:32.273

对于一个类，默认值本质上是引用相等，这通常很好。如果编写一个结构体，更常见的是重写相等性（尤其是为了避免装箱），但无论如何你都很少写一个结构体！

当覆盖相等性时，您应该始终有一个匹配的`Equals()`and `GetHashCode()`（即对于两个值，如果`Equals()`返回 true，它们**必须**返回相同的哈希码，但不需要相反*）* - 通常还提供`==`/`!=`运算符，并且经常也实施`IEquatable<T>`。

为了生成哈希码，通常使用因式总和，因为这样可以避免配对值的冲突——例如，对于基本的 2 字段哈希：

```
unchecked // disable overflow, for the unlikely possibility that you
{         // are compiling with overflow-checking enabled
    int hash = 27;
    hash = (13 * hash) + field1.GetHashCode();
    hash = (13 * hash) + field2.GetHashCode();
    return hash;
} 
```

这样做的好处是：

*   {1,2} 的哈希与 {2,1} 的哈希不同
*   {1,1} 的哈希与 {2,2} 的哈希不同

等 - 如果仅使用未加权和或 xor ( `^`) 等，这可能很常见。

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2009-04-06T03:43:04.400

```
namespace System {
    public class Object {
        [MethodImpl(MethodImplOptions.InternalCall)]
        internal static extern int InternalGetHashCode(object obj);

        public virtual int GetHashCode() {
            return InternalGetHashCode(this);
        }
    }
} 
```

**InternalGetHashCode**映射到 CLR 中的**ObjectNative::GetHashCode**函数，如下所示：

```
FCIMPL1(INT32, ObjectNative::GetHashCode, Object* obj) {  
    CONTRACTL  
    {  
        THROWS;  
        DISABLED(GC_NOTRIGGER);  
        INJECT_FAULT(FCThrow(kOutOfMemoryException););  
        MODE_COOPERATIVE;  
        SO_TOLERANT;  
    }  
    CONTRACTL_END;  

    VALIDATEOBJECTREF(obj);  

    DWORD idx = 0;  

    if (obj == 0)  
        return 0;  

    OBJECTREF objRef(obj);  

    HELPER_METHOD_FRAME_BEGIN_RET_1(objRef);        // Set up a frame  

    idx = GetHashCodeEx(OBJECTREFToObject(objRef));  

    HELPER_METHOD_FRAME_END();  

    return idx;  
}  
FCIMPLEND 
```

**GetHashCodeEx**的完整实现相当大，因此更容易链接到[C++ 源代码](https://web.archive.org/web/20100826100454/http://www.koders.com/cpp/fid187B41425FAF5DEC8C7921012C309DC6534FE487.aspx)。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-07-20T04:14:18.640

由于我找不到解释***为什么***我们应该重写`GetHashCode`和`Equals`自定义结构以及***为什么***默认实现“不太可能适合用作哈希表中的键”的答案，我将留下一个指向[此博客的链接post](https://blogs.msdn.microsoft.com/seteplia/2018/07/17/performance-implications-of-default-struct-equality-in-c/)，它通过一个实际发生的问题示例来解释原因。

我建议阅读整篇文章，但这里是一个摘要（添加了重点和说明）。

结构的默认哈希值很慢而且不是很好的原因：

> CLR 的设计方式，每次调用中定义的成员`System.ValueType`或`System.Enum`类型 [可能] 导致**装箱分配**[...]
> 
> 散列函数的实现者面临两难境地：对散列函数进行良好的分布还是使其快速分布。在某些情况下，可以同时实现它们，**但**在`ValueType.GetHashCode`.
> 
> 结构的规范哈希函数“组合”了所有字段的哈希码。但是在方法中获取字段哈希码的唯一`ValueType`方法是**使用反射**。因此，CLR 作者决定在分发速度上进行交易，默认`GetHashCode`版本**只返回第一个非空字段的哈希码，**并使用类型 id 来“处理”它 [...] 这是一个合理的行为，除非它不是. 例如，**如果你很不幸，并且结构的第一个字段在大多数情况下具有相同的值，那么哈希函数将**始终提供相同的结果。而且，正如您可能想象的那样，如果这些实例存储在哈希集或哈希表中，这将导致巨大的性能影响。
> 
> [...]**基于反射的实现很慢**。非常慢。
> 
> [...] 两者`ValueType.Equals`都有`ValueType.GetHashCode`一个特殊的优化。如果一个类型没有“指针”并且被正确打包 [...] 则使用更优化的版本：`GetHashCode`迭代一个实例并异或 4 个字节的块，并且`Equals`方法使用`memcmp`. [...] 但是优化非常棘手。首先，很难知道何时启用优化 [...] 其次，**内存比较不一定会给您正确的结果**。这是一个简单的示例：[...]`-0.0`和`+0.0`相等但具有不同的二进制表示。

帖子中描述的实际问题：

```
private readonly HashSet<(ErrorLocation, int)> _locationsWithHitCount;
readonly struct ErrorLocation
{
    // Empty almost all the time
    public string OptionalDescription { get; }
    public string Path { get; }
    public int Position { get; }
} 
```

> 我们使用了一个元组，其中包含一个具有默认相等实现的自定义结构。不幸的是，**该结构有一个可选的第一个字段，几乎总是等于 [empty string]**。性能还可以，直到集合中的元素数量显着增加导致真正的性能问题，需要几分钟来初始化包含数万个项目的集合。

因此，要回答“在什么情况下我应该自己打包以及在什么情况下我可以安全地依赖默认实现”的问题，至少在*structs*的情况下，您应该覆盖`Equals`并且`GetHashCode`每当您的自定义结构可能用作键入哈希表或`Dictionary`.
我还建议`IEquatable<T>`在这种情况下实施，以避免拳击。

正如其他答案所说，如果您正在编写一个*class*，使用引用相等的默认哈希通常很好，所以在这种情况下我不会打扰，*除非*您需要覆盖`Equals`（然后您必须`GetHashCode`相应地覆盖）。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-04-06T04:02:42.293

[Object](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)`GetHashCode`方法的文档说*“此方法的默认实现不得用作散列目的的唯一对象标识符。”* 而[ValueType](http://msdn.microsoft.com/en-us/library/system.valuetype.gethashcode.aspx)则说*“如果调用派生类型的 GetHashCode 方法，则返回值不太可能适合用作哈希表中的键。”* .

 **`byte`, `short`, `int`,等基本数据类型`long`，`char`并`string`实现了一个很好的 GetHashCode 方法。其他一些类和结构，`Point`例如，实现一个`GetHashCode`可能适合也可能不适合您的特定需求的方法。你只需要尝试一下，看看它是否足够好。

每个类或结构的文档都可以告诉您它是否覆盖了默认实现。如果它没有覆盖它，你应该使用你自己的实现。对于您自己创建的任何需要使用该`GetHashCode`方法的类或结构，您应该制作自己的实现，使用适当的成员来计算哈希码。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-06T03:42:40.297

一般来说，如果您要覆盖 Equals，则需要覆盖 GetHashCode。这样做的原因是因为两者都用于比较您的类/结构的相等性。

检查 Foo A, B 时使用 Equals；

如果（A == B）

由于我们知道指针不太可能匹配，我们可以比较内部成员。

```
Equals(obj o)
{
    if (o == null) return false;
    MyType Foo = o as MyType;
    if (Foo == null) return false;
    if (Foo.Prop1 != this.Prop1) return false;

    return Foo.Prop2 == this.Prop2;
} 
```

GetHashCode 通常由哈希表使用。你的类生成的哈希码对于一个类给出状态应该总是相同的。

我通常这样做，

```
GetHashCode()
{
    int HashCode = this.GetType().ToString().GetHashCode();
    HashCode ^= this.Prop1.GetHashCode();
    etc.

    return HashCode;
} 
```

有人会说，每个对象生命周期只应计算一次哈希码，但我不同意这一点（我可能错了）。

使用 object 提供的默认实现，除非您对某个类具有相同的引用，否则它们将不相等。通过覆盖 Equals 和 GetHashCode，您可以根据内部值而不是对象引用来报告相等性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-20T05:00:06.037

如果您只是在处理 POCO，则可以使用此实用程序来简化您的生活：

```
var hash = HashCodeUtil.GetHashCode(
           poco.Field1,
           poco.Field2,
           ...,
           poco.FieldN); 
```

...

```
public static class HashCodeUtil
{
    public static int GetHashCode(params object[] objects)
    {
        int hash = 13;

        foreach (var obj in objects)
        {
            hash = (hash * 7) + (!ReferenceEquals(null, obj) ? obj.GetHashCode() : 0);
        }

        return hash;
    }
} 
```

# language-agnostic - 使用 TCP 的 connect() 行为

> ID：720185
> 
> 赞同：1
> 
> 时间：2009-04-06T03:35:00.317
> 
> 标签：language-agnostic, networking, tcp, network-protocols

我在客户端调用 connect()。客户端进入 SYN_SENT 状态并发送一个 SYN。现在它得到一个没有 ACK 的 SYN，所以客户端进入 SYN_RCVD 状态。

此时 connect() 是否返回？从技术上讲，您有足够的信息可以在套接字上调用 send() 和 recv()。RFC 本身说，如果您在 SYN_RCVD 状态的套接字上调用 SEND，则：

```
SYN-RECEIVED STATE

  Queue the data for transmission after entering ESTABLISHED state. 
```

而且，如果您致电 RECEIVE：

```
LISTEN STATE
SYN-SENT STATE
SYN-RECEIVED STATE

  Queue for processing after entering ESTABLISHED state.  If there
  is no room to queue this request, respond with "error:
  insufficient resources". 
```

所以我的问题是：connect() 在获得 SYN 后是否返回，然后对 recv() 的调用会阻塞，还是 connect() 本身会阻塞，直到连接完全建立？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T07:27:31.597

作为参考， Wright 和 Stevens`connect()`在[TCP/IP Illustrated, Volume 2](https://rads.stackoverflow.com/amzn/click/com/020163354X)中的实现将阻塞，直到连接完全建立（如果`connect()`调用设置为阻塞）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T07:41:04.530

在同时连接的情况下，客户端只会收到没有 ACK 的 SYN。更常见的事件序列，具有正常的阻塞套接字：

*   客户端应用程序调用`connect()`，客户端发送`SYN`并进入状态`SYN-SENT`
*   客户端`SYN+ACK`从服务器接收；客户端发送`ACK`并进入状态`ESTABLISHED`；应用程序的调用`connect()`返回。

# java - 为什么这个 for-each 循环不起作用？

> ID：720200
> 
> 赞同：5
> 
> 时间：2009-04-06T03:45:41.007
> 
> 标签：java, foreach

在这段代码中，为什么我的数组没有按照我的意愿进行初始化？是 for-each 循环不是为了做到这一点而设计的，还是我没有正确使用它？

```
 int[] array = new int[5];

    //initialise array -> Doesn't work! Array still full of 0's
    for(int i : array)
        i = 24; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-06T03:54:28.600

for-each 循环不适用于这种情况。您不能使用 for-each 循环来初始化数组。你的代码：

```
int[] array = new int[5];
for (int i : array) {
    i = 24;
} 
```

将转换为如下内容：

```
int[] array = new int[5];
for (int j = 0; j < array.length; j++) {
    int i = array[j];
    i = 24;
} 
```

如果这是一个对象数组，它仍然会失败。基本上，for-each 将集合或数组中的每个条目依次分配给您提供的变量，然后您可以使用该变量。该变量*不*等同于数组引用。它只是一个变量。

For-each 不能用于初始化*任何*数组或集合，因为它循环遍历数组或集合的当前内容，一次为您提供每个**值**。for-each 中的变量*不是*数组或集合引用的代理。编译器不会用“”替换您的“ `i`”（来自“ `int i`”）`array[index]`。

例如，如果你有一个 Date 数组，然后试试这个，代码：

```
Date[] array = new Date[5];
for (Date d : array) {
    d = new Date();
} 
```

会被翻译成这样的：

```
Date[] array = new Date[5];
for (int i = 0; i < array.length; i++) {
    Date d = array[i];
    d = new Date();
} 
```

如您所见，它不会初始化数组。您最终将得到一个包含所有空值的数组。

注意：我把上面的代码，编译成一个`.class`文件，然后用[jad](http://www.varaneckas.com/jad)反编译。此过程为我提供了以下代码，由 Sun Java 编译器 (1.6) 从上面的代码生成：

```
int array[] = new int[5];
int ai[];
int k = (ai = array).length;
for(int j = 0; j < k; j++)
{
    int i = ai[j];
    i = 5;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-06T03:49:29.033

`i`只是数组中该点的 int 的副本，而不是对它的引用。在这种情况下，for-each 循环不起作用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-06T04:15:49.437

采用

> `java.util.Arrays.fill(array, 24)`

如果您要初始化为相同的值。除此之外，Eddie 在他对 for-each 结构的翻译中非常准确。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-06T03:48:45.790

int 是系统中的原始类型，因此您实际上获取的是数组中单元格值的副本，而不是您可以分配到的数组中该单元格的引用......

让我试着解释一下。如果您有一个 X 数组，其中 X 是一个具有数据成员的类，您将在每次迭代中获得对不同单元格的引用，并且能够通过调用其上的函数来更改其状态（例如，setValue） .

当您有 int 时，情况就不同了，您的 int 不是引用，它是堆栈上的实际值，因为它是原始类型，因此在每次迭代中，for 将数组中的值复制到 i 中。然后你更新你的 i，但这对数组没有影响。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T04:02:51.683

改为这样做：

```
int[] array = new int[5];

// initialise array -> Will work now
for(int i = 0 ; i< array.length ; i++)
    array[i] = 24 ; 
```

# latex - 乳胶中的定位公式

> ID：720202
> 
> 赞同：6
> 
> 时间：2009-04-06T03:46:44.857
> 
> 标签：latex

我是一名机械工程师，她一直在 Word 中进行计算报告。然而，自从我用我的头撞倒卧室的墙壁后，Word 不断让我发疯，我一直在看乳胶，并喜欢它。它相对用户友好，而且不太难习惯。

但是，我有一个问题。顺便提一下，winxp 上的发行版是 miktex 2.7，如果这很重要的话。

我正在尝试以某种方式编写我的公式：

```
text text text text text text text text text text text text  
text text text text text text text text text text text text
a = b + c = 12m    measure of length of great importance  
   b = 6m          a measure of length  
   b1 = 28m        new text
   c1 + d = a + b  new text
   c = 8m          another measure of length  
                   and it is in meters 
```

以这种方式很好地证明这些的正确方法是什么？有可能吗？我有很多这样的（书本厚度为 2 厘米）。

我是一个关于 tex 的新手，所以这对你来说可能听起来微不足道。但对我来说，谷歌搜索后，这仍然是一个问题。请帮忙。节省一堵墙。

我编辑：只是想我会解释得更好一些（尽管你们已经涵盖了几乎所有的可能性）。我正在尝试左对齐 b 和 c （公式的其余部分会有所不同，所以没关系）以及解释公式的文本也左对齐。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-06T03:51:43.847

是的，对齐是一种常见的情况，并且在 LaTeX 中得到了很好的支持。您想使用*对齐*环境 ( `\begin{align} ... \end{align}`)。其中，LaTeX 的每一行（用 \ 分隔）将对应一个公式，您可以通过放置一个与号 (&) 来选择希望在每一行上对齐的字符。在您的示例中：

```
\begin{align}
a = b + c &= 12m\\
b &= 6m\\
c &= 8m\\
\end{align} 
```

应该做一些你所追求的事情（取决于你想如何证明第一行的合理性）。这将为文本中的每个方程编号以供参考；如果不需要或不需要这样做，请改用**align***环境。在环境名称后添加星号是 LaTeX 中的一个常见习语，意思是“不要编号这些”，也可以用于部分等。

编辑：这是我认为你想要的理由的另一种解释：

```
text text text text text text text text text text text text  
text text text text text text text text text text text text
\begin{align*}
a = &b + c = 12m &\text{measure of length of great importance}\\  
&b = 6m &\text{a measure of length}\\
&c = 8m &\text{another measure of length}\\ 
& &\text{and it is in meters}
\end{align*} 
```

笔记：

*   您可以在每行放置多个 & 符号来指定多个对齐点，但所有行必须具有相同数量的对齐点。
*   `align`是一个数学环境。
*   \text{...} 让您将普通文本放入数学环境中。还有 [许多其他](http://en.wikibooks.org/wiki/LaTeX/Mathematics)命令可以在数学环境中格式化文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T14:35:17.047

您可以使用标准`eqnarray`环境，或者**查看[`amsmath`](http://www.google.com/url?sa=U&start=1&q=ftp://ftp.ams.org/pub/tex/doc/amsmath/amsldoc.pdf&ei=ERPaSd7YPKnulQeKyZThDA&usg=AFQjCNHTkUVeQFjIJgsr5nkNAcZPiv7lOg)包**中提供的更强大的工具。

* * *

如果使用`eqnarray`，您至少会像这样在作品和文本之间放置位置锚点

```
\begin{eqnarray}
a = b + c = 12m  & & \mbox{measure of length of great importance}\\
   b = 6m        & & \mbox{a measure of length}\nonumber\\
...
\end{eqnarray} 
```

行默认编号，但`\nonumber`会抑制它。为了防止使用任何行号`eqnarray*`。

* * *

如果你坚持，你*也可以*使用表格，但我不推荐它。如果这样做，请将整个公式保存在一个单元格中，例如：

```
\begin{tabular}{cl}
    $a = b + c = 12m$  & \mbox{measure of length of great importance}\\
    $b = 6m$           & \mbox{a measure of length}\\
 ...
\end{tabular} 
```

这使得编号变得困难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T04:08:22.950

您可能是我听说过的第一个将 LaTeX 描述为“用户友好”的人 ;-)

无论如何，尚不清楚您是要对齐方程式的特定部分还是只是将它们居中。对于不同类型的对齐，有不同的方程环境，例如将`gather`每个方程集中在自己的线上的环境。

旁注：我建议查看[Not So Short Introduction to LaTeX2e](http://tobi.oetiker.ch/lshort/lshort.pdf)，这是我开始学习 LaTeX 的方式，以及[amsmath 包的用户指南](http://www.math.temple.edu/computing/amsldoc.pdf)，它描述了可用的不同类型的对齐方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-12-08T13:48:32.210

您可以在 minipage env 中使用 eqnarray 或对齐的环境来执行此操作。

Eqnarray（或对齐）允许您使您的公式看起来如您所愿，而 minipage 允许您通过文本包装方程式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T13:02:33.337

这是一个不同的解决方案，可让您编写数学和解释，而无需在源代码中交错。

```
\newcommand\aligntext[1]{&\text{#1}\\}
\[\开始{对齐}
a+b&=c\\
x&=y\\
c&=d+e
\end{对齐}
\hspace{1em}
\开始{对齐}
\对齐文本{文本 1}
\\
\aligntext{文字文字文字}
\end{对齐}\]

```

有几种不同的方法可以解决这类问题。（例如，上面的代码不允许对每个等式行进行编号。）除了 amsmath，还可以看看[mathtools 包](http://www.ctan.org/pkg/mathtools)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T03:59:17.637

我不会尝试直接解决您的问题，因为上面似乎已经解决了。但是，我建议您尝试 LyX 以使自己轻松进入 TeX 世界。它提供了一个带有即时预览的图形界面，考虑到您使用 word 等的背景，它可能会更直观。它建立在 LaTeX 基础之上，因此您在适用的情况下使用 LaTeX 命令，但它仍然（在我看来）是对 TeX 的更容易介绍。

[莱克斯](http://www.lyx.org/)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-04-06T04:09:33.710

我建议从 align 中抽象出来并使用它：

```
\begin{tabular}{rcll}
$a$ & $=$ & $12m$ & measure of length of great importance \\
$b$ & $=$ & $6m$  & a measure of length \\
\end{tabular} 
```

# asp.net - 使用 JQuery 调用一个 asp:linkbutton 点击 函数

> ID：720204
> 
> 赞同：0
> 
> 时间：2009-04-06T03:48:22.920
> 
> 标签：asp.net, javascript, jquery

我一直在玩搜索控件，我注意到当您尝试从文本框中按 Enter 键时，它会提交表单但没有单击搜索按钮（就像我想要的那样）。

我的标记是：

```
<div>
    <span>Search</span>
    <asp:TextBox ID="txtSearch" runat="server" Width="170"
        onkeydown="if ((event.which && event.which == 13) || (event.keyCode && event.keyCode == 13)) {$('#<%=lkbSearch.ClientID %>').click();return false;} else return true; ">
    </asp:TextBox>
</div>
<asp:LinkButton ID="lkbSearch" runat="server" CssClass="searchButton">
    <asp:Image ID="imgSearch" runat="server" ImageUrl="~/Images/Master/button_go.gif" />
</asp:LinkButton> 
```

我将 onkeydown 事件添加到文本框，它运行，但是当我尝试使用 JQuery 从按钮调用 Click() 函数时，它什么也不做。

我怎样才能做到这一点，当在文本框中按下输入时它“点击”按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-05T13:27:45.127

由于 a`LinkButton`作为`<a>`. 当您使用 jQuery 选择按钮时，您会得到包裹在 jQuery 中的元素。因为调用 click 事件只会触发 click 事件，而不遵循`href`.

以下代码将模拟单击按钮：

```
$('#<%= linkbuttonid.ClientID%>')[0].click(); 
```

您可以替换`'#<%= linkbuttonid.ClientID%>'`为任何能获得正确元素的选择器。但是有必要包含`[0]`以便在其自身上调用单击`<a>`。

或者，您可以将页面重新路由到 href：

```
window.location = $('yourselector').attr('href'); 
```

有关在 javascript 中为锚标记调用点击事件的更多信息，请参阅[此问题。](https://stackoverflow.com/q/980709/1316573)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T03:55:30.250

这不涉及 jQuery

```
Page.RegisterHiddenField( "__EVENTTARGET", lkbSearch.ClientID ); 
```

我看到你在一个 div 中，如果你有一个面板，那么就有 DefaultButton 属性。

如果你真的想使用 jQuery 失败，你可以使用 ClientScript.GetPostBackEventReference

祝你好运 ：-）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T04:25:14.907

在玩了一些不同的东西之后，我终于想出了解决方案。

我将文本框和按钮包装在 asp:panel 控件中，并将默认按钮设置为我的 LinkBut​​ton 的 ID，结果发现面板不能将 LinkBut​​tons 作为 DefaultButton。

但是将链接按钮更改为 ImageButton 并在面板的 DefaultButton 字段中使用其 ID 效果很好。

```
<asp:Panel ID="pnlSearch" runat="server" DefaultButton="imbSearch">
...
</asp:Panel> 
```

# java - 如何找出当前具有焦点的对象

> ID：720208
> 
> 赞同：32
> 
> 时间：2009-04-06T03:51:09.497
> 
> 标签：java, swing, focus

我`TextField`的`Frame`. 我想知道`TextField`当前有哪些重点。我怎样才能找到这些信息？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-02T04:41:14.107

```
KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusOwner() 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2009-04-06T03:56:49.593

`JFrame.getFocusOwner()`（继承自[`Window.getFocusOwner()`](http://java.sun.com/javase/6/docs/api/java/awt/Window.html#getFocusOwner())）应该返回对具有焦点的组件的引用。`getMostRecentFocusOwner()`可能也很有趣。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-06T03:57:07.517

**getFocusOwner()**将返回当前焦点所在的子组件。

但是您必须检查它是否是 JTextField。如果其他组件（例如按钮）也存在于您的框架中，它们可能会被聚焦。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-06T12:11:52.740

也看看[javax.swing.FocusManager](http://java.sun.com/javase/6/docs/api/javax/swing/FocusManager.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-09-26T08:40:23.730

您还可以在键盘焦点管理器中监听适当的属性更改：

```
KeyboardFocusManager.getCurrentKeyboardFocusManager().addPropertyChangeListener("focusOwner", new PropertyChangeListener() {
    @Override
    public void propertyChange(PropertyChangeEvent evt) {
        System.out.println(evt.getNewValue());
    }
}); 
```

这会在您与 Swing 组件交互时输出焦点所有者，并且通常对于调试焦点问题很有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-06T03:56:29.110

每个 JComponent 都有一个 hasFocus 方法，您可以使用该方法检查它是否具有焦点。但是，这已被更改，现在您应该使用 isFocusOwner。

因此，遍历框架中的所有文本字段，并通过调用该方法检查每个文本字段是否为 isFocusOwner。

您还可以让焦点所有者通过框架。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-25T07:19:58.000

`KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusOwner()`;
不会跨线程工作。因此，如果您的应用程序调用一个新线程并且该线程具有自己的框架/窗口等，那么它将无法从该线程获得焦点所有者。而是使用：`KeyboardFocusManager.getCurrentKeyboardFocusManager().getGlobalFocusOwner();`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-06T03:55:59.203

[本](http://java.sun.com/docs/books/tutorial/uiswing/misc/focus.html)教程应该对理解焦点很有帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-28T14:13:01.407

您可以像这样获得当前关注的组件：

```
Component focusOwner = FocusManager.getCurrentManager().getFocusOwner(); 
```

之后你可以检查是否`focusOwner`是实例`TextField`

# c# - 在 ASP.net 中的服务器端调用存储过程

> ID：720221
> 
> 赞同：0
> 
> 时间：2009-04-06T03:57:28.140
> 
> 标签：c#

我想在 ASp.net 中调用 Oracle 存储过程 say,"insert_into_pop" .... 如何将参数传递给它，我应该如何在代码隐藏中调用它...？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T04:07:53.590

你可以做这样的事情。

```
using (OracleConnection connection = GetConnection)
{
  OracleCommand command = new OracleCommand("insert_into_pop");
  command.Connection = connection;
  command.CommandType = CommandType.StoredProcedure;
  command.Parameters.AddWithValue("@Param", value);  // 0 or more parameters passed in here
  command.ExecuteNonQuery();
} 
```

但是无论如何你都不应该把它放在代码后面，你应该有某种封装逻辑的服务或业务层。

# google-maps - 使用 Google 地图提供简单的地址/行车路线

> ID：720224
> 
> 赞同：2
> 
> 时间：2009-04-06T03:58:43.970
> 
> 标签：google-maps, driving-directions

我一直在翻阅 Google Maps API 信息，而在我的一生中，我似乎找不到一个例子，或者找出做我想做的事情的正确方法。

从一个简单的 HTML 布局中，我需要显示一个谷歌地图，其中一个地址被列为标记，用户可以点击“获取路线”或类似的东西来获取行车路线。

我有完整的地址，但没有纬度或经度信息。有没有人有一个很好的指针，或者一个他们可以分享的简单例子？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T12:47:43.870

您不需要为此使用 API。您可以将查询直接发送到 iframe 中的 Google 地图对象。

例如，展示白宫：

```
 <iframe src="http://maps.google.com/maps?geocode=&q=1600%20Pennsylvania%20Avenue%20NW,%20washington,%20DC" width="100%" height="300" >
  <p>Your browser does not support iframes.</p>
 </iframe> 
```

生成的地图有一个地址标记，允许用户获取方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T04:49:51.260

您可以使用“地理编码器服务”获取任何地址的纬度和经度，有很多免费服务可供使用。[geocoder.us](http://geocoder.us)是一项免费服务，您可以通过它对美国的任何地址进行“地理编码”。此外，请查看网站[http://googlemapsbook.com/geocoders/](http://googlemapsbook.com/geocoders/)以了解更多此类地理编码器。但是，我认为没有一种简单的方法可以获取行车路线，据我所知，Google Maps API 没有公开此类功能。

# javascript - 使用 javascript 和 html 的 div 幻灯片

> ID：720234
> 
> 赞同：0
> 
> 时间：2009-04-06T04:02:24.273
> 
> 标签：javascript, html

如何将 div 从右向左移动？与循环旋转相同。

我在这两个按钮中有一个 HTML 页面，称为前进和后退。

当用户单击前进按钮时，它会`div`显示移至下一个`div1`。与后退按钮一样应该移动到上一个按钮。

谢谢并恭祝安康

拉维库马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T04:06:07.900

我建议你看看[jQuery UI Slide](http://docs.jquery.com/UI/Effects/Slide)

# java - 多线程和 Java Swing 问题

> ID：720244
> 
> 赞同：3
> 
> 时间：2009-04-06T04:08:17.990
> 
> 标签：java, multithreading, swing

嗨，我有一个运行良好的 GUI 应用程序。我创建了一个套接字服务器。当我在程序中创建服务器类的新对象时，GUI 应用程序停止响应。

这是我的服务器类。如果我做

```
Server s = new Server(); 
```

在我的主应用程序中它停止工作。我应该如何添加它？做一个新线程？我试过了

```
Thread t = new Thread(new Server());
t.start(); 
```

但问题仍然存在。请，我会感谢你的帮助。

```
package proj4;

import java.net.*; 
import java.io.*; 

public class Server implements Runnable { 
    ServerSocket       serverSocket = null;
    Socket             clientSocket = null;
    ObjectOutputStream out          = null;
    ObjectInputStream  in           = null;
    int                port;
    static int         defaultPort  = 30000;
    boolean            isConnected  = false;
    Thread             thread;
    DataPacket         packet       = null;

    public Server(int _port) {
        try {
            serverSocket = new ServerSocket(_port);
            serverSocket.setSoTimeout(1000*120);  //2 minutes time out     
            isConnected = true;
            System.out.println("server started successfully");
            thread = new Thread(this);
            thread.setDaemon(true);
            //thread.run();
        } catch (IOException e) {
            System.err.print("Could not listen on port: " + port);
            System.exit(1);
        }
        try {
            System.out.println("Waiting for Client");
            clientSocket = serverSocket.accept();
            System.out.println("Client Connected");
            thread.run();
        } catch (IOException e) {
            System.err.println("Accept failed.");
            System.exit(1);
        }
        try {
            out = new ObjectOutputStream(clientSocket.getOutputStream());
            System.out.println("output stream created successfully");
        } catch (IOException e) {
            e.printStackTrace();
        }
        try {
            in = new ObjectInputStream(clientSocket.getInputStream());
            System.out.println("input stream created successfully");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public Server() {
        this(defaultPort); //server listens to port 30000 as default
    }

    public void run() {
        System.out.println("Thread running, listening for clients");//debugging purposes
        while (isConnected) {
            try {
                packet = this.getData();
                Thread.sleep(0);
            } catch(InterruptedException e) {
                e.printStackTrace();
            }
        }
    } 

    public DataPacket getData() {
        try {
            packet = (DataPacket)in.readObject();
        } catch (Exception ex)  {
            System.out.println(ex.getMessage());
        }
        return packet;
    }

    public void sendData(DataPacket dp) {
        try {
            out.writeObject(dp);
        } catch (IOException e) {
            e.printStackTrace();
        } 
        try {
            out.flush();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public void closeConnection() throws IOException {
        out.close(); 
        in.close(); 
        clientSocket.close(); 
        serverSocket.close(); 
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-06T04:25:35.717

您的`Server`构造函数可能无限期地阻塞在`accept()`.

关于 Swing 程序的两件事：

1.  永远不要在 Swing 事件线程中执行任何长时间的任务，并且，
2.  永远不要在 Swing 事件线程之外操作任何 Swing 对象，除非正在使用的方法被明确记录为线程安全的。

这意味着如果服务器是从 Swing 事件线程启动的——也就是说，如果它是响应按钮单击等而启动的——那么是的，您必须为您的 Server 对象生成另一个线程。否则，您保证 Swing 事件线程将被阻塞，直到您的线程退出。

您说即使您为服务器生成另一个线程，您的应用程序仍然停止响应？确保您正在调用`Thread.start()`而不是调用`run()`，否则您仍然会在您自己的线程中实际运行“新线程”而意外地阻止自己。

笔记：

1.  我看到你`Thread.sleep(0);`在你的 run() 循环中做了一个。这不能保证做任何事情。如果你有一个单 CPU 机器，这可以公平地实现为无操作，允许相同的线程继续运行。
2.  你真的很想`isConnected`成为`volatile`——否则不能保证对这个变量的更改会被任何线程看到，而不是被更改的线程。
3.  您不会`isConnected`在任何地方设置为 false，因此您`run()`将一直运行到 JVM 停止或该线程发生 RuntimeException。
4.  [不鼓励](http://www.ibm.com/developerworks/java/library/j-jtp0618.html)在构造函数中启动线程。（请参阅[Java 并发实践](https://rads.stackoverflow.com/amzn/click/com/0321349601)。）
5.  在您使用 Thread 方法之前，您不想`accept`使用您的方法！否则，您的构造函数将阻塞等待连接并且不会将控制权返回给事件线程！`ServerSocket``run()`
6.  您的构造函数中有以下代码：

你的代码是：

```
thread = new Thread(this);
thread.setDaemon(true);
//thread.run(); 
```

当你`thread.run()`没有评论时，你**没有**开始一个新的线程！为此，您需要执行`thread.start()`. 相反，您在调用构造函数的同一个线程中运行这个新线程（由于上面的原因 #3，它永远不会停止）。您现在编写代码的方式是记录所有 IOExceptions，否则会被吞没。您可能希望设置`isConnected`为`false`on any`IOException`以及 in `closeConnection()`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T05:29:43.707

问题是您的 Server 构造函数正在阻塞。cosntructor 不应该进行任何阻塞调用（事实上它应该尽可能少地做）。阻塞调用应该由 run() 或由 run() 调用的东西进行。

另请注意，您创建的 new Thread() 是似乎没有任何用途的构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T04:36:10.323

您的服务器类看起来很合理（我还没有真正编译它，但它看起来很合理。）如果您的 GUI 变得没有响应，这几乎意味着 GUI 线程没有得到控制。要了解原因，我们真的需要看看创建它的代码——它在哪里以及它是如何工作的。

您的基本想法是正确的，尽管您可以将其缩短为

```
(new Thread(new Server()).start(); 
```

不过，这当然不是问题。

这里有一个想法：在你创建和启动服务器的时候，直接在调用之后，添加一个打印或日志语句，即，

```
(new Thread(new Server()).start();
System.err.println("Got here!"); 
```

看看你是否看到“到了！” 信息。如果没有，那么您正在阻止 GUI 线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T05:23:31.257

您可以使用 Java 6 中提供的 SwingWorker。如果您需要在以前的 Java 版本中使用它，您可以随时使用：

[https://swingworker.dev.java.net/](https://swingworker.dev.java.net/)

SwingWorker 可能是更清洁的方法。您可以在此处找到有关它的更多信息：

[http://java.sun.com/products/jfc/tsc/articles/threads/threads2.html](http://java.sun.com/products/jfc/tsc/articles/threads/threads2.html)

然后，您可以编写一个新的 ServerSwingWorker 内部类来包装该功能或使用匿名内部类。

# objective-c - 将 NSObject 转换为 NSString

> ID：720249
> 
> 赞同：8
> 
> 时间：2009-04-06T04:11:17.687
> 
> 标签：objective-c

我正在[学习斯坦福 iPhone 课程](http://www.stanford.edu/class/cs193p/cgi-bin/index.php)，但我不知道为什么会收到编译器警告。我假设我需要将我的对象转换为 NSString，但是当我尝试这样做时出现错误。代码运行并给了我预期的输出，但警告让我很困扰。

```
NSLog(@"lowerCaseString is: %@", [object lowercaseString]); 
```

这会出现警告：“NSObject”可能无法响应“-lowerCaseString”

```
NSLog(@"lowerCaseString is: %@", [(NSString)object lowercaseString]); 
```

这会引发错误：转换为请求的非标量类型

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-06T04:14:49.283

我相信这会满足您的需求：

```
NSLog(@"lowerCaseString is: %@", [(NSString *)object lowercaseString]); 
```

注意我刚刚在你的第二行代码中添加了一个 * 来创建一个指向 NSString 的指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T04:28:54.850

如果对象应该是 NSString，为什么要声明为 NSObject？如果您打算在其上调用 NSString 方法，请将其声明为 NSString 或将其保留为 id。然后你不会得到错误。

# c# - 在 LINQ where 子句中使用相关表中的值

> ID：720250
> 
> 赞同：1
> 
> 时间：2009-04-06T04:11:32.303
> 
> 标签：c#, linq, linq-to-sql

我期待以下 LINQ 查询检索具有指定电话号码的所有联系人，但它返回所有根本没有电话号码的联系人。

```
var query = from contact in dc.Contacts
            where contact.Phones.All(phone => phone.PhoneNumber == "5558675309")
            select contact; 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T04:15:45.083

我应该一直使用 Any 扩展方法，而不是 All。

以下代码可以正常工作：

```
var query = from contact in dc.Contacts            
            where contact.Phones.Any(p => p.PhoneNumber == "5558675309")            
            select contact; 
```

# javascript - 如何调用 JQuery 函数？

> ID：720254
> 
> 赞同：1
> 
> 时间：2009-04-06T04:12:26.980
> 
> 标签：javascript, jquery

好的，这就像两个问题合二为一！

1.  为什么这个 JQuery 函数调用失败？或者我应该如何调用 JQuery 函数？Firebug 告诉我这`$('#login').slideup`不是一个函数。

    setTimeout("$('#login').slideup('slow');",2000);

2.  如何在外部声明一个 JQuery 函数（不将它绑定到任何东西，而不是之后`document().ready()`在我的 javascript 函数中调用它？

例如：

```
function afterLogin(){
  $('#login').slideup('slow');
} 
```

然后将其称为：

```
setTimeout('afterLogin();',2000) 
```

帮助

加思

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T04:17:03.630

第一部分你可以做

```
setTimeout(function(){$('#login').slideUp('slow');},2000); 
```

第二部分可以完全相同：

```
function afterLogin(){ $('#login').slideUp('slow'); } 
```

然后将其称为：

```
setTimeout(afterLogin,2000); 
```

编辑：固定外壳从上滑到上滑

# asp.net-mvc - 关于熟悉 .NET MVC 的建议

> ID：720255
> 
> 赞同：1
> 
> 时间：2009-04-06T04:12:42.317
> 
> 标签：asp.net-mvc

我已经阅读了很多关于 .NET 进入 MVC 框架的信息。我也尝试过示例应用程序。但是，我从事 Java 程序员已经有一段时间了。因此，如果没有任何 c# 知识，就很难理解 MVC 应用程序。

你们会建议什么是使用 c# 启动和运行的最佳资源，然后潜入酷炫的 MVC 世界。

很长一段时间以来，我都不喜欢 ASP.net，因为它笨重的 hoch poch 结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T04:40:46.053

Head first C# 是一本非常好的书，你可以通过它来很好地掌握 C#，并且一旦你掌握了 C# 的基础知识（这不会花你很长时间，因为你来自 Java 背景），浏览[Stephen Walther 的博客](http://weblogs.asp.net/StephenWalther/)，他的博客是学习 ASP.NET MVC 的最佳资源。另一个学习 ASP.NET MVC 的好资源是站点[http://www.asp.net/mvc](http://www.asp.net/mvc)，这个站点收集了 MVC 上大部分资源的聚合，最后别忘了观看[dimecasts](http://dimecasts.net) (screencasts)对于 ASP.NET MVC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T04:17:33.567

Rob Conery 的[MVC 店面截屏系列](http://blog.wekeroad.com/mvc-storefront/?p=6)非常出色。他将带您了解构建功能性 MVC 应用程序的整个过程，重点是 TDD 和敏捷设计。

另请查看[Nerd Dinner](http://nerddinner.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=24504) - 提供完整的源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T13:31:08.900

我发现视频会议、教程和文章效果很好。直到你开始在现实世界中编码。

我的建议是从创建一个博客引擎开始，它很简单，你会遇到那些在阅读书籍、视频等时看不到的边缘案例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T14:06:33.777

从 C# 开始，我向您推荐[Charles Petzold 的 .Net 书籍 Zero](http://www.charlespetzold.com/dotnet/index.html)（免费）

# hci - 帮助我获取有关 Web 可用性研究的更多信息

> ID：720259
> 
> 赞同：2
> 
> 时间：2009-04-06T04:15:35.100
> 
> 标签：hci

我对人机交互非常感兴趣，主要是网络交互。您能否告诉我一些研究、网站、论文、链接或研究小组正在调查类似于此[http://www.ccs.neu.edu/home/tarase/TaraseMetrics.pdf](http://www.ccs.neu.edu/home/tarase/TaraseMetrics.pdf)的网页设计指标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-18T18:42:30.963

[Jakob Nielsen](http://www.useit.com/)是一位令人难以置信的可用性专家，在可用性方面拥有许多优秀的出版物。他写了很多很棒的书，比如[Designing Web Usability](http://www.useit.com/jakob/webusability/)。

我真正推荐的另一个人是[史蒂夫克鲁格](http://www.sensible.com/)。他写了[Don't Make Me Think](https://rads.stackoverflow.com/amzn/click/com/0789723107)和许多其他关于可用性的非常棒的书籍。

另一个需要考虑的方面是用户体验设计与设计模式和方法论一样，都是关于观察然后做出反应的。在这种情况下，我不得不推荐[观察用户体验](https://rads.stackoverflow.com/amzn/click/com/1558609237)

您还可以考虑加入像[可用性专业协会](http://www.upassoc.org/)这样的团体，该协会致力于推广可用性领域的最佳实践。

毕竟，我怎么能忘记[Boxes and Arrows](http://boxesandarrows.com/)呢？

当然，用户体验设计领域相当庞大和广阔。将这些视为漫长而有益的旅程的起点:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T20:28:13.120

我开始阅读一本可能与您正在寻找的书相近的书。

[衡量用户体验](https://rads.stackoverflow.com/amzn/click/com/0123735580)- Tom Tullis 和 Bill Albert

我希望——当我购买这本书时——它会提供一种简单的方法来评估网站的可用性。但是，在启动它之后，很明显它是针对进行用户测试的团队 - 帮助您衡量测试结果。

如果您更关注“不要让我思考”类型的书（那本很棒），您也可以尝试罗伯特·霍克曼（Robert Hoekman）[的“设计显而易见](https://rads.stackoverflow.com/amzn/click/com/032145345X)”。

Jakob Nielsen 小组发表的[研究论文](http://www.nngroup.com/reports/)也很有价值。这些研究可能非常昂贵，但如果你比较实际进行研究的成本，它们相对便宜。

另一个非常全面的资源是在[usability.gov](http://www.usability.gov/pdfs/guidelines.html)上。该站点上有一个 pdf 文件，其中包含大量基于研究的可用性指南。

# asp.net - VS2008，添加新项目，缺少“Web 内容表单”选项

> ID：720261
> 
> 赞同：2
> 
> 时间：2009-04-06T04:15:48.110
> 
> 标签：asp.net, vb.net, visual-studio, visual-studio-2008, ide

今天我意识到当我向我的 ASP.NET Web 应用程序添加新项目时，我不再有“Web 内容表单”选项（您可以在其中选择 MasterPage）。我知道如何手动将 MasterPage 添加到 Web 表单，这真是太痛苦了——我真的不明白为什么 Web 内容表单突然丢失了。

Visual Studio 团队系统 2008、SP1、VB.NET、ASP.NET 3.5

我最近安装和卸载了 VisualSVN。我最好的猜测是不知何故搞砸了我可怜的VS。

如何取回 Web 内容表单？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-09-16T22:58:15.287

关闭所有 Visual Studio 实例 打开 VS 命令提示符并键入

devenv /installvstemplates

这应该重新安装你所有的 VS 模板

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-09-29T12:27:41.763

*我错过了“添加新项目”*选项中的大部分模板。

使用 Jon 的回答，我可以通过将*Tools -> Options -> Projects and Solutions -> General -> User item templates location*更改为此路径来解决此问题：

```
C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\ItemTemplates\CSharp\Web\1033
(without (x86) if you have a x86 OS) 
```

代替

```
C:\Users\%USER%\Documents\Visual Studio 2008\Templates\ItemTemplates 
```

我想您也可以将文件复制到该位置而不是更改路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T04:21:41.623

尝试重置所有设置。

工具 -> 导入/导出设置

这将打开设置导入向导。选择重置所有设置并选择您喜欢的配置文件（您的帖子说 vb.net 所以可能是 VB 配置文件）。看看是否能解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T22:10:21.223

做了一些挖掘，我认为模板就在这里：

C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\ItemTemplates\

内容页面的模板是这样的：

C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\ItemTemplates\CSharp\Web\1033\ContentPage.zip

我不确定如果您在不重新安装 VS 的情况下丢失该文件，您将如何获得该文件的新副本

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-04T10:33:30.420

按照链接[https://superuser.com/questions/1441880/visual-studio-2019-web-site-template](https://superuser.com/questions/1441880/visual-studio-2019-web-site-template)并从 VS 安装程序修改中选择“其他项目模板（以前的版本）”-> ASP.NET 和 Web 开发

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-11T19:21:41.340

对我来说，对话框底部有一个名为“选择母版页”的复选框。所以我检查了那个选项，选择了“Web 表单”，然后我得到了“选择母版页”对话框。:) 这是 VB.NET。我通常用 C# 编写代码。这也是一个网站。我通常创建网络项目。

# gzip - 在 Python 3 中解压缩 gzip 的服务器响应的最佳方法是什么？

> ID：720273
> 
> 赞同：8
> 
> 时间：2009-04-06T04:24:05.517
> 
> 标签：gzip, python-3.x, urllib

我原以为这会起作用：

```
>>> import urllib.request as r
>>> import zlib
>>> r.urlopen( r.Request("http://google.com/search?q=foo", headers={"User-Agent": "Mozilla/5.0 (X11; U; Linux i686) Gecko/20071127 Firefox/2.0.0.11", "Accept-Encoding": "gzip"}) ).read()
b'af0\r\n\x1f\x8b\x08...(long binary string)'
>>> zlib.decompress(_)
Traceback (most recent call last):
  File "<pyshell#87>", line 1, in <module>
    zlib.decompress(x)
zlib.error: Error -3 while decompressing data: incorrect header check 
```

但事实并非如此。Dive Into Python在此示例中[使用 StringIO](http://diveintopython.net/http_web_services/gzip_compression.html)，但这似乎在 Python 3 中缺失。正确的做法是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-12-20T11:38:06.760

它适用于`gzip`（gzip 和 zlib 是相同的压缩，但具有不同的标头/“包装”。您的错误在消息中包含此信息）。

```
import gzip
import urllib.request

request = urllib.request.Request(
    "http://google.com/search?q=foo",
    headers={
        "Accept-Encoding": "gzip",
        "User-Agent": "Mozilla/5.0 (X11; U; Linux i686) Gecko/20071127 Firefox/2.0.0.11", 
    })
response = urllib.request.urlopen(request)
gzipFile = gzip.GzipFile(fileobj=response)
gzipFile.read() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-30T19:41:52.307

对于使用 Python 3.2 或更高版本的任何人，有一种比这里的任何答案更简单的解压缩响应的方法：

```
import gzip
import urllib.request

request = urllib.request.Request(
    "http://example.com/",
    headers={"Accept-Encoding": "gzip"})
response = urllib.request.urlopen(request)
result = gzip.decompress(response.read()) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-06T04:50:16.500

在 Python 3 中，[`StringIO`](http://docs.python.org/3.0/library/io.html?highlight=stringio#io.StringIO)是`io`模块中的一个类。

因此，对于您链接到的示例，如果您更改：

```
import StringIO
compressedstream = StringIO.StringIO(compresseddata) 
```

到：

```
import io
compressedstream = io.StringIO(compresseddata) 
```

它应该可以工作。

# user-interface - 监视变量（调试）窗口的设计

> ID：720289
> 
> 赞同：0
> 
> 时间：2009-04-06T04:38:46.933
> 
> 标签：user-interface, debugging, watch

我已经实现了一种脚本语言，它支持.NET 对象的创建和使用。

为了便于使用，我想实现一个用户界面来查找内存中的变量。

我在 Visual Studio 和 Eclipse 中检查了调试/监视变量窗口，它们似乎都使用相同的模式 - 变量<->属性关系的树视图表示，这很好，但需要大量“扩展节点”点击查找特定属性或字段的值。

如果所有属性和字段都自动展开，则可以轻松解决点击次数过多的问题——但这可能会导致另一个问题——过多的屏幕空间仅用于显示一个变量。

除了我已经见过的（Visual Studio、Eclipse）之外，您能否推荐任何好的（或不寻常的）调试/视图/变量监视 UI 实现。

这个想法是能够在视觉上掌握对象的状态，只需一眼（或尽可能靠近它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-08T11:13:43.737

这可能与您在 Visual Studio/Eclipse 中的类似，但最新版本的[WebKit](http://webkit.org/)（和[Safari 4](http://www.apple.com/safari/)）有一种在 Web Inspector 的控制台窗格中查看 JavaScript 对象的好方法：

[![WebKit 的 Web Inspector 控制台中的演示对象](https://i.stack.imgur.com/zeOXI.png)](https://i.stack.imgur.com/zeOXI.png)
[（来源：[quintusquill.com](http://cloud.quintusquill.com/dropbox/WebKit-Object-View.png)）]

[此外， Dashcode](http://www.apple.com/macosx/developertools/dashcode.html)调试器中的“Stackframes & Variables”面板非常易于使用：

[![替代文字](https://i.stack.imgur.com/sK5jY.png)](https://i.stack.imgur.com/sK5jY.png)
[（来源：[quintusquill.com](http://cloud.quintusquill.com/dropbox/Dashcode-Debugger.png)）]

最后，您是否考虑过包括一个搜索框？如果用户需要找到隐藏在对象深处的特定属性（并且他们知道它的名称），这将非常有用。

史蒂夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-08T11:18:04.663

我完全同意——树视图一定是世界上使用最错误的 GUI 控件。不幸的是，我不知道有任何调试器做得更好:-(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T04:54:58.687

您可以使这项工作类似于在调试模式下将鼠标悬停在 Visual Studio 编辑器中的实时变量上时发生的情况：您将获得一个工具提示，显示该对象的所有属性的名称和值，以及将鼠标悬停在该列表还可以为这些对象的详细信息提供额外的弹出窗口。通过这种方式，您只需移动鼠标即可向下钻取并获得所需的内容。能够将这些视图中的任何一个锁定到您的监视窗口中也将是一个好处。希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T05:25:55.417

一种预览可以提供帮助，当一个对象被展开时，用户可以检查哪些属性是有趣的

```
- a
  [ ] prop1 : value1
  [*] prop2 : value2
  [ ] prop3 : value3 
```

用户将看到

```
+ a : { prop2 : value2 } 
```

您可以让用户在类的基础上自定义哪些属性是有趣的。

# php - 如何使用 php 和 ajax 创建“我的状态”？

> ID：720295
> 
> 赞同：0
> 
> 时间：2009-04-06T04:48:25.693
> 
> 标签：php, ajax

如标题所述，如何创建状态栏（如 facebook 或 twitter）。用户可以输入他现在在做什么？我相信它使用 AJAX，但是如何存储到数据库？（我是 AJAX 新手）

例如：用户输入“我正在吃饭”，然后点击“更新”按钮，然后它会自动更新到状态栏，显示你输入的文字和你输入的时间。当你翻车时，它将显示“编辑”、“清除”等菜单。

是否有任何教程或示例代码可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T05:10:45.747

[这](http://nettuts.com/tutorials/php/twitter-emulation-using-mootools-12-and-php/)是一篇使用 mootools 的文章。

> 如何模拟 Twitter 的功能。使用 PHP、MySQL 和 MooTools javascript，您可以立即实现类似 Twitter 的状态系统。

# jquery - 没有得到变量值？

> ID：720304
> 
> 赞同：0
> 
> 时间：2009-04-06T04:53:28.067
> 
> 标签：jquery

我没有在加载函数中获得“img_srt”变量的值，任何人都可以帮助我吗？

```
$(document).ready(function() {
    Get_var();
})

var img_srt='<div>address</div>';   

function Get_var() {
    $("<img />").attr("src","http://www.google.com/intl/en_ALL/images/logo.gif")
        .load(function() {
            if (this.height > 0) {
                img_srt += "<div><img src='http://www.google.com/intl/en_ALL/images/logo.gif'/></div>";         
            }
        })
    alert(img_srt);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T04:56:24.817

设置的函数`img_srt`被异步调用。也就是说，它可能在您的`alert`语句之前或之后执行。可能之后，因为你有这个问题。

尝试这样的事情：

```
$('<img/>')
    .attr('src', 'http://www.google.com/intl/en_ALL/images/logo.gif')
    .load(function() {
        var imageLoaded = this.height > 0;

        if(imageLoaded) {
            $(this).appendTo('#myDiv');
        } else {
            $('<p/>').text('Unable to load image').appendTo('#myDiv');
        }
    }); 
```

# sql-server-2005 - 如何将sql表关系复制到远程数据库

> ID：720309
> 
> 赞同：0
> 
> 时间：2009-04-06T04:55:39.200
> 
> 标签：sql-server-2005, deployment, relation

我正在使用 sql management studio 2005。当我使用导入工具将所有表复制到远程数据库时，关系不会复制。
如何复制具有关系的表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T05:41:38.717

当您右键单击数据库并点击“任务”菜单时，您可以使用“生成脚本”。您可以在以下对话框中选择以包含表之间的关系。唯一的问题是您的数据不会超过，只是结构。

如果你想要整个 shebang，备份和恢复通常是最简单的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T05:34:27.720

复制数据库，或备份和恢复，或任务-> 生成脚本。

# c - 从函数返回时保护 char[] 的最佳方法？

> ID：720311
> 
> 赞同：2
> 
> 时间：2009-04-06T04:58:37.523
> 
> 标签：c, arrays

我正在维护一段 C 代码，其中经常填充 char 数组，方法是将它们传递给函数并将结果用作写入输出的字符串。但是，在函数处理完数组后，没有对数组进行检查，我想知道最好的方法是什么？

一种方法是在返回后将数组中的最后一个元素设置为 \0，但我怀疑可能有更好的元素。

```
void Unpack(char* inbuf, char* outbuf);

int main(int argc, char* argv[])
{
    char* inData = "abc";
    char outData[4];
    char result[14];

    Unpack(inData, outData);
    outData[3] = '\0';  // Insert this to safeguard array before using as string.

    _snprintf(result, sizeof(result), "blah %0s blah", outData);
    printf(result);

    return 0;
}

void Unpack(char* inbuf, char* outbuf) {
    for(int index=0; index<3; index++) {
        *outbuf++ = *inbuf++;
    } 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T05:24:36.510

您对这个问题的解决方案实现了几件事，但不幸的是，它没有解决许多其他问题。

如果您担心输出数组中甚至可能没有有效的 '\0' 终止的 C 字符串，那么您已经通过蛮力插入一个 '\0' 来解决该问题。此外，您已经选择了最佳位置，如果数组应该包含 '\0' 终止的字符串，则数组的最后一个字节不能用于其他任何内容。

不幸的是，你没有做任何事情来阻止被调用的函数践踏你为它分配的数组之外的内存。这是我最担心的第一件事。

避免内存践踏（又名缓冲区溢出）不是火箭科学，但它确实需要纪律和一致性。通常所涉及的基本思想是永远不要简单地传递要填充的某些内存的地址，而是始终伴随该地址以及可用内存块的长度。当然，被调用的代码必须尊重对其施加的限制。自从您提到 snprintf() 以来，您似乎了解了基本思想，这是这种方法的经典示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T05:01:58.657

保护他们免受什么伤害？如果你试图防止像缓冲区溢出这样的事情，你就来不及了。您调用的函数可以完全访问使用和滥用，如果选择是“滥用”，那么事后您无能为力。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-06T05:07:45.083

如果您拥有这两个代码，更好的方法是更改​​ Unpack 签名以传递输出缓冲区大小，因此它可以负责附加一个 '\0' 字符。

如果您无法控制 Unpack 我会写一个薄层来完成这项工作。

```
unpack_safe(char *in, char* out, size_t len) {
  unpack(in, out);
  out[len-1]='\0';
} 
```

有了这个，你只能保护一个非空终止的字符串，但如果你的字符串可以包含空字符，这将无法按预期工作，并且传递输入大小和输出大小将是正确的行为。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-06T09:46:54.850

将最后一个元素设置为 '\0' 将正确终止字符串，但它不会修复函数在缓冲区外写入​​时造成的损坏。在这种情况下，您只会隐藏一个错误，并且程序可能会在稍后在完全不相关的函数调用或返回时产生错误的结果或崩溃。

在我看来，最好检测函数是否写在它的缓冲区之外，如果写了就让程序崩溃。这使得查找和修复错误更容易。为了实现这一点，您可以在调用函数之前将缓冲区的最后一个字节设置为 '\0' 并测试（使用 assert()），如果函数返回时仍然是这种情况。

而且，正如 Bill Forster 已经说过的，将缓冲区长度也传递给被调用的函数总是一个好主意

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T05:40:10.357

使用原始指针总是有可能发生缓冲区溢出。使用包装类（如 std::string、CString 等）总是安全的。

这适用于您编写的新代码。对于这样的现有代码，你只能祈祷它不会崩溃。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-06T09:09:15.817

如果您担心 0x55AA 之类的 END-MARKER 或某些保留字符。但是，如果您担心的是数据的完整性，您可以尝试一些带有校验和或 CRC（循环冗余校验）的标头。

# php - 处理外部 CSS 样式表并注入内联 CSS 元素的最佳方法是什么？

> ID：720313
> 
> 赞同：0
> 
> 时间：2009-04-06T04:59:39.097
> 
> 标签：php, css

我将编写一个 PHP 邮件列表系统。理想情况下，我希望模板样式易于管理。在我当前的系统中，我将所有样式都硬编码在模板中，如下所示：

```
<a href="http://blah/blah/blah" style="color: #a8a8a8;">click here</a> 
```

这可以正常工作，直到管理模板的人决定他们要更改链接文本的颜色。我真正想要的是处理 HTML 和样式定义并使用适当的 HTML 输出 HTML。

我希望的是能够接受以下输入的东西：

```
<style type="text/css">
a {
    color: #a8a8a8;
}
</style>
<a href="http://blah/blah/blah">click here</a> 
```

...并生成...

```
<a href="http://blah/blah/blah" style="color: #a8a8a8;">click here</a> 
```

...这样，如果样式表被更新，“渲染”的 HTML 将全部反映这些更改。

如果这可以与内联`<style></style>`标签或外部 CSS一起使用，那就太好了`links`。

我这样做是因为我的经验表明，我使用的一些（大多数？全部？）网络邮件客户端似乎不尊重样式信息，无论是外部的还是其他的。如果我在这里遗漏了一些东西并且有一种更简单的方法可以做到这一点，我也很想听听这些建议。:)

**编辑** 我做了更多查询，发现另一个[讨论 CSS 选择器](https://stackoverflow.com/questions/260605/php-css-selector-library)的 Stackoverflow 问题，我想我会尝试使用类似 phpQuery 的东西来处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T05:09:20.150

**更新：**在我意识到我误解了你的问题后，我重写了这个。

您可以编写一个 PHP 脚本，将所有样式块转换为每个 HTMLElement 的硬编码样式。伪代码可以是：

```
1\. load up an XML parser for the HTML email generated by your mailing list program
2\. xpath get all "style" nodes
3\. for each node, parse for the id and/or class of the CSS style (you'll need some regexes for these)
4\. for each id and/or class found, look up that node by attribute id or class (using xpath) and append to the existing value of the style attribute 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-01T02:43:42.453

我为此使用[了emogrifier](http://www.pelagodesign.com/sidecar/emogrifier/)。它运行良好，它将所有 CSS 转换为 XPath 选择器，然后使用 PHP 的 DOMXPath (us.php.net/manual/en/class.domxpath.php) 查询节点并附加样式属性，然后输出带有 CSS 的 HTML内联。

我遇到的唯一问题是 DOMXPath 似乎不喜欢它为在同一元素上选择多个类/ID 的选择器生成的 XPath 查询，即：

```
#nav_home.current a .ir {
...
} 
```

这会产生

```
//*[@id="nav_home"]*[contains(concat(" ",@class," "),concat(" ","current"," "))]//a//*[contains(concat(" ",@class," "),concat(" ","ir"," "))] 
```

显然 DOMXPath 不喜欢。但除了那些选择器，它似乎工作得很好。

所以我需要学习 XPath 并修复它的 XPath 生成器，或者找到另一个 XPath 生成器，或者我会尝试合并这个 PHPQuery 的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T21:15:51.383

我决定考虑用[phpQuery](http://code.google.com/p/phpquery/)处理这个问题。我相信它为我的问题提供了最干净的解决方案。

# c - (Windows) 在 C 中监控 API 调用

> ID：720317
> 
> 赞同：11
> 
> 时间：2009-04-06T05:06:39.237
> 
> 标签：c, winapi, api

无论如何用 C 监控系统上的 API 调用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-07T12:35:28.900

在逐个功能的基础上，您可以使用[Microsoft Detours](http://research.microsoft.com/en-us/projects/detours/)。它通过重写函数入口点以指向您的代码来拦截 API 调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-09T07:03:48.963

[API 监控工具](http://www.woodmann.com/collaborative/tools/index.php/Category:API_Monitoring_Tools)有一个广泛的 API 监控工具列表。我使用 PIX 来监控 DirectX 调用。您应该尝试一下[Rohitab 的 Api Monitor](http://www.rohitab.com/apimonitor)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T15:51:38.080

The [Debugging Tools for Windows](http://www.microsoft.com/whdc/devtools/debugging/default.mspx) package includes a debugger extension called [logexts.dll](http://msdn.microsoft.com/en-us/library/cc266315.aspx) which can log Win32 API function calls. It also has a separate front-end program called [logger.exe](http://msdn.microsoft.com/en-us/library/cc266316.aspx) for when you don't want to attach the debugger.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-06T05:42:17.577

另一个值得关注的工具是Mark Russinovich 的[ProcessMonitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)。但是，它不会监控所有 api 调用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T05:16:02.257

虽然它不是免费的，但您可能需要查看[API Monitor](http://www.apimonitor.com/)。它能够记录到 XML 文件，因此您可以通过在您选择的应用程序中读取此文件来确定已调用的 API。

# vb.net - 一种正则表达式匹配没有前缀标签的数字的方法？

> ID：720318
> 
> 赞同：1
> 
> 时间：2009-04-06T05:07:02.217
> 
> 标签：vb.net, regex

```
 1 <span class='Txt9Gray'>Decisions ( </span> 
```

我试图`1`从这个字符串中获取。之前`1`是另一个`span`，但我不能将其用作标记，因为它可以从一页更改为另一页。是否有任何正则表达式可以简单地抓取`1`？

这个词`Decisions`将永远存在。这是我找到这条线的主要方法。这是我一直试图无济于事的：

```
 strRegex.Append("(?<strDecisionWins>[^<]+)[\s]*?
  <span class='[\s\w\W]*'>\bDecisions\b \([\s\w\W]*?</span>") 
```

这`spans`在实际之前一直在抓取`1`。包含上述内容的完整行是：

```
<span class='Txt9Gray'>(T)KOs ( </span> 66.67 <span class='Txt9Gray'>%) </span> <br /> 1 <span class='Txt9Gray'>Decisions ( </span> 33.33 <span class='Txt9Gray'>%) </span> <br /> 
```

问题是匹配从一开始就匹配，而不是一件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T05:45:46.820

怎么样：

```
\d+(?=\s*\<[^\>]+\>[^\<]*\bDecisions\b)
\d+(?=\s*<[^>]+>[^<]*\bDecisions\b) 
```

那只会选择 1 （没有别的）

第二种形式用于不需要转义的正则表达式处理器`<`和`>`.

前瞻表达式`(?=...)`保证选择一个数字`\d+`后跟一个包含文本的元素 ()（意味着没有开头的 ' `<`': `[^<]*`），其中包括单词 Decisions。

前瞻技术可以与其他正则表达式结合使用，例如：

```
\s\d(?=\s*\<[^\>]+class\s*=\s*'Txt9Gray'[^\>]*\>)
\s\d(?=\s*\<[^>]+class\s*=\s*'Txt9Gray'[^>]*>) 
```

将抓取一个数字（前提是它跟在空格后面），然后是一个包含属性“ `class='Txt9Gra`y”的元素

# fortran - Fortran 90，编译程序：错误消息

> ID：720319
> 
> 赞同：0
> 
> 时间：2009-04-06T05:07:09.033
> 
> 标签：fortran

我正在尝试找出这些错误消息：

**回溯：不可用，使用 -ftrace=frame 或 -ftrace=full 编译 Fortran 运行时错误：OPEN 语句中缺少 RECL 参数**

但我不知道这些消息是什么意思……首先，“-ftrace=frame 或 -ftrace=full”是什么意思？另外，什么是“RECL 参数”？

谁能给我解释一下，好吗？这对我有很大帮助。

请原谅我的英语，英语是我的第二语言。

优香

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T05:16:33.910

什么操作系统和编译器？

无论如何，它的意思是您在程序中有一个 OPEN 语句，该语句具有使其需要 RECL（记录长度）参数的参数，但它没有。

另一部分说它无法告诉您它发生在程序的哪个位置。如果您添加其中一个标志，然后重新编译，您将获得更多信息。

它看起来可能是英特尔编译器，在这种情况下，[此手册页](http://www.pcc.qub.ac.uk/tec/courses/f90/ohp/header_ohMIF_10.html)可能会有所帮助。

# perl - 为多个客户定制部分现有 Perl 程序的最佳方式是什么？

> ID：720326
> 
> 赞同：5
> 
> 时间：2009-04-06T05:14:04.460
> 
> 标签：perl, inheritance, subclass

我有一个部署到多个客户站点的现有 Perl 应用程序。不幸的是，该代码已被多次克隆，以便为个别客户定制。所以现在有几个完整的代码副本，它们都有细微（或主要）的差异。

我的任务是通过创建一个单一的通用代码库来解决这个混乱，并为不同的客户在他们自己的库中进行定制。

该应用程序已经有一个类层次结构（大约有 120 个类），如下所示：

```
Control.pm
  \__ BaseJob.pm
           \___Job1.pm
           |
           |__ Job2.pm
           |
           |__ Job3.pm 
```

我的目标是能够通过仅修改特定客户的库来自定义特定的类或方法。

我的第一直觉是为需要为特定客户定制的任何东西创建子类。这些子类将存在于客户特定的 lib 目录中（每个客户一个）。然后，要为客户定制一个类或方法，我只需将一个新的子类添加到客户库中。

例如，如果`Job2.pm`需要自定义一个方法，我可能会创建一个子类，该子类`CustomJob2`继承自`Job2`并仅包含要自定义的方法。

然后在主程序中，这个：

```
Job2->some_method(); 
```

变成：

```
CustomJob2->some_method(); 
```

问题是这会破坏所有其他客户的代码，因为他们的库中没有`CustomJob2`该类。看来我必须`CustomJob2`为每个客户在库中添加一个空类。

有没有更好的办法？

我考虑过的另一种可能性是使用覆盖而不是子类。主程序只需要`use lib`包含客户库，任何要定制的方法都将在库中重新定义。然而，这可能是危险的，不被认为是最佳实践。

我寻求 StackOverflow 大师的智慧来寻找解决这个问题的最佳方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T14:34:12.507

我强烈建议您将尽可能多的自定义设置到配置中，而不是代码中。

在配置对象中查找值的代码比实例化子类要简单得多。

您还可以通过将类名放在配置文件中并根据这些名称实例化类来混合两者。这也让您可以更轻松地在两个或更多客户之间共享自定义设置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T06:31:30.360

你对方向的大部分想法都是可靠的。当您调用**Job2->some_method()**而不是**$job->some_method()**时，问题就出现了。也就是说，您的类方法调用只是一个问题，因为它们首先是一个坏主意——您看到这是因为它们干扰了您利用 OOP。

在您的情况下，我会做的是编写我的代码，以便我使用对象方法调用而不是类方法调用，并为每个项目安装一个配置散列，该散列可用于告诉它它想为给定目的使用哪个类。所以它看起来像：

```
my $job2_class = $project->conf->{job2_class} || 'Job2';
my $job2 = new $job2_class;
$job2->some_method(); 
```

# python - 如何使用 Django 会话读取/设置 cookie？

> ID：720329
> 
> 赞同：1
> 
> 时间：2009-04-06T05:16:05.080
> 
> 标签：python, django

我正在尝试使用 Django 会话来读取和设置我的 cookie，但是当我执行以下操作时，程序只是没有响应！

**sessionID = request.session["userid"]**

程序没有通过这一点！

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T06:43:15.790

首先，Django 已经为您创建了一个用户对象，因此您无需将其存储在会话中。只需访问它：

```
request.user 
```

例如，要获取您将使用的用户名：

```
request.user.username 
```

接下来，如果您想在会话中存储信息，则无需在 cookie 级别担心它。只需将键/值对写入`request.session`字典即可。

[以下是 Django 文档中的一些示例](http://docs.djangoproject.com/en/dev/topics/http/sessions/#examples)。

**编辑**：您的程序没有响应的原因是因为引发了 KeyError 异常。'userid' 在会话字典中不作为键存在（除非您自己添加了它）。

这就是为什么最好像这样编写字典读取的原因：

```
id = request.session.get('somekey', False) 
```

如果字典中不存在“somekey”，它将返回 False。

# tfs - 如何在安装后更改运行 Team Foundation Server (TFS) 2008 构建的帐户

> ID：720333
> 
> 赞同：0
> 
> 时间：2009-04-06T05:23:43.267
> 
> 标签：tfs

只是想知道更改运行 TFS 构建的帐户的过程。TFS 是使用本地网络服务帐户安装的，需要更改为域帐户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T08:22:47.783

对于构建服务，我很确定您只需更改构建服务使用的帐户。（在管理服务中右键单击 Visual Studio Team Foundation Build 服务，然后转到登录选项卡并编辑帐户）

您需要确保新帐户对构建使用的放置位置具有权限。也是构建代理的工作目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T07:17:14.993

您是否尝试使用 TFSAdminUtil.exe？它位于 TFS Installpath\Tools 中，您可以使用“Changeaccount”-参数运行它。然后，您必须在之后提供旧用户名和新用户名和密码。

```
TFSAdminUtil.exe ChangeAccount local\oldaccount domain\newaccount password 
```

[此处](http://msdn.microsoft.com/en-us/library/ms253107.aspx)描述了此命令的使用。我用它来更改 TFS 的服务帐户并且它有效，我不知道它是否也适用于构建服务器。

# c - 在 Windows 上用 C 语言搜索文件

> ID：720337
> 
> 赞同：0
> 
> 时间：2009-04-06T05:25:16.807
> 
> 标签：c, windows, file

如何在计算机上搜索文件？也许正在寻找某些扩展。

我需要遍历所有文件并检查文件名。

假设我想查找所有带有 .code 扩展名的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T05:33:18.080

对于 Windows，您可能需要查看[FindFirstFile()](http://msdn.microsoft.com/en-us/library/aa364418(VS.85).aspx)和[FindNextFile()](http://msdn.microsoft.com/en-us/library/aa364428(VS.85).aspx)函数。如果要实现递归搜索，可以使用 GetFileAttributes() 来检查`FILE_ATTRIBUTE_DIRECTORY`. 如果该文件实际上是一个目录，请继续搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T04:24:17.317

FindFirstFile 的一个不错的包装是 windows 的 dirent.h (google dirent.h Toni Ronkko)

```
 #define S_ISREG(B) ((B)&_S_IFREG)
#define S_ISDIR(B) ((B)&_S_IFDIR)

static void
scan_dir(DirScan *d, const char *adir, BOOL recurse_dir)
{
    DIR *dirfile;
    int adir_len = strlen(adir);

    if ((dirfile = opendir(adir)) != NULL) {
        struct dirent *entry;
        char    path[MAX_PATH + 1];
        char    *file;

        while ((entry = readdir(dirfile)) != NULL)
        { 
            struct stat buf;
            if(!strcmp(".",entry->d_name) || !strcmp("..",entry->d_name))
                continue;

            sprintf(path,"%s/%.*s", adir, MAX_PATH-2-adir_len, entry->d_name);

            if (stat(path,&buf) != 0)
                continue;

            file = entry->d_name;
            if (recurse_dir && S_ISDIR(buf.st_mode) )
                scan_dir(d, path, recurse_dir);
            else if (match_extension(path) && _access(path, R_OK) == 0) // e.g. match .code
                strs_find_add_str(&d->files,&d->n_files,_strdup(path));
        }
        closedir(dirfile);
    }
    return;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T05:33:12.887

使用`FindFirstFile()`or`FindNextFile()`函数和递归算法遍历子文件夹。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-06T09:04:02.863

FindFirstFile()/ FindNextFile() 将完成在目录中查找文件列表的工作。要通过子目录进行递归搜索，您可以使用[_splitpath](http://msdn.microsoft.com/en-us/library/e737s6tf(VS.80).aspx)

将路径拆分为目录和文件名，然后使用生成的目录详细信息进行递归目录搜索。

# sql - 如何从 SQL Server 中的另一个数据库中选择表的数据？

> ID：720339
> 
> 赞同：62
> 
> 时间：2009-04-06T05:25:54.980
> 
> 标签：sql, sql-server, database, linked-server

假设我有一个名称`testdb`在**test server**的数据库。我在**产品**服务器中还有一个名为**proddb**的数据库。

 **现在我想从**proddb数据库中选择****testdb**数据库表的数据。

 **我怎样才能做到这一点**`SQL Server`**？

另外，我可以使用**oracle中的****数据库链接**来做到这一点。但是如何在**SQL Server**中做到这一点？

 ***** * *

## 回答 #1

> 赞同：62
> 
> 时间：2009-04-06T08:30:02.417

你需要 sp_addlinkedserver()

[http://msdn.microsoft.com/en-us/library/ms190479.aspx](http://msdn.microsoft.com/en-us/library/ms190479.aspx)

例子：

```
exec sp_addlinkedserver @server = 'test' 
```

然后

```
select * from [server].[database].[schema].[table] 
```

在您的示例中：

```
select * from [test].[testdb].[dbo].[table] 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2016-12-13T17:45:39.577

在 SQL Server 2012 及更高版本中，您不需要创建链接。可以直接执行

```
SELECT * FROM [TARGET_DATABASE].dbo.[TABLE] AS _TARGET 
```

我不知道以前版本的 SQL Server 是否也能正常工作

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2011-05-04T14:13:19.277

我以前使用它来通过链接服务器对另一台服务器和数据库设置查询：

```
EXEC sp_addlinkedserver @server='PWA_ProjectServer', @srvproduct='',
@provider='SQLOLEDB', @datasrc='SERVERNAME\PWA_ProjectServer' 
```

根据上面的评论：

```
select * from [server].[database].[schema].[table] 
```

例如

```
select top 6 * from [PWA_ProjectServer].[PWA_ProjectServer_Reporting].[dbo].[MSP_AdminStatus] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-06T05:28:16.597

要进行跨服务器查询，请查看帮助文件中的系统存储过程：**sp_addlinkedserver**。

链接服务器后，您可以对其运行查询。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-11-23T08:35:30.540

使用 Microsoft SQL Server Management Studio，您可以创建`Linked Server`. 首先连接到当前（本地）服务器，然后转到`Server Objects`> `Linked Servers`> 上下文菜单 > `New Linked Server`。在窗口`New Linked Server`中，您必须为远程服务器指定所需的服务器名称、真实服务器名称或 IP 地址（数据源）和凭据（安全页面）。

此外，您可以从链接服务器中选择数据：

```
select * from [linked_server_name].[database].[schema].[table] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-26T11:46:18.447

尝试使用 OPENDATASOURCE 语法是这样的：

```
select * from OPENDATASOURCE ('SQLNCLI', 'Data Source=192.168.6.69;Initial Catalog=AnotherDatabase;Persist Security Info=True;User ID=sa;Password=AnotherDBPassword;MultipleActiveResultSets=true;' ).HumanResources.Department.MyTable 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-10T11:16:48.657

```
Select * from [Database].[dbo].[TableName]
select * from [dbTest].[dbo].[Products] 
```

# c++ - 连接字符串

> ID：720344
> 
> 赞同：4
> 
> 时间：2009-04-06T05:30:35.047
> 
> 标签：c++, string, concatenation

我想将 a 加入`vector<string>`单个`string`，用空格分隔。例如，

```
sample
string
for
this
example 
```

应该变成`"sample string for this example"`.
最简单的方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-06T05:34:17.657

```
#include <iterator>
#include <iostream>
#include <sstream>
#include <vector>
#include <algorithm>

std::vector<std::string> v;
...

std::stringstream ss;
std::copy(v.begin(), v.end(), std::ostream_iterator<std::string>(ss, " "));
std::string result = ss.str();
if (!result.empty()) {
    result.resize(result.length() - 1); // trim trailing space
}
std::cout << result << std::endl; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T07:02:50.550

提升::加入

# c# - C# Access 数据库正在使用或权限失败

> ID：720346
> 
> 赞同：0
> 
> 时间：2009-04-06T05:32:15.087
> 
> 标签：c#, database, ms-access, permissions, oledb

我正在使用 Access 2007 和 C# 来学习数据库。到目前为止，这很艰难，但我已经能够相对较好地处理事情了。我需要做的是根据他们的密码查询我的数据库表 Accounts 以获取用户拥有的金额。我在我正在使用的 Windows 窗体上放置了一个按钮，该按钮将在单击时查询数据库。当我正常运行/单击按钮时，我收到以下错误。

> 基本上我的问题是：我将如何设置权限，以便我的程序可以自由访问我拥有的 Access 数据库？

我的异常错误：

> 异常：System.Data.OleDb.OleDbException：Microsoft Office Access 数据库引擎无法打开或写入文件“C:\Users\Public”。它已被其他用户独占打开，或者您需要权限才能查看和写入其数据。

我的代码：

```
 public partial class frmPin : Form
{
    static string connString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\Public;Persist Security Info=True";
    static private int pin = 11; //The First Pin in my records, for debugging I inserted it directly.
    static string selectStatement = "SELECT Amount FROM Accounts WHERE(PIN=" + pin + ")";
    OleDbConnection conn = new OleDbConnection(connString);
    OleDbCommand cmd = new OleDbCommand(selectStatement);

    public frmPin()
    {
        InitializeComponent();

    }

    private void btnQry_Click(object sender, EventArgs e)
    {
       try
       {
           conn.Open();
           OleDbDataReader reader = cmd.ExecuteReader(); // executes query
           while (reader.Read()) // if can read row from database
            {
                txtBx.Text = reader.GetValue(1).ToString();
            }
        }
        catch (Exception ex)
        {
            txtBx.Text = "Exception: " + ex;  // Displays Exception
        }
        finally
        {
            conn.Close();  // finally closes connection
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T06:25:03.323

“C:\Users\Public”需要改成你要访问的*.mdb文件的实际路径：

"C:\Users\Public.mdb"

或者

“C:\Users\Public\Something.mdb”

根据您的数据库名称：

```
Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\mydatabase.mdb;User Id=admin;Password=; 
```

或者它可能是一个 *.accdb 文件。如：

```
Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\myFolder\myAccess2007file.accdb;Persist Security Info=False; 
```

请参阅[http://www.connectionstrings.com/access-2007](http://www.connectionstrings.com/access-2007)和[http://www.connectionstrings.com/access](http://www.connectionstrings.com/access)

此外，如果您在其他程序（如 Access 2007）中打开文件，文件被标记为只读，或者安全权限使您没有读取或写入访问权限，有时您会遇到此类问题。请注意，如果您为像用户这样的组设置“拒绝”权限（在文件系统/NTFS 中），那么它将覆盖所有其他权限，这样管理员就会受到拒绝权限的影响。

编辑：感谢您的评论，添加了一些说明。

# .net - 将某些字节数据读入位图时出现问题

> ID：720351
> 
> 赞同：0
> 
> 时间：2009-04-06T05:34:15.550
> 
> 标签：.net, image, bitmap, stream

我正在尝试将硬编码的位图图像读入位图对象。我不断收到同样的错误：

> System.ArgumentException：参数无效。

这是我的代码...

```
const string fakeByteData = "AAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AgYKDhIWGh4iJiouMjY6PkJGSk5SVlpeYmZqbnJ2en6ChoqOkpaanqKmqq6ytrq+wsbKztLW2t7i5uru8vb6/wMHCw8TFxsfIycrLzM3Oz9DR0tPU1dbX2Nna29zd3t/g4eLj5OXm5+jp6uvs7e7v8PHy8/T19vf4+fr7/P3+/w==";

Stream stream = new MemoryStream(Encoding.ASCII.GetBytes(fakeByteData));
var bitmap = new Bitmap(stream); 
```

是的，我没有使用任何“`using`已处理掉的东西”的声明，因为我试图了解为什么这段字节数据会出错。这是我在一个非常临时的单元测试中的一些随机代码。

我*假设*的内容`fakeByteData`是合法的。

任何人都可以在这里阐明一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T05:37:08.820

你确定`fakeByteData`不是[Base64 编码的](http://en.wikipedia.org/wiki/Base64)？这通常是将图像（二进制）数据存储为字符串的方式......

`==`字符串末尾的“ ”看起来也像 Base64 编码中使用的填充字符。

当您尝试时会发生什么：

```
Stream stream = new MemoryStream(Convert.FromBase64String(fakeByteData)); 
```

* * *

更新：我尝试`fakeByteData`使用[在线解码器/编码器进行解码](http://www.motobit.com/util/base64-decoder-encoder.asp)，但无法加载图像。查看内容时，它看起来像非常假的数据：

> �<br> !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}~€‚ƒ„…†‡ˆ‰Š‹ŒŽ ''“”•–∼™š›œžŸ ¡¢£¤¥¦§¨©ª«¬®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÏÐÑÒÓÔÕÖ×øØýÙÚÛÜÝÞßà¦Ùûûüñòþÿõõõõõõõõ

这当然不应该产生任何我知道的图像；它似乎是字节 00-FF 的顺序数组。所以我认为你的问题出在数据上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T06:43:56.350

这是一个 base64 字符串，但其中*没有*图像。

如果你在 base64 解码后将数据转储到磁盘，你会发现它只是字节 0x00、0x01、0x02 等直到 0xff。

编辑：解决您在问题中的评论：这是“坏”数据，因为它不代表图像。您可能希望对这种情况进行单元测试，但您不能编写一个单元测试来期望基于不代表有效图像的数据的*真实图像。*

您将如何在现实生活中获取图像数据？它会是 base-64 编码的字符串吗？如果是这样，这里有一些红点的示例*有效*数据，取自[数据 URI 方案的 Wikipedia 条目](http://en.wikipedia.org/wiki/Data_URI_scheme)：

```
string fakeByteData = 
    "iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAABGdBTUEAALGP"
    + "C/xhBQAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9YGARc5KB0XV+IA"
    + "AAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAF1J"
    + "REFUGNO9zL0NglAAxPEfdLTs4BZM4DIO4C7OwQg2JoQ9LE1exdlYvBBeZ7jq"
    + "ch9//q1uH4TLzw4d6+ErXMMcXuHWxId3KOETnnXXV6MJpcq2MLaI97CER3N0"
    + "vr4MkhoXe0rZigAAAABJRU5ErkJggg=="; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T06:39:14.210

位图数据是实际位图吗？要从流创建位图，流必须包含通常包含在位图文件中的数据。这包括标题和那些东西。

如果字节数据旨在提供实际图像而不是整个文件，则应首先创建一个具有所需大小和所需图像格式的新位图。然后您应该使用 BitMap.LockBits 锁定位图并使用 Marshal.Copy 将字节数据复制到位图数据中。或者，您可以使用 Bitmap.SetPixel 并手动遍历字节数组，但这会慢得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T18:45:14.033

```
string fakeByteData = "iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAABGdBTUEAALGP"
    + "C/xhBQAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9YGARc5KB0XV+IA"
    + "AAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAF1J"
    + "REFUGNO9zL0NglAAxPEfdLTs4BZM4DIO4C7OwQg2JoQ9LE1exdlYvBBeZ7jq"
    + "ch9//q1uH4TLzw4d6+ErXMMcXuHWxId3KOETnnXXV6MJpcq2MLaI97CER3N0"
    + "vr4MkhoXe0rZigAAAABJRU5ErkJggg==";

Stream stream = new MemoryStream(Convert.FromBase64String(fakeByteData)); 
```

这有助于我进行单元测试以获取图像

# php - jQuery：查找表单字段的 id

> ID：720354
> 
> 赞同：0
> 
> 时间：2009-04-06T05:35:19.980
> 
> 标签：php, jquery

我正在创建一个动态表单，用户可以在其中向表单添加一组输入。html 看起来像这样：

```
<form>
    <input id="title1" class="title" name="title1"  type="text" value="">
    <input id="productionCompany1" name="productionCompany1" type="text" value="">
    <input id="year1" name="year1" type="text" value="">
    <input id="role1" name="role1" type="text" value="">
<div id="newCredit">&nbsp;</div>
<a href="#" id="addCredit">add another credit</a>
</form> 
```

当用户单击 ID 为“addCredit”的链接时，将调用以下 jQuery 脚本：

```
$(document).ready(function() {
    var $ac = $('#addCredit');
    $ac.click(function() { 
/* the following two lines are where the problem lies? */
        var $credInt = $(this).prev(".title"); 
        $.get("addCredit.php", {num: $credInt},
        function(data){
        $('#newCredit').append(data);});
        return false;
    });
}); 
```

jQuery 函数查询一个名为“addCredit.php”的 php 文件，如下所示：

```
<?php 
$int = $_GET["num"];
$int = substr($int, -1); 
$int++;
?>
<input id="title<?php echo $int;?>"  class="title" name="title<?php echo $int;?>"  type="text" value="">
<input id="productionCompany<?php echo $int;?>" name="productionCompany<?php echo $int;?>" type="text" value="">
<input id="year<?php echo $int;?>" name="year<?php echo $int;?>" type="text" value="">
<input id="role<?php echo $int;?>" name="role<?php echo $int;?>" type="text" value=""> 
```

我的问题是正确设置 javascript 变量 $credInt 以便可以将其发送到 addCredit.php 页面并相应地更新表单字段。我还需要确保每次附加表单时，发送的下一个值是递增的值。

关于我如何实现这一点的任何想法？感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T06:25:49.657

这是错误的做法；PHP 可以处理变量名中的数组语法。这使它更容易处理。也不需要调用服务器来克隆表单。你应该这样命名你的字段：

```
<form>
    <div id="originalCredit">
    <input name="title[]"  type="text" value="">
    <input name="productionCompany[]" type="text" value="">
    <input name="year[]" type="text" value="">
    <input name="role[]" type="text" value="">
    </div>
    <a href="#" id="addCredit">add another credit</a>
</form> 
```

然后你的 Javascript 可以是这样的：

```
$(function() {
    $('#addCredit').click(function() {
        var newCredit = $('#originalCredit').clone(); // create new set
        newCredit.find('input').val(''); // empty input fields
        $(this).before(newCredit); // append at the end
        return false;
    });
}); 
```

当表单最终发送到服务器时，因为变量是`name[]`PHP 的格式，所以会识别它们是一个数组，然后你可以这样做：

```
<? foreach($_POST['title'] as $k => $v) { ?>
    Title: <?=$_POST['title'][$k]?><br>
    Company: <?=$_POST['productionCompany'][$k]?><br>
    Year: <?=$_POST['year'][$k]?><br>
    Role: <?=$_POST['role'][$k]?><br>
<? } ?> 
```

显然，这只是将其显示为示例，但您可以使用它保存/更新/任何内容。

# .net - Cruise control.NET 集成队列？

> ID：720357
> 
> 赞同：1
> 
> 时间：2009-04-06T05:39:14.480
> 
> 标签：.net, scripting

[这是对以下链接“ http://confluence.public.thoughtworks.org/display/CCNET/Integratio+Queues](http://confluence.public.thoughtworks.org/display/CCNET/Integratio+Queues) ”中发布的材料的疑问

它告诉“CruiseControl.Net 的默认行为是配置中定义的每个项目都有自己的集成线程，从而允许同时构建不同名称的项目。

但是请注意，一个项目不能同时构建多个。如果您在 Project X 已经集成时强制构建它，则该强制构建请求将被有效阻止，直到先前的集成完成。因此，您也可以将其视为每个项目都有自己的专用集成队列，其中当前只能构建队列头部的项目，最多有一个请求待处理。”

但这在我的情况下确实是矛盾的，因为当我强制构建时，它会打开我的 IDE 并开始集成和构建，大约需要 3 分钟。但是当我在我的 webdash 板上的执行之间强制我的构建时，我看到它再次打开另一个 IDE 并开始构建这是不可接受的。根据上面显示的链接，它应该排队并等待第一个 IDE 执行完成然后去第二个。

你能提出任何解决这个问题的方法吗？

向麦迪致以亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T08:26:19.647

这是如下所示的ccnet.config文件 Cruisecontrol>

```
 <project name="VSAT" queue="Q1" queuePriority="1">
 <sourcecontrol type="filtered">
   <sourceControlProvider type="filesystem">
     <repositoryRoot>C:\MyProj</repositoryRoot>
     <autoGetSource>true</autoGetSource>
     <ignoreMissingRoot>false</ignoreMissingRoot>
   </sourceControlProvider>
 </sourcecontrol> 
 <triggers>
        <intervalTrigger name="continuous" seconds="240" buildCondition="IfModificationExists" />
 </triggers>
 <tasks>
   <nant> 
      <executable>C:\Nant-0.85\bin\NAnt.exe</executable>
  <buildFile>nant.build</buildFile>
   </nant>
 </tasks> 

 <!--<triggers>
   <intervalTrigger seconds="50" buildCondition="ForceBuild"/>
  </triggers>-->
  </project>
</cruisecontrol> 
```

我的 nant.build 文件总是在看到任何修改时调用 IDE。问题是即使我在我的 ccnet.config 文件中指定它也没有排队？？？

谢谢麦迪

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T08:01:34.870

我们将集成队列用于流水线目的，以防您的项目具有依赖关系并且您希望按顺序构建它们。

这是它的工作原理：

```
 ...
  <!-- Put all related projects in same Q, here MyProjectQ-->
  <!-- Set queuePriority, based on who-is-dependent-on-whom --> 
  <project queue="MyProjectQ" queuePriority="1">
    <name>MyProject.Main</name>
  </project>
  <project queue="MyProjectQ" queuePriority="2">
    <name>MyProject.Installer.All</name>
  </project>
  ... 
```

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T05:41:32.787

也许这是一个问题（来自 CCNet 文档，即使我不知道这个设置）：

重复：如何处理队列中重复请求的规范。可能的值为 UseFirst、ApplyForceBuildsReplace 和 ApplyForceBuildsReAdd。

[http://confluence.public.thoughtworks.org/display/CCNET/Queue+Configuration](http://confluence.public.thoughtworks.org/display/CCNET/Queue+Configuration)

# asp.net - Visual Studio - '浏览 UDDI 服务器' -> 404？

> ID：720359
> 
> 赞同：0
> 
> 时间：2009-04-06T05:40:07.440
> 
> 标签：asp.net, visual-studio, web-services, visual-studio-2005, uddi

我有一个实现 Web 服务的 ASP.Net 应用程序。在 ASP.Net 应用程序中，有一个使用 Web 服务的测试脚本，它一切正常，等等。

我已经构建了一个 .NET 控制台应用程序并希望“添加 Web 引用”，以便控制台应用程序可以使用 ASP.NET 应用程序提供的 Web 服务。当我使用“浏览本地网络上的 UDDI 服务器”来执行此操作时，我使用的任何可能的 URL 都会导致 404。

我猜我需要对我的 ASP.Net 应用程序做些什么，以便它充当 UDDI 服务器？有谁知道什么？

**更新**

我只是想澄清一些事情——我并不急于使用 UDDI，它只是在我的情况下似乎是唯一的选择：

*   我实际上是为另一个习惯使用 Visual Studio 做这些事情的开发人员做的
*   其他开发人员系统将需要在同一网络内的另一台机器上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T08:58:15.170

好的，我将在这里回答我自己的问题。

对我来说，关键是我一开始就不需要 UDDI 服务器——相反，我需要做的是简单地在“添加 Web 引用”对话框中提供 ASP 中 .ASMX 文件的 URL。 NET 应用程序，它定义了我所追求的服务（并忽略了整个“浏览 UDDI 服务器”的事情）。*（实际上我以前也这样做过，但今天脑子坏了一天）*

但是，更一般地说，如果我确实希望使用 UDDI，那么我想要的答案似乎是[2007 年 7 月的 MSDN 论坛帖子 -](http://social.msdn.microsoft.com/forums/en-US/asmxandxml/thread/7b089b0a-d620-4b62-a8a8-559507c0dd0a)

```
> How do we add the UDDI server that we
> created to the local network?  ...
> Just found where to do that :
> 
> - Go to the UDDI Service Control MMC
> 
> - Right click on the server and go to properties
> 
> - Go to the "Active Directory" Tab
> 
> - Click "Publish" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-13T15:34:44.107

UDDI 是网络上用于注册 Web 服务以及发现/使用 Web 服务的专用服务。将其视为本地 Intranet 的 Web 服务目录。

Windows Server 2003 包括 UDDI 服务。您必须通过添加/删除 -> Windows 组件（类似于 IIS、FrontPage 扩展等）来安装它。

如果问题在于有一个可以发现的 Web 服务存储库，那么 UDDI 就是一个解决方案。

如果问题是在另一台机器上使用单个服务，那么只需引用一个端点 (asmx/svc) 就足够了。在那种情况下，UDDI 是多余的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-12-29T09:09:55.507

作为记录，OP 实际上并不想与 UDDI 有任何关系。他的假设是错误的。UDDI 实际上并没有用于任何事情。

# asp.net-mvc - SessionStateTempDataProvider 需要启用 SessionState

> ID：720367
> 
> 赞同：6
> 
> 时间：2009-04-06T05:44:40.863
> 
> 标签：asp.net-mvc

我的混合（Web 表单/MVC）项目在我的本地开发环境中运行良好，但是当我将（xcopy）部署到我的测试环境时，我收到需要 SessionState 的错误（如下所示的完整错误）。

此错误消息的奇怪之处在于，会话状态在我的 web.config 中设置为**InProc**，而 IIS7 配置也显示了它。

我正在运行一个经典的 Web 表单站点，并且只有一小部分要迁移到 MVC 1.0。现在我的常规 web 表单 default.aspx 页面无法出现！

*   我在 MVC 中**根本不**使用 TempData 提供程序，所以我猜测框架出于某种原因确实如此，但见鬼，我的 SesionState 已启用......
*   我的测试环境在集成模式下的 IIS 7 上运行，我的 webconfig 使用 sessionstate 作为 InProc 并且工作正常。

更多信息：为了好玩，我创建了一个仅 MVC 的存根项目并将其部署到测试环境，它运行良好！**web.config**基本相同，一个有效，另一个无效。

任何帮助表示赞赏。

* * *

## 错误信息

## “/”应用程序中的服务器错误。

SessionStateTempDataProvider 需要启用 SessionState。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。异常详细信息：System.InvalidOperationException：SessionStateTempDataProvider 需要启用 SessionState。源错误：在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

[InvalidOperationException：SessionStateTempDataProvider 需要启用 SessionState。] System.Web.Mvc.SessionStateTempDataProvider.LoadTempData(ControllerContext controllerContext) +247928 System.Web.Mvc.TempDataDictionary.Load(ControllerContext controllerContext, ITempDataProvider tempDataProvider) +30 System.Web.Mvc .Controller.ExecuteCore() +71 System.Web.Mvc.MvcHandler.ProcessRequest(HttpContextBase httpContext) +209 System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +599 System.Web.HttpApplication.ExecuteStep( IExecutionStep 步骤，布尔值和完成同步）+171

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-06T17:26:35.073

**谷歌解决：**我将此属性添加到 web.config 中的模块节点，一切都神奇地开始工作：

`<modules runAllManagedModulesForAllRequests="true">`

看来我并不孤单：

[http://forums.asp.net/p/1293974/2509190.aspx](http://forums.asp.net/p/1293974/2509190.aspx)

[http://www.flyvergrillen.dk/2009/03/26/being-trapped-in-iis/](http://www.flyvergrillen.dk/2009/03/26/being-trapped-in-iis/)

我认为我的纯 MVC 项目（在测试环境中工作）太简单了，可能没有强制 MVC 框架需要 TempData 和 SessionState，所以这就是我将如何解释它的方式 ;-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-12-19T20:29:48.707

我遇到了同样的问题，当然也遇到了同样的错误。即使，我的 MVC 应用程序不需要会话状态，我只是对启动和运行应用程序感兴趣，所以愿意启用会话状态......为什么不！

即使将会话状态设置添加到我的 web.config 文件中，

```
<system.web>...<sessionState mode="InProc" />...</system.web> 
```

我继续收到相同的错误消息....非常令人困惑！

我发现了以下解释，这是该问题的最终解决方案。在集成模式下运行应用程序池时，您必须确保 IIS 已定义会话状态模块映射。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-12-09T12:24:09.563

将以下内容添加到`<system.webServer> <modules>`：

```
<add name="SessionStateModule" type="System.Web.SessionState.SessionStateModule" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-07-05T03:43:02.707

将以下条目添加到`system.webServer/handlers`

```
<add name="MvcHttpHandler" preCondition="integratedMode" verb="*" path="*.mvc" type="System.Web.Mvc.MvcHttpHandler, System.Web.Mvc"/> 
```

更改`path="*.mvc"`为您正在使用的任何扩展名/路径。

使用`runAllManagedModulesForAllRequests="true"`不是一个很好的解决方案，因为所有模块都会针对每个请求运行，包括静态文件，这可能对性能不利。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-09-29T22:41:51.750

如果您碰巧使用 SQLServer 作为 sessionState 模式，例如

```
<sessionState mode="SQLServer" sqlConnectionString="data source=server;integrated security=true" cookieless="false" /> 
```

确保连接字符串正确并且您对数据库具有权限。我意识到这个问题是针对 InProc 模式的，但是当我忘记将权限授予我的应用程序正在运行的帐户时，我遇到了同样的错误，而这个问题是我 Google 搜索中的热门问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-05T17:20:39.897

如果您将 SessionState 配置为使用 StateServer，请确保您的 ASP.NET 状态服务 (aspnet_state.exe) 正在运行：

```
<sessionState mode="StateServer" ... /> 
```

这就是我犯那个错误的原因。

# c# - C# Noob - 在模拟接口类中触发事件 - 此代码如何工作？

> ID：720368
> 
> 赞同：1
> 
> 时间：2009-04-06T05:45:28.660
> 
> 标签：c#, unit-testing, mvp, nmock

我对这里发生的事情有点困惑。我正在查看 Atomic Object 中的 Puzzle 示例，展示如何测试 Model-View-Presenter 模式[Puzzle.zip](http://www.atomicobject.com/files/Puzzle.zip)

视图有一个私人事件。该视图还有一个订阅(delegate) 函数，用于将委托添加到事件中。Presenter 在 IView 和 IModel 中传递。在构建期间，它订阅视图并将其连接到模型上的函数。

为了对 Presenter 进行单元测试，使用 NMock 模拟 View 类。所以它只是一个愚蠢的类，Subscribe() 函数实际上并没有做任何事情。当然，要测试presenter，你必须模拟视图和模型，然后在视图中触发事件并确保调用了模型函数。示例代码工作得很好 - 但是，我不明白它是如何工作的！

部分摘录：

```
 private DynamicMock modelMock;
    private IPuzzleModel model;
    private DynamicMock viewMock;
    private IPuzzleView view;
    private SavedTypeOf moveRequestConstraint;

    [SetUp]
    public void SetUp()
    {
        modelMock = new DynamicMock(typeof(IPuzzleModel));
        modelMock.Strict = true;
        model = modelMock.MockInstance as IPuzzleModel;

        // Setup the view
        viewMock = new DynamicMock(typeof(IPuzzleView));
        viewMock.Strict = true;
        view = viewMock.MockInstance as IPuzzleView;

        moveRequestConstraint = new SavedTypeOf(typeof(PointDelegate));
        viewMock.Expect("SubscribeMoveRequest", moveRequestConstraint);

        // create the presenter
        new PuzzlePresenter(model, view);
    }

    [Test]
    public void test_MoveRequest_fromView()
    {
        Point point = new Point(1, 2);
        modelMock.Expect("MoveRequest", point);
        PointDelegate trigger = moveRequestConstraint.GetInstance as PointDelegate;
        trigger(point);
    } 
```

不知何故，“触发器（点）”调用实际上连接到视图，并导致视图中的私有事件触发。我不知道它是如何工作的——我看不到它与视图实例的连接位置。我错过了什么？

**更新：** 我正在尝试使用 NMock 2。看来 moveRequestConstraint 变量接收到在 TestSetup 函数中传递给 SubscribeMoveRequest() 的值。但是，那是 NMock 1 语法 - 而 NMock 2 似乎不支持该语法。我将如何使用 NMock 2 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-15T14:53:02.517

您是否在测试中执行任何域代码？除了演示者的构造函数没有抛出异常之外，您可能没有测试任何东西。

顺便说一句，我强烈推荐你使用[RhinoMocks](http://ayende.com/projects/rhino-mocks.aspx)。它看起来像这样：

```
private IPuzzleModel model;
private IPuzzleView view;
private PointDelegate pointDelegate;
private Point point;

[SetUp]
public void SetUp()
{
    model = MockRepository.CreateMock<IPuzzleModel>();
    view = MockRepository.CreateMock<IPuzzleView>();

    // get the delegate passed to the mock when it is called
    // This is one of the more complex things you do with mocks.
    view.Stub(x => x.Subscribe(Arg<PontDelegate>().Is.Anything)
      .WhenCalled(call => pointDelegate = (PointDelegate)call.Arguments[0];);

    point = new Point(1, 2);
}

[Test]
public void test_MoveRequest_fromView()
{
    PuzzlePresenter presenter = new PuzzlePresenter(model, view);

    // make sure the Delegate method was called and the delegate
    // is available
    Assert.IsNotNull(pointDelegate);

    // fire the delegate.
    pointDelegate(point);

    // check if the model was called.
    model.AssertWasCalled(x => x.MoveRequest(point));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-06T13:35:42.717

我在尝试使 Presenter First 示例与 NMock2 一起工作时遇到了同样的问题。

经过一番挖掘，我在 SourceForge 上的 NMock2 论坛上找到了一个[帖子](http://sourceforge.net/projects/nmock2/forums/forum/377147/topic/2262219)。

```
[Test]
public void test_MoveRequest_fromView()
{
    Mockery mockery = new Mockery();
    IPuzzleView view = mockery.NewMock<IPuzzleView>();
    IPuzzleModel model = mockery.NewMock<IPuzzleModel>();

    CollectAction collect = new CollectAction(0);
    Expect.Once.On(view).Method("SubscribeMoveRequest").Will(collect);
    Expect.Once.On(model).Method("MoveRequest");

    new PuzzlePresenter(model, view);
    Point point = new Point(1, 2);
    PointDelegate del = collect.Parameter as PointDelegate;
    del(point);
    mockery.VerifyAllExpectationsHaveBeenMet();
} 
```

试试上面的代码 - 没有试过，但它应该可以工作。它不像 NMock2 的其余部分那样读得很好，但是 NMock 中的原始测试代码也没有。

**更新：**

而且似乎最新的 NMock2 (2.0.3411.37113) 也支持 CollectAction 的通用版本，所以你也可以这样做：

```
PointDelegate savedPointDelegate = null;
CollectAction<PointDelegate> collect = new CollectAction<PointDelegate>(0,
    delegate(PointDelegate del) { savedPointDelegate = del; });
...
savedPointDelegate(point); 
```

以下是我在提高可读性方面的尝试，但并没有太大的改进：

```
Expect.Once.On(view).Method("SubscribeMoveRequest").Will(
    Collect.Argument<PointDelegate>(0, delegate(PointDelegate del) { savedPointDelegate = del; }));

public class Collect
{
    public static CollectAction<T> Argument<T>(int index, CollectAction<T>.Collect collectDelegate)
    {
        CollectAction<T> collect = new CollectAction<T>(index, collectDelegate);
        return collect;
    }
} 
```

# polling - 定期轮询网页

> ID：720373
> 
> 赞同：2
> 
> 时间：2009-04-06T06:25:38.487
> 
> 标签：polling

我有一个网站，我需要每分钟左右轮询一个网页。服务器上的页面将执行不同的任务。我正在尝试使用 Windows 计划任务，但不能设置为每分钟运行一次。我知道在 Linux 上有这方面的 cron 作业，但在 Windows 上不可用。

任何想法如何在 Windows 上执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T06:30:01.313

尝试使用 Windows 服务。它可以设置为系统启动时启动，无需有人登录。另请查看这篇文章[http://www.codeproject.com/KB/dotnet/WindowsServiceScheduler.aspx](http://www.codeproject.com/KB/dotnet/WindowsServiceScheduler.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T06:32:09.750

重复间隔下拉菜单在这里下降到 5 分钟，我可以轻松输入 1 而不是 5：

[http://hypftier.de/temp/task.png](http://hypftier.de/temp/task.png)

它实际上是正确的，因为当我单击“确定”时，触发器的描述为：

[http://hypftier.de/temp/task2.png](http://hypftier.de/temp/task2.png)

或者这可能是添加到 Windows 7 或 Vista 中的，但实际上我对此表示怀疑。

# wpf - WPF GridSplitter 可见性

> ID：720375
> 
> 赞同：0
> 
> 时间：2009-04-06T06:26:38.547
> 
> 标签：wpf, visibility, gridsplitter, windowsformshost

我对 GridSplitter 的可见性有疑问。

在此，无论我托管 Winform DataGridView。拖动时，GridSplitter 在其他控件上正确可见。但不在这个网格上。事实上，无论我托管什么而不是 Datagridview，都会成为最顶层的控件，这使得 GridSplitter 隐藏在它后面。

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Name="rowForButton"/>
        <RowDefinition Name="rowForGridSplitter" Height="Auto" MinHeight="81" />
    </Grid.RowDefinitions>
    <Button Grid.Row="0" Height="50" Width="110" Content="Button in First Row"/>
    <my:WindowsFormsHost Panel.ZIndex="0" Grid.Row="1"  Margin="30,11,138,0" x:Name="winHost" Height="58" VerticalAlignment="Top" OpacityMask="Transparent">            
        <win:DataGridView x:Name="dataGridView"></win:DataGridView>
    </my:WindowsFormsHost>        
    <GridSplitter  BorderThickness="1" Panel.ZIndex="1" Grid.Row="1" HorizontalAlignment="Stretch" Height="5" ShowsPreview="True" VerticalAlignment="Top">
    </GridSplitter>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T06:44:25.930

通常，您应该将 GridSplitter 放入其自己的网格单元中，或者通过边距确保没有控件可以与其重叠。但我不知道这是否完全适用于你。另请参见[此处](http://msdn.microsoft.com/en-us/library/ms742210.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T07:42:34.223

我也遇到了这个问题，有我的解决方法：

```
var splitter = new GridSplitter()
        {
            HorizontalAlignment = HorizontalAlignment.Stretch,
            VerticalAlignment = VerticalAlignment.Stretch,
            FocusVisualStyle = null,
            ShowsPreview = true,
            Background = new SolidColorBrush(new Color() { R = 1, G = 1, B = 1, A = 1 }),
        };

// non-style / essential window which will display over your WinForm control
var PopupWindowForSplitter = new PopupWindow()
        {
            Background = new SolidColorBrush(new Color() { R = 1, G = 1, B = 1, A = 1 }),
            Visibility = Visibility.Collapsed
        };
PopupWindowForSplitter.Show();
...

Point _ptForSplitterDrag = new Point(0,0);

splitter.DragStarted += (o, e) =>
        {
            var pt = splitter.PointToScreen(new Point());
            _ptForSplitterDrag = splitter.PointToScreen(Mouse.GetPosition(splitter));
            PopupWindowForSplitter.Left = pt.X;
            PopupWindowForSplitter.Top = pt.Y;
            PopupWindowForSplitter.Height = splitter.ActualHeight;
            PopupWindowForSplitter.Width = splitter.ActualWidth;
            PopupWindowForSplitter.Activate();
            PopupWindowForSplitter.Visibility = Visibility.Visible;
        };
        splitter.DragDelta += (o, e) =>
        {
            var pt = splitter.PointToScreen(Mouse.GetPosition(splitter)) - _ptForSplitterDrag
                + splitter.PointToScreen(new Point());
            if (splitter.ResizeDirection == GridResizeDirection.Rows)
            {
                PopupWindowForSplitter.Top = pt.Y;
            }
            else
            {
                PopupWindowForSplitter.Left = pt.X;
            }
        };
        splitter.DragCompleted += (o, e) =>
        {
            var initializeData = typeof(GridSplitter).GetMethod("InitializeData", BindingFlags.NonPublic | BindingFlags.Instance);
            var moveSplitter = typeof(GridSplitter).GetMethod("MoveSplitter", BindingFlags.NonPublic | BindingFlags.Instance);
            if (moveSplitter != null && initializeData != null)
            {
                initializeData.Invoke(splitter, new object[] { true });

                var pt = splitter.PointToScreen(Mouse.GetPosition(splitter)) - _ptForSplitterDrag;
                if (splitter.ResizeDirection == GridResizeDirection.Rows)
                {
                    moveSplitter.Invoke(splitter, new object[] { 0, pt.Y });
                }
                else
                {
                    moveSplitter.Invoke(splitter, new object[] { pt.X, 0 });
                }
            }
            PopupWindowForSplitter.Visibility = Visibility.Collapsed;
        }; 
```

也许因为我的英语不好，我的描述中有一些问题，但我认为代码足以解释它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T08:42:35.410

尝试使用 WPF 本机 DataGrid 控件。您可以购买几个商业第三方控件，或者您可以查看 Microsoft 提供的一个（目前仍在 CTP 中）：

*   [Xceed 数据网格](http://xceed.com/Grid_WPF_Intro.html)
*   [Telerik RadGridView](http://www.telerik.com/products/wpf/gridview.aspx?gclid=CNDS8q7t25kCFUKK3godKHaSaQ)
*   [微软数据网格 CTP](http://windowsclient.net/wpf/wpf35/wpf-dg-preview-ctrl-investments.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T12:24:38.390

Windows 窗体控件始终与您的 WPF 控件分开呈现，因此将始终显示在您的 WPF 应用程序上。

有关详细信息，请参阅[在 WPF 中托管 Microsoft Win32 窗口](http://msdn.microsoft.com/en-us/library/ms742522.aspx#hosting_an_hwnd)（副标题*Notable Differences in Output Behavior*）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T18:59:50.780

在您的情况下，最快的解决方法是将 GirdSplitter 移动到带有按钮的行：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Name="rowForButton"/>
        <RowDefinition Name="rowForGridSplitter" Height="Auto" MinHeight="81" />
    </Grid.RowDefinitions>
    <Button Grid.Row="0" Height="50" Width="110" Content="Button in First Row"/>
    <my:WindowsFormsHost Panel.ZIndex="0" Grid.Row="1"  Margin="30,11,138,0" x:Name="winHost" Height="58" VerticalAlignment="Top" OpacityMask="Transparent">            
        <win:DataGridView x:Name="dataGridView"></win:DataGridView>
    </my:WindowsFormsHost>        
    <GridSplitter  BorderThickness="1" Panel.ZIndex="1" Grid.Row="0" HorizontalAlignment="Stretch" Height="5" ShowsPreview="True" VerticalAlignment="Bottom">
    </GridSplitter>
</Grid> 
```

现在只需调整边距以确保按钮和网格拆分器之间有一些空间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-01T08:25:26.450

解决方案是在网格拆分器中添加一个“Windows 窗体”标签，并在添加 DataGridView 后以编程方式执行此操作，使其显示在其顶部，如下所示：

```
void AddLabelToSplitter()
{
string template =
    @" <ControlTemplate 
xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation'
xmlns:mn='clr-namespace:MyNameSpace;assembly=MyAssembly'  
xmlns:wf='clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms'   
xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml' TargetType='{x:Type GridSplitter}'>
            <mn:ExtendedWindowsFormsHost x:Name='Grid_Splitter_WindowsFormsHost' HorizontalAlignment='Stretch'  VerticalAlignment='Stretch'>
                <wf:Label Dock='Fill' BackColor='DarkGray'></wf:Label>
            </mn:ExtendedWindowsFormsHost>
        </ControlTemplate>";
Grid_Splitter.Template = (ControlTemplate)XamlReader.Parse(template);
} 
```

使用常规的 windows 窗体主机将不起作用，因为它不会将鼠标事件传递给拆分器，因此请使用以下链接中的 ExtendedWindowsFormsHost 代替：

[保持鼠标事件从 WindowsFormsHost 冒泡](https://stackoverflow.com/questions/26909257/keep-mouse-events-bubbling-from-windowsformshost-on)

# .net - 来自单个 WCF 服务的多个接口？

> ID：720376
> 
> 赞同：33
> 
> 时间：2009-04-06T06:27:25.987
> 
> 标签：.net, wcf, interface

单个 WCF 服务能否提供多个接口，如果可以，您将如何表达`app.config`？

我的意思是一项服务在一个端点上提供多个接口。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2009-04-06T06:37:55.307

首先你需要明确什么是服务。您是指单个端点，还是同一主机中的多个端点？

假设您的意思是单个端点，那么可以，但需要做一些工作。一个端点只能实现一个接口；所以你需要做的就是将你想要实现的所有接口组合成一个接口

```
public interface IMyInterface : IInterface1, IInterface2 
```

然后在你的实现类中实现它们。你不能做的是让多个接口和多个实现神奇地合并到一个端点中。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-02-07T22:50:40.813

下面看起来更接近最初的目标，并且不涉及一个大的界面......

单个 ListenUri 的多个端点：http: [//msdn.microsoft.com/en-us/library/aa395210.aspx](http://msdn.microsoft.com/en-us/library/aa395210.aspx)

* * *

上面链接的示例说明可以在同一物理地址（listenUri）注册多个端点，每个端点实现不同的接口（合同），例如：

```
<endpoint address="urn:Stuff"
        binding="wsHttpBinding"
        contract="Microsoft.ServiceModel.Samples.ICalculator" 
        listenUri="http://localhost/servicemodelsamples/service.svc" />
<endpoint address="urn:Stuff"
        binding="wsHttpBinding"
        contract="Microsoft.ServiceModel.Samples.IEcho" 
        listenUri="http://localhost/servicemodelsamples/service.svc" />
<endpoint address="urn:OtherEcho"
        binding="wsHttpBinding"
        contract="Microsoft.ServiceModel.Samples.IEcho" 
        listenUri="http://localhost/servicemodelsamples/service.svc" /> 
```

这是可能的，因为传入消息会根据地址和合同过滤器的组合路由到适当的端点。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-06T06:43:08.163

使用 WCF，您可以：

*   拥有一个实现多个服务接口的服务实现类
*   通过多个端点公开一个服务实现类，例如一个服务端点使用 BasicHttpBinding 以获得最大互操作性，另一个端点使用 NetTcpBinding 以获得最大性能（使用 WCF 客户端）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-06T06:47:50.413

如果这就是您所要求的，那么您可以在 App.Config 中的两个不同端点上公开相同的接口。

```
<service name="Service1">    
   <endpoint address="http://localhost:8001/service1.asmx" binding="basicHttpBinding" contract="IService" />
</service>
<service name="Service2">    
  <endpoint address="http://localhost:8002/service2.asmx" binding="basicHttpBinding"  contract="IService" />
</service> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-07-19T20:10:33.207

如果您的实现类变得太大（如我的），请尝试在部分类中实现超接口。您可以将一个接口实现放入一个文件中。这只是一个约定，但以后可能会有用。

# opencv - 为什么OpenCV给我一个黑屏？

> ID：720379
> 
> 赞同：10
> 
> 时间：2009-04-06T06:29:03.687
> 
> 标签：opencv

我目前正在尝试使用 OpenCV（使用处理库）。但是，当我尝试运行任何示例（OpenCV 中包含的 Processing 示例或 C 示例）时，我只看到黑色而不是来自相机的输入。相机的 LED 指示灯确实亮起.. 有人遇到过同样的问题吗？我的相机是否与 openCV 不兼容？这是宏基水晶眼...

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-09-11T18:44:20.723

OpenCV 2.1 在 64 位操作系统上仍然存在一些问题。您可以阅读有关[该主题](https://stackoverflow.com/questions/3363637/opencv-2-1-mac-os-x-webcam-issues-32-and-64-bit/3366865#3366865)的主题。

如果您正在寻找显示如何使用网络摄像头的工作/可编译源代码，[请查看此](https://stackoverflow.com/questions/3438500/opencv-2-1-runtime-error/3444370#3444370)内容。

让我们知道它是否对您有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-02-07T11:20:17.673

我最近遇到了同样的问题。OpenCV 库本身只是给了我一个空白屏幕，我必须包含 videoInput 库：

[http://muonics.net/school/spring05/videoInput/](http://muonics.net/school/spring05/videoInput/)

我遵循的一个例子是：

```
#include "stdafx.h"
#include "videoInput.h"
#include "cv.h"
#include "highgui.h"

int main()
{
    videoInput VI;
    int numDevices = VI.listDevices();
    int device1= 0;
    VI.setupDevice(device1);
    int width = VI.getWidth(device1);
    int height = VI.getHeight(device1);
    IplImage* image= cvCreateImage(cvSize(width, height), 8, 3);
    unsigned char* yourBuffer = new unsigned char[VI.getSize(device1)];
    cvNamedWindow("test");
    while(1)
    {
        VI.getPixels(device1, yourBuffer, false, false);
        image->imageData = (char*)yourBuffer;
        cvConvertImage(image, image, CV_CVTIMG_FLIP);
        cvShowImage("test", image);
        if(cvWaitKey(15)==27) break;
    }

    VI.stopDevice(device1);
    cvDestroyWindow("test");
    cvReleaseImage(&image);

    return 0;
} 
```

从这个来源：[http ://www.aishack.in/2010/03/capturing-images-with-directx/](http://www.aishack.in/2010/03/capturing-images-with-directx/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-06T13:09:09.363

我在 Ubuntu 上遇到了同样的问题。我从这里下载了一个代码： [http](http://www.rainsoft.de/projects/pwc.html) ://www.rainsoft.de/projects/pwc.html 它在开始获取帧之前做了一个额外的步骤（我认为设置 FPS）。值得一试，该代码易于阅读并且适用于非飞利浦摄像头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-01-20T18:47:28.750

OpenCV 仅支持有限数量的相机类型。很可能不支持您的相机。您可以查看源代码或他们的网站以查看哪些是受支持的。

# sharepoint - 我应该创建自己的对象模型来处理复杂的 Sharepoint 对象吗？

> ID：720388
> 
> 赞同：3
> 
> 时间：2009-04-06T06:37:49.610
> 
> 标签：sharepoint

我正在尝试做一些相当简单但似乎使用 SharePoint API 几乎不可能完成的任务。

我的 SharePoint 数据结构如下：

-文件夹
---子文件夹
--------项目A
--------项目B
--------项目C
--------项目D

由于某些奇怪的原因，您无法以您期望的分层方式访问文件夹和子文件夹！当我遍历列表时，它将返回忽略层次结构的所有项目（即它将返回列表中的所有内容）。更糟糕的是，您不知道该项目是否为文件夹，以便在代码中管理结构。

现在，我正在编写自定义对象，以使 SharePoint 对象模型更有意义，并将数据分组到我期望的层次结构中。我计划将我的 SharePoint 项目映射如下：

```
public class Folder
{
    public Folder Parent {get; set;}
    public Folder Root {get; set;}
    public IList<Item> Items {get; set;}
} 
```

有没有人做过类似的事情，或者您是如何在 SharePoint 中管理此限制的？

如果我开始映射到我的自定义对象模型，是否有任何经验教训和需要注意的事项？

编辑：

我的最终解决方案是从 list.RootFolder.SubFolders 开始遍历文件夹。

```
 var query = from SPList list in Utils.GetList(webRelativeUrl, listName)
                from SPFolder folder in list.RootFolder.SubFolders
                where folder.Name.ToLower() != "forms"
                select new Folder  //Custom Object
                {
                    Name = folder.Name,
                    Children = (from SPFolder subFolder in folder.SubFolders //Further looping of sub folders                                       
                                select new Folder
                                {
                                     Name = subFolder.Name,
                                     Items = (from SPFile file in subFolder.Files
                                              select new Item
                                               {
                                               //Mapping code omitted
                                               }                                             ).ToList()
                                } 
                                        {)
                }

    return query.ToList(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T07:51:15.317

不，只需使用[SPQuery](http://www.u2u.info/Blogs/Patrick/Lists/Posts/Post.aspx?ID=1765)类从单个文件夹中获取项目。这篇[文章](http://www.u2u.info/Blogs/Patrick/Lists/Posts/Post.aspx?ID=1765)解释了如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T18:09:14.800

对于您的特定目的，从列表中获取 SPList.RootFolder 并从那里工作，递归遍历每个文件夹中的子文件夹和项目有什么问题（*）？

(*) 忽略这里的性能方面......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T21:39:02.970

不，您确实不应该创建自己的对象来混淆 SharePoint 对象模型。从本质上讲，SharePoint OM 反映了对象的存储方式。即列表进入单个数据库表，而不是像文件系统那样进入文件夹。

前进的最佳方式（基于非常痛苦的经历）是咬牙切齿地遵循 SharePoint 做事的方式。

在这种情况下，不要像在文件系统中那样使用文件夹。使用元数据“标记”列表项/文件并使用分组视图向用户显示它比使用文件夹结构更容易。

通常，文件夹结构（在磁盘上）用作元数据的替代项（例如，通过将文件放在 BusinessGroups/Marketing 文件夹中而不是用 BusinessGroup 的“Marketing”值标记它来提供文件隐式元数据。）

SharePoint 太大且笨拙，无法以您建议的方式“战斗”。顺其自然。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T17:44:53.533

我所做的是检查项目的父项是否是我当前正在遍历的列表，并从那里开始工作。`SPQuery`上课也可能是一个好方法。祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T21:46:31.160

要添加到 Lars 的答案（这是正确答案），如果您觉得需要更改对象模型，请尝试使用扩展方法解决您的问题。我一直在这样做，取得了一些成功，

# c# - 如何使用 linq 在 MVC asp.net 中访问新的人工组合列

> ID：720396
> 
> 赞同：1
> 
> 时间：2009-04-06T06:43:27.587
> 
> 标签：c#, asp.net-mvc, linq

我在视图中显示列字段值时遇到问题。

我正在返回如下视图。

```
var TicketList = (from T in db.Tickets
                  where  T.Title.Contains("a")
                  select new {
                        customerName = (
                             from cname in db.Customers
                             where cname.CustomerId == T.CustomersId
                             select cname.FirstName + cname.LastName
                        ) ,
                        Title = T.Title
                  }).ToList();

 return View("SearchTicketsResult",TicketList); 
```

在我的查看页面上

```
<%foreach (TicketList ti in (IEnumerable)ViewData.Model) {%>
    <%=ti.Title%><br />
    <%=ti.customerName %>
<% } %> 
```

我无法在页面中列出客户名称或标题。它说“找不到类型或命名空间名称'TicketList'（您是否缺少 using 指令或程序集引用？）”

有人可以指导我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T07:00:48.573

“TicketList”是匿名类型列表的*变量名。*没有“TicketList”类型。可以从匿名类型进行转换（“通过示例”），但**非常**脆弱，我不建议您为此使用匿名类型。

一种选择是声明我自己的类型（在 UI 的“模型”文件夹中） - 例如`TicketSummary`/ `TicketLite`（等），使用`Title`和`CustomerName`。然后使用*这种*类型：

```
public class TicketSummary
{

     public string CustomerName { get; set; }
     public string Title { get; set; }
}

var ticketList = (from t in db.Tickets
                  where  t.Title.Contains("a")
                  select new TicketSummary
                  {
                      CustomerName = (
                          from cname in db.Customers
                          where cname.CustomerId == t.CustomersId
                          select cname.FirstName.ToString()
                      ).FirstOrDefault(),
                      Title = t.Title
                  }).ToList();
return ticketList; 
```

然后你应该能够使用：

```
<%foreach (TicketSummary ts in (IEnumerable<TicketSummary>)ViewData.Model) {%>
    <%=ts.Title%><br />
    <%=ts.customerName %>
<% } %> 
```

实际上，我可能会将这项工作卸载到存储库，并拥有一个返回摘要类型列表的存储库方法。

# c# - XML 序列化注解

> ID：720400
> 
> 赞同：2
> 
> 时间：2009-04-06T06:44:28.923
> 
> 标签：c#, xml, serialization, xml-serialization, xelement

我有一个不想修改的 xml 文件的情况。XElement 类中的 AddAnnotation 函数提供了一个选项来添加未序列化且不属于 XML 的仅内存数据。

我希望能够保存这些注释（例如：到另一个 xml 文件），然后对 xml 和注释进行反序列化，以便获得与我相同的对象。

我不想更改原始 xml，这就是我使用注释的原因。

总而言之，我希望能够将自定义数据添加到 xml 文件中。当我序列化它时，这些数据不会成为 xml 的一部分，或者它将成为 xml 的一部分，但我可以轻松地检索原始 xml。

你有什么建议我可以做这样的事情吗？

**编辑：**我应该使用 xml 处理指令吗？处理指令是否适用于这种用途？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T06:50:23.403

在我看来，最简单的方法是使用常规节点，但在不同的 xml 命名空间中 - 即

```
<foo standardAttrubute="abc" myData:customAttribute="def">
    <standardElement>ghi</standardElement >
    <myData:customElement>jkl</myData:customElement>
</foo> 
```

（其中`myData`是`xmlns`namespace-uri 的别名）

在许多情况下，读者只检查*其*命名空间（或默认/空白命名空间）中的数据 - 通常会跳过自定义命名空间中的值。

要打包原始 xml，一种简单的方法是通过仅尊重默认/原始名称空间的 xslt 运行它。

* * *

```
XNamespace myData = XNamespace.Get("http://mycustomdata/");
XElement el = new XElement("foo",
    new XAttribute(XNamespace.Xmlns + "myData", myData.NamespaceName),
    new XAttribute("standardAttribute", "abc"),
    new XAttribute(myData + "customAttribute", "def"),
    new XElement("standardElement", "ghi"),
    new XElement(myData + "customAttribute", "jkl"));
string s = el.ToString(); 
```

要从 中删除此类数据`XElement`，也许：

```
 static void Strip(XElement el, XNamespace ns) {
        List<XElement> remove = new List<XElement>();
        foreach (XElement child in el.Elements()) {
            if (child.Name.Namespace == ns) {
                remove.Add(child);
            } else {
                Strip(child, ns);
            }
        }
        remove.ForEach(child => child.Remove());

        foreach (XAttribute child in
            (from a in el.Attributes()
             where a.Name.Namespace == ns
             select a).ToList()) {
            child.Remove();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-29T19:23:42.203

最初的问题使用了“序列化”这个词，但后来也提到了 XElement 和注释。对我来说，这是两件不同的事情。

**如果您真的想使用 XmlSerializer：**
我会使用 XmlAttributeOverrides 来区分序列化。使用 XmlAttributeOverrides，您可以在运行时以编程方式覆盖装饰您的类型的 xml 序列化属性。

在您的类型中，您可以拥有一个用于保存注释/文档的字段/属性。用 XmlIgnore 装饰它。然后，创建一个不接受任何覆盖的 XmlSerializer 实例。注释不会被序列化或反序列化。使用 XmlAttributeOverrides 对象为该类型创建另一个 XmlSerializer 实例。为 XmlIgnore 的属性指定一个覆盖（使用 XmlElementAttribute），以及对任何其他成员的任何属性的覆盖（使用 XmlIgnore=true）。

将实例序列化两次，每个序列化程序一次。

* * *

编辑：这是代码：

```
public class DTO
{
    [XmlIgnore]
    public string additionalInformation;

    [XmlElement(Order=1)]
    public DateTime stamp;

    [XmlElement(Order=2)]
    public string name;

    [XmlElement(Order=3)]
    public double value;

    [XmlElement(Order=4)]
    public int index;
}

public class OverridesDemo
{ 
    public void Run()
    {
        DTO dto = new DTO
            {
                additionalInformation = "This will bbe serialized separately",
                stamp = DateTime.UtcNow,
                name = "Marley",
                value = 72.34,
                index = 7
            };

        // ---------------------------------------------------------------
        // 1\. serialize normally
        // this will allow us to omit the xmlns:xsi namespace
        var ns = new XmlSerializerNamespaces();
        ns.Add( "", "" );

        XmlSerializer s1 = new XmlSerializer(typeof(DTO));

        var builder = new System.Text.StringBuilder();
        var settings = new XmlWriterSettings { OmitXmlDeclaration = true, Indent= true };

        Console.WriteLine("\nSerialize using the in-line attributes: ");
        using ( XmlWriter writer = XmlWriter.Create(builder, settings))
        {
            s1.Serialize(writer, dto, ns);
        }
        Console.WriteLine("{0}",builder.ToString());
        Console.WriteLine("\n");            
        // ---------------------------------------------------------------

        // ---------------------------------------------------------------
        // 2\. serialize with attribute overrides
        // use a non-empty default namespace
        ns = new XmlSerializerNamespaces();
        string myns = "urn:www.example.org";
        ns.Add( "", myns);

        XmlAttributeOverrides overrides = new XmlAttributeOverrides();

        XmlAttributes attrs = new XmlAttributes();
        // override the (implicit) XmlRoot attribute
        XmlRootAttribute attr1 = new XmlRootAttribute
            {
                Namespace = myns,
                ElementName = "DTO-Annotations",
            };
        attrs.XmlRoot = attr1;

        overrides.Add(typeof(DTO), attrs);
        // "un-ignore" the first property
        // define an XmlElement attribute, for a type of "String", with no namespace
        var a2 = new XmlElementAttribute(typeof(String)) { ElementName="note", Namespace = myns };

        // add that XmlElement attribute to the 2nd bunch of attributes
        attrs = new XmlAttributes();
        attrs.XmlElements.Add(a2);
        attrs.XmlIgnore = false; 

        // add that bunch of attributes to the container for the type, and
        // specifically apply that bunch to the "additionalInformation" property 
        // on the type.
        overrides.Add(typeof(DTO), "additionalInformation", attrs);

        // now, XmlIgnore all the other properties
        attrs = new XmlAttributes();
        attrs.XmlIgnore = true;       
        overrides.Add(typeof(DTO), "stamp", attrs);
        overrides.Add(typeof(DTO), "name",  attrs);
        overrides.Add(typeof(DTO), "value", attrs);
        overrides.Add(typeof(DTO), "index", attrs);

        // create a serializer using those xml attribute overrides
        XmlSerializer s2 = new XmlSerializer(typeof(DTO), overrides);

        Console.WriteLine("\nSerialize using the override attributes: ");
        builder.Length = 0;
        using ( XmlWriter writer = XmlWriter.Create(builder, settings))
        {
            s2.Serialize(writer, dto, ns);
        }
        Console.WriteLine("{0}",builder.ToString());
        Console.WriteLine("\n");            
        // ---------------------------------------------------------------
    }
} 
```

输出，使用内联属性：

```
<DTO>
  <stamp>2009-06-30T02:17:35.918Z</stamp>
  <name>Marley</name>
  <value>72.34</value>
  <index>7</index>
</DTO> 
```

输出，使用覆盖属性：

```
<DTO-Annotations xmlns="urn:www.example.org">
  <note>This will bbe serialized separately</note>
</DTO-Annotations> 
```

# java - 缺少资源异常

> ID：720402
> 
> 赞同：0
> 
> 时间：2009-04-06T06:47:17.327
> 
> 标签：java, eclipse, tomcat, jsf

我的应用程序使用 eclipse 并在 Tomcat 服务器上运行。使用的技术是“JSF”。在运行我的应用程序时出现异常，例如：

java.util.MissingResourceException：找不到资源包 java.util.PropertyResourceBundle，关键内容管理异常

请建议怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T07:27:27.573

可能是因为在您的键之间有空格。尝试`ConentManagementException`，而不是。我的意思是没有空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T06:58:53.337

*   检查所有运行时依赖项
*   验证它们是否都已部署并正在运行
*   检查您`JAVA_PATH`的设置是否正确

如果您想了解更多信息，则需要更具体

# ruby-on-rails - 超级下拉列表

> ID：720404
> 
> 赞同：2
> 
> 时间：2009-04-06T06:47:40.243
> 
> 标签：ruby-on-rails, css, drop-down-menu

[我想像 Rails 网站 ( http://guides.rubyonrails.org/](http://guides.rubyonrails.org/) )中使用的那样做一个巨型下拉菜单，或者 BaseCamp.C 中使用的那些，它们是使用 Rails 表单助手完成的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-06T07:07:45.500

不是自动的，没有。“大型下拉列表”实际上只是一个 DIV 元素，其位置看起来好像是打开的“指南索引”。您所要做的就是定位 DIV，使其看起来正确。

在您提供的网站中，这是通过将 DIV 嵌套在包含“指南索引”元素的元素中来完成的。像这样的东西：

```
<outerelement style="position: relative; top: 0px; left: 0px">
  <a href="#">Guide Index</a>
  <div id="index" style="position: absolute; top: 0px; left: 0px; display: none">
     <!-- all the items in the guide index -->
  </div>
</outerelement> 
```

我不记得如何使用 Rails 中的原型助手来生成它，但是当单击“指南索引”链接时，您只需要一些 Javascript 代码来执行此操作：

```
 Element.toggle('index'); 
```

大概是这样的：

```
 <%=link_to_function("Guide Index", "Element.toggle('index')")%> 
```

所以你最终在你的`.rb`文件中得到的是：

```
<outerelement style="position: relative; top: 0px; left: 0px">
  <%=link_to_function("Guide Index", "Element.toggle('index')")%>
  <div id="index" style="position: absolute; top: 0px; left: 0px; display: none">
     <!-- all the items in the guide index -->
  </div>
</outerelement> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T07:18:09.280

37Signals（Rails 的创建者）发布了一篇关于大型下拉导航的文章。这篇文章主要关注可用性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T07:48:48.363

内置的表单助手用于创建标准的 HTML 表单元素。这些“大型下拉菜单”不是其中的一部分，必须手动创建，使用 HTML，希望有一些 CSS 和 Javascript。

我不知道有任何插件或类似的东西会自动为你创建这个，但我相信你会找到一些东西。或者，您当然可以自己编写。

# .net - 在 .net 中读取锁

> ID：720407
> 
> 赞同：2
> 
> 时间：2009-04-06T06:49:12.580
> 
> 标签：.net, locking

在任何半生不熟的 DBMS 中，读锁和更新锁是有区别的。迄今为止，在我的多线程 C# 代码中，我使用了`lock`关键字，但今天我发现，如果我可以在锁定中做出这种读写区别，我的应用程序的性能会好很多；我有许多线程可以安全地同时读取，但是为了不频繁但不可避免的写入，它们相互阻碍。

我可以并且我想我将不得不实现我自己的锁定方案，其中对写锁的请求既会停止获取进一步的读取锁，也会停止直到现有的读取锁被释放。

这一切都不是非常困难，并且在您愿意命名的任何数据库理论文本中，Date 和其他人都以令人震惊的细节描述了所有这些。

我肯定不是第一个面对这种需求的人吗？那里有什么，特别是对于 C#？

* * *

谢谢你，德米特里。

我希望的另一件事是人们可能对您可能尝试过的任何库的优缺点有任何经验和评论。

天哪，那在 System.Core 中！别说了，德米特里，你让我觉得自己老了。

我想知道游说微软提供类似于`lock (object) { ... }`语法的语法糖最实用的方法是什么。

改编自 MSDN 示例

```
public class SynchronizedCache
{
  private ReaderWriterLockSlim cacheLock = new ReaderWriterLockSlim();
  private Dictionary<int, string> innerCache = new Dictionary<int, string>();

  public string Read(int key)
  {
    cacheLock.EnterReadLock();
    try
    {
      return innerCache[key];
    }
    finally
    {
      cacheLock.ExitReadLock();
    }
  }

  public void Add(int key, string value)
  {
    cacheLock.EnterWriteLock();
    try
    {
      innerCache.Add(key, value);
    }
    finally
    {
      cacheLock.ExitWriteLock();
    }
  }
... 
```

这与显式使用 Monitor 非常相似。在 MS 的一点帮助下，它可以像这样干净和简单。

```
private Dictionary<int, string> innerCache = new Dictionary<int, string>();

public string Read(int key)
{
  readlock(innerCache) return innerCache[key];
}
public void Add(int key, string value)
{
  writelock (innerCache) innerCache.Add(key, value);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T06:51:47.207

看看[ReaderWriterLockSlim](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)类（或其旧版本，ReaderWriterLock）。这个锁类区分了读锁和写锁，允许你有多个读者但只有一个写者。

# wpf - GridSplitter 被 WinForm 元素隐藏

> ID：720412
> 
> 赞同：0
> 
> 时间：2009-04-06T06:50:54.323
> 
> 标签：wpf, winforms, xaml, gridsplitter

我正在使用 WPF 应用程序。我的问题是关于 GridSplitter 的可见性。

在我的 xaml 代码中，我正在维护一个网格。在网格的第三行，我托管了一个 Winform DataGridView。在同一行中，写入了 GridSplitter。

当拖动 GridSplitter 以调整 Grid Row 大小时，对于其他控件（如 Buttons 等），它是正确可见的。但是当涉及到我托管的 DataGridView 时，GridSplitter 隐藏在托管控件的后面。

事实上，无论我托管什么而不是 Datagridview，当它被拖动时，它都会使 GridSplitter 隐藏在它后面。

我尝试为 GridSplitter 设置 ZIndex。它没有任何区别。

谁能帮我这个？

以下是我的 XAML 示例代码：-

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Name="rowForButton"/>
        <RowDefinition Name="rowForGridSplitter" Height="Auto" MinHeight="81" />
    </Grid.RowDefinitions>
    <Button Grid.Row="0" Height="50" Width="110" Content="Button in First Row"/>
    <my:WindowsFormsHost Panel.ZIndex="0" Grid.Row="1"  Margin="30,11,138,0" x:Name="winHost" Height="58" VerticalAlignment="Top" OpacityMask="Transparent">            
        <win:DataGridView x:Name="dataGridView"></win:DataGridView>
    </my:WindowsFormsHost>        
    <GridSplitter  BorderThickness="1" Panel.ZIndex="1" Grid.Row="1" HorizontalAlignment="Stretch" Height="5" ShowsPreview="True" VerticalAlignment="Top">
    </GridSplitter>
</Grid> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T07:57:36.563

不幸的是，WinForms 控件将始终位于您的 WPF 元素之上，当您尝试滚动它时它也会这样做。解决它的最佳方法是将大小/滚动/WinForms 部分所需的逻辑放入 WinForms 控件，然后将该控件托管在 WPF 表单中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-10-12T19:55:14.003

您的网格只有 2 个行定义，但需要 3 个。目前 WindowsFormsHost 和 GridSplitter 共享第二行（即 Grid.Row="1"）。大概您希望 WindowsFormsHost 使用 Grid.Row="2"。

# mstest - 在 mstest 中运行测试而不编译/构建

> ID：720417
> 
> 赞同：15
> 
> 时间：2009-04-06T06:53:59.947
> 
> 标签：mstest

有办法吗？每次开始测试时我都必须等待构建吗？我想从视觉工作室而不是从测试构建

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2010-09-23T18:53:44.653

每当您的代码更改并运行测试时，它都会进行构建...因此从技术上讲，您可以一遍又一遍地运行测试，它们只会在第一次构建，但是一旦运行测试，为什么要运行在不更改代码的情况下再次使用它们？

我使用的使您的测试运行更快的几件事是：

1.  选中“仅在运行时构建启动项目和依赖项”框，位于选项->项目和解决方案->构建和运行。

2.  学习快捷键
    a. "Ctrl+R, T" 在当前上下文中运行测试，所以如果你的光标在一个测试方法中，它只会运行那个测试，但是当你在一个非测试类中执行它时，它会运行你的所有测试。
    湾。"Crtl+R, Ctrl+T" 除调试外，调试测试相同。
    C。其他的可以在[这里](http://www.microsoft.com/downloads/en/details.aspx?familyid=e5f902a8-5bb5-4cc6-907e-472809749973&displaylang=en)找到，那些是2008年的，如果你需要参考其他的，你可以通过谷歌找到它们。

3.  确保您的测试没有调用数据库或其他时间密集型资源，使用模拟和存根。

4.  只运行少量测试，即如果我在服务类中工作，我只运行服务类测试。

**编辑：**如果您想构建而不是从测试中再次阅读您的问题，您可以转到菜单并单击构建->构建解决方案或按 F6。如果您指出您使用的是哪个版本的 Visual Studio，这也会很有帮助，因为 2010 在您必须单击刷新的意义上是不同的。无论哪种方式，您都可以澄清吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-09-24T05:59:43.137

对源代码的任何更改都会导致编译，因为为了运行测试 VS 需要带有测试的最新 DLL。

如果您已经编译了项目，那么您可以在不编译的情况下多次运行测试。

[PS：我使用TestDriven.NET](http://www.testdriven.net/quickstart.aspx)运行 MSTest ，因为它更快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-19T18:22:42.000

这是一个老问题，但我一直看到有人问这个问题，这个问题在 VS2017 中仍然存在，从 VS 中运行的其他测试框架（Xunit 等）也是如此。

我不知道如何让 VS 一直停止构建。但我确实知道如何规避编译 - 从控制台运行程序运行您的测试，而不是从 VS 中运行。如果您使用的是 ReSharper，它有一个。

如果您没有使用 ReSharper，对于 MSTest，您可以从这里开始。[https://msdn.microsoft.com/en-us/library/ms182489.aspx](https://msdn.microsoft.com/en-us/library/ms182489.aspx)

如果您没有使用 ReSharper，对于 XUnit，您可以从这里开始。 [https://xunit.github.io/docs/getting-started-desktop.html#add-xunit-runner-ref](https://xunit.github.io/docs/getting-started-desktop.html#add-xunit-runner-ref)

# http - 如何确定服务器是否支持 Range 标头？

> ID：720419
> 
> 赞同：26
> 
> 时间：2009-04-06T06:55:04.907
> 
> 标签：http, http-headers

我一直在尝试使用 Range 标头值从特定点流式传输音频，但我总是从一开始就得到这首歌。我正在通过一个程序执行此操作，因此不确定问题出在我的代码还是服务器上。

如何确定服务器是否支持 Range 标头参数？

谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-04-06T07:35:50.673

[HTTP 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.2)定义它的方式，如果服务器知道如何支持`Range`标头，它会。这反过来又要求它在向您返回内容时返回带有标头的[206 Partial Content响应代码。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.7)[`Content-Range`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.16)否则，它将简单地忽略`Range`您请求中的标头，并返回 200 响应代码。

这可能看起来很傻，但是您确定您正在制作一个有效的 HTTP 请求标头吗？太常见了，我忘记在请求中指定 HTTP/1.1，或者忘记指定范围说明符，例如“字节”。

哦，如果您只想*检查*，那么只需发送 HEAD 请求而不是 GET 请求。相同的标题，相同的一切，只是“HEAD”而不是“GET”。如果您收到`206`回复，您将知道`Range`受支持，否则您将收到`200`回复。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-06-01T03:02:24.470

这是为其他搜索如何执行此操作的人准备的。您可以使用卷曲：

```
curl -I http://exampleserver.com/example_video.mp4 
```

在标题中你应该看到

```
Accept-Ranges: bytes 
```

您可以进一步测试检索范围

```
curl --header "Range: bytes=100-107" -I http://exampleserver.com/example_vide0.mp4 
```

在标题中你应该看到

```
HTTP/1.1 206 Partial Content 
```

和

```
Content-Range: bytes 100-107/10000000
Content-Length: 8 
```

[而不是 10000000 你会看到文件的长度]

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-05T08:20:22.183

虽然我回答这个问题有点晚，但我认为我的回答会对未来的访客有所帮助。这是一个检测服务器是否支持范围查询的python方法。

```
def accepts_byte_ranges(self, effective_url):
    """Test if the server supports multi-part file download. Method expects effective (absolute) url."""
    import pycurl
    import cStringIO
    import re

    c = pycurl.Curl()
    header = cStringIO.StringIO()

    # Get http header
    c.setopt(c.URL, effective_url)
    c.setopt(c.NOBODY, 1)
    c.setopt(c.HEADERFUNCTION, header.write)
    c.perform()
    c.close()

    header_text = header.getvalue()
    header.close()

    verbose_print(header_text)

    # Check if server accepts byte-ranges
    match = re.search('Accept-Ranges:\s+bytes', header_text)
    if match:
        return True
    else:
        # If server explicitly specifies "Accept-Ranges: none" in the header, we do not attempt partial download.
        match = re.search('Accept-Ranges:\s+none', header_text)
        if match:
            return False
        else:
            c = pycurl.Curl()

            # There is still hope, try a simple byte range query
            c.setopt(c.RANGE, '0-0') # First byte
            c.setopt(c.URL, effective_url)
            c.setopt(c.NOBODY, 1)
            c.perform()

            http_code = c.getinfo(c.HTTP_CODE)
            c.close()

            if http_code == 206: # Http status code 206 means byte-ranges are accepted
                return True
            else:
                return False 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-06T07:21:59.897

一种方法是尝试并检查响应。在您的情况下，服务器似乎不支持范围。

或者，对 URI 执行 GET 或 HEAD，并检查[Accept-Ranges 响应标头](http://greenbytes.de/tech/webdav/rfc2616.html#rfc.section.14.5)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-05T06:19:13.077

*   您可以使用`GET`带有`0-0` `Range`请求头的方法，并检查响应代码是否为206，它将以响应正文的第一个和最后一个字节进行响应
*   您也可以使用`HEAD`方法做与第一个会话相同的事情，这将获得相同的响应标头和代码而没有响应正文

> 另外，你可以查看`Accept-Ranges`响应头来判断是否支持范围，但请注意，如果值`none`在`Accept-Ranges`字段上，则表示它不支持范围，如果响应头没有`Accept-Ranges`字段，你也可以' t手指它不能支持它的范围。

`0-` `Range`如果您在请求标头上使用检查响应代码的方法，还有一件事您必须知道`GET`，响应正文消息将自动缓存在 TCP 接收窗口中，直到缓存已满。

# javascript - 如何在给定时间内关闭浏览器？

> ID：720423
> 
> 赞同：0
> 
> 时间：2009-04-06T07:01:30.443
> 
> 标签：javascript

如何在给定时间内使用 javascript 关闭浏览器窗口，同时在 IE 和 Firefox 中没有警告消息

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-06T07:29:31.047

我同意其他人的观点。不用太努力，我会说您在没有收到警告消息的情况下关闭 javascript 窗口时运气不佳。

您编写的任何 javascript 都将由浏览器执行。如果该浏览器决定捕获`window.close()`一段脚本，那么这就是它要做的事情。您受到浏览器放置在您身上的边界的限制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T07:04:52.510

警告消息取决于浏览器，您不能忽略它。据我记得，您需要使用脚本打开窗口才能有权关闭它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T13:52:36.040

您只能关闭以前使用脚本打开的窗口（没有用户警告）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T14:01:43.210

你不能，警告消息旨在阻止代码破坏性地关闭窗口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T14:19:32.107

对于警告消息，我知道 StackOverflow 使用 onbeforeunload 事件。如果您使用返回 false 的函数覆盖该事件（不仅仅是附加处理程序），它可能会摆脱警告。例如：

```
window.onbeforeunload = function(){return false;};
setTimeout(function(){window.close();}, 10000); // close after 10 seconds 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T14:21:31.133

就像一般原则一样，Web 浏览器窗口属于用户，而不是您。如果您要创建、销毁或调整它们的大小，那么您做错了。

请在您的个人资料中填写您的 RL 地址。我们将很快派出一个“再教育小组”来拜访您。:-)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-06-21T12:59:47.473

似乎您可以做到（尽管您不应该这样做）。检查这个问题
[Javascript to close IE6, IE7, IE8 and Firefox without Confirming box?](https://stackoverflow.com/questions/1629801/javascript-to-close-ie6-ie7-ie8-and-firefox-without-confirmation-box)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-06T07:12:49.073

使用[setTimeout](http://www.w3schools.com/js/js_timing.asp)管理何时运行[window.close()](http://www.javascript-coder.com/window-popup/javascript-window-close.phtml)脚本。

**编辑：**对于警告消息，我不知道解决方案。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-11-09T12:00:20.127

仅适用于 IE：

```
 window.setTimeout(function() { 
    window.opener='x';
    window.close();
  }, 10000); 
```

# collaboration - 地理距离仍然是个问题吗？

> ID：720426
> 
> 赞同：2
> 
> 时间：2009-04-06T07:03:46.927
> 
> 标签：collaboration

音频和视频会议、任务、日历和文档管理有很多好的解决方案。我们有规范、uml 图、代码生成器等。

但是公司仍然投入大量现金，以便人们即使在经济衰退时期也能身临其境，我想知道为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-06T07:04:33.213

没有什么比面对面的会议更好的了。时期。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T07:15:31.300

我每天都与一个远程开发团队一起工作，我只能支持其他响应者说没有什么比面对面的工作更好。当您身临其境时，您需要肢体语言、面部表情和易于沟通的微妙线索，例如在白板上涂鸦。视频会议紧随其后，但组织问题很难克服（会议室、网络摄像头、带宽......）。
通过文档进行交流在某种程度上是有效的，但经常被喝了敏捷 kool-aid 的开发人员认为是不必要的开销。我尝试尽可能多地使用电话、Skype、MSN 或电子邮件，但与团队中我实际与之共事至少几天的人一起工作会更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T07:05:47.937

老实说，距离不是问题。你要么在同一地点，要么不在。

我们结合使用 Skype IM、Skype 语音、手机和电子邮件来保持联系。我们还没有真正正确地使用网络摄像头，但即便如此，面对面的接触也有一些你无法用技术真正复制的东西。

我认为大多数公司都认为拆分员工队伍是一个进步。一家以在家工作的人开始的公司比相反的方式更能找到并建立一个办公室来让他们进入。金钱只是一个考虑因素——它确实改变了团队的工作方式，如果你弄错了，你就没有团队，你有一群单独的开发者，他们实际上需要更长的时间来做事。

当然，如果有一个办公室供每个人工作，那么招募和指导团队的新成员也会更容易。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-06T07:13:53.597

许多人在面对面时做得更好。许多人在远处也能做得很好。然而，管理人员往往更关注人际关系，这通常意味着他们是面对面的人。因此，作为一般规则，管理层倾向于不喜欢或不信任远距离会议。

此外，会议往往是徒劳的。这适用于远程会议*和*面对面会议。事实上，在面对面的会议上更容易偏离主题、不专业和效率低下。然而，当远距离会议没有成效时，它几乎总是被视为这样，**因为**它是在远处。处理远程会议的技术和限制可能会非常令人沮丧，并且将您的生产力不足归咎于情况和技术要容易得多。

总结：人是个问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T08:02:31.013

根据我在澳大利亚一家大型组织的工作经验，我在全国各地都有分支机构，以及我目前在一家美国公司的远程工作，对此我有一些愤世嫉俗和相反的看法。

玩世不恭的面对面工作让你可以做不公开*的交易*。这可能并不像听起来那样腐败或卑鄙，但在人们协商涉及影响力、应计和欠款以及难以量化或令人尴尬的事情的相对权衡时，会发生数量惊人的管理级决策。即使一个组织承诺使用电话会议，也会出现一些在镜头外进行谈判的团体，从而获得竞争优势。

在纯粹的技术层面上，我认为面对面远没有提到的那么重要。政治问题在于绘制这种区别——如果你将你的东西标记为非政治性的并且可以通过远程通信安全地进行，那么你就明确地将其他谈判标记为不安全。另一个方面是，希望晋升到管理层的人需要在面对面的讨论中成为可见的和知名的参与者。

众所周知，包括我自己在内的开发人员在接受上面提到的非语言暗示方面很差（问问我的妻子吧！）。在轻松的信任氛围中，他们可以在 IM 会话中明确地使用表情符号和笑话，而不必担心翻译他人的表达，尤其是跨文化​​。

在讨论项目时，具有搜索记录的能力的 IM 会话比口头或视频对话更有效率。如果你在有人说它的时候没有发现一些细微差别，你可以回去检查上下文中的确切句子。

我很少使用视频聊天，而语音聊天的主要用途是让我可以在老板开车的空闲时间与他交谈。这些对话很好，可以让我大致了解事情的进展，但通常不足以提供技术支持。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-20T18:46:58.200

这是一个讨论分布式软件开发的播客：[管理商业软件项目](http://itc.conversationsnetwork.org/shows/detail4006.html)。以下是展示页面的简介：

> Andy Singleton 是一位长期研究和实践分布式软件开发艺术的企业家。受开源和敏捷运动的影响，他得出了一些关于如何管理商业项目的惊人结论。其中：不要采访人，不要估算日程，不要在电话会议上花费时间。在与主持人 Jon Udell 的对话中，他解释了为什么不做这些事情，以及应该做什么。

我觉得这很有趣。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-06T07:14:19.540

面对面会议提供了许多您无法通过其他方式获得的视觉反馈。如果您想讨论建筑、评论等重要主题，这是必须的，如果通过电话、电子邮件、twiki 等方式完成这些主题往往会很慢或无用。

通常状态更新可以通过其他方式完成，我们通常使用 Skype、Twiki、电子邮件、电话保持同步。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-06T07:37:49.217

大约 80% 的交流是非语言的，视频会议有点帮助，但还不够好。

根据所使用的通信类型，已经对商务谈判和项目合作的成功率进行了研究。面对面的成功率从 90% 到仅使用电子邮件和文本 IM 时的成功率不到 10%。

例如，哈佛商学院教授 Kathleen L. Valley 进行的一项研究得出了这样的结果：

> “在通过计算机互动的 24 个四人决策小组中，有 102 起粗鲁或冲动行为的实例。另外 24 个亲自互动的小组只产生了 12 条这种性质的评论。”

相关连线文章：[“火焰战争的秘密原因”](http://www.wired.com/science/discoveries/news/2006/02/70179)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-06T07:45:13.270

我真的很喜欢通过 IM、电子邮件或电话进行交流。完全没问题，我非常感谢使用它。

现在出现了大“但是”（带有一个“t”）：
您不能“只是走过”您的同事并问他**一个简短的问题。当然，你可以给他发 IM 或给他发邮件。但是他需要一些时间才能回答你的问题。
另一点是喝咖啡。你不能只是和他一起喝杯咖啡，然后谈论你的问题。
如果你让你的大脑释放你的想法，问题就会消失。这就是与同事一起喝咖啡的原因之一。

我真的需要个人交流。我需要它。大约 70% 的沟通可以用 IM 或其他方式代替，但 30% 非常重要。

** 他 = 他/她

# sql - SQL Server 的 AFTER INSERT 触发器以创建唯一的随机 8 字符代码？

> ID：720427
> 
> 赞同：0
> 
> 时间：2009-04-06T07:03:50.517
> 
> 标签：sql, sql-server, triggers, uniqueidentifier, random

我从 Raymond Lewallen 的一些存储过程代码开始，用于密码生成器。我想创建一个触发器，每次插入新行（客户）时都会创建一个唯一的 8 个字符 ID。到目前为止我所拥有的：

```
 CREATE procedure dbo.AllAccessIDgenerator (      
      @showID varchar(40)
      @accessID varchar(100) OUT     )     

    As     

    Begin
       declare @codeLength int
       declare @characters varchar(100)     
       declare @count int
       set @characters = ''
       set @codeLength = 8

    -- set A - Z (uppercase)      
     set @count = 65      
      while @count <=90      
       begin          
         set @characters = @characters + Cast(CHAR(@count) as char(1))          
         set @count = @count + 1      
       end
     end

    -- set 0-9
    set @count = 48  
     while @count <=57  
     begin  
      set @characters = @characters + Cast(CHAR(@count) as char(1))  
      set @count = @count + 1  
     end  
     end  

    set @count = 0  
    set @accessID = ''  

     while @count <= @codeLength      
      begin          
       set @accessID = @accessID + SUBSTRING(@characters,CAST(ABS(CHECKSUM(NEWID()))*RAND(@count) as int)%LEN(@characters)+1,1)          
       set @count = @count + 1      
      end     
     end

    end     
    GO 
```

我如何 (a) 获取一个存储过程并使其成为 SQL Server 2008 中的触发器，以及 (b) 如果我需要测试唯一性，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T07:52:34.127

老实说，我建议在您的领域层中执行此操作，而不是在数据库中。数据库中的域逻辑会使以后难以维护和部署。当然你可以在数据库中设置约束等来防止无效的外键值等，但是唯一值的生成是一个业务规则，属于你系统的业务规则层（即领域层/逻辑/对象）。

另外，以这种方式产生独特价值的原因是什么？身份列会更适合您的目的吗？您始终可以将标识列用作 8 字符填充值的一部分，这将确保唯一性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T07:28:07.087

鉴于您的要求，我会这样做

1.  创建一个包含两列密码的表。密码和 IsUsed。
2.  在密码列上创建唯一索引。
3.  用你需要的尽可能多的项目填满这张表。
4.  在您的触发器中，获取 IsUsed = 0 的第一个密码。
5.  设置 IsUsed = 1。

显然，您应该对密码使用某种形式的加密或散列。**密码永远不应存储为纯文本**。我建议您搜索密码保护方法。

## 编辑

1.  如果您需要密码或只是为您的客户提供唯一的 8 个字符 ID，我并不完全清楚。如果您只需要唯一 ID，那么您当然应该忽略此解决方案的加密部分。
2.  为了填充表，我将在临时表中生成 x 数量的 ID，并选择与该表不同的选择作为插入实际表的源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T15:33:35.110

我将添加一些关于为此使用触发器的建议。是的，可以使用触发器来执行此操作。（与 Neil 不同，我认为这应该是数据库问题，因为所有记录都需要唯一性，而不仅仅是通过特定接口添加的记录。从数据完整性的角度来看，将这样的逻辑放在应用程序中是一个坏主意。Ata minumum make确保该文件具有唯一索引。）

但是，大多数缺乏经验的触发器开发人员认为触发器单独作用于每一行，并且不会将触发器设计为处理多行插入。你可能认为没有多行插入；大多数时候你会错的。在某些时候，您将要导入一组客户，触发器必须能够处理此问题。

现在使用您的 proc，它一次只能处理一条记录。这是一个巨大的缺陷，因为在触发器中处理它的唯一方法是使用游标或 while 循环。这非常慢，如果您需要一次添加大量客户，最终可能会锁定您的客户表数小时。

我认为 Lieven 创建一个可能的唯一密码池的想法是一个很好的想法，因为您可以在触发器中使用基于集合的逻辑来填充它。但要使其正常工作，您将需要三列（例如，用于获取接下来的 300 行的标识字段）。如果未使用的密码低于某个百分比，您还应该安排一个夜间作业以生成更多潜在密码。这样一来，事情就永远不会因为您意外地用完潜在的密码而失败。

# .net - LINQ 和 .COUNT 超时

> ID：720428
> 
> 赞同：3
> 
> 时间：2009-04-06T07:04:03.823
> 
> 标签：.net, linq, linq-to-sql, exception

我有一个一般性的问题，并对 LINQ 和超时感到好奇。

我正在运行一个实时应用程序，并且我收到以下代码的超时。

以下代码，这是正常的，我没有看到任何错误：

private static tblUser GetUserLinq(string email, string password) { DataContext db = new DataContext();

```
 var tblUsers = from user in db.tblUsers
                           where user.EmailAddress == email
                           && user.Password == password
                           select user;

        if (tblUsers.Count() == 0)
            return null;

        return tblUsers.First();
    } 
```

但是在以下情况下会出现很多超时：

```
 if (tblUsers.Count() == 0) 
```

这是例外

超时已过。在操作完成之前超时时间已过或服务器没有响应。- System.Data.SqlClient.SqlException：超时已过期。在操作完成之前超时时间已过或服务器没有响应。在 System.Data.SqlClient.SqlConnection.OnError(SqlException 异常，Boolean breakConnection) 在 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException 异常，Boolean breakConnection) 在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) 在 System .Data.SqlClient.TdsParser.Run（RunBehavior runBehavior，SqlCommand cmdHandler，SqlDataReader dataStream，BulkCopySimpleResultSet bulkCopyHandler，TdsParserStateObject stateObj）在 System.Data.SqlClient.SqlDataReader.ConsumeMetaData() 在 System.Data.SqlClient.SqlDataReader。`1.System.Linq.IQueryProvider.Execute[S](Expression expression) at System.Linq.Queryable.Count[TSource](IQueryable`1 来源）在 Actions.GetUserLinq(String email, String password) in C:\Actions.cs:line 104 at Login(String email, String password) in C:\Actions.cs:line 33

我对为什么超时的一些想法：

计数需要计算该表中的记录数，这不是我们所追求的如果我们试图查找记录是否存在，那么我们应该使用以下代码：

```
 var tblUsers = (from user in db.tblUsers
                           where user.EmailAddress == email
                           && user.Password == password
                           select user).FirstOrDefault(u => u.UserId <0) ; 
```

否则我对为什么 LINQ 在 Count 上超时感到有些困惑

我注意到的另一件事是，如果您通过 SQL 企业管理器直接在机器上运行以下 SQL，它也会超时，这表明它可能是一个锁定问题，但是调用该表的唯一应用程序是 LINQ

从 tbluser 中选择计数（用户 ID）

欢迎评论

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T07:09:59.393

您应该检查用户表的索引。用户名/密码索引可能会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T07:12:19.357

如果即使使用 SQL 企业管理器查询也超时，那应该是您首先解决的问题。

将 LINQ 完全排除在外 - 确保*没有*其他任何东西正在访问数据库，并查看该查询是否仍然超时。在其上运行查询探查器。

当然，如果您只想获得第一个用户，您应该将您的方法重写为：

```
private static tblUser GetUserLinq(string email, string password) 
{ 
    DataContext db = new DataContext();

    var tblUsers = from user in db.tblUsers
                       where user.EmailAddress == email
                       && user.Password == password
                       select user;

    return tblUsers.FirstOrDefault();
} 
```

（那里不需要“u => u.UserId < 0”。）

`FirstOrDefault``null`如果没有结果将已经返回，那应该没问题。

听起来你的数据库有更大的问题。EmailAddress 和 Password 是否都已正确编入索引？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-07T13:04:46.583

顺便说一句，尽量远离这种模式：

```
 if (tblUsers.Count() == 0)
            return null; 
```

有一个很棒的扩展方法 Any() 可以为你生成更好的 SQL：

```
if ( !tblUsers.Any())
    return null; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T07:08:48.680

它在本地运行查询超时的事实表明您需要表上的一些索引。如果您在启用了“执行计划”的管理工作室中运行查询，那么您应该能够看到需要创建哪些索引。

情况可能是由于查询超时，您将无法获得执行计划，因此您将不得不使用“估计执行计划”功能。（这些图标看起来像连接在一起的蓝色和绿色小盒子）

# xna - 如何在 xna 中设置窗口/屏幕大小？

> ID：720429
> 
> 赞同：55
> 
> 时间：2009-04-06T07:04:25.583
> 
> 标签：xna, fullscreen

如何在 XNA 中调整窗口的大小。

默认它以 800x600 分辨率开始。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2010-04-14T06:01:15.697

从 XNA 4.0 开始，这个属性现在可以在`GraphicsDeviceManager`. IE。此代码将进入您的游戏的构造函数。

```
graphics = new GraphicsDeviceManager(this);
graphics.IsFullScreen = false;
graphics.PreferredBackBufferHeight = 340;
graphics.PreferredBackBufferWidth = 480;

// if changing GraphicsDeviceManager properties outside 
// your game constructor also call:
// graphics.ApplyChanges(); 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2009-04-06T07:08:14.123

我发现你需要设置

```
GraphicDevice.PreferredBackBufferHeight = height;
GraphicDevice.PreferredBackBufferWidth = width; 
```

当您在游戏类的构造函数中执行此操作时，它可以工作，但是当您尝试在构造函数之外执行此操作时，您还需要调用

```
GraphicsDevice.ApplyChanges(); 
```

此外，您可以使用全屏（调试时无法正常工作）

```
if (!GraphicsDevice.IsFullScreen)
   GraphicsDevice.ToggleFullScreen(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-07-27T07:45:06.817

你应该看看这个，[http://forums.xna.com/forums/p/1031/107718.aspx](http://forums.xna.com/forums/p/1031/107718.aspx)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2010-02-05T14:16:51.543

此解决方案适用于 XNA 3.0。只需将其放入游戏对象的构造函数中即可：

```
// Resize the screen to 1024 x 768.
IntPtr ptr = this.Window.Handle;
System.Windows.Forms.Form form = (System.Windows.Forms.Form)System.Windows.Forms.Control.FromHandle(ptr);
form.Size = new System.Drawing.Size(1024, 768);

graphics.PreferredBackBufferWidth = 1024;
graphics.PreferredBackBufferHeight = 768;

graphics.ApplyChanges(); 
```

# .net - .NET 中的 Remoting 或 WebServices 哪个更好？

> ID：720438
> 
> 赞同：2
> 
> 时间：2009-04-06T07:08:46.697
> 
> 标签：.net, web-services, remoting

这可能是一个初学者的问题，但我想知道，

Remoting 或 WebServices 之间的基本区别是什么？

哪一个更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T07:18:50.403

“更好”在这里是相当间接的。

Remoting 使用二进制序列化，因此在网络上占用的空间更少，通常速度更快，但只能在两端使用 .net。您的 dll 版本必须匹配，并且您可以在应用程序中托管服务器端点，而无需 IIS。

Web 服务更加灵活，因为它们使用 XML 完成，旨在与其他提供者（Java、Python 等）进行互操作。

或者，看看 WCF（[Windows Communication Foundation](http://msdn.microsoft.com/en-us/netframework/aa663324.aspx)），因为它是 .net 世界的发展方向。它允许您编写一次代码，然后将其托管在各种端点上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T07:18:57.233

“哪个更好”是一个相对比较，只能由您的场景决定。这两种实现分布式应用程序的机制存在的原因各不相同，选择最适合您的设置的机制对您来说很重要。

请记住，整个 Web 服务框架是建立在 Remoting 框架之上的。IOW，Web 服务是从 Remoting 创建的抽象。因此，虽然 ASP.NET Web 服务提供了更简单的编程模型和更好的互操作性，但 Remoting 提供了`System.Net.Remoting`命名空间的全部灵活性和强大功能，需要更多的技术知识并且具有更少的互操作性。也就是说，使用 TCP 进行远程处理无疑比基于 HTTP 的 Web 服务执行得更好。

这是一篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms978420.aspx)，解释了在什么情况下应该选择哪一个。[另一个](http://www.developer.com/net/net/article.php/2201701)详细说明了内在差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T07:21:05.543

这取决于你想做什么；对于真正的“远程”场景，远程处理已经失宠；通常，对于系统*之间*的通信，最好使用服务接口，例如通过 WCF。

*远程处理对于单个*应用程序中的 AppDomain 之间的通信仍然很有价值。

请注意，并非所有 .NET 框架都可以使用远程处理 - 例如，Silverlight 不支持远程处理，但 WCF 和 http / (raw)sockets 之类的东西很好。

如果可以，请查看 WCF。如果 WCF 不是一个选项，请查看常规 Web 服务。

特别是远程处理的问题：

*   它将客户端和服务器绑定到 .NET
*   它将客户端和服务器绑定到相同的二进制实现
*   它往往会导致考虑不周的边界（很容易通过电线泄漏错误的对象，这可能导致很大的延迟问题）

等等

重新性能；远程处理使用二进制序列化，这在某些方面很有用，但在其他方面存在问题（参见上面的项目符号）。Web 服务往往是基于 xml 的（尽管存在其他格式）——并且是基于*契约*的（而不是基于实现的）——这意味着客户端和服务器可以有不同的类型来表示对象，只要它们足够相似。

也可以在 Web 服务上使用二进制文件；例如，[protobuf-net](http://code.google.com/p/protobuf-net/)提供了一个 WCF 挂钩，以在 WCF 服务上使用 Google 的“协议缓冲区”二进制（基于合同）格式（注意：这是一个定制协议，您需要在两端使用该工具）。

系统之间还有其他对话方式，所有这些方式都可以说比远程更可取（即使它们不太通用 - 有时，极简主义是一种美德）：

*   套接字（自定义通信）
*   http（简单的 POX 消息等）
*   中间件（msmq、biztalk 等）

# c++ - Visual C++ 错误 C2143：语法错误：在 'constant' 之前缺少 ')'

> ID：720440
> 
> 赞同：3
> 
> 时间：2009-04-06T07:08:57.167
> 
> 标签：c++, visual-studio, syntax-error

我在 Visual C++ 中遇到了一个错误，这让我很难过。

错误是错误 c2143 读取：语法错误：在 'constant' 之前缺少 ')'

我的代码行是：

```
coefficient[i] = (1 - (2 * depth)) + ((t - floor( t + 0.5 ) + 1 ) 2 * depth); 
```

我在文件的开头有#include，它应该定义 floor(double) 函数。

对变量的更多解释。

double depth 是可以在其中找到该行的类的成员变量。
int i 是递增的索引值。
double t 是一个递增值。

他们所做的其实并不重要，但我想澄清一下，这三个都已经定义为基本类型的变量。

我已经检查并验证了所有括号都匹配。对于编译器所指的“常量”，我有点不知所措。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-06T07:13:39.447

我不太确定这是否与编译器给您的错误相同，但是您必须在第二个 '2' 前面放置一个 '*' 符号，以便：

```
coefficient[i] = (1 - (2 * depth)) + ((t - floor( t + 0.5 ) + 1 ) 2 * depth); 
```

变成这样：

```
coefficient[i] = (1 - (2 * depth)) + ((t - floor( t + 0.5 ) + 1 ) * 2 * depth); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-06T07:21:08.320

其他海报已经向您展示了语句中的实际错误，但请将其拆分为多个子语句，更清楚地显示您在数学上尝试做的事情，因为如果您不这样做，该函数将来会让您头疼不！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-06T07:12:31.120

```
coefficient[i] = (1 - (2 * depth)) + ((t - floor( t + 0.5 ) + 1 ) (the problem is here) 2 * depth); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-11T21:59:48.790

即使你有正确的答案，我也会解释你应该如何得出它。

当遇到无法找到的长表达式中的错误时，将表达式逐个拆开，直到找到为止。

在这种情况下：

```
coefficient[i] = (1 - (2 * depth)) + ((t - floor( t + 0.5 ) + 1 ) 2 * depth); 
```

变成：

```
firsthalf = (1 - (2 * depth));
secondhalf = ((t - floor( t + 0.5 ) + 1 ) 2 * depth);   // Error appears on this line
coefficient[i] = firsthalf + secondhalf; 
```

这消除了第一部分作为错误的来源。

下一次尝试：

```
exprA = (t - floor( t + 0.5 ) + 1 );
exprB = exprA * 2;
exprC = exprB * depth;   // Hmm.... this all worked.  Start putting it back together.
secondhalf = exprC; 
```

最后的尝试：

```
exprA = (( MY_TEST_CONSTANT ) 2 * depth);   // Error now becomes obvious. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T07:15:34.730

系数[i] = (1 - (2 * depth)) + ((t - floor( t + 0.5 ) + 1 ) **2(2 在这里做什么？)** * depth);

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-10-28T06:39:13.790

声明枚举时我遇到了类似的错误。这是因为枚举常量之一也在代码的其他地方声明。

# php - 在 PHP 中编译带有多个附件的电子邮件

> ID：720455
> 
> 赞同：2
> 
> 时间：2009-04-06T07:15:58.693
> 
> 标签：php, email, attachment

我需要从 PHP 发送一封带有多个图像附件的电子邮件。我目前有一个使用两个硬编码图像的测试设置。我用所有必要的标题编译电子邮件并将其发送出去。但是，当我收到它时，它只将第一张图片显示为附件。第二张图片似乎被忽略了（使用 Groupwise 和 Gmail 进行了测试）。

当我查看我的电子邮件的来源时，以下是我在服务器生成的标头之后看到的内容。显然两个附件（图像）都在那里，但只有第一个显示为附件。

任何帮助将不胜感激。

```
This is a multi-part message in MIME format.

--==Multipart_Boundary_x38e1b83d34375e183a2fdcd6a9c001f8x
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

my message text

--==Multipart_Boundary_x38e1b83d34375e183a2fdcd6a9c001f8x
Content-Type: image/gif;
 name="image1.gif"
Content-Disposition: attachment;
 filename="image1.gif"
Content-Transfer-Encoding: base64

iVBORw0KGgoAAAANSUhEUgAAABEAAAAMCAIAAAALR8HoAAABgElEQVQoFZWQzSuEURTG7z3n3Pt+

*[-- snip --]*

SaHPETExQ6HQ0BB4Z8FwTr/KHVc/AJ98jIf2BGdKAAAAAElFTkSuQmCC

--==Multipart_Boundary_x38e1b83d34375e183a2fdcd6a9c001f8x--

--==Multipart_Boundary_x38e1b83d34375e183a2fdcd6a9c001f8x
Content-Type: image/gif;
 name="image2.gif"
Content-Disposition: attachment;
 filename="image2.gif"
Content-Transfer-Encoding: base64

iVBORw0KGgoAAAANSUhEUgAAAKMAAAAyCAIAAAC/NPwxAAAAA3NCSVQICAjb4U/gAAAACXBIWXMA

*[-- snip --]*

yh4+kv39P/vticlfC0Muodov+5posktKGGb7/2pscsAoKykp2W8fTH4Exv1tEEbD3NNGwbi/y8do
mNnbKPwf2Oju7uv54J4AAAAASUVORK5CYII=

--==Multipart_Boundary_x38e1b83d34375e183a2fdcd6a9c001f8x-- 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-06T07:37:04.163

从记忆出发：

```
SaHPETExQ6HQ0BB4Z8FwTr/KHVc/AJ98jIf2BGdKAAAAAElFTkSuQmCC

--==Multipart_Boundary_x38e1b83d34375e183a2fdcd6a9c001f8x--
^^^ DELETE THIS LINE ^^^

--==Multipart_Boundary_x38e1b83d34375e183a2fdcd6a9c001f8x 
```

您不应该有两个相邻的边界，并且末尾的“--”仅用于**最后**一部分的末尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T09:54:30.230

如果您的目的没问题，您可以尝试使用[PHPMailer](http://phpmailer.codeworxtech.com/)（在[LGPL](http://en.wikipedia.org/wiki/GNU_Lesser_General_Public_License)下获得许可）。它非常易于使用，可以为您处理所有复杂的邮件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T07:31:30.713

整封邮件是否**`multipart/mixed`**按应有的方式声明？

```
$headers .= 'MIME-Version: 1.0'. "\n";
$headers .= "Content-Type: multipart/mixed; boundary=\"".$mime_boundary."\"". "\n"; 
```

# windows - 如何使远程协助尽可能轻松？

> ID：720467
> 
> 赞同：1
> 
> 时间：2009-04-06T07:22:36.070
> 
> 标签：windows

我需要通过 Internet 向我的应用程序的用户提供远程协助。我需要一个参考来执行此操作，并且我需要使整个连接到远程桌面的过程像为我的用户单击我的应用程序菜单一样简单。

我不希望他们过多地参与该程序。我相信 Windows XP 和 Vista 的内置远程协助功能都很好，我只需要让它变得非常简单。

有人有什么想法吗？

PS 对整个 Windows 远程协助的综合参考也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-09T19:11:04.837

我强烈推荐 Mikogo。它是免费的，安装和设置速度很快，效果很好，而且非常简单。我实际上更喜欢它而不是更昂贵的服务（30-40 美元/月），因为它很简单。唯一的问题是，我不确定他们是如何赚钱的，当你访问主页时，他们有一些广告，但很少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-07T03:44:36.493

有大量的工具可以做到这一点。您最好选择一种工具，该工具与需要帮助的人与帮助者有反向连接。这将确保您没有用户尝试配置防火墙/开放端口等[。Webex](http://www.webex.com/)是 Old Nick 的一个很好的推荐。另一种选择是[GotoAssist](http://www.gotoassist.com/)，还有[GotoMeeting](https://www2.gotomeeting.com/?Portal=www.gotomeeting.com)，它可以具有相同的远程控制功能，而且我相信更便宜。最重要的是确保它对您的用户来说尽可能简单，试图引导用户安装一个 active-x 控件可能已经够难了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-20T03:07:38.440

我用 CrossLoop 做那种事情

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-09T18:57:31.620

我建议尝试[LogMeIn](http://www.logmein.com)。这很好，因为一旦您让用户设置了客户端软件，您可以与他们安排时间让他们的 PC 无人看管，以便您可以远程查看并查看（可以选择禁用本地键盘/鼠标和监视器访问） . 您还可以连接以启用本地外围设备，并在它们复制问题时“在他们的肩膀上”观察。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T07:26:38.340

有许多商业工具确实使此操作毫不费力。我不会提及任何名字，因为这不是一个广告论坛。快速搜索应该会发现一些可能性；我用过很多比较流行的，都觉得很满意。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T07:49:39.267

我们的支持台通常使用运行良好的[WebEx](http://www.webex.com)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-09T19:02:31.203

当然还有 Fog Creek 的[Copilot](https://www.copilot.com/)。我自己从未使用过它，但它看起来很容易使用，也适用于非技术人员。

# asp.net-mvc - 是否可以在 ASP.NET MVC 中对某些 AddModelError 结果进行单元测试？

> ID：720471
> 
> 赞同：8
> 
> 时间：2009-04-06T07:25:35.720
> 
> 标签：asp.net-mvc, unit-testing, addmodelerror

我有一个控制器方法，它返回一个`RedirectToActionResult`（成功！）或一个`ViewResult`（失败并显示错误消息）。

如果*业务逻辑失败*，我将错误消息添加到`AddModelError`属性中。

有什么方法可以在我的 MS 单元测试中进行测试吗？我也有最小起订量，如果这也有帮助的话。（虽然我不相信这种情况需要最小起订量）..我没有使用`Request`对象中的任何东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-06T12:33:24.000

Yep, figured it out.

```
// Arrange.
// .. whatever ..

// Act.
var viewResult = controller.Create(new Post()) as ViewResult;

// Assert.
Assert.IsNotNull(viewResult);
Assert.IsNotNull(viewResult.ViewData.ModelState["subject"]);
Assert.IsNotNull(viewResult.ViewData.ModelState["subject"].Errors);
Assert.IsTrue(viewResult.ViewData.ModelState["subject"].Errors.Count == 1); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-03T05:43:13.217

您可以（也）直接测试控制器（不测试视图），如下所示：

```
// Arrange.
// .. 

// Act.
controller.Create(new Post());  // missing UserName will invalidate Model with "Please specify your name" message

// Assert
Assert.IsTrue(! controller.ModelState.IsValid);
Assert.IsTrue(  controller.ModelState["UserName"].Errors.Any( modelError => modelError.ErrorMessage == "Please specify your name")); 
```

# sql - SQL Transactions (b)locking Selects - 我的理解正确吗

> ID：720475
> 
> 赞同：2
> 
> 时间：2009-04-06T07:26:45.483
> 
> 标签：sql, sql-server, transactions, locking

我们正在使用 ADO.NET 连接到 SQL 2005 服务器，并在其中执行一些插入/更新和选择。我们将其中一个更新更改为在事务内部，但是当我们执行此操作时，它似乎 (b) 锁定了整个表，而不管我们在事务上设置的 IsolationLevel 是什么。

我似乎看到的行为是：

1.  如果您没有交易，那么这是一场全面的战斗（失败者被锁定）
2.  如果您有几笔交易，那么他们一直都赢，并阻止所有其他交易，除非
3.  如果您有一些事务并且您在其余事务上设置了诸如 nolock 之类的东西，那么您将获得事务并且没有任何阻塞。**这是因为每条语句（选择/插入/删除/更新）都有一个隔离级别，而与事务无关**。

它是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T08:10:26.080

您的问题的答案是：视情况而定。

如果要更新表，SQL Server 使用多种策略来决定要锁定多少行、行级锁定、页锁定或全表锁定。

如果您要更新超过一定百分比的表（我记得是可配置的），那么 SQL Server 会为您提供表级锁，这可能会阻止选择。

最好的参考是：

*   了解 SQL Server 中的锁定：http: [//msdn.microsoft.com/en-us/library/aa213039](http://msdn.microsoft.com/en-us/library/aa213039(SQL.80).aspx) (SQL.80).aspx（适用于 SQL Server 2000）
*   SQL Server 中的锁定简介：[http ://www.sqlteam.com/article/introduction-to-locking-in-sql-server](http://www.sqlteam.com/article/introduction-to-locking-in-sql-server)
*   数据库引擎中的隔离级别：http: [//msdn.microsoft.com/en-us/library/ms189122.aspx](http://msdn.microsoft.com/en-us/library/ms189122.aspx)（适用于 SQL Server 2008，但可以使用 2005 版本）。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T08:34:27.100

您的更新语句（即更改数据的语句）将持有锁，而不管隔离级别如何，以及您是否明确定义了非事务。

您可以通过使用[查询提示](http://msdn.microsoft.com/en-us/library/ms181714.aspx)来控制锁定的粒度。因此，如果更新锁定了整个表，那么您可以指定查询提示以仅锁定受影响的行（ROWLOCK 提示）。那是除非您的查询当然是更新整个表。

因此，要回答您的问题，请求资源锁的第一个连接将在事务期间持有这些锁。您可以通过使用未提交的读取隔离级别指定选择不持有锁，更改数据插入/更新/删除的语句始终持有锁。下一个请求锁定同一资源的连接将等到第一个连接完成，然后将持有它的锁。死锁是一种特殊情况，其中两个连接持有锁，每个连接都在等待另一个连接的资源，为了避免引擎永远等待，选择一个连接作为死锁牺牲品。

# .net - 在类初始化期间响应应用程序终止事件

> ID：720476
> 
> 赞同：0
> 
> 时间：2009-04-06T07:26:55.407
> 
> 标签：.net, vb.net, class-constructors

在启动我的应用程序时，我有几个类需要读取某些文件才能创建一组默认数据。

这样做的逻辑位置（对我来说）是在共享类构造函数中；如果读取默认文件失败，这个想法是抛出一个类级别的事件。不幸的是，这不起作用，因为试图访问这样的事件，为了将处理程序附加到它，在事件附加*之前*触发类构造函数。在失败的情况下，构造函数启动，触发失败事件，构造函数完成，然后在事件触发*后*附加事件处理程序。

我能想到的唯一其他解决方案是给类一个“typeInitialisedSuccessfully”布尔属性，并在*每个*调用周围放置一个 try/catch 块以构造类的实例，这对我来说似乎不必要地笨拙。

有人可以提出更优雅的解决方案吗？

编辑：因为这是一个基本类，在我们几乎所有的软件工具中都以一种或另一种形式使用，我非常希望有一个解决方案可以通知未来的程序员需要调用类型初始化程序，这就是我最初去的原因共享构造函数作为解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T07:30:59.297

我建议在你的类上有一个 Init （可以是静态的）方法。您将在应用程序启动时为每个要初始化的类运行此方法。在这种情况下，您可以将其包装在 try catch 中并采取相应措施。

重新编辑：通常在共享构造函数之类的地方抛出异常是个坏主意-您无法真正捕捉到它，很难预测何时调用 init 等。

如果您指定，我将添加要检查的 IsInitialized 字段，并在调用需要它的方法/属性时抛出异常。但它可能会变得乏味。

我会选择的另一个选择可能与您当前的架构相去甚远。在许多 IoC 工具中，他们使用 Startable （[Castle](http://www.castleproject.org/container/facilities/trunk/startable/index.html)，[autofac](http://code.google.com/p/autofac/wiki/Startable)）的概念 - 即您指定一个带有 start 方法的接口，IoC 将确保该方法在指定时间运行（最有可能在应用程序启动时）。您将在您的“开始”方法中进行错误处理，并使用所有详细信息冒泡任何包装的异常。我可以详细说明这一点，但我觉得这不是你真正想要的方式。

# asp.net-mvc - 网站管理工具不适用于 ASP.NET MVC

> ID：720481
> 
> 赞同：4
> 
> 时间：2009-04-06T07:28:20.723
> 
> 标签：asp.net-mvc, wsat

我刚开始使用 ASP.NET MVC，我正在尝试使用这种新架构进行身份验证。

所以，我开始关注官方网站上的教程，当我试图通过网站管理工具添加一些用户时，我发现了这个错误：

> 您选择的数据存储存在问题。这可能是由无效的服务器名称或凭据或权限不足引起的。这也可能是由于未启用角色管理器功能造成的。单击下面的按钮可重定向到您可以选择新数据存储的页面。
> 
> 以下消息可能有助于诊断问题：无法加载类型“MyMvcApp.MvcApplication”。

现在，我在 web.config 中唯一更改的是连接字符串，我确定连接字符串不是问题（与我在其他项目中使用的相同）。

**编辑**：这是连接字符串：`"Data Source=myMachine\SqlExpress;Initial Catalog=TestDB;User ID=TestUser;Password=123456"`

我尝试了几件事并用谷歌搜索了很多，但没有任何效果。

那么，有什么想法吗？正如我所说，除了连接字符串之外，我没有更改 web.config 中的任何内容。

提前致谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-06T17:53:46.383

发现问题：我只需要在启动 WSAT**之前****编译**解决方案。

 **感谢大家的回答。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T13:23:20.213

好吧，就像消息说的那样，此功能需要启用真正的管理，并且默认的 MVC 网站模板已禁用此功能。进入 Web.config 并更改：

```
<roleManager enabled="false"> 
```

到

```
<roleManager enabled="true"> 
```

要检查的另一件事：确保在创建 SQL Membership Provider 元数据时，您以在运行时有用的用户身份连接。换句话说，如果您以 sa 身份连接，则元数据将位于 dbo 模式中。但是，如果您以自己的身份连接，那么元数据将在您的模式中，这对其他应用程序不一定有用。您应该运行 SQL Server Management Studio 以验证元数据放置在哪个架构中。

# perl - 如何验证 Perl 中的数组（列表）中是否存在值？

> ID：720482
> 
> 赞同：21
> 
> 时间：2009-04-06T07:28:24.420
> 
> 标签：perl, arrays, list, find

我有一个可能值的列表：

```
@a = qw(foo bar baz); 
```

如何以简洁的方式检查值`$val`是否存在`@a`？

一个明显的实现是遍历列表，但我确信[TMTOWTDI](http://en.wikipedia.org/wiki/There_is_more_than_one_way_to_do_it)。

* * *

感谢所有回答的人！我想强调的三个答案是：

1.  公认的答案 - 最“内置”和向后兼容的方式。

2.  [RET 的答案](https://stackoverflow.com/questions/720482/how-to-verify-that-a-value-is-present-in-an-array-list-in-perl/720530#720530)是最干净的，但只适用于 Perl 5.10 及更高版本。

3.  [draegtun 的答案](https://stackoverflow.com/questions/720482/how-to-verify-that-a-value-is-present-in-an-array-list-in-perl/720812#720812)（可能）要快一些，但需要使用额外的模块。如果我可以避免它们，我不喜欢添加依赖项，在这种情况下不需要性能差异，但如果你有一个 1,000,000 元素列表，你可能想试试这个答案。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-04-06T07:50:13.087

如果您有 perl 5.10，请使用[智能匹配运算符](http://search.cpan.org/~rgarcia/perl-5.10.0/pod/perlsyn.pod#Smart_matching_in_detail)~~

`print "Exist\n" if $var ~~ @array;`

这几乎是魔术。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-04-06T07:46:27.497

Perl 在 grep() 函数中的bulit 就是为此而设计的。

```
@matches = grep( /^MyItem$/, @someArray ); 
```

或者您可以将任何表达式插入匹配器

```
@matches = grep( $_ == $val, @a ); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2009-04-06T12:50:51.117

这在[perlfaq4](http://faq.perl.org/perlfaq4.html)对[“如何判断某个元素是否包含在列表或数组中？”的回答中得到了回答。](http://faq.perl.org/perlfaq4.html#How_can_I_tell_wheth).

要搜索 perlfaq，您可以使用您喜欢的浏览器搜索[perlfaq中所有问题的列表。](http://faq.perl.org/)

在命令行中，您可以使用 -q 开关切换到 perldoc 来搜索关键字。您会通过搜索“列表”找到答案：

```
perldoc -q list 
```

* * *

（此答案的部分内容由 Anno Siegel 和 brian d foy 提供）

听到“in”这个词表明您可能应该使用散列而不是列表或数组来存储数据。哈希旨在快速有效地回答这个问题。数组不是。

话虽如此，有几种方法可以解决这个问题。在 Perl 5.10 及更高版本中，您可以使用智能匹配运算符来检查项目是否包含在数组或哈希中：

```
use 5.010;

if( $item ~~ @array )
    {
    say "The array contains $item"
    }

if( $item ~~ %hash )
    {
    say "The hash contains $item"
    } 
```

对于早期版本的 Perl，您必须做更多的工作。如果您要对任意字符串值多次进行此查询，最快的方法可能是反转原始数组并维护一个哈希，其键是第一个数组的值：

```
@blues = qw/azure cerulean teal turquoise lapis-lazuli/;
%is_blue = ();
for (@blues) { $is_blue{$_} = 1 } 
```

现在您可以检查是否 $is_blue{$some_color}. 首先将布鲁斯全部保存在哈希中可能是一个好主意。

如果这些值都是小整数，则可以使用简单的索引数组。这种数组将占用更少的空间：

```
@primes = (2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31);
@is_tiny_prime = ();
for (@primes) { $is_tiny_prime[$_] = 1 }
# or simply  @istiny_prime[@primes] = (1) x @primes; 
```

现在你检查 $is_tiny_prime[$some_number].

如果有问题的值是整数而不是字符串，则可以通过使用位字符串来节省大量空间：

```
@articles = ( 1..10, 150..2000, 2017 );
undef $read;
for (@articles) { vec($read,$_,1) = 1 } 
```

现在检查 vec($read,$n,1) 对于某些 $n 是否为真。

这些方法保证了快速的单独测试，但需要重新组织原始列表或数组。只有当您必须针对同一个数组测试多个值时，它们才会得到回报。

如果您只测试一次，标准模块 List::Util 为此首先导出该函数。一旦找到元素，它就会停止工作。为了速度，它是用 C 语言编写的，它的 Perl 等效程序如下所示：

```
sub first (&@) {
    my $code = shift;
    foreach (@_) {
        return $_ if &{$code}();
    }
    undef;
} 
```

如果速度无关紧要，常见的习惯用法在标量上下文中使用 grep（它返回通过其条件的项目数）来遍历整个列表。不过，这确实有利于告诉您它找到了多少匹配项。

```
my $is_there = grep $_ eq $whatever, @array; 
```

如果您想实际提取匹配元素，只需在列表上下文中使用 grep 即可。

```
my @matches = grep $_ eq $whatever, @array; 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-04-06T09:41:21.510

使用[List::Util中的](http://search.cpan.org/dist/Scalar-List-Utils/lib/List/Util.pm)*第一个*函数，它是 Perl 的标准......

```
use List::Util qw/first/;

my @a = qw(foo bar baz);
if ( first { $_ eq 'bar' } @a ) { say "Found bar!" } 
```

注意。*first*返回它找到的第一个元素，因此不必遍历完整列表（这是*grep*将要做的）。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-04-06T07:34:54.060

一种可能的方法是使用 List::MoreUtils 'any' 函数。

```
use List::MoreUtils qw/any/;

my @array = qw(foo bar baz);

print "Exist\n" if any {($_ eq "foo")} @array; 
```

**更新**：根据 zoul 的评论更正。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-04-06T07:37:29.873

有趣的解决方案，特别是对于重复搜索：

```
my %hash;
map { $hash{$_}++ } @a;
print $hash{$val}; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-06T08:26:00.927

```
$ perl -e '@a = qw(foo bar baz);$val="bar";
if (grep{$_ eq $val} @a) {
  print "found"
} else {
  print "not found"
}' 
```

成立

```
$val='baq'; 
```

未找到

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-07T19:11:56.933

`any`如果`first`您不喜欢不必要的依赖，请自行实施

```
sub first (&@) {
  my $code = shift;
  $code->() and return $_ foreach @_;
  undef
}

sub any (&@) {
  my $code = shift;
  $code->() and return 1 foreach @_;
  undef
} 
```

# html - 垂直对齐块级元素内的块级元素

> ID：720495
> 
> 赞同：2
> 
> 时间：2009-04-06T07:35:55.853
> 
> 标签：html, css, image-gallery

我需要在固定宽度和高度的块级元素内居中对齐图像（可变宽度和高度）。CSS 标记看起来像这样：

```
<div style="float: left; width: 100px; height: 100px;"><img src="yada" width="50" height="60"></div>
<div style="float: left; width: 100px; height: 100px;"><img src="yada" width="60" height="50"></div>
<div style="float: left; width: 100px; height: 100px;"><img src="yada" width="75" height="75"></div> 
```

关键是，图像将自身与容器 div 的右上角对齐。我希望它们水平和垂直居中。我尝试将 img 标签样式设置如下：

```
img {
display: block;
margin: auto;
} 
```

这使 img 水平居中对齐，但不是垂直居中。我需要两者，以便画廊页面看起来整齐对齐。我需要不惜一切代价避免使用表格，尽管这会产生我需要的结果。我需要一个可移植的、无 hack 的 CSS 解决方案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-06T11:17:22.857

是的，垂直边距的计算方式与水平边距完全不同；“自动”并不意味着居中。

在图像元素上设置 'vertical-align: middle' 有点效果，但它只会将它们相对于它们当前所在的[行框对齐。](http://www.w3.org/TR/CSS21/visuren.html#line-box)要使线框与浮动高度相同，请在容器上设置 'line-height'：

```
<style>
    div { float: left; width: 100px; height: 100px; line-height: 100px; }
    div img { vertical-align: middle; }
</style> 
```

您必须处于[标准模式](http://en.wikipedia.org/wiki/Quirks_mode)才能使其工作，否则浏览器会将图像单独呈现为块，而不是文本行框中的内联替换元素。

不幸的是，即使在标准模式下尝试，IE（至少最多 7 个）仍然保持块行为。这有一个技术原因，即 IE 是裤子。

为了让 IE 相信你真的认为图像是文本行的一部分，你必须在 div 中添加一些文本——即使是普通空间也可以，但你也可以尝试零宽度空间：

```
<div><img src="http://i.stackoverflow.com/Content/Img/stackoverflow-logo-250.png" width="50" height="60" />&#8203;</div>
<div><img src="http://i.stackoverflow.com/Content/Img/stackoverflow-logo-250.png" width="60" height="50" />&#8203;</div>
<div><img src="http://i.stackoverflow.com/Content/Img/stackoverflow-logo-250.png" width="75" height="75" />&#8203;</div> 
```

# java - 休眠条件：在没有映射关联的情况下加入表

> ID：720502
> 
> 赞同：75
> 
> 时间：2009-04-06T07:37:40.497
> 
> 标签：java, hibernate, hql, criteria

我想使用 Hibernate 的标准 api 来制定一个连接两个实体的特定查询。假设我有两个实体，宠物和所有者，所有者有很多宠物，但至关重要的是，该关联没有映射到 Java 注释或 xml 中。

使用 hql，我可以通过在查询中指定联接来选择拥有名为“fido”的宠物的所有者（而不是将一组宠物添加到所有者类中）。

可以使用休眠标准完成相同的操作吗？如果有怎么办？

谢谢，J

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2010-01-20T14:39:18.813

这确实可以通过以下标准实现：

```
DetachedCriteria ownerCriteria = DetachedCriteria.forClass(Owner.class);
ownerCriteria.setProjection(Property.forName("id"));
ownerCriteria.add(Restrictions.eq("ownername", "bob"));

Criteria criteria = getSession().createCriteria(Pet.class);
criteria.add(Property.forName("ownerId").in(ownerCriteria)); 
```

**更新**：这实际上执行子查询而不是连接，但它允许您在两个没有定义休眠关系的实体上使用标准。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2009-04-06T10:20:12.977

我的理解是，如果您使用 HQL 执行此操作，您将创建一个带有过滤器的笛卡尔连接，而不是内部连接。条件查询不支持这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-15T13:40:23.863

在 NHibernate 中，您可以使用定义为 DetachedCriteria 的子查询。不确定它在 Java 中是否相同，很可能是相同的：

```
DetachedCriteria pets = DetachedCriteria.For<Pet>("pet")
  .SetProjection(Projections.Property("pet.ownername"))
  .Add(/* some filters */ );

session.CreateCriteria(typeof(Owner))
  .Add(Subqueries.PropertyIn("name", pets); 
```

假设它是使用所有者的名称加入的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-20T20:13:57.193

```
Criterion ownerCriterion = Restrictions.sqlRestriction(SELECT ownerId FROM   Owner WHERE ownerName ='bob');
Criteria criteria = getSession().createCriteria(Pet.class);
criteria.createCriteria("ownerId").add(ownerCriterion); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-04-06T11:38:27.830

有一个`SQLCriterion`，你可以给任意`SQL`的，然后添加到你的`Criteria`. 在`SQL`字符串中，令牌 {alias} “将被根实体的别名替换。”

# performance - 用于分析低级架构效率低下的开源分析器？

> ID：720506
> 
> 赞同：1
> 
> 时间：2009-04-06T07:38:20.840
> 
> 标签：performance, caching, profiler

现代处理器使用各种技巧来弥合其处理元件的高速与外部存储器的延迟之间的差距。在性能关键型应用程序中，您构建代码的方式通常会对其效率产生相当大的影响。例如，使用[SLO](http://slo.sourceforge.net)分析器的研究人员能够修复缓存局部性问题，并将几个 SPEC2000 基准程序的执行速度提高一倍。我正在寻找一种开源工具的建议，该工具利用处理器的性能监控支持来定位和分析架构效率低下的问题，例如缓存未命中、分支错误预测、前端停止、地址别名造成的缓存污染、长延迟指令和 TLB 未命中. 我知道英特尔的[VTune](http://software.intel.com/en-us/intel-vtune/)（商业）、AMD 的[CodeAnalysist](http://developer.amd.com/CPU/CODEANALYST/Pages/default.aspx)（免费，但不是开源）和[Cachegrind](http://valgrind.org/info/tools.html#cachegrind)（依赖于模拟）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T07:47:51.097

对于 linux，[oprofile](http://oprofile.sourceforge.net)运行良好。实际上 AMD 的 CodeAnalysist 使用 oprofile 作为其后端。

Oprofile 使用处理器的内部性能调整机制来分析架构的低效率。

# c++ - 我如何估计 std::map 的内存使用情况？

> ID：720507
> 
> 赞同：45
> 
> 时间：2009-04-06T07:39:01.837
> 
> 标签：c++, memory, stl, stdmap

例如，我有一个已知 sizeof(A) 和 sizeof(B) 的 std::map，而 map 里面有 N 个条目。你如何估计它的内存使用量？我会说这就像

```
(sizeof(A) + sizeof(B)) * N * factor 
```

但因素是什么？也许不同的公式？

也许要求上限更容易？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-04-06T07:46:51.130

估计会更接近

```
(sizeof(A) + sizeof(B) + ELEMENT_OVERHEAD) * N + CONTAINER_OVERHEAD 
```

您添加的每个元素都有一个开销，并且还有一个固定的开销来维护用于存储映射的数据结构的数据结构。这通常是二叉树，例如[红黑树](http://en.wikipedia.org/wiki/Red_Black_Tree)。例如，在 GCC C++ STL 实现`ELEMENT_OVERHEAD`中将会是`sizeof(_Rb_tree_node_base)`并且`CONTAINER_OVERHEAD`将会是`sizeof(_Rb_tree)`. 在上图中，您还应该添加用于存储地图元素的内存管理结构的开销。

通过测量各种大型集合的代码内存消耗可能更容易得出估计值。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-04-06T09:21:57.173

您可以使用Curtis Bartley 的[MemTrack](http://www.almostinfinite.com/memtrack.html)。它是一种内存分配器，可以替换默认分配器，并且可以跟踪内存使用情况到分配类型。

输出示例：

```
-----------------------
Memory Usage Statistics
-----------------------

allocated type                        blocks          bytes  
--------------                        ------          -----  
struct FHRDocPath::IndexedRec          11031  13.7% 2756600  45.8%
class FHRDocPath                       10734  13.3%  772848  12.8%
class FHRDocElemPropLst                13132  16.3%  420224   7.0%
struct FHRDocVDict::IndexedRec          3595   4.5%  370336   6.2%
struct FHRDocMDict::IndexedRec         13368  16.6%  208200   3.5%
class FHRDocObject *                      36   0.0%  172836   2.9%
struct FHRDocData::IndexedRec            890   1.1%  159880   2.7%
struct FHRDocLineTable::IndexedRec       408   0.5%  152824   2.5%
struct FHRDocMList::IndexedRec          2656   3.3%  119168   2.0%
class FHRDocMList                       1964   2.4%   62848   1.0%
class FHRDocVMpObj                      2096   2.6%   58688   1.0%
class FHRDocProcessColor                1259   1.6%   50360   0.8%
struct FHRDocTextBlok::IndexedRec        680   0.8%   48756   0.8%
class FHRDocUString                     1800   2.2%   43200   0.7%
class FHRDocGroup                        684   0.8%   41040   0.7%
class FHRDocObject * (__cdecl*)(void)     36   0.0%   39928   0.7%
class FHRDocXform                        516   0.6%   35088   0.6%
class FHRDocTextColumn                   403   0.5%   33852   0.6%
class FHRDocTString                      407   0.5%   29304   0.5%
struct FHRDocUString::IndexedRec        1800   2.2%   27904   0.5% 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2009-04-06T07:51:42.523

如果您真的想知道运行时内存占用情况，请使用自定义分配器并在创建映射时将其传入。请参阅 Josuttis 的书和他的[这一](http://www.josuttis.com/libbook/memory/myalloc.hpp.html)页（对于自定义分配器）。

> 也许要求上限更容易？

上限将取决于确切的实现（例如使用的平衡树的特定变体）。也许，您可以告诉我们您为什么需要这些信息，以便我们提供更好的帮助？

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-09-03T18:42:17.763

我最近需要自己回答这个问题，并简单地使用我在 MSVC 2012 下以 64 位模式编译的 std::map 编写了一个小型基准程序。

一个有 1.5 亿个节点的 map 占用了 ~ 15GB，这意味着 8 byte L、8 byte R、8 byte int key 和 8 byte datum，总共 32 个字节，**为内部节点占用了 map 内存的大约 2/3，留下1/3的叶子。**

就个人而言，我发现这是非常糟糕的内存效率，但事实就是如此。

希望这可以成为一个方便的经验法则。

PS：std::map 的开销是单个节点大小 AFAICT 的开销。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T07:53:43.360

公式更像：

```
(sizeof(A) + sizeof(B) + factor) * N 
```

其中 factor 是每个条目的开销。C++ 映射通常实现为红黑树。这些是二叉树，因此左/右节点至少有两个指针。还会有一些实现的东西——可能是一个父指针和一个“颜色”指示器，所以因素可能是这样的

```
(sizeof( RBNode *) * 3 + 1) / 2 
```

然而，所有这些都高度依赖于实现——要确定你真的需要检查你自己的库实现的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-31T12:30:48.597

我也在寻找一些东西来计算`std::map`. 我已经尝试了[Diomidis Spinellis](https://stackoverflow.com/a/720520/5735010)的答案中解释的内容，并在此处扩展了他的答案，这可能对其他人有所帮助。

我通过添加几行代码来扩展他的答案。

```
#include <bits/stl_tree.h>
int main(int argc, char *argv[])
{
    std::cout << sizeof(std::_Rb_tree_node_base) << std::endl;
    return 0;
} 
```

输出（在我的 ARM Cortex A-9 iMX6Solo-X 处理器上运行 Linux [4.9.175] 和编译器：）`arm-fslc-linux-gnueabi-gcc (GCC) 7.3.0`：

```
16 
```

考虑到`std::map<A, B>`，我对 的大小感兴趣，`ELEMENT_OVERHEAD`因为它随着地图中存在的元素数量线性增长。ELEMENT_OVERHEAD 被发现等同于`sizeof(std::_Rb_tree_node_base)`as 因此我的系统的值为 16。

```
(sizeof(A) + sizeof(B) + ELEMENT_OVERHEAD) * N + CONTAINER_OVERHEAD 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2009-04-06T07:44:56.237

地图的大小实际上取决于地图的实现。您可能在不同的编译器/平台上有不同的大小，具体取决于它们提供的 STL 实现。

为什么需要这个尺寸？

# sql-server-2008 - Sql Server 2008 中的死锁故障排除

> ID：720508
> 
> 赞同：16
> 
> 时间：2009-04-06T07:39:14.300
> 
> 标签：sql-server-2008, deadlock

我的网站似乎无法处理大量访问者，我相信这是因为服务器太简单了。

2 小时前，我的网站获得了很多点击，我注意到发生了 3 个死锁错误，错误是：

> System.Data.SqlClient.SqlException ：事务（进程 ID 58）在锁定资源上与另一个进程死锁，并已被选为死锁受害者。重新运行事务。

我不确定为什么会发生这种情况......查看堆栈跟踪，我可以看到这是通过选择查询发生的。

任何人都知道这个错误的原因可能是什么？

服务器运行的是 Windows 2008 和 Sql Server 2008。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-29T17:17:46.467

SQL Server 2008 有多种方法来识别死锁中涉及的进程和查询。

1.  如果死锁很容易重现，频率更高，并且您可以使用 SQL Profiler 对 SQL 服务器进行分析（启用分析器后，您会在服务器上获得访问和性能成本），这将为您提供很好的死锁图形视图。此页面包含使用死锁图所需的所有信息 [http://sqlmag.com/database-performance-tuning/gathering-deadlock-information-deadlock-graph](http://sqlmag.com/database-performance-tuning/gathering-deadlock-information-deadlock-graph)

2.  大多数情况下，重现死锁很困难，或者它们发生在我们不想将 Profiler 附加到它并影响性能的生产环境中。

我将使用此查询来发生死锁：

```
SELECT
  xed.value('@timestamp', 'datetime') as Creation_Date,
  xed.query('.') AS Extend_Event
FROM
(
  SELECT CAST([target_data] AS XML) AS Target_Data
  FROM sys.dm_xe_session_targets AS xt
  INNER JOIN sys.dm_xe_sessions AS xs
  ON xs.address = xt.event_session_address
  WHERE xs.name = N'system_health'
  AND xt.target_name = N'ring_buffer'
) AS XML_Data
CROSS APPLY Target_Data.nodes('RingBufferTarget/event[@name="xml_deadlock_report"]') AS XEventData(xed)
ORDER BY Creation_Date DESC 
```

我不会使用 (NOLOCK) 来修复死锁。那是滑坡，隐藏了最初的问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-06T07:47:25.030

写入将阻止 SQL Server 上的读取，除非您启用了行版本控制。您应该使用`sp_who2`存储过程和 SQL Profiler 跟踪。 `sp_who2`会告诉你哪些进程阻塞了哪个进程，分析器会告诉你阻塞进程的最后一条语句是什么。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2009-04-06T09:13:23.077

如果您不介意脏读，您可以尝试在 SELECT 查询中将 (NOLOCK) 放在表名之后。这里的权衡是，您不能保证最新数据，因为当前执行的 UPDATE 和 INSERT 语句被忽略。

通常这并没有太大的影响，因为大多数系统读取的内容远远超过更新/插入的内容，但显然这取决于您的应用程序的性质。

或者看看[http://www.sql-server-performance.com/tips/deadlocks_p1.aspx](http://www.sql-server-performance.com/tips/deadlocks_p1.aspx)

# sharepoint - SharePoint MOSS 备用访问映射

> ID：720511
> 
> 赞同：2
> 
> 时间：2009-04-06T07:43:17.597
> 
> 标签：sharepoint, moss, alternate-access-mappings

在 SharePoint MOSS 中，我有一个位于[http://ourintranet/](http://ourintranet/)的站点，现在我已经为指向该站点的域[http://www.mydomain.com](http://www.mydomain.com)的备用访问映射添加了一个新条目。当我现在输入这个时，我被重定向到[http://ourintranet/](http://ourintranet/)并且可见的 url 发生了变化。

有没有办法让这个工作在域中保持为[http://www.mydomain.com](http://www.mydomain.com)？

祝一切顺利

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T07:55:49.067

是的，您需要扩展 Web 应用程序[@http://ourintranet](http://ourintranet)并将 www.mydomain.com 指定为主机标头。这将创建一个响应指定主机头的新 IIS 网站。扩展 Web 应用程序还需要您选择应用扩展的区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T07:53:16.403

你把它添加为哪个区域？如果你把它放在外联网区域它应该工作吗？

# c# - 对比 C# 泛型与 Haskell 参数化类型

> ID：720517
> 
> 赞同：21
> 
> 时间：2009-04-06T07:45:32.380
> 
> 标签：c#, generics, haskell, polymorphism, type-systems

根据我在 StackOverflow 上找到的一些建议，我正在研究 Haskell。我很高兴看到 Haskell 的参数化类型的行为与 C# 泛型非常相似。两种语言都建议使用单个字母作为类型参数（通常），并且两种语言似乎都遵循类似的过程来用实际类型替换类型参数。因此，我很快就理解了这个概念。

这导致了这一点：Haskell 的参数化类型与 C# 泛型类型有哪些不同？我从学习 Ruby 中知道，如果你认为从一种语言熟悉的概念在你刚接触的另一种语言中是相同的，你可能会遇到很大的麻烦。通常，当功能实际上非常相似时，问题会更糟*……*因为它们通常*不是*100% 相同的。那么，如果我假设我根据我对 C# 泛型的了解理解了参数化类型，那么我可能会被哪些“陷阱”所困扰？

谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-04-06T08:17:09.810

这是要记住的一个区别：

C# 有子类型，但 Haskell 没有，这意味着，一方面，您只需查看 Haskell 类型即可*了解更多内容。*

```
id :: a -> a 
```

这个 Haskell 函数接受一个类型的值并返回相同类型的相同值。如果你给它 a `Bool`，它会返回 a `Bool`。给它一个`Int`，它会返回一个`Int`。给它一个`Person`，它会返回一个`Person`。

在 C# 中，你不能这么确定。这就是 C# 中的“函数”：

```
public T Id<T>(T x); 
```

现在，由于子类型化，您可以这样称呼它：

```
var pers = Id<Person>(new Student()); 
```

虽然`pers`是 type `Person`，但`Id`函数的参数不是。事实上`pers`，它可能有一个更具体的类型，而不仅仅是`Person`. `Person`甚至可以是抽象类型，保证`pers`将具有更具体的类型。

如您所见，即使使用像`id`.NET 类型系统这样简单的功能，也已经比 .NET 中更严格的类型系统提供了更多的功能`Haskell`。虽然这对于做一些编程工作可能很有用，但它也使得仅仅通过查看事物的类型来推理程序变得更加困难（这在 Haskell 中很有趣）。

* * *

第二件事是，Haskell 中通过一种称为“类型类”的机制存在*临时多态性（也称为重载）。*

```
equals :: Eq a => a -> a -> Bool 
```

此函数检查两个值是否相等。但不仅仅是任何两个值，只是具有`Eq`类实例的值。这有点像 C# 中类型参数的约束：

```
public bool Equals<T>(T x, T y) where T : IComparable 
```

但是，有区别。一方面，子类型化：你可以用它实例化它并用它`Person`调用它。`Student``Teacher`

但是这也有不同之处。C# 代码几乎完全按照它的类型编译。类型检查器确保参数实现正确的接口，并且比你好。

而 Haskell 代码符合如下内容：

```
equals :: EqDict -> a -> a -> Bool 
```

该函数有一个*额外的参数*，一个包含所有它需要做的`Eq`事情的函数的字典。以下是如何使用这个函数，以及它编译成的内容：

```
b1 = equals 2 4          --> b1 = equals intEqFunctions 2 4
b2 = equals True False   --> b2 = equals boolEqFunctions True False 
```

这也显示了是什么让子类型化如此痛苦，如果可能的话，想象一下。

```
b3 = equals someStudent someTeacher
     --> b3 = equals personEqFunctions someStudent someTeacher 
```

字典应该如何`personEqFunctions`确定 a`Student`是否等于 a `Teacher`？他们甚至没有相同的字段。

简而言之，虽然 Haskell 类型约束乍一看可能看起来像 .NET 类型约束，但它们的实现方式完全不同，并且编译成两个完全不同的东西。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-04-07T06:01:19.800

我们现在也可以用 Haskell 类型的类做其他事情。在 Haskell 中搜索“泛型”开辟了更高级别的多态泛型编程的整个领域，超出了大多数人认为的“泛型”的标准参数多态。

例如，GHC 最近获得了类型族，支持各种有趣的类型编程功能。一个非常简单的例子是任意多态容器的每种类型的数据表示决策。

我可以为说，列表，

```
class Listy a where

    data List a 
             -- this allows me to write a specific representation type for every particular 'a' I might store!

    empty   :: List a
    cons    :: a -> List a -> List a
    head    :: List a -> a
    tail    :: List a -> List a 
```

我可以编写对任何实例化 List 进行操作的函数：

```
map :: (Listy a, Listy b) => (a -> b) -> List a -> List b
map f as = go as
  where
    go xs
        | null xs   = empty
        | otherwise = f (head xs) `cons` go (tail xs) 
```

然而，我们从未给出特定的表示类型。

现在这是一个通用列表的类。我可以根据元素类型给出特别巧妙的表示。因此，例如对于 Int 列表，我可能会使用一个数组：

```
instance Listy Int where

data List Int = UArray Int Int

... 
```

所以你可以开始做一些非常强大的泛型编程。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-06-16T11:23:00.170

另一个很大的区别是 C# 泛型不允许对类型构造函数（即 * 以外的种类）进行抽象，而 Haskell 允许。尝试将以下数据类型转换为 C# 类：

```
newtype Fix f = In { out :: f (Fix f) } 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-06-15T15:02:51.907

为了跟进，“您可能会遇到大麻烦，认为您从一种语言熟悉的概念在另一种语言中是相同的[您是新手]”这个问题的一部分：

这是您在使用 Haskell 类型类时需要了解的关键区别（例如，Ruby）。给定一个函数，例如

```
add :: Num a => a -> a -> a
add x y = x + y 
```

这并不*意味着*和`x`都是`y`任何类型的类`Num`。这意味着`x`和`y`是完全相同的类型，哪个类型属于 class `Num`。“嗯，你当然会说；*a 和 a**是*一回事。” 我也是这么说的，但是我花了好几个月才停止认为如果`x`是一个`Int`并且`y`是一个`Integer`，这就像在 Ruby 中添加一个`Fixnum`和一样。`Bignum`相当：

```
*Main> 添加 (2::Int) (3::Integer)

<交互式>:1:14:
    无法将预期类型“Int”与推断类型“Integer”匹配
    在`add'的第二个参数中，即`(3 :: Integer)'
    在表达式中：add (2 :: Int) (3 :: Integer)
    在 `it' 的定义中：it = add (2 :: Int) (3 :: Integer)

```

换句话说，子类化（尽管这两个`Num`实例当然也是 的实例`Eq`）和鸭子类型已经消失了，宝贝。

这听起来很简单明了，但需要相当长的时间来训练自己本能地理解这一点，而不仅仅是智力上的理解，至少如果您来自 Java 和 Ruby 多年。

不，一旦我掌握了这个窍门，我就不会错过子类化了。（嗯，也许偶尔会有点，但我得到的比失去的多得多。当我真的想念它时，我可以尝试滥用存在类型。）

# cocoa - 使 NSRect 可选

> ID：720522
> 
> 赞同：0
> 
> 时间：2009-04-06T07:47:10.333
> 
> 标签：cocoa, select

有没有一种简单的方法可以在 Cocoa 中创建一个可选择的 NSRect？需要一个可以选择并在鼠标单击后保持选中状态的矩形。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T07:54:08.570

NSRect 只是一个具有位置和大小的结构。它不是一个实际上可以*做*任何事情或具有除宽度和高度之外的任何属性的对象。听起来您想要的是创建一个可以选择的 NSView 。（这里是[苹果](http://developer.apple.com/DOCUMENTATION/Cocoa/Conceptual/CocoaViewsGuide/Introduction/Introduction.html)关于这个主题的指南。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T08:13:17.337

虽然不像您希望的那样直接，但您可能对按[`NSView`](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html)类执行的跟踪矩形和跟踪区域的管理感兴趣。

此机制允许您定义自定义视图的特定区域。然后，每当光标进入或离开该区域或在该区域按下鼠标按钮时都会生成一个事件（`-mouseEntered:`, `-mouseExited:`, `-mouseDown:`, `-mouseUp:`, `-mouseDragged:`, ...[`NSResponder`](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html)类）。这取决于您定义您希望您的应用程序对这些事件执行的操作（将矩形设置为选中并相应地显示它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T19:21:26.950

有关此示例的实现，请查看 Apple 开发人员工具中包含的 Sketch 示例（查看 /Developer/Examples/AppKit）。Sketch 允许用户创建新图形（包括矩形，也包括椭圆、线条和文本）、选择它们、在文档中移动它们等。特别是，您可能希望查看 SKTGraphic 类，它代表文档中的单个图形对象，以及 SKTGraphicView 类，它是执行实际布局和绘图的 NSView 子类，处理鼠标事件以拖动视图等。

# iphone - 如何在 OpenGL ES 中生成 mipmap 图像？

> ID：720529
> 
> 赞同：7
> 
> 时间：2009-04-06T07:50:07.817
> 
> 标签：iphone, opengl-es

`gluBuild2DMipmaps()`iPhone上的OpenGL ES中的等效功能是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-06T09:21:54.070

glGenerateMipmapOES(GL_TEXTURE_2D);

文档 [http://www.khronos.org/opengles/sdk/docs/man/glGenerateMipmap.xml](http://www.khronos.org/opengles/sdk/docs/man/glGenerateMipmap.xml)

# visual-studio-2008 - Visual Studio 2008 双重编译

> ID：720535
> 
> 赞同：1
> 
> 时间：2009-04-06T07:51:56.297
> 
> 标签：visual-studio-2008

我有一个要为 2.0 和 3.5 编译的项目，在 vs 2008 中有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T07:58:02.693

是的。您可以使用条件引用和类似的东西。[Marc Gravell 为MiscUtil](http://pobox.com/~skeet/csharp/miscutil)项目设置了这个- 了解如何做到这一点的最佳方法可能是下载源代码并查看。我们使用 C# 3.0 功能，因此它仅与 Visual Studio 2008 兼容，但我们有 .NET 2.0 和 .NET 3.5 的构建配置，因此只需更改当前构建以检查一切是否仍然有效。（当然，发布脚本构建了这两个版本。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T07:57:29.247

为 2.0 编译的代码将在 3.5 下运行。如果您没有使用 3.5 的任何新功能（并且您没有使用，否则您无法编译到 2.0），那么就没有迫切的理由来针对它进行编译。

# .net - 开源组织和 MVC CMS 项目的名称建议

> ID：720555
> 
> 赞同：0
> 
> 时间：2009-04-06T08:02:46.553
> 
> 标签：.net, model-view-controller, open-source, naming

大家好，我们中的一些人在开发开源产品时正在寻找一个可以合作的名称。第一个将是一个 MVC CMS，它被设计为尽可能可用（没有管理系统，所有编辑都内联完成）。

所以你能帮我们命名这两个吗：

*   开源组织 - 主要处理 .net 和 mvc 解决方案
*   MVC CMS - 高度可用且直观

感谢我们的努力到目前为止都失败了。我们甚至可以给获胜者一个奖品。

更新：我们为我们的组织选择了 OpenQuarters，为我们的 CMS 选择了 WebQuarters，更多信息请访问：[http ://www.openquarters.org](http://www.openquarters.org)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T00:24:49.663

ModelViewContent - 不用大惊小怪，只需编辑内联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T08:05:25.983

*   开放MVC

*   crudMVC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T08:11:04.550

freeMVC 开放网络

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T08:23:19.483

开源组织：PeopleFlow。因为它始终与人、工作流程和[流程](http://en.wikipedia.org/wiki/Flow_(psychology))有关（“可用且直观”）

MVC CMS：PeopleFlow Web 总部 (HQ)：Web 总部 (HQ)，因为 CMS 技术性太强，而且您需要一个涵盖 CMS 的所有功能和业务方面的概念。您需要 PeopleFlow，因为 Web HQ 过于通用，而且它是更好的品牌。

# xml - 如何使用 XML DOM API 去每个非文本节点？

> ID：720558
> 
> 赞同：3
> 
> 时间：2009-04-06T08:04:19.777
> 
> 标签：xml, dom

我是 XML 和 DOM 的新手。我想我需要使用 DOM API 来查找每个非文本节点一次，并输出节点名称。

假设我从 W3C 获得了这个示例 XML

```
<bookstore>

<book category="cooking">
 <title lang="en">Everyday Italian</title>
 <author>Giada De Laurentiis</author>
 <year>2005</year>
 <price>30.00</price>
 <page pagenumber="550"/>
</book>

<book category="children">
 <title lang="en">Harry Potter</title>
 <author>J K. Rowling</author>
 <year>2005</year>
 <price>29.99</price>
 <page pagenumber="500"/>
</book>
</bookstore> 
```

我需要找到节点，例如`<page pagenumber="500" />`哪个是非文本节点

我怎样才能做到这一点？seduo-code 也可以。谢谢

我能说......么

```
 while (x.nodeValue == NULL) {
   read the next node ?
} 
```

我想我应该让自己清楚，不要假设任何文件。只要存在非文本节点，这应该适用于所有 XML。我想这应该按照每个节点从上到下和从左到右的顺序完成。:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T08:43:26.080

XPATH ="//*[not(text())]"
将选择所有非文本节点的节点。
在给定的示例中：**bookstore**和**book**也是非文本节点，因为它们没有自己的任何文本，尽管它们的子节点确实有文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T08:35:05.460

您的问题基本上似乎是：**给定一个 XML 文档，我如何找到没有任何文本内容的子节点。**

一个简单的 XPath 表达式，例如：

```
/bookstore/book/*[count(child::text()) = 0] 
```

或者

```
/bookstore/book/*[not(text())] 
```

会为你做的。在示例文档上应用这个 XPath 表达式将返回一个包含这两个`page`元素的节点集。如您所见，您不必事先知道页面元素的*名称*，甚至不必知道该元素所有可能的子元素的名称。`book`

*解释一下：*您需要查询不包含任何文本子节点的 book 元素的子节点。child::* 轴表示当前节点的所有子节点，text() 节点类型将处理的节点类型限制为包含文本内容的节点类型。

**编辑：请注意，如果您想查询***任何*XML 文档中的非文本节点（根据您对问题的最新编辑），您应该选择**nils_gate**提供的答案。我的回答是在您进行编辑之前给出的，并说明了这个概念，而不是提供一个通用的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T08:09:10.967

您对需要查找的节点了解多少？如果您确切知道它是：

*   一个`page`元素
*   它有一个`pagenumber`值为 500 的属性

那么 XPath 是前进的方向（假设它在您的平台上可用 - 您没有指定超出“DOM”；据我所知，大多数 DOM 实现都包括 XPath）。

在这种情况下，您将使用以下 XPath：

```
//page[@pagenumber='500'] 
```

如果您不能使用 XPath，请说明您使用的是哪个 DOM API，我们可以尝试提出最佳解决方案。基本上，您可能最终会遍历每个元素节点，检查其名称是否为`page`，然后检查它是否具有适当的`pagenumber`属性值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T08:13:00.287

看起来您将需要一个 XPath。W3 Schools 站点有[一个很好的参考](http://www.w3schools.com/xpath/xpath_syntax.asp)，但是，假设节点总是出现在节点下，XPath`/bookstore/book/page`将返回一个节点集，其中包含每个节点。`/bookstore/book/page[@pagenumber='500']`将获取 pagenumber 属性值为 500 的每个节点。

该`//`语法将在文档中的任何位置找到节点，而无需担心结构 - 这可能更容易但速度较慢，尤其是对于大型文档。如果您有一个已知结构的文档，最好使用显式 XPath。

# c# - 我如何通过 WebService 运行任何 .exe 文件

> ID：720565
> 
> 赞同：0
> 
> 时间：2009-04-06T08:07:06.620
> 
> 标签：c#

如何通过我构建的 WebService 运行任何 .exe 文件？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T08:08:34.963

看一下[System.Diagnostics.Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T08:11:31.040

你可以试试这个。

```
using System.Diagnostics;

class Program
{
    static void Main()
    {
        Process.Start("example.exe");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T08:58:56.200

我认为您希望能够将 exe 文件发送到您的网络服务，然后执行？

我建议遵循以下顺序。

1.  接收文件并将其写入临时目录。
    *   （可选）使用防病毒扫描程序扫描文件。（取决于您的 Web 服务的信任级别）
    *   使用 Process.Start 启动临时文件并等待它停止运行（也许提供一个参数等待退出）
    *   删除临时文件。
    *   报告执行结果（如果是控制台应用程序，您甚至可以报告应用程序打印的文本）。

# graphics - 程序员的 3D 建模

> ID：720578
> 
> 赞同：31
> 
> 时间：2009-04-06T08:16:16.160
> 
> 标签：graphics, 3d, openscenegraph

我正在学习计算机图形学作为我大学课程的一部分。该课程侧重于场景建模，而不是渲染或计算机图形的其他方面。我们正在学习它背后的数学和 OpenSceneGraph 来实际运行一些东西。

作为硬件的一部分，也出于纯粹的兴趣，我需要创建一个 3D 模型，在这方面我有艺术自由。我也可以自由地直接在代码中对其进行建模，或者在我选择的工具中加载我所做的模型。

问题是，我不擅长视觉艺术——我有很多好主意，但不知道如何为它们建模。我也不能很好地画画或素描。但是，我**希望**能够做CG。

你会建议我如何处理 3D 建模？

谢谢，
阿萨夫

**编辑：**有些人对此投了反对票（不发表评论）。让我强调一下——我是一名程序员，我想熟悉一门与我们相邻的艺术。毫无疑问，这是一个与编程相关的问题。

**编辑2：**感谢所有回答的人。在查看您建议的替代方案后，我将选择我接受的答案。对于（预期的）延迟，我深表歉意。

**结论：**

*   我决定研究 Blender。我正在研究Ruben Steins 提到的一些[视频教程。](http://www.blender.org/education-help/video-tutorials/)
    谢谢*鲁本*。
*   我确实快速浏览了[MilkShape 3D](http://chumbalum.swissquake.ch/)，如果我发现 Blender 无法满足我的需求，或者我目前的学习“预算”（时间、注意力），我会使用它。
    谢谢*m3rLinEz*。
*   在我学习了一些基本技能之后，我打算听从*Mastermind*的建议。
    谢谢*主谋*。
*   当我完成一些 3D 艺术，并准备好提高我的技能时，我会去参观那些地方*。*已张贴。
    也谢谢你，*fa。*

感谢所有花时间回复的人，以及所有思想开明的人，他们不会对编程（而不是代码）相关问题投反对票。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-06T08:26:03.830

1.  下载[搅拌机](http://www.blender.org)
2.  查看[视频教程](http://www.blender.org/education-help/video-tutorials/)或[阅读此在线教程](http://www.gryllus.net/Blender/3D.html)
3.  使用[Blender 的 osgExport](http://projects.blender.org/projects/osgexport/)将模型导入 OSG

如果你想要一个非常酷的模型，这个过程需要一些时间，但你应该能够在一周左右的时间内得到一个快速模型。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-06T08:42:09.233

不幸的是，人们真的在这个网站上投票反对与设计相关的问题，我不知道是什么原因。所以我投票给你。

设计是一件非常重要的事情，我只能为那些希望将自己封闭在代码中而没有为风格和美感留下任何空间的人感到遗憾。

我绝对可以向您推荐 3ds max。它（或至少在几年前）附带了非常好的教程，因此您可以学习如何移动事物。

一般建议是访问与 2D 和 3D 设计相关的页面，但这太抽象了。所以我有以下建议。想想你想设计什么。首先 - 什么。然后试着去做。在此过程中，您将对如何实现特定效果提出具体问题。您将向他们询问相关资源或自己挖掘答案。随着时间的推移，您将获得技能知识，并且至少几个月后，您可能/希望对如何做这些事情产生一种感觉，什么是好的，什么不是。

关于艺术和设计的一切都需要时间。很多时间。和很大的热情。

祝你好运！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-06T08:44:14.253

我推荐[Google Sketchup](http://sketchup.google.com)和[MilkShape 3D](http://chumbalum.swissquake.ch/)（商业，但这种软件的价格非常低）。我之前也有使用过 Blender 的经验，我认为这是我建议的三个 SW 中最难学习的。

您需要考虑的另一个问题是从建模软件导出的数据格式。由于您提到要自己进行“数学运算”，因此您必须找到一个可以导出格式的建模工具，您可以在其中轻松访问顶点数据。

Google Sketchup 和 Milkshape 3D 都带有很好的文档（当然，Blender 也一样）。Sketup 甚至在他们的网站上有视频教程，而 Milkshape 3D 让我可以在很短的时间内为一个简单的机器人建模。但是，如果您想要比这些工具更高级的建模功能，则可能不适合您。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-12-25T11:28:15.883

我发现 Wing3d 是最容易使用的。BLender 的功能最多。

有趣的是Albatross 3D。它也很简单，但 Wing3d 最容易使用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-06T09:05:02.533

3D 建模是一件很难的事情，不要让它不知所措。相反，您应该让更合适的人进行建模。有大量的模型是免费的。在花费数小时和数天时间寻找一只糟糕的恐龙之前，先搜索并使用它们。即使你建模它，你也需要实现场景、骨骼、材质等。如果你更喜欢编程，试着让它绕过障碍物会更有趣。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-06T08:48:21.543

您使用“Poser”获得复杂的模型（主要是人类），而“不知道”它是如何工作的。如果您想深入了解整个建模，我推荐“Maya”。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-06T08:58:31.940

首先，您应该看看一些不同的 3D 程序，如果您还没有的话。在您喜欢您选择的程序后，您将不得不习惯它，并尝试了解每个热键的作用、按钮、材料等。这本身可能是它的一个复杂而烦人的方面。

很多人会推荐两者之一的程序；好，行业标准，或者他们喜欢的东西。如果这不专业，我建议你看看你最喜欢哪一个，它会帮助你更快地学习它。

在你选择了你的程序之后，你应该找到教程，视频往往会有所帮助，因为你实际上可以看到他们正在做的一切。

过了一段时间，有了一点时间和耐心，你应该开始能够制作一些看起来不错的模型，但伟大的模型需要时间。所以不要气馁！

这有点像编程方式，你可能一晚上都没有学会编程，我还在学习 3D 的东西，我没有意识到我可以做的新东西，就像编程一样。

如果你不知道如何编程，你很可能会用谷歌搜索它（甚至询问堆栈溢出）对吗？所以对 CG 的东西也一样。如果你想学习如何做水模拟，谷歌它！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-06T09:10:27.513

艺术技能并不是每个人都被授予的，但你可以在这些地方学到很多东西：

[概念艺术](http://www.conceptart.org/)

[CGTalk](http://forums.cgsociety.org/)

[CafeSalé](http://www.cfsl.net/forum/viewforum.php?f=44)（法语）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-06T08:29:16.300

我会得到一种流行的 3D 建模工具，下载一些示例并开始修改它们。

3D 建模工具领域的大牌包括 3D Studio Max、Maya、Blender、Lightwave 和 Modo。其中一些可能很昂贵。[搅拌机](http://www.blender.org/)是免费的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-06-18T23:36:51.817

Blender 是一个不错的（免费）选项，但对于您的要求来说它有点过分了，因为它是一个完整的动画包，而不仅仅是一个建模器。换句话说，还有很多其他的废话阻碍了学习如何建模。

到目前为止，最好的 3D 建模器 IMO（用于中低密度的多聚体，即电脑游戏，而不是电影）是 Silo ( [http://www.nevercenter.com/](http://www.nevercenter.com/) )。多年来，我一直在使用 Maya、3dsmax、Softimage XSI、Blender、Modo、blah、blah，并且无论使用何种动画平台，我都会始终使用 Silo 进行建模。除了非常易于使用之外，它还非常便宜，一个完整的许可证只需 80 美元……

就方法而言，您需要研究两种重要的建模技术；盒子建模和边缘循环。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-02T23:14:04.647

作为具有 Lightwave 3d 经验的图形艺术家，每个程序都有其用途，您选择的内容应基于您的需求。如果这是您想要遵循的路径，那么 Blender 是一个很好的入门程序，在某些方面可以与 Lightwave 相媲美。然而，Lightwave 几乎可以完成您想要使用程序执行的所有操作，但如果您是一名程序员，那么学习 Maya 将使您领先一步，因为它是许多知名工作室用于其成品的方法。（其次是光波，适用于买不起 Maya 的工作室。）

I cannot say that every program is easy to learn, with the greater flexability of the program, comes increased challenges. But I do believe that lightwave is a good starting program if you want to texture, animate and or import most any .obj model.

# c# - 如何将 ascii 字节向量转换为字符串？

> ID：720579
> 
> 赞同：1
> 
> 时间：2009-04-06T08:16:33.180
> 
> 标签：c#, string, bytearray

给定一个字节数组（byte[]），是否有任何快速（简而言之和美观）将其转换为字符串 och 字符数组的方法？假设数组中的字节是用 ascii 表示的文本。

我现在正在使用 c#，找不到任何明显的方法可以使用。但我也对适用于任何现代编程语言的通用解决方案感兴趣。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-06T08:18:39.917

System.Text.ASCIIEncoding.ASCII.GetString 将从给定的字节数组中返回一个字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T08:38:22.677

重要说明：如此处所述[-](https://stackoverflow.com/questions/700061/how-do-i-convert-a-byte-array-to-a-string)字符串是 Unicode，因此**您必须在转换时指定编码**。

`System.Text.ASCIIEncoding`是一种选择，但请确保字节数组仅包含 ASCII 编码字符。

# c# - 内部和外部接口和集合

> ID：720580
> 
> 赞同：3
> 
> 时间：2009-04-06T08:16:45.583
> 
> 标签：c#, inheritance, interface

实现以下内容的最佳方法是什么？

我有一个实现接口的对象集合，在内部我希望能够公开设置并获取属性，而外部只能获取。

这是我想要的那种东西的一个例子......那不编译。

```
public interface ITable
{
   string Name { get; }
}

internal interface IInternalTable 
{
   string Name { get; set; }
}

internal class Table : ITable, IInternalTable
{
   public string Name { get; set; }
   public string ITable.Name { get { return Name; } }
}

public class Database
{
    private List<IInternalTable> tables;

    public List<ITable>
    {
       get { return this.tables; }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T08:19:37.837

### 用这个：

```
public interface ITable
{
    string Name { get; }
}

public class Table : ITable
{
    public string Name { get; internal set; }
}

public class Database
{
    public List<ITable> Tables { get; private set; }
} 
```

**注意**：在 get 或 set 访问器上使用的可访问性修饰符只能限制可见性而不是增加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T08:25:28.730

如果 Table 隐式实现 IInternalTable，并且 IInternalTable 是内部的，那么这些方法将只能在内部访问（因为只有内部代码才能使用 IInternalTable：

```
public interface ITable
{
   string Name { get; }
}

internal interface IInternalTable 
{
   string Name { get; set; }
}

public class Table : ITable, IInternalTable
{
   public string Name { get; set; }
   string ITable.Name { get { return Name; } }
}

public class Database
{
    private List<Table> tables;

    public List<Table> Tables
    {
       get { return this.tables; }
    }
} 
```

（现在还公开 Table 类型以避免缺乏协方差的问题......这也可以通过 Database.Tables 返回一个副本并具有不同的内部唯一属性来解决。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T08:26:04.517

它不会编译，因为 IInternalTable 和 ITable 之间没有转换。解决方案就像 Koistya Navin 建议的那样：

```
public class Table {
    public string Name {get; internal set; }
}

public class Database {
    public IList<Table> Tables { get; private set;}

    public Database(){
        this.Tables = new List<Table>();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T08:29:37.377

这是在代表您的域模型的类中发现的常见需求，您希望您的对象具有公开公开的 ID 只读属性，该属性必须在内部设置。我过去使用的解决方案是使用方法作为设置器：

```
public interface ITable
{
    string Name { get; }
}

internal interface ITableInternal
{
   void SetName(string value);
}

public class Table : ITable, ITableInternal
{
    public string Name { get; }

    public void SetName(string value)
    {
       // Input validation

       this.Name = value;
    }
}

public class Database
{
    public Table CreateTable()
    {
        Table instance = new Table();
        ((ITableInternal)instance).SetName("tableName");

        return table;
    }    
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T08:34:56.507

实际上，我建议将 setter-interface 完全隐藏为私有接口：

```
public interface ITable
{
   string Name { get; }
}

public class Database
{

    private interface IInternalTable 
    {
       string Name { get; set; }
    }

    private class Table : ITable, IInternalTable
    {
        public string Name { get; set; }
        string ITable.Name { get { return Name; } }
    }

    private List<IInternalTable> tables;

    public List<ITable> Tables
    {
       get { return this.tables; }
    }
} 
```

`Database`这样，除了`Database.Tables`.

# .net - 建议将小型 DBMS 用作小型 .net 应用程序的本地数据存储

> ID：720583
> 
> 赞同：1
> 
> 时间：2009-04-06T08:18:00.853
> 
> 标签：.net, rdbms

我正在寻找 .net 应用程序的本地关系数据存储。
理想情况下，数据存储应充当具有 SQL 的基本数据库，用于数据检索和定义以及事务功能。它不需要服务器并且易于重新分发（即只需要应用程序中的 dll 即可访问单个 db 文件）。
不需要支持通过网络访问。它应该提供一个 .net 数据提供程序并支持 linq-to-sql，因为这个应用程序的目的是加深我在 .NET 3.5 中的技能。

在类似情况下对您有用的库/技术的任何想法/建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T08:20:52.717

SQLite，也许？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T08:24:33.240

如果您想要 Linq to Sql，那么您必须使用变体 MSSQL。[SQL Server Compact](http://www.microsoft.com/Sqlserver/2008/en/us/compact.aspx)版是支持 Linq to Sql 的最轻量级的数据库，但您可能希望使用 Express 版，因为它支持存储过程和其他好东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T08:23:24.583

[SQL 服务器 CE](http://www.microsoft.com/Sqlserver/2008/en/us/compact.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T08:57:35.577

Sql 服务器快递

# php - 为每个表单创建一个单独的表格是一种创建表单的聪明方法吗？

> ID：720586
> 
> 赞同：0
> 
> 时间：2009-04-06T08:19:02.800
> 
> 标签：php, forms, cakephp

我正在做一个像 Cakephp 中的 Form builder 这样的应用程序。

我已经创建了设计表单的模块。在表单构建的情况下，为每个表单创建单独的表是一种好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T11:09:36.150

我不这么认为。数据库设计应该是第一位的，它应该是干净、简单和尽可能高效的。然后你建立你的表格。

一个好的表单构建应用程序应该能够查看一个数据库表或一组表，并找出什么属于哪里，存储什么类型的内容（整数、主键、文本、blob、URL）并使用最终用户的配置尽可能少。否则，您将无法规范您的数据库，并且您将在各处拥有各种数据。

获取特定表上的信息很容易。这是我认为最好的路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T19:30:45.120

就像 gargantaun 说的，从数据库表开始。

我希望在数据库和表单之间有一个易于覆盖的层来管理两者之间的关系，并明确您无法从数据库中获得的数据关系。

肯定有人想从同一个表中生成多个表单（可能一个表单太长，可能有不同的用户级别）。

类似的东西的杀手级功能始终是它处理数据库中的外键和一对一、一对多等关系的能力。如果您甚至无法构建一个包含多个商品的购物车，那也没多大用处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-22T20:52:41.707

我使用[Entity-Attribute-Value 数据模型](http://en.wikipedia.org/wiki/Entity-attribute-value_model)来识别表单构建器插件中的表单需要哪些字段，以及存储每个表单中的数据。完全推荐它 - 它可扩展且完全灵活。

# .net - GetHashCode 用于比较和相等

> ID：720593
> 
> 赞同：2
> 
> 时间：2009-04-06T08:23:52.617
> 
> 标签：.net, hash

我有一个程序，我应该确保 URL 存在与否，如果存在于数据库中，我应该选择 ID，如果不存在，我应该将其插入数据库。

我有一个问题，GetHashCode 是一种将哈希码保存在数据库中并仅比较哈希码的好方法吗？我可以确定哪个 2 个或多个 URL 具有相同的哈希码没有例外，如果不是，安装的 .NET Framework 是否不同？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T08:30:55.097

1.  不要使用开箱即用的 GetHashCode()，它是一周的，并且可能会在下一个版本中更改。
2.  使用[SHA1/SHA2](http://en.wikipedia.org/wiki/SHA_hash_functions)使用您自己的哈希函数。
    *   不要使用[MD4/MD5，因为它们已损坏](http://www.microsoft.com/technet/security/advisory/961509.mspx)。
3.  你需要处理转义，IE 'A B'== 'A%20B'
4.  您还需要考虑如何处理区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T08:27:49.237

不，这不是一个好主意 - 因为 GetHashcode() 可能会在下一个 .net 框架版本返回不同的结果。见[msdn备注](http://msdn.microsoft.com/en-us/library/system.string.gethashcode.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T08:38:33.657

不要将其用作身份 - GetHashCode 可能会导致不同字符串的值相同。

GetHashCode 结果是一个 int32，因此它可能只存储 4e9 个不同的值。由于网页数量已经在这些值附近（[http://everything2.com/index.pl?node_id=1268366](http://everything2.com/index.pl?node_id=1268366)），您几乎可以肯定一些不同的网址会生成相同的哈希值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T08:48:54.680

如果您真的想确保不存在重复项，您应该只存储 URL。如果 URL 可能存在，您唯一可以使用哈希作为第一个指示符，但基本上您手动进行索引，而一个好的数据库可以为您执行此操作。

除了如何存储它之外，还有不同的方法可以在不同的字符串中表示相同的 URL，指定您希望 URL 的唯一性可能是一个好主意？

# c# - 使用 linq 从两个对象列表创建列表

> ID：720609
> 
> 赞同：167
> 
> 时间：2009-04-06T08:29:51.667
> 
> 标签：c#, linq

我有以下情况

```
class Person
{
    string Name;
    int Value;
    int Change;
}

List<Person> list1;
List<Person> list2; 
```

我需要将这两个列表组合成一个新列表`List<Person>` ，以防组合记录具有该名称的同一个人，list2 中的人的值，更改将是 list2 的值 - list1 的值。如果没有重复，则更改为 0

* * *

## 回答 #1

> 赞同：261
> 
> 时间：2010-01-09T10:51:17.060

这可以通过使用 Linq 扩展方法 Union 轻松完成。例如：

```
var mergedList = list1.Union(list2).ToList(); 
```

这将返回一个列表，其中两个列表合并并删除了双精度。如果您没有像我的示例那样在 Union 扩展方法中指定比较器，它将在您的 Person 类中使用默认的 Equals 和 GetHashCode 方法。例如，如果您想通过比较人员的 Name 属性来比较人员，则必须重写这些方法以自己执行比较。检查以下代码示例以完成此操作。您必须将此代码添加到您的 Person 类。

```
/// <summary>
/// Checks if the provided object is equal to the current Person
/// </summary>
/// <param name="obj">Object to compare to the current Person</param>
/// <returns>True if equal, false if not</returns>
public override bool Equals(object obj)
{        
    // Try to cast the object to compare to to be a Person
    var person = obj as Person;

    return Equals(person);
}

/// <summary>
/// Returns an identifier for this instance
/// </summary>
public override int GetHashCode()
{
    return Name.GetHashCode();
}

/// <summary>
/// Checks if the provided Person is equal to the current Person
/// </summary>
/// <param name="personToCompareTo">Person to compare to the current person</param>
/// <returns>True if equal, false if not</returns>
public bool Equals(Person personToCompareTo)
{
    // Check if person is being compared to a non person. In that case always return false.
    if (personToCompareTo == null) return false;

    // If the person to compare to does not have a Name assigned yet, we can't define if it's the same. Return false.
    if (string.IsNullOrEmpty(personToCompareTo.Name) return false;

    // Check if both person objects contain the same Name. In that case they're assumed equal.
    return Name.Equals(personToCompareTo.Name);
} 
```

如果您不想将 Person 类的默认 Equals 方法设置为始终使用 Name 来比较两个对象，您还可以编写一个使用 IEqualityComparer 接口的比较器类。然后，您可以将此比较器作为 Linq 扩展联合方法中的第二个参数提供。有关如何编写此类比较器方法的更多信息，请访问[http://msdn.microsoft.com/en-us/library/system.collections.iequalitycomparer.aspx](http://msdn.microsoft.com/en-us/library/system.collections.iequalitycomparer.aspx)

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2011-07-21T07:46:47.690

我注意到这个问题在 2 年后没有被标记为已回答 - 我认为最接近的答案是理查兹，但它可以简化很多：

```
list1.Concat(list2)
    .ToLookup(p => p.Name)
    .Select(g => g.Aggregate((p1, p2) => new Person 
    {
        Name = p1.Name,
        Value = p1.Value, 
        Change = p2.Value - p1.Value 
    })); 
```

尽管在任一集合中有重复名称的情况下这都不会*出错。*

其他一些答案建议使用联合 - 这绝对不是要走的路，因为它只会为您提供一个不同的列表，而无需进行组合。

* * *

## 回答 #3

> 赞同：76
> 
> 时间：2012-04-12T07:21:42.983

为什么你不只是使用`Concat`？

Concat 是 linq 的一部分，比做一个更有效`AddRange()`

在你的情况下：

```
List<Person> list1 = ...
List<Person> list2 = ...
List<Person> total = list1.Concat(list2); 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-06-03T14:14:42.430

这是林克

```
var mergedList = list1.Union(list2).ToList(); 
```

这是正常的 (AddRange)

```
var mergedList=new List<Person>();
mergeList.AddRange(list1);
mergeList.AddRange(list2); 
```

这是常态（Foreach）

```
var mergedList=new List<Person>();

foreach(var item in list1)
{
    mergedList.Add(item);
}
foreach(var item in list2)
{
     mergedList.Add(item);
} 
```

这是常态（Foreach-Dublice）

```
var mergedList=new List<Person>();

foreach(var item in list1)
{
    mergedList.Add(item);
}
foreach(var item in list2)
{
   if(!mergedList.Contains(item))
   {
     mergedList.Add(item);
   }
} 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2009-04-06T08:46:02.813

这样做有几个部分，假设每个列表不包含重复项，Name 是唯一标识符，并且两个列表都没有排序。

首先创建一个追加扩展方法来获取单个列表：

```
static class Ext {
  public static IEnumerable<T> Append(this IEnumerable<T> source,
                                      IEnumerable<T> second) {
    foreach (T t in source) { yield return t; }
    foreach (T t in second) { yield return t; }
  }
} 
```

因此可以得到一个列表：

```
var oneList = list1.Append(list2); 
```

然后按名字分组

```
var grouped = oneList.Group(p => p.Name); 
```

然后可以用助手处理每个组，一次处理一个组

```
public Person MergePersonGroup(IGrouping<string, Person> pGroup) {
  var l = pGroup.ToList(); // Avoid multiple enumeration.
  var first = l.First();
  var result = new Person {
    Name = first.Name,
    Value = first.Value
  };
  if (l.Count() == 1) {
    return result;
  } else if (l.Count() == 2) {
    result.Change = first.Value - l.Last().Value;
    return result;
  } else {
    throw new ApplicationException("Too many " + result.Name);
  }
} 
```

可应用于 的每个元素`grouped`：

```
var finalResult = grouped.Select(g => MergePersonGroup(g)); 
```

（警告：未经测试。）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-06T17:22:48.907

你需要一个完整的外部连接。System.Linq.Enumerable 没有实现全外连接的方法，所以我们必须自己做。

```
var dict1 = list1.ToDictionary(l1 => l1.Name);
var dict2 = list2.ToDictionary(l2 => l2.Name);
    //get the full list of names.
var names = dict1.Keys.Union(dict2.Keys).ToList();
    //produce results
var result = names
.Select( name =>
{
  Person p1 = dict1.ContainsKey(name) ? dict1[name] : null;
  Person p2 = dict2.ContainsKey(name) ? dict2[name] : null;
      //left only
  if (p2 == null)
  {
    p1.Change = 0;
    return p1;
  }
      //right only
  if (p1 == null)
  {
    p2.Change = 0;
    return p2;
  }
      //both
  p2.Change = p2.Value - p1.Value;
  return p2;
}).ToList(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-26T10:54:15.713

以下代码是否适用于您的问题？我使用了一个内部带有一些 linq 的 foreach 来组合列表，并假设如果他们的名字匹配，则人们是平等的，并且它似乎在运行时打印出预期的值。Resharper 没有提供任何将 foreach 转换为 linq 的建议，因此这可能与它以这种方式进行的效果一样好。

```
public class Person
{
   public string Name { get; set; }
   public int Value { get; set; }
   public int Change { get; set; }

   public Person(string name, int value)
   {
      Name = name;
      Value = value;
      Change = 0;
   }
}

class Program
{
   static void Main(string[] args)
   {
      List<Person> list1 = new List<Person>
                              {
                                 new Person("a", 1),
                                 new Person("b", 2),
                                 new Person("c", 3),
                                 new Person("d", 4)
                              };
      List<Person> list2 = new List<Person>
                              {
                                 new Person("a", 4),
                                 new Person("b", 5),
                                 new Person("e", 6),
                                 new Person("f", 7)
                              };

      List<Person> list3 = list2.ToList();

      foreach (var person in list1)
      {
         var existingPerson = list3.FirstOrDefault(x => x.Name == person.Name);
         if (existingPerson != null)
         {
            existingPerson.Change = existingPerson.Value - person.Value;
         }
         else
         {
            list3.Add(person);
         }
      }

      foreach (var person in list3)
      {
         Console.WriteLine("{0} {1} {2} ", person.Name,person.Value,person.Change);
      }
      Console.Read();
   }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-12-15T15:01:44.993

```
public void Linq95()
{
    List<Customer> customers = GetCustomerList();
    List<Product> products = GetProductList();

    var customerNames =
        from c in customers
        select c.CompanyName;
    var productNames =
        from p in products
        select p.ProductName;

    var allNames = customerNames.Concat(productNames);

    Console.WriteLine("Customer and product names:");
    foreach (var n in allNames)
    {
        Console.WriteLine(n);
    }
} 
```

# java - 拖放 Java/.NET

> ID：720612
> 
> 赞同：1
> 
> 时间：2009-04-06T08:30:13.147
> 
> 标签：java, .net, drag-and-drop

我需要在 C++ .NET 应用程序和 Java GUI 之间双向实现拖放机制。是否可以使用一些标准 API 或者我需要一些自定义库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T11:25:37.563

您不能将任意对象从一个对象拖到另一个对象。您必须使用双方都能理解的格式。在 Java 中，这些称为 DataFlavors，在 Windows DataFormats 中（在 win 形式的 .Net 世界中简单地通过名称标识）

这是[java end](http://www.chaosinmotion.com/wiki/index.php?title=Java_Drag_and_Drop)的指南。[这是与数据格式](http://msdn.microsoft.com/en-us/library/system.windows.forms.dataformats.aspx)相关的 MSDN 文档

可以采用非常低的级别并在双方实现复杂的代码来处理不同应用程序/平台之间相当复杂的通信，但是如果您只想能够将图像从一个应用程序拖动到另一个应用程序，您会发现它更容易开始使用位图，因为它们非常通用。

如果您实际上希望由图标表示的事物的**标识符**被关联/分离，并且您只希望它在相关的两个应用程序之间工作，那么只需将标识符作为正常文本传输并让两个应用程序将拖放解释为需要获取相同图标并将其与相关更新一起显示/删除的事件。

但是，您需要知道拖动事件是否成功（也从应用程序中删除图标）这并不难。

# asp.net - 如何从数据库获取空值到gridview中的复选框

> ID：720613
> 
> 赞同：4
> 
> 时间：2009-04-06T08:30:28.467
> 
> 标签：asp.net, vb.net

我在gridview中有一个复选框。

```
 <asp:CheckBox  ID="chkStatus"
runat="server"
 Checked='<%#GetStatus(Eval("VaccinationCompletedStatus"))
 %>'/> 
```

函数GetStatus如下

```
 Public Function GetStatus(ByVal objStatus As Object) As Boolean
        If objStatus = True Then
            Return True
        ElseIf objStatus = False Then
            Return False
        Else
            Return False
        End If

    End Function 
```

但是，如果状态从数据库中作为空值出现，那么一个错误将出现，因为 System.DBNull 无法转换为对象。如果空值来自数据库，我希望复选框被选中为假。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T08:37:56.967

您可以先检查 DBNull：

```
If DBNull.Value.Equals(objStatus) Then
  Return False
Else
  Return objStatus
End If 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T08:38:45.343

使用 TypeOf 函数检查输入类型是否为布尔值。如果不只是返回false。

```
If TypeOf objStatus Is Boolean Then
  Your code here
Else
  Return False
End If 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-08-16T08:26:47.033

```
<asp:TemplateField HeaderText="foo" >
    <ItemTemplate>    
        <asp:CheckBox  runat="server"
                    Checked='<%# Eval("foo").GetHashCode() == 1 %>'
                    Enabled="false"
                    Visible='<%# Eval("foo").GetType() == typeof(Boolean) %>' />
    </ItemTemplate>
</asp:TemplateField> 
```

# html - <_o3a_p> 来自网页的什么地方？

> ID：720620
> 
> 赞同：2
> 
> 时间：2009-04-06T08:36:16.037
> 
> 标签：html

我从我公司的一位网络开发人员那里得到了一个问题，他从客户那里得到了这个问题：将（俄语）文本插入网页时，**<_o3a_p>**标签出现在网站上。

我（当然）试图用谷歌搜索它，但我只是偶然发现了其中也有这些标签的网站。换句话说，没有关于如何和为什么的真正好的背景。

我的第一个想法是客户必须将它从编辑器复制/粘贴到我们的编辑器中，从而复制文本。但是，我们无法找出客户粘贴的内容。

有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T09:05:00.163

我找不到原因，但谷歌结果显示它也发生在非俄语页面上。

因此，我建议国际化*不是*原因，但它可能是所使用的编辑器的特殊之处。

此外，在我查看的每个页面上，这些都是以 HTML 标记编写的，但被 Firefox 和 Safari 呈现为文本。也许一个天真的编辑器将这些用作自己使用的标签，没有意识到浏览器会显示标签，而不是像普通的未知标签一样忽略它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T10:38:55.430

它似乎源于 MS Office 的 HTML 粘贴，与所有导出的“mso:normal”crud（您经常在相同的地方看到）相同。它表示 Office 对段落的想法。

你看到的另一个是：

```
<_st13a_city> 
```

它看起来像一个 Office 自动“智能标签”。

最好在提交内容时解析这个无用的垃圾。（您确实有一个 [X]HTML 解析器来处理和检查传入的内容，对吗？）

# python - Python中的函数定义

> ID：720621
> 
> 赞同：2
> 
> 时间：2009-04-06T08:36:23.803
> 
> 标签：python

我是 Python 新手。我试图在一个类中定义和运行一个简单的函数。

谁能告诉我我的代码有什么问题：

```
class A :
    def m1(name,age,address) :
        print('Name -->',name)
        print('Age -->',age)
        print('Address -->',address)

>>> a = A()
>>> a.m1('X',12,'XXXX')
Traceback (most recent call last):
  File "<pyshell#22>", line 1, in <module>
    a.m1('X',12,'XXXX') 
```

我得到以下错误
**TypeError: m1() 恰好需要 3 个位置参数（给定 4 个）**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-06T08:40:47.960

实例方法将实例作为第一个参数：

```
class A :
    def m1(self, name,age,address) :
        print('Name -->',name)
        print('Age -->',age)
        print('Address -->',address) 
```

您还可以使用[@staticmethod 装饰器](http://docs.python.org/library/functions.html#staticmethod)来创建静态函数：

```
class A :
    @staticmethod
    def m1(name,age,address) :
        print('Name -->',name)
        print('Age -->',age)
        print('Address -->',address) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T08:40:32.750

按照惯例，类实例中的方法接收对象引用作为第一个参数，名为`self`。

```
>>> class A:
...     def m1(self,name,age,address):
...         print('Name -->',name)
...         print('Age -->',age)
...         print('Address -->',address)
...         
>>> a=A()
>>> a.m1('X',12,'XXXX')
('Name -->', 'X')
('Age -->', 12)
('Address -->', 'XXXX')
>>> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-06T08:41:13.060

第一个参数始终是对象本身。

```
class A :
    def m1(self, name,age,address) :
        print('Name -->',name)
        print('Age -->',age)
        print('Address -->',address) 
```

# c# - 我如何使用 foreach 方法而不是 for 方法和列表框的删除方法？

> ID：720625
> 
> 赞同：1
> 
> 时间：2009-04-06T08:38:11.803
> 
> 标签：c#, .net, asp.net

我如何使用**第二种**方法而不是**第**一种方法？

## 第一（网络用户控制）

```
 public void Remove()
        {

            int count = this.ListBox1.Items.Count;

            for (int i = count - 1; i > -1; i--)
            {
                if (ListBox1.Items[i].Selected)
                {
                    ListBox1.Items.Remove(ListBox1.Items[i]);
                }
            }
        }
```

* * *

## Test.aspx(先测试)

```
 protected void btnRemove_Click(object sender, EventArgs e)
        {
            ItemOrderer2.Remove();

        }
```

## 第二（网页用户控制）

```
 public void Remove(string value)
        {
            ListItem li = new ListItem();
            li = ListBox1.Items.FindByValue(value);
            if (li != null)
            {
                this.ListBox1.Items.Remove(li);
            }
```

## Test.aspx（第二次测试）

```
 protected void btnRemove_Click(object sender, EventArgs e)
        {
           // ItemOrderer2.Remove();
            if (ItemOrderer2.Items.Count > 0)
                foreach (ListItem li in ItemOrderer2.Items)
                {
                    if (li.Selected)
                    {
                        ItemOrderer2.Remove(li.Value);
                    }
                }
        }
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T08:45:22.330

`foreach`如果要删除其中的数据，则不能使用`foreach`- 它（故意）破坏了迭代器。

如果`for`有效，为什么要改变它？如果您*急于*使用`foreach`，请先构建一个*单独*的列表 - 例如：

```
List<ListItem> remove = new List<ListItem>();
foreach(ListItem li in ItemOrdere2.Items) {
    if(li.Selected) remove.Add(li);
}
foreach(ListItem li in remove) {
    ItemOrderer2.Remove(li); // or similar
} 
```

如果可用，通常可以通过 LINQ 简化第一个查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T08:43:11.370

您可以先将要删除的值添加到列表中，然后通过 remove 函数运行它们。如果需要，这可以进一步增强。

```
var removedValues = ItemOrderer2.Items
                    .Where(li => li.Selected)
                    .Select(li => li.Value).ToList();

foreach (var removedValue in removedValues) {
   ItemOrderer2.Remove(removedValue);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T08:51:04.033

您不能修改在 foreach 循环中迭代的集合。

话虽如此，您似乎正在尝试从 ListBox 中删除选定的项目。你也可以使用类似的东西：

```
while(ItemOrderer2.SelectedItem != null)
{
    ItemOrderer2.Items.Remove(ItemOrderer2.SelectedItem);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T08:54:18.863

好吧，您不能使用 foreach 对 IList<> 进行任何更改，因为它会更改其中的项目数。

此外，您展示的第一种方法是有缺陷的，因为 count 可以从 20 开始，但是如果您使用您的方法删除 10 个项目，则 count 仍然是 20，并且您将超出 IList<> 的范围

基本上，如果你想在迭代时删除/添加东西，你必须做类似的事情

```
for (int i = 0; i < ListBox1.Items.Count; i++)
{
   if (ListBox1.Items[i].Selected)
   {
      ListBox1.Items.RemoveAt(i)
      i--;
   }
} 
```

注意 i-- 如果你删除任何东西。假设 item[2] 被选中，你的循环会去：

1.  如果 Count > 0 继续
2.  如果 item[0] 被选中，删除它（不是）
3.  增加我们的计数器
4.  如果 Count > 1 继续
5.  如果 item[1] 被选中，删除它（不是）
6.  增加我们的计数器
7.  如果 Count > 2 继续
8.  item[2] 被选中，删除它（它是）
9.  删除 item[2] （现在，以前的 item[3] 将成为 item[2]
10.  减少我们的计数器
11.  增加我们的计数器
12.  如果 Count > 2 继续
13.  ...

希望这可以帮助 ：）

# definition - 我无法理解 MVC，它是什么，它不是什么？

> ID：720640
> 
> 赞同：4
> 
> 时间：2009-04-06T08:43:33.507
> 
> 标签：definition, model-view-controller

我无法理解 MVC 是什么，我应该获得什么样的思维方式或编程模型，以便 MVC 的东西可以立即在我的头上“发光”？如果不是立即，我应该首先尝试做哪些简单的程序/项目，以便我可以将 MVC 带来的简洁的东西应用到编程中。

OOP 直观且容易，对象就在我们身边，使用 OOP 范式的代码重用的好处立即点击给任何人。您可能可以在几分钟内与任何人谈论 OOP，并讲一些示例，他们就会明白。虽然 OOP 以某种方式提高了编程的直观性，但 MVC 似乎恰恰相反。我有负面想法，一些未来的雇主（甚至客户）会因为我不使用 MVC 技术而看不起我。

虽然我可能获得了MVC 的[可换肤](http://www.codinghorror.com/blog/archives/001112.html)方面，但是当我尝试将它应用到我自己的项目时，我不知道从哪里开始。

还有一些程序员甚至对如何正确地完成 MVC 有不同的看法。

以 Jeff 关于 MVC 的帖子为例：

> 视图只是您如何布置数据，如何显示数据。例如，如果您想要某些数据的子集，我认为这是模型的责任。

因此，也许有些程序员使用 MVC，但他们不知何故不经意间使用了 View 或 Controller 来提取数据子集。

为什么我们不能对什么以及如何正确完成 MVC 有一个明确的定义？

而且，当我搜索 MVC .NET 程序时，大部分都适用于 Web 程序，而不是桌面应用程序，这让我更加感兴趣。我的猜测是，这对网络应用程序最有利，桌面应用程序中混合视图（html）和控制器（程序代码）没有太大问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T09:19:32.313

我喜欢 Martin Fowler 所说的方式：）

[http://martinfowler.com/eaaCatalog/modelViewController.html](http://martinfowler.com/eaaCatalog/modelViewController.html)

.. 并来自[http://martinfowler.com/eaaDev/uiArchs.html](http://martinfowler.com/eaaDev/uiArchs.html)：

> 以模型-视图-控制器为例。它通常被称为模式，但我认为将其视为一种模式并不是非常有用，因为它包含很多不同的想法。在不同地方阅读 MVC 的不同人从中获得不同的想法，并将其描述为“MVC”。如果这还没有引起足够的混乱，那么您就会受到通过中文耳语系统发展而来的对 MVC 的误解的影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T09:07:35.930

你可以从阅读[这个问题](https://stackoverflow.com/questions/129921/what-is-mvc-model-view-controller)的答案开始。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T09:09:56.017

MVC 确实非常适合 WebApps。大多数 WebApps 从 DB 中获取数据，对其进行一点处理，然后将它们展示给用户。DB 是您的模型级别，控制器进行处理，视图只发出 HTML 代码。

有些人认为控制器应该只从模型中获取数据并将其提供给视图，但我认为这意味着控制器是无用的，因此它只是 MV 编程模型:) 但我理解他们，如果你使用某种处理，你'将不止一次地使用它，因此最好在模型级别这样做，它可以通过这种方式在应用程序的不同部分之间共享。

您不必为桌面应用程序使用 MVC，事实上，我不确定这种模型是否适用于大型应用程序，通常是桌面应用程序。您经常想使用“组件”，您可以提供相同的数据并从中获取相同的 UI，但在应用程序的不同部分，它只会导致使用 M​​VC 复制代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T09:09:12.697

我发现 MVC 范式常常过于臃肿。一个简单的模型/视图（没有控制器）更容易理解和实现。

大多数人都明白，某个类保存数据（模型）和加载/保存数据的逻辑，另一个类显示该数据（视图）。给它一些胶水来加载文档（类似于文档管理器），你就完成了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T09:10:15.220

“典型”的 MVC 实现将具有：

*   视图 - 呈现数据以供最终用户查看，并为他们提供用户界面对象以与数据交互（但不处理该交互）
*   控制器 - 处理视图和模型之间传输的数据的用户交互和操作
*   模型 - 处理数据的存储和应用程序的数据表示

MVC 模式的常见用法是 HTML/CSS/浏览器呈现 Web 应用程序的视图部分，PHP/脚本语言应用程序级别充当控制器，MySQL 或类似的数据库充当模型（可能或者前面可能没有某种 ORM 框架）。

事实是，很少有人以这种格式使用 MVC，并且有充分的理由（在我看来）。不同的应用程序有不同的需求和设计要求，将图案弯曲成需要的形状是有益的。如今，“MVC”似乎更多地描述了隔离应用程序层的框架的使用，而不是特定的模型-视图-控制器模式。

从雇主的角度来看，真正需要（通常）是抽象层和构建 n 层应用程序的经验。当您从在一个应用程序中工作时发生相当大的心理跳跃，该应用程序不仅可以分为垂直功能，还可以分为水平功能层。

需要注意的是，蒙皮实际上只是一个特定层的一个方面，您可以在模型层更改数据源，在控制器层操作该数据的方法（例如新算法）并逐渐推出它们而无需更改其他图层。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T09:10:35.063

也许按照[Wikipedia 文章](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)可以向您推荐更多的实现。它具有指向[作为 GUI 框架的 MVC 实现的](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller#Implementations_of_MVC_as_GUI_frameworks)链接。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-06T09:16:27.607

MVC 是一种模式，它与 OOP 配合得很好，两者并不排斥——我会说它们是正交的。MVC 模式试图将显示代码 (V) 从数据 (M) 和控制流 (C) 中分离出来。

如果您搜索“MVC .Net”，您几乎肯定会在 Web 应用程序中获得很多点击，因为最近发布了 ASP.Net MVC 框架，这是 MVC 模式在 ASP.Net 编程中的应用，因此它是用于开发网站。正如您所建议的，没有理由不将该模式也应用于桌面应用程序。

如果您在使用 MVC 时遇到困难，我建议您阅读一般的模式，以了解人们如何使用模式谈论建模问题/解决方案，然后更详细地查看 MVC。

**编辑**参考 Fowler，他[的《企业应用程序架构模式》](http://martinfowler.com/books.html)一书是阅读 MVC 和其他模式的绝佳场所。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-06T09:52:31.763

> MVC 范式是一种将应用程序分成三个部分的方法：模型、视图和控制器。MVC 最初是为了将传统的输入、处理、输出角色映射到**GUI**领域而开发的。

用户输入、外部世界的建模以及对用户的视觉反馈由模型、视口和控制器对象分离和处理。控制器解释来自用户的鼠标和键盘输入，并将这些用户操作映射到发送到模型和/或视口的命令以实现适当的更改。模型管理一个或多个数据元素，响应有关其状态的查询，并响应更改状态的指令。视口管理显示器的一个矩形区域，并负责通过图形和文本的组合将数据呈现给用户……[阅读更多](http://ootips.org/mvc-pattern.html)甚至[更多](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-06T10:54:51.380

MVC 的核心只是关注点分离的一种特殊情况：一个代码块负责存储数据，第二个代码块负责操作数据，第三个代码负责与用户交互。

这些块中的任何一个都可以以 OO 方式实现，也可以不实现 - MVC 和 OOP 是正交的。（尽管根据我的经验，MVC 应用程序和框架极有可能是 OO。）

# c# - 在 C# 中从父表单处理表单？

> ID：720644
> 
> 赞同：4
> 
> 时间：2009-04-06T08:45:58.447
> 
> 标签：c#, class, forms, object, dispose

我有一个表单，当单击一个按钮（form1button）时会打开一个新表单。在子窗体上会有另一个按钮'form2button'。现在，如果我点击这个 form2button 新的 form2 应该被处理掉。但是因为 form2 对象是在 form1 类方法中创建的，所以我无法在 form2 类方法（fom2buttonclick）中处理该对象。所以我使用静态来完成我的工作，如下面的伪代码所示。

表格1：

```
class Form1 : Form
{
    static Form2 f2;

    public void Form1_buttonclick(object sender, EventArgs e)
    {
        f2 = new Form2();
    }

    public void Disposef2()
    {
        f2.Dispose();
    }
} 
```

表格2：

```
class Form2 : Form
{
    public void Form2_buttonclick(object sender, EventArgs e)
    {
        Form1 f1 = new Form1();
        f1.Disposef2();
    }
} 
```

有没有其他更好的方法来做到这一点。或者 C# 设计本身不提供替代机制。我是 C# 新手。请帮帮我..

**编辑**

当单击 form2 上的按钮时，我想关闭（显式处理）在 form1 类中创建的 form2 对象。此编辑是为了更加清晰。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-06T11:41:45.777

关于处理表单的 MSDN 文档：

> 如果使用 Show 方法显示表单，则会自动调用 Dispose。如果使用了其他方法（如 ShowDialog），或者根本不显示表单，则必须在应用程序中自己调用 Dispose。

[来源](http://msdn.microsoft.com/en-us/library/aw58wzka.aspx)

关于关闭与处置：

> 当窗体关闭时，对象内创建的所有资源都将关闭并释放窗体。您可以通过处理 Closing 事件并设置作为参数传递给事件处理程序的 CancelEventArgs 的 Cancel 属性来防止在运行时关闭窗体。如果您要关闭的表单是应用程序的启动表单，则您的应用程序将结束。
> 
> 表单未在 Close 上处理的两种情况是： (1) 它是多文档界面 (MDI) 应用程序的一部分，并且表单不可见；(2) 您已经使用 ShowDialog 显示了表单。在这些情况下，您将需要手动调用 Dispose 以将表单的所有控件标记为垃圾回收。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T12:00:07.730

如果这两个表单没有父对话框类型的关系，您可能只想挂接到子表单上的 Disposed 事件，以便在它关闭时得到通知。

```
public partial class Form1 : Form
{
    private Form2 _Form2;

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (_Form2 != null)
            _Form2.Dispose();

        _Form2 = new Form2();
        _Form2.Disposed += delegate
        {
            _Form2.Dispose();
            _Form2 = null;
        };
        _Form2.Show();
    }
} 
```

那么您在 Form2 中所要做的就是关闭它：

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Close();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T08:55:17.503

1.  您不需要在表单上显式调用 Dispose，垃圾收集器会为您执行此操作。

2.  如果您希望在 Form2 “消失”时发生特定的事情，您可以挂钩它的表单关闭事件。

**编辑 ：**

在 Form2 上，单击按钮，尝试

```
this->Close(); 
```

这将关闭 form2 的该实例（表单将消失）。如果 form1 仍然有对 form2 的引用，那么 form2 不会被垃圾收集器拾取，GC 也不会处理它。

如果 form1 有理由保留对 form2 的引用？

如果是这样，form1 应该处理 from2 的关闭事件，然后 form1 可以释放它对 form2 的引用（将其设置为 null）。

现在 GC 将取出 form2 作为要收集的候选对象，它将（可能不止一步）调用它的 Dispose 方法并释放 Form2 的内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T11:53:00.213

你不是真正的读者，对吧？这里已经有很多答案了。

> 编辑当单击 form2 上的按钮时，我想关闭（显式处理）在 form1 类中创建的 form2 对象。此编辑是为了更加清晰。

如果您使用 ShowDialog，那么当您调用 close() 时 form2 会返回。所以在 Form1 中：

```
private void button1_Click(object sender, System.EventArgs e)
{
    Form2 oForm2 = new Form2();
    oForm2.MyParentForm = this;
    if (oForm2.ShowDialog() == DialogResult.OK)
    {
        oForm2.Dispose(); //or oForm2.Close() what you want
    }
} 
```

然后在 form2 中调用 Close()。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-01-31T20:00:35.117

我为我的项目做了一次，关闭一个应用程序并打开另一个应用程序。

```
 System.Threading.Thread newThread;
    Form1 frmNewForm = new Form1;

   newThread = new System.Threading.Thread(new System.Threading.ThreadStart(frmNewFormThread));
this.Close();
        newThread.SetApartmentState(System.Threading.ApartmentState.STA);
        newThread.Start(); 
```

并添加以下方法。您的 newThread.Start 将调用此方法。

```
 public void frmNewFormThread)()
    {

        Application.Run(frmNewForm);

    } 
```

# perl - 为什么 Perl 的 GD::Graph 抱怨“无效数据集”？

> ID：720646
> 
> 赞同：2
> 
> 时间：2009-04-06T08:46:03.220
> 
> 标签：perl, charts, gd

我正在用 Perl 为我的作业编写一个小程序，而且我是 Perl 的新手。

我编写的代码为我提供了我需要的完全相同的值，但是在创建条形图时出现此错误。

```
Invalid data set: 0 at line 67 
```

第 67 行在下面的代码中标有注释。

x轴中存储的值是：

```
40 44 48 52 64 76 83 104 105 148 149 249 431 665 805 1420 1500 
```

y_axis 是：

```
16 1  1 6 1 1 1 1 1 1 1 1 1 1 1 2 5 
```

这是我的代码：

```
use GD::Graph::bars;

open(CHECKBOOK,"c:\\Perl\\bin\\ip_packet_trace1.txt");

my $counter = -1;
my @sizearray = {};
while ($record = <CHECKBOOK>) {
    @array = split(/\t/,$record);
    $counter++;
    $sizearray[$counter] = $array[6];

}

$counter++;

my @array1 = sort {$a <=> $b} @sizearray;
print "$counter\n";
print "@array1\n";

my @freq = {0...0};

foreach $elem (@array1){

    my $s = $freq[$elem]+1;

    $freq[$elem] = $s;
}

my $size = @freq;
my @x_axis = {};
my @y_axis = {};

my $count2 = -1;

for($i = 1; $i < $size; $i++){

    my $elem = $freq[$i];

    if($elem  and $elem > 0  ){

        $count2++;

        $x_axis[$count2] =  $i;

        $y_axis[$count2] = $elem;
    }

}

print "@x_axis \n";
print "@y_axis \n";

my $mygraph = GD::Graph::bars->new(500, 300); # line 67

$mygraph->set(x_label     => 'Month',

y_label     => 'Number of Hits',

title       => 'Number of Hits in Each Month in 2002',

) or warn $mygraph->error;

my @data = {@x_axis,@y_axis};

my $myimage = $mygraph->plot(\@data) or die $mygraph->error;

open(IMG, '>C:\\image\\file.gif') or die $!;

binmode IMG;

print IMG $myimage->gif;

close IMG; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T16:18:57.047

我认为你的任务`@data`可能是罪魁祸首。

```
my @data = {@x_axis,@y_axis}; 
```

这将创建一个包含一个元素的数组。那一个元素是一个哈希。[GD::Graph](http://search.cpan.org/~mverb/GDGraph-1.43/Graph.pm)文档显示您需要一个数组数组。`daotoad`如前所述，这就是[Data::Dumper](http://search.cpan.org/~ilyam/Data-Dumper-2.121/Dumper.pm)派上用场的地方。尝试以下方法：

```
use Data::Dumper;
my @x_axis = 1...100;
my @y_axis = "a"..."z";
my @data = {@x_axis,@y_axis};
warn Dumper(\@data); 
```

您可以看到数据是如何被解释的，并看到它与[GD::Graph 示例](http://search.cpan.org/~mverb/GDGraph-1.43/Graph.pm#EXAMPLES)不同：

```
@data = ( 
    ["1st","2nd","3rd","4th","5th","6th","7th", "8th", "9th"],
    [    1,    2,    5,    6,    3,  1.5,    1,     3,     4],
    [ sort { $a <=> $b } (1, 2, 5, 6, 3, 1.5, 1, 3, 4) ]
  ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T15:58:09.453

请`use strict`和`use warnings`。如果您使用这些 pragma，您在此代码中遇到的许多麻烦事都会被标记出来。

您还花费了大量精力来追加到数组的末尾。您可以`push`在不知道最后一项的索引的情况下使用它来执行此操作。像这样使用 push 可以让你简化你的代码。

用于`()`制作一个空数组（实际上是很好的列表）。用于`[]`进行数组引用。用于`{}`进行哈希引用。您一直在许多地方使用哈希引用。

最好使用词法文件句柄而不是全局文件句柄。使用全局文件句柄就是使用不必要的全局变量，这是自找麻烦。还要检查您对 的调用是否成功`open`。

```
open( my $fh, '<', 'path/to/file)
    or die "Unable to open data file - $!\n"; 
```

当您使用数据结构时，Data::Dumper 是一个有用的模块，可以查看发生了什么。

```
use Data::Dumper;

my $foo = {
  bar => [ 0..5],
  baz => { a..z },
};

my @qux = ( [qw/a b c d/], [0..5] );

print Dumper $foo;
print Dumper \@qux; 
```

`perldsc`另外，看看`perlreftut`他们有很好的例子来说明如何使用引用和嵌套数据结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T12:08:44.683

我不太确定我在看什么，但我突然想到一件事：您正在将数组初始化为哈希引用：

```
hektor ~ $ perl -e '@sizearray = {}; print @sizearray, "\n"'
HASH(0x8031c0) 
```

如果你想要的只是一个空数组，你可以简单地说：

```
my @sizearray; 
```

如果你想明确它是新的和空的，你需要括号；见下文。（然而，正如布拉德在评论中所说，这是多余的。您可能应该习惯于查看和编写更简单的版本。）

```
my @sizearray = (); 
```

数组存储有序列表，列表放在括号中。查看[`perldoc perldata`](http://perldoc.perl.org/perldata.html)更多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T20:31:20.403

K. 我测试并修改了你的代码。下面的代码有效。大家提到的数组部分很重要，但不是你唯一的问题。cpan 中的示例是一个匿名数组，因此您只需传递 2 个对 @data 的引用，而不是传递 @data 2 个数组。

```
#!/usr/bin/perl
#
use GD::Graph::bars;

my $size = @freq;
my @x_axis = qw(40 44 48 52 64 76 83 104 105 148 149 249 431 665 805 1420 1500);
my @y_axis = qw(16 1  1 6 1 1 1 1 1 1 1 1 1 1 1 2 5);

my $mygraph = GD::Graph::bars->new(500, 300); # line 67
$mygraph->set(x_label     => 'Month',
            y_label     => 'Number of Hits',
            title       => 'Number of Hits in Each Month in 2002',
) or warn $mygraph->error;
my @data = (\@x_axis,\@y_axis); # the important part.
my $myimage = $mygraph->plot(\@data) or die $mygraph->error;

open(IMG, '>helping_graph.gif') or die $!;
binmode IMG;
print IMG $myimage->gif;
close IMG; 
```

# c# - 在类库中隐藏仅包含内部类型的命名空间？

> ID：720647
> 
> 赞同：48
> 
> 时间：2009-04-06T08:47:37.037
> 
> 标签：c#, namespaces, intellisense, hide, internal

我有一个类库，它有几个只包含内部类型的命名空间。

但是，当在应用程序项目中使用类库时，命名空间会在智能感知中显示，但它们当然是空的。在其他项目中使用智能感知时，我有什么办法可以完全隐藏命名空间？

我也尝试将其应用于`EditorBrowsableAttribute`所有内部类，但我想做的是将其应用于命名空间，这当然是不可能的。

或者，如果我足够关心这一点，唯一的选择是我必须将类型移动到包含公共类型的命名空间中？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-02-19T09:25:30.700

这取决于您如何引用您的类库：

*   如果您的解决方案中包含类库项目并使用项目引用，您将始终通过 Intellisense 看到该空命名空间。
*   如果您引用的是类库的已编译 dll，则不会在智能感知中看到名称空间弹出，前提是它仅包含内部成员。

试试这个：

```
namespace ClassLibrary1
{
    namespace Internal
    {
        internal class InternalClass
        {
            public int internalStuff { get; set; }
        }
    }

    namespace Public
    {
        public class PublicClass
        {
            public int publicStuff { get; set; }
        }
    }
} 
```

如果您通过项目引用引用它，您将看到空的命名空间。如果您引用它的dll，则不会。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-06T08:51:54.843

我以前遇到过这个问题，但没有找到解决方案，只有一种解决方法，它可能适用于您的项目，也可能不适用于您的项目。您可以使用嵌套的静态类来代替定义命名空间吗？

# xml - 如何在 XML 中要求强类型的原始值

> ID：720649
> 
> 赞同：1
> 
> 时间：2009-04-06T08:48:35.100
> 
> 标签：xml, xsd, strong-typing

我正在创建一个 XSD 模式来表示一个键值对列表。我想将键限制为字符串（这很容易），但允许值是**任何**XSD 简单类型（日期时间、字符串、int ...）。但是，我确实希望 xml 实例文档中的值是强类型的，即，如果值是日期时间、整数或字符串等，则应该显式声明它。有人可以举个例子，我如何强制执行显式值类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T09:13:47.847

您需要一个 xsd:union ，它允许将简单类型验证为列表中对其有效的第一个类型（如果您使用的是 PSVI，则可能会有所不同）：

```
<xsd:simpleType name="intOrDateOrBool">
  <xsd:union memberTypes="xsd:integer xsd:date xsd:boolean"/>
</xsd:simpleType> 
```

# sql-server - 将数据从 Excel 传输到 SQL Server

> ID：720654
> 
> 赞同：7
> 
> 时间：2009-04-06T08:50:59.353
> 
> 标签：sql-server, export

我有一个 Excel 电子表格，其中包含我需要放入 SQL Server 数据库的所有数据。我是 ASP.NET 的新手，以前从未从 Excel 导出到 SQL Server。

我的 Excel 电子表格看起来像这样

> 贸易标题 -> ArtID -> 商家名称 -> AdStyleCode -> 地址 -> 郊区

在 SQL Server 中，我创建了一个名为“Listings”的表，格式为

> intListingID -> intCategoryID -> BusinessName - ArtID -> intAdCode ->Address -> Suburb

从 Excel 导出数据然后将其导入 SQLServer 2005 的最佳方法是什么。

谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T08:57:19.977

您可以使用 SSIS 轻松完成此操作，您可以参考这两个链接了解完整的详细信息。

1.  [链接 1](http://www.builderau.com.au/program/sqlserver/soa/How-to-import-an-Excel-file-into-SQL-Server-2005-using-Integration-Services/0,339028455,339285948,00.htm)
2.  [链接 2](https://web.archive.org/web/1/http://blogs.techrepublic%2ecom%2ecom/datacenter/?p=205)

[编辑]

如果您有 Express，那么您可以尝试以下命令来设置链接服务器并获取数据

```
EXEC sp_addlinkedserver ExcelData,'Jet 4.0','Microsoft.Jet.OLEDB.4.0','C:\MyData.xls', NULL, 'Excel 5.0;'
GO 
```

然后您可以将数据选择到您的表中

```
INSERT INTO Listings ...
SELECT column1 AS intListingID, <put all columns here> FROM ExcelData...Data
GO 
```

有关其他选项，请查看[此链接](http://blogs.msdn.com/euanga/archive/2006/07/20/672272.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-24T18:06:25.080

我尝试通过 VBA 将数据从 Excel 导出到 SQL 服务器，如下所示：

```
Const myDB As String = "tenant"
Const myServer As String = "MPAADM"
Const myDB As String = "new"
Const myServer As String = "arjun"

Sub ExportTableToSQL()

    Dim cn As ADODB.Connection
    Dim cnSQL As ADODB.Connection
    Dim strSQL As String
    Dim lngRecsAff As Long
    Dim sqlTable As String
    Dim acell As Range
    Dim t1 As Date
    Dim t2 As Date
    Dim column As String

    On Error Resume Next
    path = Sheets("Sheet2").Range("B1").Value

    Kill path & \z_temp\aa.xls"
    Kill path & "\z_temp\aa.xls"

    On Error GoTo 0

    On Error GoTo 10
    column = Cells(1, 1).Value

        sqlTable = InputBox("Insert SQL table name")
    Application.Wait (Now + TimeValue("0:00:2"))
    t1 = Now
    Debug.Print t1
    If sqlTable = "" Then Exit Sub
    Application.ScreenUpdating = False
    Set acell = ActiveCell
    If IsEmpty(ActiveCell) Then
        MsgBox "Select a cell inside a table you want to export to SQL"
        Exit Sub
    End If
    ActiveCell.CurrentRegion.Select
    Selection.Copy
    Call NewWorkbook
    Cells(1, 1).Select
    ActiveSheet.Paste

    Set cn = New ADODB.Connection
    Set cnSQL = New ADODB.Connection
    With cnSQL
        .ConnectionString = "provider=sqloledb;Data Source=" & myServer & ";Initial Catalog=" & myDB & ";Trusted_Connection=Yes"
        '      .ConnectionString = "provider=sqloledb;Data Source=" & myServer & ";Initial Catalog=" & myDB & ";Uid=jayantuser;Pwd=Input@123"
        .Open
    End With

    ActiveWorkbook.SaveAs path & "\z_temp\aa.xls"

    cn.Open "Provider=Microsoft.ACE.OLEDB.12.0;" & _
    "Data Source=" & path & "\z_temp\aa.xls;" & _
    "Extended Properties=Excel 12.0"

    strSQL = "drop table " & sqlTable
    Debug.Print strSQL
    On Error Resume Next
    cnSQL.Execute strSQL, lngRecsAff, adExecuteNoRecords
    Err.Clear
    On Error GoTo 10

    strSQL = "SELECT * INTO [odbc;Driver={SQL Server};" & _
        "Server=" & myServer & ";Database=" & myDB & _
        ";trusted_connection=yes]." & sqlTable & _
        " FROM [sheet1$]"

Debug.Print strSQL    
    cn.Execute strSQL, lngRecsAff, adExecuteNoRecords    
    cn.Close
    Set cn = Nothing
    ActiveWorkbook.Close False
    On Error Resume Next
    Kill path & "\z_temp\aa.xlx"
    On Error GoTo 0
    t2 = Now
    Debug.Print t2
    MsgBox sqlTable & " table was successfully imported into SQL Server" & vbNewLine & "Transfered record number: " & lngRecsAff _
    & vbNewLine & "Time:" & Int((t2 - t1) * 86400) & "s"
    If MsgBox("Convert data type to bigint?", vbYesNo) = vbYes Then
        strSQL = "ALTER TABLE " & sqlTable & " ALTER COLUMN " & column & " bigint"
        cnSQL.Execute strSQL, lngRecsAff, adExecuteNoRecords
    End If 
    Application.ScreenUpdating = True
    acell.Select
    Exit Sub
10: MsgBox Err.Description
End Sub                                                                       `Sub NewWorkbook()
    Application.DefaultSaveFormat = xlOpenXMLWorkbook
    Workbooks.Add
End Sub`                                                                     
   `Sub Quit()
    Application.Quit
End Sub` 
```

# javascript - SQLite 和 Javascript：在插入或让 SQLite 引发异常之前检查数据是否存在

> ID：720656
> 
> 赞同：2
> 
> 时间：2009-04-06T08:51:36.140
> 
> 标签：javascript, exception, sqlite, mozilla

我的主要问题是哪种方法更快。

**一些简报**

我正在使用 Mozilla 开发一个应用程序。

我有一个模块，我可以在其中捕获一些数据并将其存储在数据库中。数据间歇性地进入。不存储任何重复项。为了讨论起见，我们可以假设一个表只有一列，让我们将该列命名为“关键字”。因此，如果我们得到一个已经在数据库中的关键字，我们就不会再次存储它。是的，我们已将此列设置为 PRIMARY KEY 并使其成为 UNIQUE。:)

**我的查询是：**

1）在我将这个新数据插入数据库之前，我应该做一个数据库调用并检查关键字是否存在；如果它不存在将其放入数据库？就像是：

```
function insert_keyword(keyword)
{
   if(!SQL.exists(keyword))
   {
       SQL.insert(keyword);
   } 
} 
```

或者

2）我只是插入并让数据库处理条件，有效地让它抛出一个我捕获的异常。

```
function insert_keyword(keyword)
{
    try {
       SQL.insert(keyword);
    }
    catch (e)
    {
       // keyword exists!
    }
} 
```

我知道捕获异常而不做任何事情是不好的！所以我不是在寻找什么是好的什么是坏的:)。我想了解的是哪种方法最快。（特别是与 Mozilla、JavaScript 和 SQLite 相关，但欢迎发表一般性评论！）

**旁注：** *SQL **。**我使用的语法仅用于说明目的。你可以假设我创建了 SQL 语句，执行它们并获取结果，或者假设它是一个 JavaScript 库调用，它完成了所有的脏活。*

**这个问题有点像这样：**

[我应该检查代码中的 DB 约束还是应该捕获 DB 抛出的异常](https://stackoverflow.com/questions/405359/should-i-check-for-db-constraints-in-code-or-should-i-catch-exceptions-thrown-by)

但我想具体了解与性能相关的差异，因为我正在处理的应用程序需要尽可能快（哪个应用程序不需要？;)）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-06T09:02:14.257

只需告诉您的数据库忽略重复项（仅适用于强制执行唯一值的列）：

```
INSERT OR IGNORE INTO table(keyword) VALUES("someWord"); 
```

或创建一个忽略重复项的列。

```
CREATE TABLE someTable(keyword PRIMARY KEY ON CONFLICT IGNORE); 
```

除了忽略之外，还有那些冲突条款：

```
回滚
中止
失败
忽视
代替

```

有关更多信息，请阅读[有关 SQLite 冲突子句的页面](http://www.sqlite.org/lang_insert.html)和[INSERT 语句的文档](http://www.sqlite.org/lang_conflict.html)。

* * *

至于使用异常或检查值的存在是否更快：异常在引发时是昂贵的，而在不引发时是零成本。这意味着如果您希望有许多重复项使用检查，并且如果只有少数关键字重复项使用例外。毕竟，*例外应该是例外。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T08:56:17.920

不确定这个问题的 mozilla/javascript 部分的细节，但有第三个选项“插入或替换”。它在没有重复的情况下完成了您想要的操作，并且如果该行已经存在，则无需签入代码。

# c# - 使用 LINQ、C# 解析 XML 并将元素转换为类型化集合

> ID：720661
> 
> 赞同：3
> 
> 时间：2009-04-06T08:52:56.540
> 
> 标签：c#, .net, xml, linq, collections

我有一个 XML 文档：

```
<statuses>
  <status>
  </status>
  <status>
  </status>
</statuses> 
```

我已将其解析为 XDocument，并希望使用 LINQ 将元素选择到状态类的强类型集合中（所有状态元素都是简单类型，字符串或 int）。

任何想法我怎么能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T09:12:14.607

使用`XDocument`，如下所示：

```
 class Status
    {
        public int Id { get; set; }
        public string Text { get; set; }
    }
    static void Main()
    {
        string xml = @"<xml>
<status id='1'><text>abcdef</text></status>
<status id='2'><text>ghijkl</text></status>
<status id='3'><text>mnopqr</text></status></xml>";
        XDocument doc = XDocument.Parse(xml);

        var list = (from el in doc.Root.Elements("status")
                   select new Status
                   {
                       Id = (int)el.Attribute("id"),
                       Text = (string)el.Element("text")
                   }).ToList();
    } 
```

请注意，`XmlSerializer`这也是一种可能性 - 减少您需要编写和维护的代码量。

# c# - 帮助！数据绑定在 Mac 上的 Silverlight 中不起作用

> ID：720667
> 
> 赞同：0
> 
> 时间：2009-04-06T08:54:39.283
> 
> 标签：c#, silverlight, macos, data-binding

我在 Silverlight 中编写了一个小[程序](http://nesteruk.org/projects/textsvc/)，虽然它在 Windows 上运行良好，但在 OSX 上，应用程序的数据绑定部分（所有这些调用）似乎`NotifyPropertyChanged`不起作用。有人知道为什么是这样吗？我在 Firefox 和 Safari 下都尝试过安装了最新的 2.0 下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-20T00:16:37.477

您是否尝试过对 Mac 使用[远程](http://msdn.microsoft.com/en-us/library/cc903948(VS.95).aspx) [sliverlight](http://blogs.msdn.com/ddietric/archive/2008/03/05/setting-up-silverlight-2-remote-debugging-on-mac-os-x.aspx) [调试](http://www.dnknormark.net/post/Windows-Vista-Mac-debugging-a-Silverlight-app-using-Visual-Studio-2008.aspx)？我希望获得调试器设置并打开第一次机会异常可以很好地向您展示问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T08:26:03.067

您在 Page 中对模型对象实例的使用对我来说很奇怪。这不是完全不正确的，但对我来说很不寻常。一些实验使我找到了一个可行的解决方案，尽管我不知道首先发生错误的原因。没有多少人直接在 DataContext 赋值中实例化对象，这可能就是为什么这不是一个众所周知的（并且已修复！）缺陷。

1.  从 MyModel 中删除 DependencyObject 基类。
2.  使 MyModel 实例成为 Page 的资源，而不是将其直接实例化到 DataContext 中。
3.  修改 Button_Click 事件处理程序以加载资源，而不是命名的 Page 子对象。
4.  全部做完！

工作解决方案的代码片段如下。

页面.xaml

```
<UserControl.Resources>
    <my:MyModel x:Key="TheModel"/>
</UserControl.Resources>
<Grid x:Name="LayoutRoot" Background="White" DataContext="{StaticResource TheModel}"> 
```

页面.xaml.cs

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    ((MyModel)Resources["TheModel"]).BeginUpdateBitmap();
} 
```

我的模型.cs

```
public sealed class MyModel : INotifyPropertyChanged
{ 
```

将来还请在您的问题中包含源代码。它会使这变得相当简单。

# git - 使用 Git 的项目中的项目

> ID：720669
> 
> 赞同：24
> 
> 时间：2009-04-06T08:54:48.300
> 
> 标签：git, version-control, git-submodules

如何设置 Git 项目以包含其他项目？

例如。我正在开发一个在线地图应用程序。我们开发了一个 GPS 工具和 SF 的一套装备。我们同时开发了一个 Python 地理映射脚本和一个不同的关注点（只关心地理映射）。我们自己的核心文件将两者结合起来，并在它们的基础上构建我们需要的应用程序。

每个项目都必须单独存在——对 GPS 感兴趣的人只对 GPS 感兴趣——但包含所有其他项目的“父”项目必须作为项目访问。

我花了一些时间试图理解子模块，但它们似乎对所需的东西有太多的独立性。

此外，如果可能的话，如果这些项目中的每一个都可以包含一个或两个重叠的脚本，那就太好了。一个 Git 项目是否可以包含一个不属于其“根”的文件，以便当任何一个团队更新该文件时，双方都可以受益？

这对 Git 可行吗？与水银？主机（GitHub、Gitorious）重要吗？

我有使用 Subversion 作为“父级”的想法——忽略 .git 文件夹，并将 Git 用于项目（忽略 .svn 文件夹）——但这只是最后的手段。

编辑：

解释为什么我不想要子模块：

1.  用户下载时，zip 不包含子模块（[此处](http://support.github.com/discussions/site/354-why-does-downloading-a-project-not-download-submodules)和[此处](http://support.github.com/discussions/site/110-downloads-dont-include-submodules)）。当甚至合作者尝试设置项目时也是如此。这是一个表演终结者。
2.  子模块被冻结 - 它们不会（轻松）获取所指向的项目的最新版本。
3.  [下面的精彩答案和NoPugs](http://nopugs.com/2008/09/04/why-ext)的独白中指出的其他原因。

子树合并（由 Paul 介绍给我，如下）不会：很难从合并到的项目中更新 [子树] 的源，并且该源必须位于“根”文件夹之外该项目。作为一个网络应用程序，我的所有页面都必须在内部链接到其中的一个文件夹，并且直接在该文件夹中完成测试和更新。（希望这对其他人来说清晰且有用。）

仍在研究建立“远程分支”，但仍然欢迎其他想法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-06T18:16:49.430

我还没有发现子模块对我从事的（小）项目特别有用。设置它们后，处理整个项目需要为几乎每个命令添加额外的参数，并且语法并不完全规则。我想如果我从事具有更多子模块的大型项目，我会认为这是一个更有益的权衡。

有两种可能性可以将子项目保持为独立的 git 存储库，您可以将其拉入主（集成）存储库：

*   使用**子树合并** [将您的外部项目放入](http://www.kernel.org/pub/software/scm/git/docs/howto/using-merge-subtree.html) 包含核心文件的主存储库中的单独子目录中。这使得从外部项目更新主项目变得容易，但将更改发送回外部项目很复杂。我认为这是包含项目依赖项的好方法，但它不适用于共享文件。 [另一个简单的解释（链接固定）](http://nuclearsquid.com/writings/subtree-merging-and-you)。

*   将每个**项目设置为主存储库中的远程分支**，并将每个项目合并到您的`master`（集成）分支中，该分支也包含您的核心文件。这需要一些纪律：如果您对主仓库中的外部项目进行任何更改，它们必须在分支中进行，然后合并到主库中；而且您永远不想合并到项目分支中。这使得将更改发送回外部项目变得很容易，并且是 Git 中完全可以接受的分支使用。

    您的共享脚本可以作为主目录中的另一个独立分支处理，您的外部合作伙伴可以从中提取和推送作为远程分支。

如果您尝试在同一目录中运行 SVN 和 Git，那么在任一系统中都很难使用分支，因为 SVN 通过复制文件目录进行分支，而 Git 跟踪指针。两个系统都不会自动看到您在另一个系统中创建的分支。我认为“解决方案”比它的价值更麻烦。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T19:00:03.710

我使用 git 将我自己的 github 托管项目和我想使用的外部 UI 库拼接在一起。该库托管在 sourceforge 上的 subversion 存储库中。

我使用了 git-submodule 和 git-svn，它运行得相当好。缺点是：

1.  为了跟上库存储库的最新状态，我必须执行新的提交来更新子模块 git hash “指针”。这是因为 git 子模块，不像 svn:externals，被固定到一个特定的提交 id。如果您真的想固定一个稳定版本，这可能不是真正的缺点，我正在使用 WIP 代码。

2.  带有子模块的 git repo 的初始拉取需要使用“git submodule init”的额外步骤。这对您来说不是问题，但对于使用您的代码的其他人来说，他们必须记住或被告知在编译/运行/测试您的代码之前执行此步骤。

3.  如果你使用命令行，很容易用 git-add 搞砸你的存储库。这是因为您键入`git add subm<tab>`要完成到`git add submodule`，但它会自动完成以`git add submodule/`- 注意尾部斜杠。如果您使用尾部斜杠执行命令，那么它会闪击子模块并添加其所有包含的文件。这可以通过使用 git-gui 来缓解，`git add .`或者只是训练自己删除斜线（它发生在我身上的次数足够多，我训练自己删除它）

4.  子模块提交可能会弄乱 git rebase -i。我忘记了确切的细节，但如果你有一个“脏”的子模块并且你运行一个 rebase-interactive，那就特别糟糕了。通常使用脏树你不能变基，但不检查子模块。在一个变基组中有多个子模块提交也会导致问题。最后一个子模块哈希被提交给你列表中的第一个选择，这在以后修复是相当棘手的。这可以通过更仔细的工作流程来解决（即仔细决定何时进行子模块提交......）但可以是 PITA。

设置它的步骤大致如下：

1.  跑`git svn clone https://project.svn.sourceforge.net/svnroot/project/project/trunk`
2.  将其作为“真正的”git 项目推送到例如 github
3.  现在在您自己的 git 存储库中，运行`git submodule init`
4.  `git submodule add git://github.com/project subproject`
5.  这次也将其推送到您自己的仓库中。

就是这样，或多或少。您将有一个新目录“子项目”，在您的情况下将是地理映射库。

每次您需要更新地理映射代码时，您将运行以下代码：

```
cd subproject
git svn rebase
git svn push  # this updates the git mirror of the subproject
cd ..
git add subproject # careful with the trailing slash!
git commit -m "update subproject"
git push # this pushes the commit that updates the subproject 
```

我没有看过很多关于 git 子模块工作流程的教程，所以我希望这能帮助你做出决定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T10:09:07.043

git-submodule 可能是您正在寻找的：

[http://book.git-scm.com/5_submodules.html](http://book.git-scm.com/5_submodules.html)

[http://git-scm.org/gitwiki/GitSubmoduleTutorial](http://book.git-scm.com/5_submodules.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-16T16:48:55.067

从我读过的关于[Externals](http://www.nopugs.com/category/externals)的一点点来看，它似乎是 SVN 'externals' 到 GIT 的一个端口。

这解决了 GIT 子模块的一些问题，包括自动更新到最新版本。

虽然我没有 SVN 外部或这个项目的经验，但对于某些人来说，这可能是比其他任何发布的更好的解决方案。

或者，以下软件（看起来可以与 GitHub 一起使用）。可能是另一种给猫剥皮的方法： [辫子](http://wiki.github.com/evilchelu/braid)（[软百科页面](http://mac.softpedia.com/get/Developer-Tools/Braid.shtml)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-16T16:52:44.310

这取决于您正在处理什么样的项目，以及需要哪些工具（如果有）与您的 SCM 交互。例如，Rails 经常使用 Capistrano 进行部署，Capistrano 对您的目录结构相对于存储库根目录的外观做出某些假设。在这种情况下，如果您有多个相互关联的 Rails 应用程序，则需要使用子模块。每个应用程序都有自己的存储库，然后您拥有一个更大的存储库，将每个独立的存储库作为子模块进行管理。

即使您没有做出此类假设的工具，良好的存储库设计也要求您将事情分解一下，如果有一天您可能想要独立使用更大项目的一个子部分，或者重用一些独立项目中的大量代码。

在 git 中很难在维护版本历史的同时提取存储库的某些子部分作为自己的独立实体，因此提前计划是一个好主意。

至于你的具体问题，老实说，我认为这是一个完美的例子，说明几个子模块是理想的。关于共享脚本，如果由于某种原因这实际上是一个被证明有问题的问题，您始终可以使用符号链接。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-17T12:46:10.450

[我按照https://github.com/jmnavarrol/simplest-git-subrepos](https://github.com/jmnavarrol/simplest-git-subrepos)（免责声明：我是它的作者）的轨迹，通过使它们相当独立来处理这些*“外部”子组件。*

实际上，我正在使用 Python 端口，因此我能够在 Bash 中添加困难的功能，例如 subrepos 配置文件是 YAML，例如：

```
---
# Subrepos' definition
#
# subrepos:
# - path: relative_path
#   repo: URL to git service
#   [gitref: gitref]

subrepos:
- path: 'projects/simplest-git-subrepos'
  repo: 'git@github.com:jmnavarrol/simplest-git-subrepos.git'
  gitref: 'v1.0.0' 
```

这允许*“修复”*版本的分发以及简单的开发，无论是*“主”*和*“相关”*项目。

# .net - 在 .NET 中使用私钥对文件进行签名

> ID：720673
> 
> 赞同：6
> 
> 时间：2009-04-06T08:55:40.840
> 
> 标签：.net, encryption

如何使用 .NET 对文件进行签名，以及如何在读取生成的密钥后验证生成的密钥是否有效？

我的目标是拥有一个包含一些值和生成密钥的文本文件。然后，我希望能够在将文件发送给客户后检查文件中生成的密钥，以确保没有人篡改文件中的值。

更新：在答案的帮助下在[这里找到了它。](http://msdn.microsoft.com/en-us/library/hk8wx38z.aspx)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-06T11:35:58.723

尝试这个：

```
class Program
{
    static byte[] Sign(string message, RSAParameters key)
    {
        RSACryptoServiceProvider rsa = new RSACryptoServiceProvider();
        rsa.ImportParameters(key);

        byte[] toSign = Encoding.Unicode.GetBytes(message);
        return rsa.SignData(toSign, "SHA1");
    }

    static bool Verify(string message, byte[] signature, RSAParameters key)
    {
        RSACryptoServiceProvider rsa = new RSACryptoServiceProvider();
        rsa.ImportParameters(key);

        byte[] toVerify = Encoding.Unicode.GetBytes(message);
        return rsa.VerifyData(toVerify, "SHA1", signature);
    }

    static void Main(string[] args)
    {
        string message = "Let's sign this message.";

        RSACryptoServiceProvider rsa = new RSACryptoServiceProvider(); // Creates a new RANDOM key.
        RSAParameters privatekey = rsa.ExportParameters(true);
        RSAParameters publickey = rsa.ExportParameters(false);

        byte[] signature = Sign(message, privatekey);

        if (Verify(message, signature, publickey))
        {
            Console.WriteLine("It worked!");
        }
    }
} 
```

请务必注意，每次启动此程序时都会生成一个新的公钥/私钥对。为了做你想做的事，你需要在两端使用它之前保存公钥/私钥对。您的公钥是您唯一需要验证的内容，因此您的私钥不会发布给客户端。

您可能想看看 ExportParameters 或 ExportCspBlob 来完成保存/加载公钥/私钥对。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T09:14:10.670

如果你想签署一个程序集，jaloplo 给出了解决方案。

如果您想对程序创建的某些文件进行签名，请查看 System.Security.Cryptography 命名空间中的[DSACryptoServiceProvider 类](http://msdn.microsoft.com/de-de/library/system.security.cryptography.dsacryptoserviceprovider.aspx)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-04-06T09:00:13.327

你有两种可能：

*   一次是在“签名”选项上的项目属性上。
*   第二种是修改`AssemblyInfo.cs`文件并添加使用生成的sn的命令：`[assembly: AssemblyKeyFile("..\\..\\SN_Generated.snk")]`

# c - 如何使用 C 程序从 xml 文件中删除节点？

> ID：720677
> 
> 赞同：1
> 
> 时间：2009-04-06T08:56:42.320
> 
> 标签：c, xml, parsing

我在我的程序中使用 libxml/xmlparser.h 库来解析 xml 文件。该库中是否有可以从 xml 文件中删除节点的函数？

我想完全删除节点，即它的属性和属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T09:02:45.503

这样做的唯一方法是将内存中的文件解析为树（显式或隐式），删除问题节点，然后用新树覆盖文件内容。XML 不是具有可以从永久网络存储中随意删除的记录概念的数据库。

# c# - 在 C# 中解析 JavaScript 代码

> ID：720678
> 
> 赞同：8
> 
> 时间：2009-04-06T08:56:49.107
> 
> 标签：c#, .net, javascript, parsing

我有以下 JavaScript 代码作为字符串文字：

```
var $Page = new function()
{
    var _url= 'http://www.some.url.com';

    this.Download = function()
    {
        window.location = _url;
    }
} 
```

有没有办法`_url`从我的 C# 代码中获取变量的值？也许是一个开源库？我使用正则表达式做到了这一点，但我希望有一种更优雅的方式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-08-25T02:55:51.473

您应该查看 Codeplex 上的开源 Javascript .NET ( [http://javascriptdotnet.codeplex.com/](http://javascriptdotnet.codeplex.com/) )。

此代码示例应该可以帮助您：

```
Javascript context = new JavascriptContext();
context.Run("var _url= 'http://www.some.url.com';") // You put your javascript in the function run
String url = (String)context.GetParameter("_url"); // You get your url from javascript 
```

而已。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-09-22T21:18:32.133

如果您需要的不仅仅是获取价值，那么在[http://jint.codeplex.com](http://jint.codeplex.com)上有一个 C# 中的开源 JavaScript 解释器。

现在已移至[GITHUB](https://github.com/sebastienros/jint)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T09:05:03.470

[您可以使用DLR](http://dlr.codeplex.com/)和/或[MyJScript](http://myjscript.codeplex.com/)执行 javascript 函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T13:11:01.803

You could use a javascript parser, but parsing javascript for just that one value is probably way overkill.

# asp.net - 在 ASP.NET /IIS7 中本地模拟域

> ID：720688
> 
> 赞同：2
> 
> 时间：2009-04-06T08:59:07.260
> 
> 标签：asp.net, iis

我想通过 simdomain.com 模拟我的 ASP.NET 应用程序是 hist。

我怎样才能轻松做到这一点？

理想情况下，我想要某种过滤器，因此对某些域的请求被路由到本地主机，并且应该很容易打开和关闭它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-06T09:00:21.577

编辑[主机文件](http://en.wikipedia.org/wiki/Hosts_file)。

1.  跑`notepad c:\windows\system32\drivers\etc\hosts`
2.  添加以下行：

    127.0.0.1 simdomain.com

3.  打开 IIS admin 并添加一个“simdomain.com”网站。所以它知道域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T09:07:22.777

尝试编辑您的本地主机文件。在大多数 Windows 系统中，默认位置是 %SystemRoot%\system32\drivers\etc\hosts。

然后你只需添加该行

```
127.0.0.1       simdomain.com 
```

那应该这样做。

编辑：啊，正如 Chakrit 所说：打开 IIS 管理员并添加一个“simdomain.com”网站。所以它知道域。

这取决于 IIS 版本，但如果我记得正确 IIS7，请执行以下操作：

1.  运行“inetmgr”，或通过控制面板访问 IIS 设置。
2.  在左侧菜单中打开“站点”，然后右键单击要访问的站点。选择“编辑绑定..”
3.  单击添加。类型：Http，IP 地址：全部未分配，端口：80，主机名：simdomain.com，然后单击确定。

即使帖子有点多余，也不妨让我的答案正确。;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T09:05:19.240

也许读过这个 SO 讨论；[“ASP.NET 开发服务器或本地主机 IIS”](https://stackoverflow.com/questions/281667/asp-net-development-server-or-localhost-iis/ "ASP.NET 开发服务器或本地主机 IIS")

# c++ - 如何返回二维字符数组 C++？

> ID：720707
> 
> 赞同：10
> 
> 时间：2009-04-06T09:05:45.903
> 
> 标签：c++, arrays, multidimensional-array

我在函数内部创建了二维数组，我想返回该数组，并将其传递给其他函数。

```
char *createBoard( ){  
  char board[16][10];
  int j =0;int i = 0;
  for(i=0; i<16;i++){
        for( j=0;j<10;j++){   
                board[i][j]=(char)201;
        }   
  }
  return board;
} 
```

但这一直给我错误

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-06T09:15:49.917

是的，看看你在做什么是返回一个指向`board`在堆栈上创建的对象（称为数组）的指针。数组超出范围时将被销毁，因此指针不再指向任何有效对象（悬空指针）。

您需要确保将数组分配在堆上，使用`new`. 在现代 C++ 中创建动态分配数组的神圣方法是使用类之`std::vector`类的东西，尽管这里更复杂，因为您正在尝试创建 2D 数组。

```
char **createBoard()
{
    char **board=new char*[16];
    for (int i=0; i<16; i++)
    {
       board[i] = new char[10];
       for (int j=0; j<10; j++)
         board[i][j]=(char)201;
    }

    return board;
}

void freeBoard(char **board)
{
    for (int i=0; i<16; i++)
      delete [] board[i];
    delete [] board;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-06T09:21:21.153

最好的方法是创建一个板类并将 ctreateBoard 函数作为其构造函数：

```
class Board {
  private:
   char mSquares[16][10];

   public:
    Board() {
        for(int i=0; i<16;i++){
        for( int j=0;j<10;j++){   
                mSquares[i][j]=201;
        }       
    }

   // suitable member functions here
 }; 
```

有关如何使用此类课程的信息，没有什么可以替代阅读一本好书。我强烈推荐Andrew Koenig 和 Barbra Moo 的[Accelerated C++](http://www.acceleratedcpp.com/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T09:15:21.713

这种方法行不通。如果您返回指向局部变量的指针，您将遇到未定义的行为。*而是在堆上分配一个带有新*的数组并将数据复制到其中手动索引它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-06T09:17:32.770

我真的建议为此使用 STL vector<> 或 boost/multi_array 容器。

如果必须使用数组，那么我建议使用 typedef 来定义数组。

```
typedef char[16][10] TBoard; 
```

你也可以返回

```
 char** 
```

...但是您需要将其类型转换为正确的大小才能正确索引它。C++ 不支持动态多维数组。

也正如其他人所建议的那样，您不能返回堆栈上的对象（即局部变量）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T10:05:49.783

如其他提到的，不要返回指向局部变量的指针。如果我被迫做你想做的事，首先我会选择 std::vector。由于您还没有学习 std::vector，这里还有另一种方法：

```
void createBoard(char board[16][10])
{  
  int j =0;int i = 0;
  for(i=0; i<16;i++){
        for( j=0;j<10;j++){   
                board[i][j]=(char)201;
        }       
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T09:11:49.367

你应该返回`char**`而不是`char*`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-06T09:16:12.397

您的问题的简单答案是 char**。

话虽如此，不要这样做！您的“板”变量不会持续到 createBoard() 之外。

使用[boost::multi_array](http://www.boost.org/doc/libs/1_38_0/libs/multi_array/doc/user.html#sec_example)并将其作为引用传递给 createBoard() 或直接返回（但如果这样做，它将被复制）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-06T09:17:50.770

您不能返回指向函数局部变量的指针，因为一旦函数返回，该空间就会被覆盖。

与板相关的存储在函数的堆栈上。

# vb.net - rpc 服务器不可用（来自 hresult 的异常：0X800706BA）

> ID：720708
> 
> 赞同：3
> 
> 时间：2009-04-06T09:06:18.163
> 
> 标签：vb.net, excel

我的应用程序扫描 excel 文件并生成一份报告，其中包含每个 excel 文件中的 Activex 控件计数。但是在从客户端机器运行该工具时，我们在打开文件时遇到错误（对于某些文件不是全部​​）并且文件位于服务器端，如下所示：

**“rpc 服务器不可用（来自 hresult 的异常：0X800706BA）”**

你能指导我为什么会发生这种情况......

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T09:20:19.940

这通常是因为您正在与之通信的服务器已崩溃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-25T04:18:59.920

首次以编程方式启动 Excel 时，它会通过 RPC 服务器连接到 Excel。当您关闭文档时，此服务器会在您的应用程序不知道的情况下关闭。

解决方案是捕获错误并重新初始化您的 Excel 对象。然后你就可以继续了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:02:25.403

它似乎是一个众所周知 [的错误。微软支持](http://support.microsoft.com/kb/935677/en-us)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-13T09:27:45.083

我遇到了同样的问题，在网上搜索后，没有任何效果。所以我尝试了其中一条评论来打开和关闭本地和服务器的 Excel，它可以工作！

如果您有同样的问题，请尝试打开 Excel 或您正在使用的 Excel 文件并关闭它。

然后尝试再次运行您的应用程序。

# c# - 比 SHA1 更好的散列

> ID：720710
> 
> 赞同：2
> 
> 时间：2009-04-06T09:07:03.217
> 
> 标签：c#, hash

我正在开发一个应用程序，我需要存储用户密码，所以我想我会将它存储在注册表的当前用户类中，但我也想对它进行哈希处理，原因很明显，而且我已经看到表明 SHA1 已被破解的新闻项目，“标准”系统或 .net 中是否有更好的（未破解的）散列算法可用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-06T09:16:25.080

SHA1 不是[加密](http://en.wikipedia.org/wiki/Encryption)，它是一个[加密哈希函数](http://en.wikipedia.org/wiki/Cryptographic_hash_function)。是的，它已经被破坏了，这意味着它可以比蛮力方法更快地产生碰撞。SHA2 家族并没有被破坏。

但我建议每个条目使用自定义种子，这样[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)就不能用于尝试密码。如果您使用 SQL Membership 提供程序，则[密码格式“Hashed”](http://msdn.microsoft.com/en-us/library/system.web.security.membershippasswordformat.aspx)已经为每个用户使用了不同的种子。

可以在Thomas Ptacek的文章[What You Need To Know About Secure Password Schemes中找到有关播种哈希的更多信息。](http://chargen.matasano.com/chargen/2007/9/7/enough-with-the-rainbow-tables-what-you-need-to-know-about-secure-password-schemes.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T09:10:46.450

正如您在评论中所说，SHA1 是一种哈希算法，而不是加密。这是一种单向功能，即使它被破坏，也不允许找回密码。

如果您想要 .NET 中已有的更强大的哈希函数，请查看 SHA2 系列 - SHA256、SHA384、SHA512。（SHA224 也存在，但未在 System.Security.Cryptography 命名空间中实现。）

对 SHA1 的碰撞攻击实际上还不能被利用，但你是正确的向前看。鉴于这些攻击，NIST 目前正在运行 SHA3 的选择过程，但这距离完成和商业接受还有几年的时间。另一方面，SHA2 是由 NIST 标准化的现有算法系列，不受针对 MD5 和 SHA1 的成功攻击的影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T09:13:51.983

你需要做的是给你的密码[加盐。](http://en.wikipedia.org/wiki/Salt_(cryptography))下面是一些使用 SHA1 和 salting 的 C# 中的实际[示例代码](http://www.obviex.com/samples/hash.aspx)。

SHA1“被破解”的问题是所有基本可能的组合都已预先计算，但是加盐使您的密码非基本（如果它很弱或容易猜到，它仍然容易受到暴力破解，但它会杀死彩虹表）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T15:43:48.910

哈希算法最近显示出一些[弱点](http://en.epochtimes.com/news/7-1-11/50336.html)，这就是为什么 NIST 提供了一个[哈希竞赛](http://csrc.nist.gov/groups/ST/hash/documents/FR_Notice_Nov07.pdf)，就像他们有一个加密竞赛一样，将[Rijndael](http://csrc.nist.gov/archive/aes/rijndael/Rijndael-ammended.pdf)加冕为新的[AES](http://csrc.nist.gov/archive/aes/index.html)。

~~我个人喜欢[MD6](http://groups.csail.mit.edu/cis/md6/)所提供的东西，因为它是由在密码学领域工作了 30 多年的 Ron Rivest 带头的。~~MD6 已经被撤回，所以我建议在第 2 轮中以我拙见的一些更强的候选人是 Keccak、Blue Midnight Wish 和 Fugue。

从那里开始，一定要使用良好的做法，例如加盐。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T09:16:32.927

是的，您可以使用 SHA512，只需记住实际哈希的长度。您也可以随时通过加盐哈希结果来增加额外的安全性。

```
SHA512("The quick brown fox jumps over the lazy dog") = 
   07e547d9 586f6a73 f73fbac0 435ed769 51218fb7 d0c8d788 a309d785 436bbb64
   2e93a252 a954f239 12547d1e 8a3b5ed6 e1bfd709 7821233f a0538f3d b854fee6 
```

如果您想研究其他散列算法，[这里有一个简短的列表。](http://en.wikipedia.org/wiki/List_of_hash_functions)

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2009-04-06T11:58:03.023

晚了 5 天，但你可以试试这个高度安全的加密功能：

```
uint64_t highly_secure_encrypt(char* password) {
  sleep(1);
  return 0;
} 
```

你不可能从中取回密码。

现在，谈严肃的事情。如果您还不知道问题的答案，那么您不应该设计安全系统。

如果您将密码存储在注册表的当前用户部分，那么唯一可以访问它的人（在正常情况下）是用户和管理员。我会（在某种程度上）信任注册表的当前用户部分并使用操作系统提供的标准密码散列机制。

Jeff Atwood 的[“Rainbow Hash Cracking”](http://www.codinghorror.com/blog/archives/000949.html)以很好的初学者细节描述了哈希和密码存储，Thomas Ptacek 的[“彩虹表足够了：关于安全密码方案你需要知道的事情”](http://chargen.matasano.com/chargen/2007/9/7/enough-with-the-rainbow-tables-what-you-need-to-know-about-secure-password-schemes.html)继续告诉你为什么不应该尝试去做通常是自己。

选择一个好的哈希函数不到战斗的 1%。如果攻击者可以每秒运行数百万次哈希函数，那么他可以每秒测试数百万次组合。您需要的是一个缓慢的、可调的安全散列。这不是一件容易实现的事情，SHA*、MD5 等被设计得非常快，因为它们通常用于文件和文件块，速度为王。

我建议您阅读更多内容，因为答案就在那里并且很容易找到。

# compiler-construction - 制作一门语言，需要一个好的后端

> ID：720714
> 
> 赞同：11
> 
> 时间：2009-04-06T09:07:53.387
> 
> 标签：compiler-construction, backend, intermediate-language

我想做一种编译语言。我目前正在评估后端。到目前为止，我关注 C 是因为它的执行速度、编译速度和一个名为 TCC 的小型、易于使用的编译器。

阅读了此处关于将其用作中间语言的讨论后，我正在尝试考虑如何使其与垃圾收集兼容并处理异常。到目前为止，我认为我可以同时解决这两个问题，但开销很大。

以下是我对其他可能的后端的一些想法：

1.  组装：不便携，编程非常痛苦。
2.  .NET：感觉真的很慢。5 秒启动，5 秒评估 Ironpython 和 Boo 上的 1+2。没有大型库就无法运行。
3.  JVM：感觉有点慢。无法访问二进制库。没有大型库就无法运行。
4.  LLVM：不支持 Windows。我听说编译后的可执行文件大小是 16 mb+
5.  C--：看起来不发达。
6.  C++：可能。找不到我可以捆绑的漂亮的小免费。

你们中的任何人都可以改变我的想法或有更多内容要添加到此列表中吗？

**编辑**

我最近一直在尝试 LLVM。我发现他们已经预编译了二进制文件，并且可以编译为本机程序集。

[http://www.antlr.org/wiki/display/CS652/Generating+machine+executable+binaries+with+LLVM](http://www.antlr.org/wiki/display/CS652/Generating+machine+executable+binaries+with+LLVM)

以下是步骤：

1.  在 LLVM 程序集上运行 llvm-as，这会产生一个 LLVM 字节码文件。
2.  在 LLVM 字节码文件上运行 llc 以生成汇编文件。
3.  对汇编文件运行汇编程序以生成目标文件。（或运行似乎依赖于外部安装的 c 编译器的 llvm-ld）
4.  使用 gcc 等编译为可执行文件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-06T09:20:11.063

您是否考虑过为[GCC](http://gcc.gnu.org/)编写前端？我只是为了完整起见而提到这一点——据我所知，后端接口相当复杂，代码库庞大且难以理解。

另一方面，GCC 是一个成熟的产品，有许多专业的程序员在研究它。至少，它可能提供了所有替代方案中最坚实的基础。

就个人而言，我更喜欢 LLVM（令人兴奋的架构）或 .NET 的 IL：非常非常易于使用，具有出色的工具支持（[Reflector](http://www.red-gate.com/products/reflector/)、[Cecil](http://www.mono-project.com/Cecil)、[Reflexil](http://sebastien.lebreton.free.fr/reflexil/)以及最后但并非最不重要的 .NET 反射 API）和两个非常高效的实现（即微软的规范实现和Mono）。

但我不能声称拥有任何架构的专业知识，所以对这个答案持保留态度。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-06T12:39:47.073

在这种情况下，LLVM 可能是更好的选择。

LLVM 有 Windows 支持，编译只需要一些时间

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-06T09:14:48.237

C++ 不会给你太多，请改用 C。但是，如果您希望您的语言在 Web 中使用，请使用 .NET 或 Java，确保它们的加载速度很慢，但当它们加载时，它们与 C 一样快。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-06T09:18:52.360

对于[SmartEiffel](http://smarteiffel.loria.fr)，我们使用 C 作为后端。

Tcc 是一个非常好的开发选择——尽管不是最终版本（生成的对象相当于 gcc -O0）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-04T05:11:49.230

TCC 是最好的选择。它是可移植的，并且它有一个库，因此它可以很容易地用作称为 libtcc 的后端。可执行文件比 gcc 小，它是 ANSI C。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-07T06:39:23.560

另一个要添加到列表中的内容：Slava 最近在[Factor backend](http://factor-language.blogspot.com/2009/04/sup-dawg-we-heard-you-like-smalltalk-so.html)上实现了 Smalltalk 。我自己没有尝试过，但我觉得它会提供更多你想要的更高级别的功能，更像是低级别的尺寸/性能。

# hibernate - 陷阱和实际用例：Toplink、Hibernate、Eclipse Link、Ibatis

> ID：720717
> 
> 赞同：3
> 
> 时间：2009-04-06T09:09:14.117
> 
> 标签：hibernate, jpa, ibatis, eclipselink, toplink

我用 Hibernate 作为我的 JPA 实现做了很多工作。在大多数情况下，它工作正常！但我也看到了很多陷阱：

*   使用持久对象进行远程处理很困难，因为 Hibernate 用自己的集合实现替换了 Java 集合。所以每个客户端都必须有 Hibernate .jar 库。您必须注意 LazyLoading 异常等。解决此问题的一种方法是使用 Web 服务。
*   对数据库进行不带任何锁定的脏检查。
*   “延迟 SQL”，导致数据访问不符合 ACID。（丢失的数据...）
*   隐式更新>>所以我们不知道对象是否被修改（提交导致更新）。

Toplink、Eclipse Link 和 Ibatis 是否存在类似问题？我应该什么时候使用它们？他们有类似的表现吗？是否有理由选择 Eclipse Link/Toplink... 而不是 Hibernate？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-09T15:06:58.397

我可以分享我相当数量的 Hibernate 陷阱：

*   Criteria API 不是类型安全的
*   Criteria API 的设计相对较差（例如：您无法检索当前别名）
*   如果您创建别名，则强制进行内部连接（这在文档中但具有误导性）
*   不支持 UNION
*   没有简单的方法来“*解除代理*”持久对象（第三方支持远程处理）
*   不支持没有 PK 的表（我现在很笨，但它发生在旧模式中）
*   没有简单的方法使用非 PK 列的序列（不是那么愚蠢）

对于大多数 JPA 实现，我总是发现我必须依赖一些自定义注释来完成 JPA 规范中未涵盖的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-13T11:14:32.997

> 是否有理由选择 Eclipse Link/Toplink... 而不是 Hibernate？

在 O/R 映射器开发者领域（我住的地方；））Toplink 被认为是功能最完整和最好的 O/R 映射器，这是一个普遍的事实。它有它的弱点，但它的大量功能使其难以被击败。由于它现在是开源且免费的，我会尝试一下。

iBatis 并不是真正的 O/R 映射器，它更像是通过硬编码 SQL 实现的类填充/持久化。因此，您必须完成繁重的工作并且必须编写所有查询。当您使用带有存储过程的数据库并且必须利用这些过程进行 DML/集合检索时，iBatis 非常有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T13:22:05.457

无法评论其他实现，但对于 DataNucleus AccessPlatform ...

1.  远程处理可能需要存在“jdo.jar”，因为模型类是字节码增强的。或者，如果在远程端使用“只读”，则在那里使用未增强的类，并且所有工作都无需额外的 jar。
2.  脏检查是通过字节码增强完成的，因此无需去数据存储区查看字段是否脏（当您想要访问数据存储区时，您可以控制锁）。显然，与基于反射的实现相比，这具有显着的性能优势。
3.  我知道不可能有“丢失的更新”；使用乐观锁定会有所帮助。
4.  由于“托管关系”，您可以获得隐式更新（您有一个双向关系并且您只更改一侧，因此 DataNucleus 将另一侧更新为一致......在flush（））。您可以关闭“托管关系”（在一定程度上）。您可以轻松启用对象的版本控制并了解对象是否被修改。

[此处记录](http://www.datanucleus.com/home/why.html)了选择 DataNucleus 的原因

高温高压

——Andy [DataNucleus](http://www.datanucleus.org)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-05-06T01:04:23.817

关于 Ebean ORM [http://www.avaje.org](http://www.avaje.org)和您的陷阱：

**远程处理**

您可以在查询中使用“vanilla”模式，然后 Ebean 将返回普通 bean 和集合。这仅在您使用“动态代理/动态子类”时有效，但在您使用增强功能时无效（因为实体 bean 类明显增强）。

**对数据库进行不带任何锁的脏检查**。

我相信你的意思是乐观并发检查？如果是这样，那么根据定义，它是在没有显式数据库锁的情况下完成的。如果您想要/需要数据库锁（选择更新等），则需要使用悲观锁定 - 所以我不理解您的观点。

**延迟的 SQL**

Ebean 没有会话，因此它没有会话 flush()。当您使用 JDBC 批处理时，SQL 仍然可以通过 Ebean 延迟，但它与使用 session flush() 获得的延迟不同。

**隐式更新**

我们从前 Hibernate 和前 JPA 人员那里听到的常见抱怨。Ebean 的架构没有会话/实体管理器。相反，您需要显式地 save() 一个 bean 或将其级联到相关的 bean。所以是的，Ebean 没有隐式更新。

# c# - WPF DataGrid 中的文本对齐方式

> ID：720732
> 
> 赞同：58
> 
> 时间：2009-04-06T09:13:41.670
> 
> 标签：c#, .net, wpf, xaml, wpftoolkit

如何将列数据对齐到 WPF 中的中心`DataGrid`？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2010-04-28T12:39:44.277

如果您使用的是 DataGridTextColumn，则可以使用以下代码片段：

```
<Style TargetType="DataGridCell">
     <Style.Setters>
            <Setter Property="TextBlock.TextAlignment" Value="Center" />
     </Style.Setters>
</Style> 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2009-04-06T09:45:48.473

不知道细节很难说，但这里有一个`DataGridTextColumn`集中的：

```
<wpf:DataGridTextColumn Header="Name" Binding="{Binding Name}" IsReadOnly="True">
    <wpf:DataGridTextColumn.CellStyle>
        <Style>
            <Setter Property="FrameworkElement.HorizontalAlignment" Value="Center"/>
        </Style>
    </wpf:DataGridTextColumn.CellStyle>
</wpf:DataGridTextColumn> 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-05-09T10:17:09.587

我从 huttelihut 的解决方案开始。不幸的是，这对我来说还没有用。我调整了他的答案并想出了这个（解决方案是将文本向右对齐）：

```
<Resources>
    <Style x:Key="RightAligned" TargetType="TextBlock">
        <Setter Property="HorizontalAlignment" Value="Right"/>
    </Style>
</Resources> 
```

如您所见，我将样式应用于 TextBlock，而不是 DataGridCell。

然后我必须设置**元素**样式，而不是**单元格**样式。

```
ElementStyle="{StaticResource RightAligned}" 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2011-03-28T07:54:32.447

肯特·布加特 +1。我最终这样做了，这使代码稍微不那么混乱（并使我能够在几列上使用对齐方式）：

```
<Resources>
      <Style x:Key="NameCellStyle" TargetType="DataGridCell">
                <Setter Property="HorizontalAlignment" Value="Center" />
      </Style>
</Resources>

<DataGrid.Columns>                           
   <DataGridTextColumn Header="Name" CellStyle="{StaticResource NameCellStyle}" Binding="{Binding Name}"/>                            
    // .. other columns        
</DataGrid.Columns> 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-08-26T14:04:06.703

这是@MohammedAFadil 的 XAML 答案，后面转换为 C# 代码：

```
var MyStyle = new Style(typeof(DataGridCell)) {
    Setters = {
        new Setter(TextBlock.TextAlignmentProperty, TextAlignment.Center)
    }
}; 
```

要应用`Style`，请设置 的`CellStyle`属性`DataGrid`，例如

```
var MyGrid = new DataGrid() {
    CellStyle = MyStyle
}; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-08-23T12:31:04.730

或者在后面的代码中：

```
grid.CellStyle = newCellStyle();

public static Style newCellStyle()
{
    //And here is the C# code to achieve the above
    System.Windows.Style style = new Style(typeof(DataGridCell));
    style.Setters.Add(new System.Windows.Setter
    {
        Property = Control.HorizontalAlignmentProperty,
        Value = HorizontalAlignment.Center
    });
    return style;
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-07-03T15:12:38.507

我最终遇到了单元格被移动并且使用公认的答案看起来很时髦的问题。我知道已经很晚了，但希望我的发现对某人有所帮助。我用：

```
<DataGridTextColumn.ElementStyle>
     <Style>
          <Setter Property="FrameworkElement.HorizontalAlignment" Value="Center"/>
     </Style> 
```

而不是 CellStyle。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-08-24T19:50:54.573

好的，我使用了 frameworkElement 方法，但是当您尝试突出显示该行时出现了一个奇怪的行为。

我在这个[线程](https://stackoverflow.com/questions/1050536/highlight-entire-rows-only-in-silverlight-datagrid/1324343#1324343)中放了另一个 WPF Datagrid 对齐的例子！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-07-09T15:06:40.257

我最喜欢的解决方案是：

```
<DataGridTextColumn Header="My Column" Binding="{Binding MyDBValue}" Width="100" >
<DataGridTextColumn.CellStyle>
        <Style>
                <Setter Property="FrameworkElement.HorizontalAlignment" Value="Center"/>
        </Style>
</DataGridTextColumn.CellStyle> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-04-02T20:19:43.673

对我来说，这个效果很好

```
<DataGridTextColumn Width="1*" Binding="{Binding Balance, StringFormat=C} "Header="Balance">
  <DataGridTextColumn.CellStyle>
      <Style>
        <Setter Property="TextBlock.TextAlignment"  Value="Right"/>
      </Style>
   </DataGridTextColumn.CellStyle>
 </DataGridTextColumn> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-12-10T15:19:24.580

如果有人仍在寻找答案，这对我有用：

```
<DataGridTextColumn ...>
    <DataGridTextColumn.CellStyle>
        <Style TargetType="{x:Type DataGridCell}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type DataGridCell}">
                        <Grid Background="{TemplateBinding Background}">
                            <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Left"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </DataGridTextColumn.CellStyle>
</DataGridTextColumn> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-10-18T20:07:33.840

感谢 Danny Beckett 将 @MohammedAFadil 的 XAML 答案转换为 C# 代码。我所有的数据网格都是动态设置的，所以我可以随时更改任何内容。

要设置一个空的数据网格，其中没有任何内容，然后将其绑定到数据，只需获取您的 datagrid.columns

```
 var centerTextSetter = new Style(typeof(DataGridCell))
        {
            Setters = { new Setter(TextBlock.TextAlignmentProperty, TextAlignment.Center) }
        };
        DgDbNames.Columns.Add(new DataGridTextColumn()
        {
            Header = "Db Name",
            Binding = new System.Windows.Data.Binding("DbName"),
            IsReadOnly = true,
            Width = new DataGridLength(0.2, DataGridLengthUnitType.Star),
            CellStyle = centerTextSetter
        }); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-08-28T11:13:26.930

我真的很喜欢 Bruno 的 TextBlock.TextAlignment 方法。您可以将此与水平对齐结合使用，然后任何背景都将延伸到整个网格单元格。

例如（在 VB 中）

```
 Dim sty = New System.Windows.Style(GetType(DataGridCell))
    sty.Setters.Add(New Setter(HorizontalAlignmentProperty, HorizontalAlignment.Stretch))
    sty.Setters.Add(New Setter(TextBlock.TextAlignmentProperty, TextAlignment.Right))
    sty.Setters.Add(New Setter(BackgroundProperty, Brushes.LightGray)) 
```

# c++ - 具有静态成员的类与单例

> ID：720744
> 
> 赞同：15
> 
> 时间：2009-04-06T09:16:36.623
> 
> 标签：c++, design-patterns, static, singleton, monostate

只有静态成员的类不是一种单例设计模式吗？上这样的课有什么缺点吗？详细的解释会有所帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-06T09:30:06.560

这种类被称为[单态](http://jeremyjarrell.com/archive/2008/04/21/88.aspx)——它与单态有些不同。

为什么使用单态而不是单态？在他们关于模式的[原始论文](http://portal.acm.org/citation.cfm?id=331120.331154&coll=GUIDE&dl=GUIDE&CFID=9560984&CFTOKEN=28610657)中，Bell & Crawford 提出了三个原因（由我解释）：

*   更自然的访问语法
*   单身人士没有名字
*   更容易继承

我必须承认，我没有发现其中任何一个特别引人注目。另一方面，单态绝对*不比*单态差。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-04-06T09:21:16.333

Robert C. Martin前段时间写过[一篇关于单态模式和单例模式的区别的文章。](http://objectmentor.com/resources/articles/SingletonAndMonostate.pdf)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T12:35:21.250

考虑一系列 Logging 类。它们都实现了“LogMessage(message, file, line_number)。一些向标准错误发送消息，一些向一组开发人员发送电子邮件，一些增加消息频率表中特定消息的计数，一些路由到 /dev/null . 在运行时，程序检查它的参数向量、注册表或环境变量，以使用哪些日志记录技术，并使用来自合适类的对象实例化日志记录单例，可能会加载最终用户提供的 DLL 来执行此操作。用纯静态单例很难复制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T09:34:15.583

对于单例，所有构造函数都必须是私有的，因此您只能通过函数访问。但你已经很接近它了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T10:04:30.580

> 具有所有静态成员/方法的类一种单例设计模式

类 - 不是模式。当我们谈论类时，我们可以说类**实现**了模式。

* * *

静态函数 - 不是成员函数，它们与全局函数相似。也许你不需要任何课程？

引用自[维基百科](http://en.wikipedia.org/wiki/Singleton_pattern)：

> 在软件工程中，单例模式是一种设计模式，用于将类的实例化限制为一个对象。

根据这个定义，您的实现不是单例实现 - 您不使用常见的想法***一个（或扩展定义中的几个）实例 class***。

但有时（并非总是）使用所有静态函数和单例模式的类 - 没有有意义的区别。

# c# - 在传递给非托管代码之前将委托固定在结构中

> ID：720750
> 
> 赞同：2
> 
> 时间：2009-04-06T09:18:39.507
> 
> 标签：c#, .net, pinvoke, unmanaged

我正在尝试使用非托管 C dll 将图像数据加载到 C# 应用程序中。该库有一个相当简单的接口，您可以在其中传入一个包含三个回调的结构，一个接收图像的大小，一个接收每一行像素，最后一个在加载完成时调用。像这样（C# 托管定义）：

```
[System.Runtime.InteropServices.StructLayoutAttribute(System.Runtime.InteropServices.LayoutKind.Sequential)]
public struct st_ImageProtocol
{
   public st_ImageProtocol_done Done;    
   public st_ImageProtocol_setSize SetSize;    
   public st_ImageProtocol_sendLine SendLine;
} 
```

以 st_ImageProtocol 开头的类型是委托：

```
public delegate int st_ImageProtocol_sendLine(System.IntPtr localData, int rowNumber, System.IntPtr pixelData); 
```

对于我正在使用的测试文件，SetSize 应该被调用一次，然后 SendLine 将被调用 200 次（图像中的每一行像素一次），最后触发了 Done 回调。实际发生的是 SendLine 被调用 19 次，然后抛出 AccessViolationException 声称库试图访问受保护的内存。

我可以访问 C 库的代码（尽管我无法更改功能），并且在它调用 SendLine 方法的循环期间它不会分配或释放任何新内存，所以我的假设是委托本身是问题，我需要在传递它之前将其固定（我目前在委托本身内没有代码，除了一个计数器来查看它被调用的频率，所以我怀疑我在托管方面破坏了任何东西）。问题是我不知道该怎么做；我一直用来在非托管空间中声明结构的方法不适用于委托 (Marshal.AllocHGlobal())，而且我找不到任何其他合适的方法。代表本身是 Program 类中的静态字段，因此它们不应该被垃圾收集，但我猜运行时可能会移动它们。

[Chris Brumme 的这篇博客文章](http://blogs.msdn.com/cbrumme/archive/2003/05/06/51385.aspx)说，委托在传递到非托管代码之前不需要固定：

> 显然，非托管函数指针必须指向一个固定地址。如果 GC 重新定位它，那将是一场灾难！这导致许多应用程序为委托创建固定句柄。这是完全没有必要的。非托管函数指针实际上是指我们动态生成以执行转换和封送处理的本机代码存根。此存根存在于 GC 堆外的固定内存中。

但是我不知道当委托是结构的一部分时这是否成立。这确实意味着可以手动固定它们，我对如何执行此操作或关于为什么循环运行 19 次然后突然失败的任何更好建议感兴趣。

谢谢。

* * *

编辑回答约翰的问题......

分配结构体的代码如下：

```
_sendLineFunc = new st_ImageProtocol_sendLine(protocolSendLineStub);

_imageProtocol = new st_ImageProtocol()
                     {
                          //Set some other properties...
                          SendLine = _sendLineFunc
                     };

int protocolSize = Marshal.SizeOf(_imageProtocol);
_imageProtocolPtr = Marshal.AllocHGlobal(protocolSize);
Marshal.StructureToPtr(_imageProtocol, _imageProtocolPtr, true); 
```

其中 _sendLineFunc 和 _imageProtocol 变量都是 Program 类的静态字段。如果我正确理解了它的内部结构，这意味着我将一个指向_imageProtocol 变量*副本*的非托管指针传递到 C 库中，但该副本包含对静态 _sendLineFunc 的引用。这应该意味着 GC 不会触及副本 - 因为它是非托管的 - 并且委托不会被收集，因为它仍在范围内（静态）。

该结构实际​​上作为另一个回调的返回值传递给库，但作为指针：

```
private static IntPtr beginCallback(IntPtr localData, en_ImageType imageType)
{
    return _imageProtocolPtr;
} 
```

基本上还有另一种结构类型，它保存图像文件名和指向此回调的函数指针，库确定文件中存储的图像类型，并使用此回调为给定类型请求正确的协议结构。我的文件名结构的声明和管理方式与上面的协议相同，因此可能包含相同的错误，但由于此委托只被调用一次并且调用速度很快，所以我还没有遇到任何问题。

* * *

编辑更新

感谢大家的回复，但在又花了几天时间解决这个问题但没有任何进展后，我决定搁置它。万一有人感兴趣，我正在尝试为 Lightwave 3D 渲染应用程序的用户编写一个工具，一个不错的功能是能够查看 Lightwave 支持的所有不同图像格式（其中一些是相当奇特的）。我认为最好的方法是为 Lightwave 用于图像处理的插件架构编写一个 C# 包装器，这样我就可以使用他们的代码来实际加载文件。不幸的是，在针对我的解决方案尝试了一些插件之后，我遇到了各种我无法理解或修复的错误，我的猜测是 Lightwave 没有以标准方式调用插件上的方法，可能是为了提高运行外部代码的安全性（我承认在黑暗中野蛮刺伤）。暂时我将放弃图像功能，如果我决定恢复它，我会以不同的方式处理它。

再次感谢，即使我没有得到我想要的结果，我也通过这个过程学到了很多东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-17T20:55:54.687

注册回调委托时我遇到了类似的问题（它会被调用，然后噗！）。我的问题是具有被委派方法的对象正在被 GC 处理。我在一个更全球化的地方创建了这个对象，以防止它被 GC'ed。

如果这样的事情不起作用，这里有一些其他的事情要注意：

作为附加信息，请查看 Marshal 类中的[GetFunctionPointerForDelegate](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.getfunctionpointerfordelegate.aspx)。这是你可以做到这一点的另一种方式。只要确保代表没有被 GC 处理。然后，代替结构中的委托，将它们声明为 IntPtr。

这可能无法解决固定问题，但请查看[`fixed`](http://msdn.microsoft.com/en-us/library/f58wzh21(VS.80).aspx)关键字，即使这可能对您不起作用，因为您正在处理比通常使用的更长的生命周期。

最后，看看[`stackalloc`](http://msdn.microsoft.com/en-us/library/cx9s2sy4(VS.80).aspx)创建非GC内存。这些方法将需要使用`unsafe`，因此可能会对您的程序集施加一些其他限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-17T20:26:49.340

您没有确切说明回调是如何在 C 库中声明的。除非明确声明，否则`__stdcall`您将慢慢破坏您的堆栈。你会看到你的方法被调用（可能参数颠倒了），但在将来的某个时候程序会崩溃。

据我所知，除了在 C# 代码和需要回调的库之间用 C 语言编写另一个回调函数之外，没有其他办法`__cdecl`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T11:51:21.713

多了解一点会很有趣：

*   如何创建 ImageProtocol 结构？它是局部变量还是类成员，还是使用 Marshal.AllocHGlobal 将其分配在非托管内存中？

*   它是如何发送到 C 函数的？直接作为堆栈变量还是作为指针？

* * *

一个非常棘手的问题！感觉就像 GC 移动了委托数据，这导致了访问冲突。有趣的是，委托数据类型是一个引用数据类型，它将其数据存储在 GC 堆上。该数据包含诸如要调用的函数的地址（函数指针）之类的内容，还包含对包含该函数的对象的引用。这应该意味着即使实际的函数代码存储在 GC 堆之外，保存函数指针的数据也存储在 GC 堆中，因此可以被 GC 移动。昨晚我想了很多，但没有想出解决方案....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-08T17:56:10.970

如果 c 函数是 __cdecl 函数，则必须在委托声明之前使用属性 [UnmanagedFunctionPointer(CallingConvention.Cdecl)]。

# php - 如何使用 PHP 从文件夹中读取文件列表？

> ID：720751
> 
> 赞同：44
> 
> 时间：2009-04-06T09:18:50.473
> 
> 标签：php, file

我想使用 php 读取网页中文件夹中文件的名称列表。有没有简单的脚本来实现它？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2009-04-06T09:20:26.817

最简单和最有趣的方式（imo）是[glob](http://is.php.net/manual/en/function.glob.php)

```
foreach (glob("*.*") as $filename) {
    echo $filename."<br />";
} 
```

但标准方法是使用[目录函数。](http://is.php.net/manual/en/function.opendir.php)

```
if (is_dir($dir)) {
    if ($dh = opendir($dir)) {
        while (($file = readdir($dh)) !== false) {
            echo "filename: .".$file."<br />";
        }
        closedir($dh);
    }
} 
```

还有[SPL DirectoryIterator 方法](http://is.php.net/manual/en/directoryiterator.construct.php)。如果你感兴趣

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-10-29T13:57:10.323

这就是我喜欢做的事情：

```
$files = array_values(array_filter(scandir($path), function($file) use ($path) { 
    return !is_dir($path . '/' . $file);
}));

foreach($files as $file){
    echo $file;
} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-10-29T13:04:22.233

有这个函数**scandir()**：

```
$dir = 'dir';
$files = scandir($dir, 0);
for($i = 2; $i < count($files); $i++)
    print $files[$i]."<br>"; 
```

[更多信息在 php.net 手册中](http://php.net/manual/en/function.scandir.php)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-29T18:37:07.223

如果您在访问路径时遇到问题，也许您需要输入以下内容：

```
$root = $_SERVER['DOCUMENT_ROOT'];
$path = "/cv/"; 

// Open the folder
 $dir_handle = @opendir($root . $path) or die("Unable to open $path"); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-08-04T15:34:19.413

有一个球。在这个网页上有很好的文章如何以非常简单的方式列出文件：

[如何使用 PHP 从文件夹中读取文件列表](http://domexception.blogspot.fi/2013/08/php-using-functional-programming-for.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-01-11T09:04:06.147

**签入许多文件夹：**

Folder_1 和 folder_2 是文件夹的名称，我们必须从中选择文件。

$format 是必需的格式。

```
<?php
$arr = array("folder_1","folder_2");
$format  = ".csv";

for($x=0;$x<count($arr);$x++){
    $mm = $arr[$x];

    foreach (glob("$mm/*$format") as $filename) {
        echo "$filename size " . filesize($filename) . "<br>";
    }
}
?> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-01-20T10:47:25.280

您可以使用标准目录功能

```
$dir = opendir('/tmp');
while ($file = readdir($dir)) {
    if ($file == '.' || $file == '..') {
        continue;
    }

    echo $file;
}
closedir($dir); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-31T14:34:05.080

还有一种非常简单的方法可以在`RecursiveTreeIterator`课堂的帮助下做到这一点，在这里回答：[https ://stackoverflow.com/a/37548504/2032235](https://stackoverflow.com/a/37548504/2032235)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-03T19:40:34.387

```
<html>
<head>
<title>Names</title>
</head>
<body style="background-color:powderblue;">

<form method='post' action='alex.php'>
 <input type='text' name='name'>
<input type='submit' value='name'>
</form>
Enter Name:
<?php

  if($_POST)
  {
  $Name = $_POST['name'];
  $count = 0;
  $fh=fopen("alex.txt",'a+') or die("failed to create");
  while(!feof($fh))
  {
    $line = chop(fgets($fh));
    if($line==$Name && $line!="")
    $count=1;
  }
  if($count==0 && $Name!="")
  {
    fwrite($fh, "\r\n$Name"); 
 }
  else if($count!=0 && $line!="") 
  { 
    echo '<font color="red">'.$Name.', the name you entered is already in the list.</font><br><br>';
  }
  $count=0;
  fseek($fh, 0);
  while(!feof($fh))
  {
    $a = chop(fgets($fh));
    echo $a.'<br>';
    $count++;
  }
  if($count<=1)
  echo '<br>There are no names in the list<br>';
  fclose($fh);
  }
?>
</body>
</html> 
```

# flash - 从另一台服务器的嵌入式 swf 调用 externalinterface.call 在 Firefox 中不起作用

> ID：720760
> 
> 赞同：1
> 
> 时间：2009-04-06T09:21:11.590
> 
> 标签：flash, externalinterface

我在服务器 A 上有一个 index.html。

在 index.html 中，我从服务器 B 嵌入了一个 swf。

swf 包含一个带有 flash.external.ExternalInterface.call("alert", "externalalert"); 的 init

当我在服务器 B 上运行 swf 时，它可以工作，当我通过服务器 AI 上的 index.html 运行 swf 时，会得到一个：安全沙箱违规：ExternalInterface caller...

它确实在 IE 中工作。

有谁知道我做错了什么。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T09:46:19.003

解决方法是添加

```
System.security.allowDomain("*"); 
```

在您的 AS 代码中。`ExternalInterface`需要在`allowDomain`执行 HTML-SWF 跨脚本时设置。

请注意，您还需要`allowScriptAccess="always"`在 swf 嵌入标签中设置以允许跨脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T09:45:25.197

你没有做错什么。这是 Flash 播放器的限制。不允许不同域之间的交互。您可以尝试使用`crossdomain.xml`. （但我不知道这是否适用于你`ExternalInterfaces`）。更多信息可以在这里找到：

*   [Flash Player 安全@Adobe Livedocs](http://livedocs.adobe.com/flex/201/html/wwhelp/wwhimpl/js/html/wwhelp.htm?href=05B_Security_176_01.html)
*   [权限控制概述 - 网站控制@Adobe Livedocs](http://livedocs.adobe.com/flex/201/html/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Book_Parts&file=05B_Security_176_03.html#122782)

# javascript - jQuery.ajax() + 空 JSON 对象 = 解析错误

> ID：720763
> 
> 赞同：17
> 
> 时间：2009-04-06T09:21:28.703
> 
> 标签：javascript, jquery, json

使用 jQuery 加载一些 JSON 数据时出现解析错误。这是我的代码片段：

```
jQuery.ajax({
    dataType: "json",

    success: function (json)
    {
        jQuery.each(json, function ()
        {
            alert(this["columnName"]);
        });
    }
}); 
```

解析非空 JSON 对象时没有错误。所以我的猜测是问题出在我的序列化程序上。

**问题是：**如何格式化 jQuery 不会认为格式错误的空 JSON 对象？

这是我迄今为止尝试过的，但没有成功：

```
{[]}

{[null]}

{}

{null}

{"rows": []}

{"rows": null}

{"rows": {}} 
```

**更新：**

我可以理解我有些含糊 - 让我试着澄清一下：

JSON 对象的解析不是这里的问题——我认为 JQuery 是。

jQuery 抛出一个解析错误（调用错误函数）。似乎 jQuery 的内部 JSON 验证不接受任何前面提到的对象。甚至不是有效的。

误差函数的输出为：

> `XMLHttpRequest:`XMLHttpRequest readyState=4 status=200
> `textStatus:`parsererror
> `errorThrown:`undefined

这适用于所有前面提到的对象。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-03-07T05:24:41.390

解决方案是从服务器返回 204 而不是 200 的状态码，204 是“无内容”，它会在不尝试调用解析器时返回成功

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-06T13:24:22.690

Firstly `{[]}`, `{[null]}`, and `{null}` won't work because they are all invalid JSON objects (as verified by the [JSON validator](http://www.jsonlint.com/)).

The remaining objects are all valid JSON objects, so your `success` function should be getting invoked.

If you pass a non-array or array-like object object then the `each` function will enumerate your `json` object by its named properties. In the case of your three objects that each have a `rows` property `this` will be set to `[]`, `null`, and `{}` respectively, none of which have a `columnName` attribute so an undefined error will be thrown.

Your `{}` object on the other hand has no properties, so shouldn't be causing an error because the `each` call will loop 0 times. What does the following line display if you add it as the first line in your `success` function?

```
alert(typeof json + ' ' + (json == null)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T13:21:36.677

you are looking for this:

```
[] 
```

an empty array. That is, if you plan to iterate over it right away, then what you need is an array.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-04-27T13:31:22.760

您的 Web 服务可能返回 null。我发现从 Web 服务调用返回 null 会返回状态代码为 200“Ok”的响应，但 jQuery 之后会引发 parseerror。

如果是这种情况，它与您发送到服务器的内容无关，而与服务器发送回的所有内容无关。

如果您能够更改 Web 服务，您可能想要尝试返回一个空的 JSON 对象，或者一个默认值而不是 Null。或者，您可以在错误处理程序中检查此错误场景，知道这意味着您的调用返回 null。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T13:20:52.293

Did you verify if the JSON is returned correctly in the first place before the each? Set the empty value as {}, and verify if it is like that before .each

Also it would help to know how your JSON looks like when there is data.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-06T12:43:33.070

Instead of:

```
$(json).each(function () { ... }); 
```

I think you want to be using:

```
$.each(json, function () { ... }); 
```

From the [jQuery.each documentation](http://docs.jquery.com/Utilities/jQuery.each):

> This function is not the same as [$().each()](http://docs.jquery.com/Core/each) - which is used to iterate, exclusively, over a jQuery object. This function can be used to iterate over anything.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-18T19:07:17.343

也有这个问题，并通过在我的 Web 服务中使用 jsonserializer 格式化空字符串来解决它。结果是**"\"\""**本质上是**""**；

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-06-23T12:21:57.957

从服务器请求有效的 JSON 时，我遇到了类似的问题。

我的服务器提供 text/javascript 的内容类型

我没有使用'dataType' 的可选jQuery.ajax 设置，所以jQuery 将输出解释为javascript（例如填充的JSON），而不是简洁的JSON。

将 dataType:'JSON' 添加到传递给 jQuery 的 ajax 方法的设置对象解决了这个问题。

# asp.net - Visual Studio 工具栏

> ID：720767
> 
> 赞同：0
> 
> 时间：2009-04-06T09:22:52.710
> 
> 标签：asp.net, visual-studio-2008

在 Visual Studio 中：

新建->项目->ASP.NET Web 应用程序

新建->网站->ASP.NET 网站

尽管我们正在打开 web 应用程序，但这两者之间的实际区别是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-07T01:57:53.287

Web Application Projects are projects, like any other Visual Studio project. They have a project file (.csproj or .vbproj) which is an MSBUILD description of how to build the project. This is how Web Applications were built on .NET since Day 1.

With Visual Studio 2005, Microsoft decided that this was too complicated. They got rid of Web Application Projects and replaced them with Web Site "projects". These are not actually projects, but are rather a collection of files in a folder tree, on disk, on an FTP site, on IIS, etc.

They were loudly informed of their error, and quickly came out with Visual Studio 2005 SP1, which put Web Application Projects back in the system, where they are to this day, and always will be.

The code in a Web Application Project all gets compiled into a single DLL. The code in a Web Site is only compiled when it is referenced. This can be a benefit during development - I'm working on one now, and actually find it sort of cool to be able to change some C# code, save it, then press F5 in the browser to see the affect.

On the other hand, what I'm working on now actually *is* a web site - it's not a web-based product that needs to be packaged up and shipped to customers. I may be old-fashioned, but I don't like the idea that my code doesn't compile before I ship it to customers. I was taught (the hard way) to test what I ship.

# iphone - Mac 上是否有其他优秀的 SQLite 图形管理工具，而不是 Firefox 扩展？

> ID：720769
> 
> 赞同：2
> 
> 时间：2009-04-06T09:23:16.343
> 
> 标签：iphone, database, sqlite, administration

Mac 上是否有其他优秀的 SQLlite 图形管理工具，而不是 Firefox 扩展？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T10:36:41.223

我使用这个[SQLite 数据库浏览器](http://sqlitebrowser.sourceforge.net/development.html)，它运行良好、轻量且免费（就像在啤酒中一样）。也没有任何关于它的抱怨，但是它不再被积极维护，这很遗憾。但是代码是免费的（就像语音一样），它也可以在 Windows 和 Linux 上使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T09:24:58.837

看看这里：[http ://www.sqlite.org/cvstrac/wiki?p=ManagementTools](http://www.sqlite.org/cvstrac/wiki?p=ManagementTools)

*   [根据](http://menial.co.uk/software/base/)
*   [SQLiteStudio](http://sqlitestudio.one.pl/)
*   [SQLiteManager](http://sqlabs.net/)
*   [浏览器](http://www.macsos.com.au/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T09:59:51.077

如果您熟悉 Java 和 JDBC 设置，您可以将[Squirrel SQL](http://squirrel-sql.sourceforge.net/)与 SQLite JDBC 驱动程序一起使用，[例如](http://www.xerial.org/trac/Xerial/wiki/SQLiteJDBC)

我已经使用 Squirrel 有一段时间了，它非常好。

# sql - SQL 高效最近邻查询

> ID：720773
> 
> 赞同：7
> 
> 时间：2009-04-06T09:25:41.440
> 
> 标签：sql, nearest-neighbor

我无法想出一个有效的 SQL 查询来处理以下情况：

假设我们有一个包含两列的表

```
groupId : int 
value : float 
```

该表很大（数百万行）。每个“groupId”有不同数量的“值”——比如 100 到 50.000 之间。所有浮点值都大于或等于零，但在其他方面是无界的。

对于给定的 groupId，查询应返回按相似度递减排序的所有其他组，其中“相似”定义为两组中所有可能的 30 个值对之间的最小欧几里德距离。

相似性的定义让我很生气。我认为对于计算上面定义的相似度，朴素算法是 O(n^2)。现在我正在寻找重新定义“相似性”或有效实现上述内容的想法。我可以想象一个涉及 k 最近邻的解决方案，比如 PostGis 几何最近邻，或者可能是最大的公共子序列算法（尽管我需要后者的“模糊”实现，因为“值”几乎不会完全相等） .

我们目前正在使用 mySQL 以防万一。

干杯，

```
Sören 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T19:14:22.740

你能确认我的问题是对的吗？

您的表表示由 groupId 标识的向量。每个向量的维度都在 100 到 50,000 之间，但维度上没有定义顺序。即从表中的一个向量实际上是一个等价类的代表。

现在，您将两个等价类的相似性定义为等价类的任意两个代表投影到前 30 个维度的子空间的最小欧几里得距离。

投影到二维的示例：

```
A = <1, 2, 3, 4>
B = <5, 6, 7, 8, 9, 10> 
```

A 表示以下等价类向量。

```
<1, 2, 3, 4>    <2, 1, 2, 3>    <3, 1, 2, 4>    <4, 1, 2, 3>
<1, 2, 4, 4>    <2, 1, 3, 2>    <3, 1, 4, 2>    <4, 1, 3, 2>
<1, 3, 2, 4>    <2, 3, 1, 4>    <3, 2, 1, 4>    <4, 2, 1, 3>
<1, 3, 4, 2>    <2, 3, 4, 1>    <3, 2, 4, 1>    <4, 2, 3, 1>
<1, 4, 2, 2>    <2, 4, 1, 3>    <3, 4, 1, 2>    <4, 3, 1, 2>
<1, 4, 3, 2>    <2, 4, 3, 1>    <3, 4, 2, 1>    <4, 3, 2, 1> 
```

这个等价类的所有代表到前两个维度的投影产生。

```
<1, 2>    <1, 3>    <1, 4>
<2, 1>    <2, 3>    <2, 4>
<3, 1>    <3, 2>    <3, 4>
<4, 1>    <4, 2>    <4, 3> 
```

B 表示具有 720 个元素的等价类。对前两个维度的投影产生 30 个元素。

```
< 5, 6>    < 5, 7>    < 5, 8>    < 5, 9>    < 5, 10>
< 6, 5>    < 6, 7>    < 6, 8>    < 6, 9>    < 6, 10>
< 7, 5>    < 7, 6>    < 7, 8>    < 7, 9>    < 7, 10>
< 8, 5>    < 8, 6>    < 8, 7>    < 8, 9>    < 8, 10>
< 9, 5>    < 9, 6>    < 9, 7>    < 9, 8>    < 9, 10>
<10, 5>    <10, 6>    <10, 7>    <10, 8>    <10,  9> 
```

所以 A 和 B 的距离是 8 的平方根，因为这是两个向量到投影的最小距离。例如 <3, 4> 和 <5, 6> 产生这个距离。

那么，我对这个问题的理解是否正确？

对于具有 m 个分量的 n 个向量，一个非常简单的算法必须计算 (n - 1) 个距离。对于每个距离，算法将计算 m 的距离！/（米 - 30）！每个向量的投影。因此，对于 100 个维度（您的下限），一个向量有 2.65*10^32 个可能的投影。这需要计算投影之间的大约 7*10^64 距离并找到最小值以找到两个向量的距离。然后重复这个 n 次。

我希望我误解了你或犯了一个错误。否则，这听起来介于真正具有挑战性和不可行之间。

我想到的事情是订购矢量组件并尝试匹配它们。如果可能的话，使用曼哈顿距离可能有助于简化解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T01:47:44.747

Here are some nice approximations:

You could calculate the center of mass of each group and then compare based on the distance of each groups center of mass.

Another way you could do it is by hash the coordinates of each row and rows that hash to the same location are considered similar and thus the two groups similarity are updated.

Some more information would be helpful such as:

Is the information constantly being updated and if so at what interval. How up to date and how accurate does it need to be?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T02:21:38.533

天真的版本是这样的：（不通过查询分析器运行）

```
select groupid, min(distance) as mindist
from
   (select other.groupid as groupid,
           min(abs(other.value - us.value)) as distance
    from g us
    join g other on other.groupid != us.groupid
    where us.groupid = ?)
order by mindist
group by groupid 
```

然后，利用指标：

```
select groupid, min(abs(value - usvalue)) as mindist
from
   (select other.groupid as groupid,
           max(other.value) as value,
           us.value as usvalue
    from g us
    join g other on other.groupid != us.groupid and other.value <= us.value
    where us.groupid = ?

    union

    select other.groupid as groupid,
           min(other.value) as value,
           us.value as usvalue
    from g us
    join g other on other.groupid != us.groupid and other.value >= us.value
    where us.groupid = ?)
order by mindist
group by groupid 
```

这应该有望允许 mysql 使用索引来快速找到连接上的最近邻居。

这可能存在错误，但希望这种思路会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-08T05:24:55.510

> 所有浮点值都大于或等于零，但在其他方面是无界的。

如果您想在浮点数上执行 KNN，请使用[`btree_gist`](https://www.postgresql.org/docs/current/static/btree-gist.html)PostgreSQL 模块并创建`GIST`索引。

> 此外，对于具有自然距离度量的数据类型，btree_gist 定义了一个距离运算符`<->`，并为使用此运算符的最近邻搜索提供**GiST 索引支持。****为 int2、int4、int8、 float4**、float8、timestamp with time zone、timestamp without time zone、time without time zone、date、interval、oid 和 money提供了距离运算符。

`float8`是`double precision`。

# asp.net - ASp.Net 菜单项中的内联代码

> ID：720776
> 
> 赞同：1
> 
> 时间：2009-04-06T09:26:18.630
> 
> 标签：asp.net, inline, menuitem

有人知道这是否是通过内联代码设置控件的子属性属性的方法吗？我的意思是这样的

```
 <asp:MenuItem Text="text" NavigateUrl='<%# GetItemURL("val") %>' ></asp:MenuItem>

CodeBehind

        protected string GetItemURL(string tag)
        {
            if (string.IsNullOrEmpty(_pageUrl))
                _pageUrl = UrlManager.CastQueryString(Request.Url.ToString());            
            return string.Format("{0}?item={1}", _pageUrl, tag);
        } 
```

这两种方法都不起作用，无论您使用 <%#、<%=、Page.DataBind() 等，都会遇到障碍。

在代码隐藏中设置这样的属性会非常难看。我希望允许在代码渲染块中设置此类属性的某些方法可用

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-05T04:24:27.417

您的绑定语法是正确的。您只需要确保某些东西正在绑定`<asp:MenuItem>`控件的父级。`this.Page.Databind();`如果还没有好的数据绑定上下文，您甚至可以运行。

# c# - 如何在 C# 中为此创建多维列表？

> ID：720779
> 
> 赞同：4
> 
> 时间：2009-04-06T09:27:50.217
> 
> 标签：c#, arrays, list, multidimensional-array

我有一个表格（在文件中），我按空格将其分成块。

我需要这样的结构：

```
-----------------------------
|21|22|23|33|3323|
|32|32|
|434433|545454|5454|
------------------------------ 
```

它更像是每一行都是它自己的表。我该怎么做？

我试过了`List<List<string>> matrix = new List<List<string>>()`；但我似乎找不到使用它的方法。

**编辑**- 有人可以告诉我这段代码有什么问题吗？？？？Matrix[0][0] 与 matrix [1][0] 相同。似乎同一行一直添加到矩阵中，但我清除了它...

```
static ArrayList ReadFromFile(string filename)
    StreamReader SR;
    string S;
    string[] S_split;

    SR = File.OpenText(filename);
    S = SR.ReadLine();

    ArrayList myItems = new ArrayList();

    List<List<string>> matrix = new List<List<string>>();
    List<string> row = new List<string>();

    while (S != null)
    {
        row.Clear();
        S_split = S.Split(' ');
        for (int i = 1; i < S_split.GetLength(0); i++)
        {
            row.Add(S_split[i]);
            matrix.Add(row);
        }              

        S = SR.ReadLine();
    }
    Console.WriteLine(matrix[1][1]);
    SR.Close();
    return myItems;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-06T09:35:34.020

不确定我是否理解正确。

```
 List<List<int>> table = new List<List<int>>();
        List<int> row = new List<int>();
        row.Add(21);
        row.Add(22);
        row.Add(23);
        row.Add(33); // and so on
        table.Add(row);

        row = new List<int>();
        row.Add(1001);
        row.Add(1002);
        table.Add(row);

        MessageBox.Show(table[0][3].ToString()); 
```

程序应该显示一个带有文本“33”的消息框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T09:31:30.787

您应该能够像处理列表中的列表一样使用它。

```
matrix.Add(new List<string>);
matrix[0].Add("a string"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T09:34:44.880

```
List<List<String>> matrix = new List<List<String>>();

foreach (String line in file)
{
   String[] values = line.Split(new Char[] { ' ' });

   matrix.Add(new List<String>(values));
} 
```

只需遍历您的文件，并为每一行执行以下操作。

1.  生成新列表
2.  用该行的数据填充它
3.  将当前行的列表添加到完整文件的列表中

请注意，这`foreach (String line in file)`只是伪代码。此外，您可以将正文中的 to 行合并为一行。

```
matrix.Add(new List<String>(line.Split(new Char[] { ' ' }))); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T09:38:26.307

您正在描述一个[锯齿状数组](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)。我不完全确定 List 是否不会矫枉过正？如果您只需要从文件中导入数据而不是使用它，那么锯齿状数组应该足够简单。

例子：

```
int[][] jaggedArray = new int[][] 
{
    new int[] {21, 22, 23, 33, 3323},
    new int[] {32, 32},
    new int[] {434433, 545454, 5454}
}; 
```

您还可以在处理文件时循环构建锯齿状数组，如下所示：

```
int[][] result = new int[numberOfLines][];
for (int currentLine = 0; currentLine < numberOfLines; currentLine++)
{
    String line = fileStream.ReadLine();
    int[] values = SplitAndConvertLine(line);
    result[currentLine] = values;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T09:39:59.597

如果您尝试从文件中读取，请尝试以下操作（注意以下代码尚未通过编译器运行）

```
List<string[]> matrix = new List<string[]>();
while(!instream.EndOfStream)
{
    var values = instream.ReadLine().Split(new[] {' '});
    matrix.Add(values);
} 
```

# algorithm - 阵列的领导者

> ID：720781
> 
> 赞同：1
> 
> 时间：2009-04-06T09:29:12.507
> 
> 标签：algorithm

考虑数组元素 X 是数组的领导者之一，如果该数组元素后面的所有元素小于或等于数组元素 X ...那么找到数组的所有领导者的最佳算法是什么？

数组可能有更多的领导者.. 考虑以下数组 [10 9 8 6 ] 然后 10,9,8 是数组的领导者

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-06T09:31:59.507

从数组的右侧开始工作，跟踪您遇到的最大值。每次最大值增加或相等时，根据您的定义，该元素就是领导者。更重要的是，无论进一步左派发生什么，它仍然是领导者 - 换句话说，您添加到列表中的每个领导者都是真正的领导者，而不仅仅是候选人，因为您从左到右工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T09:35:28.763

在处理阵列/列表时，维护一份可能的领导者列表。这个列表自然是降序排列的。每个新元素都是可能的新领导者。如果它比最后找到的可能的领导者大，那么你必须消除所有小于这个新的可能领导者的领导者，并将其附加到现在截断的列表中。否则，只需将其附加到可能的领导者列表中。

Python：

```
def findleaders(array):
    leaders = []
    for element in array:
        if element < leaders[-1]:
            # new possible leader
            leaders.append(element)
        else:
            # remove false possible leaders
            while leaders[-1] < element:
                leaders.pop()
                if not leaders: break #stop when list is empty
            leaders.append(element)
    return leaders 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T09:38:16.293

在 Haskell 中，它看起来像

```
 leaders [] = [];

leaders (a:as)
          | all (a>) as = a : leaders as
          | otherwise   = leaders as 
```

给出一个列表的领导者列表。

*   空列表的领导者列表为空
*   如果列表的第一个元素是领导者，那么这也是领导者列表的第一个元素。

它应该很容易适应数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T10:06:23.823

源自 David M 的算法

```
int max = a[LAST_INDEX]
for( int i = a[LAST_INDEX-1] ; i >=0 ; i-- ) {
 if( a[i] > max ) 
 {      
   printf("%d",a[i]);
   max = a[i];
 }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-27T09:54:05.567

解决问题的算法：

Start from the right keeping track of largest element (currentLeader). If a larger element is found, then print it and set currentLeader to the current element. We can consider the last element is a leader since there is no element to its right.

[https://www.tuturself.com/posts/view?menuId=82&postId=943](https://www.tuturself.com/posts/view?menuId=82&postId=943)

# unit-testing - 自动化测试：模拟与创建测试对象图（使用 IoC 容器），什么条件下更好？

> ID：720784
> 
> 赞同：0
> 
> 时间：2009-04-06T09:30:23.223
> 
> 标签：unit-testing, inversion-of-control, mocking, automated-tests

你如何决定选择什么：

1.  使用模拟对象进行测试或
2.  使用 IoC 框架创建测试对象/对象图并对该数据运行测试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-10T09:44:50.133

这取决于您要测试的内容。模拟出协作者的单元测试很棒，因为

*   他们真的非常快
*   它们很小且易于理解
*   它们不依赖于更广阔的世界，这使得它们易于运行
*   它们提供出色的缺陷定位

但是，纯单元测试无法告诉您是否在 IoC 容器中正确配置了对象，数据库连接字符串是否有效等。您需要一个运行 IoC 容器并真正联系 Db 来证明这些事情的测试。

如果您尽可能多地编写纯、独立的单元测试，那么您的构建将保持快速。这是至关重要的，因为一个缓慢的 bulid 运行得更少。即便如此，不要忘记添加一些有线测试来证明您的应用程序“挂在一起”。

例如，我们对容器中的每个服务都有一个（单一）测试，证明我们可以从 IoC 容器请求它。这证明我们已经连接好，从那时起它一直是单元测试。我们有很多纯单元测试。

然后将全部内容包含在一些应用程序级别的功能测试中，以证明应用程序本身可以满足用户的需求。

要记住的是每种测试类型的时间成本。从纯单元 -> 有线 -> 功能测试在中断时会花费一个数量级的执行时间和复杂性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T09:55:37.560

我对在我的大部分应用程序中使用 IoC 感到非常满意，尤其是我很欣赏可以注入测试数据源进行测试。

对于更多有问题的后端连接（当前是单个 ESB 调用）或需要复杂状态的函数，我会模拟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T09:56:57.447

对于单元测试：如果一个对象不是被测试的对象，模拟或存根它。这样，您可以直接控制它，以便它返回您想要的数据。

如果您创建一个测试对象/对象图，您必须对其进行*设置，*以便它提供您想要的数据。这可能比你想要的要多得多。

对于集成测试，您当然会一次测试整个对象图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T11:01:13.037

如果您需要编写大量初始化代码 - 模拟框架可能会帮助您编写更好、易于理解的单元测试。

无需重新编写模拟框架可以节省您的代码。

# asp.net - UserControl 何时何地编译

> ID：720791
> 
> 赞同：0
> 
> 时间：2009-04-06T09:32:10.940
> 
> 标签：asp.net

我有一个页面 Default.aspx 和一个 UserControl HelloControl.ascx。在页面中，我动态实例化控件如下：

```
protected void Page_Load(object sender, EventArgs e)
{
    HelloControl c = Page.LoadControl(typeof (HelloControl), null) as HelloControl;
    c.Greet();
} 
```

这工作正常，用户控件将“来自控件的 Hello”写入响应。我在 Default.aspx 中没有 @Register 指令，但是当我尝试在客户端计算机上创建类似的动态控件时，我收到“类型或命名空间不存在”的错误。

我什至在论坛上从 MS 那里得到反馈，说我需要 @Register 指令，但我显然不需要。如果没有@Register 指令引用它，任何人都可以帮助我提供有关如何以及何时编译用户控件的信息吗？

编辑：我尝试了不同的调查方向，失去了对 LoadControl 的初始调用，但我仍然无法重现该问题。以下代码在我的开发机器上也可以正常工作，没有任何 @Register 指令。

```
protected void Page_Load(object sender, EventArgs e)
{
    HelloControl c = new HelloControl();
    Response.Write(c.Greet());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T09:37:08.930

使用完整路径来控制：

`this.Controls.Add(Page.LoadControl("~/CustomControls/HelloControl.ascx"));`

# java - 重载的构造函数歧义

> ID：720796
> 
> 赞同：5
> 
> 时间：2009-04-06T09:35:14.443
> 
> 标签：java

我正在尝试在 Java 中使用可以接受 an`int[]`或 a的重载构造函数`String`。我收到一个编译错误，这似乎表明如果变量是`null`字符串或`null`数组，则在此构造函数中调用将是模棱两可的。

有没有简单的方法解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-06T09:39:13.607

将参数转换为以下类型之一：

```
Foo f1 = new Foo((int[]) null);
// or
Foo f2 = new Foo((String) null); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-06T09:39:59.970

最简单的方法——避免`null`。如果是空的`String`使用`""`；空`int[]`用`new int[]`。

要回答这个问题，您可以使用强制转换或将 null 分配给变量：

```
new MyClass((String)null)

final String nullString = null;
new MyClass(nullString) 
```

前者通常是首选，如果你打算这样做的话。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-06T11:57:41.497

也许您可以添加不带参数的构造函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-06T14:11:00.457

如果您可以控制要实例化的类，请考虑使用静态工厂方法，这样您就可以给它们两个单独的名称并避免与重载相关的混淆。

```
public static Foo createFromIntArray(final int[] ints) { ... }
public static Foo createFromString(final String str) { ... } 
```

否则，决定你的 null 代表什么：它是一个 null 整数数组，还是一个 null 字符串？您正在构建的类的行为可能与另一个不同。一旦你知道你的 null 代表什么，只需在调用构造函数时将其转换为该类型。

```
new Foo((String) null);
new Foo((int[]) null); 
```

最后，听起来您可能将对象引用传递给此构造函数，而不是显式的`null`. 也许你从`java.util.Map`. 如果是这样，您可以`instanceof`在将其发送到相关构造函数之前使用该对象测试并转换为适当的类型。

# python - 从 Django 的缓存中删除特定项目？

> ID：720800
> 
> 赞同：9
> 
> 时间：2009-04-06T09:36:35.470
> 
> 标签：python, django, caching, memcached

我正在使用以[memcached](http://en.wikipedia.org/wiki/Memcached)作为后端的站点范围的缓存。当底层数据库对象更改时，我想使缓存中的页面无效。

如果页面名称更改，那么我将使整个缓存无效（因为它会影响每个页面上的导航。笨拙但足以满足我的需求。

如果只是页面内容发生变化，那么我想使该页面的缓存无效。

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-06T14:36:44.203

我没有用 Django 做很多缓存，但我认为你想要的是[`signals`](http://docs.djangoproject.com/en/dev/topics/signals/).

`post_save`您可以在底层对象上设置一个信号，并让回调函数使缓存中的该页面无效。

```
from django.core.signals import post_save
from django.core.cache import cache

def invalidate_cache(sender, **kwargs):
    # invalidate cache
    cache.delete(sender.get_absolute_url()) # or any other pertinent keys

post_save.connect(invalidate_cache, sender=UnderlyingModel) 
```

这应该在更新时从缓存中正确删除该项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-01-03T14:39:44.017

tghw 的解决方案实际上不起作用，因为缓存键不是绝对路径。密钥是根据绝对路径和 HTTP 标头计算得出的。有关示例，请参[见此问题。](https://stackoverflow.com/questions/1995126/invalidating-a-path-from-the-django-cache-recursively)

# c# - C# 禁用警告

> ID：720804
> 
> 赞同：12
> 
> 时间：2009-04-06T09:38:46.993
> 
> 标签：c#, suppress-warnings

有没有办法在代码中禁用 C# 中的某些警告，类似于 C++ 中的#pragma warning(cmd: warningsNo)？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-06T09:45:28.037

几乎完全相同[的](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/preprocessor-directives/preprocessor-pragma-warning)指令。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T09:45:27.587

是的。请参阅[文档](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/preprocessor-directives/preprocessor-pragma-warning)以获取完整参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-10T05:23:39.407

要禁用警告，您可以使用`#pragma`. 例如，在相关代码之前添加以下行：

```
#pragma warning disable RCS1194 
```

前面的示例禁用了警告 RCS1194，即“实施异常构造函数”。

要再次启用警告，请在相关代码后添加以下内容：

```
#pragma warning restore RCS1194 
```

如果您有多个警告，请使用逗号分隔的列表。例如：

```
#pragma warning disable RCS1021, RCS1102, RCS1194 
```

尽管[文档](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/preprocessor-directives#pragma-warning)声明前缀`CS`是可选的，但前缀`RCS`不是可选的。我相信这也适用于其他前缀。我的建议是始终使用前缀以确保安全。

# wxpython - 用于 Python 3 的 wxPython

> ID：720806
> 
> 赞同：43
> 
> 时间：2009-04-06T09:39:43.073
> 
> 标签：wxpython, python-3.x

[wxPython](http://www.wxpython.org/)有 Python 3 的版本吗？

如果是这样，我在哪里可以得到它？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2010-06-30T14:29:37.830

关于这个问题的最新消息发布在[wxpython wiki](http://wiki.wxpython.org/TentativeRoadmap)上。在这里，您可以找到更新初始答案的每次编辑（第一次更新）

**2011 年 12 月**：好消息！[Phoenix 项目的](http://wiki.wxpython.org/ProjectPhoenix)[第一个构建](http://wxpython.org/Phoenix/snapshot-builds/)是新的 wxPython，它将同时支持 Python 2.x 和 3.x。然而，当前版本适用于 python 2.7。

**2011 年 11 月**：维基的最后一次更新是 2011 年 4 月 19 日。== 3.x 没有消息 :-(

> ## 暂定的 wxPython 路线图
> 
> *   **wxPython“下一代”：**（进行中）在过去的几年里，关于生成用于 wxPython 扩展模块（又名 C++ 包装器代码）的代码的全新方法，已经断断续续地进行了一些讨论。已经针对这个目标进行了一些设计工作，并且已经实施了概念验证。简而言之，概念证明超出了我的所有期望，我认为这将是自动化更多包装器代码生成的绝佳方式。有关新 wxPython 的目标和设计的更多信息可以在 ProjectPhoenix 中找到，源代码可以在 wx 存储库中查看。虽然这种新方法在未来会使 wxPython 的维护变得更加简单，过渡还有很多工作要做，所以在完成和验证更多的低级基础部分之前，它不会成为最高优先级的任务。同时，当前的 2.9.x ReleaseSeries 将继续使用旧技术进行改进。#
>     
>     
> *   **Python 3.x 支持：（**未知）预计为 Next Generation 项目所做的一些事情将使能够更容易地在同一源代码树中维护对 Python 2.x 和 3.x 的支持，所以我'一直在推迟在 Python 3.x 端口上投入大量精力，以防止将时间浪费在一旦进行 NG 切换可能最终被丢弃的东西上。如果下一代项目最终被搁置太久，那么我可能会重新审视这个项目并提高优先级。

目前（2011 年 11 月）wxPython 是继 Django 之后Python 3-coders[最需要的包：](http://www.python.org/3kpoll)

> 以下是用户希望 Python 3 支持的 15 个最常被提名的包
> 
> **包票数**
> Django 1970
> wxPython 941 matplotlib
> 875
> ..................................................

**2010 年 6 月**：py3k 中没有 wxpython 的时间表

> ## 暂定的 wxPython 路线图
> 
> *   **wxPython“下一代”：（**未来）在过去的几年里，关于生成用于 wxPython 扩展模块（又名 C++ 包装器代码）的代码的全新方法，已经断断续续地进行了一些讨论。已经为实现这一目标进行了一些设计工作，并且开始了一些工具工作。然而，由于这方面的工作进展缓慢，我决定暂时搁置它，以便我可以将 2.9 版本系列中的一些新功能和修复程序交到 wxPython 开发人员手中。我希望能够在 2.9.1 发布后的某个时候将我的注意力转移到这个目标上。一旦设计、计划和工具足够完整，我将发布有关它的更多信息，并开放给其他开发人员提供帮助。
> *   **Python 2.7 支持：（**现在）Windows 和 OSX 构建机器已使用 Python 2.7 进行了更新，2.7 的二进制文件包含在 2.8.11.0 中，并将包含在未来的预览版本和版本中。
> *   **Python 3.x 支持：（**未知）我希望为下一代项目所做的一些事情将使能够更容易地在同一源代码树中维护对 Python 2.x 和 3.x 的支持，所以我一直在推迟在 Python 3.x 端口上投入大量精力，以防止在进行 NG 切换后可能最终被丢弃的东西上浪费时间。如果下一代项目最终被搁置太久，那么我可能会重新审视这个项目并提高优先级。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-11-25T08:30:49.067

来自新闻组：

*   [python 3 和 wxpython 的路线图？](http://groups.google.com/group/wxpython-users/browse_thread/thread/c309fab6be78674f/e3176dac14efed2b?lnk=gst&q=python+3)（2009 年 7 月 17 日）
*   [Python 3+ 的时间安排](http://groups.google.com/group/wxpython-users/browse_thread/thread/f9638463635c1587/576848cb20555ff5?lnk=gst&q=python+3)（2009 年 9 月 4 日）
*   [wxWidgets 和 Python 3.1](http://groups.google.com/group/wxpython-users/browse_thread/thread/86f8b2513941d0f4/6d77c3d4ebd0e919?lnk=gst&q=python+3)（2009 年 11 月 20 日）
*   [常问问题？wxPython 何时为 Python v3 做好准备？](http://groups.google.com/group/wxpython-users/browse_thread/thread/59d9f9b5e3adf513/cd4704699cd1426f?lnk=gst&q=python+3#cd4704699cd1426f)（2010 年 2 月 15 日）

请注意，[PyQt 现在支持 Python 3](http://www.riverbankcomputing.co.uk/news/pyqt-45)，所以也许这是一个值得考虑的选项。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-06T10:34:02.350

不，目前它支持的最新 Python 版本是 2.6。

在 Py3K 中有[C API 的变化](http://docs.python.org/dev/3.0/howto/cporting.html#cporting-howto)，所以你必须耐心等待。在所有库都被移植之前，这需要一些时间。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-23T09:13:34.937

还没有二进制安装程序，但易于安装的常规快照构建。

[http://wxpython.org/Phoenix/snapshot-builds/](http://wxpython.org/Phoenix/snapshot-builds/)

我在 Windows 上运行它，只是在站点包中创建一个文件夹，例如“\site-packages\wx-2.9.6-msw”，然后将快照构建中的“wx”文件夹复制到其中，然后我使用 wxversion 工作用它。

```
import wxversion
import twcbsrc.configdev as cfd
wxversion.select('2.9.6') 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-12-21T15:31:12.840

**确认**wxpython 适用于 python3.3。 **系统规格：** Windows 8.1 64bit。Python 是第一次安装在这台新机器上（因此不存在以前的版本）。 **目标**：让 matplotlib 与他们的 wx 示例一起工作。

设置说明：

1.  从上面 Werner 帖子中列出的快照库中获取 wxpython（例如，用于 py3.3 的 wxpython，64 位）。wxversion 不包括在内，因此从[mit](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=9&cad=rja&ved=0CH0QFjAI&url=http://stuff.mit.edu/afs/athena/project/juice/arch/sun4x_510/lib/python2.3/site-packages/wxversion.py&ei=0q61UpbVDYj8oAS_xIGoDw&usg=AFQjCNFQPF0y4LFC-gB3IESHbNuxDBJgLQ&sig2=Lnu9KMtogRbz-vz0xLecbA&bvm=bv.58187178,d.cGU)获得。也将它放在站点包中。

2.  将 wxversion 中的内容转换为与 py 3.3 兼容。即用in 替换has_key 和使用as 代替"," 的try except 结构。当您在 eclipse 或类似程序中运行代码时，解释器会告诉您它不喜欢什么。

3.  对于 matplotlib 设置，我不需要将 wxversion.select() 添加到示例代码中，但 matplotlib 确实需要该模块。对于我选择的任何版本（即使有很长的可能版本 XX 编号），尝试 select() 调用都会失败。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-03-16T13:19:49.020

wxPython 4 于 2018 年 1 月 31 日发布，现在可以 pip 安装。它支持 Python 2.7 和 Python 3.4+。你可以在 PyPI 上找到它：

*   [https://pypi.python.org/pypi/wxPython/4.0.0](https://pypi.python.org/pypi/wxPython/4.0.0)

如果您正在从 wxPython 2.8 或 3.0 迁移到 wxPython 4，您将希望看到以下文章：

*   [https://wxpython.org/Phoenix/docs/html/MigrationGuide.html](https://wxpython.org/Phoenix/docs/html/MigrationGuide.html)
*   [https://wxpython.org/Phoenix/docs/html/classic_vs_phoenix.html](https://wxpython.org/Phoenix/docs/html/classic_vs_phoenix.html)

旧版本的 wxPython 仍在[SourceForge 上](https://sourceforge.net/projects/wxpython/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-11T21:39:27.697

`c:\Python34\Scripts\pip install -U --pre -f http://wxPython.org/Phoenix/snapshot-builds/ wxPython_Phoenix`由于现在支持 Python 轮文件格式，因此该命令应该可以在任何操作系统上为您提供最新版本的 Phoenix。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-20T08:54:33.170

如果您在 Python3 上安装 wxpython 时遇到问题，请使用此命令安装 wxpython

```
$ pip install -U -f https://extras.wxpython.org/wxPython4/extras/linux/gtk3/ubuntu-16.04 wxPython 
```

通过这个命令你可以安装最新的 wxPython4 版本。如果您使用的是 Windows 或 macOS

```
$ pip install -U wxpython 
```

如果你想使用[Anaconda](https://www.anaconda.com/download/) venv 使用这个

```
$conda intall -c anaconda wxpython 
```

# c# - WCF，找不到 ServiceHost 指令中的服务属性值

> ID：720807
> 
> 赞同：76
> 
> 时间：2009-04-06T09:39:52.997
> 
> 标签：c#, wcf, iis

我正在尝试使用 IIS 6 托管我的服务，但我不断收到此异常。

```
 Server Error in '/WebServices' Application.
--------------------------------------------------------------------------------

The type 'QS.DialogManager.Communication.IISHost.RecipientService', provided as the Service attribute value in the ServiceHost directive could not be found. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InvalidOperationException: The type 'QS.DialogManager.Communication.IISHost.RecipientService', provided as the Service attribute value in the ServiceHost directive could not be found.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[InvalidOperationException: The type 'QS.DialogManager.Communication.IISHost.RecipientService', provided as the Service attribute value in the ServiceHost directive could not be found.]
   System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(String constructorString, Uri[] baseAddresses) +6714599
   System.ServiceModel.HostingManager.CreateService(String normalizedVirtualPath) +604
   System.ServiceModel.HostingManager.ActivateService(String normalizedVirtualPath) +46
   System.ServiceModel.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath) +654

[ServiceActivationException: The service '/WebServices/dm/RecipientService.svc' cannot be activated due to an exception during compilation.  The exception message is: The type 'QS.DialogManager.Communication.IISHost.RecipientService', provided as the Service attribute value in the ServiceHost directive could not be found..]
   System.ServiceModel.AsyncResult.End(IAsyncResult result) +15626880
   System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result) +15546921
   System.ServiceModel.Activation.HostedHttpRequestAsyncResult.ExecuteSynchronous(HttpApplication context, Boolean flowContext) +265
   System.ServiceModel.Activation.HttpModule.ProcessRequest(Object sender, EventArgs e) +227
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +80
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +171

--------------------------------------------------------------------------------
Version Information: Microsoft .NET Framework Version:2.0.50727.3082; ASP.NET Version:2.0.50727.3082 
```

除了似乎找不到我的程序集外，我完全没有任何线索。代码应该使用公共类正确编译。

这是我的 .svc 文件：

```
<%@ ServiceHost Language="C#" Debug="true" Service="QS.DialogManager.Communication.IISHost.RecipientService" CodeBehind="RecipientService.svc.cs" %> 
```

我试图创建一个非常非常简单的服务，其中不包含任何内容，看看这是否可行，但仍然出现相同的旧错误。

```
The type 'IISHost.Service1', provided as the Service attribute value in the ServiceHost directive could not be found. 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2009-11-04T20:56:46.790

问题也可能是在 svc 文件中的不同命名空间中，因为它在 svc.cs 文件中。

在 svc 文件命名空间必须采用以下格式。

```
Service="Namespace.SvcClassName" 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2009-04-06T09:47:05.757

**选项一**：

此消息通常是由 IIS 7 配置问题引起的。如果您习惯于创建一个指向您的服务所在文件夹的虚拟目录，那将不再适用。现在，您需要使用“创建应用程序...”选项。

**其他选项**：

*   [WCF：找不到作为服务属性提供的类型](http://www.thejoyofcode.com/WCF_The_type_provided_as_the_Service_attribute_could_not_be_found.aspx)
*   [找不到在 ServiceHost 指令中作为 Service 属性值提供的 type 。](http://dennyonline.wordpress.com/2008/02/26/the-type-service-provided-as-the-service-attribute-value-in-the-servicehost-directive-could-not-be-found/)

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2010-01-15T21:16:28.827

我知道这可能是“显而易见”的答案，但它让我有点困惑。确保 bin 文件夹中有项目的 dll。当服务发布时，发布它的人删除了 dll，因为他认为它们在 GAC 中。专门用于该项目的那个（QS.DialogManager.Communication.IISHost.RecipientService.dll，在这种情况下）不存在。

出于非常不同的原因，同样的错误。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-04-07T05:00:30.170

由于 .SVC 文件中的服务名称不匹配而发生此错误。可能您可能已经更改了实现接口的服务类的名称。解决方案是打开 .SVC 文件并完全匹配 Service 属性和 CodeBehind 属性。所以你的 .SVC 文件应该像

```
<%@ ServiceHost Language="Language you are using" Debug="bool value to enable debugging" Service="Service class name that is implementing your Service interface" Codebehind="~/Appcode/Class implementing interface.cs"%>. for eg.

<%@ ServiceHost Language="C#" Debug="true" Service="Product.Service" CodeBehind="~/AppCode/Product.Service.cs"%> 
```

此示例适用于使用 C# 语言的 .svc 文件，启用调试，服务类实现接口，该类位于 app 文件夹中，名称为 Service.cs，产品是服务类的命名空间。

另外请在服务配置文件中进行相应的更改。

```
<system.serviceModel>
    <services>
        <service name="Product.Service" behaviorConfiguration="ServiceBehavior">
            <endpoint address="" binding="wsHttpBinding" contract="Product.Iservice">
            </endpoint>
            <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
        </service>
    </services>
    <behaviors>
        <behavior name="ServiceBehavior">
            <serviceMetaData httpGetEnabled="true"/>
            <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
    </behaviors>
</system.serviceModel> 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2011-01-05T21:13:03.397

仔细检查您是否从 .svc 文件中的 ServiceHost 指令中引用了正确的类型。就是这样...

1.  在包含 Web 服务的 VS 项目中，在 XML 编辑器中打开 .svc 文件（右键单击该文件，打开方式...，选择 XML（文本）编辑器，确定）。
2.  请注意“服务”属性值。
3.  确保它与您的服务的完全限定类型名称匹配。这包括命名空间 + 类型名称。例如，如果命名空间是“MyCompany.Department.Services”并且类被称为“MyService”，那么 Service 属性值应该是“MyCompany.Department.Services.MyService”。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2011-01-12T18:37:20.717

我有同样的异常，这是由于 .svc 文件中未正确提及的类型

我通过以下修复进行了更正。

如果你的 .svc.cs 有这样的类

```
namespace Azh.Services.MyApp
{
    public class WcfApp : FI.IWcfAppService
{
...
}
} 
```

为此，.svc 文件应如下所示

```
<%@ ServiceHost Language="C#" Debug="true" Service="Azh.Services.MyApp.WcfApp" CodeBehind="WcfApp.svc.cs" %> 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2010-03-01T13:13:16.707

您应该配置您的 bin 文件夹路径以服务本地 bin。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-10-23T08:18:44.287

如果您重命名了任何内容，请验证 (Properties/)`AssemblyInfo.cs`以及服务文件中的标头是否正确。

服务名称.svc

```
<%@ ServiceHost Language="C#" Debug="true" Service="Company.Namespace.WcfApp" CodeBehind="WcfApp.svc.cs" %> 
```

与您的命名空间保持一致`Service.svc.cs`

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2010-08-12T12:53:11.430

我遇到了这个问题 - 我的服务类型在 GAC 中。如果我将包含该类型的 dll 添加到 bin 文件夹中，它会起作用，但因为它在 GAC 中，所以这不是我想要的。我最终将此添加到服务的 web.config

```
<system.web>
    <customErrors mode="RemoteOnly" />
    <compilation debug="true" targetFramework="4.0">
        <assemblies>
            <add assembly="[name in GAC], Version=[version in GAC], Culture=neutral, PublicKeyToken=[ac token]" />
        </assemblies>
    </compilation>
</system.web> 
```

它不需要 bin 文件夹中的任何 dll 就可以工作。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2010-10-19T21:57:40.793

我几乎解决了同样的问题。这是我的建议——错误意味着未找到 Service 属性中引用的对象。对于要找到的对象，应用程序或库必须将输出构建到 bin 文件夹。

您可以编辑应用程序的属性页并指定“bin”的输出路径。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-12-23T06:01:11.563

对于某些风格的“无法找到 ServiceHost 指令中的服务属性值”问题的两个关键：（1）如果您在 Silverlight 中工作，则应该使用启用 Silverlight WCF 的服务，而不是非Silverlight WCF 服务；这将更新绑定的 Web.Config 并允许类型可见；(2) 将新服务中的类名与服务名相匹配——这里的目标是制作一个 wsdl... 以便您知道该服务的功能向您的 Silverlight 客户端和 Web 公开；它有助于让服务与班级相匹配。如果您弄乱了名称，则必须在 3 个位置（服务行为、服务和绑定）编辑 Web.Config。

有很多真诚的尝试来帮助人们解决这个问题，但对我没有帮助，应该强调这篇文章是针对 Silverlight 解决方案的，它可能不适用于不在客户端/Web 配置中使用 Silverlight 3 的人.

希望能帮助到你。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2010-05-24T20:44:29.907

我有同样的问题，但不知道是什么原因造成的。我通过使用 Debug/Start New Instance 从 Debug 更改为 Release 和 Run 解决了这个问题。之后，它在 Release 和 Debug 中运行。这是魔术...

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2010-10-20T02:14:09.943

我在尝试 Microsoft.ServiceModel.Samples.Calculator WCF 示例时也遇到了这个问题。我正在使用 IIS 5.1。我通过确保自动生成的网站（servicemodelsamples）不是应用程序来解决它。右键单击文件夹，单击“属性”，然后单击“创建”按钮。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2011-09-22T15:36:34.937

这可能听起来微不足道，但值得一提：您必须**构建**服务（在 Visual Studio 中） - 然后将在 bin 子文件夹中创建一个 DLL。

当服务在服务器上“部署”时 - 该 bin 文件夹中需要包含该 DLL 文件 - 否则将引发此错误...

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-08-13T12:39:44.177

我在 svc 文件所在的 bin 文件夹中有我的服务 dll。将 dll 移动到根 bin 文件夹解决了这个问题。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-07-14T14:35:10.103

在我的情况下，右键单击虚拟目录并选择“转换为应用程序”工作！

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-10-12T09:08:17.583

我今天遇到了这个错误，原因是；IIS 用户无权访问应用程序文件夹。我授予了应用程序根文件夹的读取权限。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2010-09-20T15:22:52.187

在您的服务中添加服务引用或复制 dll。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2011-07-06T23:17:30.400

在添加服务引用之前构建解决方案解决了我的问题。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2012-04-22T07:14:03.237

尝试在同一解决方案中为第一个启用 Silverlight 的 WCF 添加服务引用时出现此错误。我刚刚构建了 .Web 项目，它开始工作了..

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2014-07-16T19:01:15.067

我有同样的问题，找到了这个线程，除了nogo之外都试过了。

然后我又浪费了4个小时的时间。

然后我发现编译设置已经从 64bits 变成了 x86。当我将它改回 64 位时，它起作用了。不知道确切原因，但可能是 IIS 应用程序池未设置为允许 32 位应用程序。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-11-12T10:01:50.490

1.  确保标记 (svc) 文件具有带有 namespace.classname 的服务属性，并且代码隐藏将是 classname.svc.cs

2.  重建解决方案

3.  从本地 IIS 重新启动应用程序池一次。

# web-services - Web 服务调用返回 html

> ID：720810
> 
> 赞同：0
> 
> 时间：2009-04-06T09:40:10.967
> 
> 标签：web-services, ms-access

我正在从 Microsoft Access 中调用 Web 服务并获取看起来像

```
" 
```

```
<link rel="alternate" type="text/xml" href="pfp.asmx?disco"/>

<style type="text/css">

    BODY { color: #000000; background-color: white; font-family: Verdana; margin-left: 0px; margin-top: 0px; }
    c 
```

以前，当通过 https 调用 Web 服务时会发生这种情况，我认为只调用 http 就可以解决这个问题。它没有，现在 Microsoft Access 因内存不足异常而崩溃。（我已经检查并且 SSL 证书已找到且未过期）

我又试了一次，它现在可以工作了（令人沮丧！）。

从 .Net 调用 Web 服务几乎总是有效的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T09:43:18.527

通常在 Web 服务中，当服务器返回错误 500 或 404 等错误时，您会返回 HTML。原因是服务器返回了包含错误详细信息的页面。以上是您从服务器返回的整个文本，还是粘贴到 StackOverflow 时出错？

# c++ - Boost，使用 tcp 通过网络发送文件，首选方法？

> ID：720817
> 
> 赞同：3
> 
> 时间：2009-04-06T09:43:28.807
> 
> 标签：c++, sockets, boost, tcp, stream

在文档中的 boost 示例中，tcp:iostream 用于非常简单地通过网络发送流。在其他示例中，write() 用于将数据写入套接字，而不是涉及更多代码。

这两种方法有什么区别？优点和缺点？还有其他应该使用的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T21:04:53.333

我从来没有使用过 boost API，所以读者要小心... ;)

tcp::iostream 似乎允许您使用类似流的接口与套接字进行交互。这种方法抽象了与套接字编程相关的复杂性，因此特别是如果您不熟悉套接字编程，它会更可取。这对于基于 TCP 的数据共享很有意义。如果您正在进行非常简单的数据交换，例如请求/响应，则特别方便。

但是，在某些情况下，您需要对数据交换进行较低级别的控制。如果您的接收器同时收到一堆消息，您可能更愿意从套接字读取每条消息，而不是事后从 iostream 中处理它们。在发送方，如果您的消息被构造为对象，则发送对象通常比先将对象转换为流更容易。在这种情况下，读/写功能会更好。

根据我自己的（非升压）套接字编程经验，我通常更喜欢处理较低级别的函数，因为它给了我更多的灵活性，即使它稍微复杂一些。我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T10:19:58.203

我没有使用 boost 进行网络通信，但我猜想“ip::tcp”类集在 C++ 中包装了基于套接字的底层通信。使用 boost 方法可能更简单，因为它已经实现了异步通信。普通的套接字通信很灵活但很麻烦。仅当应用程序对性能至关重要时才使用它。但是“ip::tcp”存在一些缺陷，例如每次向其写入内容时都必须刷​​新流（<< std::flush），但我认为优势大于劣势。

# file-io - 使用 sed 复制文件内容

> ID：720818
> 
> 赞同：3
> 
> 时间：2009-04-06T09:43:52.050
> 
> 标签：file-io, sed, copy

我正在使用 shell 脚本。如何使用“sed”将一个文件内容复制到另一个文件。我必须只使用 sed 来完成这个副本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T19:22:38.380

如果您真的想在 sed 中使用写入功能，您可以使用该`w`命令写入特定文件

```
sed -n "w$NEWNAME" $OLDNAME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T09:48:00.667

sed 将其输出写入标准输出，而不是文件中。您必须使用重定向。一种可能的命令是：

```
sed -n 'p' myInFile > myOutFile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T09:48:33.973

你所需要的只是一个 noop：

```
sed -e '' <"${OLDNAME}" >"${NEWNAME}" 
```

...也就是说，*为什么*？大多数微型嵌入式系统将使用busybox，虽然它们可能没有cp（嘿，我已经为专用路由器设备构建了一个没有cp的busybox！），不将cat添加到busybox配置中只是愚蠢的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T09:49:26.077

正如建议的那样，您*可以使用***sed**执行此操作，但为什么不简单地使用**cp**命令复制文件呢？

# flash - 如何在 Macromedia Flash Player 中播放 FLV 文件？

> ID：720819
> 
> 赞同：1
> 
> 时间：2009-04-06T09:44:36.463
> 
> 标签：flash

我无法使以下代码工作：

```
 a="file="
 b=VIDEO_FLV_ROOT
 c=flv 
 d=" bufferTime=3 "
 e="autoStart=false "
 f="quality="&"'"& "high" & "' "
 path=a & b & c & d & e & f %>
<%'=path%>
<!-- <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,19,0"
width="350" height="350" bgcolor="#FFFFFF">
    <Param name="allowScriptAccess" value="always" />
    <Param name="scaleMode"  value="showAll" />
    <Param name="wmode" value="transparent" />
    <Param name="allowNetworking" value="all" />
    <param name="movie" value="<%'=VIDEO_FLV_ROOT%><%'=flv%>" />
    <param name="FlashPlayer" value="swf/doyoucamgood_player.swf"/>
    <param name="quality" value="high" />
    <param name="buffertime" value="3" />
    <param name="autoStart" value="false" />
    <param name="flashvars" value="<%'=path%>" />
    <embed src="swf/doyoucamgood_player.swf" flashvars="<%'=path%>" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" width="350" height="350" allowScriptAccess="always" scaleMode="showAll" wmode="transparent" allowNetworking="all"/>
</object> 
```

使用此代码，我只能获取播放器，但无法播放其中的文件。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T11:26:42.897

在 VBscript / VB.NET 中， ' 用于进行注释（假设您提供的代码在 VB 中）。

例如，以下内容将不会返回任何内容，因为它已被注释掉。

```
<%'=VIDEO_FLV_ROOT%> 
```

将其更改为：

```
<%=VIDEO_FLV_ROOT%> 
```

# version - 如何检查访问者是否使用最新版本的浏览器？

> ID：720826
> 
> 赞同：6
> 
> 时间：2009-04-06T09:46:33.557
> 
> 标签：version, browser-detection

是否有一种简单而自动的方法来检查我的网站（用 asp.net 编写）的访问者是否使用他的最新版本的浏览器？这将允许我显示一条消息，通知他们他们正在运行旧版本并且他们可能想要升级。

我的网站在大多数浏览器上都经过测试，但我不测试旧版本（例如 Internet Explorer 6 等）。当我的一位访问者使用这样的旧版本时，基本上，我想**鼓励**（而不是强迫）他们升级。

当然，我可以通过获取浏览器的版本并在我的数据库中查找它自己来做到这一点，但我不想自己维护一个“浏览器版本”数据库。有任何想法吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2009-04-06T09:52:02.157

作为网站用户，如果我遇到一个建议我升级浏览器的网站，那么这将立即成为对该网站的黑标。

我可能无法升级（例如，如果我从公司网络访问）；我可能有使用特定版本的特定原因（例如，如果我是一名网络开发人员，希望确保与我的用户社区兼容）。

因此，就我个人而言，我会说您不在早期版本上测试此站点的一揽子免责声明将是可行的方法。这与您想做的技术挑战完全不同。

* * *

**编辑：**正如 Yeti 指出的那样，无论我的担忧多么有效，我都不会直接回答这个问题。这是在[佩斯的回答](https://stackoverflow.com/a/720837/83109)中完成的，他指向的 w3schools 资源为您提供了在客户端执行此操作所需的内容。

# wpf - 您知道任何使用 MVVM 的真实、有用的 WPF/Silverlight 应用程序吗？

> ID：720830
> 
> 赞同：18
> 
> 时间：2009-04-06T09:47:30.747
> 
> 标签：wpf, silverlight, mvvm

我正在寻找**(1) 使用 MVVM 模式**和**(2) WPF/Silverlight/MVVM 初学者可以**使用的完整应用程序的代码。到目前为止，我只发现：

*   [Crack.NET](http://www.codeplex.com/cracknetproject/SourceControl/ListDownloadableCommits.aspx) - 运行时调试和脚本工具（有用但相当复杂）
*   [CipherText](http://www.codeproject.com/KB/WPF/ExploringWPFMVVM.aspx) - WPF 密码管理器（完美但用 VB.NET 编写）

还有一些是什么？

*最好是使用 MVVM 但具有完整感觉的较小帮助应用程序或工具，可能具有 WPF/Silverlight 图形/动画优点等，它们不仅显示正在使用的 MVVM 概念，而且显示在真实世界的完整应用程序的上下文中*

# 我的贡献

感谢所有提示，我收集了 15 个以上 MVVM 代码示例的列表并发布在此处：

**[帮助您学习 MVVM 的 WPF/Silverlight 代码示例概述](http://tanguay.info/web/index.php?pg=notesItems&id=28)**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T10:49:37.900

我也将自己归类为 MVVM 的初学者，现在已经开发了大约一个月的大型应用程序。我已经克服了大部分主要障碍，但仍然被一些事情弄糊涂了。

小心肯特的建议。它们可以帮助您入门，但 Silverlight 和 WPF 中的细微差别偶尔会让您感到困惑（触发器就是其中之一）。

我不知道任何完整的站点，但我从 Composite Application Guidance 和 PRISM 库开始。这些对于“初学者”和只是 MVVM 来说有点太麻烦了，但是其中一些概念非常有用（例如事件聚合器）。

我建议您阅读 Josh Twist、Josh Smith、Shaun Wildermuth 和 Nikhil Kothari 的博客。这些人知识渊博。他们也非常乐于回答问题。

你的开发背景是什么？一些围绕方法调用、响应和委托的概念与“传统的顺序”编码技术是真正的突破。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T09:56:27.963

试试[这个](http://marlongrech.wordpress.com/2009/04/02/mvvm-mediator-acb-cool-wpf-app-intro/)。此外，[Family.Show](http://www.codeplex.com/familyshow)可能很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T14:08:58.887

在过去的几个月里，我一直在一个项目上使用 MVVM，这真是太棒了。我从事 UI 工作已经超过 12 年了，这是我遇到的最好的事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-14T17:18:40.787

鉴于这个问题，您可能对当前为 MV-VM 创建“Pet Shop”类型参考实现的努力感兴趣。[您可以在此处](http://www.codeplex.com/mvvmref)加入对话或关注进度。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-06-23T11:29:02.723

我已经使用 MVVM 大约 2 年了，我可以说这是一个巨大的成功。我已经在 Silverlight 中使用 MVVM 发布了一个大型医学成像解决方案。我还将广泛使用 Prism 和 MVVM 发布一个复杂的 WPF 应用程序。事实上，在这个更新的应用程序中，如果没有 MVVM，我不知道如何优雅地解决我的一些问题。

+1 在 MVVM 上。有用。它是可测试的。它是可扩展的。它促进了开发人员-设计人员的工作流程。它也不必是杂乱无章和沉重的管道。

此外，我为 1 月份的 CodeMash 会议使用 MVVM 创建了一个中型 Silverlight 应用程序。您可以在此处查看并获取[源代码](http://houseofbilz.com/archives/2010/01/11/adventures-in-mvvm-codemash-schedule-application/)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-14T14:18:39.537

[WPF Disciples 小组](http://groups.google.co.za/group/wpf-disciples/browse_thread/thread/d94b282e8d5bd245/f9ef408a309f8392?show_docid=f9ef408a309f8392)已决定创建一个真实的 MVVM + Mediator 参考应用程序，类似于 Web 应用程序的 Pet Shop 参考应用程序。[您可以在此处](http://www.codeplex.com/mvvmref)关注 codeplex 的开发

# c# - ASP C# 如何编写整洁的 GUI 代码

> ID：720836
> 
> 赞同：2
> 
> 时间：2009-04-06T09:49:58.527
> 
> 标签：c#, user-interface, refactoring

大约几个月以来，我正在编写 ASP C#。我总是在事件中编写很多代码，在加载事件中我检查查询字符串中的有效数据。这是我在一个项目中的一些示例代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Controller.Manual == null)
    {
        Response.Redirect("login.aspx");
    }

    lblLocation.Text = "<a href='viewdocument.aspx'>" + Controller.Manual.Title + "</a>";

    if (Request.QueryString["gchap"] != null)
    {
        if (Controller.IsNumeric(Request.QueryString["gchap"].ToString()))
        {
            genchap = Convert.ToInt32(Request.QueryString["gchap"]);

            FillGeneralList();

            SetChapterTitle();
        }
    }
    if (Request.QueryString["qchap"] != null)
    {
        if (Controller.IsNumeric(Request.QueryString["qchap"].ToString()))
        {
            qualchap = Convert.ToInt32(Request.QueryString["qchap"]);

            FillQualityList();

            SetChapterTitle();
        }
    }

    // Check document Id is set (did)
    if (Request.QueryString["did"] != null)
    {
        if (Controller.IsNumeric(Request.QueryString["did"].ToString()))
        {
            docId = Convert.ToInt32(Request.QueryString["did"]);

            DetermineView();
        }
    }

} 
```

我知道必须有一种方法可以以更简洁的方式完成此任务。这只是加载事件。在其他事件上，例如 click 和 onchange 事件，我有类似的代码。我认为这是意大利面条代码，并且安排得不好。那么你能告诉我如何安排我的代码吗？

编辑：

我想知道的是，有没有更简洁的方法来填充列表框？我在哪里检查查询字符串值是否有有效数据？我在哪里检查（输入/查询字符串）数据是否是数字？您应该将验证查询字符串的代码放在哪里？也在加载事件中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T09:55:40.900

我对 ASP.NET 网站的一些组织问题感到痛苦。我在几个项目中都有与您类似的代码。

如果你可以选择你的框架，你可以看看 ASP.NET MVC。这允许您在视图（Html）、控制器（所有操作和业务逻辑）和模型（数据库）之间有清晰的分离。这样你的代码隐藏文件中的代码为零，它在控制器中保持整洁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T09:55:17.623

尝试使用 TryParse（[例如](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)），您可以简化所有看起来像的代码

```
xx.IsNumeric(Request.QueryString["qchap"].ToString()) 
```

和

```
Convert.ToInt32(Request.QueryString["gchap"]); 
```

并减少对`Request.QueryString`变量的调用次数

你可以尝试类似的东西

**原始代码**

```
if (Request.QueryString["gchap"] != null)
{
    if (Controller.IsNumeric(Request.QueryString["gchap"].ToString()))
    {
        gchap = Convert.ToInt32(Request.QueryString["gchap"]);

        FillGeneralList();

        SetChapterTitle();
    }
} 
```

**建议**

```
int? gchap; //nullable types thanks Richard :D
if (!int.TryParse(Request.QueryString["gchap"], out id)) {gchap = null};

if (gchap != null) {
     FillGeneralList();
     SetChapterTitle();
}
// you could make this neater with your own little method 
```

看看这篇文章[你如何测试你的 Request.QueryString[] 变量？](https://stackoverflow.com/questions/349742/how-do-you-test-your-request-querystring-variables)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T10:03:36.403

尝试在单独的函数中捕获重复代码。(qchap / gchap)

例如：

```
qualchap = ConvertFillAndSet(Request.Querystring["qchap"]);
genchap = ConvertFillAndSet(Request.QueryString["gchap"]);

private int ConvertFillAndSet(string qrystring)
{
  int numberToReturn = 0;      

  //if the conversion was ok -> true, else false
  if (Int32.TryParse(qrystring,numberToReturn))
  {
    FillQualityList();
    SetChapterTitle();
  }

  //returns 0 if tryparse didn't work
  return numberToReturn;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-15T11:34:23.540

从哪儿开始。不幸的是，尽管有其他评论，但您并没有真正编写任何特定于“网络表单”的内容。所以迁移到 MVC 不会神奇地让你的代码变得更好。

* * *

1 不要滚动您自己的身份验证：除非您有令人信服的理由不这样做，否则请使用[表单身份验证。](http://www.asp.net/learn/security-videos/)使用表单身份验证时，您不需要在每个页面上编写代码来检查您是否已登录。框架会为您处理。

* * *

2[学习](http://www.asp.net/learn/)使用[服务器控件](http://www.asp.net/learn/moving-to-asp.net-2.0/)：

此外，正如其他人所写的那样，您不应该在代码中编写 html，尤其是对于如此微不足道的事情。Web 表单也不会让您这样做。

```
 <!-- this is in MyPage.aspx -->
  <asp:HyperLink id="viewLink" runat="server" />

  // in the code-behind file MyPage.aspx.cs
  viewLink.NavigateUrl = "~/viewdocument.aspx";
  viewLink.Text = Controller.Title; 
```

如果您要坚持使用 Web 表单，则需要熟悉[ASP.Net 页面生命周期](http://www.beansoftware.com/ASP.NET-Tutorials/Page-Life-Cycle.aspx/)

* * *

3 您的代码需要重构。无论是 Web 表单、php 还是 MVC。这里有一些基本的重构，这些都不是.net 特定的。我将逐步完成这些。

```
// this may be a good candidate for an extension method
int? ConvertNullable(string nullableInt) {
  if( string.IsNullOrEmpty(nullableInt) )
    return null;

  int value;
  if( Int32.TryParse(nullableInt, out value) )
    return value;

  return null;
} 
```

然后允许您编写。

```
int genchap? = ConvertNullable(Request.QueryString["gchap"]);
int qualchap? = ConvertNullable(Request.QueryString["qualchap"]);
int docId? = ConvertNullable(Request.QueryString["did"]);

FillQualityList(genchap,qualchap);
SetChapterTitle(genchap,qualchap);
DetermineView(docId); 
```

但是传递很多原语很麻烦而且容易出错，所以有时我们会做一个小类来封装数据，在这种情况下是页面初始化信息。

```
class ChapterView
{
  public int? GenChapter {get; set;}
  public int? QualChapter {get; set;}
  public int? DocumentId {get; set;}
}

private ChapterView GetChapterView()
{
  return new ChapterView
  {
    GenChapter = ConvertNullable(Request.QueryString["gchap"]),
    QualChapter = ConvertNullable(Request.QueryString["qualchap"]),
    DocumentId = ConvertNullable(Request.QueryString["did"])
  }
} 
```

请注意，我不知道 GenChap 和 QualChap 是什么，但它们有点简洁，您可以完成重构以使它们在代码中更具可读性。但即使没有更好的名字，我们现在也有更易读的代码。

```
ChapterView chapterView = GetChapterView();

FillQualityList(chapterView);
SetChapterTitle(chapterView);
DetermineView(chapterView); 
```

最后，您可能会确定您并不需要在每次页面执行时都调用它来读取查询字符串。如果您阅读过[Asp.Net Page LifeCycle](http://msdn.microsoft.com/en-us/library/ms178472.aspx)，您就会知道事件可能会改变`GenChapter`或其他影响页面呈现方式的因素。您可能会发现在 PreRender 中设置视图而不是一遍又一遍地调用 FillQualityList 会更好。

```
ChapterView chapterView;

Page_Load()
{
  if( !IsPostback )
  {
    ChapterView chapterView = GetChapterView();
  }
  else
  {
    chapterView = (ChapterView) ViewState["chapterview"];
  }
}

NextChapter_Click()
{
  chaperView.NextChapter();
}

Page_PreRender()
{
  FillQualityList(chapterView);
  SetChapterTitle(chapterView);
  DetermineView(chapterView);}

  // make sure class is marked [Serializable]
  ViewState["chapterview"] = chapterView; 
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T09:52:42.777

你应该遵循分层的方法。即：将所有数据访问代码放入数据访问层，将所有业务逻辑（也包括验证）放入业务层，将所有模型代码放入业务对象层

最后是 ui - 尽量不要从代码中生成 html 标记。此外，始终为您的 aspx 页面创建一个根类，其中已经实现了常用方法。然后为每个其他 aspx 页面子类化这个根类

如果您要在 c# 代码中对 html 标记进行硬编码 - 我可以向您保证，这总是会导致很多混乱（根据我自己的经验）

但有些情况你根本无法避免。对于这种情况-这就是我所做的-我摆脱了背后的代码，只是将该代码放在我的aspx / ascx文件本身中。这样，当我必须根据永无止境的客户端请求更改我的 ui 时，我不必重新编译我的代码——我只需在登台/生产服务器上替换我的 aspx/ascx 文件。

你知道客户是怎样的：嗯，你能不能让黑色条看起来有点像灰色，你能增加行间距，你能改变这个超链接的文本吗……像这样的请求似乎永远不会结束:-)

# c++ - C++ 的 CXX 测试框架

> ID：720838
> 
> 赞同：1
> 
> 时间：2009-04-06T09:51:46.227
> 
> 标签：c++, unit-testing, cxxtest

CXX 测试框架有多有效，因为您正在围绕您编写的代码编写单元测试用例。代码中的任何错误也可能被翻译成单元测试代码中的错误？不是像两个负数就变成一个正数吗？

此外，花在 CXX 上的时间和精力至少等于（如果不超过）编码工作量。

需要你对此的想法，因为我不赞成在我的项目中使用这个框架，并且正在寻找反对它的强项。

另一方面，如果您认为它是有益的，请赐教:)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-08T02:49:16.913

谷歌提供了一个我用过的很棒的 C++ 测试框架……我从来没有使用过任何其他的 C++ 测试框架，并且对Junit 的经验*有限*，而且我能够*很快*地掌握它，因为文档很好。使用一个好的测试框架很重要，因为测试太重要了，不能因为对框架的失望而放弃。这是一个链接：

[http://code.google.com/p/googletest/](http://code.google.com/p/googletest/)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T09:57:17.807

CXX 不是很活跃，写单元测试一般要花很多功夫。但是当第一次重构出现时，您会非常感谢所付出的努力。

我用过Boost.Test & CPPUNIT。我更喜欢一点 Boost.Test，但是是的，你必须编写自己的项目、文件等。

如果您知道从代码中生成骨架的工具，我会全力以赴。:)

我建议你试试 Boost.Test 和 CPPUNIT。如果你认为有更好的选择，它会给你很好的机会来反对 CXXUNIT，因为你会提出替代方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T10:56:56.570

我正在使用 cxxtest。回归测试是一项昂贵的任务，我们仅用于验证我们的软件库——它为我们的应用程序提供了一个独立于平台的层。这是为了确保所有更改都不会影响代码的稳定性，因为有如此多的应用程序和项目并且依赖于它们。

我们将 cxxtest 与覆盖率分析相结合，以确保测试覆盖率足够，并与 CruiseControl 一起实现自动化。

但我们不会为应用程序这样做。太费劲了。

构建测试应用程序与编写整个库本身一样困难。我同意你需要弄清楚这是否值得你花时间。

我认为乔尔对此也有话要说：http: [//www.joelonsoftware.com/items/2009/01/31.html](http://www.joelonsoftware.com/items/2009/01/31.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-18T02:09:09.987

我更喜欢仅包含标头的测试框架，这里有两个：[TUT](http://mrzechonek.github.io/tut-framework/)和[Catch](https://github.com/philsquared/Catch)。之前在几个项目中使用过[TUT](http://mrzechonek.github.io/tut-framework/) ，不久前发现了[Catch 。](https://github.com/philsquared/Catch)

1) [TUT](http://mrzechonek.github.io/tut-framework/) -- C++模板单元测试框架

> TUT 是一个用于 C++ 的小型可移植单元测试框架。

*   无论您使用什么编译器或操作系统，TUT 都非常便携。
*   TUT 仅包含头文件。不需要库，部署从未如此简单。
*   自定义报告界面允许将 TUT 与世界上几乎任何 IDE 或工具集成。
*   支持多进程测试（正在测试死锁和超时）。
*   TUT 是免费的，并且在类似 BSD 的许可证下分发。
*   测试被组织成命名的测试组。
*   回归（应用程序中的所有测试），一组或一个测试执行。
*   纯 C++，没有宏！

2) [Catch](https://github.com/philsquared/Catch) -- 一个现代的、C++ 原生的、仅标头的、用于单元测试、TDD 和 BDD 的框架

> 什么是渔获？
> 
> Catch 代表标头中的 C++ 自动化测试用例，是 C++ 和 Objective-C（也许还有 C）的多范式自动化测试框架。它完全在一组头文件中实现，但为了更加方便，它被打包为单个头文件。

# networking - 如何测量网络的响应时间？

> ID：720844
> 
> 赞同：0
> 
> 时间：2009-04-06T09:53:34.930
> 
> 标签：networking

我们可以使用 Ping 命令来测量网络的响应时间。但它是纯粹的网络响应时间还是包括处理时间？

请帮助解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T10:03:43.673

如果不花费处理时间，“网络”就不会存在。没有任何事情发生是免费的，路由、TTL 处理和维护所有协议当然需要在通过网络的给定路径接触的所有节点上处理时间。

在“ping”的情况下，是的，目标机器的 IP 堆栈需要一些处理来检测传入的请求，并创建和发送正确的响应。但是那个时间可能或多或少是恒定的（假设背景负载恒定），并且与纯传输延迟相比通常非常小。

您可以通过 ping localhost、本地网络上的主机来测试这一点，并比较响应时间的差异，假设您的 ping 实现以足够高的精度报告它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T09:59:56.287

这确实包括处理时间。否则你会非常接近光速。

如果您的问题是是否也包括被 ping 主机上的处理时间，是的，但应该只是一小部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T10:02:41.133

`ping`非常简单，与网络时间相比，处理时间非常短（前提是您不检查具有 1Gb 以太网的 LAN）。无论如何，要考虑处理时间，因为实际的网络流量也需要时间来处理。

# sql - 查找正在使用的外键

> ID：720845
> 
> 赞同：2
> 
> 时间：2009-04-06T09:53:59.123
> 
> 标签：sql, sql-server, sql-server-2008

我有大约 50 个表，其中创建者和更改者引用了用户表。当我想删除用户时，我想创建一个该用户拥有数据的表的列表，以便可以删除/编辑属于该用户的所有内容。有没有办法在 SQL 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T10:04:12.407

您可以使用级联删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T12:13:23.267

不完全确定你要在这里做什么..

如果您想要引用表的外键列表，请尝试这个问题 [如何列出引用 SQL Server 中给定表的所有外键？](https://stackoverflow.com/questions/483193/how-can-i-list-all-foreign-keys-referencing-a-given-table-in-sql-server-2005/483266)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T10:17:23.170

你试过这个[http://web.archive.org/web/20080511142245/http://sqlserver2000.databases.aspfaq.com:80/schema-how-do-i-find-all-the-foreign-keys -in-a-database.html](http://web.archive.org/web/20080511142245/http://sqlserver2000.databases.aspfaq.com:80/schema-how-do-i-find-all-the-foreign-keys-in-a-database.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-06T12:37:04.083

SQL 2005+ 提供了许多系统视图，例如 sys.tables 和 sys.foreign_key_columns，它们可能会对您有所帮助。

```
SELECT
  pt.name AS ParentTable,
  pc.name AS ParentColumn,
  rt.name AS ReferencedTable,
  rc.name AS ReferencedColumn
FROM sys.foreign_key_columns fkc
  INNER JOIN sys.tables pt ON pt.object_id = fkc.parent_object_id
  INNER JOIN sys.columns pc ON pc.column_id = fkc.parent_column_id AND
                               pc.object_id = fkc.parent_object_id
  INNER JOIN sys.tables rt ON rt.object_id = fkc.referenced_object_id
  INNER JOIN sys.columns rc ON rc.column_id = fkc.referenced_column_id AND
                               rc.object_id = fkc.referenced_object_id 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T12:35:33.730

这将列出您的 ID 存在的所有表：

```
DECLARE @Query        varchar(1000)
DECLARE @MaxRow       int
DECLARE @CurrentRow   int
DECLARE @CurrentTable varchar(500)
DECLARE @UserID       int

SET @UserID=???

CREATE TABLE #Rows
(
     RowID                int not null primary key identity(1,1)
    ,TableWithForeignKey  varchar(500)
)

CREATE TABLE #Temp
(
    RowValue  int
)

INSERT INTO #Rows
    (TableWithForeignKey )
    select
        t.name as TableWithForeignKey  --, fk.constraint_column_id as FK_PartNo , c.name as ForeignKeyColumn 
        from sys.foreign_key_columns as fk
            inner join sys.tables    as t on fk.parent_object_id = t.object_id
            inner join sys.columns   as c on fk.parent_object_id = c.object_id and fk.parent_column_id = c.column_id
        where fk.referenced_object_id = (select object_id from sys.tables where name = '????????')
        --order by TableWithForeignKey, FK_PartNo
SELECT @MaxRow=@@ROWCOUNT
SET @CurrentRow=0
SELECT * FROM #Rows
WHILE @CurrentRow<@MaxRow
BEGIN
    SET @CurrentRow=@CurrentRow+1
    SELECT @CurrentTable=TableWithForeignKey FROM #Rows WHERE RowID=@CurrentRow
    --SET @Query='DELETE FROM '+@CurrentTable+' WHERE UserID='+CONVERT(varchar(20),@UserID)
    SET @Query='SELECT COUNT(*) FROM '+@CurrentTable+' WHERE YourIDhere='+CONVERT(varchar(20),@UserID)
    PRINT @Query
    INSERT INTO #Temp
    EXECUTE (@Query)

    IF NOT EXISTS (SELECT RowValue FROM #Temp WHERE RowValue>0)
    BEGIN
        PRINT 'no matches found'
        DELETE #Rows WHERE RowID=@CurrentRow
    END
    ELSE
    BEGIN
        PRINT 'matches found!!'
    END

    DELETE #Temp
END
--list all tables where the ID exists
SELECT * FROM #Rows 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T12:32:26.467

已经发布了几种通过外键关系查找引用用户表的表的方法，还有另一种方法：[http://www.sqlservercurry.com/2009/03/simple-stored-procedure-to-find-foreign。 html](http://www.sqlservercurry.com/2009/03/simple-stored-procedure-to-find-foreign.html)

获得表列表后，您将不得不编写 SQL 来确定哪些表具有特定用户的记录。没有办法解决这个问题。由于查询看起来都一样，您可以将表格列表粘贴到 Excel 中，使用公式构建查询，然后将查询粘贴回 SSMS。

# ruby-on-rails - Authlogic 和acts_as_authentic 问题

> ID：720851
> 
> 赞同：0
> 
> 时间：2009-04-06T09:55:51.227
> 
> 标签：ruby-on-rails, ruby, authentication

我们正在使用 authlogic 进行用户身份验证。它适用于其他机器，但我收到错误消息

提取的源代码（大约第 20 行）：

```
7:         <%= link_to "Home", "/", :title => 'Home', :class => 'header-logo' %>
18: 
19: 
20:        <span style="padding-left:850px;"> <% if current_user %>
21:             <%= link_to "My Account", account_path %>
22:             <%= link_to 'logout', logout_path, :method => :delete, :confirm => "Are you sure you want to logout?" %>
23:           <%elsif !current_user%>

app/models/user.rb:2:in `acts_as_authentic'
app/models/user.rb:2
app/controllers/application.rb:17:in `current_user_session'
app/controllers/application.rb:22:in `current_user'
(eval):2:in `send'
(eval):2:in `current_user'
app/views/layouts/application.html.erb:20 
```

建议我怎么办？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T12:38:59.633

Authlogic doesn't provide a current_user function. You have to make sure you provide it - in your ApplicationController, say.

Following the example is pretty easy ([http://www.binarylogic.com/2008/11/3/tutorial-authlogic-basic-setup](http://www.binarylogic.com/2008/11/3/tutorial-authlogic-basic-setup)). Authlogic is one of the better documented gems out there.

Also, the Google Group ([http://groups.google.com/group/authlogic](http://groups.google.com/group/authlogic)) is very active and quite responsive. You might have better luck there.

# database-design - 数据的时间点“快照”的数据库设计？

> ID：720856
> 
> 赞同：25
> 
> 时间：2009-04-06T09:57:50.910
> 
> 标签：database-design

如何设计一个支持允许应用程序用户在某个时间点创建其数据快照的功能的数据库，有点像版本控制。

它将使用户能够返回并查看他们的数据过去的样子。

假设被“快照”的数据很复杂并且包括多个表的连接。

我正在寻找一种方法，让每个应用程序用户能够对他们的数据进行快照并返回到它。整个数据库快照不是我想要的。

编辑：感谢您的回答。6NF 的答案令人信服，由于其简单性，建议对快照数据进行反规范化。

澄清：这不是数据仓库的问题，也不是数据库备份和恢复的问题；它是关于如何构建一个模式，使我们能够在某个时间点捕获一组特定的相关数据的状态。快照由应用程序用户在他们认为合适时生成。用户不会对整个数据库进行快照，只对他们感兴趣的数据对象进行快照。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-06T11:23:57.597

这并不容易。

您本质上是在要求一个时间数据库（Christopher Date 称之为第六范式，或 6NF）。

要成为 6NF，模式也必须是 5NF，*并且*，基本上，对于每个数据，您需要附加一个时间范围，该值的数据适用于该时间范围。然后在连接中，连接必须只包括在考虑的时间范围内的行。

时间建模很难——这是第 6 范式解决的问题——并且在当前的 RDBMS 中没有得到很好的支持。

问题在于粒度。第 6 范式（据我所知）通过使每个非键（非键：，即，可以在实体不丢失其身份的情况下更改的实体上的任何东西）成为单独的关系来支持时间建模。为此，您添加时间戳或时间范围或版本号。将所有内容都连接起来解决了粒度问题，但这也意味着您的查询将变得更加复杂和缓慢。它还需要弄清楚所有键和非键属性；这往往是一项巨大的努力。

基本上，在任何有关系的地方（“ted 拥有 ID 为 789 的 GM 股票”），您添加一个时间：“ted*现在*拥有 ID 为 789 的 GM 股票”，这样您就可以同时说，“fred 拥有 GM 股票从 2000 年 2 月 3 日到昨天的 ID 为 789 的证书”。显然，这些关系是多对多的，（ted 现在可以拥有多个证书，在他的一生中也可以拥有多个证书，fred 之前可以拥有 jack 现在拥有的证书）。

所以我们有一个所有者表，一个股票证书表，以及一个通过 id 关联所有者和证书的多对多表。在多对多表中，我们添加了 start_date 和 end_date。

现在，假设每个州/省/土地都对股票的股息征税，因此出于税收目的，要记录股票所有者的居住状态。

所有者居住地明显可以随股权独立变更；ted 可以住在内布拉斯加州，购买 10 股，获得内布拉斯加州征税的股息，搬到内华达州，将 5 股卖给弗雷德，再购买 10 股。

但对我们来说，它可以在某个时候搬到内布拉斯加州*，在某个时候*买 10 股*，在某个时候**获得*股息，这是内布拉斯加州征税的，在某个时候搬到内维达*，在某个时候**卖*5 股给弗雷德，买 10股*在某个时候*更多的股票。

如果我们想计算 ted 在内布拉斯加州和内华达州所欠的税款，我们需要所有这些，加入 person_stockcertificate 和 person_address 中的匹配/重叠日期范围。一个人的地址不再是一对一的，而是一对多的，因为它是*时间范围内*的地址。

如果 ted 购买了 10 股，我们是用单一的购买日期模拟购买事件，还是为每股添加 date_bought？取决于我们需要模型回答的问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-06T10:59:00.497

我们这样做了一次，通过创建包含我们想要快照的数据的单独的数据库表，但非规范化，即每条记录都包含有意义所需的所有数据，而不是对可能存在或可能不再存在的 id 的引用。它还为每一行添加了一个日期。

然后我们为特定的插入或更新生成触发器，这些触发器在所有受影响的表上进行连接，并将其插入到快照表中。

这样，编写将用户数据恢复到某个时间点的内容将是微不足道的。

如果你有一张桌子：

用户：

```
id, firstname, lastname, department_id 
```

部：

```
id, name, departmenthead_id 
```

您的用户表快照可能如下所示：

```
user_id, user_firstname, user_lastname, department_id, department_name, deparmenthead_id, deparmenthead_firstname, departmenthead_lastname, snapshot_date 
```

和类似的查询

```
INSERT INTO usersnapshot
SELECT user.id AS user_id, user.firstname AS user_firstname, user.lastname AS user_lastname,
department.id AS department_id, department.name AS department_name
departmenthead.id AS departmenthead_id, departmenthead.firstname AS departmenthead_firstname, departmenthead.lastname AS departmenthead_lastname,
GETDATE() AS snapshot_date
FROM user
INNER JOIN department ON user.department_id = department.id
INNER JOIN user departmenthead ON department.departmenthead_id = departmenthead.id 
```

这可确保快照中的每一行在该时间点都是正确的，即使在此期间部门或部门负责人已更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-07T03:03:41.397

拥有快照和/或审计跟踪是常见的数据库要求。对于许多应用程序，创建“影子”或审计表是一项简单而直接的任务。虽然数据库级备份和事务日志很好，但它们不是版本控制系统。

基本上，您需要创建一个与基表具有所有相同列的影子表，然后在基表上设置触发器，以便在更新或删除时将行的副本放置在影子表中。

通过一些逻辑，您可以重新创建数据在给定时间点的样子。有关在 Sybase 中进行设置的简单方法，请参见：[http ://www.theeggeadventure.com/wikimedia/index.php/Sybase_Tips#create_.27audit.27_columns](http://www.theeggeadventure.com/wikimedia/index.php/Sybase_Tips#create_.27audit.27_columns)

如果您需要做大量的历史快照，那么您可以将数据保存在同一张表中。基本上，创建两列 - 添加和删除的列。缺点是每个查询都必须添加 where 子句。当然，您可以创建一个仅显示活动记录的视图。如果您有一个包含多个表的规范化数据库，并且所有表都有历史记录，这会变得有点复杂。

但是，它确实有效。您只需在每个表上添加“添加”和“删除”列，然后您的查询就有感兴趣的时间点。每当修改数据时，您必须复制当前行，并将其标记为已删除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T16:14:25.690

使用[日志触发器](http://en.wikipedia.org/wiki/Log_trigger)

捕获所有数据更改，从而能够像在任何时间点一样进行查询。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T10:00:58.467

SQL Server 2005（以上）企业版能够创建[数据库快照](http://msdn.microsoft.com/en-us/library/ms175158.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T10:32:27.223

Oracle 9i 版本具有闪回技术，该技术在 Oracle 10g 和 11g 中得到了很大改进，只要启用闪回，您就可以查看历史上任何给定点的数据库状态。

检查此文档：[闪回概述](http://www.oracle.com/technology/deploy/availability/htdocs/Flashback_Overview.htm)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-06T10:40:22.227

您可以使用 RDBMS 生成的日志来获取数据的快照。通常，日志用于提供数据库恢复。然而，它们也可用于跨多个 RDBMS 实例复制数据或获取数据的快照。

要获取数据的快照，只需考虑在所需时刻之前生成的所有日志。然后，您“回放”这些日志以获取恢复数据的实际数据库。

如何访问和“回放”日志取决于您使用的具体 RDBMS 产品。

另一种可能性是使用时态数据库。它们具有内置的时间方面并允许“回到过去”。例如，查找“Oracle 闪回技术”。 [http://www.stanford.edu/dept/itss/docs/oracle/10g/appdev.101/b10795/adfns_fl.htm#ADFNS1008](http://www.stanford.edu/dept/itss/docs/oracle/10g/appdev.101/b10795/adfns_fl.htm#ADFNS1008)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-06T11:30:24.213

至少使用 SQL Server，您可以使用完整日志记录并在每个备份集之间保留事务日志。

然后，您可以进行时间点备份。

这是一个糟糕的解决方案。

你的客户到底想要什么？是否出于分析目的（即问题就像我们两周前有多少订单）？因为这正是数据仓库解决的问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-18T21:23:42.670

也许考虑使用像 MongoDB 这样的 NoSql 解决方案将所有关系数据聚合到一个文档中，然后将该文档与时间戳或版本号一起存储。Kafka-Connect 或 Oracle Golden Gate 等解决方案简化了将关系数据传输到 NoSql 存储的过程。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-07T04:31:40.837

我会在每个表上使用一个额外的时间戳字段，无论是主表还是事实/事务表。即使目标是更新，也需要新插入所有表。

# java - 将 for 循环重构为函数

> ID：720866
> 
> 赞同：1
> 
> 时间：2009-04-06T10:03:02.240
> 
> 标签：java, function, for-loop

我有这段java代码：

```
int maxDigit = 4;
for(int a = 0; a <= maxDigit; a++)
{
  for(int b = 0; b <= maxDigit; b++)
  {
    if(b != a){
      for(int c = 0; c <= maxDigit; c++)
      {
        if(c != a && c != b)
        {
          for(int d = 0; d <= maxDigit; d++)
          {
            if(d != a && d != b && d != c)
            {
              for(int e = 0; e <= maxDigit; e++)
              {
                if(e != a && e != b && e != c && e != d)
                {
                  String temp = a + "" + b + "" + c + "" + d + "" + e;
                  System.out.println(temp);
                  permutations.add(Integer.parseInt(temp));
                }
              }
            }
          }
        }
      }
    }
  }
} 
```

如何将这段代码转换为函数？

目的是生成数字 0 到 9 的排列，在上面的代码中，它是从 0 到 4。将它放入函数中似乎很容易，但我无法立即找到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T21:16:18.033

[这是获取字符串的所有排列](https://web.archive.org/web/20091027075904/http://geocities.com/oosterwal/computer/combinations.html)的经典问题的变体。

你的教授希望你做出的归纳是这个问题很适合使用**递归**的解决方案。

字符串排列的基本算法`s`如下：

1.  选择 中的第一项`s`。
2.  获取其他项目的所有排列`s`（选定的项目除外）。
3.  将所选项目添加到步骤 2 中的每个排列。
4.  对 的下一个字符重复`s`。

[这是使用函数式 Java](https://www.functionaljava.org/)库的有效解决方案。

导入这些...

```
import fj.F;
import fj.P2;
import fj.P1;
import fj.data.Stream;
import static fj.data.Stream.nil;
import static fj.data.Stream.cons;
import static fj.data.Stream.range;
import static fj.data.Enumerator.charEnumerator;
import static fj.data.Show.streamShow;
import static fj.data.Show.charShow;
import static fj.P2.map2_; 
```

查找排列的递归函数：

```
public Stream<Stream<Character>> permutations(final Stream<Character> s) {
  return selections(s).bind(
    new F<P2<Character, Stream<Character>>, Stream<Stream<Character>>>() {
      public Stream<Stream<Character>>()
        f(final P2<Character, Stream<Character>> ys) {
          return permutations(ys._2()).bind(cons(ys._1()));
        }
      });
} 
```

依次选择每个元素的递归函数：

```
public Stream<P2<Character, Stream<Character>>>
selections(final Stream<Character> s) {
  if (xs.isEmpty())
    return nil();
  else {
    final char x = xs.head();
    final Stream<Character> xs = s.tail()._1();
    return cons(P.p(x, xs),
      new P1<Stream<P2<Character, Stream<Character>>>>() {
        public Stream<P2<Character, Stream<Character>>> _1() { 
          return selections(xs).map(map2_().f(cons(x))));
        }
      });
  }
} 
```

然后，获取字符 '0' 到 '9' 的所有排列：

```
Show<Stream<Character>> s = streamShow(charShow);
for (Stream<Character> ps : permutations(range(charEnumerator, '0', '9'))) {
  System.out.println(s.showS(ps));
} 
```

**编辑**：这实际上是[comonads](https://web.archive.org/web/20210514170237/https://planetmath.org/comonad)的一个很好的用例。使用最新的函数式 Java 主干头，您可以使用 Zipper comonad 执行此操作，如下所示：

```
public static Stream<Stream<Character>> perms(Stream<Character> s) {
  Stream<Stream<Character>> r = single(Stream.<Character>nil());
  for (final Zipper<Character> z : fromStream(s))
    r = join(z.cobind(
      new F<Zipper<Character>, Stream<Stream<Character>>>() {
        public Stream<Stream<Character>> f(final Zipper<Character> zp) {
          return perms(zp.lefts().reverse().append(zp.rights())).map(compose(
            Stream.<Character>cons().f(zp.focus()),
              P.<Stream<Character>>p1()));
        }
      }).toStream());
  return r;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T10:12:53.103

填补漏洞：

```
int[] indexes = { 0, 0, 0, 0, 0 };
addPermutations(maxDigit, indexes, 0, permutations);

void addPermutations(int max, int[] indexes, int currentIndex, List<Integer> permutations) {
    if (currentIndex == indexes.length) {
        // terminal case
        String temp = ...;
        System.out.println(temp);
        permutations.add(Integer.parseInt(temp));
    } else {
        // recursive case
        for (int i = 0; i <= max; i++) {
            if (... != i) {
                indexes[currentIndex] = i;
                addPermutations(max, indexes, currentIndex+1, permutations);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T10:15:52.287

没有代码，但算法应该如下。

假设您想要从 0 到 7 的 5 位数字的所有排列。为此：

*   计算`j =`100000（1 + 5 个零）的 base-7 值的十进制值
*   Loop `for i = 0; i < j; ++i`，将每个转换`i`为 base-7 系统，可选地以零开头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T10:41:43.957

您可以使用 N 叉树，每个点有 4 个分支，递归地导航树并越过已经看到该节点数字的分支？

# authentication - Python 中的 HTTP 身份验证

> ID：720867
> 
> 赞同：15
> 
> 时间：2009-04-06T10:03:12.737
> 
> 标签：authentication, curl, http-headers, python

什么是 python urllib 等价的

```
curl -u username:password status="abcd" http://example.com/update.json 
```

我这样做了：

```
handle = urllib2.Request(url)
authheader =  "Basic %s" % base64.encodestring('%s:%s' % (username, password))
handle.add_header("Authorization", authheader) 
```

有没有更好/更简单的方法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-04-06T10:09:33.923

诀窍是创建一个密码管理器，然后告诉 urllib。通常，您不会关心身份验证的领域，只关心主机/网址部分。例如，以下内容：

```
password_mgr = urllib2.HTTPPasswordMgrWithDefaultRealm()
top_level_url = "http://example.com/"
password_mgr.add_password(None, top_level_url, 'user', 'password')
handler = urllib2.HTTPBasicAuthHandler(password_mgr)
opener = urllib2.build_opener(urllib2.HTTPHandler, handler)
request = urllib2.Request(url) 
```

将为每个以 . 开头的 URL 设置用户名和密码`top_level_url`。其他选项是在此处指定主机名或更完整的 URL。

[在http://www.voidspace.org.uk/python/articles/urllib2.shtml#id6](http://www.voidspace.org.uk/python/articles/urllib2.shtml#id6)上有一个很好的描述这个和更多的文档。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-06T10:11:21.750

是的，看看[urllib2.HTTP*AuthHandlers](http://docs.python.org/library/urllib2.html#httpbasicauthhandler-objects)。

文档中的示例：

```
import urllib2
# Create an OpenerDirector with support for Basic HTTP Authentication...
auth_handler = urllib2.HTTPBasicAuthHandler()
auth_handler.add_password(realm='PDQ Application',
                          uri='https://mahler:8092/site-updates.py',
                          user='klem',
                          passwd='kadidd!ehopper')
opener = urllib2.build_opener(auth_handler)
# ...and install it globally so it can be used with urlopen.
urllib2.install_opener(opener)
urllib2.urlopen('http://www.example.com/login.html') 
```

# javascript - Firefox 找不到 iframe

> ID：720870
> 
> 赞同：1
> 
> 时间：2009-04-06T10:03:50.287
> 
> 标签：javascript, html

这是我试图访问的 iframe：

```
 <div class="mceBody" id="additionalTxt_b">
        <iframe frameborder="0" id="additionalTxt_f" src='javascript:""' class="punymce"/>
 </div> 
```

使用这条线：

```
frames['additionalTxt_f'].document.getElementsByTagName("body")[0].innerHTML 
```

出于某种原因，我从萤火虫那里得到“frames.additionalTxt_f is undefined”。我在其他页面上有类似的 iframe（由 punyMCE 插件动态创建），它们工作得很好。IE7/8 访问这个 iframe 也没有问题。

在这里完全不知所措。关于为什么 Firefox 找不到 iframe 的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-06T10:15:10.713

该`window.frames[]`数组由 [i] 帧的`name`属性（也称为帧目标）索引。`id`不能依赖它也可以工作——尽管它可能在 IE <8 中，它通常认为名称和 id 是同一件事。

如果您想通过 ID 访问框架的内容，请使用 DOM Level 2 HTML`contentDocument`属性而不是老式（“DOM Level 0”）`frames`数组：

```
document.getElementById('additionalTxt_f').contentDocument.body.innerHTML 
```

...但是，为了与 IE <8 兼容，您还必须添加一些后备功能，因为它不支持`contentDocument`：

```
var f= document.getElementById('additionalTxt_f');
var d= f.contentDocument? f.contentDocument : f.contentWindow.document;
d.body.innerHTML 
```

所以这取决于你认为哪种方法不那么难看：额外的脚本工作，或者只是使用`name`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T14:14:16.707

如果您只有 1 个 iframe，您还可以使用 window.frames[1] 或 document.getElementsByTagName('iframe')[0] 找到它

（在第一个选项中，父窗口是#0）

# javascript - 如何检测谷歌地图折线叠加层上的点击事件？

> ID：720873
> 
> 赞同：5
> 
> 时间：2009-04-06T10:04:43.047
> 
> 标签：javascript, google-maps

在我看来，我应该能够执行以下操作来检测谷歌地图上一行的点击事件：

```
var line = new GPolyline( ... );
map.addOverlay(line);
GEvent.addListener(line, "click", function(latlng){ alert("clicked"); }); 
```

[api 参考](http://code.google.com/apis/maps/documentation/reference.html#GPolyline.click)说这在 2007 年发布的版本 2.88 中可用（！？），所以我假设这就是我正在使用的，但我不知道如何确认。

我还尝试`{clickable:true}`明确设置该选项（它应该是默认选项。）我已经在 FireFox 3 和 Opera 9.6 中进行了测试，所以怀疑它是特定于浏览器的。我也在页面上使用 jQuery。

我有很多代码可以检测对标记的点击效果很好，点击线条会非常好，任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-11-08T12:38:39.683

更新：在 API 的第 3 版中，您想使用`google.maps.event.addListener(object, event, function);`

例如

```
google.maps.event.addListener(polyline, 'click', function() {
    alert('you clicked polyline');
    }); 
```

有关更多详细信息，请参阅[事件 api](http://code.google.com/apis/maps/documentation/javascript/events.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-07T23:07:26.603

我刚刚做了一个快速测试，以下代码在我的测试页面上运行：

```
var polyline = new GPolyline([
  new GLatLng(37.4419, -122.1419),
  new GLatLng(37.4519, -122.1519)
], "#ff0000", 10);
map.addOverlay(polyline);

GEvent.addListener(polyline, 'click', function() {
    alert('you clicked polyline');
}); 
```

判断您拥有的 google maps 版本的方法是查看您拥有的 google maps src url 的 v= 参数

```
http://maps.google.com/maps?file=api&v=2&key=MY_API_KEY
```

在这种情况下，我有“v=2”，这意味着我使用的是最新的 stable 2 版本，它支持可点击的折线（截至今天，2.101 是最新版本）。“v=2.x”表示您正在使用边缘版本。句号 (.) 之后的任何内容都是数字的任何“v=2.5”都是指特定版本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-04-12T21:08:57.817

谢谢你！

1.  许多 GMarker 点击示例在 addListener() 之前都有 GEvent，我发现这不起作用。颠倒顺序使它起作用。

2.  你可以通过 alert(G_API_VERSION) 找到你的真实版本；

使用上面的标准 src url，我的是：// G_API_VERSION == 208a

再次感谢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-04-13T23:10:19.377

GPolylines 可以通过像其他对象一样向它们添加点击事件来使其可点击（代码取自先前的答案）：

```
var polyline = new GPolyline([
  new GLatLng(37.4419, -122.1419),
  new GLatLng(37.4519, -122.1519)
], "#ff0000", 10);
map.addOverlay(polyline);

GEvent.addListener(polyline, 'click', function() {
    alert('you clicked polyline');
}); 
```

但是，您还应该注意，在引发 GPolyline 事件后，会引发地图本身在同一位置的单击事件。此外，此特定事件当前存在一个错误（截至 2010 年 4 月），因为事件参数未正确传递给地图点击事件。这是谷歌已知的错误，他们正在努力修复它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-14T10:37:12.987

*请注意，在折线上的符号*中似乎不可能有点击事件。它们也不会继承附加到*折线*本身的点击事件。更多信息在这里：[谷歌地图：可点击的折线图标](https://stackoverflow.com/questions/15968898/google-maps-clickable-polyline-icon/16540858#16540858)

# html - 自动调整高度

> ID：720882
> 
> 赞同：0
> 
> 时间：2009-04-06T10:12:01.890
> 
> 标签：html, css, height

我试图让一个 div 自动调整到其右侧 div 的高度。

您可以在此处查看示例 www.littledesignplanet.co.uk/lloyd 左侧的空白 div 我手动设置了高度。

有没有办法让它自动保持与主要内容 div 相同的大小？因为每一页都会有不同的高度。

谢谢， 萨夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T10:22:25.577

嗯...你为什么不把 of 设置`margin-left`为`#content`400px 呢？这将产生相同的结果，但方式更简单。

干杯:)

**更新**：如果你想让两列的高度相等，有几种技术可以做到这一点。我最喜欢的是这个：

```
<div class="container">
    <div id="whitespace">Lorem ipsum</div>
    <div id="content">Foo<br />bar</div>
</div>
<style type="text/css">
.container {overflow: hidden;}
#whitespace, #content {padding-bottom: 32767px;margin-bottom: -32767px;}
</style> 
```

# c# - directx基础能力测试

> ID：720885
> 
> 赞同：0
> 
> 时间：2009-04-06T10:14:47.937
> 
> 标签：c#, .net, vb.net, directx, managed-directx

我有一个托管的 directx 9.0c 应用程序无法在一些低规格机器（没有显卡的机器）上运行。

我想知道是否有人对要测试的最小 Directx 上限有任何建议，以便我可以在尝试运行应用程序之前发现潜在的故障。

directx 应用程序只显示几个网格和几个纹理，并没有太密集。

我目前检查 SupportsHardwareTransformAndLight，如果有则启用 HardwareVertexprocessing，如果没有则启用 SoftwareVertexProcessing。只是想知道我还应该寻找什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T19:09:37.637

初始化 DirectX 9.0c 本身时可能会失败？

可能会发生几件事：

*   DX9.0c 可能没有安装在机器上。它包含在 Windows XP SP2 和更高版本中，但在早期版本的 Windows 上，必须手动安装运行时。
*   硬件加速可能不可用。用户没有安装*任何*图形驱动程序，或者在驱动程序设置中明确禁用了硬件加速。

根据我们掌握的数据，上述情况适用于大约 3% 的“休闲用户”空间（[2009 年第一季度数据](http://unity3d.com/webplayer/hwstats/pages/web-2009Q1-shader.html)）。

除此之外，也许您的应用程序本身使用了某些功能，而没有检查显卡是否支持这些功能。

# ruby-on-rails - 在 Rails 中将操作关联到 on_change for form.select？

> ID：720895
> 
> 赞同：2
> 
> 时间：2009-04-06T10:20:40.760
> 
> 标签：ruby-on-rails, ruby, drop-down-menu

以下是我选择聊天室的下拉菜单：

```
<% form_for :chat_room do |form| %>
          <%= form.select(:title, @chat_rooms.collect! {|x| x.title},{:include_blank =>'select a chat room'}) %>
        <% end %> 
```

我的路线是：

```
ActionController::Routing::Routes.draw do |map|

  map.resource :account, :controller => "users"
  map.resources :poll
  map.resources :users,:has_many => :stories
  map.resources :chat_rooms ,:member => {:create_message => :post},:collection => {:ajax_updater=>:get}
  map.logout 'logout', :controller => 'user_sessions', :action =>'destroy'
  map.resource :user_session
  map.resource  :welcome
  map.connect '/', :controller => 'welcome', :action => 'index'

  map.connect ':controller/:action/:id'
  map.connect ':controller/:action/:id.:format'
end 
```

在更改下拉列表中的值时，我想导航到所选的特定聊天室。我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T11:00:57.437

一种（简单）方法是将 :onchange 参数添加到选择助手

```
form.select(:title, @chat_rooms.collect! {|x| [x.title, x.id] },{:include_blank =>'select a chat room'}, :onchange => 'window.location.href = "chat_rooms/" + this.getAttribute("value")') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-13T20:32:27.070

这只是 andi 上面使用的方法的一种变体，但是...

我现在通常使用的模式是编写一个简单的 javascript 函数来加载选定的路径：

```
CHATROOM.display_selected = function(id, base_path)
{
  window.location = base_path + '?id=' + id;  
} 
```

然后这个函数被 select 标签的 onchange 调用：

```
select_tag("chat_room",options_for_select(chat_rooms, selected), :onchange => "CHATROOM.display_selected(this.value, '#{chat_rooms_path}')") 
```

其中 path 变量是 chat_rooms 的基本路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T16:31:28.513

假设您使用的是 jQuery（现在谁不是），这样的事情会起作用：

ERB 视图（从上面更正）：

```
<% form_for :chat_room do |form| %>
  <%= form.select(:title, @chat_rooms.map { |c| [c.title, c.id] }, {:include_blank =>'select a chat room'}) %>
<% end %> 
```

JS：

```
$(document).ready(function () {
  $("#chat_room_title").change(function(event) {
    window.location = "/chat_rooms/" + $("#chat_room_title").val() + "/";
  });
}); 
```

原型代码将非常相似。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T15:40:37.653

只是一个简短的说明，我知道你没有问过它。但是，当您使用聊天时，请使用 ajax 轮询来检查新聊天。如果您还没有这样做，请查看[Juggernaut](http://juggernaut.rubyforge.org/ "剑圣")。

# nhibernate - 是否可以让 NHibernate 从 ID 自动生成属性？

> ID：720906
> 
> 赞同：1
> 
> 时间：2009-04-06T10:31:57.880
> 
> 标签：nhibernate

我在使用 NHibernate 持久化的类上具有以下属性：

```
public virtual string Code
{
    get { return Id.ToString("SP000"); }
} 
```

但是我来做这个，这当然是行不通的：

```
Session.Linq<MyType>().Where(x => x.Code.Contains(searchTerm)); 
```

那么，是否可以将代码存储在数据库中并让 NHibernate 管理

```
.ToString("SP000") 
```

设置代码，何时设置 ID？

编辑：我想我需要一个拦截器，但我不确定如何实现我需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T11:59:08.870

让我重述这个问题以确保我理解它：您有一个映射到 Id 属性的整数主键，但您想查询作为只读字符串的 Code 属性。如果您有代码为“SP123”和“SP234”的记录，则查询将返回 searchTerm“2”的两条记录。

尝试使用 HQL（休眠查询语言）而不是 Linq 进行此查询。您可以在 HQL 中使用 SQL 函数，因此您的查询将类似于：

```
"from Table t where 'SP' + CAST(Id AS varchar) LIKE '%" + searchTerm + "%'"; 
```

您需要重写它以使用参数，使其不易受到 SQL 注入攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-05-31T10:55:12.313

将代码映射为 hbm 中的只读属性，然后您可以以任何您喜欢的方式搜索它！

作为改变 id 的副作用，您还应该考虑为其添加唯一约束，并设置属性 update=false 属性。

亲切的问候

# asp.net - ASP.NET 网站会员费处理

> ID：720910
> 
> 赞同：0
> 
> 时间：2009-04-06T10:36:01.007
> 
> 标签：asp.net, shopping-cart

我正在建立一个网站，人们将注册并付费使用在线网络应用程序（按年收费）。我一直在寻找，但似乎无法找到适用于此类场景的非常简单的结帐/订单处理组件。我真的不想要或不需要带有产品页面等的完整购物车，因为我们实际上只销售一种产品。只需要能够有一个简单的结帐页面来确认他们想要订阅并输入优惠券代码（可选），然后提供多种支付选项。最初我真的只需要 PayPal Web Payments Standard 集成，但希望它已经为 Authorize.NET 等其他人提供了钩子，以防我们将来添加它。

有没有这样的东西，还是我必须自己动手？如果没有必要，我不想重新发明轮子。我意识到我可以深入研究 dashCommerce 或 nopCommerce 之类的开源推车之一，并尝试找出合适的部分。我唯一的问题是它们几乎与围绕典型产品/购物车情况的数据模型相关联。

我期待您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-05T04:21:12.260

听起来你已经完成了你需要的研究。为此没有任何“事实上的标准”库。但肯定有很多。找到一个适合您的场景并尝试一下。

没有多大帮助，我知道。无论如何，我只是建议您已经提到的两个，PayPal 和 Authorize.NET。

# php - ZF：在模型内部执行重定向

> ID：720911
> 
> 赞同：2
> 
> 时间：2009-04-06T10:36:12.377
> 
> 标签：php, zend-framework, redirect, model

我选择将表单处理从 Controller 移动到*MyForm*类，以遵循**ThinController/FatModel**规则。但是我在 Zend_Form 类中的一些代码需要执行重定向。

在 Zend_Controller_Action 我的重定向是：

> $this->_redirect('/');

在 Zend_Form 中会变成什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-06T10:42:45.513

```
$redirector =
    Zend_Controller_Action_HelperBroker::getStaticHelper('redirector');
$redirector->gotoSimple('index','index'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T14:24:26.993

如果您从其中重定向，它不是模型组件。您应该只从表示层进行重定向。

* * *

> 这会是什么例子？假设目前我有一个简单的 RecordForm 类，并且在它的 init() 中，我在检查记录更新是否成功的行之后进行重定向。

您可以让函数返回一个指示成功/失败的值，并让调用者（控制器）根据结果执行重定向。

# java - 当有一些空标记时，如何在 Java 中分隔标记

> ID：720913
> 
> 赞同：0
> 
> 时间：2009-04-06T10:36:43.077
> 
> 标签：java, parsing, csv

我在 .csv 文件中有一行作为 abc，bcc，

我必须将它分成三个标记作为 abc bcc 和 null

首先我尝试了 stringTokenizer 但它不会返回 null 令牌所以之后我尝试 string.split(",") 但它不会返回最后一个 null 字符串它将返回中间有 null 但最后没有的字符串

所以请帮助我提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T10:43:18.443

使用带有负数的第二个参数的两个参数拆分

```
String str = "abc,bcc,";
String[] tokens = str.split(",", -1); 
```

[拆分（字符串，整数）文档](http://java.sun.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String,%20int))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T10:41:05.143

尝试采用限制[的`String.split()`变体](http://java.sun.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String,%20int))并将负数传递给它。

# .net - .net 3.5 在 Intranet 上运行

> ID：720922
> 
> 赞同：2
> 
> 时间：2009-04-06T10:42:37.917
> 
> 标签：.net, filesystems

我有一个在 Intranet 上运行的 .net 3.5 应用程序，据我所知，它应该在映射驱动器上“运行”，但我得到一个 SecurityException 类型“FileIOPermission”，当我调用时会发生这种情况

```
File.Open(mCurrentFile, FileMode.Create, FileAccess.Write, FileShare.Read) 
```

我可以在映射驱动器上创建文件，所以我确实有写权限..而且计算机不在域中..

我知道 2.0 应用程序不是从网络运行的，但据我所知 3.5 现在应该这样做，可能系统 dll 是 v2.0 但没有 v3.5，所以我无法更改它...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T10:54:25.063

我认为你需要在这里澄清这个问题。我相信你混淆了两个不同的、不相关的东西：-

1）您的应用程序在尝试打开网络文件时遇到异常

2) 如果驻留在网络共享上，应用程序可能无法执行。

从您的问题看来，2) 不是问题，因为您可以运行您的应用程序。如果是这样，您应该从您的问题中删除对此的引用。

如果确实只有 1) 是您的问题，那么在我看来，执行该进程的帐户没有从指定位置读取的权限。您需要确认两件事，a）文件的路径在执行时是正确的，b）运行进程的帐户在该位置具有必要的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T11:14:43.220

Marc Gravell，您告诉我尝试 3.5 sp1，它确实有效，但我无法将您的回答标记为正确，因为您似乎删除了答案...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T11:22:32.093

每台计算机都有权限设置，只要它们允许在从不同位置运行的 .NET 可执行文件中运行。我相信有本地计算机、LAN 和 Internet 的设置。我会尝试增加局域网的权限......如果这不起作用，请尝试互联网，以防万一。在XP的控制面板->管理工具中可以找到这个控制工具，不知道是不是Vista。

# cakephp - CakePHP 可以使用不相关的 `$this->Model->query()` 方法将数据插入模型吗？

> ID：720926
> 
> 赞同：0
> 
> 时间：2009-04-06T10:43:42.173
> 
> 标签：cakephp

在 CakePHP 中，是否可以插入与另一个模型无关的另一个表？例如，我有一个模型 Post 。我可以使用 $this->Post->query('insert into tablename(col1) values (' . "$formname" . ')');

建议我回答......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T13:23:54.253

您可以使用['uses' 变量](http://book.cakephp.org/view/53/components-helpers-and-uses)来指定要在控制器中使用的模型：

```
var $uses = array('Recipe', 'User'); 
```

这将告诉控制器（在本例中为 RecipesController）使用 User 模型以及它的默认模型（Recipe）。现在您可以像在 UsersController 中一样处理 $this->User。

希望我正确理解了你的问题。

汤姆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T13:29:50.027

为另一个表创建一个模型，然后您可以随时使用此表写入该表：

```
<?php 
  App::import('Model', 'MyModel');
  $this->MyModel = new MyModel;
  $this->MyModel->save($MyData);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T15:57:30.607

是的，使用 query() 您可以执行任何 SQL 语句，因此也可以使用此方法插入数据，就像您在示例中所做的那样。

但是，通常使用提到的其他方法之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-09T09:07:58.257

仅在绝对必要且没有其他方法（即在极端情况下）时才使用 Model::query()。Cake 为您提供了很多工具来避免这样做。

最简单的解决方案是使用以下内容：

```
$otherModel = ClassRegistry::init('OtherModel');
$otherModel->save(<your usual stuff here>); 
```

ClassRegistry::init() 返回模型的一个实例（自己做这个是个坏主意），并且是访问应用程序中*任何模型的简单方法。*

如果您使用“var $uses”方法，OtherModel 将**始终**为该控制器加载，这可能不是您想要的（它会带来很多不必要的开销）。

# python - 字符串内的字符串

> ID：720927
> 
> 赞同：2
> 
> 时间：2009-04-06T10:43:45.743
> 
> 标签：python, string

```
BASE_URL = 'http://foobar.com?foo=%s'

variable = 'bar'

final_url = BASE_URL % (variable) 
```

我得到这个`'http://foobar.com?foo=bar'`# 它忽略了内部字符串。

但我想要这样的东西`'http://foobar.com?foo='bar''`

感谢你的回答。

你能帮我解决几乎同样的问题吗：

```
lst = ['foo', 'bar', 'foo bar']

[str(l) for l in lst if ' ' in l] 
```

我明白`['foo bar']`了，但我想要它`[''foo bar'']`

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-06T10:45:41.327

将您更改`BASE_URL`为

```
BASE_URL = "http://foobar.com?foo='%s'" 
```

或者

```
BASE_URL = 'http://foobar.com?foo=\'%s\'' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-06T10:50:45.183

如果您使用 URL 参数，使用 urllib.urlencode 可能更安全：

```
import urllib

BASE_URL = 'http://foobar.com/?%s'
print BASE_URL % urllib.urlencode({
   'foo': 'bar',   
}) 
```

关于引号：您为什么明确想要它们？通常，您的 HTTP 包装器会为您处理所有这些。

关于您的第二个问题：如果您绝对还想在其中包含引号，则在附加包含的字符串时仍然必须对其进行转义，或者（可能是更安全的方法）将使用 repr(...)

```
lst = ['foo', 'bar', 'foo bar']
lst2 = []

for l in lst:
    if ' ' in l:
        lst2.append(repr(l)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-06T11:27:47.793

看来，您对*字符串文字*的工作方式有些困惑。

当您说 时`s = 'this is a string'`，您正在将字符串分配给变量。什么字符串？好吧，您在程序中硬编码的字符串文字。

Python 使用撇号来指示字符串文字的开始和结束——其中的任何*内容*都是字符串的内容。

这可能是编程初学者的第一个难题：您在程序源代码中编写的内容与运行时实际发生的内容之间存在差异。您可能需要完成一些教程（我听说“深入 Python”非常好）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-07T08:52:28.110

如果您希望单引号出现在 URL 中，您可以使用

```
BASE_URL = 'http://foobar.com?foo=%s'
variable  = "'bar'"
final_url = BASE_URL % (variable) 
```

但是，如果变量来自某个地方（例如用户输入），则此变体非常不安全。

# php - 我从 PHP 生成的链接有什么问题？

> ID：720931
> 
> 赞同：-1
> 
> 时间：2009-04-06T10:46:29.357
> 
> 标签：php, jquery, ajax

在我的代码中，当我单击时，我只是超链接到 PHP 函数的锚标记。

我的代码如下。文件`another.php`由[Ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)调用，`index.php`来自 jQuery。

### 另一个.php

```
<?php    
    echo " <a href='my.php?action=show&amp;id=".$fid."'
        onclick=\"return  display('".$fid."');\"> ";  
    echo "" .$fname."</a> ";
?> 
```

当我单击它时，超链接不起作用。

我对前导空格有问题吗？我需要更改我的代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T10:55:02.660

如果“显示”函数返回 false，则您的 onclick 处理程序正在短路默认的超链接功能。而不是将 onclick 设置为“return display($fid)”，只需设置 onclick="display($fid)" 并且超链接将始终有效。

如果没有看到您的其余代码或更详细的描述，我真的无法判断还有什么问题。但这是第一个让我震惊的事情。如果元素的事件处理程序返回 false，则常规功能永远不会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T10:50:43.420

为什么你是第二个`echo "" .$fname."</a> ";`？？？第一个“”根本不必在那里

此外，空格似乎不应该在点 - 前面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T11:01:27.450

```
<?php
   echo '<a href="my.php?action=show&id='.$fid.'"
     onclick="return  display(\''.$fid.'\');">'.$fname.'</a>';
 ?> 
```

这应该可以工作，我总是使用 ' 作为 php 字符串，而 HTML 部分中的 " 使它更容易阅读:)

更大的错误是你的链接看起来像这样：Bla 因为你做了一个自我关闭它可能显示一个没有价值的链接

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T11:03:24.417

我不太清楚你想用一个锚标记中的所有东西来实现什么......对 onclick 事件做出反应并将浏览器重定向到另一个位置？我了解到调整`<a>`标签功能的简单方法是：

```
<a href="javascript:doStuffHere()" id="...">...</a> 
```

所以你不要`onclick`与强制混合`href`。尝试重建你的链接是这样的。

至于您的 PHP 风格，当您使用双引号来分隔字符串时，您不必打破引号来插入变量内容。你可以写：

```
<?php

$fid = 'myId';
$fname = 'my link name';

echo "<a id=\"$fid\" href=\"javascript:doStuff()\">$fname</a>";

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T11:12:12.727

就像其他人提到的那样，它可能与 JavaScript 返回有关。因为我真的不能说PHP代码本身有什么问题会导致问题。

但是，我确实有一些技巧可以使您的代码更容易阅读。

关于处理字符串，我的第一个建议是永远不要强迫自己转义 ' 或 "。通过切换引用样式，您可以更轻松地阅读代码并更轻松地找到由引号引起的问题。

`echo " <a href='my.php?action=show&amp;id=".$fid."' onclick=\"return display('".$fid."');\"/> ";`

这将变成：

`echo ' <a href="my.php?action=show&amp;id='.$fid.'" onclick="return display("'.$fid.'");"> '.$link_title.'</a>;`

实际上，在输入此内容时，我注意到您没有获得超链接，因为您没有完成锚标记。更具体地说，您将使用 / 提前终止它。在上面的示例中，我添加了：

`.$link_title.'</a>` 这应该可以解决问题。

第二个建议：

`echo "" .$fname."</a> ";` 可以很容易地输入：

`echo $fname.'</a> ';`

对于不需要服务器额外工作的字符串，建议使用 ' 而不是 "，并且不需要前导的 ""。

编辑：

```
echo ' <a href="my.php?action=show&amp;id='.$fid.'" onclick="return display("'.$fid.'");"> '.$fname.'</a>; 
```

这行得通吗？它是否显示链接？

# java - 比较十六进制值java

> ID：720932
> 
> 赞同：0
> 
> 时间：2009-04-06T10:46:31.963
> 
> 标签：java, serial-port, core, xmodem

**复制：** [比较十六进制和十进制值](https://stackoverflow.com/questions/713162/compare-hexadecimal-values-with-decimal-in-java)

我在java中实现x-modem协议，我正在读取串行端口并存储在大小为1024的字节数组中。然后我将数据转换为字符串我在一个数据包中得到133个字节，问题是我无法启用比较字符串和字节数组中的十六进制值。我必须在数据中找到 SOH `0x01,EOT=0x02`，但我无法理解如何去做。

这是代码的一部分：

```
char SOH=0X01;
public void readResponse() 
{
  byte[] buffer = new byte[1024];
  int len = -1;
  String data;
  try 
  {
    while ((len = this.getIn().read(buffer)) > -1) 
  {
  data = new String(buffer,0,len);
  time = System.currentTimeMillis();
  data = new String(buffer, 0, len);
  System.out.println("Data length is "+data.length());
  System.out.println(data);
  for(int i=0;i<carray.length;i++)
  {
    if(data.CharAt(i)==SOH)
    {
      System.out.println("SOH["+i+"]"+data.CharAt(i));
    }
  }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T10:55:48.087

处理二进制数据时不要使用`String`/ 。`char`使用`byte[]`/`byte`代替。在尝试修复任何其他错误之前修复它。

`char`是Java中的16位值，它与C `char`（定义为字节）不同。`char`在 Java 中最接近 C的是`byte`（虽然是有符号的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T11:05:42.307

您正在将字节与字符串进行比较 - 这是一件坏事，因为您不知道 Java 使用什么编码将给定的字节转换为文本表示。

使用 ByteBuffer 并在读取原始字节时进行比较。

# asp.net - Rad Grid 预渲染事件问题

> ID：720935
> 
> 赞同：3
> 
> 时间：2009-04-06T10:49:05.077
> 
> 标签：asp.net, telerik, radgrid

谁能告诉我这部分发生的事情？为什么它使物品不可见？

```
protected void rgStateTax_PreRender( object sender, EventArgs e )
    {
        if( rgStateTax.MasterTableView.IsItemInserted )
        {
            foreach( GridItem item in rgStateTax.Items )
            {
                item.Visible = false;
            }
        }

        if( rgStateTax.EditItems.Count > 0 )
        {
            foreach( GridDataItem item in rgStateTax.Items )
            {
                if( item != rgStateTax.EditItems[0] )
                {
                    item.Visible = false;
                }
            }
        }
    } 
```

这里 rgStateTax 是 rad grid 而 PreRender 是页面实际显示在屏幕上之前的事件，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-11-27T23:14:22.760

你可能想要

```
 if(!item.Edit){item.Visible = false;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-04-06T20:07:29.150

是的，在为页面呈现控件之前调用 PreRender。

这段代码只是简单地遍历网格中的几乎每个项目并使其不可见。

`if( rgStateTax.MasterTableView.IsItemInserted )`这将检查项目是否已插入到网格中。

`foreach( GridItem item in rgStateTax.Items )`这将遍历 radgrid 中的每个项目。

`item.Visible = false;`这会将每个项目设置为不可见。

至于下一部分：

`if( rgStateTax.EditItems.Count > 0 )` 这将检查是否有任何网格项目处于编辑模式。

`foreach( GridDataItem item in rgStateTax.Items )`这将遍历 radgrid 中的每个项目（无论每个项目是否处于编辑模式）。

`if( item != rgStateTax.EditItems[0] )`这将检查当前项目是否不是编辑模式下的第一个项目（因此我们为除一个项目之外的所有项目输入此项目。

`item.Visible = false;`这会将每个项目设置为不可见。

这就是正在发生的事情。

# cocoa - 如何检查 NSPoint 是否位于 NSRect 内

> ID：720936
> 
> 赞同：26
> 
> 时间：2009-04-06T10:49:29.757
> 
> 标签：cocoa, points, rectangles

我创建了一个包含 NSRect 值的可变数组。我想检查我创建的 NSPoint 是否在这个矩形内。在可可中做到这一点的最佳方法是什么。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2009-04-06T11:16:30.643

从[基础功能参考](https://developer.apple.com/documentation/foundation/nsrect)：

```
BOOL NSPointInRect (
   NSPoint aPoint,
   NSRect aRect
); 
```

“返回一个布尔值，指示给定点是否在给定矩形中。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T11:42:55.540

[一个有效的问题，因为不是每个人都意识到Foundation NSRect Extensions Reference](https://developer.apple.com/documentation/foundation/nsrect)文件中提供了许多帮助函数，这使您不必到处重新发明轮子。

快速阅读参考资料，了解它可以提供帮助的所有不同地方。我发现它在开始时非常有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T10:53:23.677

NSPointInRect？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T16:37:21.370

我开始了这个线程[你希望你在 2 年前知道哪些 Cocoa/Core Foundation 辅助函数？](https://stackoverflow.com/questions/508894/what-cocoa-core-foundation-helper-functions-do-you-wish-you-knew-about-2-years-ag)你可能会发现一些你不知道的东西。

# winapi - 启动win32开发

> ID：720938
> 
> 赞同：0
> 
> 时间：2009-04-06T10:49:43.733
> 
> 标签：winapi

我主要是一名 Java 开发人员，在 *nixes 的 C/C++ 方面具有良好的背景。现在我需要为 Win32 编写一个可以被认为是系统工具的小实用程序：它应该能够访问 Windows 进程、句柄等。此外，它需要一个简单的 GUI（但不是命令行）。

我开始的最佳方式是什么？任何经过验证的良好在线教程、参考资料等？IDE？（VS快递？）

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T10:56:57.617

当然，对你来说最简单的方法是使用 C#，因为你来自 Java 世界。请记住，如果您使用 C#，该程序将需要在客户端计算机上安装**.NET**框架才能运行它。

如果您需要纯**WIN32**程序，那么您将不得不使用 C/C++ 和**WIN32 API**。这肯定会比第一个选项更难，但程序分发可能更简单。

无论您选择第一个还是第二个，我都会推荐[Charles Petzold 的](http://www.charlespetzold.com/books.html)任何一本关于该主题的书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T10:57:03.717

从 Herbert Schildt 的 Windows Programming from the Ground up 或 Charles Petzold 的 Windows Programming 开始，当然还有很多 MSDN

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T11:19:39.217

确切地说是 Win32 编程（我的意思是开发利用 Win32API 函数的软件），你需要两种类型的知识：第一，用于构建 GUI 的 API 函数（表单、按钮、组合框等），第二，API提供与 Win32 Shell 集成的函数（例如用于在上下文菜单中创建自己的项目的 COM 对象）并用于访问 Windows 资源。我认为，如果不需要了解第一种 API 调用。只要了解他们现有的和整体的工作机制就足够了。您可以使用任何现有的 UI 框架来创建自己的应用程序的 GUI（Qt、GTK+、WindowsForms、MFC - 欢迎任何东西（但最后一个真的很糟糕）。因此，您需要关注第二种类型的 API 调用允许您的程序与操作系统本身进行更深入的交互。

# c# - 从失败的方法返回什么以及何时抛出？

> ID：720940
> 
> 赞同：8
> 
> 时间：2009-04-06T10:49:56.290
> 
> 标签：c#, .net

我最近一直在思考我从方法返回的东西，我注意到当方法失败时我返回了 4 种不同的东西。

让我烦恼的是，我的代码在这方面不是很一致，所以我想问一下你的“最佳实践”。

因此，让我们想象一个采用 Foo 并返回 Bar 列表的方法：

```
public IList<Bar> Method(Foo something); 
```

或者让它更笼统：

```
public IBar Method(IFoo something); 
```

问题是你对什么样的失败有什么回报。选项是：

1.  空返回类型，如：新列表；或：新的 EmptyBar()；
2.  空值
3.  抛出异常
4.  指示失败的特殊列表值，例如：new List{new FailureBar()}

我真的很讨厌选项 4，所以我很想知道您何时使用其他 3 个选项以及为什么

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-06T10:53:36.157

我会根据失败的性质在空列表和异常之间进行选择。

例如

如果您的数据库无法连接 - 异常。

如果您的查询没有返回结果 - 空列表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-06T10:58:20.187

这取决于你所说的“失败”是什么意思。

如果从某种意义上说是发生意外事件的失败，那么我会抛出异常。可能是参数不正确时的参数异常，无法从文件中读取时的 IOException 等等。

如果“失败”是找不到给定参数值的项目，那么我将返回一个空列表。如果您返回一个不是集合的对象，我将返回 null。

我从不返回特殊的结果代码，例如错误时的 -1。我真的不喜欢它。人们往往会忘记代码，它们会随着时间的推移而改变，你最终会得到很难维护的 if 语句来检查这些结果代码等等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T11:42:16.087

如果有预期的例外情况，我会抛出一个例外。

如果我正在寻找`Bar`但没有找到，我会返回 null。

如果我正在寻找`List<Bar>`但没有找到，我会返回一个空的`List<Bar>`.

如果查找 null 将非常普遍，并且使用它是有意义的，我将实现[Null Object 模式](http://en.wikipedia.org/wiki/Null_Object_pattern)，并返回 EmptyBar。

所以......我认为可以公平地说我现在同意你目前的方法。我只是确保我在任何项目中都是一致的，而不是将不同的方法与不同的案例混合和匹配。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T11:43:13.183

如果没有找到元素，则返回一个空列表。[这是空对象](http://www.cs.oberlin.edu/~jwalker/nullObjPattern/)模式的一个特例。它有助于一致地处理所有情况，这意味着客户端不必检查值是否为空。或者更糟糕的是，如果他们不检查，则会抛出空指针异常并进行愉快的调试以找出原因。仅当您有充分的理由时才返回 null。

**更新**：Martin Fowler 描述了返回 null 的更好选择：[http ://martinfowler.com/eaaCatalog/specialCase.html](http://martinfowler.com/eaaCatalog/specialCase.html)

但是，如果您的方法没有按预期运行，则抛出异常，数据库异常，流异常等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T12:35:21.827

我会将其简化为异常或空返回列表以使其尽可能简单

1.  空返回类型，如：新列表；或：新的 EmptyBar()；

当填充列表的操作正确完成且没有明显错误但没有返回结果时，您应该返回它 - 因为这就是 IMO 的含义。这也意味着依赖于（例如）循环通过列表的返回的代码将不需要特殊处理。

3.  抛出异常

当函数出现问题时应引发 IMO 异常 - 例如无法打开文件、无法建立连接等。计算返回垃圾 - 这与“没有返回结果”不同

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T10:55:40.943

如果您的业务逻辑可能会根据 Method 返回的内容而有所不同，因此您的 Method 可以返回空列表，然后选择 1)。

如果您的业务逻辑不打算有一个空列表，则抛出异常。如果是因为错误传递了“Foo something”，则使用 Assert 或逻辑异常。如果是因为外部数据问题，例如数据库连接或文件系统错误，那么 ggo 会出现运行时异常。

永远不要选择 4) 以后很难理解这种行为。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-06T10:57:35.993

情况1：

如果 Method 遇到了一个问题，它不应该抛出一个异常。调用代码应该处理**异常**

案例二：

所有其他情况方法应返回带有值的 null/empty/list。调用函数应该处理**null**和**empty**。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-06T11:00:47.857

不确定这些是否可以普遍适用，但我对以下规则相当满意：

1.  如果方法的名称是 DoFoo，如果由于某种原因无法执行 Foo，它应该抛出：网络资源不可用，此特定接口实现不支持执行 Foo，对象处于不一致状态等。
2.  如果方法的名称是 GetBar，还有一个选择：返回 null。但最好通过将其命名为 TryGetBar、GetBarOrNull 等来反映这一点。当然，null 返回值应该表示一些特殊的东西，并响应每个异常情况。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-06T11:02:34.060

只有当某些事情干扰了我正在尝试做的事情时，我才会抛出异常，例如错误的输入参数、数据库错误等。

在大多数其他情况下，我通常会返回一个空值，因为检查空值是自然而然的，但如果它应该保存的数据只是空的，我会返回一个空列表。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-06T12:27:24.560

这里有两个问题需要回答：

*   函数的失败在概念上与结果为空的常规执行不同吗？呼叫者是否真的需要知道这些案例中的哪一个发生了？如果是这样，返回一个空列表不是一种选择。我想理论上你可以返回一个“特殊的”空列表，但这是混淆。
*   如果功能失败，通常谁需要做出反应？如果不是立即调用代码而是更高级别的代码，则异常是最干净的解决方案。

# oop - 设计过程慢吗？

> ID：720945
> 
> 赞同：2
> 
> 时间：2009-04-06T10:53:31.370
> 
> 标签：oop

我正在做一个项目，其中一堆软件（C++/OO）被移植到一个新的硬件环境中。一定比例的软件模块应该在新的硬件平台上主观上相似。

对其中一些模块的代码审查表明，完成的移植工作是用最少的努力或洞察力完成的——从事这项工作的开发人员缺乏经验，移植时经常发生这种情况。然而，它也表明该软件的设计缺乏——要么过于复杂，要么错误地处理错误情况，要么只是有一堆“代码味道”。

我已经要求我们先审查设计，而不是在“完成”移植后审查代码。但是，有人告诉我，这可能不是很好地利用时间，可能是因为现有的文档设计不是最新的。

我在吠叫错误的树吗？设计过程天生就很慢吗？有没有办法避免在整个设计过程中陷入困境。还是动手编写代码始终是解决问题的最佳方法——即使是没有经验的编码人员？

**更新。感谢您到目前为止的答案。是的，s/w 将用于许多（希望）未来的产品/修订中。另外我没有提到代码也将是多线程的（以前是单线程环境）。仅此一项就足以表明“审查设计”我想主动（讨厌）看看是否可以将设计审查过程用于移植。我不相信只是希望在它停止工作时修复一些东西 - 如果在测试中发现某些东西从根本上被破坏，我宁愿不重新设计缺陷修复时间。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T14:12:35.960

将其移植，确保测试覆盖率良好，并在新平台上拥有一个完全工作且经过良好测试的应用程序后考虑重构/重新设计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T11:23:28.333

我相信，如果您将应用程序 A 从硬件 X 移植到硬件 Y，那么将 A 从 X 移植到 Y。谁将从重新设计中受益？我的意思是，如果 A 的功能没有改变，那么相关业务将从您的重新设计中获得什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T17:49:10.433

听起来重新设计将是一个好主意，如果只是将硬件相关部分与其他部分分开的话。至少那时你的下一个移植可以只关注那些真正需要改变的部分

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T13:42:16.970

重新设计必须有商业利益，我所说的商业利益是指“这种重新设计将在未来的版本中显着缩短我们的上市时间”。将来您是否打算将此代码移植到其他地方？您会在未来发布具有重要新功能的版本吗？如果是这样，那么听起来肯定有理由至少调查重新设计。

或者，该项目是否主要处于维护模式，没有安排新的开发？以我的经验，在这种状态下重新架构/重新设计代码通常只是开发人员的练习，并没有给组织带来切实的商业利益。

# wpf - 日期格式为 06-Apr-2009 04:25 PM

> ID：720956
> 
> 赞同：1
> 
> 时间：2009-04-06T10:56:20.707
> 
> 标签：wpf

如何格式化字符串以显示日期和时间，如下所示？

> 2009 年 4 月 6 日下午 4:25

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-06T11:50:52.150

WPF 现在具有类的`StringFormat`属性`Binding`，您可以按如下方式使用它：

```
<TextBlock Text="{Binding StringFormat={}{0:dd-MMM-yyyy HH:mm tt}}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T11:05:01.310

您可以使用自定义日期格式字符串来准确获取该格式：

```
theDate.ToString("dd'-'MMM'-'yyyy HH':'mm tt") 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-06T11:04:06.740

[您可以在http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)查看可用的 DateTime 格式。

您还可以提供自定义格式。如果您想在处理 DateTime 时在 WPF 中显示它，您可以实现自定义[IValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)并在绑定中使用转换器来根据需要显示日期时间。

# java - 写入 Eclipse 控制台

> ID：720963
> 
> 赞同：5
> 
> 时间：2009-04-06T10:57:28.520
> 
> 标签：java, eclipse, eclipse-plugin, console

我的插件必须写入 Eclipse 控制台——为了测试目的，我简化了我的代码，所以我只有以下内容：

```
public void start(BundleContext context) throws Exception {
        super.start(context);
        plugin = this;
        System.out.println("Tecomp Plugin is running");

        MessageConsole myConsole = new MessageConsole("My Console", null);
        //myConsole.activate();
        ConsolePlugin.getDefault().getConsoleManager().addConsoles(new IConsole[]{ myConsole });
        ConsolePlugin.getDefault().getConsoleManager().showConsoleView(myConsole);
        final MessageConsoleStream stream = myConsole.newMessageStream();
        stream.setActivateOnWrite(true);
        stream.println("Hi there!");
        stream.close();
    } 
```

这是一个简单的插件，方法 start 属于扩展 AbstractUIPlugin 的类——它不是 rcp 应用程序。代码在运行时工作台中运行良好——一旦安装了插件，输出就会在某处丢失。插件的其余部分工作正常。

ConsolePlugin 可能有问题吗？还是在运行时工作台和开发工作台中对流的处理方式不同？

我尝试了两者 - 一个功能项目并直接将插件 jar 复制到 eclipse 目录 - 用于安装插件 - 两者的结果相同......

欢迎任何帮助，因为我现在正在努力解决这个问题......

问候， 凯蒂

### 编辑：

这似乎不是控制台的问题...我提供了自己的视图来打印输出，但是虽然在 plugin.xml 中声明了，但安装插件后没有视图...这是我所做的： - 使用 ExportWizard 将插件导出到 jar-archive - 将此存档复制到 /usr/share/eclipse/plugins -restarted eclipse

或使用功能项目： - 使用 ExportWizard 导出包含我的插件的功能项目 - 从 Eclipse 目录中删除上述 jar 存档 - 安装功能 - 重新启动 Eclipse

两人都没有说话 - 我安装插件有什么问题吗？jar-archive 没问题，我检查了它 - 它是最新版本。但不知何故，eclipse似乎仍在使用一些较旧的插件而没有我所做的更改

问候， 凯蒂

### 编辑：

我实现了 IStartup Interface end 扩展了 org.eclipse.ui.startup 点，但没有任何改变......我真的认为这是一个安装问题。我注释掉了一些输出，但它仍然打印到调试控制台。eclipse中是否有某种插件缓存？这样新代码就不会被读取？

### 编辑：

感谢您的建议，但使用 -clean 选项启动 eclipse 并没有帮助 - 下周我将尝试在其他环境中安装插件 - 也许我的有问题......

### 编辑：

调用编译器的类中的代码如下所示：

```
private MessageConsole findConsole(String name){
  ConsolePlugin plugin = ConsolePlugin.getDefault();
  IConsoleManager conMan = plugin.getConsoleManager();
  IConsole[] existing = conMan.getConsoles();
  for (int i = 0; i<existing.length; i++){
    if (name.equals(existing[i].getName())){
      return (MessageConsole)existing[i];
    }
  }
  //no console found -> create new one
  MessageConsole newConsole = new MessageConsole(name, null);
  conMan.addConsoles(new IConsole[]{newConsole});
  return newConsole;
}

public void run() {
  MessageConsole console = findConsole("tecompConsole");
  //display the tecomp Console
  IWorkbenchPage page = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage();
  String id = IConsoleConstants.ID_CONSOLE_VIEW;
  try {
    IConsoleView view = (IConsoleView) page.showView(id);
    view.display(console);
  } catch (PartInitException e) {
    e.printStackTrace();
  }
  MessageConsoleStream output = console.newMessageStream();
  String tecompPath = TecompPlugin.getDefault().getPreferenceStore().getString(IEiffelConstants.TECOMP_PATH);
  if (checkTecompPath(tecompPath)){
    String line;
    String[] cmd = {tecompPath, pathToAceFile};
    try{
      output.println("calling tecomp");
      Process tecomp = Runtime.getRuntime().exec(cmd);
      //capture stdout und stderr from tecomp
      BufferedReader input = new BufferedReader(
          new InputStreamReader(tecomp.getInputStream()));
      BufferedReader err = new BufferedReader(
          new InputStreamReader(tecomp.getErrorStream()));
      while ((line = input.readLine()) != null ){
        output.println(line);
      }  
      input.close();
      while ((line = err.readLine()) != null){
        output.println(line);
      }
      err.close();
      output.close();
      tecomp.waitFor();
      //System.out.println(tecomp.exitValue());
    }catch (Exception err){
      err.printStackTrace();
    }
  } else {
    try{
    output.println("please specify a tecomp path");
    output.close();
    }catch (Exception err){}
  }
} 
```

但是第一个测试示例应该可以工作，不是吗？我创建了一个新的 MessageConsoleStream 并手动写入。这和我找到的例子一模一样。

### 编辑：

该代码不属于 rcp 应用程序 - 它只是一个插件，扩展了 eclipse ide 并支持 eiffel 编程语言。因此，我认为您的建议不适用于我的插件-VonC，至少我不知道将您的代码放在哪里...我在初始问题中的第一个示例代码在开始内扩展 AbstractUIPlugin 的插件类中被调用（ BundleContext 上下文）方法。我的插件正在运行，所以在某个地方调用了这个方法。正如我所提到的 - 插件在运行时工作台内工作正常......

如果这不是对我的问题进行额外解释的正确位置，我很抱歉 - 但它似乎是系统允许我发布更多内容的唯一位置。我不允许对您的答案发表评论，因为我刚刚登录，因此我没有足够的声望点...所以，如果我使用的系统错误，请纠正我:) thx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-04T10:42:35.407

您是否检查了[“**在您的 RCP 应用程序中显示控制台**”](http://waynebeaton.wordpress.com/2006/10/19/displaying-the-console-in-your-rcp-application/)？

以下小代码（`Application.java run()`在创建和运行工作台之前完成）是否会开始至少表现得像您想要的那样？

```
MessageConsole console = new MessageConsole(”System Output”, null);
ConsolePlugin.getDefault().getConsoleManager().addConsoles(new IConsole[] { console });
ConsolePlugin.getDefault().getConsoleManager().showConsoleView(console);
MessageConsoleStream stream = console.newMessageStream();

System.setOut(new PrintStream(stream));
System.setErr(new PrintStream(stream));

logger = LoggerFactory.getLogger(Application.class); // Previously declared. 
```

（即，当您的插件安装在 eclipse 中时，控制台会显示自己吗？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T11:32:43.280

我认为问题在于您的插件没有启动。在其他插件尝试访问您插件中的某些内容之前，您显示的代码不会被激活。您的调试启动配置似乎是这种情况，但打包的应用程序并非如此。

您可以尝试实现 IStartup 接口，并在加载 UI 后使用插件中的 org.eclipse.ui.startup 扩展点强制初始化。这应该会激活您的插件并执行您拥有的控制台代码。

您是否可以在 start() 方法中添加一些日志记录语句或断点，以确保在部署的应用程序上调用它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T15:41:47.930

在我看来，您尝试将插件安装到其中的 Eclipse 应用程序可能没有安装您需要作为插件依赖项安装的 org.eclipse.ui.console 插件。您是否检查过您的插件是否具有正确的插件依赖项并且安装时没有问题？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-07T19:14:53.747

您可能必须清除 OSGI 和 eclipse 运行时使用的缓存数据。您可以通过将`-clean`参数添加到您的 eclipse 命令行来做到这一点。

以下是插件开发指南中的相关信息：

> 清理 OSGi 框架和 Eclipse 运行时使用的缓存数据。如果您在安装、更新或使用共享配置后发现启动错误，请尝试使用此选项运行一次 Eclipse。

有关更多信息，请参阅 Eclipse[运行时选项](http://help.eclipse.org/ganymede/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/runtime-options.html)。

您可能还想检查使用更新站点。我在测试时经常使用本地更新站点来安装插件，因为它似乎不太容易出错。Eclipse FAQ 有一篇关于如何[创建更新站点](http://wiki.eclipse.org/FAQ_How_do_I_create_an_update_site_%28site.xml%29%3F)的快速文章。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-08T07:16:56.567

另一种可能性是您安装的插件被缓存在安装中。您可以使用 -clean 选项启动 eclipse，以从工作区中删除所有缓存的插件

# django - Django：如何在 Django 0.96 中合并两个相关的查询集？

> ID：720966
> 
> 赞同：2
> 
> 时间：2009-04-06T10:58:30.407
> 
> 标签：django, django-models, django-queryset

我想将一个查询集相关对象与另一个查询集相关对象合并。一些示例代码来解释：

```
## Models
# sample models to illustrate problem
class PetShop(models.Model):
    id = models.AutoField(primary_key=True)
    shop_name = models.CharField(maxlength=255)
    cats = models.ManyToManyField(Cat)

class Cat(models.Model):
    id = models.AutoField(primary_key=True)
    cat_name = models.CharField(maxlength=50, blank=True)

## View
def MergePetsInShop(request):
    source_shop = PetShop.objects.get(pk=2)
    destination_shop = PetShop.objects.get(pk=3)

    #Somehow merge CATS from one shop to the other
    result = merge(source_shop.cats,destination_shop.cats)

    #save() 
```

我怎样才能正确地做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T12:24:17.797

您可以利用 Django 的多对多管理器函数`add`并`remove`接受任意数量的位置参数这一事实。在这种情况下，我会尝试：

```
destination_shop.cats.add(*source_shop.cats.all()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-13T20:35:57.733

我强烈推荐上面的 Jarrets 方法。如果有人想查看我几乎使用但没有使用的解决方案（如果您需要的话，这确实有效）：

```
@login_required
def MergePetsBetweenShops(request):
    src = int(request.__getitem__("source_shop"))
    dest = int(request.__getitem__("destination_shop"))
    srcShop = PetShop.objects.get(pk=src)
    destShop = PetShop.objects.get(pk=dest)     
    srcPets = srcShop.cats.all()
    amtMerged = srcPets.cats.count()
    for p in srcPets:
         destShop.cats.add(p) 
         destShop.save()
    return HttpResponse("Cats that were moved: "+str(amtMerged), mimetype='application/javascript') 
```

使用的方法名、vars 都是虚构的，以保护无辜。

# asp.net - 何时在 Global.asax 中使用 Application_Start 与 Init？

> ID：720969
> 
> 赞同：80
> 
> 时间：2009-04-06T10:59:04.820
> 
> 标签：asp.net, global-asax

我想知道在什么情况下我应该将应用程序初始化代码放在`Application_Start()`我`Init()`的`Global.asax`文件中？

两者之间的区别对我来说似乎不是很明显，除了`Application_start`先调用，然后调用`Init()`。

*   为什么我要使用其中一个？
*   它真的有区别吗？
*   两个事件之间的应用程序状态有何变化？

到目前为止，我能找到的唯一真正的指针是`IHttpModule`只有一个`Init()`方法，所以如果我正在做的事情可能在某些时候更适合实现，`IHttpModule`我应该使用 的`Init()`方法`Global.asax`，如果没有其他方法来保持一致性。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2009-04-06T11:28:47.727

从[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms178473%28v=vs.100%29)：

> Application_Start 和 Application_End 方法是不代表 HttpApplication 事件的特殊方法。ASP.NET**在应用程序域的生命周期内调用它们一次，而不是为每个 HttpApplication 实例调用一次**。

在里面：

> 在创建所有模块后**，为 HttpApplication 类的每个实例**调用一次。

更新：如果您需要确保某个代码在应用程序中只被调用一次。生命周期，Application_Start 是一个更好的解决方案。示例：配置 log4net？

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-06-02T07:13:35.187

是的

它们之间存在差异。Application_Start() 事件仅调用一次，而 Init() 方法在每次创建应用程序实例时调用。

# jquery - jQuery超链接-href值？

> ID：720970
> 
> 赞同：46
> 
> 时间：2009-04-06T10:59:43.273
> 
> 标签：jquery, hyperlink, href

在我的网站上，我使用 jQuery 来挂钩元素的事件，即超链接。由于这些超链接仅在当前页面上执行操作，并且不会引导到任何地方，因此我一直将“#”的 href 属性放在：

```
<a href="#">My Link</a> 
```

但是在某些浏览器中，这会导致页面从右滚动到顶部，这显然是不受欢迎的行为。我试过使用一个空白的href值，或者不包括一个，但是鼠标在悬停时不会变成手形光标。

我应该在里面放什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2009-04-06T11:18:13.197

```
$('a').click(function (event) 
{ 
     event.preventDefault(); 
     //here you can also do all sort of things 
}); 
```

然后你可以输入`href`任何你想要的东西，jQuery 会触发这个`preventDefault()`方法，你不会被重定向到那个地方。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2010-01-27T05:36:29.123

那些仅仅为了提供点击事件而存在，但实际上并不链接到其他内容的“锚点”应该是真正的*按钮*元素，因为它们才是真正的。

它可以这样设计：

```
<button style="border:none; background:transparent; cursor: pointer;">Click me</button> 
```

当然，点击事件可以附加到按钮上，而无需担心浏览器会跳到顶部，也无需添加无关的 JavaScript，例如 onclick="return false;" 或 event.preventDefault() 。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2009-04-06T11:13:08.840

你真的应该在那里放一个真正的链接。我不想听起来像个书呆子，但这是一个相当糟糕的习惯。JQuery 和 Ajax 应该始终是您实现的最后一件事。如果您的链接无处可去，则说明您做的不对。

我不是在破坏你的蛋蛋，我的意思是出于好意。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-04-06T12:28:13.637

为什么使用`<a href>`? 我这样解决它：

`<span class='a'>fake link</span>`

并使用以下样式对其进行样式设置：

`.a {text-decoration:underline; cursor:pointer;}`

您可以使用 jQuery 轻松访问它：

`$(".a").click();`

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-04-06T11:05:30.840

将 return false 添加到单击处理程序的末尾，这可以防止发生尝试重定向页面的浏览器默认处理程序：

```
$('a').click(function() {
// do stuff
return false;
}); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-07-20T17:23:45.567

使用 jquery，您可能只想获取带有 '#' 的那些

```
$('a[href=#]').click(function(){return false;}); 
```

如果你使用最新的jquery（1.3.x），页面变化时无需再次绑定：

```
$('a[href=#]').live('click', function(){return false;}); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2010-01-19T07:05:36.610

你应该使用`<a href="javascript:void(0)" ></a>` 而不是`<a href="#" ></a>`

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2011-12-07T01:56:40.303

想知道为什么之前没有人在这里说过：为了防止`<a href="#">`将文档位置滚动到顶部，只需使用即可`<a href="#/">`。那只是 HTML，不需要 JQuery。使用`event.preventDefault();`实在是太多了！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-04-09T11:20:48.607

我知道这很旧，但是哇，有一个简单的解决方案。

完全删除“href”，只需添加一个执行以下操作的类：

```
.no-href { cursor:pointer: } 
```

就是这样！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-07-08T04:30:13.310

我**几乎遇到了这个问题**，而且非常具有***欺骗性***。我正在提供一个答案，以防有人在我同样的位置结束。

1.  我*以为*我有这个问题
2.  但是，我使用的是 return false 和 javascript:void(0);
3.  然后问题的明显差异不断浮出水面：
4.  我意识到它并没有一直到顶部——而且我的问题区域靠近页面底部，所以这个跳转很奇怪而且很烦人。
5.  我意识到我正在使用fadeIn() [jQuery library]，在短时间内我的内容是 display:none
6.  然后我的内容扩大了页面的范围！导致看起来像跳跃！
7.  现在使用可见性隐藏切换..

希望这可以帮助陷入跳跃的人！

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2010-10-19T07:34:14.370

相反，您可以简单地使用如下所示的 href：

```
<a href="javascript:;">My Link</a> 
```

它不会滚动到顶部。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2010-10-31T00:42:10.937

```
<a href="#nogo">My Link</a> 
```

# c# - C# 下一个/上一个按钮逻辑

> ID：720979
> 
> 赞同：1
> 
> 时间：2009-04-06T11:02:58.583
> 
> 标签：c#, datatable, dataset

我有一个 Windows 窗体应用程序。我根据 DataTable 中的行位置获取数据。我有一个 TotalCount 变量和一个 CurrentPos 变量。下一个按钮应该得到下一行，而上一个按钮应该得到上一个。当有可用数据时，应启用/禁用这些按钮。

我的大脑很多你能提供逻辑吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T11:14:04.783

难道不是一个简单的

```
m_NextButton.Enabled =  CurrentPos < (TotalCount - 1) ;
m_PreviousButton.Enabled = CurrentPos > 0; 
```

你需要调用这个当你

1.  添加到您的数据表
2.  更改您的选择
3.  从数据表中删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T11:27:12.490

您可能还想查看将为您执行此操作的[BindingNavigator类](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingnavigator.aspx)

# asp.net - 如何使用 ADO.NET 数据服务实现“获取最新更改的项目”？

> ID：720985
> 
> 赞同：0
> 
> 时间：2009-04-06T11:05:25.787
> 
> 标签：asp.net, wcf-data-services, change-management, change-tracking

假设我有一个实体列表（例如，TODO 项目列表），多个用户可以同时更改、删除和添加这些实体列表。

因此，为了维护所有客户端之间的同步列表，我希望每个客户端（基于 AJAX）每 xx 秒请求一次更改。由于列表可能会变得很长，我不想每次都做一个完整的请求，而只要求更改的项目（项目可以更新、删除或新建）。

是否可以使用 ADO.NET 数据服务？如果是这样，如果我在服务器上使用实体框架，我该如何实现它？

我已经考虑使用 ASP.NETs 缓存在将更改操作提交到数据服务时存储更改项，并且有一个自定义 Web 方法可以返回自特定客户端上次请求以来的最新更改（可以通过客户端跟踪请求ASP.NETs 会话对象）。但是，我不知道如何在结果集中指示单个项目的更改状态（例如，删除或更新或插入）。

一个很好的解决方案还可以让客户端在与服务器的同一次往返中请求对许多实体进行更改。

任何输入都会很受欢迎。

最好的问候，埃吉尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T12:03:25.337

我想到的方法是使用表的世代号。为 TODO 表提供一个名为 generation 的列，并（在心理上）将其与全局和持久的世代编号变量相关联。（最好将其放在数据库中的表中）。

每次进行更新或插入时，代号都会递增并放入更新或插入记录的代号列。

当第一次从数据库中读取记录并将其放到网页上时，当前代号也会被检索并在本地缓存（即放入 JavaScript 变量中）。随后的 AJAX 驱动读取使用 where 子句，该子句仅过滤世代号大于本地缓存世代号的记录。这确保只检索新的更新和删除。然后更新本地缓存的世代号。

删除有点棘手。一种方法是在一段有限的时间内删除已删除的记录，比如 21 分钟。您有一个名为 tombstone 的位列和一个日期时间列。当一条记录被删除时，该列的世代号设置方式与插入或删除相同，设置墓碑位，并使用 GetDate() 将日期时间设置为当前时间。然后，客户端的 AJAX 请求可以选择设置了 tombstone 标志的记录并将它们从客户端列表中删除。如果客户端被编码为每 20 分钟刷新一次完整页面，或者执行获取每条记录的 ajax 调用，则数据库作业可以每分钟运行一次并清理（即删除）超过 20 年的墓碑记录分钟。

EDIT: You actually don't need to separately persist the generation number, you can the sql function MAX over the generation column.

# c++ - 在类中定义常量（用于常量表达式）的最佳方法？

> ID：720989
> 
> 赞同：6
> 
> 时间：2009-04-06T11:07:54.547
> 
> 标签：c++, constants

我正在尝试为给定用例为我的类定义一个常量 BUFFER_LENGTH。

```
//1\. Using preprocessor declaration
//#define BUFFER_LENGTH  12

//2.Global constant
//const int BUFFER_LENGTH  = 12;
class MyRequest
{
public:
    //3\. Define an in-class constant
    //static const int BUFFER_LENGTH = 12;

    //4\. Declare an enum constant
    enum 
    {
        BUFFER_LENGTH = 12
    };

    MyRequest()
    {
        strcpy(mBuffer, "TestString");
        printf("Buffer: %s, BUFFER_LENGTH = %d",mBuffer, BUFFER_LENGTH);
    }
private:
    char mBuffer[BUFFER_LENGTH];
}; 
```

我只是列出了可以为类定义常量的不同方式。

```
1\. Using Preprocessor constant
2\. Using Global constant
3\. Using in-class constant
4\. using an enum. 
```

其中，哪一种是为给定用例定义常量的最佳方法？我更喜欢使用枚举常量而不是其他方法。还有没有其他更好的方法我错过了。

谢谢，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-06T11:16:59.673

枚举类型并不意味着定义一个数字常量，尽管它在模板元编程中被（ab）用于很多。

如果常量的含义与类纠缠在一起，我会在其中定义它。那么你仍然有两个选择：

```
 class WithConst {
 public:

     // 1\. as a const static member variable
     static const int sc_nNumber = 100; // I can initialize here for
                                        // integral-types only

     // 2\. as a static member function - possibly inlined.
     static int sf_nNumber() { return 100; }
 }; 
```

第二种选择的好处是，当您以后想从注册表或配置文件中读取常量时，您不需要更改任何客户端代码。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-06T11:18:33.260

出于维护目的，尽可能地限制任何名称（无论是函数、变量还是常量）的范围总是更好的。所以我建议要么

```
static const int BUFFER_LENGTH = 12; 
```

或者

```
enum { BUFFER_LENGTH = 12 }; 
```

*在*类定义中。

前者没有太多好处，只是您可以显式控制类型。 `enum`导致 C++ 为您选择一个未指定的整数“基础类型”——它可能像`char`您的枚举仅包含小值一样小，尽管根据经验，大多数编译器默认使用`int`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-06T11:21:03.753

static const 成员变量是最好的——它简洁，完全解决了问题，并保证不会与其他类似的类发生冲突（这很可能与预处理器定义或全局常量）。我建议您在 CamelCase 中声明它，而不是在所有大写字母中使用 undescores 来声明它，以便它看起来不是特别的东西，而是作为一个正常的类成员，它确实是。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-06T14:50:22.750

我在“Thinking in C++”中读到过去使用过“enum-hack”，因为一些编译器不支持“static const”类成员：
[http ://www.linuxtopia.org/online_books/programming_books/thinking_in_c++ /Chapter08_023.html](http://www.linuxtopia.org/online_books/programming_books/thinking_in_c++/Chapter08_023.html)

因此，如果您使用的是古董编译器，或者想要支持它们，请使用 enum-hack。（我不知道他们有多老才能不支持静态常量）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T15:52:02.133

Using const int can be less efficient than using enum, below is a program that demonstrates this. Compiled with Metrowerks CodeWarrior 8.x for Windows, it shows that an object of a class that defines a constant as const int takes 4 bytes of memory more than a similar class that defines this constant as enum:

```
#include <stdio.h>
#include <stdlib.h>

class foo {
    enum { MY_CONST = 1 };
    int x;
    public:
    foo();
};
class bar {
    const int MY_CONST;
    int x;
    public:
    bar();
};

int main() {
    printf( "%u %u\n", sizeof( foo), sizeof( bar));
    return EXIT_SUCCESS;
} 
```

It produces: "4 8"

Constructors were added to prevent aggressive optimization by the compiler. Because the program does not create objects of these types, constructors don't have to be actually defined in a separate compilation module. The same is true for the const int

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-06T15:25:50.747

我不确定在这种特定情况下它们是否完全可以互换。由于您将数组成员的大小基于常量，我相信它必须是一个枚举值。我没有时间在标准中查找它，但是如果您可以将`int`成员用作数组大小，即使它是`static const`因为实际值在标题中可能不可见，我也会感到惊讶。

```
// === in myclass.h
class MyClass {
public:
    static const int MY_SIZE;
private:
    int ary[MY_SIZE];
};

// === in myclass.cpp
/*static*/ const int MyClass::MY_SIZE = 10;

// === in otherclass.cpp
void OtherClass::operation(MyClass& obj) {
    std::cout << "Sizeof(MyClass) = " << sizeof(obj) << std::endl;
} 
```

我不认为编译器可以在没有编译的`otherclass.cpp`情况下编译`myclass.cpp`。

在大多数其他情况下，我会说*Go 带有类静态常量*选项，因为它会更智能地参与类型推导等。我只在真正需要或当它们是真正的枚举常量时（当然）才使用枚举整数常量。

### 编辑

我只是在吃午饭的时候看了一下标准（感谢大卫的轻推）

> 整数*常量表达式*只能包含文字 (2.13)、枚举器、 `const`变量或整数或枚举类型的静态数据成员，这些成员使用常量表达式 (8.5) 初始化，整数或枚举类型的非类型模板参数和`sizeof`表达式。

如果您在声明中提供了常量初始化器（或者是那个定义？），看起来常量和枚举都可以工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-01T03:58:06.670

在阅读以前的帖子时，我注意到没有人提到“命名空间中的枚举”技巧。如果您喜欢枚举，因为您正在使用较旧的编译器（我在 VxWorks/Tornado 嵌入式编程平台上有过这样的经验），那么请听好：您可以通过将枚举放在命名空间中来避免命名冲突，或者（如果命名空间不是都支持）在一个类中。

# asp.net - 标准化的电子邮件正则表达式

> ID：720990
> 
> 赞同：1
> 
> 时间：2009-04-06T11:08:07.217
> 
> 标签：asp.net, regex, email

> 为什么没有标准化的电子邮件正则表达式？我最近参与了一个项目，我们遇到了一个问题，其中电子邮件通过了我们的电子邮件正则表达式，但在创建 MailMessage 对象时失败了。一个小错误，但它有相当大的后果
> 
> *   检查电子邮件地址是否正确时，MailMessage 构造函数是否使用电子邮件正则表达式？
> *   为什么有这么多不同版本的电子邮件正则表达式？
> 
> 这是一个 ASP.Net 应用程序，我们使用了 System.Net.MailMessage 对象

**这是[Regexp识别电子邮件地址的副本吗？](https://stackoverflow.com/questions/156430/regexp-recognition-of-email-address-hard)**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-06T11:14:57.463

因为即使[这个正则表达式也不匹配每个有效的电子邮件地址](http://ex-parrot.com/~pdw/Mail-RFC822-Address.html)：

```
(?:(?:\r\n)?[ \t])*(?:(?:(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t]
)+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:
\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(
?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ 
\t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\0
31]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\
](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+
(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:
(?:\r\n)?[ \t])*))*|(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z
|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)
?[ \t])*)*\<(?:(?:\r\n)?[ \t])*(?:@(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\
r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[
 \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)
?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t]
)*))*(?:,@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[
 \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*
)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t]
)+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*)
*:(?:(?:\r\n)?[ \t])*)?(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+
|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r
\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:
\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t
]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031
]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](
?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?
:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?
:\r\n)?[ \t])*))*\>(?:(?:\r\n)?[ \t])*)|(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?
:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?
[ \t]))*"(?:(?:\r\n)?[ \t])*)*:(?:(?:\r\n)?[ \t])*(?:(?:(?:[^()<>@,;:\\".\[\] 
\000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|
\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>
@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"
(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t]
)*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?
:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[
\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*|(?:[^()<>@,;:\\".\[\] \000-
\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(
?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)*\<(?:(?:\r\n)?[ \t])*(?:@(?:[^()<>@,;
:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([
^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\"
.\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\
]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*(?:,@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\
[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\
r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] 
\000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]
|\\.)*\](?:(?:\r\n)?[ \t])*))*)*:(?:(?:\r\n)?[ \t])*)?(?:[^()<>@,;:\\".\[\] \0
00-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\
.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,
;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?
:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*
(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".
\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[
^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]
]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*\>(?:(?:\r\n)?[ \t])*)(?:,\s*(
?:(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(
?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[
\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t
])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t
])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?
:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|
\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*|(?:
[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\
]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)*\<(?:(?:\r\n)
?[ \t])*(?:@(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["
()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)
?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>
@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*(?:,@(?:(?:\r\n)?[
 \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,
;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t]
)*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*)*:(?:(?:\r\n)?[ \t])*)?
(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".
\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:
\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\[
"()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])
*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])
+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\
.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z
|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*\>(?:(
?:\r\n)?[ \t])*))*)?;\s*) 
```

有些事情最好留给其他语言。

# .net - System.Web.Abstractions：它有什么用？

> ID：720991
> 
> 赞同：26
> 
> 时间：2009-04-06T11:08:22.410
> 
> 标签：.net, asp.net, asp.net-mvc, abstraction

*... 绝对没有？*

**它分别为ASP.NET WebForms**和**ASP.NET MVC**解决了哪些难题？

你能以某种方式创建一个使用 System.Web.Abstractions 的 ASP.NET * 基础应用程序，以便它可以在两种 ASP.NET-web 应用程序中使用吗？

在那种情况下，他们如何将 System.Web.Abstractions 中的类重新安装到 ASP.NET WebForms 中？

您不能从命名空间中新建对象，所以它不能用于模拟，不是吗？

**更新**：抱歉不清楚我知道测试 HttpContext 和其他构建它的 ASP.NET 对象的问题。但无论如何，感谢您的良好解释。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-04-06T11:40:20.087

命名空间包含旨在包装 ASP.NET 核心类的类型（例如 HttpSessionState）。

什么，你想知道为什么吗？

许多这些核心 ASP.NET 类是密封的或静态的，因此无法打破它们与您的代码之间的依赖关系。这意味着您不能模拟这些核心依赖项，从而使测试 ASP.NET 代码变得更加困难。因此，不是直接在代码中直接操作 HttpResponse ，而是通过[HttpResponseWrapper](http://msdn.microsoft.com/en-us/library/system.web.httpresponsewrapper.httpresponsewrapper.aspx)操作它，在测试期间，您可以存根或模拟来控制 HttpResponse 对象的行为方式。

如果您曾经考虑过创建这些包装器，或者之前已经实现过其中的一两个，那么您就会知道在该命名空间中包含了很多工作，而且我很高兴他们做到了。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-04-06T11:39:49.073

确实是为了嘲讽。- HttpContext 是一个密封类，不能（容易）被模拟。HttpContextBase 不是密封的，我相信它的方法是虚拟的，使模拟更容易。

虽然您无法新建 HttpContextBase 的实例（例如，用于 WebForms），但您可以通过以下方式获取实例：

```
var ctx = new HttpContextWrapper(HttpContext.Current); 
```

# math - 如何学习数学符号？

> ID：720993
> 
> 赞同：38
> 
> 时间：2009-04-06T11:09:01.673
> 
> 标签：math, mathematical-notation

您是否有任何可以教我数学符号的书籍或网站推荐。作为一名开发人员，我从事的项目范围很广，从 .NET/SQL Server 到 Flash 游戏，我经常发现自己参考互联网上的文章寻求指导。许多文章都包含数学公式，除非它们附有“简单的英语”解释，否则我通常很难将公式转换为代码。

我拥有交互式多媒体学位，所以我没有接受过正规的高等数学教育，但是，我不觉得数学太费力而无法弄清楚。

希望通过学习这种表示法，我将能够通过真正深入了解它来进一步加深我的知识。

* * *

**注意**：*请不要建议我回到学校学习更高的数学课程，因为虽然我知道这是最好的选择，但它根本不是一个选择。除此之外，欢迎任何和所有建议。*

* * *

**更新**

以下是我最常编程的几种类型。我不确定这些涵盖了哪些数学领域。

*   2d 和 3d 碰撞检测
*   用于数据收集应用程序（注册表、调查等）的报告实用程序
*   2d 和 3d 矢量数学，主要基于游戏
*   颜色操作（以编程方式从一种颜色渐变到另一种颜色，添加和减少颜色，使颜色更亮/更暗）

希望这有助于添加一些上下文。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-06T11:25:01.167

你可以在这里找到一大堆免费的数学书：[http ://www.e-booksdirectory.com/mathematics.php](http://www.e-booksdirectory.com/mathematics.php)

如果您只是在寻找符号表及其含义，维基百科有一个很好的列表：[http ://en.wikipedia.org/wiki/Table_of_mathematical_symbols](http://en.wikipedia.org/wiki/Table_of_mathematical_symbols)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-06T13:26:31.937

听起来您的很多应用程序都在计算机图形中。

经典教科书之一是计算机图形学：[原理与实践](http://books.google.com/books?id=t2cOddQJQPYC&pg=RA1-PA203)。`Foley and Van Dam`您可能会考虑获得一份副本。解释矩阵可能不会放慢速度（请参阅我提供的关于坐标变换的页面的链接），但是那里有足够的上下文，如果您对一些线性代数概念进行一些基本搜索，或者从图书馆借一本线性代数书。

听起来你不会从线性代数课程的完整“消化”中受益匪浅（包括特征值、矩阵分解和其他内容）。当它出现时，我一次只接受一个概念。你可以从慢渗透中学到很多东西。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-04-06T11:25:12.837

[在线数学词典](http://www.mathpropress.com/glossary/glossary.html%27)

[数学世界.wolfram](http://mathworld.wolfram.com/)

**图书**

[哈珀柯林斯数学词典](https://rads.stackoverflow.com/amzn/click/com/0064610195)

[Simon Singh 在他的网站](https://simonsingh.net/books/)上有很多书籍。

您更新的问题促使我提及 Gilbert Strang 的免费在线[线性代数视频讲座](https://ocw.mit.edu/courses/mathematics/18-06-linear-algebra-spring-2010/)。这些相当缓慢但非常彻底。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-04-06T13:25:45.263

您需要了解的主要内容是集合论的符号。你真正需要的只是你能找到的最薄的书，它可以满足你所需的 90%。

我记得几年前读过 Halmos 的“Naive Set Theory”，之后几乎没有什么是我无法理解的。但是，如果那本书不是一个选择，那就去任何大学图书馆挑选一本介绍性的集合论书，这应该会给你你需要的东西。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-04-06T11:32:29.030

虽然这不是您正在寻找的内容，但[普林斯顿数学指南有一个关于](http://press.princeton.edu/titles/8350.html)[数学语言和语法的](http://press.princeton.edu/chapters/gowers/gowers_I_2.pdf)示例章节。它解释的不是太多公式，而是英语的正式使用。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-06T13:22:29.560

已经有了很好的答案。

您应该期望数学符号很难，因为它将很多含义包含在很少的符号中，因此您必须放慢速度并一次处理一个方程式，而不能略读。通常你必须阅读关于一般主题的书或文章。

我认识的数学教授说，当他们处理不熟悉的工作时，他们必须喝杯咖啡，放慢速度，解析每个语句和每个方程，直到他们理解为止。

我在日常工作中必须使用相当多的数学，但大部分都归结为高中代数和三角，加上基本的微积分，以及真正的基本微分方程和线性代数。大多数人只需要高中的东西。

祝你好运。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-06T11:26:34.270

一本解释符号的好书是*[Vector Calculus, Linear Algebra, and Differential Forms: A Unified Approach](http://matrixeditions.com/UnifiedApproach3rd.html)*。

# dynamics-crm - 如何在 Dynamics CRM 4.0 中有时间字段？

> ID：720994
> 
> 赞同：1
> 
> 时间：2009-04-06T11:09:29.100
> 
> 标签：dynamics-crm, dynamics-crm-4, crm

我对 CRM 一无所知，但被要求在表单中添加一些字段。其中之一是一段时间，但没有日期元素。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T17:03:02.433

CRM 不提供开箱即用的此功能。您需要对其进行自定义。我会添加一个新的 DateTime 属性和一个新的 Text 属性。在 DateTime 属性中捕获您需要的数据，以便您可以报告它。然后使用 Javascript，在文本字段中仅显示来自 DateTime 属性的时间部分。

-Mikeyb

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-16T05:59:14.227

我会添加一个日期和时间格式的日期时间字段。在表单加载时，您可以添加 javascript 以使用常量值填充日期部分，然后将其隐藏，以便仅显示时间部分。**************