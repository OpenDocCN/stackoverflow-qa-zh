# StackOverflow 问答 11828000-11828999

# c# - C#：使用 XML 文件根据用户选择填充表单字段

> ID：11828007
> 
> 赞同：0
> 
> 时间：2012-08-06T12:10:27.837
> 
> 标签：c#, xml, textbox, populate

在我的表单上，我设置了 2 个字段。项目的位置和子区域。我正在尝试根据用户选择的位置填充子区域字段。例如，他们选择“位置 4”。该位置仅有的 3 个子区域是 A、B 和 C。在位置框中选择后，子区域框将仅显示 A、B 和 C。我拥有所有位置并允许名为 appsettings.xml 的 xml 文件中的子区域。如何让程序读取 xml 文件并允许子区域字段仅填充有效数据？下面是我如何设置 xml 文件的示例。

```
<?xml version="1.0" encoding="utf-8" ?> 
 <MerchandiseTrack>

   <Merchandise_Zones Application_Data="Test-Run">

      <KeyBoard_App>
        <AppString>c windows osk.exe</AppString> 
      </KeyBoard_App>

 <Storage_Location>

     <head id="Location">                // Name of box on app
       <body id="04">                    // Name of Location within the box
         <Sub-Area>A, B, C,</Sub-Area>   // Allowed sub-areas
       </body>
     </head>

     <head id="Location">                // Name of box on app  
      <body id="05">                     //Name of Location within the box
         <Sub-Area>P, L, R, B</Sub-Area> // Allowed sub-areas 
      </body>
     </head>

     <head id="Location">                // Name of box on app
      <body id="14">                     //Name of Location within the box
       <Sub-Area>A, X, C </Sub-Area>     //Name of Location within the box
      </body>
    </head>

  </Storage_Location>
 </Merchandise_Zones>
</MerchandiseTrack> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:22:22.267

您在 上设置了一个事件`SelectedIndexChanged`。然后读取 locationID 并从文件中选择节点：

```
 XmlDocument doc = new XmlDocument();
        doc.Load(@"path/to/file.xml");
        XmlNode subarea = doc.SelectSingleNode("/MerchandiseTrack/Merchandise_Zones/Storage_Location/head/body[@id=" + locationComboBox.SelectedItem.ToString()+ "]/Sub-Area");
        string[] areas = subarea.InnerText.Split(',');
        foreach (string area in areas)
        {
           subAreaComboBox.Items.Add(area);
        } 
```

这包括您的列表中没有（！）尾随逗号（就像您目前的第一个位置一样。如果是这样，您必须扩展代码以将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:23:39.750

涉及相当多的步骤。我会`XDocument.Load`用来加载文档，然后你需要将它绑定到 UI。如果使用 WPF，ItemsControl 的一些派生项来输入值，但您提到 TextBoxes 的事实是需要谨慎的。在 ASP.NET 中更是如此，因为所有控件都需要重新创建，给定相同的 ID 并在加载 ViewState 时重新添加到页面中，以便您访问它们。

当您绑定/重新创建它们时，关键是确保所有 ID/Name 属性保持不变。

我个人的经验一直是 WPF 中的动态控件很麻烦，但在 ASP.NET 中很难正常工作。

# html - 摆脱我的页脚图像下方的微小空间线

> ID：11828009
> 
> 赞同：1
> 
> 时间：2012-08-06T12:10:32.187
> 
> 标签：html, css

![图片在这里](../Images/fb1ce5f6f80a75a3846be7002d2c8c61.png)

带有阴影的木板是我的页脚图像。它周围较浅的棕色阴影是我的背景图像。

在木板和底部的背景之间有一条很小的空间。我想删除它以使木板与页面末尾完全对齐。

当我尝试添加`border: 2px solid red`检查时，有少量填充导致空间很小。

有什么办法可以清除吗？谢谢。

CSS：

```
#footerBg {
position: relative;
bottom:-63px;
left:-50px;
} 
```

HTML：

```
<footer>
            <figure id="footerBg">
                <img src="images/BG_F_S3.png" alt="Footer Background" width="" height="" />

            </figure>   

        </footer> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T12:46:53.753

尝试`display: block;`在页面样式表中为您的`img`标签设置。我更喜欢这种方法，而且它似乎是最广泛使用的。

您还可以`line-height: 0;`在图像容器上使用，或`vertical-align: bottom;`在`img`标签上设置。我还看到有人建议您使用`vertical-align: sub;`，但这在 IE6 或 IE7 中不起作用。

解决方案看起来像这个小提琴；[http://jsfiddle.net/NdNGv/2/](http://jsfiddle.net/NdNGv/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-03T10:54:18.310

我在我的网站上遇到了同样的问题（小线）。问题出在内部 div 的**line-height**属性中，它**不**应该大于或等于父级的高度；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:13:09.290

可以是容器上的填充，还是内部元素上的边距？

任何浮动/靠近页脚？

可能需要发布 HTML 和 CSS 以获得更好的答案...

# java - 如何从资产中解析 XML？

> ID：11828015
> 
> 赞同：0
> 
> 时间：2012-08-06T12:10:52.463
> 
> 标签：java, android

假设我的资产中有一个包含此类数据的 XML 文件

```
<mods day="30" month="8" year="2012">
        <mod id="1" name="1a">Hello123</mod>
        <mod id="2" name="2a">Hello123</mod>
        <mod id="3" name="3a">Hello123</mod>
    </mods>

<mods day="31" month="8" year="2012">
        <mod id="1" name="1a">Hello123</mod>
        <mod id="2" name="2a">Hello123</mod>
        <mod id="3" name="3a">Hello123</mod>
    </mods> 
```

我需要通过输入日、月、年和id来找到某个“mod”参数。

这是我走了多远。

```
c.setTime(new Date());

String y = sdy.format(c.getTime());
String m = sdm.format(c.getTime());
String d = sdd.format(c.getTime());

InputStream istr = this.getAssets().open("mods.xml");
XmlPullParserFactory factory = XmlPullParserFactory.newInstance(); 
factory.setNamespaceAware(true); 
XmlPullParser xrp;
xrp = factory.newPullParser();
xrp.setInput(istr, "UTF-8");  

// not sure what to do next... 
```

如果我做对了，现在我需要用我需要的参数以某种方式查询这个 xrp，对吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T12:48:37.480

将 XML 作为 XML 资源放入`res/xml/`，而不是放入`assets/`，它的解析速度将提高 10 倍，这得益于针对 XML 资源的优化。因此，我建议在资产中使用 XML 资源而不是 XML。您可以看到这个 CommonsWare[示例项目](https://github.com/commonsguy/cw-android/tree/master/Resources/XML/)，他使用 XMLPullParser 来解析 xml 资源。

# java - 是否可以使用 Java 获取访问令牌。我有一个集成工具，它需要使用 Java 动态获取此访问令牌。

> ID：11828016
> 
> 赞同：0
> 
> 时间：2012-08-06T12:10:54.877
> 
> 标签：java, facebook

是否可以使用 Java 获取访问令牌。我有一个集成工具，它需要使用 Java 动态获取此访问令牌。请让我知道我应该从哪里开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:15:48.020

我不确定你在这里动态是什么意思？您可以使用 java 轻松获取 access_token，并且几乎没有选择编写完整代码或使用任何完善的 API 与 Facebook 交互并为您获取`verification_code`和`access_token`获取。我建议您不要自己编写完整代码并使用一些第三方 API

*   [抄写员-java](https://github.com/fernandezpablo85/scribe-java/)

使用 scribe-java，它的重量非常轻且易于使用。

# django - 使用查询字符串将 Django 模板渲染到 URL

> ID：11828017
> 
> 赞同：2
> 
> 时间：2012-08-06T12:10:56.930
> 
> 标签：django

我有几个选项卡的个人资料编辑页面。每个选项卡都是一个单独的页面，所以当我访问它时，我添加了“选项卡”参数：

```
/edit/?tab=general 
/edit/?tab=contacts 
```

当用户完成在这些选项卡之一（例如，`/edit/?tab=general`）上填写表单时，他会提交它。如果表单无效，我需要用错误呈现它。浏览器 URL 输入需要填写`/edit/?tab=general`，但是当我渲染页面时， URL 是`/edit/`.

我可以以某种方式改变它吗？谢谢。

代码：

```
def _profile_edit_general(request):
profile = request.user.get_profile()
if request.method == 'POST':
    form = forms.ProfileEditGeneralForm(request.POST, instance=profile)
    if form.is_valid():
        form.save()
else:
    form = forms.ProfileEditGeneralForm(instance=profile)
return render_template(request, 'profiles/edit/general.html', {
    'profile_edit_general_form': form
})

@login_required
def profile_edit(request):
if request.method == 'POST':
    if 'profile_edit_general_submit' in request.POST:
        return _profile_edit_general(request)
else:
    tab = request.GET.get('tab')
    if tab == 'general':
        return _profile_edit_general(request)
    else:
        return Http404 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T12:30:00.400

听起来问题在于您的表单操作不包含查询字符串。

通常使用 Django 表单和视图，您将发布到与您已经在相同的 URL 上，这意味着您可以执行以下操作：

```
<form method="post" action="?tab={{ current_tab }}">

...

</form> 
```

Where`current_tab`是一个上下文变量，指示选择了哪个选项卡。根据您目前的代码，您需要将其添加到您的 render_template 调用中的字典中。如果您使用 JavaScript 来切换选项卡，那么您也需要在选项卡切换时更新 action 属性。

# javascript - 用 JQuery replaceWith() 替换后不会触发事件？

> ID：11828018
> 
> 赞同：1
> 
> 时间：2012-08-06T12:10:57.123
> 
> 标签：javascript, jquery, replacewith

**场景**

我通过 JQuery ajax 调用获取页面，并显示为弹出窗口。我这样做的原因是该页面也可以在没有 javascript 的情况下访问。该页面本身包含一些下拉列表和按钮。在禁用 javascript 的版本中，通过将所选值传入和传出使用 php 的服务器来维护页面的状态。因此，我打算对 javascript 做同样的事情，在这种情况下，`html`需要用 ajax 响应替换以前的元素。我在网上进行了广泛的搜索，但无能为力。

**问题**

替换后，元素丢失事件数据，

> 如何保存或重新绑定与它们相关的事件？

我一直试图实现的代码是

```
 $('#search-main a').on('click', function(e){
        e.preventDefault();
        $('#search-advanced').remove();
        var target = $(this).attr('href');
        var res = $.get(target, function(data){
            $('body').append($(data).find('#search-advanced'));
            $('#search-advanced').addClass('row reveal-modal');
            $('#search-advanced')
            .css('top', 80)
            .css('border-radius' , '5px')
            .css('padding-left' , '0px')
            .css('padding-right' , '0px');

            $('#search-advanced input[name="select_filter"]').remove();
            $('#search-advanced .custom.dropdown').on('change', function(){
                $('#search-advanced form').trigger('submit');
            });                 

            $('#search-advanced form').on('submit', function(e){
                e.preventDefault();
                var params = $('#search-advanced form').serialize();
                $.get(target, params, function(data){
 // This is where I'm encountering the problem
 // The first time it works fine, 
 //     but for the second time the change event not get triggered
                    $('#search-advanced form').replaceWith($(data).find('#search-advanced form'));
                    $('#search-advanced input[name="select_filter"]').remove();
                    console.log($(data).find('#search-advanced .custom.dropdown'));
                });
            });

            $('#search-advanced').append('<a class="close-reveal-modal">&#215;</a>');
            $('#search-advanced').reveal({
                animation: 'fade', 
                closeOnBackgroundClick: false
            });
        });
    }); 
```

我不确定这种方法的优雅性，任何解决的建议或不同的方法都将非常感激。

我已经尝试过以下链接

*   [jQuery事件未触发](https://stackoverflow.com/questions/9213966/jquery-event-not-triggered)
*   [替换后的jQuery加载事件](https://stackoverflow.com/questions/4372251/jquery-load-event-after-replacewith)
*   [在 Replacewith 之后维护 jQuery onChange](https://stackoverflow.com/questions/6932665/maintain-jquery-onchange-after-a-replacewith)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:18:16.480

我不确定你为什么首先要破坏原始表格。如果您只需要重置它，可能有更好的方法。

但是鉴于您正在销毁表单，因此也销毁了它的处理程序，您可以将处理程序绑定到`#search-advanced`元素，并使用`.on`.

```
 // v--event is bound here          v--and will trigger on the form element
$('#search-advanced').on('submit', "form", function(e){
    e.preventDefault();
    var params = $('#search-advanced form').serialize();
    $.get(target, params, function(data){
        $('#search-advanced form').replaceWith($(data).find('#search-advanced form'));
        $('#search-advanced input[name="select_filter"]').remove();
        console.log($(data).find('#search-advanced .custom.dropdown'));
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:17:51.417

尝试像这样绑定事件：

```
$(document).on('click', '#search-main a', function(ev){
    // your code
}); 
```

# windows-phone-7 - 插入后台wp7

> ID：11828022
> 
> 赞同：3
> 
> 时间：2012-08-06T12:11:04.470
> 
> 标签：windows-phone-7, back-stack

我有一个包含以下页面的应用程序：

*   登录
*   菜单
*   聊天

当我启动应用程序时，页面的顺序如下 Login -> Menu -> Chat

但是......当我的应用程序没有运行并且我收到推送通知时，我想将用户直接导航到聊天窗口（并在后台登录，没有登录页面）。我的问题出现在这一点上，因为当我按下返回时我想进入菜单页面，而当我再次按下返回时我想进入登录页面。

如果他单击推送通知，我不想在聊天之前通过登录和菜单页面导航用户。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:55:09.457

我能想到的一种解决方案是，您记得您是通过推送通知来到聊天页面的。然后，当在聊天页面上按下返回键时，您会捕获事件 (OnBackKeyPress) 并自己调用 NavigationContext.NavigateTo(MainPage)。您可以在“菜单”页面上执行相同操作。

# jsp - apache commons文件上传api没有正常运行

> ID：11828026
> 
> 赞同：0
> 
> 时间：2012-08-06T12:11:14.060
> 
> 标签：jsp, servlets, apache-commons

我已经使用 apache commons 做了一个文件上传网页，这里发生的情况就像有时它上传文件，有时它不上传文件，我不知道问题出在哪里，是否在代码中（但它上传文件）或在网络中，因为如果文件在服务器上上传，我的输出页面将显示“文件上传成功”，我已经多次测试了我的代码，并且对于单次和多次上传都可以正常工作。问题从页面开始从网络服务器（apache tomcat）托管。

```
import com.mysql.jdbc.PreparedStatement;
import java.io.File;
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
import java.util.Iterator;
import java.util.List;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.apache.commons.fileupload.FileItem;
import org.apache.commons.fileupload.disk.DiskFileItemFactory;
import org.apache.commons.fileupload.servlet.ServletFileUpload;

public class uploadpagedb extends HttpServlet {  
 private String fileName="";        
 private String main="";  
 private String location;  
 private String sub;  
 private File uploadFile;  
 private String filen;
 private String filetype;
@Override
public void init(){  
}  
@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{        
    ResultSet rs=null;
    PreparedStatement psmnt=null;
 try 
  {  
    PrintWriter out = response.getWriter();          
    DiskFileItemFactory factory = new DiskFileItemFactory();          
    ServletFileUpload fileUpload = new ServletFileUpload(factory);         
    List items = fileUpload.parseRequest(request);  
    Iterator ir = items.iterator();  
     while(ir.hasNext()){  
     FileItem item = (FileItem)ir.next();   
String name = item.getFieldName();  
if(item.isFormField())
{  
 if(name != null)  
 {  
 if(name.equals("fileName"))
 {  
  fileName = item.getString();  
 }
 else if(name.equals("main"))
 {  
  main = item.getString();  
 }
 else if(name.equals("sub"))
 {
     sub=item.getString();
 }
 else if(name.equals("filetype"))
 {
     filetype=item.getString();
 }
 }  
}
else
{  
    String file1=item.getFieldName();
    String file2=item.getName();
    filen=file2;
 location = File.separator+"home"+File.separator+"adapco"+File.separator+"Desktop"+ File.separator +"output"+ File.separator +main+File.separator+sub+File.separator+filen;
 uploadFile = new File(location);        
 long size = item.getSize();  
 if(size <= 1024*1024*1024)
 {  
  item.write(uploadFile);  
  //out.println("Your File is uploaded successfully ");  
 }else{  
  out.println("Your File is not uploaded.File size should be less than 1GB");  
 }
 String concat=main+"/"+sub;
     Class.forName("com.mysql.jdbc.Driver");
     Connection con=DriverManager.getConnection("jdbc:mysql://localhost:3306/ksa","root","root");
     java.sql.Date sqlDate = new java.sql.Date(new java.util.Date().getTime());
     String status="n";
     int count=0;

     Statement st=con.createStatement();
     rs=st.executeQuery("select count(filename) as filename from file1 where filename='"+filen+"' and category='"+concat+"'");

     while(rs.next())
     {
     //String category1=rs.getString(1);
     count=rs.getInt(1);
     }
     if(count==1)
     {
        int dup=st.executeUpdate("update file1 set filename='"+filen+"' where category='"+concat+"'");
        out.println("file updated successfully");
     }
     else
     {
     psmnt=(PreparedStatement) con.prepareStatement("insert into file1(filedesc,category,filepath,filename,Date,filetype,status)values(?,?,?,?,'"+sqlDate+"',?,'"+status+"')");
     psmnt.setString(1, fileName);
     psmnt.setString(2, concat);
     psmnt.setString(3, location);
     psmnt.setString(4, filen);
     psmnt.setString(5, filetype);
     int ff=psmnt.executeUpdate();
    // InetAddress ownIP=InetAddress.getLocalHost();
     String ownIP=request.getRemoteAddr();
     psmnt=(PreparedStatement) con.prepareStatement("insert into updatelog values('"+ownIP+"')");
     int sysip=psmnt.executeUpdate();
     out.println("Your File is uploaded successfully ");  
     }
   }  
  }         
    //out.println("uploaded successfully");        
  //response.sendRedirect("uploadfile.jsp");                          
 } 
 catch (Exception e) 
 {  
  System.out.println("Error"+e.getMessage());
 }  
 }  
 } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-06T15:08:38.350

你可以尝试使用

```
uploadFile = new File(getServletContext().getRealPath(location)); 
```

这将在您的网络应用程序的根文件夹中创建文件（带有您的文件夹结构）。
如果文件位置正常，则更改该行

```
String file2=item.getName(); 
```

至

```
String file2 = new File(item.getName()).getName(); 
```

因为 IE 浏览器在客户端机器上发送完整路径。

# objective-c - 多次设置自定义 UINavigationBar 类

> ID：11828027
> 
> 赞同：0
> 
> 时间：2012-08-06T12:11:15.160
> 
> 标签：objective-c, uinavigationbar

我有 a`UITabBarController`其中有 3 `UINavigationController`s 和 2 `UIViewController`， 2 `UIViewController`s`UINavigationBar`在它们中都有 a 。

我的问题是，我如何给所有 5 `UINavigationBar`sa 自定义类？

我想覆盖它们每个的背景图像（使用 iOS5 技术），但是，当我创建一个自定义类时，我不能在 IB 中将其设置为多个。

有没有人有办法解决吗？

一如既往地提前感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:30:43.677

我的错。

我试图将 UINavigationBar 类应用于 UINavigationItem。

为了克服这个问题，我将 UITabBarController 的所有 UINavigation 子项转换为 UINavigationController 的子类，将其子类化并将其应用于所有子类。

# android - 配置 Android 应用内购买以进行测试

> ID：11828028
> 
> 赞同：3
> 
> 时间：2012-08-06T12:11:22.933
> 
> 标签：android, testing, in-app-purchase

我对这种情况很陌生。我为 Android In App 购买编码，并将其作为草稿上传到 google play（未发布）用于测试目的。现在我在开发者控制台中创建了一些应用内产品，可以通过我的应用购买。

我怀疑应用程序进行测试时的定价。价格不能设置为零。它显示至少应该有 0.99 美元。

要测试我的应用程序，我该如何配置它以便我可以自由购买它。

帮助将不胜感激，:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T17:51:57.253

这应该可以帮助您开始[测试应用内结算](https://developer.android.com/guide/google/play/billing/billing_testing.html)。但是有一个警告：

> 注意：使用保留的产品 ID 发出应用内结算请求会覆盖通常的 Google Play 生产系统。当您为预留的产品 ID 发送应用内计费请求时，服务质量将无法与生产环境相媲美。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T06:00:31.740

我可以在上述主题中发现的另一件事是，可以在 Google Play 中添加测试电子邮件帐户。开发人员可以在那里添加任意数量的 gmail id 作为测试帐户。

# java - Java Jersey 客户端 API

> ID：11828031
> 
> 赞同：0
> 
> 时间：2012-08-06T12:11:25.243
> 
> 标签：java, rest, jersey

我是 Java Jersey Client API 的新手，想登录到服务器，例如：

> ```
> POST http:/xxxx.net/auth/login
> 
> Content-Type: application/json
> {"login": "xxxxx", "password": "XXXXX"} 
> ```

你能给我看一个这样的 Java Jersey 客户端 API 代码的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:25:36.567

```
// create a Jersey client
Client client = Client.create();

// create the JSON as a Map 
Map<String, String> data = new HashMap<String, String>();
data.put("login", "xxxxx");
data.put("password", "xxxxx");

// post to the resource with APPLICATION_JSON_TYPE and it will be converted to JSON for you
client.resource("http://xxxx.net/auth/login")
      .type(MediaType.APPLICATION_JSON_TYPE)
      .post(data); 
```

# mysql - Mysql 按当前日期过滤数据

> ID：11828032
> 
> 赞同：2
> 
> 时间：2012-08-06T12:11:35.707
> 
> 标签：mysql

我有一张像..

```
 | id | name             | meetingID | meeting_type | status | recurring_time | attendee_passwd | moderator_passwd | date_created        | timezone  | meeting_datetime    | reminder | duration | created_by_id | sms_no | conferenceID | meeting_logout_url | max_participants | participants_id |
    +----+------------------+-----------+--------------+--------+----------------+-----------------+------------------+---------------------+-----------+---------------------+----------+----------+---------------+--------+--------------+--------------------+------------------+-----------------+
|  7 | 6august          | REG_524   |              |   NULL |                | 90200           | 18614            | 0000-00-00 00:00:00 | GMT  5.45 | 2012-08-06 03:00:00 |        0 | 60       |             1 |  12356 |         NULL | http://log.com     |               20 |            NULL | 
```

我正在尝试按当前日期过滤表，所以我使用以下查询

```
 SELECT *  from demo_meeting WHERE created_by_id IN(SELECT id FROM demo_user WHERE user_name = ' Sang') and meeting_datetime=curdate(); 
```

但我得到的是空集而不是得到结果。

请告诉我我在这里做错了什么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T12:15:08.333

您正在将日期时间与日期进行比较。

尝试将您的日期时间转换为日期，如下所示：

```
SELECT *  from demo_meeting WHERE created_by_id IN ( SELECT id FROM demo_user WHERE user_name = ' Sang') AND DATE(meeting_datetime) = curdate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:15:24.160

```
SELECT *  from demo_meeting WHERE created_by_id IN(SELECT id FROM demo_user WHERE user_name = ' Sang') and DATE_FORMAT(meeting_datetime, '%Y-%m-%d')=curdate(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T12:27:00.147

尝试使用`DATE( )`函数格式化您的日期。顺便说一句，表的连接比连接*更有效*`SubQuery`

```
SELECT  a.*
FROM    demo_meeting a 
            INNER JOIN demo_user b
                ON a.created_by_id = b.ID
WHERE   b.user_name = 'Sang' AND
        DATE(a.meeting_datetime) = DATE(curdate()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T12:29:23.583

您正在将 curdate() 与数据类型为 datetime/timestamp 的字段 meeting_datetime 进行比较；您真正需要做的是将 date(meeting_datetime) 与 curdate() 进行比较。

查询将是： SELECT * from demo_meeting WHERE created_by_id IN(SELECT id FROM demo_user WHERE user_name = 'Sang') 和`date(meeting_datetime)=curdate();`

希望它会帮助你。

# objective-c - 在没有 ibaction 的按钮上添加操作

> ID：11828039
> 
> 赞同：-1
> 
> 时间：2012-08-06T12:11:49.690
> 
> 标签：objective-c, ios, cocoa-touch, uibutton

我正在处理 mapkit 视图，我在注释上添加了一个按钮，如下所示：

```
UIButton *bt = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
[bt setFrame:CGRectMake(0, 0, 30, 30)];

annView.rightCalloutAccessoryView = bt; 
```

我想在触摸该按钮时转到另一个视图（例如 expleViewController），我习惯于使用 IBAction 方法进行操作，并使用 Interface Builder 将其与按钮链接，但是此按钮是手动创建的，所以我该如何链接它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:15:00.070

```
[bt addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];

- (void)buttonPressed:(UIButton *)b
{
    // do whatever you want ;)
} 
```

# javascript - 使用 java 脚本添加图像以进行测验

> ID：11828042
> 
> 赞同：0
> 
> 时间：2012-08-06T12:12:00.797
> 
> 标签：javascript

我正在使用[http://www.dhtmlgoodies.com/index.html?whichScript=quiz-maker](http://www.dhtmlgoodies.com/index.html?whichScript=quiz-maker)但我希望能够为每个问题显示一张图片。

我已经尝试将类似的内容添加到每个部分，但它似乎不起作用。

```
 (new Image()).src = "http:/track.me/image.gif"; 
```

和

```
 var img = new Image(1,1); // width, height values are optional params 
        img.src = 'http://www.testtrackinglink.com'; 
```

这是下面的问题变量。

```
 var questions = [
                {
                    label : 'Name Arsenals Football Ground?',
                    options : ['Emirates Stadium', 'Old Trafford', 'Stamford Bridge'],
                    answer : ['Emirates Stadium'],
                    forceAnswer : true,

                },
                {
                    label : 'Who was the champion of this years soccer world cup in South Africa ?',
                    options : ['Brazil', 'Netherlands', 'Spain'],
                    answer : ['Spain'],
                    forceAnswer : true  
                },
                {
                    label : 'Name two former Arsenal players ?',
                    options : ['Thierry Henry', 'Tony Adams', 'Michael Owen', 'Ole Gunnar Solskjaer'],
                    answer : [0,1], // refers to the second and third option
                    forceAnswer : true
                }
                ,
                {
                    label : 'United States has how many states',
                    options : ['49','50','51'],
                    answer : ['50'],
                    forceAnswer : true
                },
                {
                    label : 'A crocodile is a member of which family ?',
                    options : ['amphibian','reptile', 'vermin'],
                    answer : ['reptile'],
                    forceAnswer : true
                },
                {
                    label: 'In which year did Atlanta(US) arrange the summer olympics ?',
                    options : ['1992','1996','2000'],
                    answer :['1996'],
                    forceAnswer : true
                }

            ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:14:04.027

创建一个新图像并不意味着它也被附加到 DOM 中。您必须手动添加它。

```
var img = new Image();
img.src = 'http://www.example.com/images/img.jpg';

document.body.appendChild(img); 
```

此外，在运行 javascript 之前，请确保要附加图像的元素存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:16:25.357

试试这个，让我知道。

使用 jQuery

```
$.each(questions, function(i){
   var img = new Image();
   img.src='http://www.example.com/images/img.jpg';
   document.body.appendChild(img);
}); 
```

没有jQuery

```
for(var i=0;i<questions.length;i++){
   var img = new Image();
   img.src='http://www.example.com/images/img.jpg';
   document.body.appendChild(img);
}); 
```

# oop - 用接口集合实现接口

> ID：11828045
> 
> 赞同：1
> 
> 时间：2012-08-06T12:12:20.017
> 
> 标签：oop

假设我有一个接口 IPerson，它公开了另一个接口 ICar 的集合。ICar 由 Car 类实现，IPerson 由 Person 类实现。我希望 Person 可以公开 Car 的集合，而不是 ICar 的集合，但是如果不更改 IPerson 接口，这似乎是不可能的。

还有其他解决方案吗？我想让 IPerson 公开 ICar 的集合，但我还需要一个实现 IPerson 的类并公开 Car 的集合。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:24:40.300

我不知道这个解决方案是否符合您的需求，但是根据您使用的语言，您可以使用通用解决方案来实现这种行为。

例如在java中

```
interface IPerson<T extends ICar> {

    public T[] getCars();

   // ...
} 
```

这将确保泛型类型`T`必须实现`ICar`，然后在您的实现中`Person`您可以拥有

```
Class Person implements IPerson<Car> {

   Car[] cars;

   public Car[] getCars() {
        return cars;
   }

   // ...
} 
```

不幸的是，这将不允许您一起查看不同的`IPersons`集合，因为这不再是一个，`IPerson`而是一个`IPerson<Car>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:15:31.547

如果我理解正确，您可以将 ICar 类型的集合添加到您的 Person 类中。因为 ICar 或 Car 的集合（几乎）是同一件事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:18:43.490

在我看来，这是不可能的。

如果 IPerson 有一组 ICar，那么您的 Person 类也需要接受任何 ICar，而不仅仅是您的具体*Car*类。

这当然是假设 IPerson 的用户被允许添加 ICar 实例。如果集合是只读的，那么理论上这可能是可能的，但大多数语言都不允许这样做（例如 C# 不允许）。

# sql - Oracle SQL plus 11g 中的多表连接查询

> ID：11828046
> 
> 赞同：0
> 
> 时间：2012-08-06T12:12:32.857
> 
> 标签：sql, oracle

我有三张桌子。

1.  表`SCHOOL`：学校代码（PK），年份，学校名称。
2.  表`ENROLMENT`：学校代码、年份、班级名称、注册
3.  表`CLASS`：学校代码，年份，classid，房间

现在，我想查找在班级名称中注册的学校列表 - 1 到 4 以及班级 1-4 使用的教室数量。

我使用了以下查询：

```
select 
    m.schoolcode, m.schoolname, sum(e.c1+e.c2+e.c3+e.c4), sum(c.rooms) 
from 
    dise2k_enrolment09 e, dise2k_master m, dise2k_clsbycondition 
where 
    m.schoolcode = e.schoolcode 
    and m.schoolcode = c.schoolcode 
    and e.year = '2011-12' and m.year = '2011-12' and c.year = '2011-12' 
    and classid in (1,2,3,4) 
    and e.classname in (1,2,3,4) 
group by 
    m.schoolcode, m.schoolname 
```

但显示的结果不正确。入学率比实际高得多，在教室的情况下也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:57:28.147

尝试这个：

```
select m.schoolcode, m.schoolname, sum(e.c1+e.c2+e.c3+e.c4), sum(c.rooms) 
from dise2k_enrolment09 e, dise2k_master m ,dise2k_clsbycondition c
where m.schoolcode=e.schoolcode and m.schoolcode=c.schoolcode and e.year='2011-12' and m.year='2011-12' and c.year='2011-12' 
and c.classid in(1,2,3,4) 
and e.classname = c.classid
group by m.schoolcode, m.schoolname 
```

你拥有它的方式：`and e.classname in(1,2,3,4)`就像`OR`在你的 where 子句中有一个运算符。

```
(c.classid=1 or c.classid=2 or c.classid=3 or c.classid=4) 
and 
(e.classname=1 or e.classname=2 or e.classname=3 or e.classname=4) 
```

所以，c.classid 可以是“1”，e.classname 可以是“2”，这是错误的

**更新** 我仍然认为问题是你没有`c.classid`连接`e.classname`

试试这样：

```
select m.schoolcode, m.schoolname, sum(e.c1+e.c2+e.c3+e.c4), sum(c.rooms) 
from dise2k_enrolment09 e, dise2k_master m ,dise2k_clsbycondition c
where m.schoolcode=e.schoolcode and m.schoolcode=c.schoolcode and e.year='2011-12' and m.year='2011-12' and c.year='2011-12' 
and c.classid in(1,2,3,4) 
and c.classid = decode(e.classname,1,7,2,7,3,8,4,8,5,9,6,9,7,10,8,10)
group by m.schoolcode, m.schoolname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:44:08.197

尝试这个：

```
 select m.schoolcode, m.schoolname, sum(e.c1+e.c2+e.c3+e.c4), sum(c.rooms) 
from dise2k_enrolment09 e join dise2k_master m
on  m.schoolcode=e.schoolcode 
join dise2k_clsbycondition c
on m.schoolcode=c.schoolcode
where  e.year='2011-12' and m.year='2011-12' and c.year='2011-12' 
and classid in(1,2,3,4) 
and e.classname in(1,2,3,4) 
group by m.schoolcode, m.schoolname 
```

# java - JFreeChart 在 getSeriesVisible 上抛出异常

> ID：11828047
> 
> 赞同：1
> 
> 时间：2012-08-06T12:12:38.757
> 
> 标签：java, jfreechart

我正在尝试运行以下代码，它在 getSeriesVisible 上引发异常：

```
 chart.addChangeListener(new ChartChangeListener() {

        int indexChanged = -1;

        @Override
        public void chartChanged(ChartChangeEvent event) {
            XYPlot ff = chart.getXYPlot();
            XYItemRenderer y = ff.getRenderer();
            boolean b = y.getSeriesVisible(0);
           // chart.getXYPlot().getRenderer().setSeriesVisible(0, b);
        }
    }); 
```

消息：线程“AWT-EventQueue-0”中的异常 java.lang.NullPointerException

有任何想法吗？

更新：我添加了几个系列并生成图表如下：

```
 XYSeriesCollection data = new XYSeriesCollection();
    XYSeries series = new XYSeries("Series 1", true);
    series.add(1, 2);
    series.add(3, 5);
    series.add(8, 10);
    series.add(11, 3);
    series.add(8, 10);
    data.addSeries(series);

    series = new XYSeries("Series 2");
    series.add(5, -2);
    series.add(7, 6);
    series.add(8, 12);
    series.add(11, -2);
    series.add(15, 10);
    data.addSeries(series);

    final JFreeChart chart = ChartFactory.createXYLineChart("Chart", "X", "Y", data, PlotOrientation.VERTICAL, true, true, false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T21:13:11.853

它必须在您的代码中的其他位置。我使用下面的修改后的侦听器看到了此[示例的预期结果。](https://sites.google.com/site/drjohnbmatthews/jfreechartdemo)`addButton()`

```
addButton.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        int n = dataset.getSeriesCount();
        dataset.addSeries("Series" + n, createSeries(n));
        XYPlot plot = chart.getXYPlot();
        XYItemRenderer renderer = plot.getRenderer();
        System.out.println(renderer.isSeriesVisible(n));
    }
}); 
```

# python - Python 探查器 Statprof 给出了相同过程的多次出现

> ID：11828050
> 
> 赞同：1
> 
> 时间：2012-08-06T12:13:04.790
> 
> 标签：python, performance, profiling

我尝试使用 Python 分析器[statprof](http://pypi.python.org/pypi/statprof)来分析我的一些代码。该文档说，如果多次遇到一个过程，则只计算一次。然而，在配置文件的输出中，我看到同一过程多次出现，但行号不同。有人知道这可能会显示什么吗？

*例如输出*

```
 0.00      0.01      0.00  box.py:1305:**do_forever**

  0.00      0.01      0.00  httplib.py:981:_send_request

  0.00      0.01      0.00  box.py:1295:**do_forever**

  0.00      0.01      0.00  box.py:1295:**do_forever**

  0.00      0.01      0.00  sre_compile.py:486:_code

  0.00      0.01      0.00  box.py:923:get_user_file_info

  0.00      0.00      0.00  box.py:776:update_all_internal_user_stats_batch 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:56:17.350

*我只是查看了文档，它说的是如果在单个堆栈示例中*多次遇到一个过程，它只计算一次。（我在这里假设“过程”一词实际上应该是“过程中的代码行”。）

这意味着 - 如果正在进行递归，您不希望函数的时间成本被递归的深度人为地放大。

另外，我会指出一些其他的事情（[*这里有更详细的解释*](https://stackoverflow.com/a/1779343/23771)）：

第一列是“%时间”，不计算孩子，即自我百分比。这是一个无用的统计数据，因为几乎没有任何东西不是过程调用，并且查看该行可以判断它是否是过程调用。

第二列是“累计时间”，包括孩子。这很好，但它应该是百分比，这样您就不必除以总时间来查看百分比。数字很​​重要的原因是它代表了线路的职责——如果线路不存在，可以节省的总时间的一部分。

第三列是“自我时间”，正如我所解释的，这是一个无用的统计数据。它非常小或为零的事实反映了它的无用性。由于它包含在累计时间中，如果不是非常小，累计时间也会显示，所以它没有告诉你累计时间没有。

此外，正如作者指出的那样，样本在 I/O 期间被暂停，因此，如果它正在执行一些您不想要或不要求的 I/O，请深入某个库，如果这会使程序花费 100 次只要不是这样，分析器（和您）将完全不知道它。

# c# - 直接视频缓冲区访问

> ID：11828052
> 
> 赞同：4
> 
> 时间：2012-08-06T12:13:10.200
> 
> 标签：c#, opengl, directx, video-memory

当我使用显卡在屏幕上渲染东西时，如果我理解正确的话，只有三个选项可用。这些是

1.  DirectX（或 XNA）
2.  OpenGL
3.  Windows Driver Kit 和创建图形驱动程序的最小实现

我对 DirectX 或 OpenGL 的经验很少，但据我所知，您必须编写一个像素着色器程序来告诉渲染管道如何处理每个像素。这些着色器在 HLSL 中编程。但据我所知，DirectX 和 OpenGL 都无法返回一个指向内存的指针，我可以`byte[]`从我的 C# 程序中写入一些缓冲区并对其进行渲染。还是我在这里弄错了？

WDK 可能是一个更好的选择，因为它可以实现绝对最小的图形驱动程序实现，它只返回指向我可以写入 RGB 数据的内存的指针。因此，一方面我可以摆脱 DirectX 或 OpenGL 提供的所有抽象（我不需要），但另一方面，驱动程序开发的复杂性并不能完全节省时间。

此外，根据我在搜索更多信息时发现的信息，在过去的 DOS 中有一个地址 0B00 或类似的地址，允许开发人员直接在屏幕缓冲区上绘图。它当然已经消失了，我猜它不再可用，但出于兼容性原因，我已经阅读了这些内存空间仍然保留。有可能以某种方式利用它吗？

从 C# 访问视频内存以便我可以直接在屏幕上写入的最简单方法是什么？DirectX 或 OpenGL 是否提供这样的功能，使我能够直接在*某处*复制字节数组并对其进行渲染？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:35:22.010

通过使用 OpenGL 或 Direct3D 的内置纹理渲染功能，您可以将像素数据从客户端内存复制到服务器端内存，然后让它在屏幕上渲染纹理。

注意：客户端内存是指程序可访问的内存（在 CPU 和 RAM 中），服务器内存是指显卡上的内存。这与网络无关

# java - 如何从 SWT 表中选择一个单元格

> ID：11828053
> 
> 赞同：6
> 
> 时间：2012-08-06T12:13:10.627
> 
> 标签：java, swt

```
table.addSelectionListener(new SelectionAdapter() 
        {
            public void widgetSelected(SelectionEvent e) 
            {
                if(table.getSelectionIndex() != -1)
                {
                    System.out.println(table.getSelectionIndex());
                    TableItem item = table.getItem(table.getSelectionIndex());
                    System.out.println(item.toString());
                }
                else
                {}
            }
        }); 
```

当我单击表格中的任何单元格时，仅选择并返回该行的第一个单元格，而不是该单元格

请告诉我如何从我选择的那个单元格中选择和获取项目

请看图片 ![在此处输入图像描述](../Images/7b7e2bae73df6a96a2aea7108a897df2.png)

我选择了第三列，但它返回了第一列的 TableItem

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T11:59:05.463

我之前也遇到过同样的问题，我是这样解决的：</p>

首先，您应该使表 SWT.FULL_SELECTION`;

然后，您必须通过读取鼠标位置来获取选定的单元格（因为基本的 swt 表不提供侦听器来获取选定的单元格；选择一个项目是可能的）。这是代码：

```
 table.addListener(SWT.MouseDown, new Listener(){
        public void handleEvent(Event event){
            Point pt = new Point(event.x, event.y);
            TableItem item = table.getItem(pt);
            if(item != null) {
                for (int col = 0; col < table.getColumnCount(); col++) {
                    Rectangle rect = item.getBounds(col);
                    if (rect.contains(pt)) {
                        System.out.println("item clicked.");
                        System.out.println("column is " + col);
                    }
                }
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-05T18:17:40.593

我在使用 nebula 网格时遇到了类似的问题，发现您必须在表格对象上启用单元格选择。这是我的代码行：

```
tableViewer.getGrid().setCellSelectionEnabled(true); 
```

也许您可以尝试用 getTable() 替换 getGrid()。您不需要为此实现选择侦听器。

# jquery - 在 CouchDB 中更新文档

> ID：11828059
> 
> 赞同：2
> 
> 时间：2012-08-06T12:13:25.800
> 
> 标签：jquery, couchdb, couchapp

我知道如何更新 CouchDB 中的文档，但是当我更新文档时，我没有为更新指定的字段会被删除。我如何限制相同。例如，我的 CouchDB 文档包含以下字段：姓名、年龄、电子邮件，我只想更新此文档的电子邮件字段。所以我只需传入电子邮件字段、它的值、文档 ID 及其相应的 rev。但是当我进行这样的更新时，我的文档现在将只包含电子邮件。我如何限制这一点。即，只有电子邮件 ID 得到更新，保持其余字段和它的值不变。我正在使用 jquery.couch.js

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:13:32.513

也许你做错了......你正试图以非 CouchDB 的方式解决 CouchDB 中的问题。为什么要将所有评论存储在一个文档中？如果您想通过帖子在一个请求中检索它们，那么您可以使用 map 来聚合来自不同文档的帖子和评论，如下所示：

发表文件：`{ _id: "post1", type: "post", ... }` 评论文件：

```
{ type: "comment",
  post: "post1", // id of the post being commenting
  ...
} 
```

地图：

```
function (self) {
  if (!self.type) return;
  if (self.type == "post") {
    emit([self._id, 0], self);
  } else if (self.type == "comment" && self.post) {
    emit([self.post, 1, self.time], self);
  }
} 
```

检索带有按日期排序的评论的帖子：

```
curl http://127.0.0.1:5984/yourdb/_design/yourapp/_view/yourview?startkey=[%22post1%22]&endkey=[%22post1%22,{}] 
```

通过这种方式，您还可以仅检索部分评论并轻松实现分页。所有评论都应该存储在靠近帖子的 B-tree 中，因此它也应该是高效的。

[此处](http://www.cmlenz.net/archives/2007/10/couchdb-joins)详细描述了相同的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T12:16:44.687

> 所以我只需传入电子邮件字段、它的值、文档 ID 及其相应的 rev。

您需要使用更新的值保存**整个**文档，而不仅仅是要更新的值。将文档本身视为一个大的复合值；你不能改变它的一部分而不改变整个事情。

# asp.net-mvc-3 - 在添加/编辑模式中上传文件

> ID：11828060
> 
> 赞同：1
> 
> 时间：2012-08-06T12:13:29.010
> 
> 标签：asp.net-mvc-3, file-upload, jqgrid

我将 MVC3 与 razor 和 jqGrid 一起使用。

我的问题是当我单击提交按钮时，我无法在控制器级别获取路径或文档名称。

在我的`index.cshtml`中，我的 jqGrid 带有`edittype: 'file'`：

```
name: 'CHEMIN', 
index: 'CHEMIN',
width: 200, 
align: 'left',
enctype: "multipart/form-data",
method: "Post", 
editable: true, 
edittype: 'file',
editrules: { edithidden: true, required: true } 
```

和编辑网址：

```
 editurl: '/Barrage/PerformCRUDAction?idbar=@Model&iddoc=' + IdDoc 
```

这是我的编辑模式

[图像模式](http://s10.postimage.org/g1asa15vb/modal.png)

在控制器中，这是我的函数，它将在数据库中添加文档信息以及文档的上传路径（PATH）此函数还必须上传文件（图片，文档，...）中的指定文件夹服务器。

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult PerformCRUDAction(DOCUMENT doc, int idbar, int iddoc = -1)
    {
        //code that will add doc information in database
        //and upload file in the server

        return Json(result);
    } 
```

该参数`DOCUMENT doc`采用模式中的所有输入值，除了输入文件 PATH.

[图像参数文档](http://s16.postimage.org/c4wtes7ar/null.png)

# c# - 删除字符串的特定部分

> ID：11828063
> 
> 赞同：1
> 
> 时间：2012-08-06T12:13:39.807
> 
> 标签：c#, string

我有一些字符串，就像`FFS\D46_24\43_2`我想返回第一个反斜杠和最后一个下划线之间的文本。在上面的例子中，我想得到`D46_24\43`

我尝试了下面的代码，但它抛出了超出范围的参数：

```
 public string GetTestName(string text)
    {
        return text.Remove(
            text.IndexOf("\\", StringComparison.InvariantCultureIgnoreCase)
            ,
            text.LastIndexOf("_", StringComparison.InvariantCultureIgnoreCase)
            );
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T12:15:47.750

第二个参数是计数，而不是结束索引。此外，隔离字符串的一部分的正确方法是`Substring`and not `Remove`。所以你必须把它写成

```
var start = text.IndexOf("\\", StringComparison.InvariantCultureIgnoreCase);
var end = text.LastIndexOf("_", StringComparison.InvariantCultureIgnoreCase);

// no error checking: assumes both indexes are positive
return text.Substring(start + 1, end - start - 1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T12:16:14.633

第二个参数不是结束索引 - 它应该是要删除的字符数。

请参阅此重载[的文档](http://msdn.microsoft.com/en-us/library/d8d7z2kk.aspx)。

```
int startIndex = text.IndexOf("\\", StringComparison.InvariantCultureIgnoreCase);
int endIndex = text.LastIndexOf("_", StringComparison.InvariantCultureIgnoreCase)

return text.Remove(startIndex, endIndex - startIndex); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T12:17:19.153

这是正则表达式的工作。

```
var regex = new Regex( @"\\(.+)_" );
var match = regex.Match( @"FFS\D46_24\43_2" );

if( match.Success )
{
    // you can loop through the captured groups to see what you've captured
    foreach( Group group in match.Groups )
    {
        Console.WriteLine( group.Value );
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T12:18:22.620

使用正则表达式：

```
Match re = Regex.Match("FFS\D46_24\43_2", @"(?<=\\)(.+)(?=_)");
if (re.Success)
{
    //todo
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T12:19:48.057

您应该使用 Substring 而不是 Remove。试试这个：

```
public static string GetTestName(string text)
    {
        int startIndex = text.IndexOf("\\", StringComparison.InvariantCultureIgnoreCase);
        int endIndex = text.LastIndexOf("_", StringComparison.InvariantCultureIgnoreCase);

        if (startIndex < 0 || endIndex < 0)
            throw new ArgumentException("Invalid string: no \\ or _ found in it.");

        if (startIndex == text.Length - 1)
            throw new ArgumentException("Invalid string: the first \\ is at the end of it.");

        return text.Substring(startIndex + 1, 
                              endIndex - startIndex - 1);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T12:20:13.407

```
string text = @"FFS\D46_24\43_2";
int startIndex = text.IndexOf("\\", StringComparison.InvariantCultureIgnoreCase),
    lastIndex  = text.LastIndexOf("_", StringComparison.InvariantCultureIgnoreCase);

return text.Substring(startIndex + 1, lastIndex-startIndex-1); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-06T12:20:23.827

string.Remove() 的第二个参数是要删除的元素数，而不是要删除的上索引。

见[http://msdn.microsoft.com/en-us/library/d8d7z2kk.aspx](http://msdn.microsoft.com/en-us/library/d8d7z2kk.aspx)

编辑：正如其他人所指出的，您想使用 Substring()，而不是 Remove()

请参阅[http://msdn.microsoft.com/en-us/library/system.string.substring%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.string.substring%28v=vs.71%29.aspx)

# c# - 另一个控制器中的 MVC 控制器？

> ID：11828065
> 
> 赞同：0
> 
> 时间：2012-08-06T12:13:44.467
> 
> 标签：c#, asp.net-mvc, controller

我想知道 MVC 3 中的一个主控制器中是否可以有多个嵌套控制器？例如：

```
public class AdminController : Controller
{
    public class PagesController : Controller
    {
    }
    //More controllers
} 
```

我已经尝试过了，但无法让它工作，在 global.asx 中修改了我的路线，但仍然没有。`AdminController`例如，当 url 为时，我如何调用正确的控制器：

`/Admin/Pages/Index`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T12:15:42.507

听起来您所追求的是[Areas](http://msdn.microsoft.com/en-us/library/ee671793.aspx)。这将为您提供您正在寻找的 URL 路由结构，但它不使用“控制器中的控制器”来完成此操作。

相反，您将拥有一个管理区域，该区域中有一个 Pages 控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:15:52.073

不，这是不允许的。控制器工厂将无法解决它。

# c# - C# 和 C++ 之间的 NetNamedPipeBinding

> ID：11828070
> 
> 赞同：0
> 
> 时间：2012-08-06T12:14:03.850
> 
> 标签：c#, c++, wcf, named-pipes, netnamedpipebinding

我已经看到 NetNamedPipeBinding 存在于 C# 和 C++ ( [source](http://msdn.microsoft.com/fr-fr/library/system.servicemodel.netnamedpipebinding.aspx) ) 中，我想知道是否可以使用它在 C++ 程序和 C# 应用程序之间传输数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:31:01.720

这里有一个很好的例子，展示了如何在 C++ 和 C# 之间进行 IPC（进程间通信）。

*   [http://www.codeproject.com/Articles/34073/Inter-Process-Communication-IPC-Introduction-and-S](http://www.codeproject.com/Articles/34073/Inter-Process-Communication-IPC-Introduction-and-S)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:54:10.183

如果您的 C++ 编译器是 Visual C++ 的最新版本，并且具有支持编写托管代码的所有扩展，那么您可以轻松地使用 WCF 在 C++ 程序和 C# 应用程序之间传递数据。

如果您的 C++ 编译器不支持托管代码扩展，您仍然可以这样做，但工作量很大，因为 WCF 通道堆栈使用一些分层的专有协议进行消息框架、安全协商和消息编码，您需要如果您不能使用 WCF 提供的托管实现，请在 C++ 端重新实现。例如，请参阅[此问题](https://stackoverflow.com/questions/11767072/how-do-i-call-a-wcf-method-from-c-using-named-pipes#comment16081273_11767072)以了解出现的问题类型。

如果您不能使用托管 C++，通常更容易放弃 WCF 提供的一些好处，并且根据您的要求，可以：

*   在 C# WCF 服务周围使用托管的 COM 可见包装器，在 C++ 代码中用作 COM 服务器；或者
*   直接使用命名管道滚动您自己的 IPC 机制，在 C++ 端调用 WIn32 API 并在 C# 端使用 System.IO.Pipes 类型。

# silverlight-5.0 - 拒绝访问路径“D:\\ocean.gif”

> ID：11828076
> 
> 赞同：0
> 
> 时间：2012-08-06T12:14:46.763
> 
> 标签：silverlight-5.0

在我的 Silverlight 应用程序中，我收到此错误：

> 不允许文件操作。拒绝访问路径“D:\ocean.gif”。

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:23:06.453

默认情况下，不允许您从 Silverlight 应用程序访问本地文件系统；只有[独立的文件存储](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage%28v=vs.95%29.aspx)可用于标准 Silverlight 应用程序。

您可以将 Silverlight 应用程序配置为使用[提升的信任](http://msdn.microsoft.com/en-us/library/ee721083%28v=vs.95%29.aspx)。这将使您的 SL 应用程序完全访问本地文件系统。这通常对于浏览器外的应用程序最实用；存在与浏览器内提升信任应用程序相关的许多[部署限制。](http://www.pitorque.de/MisterGoodcat/post/Silverlight-5-Tidbits-Trusted-applications.aspx)

**更新**通常不需要您设置提升信任的另一种选择是使用[OpenFileDialog将图像作为](http://msdn.microsoft.com/en-us/library/system.windows.controls.openfiledialog%28v=vs.95%29.aspx)[FileStream](http://msdn.microsoft.com/en-us/library/system.io.filestream%28v=vs.95%29.aspx)读取：

```
var dlg = new OpenFileDialog();
if (dlg.ShowDialog().GetValueOrDefault())
{
    var stream = dlg.File.OpenRead();

    ... read the stream using a suitable image reader class ...
} 
```

我无法指出在 Silverlight 中工作的足够多的图像流阅读器，但请尝试使用 Google 搜索。

要在您的应用程序中使用提升信任，只需在您的项目中启用提升信任。这在 MSDN 文档中有详细描述。

# ios - 带有条件 ViewController 的情节提要

> ID：11828084
> 
> 赞同：0
> 
> 时间：2012-08-06T12:15:12.083
> 
> 标签：ios, cocoa-touch, uistoryboard

我是使用 Storyboards 的新手，所以我很感激任何帮助！

我有一个设置视图控制器，只有在没有以前的设置存在时才会出现。如果已设置这些，则会加载不同的 vc（主要的）。

我尝试使用附图中的方法，但我不确定这是否正确......

在 RootViewController 中，我正在 viewDidLoad 中测试是否之前设置了设置，并使用**ShowMain**或**ShowSettings**作为标识符来触发 Segue。

```
[self performSegueWithIdentifier:@"ShowMain" sender:self]; 
```

当然 RootViewController 显示在 NavigationController 层次结构中（显示后退按钮），这是我不想要的。

我该怎么办？

蒂亚！S。![在此处输入图像描述](../Images/5ef57be0a2579b00e6ed3b6098a8f4ed.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:23:17.077

如果看起来`RootViewController`只有决定显示哪个真实控制器的存在，我建议你摆脱它。您的主控制器可以设置为第一个控制器，并在**其** `viewDidLoad`. 然后，使用**模态**segue 呈现您的设置控制器。完成设置后（如有必要），将其关闭，然后您将返回主要设置。

# mysql - 如何获取两个表之间的 ID？

> ID：11828085
> 
> 赞同：1
> 
> 时间：2012-08-06T12:15:10.750
> 
> 标签：mysql

在 MySql 数据库中有`AM_COURSE`

```
UserId      CourseName   course_desc
  101          java        sometext...
  102          mysql       sometext....
   : 
```

`AM_TIMETABLE`在那张桌子

```
UserId        Date_Time
 101        2012-08-08 04:00:00 
 102        2012-08-15 10:00:00
 103        2012-08-18 09:00:00
 104        2012-08-24 05:00:00 
```

我的问题是，我正在传递开始日期和结束日期，`CourseName`然后我想以我编写查询的方式获取 UserId

```
select UserId,CourseName,course_desc from AM_COURSE where name='java' and UserId=(SELECT UserId FROM AM_TIMETABLE WHERE `Date_Time` BETWEEN '2012-08-07 00:00:00' AND '2012-08-20 00:00:00') 
```

然后我会得到 101 UserId 值。但我收到错误，因为内部查询给出了两个 id ...... `please help`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:31:40.093

重命名每个表中的 ID 可能会有所帮助，可能是 COURSE_ID 和 TIMETABLE_ID。在这种情况下，您还将创建一个包含所有用户信息（例如姓名、电子邮件等）的表。

正确设置表后，主键/外键配对将有助于表之间的连接并将数据输出为可想象的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:19:38.203

你可以`join`两个表：

```
SELECT  a.UserID
FROM    AM_COURSE a
            INNER JOIN AM_TIMETABLE b
                ON a.UserID = b.USerID
WHERE   a.CourseName = 'java' AND
        b.Date_Time BETWEEN '2012-08-07 00:00:00' AND '2012-08-20 00:00:00' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:20:29.237

```
SELECT c.UserId
FROM   AM_COURSE c
  JOIN AM_TIMETABLE t 
    ON c.UserId = t.UserId
WHERE c.name = 'java'
  AND t.Date_Time BETWEEN '2012-08-07 00:00:00' AND '2012-08-20 00:00:00' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T12:22:20.230

这个怎么样

```
select c.UserId,CourseName,course_desc from AM_COURSE c where name='java' and c.UserId=(SELECT t.UserId FROM AM_TIMETABLE t WHERE `Date_Time` BETWEEN '2012-08-07 00:00:00' AND '2012-08-20 00:00:00') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T12:24:10.600

如果您的内部查询返回超过 1 个结果（这对您的场景当然有效），那么您不应该使用**IN**子句吗？

```
select UserId
,CourseName
,course_desc 
from AM_COURSE 
where name='java' and UserId in (
    SELECT UserId 
    FROM AM_TIMETABLE 
    WHERE `Date_Time` BETWEEN '2012-08-07 00:00:00' AND '2012-08-20 00:00:00'
) 
```

# asp.net-mvc - ASP.Net MVC3：创建自定义 URL 而不包含确切的控制器名称

> ID：11828087
> 
> 赞同：2
> 
> 时间：2012-08-06T12:15:12.933
> 
> 标签：asp.net-mvc, routes, friendly-url

对于一个项目，我必须（不幸地）匹配一些确切的 url。

所以我认为这不会是一个问题，我可以使用“MapRoute”，将 url 与所需的控制器匹配。但我不能让它工作。

我必须映射这个 URL：

```
http://{Host}/opc/public-documents/index.html 
```

至

```
Area: opc
Controller: Documents
Action: Index 
```

另一个例子是映射

```
http://{Host}/opc/public-documents/{year}/index.html 
```

至

```
Area: opc
Controller: Documents
Action:DisplayByYear
Year(Parameter): {year} 
```

我在我的区域（）尝试了这个，但没有成功`ocpAreaRegistration.cs`：

```
context.MapRoute("DocumentsIndex", "opc/public-documents/index.html", 
    new {area="opc", controller = "Documents", action = "Index"});
context.MapRoute("DocumentsDisplayByYear", "opc/public-documents/{year}/index.html", 
    new {area="opc", controller = "Documents", action = "Action:DisplayByYear"}); 
```

但是我遇到了一些 404 错误 :( 当我尝试访问它时。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:30:38.860

我不确定你为什么需要这样做（我只能假设你来自遗留应用程序），但这对我有用：

opcAreaRegistration.cs：

```
public override void RegisterArea(AreaRegistrationContext context)
{
    context.MapRoute(
        "opc_public_year_docs",
        "opc/public-documents/{year}/index.html",
        new { controller = "Documents", action = "DisplayByYear" }
    );

    context.MapRoute(
        "opc_public_docs",
        "opc/public-documents/index.html",
        new { controller = "Documents", action = "Index" }
    );

    context.MapRoute(
        "opc_default",
        "opc/{controller}/{action}/{id}",
        new { action = "Index", id = UrlParameter.Optional }
    );
} 
```

控制器：

```
public class DocumentsController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    public ActionResult DisplayByYear(int year)
    {
        return View(year);
    }
} 
```

确保将这些路由放在区域路由文件中，而不是 global.asax 中，这样就可以了。

# java - JOptionPane.showOptionDialog() setComponentOrientaion 从右到左

> ID：11828088
> 
> 赞同：1
> 
> 时间：2012-08-06T12:15:13.523
> 
> 标签：java, swing

如何使 JOptionPane 对话框从右向左摆动？

# c# - C# 使用构造函数后向实例添加值

> ID：11828092
> 
> 赞同：0
> 
> 时间：2012-08-06T12:15:21.263
> 
> 标签：c#, object, instance

使用构造函数后，是否可以向对象的实例添加值？

例如我有这个代码。我必须列出需要数字 n 的对象和时间（作为参数接收）。问题是时间可以在任何地方，所以我不能在构造函数中使用它。

```
 public List<IAction> Dispatch(string[] arg)
   {
       int time;
       int i = 0;
       int j = 0;
       List<IAction> t = new List<IAction>(10);
       do
       {
           if (int.Parse(arg[j]) >= 0 && int.Parse(arg[j]) <= 20)
           {
               t.Add(new ComputeParam(int.Parse(arg[j]))); 

               i++;
               j++;

           }
           else
           {
               if (arg[i][0] == '/' && arg[i][1] == 't')
               {
                   Options opt = new Options();
                   j++;

                   time=opt.Option(arg[i]); //sets the time 0,1000 or 2000

               }

           }
       } while (i != arg.Length);
       return t; 
```

}

完成列表后，我可以执行以下操作：

`for(int i=0; i<=t.Count; i++) { *add time to t[i]* }`

我该怎么做呢？

提前致谢！

编辑 ：

这是 ComputeParam 类

```
public class ComputeParam : IAction
{
    int n;
    int time;
    public ComputeParam()
    {
    }
    public ComputeParam(int n)
    {
        this.n = n;
    }

    public void run()
    {

        Factorial Fact = new Factorial();
        Fact.Progression += new Factorial.ProgressEventHandler(Progress);
        Console.WriteLine("                                        ");
        Console.Write("\n" + "Partial results : ");
        Console.CursorLeft = 35;
        Console.Write("Progress : ");
        int Result = Fact.CalculateFactorial(n, time);
        Console.WriteLine(" ");
        Console.WriteLine("The factorial of " + n + " is : " + Result);

        Console.WriteLine("Press Enter to continue...");
        Console.CursorTop -= 2;
        Console.CursorLeft = 0;

        Console.ReadLine();
    }

    public void Progress(ProgressEventArgs e)
    {
        int result = e.getPartialResult;
        int stack_value = e.getValue;
        double max = System.Convert.ToDouble(n);
        System.Convert.ToDouble(stack_value);
        double percent = (stack_value / max) * 100;

        Console.CursorLeft = 18;
        Console.Write(result + " ");
        Console.CursorLeft = 46;
        Console.Write(System.Convert.ToInt32(percent) + "%      ");

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:30:54.130

如果该对象具有公共属性，我不明白为什么不这样做。
***编辑***：看起来你需要为你的班级添加一个公共属性。另请注意，鉴于有一个采用 0 参数的公共构造函数，您还应该为 n 添加一个属性。

```
public class ComputeParam : IAction    
{    
    int _n;    
    int _time;    
    public ComputeParam()    
    {    
    }    
    public ComputeParam(int n)    
    {    
        this._n = n;    
    }  
    public int Time 
    { 
        get { return this._time; }
        set { this._time = value; }
    }

    public int N
    {
        get { return this._n; }
        set { this._n = value; }
    }

for(int i = 0; i < t.Count; i++) 
{ 
    ((ComputeParam)t[i]).Time = 6;
} 
```

# css - 使用 JavaScript 生成的 div 的 CSS 定位无法按我的预期工作

> ID：11828102
> 
> 赞同：1
> 
> 时间：2012-04-22T23:49:27.670
> 
> 标签：css, javascript

首先，我必须道歉。CSS定位一直是我存在的祸根，这很可能是我完全错过的简单事情......

无论如何，我有一个生成 div 的 JS 脚本。每个 div 都在绝对定位的父级 #container 内。下面的CSS：

```
#container{
  position: absolute;
}
#container div{
  position: relative;
} 
```

创建 div 的函数是：

```
function newLine(){
  var id_num = ++line;
  var _new;
  var i;
  for(i = 0; i < width; i++){
    _new = document.createElement('div');
    _new.innerHTML = randomChar();
    _new.id = id_num;
    _new.style.left = i*10+'px';
    _new.style.top = 0;
    document.getElementById('container').appendChild(_new);
  }
} 
```

以上所有内容均已正确初始化。左侧定位完美。唯一的问题是垂直定位。它们不是彼此相邻显示的所有行，而是从 div 的顶部逐渐增加。我敢肯定这是我正在完全查看的微不足道的事情，但我很难过......非常感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:21:59.923

行为`position: relative`- 这会将它们静态布局，然后将它们移动指定数量的像素。你想使用`absolute`定位。

# ruby - 如何从Ruby中包含相同符号的字符串中获取数组？

> ID：11828112
> 
> 赞同：2
> 
> 时间：2012-08-06T12:16:47.387
> 
> 标签：ruby, arrays, string

我有这样的字符串：“1112222355”。如何使用 Ruby 获得这样的数组 ["111","2222","3","55"]？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T12:21:46.513

假设您只想对连续元素进行分组，请使用[Enumerable#chunk](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-chunk)：

```
> "1112222355".chars.chunk { |x| x }.map { |c, cs| cs.join }
=> ["111", "2222", "3", "55"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:44:03.037

```
"1112222355".scan(/((.)\2*)/).map(&:first)
# => ["111", "2222", "3", "55"] 
```

# jquery - jQuery仅加载某些元素

> ID：11828113
> 
> 赞同：0
> 
> 时间：2012-08-06T12:16:51.700
> 
> 标签：jquery, load, element

使用 PHP 在列表中创建一个新的 href。我们如何使用 jQuery 仅加载新的 href 而不是整个容器。

```
<div class="container">
<a href="" id="test1">Test 1</a>
<a href="" id="test2">Test 2</a>
<a href="" id="test3">Test 3</a>
<a href="" id="test4">Test 4</a>
</div> 
```

现在我们知道我们已经`#test5`用 PHP 创建了一个元素，我们如何在这个列表的末尾加载它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:22:24.560

您可以使用`append`或[附加到](http://api.jquery.com/appendTo/)

```
$('<a href="" id="test5">Test 5</a>').appendTo('.container'); 
```

如果您`<a href="soemthing.php">Test5</a`从 ajax 请求中收到完整的锚标记（例如：>），您可以简单地附加它。

```
$.get("fromsomefile.php",function(data){
   $(data).appendTo('.container');
}); 
```

如果你只有 href( `Ex: ="sompage.php"`) 值，那么创建一个链接并设置`href`属性值

```
$.get("fromsomefile.php",function(data){
   $('<a id="someDynamcId">Tes 5</a>').attr("href",data).appendTo('.container');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:23:43.260

如果我没有弄错问题，您只需从 php 加载 a 标签...我将在代码上显示...让我们说

```
 $.post("some.php",{some:parameter},function(data){
    //data is <a href="" ></a>
    $(".container").append(data);
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:20:54.243

如果您有代码，请使用

```
$('.container').append('<a href="" id="test5">Test 5</a>'); 
```

如果您需要从 PHP 脚本加载数据，请使用以下代码：

```
$.get('http://example.com', null, 
   function(data){$('.container').append(data);}
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T12:21:35.150

这应该这样做。

```
$('div.container').append('<a href="" id="test5">Test 5</a>'); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-06T12:23:09.227

如果元素已经加载，请使用：

```
$('#test4').attr('href','whatever you want to change'); 
```

# visual-studio - 没有 NuGet 的 NuGet 包还原同意

> ID：11828115
> 
> 赞同：2
> 
> 时间：2012-08-06T12:16:59.187
> 
> 标签：visual-studio, nuget

我们最近使用 NuGet 向我们的项目添加了一些依赖项。为了将二进制文件排除在版本控制系统之外，我启用了包还原功能并将生成的`.nuget`文件夹添加到存储库中。具有依赖项的项目也将`RestorePackages`选项设置为`true`，并在文件夹中设置了`Import`-tag 。`nuget.targets``.nuget`

这样在安装了 NuGet 并在我的 VS 设置中启用包还原功能的机器上一切正常。但是，当我想使用此设置在其他机器上安装依赖项时，我遇到了一些问题。

我的印象是，包含的一个优点是`nuget.exe`允许我在不一定安装 NuGet 的机器上使用它。然而，在阅读了[关于同意的文章](http://blog.nuget.org/20120518/package-restore-and-consent.html)后，我认为它实际上失败的原因是这些机器没有在其设置中启用包还原功能——显然，因为他们在技术上甚至不知道 NuGet。

在未安装 NuGet 的计算机上启用包还原的首选方法是什么？除了构建服务器之外，没有安装 NuGet 实际上是一个有效的选项吗？

或者理想情况下，如果 NuGet 本身没有安装并且因此用户无法设置该设置，是否有办法从解决方案中默认启用包还原？（我实际上可以想到一个创建`NuGet.Config`to的设置脚本`%AppData&\NuGet`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:11:44.233

尝试这个：

```
Install-Package NuGetEnablePackageRestore 
```

或者检查[包](https://nuget.org/packages/NuGetEnablePackageRestore)的内容（解压缩），你会发现一些有趣的东西可以帮助你（例如，有一种方法可以从 MSBuild 中设置环境变量）。登录 NuGet 后，您可以在浏览器中下载该包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T20:55:06.557

“或者理想情况下，如果 NuGet 本身没有安装并且因此用户无法设置该设置，是否有办法从解决方案中默认启用包还原？”

安装 NuGet 并通过设置启用同意的替代方法是设置以下环境变量：

```
set EnableNuGetPackageRestore=true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T19:52:37.807

如果 EnableNuGetPackageRestore（Alexandre Dion 提到）变量用作 Msbuild 脚本的 emmited 属性（我强烈怀疑它以这种方式工作，但现在无法检查） - 您可以调整您的项目或 sln 以将此附加属性设置为 true。

无论如何，[根据这个](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)你应该至少有 nuget.exe 作为每个开发人员的控制台管理器。否则，您无法获取引用的 nuget 包。

# shell - 'find' 的 -exec 选项有什么作用？

> ID：11828118
> 
> 赞同：-4
> 
> 时间：2012-08-06T12:17:06.053
> 
> 标签：shell, unix, makefile

我是 Makefile 的新手。我正在浏览现有的 makefile，但无法理解它的作用。该行如下。

```
find $(RELEASE_DIR) -depth -name  "*CVS" -exec rm -rf {} \; 
```

find 命令用于查找字符串。但我不明白这条线到底是做什么的。请帮忙理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:34:30.417

find 命令用于搜索给定目录中的文件。

```
find <directory> -option1 -option2 
```

该选项`-name "*CVS"`表示该命令将搜索名称末尾带有 CVS 的文件。

`-depth`表示使用[http://en.wikipedia.org/wiki/Depth-first_search](http://en.wikipedia.org/wiki/Depth-first_search "深度优先搜索")方法遍历目录。

`-exec rm -rf {} \;``rm -rf`告诉 find 为找到的每个文件执行命令。`{}`是当前找到的文件的占位符，`\;`标志着 rm 命令的结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:23:10.360

这意味着它将扫描`$(RELEASE_DIR)`每个名称如 *CVS 的文件，我们执行 rm -rf，这意味着删除它。

=> 此命令删除所有包含`CVS`在其名称末尾的文件。

# c# - WPF 业务对象

> ID：11828120
> 
> 赞同：0
> 
> 时间：2012-08-06T12:17:16.843
> 
> 标签：c#, wpf, business-objects

首先，我在这里和整个互联网上阅读了很多关于 WPF 和 Business Object 的文章（和问题），但我不确定我必须做什么才能创建一个带有验证的文章。由于我是 WPF 新手，我很难理解实现这一目标需要做些什么：我有一个 BO 类，我需要将其与 WPF 集成并编辑、添加、删除数据而不会搞砸数据。

那么，有人可以通过解释或一篇好文章向我澄清这一点吗？

非常感谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T12:38:33.770

听起来你可以尝试实现`IEditableObject`接口。这为您提供了一种一致的方式来实现**添加**数据并针对对象数据的更改（或更改的**回滚）对其进行****编辑**。

 **看看*Paul Stovell的这篇文章**[IEditableObject Adapter for WPF and Windows Forms](http://www.paulstovell.com/editable-object-adapter)*。

> `IEditableObject`要求您实现以下方法：
> 
> ```
> BeginEdit()
> CancelEdit()
> EndEdit() 
> ```

该接口用于：

> **BeginEdit**可以手动调用，或者在 DataGridView 的情况下，如果实现会自动调用。这是您通常拍摄对象状态的“快照”的部分。然后调用**CancelEdit来回滚更改，并****调用 EndEdit**来接受它们。

[编辑]

至于 WPF 应用程序中的**验证**部分，具体取决于您要执行的操作，使用`IDataErrorInfo`ViewModel 中的接口可能会派上用场。

这是关于代码项目的帮助教程：[验证用户输入 - WPF MVVM](http://www.codeproject.com/Articles/98681/Validating-User-Input-WPF-MVVM)

> 通过在您的模型中实现此接口，并结合 WPF 数据绑定，用户输入验证变得自动，而实现验证只是选择如何向用户显示验证错误。在使用 MVVM 设计模式时，该界面可以轻松地将代码从您的代码后面以及您的 ViewModel 和 Model 中保留出来。**

# javascript - 如何在javascript中获取选定文本的值

> ID：11828125
> 
> 赞同：0
> 
> 时间：2012-08-06T12:17:23.783
> 
> 标签：javascript

> **可能重复：**
> [如何使用 JavaScript 获取下拉列表的选定值？](https://stackoverflow.com/questions/1085801/how-to-get-the-selected-value-of-dropdownlist-using-javascript)

我有一个选择：

```
<select id="short_code">
<option value="12">First</option>
<option value="11">Second</option>
<option value="10">Third</option>
<option value="9">Fourth</option>    
</select> 
```

我想获取所选文本的值。例如，如果选定的文本是`First`我需要得到的`12`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T12:20:05.163

```
document.getElementById('short_code').value 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T12:24:24.860

这应该这样做：

```
<script type="text/javascript">
    function getSelected(select) {
        alert(select.options[select.selectedIndex].value);
    }
</script>    

<select id="short_code" onchange="getSelected(this)">    
    <option value="12">First</option>
    <option value="11">Second</option>
    <option value="10">Third</option>
    <option value="9">Fourth</option>    
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:20:18.930

```
document.getElementById('short_code').options[document.getElementById('short_code').selectedIndex].text 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T12:20:46.980

试试这个：

```
var el = document.getElementById("short_code");
var code = el.options[el.selectedIndex].value; 
```

# java - 改变mp3的比特率

> ID：11828134
> 
> 赞同：0
> 
> 时间：2012-08-06T12:17:56.227
> 
> 标签：java, audio, xuggle

我在 java 中使用 xugglu 来切换输入 MP3 文件的比特率，将其存储在输出文件中。我举了一个我在网上找到的例子，将文件加载到阅读器并添加一个编写器作为侦听器。有谁知道我该如何修改比特率？

这是我一直在使用的代码：

```
import com.xuggle.mediatool.IMediaReader;
import com.xuggle.mediatool.IMediaViewer;
import com.xuggle.mediatool.IMediaWriter;
import com.xuggle.mediatool.ToolFactory;
import org.slf4j.LoggerFactory;

public class TranscodingExample {

private static final String inputFilename = "/home/user/Desktop/file_changed.mp3";
private static final String outputFilename = "/home/user/Desktop/file_changed.flv";

public static void main(String[] args) {

    // create a media reader
    IMediaReader mediaReader =
           ToolFactory.makeReader(inputFilename);

    // create a media writer
    IMediaWriter mediaWriter =
           ToolFactory.makeWriter(outputFilename, mediaReader);

    // add a writer to the reader, to create the output file
    mediaReader.addListener(mediaWriter);

    // create a media viewer with stats enabled
    IMediaViewer mediaViewer = ToolFactory.makeViewer(true);

    // add a viewer to the reader, to see the decoded media
    mediaReader.addListener(mediaViewer);

    // read and decode packets from the source file and
    // and dispatch decoded audio and video to the writer
    while (mediaReader.readPacket() == null) ;

}
} 
```

编辑-1：

我无法真正解决这个问题，所以我只是在 Java 应用程序中使用了一个 linux 命令来执行此操作。[您可以在此处](http://singztechmusings.wordpress.com/2011/06/21/getting-started-with-javas-processbuilder-a-sample-utility-class-to-interact-with-linux-from-java-program/)找到对代码的引用。我使用的命令是：

```
ffmpeg -i in.mp3 -b 112k out.mp3 
```

它将 mp3 转换为比特率等于 112k 的新文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:41:08.557

看看[IAudioResampler](http://build.xuggle.com/view/Stable/job/xuggler_jdk5_stable/javadoc/java/api/com/xuggle/xuggler/IAudioResampler.html)：

> 用于将 IAudioSamples 重新采样为不同的采样率或通道数。

# jquery - 自动完成未完成

> ID：11828137
> 
> 赞同：-1
> 
> 时间：2012-08-06T12:18:01.090
> 
> 标签：jquery, ajax, jquery-autocomplete

我写了一个自动完成功能。当我单击#input3 时，它开始生成我输入的内容。

示例：“apple” 我输入“app”，然后单击选择“apple”。我选择的内容应该发送到 src 并在#input2 中更新。

问题：发送到 src 的是我输入的内容，而不是我选择的内容。为什么？

```
.autocomplete({
    source: function(request, response) {
        $.ajax({
            url: src,
            fillin:true,
            dataType: "json",
            data: {
                term : request.term,
                c3 : $("#input3").val()
                },
            success: function(data){
                response(data)
                }
            });
        },
    minLength: 0,
    delay: 300
    })
.change(function(request2, response) {
    $.ajax({
        url: src,
        dataType: "json",
        data: {
            term : request2.term,
            c1 : "search",
            c3: $("#input3").val()
            },
        success: function(data){
            $("#input2").val(data);
            }
        });
    }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:33:45.740

您可以在 jquery ui 自动完成中使用更改事件：

```
 $("#your_input_id").autocomplete({
            source: availableTags,
            change: function(){
            console.log($(this).val());//selected value
            }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T03:43:59.693

我已经解决了。我在 .autocomplete 之后添加了鳕鱼

```
 focus: function(event, ui) {
            $("#txtBufferTwo").val(ui.item.value);
            event.preventDefault();
            }, 
```

跟随一个隐藏的字段。

我所做的是单击选择后，将值分配给隐藏字段并提交隐藏字段的值。如果有更好的方法可以在这里发帖

# jquery - Datatables ColVis 插件 - 隐藏列和列合并

> ID：11828138
> 
> 赞同：1
> 
> 时间：2012-08-06T12:18:02.347
> 
> 标签：jquery, jquery-datatables

我有一个包含 9 列的数据表，列 [0] 和 [8] 被隐藏。然后将列 [7] 和 [8] 合并为一列（参见下面的代码）。

我正在努力解决的问题是当我隐藏一列时使用 ColVis 插件，列 [7] 和 [8] 的合并搞砸了。

希望这是有道理的，任何帮助将不胜感激。

```
var $buTable= $("#business_table").dataTable( {
        "oLanguage": {
            "sSearch": "Filter:"
        },
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "scripts/business_serverside.php",
    "iDisplayLength": 10,       
        "bJQueryUI": false,
        "sPaginationType": "scrolling",
        "sDom": '<"clear"><"top"CTilr<"clear">pt>',
        "aoColumns": [ 
            {"bVisible":false},
            {"bVisible":true},
            {"bVisible":true},
            {"bVisible":true},
            {"bVisible":true},
            {"bVisible":true},
            {"bVisible":true},
            {"bVisible":true},
            {"bVisible":false}
        ],
        "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
        $('td:eq(6)', nRow).html(''+ aData[7] +'&nbsp;'+ aData[8] +'');        
        },
        "oTableTools": {
            "sSwfPath": "swf/copy_csv_xls_pdf.swf"
        },
        "oColVis": {
            "activate": "mouseover",    
            "aiExclude": [0,8]
        }
    }).columnFilter({
            aoColumns: [ 
                    { type: "select"},
                    { type: "text" },
                    { type: "select" },
                    { type: "select"},
                    { type: "text"},
                    { type: "text"},
                    { type: "select"},
                    { type: "text"}
                ]
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T23:59:57.270

现在，您正在排除允许隐藏的列：

```
"oColVis": {
    "activate": "mouseover",    
    "aiExclude": [0,8]
} 
```

但是我认为您需要做的是a）将它们都排除在隐藏状态之外，这样它们就不会被篡改，或者b）编写一个回调方法，将它们的可见性状态链接起来，这样如果一个被隐藏，另一个会自动隐藏，同样明智因为它们变得可见。

像在你的数据表初始化中添加一个 fnDrawCallback ：

```
// method gets called each table draw / re-draw
"fnDrawCallback": function( oSettings ) {
    // column buttons get ids based on their column title 
    // so let's assume your columns are titled 'column7' and 'column8'
    $('#column7').change( function() {
        $('#column8').trigger('click');
    });

    $('#column8').change( function() {
        $('#column7').trigger('click');
    });
}, 
```

代码未经测试，但如果您发现无法在 $('#column8) 和 $('#column7') 上调用事件更改事件，则必须手动检查第 7 列的可见性。随机猜测如何做到这一点将是这样的：

```
"fnDrawCallback": function( oSettings ) {
    if( fnSetColumnVis( 7, false ) ) {
        fnSetColumnVis( 8, false );
    }
    else {
        fnSetColumnVis( 8, true );
    }
}, 
```

希望有帮助！

# iphone - 解析 RSS 提要 - 检索图像、网址？

> ID：11828141
> 
> 赞同：0
> 
> 时间：2012-08-06T12:18:12.447
> 
> 标签：iphone, ios, xcode, cocoa, ipad

您好，我正在解析 RSS 和 Atom 提要，我的问题是如何检查 <description> 中的 <img> 和 <url> 标签？

必须有某种检查。谢谢。

这是我解析它们的方法：

```
- (NSArray *)parseFeed:(NSURL *)feedURL{
    NSError *error;
    NSData *data = [NSData dataWithContentsOfURL:feedURL];
    GDataXMLDocument *xmlParse = [[GDataXMLDocument alloc] initWithData:data error:&error];
    GDataXMLElement *rootElement = xmlParse.rootElement;
    NSArray *array = [[NSArray alloc] init];
    if ([rootElement.name compare:@"rss"] == NSOrderedSame) {
        array = [self parseRSSFeed:rootElement];
        return array;
    } else if ([rootElement.name compare:@"feed"] == NSOrderedSame) {
        array = [self parseAtomFeed:rootElement];
        return array;
    } else {
        NSLog(@"Unsupported root element: %@", rootElement.name);
        return nil;
    }
}

-(NSArray *)parseRSSFeed:(GDataXMLElement *) rootElement
{
    NSMutableArray *entries = [[NSMutableArray alloc] init];
    NSArray *channels = [rootElement elementsForName:@"channel"];
    for (GDataXMLElement *channel in channels) {
        NSArray *items = [channel elementsForName:@"item"];
        for (GDataXMLElement *item in items) {
            FeedItem *itemF = [[FeedItem alloc] init];
            itemF.title = [item valueForChild:@"title"];
            itemF.description = [item valueForChild:@"description"];
            NSLog(@"IMAGE - %@", [item valueForChild:@"img"]);
            itemF.dateString = [item valueForChild:@"pubDate"];
            itemF.link = [NSURL URLWithString:[item valueForChild:@"link"]];
            itemF.dateString = [item valueForChild:@"updated"];
            itemF.author = [item valueForChild:@"author"];
            [entries addObject:itemF];
            NSLog(@"RSS - %@", itemF.title);
        }
    }
    NSArray *RSSArray = [entries copy];
    return RSSArray;
}
-(NSArray *)parseAtomFeed:(GDataXMLElement *) rootElement
{
    NSMutableArray *entries = [[NSMutableArray alloc] init];
    NSArray *entry = [rootElement elementsForName:@"entry"];
    for (GDataXMLElement *entryElement in entry) {
        // NSArray *items = [channel elementsForName:@"item"];
        //for (GDataXMLElement *item in items) {
        FeedItem *itemF = [[FeedItem alloc] init];
        itemF.title = [entryElement valueForChild:@"title"];
        itemF.description = [entryElement valueForChild:@"summary"];
        NSArray *links = [entryElement elementsForName:@"link"];
        for (GDataXMLElement *link in links) {
            itemF.link = [NSURL URLWithString:[[link attributeForName:@"href"] stringValue]];
        }
        itemF.dateString = [entryElement valueForChild:@"updated"];
        NSArray *authors = [entryElement elementsForName:@"author"];
        for (GDataXMLElement *authorElement in authors) {
            itemF.author = [authorElement valueForChild:@"name"];
        }
        [entries addObject:itemF];
        NSLog(@"Atom - %@", itemF.title);
    }
    NSArray *atomArray = [entries copy];
    return atomArray;
} 
```

我正在使用 GDataXMLParser 和我自己的解析器类来解析它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:18:08.660

像这样做：

```
NSString *Str=[item valueForChild:@"description"];
NSArray *tmp=[Str componentsSeparatedByString:@"<Img>"];
if([tmp count]>1){
    NSString *urlstr=[[tmp objectatindex:1] stringByReplacingOccurrencesOfString:@" </Img>" withString:@""];
} 
```

现在`urlstr`包含您的图片网址。

享受

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:50:21.013

我以为

```
itemF.description = [item valueForChild:@"description"]; 
```

是`NSString`。所以你可以使用`componentsSeparatedByString`“你的标签”。它将返回数组。在位置 1 的数组中，您将获得您的 img 网址。这个网址有右括号“你的结束标签”。用空格替换“你的结束标签”。您将获得图片网址。

希望对你有帮助。

# iphone - iphone - 将值插入sqlite数据库

> ID：11828147
> 
> 赞同：0
> 
> 时间：2012-08-06T12:18:23.330
> 
> 标签：iphone, objective-c, ios, xcode, sqlite

我正在尝试在 iphone 应用程序中将值插入我的 sqlite 数据库，但没有成功：

```
insertSQL = [NSString stringWithFormat: @"INSERT INTO eventslist (date, title, description) VALUES ('%@', '%@', '%@')", dateString, title, descr];
const char *insert_stmt = [insertSQL UTF8String];
sqlite3_prepare_v2(eventsDB, insert_stmt, -1, &statement, NULL); 
```

我的`descr`变量包含一段带有特殊字符、换行符等的文本。我认为这是一个原因。我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T09:41:39.497

```
+(void)CheckConnection
{
    NSArray *docpath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docdir = [docpath objectAtIndex:0];
    dbpath=[docdir stringByAppendingPathComponent:databasename];
    BOOL success;
    NSFileManager *fm = [NSFileManager defaultManager];
    success=[fm fileExistsAtPath:dbpath];
    if(success)
    {
        return;
    }
    NSString *dbPathFromApp = [[[NSBundle mainBundle]resourcePath]stringByAppendingPathComponent:databasename];
    [fm copyItemAtPath:dbPathFromApp toPath:dbpath error:nil];
}

+(BOOL)Savedata:(NSDictionary*)dicval
{
    [self CheckConnection];
    BOOL sucsess;
    sqlite3 *database;

    if (sqlite3_open([dbpath UTF8String], &database)==SQLITE_OK) {
        NSString *query=[NSString stringWithFormat:@"insert into emp_info values(NULL,'%@','%@','%@','%@')",[dicval valueForKey:@"name"],[dicval valueForKey:@"surname"],[dicval valueForKey:@"mobile_no"],[dicval valueForKey:@"city"]];
        const char *sqlStmt=[query UTF8String];
        sqlite3_stmt *cmpSqlStmt;
        int rv=sqlite3_prepare_v2(database, sqlStmt, -1, &cmpSqlStmt, NULL);

        sucsess=((rv ==SQLITE_OK)? YES : NO);
        sqlite3_step(cmpSqlStmt);
        sqlite3_finalize(cmpSqlStmt);
    }
    sqlite3_close(database);
    return sucsess;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:22:13.650

此链接包含从数据库创建、插入和检索数据，它可能会有所帮助。

[通过 Objective-C 创建 SQLite3 数据库文件](https://stackoverflow.com/questions/10540728/creating-an-sqlite3-database-file-through-objective-c/11795399#11795399)

首先创建数据库并打开它。然后只尝试将数据插入数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:46:59.957

```
if(sqlite3_open([databasePath UTF8String],&db) == SQLITE_OK)
{
    insertSQL = [NSString stringWithFormat: @"INSERT INTO eventslist (date, title, description) VALUES ('%@', '%@', '%@')", dateString, title, descr];

    char *errmsg=nil;

    if(sqlite3_exec(db, [insertSQL UTF8String], NULL, NULL, &errmsg)==SQLITE_OK)
    {
       NSLog(@"Row Inserted");
    }
}
sqlite3_close(db); 
```

# javascript - 使用 google Adwords 来判断关闭 Javascript 的人的百分比

> ID：11828151
> 
> 赞同：0
> 
> 时间：2012-08-06T12:18:46.990
> 
> 标签：javascript, google-ads-api

我们目前使用 Google Adwords 来检测我们网站上的转化率。

我们在每个页面上都有一段脚本，定义如下：

[http://support.google.com/adwords/bin/answer.py?hl=en&answer=1722054](http://support.google.com/adwords/bin/answer.py?hl=en&answer=1722054)

这也有一个`<noscript>`标签，单独调用广告服务，如下所示：

```
<noscript>
  <img height=1 width=1 border=0 
  src="http://www.googleadservices.com/pagead/
  conversion/1234567890/
  ?value=10.0&label=Purchase&script=0">
</noscript> 
```

有谁知道：这可以用来获取我们网站的 Javascript/非 Javascript 客户的比例吗？

# delphi - Delphi：使用带有 IdHTTP 的 Google URL Shortener - 400 错误请求

> ID：11828153
> 
> 赞同：4
> 
> 时间：2012-08-06T12:18:58.203
> 
> 标签：delphi, api, openssl, idhttp

我正在尝试从 Delphi 中通过其 API访问 URL Shortener ( [http://goo.gl/ )。](http://goo.gl/)但是，我得到的唯一结果是：**HTTP/1.0 400 Bad Request (reason: parseError)**

这是我的代码（在带有*Button1*、*Memo1*和*IdHTTP1*的表单上，其中*IdSSLIOHandlerSocketOpenSSL1作为其 IOHandler。我从*[http://indy.fulgan.com/SSL/](http://indy.fulgan.com/SSL/)获得了必要的 32 位 OpenSSL DLL ，并将它们放在 . exe的目录）：

```
procedure TFrmMain.Button1Click(Sender: TObject);
    var html, actionurl: String;
    makeshort: TStringList;
begin
try
 makeshort := TStringList.Create;

 actionurl := 'https://www.googleapis.com/urlshortener/v1/url';
 makeshort.Add('{"longUrl": "http://slashdot.org/stories"}');

 IdHttp1.Request.ContentType := 'application/json';
 //IdHTTP1.Request.ContentEncoding := 'UTF-8'; //Using this gives error 415

 html := IdHTTP1.Post(actionurl, makeshort);
 memo1.lines.add(idHTTP1.response.ResponseText);

     except on e: EIdHTTPProtocolException do
        begin
            memo1.lines.add(idHTTP1.response.ResponseText);
            memo1.lines.add(e.ErrorMessage);
        end;
    end;

 memo1.Lines.add(html);
 makeshort.Free;
end; 
```

*更新：*我在这个例子中没有使用我的 API 密钥（通常应该可以在没有尝试几次的情况下正常工作），但如果你想用自己的方式尝试，你可以将*actionurl*字符串 替换为`'https://www.googleapis.com/urlshortener/v1/url?key=<yourapikey>';`

ParseError 消息使我相信 longurl 在发布时的编码可能有问题，但我不知道要更改什么。

我已经为此困惑了很长一段时间，我确信这个错误就在我眼前——我只是现在没有看到它。因此，非常感谢任何帮助！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T16:53:07.397

正如您所发现的，`TStrings`该方法的重载版本`TIdHTTP.Post()`是错误的使用方法。它发送一个`application/x-www-form-urlencoded`格式化的请求，这不适合 JSON 格式的请求。您必须改用该方法的`TStream`重载版本`TIdHTTP.Post()`，例如：

```
procedure TFrmMain.Button1Click(Sender: TObject); 
var
  html, actionurl: String; 
  makeshort: TMemoryStream; 
begin 
  try
    makeshort := TMemoryStream.Create; 
    try 
      actionurl := 'https://www.googleapis.com/urlshortener/v1/url'; 
      WriteStringToStream(makeshort, '{"longUrl": "http://slashdot.org/stories"}', IndyUTF8Encoding); 
      makeshort.Position := 0;

      IdHTTP1.Request.ContentType := 'application/json'; 
      IdHTTP1.Request.Charset := 'utf-8';

      html := IdHTTP1.Post(actionurl, makeshort); 
    finally
      makeshort.Free; 
    end;

    Memo1.Lines.Add(IdHTTP1.Response.ResponseText); 
    Memo1.Lines.Add(html); 
  except
    on e: Exception do 
    begin 
      Memo1.Lines.Add(e.Message); 
      if e is EIdHTTPProtocolException then
        Memo1.lines.Add(EIdHTTPProtocolException(e).ErrorMessage); 
    end; 
  end; 
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T12:40:40.133

从 URL 缩短[API 文档](https://developers.google.com/url-shortener/v1/getting_started)：

> 您的应用程序向 Google URL Shortener API 发送的每个请求都需要向 Google 识别您的应用程序。有两种方法可以识别您的应用程序：使用 OAuth 2.0 令牌（也授权请求）和/或使用应用程序的 API 密钥。

您的示例不包含 OAuth 或 API 密钥身份验证的代码。

要使用 API 密钥进行身份验证，文档很清楚：

> 获得 API 密钥后，您的应用程序可以将查询参数 key=yourAPIKey 附加到所有请求 URL。

# iphone - 对相机的每一帧应用过滤算法

> ID：11828155
> 
> 赞同：1
> 
> 时间：2012-08-06T12:19:01.437
> 
> 标签：iphone, objective-c, ios, image-processing, camera

我正在开发一个 Iphone 应用程序。

我需要执行以下操作：当用户单击“相机选项卡”时，相机会在带有圆形叠加层的视图内打开。

我想在相机上应用过滤算法。

我正在寻找最好的方法来做到这一点。有图书馆可以提供帮助吗？

我目前在做什么：

1.  我正在使用`OpenCV`图书馆。
2.  我定义了一个计时器。
3.  对于每个计时器滴答，我`cvCaptureFromCam()`从`OpenCV` 框架中调用方法（这将用相机捕获图片并返回它）。
4.  我将算法应用于捕获的图像。
5.  我将图像显示在`UIImageView`

这个想法是，在每个计时器滴答声中，我都会获取图像，对其进行过滤并将其放入`UIImageView`. 如果计时器滴答声足够快，它将显示为连续的。

但是`cvCaptureFromCam`速度有点慢，整个过程占用了太多内存。

任何更好的方法的建议都非常感谢。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T20:20:09.440

任何基于 CPU 密集型处理的东西，例如 OpenCV，对于当前 iOS 设备上的实时视频过滤来说可能太慢了。正如我在[这个答案](https://stackoverflow.com/a/5158856/19679)中所说，我强烈建议为此寻找 OpenGL ES。

正如 CSmith 所提到的，我编写了一个名为[GPUImage](https://github.com/BradLarson/GPUImage)的开源框架，用于执行这种基于 GPU 的过滤，而不必担心涉及的底层 OpenGL ES。此框架中的大多数滤镜都可以应用于 640x480 的实时视频，其帧率远高于 iOS 相机的 30 FPS 帧率。我一直在逐渐添加过滤器，目标是替换 Core Image 中存在的所有过滤器，以及 OpenCV 的大多数图像处理功能。如果我在 OpenCV 中缺少您需要的东西，请在项目的问题页面上告诉我。

构建并运行 FilterShowcase 示例应用程序以查看可用过滤器的完整列表以及它们如何在实时视频源上执行，并查看 SimplePhotoFilter 示例以了解如何应用这些过滤器来预览相机拍摄的视频和照片。

# php - Mysql date_created 到当前时区

> ID：11828159
> 
> 赞同：0
> 
> 时间：2012-08-06T12:19:14.560
> 
> 标签：php, mysql, zend-framework

嗨，我有一个 mysql sql

```
$select ->from('unique_link as ul',
                    array('ul.unique_url','date_created'+,'(select COUNT(*) from click where click.url_id = ul.url_id) as unique_visitors'))
                ->joinInner('campaign as cm','ul.campaign_id = cm.campaign_id' ..... 
```

date_created 目前是 UTC 我需要添加 +08.00 hrs ..我怎么能在查询中这样做！非常需要帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:42:05.163

如果您在 MySQL 中添加日期，我认为，添加的日期是伺服器时间日期，您想在[此处](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html)阅读 DateTime 的 Mysql 文档。

但是，在您的标签中，我们可以看到您使用 Zend FrameWork，您可以阅读[这篇文章](http://framework.zend.com/manual/fr/zend.locale.date.datesandtimes.html)（在 zend 框架官网）了解如何使用 Zend_locale。使用 Zend Locale，您可以使用用户的语言环境日期创建/编辑日期和时间...

在添加了 8 小时的创建日期/时间后，您可以在 MySQL 请求中添加日期以保存在您的数据库中。

# java - 向 Java 类添加字段

> ID：11828160
> 
> 赞同：4
> 
> 时间：2012-08-06T12:19:14.797
> 
> 标签：java, bytecode, javassist, cglib, bcel

研究了在运行时使用 CGLib、ASM、BCEL（方面）和 Javassist 向类添加字段....

只是为了让我直截了当，看起来这些字节码操纵器不会更新实际的类，而是允许用户只转储修改（如使用 CGLib 和 writeFile 方法）。希望我能找到一个解决方案，（a）加载类（而不是使用 BCEL 执行 InputStream）和（b）更新类。

也许这很正常？人们通常会创建代理并传递代理吗？

我想要做的是在将对象传递给查找具有特定注释的字段（而不是属性）的框架之前添加一个字段（注意：不是通过 get/set 方法的属性）。所以“客户”正在创建我想要注入额外字段的目标类。使用 AOP 拦截对我想要操作这些对象的服务层的调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:24:40.313

您可以使用 Intrumentation 重新定义类。但是，一个常见的限制是您不能更改使用的字段。这是因为一旦创建了对象，您就无法更改（或添加）对象的内容。

在你的情况下，你可以，

*   按照您的建议创建代理，但是代理需要是接口。
*   创建一个具有附加字段的子类
*   在类加载之前添加字段。

# ruby-on-rails - MongoRuby 和 Mongodb

> ID：11828162
> 
> 赞同：0
> 
> 时间：2012-08-06T12:19:24.467
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

谁能告诉我为什么这在 mongodb 中有效

```
db.sub_count.update({"subject":"petad","count":1},{$inc:{"count":1}}) 
```

但这不适用于红宝石

```
sub_count.update({"subject" => "petad", "count"=> 1},{$inc => {"count" => 1}}) 
```

我在哪里得到错误

```
/lib/bson/bson_c.rb:24:in `serialize': keys must be strings or symbols (TypeError) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:31:36.147

查询应该是：

```
sub_count.update({...}, {"$inc" => {"count" => 1}}) # And not :$inc 
```

`$inc`不是有效的符号（或字符串），这就是您看到错误的原因。

**旁白**：我不确定这是否有效：您可以通过这种方式定义符号，但[Ruby 驱动程序文档](http://api.mongodb.org/ruby/current/file.TUTORIAL.html)`:"$inc"`中没有提到符号可用于原子运算符，因为我在任何时候都没有尝试过，我不知道。

# ember.js - emberjs 路由器设置站点语言

> ID：11828167
> 
> 赞同：0
> 
> 时间：2012-08-06T12:19:46.127
> 
> 标签：ember.js, ember-old-router

我如何设置`lang`和`setEN`读取`about`？

现场选择语言是个好方法吗？也许emberjs为此提供了其他方法？

我想改变`router.get('applicationController').connectOutlet('about');`加载`connectOutlet('about-' + lang )`。这样，我将加载`about-pl`或`about-en`取决于用户选择的语言。

这种情况会在更改语言后强制重新加载页面。我怎样才能做到这一点？因为当用户在“#/about”并选择新语言页面时应该重新加载加载`about-language`。

```
App.Router = Em.Router.extend({
    enableLogging: true,
    location: 'hash',
    lang: 'pl',

    root: Em.Route.extend({
        // EVENTS
        setPL: function () {
            this.set('lang', 'pl');
        },
        setEN: function () {
            this.set('lang', 'en');
        },

        gotoAbout: Ember.Route.transitionTo('about'),
        gotoProjects: Ember.Route.transitionTo('projects'),
        gotoTechnology: Ember.Route.transitionTo('technology'),
        gotoContact: Ember.Route.transitionTo('contact'),

        index: Em.Route.extend({
            route: '/',
            connectOutlets: function (router, context) {
                router.get('applicationController').connectOutlet('navbar', 'navbar');
            },

            // STATES
            about: Em.Route.extend({
                route: '/',
                connectOutlets: function (router, context) {
                    console.log( router.get('lang') );
                    router.get('applicationController').connectOutlet('about');
                }
            }), 
```

以其他方式，我可以使用语言作为路径的一部分，例如：`#/en/about`. 但是如何更改`#/about`to `#/en/about`，`#/contact`to`#/en/contact`和其他方式存在问题。并且路径更复杂`#/projects/12`

# java - 如何赋予特定领域权重？

> ID：11828171
> 
> 赞同：3
> 
> 时间：2012-08-06T12:20:09.610
> 
> 标签：java, search, indexing, gwt, solr

我正在使用 Apache Solr 进行索引和搜索。我必须对特定字段赋予权重，以便如果我进行搜索，那么搜索必须在权重最高的字段上执行，然后在其他字段上执行。

我正在使用 SolrJ、Java 和 GWT 进行开发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T22:20:19.497

要在索引时提升，您需要在更新文档中提供提升语句。

```
<add overwrite="true">
    <doc boost="2.0">
        <field name="id">1234</field>
        <field name="type">type1</type>
    </doc>
    <doc>
        <field name="id">2345</field>
        <field name="type" boost="0.5">type2</type>
    </doc>
</add> 
```

上面的示例演示了如何提升完整文档（海拔）以及如何提升特定字段。

有关更多文档，请查看[此处](http://wiki.apache.org/solr/SolrRelevancyFAQ#index-time_boosts)和[此处](http://wiki.apache.org/solr/UpdateXmlMessages#line-40)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:49:39.730

使用 dismax（或 edismax）查询处理程序，您可以设置 qf（查询字段）参数以将提升分配给不同的字段。它使用这种格式：

field1^boost_val field2^boost_val....等。

还有其他很好的参数可以帮助您控制结果排名。

[http://wiki.apache.org/solr/ExtendedDisMax](http://wiki.apache.org/solr/ExtendedDisMax)

# animation - 循环上的 SVG 动画不透明度

> ID：11828179
> 
> 赞同：17
> 
> 时间：2012-08-06T12:20:25.063
> 
> 标签：animation, svg, opacity

我想让 svg 路径的不透明度在连续循环中从 0 到 100 回到 0 和 100。

到目前为止，我可以让它从 0 动画到 100 但不能再回来，

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-08T14:34:35.973

`values`您可以使用该属性为任意数量的值设置动画，如下所示：

```
<rect x="10" y="10" width="20" height="20">
    <animate attributeName="opacity"
             values="0;1;0" dur="1s"
             repeatCount="indefinite"/>
</rect> 
```

这将在 1 秒内从不透明度 0 动画到不透明度 1 (100%)，然后再次回到 0。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-08-06T12:55:22.070

您有两个单独的动画 - 一个用于增加不透明度，一个用于降低不透明度。每个都在另一个结束时开始，但第一个也从 0 开始。这是一个矩形的例子：

```
<rect x="10" y="10" width="20" height="20">
    <animate id="animation1"
             attributeName="opacity"
             from="0" to="1" dur="1s"
             begin="0s;animation2.end" />
    <animate id="animation2"
             attributeName="opacity"
             from="1" to="0" dur="1s" 
             begin="animation1.end" />
</rect> 
```

# ruby-on-rails - API 参数中的连字符

> ID：11828180
> 
> 赞同：4
> 
> 时间：2012-08-06T12:20:27.920
> 
> 标签：ruby-on-rails, api, params

[这个问题](https://stackoverflow.com/questions/9644546/saving-the-information-emailed-and-processed-via-mailgun-into-my-app)的答案特别提到了使用 params `[:body-plain]`。但是，Rails 会抛出此错误：`NameError (undefined local variable or method 'plain' for #<IncomingMailsController:0x0000000913f278>):`

如何访问带有连字符的参数？我无法更改参数，因为它们是从第三方 API ( [Mailgun](http://www.mailgun.com/) ) 发布的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-06T12:28:45.360

您需要像这样访问它们：

```
params[:'body-plain'] 
```

甚至像这样：

```
params["body-plain"] 
```

`symbol`如果您的名字包含特殊字符，您必须转义它。

# c++ - 获取主机名 (C++)

> ID：11828182
> 
> 赞同：-2
> 
> 时间：2012-08-06T12:20:28.533
> 
> 标签：c++

> **可能重复：**
> [获取本地主机名和 IP 地址的 C++ Windows 函数调用](https://stackoverflow.com/questions/2933774/c-windows-function-call-that-get-local-hostname-and-ip-address)

我试过很多。如何在 C++ 中获取主机名。我正在使用 Windows 7。请任何人帮助我。

我用

#include“unistd.h”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T12:23:18.193

```
#include<stdio.h>
#include<Winsock2.h>
#pragma comment(lib, "Ws2_32.lib")
int main()
{
    char szPath[128] = "";
    WSADATA wsaData;
    WSAStartup(MAKEWORD(2, 2), &wsaData);
    gethostname(szPath, sizeof(szPath));
    printf("%s", szPath);
    WSACleanup();
    return 0;
} 
```

# ruby - 如何使用 ruby 脚本访问 number_with_presicion？

> ID：11828185
> 
> 赞同：0
> 
> 时间：2012-08-06T12:20:42.867
> 
> 标签：ruby, ruby-on-rails-3

在我想使用的 ruby​​ 脚本中，`number_with_presicion`. 我该怎么办？`Include *something*`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:24:40.963

试试这个

```
irb --> require 'action_view'
    ==> true

irb --> ActionView::Base.new.number_with_precision 1234
    ==> "1234.000" 
```

您需要`action_view`在您的红宝石脚本中使用。

**更新**

为了能够在`number_with_precision`不输入的情况下使用`ActionView::Base`，您需要`Numeric`像这样扩展类

```
require 'action_view'
class Numeric
  def number_with_precision
    ActionView::Base.new.number_with_precision(self)
  end
end 
```

在此之后，您可以像这样使用它

```
irb --> 10.number_with_precision
==> "10.000" 
```

显然，您可以将此扩展名放在一个文件中并通过 require 该文件`require`，您将在 Ruby 脚本中使用该扩展名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:44:18.993

将此添加到您的脚本文件

```
include ActionView::Helpers::NumberHelper 
```

现在你可以使用 ->`new_number = (number_with_precision 3556.22321, :precision => 2)`

# php - 使用 mySQL 向页面添加新字段

> ID：11828187
> 
> 赞同：0
> 
> 时间：2012-08-06T12:20:48.473
> 
> 标签：php, mysql, database

我对 mySQL 有点陌生。我添加了一个新列，用于存储存储在文件中的图像的图像名称（例如.toweltest.jpg）。我想绘制这些以在页面上显示图像。这是我正在改编的其他人的代码，所以它有点不完整。基本上我想绘制文件夹名称，然后添加与该产品关联的任何图像名称。到目前为止，我有这个：

```
<?php
$SNIPPET = true;

require './includes/php/header.php';

$product = Product::Get($_GET['product_id']);
$supplier = Supplier::Get($product->supplier_id);
$url = "/products/";
$image = 'toweltest.jpg';
?>

<h1><?php echo htmlspecialchars($product->code); ?><br><br><?php echo htmlspecialchars($product->name); ?></h1>
<h2><?php echo htmlspecialchars($product->description); ?></h2>
<img src='<?php echo $url.$image; ?>'> 
```

这显示了图像，但显然我想要与每个产品相关联的图像。说的部分：

```
$image = 'toweltest.jpg'; 
```

需要动态，但我不知道如何表达它。任何帮助表示赞赏。

谢谢

富有的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:24:40.193

无法判断我们是否不知道图像的列名，但它应该类似于：

```
$image = $product->image; 
```

这实际上是一个猜测，因为我看不到其余的代码。

# jquery - jQuery：获取所有元素ID循环所有选定的选项

> ID：11828190
> 
> 赞同：1
> 
> 时间：2012-08-06T12:21:00.443
> 
> 标签：jquery

我有一个选择选项，它可以是任何数字的名称：prod_search[] 和 id：prod_search0、prod_search1、...2、..3 等等

检查下面的示例我有...

```
<select name="prod_search[]" id="prod_search0">
    <option value="o1">Option1</option>
    <option value="o2">Option2</option>
</select>

<select name="prod_search[]" id="prod_search1">
    <option value="o1">Option1</option>
    <option value="o2">Option2</option>
</select>

<select name="prod_search[]" id="prod_search2">
    <option value="o1">Option1</option>
    <option value="o2">Option2</option>
</select> 
```

现在使用 jquery，我按名称循环上述所有选择选项...

```
$('select[name="prod_search[]"] option:selected').each(function(index) {       
    prod_search = $(this).val();
    prod_text   = $(this).text();

    //here i need ID of current select in the loop
    //...e.g.: prod_search0 or prod_search1 or ...
}); 
```

我尝试使用不显示实际 ID 但给出序列号的索引。如果删除元素 'prod_search1'，它会失败。

需要一个正确的方法来接近。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:23:36.180

您的`each()`块在`option`标签的上下文中运行，因此要获取父级的 ID，`select`您只需上到父级：

```
$(this).parent().attr('id'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:23:50.777

您正在迭代`<option>`s 并且您想要元素`id`的`<select>`（它们的父级）。所以得到它`$(this).parent().attr("id")`。

# ios4 - iOS如何显示新的UIView？

> ID：11828197
> 
> 赞同：0
> 
> 时间：2012-08-06T12:21:35.877
> 
> 标签：ios4, xcode4.3, iphone-sdk-4.3

iOS 开发新手。如果我错了，请纠正我？

我有一个 UIWindow，rootviewcontroller 是：

```
@interface ViewController : UIViewController
{
IBOutlet UIButton *but;
}

@property (nonatomic, strong) UIButton  *but;
-(IBAction) butButtonPressed;

@end 
```

即：如果我将此 Viewcontroller 作为根视图控制器，则会显示 ViewController 中可用的 UIView。明白了。

我创建了一个继承自 UIViewController 的新类，以及它的 .xib 文件。

所以xib文件名是：view1.xib，

我的目标是在按下按钮时显示此视图。

现在我创建了一个按钮，并且按钮按下调用 butButtonPressed。在 butButtonPressed 内部，我做了以下操作。

```
 myViewController *vcontroler = [[ViewController alloc] initWithNibName:@"view1" bundle:nil];
    [self.view.window addSubview:vcontroler.view]; 
```

应用程序崩溃。我究竟做错了什么 ？请指出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:35:32.647

这个...

```
[self.view.window addSubview:vcontroler.view]; 
```

...是一个非常糟糕的策略（我真的希望我知道人们在哪里找到它作为一种展示观点的方式）。如果你创建了一个视图控制器，你应该使用它，而不是仅仅把它当作一个临时容器，你可以从中提取视图。

如果您想`vcontroler`看起来像您的第一个控制器的孩子（并且您有一个`UINavigationController`），请使用`pushViewController:animated:`. 否则，您可以使用 将其显示为模态`presentModalViewController:animated:`。

如果您只想将视图添加到现有显示，请将视图放在`ViewController`的层次结构中并显示/隐藏它。

如果您绝对**必须**将它作为子控制器，`ViewController`那么您需要保留对它的引用并在拥有的控制器内管理它的生命周期。

# jquery - 如何使用 jquery ajax 发送文件字段？

> ID：11828204
> 
> 赞同：-1
> 
> 时间：2012-08-06T12:22:12.877
> 
> 标签：jquery, ajax, json

```
$.ajax({
        url: 'index.php?route=account/edit',
        type: 'post',
        data: $('#account_edit input[type=\'text\'], #account_edit input[type=\'password\'],**#account_edit input[type=\'file\']**,#account_edit input[type=\'radio\']:checked'),
        dataType: 'json',
        beforeSend: function() {
            $('#button-update').attr('disabled', true);
            $('#button-update').after('<span class="wait">&nbsp;<img src="catalog/view/theme/default/image/loading.gif" alt="" /></span>');
        },  
        complete: function() {
            $('#button-update').attr('disabled', false); 
            $('.wait').remove();
        },          
        success: function(json) {
            $('.warning').remove();
            $('.error').remove();
            //alert(json['error']['firstname']);

            if (json['redirect']) {
                //location = json['redirect'];
            }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:28:54.363

我使用[jQuery 表单插件](http://jquery.malsup.com/form/)以类似 ajax 的方式提交文件，特别是[.ajaxSubmit()](http://jquery.malsup.com/form/#api ".ajaxSubmit()")方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T04:56:39.450

$.ajax() 不支持文件上传。更好的是，您应该尝试一些像[ajaxForm](http://jquery.malsup.com/form/#getting-started)这样的插件来上传文件。

# javascript - 使用 Backbone.js 中的 :id 等参数指定根 url 并能够访问它

> ID：11828207
> 
> 赞同：0
> 
> 时间：2012-08-06T12:22:19.790
> 
> 标签：javascript, url, backbone.js, backbone-routing

嗨，我想让我的根 url 有一个如下所示的 :id 段，它应该作为参数传递给与之匹配的每个路由

```
Backbone.history.start({ pushState: false, root: "/orders/:id/items"})

routes: {
    "": "item"
},

item: function(id) {
  alert(id);
} 
```

但现在我得到的 id 是未定义的，即使它是根 url 的一部分。

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:27:38.283

好吧，您的根 url 中不能有参数段`Backbone.History`。

[来自Backbone.History.getFragment](http://backbonejs.org/docs/backbone.html#section-126)的一些源代码，用于获取 url-fragment 以匹配路由并从中提取变量（我的布局有点不同）

```
if (!fragment.indexOf(this.options.root)) { 
  fragment = fragment.substr(this.options.root.length);
} 
```

这段代码是每个`Router.navigate`调用结束的地方（除非`{ trigger: false }`应用）。那么如果片段包含使用`start`-function 定义的根 url，会发生什么情况，片段将被替换为原始片段的子字符串，该子字符串方便地省略了根。因此，当从片段中提取变量时，甚至不会考虑您的根 url。

所以没有办法将变量放入根 URL，因为根据定义，根 url 只是 Backbone.History 的指针，以防**您的应用程序不是从您的域的根 url 提供的**。这是[报价](http://backbonejs.org/#History-start)：

> 如果您的应用程序不是从您的域的根 url / 提供服务，请务必告诉历史根的真正位置...

因此，如果您的应用程序没有被提供`/orders/12345/items`，`/orders/78342/items`那么我建议您不要试图告诉您的路由器它是。相反，从提供它`/`，然后正常设置路由：

```
routes: {
  'orders/:id/items': 'item'
} 
```

希望这可以解决问题！

# meteor - 如何正确使用 Meteor.connect() 连接另一个 Meteor 服务器

> ID：11828208
> 
> 赞同：5
> 
> 时间：2012-08-06T12:22:19.197
> 
> 标签：meteor

我在 /client/main.coffee 中的新客户端代码

```
Xingyun = Meteor.connect "localhost:3000"
System = new Meteor.Collection "system", Xingyun
Meteor.subscribe "system" 
```

在我的原始流星代码中，“系统”已发布，“系统”集合包含一个文档。我可以用“System.find().count()”来验证它。

在我的新客户端浏览器上，“System.find().count()”总是返回 0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T05:06:22.803

请试试`Xingyun.subscribe "system"`

# jquery - 隐藏同级 div 节点后，可排序的 jquery 列表在 IE 9.0 中不起作用

> ID：11828212
> 
> 赞同：1
> 
> 时间：2012-08-06T12:22:26.637
> 
> 标签：jquery, internet-explorer, jquery-ui-sortable

这是我要修复的代码：http: [//jsfiddle.net/fabKu/](http://jsfiddle.net/fabKu/)。

一切正常，直到您隐藏（使用按钮）第二个 div。该代码适用于所有其他主要浏览器，只有 IE 会引起问题。

我不知道为什么会发生这种情况，所以我正在寻求一些帮助。

编辑：

这是问题的详细说明。这都是关于索引的。

**环境：**

浏览器：IE 9.0

**重现步骤：**

1.  隐藏第二个 div。（点击第一个按钮）
2.  尝试将第 15 个项目（例如）移动到位置 7（例如）。

**当前行为：**

第 15 项的索引更改为“02”（在拖动期间），当您将其放置在新位置时，排序会混淆。

**预期行为**

重新加载页面并做同样的事情，但不隐藏第二个 div。

**解决方法**

一种可能的解决方法是在第一个和第二个之间放置一个新的 div。如果包含“ol”节点的 div 之后的节点将“display”设置为“none”，IE 似乎在重新索引时遇到问题。（似乎节点是 div 还是其他东西都没有关系）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:28:26.220

我已经用这个小提琴在 IE7 中验证了以下工作：

[http://jsfiddle.net/Agwp2/1/](http://jsfiddle.net/Agwp2/1/)

尝试这个：

```
 $('form input:eq(0)').click( function()
                {
                    $('#divToHide').hide();
                });

                $('form input:eq(1)').click( function()
                {
                    $('#divToHide').show();
                }); 
```

如果这在 IE 中有效，那么问题出在不兼容的 CSS 上。

# c++ - 如何使用 mysql cpp 连接器设置“IN”值

> ID：11828213
> 
> 赞同：0
> 
> 时间：2012-08-06T12:22:44.040
> 
> 标签：c++, mysql-connector

如何为以下 SQL 语句设置“IN”值：

```
UPDATE `test` SET `test`.`status` = 'foo' WHERE `test`.`id` IN (?); 
```

那可能吗 ？我查看了标题，找不到任何相关内容，也没有在 google 或 stackoverflow 中找到任何内容。

我应该使用该`setBlob`方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-15T07:38:16.110

MySQL 连接器 API 中没有任何东西可以处理这种情况。

但是用一个非常简单的 for 循环来解决它不应该是令人兴奋的。

*   要么你循环每个 `id`并自动更新。

```
对于每个（您的收藏中的 ID）{
    UPDATE `test` SET `test`.`status` = 'foo' WHERE `test`.`id` = (?);
}

```

*   或者您调用自定义构建的直接语句（也带有`for`循环）...

# ssh - 通过具有公共 IP 的中介从一个本地网络 SSH 到另一个本地网络

> ID：11828215
> 
> 赞同：1
> 
> 时间：2012-08-06T12:22:59.970
> 
> 标签：ssh, ssh-tunnel

一个本地网络中有一台计算机 (A)，而另一台计算机 (B) 位于另一个本地网络中。他们都没有公共IP地址。两个 LAN 网关都不受我的控制。但是我有一个公共 IP 地址的 VPS 服务器，A 和 B 都可以连接到这个 VPS。如何使用中间 VPS 建立从 A 到 B 的 ssh 隧道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:44:07.130

从 B 连接到 vps，将远程端口转发到本地（似乎 -R ssh 选项）：

```
B# ssh -R 2222:localhost:22 vpsuser@vpshost 
```

这会将您连接到 VPS 主机，使服务器上的端口 2222 连接到 B 主机端口 22 (ssh) 剩下要做的就是从 A 连接到 VPS 服务器并通过 2222 从它连接到 B：

```
A# ssh vpsuser@vpshost
VPS# ssh -p2222 buser@localhost
B# 
```

# java - 玩！框架 - ORM

> ID：11828221
> 
> 赞同：4
> 
> 时间：2012-08-06T12:23:10.637
> 
> 标签：java, hibernate, jpa, orm, playframework-2.0

从*戏剧！*框架文档：

> **Play 2.0中没有内置的 JPA**实现；您可以选择任何可用的实现。例如，要使用 Hibernate，只需将依赖项添加到您的项目中：

*   我有什么选择而不是 Hibernate？
*   您认为什么适合留言板网站？
*   我知道 Hibernate 有一点开销，对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T12:26:50.303

[Play 2.0 内置了 Ebean](http://www.playframework.org/documentation/2.0.2/JavaEbean) ORM不满足你的需求吗？

开始使用它只需取消注释中的几行`application.conf`，检查 MySQL 的此描述：[https ://stackoverflow.com/a/10007515/1066240](https://stackoverflow.com/a/10007515/1066240)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T22:33:24.200

还有 squeryl [http://squeryl.org/](http://squeryl.org/)。这是一个很好的入门教程：[http ://www.artima.com/articles/play2_scala_squeryl.html](http://www.artima.com/articles/play2_scala_squeryl.html)

# php - codeigniter中的未定义变量

> ID：11828224
> 
> 赞同：0
> 
> 时间：2012-08-06T12:23:19.983
> 
> 标签：php, codeigniter, view

遇到 PHP 错误

```
Severity: Notice
Message: Undefined variable: data
Filename: views/body_view.php
Line Number: 13
A PHP Error was encountered
Severity: Warning
Message: Invalid argument supplied for foreach()
Filename: views/body_view.php
Line Number: 13 
```

所以我在 Codeigniter 中遇到了这个问题

控制器：

```
<?php
if ( ! defined('BASEPATH')) exit ('No direct script access allowed');

class Blog extends CI_Controller {

    public function __construct()
    {
    parent::__construct();
    }    
    public function index()
    {
        echo 'Hello World!';
    }

    public function mat()
    {
        $this->load->model('materials_model');
        $data = array();
        $data['news'] = $this->materials_model->get();
        $this->load->view('body_view',$data);
    }

}
?> 
```

模型：

```
<?php
if ( ! defined('BASEPATH')) exit ('No direct script access allowed');

class Materials_model extends CI_Model
{
    public function get()
    {
        $query = $this->db->get('materials');
        return $query->result_array();
    }
}

?> 
```

看法：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
    <meta name="author" content="The Sabotage Rebellion hackers" />

    <title>a</title>
</head>

<body>

<?php foreach ($data as $one):?>
<?=$one['author']?>
<?php endforeach; ?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:25:31.457

将您的视图代码更改为

```
<?php foreach ($news as $one):?>
<?=$one['author']?>
<?php endforeach; ?> 
```

也就是说，替换`$data`为`$news`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:26:00.093

鉴于做如下

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
    <meta name="author" content="The Sabotage Rebellion hackers" />

    <title>a</title>
</head>

<body>

<?php foreach ($news as $one):?>
<?=$one['author']?>
<?php endforeach; ?>

</body>
</html> 
```

在 foreach 中用 $news 替换 $data

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:27:42.707

假设您有`$data`数组：

```
$data['x'] = 1; 
```

如果您将 传递`$data`给视图，

你可以访问`1`和`$x`不访问`$data['x']`

# php - 从数据库表中选择特定字段

> ID：11828227
> 
> 赞同：1
> 
> 时间：2012-08-06T12:23:29.940
> 
> 标签：php, mysql, drupal-6

我有这段代码，它从数据库中选择内容类型，然后根据内容类型构建它的视图。

```
$q = db_query('SELECT n.nid, n.title, r.body, f.filename
FROM {node} n
INNER JOIN {node_revisions} r ON n.vid = r.vid
INNER JOIN {content_type_brands} p ON p.nid = n.nid
INNER JOIN {files} f ON f.fid = p.field_deyat_pic_fid
WHERE n.type =  "brands"'); 
```

但是当我需要使此代码仅显示特定内容类型时，它会显示每种内容类型。我该怎么做才能仅显示选定的内容类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T12:29:40.753

在您的条款中更改`n`为。`p``WHERE`

```
SELECT  n.nid, n.title, r.body, f.filename
FROM    {node} n
            INNER JOIN {node_revisions} r 
                ON n.vid = r.vid
            INNER JOIN {content_type_brands} p 
                ON p.nid = n.nid
            INNER JOIN {files} f 
                ON f.fid = p.field_deyat_pic_fid
// WHERE    p.type =  'brands'
WHERE p.type IN ('brand1','brand1','brand1') 
```

# python - Python的selenium库可以播放保存为HTML的测试用例吗

> ID：11828230
> 
> 赞同：5
> 
> 时间：2012-08-06T12:23:37.620
> 
> 标签：python, django, selenium

我希望能够编写一个运行 Selenium 测试的 Django [LiveServerTestCase](https://docs.djangoproject.com/en/dev/topics/testing/?from=olddocs#django.test.LiveServerTestCase)，该测试已使用 Selenium IDE 保存为 HTML。代码可能如下所示：

```
from django.test import LiveServerTestCase
from selenium.webdriver.firefox.webdriver import WebDriver

class TestUserStories(LiveServerTestCase):

    @classmethod
    def setUpClass(cls):
        cls.selenium = WebDriver()
        super(MySeleniumTests, cls).setUpClass()

    def test_registration(self):
        # Note - 'run_html_test' doesn't exist
        self.selenium.run_html_test('selenium/registration.html') 
```

这将允许我们的 QA 团队（他们不会说 python）使用 Firefox Selenium IDE 编写测试并将它们保存为 HTML。这可能吗？

据我所知，HTML 是保存测试的最佳格式，因为它允许稍后在 IDE 中编辑它们 - 导出到 python 不允许这样做，并且还会生成需要转换以与 Django 一起使用的 python LiveServerTestCase。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:33:28.313

我自己开始了一个项目来构建这种 shim：用 Python 包装现有的基于 HTML 的 Selenium 测试，而无需转换现有的测试。出于与您所说的相同的原因：（客户端）测试团队想要编写 HTML Selenium 测试，但我们想使用 Selenium RC 运行它们。这是链接：

[https://github.com/jpstacey/PySelenese](https://github.com/jpstacey/PySelenese)

但是，我们将其构建的特定子项目封存了，因此很长时间没有受到任何关注。

关于您的特定要求，编写独立的 LiveServerTestCase 并不是最佳选择，因为这样您就失去了 Selenium 在一个套件中拥有许多测试用例的想法，以及一个套件 index.html 来定义它。相反，PySelenese 包装了整个测试套件并在其中运行所有测试用例，按照 Selenium IDE 运行它的顺序；但我承认执行此操作的代码目前不是很漂亮，可能更 Pythonic。

但这在理论上可以做你想做的事，所以请随意尝试，分叉 github 项目，进行自己的更改等。PySelenese 层目前对许多 Selenium 命令的支持有限，但这是相当可扩展的。

（明确免责声明：PySelenese 最初是我自己的个人 Github 项目。）

# java - Log4j JMS 附加程序示例

> ID：11828232
> 
> 赞同：1
> 
> 时间：2012-08-06T12:23:40.243
> 
> 标签：java, log4j, jms

我试图遵循[这个例子](http://activemq.apache.org/how-do-i-use-log4j-jms-appender-with-activemq.html)，但是当我将这个类复制到我的项目中时，我无法运行它。

我不知道我的导入应该是什么样子，因为 eclipse 建议了很多选项。我试过了

```
import javax.jms.Connection;
import javax.jms.Message;
import javax.jms.MessageConsumer;
import javax.jms.MessageListener;
import javax.jms.Session;

import org.apache.activemq.ActiveMQConnectionFactory;
import org.apache.activemq.command.ActiveMQObjectMessage;
import org.apache.log4j.Logger;
import org.apache.log4j.spi.LoggingEvent; 
```

但我得到了：

```
log4j:WARN No appenders could be found for logger (org.apache.activemq.transport.tcp.TcpTransport).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

本教程对我来说不清楚。你知道更多细节（绝对初学者）吗？或者，也许您知道如何解决此异常的问题？

编辑：

log4.properties 是示例中文件的精确副本

```
log4j.rootLogger=INFO, stdout, jms

## Be sure that ActiveMQ messages are not logged to 'jms' appender
log4j.logger.org.apache.activemq=INFO, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d %-5p %c - %m%n

## Configure 'jms' appender. You'll also need jndi.properties file in order to make it work
log4j.appender.jms=org.apache.log4j.net.JMSAppender
log4j.appender.jms.InitialContextFactoryName=org.apache.activemq.jndi.ActiveMQInitialContextFactory
log4j.appender.jms.ProviderURL=tcp://localhost:61616
log4j.appender.jms.TopicBindingName=logTopic
log4j.appender.jms.TopicConnectionFactoryBindingName=ConnectionFactory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:51:59.377

I think you have problem in you configuration log4j.properties file. Look carefuly to it configuration. You can try to find tutorials about configuration log4j with google for example look [this](http://www.tutorialspoint.com/log4j/index.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-09T11:51:04.510

这是经过测试的代码 - 在 log4j.xml 中为 JMSAppender 类创建条目，如下所示 -

```
<appender name="amqAppender" class="com.appender.JMSQueueAppender"> 
         <param name="brokerUri" value="failover:(tcp://host1:port,tcp://host2:port,tcp://host3:port)?randomize=false" /> 
         <param name="queueName" value="MobiviteQueue" /> 
</appender> 
```

并使用它 -

```
<root>
    <level value="ERROR" />
    <appender-ref ref="amqAppender" />
</root> 
```

而附加类是 -

```
package com.appender;

import javax.jms.DeliveryMode;
import javax.jms.Destination;
import javax.jms.MessageProducer;
import javax.jms.ObjectMessage;
import javax.jms.Session;

import org.apache.activemq.ActiveMQConnectionFactory;
import org.apache.log4j.Appender;
import org.apache.log4j.AppenderSkeleton;
import org.apache.log4j.Logger;
import org.apache.log4j.spi.LoggingEvent;

public class JMSQueueAppender extends AppenderSkeleton implements Appender {

private static Logger logger = Logger.getLogger(JMSQueueAppender.class);

private String brokerUri;
private String queueName;

@Override
protected synchronized void append(LoggingEvent event) {

    try {
        //System.out.println("JMSQueueAppender -----append  method is called  brokerUri ------ "+brokerUri);
        ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory(brokerUri);

        // Create a Connection
        javax.jms.Connection connection = connectionFactory.createConnection();
        connection.start();

        // Create a Session
        Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);

        // Create the destination (Topic or Queue)
        Destination destination = session.createQueue(queueName);

        // Create a MessageProducer from the Session to the Topic or Queue
        MessageProducer producer = session.createProducer(destination);
        producer.setDeliveryMode(DeliveryMode.PERSISTENT);

        ObjectMessage message = session.createObjectMessage(event);

        // Tell the producer to send the message
        producer.send(message);
        // Clean up
        session.close();
        connection.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public String getBrokerUri() {
    return brokerUri;
}

public void setBrokerUri(String brokerUri) {
    this.brokerUri = brokerUri;
}

public String getQueueName() {
    return queueName;
}

public void setQueueName(String queueName) {
    this.queueName = queueName;
}

       public void close() {
       // TODO Auto-generated method stub

       }

        public boolean requiresLayout() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

# android - 定位安卓

> ID：11828233
> 
> 赞同：0
> 
> 时间：2012-08-06T12:23:41.167
> 
> 标签：android, screen-orientation, android-orientation

我想在我的应用程序上添加方向，但我需要它——>当我的手机在 PORTRAIT 样式上工作 A 活动时，当我将 PORTRAIT 样式更改为 LANDSCAPE 样式 A 活动停止并且 B 活动开始时。我该如何处理？谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:28:28.673

做这个

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    // Checks the orientation of the screen
    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
       //here call activity A
    } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
        Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
       //here call activity B

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:27:31.133

```
if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT)
{   

}
if (getResources().getConfiguration().orientation ==Configuration.ORIENTATION_LANDSCAPE)
{   

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T12:30:15.127

`Activity B`从下面的代码开始-

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    // Checks the orientation of the screen
    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        Intent a = new Intent(this, B.class);
        startActivity(a);
    } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
        //do nothing
    }
  } 
```

并且，在您`AndroidManifest.xml`文件的两个活动标签中。只需像下面这样声明

```
<activity android:name=".A"
      android:configChanges="orientation|keyboardHidden"
      android:label="@string/app_name"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T12:28:16.820

首先以这种方式检查方向：

```
Display display = ((WindowManager) getSystemService(WINDOW_SERVICE)).getDefaultDisplay();
int orientation = display.getOrientation(); 
```

并根据方向的值启动您想要的活动。

然后在活动中覆盖此方法：

```
public void onConfigurationChanged(Configuration newConfig) {

//start the other activity
} 
```

# common-lisp - 如何正确告诉 FORMAT 丢弃输入

> ID：11828235
> 
> 赞同：0
> 
> 时间：2012-08-06T12:23:43.520
> 
> 标签：common-lisp

我想要一种动态的方式来告诉`FORMAT`丢弃输出，具体取决于在实际调用之前设置的某个全局变量。我认为更改`t`为`nil`应该做交易，但我不满意，因为我将无法`FORMAT`在返回的字符串可能与实际返回值混淆的任何时候使用这些调用。

例如：

告诉 FORMAT 在 TERMINAL-IO 上输出（工作正常）

```
(let ((*the-var* t))
  (FORMAT *the-var* "some text")
  #|do some other stuff|#)
->"some-text"
->'return-value' 
```

告诉 FORMAT 丢弃输出（工作正常）

```
(let ((*the-var* nil))
  (FORMAT *the-var* "some text")
  #|do some other stuff|#)
->'return-value' 
```

告诉 FORMAT 丢弃输出（不能正常工作，因为 FORMAT 的返回字符串可能与可能的返回值混淆）

```
(let ((*the-var* nil)) ;no return value intended//nil expected
  #|do some stuff|#
  (FORMAT *the-var* "some text"))
->"some text" 
```

因此，我想知道是否有任何方法可以告诉 FORMAT 放弃输出而不必大惊小怪，例如将`*the-var*`变量设置为*“/dev/null”-stream*或在其周围放置条件子句？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T12:36:04.867

没有组件流的广播流是 Common Lisp 丢弃输出的方式。您可以使用[make-broadcast-stream](http://l1sp.org/cl/make-broadcast-stream)创建一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T12:36:14.330

`FORMAT`不*丢弃*输出。

如果您传递`NIL`到`FORMAT`作为输出方向，那么它将以字符串的形式返回输出，并且**不会**打印到流中。

不打印任何内容的最佳方法是不调用`FORMAT`.

`FORMAT`使用生成输出而不使用该输出进行显示几乎没有意义。只需检查您是否想要输出。

```
 (let ((output-p nil)) ;no return value intended//nil expected
    #|do some stuff|#
    (when output-p
      (FORMAT stream "some text"))) 
```

# php - 计算高负载下的展示次数

> ID：11828241
> 
> 赞同：0
> 
> 时间：2012-08-06T12:24:12.733
> 
> 标签：php, mysql, pdo, yii

编辑我的问题：

我想计算我网站上的展示次数（点击次数），我使用的是 PHP 5.3 和 Yii 框架。我正在尝试在 Yii 框架下运行应用程序。

我的应用每天获得约 60 万用户。

正如之前建议的那样，由于多个连接尝试更新展示次数，服务器可能会崩溃。

我的问题是：计算我网站的展示次数（点击次数、访问次数）的推荐方法是什么？

谢谢，丹尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:05:31.583

如果遇到硬件限制，更改（我假设您的意思是增加）MySQL 中的最大连接数将无济于事。[MySQL 文档](http://dev.mysql.com/doc/refman//5.5/en/too-many-connections.html)解决了这个问题。

我建议检查你的代码，看看你可以做什么样的重构来减少数据库调用，如果这不起作用，那么考虑升级硬件。尝试分析您的东西以确定哪些功能导致所有负载/连接可能是有意义的。

# jquery - 来自登录表单的 Ajax json 和参数

> ID：11828242
> 
> 赞同：0
> 
> 时间：2012-08-06T12:24:18.660
> 
> 标签：jquery, ajax, json, html, jquery-mobile

我的问题如下：

我正在为 jquery 移动应用程序创建登录名。我正在通过标准的 html 登录表单执行此操作。单击提交按钮后，我正在检查提供的用户名和密码是否正确。我通过使用 Ajax 和 json 来检查这一点。现在问题如下，如果我执行以下操作：

```
function authenticate(userName, password1) {

                    $.ajax
                    ({
                        type: "POST",
                        //the url where you want to sent the userName and password to
                        url: "http://notgiven",
                        dataType: 'json',
                        async: false,
                        //json object to sent to the authentication url
                        //data: {"username": "' + userName + '", "password" : "' + password + '"},
                     data: { username: "user1", password: "test1" },,
                        success: function (data) {
                            //do any process for successful authentication here
                            alert('Login status: ' + data.status);
                        }
                     })
                }; 
```

那我就成功了

但是，如果我想从我的字段中获取参数并执行此操作：

```
$(document).ready(function() {
                                  //event handler for submit button
                                  $("#btnSubmit").click(function () {
                                                        //collect userName and password entered by users
                                                        var userName = $("#username").val();
                                                        var password = $("#password").val();

                                                        });

                });

                function authenticate(userName, password1) {

                    $.ajax
                    ({
                        type: "POST",
                        //the url where you want to sent the userName and password to
                        url: "http://notgiven",
                        dataType: 'json',
                        async: false,
                        //json object to sent to the authentication url
                        //data: '{"username": "' + userName + '", "password" : "' + password + '"}',
                      data: '{username: userName, password: password1 }',
                        success: function (data) {
                            //do any process for successful authentication here
                            alert('Login status: ' + data.status);
                        }
                     })
                }; 
```

然后我失败了……有人知道为什么吗？？？

**答案：****答案：******答案：****答案：* ***

 **我放了：authenticate(userName,password); 正如图马思特所说，进入点击功能。这样做是因为否则点击时的用户名和密码数据超出了安德鲁所说的范围。

我也把 return false; 在 .click 函数上，这样我就可以多次单击该按钮（并且仍然获得函数身份验证的结果）。

THNX

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:28:50.277

你不是`authenticate(..)`从`.click(..)`事件中调用的。

```
$("#btnSubmit").click(function () {
    var userName = $("#username").val();
    var password = $("#password").val();
    authenticate(userName,password);
); 
```

里面`authenticate(..)`应该是：

```
data: {username: userName, password: password1}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:36:44.910

单击事件后，用户名和密码是否超出范围。或者我的关闭错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:30:50.027

您没有使用用户名和密码的值：

```
data: '{username: userName, password: password1 }', 
```

将其更改为：

```
data: {'username': userName, 'password': password1 }, 
```**

# iphone - 更改 heightOfPrevious UITableViewCell

> ID：11828244
> 
> 赞同：0
> 
> 时间：2012-08-06T12:24:26.363
> 
> 标签：iphone, objective-c, ipad, uitableview

无论如何我可以在设置当前单元格的高度时更改以前的 UITableViewCell 的高度`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`吗？

在 a 中有两行`UITableView`。在第一行时，它将设置默认高度。在第二行时，我想更改第一行的高度。这可能吗？如果有怎么办？

谢谢，
巴拉蒂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:50:06.723

尝试使用布尔检查是否满足要求。你可以这样做：

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath  { 

    if (indexPath.row == 0 && !secondRowIsSynced) {
        return otherHeight ;
    }
    else {
        return defaultHeight;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:37:47.720

婆罗地语：

您必须`didSelectRowAtIndexPath`以`UITableView`.

您应该检查是否选择了第二行，然后重新加载所有表行，以便再次调用所有`tableview delegate`和方法。`datasource`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:20:49.333

我认为您误解`tableView:heightForRowAtIndexPath:`了多次调用（表中的每一行一次）。

如果您的行有不同的高度，那么您需要确定您所在的行以及它应该具有的高度。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    CGFloat height;

    if (0 == indexPath.row) {
        // This is the first row 
        height = // what ever you want
    } else if (1 == indexPath.row) {
        // This is the second row 
        height = // what ever you want
    }

    return height;
} 
```

如果您后来决定一行需要不同的高度，那么仍然是这种方法需要计算每行要使用的正确高度。您可以强制调用它而无需像这样重新加载 tableView

```
[tableView beginUpdates];
[tableView endUpdates]; 
```

# android - Android：从静态 Handler 类调用非静态方法

> ID：11828246
> 
> 赞同：9
> 
> 时间：2012-08-06T12:24:28.037
> 
> 标签：android, handler, android-actionbar

鉴于此代码：

```
public class MainActivity extends FragmentActivity implements ActionBar.TabListener {

public static final int MESSAGE_NOT_CONNECTED = 1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_layout);
}

// -------------------------------------------------
public final void setStatus(int Rid) {
    final ActionBar actionBar = getActionBar();
    actionBar.setSubtitle(Rid);
}

// -------------------------------------------------
static Handler mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        switch (msg.what) {
        case MESSAGE_NOT_CONNECTED:
            setStatus(R.string.title_not_connected);
            break;
        }
    }
}
} 
```

我收到编译错误：无法对非静态方法 setStatus(int) 进行静态引用...

这是有道理的，因为 setStatus() 中的 getActionBar() 是一个非静态方法。

由于警告，我将 Handler 类设为静态：此 Handler 类应该是静态的，否则可能会发生泄漏。

问题：如何从静态处理程序中正确访问 setStatus() 方法？

编辑：新的处理程序代码就是答案。

```
static class hHandler extends Handler {
    private final WeakReference<MainActivity> mTarget;
    hHandler(MainActivity target) {
        mTarget = new WeakReference<MainActivity>(target);
    }

    @Override
    public void handleMessage(Message msg) {
        MainActivity target = mTarget.get();
        If(target == null) {
             return;
        }
        switch (msg.what) {
        case MESSAGE_NOT_CONNECTED:
            target.setStatus(R.string.title_not_connected);
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T16:38:12.083

尝试使用 a `WeakReference`，如[**本文所述**](http://www.androiddesignpatterns.com/2013/01/inner-class-handler-memory-leak.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:01:42.577

由于您现在使用的是`WeakReference`,`mTarget.get()`可能会返回`null`. 在您编辑的代码中，您没有`target`在`null`执行`target.setStatus(R.string.title_not_connected)`. 因此，`NullPointerException`如果弱引用对象已被 GC 处理，这可能会抛出一个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T01:45:40.493

在我的活动的 onDestroy 方法中，我调用：

```
this.myHandler.removeCallbacksAndMessages(null); 
```

这并没有消除“这个处理程序类应该是静态的，否则可能会发生泄漏”的警告，但我相信它会破坏消息从而阻止泄漏。我的处理程序类是我的活动的内部非静态类。我的活动有一个 MyHandler myHandler 的实例。

当我这样做时，不会调用处理程序的 handleMessage 方法，我认为这意味着包含处理程序的消息（其中包含对活动的引用）已被销毁。我没有使用任何泄漏测试工具对其进行测试，因此我愿意发表评论。这是我复制这个想法的地方：[http](http://www.androiddesignpatterns.com/2013/01/inner-class-handler-memory-leak.html) ://www.androiddesignpatterns.com/2013/01/inner-class-handler-memory-leak.html 回答者：Cyril 2013 年 1 月 15 日上午 7:50

# c++ - 我应该使用哪个智能指针？

> ID：11828254
> 
> 赞同：3
> 
> 时间：2012-08-06T12:24:50.623
> 
> 标签：c++

我正在处理一个由多种不同类型（属性、父级、子级等）组成的模型。每种类型都与来自 ac api 的一组函数相关联。例如：

```
Type "Properties":
  char* getName(PropertiesHandle);
  char* getDescription(PropertiesHandle);

Type "Parent"
  PropertiesHandle getProperties(ParentHandle);
  ChildHanlde getFirstChild(ParentHandle);

Type "Child"
  PropertiesHandle getProperties(ChildHandle);
  ParentHanlde getParent(ChildHandle);
  ChildHandle getNextChild(ChildHandle); 
```

我又为这个 c api 库创建了一组 C++ 接口，如下所示：

```
class IProperties
{
public:
  virtual std::string getName() = 0;
  virtual std::string getDescription() = 0;
};

class IParent
{
public:
  virtual std::shared_ptr<IProperties> getProperties() = 0;
  virtual std::shared_ptr<IChild> getFirstChild() = 0;
};

class IChild
{
public:
  virtual std::shared_ptr<IProperties> getProperties() = 0;
  virtual std::shared_ptr<IParent> getParent() = 0;
  virtual std::shared_ptr<IChild> getNextChild() = 0;
}; 
```

然后我通过类属性、父类和子类实现这些接口。

因此 Child 实例将通过其构造函数获取其特定的 ChildHandle ，其 getParent 函数将如下所示：

```
std::shared_ptr<IParent> getParent()
{
    // get the parent handle and wrap it in a Parent object
    return std::shared_ptr<IParent>(new Parent(_c_api->getParent(_handle)));
} 
```

在您看来，我在这里返回一个 shared_ptr 是否合理。我不能使用 std::unique_ptr 因为 Google Mock 要求模拟方法的参数和返回值是可复制的。我通过 Google Mock 在我的测试中模拟这些接口。

我还在考虑将来如何优化事情，这可能会出现循环引用的可能性。如果使用缓存来避免对 C api 的多次调用（例如，子不需要多次建立其父级）并结合使用 Child 构造函数获取其父级，则可能会导致这种情况。这将需要使用weak_ptrs，这会改变接口和我的很多代码......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:39:52.693

返回 a 没有任何问题`shared_ptr`，但我会尽力说服您这可能不是最佳选择。

通过使用智能指针，您可以获得安全优势，但您的 API 用户失去了使用最适合他们需要的智能指针类型的灵活性，而必须始终使用`shared_ptr`.

这还取决于您对安全性的重视程度高于灵活性，但我个人会考虑返回一个裸指针并允许用户使用他想要的智能指针。当然，如果`shared_ptr`出于某种原因需要我使用，我会的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T13:03:39.170

关键问题是：返回指针的*语义是什么？*

*   如果返回的父/子/属性对象的生命周期*独立*于返回的（可能在某种意义上，拥有）对象，则返回是合理的`shared_ptr`：这表明调用者和被调用者具有*相同的权利*来决定对象的生命周期

    ```
    std::shared_ptr<IChild> child = parent->getFirstChild();
    // now I can keep child around ... if parent is destroyed, one
    // orphaned subtree is magically kept around. Is this desirable? 
    ```

*   如果返回的对象的生命周期*取决于*被调用者自己的生命周期，则：

    *   `shared_ptr`会*错误地*暗示调用者将返回的对象的生命周期延长到被调用者的生命周期之外是有意义的
    *   `unique_ptr`会*错误地*建议所有权转移
    *   原始指针没有*明确*做出任何误导性的承诺，但也没有给出关于正确使用的任何提示

因此，如果调用者只是获得对对象内部状态的工作引用，而没有所有权转移或对象生命周期的延长，则不建议使用*任何*智能指针。

考虑只返回一个参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:09:10.413

`shared_ptr`很好，但它确实为最终用户提供了一些限制，例如 C++11 支持。原始指针或允许他们定制智能指针的特征可以为最终用户提供更大的灵活性。

不管指针如何，我建议小心实现引入的语义。在当前的实现中，为每个访问器调用实例化一个新的包装，等价检查将失败。考虑以下代码：

```
auto child = parent->getFirstChild();
if ( parent == child->getParent() ) // Will be false, as they point to different
                                    // instantiations of Parent.
  ...

if ( child->getParent() == child->getParent() ) // False for the same reason.
  ...

auto sibling = child->getNextChild();
if ( parent == sibling->getParent() ) // Also false for the same reason.
  ... 
```

此外，在使用 时`std::shared_ptr`，值得考虑使用`std::make_shared`来减少分配时发生的一些开销。

# c# - 修改深埋在复杂对象中的类 - c#

> ID：11828255
> 
> 赞同：0
> 
> 时间：2012-08-06T12:24:51.570
> 
> 标签：c#, derived-class

我有一个希望修改其属性名称的类。

然而，这个类被埋在一个更大的类中大约 6 个类（也是所有自定义类）。

我的问题是我无法触及任何现有的课程。

我能想到的唯一解决方案是从根类派生，将它放在一个新的命名空间中，然后在根类和我想要修改的类之间的每个阶段创建新类。

希望这对我试图解释的内容有意义。

上述方法是唯一的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:06:26.237

因为您已经声明要扩展的类是一个`partial`类，所以我将建议您也将其扩展。现在您可以轻松地添加新属性，正如您已经建议的那样，并通过**在同一个命名空间中添加一个具有相同名称**的类来扩展该类。

在下面的示例中，两个类都被命名`A`并且两个类都在同一个类中`namespace`——这是构建`partial`类的两个关键。

```
public partial class A
{
    public string PropertyA { get; set; }

    public string PropertyB { get; set; }
}

public partial class A
{
    public string PropertyC
    {
        get
        {
            var val = this.PropertyA;
            // some more functionality maybe...
            return val;
        }
        set
        {
            // some more functionality maybe...
            this.PropertyA = value;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:34:02.417

您可以使用新名称创建属性，但使用 [Obsolete] 属性保留旧属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:35:48.470

也许作为妥协，您可以使用新名称创建其他属性，然后现有代码使用旧属性。然后，您可以另外将旧属性标记为已过时。

```
class Example
{
    int oldField;

    [Obsolete("This is obsolete")]
    public int OldField
    {
        get
        {
            return this.oldField;
        }
        set
        {
            this.oldField = value;
        }
    }

    public int NewField
    {
        get
        {
            return this.oldField;
        }
        set
        {
            this.oldField = value;
        }
    }
} 
```

# hibernate - 带有 Hibernate 和 JBoss 5.1 的 GWT Web 应用程序

> ID：11828259
> 
> 赞同：0
> 
> 时间：2012-08-06T12:25:08.607
> 
> 标签：hibernate, gwt, jpa, jboss, persistence

我有一个 GWT Web 应用程序，它使用 Hibernate for JPA 和 JBoss 5.1 for server。

我在 JBoss Server 中部署 WAR 文件时没有任何问题。一切正常。但是当我尝试使用 GWT Eclipse 插件来避免 GWT 编译时，Hibernate 停止工作。我收到日志消息“没有名为 xptoPU 的 EntityManager 的持久性提供程序”。

此时，我的课程路径中有 JBoss 5.1。然后我尝试删除将 Hibernate JAR 放在我的 WEB-INF/lib 文件夹中。这也不起作用，但日志消息不同。现在告诉我 EntityManager 无法加载持久性单元。

顺便说一句，当我使用 GlassFish 和 EclipseLink 时，我做这些事情没有任何问题......

有什么办法可以让这个工作？我真的需要避免 GWT 编译时间：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:11:52.007

不要将 jboss 用于开发 servlet 容器。它的方式来减慢。您应该使用 gwt 开发模式使用的码头。这需要大约 2 秒才能启动。由于所有的依赖关系，让开发模式与 jboss 一起工作几乎是不可能的。

此外，您只需在客户端包中更改代码时进行 gwt 编译。确保您的项目设置为自动构建，然后将您的项目启动到 servlet 容器中。也可以使用 eclipse 插件 run jetty run。它使您可以直接单击鼠标右键进行部署，而无需构建战争。这是非常快的。

如果你调整你的 gwt 编译器，你应该能够得到大约 25 到 60 秒的补偿时间。这是相当快的 IMO，因为您可以处理两件事，并在它们之间交替。

当您准备好在生产中进行冒烟测试时，卷起您的 EAR 并将其部署到您的团队正在使用的开发服务器中。只要您正确配置您的 db 资源 xml 文件并将其存储在正确的位置（通常在根包中；在资源包中），它应该可以正常工作。

我知道这并不完全是您要寻找的东西，而是我们几乎所有人都在做的事情。只需在 Google 上搜索即可加快 gwt 编译时间。

# vim - 如何退出 Vim 编辑器？

> ID：11828270
> 
> 赞同：4589
> 
> 时间：2012-08-06T12:25:47.927
> 
> 标签：vim, vi

我被困住了，无法逃脱。它说：

```
"type :quit<Enter> to quit VIM" 
```

但是当我键入它时，它只会出现在对象主体中。

* * *

## 回答 #1

> 赞同：5714
> 
> 时间：2012-08-06T12:46:16.327

按`Esc`键进入“普通模式”。然后您可以键入`:`以进入“命令行模式”。冒号 ( `:`) 将出现在屏幕底部，您可以键入以下命令之一。要执行命令，请按`Enter`键。

*   `:q` 退出（的缩写`:quit`）
*   `:q!`不保存就退出（缩写`:quit!`）
*   `:wq`写和退出
*   `:wq!`即使文件只有读取权限，也要写入和退出（如果文件没有写入权限：强制写入）
*   `:x` 写入和退出（类似于`:wq`，但仅在有更改时写入）
*   `:exit`写入和退出（同`:x`）
*   `:qa`全部退出（的缩写`:quitall`）
*   `:cq`退出而不保存并使 Vim 返回非零错误（即退出错误）

您也可以通过键入`ZZ`保存并退出（与 相同`:x`）或`ZQ`仅退出（与 相同`:q!`）直接从“普通模式”退出 Vim。（请注意，大小写在这里很重要。`ZZ`并不`zz`意味着同样的事情。）

Vim 有广泛的帮助 - 您可以使用`:help`命令访问 - 您可以在其中找到所有问题的答案和初学者教程。

* * *

## 回答 #2

> 赞同：337
> 
> 时间：2017-05-26T12:24:30.957

图片值一千个 Unix 命令和选项：

[![在此处输入图像描述](../Images/c7fd21ee8beaf7ca8c4ba08fe7bd947d.png)](https://i.stack.imgur.com/BN6vl.png)

我每学期都把这个画给我的学生，之后他们似乎掌握了 vi。

Vi 是一个只有三个状态的[有限状态机。](https://en.wikipedia.org/wiki/Finite-state_machine)

启动后，vi 进入 COMMAND 模式，您可以在其中*盲目地*键入简短的、少量字符的命令。你知道你在做什么；这不适合业余爱好者。

当您想实际编辑文本时，您应该使用一些单字符命令进入 INSERT 模式：

*   i：在光标处进入 INSERT
*   I：在行首进入 INSERT 模式
*   a：在光标*后*追加
*   A：在行尾追加
*   o：在当前行下方新*开一行*
*   O：在当前行的地方*开*一个新行

现在，回答问题：退出。

您可以从 EX 模式退出 vi：

*   q：如果您没有进行任何修改，或事先保存它们
*   q!：忽略任何修改并*退出*
*   wq：保存并退出
*   x：这等于 wq

`w`并`x`接受文件名参数。如果您以文件名启动 vi，则无需在此处再次提供。

最后，最重要的一点：如何进入 EX 模式？

EX 模式适用于您可以在屏幕底部看到输入的长命令。在 COMMAND 模式下，您按下冒号, `:`，冒号将出现在底线，您可以在此处键入上述命令。

在 INSERT 模式下，您需要按 ESC，即 Escape 按钮，进入 COMMAND 模式，然后： 进入 EX 模式。

如果您不确定，请按 ESC，这将使您进入命令模式。

稳健的方法是 ESC-:-x-Enter 保存文件并退出。

* * *

## 回答 #3

> 赞同：193
> 
> 时间：2015-06-08T13:34:41.397

在输入命令之前，请**按`Esc`键**。输入后，点击`Return`确认。

`Esc`完成当前命令并将 Vim 切换到[正常模式](http://vimdoc.sourceforge.net/htmldoc/intro.html#Normal)。现在，如果您按`:`，`:`将出现在屏幕*底部*。这确认您实际上是在键入命令而不是在编辑文件。

大多数命令都有缩写，可选部分括在括号中：`c[ommand]`.

标有“*”的命令仅适用于 Vim（未在 Vi 中实现）。

**安全退出（如果有未保存的更改则失败）：**

*   `:q[uit]` 退出当前[窗口](http://vimdoc.sourceforge.net/htmldoc/windows.html#window)。如果这是最后一个窗口，请退出 Vim。[当在当前缓冲区](http://vimdoc.sourceforge.net/htmldoc/windows.html#buffers)中进行更改时，这将失败。
*   `:qa[ll]`* 退出所有窗口和 Vim，除非有一些缓冲区已被更改。

**提示退出（如果有未保存的更改则提示）**

*   `:conf[irm] q[uit]`* 退出，但是当有一些缓冲区被改变时给出提示。
*   `:conf[irm] xa[ll]`* 写入所有改变的缓冲区并退出 Vim。当某些缓冲区无法写入时，会出现提示。

**写入（保存）更改并退出：**

*   `:wq`写入当前文件（即使它没有更改）并退出。当文件为只读文件或缓冲区没有名称时，写入失败。`:wqa[ll]`* 适用于所有窗口。
*   `:wq!`相同，但甚至写入只读文件。`:wqa[ll]!`* 适用于所有窗口。
*   `:x[it]`, `ZZ`（有[细节](http://vimdoc.sourceforge.net/htmldoc/editing.html#ZZ)）。*仅当文件被更改*并退出时才写入文件， `:xa[ll]`* 适用于所有窗口。

**放弃更改并退出：**

*   `:q[uit]!` `ZQ`* 不写就退出，可见缓冲区发生变化时也是如此。有更改的隐藏缓冲区时不退出。
*   `:qa[ll]!`*, `:quita[ll][!]`* 退出 Vim，对缓冲区的所有更改（包括隐藏）都将丢失。

**按`Return`确认命令。**

这个答案没有引用所有 Vim 写入和退出命令和参数。事实上，它们在[Vim 文档](http://vimdoc.sourceforge.net/htmldoc/editing.html#:q)中被引用。

Vim 有大量的内置帮助，键入`Esc``:help``Return`打开它。

[这个答案的灵感来自[另一个](https://stackoverflow.com/a/11828573/2790048)，最初由@dirvine 创作并由其他 SO 用户编辑。我已经包含了来自 Vim 参考、SO 评论和其他一些来源的更多信息。Vi 和 Vim 的差异也反映出来。]

* * *

## 回答 #4

> 赞同：92
> 
> 时间：2014-01-28T10:59:56.423

如果你想退出而不保存在 Vim 中*并*让 Vim 返回一个非零的退出代码，你可以使用`:cq`.

我一直都在使用它，因为我懒得换小指`!`。我经常将不需要保存在文件中的东西通过管道传输到 Vim。我们还有一个奇怪的 SVN 包装器在工作，它必须以非零值退出才能中止签入。

* * *

## 回答 #5

> 赞同：70
> 
> 时间：2015-06-24T13:38:32.313

这是终极的、严肃的、硬核的退出命令，如果你想退出 Vim 的最坏情况，不知道你做了什么，你也不关心你打开的文件会发生什么。

`Ctrl`- `c``Enter``Ctrl`-`\``Ctrl-n``Enter``:qa!``Enter`

这会让你大部分时间都出去。最多。

你可能会天真地认为，你可以敲`Esc`几下然后再做`:qa!`。哦，你怎么会弄错的。

看看这些点击`Esc`不够的有趣案例：

*   `i``Ctrl`- `o``vg`（您进入插入模式，然后是可视模式，然后是操作员挂起模式）

*   `Qappend``Enter`

*   `i``Ctrl`- `o``gQ``Ctrl`- `r``=``Ctrl`- `k`（感谢 porges 提供此案例）

*   `i``Ctrl`- `o``gQ``Ctrl`-`r``=inputdialog('foo','bar')``Enter`

*   `:set insertmode`（这是一种情况`Ctrl`-`\``Ctrl-n`将您返回到正常模式）

* * *

## 回答 #6

> 赞同：46
> 
> 时间：2014-07-18T13:48:59.740

如果您需要以**简单模式**退出 Vim （使用选项时），您可以通过按+`-y`进入正常 Vim 模式，然后任何正常退出选项都将起作用。`Ctrl``L`

* * *

## 回答 #7

> 赞同：36
> 
> 时间：2017-05-24T02:46:27.060

Vim 具有三种操作模式：输入模式、命令模式和 Ex 模式。

**输入模式**- 您键入的所有内容，所有击键都会在屏幕上回显。

**命令模式或转义模式**- 您在此模式下键入的所有内容都被解释为命令。

**Ex 模式**- 这是另一个编辑器，例如。它是一个行编辑器。它适用于每行或基于一系列行。在此模式下，`:`屏幕底部会出现一个。这是前任编辑。

要退出 Vim，您可以在 ex 模式或命令模式下退出。当你处于输入模式时，你不能退出 Vim。

**退出 ex 模式**

1.  您需要确保您处于命令模式。为此，只需按下`Esc`键。

2.  按`:`键进入 ex 模式

3.  在 ex 模式下使用以下任意组合退出：

    `:q`- 退出 `:q!`- 不保存 `:wq`退出 - 保存并退出或写入并退出 `:wq!`- 与 wq 相同，但在文件权限为只读的情况下强制写入 `:x`- 写入并退出 `:qa`- 全部退出。当打开多个文件时很有用，例如：`vim abc.txt xyz.txt`

**退出命令模式**

1.  按退出键。如果您处于命令模式，您可能已经这样做了。

2.  按大写 ZZ ( `shift zz`) - 保存并退出

3.  按大写 ZQ ( `shift zq`) - 退出而不保存。

* * *

## 回答 #8

> 赞同：31
> 
> 时间：2014-11-28T15:25:00.503

点击`ESC`（或我的电脑上的`cmd`+ `C`）后，您必须点击`:`才能显示命令提示符。然后，您可以输入`quit`.

您可能会发现机器不允许您退出，因为您的信息尚未保存。如果您仍然想退出，请`!`在退出后直接输入（即`:quit!`）。

* * *

## 回答 #9

> 赞同：23
> 
> 时间：2015-02-05T11:30:11.827

我通过在 Windows 上安装 Git 客户端获得了 Vim。`:q`不会为我退出 Vim。`:exit`然而...

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2018-02-12T23:41:09.190

带有数字的`q`命令关闭该位置的给定拆分。

`:q<split position>`或`:<split position>q`将关闭该位置的拆分。

假设您的 Vim 窗口布局如下：

```
-------------------------------------------------
|               |               |               |
-------------------------------------------------
|               |               |               |
|               |               |               |
|    Split 1    |    Split 2    |     Split 3   |
|               |               |               |
------------------------------------------------- 
```

如果您运行该`q1`命令，它将关闭第一个拆分。`q2`将关闭第二次拆分，反之亦然。

退出命令中拆分位置的顺序无关紧要。`:2q`或`:q2`将关闭第二个拆分。

如果您传递给命令的拆分位置大于当前拆分的数量，它将简单地关闭最后一个拆分。

例如，如果您`q100`在上面只有三个拆分的窗口设置上运行，它将关闭最后一个拆分（拆分 3）。

[这个问题已经在[这里](https://stackoverflow.com/questions/48757147/what-does-q1-do-in-vim/48757213#48757213)问过了。]

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2021-07-29T18:55:44.333

一种有保证的方法是杀死运行 vim 的端口

```
! kill - 9 $(ps | grep vim | cut -d " " -f 1) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-12-30T07:36:26.510

从四种模式中的任何一种：*插入*、*视觉*、*命令*或*命令行*（ex）模式，如果更改，请按此保存，然后退出 vim：

`Alt-Z` `Z`

即按：`alt + shift + z`则`shift + z`

为什么会这样：从插入模式和显然其他模式，您可以退出到命令模式并通过按住 Alt 和任何命令字符的组合来执行命令。第二个 Alt+Shift+Z 被忽略，因此您必须放开 Alt 但保留 Shift。锻炼肌肉记忆！:-)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-02-28T08:42:20.357

:q 相当 :wq 保存和相当 :q！不服就戒

# local - 在本地使用 Responsivepx 时遇到问题

> ID：11828273
> 
> 赞同：1
> 
> 时间：2012-08-06T12:26:05.630
> 
> 标签：local, responsive-design

我正在尝试使用[responsivepx](http://responsivepx.com)来确定我在本地进行的响应式设计的断点。我只是将本地 url 放到指定区域并尝试打开，但它不起作用，我不知道为什么。任何帮助，将不胜感激。它在外部网址上运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:25:50.010

在本地工作很困难，因为 reponsivepx 等工具依赖于访问公开可用的 URL。克服这一问题的一些选择包括：

1.  [创建您自己的 iframe 页面](http://bit.ly/responsivesquiz)并在源代码中包含本地 url。使用它可以设置所有需要的断点。
2.  [使用响应式设计测试](http://responsive.victorcoulon.fr/)- 提供对 ipad 和 iphone 纵向和横向模式的访问
3.  [Mediaquery Bookmarklet](http://seesparkbox.com/foundry/media_query_bookmarklet) - 准确显示当前处于活动状态的媒体查询和屏幕分辨率

# php - 计划发布 - 仅在未来的某个时间或任何时间显示某些内容或重复

> ID：11828274
> 
> 赞同：0
> 
> 时间：2012-08-06T12:26:20.040
> 
> 标签：php, mysql

我试图仅在一段时间或几天内显示一些内容我在数据库中有开始时间、开始日期、结束时间和结束日期，这样当从数据库中获取数据时，应该检查这个时间和日期并相应地显示内容

我尝试过的代码

```
$startDateTime = strtotime($result['StartDate']." ".$result['StartTime']);
$endDateTime = strtotime($result['EndDate']." ".$result['EndTime']);
$now = time();

echo "START : ".$startDateTime;
echo "<br/>END : ".$endDateTime;
echo "<br/>CURRENT : ".$now;
if($now >= $startDateTime && $now <= $endDateTime){
echo $result['content'];

} 
```

但它每次都无法显示内容

请帮我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:34:05.113

而不是使用 time() 函数 - 尝试将 '$now' 创建为 strtotime("now")。

此外，作为调试步骤，它可能会帮助您回显比较以查看它们是否按照您预期的方式进行评估。

实际上-我只是按原样尝试了您的代码...除了我对开始和结束日期和时间进行了硬编码值。它起作用了，所以切换到使用 strtotime("now") 可能不会有什么不同。

打印出来的值是什么？你没有告诉我们。

所以 VoronoiPotato 可能是正确的......您为 StartDate/StartTime 和 EndDate/EndTime 存储的值一定有问题。

如果您像这样更改程序（以添加更多调试），程序的输出是什么：

```
$startDateTime = $result['StartDate'] . " " . $result['StartTime'];
$endDateTime = $result['EndDate'] . " " . $result['EndTime'];
$now = time();

echo "START : " . $startDateTime."<br />\n";
echo "END : " . $endDateTime . "<br />\n";

$startDateTime = strtotime($startDateTime);
$endDateTime = strtotime($endDateTime);

echo "Start as time: " . $startDateTime . "<br />\n";
echo "End as time: " . $endDateTime . "<br />\n";

echo "CURRENT : " . $now . "\n";

if (($now >= $startDateTime) && ($now <= $endDateTime)) {
    echo $result['content'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:34:15.003

输出你的 $result['StartDate'] 的列表。" ".$result['StartTime'] 我想你会发现它可能会遗漏前导 0 或其他东西，这会给它作为时间的转换带来麻烦。

# vb.net - vb.net颜色单元格中的第一个字符

> ID：11828281
> 
> 赞同：1
> 
> 时间：2012-08-06T12:27:02.240
> 
> 标签：vb.net, datagridview, colors, char

在 VB .NET 中，我根据某些计算将 3 个字符添加到 DataGridView 单元格中。

它们是等级变化箭头并且工作正常，但我希望向上箭头为绿色，向下箭头为红色。

```
Dim strup As String = "▲"
Dim strdown As String = "▼"
Dim strsame As String = "▬" 
```

因此，在单元格中，负 3 的变化看起来像 ▼3，加 3 看起来像 ▲3，其中文本和符号是不同的颜色。

如何更改 DataGridView 单元格中第一个字符的颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:09:01.983

如果您在单元格中除了有问题的角色之外还有其他任何内容（您需要进行某种形式的自定义绘画），则没有简单的方法可以做到这一点。

如果您只有这些字符，那么使用 CellFormatting 事件很容易：

```
void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    e.CellStyle.Font = new Font("Arial Unicode MS", 12);
    if (dataGridView1.Columns[e.ColumnIndex].Name == "CorrectColumnName")
    {
        if (e.Value == "▲")
            e.CellStyle.ForeColor = Color.Green;
        else if (e.Value == "▼")
            e.CellStyle.ForeColor = Color.Red;
        else
            e.CellStyle.ForeColor = Color.Black;
    }
} 
```

* * *

如果您确实想要在同一个单元格中使用不同的颜色，则需要类似以下代码（这将处理 CellPainting 事件）：

```
void dataGridView1_CellPainting(object sender, DataGridViewCellPaintingEventArgs e)
{
    if (e.ColumnIndex == -1 || e.RowIndex == -1)
        return;

    if (dataGridView1.Columns[e.ColumnIndex].Name == "CorrectColumnName")
    {
        e.Paint(e.CellBounds, DataGridViewPaintParts.All & ~DataGridViewPaintParts.ContentForeground);

        if (e.FormattedValue.ToString().StartsWith("▲", StringComparison.InvariantCulture))
        {
            RenderCellText(Color.Green, e);
        }
        else if (e.FormattedValue == "▼")
        {
            RenderCellText(Color.Red, e);
        }
        else
            RenderCellText(SystemColors.WindowText, e);

        e.Handled = true;
    }
}

private void RenderCellText(Color color, DataGridViewCellPaintingEventArgs e)
{
    string text = e.FormattedValue.ToString();
    string beginning = text.Substring(0, 1);
    string end = text.Substring(1);
    Point topLeft = new Point(e.CellBounds.X, e.CellBounds.Y + (e.CellBounds.Height / 4));

    TextRenderer.DrawText(e.Graphics, beginning, this.dataGridView1.Font, topLeft, color);
    Size s = TextRenderer.MeasureText(beginning, this.dataGridView1.Font);

    Point p = new Point(topLeft.X + s.Width, topLeft.Y);
    TextRenderer.DrawText(e.Graphics, end, this.dataGridView1.Font, p, SystemColors.WindowText);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:34:33.260

我曾经做过类似的事情，最后把这些字符放在自己的列中。

# tridion - 在 tridion 中上传大尺寸多媒体组件时出错

> ID：11828292
> 
> 赞同：0
> 
> 时间：2012-08-06T12:28:11.340
> 
> 标签：tridion

我正在尝试以 tridion 上传 400 Mb 的视频 (.flv) 文件，但出现错误“无法识别上传状态数据”

我尝试添加以下代码

```
<security> 
   <requestFiltering> 
     <requestLimits maxAllowedContentLength="1073741824"/> 
   </requestFiltering> 
 </security> 
```

在路径 \Tridion\web 上的 web.config 中

我在错误的路径上更新吗？请建议？

谢谢米纳克希

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:22:58.227

[这看起来像是将大型二进制文件上传到 SDL Tridion Multimedia Components](https://stackoverflow.com/questions/11779054/error-uploading-large-binaries-into-sdl-tridion-multimedia-components)时出错的副本

您是否阅读了该答案，它描述了在 c:\programfiles(x86)\Tridion\web\WebUi\WebRoot\web.config 中更改这些设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T10:05:51.920

在 System.Web 部分添加标签

```
<httpRuntime maxRequestLength="1073741824"/> 
```

希望这能解决您的问题。

# magento - 如何解决magento产品详细信息页面中的语法错误？

> ID：11828298
> 
> 赞同：0
> 
> 时间：2012-08-06T12:28:27.587
> 
> 标签：magento

我仅在 magento 的产品详细信息页面中有错误

```
SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1 
```

如果我设置原始默认主题它不会给我任何错误，那么可能是什么问题？

```
There has been an error processing your request

SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 1

Trace:
    #0 C:\wamp\www\dennymagic.com\store\lib\Varien\Db\Statement\Pdo\Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
    #1 C:\wamp\www\dennymagic.com\store\lib\Zend\Db\Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
   #2 C:\wamp\www\dennymagic.com\store\lib\Zend\Db\Adapter\Abstract.php(479): Zend_Db_Statement->execute(Array)
     #3 C:\wamp\www\dennymagic.com\store\lib\Zend\Db\Adapter\Pdo\Abstract.php(238): Zend_Db_Adapter_Abstract->query('SELECT `mage_ca...', Array)
    #4 C:\wamp\www\dennymagic.com\store\lib\Varien\Db\Adapter\Pdo\Mysql.php(419): Zend_Db_Adapter_Pdo_Abstract->query('SELECT `mage_ca...', Array)
     #5 C:\wamp\www\dennymagic.com\store\lib\Zend\Db\Adapter\Abstract.php(753): Varien_Db_Adapter_Pdo_Mysql->query(Object(Varien_Db_Select), Array)
       #6 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Eav\Model\Entity\Abstract.php(943): Zend_Db_Adapter_Abstract->fetchRow(Object(Varien_Db_Select))
     #7 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Catalog\Model\Resource\Abstract.php(698): Mage_Eav_Model_Entity_Abstract->load(Object(Mage_Catalog_Model_Category), Object(Mage_Catalog_Model_Category), NULL)
     #8 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Core\Model\Abstract.php(225): Mage_Catalog_Model_Resource_Abstract->load(Object(Mage_Catalog_Model_Category), Object(Mage_Catalog_Model_Category), NULL)
       #9 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Catalog\Block\Product\List.php(80): Mage_Core_Model_Abstract->load(Object(Mage_Catalog_Model_Category))
       #10 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Catalog\Block\Product\List.php(141): Mage_Catalog_Block_Product_List->_getProductCollection()
      #11 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Core\Block\Abstract.php(862): Mage_Catalog_Block_Product_List->_beforeToHtml()
      #12 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Core\Block\Text\List.php(43): Mage_Core_Block_Abstract->toHtml()
      #13 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Core\Block\Abstract.php(863): Mage_Core_Block_Text_List->_toHtml()
      #14 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Core\Block\Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
        #15 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Core\Block\Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('content', true)
      #16 C:\wamp\www\dennymagic.com\store\app\design\frontend\aaaa\bbb\template\page\2columns-right.phtml(36): Mage_Core_Block_Abstract->getChildHtml('content')
         #17 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Core\Block\Template.php(241): include('C:\wamp\www\den...')
        #18 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Core\Block\Template.php(272): Mage_Core_Block_Template->fetchView('frontend\aaa...')
       #19 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Core\Block\Template.php(286): Mage_Core_Block_Template->renderView()
       #20 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Core\Block\Abstract.php(863): Mage_Core_Block_Template->_toHtml()
     #21 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Core\Model\Layout.php(555): Mage_Core_Block_Abstract->toHtml()
       #22 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Core\Controller\Varien\Action.php(390): Mage_Core_Model_Layout->getOutput()
       #23 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Cms\Helper\Page.php(137): Mage_Core_Controller_Varien_Action->renderLayout()
     #24 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Cms\Helper\Page.php(52): Mage_Cms_Helper_Page->_renderPage(Object(Mage_Cms_IndexController), 'no-route')
     #25 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Cms\controllers\IndexController.php(75): Mage_Cms_Helper_Page->renderPage(Object(Mage_Cms_IndexController), 'no-route')
        #26 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Core\Controller\Varien\Action.php(419):  Mage_Cms_IndexController->noRouteAction()
     #27 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Core\Controller\Varien\Router\Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('noRoute')
   #28 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Core\Controller\Varien\Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
   #29 C:\wamp\www\dennymagic.com\store\app\code\core\Mage\Core\Model\App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
      #30 C:\wamp\www\dennymagic.com\store\app\Mage.php(683): Mage_Core_Model_App->run(Array)
     #31 C:\wamp\www\dennymagic.com\store\index.php(87): Mage::run('', 'store') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T07:45:16.423

该错误可能与某些 phtml 文件有关。

产品细节的主题文件在这里： **app/design/frontend/YOR_PACKAGE/YOUR_THEME/template/catalog/product/view/**

**原始解决方案：**

要找出错误，我建议您以这种方式继续：
尝试删除目录，然后在模板目录中删除 sub_directory：**app/design/frontend/YOR_PACKAGE/YOUR_THEME/template/**

例如，您可以尝试删除此目录：**app/design/frontend/YOR_PACKAGE/YOUR_THEME/template/catalog/product/view/**
并查看错误是否消失，以便您确定导致错误的原因是此目录中的文件.

找到目录后，重复逐个文件删除文件的操作，直到您不知道是哪个文件。

此时您可以分析文件代码。

**更好的解决方案**：

使用 Xdebug 并遵循代码流，直到触发错误。

# c# - 想在 Unity 3D 中使用 iTween 进行 2d 地板碰撞

> ID：11828314
> 
> 赞同：1
> 
> 时间：2012-08-06T12:29:49.560
> 
> 标签：c#, collision-detection, unity3d

我正在使用 Unity 3D 制作一个简单的 2d 横向滚动游戏。当我说 2d 时，我的意思是它会出现 2d，所有背景资源都是 2d，但主角是 3d。我想要的是不平整的地板表面。只有出现在背景上的东西才会有真正的地板，所以从技术上讲，我想假装地板碰撞。

我研究了[iTween](http://itween.pixelplacement.com/index.php)，这看起来可以做我想做的事。我的想法是使用 iTween 创建一条与背景地板相匹配的线条。然后我会将主要字符 x 位置与行 x 位置匹配，然后在此时获取行 y 位置以设置字符 y 位置。

我唯一的问题是我似乎无法获得直线的坐标。iTween 中有一个名为 PointOnPath() 的方法，但为了获得坐标，我需要知道我的角色在直线上的距离是多少百分比。这是我不知道的，因为我的角色实际上并没有遵循这条线。

如果有人对我如何实现这一点有任何想法，无论是否使用 iTween，将不胜感激。

提前致谢，

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T06:01:32.030

你可以使用 Unity3D 的碰撞。**BoxCollider**可用于模拟平坦的地面，也可能通过将不同大小的 BoxCollider 放在一起来模拟您所描述的不平坦地面。

如果您想模拟*弯曲*的碰撞表面，请考虑使用**MeshCollider**并导入一个基本 3D 网格（来自 Blender、3DSMax、Maya 等），该网格具有适合您关卡形状的低多边形数。

演示这一点的一个非常快速的方法是拖动几个 Cube（GameObject->Create Other->Cube），选择它，然后在 MeshFilter 和 MeshRenderer 上右键单击->Remove Component，留下 BoxCollider，您可以可以移动/旋转/缩放。

我可以很容易地预见到这个导致的唯一问题是有台阶/楼梯或小的高度差异。Unity 的示例角色通过将玩家的碰撞作为胶囊形状来处理此问题，当胶囊在特定高度撞击楼梯的大小时，它会将胶囊向上推。替代方法可以是在代码中修复楼梯碰撞处理，或者在台阶之间的间隙中添加一个倾斜/倾斜的碰撞器。

# actionscript-3 - Flash AS3中的手写文字效果（动态）

> ID：11828315
> 
> 赞同：-1
> 
> 时间：2012-08-06T12:29:49.730
> 
> 标签：actionscript-3

谁能给我推荐 Flash AS3 中手写文本效果的代码。我想要动态文本的写作效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:54:46.330

你应该把你需要写的每个符号都写成一个符号，然后将它们标记为“Export for actionscript”（如果是 Flash）。然后您将它们添加到这样的容器中：

```
 private function writeDynamicText(str:String):void
    {
        var calculatedX:int = 0;
        for(var i:int = 0; i < str.length; i++)
        {
            var LetterClass:Class = getDefinitionByName(str.charAt(i)) as Class;
            var letter:LetterClass = new LetterClass();
            letter.x = calculatedX;
            container.addChild(letter);
            calculatedX += letter.width;
        }
    } 
```

要使此代码起作用，您必须将字母 i 命名为符号“i”等等。

# php - 从 pdf 中删除表单元素，其值保留在 PHP 中的位置

> ID：11828316
> 
> 赞同：1
> 
> 时间：2012-08-06T12:29:50.167
> 
> 标签：php, pdf, tcpdf, fpdf, zend-pdf

我有一个包含不同表单元素的 pdf，我想用 PHP 删除这些表单元素，但它们的值应该是它们的..

或者如果我可以从标题中禁用表单元素..???

# erlang - 从头开始实施 pmap。为什么我的实施缓慢？

> ID：11828317
> 
> 赞同：4
> 
> 时间：2012-08-06T12:29:54.647
> 
> 标签：erlang, spawn, pmap

我是 Erlang 的新手，所以为了培训我尝试从头开始实现标准功能。我试图从**列表**模块创建 map/2函数的**并行实现。**但是我的实现工作非常缓慢。如果我在实施过程中犯了任何主要错误，您能否指出我：

 **![在此处输入图像描述](../Images/69381d00057c430e577d2c5101d83108.png)

```
-module( my_pmap ).
-export([ pmap/2 ]).
-export([ map/4, collect/3 ]).

map( F, Value, Indx, SenderPid ) ->
        SenderPid ! { Indx, F( Value ) }.

pmap( F, List ) ->
        CollectorPid = spawn_link( my_pmap, collect, [ length( List ), [], self() ] ),
        lists:foldl(
                fun( X, Indx ) ->
                        spawn_link( my_pmap, map, [ F, X, Indx, CollectorPid ] ),
                        Indx + 1
                end,
                1,
                List ),
        Mapped =
                receive
                        { collected, M } ->
                                M
                end,
        Sorted = lists:sort(
                        fun( { Indx1, _ }, { Indx2, _ } ) ->
                                Indx1 < Indx2
                        end,
                        Mapped ),
        [ Val || { _Indx, Val } <- Sorted ].

collect( 0, List, SenderPid ) ->
        SenderPid ! { collected, List };
collect( N, List, SenderPid ) when N > 0 ->
        receive
                Mapped ->
                        collect( N - 1, [ Mapped | List ], SenderPid )
        end. 
```

这是测试结果：

```
1> c(my_pmap).
{ok,my_pmap}
2> timer:tc( my_pmap, pmap, [ fun(X) -> X*X*X*X end, lists:seq( 1, 10000 ) ] ).
{137804,
 [1,16,81,256,625,1296,2401,4096,6561,10000,14641,20736,
  28561,38416,50625,65536,83521,104976,130321,160000,194481,
  234256,279841,331776,390625,456976,531441|...]}
3> timer:tc( lists, map, [ fun(X) -> X*X*X*X end, lists:seq( 1, 10000 ) ] ).   
{44136,
 [1,16,81,256,625,1296,2401,4096,6561,10000,14641,20736,
  28561,38416,50625,65536,83521,104976,130321,160000,194481,
  234256,279841,331776,390625,456976,531441|...]} 
```

正如您可能已经看到**的 0,137804 秒。**与**0,044136 秒相比。**

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T09:55:16.267

评论是正确的。问题是产卵过程很便宜，但它*确实*有成本。将一个数字乘以三倍非常快，并且产生新进程的开销会影响您的性能。

将列表划分为片段并在单独的进程中处理每个片段可能会更快。如果您知道您有 8 个核心，则可以尝试将其拆分为 8 个片段。pmap 之类的东西*可以*在 Erlang 中实现，但它不是 Erlang 的强项。像 Haskell GHC 运行时这样的系统有*sparks*，这是一个更好的工具来实现像这样的细粒度并行。此外，像这样的乘法显然是 SSE 或 GPU 中的 SIMD 指令的候选者。Erlang 对此也没有解决方案，但同样，GHC 有`accelerate`处理`repa`这种情况的库。

另一方面，您可以通过简单地使用进程来处理提示的几个片段来在 Erlang 中获得良好的加速。另请注意，由于通信开销，并行计算通常在低 N（如 10000）时表现不佳。您需要更大的问题才能获得收益。**

# xcode - 表格视图中的多个部分数组

> ID：11828321
> 
> 赞同：0
> 
> 时间：2012-08-06T12:30:12.967
> 
> 标签：xcode, uitableview, sections

首先，我想说我有一个类似的帖子，但有些帖子是如何消失的，所以如果它再次出现，我无意重复发布。

我创建了一个包含 3 个部分的 uitableview，并从 3 个不同的数组中填充

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

{ //去掉了这里的一堆代码，让它更短

```
switch (indexPath.section) {
    case 0:
        cell.textLabel.text=[DogArray objectAtIndex:indexPath.row];
        break;
     case 1:
        cell.textLabel.text=[BirdArray objectAtIndex:indexPath.row];
        break;
    case 2:
        cell.textLabel.text=[FishArray objectAtIndex:indexPath.row];
       break;
    default:
        break;
}

[cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];
return cell; 
```

}

这三个部分中的每一个都从各自的数组中获取自己的值。

唯一的问题是。在我使用一个数组之前，我会这样分配

```
 (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

if (checInt==0) 
{ 
    ThridView *summary=[[ThridView alloc]init];
    summary.detailViewController = detailViewController;
    self.detailViewController.receivedRainObject = [MainArray objectAtIndex:indexPath.row];//Pay attention to this line 
```

这将根据每个人是 .row 的人将斗牛犬、鸽子或箭鱼传递给摘要。不幸的是，我不能再这样做了，因为我使用了三个不同的数组。我正在考虑使用开关，但即使我从鱼阵列中选择箭鱼。NSLOG([DogArray objectAtIndex:indexPath.row]) 向我展示了pitbull 和 NSLOG([BirdArray objectAtIndex:indexPath.row]) 向我展示了鸽子，所以我不能说这两个是什么时候 null 。

我也很想知道一种方法，即使它们来自不同的阵列，我仍然可以传递我选择的每种动物，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:42:34.987

在我看来，它应该与您用于将文本放入单元格的逻辑相同。也就是说，您的索引路径部分选择数组，行选择偏移量。

# qt - Qt同步QNetworkAccessManager获取

> ID：11828322
> 
> 赞同：8
> 
> 时间：2012-08-06T12:30:12.960
> 
> 标签：qt, http-get, synchronous, qtnetwork

同步 QNetworkAccessManager::get 的正确方法是什么？

[qt wiki](http://www.developer.nokia.com/Community/Wiki/How_to_wait_synchronously_for_a_Signal_in_Qt)提供了一种方法，但指出“不建议在实际应用程序中使用它” 。[邮件列表](http://lists.qt.nokia.com/pipermail/qt-interest/2010-April/022025.html)提供了与 wiki 类似的解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-01T17:33:11.683

百胜可能会使用这样的东西：

```
QEventLoop loop;
connect(_netReply, SIGNAL(finished()), &loop, SLOT(quit()));
loop.exec(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-28T08:59:45.823

wiki 和 yttrium 的答案中提到的简单解决方案非常脆弱，因为它不能处理所有可能的故障情况（例如代理），因此不应该在生产环境中使用，不幸的是它已经变得非常多产，所以任何要求同步 QNAM 的人都会被“异步使用它 [愚蠢]”或这段最终会失败的简单代码所困扰。

我还没有找到 Qt 团队自己制作的“正确”解决方案，但是 codeproject 上的这个人已经足够体面，可以制作一个更全面的包装器，应该更安全： http:
[//www.codeproject.com/Articles /484905/使用-QNetworkAccessManager-for-synchronous-download](http://www.codeproject.com/Articles/484905/Use-QNetworkAccessManager-for-synchronous-download)

# asp.net-mvc - mvc 4 桌面和移动

> ID：11828333
> 
> 赞同：3
> 
> 时间：2012-08-06T12:30:52.977
> 
> 标签：asp.net-mvc, asp.net-mvc-4, mobile, web-applications

我想使用 ASP.NET MVC 4 来构建一个同时针对桌面和移动用户的网站（将平板电脑放在一边进行讨论）

我似乎有很多选择，我想获得一些反馈。

第一个选项涉及为桌面用户和移动用户使用相同的网站。每个页面请求都将转到相应的控制器，并根据外形尺寸（甚至可能取决于设备类型，例如 Windows Phone、IPhone 等）呈现视图。响应式设计将用于确保 UI 适合预期的用户体验（纵向、横向）。此选项具有以下好处（如我所见）：

*   没有重复的控制器逻辑
*   单一站点维护
*   没有将用户重定向到其他站点
*   没有重复的页面通知搜索爬虫

第二种选择涉及为移动设备创建一个单独的站点，该站点仅提供移动设备的视图和控制器操作方法。这也将有能力提供设备特定的视图（使用显示模式）和方向的响应式设计。此选项具有以下好处：

*   根据可用页面完全控制移动体验（我知道我可以有条件地呈现操作链接，但使用此选项，如果设备上不允许使用该功能，则站点中不存在页面！
*   单独的移动发布周期。
*   但最大的缺点是控制器逻辑几乎肯定会在桌面站点和移动站点之间重复，这感觉在未来真的会受到伤害。

感觉就像纯粹的 MVC 应该有控制器，它应该获取数据，然后提供一个视图，允许数据显示在最合适的页面上。这感觉就像选项 1。

我想归根结底是我们应该有一个特定于设备的站点（http://m.）还是我们设计一个可以从一系列设备查看的站点？

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T19:22:58.753

老实说，我已经看到两种方法都完成了，所描述的第一种方法确实是最好的方法。但是，我要提醒您的是，一定要让移动体验达到最佳状态。我知道很多公司并不专注于完善他们的手机（包括我的经验），这可能会失去你的客户。然而，控制器逻辑的重复是可怕的。一种更好的方法，虽然没有描述，但有 1 个控制器集，但让该控制器集调用一组代码，其行为有点像 api，这样如果你需要移动到选项 2，你就不会重复代码生活变得更容易移动。无论如何，如果您有任何其他问题，我很乐意与您交谈，我是一名专业的移动开发人员，并且了解 iPhone Android、WP7、

# gradle - gradle中依赖管理的共识

> ID：11828335
> 
> 赞同：1
> 
> 时间：2012-08-06T12:30:57.063
> 
> 标签：gradle

我是第一次在一个多模块项目中使用 Gradle，并且想知道是否有任何关于正确/最佳方式来进行这种工作的依赖管理的共识。据我所知，有两种方法，第一种方法似乎更被广泛接受。它看起来像：[对不起，如果这个虚构的项目是蹩脚的！]

```
-- MyProject
---- settings.gradle
---- build.gradle
---- coreProject
---- servicesProject
------ servicesSubProject
---- warProject
---- common 
```

按照这种方法，所有管理都在单个 build.gradle 文件中完成（其他外部 .gradle 文件可用于定义各种工件），并且各个项目依赖项将在其各自的“项目”定义部分中进行管理，例如：

```
project('servicesProject:servicesSubProject') {
    dependencies {
        compile project(':common')
        compile spring.data
        compile spring.framework.persistence
        compile spring.framework.security
        compile persistence.hibernate.core
        compile persistence.postgresql
    }
} 
```

另一种方法是为每个子项目创建一个 build.gradle 文件，如下所示（这里子项目的依赖项位于该项目的 build.gradle 文件的依赖项部分）：

```
-- MyProject
---- settings.gradle
---- build.gradle
---- coreProject
------ build.gradle
---- servicesProject
------ build.gradle
------ servicesSubProject
-------- build.gradle
---- warProject
------ build.gradle
---- common
------ build.gradle 
```

正如我所说，从我能够阅读的内容来看，似乎第一种方法比第二种方法使用更广泛。Spring Framework gradle 文件就是这样设置的。然而，在我全力以赴之前，我想我应该问一下是否有权衡或其他影响我也应该注意。感谢您的任何想法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:04:14.390

每个子项目都有一个单独的构建脚本可能更常见。将一个大脚本分解为多个小脚本是一种自然的方式，这通常是一件好事。也就是说，一些团队更喜欢使用单个构建脚本，而 Gradle 足够灵活以适应这种情况。

如果您使用多个构建脚本，则以它们所属的子项目命名它们是值得的。这可以通过添加以下代码来实现`settings.gradle`（代码假设只有一级子项目）：

```
rootProject.children.each { it.buildFileName = it.name + ".gradle" } 
```

PS：尽管依赖声明通常构成子项目构建脚本的很大一部分，但是否使用一个或多个构建脚本的决定并不特定于依赖管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-30T20:27:39.177

我目前正在开发一个包含约 30 个 gradle 子项目的 Java 项目。现在我们使用两种选择的方便（至少对我们来说）混合：

```
/(root)
- build.gradle
- subproject_1
- subproject_2
- webservices
-- build.gradle
-- webservice 1
-- webservice 2
- database
- build.gradle
-- db-binding1
-- db-binding2 
```

我们的根项目中有一个`build.gradle`，定义了所有常见的东西，如 Maven 存储库、插件、编码等。该文件还包含所有子项目的所有信息`compile`和`runtime`依赖关系。我们喜欢在一个文件中定义所有外部库的想法。

然后 - 由于我们的子项目按技术主题分组 - 我们有“内部”`build.gradle`文件，这些文件定义了特定于其子项目（并且仅限于它们）的任务和配置。例如，我们有一个 build.gradle 定义任务用于 web 服务绑定，一个用于数据库绑定等等。

你的里程可能会有所不同。如果您的项目更大，您可能希望`build.gradle`每个子项目有一个。

但是，您以后可以随时改变您的习惯，而无需太多努力，并且很容易拆分/合并您的文件。

# python - Python中许多属性的装饰器

> ID：11828338
> 
> 赞同：4
> 
> 时间：2012-08-06T12:31:04.987
> 
> 标签：python, decorator

是否可以编写一个同时创建许多属性的装饰器？

喜欢而不是写作

```
class Test:
    @property
    def a(self):
        return self.ref.a
    @property
    def b(self):
        return self.ref.b 
```

我想写

```
class Test:
    @properties("a", "b")
    def prop(self, name):
        return getattr(self.ref, name) 
```

是否可以？你推荐它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T12:51:24.877

回想一下装饰器

```
@decorator(dec_args)
def foo(args):
    pass 
```

只是写作的语法糖

```
def foo(args):
    pass
foo = decorator(dec_args)(foo) 
```

因此，方法装饰器不可能导致将多个方法（或属性等）添加到类中。

另一种方法可能是注入属性的类装饰器：

```
def multi_property(prop, *names):
    def inner(cls):
        for name in names:
            setattr(cls, name, property(lambda self, name=name: prop(self, name)))
    return inner

@multi_property(prop, 'a', 'b')
class Test:
    pass 
```

但是，将每个属性都存在于类的主体中通常会更清楚：

```
a = forward_property('ref', 'a')
b = forward_property('ref', 'b') 
```

where`forward_property`返回一个适当地实现描述符协议的属性对象。这对文档和其他静态分析工具以及（通常）读者更友好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T12:52:47.117

为另一个对象编写代理的最简单方法是实现`__getattr__()`：

```
class Proxy(object):
    def __init__(self, ref1, ref2):
        self._ref1 = ref1
        self._ref2 = ref2
    def __getatrr__(self, name):
        if name in ["a", "b", "c"]:
            return getattr(self._ref1, name)
        if name in ["d", "e", "f"]:
            return getattr(self._ref2, name) 
```

请注意，`__getattr__()`仅对当前实例中未找到的属性调用，因此您还可以将更多方法和属性添加到`Proxy`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T13:01:53.937

对于您可能真正想要的内容，语言中的一项规定是为 `__setattr__`类编写方法。

每当在实例上访问通常不存在的属性时，就会调用此方法：

```
>>> class Test(object):
...    a = 0
...    def __getattr__(self, attr):
...       return attr
... 
>>> t = Test()
>>> t.a
0
>>> t.b
'b'
>>> t.c
'c' 
```

您直接询问的内容也是可能的，但需要一些技巧 - 尽管常识不建议这样做，但在野外生产中被广泛使用。也就是说，对于 Python 中存在的属性，它是一种特殊类型对象的类属性——至少具有`__get__`方法的对象。（要了解更多关于 Python 文档的“描述符协议”的信息）。

现在，尝试一次创建多个属性，就像您通过示例粘贴的代码一样，需要将属性名称从被调用函数注入到类名称空间中。它_是可能的_，甚至在 Python*中用于生产*，而且实现起来也不难。但不漂亮，尽管如此。

因此，避免这种情况的一种可能方法是调用返回一系列“属性”对象——即干净、可读且可维护：

```
class MultiProperty(object):
    def __init__(self, getter, setter, name):
        self.getter = getter
        self.setter = setter
        self.name = name
    def __get__(self, instance, owner):
        return self.getter(instance, self.name)
    def __set__(self, instance, value):
        return self.setter(instance, self.name, value)

def multi_property(mgetter, msetter, *args):
    props = []
    for name in args:
        props.append(MultiProperty(mgetter, msetter, name))
    return props

class Test(object):
    def multi_getter(self, attr_name):
        # isf desired, isnert some logic here
        return getattr(self, "_" + attr_name)

    def multi_setter(self, attr_name, value):
        # insert some logic here
        return setattr(self, "_" + attr_name, value)        
    a,b,c = multi_property(multi_getter, multi_setter, *"a b c".split()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T13:05:28.447

这在课堂上是不可能的。但是，您可以在之后修改该类。看这里：

```
def makeprop(meth, name):
    # make a property calling the given method.
    # It is not really a method, but it gets called with the "self" first...
    return property(lambda self: meth(self, name))

def propfor(cls, *names):
    def wrap(meth):
        for name in names:
            # Create a property for a given object, in this case self,
            prop = makeprop(meth, name)
            setattr(cls, name, prop)
        return meth # unchanged
    return wrap

class O(object):
    # just a dummy for your ref
    a = 9
    b = 12
    c = 199

class C(object):
    ref = O()

# Put the wanted properties into the class afterwards:
@propfor(C, "a", "b", "c")
def prop(self, name):
    return getattr(self.ref, name)

# alternative approach with a class decorator:
def propdeco(*names):
    meth = names[-1]
    names = names[:-1]
    def classdeco(cls):
        propfor(cls, *names)(meth) # not nice, but reuses code above
        return cls
    return classdeco

@propdeco("a", "b", "c", lambda self, name: getattr(self.ref, name))
class D(object):
    ref = O()

print C().a
print C().b
print C().c

print D().a
print D().b
print D().c 
```

如果您更喜欢第二种方法，则应写`propdeco`为

```
def propdeco(*names):
    meth = names[-1]
    names = names[:-1]
    def classdeco(cls):
        for name in names:
            # Create a property for a given object, in this case self,
            prop = makeprop(meth, name)
            setattr(cls, name, prop)
        return cls
    return classdeco 
```

# node.js - 如何使用 gruntjs 连接字符串和文件

> ID：11828340
> 
> 赞同：1
> 
> 时间：2012-08-06T12:31:07.127
> 
> 标签：node.js, concat, gruntjs

是否可以使用连接字符串`grunt`？我知道我可以`<banner>`像这样连接：

```
concat: {
  dist: {
    src: [
      '<banner>',
      '<file_strip_banner:public/src/js/lib/underscore.js>',
      '<file_strip_banner:public/src/js/lib/jquery.js>'
    ],
    dest: 'public/js/all.js'
  }
} 
```

但是当我在其中声明其他变量时，`meta`它们就会被忽略。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T23:41:03.720

是的。只需在横幅指令中指定位置即可。这是一个例子`grunt.js`：

```
grunt.initConfig({
  meta: {
    banner: '/* I am a string */',
    footer: '/* Im another string at the bottom! */'
  },
  concat: {
    dist: {
      src: [
        '<banner:meta.banner>',
        '<file_strip_banner:public/src/js/lib/underscore.js>',
        '<file_strip_banner:public/src/js/lib/jquery.js>',
        '<banner:meta.footer>'
      ],
      dest: 'public/js/all.js'
    }
  }
}); 
```

请注意，在 Grunt **v0.4**中删除了所有指令，例如`<banner>`和......所以这只适用于 Grunt **v0.3**。`<file_strip_banner>`

# php - 如果我用引用覆盖原始变量，内部会发生什么？

> ID：11828341
> 
> 赞同：3
> 
> 时间：2012-08-06T12:31:09.857
> 
> 标签：php, variables, reference

如果我用引用覆盖原始变量，内部会发生什么？
意思很糟糕，是否需要额外的时间或资源？

```
<?php
function db(){
    global $db;
    if( empty($db)) $db = new PDO('sqlite:/tmp/default.db3');
    return &$db;
}

$db = db();
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T12:42:59.803

如果你使用

```
global $db; 
```

这会将全局变量`$db`导入本地范围。

然后它作为另一个变量存在（代表全局变量）。您最终*尝试*返回对该变量的引用：

```
return &$db; 
```

但这不是[引用返回](http://de.php.net/manual/language.references.return.php)。相反，您只需返回值。

`$db`然后你用它自己的值覆盖全局变量表。这就是这里发生的一切。

> 是否需要额外的时间或资源？

你做的任何多余的事情都会花费额外的时间或资源。然而 PHP 有一个称为写时复制 (COW) 的优化，所以通常你不需要在这里太在意。PHP很好地消除了负担。

就您的代码中涉及的对象而言。只需这样更改：

```
<?php

$db = new PDO('sqlite:/tmp/default.db3');

?> 
```

然后在需要的地方传递 db 对象。保持简单，愚蠢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:33:46.363

由于您的原始示例是语法错误，我认为这就是您想要写的：

```
function db(){
    static $db = null;
    if ($db === null) {
        $db = new PDO('sqlite:/tmp/default.db3');
    }
    return $db;
} 
```

如果您真的那么倾向于，您可以使用[vulcan 逻辑反汇编](http://pecl.php.net/package/vld)程序运行您的脚本并获取操作码。唯一显着的区别是带有引用的版本使用 RETURN_BY_REF 和 ASSIGN_REF 操作码，而不是 RETURN 和 ASSIGN。确定引擎在执行时执行的操作并非易事，但主要是写时复制行为通常会阻止复制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:52:07.370

That is not the way you return by reference. You must declare the function like this:

```
function &return_by_ref()
{
    $something="";
    return $something;
} 
```

You need not return objects by reference, the language specifies all objects are returned by reference automatically, and the manual also strongly recommends not to use the by reference operator for objects.

Is this what u actually mean:

```
class DB{
   private function __construct(){}
   public static $db=null;
}

function db($db)
{
   if(!isset(DB::$db))
      DB::$db=new PDO('sqlite:/tmp/default.db3');
   return DB::$db;
} 
```

Usage:

```
function create_user()
{
   db()->exec("INSERT INTO `users` SET `name`='John Doe'");
   return db()->lastInsertId();
}

function get_users()
{
   return db()
      ->query("SELECT * FROM `users`")
      ->fetchAll(PDO::FETCH_ASSOC)
   ;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T12:38:45.363

它不应该消耗更多资源，因为您返回的对象的地址总是比对象小。

如果我没记错的话，当一个对象在 PHP 5 中返回时，即使你没有在它前面加上 (&)，它也是通过引用返回的。（本人立场更正的对象不作为参考退回）：

[http://php.net/manual/en/language.references.return.php](http://php.net/manual/en/language.references.return.php)

我从所有其他编程语言中知道，对象是通过引用传递/返回的，而本机数据类型是通过副本返回的。

在您的示例中，当您使用全局变量时，您已经在函数外部引用了该变量。不需要返回值，因为您已经覆盖了它。

# vba - 用 VBA 表单中的文本框输入替换 Excel 单元格值

> ID：11828342
> 
> 赞同：0
> 
> 时间：2012-08-06T12:31:11.743
> 
> 标签：vba, excel

我在**Excel 201** 0 中创建了一个简单的表单，我希望在其中替换单元格范围内 11 个单元格中的单个文本字符串值`B5 : B15`

我已经使用此代码测试了标签 Christian Name`B5`引用的第一个单元格，`A5`并且我在 Christian_Input 表单上标记了文本框：

```
Private Sub Christian_Input_Change()

ThisWorkbook.Worksheets("Sheet1").Cells(5, 1) = Christian_Input.Text
End Sub 
```

当我在表单中输入一个新的文本字符串并运行它时，表单只是出现在我的 Sheet1 上，输入文本框中的替换文本但单元格中的文本字符串`B5`既没有突出显示也没有被替换。

最后，当我打开文件时，表单不可见。

谁能告诉我需要做些什么改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:28:02.920

```
ThisWorkbook.Worksheets("Sheet1").range("B5:B15").value = Christian_Input.Text
ThisWorkbook.Worksheets("Sheet1").range("B5").select 
```

将以下内容添加到“此工作簿”模块以在您打开工作簿时自动启动表单（将 UserFormNameHere 替换为您的表单名称）：

```
Private Sub Workbook_Open()
    UserFormNameHere.show   
End Sub 
```

# jquery - jquery获取滑块的中心

> ID：11828343
> 
> 赞同：1
> 
> 时间：2012-08-06T12:31:22.763
> 
> 标签：jquery, slider

我正在构建一个 jquery 滑块。

我有`$total_images`（图像总数）和`$total_length`（以像素为单位）。

我正在寻找一种优雅的解决方案来在幻灯片的死点启动滑块 - 但不是图像之间的一半。

如果图像数量是偶数，我就可以做到`$total_length/2`。

```
$total_images = 10;
$image_length = 400

$startposition = ($total_images * $image_length) / 2 
```

问题是滑块是动态的 - 所以可能包含 11 个图像。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:49:27.400

使用您的计算中的一个`Math.floor`或`Math.ceil`一个来获得最接近的整数，分别小于或大于。

```
var total_images = 10,
    image_length = 400,
    startPosition = Math.floor((total_images * image_length) / 2); 
```

# c# - 从另一个类返回 client_DownloadProgressChanged 事件

> ID：11828344
> 
> 赞同：0
> 
> 时间：2012-08-06T12:31:29.893
> 
> 标签：c#

我正在尝试使用可以继续重用的下载器创建一个类，这样我就不会在一段时间后获得大量代码。但我似乎无法返回该`client_DownloadProgressChanged`事件。这是我现在拥有的代码：

```
public static string progress;
    public static int percent;
    static WebClient client = new WebClient();
    /// <summary>
    /// Download a file from the internet
    /// </summary>
    /// <param name="url">The URL to download from</param>
    /// <param name="path">The path to save to don't forget the / at the end</param>
    /// <param name="filename">The filename of the file that is going to be download</param>
    public static string DownloadFile(string url, string path, string filename)
    {
        try
        {
            Thread bgThread = new Thread(() =>
                                             {
                                                 client.DownloadProgressChanged += client_DownloadProgressChanged;
                                                 client.DownloadFileCompleted += client_DownloadFileCompleted;
                                                 client.DownloadFileAsync(new Uri(url), path + filename);
                                             });
            bgThread.Start();
        }
        catch (Exception e)
        {
            Console.WriteLine(e.ToString());
        };
        return progress;
    }

    static void client_DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
    {
        double bytesIn = double.Parse(e.BytesReceived.ToString(CultureInfo.InvariantCulture));
        double totalBytes = double.Parse(e.TotalBytesToReceive.ToString(CultureInfo.InvariantCulture));
        double percentage = bytesIn/totalBytes*100;
        progress = "Downloaded " + e.BytesReceived + " of " + e.TotalBytesToReceive;
        percent = int.Parse(Math.Truncate(percentage).ToString(CultureInfo.InvariantCulture));
        while (client.IsBusy)
        {
            return progress;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:59:26.113

首先，你`Thread`是多余的。如果您阅读有关您将看到的[msdn 文章：](http://msdn.microsoft.com/en-us/library/ms144196.aspx)`DownloadFileAsync`

> 此方法不会阻塞调用线程。

考虑到这一点，您的方法会变得更简单：

```
public static string DownloadFile(string url, string path, string filename, Action<string,double> progressNotification,Action finishNotification)
{
     DownloadProgressChangedEventHandler progressReaction  = (s,e)=>
              {                               
                      var progress = "Downloaded " + e.BytesReceived + " of " + e.TotalBytesToReceive;
                      var percent = Math.Truncate(e.BytesReceived / (double)e.TotalBytesToReceive * 100);

                      while (client.IsBusy)
                      {
                         progressNotification(progress, percent);
                      }                          
              };
     WebClient client = new WebClient();
     client.DownloadProgressChanged += progressReaction;
     client.DownloadFileCompleted += (s,e) => finishNotification();
     client.DownloadFileAsync(new Uri(url), path + filename);
} 
```

我添加了两个方法参数，它们将在取得进展或下载完成时调用。

要调用此方法，请使用：

```
DownloadFile(url,path,fileName,
 (message,precentage)=>{ /* do some progress bar update or something */ },
 ()=>{ /* hide progressbar or some logic after finish */}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:00:54.547

我想最简单的方法是将您的静态方法更改为实例方法（client_DownloadProgressChanged 将是一个私有方法）并创建一个自定义事件，因此无论何时使用它，只需订阅该事件，就像 DownloadProgressChanged 事件本身一样。

```
public class Downloader
{
    public delegate void DownloadProgressHandler(object sender, string progress);
    public event DownloadProgressHandler DownloadProgressChanged;

    public static string progress;
    public static int percent;
    static WebClient client = new WebClient();
    /// <summary>
    /// Download a file from the internet
    /// </summary>
    /// <param name="url">The URL to download from</param>
    /// <param name="path">The path to save to don't forget the / at the end</param>
    /// <param name="filename">The filename of the file that is going to be download</param>
    public string DownloadFile(string url, string path, string filename)
    {
        try
        {
            Thread bgThread = new Thread(() =>
            {
                client.DownloadProgressChanged += client_DownloadProgressChanged;
                client.DownloadFileAsync(new Uri(url), path + filename);
            });
            bgThread.Start();
        }
        catch (Exception e)
        {
            Console.WriteLine(e.ToString());
        };
        return progress;
    }

    private void client_DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
    {
        double bytesIn = double.Parse(e.BytesReceived.ToString(CultureInfo.InvariantCulture));
        double totalBytes = double.Parse(e.TotalBytesToReceive.ToString(CultureInfo.InvariantCulture));
        double percentage = bytesIn / totalBytes * 100;
        progress = "Downloaded " + e.BytesReceived + " of " + e.TotalBytesToReceive;
        percent = int.Parse(Math.Truncate(percentage).ToString(CultureInfo.InvariantCulture));
        while (client.IsBusy)
        {
            if (DownloadProgressChanged != null)
                DownloadProgressChanged(this, progress);
        }
    }

} 
```

# asp.net - Microsoft 数据应用程序块传递数据配置路径

> ID：11828349
> 
> 赞同：-1
> 
> 时间：2012-08-06T12:31:43.980
> 
> 标签：asp.net, web-applications, web-config

我目前正在为所有与数据库相关的操作使用 Microsoft 数据应用程序块构建应用程序。

我在 web.config 文件中有数据配置的配置设置，如下所示。

**网页配置**

```
<storageProvider xsi:type="XmlFileStorageProviderData" name="XML File Storage Provider" path="dataConfiguration.config"/>
    <dataTransformer xsi:type="XmlSerializerTransformerData" name="Xml Serializer Transformer">
      < include Types/>
    </data Transformer >
  </configuration Section > 
```

**代码**

```
db = DatabaseFactory.CreateDatabase(databaseInstance);                
db.ExecuteNonQuery(CommandType.Text, sqlQuery); 
```

我能够成功连接到数据库、查询等。

但是，我们在不同的服务器上有不同的配置文件。

有什么方法可以在代码中传递路径属性，并能够通过加载该特定配置文件而不是在 web.config 中对其进行硬编码来与适当的数据库实例进行交互？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:10:51.653

您好，您可以使用环境变量并加载好的配置

1 在您的机器环境上创建环境变量

环境可以有不同的值：暂存，生产等

2 使用此代码获取您的变量

```
var variable = System.Environment.GetEnvironmentVariable("YourNameVariable")
if(variable == "STG") //Staging
{
   //Load your string connection of staging
}
else if(variable == "PRD") //Production
{
   //Load your string connection of production
} 
```

3 在您的文件中创建关于配置的不同部分，并使用您调整的环境变量加载部分目标。

# javascript - 合并 socket.io 和 express.js 会话

> ID：11828354
> 
> 赞同：7
> 
> 时间：2012-08-06T12:31:55.893
> 
> 标签：javascript, session, express, socket.io

我想将 express.js 和 socket.io 会话合并在一起。下面是我的代码（socket.io 部分）

```
var io = require('socket.io').listen(app);
io.set('log level', 1);

io.sockets.on('connection', function (socket) {
    console.log('client connected');
client.send(client.id);//send client id to client itself
socket.on('connect', function(){
    console.log(socket.id + ' connected');
});
socket.on('disconnect', function(){
    console.log(socket.id + ' disconnected');
});
}); 
```

我的 express.js 会话设置：

```
app.configure(function() {
  //app.use(express.logger());
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.static(__dirname + '/static'));
  app.use(express.cookieParser());
  app.use(express.session({store: MemStore({
    reapInterval: 60000 * 10
  }), secret:'foobar', key: 'express.sid'
})); 
```

我的主要问题是在我的终端中，当用户从一个 URL 移动到另一个 URL 时，会话 ID 也会发生变化：但我不希望它被更改。

```
info  - socket.io started
client connected
client connected
4Z0bYHzfWCEFzbbe4WUK disconnected
e_uSvxhSLbLAC9-F4WUL disconnected
client connected
bKDy90gsrWWTRJDD4WUM disconnected
client connected
RJ5qqCL2wfmXbd7U4WUN disconnected
client connected
wjN5Sqx4rucRtWL_4WUO disconnected 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T12:59:11.983

您正在输出套接字 ID，而不是 express.js 中的会话 ID。

您必须使用该`authorization`事件，它的第一个参数是一个对象，它有一个名为 的条目`sessionID`。该值不应在页面重新加载之间更改，因为它存储在 cookie（或 redis 数据库或其他任何内容）中。

这是一篇很好的文章，解释了它是如何工作的：[http](http://www.danielbaulig.de/socket-ioexpress/) ://www.danielbaulig.de/socket-ioexpress/ ，但它有点过时了。基本原则保持不变，但一些细节发生了变化。例如，他创建服务器的方式不再起作用，连接开发人员已经删除了`parseCookie()`. 用户对这个决定[不满意](https://github.com/senchalabs/connect/issues/588)，但是解决方法是这个易于记忆的代码行：

```
connect.utils.parseSignedCookies(cookie.parse(decodeURIComponent(data.headers.cookie)), secret); 
```

正如我所说，上面提到的文章应该为您提供所需的所有基础知识，如果您想查看有效的实现，请查看：[https ://github.com/vortec/lolbr/blob/master/lib/大声笑.js](https://github.com/vortec/lolbr/blob/master/lib/lolbr.js)

在`authorization`事件处理程序中，您可以修改`data`对象并稍后使用 访问它`socket.handshake`，在您的情况下：`socket.handshake.sessionID`。

希望有帮助。

# java - Intellij Idea - 模棱两可的方法调用

> ID：11828355
> 
> 赞同：5
> 
> 时间：2012-08-06T12:31:56.257
> 
> 标签：java, generics, intellij-idea

我在使用 Intellij Idea 时遇到了一个与 Java 相关的奇怪错误。

于是就有了这样的界面：

```
<T> void save(T aEntity, DbTransaction dbTransaction, Class<T> clazz);
<T> void save(Collection<T> aEntities, DbTransaction dbTransaction, Class<T> clazz); 
```

当我尝试编译下一个代码时：

```
@SuppressWarnings("unchecked")
@Override
public void save(Collection<T> aEntities, DbTransaction aDbTransaction) {
    baseDao.save(aEntities, aDbTransaction, getClass((T) aEntities.toArray()[0]));
} 
```

我收到下一个编译错误：

```
reference to save is ambiguous, both method <T>save(T,DbEntityHelper.DbTransaction,java.lang.Class<T>) in xzc.dao.IBaseDao and method <T>save(java.util.Collection<T>,DbEntityHelper.DbTransaction,java.lang.Class<T>) in xzc.dao.IBaseDao match 
```

你有什么想法 ？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T12:39:40.557

You have two types called `T` and it can't assume they are the same. `T` could be `Collection<T>` in the second method or it could be `T` in the first.

You can use

```
baseDao.<T>save(.... 
```

or

```
baseDao.<Collection<T>>save(.... 
```

to make it clear which one it should be. Making them the `T` same name doesn't help the compiler and may just be confusing.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T12:40:24.533

The erased signatures of the two save methods are

```
(Object, DBTransaction, Class)
(Collection, DBTransaction, Class) 
```

and the compiler can't decide which one you intended to call. An explicit cast should help here:

```
baseDao.save((Collection)aEntities, aDbTransaction, getClass((T) aEntities.toArray()[0])); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T12:41:09.743

Try specifying the type `<T>` explicitely like in the following:

```
baseDao.<Collection<T>>save(aEntities, aDbTransaction, getClass((T) aEntities.toArray()[0])); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T12:40:45.330

Usually I get this sort of error because of type erasure.

Check the other methods in your code to make sure they are all differrent when you remove any of hte type information. If there are two or more the same then this could be your prolem.

For erasure see this on the java trail [http://docs.oracle.com/javase/tutorial/java/generics/erasure.html](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)

Can you post the rest of the class?

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T12:34:01.150

单击文本颜色不同的位置，然后选择导入特定类`save()`（使用快捷键 - Mac 是 Alt-Enter）。或者，您可以使用完全限定的类名来消除两种不同`save()`方法之间的歧义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T12:39:13.550

由于[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，这两个方法具有相同的签名。

简而言之，在运行时所有类型信息都被删除，因此您的两个方法有效地变为：

```
Object void save(Object aEntity, DbTransaction dbTransaction, Class clazz);
Object void save(Collection aEntities, DbTransaction dbTransaction, Class clazz); 
```

Because your parameter is a `Collection`, but the `T` of the collection is not necessarily the *same* `T` as the other method, so both methods could match.

Try an explicit cast to either `Collection` or `Object`.

# celery - raven celery 客户端日志未显示在哨兵服务器上

> ID：11828362
> 
> 赞同：2
> 
> 时间：2012-08-06T12:32:53.527
> 
> 标签：celery, sentry, raven

我正在将 raven 升级到 2.0.3，但看不到任何日志通过它进入服务器。我已经修补了 raven，以便我可以使用 celery：[https](https://github.com/getsentry/raven-python/commit/1be659a1eba721a29ca889e632538ddd459c4acf) ://github.com/getsentry/raven-python/commit/1be659a1eba721a29ca889e632538ddd459c4acf 。

必须获取 SENTRY_DSN，因为当我更改它时，芹菜显示 403 响应（服务器禁止）。celery 正在接收这些任务，因为我可以在日志中看到任务已成功完成：

```
[2012-08-06 13:28:20,885: INFO/MainProcess] Got task from broker: raven.contrib.django.celery.send_raw[f58d441c-713b-4d90-9a75-fcdaf753cd5b]
[2012-08-06 13:28:21,061: INFO/PoolWorker-1] Configuring Raven for host: http://xxxxxx@xxxx.dotcloud.com:/2
[2012-08-06 13:28:22,025: INFO/MainProcess] Task raven.contrib.django.celery.send_raw[f58d441c-713b-4d90-9a75-fcdaf753cd5b] succeeded in 0.966000080109s: None 
```

但是，我在哨兵服务器上看不到任何事件。服务器端我有：

```
Django==1.4.1
django-celery==3.0.4
raven==2.0.3
sentry==4.8.6
celery==3.0.5 
```

是否缺少某些设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T02:23:49.643

问题是我的日志记录设置很可能导致某种竞争条件，这意味着 Raven 会打印它正在发送日志，但实际上从未绕过它。

通过设置 CELERY_REDIRECT_STDOUTS = False 修复

请参阅[https://groups.google.com/forum/?fromgroups#!topic/celery-users/6_Suz2tscMQ](https://groups.google.com/forum/?fromgroups#!topic/celery-users/6_Suz2tscMQ)

# node.js - 从 Nodejs 读取 MongoDB

> ID：11828367
> 
> 赞同：0
> 
> 时间：2012-08-06T12:33:38.280
> 
> 标签：node.js, mongodb

我面临一些特殊的问题，

*   我创建了一个新集合并从我的 Node.JS 程序中插入了一些数据，但这些集合没有出现在 mongo 控制台中。但是当我从 Node.Js 读取数据时，它会显示数据

*   此外，我无法读取现有的集合及其数据。

我错过了什么吗？我正在使用 mongojs 本机驱动程序连接到 Mongo。

# java - 在 Jackson 中将 Java 对象转换为 JsonNode

> ID：11828368
> 
> 赞同：176
> 
> 时间：2012-08-06T12:33:45.110
> 
> 标签：java, json, jackson

是否可以直接将 Java 对象转换为 JsonNode 对象？

我发现解决此问题的唯一方法是将 Java 对象转换为字符串，然后再转换为 JsonNode：

```
ObjectMapper mapper = new ObjectMapper(); 
String json = mapper.writeValueAsString(object);
JsonNode jsonNode = mapper.readTree(json); 
```

* * *

## 回答 #1

> 赞同：330
> 
> 时间：2012-08-06T13:06:39.010

从 Jackson 1.6 开始，您可以使用：

```
JsonNode node = mapper.valueToTree(map); 
```

或者

```
JsonNode node = mapper.convertValue(object, JsonNode.class); 
```

资料来源：[有没有办法将pojo直接序列化为treemodel？](https://stackoverflow.com/questions/6967583/jackson-is-there-a-way-to-serialize-pojos-directly-to-treemodel)

# actionscript-3 - 编译后redirectToUrl（）不起作用

> ID：11828379
> 
> 赞同：0
> 
> 时间：2012-08-06T12:34:15.377
> 
> 标签：actionscript-3, flash

想不通这个。在 Flash (cs 6) 中测试重定向工作时，在编译后，从浏览器或使用 Flash 播放器运行 - 不是。

```
import flash.net.URLRequest;
import flash.net.navigateToURL;

link.addEventListener(MouseEvent.CLICK, gotourl);

function gotourl(event:MouseEvent):void{
    // ...
    var url:String = "http://google.com";
    var urlrequest:URLRequest = new URLRequest(url);
    navigateToURL(urlrequest);
} 
```

更新

刚刚在另一台机器上检查过 - 工作正常，猜猜它是我的 Flash 播放器 .. 什么的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:29:02.373

似乎您需要将您的 swf 位置添加到[http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html的受信任位置列表](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:46:45.777

将此参数添加到 navigateToURL：

```
navigateToURL(urlrequest, "_blank"); 
```

这通常是问题的情况，因为有时浏览器不允许您直接从 Flash 更改浏览器的 url。您也可以尝试`allowScriptAccess="always"`在 html 中添加到您的嵌入标签。如果您可以访问页面上的 javascript，则另一种方法是使用[ExternalInterface类。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)请注意，您必须添加`allowScriptAccess="always"`标签才能使用该类。

# c# - 结构和垃圾收集

> ID：11828382
> 
> 赞同：2
> 
> 时间：2012-08-06T12:34:30.777
> 
> 标签：c#, memory-leaks, garbage-collection, value-type

我正在检查我的服务的内存使用情况，发现私有字节随着时间的推移而增加。该服务创建它需要的新组件，并且它们仅在服务停止时被处置。所以我正在寻找在有服务调用时创建新组件的代码，并在不需要它们时尝试处理它们。我正在使用 PerfMon 检查私有字节。

到目前为止，我在正确的轨道上吗？

此外，我发现其中一种方法每次都会创建新结构，然后它不会被处置或分配给 null。

```
var structInfo = new MyStruct();
structInfo .StructSize = Marshal.SizeOf(structInfo);
MyClass info = this.BuildStructInfo(structInfo);
return info; 
```

**编辑：**

该方法返回从结构中获取其值的类。

我是否需要处理`structInfo`，如果我不做任何事情，它会被 GC 收集吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T12:38:38.187

我在您的代码中看到的是`info`struct*返回*给调用者。因此，从问题的读者的角度来看，我想说，只有上帝知道谁以及如何使用它。

`Dispose(..)`如果您在内部分配了一些*非托管*资源，并且想要明确地摆脱它们，请调用该结构。

另一方面，如果您不再需要该`info`内存位置，只需为其分配一个`null`，以便下次旅行`GC`时*可能会*收集它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T13:00:36.920

结构是一种值类型（例如 int）。如果超出范围，它将自动被 GC。

您有时会看到内存使用量不断增长，而根本没有任何内存泄漏：如果有大量可用内存，您的 GC 就不会经常运行。

我建议使用内存分析器，它可以向您展示为什么某些对象保持活动状态。我可以推荐[YourKit for .NET profiler](http://www.yourkit.com/.net/profiler/index.jsp)，它有 30 天的免费试用期：

*   通过 YourKit 启动您的应用程序
*   拍摄内存快照
*   搜索/浏览您怀疑泄漏的课程
*   从 GC-root 中选择路径

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T14:04:20.663

> 该服务创建它需要的新组件，并且它们仅在服务停止时被释放

因此，您的服务必须以某种方式保留这些组件。它可能是故意的（例如缓存）或偶然的，只有您可以知道。

> 我需要处理 structInfo，如果我不做任何事情，它会被 GC 收集吗

If`structInfo`是一个值类型，它仅在堆栈上分配并在超出范围时被删除，这在您的代码段中似​​乎很小。这里不涉及GC。`structInfo`执行类型`IDisposable`(*) 还是其他类型的处置机制？如果是这样，请`Dispose`显式调用。

(*) 抛开一些特殊情况不谈，这是一项风险很大的业务，您需要非常清楚自己在做什么。

# python - 如何在 wxPython 的打开文件对话框中选择没有任何扩展名的文件？

> ID：11828384
> 
> 赞同：0
> 
> 时间：2012-08-06T12:34:30.057
> 
> 标签：python, wxpython, openfiledialog

使用 sampleTextEditor 中的这个示例，在浏览时我可以看到并且可以打开任何带有扩展名的文件 ( *. )。*如何打开没有扩展名的文件？

```
def defaultFileDialogOptions(self):
    ''' Return a dictionary with file dialog options that can be
        used in both the save file dialog as well as in the open
        file dialog. '''
    return dict(message='Choose a file', defaultDir=self.dirname,
                wildcard='*.*')

def askUserForFilename(self, **dialogOptions):
        dialog = wx.FileDialog(self, **dialogOptions)
        if dialog.ShowModal() == wx.ID_OK:
            userProvidedFilename = True
            self.filename = dialog.GetFilename()
            self.dirname = dialog.GetDirectory()
            self.SetTitle() # Update the window title with the new filename
        else:
            userProvidedFilename = False
        dialog.Destroy()
        return userProvidedFilename 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:36:37.310

更改`*.*`为 `*`

所以现在整个文件名都在通配符下，不需要点

# html - 是否可以在父元素中使用 zen 编码索引来应用于子元素？

> ID：11828386
> 
> 赞同：0
> 
> 时间：2012-08-06T12:34:38.470
> 
> 标签：html, css, emmet

假设您有 zen 片段：

```
div#container>(div.panel>h2{this is the header inside panel $})*3 
```

它将评估为：

```
<div id="container">
    <div class="panel">
        <h2>this is the header inside panel 1</h2>
    </div>
    <div class="panel">
        <h2>this is the header inside panel 1</h2>
    </div>
    <div class="panel">
        <h2>this is the header inside panel 1</h2>
    </div>
</div> 
```

有没有办法让它评估将相乘元素的索引传递给它的子元素？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:17:11.367

当前版本 Zen Coding core 的 bug：重复分组时计数器值设置错误。但在这种特殊情况下，您可以使用以下缩写获得所需的结果：

```
div#container>div.panel*3>h2{this is the header inside panel $} 
```

在即将发布的 v0.8 版本中，此错误已修复，您可以在此处对其进行测试：http: [//media.chikuyonok.ru/codemirror2/](http://media.chikuyonok.ru/codemirror2/)

# postback - 获取回发前输入的 TextBox 值

> ID：11828389
> 
> 赞同：0
> 
> 时间：2012-08-06T12:34:50.900
> 
> 标签：postback

我使用下面的代码将动态数量的文本框添加到 div，但在回发消失之前我无法访问它们。我希望能够循环它们以获取值，但无论我如何尝试，我都无法获取这些框，因为当我单击按钮时它们都消失了。我该怎么做呢？

```
 foreach (string month in budget.PeriodMonths)
    {
        TableRow tr = new TableRow();
        TableCell tc1 = new TableCell();
        TableCell tc2 = new TableCell();

        tc1.HorizontalAlign = HorizontalAlign.Right;

        Label monthName = new Label();
        monthName.Text = System.Globalization.CultureInfo.CurrentCulture.TextInfo.ToTitleCase(month);

        tc1.Controls.Add(monthName);

        TextBox monthInput = new TextBox();
        monthInput.ID = "month_" + i.ToString();
        monthInput.Attributes.Add("onkeypress", "return isNumberKey(event)");
        monthInput.Width = 50;
        monthInput.Style.Add("TEXT-ALIGN", "RIGHT");

        if (i < sellerBudget.PeriodValues.Length)
            monthInput.Text = sellerBudget.PeriodValues[i].ToString();
        else
            monthInput.Text = "0";

        tc2.Controls.Add(monthInput);

        tr.Cells.Add(tc1);
        tr.Cells.Add(tc2);
        bpTable.Controls.Add(tr);

        i++;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:41:10.980

这对我帮助很大！[http://techbrij.com/197/retrieve-value-of-dynamic-controls-in-asp-net](http://techbrij.com/197/retrieve-value-of-dynamic-controls-in-asp-net)

# java - Websphere 中的这些线程池有什么区别？

> ID：11828398
> 
> 赞同：2
> 
> 时间：2012-08-06T12:35:28.047
> 
> 标签：java, multithreading, websphere, threadpool, websphere-6.1

在 WebSphere Application Server 中，我看到了两个可以操作的线程池。有一个称为“默认”，另一个称为“WebContainer”，每个都有最小和最大大小。

这些线程池中的每一个用于什么？在我的应用程序中，我使用 Java 的 ExecutorService 将工作推到单独的线程上——我将从这些池中的哪个池中提取？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T20:39:01.293

“默认”线程池实际上只在服务器启动期间使用。“WebContainer”线程池用于入站 HTTP 请求。

WebSphere Application Server 线程池没有与 ExecutorService 集成，因此您不会使用其中的任何一个。您使用的是哪个 ExecutorService？如果您使用的是 Executors 中的一个，那么它将创建自己的线程。

# iphone - 是否可以使用带有 Xcode 4.4 + Mountain Lion 的旧 iPhone/iPAD 模拟器（3.2、4.0、4.2）

> ID：11828406
> 
> 赞同：3
> 
> 时间：2012-08-06T12:35:53.057
> 
> 标签：iphone, ipad, xcode4.4

我最近从 Xcode 3.2.3 升级到 Xcode 4.4 + Mountain Lion（为了在 5.1 iOS 上测试我的应用程序）。但它似乎只显示对 5.1 iOS 模拟器的支持，而不是较旧的模拟器。

那么，是否可以使用带有 Xcode 4.4 + Mountain Lion 的旧 iPhone/iPAD 模拟器（3.2、4.0、4.2）。

谁能指导我，如何在旧模拟器上测试我的应用程序？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T12:40:13.097

首先，您可以通过选择额外下载并安装iOS 5.0模拟器

Xcode->首选项； ![在此处输入图像描述](../Images/2ae66181f4542b4e6e7590d2b868a975.png)

然后导航至“下载”并点击 iOS 5.0 模拟器上的“安装”。

![在此处输入图像描述](../Images/31929a9b4c7ce1da5752edcaacb883fe.png)

* * *

**这是过时的，但仅供参考**

使用较旧的 Xcode（iPhone 模拟器）版本，过去可以简单地将较旧的（不受支持的）iPhoneSimulator SDK 版本链接到正确的路径，但在 Mountain Lion 下似乎已经停止工作。只是为了提供一些关于如何完成的参考；

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs $ ln -s /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.3.sdk iPhoneSimulatorh4.3.sdk
root@lobomacpro-4 /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs $ ls -la
total 40
drwxr-xr-x  9 root  wheel  306 Aug  6 14:59 .
drwxr-xr-x  7 root  wheel  238 Jul 26 23:26 ..
lrwxr-xr-x  1 root  wheel   83 Aug  6 14:58 iPhoneSimulator3.2.sdk -> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator3.2.sdk
lrwxr-xr-x  1 root  wheel   83 Aug  6 14:58 iPhoneSimulator4.0.sdk -> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.0.sdk
drwxrwxr-x  8 root  admin  272 Oct 28  2011 iPhoneSimulator5.0.sdk
drwxr-xr-x  8 root  wheel  272 Jul 26 23:26 iPhoneSimulator5.1.sdk
lrwxr-xr-x  1 root  wheel   83 Aug  6 14:58 iPhoneSimulatorh4.1.sdk -> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.1.sdk
lrwxr-xr-x  1 root  wheel   83 Aug  6 14:59 iPhoneSimulatorh4.2.sdk -> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.2.sdk
lrwxr-xr-x  1 root  wheel   83 Aug  6 14:59 iPhoneSimulatorh4.3.sdk -> /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.3.sdk
root@lobomacpro-4 /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs $ 
```

这实际上似乎可行，因为它会导致模拟器中的以下选项； ![在此处输入图像描述](../Images/0789e74e2617028a8275f082afbe4b29.png)

问题是，在我的机器上，如果选择了任何不受支持的版本，模拟器在启动后就会停止工作。也许还有一种方法......只是我没有让它像以前在旧操作系统上那样工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:40:16.593

Xcode 4.4 + Mountain Lion 仅支持 iOS Simulator 5.0 及更高版本。但是，您可以安装 iOS 3.0 和 iOS 4.0 设备调试支持，这样您仍然可以通过转到 Xcode -> 首选项 -> 下载 -> 组件在运行 iOS 3.0 或 4.0 的设备上测试您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:38:10.730

您不能再下载较旧的模拟器 - 抱歉。但是您可以在首选项中下载对旧设备的调试支持。

Xcode - 首选项 -> 转到下载，然后转到组件。在那里您可以选择几个较旧的设备。

# python - functools.partial 和类似的 lambda 之间的区别？

> ID：11828410
> 
> 赞同：16
> 
> 时间：2012-08-06T12:36:08.637
> 
> 标签：python, lambda, partial, functools

在 Python 中，假设我有一个函数`f`，我想传递一些辅助参数（为简单起见，假设它只是第一个保持变量的参数）。

这两种方式（如果有的话）有什么区别？

```
# Assume secondary_args and secondary_kwargs have been defined

import functools

g1 = functools.partial(f, *secondary_args, **secondary_kwargs)
g2 = lambda x: f(x, *secondary_args, **secondary_kwargs) 
```

例如，在[文档页面中`partial`](http://docs.python.org/library/functools.html)，有这样的引用：

> `partial`在类中定义的对象的行为类似于静态方法，并且在实例属性查找期间不会转换为绑定方法。

如果使用提供给类的参数（在构造函数中或稍后通过函数）创建类方法，lambda 方法是否会受到此影响？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-06T12:41:06.237

1.  lambda 函数与标准函数具有相同的类型，因此它的行为类似于实例方法。

2.  您示例中的`partial`对象可以这样调用：

    ```
    g1(x, y, z) 
    ```

    导致这个调用（不是有效的 Python 语法，但你明白了）：

    ```
    f(*secondary_args, x, y, z, **secondary_kwargs) 
    ```

    lambda 只接受一个参数并使用不同的参数顺序。（当然，这两种差异都可以克服——我只是在回答您提供的两个版本之间的差异。）

3.  对象的执行`partial`略快于等效对象的执行`lambda`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-07-10T12:35:23.423

## 概括

常见用例之间的**实际差异**似乎是`lambda``functools.partial`

*   `functools.partial`需要进口，`lambda`不需要。
*   `functools.partial`只需打印创建的函数，就可以看到使用创建的函数的函数定义。使用 创建的函数`lambda`应使用 进行检查`inspect.getsource()`。

这些被发现实际上是**相同**的`lambda``functools.partial`

*   速度
*   追溯

## 速度（lambda vs functools.partial）

我认为测试和真实数据比仅仅猜测哪个比另一个更快更能说明问题。

看起来 和之间的***速度差异没有统计证据***。我用不同的重复次数进行了不同的测试，每次得到的结果都略有不同；这三种方法中的任何一种都可能是最快的。速度与 95% (2 sigma) 的置信度相同。以下是一些数值结果*`lambda``functools.partial`

```
# When functions are defined beforehand
In [1]: timeit -n 1000 -r 1000 f_partial(data)
23.6 µs ± 2.92 µs per loop (mean ± std. dev. of 1000 runs, 1000 loops each)

In [2]: timeit -n 1000 -r 1000 f_lambda(data)
22.6 µs ± 2.6 µs per loop (mean ± std. dev. of 1000 runs, 1000 loops each)

# When function is defined each time again
In [3]: timeit -n 1000 -r 1000 (lambda x: trim_mean(x, 0.1))(data)
22.6 µs ± 1.98 µs per loop (mean ± std. dev. of 1000 runs, 1000 loops each)

In [4]: timeit -n 1000 -r 1000 f_lambda = lambda x: trim_mean(x, 0.1); f_lambda(data)
23.7 µs ± 3.89 µs per loop (mean ± std. dev. of 1000 runs, 1000 loops each)

In [5]: timeit -n 1000 -r 1000 f_partial = partial(trim_mean, proportiontocut=0.1); f_partial(data)
24 µs ± 3.38 µs per loop (mean ± std. dev. of 1000 runs, 1000 loops each) 
```

## 追溯

我还尝试在插入字符串元素的情况下运行`f_lambda`和`f_partial`使用列表，并且回溯是相等的（当然，第一个条目除外）。所以那里没有区别。

## 检查源代码

*   `functools.partial`只需打印创建的函数，就可以看到使用创建的函数的函数定义。使用 创建的函数`lambda`应使用 进行检查`inspect.getsource()`。

```
# Can be inspected with just printing the function
In [1]: f_partial
Out[1]: functools.partial(<function trim_mean at 0x000001463262D0D0>, proportiontocut=0.1)

In [2]: print(f_partial)
functools.partial(<function trim_mean at 0x000001463262D0D0>, proportiontocut=0.1)

# Lambda functions do not show the source directly
In [3]: f_lambda
Out[3]: <function __main__.<lambda>(x)>

# But you can use inspect.getsource()
In [4]: inspect.getsource(f_lambda)
Out[4]: 'f_lambda = lambda x: trim_mean(x, 0.1)\n'

# This throws a ValueError, though.
In [5]: inspect.getsource(f_partial) 
```

## 附录

### * 测试中使用的设置

```
from functools import partial
from scipy.stats import trim_mean
import numpy as np
data = np.hstack((np.random.random(1000), np.random.random(50)*25000))

f_lambda = lambda x: trim_mean(x, 0.1)
f_partial = partial(trim_mean, proportiontocut=0.1) 
```

测试是在 Python 3.7.3 64 位 (Windows 10) 上执行的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-02T00:05:51.510

如前所述，partials 不仅比等效的 lambda 快约 20%，而且它们保留了直接引用，以反映它们的功能。而在 lambdas 中，该函数被“隐藏”在函数体内。

=> 如果您只需要解决将一个函数的评估推迟到所有参数都知道的问题，那么请使用部分函数。与将调用埋入匿名函数（即 lambda）相比，您将拥有更好的自省方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T12:40:26.297

我相信类方法的东西只适用于类定义期间分配的函数。稍后分配的功能不作特殊处理。

除此之外，我个人更喜欢 lambda，因为它们更常见，因此使代码更容易理解。

```
class Foo(object):
    def __init__(self, base):
        self.int = lambda x:int(x, base)

print Foo(4).int('11') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T12:40:35.250

是的，`lambda`会因此“受苦”。`partial`没有这个问题，因为它是一个调用运算符重载的对象，而不是一个真正的函数。

但是在类定义中使用这样的 lambda 只是误用。

# php - 在使用 php 成功进行 paypal 货币交易后提交表单

> ID：11828411
> 
> 赞同：6
> 
> 时间：2012-08-06T12:36:11.353
> 
> 标签：php, mysql, forms, transactions, paypal

我做了一个表格。当前，此表单执行以下操作：

1.  客户填写表格（创建订单）
2.  点击“提交”按钮
3.  所有表单条目都输入到数据库中。

我想将其更改为执行以下操作：

1.  客户填写表格
2.  在表格的最后有一个文本框显示这个订单将花费他多少。
3.  点击“提交”按钮（如果接受价格）
4.  重定向到贝宝
5.  如果付款成功 -> 所有表单条目都输入到数据库中。否则 -> 回显“交易失败”。

这是我到目前为止所做的：

**“form.php”内容**

```
<html><head><title>Title</title></head><body>
<form action="php-form-processor.php" method="post">
    <table border="0" cellspacing="5" width = "500">
        <tr>
            <td align="right" width="160">Choose an Item:</td>
            <td align="left">
            <select name="formItem" value="<?=$varItem;?>" class="input_full" >
                <option value="1">Cheese</option>
            </select>
            </td>
        </tr>
        <tr bgcolor="#D0E8F5">
            <td align="right" >Item count:</td>
            <td align="left">
                <input type="text" name="formItemCount" maxlength="50" value="<?=$varItemCount = 1;?>"  class="input_full" />
            </td>
        </tr>
    </table>
    <p align="center">
    <input type="submit" name="formSubmit" align = "center" value="Submit" />
    </p>
</form></body></html> 
```

**“php-form-processor.php”内容**

```
<?php
if($_POST['formSubmit'] == "Submit")
{
    $varItem = $_POST['formItem'];
    $varItemCount = $_POST['formItemCount'];

    //database stuff
    $username = "...";
    $password = "...";
    $hostname = "..."; 
 // connect and add to the database varItem and varItemCount
    mysql_query($sql);
    mysql_close($dbhandle);
}
?> 
```

表单要大得多，但我已经简化了 stackoverflow 的版本。订单的价格必须根据“varItem”和“varItemCount”的值而变化。基本上我想在将订单写入数据库之前添加“使用 PayPal 支付”选项。PS 我已经注册了 paypal Sandbox 账户并添加了“买家”和“卖家”。

接下来我该怎么办？

**编辑：好的，所以这是一个如何解决问题的小指南。**这里有一些建议：

*   首先，下载paypal IPN监听器包装器：[https ://github.com/Quixotix/PHP-PayPal-IPN](https://github.com/Quixotix/PHP-PayPal-IPN)
*   然后注册 SandBox 账户加 1 个买家和 1 个卖家账户
*   以卖家身份登录并创建一个表单（带有非托管按钮！）
*   将表单放入您的页面并通过“自定义”输入解析 ID 或任何其他必要信息（可以在此处找到一些有用的建议：http: [//www.devshed.com/c/a/PHP/Creating-a-Paypal -IPN-System-in-PHP-Part-2/](http://www.devshed.com/c/a/PHP/Creating-a-Paypal-IPN-System-in-PHP-Part-Two/) )
*   现在在表单提交后重定向到这个页面
*   不要忘记在 paypal 卖家帐户中启用 IPN 并将 IPNlistener 链接输入到必要的地址字段中
*   提交一个贝宝表单并等待监听器的响应
*   完毕

整个过程是这样的：

1.  客户填写表格
2.  提交表单后 - 所有条目都写入数据库 + ID + 1 个称为“已付款”的附加字段，表示：1 - 如果客户为订单付款，0 - 如果没有
3.  使用 header("Location: URL") 从 Form_Processing 重定向到 Paypal_Form
4.  使用“会话”将订单 ID 写入会话或使用 POST 消息
5.  提交 PaypalForm 并使用“自定义”字段作为我们订单 ID 的载体
6.  设置侦听器以更新数据库，如下所示：如果事务成功 -> 将数据库列“已支付”更新为 1（完成）。使用“自定义”字段中的 ID 选择所需的订单，即：

$sql = "UPDATE paypal_test SET payed = '1' WHERE id = '".$_POST['custom']."'";

现在我们有一个包含已完成和未完成表格的数据库。另外，您可以编写一个逻辑来删除“旧”未完成的订单。出于这个原因，您可以创建名为“日期”的附加列，然后比较： if (current_date.days - old_date.days > 7) -> 从数据库中删除。就是这样！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:50:16.617

好吧，您几乎已经描述了您需要做的事情：

*   第一：制作一个 onChange javascript，总结价值并将其发布在您想要的地方；
*   第二：提交后对值进行php检查（确保还检查注入问题）；
*   3rd：重定向到paypal并等待答案；
*   4：根据paypals的回答回显结果；

PS：我希望你不是在等待有人真正为你重写整个脚本；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:05:49.367

我不会接受 PayPal 回邮给您的内容，这是一种检查用户身份验证的草率方式，并希望用户单击“返回网站”按钮。而是使用 IPN (https://www.paypal.com/ipn/) 并确保将响应发回 PayPal 进行验证。

从 PayPal 签出这个 PHP 示例：[https ://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_admin_IPNImplementation](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_admin_IPNImplementation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-05T09:56:49.960

派对迟到了……但在 2021 年试试这个……

如果您想将自定义表单与 paypals 智能支付按钮 ( [https://developer.paypal.com/docs/checkout/](https://developer.paypal.com/docs/checkout/) ) 结合使用，那么您可以尝试这种方法。这对我有用，你也不需要 IPN（下面的方法是最新的，而且速度更快）。

在您的前端使用此（使用此您可以将表单数据发送到您的服务器）：
[https ://developer.paypal.com/demo/checkout/#/pattern/server](https://developer.paypal.com/demo/checkout/#/pattern/server)

在您的后端使用此（我将创建和捕获代码放在一个文件中）：
创建订单：
[https](https://developer.paypal.com/docs/checkout/reference/server-integration/set-up-transaction/)
://developer.paypal.com/docs/checkout/reference/server-integration/set-up-transaction/ 捕获订单：
[https](https://developer.paypal.com/docs/checkout/reference/server-integration/capture-transaction/)
://developer.paypal.com/docs/checkout/reference/server-integration/capture-transaction/ 设置：
[https ://developer.paypal.com/docs/checkout/reference/server-集成/设置-sdk/](https://developer.paypal.com/docs/checkout/reference/server-integration/setup-sdk/)

现在您可以在贝宝批准订单后将表单数据写入您的数据库。

在这里给出了类似的答案
[如何在 PayPal 付款后提交地址和付款详情的数据](https://stackoverflow.com/questions/64129612/how-to-submit-data-for-the-address-and-payment-details-after-paypal-payment-is-m/67397322#67397322)

# jquery - 尝试使用 ASP.net 发送电子邮件，无法将变量传递给 ashx 文件

> ID：11828420
> 
> 赞同：1
> 
> 时间：2012-08-06T12:37:12.680
> 
> 标签：jquery, asp.net, ashx

首先，我对 asp.net、jquery 和所有 web 端的东西都是全新的。我对其中的任何一个都没有很好的理解。我试图做一些研究，但我无法弄清楚我的问题。

我买了一个模板，现在正试图检查这个损坏的代码以使其正常工作。

我有一个联系表，字段如下所示：

```
<label class="name">
    <input type="text" value="Name:">
    <span class="error">*This is not a valid name.</span>
        <span class="empty">*This field is required.</span>
    <span class="clear"></span>
</label> 
```

有 3 或 4 个字段都是相同的，除了一个是 textarea。

现在我认为我的问题是，我没有从文本字段中获取值。要么，要么我没有正确发送值。

这是我的提交功能：

```
submitFu: function () {
    _.validateFu(_.labels)
    if (!_.form.has('.' + _.invalidCl).length)
        $.ajax({
                type: "POST",
                url: _.mailHandlerURL,
                dataType: 'json',
                data: {
                    'name': +_.getValFromLabel($('.name', _.form)),
                    'email': +_.getValFromLabel($('.email', _.form)),
                    'phone':  _.getValFromLabel($('.phone', _.form)),
                    'message': +_.getValFromLabel($('.message', _.form)),
                    'from': 'email@email.net',
                    'smtpMailServer': + _.smtpMailServer,
                    'stripHTML': 'false'
                    },
                success: function () { _.showFu() },
                error: function (data) { alert(data.responseText); }
}) 
```

这是我的“getValFromLabel”函数，我真的不明白：

```
getValFromLabel: function (label) {
        var val = $('input,textarea', label).val()
       , defVal = label.data('defVal')
        return label.length ? val == defVal ? 'nope' : val : 'nope'
} 
```

我戴上`alert(+_.getValFromLabel($('.message', _.form)))`提交功能，它显示“NaN”，这对我来说毫无意义。这就是为什么我认为我没有正确获得价值。联系表单返回没有发件人地址的错误。

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:40:10.643

[这是使用http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)的基本代码

```
<form method="post" class="cmxform" id="form" action="form.php">
    <fieldset>
        <legend>Login Form (Enter "foobar" as password)</legend>
        <p>
            <label for="user">Name</label>
            <input id="name" name="name" title="Please enter your name (at least 3 characters)" class="required" minlength="3" />
        </p>
        <p>
            <label for="email">Email</label>
            <input id="email" name="email" title="Please enter a valid email address" class="required email"/>
        </p>
        <p>
            <label for="phone">Phone</label>
            <input id="phone" name="phone" title="Please enter a valid phone number" class="required digits" minlength="10" maxlength="15" />
        </p>
        <p>
            <label for="phone">comment</label>
            <textarea id="comment" name="comment" title="Please enter a comment" class="required" rows="10" cols="50" ></textarea>
        </p>
        <p>
            <input class="submit" type="submit" value="Submit"/>
        </p>
    </fieldset>
</form> 
```

这是 javascript/jquery 代码

```
jQuery("#form").validate({
    submitHandler: function() {
        $.ajax({
            type: "POST",
            url: "EMAIL.ashx",//or you can code behind web method/webservice
            dataType: 'json',
            data: {
                'name': + $("#name").val(),
                'email': + $("#email").val(),
                'phone':  $("#phone").val(),
                'message': + $("#comment").val(),
                'from': 'email@email.net',
                'smtpMailServer': + $("#smtpserver").val(),
                'stripHTML': 'false'
                },
            success: function () { alert("email sent successfully") },
            error: function (data) { alert(data.responseText); }
        })              
    }
}); 
```

您应该将 url 指向您的 ashx 代码，因为您已经在上面发布了代码/示例，我不包括它，也不建议传递 smtp 详细信息，您可以从 web.config 获取 csharp 代码中的详细信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:12:40.927

如果您对 Web 语言不太熟悉，请尝试使用 ASP .NET 控件和 C# 发送电子邮件。

您的标记将类似于：

```
<asp:TextBox ID="Name" runat="server"></asp:TextBox>
<asp:Button ID="SendButton" runat="server" Text="Send" /> 
```

显然，这只是一个单独的文本框来容纳“名称”值和发送电子邮件的按钮。根据需要添加更多文本框。

然后，在 SendButton_Click 事件中，使用如下代码：

```
string MailBody;
MailMessage myMessage = new MailMessage();
SmtpClient smtpC = new SmtpClient();

myMessage.Subject = "Subject for Email";
myMessage.From = new MailAddress("youremailhere@provider.com", "Your Name");
myMessage.To.Add(new MailAddress("destinationemail@provider.com", "Receiver Name");

mailBody = Name.Text; //Get information from webpage

smtpC.send(myMessage); //Send the email via smtp 
```

确保将以下引用放在 C# 文件的顶部：

```
using System.IO;
using System.Net.Mail; 
```

此外，要使用 SMTP 客户端，您必须在 web.config 文件中添加一些配置，如下所示：

```
<system.net>
  <mailSettings>
    <smtp deliveryMethod="Network" from="youremail@gmail.com">
      <network enableSsl="true" userName="youremail@gmail.com"  password="yourpassword" host="smtp.gmail.com"/>
  </smtp>
</mailSettings> 
```

# reporting-services - SSRS 报告在 DateTime 字段上显示 #Error

> ID：11828422
> 
> 赞同：2
> 
> 时间：2012-08-06T12:37:25.893
> 
> 标签：reporting-services

我有一个查询在 SSRS 中显示名称为“<code>PostedOn”的 DateTime 字段。问题是当我使用 ASP.Net 查看我的报告时，报告仅在 PostedOn 字段上显示#Error。但是当我在设计器视图中查看我的报告时，它会正确显示 PostedOn 日期。如果我使用

```
= Fields!PostedOn.Value 
```

直接值，它显示 SSRS 上的 PostedOn 列为空。如果我使用

```
= CDate(Fields!PostedOn.Value).ToShortDateString() 
```

比它特别反弹 # `Error`。设计器显示正确的日期 `e.g. 08/06/2012.`

当我从 ASP.Net 应用程序查看此报告时。它显示 # `Error`。我已经检查过了

```
=Iif(IsNothing(Fields!PostedOn.Value),"",
CDate(Fields!PostedOn.Value).ToShortDateString())' 
```

也是，但到目前为止还没有运气。#`Error`显示在报告上。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T12:50:45.357

您应该检查日期时间最小值

```
 =IIf(CDate(Fields!PostedOn.Value)=CDate("1/1/0001"),Nothing,
 CDate(Fields!PostedOn.Value).ToShortDateString()) 
```

检查[这篇](https://stackoverflow.com/questions/8985854/datetime-as-empty-string-or-null-how-to-check)文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:24:11.470

也许值`PostedOn`是`NULL`当您从应用程序调用报告时，并且当您尝试在表达式中使用空值执行某些函数时，通常会给您错误。

当 SSRS 使用 iif 子句评估表达式时，将分别评估所有部分：条件、真值和假值，最后决定要推什么。

您在 Iif 表达式中具有字段功能`ToShortDateString()`，`PostedOn`因此当 PostedOn 为 NULL 时，可能会给您一个错误。

尝试检查什么应用程序发送报告。

# javascript - JS 中的条件运算符 - 失败的语法错误

> ID：11828423
> 
> 赞同：-3
> 
> 时间：2012-08-06T12:37:28.917
> 
> 标签：javascript

我想知道 JS 中的以下条件运算符有什么问题。

```
function somehting(){
   jsonVal = ['test', 'test2'];
   return (jsonVal.length > 0) ? true : false;
} 
```

它在第一个括号上抱怨`(`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:43:51.477

您发布的代码工作正常，您可能在文件的其他地方有语法错误。

```
return (jsonVal.length > 0) ? true : false; 
```

也可以写成：

```
return jsonVal.length > 0; 
```

# php - CodeIgniter 和提交回调

> ID：11828425
> 
> 赞同：0
> 
> 时间：2012-08-06T12:37:34.070
> 
> 标签：php, codeigniter

每当数据库中有游戏的标题和平台与提交的游戏相同时，我想检查（在提交到数据库之前）。

我有这个控制器：

```
 public function addGame($id = null) { // ID is for children games
    $this->load->library(array('images','form_validation'));
    $this->load->helper('form');
    $this->load->model('contrib_model');

    $this->form_validation->set_rules('gameTitle', 'Tytuł gry', 'required|callback_checkGamePlatform');

    if($this->form_validation->run() == FALSE) {
        $data['title'] = 'Dodaj grę';
        $data['genres'] = $this->contrib_model->getGenres();
        $data['platforms'] = $this->contrib_model->getPlatforms();
        $data['developers'] = $this->contrib_model->getDevelopers();

        $this->template->load('template','theme/contribute/addGame',$data);
    } else {
        $data['submit'] = $this->contrib_model->insertGame();; //submits data
        $this->load->view('theme/contribute/emptyPage', $data); //loads view
    }
}

public function checkGamePlatform() {
    $platform = $this->input->post('gamePlatform');
    $game = $this->input->post('gameTitle');

    $q = $this->contrib_model->checkGame($game,$platform);
    echo $q;
    if($q === '0') {
        $this->form_validation->set_message('checkGamePlatform','gra istnieje');
    }
} 
```

而这个模型：

```
 function checkGame($name,$platform) {
    $q = $this->db->get_where('games',array(
        'name' => $name,
        'plat' => $platform
    ));

    return $q -> num_rows();

} 
```

问题是，它根本不起作用。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:47:24.933

如果有相同类型的游戏，您将希望返回错误消息。此外，回调必须返回布尔值。

在`checkGamePlatform`：

```
if ($q > 0) {
     $this->form_validation->set_message('checkGamePlatform','gra istnieje');
     return FALSE;
}
return TRUE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:42:21.410

改变

```
if($q === '0') 
```

至

```
if($q === 0) 
```

因为`num_rows()`在与字符串进行比较时将返回整数值。

# uitableview - 静态 UITableView 中的单元格宽度

> ID：11828427
> 
> 赞同：0
> 
> 时间：2012-08-06T12:37:37.423
> 
> 标签：uitableview, static, width, cell

我在我的应用程序中使用带有静态表格视图的 UITableViewController 作为选项面板。我有一个显示圆形边框面板的背景图像，我想将静态单元格放入此图像中。不幸的是，似乎无法设置单元格宽度，并且表格试图获得尽可能多的空间。

我该如何解决？

非常感谢

克劳斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:08:20.180

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    cell.textLabel.font = [UIFont boldSystemFontOfSize:16];

    //cell background image
    UIImageView *backgroundView = [[UIImageView alloc] initWithFrame:CGRectZero];
    cell.backgroundView = backgroundView;
    backgroundView.image = [UIImage imageNamed:@"backgroundimage.png"];

    return cell;
} 
```

# facebook - Facebook 获取已发送邀请的数量

> ID：11828434
> 
> 赞同：-1
> 
> 时间：2012-08-06T12:38:12.587
> 
> 标签：facebook

我想在数据库中保存一些已发送的邀请，这是我的代码：

> ```
>  $request_ids = explode(",", $_REQUEST['request_ids']); 
> 
>       foreach ($request_ids as $id)
>     {             $sql = "INSERT IGNORE INTO fb_invites (sender_id, recipient_id, created_time) VALUES(".(int)$me['id'].", ".(int)$id.",NOW())";
>       $result = mysql_query($sql) or die(mysql_error());
>     } 
> ```

```
 } 
```

但它确实有效。你能说我如何获得收件人ID吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:13:11.800

请尝试使用 $_REQUEST["to"] 而不是 $_REQUEST['request_ids']。前一段时间我遇到过类似的问题，我尝试使用 $_REQUEST["to"] 它对我有用。我不确定现在是否一样。可能你可以试一试。

# c# - C# 如何使用 NAudio API 从输出设备（扬声器）录制一般音频

> ID：11828437
> 
> 赞同：3
> 
> 时间：2012-08-06T12:38:26.313
> 
> 标签：c#, audio-recording, naudio, speaker

我正在尝试记录扬声器输出以检测任何使用 C# 和 NAudio API 播放的音乐的音量和 BPM。

问题是，我不知道该怎么做：/

我有一个来自[http://opensebj.blogspot.de/2009/04/naudio-tutorial-5-recording-audio.html](http://opensebj.blogspot.de/2009/04/naudio-tutorial-5-recording-audio.html)的示例代码，他们用更少的代码记录简单的输入......

```
waveInStream = new WaveIn(44100,2); 
```

“44100, 2”是什么意思？这是否针对要记录的设备???

我如何定位扬声器输出？

有人可以帮帮我吗？甚至使用另一个 API？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T23:15:31.837

您可能正在寻找的是`WasapiLoopbackCapture`类，它允许您录制计算机产生的所有声音。**注意**：这仅适用于 Windows Vista/7！

要开始录制，请执行以下操作：

```
waveIn = new WasapiLoopbackCapture();
waveIn.DataAvailable += InputBufferToFileCallback;    
waveIn.StartRecording(); 
```

然后，每次录制缓冲区满时，`InputBufferToFileCallback`都会调用该函数：

```
public void InputBufferToFileCallback(object sender, WaveInEventArgs e)
{
  // The recorder bytes can be found in e.Buffer
  // The number of bytes recorded can be found in e.BytesRecorded
  // Process the audio data any way you wish...
} 
```

我认为您链接的教程已将您置于错误的轨道上，因为在当前版本的 NAudio 中，我看不到`new WaveIn(44100,2);`构造函数。自本教程首次编写以来，NAudio 可能已被修改。

最后一点，数字 44100 和 2 分别表示采样率和通道数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-08T02:55:57.530

正如在接受的答案中所说，您所遵循的教程中的代码来自旧版本的 NAudio，在该版本中，需要将采样率和通道数作为参数传递给`WaveIn`构造函数。

正如答案建议您使用`WasapiLoopbackCapture`，也许这可以补充它。

NAudio 的较新实现不将采样率 ( `44100`) 和通道数 ( `2`) 作为`WaveIn`构造函数的参数。您可以简单地调用`WaveIn`不带参数的构造函数：

```
waveInStream = new WaveIn(); 
```

# java - 我的 WebApp 如何通过 Tomcat Valve 检索数据集？

> ID：11828440
> 
> 赞同：1
> 
> 时间：2012-08-06T12:38:32.710
> 
> 标签：java, tomcat, servlets, jsf-2, tomcat-valve

我正在尝试检索由 JSF2 支持 bean（或 servlet）中的自定义 Tomcat Valve 设置的值。我看不到如何做到这一点，也找不到使用 Google 的任何示例。

背景：在我的 JSF2 Web 应用程序中，我需要为每个用户添加一个时区属性。实现这一点的最简单方法是在用户个人资料页面中添加一个时区下拉菜单，以便每个用户都可以选择合适的时区。然而，这可以自动化，因为[浏览器中的一些 JavaScript](https://stackoverflow.com/a/1809974/226513)能够自动计算时区。

所以我在我的 Tomcat 登录页面上放置了一个新参数，它提供了这个值，Web 应用程序可以在登录时捕获它。Tomcat 表单身份验证机制负责处理登录页面（通过 HTTP POST 到 j_security_check）。我实现了一个 Java EE Servlet 过滤器来捕获这个，但是 Tomcat 的登录机制绕过了过滤器，所以这段代码永远不会看到 POST 到 j_security_check。

我现在已经实现了一个 Tomcat Valve，我可以成功地将 POST 捕获到 j_security_check。在代码中，我提取时区值并将其放在......在哪里？

我知道阀门（必须放在 TOMCAT_HOME/lib 中）与我的常规 JSF2 代码具有不同的类加载器。这意味着我无法从我的 JSF2 代码访问阀门的任何静态成员。

因此，受到标准 Tomcat 阀门源代码的启发，我在阀门中尝试了这个：

```
final org.apache.catalina.Session session = request.getSessionInternal(true);
session.setNote("com.conexa.timezoneOffset", timezoneOffset); 
```

但是，在我的 JSF2 托管 bean 中，我无法获得对 org.apache.catalina.Session 的引用。

此代码返回一个 StandardSessionFacade 类型的对象，它不允许我访问 org.apache.catalina.Session。

FacesContext.getCurrentInstance().getExternalContext().getSession(false);

在调试模式下运行，我已经能够找到 org.apache.catalina.Session，但 'notes' 字段实际上是空的。

我还认为 Tomcat 可能会使用一个会话进行登录，然后再创建一个新会话（可能与[Session Fixation Protection](http://www.tomcatexpert.com/blog/2011/04/25/session-fixation-protection)相关）。如果确实如此，我认为问题会更加复杂。

任何 Tomcat 大师有什么好主意吗？普通 servlet 的解决方案也是可以接受的，因为我确信我能够适应它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:22:53.317

好的，我知道了！

在阀门代码中：

```
final HttpSession session = request.getSession(true);
session.setAttribute("timezoneOffset", timezoneOffset); 
```

在 JSF2 代码中：

```
final ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
final String timezoneOffsetStr = "" + externalContext.getSessionMap().get("timezoneOffset"); 
```

# vhdl - 我应该如何发送并发数据？

> ID：11828441
> 
> 赞同：0
> 
> 时间：2012-08-06T12:38:34.923
> 
> 标签：vhdl

我设计了 16 个不同的 16 位矢量信号，这些信号显示在 LCD 上。一个信号可能看起来像“FFFF”，其中 4 位代表一个十六进制字符。我通过串行接口向 LCD 发送数据。现在的问题是，这 16 个信号中的每一个都可能同时发生变化，我该如何在我的设计中考虑这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:06:02.257

你需要分解问题。

首先处理捕获 16 x 16 = 256 位。如果这些与某个公共时钟同步，那么你就可以了，否则你需要在每个信号上使用一个反亚稳态锁存器，每个信号至少有两个锁存器。（512 个闩锁）。

现在您的所有信号都锁定在同一个时钟上，因此创建一个移位寄存器以移出任何特定模式的位很简单。

您需要确保被移位的数据永远不会与第一个时钟同时发生变化，要么对数据进行双重缓冲，要么使用更快的时钟。

# sql - 在 AIX 上执行查询导致挂起

> ID：11828447
> 
> 赞同：0
> 
> 时间：2012-08-06T12:38:47.060
> 
> 标签：sql, windows, oracle, aix

我有一个在 Windows 和 AIX 上运行的服务器应用程序，当客户端应用程序连接到在 Windows 上运行的实例并执行向服务器端发送查询的报告时，一切正常，但是当客户端应用程序连接到服务器实例时在 AIX 上运行并执行向服务器端发送相同查询的相同报告时，应用程序挂起。

经过调查，我发现查询导致挂起，因为我在 AIX 上使用 sqlplus 直接从命令行运行查询，它也确实挂起。

我必须注意，数据库是在具有 Windows Server 的不同机器上运行的 Oracle。

我正在谈论的查询是：

```
select z_name, s_date,
        n_count, f_count, m_count, s_count, d_count, a_count,
        (n_count + f_count + m_count + s_count + d_count + a_count) as d_total
from
(select z_name, s_date,
          nvl((select s_count from vReport S1 where S1.z_id = S.z_id and S1.s_date = S.s_date and s_app = 'NC'), 0) as n_c_count,
          nvl((select s_count from vReport S1 where S1.z_id = S.z_id and S1.s_date = S.s_date and s_app = 'FS'), 0) as f_s_count,
          nvl((select s_count from vReport S1 where S1.z_id = S.z_id and S1.s_date = S.s_date and s_app = 'MC'), 0) as m_c_count,
          nvl((select s_count from vReport S1 where S1.z_id = S.z_id and S1.s_date = S.s_date and s_app like 'SAA %'), 0) as s_c_count,
          nvl((select s_count from vReport S1 where S1.z_id = S.z_id and S1.s_date = S.s_date and s_app = 'DC'), 0) as d_c_count,
          nvl((select s_count from vReport S1 where S1.z_id = S.z_id and S1.s_date = S.s_date and s_app = 'SA'), 0) as a_c_count,
          nvl((select sum(s_count) from vReport S1 where S1.z_id = S.z_id), 0) as d_total
from rvReport S
where s_date between TO_DATE('2012-08-01 00:00:00','YYYY-MM-DD HH24:MI:SS') and  TO_DATE('2012-08-02 23:59:59','YYYY-MM-DD HH24:MI:SS')
and  z_id in (3,61,41,21) 
union 
select distinct z_name, SYSDATE,
          nvl((select sum(s_count) from vReport S1 where S1.z_id = S.z_id and s_app = 'NC' and s_date between TO_DATE('2012-08-01 00:00:00','YYYY-MM-DD HH24:MI:SS') and  TO_DATE('2012-08-02 23:59:59','YYYY-MM-DD HH24:MI:SS')), 0) as n_c_count,
          nvl((select sum(s_count) from vReport S1 where S1.z_id = S.z_id and s_app = 'FS' and s_date between TO_DATE('2012-08-01 00:00:00','YYYY-MM-DD HH24:MI:SS') and  TO_DATE('2012-08-02 23:59:59','YYYY-MM-DD HH24:MI:SS')), 0) as f_s_count,
          nvl((select sum(s_count) from vReport S1 where S1.z_id = S.z_id and s_app = 'MC' and s_date between TO_DATE('2012-08-01 00:00:00','YYYY-MM-DD HH24:MI:SS') and  TO_DATE('2012-08-02 23:59:59','YYYY-MM-DD HH24:MI:SS')), 0) as m_c_count,
          nvl((select sum(s_count) from vReport S1 where S1.z_id = S.z_id and s_app like 'SAA %' and s_date between TO_DATE('2012-08-01 00:00:00','YYYY-MM-DD HH24:MI:SS') and  TO_DATE('2012-08-02 23:59:59','YYYY-MM-DD HH24:MI:SS')), 0) as s_c_count,
          nvl((select sum(s_count) from vReport S1 where S1.z_id = S.z_id and s_app = 'DC' and s_date between TO_DATE('2012-08-01 00:00:00','YYYY-MM-DD HH24:MI:SS') and  TO_DATE('2012-08-02 23:59:59','YYYY-MM-DD HH24:MI:SS')), 0) as d_c_count,
          nvl((select sum(s_count) from vReport S1 where S1.z_id = S.z_id and s_app = 'SA' and s_date between TO_DATE('2012-08-01 00:00:00','YYYY-MM-DD HH24:MI:SS') and  TO_DATE('2012-08-02 23:59:59','YYYY-MM-DD HH24:MI:SS')), 0) as a_c_count,
          nvl((select sum(s_count) from vStats S1 where S1.z_id = S.zone_id  and s_date between TO_DATE('2012-08-01 00:00:00','YYYY-MM-DD HH24:MI:SS') and  TO_DATE('2012-08-02 23:59:59','YYYY-MM-DD HH24:MI:SS')), 0) as z_total
from rvReport S
where s_date between TO_DATE('2012-08-01 00:00:00','YYYY-MM-DD HH24:MI:SS') and  TO_DATE('2012-08-02 23:59:59','YYYY-MM-DD HH24:MI:SS')
and z_id in (3,61,41,21)
) STEMP 
```

注意：我忘了说，如果去掉union后select语句中的条件“and z_id in (3,61,41,21)”，查询会在AIX上执行，不会挂起，会返回错误的数据。

# mongodb - 在 mongo 控制台中找到它们后如何批量删除 MongoDB 中的文档？

> ID：11828448
> 
> 赞同：0
> 
> 时间：2012-08-06T12:38:47.907
> 
> 标签：mongodb

我想减轻我的生活，而不是编写任何代码来查找集合中的一些文档，然后删除它们，我想通过使用 mongo 控制台来做到这一点：

```
$ db.collection.find({something here which has reutrn value }).find() 
```

我想做类似于以下的事情：

```
$ db.collection.find({something here which has reutrn value }).find().remove() 
```

这是不可能的，那么在不编码的情况下摆脱某些文档的最快方法是什么？还是不知道文件的 ID？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T12:42:53.273

这是您删除文档的方式：

```
db.things.remove({your_query}); 
```

您可以先通过以下方式找到它们：

```
db.things.find({your_query}).pretty(); 
```

见[http://www.mongodb.org/display/DOCS/Removing](http://www.mongodb.org/display/DOCS/Removing)

# database - 如何将外键映射为 Grails 中的主键？

> ID：11828454
> 
> 赞同：1
> 
> 时间：2012-08-06T12:39:11.510
> 
> 标签：database, grails, mapping, grails-orm, legacy

我有一个与主键和外键具有相同属性的旧数据库。我正在尝试从 Grails 映射它，但我遇到了问题。这是我的域类：

```
class AccommodationPrice {
    Integer id
    Accommodation accommodation

    static mapping = {
         table 'alojamiento_precios'
         id generator: 'assigned', name: accommodation, type: 'integer'
         accommodation column: 'id'
    }
} 
```

这是数据库表：

```
CREATE TABLE alojamiento_precios
(
  id integer NOT NULL,
  CONSTRAINT alojamientoprecios_pkey PRIMARY KEY (id),
  CONSTRAINT "FK alojamiento" FOREIGN KEY (id)
      REFERENCES alojamiento (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
) 
```

我读了这个问题[Grails: Foreign key as primary key?](https://stackoverflow.com/questions/4936542/grails-foreign-key-as-primary-key) 但这对我不起作用：当我使用复合键时，grails 要求我提供**accommodation_id**，但我的表中没有这个属性，因为它是**id**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:50:34.840

如果你想要的只是将一个属性映射为一个 id，你可以像 () 那样做：

```
 class AccommodationPrice {

        String price

        long accomodationId

        static mapping = {
             table 'alojamiento_precios'
             id generator: 'assigned', name:'accomodationId'
         version false
        }

        static transients = ['accomodation']

        Accomodation getAccomodation() {
        Accomodation.get(accomodationId)
        }

        void setAccomodation(Accomodation a) {
             accomodationId = a?.id
        }
    } 
```

你甚至不需要声明你想要的类型，GORM 假定你的住宿主键的类型。但是，在使用某些条件查询时您可能会遇到问题。但是 HQL 很简单并且可以正常工作。

这种策略称为主键关联，您可以在[此处](http://comments.gmane.org/gmane.comp.lang.groovy.grails.user/111812)的 gorm 上找到关于它的很好的讨论。

我希望它有帮助！

# javascript - 限制滚动到 DIV

> ID：11828457
> 
> 赞同：3
> 
> 时间：2012-08-06T12:39:23.960
> 
> 标签：javascript, html, scrollbar

这是我遇到过几次的烦恼，所以我认为最好看看是否有解决它的好方法。我在不同的地方有许多“可滚动”DIV 元素的实例，它们几乎完全按照预期工作，除了当鼠标滚轮或触控板控制滚动时。

主要问题是，一旦 div 到达其滚动条的底部，命令就会转移到主滚动条，这会令人讨厌地改变用户页面的位置。我注意到在此页面顶部的“可能已经有你的答案的问题”框也发生了同样的事情，我目前正在输入的框也是如此，这让我认为这是标准发生的事情，但是我确信我过去使用过需要我将光标移到元素之外才能滚动主页的网站。

有没有办法克服这个问题？如果这是最好的解决方案，我很乐意使用 Javascript，我最初的想法是某种 onmouseover 命令可以锁定屏幕，直到发生 onmouseout 但我的 JS 非常有限，我找不到类似的东西来适应。

我正在使用的 DIV 元素的一个示例是：

```
<div id='bodytext' 
style='width:300px; height:300px; z-index:4; visibility: visible; overflow: auto;'>
Data more than 300px high
</div> 
```

提前感谢您的帮助，如果不可能，那么澄清仍然非常有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-02T17:14:39.010

您可以在可滚动目标元素上侦听滚轮事件，并仅在达到“滚动结束”时才阻止默认行为。

```
var el = document.getElementById("Element");
var wrapper = document.getElementById("Wrapper");
wrapper.addEventListener("wheel", wheelEvent);

function wheelEvent(e){
  var space = (wrapper.scrollHeight - wrapper.offsetHeight) - wrapper.scrollTop;
    if(e.deltaY < 0){
    if(wrapper.scrollTop == 0){
      e.preventDefault();
      e.stopPropagation();
    }
  }else if(space <= 0){
    e.preventDefault();
    e.stopPropagation();
  }
} 
```

这是一个工作示例： [https ://jsfiddle.net/rivieremanuel/rcxa6csr/4/](https://jsfiddle.net/rivieremanuel/rcxa6csr/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:05:20.820

您需要查看[DOM 滚动事件](http://www.quirksmode.org/dom/events/scroll.html)并确定当前正在滚动的元素。基本上，一旦您能够确定事件正在发生在父元素上，您就会想要[停止该事件](https://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T13:05:46.337

如果您使用的是 jquery，您可以执行类似的操作

```
$(document).ready(function(){
  $('#bodytext').on('mouseenter', function()
  {
    $('body').css('overflow', 'hidden');
  });
  $('#bodytext').on('mouseleave', function()
  {
    $('body').css('overflow', 'visible');
  });
}); 
```

这将在您进入该框时自动隐藏正文的滚动条，并在您离开时添加它。

# c# - 如何在 C# 中将数组从 jquery 发送到 webmethod

> ID：11828459
> 
> 赞同：0
> 
> 时间：2012-08-06T12:39:30.637
> 
> 标签：c#, jquery, webmethod

我想将一个数组传递给 ac# webmethod，但没有一个很好的例子可以效仿。感谢您的任何帮助。

这是我到目前为止所拥有的：

我的数组：

```
function ReadAllGridviewData() {

    var ArrayUph = new Array();

    GVUPHLineItems = document.getElementById("GVUPHLineItems");
    for (var i = 1; i < GVUPHLineItems.rows.length; i++) {
        var txtQty = GVUPHLineItems.rows[i].cells[1].getElementsByTagName('input');
        var txtStyle = GVUPHLineItems.rows[i].cells[2].getElementsByTagName('input');
        var spanstyleDesc = GVUPHLineItems.rows[i].cells[3].getElementsByTagName('span');
        var txtPackage = GVUPHLineItems.rows[i].cells[4].getElementsByTagName('input');
        var txtPrice = GVUPHLineItems.rows[i].cells[7].getElementsByTagName('input');
        if (txtStyle[0].value != '' && txtQty[0].value !='') {
            var ArryUph = new Array();
            ArryUph['LineNumber'] = i;
            ArryUph['Quantity'] = txtQty[0].value;
            ArryUph['Style'] = txtStyle[0].value;
            ArryUph['StyleDescription'] = spanstyleDesc[0].innerHTML;
            ArryUph['Package'] = txtPackage[0].value;
            ArryUph['SelectFlag'] = 'N';
            ArryUph['Price'] = 0.0;
            var ArryStyle = new Array();
            for (var j = 0; j < 6; j++) {
                var spanStyle = GVUPHLineItems.rows[i].cells[5].childNodes[1].childNodes[1].childNodes[1].childNodes[j].cells[0].innerText;
                var inputCoverId = GVUPHLineItems.rows[i].cells[5].childNodes[1].childNodes[1].childNodes[1].childNodes[j].cells[1].getElementsByTagName('input');
                var inputColorID = GVUPHLineItems.rows[i].cells[5].childNodes[1].childNodes[1].childNodes[1].childNodes[j].cells[2].getElementsByTagName('input');
                if (inputCoverId[0].value != '' && inputColorID[0].value != '') {
                    var tempArryStyle = new Array();
                    tempArryStyle['CoverPosition'] = spanStyle;
                    tempArryStyle['CoverID'] = inputCoverId[0].value;
                    tempArryStyle['ColorID'] = inputColorID[0].value;
                    ArryStyle.push(tempArryStyle);
                }
            }
            var ArryOptions = new Array();
            for (var k = 0; k < 6; k++) {
                var inputOpt = GVUPHLineItems.rows[i].cells[6].childNodes[1].childNodes[1].childNodes[1].childNodes[k].cells[0].getElementsByTagName('input');
                if (inputOpt[0].value != '') {
                    var tempArryOptions = new Array();
                    tempArryOptions['Opt'] = inputOpt[0].value;
                    ArryOptions.push(tempArryOptions);
                }
            }
            ArryUph['StyleCovers'] = ArryStyle;
            ArryUph['Options'] = ArryOptions;
            ArrayUph.push(ArryUph);
        }
    } 
```

这是我的 Jquery 调用：

```
$.ajax({ type: "POST",
         url: "OrderEntry.aspx/ValidateUph",
         data: JSON.stringify({ ArrayUph: ArrayUph }),
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         success: function (data) {
              var validstyle = data.d;
         }
 }); 
```

# php - 如何从子实例调用父函数？

> ID：11828463
> 
> 赞同：24
> 
> 时间：2012-08-06T12:39:53.643
> 
> 标签：php, doctrine

我有模特

```
BaseUser.class.php
User.class.php
UserTable.class.php 
```

**在用户类** 中，我已经覆盖了删除功能

```
class User extends BaseUser {
   function delete(){
    }
} 
```

现在，如果我想调用父删除函数....怎么办？

**例子**

```
$user = new User();
$user->delete();  // will call the overridden delete
$user-> ??  ;     // want to call parent delete 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-06T12:55:32.227

从技术上讲，这在“外部”（公共接口）是不可能的，这是有充分理由的。

如果您了解原因（否则请阅读下文），并且您确实知道自己在做什么，那么没有理由不提供该功能：

```
class User extends BaseUser {
   ... 
   function parentDelete(){
       parent::delete();
   }
   ...
}

user = new User();
$user->delete();  // will call the overridden delete
$user->parentDelete();     // want to call parent delete 
```

但是，如果您这样做，您应该知道您以某种方式滥用了继承。这一定是一种特殊情况，因为我无法想象您实际上需要这样做的任何情况。

因此，请尝试制定您需要该功能的原因，以便为自己提供更好的建议。

> 为什么这么糟糕？

原因很简单：在您的软件中，您不需要知道`$user`是否有父级。这是您根本不应该关心的一些细节。

这将允许您稍后将软件中的任何用户对象替换为用户的子对象。这很重要，因为您希望随着时间的推移更改您的软件。

如果您将内部细节作为公共界面的一部分，那么您就是在剥夺自己保持灵活性的可能性。不灵活确实是一种糟糕的情况。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-06T12:42:15.890

也许试试这个

```
parent::delete(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-06T12:42:19.063

我认为您正在寻找 PHP[父](http://php.net/manual/en/keyword.parent.php)函数：

```
<?php
class A {
    function example() {
    echo "I am A::example() and provide basic functionality.<br />\n";
    }
}

class B extends A {
    function example() {
    echo "I am B::example() and provide additional functionality.<br />\n";
    parent::example();
    }
}

$b = new B;

// This will call B::example(), which will in turn call A::example().
$b->example();
?> 
```

如果您的类没有名为 getMyFunction() 的函数，则调用`$b->getMyFuction()`将调用父函数。如果是，它将调用子函数，除非子函数调用 prent 函数。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-06T12:56:38.740

`delete`如果您需要一次致电父母，为什么需要延期？

为什么不创建自定义删除？

像：

```
public function customDelete()
{
  parent::delete();

  // do extends delete here
} 
```

然后您可以使用删除对象`->customDelete()`，也可以从父级调用 delete 方法，因为您没有覆盖该`delete()`方法：

```
$user = new User();
$user->customDelete();  // will call the overridden delete
$user->delete(); // will call the parent (since you didn't override it) 
```

如果你**真的**需要重写这个`delete()`函数，你仍然可以创建一种父删除：

```
public function parentDelete()
{
  return parent::delete();
} 
```

然后：

```
$user = new User();
$user->delete();  // will call the overridden delete
$user->parentDelete(); // will call the method that only call the parent 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-04T15:39:26.617

可以使用`call_user_func`. 是的，这是不好的做法，但有可能。

```
class BaseUser {
    public function delete()
    {
        echo 'BaseUser deleted';
    }
}

class User extends BaseUser{
    public function delete()
    {
        echo 'User deleted';
    }
}

$instance = new User();

call_user_func(array($instance, 'parent::delete')); 
```

结果：

```
BaseUser deleted 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-06T12:59:39.447

我在codingforums上找到[了这个](http://www.codingforums.com/showthread.php?t=149958)帖子。它所说的（我倾向于同意他们的观点）是，如果您在子类中有重写的函数/方法，则该对象的实例将始终调用子方法。

`parent`关键字类似于`$this`or并且`self`只能从类本身中调用。

如果您希望子对象能够调用父方法，只需创建另一个方法

```
function parentExample() { 
    parent::example(); 
} 
```

它只调用父方法。

# java - 使用随机访问文件的 EOFException

> ID：11828469
> 
> 赞同：1
> 
> 时间：2012-08-06T12:40:14.253
> 
> 标签：java, file-io, arraylist, random-access, eofexception

我正在使用随机访问文件来编写使用 arrayList 存储的 raf。我不知道它是否可以完成，但我正在尝试，因为它是我创建此应用程序的最佳解决方案。

这是我得到的运行时错误：

```
Exception in thread "main" java.io.EOFException
at java.io.RandomAccessFile.readChar(Unknown Source)
at Student.read(Student.java:93)
at MainApp.start(MainApp.java:60)
at MainApp.main(MainApp.java:17) 
```

这是我的代码：

```
MainApp
    import java.io.BufferedReader;
    import java.io.BufferedWriter;
    import java.io.File;
    import java.io.FileNotFoundException;
    import java.io.FileReader;
    import java.io.FileWriter;
    import java.io.IOException;
    import java.io.PrintWriter;
    import java.io.RandomAccessFile;

public class MainApp
{

    public static void main(String[] args) throws Exception 
    {
        new MainApp().start();

    }
    public void start()throws Exception 
    {
        StudentStore details = new StudentStore();
        //Student a = new Student("Becky O'Brien", "DKIT26", "0876126944", "bexo@hotmail.com");

        //details.print();

         RandomAccessFile raf = new RandomAccessFile("ContactDetails.txt", "rw");

         Student a = new Student("Becky O'Brien", "DKIT26", "0876126944", "bexo@hotmail.com");
         Student b = new Student("Fabio Borini", "DKIT28", "0876136944", "fabioborini@gmail.com");
         Student c = new Student("Gaston Ramirez", "DKIT29", "0419834501", "gramirez@webmail.com");
         Student d = new Student("Luis Suarez", "DKIT7", "0868989878", "luissuarez@yahoo.com");
         Student e = new Student("Andy Carroll", "DKIT9", "0853456788", "carroll123@hotmail.com");
         details.add(a);
         details.add(b);
         details.add(c);
         details.add(d);
         details.add(e);
            for (int i = 0; i < details.size(); i++) 
            {
              //a.setStudentName(a[i]);
              //a.setLastName(lnames[i]);
             // a.setAddress(addresses[i]);
             // a.setAge(ages[i]);
             // a.setSalary(salaries[i]);
              a.write(raf);
            }
            raf = new RandomAccessFile("employee.dat", "rw");

           // er = new Student();

            int numRecords = (int) raf.length() / details.size();

            for (int i = 0; i < numRecords; i++) {
              a.read(raf);

              System.out.print(a.getStudentName() + " ");
              System.out.print(a.getStudentId() + " ");
              System.out.print(a.getStudentEmail() + " ");
              System.out.print(a.getStudentTelephoneNumber() + " ");
            }
            raf.seek(0);
            for (int i = 0; i < numRecords; i++) 
            {
              a.read(raf);
                raf.seek(raf.getFilePointer() - details.size());
                a.write(raf);
                raf.seek(raf.getFilePointer() - details.size());
                a.read(raf);
              }
              System.out.print(a.getStudentName() + " ");
              System.out.print(a.getStudentId() + " ");
              System.out.print(a.getStudentEmail() + " ");
              System.out.print(a.getStudentTelephoneNumber() + " ");
            }

          } 
```

学生

```
import java.io.IOException;
import java.io.RandomAccessFile;

public class Student 
{
//---------------------------------------------------------------------------
//  Class Variables.
//---------------------------------------------------------------------------   
    private String studentName;
    private String studentId;
    private String studentTelephoneNumber;
    private String studentEmail;
//---------------------------------------------------------------------------
//  Constructor.
//---------------------------------------------------------------------------   
    public Student(String studentName, String studentId,String studentTelephoneNumber, String studentEmail) 
    {
        this.studentName = studentName;
        this.studentId = studentId;
        this.studentTelephoneNumber = studentTelephoneNumber;
        this.studentEmail = studentEmail;
    }
//---------------------------------------------------------------------------
//  Getters.
//---------------------------------------------------------------------------
    public String getStudentName()
    {
        return studentName;
    }
    public String getStudentId() 
    {
        return studentId;
    }
    public String getStudentTelephoneNumber() 
    {
        return studentTelephoneNumber;
    }
    public String getStudentEmail() 
    {
        return studentEmail;
    }
//---------------------------------------------------------------------------
//  Setters.
//---------------------------------------------------------------------------
    public void setStudentName(String studentName) 
    {
        this.studentName = studentName;
    }
    public void setStudentId(String studentId) 
    {
        this.studentId = studentId;
    }
    public void setStudentTelephoneNumber(String studentTelephoneNumber) 
    {
        this.studentTelephoneNumber = studentTelephoneNumber;
    }
    public void setStudentEmail(String studentEmail) 
    {
        this.studentEmail = studentEmail;
    }
//---------------------------------------------------------------------------
//  toString.
//---------------------------------------------------------------------------
    public String toString() 
    {
        return "---------------------------Student--------------------------- " +
                "\nStudent Name:" + studentName + 
                "\nStudent Id:"+ studentId + 
                "\nStudent Telephone Number:"+ studentTelephoneNumber + 
                "\nStudent Email:" + studentEmail;
    }
    void read(RandomAccessFile raf) throws IOException 
    {
        char[] temp = new char[15];
        for (int i = 0; i < temp.length; i++)
          temp[i] = raf.readChar();
        studentName = new String(temp);
        temp = new char[15];
        for (int i = 0; i < temp.length; i++)
          temp[i] = raf.readChar();
        studentId = new String(temp);
        temp = new char[30];
        for (int i = 0; i < temp.length; i++)
          temp[i] = raf.readChar();
        studentEmail = new String(temp);
        temp = new char[30];
        for (int i = 0; i < temp.length; i++)
              temp[i] = raf.readChar();
        studentTelephoneNumber = new String(temp);
        temp = new char[30];
        for (int i = 0; i < temp.length; i++)
              temp[i] = raf.readChar();
      }

      void write(RandomAccessFile raf) throws IOException 
      {
        StringBuffer sb;
        if (studentName != null)
          sb = new StringBuffer(studentName);
        else
          sb = new StringBuffer();

        sb.setLength(15);
        raf.writeChars(sb.toString());

        if (studentId != null)
          sb = new StringBuffer(studentId);
        else
          sb = new StringBuffer();

        sb.setLength(15);
        raf.writeChars(sb.toString());

        if (studentEmail != null)
          sb = new StringBuffer(studentEmail);
        else
          sb = new StringBuffer();

        sb.setLength(30);
        raf.writeChars(sb.toString());
        if (studentTelephoneNumber != null)
              sb = new StringBuffer(studentTelephoneNumber);
            else
              sb = new StringBuffer();

            sb.setLength(30);
            raf.writeChars(sb.toString());

      }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:45:42.970

您正在阅读超出文件末尾的内容。读取不存在的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:47:27.230

基本问题是您读取的数据多于写入的数据。

您`char`在每条未写的记录的末尾阅读 30。鉴于您丢弃它们，您似乎不需要这样做。我会删除之后读取的代码`studentTelephoneNumber`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:56:16.543

如果只加载一个细节，你会遇到问题吗？我认为您的问题是您正在读取文件的末尾。您读取 15/30 个字符的读取功能似乎很危险，因为您可能没有写那么多。为什么在得到逗号或其他分隔符之前不阅读？（例如标签）

这种看起来很危险的东西

```
char[] temp = new char[15]; 
for (int i = 0; i < temp.length; i++) 
    temp[i] = raf.readChar(); 
```

15从哪里来？

试着用一个细节把它分解，然后从那里开始。你应该找到错误。我会亲自阅读，直到您找到特定的分隔符。

# pyqt - 在 PyQt4 中用 self 的方法连接信号

> ID：11828471
> 
> 赞同：1
> 
> 时间：2012-08-06T12:40:18.700
> 
> 标签：pyqt

我很难将信号与 PyQt4 中的方法连接起来。我可以将对象 A 的绑定信号与对象 B 的方法连接起来，但我无法将对象 A 的绑定信号与 self 的方法（建立连接的对象）连接起来。
我做错了什么？见下文：

```
from PyQt4.QtGui import *
from PyQt4.QtCore import *

class FooA(QObject):
    trigger=pyqtSignal(str)

    def receive_trigger(self,a):
        print'triggered in FooA, string',a

class MainObj(QObject):
    def __init__(self):
        self.a1=FooA()
        self.a2=FooA()
        #I can connect signals and methods of separate objects:
        self.a1.trigger.connect(self.a2.receive_trigger)
        self.a1.trigger.emit('hi')
        #... but I can't connect a signal with a method of self
        self.a1.trigger.connect(self.receive_trigger)
        self.a1.trigger.emit('hi')
    def receive_trigger(self,a):
        print 'triggered in MainObj' 
```

执行为：MainObj()

> 在 FooA 中触发，在 FooA 中触发字符串 hi，字符串 hi

我希望看到额外的一行，> 在 MainObj 中触发

提前致谢。账单

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T16:54:10.347

您似乎已经知道，信号必须属于`QObject`s，但出现此问题是因为您没有调用`QObject`. `FooA`不会覆盖构造函数，因此调用默认构造函数并且信号按预期工作。但是`MainObj`，您不调用超类的 ( `QObject`) 构造函数，因此信号将不起作用。要修复，请输入：

```
QObject.__init__(self) 
```

或者

```
super(QObject, self).__init__() 
```

（根据您的约定）在`MainObj`s 构造函数的顶部，然后信号将按预期工作。

# html - CSS 上的网站无法在 Internet Explorer 上运行

> ID：11828476
> 
> 赞同：0
> 
> 时间：2012-08-06T12:40:32.180
> 
> 标签：html, css, internet-explorer

我的网站在 Safari、Opera、Firefox 和 Chrome 上运行完美，但是当我在 IE 上运行它时它无法正常运行。

该网站的链接在[这里](http://mapy-polplan.pl/nowa/mapy.php?mapa=cieszyn)。

我需要在屏幕中央有一张地图，但在 IE 上它位于左侧菜单下，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:45:21.173

尝试为 ie 添加不同的样式表

```
 <!--[if IE]>
        <link rel="stylesheet" type="text/css" href="all-ie-only.css" />
    <![endif]--> 
```

这可能与 webkit 浏览器中的填充方式有关。

希望有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T12:47:49.630

我发现为某些浏览器添加样式的最佳方法是在您的 html 中使用它：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--[if lt IE 7 ]> <html class="ie6" lang="en" xml:lang="en" dir="ltr"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7" lang="en" xml:lang="en" dir="ltr"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie8" lang="en" xml:lang="en" dir="ltr"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie9" lang="en" xml:lang="en" dir="ltr"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="" lang="en" xml:lang="en" dir="ltr"> <!--<![endif]-->
<head>

</head>
<body>

</body> 
```

这将在每个浏览器的 html 标记上添加一个类。然后，您可以为某些浏览器设置样式，如下所示：

```
#wrapper { width:300px; }
.ie7 #wrapper { width:400px; } /*Specific to IE7*/ 
```

不需要浏览器特定的样式表！

# iphone - iPhone：当 iphone 处于静音模式时，录音听不到

> ID：11828480
> 
> 赞同：0
> 
> 时间：2012-08-06T12:40:36.750
> 
> 标签：iphone, objective-c, ios, ios5, avaudioplayer

当我的 iphone 处于静音模式时，我想听到录制的文件。为此，我实现了以下代码。

```
-(void)viewWillAppear:(BOOL)animated{

    AudioSessionInitialize (NULL, NULL, NULL, NULL);
    AudioSessionSetActive(true);

    // Allow playback even if Ring/Silent switch is on mute
    UInt32 sessionCategory = kAudioSessionCategory_MediaPlayback;
    AudioSessionSetProperty (kAudioSessionProperty_AudioCategory, 
                             sizeof(sessionCategory),&sessionCategory);
} 
```

我无法在 iphone 和我的 ipad 中听到高音，即使我听不到任何声音，音效按钮也已启用。

在实现上述代码之前，我能够听到录制的文件。如果您有任何想法或代码，请分享

提前谢谢...

# javascript - 在javascript中获取select中的选项值

> ID：11828485
> 
> 赞同：-3
> 
> 时间：2012-08-06T12:40:56.503
> 
> 标签：javascript

> **可能重复：**
> [如何使用 JavaScript 获取下拉列表的选定值？](https://stackoverflow.com/questions/1085801/how-to-get-the-selected-value-of-dropdownlist-using-javascript)
> [如何在javascript中获取选定文本的值](https://stackoverflow.com/questions/11828125/how-to-get-the-value-of-a-selected-text-in-javascript)

```
<select id="short_code">
<option value="12">First</option>
<option value="11">Second</option>
<option value="10">Third</option>
<option value="9">Fourth</option>    
</select> 
```

我需要这样做：

```
if(document.getElementById("short_code").options.item(document.getElementById("short_code").selectedIndex).text)== "First")

//get the value of the option Fist , how to get the value? 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-06T12:50:48.847

```
var elem = document.getElementById("short_code"),
    selectedNode = elem.options[elem.selectedIndex];

if ( selectedNode.value === "First" ) { //... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T12:46:49.053

这个怎么样：

```
var select = document.getElementById('short_code');
var options = select.options;
var selected = select.options[select.selectedIndex];
//which means that:
console.log(selected.value || selected.getAttribute('value'));//should log "12"
console.log(selected.innerHTML);//should log(First); 
```

循环遍历所有选项（或者创建一个引用变量，就像我使用`options`或 plain一样`for (var i=0;i<select.options.length;i++)`），你可以获得你需要的所有信息

# c++ - 链接：致命错误 LNK1104：无法打开文件“msmpi.lib”Visual Studio 2010

> ID：11828495
> 
> 赞同：3
> 
> 时间：2012-08-06T12:41:16.327
> 
> 标签：c++, visual-studio-2010, visual-c++, parallel-processing, mpi

我是使用 mpi for visual studio c++ 2010 进行并行编程的初学者，我在本教程中进行了配置步骤： [http ://supercomputingblog.com/mpi/getting-started-with-mpi-using-visual-studio-2008- express/](http://supercomputingblog.com/mpi/getting-started-with-mpi-using-visual-studio-2008-express/) 但是当我尝试构建项目时出现此错误：

**链接：致命错误 LNK1104：无法打开文件“msmpi.lib”**

所以有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:23:51.687

我这个帖子可以帮助你。 **将 msmpi 添加到链接器** [http://www.pgroup.com/userforum/viewtopic.php?t=1938&sid=ffde2dad46d77320c7055ce0987b8a9d](http://www.pgroup.com/userforum/viewtopic.php?t=1938&sid=ffde2dad46d77320c7055ce0987b8a9d)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-17T07:41:40.433

已解决（（致命错误 LNK1181：无法打开输入文件 'msmpi.lib'））此错误是由于：

1.当我们安装“Visual Studio 2010”时擦除一些“Abaqus 6.14”文件。

2.在安装“Visual Studio 2010”前提条件Windows软件不能正常工作。

解决方案：

1.  Unistal 所有“Visual Studio 2010”、“Intel Parallel Studio XE 2013”​​和“Abaqus 6.14”文件和注册表。（使用 IObit 卸载程序）

2.  由“Visual Studio Ultimate 2010”再次安装“Visual Studio 2010”的所有先决条件 Windows 软件。（必备软件 = Microsoft Visual C++ Runtime、Microsoft Silverlight 和所有其他 Visual Studio 2010 旧文件）

3.  在安装“Abaqus 6.14”之后首次安装“Visual Studio Ultimate 2010”和“Intel Parallel Studio XE 2013”

4.  要在命令提示符下输入：abaqus verify -user_std

5.  你在子程序中得到一个 PASS。（“Visual Studio 2015”与“Intel Parallel Studio XE 2016”在“Abaqus 6.14”中工作，并在子程序中获得通过）

祝你好运

Arash Rahgozar，德黑兰大学土木工程学院研究生

# objective-c - 在 iOS 中以流的形式读取加密的 PDF

> ID：11828496
> 
> 赞同：1
> 
> 时间：2012-08-06T12:41:22.957
> 
> 标签：objective-c, ios

我想在 iOS 中将加密的 PDF（使用我自己的密钥加密）作为流读取。我的想法是我可以分块解密文档并将其传递给渲染器，而不是解密整个文档，这不是一个选项，因为：

1.  解密整个文档会比较慢
2.  如果文档很大，那么我无法将整个解密内容放入内存
3.  写入磁盘不是一种选择，因为我不希望文档的解密副本位于磁盘上的任何位置，即使是很短的时间间隔。

我知道我们可以通过 UIWebView 使用异步 URL 请求来做到这一点；但 UIWebView 对我来说太慢了；尤其是大型 PDF。

有人可以建议使用 QLPreviewController（QuickLaunch 框架）或 CGPDFDocument 执行此操作的任何方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:20:02.267

`CGPDFDocumentCreateWithProvider(provider)`where `provider`is created with `CGDataProviderCreateDirect()`or呢`CGDataProviderCreateSequential()`？

我没有使用过这些功能，但它们似乎可以满足您的需求。

但可能 Core Graphics 会将整个 PDF 文档缓存在内存中或临时文件中。

原因是 PDF 是一种结构化格式，包含许多对象（引用文档中的其他对象）和目录。目录通常位于文档的末尾，必须先阅读，然后才能阅读任何对象。

# ruby-on-rails-3 - 在 RubyOnRails 中发送错误电子邮件

> ID：11828497
> 
> 赞同：0
> 
> 时间：2012-08-06T12:41:23.797
> 
> 标签：ruby-on-rails-3, email, error-handling

我需要对 RubyOnRails 项目中发生的每个异常执行电子邮件通知。我可以手动完成。但我认为 Rails 3.2.2 已经实现了这样的东西。如果能够配置电子邮件接收器等，它将为我节省很多工作。

有谁知道要安装哪个 gem 或使用 API 来实现此功能？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:49:48.037

[Airbrake](https://airbrake.io/pages/home)是一个商业托管应用程序，但它真的很棒而且价格实惠。如果您只有一个项目要监控，则有[免费计划](https://airbrake.io/account/new/Free)，或者您可以升级到[7 美元计划](https://airbrake.io/account/new?dev=true)以获得更多功能。您自己尝试构建此功能所花费的时间是不值得的，而应该将这些时间花在开发您自己的产品上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:33:01.723

[http://www.railslodge.com/plugins/95-exception-notification](http://www.railslodge.com/plugins/95-exception-notification)

# linux - 清空文件在查找中不起作用

> ID：11828499
> 
> 赞同：4
> 
> 时间：2012-08-06T12:41:31.587
> 
> 标签：linux, find

我想清空大于 30 MB 的文件。我试图用`find`命令解决这个问题。

```
 find . -maxdepth 1 -size +32M -exec cat /dev/null > {} \; 
```

和

```
 find . -maxdepth 1 -size +32M -exec echo -n > '{}' \; 
```

但是这两个命令都不会清空文件。相反，它会创建一个`{}`文件。

为什么它不清空文件？以及为什么它会创建一个名为`{}`? 的文件​​。命令有什么问题`find`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T12:44:01.707

**解决方案**

`sh -c`在这种情况下您必须使用：

```
 -exec sh -c "> {}" \; 
```

**使用示例**

准备文件：

```
$ echo hello > a1
$ cp a1 a2; cp a1 b1; cp a1 b2
$ ls -l
total 16
-rw-r--r-- 1 ic ic 6  6\. Aug 14:45 a1
-rw-r--r-- 1 ic ic 6  6\. Aug 14:45 a2
-rw-r--r-- 1 ic ic 6  6\. Aug 14:45 b1
-rw-r--r-- 1 ic ic 6  6\. Aug 14:45 b2 
```

执行命令：

```
$ find . -name 'a*' -exec sh -c '> {}' \; 
```

检查结果：

```
$ ls -l
total 8
-rw-r--r-- 1 ic ic 0  6\. Aug 14:45 a1
-rw-r--r-- 1 ic ic 0  6\. Aug 14:45 a2
-rw-r--r-- 1 ic ic 6  6\. Aug 14:45 b1
-rw-r--r-- 1 ic ic 6  6\. Aug 14:45 b2
$ cat a1
$ cat b1
hello 
```

如您所见，以 开头的文件`a`现在是空的；而其他文件则没有。

**解释**

当你做类似的东西时

```
find . -maxdepth 1 -size +32M -exec cat /dev/null > {} \; 
```

您不是在命令内部而是在命令外部进行此重定向`exec`。

```
( find . -maxdepth 1 -size +32M -exec cat /dev/null )  ===> ( {} \; ) 
```

当然这是不正确的。您必须在由 执行的命令中进行此重定向`find`。为此，您必须在`exec`命令中运行一个新的 shell。您使用`sh -c`.

# java - Android 中的平面图实施

> ID：11828500
> 
> 赞同：1
> 
> 时间：2012-08-06T12:41:33.970
> 
> 标签：java, android, eclipse

我在寻找为展览制作自定义平面图的最佳方法时遇到了麻烦，我可以在每个参展商之间使用 A* 算法绘制路径？我对此进行了很多搜索，但没有找到正确的构建方法。任何帮助都会更显着

[像这样](http://www.autumnfair.com/images/Flash_pra.jpg)的平面图

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-06T12:46:34.517

看看这个[适用于 Android 的 Google I/O 应用程序](http://code.google.com/p/iosched/)。

**使用会议地图指导自己**

**注意：**您只需要查看代码的 Map 部分。

# javascript - 使用 jquery 将 div 包裹在字符串周围

> ID：11828503
> 
> 赞同：0
> 
> 时间：2012-08-06T12:41:56.090
> 
> 标签：javascript, jquery

我如何`div class="includingVAT"></div>`围绕字符串文本包装一个 div 类：`incl. MwSt`

```
<span id="VariantPrice_3181">
<span class="variantprice">
<span class="pricelabel">Preis&nbsp;</span>
240,00 (CHF)
</span>
&nbsp;incl. MwSt
<span id="plus-shipping">plus-shipping</span>
</span> 
```

使用jQuery？

它需要看起来像这样：

```
<span id="VariantPrice_3181">
<span class="variantprice">
<span class="pricelabel">Preis&nbsp;</span>
240,00 (CHF)
</span>
<div class="includingVAT">&nbsp;incl. MwSt</div>
<span id="plus-shipping">plus-shipping</span>
</span> 
```

没有 span 或 div 的字符串需要包含增值税的 div 类，因为可能有不同的语言翻译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:52:52.753

你可以在这里试试这个例子：[DEMO](http://jsfiddle.net/Jz9fr/9/)

```
var text = $('#plus-shipping').map(function(){
    return this.previousSibling.nodeValue
});
$('#plus-shipping').prepend('<div class="includingVAT">' + text[0] + '</div>'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T12:53:51.440

```
$(".pricelabel").after('<div class="includingVAT">');
$(".plus-shipping").before('</div>'); 
```

这是尴尬且容易出错的。有什么办法可以插入*整个* `div`吗？为什么**包括。MwSt**只存在于 HTML 中？

# django - 如何编写用户特定的视图？

> ID：11828506
> 
> 赞同：0
> 
> 时间：2012-08-06T12:42:03.720
> 
> 标签：django, django-authentication, django-users

我在 django 中有一个书面视图，其中我在网页上有多个选项卡。其中一些我想让那些 is_staff 状态为 False 的用户不可见。以下是代码

```
 TOP_NAVIGATION_BAR = [ {'name':'home', 'href':'/my_app/home',active:False},
                          {'name':'Content', 'href':'/my_app/content',active:False},
                          {'name':'Secure', 'href':'/my_app/Secure',active:False},
                        ]

   class topnavigationbar:
         tab = TOP_NAVIGATION_BAR
         def set_active_tab(self, tab_name):
             for tab in self.tabs:
                if tab['name'] == tab_name:
                   tab['active'] = True;
                else:
                   tab['active'] = False;

         def __init__(self, active_tab):
             self.set_active_tab(active_tab) 
```

对于每个视图，我将 top_navigation_bar 活动选项设置为 True。

现在我希望安全选项卡对 is_staff 状态为 False 的用户不可见。我如何以及在哪里可以为此编写查询？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:53:37.543

另一种解决方案（涉及不修改 的参数`__init__()`，这可能很麻烦）是定义哪些 URL 需要`is_staff`in `TOP_NAVIGATION_BAR`，如下所示：

```
TOP_NAVIGATION_BAR = [
    {{'name': 'Secure', 'href': '/my_app/Secure', active: False, secure: True},
    ...
] 
```

`nav_menu`现在，您可以在模板中执行检查本身（假设您的导航菜单作为上下文变量出现在模板中）：

```
{% for menu_item in top_menu %}
{% if not menu_item.secure or request.user.is_staff %}
    <a href='{{ menu_item.href }}' ...
{% endif %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:28:09.783

您在模板中获得`request.user`参数`user`（如果您使用的是`RequestContext`）。您可以使用它来决定在您的基本/菜单/标题模板中隐藏或显示选项卡。

# mysql - 如何在 MySQL 表中存储 windows 目录链接？

> ID：11828511
> 
> 赞同：0
> 
> 时间：2012-08-06T12:42:09.007
> 
> 标签：mysql, jsp

我正在为我的学术项目开发一个电子商务网站，我需要在我的主页上展示产品。我需要显示数据库中的所有产品。对于我的产品图片，我想了一种简单的方法。我会将每个图像的路径存储在我的数据库中的产品表中，列下`product_image`。

```
Product_Id   Product_Name   Product_Description        Product_Image              Product_Price  Product_Stock
1            HeadFirstJava  Java Programming Language  c:\products\headfirst.jpg  330            30 
```

但是当我从我的 JSP 页面中的数据库中检索所有产品信息时，我没有得到任何图像。我检查了数据库，图像路径的存储没有反斜杠。

问题是什么？我如何存储这些路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:45:18.053

'\' 用于转义特殊字符，如何插入？尝试使用`'\\'`喜欢`c:\\products\\headfirst.jpg`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:03:42.907

当您想使用 和任何其他方式插入带有反斜杠的值时`PHP`，请`C#`务必将其*转义*另一个反斜杠。

如果您尝试插入此值，肯定会失败：

```
$value = "C:\Windows\Addins"; 
```

但这一个很好：

```
$value = "C:\\Windows\\Addins"; 
```

# ruby-on-rails - Rails，我需要解码 Base64 压缩的 pdf 文件

> ID：11828523
> 
> 赞同：0
> 
> 时间：2012-08-06T12:42:48.790
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我需要解码 base64 压缩的 pdf 文件并将解码的数据写入 tempfile 。并且需要将其保存在本地文件 system.in rails 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:28:42.447

```
decoded_data=Base64.decode64(encoded_data)
file_name = "test.zip"
temp_file = Tempfile.new("filename-#{Time.now}")
File.open(temp_file, 'wb') {|f| f.write(decoded_data)}
send_file temp_file.path, :type => 'application/zip', :filename => file_name 
```

# javascript - jQuery悬停滚动，只需要一点帮助

> ID：11828524
> 
> 赞同：1
> 
> 时间：2012-08-06T12:42:51.527
> 
> 标签：javascript, jquery, image, scroller

我不是一个真正的 jQuery 爱好者。所以我来这里寻求帮助。

这是想法。有十张图片和十张缩略图。当您将鼠标悬停在缩略图上时，它会将您带到相应的图像（我的代码在 jsbin [http://jsbin.com/ayigew/1/edit](http://jsbin.com/ayigew/1/edit)上）。

我想要的是将这个过度功能添加到顶部和底部的绿色条中。

这个想法是我可以将鼠标悬停在顶部栏上，它会向上滚动到列表中的下一张图片。如果我将鼠标悬停在底部的绿色条上，它将带​​我到列表中的下一个图像。

这是我到目前为止所拥有的[http://jsbin.com/ayigew/1/edit](http://jsbin.com/ayigew/1/edit)

因此，您不必将鼠标悬停在缩略图上，而是将鼠标悬停在顶部或底部的绿色条上来前进和后退。

我希望你能帮忙:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:10:55.593

我猜你的意思是[这样](http://jsbin.com/ayigew/8/edit)的？我用计时器做到了。在进入开始计时器。每 x 毫秒向上或向下移动，并在鼠标离开时清除计时器。

# html - 将 PDF 的第一页显示为图像

> ID：11828528
> 
> 赞同：11
> 
> 时间：2012-08-06T12:43:09.570
> 
> 标签：html, image, pdf, iframe, jsf-2

我正在创建以缩略图格式显示图像/ pdf 的 Web 应用程序。Onclicking各自的图像/ pdf它会在新窗口中打开。

对于 PDF，我有（这是新窗口的代码）

```
<iframe src="images/testes.pdf" width="800" height="200" /> 
```

使用它，我可以在网络浏览器中查看所有 PDF。但是出于缩略图的目的，我只想将 PDF 的第一页显示为图像。

我试过

```
 <h:graphicImage value="images/testes.pdf" width="800" height="200" /> 
```

但是它不起作用。知道如何完成这项工作吗？

## 更新 1

例如，我提供了 pdf 文件的路径。但是我在数据库中有图像。实际上我有如下代码。

```
<iframe src="#{PersonalInformationDataBean.myAttachmentString}" width="800" height="200" /> 
```

## 更新 2

为了缩略图，我使用的是

```
 <h:graphicImage height=200 width=200 value="...."> 
```

但是我也需要为 PDF 实现相同的目标。

希望我清楚我的期望......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T18:47:11.503

我不确定是否所有浏览器都能`<h:graphicImage value="some.pdf" ... />` 同样好地显示您嵌入的 PDF（通过 完成）。

## 将第一页提取为 PDF

如果您坚持使用 PDF，我建议您使用以下两种命令行工具之一来提取任何 PDF 的第一页：

1.  `pdftk`
2.  鬼脚本

两者都可用于 Linux、Mac OS X 和 Windows。

### pdftk 命令

```
pdftk input.pdf cat 1 output page-1-of-input.pdf 
```

### 鬼脚本命令

```
gs -o page-1-of-input.pdf -sDEVICE=pdfwrite -dPDFLastPage=1 input.pdf 
```

（在 Windows 上使用`gswin32c.exe`或`gswin64c.exe`代替`gs`。）

~~`pdftk`在页面提取方面比 Ghostscript 稍快，但对于单个页面，这种差异可能可以忽略不计。~~ *从最新发布的版本 v9.05 开始，前一句话不再适用。我发现 Ghostscript（包括所有启动开销）需要约 1 秒才能从 756 页 PDF 规范中提取第一页，而 PDFTK 需要约 11 秒。*

## 将第一页转换为 JPEG

如果您想确保即使较旧的浏览器也能很好地显示您的第一页，请将其转换为 JPEG。Ghostscript 是你的朋友（ImageMagick 不能自己做，它需要 Ghostscript 的帮助）：

```
gs -o page-1-of-input-PDF.jpeg -sDEVICE=jpeg -dLastPage=1 input.pdf 
```

如果您需要第 33 页，您可以这样做：

```
gs -o page-33-of-input-PDF.jpeg -sDEVICE=jpeg -dFirstPage=33 -dLastPage33 input.pdf 
```

如果您需要一系列 PDF，例如第 17-23 页，请尝试以下操作：

```
gs -o page-16+%03d-of-input-PDF.jpeg -sDEVICE=jpeg -dFirstPage=17 -dLastPage23 input.pdf 
```

请注意，`%03d`符号会随着处理的每一页而增加，从 1 开始。因此，您的第一个 JPEG 名称将是`page-16+001-of-input-PDF.jpeg`.

## 也许PNG更好？

请注意，JPEG 不是一种非常适合包含高黑白对比度和锐利边缘（如文本页面）的图像的格式。**PNG对此要好得多。**

使用 Ghostscript 从第一个 PDF 页面创建 PNG 很简单：

```
gs -o page-1-of-input-PDF.png -sDEVICE=pngalpha -dLastPage=1 input.pdf 
```

在提取页面范围时，与 JPEG 一样的模拟选项是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T16:33:18.883

**警告：**不要使用 Ma9ic 的脚本（发布在另一个答案中），除非你想......

*   ...使 PDF->JPEG 转换消耗比应有的更多时间和资源
*   ...完全放弃对 PDF->JPEG 转换过程的控制。

虽然它可能对您很有效，但在这 8 行 Bash 中存在很多问题。

**首先，**
它用于`identify`从输入的 PDF 中提取页数。但是，`identify`（ImageMagick 的一部分）完全无法单独处理 PDF。它必须将 Ghostscript 作为*“代表”*运行以处理 PDF 输入。直接使用 Ghostscript 而不是通过 ImageMagick 间接运行它会更有效。

**其次，**
它用于`convert`PDF->JPEG转换。与上述相同：它无论如何都使用Ghostscript，所以为什么不直接运行它呢？

**第三，**
它循环页面并`convert`为 PDF 的每一页运行不同的过程，即 100 页 PDF 文件的 100 次转换。这意味着：它还运行 100 个 Ghostscript 命令来生成 100 个 JPEG。

**第四**， Fahim Parkar 的问题是从 PDF 的*第一*
页 获取缩略图，而不是从所有页面获取缩略图。

 *该脚本确实为 100 页的 PDF 运行了至少 201 个不同的命令，而这一切都可以在 1 个命令中完成。如果你直接用Ghostscript...

1.  ...不仅运行速度更快、效率更高，
2.  ...但它也会让您对 JPEG 的质量设置进行更细粒度和更好的控制。

**为工作使用正确的工具，并正确使用它！**

* * *

**更新：**

既然有人问我，这是我对 Ma9ic 脚本的替代实现。

```
#!/bin/bash
文件=${1}

gs -q -o $(basename "${infile}")_p%04d.jpeg -sDEVICE=jpeg "${infile}"

# 要获取宽度为 200 像素的缩略图 JPEG，请使用以下命令：
# gs -q -o name_200px_p%04d.jpg -sDEVICE=jpeg -dPDFFitPage -g200x400 "${infile}"

# 获得更高质量的 JPEG（但也包括更大尺寸的）
# 分辨率为 300 dpi 使用以下命令：
# gs -q -o name_300dpi_p%04d.jpg -sDEVICE=jpeg -dJPEGQ=100 -r300 "${infile}"

回声“完成”

```

我什至对它进行了基准测试。我使用两个脚本将 756 页的 PDF-1.7 规范转换为 JPEG：

*   Ma9ic 的版本需要 1413 秒生成 756 个 JPEG。
*   我的版本节省了 93% 的时间，耗时 91 秒。
*   此外，Ma9ic 的脚本在我的系统上生成的主要是黑色 JPEG 图像，我的还可以。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T12:36:40.520

这是我用的

```
Document document = new Document();
try {
    document.setFile(myProjectPath);
    System.out.println("Parsed successfully...");
} catch (PDFException ex) {
    System.out.println("Error parsing PDF document " + ex);
} catch (PDFSecurityException ex) {
    System.out.println("Error encryption not supported " + ex);
} catch (FileNotFoundException ex) {
    System.out.println("Error file not found " + ex);
} catch (IOException ex) {
    System.out.println("Error handling PDF document " + ex);
}

// save page caputres to file.
float scale = 1.0f;
float rotation = 0f;

System.out.println("scale == " + scale);

// Paint each pages content to an image and write the image to file
InputStream fis2 = null;
File file = null;
for (int i = 0; i < 1; i++) {
    BufferedImage image = (BufferedImage) document.getPageImage(i,
    GraphicsRenderingHints.SCREEN,
    Page.BOUNDARY_CROPBOX, rotation, scale);
    RenderedImage rendImage = image;
    // capture the page image to file
    try {
        System.out.println("\t capturing page " + i);
        file = new File(myProjectActualPath + "myImage.png");
        ImageIO.write(rendImage, "png", file);
        fis2 = new BufferedInputStream(new FileInputStream(myProjectActualPath + "myImage.png"));

    } catch (IOException ioe) {
        System.out.println("IOException :: " + ioe);
    } catch (Exception e) {
        System.out.println("Exception :: " + e);
    }
    image.flush();
} 
```*

# java - 如何将原始 Java servlet 映射到 web.xml 中的 HTML 文件？

> ID：11828531
> 
> 赞同：2
> 
> 时间：2012-08-06T12:43:14.860
> 
> 标签：java, web-applications, servlets, war

我的WAR结构如下：

```
my-web-app.war/
    views/
        index.html
        blah.html
    META-INF/
        MANIFEST.MF
    WEB-INF/
        web.xml
        lib/
            <!-- Dependencies -->
        classes/
            org.me.mywebapp.controllers/
                MyController.class
            <!-- Other packages/classes as well --> 
```

我想进行配置`web.xml`，以便在本地部署 WAR 时，`index.html`可以通过转到`http://localhost/my-web-app/index.html`.

这是我到目前为止所拥有的：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app
    xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" version="2.4">

    <!-- The display name of this web application -->
    <display-name>My Web App</display-name>

    <listener>
        <listener-class>
            org.me.mywebapp.context.ContextImpl
        </listener-class>
    </listener>
</web-app> 
```

如何配置此 URL 以查看映射？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T12:53:59.467

你可以像这样映射你的servlet

```
<servlet>
    <servlet-name>controller</servlet-name>
    <servlet-class>org.me.mywebapp.controllers.MyController</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>controller</servlet-name>
    <url-pattern>index.html</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>controller2</servlet-name>
    <servlet-class>org.me.mywebapp.controllers.OtherController</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>controller2</servlet-name>
    <url-pattern>blah.html</url-pattern>
</servlet-mapping> 
```

如果你想将 view/blah.html 显示为 /blah.html，在控制器中你只需将请求发送到适当的视图/ *** .html 或 jsp 或任何你想要的东西。

编辑：根据您的要求：您可以将请求分派到 servlet 内的另一个页面，如下所示：

```
RequestDispatcher dispatcher = 
       getServletContext().getRequestDispatcher("/views/blah.html");
dispatcher.forward(request, response); 
```

尽管上面的代码可以工作，但您可能应该在每个 servlet 中实现更“复杂”的方法来决定您将分派到哪个视图，尤其是如果您的应用程序有很多控制器、视图等。如果您尝试阅读有关 MVC 实现的更多信息还没做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:05:25.990

您可以使用将特定请求路由到`view`路径的过滤器。查看响应：[https](https://stackoverflow.com/a/3593513/221951) ://stackoverflow.com/a/3593513/221951然后您在过滤器中决定是否应将请求传递给 servlet。

您也可以尝试使用 Tuckey URL 重写过滤器[http://tukey.org/urlrewrite/](http://tuckey.org/urlrewrite/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-06T12:54:30.157

您可以通过在过滤器中重写 URL 来做到这一点。

就像它被大多数框架实现一样，如 Struts、Spring MVC、Tapestry、Wicket 等

# ruby-on-rails - heroku 上的代码崩溃在本地完美运行

> ID：11828533
> 
> 赞同：0
> 
> 时间：2012-08-06T12:43:30.927
> 
> 标签：ruby-on-rails, ruby, heroku, crash

我用 ror 制作了一个应用程序，该应用程序在本地机器上运行良好，但是在部署时它崩溃了这里是控制器的相关代码

```
def index
  #debugger
  if @@first
    @ratings = []
    @@first=false
  end

@all_ratings = Movie.ratings_list

if params.has_key?:sort
  #debugger
  (params["rating_sort"].nil?)?(@ratings = []):(@ratings = params["rating_sort"])
  @movies = Movie.order(params[:sort]).find_all_by_rating(@ratings)       #:all,:conditions=>{"rating"=>@rating}, :order=>params[:sort])
  @sort = params[:sort]
else

   @ratings = params["ratings"].keys if params.has_key?"ratings"
   @movies = Movie.find_all_by_rating(@ratings)
end

end 
```

这是视图的代码

```
%h1 All Movies
= form_tag movies_path, :method => :get do
 Include:
 -@all_ratings.each do |r|
  = r
  = check_box_tag "ratings[#{r}]","ratings[#{r}]", @ratings.include?(r)?true:false
 = submit_tag "Refresh" , :id=>"ratings_submit"

%table#movies
 %thead
  %tr
    %th{ :class => ( "hilite" if @sort=="title" ) }
      %a#title_header{:href =>movies_path({:sort => 'title',"rating_sort"=>@ratings})}  Movie Title
  %th Rating
  %th{:class=>("hilite" if @sort=="release_date")} 
    %a#release_date_header{ :href => movies_path({:sort => 'release_date',"rating_sort"=>@ratings}) }Release Date
  %th More Info
%tbody
- @movies.each do |movie|
  %tr
    %td= movie.title 
    %td= movie.rating
    %td= movie.release_date
    %td= link_to "More about #{movie.title}", movie_path(movie)
= link_to 'Add new movie', new_movie_path 
```

这是heroku的错误日志

```
2012-08-06T12:32:01+00:00 app[web.1]: Started GET "/movies" for 111.68.102.115 at        2012-08-06 12:32:01 +0000
2012-08-06T12:32:01+00:00 app[web.1]:   Processing by MoviesController#index as HTML
2012-08-06T12:32:01+00:00 app[web.1]: Rendered movies/index.html.haml within layouts/application (1.2ms)
2012-08-06T12:32:01+00:00 app[web.1]:     5:     = r
2012-08-06T12:32:01+00:00 app[web.1]: Completed 500 Internal Server Error in 5ms
2012-08-06T12:32:01+00:00 app[web.1]:     6:     = check_box_tag "ratings[#{r}]","ratings[#{r}]", @ratings.include?(r)?true:false
2012-08-06T12:32:01+00:00 app[web.1]: 
2012-08-06T12:32:01+00:00 app[web.1]: ActionView::Template::Error (undefined method `include?' for nil:NilClass):
2012-08-06T12:32:01+00:00 app[web.1]:     3:   Include:
2012-08-06T12:32:01+00:00 app[web.1]:     8:   
2012-08-06T12:32:01+00:00 app[web.1]:     4:   -@all_ratings.each do |r|
2012-08-06T12:32:01+00:00 app[web.1]:     7:   = submit_tag "Refresh" , :id=>"ratings_submit"
2012-08-06T12:32:01+00:00 app[web.1]:     9: %table#movies
2012-08-06T12:32:01+00:00 app[web.1]:   app/views/movies/index.html.haml:6:in `block (2 levels) in _app_views_movies_index_html_haml___805194019313391138_23501340'
2012-08-06T12:32:01+00:00 app[web.1]:   app/views/movies/index.html.haml:4:in `each'
2012-08-06T12:32:01+00:00 app[web.1]:   app/views/movies/index.html.haml:4:in `block in _app_views_movies_index_html_haml___805194019313391138_23501340'
2012-08-06T12:32:01+00:00 app[web.1]:   app/views/movies/index.html.haml:2:in `_app_views_movies_index_html_haml___805194019313391138_23501340'
2012-08-06T12:32:01+00:00 app[web.1]: 
2012-08-06T12:32:01+00:00 app[web.1]: cache: [GET /movies] miss
2012-08-06T12:32:01+00:00 app[web.1]: 
2012-08-06T12:32:01+00:00 heroku[router]: GET cclpotatoes.herokuapp.com/movies dyno=web.1 queue=0 wait=0ms service=15ms status=500 bytes=728 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:00:01.163

让我们假设您有一个场景，您没有在 params 中获得“排序”和“评级”。这将导致

```
@ratings = nil 
```

在视图页面中为您调用的方法包括？在@ratings 这会引发此错误。您可能未在本地测试此场景。

下面的代码将修复错误。

```
if params.has_key?"ratings"
  @ratings = params["ratings"].keys 
else
  @ratings = []
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:59:58.587

`@ratings`变量未初始化。也许它在本地这个块中被初始化：

```
 if @@first
    @ratings = []
    @@first=false
  end 
```

它是什么`@@first`以及它在哪里设置？

# java - Java中的多线程

> ID：11828536
> 
> 赞同：0
> 
> 时间：2012-08-06T12:43:42.600
> 
> 标签：java, multithreading

我有一些课。例如：

```
public class Data {
    private String name;

    public Data(String url) {
        // There is download something from the Internet and set field "name".
    }

    public String getName() {
        return name;
    }
} 
```

在某些方法中，我需要初始化对象数据数组。

```
ArrayList<Data> list = new ArrayList<Data>;
for(int i=0; i<max; i++) {
    list.add(new Data("http://localhost/" + String.valueOf(i)));
} 
```

但是太长了。我想这样做：

```
final ArrayList<Data> list = new ArrayList<Data>;
for(int i=0; i<max; i++) {
    final int tmp = i;
    new Thread() {

        public void run() {
            list.add(new Data("http://localhost/" + String.valueOf(tmp)));
        }   

    }.start();

} 
```

但是主线程比其他线程结束得更快，并且变量列表为空。我应该怎么办？请帮助:)

向上。从 Internet 下载一些数据并不太快，这就是我创建多个线程的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:03:27.340

您可以使用 java 并发包，而不是处理线程 API 的低级细节，并使用执行程序来处理线程（我不知道 ListArray 是什么，但如果它不是线程安全的，那么您将遇到问题解决方案提出了其他一些答案：添加连接是不够的）。

例如，一个简化的例子是：

```
final ExecutorService executor = Executors.newFixedThreadPool(10);
final List<Future<Data>> list = new ArrayList<Future<Data>>(max);

for (int i = 0; i < max; i++) {
    final int tmp = i;
    Callable<Data> c = new Callable<Data>() {
        @Override
        public Data call() {
            return new Data("http://localhost/" + tmp);
        }
    };
    list.add(executor.submit(c));
}

executor.shutdown();

for (Future<Data> future : list) {
    Data data = future.get(); //will block until the page has been downloaded
    //use the data
} 
```

理想情况下，您应该在 周围添加一些错误处理`future.get()`，因为`ExecutionException`如果您的任务抛出异常，它会抛出异常，例如，如果页面不可用，我想可能会发生这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T12:46:46.077

**1.**当你触发另一个线程时，它会在使用`join()`方法之后立即从网络获取数据并填充列表。

**2.** **在调用它的线程的方法有finish()**`join()`之前，方法**不会让下一行执行。** `run()`

 ****3.**因此`main()`，在填充列表之前不会执行您的方法，因为您曾经`join()`在另一个线程完成之前保持执行.....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T12:47:53.737

在您的主要使用[Thread.join](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#join%28%29)等待子线程完成

```
 Thread[] threads = new Thread[max];
    final List<Data> list = Collections.synchronizedList(new ArrayList<Data>());
    for(int i=0; i< max; i++) {
        final int tmp = i;
        Thread t = new Thread() {

            public void run() {
                list.add(new Data("http://localhost/" + String.valueOf(tmp)));
            }   

        };
        t.start();
        threads[i] = t;
    }
    for (Thread t : threads) {
        t.join();
    } 
```**

# c++ - OpenMP 中的优雅异常处理

> ID：11828539
> 
> 赞同：11
> 
> 时间：2012-08-06T12:43:52.613
> 
> 标签：c++, exception-handling, c++11, openmp

OpenMP 禁止通过异常离开 openmp 块的代码。因此，我正在寻找一种从 openmp 块中获取异常的好方法，目的是在主线程中重新抛出异常并在稍后处理。到目前为止，我能想到的最好的方法如下：

```
class ThreadException {
    std::exception_ptr Ptr;
    std::mutex         Lock;
public:
    ThreadException(): Ptr(nullptr) {}
    ~ThreadException(){ this->Rethrow(); }  
    void Rethrow(){
        if(this->Ptr) std::rethrow_exception(this->Ptr);
    }
    void CaptureException() { 
        std::unique_lock<std::mutex> guard(this->Lock);
        this->Ptr = std::current_exception(); 
    }   
};
//...
ThreadException except;
#pragma omp parallel
{
    try {
      //some possibly throwing code
    } 
    catch(...) { except.CaptureException(); }
} 
```

虽然这很好用，一旦对象被销毁，就从并行部分重新抛出可能的异常，但在每个部分周围放置 a 并且必须手动捕获异常时`ThreadException`，这种构造仍然有点笨拙。`try {}catch(...){}`

所以我的问题是：有没有人知道一种更优雅（不那么冗长）的方式来做到这一点（如果有，它是什么样子的）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-20T18:45:08.053

您可以使用更多的 C++11 工具来稍微清理一下语法。将此可变成员函数添加到您的`ThreadException`类中：

```
class ThreadException {

    // ...

    template <typename Function, typename... Parameters>
    void Run(Function f, Parameters... params)
    {
        try 
        {
            f(params...);
        }
        catch (...)
        {
            CaptureException();
        }
    }
 }; 
```

然后在 OpenMP 构造内部调用时，使用如下 lambda 函数：

```
ThreadException e;

#pragma omp parallel for
for (int i = 0; i < n; i++)
{
    e.Run([=]{
        // code that might throw
        // ...
    });
}
e.Rethrow() 
```

# php - 使用 gettext 没有翻译任何内容

> ID：11828542
> 
> 赞同：1
> 
> 时间：2012-08-06T12:44:03.613
> 
> 标签：php, linux, gettext

如何调试我对 gettext 的使用？我已按照[此处](http://dev.jimdo.com/archive-old-blog/tutorial-for-the-easy-use-of-gettext-for-internationalization-of-php-apps/)描述的步骤创建了两个 .pot .po 文件，并生成了一个 .mo 文件。

然而，当我启动我的页面时，什么都没有翻译，也没有错误消息，所以我不知道出了什么问题。

以下是我创建翻译文件的方式（项目名称为“ft”）：

```
find ft/. -name "*.php" ! -path "*.svn*" > ft/i18n/listpot.txt
xgettext --from-code=utf-8 --default-domain=ft --output=ft/i18n/ft.pot --files-from=ft/i18n/listpot.txt
rm ft/i18n/listpot.txt
#wrote the translated strings in poedit
msgfmt -c -v -o ft/i18n/en/LC_MESSAGES/en.mo ft/i18n/ft_en.po
#restarted apache 
```

在我的 ft.php 页面中，我包含 i18n.php，其中包含：

```
 $folder     = 'ft';
    $lang       = 'en_US.UTF8';
    $domain     = 'messages';

setlocale(LC_ALL, 'en_US.UTF8', 'en.UTF8', 'en_US.UTF-8', 'en.UTF-8')."<br />";
putenv("LC_ALL=$lang");

bindtextdomain("$domain", dirname(__FILE__)."/$folder/i18n");
textdomain("$domain");
bind_textdomain_codeset("$domain", 'UTF-8'); 
```

在 ft.php 中，我使用以下命令回显字符串：

```
echo _('test_string'); 
```

但这与“test_string”相呼应，而不是翻译版本:(

有没有办法显示 php-gettext 脚本生成的错误？我是不是忘记了一步？

*编辑*：我有以下文件夹树：

```
./ft/i18n/en/LC_MESSAGES/messages.mo 
                         messages.po 
          fr/LC_MESSAGES/messages.po 
                         messages.mo 
```

我尝试将“en”文件夹更改为“en_US”和“en_US.UTF8”，将“messages.mo”文件更改为“en.mo”、“en_US.mo”、“en_US.UTF8.mo”，但是没有任何东西被翻译。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T20:16:12.187

gettext 不是很容易调试，因为当出现问题时它不会说任何内容。尝试使用 is_dir() 检查 .po 和 .mo 文件所在的文件夹。

我在 require() 中的变量范围也有问题

这对我有用：

```
$folder     = 'ft';
$domain     = 'messages';
$lang       = 'fr_FR.utf8';

$directory = dirname(__FILE__)."/../../$folder/i18n";

//putenv("LANG=".$locale); //not needed for my tests, but people say it's useful for windows
setlocale(LC_MESSAGES, $lang);
bindtextdomain($domain, $directory);
textdomain($domain);
bind_textdomain_codeset($domain, 'UTF-8'); 
```

目录是：

```
./ft/i18n/en/LC_MESSAGES/messages.mo 
                         messages.po 
          fr/LC_MESSAGES/messages.po 
                         messages.mo 
```

# spring - 多个事务管理器注解配置

> ID：11828545
> 
> 赞同：5
> 
> 时间：2012-08-06T12:44:11.193
> 
> 标签：spring, hibernate, annotations, config

我在基于注释的配置类中配置了两个事务管理器：

```
@Configuration
@EnableTransactionManagement
public class DBConfig implements TransactionManagementConfigurer {

//...

@Override
public PlatformTransactionManager annotationDrivenTransactionManager() {
    return defTransactionManager();
}

@Bean
@Qualifier("defSessionFactory")
public LocalSessionFactoryBean defSessionFactory() {
    LocalSessionFactoryBean sfb = new LocalSessionFactoryBean();
    sfb.setDataSource(defDataSource());

    Properties props = new Properties();
    //...

    sfb.setHibernateProperties(props);
    sfb.setPackagesToScan("my.package");

    return sfb;
}

@Bean
@Qualifier("defTransactionManager")
public PlatformTransactionManager defTransactionManager() {
    return new HibernateTransactionManager(defSessionFactory().getObject());
}

@Bean
@Qualifier("secondSessionFactory")
public LocalSessionFactoryBean secondSessionFactory() {
    LocalSessionFactoryBean sfb = new LocalSessionFactoryBean();
    sfb.setDataSource(secondDataSource());

    Properties props = new Properties();
    //...

    sfb.setHibernateProperties(props);
    sfb.setPackagesToScan("my.package.subpackage");

    return sfb;
}

@Bean
@Qualifier("secondTM")
public PlatformTransactionManager secondTransactionManager() {
    return new HibernateTransactionManager(secondSessionFactory().getObject());
}
} 
```

我的意图是使用带有两个事务管理器的注释事务。像这样注释的方法

```
@Transactional
public void method() {} 
```

应该由 defTransactionManager 处理

和这样注释的方法

```
@Transactional("secondTM")
public void anotherMethod() {} 
```

由 secondTransactionManager

defTransactionManager 工作正常，但是当涉及到 anotherMethod() 我得到：

```
org.hibernate.HibernateException: No Session found for current thread 
```

当我对另一个方法（自动连接 secondSessionFactory，使用 TransactionTemplate）使用编程事务管理时，一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:04:04.887

如果[@EnableTranscationManagement](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/annotation/EnableTransactionManagement.html) Spring 将使用按类型查找，您可以为单个事务管理器提供自己的查找方法，但[它不适用于两个 tx 管理器](https://stackoverflow.com/questions/8050183/enabletransactionmanagement-annotation-with-2-transaction-managers)

如果要检查 Spring 如何确定要执行的事务，可以尝试调试[TransactionAspectSupport](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/transaction/interceptor/TransactionAspectSupport.html)类。关键方法是`setTransactionManagerBeanName`和`determineTransactionManager`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-17T08:01:03.900

以防万一有人遇到这个问题，我找到了解决方案：

```
@Configuration
@EnableTransactionManagement
@DependsOn("myTxManager")
@ImportResource("classpath:applicationContext.xml")
public class AppConfig implements TransactionManagementConfigurer {

@Autowired
private PlatformTransactionManager myTxManager;

...

@Override
public PlatformTransactionManager annotationDrivenTransactionManager() {
    return this.myTxManager;
} 
```

通过这种方式，您可以使用在 xml 配置中定义的特定 txManager。

如果您想定义在服务级别使用的*txManager*，您应该从类**中删除**`@EnableTransactionManagement`注释并在注释中`@Configuration`指定*txManager*`@Transactional`，例如

```
@Service
@Transactional(value="myTxManager", readOnly = true)
public class MyServiceImpl implements MyService { ... } 
```

# asp.net-mvc - 谷歌组合图表？

> ID：11828548
> 
> 赞同：7
> 
> 时间：2012-08-06T12:44:29.183
> 
> 标签：asp.net-mvc, google-visualization

![在此处输入图像描述](../Images/48d2dd776ae4c64e6c4ce1e2dac70348.png)

我有 4 个实体，我展示了 4 天。但第一天和最后一天我看不到其他 2 个实体。8 月 3 日我看不到 T0、T1。8 月 6 日，我看不到 T2、T3。

代码

```
var evalledData = eval("(" + result.chartData + ")");
var ac = new google.visualization.ComboChart($("#chart_div_ay").get(0));

ac.draw(new google.visualization.DataTable(evalledData, 0.5), {
     //title: 'Son 7 günlük sayaç okumalarının toplamı.',
     width: '100%',
     height: 300,
     vAxis: { title: "kW" },
     hAxis: { title: "Gün" },
     seriesType: "bars",
     series: { 5: { type: "line"} }
}); 
```

控制器：

```
public ActionResult MusteriSayaclariOkumalariChartDataTable(DateTime startDate, DateTime endDate, int? musteri_id)
    {
        IEnumerable<TblSayacOkumalari> sayac_okumalari = entity.TblSayacOkumalari;
        var sonuc = from s in sayac_okumalari
                    where s.TblSayaclar.musteri_id == musteri_id && s.okuma_tarihi.Value >= startDate && s.okuma_tarihi.Value <= endDate
                    group s by new { date = new DateTime(((DateTime)s.okuma_tarihi).Year, ((DateTime)s.okuma_tarihi).Month, ((DateTime)s.okuma_tarihi).Day) } into g
                    select new
                    {
                        okuma_tarihi = g.Key,
                        T1 = g.Sum(x => x.kullanim_T1) / 1000,
                        T2 = g.Sum(x => x.kullanim_T2) / 1000,
                        T3 = g.Sum(x => x.kullanim_T3) / 1000,
                        T4 = g.Sum(x => x.kullanim_T0) / 1000
                    };

        //Get your data table from DB or other source
        DataTable chartTable = new DataTable();

        chartTable.Columns.Add("Tarih").DataType = System.Type.GetType("System.DateTime");
        chartTable.Columns.Add("T1").DataType = System.Type.GetType("System.Double");
        chartTable.Columns.Add("T2").DataType = System.Type.GetType("System.Double");
        chartTable.Columns.Add("T3").DataType = System.Type.GetType("System.Double");
        chartTable.Columns.Add("Toplam").DataType = System.Type.GetType("System.Double");
        foreach (var item in sonuc)
        {
            chartTable.Rows.Add(item.okuma_tarihi.date, item.T1.Value, item.T2.Value, item.T3.Value, item.T4.Value);
        }

        //convert datetime value to google datetype, if your first column is date
        Bortosky
            .Google
            .Visualization
            .GoogleDataTable
            .SetGoogleDateType(chartTable.Columns["Tarih"],
                 Bortosky.Google.Visualization.GoogleDateType.Date);
        //convert DataTable to GoogleDataTable
        var googleDataTable =
                    new Bortosky.Google.Visualization.GoogleDataTable(chartTable);
        //Pass the google datatable to UI as json string

        return new JsonResult
        {
            Data = new
            {
                success = true,
                chartData = googleDataTable.GetJson()
            },
            JsonRequestBehavior = JsonRequestBehavior.AllowGet
        };
    } 
```

此操作将 json 作为 google 示例自定义数据返回。

evalledData 输出：

![在此处输入图像描述](../Images/f1e25903a3b210850a61a8abf7054656.png)

这个问题有什么选择吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:50:30.543

我最近不得不建立一个这样的图表。请考虑我的代码作为您的解决方案：

把它放在你的控制器中：

```
<EmployeeAuthorize()>
Function WeightAreaChartData() As JsonResult

    Dim myData = db.Tbl_Weights.Where(Function(x) x.Weight_Employee_ID).OrderBy(Function(x) x.Weight_Create_Date)

    Dim data = New List(Of Object)

    data.Add(New Object() {"Date", "Your Weight"})

    For Each i As Tbl_Weight In myData

        data.Add(New Object() {DateTime.Parse(i.Weight_Create_Date).Day, i.Weight_Amount})

    Next

    Return Json(data, JsonRequestBehavior.AllowGet)

End Function 
```

把它放在你的视野中；相应地更改 $.post() URL：

```
<script type="text/javascript">
    google.load("visualization", "1", { packages: ["corechart"] });
    google.setOnLoadCallback(drawChart);

    function drawChart() {
        $.post('/Weight/WeightAreaChartData', {},
            function (data) {
                var tdata = new google.visualization.arrayToDataTable(data);

                var options = {
                    title: 'Weight Lost & Gained This Month',
                    hAxis: { title: 'Day of Month', titleTextStyle: { color: '#1E4A08'} },
                    vAxis: { title: 'Lbs.', titleTextStyle: { color: '#1E4A08'} },
                    chartArea: { left: 50, top: 30, width: "75%" },
                    colors: ['#FF8100']
                };

                var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
                chart.draw(tdata, options);
            });
    }
</script>

<div id="chart_div" style="width: 580px; height: 200px;"></div> 
```

为了解决你的酒吧被切断的具体问题，我相信你可以在你的选择中使用它：

```
hAxis: {
  viewWindowMode: 'pretty'
} 
```

像这样：

```
var options = {
                        title: 'Weight Lost & Gained This Month',
                        hAxis: { title: 'Day of Month', titleTextStyle: { color: '#1E4A08'} },
                        vAxis: { title: 'Lbs.', titleTextStyle: { color: '#1E4A08' } },
                        chartArea: { left: 50, top: 30, width: "75%" },
                        colors: ['#FF8100', 'blue'],
                       hAxis: {

                            viewWindowMode: 'pretty'
                          }
                    }; 
```

# vba - Excel VB：将单元格添加到现有名称

> ID：11828552
> 
> 赞同：0
> 
> 时间：2012-08-06T12:44:48.983
> 
> 标签：vba, excel, named-ranges

我正在尝试通过 VB 将单元格添加到现有名称中。

我最好的尝试如下所示：

```
Tabelle1.Names("delCase").RefersTo = Tabelle1.Names("delCase").RefersTo + ";" + Target.Address 
```

但这提示了一个

> 应用程序或对象定义的错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T13:07:18.513

无需尝试将字符串分配给`RefersTo`，您可以直接分配 a `Range`（按原样`RefersTo`类型`variant`）。将您的线路稍微更改为：

```
Tabelle1.Names("delCase").RefersTo = Tabelle1.Range("delCase;" & Target.Address) 
```

然后按预期工作。

如果您想要一种更优雅的方式来执行此操作，请尝试：

```
Tabelle1.Range("delCase;" & Target.Address).Name = "delCase" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T00:08:07.773

试试这个（**尝试和测试**）

```
Union(Tabelle1.Range("delCase"), Target).Name = "delCase" 
```

# c# - 在内容页面中使用 JavaScript 获取页面尺寸

> ID：11828553
> 
> 赞同：0
> 
> 时间：2012-08-06T12:44:49.630
> 
> 标签：c#, javascript, asp.net

我正在尝试在内容页面（参考母版页）中使用 javascript 方法来获取当前屏幕尺寸，并将其写入标签。

到目前为止，我没有运气。我尝试在主页面和内容页面中都这样做，但该方法根本不起作用。

有人可以为此提供解决方案吗？

母版页：

```
<head runat="server">
    <title>Lake, Smit People</title>
    <!--[if IE ]>  
     <link rel="stylesheet" type="text/css" href="ProfileStypeSheetIE.css" />
    <![endif]-->  
    <!--[if !IE]>-->  
    <link href="ProfileStypeSheet.css" rel="stylesheet" type="text/css" />
    <!--<![endif]-->  

    <asp:ContentPlaceHolder id="head" runat="server">
    </asp:ContentPlaceHolder>

    <style type="text/css">
        .style1 { width: 378px; }
    </style>
</head> 
```

默认.aspx

```
<asp:Content ID="Content5" ContentPlaceHolderID="head" Runat="Server">

<script type="text/javascript">

    var height = screen.height;
    document.getElementById('<%= hiddenLabel.ClientID%>').value = height;

</script>

</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:48:43.653

您好，您可以尝试使用这些行，您的具体情况是第三个（clientHeight 和 clientWidth）

```
document.body.scrollWidth, document.body.scrollHeight // for the full size of the document

document.body.offsetWidth, document.body.offsetHeight //to the displayed size

document.body.clientWidth, document.body.clientHeight //customer for size displayed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:49:33.230

你试过跟随吗？

```
<a href="javascript:alert
  ('Your resolution is ' + screen.width + 'x' + screen.height);">
     Click for your screen resolution </a> 
```

# tfs - Visual Studio 2012 - 如何将我的解决方案绑定到另一个 Team Foundation 服务器？

> ID：11828554
> 
> 赞同：16
> 
> 时间：2012-08-06T12:44:52.927
> 
> 标签：tfs, visual-studio-2012

我有一个绑定到[CodePlex](http://www.codeplex.com/)服务器的 Visual Studio 2012 (RC) 解决方案。但是，我想将其绑定到[Team Foundation Service](http://tfspreview.com/)服务器。我不在乎保留历史，因为无论如何我才刚刚开始这个项目。我应该如何将解决方案绑定到新服务器？

我`File->Source Control->Advanced->Change Source Control`在连接到 Team Foundation Service TFS 服务器时尝试过，但我只能看到该操作`Bind`对我可用，而这只是重新绑定到 CodePlex。`Change Source Control`这很奇怪，因为当我尝试将未绑定的解决方案直接添加到 Team Foundation Service 服务器时，Visual Studio 将我指向该对话框。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-06T17:05:58.400

[在这篇文章](http://geekswithblogs.net/PsudoKnowledgeBase/archive/2009/10/27/tips-on-connecting-to-the-new-source-control-and-moving.aspx)的帮助下，我发现了如何做到这一点。我所做的是，在连接到 CodePlex TFS 时，打开`File->Source Control->Advanced->Workspaces`然后双击我的工作区项。这启动了一个对话框，我在其中删除了解决方案的工作文件夹。

在此之后，我可以连接到 Team Foundation Service 并自由地让解决方案由该服务器进行源代码控制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-24T11:14:50.647

In case you moved your project under another SC and you need to bind it to this SC:

1.  Unbind it in the `File->Source Control->Advanced->Change Source Control`.
2.  In Solution Explorer right click the project and then `Source Control->Add Selected Projects to Source Control`.

# java - XMl 解析中的空指针异常

> ID：11828560
> 
> 赞同：4
> 
> 时间：2012-08-06T12:45:19.757
> 
> 标签：java, xml, xml-parsing

我需要解析一个 Xml 文档并将值存储在文本文件中，当我解析普通数据（如果所有标签都有数据）然后它工作正常，但如果任何标签没有数据然后它抛出“空指针异常”我需要什么要做，为了避免空指针异常，请用示例代码向我建议示例 xml：

```
<company>
    <staff>
        <firstname>John</firstname>
        <lastname>Kaith</lastname>
        <nickname>Jho</nickname>
        <Department>Sales Manager</Department>
    </staff>
    <staff>
        <firstname>Sharon</firstname>
        <lastname>Eunis</lastname>
        <nickname></nickname>
        <Department></Department>
    </staff>
    <staff>
        <firstname>Shiny</firstname>
        <lastname>mack</lastname>
        <nickname></nickname>
        <Department>SAP Consulting</Department>
    </staff>
</company> 
```

代码：

```
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;
import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import org.w3c.dom.Node;
import org.w3c.dom.Element;
import java.io.File;

public class ReadXMLFile {

    public static void main(String argv[]) {

      try {

        File fXmlFile = new File("c:\\file.xml");
        DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
        Document doc = dBuilder.parse(fXmlFile);
        doc.getDocumentElement().normalize();

        System.out.println("Root element :" + doc.getDocumentElement().getNodeName());
        NodeList nList = doc.getElementsByTagName("staff");
        System.out.println("-----------------------");

        for (int temp = 0; temp < nList.getLength(); temp++) {

           Node nNode = nList.item(temp);
           if (nNode.getNodeType() == Node.ELEMENT_NODE) {

              Element eElement = (Element) nNode;

              System.out.println("First Name : " + getTagValue("firstname", eElement));
              System.out.println("Last Name : " + getTagValue("lastname", eElement));
                  System.out.println("Nick Name : " + getTagValue("nickname", eElement));
              System.out.println("Salary : " + getTagValue("Department", eElement));

           }
        }
      } catch (Exception e) {
        e.printStackTrace();
      }
  }

  private static String getTagValue(String sTag, Element eElement) {
    NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();

        Node nValue = (Node) nlList.item(0);

    return nValue.getNodeValue();
  }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T12:48:58.007

只需检查对象不是`null`：

```
private static String getTagValue(String tag, Element eElement) {
    NodeList nlList = eElement.getElementsByTagName(tag).item(0).getChildNodes();
    Node nValue = (Node) nlList.item(0);
    if(nValue == null) 
        return null;
    return nValue.getNodeValue();
}

String salary = getTagValue("Department", eElement);
if(salary != null) {
    System.out.println("Salary : " + getTagValue("Department", eElement));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:52:47.770

```
NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes(); 
```

上面的行获取具有给定标签名称的元素的子节点。如果该元素没有数据，则返回的节点列表为空。

```
Node nValue = (Node) nlList.item(0); 
```

上面的行从空节点列表中获取第一个元素。由于列表为空，因此 0 是无效索引，根据[文档](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/NodeList.html#item%28int%29)，返回 null

```
return nValue.getNodeValue(); 
```

因此，上面的行调用了一个空变量上的方法，这会导致 NPE。

您应该测试列表是否为空，并返回您想要的（例如空字符串），如果是这样的话：

```
if (nList.getLength() == 0) {
    return "";
}
Node nValue = (Node) nlList.item(0);
return nValue.getNodeValue(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-06T20:27:49.667

此代码应该可以工作：

```
// getNode function
private static String getNode(String sTag, Element eElement) {
    //if sTag exists(not null) I get childNodes->nlList
    if (eElement.getElementsByTagName(sTag).item(0)!=null){
        NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();
        //check if child (nlList) contain something
        if ((nlList.getLength() == 0))//if the content is null
            return "";
        //if child contains something extract the value of the first element
        Node nValue = (Node) nlList.item(0);
            return nValue.getNodeValue();
    }
    return "";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T12:51:32.287

Replace

```
System.out.println("First Name : " + getTagValue("firstname", eElement)); 
```

by

```
System.out.println("First Name : " + getTagValue("firstname", eElement) == null?"":getTagValue("firstname", eElement)); 
```

same thing for the other tags.

# ios - 当我运行 for-in 循环时 CPU 使用率上升：OS-x 应用程序

> ID：11828567
> 
> 赞同：1
> 
> 时间：2012-08-06T12:45:48.200
> 
> 标签：ios, macos, core-data, cpu, cpu-usage

当我的循环运行大约 15k 次时，正在使用过多的 CPU。它始终在 90 -100 % 的范围内。我在循环中所做的是一系列核心数据实体更新/创建。为什么会这样？我正在后台运行我的进程，并且我也将线程优先级指定为最小值！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:47:35.557

Paul R 是正确的 - 系统将在其拥有的资源的情况下尽快完成循环中的任务。在这种情况下，它在托管对象上下文中操作核心数据对象，而不是提交到磁盘，因此它执行速度的唯一限制是 CPU 时间。

这会导致 UI 线程问题吗？从理论上讲，如果 UI 线程想要 CPU 时间，它应该占用它。sleep() 可以解决这个问题，但并不理想，因为您的后台任务需要更长的时间才能完成。

如果是这样，有没有办法打破工作，所以它可以比 15k 项目循环更简单地分块？

循环中是否使用互斥锁/@synchronise 运行？这可能会导致延迟，然后它会在请求时降低其 CPU 时间，这可能会导致 UI 滞后。

# database - 处理数据库事务和业务逻辑的最佳方法

> ID：11828572
> 
> 赞同：1
> 
> 时间：2012-08-06T12:46:14.170
> 
> 标签：database, transactions, logic

我想知道这样处理数据库的事务是否正确：

```
 **locate database service**
         **open connection**
              **begin transaction**
                  get objects from relational database
                  call business logic
              **commit transaction**
         **close connection**
    **release** 
```

星号中的代码将通过 IoC 注入**

虽然因此业务逻辑不受数据访问代码的影响，但询问实现是否正确以及它带来的可能后果。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:01:57.127

通常你不想在处理业务逻辑时保持事务打开。您的应用程序可能会执行冗长的计算、通过网络发送数据、调用远程服务等。在此过程中打开数据库事务会导致很多问题；其中一些是死锁、耗尽 RDMS 连接池、锁升级、丢失更新等。

一般来说，Repository 模块负责加载/持久化对象，包括事务管理。业务逻辑不必担心事务，它只需要知道如何调用 Repository 的正确方法。另外，请不要忘记，由于多种原因，存储数据可能会失败，因此请确保正确处理。例如，

1.从外部存储读取对象（事务管理，如果有的话，隐藏在Repository中）
2.根据业务逻辑操作对象
3.存储操作结果（假设你的存储是支持事务的RDMS，你开始事务，保存数据，成功则提交，错误则回滚）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:24:34.580

定位数据库服务和打开通常希望保持连接打开以供重复使用的连接有足够的开销。如果在应用程序中不方便，连接池可以做到这一点。

# wso2 - 如何配置 WSO2 身份服务器以支持多租户模式？

> ID：11828575
> 
> 赞同：1
> 
> 时间：2012-08-06T12:46:24.980
> 
> 标签：wso2, multi-tenant, wso2is

我正在尝试评估 WSO2 身份服务器。我需要评估的关键功能之一是多​​租户支持。如何配置 WSO2 身份服务器以支持多租户模式？

伊泰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T04:43:54.930

[请从此处查看](https://svn.wso2.org/repos/wso2/scratch/wso2is-4.0.0/m2/)Identity Server 4.0.0 Milestone 2 。多租户功能默认可用。转到配置 - >多租户

希望这可以帮助。

谢谢

蒂利尼

# actionscript-3 - 在标题渲染器中访问高级数据网格的列字段属性

> ID：11828577
> 
> 赞同：0
> 
> 时间：2012-08-06T12:46:32.043
> 
> 标签：actionscript-3, apache-flex, flex3, advanceddatagrid

我必须在标题渲染器中访问高级数据网格的列字段属性。基本上我想要实现的是，每当我单击列标题字段时，就可以像警报一样获取其对应的列字段。

以下是我的高级数据网格分组列代码：-

```
 <mx:groupedColumns>
    <mx:AdvancedDataGridColumn dataField="Category"  sortable="false" headerWordWrap="true" wordWrap="true" width="150"/>
    <mx:AdvancedDataGridColumnGroup id="dgSampleGridGroup" headerText="Student" fontFamily="Arial" backgroundColor="0xd7e9f8" childrenDragEnabled="false">

    <mx:AdvancedDataGridColumn  dataField="Name"  sortable="false" headerWordWrap="true" wordWrap="true"  headerRenderer="customHeaderRenderer"/>

    <mx:AdvancedDataGridColumn dataField="Branch" sortable="false" headerWordWrap="true" wordWrap="true"/>

    <mx:AdvancedDataGridColumn dataField="RollNumber" sortable="false"  wordWrap="true"/>

    </mx:AdvancedDataGridColumnGroup>
    </mx:groupedColumns> 
```

下面是我使用的标题渲染器：

```
 <?xml version="1.0" encoding="utf-8"?>
    <mx:HBox xmlns:mx="http://www.adobe.com/2006/mxml">
        <mx:Script>
            <![CDATA[
                import flash.net.navigateToURL;

                import mx.controls.Alert;

                override public function set data( value:Object ) : void {
                    super.data = value;
                } 

                protected function linkbutton1_clickHandler(event:MouseEvent):void
                {
                    Alert.show("Column 1:Student Name");        
                     Alert.show("Group Header",this.parentDocument.groupHeader); 
                }

            ]]>
        </mx:Script>

        <mx:LinkButton label="Student Name"  click="linkbutton1_clickHandler(event)" width="50"/>

    </mx:HBox> 
```

在这里，我只是用列标题名称对警报进行了硬编码。我想获取列标题字段，以便我可以为所有列重用标题渲染器。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:17:28.457

您可以设置数据网格列的 id，例如

```
<mx:AdvancedDataGridColumn id="colName"  dataField="Name"  sortable="false" headerWordWrap="true" wordWrap="true"  headerRenderer="customHeaderRenderer"/> 
```

然后访问 colName.headerText。

这应该可行，请随时提出任何问题。

# javascript - 在浏览器关闭的确认对话框中单击留在页面上时执行方法

> ID：11828580
> 
> 赞同：0
> 
> 时间：2012-08-06T12:46:39.083
> 
> 标签：javascript

我知道当用户尝试关闭浏览器时我们如何获得弹出窗口。现在我的问题是，如果用户说“留在页面上”，我们如何执行一些代码？该按钮是否有任何点击处理程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T12:50:14.127

尝试使用`onbeforeunload`事件。

```
(function () {

    var oldMousemove = document.body.onmousemove,
        onCancel = function () {
            // Do something if the user stays.
            document.body.onmousemove = oldMousemove;
        };

    window.onbeforeunload = function() {
        document.body.onmousemove = onCancel;
        return 'Do you really want to leave?';
    };

})(); 
```

注意：大多数浏览器不会尊重自定义提示语句，而是偏爱自己的提示语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:55:17.863

```
 <script>
    (function(){
      window.onbeforeunload = function (e) { 
        if(!e) var e = window.event;
        e.cancelBubble = true;
        e.returnValue = false;
        if (e.stopPropagation) {
          e.stopPropagation();
          e.preventDefault();
        }
        return false;
      }
    }());

</script> 
```

适用于 Firefox 和 IE 9

# magento - Magento 出口客户/产品不包含 entity_id

> ID：11828581
> 
> 赞同：0
> 
> 时间：2012-08-06T12:46:41.833
> 
> 标签：magento

我在 cron 作业中使用 Magento 导入/导出配置文件。出口运作良好。当我浏览 csv 文件时，令人惊讶的是，客户出口的 customer_id 和产品出口的 product_id 都不见了。

难道我做错了什么？这是一个 Magento 错误吗？导出配置文件是默认配置文件，没有特殊配置。

谢谢，拉杜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:46:09.107

Magento 似乎没有在导出中包含 entity_id 以避免在导入以前导出的 csv 文件时可能出现的问题。

在寻找这个问题的答案时，我发现了这篇文章： http: [//learntipsandtricks.com/blog/magento/146/Magento-How-to-Export-Customer-ID-with-ImportExport-Profile](http://learntipsandtricks.com/blog/magento/146/Magento-How-to-Export-Customer-ID-with-ImportExport-Profile)

在我测试了上面文章中的每种方法后，我会回来提供更多细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:49:34.200

当我完成产品出口时，我注意到了同样的事情。这很令人困惑，但我不认为这是一个错误。你会看到它有规律的重复模式，对吧？我相信带有空键的行是那些与它上面的行具有相同键的行。如果我有时间，我稍后会尝试查找文档。

# java - 同时按正确方向打印阿拉伯语 (RTL) 和英语 (LTR)

> ID：11828582
> 
> 赞同：0
> 
> 时间：2012-08-06T12:46:41.503
> 
> 标签：java, unicode, character-encoding, right-to-left, bidi

例如，我想在 Java 中同时输出“阿拉伯语”和“英语”文本，输出以下语句：`مرحبا I am Adham`.

我搜索了互联网，发现在这种情况下需要BiDi算法。BiDi 是否有任何 java 类。

我已经尝试过这个类[BiDiReferenceJava](http://www.unicode.org/Public/PROGRAMS/BidiReferenceJava/)并对其进行了测试，但是当我`runSample()`在类中调用`BidiReferenceTest`并输入一个阿拉伯字符串作为参数时，我得到了一个`OutOfIndexException`，因为字符的数量是重复的（正好在类中的这一行代码处`BidiReferenceTestCharmap`）

```
byte[] result = new byte[count]; 
```

如果字符串长度是`4`计数，则在哪里`8`！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:28:09.943

ICU4J 或多或少是 Java 的标准综合 Unicode 库，因此支持双向算法。不过，我真的很想知道您为什么需要这个；BiDi 通常由显示层应用，除非您是文字处理器或其他东西。

BidiReference.java 显然是一个演示片；它旨在展示算法如何处理 ASCII 字符而不是使用实际的 Unicode 字符。

# wpf - 为什么 WPF 主题不使用 SystemColors？

> ID：11828587
> 
> 赞同：4
> 
> 时间：2012-08-06T12:46:52.870
> 
> 标签：wpf, button, styles, themes, systemcolors

查看可用于 WPF 的各种开源主题，我有点惊讶地发现颜色没有映射到系统颜色。因此，如果您更改整体系统配置，这些主题将不会随之改变。

是否有任何主题可以正确使用系统颜色，如果是，我如何编写一个可以利用这些颜色的按钮样式？

举个例子，这是一个按钮的样式：

```
 <Style x:Key="specialButton" TargetType="Button">
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="OverridesDefaultStyle" Value="True"/>
        <Setter Property="FocusVisualStyle" Value="{StaticResource ButtonFocusVisual}"/>
        <Setter Property="Background" Value="{StaticResource NormalBrush}"/>
        <Setter Property="Margin" Value="2"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Name="border"
                    BorderThickness="1"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{StaticResource NormalBorderBrush}"
                    Padding="1,1">
                        <ContentPresenter Name="content" HorizontalAlignment="Center" VerticalAlignment="Center" RecognizesAccessKey="True"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource DarkBrush}"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="border" Property="Background" Value="{StaticResource PressedBrush}"/>
                            <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource PressedBorderBrush}"/>
                        </Trigger>
                        <Trigger Property="IsDefaulted" Value="True">
                            <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource DefaultedBorderBrush}"/>
                        </Trigger>
                        <Trigger Property="IsFocused" Value="True">
                            <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource DefaultedBorderBrush}"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="border" Property="Background" Value="{StaticResource DisabledBackgroundBrush}"/>
                            <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource DisabledBorderBrush}"/>
                            <Setter Property="Foreground" Value="{StaticResource DisabledForegroundBrush}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

问题是，如何指定命名的静态资源以便它们与系统颜色挂钩？例如，背景可能如下所示：

```
 <LinearGradientBrush x:Key="NormalBrush" StartPoint="0,0" EndPoint="0,1">
        <GradientBrush.GradientStops>
            <GradientStopCollection>
                <GradientStop Color="{DynamicResource {x:Static SystemColors.ControlLightLightColorKey}}" Offset="0.0"/>
                <GradientStop Color="{DynamicResource {x:Static SystemColors.ControlLightColorKey}}" Offset="1.0"/>
            </GradientStopCollection>
        </GradientBrush.GradientStops>
    </LinearGradientBrush> 
```

然而，这看起来不像一个标准按钮。如果我使用 XAMLPAD 检查按钮，我可以看到以下内容：

```
 <LinearGradientBrush x:Key="NormalBrush" StartPoint="0,0" EndPoint="0,1">
        <GradientBrush.GradientStops>
            <GradientStopCollection>
                <GradientStop Color="#FFF3F3F3" Offset="0.0"/>
                <GradientStop Color="#FFEBEBEB" Offset="0.5"/>
                <GradientStop Color="#FFDDDDDD" Offset="0.5"/>
                <GradientStop Color="#FFCDCDCD" Offset="1.0"/>
            </GradientStopCollection>
        </GradientBrush.GradientStops>
    </LinearGradientBrush> 
```

使用的颜色似乎是常数，而不是基于系统颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:57:21.990

我不知道第三方主题，但系统颜色可通过[`SystemColors`](http://msdn.microsoft.com/en-us/library/system.windows.systemcolors.aspx)类在 Xaml 中使用。此类公开可以通过以下两种方式之一在您的 xaml 中使用的资源的键：

```
<Border Background="{x:Static SystemColors.ControlDarkBrushKey}" /> 
```

或者：

```
<Border Background="{StaticResource {x:Static SystemColors.ControlDarkBrushKey}}" /> 
```

以上任何一个都应该给你一个背景与系统`ControlDarkBrush`颜色相同的边框。我提供的文档链接提供了可用资源的完整列表。

值得注意的是，它`SystemColors`为您提供了`Brush`每种可用颜色的颜色以及颜色本身 - 因此，如果您想创建自己的画笔，从一种系统颜色渐变到另一种系统颜色，您可以轻松创建它。

# html - 绝对位置和溢出属性

> ID：11828590
> 
> 赞同：0
> 
> 时间：2012-08-06T12:47:05.840
> 
> 标签：html, css, css-position

我正在制作这个页面，它有一个粘性页脚。

内容 div 正在通过粘性页脚，并且由于绝对定位，我无法`overflow:hidden;`正常工作。

谁能帮我 ？

请不要对设计发表评论：P 也不是我的一杯茶。

[链接到网站](http://www.thomasteilmann.dk/powerdisco)| [链接到 jsfiddle 示例](http://jsfiddle.net/ENXw5)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:50:19.027

将以下 CSS 添加到页脚

```
position: fixed;
bottom: 0;
width: 100% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:57:46.930

首先，把你`#footer`的`#wrapper`.

```
#wrapper {
    min-height: 100%;
    overflow-y: hidden;
}
#footer {
    position: absolute; 
    bottom: 0;
    z-index: 1;
}
#main {
   z-index: 0;
} 
```

# wordpress - WordPress：如果为空则隐藏 div

> ID：11828591
> 
> 赞同：0
> 
> 时间：2012-08-06T12:47:09.780
> 
> 标签：wordpress, pagination

我刚刚将我的 HTML 转换为 WordPress。你可以[在这里](http://zulhilmizainudin.com/live/?paged=2)看到它。我选择了每页显示一篇文章。

但是，我注意到我没有“上一个”链接和 div。我现在只有“下一个”链接和 div。

如果我添加“上一个”链接和 div，我如何将它隐藏在我的主页中（最新条目在这里）？而且，如何在最后一个条目中隐藏“下一个”链接和 div，而在[最后一个条目页面](http://zulhilmizainudin.com/live/?paged=3)只显示“上一个”链接和 div ？

我猜这个主题更像是 WordPress 分页主题。希望你们能帮助我。我是这个 WP 开发的新手。:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:25:15.697

如果您使用标准 WP 分页，请尝试以下操作：

```
global $paged;
$range = 4;
$showitems = ($range * 2)+1; 

if($pages == '')
     {
         global $wp_query;
         $pages = $wp_query->max_num_pages;
         if(!$pages)
         {
             $pages = 1;
         }
     }   
if(1 != $pages) {
         if ($paged < $pages && $showitems < $pages) echo "<a href=\"".get_pagenum_link($paged + 1)."\">Next &rsaquo;</a>";  // Show NEXT link if exists
         if ($paged < $pages-1 &&  $paged+$range-1 < $pages && $showitems < $pages) echo "<a href='".get_pagenum_link($pages)."'>Last &raquo;</a>"; // Show PREV link if exists
} 
```

# java - Word 文档中的图片不显示在 POI PicturesTable 中

> ID：11828594
> 
> 赞同：1
> 
> 时间：2012-08-06T12:47:22.640
> 
> 标签：java, ms-word, apache-poi

这个 Apache POI 代码应该（我认为）生成嵌入在 Word 文档中的所有图片的列表：

```
InputStream in = new FileInputStream(f);
HWPFDocument doc = new HWPFDocument(in);
List<Picture> pix = doc.getPicturesTable().getAllPictures(); 
```

它大部分都有效，除了有时它不包含所有图片（几乎所有图片）。

有没有其他方法可以存储图片（以及其他一些 API 来获取它）？如果我在 LibreOffice 中打开文件，丢失的图片看起来与其他图片没有任何不同（尽管我不确定要检查哪些属性）。

# c# - c# MemoryStream vs 字节数组

> ID：11828599
> 
> 赞同：59
> 
> 时间：2012-08-06T12:47:28.430
> 
> 标签：c#, asp.net, .net

我有一个函数，它生成并返回一个 MemoryStream。生成后 MemoryStream 的大小是固定的，我不再需要写入它，只需要输出。例如，写入 MailAttachment 或写入数据库。

将物体交给周围的最佳方法是什么？MemoryStream 还是字节数组？如果我使用 MemoryStream 我必须在读取后重置位置。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-08-06T12:52:15.757

如果您必须将所有数据保存在内存中，那么在许多方面选择是任意的。如果您有*在 上运行的`Stream`*现有代码，那么`MemoryStream`可能会更方便，但是如果您返回 a `byte[]`，您总是可以将其包装在 a `new MemoryStream(blob)` *Anyway*中。

它还可能取决于它有多大以及您持有它多长时间；`MemoryStream`可以*超大*，这有优点也有缺点。如果您将数据保存一段时间，将其强制为 a`byte[]`可能会很有用，因为它会修剪掉多余的部分；但是，如果您只是简单地保留它，它可能会适得其反，因为它会迫使您在创建新副本时*复制*大部分（绝对最少：一半）数据。

所以; 这在很大程度上取决于上下文、用法和意图。在大多数情况下，“无论哪个有效，并且清晰简单”就足够了。如果数据特别大或保存时间很长，您可能需要故意对其进行一些调整。

该方法的另一个优点是`byte[]`：如果需要，多个线程可以一次安全地访问它（只要它们正在读取）——这不是`MemoryStream`. 但是，这可能是一个错误的优势：大多数代码*不需要*`byte[]`从多个线程访问。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-05-27T08:57:24.150

MemoryStream 类用于向流中添加元素。有一个文件指针；它模拟随机访问，这取决于它是如何实现的。因此，MemoryStream 并非旨在随时访问任何项目。

字节数组允许在任何时候随机访问任何元素，直到它被取消分配。

在字节 [] 旁边，MemoryStream 存在于内存中（取决于类的名称）。那么最大分配大小为 4 GB。

最后，如果您需要访问任何索引号的数据，请使用字节 []。否则，MemoryStream 旨在与其他需要流作为输入的东西一起工作，而你只有一个字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T12:52:45.993

使用 byte[] 因为它是一个固定大小的对象，使得内存分配和清理更容易，并且相对没有开销 - 特别是因为您不需要使用 MemoryStream 的功能。此外，您希望尽快处理该流，以便它可以释放它可能正在使用的可能的非托管资源。

# iphone - 使用 ARC 在循环内创建 NSDictionary

> ID：11828601
> 
> 赞同：-1
> 
> 时间：2012-08-06T12:47:36.077
> 
> 标签：iphone, objective-c, for-loop, automatic-ref-counting, nsdictionary

我在使用 ARC 时在 for 循环中创建 NSDictionaries 时遇到了很大的麻烦。关键是在第一次“dict”创建之后，应用程序崩溃并给出 EXC_BAD_ACCESS 所以我认为这与对象的释放有关，但不知道是什么！我尝试使用自动释放池，但结果是一样的

```
for (int i = 0; i < [arr1 count]; i++) {
        __strong NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:[arr1 objectAtIndex:i], @"name", [arr4 objectAtIndex:i], @"position", [arr2 objectAtIndex:i], @"number", [arr5 objectAtIndex:i], @"status", [[arr6 objectAtIndex:i] intValue], @"order", nil];
        [pl_stuff addObject:dict];
} 
```

谢谢你的回复

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T12:50:11.437

```
[[arr6 objectAtIndex:i] intValue] 
```

您正在尝试将纯整数值添加到您的数组中，但数组只接受objective-c 对象。您可能应该将其保留为：

```
[arr6 objectAtIndex:i] 
```

# javascript - 当至少 1 个用户触发事件而没有页面刷新时更改所有用户页面中的内容

> ID：11828602
> 
> 赞同：0
> 
> 时间：2012-08-06T12:47:39.617
> 
> 标签：javascript, jquery, ajax

我想要做的是当 1 个用户选中一个复选框（例如，它可以是任何事件）时，打开相同页面的每个人都立即看到它而无需刷新页面。

我知道如何使用 ajax 和 setTimeOut（或 setInterval）函数来做到这一点：使用 setTimeOut 函数，我们打开流，其中无限循环检查是否触发了事件，如果是，我们使用 ajax 更新内容。或者设置时间间隔来更新页面。

我正在寻找更优化和跨浏览器的解决方案，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:53:46.403

谷歌搜索：彗星或长轮询

对于跨浏览器的解决方案，您必须改变 web-servers/HTTP 的设计目的，即尽可能快地为来自浏览器的请求提供页面，然后关闭连接。新浏览器有新方法，HTTP 模型中有新定义，但它们不适用于旧浏览器。

长轮询的基本原理是向服务器发送一个请求，服务器闲置，假装正在生成页面，如果发生任何需要更新客户端的事件，然后将信息作为响应发送给在请求之前的请求。这在服务器资源方面效率低下，但在用户体验方面却尽可能快。

# xpages - 使用 XPINC 直接访问服务器...非常非常慢

> ID：11828603
> 
> 赞同：2
> 
> 时间：2012-08-06T12:47:43.300
> 
> 标签：xpages, xpinc

我开发了一个在浏览器 (Firefox) 中运行良好的应用程序 XPages，并且在每个页面中，浏览器最多加载 150Kb 的内容（html、图像、js、css ......等）

当我将应用程序部署到使用 XPiNC 模式直接访问服务器的远程用户时，速度非常非常差！

使用一个工具我嗅探了流量，我看到每个 GET 都有 10Mbytes 的数据传输（似乎传输 XML 源代码和其他动态编译的代码......）

Notes Client 中的应用程序无法使用，所以......我的客户对此功能感到失望（无法在本地和复制中使用）

我有带有 PRELOAD 选项设置的 8.5.3FP2（客户端和服务器）......没有任何改变。

有人对我有什么建议吗？这是一个BUG吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:14:35.797

XPiNC 有点特别。当您打开基于服务器的 NSF 时，需要将所有程序代码下载到客户端，然后在 Notes 客户端的服务器容器中执行。将 XPiNC 与服务器中的数据一起使用的合理方法是拆分应用程序。一个 NSF 包含所有程序逻辑（所有 XPage 和其他代码），另一个包含表单、视图和文档。在本地复制应用程序 NSF 并仅访问服务器上的数据。这应该会给你更好的性能。您可以有一个配置设置来计算数据 NSF，因此断开连接的用户可以使用数据的本地副本。

让我们知道怎么回事。

PS：还有一些调整的想法...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:32:54.007

确实，远程应用程序（驻留在非本地服务器上的 NSF）比本地客户端副本或在 Web 浏览器中运行的远程应用程序要慢。这是因为在此模式下运行时会生成更多的网络事务。然而，有很多事情可以解决这个问题。

然而，首先我们需要确定问题的原因——您会看到每个 GET 请求传输 10MB，这非常大，显然会对性能产生负面影响。您的应用程序中的一个或多个 XPage 可能正在使用 computeWithForm 功能？如果 XPages 文档数据源“计算”Notes 表单（通常是为了执行预先存在的应用程序逻辑），则必须通过网络复制表单以在本地客户端中计算。然而，表单的所有子表单也将被拖走 - 子表单、共享字段等，这可能会导致像您所看到的那样大的净交易。

通常使用computeWithForm 功能是为了方便开发，只要表单的大小很小，那么对性能的影响可以忽略不计。但是，如果聚合表单很大，那么将 computeWithForm 用法替换为单独的 XPages SSJS 应用程序逻辑可能是值得的。

在继续之前，我们需要验证这实际上是问题所在 - 可能还有其他问题。通常，这仅在打开/编辑文档的页面上显示 - 因此您可以尝试在测试环境中关闭 computeWithForm 并查看是否存在差异。

# java - 在 mouseReleased 方法中检测双击

> ID：11828609
> 
> 赞同：2
> 
> 时间：2012-08-06T12:48:19.103
> 
> 标签：java, mouseevent

我需要使用 mouseReleased 方法而不是 mouseClicked 所以我需要找到一种拦截双击的方法。这是代码：

```
public void mouseReleased(MouseEvent e)
{
    if (e.getClickCount() == 2)
        System.out.println ("Double CLICK mouseReleased");
    else
    {    
        row= clientTable.rowAtPoint(e.getPoint());
        col= clientTable.columnAtPoint(e.getPoint());

        clientTable.sel(row, col);
    }
} 
```

问题是当我双击时我也有一个单击事件。谁能知道如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:59:47.613

**1.**使用`getClickCount()`Class的method方法`MouseEvent`

**2.**这将帮助您**获得点击的类型**.. Single、Double、Triple 等。

**有关更多详细信息，请参见此处：**

[http://docs.oracle.com/javase/6/docs/api/java/awt/event/MouseEvent.html](http://docs.oracle.com/javase/6/docs/api/java/awt/event/MouseEvent.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:24:15.840

双击时没有单击的简单修复

我写过一次，但它有一个缺点，你的单击变得有点迟钝

示例用法：

```
 JLabel label = new JLabel("test");
    label.addMouseListener(new SingleClickInhibitorMouseListener(some other mouselistener));

public class SingleClickInhibitorMouseListener implements MouseListener
{
  public static final Integer CLICK_TRESHOLD = (Integer) Toolkit.getDefaultToolkit().getDesktopProperty("awt.multiClickInterval");

  private Collection<MouseListener> mouseListeners = new ArrayList<MouseListener>();

  public SingleClickInhibitorMouseListener( MouseListener listener )
  {
    mouseListeners.add(listener);
  }

  public void addMouseListener( MouseListener listener )
  {
    mouseListeners.add(listener);
  }

  public void removeMouseListener( MouseListener listener )
  {
    mouseListeners.remove(listener);
  }

  public void removeAllListeners()
  {
    mouseListeners.clear();
  }

  public void mouseSingleClick( MouseEvent e )
  {
    for (MouseListener mouseListener : mouseListeners)
      {
      mouseListener.mouseClicked(e);
      }
  }

  public void mouseDoubleClick( MouseEvent e )
  {
    for (MouseListener mouseListener : mouseListeners)
      {
      mouseListener.mouseClicked(e);
      }
  }

  public boolean hasDoubleClick = false;

  public void mouseClicked( final MouseEvent me )
  {
    if ( me.getClickCount() == 1 )
      {
      new Thread(new Runnable()
      {
        public void run()
        {
          try
            {
            Thread.sleep(CLICK_TRESHOLD);
            SwingUtilities.invokeLater(new Runnable()
            {
              public void run()
              {
                if ( hasDoubleClick )
                  hasDoubleClick = false;
                else
                  mouseSingleClick(me);
              }
            });
            }
          catch (InterruptedException e)
            {
            mouseSingleClick(me);
            hasDoubleClick = false;
            }
        }
      }).start();
      }
    else
      {
      if ( me.getClickCount() == 2 )
        hasDoubleClick = true;
      mouseDoubleClick(me);
      }
  }

  public void mousePressed( MouseEvent e )
  {
    for (MouseListener mouseListener : mouseListeners)
      {
      mouseListener.mousePressed(e);
      }
  }

  public void mouseReleased( MouseEvent e )
  {
    for (MouseListener mouseListener : mouseListeners)
      {
      mouseListener.mouseReleased(e);
      }
  }

  public void mouseEntered( MouseEvent e )
  {
    for (MouseListener mouseListener : mouseListeners)
      {
      mouseListener.mouseEntered(e);
      }
  }

  public void mouseExited( MouseEvent e )
  {
    for (MouseListener mouseListener : mouseListeners)
      {
      mouseListener.mouseExited(e);
      }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T08:29:29.197

```
 public void mouseClicked(MouseEvent evt) { 
    if (evt.getButton()==MouseEvent.BUTTON1){
        leftClick = true; clickCount = 0;
        if(evt.getClickCount() == 2) doubleClick=true;
        Integer timerinterval = (Integer)Toolkit.getDefaultToolkit().getDesktopProperty("awt.multiClickInterval");

                   timer = new Timer(timerinterval, new ActionListener() {
                    public void actionPerformed(ActionEvent evt) {  
                        if(doubleClick){
                            System.out.println("double click.");
                            sb = new StringBuffer();
                            sb.append("Double Click");
                            clickCount++;
                            if(clickCount == 2){
                                rfbProto.capture();
                                clickCount=0;
                                doubleClick = false;
                            }

                        } else {

                            sb = new StringBuffer();
                            sb.append("Left Mouse");
                            System.out.println("single click.");
                            rfbProto.capture();
                        }
                    }               
                });
                timer.setRepeats(false);
                timer.start();
                if(evt.getID()==MouseEvent.MOUSE_RELEASED) timer.stop();
    }           
    } 
```

# javascript - javascript 中的 $("something") 是什么意思？

> ID：11828612
> 
> 赞同：0
> 
> 时间：2012-08-06T12:48:23.170
> 
> 标签：javascript

> **可能重复：**
> [javascript中的“$”符号是什么意思](https://stackoverflow.com/questions/1150381/what-is-the-meaning-of-sign-in-javascript)

这可能是一个基本问题，但我敢问。

在浏览 javascript 代码时，我发现了以下内容。

```
 if(selected_len == all_len) {
        $(":checkbox:checked.node_id_"+d.nodeValue).click();
    } 
```

我试图搜索 $("") 的含义，但我发现的只是

“$('hello') --- 这是一个被许多 JavaScript 框架声明为 document.getElementById 扩展的函数。”

你能给出更准确的解释，就像你在和一个孩子说话:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T12:49:11.157

`$`是一个变量名。这意味着分配给该变量的函数被定义为。（这不是[一个好的变量名](http://en.wikipedia.org/wiki/Self-documenting)。

它的内容*看起来*像一个 CSS 选择器，所以很可能它是对[jQuery 对象](http://api.jquery.com/category/core/)的常见、快速键入的引用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T12:50:02.723

从理论上讲，它仅`foo()`意味着：它是一个函数调用，其中`$`是函数的名称（是Javascript 中标识符`$` [的合法名称）。](http://mathiasbynens.be/notes/javascript-identifiers)

在通常的实践中，`$`它是著名的[jQuery](http://jquery.com/)库的“入口点”。还有其他库使用该名称`$`作为入口点，但 jQuery 可以说是使用最广泛的库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T13:02:45.313

正如其他人所说，它只是一个函数名，如果您使用其他使用 $ 符号的库，您可以使用 jQuery 关键字而不是 $ 符号。

# iphone - FFmpeg 解码 H264 视频太慢

> ID：11828614
> 
> 赞同：1
> 
> 时间：2012-08-06T12:48:24.763
> 
> 标签：iphone, ffmpeg, h.264, decoding

我目前正在使用 FFMpeg 在 iPhone 上开发一个项目。我可以解码我需要的所有格式，但是当我想播放 h264 视频时，ffmpeg 解码帧的速度太慢了。

我试着看看问题出在哪里。我认为编译库的选项很好，解码和显示帧是在不同的线程上进行的。最后，似乎是该函数`avcodec_decode_video2`耗时太长（解码 30 帧需要 3 到 4 秒）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T18:11:10.820

每秒 25 - 30 帧对你来说太慢了

[https://github.com/mooncatventures-group](https://github.com/mooncatventures-group)

几年来，我们一直在各种视频上使用 ffmpeg 运气。

# javascript - 选择了哪个单选按钮？结果以模态显示

> ID：11828615
> 
> 赞同：1
> 
> 时间：2012-08-06T12:48:25.797
> 
> 标签：javascript, jquery, radio-button, modal-dialog

在表格的第一列中，每行都有单选按钮。

前 3 个单选按钮：

```
<form id="myForm">
<input id="1" name="select_row" type="radio">
<input id="2" name="select_row" type="radio">
<input id="3" name="select_row" type="radio">
</form> 
```

我想阅读已选择的单选按钮并将其显示在模态窗口中。

触发模态的按钮：

```
<a class="btn btn-danger" data-toggle="modal" href="#myModal">Launch Modal</a> 
```

到目前为止，在模态中已经尝试过这些代码：

```
var id = $("input[@name=select_row]:checked").attr('id');
var id = $('input[name=select_row]:checked').attr('id');
var id = $('input[name=select_row]:checked').val();
var id = $("input[name=select_row]:checked").val();  
var id = $('form input[type=radio]:checked');
var id = $('input[name=select_row]:checked', '#myForm').val()

document.write(id); 
```

但是对于它们中的每一个，它只显示“未定义”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:55:30.360

试试这个：为了让它工作，你的模型和表单应该在同一个 HTML 页面上。

```
alert($('#myForm').find("input:radio:checked").attr('id')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:23:49.083

这是小提琴：http: [//jsfiddle.net/qNSCn/](http://jsfiddle.net/qNSCn/)

```
<form id="myForm">
<input id="1" name="select_row" type="radio">
<input id="2" name="select_row" type="radio">
<input id="3" name="select_row" type="radio">
</form>
<a class="btn btn-danger" id="link" data-toggle="modal" href="#myModal">Launch Modal</a> 
```

对于 jQuery 代码：

```
$('#link').click(function(){
    var x = $('#myForm input[type=radio]:checked').attr('id');
    console.log(x);
});​ 
```

# android - Android：生成 .so 文件时出错

> ID：11828618
> 
> 赞同：0
> 
> 时间：2012-08-06T12:48:40.190
> 
> 标签：android, android-ndk

我是 Android 新手，正在尝试创建一个简单的 SDK+NDK 概念。我按照以下步骤操作：

1.  下载 NDK
2.  解压压缩文件
3.  创建新的安卓项目。
4.  在项目下创建新文件夹 jni。
5.  根据需要定义 UI。
6.  创建一个 java 文件来调用所有的本地方法。用“native”前缀声明所有这些方法。使用静态块加载库`system.loadLibrary("")`。
7.  使用创建相应的头文件`javah -jni filename`
8.  将生成的 filename.h 文件移动到 jni 文件夹。
9.  编写包含 .h 文件的 c 文件，并实现 .h 文件中的方法并保存。
10.  创建mk文件，内容如下：

    LOCAL_PATH := $(call my-dir)
    包括 $(CLEAR_VARS)
    LOCAL_MODULE :=
    LOCAL_SRC_FILES := .c
    包括 $(BUILD_SHARED_LIBRARY)

11.  在命令提示符下转到项目文件夹
12.  给`<ndkfolder>/ndk-build`
13.  .so 文件将生成

但我陷入了“12”点，出现以下错误：

```
**"Compile thumb : com_cts_c2dmclient_NativeLib <= com_cts_c2dmclient_NativeLib.c
jni/com_cts_c2dmclient_NativeLib.c:3:40: fatal error: com_cts_c2dmclient_NativeL
ib: No such file or directory
compilation terminated.
make: *** [obj/local/armeabi/objs/com_cts_c2dmclient_NativeLib/com_cts_c2dmclien
t_NativeLib.o] Error 1** 
```

注意：.h 文件创建成功。

我的 com_exampleservice_NativeLib.c 文件

```
#include "stdio.h"
#include "malloc.h"
#include <com_exampleservice_NativeLib.h>

JNIEXPORT jint JNICALL Java_com_exampleservice_NativeLib_loop
  (JNIEnv * env,jobject obj,jint v1, jint v2){
    int loop;
    unsigned long int *array;
if(v2 == 0){
    array = (unsigned long int *)malloc(v1 * sizeof(unsigned long int));}
else if(v2 == 1)
{
array = realloc(array,sizeof(array)+v1);
}
else{
}
    array[0] = 1;
    array[1] = 1;
    for (loop = 2; loop < v1; loop++) {
        array[loop] = array[loop - 1] + array[loop - 2];
    }
    for (loop = 0; loop < v1; loop++) {
    }
if(v2 == 2)
{
free(array);
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:42:07.783

我也是第一次使用 NDK。

我曾经`SWIG`避免`JNI`手动编写 Java 代码

我发现[本](http://www.swig.org/Doc2.0/Android.html)教程很有用：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:01:25.697

您的`Android.mk`文件在您的问题中看起来不太好。

确保该`com_exampleservice_NativeLib.h`文件确实存在于您`jni`的 c 文件附近的目录中。

可能需要将目录添加到包含路径，例如

```
 LOCAL_C_INCLUDES += $(LOCAL_PATH)/include 
```

请注意，这`$(LOCAL_C_INCLUDES)`必须是绝对路径列表，而不是`$(LOCAL_SRC_FILES)`基于- 的列表`$(LOCAL_PATH)`。

另一个注意事项是，在您的`com_exampleservice_NativeLib.c`文件中使用`#include`指令或命名是不正确的。它应该去

```
#include <stdio.h>
#include <malloc.h>
#include "com_exampleservice_NativeLib.h" 
```

请参阅[#include <filename> 和 #include "filename" 之间有什么区别？](https://stackoverflow.com/questions/21593/what-is-the-difference-between-include-filename-and-include-filename)详细解释。

# git - git 和 git 合并 --no-ff timer_redis

> ID：11828621
> 
> 赞同：0
> 
> 时间：2012-08-06T12:48:44.557
> 
> 标签：git, github

我厌倦了清理我的主仓库并做了一个

```
git rm -rf * 
git commit -m 't'
git push origin master 
```

然后我尝试从主分支执行以下操作。

```
git merge --no-ff timer_redis 
```

根据以下错误消息，我从哪里开始？为什么会这样？我只是想将一个 repo timer_redis 移到 master 上。

```
ubuntu@ubuntu:~/workspace/Amazon-Products-Crawler-1$ git merge --no-ff timer_redis
CONFLICT (delete/modify): LaunchCrawler.py deleted in HEAD and modified in timer_redis. Version timer_redis of LaunchCrawler.py left in tree.
CONFLICT (delete/modify): config_files/config.txt deleted in HEAD and modified in timer_redis. Version timer_redis of config_files/config.txt left in tree.
CONFLICT (delete/modify): config_files/default.json deleted in HEAD and modified in timer_redis. Version timer_redis of config_files/default.json left in tree.
CONFLICT (delete/modify): config_files/proxy_list.txt deleted in HEAD and modified in timer_redis. Version timer_redis of config_files/proxy_list.txt left in tree.
CONFLICT (delete/modify): config_files/ubuntu_install.sh deleted in HEAD and modified in timer_redis. Version timer_redis of config_files/ubuntu_install.sh left in tree.
CONFLICT (delete/modify): debugasin.txt.log deleted in HEAD and modified in timer_redis. Version timer_redis of debugasin.txt.log left in tree.
CONFLICT (delete/modify): ec2_shutdown_monitor.py deleted in HEAD and modified in timer_redis. Version timer_redis of ec2_shutdown_monitor.py left in tree.
CONFLICT (delete/modify): getPageParser.py deleted in HEAD and modified in timer_redis. Version timer_redis of getPageParser.py left in tree.
CONFLICT (delete/modify): includes/utility.py deleted in HEAD and modified in timer_redis. Version timer_redis of includes/utility.py left in tree.
CONFLICT (delete/modify): temp_tables/error404_core_1.txt deleted in HEAD and modified in timer_redis. Version timer_redis of temp_tables/error404_core_1.txt left in tree.
CONFLICT (delete/modify): temp_tables/error_core_1.txt deleted in HEAD and modified in timer_redis. Version timer_redis of temp_tables/error_core_1.txt left in tree.
CONFLICT (delete/modify): temp_tables/redo_core_1.txt deleted in HEAD and modified in timer_redis. Version timer_redis of temp_tables/redo_core_1.txt left in tree.
CONFLICT (delete/modify): threaded_crawl.py deleted in HEAD and modified in timer_redis. Version timer_redis of threaded_crawl.py left in tree.
Automatic merge failed; fix conflicts and then commit the result. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:21:32.647

我认为您混淆了“存储库”和“分支”。您已经完成`git rm -rf *`并且`git commit -m 't'`正在清除`master`分支中的每个文件。然后你将那个（版本控制的更改）推送到你的`origin`存储库。

该`timer_redis`分支包含您删除的所有文件，因此当您将其合并时，它会在其中存在的任何文件上引发合并冲突，该文件`timer_redis`也在`timer_redis`.

我无法想到您会在哪里发布`git rm -rf *`然后继续使用该分支历史记录的工作流程。如果你想让`master`看起来像`timer_redis`（并且不希望任何存在`master`但不存在的更改`timer_redis`）试试这个：

```
git checkout timer_redis
git branch -D master
git checkout -B master timer_redis
git push -f origin master 
```

这将删除您本地的`master`分支，分支一个新的本地`master`off `timer_redis`，然后用新分支强行覆盖`origin`的版本`master`。

# javascript - 如何为 HTML/CSS/JS 中的表格/列表应用行虚拟化？

> ID：11828623
> 
> 赞同：7
> 
> 时间：2012-08-06T12:48:45.743
> 
> 标签：javascript, html, dom, css

我想创建一个包含很多行的自定义 HTML 表格/列表。我需要行虚拟化，但我不确定实现这一目标的最佳方法是什么。

通过行虚拟化，我指的是 table/ul/div 的行只要不滚动到视图中就根本不可见或不呈现的概念。基本上，关键是如果项目从未显示（在滚动之后），则消除渲染。

有任何想法吗？我认为 DOM 元素一旦“滚动到视图中”就需要添加到列表中。然后我需要一个不可见的 div，其高度为所有行的总高度，以使滚动成为可能。

是否有任何简单的代码示例可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T07:06:58.347

我不了解“简单”代码示例，但我发现了以下使用 DOM 虚拟化的项目

[MegaList](https://github.com/triceam/MegaList)和[SlickGrid](https://github.com/mleibman/SlickGrid/)

MegaList 示例是最容易理解的，因为它只是一个将列表项添加到其中的“ul”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T07:17:36.900

[无限滚动](http://www.infinite-scroll.com/)应该让你指向正确的方向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-15T13:56:22.020

Wijmo 5 FlexGrid 实现了这种行为。[您可以在此处](http://demos.componentone.com/wijmo/5/Angular/Benchmark/Benchmark/#/)找到在线比较

# sqlite - 在 phonegap 存储中创建 2 个或更多表

> ID：11828625
> 
> 赞同：3
> 
> 时间：2012-08-06T12:48:57.680
> 
> 标签：sqlite, cordova

如何在 phonegap 存储数据库中创建两个或多个表？它适用于一个表，但如果您尝试创建另一个表，则会返回 Error processing SQL:1; (

```
 var db = window.openDatabase("Database", "1.0", "Order database", 1000000);
  document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    db.transaction(populateDB, errorCB, successCB);
}

function populateDB(tx) {

    tx.executeSql('DROP TABLE IF EXISTS ORDER');
    tx.executeSql('CREATE TABLE IF NOT EXISTS ORDER (id INTEGER PRIMARY KEY, status)');
    tx.executeSql('INSERT INTO ORDER (id, status) VALUES (1, "new" )');
    tx.executeSql('INSERT INTO ORDER (id, status) VALUES (2, "done" )');
    tx.executeSql('INSERT INTO ORDER (id, status) VALUES (3, "new" )');
    tx.executeSql('INSERT INTO ORDER (id, status) VALUES (4, "undone" )');

    tx.executeSql('DROP TABLE IF EXISTS CLIENT');
    tx.executeSql('CREATE TABLE IF NOT EXISTS CLIENT (id INTEGER PRIMARY KEY, name, addr, mail, phone)');
    tx.executeSql('INSERT INTO CLIENT (id, name, addr, mail, phone) VALUES (1, "Kentavr", "Kiev", "Kentavr@i.ua", "044-454-34-34")');
    tx.executeSql('INSERT INTO CLIENT  (id, name, addr, mail, phone) VALUES (2, "ООО New Step ", "Kiev", "Newstep@i.ua", "044-433-222-24")');
    tx.executeSql('INSERT INTO CLIENT  (id, name, addr, mail, phone) VALUES (3, "NEXT", "Lvov", "next@i.ua", "033-1-3434-24")');
    tx.executeSql('INSERT INTO CLIENT  (id, name, addr, mail, phone) VALUES (4, "Briz", "Lvov", "brizxt@i.ua", "033-1-1111-24")'); 
    tx.executeSql('INSERT INTO CLIENT  (id, name, addr, mail, phone) VALUES (5, "Brand", "Lvov", "brhjjt@i.ua", "033-1-1001-24")'); 

}

function queryDB(tx) {
      tx.executeSql('SELECT * FROM CLIENT WHERE addr="Lvov" ', [], querySuccess, errorCB);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:24:53.270

您不能创建表**ORDER**，因为它是 SQL 命令的一部分 :) 重命名您的表，您的程序将正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:04:58.523

```
Please try like this...

    var sql1 = 'CREATE TABLE IF NOT EXISTS ORDER (id INTEGER PRIMARY KEY, status)';
    tx.executeSql(sql1,[], function (tx, results) {
        var test =  new Array();
        test[0]='INSERT INTO ORDER (id, status) VALUES (1, "new" )';
        test[1]='INSERT INTO ORDER (id, status) VALUES (2, "done" )';
        test[2]='INSERT INTO ORDER (id, status) VALUES (3, "new" )';                                                                 
        for( i in test ) {   
            tx.executeSql(test[i]); 
        }
    });

var sql2 = 'CREATE TABLE IF NOT EXISTS CLIENT (id INTEGER PRIMARY KEY, name, addr, mail, phone)';
    tx.executeSql(sql2,[], function (tx, results) {
        var test2 =  new Array();
        test2[0]='INSERT INTO CLIENT (id, name, addr, mail, phone) VALUES (1, "Kentavr", "Kiev", "Kentavr@i.ua", "044-454-34-34")';
        test2[1]='INSERT INTO CLIENT (id, name, addr, mail, phone) VALUES (1, "Kentavr", "Kiev", "Kentavr@i.ua", "044-454-34-34")';
        test2[2]='INSERT INTO CLIENT (id, name, addr, mail, phone) VALUES (1, "Kentavr", "Kiev", "Kentavr@i.ua", "044-454-34-34")';                                                          
        for( i in test2 ) {   
            tx.executeSql(test2[i]);    
        }
    }); 
```

# combobox - 将布尔值绑定到 Vaadin 中的组合框

> ID：11828626
> 
> 赞同：1
> 
> 时间：2012-08-06T12:49:03.190
> 
> 标签：combobox, vaadin

我有一个 POJO，它的客户性别值为布尔值。我必须以数据源为客户类型的形式制作一个组合框。如何使组合框具有将绑定到布尔值的“男性”和“女性”选项。

谢谢。表格代码：

```
Form customerForm= new BeanValidationForm<Customer>(Customer.class); 
```

客户 POJO：

```
public class Customer implements Serializable {
public static final String QUERY_ALL = "Customer.queryAll";
public static final String QUERY_BY_ID = "Customer.queryById";

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Long id;
@Column(length = 50, nullable = false)
private String name;
@Column(length = 50, nullable = false)
private String surname;
@Column(nullable = false)
private Boolean gender;

//getters and setters....
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T08:09:57.290

```
 ComboBox comboBox = new ComboBox();
    comboBox.addItem(true);
    comboBox.setItemCaption(true, "Male");
    comboBox.addItem(false);
    comboBox.setItemCaption(false, "Feemale"); 
```

但我建议在此处使用枚举并将其保存为 @Enumerated(EnumType.STRING) 想象一下，如果有人新进入您的团队，他将必须了解这些 1 和 0 的含义（在 DB 中）。

# javascript - 为 SQLite3 生成 JavaScript SQL 解析器（使用 Lemon？ANTLR3？）

> ID：11828627
> 
> 赞同：2
> 
> 时间：2012-08-06T12:49:08.817
> 
> 标签：javascript, sqlite, parsing, antlr3, lemon

在过去的几周里，我一直潜入将 SQL 语句解析为可管理的东西的美丽世界，只是发现我可能需要一个完整的词法分析器/解析器来正确处理所有允许的标记/格式来执行一样。

我最感兴趣的是 create table 语句，但一个完整的通用解析器会更好，因为网络上似乎还没有人拥有这个。

我不是计算机专业的毕业生，而是一个自学成才的人，所以这对我来说是一个相当大的学习曲线。我采取的步骤是：

1.  使用正则表达式解析 sql
2.  失败，修复正则表达式
3.  更糟糕的是，挖掘 SQLite 源代码，发现它使用了 Lemon 解析器，这是一个特定于 SQLite 的项目
4.  尝试让 Lemon + PHP 解析器工作，认为我可以手动将其转换为 js。（失败的）
5.  尝试让 Emscripten 在 C 中处理 Lemon 生成的解析器（依赖地狱，失败。）
6.  搜索其他解析器/词法分析器生成器，注意 ANTLR3
7.  日夜尝试通过更改输出格式和回溯错误将[Sqljet语言文件](http://svn.sqljet.com/repos/sqljet/tags/1.1.0-rc1/sqljet/src/main/antlr/org/tmatesoft/sqljet/core/internal/lang/Sql.g)转换为javascript。

我一直在使用出色的[AntlrWorks](http://www.antlr.org/works/index.html) GUI 来尝试找出问题所在，但我不确定是 Javascript 堆栈出了问题，还是 Java 堆栈，或者 .g 格式是 v2 的旧格式。

是否有任何具有解析器/词法分析器生成器经验的人可以指出正确的方向来生成正确的可重用 Sqlite 解析器？我似乎能够在 javascript 中为 mysql 和 pl/sql 生成解析器。这是否意味着 sqlite .g 格式需要更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:04:06.983

为了能够对 JavaScript 目标使用语法，您必须：

*   更改`options`块中的目标语言：`options { language=JavaScript; }`
*   使用 JavaScript 代码更改*.g*语法文件中的**所有**嵌入代码（和之间的内容）。请注意，ANTLR 不会*根据*您在'值中定义的内容转换此代码，您必须自己执行此操作！*`{``}`*`options``language`**
***   生成解析器时，不要使用 ANTLRWorks，而是在命令行上这样做，并使用 java 的`-Xmx`参数使用大量堆：SQL 语法是需要大量内存的大型野兽**

 **这是以前的问答，展示了如何结合 JavaScript 目标使用（和运行）ANTLR 生成的解析器：[antlr3 - 生成解析树](https://stackoverflow.com/questions/5981206/antlr3-generating-a-parse-tree)

高温高压**

# perl - 从文本文件中删除 % 符号

> ID：11828629
> 
> 赞同：1
> 
> 时间：2012-08-06T12:49:12.173
> 
> 标签：perl

我正在尝试删除一些以 % 符号开头的内容。输入将是这样的。

```
%abc
%bbc 
```

我已经编写了如下脚本：

```
my $lineno=1;

while ($chapline =~ m/\%(.*?)$/msg)
    {
    $chapline =~ s/\%(.*?)$/&del;/g;
    }
$chapline =~ s/&del;//g; 
```

但它正在从第一个 % 符号中提取整个文件

pl。在这方面提供帮助

我用了我从下面得到的答案。但我得到更多空间，我无法删除这些空间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:34:08.967

如果您尝试删除以百分号开头的行，只需执行

```
perl -ne 'print unless /^%/' input > output 
```

您可以使用正则表达式，但如果您只想不打印任何内容，那真的没有意义。

我不知道你为什么插入和删除 &del; 字符串，但它是完全多余的。

您可以使用就地编辑开关来编辑文件，这将是

```
perl -i -ne ' ... ' input 
```

或者有备份

```
perl -i.bak -ne ' ... ' input 
```

大多数时候，我更喜欢 shell 重定向，因为它更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:54:26.830

```
use strict;

my $text = <<YOURTEXT;
%abc
%bbc
ccc
YOURTEXT

$text =~ s/\%(?:.*?\n)//xmg; # \r\n or \n depends on OS
print $text; 
```

**输出**

```
ccc 
```

# .htaccess - 如何 htaccess 将 *.html/ 重定向到 *.html

> ID：11828630
> 
> 赞同：0
> 
> 时间：2012-08-06T12:49:16.747
> 
> 标签：.htaccess

有人可以帮我在 htaccess 中添加正确的行，它将重定向以 .html/ 结尾的 URL

至

.html

例如[http://mysite.com/page.html/](http://mysite.com/page.html/)应该 301 重定向到[http://mysite.com/page.html](http://mysite.com/page.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:00:55.280

如果您想要一个单一的规范版本，为什么不在您的文档中[这样说呢？](http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html)

```
<link rel="canonical" href="http://www.example.com/page.html" /> 
```

但是，如果您确实觉得需要进行重定向，那么您可以使用以下方法：

```
RewriteEngine On
RewriteRule (.*\.html)/$ $1 [R,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:57:32.827

那么这个怎么样？

```
RewriteEngine On
RewriteRule (.*\.html)/$ $1 [R=301,L] 
```

这确实会使用 301 重定向用户。

# getpixel - 如何在不使用不安全方法的情况下固定 Bitmap.SetPixel？

> ID：11828631
> 
> 赞同：0
> 
> 时间：2012-08-06T12:49:24.667
> 
> 标签：getpixel

如何在不使用不安全模式或 codeproject 中的任何其他解决方案（如 FastPixel 或 FastBitmap（实际上也使用不安全模式））的情况下固定 Bitmap Set/GetPixel 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:43:42.613

在这里我找到了答案 Use System.Runtime.InteropServices.Marshal.Copy 并且不需要不安全的关键字！与不安全方法几乎一样有效，并且仍然比 get/sex 像素快得多。

[http://davidthomasbernal.com/blog/2008/03/13/c-image-processing-performance-unsafe-vs-safe-code-part-i/](http://davidthomasbernal.com/blog/2008/03/13/c-image-processing-performance-unsafe-vs-safe-code-part-i/)

# sql-server - 带有回复的递归 SQL 论坛帖子

> ID：11828638
> 
> 赞同：0
> 
> 时间：2012-08-06T12:49:35.680
> 
> 标签：sql-server, sql-server-2008

我真的被困在这里寻找一种合适的方法来提取 SQL 2008 中的所有主题回复（以及对回复的回复）。

这是数据库结构。

**论坛_猫**

```
catID    |    CatName
1        |    Q&A
2        |    General Discussion 
```

**论坛_话题**

```
topicID  |   catID   |   ReplyTo   |   TopicTitle                      
1        |   1       |   null      |   Just wondering if anyone knows?
2        |   1       |   1         |   Yeah I know that.
3        |   1       |   2         |   Thanks 
```

那么我是否需要一个函数来传递一个 topicID 并生成所有回复子项？

例如，我通过`topicID`of`1`并返回第 2 行和第 3 行，因为 2 是 1 的回复，3 是 2 的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:56:42.153

您需要实现递归 CTE。这是一个很好的例子，可以准确地做你想做的事情。

[使用公用表表达式的递归查询](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)

如果我有时间并且如果您需要帮助，我会修改示例以适合您的表格结构，但这非常简单。但我可以很容易地看到这超过了 MAXRECURSION 级别。更好的方法可能是添加一列来跟踪每个回复中的顶级主题，然后按回复顺序排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:02:44.187

只要您注意确保回复的数量不超过`MAXRECURSION`级别，您就可以使用[CTE](http://msdn.microsoft.com/en-us/library/ms175972.aspx)：

```
;WITH topic (topicId, catId, replyTo, topicTitle) AS (
    SELECT topicId, catId, replyTo, topicTitle
    FROM Forum_Topics F
    WHERE F.topicId = @topicId

    UNION ALL

    SELECT topicId, catId, replyTo, topicTitle
    FROM Forum_Topics F
    INNER JOIN topic T ON T.topicId = F.replyTo
)
SELECT * FROM topic 
```

# java - 关于并发修改异常

> ID：11828639
> 
> 赞同：0
> 
> 时间：2012-08-06T12:49:46.710
> 
> 标签：java, multithreading

您能否告诉我在单线程环境中是否可能发生并发修改异常以及我发布的以下应用程序由两个线程组成，请告诉我我能否在单个线程中也看到相同的异常......请建议

```
package concurrentmodificationError;

import java.util.*;

class ItrDemo
{
    public static void main(String arg[])
    {
       Vector v=new Vector();
       v.addElement("Amit");
       v.add("Rahul");
       v.add(1,"Nitin");
       v.addElement("Ankit");
       System.out.println("There are "+v.size()+"elements in the vector ");

       final Iterator itr=v.iterator();
       Thread th=new Thread()    {
               public void run()
               {
                   System.out.println("New Thread started,traversing     elements of vector...");
                   System.out.println("Contents of vector are...");
                   while(itr.hasNext())
                   {
                     System.out.println(itr.next());
                     try
                      {
                          Thread.sleep(2000);
                       }
                      catch(Exception e1)
                      {
                      }
                   }
              }
         };// end of annomyous class
      System.out.println("Suspending main thread and starting a new thread       for traversing the contents of vector...");
      th.start();
      try
       {
           Thread.sleep(1000);
       }
       catch(Exception e1)
       {
       }
       System.out.println("main thread resumed,modifying vector...");
       v.remove("Ankit");
       v.add("Puneet");
       v.add("Raman");
       System.out.println("Vector Modified , Ankit removed and Puneet &        Raman added.");
  }

} 
```

是的，伙计们，我知道在单线程环境中可能会出现此错误..如下面的代码所示..

```
System.out.println("Content of list are : ");
          ListIterator itr1=list.listIterator();
          while(itr1.hasNext())
          {
              list.add(new Emp("Anand","Manager",56000)); //
            Emp e=(Emp)itr1.next();  
            e.display();
          } 
```

请告知有什么方法可以克服它..这样就不会出现此错误..!!请告知

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:57:07.777

参考[ConcurrentModificationException](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ConcurrentModificationException.html)的Javadoc ，

> 请注意，此异常并不总是表示对象已被不同的线程同时修改。如果单个线程发出一系列违反对象约定的方法调用，则该对象可能会抛出此异常。例如，如果线程在使用快速失败迭代器迭代集合时直接修改集合，则迭代器将抛出此异常。

当线程安全集合受到并发访问时，并不总是会引发此异常。任何**结构修改**（添加/删除）都会提示发生此异常。

在您的特定示例中，**您正在修改 Iterator 之外的集合**，因此一旦线程从睡眠中唤醒，它可能会抛出此异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T12:59:10.530

是的，在单线程环境中也可以得到这个异常（不是错误）。更准确地说，只要您当前正在迭代的集合被另一个线程或当前线程修改，就会引发异常。

出现此错误的单线程方案示例如下：

```
Iterator<String> names = namesList.iterator();
while(names.hasNext()){
    String currentName = names.next();
    if(currentName.startsWith("A")){
           namesList.remove(currentName); //here you modify the original collection
    }
} 
```

在这种情况下，如果迭代器是快速失败的迭代器（正如大多数集合实现所提供的那样），您将收到 ConcurrentModificationException

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T12:54:54.707

`ConcurrentModificationException`如果在迭代时修改了集合，即使在单个线程中也会抛出。例如

```
 List<String> lst = new ArrayList<String>();
        lst.add("sample");

        for(String str : lst) {
            lst.add("simple");
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T12:57:02.850

单线程中 CME 的经典示例类似于

```
List<String> strs = new ArrayList<String>();
strs.add("foo");
strs.add("bar");

for(String str : strs) {
  strs.add(str + " added");
} 
```

CME 触发是因为您正在迭代列表并且您修改它*而不是通过 iterator*。您*可以*通过其迭代器修改列表，而无需获得 CME：

```
ListIterator<String> strIt = strs.listIterator();
while(strIt.hasNext()) {
  String str = strIt.next();
  strIt.add(str + " added");
}
// strs now contains "foo", "foo added", "bar", "bar added" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T12:58:34.987

A`ConcurrentModificationException`可以在单线程环境中抛出。每当在不应该修改对象的上下文中修改对象时使用它，不一定在另一个线程中。

例子：

```
public class CME {
    public static void main(String...args) {
        HashSet<Integer> coll = new HashSet<Integer>();
        coll.add(1);
        coll.add(2);
        coll.add(3);

        for(Integer i : coll) {
            coll.remove(i); // Throws ConcurrentModificationException
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T12:59:06.263

你的问题（对我来说）似乎有点神秘......

关于您的第一个问题，`ConcurrentModificationException`在单线程环境中，您需要做的就是这样：

```
List<String> list =...;
for (String str : list)
{
    list.remove(str); //this should yield the exception
} 
```

至于您的第二个问题，您发布的代码（具有 2 个线程的代码）很可能容易出现这种异常。到目前为止，由于您拥有的物品数量以及超时值，它正在工作。如果您更改这些，您很可能会遇到此异常。

为避免这种情况，您可以使用[`synchronized blocks`](http://tutorials.jenkov.com/java-concurrency/synchronized.html). 通过允许每个线程有一个同步部分，它可以通过它进行集合修改，您应该能够避开并发修改异常。

您还可以通过使用[`Semaphore`](http://en.wikipedia.org/wiki/Semaphore_%28programming%29).

# haskell - 控制并行执行

> ID：11828654
> 
> 赞同：12
> 
> 时间：2012-08-06T12:50:52.403
> 
> 标签：haskell, parallel-processing

Haskell 提供了一个`par`组合器，它将一个“spark”排队，以便与当前线程并行进行*可能的*评估。它还提供了一个`pseq`组合器，它强制对纯代码的评估以特定的顺序发生。

Haskell 似乎*没有*提供一种产生多个火花然后*等待*它们全部完成的方法。使用显式并发实现这一点非常简单，但使用纯火花似乎是不可能的。

在某种程度上，这可能是因为火花的预期用例。它们似乎是为*推测性*评估而设计的。也就是说，做*可能*需要但可能不需要的工作。因此，火花仅在空闲的核心上运行。

但是，这不是我的用例。我有一堆我*知道*的结果，事实上，很快就会需要这些结果。如果我在火花点燃之前开始尝试处理结果，我将再次以一堆失败的火花结束单线程。

当然，`par` *等待*火花完成，它不会实现任何并行性！*但是，如果有某种方法可以产生多个*火花然后等待它们全部完成，那将非常有用。我找不到任何方法来做到这一点。

有人有什么有用的建议吗？（显然，除了“使用显式并发”。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T13:04:04.683

您可以尝试将引发计算的结果放入严格的数据结构中

```
{-# LANGUAGE BangPatterns #-}
module Main where

import Control.Parallel

fib :: Int -> Int
fib n
    | n < 1     = 0
    | n == 1    = 1
    | otherwise = fib (n-1) + fib (n-2)

trib :: Int -> Int
trib n
    | n < 1     = 0
    | n < 3     = 1
    | otherwise = trib (n-1) + trib (n-2) + trib (n-3)

data R = R { res1, res2 :: !Int }

main :: IO ()
main = do
    let !r = let a = fib 38
                 b = trib 31
             in a `par` b `pseq` (R a b)
    print $ res1 r
    print $ fib 28
    print $ res2 r 
```

这在这里工作：

```
$ ./spark +RTS -N2 -s
39088169
317811
53798080
          65,328 bytes allocated in the heap
           9,688 bytes copied during GC
           5,488 bytes maximum residency (1 sample(s))
          30,680 bytes maximum slop
               2 MB total memory in use (0 MB lost due to fragmentation)

                                    Tot time (elapsed)  Avg pause  Max pause
  Gen  0         1 colls,     0 par    0.00s    0.00s     0.0001s    0.0001s
  Gen  1         1 colls,     1 par    0.00s    0.00s     0.0001s    0.0001s

  Parallel GC work balance: 1.33 (686 / 515, ideal 2)

                        MUT time (elapsed)       GC time  (elapsed)
  Task  0 (worker) :    0.59s    (  0.59s)       0.00s    (  0.00s)
  Task  1 (worker) :    0.00s    (  0.59s)       0.00s    (  0.00s)
  Task  2 (bound)  :    0.59s    (  0.59s)       0.00s    (  0.00s)
  Task  3 (worker) :    0.00s    (  0.59s)       0.00s    (  0.00s)

  SPARKS: 1 (1 converted, 0 overflowed, 0 dud, 0 GC'd, 0 fizzled)

  INIT    time    0.00s  (  0.00s elapsed)
  MUT     time    1.17s  (  0.59s elapsed)
  GC      time    0.00s  (  0.00s elapsed)
  EXIT    time    0.00s  (  0.00s elapsed)
  Total   time    1.18s  (  0.59s elapsed)

  Alloc rate    55,464 bytes per MUT second

  Productivity  99.9% of total user, 199.1% of total elapsed

gc_alloc_block_sync: 0
whitehole_spin: 0
gen[0].sync: 0
gen[1].sync: 0 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T04:19:52.720

**真正简短的答案**

你不能。

**简短的回答**

要等待火花完成，请尝试评估火花正在评估的内容。例如，如果你有表达式`a`和`b`, 来计算`a + b`，你可以做

```
a `par` b `par` (a + b) 
```

或者

```
a `par` b `pseq` (a + b) 
```

**长答案**

当您使用 来创建火花时`par`，您是在告诉运行时系统“我稍后将需要此值，因此您应该并行评估它。” 当您稍后需要该值时，火花已经评估了表达式，或者没有。如果有，thunk 将被一个值替换，因此重新评估没有成本 - 它只是获取值。如果它没有被评估为火花，那么等待火花是没有用的——它可能需要一段时间才能被安排，而线程等待是在浪费时间。您应该自己评估表达式，而不是等待。本质上，*无需等待火花*。您只需尝试评估原始表达式并获得性能优势。

另外，关于投机的说明 - 虽然火花可以并且经常用于投机，但这并不完全是它们的设计目的。我看到`par`它被用于简单的并行化，`pfib`如下所示，比我看到它用于推测的次数要多得多。

**例子**

一个标准的例子是并行化斐波那契数，从串行

```
fib 0 = 0
fib 1 = 1
fib n = fib (n - 1) + fib (n - 2) 
```

到平行

```
pfib 0 = 0
pfib 1 = 1
pfib n = l `par` r `pseq` (l + r) where
    l = pfib (n - 1)
    r = pfib (n - 2) 
```

.

现在举一个使用推测的例子：

```
spec :: a -- a guess to the input value
    -> (a -> b) -- a function to tranform the input value
    -> a -- the actual input value - this will require computation
    -> b -- the function applied to the input value
spec guess f input = let speculation = f guess in speculation `par`
    if guess == input
        then speculation
        else f input 
```

我从中得到的 hackage 包，[推测](http://hackage.haskell.org/package/speculation)，实际上有一些优化，比如不在单个核心上执行此操作并检查输入是否已经被评估，但这与函数的工作无关。

**其他使事情更明确的解决方案**

*   [monad-par](http://hackage.haskell.org/package/monad-par)
*   [策略](http://hackage.haskell.org/packages/archive/parallel/3.2.0.3/doc/html/Control-Parallel-Strategies.html)，即利用`par`。
*   与 IO 混为一谈。这里有很多东西。

# jquery - 单击元素时更改正文类

> ID：11828655
> 
> 赞同：0
> 
> 时间：2012-08-06T12:50:56.340
> 
> 标签：jquery

每次单击元素时，有没有办法在 body 类上获取项目列表？我现在正在做这个：

```
$("#step a").click(function (i) {
    i = i+1;
    $("body").addClass("item" i);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:56:12.560

**您的点击功能将通过您的点击功能传递事件。您不能为此添加 1。**

你应该在你的 html 中使用这样的东西。data 属性将为您存储锚点上的步数：

```
<div id="step">
    <a data-step="1">Click me</a>
</div> 
```

还有一些 JavaScript 来控制它：

```
$("#step a").click(function(e) {
    e.preventDefault(); //Stop browser jumping to top of the page

    var step = $(this).attr("data-step"); //Get the current step from attribute
    $("body").addClass("item-" + step); //Add this class to the body

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:54:10.703

```
var i = 0;
$("#step a").click(function () {
    i = i+1;
    $('body').removeClass().addClass('item' + i);
}); 
```

# apache-flex - 如何将 ViewNavigatorApplication 中的事件分派到另一个视图

> ID：11828657
> 
> 赞同：1
> 
> 时间：2012-08-06T12:50:59.853
> 
> 标签：apache-flex, events, mobile

我想从 中调度一个事件`ViewNavigatorApplication`并在另一个视图中捕获它。

```
var terminateEvent:MyEvent = new Event(MyEvent.COMPLETE);
dispatchEvent(terminateEvent); 
```

我没有成功在另一个视图中捕捉到事件

```
this.addEventListenerMyEvent.COMPLETE, terminateExperiment_Handler); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:39:05.680

事件只能用于向上传达显示层次结构；不下来。

如果您想向下通信，您应该通过更改视图类的属性或调用方法来实现。

也就是说，您可以使用[FlexGlobals](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/FlexGlobals.html#topLevelApplication)从视图中将侦听器添加到应用程序中：

```
(FlexGlobals.topLevelApplication as ViewNavigatorApplication).addEventListenerMyEvent.COMPLETE, terminateExperiment_Handler); 
```

以这种方式听“父母”通常被认为是违反封装的，我不会轻易推荐这种方法。

# asp.net - cookie 不会在 IE 和 Chrome 上创建

> ID：11828659
> 
> 赞同：0
> 
> 时间：2012-08-06T12:51:08.300
> 
> 标签：asp.net, cookies, cross-browser

We have an aspx page that needs a cookie in order to start. Before redirecting to that page, we create the cookie and it is given on the response then the redirect to the page.

```
Form form = new Form { 
            FormID = dalObject.FormID, 
            PageName = dalObject.PageName, 
            ViewPageName = dalObject.ViewPageName };

        HttpCookie cookie = new HttpCookie("FormCookie");
        cookie.Expires = DateTime.Now.AddMinutes(1);

        if (dalObject.FormID==(int)Forms.SP_APP_FORM)
        {
            cookie.Values.Add("ApplicationRepositoryID",GetEncryptedToken(applicationRepositoryID.ToString()));
            cookie.Values.Add("UserDirectoryID", GetEncryptedToken(userDirectoryID.ToString()));
            cookie.Values.Add("FormID", GetEncryptedToken(dalObject.FormID.ToString()));

            if (applicationFormID.HasValue)
                cookie.Values.Add("ApplicationFormID", GetEncryptedToken(applicationFormID.ToString()));
        }
        form.PageCookie = cookie;
        return form; 
```

The problem is that in the development environment it is working just fine, in production it is working too (for them), but if we try the production site, it does not work (from our development computers). We suspect the cookie doesn't get created. And this happens on 2 of 3 computers of the development. on one of them it is working. We tried to delete the cookies, clear cache, but no result.

Any ideas? Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:56:26.233

我以前在我们的网站上看到过这个。在我们的案例中，客户端和服务器时钟明显不同步。服务器设置到期时间，客户端根据自己的时钟检查它，如果它超过（在你的情况下）一分钟太快，那么它会立即到期。

我们将 cookie 的到期时间设置得更远（比如一周或一个月），然后只在服务器上进行检查（因为它应该自我检查）。基本上，我们在 cookie 中添加了额外的数据（手动到期时间），服务器可以使用它来进行检查。如果您认为它已过期（您设置的一分钟），则服务器将删除（并忽略）它发送的 cookie。

我不知道这是否是解决问题的最佳方法，但它对我们有用。

顺便说一句，我们只在 IE 上发现了这个问题。

# java - 从未调用过 JPanel 子类中的重写 paint() 函数？

> ID：11828660
> 
> 赞同：2
> 
> 时间：2012-08-06T12:51:14.493
> 
> 标签：java, jpanel, paint, repaint

我在覆盖我的 JPanel 子类 ChordEditor 中的 paint() 方法时遇到问题。即使我重写paint() 方法，将其添加到框架中，然后调用repaint()，paint() 方法也不会被调用。打印输出“进入油漆功能”不打印。谁能帮我这个？

我的 ChordEditor 类：

```
public class ChordEditor extends JPanel{

    ArrayList<Chord> chordArray = new ArrayList<Chord>();

    public ChordEditor() {
        this.repaint();
    }

    @Override
    public void paint(Graphics g) {
        System.out.println("entering paint function");
        super.paint(g);
        Graphics2D g2d = (Graphics2D) g;
        Toolkit.getDefaultToolkit().sync();
        System.out.println("drawing line");
        g2d.drawLine(10, 10, 40, 40);
        g.dispose();
    }
} 
```

我将它添加到 JFrame 的位置：

```
ChordEditor ce = new ChordEditor();
m_frame.getContentPane().removeAll();
m_frame.add(ce);
m_frame.getContentPane().repaint(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:39:31.283

添加组件后立即发出 a 的事实表明[`repaint`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#repaint%28%29)您在已经可见的框架上执行此操作。**也许你应该[`validate`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#validate%28%29)先画框。**以下对我有用：

```
import javax.swing.*;
import java.awt.*;

class ChordEditor extends JPanel {

    public ChordEditor() {
        this.repaint();
    }

    @Override
    public void paint(Graphics g) {
        System.out.println("entering paint function");
        super.paint(g);
        Graphics2D g2d = (Graphics2D) g;
        Toolkit.getDefaultToolkit().sync();
        System.out.println("drawing line");
        g2d.drawLine(10, 10, 40, 40);
        //g.dispose();
    }

    public static void main(String[] args) {
        JFrame m_frame = new JFrame();
        m_frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        m_frame.setSize(600, 400);
        m_frame.setVisible(true);
        ChordEditor ce = new ChordEditor();
        m_frame.getContentPane().removeAll();
        m_frame.add(ce);
        m_frame.getContentPane().repaint();
        m_frame.validate();
    }
} 
```

正如对您的问题的评论中已经说明的那样，您应该覆盖[`paintComponent`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paintComponent%28java.awt.Graphics%29)而不是[`paint`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paint%28java.awt.Graphics%29)，并且您不应该调用[`dispose`](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#dispose%28%29)，因为您没有创建此 Graphics 上下文。

调用[`sync`](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#sync%28%29)and[`repaint`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#repaint%28%29)也应该是不必要的，我猜你添加它们是为了解决这个问题。因此，一旦事情对您有用，您就可以删除它们。您还可以考虑在框架可见之前将所有组件添加到框架中。这样做会导致隐式验证，并且是对具有固定控件配置的窗口更常见的方法。

# javascript - io.sockets.emit not sending msg to server

> ID：11828662
> 
> 赞同：0
> 
> 时间：2012-08-06T12:51:21.207
> 
> 标签：javascript, node.js, express, socket.io, pug

I'm working on a user login application, trying to `io.sockets.emit("userLogin", "some msg");` when some is logged in, somehow the server can't recieve the message.

Server app.js:

```
app.post('/sessions', function(req, res) {
user.authenticate(req.body.login, req.body.password, req.body.role, function(user) {    
    if (user) {
        req.session.user = user;
        console.log("correct");
        io.sockets.emit("userLogin", "some msg");
        res.redirect('/add_users');         
    } else {
        console.log("wrong");
        res.render('sessions', {locals: {
            redir: req.body.redir
        }});
    };
});
}); 
```

Client login.jade:

```
html
head
    script(src='jquery-1.7.1.js')
    script(src='http://localhost:3002/socket.io/socket.io.js')
    script(type='text/javascript')
        var socket;
        socket =  io.connect('http://localhost:3002'); 
        socket.on('userLogin', function(user) {
            console.log("userLogin: ", user)
        });
        $(function() {
            $("button").click(function() {
                $.post("/sessions", {
                    time: (new Date).toLocaleTimeString(),
                    date: (new Date).toLocaleDateString()
                });
            });
        });

body
    h1 Login
        form(action='/sessions', method='post')
            input(type='hidden', name='redir', value='redir')
            p
                lable(for='login') Login:
                input(type='text', name='login', id='login')        
            p
                lable(for='password') Password:
                input(type='text', name='password', id='password')
            p
                button Login 
```

Funny thing is I have another emit in a `app.get()` function and the client side code is similar, that works. So I'm suspecting it's something to do with this `app.post()`? Any help is appreciated, thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:32:27.930

提交表单会触发页面重新加载，从而断开 socket.io。您应该使用[event.preventDefault](http://api.jquery.com/event.preventDefault/)来避免这种情况。

```
$("button").click(function(event) {
  event.preventDefault();

  $.post("/sessions", {
    time: (new Date).toLocaleTimeString(),
    date: (new Date).toLocaleDateString()
  });
}); 
```

# iphone - setDisplayStats 显示“劣质”字体图像

> ID：11828670
> 
> 赞同：0
> 
> 时间：2012-08-06T12:51:46.663
> 
> 标签：iphone, xcode, cocos2d-iphone

我是 Cocos2D 的新手，目前仍在学习。我一直在尝试找到解决我遇到的这个问题的方法，但仅仅弄清楚谷歌上的搜索查询以获得答案已被证明是一项艰巨的任务。

马上，我在测试 Hello World 示例时遇到了问题（几乎是在 Xcode 中创建新项目时生成的 vanilla 模板。

请注意图像中的左下角，它应该可以解释我的整个问题：

![http://i.imgur.com/9tKnM.jpg](../Images/7ffcd05a6a911b7112b458115a34f322.png)

另请注意，我使用的是 Cocos2d 2.0 和 Xcode 4.4，这在 Cocos2d 1.0.1 中似乎没有发生，但该版本中只有 DisplayFPS（我认为？）

经过进一步测试，模拟器的 Retina 设备不会发生这种情况 - 只有非 Retina 设备，即 iPad/iPhone

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:05:17.107

检查所有这些图像是否都在您的项目中（通常在资源组下）：

*   fps-images.png
*   fps-图像-hd.png
*   fps-images-ipadhd.png

如果其中一个文件丢失，您会在某些设备上看到失真，具体取决于丢失的文件。

如果您使用不包含 -hd 和 -ipadhd 图像的旧模板（v1.0.1 或更早版本）启动项目，则这些文件可能会丢失。

# php - 星号 1.6.2.20。php。如何获取当前时间拨打的电话号码列表？

> ID：11828674
> 
> 赞同：0
> 
> 时间：2012-08-06T12:52:06.367
> 
> 标签：php, asterisk

我们有星号服务器，我需要获取当前时间调用的号码。我尝试使用[php agi](http://phpagi.sourceforge.net/)库，但我得到的最大值是频道列表。

```
$agi_manager = new AGI_AsteriskManager(null, $agi_config);
$connect = $agi_manager->connect();
$result = $agi_manager->command('core show channels'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:00:53.050

这正是您所需要的。

现在您必须解析该表并从中提取 SIP 对等方。

# facebook - 获取 facebook 页面访问令牌以自动发布到 facebook 页面墙

> ID：11828675
> 
> 赞同：3
> 
> 时间：2012-08-06T12:52:06.247
> 
> 标签：facebook, api, access-token

需要通过 PHP 将故事从网站发布到指定的 facebook 页面。不推荐使用离线访问权限，所以我基本上需要获取用户访问令牌，以便我可以获得页面访问令牌（作为页面发布），但是这些令牌过期并且扩展它们需要直接要求用户在弹出窗口中扩展权限（正确如果我错了我）。

所以也许有一种方法可以在后台登录，这样如果用户访问令牌过期，我登录用户并获取新的访问令牌？或者也许有一种方法可以获得永无止境的用户访问令牌并通过它获得永无止境的页面访问令牌？

不明白为什么这么难做，特别是如果我拥有我愿意发布到的网站和 Facebook 页面。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-10T17:16:08.213

我刚刚发现了如何做到这一点并在stackoverflow中搜索了这个问题，以便我可以回答它:)

首先，不是您必须要求扩展访问令牌的用户，而是您。您需要扩展您自己用户的访问令牌。您的用户的访问令牌可以在[https://developers.facebook.com/tools/accesstoken/](https://developers.facebook.com/tools/accesstoken/)名称“用户令牌”下找到。

下一步是通过发出此请求来延长此令牌的寿命：

```
GET /oauth/access_token?  
  grant_type=fb_exchange_token&           
  client_id={app-id}&
  client_secret={app-secret}&
  fb_exchange_token={short-lived-token} 
```

您在developers.facebook.com 中的应用程序仪表板上的信息在哪里`{app-id}`，是您刚刚找到的“用户令牌”。`{app-secret}``{short-lived-token}`

您不必通过 php SDK 进行此调用，您可以像请求页面一样使用浏览器`graph.facebook.com/oauth/access_token?grant_type=fb_exchange_token&client_id={app-id}&client_secret={app-secret}&fb_exchange_token={short-lived-token}`（注意：它以 . 的形式返回值`access_token={access-token}&expires={seconds}`。所以不要复制整个内容。）

现在，当您使用此扩展用户令牌获取页面访问令牌时，它将是不朽的。使用新令牌进行此 API 调用（注意：在进行调用之前，您必须授予权限“manage_pages”以进行此调用，并授予“publish_actions”权限以稍后发布到页面。最简单的方法是点击[https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)上的“获取访问令牌”按钮，您需要授予的权限位于“扩展权限”选项卡下。）：

```
GET /me/accounts 
```

您将获得页面列表及其一些信息以及每个页面的访问令牌。

这些访问令牌不会过期。您可以查看[https://developers.facebook.com/tools/debug/](https://developers.facebook.com/tools/debug/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:57:02.000

您需要为您的页面创建一个连接器应用程序，然后为您的应用程序获取一个永久访问令牌。您可以在 Facebook 文档上的[Authenticating as an App](https://developers.facebook.com/docs/authentication/applications/)页面上查看此过程的详细信息。

# javascript - 如何在表单编辑中更改主键后刷新jqgrid行ID而不重新加载

> ID：11828676
> 
> 赞同：0
> 
> 时间：2012-08-06T12:52:09.750
> 
> 标签：javascript, jqgrid

如果表单编辑改变了主键，行id不会改变。

行 ID 是从主键创建的。因此，在表单行 id 中的主键编辑后变得错误。

使用 reloadAfterSubmit: true，从添加的行失去焦点，所以应该避免。如何在不重新加载整个网格的情况下通过表单编辑更改初级键后刷新 jqgrid 行 ID？

表单编辑 aftersubmit 方法返回正确的更改行新 id：

```
afterSubmit: function (response, postdata) { 
    var json = $.parseJSON(response.responseText),
    return [true, '', json.Id];
  } 
```

但是 jqgrid 不会将添加的行 ID 更改为此。怎么修 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:21:34.127

如果编辑后得到主键，可以使用 jqgrid setCell 方法进行更改。

这是方法[链接](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3amethods)

您可以在此页面中使用“setCell”进行搜索。

```
$('#gridTable').setCell(rowId, 'KeyColumnName', 'Value'); 
```

# .net - EF 对象是否是业务对象？

> ID：11828680
> 
> 赞同：2
> 
> 时间：2012-08-06T12:52:29.503
> 
> 标签：.net, entity-framework, orm, business-objects

> **可能重复：**
> [使用实体框架实体作为业务对象？](https://stackoverflow.com/questions/217655/using-entity-framework-entities-as-business-objects)

我正在研究将实体框架用作 ORM，但在阅读了大量内容后，我对 EF 对象的确切位置感到非常困惑。

我的印象是，ORM 的全部意义在于消除将对象映射到关系数据库的繁琐和复杂的工作。你加载你的数据库并得到一堆像魔法一样的对象。CRUD 的东西都是针对对象完成的。如果数据库发生更改，您将更改映射但您的对象保持不变。

这意味着您将在整个系统中使用这些对象，并且它们将具有行为。它们是业务对象。这对我来说很有意义，而且确实 MS[告诉你如何添加行为](http://msdn.microsoft.com/en-us/library/cc716789.aspx)

但是，我一直在阅读很多人说您永远不应该将 EF 对象用作您的业务对象，因为他们只关心数据的持久性，并且会将您的业务对象与 EF 耦合。他们建议使用 EF 作为数据层的抽象，并将它们映射到真实的业务对象。

这对我来说似乎毫无意义。当我仍然最终映射到我的业务对象时，为什么还需要另一个抽象层？如果我必须映射 EF 属性，我不妨映射 DB 列！

我认为 ORM 的全部意义在于自动化映射并充当后备存储的抽象？我错过了什么吗？

**编辑：**行为我的意思是业务逻辑。验证、计算属性、业务方法等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:36:18.613

一般来说，那些说你不应该使用 EF 生成的类作为业务层的人是正确的。

不过，在小型应用程序中，您绝对可以直接从 UI 中使用 EF 类。

随着您的应用程序的大小和功能不断增长，您肯定会在 UI 中使用 EF 类时遇到问题：选择 N+1（视图中发生延迟加载）、序列化（循环引用）、AJAX/jQuery（发送过大的对象用于微小更新场景的在线图表）等。

人们经常推荐使用 AutoMapper（https://github.com/AutoMapper/AutoMapper）在你的 EF 类和 DTO 类和业务层类之间进行映射，以减少编写大量映射代码的乏味。

我认为这绝对是您可以根据您的项目要求做出的决定，不一定有正确的答案。如果您开始感到疼痛，您可以随时改变方向。与往常一样，选择对您的项目可行的最简单的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:45:02.647

> 如果数据库发生更改，您将更改映射但您的对象保持不变。

不会。Db 更改也会更改映射的实体类。但这并不意味着这些类不能用于业务逻辑。如果您使用开箱即用的 EF，它将创建实体类作为`partial`类，因此邀请您以不会被生成的代码覆盖的方式添加自己的代码。

> 人们说 (...) [EF 对象] 只关心数据的持久性

我不这么认为。它们可能能够被*持久*化到数据存储并从数据存储中填充（就像它们在数据库优先工作时一样），但这不是它们关心的问题。我们应该忽略这种添加的行为，而*不是在业务逻辑中使用它*（我认为）。对象不是持久性无知的，业务逻辑应该是。

话虽如此，我一直将实体类用于业务逻辑。但我不再是纯粹的 OO 的粉丝，在密切合作的对象与精心分离的职责的意义上。有两个原因：

1.  大多数应用程序都涉及某种业务层和带有视图模型的视图层，它们由控制器层粘合在一起，并通过需要序列化的边界进行通信。所以直接调用领域类的行为通常不是一种选择。因此，我倾向于在通过 DTO 进行通信的服务类或外观中编写越来越多的 BL，而在直接从其他层解决的领域模型中编写更少的 BL。这些服务方法往往是业务逻辑的完美场所。所以大多数时候，我扩展 EF 类的逻辑涉及到类本身的数据，并且不需要与其他 EF 类进行任何合作。这也可以防止延迟加载异常和 n+1 问题。我可以展示很多例子，我很乐意在服务方法中从域逻辑转移到 BL，但那

    同样，我不喜欢使用`OnPropertyChanging/Changed`其中一个 MS 链接描述的方法。我已经做到了，它是意大利面。它在视图模型中很有用，例如响应用户输入，但在域类中设置属性应该是：设置属性。没有添加的行为会被遗忘并且有一天会咬你。

2.  （无状态）函数式编程范式的进步，受到 Linq 和其他 .Net 语言结构的鼓励。

所以我看到我的领域模型越来越接近[贫血的领域模型](http://martinfowler.com/bliki/AnemicDomainModel.html)，尽管从未真正到达那里。我试图给出一些理由，为什么这在今天是完全明智的。

# tridion - Tridion：多媒体链接在富文本框中不起作用

> ID：11828689
> 
> 赞同：1
> 
> 时间：2012-08-06T12:53:05.353
> 
> 标签：tridion

我正在尝试添加

```
<a href="tcm:45-6789">title</a> 
```

在富文本框中。tcm:45-6789 是pdf（多媒体组件）的id。

我已经写了剃刀来检索内容。当我发布页面时，它会将链接创建为 tridion 的组件链接而不是多媒体链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T13:03:36.160

我不确定 Razor Mediator 将如何处理此问题，但在标准 DWT TBB 中，您将使用：

```
<a tridion:href="tcm:45-6789" tridion:type="Multimedia">title</a> 
```

这将确保链接被处理为多媒体类型（使用二进制链接解析器），而不是使用标准动态组件链接解析器的组件类型。

可选地，可以更改 Razor 调解器本身以识别链接中使用的组件的类型，如果是多媒体组件，它可以决定使用二进制链接来解决它。但这当然需要更改调解器代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T16:29:49.270

是的。当您在 RTF 中创建组件链接时，它不会生成到二进制文件的链接。检查下面的 sdl tridion 世界扩展与解决方案完全相同。

[https://www.sdltridionworld.com/community/2011_extensions/process-download-links.aspx](https://www.sdltridionworld.com/community/2011_extensions/process-download-links.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T10:49:53.447

在格式选项卡的富文本框中添加 pdf（多媒体组件）并选择类型作为组件并浏览多媒体组件（pdf）而不是手动编写 a href="tcm:45-6789" 后，问题得到解决。谢谢

# php - 分页 - 标准 php 或不使用 ajax 重新加载页面？

> ID：11828695
> 
> 赞同：-1
> 
> 时间：2012-08-06T12:53:35.553
> 
> 标签：php, javascript, ajax, pagination

我最近一直在搜索，但没有找到任何有关此的信息。

这两种分页方式有区别吗？最令人烦恼的问题是数据执行的速度如何？哪个更适合用于较慢的网络？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:02:46.177

在您的情况下，这两种方法都必须从服务器端检索结果，我假设它是 php.ini。由于两种方法的检索结果是相同的，所以区别在于发送数据和显示。
使用标准的 php 分页，您需要发送整个页面，包括页面的所有布局和其他必要的东西，更不用说新页面加载时对库的所有新调用。
在进行 AJAX 分页时，您很可能只发送数据，例如以 JSON 格式发送，然后在用户端用 javascript 创建必要的元素，或者如果您选择发送已经准备好的 HTML 代码并简单地将其插入DOM。

总之，我想说 AJAX 版本肯定更快。

不谈论性能，还有其他几个方面会影响您的决定。这里有几个：

*   正如其他评论者所提到的，用户关闭 javascript 的情况会有所不同；
*   搜索引擎无法索引这些结果（需要对此进行确认）；
*   想想后退/前进导航。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T12:57:22.043

ajax 分页应该比重新加载整个页面更快，因为您只需要使用结果集更新片段，而不是再次更新所有资产（包括它们的有效负载、标题和延迟时间）。

如果您还仔细计划服务器发送的数据格式——例如，您可以在客户端模板引擎中使用 JSON 而不是纯 HTML——您甚至可以减少有效负载，从而大大提高整体响应时间。

此外，如果您的页面包含要在每次页面加载时执行的脚本，那么每次页面加载时 javascript 解释器总是会花费一些额外的时间，而使用 ajax 您将执行一次脚本（如果您需要重新应用某些功能对于您的结果集的元素，您可以从事件委托中受益）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T13:16:32.350

您应该熟悉[Unobtrusive JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)的概念。这个概念表明，如果 Javascript 不可用，该站点仍然可以运行。

此外，[渐进式增强](http://en.wikipedia.org/wiki/Progressive_enhancement)是一个通过考虑可访问性来添加更多功能层的概念。

我会说最佳做法是：

a) 实现分页服务器端 (PHP) b) Javascript 层 (Ajax/jQuery)

> 这两种分页方式有区别吗？

分页就是分页。功能之间没有真正的区别，只是执行。

> 最令人烦恼的问题是数据执行的速度如何？

AJAX 肯定会感觉更快，而且通常更快，这要归功于不必重新渲染整个页面和所有这些开销。当然，它还添加了一个额外的层，如果没有很好地编程，它可能会损坏。

> 哪个更适合用于较慢的网络？

那要看。您在考虑蜂窝网络速度吗？如果是这样，该网站针对移动设备的优化程度如何？您只是在考虑台式机和拨号吗？

(A) 您还可以像分页一样对 AJAX 进行不同的编程。您可以一次加载所有结果，然后使用 Javascript 将结果分成“页面”。有效地在那里拥有所有 HTML 标记，并在需要时显示/隐藏它。

(B) 您只能加载第一个页面并让 AJAX 调用回服务器以加载其他页面。

**好的**

如果人们可能要查看多个页面，选项 (A) 效果很好。它只需要 1 次访问服务器，在页面加载时，您只需使用 Javascript 以更易于阅读的方式呈现它。

如果人们不太可能查看大多数页面，选项 (B) 效果很好。

**坏的**

选项 (A) 您可以加载比需要更多的数据，从而使初始页面加载速度变慢（但只有一些，因为那里已经存在开销，具体取决于结果列表的大小。）

选项 (B) 如果人们查看许多页面，您可能会通过网络进行更多调用以加载数据，如果加载任何给定数据集的时间很长，这可能是一种缓慢的体验。

我希望这会有所帮助！

# java - java无法解析导入

> ID：11828696
> 
> 赞同：1
> 
> 时间：2012-08-06T12:53:40.110
> 
> 标签：java, import

前段时间，我为我的编程主题做了一个 java 项目，在 Eclipse 中开发。我对其进行了多次测试，并且完美无缺。但是在考试的电脑上没有，我尝试编译它并返回16个错误。现在回到我的电脑，我删除了 .class 文件并再次手动编译，返回相同的 16 个错误。我打开 eclipse 尝试像第一次一样从 eclipse 中编译它，现在显示这些错误，我没有更改代码中的任何内容......

所述错误都是相同的，缺少符号。尝试编译包中 6 个类中的一个（“Contacto”类）时会产生错误。这个类使用了其他 5 个类中的 4 个，并且在那里产生了错误。使用这 4 个类之一的每一行都有一个错误。Eclipse 指出了同样的错误并提供了快速修复，导入了丢失的类，但如果我没记错的话，您不需要导入与正在使用的类位于同一包中的类。无论如何，我尝试导入建议的类，但它在 eclipse 中产生了另一个错误（无法解析导入的“包名”），所以我不知道还能尝试什么......

项目设置对我来说似乎很好（它甚至工作过一次......）

代码很简单，但也很长，所以我会尽可能少地发布。

```
package fp2.poo.pfpooferdomdel1;

import fp2.poo.utilidades.ContactoInterfaz;
import fp2.poo.utilidades.CorreoElectronicoInterfaz;
import fp2.poo.utilidades.DomicilioInterfaz;
import fp2.poo.utilidades.PersonaInterfaz;
import fp2.poo.utilidades.TelefonoInterfaz;
import fp2.poo.pfpooferdomdel1.CorreoElectronico;  //Tried to import the missing class here, returned error: The import fp2.poo.pfpooferdomdel1.CorreoElectronico cannot be resolved

public class Contacto implements ContactoInterfaz
    {
    CorreoElectronico correo = new CorreoElectronico();  //Error here, missing "CorreoElectronico"
    Domicilio domicilio = new Domicilio();
    Persona persona = new Persona();
    Telefono telefono = new Telefono(); 
```

以下 3 行同样的错误，缺少 Domicilio、Persona 和 Telefono 的符号。

控制台返回的错误之一

```
`javac -Xlint -encoding ISO-8859-1 -classpath ./bin  -cp ./bin -d ./bin  ./src/fp2/poo/pfpooferdomdel1/Contacto.java
.\src\fp2\poo\pfpooferdomdel1\Contacto.java:8: error: cannot find symbol
import fp2.poo.pfpooferdomdel1.CorreoElectronico;;
                              ^
  symbol:   class CorreoElectronico
  location: package fp2.poo.pfpooferdomdel1
.\src\fp2\poo\pfpooferdomdel1\Contacto.java:19: error: cannot find symbol
        CorreoElectronico correo = new CorreoElectronico();
        ^` 
```

Contacto.java 的 Makefile（由老师提供）

```
 JAVAC=javac
     JAVA=java
     lsJAR=jar
     OPCIONES= -Xlint -encoding ISO-8859-1 -classpath ./bin  -cp ./bin -d ./bin 
    ./bin/fp2/poo/pfpooferdomdel1/Contacto.class: \
                   ./bin/fp2/poo/utilidades/TelefonoInterfaz.class \
                   ./bin/fp2/poo/utilidades/PersonaInterfaz.class \
                  ./bin/fp2/poo/utilidades/DomicilioInterfaz.class \
                   ./bin/fp2/poo/utilidades/CorreoElectronicoInterfaz.class \
                   ./bin/fp2/poo/utilidades/ContactoInterfaz.class \
                   ./src/fp2/poo/pfpooferdomdel1/Contacto.java
$(JAVAC) $(OPCIONES) ./src/fp2/poo/pfpooferdomdel1/Contacto.java 
```

这个特定的代码文件位于 ./src/fp2/poo/pfpooferdomdel1/ 我认为与包名称一致。

项目设置

```
./src/fp2/poo>$ ls
datos  pfpooferdomdel1  principal  utilidades
./src/fp2/poo/pfpooferdomdel1>$ ls
Agenda.java  Contacto.java  CorreoElectronico.java  Domicilio.java  Persona.java  Telefono.java
./src/fp2/poo/principal>$ ls
Principal.java 
```

还有更多文件夹和文件，但我认为它们不相关。

如果还有其他需要，请随时提出。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:59:09.383

似乎缺少 CorreoElectronico.java 文件。它应该在 ./src/fp2/poo/pfpooferdomdel1 目录中。

# c# - Entity Framework Code First 与现有实体的多对多关系

> ID：11828712
> 
> 赞同：1
> 
> 时间：2012-08-06T12:54:46.913
> 
> 标签：c#, entity-framework, ef-code-first, many-to-many

我有以下情况：

```
modelBuilder.Entity<RecurringAppointment>()
    .HasMany(ra => ra.StaffMembers)
    .WithMany(); 
```

所以一个工作人员（从用户继承）可以有很多重复的约会，反之亦然。现在，当我尝试像这样将工作人员添加到 recurringAppointment.StaffMembers 时......

```
[Invoke]
public void ApplyStaffMembersToRecurringAppointment(int recurringAppointmentId, int[] staffMemberIds)
{
    var staffs = DbContext.Users
        .OfType<Staff>()
        .Where(s => staffMemberIds.Contains(s.Id))
        .ToList();

    var recurringAppointment = DbContext.RecurringAppointments
        .Include("StaffMembers")
        .Single(ra => ra.Id == recurringAppointmentId);

    foreach (var staff in staffs)
    {
        recurringAppointment.StaffMembers.Add(staff);
        DbContext.Users.Attach(staff);
    }

    DbContext.RecurringAppointments.Attach(recurringAppointment);
    DbContext.Entry(recurringAppointment).State = EntityState.Modified;
    DbContext.SaveChanges();
} 
```

...它只是不会保存更改。当我手动向数据库添加值时，它可以完美运行，因此应该正确设置关系。

我查看了大量类似的条目，但它们要么没有保存，要么没有附加。代码被执行（我可以调试）。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:31:35.417

您的员工对象是否有一个导航集合引用您的定期约会？当我在 ReccuringAppointments 和 StaffMembers 上都有导航集合时，上面的代码没有保存更改。

如果您只有 ReccuringApppointmets 上的导航集合，但它确实有效 - 除非我`AutoDetectChangesEnabled = false`在我的配置中进行了设置。

如果这些情况都没有发生，那么代码可以完美运行 - 如果这些情况对您来说不正确，您可以发布您的上下文/实体以获取更多信息吗？

# java - 字节数组到向量字符串

> ID：11828713
> 
> 赞同：0
> 
> 时间：2012-08-06T12:54:50.210
> 
> 标签：java, android, vector, bytearray

我正在编写一个客户端服务器应用程序，其中服务器通过客户端发送一个`Vector String`对象，`OutputStream`我将其接收为`Byte Array`. 现在我如何从中取回`Vector String`对象`Byte array`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:00:32.790

不要通过流发送对象。在服务器端序列化 Vector<String> 对象并在设备上反序列化它。您可以使用例如 JSON 序列化对象。谷歌有一个很棒的免费库可以为你完成大部分工作，它叫做 GSON (http://code.google.com/p/google-gson/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:09:33.847

您需要以正确的方式发送，使用可序列化或先写入长度

# sql-server - 如何拒绝用户对除一个表之外的所有表的写入权限

> ID：11828716
> 
> 赞同：1
> 
> 时间：2012-08-06T12:54:55.057
> 
> 标签：sql-server

我们有大约 50 个表，我们需要拒绝对每个表的写入权限，但特定用户的一个表除外。

我们应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:04:59.217

这是一种使用动态 SQL 的方法。由于 Management Studio 中的输出限制，打印可能不会向您显示整个命令。您需要更新用户名和异常。

```
DECLARE @sql NVARCHAR(MAX);
SET @sql = N'';

SELECT @sql = @sql + '
    DENY UPDATE, DELETE, INSERT ON ' + 
    QUOTENAME(SCHEMA_NAME([schema_id])) + '.'
    + QUOTENAME(name) + ' TO [username];' -- fix this username
FROM sys.tables
WHERE name <> 'exception'; -- fix this to be the one you want to allow

PRINT @sql;
-- EXEC sp_executesql @sql; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-10T03:03:02.123

在 SQL Server Management Studio 中：

转到用户的属性页面，然后转到用户映射选项卡。

为适当的数据库勾选 public 和 db_datareader（不要勾选 db_denydatawriter）。

这只会授予他们读取权限。

然后，您可以使用类似于以下的查询授予用户对表的插入和更新：

```
GRANT INSERT ON OBJECT::dbo.MyTable TO Fred
GRANT UPDATE ON OBJECT::dbo.MyTable TO Fred 
```

# solr - 添加了我自己的参数的文件上传到 solr

> ID：11828718
> 
> 赞同：0
> 
> 时间：2012-08-06T12:55:05.067
> 
> 标签：solr, solr-cell

我想上传一个文件（一些 ms word 文档）例如到 solr，但我想在这个上传中添加我自己的字段，比如上传它的人的 userId 或一些标签。文件的内容必须经过解析和搜索，并且应将 exta 参数添加为字段。因此，我在 schema.xml 中添加了以下定义

```
<?xml version="1.0" encoding="UTF-8" ?>
<schema name="example" version="1.1">
  <types>
   <fieldType name="string" class="solr.StrField" sortMissingLast="true" omitNorms="true"/>
   <fieldType name="date" class="solr.TrieDateField" precisionStep="0" positionIncrementGap="0"/>
    <!-- A general text field that has reasonable, generic
         cross-language defaults: it tokenizes with StandardTokenizer,
     removes stop words from case-insensitive "stopwords.txt"
     (empty by default), and down cases.  At query time only, it
     also applies synonyms. -->
    <fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
        <!-- in this example, we will only use synonyms at query time
        <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
        -->
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
    </fieldType>
 </types>

 <fields>
    <field name="documentId" type="string" indexed="true" stored="true" multiValued="false" required="true"/>
<field name="text" type="string" indexed="true" stored="false" multiValued="true"/>
<dynamicField name="metadata_*" type="text_general" indexed="true" stored="true" multiValued="true"/>
 </fields>

 <uniqueKey>documentId</uniqueKey>
 <defaultSearchField>text</defaultSearchField>
 <solrQueryParser defaultOperator="AND"/>

</schema> 
```

我的 solrconfig.xml 的相关部分现在看起来像这样：

```
 <equestHandler name="/update/extract" 
                startup="lazy"
                class="solr.extraction.ExtractingRequestHandler">
 <lst name="defaults">
   <str name="fmap.content">text</str>
   <str name="lowernames">true</str>
   <str name="fmap.documentId">documentId</str>
   <!-- also tried with
   <str name="fmap.literal.documentId">documentId</str>
   and
   <str name="literal.documentId">documentId</str>
   -->
   <str name="uprefix">metadata_</str>

   <!-- capture link hrefs but ignore div attributes -->
   <str name="captureAttr">true</str>
   <str name="fmap.a">links</str>
   <str name="fmap.div">ignored_</str>
  </lst>
  </requestHandler> 
```

但是，无论我使用此命令尝试什么组合：

```
java -Durl=http://localhost:9090/solr/update/extract?documentId=test -jar post.jar somedoc.pdf 
```

或者

```
java -Durl=http://localhost:9090/solr/update/extract?literal.documentId=test -jar post.jar somedoc.pdf 
```

我不断缺少 documentId 的必填字段

问候罗纳德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:19:33.737

您有 0 个文档的原因可能是您没有指定 documentId（或任何其他*必填*字段），并且索引失败（查找日志）。

你必须只是休闲的例子：[http ://wiki.apache.org/solr/ExtractingRequestHandler#Getting_Started_with_the_Solr_Example](http://wiki.apache.org/solr/ExtractingRequestHandler#Getting_Started_with_the_Solr_Example)

要将任何字段添加到使用 Tika 索引的文档中，您必须使用*文字*参数。在您的情况下，它可能是：

```
&literal.userId=123&literal.documentId=doc1 
```

如果您还有其他问题，请询问（添加可能添加更多详细信息：您的命令是什么样的，日志中的错误）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T19:56:30.490

我有同样的问题，问题是我的字段“documentId”的名称。当字段名称以“Id”（大写 I）结尾时，检查必填字段时出现问题

请参阅另一个帮助我弄清楚的问题：[Solr - Missing Required Field](https://stackoverflow.com/questions/12821782/solr-missing-required-field)

我将字段名称更改为“id”，现在一切都很好。这真的没有意义，可能已经让一些人完全发疯了

# asp.net - IDataReader 序列化错误

> ID：11828725
> 
> 赞同：1
> 
> 时间：2012-08-06T12:55:22.437
> 
> 标签：asp.net, serialization, idatareader

我有一个 ASP.NET 页面，其中包含一个`Gridview`.

我正在尝试将`IDataReader`对象绑定到网格。这个`IDataReader`对象是通过调用更多的代码层（实际上是形成控制器层和数据库层的其他 .ent 项目 dll）来分配的，然后最终绑定到我的网格。

在`gridview1.Datasource = dr`（博士是我的 IDataReader），我没有看到任何问题。

但是在 gridview1.Databind 行我得到一个异常，异常对象中的详细信息如下：

> > {“在程序集 'System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 中键入 'System.Data.Common.DbEnumerator' 未标记为可序列化。”}

我不确定应用程序中出了什么问题。有什么想法或意见吗？

## 编辑 1

添加堆栈跟踪异常：

```
服务器堆栈跟踪：
   在 System.Runtime.Serialization.FormatterServices.InternalGetSerializableMembers（RuntimeType 类型）
   在 System.Runtime.Serialization.FormatterServices.GetSerializableMembers（类型类型，StreamingContext 上下文）
   在 System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.InitMemberInfo()
   在 System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.InitSerialize（对象 obj，ISurrogateSelector surrogateSelector，StreamingContext 上下文，SerObjectInfoInit serObjectInfoInit，IFormatterConverter 转换器，ObjectWriter objectWriter）
   在 System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.Serialize（对象 obj，ISurrogateSelector surrogateSelector，StreamingContext 上下文，SerObjectInfoInit serObjectInfoInit，IFormatterConverter 转换器，ObjectWriter objectWriter）
   在 System.Runtime.Serialization.Formatters.Binary.ObjectWriter.Serialize（对象图，Header[] inHeaders，__BinaryWriter serWriter，布尔 fCheck）
   在 System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Serialize（流序列化流，对象图，标头 [] 标头，布尔 fCheck）
   在 System.Runtime.Remoting.Channels.CoreChannel.SerializeBinaryMessage（IMessage 消息，流输出流，布尔包含版本）
   在 System.Runtime.Remoting.Channels.BinaryServerFormatterSink.SerializeResponse（IServerResponseChannelSinkStack sinkStack，IMessage 消息，ITransportHeaders& 标头，Stream& 流）
   在 System.Runtime.Remoting.Channels.BinaryServerFormatterSink.ProcessMessage（IServerChannelSinkStack sinkStack，IMessage requestMsg，ITransportHeaders requestHeaders，流 requestStream，IMessage& responseMsg，ITransportHeaders& responseHeaders，Stream& responseStream）

在 [0] 处重新抛出异常：
   在 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage（IMessage reqMsg，IMessage retMsg）
   在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke（MessageData& msgData，Int32 类型）
   在 System.Collections.IEnumerable.GetEnumerator()
   在 System.Collections.IEnumerable.GetEnumerator()
   在 System.Web.UI.WebControls.GridView.CreateChildControls（IEnumerable 数据源，布尔数据绑定）
   在 System.Web.UI.WebControls.CompositeDataBoundControl.PerformDataBinding（IEnumerable 数据）
   在 System.Web.UI.WebControls.GridView.PerformDataBinding（IEnumerable 数据）
   在 System.Web.UI.WebControls.DataBoundControl.OnDataSourceViewSelectCallback（IEnumerable 数据）
   在 System.Web.UI.DataSourceView.Select（DataSourceSelectArguments 参数，DataSourceViewSelectCallback 回调）
   在 System.Web.UI.WebControls.DataBoundControl.PerformSelect()
   在 System.Web.UI.WebControls.BaseDataBoundControl.DataBind()
   在 System.Web.UI.WebControls.GridView.DataBind()
   在 Drive.CampaignManager.CreateQuery.GridViewBind()
   在 Mycode.aspx.cs

```

从上面的堆栈跟踪中无法理解太多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T12:58:34.990

查看异常的堆栈跟踪。它会告诉你什么代码试图序列化`DbEnumerator`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:43:39.147

从阅读您发布的堆栈跟踪来看，您的层之间似乎有一些远程处理 - 此代码是否跨多台机器运行？DataReaders（SqlDataReader、EntityDataReader 等）等不可序列化的类（如果您在美国，则为可序列*化*的 :-)）不能跨远程边界传递。

您需要一种不同的设计来完成这项工作，一种在代码层之间传递可序列化对象的设计。传递 DataSet 可能是让你的 UI 代码工作的最低摩擦方法，因为你可以替换

```
gridview1.Datasource = dr 
```

和

```
gridview1.DataSource = ds 
```

# java - Android 上的 Restlet 是否可移植到 Java SE/EE？

> ID：11828730
> 
> 赞同：0
> 
> 时间：2012-08-06T12:55:36.287
> 
> 标签：java, rest, jersey, restlet

我已经使用 Jersey 来创建休息请求，但目前它不适用于 android。所以我正在考虑像 Restlet 这样的替代方案。

据我了解，Restlet 需要一个版本才能使其在 android 上运行，我正在考虑在其他 java 平台上的兼容性，因为我正在创建一个应该在每个 java 平台上都可用的库。

如果它不是可移植的，替代方法可能是创建我的库的更多版本，如 android-edition 或 java-se-edition，另一种可能性是我自己实现它，忘记每个库，这可能会损害可移植性。

你会在 Java-Rest-Library 上提供什么解决方案，它应该适用于每个 Java 平台，甚至在 Android 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T17:37:57.280

Restlet 框架正是考虑到这个目标，促进您的客户端和服务器端 HTTP 应用程序在所有 Java 相关平台上的可移植性。我们确实支持跨 Android、Java SE、Java EE、GAE、OSGi 和 GWT 的一致 Restlet API。

请在此处查看 Restlet 的每个“版本”的 Javadocs：

[http://www.restlet.org/documentation/2.1/](http://www.restlet.org/documentation/2.1/)

# sql-server - SQL Server 查找正在运行过程的作业

> ID：11828733
> 
> 赞同：42
> 
> 时间：2012-08-06T12:55:58.033
> 
> 标签：sql-server, tsql, sql-server-2008-r2

有没有办法找出哪些作业正在使用某个存储过程？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-08-06T13:01:15.300

这将捕获在作业步骤中明确引用该过程的实例：

```
SELECT j.name 
  FROM msdb.dbo.sysjobs AS j
  WHERE EXISTS 
  (
    SELECT 1 FROM msdb.dbo.sysjobsteps AS s
      WHERE s.job_id = j.job_id
      AND s.command LIKE '%procedurename%'
  ); 
```

如果它被从作业中调用的其他东西调用，或者命令是用动态 SQL 构造的，这可能会更难追踪。另请注意，如果您的过程名称也可以自然地出现在其他代码、注释等中，则可能会产生误报。

# android - Android 软键盘不会在 2.2/2.3 中显示，但在 3.0+ 中会显示

> ID：11828739
> 
> 赞同：7
> 
> 时间：2012-08-06T12:56:07.827
> 
> 标签：android, android-edittext, actionbarsherlock, android-softkeyboard

我的应用适用于 Android 2.2 及更高版本。在其中，我使用[ActionbarSherlock](http://actionbarsherlock.com/)来允许对 3.0 之前的设备使用操作栏。我在操作栏中使用了 EditText 来允许用户输入文本以进行搜索。

Using the emulator, with Android 4.0 and 4.1 (I have not tried 3.x because it's not a tablet app), when the EditText is selected, the soft keyboard pops up as desired. 但使用 Android 2.2 或 2.3.3 时并非如此，它只是不显示。

EditText 的代码很简单：

```
item.setActionView(R.layout.collapsible_edittext);
etInput = (EditText) item.getActionView().findViewById(R.id.etInput);   
etInput.requestFocus(); 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<EditText xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/etInput"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="@string/search_hint"
    android:lines="1" 
    android:maxLines="1"
    android:inputType="textFilter|textNoSuggestions"
    android:imeOptions="actionSend"/> 
```

现在，我尝试在 之后立即使用此代码段专门显示软键盘`etInput.requestFocus();`，但没有任何区别：

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.showSoftInput(etInput, InputMethodManager.SHOW_IMPLICIT); 
```

我试图弄清楚这是 ActionbarSherlock 的问题还是更普遍的 Android 问题。我已经浏览了许多关于在 Activity 中强制软键盘显示的文章，但还没有找到解决方案。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T22:28:39.160

我遇到了同样的问题……在我在 HTC Nexus One 上进行测试之前，一切正常。我最终将以下代码添加到附加到 AiontBarSherlock menuItem 的 onActionExpandListener 中。

```
item.setOnActionExpandListener(new OnActionExpandListener() {

    @Override
    public boolean onMenuItemActionExpand(MenuItem item) {
    // post delayed to allow time for edittext to become visible
    mHandler.postDelayed(new Runnable() {
        @Override
        public void run() {
        mSearchText.clearFocus();
        showKeyboard();         
        mSearchText.requestFocus();
        }
    }, 400);

    return true;
    }

    @Override
    public boolean onMenuItemActionCollapse(MenuItem item) {
    hideKeyboard();
    return true;
    }
});

private void showKeyboard() {
 if (android.os.Build.VERSION.SDK_INT < 11) {
    mInputManager.toggleSoftInput(InputMethodManager.SHOW_FORCED, InputMethodManager.HIDE_IMPLICIT_ONLY);
 } else {
    mInputManager.showSoftInput(mSearchText, InputMethodManager.SHOW_IMPLICIT);
 }
}

private void hideKeyboard() {
 if (android.os.Build.VERSION.SDK_INT < 11) {
   mInputManager.hideSoftInputFromWindow(getActivity().getWindow().getCurrentFocus().getWindowToken(),0);      
 } else {
    mInputManager.hideSoftInputFromWindow(getActivity().getCurrentFocus().getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);
 }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:28:02.757

对于那些在 Mono droid 上使用 C sharp 工作的人，代码如下：

```
 new Thread(new ThreadStart(() =>
         {
             while (DateTime.Now < _dt)
                 Thread.Sleep(10);
             RunOnUiThread(showKeyboard);
         }
           )).Start();

     protected void showKeyboard()
     {
         int osSDK = (int)Android.OS.Build.VERSION.SdkInt;

         if (osSDK < 11)
         {
             this.mm().ToggleSoftInput(ShowFlags.Forced, HideSoftInputFlags.ImplicitOnly);
         }
         else
         { 
            EditText editTextView = FindViewById<EditText>(Resource.Id.EditTextSubCellAddVenue);
            this.mm().ShowSoftInput(editTextView, ShowFlags.Implicit);
         }
     }

     protected void hideKeyboard()
     {
         int osSDK = (int)Android.OS.Build.VERSION.SdkInt;

         if (osSDK < 11)
         {
             this.mm().HideSoftInputFromWindow(this.Window.CurrentFocus.WindowToken, 0);
         }
         else
         {
             this.mm().HideSoftInputFromWindow(this.CurrentFocus.WindowToken, HideSoftInputFlags.NotAlways);
         }
     }

     protected InputMethodManager mm()
     {
         if (imm == null)
         {
             EditText editTextView = FindViewById<EditText>(Resource.Id.EditTextSubCellAddVenue);

             imm = (InputMethodManager)this.GetSystemService(Android.Content.Context.InputMethodService);
         }

         return imm;
     } 
```

# doctrine-orm - PHPUnit 的奇怪 Doctrine 2 行为

> ID：11828740
> 
> 赞同：1
> 
> 时间：2012-08-06T12:56:09.580
> 
> 标签：doctrine-orm, phpunit

我正在尝试使用 Doctrine 2 ORM 设置我的 PHPUnit 测试。但是，我遇到了一些奇怪的问题，我只能假设是某种缓存（在 Doctrine 结束时），我无法弄清楚如何克服。这就是我所拥有的：

设置功能：

```
public function setUp() 
{
    $front = Zend_Controller_Front::getInstance();
    $bootstrap = $front->getParam("bootstrap");

    if(!$boostrap) {
        $application = Zend_Registry::get("application");
        $bootstrap = $application->getBootstrap();
    }
    $bootstrap->bootstrap('doctrine');

    $this->em   = $bootstrap->getResource('doctrine');
    $tool       = new \Doctrine\ORM\Tools\SchemaTool($this->em);
    $classes    = $this->em->getMetaDataFactory()->getAllMetaData();

    $tool->dropSchema($classes);
    $tool->createSchema($classes);

    parent::setUp();
} 
```

这基本上旨在为每个测试重置教义实例。我还没有 tearDown() 函数，因为目前，它负责重置模式，如图所示。我应该在这里提到我正在使用 SQLite。

我正在尝试运行的一个类中有两个测试，没有依赖关系。第一个测试插入如下记录：

```
$value = 5;
$model = new Model();
$model->setUserId($rater->getId());
$model->setValue($value);

$this->em->persist($model);
$this->em->flush(); 
```

到现在为止还挺好。我在数据库中有一条值为 5 的新记录。

进入下一个测试。这次我想跑：

```
$value = 3;
$model = new Model();
$model->setUserId($rater->getId());
$model->setValue($value);

$this->em->persist($model);
$this->em->flush(); 
```

Dumping all records from the relevant table gives me one result; a record with a value of 5 again. In other words, the second test is taking the $value from the first test. I've double checked by dumping all records at the start of the second test and this returns nothing. It seems there are some caching issues in Doctrine somewhere that I'm not aware of.

I've tried clearing various caches that I'm aware Doctrine can potentially make sure of, such as:

```
$cacheDriver = new \Doctrine\Common\Cache\XcacheCache();
$cacheDriver->deleteAll(); 
```

Can anybody suggest anything else I can try? Or is there some errant code somewhere in the way I have implemented Doctrine.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:08:19.567

So I'm not entirely sure where or what the issue was, but it seems that Doctrine must have been caching somewhere down the line. After all, I ensured that my object had the correct value post-persist but pre-flush. Post-flush it suddenly had a different value than expected.

Anyhow, to fix the issue I added the following line:

```
$this->em->clear(); 
```

just after getting the doctrine resource from my Bootstrap. This ensures that all managed entities are completely cleared from the Entity Manager before dropping and re-creating the schema.

# sql - IBM Infosphere Data Architect：如何调试 SQL 查询执行

> ID：11828741
> 
> 赞同：2
> 
> 时间：2012-08-06T12:56:10.493
> 
> 标签：sql, db2

我在 IBM DB2 9.7 的 Infosphere Data Architect 中编写/运行相当复杂的 SQL 查询。是否有可能以某种方式调试执行？逐行打印调试信息就足够了，或者使用断点。

我在找到这个时遇到了问题......

# django - 如何在 sys.path 中手动添加我的 production_settings 以运行 syncdb？

> ID：11828746
> 
> 赞同：0
> 
> 时间：2012-08-06T12:56:38.377
> 
> 标签：django

在生产服务器上，我想同步数据库。

如果我只是那样做

`django-admin.py syncdb`它会选择settings.py。但我有一个额外的 settings-production.py 继承自设置。

因此我想出了这个：

```
django-admin.py syncdb --settings=/path/to/settings_production 
```

> ImportError：无法导入设置“/path/to/settings_production”（是否在 sys.path 上？）：不支持按文件名导入。

我用谷歌搜索，发现有人在[这里](https://stackoverflow.com/questions/9353092/could-not-import-settings-myproject-settings-is-it-on-sys-path-no-module-n)遇到了类似的问题。然而让我感到困惑的是，WSGI.py 只能由 Apache 读取。如果我自己运行命令，则不会。那里的答案对我来说真的没有意义。

如何在 sys.path 中手动添加我的 production_settings 以运行 syncdb？非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:11:27.423

*首先确保`settings_production.py`与`settings.py`.*

由于您是从设置继承的，因此您可以在底部添加`settings.py`：

```
try:
   from settings_production import *
except ImportError:
   pass 
```

如果您只想*使用*确保它具有您的应用`settings_production.py`程序（数据库等）的所有设置，那么：

`DJANGO_SETTINGS_MODULE=settings_production python manage.py syncdb`

***编辑***

*我打算将它作为评论发布，但它变得太长了：*

我这样做是因为通常在生产中只更改可以在 master 中导入的几个值`settings.py`；并使用变量的最后一个值（因此，如果您在 中设置生产数据库`settings_production.py`，则使用该设置）。

这种方式更容易，因为 django 默认会查找`settings.py`; 避免必须处理环境变量和导入路径，尤其是在您更改次要内容时。

这种方法有一些缺点；例如，我无法想象它非常便携，特别是如果您有多个环境（暂存/测试/生产/开发），那么您有多个`from _foo_ import *`语句，并且由于导入的顺序变得很重要，它可能会导致问题；如果您忘记并一直在附近`settings_*.py`徘徊-例如，测试环境也获得了开发文件，因为某些开发人员忘记将其从测试分支中删除。

对于更复杂的设置，更容易保留主文件的*完整副本；*`settings.py`然后指向`DJANGO_SETTINGS_MODULE`这些文件的python路径。这里需要注意的是，您必须确保`PYTHONPATH`进行了调整以包含您的设置位置。

有关更多想法，请参阅[SplitSettings wiki 条目](https://code.djangoproject.com/wiki/SplitSettings)。

# performance - Drupal 7 在“第一次加载”时太慢了

> ID：11828749
> 
> 赞同：7
> 
> 时间：2012-08-06T12:56:42.523
> 
> 标签：performance, apache, drupal, apache2

我希望有人可以帮助我解决这个 Drupal 7 问题。我注意到当我“第一次”输入网站地址时，加载时间很慢。开始加载文件和显示内容大约需要 20（平均）秒。就像它有一些延迟。但是，在那段时间之后，它非常快，一切都很好。页面加载后，我们可以快速刷新它们，不会有任何延迟。

我附上一张图片来查看 Chrome 的网络瀑布。

谢谢你们。

图片： http: [//i.stack.imgur.com/vuejk.png](http://i.stack.imgur.com/vuejk.png)（看看第二行）

[更新] 我正在使用 php-apc 但仍然有同样的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T13:58:08.583

这（很可能）是因为 Drupal Cron 任务每隔几个小时/天运行一次（取决于设置）。Drupal 然后执行所有排队的 cron 作业。这可能需要很长时间。

看看[这个 drupal.stackoverflow](https://drupal.stackexchange.com/questions/18326/how-can-i-stop-the-cron-tasks-from-being-triggered-by-site-visitors)页面。

e：此外，此调整可能会有所帮助，但我自己没有尝试过：http: [//drupal.org/node/1576686](http://drupal.org/node/1576686)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T16:37:56.100

在生产环境中关闭 Update Manager 模块。当 Cron 运行时，它会检查需要时间的更新。通过仅在开发站点（Dev、Staging 等）上启用此模块来节省时间。生产部门没有必要为此花时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-26T08:56:05.423

我知道这是一个老问题，但这是我的解决方案。这发生在没有产生太多流量的站点上，并且服务器上的站点应用程序池会在指定的时间段后自动关闭（我相信默认值为 20 分钟）。因此，在这段时间之后第一个访问网站的人将不得不等待应用程序池重新启动，这在 php 网站上可能需要一些时间。这也适用于玉米工作。核心玉米作业设置为每“n”分钟运行一次，但它只能在有人点击该站点时运行。因此，在设定的玉米时间间隔后第一个访问该站点的人将不得不等待玉米作业运行。因此，对于生产站点，您应该禁用核心玉米作业并手动运行它们或使用外部服务来运行玉米（传递玉米的外部 url）。**[正常运行时间机器人](https://uptimerobot.com/)**每 5-10 分钟访问您的站点，从而保持连接有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-02T20:31:21.120

看看你在你的网站的*头部*有什么。如果那里有很多 @import 语句，那么问题很可能在前端而不是后端。

Drupal 默认使用很多 .css 和 .js 文件。*只有在head*部分的所有 .css 和 .js 文件都下载完毕后，浏览器才能开始绘制您请求的页面。

@import 的问题在于您的浏览器一次只能下载一个 css 文件。与标签不同的情况。在这种情况下，可以并行下载 Css 文件，这意味着更快。

第二次访问网站时，css 和 js 文件是从浏览器缓存中加载的，这就解释了为什么页面加载速度更快。

**建议的解决方法：** 转到 admin/settings/performance 启用 css 和 js 聚合。

# android - 带有应用程序加载的 XML 解析

> ID：11828755
> 
> 赞同：0
> 
> 时间：2012-08-06T12:57:07.250
> 
> 标签：android, xml, optimization

我在android中编写简单的项目。我有大约 10 个活动，用户翻转它们。在主要活动中，我必须解析非常大的 XML 文件并将这些信息加载到某个数组中。但是如果用户关闭主要活动并返回到它，我的主要活动会再次解析大 XML 文件。我可以在用户打开活动时解析一次并保存在内存中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:32:36.863

在构造函数中创建一个解析 XML 的 Singleton，并使用 get 获取数据。

# python - redis：如果存在则设置 - 通过 python

> ID：11828757
> 
> 赞同：1
> 
> 时间：2012-08-06T12:57:11.473
> 
> 标签：python, redis, key-value-store

我有一个巨大的键列表和一个值（所有键都相同），应该写入一个 redis 实例。仅当具有此键的条目已存在时，才会发生这种情况。

有一个[MSETNX](http://redis.io/commands/msetnx)命令正在做相反的事情：当密钥不**存在**时输入条目。

[当然，我可以通过EXIST](http://redis.io/commands/exists)之前检查并根据结果设置它，但是我如何确保这个 atomic. 由于这个列表可能非常庞大，我如何基于管道来做到这一点？

我正在使用[redis-py](https://github.com/andymccurdy/redis-py/)作为包装器，并且服务器上没有可用的 Lua 脚本支持。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:55:15.077

这在没有 Lua 的情况下不太方便，但仍然可以使用 WATCH/MULTI/EXEC 命令完成。这个想法是将您的巨大键列表划分为 n 个项目的块（例如 n = 20），然后将以下函数应用于每个块：

```
def process_block( redis_client, block, value ):
    with redis_client.pipeline() as pipe:
        while True:
            try:
                pipe.watch( block )
                to_set = [ for x in block if pipe.exists(x) ]
                if to_set:
                    pipe.multi()
                    for x in to_set:
                        pipe.set( x, value )
                    pipe.execute()
                break
            except redis.WatchError:
                continue
            finally:
                pipe.reset() 
```

原子性由 WATCH/MULTI/EXEC 命令保证，您将流水线化 1 个 WATCH、1 个 MULTI、最多 n 个 SET 和 1 个 EXEC 命令。不过，您将支付 EXISTS 往返费用。为 n 选择正确的值是流水线因子和并发交互风险之间的权衡。它不应该设置得太高。

# .net - 在 C# 中以管理员权限启动 IISExpress

> ID：11828760
> 
> 赞同：1
> 
> 时间：2012-08-06T12:57:25.573
> 
> 标签：.net, iis-express, user-permissions

我需要检查 IISexpress 是否已经在系统中运行。如果没有，那么我需要以管理员权限启动 IISExpress。

为此，我使用以下代码

```
var processes = Process.GetProcessesByName(
                        settings.Default.IISExpressProcessName).ToList();
if (processes.Count != 0) return;
var pass = new SecureString();
foreach (char chr in settings.Default.Password)
{
    pass.AppendChar(chr);
}

var iisExpress = Environment.ExpandEnvironmentVariables(
                         settings.Default.IISExpressExecutableFilePath);
Process.Start(new ProcessStartInfo
{
    FileName = iisExpress,
    UseShellExecute = false,
    CreateNoWindow = true,
    Verb = "runas",
    //UserName =settings.Default.UserName,
    //Password = pass, 
    Arguments = settings.Default.IISExpressArguments
}); 
```

这里的问题是它不会在管理员模式下启动 IISExpress。

有人能帮我一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:35:39.980

只需将您的代码更改为

```
Process process = Process.Start(new ProcessStartInfo()
  {
  FileName = IIS_EXPRESS,
  Arguments = arguments.ToString(),
  RedirectStandardOutput = true,
  UseShellExecute = true,
  CreateNoWindow = true,
  Verb = "runas"
  }); 
```

这可以解决问题

# java - Java：在浏览器中显示一些 SQL 数据并进行交互的简单方法

> ID：11828762
> 
> 赞同：1
> 
> 时间：2012-08-06T12:57:30.733
> 
> 标签：java, web-services

我有一个 SQL 数据库正在运行。所有与它的 java 交互都很清楚。现在我想显示一些查询的结果（比如`SELECT * FROM example`），并让用户使用`DELETE FROM example`浏览器中的几个按钮进行查询（）。

什么是不太复杂的方法？我的脑子里嗡嗡作响，比如 JAX-WS、JSP、Servlets 等。最简单的方法似乎是 JSP，但我听说它已被弃用，在做这个简单的任务时，我还想学习一些对未来有用的东西 :)

你会推荐什么？另外，如果您能指出一个好的教程会很好，因为我找到的所有 Java web 服务教程都包括编写客户端，而不是在浏览器中使用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:06:28.667

假设您非常*信任*您的用户，最简单的方法是创建一个带有文本框的简单 HTML 页面，并让用户输入他/她心中的内容的查询。然后，您可以将用户输入的任何文本直接传递到数据库并丢弃结果。

如果你想在这个过程中学习一些新东西，你可以使用[Spring框架。](http://www.springsource.org/)这可能是一种矫枉过正，但考虑到应用程序的简单性（在你的情况下），这个练习可能是让你开始的好方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:10:32.050

有几种方法可以做你想做的事，我会列出几个：

**在服务器端。**

1.  使用像[jersey这样的 REST 框架](http://jersey.java.net/)
2.  使用小服务程序。

我推荐 REST，[在这里](http://www.vogella.com/articles/REST/article.html)你可以找到一个教程。

在客户端，您需要使用 javascript 来发送 ajax 请求。

我建议你看看[jquery](http://jquery.com/)，这是一个 javascript 框架，可以让你的生活更轻松。[这里](http://net.tutsplus.com/tutorials/javascript-ajax/15-resources-to-get-you-started-with-jquery-from-scratch/)有一些很好的学习资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T16:33:05.057

如果有人感兴趣，我最终使用了tapestry.apache.org，它带有一个很好的入门教程:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T17:10:55.680

或许你可以试试简单易行的[ZK 框架。](http://www.zkoss.org)您可以查看他们[精彩的现场演示](http://www.zkoss.org/demo/)，感受它是多么简单和容易。此外，他们有一个在线[沙盒](http://www.zkoss.org/zksandbox/)Web 应用程序，您可以在其中尝试 zk 代码。

例如，以下代码将查询数据库并向用户显示结果。如果您填写了数据库访问部分的代码，请不要奇怪这样的代码将运行。

**索引.zul**

```
<?xml version="1.0" encoding="UTF-8"?>
<zk>
    <button label='Query database' onClick='QueryAndDisplay()'/>
    <grid id='gridQueryResult'>
        <columns/>
        <rows/>
    </grid>
    <zscript><![CDATA[
    import java.sql.*;
    void QueryAndDisplay ()
    {
        // clear displayed content
        org.zkoss.zul.Columns cols = gridQueryResult.getColumns();
        org.zkoss.zul.Rows rows = gridQueryResult.getRows ();

        // ...
        // query the database, get the result set
        //...
        ResultSetMetaData rsmd = rs.getMetaData();
        for (int i=1; i<rsmd.getColumnCount(); i++)
        {
            // display the columns
            org.zkoss.zul.Column col = new org.zkoss.zul.Column (rsmd.getColumnName(i));
            cols.appendChild (col);
        }
        while (rs.next())
        {
            for (int i=1; i<rsmd.getColumnCount(); i++)
            {
                org.zkoss.zul.Row row = new org.zkoss.zul.Row (rs.getString(i));
                rows.appendChild (row);
            }
        }

        // close database
        // ...
    }
    ]]></zscript>
</zk> 
```

# ios - 添加其他本地化时，IOS 字符串本地化停止工作

> ID：11828766
> 
> 赞同：0
> 
> 时间：2012-08-06T12:57:40.440
> 
> 标签：ios, xcode, ios5

我创建了一个新的 Xcode 项目并尝试设置字符串本地化。

我添加了一个名为“localization.strings”的新文件，其内容如下。

"登录" = "英文文本2";

我在最新版本的 Xcode 中的 Project > Info 部分添加了第二个本地化。

然后，我勾选右侧的框，为本地化.strings 文件添加法语。添加后，我可以运行/构建应用程序，但字符串不再链接到该文件。

例如，如果我将上面的原始英文版本更新为“testing text eng”，它仍然显示原始英文文本2。

知道为什么会发生这种情况吗？该应用程序太大而无法发布，并且没有构建错误，文件没有损坏、丢失、编码不正确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T13:12:40.963

您需要进行干净的构建并从模拟器和/或您的设备中删除应用程序，然后一切正常。您只需执行一次。

在添加任何本地化之前，您的字符串文件将最终位于应用程序包的根目录中，例如`MyApp.app/Localizable.strings`. 然后，当您运行应用程序时，这将被复制到模拟器和/或您的设备中。

添加本地化后，文件的内容将移动到特定于本地化的子目录中，例如`MyApp.app/en.lproj/Localization.strings`和`MyApp.app/fr.lproj/Localization.strings`。但是根包中的旧文件仍然在模拟器和您的设备上徘徊，并且比其他文件更早被发现。所以做一个干净的构建，从模拟器和你的设备中删除应用程序，旧文件将被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-20T11:09:42.783

这不是唯一可能发生的问题。我遇到了另一种情况：两个具有相同名称的文件：“Localizable.strings”。我在库文件夹中有一个，在主项目文件夹中有一个。本地化系统只使用其中之一，而不是同时使用两者。我通过删除不需要的问题解决了这个问题。

# machine-learning - WEKA 如何处理名义属性与数字属性？

> ID：11828768
> 
> 赞同：2
> 
> 时间：2012-08-06T12:57:42.693
> 
> 标签：machine-learning, data-mining, weka

如果我在数据集中的一列只有 3 个可能的值，即 0、1 和 2，那么如果我将它们声明为标称值与数字值，WEKA 对它们的处理方式有何不同？

另外，如果我有一列的属性有大量名义值，是否有一种简单的方法来声明这个具有非常高序值的名义属性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T04:10:39.780

粗略地说（这取决于实际的算法）：

当被视为*numeric*时，1 到 2 和 1 到 3 的差异大约会是原来的两倍。（假设没有其他属性）。

当被视为*字符串*时，它们可能同样不同，如 '1' != '2' 和 '1' != '3'。（但是，例如，结果可能取决于数字的频率；分类数据的常见差异度量涉及相对频率）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:21:44.660

如何处理数值和分类值取决于您使用的 Weka 中的实际机器学习算法。有些不能同时处理这两类属性，如果您选择了具有错误属性类型的算法，Weka 会告诉您。

一般来说，您应该将属性声明为它们的真实属性，即如果一个值是数字，即使只有几个不同的实际值，也要将其声明为数字。同样，如果属性是分类的，即使有许多不同的值，也要声明它。

关于你的最后一个问题，我不认为 Weka 区分类别值与少数和许多不同的实际值。它应该与其他所有内容相同。

# javascript - 如何在 iframe 播放、滑块旋转和选项卡处于非活动状态时停止 youtube 视频嵌入？

> ID：11828769
> 
> 赞同：3
> 
> 时间：2012-08-06T12:57:42.973
> 
> 标签：javascript, html

我正在尝试开发一个包含 ajax-tabs 的网页。在标签部分，我使用的是 galleryview 滑块。有 5 个选项卡；第一个标签包含一个图片库，下一个标签包含一个视频库，第三个和第四个包含文本，最后一个标签包含图片库。

我的问题是，当我从一个选项卡切换到另一个选项卡时，当前正在播放的 YouTube 视频不会停止播放。我尝试了 YouTube api，但它不起作用。

如果我将表单视频选项卡切换到图库/个人资料/广告选项卡，视频不会停止。请为我提供解决方案。感谢您的帮助。

这是我的代码

```
 <div class="tabs">
      <ul class="tabNavigation">
        <li><a class="selected" href="#first">Gallery</a></li>
        <li><a class="" href="#second">VIDEOS</a></li>
        <li><a class="" href="#third">PROFILE</a></li>
        <li><a class="" href="#fourth">FILMOGRAPHY</a></li>
        <li><a class="" href="#fifth">ADS &amp; EVENTS</a></li>
      </ul>

    <!--FIRST SECTION START-->

    <div style="display: block; padding:0px; width:478px;" id="first">

     <div id="gallery_wrap"> 
<div class="galleryview"> 
<div id="photos">

<div class="panel">
 <img src="Profile/big/slide-d01.jpg"  />
</div>
<div class="panel">
 <img src="Profile/big/slide-d02.jpg" />
</div>

<div class="panel">
<img src="Profile/big/slide-d03.jpg" />
</div>

 <div class="slider-bg">
 <ul class="filmstrip"> 
      <li><img src="Profile/thumb/sd1.jpg" alt="" /></li> 
      <li><img src="Profile/thumb/sd2.jpg" alt="" /></li> 
      <li><img src="Profile/thumb/sd3.jpg" alt="" /></li> 

</ul>
</div> 
</div><!--photos--> 
</div><!--galleryview--> 
 </div> <!--gallerywrap-->       
  </div><!--first-->
    <div class="clear"></div>
    <!--FIRST SECTION END-->

    <!--SECOND SECTION START-->

<div id="second"> 
<div id="gallery_wrap"> 
<div id="photos1" class="galleryview"> 

<div class="panel">
<iframe width="454" height="253" src="http://www.youtube.com/embed/rVv9y6J84q8?HD=1;rel=0;showinfo=0&enablejsapi=1&playerapiid=ytplayer" frameborder="0" type="application/x-shockwave-flash" allowfullscreen="true" allowScriptAccess="always" ></iframe>
</div>

    <div class="panel">
<iframe width="454" height="253" src="http://www.youtube.com/embed/BcwVZTWu9sU?HD=1;rel=0;showinfo=0;enablejsapi=1&playerapiid=ytplayer" frameborder="0" type="application/x-shockwave-flash" allowfullscreen="true" allowScriptAccess="always" ></iframe>
</div>

    <div class="panel">
<iframe  width="454" height="253" src="http://www.youtube.com/embed/DwjbC1z2yjw?HD=1;rel=0;showinfo=0;enablejsapi=1&playerapiid=ytplayer"
    type="application/x-shockwave-flash" allowfullscreen="true" allowScriptAccess="always"  frameborder="0" ></iframe>
</div>

<div class="slider-bg">
<ul class="filmstrip"> 
    <li><img src="Profile/thumb/gopichand.png" alt="" /></li> 
    <li><img src="Profile/thumb/manoj.png" alt="" /></li> 
    <li><img src="Profile/thumb/vikram.png" alt="" /></li> 

</ul>
</div>

</div><!--photos--> 
</div><!--gallerywrap-->  

    </div><!--second-->

    <!--SECOND SECTION END-->

    <!--THRID SECTION START-->

    <div style="display: none;" id="third">

    <p> 'Fresh Face title'.</p>
    <p>Born on February 14 1990 in Delhi, </p>
    <p>She made it to top 10 finalists and went on to become a model. </p>
    <p> opposite Vikram.</p>

    </div>

    <!--THRID SECTION END-->

    <!--FOURTH SECTION START-->

    <div style="display: none;" id="fourth">

    <p>film Vedam (2010).</p>
            <span><a href="" target="_blank">More>></a></span>

    </div>

    <!--FOURTH SECTION END-->

    <!--FIFTH SECTION START-->

    <div style="display: none;" id="fifth">
     <!--
   <p>It is a long established fact that a reader will be distracted by the readable </p> -->

    </div>

    <!--FIFTH SECTION END-->

</div>

<!-- profileright-sec End --></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:51:21.300

当您使用此代码单击下一个视频时

```
$('#videoid').get(0).stopVideo(); 
```

如果您将第一个视频转到第二`onclick`个视频标签中的第二个，请尝试这样

```
 $('#video1').get(0).stopVideo(); 
```

注意：它使用 Jquery

# sql - 合并多个 SELECT 语句

> ID：11828772
> 
> 赞同：16
> 
> 时间：2012-08-06T12:58:06.757
> 
> 标签：sql, postgresql, union

我使用 Excel`SELECT`从具有大量相同模式的数据库中的模式名称列表中生成大量语句：

```
select result from foo.table limit 1;
select result from bar.table limit 1;
select result from doo.table limit 1; 
```

( `foo`, `bar`&`doo`是我的模式的例子，实际上有数百个)。

每个`SELECT`将只返回一个结果。我只想要一列`result`与模式一样多的行。然后我可以根据模式名称将其复制回 Excel。

当我运行上面的查询时，我得到 1 行，其他行被丢弃：

```
丢弃 1 行的查询结果。

丢弃 1 行的查询结果。

总查询运行时间：40 毫秒。
检索到 1 行。

```

我试过使用`UNION ALL`，但`limit 1`我用来确保每个模式表只返回一行似乎阻止了它的工作。

我怎样才能防止其他行被丢弃，或者编写一个查询以更有效的方式返回我需要的值（两列 - schema_name，结果 - 每个模式一行）？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-06T17:35:25.360

将各个子语句括在括号中以使语法明确：

```
(SELECT result FROM tbl1 LIMIT 1)
UNION ALL
(SELECT result FROM tbl2 LIMIT 1) 
```

关于这个问题的[手册`UNION`](https://www.postgresql.org/docs/current/sql-select.html#SQL-UNION)非常清楚：

> `select_statement`是任何`SELECT`没有`ORDER BY`, `LIMIT`, `FOR UPDATE`, or`FOR SHARE`子句的语句。（`ORDER BY`并且`LIMIT`可以附加到子表达式，如果它被括在括号中。没有括号，这些子句将被应用于 的结果，而 `UNION`不是其右手输入表达式。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-06T13:07:49.367

包装在子查询中会绕过它，但它有点难看。

```
SELECT result FROM (select 'a'::text AS result from foo limit 1) a
UNION ALL
SELECT result FROM (select 'b'::text AS result from bar limit 1) b 
```

**更新**

***见欧文的回应。这个比较好。***

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-01-17T09:32:54.307

```
create view my_data1 
AS
with data as
(
    select student_id,sum(marks) as total_marks 
    from   marks_marks 
    group by 1
) , 
data1 as
(
    select id, name 
    from   students_class
), 
data2 as
(
    select applicant_name,
           id,
           class_name 
    from   students_students
)
select data2.applicant_name , 
       data1.name as class_name ,  
       data.total_marks 
from   data2 
join   data1  on data1.id = data2.class_name 
join   data   on data.student_id = data2.id

select * from my_data1 
```

# ruby-on-rails - ActiveRecord 查询 GROUP 和 COUNT 零值

> ID：11828773
> 
> 赞同：1
> 
> 时间：2012-08-06T12:58:23.900
> 
> 标签：ruby-on-rails, activerecord

我有一个考勤表，我正在尝试查询它以创建一个可以用来绘制图表的数据集。我的表存储出勤信息，如下所示：

```
date       | student_id | present | session |
-----------|------------|---------|---------|
2012-09-01 | 1          | 1       | AM      |
2012-09-01 | 1          | 1       | PM      |
2012-09-01 | 2          | 0       | AM      |
2012-09-01 | 2          | 1       | PM      |
2012-09-02 | 1          | 0       | AM      |
2012-09-02 | 1          | 0       | PM      |
2012-09-02 | 2          | 0       | AM      |
2012-09-02 | 2          | 0       | PM      | 
```

我试图最终得到一个数据集，其中包含每个唯一日期以及当前标记的数量（最终除以二，以准确表示每天的出勤情况）。

```
2012-09-01 | 3 (1.5)
2012-09-02 | 0 (0) 
```

这是迄今为止我得到的最接近的

```
AttendanceMark.group(:date).count(:conditions => "present = 1") 
```

但是这个产生的哈希不包括根本没有存在标记的日期。我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:06:34.500

如果您分别使用 0 和 1 表示出席和缺席，则可以构造这样的查询

```
# For MySQL
AttendanceMark.group(:date).sum('CASE present WHEN TRUE THEN 1 ELSE 0 END')

# For SQLite
AttendanceMark.group(:date).sum('CASE WHEN present = "t" THEN 1 ELSE 0 END') 
```

这将返回

```
{ "2012-09-01" => 3, "2012-09-02" => 0 } 
```

您可以稍后将所有总和除以二。

# objective-c - Cocoa Zombies - 识别消息来源

> ID：11828776
> 
> 赞同：0
> 
> 时间：2012-08-06T12:58:40.063
> 
> 标签：objective-c, ios, cocoa, nszombie

我打开了“启用僵尸对象”，我得到以下信息：

```
2012-08-06 13:43:05.452 MyApp[234:707] *** -[MyViewController respondsToSelector:]: message sent to deallocated instance 0x97a6c50 
```

我想知道：有没有一种简单的方法可以找出哪个对象正在向 MyViewController 发送消息？MyViewController 是许多不同事物的代表，我想弄清楚是哪个事物发送消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T13:01:48.830

您可以在调试器中请求堆栈跟踪，以查看哪些函数调用了哪些其他函数。例如，使用 GDB，您可以看到如下内容：

```
(gdb) bt
0x01234567 in main()
0xabcdef12 in UIApplicationMain
0xdef01234 in - [AppDelegate application:didFinishLaunchingWithOptions:] 
```

等等

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T13:09:18.250

您可以使用 Instruments 启动您的应用程序，它将向您展示对象的完整生命周期。它在哪里被保留和释放，它在哪里变成了僵尸。只需启动 Instruments 并选择僵尸模板，然后就可以使用您的应用程序。之后，只需查看它生成的格式整齐的输出

# el - 列出 EL 表达式中的自由变量

> ID：11828778
> 
> 赞同：1
> 
> 时间：2012-08-06T12:58:53.883
> 
> 标签：el, spring-el, mvel, free-variable, juel

我有一个应用程序，其中包含一些用于编程配置的 EL 评估。给定一个 EL 表达式，我想在不实际评估它的情况下获得它包含的自由变量。目的是提供一个 UI，最终用户可以在按下“评估”按钮之前将值绑定到自由变量。

不幸`javax.el.ValueExpression`的是不提供这个功能，所以我可能需要使用特定于供应商的 API。它还处于开发的早期阶段，所以我还没有确定我的实现选择。我想到了 MVEL、JUEL 和 SpEL，但当然我选择的任何东西都应该具有我上面描述的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:04:50.887

这个怎么样...

```
 SpelExpression parseExpression = (SpelExpression) new SpelExpressionParser().parseExpression(expressionString);
    SpelNode node = parseExpression.getAST();
    List<String> vars = getVars(node);

...

private List<String> getVars(SpelNode node) {
    List<String> vars = new ArrayList<String>();
    for (int i = 0; i < node.getChildCount(); i++) {
        SpelNode child = node.getChild(i);
        if (child.getChildCount() > 0) {
            vars.addAll(getVars(child));
        }
        else {
            if (child instanceof VariableReference) {
                vars.add(child.toStringAST());
            }
        }
    }
    return vars;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:19:06.387

Gary 的回答很好，但是当表达式包含单个变量时，它对我不起作用，例如“#var”（一个没有子节点的节点）。一个小改动：

```
private Set<String> getVars(SpelNode node) {
    Set<String> vars = new HashSet<String>();
    if (node == null) {
        return vars;
    }

    if (node instanceof VariableReference) {
        // Remove the "#" to get the actual variable name
        vars.add(StringUtils.remove(node.toStringAST(), "#"));
    }

    for (int i = 0; i < node.getChildCount(); i++) {
        SpelNode child = node.getChild(i);
        vars.addAll(getVars(child));
    }

    return vars;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T22:03:52.360

MVEL 的 ParserContext 可以告诉你所有关于由本地和输入组织的变量。

```
ParserContext ctx = ParserContext.create();
MVEL.analysisCompile("a = 0; b = 0;", ctx);

HashMap<String, Class> vars = ctx.getVariables();

assert vars.containsKey("a") && Number.class.isAssignableFrom(vars.get("a"));
assert vars.containsKey("b") && Number.class.isAssignableFrom(vars.get("b")); 
```

# c# - 懒惰的 延迟加载错误：字段初始值设定项无法引用非静态字段、方法或属性

> ID：11828780
> 
> 赞同：14
> 
> 时间：2012-08-06T12:59:00.353
> 
> 标签：c#, .net, generics, lazy-loading

我第一次尝试使用延迟加载来初始化班级中的进度对象。但是，我收到以下错误：

> 字段初始值设定项不能引用非静态字段、方法或属性。

```
private Lazy<Progress> m_progress = new Lazy<Progress>(() =>
{
    long totalBytes = m_transferManager.TotalSize();
    return new Progress(totalBytes);
}); 
```

在 .NET 2.0 中，我可以执行以下操作，但我更愿意使用更新的方法：

```
private Progress m_progress;
private Progress Progress
{
    get
    {
        if (m_progress == null)
        {
            long totalBytes = m_transferManager.TotalSize();
            m_progress = new Progress(totalBytes);
        }
        return m_progress;
    }
} 
```

任何人都可以帮忙吗？

非常感谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-06T13:02:30.053

该初始化程序需要`this`传递给捕获类，并且`this`不能从字段初始化程序中获得。但是，它在构造函数*中可用：*

```
private readonly Lazy<Progress> m_progress;
public MyType()
{
    m_progress = new Lazy<Progress>(() =>
    {
        long totalBytes = m_transferManager.TotalSize();
        return new Progress(totalBytes);
    });
} 
```

就个人而言，我只是使用`get`访问器；p

# php - PHP 中的引用

> ID：11828789
> 
> 赞同：0
> 
> 时间：2012-08-06T12:59:31.430
> 
> 标签：php

我知道在函数参数之前使用 & 意味着它是通过引用传递的，并且可以用于输出，但是如果我在另一个上下文中使用它意味着什么？

例如：

```
function foo (&$param) {
    $param = 3;
}

foo (&$a);
echo $a; 
```

我在调用 foo 时添加了 & 只是为了看看会发生什么，它实际上似乎并没有改变任何东西，并且 $a 在此之前甚至没有定义。

谁能解释一下？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T13:03:53.600

[手册](http://php.net/manual/en/language.references.pass.php)说：

> 注意：函数调用上没有参考符号 - 仅在函数定义上。仅函数定义就足以通过引用正确传递参数。`&`从 PHP 5.3.0 开始，当您使用in时，您将收到一条警告说“调用时传递引用”已被弃用`foo(&$a);`。

除此之外，从 5.4.0 开始，您实际上会收到一个解析错误。在此之前它会起作用，但从 5.3 开始它会抱怨。由于有一些本机函数实际上*需要*调用时通过引用传递（例如[`debug_zval_dump()`](http://php.net/manual/en/function.debug-zval-dump.php)和下面的`call_user_func()`and `call_user_func_array()`），因此 5.4 的这个方面*严重*降低了.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T13:03:45.933

当您`&$param`在函数中使用时，这意味着您通过引用传递。但是你不应该在函数调用中使用它——在当前版本的 PHP 中，这会产生一个警告。函数调用现在只允许传递一个变量。函数声明必须表明函数是通过引用还是通过传递来接受参数。

根据文档传递它，`functionName($variableName);`而不是`functionName(&$variableName)`

使用`&$`参数调用的函数现在会生成一个警告，该警告可以被抑制，但仍然是一种贬低的调用方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:08:54.863

好吧，考虑下面的代码，这可能无法回答您的问题，但却是理解引用变量的一个很好的例子。

```
<?
$variable="this is some test";

$refvariable = &$variable;
$nvariable = $variable;
$variable ="This IS ANOTHER VARIABLE STRING";

echo "Referenced Variable=".$refvariable;
echo "<bR>Normal Variable=".$nvariable; 
```

?> 简单来说，上面的 $nvariable 是普通变量，当它回显时，它会采用最初设置的 $variable 的值。现在考虑 $refvariable ，它是引用变量，它采用 $variable 的最新值。希望上面的例子能帮助你理解。

# jquery - jquery .load 路径问题

> ID：11828790
> 
> 赞同：1
> 
> 时间：2012-08-06T12:59:33.237
> 
> 标签：jquery, path

在我的网站上，我使用 .load 从另一个页面中提取内容。它只在某些情况下有效。当站点 url 输入为[http://www.klossal.com/portfolio](http://www.klossal.com/portfolio) 时，.load 内容仅在以这种方式输入时有效：

```
.load('/space_fullscreen.html'); 
```

或者这样：.load('www.klossal.com/portfolio/space_fullscreen.html');

问题是有时人们会在[http://klossal.com/portfolio](http://klossal.com/portfolio)中输入一个网址，当他们这样做时，前两条路径不再起作用，我必须进去并将其更改为：

```
.load('http://klossal.com/portfolio/space_fullscreen.html'); 
```

有没有办法设置它，所以无论人们如何输入网址，它都能正常工作？

整个脚本是：

```
<script type="text/javascript">
$(function() {
$("#fullscreen_launch").click(function(){
$('#fullscreen').empty();
$("#fullscreen").animate({
top: '0px',
height:'100%',
}, 950, function() {
$('#fullscreen')
   .load('.../space_fullscreen.html');
});
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:25:53.140

这是因为您使用的是完整的 url `.load`，然后浏览器同源策略阻止了请求。对于浏览器“www.klossal.com”与“klossal.com”不同。

解决此问题的2种方法：

1）最简单和好的方法：只使用相对网址。调用`.load('space_fullscreen.html')`而不是`.load('http://www.klossal.com/portfolio/space_fullscreen.html')`，因此浏览器将向同源（带或不带 www）发出请求，并且同源策略不会阻止请求。

或者

2) 将您的应用程序配置为从“klossal.com”重定向到“www.klossal.com”。

# sql - SQL 日期交集

> ID：11828798
> 
> 赞同：1
> 
> 时间：2012-08-06T13:00:14.657
> 
> 标签：sql, sql-server-2008, tsql

我试图找出特定 ID 表中的任何日期是否重叠。这是我的桌子的一个例子

```
ID   |  EffDate    | ExpDate
---------------------------------
1    |  2000-01-01 | 2010-12-31
2    |  2000-01-01 | 2050-12-31
1    |  2011-01-01 | 2011-12-31
1    |  2011-12-31 | 2050-12-31 
```

在`TableA`我需要检查以确保没有一个 ID 与“他们自己”相交，因此没有一个 1 可以与其他任何一个相交，但 eff 和 exp 日期是否与 ID 2 相交并不重要。

不寻找一个完整的答案只是一个起点。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T13:10:08.300

这会发现您的两行之间的重叠`ID`等于 1：

```
declare @TabA table (ID int,EffDate datetime2,ExpDate datetime2)
insert into @TabA(ID,EffDate,ExpDate) values
(1,'20000101','20101231'),
(2,'20000101','20501231'),
(1,'20110101','20111231'),
(1,'20111231','20501231')

select
    * --TODO -Pick columns
from
    @TabA t1
        inner join
    @TabA t2
        on
            t1.ID = t2.ID and
            t1.EffDate <= t2.ExpDate and --Play with these
            t1.ExpDate >= t2.EffDate and --For Inclusive/Exclusive
            t1.EffDate < t2.EffDate 
```

结果：

```
ID          EffDate                ExpDate                ID          EffDate                ExpDate
----------- ---------------------- ---------------------- ----------- ---------------------- ----------------------
1           2011-01-01 00:00:00.00 2011-12-31 00:00:00.00 1           2011-12-31 00:00:00.00 2050-12-31 00:00:00.00 
```

您可以使用比较运算符来制作包含或排除边界值中的一个或`EffDate`两个`ExpDate`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:07:05.717

我认为可能有一个非常简单的解决方案：

```
 select  distinct ta2.*
    from    #TableA ta1 join #TableA ta2 on 
            (ta1.EffDate > ta2.EffDate and ta1.EffDate < ta2.ExpDate)
            or (ta1.ExpDate > ta2.EffDate and ta1.ExpDate < ta2.ExpDate) 
```

# jquery - 如何在 jquery ui 组合框上放置占位符？

> ID：11828799
> 
> 赞同：6
> 
> 时间：2012-08-06T13:00:20.307
> 
> 标签：jquery, jquery-ui

我查看[jquery ui 组合框](http://jqueryui.com/demos/autocomplete/#event-select)，但我找不到它。我在哪里可以在源代码中正确的占位符。

谢谢你

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-24T10:04:59.627

我为 JQueryUI v1.10.2 - 2013-04-17 制作了这段代码

HTML 代码：

```
<select class="combobox" placeholder="123">
 <option>...</option>
 ...
</select> 
```

JS代码：

```
$.widget( "ui.combobox", {
    _create: function() {
        this.wrapper = $( "<span>" )
            .addClass( "ui-combobox" )
            .insertAfter( this.element );

        this._createAutocomplete();
        this._createShowAllButton();
        this.input.attr("placeholder", this.element.attr('placeholder'));
    },
});

$(function() {
    $( ".combobox" ).combobox();
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T13:25:09.317

在您的输入中添加一个 ID 并在 javascript 中运行此代码

```
$("#yourID").attr("placeholder", "Your Text Here"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-11T18:38:54.657

```
<select id="test" name="test">
  <option value=""></option> <!-- clear default value-->
  <option value="1">text 1</option>
  <option value="2">text 2</option>
</select>

<script>
 $('#test').combobox();
 $('.ui-autocomplete-input').css('width','300px')
 $('.ui-autocomplete-input').attr('placeholder','Select a value')
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-04T10:39:27.723

您甚至可以根据 jquery ui 1.10.3 做一些更简单的事情：`var input = $("<input>")`在组合框文件中查找并添加属性占位符：

```
.attr("placeholder", select.attr("title")) 
```

并且只需在选择中使用标题属性:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T13:17:09.617

只需使用：

```
<input type="text" placeholder="your text"/> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T13:24:06.633

这是一个简单的占位符`input`。
您可以使用html5`placeholder`或尝试自己做。

`<input type="text" placeholder="Search...">`

唯一的问题是它`placeholder` **在 Internet Explorer 上不起作用**。
但是您可以轻松找到解决方法。

[**演示**](http://jsfiddle.net/ricardolohmann/q64xx/)：使用占位符
[**演示**](http://jsfiddle.net/ricardolohmann/q64xx/2/)：跨浏览器解决方法

# testing - 测试 USSD 应用程序

> ID：11828800
> 
> 赞同：1
> 
> 时间：2012-08-06T13:00:22.953
> 
> 标签：testing, ussd

目前在我的项目中开发的应用程序涉及 USSD 短代码并通过短代码与服务器交互。

此应用程序针对低端 Java 手机，因此目前不在范围内使用智能手机。

有什么方法可以使 USSD 应用程序自动化吗？这不一定需要在手机上，也可以在电脑上。

谢谢-湿婆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:27:51.380

Siva，由于您正在处理 java，您可以尝试 smslib（http://smslib.org/ - 通过连接到您的台式机的 GSM 调制解调器发送 sms/ussd 的 java 代码）。您可以设置 Jenkins，运行 maven 构建，调用 TestNG 测试，调用 smslib 代码，请求一些 ussd 并分析请求并断言构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-07T10:07:18.940

根据我对 USSD 的理解，您可以将应用程序放在 Web 服务器上，您用于 USSD 的 Telcom 或网关会将电话发送的请求传递给您，然后您根据请求发回响应，然后转发回客户端提出 USSD 请求。

# imagemagick - ImagMagick：如何使用一个转换命令向图像添加渐变拼接？

> ID：11828801
> 
> 赞同：1
> 
> 时间：2012-08-06T13:00:25.490
> 
> 标签：imagemagick, gradient, splice, imagemagick-convert

是否可以在图像底部添加渐变拼接？似乎渐变选项[需要](http://www.imagemagick.org/Usage/canvas/#gradient)-size，我无法提供，因为图像的大小可能会有所不同。

可以使用 convert 和 compose，但我只想使用一个命令。像这样的东西（请注意，目前这是无效的）：

```
convert -fill gradient:black-white -gravity south splice 0x20 image1.jpg image2.jpg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:44:00.790

1.  我对你的建议是使用`-append`而不是`-splice`.
2.  图像大小可能会有所不同，但您可以通过运行来识别宽度`identify -format %W image1.jpg`。

因此，实现您想要的一个可能的命令是：

```
convert                                                \
    input.jpg                                          \
   -size $(identify -format %W input.jpg)x20 gradient: \
   -append                                             \
    output.jpg 
```

* * *

**更新：**

上述命令适用于 Linux、Unix 或 Mac OS X，但不适用于 Windows。在 Windows 上，实现相同功能的最简单方法是使用以下两个命令：

```
for /f "usebackq delims= " %I in (`identify -format %W input.jpg`) do set width=%I
convert  input.jpg  -size %width%x20  gradient:  -append  output.jpg 
```

以上是在 cmd.exe 窗口中直接执行。如果将命令放入批处理文件中，则需要修改`%I`以使其`%%I`：

（对不起，我现在没有 Windows 系统来验证精确的语法......）

**Update2：** [Windows bat 替代 Bash 内联命令](https://stackoverflow.com/questions/11929493/windows-bat-alternative-for-bash-inline-command)

# .net - 我如何检查结果是否为分数

> ID：11828802
> 
> 赞同：4
> 
> 时间：2012-08-06T13:00:26.057
> 
> 标签：.net, vb.net

我如何检查两个数字的除法结果是否是Visual Basic中的分数

这是我需要做的：

```
 Dim x As Integer = 12
    Dim y As Integer = 5

    If TypeOf x/y Is fraction Then
        ( do something )
    End If 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T13:04:30.213

你能不能做两个数字的模，然后如果它不是零，它是一个分数？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T13:05:44.870

使用[Mod](http://msdn.microsoft.com/en-us/library/se0w9esz%28v=vs.80%29.aspx)，它将返回除法的其余部分。

```
Dim x As Integer = 12
Dim y As Integer = 5

If x Mod y > 0 Then
    MsgBox (x & " / " & y & " has a remainder, so it must be a fraction.")
End If 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T13:05:50.277

使用[`Mod`](http://msdn.microsoft.com/en-us/library/se0w9esz.aspx)运算符查看 x 是否干净地划分为 y：

```
If x Mod y > 0 Then
  ' There will be a fraction. do something
End If 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T13:04:52.470

```
If x Mod y = 0 ' Not a fraction
If x Mod y <> 0 ' Fraction 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-06T13:05:43.233

您可以使用“Mod”运算符并检查是否可以将其转换为整数...

Mod 运算符（Visual Basic）：http: [//msdn.microsoft.com/en-us/library/se0w9esz%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/se0w9esz%28v=vs.100%29.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-06T13:05:56.670

我假设“分数”是指“非整数”，因为从技术上讲，任何数字都可以表示为分数......

一种典型的方法是使用模运算符：

```
If  x MOD y <> 0 Then
  ' x/y is a fraction
End If 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-07T11:49:10.630

`Math.DivRem`如果您真的希望同时确定股息和余数，.N ​​ET 框架就有：

```
Dim x As Integer = 12
Dim y As Integer = 5
Dim r As Integer
Dim d As Integer = Math.DivRem(x, y, r)

If r <> 0 Then
    ( do something )
End If 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-23T21:18:17.910

这个解决方案要好得多，O(1) 常数

```
If x Mod 1 = 0 Then ' Integer
If x Mod 1 <> 0 Then ' Float 
```

# javascript - 数字转换为对象

> ID：11828814
> 
> 赞同：0
> 
> 时间：2012-08-06T13:00:57.760
> 
> 标签：javascript

我遇到了一些 javascripting 的问题，其中一些显然是数字的值突然变成了对象，我不知道如何或为什么。

代码片段：

```
addFigure("-1,1,-0.5_1,1,-0.5_0.5,-1,-0.5_-0.5,-1,-0.5");

function addFigure(t) {
        var fig = new figure();
        var v = t.split("_");

        var points = new Array();
        for (var i = 0; i < v.length; i++) {
            var coords = v[i].split(",");
            var x = parseFloat(coords[0]);
            var y = parseFloat(coords[1]);
            var z = parseFloat(coords[2]);
            alert(typeof x + " " +typeof y)
            var point = new Point3D(x, y, z);
            alert(typeof point.x + " " + typeof point.y)
           //both alerts print out "number number"
           fig.addPoint(point);
        }

        figures.push(fig);
    }

        function figure() {
        this.points = new Array();
        this.addPoint = function (x, y, z) {
            var v = new Point3D(x, y, z);
            alert(typeof x + " " + typeof y)
//this alert prints out "Object undefined"
            this.points.push(v)
        }

        this.getPoints = function () { return this.points }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:04:55.553

您在这里`addPoint`使用一个参数 (a `Point3D`) 调用您的函数：

```
fig.addPoint(point); 
```

但`addPoint`似乎期望这一点作为三个单独的参数：

```
this.addPoint = function (x, y, z) { 
```

所以你最终会`x`成为`Point3D`你传入的那个，`y`并且`z`成为`undefined`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T13:06:45.223

您的`addPoint()`方法似乎期望`x`,`y`和`z`属性分别传递，但您只传递了一个参数，即`point`对象。

要么将方法更改为：

```
this.addPoint(point) {
    /* x, y and z are now retrievable from point.x, point.y etc */
} 
```

或者将调用更改为方法

```
fig.addPoint(point.x, point.y, point.z); 
```

# android - 如何提高android上的音频质量

> ID：11828816
> 
> 赞同：0
> 
> 时间：2012-08-06T13:00:59.520
> 
> 标签：android, audio-recording, android-audiomanager

我正在使用 AudioRecorder 类在 android 上进行语音录制应用程序，并且使用了不同的采样率 44100、32000、24000、16000 和 8000。采样率 44100 提供了高质量的音频，但它需要非常大的尺寸，但其他采样率给出了不好和非常文件大小可接受的质量差的音频。

在你说可能重复的问题之前，我已经看到了以下链接：

[链接1](https://stackoverflow.com/questions/1437888/improve-android-audio-recording-quality)

[链接2](https://stackoverflow.com/questions/9389572/improve-audio-recording-quality-in-android)

但是提到的链接与问题不同。

我的问题是如何为 32000、24000 和 8000 等采样率获得具有小文件大小的高质量音频？

或者有没有办法将wav文件从大尺寸压缩到小尺寸？

我的代码示例：

```
tempbufferSize = AudioRecord.getMinBufferSize(16000,AudioFormat.CHANNEL_CONFIGURATION_MONO,AudioFormat.ENCODING_PCM_16BIT);
........
mAudioRecord = new AudioRecord(MediaRecorder.AudioSource.MIC,16000, AudioFormat.CHANNEL_CONFIGURATION_MONO,AudioFormat.ENCODING_PCM_16BIT,tempbufferSize);
mAudioRecord.startRecording();
..... 
```

我已经提到了[链接。](http://matrix-examplecode.blogspot.in/2011/12/audio-recording-part-2.html)

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:10:56.450

您确实意识到，当您提高采样率时，您每秒会获得更多样本，这有效地增加了文件的大小。方法是质量更高，数据更多。

**一些压缩参考：**

* * *

[http://www.eetimes.com/design/analog-design/4017792/Audio-Compression-Algorithm-Overview](http://www.eetimes.com/design/analog-design/4017792/Audio-Compression-Algorithm-Overview)

[http://jspeex.sourceforge.net/index.php](http://jspeex.sourceforge.net/index.php)

[http://flac.sourceforge.net/license.html](http://flac.sourceforge.net/license.html) <-- BSD 许可证/无损

[http://jflac.sourceforge.net/](http://jflac.sourceforge.net/) << Apache 许可证/无损

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:19:39.927

WAV 是纯未压缩的音频数据，因此在不牺牲质量的情况下，文件大小会非常大。您可以使用 MediaRecorder 和 setOutputFormat() 录制到 MPEG4

看着：

[媒体记录器](http://developer.android.com/reference/android/media/MediaRecorder.html)

[输出格式 MPEG4](http://developer.android.com/reference/android/media/MediaRecorder.OutputFormat.html#MPEG_4)

希望有帮助

# extjs4 - 在 extjs 存储中设置限制不会更新页面变量

> ID：11828820
> 
> 赞同：1
> 
> 时间：2012-08-06T13:01:35.787
> 
> 标签：extjs4, extjs4.1

我的商店里有以下物品。请注意，限制设置为 10。我可以在 firebug 上看到返回了 10 条记录。我的问题是我的网格分页似乎没有正确的“页面”值。

即我总共有 11 条记录（应该是 2 页）

```
proxy:{
    type:'ajax',
    api:{
        read: '/CutterHistory/Read/',
        update:'/CutterHistory/Update',
        create:'/CutterHistory/Update',
        destroy:'/CutterHistory/Remove'
    },
    reader:{
        type:'json',
        root:'CutterHistories',
        successProperty:'success',
        totalProperty:'Total'
    },
    writer:{
        type:'json',
        allowSingle:true
    },
    simpleSortMode: true,
    extraParams : {
        'sort' : sortBy,
        'search' : search,
        'limit' : 10,
        'destroyed' : destroyed
    }
}, 
```

![在此处输入图像描述](../Images/f6f90389a82b0a0f10d791dac7b0e362.png)

和我的网格

![在此处输入图像描述](../Images/b5cea7a4cad59af6cb77928759102bc0.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T13:36:58.370

我很确定您不需要将排序和限制包括在内作为额外的参数。如果你有一个分页工具栏，你应该简单地在你的商店中设置[pageSize](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-cfg-pageSize)并且商店会处理所有这些

# java - HttpConnection 不适用于 3G

> ID：11828822
> 
> 赞同：0
> 
> 时间：2012-08-06T13:01:41.393
> 
> 标签：java, blackberry, java-me, blackberry-eclipse-plugin, blackberry-jde

我有以下代码：

```
HttpConnection httpCon = null;
InputStream fileIn = null;
try
{
     httpCon = (HttpConnection) Connector.open(url + getConnectionSuffix(), Connector.READ);
     httpCon.setRequestMethod(HttpConnection.GET);
    }
    catch (Exception e)
    {
      .......
    }
  ............. 
```

和

```
private String getConnectionSuffix()
{
    String connSuffix = "";
    if (DeviceInfo.isSimulator())
    {
        connSuffix = ";deviceside=true";
    }
    else if ( (WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED) &&
          RadioInfo.areWAFsSupported(RadioInfo.WAF_WLAN))
    {
        connSuffix=";interface=wifi";
    }
    else
    {
        String uid = null;
        ServiceBook sb = ServiceBook.getSB();
        ServiceRecord[] records = sb.findRecordsByCid("WPTCP");
        for (int i = 0; i < records.length; i++)
        {
            if (records[i].isValid() && !records[i].isDisabled())
            {
                if (records[i].getUid() != null &&
                    records[i].getUid().length() != 0)
                {
                    if ((records[i].getCid().toLowerCase().indexOf("wptcp") != -1) &&
                        (records[i].getUid().toLowerCase().indexOf("wifi") == -1) &&
                        (records[i].getUid().toLowerCase().indexOf("mms") == -1))
                    {
                        uid = records[i].getUid();
                        break;
                    }
                }
            }
        }
        if (uid != null) {
            // WAP2 Connection
             connSuffix = ";ConnectionUID="+uid;
        } else {
             connSuffix = ";deviceside=true";
        }
    }
    return connSuffix;
} 
```

但互联网并不总是有效的。在 3G 上它不起作用（其他应用程序，用于 exp：浏览器运行良好）。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:47:22.400

在获取服务 Book 之前，尝试通过 BIS 进行连接（如果打开了 Blackberry 选项，则使用）：

if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_BIS_B) == CoverageInfo.COVERAGE_BIS_B) { connSuffix = ";deviceside=false;ConnectionType=mds-public"; }

# html - CSS 在最小化屏幕时保持 div 的固定宽度

> ID：11828824
> 
> 赞同：3
> 
> 时间：2012-08-06T13:01:46.333
> 
> 标签：html, css

大家好，有一个在表格之外的 div，当用户最小化屏幕时，我希望 div 保持相同的大小。这是它的作用：

基本上，当我最小化页面时，我希望宽度保持在 60% 并且不缩小：

CSS：

```
message_box,

{
background-color:#EEEECC;
border: #CCCCAA thin solid;
margin: 0 auto;
padding: 5px;
text-align: center;
font-family: arial, sans-serif;
font-size: 10pt;
margin-bottom: 10px;
} 
```

html:

```
<div class="message_box" style="width: 60%"> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T13:13:33.627

当您将元素设置为 时`width:60%`，这意味着该元素的宽度将是其父元素的 60%。

如果`<div class="message_box">`的父元素变窄，那么`<div class="message_box">`也会变窄。

当你说你想要`<div class="message_box">`60% 宽时，你到底是什么意思？60% 什么？

如果您希望`<div class="message_box">`' 的宽度为特定数量的像素，并且在用户调整浏览器窗口大小时不改变，您应该以像素为单位设置其宽度，例如：

```
<div class="message_box" style="width: 300px"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T20:29:41.663

你应该让它保持静态，以像素为单位分配值，600px（或任何你想要的大小）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:15:40.413

假设“最小化”意味着当用户调整窗口大小时，您希望 div 保持在其父元素的 60%。在这种情况下，这样的事情应该起作用：

```
.message_box{
    background-color:#EEEECC;
    border: #CCCCAA thin solid;
    margin: 0 auto;
    padding: 5px;
    text-align: center;
    font-family: arial, sans-serif;
    font-size: 10pt;
    margin-bottom: 10px;
    position:absolute;
    left:0;
    right:60%;
} 
```

如果 div 有父元素，请确保该元素设置了宽度并且具有 css 属性 `position:relative`

# c# - 在消息框打开时关闭 wpf

> ID：11828826
> 
> 赞同：0
> 
> 时间：2012-08-06T13:01:49.663
> 
> 标签：c#, wpf

我尝试在午夜自动关闭 wpf 应用程序：

```
Dispatcher.BeginInvokeShutdown(DispatcherPriority.Normal); 
```

这通常工作得很好，但是当有一个消息框打开等待用户响应时，应用程序无法关闭。无论打开消息框如何，有没有办法关闭应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:20:36.857

也许您可以使用 Environment.Exit （立即退出...在 GUI 应用程序上做这件事非常顽皮）或找到 MessageBox 窗口并向他们发送关闭消息，或挂钩任何本机 MessageBox 对话框的创建（...即跟踪窗口句柄，因此您可以关闭它们）。

*   [单击 MessageBox 后关闭 C# 控制台应用程序](https://stackoverflow.com/questions/10622069/close-c-sharp-console-application-after-messagebox-click)

*   [强制以编程方式关闭 MessageBox](https://stackoverflow.com/questions/7926107/force-close-of-messagebox)

*   [http://social.msdn.microsoft.com/forums/en-US/winforms/thread/d3f89686-e4d0-4bb1-9052-31abef2a9d2a/](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/d3f89686-e4d0-4bb1-9052-31abef2a9d2a/)

*   [关闭应用程序](https://stackoverflow.com/questions/7146080/c-sharp-closing-applications)

*   [关闭 WPF GUI 应用程序的正确方法：GetCurrentProcess().Kill()、Environment.Exit(0) 或 this.Shutdown()](https://stackoverflow.com/questions/3880836/right-way-to-close-wpf-gui-application-getcurrentprocess-kill-environment)

*   [http://msdn.microsoft.com/en-us/magazine/cc188920.aspx](http://msdn.microsoft.com/en-us/magazine/cc188920.aspx)

还有一个非常非常调皮的方式：

Process.GetCurrentProcess().Kill()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T16:57:16.120

对于 WPF 应用程序使用

```
Application.Current.Shutdown(); 
```

# jquery - 为什么jquery mobile会跳转到应用程序的第一页？

> ID：11828827
> 
> 赞同：1
> 
> 时间：2012-08-06T13:01:50.100
> 
> 标签：jquery, jquery-mobile

![应用流程图](../Images/6b4d597bef4395c139282770f6c2b91b.png)

这是我的应用程序的流程图。它只是一个包含所有页面的 html 文件。当我尝试使用从 page4 转到 page2

```
$.mobile.changePage( "#page2") 
```

它向我显示 page2，然后立即跳转到 page1，但是如果我转到 page1，然后通过更改浏览器 urlbar（index.html#page2）中的 url 转到 page2，一切正常。这发生在我尝试从 page4 以这种方式导航的任何页面上。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-11T08:03:10.387

我最终将我的应用程序拆分为不同的 html 文件。现在一切正常。

# css - twitter-bootstrap：当鼠标悬停在-tag中的 btn-group 上时，如何去掉带下划线的按 钮文本？

> ID：11828829
> 
> 赞同：79
> 
> 时间：2012-08-06T13:01:59.633
> 
> 标签：css, twitter-bootstrap

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2019-05-21T05:51:41.163

# 引导程序 4+

现在在 Bootstrap 4+ 中[很容易做到](https://getbootstrap.com/docs/4.4/utilities/text/#text-decoration)这一点

```
<a href="#" class="text-decoration-none">
    <!-- That is all -->
</a> 
```

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2012-08-06T14:42:36.033

`{ text-decoration: none !important}`

* * *

**编辑1：**

仅对您而言，示例`a{text-decoration: none}`将有效

您可以使用一个类来不干扰`<a>`标签的默认行为。

```
<a href="#" class="nounderline">
  <div class="btn-group">
    <button class="btn">Text</button>
    <button class="btn">Text</button>
  </div>
</a> 
```

**CSS：**

```
.nounderline {
  text-decoration: none !important
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-08-05T19:40:48.083

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2018-09-18T13:30:38.277

为什么不直接申请`nav-link`课程？

```
<a href="#" class="nav-link"> 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-06-24T10:32:11.027

```
a.btn {
  text-decoration: none;
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-10-05T23:17:43.607

问题是您的目标是按钮，但它是导致 text-decoration: 下划线的 A 标记。因此，如果您以 A 标签为目标，那么它应该可以工作。

```
a:hover, a:focus { text-decoration: none;} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-05-24T18:24:00.050

如果您在项目中使用 Less 或 Sass，则可以定义`link-hover-decoration`变量（`underline`默认情况下），一切就绪。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-07-26T09:06:10.500

```
a:hover, /* OPTIONAL*/
a:visited,
a:focus
{text-decoration: none !important;} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-04-15T13:44:25.050

如果您使用引导程序，则可以轻松地 从锚标记中**删除下划线。**就我而言，我曾经喜欢这个；

```
 <a href="#first1" class=" nav-link">
   <button type="button" class="btn btn-warning btn-lg btn-block">
   Reserve Table
   </button>
 </a> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-08-03T11:16:21.403

```
a:hover{text-decoration: underline !important}
a{text-decoration: none !important} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-08-24T17:02:58.733

`.btn``anchor element`是最好的方法，在现代网站中，如果不使用它就不好，`href`所以使`anchor tag`to`button`更好。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-11-08T11:41:39.127

只需在链接中使用引导类“btn”，它会在悬停时删除下划线

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-03-21T11:15:14.980

将 Bootstrap 类“text-decoration-none”添加到您的锚标签

```
`<a href="#" class="***text-decoration-none***">
    <div class="btn-group">
        <button class="btn">Text</button>
        <button class="btn">Text</button>
    </div>
</a>` 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-29T09:20:19.680

将此**css**代码添加到您的 css 文件中：

```
a.btn { text-decoration: none !important; } 
```

使用**a**标签：

```
<a href="account/login" class="btn btn-outline-success mx-2">Login</a> 
```

[![在此处输入图像描述](../Images/71322da13392cf14034c167ff34b90f0.png)](https://i.stack.imgur.com/c8SiG.png)

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2017-01-03T08:22:30.777

尝试将锚标记放入其中并添加 {display:block;}....它会正常工作

# java - Java - 只执行一次方法

> ID：11828830
> 
> 赞同：0
> 
> 时间：2012-08-06T13:02:01.003
> 
> 标签：java, recursion, infinite-loop

我有一个简单的问题：

```
Class A{

    B b;

    public void doSth{ 
         //This method should execute only once
         b.modify(); //calls doSth() again...
    }
} 
```

当程序运行时，A 的一个实例被传递给 B，B 调用 doSth（例如作为回调）。`b.modify`让 B`A.doSth()`再次调用，这将是无限的调用序列。我想要实现的是：我想执行一次 doSth()，修改 B，然后在下次执行时以某种方式停止无限调用链并且不执行`b.modify`。

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T13:05:24.360

为您的班级添加州旗：

```
Class A {

    B b;
    private volatile boolean called;

    public synchronized void doSth { 
         if (called) return;
         called = true;
         b.modify();
    }
} 
```

`volatile`如果有多个线程在使用，请使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T13:05:12.430

您可以有一个布尔字段，并在您第一次调用该方法时将其设置为 true。

```
Class A{
    boolean isModified = false;
    B b;

    public void doSth{ 
        if(!isModified) {
            this.isModified = true;
            b.modify();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T13:07:10.687

我会尝试找到一个不涉及循环依赖的解决方案。A和B真的必须互相引用吗？在更高的层次上，你想要达到什么目标？您可以使用 A 和 B 对象发布一些客户端代码吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T13:05:41.727

在类 A 中添加 a`boolean alreadyExecuted`并将 doSmth() 的实现修改为

```
 public void doSth{ 
     if(!alreadyExecuted){
         alreadyExecuted = true; 
         b.modify(); 

     }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-12T17:18:15.327

这是对“最佳”示例的修复，因为没有人应该在并发/多线程情况下真正使用它。您可以让两个线程都运行“如果”，并且都将传递到下一行。最好在这里使用 CAS，例如：

```
私有最终 AtomicBoolean 调用 = new AtomicBoolean();

接着

如果 (!call.compareAndSet(false, true)) 返回；

```

或者如果您更喜欢使用“plain and pure”风格，请使用带同步的双重检查：

```
调用私有 volatile 布尔值；

接着

boolean mayPass = false;
如果（！调用）{
  synchronized(this) { // 或一些外部对象
    如果（！调用）{
      称为=真；
      可能通过=真；
    }
  }
}
if (!mayPass) 返回；
...

```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-06T13:15:44.783

也许您应该更改设计以不递归调用这些方法，或者如果您不能只将参数添加到您的 doSth 方法

```
doSth(boolean modify)
 {
  if (modify) 
  {
    b.modify();
  }
  ...
 } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-06T13:07:53.197

将其视为黑客...

使用`boolean`变量

```
Class A{

    B b;
    public isOk = true;

    public void doSth{ 

        if (isOk){

         b.modify(); 
         isOk = false;

        }

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-06T13:40:22.227

把你的工作放在构造函数中

```
Class A{

   B b;

   A(){
       //This should execute only once
       b.modify(); //calls doSth() again...
   }

} 
```

# php - 无法在 Google Maps api v3 上加载航点和路线

> ID：11828832
> 
> 赞同：0
> 
> 时间：2012-08-06T13:02:16.123
> 
> 标签：php, javascript, google-maps-api-3, map-directions

我想用可拖动的航点显示多个方向并保存每个航点。

在我的项目中，我可以单击地图来创建路线，生成 wayA 点和 wayB 点并在它们之间绘制路线。所以，我可以制作多条路线。我也可以将它们保存在数据库中。问题是再次在地图上加载这些点，在数据库中获取它们并在地图上绘制所有内容。

我有两个页面，在[index.htm](http://www.inventoresdegaragem.com/dbteste/test.html)上您可以绘制路线并保存它们，在[loady.htm](http://www.inventoresdegaragem.com/dbteste/loady.htm)上您可以将它们加载到地图上。

我尝试了一些东西但没有成功，我会在这里发布我的尝试。

这是我恢复的 index.htm

```
 var map, ren, ser;
 var data = {};    
 var wayA = [];
 var wayB = [];
 var directionResult = [];

function goma() <---Initialize
{

google.maps.event.addListener(map, "click", function(event) {
        if (wayA.length == wayB.length) {
        wayA.push(new google.maps.Marker({
      draggable: true,      
          position: event.latLng,
          map: map

        }));
        } else {
        wayB.push(new google.maps.Marker({
      draggable: true,  
          position: event.latLng,
          map: map

        }));  
    ren = new google.maps.DirectionsRenderer( {'draggable':true} );
    ren.setMap(map);
    ren.setPanel(document.getElementById("directionsPanel"));
    ser = new google.maps.DirectionsService();  
    ser.route({ 'origin': wayA[wayA.length-1].getPosition(), 'destination':  wayB[wayB.length-1].getPosition(), 'travelMode': google.maps.DirectionsTravelMode.DRIVING},function(res,sts) {
        if(sts=='OK') {
                    directionResult.push(res);
                    ren.setDirections(res); 
                } else {
                    directionResult.push(null);
                }   })      
} }); }  

function save_waypoints()
{
    var w=[],wp;
    var rleg = ren.directions.routes[0].legs[0];
    data.start = {'lat': rleg.start_location.lat(), 'lng':rleg.start_location.lng()}
    data.end = {'lat': rleg.end_location.lat(), 'lng':rleg.end_location.lng()}
    var wp = rleg.via_waypoints 
    for(var i=0;i<wp.length;i++)w[i] = [wp[i].lat(),wp[i].lng()]    
    data.waypoints = w;   
    var str = JSON.stringify(data)   
    var jax = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');
    jax.open('POST','process.php');
    jax.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
    jax.send('command=save&inventoresdegara='+str)
    jax.onreadystatechange = function(){ if(jax.readyState==4) {
        if(jax.responseText.indexOf('bien')+1)alert('Mapa Atualizado !');
        else alert(jax.responseText)        
    }}  
 } 
```

这是我尝试恢复的 loady.htm

```
var map, ren, ser;
var data = {};
var wayA = [];
var wayB = [];
var directionResult = [];

 function goma() {

ren = new google.maps.DirectionsRenderer( {'draggable':true} );
    ren.setMap(map);
    ren.setPanel(document.getElementById("directionsPanel"));
    ser = new google.maps.DirectionsService();
    fetchdata();

    function setroute(os)
{
    var wp = [];
    for(var i=0;i<os.waypoints.length;i++)
        wp[i] = {'location': new google.maps.LatLng(os.waypoints[i][0], os.waypoints[i][3]),'stopover':false }
  ser.route({ 'origin': wayA[wayA.length-1].setPosition(), 'destination':  wayB[wayB.length-1].setPosition(), 'travelMode': google.maps.DirectionsTravelMode.DRIVING},function(res,sts) {
        if(sts=='OK') {
                    directionResult.push(res);
                    ren.setDirections(res); 
                } else {
                    directionResult.push(null);
                }    
 });
}
function fetchdata()
{
    var jax = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');
    jax.open('POST','process.php');
    jax.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
    jax.send('command=fetch')
    jax.onreadystatechange = function(){ if(jax.readyState==4) {        
        try { setroute( eval('(' + jax.responseText + ')') ); } 
        catch(e){ alert(e); }

    }}    

 } 
```

这是我的 php 文件：

```
<?   
    if($_REQUEST['command']=='save')
    {

        $query = "insert into inventoresdegara set value='$data'";
        if(mysql_query($query))die('bien');
        die(mysql_error());                 
    }  
    if($_REQUEST['command']=='fetch')
    {
        //$query = "select value from inventoresdegara";
        $query = "SELECT value FROM inventoresdegara";
        if(!($res = mysql_query($query)));      
        $rs = mysql_fetch_array($res,1);
        die($rs['value']);      
    }
?> 
```

这是我数据库中的图像，您知道信息是如何保存的 ![在此处输入图像描述](../Images/20d2a22d053d9823e8eb42bffec3a16e.png)

我唯一需要做的就是将此值加载到地图中，请帮助我 =)。

谢谢 ！

经过我的尝试，loady.htm 是 ser.routes 上的

```
ser.route({'origin':new google.maps.LatLng(os.start.lat,os.start.lng),
    'destination':new google.maps.LatLng(os.end.lat,os.end.lng),
    'waypoints': wp,

    'travelMode': google.maps.DirectionsTravelMode.DRIVING},function(res,sts) {
        if(sts=='OK')ren.setDirections(res);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-07T12:04:37.527

如果保存航点的原因是为了重现它们来自的路线，您最好保存整个路线，然后将其显示在地图上，而无需再次重新请求路线。请参阅[在不使用 javascript api 的情况下显示谷歌方向网络服务的结果](https://stackoverflow.com/questions/22450061/displaying-results-of-google-direction-web-service-without-using-javascript-api/38244681#38244681)

否则，如果您只想通过航路点从 A 到 B 获得一条新路线，那么您当前使用它们调用 ser.route() 的方法是正确的。

# java - HTTP POST 压缩/解压缩具有 .tgz、.gz 扩展名的 Java 文件

> ID：11828833
> 
> 赞同：0
> 
> 时间：2012-08-06T13:02:21.620
> 
> 标签：java, post

我正在尝试使用来自我的 Java 客户端的 HTTP PUT/POST 将文件上传到 URL(www.xyz.com)。Java 客户端是独立的，它不使用任何 HTML 页面来上传文件，它纯粹是在服务器端。

现在，我有一些关于压缩/解压缩格式为 .tgz 和 .gz 扩展名的文件的查询。如果我想上传 .tgz 或 .gz 类型的任何文件，是否有必要先解压缩文件，读取每个条目，处理，然后在处理后再次压缩文件，将已读入的每个条目写入存档以进行上传到一个 URL。

对于 Java 中的任何类型的格式，每次都需要这样做吗？我正在使用 HTTPClient，我们只需要提供文件路径并调用 executeMethod()。这是正确的还是如前所述，我必须在这里压缩和解压缩文件吗？以下是我的代码：

```
HttpClient client = new HttpClient();
PostMethod postMethod = new PostMethod(url);

client.setConnectionTimeout(8000);

File f = new File("C:\\Softwares\\Jars\\2012326767.tgz";
System.out.println("File Length = " + f.length());

postMethod.setRequestBody(new FileInputStream(f));
postMethod.setRequestHeader("Content-type",Not SURE); 
```

.tgz 和 .gz 格式的内容类型应该是什么？你能在这里发表你的看法吗，因为我一直在努力解决这个问题。

谢谢，

维京21

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T21:19:49.837

apache 的网站上有一个示例：http: [//hc.apache.org/httpcomponents-client-ga/examples.html](http://hc.apache.org/httpcomponents-client-ga/examples.html)。寻找自定义协议拦截器。

# html - 如何在 Metro 应用程序上实现推送通知

> ID：11828835
> 
> 赞同：2
> 
> 时间：2012-08-06T13:02:24.973
> 
> 标签：html, push-notification, windows-8, microsoft-metro, winjs

关于推送通知。如何在 Win8 Metro 应用程序中实现推送通知。这里使用 HTML5 和 JavaScript 来实现推送通知。我曾尝试研究 msdn 概念，但对实现客户端和服务器端代码没有一个清晰的想法。

谁能给我一个示例？

帮帮我，伙计们。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T18:45:45.157

以下是一些可能对您有所帮助的示例：

*   [推送和定期通知客户端示例](http://code.msdn.microsoft.com/windowsapps/Push-and-periodic-de225603)
*   [原始通知示例](http://code.msdn.microsoft.com/windowsapps/Raw-notifications-sample-3bc28c5d)
*   [Toast 通知示例](http://code.msdn.microsoft.com/windowsapps/Toast-notifications-sample-52eeba29)

此外，请查看[发送推送通知](http://msdn.microsoft.com/en-us/library/windows/apps/hh465460.aspx)页面上的快速入门；他们一步一步地完成这个过程。希望有帮助！

# c# - WebException 如何通过正文获得整个响应？

> ID：11828843
> 
> 赞同：118
> 
> 时间：2012-08-06T13:02:52.387
> 
> 标签：c#, webexception

在 WebException 中，我看不到 GetResponse 的正文。这是我在 C# 中的代码：

```
try {                
  return GetResponse(url + "." + ext.ToString(), method, headers, bodyParams);
} catch (WebException ex) {
    switch (ex.Status) {
      case WebExceptionStatus.ConnectFailure:
         throw new ConnectionException();                        
     case WebExceptionStatus.Timeout:
         throw new RequestTimeRanOutException();                     
     case WebExceptionStatus.NameResolutionFailure:
         throw new ConnectionException();                        
     case WebExceptionStatus.ProtocolError:
          if (ex.Message == "The remote server returned an error: (401) unauthorized.") {
              throw new CredentialsOrPortalException();
          }
          throw new ProtocolErrorExecption();                    
     default:
          throw;
    } 
```

我看到标题，但我没有看到正文。这是 Wireshark 针对请求的输出：

```
POST /api/1.0/authentication.json HTTP/1.1    
Content-Type: application/x-www-form-urlencoded    
Accept: application/json    
Host: nbm21tm1.teamlab.com    
Content-Length: 49    
Connection: Keep-Alive    

userName=XXX&password=YYYHTTP/1.1 500 Server error    
Cache-Control: private, max-age=0    
Content-Length: 106    
Content-Type: application/json; charset=UTF-8    
Server: Microsoft-IIS/7.5    
X-AspNet-Version: 2.0.50727    
X-Powered-By: ASP.NET    
X-Powered-By: ARR/2.5

Date: Mon, 06 Aug 2012 12:49:41 GMT    
Connection: close    

{"count":0,"startIndex":0,"status":1,"statusCode":500,"error":{"message":"Invalid username or password."}} 
```

是否有可能以某种方式在 WebException 中看到消息文本？谢谢你。

* * *

## 回答 #1

> 赞同：216
> 
> 时间：2012-08-06T13:06:40.860

```
var resp = new StreamReader(ex.Response.GetResponseStream()).ReadToEnd();

dynamic obj = JsonConvert.DeserializeObject(resp);
var messageFromServer = obj.error.message; 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-01-16T06:18:43.433

```
try {
 WebClient client = new WebClient();
 client.Encoding = Encoding.UTF8;
 string content = client.DownloadString("https://sandiegodata.atlassian.net/wiki/pages/doaddcomment.action?pageId=524365");
 Console.WriteLine(content);
 Console.ReadKey();
} catch (WebException ex) {
 var resp = new StreamReader(ex.Response.GetResponseStream()).ReadToEnd();
 Console.WriteLine(resp);
 Console.ReadKey();
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-08-09T14:40:42.460

**这只会改进现有的答案。**我编写了一个方法，该方法使用增强的消息处理投掷/重新投掷的细节，其中包括响应正文：

这是我的代码（在 Client.cs 中）：

```
/// <summary>
///     Tries to rethrow the WebException with the data from the body included, if possible. 
///     Otherwise just rethrows the original message.
/// </summary>
/// <param name="wex">The web exception.</param>
/// <exception cref="WebException"></exception>
/// <remarks>
///     By default, on protocol errors, the body is not included in web exceptions. 
///     This solutions includes potentially relevant information for resolving the
///     issue.
/// </remarks>
private void ThrowWithBody(WebException wex) {
    if (wex.Status == WebExceptionStatus.ProtocolError) {
        string responseBody;
        try {
            //Get the message body for rethrow with body included
            responseBody = new StreamReader(wex.Response.GetResponseStream()).ReadToEnd();

        } catch (Exception) {
            //In case of failure to get the body just rethrow the original web exception.
            throw wex;
        }

        //include the body in the message
        throw new WebException(wex.Message + $" Response body: '{responseBody}'", wex, wex.Status, wex.Response);
    }

    //In case of non-protocol errors no body is available anyway, so just rethrow the original web exception.
    throw wex;
} 
```

您在 catch 子句中使用它，就像 OP 显示的那样：

```
//Execute Request, catch the exception to eventually get the body
try {
    //GetResponse....
    }
} catch (WebException wex) {
    if (wex.Status == WebExceptionStatus.ProtocolError) {
        ThrowWithBody(wex);
    }

    //otherwise rethrow anyway
    throw;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-13T16:43:36.177

我没有看到任何带有`using`陈述的答案，也没有看到`async`.

```
public static class WebExceptionExtensions
{
    public static string GetResponseBody(this WebException webException)
    {
        if (webException.Status == WebExceptionStatus.ProtocolError)
        {
            try
            {
                using (var stream = webException.Response.GetResponseStream())
                {
                    using (var reader = new StreamReader(stream))
                    {
                        string msg = reader.ReadToEnd();
                        if (string.IsNullOrEmpty(msg) && webException.Response is HttpWebResponse response)
                            msg = $"{response.StatusDescription} ({(int)response.StatusCode})"; // provide some error message if not found

                        return msg;
                    }
                }
            }
            catch (WebException) // we tried
            {
                return string.Empty;
            }
        }
        else
        {
            return string.Empty;
        }
    }

    public static async Task<string> GetResponseBodyAsync(this WebException webException)
    {
        if (webException.Status == WebExceptionStatus.ProtocolError)
        {
            try
            {
                using (var stream = webException.Response.GetResponseStream())
                {
                    using (var reader = new StreamReader(stream))
                    {
                        string msg = await reader.ReadToEndAsync();
                        if (string.IsNullOrEmpty(msg) && webException.Response is HttpWebResponse response)
                            msg = $"{response.StatusDescription} ((int){response.StatusCode})"; // provide some error message if not found

                        return msg;
                    }
                }
            }
            catch (WebException) //  we tried
            {
                return string.Empty;
            }
        }
        else
        {
            return string.Empty;
        }
    }
} 
```

现在，每当我们捕获 WebExceptions 时，就很容易获得响应体。

```
try 
{
    // Do work here...
}
catch (WebException we)
{
    Console.WriteLine(we.GetResponseBody()); // synchronous
    Console.WriteLine(await we.GetResponseBodyAsync()); // or asynchronous
}
catch (Exception e)
{
    throw new Exception("Unexpected error occured", e);
} 
```

# drupal-7 - Drupal 7 - 从表单 API 中的 DB 填充下拉选择

> ID：11828846
> 
> 赞同：3
> 
> 时间：2012-08-06T13:02:57.643
> 
> 标签：drupal-7, form-api

我对 PHP 还是很陌生，甚至对 Drupal 的 Form API 也很陌生。我只是想从数据库中填充下拉选择。我认为这个问题源于我对如何使用多维数组缺乏深入的了解。真诚感谢任何帮助。

我的代码目前是：

```
 //Query DB for Rows
    $query = db_select('hp_education_years');
    $query->fields('hp_education_years', array('id', 'years',));
    $query->orderBy('years', 'ASC');
    $results = $query->execute();

    //define rows
    $options = array();
    foreach ($results as $result) {
        $options[$result->id] = array(
            $result->years,
        );
    }
    $form['education']['year'] = array(
        '#type' => 'select',
        '#title' => t('Year'),
        '#options' => $options,
        '#states' => array(
            'visible' => array(
                ':input[name="data_set"]' => array('value' => 'education'),
            ),
        ),
    ); 
```

这会返回一个填充列表，但会以粗体显示年份 ID 以及年份（例如 2008 年）。

如何让下拉菜单仅显示年份，而不是粗体显示年份 ID，然后显示年份。似乎 $option 只是比我想要的高一个级别？如果这有意义吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T13:58:30.300

尝试改变

```
//define rows
$options = array();
foreach ($results as $result) {
    $options[$result->id] = array(
        $result->years,
    );
} 
```

到

```
//define rows
$options = array();
foreach ($results as $result) {
    $options[$result->id] = $result->years;
} 
```

如果您查看[Drupal 的 Form API](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#select)中的示例，您会发现 Options 值应该只是字符串值而不是数组。

# mysql - 将转储导入 Amazon RDS

> ID：11828848
> 
> 赞同：0
> 
> 时间：2012-08-06T13:03:08.430
> 
> 标签：mysql, sql, amazon-rds, mysqlimport

我正在运行一个已包含数据库架构的 Amazon RDS 实例。使用 mysqldump 并遵循本指南 [1]，我可以远程导入包含 INSERT 语句的转储。

SQL 文件只有 4MB 大，包含大约 30.000 条语句。尽管尺寸很小，但导入需要 40 分钟才能完成。有可能加快这个速度吗？我不确定 mysqlimport 对于这么小的文件是否有价值。我试图停用自动提交，但没有明显改善。

我已经知道，我不能 ssh 到实例或将文件移动到本地 RDS 文件系统。

谢谢你，塞巴斯蒂安

[1] [http://aws.amazon.com/articles/2933](http://aws.amazon.com/articles/2933)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:47:31.240

mysqldump/import 是非常慢的工具，而且在极少数情况下它们是有效的。如果您编写导入脚本并逐个执行命令，则速度可能会更快。

# sharepoint - 在对 SharePoint CMIS 连接器的查询中包含谓词

> ID：11828849
> 
> 赞同：2
> 
> 时间：2012-08-06T13:03:12.167
> 
> 标签：sharepoint, cmis

我们在对 SharePoint 2010 执行 CMIS 查询时遇到问题。

**CONTAINS**谓词仅在通过本机 API 连接时才在**WHERE子句中起作用。**它无法通过 CMIS 连接器工作，并出现以下错误：

```
HTTP/1.1 500 Internal Server Error
Cache-Control: private
Content-Type: plain/text; charset=utf-8
Server: Microsoft-IIS/7.5
SPRequestGuid: 9dc88273-bb44-463d-95fc-f87193e3398f
Set-Cookie: WSS_KeepSessionAuthenticated={f52ddea3-0d94-48e6-b7c0-53ae740be8e4}; path=/
X-SharePointHealthScore: 0
X-AspNet-Version: 2.0.50727
X-Powered-By: ASP.NET
MicrosoftSharePointTeamServices: 14.0.0.6029
Date: Mon, 06 Aug 2012 12:17:34 GMT
Content-Length: 129

Your search cannot be completed because this site is not assigned to an indexer. Contact your administrator for more information. 
```

SharePoint 版本详细信息：

微软SharePointTeamServices：14.0.0.6029

Microsoft SharePoint Server 2010（不是 Foundation）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:49:45.703

转到 SharePoint 管理中心 - 应用程序管理 - 管理内容数据库，然后单击您的 Web 应用程序正在使用的内容数据库。在加载数据库（管理内容数据库设置）的页面上，向下滚动到搜索服务器部分，然后从下拉列表中选择您的服务器。检查以确保计时器作业的首选服务器也选择了您的服务器。单击确定。如果下拉菜单被禁用，请确保 SharePoint Foundation 搜索服务（是的，尽管您正在运行 SharePoint Server，但 Foundation）已启动。希望这可以帮助。

[http://www.sathishtk.com/blog](http://www.sathishtk.com/blog)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:41:05.037

您的 SharePoint Foundation 搜索计时器作业是否有效。前往 Monitoring –> Timer Jobs –>Review 作业定义来验证它。

查找 - SharePoint Foundation 搜索 刷新并运行计时器作业。完成后，尝试您的 contains 语句。

如果它仍然不起作用，我建议停止您的 SharePoint 基础搜索。从内容源（搜索服务应用程序）中删除您的 Web 应用程序（具有您的文档库的应用程序）。再次开始您的基础搜索，按照我之前的帖子中所述设置内容数据库设置，启动基础计时器作业并再次测试您的查询。

如果它有效，那么您可以将您的 Web 应用程序添加到您的内容源，以便常规 SP 搜索正常工作。

[http://www.sathishtk.com/blog](http://www.sathishtk.com/blog)

PS我试图找到一个我用作参考的technet博客。找不到它。但如果我没记错的话，这些是我遵循的步骤。

# java - 计算java日期差异时出错

> ID：11828850
> 
> 赞同：0
> 
> 时间：2012-08-06T13:03:13.337
> 
> 标签：java, calendar, java.util.date

计算两个日期之间的差异 ( `java.util.Date`) 以没有。of days 看起来很简单，我们可以找到不同的方法来做到这一点。我使用以下代码来计算日期差异：

```
 public static long daysBetween(Calendar startDate, Calendar endDate) {
        Calendar date = (Calendar) startDate.clone();
        long daysBetween = 0;
        while (date.before(endDate)) {
            date.add(Calendar.DAY_OF_MONTH, 1);
            daysBetween++;
        }
        return daysBetween;
    } 
```

在`main()`中，我使用了以下两个日期：

```
 Calendar c1 = Calendar.getInstance();
    c1.set(2011, 1, 1);
    Calendar c2 = Calendar.getInstance();
    c2.set(2011, 1, 31);

    long difference = daysBetween(c1, c2); // 
```

但是变量的值`difference`并不一致。有时是 30，有时是 31。那么，为什么会发生这种情况。

是否有任何解决方案可以使用该方法产生一致的输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:06:46.793

您正在设置日历的*日期*部分，而不是*时间*部分。

有时时钟会在调用之间滴答作响`getInstance()`，有时不会，因此不一致。

选项：

*   设置时间和日期，例如午夜
*   使用更好的日期/时间库 - [Joda Time](http://joda-time.sf.net) - 它具有更合适的表示 ( `LocalDate`)。这里的一个重要寓意是，如果你能找到一个代表你所拥有的确切信息的类型，而不是别的，那么这可能是一个很好的选择，并且导致的并发症更少。

使用`LocalDate`，您甚至不必执行循环，因为 Joda Time 对计算两个值之间的差异有很好的支持。

```
LocalDate date1 = new LocalDate(2011, 1, 1);
LocalDate date2 = new LocalDate(2011, 1, 31);
Days period = Days.daysBetween(days1, days2);
int days = period.getDays(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T13:06:22.417

您只是设置年、月和日。小时、分钟、秒和毫秒是当前时间（因此每次运行时都会有所不同）

我建议您改用 Joda Time 的 LocalDate ，因为它似乎完全符合您的要求。

# ios - 如何在不使用 GKPeerPicker 的情况下通过 GKSession 在手机之间传输数据

> ID：11828853
> 
> 赞同：1
> 
> 时间：2012-08-06T13:03:22.750
> 
> 标签：ios, gksession

我正在尝试创建一个使用 GKSession 在两部以上手机之间传输数据的应用程序。事情是有两种选择：

**第一：**使用[GKPeerPicker](https://web.archive.org/web/20120504005444/http://developer.apple.com/library/ios/DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/FindingPeerswithPeerPicker/FindingPeerswithPeerPicker.html#//apple_ref/doc/uid/TP40008304-CH102-SW1) .. 但是在这里我被困在我必须实现自己的[WIFI 接口](https://stackoverflow.com/questions/10862670/how-to-make-connection-over-wifi-when-working-with-gamekit)的地方.. 苹果没有提供如何做到这一点的说明：

```
- (void)peerPickerController:(GKPeerPickerController *)picker didSelectConnectionType:    (GKPeerPickerConnectionType)type {
    if (type == GKPeerPickerConnectionTypeOnline) {
        picker.delegate = nil;
        [picker dismiss];
        [picker autorelease];
       // Implement your own internet user interface here.
    }
} 
```

**第二：**跳过 GKPeerPicker 并自己做整个事情，就像在[这个](https://github.com/shrtlist/GKSessionP2P)例子中一样。但是，应用程序开发文档没有提供有关如何在不使用 GKPeerPicker 的情况下发送/接收数据的任何说明。（我也无法在网络上找到任何示例）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T01:28:45.213

我只是想出了如何在没有 peerpicker 的情况下连接设备。这有点像猜谜游戏，因为文档非常不清楚，我在互联网上寻找了很长时间以获取有关此的任何信息。我将尝试在这里解释所有内容，以澄清将来任何人可能遇到的任何问题。

*从文档中：*

> GKSession 对象提供了使用蓝牙或 Wi-fi 发现并连接到附近的 iOS 设备的能力。

这是我理解它的第一步。我认为 GKPeerPickerController 负责广告和连接，但 GKSession 实际上做了所有这些。

第二件事要理解的是，所谓的*对等*点不一定与你有联系。他们可以在附近等待被发现和连接。所有对等点都有一个状态

*   GKPeerStateAvailable（这是有用的！）
*   GKPeerState 不可用
*   GKPeerStateConnected
*   GKPeerStateDisconnected
*   GKPeerStateConnecting

那么我们如何实际连接呢？首先我们必须创建一个 GKSession 对象，以便能够找到我们周围的对等点并查看它们何时可用：

```
// nil will become the device name
GKSession *gkSession = [[GKSession alloc] initWithSessionID:@"something.unique.i.use.my.bundle.name" displayName:nil sessionMode:GKSessionModePeer];
[gkSession setDataReceiveHandler:self withContext:nil];
gkSession.delegate = self;
gkSession.available = YES; // I'm not sure this if this is the default value, this might not be needed 
```

**现在我们要响应一些委托调用。** `session:didReceiveConnectionRequestFromPeer:`和`session:peer:didChangeState`（您还应该适当地处理 GKSessionDelegate 的断开连接和失败的调用）

```
-(void)session:(GKSession *)session peer:(NSString *)peerID didChangeState:(GKPeerConnectionState)state
{
    if(state == GKPeerStateDisconnected)
    {
        // A peer disconnected
    }
    else if(state == GKPeerStateConnected)
    {   
        // You can now send messages to the connected peer(s)
        int number = 1337;
        [session sendDataToAllPeers:[NSData dataWithBytes:&number length:4] withDataMode:GKSendDataReliable error:nil];
    }
    else if (state == GKPeerStateAvailable)
    {
        // A device became available, meaning we can connect to it. Lets do it! (or at least try and make a request) 
        /*
        Notice: This will connect to every iphone that's nearby you directly. 
        You would maybe want to make an interface similar to peerpicker instead
        In that case, you should just save this peer in a availablePeers array and 
        call this method later on. For your UI, the name of the peer can be 
        retrived with [session displayNameForPeer:peerId]
        */
        [session connectToPeer:peerID withTimeout:10];
    } 
```

}

**另一个对等方现在收到了一个他应该响应的请求。**

```
-(void)session:(GKSession *)session didReceiveConnectionRequestFromPeer:(NSString *)peerID
{
    // We can now decide to deny or accept
    bool shouldAccept = YES;
    if(shouldAccept)
    {
        [session acceptConnectionFromPeer:peerID error:nil];
    }
    else
    {
        [session denyConnectionFromPeer:peerID];
    }
} 
```

**终于收到我们的1337小消息了**

```
-(void)receiveData:(NSData *)data fromPeer:(NSString *)peer inSession:(GKSession*)session context:(void *)context
{
    int number = 1337;
    if([data isEqualToData:[NSData dataWithBytes:&number length:4]])
    {
        NSLog(@"Yey!");
    }
} 
```

# mysql - 加入表以获得空值结果

> ID：11828857
> 
> 赞同：0
> 
> 时间：2012-08-06T13:03:33.760
> 
> 标签：mysql

这是我的两张桌子`feeds`和`traders`。现在我想从两个表中选择`feed_id`表`feeds`不在表中`trdr_feed_id`的行`traders`。这是两个表的结构。

**饲料**

![在此处输入图像描述](../Images/9813ad861457e6d99c1a06e658e845f1.png)

**交易员**

![在此处输入图像描述](../Images/35c50d4702cb10934c319c9786c60a1e.png)

这是我正在使用的连接查询。

`SELECT * FROM feeds LEFT JOIN traders ON feeds.feed_id = traders.trdr_feed_id`

这是我得到的输出。我需要的是，只有具有空值的行。但请注意，具有空值的列应保留为空值。

![在此处输入图像描述](../Images/2aa2830a5cb6683efb6633cabbf31955.png)

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:06:20.620

我认为这就是你要找的：

```
SELECT * 
FROM feeds 
     LEFT JOIN traders 
         ON IFNULL(feeds.feed_id, 0) = IFNULL(traders.trdr_feed_id, 0)
WHERE traders.trdr_feed_id IS NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:06:24.607

试试这个`JOIN`

```
SELECT  Feed_ID
FROM    Feeds
WHERE   Feed_ID NOT IN
        (
            SELECT trdr_feed_id
            FROM    Traders
        ) 
```

或这个：

```
SELECT * 
FROM   Feeds a
          LEFT JOIN Traders b
              ON a.Feed_ID = b.trdr_feed_id
WHERE a.trdr_id IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T13:06:41.587

```
SELECT * FROM feeds 
LEFT JOIN traders 
ON feeds.feed_id = traders.trdr_feed_id    
WHERE trdr_id IS NULL 
```

# javascript - Coordinate Issue (Hierarchial Edge Bundles) in d3.js

> ID：11828860
> 
> 赞同：2
> 
> 时间：2012-08-06T13:03:40.347
> 
> 标签：javascript, svg, d3.js, bundle-layout

I'm new to [d3](http://d3js.org/) and I'm just playing around with the hierarchical edge bundle visualization which can be found [here](http://bl.ocks.org/1044242). I'm trying to add further elements to the visualization and therefore I need the coordinates of every node (that means the coordinates where the edge bundle ends).

If I draw a line from (0,0) to the coordinates of a node, the line does not end where the bundle ends. Somehow the coordinates of the node objects have been modified. How can I get their real coordinates?

# asp.net-mvc - 无法解码 Base-64 URL

> ID：11828864
> 
> 赞同：2
> 
> 时间：2012-08-06T13:03:50.827
> 
> 标签：asp.net-mvc, base64, url-encoding

我有一个构建 HTML 电子邮件的应用程序。内容中包含一个编码的 URL 参数，例如，可能包含促销代码或产品参考。电子邮件由 Windows 服务（本质上是控制台应用程序）生成，并且链接在单击时由 MVC 网站处理。以下是创建电子邮件链接的代码：

```
string CreateLink(string domain, string code) {
    // code == "xyz123"
    string encrypted = DES3Crypto.Encrypt(code);  // H3uKbdyzrUo=
    string urlParam = encrypted.EncodeBase64();   // SDN1S2JkeXpyVW890
    return domain + "/" + urlParam;
} 
```

MVC控制器上的action方法构造如下：

```
public ActionResult Index(string id) {
    string decoded = id.DecodeBase64();
    string decrypted = DES3Crypto.Decrypt(decoded);
    ...
} 
```

在我们所有的测试中，这种机制都按预期工作，但是，现在我们已经上线，我们看到大约 4% 的错误率，从 base-64 转换失败，但有以下异常：

*输入不是有效的 Base-64 字符串，因为它包含非 base 64 字符、两个以上的填充字符或填充字符中的非空白字符。*

来自 url 的 id 参数“看起来”OK。问题似乎与失败的 EncodeBase64/DecodeBase64 方法有关，因为 DecodeBase64 方法在失败时返回“乱码”字符串，例如“�nl����□��7y�b�8�sJ���=”链接。

此外，大多数错误来自 IE6 用户代理，导致我认为这是字符编码问题，但我不明白为什么。

作为参考，这是我的 base-64 URL 编码的代码：

```
 public static string EncodeBase64(this string source)
  {
     byte[] bytes = Encoding.UTF8.GetBytes(source);
     string encodedString = HttpServerUtility.UrlTokenEncode(bytes);
     return encodedString;
  }

  public static string DecodeBase64(this string encodedString)
  {
     byte[] bytes = HttpServerUtility.UrlTokenDecode(encodedString);
     string decodedString = Encoding.UTF8.GetString(bytes);
     return decodedString;
  } 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:05:48.383

回顾一下，我正在创建一个使用 base-64 编码参数的 URL，该参数本身就是一个三重 DES 加密字符串。所以 URL 看起来像 http://[Domain_Name]/SDN1S2JkeXpyVW890 该链接引用了 MVC 网站上的控制器操作。

然后将该 URL 插入到 HTML 格式的电子邮件中。查看错误日志，我们看到大约 5% 的响应链接的公共用户抛出了“无效的 base-64 字符串错误”。大多数（但不是全部）这些错误都与 IE6 用户代理有关。

在尝试了许多基于字符和 URL 编码的可能解决方案后，发现在客户端进程的某个地方，url 被转换为小写 - 这当然破坏了 base-64 编码（因为它同时使用大写和小写编码字符）。

案件损坏是由客户端的浏览器、电子邮件客户端还是本地杀毒软件引起的，我无法确定。

**解决方案** 不要使用任何标准的 base-64 编码方法，而是使用 base-32 或 zBase-32 编码 - 两者都不区分大小写。

有关更多详细信息，请参阅以下链接

[Base-32 - 维基百科](http://en.wikipedia.org/wiki/Base32)

[MyTenPennies Base-32 .NET 实现](http://mytenpennies.wikidot.com/blog%3abase-32-encoder)

这个故事的寓意是，Base-64 URL 编码在某些公共环境中可能不可靠。Base-32 虽然略显冗长，但却是更好的选择。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T14:12:59.643

看起来你真的很亲近。您的`encyrpted.EncodeBase64()`函数返回了一个额外的零。

试试这个：

```
string data = "H3uKbdyzrUo=";
string b64str = Convert.ToBase64String(UTF8Encoding.UTF8.GetBytes(data));
string clearText = UTF8Encoding.UTF8.GetString(Convert.FromBase64String(b64str)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T14:25:06.033

这是一个有趣的问题。我的猜测是 IE 6 正在吃掉一些字符。

例如，包含“ywhar0xznxpjdnfnddc0yxzbk2jnqt090”的字符串的长度**不是**四的倍数（这是 FromBase64 工作的要求[http://msdn.microsoft.com/en-us/library/system.convert.frombase64string .aspx](http://msdn.microsoft.com/en-us/library/system.convert.frombase64string.aspx) )

但是，如果您要填充该字符串，直到它的长度是四的倍数（“ywhar0xznxpjdnfnddc0yxzbk2jnqt090”+“a12”），那么就可以了。

MSDN 文档说一个 ("=") 或两个 ("==") 相等的字符用于填充到/fromBase64 方法，我怀疑 IE 6 正在从您发送的字符串中截断它。

这是完全的猜测，但我希望它有所帮助。

# javascript - 在 Jquery 中验证表单的输入字段

> ID：11828869
> 
> 赞同：0
> 
> 时间：2012-08-06T13:04:09.240
> 
> 标签：javascript, jquery, forms

我在 jquery 中有这个函数来验证所有字段是否至少输入了一个字符，我的意思是，如果它们不为空，如下面的代码所示：

```
function validateStep(step){
    if(step == fieldsetCount) return;

    var error = 1;
    var hasError = false;
    $('#formElem').children(':nth-child('+ parseInt(step) +')').find(':input:not(button)').each(function(){
        var $this       = $(this);
        var valueLength = jQuery.trim($this.val()).length;

        if(valueLength == ''){
            hasError = true;
        }

    });
    var $link = $('#navigation_form li:nth-child(' + parseInt(step) + ') a');
    $link.parent().find('.error,.checked').remove();

    var valclass = 'checked';
    if(hasError){
        error = -1;
        valclass = 'error';
    }
    $('<span class="'+valclass+'"></span>').insertAfter($link);

    return error;
} 
```

碰巧在我拥有的如此大的表格中，有一个不需要的字段。我在实现 jquery 代码方面仍然有一些困难，我不知道如果我可以在这个函数的中间插入来说明不需要特定的字段会怎样。

谁能给我一点帮助？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:06:28.880

尝试检查当前元素的 ID 是否与您要排除的元素的 ID 不匹配：

```
var $this = $(this); 
if($this.attr('id') != 'SOMEID'){
  // Validate
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:10:18.107

您可以使用特定类标记您的必填字段并遍历具有此类“必填”的字段，这样可以轻松更改您要检查哪些字段的决定

[我建议 Jörn Zaefferer 的http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)中的 jQuery 验证插件，它使用这种技术来验证表单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:20:00.723

我建议你使用一个 jquery 插件

例如。 [http://docs.jquery.com/Plugins/Validation#demo](http://docs.jquery.com/Plugins/Validation#demo)

[http://bassistance.de/2011/05/14/release-validation-plugin-1-8-1/](http://bassistance.de/2011/05/14/release-validation-plugin-1-8-1/)

这将使您的工作变得轻松。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T13:21:44.230

为什么不只是添加一个属性 - isRequired=true || isRequired=false 然后通过属性值收集并验证你需要的元素？

# curl - 对 PROXYTYPE_HTTP_1_0 的 PycURL 支持？

> ID：11828874
> 
> 赞同：0
> 
> 时间：2012-08-06T13:04:50.317
> 
> 标签：curl, pycurl

libcurl 文档说选项 CURLPROXY_HTTP_1_0 自 7.19.4 起已受支持。

PycURL 版本（在 Debian 6 上）显示 libcurl/7.21.0。

但是我在那里找不到常量 PROXYTYPE_HTTP_1_0 （这就是他们命名这些的方式）。

有谁知道给了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T21:06:26.147

CURLPROXY_HTTP_1_0 只是 curl.h 中定义的一个整数常量，您可以查看它的值并将其按值传递给 setopt。

`*** curl.h *** CURLPROXY_HTTP_1_0 = 1, /* added in 7.19.4, force to use CONNECT`

```
c = pycurl.Curl()
c.setopt(pycurl.CURLOPT_PROXYTYPE, 1)
...

```

# java - 在Java中获取ArrayList中的第一个和最后一个元素

> ID：11828875
> 
> 赞同：4
> 
> 时间：2012-08-06T13:04:50.733
> 
> 标签：java, arraylist

我有小代码，我必须添加条件才能获得正确的输出。

如果 mimeList 中的元素是 Last 然后转到**else**部分。或到**if**。

此 ArrayList 中始终有 1 个元素。

（如果它只有一个元素，则意味着它是最后一个元素。）

```
for (int i = 0; i < mimeList.size(); i++) {
    StringBuffer sb = new StringBuffer();

    if () {
        queryString = sb.append(queryString).append(key)
        .append("=").append(mimeList.get(i)).append(" or ").toString();
    }else{
        queryString = sb.append(queryString).append(key)
        .append("=").append(mimeList.get(i)).toString();
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T13:09:58.837

关于你的问题的标题：

> 在Java中获取ArrayList中的第一个和最后一个元素

它应该很简单：

```
mimeList.get(0); // To get first
mimeList.get(mimeList.size()-1); //to get last 
```

关于您的`if`情况：

```
if(!(i==0 || i==mimeList.size()-1)) 
```

正如你所说的那样：

> 如果 mimeList 中的元素是第一个或最后一个元素，它将进入 else 条件，否则在 if 条件下

我`!`在if条件下使用。否则下面很酷：

```
if((i>0) && (i!=mimeList.size()-1)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T13:29:02.903

没有大量检查的更简单的方法是使用分隔符，它一开始是空的。

```
StringBuilder sb = new StringBuilder();
String sep = "";
for (String s : mimeList) {
    sb.append(sep + key + "=" + s);
    sep = " or ";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T13:08:48.353

像这样的东西应该可以工作：`if ((i > 0) && (i < mimeList.size() - 1))`. 由于在基于 0 的 Java 集合中，第一个元素将在 location`0`并且最后一个元素将在 at `Collection.Size - 1`，因为访问第`Collection.Size`th 位置将导致越界异常。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-06T13:12:14.367

根据我从您的问题中收集到的信息，您需要以下内容：

```
ArrayList<Foo> foos = fooGenerator.generateFoos();

for(int i = 0; i < foos.size(); i++) {
    if(i != (foos.size() - 1)) {
        System.out.println("Front elements of ArrayList");
    }
    else {
        System.out.println("Last element of ArrayList!");
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-19T16:29:41.057

```
ArrayList<int> foos = ArrayList<int>(); 
```

第一个是

```
foos.get(0); 
```

最后是

```
foos.get(foo.size - 1); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-06T13:10:09.433

考虑到`i`在`Integer`里面`ArrayList.`

```
if ((i > 0) && (i < mimeList.size() - 1)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-06T13:08:05.623

尝试类似的东西

```
if(i == 0 || i == mimeList.size() - 1) 
```

希望有帮助！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-06T13:09:02.413

您的代码中几乎已经有了答案：

*您从数组中的第*一个元素循环到*最后一个*元素。

第一个：有索引 0，最后一个：有索引（大小 - 1）

这会导致以下情况：

```
if ((i > 0) && (i < mimeList.size() - 1)) 
```

# c# - 创建一个 Youtube 机器人

> ID：11828884
> 
> 赞同：0
> 
> 时间：2012-08-06T13:05:08.593
> 
> 标签：c#, php, javascript, c++, bots

我有一个问题需要解决。

我创建 Youtube 视频，每次在上传页面上我都必须：

*   从每个标题中删除“.mp4”扩展名
*   更改我的视频类别
*   在所有视频中添加相同的描述
*   在所有视频中放置相同的关键字

所以，我首先想用 C# 创建这个机器人，但我必须学习 C#（我已经知道 C++，但同样，我必须学习 C# 中的所有库）。

我想知道这个机器人是否可以用 Javascript（因为我已经知道 Javascript）或我知道的任何其他语言（PHP、C++）创建？

也许我可以创建一个 Mozilla Firefox 扩展，用 Javascript 为我做这件事？正如我所说，有人能告诉我我应该用什么编程（或脚本）语言来编写这个机器人吗？

因此，正如我所说，我将手动登录，机器人只需要访问我在 Mozilla Firefox 中已经打开的页面并更改这四件事。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:17:27.183

我肯定会在这个上使用 javascript。看看[GreaseMonkey](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/) - FireFox 的脚本插件，它允许您将自定义 javascript 代码添加到页面。

当您调用此脚本时，我将创建一个脚本来执行您所需的所有更改。

或者，如果所有这些内容都在同一个页面上，您可以使用简单的小[书签](http://www.bookmarklets.com/about/)来调用 javascript 并为您更改这些内容。我对 youtube 上的视频上传不太熟悉，因此无法帮助您，但您提到您熟悉 javascript，因此查找具有值的输入字段并更改它们应该不会太麻烦。

# lucene - 增强对源文档属性的查询

> ID：11828888
> 
> 赞同：0
> 
> 时间：2012-08-06T13:05:19.437
> 
> 标签：lucene, elasticsearch

我们通过 .Net [Nest客户端使用](https://github.com/Mpdreamz/NEST)[ES](http://www.elasticsearch.org)。

索引的索引文档如下所示：

```
 [ElasticType(
        Name = "tag",
        DateDetection = true,
        NumericDetection = true,
        SearchAnalyzer = "standard",
        IndexAnalyzer = "standard"
    )]
    public class TagIndexDto : AbstractIndexDto
    {

        [ElasticProperty(Index = FieldIndexOption.analyzed, OmitNorms = true)]
        public string Name { get; set; }
        [ElasticProperty(Index = FieldIndexOption.analyzed, OmitNorms = true)]
        public string Description { get; set; }
        [ElasticProperty(AddSortField = true)]
        public int FollowerCount { get; set; }
        [ElasticProperty(AddSortField = true)]
        public int ProductCount { get; set; }
        [ElasticProperty(AddSortField = true)]
        public int CatalogCount { get; set; }
    } 
```

我想要做的是对 3 个计数（最后 3 个字段）的值进行特定提升。并且 boost 应该是可配置的，这意味着 boost 的确切值在索引时是未知的。这实际上是由 lucene 支持的吗？ES？或者我正在寻找一个不存在的功能？

谢谢罗马

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:22:17.240

在 elasticsearch 中，可以使用[自定义过滤器分数查询](http://www.elasticsearch.org/guide/reference/query-dsl/custom-filters-score-query.html)（更快但不太灵活）或[自定义分数查询](http://www.elasticsearch.org/guide/reference/query-dsl/custom-score-query.html)（更慢但更灵活）来完成

# javascript - 可以反汇编html吗？

> ID：11828891
> 
> 赞同：0
> 
> 时间：2012-08-06T13:05:22.867
> 
> 标签：javascript, html

出于测试目的，我用一个按钮创建了简单的 html。当您单击按钮时，它会显示您的警报。我尝试使用 olly、ida 和 cheatengine 将按钮文本值更改为其他值，但它不起作用。为什么？

是否可以更改 html 变量的值，是否可以像 iexplorer 一样反汇编程序？

我工作的简单 html 如下所示：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function myFunction()
{
alert("I am an alert box!");
}
</script>
</head>
<body>
<input type="button" onclick="myFunction()" value="Show alert box" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:07:17.283

如果您使用的是 Internet Explorer 9，请按*F12*启用[开发者工具](http://msdn.microsoft.com/en-us/library/ie/gg589507%28v=vs.85%29.aspx)。这将向您显示 HTML 的结构，然后您可以对其进行更改。这些也将允许您（通过“*脚本*”选项卡）设置断点并调试您的 JavaScript。从这里您可以更改变量值。

[对于旧版本的 IE，开发者工具栏](http://www.microsoft.com/en-us/download/details.aspx?id=18359)提供了类似的功能（尽管不包括 JavaScript 调试）。

如果您使用的是 FireFox，请尝试[FireBug](http://getfirebug.com/)。

如果您使用的是 Google Chrome，请按*F12*以显示开发者工具。

顺便说一句，您的术语不正确：HTML 不会被编译（或组装），因此反汇编它的想法是无效的。您可能正在寻找的词是*debug*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:09:57.183

如果您使用的是 Internet Explorer，请不要按 F12 来启用开发人员工具。这只会严重地向您展示 HTML 的结构，然后您很难更改它。

相反，请确保您使用的是 FireFox，然后安装扩展[FireBug](http://getfirebug.com/)，这将使您能够在浏览器中实时查看和编辑 HTML/CSS 和 Javascript（以及更多）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:12:49.107

这就是你想要的吗？

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function olly()
{
alert("Olly");
}

function cheatengine()
{
alert("cheatengine");
}
</script>
</head>
<body>
<input type="button" onclick="olly()" value="olly" />
<input type="button" onclick="cheatengine()" value="cheatengine" />

</body>
</html> 
```

# javascript - 活动事件上的 HTML 元素

> ID：11828894
> 
> 赞同：2
> 
> 时间：2012-08-06T13:05:24.420
> 
> 标签：javascript, performance, mouseevent, dom-events, opera

我想在不使用任何 jQuery 函数（纯 Javascript）的情况下测量 mousedown 事件和应用 CSS 活动属性之间的时间。我发现有 onactive 事件，但 Opera（我要在其上进行此测量的浏览器）不支持它。实际上只有 IE 支持这个 onactive 事件（不确定是哪个版本）。

```
htmlElement.addEventListener('mousedown', function(){var timestamp = new Date().getTime() / 1000; console.warn('mouse down ', timestamp)})

htmlElement.addEventListener('DOMAttrModified', function(){var timestamp = new Date().getTime() / 1000; console.info('highlighted ', timestamp)}) 
```

当按钮变为活动状态时，不会报告此“DOMAttrModified”事件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T13:12:22.837

`:active`是 CSS 伪类，而不是 DOM 属性或属性。`:active`由于 GUI 和代码执行的单线程性质，测量鼠标按下和设置伪类之间的时间是不可能或不可行的。基本上，当鼠标事件触发时，CSS 和 GUI 更新已经排队，并且在`:active`应用时不会触发任何事件。

不过，我想不出任何正当理由担心这个过程需要多长时间，你最好忘记它并继续前进。

# c# - Delphi MatchesMask 函数的 C# 等效项是什么？

> ID：11828908
> 
> 赞同：1
> 
> 时间：2012-08-06T13:05:55.603
> 
> 标签：c#, delphi, c#-4.0

[`MatchesMask`](http://docwiki.embarcadero.com/Libraries/XE7/en/System.Masks.MatchesMask)C# .NET中的 Delphi 函数的等价物是什么？我该如何使用它，我需要包含哪个命名空间引用？

[`MatchesMask`](http://docwiki.embarcadero.com/Libraries/XE7/en/System.Masks.MatchesMask)帮助中描述的功能：

> 指示文件名是否符合过滤器字符串指定的格式。
> 
> 调用 MatchesMask 以检查 Filename 参数，使用 Mask 参数描述有效值。有效掩码由文字字符、集合和通配符组成。
> 
> 每个文字字符必须匹配字符串中的单个字符。与文字字符的比较不区分大小写。
> 
> 每个集合都以一个左括号 ([) 开始，并以一个右括号 (]) 结束。括号之间是集合的元素。每个元素都是文字字符或范围。范围由初始值、破折号 (-) 和最终值指定。不要使用空格或逗号来分隔集合的元素。集合必须匹配字符串中的单个字符。如果字符与集合中的文字字符之一相同，或者如果它位于集合中的某个范围内，则该字符与集合匹配。如果字符与初始值、最终值匹配或介于这两个值之间，则该字符在范围内。所有比较都不区分大小写。如果集合的左括号后的第一个字符是感叹号 (!)，则该集合匹配任何不在该集合中的字符。
> 
> 通配符是星号 (*) 或问号 (?)。星号匹配任意数量的字符。问号匹配单个任意字符。
> 
> 如果字符串与掩码匹配，则 MatchesMask 返回 true。如果字符串与掩码不匹配，则 MatchesMask 返回 false。如果掩码在语法上无效，则 MatchesMask 会引发异常。
> 
> 注意：Filename 参数不必是文件名。MatchesMask 可用于根据任何语法正确的掩码检查字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T13:09:41.630

现代编程语言提供了允许进行模式匹配的正则表达式引擎。

C# 提供了 Regex 类，可以通过以下方式使用：

```
using System;
using System.Text.RegularExpressions;

class Program
{
    static void Main()
    {
        // First we see the input string.
        string input = "/content/alternate-1.aspx";

        // Here we call Regex.Match.
        Match match = Regex.Match(input, @"content/([A-Za-z0-9\-]+)\.aspx$",
            RegexOptions.IgnoreCase);

        // Here we check the Match instance.
        if (match.Success)
        {
            // Finally, we get the Group value and display it.
            string key = match.Groups[1].Value;
            Console.WriteLine(key);
        }
    }
} 
```

您可以参考以下链接进行快速参考

*   [http://www.dotnetperls.com/regex-match](http://www.dotnetperls.com/regex-match)（上面的例子来自这个网站）
*   [http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet](http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet)（快速备忘单 - 非常方便）
*   [http://msdn.microsoft.com/en-us/library/ms228595(v=vs.80).aspx（MS](http://msdn.microsoft.com/en-us/library/ms228595(v=vs.80).aspx)编程参考）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:08:56.483

您可以使用`System.Text.RegularExpressions`将数据与正则表达式进行比较来实现掩码

# jsp - 如何在没有四舍五入的情况下将表达式语言 (EL) 的 double 或 float 值转换为 int？

> ID：11828910
> 
> 赞同：5
> 
> 时间：2012-08-06T13:06:09.537
> 
> 标签：jsp, jakarta-ee, expression, el, jsp-tags

我在 JSP 中使用表达式语言 (EL)。

```
<c:set var="noOfPages" value="${numItems/itemsPerPage}" />

<fmt:formatNumber var="noOfPagesRounded" value="${noOfPages}" maxFractionDigits="0" />

<c:if  test="${(numItems % itemsPerPage) > 0}">
    <c:set var="noOfPages" value="${noOfPagesRounded + 1}"/>
</c:if > 
```

如您所见，我正在计算不。显示编号所需的页面数`x`。每页的结果。

这并非一直有效，因为在第 2 行，即`formatNumber`标签是对我的除法结果的四舍五入，我不想四舍五入。

即对于 73 条记录，每页 20 条需要 4 页，但我得到了结果 5，因为在第 2 行它是结果 3.65 到 4 的舍入，但我想要`noOfPagesRounded=3`。

我应该如何在不四舍五入的情况下转换`float`或`double`估值？`int`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T14:07:05.707

如果您希望将 noOfPagesRounded 设置为 floor(noOfPages) 则试试这个（EL 中没有 floor 函数）：

```
<fmt:formatNumber var="noOfPagesFloored" value="${noOfPages-(noOfPages%1)}"  maxFractionDigits="0" /> 
```

# apache-flex - Flex-获取列表中的第一个可见元素

> ID：11828927
> 
> 赞同：2
> 
> 时间：2012-08-06T13:06:56.180
> 
> 标签：apache-flex, scroll

我在 Spark 中有一个显示的列表。当我们滚动列表时，有没有办法知道滚动后当前可见元素中的第一个元素？谢谢。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T13:17:37.903

List 类封装了一个[DataGroup](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/DataGroup.html)。
此 DataGroup 有一个名为[getItemIndicesInView()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/DataGroup.html#getItemIndicesInView%28%29)的方法。

所以要找到第一个可见的项目：

```
var firstVisibleIndex:int = myList.dataGroup.getItemIndicesInView()[0];
trace(myDataProvider.getItemAt(firstVisibleIndex)); 
```

# c# - 如何在datagridview的最后一行获取一些单元格？

> ID：11828928
> 
> 赞同：0
> 
> 时间：2012-08-06T13:06:57.040
> 
> 标签：c#, datagridview, rows, cells

我有如下表
![在此处输入图像描述](../Images/c9b0dca98e9c509aec9b003a7fa90482.png)

这些是我正在尝试做的代码，但没有希望，我想获得那个`CAid014`价值

```
string splitter = dataGridView1.Rows[dataGridView1.RowCount].Cells[0].ToString();
MessageBox.Show(splitter); // to print what splitter got 
```

* * *

我正在使用 datagridview1.rowcount 所以 datagridview1.rows 将获得最后一行。并且单元格[0] 将获得行的 0 索引并且它得到了错误。

我怎样才能得到那个`CAid`细胞？

* * *

解决了：我想念这样的价值

```
 string splitter = dataGridView1.Rows[dataGridView1.RowCount].Cells[0].value.ToString(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T13:10:56.237

```
dataGridView1.Rows[dataGridView1.RowCount - 1].Cells[0].Value.ToString(); 
```

`.Rows`是一个集合，也像数组一样工作，索引编号`arrays`从 0 到`N-1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:32:03.433

一种更简单的方法是：-

```
string splitter = (String)dataGridView1[ 0,dataGridView1.RowCount - 1].Value;

MessageBox.Show(splitter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:28:20.560

`Row Collection`在`datagridview`基于 0 的索引中。所以我同意`dataGridView1.Rows[dataGridView1.RowCount - 1].Cells[0].ToString();`

# apache - 如何使用 .htaccess 将一个目录重定向到另一个目录？

> ID：11828933
> 
> 赞同：0
> 
> 时间：2012-08-06T13:07:33.367
> 
> 标签：apache, redirect, directory

```
/var/
  /www/
    /test/ 
```

那是我的目录结构。我尝试在我的`.htaccess`（/var/www 内部）中放置各种字符串以尝试将访问者重定向到`/test/`，但是要么我收到 500 错误，要么它一直在尝试访问`http://mysite/testtesttesttesttest ...`

谁能告诉我正确的字符串？这是我尝试过的。

```
Redirect . test
Redirect ./ test
Redirect ./ /test
Redirect / ./test 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:35:20.290

尝试将其添加到文档根目录 ( `/var/www`) 中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/test
RewriteRule ^(.*)$ /test/$1 [L] 
```

`R`如果要重定向浏览器而不是在服务器上进行内部重写，请在括号中添加一个标志：`[R=301,L]`或者只是`[R,L]`（对于 302）。

# python - specific implementation of dictionary

> ID：11828934
> 
> 赞同：1
> 
> 时间：2012-08-06T13:07:35.773
> 
> 标签：python, python-3.x, python-2.7

I don't know if the title is apt, but for the time being this is my question:

I have entries in text file(which has 2 columns) in the following format:

```
Name     Time  

Santa    1.2
Jim      2.5
Santa    2.7
Santa    2.9 
```

I should form a dictionary which has Name as the key, (Time, Count) as the value. In the above names, Santa repeated 3 times and the time difference of consecutive occurances is less than 2 seconds. So the Count value associated with that entry is 3\. If such case occurs, that entry should be deleted from dictionary. Otherwise, count value should be zero (If the 2 occurances of Santa happened 2 seconds apart and 3rd occurance happened after 2 seconds, then count is reinitialized to zero for that entry).

Can this be implemented like this: Make the (Time, Count) as the list and make that list as the values to the keys? I am a newbie to Python, please excuse any mistakes.

The pseudocode is something like this:

```
Read line in the file:   
    if Santa is in dictionary:    
        time_difference = time from column 2 of the line - dictionary[Santa]  
        if(time_difference < 2):  
            Replace the old occurance with new one along with time  
            # If the previous count value associated with Santa = 1, add 1 to make it 2  
            Make the Count associated with Santa = count+1    
            if(count associated with Santa = 3):  
                delete the Santa entry    
        else:  
            Make count associated with Santa = 1      
    else:  
        Add Santa to dictionary along with its time and make associated count = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:48:29.307

**EDIT:** i just noticed you wanted to restart the count timer after 2 seconds of inactivity, i will post that fix in a moment.

**EDIT2:** okay, i added it. should be good to go!

not the cleanest code, but it gets the job done.

```
class dictholder():
    def __init__(self):
        self.dict = {}

    def add(self, name, time):
        if name in self.dict:
            if (abs(time) - abs(self.dict[name][0]) < 2):
                self.dict[name][1] += 1
                self.dict[name][0] = time
                if self.dict[name][1] == 3:
                    del self.dict[name]
        else:
            self.dict[name] = [time, 1]
        for item in self.dict:
            if (abs(time) - abs(self.dict[item][0]) > 2):
                self.dict[item][1] = 1

    def get(self):
        return self.dict 
```

example:

```
d = dictholder()
d.add("Santa", 1.2)
d.add("Jim", 2.5)
d.add("Santa", 2.7)
d.add("Santa", 2.9)

print d.get()

>>> 
{'Jim': [2.5, 1]}
>>> 
```

# facebook - 入住前如何获取place_id？

> ID：11828940
> 
> 赞同：4
> 
> 时间：2012-08-06T13:08:01.107
> 
> 标签：facebook, facebook-graph-api, checkin

我的应用程序允许用户使用 lat、lon 和地名登录 Facebook。但我不知道如何处理“地点”参数。

有没有办法获得或创建一个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T11:44:14.693

**每个可登记地点都必须有一个有效的地点 Facebook 页面。**

该`place`参数采用`page_id`Place Facebook Page。

例如，`page_id`Place Facebook Page 的 104999729569954 [http://www.facebook.com/pages/Nanyang-Polytechnic/104999729569954](http://www.facebook.com/pages/Nanyang-Polytechnic/104999729569954)

* * *

**如果您的应用程序让您的用户根据他们当前的位置签到**

1）使用外部地图服务，如谷歌地图的地理位置来获取用户当前位置的坐标（纬度和经度）。

***从 Google Map 返回的坐标集与 Facebook 自己的坐标集不同。***

2) 要克服这个问题，请执行 FQL 查询以找到 Facebook 坐标与 Google Map 坐标的最接近匹配。

`SELECT page_id,latitude,longitude FROM place WHERE distance(latitude, longitude, "LAT_HERE", "LON_HERE") < 250`

`250`是指它将在其中搜索的半径（m），它可以上升到`50000`。

3) 现在你有`page_id`,`latitude`和`longitude`。赋值`page_id`给`place`参数。赋值`latitude`并`longitude`进入`coordinates`参数。然后，您将能够发布签入。

您可以参考我在此处发布的发布签入示例。[Facebook - 使用 PHP SDK/JavaScript SDK 发布签到](https://stackoverflow.com/questions/11072933/facebook-publish-checkins-using-php-sdk-javascript-sdk/11101740#11101740)

* * *

**如果您的应用程序让您的用户根据从地名列表或图像库**（在游戏或其他东西中）中的选择进行签到

您只需要找到`page_id`每个地方的名称并将它们绑定到各自的地名或图像。

* * *

**文档**

页面 FQL - [http://developers.facebook.com/docs/reference/fql/page/](http://developers.facebook.com/docs/reference/fql/page/)

签入 API - [http://developers.facebook.com/docs/reference/api/user/#checkins](http://developers.facebook.com/docs/reference/api/user/#checkins)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T08:03:33.103

也许这就是你想要的。打开图形资源管理器只需将 URL 替换为任何 facebook 页面 url

[fql?q=SELECT id FROM object_url WHERE url="https://www.facebook.com/LegendCinema"](https://developers.facebook.com/tools/explorer)

# c++ - 在调用基类构造函数之前修改构造函数参数值

> ID：11828943
> 
> 赞同：4
> 
> 时间：2012-08-06T13:08:06.133
> 
> 标签：c++

我有以下类层次结构：

```
class Base { // This class cannot be modified
public:
  Base(int a, int b, int c) {
     if ( a == 100 && b == 200 && c < 100  ) // whatever condition
       throw "Error!";
  }
};

class Derived : public Base { // this class can be modified
public:
   Derived(int a, int b, int c) : Base(a, b, c) {}
}; 
```

类Derived在代码中很多地方都用到了，所以不能用某种工厂函数代替。

现在的问题是，是否有一些构造可以让我在调用 Base 构造函数之前修复 a、b、c 值？

我知道我可以使用以下功能：

```
 Derived(int a, int b, int c) : Base(FixA(a), FixB(b), FixC(c)) {}

   int FixA(int a) { /*fix a value*/ return a; }
   int FixB(int b) { /*fix b value*/ return b; }
   int FixC(int c) { /*fix c value*/ return c; } 
```

但它不允许我设置正确的值，以防 abc 值依赖于上面的基类 c-tor 示例。

我正在考虑将其扩展到：

```
 Derived(int a, int b, int c) : Base(FixA(a,b,c), FixB(a,b,c), FixC(a,b,c)) {}

   int FixA(int a, int& b, int& c) { /*fix a b c values*/ return a; }
   int FixB(int& a, int b, int& c) { /*fix a b c values*/ return b; }
   int FixC(int& a, int& b, int c) { /*fix a b c values*/ return c; } 
```

我想还应该有某种标志表明修复已经完成。我不确定这是否真的是正确的 C++。

我知道最好的解决方案是实际捕获异常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T13:38:39.957

考虑在`Derived`和之间插入一个类`Base`：

```
class Derived: public UnpackToBase {
public:
    Derived(int a, int b, int c): UnpackToBase(FixParameters(a, b, c))

class UnpackToBase: public Base {
public:
    UnpackToBase(FixParameters params): Base(params.a, params.b, params.c)

struct FixParameters {
    int a, b, c;
    FixParameters(int a, int b, int c): a(a), b(b), c(c) {
         // do stuff
    } 
```

在 C++11 中，您可以使用以下委托*构造函数*：`Derived`

```
class Derived: public Base {
public:
    Derived(int a, int b, int c): Derived(FixParameters(a, b, c)) { }
    Derived(FixParameters params): Base(params.a, params.b, params.c) { } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:42:53.710

您可以使用单例模式来解决此问题。请看下面的代码。这里构造初始化列表的初始化顺序无关紧要。但是，我怀疑这是否可以称为优雅。

```
class Base 
{ 
    // This class cannot be modified 
public:   Base(int a, int b, int c) 
          {      
              if ( a == 100 && b == 200 && c < 100  ) // whatever condition
                  throw "Error!";   
          } 
};  

class Validator
{
public:

    static Validator& instance(int a_in, int b_in, int c_in)
    {
        static Validator v(a_in,b_in,c_in);

        return v;
    }

    int& a(){ return m_a;}
    int& b(){ return m_b;}
    int& c(){ return m_c;}

private:

    Validator(int a_in, int b_in, int c_in) : m_a(a_in), m_b(b_in), m_c(c_in)
    {
        //  perform validation and modify the members
        //  Example validation
        if(m_a > 0 && m_b > 0)
        {
            m_c = 0;
        }
    }

    int m_a;
    int m_b;
    int m_c;
};

class Derived : public Base 
{ 
    // this class can be modified 
public:    
    Derived(int a, int b, int c) : Base(Validator::instance(a, b, c).a(), Validator::instance(a, b, c).b(), Validator::instance(a, b, c).c())
    {} 
};

int _tmain(int argc, _TCHAR* argv[])
{
    Derived d(1,2,3);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:18:06.717

看起来你对*破解*你必须做的事情没有问题，所以为什么不使用*好的'ol**宏***..

```
#define FIX_ME(x) //do something
Derived(int a, int b, int c) : Base(FIX_ME(a), FIX_ME(b), FIX_ME(c)) {} 
```

# android - 如何在安卓智能手机上测试应用程序的存在

> ID：11828945
> 
> 赞同：-1
> 
> 时间：2012-08-06T13:08:09.090
> 
> 标签：android

> **可能重复：**
> [Android - 检查是否存在其他应用](https://stackoverflow.com/questions/3694267/android-check-for-presence-of-another-app)

如何检查智能手机上是否安装了应用程序？对于我的应用程序，我需要知道智能手机上是否安装了 Facebook 和 Twitter。看看我是否可以使用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:09:51.460

用这个

```
PackageManager pm = getPackageManager();
boolean s = false;
try{ 
     pm.getPackageInfo("app package",0); 
     s = true; 
} catch (Exception e ) { s= false; } 
```

您可以在 google play 网站上找到应用程序包（在页面 url 中）

# php - 未在related_entries 标记内解析全局变量

> ID：11828946
> 
> 赞同：0
> 
> 时间：2012-08-06T13:08:20.540
> 
> 标签：php, templates, content-management-system, expressionengine

我有两个相关的频道。该网站是多语言的，`{lang}`全局变量包含语言（en / nl / de / fr）。

使用该`{{lang}-something}`方法适用于整个站点，但不适用于**相关条目**标签。

的输出`{{lang}-something}` **应该**是内容，但实际上**是** `{en-something}`. 所以语言被插入，但之后没有被解析。

当我只是`{en-something}`在模板中使用（没有动态设置语言）时，我确实得到了内容。

模板片段：

```
{related_entries id="product_usp_1"}
    <div class="ups_item">
        <h3>{{lang}-usp-title}</h3>
        <p>{{lang}-usp-content}</p>
    </div>
{/related_entries} 
```

有什么建议么？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T18:26:02.213

好吧，它看起来像是`{lang}`在这个过程中很晚才被解析——请参阅[Low](http://loweblog.com/downloads/ee-parse-order.pdf)在这方面的出色帮助。这表明您可能会乐于将示例的内部部分移动到嵌入式模板（我非常不喜欢这种 hack，即使它经常被部署！）。所以你原来的位变成：

```
{related_entries id="product_usp_1"}
  <div class="ups_item">
    {embed:lang_template}
  </div>
{/related_entries} 
```

并且嵌入的模板（`lang_template`上面）变为：

```
<h3>{{lang}-usp-title}</h3>
<p>{{lang}-usp-content}</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:12:43.897

我不完全确定为什么，但这有效：

```
<h3> {<?php echo '{language}';?>-usp-title}   </h3>
<p>  {<?php echo '{language}';?>-usp-content} </p> 
```

此代码在`related_entries`标签内，**而不是**嵌入。

PHP解析阶段：**输入**

# python - 如何在不使用终端或 gui 的情况下运行 python 文件？

> ID：11828947
> 
> 赞同：0
> 
> 时间：2012-08-06T13:08:21.300
> 
> 标签：python, py2exe, file-extension

你好，我已经启动了 python，我想知道如何在不使用终端的情况下执行 python 文件。就像大多数使用 (exe) 文件扩展名但对于 py 文件的游戏一样。我尝试过 py2exe，但它没有显示任何内容屏幕。我试图使 py 文件变得可执行但没有运气。请告诉我如何执行以及是否有不使用特定程序的选项。

我的系统是：Windows 7 / Ubuntu 12.04

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:11:04.453

在这里，看看我的博客，它解释了你是如何在 Ubuntu 中做到这一点的。

[http://insidepython.wordpress.com/2012/08/04/hello-world-or-how-or-say-ni/](http://insidepython.wordpress.com/2012/08/04/hello-world-or-how-or-say-ni/)

但基本上：

将此行添加到脚本的开头

```
#!<location of your python interpreter> 
```

要找出你的 python 解释器的安装位置：

$ sudo 查找 / -name "python"

执行前面的操作后，你应该得到你的 python 解释器的位置，然后你需要设置环境变量，在我的例子中 python 可执行文件位于 /usr/bin/python

$ export PATH="$PATH:/usr/bin/python"

然后您需要将文件属性设置为可执行文件，您可以在此处查看更多 Unix/Linux 中的文件属性[http://en.wikipedia.org/wiki/Chmod](http://en.wikipedia.org/wiki/Chmod)

$ chmod +x 灌木丛.py

最后执行您的应用程序

$ ./shrubbery.py

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T02:25:08.527

对于 Windows，还有一个名为 GUI2Exe 的 Python 脚本，我过去曾使用它来创建 Python 脚本的可分发版本作为应用程序。它可以在 [http://code.google.com/p/gui2exe/](http://code.google.com/p/gui2exe/)上找到，在我看来，使用起来非常简单。教程之类的东西在 Google 上很容易找到。

它使用 py2exe（或任何其他 Python 编译器库）来组合脚本，但它不需要任何语法上烦人的 setup.py 文件。

# macos - 来自 Mac App 的 Apple TV 上的 AirPlay 元数据

> ID：11828948
> 
> 赞同：1
> 
> 时间：2012-08-06T13:08:26.290
> 
> 标签：macos, mirroring, airplay

我正在使用 MPNowPlayingInfoCenter 类在 iOS 应用程序中设置歌曲的元数据。如何在 OS X 应用程序中设置它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T17:14:59.350

*   在 Mountain Lion (OS X 10.8) 之前，AirPlay 没有官方的 3rd 方支持，尽管 iTunes 已经集成了很长时间。

*   Mountain Lion 添加了一个控件，允许用户选择音频输出。但是，这发生在您的应用程序之外，并且仍然没有公共 API 来控制 AirPlay。

AirPlay 有多个 3rd 方实现。最著名的是[AirFoil](http://rogueamoeba.com/airfoil/)。他们有一个[公共 API](http://weblog.rogueamoeba.com/2011/04/06/airfoil-integration/)来显示元数据。但是，它依赖于 AppleScript，它不适用于新的 App Store 沙盒。

这是大局。如果您需要澄清，请随时询问更多信息。

# facebook - Facebook 如何跟踪我网站上的点赞或其他活动？

> ID：11828949
> 
> 赞同：0
> 
> 时间：2012-08-06T13:08:28.287
> 
> 标签：facebook, facebook-graph-api

我正在使用 Addthis.com 的服务将 facebook 的“喜欢”按钮添加到我的网站上。现在我想手动向我的网站添加一些 facebook 社交插件：http: [//developers.facebook.com/docs/plugins/](http://developers.facebook.com/docs/plugins/)

如我所见，有些插件需要输入“app_id”，但我没有为 Addthis.com 的按钮指定我的“app_id”，所以我想问一下 facebook 如何跟踪我网站上的那些“喜欢”或其他活动？ ?

例如，如果用户在我的网站上单击 Addthis.com 按钮上的“赞”，该用户会出现在我手动添加到我的网站的“赞框”和“Facepile”插件中吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:15:37.993

**添加这个**

使用`AddThis`时，应用程序本身会获取当前页面`liked`或指定的 Facebook 页面。当您提到`app_id`for`AddThis`时，是他们自己的 id 允许您登录[http://www.addthis.com](http://www.addthis.com)并访问他们的自定义统计页面。

**Facebook**

使用`Facebook`like按钮或其他插件时，`Facebook`记录某人按下按钮的次数。它还包括`shares`和`reposts`在这个数字中。`Facebook API`如果需要，您可以使用 分隔数字（无论是还是`like`）`share`。

**脸书 API**

为了访问您记录的信息，`Facebook`您必须向他们注册和应用程序，这将为您提供一个 Facebook `app_id`。然后可以在他们的任何插件中使用它。

**总体**

由于`AddThis`应用程序将信息传输到`Facebook`，`Facebook`将在其任何插件中显示您的喜欢和分享计数。

# javascript - 挣扎于 rails3-jquery-autocomplete：不知道如何绑定 railsAutocomplete.select

> ID：11828955
> 
> 赞同：0
> 
> 时间：2012-08-06T13:08:44.663
> 
> 标签：javascript, ruby-on-rails-3, jquery-autocomplete

我有以下非常直接的表格。

```
<%= form_for(@position) do |f| %>
  <div class="field">
    <%= f.label :name %><br />
    <%= f.autocomplete_field :name, autocomplete_position_name_positions_path %>
  </div>
<% end %>

<script type="text/javascript" charset="utf-8">
  $('#name').bind('railsAutocomplete.select', function(event, data){
    /* Do something here */
    alert(data.item.id);
  });
</script> 
```

自动完成所有工作都很好，但`alert(..)`没有调用该方法。我对所有这些 JavaScript 东西都很陌生，所以如果有人能指出我正确的方向，我将非常感激。编译后的源代码如下所示：

```
<form accept-charset="UTF-8" action="/positions" class="new_position" id="new_position" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="Sw+3CMXWmEPPYCNeCsAfNRX2DupZzZglMNSAnC4yDV4=" /></div>
  <div class="field">
    <label for="position_name">Name</label><br />
    <input data-autocomplete="/positions/autocomplete_position_name" id="position_name" name="position[name]" size="30" type="text" />
  </div>
</form>
<script type="text/javascript" charset="utf-8">
  $('#name').bind('railsAutocomplete.select', function(event, data){
    /* Do something here */
    alert(data.item.id);
  });
</script> 
```

非常感谢，伙计们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:51:27.047

您的输入是否有 id "name"？似乎它的 id 是“position_name”，而不仅仅是“name”。尝试更改`$("#name")`为`$("#position_name")`.

# c# - White UI 自动化库如何使用 Castle DynamicProxy？

> ID：11828965
> 
> 赞同：2
> 
> 时间：2012-08-06T13:09:24.233
> 
> 标签：c#, .net, user-interface, castle-dynamicproxy

[White](http://white.codeplex.com/) UI 自动化库广泛使用[Castle Project](http://www.castleproject.org)的 DynamicProxy 2。据我了解，DynamicProxy 用于“包装”MS UI 自动化对象，并用于在其父窗口中检索对象。

我需要了解是否需要 DynamicProxy 以及是否可以用更快的东西替换它，即静态构建的类而不是运行时生成的代理类，这在 IMO 是不必要的减速。

DynamicProxy 在 White 库中到底在做什么，可以替换吗？任何提示或指针表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:24:49.197

我决定不使用 White（而是直接使用 MS UI 自动化），但我也在代码中使用 Castle Dynamic Proxy。这是定位使用位置的一个不错的开始：

```
C:\Users\xxxx\Desktop\petmongrels-white-54723f8>findstr /s  /c:"ProxyCreator" /c:"CreateClassProxy" /c:"IInterceptor" *.cs
Components\Core\Source\CustomCommands\CustomCommandInterceptor.cs:    public class   CustomCommandInterceptor : IInterceptor
Components\Core\Source\Interceptors\CoreInterceptor.cs:    public class CoreInterceptor : IInterceptor
Components\Core\Source\UIItems\UIItemContainer.cs:            var interceptors = (IInterceptor[]) interceptorField.GetValue(customUIItem);
Components\Repository\Source\Interceptors\ScreenObjectInterceptor.cs:    public class  ScreenObjectInterceptor : IInterceptor
Components\Repository\Source\Interceptors\UIItemInterceptor.cs:    public class UIItemInterceptor : IInterceptor
Components\Repository\Source\Interceptors\WindowInterceptor.cs:    public class WindowInterceptor : IInterceptor
Components\Repository\Source\Services\ServiceInterceptor.cs:    public class ServiceInterceptor : IInterceptor 
```

您可以在以下位置获取源代码： [https ://github.com/petmongrels/white](https://github.com/petmongrels/white)

（我的有点过时了）

# algorithm - 绳索数据结构，维基百科上的冗余还是我遗漏了什么？

> ID：11828969
> 
> 赞同：2
> 
> 时间：2012-08-06T13:09:48.527
> 
> 标签：algorithm, data-structures, redundancy, recursive-datastructures

为什么会有[重复的节点](http://en.wikipedia.org/wiki/File%3aSearch_rope.jpg)`9`，`1`和`6`在 wikipedia article on [rod](http://en.wikipedia.org/wiki/Rope_%28data_structure%29)之类的？

我是否遗漏了什么，或者这些节点是完全冗余的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T22:10:31.557

它们（具有单个孩子的非叶节点）似乎完全没有意义。[boehm 等人的论文链接中](http://citeseer.ist.psu.edu/viewdoc/download?doi=10.1.1.14.9450&rep=rep1&type=pdf)似乎没有任何等效的内容（他们使用“正常”平衡树）。

他们对我毫无意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T19:07:50.973

来自文章：

`Each node has a "weight" equal to the length of its string plus the sum of all the weights in its left subtree.`

这些数字似乎代表了节点的权重，基于其子节点的大小。因此，具有值的两个节点`6`不必具有相同的值。有一个`Hello_`重量为 6 的和一个`_Simon`重量为 6 的。

**编辑**

对于非叶子值，重复项似乎在那里使叶子处于相同的深度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-30T03:58:33.720

这些节点可能在删除后出现。最终你会想要重新平衡，所以每个节点都有两个子节点（或叶子），并且每个分支的深度都是相同的。

# java - Android二维Array和arraylist最佳实践？

> ID：11828977
> 
> 赞同：0
> 
> 时间：2012-08-06T13:10:10.517
> 
> 标签：java, android, arrays, arraylist

我想知道是否有人可以回答我相当愚蠢的问题，即在编程时使用哪个更好的做法。

我知道制作一个二维数组，我可以使用：

```
ArrayList<ArrayList<String>> myArray = new ArrayList<ArrayList<String>>(); 
```

或者

```
String[][] myArray2; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T13:15:15.873

以您展示的方式使用 ArrayList 是完全可以的。但是，仅当您确实需要数组在运行时增长和缩小时才使用数组列表。如果您不确定是否需要扩大或缩小数组，请继续使用 ArrayList 开始。如果你不需要数组是动态的，你应该使用 String[][]。但是，String[][] 在分配后无法增大或缩小大小。

如果您的应用程序是性能密集型的，我强烈建议您尝试编写使用 String[][] 的应用程序。更重要的是，尽量避免大量的字符串操作，因为这会导致大量的分配（从而导致垃圾收集）。如果您可以改用 CharBuffer[][]，您将能够避免对象分配。同样，如果您正在编写一个简单的应用程序，并且您的应用程序分配（并因此最终导致垃圾收集）并不重要，那么使用 ArrayList 会使事情更容易处理。

由于您认为自己是菜鸟，因此您可能希望从 ArrayList 开始，因为它更容易处理。

此外，这并不是一个真正的 Android 问题，而更像是一个 Java 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:16:23.720

由于列表可以增加大小，因此如果您不确定二维数据结构的大小，它们是最佳解决方案。如果您知道结构有多大，那么请改用普通数组，因此 List 对象会导致的少量开销不会成为问题。

# performance - 针对 DB2 表的性能事务范围

> ID：11828978
> 
> 赞同：1
> 
> 时间：2012-08-06T13:10:13.673
> 
> 标签：performance, entity-framework, db2, transactionscope, mstdc

我们正在尝试追查性能问题的原因。

我们有一个单行表，其中包含一个主键和一个计数器。在事务中，我们读取计数器的值，将值加一并保存新值。

读取和更新是使用实体框架完成的，我们使用可序列化的事务范围，我们需要确保只读取一次计数器值。

大多数情况下这需要 0.1 秒，有时则需要超过 1 秒。我们无法找到任何模式来解释为什么会发生这种情况。

在使用事务范围时，是否有其他人经历过可变性能？放弃使用事务范围并直接在连接上设置事务是否有帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-14T16:36:42.493

记得很久以前评论过这个问题，但是最近我店里的一些开发者开始使用TransactionScope，也遇到了性能问题。在尝试[搜索某些信息](https://www.google.com/search?q=db2+beginchain+transactionscope)时，这在 Google 搜索结果中的排名很高。

我们遇到的问题是，显然使用[BeginChain链接命令（INSERT 等）在使用](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.swg.im.dbclient.adonet.ref.doc/doc/DB2ConnectionClassBeginChainMethod.html)[TransactionScope](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope%28v=vs.110%29.aspx)时不起作用（至少在我们正在运行的版本上，客户端 v9.7.4.4 连接到 DB2 z/OS v 10 ）。

我认为我会为我们遇到的问题留下一个解决方法（在 TransactionScope 下运行大量 [1k+] 的 INSERT 时性能缓慢，但在删除范围并允许链接时运行良好）。我不确定它是否会直接帮助原始问题，但是如果您查看允许您使用 DB2DataAdapter 和底层 DataTable 更新行的 IBM.Data.DB2.dll 类，则有一些选项。

以下是 VB.NET 中的一些示例代码：

```
Private Sub InsertByBulk(tableName As String, insertCollection As List(Of Object))
    Dim curTimestamp = Date.Now

    Using scope = New TransactionScope
        'Something that opens a connection to DB2, may vary
        Using conn = GetDB2Connection()
            'Dumb query to get DataTable from the ResultSet
            Dim sql = String.Format("SELECT * FROM {0} WHERE 1=0", tableName)

            Using adapter = New DB2DataAdapter(sql, conn)
                Using table As New DataTable
                    adapter.FillSchema(table, SchemaType.Source)

                    For Each item In insertCollection
                        Dim row = table.NewRow()
                        row("ID") = item.Id
                        row("CHAR_FIELD") = item.CharField
                        row("QUANTITY") = item.Quantity
                        row("UPDATE_TIMESTAMP") = curTimestamp
                        table.Rows.Add(row)
                    Next

                    Using bc = New DB2BulkCopy(conn)
                        bc.DestinationTableName = tableName
                        bc.WriteToServer(table)
                    End Using 'BulkCopy
                End Using 'DataTable
            End Using 'DataAdapter
        End Using 'Connection
        scope.Complete()
    End Using
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:28:27.783

我们现在已经解决了这个问题。

问题的根源在于 DB2 提供者不支持事务提升。这导致事务范围使用 MSDTC 分布式事务处理所有内容。

我们将事务范围的使用替换为在数据库连接上设置的事务。

包含问题中代码的复合服务然后从 3 秒减少到 0.3 秒。

# java - 如何在 quickfix 上发送和接收消息？

> ID：11828979
> 
> 赞同：0
> 
> 时间：2012-08-06T13:10:15.347
> 
> 标签：java, quickfix

我创建了两个类：Initiator 和 Acceptor。我想将消息从发起者发送到接受者，然后处理收到的消息。我无法发送消息。

**这是我的initiator.java**

```
SocketInitiator socketInitiator = null;
String fileName = "conf/intiator.cfg";
try {
    SessionSettings initiatorSettings = new SessionSettings(new FileInputStream(fileName));
    Application initiatorApplication = new Initiator();
    FileStoreFactory fileStoreFactory = new FileStoreFactory(
            initiatorSettings);
    FileLogFactory fileLogFactory = new FileLogFactory(
            initiatorSettings);
    MessageFactory messageFactory = new DefaultMessageFactory();
    socketInitiator = new SocketInitiator(initiatorApplication, fileStoreFactory, initiatorSettings, fileLogFactory, messageFactory);
    socketInitiator.start();
    Message msg = new Message();
    msg.setString(1, "Hello this is test Message");

    SessionID sessionId = (SessionID) socketInitiator.getSessions().get(0);
    Session.lookupSession(sessionId).logon();
    initiatorApplication.onLogon(sessionId);
    initiatorApplication.toApp(msg, sessionId);
} catch (Exception e) {
    e.printStackTrace();
} 
```

**这是它的应用程序接口的覆盖消息。**

```
public void toApp(Message message, SessionID sessionId) throws DoNotSend {
    try {
        boolean result = quickfix.Session.sendToTarget(message, sessionId);
        if (result) {
            System.out.println("Message ahs send :)");
        } else {
            System.out.println("Not Send");
        }
    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

**这是启动器initiator.cfg 文件**

```
[default]
StartTime=00:00:01
EndTime=23:59:59
HeartBtInt=10
SocketUseSSL=N
MillisecondsInTimeStamp=Y
FileIncludeMilliseconds=Y
CheckLatency=N
SocketTcpNoDelay=Y 

[session]
BeginString=FIX.4.4
ConnectionType=initiator
DisableQuickFixReconnLogic=Y
AdapterUserIndex=0

SocketConnectHost=127.0.0.1

Timezone=America/New_York

SocketConnectPort=3000
UseDataDictionary=Y
DataDictionary=conf/resources/FIX44.xml
ValidateFieldsOutOfOrder=N
ValidateFieldsHaveValues=N
ValidateUserDefinedFields=N
LogonTimeout=10
FileStorePath=conf/connector
FileLogPath=conf/connector/logs
FileLogBackupPath=conf/connector
ResetOnLogout=Y
ResetOnDisconnect=N
SendResetSeqNumFlag=Y
RawData=fxall123
#SessionQualifier=FXallStream
MillisecondsInTimeStamp=Y
FileIncludeMilliseconds=Y

[session]
BeginString=FIX.4.4
ConnectionType=initiator
DisableQuickFixReconnLogic=Y
AdapterUserIndex=1
SenderCompID=initiator-id
#SenderSubID=trader1
#TargetCompID=target-id
#TargetSubID=qftrade

SocketConnectHost=127.0.0.1
Timezone=America/New_York
#SocketConnectPort=443
SocketConnectPort=3000
UseDataDictionary=Y
DataDictionary=conf/resources/FIX44.xml
ValidateFieldsOutOfOrder=N
ValidateFieldsHaveValues=N
ValidateUserDefinedFields=N
LogonTimeout=5
FileStorePath=conf/connector
FileLogPath=conf/connector
FileLogBackupPath=conf/connector/backup
ResetOnLogout=Y
ResetOnLogon=Y
ResetOnDisconnect=N
SendResetSeqNumFlag=Y
RawData=fxall123
#SessionQualifier=FXallTrade 
```

**接受者.java**

```
String fileName = "conf/acceptor.cfg";
SocketAcceptor socketAcceptor = null;
try {
    FileInputStream is = new FileInputStream(fileName);
    SessionSettings executorSettings = new SessionSettings(is);
    Application application = new Acceptor();
    FileStoreFactory fileStoreFactory = new FileStoreFactory(
            executorSettings);
    MessageFactory messageFactory = new DefaultMessageFactory();
    FileLogFactory fileLogFactory = new FileLogFactory(executorSettings);
    socketAcceptor = new SocketAcceptor(application, fileStoreFactory,
            executorSettings, fileLogFactory, messageFactory);
    socketAcceptor.start();

    SessionID sessionId = (SessionID) socketAcceptor.getSessions().get(0);
    application.onLogon(sessionId);
    int[] i = {1, 2, 3, 4, 5};

    // application.fromApp(new Message(i), sessionId);
} catch (Exception e) {
    e.printStackTrace();
} 
```

**接受者.cfg**

```
[default]
StartTime=00:00:00
EndTime=23:50:00
HeartBtInt=10
ReconnectInterval=6
SocketUseSSL=N
MillisecondsInTimeStamp=Y
CheckLatency=N
SocketTcpNoDelay=N
SocketAcceptAddress=127.0.0.1
SocketAcceptPort=3000

[session]
BeginString=FIX.4.4
ConnectionType=acceptor
#DisableQuickFixReconnLogic=Y
AdapterUserIndex=0
SenderCompID=target-id
#SenderSubID=qfstream
#TargetCompID=inttest
#TargetSubID=trader1
Timezone=America/New_York
UseDataDictionary=Y
DataDictionary=conf/resources/FIX44.xml
ValidateFieldsOutOfOrder=N
ValidateFieldsHaveValues=N
ValidateUserDefinedFields=N
LogonTimeout=5
FileStorePath=conf/Acceptor
FileLogPath=conf/Acceptor/logs
ResetOnLogout=Y
ResetOnDisconnect=N
SendResetSeqNumFlag=Y 
```

谁能告诉我问题出在哪里。在配置中还是在代码中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T13:27:58.987

我将指出显而易见的（这段代码有很多错误，请参阅示例以了解 quickfixj 的工作原理）。您尝试发送的`Message`不是有效的 FIX 消息，因此在发送之前将被引擎拒绝。您将需要创建一个真正的 FIX 消息，以便 quickfix 发送它。同样重要的是，我需要提到它`toApp`是一个在发送消息时调用的事件处理程序。如果你在其中调用`quickfix.Session.sendToTarget`它，它会在发送时再次调用`toApp`。由于您的代码中没有控制语句，`toApp`因此会导致无限循环。配置也略有错误，其他代码看起来很奇怪，但这些是你最大的问题。请查看文档和示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T06:51:32.870

您需要在 xml 文件中进行更改。我猜您正在使用的字段未在 fix.4.4 文件中声明。检查您的 xml 文件并以下列方式包含该文件。

即你想用货币发送QuoteID，但在货币中没有声明QuoteID。在这种情况下，您将无法发送消息。您需要在 fix.4.4/或您正在使用的任何版本中清除该字段（QuoteID）。

```
<Currency>
//
//   
<field name="QuoteID" required="N" /> // N or Y depend on your requirement 
//
//
</currency> 
```

还要检查日志，您会在那里找到错误消息。

可能是您没有包括也会产生问题的要求字段。使用以下链接检查哪些字段是必需的。 [http://www.fixprotocol.org/FIXimate3.0/](http://www.fixprotocol.org/FIXimate3.0/)

# iphone - 如何使 IPJSUA 成为 .IPA 文件？

> ID：11828986
> 
> 赞同：0
> 
> 时间：2012-08-06T13:10:26.817
> 
> 标签：iphone, ios, ipad, ios5, xcode4.3

我只是编译 IPJSUA 并使用 xCode 4.3.2 构建，并且还在模拟器上运行。但仍然无法呼叫/发送 IM。我正在考虑模拟器的限制，现在我想部署到 .IPA 文件并使用我的手机对其进行测试。但我得到了一个错误。

如果我使用的是 iPhone 开发者证书，我会遇到很多类似这张图片的错误。

![在此处输入图像描述](../Images/5fc278a54b276be6ea07ca20351e77f5.png) 如果我使用 iPhone 分发证书，我会收到这样的错误消息。

> 未找到包含任何钥匙串签名证书的未过期配置文件

有人尝试过如何将 IPJSUA 制作成 .IPA 文件吗？iPhone 开发者证书和 iPhone 分发证书有什么区别？

这是图片，我已经链接了库、架构和搜索路径。 ![在此处输入图像描述](../Images/d21d9608a46be9fc07b3884464263035.png)

我已经可以制作 .IPA 文件，但仍然无法拨打电话或发送 IM。您可以使用您的设备/模拟器与 IPJSUA 通话吗？谢谢。

**更新：**已经可以呼叫/发送 IM/添加好友。我将参考我将自己回答的新问题。在 xCode 上逐步使用 PJSIP。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T00:24:36.240

我花了几天时间让 ipjsua 在设备上运行。我遇到了几件事：

您是否链接到所有正确的二进制文件？您需要链接到大约 20 个左右，您可以查看他们的 ipjsua 示例应用程序以供参考。

您是否在构建设置中添加了 armv7 和 armv6 架构？我们必须同时添加两者（这可能是在去年 9 月我们构建它的时候，供参考）

构建设置中的库搜索路径和标题搜索路径是否正确？对于头文件，我们有 pjsip/include、pjlib/include、pjlib-util/include、pjnath/include 和 pjmedia/include。对于库路径，我们都一样（当然是 /lib 而不是 /include）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T20:24:49.677

如果您只是在自己的手机上进行测试，并且您的手机已在开发者门户中注册，则无需生成 .IPA 文件。您只需将设备插入计算机并将其直接构建到设备上即可。[但是，如果您想分发到尚未注册的多个设备（例如朋友的设备），我建议您查看 testflight 以简化此过程，并在此处](http://help.testflightapp.com/customer/portal/articles/494413-how-to-create-an-ipa-xcode-4-3-)提供有关如何创建和上传 IPA的分步说明。

# java - Java EE：防止应用程序 URL 黑客攻击

> ID：11828987
> 
> 赞同：0
> 
> 时间：2012-08-06T13:10:29.967
> 
> 标签：java, security, jakarta-ee, web-applications, web

我正在开发一个现有的基于 Web 的应用程序。

现在，我需要保护应用程序免受我认为所谓的 url 黑客攻击。例如，如果 customerId 为 1 的客户登录并查看他的个人资料，则地址字段中将显示以下 http get 变量：customerId=1。我需要防止客户能够设置 customerId=2 并查看其他客户的个人资料。

问题是，该应用程序已经投入生产并且处于良好的工作状态，因此相对于这种变化，变化应该是最小的。

如何最好地做到这一点？

有什么建议/意见吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:14:38.387

当只允许用户更改其个人资料时，为什么要在 URL 中提供 id？我认为没有必要这样做。而是从 SecurityConext 获取当前用户并在没有 id 的 URL 上显示其配置文件。

使用您在我建议的评论中提供的新信息。像这样：

只需检查 URL 中给定的 orderid 是否属于当前用户。你是说你使用“普通的基于 web 的应用程序”，所以我假设基于 Servlet/jsp。在您的 servlet 中，您将执行以下操作：

```
int orderId = Integer.parseInt(request.getParameter("orderId"));
String username = request.getUserPrincipal().getName();
/*now you need to check if username match with the username of the order e.g. by using hibernate to get the order by id and check its user and if not throw PermissionDeniedException or similiar*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:17:45.153

95% 的人同意上面 Korgen 的回答。5% - 如果您想允许管理员访问使用相同的功能编辑用户配置文件，只需切换到 UUID 以识别已编辑的用户。

# python - 为什么我的 gi.repository.Gtk 一直使用 GTK 2 模块？

> ID：11828995
> 
> 赞同：3
> 
> 时间：2012-08-06T13:10:57.770
> 
> 标签：python, user-interface, gtk3, pygobject

我正在设计一个 GUI python 程序，我决定使用 GTK+3。

在这里阅读一些文档：http: [//python-gtk-3-tutorial.readthedocs.org/en/latest/index.html](http://python-gtk-3-tutorial.readthedocs.org/en/latest/index.html)我知道我可以使用 gi.repository.Gtk 模块作为 GTK+3 库的 API。

但是当我尝试这样做时，它一直警告我它正在使用 GTK+2 模块：

```
>>> import gi.repository.Gtk
/usr/lib/python2.7/dist-packages/gi/overrides/Gtk.py:47: RuntimeWarning: 
You have imported the Gtk 2.0 module.  Because Gtk 2.0 was not designed 
for use with introspection some of the interfaces and API will fail.
As such this is not supported by the pygobject development team and
we encourage you to port your app to Gtk 3 or greater. PyGTK is the
recomended python module to use with Gtk 2.0
 warnings.warn(warn_msg, RuntimeWarning) 
```

我不知道如何解决这个问题……我怎么能真正转向使用 GTK+3 呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T18:54:30.630

检查您是否已安装 GTK+ 3 的开发包。在您的情况下，使用 Ubuntu 12.04，您应该已安装`libgtk-3-dev`.

# java - HTTPClient 在完成之前切断响应

> ID：11828997
> 
> 赞同：1
> 
> 时间：2012-08-06T13:11:09.727
> 
> 标签：java, xml, httpclient, rest-assured

我正在使用 Apache [HTTPClient](http://hc.apache.org)为 RESTful API 编写测试，当我执行大型请求（返回超过 80,000 个字符）时，响应被切断。截止点通常在 85,275 左右。我可以在 curl 中从命令行运行完全相同的请求，然后取回整个语句。

我正在运行的系统正在运行 Tomcat，服务器日志表明正在返回整个响应，所以在我看来，问题在于 HTTPClient 带回数据的方式。

我已经直接使用[Rest Assured](http://code.google.com/p/rest-assured/)（使用 HTTPClient）和 HTTPClient 来确保问题不在于 Rest Assured。我更改了几个参数，包括 CoreConnectionPNames 参数 CONNECTION_TIMEOUT、MAX_LINE_LENGTH、SO_TIMEOUT 和 SOCKET_BUFFER_SIZE。

例如，在放心

```
given()
    .param("areaCode", "515")
    .param("quantity", "5000")
.expect()
    .statusCode(200)
    .body("SearchResults.ResultCount", equalTo("5000"),
          "SearchResults.TelephoneNumberList.TelephoneNumber[0]", startsWith("515"),
          "SearchResults.TelephoneNumberList.TelephoneNumber[1]", startsWith("515"),            
          "SearchResults.TelephoneNumberList.TelephoneNumber[2]", startsWith("515"))
.when()
    .get("/accounts/1/availableNumbers"); 
```

或在 HTTPClient

```
// I've set up an httpclient with standard stuff to ignore the self-signed 
// certs in our development environment
DefaultHttpClient httpclient = getNewHttpClient();

httpclient.getCredentialsProvider().
    setCredentials(new AuthScope(AuthScope.ANY_HOST, AuthScope.ANY_PORT),
                   new UsernamePasswordCredentials("xxxx", "xxxx"));

org.apache.http.client.utils.URIBuilder builder = 
    new org.apache.http.client.utils.URIBuilder();

builder.setScheme("https")
    .setHost("api.test.xxxx.com")
    .setPath("/accounts/1/availableNumbers")
    .setParameter("areaCode", "515")
    .setParameter("quantity", "5000");

URI uri = builder.build();

HttpGet httpget = new HttpGet(uri);

// print out request URI
System.out.println(httpget.getURI());

HttpResponse response = httpclient.execute(httpget);

if (response.getStatusLine().getStatusCode() != 200)
{
    throw new RuntimeException("Failed : HTTP error code : " + response.getStatusLine().getStatusCode());
}

BufferedReader br = new BufferedReader(new InputStreamReader((response.getEntity().getContent())));

String output;
System.out.println("Output from Server .... \n");
while ((output = br.readLine()) != null)
{
   System.out.println(output);
} 
```

# java - Text-To-Speech 服务连接泄露

> ID：11828998
> 
> 赞同：1
> 
> 时间：2012-08-06T13:11:12.400
> 
> 标签：java, android, text-to-speech, serviceconnection

我的应用在语音识别命令后使用文本转语音。我之前让它工作没有错误，但现在它给了我一个服务连接泄漏错误，并且不会启动活动。我已经包含了错误所在的 LogCat 和 Java 文件。

```
08-06 08:54:50.090: E/ActivityThread(2871): android.app.ServiceConnectionLeaked: Activity com.example.com.proto1.menu has leaked ServiceConnection android.speech.tts.TextToSpeech$1@408b10d8 that was originally bound here
08-06 08:54:50.090: E/ActivityThread(2871):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:932)
08-06 08:54:50.090: E/ActivityThread(2871):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:827)
08-06 08:54:50.090: E/ActivityThread(2871):     at android.app.ContextImpl.bindService(ContextImpl.java:1109)
08-06 08:54:50.090: E/ActivityThread(2871):     at android.content.ContextWrapper.bindService(ContextWrapper.java:370)
08-06 08:54:50.090: E/ActivityThread(2871):     at android.speech.tts.TextToSpeech.initTts(TextToSpeech.java:517)
08-06 08:54:50.090: E/ActivityThread(2871):     at android.speech.tts.TextToSpeech.<init>(TextToSpeech.java:483)
08-06 08:54:50.090: E/ActivityThread(2871):     at com.example.com.proto1.menu.onActivityResult(menu.java:250)
08-06 08:54:50.090: E/ActivityThread(2871):     at android.app.Activity.dispatchActivityResult(Activity.java:4581)
08-06 08:54:50.090: E/ActivityThread(2871):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2817)
08-06 08:54:50.090: E/ActivityThread(2871):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:2864)
08-06 08:54:50.090: E/ActivityThread(2871):     at android.app.ActivityThread.access$1000(ActivityThread.java:122)
08-06 08:54:50.090: E/ActivityThread(2871):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1057)
08-06 08:54:50.090: E/ActivityThread(2871):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-06 08:54:50.090: E/ActivityThread(2871):     at android.os.Looper.loop(Looper.java:132)
08-06 08:54:50.090: E/ActivityThread(2871):     at android.app.ActivityThread.main(ActivityThread.java:4126)
08-06 08:54:50.090: E/ActivityThread(2871):     at java.lang.reflect.Method.invokeNative(Native Method)
08-06 08:54:50.090: E/ActivityThread(2871):     at java.lang.reflect.Method.invoke(Method.java:491)
08-06 08:54:50.090: E/ActivityThread(2871):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
08-06 08:54:50.090: E/ActivityThread(2871):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
08-06 08:54:50.090: E/ActivityThread(2871):     at dalvik.system.NativeStart.main(Native Method)

package com.example.com.proto1;

import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.speech.RecognizerIntent;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.Toast;
import android.speech.tts.TextToSpeech;
import java.util.ArrayList;
import java.util.List;
import java.util.Locale;

@SuppressWarnings("unused")
public class menu extends Activity implements TextToSpeech.OnInitListener,
        OnClickListener {

    // defined
    TextToSpeech mTts;
    public static final int VOICE_RECOGNITION_REQUEST_CODE = 1234;

    // remember to include a listview on the xml or the voice recognition code
    // will not work
    public ListView mList;
    // TTS object
    Button speakButton, infoButton, voiceButton, talkButton;

    // TTS object
    public TextToSpeech myTTS;
    // status check code
    public int MY_DATA_CHECK_CODE = 0;

    @Override
    protected void onCreate(Bundle aboutmenu) {
        super.onCreate(aboutmenu);
        setContentView(R.layout.mainx);

        SpeakingAndroid speak = new SpeakingAndroid();

        VoiceRecognition voiceinput = new VoiceRecognition();

        // get a reference to the button element listed in the XML layout
        speakButton = (Button) findViewById(R.id.btn_speak);
        infoButton = (Button) findViewById(R.id.aboutbutton);
        voiceButton = (Button) findViewById(R.id.voicebutton);
        talkButton = (Button) findViewById(R.id.talk);

        // listen for clicks
        infoButton.setOnClickListener(this);
        speakButton.setOnClickListener(this);
        talkButton.setOnClickListener(this);

        // check for TTS data
        Intent checkTTSIntent = new Intent();
        checkTTSIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
        startActivityForResult(checkTTSIntent, MY_DATA_CHECK_CODE);

        // calling method
        voiceinputbuttons();

        // Check to see if a recognition activity is present
        // if running on AVD virtual device it will give this message. The mic
        // required only works on an actual android device//
        PackageManager pm = getPackageManager();
        List<ResolveInfo> activities = pm.queryIntentActivities(new Intent(
                RecognizerIntent.ACTION_RECOGNIZE_SPEECH), 0);
        if (activities.size() != 0) {
            voiceButton.setOnClickListener(this);
        } else {
            voiceButton.setEnabled(false);
            voiceButton.setText("Recognizer not present");
        }

    }

    // setup TTS
    public void onInit(int initStatus) {

        // check for successful instantiation

        // returns a fail statement if speech doesn't work
        if (initStatus == TextToSpeech.SUCCESS) {
            if (myTTS.isLanguageAvailable(Locale.US) == TextToSpeech.LANG_AVAILABLE)
                myTTS.setLanguage(Locale.US);
        } else if (initStatus == TextToSpeech.ERROR) {
            Toast.makeText(this, "Sorry! Text To Speech failed...",
                    Toast.LENGTH_LONG).show();
        }
    }

    public void informationmenu() {
        speakWords("information screen");
        startActivity(new Intent("android.intent.action.INFOSCREEN"));
    }

    public void voicemenu() {
        speakWords("voice recognition menu");
        startActivity(new Intent("android.intent.action.RECOGNITIONMENU"));
    }

    public void mainmenu() {
        speakWords("main menu");
        startActivity(new Intent("android.intent.action.MENU"));
    }

    // creating method
    public void voiceinputbuttons() {
        speakButton = (Button) findViewById(R.id.btn_speak);
        mList = (ListView) findViewById(R.id.list);
    }

    // respond to button clicks
    public void onClick(View v) {
        switch (v.getId()) {

        // use switch case so each button does a different thing
        // accurately(similar to an if statement)
        case R.id.btn_speak:
            String words1 = speakButton.getText().toString();

            // speakwords(xxxx); is the piece of code that actually calls the
            // text to speech
            speakWords(words1);
            Intent voiceIntent = new Intent("ANDROID_NET");
            startActivity(voiceIntent);
            break;
        case R.id.aboutbutton:
            String words2 = infoButton.getText().toString();
            speakWords(words2);
            Intent infoIntent = new Intent("android.intent.action.INFOSCREEN");
            startActivity(infoIntent);
            break;
        case R.id.voicebutton:
            speakWords("Speak Now");
            startVoiceRecognitionActivity(); // call for voice recognition
                                                // activity
            break;
        case R.id.talk:
            speakWords("This is the main menu.");
            break;
        }
    }

    // speak the user text
    // setting up the speakWords code
    public void speakWords(String speech) {

        // speak straight away
        myTTS.speak(speech, TextToSpeech.QUEUE_FLUSH, null);
    }

    /**
     * Fire an intent to start the speech recognition activity.
     */
    public void startVoiceRecognitionActivity() {
        Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
                RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
        intent.putExtra(RecognizerIntent.EXTRA_PROMPT,
                "Speech recognition demo");
        startActivityForResult(intent, VOICE_RECOGNITION_REQUEST_CODE);
    }

    /**
     * Handle the results from the recognition activity.
     */
    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == VOICE_RECOGNITION_REQUEST_CODE
                && resultCode == RESULT_OK) {
            // Fill the list view with the strings the recognizer thought it
            // could have heard
            ArrayList<String> matches = data
                    .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
            mList.setAdapter(new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_1, matches));
            // matches is the result of voice input. It is a list of what the
            // user possibly said.
            // Using an if statement for the keyword you want to use allows the
            // use of any activity if keywords match
            // it is possible to set up multiple keywords to use the same
            // activity so more than one word will allow the user
            // to use the activity (makes it so the user doesn't have to
            // memorize words from a list)
            // to use an activity from the voice input information simply use
            // the following format;
            // if (matches.contains("keyword here") { startActivity(new
            // Intent("name.of.manifest.ACTIVITY")

            if (matches.contains("information")) {
                informationmenu();
            }
            if (matches.contains("info screen")) {
                informationmenu();
            }
            if (matches.contains("info")) {
                informationmenu();
            }
            if (matches.contains("about")) {
                informationmenu();
            }

            if (matches.contains("home")) {
                mainmenu();
            }
            if (matches.contains("menu")) {
                mainmenu();
            }
            if (matches.contains("home screen")) {
                mainmenu();
            }
            if (matches.contains("speak")) {
                startActivity(new Intent("android.intent.action.SPEAK"));
            }
            if (matches.contains("close")) {
                finish();
            }
            if (matches.contains("stop")) {
                finish();
            }
            if (matches.contains("finish")) {
                finish();
            }
            if (matches.contains("voice")) {
                voicemenu();
            }
            if (matches.contains("recognition")) {
                voicemenu();
            }
            if (matches.contains("voice recognition")) {
                voicemenu();
            }

        }

        // still in the onActivityResult: This is for the text to speech part

        if (requestCode == MY_DATA_CHECK_CODE) {
            if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
                // the user has the necessary data - create the TTS
                myTTS = new TextToSpeech(this, this);
            } else {
                // no data - install it now
                Intent installTTSIntent = new Intent();
                installTTSIntent
                        .setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
                startActivity(installTTSIntent);
            }
        }

        super.onActivityResult(requestCode, resultCode, data);

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T13:42:36.483

在`onDestroy()`Activity 的方法中使用关闭 TTS 服务

```
ttsObj.shutdown(); 
```