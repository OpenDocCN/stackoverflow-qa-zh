# StackOverflow 问答 10085000-10085999

# android - LinearLayout 问题中的按钮

> ID：10085000
> 
> 赞同：1
> 
> 时间：2012-04-10T07:46:11.373
> 
> 标签：android, button, dialog, android-linearlayout

我有一个自定义对话框，它有 3 个按钮，有时它只有一个按钮。当我有 3 个按钮时，`LinearLayout`它们本身就很适合这些按钮。但是当我只有一个按钮时，它会为单个按钮提供可用的整个宽度，从而使该按钮看起来太大。我想要这样，如果只有一个按钮，它应该只占可用宽度的一半或者应该包装内容（按钮图像。）请参阅以下图片以供参考 -

![3个按钮对话框](../Images/b26736aa2aef11429dcfd89c0e880243.png)

![1个按钮对话框](../Images/02d38297db1f103253f92d89a44cf971.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T08:04:00.653

请参阅与您的要求类似的此 XML 文件。只是可见性转到不需要的按钮。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" android:weightSum="3" android:gravity="center_horizontal">

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Button"/>

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Button" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Button"/>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:51:20.057

为了让一个按钮占据可用屏幕宽度的一半，您需要

1.  设置`android:weightSum="2"`在父级`LinearLayout`
2.  设置`android:layout_weight="1"`在`Button`

# ruby-on-rails - 创建用于删除属于产品的上传的表单

> ID：10085007
> 
> 赞同：1
> 
> 时间：2012-04-10T07:46:51.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, paperclip

我使用基于此应用程序 [https://github.com/websymphony/Rails3-Paperclip-Uploadify](https://github.com/websymphony/Rails3-Paperclip-Uploadify)的回形针进行了多次上传，它工作正常，但现在我需要构建一个表单，用户可以在其中删除其中的一些上传。

我有这个表格用于删除一个产品的上传

```
<%= form_for @product, :html => { :method => :put }, :html => { :multipart => true } do |f| %>
  <h3 id="photos_count"><%= pluralize(@product.uploads.size, "Photo")%></h3>
  <%= f.fields_for :uploads do |photo_fields| %>
    <% if !photo_fields.object.nil? and  !photo_fields.object.new_record? %>
      <%= image_tag(photo_fields.object.photo.url(:thumb)) %>
      <p><%= photo_fields.check_box :_destroy, :class=>'checkbox' %>  Delete item</p>
    <% end %>
  <% end %>
<% end %> 
```

此表单以某种方式显示正确的上传编号，我可以在终端窗口中看到所有带有 product_id = product.id 的上传都在数据库中找到，但我没有在页面中显示图像，如您在图像上看到的：

**终端**

```
Started GET "/admin/products/40" for 127.0.0.1 at Tue Apr 10 10:20:06 +0300 2012
  Processing by Admin::ProductsController#show as HTML
  Parameters: {"id"=>"40"}
Creating scope :page. Overwriting existing method AdminUser.page.
  AdminUser Load (2.4ms)  SELECT `admin_users`.* FROM `admin_users` WHERE `admin_users`.`id` = 5 LIMIT 1
Creating scope :page. Overwriting existing method Product.page.
  Product Load (0.5ms)  SELECT `products`.* FROM `products` WHERE `products`.`id` = 40 LIMIT 1
Creating scope :page. Overwriting existing method Upload.page.
  Upload Load (0.4ms)  SELECT `uploads`.* FROM `uploads` WHERE `uploads`.`product_id` = 40 AND (file_avatar = 1) LIMIT 1
Creating scope :page. Overwriting existing method Category.page.
  Category Load (0.4ms)  SELECT `categories`.* FROM `categories` WHERE `categories`.`id` = 2 LIMIT 1
   (0.6ms)  SELECT COUNT(*) FROM `uploads` WHERE `uploads`.`product_id` = 40
Rendered admin/products/_delete_photos.html.erb (154.3ms)
  CACHE (0.0ms)  SELECT COUNT(*) FROM `uploads` WHERE `uploads`.`product_id` = 40 
```

![在此处输入图像描述](../Images/6ce7099f2bbdd5f283e95719f16f910c.png)

附加信息：

**上传.rb**

```
class Upload < ActiveRecord::Base
  attr_accessible :product_id, :photo 
  belongs_to :product
  has_attached_file :photo, :styles => { :medium => "300x300>", :thumb => "100x100>" }

  attr_accessible :created_at, :photo_file_size, :photo_file_name, :updated_at, :photo_content_type,
                  :file_avatar, :photo_updated_at, :uploads_attributes, :photo_attributes
end 
```

**产品.rb**

```
class Product < ActiveRecord::Base
  has_many :uploads, :dependent => :destroy
  accepts_nested_attributes_for :uploads, :allow_destroy => true
end 
```

**uploads_controller.rb**

```
 # GET /uploads/1/edit
  def edit
    @upload = Upload.find(params[:id])
  end

  # POST /uploads
  # POST /uploads.xml

  # PUT /uploads/1
  # PUT /uploads/1.xml
  def update
    @upload = Upload.find(params[:id])

    respond_to do |format|
      if @upload.update_attributes(params[:upload])
        format.html { redirect_to(@upload, :notice => 'Upload was successfully updated.') }
        format.xml  { head :ok }
      else
        format.html { render :action => "edit" }
        format.xml  { render :xml => @upload.errors, :status => :unprocessable_entity }
      end
    end
  end

  # DELETE /uploads/1
  # DELETE /uploads/1.xml
  def destroy
    @upload = Upload.find(params[:id])
    @upload.destroy

    respond_to do |format|
      format.html { redirect_to(products_url) }
      format.xml  { head :ok }
    end
  end 
```

所以这里的问题是：为什么图像没有显示在它们旁边的复选框中。谢谢你。

**更新**

```
Processing by ProductsController#update as HTML
  Parameters: {"commit"=>"Delete sellected photos", "authenticity_token"=>"af5+YybkZ1KMu/DmZmlui9frqQX5ka8v/vvv0hi9PVo=", "id"=>"42", "product"=>{"uploads_attributes"=>{"7"=>{"id"=>"322", "_destroy"=>"1"}, "6"=>{"id"=>"321", "_destroy"=>"0"}, "5"=>{"id"=>"320", "_destroy"=>"0"}, "4"=>{"id"=>"319", "_destroy"=>"0"}, "3"=>{"id"=>"318", "_destroy"=>"0"}, "2"=>{"id"=>"317", "_destroy"=>"0"}, "1"=>{"id"=>"316", "_destroy"=>"0"}, "0"=>{"id"=>"315", "_destroy"=>"0"}}}, "utf8"=>"✓"} 
```

在杰西的回复之后，我现在在我的页面中有图像，带有复选框，但是在我检查了其中一些并按下提交按钮后，这些照片并没有被删除

**products_controller**

def update @product = Product.find(params[:id])

```
respond_to do |format|
  if @product.update_attributes(params[:product])
    format.html { redirect_to(@product, :notice => 'Product was successfully updated.') }
    format.xml  { head :ok }
  else
    format.html { render :action => "edit" }
    format.xml  { render :xml => @product.errors, :status => :unprocessable_entity }
  end
end 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:09:13.140

您正在尝试使用 nested_attributes，但尚未在 Product 模型上启用它

```
class Product < ActiveRecord::Base
  has_many :uploads, dependent: :destroy, autosave: true
  accepts_nested_attributes_for :uploads, allow_destroy: true, reject_if: :all_blank
end 
```

更多：[http ://apidock.com/rails/ActiveRecord/NestedAttributes/ClassMethods/accepts_nested_attributes_for](http://apidock.com/rails/ActiveRecord/NestedAttributes/ClassMethods/accepts_nested_attributes_for)

# java - Servlet 中的 RequestDispatcher .forward(req, res) 没有任何作用

> ID：10085015
> 
> 赞同：0
> 
> 时间：2012-04-10T07:47:16.467
> 
> 标签：java, javascript, jsp, servlets, dispatcher

我在转发到 .jsp 页面时遇到问题。让我描述一下我的程序：

在 Servlet 中，我想确认一些事情，所以我做了 .forward() 到 .jsp，其中我在 $(document).ready(function()... 中包含了带有确认的 javascript

如果选择了 OK，我会创建新的 XMLHttpRequest() 并设置参数 confirm=1 并返回到之前的 Servlet，在该 Servlet 中，必须按预期执行确认（confirm=1）后必须执行的代码块。但是该块的最后一行是 .forward 回到 .jsp 似乎根本没有效果。

小服务程序代码：

```
if("1".equals(request.getParameter("confirm"))){
  ...
   setting some request.setAttribute();
}
else{
  ...
}

RequestDispatcher  rd = request.getRequestDispatcher(...);
rd.forward(req, res); 
```

实际上，我看到了正确的页面，但我认为是在确认之前。它可能应该被重新加载，因为我必须从请求中获取一些属性并使用 jquery 显示一些内容，具体取决于这些属性值。

那么您认为 .forward() 没有效果的原因是什么？我可以以某种方式强制页面重新加载吗？

编辑：第一次执行 Servlet 代码（其他情况） .forward() 调用工作正常。但是下次它什么也不做，无论我尝试转发到哪个页面。就像我根本没有转接电话一样。奇怪的。我真的希望有人对此作出解释。

EDIT2：我猜这不是转发问题。如果我执行 system.out.print 所需属性，我会得到正确的值。但是为什么页面没有重新加载？即使我转发到不同的 .jsp，我仍然会看到前一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:01:02.840

在确认的情况下，你确定你走到最后，然后打电话给前锋吗？

可能是你得到一个空指针或类似的东西。

尝试添加 system.out.println() 或在调试模式下运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:38:40.970

我并没有真正解决我的 .jsp 页面未加载问题。我实际上只需要将一些属性从 Servlete 传递给 javascript，所以我使用了 PrintWriter 的 jQuery ajax 调用，所以我将这些属性作为 javascript 函数中的键：值对。然后我简单地使用 javascript 将这些值设置为一些跨度。

# database - NoSQL 数据库是否使用或需要索引？

> ID：10085022
> 
> 赞同：34
> 
> 时间：2012-04-10T07:47:52.477
> 
> 标签：database, indexing, nosql

我是 NoSQL 数据库的新手，这听起来可能有点愚蠢，但我想知道 NoSQL 数据库是否使用或需要索引？如果是，如何制作或管理它们？任何链接？谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-04T08:09:14.423

CouchDB 和 MongoDB 肯定是的。我在书中提到：

*   [http://use-the-index-luke.com/sql/testing-scalability/response-time-throughput-scaling-horizo​​ntal](http://use-the-index-luke.com/sql/testing-scalability/response-time-throughput-scaling-horizontal)

以下是各自的文档：

*   [http://guide.couchdb.org/draft/btree.html](http://guide.couchdb.org/draft/btree.html)
*   [http://www.mongodb.org/display/DOCS/Indexes](http://www.mongodb.org/display/DOCS/Indexes)

然而，我相信 NoSQL 过于分散，无法给出明确的“是的，所有 NoSQL 系统都需要索引”。大多数系统需要并提供索引，但大多数 SQL 数据库都没有。最近，Cassandra 人自豪地引入了二级索引，即不仅仅是一个聚集索引。

*   [http://www.datastax.com/dev/blog/whats-new-cassandra-07-secondary-indexes](http://www.datastax.com/dev/blog/whats-new-cassandra-07-secondary-indexes)（嗯，我记得不是最近）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T06:25:29.880

绝对nosql数据库需要索引，

即，但在大多数流行的数据库中，您不需要自己维护索引，因为根据 nosql 数据库的当前需求，nosql 数据库社区正在开发新功能和`"Code Less, Get More"`

# php - 在 Yii 中创建带有元素名称的 URL 和 #

> ID：10085025
> 
> 赞同：7
> 
> 时间：2012-04-10T07:48:08.587
> 
> 标签：php, yii, url-routing

我需要在 Yii 中创建 URL，并在页面上指定一个 div 以在单击时聚焦...我知道我需要将 div 名称`#`放在 URL 中，但是如何在 Yii 的 createUrl 函数中指定它...

该`createUrl()`函数仅提供参数选项，而不是元素选项......据我所知。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T08:02:48.470

如果您检查[createUrl](http://www.yiiframework.com/doc/api/1.1/CController#createUrl-detail)：

> 额外的 GET 参数（名称=>值）。名称和值都将是 URL 编码的。如果名称为“#”，则对应的值将被视为锚点，并将附加在 URL 的末尾。

您可以像这样添加它：

```
 echo $this->createUrl('controller/action',array('#'=>'name')); 
```

# java - 用tomcat PermGen空间做什么

> ID：10085028
> 
> 赞同：27
> 
> 时间：2012-04-10T07:48:35.607
> 
> 标签：java, tomcat, permgen

**背景**：我有一个使用 JSP 的 web 项目。IDE 是 Eclipse。tomcat的配置是：资源变化时自动发布，发布间隔为“1秒”。

classes 文件夹中的一个属性文件，用于保存一些设置。它也可以由 servlet 动态修改。修改操作由 JSP 中的保存按钮触发。

**问题**：经过多次保存操作，Tomcat 自带`java.lang.OutOfMemoryError: PermGen space`.

**日志信息**

```
java.lang.OutOfMemoryError: PermGen space
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:616)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:1815)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:872)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1325)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1204)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationServletAnnotations(WebAnnotationSet.java:108)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:58)
    at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:297)
    at org.apache.catalina.startup.ContextConfig.start(ContextConfig.java:1064)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:261)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:120)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4238)
    at org.apache.catalina.core.StandardContext.reload(StandardContext.java:3083)
    at org.apache.catalina.loader.WebappLoader.backgroundProcess(WebappLoader.java:404)
    at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1279)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1571)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1580)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1580)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1560)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-20T15:18:20.063

Tomcat 确实需要很多 permgen。512m不是一个不合理的最大值。但是，它只会延迟热部署泄漏。Permgen 每次 hotdeploy 会增长约 25mb，在 Eclipse 中，可能是每次保存 Java 文件时。如果你像我一样有 Ctrl+S 抽搐，512m 消失得很快。

解决方案：允许Java 将类定义踢出内存，即垃圾收集字节码。将这些与提升的 permgen 大小一起添加：

```
-XX:+CMSClassUnloadingEnabled -XX:+UseConcMarkSweepGC 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-10T08:52:52.383

您可以设置名为：“ `JAVA_OPTS`”的环境变量并设置它的值如下`-Xms256m -Xmx1024m -XX:PermSize=256m -XX:MaxPermSize=512m`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-06-17T05:25:15.380

**对于日食**

1.  转到服务器属性
2.  前往平台
3.  现在在 VM 参数中写这个 -Xms256m -Xmx256m -XX:PermSize=256m -XX:MaxPermSize=512m

**对于 NETBeans**

1.  转到 Netbeans 文件夹/etc/
2.  在任何编辑器中打开 netbeans.config
3.  将此行编辑为

netbeans_default_options="-J-client **-J-Xss256m -J-Xms256m -J-XX:PermSize=256m -XX:MaxPermSize=512m** -J-Dapple.laf.useScreenMenuBar=true -J-Dapple.awt.graphics.UseQuartz=真-J-Dsun.java2d.noddraw=真-J-Dsun.java2d.dpiaware=真-J-Dsun.zip.disableMemoryMapping=真"

就这样

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-16T02:48:37.790

像这样设置：

```
-Xms128m -Xmx1024m -XX:PermSize=64m -XX:MaxPermSize=256m 
```

![在此处输入图像描述](../Images/36e81eda7d54076c30e6ce1cddbab22e.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-08-30T12:10:42.560

只需从 apache tomcat 界面配置它：

1.  start C:\Program Files\Apache Software Foundation\Tomcat 8.5\bin\Tomcat8w.exe （或者你可以在 windows start 中搜索“Configure Tomcat”）；
2.  转到 Java 选项卡；
3.  在输入字段中设置所需的空间： [![在此处输入图像描述](../Images/f7bf1b04825126029b264a871e8f3050.png)](https://i.stack.imgur.com/5oeq1.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-02T00:40:08.333

Just to add for Windows, if someone is still stuck:--

1.  Open catalina.bat file (located at Apache tomcat installation folder/bin)
2.  Set JAVA_OPTS as follows in the very start(before actually its first use anywhere in the file):--

    set JAVA_OPTS=-Dfile.encoding=UTF-8 -Xms128m -Xmx1024m -XX:PermSize=64m -XX:MaxPermSize=256m

3.  Restart Tomcat and its done.

You can find nice explanation [here](https://stackoverflow.com/a/28780453/1234913)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-07T10:14:36.650

Tomcat 服务器运行不同的 JAVA，而 eclipse 运行在不同的 JAVA 中。

所以添加`-XX:MaxPermSize=512m`到`eclipse.ini`将有助于解决这个问题。按照以下步骤将其添加到 tomcat 服务器：

*   在eclipse中双击服务器

*   打开启动配置

*   在“参数”选项卡中将“-XX:MaxPermSize=512m”添加到 VM 参数。

# android - Android - WebView 字体在每台设备上看起来都不同

> ID：10085029
> 
> 赞同：1
> 
> 时间：2012-04-10T07:48:36.360
> 
> 标签：android, fonts, webview

我有一个应用程序有几个屏幕作为在 WebView 中加载的 HTML。

文本的默认 CSS 是`font:normal 14px Arial, Helvetica, sans-serif`，正如我所假设的，它应该在所有设备上看起来都相同（就字体大小而言）。

出于某种原因，在某些设备上，字体看起来像 26+ 号以上，这会导致字体在受限元素中溢出。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:45:41.337

还有其他参数在确定 Android 中 HTML 页面中元素的大小方面发挥作用，例如：

```
<link rel="stylesheet" href="css/hdpi.css" media="only screen and (-webkit-min-device-pixel-ratio:1.5)">

 <meta name="viewport"   content="user-scalable=no,   width=device-width,  target-densitydpi=device-dpi"> 
```

尝试整合这些参数，您将获得更稳定的视图..然后您可以通过 JS 或活动更新这些值..

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:09:34.117

试试这个设置 webview .. 这设置了 WebView 的初始比例

```
setInitialScale (int scaleInPercent) 
```

# php - 在 Netbeans 中初始化 ArrayCollection (Doctrine 2) 后 PHPUnit 不再运行

> ID：10085030
> 
> 赞同：3
> 
> 时间：2012-04-10T07:48:37.307
> 
> 标签：php, unit-testing, doctrine-orm, phpunit, netbeans-7.1

我正在开发一个 PHP 项目并使用 PHPUnit 和 Doctrine 2。我使用的是最新版本。我写了很多测试来测试所有的类、函数和行为。测试始终在运行。一切正常。由于我使用 Doctrine，因此我应用了最佳实践技巧并在构造函数中初始化了 ArrayCollection。

```
public function __construct($username, $eMail, $password1, $password2) {
    $this->quiz = new ArrayCollection();
    $this->sessions = new ArrayCollection();
    $this->setUsername($username);
    $this->setEMail($eMail);
    $this->setPassword('', $password1, $password2);
} 
```

ArrayCollection 的包含是：

```
use Doctrine\Common\Collections\ArrayCollection; 
```

此后，PHPUnit 测试不再运行。

当我用初始化注释该行时，所有测试都会再次运行。成员测验和会议是私人的。该应用程序通常有效。

我是 Doctrine 2 和 PHPUnit 的新手。到目前为止，我已经尝试了很多东西，比如测试用例中的不同包含等。但没有任何帮助。也许我在测试用例中忘记了一些东西。在 ArrayCollection 的步骤初始化和没有初始化之间，我在测试用例中没有更改任何内容。

测试用例如下所示：

```
namespace Model;

require_once dirname(__FILE__) . '/../../Model/User.php';

/**
 * Test class for User.
 * Generated by PHPUnit on 2012-04-03 at 14:48:39.
 */
class UserTest extends \PHPUnit_Framework_TestCase {

    /**
     * @var User
     */
    protected $user;

    // constructor of the test suite
    function UserTest($name) {
        $this->PHPUnit_TestCase($name);
    }

    /**
     * Sets up the fixture, for example, opens a network connection.
     * This method is called before a test is executed.
     */
    protected function setUp() {
        $username = 'musteruser';
        $eMail = 'must@muster.ch';
        $pw = 'muster.muster';
        $this->user = new User($username, $eMail, $pw, $pw);
    }

    /**
     * Tears down the fixture, for example, closes a network connection.
     * This method is called after a test is executed.
     */
    protected function tearDown() {
        unset($this->user);
    } 
```

现在我真的不知道可能是什么问题。也许有人已经经历过同样的事情，或者知道可能是什么问题。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:15:17.907

当您调用 PHPUnit 时，您可能需要确保 Doctrine\Common 文件夹位于您的测试用例的包含路径中。

您是否正在为您的应用程序自定义任何类加载器，因为您需要为您的测试做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:38:51.417

我找到了解决问题的方法。我创建了一个名为 bootstrap.php 的文件，其内容如下：

```
// Import the ClassLoader
use Doctrine\Common\ClassLoader;

// Autoloader for Doctrine
require '/../../php/PEAR/Doctrine/Common/ClassLoader.php';

// Autoloading for Doctrine
$doctrineClassLoader = new ClassLoader('Doctrine', realpath(__DIR__ . '/../../php/PEAR'));
$doctrineClassLoader->register(); 
```

该文件位于测试文件的主目录中，该文件是 NetBeans 项目中单元测试的一部分。重要的是，在测试用例中无需编辑。

# css - wordpress网站在IE中显示错误

> ID：10085032
> 
> 赞同：0
> 
> 时间：2012-04-10T07:48:41.660
> 
> 标签：css, internet-explorer, cross-browser, wordpress-theming

我有wordpress网站，这个网站的主页在IE中显示不正确。我也是开发人员，所以我知道我必须将 doctype 放在标题中以强制 IE 以标准模式显示。但是当我在 IE 中使用开发人员工具时，它会显示文档类型留在正文标记内。这是我的网站： http: [//kidscare.edu.vn/](http://kidscare.edu.vn/) 和截图：http: [//imageshack.us/f/546/kidcareiebug.png/](http://imageshack.us/f/546/kidcareiebug.png/)

奇怪的是另一个页面显示正确。我不明白为什么会出现这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:05:48.063

这个站点在所有 IE 中都运行完美，除了 ie6 quirks 模式，问题是您正在以 quirks 模式查看这个站点，

更改此模式`alt+7`或按`f12`将文档模式更改为标准模式。

请更改此模式，这将正常工作，请参阅我的 ss。

它的网站在 IE7+ 中的外观。

![在此处输入图像描述](../Images/30d195af04316b8e7888b24b0ddd4d29.png)

你也可以检查这些问题：

*   [在 localhost 上开发时，如何让 IE9 使用标准兼容模式？](https://stackoverflow.com/questions/6049337/how-do-i-get-ie9-to-use-standards-compliant-mode-when-developing-on-localhost)
*   [为什么我会在 IE8 中触发怪癖模式？](https://stackoverflow.com/questions/1652791/why-am-i-triggering-quirks-mode-in-ie8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T07:55:09.800

您有两个起始 HEAD 标记和一个结束 HEAD 标记。您的页面上应该有一个开始和一个结束 HEAD 标记。尝试删除一个。

糟糕，我输入了 HEAD，但意思是 HTML。第一行末尾的条件语句中有一个错字：

```
 <!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
    <html dir="ltr" lang="vi-VI" xmlns:fb="http://www.facebook.com/2008/fbml" xmlns:og="http://ogp.me/ns/fb#"  >
        <!--<![endif]--> 
```

# php - 带有消息“找不到驱动程序”的 PostgreSql 'PDOException'

> ID：10085039
> 
> 赞同：36
> 
> 时间：2012-04-10T07:49:29.030
> 
> 标签：php, postgresql, ubuntu, pdo

pdo 在 mysql 上运行良好，但在 pgsql 上它给出的错误`'PDOException' with message 'could not find driver'`我已经安装了`php5-pgsql`包，其中还包括`pdo_pgsql`

[http://packages.debian.org/sid/php5-pgsql](http://packages.debian.org/sid/php5-pgsql)

> 这个包提供了一个直接从 PHP 脚本连接 PostgreSQL 数据库的模块。它还包括用于 PHP 数据对象扩展的 pdo_pgsql 模块。

我的 dsn 是`pgsql:dbname=DB;host=192.168.0.2` 我使用的是 Ubuntu 10.04

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2018-02-19T01:40:07.287

此消息表示您需要在 PHP 中**安装**或**激活**postgresql 扩展

这个解决方案对我有用： **安装 postgresql**扩展

```
[sudo] apt-get install php-pgsql 
```

之后，**为了激活它**，在文件中取消注释`pgsql`和`pdo-pgsql`扩展`etc/php/$PHP_VERSION/apache2/php.ini`

[![在此处输入图像描述](../Images/e6d2d5bdbdfd3699d2b8648a7794dd52.png)](https://i.stack.imgur.com/OTGFV.png)

最后，输入：

```
[sudo] /etc/init.d/apache2 restart 
```

如果您使用 apache，例如我的情况，要重新启动 apache 服务器...

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-10T08:06:36.133

1) 你是否在`php.ini`( `extension=pgsql.so`) 中启用了 pgsql.so？

2）你是 Postgresql 在`192.168.0.2`接口上监听吗？（您可以通过 来查看`netstat -tpln`）

3）您如何验证您对 Postgresql 的访问权限？

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-10T07:59:57.940

确保取消注释告诉 php Postgres 驱动程序`extension=pgsql.so`在主`php.ini`文件中的位置（通常）的行。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-02-26T10:26:12.417

我遇到过同样的问题。首先 - 检查它是否在 php.ini 中启用。取消注释`extension=php_pdo_pgsql...`

比设置扩展目录！！

```
extension_dir = "ext" ; for your case it could be other dir. 
```

并且不要忘记在更改配置后重新启动服务器。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-12-12T20:40:50.113

尝试去掉前面的分号

> 扩展=pgsql
> 扩展=pgsql.so

包含在您的*php.ini*文件中

您可以从 XAMPP 控制面板执行此操作。

[![在此处输入图像描述](../Images/68a3143d04920edfefa2eae02551770f.png)](https://i.stack.imgur.com/ZBNxb.png)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-09-21T13:30:18.563

我在另一个解决方案中遇到了同样的问题。我花了大约 4 个小时来解决这个问题。请检查以下内容以解决此问题。

1.  检查`php.ini`文件并从此行中删除分号

    `extension=pgsql`

    `extension=pdo_pgsql`

2.  重启你的 apache2 服务器

    `sudo service apache2 restart`

3.  检查您的 PDO 驱动程序是否已在 localhost 中更新`phpinfo()`

[![在此处输入图像描述](../Images/6c972ce6911b896fea7549f31264e97f.png)](https://i.stack.imgur.com/egv7W.png)

我做对了所有事情，但我仍然遇到这个问题。你知道为什么吗？因为我安装了几个版本的php。所以我`php7.4`在我的 php cli 中运行，但 localhost 在`php7.2`. 所以总是检查你的 php 版本。

4.  在 localhost 和终端 cli 上检查您的 php 版本

[![在此处输入图像描述](../Images/ac71edf0800a4f41943134b167f867d2.png)](https://i.stack.imgur.com/G3qRb.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-06-04T19:12:32.170

这是我为解决问题所做的。

1.  编辑并从中`php.ini`删除。另外，添加到文件中。`;``extension=pdo_pgsql``extension=pgsql.so``php.ini`

2.  确保在尝试查看结果之前重新启动 Apache 服务器。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-19T04:21:17.577

当您没有在 Apache 和 PHP 的同一台机器上安装 postgresql 时；您必须安装`php-pgsql`并且**不必**在 Linux中`php.ini`手动添加扩展（[在 Windows 中是](https://stackoverflow.com/a/53661888/5279996)），因为会生成冗余并且这不起作用（签入`error.log`）。

```
$ sudo apt install php-pgsql 
```

然后您可以检查是否存在自动启用的扩展：

```
$ sudo nano /etc/php/7.0/apache2/conf.d/10-pdo.ini 
```

*观察*：在`phpinfo()`您将找到目录`conf.d/`和文件`error.log`

总帐

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-16T03:51:51.003

只需运行 php --ini 并在输出中查找 Loaded Configuration File 以获取 CLI 使用的 php.ini 的位置

然后检查您是否正确启用了扩展。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2016-06-07T14:10:02.957

**将 libpq.dll 从 PHP 目录复制到 Apache24\bin**（或您的安装位置）。

# maven - maven 构建失败：无法读取 zip 文件条目

> ID：10085045
> 
> 赞同：0
> 
> 时间：2012-04-10T07:50:05.010
> 
> 标签：maven

尝试运行 as-> maven build 时出现此异常

```
 .m2\repository\commons-logging\commons-logging\1.1\commons-logging-1.1.jar; cannot read zip file entry 
```

我已经花了一天时间，在谷歌上搜索，但没有运气

知道我该如何解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T07:52:54.000

尝试使用 Zip 实用程序（7Zip 或其他）打开 jar。

如果失败，请从本地存储库中删除该文件，然后重试运行您的应用程序。

如果它再次失败，那么您的 Maven 存储库配置可能有问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T07:22:00.527

如果 maven 下载损坏的 jars（不使用 zip 实用程序打开的 jars） - 尝试手动下载这些特定的 jars 并将它们替换到适当的存储库文件夹位置。在 settings.xml 中明确指定 localRepository 路径。使用默认设置（即不指定 localRepository）会导致 maven 在您执行“全新安装”时一次又一次地下载 jars，并且您最终再次拥有损坏的 jars。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:21:28.260

根据我的经验，这是由损坏的 zip 文件引起的。失败的构建通常会附加到 jar 中，但不会删除它，因此会产生不可读的文件。

正如建议的那样，解决方案是删除 jar，然后尝试从存储库再次下载（创建带有包目标的 maven 构建）如果反复失败，则远程位置可能已损坏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-26T04:47:46.133

删除 m2 存储库文件夹并尝试运行您的 maven，它将再次下载所有 jar 文件并构建成功

# r - 如何在 igraph + R 中保持节点的位置

> ID：10085046
> 
> 赞同：4
> 
> 时间：2012-04-10T07:50:10.347
> 
> 标签：r, igraph

如果我有下图并且我用向量设置节点的位置坐标：

* * *

```
library(igraph)
library(Cairo)

g9<- graph(c(0,1,0,2,0,3,1,4,1,2,3,4,3,5,4,5,5,2),n=6,dir=FALSE)
V(g9)$name<-c(1:6)
V(g9)$label<-V(g9)$name
coords <- c(0, 0, 1.00000000000000, 0,0.500000000000000, 0.866025403784439, 0.300000000000000, 0.200000000000000, 0.441421356237309, 0.341421356237310,0.248236190979496,0.393185165257814)
coords <- matrix(coords, 6,2,byrow=T)
plot(g9,layout=coords) 
```

* * *

现在如果我添加以下代码，我必须再次设置坐标布局：

* * *

```
vc<-c(0,1,1,2,2,3,3,1)
gp<-graph(vc,dir=FALSE);
listSub<-graph.get.subisomorphisms.vf2(g9,gp)

m<-matrix(c(unlist(listSub)),length(listSub),length(unique(vc)),byrow=T)
md<-m[!duplicated(m[,1]),]

g<-delete.vertices(g9,c(m[1,2]))

dev.new()

coord <- c(0, 0, 1.00000000000000, 0,0.500000000000000, 0.866025403784439, 0.441421356237309, 0.341421356237310,0.248236190979496,0.393185165257814)
coord <- matrix(coord, 5,2,byrow=T)
plot(g,layout=coord) 
```

* * *

如何使这些布局位置成为默认位置——这样我就可以在不丢失每个名称的相应位置的情况下对图形结构进行修改？

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:39:21.093

您可以保留初始`coord`矩阵并仅提取子图所需的行。

```
plot(g9, layout = coords[ V(g9)$name, ])
plot(g , layout = coords[  V(g)$name, ]) 
```

# c# - 尝试添加服务引用时出错

> ID：10085048
> 
> 赞同：3
> 
> 时间：2012-04-10T07:50:18.600
> 
> 标签：c#, web-services, webclient, service-reference

我正在尝试用 C# 为 Web 服务创建一个客户端，该 Web 服务（我想）是用 Java 编写的。这是我第一次尝试编写客户端，所以我按照 MSDN 上的说明进行操作，但我遇到了添加引用的问题。当我打开“*添加服务引用*”对话框并添加 URL 时，出现错误：

```
There was an error downloading 'http://geoportal.cuzk.cz/WCTService/WCTService.svc'.
The request failed with HTTP status 404: Not Found.
Metadata contains a reference that cannot be resolved: 'http://geoportal.cuzk.cz/WCTService/WCTService.svc'.
There was no endpoint listening at http://geoportal.cuzk.cz/WCTService/WCTService.svc that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details.
The remote server returned an error: (404) Not Found.
If the service is defined in the current solution, try building the solution and adding the service reference again. 
```

我的下一步应该是什么？我不知道我该怎么办！（这是来自捷克共和国的坐标转换服务。）

更多信息：
物业服务 (GetCapabilities) [http://geoportal.cuzk.cz/WCTService/WCTService.svc/get](http://geoportal.cuzk.cz/WCTService/WCTService.svc/get) ?

本地化服务： [http ://geoportal.cuzk.cz/WCTService/WCTService.svc/get?request=GetCapabilities&service=WCTS](http://geoportal.cuzk.cz/WCTService/WCTService.svc/get?request=GetCapabilities&service=WCTS)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:52:43.997

我遇到了类似的情况，我创建了一个 WCF 服务 (Employee.svc)，后来将名称更改为 EmployeeService.svc。WCF 项目编译得很好，但是当我尝试从 UI 客户端添加服务引用时，我收到以下错误：

```
Metadata contains a reference that cannot be resolved: 'http://localhost:2278/EmployeeService.svc?wsdl'.
The document format is not recognized (the content type is 'text/html; charset=UTF-8').
Metadata contains a reference that cannot be resolved: 'http://localhost:2278/EmployeeService.svc'.
There was no endpoint listening at 'http://localhost:2278/EmployeeService.svc' that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details.
The remote server returned an error: (404) Not Found.
If the service is defined in the current solution, try building the solution and adding the service reference again. 
```

我通过在任何地方替换正确的服务类名称来解决它。就我而言，它应该是 EmployeeService 而不是雇员。遗漏的地方是在 svc 文件的标记代码中：

```
<%@ ServiceHost Language="C#" Debug="true" Service="WCFServiceHost.**Employee**" CodeBehind="EmployeeService.svc.cs" %> 
```

将其更改为

```
<%@ ServiceHost Language="C#" Debug="true" Service="WCFServiceHost.**EmployeeService**" CodeBehind="EmployeeService.svc.cs" %> 
```

它又开始工作了！！！更改服务名称后不要忘记构建您的 WCF 项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T10:55:13.230

我尝试浏览到`http://geoportal.cuzk.cz/WCTService/WCTService.svc?wsdl`. 看起来此服务没有公开元数据。

我在 OpenGIS 上做了一些谷歌搜索，我认为你需要看看这篇文章：

[使用 .NET 的 OpenGIS](http://webservices20.blogspot.com/2009/04/opengis-with-net-20-and-wcf.html)

您将无法仅添加服务引用并继续。看起来您需要制作一个具体的 WSDL。

可能有一个客户端库，您可以使用/自定义来协助集成。查看 Stack Overflow 问题*[Using MySQL GeoSpatial data types in .NET](https://stackoverflow.com/questions/2371275/using-mysql-geospatial-data-types-in-net)*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T08:29:13.357

在您尝试添加服务引用之前，该服务是否已确定启动并运行？如果它公开元数据，它是否配置了服务行为或等效行为？您是否正确配置了防火墙？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-26T05:34:25.263

在将服务引用添加到客户端应用程序时，元数据无法从服务访问到客户端应用程序。因此远程服务器返回错误：（404）未找到。实际上，我们可以如下托管 WCF 服务：

1.  自托管（控制台应用程序）
2.  IIS 托管
3.  WAS 托管
4.  窗口服务托管。

如果您使用自托管，那么您需要在控制台应用程序中托管服务并运行服务（运行控制台应用程序），然后将服务引用添加到客户端应用程序，然后元数据将被交换。如果服务没有运行，那么在向客户端应用程序添加服务引用时，将会出现 404 not found 错误。所有托管类型都将遵循相同的过程。首先运行服务，然后添加服务引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-23T15:37:50.737

我知道这是一个旧线程并且已经解决，但我刚刚完成了对这个确切问题的故障排除，并且这里提供的解决方案都不适合我。想分享我的解决方案，以防其他人遇到类似问题。

我的整个问题源于一个错误的 Refactor->Rename 操作。我最近为我的开发团队购买了 Resharper，而 Resharper 不喜欢我们的服务实现名称。我们将其命名为“WCFAccess”，而 Resharper 想要命名为“WcfAccess”。我刚刚发布了一个更新，将该版本安全地隔离在 git 中它自己的发布分支中，并认为这是在开发分支上执行重命名并关闭 Resharper 关于命名的好时机。我使用 Refactor->Rename 来更改文件的名称以匹配我们在 Resharper 配置中定义的命名约定。重命名操作完成，解决方案编译并运行，时间过去了，WCF 重命名被遗忘了。

快进几周，是时候将 Web 服务部署到测试环境以进行回归测试了。解决方案编译成功，发布成功，然后给了我 OP 发布的 EXACT 错误。我最终发现，几周前的重命名操作仅将源代码引用更新为旧名称，并没有重命名标记。当我导航到服务发布到的 Web 服务器并双击 .svc 文件时，它在 Visual Studio 中打开了标记，我注意到 CodeBehind="ServiceNameHere.svc.vb" 的字符大小写不一致使用新的命名约定。更新标记和 web.config 文件以引用正确的字符大小写解决了我的问题。

我希望这可以帮助别人。排除故障非常令人沮丧

（请不要因为我使用 VB.Net 而讨厌我，我继承了这个应用程序）:-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-23T16:19:57.140

我今天早些时候也遇到了同样的问题。Web 服务在本地主机上运行良好，但由于某种原因，尝试在另一个项目中添加服务引用时出现 400。

我的错误是由在服务的枚举上设置`[DataMember]`注释而不是注释引起的。`[EnumMember]`改变它解决了我的问题。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-10T08:39:10.793

网络服务不运行。

如果您无权访问运行此服务的服务器，则会被阻止。

否则，您需要检查服务器是否运行等。由于我不知道Java webservice是如何运行的，我无法进一步帮助您。

# c++ - 在 C++11 中是否可以支持不同级别的间接的模板化函数？

> ID：10085049
> 
> 赞同：3
> 
> 时间：2012-04-10T07:50:18.837
> 
> 标签：c++, templates, c++11, c-preprocessor, generic-programming

本质上，我很好奇您是否可以使用 C++11 模板来制作它，以便模板化函数可以检测迭代器的间接级别并根据此不同地编译函数。例如，下面是一些无法编译的代码：

```
#include <vector>
#include <list>
#include <type_traits>
#include <iostream>

struct MyStruct
{
  int value;
  MyStruct(int value = 42) : value(value) { }
  const int& getInt() const { return value; }
};

typedef std::list<MyStruct> StructList;
typedef std::vector<const MyStruct*> StructPtrVector;

template <typename ITER_TYPE>
const int& getIteratorInt(ITER_TYPE iter)
{
  if (std::is_pointer<decltype(*iter)>::value)
    return (*iter)->getInt(); // Won't compile -> MyStruct has no operator-> defined
  return iter->getInt(); // Won't compile -> MyStruct* has the wrong level of indirection
}

template <typename LIST_TYPE>
void PrintInts(const LIST_TYPE& intList)
{
  for (auto iter = intList.begin(); iter != intList.end(); ++iter)
    std::cout << getIteratorInt(iter) << std::endl;
}

int main(void)
{
  StructList structList;
  StructPtrVector structPtrs;
  int values[5] = { 1, 4, 6, 4, 1 };
  for (unsigned i = 0; i < 5; ++i)
  {
    structList.push_back(values[i]);
    structPtrs.push_back(&structList.back());
  }
  PrintInts(structList);
  PrintInts(structPtrs);

  return 0;
} 
```

最明显的情况是当你有一个对象列表，然后是一个不同类型的对象指针列表。而且，您想要对两个列表做同样的事情，将它们都视为对象列表。

上面的代码不会编译，因为它正在做一个应该在编译时完成的逻辑检查。我不知道是否有办法用预处理器宏来做到这一点。我尝试了一个简单的`#if std::is_pointer<decltype(*iter)>::value == true`，但编译器似乎总是认为它是错误的。（我以前从未尝试过很多预处理器宏，但这显然不是正确的方法。）

知道它是否可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T07:56:36.727

当您想根据元函数（例如`is_pointer`, use ）在两种实现之间进行选择时`std::enable_if`，它根据 SFINAE 的原理工作。

```
template <typename ITER_TYPE>
auto getIteratorInt(ITER_TYPE iter) ->
typename std::enable_if< std::is_pointer< 
        typename std::iterator_traits< ITER_TYPE >::value_type >::value,
    const int& >::type
{
  return (*iter)->getInt();
}

template <typename ITER_TYPE>
auto getIteratorInt(ITER_TYPE iter) ->
typename std::enable_if< ! std::is_pointer< 
        typename std::iterator_traits< ITER_TYPE >::value_type >::value,
    const int& >::type
{
  return iter->getInt();
} 
```

这样，模板实例化只能看到对给定模板参数有效的代码行。

我刚刚机械地将此修复应用于您的代码......我不提倡使用多重间接或建议固定实现是健壮的。

# sql-server - SQL Server 中的自增列并不总是从 1 开始？

> ID：10085051
> 
> 赞同：-2
> 
> 时间：2012-04-10T07:50:29.880
> 
> 标签：sql-server, sql-server-2005, auto-increment

我正在使用 SqlServer 2005，并且我有一个表，其中有一个自动递增列，但由于某种原因，自动递增字段不是以 1 开头，而是使用一些随机数，如 21,91。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:26:41.930

mssql 不像其他数据库那样使用 max(id) + 1 作为标识。它正在存储最后使用的 id 并递增它。

您可以重新设定身份：

```
DBCC CHECKIDENT ('tablex', RESEED, 1) 
```

或截断表，这也是删除所有数据：

```
TRUNCATE TABLE tablex 
```

您当然可以将身份重新种子与最后一个值结合起来：

```
DBCC CHECKIDENT ('tablex', RESEED, (SELECT max(id) + 1 FROM tablex)) 
```

但请注意，由于冲突而在重新播种 id 时会产生错误，自动增量 id 是唯一的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:55:33.543

您需要`Seed`为列设置...。或者如果您之前输入了行，则需要`TRUNCATE TABLE`在表上执行命令...

```
TRUNCATE TABLE XYZ 
```

# javascript - Jquery-Cycle 悬停在我的固定导航栏上方，我如何让它像其他所有东西一样落后于它？

> ID：10085056
> 
> 赞同：0
> 
> 时间：2012-04-10T07:50:49.303
> 
> 标签：javascript, jquery, html, css, jquery-cycle

在我的网站[www.staygold-design.com](http://staygold-design.com)上，我有一个固定的导航栏，它浮动在所有内容之上。

我在第二部分有一个 jquery 循环幻灯片放映（***单击投资组合并向右滚动页面以查看我要解释的内容***），它似乎漂浮在导航栏上方。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:58:03.900

使用 z-index 更改图层优先级。

```
#slideshowcontainer {
    z-index: 5;
}
#fixednav {
    z-index: 10;
} 
```

我刚刚在 Firebug 中进行了测试，它可以工作。不过，您可能需要添加`position: relative`到`#slideshowcontainer`它才能在所有浏览器中工作。

# jquery - jQuery - 如何获取没有前缀的选择器的字符串值

> ID：10085057
> 
> 赞同：2
> 
> 时间：2012-04-10T07:50:54.677
> 
> 标签：jquery, string, jquery-selectors

假设字符串'unenable-item'被用作选择器中字符串的一部分，我如何获取它，例如：

```
$('.unenable-item').click(function(){
  alert($(this).val());
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T07:55:50.500

```
$('.unenable-item').click(function(){
  alert($(this).attr("class"));
}); 
```

或更通用的方式

```
$('.unenable-item').click(function(){
  alert($('.unenable-item').selector);
}); 
```

在这种情况下，您将获得`.unenable-item`并且您必须使用该字符串并获得您想要的子字符串。

**编辑：**

`.selector`属性不能使用`$(this)`并且将始终返回空字符串，因为它每次都会创建新对象。所以我找到了解决方案。解决方案是为绑定事件创建新函数并使用该函数而不是简单的 jquery 函数。

*用法*

```
jQuery.fn.addEvent = function(type, handler) {
    this.bind(type, {'selector': this.selector}, handler);
}; 
```

在此之后你可以简单地得到你的选择器

```
$('.unenable-item').addEvent('click', function(event) {
        alert(event.data.selector);
}); 
```

请注意，我使用`addEvent`绑定单击的方法，而不是通过 Jquery 的`click`函数立即绑定。

您可以在 jsfiddle [http://jsfiddle.net/DFh7z/21/中查看示例](http://jsfiddle.net/DFh7z/21/)

# iis-7 - WCF 服务上的 IIS 7 URL 重写

> ID：10085064
> 
> 赞同：0
> 
> 时间：2012-04-10T07:51:53.873
> 
> 标签：iis-7, url-rewriting

**编辑问题以便更好地理解：**

我有一个 WCF 服务，我的任何链接看起来都像：

`https://192.168.1.31/ContactLibrary2.0HTTPS/Service.svc/.....`.

我想摆脱`Service.svc`. 我在 IIS 中安装了 URL Writer，但我不知道如何使用它。我搜索了一下，没有找到任何可以帮助我解决这个特定问题的东西。

```
Any idea ? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:27:14.587

假设您正在配置`/ContactLibrary2.0HTTPS`直接托管的应用程序（而不是包含该目录的网站，例如），您可以为以下内容添加完全匹配：

```
rest/GetContact 
```

重写网址为：

```
Service.svc/rest/GetContact 
```

但是，也许您希望重写Service.svc 的*每个*操作；那么你需要一个正则表达式匹配：

```
^rest/.*$ 
```

重写网址为：

```
Service.svc/{R:0} 
```

**更新**

假设您还需要从 HTML 页面的 url 中删除该字符串，则需要将上述入站规则与新的出站规则结合起来，应用于您感兴趣的文件。

为此，请：

1.  向您的网站添加新的出站规则并为其命名；
2.  添加具有两个规则的新前提条件（匹配其中任何一个）：
    *   `{RESPONSE_CONTENT_TYPE}`火柴`text/html`
    *   `{RESPONSE_CONTENT_TYPE}`火柴`application/xhtml+xmll`
3.  配置规则以匹配*响应*范围，匹配**A**标签内的内容：
    *   应该使用正则表达式匹配模式；
    *   使用这种模式：`^(.*)(/Service\.svc/)(.*)$`
    *   不区分大小写;
4.  将操作配置为*rewrite*，使用以下值：`{R:1}{R:3}`

# math - 三维空间中向量的极坐标

> ID：10085069
> 
> 赞同：2
> 
> 时间：2012-04-10T07:52:31.503
> 
> 标签：math, 3d

二维向量的极坐标为：

```
x = r cos θ
y = r sin θ 
```

3D 中向量的极坐标是 `(x, y, z)`多少？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-10T07:57:25.570

来自[维基百科](http://en.wikipedia.org/wiki/Curvilinear_coordinates#Example:_Spherical_coordinates)：

> x = r sin θ cos φ
> y = r sin θ sin φ
> z = r cos θ

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-10T08:10:07.027

这取决于您想要的 3D 坐标系。上述二维变换可以通过两个清晰的几何类似物扩展到球坐标和[柱坐标。](http://en.wikipedia.org/wiki/Cylindrical_coordinate_system)对于柱坐标的情况，您可以为 x 和 y 保留上述变换，但对于 z，变换将简单地由 z = z 给出。所以转换将是

```
(x, y, z) -> (r, theta, z) 
```

对于[球坐标](http://en.wikipedia.org/wiki/Spherical_coordinate_system)，在 z 方向上引入了额外的坐标变换（参见上面的 Ignacio Vazque-Abrams 答案），并且还更改了 x 和 y 变换。在这种情况下，您有

```
(x, y, z) -> (r, theta, phi) 
```

我认为在您的情况下，您最好使用圆柱坐标。我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T07:56:24.383

您可以使用球坐标系： [http ://en.wikipedia.org/wiki/Spherical_coordinate_system](http://en.wikipedia.org/wiki/Spherical_coordinate_system)

该链接显示了到 x、y、z 的转换。

# java - JAVA 到 Perl - 端口 XOR 加密器类

> ID：10085074
> 
> 赞同：1
> 
> 时间：2012-04-10T07:52:48.383
> 
> 标签：java, perl

我有一个 XOR“加密”类的以下 JAVA 类：

```
import java.io.PrintStream;

public class Encryptor
{

    private static final String m_strPrivateKey = "4p0L@r1$";

    public Encryptor()
    {
    }

    public static String encrypt(String pass)
    {
        String strTarget = XORString(pass);
        strTarget = StringToHex(strTarget);
        return strTarget;
    }

    public static String decrypt(String pass)
    {
        String strTarget = HexToString(pass);
        strTarget = XORString(strTarget);
        return strTarget;
    }

    private static String GetKeyForLength(int nLength)
    {
        int nKeyLen = "4p0L@r1$".length();
        int nRepeats = nLength / nKeyLen + 1;
        String strResult = "";
        for(int i = 0; i < nRepeats; i++)
        {
            strResult = strResult + "4p0L@r1$";
        }

        return strResult.substring(0, nLength);
    }

    private static String HexToString(String str)
    {
        StringBuffer sb = new StringBuffer();
        char buffDigit[] = new char[4];
        buffDigit[0] = '0';
        buffDigit[1] = 'x';
        int length = str.length() / 2;
        byte bytes[] = new byte[length];
        for(int i = 0; i < length; i++)
        {
            buffDigit[2] = str.charAt(i * 2);
            buffDigit[3] = str.charAt(i * 2 + 1);
            Integer b = Integer.decode(new String(buffDigit));
            bytes[i] = (byte)b.intValue();
        }

        return new String(bytes);
    }

    private static String XORString(String strTarget)
    {
        int nTargetLen = strTarget.length();
        String strPaddedKey = GetKeyForLength(nTargetLen);
        String strResult = "";
        byte bytes[] = new byte[nTargetLen];
        for(int i = 0; i < nTargetLen; i++)
        {
            int b = strTarget.charAt(i) ^ strPaddedKey.charAt(i);
            bytes[i] = (byte)b;
        }

        String result = new String(bytes);
        return result;
    }

    private static String StringToHex(String strInput)
    {
        StringBuffer hex = new StringBuffer();
        int nLen = strInput.length();
        for(int i = 0; i < nLen; i++)
        {
            char ch = strInput.charAt(i);
            int b = ch;
            String hexStr = Integer.toHexString(b);
            if(hexStr.length() == 1)
            {
                hex.append("0");
            }
            hex.append(Integer.toHexString(b));
        }

        return hex.toString();
    }

    public static void main(String args[])
    {
        if(args.length < 1)
        {
            System.err.println("Missing password!");
            System.exit(-1);
        }
        String pass = args[0];
        String pass2 = encrypt(pass);
        System.out.println("Encrypted: " + pass2);
        pass2 = decrypt(pass2);
        System.out.println("Decrypted: " + pass2);
        if(!pass.equals(pass2))
        {
            System.out.println("Test Failed!");
            System.exit(-1);
        }
    }
} 
```

我试图像这样将它移植到 Perl：

```
#!/usr/bin/perl

use strict;
use warnings;

my $pass = shift || die "Missing password!\n";
my $pass2 = encrypt($pass);
print "Encrypted: $pass2\n";
$pass2 = decrypt($pass2);
print "Decrypted: $pass2\n";
if ($pass ne $pass2) {
    print "Test Failed!\n";
    exit(-1);
}

sub encrypt {
    my $pass = shift;
    my $strTarget = XORString($pass);
    $strTarget = StringToHex($strTarget);
    return $strTarget;
}

sub decrypt {
    my $pass = shift;
    my $strTarget = HexToString($pass);
    $strTarget = XORString($strTarget);
    return $strTarget;
}

sub GetKeyForLength {
    my $nLength = shift;
    my $nKeyLen = length '4p0L@r1$';
    my $nRepeats = $nLength / $nKeyLen + 1;
    my $strResult = '4p0L@r1$' x $nRepeats;
    return substr $strResult, 0, $nLength;
}

sub HexToString {
    my $str = shift;
    my @bytes;

    while ($str =~ s/^(..)//) {
        my $b = eval("0x$1");
        push @bytes, chr sprintf("%d", $b);
    }
    return join "", @bytes;
}

sub XORString {
    my $strTarget = shift;
    my $nTargetLen = length $strTarget;
    my $strPaddedKey = GetKeyForLength($nTargetLen);
    my @bytes;

    while ($strTarget) {
        my $b = (chop $strTarget) ^ (chop $strPaddedKey);
        unshift @bytes, $b;
    }
    return join "", @bytes;
}

sub StringToHex {
    my $strInput = shift;
    my $hex = "";
    for my $ch (split //, $strInput) {
        $hex .= sprintf("%02x", ord $ch);
    }
    return $hex;
} 
```

代码看起来不错，但问题是 JAVA 类输出的结果与 Perl 代码不同。在 JAVA 中，我有纯文本密码

> 薄荷糖

它被编码为

> &4\=80CHB'

我应该如何处理我的 Perl 脚本以获得相同的结果？我哪里做错了？

另外两个例子：纯文本

> 07ch4ssw3bby

被编码为：

> ,#(0\=DM.'@'8WQ2T

（注意@后面的空格）

最后一个例子，纯文本：

> conf75

编码为：

> &7]P0G-#!

感谢帮助！

最后，感谢 Joni Salonen：

```
#!/usr/bin/perl
# XOR password decoder
# Greets: Joni Salonen @ stackoverflow.com

$key = pack("H*","3cb37efae7f4f376ebbd76cd");

print "Enter string to decode: ";
$str=<STDIN>;chomp $str; $str =~ s/\\//g;
$dec = decode($str);
print "Decoded string value: $dec\n";

sub decode{ #Sub to decode
    @subvar=@_;
    my $sqlstr = $subvar[0];
    $cipher = unpack("u", $sqlstr);
    $plain = $cipher^$key;
    return substr($plain, 0, length($cipher));
} 
```

我唯一也是最后一个问题是，当找到“\”（实际上是“\\”作为转义真实字符的字符）时，解密出错：-\ 示例编码字符串：

> "(4\\4XB\:7"G@, "

（我用双引号对其进行了转义，字符串的最后一个字符是一个空格，它应该解码为

> “ovFsB6mu”

更新：感谢 Joni Salonen，我有 100% 的最终版本：

```
#!/usr/bin/perl
# XOR password decoder
# Greets: Joni Salonen @ stackoverflow.com

$key = pack("H*","3cb37efae7f4f376ebbd76cd");

print "Enter string to decode: ";
$str=<STDIN>;chomp $str; $str =~s/\\(.)/$1/g;
$dec = decode($str);
print "Decoded string value: $dec\n";

sub decode{ #Sub to decode
    @subvar=@_;
    my $sqlstr = $subvar[0];
    $cipher = unpack("u", $sqlstr);
    $plain = $cipher^$key;
    return substr($plain, 0, length($cipher));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:14:01.477

您的加密循环会跳过`$strTarget`if 它的第一个字符`'0'`。您可以将其与空字符串进行比较，而不是检查它是否为“真”：

```
while ($strTarget ne '') {
    my $b = (chop $strTarget) ^ (chop $strPaddedKey);
    unshift @bytes, $b;
} 
```

**更新：**这个程序解密你的字符串：

```
use feature ':5.10';

$key = pack("H*","3cb37efae7f4f376ebbd76cd");

say decrypt("&4\=80CHB'");          # mentos
say decrypt(",#(0\=DM.'@ '8WQ2T");  # 07ch4ssw3bby
say decrypt("&7]P0G-#!");           # conf75

sub decrypt {
    $in = shift;
    $cipher = unpack("u", $in);
    $plain = $cipher^$key;
    return substr($plain, 0, length($cipher));
} 
```

# node.js - 节点 http 代理 SSL 透明

> ID：10085082
> 
> 赞同：4
> 
> 时间：2012-04-10T07:53:36.263
> 
> 标签：node.js, ssl, https, proxy

在我的设置中，我有 2 层透明代理。当客户端发出 SSL 请求时，我希望它遇到的第一个代理只需将流量转发到另一个代理，而不尝试与客户端握手。

设置看起来很有趣，但在我的情况下是合理的 - 第二个代理仅偶尔（通过其他一些服务）将自己注册到第一个代理。它告诉第一个：“我对一些看起来像*_* _ _ 的流量感兴趣”。在大多数情况下，第一个代理只是简单地完成工作。

httpProxy（在节点代理中）可以代理 SSL 请求吗？我必须使用 httpsProxy（然后它将与客户端握手）吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T10:24:37.510

如果您愿意，您可以使用现有的 httpsProxy 来完成所有这些操作。除非您想使用非节点代理或代理到不同的服务器，否则我看不出拥有两个代理会获得什么。

只需将所需的日志记录/签名逻辑添加到现有的 httpsProxy。

通常，我在代理上使用 https 来限制打开端口的数量并消除在所有运行的节点服务器上执行 https 的需要。您也可以使用 http-basic 库添加基本身份验证。

请参阅我的示例代码：[https ://github.com/TotallyInformation/node-proxy-https-example/blob/master/proxy.js](https://github.com/TotallyInformation/node-proxy-https-example/blob/master/proxy.js)

编辑 2012-05-15：嗯，经过一番思考，我想知道你是否不应该看像[stunnel](http://www.stunnel.org/)这样的东西来做你想做的事情而不是 Node？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T01:16:20.373

[（作为参考，我在回答您关于 ServerFault 的类似问题时](https://serverfault.com/a/371527/47187)已经提出了其中的一些观点。）

*   如果您使用 MITM 代理（即，可以使用自己的证书查看 SSL 内容的代理，只要客户端配置为信任它们就可以工作），它几乎不会完全透明，因为您将在至少必须配置其客户端以信任其证书。

    此外，除非您的所有客户端都使用服务器名称指示扩展，否则代理本身将无法可靠地确定为哪个主机颁发其证书（普通 HTTPS 代理通过查看`CONNECT`由客户端）。

*   如果您*不*使用 MITM 代理，那么您不妨让初始连接通过您的路由器。如果您想记录该流量，您的路由器可能能够记录加密数据包。

    让您的路由器捕获 SSL/TLS 数据包以将它们透明地发送到代理，该代理最终只会将未触及的流量中继到目标服务器并没有多大意义。（本质上，透明代理将暗示客户端未配置为知道它，因此它甚至不会发送`CONNECT`您可以使用请求的主机和端口的方法。在这里，您真的没有更多比路由器所能做的。）

    **编辑：**再一次，您根本*无法*使用 HTTP 代理透明地分析连接的内容。即使使用普通代理，HTTPS 连接也会直接中继到目标服务器。SSL/TLS 连接本身是在原始客户端和目标服务器之间建立的。使用 SSL/TLS 的目的是保护此连接，并让客户端注意到是否有东西试图查看连接内部。

    普通 HTTP 透明代理服务器之所以起作用，是因为 (a) 可以看到流量（特别是，请求行和 HTTP`Host`标头是可见的，因此代理可以知道自己发出哪个请求）和 (b) 可以透明地更改流量这样最初的客户就不会注意到请求不是直接的，并且就像它是一样的。

    这些条件都不适用于 HTTPS。通过 HTTP 代理的 HTTPS 连接只是隧道，在来自客户端的显式请求之后，客户端已发送`CONNECT`命令并配置为使用此类代理。

    为了做一些接近你所追求的事情，你需要一个 SSL/TLS 服务器来接受 SSL/TLS 连接并在你的 HTTP 代理之前对其进行解密（可能类似于 STunnel）。但是，这不会是透明的，因为它无法生成正确的证书。

# spring - 杰克逊注释在春季被忽略

> ID：10085088
> 
> 赞同：15
> 
> 时间：2012-04-10T07:54:22.200
> 
> 标签：spring, jackson

我正在尝试隐藏域类中的属性，但它一直出现在输出的 JSON 中。我正在使用 Jackson 2.0 和 Spring 3.1.1

/users/1 的输出：

```
{"id":1,"password":null,"email":"someone@somewhere.com","firstName":"John","lastName":"Smith"} 
```

我的域类：

```
@Entity
public class User {
    private String mPassword;
    ... 
    @JsonIgnore
    public String getPassword() {
        return mPassword;
    }

    public void setPassword(String password) {
        mPassword = password;
    }
    ...
} 
```

我的springmvc配置：

```
...
<mvc:annotation-driven/>
<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
    <property name="favorPathExtension" value="true" />
    <property name="mediaTypes">
        <map>
            <entry key="json" value="application/json"/>
        </map>
    </property>
    <property name="defaultContentType" value="application/json"/>
    <property name="defaultViews">
        <list>
            <bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
        </list>
    </property>
</bean>
... 
```

我的控制器：

```
@Controller
@RequestMapping("/users")
public class UserController {
    private UserService mUserService;

    public UserController(){}

    @Inject
    public void setUserController(UserService userService){
        mUserService=userService;
    }

    @RequestMapping(value="/{id}", method=RequestMethod.GET)
    public void getUser(@PathVariable("id") long id, Model model){
        model.addAttribute(mUserService.getUser(id));
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-15T21:17:47.717

对 Jackson 2 的支持已添加到 Spring 3.1.2（从 Spring 3.2 - [SPR-9507](https://jira.springsource.org/browse/SPR-9507)向后移植）。只需将您的项目从 Spring 3.1.1 升级到 Spring 3.1.2，Jackson 2 就可以使用您已有的配置。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-11T18:01:46.983

问题是 Spring 不适用于 Jackson 2.0。这已通过以下方式解决：

```
<bean id="jacksonMessageConverter"
          class="own.implementation.of.MappingJacksonHttpMessageConverter"/>

<bean class="org.springframework.web.servlet.mvc
             .annotation.AnnotationMethodHandlerAdapter">
        <property name="messageConverters">
            <list>
                <ref bean="jacksonMessageConverter"/>
            </list>
        </property>
        <property name="requireSession" value="false"/>
    </bean> 
```

而own.implementation.of.MappingJacksonHttpMessageConverter就是基于这个：

[http://www.jarvana.com/jarvana/view/org/springframework/spring-web/3.0.0.RELEASE/spring-web-3.0.0.RELEASE-sources.jar!/org/springframework/http/converter /json/MappingJacksonHttpMessageConverter.java?format=ok](http://www.jarvana.com/jarvana/view/org/springframework/spring-web/3.0.0.RELEASE/spring-web-3.0.0.RELEASE-sources.jar!/org/springframework/http/converter/json/MappingJacksonHttpMessageConverter.java?format=ok)

但是使用来自 Jackson 2.0 的 ObjectMapper 和其他 Jackson 类而不是 Jackson 1.*

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-04-20T04:57:20.977

如果您使用的是 Spring 4 版本，则必须执行以下操作，更新依赖项

```
<dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-core</artifactId>
        <version>2.3.3</version>
    </dependency>

<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>2.3.3</version>
</dependency> 
```

将旧的 codehaus 注释导入替换为以下内容，如果不这样做，您的旧注释（如 JsonIgnoreProperties）将不适用于新版本的 Jackson

```
import com.fasterxml.jackson.annotation.*; 
```

从下面删除 mediaTypes，它已被弃用。

> 内容协商视图解析器

, 不需要，将从激活框架jar中提取，Jackson视图应该使用

> 映射Jackson2JsonView

```
<beans:property name="viewResolvers">
    <beans:list>
        <beans:bean
            class="org.springframework.web.servlet.view.BeanNameViewResolver" />
        <beans:bean
            class="org.springframework.web.servlet.view.InternalResourceViewResolver">
            <beans:property name="prefix" value="/WEB-INF/views/" />
            <beans:property name="suffix" value=".jsp" />
        </beans:bean>
        <beans:bean
            class="org.springframework.web.servlet.view.tiles3.TilesViewResolver">
            <beans:property name="viewClass"
                value="org.springframework.web.servlet.view.tiles3.TilesView"></beans:property>
            <beans:property name="order" value="0"></beans:property>
        </beans:bean>
    </beans:list>
</beans:property>
<beans:property name="defaultViews">
    <beans:list>
        <beans:bean
            class="org.springframework.web.servlet.view.json.MappingJackson2JsonView" />
    </beans:list>
</beans:property> 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-17T07:36:27.800

除了升级到`Spring 3.1.2`，您还必须将消息转换器更改为 `org.springframework.web.servlet.view.json.MappingJackson**2**HttpMessageConverter`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T08:17:40.870

我的配置看起来像这样

```
<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver" p:order="1">
  <property name="mediaTypes">
    <map>
      <entry key="html" value="text/html"/>
      <entry key="json" value="application/json"/>
    </map>
   </property>
  <property name="viewResolvers">
    <!-- this is not important for your jackson problem -->
    <bean id="tilesViewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver" p:viewClass="org.springframework.web.servlet.view.tiles2.TilesView" p:order="2" depends-on="tilesConfigurer"/>
  </property>
  <property name="defaultViews">
    <list>
      <bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView"/>
    </list>
  </property>
</bean> 
```

我的控制器看起来像这样

```
@Controller
public class SearchController {
   @RequestMapping(value="/search", method = {RequestMethod.GET, RequestMethod.POST})
   public SearchResponse search(@RequestParam(value = QUERY, required = true) String query) {
       return generateSearchResponse(query);
   }
} 
```

我的 SearchResponse 结构更复杂，但它包含这种类型的对象。

```
@JsonIgnoreProperties({ "popis" })
public class Kurz implements Serializable {
    private String nazev;
    private String popis;
} 
```

# c# - C#Activex 事件未触发

> ID：10085091
> 
> 赞同：3
> 
> 时间：2012-04-10T07:54:31.580
> 
> 标签：c#, javascript, com, activex

我写了一个简单的 .Net Com activex，我可以通过 javascript 管理一些事件。我读了很多帖子，文章，但无事可做。客户端，我无法使用任何一种 javascript 语法（attachEvent、函数名等）捕获任何事件。

以下是关于我的 activex 的代码片段：

```
[ComVisible(true)]
    [InterfaceType(ComInterfaceType.InterfaceIsDual)]
    [Guid("61327C9D-EFC5-42B7-BA0D-4A8648797003")]
    public interface IHelloWorld
    {
        string GetText();
    }

    [ComVisible(true)]
    [InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
    [Guid("61327C9D-EFC5-42B7-BA0D-4A8648797003")]
    public interface IMyEvt
    {
        [DispId(1)]
        void OnMyEvt(int prm);
    }

    [ComImport()]
    [Guid("13AD0E8B-BA3F-4CDE-A7D4-8A311EC1766B")]
    [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
    interface IObjectSafety
    {
        [PreserveSig()]
        int GetInterfaceSafetyOptions(ref Guid riid, out int pdwSupportedOptions, out int pdwEnabledOptions);

        [PreserveSig()]
        int SetInterfaceSafetyOptions(ref Guid riid, int dwOptionSetMask, int dwEnabledOptions);
    }

    [ComVisible(true)]
    [ClassInterface(ClassInterfaceType.None)]
    [Guid("32E6AD29-DD5F-46EA-A4D1-BD2F1E3EE064")]
    [ProgId("AxControls.HelloWorld")]
    [ComSourceInterfaces(typeof(IMyEvt))]
    public class HelloWorld : UserControl, IHelloWorld, IObjectSafety
    {
        [ComVisible(false)]
        public delegate void OnMyEvtDelgate(int prm);

        [DispId(1)]
        public event OnMyEvtDelgate OnMyEvt;

        public HelloWorld()
        {
            this.OnMyEvt += new OnMyEvtDelgate(Dummy);
        }

        void Dummy(int param) { }

        #region IHelloWorld Members

        public string GetText()
        {
            return "Hello ActiveX World!";
        }

        #endregion

        #region IObjectSafety Members

        public enum ObjectSafetyOptions
        {
            INTERFACESAFE_FOR_UNTRUSTED_CALLER = 0x00000001,
            INTERFACESAFE_FOR_UNTRUSTED_DATA = 0x00000002,
            INTERFACE_USES_DISPEX = 0x00000004,
            INTERFACE_USES_SECURITY_MANAGER = 0x00000008
        };

        public int GetInterfaceSafetyOptions(ref Guid riid, out int pdwSupportedOptions, out int pdwEnabledOptions)
        {
            ObjectSafetyOptions m_options = ObjectSafetyOptions.INTERFACESAFE_FOR_UNTRUSTED_CALLER | ObjectSafetyOptions.INTERFACESAFE_FOR_UNTRUSTED_DATA;
            pdwSupportedOptions = (int)m_options;
            pdwEnabledOptions = (int)m_options;
            return 0;
        }

        public int SetInterfaceSafetyOptions(ref Guid riid, int dwOptionSetMask, int dwEnabledOptions)
        {
            return 0;
        }

        #endregion

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T09:48:13.427

您应该能够以这种方式附加事件：

```
<script type="text/javascript">     
var activex = new ActiveXObject("AxControls.HelloWorld");
        function raise() {
            eval("function activex::HelloWorld(prm) {return onHelloWorld(prm);}");
            activex.HelloWorld();
        }

        function onHelloWorld(prm) {
            alert(prm);
            return true;
        }

    </script> 
```

# ant - 使用 ant build 扫描类路径会产生不同的结果

> ID：10085095
> 
> 赞同：1
> 
> 时间：2012-04-10T07:54:43.140
> 
> 标签：ant, build, java

我有一个 Ant 任务，它扫描整个 Java 项目类路径以查找某些类文件。

*该方法非常幼稚：*

*   在搜索路径的根目录创建一个 File 对象，然后递归搜索类文件。
*   对于每个类文件，使用 CURRENT ClassLoader (this.getClass.getClassLoader) 和 loadClass() 来加载类。
*   检查加载的类是否是某个类的实例。

奇怪的是，如果我在调试模式下运行构建并在 JRE 启动选项卡中选择“单独的 JRE”，构建大约需要 8 秒。如果我选择“在与工作区相同的 JRE 中运行”，则构建大约需要 40 秒。

我的项目还包括 10K 左右的类文件。在调试模式下，暂停构建清楚地表明大部分时间都浪费在 loadClass() 上。

我的猜测是“单独的 JRE”以某种方式导致构建以最小的类路径运行，因此类加载过程更快..？不过没多大意义。。

有人在这个问题上领先吗？

提前致谢。

# php - 密码不区分大小写

> ID：10085098
> 
> 赞同：2
> 
> 时间：2012-04-10T07:55:04.593
> 
> 标签：php, mysql

我在创建的网站中有一个登录表单。我使用 PHP 验证密码，密码存储在 MYSQL 数据库中。我面临的问题是密码不区分大小写。它接受字符而不考虑大小写.我正在使用 Kubuntu linux 操作系统

有人可以帮忙解决这个问题吗？我应该在 mysql/my.cnf 中为 COLLATION 使用什么值来避免这种情况？或者还有其他解决方案吗？

任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T07:56:35.867

您的 MySQL**排序规则可能不区分大小写**。将存储密码的列更改为区分大小写的排序规则。

一些经验法则：

*   当排序规则以 _ci 结尾时，它不区分大小写。
*   当排序规则以 _cs 结尾时，它区分大小写。

例子：

*   utf8_general_ci 不区分大小写。
*   utf8_bin 区分大小写

### 然而，一个重要的注意事项

如果您遇到此问题，则**可能是您存储的密码错误**。您不应该以纯文本形式存储密码，而应该存储密码的哈希值，并正确加盐。

然后，当用户登录时，您对他的条目进行哈希处理，并将哈希值与您的数据库保存的内容进行比较。当两者相等时，用户可能输入了正确的密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T07:58:55.913

这意味着您以明文形式存储密码，这通常不是一个好主意。无论如何，一种选择是检索密码并在 PHP 中而不是在 WHERE 子句中进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T07:58:59.580

解决问题的另一种方法是在将密码存储到数据库之前对其进行哈希处理。这也将提高安全性，因为密码不会未加密地存储在数据库中。

```
$hash_to_store_in_database = sha1($password); 
```

您可以在网上搜索如何存储散列密码、使用盐和所有其他安全措施。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T07:59:11.343

虽然 Konerak 的答案是正确的，但我会采用不同的方式，不以明文形式存储密码，而是以散列形式存储，可能是`md5`or `sha1`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T08:02:32.327

似乎您正在以一般文本形式存储密码。否则排序规则`utf8_general_ci`一般不应该是一个问题。

在存储密码时，您应该使用 md5() 或 sha1() 对密码进行哈希处理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T08:00:16.303

您可以在 php中使用*strcmp函数或使用类似*

```
"SELECT [...] WHERE BINARY tablename.password = $form_password" 
```

# c# - 使用 CrystalDecisions 打开 Visual Studio 2005 C# 项目

> ID：10085104
> 
> 赞同：0
> 
> 时间：2012-04-10T07:55:23.557
> 
> 标签：c#, crystal-reports, visual-studio-2005

首先，我很抱歉我的英语不好，这不是我的母语。我是企业新手，我必须重新编写 C# 应用程序。此应用程序与 CrystalReport 相关，并使用许多称为“CrystalDecisions.blabla”的引用。

我的问题是：默认情况下，项目使用 Microsoft Visual C# 2008 打开，但缺少对 CrystalDecisions 的引用。第一个开发该应用程序的人正在使用 Microsoft Visual Studio 2005，但我电脑上安装的那个不支持 C#，只支持 sql server。

我应该做些什么？是否有一些库可以下载以在 Visual C# 2008 上使用？是否必须重新安装 Visual Studio 2005 才能支持 C#？

提前致谢 ：）

编辑：我实际上有一个我从未注意到的名为“CRRedist2005_x86.msi”的文件。安装这些 redist 后，参考工作正常。谢谢你们的快速回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:00:09.220

Crystal Reports 引用链接到 Visual Studio 找不到的文件。将这些 DLL 文件复制到您的计算机并重新链接参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:02:03.837

1.  我不会下载新的二进制文件`VS 2008`，因为考虑到以前的版本是打开的 `VS 2005`，这意味着它可以编译`.NET 2.0`，所以为了支持原始的 CrystlReport 二进制文件，它足以让您将项目的目标框架设置为版本`2.0`
2.  （我认为）安装 VS 2008 并且不支持 C# 几乎是不可能的。我*想*您说的是免费的*ExpressEditions 。*可以在[这里](http://msdn.microsoft.com/en-us/express/future/bb421473)查看下载 2008 年的 C#。如果你想要的话。我建议，此时立即下载[Visual C# 2010 Express](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/express)。

希望这可以帮助。

# javascript - 什么时候应该使用 .innerHTML，什么时候应该在 JavaScript 中使用 document.write

> ID：10085109
> 
> 赞同：15
> 
> 时间：2012-04-10T07:55:42.710
> 
> 标签：javascript

是否有一般规则，何时应该使用`document.write`更改网站内容以及何时使用`.innerHTML`？

到目前为止，我的规则是：

1)**添加**新内容`document.write`时使用

 **2)**更改**现有内容`.innerHTML`时使用

 **但我很困惑，因为有人告诉我，一方面这`.innerHTML`是一个奇怪的 Microsoft 标准，但另一方面我读到`document.write`XHTML 中不允许这样做。

我应该使用哪些结构来使用 JavaScript 操作我的源代码？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-10T08:11:58.023

`innerHTML`可用于通过字符串修改来更改 DOM 的内容。因此，如果您想在所选元素的末尾添加带有一些文本的段落，您可以这样做

`document.getElementById( 'some-id' ).innerHTML += '<p>here is some text</p>'`

尽管我建议尽可能多地使用特定于 DOM 操作的 API（例如`document.createElement`、`document.createDocumentFragment`、`<element>.appendChild`等）。但这只是我的偏好。

我唯一一次看到适用的用法`document.write`是在[HTML5 Boilerplate 中](http://h5bp.com/)（看看它如何检查 jQuery 是否正确加载）。除此之外，我会远离它。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-10T08:11:27.223

`innerHTML`并且`document.write`不是动态更改/插入内容的真正可比方法，因为它们的用法不同并且用于不同的目的。

`document.write`应该与特定的用例相关联。当页面已加载且 DOM*准备就绪*时，您将无法再使用该方法。这就是为什么通常最常用于条件语句中，您可以在其中使用它来同步加载外部 javascript 文件（javascript 库），包括`<script>`块（例如，当您从 CDN 中加载 jQuery 时`HTML5 Boilerplate`）。

当页面与`application/xhtml+xml`mime 类型一起提供时，您所读到的有关此方法和 XHTML 的内容是正确的：来自[w3.org](http://www.w3.org/MarkUp/2004/xhtml-faq#docwrite)

> document.write（如 document.writeln）在 XHTML 文档中不起作用（您将在错误控制台上收到“不支持操作”（NS_ERROR_DOM_NOT_SUPPORTED_ERR）错误）。如果打开具有 .xhtml 文件扩展名的本地文件或使用 application/xhtml+xml MIME 类型提供的任何文档，就会出现这种情况

这些方法之间的另一个区别与*插入节点*有关：当您使用`.innerHTML`方法时，您可以选择在何处附加内容，而使用 document.write 插入节点始终是使用此方法的文档部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-01T06:33:19.140

1) document.write() puts the contents directly to the browser where the user can see it.

this method writes HTML expressions or JavaScript code to a document.

The below example will just print ‘Hello World’ into the document

```
<html>
  <body>
    <script>
    document.write("Hello World!");
    </script>
  </body>
</html> 
```

2) document.innerHTML changes the inner content of an element

It changes the existing content of an element

The below code will change the content of p tag

```
<html>
<body>
<p id="test" onclick="myFun()">Click me to change my HTML content or my inner HTML</p>
<script>
function myFun() {
  document.getElementById("test").innerHTML = "I'm replaced by exiesting element";
}
</script>
</body>
</html> 
```

you could use document.write() without any connected HTML, but if you already have HTML that you want to change, then document.innerHTML would be the obvious choice.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-23T12:33:21.123

我同意上述评论。基本上：

*   **document.write**在页面加载时很有用，可以在浏览器构建文档对象模型时输出新的 HTML 标记或内容。该内容在嵌入 JavaScript 语句的位置精确输出。
*   **.innerHTML**可随时将新的 HTML 标记/内容作为字符串插入，并且无论何时/何地运行 JavaScript，都可以更轻松地将其定向到 DOM 中的特定元素。

一些额外的注释......

当从 body 元素之外的脚本调用 document.write 时，如果在页面加载时调用，它的输出将附加到 body 元素；但是一旦页面被加载，同一个 document.write 将覆盖整个文档对象模型，从而有效地擦除您的页面。这完全取决于 document.write 与页面加载的时间。

如果您使用 document.write 将新内容附加到 body 元素的末尾，则最好使用以下方法：

```
document.body.innerHTML += "A string of new content!"; 
```

它更安全一些。****

# c# - 如何在 Windows 中获取/设置当前位置？

> ID：10085115
> 
> 赞同：4
> 
> 时间：2012-04-10T07:56:29.017
> 
> 标签：c#, windows, regional-settings

我需要能够在 Win 7 中获取/设置当前位置（控制面板 -> 区域和语言 -> 位置）：

![Win7：控制面板->区域和语言->位置](../Images/7371ab40e504e2c992333128ac25f6b3.png)

`RegionInfo.CurrentRegion`不起作用（我可以以错误的方式使用它吗？？）

与 相同`CultureInfo`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T08:44:01.493

好的，您需要更改 Windows 注册 HKEY_CURRENT_USER\Control Panel\International\Geo 并且您需要更改“国家”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T08:03:40.703

数据存储在注册表中。您需要覆盖这些键。

要了解它在注册表中的存储位置，请阅读本文： http: [//www.windowsitpro.com/article/registry2/jsi-tip-0311-regional-settings-in-the-registry-](http://www.windowsitpro.com/article/registry2/jsi-tip-0311-regional-settings-in-the-registry-)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-10T08:06:29.310

您可以使用此代码

```
CultureInfo _CultureInfo = new CultureInfo("ru-RU");                
            Application.CurrentInputLanguage = InputLanguage.FromCulture(_CultureInfo);
            Application.CurrentCulture = _CultureInfo; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-10T08:06:59.380

试试这个： System.Globalization.CultureInfo myCulture = new System.Globalization.CultureInfo("es-ES");

# c# - 在 Windows 7 64 位上使用 Assembly.LoadFile 的 FileNotFoundException

> ID：10085120
> 
> 赞同：2
> 
> 时间：2012-04-10T07:56:50.387
> 
> 标签：c#, .net, 64-bit, assemblies

我正在尝试加载一个混合的托管/本机 dll，我为 32 位和 64 位编译了它。如果我在 Windows 7 32 位上运行我的程序，我可以毫无问题地加载 32 位 dll。如果我加载 64 位 dll，我会得到 BadImageFormatException，这是我所期望的。

我遇到的问题是当我在 Windows 7 64 位下进行相同的测试时：

如果我加载 32 位 dll，我会得到 BadImageFormatException。到目前为止还可以。

但是如果我加载 64 位 dll，我会得到 FileNotFoundException。而且这个信息是不正确的，因为我事先检查了这个 dll 的存在！

谁能告诉我，为什么我不能在 windows 7 64 位下加载我的 64 位 dll？

这是我的示例代码：

```
 private void Button32_Click(object sender, RoutedEventArgs e)
    {
        string path = System.IO.Path.Combine(AppDomain.CurrentDomain.SetupInformation.ApplicationBase, "x86", "Native.dll");
        LoadAssembly(path);
    }
    private void Button64_Click(object sender, RoutedEventArgs e)
    {
        string path = System.IO.Path.Combine(AppDomain.CurrentDomain.SetupInformation.ApplicationBase, "amd64", "Native.dll");
        LoadAssembly(path);
    }

    void LoadAssembly(string path)
    {
        if(File.Exists(path))
        {
            MessageBox.Show("Loading " + path);
            Assembly asm = null;
            try
            {
                asm = Assembly.LoadFile(path);
            }
            catch(Exception ex)
            {
                MessageBox.Show("Exception!!!\n" + ex);
            }
            MessageBox.Show("Success " + (asm == null ? "no" : "yes"));
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:49:13.307

您应该尝试知道无法加载哪个程序集，因为您尝试加载的程序集可能具有无法找到的引用。或存在参考，但适用于 32 位，而不是 64 位版本

尝试使用[Fusion 日志](http://www.ademiller.com/blogs/tech/2008/01/gotchas-fusion-log-viewer-your-best-friend-for-assembly-load-errors/)准确了解缺少哪个程序集

# javascript - 使用 JavaScript 操作 SVG 视图框（无库）

> ID：10085123
> 
> 赞同：46
> 
> 时间：2012-04-10T07:57:10.690
> 
> 标签：javascript, svg, viewbox

我正在尝试更改 JavaScript 中的 SVG 元素视图框。基本上，我正在绘制一个二叉搜索树，当它变得太宽时，我想改变视图框以缩小以便树适合窗口。我目前正在使用：

```
if(SVGWidth>=1000){
  var a = document.getElementById('svgArea');
  a.setAttribute("viewbox","0 0 " + SVGWidth + " 300");
} 
```

HTML 是：

```
<svg id="svgArea" xmlns="w3.org/2000/svg"; xmlns:xlink="w3.org/1999/xlink"; width="1000" height="300" viewBox="0 0 1000 300"> 
```

我也尝试过使用 setAttributeNS('null',...) 但这似乎也不起作用。我注意到的一件奇怪的事情是，当我 alert(a) 时，它给出的 [object SVGSVGElement] 看起来很奇怪。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-04-10T08:05:17.250

很高兴看到 svg 的上下文，但以下内容对我来说适用于纯 SVG 文档：

```
shape = document.getElementsByTagName("svg")[0];
shape.setAttribute("viewBox", "-250 -250 500 750"); 
```

也许是因为`viewBox`区分大小写？

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-10-17T18:05:47.250

您的代码中有错误：“viewbox”与“viewBox”不同...B 为大写。将代码更改为：

```
a.setAttribute("viewBox","0 0 " + SVGWidth + " 300"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-21T06:37:34.223

我有一个非常相似的用例，其中调整 SVG 的大小对于响应式设计至关重要。

```
const windowWidth = window.innerWidth ||
  document.documentElement.clientWidth ||
  document.body.clientWidth;

const windowHeight = window.innerHeight ||
  document.documentElement.clientHeight ||
  document.body.clientHeight;

// used getElementById for specific SVG
const shape = document.getElementById("background-svg");

function onWindowResize(){
console.log(windowWidth, windowHeight);

if (windowWidth < 600 || windowHeight < 900) {
  shape.setAttribute("viewBox", "0 0 400 800");
}

// Added an Event Listener
window.addEventListener("resize", onWindowResize); 
```

这种方法对我来说效果很好，我希望还有改进的空间，很高兴找到替代解决方案。快乐编码！

# .net - 在 VS2010 数据库项目中部署时设置 DefaultDataPath 和 DefaultLogPath

> ID：10085124
> 
> 赞同：2
> 
> 时间：2012-04-10T07:57:20.547
> 
> 标签：.net, visual-studio-2010, sql-server-2008, sql-server-2005, database-project

确实，以下查询最初不是我的，但我在工作中面临着确切的问题。从而照原样复制问题陈述。我找不到任何解决方案。我非常感谢以下问题集的任何建议或亮点：

> 我在 Schema Objects\Database Level Objects\Storage\Files 中没有任何硬编码 - 在数据库和日志文件中都是如此。
> 
> 当我从 db 项目中单击“部署”时生成的部署脚本在 :SETVAR 中有硬编码，其中数据库和日志文件路径分配给 $(DefaultDataPath) 和 $(DefaultLogPath) - 见下文： :setvar DefaultDataPath "C:\DB\ Microsoft SQL Server\MSSQL10_50.MITCHELL\MSSQL\DATA\" :setvar DefaultLogPath "C:\DB\Microsoft SQL Server\MSSQL10_50.MITCHELL\MSSQL\DATA\"。
> 
> 我希望部署脚本接受数据和日志路径的输入。但是根据当前正在生成的脚本，我必须手动注释以上 2 行并修改 CREATE DATABASE 语句，如下所示，以用“InputDefaultDataPath”替换对“DefaultDataPath”和“DefaultLogPath”的任何引用和"InputDefaultLogPath" 在 PRIMARY 上创建数据库 [$(DatabaseName)] (NAME = [TEST_DB], FILENAME = '$(InputDefaultDataPath)$(DatabaseName).mdf', >SIZE = 3072 KB, FILEGROWTH = 1024 KB) 登录 (NAME = [TEST_DB_log]，FILENAME = >'$(InputDefaultLogPath)$(DatabaseName)_log.ldf'，SIZE = 1024 KB，MAXSIZE = 2097152 MB，FILEGROWTH = 10 %) 整理 SQL_Latin1_General_CP1_CI_AS
> 
> ```
>  Question 1: How do I prevent db project from scripting the below two lines and also 
> ```
> 
> 防止它在 CREATE DATABASE 语句中替换这些变量？:setvar DefaultDataPath "C:\DB\Microsoft SQL Server\MSSQL10_50.MITCHELL\MSSQL\DATA\" :setvar DefaultLogPath "C:\DB\Microsoft SQL Server\MSSQL10_50.MITCHELL\MSSQL\DATA\"。
> 
> 问题 2：如何使 db 项目自动编写部署脚本，使其接受 DefaultDataPath 和 DefaultLogPath 的用户输入，而无需我手动将其更改为包含 $(InputDefaultDataPath) 和 $(InputDefaultLogPath) 变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-30T14:01:58.500

在 Visual Studio 2010 中，有一个名为“CommentOutSetVarDeclarations”的项目设置。如果您选中此选项，您提到的两个默认 SETVAR 行将被注释掉。

这使您能够在从 SQLCMD 运行部署脚本时从命令行提供 $(DefaultDataPath) 和 $(DefaultLogPath) 的值。

# file-upload - 从浏览器将文件上传到另一个域的最佳方法是什么？

> ID：10085131
> 
> 赞同：4
> 
> 时间：2012-04-10T07:57:42.667
> 
> 标签：file-upload, nginx, cross-domain, same-origin-policy, vk

我正在为某个社交网络创建预定帖子的网络服务。
需要帮助处理高流量下的文件上传。

**工艺概述：**

*   用户将文件上传到 SomeServer（不是我的）。
*   SomeServer 然后以 JSON 字符串响应。
*   我的网络应用程序应该存储那个 JSON 响应。

**选项 1：保存，cURL POST，删除 tmp**我让它工作
的~~愚蠢方式：~~

1.  用户上传文件到 MyWebApp；
2.  MyWebApp cURL 将文件进一步发送到 SomeServer，获取响应。

**选项 2：JS 魔法**
它可能是完美的聪明方式：

1.  用户从 iFrame 中直接将文件上传到 SomeServer；
2.  MyWebApp 通过 JavaScript 获取响应。

但由于“同源政策”，这是（？）不可能的，不是吗？

**选项 3：nginx 代理？**
生产服务器的更好方法：

1.  用户上传文件到 MyWebApp；
2.  nginx拦截文件上传，直接发送到SomeServer；
3.  JSON 响应也被 nginx 拦截并由 MyWebApp 处理。

这有什么意义吗，例如，`/fileupload`将其代理到 SomeServer 的位置的 nginx 配置是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T01:02:41.423

我没有服务器可以用来代替 SomeServer 来测试我的建议，但无论如何我都会试一试。如果我错了，那么我猜你只需要[使用 Flash（来自 VK 的示例代码）](http://vk.com/source/vk_mp3-0.1.zip "VK 用户的音频文件服务")。

如何使用 iFrame 将文件上传到*SomeServer*，接收 JSON 响应，然后使用`postMessage`将来自 iFrame 的 JSON 响应从您的站点传递到您的主窗口。据我了解，这几乎`postMessage`是最初创作的动机。

总的来说，我正在考虑[类似这个](http://www.openjs.com/articles/ajax/ajax_file_upload/response_data.php)或[YUI 的`io()`模块](http://yuilibrary.com/yui/docs/io/)，但`postMessage`添加了一些内容以绕过相同的来源策略。

或者在 VK 的情况下，[使用他们明确的 iFrame 支持](http://vk.com/developers.php?oid=-17680044&p=IFrame_Applications)。在我看来，您可以向全局 VK 对象添加一个方法，然后使用`VK.callMethod()`. 您可以使用该解决方法来创建一个可以从隐藏 iFrame 读取响应的函数。

所以你使用 VK.api('photos.getUploadServer', ...) 来获取 POST URL。

然后，您使用 JS 将该 URL 作为您用于上传文件的 FORM 的操作插入。[`io()`按照文档](http://yuilibrary.com/yui/docs/io/)和`complete`函数中“在 HTML 表单中上传文件”下的示例，使用`postMessage`将 JSON 发布回您的父窗口。在此处查看[示例和文档](https://developer.mozilla.org/en/DOM/window.postMessage)。（如果它不适用于，您当然可以使用[自己滚动的](http://www.openjs.com/articles/ajax/ajax_file_upload/response_data.php)`io()`示例代码使其工作，如果我是对的。）`VK.callMethod()`

然后作为响应，`postMessage`您可以使用常规 AJAX 将 JSON 响应上传回您的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T00:47:22.787

我只能看到解决这个问题的两种主要方法：服务器端代理和 javascript/客户端跨站点上传。你的方法`1`和`3`是一回事。您是否使用 cURL 或 nginx 发布文件并不重要 - 无论如何都不是性能方面的。因此，如果您已经`1`从您的问题中实施了方法，我认为没有任何理由切换到`3`.

关于 javascript 和同源策略，似乎有很多方法可以实现您的目标，但在所有这些方法中，您的方案必须得到 SomeServer 的开发人员的支持，或者您必须对 SomeServer 具有某种访问权限。以下是可能的大致列表：

*   [CORS](http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing) — 必须允许您的域访问 SomeServer 的域；
*   [更改 document.domain](https://stackoverflow.com/questions/2404947/same-origin-policy-workaround-using-document-domain-in-javascript) — 这要求您的页面和目标页面托管在同一域的子域上；
*   使用 Flash 上传器（例如 SWFUpload）——仍然需要通过跨域策略允许您的域，如果是 Flash，则通过SomeServer 域根目录中的[crossdomain.xml ；](https://stackoverflow.com/questions/3667687/swfupload-wont-allow-me-to-upload-from-a-server-to-another-one)
*   [xdcomm](https://stackoverflow.com/questions/2067029/getting-around-same-origin-policy-in-javascript-without-server-side-scripts)（例如[EasyXDM](http://easyxdm.net/wp/)）——要求您至少可以将一个 html 页面上传到目标域。然后，此页面可以用作您使用 SomeServer 的 iframe 进行操作的 javascript 代理。

实际上，最后一个可能对您来说是真正的可能性，因为您可以将文件上传到 SomeServer。但是，当然，这取决于它是如何实现的——例如，如果有另一个域提供文件，或者如果有一些安全措施不允许您托管 html 文件，它可能无法正常工作。

# objective-c - NSString 作为 Xcode 项目中的资源

> ID：10085132
> 
> 赞同：0
> 
> 时间：2012-04-10T07:57:45.287
> 
> 标签：objective-c, macros, c-preprocessor

有什么方法可以简单地将静态声明`NSString`为定义的 int 标识符？我想做类似 C++ 的事情`#define MY_SIMPLE_ID 4`。

编辑：我应该在哪里声明这个？在 C++ 中，我可以使用它全局访问资源文件。有没有办法在 Objective-C 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T07:59:37.317

为什么不使用：

```
#define MY_STRING @"MyString" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T02:51:54.357

您还可以进入您的项目或目标**构建设置**，并添加到**Preprocessor Macros**或**Preprocessor Macros Not Used In Precompiled Headers**。请参阅[Xcode Preprocessor Macros](https://stackoverflow.com/a/245288/1318452)了解这两个选项之间的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T08:03:18.830

我个人在一个单独的类中使用它，只有静态值：

在 constants.h 文件中：

```
extern int const MY_SIMPLE_ID;
extern NSString const MY_SIMPLE_STRING; 
```

在 constants.m 文件中：

```
int const MY_SIMPLE_ID = 4;
NSString const MY_SIMPLE_STRING = @"thestring"; 
```

有了它，它是整个应用程序中的全局静态值。

# php - 从 mongodb 导出允许的内存大小耗尽错误

> ID：10085142
> 
> 赞同：0
> 
> 时间：2012-04-10T07:58:25.710
> 
> 标签：php, mongodb, mongodb-php

我尝试将一些文档从 mongodb 导出到 .csv。对于一些大型列表，文件大约为 40M，我收到有关内存限制的错误：

```
Fatal error: Allowed memory size of 134217728 bytes exhausted 
(tried to allocate 44992513 bytes) in
/usr/share/php/Zend/Controller/Response/Abstract.php on line 586 
```

我想知道为什么会发生这个错误。是什么消耗了这么多内存？如何在不更改现在`memory_limit`设置的情况下避免此类错误`128M`。

我使用这样的东西：

```
public static function exportList($listId, $state = self::SUBSCRIBED)
{
        $list = new Model_List();       
        $fieldsInfo = $list->getDescriptionsOfFields($listId);
        $headers = array(); 
        $params['list_id'] = $listId;
        $mongodbCursor = self::getCursor($params, $fieldsInfo, $headers);
        $mongodbCursor->timeout(0);
        $fp = fopen('php://output', 'w');       
        foreach ($mongodbCursor as $subscriber) {
            foreach ($fieldsInfo as $fieldInfo) {           
                $field = ($fieldInfo['constant']) ? $fieldInfo['field_tag'] : $fieldInfo['field_id'];
                if (!isset($subscriber->$field)) {
                    $row[$field] = '';
                } elseif (Model_CustomField::isMultivaluedType($fieldInfo['type'])) {
                    $row[$field] = array();     
                    foreach ($subscriber->$field as $value) {
                        $row[$field][] = $value;                        
                    }
                    $row[$field] = implode(self::MULTIVALUED_DELEMITOR, $row[$field]);
                } else {
                    $row[$field] = $subscriber->$field;
                }                               
            }               
            fputcsv($fp, $row);                                  
        }                   
} 
```

然后在我的控制器中，我尝试这样称呼它：

```
public function exportAction()
{

    set_time_limit(300);

    $this->_helper->layout->disableLayout();
    $this->_helper->viewRenderer->setNoRender();
    $fileName = $list->list_name . '.csv';

    $this->getResponse()->setHeader('Content-Type', 'text/csv; charset=utf-8')
                        ->setHeader('Content-Disposition', 'attachment; filename="'. $fileName . '"');                                                              

    Model_Subscriber1::exportList($listId);
    echo 'Peak memory usage: ', memory_get_peak_usage()/1024, ' Memory usage: ', memory_get_usage()/1024;

} 
```

所以我在导出数据的文件末尾。奇怪的是，对于我导出的类似 1M 文档的列表，它成功导出并显示：

```
> Peak memory usage: 50034.921875 Kb Memory usage: 45902.546875 Kb 
```

但是当我尝试导出 1.3M 文件时，几分钟后我只进入导出文件：

```
Fatal error: Allowed memory size of 134217728 bytes exhausted 
(tried to allocate 44992513 bytes) in
/usr/share/php/Zend/Controller/Response/Abstract.php on line 586. 
```

我导出的文档大小大致相同。

我将 memory_limit 增加到 256M 并尝试导出 1.3M 列表，这就是它所显示的：

> 峰值内存使用量：60330.4609375Kb 内存使用量：56894.421875 Kb。

这对我来说似乎很混乱。这个数据是不是很不准确？否则，为什么会导致 memory_limit 设置为 128M 的内存耗尽错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:01:32.750

虽然文档的大小可能大致相同，但 PHP 分配来处理它们的大小与文档大小或文档数量并不成正比。这是因为不同的类型在 PHP 中需要不同的内存分配。您可能可以随时释放一些内存，但我在您的代码中看不到任何可以释放的地方。

最好的答案是可能只是增加内存限制。

您可以做的一件事是将处理卸载到外部脚本并从 PHP 调用它。许多语言以比 PHP 更节省内存的方式进行此类处理。

我还注意到 memory_get_peak_usage() 并不总是准确的。我会尝试一个实验，将 mem_limit 增加到 256 并在更大的数据集（130 万）上运行它。您可能会发现它也报告低于 128 限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T11:52:00.013

我可以在导出 CSV 文件的类似情况下重现此问题，我的系统*应该有*足够的内存，如**memory_get_usage** () 所示，但最终出现相同的致命错误： **致命错误：允许的内存大小**。

我通过将 CSV 内容输出到一个物理临时文件中来规避这个问题，我最终将其压缩，然后再将其读出。我在一个循环中写文件，这样每次迭代只写有限的数据块，这样我就永远不会超过内存限制。压缩后，压缩比如此之高，以至于我可以处理比我最初遇到的大小超过 10 倍的原始文件。总而言之，这是成功的。

提示：创建存档时，在调用 $zip->close() 之前不要**取消链接**存档组件，因为这个调用似乎是在做生意。否则你最终会得到一个空存档！

代码示例：

```
<?php
$zip = new ZipArchive;
if ($zip->open($full_zip_path, ZipArchive::CREATE) === TRUE) {
    $zip->addFile($full_csv_path, $csv_name);
    $zip->close();

    $Response->setHeader("Content-type", "application/zip; charset=utf-8");
    $Response->setHeader("Content-disposition", "attachment; filename=" . $zip_name);

    $Response->setBody(file_get_contents($full_zip_path));
}
else {
    var_dump(error_get_last());
    echo utf8_decode("Couldn't create zip archive '$full_zip_path'."), "\r\n";
}

unset($zip);
?> 
```

**注意：将项目添加到 zip 存档时，如果使用基于 Windows 的操作系统，请勿在项目名称前添加斜杠。**

对原问题的讨论：

引用行的 Zend 文件是

```
public function outputBody()
{
    $body = implode('', $this->_body);
    echo $body;
} 
```

来自**Zend_Controller_Response_Abstract**类的**outputBody** () 方法。

 **看起来，不管你怎么做，通过**echo**、**print**或**readfile**，输出总是被捕获，并卡在响应正文中，即使你在调度之前关闭了响应返回功能。

我什至尝试在*echo loop中使用***clearBody()**类方法，记住每个**$response->sendResponse()**后跟**$response->clearBody()**都会释放内存，但它失败了。Zend 处理响应发送的方式是，我总是得到原始 CSV 文件的完整大小的内存分配。

 *****还有待确定如何告诉 Zend 不要“捕获”输出缓冲区。*******

# iphone - 在IOS中将字节流转换为PDF、html、css文件

> ID：10085154
> 
> 赞同：0
> 
> 时间：2012-04-10T07:59:51.890
> 
> 标签：iphone, ios, web-services, ipad, ios5

使用 .NET Web 服务，它以字节流（表数据）的形式向我发送响应，这些是 HTML、PDF、CSS、JS、PNG 等文件。我已建立 URL 连接并尝试将 NSData 保存在本地路径中：

```
NSString *writeableDBPath = [DOCUMENTS_FOLDER stringByAppendingPathComponent:@"test.pdf"];
[[NSFileManager defaultManager] createFileAtPath:writeableDBPath  contents:webData attributes:nil]; 
```

当我尝试访问 test.pdf 时，它会引发错误“test.pdf 无法打开”，当我通过提供实际路径而不使用 Web 服务来尝试相同的代码时，我能够访问 PDF。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:32:33.340

能够解决这个问题。该文件在从 Web 服务发送时已损坏。

# android - 我们是否需要有 64 位操作系统才能运行 Android CTS 和 Android ICS 版本的 Monkey 测试？

> ID：10085170
> 
> 赞同：1
> 
> 时间：2012-04-10T08:01:11.653
> 
> 标签：android, monkeyrunner, cts

专家：

首先，我想就以下问题寻求帮助：

1.  如何在 ICS 上设置 Google CTS 的说明？（我应该使用哪个 Ubuntu 版本）
2.  我们是否需要 64 位操作系统来运行 ICS CTS？
3.  在 32 位机器上运行猴子测试是否重要。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T23:34:06.623

我和@knmanish 对于在 ICS 上使用 CTS 的文档都有相当不错的答案。

[https://stackoverflow.com/a/10183036/198348](https://stackoverflow.com/a/10183036/198348)

和

[https://stackoverflow.com/a/10073453/198348](https://stackoverflow.com/a/10073453/198348)

# mysql - mysql中Group By查询中的子组

> ID：10085171
> 
> 赞同：0
> 
> 时间：2012-04-10T08:01:12.713
> 
> 标签：mysql, sql

我的表如下

```
一个 | b
--|--
0 | 5
1 | 6
2 | 7
3 | 7
4 | 7

```

我想对组（a = 0，a = 1，a >= 2）求和'b'。

样本输出应该是这样的，

```
总和 | 一种
----|---
 5 | 0
 6 | 1
 21 | 2

```

我应该使用什么查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T08:06:56.970

那应该这样做：

```
SELECT
CASE 
WHEN a = 0 THEN '0'
WHEN a = 1 THEN '1'
WHEN a >= 2 THEN '2'
END AS anotherNameThanA,
SUM(b) AS `sum`
FROM yourTable
GROUP BY anotherNameThanA 
```

# wcf - 使用 Castle Windsor WcfFacility 创建客户端端点

> ID：10085172
> 
> 赞同：7
> 
> 时间：2012-04-10T08:01:14.450
> 
> 标签：wcf, castle-windsor, ioc-container, wcf-endpoint, wcffacility

我创建了三个程序集。一个网站、一个 WCF 服务和一个包含服务实现的接口的合同程序集。我想使用 Castle Windsor 在客户端（网站）上为我创建服务，这样我就不必在网站的 web.config 中为我希望使用的每个服务创建一个端点。

我想查看合同程序集并获取命名空间中的所有服务接口。现在，在向容器注册组件时，对于每项服务，我都有类似以下内容。

```
container.Register(Component.For<ChannelFactory<IMyService>>().DependsOn(new { endpointConfigurationName = "MyServiceEndpoint" }).LifeStyle.Singleton);
container.Register(Component.For<IMyService>().UsingFactoryMethod((kernel, creationContext) => kernel.Resolve<ChannelFactory<IMyService>>().CreateChannel()).LifeStyle.PerWebRequest); 
```

在我的 web.config 中，我有设置代码。

```
 <system.serviceModel>
      <extensions>
         <behaviorExtensions>
            <add name="AuthToken" type="MyNamespace.Infrastructure.AuthTokenBehavior, MyNamespace.Contracts" />
         </behaviorExtensions>
      </extensions>
      <behaviors>
         <endpointBehaviors>
            <behavior>
               <AuthToken />
            </behavior>
         </endpointBehaviors>
      </behaviors>

      <bindings>
         <wsHttpBinding>
            <binding maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00">
               <readerQuotas maxStringContentLength="2147483647" maxArrayLength="2147483647"></readerQuotas>
               <security mode="None" />
            </binding>
         </wsHttpBinding>
      </bindings>

      <client>
         <endpoint name="MyServiceEndpoint" address="http://someurl/MyService.svc" binding="wsHttpBinding" contract="MyNamespace.Contracts.IMyService"></endpoint>
      </client>
   </system.serviceModel> 
```

我最终得到了多个看起来几乎完全相同的服务端点，当我们部署到客户端机器上时，他们必须设置每个端点的地址，即使每个端点的基本 url 都是相同的。

我想在我的 web.config 中有一个通过代码获取的基本 url，然后使用合约程序集上的反射将服务注册到容器中。我确实需要上述配置文件中的专用端点行为。

我从哪里开始？WcfFacility 看起来很棒，但 doco 有点缺乏......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-11T06:34:07.447

我同意缺少 wcf 工具的文档，这很可悲，因为它是一个非常棒的工具，如果人们因为无法开始而不使用它，那将是一个真正的耻辱，所以让我看看我是否可以提供帮助如果可以的话，你出去一点...

让我们创建一个包含三个项目的应用程序：

1.  共享合约的类库
2.  充当服务器的控制台应用程序
3.  充当客户端的控制台应用程序

我们的想法是，我们希望能够在注册服务时使用服务名称并共享一个基本 URL（我认为这就是您所要求的，如果不是，希望您可以从这里推断）。因此，首先，共享合同中包含以下内容（没什么特别的，正常的 WCF 票价）：

```
[ServiceContract]
public interface IMyService1
{
    [OperationContract]
    void DoSomething();
}

[ServiceContract]
public interface IMyService2
{
    [OperationContract]
    void DoSomethingToo();
} 
```

现在服务器控制台应用程序看起来像这样，我们首先实现服务契约（同样没有什么特别之处，只是实现接口的类）然后将它们全部注册为服务（注意这里不需要任何配置文件，您可以更改方式使用 Windsor 为您提供的所有选项来决定什么是服务等 - 我的方案有点有限，但它给了您一个想法）：

```
namespace Services
{
    public class MyService1 : IMyService1
    {
        public void DoSomething()
        {
        }
    }

    public class MyService2 : IMyService2
    {
        public void DoSomethingToo()
        {
        }
    }
}

//... In some other namespace...

class Program
{
    // Console application main
    static void Main()
    {
        // Construct the container, add the facility and then register all
        // the types in the same namespace as the MyService1 implementation
        // as WCF services using the name as the URL (so for example 
        // MyService1 would be http://localhost/MyServices/MyService1) and
        // with the default interface as teh service contract
        var container = new WindsorContainer();            
        container.AddFacility<WcfFacility>(
            f => f.CloseTimeout = TimeSpan.Zero);
        container
            .Register(
                AllTypes
                    .FromThisAssembly()
                    .InSameNamespaceAs<MyService1>()
                    .WithServiceDefaultInterfaces()
                    .Configure(c =>
                               c.Named(c.Implementation.Name)
                                   .AsWcfService(
                                       new DefaultServiceModel()
                                           .AddEndpoints(WcfEndpoint
                                                             .BoundTo(new WSHttpBinding())
                                                             .At(string.Format(
                                                                 "http://localhost/MyServices/{0}",
                                                                 c.Implementation.Name)
                                                             )))));

        // Now just wait for a Q before shutting down
        while (Console.ReadKey().Key != ConsoleKey.Q)
        {
        }
    }
} 
```

那就是服务器，现在如何消费这些服务？好吧，实际上这很容易，这是一个客户端控制台应用程序（它只引用了contracts 类库）：

```
class Program
{
    static void Main()
    {
        // Create the container, add the facilty and then use all the
        // interfaces in the same namespace as IMyService1 in the assembly 
        // that contains the aforementioned namesapce as WCF client proxies
        IWindsorContainer container = new WindsorContainer();

        container.AddFacility<WcfFacility>(
            f => f.CloseTimeout = TimeSpan.Zero);

        container
            .Register(
                Types
                    .FromAssemblyContaining<IMyService1>()
                    .InSameNamespaceAs<IMyService1>()
                    .Configure(
                        c => c.Named(c.Implementation.Name)
                                 .AsWcfClient(new DefaultClientModel
                                                  {
                                                      Endpoint = WcfEndpoint
                                                          .BoundTo(new WSHttpBinding())
                                                          .At(string.Format(
                                                              "http://localhost/MyServices/{0}",
                                                              c.Name.Substring(1)))
                                                  })));

        // Now we just resolve them from the container and call an operation
        // to test it - of course, now they are in the container you can get
        // hold of them just like any other Castle registered component
        var service1 = container.Resolve<IMyService1>();
        service1.DoSomething();

        var service2 = container.Resolve<IMyService2>();
        service2.DoSomethingToo();
    }
} 
```

就是这样——希望这能让你开始（我发现实验和使用智能感知通常能让我到达我需要去的地方）。我向您展示了服务和客户端，但如果您愿意，您可以只使用其中之一。

您应该能够看到绑定的配置位置以及我如何构建 URL，因此在您的情况下，您可以轻松地从配置文件或任何您想做的事情中提取基本 URL。

最后要提到的一件事是，您可以通过将自定义端点行为添加为端点的扩展来添加它，因此在客户端示例中，您将拥有如下内容：

```
Endpoint = WcfEndpoint
    .BoundTo(new WSHttpBinding())
    .At(string.Format("http://localhost/MyServices/{0}", c.Name.Substring(1)))
    .AddExtensions(new AuthTokenBehavior()) 
```

# java - 在 Java 中访问 SOAP 服务

> ID：10085175
> 
> 赞同：0
> 
> 时间：2012-04-10T08:01:31.577
> 
> 标签：java, soap

我需要访问肥皂服务，而且我也有 wsdl 网址。我将如何在java中执行此操作？有没有好的教程来实现这一点？

另外我有一个在android中生成的xml文件来调用soap服务，但它不起作用。有没有什么地方可以粘贴这个xml来检查xml是否正确调用了webservice（我正在使用wireshark来记录正在发送的xml，它看起来很好）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:17:42.993

关于问题的第一部分，您可以使用 SoapUI ( [http://www.soapui.org/](http://www.soapui.org/) ) 加载 WSDL 并为其生成 Java 客户端代码 ( [http://nitinaggarwal.wordpress.com/2010/11/ 12/generating-client-java-code-for-wsdl-using-soap-ui-axis2-wsdl2java/](http://nitinaggarwal.wordpress.com/2010/11/12/generating-client-java-code-for-wsdl-using-soap-ui-axis2-wsdl2java/) )。我曾经使用过这种方式，但也许有更好的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:14:11.587

最简单的方法是在 netbeans 中生成客户端 Web 服务存根。只需创建一个新项目，然后添加新的 Web 服务客户端。提供 WSDL 并完成。Netbeans 还有一个很棒的 Web 服务教程。

非常有用的链接： http: [//netbeans.org/kb/trails/web.html](http://netbeans.org/kb/trails/web.html)

我建议远离轴网络服务客户端。我对轴的经验不是很好。到目前为止，netbeans 使用的 wsimport 很棒。使用 JAX-WS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T08:25:58.723

您可以使用`wsimport`（JDK 6 的一部分）

查看[文档](http://docs.oracle.com/javase/6/docs/technotes/tools/share/wsimport.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T08:50:23.773

[CXF](http://cxf.apache.org/)是强大且易于使用的 Web 服务客户端生成工具。

[Axis](http://axis.apache.org/axis/)也支持客户端生成，但我个人遇到了问题。

# multithreading - 在 parfor 中执行多个函数

> ID：10085176
> 
> 赞同：1
> 
> 时间：2012-04-10T08:01:36.120
> 
> 标签：multithreading, matlab, parallel-processing, parfor

目前我有几个函数，名为`function1.m`, `function2.m`, `function3.m`, ..., `function10.m`。每个功能都是相互独立的。我想在一次执行中运行所有功能

目前，我的代码是这样的，它一个一个地运行函数。

```
for i = 1 : 10
  result = eval(sprintf('function%d.m',i));
  fprintf('%d ', result);
end 
```

我想知道有没有办法重写代码`parfor`而不是`for`，因为我知道这`eval`在`parfor`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:58:58.927

在正常循环中使用`eval`来填充函数句柄的单元数组？

```
functions = cell(10, 1);
for i=1:10
  functions{i} = eval(sprintf('@()function%d', i));
end
parfor i=1:10
  result = functions{i}();
  ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:49:53.187

您根本不需要使用or循环`eval`来创建函数句柄的元胞数组。然后您需要做的就是调用存储在元胞数组中的每个函数句柄。`for``parfor``functions`

```
functions = cell(1, 10);

parfor i = 1:10
    functions{i} = str2func([ 'function', num2str(i) ]);
end

parfor i = 1:10
    result = functions{i}();
    fprintf('%d ', result);
end 
```

# database - 如何手动实现 JPA 关系 OneToMany

> ID：10085182
> 
> 赞同：2
> 
> 时间：2012-04-10T08:02:20.423
> 
> 标签：database, jpa, jpa-2.0, entity-relationship

我正在使用 JPA 注释，当我有关系 OneToMany - ManyToOne 时，当我在 ManyToOne 中看到我的实体时，joinColumn 始终为空值。

接下来我将展示我的示例，我有**Product**：

```
 @Entity
  @Table(name = "PC_PRODUCT")

  public class Product extends LaunchEntity {

  private static final long serialVersionUID = 1L;

  @XmlElement(name = "Product_Name", required = true)
  protected String productName;

  @XmlElement(name = "Product_Description")
  protected String productDescription;

  @XmlElement(name = "Product_To_Charge")
  @OneToMany(mappedBy = "product", cascade=CascadeType.MERGE)
  protected List<ChargeRelation> productToCharge; 
```

而且，这是我的 ChargeRelation 课程：

```
@Entity
@Table(name="PC_CHARGE_RELATION")
public class ChargeRelation
    extends RelationEntity
{

    private static final long serialVersionUID = 1L;

    @XmlElement(name = "Charge", required = true)
    @OneToOne(cascade = CascadeType.MERGE)
    protected Charge charge;

    @XmlTransient
    @ManyToOne(cascade=CascadeType.MERGE)
    @JoinColumn(name="PRODUCT_ID")
    protected Product product; 
```

我正在读取一个 xml 文件，将数据转换为字符串，为我的根对象解组并保留该对象。

问题是当我在我的字符串中找到一个收费关系时，这些值被插入到**收费关系表中**，但**product_id 的列始终为 null**。

我已经定义了所有的 setter 和 getter。我怎样才能强制它进行手动插入？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:25:02.240

请注意，JPA 提供程序在将其保存到数据库时反映了多对一关系的状态。

但是，JAXB 仅在 XML 解组期间填充一对多端，因此您需要在解组后手动填充多对一端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T09:59:19.933

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB 2 (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

EclipseLink JAXB (MOXy) 有一个名为的扩展`@XmlInverseReference`，允许您映射反向指针。

**产品**

```
@Entity
@Table(name = "PC_PRODUCT")
public class Product extends LaunchEntity {

    @XmlElement(name = "Product_To_Charge")
    @OneToMany(mappedBy = "product", cascade=CascadeType.MERGE)
    protected List<ChargeRelation> productToCharge;

} 
```

**电荷关系**

`@XmlInverseReference`注释在您以前使用的地方使用`@XmlTransient`。 `@XmlInverseReference`就像`@XmlTransient`在封送操作期间一样，并且将在取消封送操作期间填充反向指针。

```
@Entity
@Table(name="PC_CHARGE_RELATION")
public class ChargeRelation extends RelationEntity {

    @XmlInverseReference(mappedBy = "productToCharge")
    @ManyToOne(cascade=CascadeType.MERGE)
    @JoinColumn(name="PRODUCT_ID")
    protected Product product;
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/07/jpa-entities-to-xml-bidirectional.html](http://blog.bdoughan.com/2010/07/jpa-entities-to-xml-bidirectional.html)
*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

# bash - 如何在 bash 脚本中从 matlab 获取返回值？

> ID：10085184
> 
> 赞同：11
> 
> 时间：2012-04-10T08:02:26.117
> 
> 标签：bash, function, matlab, return-value

如果我有这个 matlab 函数

```
function [result] = matlab_test(param1, param2)

disp(sprintf('param1 : %s', param1));
disp(sprintf('param2 : %s', param2));

result = 'hello matlab'; 
```

我想在 bash 脚本中调用这个 matlab 函数，比如

```
matlab -nodesktop -nosplash -nodisplay -r "try, A=matlab_test('test','matlab'); end; quit"
echo $A 
```

我想要这个输出

```
test
matlab
hello matlab 
```

我的要求是查找是否可以在我的 bash 脚本中使用来自 Matlab 的返回值，并将其传递给管道。我只想将我的应用程序分成小组件（文件）并通过管道/参数进行通信。简而言之，我想看看我可以在我的 bash 脚本中将 Matlab 脚本包装到多远，以便我可以设置我的代码架构。
如果我不能这样做，我将简单地将我需要从 matlab 返回值的部分捆绑到 matlab 脚本中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T23:13:26.430

你问了两个问题。我会回答这两个问题，包括为什么第二个可能取决于您的操作系统（在我的操作系统上绝对不可能），然后提供有关问题相关解决方法的建议。

首先，当让 Matlab 与 shell 交互时，我使用这样的脚本。

```
#!/bin/sh 

cat <<EOF | matlab -nodesktop -nosplash -nodisplay 
A=matlab_test('$1','$2');
system(['export temp1=' A]); %doesn't work
setenv('temp2',A); %also doesn't work, I'll explain why below
exit
EOF
echo $temp1
echo $temp2 
```

给出输出：

```
[XXXXXX@compute-0-138 ~]$ ./stack_ex test matlab
Warning: No window system found.  Java option 'MWT' ignored

                            < M A T L A B (R) >
                  Copyright 1984-2010 The MathWorks, Inc.
                Version 7.12.0.635 (R2011a) 64-bit (glnxa64)
                               March 18, 2011

  To get started, type one of these: helpwin, helpdesk, or demo.
  For product information, visit www.mathworks.com.

>> param1 : test
param2 : matlab
>> >> >> 
```

很明显，设置环境变量的两个版本都不起作用。这就引出了你的第二个问题。

“回显”失败的原因是两者都`system`创建`setenv`了在 Matlab 关闭时关闭的外壳。也就是说，Matlab 不能在调用它的 shell 之外设置环境变量。

[对于这篇文章](http://www.mathworks.com/matlabcentral/newsreader/view_thread/300759)中讨论的 Windows 系统，有一个解决方法，它使用 Microsoft 的工具。这里也提到[了](http://www.mathworks.com/support/solutions/en/data/1-3IOL0N/index.html?product=SL&solution=1-3IOL0N)。

我不相信 *nix 系统可以从 Matlab 中设置环境变量。

这是一种与您描述的类似的方法。

我假设使用 echo 不是您真正想要做的。相反，我猜您想使用存储在环境变量中的字符串输出，以便进一步处理 shell 中的命令或脚本。一种可能的解决方法如下：

```
#!/bin/sh 

cat <<EOF | matlab -nodesktop -nosplash -nodisplay 
A=matlab_test('$1','$2');
setenv('temp1',A); %doesn't work
[a b] = system(['echo ' '$' 'temp1'])
exit
EOF 
```

给出输出：[XXXXXX@compute-0-138 ~]$ ./stack_ex_3 test matlab 警告：未找到窗口系统。Java 选项“MWT”被忽略

```
 < M A T L A B (R) >
                  Copyright 1984-2010 The MathWorks, Inc.
                Version 7.12.0.635 (R2011a) 64-bit (glnxa64)
                               March 18, 2011

  To get started, type one of these: helpwin, helpdesk, or demo.
  For product information, visit www.mathworks.com.

>> param1 : test
param2 : matlab
>> >> 
a =

     0

b =

hello matlab 
```

这表明该命令`echo $temp1`在由创建的子 shell 中进行了评估，`setenv`并且 temp1 保存了分配给它的值。这个对 shell 的调用的结果现在存储在 b 中（a 保持 0 表示成功）。可以想象，您可以通过 system 命令传递您想要在 shell 中执行的全部操作，以便它在子 shell 中运行。不过，我们必须了解您的问题的更多细节才能对这种方法进行全面评估。

编辑和跟进 **********************

我能想到的最接近包装 Matlab 和 bash 的方法是以下技巧。您可以将 Matlab 脚本的输出通过以下管道传输到`myresult.out`：

```
#!/bin/sh 

cat <<EOF | matlab -nodesktop -nosplash -nodisplay /> myresult.out 
A=matlab_test('$1','$2');
disp(['grepMe ' A])
exit
EOF 
```

您可以从 grep`grepMe`行`myresult.out`，管道到 sed，并仅选择您需要的输出行的一部分，然后在脚本的其余部分上管道。这与我认为您可以实现的目标一样接近。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T00:57:46.483

这几天一直在思考这个问题，突然想到了一些东西。您可以将其中一个 MATLAB 克隆用作 #! 脚本解释器。我的选择是 Octave，如下所示：

```
#! /usr/bin/octave -qf
A=matlab_test('test','matlab');
printf(A) 
```

printf 将 A 的值放入 STDOUT 中，您可以从那里进行管道传输。

```
matteson@mauler[~]$ ./oshelltest
param1 : test
param2 : matlab
hello matlab
matteson@mauler[~]$ ./oshelltest | grep hello
hello matlab 
```

现在 Octave 与 MATLAB 并不*完全相同*，但它很接近，也许足以满足您的需求。它还具有免费的优势。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T08:45:27.750

您在这里尝试做两件事。首先：在 shell 中显示 Matlab 程序的输出。其次，在shell中分配一个变量。

当我尝试这个时，我发现 Matlab 会在 stdout 上写满它的开头消息，所以我最终做了：

```
mkfifo ~/matlab_output
matlab ... > /dev/null & cat ~/matlab_output 
```

然后在matlab中，替换`sprintf`为：

```
f = fopen('~/matlab_output', 'w');
fprintf(f, 'param1 : %s', param1);
fclose(f); 
```

这是您第一个要求的一个解决方案（您可以只写入一个普通文件，然后再对文件进行 cat 处理，但您必须为此使用`&&`，所以在 Matlab 完全完成之前您不会看到输出。）。您遇到的第二个问题 - 在 matlab 中执行“A = result”并能够在 shell 中“回显 $A” - 更难。您可以执行以下操作：

```
mkfifo ~/matlab_commands
mkfifo ~/matlab_output
matlab ... > /dev/null & cat ~/matlab_output & eval $(cat ~/matlab_commands) 
```

在matlab中：

```
f2 = fopen('~/matlab_commands', 'w');
fprintf(f2, 'A=%s', double2str(results));
fclose(f2); 
```

但我真的不知道这会有多好。

# c# - Azure 中的 PDF 附件，使用内存还是临时目录？

> ID：10085185
> 
> 赞同：0
> 
> 时间：2012-04-10T08:02:29.190
> 
> 标签：c#, asp.net, azure, pdf-generation

我正计划编写一个应用程序，将多个 PDF 作为附件发送到用户的电子邮件中。

我应该使用内存（MemoryStream）还是有一个可以使用的临时目录？哪个更可取？谢谢！

顺便说一句，我正在使用 C# ASP.NET

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T09:33:13.077

我会选择文件系统存储，因为内存是一种更稀缺的资源。Windows Azure 为此提供了本地存储资源，它们是您在服务定义中配置的磁盘区域，然后在运行时通过 Azure SDK 访问。它们不是永久存储，并且会在角色回收时被清理，因此它们非常适合临时操作，例如您描述的操作。尽管您仍应在每次操作后尝试清理文件以确保不会填满空间。

有关本地存储资源的完整信息在这里：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee758708.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee758708.aspx)

此处详细列出了每个实例大小上本地存储资源可用磁盘空间量的表：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee814754.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee814754.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T19:39:25.667

你可以使用不同的模式。将 PDF 放入 blob 存储中，并放置一条包含电子邮件地址和要发送的 PDF 列表的队列消息。建立一个单独的工人角色并发送电子邮件。您可以使用 X-Small 或 Small。由于这也允许异步通信，因此您可以只使用 1 个实例。如果它跟不上，通过配置文件启动第二个（即不重新部署）。这还具有为您的解决方案提供更多聚合带宽的额外好处。

如果流量不是很重，你可以启动一个单独的线程（或进程）来做同样的事情。

拍

# spring - Struts Spring Hibernate中的延迟初始化Hibernate

> ID：10085187
> 
> 赞同：0
> 
> 时间：2012-04-10T08:02:37.723
> 
> 标签：spring, hibernate, struts

我将当前用户保存在会话中，当我使用当前用户（例如：user.getRole.getRoleName()）时，我得到了 LIE。我该如何解决这个问题，我的代码是这样的

控制器：

```
public String home(){
    Users users = userService.getCurrentUser();
    if(users.getRole().getRoleName().equals("admin")){ //causing LIE
    ....
} 
```

用户服务：

```
@Override
public Users getCurrentUser(){
    session =  ActionContext.getContext().getSession();
    return (Users) session.get("user");
} 
```

但是，当我将 userService.getCurrentUser() 更改为这样时，错误得到解决，但我认为这不是正确的方式，因为每次我使用当前用户时都需要连接到数据库。

```
@Override
public Users getCurrentUser(){
    session =  ActionContext.getContext().getSession();
    return daoManager.getDetailUser(((Users) session.get("user")).getUsername());
} 
```

DaoManager.getDetailUser 是这样的

```
@Override
public Users getDetailUser(String username) {
    try {
        Users user = (Users)sessionFactory.getCurrentSession().createQuery("SELECT U FROM Users U WHERE U.username=:USERNAME")
             .setParameter("USERNAME", username)
             .uniqueResult();
        return user;
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
} 
```

有没有其他更好的方法来解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:50:39.807

The most likely explanation will be that Spring closes the current session when you are exiting the service layer (`UserService`), however, after this happens, because Hibernate attempts to lazily load the children objects to avoid unnecessarily loading data (see also [What is lazy loading in Hibernate?](https://stackoverflow.com/questions/2192242/what-is-lazy-loading-in-hibernate)).

To avoid this, you could either ensure that hibernate does not do lazy loading by specifying `fetch=FetchType.EAGER` on the `role`, or use the [OpenSessionInView](https://community.jboss.org/wiki/OpenSessionInView) pattern (however, that's sometimes considered an antipattern, see [Why is Hibernate Open Session in View considered a bad practice?](https://stackoverflow.com/questions/1103363/why-is-hibernate-open-session-in-view-considered-a-bad-practice)).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:51:13.743

The easiest way to resolve this is just to access the lazy fetched field before the session is closed:

```
@Override
public Users getCurrentUser(){
    session =  ActionContext.getContext().getSession();
    Users user = (Users) session.get("user");
    user.getRole(); //Accessed to resolve lazy field
    return user;
} 
```

I do not recommend FetchType.EAGER. With that you cannot control access, it is always fetched whether you need it or not.. Add a few EAGER fields to your data model and suddenly your fetching the entire database for the simplest requests..

For queries you can also use `JOIN FETCH`

# java - 为什么JVM的Runtime max memory小于命令行-Xmx中指定的值？

> ID：10085191
> 
> 赞同：0
> 
> 时间：2012-04-10T08:03:55.527
> 
> 标签：java

我通过将最大内存指定为 128MB 来启动我的程序

```
java -Xmx128M ... 
```

然后我用 jconsole 连接到 jvm 实例。在“VM Summary”选项卡中，我发现：

```
Maximum heap size: 127,808 kbytes 
```

该值小于我在命令行中指定的值。任何人都可以给我一些提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:23:19.727

[我检查了Java Visual VM](http://docs.oracle.com/javase/7/docs/technotes/guides/visualvm/index.html)报告的值。这正是我配置为 JVM 参数的内容：

**例子**

```
JVM argument: 1024m
Heap Max: 1.073.741.824 B 
```

所以我猜 jconsole 有一种特殊的计算或 Java Visual VM 将值调整为配置的 JVM 参数 - 谁知道？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T08:12:20.667

我发现确切的内存大小要小一些。根据 Java 和操作系统的版本，可以缩小多少。我怀疑有一些实施原因导致它不是您所要求的。

顺便说一句：这只是堆大小的最大值。还有许多其他内存区域，例如线程堆栈、直接内存、perm gen、共享库、本机资源和内存映射文件，它们不包括在内，所以我不会太担心，因为这之间有很大的误差范围值和应用程序将使用的最大内存。

BTW2：现在最大128m相当小。它这么小有充分的理由吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T07:22:40.123

引用以下[Java 错误报告](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4391499)：

> 不是错误。-Xmx 标志的解释取决于 VM。包括 HotSpot 在内的一些 VM 会对该选项的有效值实施一个下限。CCC 提案不应该以这种方式提到 -Xmx 标志。

# ruby-on-rails - 如何解决这个未初始化的常量 UsersController::LinkedIn？

> ID：10085192
> 
> 赞同：1
> 
> 时间：2012-04-10T08:03:57.927
> 
> 标签：ruby-on-rails, omniauth, linkedin

从LinkedIn成功验证后，我转发到这个控制器，我得到了

未初始化的常量 UsersController::LinkedIn

这是身份验证成功后控件所在的位置。

```
class UsersController < ApplicationController
  def index
    # get your api keys at https://www.linkedin.com/secure/developer
    client = LinkedIn::Client.new("ddddd", "eeeee")
    request_token = client.request_token(:oauth_callback =>"http://localhost:3000/users/callback")
    session[:rtoken] = request_token.token
    session[:rsecret] = request_token.secret
    redirect_to client.request_token.authorize_url
  end

  def callback
    client = LinkedIn::Client.new("dddd", "eeeeee")
    if session[:atoken].nil?
      pin = params[:oauth_verifier]
      atoken, asecret = client.authorize_from_request(session[:rtoken], session[:rsecret], pin)
      session[:atoken] = atoken
      session[:asecret] = asecret
    else
      client.authorize_from_access(session[:atoken], session[:asecret])
    end
    @profile = client.profile
    @connections = client.connections
  end
end 
```

完整跟踪：

```
pp/controllers/users_controller.rb:4:in `index'
actionpack (3.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.1) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.1) lib/abstract_controller/callbacks.rb:18:in `process_action'
activesupport (3.2.1) lib/active_support/callbacks.rb:414:in `_run__434435962__process_action__199225275__callbacks'
activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `send'
activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.1) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.1) lib/active_support/callbacks.rb:81:in `send'
activesupport (3.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.1) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
activesupport (3.2.1) lib/active_support/notifications.rb:123:in `instrument'
activesupport (3.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.1) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.1) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.1) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
activerecord (3.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.1) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.1) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.1) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.1) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.1) lib/action_controller/metal.rb:246:in `action'
actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:66:in `call'
actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:30:in `call'
journey (1.0.3) lib/journey/router.rb:68:in `call'
journey (1.0.3) lib/journey/router.rb:56:in `each'
journey (1.0.3) lib/journey/router.rb:56:in `call'
actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:589:in `call'
omniauth (1.0.3) lib/omniauth/strategy.rb:168:in `call!'
omniauth (1.0.3) lib/omniauth/strategy.rb:148:in `call'
omniauth (1.0.3) lib/omniauth/builder.rb:42:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.1) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `_run__397314981__call__4__callbacks'
activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `send'
activesupport (3.2.1) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.1) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.1) lib/active_support/callbacks.rb:81:in `send'
activesupport (3.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.1) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.1) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.1) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.1) lib/action_dispatch/middleware/static.rb:53:in `call'
railties (3.2.1) lib/rails/engine.rb:479:in `call'
railties (3.2.1) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.1) lib/rails/rack/log_tailer.rb:14:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
C:/RailsInstaller/Ruby1.8.7/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
C:/RailsInstaller/Ruby1.8.7/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
C:/RailsInstaller/Ruby1.8.7/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
C:/RailsInstaller/Ruby1.8.7/lib/ruby/1.8/webrick/server.rb:162:in `start'
C:/RailsInstaller/Ruby1.8.7/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
C:/RailsInstaller/Ruby1.8.7/lib/ruby/1.8/webrick/server.rb:95:in `start'
C:/RailsInstaller/Ruby1.8.7/lib/ruby/1.8/webrick/server.rb:92:in `each'
C:/RailsInstaller/Ruby1.8.7/lib/ruby/1.8/webrick/server.rb:92:in `start'
C:/RailsInstaller/Ruby1.8.7/lib/ruby/1.8/webrick/server.rb:23:in `start'
C:/RailsInstaller/Ruby1.8.7/lib/ruby/1.8/webrick/server.rb:82:in `start'
rack (1.4.1) lib/rack/handler/webrick.rb:13:in `run'
rack (1.4.1) lib/rack/server.rb:265:in `start'
railties (3.2.1) lib/rails/commands/server.rb:70:in `start'
railties (3.2.1) lib/rails/commands.rb:55
railties (3.2.1) lib/rails/commands.rb:50:in `tap'
railties (3.2.1) lib/rails/commands.rb:50
script/rails:6:in `require'
script/rails:6 
```

会话控制器：

```
 class SessionsController < ApplicationController
      def create
        auth = request.env["omniauth.auth"]
        puts "printing"
        puts  auth
        session[:rtoken] = params[:token]
        session[:rsecret] = params[:secret]
        client = LinkedIn::Client.new("cus7tde3g4pe", "jKf6ZYgf8JhMoIJ4")
        if session[:atoken].nil?
          pin = params[:oauth_verifier]
          atoken, asecret = client.authorize_from_request(session[:rtoken], session[:rsecret], pin)
          session[:atoken] = atoken
          session[:asecret] = asecret
        else
          client.authorize_from_access(session[:atoken], session[:asecret])
        end
        @profile = client.profile
        @connections = client.connections
      end
      #user = User.find_by_provider_and_uid(auth["provider"], auth["uid"]) || User.create_with_omniauth(auth)
      session[:user_id] = profile.name
      redirect_to root_url, :notice => "Signed in!"
      #end

      def destroy
        session[:user_id] = nil
        redirect_to root_url, :notice => "Signed out!"
      end
    end

Full Trace : 

C:/linkedin/lovelinkedin/app/controllers/sessions_controller.rb:21: undefined local variable or method `session' for Ses
sionsController:Class (NameError)
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:2
51:in `require'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:2
51:in `require'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:2
36:in `load_dependency'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:2
51:in `require'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:3
59:in `require_or_load'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:3
13:in `depend_on'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:2
25:in `require_dependency'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/engine.rb:439:in `eager_load!'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/engine.rb:438:in `each'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/engine.rb:438:in `eager_load!'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/engine.rb:436:in `each'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/engine.rb:436:in `eager_load!'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/application/finisher.rb:53
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/initializable.rb:30:in `instanc
e_exec'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/initializable.rb:30:in `run'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/initializable.rb:55:in `run_ini
tializers'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/initializable.rb:54:in `each'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/initializable.rb:54:in `run_ini
tializers'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/application.rb:136:in `initiali
ze!'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/railtie/configurable.rb:30:in `
send'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/railtie/configurable.rb:30:in `
method_missing'
        from C:/linkedin/lovelinkedin/config/environment.rb:5
        from ./test/test_helper.rb:2:in `require'
        from ./test/test_helper.rb:2
        from C:/linkedin/lovelinkedin/test/unit/helpers/linkedin_helper_test.rb:1:in `require'
        from C:/linkedin/lovelinkedin/test/unit/helpers/linkedin_helper_test.rb:1
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:15:in `require
'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:15
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:4:in `select'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:4
C:/linkedin/lovelinkedin/app/controllers/sessions_controller.rb:21: undefined local variable or method `session' for Ses
sionsController:Class (NameError)
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:2
51:in `require'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:2
51:in `require'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:2
36:in `load_dependency'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:2
51:in `require'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:3
59:in `require_or_load'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:3
13:in `depend_on'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:2
25:in `require_dependency'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/engine.rb:439:in `eager_load!'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/engine.rb:438:in `each'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/engine.rb:438:in `eager_load!'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/engine.rb:436:in `each'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/engine.rb:436:in `eager_load!'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/application/finisher.rb:53
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/initializable.rb:30:in `instanc
e_exec'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/initializable.rb:30:in `run'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/initializable.rb:55:in `run_ini
tializers'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/initializable.rb:54:in `each'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/initializable.rb:54:in `run_ini
tializers'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/application.rb:136:in `initiali
ze!'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/railtie/configurable.rb:30:in `
send'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/railtie/configurable.rb:30:in `
method_missing'
        from C:/linkedin/lovelinkedin/config/environment.rb:5
        from ./test/test_helper.rb:2:in `require'
        from ./test/test_helper.rb:2
        from C:/linkedin/lovelinkedin/test/functional/linkedin_controller_test.rb:1:in `require'
        from C:/linkedin/lovelinkedin/test/functional/linkedin_controller_test.rb:1
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:15:in `require
'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:15
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:4:in `select'
        from C:/RailsInstaller/Ruby1.8.7/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:4 
```

请帮我解决这个问题，因为我是新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:48:11.333

您的 session_controller 问题的更新答案：

您必须在“操作”中使用“会话”，例如您当前的代码：

```
class SessionsController < ApplicationController
  def create
    # ... some code for create action
  end 

# NOTICE:  these 4 lines of code should be placed in an "action"
#user = User.find_by_provider_and_uid(auth["pr
session[:user_id] = profile.name
redirect_to root_url, :notice => "Signed in!"
#end

  def destroy
    # ... some code for destroy action
  end
end 
```

您应该将 4 行代码移动到一个动作中，以便 Rails 可以重新识别“会话”：

```
class SessionsController < ApplicationController
  def create
    # ... some code for create action
    session[:user_id] = profile.name
    redirect_to root_url, :notice => "Signed in!"
  end 
```

==============

上一个问题的答案：

如果您使用的是 Rails3，则必须将每个 ruby​​gems 添加到 Gemfile，例如：

```
gem "rake", "0.8.7"
gem 'rails', '3.0.5'
gem 'linkedin' 
```

在这里，通过添加`gem 'linkedin'`，ruby 代码能够包含来自“linkedin”gem 的所有内容。

不推荐使用的 Rails 2.x 方式：如果你不这样做，你必须`require`在你的控制器中添加语句，例如

```
# don't do this if you are using Gemfile
require 'linkedin'
class UsersController < ApplicationController
  def index
  # ... 
end 
```

# c# - 如何对数据表执行 CRUD 操作？

> ID：10085197
> 
> 赞同：0
> 
> 时间：2012-04-10T08:04:27.597
> 
> 标签：c#, asp.net, linq, datatable, crud

我有一个网格视图，我希望它的数据源是一个`(offline) DataTable`使 CRUD 操作 [离线] 然后在确认后我将确认的版本存储在我的数据库中。

* * *

*   `DataTable`如果可能，如何通过直通进行 CRUD 操作（插入、更新、删除） `LINQ`？示例

*   将最新版本保留在页面后背中的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:26:45.933

1.  我建议你在谷歌上使用`DataTable`and `DataSet`s with `DataAdapter`s; （[这里](http://www.codeproject.com/Articles/3805/Inserting-relational-data-using-DataSet-and-DataAd)是一个开始）如果你只是在一个简单的场景中使用它，它非常简单。

2.  您可以将数据存储在用户的`Session`对象中。（见[这里](http://msdn.microsoft.com/en-us/library/ms178581.aspx)）

# c# - [Serializable] 和 [Serializable()] 有什么区别

> ID：10085200
> 
> 赞同：0
> 
> 时间：2012-04-10T08:04:34.103
> 
> 标签：c#, .net, web-services, serialization

> **可能重复：**
> [c# 中的 [Serializable] 和 [Serializable()] 有区别吗？](https://stackoverflow.com/questions/1770643/is-there-a-difference-between-serializable-and-serializable-in-c)

我总是`[Serializable()]`在我的 WebServices 中，在类声明之前使用它来序列化它。今天在一个教程中，我看到`[Serializable]`...

有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T08:05:20.900

没有什么。

但是，如果您需要传递参数，则需要第一种语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:07:56.890

实际上有任何功能差异。允许的 2 种不同类型导致多个参数可以有一个参数，因此在这种情况下它也是 tru：

可以看看这个答案：[c#中[Serializable]和[Serializable()]之间有区别吗？](https://stackoverflow.com/questions/1770643/is-there-a-difference-between-serializable-and-serializable-in-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T08:10:29.397

它们之间没有区别，因为 SerializableAttribute 的构造函数不接受任何参数。另一方面，如果任何属性构造函数接受参数，则应将它们写在 () 中。

# android - Android GIS - 使用 Shapefile (.shp) 反向地理编码

> ID：10085201
> 
> 赞同：1
> 
> 时间：2012-04-10T08:04:40.640
> 
> 标签：android, mysql, gis, reverse-geocoding, shapefile

我想开发一个Android应用程序。我还是这里的新手。

我想要的只是开发我的应用程序，就像可以实现反向地理编码的 GIS 一样。所以我可以放一个坐标（Long & Lat），然后给我们一个城市名称作为反馈。

但我不想使用 Google 的 Geocoder 实现反向地理编码，我想要的只是从数据库上的 shapefile (.shp) 检查我输入的坐标，然后给出一个城市名称作为反馈。我想使用 MySQL 作为我的 shapefile (shp) 的数据库。有可能吗，我应该怎么做才能让它发生？能给个教程吗？

提前致谢。

# php - 使用 PHP 的 Facebook 封面照片 API

> ID：10085202
> 
> 赞同：5
> 
> 时间：2012-04-10T08:04:44.510
> 
> 标签：php, facebook, facebook-graph-api

Facebook 是否发布了任何用于 Facebook 封面照片的 api？我想用 PHP 语言来实现它。

编辑

我想使用图形 api PHP 在 facebook 时间轴中上传封面照片

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T08:15:55.870

有一个用于更新页面封面照片的api

### [http://developers.facebook.com/docs/reference/api/page/](http://developers.facebook.com/docs/reference/api/page/)

它要求提供照片 ID，我猜这是用户相册中照片的 ID。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-10T09:13:32.743

实际上，不可能直接通过 Facebook Photo Graph API 更改个人资料图片，因为没有部分提及。

但是，我们可以通过 API 将用户的照片上传到 Facebook，然后将用户重定向到上传的照片 URL，并在查询字符串参数中添加 1，如下所示：

[http://www.facebook.com/photo.php?pid=xyz&id=abc&makeprofile=1](http://www.facebook.com/photo.php?pid=xyz&id=abc&makeprofile=1)

“&makeprofile=1” 是这里的主要内容，xyz/abc 将由 Facebook 返回。通过添加参数，Facebook 将自动将当前用户的头像更改为上面上传的图片。

欲了解更多信息：http: [//4rapiddev.com/facebook-graph-api/php-change-facebook-profile-picture-with-graph-api/](http://4rapiddev.com/facebook-graph-api/php-change-facebook-profile-picture-with-graph-api/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T21:23:31.580

您可以通过图形 api 将照片上传到相册。获取新的照片 ID 并将用户重定向到此 url

```
 "http://www.facebook.com/profile.php?preview_cover=" + photo_id 
```

在此之前，您应该通知用户他/她将被重定向到 facebook 到他们可以设置新封面照片的页面（他们需要确认更改，单击保存按钮）。这不是完美的解决方案，也没有完全覆盖 api，但它是 asfaik 的最佳出路。

# mysql-workbench - MySQL Workbench EER Diagramm - 如何更改存储引擎？

> ID：10085203
> 
> 赞同：28
> 
> 时间：2012-04-10T08:04:58.613
> 
> 标签：mysql-workbench

我使用 MySQL Workbench 5.2.38。我已经制作了一个 EER 图。但在导出时，我对 InnoDB 作为定义的存储引擎感到惊讶。事后更改表不是一种选择，因为我没有 InnoDB 引擎。

错误 1286 (42000)：未知的存储引擎“InnoDB”

所以，我已经通过 Edit-> Preferences -> Model: MySQL 将 Default Engine 更改为 MyISAM，但是在导出时仍然使用 InnoDB？！

我完全找不到在表编辑器中更改存储引擎的选项。有人可以帮助我如何更改 MySQL Workbench ERR 中表的存储引擎吗？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-05-22T15:35:09.460

这不是很明显，但是在编辑表格时，右侧有一个蓝色箭头。如果单击此选项，您将获得更多选项，您可以在其中更改存储引擎。

![在此处输入图像描述](../Images/5bc53ebad79554c53392c8fe674e5fe1.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:15:29.873

默认情况下，应在 Workbench 模型编辑器中尊重全局首选项。如果没有，您应该[提交](http://bugs.mysql.com)有关此问题的错误。

但是，这是我尝试过的另一种解决方案并且有效：

1.  在模型编辑器中转到`Model --> Model Options...`
2.  取消选中`Use Global Settings`出现的对话框底部的复选框。
3.  转到`Model: MySQL`选项卡并在`Default Storage Engine`组合框中选择您要使用的存储引擎。

执行此操作后，生成的脚本将使用您选择的存储引擎。

# windows-7 - DOSBox 退出到错误：CPU_SetSegGeneral：堆栈段零

> ID：10085206
> 
> 赞同：5
> 
> 时间：2012-04-10T08:05:18.873
> 
> 标签：windows-7, 64-bit, clipper, dosbox

我正在尝试运行旧的 Clipper 应用程序。它在 Win 7 32bit 上运行良好，但是当我尝试使用 DOSBox 0.74 时它崩溃并出现以下错误：

`Exit to error: CPU_SetSegGeneral: Stack segment zero`

运行 DOSBox 时是否有一些我忘记设置的设置？

我需要能够在 DOSBox 中运行这个应用程序，因为它似乎是唯一可以在任何 Win 7 上运行的便携式解决方案，无论是 32 位还是 64 位。

如果这个问题没有明显的解决方案，也许你可以告诉我在 Win 7 64 位家庭版上运行 Clipper 5.3 应用程序的替代方案是什么？

**编辑：** 我在 Win 7 Home 64 位上进行了尝试，结果完全相同。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:37:13.570

很多年前我用过clipper，clipper确实会导致问题，因为不正确的config.sys配置，特别是设置“文件”必须对您的应用程序足够大（比如说200），但是“原始”dosbox没有提供一种方法调整此设置。

尝试来自[http://www.shdon.com/blog/2009/09/05/adjustable-files-setting-in-dosbox](http://www.shdon.com/blog/2009/09/05/adjustable-files-setting-in-dosbox)的补丁 此补丁允许配置 FILES 在 dosbox 选项文件上添加新设置

脚步：

*   备份dosbox.exe并替换为补丁版本
*   编辑 dosbox 选项文件并将 FILES=200 添加到 [DOS] 部分

尝试并发布结果，因为我没有要测试的 Clipper 5.3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:17:44.993

想要结束这个问题，我将写下唯一的解决方案是什么，这要归功于我能够在 Win7 64 位上运行那个陈旧的应用程序。

这是[VMLite XP 模式](http://www.vmlite.com/index.php?option=com_content&view=article&id=47&Itemid=143)。我只是按照他们如何指导中描述的步骤进行操作，它已经启动并运行，然后我将我的应用程序复制到 VMLite XP 模式，它运行良好。

最后，经过一番谷歌搜索，我创建了一个桌面快捷方式，现在我可以轻松地从我的 Win7 64 位桌面启动应用程序，然后启动启动应用程序的 VMLite XP 模式:) 或类似的东西，到目前为止，它效果很好。

# mysql - 为什么我们不应该在生产服务器上的 mysql 查询中使用 Select *？

> ID：10085208
> 
> 赞同：4
> 
> 时间：2012-04-10T08:05:34.817
> 
> 标签：mysql, select, pdo

基于这里的这个问题[Selecting NOT NULL columns from a table](https://stackoverflow.com/questions/7455751/selecting-not-null-columns-from-a-table)张贴者之一说

> 你不应该在生产中使用 SELECT * 。

**我的问题：**我们真的不应该在生产服务器上的 mysql 查询中使用 Select * 吗？如果是，为什么我们不应该使用全选？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T08:08:43.427

大多数人确实建议不要`SELECT *`在生产中使用，因为它往往会破坏事情。不过也有一些例外。

*   `SELECT *`获取所有列 - 而大多数时候您并不需要它们。这会导致 SQL 服务器发送比需要更多的列，这是一种浪费，并且会使系统变慢。
*   使用`SELECT *`，当您稍后添加列时，旧查询也会选择此新列，而通常它不需要它。明确命名列可以防止这种情况。
*   大多数编写`SELECT *`查询的人也倾向于抓取行并使用列顺序来获取列 - 一旦在现有列之间注入列，这将破坏您的代码。
*   显式命名列还可以保证它们始终处于相同的顺序，而`SELECT *`在修改表列顺序时可能表现不同。

但也有例外，例如像这样的语句：

```
INSERT INTO table_history
SELECT * FROM table 
```

像这样的查询从表中获取行，并将它们插入到 table_history 中。如果您希望此查询在将新行添加到表和 table_history 时继续工作，这`SELECT *`是可行的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T08:12:02.137

请记住，您的数据库服务器不一定与查询数据库的程序位于同一台机器上。数据库服务器可能位于带宽有限的网络上；它甚至可以跨越半个地球。

*   如果您确实需要每一列，那么请务必使用`SELECT * FROM table`.
*   `SELECT * FROM table`但是，如果您只需要某些列，那么仅使用丢弃一半的列来请求所有列会浪费带宽。

其他可能的原因最好指定您想要的确切列：

*   数据库结构可能会改变。例如，如果您的程序假定某些列名，那么如果列名更改，它可能会失败。如果违反您对列名的假设，显式命名要检索的列将使程序立即失败。
*   正如@Konerak 提到的，命名您想要的列还可以确保结果中列的*顺序*是相同的，即使表架构发生变化（即在其他两列之间插入一列）。如果您是取决于`FirstName`是结果的第`[2]`nd 元素。

    （注意：处理这个问题的一种更健壮和自我记录的方法是要求您的数据库结果作为键值对列表，如 PHP 关联数组、Perl 哈希或 Python `dict`。这样您就不需要使用用于索引结果的数字 ( `name = result[2]`) - 您可以使用列名：`name = result["FirstName"]`.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T08:10:12.643

使用`SELECT *`效率非常低，尤其是对于有很多列的表。您应该只选择您需要的列。

除此之外，使用列名使查询更易于阅读和维护。

# mysql - 结合这两个 mySQL 查询

> ID：10085209
> 
> 赞同：2
> 
> 时间：2012-04-10T08:05:45.550
> 
> 标签：mysql, sql, subquery, group-concat

**此查询产生正确答案：**

```
SELECT users.*,
        SUM(overtime_list.shift_length) AS overtime_total,
        (SELECT GROUP_CONCAT(users_roles.role_ID) FROM users_roles WHERE users.user_ID = users_roles.user_ID) AS roles
    FROM availability_list
    INNER JOIN users
        ON users.user_ID = availability_list.user_ID
    INNER JOIN stations
        ON users.station_ID = stations.station_ID
    INNER JOIN overtime_list
        ON overtime_list.user_ID = users.user_ID
        AND overtime_list.date >= '$totalovertimedays'
    WHERE availability_list.date = '$date'
    AND availability_list.type = '$type'
    GROUP BY users.user_ID
    ORDER BY overtime_total ASC 
```

**输出：**

```
 +----------+---------+----------------------------+------------------+
 |  user_ID | user    |   roles                    |  overtime_total  |
 +----------+---------+----------------------------+------------------+
 |        1 |   Smith |    1,2                     |        12        |
 +----------+---------+----------------------------+------------------+
 |        2 |   Jones |    1,2,3                   |        7         |
 +----------+---------+----------------------------+------------------+ 
```

**这是期望的结果：**

```
 +----------+---------+----------------------------+------------------+
 |  user_ID | user    |   roles                    |  overtime_total  |
 +----------+---------+----------------------------+------------------+
 |        1 |   Smith |    Admin, Staff            |        12        |
 +----------+---------+----------------------------+------------------+
 |        2 |   Jones |    Admin, Staff, Other     |        7         |
 +----------+---------+----------------------------+------------------+ 
```

**这是我可以使用的连接，它似乎允许 group_concat 更正连接“管理员、员工、其他” - 但我不知道如何将它合并到上面的主查询中？**

```
SELECT users.user_id, GROUP_CONCAT(roles.short_name  separator ', ') roles
FROM users
JOIN users_roles ON users.user_ID = users_roles.user_ID
JOIN roles ON users_roles.role_ID= users_roles.role_ID
GROUP BY users.user_ID 
```

**users_roles 表：**

```
+----------+---------+
|  user_ID | role_ID |
+----------+---------+
|        1 |   1     |
+----------+---------+
|        2 |   1     |
+----------+---------+
|        2 |   2     |
+----------+---------+
|        2 |   3     |
+----------+---------+
|        1 |   3     |
+----------+---------+ 
```

**角色表：**

```
+----------+------------+
|  role_ID | short_name |
+----------+------------+
|        1 |   Admin    |
+----------+------------+
|        2 |   Super    |
+----------+------------+
|        3 |   Other    |
+----------+------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:12:39.943

你可以试试：

```
SELECT users.*,
        SUM(overtime_list.shift_length) AS overtime_total,
        (SELECT GROUP_CONCAT(roles.short_name) FROM users_roles 
         INNER JOIN roles ON user_roles.role_ID = roles.role_ID
         WHERE users.user_ID = users_roles.user_ID) AS roles
    FROM availability_list
    INNER JOIN users
        ON users.user_ID = availability_list.user_ID
    INNER JOIN stations
        ON users.station_ID = stations.station_ID
    INNER JOIN overtime_list
        ON overtime_list.user_ID = users.user_ID
        AND overtime_list.date >= '$totalovertimedays'
    WHERE availability_list.date = '$date'
    AND availability_list.type = '$type'
    GROUP BY users.user_ID
    ORDER BY overtime_total ASC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T08:13:35.717

添加派生表并将其连接回用户。使用派生表是因为 overtime_list 上的聚合函数，因此数据不会重复。

```
SELECT users.*,
    SUM(overtime_list.shift_length) AS overtime_total,
    roles.roles
FROM availability_list
INNER JOIN users
    ON users.user_ID = availability_list.user_ID
INNER JOIN stations
    ON users.station_ID = stations.station_ID
INNER JOIN overtime_list
    ON overtime_list.user_ID = users.user_ID
    AND overtime_list.date >= '$totalovertimedays'
LEFT JOIN
(
   SELECT users_roles.user_ID, 
          GROUP_CONCAT(roles.short_name  separator ', ') roles
     from users_roles
      INNER JOIN roles ON users_roles.role_ID = roles.role_ID
    group by users_roles.user_ID
) roles
  ON users.user_ID = roles.user_ID
WHERE availability_list.date = '$date'
AND availability_list.type = '$type'
GROUP BY users.user_ID
ORDER BY overtime_total ASC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T08:12:36.167

也许是这样的：

```
SELECT users.*,
        SUM(overtime_list.shift_length) AS overtime_total,
        (SELECT GROUP_CONCAT(users_roles.short_name) FROM users_roles WHERE users.user_ID = users_roles.user_ID) AS roles
    FROM availability_list
    INNER JOIN users
        ON users.user_ID = availability_list.user_ID
    INNER JOIN stations
        ON users.station_ID = stations.station_ID
    INNER JOIN overtime_list
        ON overtime_list.user_ID = users.user_ID
        AND overtime_list.date >= '$totalovertimedays'
    WHERE availability_list.date = '$date'
    AND availability_list.type = '$type'
    GROUP BY users.user_ID
    ORDER BY overtime_total ASC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T10:02:54.903

我从不喜欢在查询中使用用户函数，因为数据库引擎将函数视为黑盒并且无法优化内部查询，因此尽可能避免使用它们。使用交叉应用，您会得到与预期相同的结果：（没有测试所有查询，因为我没有使用所有对象）

```
SELECT users.*, 
        SUM(overtime_list.shift_length) AS overtime_total, 
        LEFT(ISNULL(roles.roles, ', '), LEN(ISNULL(roles.roles, ', ')) - 1) as roles 
    FROM availability_list 
    INNER JOIN users 
        ON users.user_ID = availability_list.user_ID 
    CROSS APPLY (
        SELECT short_name + ', '
        FROM roles 
        inner users_roles ON roles.role_id = users_roles.role_ID 
        WHERE users.user_ID = users_roles.user_ID 
        ORDER BY roles.role_id
        FOR XML PATH('')
    ) roles (roles)         
    INNER JOIN stations 
        ON users.station_ID = stations.station_ID 
    INNER JOIN overtime_list 
        ON overtime_list.user_ID = users.user_ID 
        AND overtime_list.date >= '$totalovertimedays' 
    WHERE availability_list.date = '$date' 
    AND availability_list.type = '$type' 
    GROUP BY users.user_ID 
    ORDER BY overtime_total ASC 
```

# c# - 从多语言网站获取不同语言的 HTML 数据

> ID：10085218
> 
> 赞同：0
> 
> 时间：2012-04-10T08:06:46.050
> 
> 标签：c#, html, html-parsing, multilingual, fetch

有一个**多语言**网站。当我从浏览器查看 html 源代码时，我会以我的语言查看数据。但是当我创建一个 webrequest 并获取 HTML 时，我得到的是英文数据。

*   在我的浏览器中，lan​​g 属性是： lang="tr" xml:lang="tr"
*   当我获取 HTML 时，它是： lang="en" xml:lang="en"

我想用土耳其语获取 HTML。我怎样才能做到这一点？

* * *

这就是我获取的方式：

```
 WebRequest request = WebRequest.Create(webUrl);
        request.Method = "POST";
        byte[] byteArray = Encoding.UTF8.GetBytes("");
        request.ContentType = "application/x-www-form-urlencoded";
        request.ContentLength = byteArray.Length;

        Stream dataStream = request.GetRequestStream();
        dataStream.Write(byteArray, 0, byteArray.Length);
        dataStream.Close();

        WebResponse response = request.GetResponse();
        dataStream = response.GetResponseStream();

        StreamReader reader = new StreamReader(dataStream);
        htmlcontent = reader.ReadToEnd();

        reader.Close();
        dataStream.Close();
        response.Close(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:17:51.580

```
WebHeaderCollection headerCollection = request.Headers;    
headerCollection.Add("Accept-Language:tr"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T08:16:22.253

尝试添加[`Accept-Language`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)请求标头。在 .NET 中，您可以这样使用[`HttpRequestHeader.ContentLanguage`](http://msdn.microsoft.com/en-us/library/yfb6df42%28v=vs.100%29.aspx)：

```
request.Headers[HttpRequestHeader.AcceptLanguage] = 
                                         "tr-TR,tr;q=0.8,en-US;q=0.6,en;q=0.4"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T08:17:27.750

在您的 WebRequest 中，为以下内容添加标头条目：

```
 Accept-Language: tk 
```

这将告诉 ASP.NET 您的首选语言。您必须已经实现了语言切换功能。MSDN 在这里有一个[ASP.NET 全球化和本地化](http://msdn.microsoft.com/en-us/library/bz9tc508.aspx)页面。

# css - 如何在嵌入小部件中应用 css 样式

> ID：10085226
> 
> 赞同：0
> 
> 时间：2012-04-10T08:07:43.867
> 
> 标签：css, widget, sass, less, stylus

我为我不拥有的网站创建小部件。

注入 html 后，我执行以下操作来设置小部件的样式：

```
var style = document.createElement('style'),
    stylesString = 'minified css with a prefix for each selector eg. .my-prefix p {... }',
    rules = document.createTextNode(stylesString);

style.type = 'text/css';
if(style.styleSheet) {
    style.styleSheet.cssText = rules.nodeValue;
} else {
    style.appendChild(rules);
}
document.getElementsByTagName('head')[0].appendChild(style); 
```

但是在某些网站上，我的样式被覆盖了。

有没有办法更精确地应用样式？

我不想（不能）使用：

*   iFrame
*   ! 对每个属性都很重要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:22:34.193

这很可能是由于有问题的元素具有内联样式（`!important`如果您想使用当前添加样式的方法，您必须使用它们来覆盖），或者具有具有更高[选择器优先级](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)的样式。

我的建议是通过向它们添加至少一个来使您的选择器更加具体`id`——尽管这仍然不能保证您的选择器仍然是最具体的。这完全取决于原始站点上样式表的质量。

# android - Android：下载 XML 时显示解析进度指示器

> ID：10085227
> 
> 赞同：0
> 
> 时间：2012-04-10T08:07:54.230
> 
> 标签：android, xml, parsing, download, progress

我需要在解析下载 xml 时显示进度指示器栏。

我先下载，然后解析，但我不想同时做这两个动作。

这是我执行此操作的代码的一部分，但我不知道如何显示进度指示器。

```
 public class WS_Sincronizo  extends AsyncTask<Void,Integer,List<Alertas>>{

private Context conte;
// Variable para controlar ventana de progreso
private Sincronizacion actividad;
private Alertas user;
private long totalSize;
private WaitForCancelTask wft;
private HttpPost httpPost;
private HttpClient httpClient;
private HttpContext localContext;
private List<Alertas> resultado;
private BaseDatosHelper miBBDDHelper;
private SQLiteDatabase db;
private SincronizarXmlHelper manejadorXML;
private String fecha_bd;
private HttpEntity resEntity;

public static  double fileSize; 
private double downloaded; // number of bytes downloaded 

public WS_Sincronizo (Context conte,Object actividad, String fecha){
    this.conte=conte;
    this.actividad=(Sincronizacion) actividad;
    this.fecha_bd=fecha;
    fileSize = 0; 
    downloaded = 0; 

}

@Override
protected void onPreExecute() {
    super.onPreExecute();
    resultado=null;
    //TimeOut si exece el tiempo límite
    wft=new WaitForCancelTask(this,conte,Utiles.TimeOutWebServerSincro);
} 

@Override 
protected void onProgressUpdate(Integer... progress) { 
// TODO Auto-generated method stub 
    actividad.progreso((int) (progress[0]));

  if (progress[0].intValue()==100){
    /*** CANCELO TIMEOUT ***/
    wft.FinishWaitForCancelTask();
    }

} 

@Override
protected void onPostExecute(List<Alertas> rta) {
    super.onPostExecute(rta);
    // Envío mensaje vacio al manejador para indicar que ya terminó.

     actividad.FinSincronizacion(rta);

}

@Override
protected void onCancelled() {
    //Si había empezado una transacción la cierro
    try{
    db.releaseReference();
    }catch (Exception e) {
        // TODO: handle exception

    }

    httpPost=null;
    httpClient.getConnectionManager().shutdown();

    this.onPostExecute(null);

}

@Override
public List<Alertas> doInBackground(Void... params) {

      httpClient = new DefaultHttpClient();
      localContext = new BasicHttpContext();
      httpPost = new HttpPost(Utiles.UrlWebService + "GetSincro");

      try {  

        String version = conte.getPackageManager().getPackageInfo(conte.getPackageName(), 0).versionName; 

        multipartContent.addPart("fecha",new StringBody(fecha_bd));

        multipartContent.addPart("version",new StringBody(version));

        multipartContent.addPart("sistema",new StringBody(Utiles.SISTEMA));

    httpPost.setEntity(multipartContent);

    HttpResponse httpresponse = httpClient.execute(httpPost,localContext);

    if(httpresponse.getStatusLine().getStatusCode() == HttpURLConnection.HTTP_OK){
        //Cancelo TimeOut porque resp es ok;

        resEntity = httpresponse.getEntity();

            if (resEntity != null) {

            fileSize = resEntity.getContentLength(); 

            //Log.d("SIZE:",MemoryStatus.formatSize((long)fileSize));
            Log.d("SIZE:",String.valueOf(fileSize));

            //Log.i("RESPONSE",EntityUtils.toString(resEntity));
                SAXParserFactory fabrica = SAXParserFactory.newInstance();
                SAXParser parser = fabrica.newSAXParser();
                XMLReader lector = parser.getXMLReader();

                try{
                    miBBDDHelper = new BaseDatosHelper(conte);
                    db=miBBDDHelper.SincronizarTablas();
                    manejadorXML = new SincronizarXmlHelper(db);
                    lector.setContentHandler(manejadorXML);
                    lector.parse(new InputSource(resEntity.getContent()));
                    // Obtengo el resultado del XML
                    resultado = manejadorXML.getListas();

                }catch (Exception e){

                }

                finally {
                    // TODO: handle exception
                    resEntity.consumeContent();
                    if (db.inTransaction()) {
                        db.endTransaction();
                    }
                    db.close();
                    miBBDDHelper.close();

                }

                if(resultado.isEmpty()) {
                    throw null;
                }
                else {
                    return resultado;
                }

                // Si dio error la RESPUESTA del SERWEB

            } else {

                throw null;
            }

            // Si no recibo la cabecera ok ,fuera
        } else {

            throw null;

        }           

    } catch (Exception e) {
        // TODO Auto-generated catch block
       // Log.d("Error",e.getMessage());
        httpClient.getConnectionManager().shutdown();
        return null;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:15:14.627

我建议您使用 AsyncTask 来做您尝试的事情。使用 doInBackground() 下载和 parse()，而您可以使用 onProgressUpdate() 显示进度对话框。这是一个教程来做同样的事情。

[http://www.shubhayu.com/android/witer-asynctask-what-why-how](http://www.shubhayu.com/android/witer-asynctask-what-why-how)

或者您可以在 Android 开发者博客中搜索 AsyncTask。

**编辑**

在扩展的 AsyncTask 中声明`private ProgressDialog mProgress = null;`，然后添加以下假设`Progress`参数是字符串，`Result`参数是布尔值

```
@Override
protected void onPreExecute() {
    mProgress = ProgressDialog.show(mContext, progressTitle, mMessage);
    mProgress.setCancelable(false);
    super.onPreExecute();
}

@Override
protected void onProgressUpdate(String... progress) {
    mProgress.setMessage(progress);
}

@Override
protected void onPostExecute(Boolean result) {

    if( result ){
        mProgress.setMessage("Succesfully Downloaded and Parsed!");
    }else{
        mProgress.setMessage("Failed to download :(");
    }
    mProgress.dismiss();
    super.onPostExecute(result);
} 
```

并在您的 doInBackGround() 中，使用以下内容更新进度对话框

```
publishProgress("your update Message"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:18:25.997

尝试：

```
public class SomeActivity extends Activity {

   private static final int PROGRESS_DIALOG_ID = 0;

   @Override
   protected Dialog onCreateDialog(int id) {
       if (id == PROGRESS_DIALOG_ID) {
           ProgressDialog dialog = new ProgressDialog(this);
           dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
           dialog.setMessage("Loading...");
           dialog.setCancelable(false);
           return dialog;
       }
       return super.onCreateDialog(id);
   }

   public void someMethod(){
       new SomeTask().execute();
   }

   class SomeTask extends AsyncTask<Void, Void, Void> {

      @Override
      protected void onPreExecute() {
           showDialog(PROGRESS_DIALOG_ID);
      }

      @Override
      protected Void doInBackground(Void... voids) {
        // download and parse
          return null;
      }
      @Override
      protected void onPostExecute(Void aVoid) {
          dismissDialog(PROGRESS_DIALOG_ID);
      }
  }
} 
```

# .net - 如何在 Canvas 内专门绘制形状

> ID：10085229
> 
> 赞同：4
> 
> 时间：2012-04-10T08:08:00.610
> 
> 标签：.net, wpf, canvas, drawing, shape

我在[Canvas](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.aspx)有一个 Shape ，如下所示：

```
<ScrollViewer>

    <Border Height="342" Width="470" HorizontalAlignment="Left" 
        VerticalAlignment="Top" BorderThickness="3" BorderBrush="Black">

        <Canvas Background="White">
            <Rectangle Width="200" Height="200" Canvas.Left="103" 
                Canvas.Top="186" Fill="Red" />
        </Canvas>

    </Border>

</ScrollViewer> 
```

即使 Rectangle 是 Canvas 子项，它也会在 Canvas 限制之外绘制，覆盖 Border 底部边框。如何使矩形仅在画布范围内绘制，确保超出的矩形部分不显示？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-10T08:16:09.797

这就是[ClipToBounds](http://msdn.microsoft.com/en-us/library/system.windows.uielement.cliptobounds.aspx)属性的用途：

```
<Canvas Background="White" ClipToBounds="True"> 
    <Rectangle Width="200" Height="200" Canvas.Left="103" Canvas.Top="186" Fill="Red" /> 
</Canvas> 
```

# javascript - 获取选择标签的显示值

> ID：10085231
> 
> 赞同：3
> 
> 时间：2012-04-10T08:08:16.577
> 
> 标签：javascript, html

```
<select id="kamal">
<option value"ACTIVE">a<option>
<option value"DISABLED">b<option>
<option value"DELETED">c<option>
</select> 
```

我想获取页面上显示的值..而不是选项标签中显示的值

我对“aktiv”感兴趣，而不是“ACTIVE”

当我写`document.getElementById("kamal").value;`然后选择的值出现在变量中。但我想要显示的值。

请帮助我如何获取这个值。

**注意：通过使用下面给出的所有选项，它会给我所选选项的值，我想要所选选项的标签。我的意思是html页面上显示的值。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T08:12:18.577

您正在寻找的解决方案是：

要获取值：

```
var element = document.getElementById("kamal");
var selectedValue = element.options[element.selectedIndex].value; 
```

要获取文本：

```
var element = document.getElementById("kamal");
var selectedValue = element.options[element.selectedIndex].text; 
```

编辑：

工作示例：

> [http://jsfiddle.net/n85tW/6/](http://jsfiddle.net/n85tW/6/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T08:11:16.033

尝试 ：

```
var sel = document.getElementById("kamal")
alert(sel.options[sel.selectedIndex].value); 
```

[这里的工作示例](http://jsfiddle.net/n85tW/)

注意：您的`<option>`标签应以`</option>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T09:21:33.580

var element = document.getElementById("kamal"); var selectedValue = element.options[element.selectedIndex]。**内部HTML；**

这是我的问题的解决方案。

# java - 将数据从服务器（java）发送到android客户端

> ID：10085232
> 
> 赞同：0
> 
> 时间：2012-04-10T08:08:20.487
> 
> 标签：java, android, client

我想制作一个从 android 客户端接收一些数据并发送回来的应用程序。通过 HttpServletResponse 发回数据是一种好习惯吗？最好的方法是什么？这是我的服务器代码片段，我想发`data`回：

```
public void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {

    BufferedReader reader = req.getReader();
    StringBuilder sb = new StringBuilder();
    String line = reader.readLine();
    while (line != null) {
        sb.append(line + "\n");
        line = reader.readLine();
    }
    reader.close();
    String data = sb.toString();
    data="hello, "+data;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:13:48.980

您的代码片段是服务器代码，如果您要从服务器返回大量数据，则使用流，否则您可以编写类似这样的代码

```
PrintWriter writer = resp.getWriter();  
writer.println(data); 
```

# actionscript-3 - 重置属性集合或创建新实例是否更快？

> ID：10085234
> 
> 赞同：3
> 
> 时间：2012-04-10T08:08:49.673
> 
> 标签：actionscript-3, recycle

我有一个`Matrix`我回收并用于将`DisplayObject`实例绘制到`Bitmap`.

目前，我`Matrix`在渲染每个项目之前重置了，如下所示：

```
_matrix.a = 1;
_matrix.b = 0;
_matrix.c = 0;
_matrix.d = 1;
_matrix.tx = 0;
_matrix.ty = 0; 
```

执行上述操作或简单地执行此操作会更好吗？：

```
_matrix = new Matrix(); 
```

通常我会说前者，但是我不确定在`Matrix`我重置的每个属性（数学上）是否有一些繁重的事情发生的情况下。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T08:53:40.733

我认为重用同一个实例`Matrix`比每次都创建一个新实例更有效。

事实上，创建一个新实例是一个相对繁重的操作，这就是使用缓存的原因：创建几个实例并重用它们，而不是创建大量实例。

我运行了一个小基准，它证实了我的答案：

```
var t:Number;
var i:int;
var N:int = 10000000;

t = getTimer();
for (i = 0; i < N; i++) {
    _matrix = new Matrix();
}
trace(getTimer()-t); // 7600

t = getTimer();
for (i = 0; i < N; i++) {
    _matrix.a = 1;
    _matrix.b = 0;
    _matrix.c = 0;
    _matrix.d = 1;
    _matrix.tx = 0;
    _matrix.ty = 0;
}
trace(getTimer()-t); // 4162 
```

最后，请注意差异并没有那么大，并且创建`10000000`新实例只需要`7600 ms`，因此除非您每帧创建数千个矩阵，否则任何一种方法都不会对性能产生明显影响。

* * *

**编辑：**

使用该方法`identity`将具有两种方法的优点（简单性和性能）：

```
t = getTimer();
for (i = 0; i < N; i++) {
    _matrix.identity();
}
trace(getTimer()-t); // 4140 
```

# haskell - Haskell 在一个奇怪的地方抛出一个解析错误

> ID：10085239
> 
> 赞同：5
> 
> 时间：2012-04-10T08:09:13.623
> 
> 标签：haskell, parse-error

一个玩具示例，但仍然令人沮丧：

```
numberMapper:: IO ()
numberMapper = do codes <- forM [1 .. 4] (\num ->
                   do putStrLn $ "Enter a code for " ++ show num
                       code <- getLine
                       return code)
                   let numberCodes = zip [1 .. 4] codes
                   in forM numberCodes (\(num,code) ->
                   putStrLn $ "Got code " ++ show code ++ " for " ++ show num) 
```

`ghci`告诉我我有一个`Parse error in pattern: putStrLn`，但我不知道为什么它应该无法解析。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T08:19:01.650

更正：

```
numberMapper:: IO ()
numberMapper = do
    codes <- forM [1 .. 4] $ \num -> do
        putStrLn $ "Enter a code for " ++ show num
        getLine
    let numberCodes = zip [1 .. 4] codes
    forM_ numberCodes $ \(num,code) ->
        putStrLn $ "Got code " ++ show code ++ " for " ++ show num 
```

**修复：**块内的行`do`应该对齐。

```
-- wrong
a = do codes <- something
        let numberCodes = zip [1..4] codes

-- right
a = do codes <- something
       let numberCodes = zip [1..4] codes 
```

**修复 2：**在块`let`内使用时`do`，不要使用`in`.

```
-- wrong
func = do
    let x = 17
    in print x

-- right
func = do
    let x = 17
    print x 
```

**修复 3：**使用`forM_`（返回`()`，又名 void）而不是`forM`（返回列表）。

```
codes <- forM [1..4] func...  -- returns a list
forM_ numberCodes $ ...       -- discards list, returns () 
```

所以`forM_`（几乎）可以这样写：

```
forM_ xs f = do forM xs f
                return () 
```

**小改动：**这里不需要`return`：

```
do func1
   x <- func2
   return x 
```

您可以将其更改为等效项，

```
do func1
   func2 -- value of func2 is returned 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T08:18:18.713

你在你的 do-blocks 中过度缩进了行。此外，您不需要-block中的`in`for`let`语句。`do`

这对我有用：

```
numberMapper:: IO ()
numberMapper = do codes <- forM [1 .. 4] (\num ->
                   do putStrLn $ "Enter a code for " ++ show num
                      code <- getLine
                      return code)
                  let numberCodes = zip [1 .. 4] codes
                  forM numberCodes (\(num,code) ->
                    putStrLn $ "Got code " ++ show code ++ " for " ++ show num) 
```

您也可以像这样构造它：

```
numberMapper:: IO ()
numberMapper = do codes <- forM [1 .. 4] $ \num ->
                   do putStrLn $ "Enter a code for " ++ show num
                      code <- getLine
                      return code
                  let numberCodes = zip [1 .. 4] codes
                  forM numberCodes $ \(num,code) ->
                    putStrLn $ "Got code " ++ show code ++ " for " ++ show num 
```

（这可以让您避免使用括号；或者，将 the`do`放在 the 的末尾`\num ->`并排列后续语句）

# ocaml - Ocaml 库中的 string_dec 和字符串

> ID：10085243
> 
> 赞同：4
> 
> 时间：2012-04-10T08:09:37.840
> 
> 标签：ocaml, coq, coq-extraction

我有文件：

*   `String0.ml`提取自`String.v`（来自 Coq 库）

*   `String.ml`：是Ocaml的字符串库

将我的测试文件从 Coq 提取到 Ocaml 后，我想`String.ml`在 Ocaml 的库中使用，所以我编写了一个替换命令将所有替换`String0`为`String`.

问题出在文件`test.v`中，我使用了以下定义之一：

```
Definition beq_string := beq_dec string_dec. 
```

`string_dec`Ocaml 的库中没有这个函数，但 Coq 的字符串库中有

所以我编译的时候出错了`test.ml`

```
open String
let beq_string = beq_dec string_dec 
```

**错误：未绑定的值 string_dec**

我想将 Ocaml 的字符串库用于我的所有提取文件。我怎样才能编译`string_dec`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:45:39.803

也提取`string_dec`函数。

`beq_string`如果您愿意稍微信任 OCaml 库，通过提取以使用字符串的内置相等性，您将获得更好的性能：

```
Extract Constant beq_string => "((=) : string->string->bool)". 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T19:46:18.670

创建一个 MyString.ml 模块，其中包含：

```
module String0 = struct
  include String
  let string_dec = function ... (* the definition of string_dec *)
end 
```

在 Coq 生成的所有文件中，从

```
open MyString 
```

然后，您无需重命名`String0`为`String`，它将使用 String 模块中定义的`string_dec`函数，以及您定义的函数。

# php - 插入查询给出错误

> ID：10085244
> 
> 赞同：-1
> 
> 时间：2012-04-10T08:09:40.197
> 
> 标签：php, mysql, html, insert

下面是我在 Mysql DB 中插入的 SQL 查询

```
$sql = "INSERT INTO $db_table(area,schemetype,schemesector,year,desc) 
 values  ('".$_REQUEST['area']."','".$_REQUEST['schemetype']."',
         '".$_REQUEST['s   chemesector']."','".$_REQUEST['year']."',
         '".$_REQUEST['desc']."')"; 
```

上面的查询给出了错误，错误是关于不能在键中使用 desc

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:16:38.840

`DESC`是Mysql中的保留世界。在将其用作列名时，在查询中使用反引号 (`)。

试试下面：

```
$sql = "INSERT INTO $db_table(area,schemetype,schemesector,year,`desc`) values  ('".mysql_real_escape_string(stripslashes($_REQUEST['area']))."','".mysql_real_escape_string(stripslashes($_REQUEST['schemetype']))."','".mysql_real_escape_string(stripslashes($_REQUEST['schemesector']))."','".mysql_real_escape_string(stripslashes($_REQUEST['year']))."','".mysql_real_escape_string(stripslashes($_REQUEST['desc']))."')"; 
```

# javascript - 如何使用来自另一个单元格的 onChange 事件更新一个单元格？

> ID：10085247
> 
> 赞同：0
> 
> 时间：2012-04-10T08:09:48.343
> 
> 标签：javascript, datagrid, dojo

dojo 的 Datagrid 的一个简单模板如下，我正在为更复杂的东西构建它。

例如，如何根据同一行的 field1 的 onChange 事件更新 field2 的值？就像将 field1 的值复制到 field2 一样。问题是我没有特定单元格的 id，将 onChange 放在 layout 或 addRow() 下似乎都不正确，并且似乎 onChange: function(){...} 不能使用？

```
/*set up data store*/
var data = {
  identifier: "id",
  items: []
};

var store = new dojo.data.ItemFileWriteStore({data: data});

/*set up layout*/
var layout = [
defaultCell: {
    editable: true,
    type: dojox.grid.cells._Widget
}
rows: [
    {name: 'ID', field: 'id', width: '30px', widgetClass: dijit.form.TextBox, editable: false},
{name: 'ColA', field: 'field1', width: '100px', widgetClass: dijit.form.TextBox},
{name: 'ColB', field: 'field2', width: '100px', widgetClass: dijit.form.TextBox}

]
];

/*create a new grid*/
var grid = new dojox.grid.DataGrid({
    id: 'grid',
    store: store,
    structure: layout,
singleClickEdit: true,
    rowSelector: '15px'});

/*append the new grid to the div*/
grid.placeAt("gridDiv");

/*Call startup() to render the grid*/
grid.startup();

function addRow(){
    store.newItem({
    id: grid.rowCount,
    field1: '-',
    field2: '-'});
    grid.render();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T03:09:17.760

尝试`onApplyCellEditin(Value, inRowIndex, inFieldIndex)`改用。

# php - PHP5从cidr前缀计算IPv6范围？

> ID：10085266
> 
> 赞同：7
> 
> 时间：2012-04-10T08:11:28.140
> 
> 标签：php, ipv6, prefix, cidr

我可以使用来自各种在线资源的代码片段对 IPv4 进行此操作。我想知道是否有办法用 IPv6 做到这一点。

基本上我只需要一个可以输入 IPv6 地址和前缀（例如：address/68）的表格，它会计算网络地址、第一个可用地址、最后一个可用地址和广播地址。然后只是打印到屏幕上。不打算将其存储在数据库或任何东西中。

我该怎么做呢？

提前感谢大家！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T09:44:18.663

首先：IPv6 没有网络和广播地址。您可以在前缀中使用所有地址。第二：在 LAN 上，前缀长度总是（嗯，99.x% 的时间）a /64。路由 /68 会破坏 IPv6 功能，例如无状态自动配置。

下面是 IPv6 前缀计算器的详细实现：

```
<?php

/*
 * This is definitely not the fastest way to do it!
 */

// An example prefix
$prefix = '2001:db8:abc:1400::/54';

// Split in address and prefix length
list($firstaddrstr, $prefixlen) = explode('/', $prefix);

// Parse the address into a binary string
$firstaddrbin = inet_pton($firstaddrstr);

// Convert the binary string to a string with hexadecimal characters
# unpack() can be replaced with bin2hex()
# unpack() is used for symmetry with pack() below
$firstaddrhex = reset(unpack('H*', $firstaddrbin));

// Overwriting first address string to make sure notation is optimal
$firstaddrstr = inet_ntop($firstaddrbin);

// Calculate the number of 'flexible' bits
$flexbits = 128 - $prefixlen;

// Build the hexadecimal string of the last address
$lastaddrhex = $firstaddrhex;

// We start at the end of the string (which is always 32 characters long)
$pos = 31;
while ($flexbits > 0) {
  // Get the character at this position
  $orig = substr($lastaddrhex, $pos, 1);

  // Convert it to an integer
  $origval = hexdec($orig);

  // OR it with (2^flexbits)-1, with flexbits limited to 4 at a time
  $newval = $origval | (pow(2, min(4, $flexbits)) - 1);

  // Convert it back to a hexadecimal character
  $new = dechex($newval);

  // And put that character back in the string
  $lastaddrhex = substr_replace($lastaddrhex, $new, $pos, 1);

  // We processed one nibble, move to previous position
  $flexbits -= 4;
  $pos -= 1;
}

// Convert the hexadecimal string to a binary string
# Using pack() here
# Newer PHP version can use hex2bin()
$lastaddrbin = pack('H*', $lastaddrhex);

// And create an IPv6 address from the binary string
$lastaddrstr = inet_ntop($lastaddrbin);

// Report to user
echo "Prefix: $prefix\n";
echo "First: $firstaddrstr\n";
echo "Last: $lastaddrstr\n";

?> 
```

它应该输出：

```
Prefix: 2001:db8:abc:1400::/54
First: 2001:db8:abc:1400::
Last: 2001:db8:abc:17ff:ffff:ffff:ffff:ffff 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T19:46:08.037

对于那些偶然发现这个问题的人，您可以使用[GitHub 上](http://mikemackintosh.github.com/dTR-IP/)[`dtr_pton`](http://mikemackintosh.github.com/dTR-IP/)的and[`dtr_ntop`](http://mikemackintosh.github.com/dTR-IP/)函数和[`dTRIP`](http://mikemackintosh.github.com/dTR-IP/)类更有效地做到这一点。

我们还注意到 PHP 中缺少 IPv6 的重点和工具，因此将这篇文章放在一起，[http://www.highonphp.com/5-tips-for-working-with-ipv6-in-php](http://www.highonphp.com/5-tips-for-working-with-ipv6-in-php)，可能是对他人的帮助。

**函数源**

这将和 IP 转换为二进制表示：

```
/**
 * dtr_pton
 *
 * Converts a printable IP into an unpacked binary string
 *
 * @author Mike Mackintosh - mike@bakeryphp.com
 * @param string $ip
 * @return string $bin
 */
function dtr_pton( $ip ){

    if(filter_var($ip, FILTER_VALIDATE_IP, FILTER_FLAG_IPV4)){
        return current( unpack( "A4", inet_pton( $ip ) ) );
    }
    elseif(filter_var($ip, FILTER_VALIDATE_IP, FILTER_FLAG_IPV6)){
        return current( unpack( "A16", inet_pton( $ip ) ) );
    }

    throw new \Exception("Please supply a valid IPv4 or IPv6 address");

    return false;
} 
```

这会将二进制表示转换为可打印的 IP：

```
/**
 * dtr_ntop
 *
 * Converts an unpacked binary string into a printable IP
 *
 * @author Mike Mackintosh - mike@bakeryphp.com
 * @param string $str
 * @return string $ip
 */
function dtr_ntop( $str ){
    if( strlen( $str ) == 16 OR strlen( $str ) == 4 ){
        return inet_ntop( pack( "A".strlen( $str ) , $str ) );
    }

    throw new \Exception( "Please provide a 4 or 16 byte string" );

    return false;
} 
```

**例子**

使用该`dtr_pton`功能，您可以：

```
$ip = dtr_pton("fe80:1:2:3:a:bad:1dea:dad");
$mask = dtr_pton("ffff:ffff:ffff:ffff:ffff:fff0::"); 
```

获取您的网络和广播：

```
var_dump( dtr_ntop( $ip & $mask ) );
var_dump( dtr_ntop( $ip | ~ $mask ) ); 
```

你的输出将是：

```
string(18) "fe80:1:2:3:a:ba0::"
string(26) "fe80:1:2:3:a:baf:ffff:ffff" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T18:26:52.923

好吧，为了后代，我在`code`这里添加我的。还要感谢你们帮助我确定这一点，因为我需要它来**编写 ipv6/ip2country 脚本**。

它受到@ **mikemacintosh**和@ **Sander Steffann**在这里发布的代码的*轻微启发*，略有改进*（异想天开的想法）*并返回一个很好的对象，包含您需要/不需要的所有数据：

 *****```
/**
* This:
* <code>
* Ipv6_Prefix2Range('2001:43f8:10::/48');
* </code>
* returns this:
* <code>
* object(stdClass)#2 (4) {
*   ["Prefix"]=>
*   string(17) "2001:43f8:10::/48"
*   ["FirstHex"]=>
*   string(32) "200143f8001000000000000000000000"
*   ["LastHex"]=>
*   string(32) "200143f80010ffffffffffffffffffff"
*   ["MaskHex"]=>
*   string(32) "ffffffffffff00000000000000000000"
*   // Optional bin equivalents available
* }
* </code>
* 
* Tested against:
* @link https://www.ultratools.com/tools/ipv6CIDRToRange
* 
* @param string $a_Prefix
* @param bool $a_WantBins
* @return object
*/
function Ipv6_Prefix2Range($a_Prefix, $a_WantBins = false){
    // Validate input superficially with a RegExp and split accordingly
    if(!preg_match('~^([0-9a-f:]+)[[:punct:]]([0-9]+)$~i', trim($a_Prefix), $v_Slices)){
        return false;
    }
    // Make sure we have a valid ipv6 address
    if(!filter_var($v_FirstAddress = $v_Slices[1], FILTER_VALIDATE_IP, FILTER_FLAG_IPV6)){
        return false;
    }
    // The /## end of the range
    $v_PrefixLength = intval($v_Slices[2]);
    if($v_PrefixLength > 128){
        return false; // kind'a stupid :)
    }
    $v_SuffixLength = 128 - $v_PrefixLength;

    // Convert the binary string to a hexadecimal string
    $v_FirstAddressBin = inet_pton($v_FirstAddress);
    $v_FirstAddressHex = bin2hex($v_FirstAddressBin);

    // Build the hexadecimal string of the network mask
    // (if the manually formed binary is too large, base_convert() chokes on it... so we split it up)
    $v_NetworkMaskHex = str_repeat('1', $v_PrefixLength) . str_repeat('0', $v_SuffixLength);
    $v_NetworkMaskHex_parts = str_split($v_NetworkMaskHex, 8);
    foreach($v_NetworkMaskHex_parts as &$v_NetworkMaskHex_part){
        $v_NetworkMaskHex_part = base_convert($v_NetworkMaskHex_part, 2, 16);
        $v_NetworkMaskHex_part = str_pad($v_NetworkMaskHex_part, 2, '0', STR_PAD_LEFT);
    }
    $v_NetworkMaskHex = implode(null, $v_NetworkMaskHex_parts);
    unset($v_NetworkMaskHex_part, $v_NetworkMaskHex_parts);
    $v_NetworkMaskBin = inet_pton(implode(':', str_split($v_NetworkMaskHex, 4)));

    // We have the network mask so we also apply it to First Address
    $v_FirstAddressBin &= $v_NetworkMaskBin;
    $v_FirstAddressHex = bin2hex($v_FirstAddressBin);

    // Convert the last address in hexadecimal
    $v_LastAddressBin = $v_FirstAddressBin | ~$v_NetworkMaskBin;
    $v_LastAddressHex =  bin2hex($v_LastAddressBin);

    // Return a neat object with information
    $v_Return = array(
        'Prefix'    => "{$v_FirstAddress}/{$v_PrefixLength}",
        'FirstHex'  => $v_FirstAddressHex,
        'LastHex'   => $v_LastAddressHex,
        'MaskHex'   => $v_NetworkMaskHex,
    );
    // Bins are optional...
    if($a_WantBins){
        $v_Return = array_merge($v_Return, array(
            'FirstBin'  => $v_FirstAddressBin,
            'LastBin'   => $v_LastAddressBin,
            'MaskBin'   => $v_NetworkMaskBin,
        ));
    }
    return (object)$v_Return;
} 
```

我喜欢函数和类，不喜欢实现可重用功能的不可重用代码。

**PS**：*如果您发现它有问题，请回复我。我远非 IPv6 专家。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-19T04:03:46.820

这是对[接受的答案](https://stackoverflow.com/a/10086404/7560156)的修复，它错误地假设“第一个地址”应该与输入的字符串相同。相反，它需要[通过`AND`运算符](https://en.wikipedia.org/wiki/Subnetwork#Subnetting)对其掩码进行修改。

为了演示该问题，请考虑以下示例输入：`2001:db8:abc:1403::/54`

[预期结果：](https://www.vultr.com/resources/subnet-calculator-ipv6/?prefix_length=1&display=long&ipv6_address=2001%3Adb8%3Aabc%3A1403%3A%3A%2F54)

```
First: 2001:db8:abc:1400:: 
```

实际结果：

```
First: 2001:db8:abc:1403:: 
```

计算给定 4 位序列的掩码的相关数学是：

```
// Calculate the subnet mask. min() prevents the comparison from being negative
$mask = 0xf << (min(4, $flexbits));

// AND the original against its mask
$newval = $origval & $mask; 
```

### 完整代码

```
<?php

/*
 * This is definitely not the fastest way to do it!
 */

// An example prefix
$prefix = '2001:db8:abc:1403::/54';

// Split in address and prefix length
list($addr_given_str, $prefixlen) = explode('/', $prefix);

// Parse the address into a binary string
$addr_given_bin = inet_pton($addr_given_str);

// Convert the binary string to a string with hexadecimal characters
$addr_given_hex = bin2hex($addr_given_bin);

// Overwriting first address string to make sure notation is optimal
$addr_given_str = inet_ntop($addr_given_bin);

// Calculate the number of 'flexible' bits
$flexbits = 128 - $prefixlen;

// Build the hexadecimal strings of the first and last addresses
$addr_hex_first = $addr_given_hex;
$addr_hex_last = $addr_given_hex;

// We start at the end of the string (which is always 32 characters long)
$pos = 31;
while ($flexbits > 0) {
    // Get the characters at this position
    $orig_first = substr($addr_hex_first, $pos, 1);
    $orig_last = substr($addr_hex_last, $pos, 1);

    // Convert them to an integer
    $origval_first = hexdec($orig_first);
    $origval_last = hexdec($orig_last);

    // First address: calculate the subnet mask. min() prevents the comparison from being negative
    $mask = 0xf << (min(4, $flexbits));

    // AND the original against its mask
    $new_val_first = $origval_first & $mask;

    // Last address: OR it with (2^flexbits)-1, with flexbits limited to 4 at a time
    $new_val_last = $origval_last | (pow(2, min(4, $flexbits)) - 1);

    // Convert them back to hexadecimal characters
    $new_first = dechex($new_val_first);
    $new_last = dechex($new_val_last);

    // And put those character back in their strings
    $addr_hex_first = substr_replace($addr_hex_first, $new_first, $pos, 1);
    $addr_hex_last = substr_replace($addr_hex_last, $new_last, $pos, 1);

    // We processed one nibble, move to previous position
    $flexbits -= 4;
    $pos -= 1;
}

// Convert the hexadecimal strings to a binary string
$addr_bin_first = hex2bin($addr_hex_first);
$addr_bin_last = hex2bin($addr_hex_last);

// And create an IPv6 address from the binary string
$addr_str_first = inet_ntop($addr_bin_first);
$addr_str_last = inet_ntop($addr_bin_last);

// Report to user
echo "Prefix: $prefix\n";
echo "First: $addr_str_first\n";
echo "Last: $addr_str_last\n"; 
```

输出：

```
Prefix: 2001:db8:abc:1403::/54
First: 2001:db8:abc:1400::
Last: 2001:db8:abc:17ff:ffff:ffff:ffff:ffff 
```*****

# mysql - MySQL：在“WHERE”中使用字符串 在 “ 询问

> ID：10085267
> 
> 赞同：1
> 
> 时间：2012-04-10T08:11:29.237
> 
> 标签：mysql, string

亲爱的 Stackoverflow 会员，

我希望我不会忽略一些明显的事情，但到目前为止我还没有找到解决我的问题的方法。

我需要使用标准`WHERE ... IN ( 1, 2, 3, 4 )`子句从表中获取某些列值。然而，问题是 WHERE 子句中的值必须根据存储在另一个表的列中的值动态构建，看起来像`'a:3:{i:0;s:3:"153";i:1;s:3:"211";i:2;s:3:"226";}'`. 在此示例中，要提取的值是 153、211 和 226，导致子句`WHERE <column> IN ( 153, 211, 226 )`。此字符串的格式始终相同，但值的数量可能会有所不同。

我可以使用一些 RegExp 技巧从这个字符串中获取实际值

```
SELECT value from `column` WHERE <non-scary WHERE clause> INTO @valueString;
SET @IDs =  CONVERT(PREG_REPLACE('/[^\"]+\"([^\"]+)\".*/', '$1', PREG_REPLACE( '/\"\;[^\"]+\"/', '\,\ ', @valueString  )) USING UTF8); 
```

函数 PREG_REPLACE 是一个 UDF，来自 [http://www.mysqludf.org/lib_mysqludf_preg/]，这是人们在寻找 RegExp/Replace 函数时普遍推荐的函数。在`CONVERT()`那里，因为 PREG_REPLACE 给了我一个 blob，而不是一个可读的字符串。

运行这些查询后，运行

```
SELECT @IDs; 
```

给我一个值列表，看起来像（在这个例子中）`153, 211, 226`。

现在的问题是，我如何才能说服 MySQL 在`WHERE ... IN`子句中使用这些值。天真的查询

```
SELECT * FROM `table` WHERE id IN  ( SELECT @IDs ); 
```

不会抱怨，而是只返回列表中第一个值的结果，而忽略其他值（我必须承认，我真的不明白为什么会这样做）。

很明显，这在 Ruby、Python、Perl 等中都是微不足道的，但出于技术原因，必须严格在 SQL 中完成。一位同事给我的建议之一是使用临时表来编写中间结果，但我不确定我是否看到它是如何实现和/或工作的。此外，如果没有大量循环、子字符串和其他丑陋的东西，我认为它不能轻易完成，但我愿意得到纠正。

我希望我的问题的描述或多或少清楚。我将不胜感激任何见解，想法和提示。

提前感谢您的时间和思想分享，Constantijn Blondel，莱比锡 DE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:46:55.407

在您的 where 子句中选择一个子查询，它将正常工作。

# c++ - 在 I/O C++ 中花费的分析时间

> ID：10085268
> 
> 赞同：5
> 
> 时间：2012-04-10T08:11:42.890
> 
> 标签：c++, linux, profiling

我有一个需要 11 秒的功能。我想分析它在 I/O 上花费的时间。是否有任何工具用于分析函数内的 I/O 时间花费？哪个可以给出静态的

```
Total Time  I/O TIME Function Name
x           y        f 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T14:03:51.013

*[这个方法会告诉你。](https://stackoverflow.com/a/378024/23771)*

只需暂停 10 次。每次查看堆栈。

如果您在执行 IO 的过程中发现它，例如，其中 6 次暂停，这意味着大约 60% 的时间在 IO 中。

如果您想知道函数 F 请求的 IO 中花费了多少，只需计算函数 F 在堆栈上时执行 IO 的样本数。

（*gprof*不会告诉你这一点，因为它会在 IO 期间暂停采样。）

补充：或者，您可以在函数 F 中将 IO 调用存根，并测量有和没有 IO 的总体时间。

# asp.net - 使用 asp.net mvc 为小型学校创建电子学习系统

> ID：10085269
> 
> 赞同：-1
> 
> 时间：2012-04-10T08:11:54.690
> 
> 标签：asp.net, asp.net-mvc, razor

我正在为一个小型学校组织，为有才华的运动员做一个项目，我将不得不创建一个由后端和前端组成的基于网络的电子学习系统。学生可以登录，查看他们的日程安排，他们的老师，为学校下载一些文件.... 教师也可以登录并进行一些更改，输入学生考试结果并上传一些文件（演示文稿..）所以我的问题是什么是最好的方法来做到这一点，我正在使用 asp.net mvc，我认为它是可靠的技术，但我需要一些工作流程设计和思考如何让它很好地工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:32:33.280

## 工作流程设计

**拿纸和笔，用纸设计。**

设计您需要创建的每个页面，在您的矿井中让每个页面都有输入处理和输出。

然后写下您可能需要创建哪些媒体以及他们可以获得多少时间。还设计您的数据库和数据，以及它们如何与页面交互。

从所有这些计算出他们制作它们所花费的时间，并为你制作的所有内容和不制作的内容做出一些决定，并开始开发它。您的要求越具体，他们制作它们所需的时间就越少。

# wpf - Wpf旋转窗口？

> ID：10085275
> 
> 赞同：0
> 
> 时间：2012-04-10T08:12:20.280
> 
> 标签：wpf, animation, storyboard

> **可能重复：**
> [如何旋转 WPF 窗口？](https://stackoverflow.com/questions/5710320/how-to-rotate-a-wpf-window)

是否可以将 LayoutTransform 或 RenderTransform 添加到 WPF 中的整个窗口？

我想让它在加载时旋转。

我在互联网上找不到有关此问题的任何信息。

目前我正在将旋转动画应用于窗口中的最大网格，但最好让整个窗口旋转。

提前致谢。

# php - 如何处理 php 中 eval 函数的解析错误

> ID：10085284
> 
> 赞同：4
> 
> 时间：2012-04-10T08:13:16.130
> 
> 标签：php, error-handling, syntax-error

我正在尝试将 eval 函数用于 php。但我一直在处理解析错误。就像考虑我是否有像 1.. 或 1++ 这样的边缘情况，如果给我解析错误：语法错误，.....

任何人都知道如何处理语法错误或如何绕过错误消息？我想给出更好的错误信息。

也可以将错误消息存储到变量中吗？

TIA

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-08-03T13:39:12.747

从[手册](http://php.net/manual/en/function.eval.php)

> 从 PHP 7 开始，如果评估代码中存在解析错误，则`eval()`抛出`ParseError`异常。在 PHP 7 之前，在这种情况下`eval()`返回`FALSE`并正常继续执行以下代码。在`eval()`使用`set_error_handler()`.

而是使用这个：

```
<?php

try {
    eval('will cause error');
} catch (ParseError $e) {
    echo 'Caught exception: '.$e->getMessage()."\n";
} 
```

[https://3v4l.org/1giOS](https://3v4l.org/1giOS)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-11-16T23:35:50.737

```
$response = @eval($string);
if (error_get_last()){
    echo 'Show your custom error message';
    //Or you can 
    print_r(error_get_last());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T08:15:16.810

从[手册](http://php.net/manual/en/function.eval.php)：

> 如果评估代码中存在解析错误，则`eval()`返回`FALSE`并正常继续执行以下代码。在`eval()`使用`set_error_handler()`.

但是由于您不会调用`eval`任意代码（对吗？），这应该不是问题。

# matlab - 在有条件的单元格中找到平均值

> ID：10085286
> 
> 赞同：0
> 
> 时间：2012-04-10T08:13:26.687
> 
> 标签：matlab, mean

我有以下内容：

```
a='abaacacbaa'    'abaaabaaaa'    'dcdcbbcccc'    'acaaaaabba'

v=[1x10 double]    [1x10 double]    [1x10 double]    [1x10 double]
v{1}=0.0064    0.4009   -0.0125   -0.0913    0.5707    0.0442    0.5210    0.3174   -0.2201    0.0570

letter={1x1 cell}    {1x1 cell}    {1x1 cell}    {1x1 cell}
letter{1}='a'

Here i=4 and j=10 
```

我想为每个 i 找到 v 中的条目的平均值，其中 a 中的相应条目等于字母 {i}。

使用 @Bill Cheatham 提到[的仅查找所选条目的平均值](https://stackoverflow.com/questions/10070176/finding-mean-of-selected-entries-only)

方程：

```
 mean(v(a == 'a')) 
```

所以我尝试了：

```
 for k=1: 4
   for j=1: 10 
     M= mean(v{k}(char(a{k}(j))==char(letter{k})));
     Ms{k}=M;
    end
  end 
```

也尝试使用

```
 a(:) and
    mat2cell(v) 
```

所以结果应该是： Ms= [第 1 行的平均值} {第 2 行的平均值} {第 3 行的平均值} {第 4 行的平均值}

将括号放在此处使分隔变得明显

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:38:46.717

正如 Dan 所建议的，离开 j 循环解决了这个问题

# java - Java RMI 连接池详细信息

> ID：10085287
> 
> 赞同：4
> 
> 时间：2012-04-10T08:13:34.330
> 
> 标签：java, sockets, rmi, connection-pooling

我正在研究 Java RMI 主题，需要一些有关客户端连接池的信息。在文献和文档中，这些主题没有明确的答案。我知道连接池不是 RMI 规范的一部分。但是在某些实现中（例如在 SUN 的实现中）它已经完成了。所以我的问题是指这个实现。

我假设由 RMI 套接字工厂创建的套接字（java.net.Socket）缓存在池中。那是对的吗？

这些连接是如何保存的？除了将 HashMap 与目标 ip/port 作为键和套接字作为值一起使用之外，我会。

使用超时关闭套接字。连接空闲时间的信息是如何获得的？上次使用连接时可能存在某种时间戳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:15:52.323

请记住，我只是在谈论 Sun 实现：

> 我假设由 RMI 套接字工厂创建的套接字（java.net.Socket）缓存在池中。那是对的吗？

是的，在它从远程调用中释放之后，当然远程调用在它要求套接字工厂创建一个新的套接字之前首先在池中查找。

> 这些连接是如何保存的？除了将 HashMap 与目标 ip/port 作为键和套接字作为值一起使用之外，我会。

假设在逻辑上必须有一个从 ip:port 到 Socket 的 Map。实现细节实际上并不重要。

> 使用超时关闭套接字。连接空闲时间的信息是如何获得的？

通过注意将连接放入池中的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-22T06:28:08.637

在 Oracle/OpenJDK 中，到某个端点（对于某个通道）的（空闲）连接列表在`List<TCPConnectiont> sun.rmi.transport.tcp.TCPChannel#freeList`. 没有最大尺寸。有一个收割线程检查套接字是否空闲超过 15 秒（`-Dsun.rmi.transport.connectionTimeout=15000`）。

通道存储`Map<TCPEndpoint,Reference<TCPChannel>> sun.rmi.transport.tcp.TCPTransport#channelTable`为 WeakHashMap。

`-Dsun.rmi.transport.tcp.maxConnectionThreads=unlimited`顺便说一句，接受端的处理线程 ( ) 存在一个可能的（全局）限制。

# android - Android 活动意图

> ID：10085289
> 
> 赞同：0
> 
> 时间：2012-04-10T08:13:37.623
> 
> 标签：android, android-activity, android-intent

我开发了安卓测验应用程序。一共5屏。我已经在第三屏关闭了应用程序。然后再次启动应用程序，应用程序默认显示第三屏。但我需要第一个屏幕。

任何人都可以为此提供解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:05:43.167

当您按下主页按钮时，实际上应用程序不会关闭。它进入后台，因此每当您再次重新启动应用程序时，它都会显示最后一个打开的屏幕。但是你可以使用

```
 public void onRestart() {
   super.onRestart();
} 
```

在此方法中，您可以使用 调用第一个活动`Intent.FLAG_ACTIVITY_CLEAR_TOP`。

但是，如果您通过后退按钮关闭应用程序，它将从第一个屏幕重新启动，因此不会有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T08:40:29.840

当您按下`Close Button`调用此代码时

```
finish();
Intent intent = new Intent(Intent.ACTION_MAIN); 
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
intent.addCategory(Intent.CATEGORY_HOME); 
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T09:04:57.880

尝试这个

```
public void onBackPressed() {

Intent intent = new Intent(getApplicationContext(),
        Default.class);
startActivity(intent);
finish();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T08:19:04.120

你需要调用**finish();** 在您的活动 2 和 3 上使用方法来销毁它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T08:20:27.127

您需要在主活动（启动器）上设置一个标志，以便在再次启动时清除顶部。您可以在清单文件中执行此操作。[http://developer.android.com/reference/android/content/Intent.html#setFlags(int](http://developer.android.com/reference/android/content/Intent.html#setFlags(int) )

# java - 为什么不从枚举扩展 >

> ID：10085296
> 
> 赞同：4
> 
> 时间：2012-04-10T08:14:16.880
> 
> 标签：java, enums

我偶然发现了以下问题，我无法从 Java 1.5（java.lang 包）中定义的此类扩展和实现

```
public abstract class Enum<E extends Enum<E>> {...
}.. 
```

我遇到的问题是创建我自己的具有不同序数值的枚举类型。我不想通过使用不同的序数名称来实现它，比如 getCode() 等。所以我想我可以去扩展上面的类。

```
public final class XYZ extends Enum<XYZ> { //Does not work.
  //
  A("A", 1),
  B("B", 7);
  .
} 
```

我知道我可以做到以下几点：

```
public enum NEWEnum {
   A(1),
   B(7);

   private int code;
   private NEWEnum(int code) {
     this.code = code;
   }
   public int getCode() {
     return this.code;
   }
} 
```

我宁愿在 Enum 中使用通常的命名，例如 ordinal() 和 name()。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T08:27:56.073

你不能像那样扩展 Enum 。它内置于编译器或运行时（不确定是哪个）。

但是看起来您正在尝试解决错误的问题；枚举值的序数不应该具有任何功能意义。一旦你给它一个，它应该有一个不同于“Ordinal”的名字。您的第二个代码片段远远优于您的第一个。

一般来说，依靠序数来做任何事情都是不好的做法。它可能一开始就不应该被曝光。您唯一可以依赖的是名称以及您自己分配的任何值。

如果将字段命名为“序数”对您来说很重要，只需使用[类型安全枚举模式（第 21 项）](http://java.sun.com/developer/Books/effectivejava/Chapter5.pdf)，Enum 只是其实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T08:28:09.960

Enum 得到编译器的特殊处理，像 EnumSet 这样的类基于这种处理做出假设。Enum 方法的行为像`ordinal()`和`name()`是严格定义的，并且自己实现它们以复制这种行为是没有意义的。此外，声明枚举值的语法仅在 an 中有效，`enum`而不会在 a 中编译`class`。

重要的是要记住，你永远不应该使用`ordinal()`自己，所以定义它来适应你的问题是没有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T08:28:50.703

该类`Enum`在 Java 中是特殊的，因为它用于实现 Enum 语言功能。因此，它不仅仅是一个类似于 Java 中任何其他类的类，而是更特殊的类（比如`String`，`+`运算符被重载的类，或者像装箱的类）。要使这些功能正常工作，枚举需要特殊要求（我猜是连续序数）。因此，Java 语言规范[明确禁止](http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html#8.1.4)`Enum`从类手动继承。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T08:29:18.653

枚举在语言核心和特殊用途中具有特殊意义。因此，您可以在`switch`语句中使用它们，这对于普通类是不可能的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-20T07:13:41.420

例如，如果显式实现它，则不必在构造函数中初始化“name”和“ordinal”的属性。以后可能会导致NPE。

# php - 如何在 CrudGeneratorBundle 骨架视图中扩展模板？

> ID：10085304
> 
> 赞同：0
> 
> 时间：2012-04-10T08:15:10.287
> 
> 标签：php, symfony

我已经像这篇文章一样覆盖了 generatorBundle 的骨架视图 Can't override the standard skeleton views in Symfony2 GeneratorBundle 但是当我尝试在骨架/crud/views/index.html.twig 中添加一个简单的`{% extends "AcmeAdminBundle::layout.html.twig" %}`或 a`{% extends "::layout.html.twig" %}`时，我有`"[Twig_error_loader] Unable to find template..."`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:39:37.900

我们在[此处](https://github.com/newism/NSMGeneratorBundle)扩展了默认捆绑包它可能会给您一些提示。

# asp.net - 如何在 Visual Studio 2008 中使用 cr 10.5 显示 jpg 图像

> ID：10085305
> 
> 赞同：0
> 
> 时间：2012-04-10T08:15:14.373
> 
> 标签：asp.net, crystal-reports-2008

我正在使用 vs 2008 和水晶报表 10.5 版（我在 sql 数据库中保存了图像路径）

我想把动态图像我该怎么做请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:06:08.020

你可以参考[这个](http://dotnetbd.wordpress.com/2008/06/20/display-dynamic-image-in-crystal-report-net/) 或按照步骤

*–> 当文件路径存储在数据库中并且需要在水晶报表的详细信息部分显示图像时*

如果您有存储在数据库中的图像路径，则 Visual Studio 2003/2005 中的 Crystal Report .NET 无法动态显示图像文件，除非您使用 Crystal Report XI 中的动态图像定位功能。

但别担心，它可以通过一些解决方法来显示。

1.  您的数据库中必须有 imagepath。

2.  创建新的数据集/XML 架构 (xsd) 以在创建报告时用作资源数据。添加一个不在表中且类型为 base64Binary 的附加字段：

3.  在设计报告时，将“image_stream”字段拖放到您希望它出现的区域中。

4.  在您的代码中添加以下方法：

    private void AddImageColumn(DataTable objDataTable, string strFieldName) { try { DataColumn objDataColumn = new DataColumn(strFieldName, Type.GetType(“System.Byte[]“)); objDataTable.Columns.Add(objDataColumn); } catch (Exception ex) { Response.Write(“”+ex.Message+””); } }

5.  而这个加载图像：

    私有 void LoadImage(DataRow objDataRow, string strImageField, string FilePath) { try { FileStream fs = new FileStream(FilePath, System.IO.FileMode.Open, System.IO.FileAccess.Read); 字节[]图像=新字节[fs.Length]；fs.Read(Image, 0, Convert.ToInt32(fs.Length)); fs.Close(); objDataRow[strImageField] = 图像；} catch (Exception ex) { Response.Write(“”+ex.Message+””); } }

6.  在将数据集分配给报表的“SetDataSource”之前，添加以下代码：

    AddImageColumn(ds.Tables[0], “image_stream”); for (int index=0; index < ds.Tables[0].Rows.Count; index++) { if (ds.Tables[0].Rows[index]["image_path"].ToString() != “”) { if(File.Exists(this.Server.MapPath(ds.Tables[0].Rows[index]["image_path"].ToString()))) { LoadImage(ds.Tables[0].Rows[index] , “image_stream”, ds.Tables[0].Rows[index]["image_path"].ToString()); } else { LoadImage(ds.Tables[0].Rows[index], “image_stream”, “C:\NoImage.jpg”); } } else { LoadImage(ds.Tables[0].Rows[index], “image_stream”, “C:\NoImage.jpg”); } }

7.  最后在水晶报表查看器中显示报表

    crDoc.SetDatabaseLogon（用户 ID、密码、服务器、数据库）；crDoc.SetDataSource(ds.Tables[0]); CrystalReportViewer1.ReportSource = crDoc;

未经测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T20:21:54.677

这实际上很容易，请遵循以下步骤：

1.  除非您已经在使用 OLE，否则请创建 Form crystareport1 的数据库字段的新连接
2.  选择 OLE DB(ADO)
3.  添加存储图像的表。
4.  提供系统所需的数据库信息
5.  现在您已将表添加到数据库字段中。
6.  只需将图像拖放到 section3 区域即可。
7.  链接此链接，因为您链接简单以显示其他记录。

我已经在我的项目中测试过了

# java - 在visio中生成类图

> ID：10085312
> 
> 赞同：1
> 
> 时间：2012-04-10T08:15:33.690
> 
> 标签：java, visio

是否有任何工具或技巧可以从 java 源代码文件在 visio 中生成类图？

我已经设法在视觉范式中生成类图，但是我还没有找到从视觉范式导出到 visio 的方法，所以如果有这样的转换工具，它也可以使用。

# cakephp - 找不到 CakePHP 致命错误类“L18n”

> ID：10085319
> 
> 赞同：0
> 
> 时间：2012-04-10T08:16:14.793
> 
> 标签：cakephp

从今天早上开始，我无法让我的一个页面正常工作。

错误信息：

> 致命错误：在第 507 行的 /home/drukwerk/domains/drukwerkprijsvergelijk.nl/public_html/lib/Cake/basics.php 中找不到类“I18n”

我发现只有当我回显以下表单时才会发生这种情况：

```
echo $this->Form->input('Wenis'); 
```

当我三天前下班时，它仍然可以工作..现在它坏了。以前有人遇到过类似的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:33:54.400

清除你的应用缓存 app/tmp/cache 确保你真的没有改变任何东西（我希望你使用 git、svn 或其他东西）。确保核心没有被改变或更新——可能是你团队中的其他人。

还应该有一些跟踪可以显示致命错误的确切来源。第 507 行是最终结果，但之前调用了什么？我建议你使用 xdebug。

# php - 重复的 SQL 错误：2006：MySQL 服务器已消失

> ID：10085330
> 
> 赞同：2
> 
> 时间：2012-04-10T08:17:08.413
> 
> 标签：php, mysql, cakephp-1.3

我的 CakePHP 应用程序经常出现问题。每天都会显示错误日志

> `SQL Error: 2006: MySQL server has gone away` 在 [/home/t553788/public_html/res360/res/cake/libs/model/datasources/dbo_source.php。

我已经联系了我的托管公司，并且 MySQL 服务器超时值已经增加，但这并没有阻止错误的发生。

有没有人知道还有什么可能导致这种情况以及发生这种情况时我将如何向用户呈现自定义错误？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-10T09:20:21.507

您应该尝试在 my.cnf/my.ini 中更改这些变量，看看是否有帮助。

`[mysqld]`

max_allowed_pa​​cket=12M

等待超时=28800

# java - Java参数化方法返回值类型

> ID：10085337
> 
> 赞同：2
> 
> 时间：2012-04-10T08:17:55.177
> 
> 标签：java, generics

考虑以下代码：

```
class ExtType extends MyType{};

class MyClass {
    MyType myField;

    public <T extends MyType> T foo(Class<T> clazz) {
        return (T)myField;
    }
} 
```

现在我想调用`foo`方法，我可以通过两种方式做到这一点：

1种方式：

```
(new MyClass()).foo(ExtType.class); 
```

2种方法：

```
(new MyClass()).<ExtType>foo(ExtType.class); 
```

有趣的是，即使该方法被声明为参数化，Eclipse 也不会在 1 次调用时发出任何警告。

这是我的问题，在第一个代码片段中，哪个`T`s 用于转换返回值。它是`T`来自参数还是`T`来自返回值？为什么如果我没有明确指定返回类型（如“1 方式”）不发出警告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T08:26:59.040

通常使用参数类型，但如果定义了返回类型（如方式 2），编译器也会检查它。

如果没有参数来获取`T`from 的类型，则返回类型声明将是必要的，这称为类型推断。因此你甚至可以写：

```
public <T extends MyType> T foo() {
    return (T)myField;
}

ExtType t = (new MyClass()).foo(); 
```

在某些情况下，您需要帮助编译器并指定要使用的类型，从而获得类似`(new MyClass()).<ExtType>foo(ExtType.class);`. 但是请注意，如果您定义不同的类型，例如`(new MyClass()).<MyType>foo(ExtType.class);`，您会得到一个编译时错误，因为编译器现在不知道使用的是哪一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T08:27:52.193

当您在函数声明中定义“T”时，您还将定义它持有和返回的 T 类型。在您的情况下，您正在传递参数并期望相同的返回类型并将“T”声明为扩展 ExtType。因此，eclipse 不会产生任何警告。

# javascript - 通过值而不是引用设置对象

> ID：10085339
> 
> 赞同：0
> 
> 时间：2012-04-10T08:18:04.610
> 
> 标签：javascript

我正在尝试使用来自另一个 JS 对象的日期在 JS 中初始化一个 var，但是无论我试图获取对旧对象（指针）的引用，我都需要它不要更改。

```
var lastActionDate = new Date(mainLastActionDate);
var nowDate = new Date();
var tmpLastActionDate = lastActionDate;

if ((tmpLastActionDate.setDate(tmpLastActionDate.getDate() + 7)) > nowDate) 
```

最后一行是有问题的行。我认为不应更改 lastActionDate 并且我需要它保留旧日期，但它会随着 tmpLastActionDate 而更改，我猜是因为它是一个指针。

如何通过值而不是引用来设置日期对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:24:30.613

试试这个 ：

```
d=new Date()
e=new Date(d.valueOf()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T08:25:30.470

您必须克隆原始 Date 对象。您可以使用此方法：

```
var date = new Date();
var copiedDate = new Date(date.getTime()); 
```

参考：[如何在 JavaScript 中克隆 Date 对象](https://stackoverflow.com/questions/1090815/how-to-clone-a-date-object-in-javascript)

# apache-camel - Camel：是否有可能在异步处理器的帮助下实现请求/回复和竞争消费者？

> ID：10085340
> 
> 赞同：4
> 
> 时间：2012-04-10T08:18:15.793
> 
> 标签：apache-camel

我正在努力实现应由多个**竞争消费者同时处理的****请求/回复**交换。

 **我有一个独立的**Master**模块，负责生成*任务*队列。而且我有许多**Worker** -modules 应该同时使用来自该队列的消息。

这是Camel 路由的**Master部分：**

```
from("direct:start")
.to("log:FROM.DIRECT?level=DEBUG")
.split(body()).setHeader(CamelHeader.TASKS_BATCH_ID, simple("BATCH-1"))
.setHeader(CamelHeader.TASK_TYPE, simple(TaskType.FETCH_INDEX))
.process(new Processor() {
    @Override
    public void process(Exchange exchange) throws Exception {
        EdgarFullIndexLocation location = 
            exchange.getIn().getBody(EdgarFullIndexLocation.class);
        exchange.getIn().setBody(location.getId().toJson(), String.class);
    }
})
.to("log:SPLIT?level=DEBUG")
.setExchangePattern(ExchangePattern.InOut)
.to("activemq:queue:tasksQueue?replyTo=completionsQueue" +
    //"&transactedInOut=true" + 
    "&requestTimeout=" + Integer.MAX_VALUE +
    "&disableTimeToLive=true")
.threads(10)
.to("log:RESPONSE?level=DEBUG")
.routeId(routeId); 
```

这是 Camel 路由的**Worker**部分，我在其中使用队列：

```
from("activemq:queue:tasksQueue?asyncConsumer=true" + 
    "&concurrentConsumers=10")
.to("log:FROM.TASKS.QUEUE?level=DEBUG")
.choice()
    .when(header(CamelHeader.TASK_TYPE).isEqualTo(TaskType.FETCH_INDEX))
        .process(new FetchIndexTaskProcessor())
    .otherwise()
        .to("log:UNKNOWN.TASK?level=DEBUG"); 
```

这里**FetchIndexTaskProcessor**实现了**AsyncProcessor**：

```
public class FetchIndexTaskProcessor implements AsyncProcessor {
    @Override public void process(Exchange exchange) throws Exception {}

    @Override
    public boolean process(Exchange exchange, AsyncCallback callback) {
        FetchIndexTask task = new FetchIndexTask(exchange, callback);
        task.start();
        return false;
    }

} 
```

这里**FetchIndexTask**扩展了**Thread**。在**start()**之后，新线程负责：

1.  动态添加路由。
2.  阻塞直到该路由的交换完成。
3.  准备对原始交流的回复。
4.  最后打电话`callback.done(false);`。

一切正常，除了有**竞争消费者**的部分- 它总是一次只有一个消费者。

我尝试了很多选择，例如：

*   `.threads(10)`在不同的地方指定一个线程池。
*   使用端点选项，例如`asyncConsumer`和`concurrentConsumers`

但似乎我错过了一些重要的东西，而且我似乎无法让它以并发的方式工作。正确的做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T04:47:48.430

如果您使用 Camel 2.9 或更高版本，那么我建议在您请求/回复的 activemq 端点上使用 replyToType=Exclusive。这告诉 Camel 队列是独占的，并且它加快了速度，因为不需要 JMS 消息选择器来拾取预期的相关消息。

请参阅Camel JMS 文档中的*Request-reply over JMS部分：http:* [//camel.apache.org/jms](http://camel.apache.org/jms)

如果您使用临时队列，那也很快，因为不需要 JMS 消息选择器。

此外，您的路线从直接端点开始。这是一个同步调用，因此调用者将等待/阻塞，直到 Exchange 完全完成。

此外，Splitter EIP 可以配置为以并行模式运行，该模式将使用并发处理。如果你有一条大消息要拆分，那么考虑使用流式传输，它会按需拆分消息，而不是将整个消息内容加载到内存中。

无论如何，这条路线上发生了很多事情。你能更准确地指出你有问题的地方吗？它使帮助变得更容易。**

# javascript - 使用用户脚本记录网页的动态创建的标签属性

> ID：10085343
> 
> 赞同：0
> 
> 时间：2012-04-10T08:18:29.700
> 
> 标签：javascript, dom, userscripts

我能够使用 Brock Adams 对[“Log a web page's dynamic-created, DOM elements with a userscript”](https://stackoverflow.com/q/10083010/331508)的回答来跟踪所有动态创建的标签。

现在我想获取标签的属性。我通过添加一个 if 条件来尝试它，`LogNewTagCreations ()`但它没有用。
在此示例中，我正在检查脚本标签的属性：

```
if(tagName=="script")
    {
        console.log("------------",elem.attributes.src.Value);
    } 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:35:12.893

因为`<script>`s`src`是在`createElement()`调用之外设置的，所以调整[前面的脚本](https://stackoverflow.com/questions/10083010/log-a-web-pages-dynamically-created-dom-elements-with-a-userscript)需要比这更多的工作。您必须基本上异步检查`src`属性。

一种方法是使用另一个轮询间隔。将其滚动到[前面的脚本](https://stackoverflow.com/questions/10083010/log-a-web-pages-dynamically-created-dom-elements-with-a-userscript)中（以及一些内务处理），脚本代码变为：

```
//--- Intercept and log document.createElement().
function LogNewTagCreations () {
    var oldDocumentCreateElement    = document.createElement;

    document.createElement          = function (tagName) {
        var elem = oldDocumentCreateElement.apply (document, arguments);
        console.log ("Dynamically created a(n)", tagName, " tag.  Link: ", elem);

        if (tagName == "script") {
            GetScriptAttributes (elem);
        }

        return elem;
    }
}

function GetScriptAttributes (elem, tagNum, timerIntVar) {
    /*--- Because a <script>s src or text won't be set for some while, we need
        to poll for when they are added.
    */
    GetScriptAttributes.tagNum  = GetScriptAttributes.tagNum || 0;
    if ( ! tagNum) {
        GetScriptAttributes.tagNum++;
        tagNum = GetScriptAttributes.tagNum;
    }

    if (elem.src) {
        doneWaiting ();
        console.log (
            "Script tag", tagNum,
            " has a src attribute of:", elem.src
        );
    }
    else if (elem.textContent) {
        doneWaiting ();
        console.log (
            "Script tag", tagNum,
            " has a JS code of:", elem.textContent
        );
    }
    else {
        if ( ! timerIntVar) {
            var timerIntVar = setInterval (
                function () {
                    GetScriptAttributes (elem, tagNum, timerIntVar);
                },
                50
            );
        }
    }

    function doneWaiting () {
        if (timerIntVar) {
            clearInterval (timerIntVar);
        }
    }
}

/*--- The userscript or GM script will start running before the DOM is available.
    Therefore, we wait...
*/
var waitForDomInterval = setInterval (
    function () {
        var domPresentNode;
        if (typeof document.head == "undefined")
            domPresentNode = document.querySelector ("head, body");
        else
            domPresentNode = document.head;
        if (domPresentNode) {
            clearInterval (waitForDomInterval);
            addJS_Node (GetScriptAttributes.toString() );
            addJS_Node (null, null, LogNewTagCreations);
        }
    },
    1
);

//--- Handy injection function.
function addJS_Node (text, s_URL, funcToRun) {
    var D                                   = document;
    var scriptNode                          = D.createElement ('script');
    scriptNode.type                         = "text/javascript";
    if (text)       scriptNode.textContent  = text;
    if (s_URL)      scriptNode.src          = s_URL;
    if (funcToRun)  scriptNode.textContent  = '(' + funcToRun.toString() + ')()';

    var targ = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
    targ.appendChild (scriptNode);
} 
```

# asp.net-mvc - linux开发环境中的.net MVC等价于什么？

> ID：10085344
> 
> 赞同：1
> 
> 时间：2012-04-10T08:18:38.367
> 
> 标签：asp.net-mvc, linux

我多年来一直是 .net 开发人员，最近对在 Linux 而不是 Microsoft Windows 上开发 Web 应用程序产生了兴趣。

我特别喜欢 MVC 的地方在于，您可以轻松地建立一个正常运行的项目（+生产力）以及`Code-First`方法（Entity Framework 4.1），它允许在开发过程中动态构建数据库。

所以我想知道在 Linux 上是否有这样的受支持框架，你可以推荐给我吗？它是什么语言的？

非常感谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T08:38:09.653

有很多选择是正确的，对此没有一个答案。作为一名经验丰富的 .NET 开发人员，我发现学习 Python 非常简单。概念有很多相似之处。

我还研究了 Djando 和 Pyramid 作为 Web Python 框架，发现前者更容易使用。Django 在某种程度上与 MVC .NET 非常相似。它还包括一个开箱即用的 ORM 映射器，它完全符合 Entity Framework 4.1+ Code-First 方法的功能。

总的来说，我发现在 Linux 上使用 Django 比 MVC .NET 更简单、更高效。

我选择这个作为答案，不是因为这里的其他回答是错误的，而是因为也许其他 .NET 转换者可能会在谷歌上搜索这个问题并想听听其他 .NET 开发人员的经验。;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T08:25:24.190

如果您想尝试一种新语言，请考虑例如

*   Spring 框架 MVC - JAVA [http://www.springsource.org/](http://www.springsource.org/)
*   Zend MVC - PHP [http://framework.zend.com](http://framework.zend.com)
*   Rails - Ruby* [http://rubyonrails.org/](http://rubyonrails.org/)

还有很多其他的...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T08:26:07.297

Mvc 是一种起源于 1970 年代的开发方法。因此，它以许多不同的语言实现。例如，Java 有几个比 .net 早几年的 mvc 框架。我建议你看看下面的 Mono，Java 并且我确信 php 有一个 mvc 框架。Mono 基本上是 Linux 上的 .net。不知道这个项目有多成熟。到目前为止，Linux 上的 Java 比 Windows 上的 Java 更愉快，我建议您也看看这个。Java 有一个称为 JPA 的实体框架。只是提醒一下，一些学习曲线很陡峭，但非常值得。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T08:22:09.977

也许您可以尝试[mono](http://mono-project.com)，[这](http://www.mono-project.com/FAQ%3a_ASP.NET)是它支持的。

在我的记忆中它支持asp.net mvc

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T08:53:16.230

用于服务器的 node.js 和用于演示的 EXTJS

# c# - COM 异常：80040154，已提供清单

> ID：10085352
> 
> 赞同：3
> 
> 时间：2012-04-10T08:19:15.597
> 
> 标签：c#, manifest, com-interop

我正在使用第 3 方 dll 开发我的应用程序，它是一个 COM 对象。我正在尝试使用免注册 COM 使我的应用程序隔离。但我真的找不到关于如何做这一切的好例子/演练/教程。请告诉我我所做的是对还是错。

我为原始 dll 创建了清单，使用 tlbimp.exe 生成了一个样式库，将类型库添加为对项目的引用，正常实例化对象。即使我已经提供了清单文件，我仍然收到此错误：

> System.Runtime.InteropServices.COMException 未处理
> 消息=检索具有 CLSID {7B3A2D19-1D82-4DF6-8939-B730058A5535} 的组件的 COM 类工厂失败，原因是以下错误：80040154 未注册类（来自 HRESULT 的异常：0x80040154（REGDB_E_CLASSNOTREG） ））。

谷歌搜索了一下，似乎很多人都指向构建配置，但我已经将构建设置为使用 x86。我很确定 dll 也是在 x86 环境中开发的。（我不知道这是否相关..）

我做了：

*   提供外部清单而不删除 dll 中的内部 RT_MANIFEST。
*   使用 mt.exe 更新 RT_MANIFEST。
*   使用上述两者生成的类型库。

顺便说一句，我也很好奇我应该为清单中的版本元素使用哪个 FILEVERSION 或 PRODUCTVERSION 编号？（我都试过了，都没有用）

[![显示 FileVersion 和 ProductVersion 的属性](../Images/82b40d0e8d1176c563c85c2c6dcf2bbb.png)](https://i.stack.imgur.com/3JPo8.png)

请告诉我我哪里做错了？我是否为清单提供了错误的信息？我如何知道清单需要更多信息？

如果您需要更多信息，请告诉我。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:00:03.210

这可能是由于这一步：

> 提供外部清单而不删除 dll 中的内部 RT_MANIFEST。

从 Windows Server 2003 SP1 开始，如果文件具有内部清单，Windows 将忽略内部清单。您可以尝试 此[博客](http://blogs.msdn.com/b/chrisforster/archive/2007/12/11/changetomanifest.aspx)和[知识库文章](http://support.microsoft.com/kb/912949)`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\SideBySide\PreferExternalManifest (DWORD) to 1`中提到的注册表设置。这将使 Windows 查看外部清单而不是内部清单。

但是，如果您要在多个系统上安装它，则必须在您全部安装的每个系统上设置此标志。而且此设置是全局设置 - 影响所有应用程序，因此这可能不是一个好主意。

# python - 当我有 CSS 属性的字典时，如何在每一行中嵌套 style="font-weight:bold...."？

> ID：10085357
> 
> 赞同：0
> 
> 时间：2012-04-10T08:19:49.900
> 
> 标签：python, django, django-templates

我对 Django 很陌生，很抱歉问话。我已经从视图传递到模板字典，例如

```
{"font-weight":"bold","background-color":"red" ....} 
```

我在模板内部为一些数据生成了行，对于每一行我都有一个像上面一样的字典。当我有 CSS 属性的字典时，如何在每一行中嵌套 style="font-weight:bold...."？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:25:18.183

我不喜欢从视图生成 CSS 的想法，但您可以尝试以下操作：

```
# cotext dict
{ 'extra_style': 'color: red; font-weight: bold;' }

# in template
<tr style="{{ extra_style }}"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:14:10.197

您可以在视图中执行以下操作：

```
'css': {"font-weight": "bold", "background-color": "red"} 
```

在模板中：

```
<tr style="{% for k, v in css.items %}{{ k }}: {{ v }}; {% endfor %}"> 
```

# c# - 属性窗口中自定义类型的属性 (MS Visual Studio)

> ID：10085358
> 
> 赞同：0
> 
> 时间：2012-04-10T08:19:52.377
> 
> 标签：c#, visual-studio

```
public class MyClass
{
    // Some staff
}

public class MyControl : UserControl
{
    public MyClass MyObj { get; set; }
} 
```

我希望 MyObj 属性能够通过 MS Visual Studio 的属性窗口进行设置。但是它像只读属性一样变灰。

我想我应该添加一些设计师属性，但不知道在哪里和哪个。

**编辑**

最简单的解决方案是从**Component**继承**MyClass**。不需要任何属性。

 **```
public class MyClass : Component 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T08:24:31.727

试试这是否有效

```
[TypeConverter(typeof(ExpandableObjectConverter))]
public class MyClass
{
    // Some staff
}

public class MyControl : UserControl
{
    [DesignerSerializationVisibilityAttribute(DesignerSerializationVisibility.Content)]     
    public MyClass MyObj { get; set; }
} 
```

**用户评论后编辑：**
此测试代码按预期工作：

```
public partial class MyControl : UserControl
{
    public MyControl()
    {
        InitializeComponent();
        MyObj = new MyClass();

    }
    [DesignerSerializationVisibilityAttribute(DesignerSerializationVisibility.Content)]     
    public MyClass MyObj { get; set; }
}

[TypeConverter(typeof(ExpandableObjectConverter))]
public class MyClass
{
    public string Test { get; set; }
} 
```

**再次编辑：**
如果您希望属性编辑器的行为与您描述的一样，我能给您的最简单的解决方案是

```
public class MyClass : Control // if it must be visible on form 
```

或者

```
public class MyClass : Component // if it must be just a component 
```**

# regex - 替换 UNIX SED 中的文本

> ID：10085360
> 
> 赞同：1
> 
> 时间：2012-04-10T08:20:05.077
> 
> 标签：regex, unix, sed

我有 text1.txt 包含

```
<this can be anything, any number of line - no hardcoded>
<this can be anything, any number of line - no hardcoded>
     param1=<this can be any value - no hardcoded>
<this can be anything, any number of line - no hardcoded>
<this can be anything, any number of line - no hardcoded> 
```

我想替换这部分，**这可以是任何值 - 没有**用**abc硬编码**

什么应该是正确的 SED 命令？请注意，由于环境限制，我无法灵活使用任何语言，例如 perl、python 或 ruby​​ ~ 并且只能使用 Unix 命令。并且除了**param1没有硬编码**

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:28:50.253

你想要的调用是

```
sed -e 's/param1=.*/param1=abc/' text1.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:07:12.620

听起来你想要这样的东西`s/<.\+>$/<abc>/`：

```
$ cat test1.txt

<this can be anything, any number of line - no hardcoded>
<this can be anything, any number of line - no hardcoded>
     param1=<this can be any value - no hardcoded>
<this can be anything, any number of line - no hardcoded>
<this can be anything, any number of line - no hardcoded>

$ sed 's/<.\+>$/<abc>/' test1.txt

<abc>
<abc>
     param1=<abc>
<abc>
<abc> 
```

# android - 在Android中设置默认用户代理？

> ID：10085361
> 
> 赞同：1
> 
> 时间：2012-04-10T08:20:10.847
> 
> 标签：android, user-agent

有人可以告诉我“默认 android 用户代理字符串”是在哪里定义的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:27:29.290

**WebView**配备了用户代理字符串。您也可以手动为您的 WebView 获取或设置它。

```
/* for example */

//get
String ua = webview.getSettings().getUserAgentString();

//set
webview.getSettings().setUserAgentString("your custom user agent string"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:03:04.497

Trying something if you want your Webview to report a non-default user agent. The user agent can vary from application to application.

```
myWebView.getSettings().setUserAgentString("Android"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-30T11:55:39.240

转到`chrome://version`它应该显示默认用户代理。

![在此处输入图像描述](../Images/6e70d11c84423731c946d53b1a072d04.png)

# twitter - 获取没有 t.co 链接的推文

> ID：10085368
> 
> 赞同：0
> 
> 时间：2012-04-10T08:21:27.683
> 
> 标签：twitter, url-shortener

我正在做一个推特可视化。所有推文都显示在屏幕上，但用户除了阅读它们之外，无论如何都无法“点击”或与推文交互。因此，我想摆脱所有使用`t.co`缩短器的推文。有没有办法在 Twitter 上使用他们的 API 来做到这一点，还是我应该手动完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:58:20.103

如果您使用该`include_entities`参数，您将获得附加到推文的附加元数据，其中包含将 t.co 链接“水合”成适合显示的内容所需的所有必要信息。如果您查看 Twitter.com，您会看到 t.co 链接是以这种方式呈现的。

Tweet 实体的文档可在此处获得：[https ://dev.twitter.com/docs/tweet-entities](https://dev.twitter.com/docs/tweet-entities)

# xslt - 查找具有特定子元素但没有文本节点的元素

> ID：10085378
> 
> 赞同：5
> 
> 时间：2012-04-10T08:22:57.883
> 
> 标签：xslt, xpath

对于 XSLT 模板，我需要一个 XPath 表达式来定位具有特定子元素但没有文本节点的元素。

```
<!-- 1: matches -->
<a><b/></a>

<!-- 2: does not match -->
<a>foo bar quux<b/></a>

<!-- 3: does not match -->
<a>whatever <b/> further text</a>

<!-- 4: does not match -->
<a>whatever <b/> further text <b/></a>

 <!-- 5: does not match -->
<a><x/><b/></a>

<!-- 6: does not match -->
<a>foo bar quux</a> 
```

我想出了`a[*[1 = last() and name() = 'b']]`，但是在不应该匹配的情况下，情况 2 或 3 被匹配了。当然，原因是`*`选择元素而不关心文本节点。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T08:36:31.167

你可以使用

```
a[count(*)=1 and b and not(text())] 
```

如果您只寻找一个 b，没有其他元素，也没有文本。请记住，如果您的 xml 中有回车，某些处理器会将其视为文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T12:18:46.873

```
a[b and not(text() or *[2])] 
```

这将选择`a`当前节点（上下文节点）的每个具有子节点的子节点`b`，并且没有任何文本节点子节点或第二个元素子节点。

如果您也不想有任何 PI 或评论子项，您可以使用较短的版本：

```
a[b and not(node()[2])] 
```

# c# - IDE 中的 Visual C# Express Edition 命令行参数

> ID：10085380
> 
> 赞同：1
> 
> 时间：2012-04-10T08:23:16.310
> 
> 标签：c#, visual-studio, c#-4.0, c#-3.0

我有一个小程序，它只是在 Visual C# Express Edition 中测试命令行。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text; 
```

命名空间 ConsoleApplication_CommandLine {

```
public class CommandLine2
{
    public static void Main(string[] args)
    {
        Console.WriteLine("Number of command line parameters = {0}",
           args.Length);
        foreach (string s in args)
        {
            Console.WriteLine(s);
        }
    }
} 
```

}

我想像java一样提供输入，即java“AppName”

如何在 Visual Studio 中做到这一点。简而言之，我希望在 IDE 的 Visual C# Express Edition 中提供命令行参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T08:29:07.887

没有*Express*版，但地方是一样的。看看[在 Visual Studio 2010 中指定命令行参数](http://csharp.2000things.com/2010/06/30/specify-command-line-arguments-in-visual-studio-2010/)

![项目属性屏幕](../Images/acd4f1a8e94d2d274105867406be238d.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T08:25:54.077

转到项目属性，调试选项卡。它有一个用于添加参数的多行文本框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T08:25:17.107

出于测试目的，您甚至可以对这个数组进行硬编码

# c++ - 如何检测自动隐藏的任务栏是否可见？

> ID：10085381
> 
> 赞同：1
> 
> 时间：2012-04-10T08:23:34.810
> 
> 标签：c++, windows, qt, taskbar

目前我需要在 C++/Qt 中检测设置为“自动隐藏”的任务栏是否在屏幕上可见。我已经尝试过以下解决方案，不幸的是没有成功：

1.  使用 uState = (UINT) SHAppBarMessage(ABM_GETSTATE, pabd) 检查自动隐藏状态，这仅返回是否设置了自动隐藏属性

2.  使用 SystemParametersInfo(SPI_GETWORKAREA, 0, &rectWorkArea, 0) 获取工作区；不幸的是，当任务栏设置为“自动隐藏”时，工作区始终是整个屏幕的大小，即使它实际上在屏幕上可见

3.  使用 SHAppBarMessage(ABM_GETTASKBARPOS, &abd) 获取 AppBarData；使用这个函数，我可以获得任务栏的大小和坐标，但是它们总是返回，好像任务栏是可见的，即使它是隐藏的。

因此，使用这些方法我无法判断，“自动隐藏”的任务栏是否在给定时刻在屏幕上可见:-(

我将不胜感激任何帮助 ：-）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T10:38:56.453

```
HWND hTaskbarWnd = FindWindow("Shell_TrayWnd", null);
bool isVisible = IsWindowVisible(hTaskbarWnd); 
```

或者

```
bool IsTaskbarWndVisible() {
HWND hTaskbarWnd = FindWindow("Shell_TrayWnd", null);
HMONITOR hMonitor = MonitorFromWindow(hTaskbarWnd , MONITOR_DEFAULTTONEAREST);
MONITORINFO info = { sizeof(MONITORINFO) };
if (GetMonitorInfo(hMonitor, &info))
{
  RECT rect;
  GetWindowRect(hTaskbarWnd , &rect);
  if ((rect.top >= info.rcMonitor.bottom - 4) ||
      (rect.right <= 2) ||
      (rect.bottom <= 4) ||
      (rect.left >= info.rcMonitor.right - 2))
  return false;

  return true;
} 
```

# ios5 - sharekit ios5 显示现有代码的链接器错误

> ID：10085382
> 
> 赞同：0
> 
> 时间：2012-04-10T08:23:35.263
> 
> 标签：ios5, package, linker-errors, sharekit

我正在使用 ios5 中的 sharekit。我将 sharekit 包从 3.2 更改为 ios 5，但是当我构建它时显示以下错误。

架构 i386 的未定义符号：“_OBJC_CLASS_$_SHKFacebook”，引用自：ProjectAppDelegate.o 中的 objc-class-ref “_OBJC_CLASS_$_SHKItem”，引用自：XXXViewController.o 中的 objc-class-ref “_OBJC_CLASS_$_SHKActionSheet”，引用自：XXXViewController.o ld 中的 objc-class-ref：未找到架构 i386 的符号。

任何建议都受到高度赞赏。

谢谢&问候， Sathish

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:29:19.620

我对以下链接器错误有类似的问题：

架构 i386 的未定义符号：“_OBJC_CLASS_$_SHK”

我通过在项目设置->目标->构建阶段下将 SHK.m 添加到编译源来解决它。不知道为什么 SHK.m 不在编译的源列表中，并且它在复制目标之前正在工作。复制后，我无法链接任何目标。

将 SHKFacebook.m 或 SHK.m 添加到编译源可能会对您有所帮助。

# php - 从 $views 对象设置当前显示标题

> ID：10085390
> 
> 赞同：1
> 
> 时间：2012-04-10T08:24:09.243
> 
> 标签：php, drupal, drupal-6

我正在 hook_views_query_alter() 中做一些工作，从那里我可以通过引用访问 $views 和 $query 对象。

我正在更改查询，但我想保留一些逻辑来修改此显示的标题（它是一个块）。

我的显示对象是这样的：`$view->display[$view->current_display]`

我似乎无法弄清楚如何从中更改显示标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:38:01.930

您应该能够从 build_info 更改它。

```
$view->build_info['title'] = "New title"; 
```

# sql-server - 局域网上的 MAMP (mysql)

> ID：10085395
> 
> 赞同：5
> 
> 时间：2012-04-10T08:24:38.857
> 
> 标签：sql-server, mamp

我发现一些帖子解释了如何在 MAMP 中设置 mysql 以供局域网使用。每个解释都描述了 my.cf 需要更改，因此绑定地址设置为 lan ip 或 0.0.0.0，这是首选。

奇怪的是，当我这样做时，再次启动 MAMP 后，它会将绑定地址更改回 127.0.0.1。

我真的需要为局域网使用设置一个 mysql，所以所有团队成员都将致力于同一个数据库。任何人都知道 MAMP 中的一种工作方式的好方法吗？

## 解决方案

所以我找到了一个解决方案，以下是我在 OS X 10.6 上采取的步骤：

场景：我的本地 Mamp 设置（计算机 1）需要通过计算机 2 上的局域网访问 Mamps mySQL 服务器。下面提到的所有更改都是在远程服务器上进行的，即计算机 2。

1.  Mamp File-menu > Edit template... > MySQL my.cnf

2.  更改绑定地址：
    `# The MySQL server
    [mysqld]
    port = 3306
    socket = /Applications/MAMP/tmp/mysql/mysql.sock
    key_buffer = 16M
    max_allowed_packet = 1M
    table_cache = 64
    sort_buffer_size = 512K
    net_buffer_length = 8K
    read_buffer_size = 256K
    read_rnd_buffer_size = 512K
    myisam_sort_buffer_size = 8M
    bind-address=0.0.0.0`

3.  保存***my.cnf***并关闭编辑器

4.  现在打开终端并输入：***netstat -an | grep 3306***你应该会看到如下内容：
    **tcp4 0 0 *.3306 *。*听** 如果您现在尝试连接（例如，您的本地 WordPress 到远程 mySQL 服务器，那么由于用户权限，您可能最终会遇到一些错误）

5.  将新用户添加到远程 mySQL 服务器。现在通过 Mamp WebStart 按钮转到远程计算机上的 phpMyAdmin 页面，然后单击**Privileges**。填写文本字段，跳过**用户的数据库**并检查**全局权限**中的所有复选框，除了*管理*，因为不需要这些复选框，或者您希望该用户拥有什么权限。完成后，点击底部的**确定**

*（注意：作为主机，在 mysql 服务器中创建新用户时，如果您希望同一 LAN 中的所有用户访问该特定 sql 帐户，请将其留空）*

现在，你应该可以运行了。回到您自己的 mac（计算机 1），如果您使用它进行 WP 开发，请编辑您的*wp-config.php*并将主机填写为 lan-ip，用户并按照您刚刚在远程（计算机 2）服务器中输入的方式传递

![演示截图](../Images/a1e9811c6951fc9c63bfdde2bcdf1a8a.png)

# php - PHP Propel 组按两列

> ID：10085397
> 
> 赞同：2
> 
> 时间：2012-04-10T08:24:46.517
> 
> 标签：php, propel

我在推进中遇到 groupBy 问题：

问题属于两个表。一种称为显示，另一种称为customerDisplayType。在 customerDisplayType 表中有两列“驱动程序”和“驱动程序选项”。我想在这两列上进行分组。因此结果可能如下所示：

```
Display1 -> with customerDisplayType driver "1" and driverOptions "xyz"
Display2 -> with customerDisplayType driver "1" and driverOptions "abc"
Display3 -> with customerDisplayType driver "2" and driverOptions "xyz" 
```

我希望你知道我的意思...

到目前为止，我尝试过这样的事情：

```
 $displays = PiDisplayQuery::create()
    ->filterByStationId($_object->getId())    
    ->usePiCustomerDisplayTypeQuery()
        ->groupBy("CONCAT ".PiCustomerDisplayTypePeer::DRIVER.",".PiCustomerDisplayTypePeer::DRIVER_OPTIONS) // I also tried UNION instead of CONCAT
    ->endUse()
    ->find(); 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:16:08.180

关于[代码](https://github.com/propelorm/Propel/blob/master/runtime/lib/query/ModelCriteria.php#L381)，如果你想使用多个 groupBy，你只需要调用 groupBy 方法几次：

```
$displays = PiDisplayQuery::create()
  ->filterByStationId($_object->getId())
  ->usePiCustomerDisplayTypeQuery()
    ->groupBy('PiCustomerDisplayType.Driver')
    ->groupBy('PiCustomerDisplayType.DriverOptions')
  ->endUse()
  ->find(); 
```

# android - android中的自动旋转屏幕功能问题

> ID：10085400
> 
> 赞同：0
> 
> 时间：2012-04-10T08:24:52.257
> 
> 标签：android, android-layout, android-intent, android-widget

我在我的应用程序中遇到了一个问题，当我检查设置 --> 显示 --> 自动旋转屏幕并运行我的应用程序时，所有活动都将以横向模式显示，所以当我从其他活动启动一个活动并旋转垂直形式的设备并在单击按钮时返回上一个活动，在按钮单击事件中，我完成了将先前活动置于顶部的活动，但它丢失了所有先前配置的数据但是当我取消选中设备的自动旋转屏幕时选项它保持以前的活动状态。

所以不确定，为什么会发生这种行为？

请帮我解决它。

问候， 皮克斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T08:33:24.497

设置为**AndroidManifest.xml**`android:configChanges="orientation|screenSize"`中的所有活动以手动覆盖方向更改

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T08:34:47.493

除非您自己专门处理这些事件，否则诸如方向更改之类的配置更改将导致您的活动重新出现。阅读相关文档以获取更多信息。

1.  [http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)
2.  [http://developer.android.com/resources/articles/faster-screen-orientation-change.html](http://developer.android.com/resources/articles/faster-screen-orientation-change.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T09:00:23.107

当您旋转屏幕时，会重新创建 android 活动，因此它会丢失所有以前的状态。为避免这种情况，您可以执行以下操作

1.  在 android 清单文件中停止娱乐（只需定义 android:configChanges="keyboardHidden|orientation|screenSize" ）。

2.  使用以下处理程序方向。

    ```
     @Override
            public void onConfigurationChanged(Configuration newConfig) {
                super.onConfigurationChanged(newConfig);
    } 
    ```

如果纵向模式和横向模式下的布局不同，那么您应该处理方向**

# javascript - 调用下一个函数 jQuery Galleria 插件后如何调用函数？

> ID：10085411
> 
> 赞同：0
> 
> 时间：2012-04-10T08:25:48.980
> 
> 标签：javascript, jquery, jquery-plugins

我正在使用 jQuery Galleria 插件，并想在调用 jQuery 插件的下一个函数后进行一些操作。有什么方法可以在 jQuery Galleria 插件的下一个函数执行后调用我自己的函数。在这方面的任何帮助都会非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:14:41.837

你可以使用这个`loadfinish`事件，它

> 每次 Galleria 完成加载图像时触发

所以

```
Galleria.ready(function() {
    this.bind("loadfinish", function(e) {
        // do what you want here
    });
}); 
```

[活动文档在这里](http://galleria.io/docs/api/events/)

# python - 将自引用向下传递给实例化类

> ID：10085414
> 
> 赞同：2
> 
> 时间：2012-04-10T08:26:01.647
> 
> 标签：python, class

我想将自引用传递给实例化类（子级应该可以访问父级）。如果所有内容都在一个文件中，则它可以工作，如下所示：

```
class ClassB:
  def __init__(self, name, parent):
    assert isinstance(parent, ClassA)
    self.name = name
    self.parent = parent
    print('my parent is', parent.name)

class ClassA:
  def __init__(self, name):
    self.name = name
    self.b = ClassB('child', self)

a = ClassA('parent') 
```

输出`my parent is parent`符合预期

2文件版本是这样的：

```
class ClassB:
  def __init__(self, name, parent):
    from ClassA import ClassA
    assert isinstance(parent, ClassA)
    self.name = name
    self.parent = parent
    print('my parent is', parent.name) 
```

和：

```
from ClassB import ClassB

class ClassA:
  def __init__(self, name):
    self.name = name
    self.b = ClassB('myName', self)

if __name__ == '__main__':
  a = ClassA('parent') 
```

输出是`assert isinstance(parent, ClassA) AssertionError`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T08:29:10.743

那是因为第二个通过 a `__main__.ClassA`，而`ClassB`期望 a `ClassA.ClassA`。找到一种不同的方式来做这件事，比如放入`ClassA`它自己的模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T08:48:09.323

```
class ClassB:
  def __init__(self, name, parent, ClassA):
    assert isinstance(parent, ClassA)
    self.name = name
    self.parent = parent
    print('my parent is', parent.name) 
```

和：

```
from ClassB import ClassB

class ClassA:
  def __init__(self, name):
    self.name = name
    self.b = ClassB('myName', self, ClassA)

if __name__ == '__main__':
  a = ClassA('parent') 
```

这对我有用，但我不知道它是否是你要找的。

# c++ - c++中的组合

> ID：10085417
> 
> 赞同：0
> 
> 时间：2012-04-10T08:26:19.317
> 
> 标签：c++

我知道组合的基本思想是组合具有“有”的关系。但是在实现组合的想法时出了点问题，直到现在我才弄清楚基类中另一个类的对象和构造函数调用. 请在这方面帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:28:43.167

组合意味着包含的类对象在外部类（包含它）对象的生命周期之外不存在。

**[在线样品](http://ideone.com/fbFGS)：**

```
#include <iostream>

class MyClass
{
    public:
        MyClass(){std::cout<<"\nMyClass";}
        ~MyClass(){std::cout<<"\n~MyClass";}
};

class MySecClass
{
    MyClass obj;
    public:
        MySecClass(){std::cout<<"\nMySecClass";}
        ~MySecClass(){std::cout<<"\n~MySecClass";}
};

int main()
{
    MySecClass obj;
    return 0;
} 
```

**输出：**

> MyClass
> MySecClass
> ~MySecClass
> ~MyClass

# powershell - Powershell：将文件保存到根目录

> ID：10085418
> 
> 赞同：0
> 
> 时间：2012-04-10T08:26:25.827
> 
> 标签：powershell, root

我正在运行一个 powershell 文件，该文件将收集信息并将其保存到 XML 文件中。该脚本将在多台计算机上运行，​​因此我想将它们全部保存到根路径。问题是，如何将 XML 文件保存到计算机上的根目录？

要指定：脚本将始终在本地计算机上运行，​​因此我需要将 xml 文件保存到本地路径..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:43:31.500

基本上保存在根目录的路径是：

```
\\servername\c$\myfile.xml 
```

这是保存在远程计算机的 c:\ 根文件夹中的路径。你需要`local administrator credentials`的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T08:43:02.867

如果我理解正确.. 如果您有权访问相关计算机的根驱动器... 这会将每个 xml 文件（以其计算机名称命名）保存在每台计算机的 C 驱动器中。

```
"comp1","comp2","comp3" | Foreach-Object {
   $xml = ....
   $xml | Out-File -Path "\\$_\c$\$_.xml"
} 
```

# c# - 实体框架问题...数据上下文无法转换为 IDisposable

> ID：10085424
> 
> 赞同：0
> 
> 时间：2012-04-10T08:26:51.970
> 
> 标签：c#, entity-framework

这可能是一个非常简单的过程......但是在下班 4 天后，我的大脑无法正常工作。我正在使用实体框架来建模我的数据库。当我调用我的上下文时，我的任何实体都没有出现，我唯一得到的是对 ValidateObject() 的调用。

我的代码看起来像这样

```
using (var dc = new FLMAEntities())
{
    dc. (Only thing I get is ValidateObject)
} 
```

我还收到一个错误，即数据上下文无法转换为 IDisposable，我知道它可以。我认为这将是一个连接字符串问题，但 edmx 文件使用了正确的连接字符串，并且没有在末尾添加额外的 1 或类似的东西......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:28:37.293

确保将“System.Data.Entity”添加到程序集中。我遇到过同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:36:35.933

您是否尝试过重新生成实体？您是否使用模型优先、数据库优先的方法？尝试更改设计器上的某些内容，让它们为您重新生成实体类。您可以使用 T4 模板并尝试是否可行。我通常使用 SelfTrack 模板，它很好，很方便，而且效果很好。

你是从另一个项目中调用实体吗？如果是，可能是上面提到的 System.Data.Entity 。

如果它不起作用...我建议删除所有表并再次添加它们。当然取决于方法。

# ruby-on-rails - Rails 2.2.2：find_by_sql 返回所有列值作为字符串对象的结果集

> ID：10085428
> 
> 赞同：1
> 
> 时间：2012-04-10T08:27:23.170
> 
> 标签：ruby-on-rails, ruby, find-by-sql

我已经使用 find_by_sql 来获取两个表的 UNION，这两个表的列比用于调用 find_by_sql 的模型多一些，

**例如：**

```
class Shape < ActiveRecord::Base
   # columns
   # shape_id -> Integer
end

class Circle < ActiveRecord::Base
   # columns
   # circle_id -> Integer
   # created_at -> Datetime 
   # update_at -> Datetime 
end

class Square < ActiveRecord::Base
   # columns
   # square_id -> Integer
   # created_at -> Datetime 
   # update_at -> Datetime 
end 
```

我使用 Shape 模型对圆形和正方形进行了 UNION，如下所示：

```
@shapes = Shape.find_by_sql("select circle_id as id, created_at, updated_at from circles UNION select square_id as id, created_at, updated_at from squares") 
```

现在，当我使用 @shapes 显示所有带有 created_at 和 updated_at 的记录时，它总是在字符串对象中返回，如下所示：

```
for shape in @shapes
  puts shape['id'].class.inspect # String
  puts shape['created_at'].class.inspect # String
  puts shape['updated_at'].class.inspect # String
end 
```

现在，什么是最好的方法，我可以将所有值作为数据库中定义的类型对象，如下所示：

```
for shape in @shapes
  puts shape['id'].class.inspect # Integer
  puts shape['created_at'].class.inspect # DateTime
  puts shape['updated_at'].class.inspect # DateTime
end 
```

# iphone - 安装 ELCImagePickerController

> ID：10085429
> 
> 赞同：1
> 
> 时间：2012-04-10T08:27:24.840
> 
> 标签：iphone, objective-c, xcode, uiimagepickercontroller, alassetslibrary

我很高兴找到一个可以选择多个图像的图像选择器！但是我有一些问题要安装。对不起，我是 XCode 的初学者，所以我可能会问一些简单的问题。

我遵循此处描述的程序：http: [//www.icodeblog.com/2011/03/03/update-elcimagepickercontroller/](http://www.icodeblog.com/2011/03/03/update-elcimagepickercontroller/)

所以在 StitchController.h

```
#import "ELCImagePickerController.h"

@interface StitchController : UIViewController<UIImagePickerControllerDelegate, UINavigationControllerDelegate, UIScrollViewDelegate, ELCImagePickerControllerDelegate> 
```

在 StitchController.m 中启动 ELCImagePicker

```
-(IBAction)launchController
{    
    ELCAlbumPickerController *albumController = [[ELCAlbumPickerController alloc] initWithNibName:@"ELCAlbumPickerController" bundle:[NSBundle mainBundle]];
    ELCImagePickerController *elcPicker = [[ELCImagePickerController alloc] initWithRootViewController:albumController];

    [albumController setParent:elcPicker];

    [elcPicker setDelegate:self];

    ELCImagePickerDemoAppDelegate *app = (ELCImagePickerDemoAppDelegate *)[[UIApplication sharedApplication] delegate];

    //I change app.viewController to self since I am adding the image picker over the current view?
    //[app.viewController presentModalViewController:elcPicker animated:YES];
    [self presentModalViewController:elcPicker animated:YES];

    [elcPicker release];

    [albumController release];
} 
```

但是现在，当我单击按钮启动时，什么都没有出现。

如果我把它改回

```
[app.viewController presentModalViewController:elcPicker animated:YES]; 
```

引发错误：***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[AppDelegate viewController]：无法识别的选择器已发送到实例 0x664990”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:21:12.737

我不是故事板或界面构建专家，事实上，我避免使用它们，但我会查看我在 IB 或 SB 中的按钮并确保它们正常工作。基本上，我是在引导您远离 ELCImagePickerController 作为问题所在。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:39:50.777

```
ELCAlbumPickerController *albumController = [[ELCAlbumPickerController alloc] init];
    ELCImagePickerController *elcPicker = [[ELCImagePickerController alloc] initWithRootViewController:albumController];
    [albumController setParent:elcPicker];
    [elcPicker setDelegate:self];
    [self presentModalViewController:elcPicker animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T14:56:44.353

当我的按钮未正确链接时，我遇到了这个问题。确保您的按钮链接到“-(IBAction)launchController”IB 操作。如果您不使用故事板，那么您应该有一个 .xib 文件。点击那个。如果您正在使用故事板，请导航到故事板视图。查看 xib/storyboard 后，选择橙色的“文件所有者”按钮。单击 Files Owner 后，查看右侧并打开“连接检查器”，在“Received Actions”下向下滚动并找到您创建的“launchController”操作。将其与您通过单击和拖动创建的按钮链接。这将显示一个下拉菜单，选择“Touch Up Inside”。尝试再次运行该应用程序。

# c# - 在 C#/Windows 中以编程方式阻止进程与特定主机之间的所有连接

> ID：10085432
> 
> 赞同：3
> 
> 时间：2012-04-10T08:27:37.670
> 
> 标签：c#, windows, sockets

我正在尝试追踪我们使用的第三方连接器库中的一些故障转移问题。目前我正在启动和停止远程服务以模拟故障，这是可行的，但非常不切实际。

有没有一种方法可以以编程方式阻止进程和给定主机之间的所有连接？

编辑：除了阻止我想删除任何现有的连接

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T08:31:20.083

我认为您可以与 Windows 防火墙交互以实现您想要的（以编程方式阻止进程和给定主机之间的所有连接），请查看[Windows 防火墙接口](http://msdn.microsoft.com/en-us/library/aa366449%28v=VS.85%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:42:37.610

您还可以通过在[主机](http://en.wikipedia.org/wiki/Hosts_%28file%29)文件中写入条目来阻止与主机的所有连接。您可以将主机名重定向到 localhost 或任何无法访问的地址。但它并不适用于单个进程，而是适用于整台机器。它比使用防火墙更简单，但更全球化。

# .net - 如何在 MonoTouch 中使用 System.IO.Packaging

> ID：10085433
> 
> 赞同：2
> 
> 时间：2012-04-10T08:27:40.553
> 
> 标签：.net, xamarin.ios, zip, system.io.packaging

尝试`System.IO.Packaging`在 MonoTouch 中使用时遇到问题。我找不到这个资源。谁能告诉我在哪里可以找到这个资源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:27:15.007

据我所知，我在 MonoTouch 中不可用。

如果您需要 Zip 支持，[SharpZibLib](http://www.icsharpcode.net/opensource/sharpziplib/)可与 MonoTouch 一起使用。

如果您使用 SharpZipLib 请注意此问题：[Monotouch - ICSharpCode.SharpZipLib 给出错误](https://stackoverflow.com/questions/4600923/monotouch-icsharpcode-sharpziplib-giving-an-error)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T11:57:11.563

[`System.IO.Packaging`](http://msdn.microsoft.com/en-us/library/system.io.packaging.aspx)`WindowsBase.dll`MonoTouch (5.x) 不附带其中的一部分。

但是，它的类型与*普通*[`ZipPackage`](http://msdn.microsoft.com/en-us/library/system.io.packaging.zippackage.aspx)zip 文件不完全兼容，因此如果您要处理 .zip 文件，这可能并不理想。在这种情况下，您最好使用@Jamie 提到的替代库。

 *如果你真的想要一些特定的类型，那么你可以尝试从[gihub](https://github.com/mono/mono/tree/master/mcs/class/WindowsBase)`System.IO.Packaging`提供的 Mono 源代码（开源）构建程序集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T13:48:27.707

如果你想压缩/解压缩某些东西，你可能还想看看 System.IO.Compression.GZIPStream() 也可以在 MT 中使用。像这样使用它：

```
string sContent;
string sDest = "zipped file with text content.zip";
using ( FileStream oIn = File.OpenRead( sDest ) )
using ( MemoryStream oOut = new MemoryStream() )
using ( GZipStream oZip = new GZipStream( oIn, CompressionMode.Decompress ) )
using ( StreamReader oReader = new StreamReader( oOut ) )
{
    oZip.CopyTo( oOut );
    oOut.Seek( 0, SeekOrigin.Begin );
    sContent = oReader.ReadToEnd();
} 
```*

# c++ - IwGx、Iw2D 和 s3e 之间的区别

> ID：10085443
> 
> 赞同：5
> 
> 时间：2012-04-10T08:28:17.020
> 
> 标签：c++, airplay, marmalade

和api之间`IwGx`的主要区别是什么？`Iw2D``s3e``marmalade`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T14:09:58.000

s3e 提供了一组允许跨平台开发的核心 API。IwGx 是一个渲染器抽象层，提供对软件渲染器和 Open GL 的有效访问。Iw2D 是一个简单的 2D 绘图 API，用于隐藏 IwGx 的一些复杂性。

# jquery - Qtip 的箭头在 IE 中不显示

> ID：10085444
> 
> 赞同：0
> 
> 时间：2012-04-10T08:28:17.927
> 
> 标签：jquery, qtip

qTip 在 IE 中没有箭头，但在 FF 中显示箭头。之后箭头消失了 jquery 从 1.3 更新到 1.7.2

```
$element.qtip({
                content: {
                    text: text,
                    prerender: true,
                    title: {
                        text: this.settings.translationDictionary.lblWarningText,
                        button: "<div class='confWarningClose'>" + this.settings.translationDictionary.tblCloseWarningText + "</div>"
                    }
                },
                position: {
                    corner: {
                        target: "bottomMiddle",
                        tooltip: "topMiddle"
                    }
                },
                style: {
                    tip: { corner: "topMiddle", size: { x: 20, y: 10} },
                    width: 220,
                    "word-wrap": "break-word",
                    "font-size": "13px",
                    color: "Red",
                    "text-align": "center",
                    title: {
                        "padding-right": "5px",
                        "padding-top": "3px",
                        "padding-left": "60px",
                        "color": "#F4D546",
                        background: "#424242",
                        height: "8px"
                    },
                    border: {
                        width: 3,
                        radius: 5,
                        color: '#424242'
                    }
                },
                show: {
                    solo: true,
                    delay: 0,
                    when: {
                        target: false,
                        event: "click"
                    }
                },
                hide: ""
            }) 
```

图片与此处的示例 [http://content.screencast.com/users/blackvoodoo/folders/Jing/media/30fabe28-1fc5-475e-a042-3bb551ee0968/arrow.png](http://content.screencast.com/users/blackvoodoo/folders/Jing/media/30fabe28-1fc5-475e-a042-3bb551ee0968/arrow.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:08:23.057

好的，我已经解决了这个问题。需要更新函数 createTip(corner)。我们不能通过函数 prepend() 添加 VML 元素。相反，我们通过 html() 将 VML 元素添加到 self.elements.tip。更新了下面的函数 createTip(corner)：

```
 function createTip(corner) {
    var self, color, coordinates, coordsize, path;
    self = this;

    // Destroy previous tip, if there is one
    if (self.elements.tip !== null) self.elements.tip.remove();

    // Setup color and corner values
    color = self.options.style.tip.color || self.options.style.border.color;
    if (self.options.style.tip.corner === false) return;
    else if (!corner) corner = self.options.style.tip.corner;

    // Calculate tip coordinates
    coordinates = calculateTip(corner, self.options.style.tip.size.width, self.options.style.tip.size.height);

    // Create tip element
    self.elements.tip = $('<div class="' + self.options.style.classes.tip + '" dir="ltr" rel="' + corner + '" style="position:absolute; ' +
     'height:' + self.options.style.tip.size.height + 'px; width:' + self.options.style.tip.size.width + 'px; ' +
     'margin:0 auto; line-height:0.1px; font-size:1px;"></div>');
    var tipobject = '';
    // Use canvas element if supported
    if ($('<canvas>').get(0).getContext)
        tipobject += '<canvas height="' + self.options.style.tip.size.height + '" width="' + self.options.style.tip.size.width + '"></canvas>';

    // Canvas not supported - Use VML (IE)
    else if ($.browser.msie) {
        // Create coordize and tip path using tip coordinates
        coordsize = self.options.style.tip.size.width + ',' + self.options.style.tip.size.height;
        path = 'm' + coordinates[0][0] + ',' + coordinates[0][1];
        path += ' l' + coordinates[1][0] + ',' + coordinates[1][1];
        path += ' ' + coordinates[2][0] + ',' + coordinates[2][1];
        path += ' xe';

        // Create VML element
        tipobject += '<v:shape fillcolor="' + color + '" stroked="false" filled="true" path="' + path + '" coordsize="' + coordsize + '" ' +
        'style="width:' + self.options.style.tip.size.width + 'px; height:' + self.options.style.tip.size.height + 'px; ' +
        'line-height:0.1px; display:inline-block; behavior:url(#default#VML); ' +
        'vertical-align:' + ((corner.search(/top/) !== -1) ? 'bottom' : 'top') + '"></v:shape>';

        // Create a phantom VML element (IE won't show the last created VML element otherwise)
        tipobject += '<v:image style="behavior:url(#default#VML);"></v:image>';

        // Prevent tooltip appearing above the content (IE z-index bug)
        self.elements.contentWrapper.css('position', 'relative');
    };

    // Attach new tip to tooltip element
    self.elements.tip.html(tipobject);
    self.elements.tooltip.prepend(self.elements.tip);

    // Create element reference and draw the canvas tip (Delayed til after DOM creation)
    self.elements.tip = self.elements.tooltip.find('.' + self.options.style.classes.tip).eq(0);
    if ($('<canvas>').get(0).getContext)
        drawTip.call(self, self.elements.tip.find('canvas:first'), coordinates, color);

    // Fix IE small tip bug
    if (corner.search(/top/) !== -1 && $.browser.msie && parseInt($.browser.version.charAt(0)) === 6)
        self.elements.tip.css({ marginTop: -4 });

    // Set the tip position
    positionTip.call(self, corner);
}; 
```

# sql-server - JPA 实体使用索引提示

> ID：10085450
> 
> 赞同：1
> 
> 时间：2012-04-10T08:28:52.967
> 
> 标签：sql-server, hibernate, playframework, hint

是否可以在播放框架实体查询上指定数据库索引提示。

我的代码如下所示：

```
public static List<Transaction> findOnInactive(Date date) {
    return Transaction.find(
            "date = ? and account in ( select d.acctNb from account d "
                    + " where d.date = ? and (d.inactive = true or d.blocked = true)" 
                    + " group by d.acctNb )", date, date).fetch();
} 
```

运行生成的查询需要 20 秒。但是手动运行相同的查询

select * from transaction with (INDEX(_dta_index_k1_1)) ...

只需 1 秒。无论如何，我可以在我的 JPA 查询中指定索引提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:45:50.873

您需要使用本机 SQL 查询，如下所示：

```
return JPA.em().createNativeQuery(
    "select * from transaction with (INDEX(_dta_index_k1_1)) ...",
    Transaction.class).getResultList(); 
```

# wpf - 首先在代码中使用 ObservableCollection 跟踪 DbContext 的变化

> ID：10085453
> 
> 赞同：-1
> 
> 时间：2012-04-10T08:29:11.380
> 
> 标签：wpf, mvvm, commit, change-tracking

我`ObservableCollection<T>`用来将一些数据绑定到某个视图。在编辑数据库现有数据时，我可以通过`Savechanges()`在我的视图模型中仅调用一个方法来保存数据编辑，也可以将新项目添加到集合中并且我可以编辑它们，但该`SaveChanges()`方法不会向数据库插入额外的行。

我不知道将哪些实体传递给视图模型。T 是多个实体的合并类，所以我必须这样做。在构造函数中：

```
collection=globalContext.TSet;
//the collection and context are defined in class level 
```

获取新项目的代码：

```
collection.Add(New T());
CurrentItem=collection.Last(); 
```

其中collection 是`ObservableCollection<T>`并且`CurrentItem`是当前正在编辑的项目。

***编辑：*** 不`context.ChangeTracker.Entries`识别新对象。

我有一个复杂的类型（比如 T），它是一些连接查询的结果，我不知道 T 是从哪些实体创建的，所以我无法获取实体 => 我不能说出我是什么类型的实体的上下文想补充。

所以我必须强制更改跟踪器从复杂类型创建新对象，这是某些连接查询的结果。

我正在使用 EF4.3.1

有什么建议么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:27:35.893

数据库未更新。通过 IDbSet 修改视图（或视图模型）中的[DBSet](http://msdn.microsoft.com/en-us/library/gg679233%28v=vs.103%29.aspx)，然后发出 DbContext.SaveChanges 执行此操作，而不是直接修改 ObservableCollection。ObservableCollection 然后应该刷新自己并更新视图模型和视图。如果它没有重新查询数据库以生成新的 DbSet，则从 DbSet.Local 为视图模型获取一个新的 ObservableCollection，然后从中创建一个新视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T06:24:31.993

您尚未将新实体添加到 TSet。您需要调用 TSet.Add(t) 或连接 ObservableCollection 的 CollectionChanged 事件以自动执行此操作。

# android - 启动 Android 虚拟设备失败

> ID：10085456
> 
> 赞同：0
> 
> 时间：2012-04-10T08:29:23.810
> 
> 标签：android

我正在尝试启动虚拟设备。当我在 Android 虚拟设备管理器中按开始时，它会显示一个进度条，在中间（大约 50%）它会打开另一个我粘贴到这里的窗口并关闭。视频设备只有一个选项，我相信笔记本电脑的摄像头，当我按下确定时，没有虚拟设备在运行。任何想法如何解决这一问题？

![提示窗口](../Images/bb8854e46daade97d3cbdcf63a40b01a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T21:33:58.297

请确保您没有检查任何类型的相机选项。如果你这样做了，你必须为它提供一个来源来获取图像。

程序向您显示的屏幕是请求图像源的程序的屏幕。

希望能帮助到你。

# java - Java 方法参考

> ID：10085457
> 
> 赞同：18
> 
> 时间：2012-04-10T08:29:34.760
> 
> 标签：java

我有一些使用这些方法的课程：

```
public class TestClass
{

    public void method1()
    {
        // this method will be used for consuming MyClass1
    }

    public void method2()
    {
        // this method will be used for consuming MyClass2
    }
} 
```

和类：

```
public class MyClass1
{
}

public class MyClass2
{
} 
```

我想要`HashMap<Class<?>, "question">`像这样存储（键：类，值：方法）对的位置（类“类型”与方法相关联）

```
hashmp.add(Myclass1.class, "question"); 
```

我想知道如何向 HashMap 添加方法引用（替换“问题”）。

ps 我来自 C#，我只是在这里写`Dictionary<Type, Action>`:)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-04-14T19:19:33.573

现在 Java 8 出来了，我想我会用如何在 Java 8 中做到这一点来更新这个问题。

```
package com.sandbox;

import java.util.HashMap;
import java.util.Map;

public class Sandbox {
    public static void main(String[] args) {
        Map<Class, Runnable> dict = new HashMap<>();

        MyClass1 myClass1 = new MyClass1();
        dict.put(MyClass1.class, myClass1::sideEffects);

        MyClass2 myClass2 = new MyClass2();
        dict.put(MyClass2.class, myClass2::sideEffects);

        for (Map.Entry<Class, Runnable> classRunnableEntry : dict.entrySet()) {
            System.out.println("Running a method from " + classRunnableEntry.getKey().getName());
            classRunnableEntry.getValue().run();
        }
    }

    public static class MyClass1 {
        public void sideEffects() {
            System.out.println("MyClass1");
        }
    }

    public static class MyClass2 {
        public void sideEffects() {
            System.out.println("MyClass2");
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-10T08:34:06.757

这是很可能是 Java 8 的特性。目前最简单的方法是使用反射。

```
public class TestClass {
    public void method(MyClass1 o) {
        // this method will be used for consuming MyClass1
    }

    public void method(MyClass2 o) {
        // this method will be used for consuming MyClass2
    }
} 
```

并使用

```
Method m = TestClass.class.getMethod("method", type); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T08:34:55.707

```
Method method = TestClass.class.getMethod("method name", type) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-10T08:43:55.147

使用接口而不是函数指针。所以定义一个接口来定义你想要调用的函数，然后像上面的例子一样调用接口。要实现接口，您可以使用匿名内部类。

```
void DoSomething(IQuestion param) {
    // ...
    param.question();
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-20T11:01:37.210

您在代码注释中提到每个方法都使用某种类型的对象。由于这是一种常见操作，Java 已经为您提供了一个名为的[*函数式接口*](https://docs.oracle.com/javase/specs/jls/se8/html/jls-9.html#jls-9.8)[`Consumer`](https://docs.oracle.com/javase/8/docs/api/java/util/function/Consumer.html)，该接口可作为一种将某种类型的对象作为输入并对其执行某些*操作*的方式（到目前为止，您在问题中已经提到了两个词： “消费”和“行动”）。

因此，映射可以保存键是类的条目，例如`MyClass1`and `MyClass2`，值是该类对象的消费者：

```
Map<Class<T>, Consumer<T>> consumersMap = new HashMap<>(); 
```

由于 a`Consumer`是一个函数式接口，即只有一个抽象方法的接口，它可以使用 lambda 表达式来定义：

```
Consumer<T> consumer = t -> testClass.methodForTypeT(t); 
```

`testClass`的实例在哪里`TestClass`。

由于此 lambda 只调用现有方法`methodForTypeT`，因此您可以直接使用[方法引用](https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html)：

```
Consumer<T> consumer = testClass::methodForTypeT; 
```

然后，如果您将方法的签名更改`TestClass`为`method1(MyClass1 obj)`and `method2(MyClass2 obj)`，您将能够将这些方法引用添加到映射中：

```
consumersMap.put(MyClass1.class, testClass::method1);
consumersMap.put(MyClass2.class, testClass::method2); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-10T08:41:28.717

虽然您可以`java.lang.reflect.Method`在映射中存储对象，但我建议您不要这样做：您仍然需要在调用时传递用作`this`引用的对象，并且使用原始字符串作为方法名称可能会在重构中造成问题。

这样做的规范方法是提取接口（或使用现有接口）并使用匿名类进行存储：

```
map.add(MyClass1.class, new Runnable() {
  public void run() {
    MyClass1.staticMethod();
  }
}); 
```

我必须承认，这比 C# 变体要冗长得多，但这是 Java 的常见做法——例如，在使用侦听器进行事件处理时。但是，基于 JVM 构建的其他语言通常具有此类处理程序的简写符号。通过使用接口方法，您的代码与 Groovy、Jython 或 JRuby 兼容，并且仍然是类型安全的。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-02-23T05:47:04.360

要回答有关使用 a 的直接问题`Map`，您建议的课程将是：

```
interface Question {} // marker interface, not needed but illustrative

public class MyClass1 implements Question {}

public class MyClass2 implements Question {}

public class TestClass {
    public void method1(MyClass1 obj) {
        System.out.println("You called the method for MyClass1!");
    }

    public void method2(MyClass2 obj) {
        System.out.println("You called the method for MyClass2!");
    }
} 
```

那么你`Map`将是：

```
Map<Class<? extends Question>, Consumer<Question>> map = new HashMap<>(); 
```

并像这样填充：

```
TestClass tester = new TestClass();
map.put(MyClass1.class, o -> tester.method1((MyClass1)o)); // cast needed - see below
map.put(MyClass2.class, o -> tester.method2((MyClass2)o)); 
```

并像这样使用：

```
Question question = new MyClass1();
map.get(question.getClass()).accept(question); // calls method1 
```

以上工作正常，但问题是没有办法将映射*键*的类型与其*值*的类型连接起来，即您不能使用泛型正确键入消费者的值，因此使用方法参考：

```
map.put(MyClass1.class, tester::method1); // compile error 
```

这就是为什么您需要在 lambda 中强制转换对象以绑定到正确的方法。

还有另一个问题。如果有人创建了一个新的 Question 类，您直到*运行*时才知道Map 中没有该类的条目，*并且*您必须编写类似的代码`if (!map.containsKey(question.getClass())) { // explode }`来处理这种可能性。

但是有一个替代...

* * *

还有另一种模式*确实*为您提供了编译时安全性，这意味着您无需编写任何代码来处理“丢失的条目”。该模式称为[双重调度](https://en.wikipedia.org/wiki/Double_dispatch)（它是[访问者](https://en.wikipedia.org/wiki/Visitor_pattern)模式的一部分）。

它看起来像这样：

```
interface Tester {
    void consume(MyClass1 obj);
    void consume(MyClass2 obj);
}

interface Question {
    void accept(Tester tester);
}

public class TestClass implements Tester {
    public void consume(MyClass1 obj) {
        System.out.println("You called the method for MyClass1!");
    }

    public void consume(MyClass2 obj) {
        System.out.println("You called the method for MyClass2!");
    }
}

public  class MyClass1 implements Question {
    // other fields and methods
    public void accept(Tester tester) {
        tester.consume(this);
    }
}
public  class MyClass2 implements Question {
    // other fields and methods
    public void accept(Tester tester) {
        tester.consume(this);
    }
} 
```

并使用它：

```
Tester tester = new TestClass();
Question question = new MyClass1();
question.accept(tester); 
```

或许多问题：

```
List<Question> questions = Arrays.asList(new MyClass1(), new MyClass2());
questions.forEach(q -> q.accept(tester)); 
```

此模式通过将回调放入目标类来工作，目标类可以绑定到为对象处理该类的正确方法`this`。

这种模式的好处是，如果创建了另一个 Question 类，则需要实现该`accept(Tester)`方法，因此 Question 实现者不会忘记实现对 Tester 的回调，*并*自动检查 Testers 是否可以处理新的实现，例如

```
public class MyClass3 implements Question {
    public void accept(Tester tester) { // Questions must implement this method
        tester.consume(this); // compile error if Tester can't handle MyClass3 objects
    }
} 
```

还要注意这两个类如何不相互引用 - 它们只引用*interface*，因此 Tester 和 Question 实现之间存在完全解耦（这也使得单元测试/模拟更容易）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-10T08:33:06.067

你试过`Method`对象吗？参考：

*   [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Method.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Method.html)
*   [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getMethod%28java.lang.String,%20java.lang.Class...%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getMethod%28java.lang.String,%20java.lang.Class...%29)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-23T01:05:24.527

### 你的问题

给定你的类有一些方法：

```
public class MyClass1 {
    public void boo() {
        System.err.println("Boo!");
    }
} 
```

和

```
public class MyClass2 {
    public void yay(final String param) {
        System.err.println("Yay, "+param);
    }
} 
```

然后您可以通过反射获取方法：

```
Method method=MyClass1.class.getMethod("boo") 
```

调用方法时，需要传递一个类实例：

```
final MyClass1 instance1=new MyClass1();
method.invoke(instance1); 
```

把它放在一起：

```
public class Main {
    public static void main(final String[] args) throws NoSuchMethodException, SecurityException, IllegalAccessException, IllegalArgumentException, InvocationTargetException {
        final Map<Class<?>,Method> methods=new HashMap<Class<?>,Method>();
        methods.put(MyClass1.class,MyClass1.class.getMethod("boo"));
        methods.put(MyClass2.class,MyClass2.class.getMethod("yay",String.class));

        final MyClass1 instance1=new MyClass1();
        methods.get(MyClass1.class).invoke(instance1);

        final MyClass2 instance2=new MyClass2();
        methods.get(MyClass2.class).invoke(instance2,"example param");

    }
} 
```

给：
**嘘！**
**是的，示例参数**

请注意以下问题：

*   将方法名称硬编码为字符串 - 这很难避免
*   它是反射，因此在运行时访问类的元数据。容易出现很多异常（示例中未处理）
*   您不仅需要告知方法名称，还需要告知参数类型以访问一种方法。这是因为方法重载是标准的，这是选择正确的重载方法的唯一方法。
*   调用带参数的方法时要小心：没有编译时参数类型检查。

### 另一个答案

我猜您正在寻找的是一个简单的侦听器：即一种间接调用另一个类的方法的方法。

```
public class MyClass1 implements ActionListener {
    @Override
    public void actionPerformed(final ActionEvent e) {
        System.err.println("Boo!");
    }
} 
```

和

```
public class MyClass2 implements ActionListener {
    @Override
    public void actionPerformed(final ActionEvent e) {
        System.err.println("Yay");
    }
} 
```

用作：

```
public class Main {
    public static void main(final String[] args)  {
        final MyClass1 instance1=new MyClass1();
        final MyClass2 instance2=new MyClass2();

        final Map<Class<?>,ActionListener> methods=new HashMap<Class<?>,ActionListener>();

        methods.put(MyClass1.class,instance1);
        methods.put(MyClass2.class,instance2);

        methods.get(MyClass1.class).actionPerformed(null);
        methods.get(MyClass2.class).actionPerformed(null);
    }
} 
```

这称为侦听器模式。我敢于重用 Java Swing 中的 ActionListener，但实际上您可以通过声明一个带有方法的接口来非常轻松地创建自己的侦听器。MyClass1, MyClass2 将实现该方法，然后您可以像调用...方法一样调用它。

没有反射，没有硬编码的字符串，没有混乱。（ActionListener 允许传递一个参数，该参数针对 GUI 应用程序进行了调整。在我的示例中，我只传递 null。）

# matlab - MATLAB 未定义函数错误

> ID：10085460
> 
> 赞同：1
> 
> 时间：2012-04-10T08:29:49.707
> 
> 标签：matlab

我尝试在 matlab 上运行以下图像压缩代码。直到昨天它运行正常，没有错误。但是今天当我尝试运行它时，它给了我关于未定义函数 imshow、wavedec2 等的错误。

**错误：**

```
??? Undefined function or method 'wavedec2' for input arguments of type 'uint8'.
Error in ==> wave_project at 45
[c,s]=wavedec2(input_image,n,wname);

??? Undefined function or method 'imshow' for input arguments of type 'uint8'.
Error in ==> wave_project at 17
imshow(input_image); 
```

我通过 VER 命令检查了我拥有的各种工具箱，图像处理工具箱就在里面！

我以前也发生过这种情况。但是程序随后运行。

**程序：**

```
clear all;
close all;

input_imag7e1 = imread('101_1.tif');
input_image=imnoise(input_image1,'speckle',0.01);

figure;

imshow(input_image);

p=input('enter the number of vanishing moments of wavelett M ');
n=input('enter the decomposition level');

wname = strcat('db',int2str(p));
disp(wname);

[c,s]=wavedec2(input_image,n,wname); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:32:42.993

我猜你正在运行一个 matlab 版本，它必须从中央存储库中检查这些工具箱。如果是这样，并且当前有太多人使用该特定工具箱，那么 matlab 不会为您分配许可证。我们过去遇到过这个问题。经常发生的唯一解决方法是让管理员购买该工具箱的更多许可证，或者在其他人发布许可证的一个小时运行。

约翰

# php - 带有 php-mysql 的症状检查器

> ID：10085461
> 
> 赞同：0
> 
> 时间：2012-04-10T08:30:20.130
> 
> 标签：php, mysql

我有一个表'结果'：

![在此处输入图像描述](../Images/0698eed47f175df36e2042541b2edcb2.png)

会有一个页面，所有症状都将在复选框中。当任何人检查其中一些并单击提交按钮时，该页面将重定向到另一个页面，该页面将显示可能的结果。

可能的结果：如果（头痛、体温、头晕）被选中，那么答案将是肺炎和疟疾。导致这些症状在这两种疾病中很常见。

我做了桌子。但想不到查询。请任何人给我一个想法/解决方案。

我正在使用 php-mysql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:06:32.940

```
#tblDiseases - holds all disease names
######################################
diseaseID | disease     
-----------------------
1            Tifoyd        
2            Jondis    
3            Malarya
4            Pneomonia
5            Dengu

#tblSymptoms - holds all symptoms
#################################
symptomID | symptom
-------------------------
1            Headache        
2            Temparature    
3            Less Pain
4            Sever Pain
5            Mussle Pain

#tblRel - holds relation between diseases and symptoms
######################################################
relID  | dieaseID | symptomID
-----------------------------
1         1          1
2         1          2
3         3          1
4         3          2
5         3          3 
```

When 3 symptoms are selected, the query would look like:

```
SELECT tblDiseases.disease
FROM tblRel 
   LEFT JOIN tblDiseases ON tblRel.diseaseID = tblDiseases.diseaseID
WHERE tblRel.symptomID = '1' AND tblRel.symptomID = '2' AND tblRel.symptomID = '3' 
```

这将选择具有症状的疾病`Headache`，`Temperature`并且`Less Pain`。因此查询可能会显示结果`Malaria`（基于示例）。

我没有测试过这段代码。:) 我希望它会工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:11:46.363

正如其他人已经说过的那样优化你的数据库然后尝试。如果为下一个选项尝试：

```
$arrInput = $_POST['your check Var Name'];
$strSQL = sprintf("select * from result where symptom in ('%s')", implode("','", $arrInput));
$objRes = mysql_query( $strSQL ); 
```

# node.js - 将 phantomJS 部署到 node.js 应用程序？

> ID：10085462
> 
> 赞同：7
> 
> 时间：2012-04-10T08:30:23.143
> 
> 标签：node.js, heroku, phantomjs, casperjs

我意识到[“在 Heroku 上运行 PhantomJS”](https://stackoverflow.com/questions/6445438/running-phantomjs-on-heroku)是一个相关但略有不同的问题，因为我正在尝试使用节点应用程序。

我在为节点应用程序部署 casperJS（基于 phantomJS）脚本时遇到问题。我尝试通过将 PhantomJS 64 位二进制文​​件放在我的应用程序`/bin`目录中来部署到 Heroku，但是当我尝试运行 PhantomJS 时出现以下错误：

```
phantomjs: error while loading shared libraries: libQtWebKit.so.4: cannot open shared object file: No such file or directory 
```

根据我的阅读，这可以通过安装 QtWebKit 库来解决，但 Heroku 没有安装这个。是否有另一个我可以使用的托管服务提供商或者在 Heroku 上安装这个包的方法？

相关代码：

```
app.get('/', function(request, response) {
  var sys = require('sys')
  var exec = require('child_process').exec;
  var child;

  //works but gives error while loading shared library libqtwebkit.so.4
  child = exec("phantomjs --version | tr -d '\n'", function(error, stdout, stderr) {
    sys.print('stdout: ' + stdout);
    sys.print('stderr: ' + stderr + '\n');
    response.header('Content-Type', 'application/json');
    response.send('_testcb(stdout:' + stdout + '\nstderr:' + stderr + ')', 200);
    if(error !== null) {
      console.log('exec error: ' + error);
    }
  });
}); 
```

我已经在 Nodester 上注册了 beta 测试，但他们的文档在这一点上仍然非常有限。

编辑：我可以通过简单地将 PhantomJS 的 lib 文件夹复制到我的节点应用程序的根目录来使其工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T17:28:04.033

将 phantomjs 的 lib 文件夹复制到节点应用程序的根目录您也可以尝试将符号链接放入 bin 或 sbin 关键是必须使用与节点运行相同的帐户从终端运行。此外，node-phantom 是一个很好的使用 phantomjs 的 npm 库，一旦你开始工作。

# python - python重新字符串以

> ID：10085468
> 
> 赞同：0
> 
> 时间：2012-04-10T08:31:19.953
> 
> 标签：python

在以下字符串中如何说该行以数字开头或以数字或多个结尾

```
line="He is a German called Mayer12345"
re.compile(r".*\d+\w$")

line="12He is a German called Mayer"
re.compile(r"^\d+\w .*") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T08:34:01.983

只需使用管道，它是正则表达式的 or ：

```
re.compile(r"(^\d+\w .*)|(.*\d+\w$)") 
```

# wpf - 我对 WPF 中 MVVM 概念的解释（与演示者相关）

> ID：10085472
> 
> 赞同：1
> 
> 时间：2012-04-10T08:32:01.180
> 
> 标签：wpf, mvvm, mvp

这是对 MVVM 概念的正确解释吗？

*   数据模板 -> 查看
*   DependencyObject（控件、ListView 等）-> ViewModel
*   数据上下文 -> 模型

如果我要创建自己的 ViewModel，它会替换实际的控件并需要显式模板？

ViewModel 中的“模型”一词不是指实际模型（例如在 DomainModel 中）？

我还向模型添加了 Presenters，我将其视为实用程序类，用于提升和向视图公开属性等。你能说 ViewModel 是自上而下的表示（视图的模型），而 Presenter 更像是 ModelView，是自下而上的表示（模型的视图）吗？

在这种情况下，我将不得不将上述内容修改为：

*   ...
*   数据上下文 -> 演示者
*   演示者 -> 模型

而且我通常不会从 DependencyObject 派生来创建我的自定义表示包装器，而只是创建我的自定义通用视图模型，例如控件而不是我的模型视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:14:11.207

通常 MVVM 是这样解释的：

View -> Controls, DataTemplates etc.
Model -> 你的实际数据模型（数据库或其他）
ViewModel -> 公开 View 可用于 DataBinding 的属性和命令

这意味着，您的视图将 ViewModel 作为 DataContext，ViewModel 的属性反映了模型的数据，并且 ViewModel 的命令对模型进行操作。在简单的情况下，Model 和 ViewModel 有时是相同的。

可以在此处找到概述：http: [//blogs.msdn.com/b/johngossman/archive/2005/10/08/478683.aspx](http://blogs.msdn.com/b/johngossman/archive/2005/10/08/478683.aspx)
如果您寻找它，您还可以找到很多关于构建 MVVM 应用程序的示例.

# web-services - Microsoft AdCenter V7 到 V8 API

> ID：10085480
> 
> 赞同：0
> 
> 时间：2012-04-10T08:33:15.123
> 
> 标签：web-services

我对 MS AdCenter API 很陌生，我想知道如何在 V8 中找到 V7 中的类对应物。例如 GetCampaignsInfoByAccountIdRequest 在 V7 中存在，但在 V8 中不存在。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:54:41.067

该团队最近[发布了一个从 v7 到 v8 的 API 转换页面](http://msdn.microsoft.com/en-us/library/jj851100.aspx)，应该可以回答这些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T07:22:23.667

我只能给出在[adcenter api 文档](http://msdn.microsoft.com/en-us/library/ee730327%28v=msads.70%29)中搜索的建议（我认为它的组织/可用性真的很差，而且很难找到你想要的信息）

关于*GetCampaignsInfoByAccountIdRequest*，也许这个过程可以帮助你：

在侧边栏中选择点“Microsoft adCenter APIs”（然后您可以在其下看到 API 7 和 API 8 的菜单点）。现在使用搜索面板并输入：*GetCampaignsInfoByAccountIdRequest*。您会看到一些结果，但仅适用于 v7 和 v6 ......所以我想它在 v8 中不再可用。

对于其他课程以类似的方式进行..希望有所帮助..

# actionscript-3 - 有没有像 http://www.flasheff.com/patternsshowcase/ 这样实现照片效果的 actionscript 开源库

> ID：10085481
> 
> 赞同：0
> 
> 时间：2012-04-10T08:33:16.463
> 
> 标签：actionscript-3

我是一个 actionscript 3.0 初学者，我需要一个开源工具来实现像[http://www.flasheff.com/patternsshowcase/](http://www.flasheff.com/patternsshowcase/)这样的照片效果，例如在我的项目中。谁能给我一些有用的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:58:34.307

使用免费且令人惊叹的[greensock](http://www.greensock.com/) actionscript库来创建您想要的效果，

或者

在此处查看列表：[http](http://www.webappers.com/2010/01/07/best-places-to-get-quality-flash-components/) ://www.webappers.com/2010/01/07/best-places-to-get-quality-flash-components/其中包括 Flash-library-and-effects 拍卖网站，并且可能便宜或开源的解决方案。

# java - 禁用 p2 存储库索引的获取

> ID：10085485
> 
> 赞同：5
> 
> 时间：2012-04-10T08:33:41.450
> 
> 标签：java, eclipse, maven, tycho

我们目前正在设置 maven 和 tycho 来构建 eclipse 插件。在示例和文档之后，我们添加了一些具有如下布局`p2`的存储库：

```
<repository>
  <id>eclipse-indigo</id>
  <layout>p2</layout>
  <url>http://download.eclipse.org/releases/indigo</url>
</repository> 
```

现在，每次我们执行 pom 时，maven 都会“获取”p2 索引，这需要相当长的时间。我们看到很多像

```
[INFO] Fetching p2.index (0B of 96B at 0B/s) from http://download.eclipse.org/releases/indigo/ 
```

并且它需要一些相当长的时间才能真正开始构建或清理或其他任何东西。

有没有办法至少暂时禁用提取？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T13:26:47.437

可以使用maven离线模式（命令行开关-o）

有关详细信息，请参阅[https://bugs.eclipse.org/bugs/show_bug.cgi?id=357357](https://bugs.eclipse.org/bugs/show_bug.cgi?id=357357)

# image-processing - 将 1mb 的数据编码为可解码的模拟图像的最佳方法是什么？

> ID：10085491
> 
> 赞同：1
> 
> 时间：2012-04-10T08:34:33.090
> 
> 标签：image-processing, encoding

1.  生成的图像必须有空间限制，不能太大。
2.  我的意思是类比，它应该被打印出来。就像二维码的工作原理一样，除了存储更大的尺寸！
3.  黑白图像
4.  可以压缩（显然因为它更好，解压缩所花费的时间也不应该太多，所以压缩可以最小化）
5.  您可以假设任何较低的打印密度，并且每像素位数将与您提出的解决方案直接相关。请继续假设:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T17:08:04.323

我不确定您如何将其精确编码以适合纸质...我认为最好的方法是将您的数字信息转换为更紧凑的模拟表示。澄清一下……已经提出的是获取数字信息并在模拟介质上以数字方式（用位）表示它。我想说的是获取数字信息，将其转换并在模拟媒体上以模拟形式表示。这个怎么做？我不知道，但我有一个线索给你。

还记得航海者金唱片吗？它们将 116（115？）个图像放入磁盘上，包括简单的黑白图像和具有高分辨率（ish）的全尺寸彩色图像。他们使用代表 512 (2^9) 行上的数字位的模拟波长框来做到这一点。

不确定这是否有帮助，但也许它给你（或其他人）一个想法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T08:42:37.563

假设没有纠错开销和 1 毫米分辨率，您将看到 1 x 1 米的图像。这假设没有压缩（您的数据的可压缩程度实际上取决于）并且没有真正的编码方案。这是不切实际的。

我会将您的数据分解为约 5kb 的块，将它们编码为 QR 码及其序列号，并使用 QR 码的集合。每个图像都有内置的纠错功能。您最终可能会得到两百张 15*15 厘米的图像。至少你可以使用普通的纸张和打印机。

我建议使用二维码的原因是它们内置了纠错功能，因此您对墨迹模糊、纸张起皱或撕裂，或者相机/扫描仪不够完美的容忍度更高。另外，纠错的开销也不错，而且你的论文使用率达到了 90%。假设您愿意为像素使用某个最大分辨率，而不管编码方案如何。另外，它们的解码速度很快，因此得名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-11T10:32:09.080

如何将您的 1 MB 编码为图像并以*足够高的分辨率*和*颜色深度*打印，这是一种简单直接的方法。

数据的恢复很大程度上取决于您的扫描仪/相机或“模拟”阅读器的功能（光学分辨率等）

在这个例子中没有纠错，冗余可以包含在数据本身中。

[![这里有 1 MB 的图片](../Images/d01a5ca936876acd571ae90e87a625a8.png)](https://ipfs.safewatch.xyz/ipfs/QmSU8Y4dMpUrQGCiDwsZReoJbpQyFofuZaTcW6zqRzqMXU/1m.png)

这是一个存储这个 1.1 MB 图像的容器：

[![此处为图片 1.1 MB 数据](../Images/de2ddd0609270fa8f82c9b1b7f0a6769.png)](https://ipfs.safewatch.xyz/ipfs/QmSU8Y4dMpUrQGCiDwsZReoJbpQyFofuZaTcW6zqRzqMXU/1m.jpg)

图片托管在[![ipfs](../Images/979575eb70a37e33b3f8676eab7bd517.png)](https://ipfs.safewatch.xyz/ipfs/QmSU8Y4dMpUrQGCiDwsZReoJbpQyFofuZaTcW6zqRzqMXU/)

其他方法：[将数据存储在纸上](https://www.monperrus.net/martin/store-data-paper)。

创建图像的 Perl 脚本如下（它使用`convert`imageMagick）：

```
#!/usr/bin/perl

# this script take any data and make an image with it (format .png)

# deps
#  convert from ImageMagick
our $dbug=0;
#--------------------------------
# -- Options parsing ...
#
my $if = undef;
my $of = undef;
while (@ARGV && $ARGV[0] =~ m/^-/)
{
  $_ = shift;
  #/^-(l|r|i|s)(\d+)/ && (eval "\$$1 = \$2", next);
  if (/^-v(?:erbose)?/) { $verbose= 1; }
  elsif (/^-?if?=?([\w.]+)?/) { $if= $1?$1:shift; }
  elsif (/^-?of?=?([\w.]+)?/) { $of= $1?$1:shift; }
  else                  { die "Unrecognized switch: $_\n"; }

}
#understand variable=value on the command line...
eval "\$$1='$2'"while $ARGV[0] =~ /^(\w+)=(.*)/ && shift;

my $data;
if (! defined $of) {
 if (@ARGV) { $of = pop @ARGV }
 else { $of = '-' }
}
if (defined $if) {
   local *IN; 
   local $/ = undef;
   open IN,'<',$if;
   $data = <IN>;
   close IN;
} else {
   if ($ARGV > 0) { $if = '<>'; }
     elsif ($#ARGV == 0) { $if = $ARGV[0]; }
     else { $if = '-'; }
   local $/ = undef;
   $data = <>;
   close STDIN;

}
my $size = length($data);

my $pi = atan2(0,-1);
#my $iratio = 4/3; # y/x
my $iratio = $pi; # x/y

my $xy = $size/3 * ($iratio);
my $x = sqrt($xy);
if ($verbose) {
   printf STDERR "if: %s\n",$if;
   printf STDERR "of: %s\n",$of;
   printf STDERR "size: %s\n",$size;
   printf STDERR "x: %.3f\n",$x;
   printf STDERR "y: %.3f\n",$x / $iratio;
}
my $y = int($x / $iratio + $iratio);
   $x = int( ( $size / 3 + $y - 1) / $y ); 
my $n = $x*$y*3;
my $delta = $n - $size;
if ($delta < 0) {
   $x++; 
   $n = $x*$y*3;
   $delta = $n - $size;
}
my $pad = "\x00" x $delta;
if ($verbose) {
   printf STDERR "playload: %sx%s = %s\n",$x,$y,$n;
   printf STDERR "delta: %s\n", $delta;
}

my $hdr = <<"EOS";
P6
$x $y
255
EOS

#my $fname = $file; $fname =~ s,.*/,,;
#my $bname = $fname; $bname =~ s/\.[^\.]*$//;
#printf STDERR "fname: %s\n",$fname;
#printf STDERR "fname: %s.png\n",$bname;

local *PPM; open PPM,"| convert -compress LZW -strip -quality 90 ppm:- png:$of";
print PPM $hdr;
binmode(PPM);
print PPM $data;
print PPM $pad;
close PPM;

exit $?;

1; # $Source: /my/perl/scripts/dat2png.pl$ 
```

# c# - 更新绑定的datagridview

> ID：10085492
> 
> 赞同：0
> 
> 时间：2012-04-10T08:34:36.477
> 
> 标签：c#, data-binding, datagridview

我通过以下方式在我的 datagridview 中绑定数据：在我的程序中，我有一个全局对象 Obmiary，我将它传递给我的表单。

```
private ClassObmiary obmiary;
private BindingSource bs;
private BindingList<ClassObmiar> bList;

public FormObmiar(ClassObmiary Obmiary)
{
    InitializeComponent();
    obmiary = Obmiary;

    bs = new BindingSource();
    bList = new BindingList<ClassObmiar>(obmiary.Obmiary);

    // Fill bList with ClassObmiar

    bs.DataSource = bList;
    dgvObmiar.DataSource = bs;
 } 
```

问题是当我在代码中的其他地方更改我的全局对象时，这个 dgv 不会显示更改。如何正确更新此数据网格视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:46:50.710

尝试`bs.ResetBindings(true);`

或者

`bs.ResetBindings(false);`

任何需要更新数据的地方。

# r - ggplot2 为几个 stat_functions 添加图例

> ID：10085493
> 
> 赞同：13
> 
> 时间：2012-04-10T08:34:46.083
> 
> 标签：r, ggplot2, legend

我看到很多关于如何自定义图例的问题，但我什至无法自定义图例。我想有一个图例来解释黑线是二次的，绿线是三次的。

```
library(ggplot2)

myfun1 <- function(x) x^2
myfun2 <- function(x) x^3

myplot <- ggplot(data = data.frame(x = 1:5, y= 1:5), aes(x=x, y=y)) +
    stat_function(fun = myfun1, color="green") +
    stat_function(fun = myfun2, color="black") 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-10T09:14:56.987

试试这个：

```
ggplot(NULL, aes(x=x, colour = g)) +
  stat_function(data = data.frame(x = 1:5, g = factor(1)), fun = myfun1) +
  stat_function(data = data.frame(x = 1:5, g = factor(2)), fun = myfun2) +
  scale_colour_manual(values = c("red", "green"), labels = c("quadratic", "cubic")) 
```

![在此处输入图像描述](../Images/0f478a5e8c671f24aff40523375f2d1b.png)

# asp.net - 如何在没有 Hiddenfor 的情况下在 mvc 3 中保持我的 ID？

> ID：10085495
> 
> 赞同：0
> 
> 时间：2012-04-10T08:34:48.340
> 
> 标签：asp.net, .net, asp.net-mvc

我是 asp.net MVC 的新开发人员。在弹出模型中单击编辑后，我在 gridview 上有一个编辑按钮，我可以看到每个数据。例如：

在我的数据库中有客户表 4 列：id（PK）、姓名、姓氏、联系人我看不到 id 文本框这是正常的！但是在单击编辑按钮更改名称后，SurName 发送 HttpPost 编辑控制器。有一个惊喜事件：ıd消失了！谷歌搜索后：

```
 @using (Html.BeginCollectionItem("Kortingartikel")) { 

    @Html.HiddenFor(x => x.Artikelid)
    @Html.TextBoxFor(x => x.Artikelnaam)
    @Html.TextBoxFor(x => x.Prijs)

} 
```

Hiddenfor 是一个解决方案。但解决方案不能满足我。为什么 id 消失以及如何在没有 hiddenfor 的情况下保持 id 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:47:30.497

这不是 asp.net 网络表单，它使用视图状态来存储信息。MVC 使用纯 html 而没有变通方法。因此，基本上，帖子中没有的内容根本不存在。

我能想到的一种不使用 HiddenFor 的方法可能是将您的 ID 放在 Url 中。Frmaework 应该足够聪明，可以将它绑定到这样的方法

```
 public ViewResult MyAction(int id, MyViewModel viewModel)
 {

 } 
```

# objective-c - ' 后应用程序崩溃

> ID：10085500
> 
> 赞同：0
> 
> 时间：2012-04-10T08:35:05.860
> 
> 标签：objective-c, xcode, json, cocoa-touch, uitableview

当我正在解析`'`的代码标题中出现a 时，我的应用程序崩溃了。`JSON`

此行正在加载标题的：

```
[[cell textLabel] setText:[item objectForKey:@"title"]]; 
```

**JSON：**

```
 NSString *jsonString = [NSString 
                            stringWithContentsOfURL:[NSURL URLWithString:@"**test.php"] 
                            encoding:NSStringEncodingConversionAllowLossy
                            error:nil];
    // Create parser
    SBJSON *parser = [[SBJSON alloc] init];
    NSDictionary *results = [parser objectWithString:jsonString error:nil];
    parser = nil;
    // Set tableData
    [self setTableData:[results objectForKey:@"items"]]; 
```

碰撞：

```
tableData   NSArray *   0x00000001 
```

> 2012-04-10 10:29:11.446 *** *[21222:f803] -[NSNull isEqualToString:]：无法识别的选择器发送到实例 0x146ace8 2012-04-10 10:29:11.447 **** [21222:f803] *** 由于应用程序终止未捕获的异常'NSInvalidArgumentException'，原因是： ' - [NSNull isEqualToString：]：无法识别的选择发送到实例0x146ace8' ***第一掷调用堆栈：（0x13d4022 0x1565cd6 0x13d5cbd 0x133aed0 0x133acb2 0x15e0ff 0x2b10 0xb8c54 0xb93ce 0xa4cbd 0xb36f1 0x5cd21 0x13d5e42 0x1d8c679 0x1d96579 0x1d1b4f7 0x1d1d3f6 0x1db81ce 0x1db8003 0x13a8936 0x13a83d7 0x130b790 0x130ad84 0x130ac9b 0x12bd7d8 0x12bd88a 0x1e626 0x1ded 0x1d55）终止调用抛出异常（lldb）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:42:20.793

该崩溃信息的关键部分是：`unrecognized selector sent to instance ... [NSNull isEqualToString:]`

看起来您的 JSON 包含`null`您期望字符串的某个位置。稍后，`setTableData:`你的内心可能会做这样的事情：

```
NSString* whatever = [items objectForKey:@"whatever"];
if([whatever isEqualToString:@"hello"]){
    ...
} 
```

这会崩溃，因为`whatever`变量包含`NSNull`，而不是`NSString`你所期望的。

# c# - 处理从 c++ dll 返回到 C# 的数组

> ID：10085501
> 
> 赞同：5
> 
> 时间：2012-04-10T08:35:11.980
> 
> 标签：c#, c++, marshalling

我在用 c++ 创建的 dll 中有这个

```
extern "C" __declspec(dllexport)
    char*  __stdcall hh()
{
    char a[2];
    a[0]='a';
         a[1]='b';
    return(a);
} 
```

这就是我试图在 c# 中处理代码的方式

```
[DllImport(@"mydll.dll",CharSet = CharSet.Ansi,CallingConvention = CallingConvention.StdCall)]     
       public static extern IntPtr hh();
       static void Main(string[] args)
        {
            IntPtr a = hh();
           //How to proceed here???
        }

    } 
```

**帮助进一步进行。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T09:57:15.983

没有办法处理这样的数组。`char a[2]`在 C++ 函数的堆栈上分配，并在您从它返回时立即销毁。您应该从 C# 传递一个数组并将其填充到 C++ 代码中，或者在堆中分配数组并提供一些释放它的方法。

当您正确处理时，将取决于您如何从 C++ 代码返回数据。如果它仍然是 IntPtr ，则可以使用 Marshal.ReadByte 方法从内存中读取字符，并在必要时使用 Encoding 方法将这些字节转换为字符串。

```
 const int bufferSize = 2; // suppose it's some well-known value.
IntPtr p = ...; // get this pointer somehow.
for (var i = 0; i != bufferSize; ++i)
{
  var b = Marshal.ReadByte(p, i);
  Console.WriteLine(b);
} 

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T05:04:52.510

我得到了如下解决方案::

我们的 C++ 代码如下

```
extern "C" __declspec(dllexport)
    char**  __stdcall hh()
{
 static char* myArray[3] = {"A1", "BB2", "CC3",};
    return myArray;
} 
```

C#如下

```
[DllImport(@"ourdll.dll",CharSet = CharSet.Ansi,CallingConvention = CallingConvention.StdCall)]     
      public static extern IntPtr hh();
       static void Main(string[] args)
        {
            IntPtr a = hh();
            int j = 0;
            string[] s=new string[100];
           do
           {
               s[j] = Marshal.PtrToStringAnsi(Marshal.ReadIntPtr(a,4*j));
               j++;
           }
           while(s[j-1] != null);
        } 
```

> 现在面临的唯一问题是我们如何知道数组的大小，以便在这个语句中 **string[] s=new string[100];** 我们不必浪费我们的记忆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T09:14:04.420

答案是

```
 string stra = Marshal.PtrToStringAnsi(a); 
```

但是您也有一个问题，即 dll 根据您的代码返回垃圾，因为 char* 是本地 c 样式字符串。如果你能返回类似的东西就可以了：

```
 const char* str = "Hello from DLL."; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-10T08:41:19.937

尝试使用非空 StringBuilder 作为返回值。

# java - 视图文件中的树结构

> ID：10085503
> 
> 赞同：0
> 
> 时间：2012-04-10T08:35:22.153
> 
> 标签：java, jsp

我在我的jsp中显示一个集合时遇到了一个问题，该集合包含诸如Collection（col1，col2 ...）col1之类的数据，它具有名称，值，图标名等。现在的要求是对于2个特定对象，我必须将 3 个对象作为子对象仅用于显示目的（这三个对象也将被收集）。我在 DB 中有一个字段级别，其值为 1 和 2，所以我想将其显示为

```
col1
col2
col3
 *col4
 *col5
 *col6
col7... and so on. . 
```

任何猜测

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:31:27.063

如果您已经知道哪 2 个对象具有子节点，则可以使用 jstl c:if 标签并检查条件，并根据条件将它们呈现为子元素。

否则，正如 Aaron 所说，建议创建支持 javabean 并在您的 jsp 中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:13:12.483

拆分问题。

首先创建一个获取初始集合并返回树的 java 方法。这使您可以为它编写单元测试，直到正确为止。

之后，修改 JSP 以呈现新的树结构。

# c++ - 关于编译器如何实现静态局部变量，我想知道两件事

> ID：10085509
> 
> 赞同：3
> 
> 时间：2012-04-10T08:35:46.557
> 
> 标签：c++

这是关于静态本地人的两个问题，一直困扰着我，我还没有找到明确的答案：

问题一：

```
 struct Test
 {
  static inline const char* name()
  {
     static const char* nameValue = "Name of Test";
     return nameValue;
  }
}; 
```

由于该方法是内联的，因此在调用它的每个编译单元中都应该有该方法的副本。但是，局部静态变量必须只有一个实例`nameValue`（如果我错了，请纠正我）。这是如何实现的？我们生成了许多函数实例，但它们都引用同一个静态局部变量。编译器是否按名称维护与每个函数关联的静态局部变量的全局表？

问题2：

```
 struct Init
 {
   Init() {printf("init created\n");}
  ~Init() {printf("init destroyed\n");}
 };

 struct Test
 {
   static void func()
   {
       static Init init;
   }
 }; 
```

静态局部 Init 对象仅在第一次调用 func() 时构造一次。编译器如何知道第一次调用 func() 的时间？它是否在运行时维护一个标志，这是否是这个函数的第一次调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:41:24.553

这实际上是两个不相关的问题。

首先，有多种解决方案。也许最常见的是一种叫做弱符号的东西。粗略地说，编译器会在每个使用该函数的目标文件中以特定名称生成一个实例，链接器会丢弃重复项，并仅在最终程序中保留一个。

对于第二种，通常的解决方案是生成一个与对象关联的布尔变量，并在对象进入范围时对其进行测试。

# iphone - 调整 ALAsset 照片的大小需要很长时间。有什么办法吗？

> ID：10085511
> 
> 赞同：1
> 
> 时间：2012-04-10T08:36:19.470
> 
> 标签：iphone, uiimageview, uiimage, resize

我正在制作一个博客应用程序。要撰写新条目，有一个“撰写条目”视图，用户可以在其中选择照片并输入文本。对于照片，有一个 UIImageView 占位符，单击此占位符后，会出现一个自定义 ImagePicker，用户可以在其中选择最多 3 张照片。

这就是问题所在。我不需要来自 ALAsset 的全分辨率照片，但同时，缩略图的分辨率太低，我无法使用。

所以我现在正在做的是将 fullResolution 照片调整为更小的尺寸。但是，这需要一些时间，尤其是在将最多 3 张照片调整为更小的尺寸时。

这是一段代码，以显示我在做什么：

```
 ALAssetRepresentation *rep = [[dict objectForKey:@"assetObject"] defaultRepresentation];

    CGImageRef iref = [rep fullResolutionImage];
    if (iref) 
    {
        CGRect screenBounds = [[UIScreen mainScreen] bounds];

        UIImage *previewImage;
        UIImage *largeImage;

        if([rep orientation] == ALAssetOrientationUp) //landscape image
        {
            largeImage = [[UIImage imageWithCGImage:iref] scaledToWidth:screenBounds.size.width];
            previewImage = [[UIImage imageWithCGImage:iref] scaledToWidth:300];
        }
        else  // portrait image
        {
            previewImage = [[[UIImage imageWithCGImage:iref] scaledToHeight:300] imageRotatedByDegrees:90];
            largeImage = [[[UIImage imageWithCGImage:iref] scaledToHeight:screenBounds.size.height] imageRotatedByDegrees:90];
        }
    } 
```

在这里，从全分辨率图像中，我创建了两个图像：一个预览图像（长端最大 300 像素）和一个大图像（长端最大 960 像素或 640 像素）。预览图像是应用程序本身在“新条目”预览中显示的内容。大图是上传到服务器时使用的。

我用来调整大小的实际代码，我从这里抓取了某个地方：

```
-(UIImage*)scaledToWidth:(float)i_width
{
    float oldWidth = self.size.width;
    float scaleFactor = i_width / oldWidth;

    float newHeight = self.size.height * scaleFactor;
    float newWidth = oldWidth * scaleFactor;

    UIGraphicsBeginImageContext(CGSizeMake(newWidth, newHeight));
    [self drawInRect:CGRectMake(0, 0, newWidth, newHeight)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();    
    UIGraphicsEndImageContext();
    return newImage;
} 
```

我在这里做错了吗？就目前而言，ALAsset 缩略图的清晰度太低，同时，我不需要整个全分辨率。现在一切正常，但调整大小需要一些时间。这只是一个必然的结果吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:04:52.763

调整图像大小的必然结果是需要一些时间。多少取决于设备、资产的分辨率和资产的格式。但是你对此没有任何控制权。但是您确实可以控制调整大小的位置。我怀疑现在您正在主线程中调整图像的大小，这将导致 UI 在您调整大小时停止。做足够多的图片，你的应用程序就会显示挂起的时间足够长，以至于用户会离开并做其他事情（也许查看 App Store 中的竞争应用程序）。

您应该做的是调整主线程的大小。在 iOS 4 及更高版本中，这变得更加简单，因为您可以使用 Grand Central Dispatch 来调整大小。您可以从上面获取原始代码块并将其包装在这样的块中：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
  ALAssetRepresentation *rep = [[dict objectForKey:@"assetObject"] defaultRepresentation];

  CGImageRef iref = [rep fullResolutionImage];
  if (iref) 
  {
      CGRect screenBounds = [[UIScreen mainScreen] bounds];

      __block UIImage *previewImage;
      __block UIImage *largeImage;

      if([rep orientation] == ALAssetOrientationUp) //landscape image
      {
          largeImage = [[UIImage imageWithCGImage:iref] scaledToWidth:screenBounds.size.width];
          previewImage = [[UIImage imageWithCGImage:iref] scaledToWidth:300];
      }
      else  // portrait image
      {
          previewImage = [[[UIImage imageWithCGImage:iref] scaledToHeight:300] imageRotatedByDegrees:90];
          largeImage = [[[UIImage imageWithCGImage:iref] scaledToHeight:screenBounds.size.height] imageRotatedByDegrees:90];
      }
      dispatch_async(dispatch_get_main_queue(), ^{
        // do what ever you need to do in the main thread here once your image is resized.
        // this is going to be things like setting the UIImageViews to show your new images
        // or adding new views to your view hierarchy
      });
    }
}); 
```

你必须以这种方式思考一些不同的事情。例如，您现在已经将过去的单个步骤分解为多个步骤。在此之后运行的代码将在图像调整大小完成之前或在您实际对图像执行任何操作之前运行，因此您需要确保您对这些图像没有任何依赖关系，否则您可能会崩溃。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-08T13:18:13.053

一个迟到的答案，但对于那些在这个问题上磕磕绊绊的人，您可能需要考虑使用 .而`fullScreenImage`不是`fullResolutionImage`. `defaultRepresentation`它通常要小得多，但仍然足够大，可以为较大的缩略图保持良好的质量。

# linux - 通过我的域重定向远程域

> ID：10085517
> 
> 赞同：0
> 
> 时间：2012-04-10T08:37:34.637
> 
> 标签：linux, dns, whm

我有一个网站，可以说它叫做 www.supersite.com。现在，我有一个名为 www.subsite.com 的网站。我想调用子站点返回超级站点上的内容，但保留子站点的 url。

现在，为了更有趣，对子站点唯一需要的更改是：将 www.subsite.com A 记录更改为 {超级站点的 IP}

我对超级站点有完全的控制权，所以如果它需要任何类似的配置，都可以完成。

保重，李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:05:37.957

这应该有效：

让`A`记录`www.subsite.web`指向运行的*同一*`www.supersite.web`台机器。

然后在运行机器的 Apache 配置文件中，使用 Apache 的指令为`www.supersite.web`subsite 和 supersite 别名：`ServerAlias`

```
<VirtualHost *:80>
  ServerName www.supersite.web
  ServerAlias www.subsite.web
</VirtualHost> 
```

阅读有关[ServerAlias](http://httpd.apache.org/docs/2.0/mod/core.html#serveralias)和[VirtualHost](http://httpd.apache.org/docs/2.0/vhosts/)的更多信息。

# jquery - 如何使用 jQuery 的 getScript 运行 processing.js

> ID：10085520
> 
> 赞同：0
> 
> 时间：2012-04-10T08:37:59.457
> 
> 标签：jquery, processing, processing.js, getscript

我制作了一个处理草图，我想将其包含在我的博客中。

像这样推荐的方法很好用：

```
<script src="js/libs/processingjs.js"></script> 
```

如果页面上有草图，我只想加载 processingjs，我想使用 jQuery 的 getScript 来实现。但是，当我运行此代码时：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
    $(function() {
        $.getScript('js/libs/processingjs.js');
    });
</script> 
```

处理草图将不会被渲染。应该不需要回调，因为处理将自行运行。我的网络检查器显示文件已加载，但我没有看到草图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:01:32.960

是否有可能处理.js 的构建方式在 document.ready 之后无法加载？（只是这种不良做法的一个例子是使用document.write）所以当它包含在html中时它可以工作，但如果它稍后加载则不行？如果您自己添加脚本标签会发生什么：

```
var script = document.createElement("script");
script.src = "/js/libs/processingjs.js";
var head = document.getElementsByTagName("head")[0];
head.appendChild(script); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T22:58:10.743

Flöcsy 的建议对我不起作用。看来，每当我 ajax 脚本时，我都需要指定脚本来加载草图（而不是只搜索它们的脚本）。这是我现在使用的代码：

```
//processing
if($('.sketch').length) {
    $.getScript("processingjs.js", function() {
        $('.sketch').each(function() {
            Processing.loadSketchFromSources(this, [$(this).data('processing-sources')]);
        });
    });
} 
```

# java - 使用 JAVA 播放媒体文件

> ID：10085522
> 
> 赞同：3
> 
> 时间：2012-04-10T08:38:05.990
> 
> 标签：java, jmf, vlcj

我想构建一个安全的 JAVA 应用程序，它：

1.  播放 *.mp4 或其他格式的高清媒体文件（全屏模式 1920x1080）
2.  将事件绑定添加到小程序（我将使用触摸屏监视器）

我尝试了很多搜索，但只找到了 JMF（VLCJ 等）的过时示例。所以我想让你问从哪里开始构建这个小程序。我可以包含哪些库。

我在这里找到了一个类似的项目：[Media Shuffle](http://java-apps.org/content/show.php/Media+Shuffle?content=148788) 但我希望我的媒体文件位于一个文件夹中，并且它们作为图标出现在应用程序中，这些图标启动选定的视频（VLC 全屏或其他跨平台媒体播放器）以在第一次触摸时播放。第二次触摸必须停止播放器并转到主页。

请分享您的想法，我该如何做到这一点。任何代码示例都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T20:59:38.360

我会推荐 vlcj，因为我确信它具有您可能需要或拥有的所有格式。它一点也不过时，而且很容易上手。如果您想以图形方式显示视频，我认为您找不到像您这样简单的说明提及，但如果您组织我将提及并更深入地解释的所有步骤，您会发现 vlcj 是处理此类媒体的最佳选择（在我看来）。我也喜欢并推荐 JavaFx，因为您的效果可以用它来做，但对我来说，在这些东西中设置和编码太难了。

所以，让我们开始吧。首先，我想说我已经在基于 Swing 的应用程序（在 Windows 中）中实现了 vlcj，但这不应该让您感到难过，因为对于您提到的即时弹出播放器，我们可以制作一个 jdialog并将视频表面放置在其 contentPane 中。

脚步

1）所以应该做的第一件事是下载 vlc 媒体播放器（我们需要在 32 位或 64 位计算机环境中播放的 32 位版本）。我有一个糟糕的月份试图配置为什么我的应用程序没有加载所需的库成功并发现当您运行 jar 可执行文件时，它在 32 位 jvm 上运行（在 eclipse 中运行在 64 位 jvm 中，一切正常。这就是我们需要 32 位版本的原因），而我有 64 位本机库从加载。无论如何，如果您下载并安装 32 位 vlc 媒体播放器，请在 MyProject 中创建一个文件夹以包含您的项目（可以说“C：/MyProject”）创建另一个文件夹并将其称为“Needed”（这里我们将放置所有vlcj 所需的库才能正常工作）。现在从 C 的内容：\Program Files (x86)\VideoLAN\VLC 复制插件目录和 4 个 dll（axvlc.dll、libvlc.dll、libvlccore.dll、npvlc.dll）并将它们粘贴到您需要的文件夹中

2）现在，如果您在 Eclipse IDE 或类似环境中工作，则需要在项目中创建一个文件夹（比如说“lib”）并在其中创建另一个文件夹（将其命名为“jars”）。在 jars 文件夹中放置以下 jars： jna-3.5.1.jar、platform-3.5.1.jar、vlcj-2.2.0.jar。您可以从 vlcj google 项目中找到这些 jars。然后将它们包含到您的类路径中（选择它们并右键单击-> 添加到构建路径或转到项目属性->Java 构建路径并添加这 3 个 jar）。在我们开始使用播放器设置进行任何编码之前，这就是设置。

3）你必须在开始使用之前加载 vlcj。我只是使用这段代码来实现它（我会很快解释它，不要担心）。

```
public void LoadLibrary(){
    SwingWorker loadWorker;     

    loadWorker = new SwingWorker(){

        @Override
        protected Object doInBackground() throws Exception {
            // TODO Auto-generated method stub

            Thread.sleep(2000);

            path = new File("").getAbsolutePath().toString();
            path = path.replace(".", "");
            path = path.replace("\\", "//");
            path = path+"//Needed";

            if(RuntimeUtil.isWindows()){
                NativeLibrary.addSearchPath(
                        "libvlc",path

                            );
                            Native.loadLibrary(RuntimeUtil.getLibVlcLibraryName(), LibVlc.class);

                    }
            else if(RuntimeUtil.isNix()){
                    NativeLibrary.addSearchPath(
                            "libvlc",path

                            );
            }

            mediaPlayerFactory = new MediaPlayerFactory();
            player = mediaPlayerFactory.newEmbeddedMediaPlayer();
            CanvasVideoSurface videoSurface = mediaPlayerFactory.newVideoSurface(canvas);
            player.setVideoSurface(videoSurface);

            return null;
        }

    };
    loadWorker.execute();

} 
```

所以我要做的是为基于 Swing 的应用程序创建一个线程，因为如果您的媒体画布不可显示并且构造函数中的所有内容在其代码完成后完全构建，则您无法播放媒体。这意味着在制作播放器之前，我们应该首先为我们的构造函数创建一个延迟（我的是 2 秒）来结束他的工作，我们的 JFrame（或 jWindow 或 jDialog 等）变得可显示。接下来我动态计算我的路径，采用我的可运行 jar 的路径（注意：不是来自工作空间内部Eclipse）并进入Needed文件夹以实现所需的本机库。在if语句中，我告诉系统在我计算的特定路径中查找libvlc.dll，然后加载它，从而向前迈出一步来播放媒体文件。在 if-else 语句之外，我实际上创建了我的播放器并为其 VideoSurface 放置画布（画布是 Canvas java.awt 对象我使用 WindowsCanvas 因为我只在 Windows 中工作，你可以为 linux 或 mac 找到类似的画布（不用担心那！））在 Swing-Worker 字段（线程）之外，我只是告诉线程要执行（作为调用函数指令很重要）。

4）要播放文件，我只需在我的应用程序中的某个位置使用一个按钮，每次按下它时调用一个动作事件，以便我们在其中执行一些操作。例如，我制作一个 JFileChooser 来从中选择一个媒体文件。您可以轻松搜索对于它，但这是我的代码：

```
final JFileChooser chooser = new JFileChooser();

            FileNameExtensionFilter filter0 = new FileNameExtensionFilter(".wav", "wav");
            FileNameExtensionFilter filter1 = new FileNameExtensionFilter(".mp3","mp3");
            FileNameExtensionFilter filter2 = new FileNameExtensionFilter(".mpg","mpg");
            FileNameExtensionFilter filter3 = new FileNameExtensionFilter(".mp4","mp4");
            FileNameExtensionFilter filter4 = new FileNameExtensionFilter(".avi","avi");
            FileNameExtensionFilter filter5 = new FileNameExtensionFilter(".flv","flv");
            FileNameExtensionFilter filter6 = new FileNameExtensionFilter(".wmv","wmv");
            FileNameExtensionFilter filter7 = new FileNameExtensionFilter(".3gp", "3gp");
            FileNameExtensionFilter filter8 = new FileNameExtensionFilter(".swf", "swf");
            FileNameExtensionFilter filter9 = new FileNameExtensionFilter(".mkv", "mkv");
            FileNameExtensionFilter filter10 = new FileNameExtensionFilter(".flac", "flac");
            FileNameExtensionFilter filter11 = new FileNameExtensionFilter("Music & Videos","wav","mp3","mpg","mp4","avi","flv","wmv","3gp","swf","mkv","flac","VOB");
            FileNameExtensionFilter filter12 = new FileNameExtensionFilter("Music","wav","mp3","flac");
            FileNameExtensionFilter filter13 = new FileNameExtensionFilter(".VOB", "VOB");
            FileNameExtensionFilter filter14 = new FileNameExtensionFilter("Videos","mpg","mp4","avi","flv","wmv","3gp","swf","mkv","VOB");

            chooser.setFileFilter(filter14);
            chooser.setFileFilter(filter2);
            chooser.setFileFilter(filter3);
            chooser.setFileFilter(filter4);
            chooser.setFileFilter(filter5);
            chooser.setFileFilter(filter6);
            chooser.setFileFilter(filter13);
            chooser.setFileFilter(filter7);
            chooser.setFileFilter(filter8);
            chooser.setFileFilter(filter9);
            chooser.setFileFilter(filter12);
            chooser.setFileFilter(filter0);
            chooser.setFileFilter(filter1);
            chooser.setFileFilter(filter10);
            chooser.setFileFilter(filter11);   

            int returnVal = chooser.showOpenDialog(getParent());
            if(returnVal == JFileChooser.APPROVE_OPTION) {
                System.out.println("You chose to open this file: " +
                chooser.getSelectedFile().getName());
                File myfile1 = chooser.getSelectedFile();
                myfilepath1 = chooser.getSelectedFile().getAbsolutePath();
}

        player.startMedia("file:///"+myfilepath1);
                player.pause(); 
```

这些文件过滤器是 vlcj 可以为你播放的一些媒体文件类型。我所做的是打开一个文件对话框以从中选择一个文件，如果我选择一个文件，我会保存它的路径（用于说明 vlcj 在哪里寻找它）。

5）现在播放文件你只需要输入以下代码：

```
player.play(); 
```

也许在另一个按钮的另一个动作事件中。

6）如果你写完这些你所要做的就是将你的项目导出到一个可运行的jar文件到你首先创建的MyProject文件夹中并运行它（注意双击它（不是从控制台（否则它将以64位运行） jvm 并且您不希望那样，因为您有 32 位本机并且 vlcj 不接受这些冲突）））

总之，我不得不说这些步骤对我有用。我希望它们能帮助你在你的应用程序开发中走得更远。

问候， PeGinnOS

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T08:45:13.387

首先你必须

// 创建一个播放器来播放 URL 中指定的媒体

```
Player mediaPlayer = Manager.createRealizedPlayer( mediaURL ); 
```

现在

```
mediaPlayer.start(); // start playing the media clip 
```

我希望它有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T20:12:54.340

VLCJ 并没有过时，它正在积极开发，并且在它可以实现的目标方面非常灵活和强大。我在我的应用程序中使用它来一次显示应用程序内的多个视频流，以及同时执行诸如文本覆盖之类的操作。有时这样做很棘手，但绝对有可能。

这里有许多基本的（最新的）示例可以帮助您开始使用[VLCJ](http://code.google.com/p/vlcj/wiki/SimpleExamples)。

# email - 使用 ssl 的邮件的带宽开销

> ID：10085530
> 
> 赞同：2
> 
> 时间：2012-04-10T08:39:13.163
> 
> 标签：email, encryption, ssl

我一直在阅读 HTTP 协议中的加密开销可以忽略不计。SMTP 也一样吗？

如果我发送加密邮件，带宽消耗会显着增加吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:32:25.577

几年前我做了一个研究项目。1700 个数据点改变了我们能想到的每个参数，包括 SSL 与明文。我们发现，令我惊讶的是，在实际的 Internet 链接上，SSL 的速度是纯文本的 33%。我希望它慢得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T15:04:49.260

有太多的依赖项和变量、密钥大小、链长度、使用的协议、会话密钥（重新）协商、时间问题等等等等。最好使用像 Wireshark 这样的良好数据包分析器进行测试。我不会说开销可以忽略不计，尤其是在您发送许多小消息时。在这种情况下，您可能会考虑改为创建隧道，以避免初始开销。密钥重新谈判也将发挥作用。

为了最大限度地减少 SSL 流量，您还可以考虑使用 ECC，使用流密码、单一证书链等，但我建议您仅在*绝对*必要的情况下采用该方向，因为这*将*是一条更复杂和危险的路线。

[编辑] 如果您发送 400K 的大消息，那么我认为开销不会那么大。密文大小与纯文本大小不会有太大差异，因此开销最小化。

# java - Java EE 项目中的服务层是否需要通过 DAO 层与实体对话？

> ID：10085532
> 
> 赞同：5
> 
> 时间：2012-04-10T08:39:21.747
> 
> 标签：java, ejb, dao

我正在阅读有关 EJB 3.0 的[这篇文章](http://www.ibm.com/developerworks/java/library/j-ejb3jpa/index.html)，其中作者描述了一种架构，其中服务层通过实现为无状态会话 bean 的 DAO 与实体对话。

我试图理解为什么我们需要这个附加层。为什么服务层不能直接与实体对话？我想到的一个想法是 - 易于测试。我们可以通过模拟 DAO 轻松测试服务层。

这是唯一的原因，还是还有其他原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T08:44:45.100

这个想法是将业务逻辑（或服务层）与实际的持久性策略**解耦。**例如，您的实体可以存储在平面文件或数据库中。您应该能够在不影响业务层的情况下更改此持久性策略。

> 服务层通过 DAO 与实体对话

这句话有点模棱两可。在 EJB 3.0 中，业务实体是 POJO。业务层可以使用它们，数据访问层也可以使用它们。业务层直接与业务实体“对话”。但它也与数据访问层对话。数据访问层主要负责加载和保存实体。

交易分界是另一个需要处理的问题。在 EJB 3.0 中，业务层独立于所选的持久性策略来划分事务。数据访问层和业务实体应该执行业务层的事务。

> 我们可以通过模拟 DAO 轻松测试服务层。

是的。可以使用模拟数据访问层来测试业务层。数据访问层可以在没有业务层的情况下进行测试。同样，这很容易，因为业务实体是任何层都可以使用的 POJO。数据访问层所需的信息是通过注解提供的，注解与业务层无关，但不会从业务角度对业务实体的建模施加约束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T09:03:18.353

[DAO](http://en.wikipedia.org/wiki/Data_access_object)是关于如何使用对象访问数据库的抽象。在 DAO 的原始实践中，首先有一个接口定义了您期望从数据库中获得的操作：

```
interface ModelDao {
  Model load(Long id);
  Long save(Model object);
} 
```

可以是通用的，也可以以任何适合您设计的方式使用。除了接口的高度**可测试性**之外，DAO 模式还增加了另一个优势，即现在您可以使用不同的*技术*实现相同的 DAO 模式。随着时间的推移，您可能需要从 EJB 切换到 Spring JDBC 或任何其他*更改*。

虽然这一切都发生了，但服务层仍然只能通过*DAO 接口*看到数据层。实现总是从服务层封装的。此外，它还通过*mocking*等机制增加了服务层的*可测试性*。

 *如果服务层直接开始处理数据层，这意味着服务层变得*特定于实现*，这降低了模块化和关注点的耦合，除了使仅针对业务逻辑测试服务层变得更加困难之外。

最后但同样重要的是，虽然坚持最初的做法总是最好的，但这取决于你的产品/项目的规模和意图来采用这种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T09:05:55.793

> 我想到的一个想法是 - 易于测试

不，这不仅仅是为了便于测试 DAO 层。在这种情况下，DAO 的目的是分离关注点。

@ewernli 和 @nobeh 已经解释了 DAO 层等的目的。我想补充一下，这是解决问题的方法之一。而是在 Java 世界中，这种使用显式 DAO 层的方法已经存在了很长一段时间。有可以实现的替代方法。以 Ruby/RoR 世界中的[ActiveRecord](http://en.wikipedia.org/wiki/Active_record_pattern)为例。

> 为什么服务层不能直接与实体对话？

是的，您可以设计您的应用程序，使服务层直接与实体对话。有一些人反对使用 DAO 并建议使用[领域驱动设计](http://www.javacodegeeks.com/2011/02/domain-driven-design-spring-aspectj.html)。

我个人对拥有不同层持久性的整个想法的看法有点烦人。在您指出的方法中，实体仅充当数据结构或 blob 来存储信息（getter 和 setter）。大多数时候，它们不添加业务逻辑。*

# iphone - 在 iphone 中使用 url 编码使用 %2b 之前添加 +

> ID：10085533
> 
> 赞同：7
> 
> 时间：2012-04-10T08:39:22.633
> 
> 标签：iphone, objective-c

我有一个应用程序，单击按钮我传递我的服务器 api 方法，该方法调用 JSON post 方法并将数据保存到服务器数据库。这里我将我的手机号码和紧急号码保存到服务器数据库。我的手机号码是字符串格式.在我的手机号码字符串变量中，我的手机号码正在保存，格式为“+90-9491491411”。我输入+，然后输入代码，然后输入数字，但是当我发送到服务器数据库时，我正在删除- 并将否发送到数据库，但问题出在我的服务器数据库中 + 没有输入我正在输入的移动设备。可能是什么问题。我正在使用 POST 方法发送请求。这是我的代码

```
-(void)sendRequest
{

    NSString *newstring = txtMobile.text;
    mobileValue = [newstring stringByReplacingOccurrencesOfString:@"-" withString:@""];
    NSLog(@"%@",mobileValue);

    NSString *newString1 = txtemergencyprovider.text;
    emergencyNumber = [newString1 stringByReplacingOccurrencesOfString:@"-" withString:@""];

        NSLog(@"%@",emergencyNumber);
    if ([txtEmail.text  isEqualToString:@""])
    {
        post = [NSString stringWithFormat:@"CommandType=new&ApplicationType=%d&FullName=%@&Mobile=%@&EmergencymobileNumber=%@&Latitude=%f&Longitude=%f&City=%@&MobileModel=Apple",applicationtype,txtFullname.text,mobileValue,emergencyNumber,latitude,longitude,txtCity.text];
        NSLog(@"%@",post);
    }
    else {
        post = [NSString stringWithFormat:@"CommandType=new&ApplicationType=%d&FullName=%@&Mobile=%@&EmergencymobileNumber=%@&Latitude=%f&Longitude=%f&City=%@&EmailAddress=%@&MobileModel=Apple",applicationtype,txtFullname.text,mobileValue,emergencyNumber,latitude,longitude,txtCity.text,txtEmail.text];
        NSLog(@"%@",post);
    }

    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES]; 
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]]; 
    NSLog(@"%@",postLength);
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init]; 
    [request setURL:[NSURL URLWithString:@"http://myapi?RequestType=NEW"]]; 
    [request setHTTPMethod:@"POST"]; 
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"]; 
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"]; 
    [request setHTTPBody:postData];

    NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

    if (theConnection) {
        webData = [[NSMutableData data] retain];
        NSLog(@"%@",webData);
    }
    else 
    {

    }

} 
```

//在我的手机号码和紧急号码变量中，我的号码是这种格式'+91986444711'，但是当在服务器数据库中输入值时+被删除。可能是什么问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-10T09:38:31.830

不幸的是，`NSString`'s`-stringByAddingPercentEscapesUsingEncoding:`不会将加号 ( `+`)转换为`%2B`，因为加号是用于分隔查询参数的有效 URL 字符。这通常意味着它被 Web 服务器转换为空格字符。

替换加号的最简单方法是使用`NSString`'s`stringByReplacingOccurrencesOfString:withString:`替换`+`with `%2B`。例如：

```
mobileValue = [mobileValue stringByReplacingOccurrencesOfString:@"+" withString:@"%2B"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T08:52:30.443

URL 中的加号（“+”）表示编码的空格（“”），您的服务器很可能会将其解释为空格。在发布之前将字符串中的加号字符更改为 %2B。有关 URL 编码的完整解决方案，请参阅这篇文章： http: [//madebymany.com/blog/url-encoding-an-nsstring-on-ios](http://madebymany.com/blog/url-encoding-an-nsstring-on-ios)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T09:23:25.360

加号表示 post 请求中的空格。您需要将加号转换为百分比转义字符。最简单的方法如下：

```
NSString* escapedMobileValue = [mobileValue stringByReplacingOccurencesOfString: @"+" withString: @"%2b"]; 
```

这将`+`变成`%2b`. 可能服务器会自动为您反转编码。

*（根据 mttrb 的评论编辑）*

# java - Java bean 类

> ID：10085536
> 
> 赞同：0
> 
> 时间：2012-04-10T08:39:38.767
> 
> 标签：java

Bean 类 /encapsulation 意味着变量应该是私有的 & getter & setter 应该是公共的。由于数据隐藏的原因。任何人都无法在外面访问此变量。

我的问题是：`使用 getter/setter 方法，我们可以从外部类访问/设置变量。那么为什么我们需要将该变量保持私有 && 我们如何判断这是数据隐藏？

实际上我喜欢得到一些解释，因为我不知道我正在做这样的项目。如果有任何错误或不清楚的问题，请原谅我。

请任何人解释这一点。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:43:40.000

我刚刚想到的几个原因：

1.  您可以控制变量的访问方式，例如，不允许`null`在其中设置无效值，`setter`甚至根本不允许设置器用于只读变量。
2.  您可以更改变量的结构，例如它的数据类型，并保持`setter`和`getter`定义不做任何更改，因此您可以更轻松地进行内部更改/重构，而不会影响类的所有用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:13:16.707

1) 通过这样做，您实际上是在公开变量值，但它封装了变量值的计算方式。有了这个，您可以根据您的要求在任何时间点更改变量值的计算方式。

2）这种表示方式有助于“[传输对象](http://www.javacamp.org/designPattern/transferobj.html)”设计模式。它说的是，您可以将所有变量塑造成单个对象并将其发送给客户端，而不是每次客户端要求一个时发送每个属性值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T08:52:39.070

getter / setter 定义类的可读/可写（或两者）属性。私有字段声明了此属性的一种可能的内部表示。

通过使用属性定义（getter 和 setter），您可以定义对该字段的访问权限，也可以在 setter 上添加约束。如果是集合，您可以确保仅提供不可修改的版本。

您还可以在重构期间委托将值检索委托给另一个类或对象，而无需更改协作对象。您可以更改内部数据类型，例如也可以构建数据类。

因此，您封装内部状态并提供访问权限。

记住不是everey字段需要getter和setter ;-)

# mysql - 这个sql代码有什么问题吗？

> ID：10085537
> 
> 赞同：0
> 
> 时间：2012-04-10T08:39:40.417
> 
> 标签：mysql, sql

```
CREATE DATABASE IF NOT EXISTS plaincart;
USE plaincart;

-- --------------------------------------------------------

-- 
-- Table structure for table `tbl_cart`
-- 

DROP TABLE IF EXISTS `tbl_cart`;
CREATE TABLE `tbl_cart` (
  `ct_id` int(10) unsigned NOT NULL auto_increment,
  `pd_id` int(10) unsigned NOT NULL default '0',
  `ct_qty` mediumint(8) unsigned NOT NULL default '1',
  `ct_session_id` char(32) NOT NULL default '',
  `ct_date` datetime NOT NULL default '0000-00-00 00:00:00',
  PRIMARY KEY  (`ct_id`),
  KEY `pd_id` (`pd_id`),
  KEY `ct_session_id` (`ct_session_id`)
) TYPE=MyISAM AUTO_INCREMENT=58 ;

-- --------------------------------------------------------

-- 
-- Table structure for table `tbl_category`
-- 

DROP TABLE IF EXISTS `tbl_category`;
CREATE TABLE `tbl_category` (
  `cat_id` int(10) unsigned NOT NULL auto_increment,
  `cat_parent_id` int(11) NOT NULL default '0',
  `cat_name` varchar(50) NOT NULL default '',
  `cat_description` varchar(200) NOT NULL default '',
  `cat_image` varchar(255) NOT NULL default '',
  PRIMARY KEY  (`cat_id`),
  KEY `cat_parent_id` (`cat_parent_id`),
  KEY `cat_name` (`cat_name`)
) TYPE=MyISAM AUTO_INCREMENT=18 ;

-- 
-- Dumping data for table `tbl_category`
-- 

INSERT INTO `tbl_category` (`cat_id`, `cat_parent_id`, `cat_name`, `cat_description`, `cat_image`) VALUES (17, 13, 'Hunter X Hunter', 'Story about hunter and combat', '');
INSERT INTO `tbl_category` (`cat_id`, `cat_parent_id`, `cat_name`, `cat_description`, `cat_image`) VALUES (12, 0, 'Cars', 'Expensive and luxurious cars', 'dce08605333d805106217aaab7f93b95.jpg');
INSERT INTO `tbl_category` (`cat_id`, `cat_parent_id`, `cat_name`, `cat_description`, `cat_image`) VALUES (13, 0, 'Manga', 'It''s all about manga, yay....', '2a5d7eb60c1625144b3bd785bf70342c.jpg');
INSERT INTO `tbl_category` (`cat_id`, `cat_parent_id`, `cat_name`, `cat_description`, `cat_image`) VALUES (14, 12, 'Volvo', 'Swedish luxury car', '');
INSERT INTO `tbl_category` (`cat_id`, `cat_parent_id`, `cat_name`, `cat_description`, `cat_image`) VALUES (15, 12, 'Mercedes-Benz', 'Expensive but real good', '');
INSERT INTO `tbl_category` (`cat_id`, `cat_parent_id`, `cat_name`, `cat_description`, `cat_image`) VALUES (16, 13, 'Naruto', 'This is the story of Naruto and all his gang', '');

-- --------------------------------------------------------

-- 
-- Table structure for table `tbl_currency`
-- 

DROP TABLE IF EXISTS `tbl_currency`;
CREATE TABLE `tbl_currency` (
  `cy_id` int(10) unsigned NOT NULL auto_increment,
  `cy_code` char(3) NOT NULL default '',
  `cy_symbol` varchar(8) NOT NULL default '',
  PRIMARY KEY  (`cy_id`)
) TYPE=MyISAM AUTO_INCREMENT=5 ;

-- 
-- Dumping data for table `tbl_currency`
-- 

INSERT INTO `tbl_currency` (`cy_id`, `cy_code`, `cy_symbol`) VALUES (1, 'EUR', '&#8364;');
INSERT INTO `tbl_currency` (`cy_id`, `cy_code`, `cy_symbol`) VALUES (2, 'GBP', '&pound;');
INSERT INTO `tbl_currency` (`cy_id`, `cy_code`, `cy_symbol`) VALUES (3, 'JPY', '&yen;');
INSERT INTO `tbl_currency` (`cy_id`, `cy_code`, `cy_symbol`) VALUES (4, 'USD', '$');

-- --------------------------------------------------------

-- 
-- Table structure for table `tbl_order`
-- 

DROP TABLE IF EXISTS `tbl_order`;
CREATE TABLE `tbl_order` (
  `od_id` int(10) unsigned NOT NULL auto_increment,
  `od_date` datetime default NULL,
  `od_last_update` datetime NOT NULL default '0000-00-00 00:00:00',
  `od_status` enum('New', 'Paid', 'Shipped','Completed','Cancelled') NOT NULL default 'New',
  `od_memo` varchar(255) NOT NULL default '',
  `od_shipping_first_name` varchar(50) NOT NULL default '',
  `od_shipping_last_name` varchar(50) NOT NULL default '',
  `od_shipping_address1` varchar(100) NOT NULL default '',
  `od_shipping_address2` varchar(100) NOT NULL default '',
  `od_shipping_phone` varchar(32) NOT NULL default '',
  `od_shipping_city` varchar(100) NOT NULL default '',
  `od_shipping_state` varchar(32) NOT NULL default '',
  `od_shipping_postal_code` varchar(10) NOT NULL default '',
  `od_shipping_cost` decimal(5,2) default '0.00',
  `od_payment_first_name` varchar(50) NOT NULL default '',
  `od_payment_last_name` varchar(50) NOT NULL default '',
  `od_payment_address1` varchar(100) NOT NULL default '',
  `od_payment_address2` varchar(100) NOT NULL default '',
  `od_payment_phone` varchar(32) NOT NULL default '',
  `od_payment_city` varchar(100) NOT NULL default '',
  `od_payment_state` varchar(32) NOT NULL default '',
  `od_payment_postal_code` varchar(10) NOT NULL default '',
  PRIMARY KEY  (`od_id`)
) TYPE=MyISAM AUTO_INCREMENT=1001 ;

-- --------------------------------------------------------

-- 
-- Table structure for table `tbl_order_item`
-- 

DROP TABLE IF EXISTS `tbl_order_item`;
CREATE TABLE `tbl_order_item` (
  `od_id` int(10) unsigned NOT NULL default '0',
  `pd_id` int(10) unsigned NOT NULL default '0',
  `od_qty` int(10) unsigned NOT NULL default '0',
  PRIMARY KEY  (`od_id`,`pd_id`)
) TYPE=MyISAM;

-- --------------------------------------------------------

-- 
-- Table structure for table `tbl_product`
-- 

DROP TABLE IF EXISTS `tbl_product`;
CREATE TABLE `tbl_product` (
  `pd_id` int(10) unsigned NOT NULL auto_increment,
  `cat_id` int(10) unsigned NOT NULL default '0',
  `pd_name` varchar(100) NOT NULL default '',
  `pd_description` text NOT NULL,
  `pd_price` decimal(9,2) NOT NULL default '0.00',
  `pd_qty` smallint(5) unsigned NOT NULL default '0',
  `pd_image` varchar(200) default NULL,
  `pd_thumbnail` varchar(200) default NULL,
  `pd_date` datetime NOT NULL default '0000-00-00 00:00:00',
  `pd_last_update` datetime NOT NULL default '0000-00-00 00:00:00',
  PRIMARY KEY  (`pd_id`),
  KEY `cat_id` (`cat_id`),
  KEY `pd_name` (`pd_name`)
) TYPE=MyISAM AUTO_INCREMENT=22 ;

-- --------------------------------------------------------

-- 
-- Table structure for table `tbl_shop_config`
-- 

DROP TABLE IF EXISTS `tbl_shop_config`;
CREATE TABLE `tbl_shop_config` (
  `sc_name` varchar(50) NOT NULL default '',
  `sc_address` varchar(100) NOT NULL default '',
  `sc_phone` varchar(30) NOT NULL default '',
  `sc_email` varchar(30) NOT NULL default '',
  `sc_shipping_cost` decimal(5,2) NOT NULL default '0.00',
  `sc_currency` int(10) unsigned NOT NULL default '1',
  `sc_order_email` enum('y','n') NOT NULL default 'n'
) TYPE=MyISAM;

-- 
-- Dumping data for table `tbl_shop_config`
-- 

INSERT INTO `tbl_shop_config` (`sc_name`, `sc_address`, `sc_phone`, `sc_email`, `sc_shipping_cost`, `sc_currency`, `sc_order_email`) VALUES ('PlainCart - Just a plain online shop', 'Old warehouse under the bridge,\r\nWater Seven, Grand Line', '777-FRANKY', 'franky@tomsworkers.com', 5.00, 4, 'y');

-- --------------------------------------------------------

-- 
-- Table structure for table `tbl_user`
-- 

DROP TABLE IF EXISTS `tbl_user`;
CREATE TABLE `tbl_user` (
  `user_id` int(10) unsigned NOT NULL auto_increment,
  `user_name` varchar(20) NOT NULL default '',
  `user_password` varchar(32) NOT NULL default '',
  `user_regdate` datetime NOT NULL default '0000-00-00 00:00:00',
  `user_last_login` datetime NOT NULL default '0000-00-00 00:00:00',
  PRIMARY KEY  (`user_id`),
  UNIQUE KEY `user_name` (`user_name`)
) TYPE=MyISAM AUTO_INCREMENT=4 ;

-- 
-- Dumping data for table `tbl_user`
-- 

INSERT INTO `tbl_user` (`user_id`, `user_name`, `user_password`, `user_regdate`, `user_last_login`) VALUES (1, 'admin', '43e9a4ab75570f5b', '2005-02-20 17:35:44', '2005-03-02 21:00:14');
INSERT INTO `tbl_user` (`user_id`, `user_name`, `user_password`, `user_regdate`, `user_last_login`) VALUES (3, 'webmaster', '026cf3fc6e903caf', '2005-03-02 17:52:51', '0000-00-00 00:00:00'); 
```

当我导入/查询这些代码时，它给了我这个错误->

> 错误
> 
> SQL查询：
> 
> CREATE TABLE `tbl_cart`(
> `ct_id`int( 10 ) unsigned NOT NULL AUTO_INCREMENT ,
> `pd_id`int( 10 ) unsigned NOT NULL default '0',
> `ct_qty`mediumint( 8 ) unsigned NOT NULL default '1',
> `ct_session_id`char( 32 ) NOT NULL default '',
> `ct_date`datetime NOT NULL default '0000-00-00 00:00:00',
> 主键 ( `ct_id`) ,
> 键`pd_id`( `pd_id`) ,
> 键`ct_session_id`( `ct_session_id`)
> ) 类型 = MYISAM AUTO_INCREMENT = 58;

MySQL 说：文档

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 10 行的 'TYPE=MyISAM AUTO_INCREMENT=58' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T08:45:32.183

在不知道您的 PHP/MySQL 版本的情况下，这是一个猜测，但最新版本的 mySQL 替换`TYPE`为`ENGINE`尝试替换所有实例。例如：

```
ENGINE=MyISAM AUTO_INCREMENT=58; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:45:40.500

更改`TYPE=MyISAM`为`ENGINE= MYISAM`

顺便说一句：我认为没有必要设置初始增量，因此您也可以尝试删除这些`AUTO_INCREMENT=58`语句

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T08:45:48.890

不要在表定义中定义 AUTO_INCREMENT，而是在创建后使用 alter table 语句：

```
alter table "tbl_cart" auto_increment=58; 
```

[http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

# bash - 检查给定的 strftime 格式是否与日期匹配

> ID：10085538
> 
> 赞同：1
> 
> 时间：2012-04-10T08:39:45.097
> 
> 标签：bash, date, awk, gawk, strftime

我有 strftime 格式的时间，比如说`(%Y-%m-%d %H:%M:%S)`和一个应该包含这种数据的文件，例如`(2012-02-11 17:15:00)`. 我需要检查给定的模式是否真的与数据匹配。如何解决这个问题？啊，约会？

**编辑：** 更多信息：用户输入 strftime 格式，比如说输入。然后他输入一个应该包含这些日期的文件。我需要确保这些数据是有效的（他没有犯错）。所以我需要检查输入文件中的行，看看是否有与给定模式匹配的数据。例子：

*   用户输入 strftime 格式：`(%Y-%m-%d %H:%M:%S)`

    输入文件：`(2012-02-11 17:15:00) long sentence`

    ***有效的***

*   用户输入 strftime 格式：`Date[%Y.%m.%d %H:%M:%S]`

    输入文件：`Date-2012.02.11 17:15:00- long sentence`

    ***无效的***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:33:23.100

如果您允许使用外部辅助二进制文件，我已经编写[了 dateutils](http://github.com/hroptatyr/dateutils)来批处理日期和时间数据。

```
dconv -q -i '(%Y-%m-%d %H:%M:%S)' <<EOF
not a match: 2012-04-10 12:00:00
a match: (2012-04-10 13:00:00)
EOF 
```

会给

```
2012-04-10T13:00:00 
```

`-i`是输入格式，`-q`禁止警告。并`dconv`尝试将输入行转换为输出行（在这种情况下，它将匹配行转换为 ISO 标准格式。

因此，使用此方法，如果输入行数等于输出行数，则文件完全匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:04:22.873

If you want to check current datetime:

```
echo "(2012-02-11 17:15:00)" | grep "$(date "+%Y-%m-%d %H:%M:%S")" 
```

If some other you need GNU date (-d option). This works for me:

```
echo "(2012-02-11 17:15:00)" | 
grep "$(date -d "2012-02-11 17:15:00"  "+%Y-%m-%d %H:%M:%S")" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T11:05:16.513

我会对此采取蛮力的方法：用`%X`相应的正则表达式替换任何说明符，然后您可以过滤掉与生成的正则表达式不匹配的行：

```
user_format="%Y-%m-%d"
awk -v fmt_string="$user_format" '
  BEGIN {
    gsub(/[][(){}?|*+.]/ "\\&", fmt_string)  # protect any regex-special chars
    gsub(/%Y/, "([0-9]{4})", fmt_string)
    gsub(/%m/, "(0[1-9]|1[012])", fmt_string)
    gsub(/%d/, "(0[1-9]|[12][0-9]|3[01])", fmt_string)
    # and so on
  }
  $0 !~ "^" fmt_string {print "line " NR " does not match: " $0}
' filename 
```

# java - 主机名错误异常

> ID：10085542
> 
> 赞同：6
> 
> 时间：2012-04-10T08:40:03.870
> 
> 标签：java, https

我的主机名错误异常。我在我的程序中使用了[此代码](http://pastie.org/3760637)（从某个链接获取）。我的程序运行良好。我的问题是它足够安全吗？（因为它没有验证证书链）

```
public class Host {

    public String subscribe() throws Exception {   
        String resp = "";
        String urlString="https://xxx.xxx.xx.xx:8443/WebApplication3/NewServlet";
        URL url;
        URLConnection urlConn;
        DataOutputStream printout;
        DataInputStream input;
        String str = "";
        int flag=1;

        try {
            HostnameVerifier hv = new HostnameVerifier() {
                public boolean verify(String urlHostName, SSLSession session) {
                    System.out.println("Warning: URL Host: " + urlHostName + " vs. "
                      + session.getPeerHost());
                    return true;
                }
            };

            trustAllHttpsCertificates();
            HttpsURLConnection.setDefaultHostnameVerifier(hv);

            url = new URL(urlString);
            urlConn = url.openConnection();
            urlConn.setDoInput(true);
            Object object;
            urlConn.setUseCaches(false);

            urlConn.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
            input = new DataInputStream(urlConn.getInputStream());

            while (null != ((str = input.readLine()))) {
                if (str.length() >0) {
                    str = str.trim();
                    if(!str.equals("")) {
                        //System.out.println(str);
                        resp += str;
                    }
                }
            }
            input.close();
        } catch ( MalformedURLException mue) { 
            mue.printStackTrace();
        } catch(IOException ioe) {
            ioe.printStackTrace();
        }
        return resp;
    }

    public static class miTM implements javax.net.ssl.TrustManager,
        javax.net.ssl.X509TrustManager {

        public java.security.cert.X509Certificate[] getAcceptedIssuers() {
            return null;
        }

        public boolean isServerTrusted(java.security.cert.X509Certificate[] certs) {
            return true;
        }

        public boolean isClientTrusted(java.security.cert.X509Certificate[] certs) {
            return true;
        }

        public void checkServerTrusted(java.security.cert.X509Certificate[] certs, String authType) throws java.security.cert.CertificateException {
            return;
        }

        public void checkClientTrusted(java.security.cert.X509Certificate[] certs, String authType) throws java.security.cert.CertificateException {
            return;
        }
    }

    private static void trustAllHttpsCertificates() throws Exception {

        //  Create a trust manager that does not validate certificate chains:
        javax.net.ssl.TrustManager[] trustAllCerts = new javax.net.ssl.TrustManager[1];

        javax.net.ssl.TrustManager tm = new miTM();

        trustAllCerts[0] = tm;

        javax.net.ssl.SSLContext sc = javax.net.ssl.SSLContext.getInstance("SSL");

        sc.init(null, trustAllCerts, null);

        javax.net.ssl.HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T09:10:04.217

中的代码`miTM`实际上禁用了任何 SSL 安全检查，因此安全级别非常低（如果 SSL 证书损坏，您只会收到错误消息，但当证书与域不匹配时您不会收到错误消息）。

基本上，您尝试在没有任何安全性的情况下建立连接。如果这就是您想要的，那么解决方案可能“足够安全”，但最有可能的答案是“不”。

此类问题的正确解决方案是为此域创建匹配的证书。

不幸的是，当您的 HTTP 服务器使用“虚拟主机”（= 许多域名映射到同一个 IP 地址）时，这是不可能的。此问题的正确解决方案是获取您自己的 IP 地址。

如果您仍想尝试纯 Java 解决方案，请查看以下答案：[https ://stackoverflow.com/a/3293720/34088](https://stackoverflow.com/a/3293720/34088)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T09:34:04.443

为了使连接安全，您**必须**（至少）：

*   验证您信任证书，
*   验证主机名（除非您确定这是您可能信任的唯一且唯一的证书）。

您的代码在这两点上失败了：

*   您正在使用的`TrustManager`根本不检查证书（它从不抛出异常，而 API 期望它`CertificateException`在证书不受信任时抛出一种形式）。
*   您的主机名验证程序始终返回`true`.

要修复您的代码：

*   保留默认的信任管理器，或者使用您自己的信任存储和默认的`TrustManagerFactory`.
*   保留默认主机名验证程序。

您的问题的标题（“*主机名错误异常*”）和您的示例 URL`https://xxx.xxx.xx.xx:8443`似乎表明您正在连接到 IP 地址。

与某些浏览器不同，Java非常严格地遵循规范 ( [RFC 2818 )：](https://www.rfc-editor.org/rfc/rfc2818#section-3.1)

> 如果存在 dNSName 类型的 subjectAltName 扩展，则必须将其用作身份。否则，必须使用证书主题字段中的（最具体的）通用名称字段。尽管使用通用名称是现有的做法，但它已被弃用，并且鼓励证书颁发机构使用 dNSName 代替。
> 
> [...]
> 
> 在某些情况下，URI 被指定为 IP 地址而不是主机名。在这种情况下，iPAddress subjectAltName 必须出现在证书中，并且必须与 URI 中的 IP 完全匹配。

这意味着您不能只是将 IP 地址放在服务器证书中主题 DN 的公用名 (CN) 中。如果您使用的是 IP 地址，则它*必须*位于主题备用名称条目中。（从 Java 7 开始，`keytool`可以选择生成此类证书。）

您将在[此答案](https://stackoverflow.com/a/8444863/372643)中找到有关使用哪些命令的更多详细信息。

话虽如此，使用 IP 地址最多只能在测试环境中真正起作用。我认为任何商业 CA 都不会为您提供基于 IP 地址的证书。我建议设置 DNS 条目（即使它只是在`hosts`测试环境中的文件中）。

即使您没有使用 IP 地址，您也必须确保该证书对于您尝试联系服务器的主机名有效：如果您有主题备用名称条目，其中之一必须与主机名匹配; 否则，主机名必须在此证书的主题 DN 的 CN RDN 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T19:45:56.637

这是一种清理代码并保持安全的方法。我想代码连接到已知服务（可信）。要使 Java SSL 堆栈即使在主机名不匹配的情况下也能接受连接，最好的方法是将服务器证书添加到 JVM 信任库。

首先，您可以从浏览器中导出服务器证书并将其保存在磁盘上。在 Linux 中，您可以使用`openssl s_client -connect xxx.xxx.xx.xx:8443`ascii-armored 格式的服务器证书并将其复制/粘贴到文本文件中。

`jre/lib/security/cacerts`然后使用 keytool将服务器证书导入JKS 文件

```
keytool -import -alias myservice -file servercertificate.cer 
```

我更喜欢的另一个选择是，在更新 Java 时避免回归，是`cacerts`在您自己的位置复制并声明它，这要归功于`javax.net.ssl.trustStore`系统属性。

由于服务器证书在信任库中......它是受信任的，直到它过期。这通常用于自签名服务器证书。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T04:01:34.333

在java中很多次用来获取这种异常

问题可能是 ipconflict/ip-domain 不匹配/无效证书

我已经通过使用其适当的 IP 地址并安装证书来解决它。

# solr - 来自多个文件夹的 solr-index

> ID：10085544
> 
> 赞同：1
> 
> 时间：2012-04-10T08:40:11.777
> 
> 标签：solr, indexing

我正在尝试使用 solr 制作网络搜索应用程序，但我遇到了问题。问题是在我遵循的示例中，所有文件都在同一个文件夹中。但我想索引来自不同目录的文件（即给出根文件夹并索引所有子目录中的所有 xml 文件）。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T17:59:21.830

尝试 SimplePostTool 递归选项：

```
java -Dauto -Drecursive -jar post.jar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:59:41.433

在 shell 脚本中试试这个（未经测试）：

```
#!/bin/sh

FILES=$(find . -iname "*.xml")
URL=http://localhost:8983/solr/update

for f in $FILES; do
  echo "Posting $f"
  curl $URL --data-binary @$f -H 'Content-type:application/xml' 
  echo
done

#send the commit command to make sure all the changes are flushed and visible
curl $URL --data-binary '<commit/>' -H 'Content-type:application/xml'
echo 
```

将其放在您拥有 xml 文件的根文件夹中。

（我假设你有 linux 并且 'post.sh' 脚本是你遵循的例子）

# haskell - 将 a 类型转换为 char

> ID：10085547
> 
> 赞同：1
> 
> 时间：2012-04-10T08:40:24.990
> 
> 标签：haskell

我有

```
data Dictionary a = Empty
                  | Branch (a, Bool, Dictionary a) (Dictionary a)
                  deriving (Ord, Eq)

instance Show (Dictionary a) where show = showDict

showDict (Branch (val, e, dict) dict2) = "My dict is : " ++ val 
```

我知道这绝对是错误的，但我找不到如何写这个。在 showDict 函数中，val 的类型是一个但预期的类型是 [Char]。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T08:48:48.247

要`val`变成一个字符串，`show`它：

```
showDict (Branch (val, e, dict) dict2) = "My dict is : " ++ show val 
```

并且不要忘记类型约束`showDict`：

```
instance Show a => Show (Dictionary a) where show = showDict 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:07:20.710

instance (Show a) => Show (Dictionary a) where show = showDict

你必须告诉 a 属于可展示的类型类，否则你不能在 val 上使用 show 。

# java - 在 xmlunit 中，Diff.identical() 能否为 (xml1,xml2) 对返回 TRUE，而为 (xml2,xml1) 返回 FALSE？

> ID：10085548
> 
> 赞同：0
> 
> 时间：2012-04-10T08:40:28.827
> 
> 标签：java, xml, xmlunit

我正在使用 xmlunit 框架（我认为是 1.0 版，或者至少是 .jar 的清单所说的）。

我正在做的是这样的：

```
Diff diff=new Diff(xml1,xml2);
diff.overrideElementQualifier(new ElementNameAndAttributeQualifier());
diff.overrideDifferenceListener(new MyCustomDifferenceListener()}; 
```

当我`diff.identical()`使用 (xml1,xml2) 实例化的 Diff 运行该方法时，MyCustomDifferenceListener.differenceFound(Difference Difference) 中的断点被击中两次，而对于另一个订单，它被击中 3 次。

仅在一种情况下遇到的一个相关差异是（描述）：“预期节点类型为 '3' 但为 '1' - 在 /somenode[1]/element[1]/text()[1] 与 /某个节点[1]/元素[1]/子[196]"

2 个 xml 文件之间的区别是在最后一个 '\n' 字符之后，在关闭（然后是根节点）之前。

有谁知道为什么我只会在两种情况之一中得到区别？

PS我认为代码是 MyCustomDifferenceListener() 是无关紧要的，因为它不是发现差异的那个。

# php - 在自己的网站上集成论坛框架

> ID：10085550
> 
> 赞同：1
> 
> 时间：2012-04-10T08:40:33.070
> 
> 标签：php, database, forum

我想在我自己的网站上集成一些论坛，但问题是我必须找到解决方案将我的用户表与论坛框架用户表合并或连接，我的意思是我网站中的用户可以创建论坛，其他用户可以使用它. 我为找到具有良好集成 API 的好论坛框架进行了研究，但找不到，我尝试使用 phpBB 开源论坛，但该论坛的所有集成部分，仅关于登录用户或类似的东西。如果有人做过这种工作，请帮助我，哪个论坛工具最适合这种情况，我该如何思考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T08:43:50.557

香草论坛对此非常有效。Vanilla 2 具有单点登录功能，您可以为您的网站创建自己的插件：http: [//vanillaforums.org/docs/singlesignon](http://vanillaforums.org/docs/singlesignon)

# javascript - 在 Javascript 中访问远程窗口的 url

> ID：10085552
> 
> 赞同：1
> 
> 时间：2012-04-10T08:41:03.770
> 
> 标签：javascript, url, cross-server

我使用 window.open 方法打开一个新窗口到 Google 文档演示文稿：

```
NewWindow = window.open("https://docs.google.com/presentation/d/1Qs9......"); 
```

我想检索该 url 以了解它已更改（演示文稿的每张幻灯片都有不同的 url，我想查看用户是否更改了幻灯片），使用`NewWindow.location.href`

我得到的只是一个未定义的值。我可以改变href

```
NewWindow.location.href ="http://www.google.com"; //works 
```

我读过，如果您不在同一个域中，则不允许您访问远程窗口上的 href 或任何其他属性。

难道没有其他方法可以做到吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:52:11.633

有一种解决方法，但在 JavaScript 中没有。

标准解决方案是使用隐藏在您自己域的某个 URL 下运行的代理服务器将文档映射到您自己的域。

这样，您可以通过以下方式访问文档`https://your.doma.in/google/presentation/...`

一句警告：如果您在配置代理时犯了错误，破解者可能会滥用它来做一些令人讨厌的事情（比如试图破解 Google 或发送垃圾邮件；警察会来敲**你的**门）。

# c++ - Libtool 版本不匹配

> ID：10085554
> 
> 赞同：3
> 
> 时间：2012-04-10T08:41:18.187
> 
> 标签：c++, build, makefile, libtool

我已经下载了一些旧项目的源代码。我现在正在尝试构建它：

```
./bootstrap && ./configure 
```

它工作正常，但是：

```
make

/bin/sh ../libtool   --mode=compile g++ -DHAVE_CONFIG_H -I. -I..    -W -g -O2 -DDEBUG -MT rcclexer.lo -MD -MP -MF .deps/rcclexer.Tpo -c -o rcclexer.lo rcclexer.cpp
../libtool: line 415: CDPATH: command not found
libtool: Version mismatch error.  This is libtool 2.4.2, but the
libtool: definition of this LT_INIT comes from an older release.
libtool: You should recreate aclocal.m4 with macros from libtool 2.4.2
libtool: and run autoconf again. 
```

ps那个小项目页面：http: [//sourceforge.net/projects/rccparser/](http://sourceforge.net/projects/rccparser/)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T20:14:14.400

Something like:

```
autoreconf -fvi 
```

maybe? I'd hope `bootstrap` would take care of that though, but it looks like it doesn't.

# css - 设置 span 元素的百分比宽度

> ID：10085557
> 
> 赞同：15
> 
> 时间：2012-04-10T08:41:27.767
> 
> 标签：css, width, html

一个直截了当的问题.. 是否可以在 CSS 中为 span 标签设置宽度百分比？例如：

```
<span style="width: 50%">...</span> 
```

ETC..

在我的项目中，我目前正在使用 div，但当然在每个 div 标签之后都会插入一个换行符（我不想要）。所以最明显的解决方案是使用 span 标签而不是 div。但后来我无法定义跨度标签的宽度。至少不是以百分比的方式。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-10T08:43:57.490

将元素定义为内联块，您可以像块元素一样控制宽度和高度，同时使其与周围内容保持内联。

```
#element {
  display: inline-block;
  width: 50%;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T08:43:24.040

内联元素不能有尺寸。这样做，并且仍然保持内联，添加：

```
display: inline-block 
```

# android - 如何在 ListView 中实现自定义视图的上下文菜单？

> ID：10085559
> 
> 赞同：0
> 
> 时间：2012-04-10T08:41:29.780
> 
> 标签：android, listview, contextmenu

我正在处理 Android ICS 联系人移植。我想为starred(favorites) TAB 添加一个上下文菜单，但是该 Fragment 中的 ListView 非常特别。有一个普通的ListView，ListView中的每一项都有两个自定义的小View。我想实现，当用户长时间按下小视图时，它将为我显示一个上下文菜单。我该怎么办？请给我一个提示！非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:00:13.140

If you're using customized List-Items, you can register a specific callback-routine on your desired view. The place to do that is in your bindView() or getView() method.

```
TextView tt = (TextView) v.findViewById(R.id.text1);
TextView bt = (TextView) v.findViewById(R.id.text2);
tt.setOnLongClickListener(myLongOnClickListener); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T08:55:21.973

在你创建你的小视图的地方添加这个，

```
 registerForContextMenu(YourSmallView); 
```

在您的活动中，您可以处理上下文菜单

```
 @Override  
   public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {  
super.onCreateContextMenu(menu, v, menuInfo);  
    menu.setHeaderTitle("Context Menu");  
    menu.add(0, v.getId(), 0, "Action 1");  
    menu.add(0, v.getId(), 0, "Action 2");  
}  

 @Override  
   public boolean onContextItemSelected(MenuItem item) {  
        if(item.getTitle()=="Action 1"){
              function1(item.getItemId());
        }  
        else if(item.getTitle()=="Action 2"){
             function2(item.getItemId());
         }  
        else {
            return false;
        }  
    return true;  
    } 
```

或者你可以为你的视图设置一个长点击监听器

```
view.setOnLongClickListener(listener); 
```

# android - android 4.0 的 ViewBinder 投射错误

> ID：10085562
> 
> 赞同：0
> 
> 时间：2012-04-10T08:41:44.223
> 
> 标签：android, casting, simplecursoradapter, android-viewbinder

我收到以下错误（代码中的第 19 行是 //XXX）：

> 04-10 10:35:08.301: E/AndroidRuntime(12417): java.lang.ClassCastException: android.widget。**TextView 无法转换为 android.widget.CheckBox** 04-10 10:35:08.301: E/AndroidRuntime(12417): 在 ms.jung.andorid.caldavtodo.CalDavToDoViewBinder.setViewValue(CalDavToDoViewBinder.java:19)

我的代码：

```
class CalDavToDoViewBinder implements SimpleCursorAdapter.ViewBinder {

    public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
        int viewId = view.getId();

        if(viewId == R.id.checkBox) {
                CheckBox cb = (CheckBox) view; //XXX

                if(cursor.getInt(cursor.getColumnIndexOrThrow(CalDavToDoProvider.STATE)) == 1)
                {
                    cb.setChecked(true); 
                }
                else 
                {
                    cb.setChecked(false);
                }
                return true;

        }
        else if(viewId == R.id.colorBar)
        {

                int color = cursor.getInt(cursor.getColumnIndexOrThrow(CalDavToDoProvider.COLOR));

                TextView colorBar = (TextView)view;
                colorBar.setBackgroundColor(color);

                return true;    
        }

        return false;
    }
} 
```

我很困惑，因为`R.id.checkBox`绝对是一个`CheckBox`.

**编辑：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/rowLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="0dp" >

    <TextView
        android:id="@+id/colorBar"
        android:layout_width="10dp"
        android:layout_height="fill_parent"
        android:background="@color/pink"
        android:text="@string/colorBarDefault" >
    </TextView>

    <CheckBox
        android:id="@+id/checkBox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="false"
        android:clickable="false"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:paddingLeft="45dp"
        android:text="@string/checkBoxDefault" >
    </CheckBox>

    <TextView
        android:id="@+id/sqlID"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/sqlIDDefault"
        android:visibility="gone" >
    </TextView>

</LinearLayout> 
```

**解决方案 ：**

**编辑：清理项目有帮助！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:44:12.930

利用`view.setTag(objTextview);`

```
TextView colorBar = (TextView)view.getTag(); 
```

# c++ - 链接错误，怎么回事？

> ID：10085565
> 
> 赞同：1
> 
> 时间：2012-04-10T08:42:29.637
> 
> 标签：c++, struct, declaration

我有两个文件，`utility.h`和`utility.cpp`. `BoundingSphere`我在 .h 文件中声明了一个结构

```
struct BoundingSphere
{
    BoundingSphere();
    D3DXVECTOR3 _center;
    float _radius;
};
BoundingSphere::BoundingSphere()
{
    _radius = 0;
} 
```

如果我将`BoundingSphere::BoundingSphere()`实现放入 .h 文件中，我会收到链接错误，错误 LNK2005：“public: __thiscall BoundingSphere::BoundingSphere(void)”已经在 bounding.obj 中定义

但是，如果我将实现放入 .cpp 文件中，它可以正常工作。我的问题是它怎么会发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T08:44:13.910

发生这种情况是因为您的第一个代码示例违反了**[One Definition Rule](http://en.wikipedia.org/wiki/One_Definition_Rule)**。

当您在头文件中包含定义时，预编译器仅将头文件的内容复制粘贴到您包含头文件的每个翻译单元中。
你最终得到的是同一个函数的多个定义，这打破了一个定义规则，因此导致链接器错误。

如果需要在头文件中添加定义，则需要将函数标记为`inline`. 尽管您应该注意，对`inline`函数的请求只是对编译器的建议，可以自由接受或拒绝它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T08:46:32.510

Als 说实话（虽然不是全部真相），但要回答*您的*问题：如果您将实现放入`.h`文件中，那么您将它放在从包含标头的每个源编译的目标文件中。因此，您有多个定义。如果将其放入`.cpp`文件中，则它在该文件中仅定义一次。

# python - 通过引用而不是复制到不可变字符串的切片

> ID：10085568
> 
> 赞同：18
> 
> 时间：2012-04-10T08:42:45.897
> 
> 标签：python

如果你在 Python 字符串上使用[*string*`.split()`](http://docs.python.org/library/stdtypes.html#str.split)，它会返回一个字符串列表。这些被拆分出来的子字符串是其父字符串部分的副本。

是否有可能获得一些更便宜的切片对象，它只包含拆分出的位的引用、偏移量和长度？

是否有可能有一些“字符串视图”来提取和处理这些子字符串，就好像它们是字符串一样，而不复制它们的字节？

（我问，因为我有非常大的字符串，我想切片并且偶尔会耗尽内存；删除副本将是一个廉价的配置文件引导的胜利。）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-10T08:46:54.850

`buffer`会给你一个字符串的只读视图。

```
>>> s = 'abcdefghijklmnopqrstuvwxyz'
>>> b = buffer(s, 2, 10)
>>> b
<read-only buffer for 0x7f935ee75d70, size 10, offset 2 at 0x7f935ee5a8f0>
>>> b[:]
'cdefghijkl' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-10T21:55:56.230

在 Python 中，字符串对象总是指向一个以 NUL 结尾的缓冲区，因此必须复制子字符串。正如 Ignacio 指出的那样，您可以使用`buffer()`来获取字符串内存的只读视图。不过，`buffer()`内置函数已被更通用的[`memoryview`](http://docs.python.org//library/stdtypes.html?highlight=memoryview#memoryview)对象取代，这些对象在 Python 2.7 和 3.x 中可用（`buffer()`在 Python 3.x 中已消失）。

```
s = "abcd" * 50
view = memoryview(s)
subview = view[10:20]
print subview.tobytes() 
```

此代码打印

```
cdabcdabcd 
```

只要您调用`tobytes()`，就会创建字符串的副本，但是`buffer`在 Ignacio 的回答中切片旧对象时也会发生同样的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T12:03:02.947

这是我想出的快速的类似字符串的缓冲区包装器；我能够使用它来代替经典字符串，而无需更改预期使用字符串的代码。

```
class StringView:
    def __init__(self,s,start=0,size=sys.maxint):
        self.s, self.start, self.stop = s, start, min(start+size,len(s))
        self.size = self.stop - self.start
        self._buf = buffer(s,start,self.size)
    def find(self,sub,start=0,stop=None):
        assert start >= 0, start
        assert (stop is None) or (stop <= self.size), stop
        ofs = self.s.find(sub,self.start+start,self.stop if (stop is None) else (self.start+stop))
        if ofs != -1: ofs -= self.start
        return ofs
    def split(self,sep=None,maxsplit=sys.maxint):
        assert maxsplit > 0, maxsplit
        ret = []
        if sep is None: #whitespace logic
            pos = [self.start,self.start] # start and stop
            def eat(whitespace=False):
                while (pos[1] < self.stop) and (whitespace == (ord(self.s[pos[1]])<=32)):
                    pos[1] += 1
            def eat_whitespace():
                eat(True)
                pos[0] = pos[1]
            eat_whitespace()
            while pos[1] < self.stop:
                eat()
                ret.append(self.__class__(self.s,pos[0],pos[1]-pos[0]))
                eat_whitespace()
                if len(ret) == maxsplit:
                    ret.append(self.__class__(self.s,pos[1]))
                    break
        else:
            start = stop = 0
            while len(ret) < maxsplit:
                stop = self.find(sep,start)
                if -1 == stop:
                    break
                ret.append(self.__class__(self.s,self.start+start,stop-start))
                start = stop + len(sep)
            ret.append(self.__class__(self.s,self.start+start,self.size-start))
        return ret
    def split_str(self,sep=None,maxsplit=sys.maxint):
        "if you really want strings and not views"
        return [str(sub) for sub in self.split(sep,maxsplit)]
    def __cmp__(self,s):
        if isinstance(s,self.__class__):
            return cmp(self._buf,s._buf)
        assert isinstance(s,str), type(s)
        return cmp(self._buf,s)
    def __len__(self):
        return self.size
    def __str__(self):
        return str(self._buf)
    def __repr__(self):
        return "'%s'"%self._buf

if __name__=="__main__":
    test_str = " this: is: a: te:st str:ing :"
    test = Envelope.StringView(test_str)
    print "find('is')"
    print "\t",test_str.find("is")
    print "\t",test.find("is")
    print "find('is',4):"
    print "\t",test_str.find("is",4)
    print "\t",test.find("is",4)
    print "find('is',4,7):"
    print "\t",test_str.find("is",4,7)
    print "\t",test.find("is",4,7)
    print "split():"
    print "\t",test_str.split()
    print "\t",test.split()
    print "split(None,2):"
    print "\t",test_str.split(None,2)
    print "\t",test.split(None,2)
    print "split(':'):"
    print "\t",test_str.split(":")
    print "\t",test.split(":")
    print "split('x'):"
    print "\t",test_str.split("x")
    print "\t",test.split("x")
    print "''.split('x'):"
    print "\t","".split("x")
    print "\t",Envelope.StringView("").split("x") 
```

# c++ - 为什么 std::list 上的 push_back 会更改用 rbegin 初始化的反向迭代器？

> ID：10085570
> 
> 赞同：21
> 
> 时间：2012-04-10T08:42:49.503
> 
> 标签：c++, stl, iterator

根据我发现的一些 STL 文档，在 std::list 中插入或删除元素不会使迭代器无效。这意味着它可以遍历一个列表（从`begin()`到`end()`），然后使用 push_front 添加元素。

例如，在下面的代码中，我用元素 a、b 和 c 初始化一个列表，然后循环遍历它并执行元素的 push_front。结果应该是 cbaabc，这正是我得到的：

```
std::list<std::string> testList;
testList.push_back("a");
testList.push_back("b");
testList.push_back("c");

for (std::list<std::string>::iterator itList = testList.begin(); itList != testList.end(); ++itList)
   testList.push_front(*itList);

for (std::list<std::string>::const_iterator itList = testList.begin(); itList != testList.end(); ++itList)
   std::cout << *itList << std::endl; 
```

当我使用反向迭代器（从`rbegin()`to循环`rend()`）并使用 push_back 时，我会期待类似的行为，即 abccba 的结果。但是，我得到了不同的结果：

```
std::list<std::string> testList;
testList.push_back("a");
testList.push_back("b");
testList.push_back("c");

for (std::list<std::string>::reverse_iterator itList = testList.rbegin(); itList != testList.rend(); ++itList)
   testList.push_back(*itList);

for (std::list<std::string>::const_iterator itList = testList.begin(); itList != testList.end(); ++itList)
   std::cout << *itList << std::endl; 
```

结果不是`abccba`，而是`abcccba`。没错，又增加了一个 c。

看起来第一个 push_back 也改变了用 rbegin() 初始化的迭代器的值。在 push_back 之后，它不再指向列表中的第三个元素（之前是最后一个），而是指向第四个元素（现在是最后一个）。

我使用 Visual Studio 2010 和 GCC 对此进行了测试，并且都返回了相同的结果。

这是一个错误吗？还是我不知道的反向迭代器的一些奇怪行为？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-10T09:16:57.310

该标准规定迭代器和引用在插入期间保持有效。它没有说明反向迭代器。:-)

内部`reverse_iterator`返回`rbegin()`的值包含 的值`end()`。在 a 之后，`push_back()`这个值显然与以前不同。我认为标准没有说明它应该是什么。明显的替代方案包括列表的前一个最后一个元素，或者如果它是一个固定值（如哨兵节点），它会停留在末尾。

* * *

技术细节：返回的值`rend()`不能指向 before `begin()`，因为那是无效的。所以决定`rend()`应该包含的值`begin()`和所有其他反向迭代器进一步移动一个位置。对此`operator*`进行补偿并无论如何访问正确的元素。

24.5.1 反向迭代器的第一段说：

> 类模板`reverse_iterator`是一个迭代器适配器，它从其底层迭代器定义的序列的末尾迭代到该序列的开头。反向迭代器与其对应的迭代器 i 之间的基本关系由恒等式建立：
> `&*(reverse_iterator(i)) == &*(i - 1)`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-10T09:37:07.053

我认为要理解这一点，最好先将循环重新转换`for`为`while`循环：

```
typedef std::list<std::string> container;

container testList;
testList.push_back("a");
testList.push_back("b");
testList.push_back("c");

container::reverse_iterator itList = testList.rbegin(); 
while (itList != testList.rend()) {
    testList.push_back(*itList);
     ++itList;
} 
```

除此之外，我们还必须了解 a`reverse_iterator`一般是如何工作的。具体来说， a`reverse_iterator`确实指向取消引用时获得的元素*之后的元素。**在容器结束之后*`end()`生成一个迭代器——但是对于像数组这样的东西，没有定义的方法来指向容器开始之前的位置。相反，C++ 所做的是让迭代器从末尾开始，然后一直到开头，但是当您取消引用它时，您会在它实际指向的位置*之前获得元素。*

 **这意味着您的代码实际上是这样工作的：

![在此处输入图像描述](../Images/6d31b1b6cf7eab712717344189ee71fb.png)

在那之后，你得到了几乎你所期望的，推回 B 然后 A，所以你最终得到了 ABCCCBA。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T09:00:00.813

尝试对两者都使用迭代器。尝试：

```
std::list<std::string>::iterator i = testList.end(); 
```

并使用 --i 反转**

# c# - 在 Windows 窗体中使用列表框

> ID：10085577
> 
> 赞同：0
> 
> 时间：2012-04-10T08:43:16.693
> 
> 标签：c#, .net, winforms

我无法在 Windows 窗体的列表框中获取有关所选项目的信息。我有一个填充有“PersonID”和“FirstName”的“Persons”的集合。我不希望“PersonID”显示在列表中，只显示人名 - 但是当我从列表中选择一个人时，我怎么知道 ID 是什么？

```
 public int PersonID { get; set; }
    public string FirstName { get; set; } 
```

我知道我可以比较集合中的“FirstName”，但如果名称与其他人相同，那还不够好。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:49:00.553

您可以使用 ListBox 控件的[DisplayMember](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.displaymember.aspx) / ValueMember 属性，也可以[重写 Person 类的 ToString() 方法](http://msdn.microsoft.com/en-us/library/ms173154%28v=vs.80%29.aspx)以返回人员的姓名。

在这种情况下，只会显示人的姓名，但调用 ListBox.SelectedItem() 仍将返回完整的 Person 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:16:08.890

或者你可以使用列表视图

```
listView1.Items.Add("Name").SubItems.Add("ID"); 
```

会更容易

# jquery - 花式框 IFrame 打印

> ID：10085582
> 
> 赞同：0
> 
> 时间：2012-04-10T08:43:36.097
> 
> 标签：jquery, iframe, printing, fancybox

我想打印花式框 IFrame 弹出窗口中显示的任何内容。怎么做？目前 print 只是打印下面的所有内容，这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:47:53.883

尝试这个：

```
$("#printBtn").click(function() {
    $('#myIframe')[0].print();
}); 
```

# css - 适用于多个属性（AND 运算符）的 CSS 媒体查询的语法是什么？

> ID：10085585
> 
> 赞同：0
> 
> 时间：2012-04-10T08:43:48.093
> 
> 标签：css, media-queries

我想编写一个 CSS 媒体查询，以匹配所有至少 800 像素宽度和 800 像素高度的设备。此媒体查询的目的是针对平板电脑并排除手机。在这种情况下，我不需要担心台式机，因为我只针对移动设备。

我开始：

```
@media all and (min-device-width: 800px), all and (min-device-height: 800px) 
```

...但我不相信这会起作用，因为如果满足两个条件中的任何一个（逻辑或），这将是正确的。

所以我的下一个猜测是：

```
@media all and (min-device-width: 800px, min-device-height: 800px) 
```

AND 而不是 OR 的语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T09:47:03.947

从您的声明中删除逗号

```
@media all and (min-device-width: 800px) and (min-device-height: 800px) {
  //...........
} 
```

阅读此[文档](http://www.w3.org/TR/css3-mediaqueries/)以获取更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:00:59.157

试试这个。

您可能不需要检查高度，您是否可以访问任何宽度为 800 像素且高度小于 800 像素的设备？

```
@media screen and (min-width: 800px) and (min-height:800px) 
```

# javascript - 如何让两个窗口（一个窗口被另一个打开）通信

> ID：10085588
> 
> 赞同：0
> 
> 时间：2012-04-10T08:43:56.003
> 
> 标签：javascript

如果标题不清楚，让我再描述一下，如果有一个页面 a.html，下面有一个 javascript 代码

```
 window.open("http://www.baidu.com/", "_self", ""); 
```

原始窗口和新打开的窗口如何通信？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:48:05.053

新文档将具有`opener`引用打开它的窗口的属性。如果浏览器导航到新文档，这将丢失。

的*返回值*将`open`是对新窗口的引用（因此您需要将其分配给变量）。

[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)照常适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:48:17.530

假设它们在同一个域中并且您实际上打开了一个新窗口（“_self”不是打开新窗口的好主意），您可以这样做

`var w = window.open(....)`

`w.document....`

并从子窗口

`opener.someFunction()`

或者

`opener.someVar = ...`

如果不是，则需要跨域脚本

# python - 如何在类的初始属性中创建空列表？

> ID：10085590
> 
> 赞同：5
> 
> 时间：2012-04-10T08:43:58.840
> 
> 标签：python, oop

这是一个代码：

```
>>> class A(object):
...     value = []
...     def method(self, new_value):
...         self.value.append(new_value)
... 
>>> a = A()
>>> a.value
[]
>>> a.method(1)
>>> b = A()
>>> b.value
[1]
>>> b.method(2)
>>> b.value
[1, 2]
>>> a.value
[1, 2] 
```

这只发生在列表中。是在 __init__中定义*值*的唯一方法吗？
如何在python中通常定义默认类值？

**UPD**

谢谢您的反馈

```
>>> class B(object):
...     value = "str"
...     def method(self):
...         self.value += "1"
... 
>>> a = B()
>>> a.value
'str'
>>> a.method()
>>> a.value
'str1'
>>> b = B()
>>> b.value
'str' 
```

我不明白，为什么 list 是共享的，而 str 不是？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T08:57:13.173

您定义的`value`不是您的类的实例字段，它更像是一个静态字段。但是如果你从实例中访问这个字段，python 并不介意。因此，即使您从实例访问此字段，每个实例的列表也不相同。基本上，每次调用该方法时，您都会附加到同一个列表中。

你必须这样做

```
class A(object):

    def __init__(self):
        self.value = []

    def method(self, new_value):
        self.value.append(new_value) 
```

现在，您为每个实例创建了不同的列表。

*编辑*：让我试着解释一下当你使用 a 时会发生什么`str`。

```
class A(object):

    self.value = 'str'

    def method(self):
        self.value += '1' 
```

前面代码中的最后一行与此相同：

```
 self.value = self.value + '1' 
```

现在，这使得更容易看到正在发生的事情。首先，python 从`self.value`. 由于还没有定义实例字段`self`，这将给出`'str'`. 添加`'1'`到它并将其设置为名为的**实例**字段`value`。这就像

```
self.value = 'str1' 
```

这与您在`__init__`方法中设置实例字段（在我的第一个代码片段中）相同。

```
self.value = [] 
```

这说明清楚了吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-10T08:48:54.553

`value`中定义`__init__()`。没有其他方法可以定义实例属性。

绑定在实例方法之外的属性是类属性，并由该类的所有实例共享。因此，正如您在示例中所注意到的，对绑定到类属性的对象的修改会影响类的所有实例。

# email - 如何在我的 play2.0 框架 Web 应用程序中集成 SMS 和 EMAIL 提醒。

> ID：10085591
> 
> 赞同：0
> 
> 时间：2012-04-10T08:43:59.170
> 
> 标签：email, playframework, sms, quartz-scheduler, reminders

我正在 play2.0 框架中创建一个 Web 应用程序。在这个应用程序中，我需要集成 SMS 和 EMAIL 提醒，以便通过从数据库中获取详细信息在特定日期和时间发送短信和电子邮件。为此，是否有任何免费的 API 或调度程序或 Web 服务或应用程序？如果有的话，请告诉我如何使用？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:30:46.737

In Play 1.x, this would have been achieve with the concept of Jobs. In Play 2.x, asynchronous execution of code is done using Akka's scheduler.

So, from your use case, you will probably want to have a job that runs every few minutes (lets assume 30 for the example), that goes off to the database and checks to see if any emails need to be sent. From here, you can then call your web service to send SMS and Email.

```
Akka.system().scheduler().scheduleOnce(
  Duration.create(30, TimeUnit.MINUTES),
  new Runnable() {
    public void run() {
      // check database for reminders that need to be sent
      // send email
      // send SMS
    }
  }
); 
```

As for services for sending SMS, you could check out Twilio ( [http://www.twilio.com/api/sms](http://www.twilio.com/api/sms) ). You just need to integrate using the `play.libs.WS` class.

Email is a trivial part of the puzzle, and has been answered many times over already, so I won't go into detail on that.

# gwt - 从 GWT 中的外部服务类获取会话

> ID：10085593
> 
> 赞同：0
> 
> 时间：2012-04-10T08:44:01.417
> 
> 标签：gwt, guice, httpsession

我成功地在我的服务中使用了会话：

```
getThreadLocalRequest().getSession() 
```

但是我的应用程序是分层分离的，我的服务中的一个方法将从业务层调用另一个方法，然后调用 DAO 层方法。

在 DAO 层中，我想访问会话中保存的一些信息。这是我可以看到的方式：

*   在每个方法中传递 HttpSession 对象......但我不想那样做

还有其他方法吗？

我正在使用 GUICE 获取信息，是否有一些已经创建的提供程序可以为我提供当前的请求会话？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:17:57.857

既然你的应用程序已经分层了，为什么要用像 HTTPSession 对象这样特定于实现的东西来“污染”你的 DAO 层呢？从架构的角度来看，这当然不是要走的路。它也使单元测试更加困难。

# c - 如何将带有点的 C 预处理器连接到字符串？

> ID：10085594
> 
> 赞同：8
> 
> 时间：2012-04-10T08:44:03.130
> 
> 标签：c, concatenation, c-preprocessor

我已经阅读了以下问题，答案似乎很清楚： [如何使用 C 预处理器连接两次并展开宏，如“arg ## _ ## MACRO”？](https://stackoverflow.com/questions/1489932/c-preprocessor-and-concatenation)

但是如果 VARIABLE 末尾有一个点怎么办？

我正在尝试做一个简单的宏来增加结构中的计数器以用于调试目的。即使没有上述问题的帮助，我也可以轻松做到这一点

```
#ifdef DEBUG
#define DEBUG_INC_COUNTER(x) x++
#endif 
```

并称之为

```
DEBUG_INC_COUNT(debugObj.var1); 
```

但添加“debugObj”。对每个宏来说似乎都是多余的。但是，如果我尝试连接：

```
#define VARIABLE debugObj.
#define PASTER(x,y) x ## y++
#define EVALUATOR(x,y)  PASTER(x,y)
#define DEBUG_INC_COUNTER(x) EVALUATOR(VARIABLE, x)
DEBUG_INC_COUNTER(var)

gcc -E macro.c 
```

我明白了

```
macro.c:6:1: error: pasting "." and "var" does not give a valid preprocessing token 
```

那么我应该如何改变这个

```
DEBUG_INC_COUNTER(var); 
```

生成

```
debugObj.var++; 
```

?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T08:54:17.047

省略`##`; 仅当您想加入字符串时才需要这样做。由于参数不是字符串，它们之间的空格无关紧要（`debugObj . var1`与 相同`debugObj.var1`）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-10T08:52:36.403

您不应该将它们粘贴在一起`##`，因为您可以使用`debugObj` `.`和`var1`作为单独的预处理器标记。

以下应该有效：

```
#define DEBUG_INC_COUNTER(x) debugObj.x++ 
```

# php - bxSlider 插件未加载类

> ID：10085597
> 
> 赞同：0
> 
> 时间：2012-04-10T08:44:18.450
> 
> 标签：php, jquery

我在我的网站上使用 bxSlider 插件，它在我的本地机器上工作正常，但在我的登台服务器上它不工作问题是我认为它没有加载类，因为我看不到 bx-wrapper、bx-window 等类在我的登台服务器上，而这些课程在我的本地机器上。jquery.bxSlider.min.js 位于暂存服务器上的 js 文件夹中 任何人都知道它为什么不工作？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:39:35.373

似乎加载了额外/旧的 jquery 文件，这似乎搞砸了代码。

# c# - 如果 System.TimeoutException 是由外部代码中的未知线程抛出的，如何捕获它？

> ID：10085598
> 
> 赞同：0
> 
> 时间：2012-04-10T08:44:26.360
> 
> 标签：c#, exception-handling

我有一个链接到我的主应用程序的第 3 方 GSM 通信组件（无源）。这样的程序集有一个“收到短信事件”。如果我向它添加一个处理程序，程序集会启动一个线程，该线程偶尔会抛出一个 System.TimeoutException（由 COM 端口的读取超时引起）。

由于我无法控制外部代码并且我需要我的应用程序不会在这种情况下崩溃，我如何才能捕获或者更好地告诉程序集忽略特定类型的异常？

提前谢谢你，F。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:57:16.367

可以监听当前 AppDomain 未处理的异常

好文章：AppDomain.UnhandledException[第 1](http://www.danielmoth.com/Blog/appdomainunhandledexception-part-1.aspx) [部分 第 2 部分](http://www.danielmoth.com/Blog/AppDomainUnhandledException-Part-2.aspx)

# c# - AjaxControlToolkit ReorderList 不起作用

> ID：10085600
> 
> 赞同：3
> 
> 时间：2012-04-10T08:44:33.880
> 
> 标签：c#, asp.net, drag-and-drop, ajaxcontroltoolkit, reorderlist

我需要使用拖放控件来订购列表。我想通过 AjaxControlToolkit 中的 ReorderList 控件来实现这一点。我已经尽一切努力让它工作，但它不会。一切都很顺利，比如填充列表等。但我不能像应该使用的那样使用这个控件。加载页面时，它会显示一个列表，左侧有一个 reordergrip，但是当我尝试拖动一个项目时，它不会拖动。它只是留在原地。我还尝试过其他浏览器，例如 IE9 和 Firefox。有人可以帮我解决这个问题吗？我在 Visual Studio 2010 中使用 ASP.NET/C#。

先感谢您！

ASPX：

```
 <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
        <div class="ajaxOrderedList">
            <asp:ReorderList runat="server" DataSourceID="SqlDataSource1" ID="rlData" PostBackOnReorder="true" DragHandleAlignment="Left" ItemInsertLocation="Beginning" SortOrderField="Naam" AllowReorder="true">
                <DragHandleTemplate> 
                    <asp:Panel ID="dragHandle" runat="server" 
                        style="height: 20px; width: 20px; border: solid 1px black; background-color: Red; cursor: pointer;" 
                        Visible="<%# ShowDragHandle %>">
                        &nbsp;
                    </asp:Panel>
                    </DragHandleTemplate> 
                <ItemTemplate>
                    <div class="itemArea"> 
                        <asp:Label ID="lblNaam" runat="server" Text='<%#  HttpUtility.HtmlEncode(Convert.ToString(Eval("Naam")))  %>' />
                        <asp:Label ID="lblFunctie" runat="server" Text='<%#  HttpUtility.HtmlEncode(Convert.ToString(Eval("Functie")))  %>' />
                    </div>
                </ItemTemplate>
                <ReorderTemplate>
                    <div style="width: 300px; height: 20px; border: dotted 2px black;">
                        &nbsp;
                    </div>
                </ReorderTemplate>
            </asp:ReorderList>
            </div>
        </ContentTemplate>
    </asp:UpdatePanel>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:testdataConnectionString %>" 
    SelectCommand="SELECT [id], [naam], [functie] FROM [personen]" DeleteCommand="DELETE FROM [personen] WHERE [id] = @intID"
                InsertCommand="INSERT INTO [personen] ([naam], [functie]) VALUES (@strNaam, @strFunctie)"
                UpdateCommand="UPDATE [personen] SET [naam] = @strNaam, [functie] = @strFunctie WHERE [id] = @intID">
                <DeleteParameters>
                <asp:Parameter Name="intID" Type="Int32" />
            </DeleteParameters>
            <UpdateParameters>
                <asp:Parameter Name="strNaam" Type="String" />
                <asp:Parameter Name="srtFunctie" Type="String" />
                <asp:Parameter Name="intID" Type="Int32" />
            </UpdateParameters>
            <InsertParameters>
                <asp:Parameter Name="strNaam" Type="String" />
                <asp:Parameter Name="srtFunctie" Type="String" />
            </InsertParameters>
</asp:SqlDataSource> 
```

后面的代码：

```
DataView MyDView = null; 

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                ShowDragHandle = true;
            }
        }

        protected void ReorderList1_ItemReorder(object sender, ReorderListItemReorderEventArgs e)
        {
            ShowDragHandle = true;
        }

        protected Boolean ShowDragHandle { get; set; }

        protected void Page_PreInit(object sender, EventArgs e)
        {
            //set theme
            this.Theme = "ServiceSuite";
        } 
```

不工作的 Reorderlist 的图像（这是我尝试拖动项目时得到的结果！）：

![如果我尝试拖动一个项目，这就是我得到的！](../Images/0b2c918cc1e98be90698fcff2bf01ba4.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T19:10:34.240

尝试将此添加到您的重新排序列表属性

```
ClientIDMode="AutoID" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:39:20.707

我在使用旧版本的 AjaxControlToolkit 时遇到了同样的问题。它似乎在当前版本（2012 年 9 月）中已修复，当然我不能在我的项目中使用它。但也许更新会帮助其他人。

# iphone - 设置UITableView右侧显示的SectionIndex的宽度？

> ID：10085604
> 
> 赞同：0
> 
> 时间：2012-04-10T08:44:55.720
> 
> 标签：iphone, objective-c, ios

我们如何指定显示 SectionIndexes 的框架的宽度。我在下面显示的图像将解释我的状况。

![带有按索引排序的 UITableView 的图像以及它](../Images/cea43540b7d3a1868548d42154bf7db5.png)

我想将单词包装在 sectionIndex 中，并且当 SectionIndex 帧大小固定时，我想将 SectionIndex 帧的宽度设置为显示在右侧。SectionIndex 帧会根据其中的单词长度自动调整大小。

我编写了代码以从 SectionIndexTitle 返回数组，如下所示：

```
NSMutableArray *array = [[NSMutableArray alloc] init];

for (int i = 0; i <[keys count]; i++) {
    NSString *str = [self.keys objectAtIndex:i];
    int length = [str length];
    if (length > 9) {
        str = [NSString stringWithFormat:@"%@..",[str substringToIndex:8]];
    }
       [array addObject:str];
}

NSArray *a =[NSArray arrayWithArray:array];
[array release];

return a; 
```

你能帮我解决这个问题吗...！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:08:12.297

不幸的是，使用公共 API 无法自定义节索引。

如果此功能对您的应用如此重要，您最终可能会创建自定义部分索引视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:22:30.447

参考这个答案：

[自定义 UITableView 部分索引](https://stackoverflow.com/questions/5987399/custom-uitableview-section-index)

我认为自定义部分索引或创建自定义部分索引真的很难或几乎不可能。

如果您需要更多帮助，请告诉我。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-26T09:54:29.367

我最近遇到了类似的问题，我没有时间集成自定义 sectionindex。所以我只是用空格修改了节索引列表中的第一项：

```
-(NSArray<NSString *> *)sectionIndexTitlesForTableView:(UITableView *)tableView
{
    return @[@"      A      ", @"B", @"C", @"D", @"E", @"F"];
}

-(NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index
{
    if ([title containsString:@"A"])
    {
        title = @"A";
    }
    //Your code here
} 
```

有了这个解决方案，我设法修改了部分索引的宽度！

希望能帮助到你 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-02T05:50:48.200

这似乎在 iPad 和 iPhone 5 上运行良好。在 cellForRow 中使用它。

```
let rightOffset: CGFloat = cell.frame.width - cell.contentView.frame.width 
```

# sql-server - 用于读取文本文件和执行查询的 VB 脚本

> ID：10085605
> 
> 赞同：2
> 
> 时间：2012-04-10T08:45:11.463
> 
> 标签：sql-server, vbscript

我有一个以下格式的txt文件

```
11SNMMMMTESTCASEJBS1961123123232YExist 
```

从这个文件中，我必须检查第 33 列的值，即 Y 或 N。如果是 N，我必须转到数据库并使用以下查询

```
Update table XYZ set Status = Not Exist where cust_id = ** ( taken from record) 
```

如果是 Y

```
Update table XYZ set Status = Exist where cust_id = ** ( taken from record) 
```

从文本文件读取后，我尝试使用存储在变量中的值连接到 SQLplus，并尝试更新表，但出现以下错误：“未终止的字符串常量这是代码的样子，感谢 Guido 的帮助我在第 1 步上。任何人都可以指出错误。If & Else Part 中的一些错误，SQL 查询或连接错误

```
dim fs, txt, line, yesno , cust_id
set fs = CreateObject("Scripting.FileSystemObject")
set txt = fs.OpenTextFile("E:\batchfiletest\Eapp3\scotia1.txt", 1, false) 

' loop through all the lines
do while not txt.AtEndOfStream
    line = txt.readLine

' read the character and store it in a variable
    yesno = Mid(line, 127, 1)
    cust_id = Mid(line, 1,20)   

' execute the correct query
    if yesno = "Y" then

    set WshShell = CreateObject("WScript.Shell")
    set oEnv=WshShell.Environment("Process") 
    cmdString = "E:\oracle\product\10.2.0\db_1\BIN\sqlplusw.exe -S sysman/csaadmin@convcsd

    UPDATE csa_sli_all.T_CONV_quote set HOLD_CODE = 'CAQ' where quote_id =  cust_id ;
    commit;"

    Set oExec = WshShell.Exec(cmdString)

     ELSE  
    set WshShell = CreateObject("WScript.Shell")
    set oEnv=WshShell.Environment("Process") 
    cmdString = "E:\oracle\product\10.2.0\db_1\BIN\sqlplusw.exe -S sysman/csaadmin@convcsd

    UPDATE csa_sli_all.T_CONV_quote set HOLD_CODE = 'PVQ' where quote_id =  cust_id ;
    commit;"

    Set oExec = WshShell.Exec(cmdString)

    end if
loop
MsgBox "Press OK to close when done reading the output." 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T09:10:07.237

看看 vbscript[字符串](http://www.w3schools.com/vbscript/vbscript_ref_functions.asp)函数。专门寻找[Mid](http://www.w3schools.com/vbscript/func_mid.asp)功能。

然后，您应该能够读取特定的字符位置，并执行正确的查询。

从文本文件中读取行、从行中存储字符并稍后使用它的示例：

```
dim fs, txt, line, yesno

' create a file system object and open the text file
set fs = CreateObject("Scripting.FileSystemObject")
set txt = fs.OpenTextFile("C:\Users\dgaurav\Deskto‌​p\CSA -3\scotia.txt", 1, false) 

' loop through all the lines
do while not txt.AtEndOfStream
    line = txt.readLine

    ' read the character and store it in a variable
    yesno = Mid(line, 33, 1)

    ' execute the correct query
    if yesno = "Y" then
        WScript.Echo "Yes"
    else
        WScript.Echo "No"
    end if
loop 
```

# android - 如何更改 Androidmanifest.xml 中的默认权限

> ID：10085612
> 
> 赞同：0
> 
> 时间：2012-04-10T08:45:34.550
> 
> 标签：android, android-permissions

我有一个关于“Androidmanifest.xml”的问题。安装应用程序的默认设置是应用程序具有 SD 卡和电话呼叫权限。

如何设置应用程序只能访问 SD 卡而不访问默认设置的电话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:08:06.537

如果您要在设备上获得 root 访问权限（通过利用或任何其他合法方式），您可以从已安装的应用程序（apk 文件）中提取**清单文件**，然后修改（添加或删除权限）**清单文件**，然后*重新打包*（注入）具有修改后的**清单**的应用程序。下次应用程序运行时，它将获得新的（修改的）权限。

注意：无论如何，这不是标准程序，也不是**Google Play**应用程序应该做的事情！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:48:40.943

您不能修改除 Manifest 之外的权限。但是，一些自定义 ROM 也允许您更改已安装应用程序的权限，但这不是普通用户可以/应该遵循的。

# iphone - 如何在 drawRect 中缩放自定义绘图：

> ID：10085616
> 
> 赞同：1
> 
> 时间：2012-04-10T08:45:49.793
> 
> 标签：iphone, objective-c, ipad, uiview, core-graphics

我和[这个人](https://stackoverflow.com/questions/9328359/how-to-resize-a-custom-uiview-and-maintain-its-custom-draw-in-proportion)有同样的问题，并且提供的解决方案没有解决它（也不清楚它在另一个 SO 问题中解决了它）。

当您更改`.frame`UIView 的大小，并且您没有更改默认值`.contentMode`时，那么（Quartz 路径）中的自定义绘图肯定`drawRect`应该与 UIView 的大小一起缩放吗？我的没有。现在我可以打电话`setNeedsDisplay`，它会重绘，但我正在寻找可以动画的缩放。这可能吗？

相反，对我来说发生的事情是 Quartz 图纸被简单地裁剪但保持其大小。我已经尝试过直接设置`contentMode`以及`clipsToBounds`其他实验，但无论我尝试什么，我都不会发生 Quartz 的自动缩放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:12:38.750

一定是发生了其他事情。[这是](http://dl.dropbox.com/u/11290499/anim.zip)我拼凑的一个简单演示，以仔细检查 contentMode 是否按预期工作 - 果然，当 contentMode 设置为默认的“缩放填充”时，支持位图会放大/缩小。并在视图上调用 setNeedsDisplay 重新渲染图像。

您还对视图做了哪些其他事情？（你没有改变它的 contentStretch 属性，是吗？）你对视图层做了什么吗？你检查过视图上的 contentMode 真的是 UIViewContentModeScaleToFill 吗？另外，你是动画视图本身的框架，还是超级视图？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T03:34:01.487

你可以尝试覆盖**drawLayer**

```
- (void)drawLayer:(CALayer*)layer inContext:(CGContextRef)ctx
{
    [super drawLayer:layer inContext:ctx];

    /*here to change self.frame
        self.frame = CGRectMack(a, b, c, d);
    */
} 
```

# wordpress - 无论wordpress中的类别如何，按帖子标题排序

> ID：10085620
> 
> 赞同：0
> 
> 时间：2012-04-10T08:46:38.173
> 
> 标签：wordpress

您好，无论类别名称如何，我都需要帮助在 wordpress 中按标题对帖子列表进行排序，以下是我的初始代码，它按升序排序，但仍考虑类别的排序。我需要一个排序代码，它只会按升序对标题进行排序，而忽略对其类别的排序。

```
 $args=array(

        'showposts'=> 7,

        'category__not_in' => array(20,8,11,3,4,5,6,1), //excluded category IDs

        'order'    => 'ASC'

    );

    query_posts($args); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:00:57.413

尝试添加

```
'orderby' => 'title' 
```

到`$args`. `order`仅指定排序顺序。它不会告诉 WordPress 对哪个字段进行排序。有关更多详细信息，请参阅[法典](http://codex.wordpress.org/Class_Reference/WP_Query#Order_.26_Orderby_Parameters)。

# perl - 使用 Crypt::RC4 加密密码的问题

> ID：10085621
> 
> 赞同：0
> 
> 时间：2012-04-10T08:46:40.297
> 
> 标签：perl

我正在使用 Crypt::RC4 来加密密码。但它无法加密包含“0”或“#”的密码。在零的情况下，程序被终止，而在 # 的情况下，它无法加密。

我是 Perl 新手，我的自动化脚本需要这个。我在 Windows 64 位上运行脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:08:33.663

***脚本：***

```
use strict;
use warnings;
use Crypt::RC4;

my $passphrase = 'abcde#01234';
my $plaintext = 'text with #0';

my $encrypted = RC4($passphrase, $plaintext);
print "Encrypted: ", $encrypted, "\n";
print "Encrypted: ", unpack('H*', $encrypted), " (hex)\n\n";

my $decrypted = RC4($passphrase, $encrypted);
print "Decrypted: $decrypted\n"; 
```

***输出：***

```
Encrypted: C0Þ%;1$Kíùt¬
Encrypted: 4330de253b31244bedf974ac (hex)

Decrypted: text with #0 
```

# java - 将带有空格的 url 从 Java servlet 传递到 Perl

> ID：10085622
> 
> 赞同：0
> 
> 时间：2012-04-10T08:46:40.930
> 
> 标签：java, perl

全部

我有一个 java servlet 程序来调用 perl 并从 perl 接收数据。我用了

```
String urlString = "http://[hostname]:[port]/cgi-bin/perl.pl?city="+city+"&chain="+chain;
URL url = new URL(urlString);
URLConnection urlConnection = url.openConnection();
urlConnection.setAllowUserInteraction(false);
InputStream urlStream = url.openStream(); 
```

作为访问 perl 的 url，对于 perl 端，使用

```
my $city = param("city");
my $chain = param("chain"); 
my $url_temp = "http://www.tripadvisor.com/Search?q=${chain}+${city}"; 
```

在 GET 参数中获取 city 的值

servlet 和 perl 都适用于没有空格的城市名称，但是，对于“洛杉矶”和“纽约”，我无法想出一个解决方案来使它工作。我试过 string.replace(' ','+')，它什么也没返回；替换为 %20 会使程序出错

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:09:42.573

就像 Konerak 和 Guillaume 说的，使用 url encode ...

```
// first
try {
   city = URLEncoder.encode(city, "UTF-8");
   chain = URLEncoder.encode(chain, "UTF-8")
} catch (Exception e) {}

// now your code
String urlString = "http://[hostname]:[port]/cgi-bin/perl.pl?city="+city+"&chain="+chain;
URL url = new URL(urlString);
URLConnection urlConnection = url.openConnection();
urlConnection.setAllowUserInteraction(false);
InputStream urlStream = url.openStream(); 
```

# iphone - iPhone 应用程序在从后台进入前台时会挂起/阻止 UI 几秒钟

> ID：10085624
> 
> 赞同：0
> 
> 时间：2012-04-10T08:46:43.007
> 
> 标签：iphone, objective-c, ios, ios5, ios4

我有一个非常复杂的应用程序，其中包含几乎所有 UI 部分。现在的问题是，当我在后台创建应用程序并再次进入前台时，我的**UI**被**阻塞/挂起**几秒钟。

JFYI。这个问题在模拟器和设备上都有。

任何人都可以指导这个问题吗？进入前台时如何处理应用程序？

是不是我的应用程序包含这么多 UI 部分，需要重新初始化所有内容？？还是有任何iOS特定的处理？

我听说 iOS 在进入后台和前台时会序列化和反序列化对象。请提供一些指导链接左右..谢谢

**编辑 ：**

```
if(isInActive)
    {
        if([UIApplication sharedApplication].applicationIconBadgeNumber != 0)
        {
            //User canceled the Notification alert but badge is still there which indicates that
            //the push notification had arrived...
            [self performSelector:@selector(handleNotification:) withObject:nil afterDelay:1.0]; //change: From 2.0 to 1.0
        }

        isInActive = NO;

        int curTime = (int)ceil([[NSDate date] timeIntervalSince1970]);
        int storedTime;
        int timeDiff;
        storedTime = [[NSUserDefaults standardUserDefaults] integerForKey:@"logOffDuration"];
        if(storedTime > 0)
        {
            timeDiff  = curTime - storedTime;
            int delay = [[LogOffMgr getInstance].LogOff.delay_ intValue]/1000;
            if(timeDiff > delay)
            {
                [[LogOffMgr getInstance] stop];
                [[LogOffMgr getInstance] LogOffTimer_tick];
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:26:04.043

我不确定，但从您的代码中，我只能认为

`[self performSelector:@selector(handleNotification:) withObject:nil afterDelay:1.0];`

可能会阻止您的用户界面。我认为它会执行您的`DidBecomeActive`方法，然后在延迟几秒钟后开始执行`handleNotification`. 因此`performSelectorInBackground`，如果可能，请使用，即如果您不做任何与用户界面相关的更改`handleNotification:`。

`[self performSelectorInBackground:@selector(handleNotification:) withObject:nil];`

希望这可以帮助。

如果您需要更多帮助，请告诉我。

# mysql - 混合多态关联和层次结构的最佳方法？

> ID：10085625
> 
> 赞同：2
> 
> 时间：2012-04-10T08:46:43.350
> 
> 标签：mysql, database, database-design

假设从此链接中的基表设计（第 3 号）：

[在 SQL Server 中实现多态关联的最佳方法是什么？](https://stackoverflow.com/q/7000283/1284817)

![在此处输入图像描述](../Images/933974ff347fd21dc1c9b6aa98be6002.png)

我想为每个添加（到对象表） a`ObjectType`和 a 。我需要这个，因为我的对象是其他对象的子对象。这些子对象只能有不同类型的子对象（不同于自身类型）。 `parentObjectID``object.ObjectID`

那么将表的名称放在`objectType`列中是个好主意吗？将某些架构存储在表中可能不利于安全性...我可以使用其他任何方法吗？

这是一个例子：

表帖子-> id | ObjectID(fk ref.Object.ObjectID) | 内容
表评论 -> id | ObjectID(fk ref.Object.ObjectID) | Posted_on_ObjectID(fk ref.Object.ObjectID) | 内容

基本上帖子和评论将是 Object super table 中的唯一实体。但是因为只能为帖子实体而不是评论实体发表评论，所以我必须存储每个实体的类型（ObjectID）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:13:52.773

我认为您可以通过定义自外键在单个表中执行此操作。

```
Objects | id | parent_object_id | name
--------+----+------------------+-----------------------------
           1 | NULL             | Object1 
           2 | NULL             | Object2
           3 | NULL             | Object3
           4 | 1                | Child Object of 1 
           5 | 2                | Child Object of 2
           6 | 3                | Child Object of 3 
           7 | 4                | Sub Child Object of 1 -> 4 
           8 | 5                | Sub Child Object of 2 -> 5 
```

# jquery - 使用 Jquery 检查位置

> ID：10085626
> 
> 赞同：0
> 
> 时间：2012-04-10T08:46:43.923
> 
> 标签：jquery, html

假设我有这样的 html 结构：如何使用 jquery 进行类似的检查：如果**“tab2”**在**“tab3 Active”**之前做某事......如果**“tab2”**在**“tab3 Active”**之后做其他事情?
谢谢你们！！！

```
 <html>
 <head>
 </head>
 <body>

 <ul class="Mytabs">
 <li class="tab1"></li>
 <li class="tab2"></li>
 <li class="tab3 Active"></li>
 <li class="tab4"></li>
 <li class="tab5"></li>

 </ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T08:51:07.267

您可以使用`prev()`and`next()`来检查元素相对于另一个元素的位置。试试这个：

```
var $tab = $(".tab2");
if ($tab.prev(".active").length) {
    // tab2 is after the active tab
}
else if ($tab.next(".active").length) {
    // tab2 is before the active tab
} 
```

使用此方法，您可以轻松更改要检查的选项卡，并且哪个选项卡上有`active`类都没有关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:49:55.863

```
if ($('.tab2 + .tab3.Active').length) { /* do something */ }

if ($('.tab3.Active + .tab2').length) { /* do something else */ } 
```

您可以只使用相邻的选择器 ( `+`)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T08:51:40.950

查看[下一个（）](http://api.jquery.com/next/)

```
if ($('.tab2').next().hasClass('tab3')) {
   // tab2 before tab3
} else {
   // tab3 before tab2
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T08:53:10.757

```
if($(".tab2").parent().children().index(".tab2") < $(".tab3").parent().children().index(".tab3")) {
}
else {
} 
```

# android - PhoneGap 1.4 包装 Sencha Touch 2.X - 性能如何？

> ID：10085637
> 
> 赞同：24
> 
> 时间：2012-04-10T08:47:47.623
> 
> 标签：android, ios, performance, cordova, sencha-touch-2

我正在构建一个多平台平板电脑应用程序，仅使用其 webview 将其与 Phonegap 1.4 包装在一起，然后我使用 Sencha Touch 2 框架来发挥我的魔力。多平台是指 iOS 5.X+ 和 Android 3.0+（目前）。

到目前为止，这个应用程序运行良好，它的所有功能都适用于两个系统，但是......在 Android 平板电脑（三星 GalaxyTab）上它真的很慢。发生了什么？我可以做点什么，或者它只是android的限制？

谢谢

里卡多·佩尔：http: [//edgecodetechology.blogspot.pt/](http://edgecodetechology.blogspot.pt/)

* * *

****编辑****（我试图让这篇文章对煎茶社区有所帮助）

> 由于 javascript 本身，Sencha Touch 和许多其他 Javascript 框架一样并不是性能的最佳示例。
> 
> 那么为什么要使用**Sencha Touch**呢？
> 
> *   就我而言：***多平台***（iOS、Android、Windows Phone、Blackberry、Windows、Mac OSX、Linux。共享 80-90% 的代码）

## `Mitigating performance issues due to lack of visual pre-process in Android systems:`

1.  **CSS3重视觉流程：**

    *   避免渐变
    *   避免阴影
    *   避免变换和动画
2.  **良好的 MVC 实践：**

    *   不要使用更多视图，而您实际上正在展示
    *   尽可能预渲染/预数据获取，以避免同时渲染和数据处理
3.  对于任何滚动视图，应在 Android 上禁用过度滚动。我已经在 Android 设备上测试了许多 Sencha Touch 2 应用程序，并且由于延迟和滞后，过度滚动会导致非常不愉快的体验。（在 Galaxy Tab、Nexus S 和一些 HTC 上测试）由 Thiem Nguyen （我一直在挖掘你的帖子，对不起伙计：P）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-10T08:56:50.410

同样在这里。我在三星 GalaxyTab 上测试了很多 Sencha Touch 2 应用程序，性能真的很糟糕。有一个事实（这可能是实际原因的一部分），iOS 在渲染之前会进行许多预处理和计算，以使其在用户的外观和感觉上看起来更流畅，而 Android 倾向于在旅途中同时渲染和处理。

总的来说，可以说，对于像 Sencha Touch 这样的基于 Javascript 的跨平台移动应用程序，iOS 的性能明显优于 Android。但是，Sencha Touch 开发团队正在尽最大努力改进这一点，希望在下一个版本中会更好。你可以看到这篇关于 iOS 和 Android 设备性能比较的文章。

[http://www.sencha.com/blog/sencha-touch-2-developer-preview/](http://www.sencha.com/blog/sencha-touch-2-developer-preview/)

PS：虽然它与操作系统的限制密切相关，但您也可以优化您的应用程序，使其在 Android 设备上表现更好。根据我的经验，最佳做法是：

*   不要过多地使用 CSS3。
*   尽可能减少 DOM。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T00:00:55.597

我不是 phoneGap 或 Sencha 开发人员，但我尽量跟上有关浏览器性能和发展的问题。

你的应用程序有这么多抽象层（sencha touch、phonegap、android、webkit、fffuuu），以至于很难理解性能问题出在哪里。

就我得到phonegap设计而言，它没有嵌入任何webkit实现，它（在android上）所做的是利用android.webkit.WebView。我发现很多人抱怨 webview 的性能比 android webkit 浏览器本身糟糕。在这里可能很难改进，因为您使用的是phonegap，并且如果这对您很重要，那么弄乱android sdk可能会使您失去可移植性。

我认为 phonegap 的性能问题不仅取决于硬件，还取决于操作系统的浏览器实现。

如果你想调整性能，那么你可以改进你的 js/css 代码。这可以很简单，比如在 js 中缓存 DOM 节点（DOM 查询很慢），保持 DOM 最小化或者可能更难，因为由于 phonegap 的目标是不同的浏览器引擎实现，您可能需要将代码定位到这些浏览器以便提高性能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T19:46:03.680

我不太确定问题是否与操作系统直接相关，就好像应用程序在 Android、iOS 等设备上运行一样。

如果您在中低性能硬件设备（如 Samsumg Galaxy）上测试 Sencha Touch 2 Kitchen Sink 示例，您将遇到性能低下的问题。

但是，如果您转向更好的硬件设备，例如 HTC Desire 2（更接近 iPhone 4S），您会发现性能会变得更好。

我认为与 iOS 相比，Android 在 Sencha Touch 2 的性能方面没有限制。我只是认为有些设备比其他设备好（iOS 总是在高性能设备上运行，iPhone/iPad）。

对于我们的痛苦，人们倾向于拥有价格较低且硬件能力强的产品。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T10:57:29.557

关于基于 SenchaTouch 的应用程序的性能，我有几个基本问​​题。请参阅 LinkedLN 团队的这篇文章，了解他们如何通过手动编码 DOM 操作来提高 HTML5 应用程序的性能：-

[http://engineering.linkedin.com/linkedin-ipad-5-techniques-smooth-infinite-scrolling-html5](http://engineering.linkedin.com/linkedin-ipad-5-techniques-smooth-infinite-scrolling-html5)

在本文的上下文中，我看到了 Sencha Touch 的两个问题：-

1.  Sencha Touch 通过将 javascript 对象转换为 Dom 节点并将它们添加到 Dom 树中来构建其 UI。Chrome 工具将显示它最终会在 Dom 树中添加相对较多的 DIV 和其他 DOM 元素。这不会对性能产生不利影响。

2.  Sencha UI 中的大多数 Dom 节点是由 Sencha API 代码生成的，而不是由标记生成的。如果我们编写代码直接操作这些 Dom 元素，我们能确定它不会产生任何副作用吗？

# .net - 提高应用程序性能和智能

> ID：10085641
> 
> 赞同：5
> 
> 时间：2012-04-10T08:47:58.563
> 
> 标签：.net, performance, memory-management, windows-services, cpu-usage

我有一个与应用程序性能和智能有关的问题。

如果我在 3 台不同的配置机器上运行它，我已经创建了一个窗口服务。我希望它利用适当的机器资源（CPU 和内存）。

假设机器 1(M1) 具有单核和 1 GB 内存。

Machine2 (M2) 有两个内核和 2 GB 内存。

Machine3 (M3) 有 4 个内核和 4 GB 内存。

现在，当我的服务在其上运行时，它应该利用适当的资源。就像机器的 cpu 使用率是 1% 一样，它应该让用户达到 50% 或更多。如果已经是 50%，则只使用 30%。公羊也是如此。但永远不要超过 90% 之类的限制。

基本上我写了一个多线程服务，它现在不关心机器资源并继续使用它。我想将这种智能包含在其中。

请帮我谈谈你的想法。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T19:55:34.370

正如 Archeg 所说，根据处理器的数量，您可以增加线程数。但是根据 CPU 活动增加线程数是错误的方法。

以这种方式看待它 - CPU 调度程序以毫秒为粒度分配时隙。如果其他进程对系统的负载较低，它将*给您的进程更多时间。时期。*如果有很多进程，*您将获得较少的时隙*。你不应该用比必要的更多的线程来处理它。

你需要做的是决定*你*想做什么。服务对时间敏感吗？如果是这样，那么在负载较重的系统中，您可以使用更少的 CPU 时间进行操作，而在空闲系统中，您可以在相同的时间内使用更多的 CPU 时间，比如一秒钟。*注意：如果您的服务执行 I/O，则您的服务本身可能会限制它可以使用多少 CPU。*

使用 RAM，您可以执行类似的操作，考虑到系统有多少可用 RAM，将算法切换到使用较少处理或处理速度更快但需要更多内存的算法（反之亦然）。

关键是除了更好的调度器（这是许多聪明人多年来一直在关注的东西）之外，没有“独立于服务”的方式来进行这种智能扩展。但是，您可以编写了解当前系统约束并相应更改行为的服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T05:59:28.813

如果您在设计时考虑到了性能，那么构建高性能 .NET 应用程序会容易得多。确保从项目一开始就制定绩效计划。永远不要尝试将性能添加为构建后的步骤。此外，使用包含迭代之间不断测量的迭代开发过程。

通过遵循最佳实践设计指南，您可以显着增加创建高性能应用程序的机会。

**考虑以下设计指南：**

*   **考虑安全性和性能。**
*   **对您的应用程序进行逻辑分区。**
*   **评估亲和力。**
*   **减少往返。**
*   **避免阻塞长时间运行的任务。**
*   **使用缓存。**
*   **避免不必要的异常。**

# ajax - 如何对spinejs中获取的数据做出正确反应

> ID：10085649
> 
> 赞同：0
> 
> 时间：2012-04-10T08:48:32.070
> 
> 标签：ajax, coffeescript, spine.js

我已经建立了一个小型的 spinjs 应用程序，它带有一个 api 作为后端，用于存储新数据和服务已经保存的数据。当我的应用程序正在加载时，我正在执行以下操作：

```
require('lib/setup')

Spine = require('spine')
Posts = require('controllers/posts')
Post = require('models/post')

class App extends Spine.Controller
  constructor: ->
  super

  @log("App up and running :)")

  @posts = new Posts
  Post.fetch()

  #defining starting point of application
  @routes
    '/': ->
       @posts.main.show_all.active()

  Spine.Route.setup()

  @html @posts.active()

module.exports = App 
```

我的目标是在访问索引页面时显示最新的 5 个帖子。获取数据工作正常，但我只能在通过墨水重新访问索引页时看到数据。我必须怎么做才能看到刚刚加载的帖子！？我已经红色了一些我必须对刷新事件做出反应的东西。但是现在我不知道应该在哪里添加监听器以及它必须做什么。家里有人可以给我一个提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:51:23.397

您必须将处理程序绑定到 Post 模型的刷新事件

```
Post.fetch()
Post.bind 'refresh', @onPostsFetched 
```

其中 onPostsFetched 是控制器的方法

```
onPostsFetched: ->
  @posts = Post.all() 
```

希望这可以帮助

# asp.net - ASP.NET Razor 视图 Html.TextBox 大小/宽度

> ID：10085651
> 
> 赞同：23
> 
> 时间：2012-04-10T08:48:42.143
> 
> 标签：asp.net, razor

有没有办法在不使用 CSS（设置列或大小属性）的情况下设置文本框大小？如果是这样，怎么做？

```
 @Html.TextBox("redeemamt", @Model.Amount) 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-10T08:55:09.120

```
@Html.TextBox("redeemamt", @Model.Amount, new {style = "width: 100px;"}) 
```

或者你可以试试这个：

```
@Html.TextBox("redeemamt", @Model.Amount, new { size = "100" }) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T16:37:39.740

听起来您正在寻找 Html.TextArea：

`@Html.TextArea((string)name, (string)value, (int)rows, (int)columns, (object)htmlAttributes)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-28T07:32:21.677

如果您添加了引导程序，那么您可以检查输入属性并修改

例如改变高度

```
input[type="text"]
height: 25px;
line-height: 25px; 
```

# ios - PhoneGap / Cordova 1.5 iOS“不备份”文件属性

> ID：10085653
> 
> 赞同：1
> 
> 时间：2012-04-10T08:48:46.363
> 
> 标签：ios, cordova, icloud, phonegap-build

根据苹果网站上的开发者文档：[https ://developer.apple.com/library/ios/#qa/qa1719/_index.html](https://developer.apple.com/library/ios/#qa/qa1719/_index.html)

> 从 iOS 5.0.1 开始，引入了新的“不备份”文件属性，允许开发人员明确指定应备份哪些文件。(com.apple.MobileBackup)

我想知道PhoneGap / Cordova是否支持这一点，因为我希望能够存储一些不支持的离线数据（可以下载或以其他方式重新创建的数据，但用户希望在离线时可靠可用）在 iCloud 上。

在 PhoneGap 网站上明确记录了持久性（LocalFileSystem.PERSISTENT - [http://docs.phonegap.com/en/1.5.0/phonegap_file_file.md.html#LocalFileSystem](http://docs.phonegap.com/en/1.5.0/phonegap_file_file.md.html#LocalFileSystem)），但似乎无法确保保存文件未备份到 iCloud。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-29T11:03:14.300

从 Phonegap 1.9 开始，您可以在 config.xml 中设置：

```
 <preference name="BackupWebStorage" value="none" /> 
```

*BackupWebStorage（字符串，默认为云）：有效值为无、云和本地。设置为云以允许将 Web 存储数据备份到 iCloud，设置为本地以仅允许本地备份（iTunes 同步）。设置为 none 以不允许对 Web 存储进行任何备份。*

为了检查它是否有效，Apple 建议以这种方式检查您在 iCloud 的支持下放置了多少数据：

*   安装并启动您的应用
*   转到设置 > iCloud > 存储和备份 > 管理存储
*   如有必要，点击“显示所有应用”
*   检查您应用的存储空间

请注意，这不能在模拟器中完成。你需要一个真实的设备。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T12:38:24.260

我仍然在 PhoneGap / Cordova 中寻求解决方案，但作为临时工作......

在我的 AppDelegate 初始化中：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

// Get documents directory
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *formularyPath = [documentsDirectory stringByAppendingPathComponent:@"OfflineData"];

if (![[NSFileManager defaultManager] fileExistsAtPath:formularyPath])
    [[NSFileManager defaultManager] createDirectoryAtPath:formularyPath withIntermediateDirectories:NO attributes:nil error:nil];

// Prevent iCloud backup
u_int8_t b = 1;
setxattr([formularyPath fileSystemRepresentation], "com.apple.MobileBackup", &b, 1, 0, 0); 
```

不要忘记**#import "sys/xattr.h"**

这将在文档下创建一个新文件夹并设置无备份属性。

然后，您可以使用持久本地文件存储选项将文件保存在 PhoneGap 中，并且不会备份保存在新子目录中的文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T04:09:36.697

这是一个利用 Cordova 框架的功能性 JS 代码示例，我相信它可以解决 Apple 正在寻找的问题。

```
document.addEventListener("deviceready",onDeviceReady,false);

function onSetMetadataSuccess() {
    console.log("success setting metadata - DONE DONE DONE!")
}
function onSetMetadataFail() {
    console.log("error setting metadata")
}
function onGetDirectorySuccess(parent) {
    console.log("success getting dir");
    parent.setMetadata(onSetMetadataSuccess, onSetMetadataFail, { "com.apple.MobileBackup": 1});
}
function onGetDirecotryFail() {
    console.log("error getting dir")
}

function onFileSystemSuccess(fileSystem) {
    console.log("onFileSystemSuccess()")

    var dirEntry = fileSystem.root;
    dirEntry.getDirectory('Backups', {create: true, exclusive: false},
            onGetDirectorySuccess, onGetDirecotryFail);

}

function onFileSystemFail(evt) {
    console.log("!!!!! onFileSystem fail...")
    console.log(evt.target.error.code);
}

/* When this function is called, PhoneGap has been initialized and is ready to roll */
function onDeviceReady()
{

    // this and subsequent callbacks tells iOS not to store our data in iCloud.
    // without it they rejected our app because of the way PG 1.8 does local->tem storage
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFileSystemSuccess, onFileSystemFail);

} 
```

# wpf - 如何为用户控件创建 MVVM 而不将所有内部结构暴露给消费者？

> ID：10085655
> 
> 赞同：1
> 
> 时间：2012-04-10T08:48:53.587
> 
> 标签：wpf, mvvm, binding, user-controls

我正在使用 MVVM 设计一些复杂的用户控件。UserControls 的数据上下文处理所有逻辑并将 UserControl 交互的结果提供给控件的使用者。

我面临的问题是，看起来 internal 不适用于绑定，如果我尝试绑定到非公共绑定的源属性不起作用。如果我必须打开（amek public）我的 VM 顶部的所有源属性能够绑定它们，那么我将打开 UserControl 和使用者的内部：

1.  对使用什么属性感到困惑。
2.  可以使用不供外部使用的属性来破坏事物。

有任何想法吗？

提前致谢。

编辑：好吧，看起来来源必须始终是公开的，对吧[。](http://msdn.microsoft.com/en-us/library/ms743643.aspx)但是我仍然面临公开内部信息的问题。有什么解决办法吗？

***例子：***

您创建一个通用的用户控件。该控件应该是一个黑盒，它接受最终用户提供的查询，向他显示（以某种方式）查询返回的行，并让 UserControl 使用者获取选定的值。该控件是使用显示行的组合框实现的。

UserControl 位于 UserControl.xaml 中，并且有一个带有 UserControl 的 ViewModel 的 UserControlVM.cs 文件。

ViewModel 包含要执行的查询、查询返回的项目列表和所选项目。项目列表和选定项目是公开的，以便能够绑定到 UserControl。

消费者在其窗口内使用 UserControl 的一个实例，在其窗口视图模型内使用 UserControlVM 的一个实例。我面临的问题是最终用户有权访问查询返回的项目列表，而他只应该有权访问所选项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:13:50.770

我找到了一种解决方案（但如果您的 ViewModel 需要构造函数参数，我会向您推荐这不起作用）。

1.  在保持绑定属性公开的同时将 ViewModel 设为内部。
2.  创建一个类“UserControlData”，其中包含用户控件将提供给最终用户的数据
3.  通过 UserControl 依赖属性提供该类的实例。
4.  用户控件使用者必须在其视图模型中绑定 UserControlData 实例才能获得用户控件结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:21:20.913

该类的所有属性目标都`Binding`必须是公共的

这是一个可能的替代解决方案：

您的`DataContext`（如果是 a `ViewModel`）很可能实现`INotifyPropertyChanged`. 如果是这样，那么当您在 上设置`DataContext`( `ViewModel`) 时`UserControl`，只需订阅`PropertyChanged`事件处理程序，然后在您的代码隐藏中编写逻辑以根据更改的数据操作您的控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:00:32.540

作为类的实现细节的数据不应该是公开的，但在我看来，你甚至不应该想绑定到这种类型的数据。绑定到视图的数据应该是视图模型的公共属性和命令。请记住，视图模型定义**了**您的 UI 是什么。

用户界面不允许更改的公共属性应该只实现 getter，而不是 setter。只能在某些条件下更改的公共属性应在设置器中强制执行这些条件。视图模型应该提供并容纳所有的 UI 逻辑（属性和命令）。

您还应该将视图模型包装在测试所有这些的单元测试中。

根据评论反馈更新：

```
class MyViewModel : ViewModelBase
{
     private bool _showSomething;
     public bool ShowSomething
     {
         get { return _showSomething; }
         set
         {
             _showSomething = value;
             RaisePropertyChanged("ShowSomething");
             RaisePropertyChanged("TheThing");
         }
     }

     public Something TheThing
     { 
         get
         {
             if(_showSomething) { return _theThing; }
             return _theOtherThing;
         }
     }

     private Something _theThing;
     private Something _theOtherThing;

} 
```

编辑*：根据评论，以下内容可能更接近于所需内容。

```
public interface IQueryControl
{
    string Query { get; set; } //view passes query in
    ReadOnlyCollection<string> QueryResultDescriptions { get; } //bind to combo items
    string SelectedQueryDescription { get; set; } //bind to combo selection
    object SelectedItem { get; } //resulting object
}

public class UserControlVM : ViewModelBase, IQueryControl
{
    private string _query;
    private ObservableCollection<object> _queryResults;
    private ReadOnlyCollection<string> _externalResults;
    private object _selectedResult;

    public string Query 
    { 
        get { return _query; } 
        set 
        {
            _query = value; 
            RaisePropertyChanged("Query");
            UpdateQueryResults(); 
        }
    }

    private void UpdateQueryResults()
    {
        //Do query which allocates / updates _queryResults;
        _externalResults = new ReadOnlyCollection<string>((from entry in _queryResults select entry.ToString()).ToList<string>());
        RaisePropertyChanged("QueryResultDescriptions");
    }

    public ReadOnlyCollection<string> QueryResultDescriptions
    {
        get { return _externalResults; }
    }

    public string SelectedQueryDescription
    {
        get { return _selectedResult.ToString(); }
        set
        {
            SelectResult(value);
        }
    }

    private void SelectResult(string value)
    {
        Dictionary<string, object> lookup = _queryResults.ToDictionary<object, string>((result) => { return result.ToString(); });
        if (lookup.ContainsKey(value))
        {
            _selectedResult = lookup[value];
            RaisePropertyChanged("SelectedQueryDescription");
            RaisePropertyChanged("SelectedItem");
        }
        else
        {
            //throw something
        }
    }

    public object SelectedItem
    {
        get { return _selectedResult; }
    }

} 
```

# python - 用户上传视图

> ID：10085664
> 
> 赞同：-2
> 
> 时间：2012-04-10T08:49:47.340
> 
> 标签：python, django

当用户在 MEDIA_ROOT ("usermedia") 目录中上传文件时，usermedia 目录中的所有上传文件都是 PIN.pdf 格式。每个用户都有其唯一的 PIN 码（11 个数字），在用户注册时输入。

我想在我的应用程序中创建 view.html 文件，其中将显示上传文件。不适用于所有用户。用户只能看到自己的文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T08:59:14.533

您可以在某处（通过模型在数据库中）捕获我的用户上传的文件的路径，然后按用户过滤模型并显示所有上传的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:55:31.457

最简单（但不是最好的）是存储上传 MEDIA_ROOT + 用户 ID。但这并不安全和好。在您看来，您可以列出用户上传目录中的所有文件。

# android - 在列表视图中选择多个项目并更改所选项目的背景颜色

> ID：10085666
> 
> 赞同：0
> 
> 时间：2012-04-10T08:49:53.870
> 
> 标签：android, android-listview

嘿，我被一件事困住了，我想要这样的视图：

![在此处输入图像描述](../Images/b72728842e39352be8437ccecd3edf18.png)

在列表视图中，我可以选择多个项目，无论我可以选择哪个项目，我都可以更改背景颜色并将该项目添加到数组列表中，以便我可以进一步使用它。

有人请帮助我吗？

**编辑：**

我像这样使用它：

```
 ArrayAdapter<String> part_list_adapter=new ArrayAdapter<String>(AssetSearch.this,  R.layout.part_list,R.id.label,part_array_list);

    PartNumber_List.setAdapter(part_list_adapter);

       PartNumber_List.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View v, int position,
            long id) {
        String item = (String)PartNumber_List.getItemAtPosition(position);

        Log.i("Item", item);
         v.setBackgroundColor(R.color.result_image_border);

    }
}); 
```

在日志中，它向我显示了仅单击的项目..但更改了 2 个项目的颜色...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:38:10.010

试试这样。。

```
 @Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    // Get the item that was clicked
   String item = (String) getListAdapter().getItem(position);
    boolean blnFound = yourarrayList.contains(item);
 if(blnFound=true){
     yourarraylist.remove(item);
       v.setBackgroundColor(R.color.somecolourtoindicate notselected);

    }
   else{
          yourarraylist.add(item);
          v.setBackgroundColor(R.color.somecolourtoindicate itemselected);
    }
    yourarraylist.add((String) getListAdapter().getItem(position);)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:48:05.867

您将为列表视图单元格的 View v 设置背景，实际上列表视图适配器在您滚动视图时重用单元格视图，因为颜色反映在其他一些行单元格中。

唯一的选择是您需要将一个图像视图添加到视图持有者并尝试更改视图持有者中图像视图的背景，不要更改适配器视图颜色。

# iphone - 在屏幕周围随机移动两个或多个对象

> ID：10085671
> 
> 赞同：0
> 
> 时间：2012-04-10T08:50:22.753
> 
> 标签：iphone, objective-c, ios, xcode

我正在尝试为 UIImageview 设置动画以在屏幕上随机移动。对于一个 UIImageView 它工作正常。但是对于两个或更多对象，它不起作用。谁能帮我？

```
-(void)animationLoop:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context {          
    [UIView beginAnimations:nil context:nil];          
    [UIView setAnimationDuration:1];             
    CGFloat x = (CGFloat) (arc4random() % (int) self.view.bounds.size.width);        
    CGFloat y = (CGFloat) (arc4random() % (int) self.view.bounds.size.height);           
    CGPoint squarePostion = CGPointMake(x, y);         
    image.center = squarePostion;     
    [UIView setAnimationDelegate:self];       
    [UIView setAnimationDidStopSelector:@selector(animationLoop:finished:context:)];
    [UIView commitAnimations];    
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:36:20.327

最初，当您要启动动画时，请按如下方式启动动画。

```
NSNumber *number1 = [NSNumber numberWithInt:0];
[UIView beginAnimations:nil context:number1];          
[UIView setAnimationDuration:2.0];             
CGFloat x = (CGFloat) (arc4random() % (int) self.view.bounds.size.width);        
CGFloat y = (CGFloat) (arc4random() % (int) self.view.bounds.size.height);           
CGPoint squarePostion = CGPointMake(x, y);         
imgView1.center = squarePostion;     
[UIView setAnimationDelegate:self];   
[UIView setAnimationDidStopSelector:@selector(animationLoop:finished:context:)];
[UIView commitAnimations];    

number1 = [NSNumber numberWithInt:1];
[UIView beginAnimations:nil context:number1];          
[UIView setAnimationDuration:2.0];             
x = (CGFloat) (arc4random() % (int) self.view.bounds.size.width);        
y = (CGFloat) (arc4random() % (int) self.view.bounds.size.height);           
squarePostion = CGPointMake(x, y);         
imgView2.center = squarePostion;     
[UIView setAnimationDelegate:self];       
[UIView setAnimationDidStopSelector:@selector(animationLoop:finished:context:)];
[UIView commitAnimations]; 
```

你的`animationLoop:finished:context:`方法应该如下。

```
-(void)animationLoop:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context {          
    [UIView beginAnimations:nil context:context];          
    [UIView setAnimationDuration:2.0];             
    CGFloat x = (CGFloat) (arc4random() % (int) self.view.bounds.size.width);        
    CGFloat y = (CGFloat) (arc4random() % (int) self.view.bounds.size.height);           
    CGPoint squarePostion = CGPointMake(x, y);   

    int i = [(NSNumber*)context intValue];
    if( i == 0 )
    {
        imgView1.center = squarePostion;    
    }
    else
    {
        imgView2.center = squarePostion;    
    }
    [UIView setAnimationDelegate:self];       
    [UIView setAnimationDidStopSelector:@selector(animationLoop:finished:context:)];
    [UIView commitAnimations];    
} 
```

如上所述进行更改并尝试。你会得到你需要的。

# c# - 如何从excel中逐行读取并将其存储在c#中的一些临时变量中

> ID：10085674
> 
> 赞同：-1
> 
> 时间：2012-04-10T08:50:26.277
> 
> 标签：c#, asp.net, c#-4.0

我正在用 c# 读取 excel 文件。

* * *

```
 AAAA            bbbbb              cccc
        1                2                  3
        4                5                  6
        --------------------------------------

        --------------------------------------

       data           data                  data 
```

我想读取每一行并将其存储在临时变量中。

任何人都可以分享所需的dll和对其的看法。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:23:56.420

您可以按照以下步骤操作：

1.  添加参考：Microsoft.Office.Interop.Excel
2.  在后面的代码中使用它：使用 Microsoft.Office.Interop.Excel；
3.  使用以下代码将 excel 数据导入 DataTable：

    ```
    string strConn = "提供者=Microsoft.ACE.OLEDB.12.0;" +“数据源=”+数据文件名+“;” + "扩展属性=Excel 12.0;";
            OleDbDataAdapter myCommand = new OleDbDataAdapter("SELECT * FROM [Sheet1$]", strConn); `//fetching excel data into DataTable
        System.Data.DataTable _dtDataFile = new System.Data.DataTable();
        myCommand.Fill(_dtDataFile);` 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T08:53:58.393

您需要使用 OpenXml。请阅读这个问题：[open xml excel read cell value](https://stackoverflow.com/questions/5115257/open-xml-excel-read-cell-value)

然后你只需要循环所有单元格并存储在你想要的位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T08:52:53.940

```
 string connstr ="Provider=Microsoft.Jet.Oledb.4.0;Data Source=C:\aaa.xls;Extended Properties=Excel 8.0"/>

        OleDbConnection conn = new OleDbConnection(connstr);

        string strSQL = 
"SELECT * FROM [Sheet$]"; 

        OleDbCommand cmd = new OleDbCommand(strSQL, conn);

        DataSet ds = new DataSet();

        OleDbDataAdapter da = new OleDbDataAdapter(cmd);

        da.Fill(ds); 
```

# c# - c#中的通用参数

> ID：10085675
> 
> 赞同：2
> 
> 时间：2012-04-10T08:50:31.010
> 
> 标签：c#, inheritance, where, array-initialization

我有这个课程：

```
interface Info{}

class AInfo : Info { }
class BInfo : Info { }

class SendInfo {
    static public f_WriteInfo(params Info[] _info) {

    }
}

class Test {
  static void Main() {
    SendInfo.f_WriteInfo( 
                        new[] { 
                            new AInfo(){ ... },
                            new BInfo(){ ... },
                       } );
// This will generate an error. 
// There will be need casting between new and [] like new Info[]
  }
} 
```

有没有办法做到这一点而不铸造？

像：

```
class SendInfo {
    static public f_WriteInfo(params T _info) where T : Info { 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T08:55:57.773

将您的方法签名设置为：

```
static public f_WriteInfo(params Info[] _info) {} 
```

并称之为：

```
SendInfo.f_WriteInfo(new AInfo(){ ... }, new BInfo(){ ... }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T09:03:01.017

这很好用

```
interface Info { }

class AInfo : Info { }
class BInfo : Info { }

class SendInfo
{
    public static void f_WriteInfo(params Info[] _info)
    {
    }
}

class Test
{
    static void Main()
    {
        SendInfo.f_WriteInfo(new AInfo(), new BInfo());
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T08:56:58.383

尝试：

```
namespace ConsoleApplication1
{
    interface Info{}

public class AInfo : Info
{
    public AInfo(){}
}
public class BInfo : Info { }

class SendInfo {
    public static void f_WriteInfo(params Info[] _info) {

    }
}

class Program
{
    static void Main(string[] args)
    {
        SendInfo.f_WriteInfo( 
                    new Info[] { 
                        new AInfo(),
                        new BInfo()
                   } );
    }
} 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T10:29:49.273

来自[MSDN](http://msdn.microsoft.com/en-us/library/w5zay9db%28v=vs.100%29.aspx)

> params 关键字允许您指定一个方法参数，该参数采用可变数量的参数。您可以发送以逗号分隔的参数声明中指定类型的参数列表，或指定类型的参数数组。您也可以不发送任何参数。

所以你不需要`new []`在参数之前写。

我想下面的链接也将很有用
[how-to-pass-a-single-object-to-a-params-object](https://stackoverflow.com/questions/36350/how-to-pass-a-single-object-to-a-params-object)

# maven - 如何将依赖项包含在文件名中没有版本的 EAR 中

> ID：10085678
> 
> 赞同：5
> 
> 时间：2012-04-10T08:50:44.280
> 
> 标签：maven, dependencies

我正在使用 maven 创建*.ear*

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-ear-plugin</artifactId>
  <version>2.6</version>
  <configuration>
    <finalName>wsformatter-ear</finalName>
    <includeLibInApplicationXml>true</includeLibInApplicationXml>
    <version>1.4</version>
  </configuration>
</plugin> 
```

.ear 中的所有依赖项看起来像**joda-time-1.6.2.jar**、**commons-io-1.4.jar**等。

而且，我有依赖项，我希望没有版本。例如，我该怎么做，依赖**slf4j-api-1.5.6.jar**在我的*.ear*中看起来像**slf4j-api.jar**

 ** * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-17T21:56:28.557

我完全同意 Michal Kalinowski 的观点。但是我陷入了同样的情况，实际上是相反的情况 - 有人将项目配置为排除最终 EAR 中的版本，我正在寻找一种方法来取消它，因为它违反了 maven 的生活方式，所以我我在网上搜索并找到了这个问题，但我在代码本身中找到了答案。您可以使用：

```
<plugin>
   <groupId>org.apache.maven.plugins</groupId>
   <artifactId>maven-ear-plugin</artifactId>
   <configuration>
        <version>5</version>
    <defaultLibBundleDir>lib</defaultLibBundleDir>
    <fileNameMapping>no-version</fileNameMapping>
   </configuration>
</plugin> 
```

带有标签**fileNameMapping**的行就是你想要的。我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T09:49:48.240

基本上，你不能（没有对 Maven 插件配置的某种黑客攻击），即使你可以 - 只是不要。Maven 关于依赖关系的方法和理念是严格而直接的，包括将版本作为文件名后缀的默认约定。它只是立即说明使用了哪个版本的工件。如果您依赖某个经常发布的工件，那么无论如何您都必须在 EAR 的 POM 中更新它的版本，因此它的“传播”不会以某种方式自动执行。因此，我认为这个文件名后缀没有任何问题。

如果这种频繁更改的需求对您来说是个问题，也许您应该考虑以某种方式修改这个频繁发布的工件的开发周期？也许你可以延长它在同一个 SNAPSHOT 版本中花费的时间？即使您经常进行“内部”发布（例如 nightbuilds），Maven 也不会强迫您在每次发布时都增加版本（在 Maven 发布插件的意义上）。您可以根据需要保留一些 SNAPSHOT 版本。即使在非常快速的敏捷流程（或看板）中，这种“真正的”发布通常每隔几周就会发生一次，而且时间足够长，可以管理。

最后，不是这样的，我不会帮助你（或类似的事情）或不想。我只是认为你试图反对 Maven。如果你接受并遵循它的方法和约定，Maven 真的很强大。根据我的经验，试图解决这个问题（迟早）意味着问题。我已经看到许多项目具有类似 Maven 的 Ant 配置，并且许多开发人员抱怨 Maven 很烂。在弄清楚那里的东西之后，我说：“Maven 不烂，你的 POM 可以”。*

# jsf - 无效的系统 ID - Liferay 门户 - Java Server Faces

> ID：10085679
> 
> 赞同：0
> 
> 时间：2012-04-10T08:50:45.390
> 
> 标签：jsf, liferay

我尝试将 portlets 应用程序部署到 Liferay 门户（我是维护者，而不是作者）。

但我得到一个例外：

```
08:08:48,060 ERROR [AutoDeployDir:197] com.liferay.portal.kernel.deploy.auto.Aut
oDeployException: com.liferay.portal.kernel.xml.DocumentException: Invalid syste
m id classpath:/com/sun/faces/web-facesconfig_2_0.xsd Nested exception: Invalid
system id classpath:/com/sun/faces/web-facesconfig_2_0.xsd
com.liferay.portal.kernel.deploy.auto.AutoDeployException: com.liferay.portal.ke
rnel.xml.DocumentException: Invalid system id classpath:/com/sun/faces/web-faces
config_2_0.xsd Nested exception: Invalid system id classpath:/com/sun/faces/web-
facesconfig_2_0.xsd
        at com.liferay.portal.deploy.auto.PortletAutoDeployer.autoDeploy(Portlet
AutoDeployer.java:99)
        at com.liferay.portal.deploy.auto.PortletAutoDeployListener.deploy(Portl
etAutoDeployListener.java:78)
        at com.liferay.portal.kernel.deploy.auto.AutoDeployDir.processFile(AutoD
eployDir.java:180)
        at com.liferay.portal.kernel.deploy.auto.AutoDeployDir.scanDirectory(Aut
oDeployDir.java:222)
        at com.liferay.portal.kernel.deploy.auto.AutoDeployScanner.run(AutoDeplo
yScanner.java:50)
Caused by: com.liferay.portal.kernel.xml.DocumentException: Invalid system id cl
asspath:/com/sun/faces/web-facesconfig_2_0.xsd Nested exception: Invalid system
id classpath:/com/sun/faces/web-facesconfig_2_0.xsd
        at com.liferay.portal.xml.SAXReaderImpl.read(SAXReaderImpl.java:339)
        at com.liferay.portal.kernel.xml.SAXReaderUtil.read(SAXReaderUtil.java:1
27)
        at com.liferay.portal.tools.deploy.PortletDeployer.setupJSF(PortletDeplo
yer.java:429)
        at com.liferay.portal.tools.deploy.PortletDeployer.getExtraContent(Portl
etDeployer.java:146)
        at com.liferay.portal.tools.deploy.BaseDeployer.updateWebXml(BaseDeploye
r.java:1789)
        at com.liferay.portal.tools.deploy.BaseDeployer.deployDirectory(BaseDepl
oyer.java:530)
        at com.liferay.portal.tools.deploy.BaseDeployer.deployFile(BaseDeployer.
java:889)
        at com.liferay.portal.tools.deploy.BaseDeployer.deployFile(BaseDeployer.
java:819)
        at com.liferay.portal.deploy.auto.PortletAutoDeployer.autoDeploy(Portlet
AutoDeployer.java:96)
        ... 4 more
Caused by: org.dom4j.DocumentException: Invalid system id classpath:/com/sun/fac
es/web-facesconfig_2_0.xsd Nested exception: Invalid system id classpath:/com/su
n/faces/web-facesconfig_2_0.xsd
        at org.dom4j.io.SAXReader.read(SAXReader.java:484)
        at org.dom4j.io.SAXReader.read(SAXReader.java:264)
        at com.liferay.portal.xml.SAXReaderImpl.read(SAXReaderImpl.java:336)
        ... 12 more 
```

因为它不在我的代码中，所以我不知道出了什么问题:(任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:59:09.337

> ```
> Caused by: org.dom4j.DocumentException: Invalid system id classpath:/com/sun/faces/web-facesconfig_2_0.xsd 
> ```

此异常表明您有一个`faces-config.xml`文件由于某种原因被错误地声明为

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee /com/sun/faces/web-facesconfig_2_0.xsd"
    version="2.0">
</faces-config> 
```

代替

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">
</faces-config> 
```

# c++ - 寻找下限最近的点......但数据未排序

> ID：10085682
> 
> 赞同：4
> 
> 时间：2012-04-10T08:51:01.427
> 
> 标签：c++, vector, std

我有一个向量存储到沿线的某个参考点的距离。因此，例如，我想要距离为 700 米或最接近该距离的值的索引。

我假设向量已排序，并成功使用了 lower_bound。

问题是在现实生活中会发生错误，所以我不能保证我总是有一个排序的向量，因为在存储数据时，例如用户可能没有遵循这条线。

如果数据未排序，我如何找到最接近的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T08:53:07.197

你不能，因为`std::vector`它是一个序列容器。您必须使用**[排序](http://www.cplusplus.com/reference/algorithm/sort/)**算法对数据进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T09:09:04.867

您可以使用`std::min_element`它的三参数形式。传递一个比较器，`true`如果第一个参数比第二个参数更接近您的目标距离（700m），则返回该比较器。然后返回的结果`min_element`将是离目标最近的点。

当然，这比 渐近慢`lower_bound`，但它比对向量排序的最坏情况渐近快。如果您可以对向量进行一次排序，然后在搜索多个不同距离处的最近点时依靠它保持排序，那么您可能应该使用`std::sort`and `std::lower_bound`。如果找到最近的点是一次性操作，那么最好以“慢”的方式使用`min_element`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T08:53:51.833

将您复制`vector`到 stl`set`中，然后使用与 vector 相同的逻辑来查找元素。

# android - 带 ZXing 库的条码扫描器

> ID：10085683
> 
> 赞同：-1
> 
> 时间：2012-04-10T08:51:03.097
> 
> 标签：android, zxing

我正在开发条形码应用程序。其中捕获的条码相机图像通过 ZXing 库进行解码。所以很简单，我下载了 jar 文件并将其添加为外部 jar。但我的问题是我如何开始使用该类，根本没有示例代码。所以你能给我一些初始的东西，这样我就可以轻松地完成这个过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:09:52.657

好的，只需通过 Zxing 库源链接，查看[**Android-Integration**](http://code.google.com/p/zxing/source/browse/trunk#trunk%2Fandroid-integration%2Fsrc%2Fcom%2Fgoogle%2Fzxing%2Fintegration%2Fandroid)部分，您可以在其中找到如何使用**Android-Zxing**库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:30:55.497

从您的应用程序中调用 ZXing SCAN Intent 的方式，如下所示：

```
public Button.OnClickListener mScan = new Button.OnClickListener() {
    public void onClick(View v) {
        Intent intent = new Intent("com.google.zxing.client.android.SCAN");
        intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
        startActivityForResult(intent, 0);
    }
};

public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    if (requestCode == 0) {
        if (resultCode == RESULT_OK) {
            String contents = intent.getStringExtra("SCAN_RESULT");
            String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
            // Handle successful scan
        } else if (resultCode == RESULT_CANCELED) {
            // Handle cancel
        }
    }
}

Ref:http://code.google.com/p/zxing/wiki/ScanningViaIntent

Sample code:http://as400samplecode.blogspot.in/2011/09/android-barcode-scanner-using-zxing.html 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:26:59.163

我的方法是将代码导入 helloworld，让它工作，然后通过将其作为子项目导入来玩弄它。我还将这个 hello world 项目上传到 4shared。参考这篇[文章](https://stackoverflow.com/questions/1276635/how-to-include-and-use-zxing-library-in-android-with-eclipse/9108983#9108983)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T10:10:15.223

如果你不想使用intent方法，你可以在你的项目中直接使用ZXing的几个类。

在这两个stackoverflow帖子之后我做了同样的事情

[如何在我的 Android 项目中使用 zxing core 作为库？](https://stackoverflow.com/questions/5002845/how-to-use-zxing-core-as-library-on-my-andorid-project)

[在安卓应用中嵌入 ZXing](https://stackoverflow.com/questions/5969679/yet-another-question-about-embedding-zxing-in-android-app)

复制基本类后，您可以通过试错法剥离CaptureActivity.java类（这是主要活动类）的部分代码。

# java - 在显示标签中自定义数组列表显示

> ID：10085687
> 
> 赞同：0
> 
> 时间：2012-04-10T08:51:10.950
> 
> 标签：java, arraylist, displaytag

当数组列表中没有数据时，如何自定义在显示标签中显示数组列表的方式？我只是想避免在没有数据时像这样显示 [] 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:28:42.963

Use the help of tags on the client side, after getting request from the sever
Like `JST` tags or `STRUTS` tags:
Just check if the arraysize of your array is zero display empty ""
If it is not empty display content

# ios - AVMutableCompositionTrack 和 AVMutableVideoComposition 问题中没有视频的范围

> ID：10085691
> 
> 赞同：1
> 
> 时间：2012-04-10T08:51:30.087
> 
> 标签：ios, avfoundation

我用几个视频剪辑创建了一个合成，我还添加了一些空白范围，我用 CoreAnimation 显示标题屏幕。

```
|--Video1--|--NoVideo(AVsyncLayer)--|--Video2--| 
```

等等...一切正常，当我开始使用时出现问题：AVMutableVideoComposition、AVMutableVideoCompositionInstruction 和 AVMutableVideoCompositionLayerInstruction，我必须这样做才能正确旋转视频。

```
|--Video1--|--NoVideo(AVsyncLayer)--| 
```

在我的 AVPlayer 中工作正常，但如果我这样做：

```
|--NoVideo(AVsyncLayer)--|--Video1--| 
```

下次我推送新的视图控制器或在导航控制器堆栈中弹出当前视图控制器时，应用程序会崩溃。有时有内存警告有时没有它，但根据仪器我只分配了 1.5Mb。

去年 WWDC 的 AVFoundation 中的 Working With Media 我已经看过好几次了，我唯一能想到的就是评论

> AVMutableVideoCompositionInstruction 不得重叠或包含间隙。

它真的没有。我有整个作文时间的说明。但是 AVMutableCompositionTrack（我的视频轨道）中存在一些空白，我不打算展示视频，而只展示 CoreAnimation 层。

有没有其他人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:36:16.447

扩展 Erik 的解决方案，这就是我所做的。我创建了一个非常简短的黑色影片剪辑，并将其添加到空白时间范围的尾部。它似乎工作正常，但我希望存在更优雅的解决方案。（请注意，在我的代码中，TMAVCompositionTrack 只是一个包装器，它包含用于音频和视频的 AVMutableCompositionTrack 以及其他一些东西。

```
- (void)createEmptySpaceOnTrack:(TMAVCompositionTrack*)avtrack timeRange:(CMTimeRange)timeRangeOfShot {
        [avtrack.videoCompositionTrack insertEmptyTimeRange:timeRangeOfShot];
        [avtrack.audioCompositionTrack insertEmptyTimeRange:timeRangeOfShot];

        // there is a bug where emptyness is trimmed out, so put a brief burst of video blackness at the end of the "emptyness"
        NSURL* assetURL = [[NSBundle mainBundle] URLForResource:@"blackness" withExtension:@"mov"];
        AVAsset* asset = [AVURLAsset URLAssetWithURL:assetURL options:@{ AVURLAssetPreferPreciseDurationAndTimingKey:@(YES) }];
        AVAssetTrack *clipVideoTrack = [[asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
        CMTimeRange timeRangeInAsset = CMTimeRangeMake(kCMTimeZero, CMTimeMakeWithSeconds(0.01, 600));
        CMTime tailEnd = CMTimeSubtract(CMTimeRangeGetEnd(timeRangeOfShot), timeRangeInAsset.duration);
        [avtrack.videoCompositionTrack insertTimeRange:timeRangeInAsset ofTrack:clipVideoTrack atTime:tailEnd  error:nil];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:59:39.917

您需要在轨道上使用 InsertEmptyTimeRange 方法，以便轨道上没有间隙。

有关更多信息，请参阅[扩展 AVMutableComposition 。](https://stackoverflow.com/questions/7892664/extending-an-avmutablecomposition)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T04:27:15.837

在某些情况下插入空时间范围有效，但我们发现它不够好，因为当我们让用户快退/快进并在时间栏上更改时它会中断。为了解决这个问题，我们在没有其他内容显示时添加了一个黑色视频剪辑。

# ruby-on-rails - 使用 mongoid_search gem 在 Mongoid 中进行简单搜索

> ID：10085692
> 
> 赞同：1
> 
> 时间：2012-04-10T08:51:30.833
> 
> 标签：ruby-on-rails, ruby, search, mongodb, mongoid

我正在尝试在我的一个模型中实现搜索。我正在使用 gem “mongoid_search”，并且在搜索时将它与 railscast #240 混合。它似乎返回一个空数组，我不知道为什么。谁能指出我正确的方向？

我的模型如下所示：

```
include Mongoid::Search 

attr_accessible :twitterUsername, :twitterName, :twitterLocation, :twitterDescription, :projects

def self.search(search)
    if search
        search_in :twitterUsername, :twitterName, :twitterLocation, :twitterDescription, :projects
    else
        scoped
    end
end 
```

我的控制器：

```
def index
    @users = User.search(params[:search])

    respond_to do |format|
        format.html # index.html.erb
        format.json { render json: @users }
    end
end 
```

而我的观点：

```
<%= form_tag users_path, :method => 'get', :id => "users_search" do %>
    <p>
        <%= text_field_tag :search, params[:search] %>
        <%= submit_tag "Search", :name => nil %>
    </p>
<% end %> 
```

更新

我也在模型中定义了 twitterUsername（抱歉命名约定不好）：

```
field :provider, :type => String
field :uid, :type => String
field :twitterName, :type => String
field :twitterUsername, :type => String
field :twitterAvatar, :type => String
field :twitterUrl, :type => String
field :twitterPortfolioUrl, :type => String
field :twitterLocation, :type => String
field :twitterDescription, :type => String
field :email, :type => String
field :description, :type => String
field :portfolioUrl, :type => String
field :watchers, :type => Integer
field :inspirations, :type => Integer
field :invitees, :type => Integer
field :shot, :type => String
field :remote_image_url, :type => String
field :hireMe, :type => Boolean
field :projects, :type => Integer
key :twitterUsername

def self.create_with_omniauth(auth)
    create! do |user|
        user.provider = auth['provider']
        user.uid = auth['uid']
        if auth['info']
            user._id = auth['info']['nickname'] || ""
            user.twitterName = auth['info']['name'] || ""
            user.twitterUsername = auth['info']['nickname'] || ""
            user.twitterAvatar = auth['info']['image'] || ""
            user.twitterUrl = auth['info']['urls']['Twitter'] || ""
            user.twitterPortfolioUrl = auth['info']['urls']['Website'] || ""
            user.twitterLocation = auth['info']['location'] || ""
            user.twitterDescription = auth['info']['description'] || ""
        end
    end
end 
```

更新 2

如果我计算用户数，它似乎返回了一个用户（这是正确的，因为我是现在唯一注册的用户）：

```
<% if @users.count > 0 %>
  <%= @users.count %>
<% end %> 
```

如果我做：

```
<% if @users.count > 0 %>
  <%= @users.twitterUsername %>
<% end %> 
```

它给了我这个错误：用户：类的未定义方法`twitterUsername'。

更新 3

当我尝试运行 tail log/development.log 时，它给了我一个错误：

```
± % tail log/development.log                                                                                                             
22:     
app/views/users/index.html.erb:19:in `block in _app_views_users_index_html_erb__1766206529136141992_2490506940'
app/views/users/index.html.erb:18:in `each'
app/views/users/index.html.erb:18:in `_app_views_users_index_html_erb__1766206529136141992_2490506940'
app/controllers/users_controller.rb:7:in `index'

Rendered /Users/holgersindbaek/.rbenv/versions/1.9.3-p125-perf/lib/ruby/gems/1.9.1/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (5.3ms)
Rendered /Users/holgersindbaek/.rbenv/versions/1.9.3-p125-perf/lib/ruby/gems/1.9.1/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
Rendered /Users/holgersindbaek/.rbenv/versions/1.9.3-p125-perf/lib/ruby/gems/1.9.1/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (13.9ms) 
```

更新 4

如果当我运行搜索时，我会在控制台中得到这个：

```
Started GET "/users?utf8=%E2%9C%93&search=holgersindbaek" for 127.0.0.1 at 2012-04-10     23:24:55 +0200
Processing by UsersController#index as HTML
Parameters: {"utf8"=>"✓", "search"=>"holgersindbaek"}
MONGODB (1ms) flow04_development['users'].find({:_id=>"holgersindbaek"}).limit(-1).sort([[:_id, :asc]])
Rendered users/index.html.erb within layouts/application (4.7ms)
Completed 500 Internal Server Error in 8ms

ActionView::Template::Error (undefined method `id' for User:Class):
22:         <% if current_user == user %>
23: 
24:         <% else %>
25:           <% if current_user.follower_of?(user) %>
26:             <%= link_to "Unfollow", unfollow_user_path(user), :remote => true,     :class=>'unfollow' %>
27:           <% else %>
28:             <%= link_to "Follow", follow_user_path(user), :remote => true, :class=>'follow' %>
app/views/users/index.html.erb:25:in `block in _app_views_users_index_html_erb__83132873031271873_2505118720'
app/views/users/index.html.erb:18:in `each'
app/views/users/index.html.erb:18:in `_app_views_users_index_html_erb__83132873031271873_2505118720'
app/controllers/users_controller.rb:7:in `index' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:06:51.443

在我看来，问题在于 mongoid-search 在保存文档时会在文档中添加一个名为“_keywords”的属性。然后它根据“_keywords”搜索文档

因此，您实际上需要重新索引集合。尝试这个：

添加到用户模型

```
field :reindexed, type: Boolean, default: false 
```

运行以下

```
User.where(reindexed: false).each {|u| u.reindexed = true; u.save} 
```

那么当你搜索时，它应该是快乐的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:01:12.253

我最终没有在 if/else 语句中进行搜索。最终做了：

```
search_in :twitterUsername, :twitterName, :twitterLocation, :twitterDescription 
```

就如此容易。我正在使用索引进行搜索，因为我没有将它用于其他任何事情。

# symfony - 将大量数据保存到对象中的最佳方法

> ID：10085693
> 
> 赞同：0
> 
> 时间：2012-04-10T08:51:32.433
> 
> 标签：symfony, doctrine-orm

我正在做一个项目，我必须解析文件（可能是非常大的文件）并将每个字符串保存在另一个实体中。该捆绑包将处理很多文件类型（CSV、XML、JSON 等）。我将为这些类型中的每一种创建一个解析器，它返回一个字符串数组

```
 $em2 = $this->getDoctrine()
      ->getEntityManager();

  foreach ($Parser as $key => $value) {  

      $str_or[] = new StringOrigin();
      $str_or[$key]->setSTORString($value);
      /..
      $em2->persist($str_or[$key]);
   }

 $em2->flush(); 
```

$Paser 这里是从文件中解析出来的字符串数组。StringOrigin 是实体。实体管理器可以处理多少数据？我这样做对吗？如果不是，[巴赫处理](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/batch-processing.html)会 更好地处理这个问题吗？另外，有没有一种方法可以在不使用 DQL 的情况下只执行一次 INSERT？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:54:44.373

Doctrine 的实体管理器并不是真正为大量对象设计的。以我的经验，数千条记录都很好，但是当您进入成千上万条记录时，您就会开始达到极限。当然，这取决于您的实体的复杂性。

看看 Doctrine 的数据库访问层 (DBAL)。基本上：

```
$connection = $entityManager->getConnection(); 
```

为您提供一个直接与数据库对话的薄包装 PDO 对象。准备一个 INSERT 语句，然后使用不同的参数继续调用它。这样做让我可以在一个请求中处理成千上万条记录。没有必要走得更远。

并考虑在不进行任何数据库交互的情况下测试您的解析器。如果您不小心，很容易达到 PHP 的内存限制。

# facebook - Facebook FB.ui apprequest 未在移动设备上显示

> ID：10085696
> 
> 赞同：1
> 
> 时间：2012-04-10T08:51:52.707
> 
> 标签：facebook, jquery-mobile, facebook-javascript-sdk, fb.ui

我正在开发一个与 facebook 集成的移动应用程序。该应用程序是使用 jquery mobile 开发的（见下文）

```
<link rel="stylesheet" <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script> 
```

到目前为止，我已经设法将 Facebook 功能与 Facebook JSSDK 集成，并且在普通浏览器中一切正常，因为它应该（登录、注销、其他 api 调用），但是当我尝试发送一个 apprequest 时：

```
function sendRequest() {
    FB.ui({ method: 'apprequests', message: 'Are you ready?',
    }, function(response) {
    console.log('sendRequest response: ', response);
    if (response && response.to) {
      for (var j = 0; j < response.to.length; j++) {
    alert('You have: ' + response.response.name + ' with User id: ' + response.to[j] + ' invited');
        //alert(response.to[j]);
      }
    } else {
            console.log('User didn't invite anyone');       
        }
}); 
```

在移动设备上，请求对话框不会弹出。我只看到一个空白的白色屏幕。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-02T21:15:42.253

在尝试了几件事之后，似乎问题出在手机的页面高度以及对话框在屏幕上的位置。

我使用以下方法修复了我的 nexus5：

添加了一个页面：

```
<div data-role="page" id="fb-page">
    <div id="fb-root"></div>
</div> 
```

CSS：

```
#fb-page {
    position: initial;
} 
```

# java - 如何在 Java 应用程序中创建上下文相关帮助

> ID：10085697
> 
> 赞同：3
> 
> 时间：2012-04-10T08:52:04.850
> 
> 标签：java

我有一个需要上下文相关帮助的 Java 桌面应用程序。例如，我的 Validator 应用程序以 SQL 语句的形式获取输入，并根据键入的内容显示可能的上下文相关帮助。

一个用例可能是：当用户键入“更新”然后按 Ctrl+Space 时，它​​应该将表名列表显示为上下文相关帮助

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:00:38.857

Create an eclipse RCP application and extend the eclipse editor.

With eclipse is very simple create an editor and add a content assist to it.

Look at this [FAQ](http://wiki.eclipse.org/FAQ_How_do_I_add_Content_Assist_to_my_editor%3F).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T16:21:55.413

我不知道我是否完全理解你的问题。我猜你是在摇摆中做这个。您是否正在寻找一种类似 awt hover-like 的东西（抱歉，这太棒了，我只是不太记得它叫什么了），就像您在输入搜索时 Google 所拥有的一样？

我不确定是否可以帮助您，但这是我用来根据对象的任何属性值使用反射将对象与搜索词匹配的方法。这可能是你根本不需要的东西，但我想以防万一我可以把它给你。希望能帮助到你！

```
 /**
  * Returns true if any attribute in the item matches the given constraints
  *
  * @param object the object you want to match
  * @param klass the class to get the fields from (in most cases you'll just call object.getClass())
  * @param iterations how many inherited levels you want to check fields for
  * @param match the String to match fields against
  * @param ignoreField fieldNames you wish to ignore, you can give as many as you like, you can also give an
  * array of strings
  * @return whether the given object contained fields which matched the given string
  */
  public static boolean matches(Object object, Class klass, int iterations, String match, String... ignoreField) {
    if (iterations < 0) {
      return false;
    }
    boolean checkMatch = false;
    try {
      checkMatch = matchFields(klass.getDeclaredFields(), object, match, ignoreField);
    } catch (IllegalArgumentException ex) {
      Logger.getLogger(OtherHelper.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
      Logger.getLogger(OtherHelper.class.getName()).log(Level.SEVERE, null, ex);
    }
    if (checkMatch) {
      return true;
    } else {
      Class<? extends Object> supersSuperclass = (Class<? extends Object>) klass.getSuperclass();
      if (supersSuperclass != Object.class) {
        boolean matches = matches(object, supersSuperclass, (iterations - 1), match, ignoreField);
        if (matches) {
          return true;
        } else {
          return false;
        }
      } else {
        return false;
      }
    }
  }

  /**
  * Calls matchField(field, bo, match) on each field in the given field array.
  *
  * @param fields the fields array to get the fields from
  * @param object the object to get the field values from
  * @param match the text to match fields to
  * @param ignoreField any number of fieldNames which are to be ignored.
  * @return true on first true field match
  * @throws IllegalArgumentException
  * @throws IllegalArgumentException
  * @throws IllegalAccessException
  */
  private static boolean matchFields(Field[] fields, Object object, String match, String... ignoreField) throws IllegalArgumentException, IllegalArgumentException, IllegalAccessException {
    List<String> ignoreFieldsList = Arrays.asList(ignoreField);
    for (Field field : fields) {
      if (!ignoreFieldsList.contains(field.getName())) {
        if (matchField(field, object, match)) {
          return true;
        }
      }
    }
    return false;
  }

  /**
  * Gets the value of the field and matches the string version of it with the given match
  *
  * @param field the field to match
  * @param object the object to get the field value from
  * @param match the match to match the field value to.
  * @return
  * @throws IllegalArgumentException
  * @throws IllegalArgumentException
  * @throws IllegalAccessException
  */
  private static boolean matchField(Field field, Object object, String match) throws IllegalArgumentException, IllegalArgumentException, IllegalAccessException {
    field.setAccessible(true);
    if (field.get(object) == null) {
      return false;
    }
    Class<?> type = field.getType();
    String value = null;
    if (type == Date.class) {
      SimpleDateFormat sdf = new SimpleDateFormat("MMM d, yyyy");
      Date date = (Date) field.get(object);
      value = sdf.format(date);
    } else if (type == String.class || isPrimitive(type)) {
      value = field.get(object).toString();
    }
    if (value != null
            && Pattern.compile(Pattern.quote(match), Pattern.CASE_INSENSITIVE).matcher(value).find()) {
      return true;
    } else {
      return false;
    }
  }

  /**
  * Checks first whether it is primitive and then whether it's wrapper is a primitive wrapper. Returns true
  * if either is true
  *
  * @param c
  * @return whether it's a primitive type itself or it's a wrapper for a primitive type
  */
  public static boolean isPrimitive(Class c) {
    if (c.isPrimitive()) {
      return true;
    } else if (c == Byte.class
            || c == Short.class
            || c == Integer.class
            || c == Long.class
            || c == Float.class
            || c == Double.class
            || c == Boolean.class
            || c == Character.class) {
      return true;
    } else {
      return false;
    }
  } 
```

# sharepoint - CRM 2011 - Sharepoint 2010 集成 - 创建所有文件夹

> ID：10085700
> 
> 赞同：1
> 
> 时间：2012-04-10T08:52:18.750
> 
> 标签：sharepoint, sharepoint-2010, dynamics-crm-2011, crm

我们想在我们的客户端安装“Sharepoint”，但我不知道我们应该如何进行所有笔记的传输。因为我们需要编写一个服务来创建所有文件夹并将“笔记”放入共享点。“CRM 2011”-DB 变得太大，他们想要一些“搜索”功能。

那么，在 CRM 和 Sharepoint 之间建立连接的最佳步骤是什么？我们想要以下内容：

1.  所有帐户都应该有一个包含所有笔记的文件夹
2.  所有联系人都应该有一个包含所有笔记的文件夹
3.  需要创建所有文件夹（我们可以从微软使用它们吗？）

我是“Sharepoint”世界的新手，所以在后面稍微推一下会有很大帮助。我知道如何将您的“CRM”设置为使用“Sharepoint”，但我们如何进行所有文件夹的初始加载以及将注释/附件移动到 Sharepoint。

在 CRM 2011 中为超过 25.000 个帐户激活共享点是否可以节省？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T03:51:31.837

我同意@Tobias 的观点，您应该让真正了解 SharePoint 的人对 SharePoint 的影响发表评论，但我可以在 CRM 方面提供帮助。

不幸的是，当您将笔记从`annotations`表格移至 SharePoint 时，您将失去 CRM 中的一些开箱即用的笔记功能。每个页面上漂亮整洁的“注释”部分将不再起作用，除非您有一个*非常优秀的*SharePoint 开发人员，否则您可能会有一个笨拙的替代注释功能。

我会**非常**犹豫将您的笔记移动到 SharePoint，实际上您正在以任意方式拆分您的数据库。一个潜在的中间道路是为 Notes 创建一个自定义活动，以便您获得汇总、搜索等功能 - 但您仍然会丢失 CRM 表单中的演示文稿。

（顺便说一句，如果`OrgName_MSCRM`数据库的大小是一个问题，请仔细检查您的 MSSQL 任务并确保正确清理事务日志等；如果您定期导入或批量删除数据，您最终可能会得到一些非常笨拙的日志文件和数据库文件中未使用的空间）

# android - .apk 应用程序安装到模拟器或手机时意外停止

> ID：10085701
> 
> 赞同：0
> 
> 时间：2012-04-10T08:52:25.777
> 
> 标签：android, android-emulator, apk

我开发了一个组件，可以在水平和垂直方向上显示图像的幻灯片。从 Eclipse 运行时，代码运行良好。我将其导出并尝试将 .apk 文件安装到模拟器和安卓手机中。但应用程序力关闭而不显示图像。我也**没有在 logcat 中收到错误**。图像从 res 文件夹插入到 SQLite 数据库和 SDCard 并从那里读取。无法获取图像的原因可能是什么？如何检查错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:58:19.137

我认为您必须编辑 AVD。在硬件中选择 SD 卡支持为是。

# scalability - 负载均衡器可扩展性和最大 #tcp 端口

> ID：10085705
> 
> 赞同：4
> 
> 时间：2012-04-10T08:52:38.550
> 
> 标签：scalability, load-balancing, tcpsocket

负载均衡器会根据它运行的平台对它可以同时使用多少个 tcp 端口有一些限制（例如，我在某处读到 Linux 可以同时打开最多 65535 个 tcp 端口）。这意味着即使后端服务器场能够同时处理更多请求，平衡器也会成为瓶颈，并且无法提供超出这些同时请求的服务。有没有办法克服这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T18:53:42.417

TCP 和 UDP 端口号是 16 位的，因此给定的 IP 只有 65535 个（我相信端口 0 无效）。但是 TCP 连接由 4 元组（源 IP、源端口、目标 IP、目标端口）标识。（看起来[维基百科](http://en.wikipedia.org/wiki/Network_socket)有链接可以了解更多信息。）

对于客户端->平衡器请求：只要每个入站连接具有不同的（源 IP、源端口），就没有问题。客户通常会确保这一点。我记得听说过的唯一问题是一个非常受欢迎的网站，当从巨大的 ISP 访问时，每页有很多图像，这些 ISP 对他们的客户进行了 NAT，只在很少的 IPv4 地址后面。那可能不是你的情况。

balancer->backend 请求更有趣，因为您可能正在创建与我上面提到的 NAT 问题类似的情况。我认为 Linux 通常会尝试为每个套接字分配一个不同的[临时端口](http://en.wikipedia.org/wiki/Ephemeral_port)，默认情况下只有 28,233 个。而且 IIRC 它也不使用该`TIME_WAIT`州的连接，因此您可以用尽范围而无需同时打开那么多连接。IIRC，如果您达到此限制，您将`EADDRINUSE`失败`connect`（或者`bind`如果您在连接之前明确绑定套接字）。我不记得我之前是如何解决这个问题的，更不用说绝对最好的方法了，但这里有一些可能会有所帮助的事情：

*   保持持久的平衡器->后端连接，而不是为每个（可能是短暂的）客户端->平衡器连接创建一个新连接。
*   在/之前设置`SO_REUSEADDR`套接字。`bind``connect`
*   打开 sysctl`net.ipv4.tcp_tw_reuse`和/或`net.ipv4.tcp_tw_recycle`.
*   明确选择要使用的源 IP 和/或端口，`bind`而不是让内核自动分配`connect`. 您不能同时使用相同的 4 元组进行两个连接，但其他任何事情都可以。（例外：我正在考虑`TIME_WAIT`重用同一个 4 元组是否可以；我必须`TIME_WAIT`通过阅读一些 TCP RFC 来刷新我的记忆。）

你可能需要做一些实验。好消息是，一旦您了解了问题，就很容易重现并测试您是否已修复它。

# javascript - 显示表内的行以 在它下面有一个文本区域

> ID：10085707
> 
> 赞同：1
> 
> 时间：2012-04-10T08:52:45.883
> 
> 标签：javascript, jquery

我有一张表，其中有一列是 QuestionText，行可以是 1-20 行之间的任何内容，具体取决于用户添加到表中的行数。

这是我的桌子：

```
<table id="CustomPickedTable" class="box-style2">
        <thead><tr><th>Choosen Questions</th></tr></thead>
        <tbody>
         <tr><td data-row="2">Choosen Data</td></tr>
         <tr><td data-row="1">Choosen data</td></tr>
        </tbody>
</table> 
```

用户可以通过另一个 Jquery 代码添加/删除表中包含数据的行。

当用户在表格中选择了她/他想要的行时，用户单击下一个按钮，在此单击事件中，我希望表格内的所有行都显示为maby `<p>`，其下的文本区域是只读的。它应该像用户预览一样显示，并且应该像表格一样有序。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:16:43.610

我会这样做

**html**

```
<table id="CustomPickedTable" class="box-style2">
    <thead><tr><th>Choosen Questions</th></tr></thead>
    <tbody>
    <tr><td data-row="2">Choosen Data</td></tr>
    <tr><td data-row="1">Choosen data</td></tr>
    </tbody>
</table>
<input type="button" value="Preview" onclick="preview()" />
<hr />
<div id="test">
</div>​ 
```

**Javascript**

```
function preview(){
    $('#CustomPickedTable tbody tr td').each(function(){ 
        $('#test').append('<p>'+$(this).text()+'</p><textarea disabled="disabled"></textarea>');    
    });
}​ 
```

[或者在这里](http://jsfiddle.net/VB8Le/2/)查看我的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:05:53.183

让我一步一步告诉你。首先创建一个javascript数组

2.每次点击获取该行的id并将其放入javascript数组中。

3.然后当单击下一个按钮时，使用一个循环，其中来自 javascript 数组的所有 id 将获取行或任何类型的数据并创建表行，将每个 id 数据放入行中。

# entity-framework-4 - 继承实体类型的表拆分？

> ID：10085710
> 
> 赞同：10
> 
> 时间：2012-04-10T08:52:52.937
> 
> 标签：entity-framework-4

我有一个名为 Image 的实体类型，它继承自 Publication（还有 5 种其他类型的 Publication，都共享 10 个公共属性）。

不幸的是，我的数据库中的 Image 表包含 4 个二进制列，其中包含 4 个不同分辨率的图像版本的数据，因此 EF Image 类型有 4 个属性：BinOriginal、BinHiRes、BinLowRes、BinThumbnail，其中包含大量数据。

这会影响性能。例如，当我只是生成一系列图像链接时，我不想获取所有二进制数据。

所以我尝试了表拆分，将 4 个二进制字段放入一个新的 ImageFile 实体中：http: [//blogs.msdn.com/b/adonet/archive/2008/12/05/table-splitting-mapping-多个实体类型到同一个表.aspx](http://blogs.msdn.com/b/adonet/archive/2008/12/05/table-splitting-mapping-multiple-entity-types-to-the-same-table.aspx)

我确保了正确的表映射，添加了 1-1 关联并包含了引用约束，但是我收到了这个错误：

```
Error 3033: Problem in mapping fragments starting at line 2731:EntitySets 
'ImageFiles' and 'Publications' are both mapped to table 'Images'. Their primary 
keys may collide. 
```

...似乎存在一个问题，即被拆分的表涉及继承关系。

我尝试从 Publication 继承新的 ImageFile EF 类型，但随后出现错误：

```
Problem in mapping fragments starting at lines 2332, 2374:Two entities with 
different keys are mapped to the same row 
```

**问题**有什么办法可以解决这个问题，或者我需要 Image EF 类型从 Publication 继承这一事实是否会阻止将其他字段拆分为新类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:10:41.413

您可以认为这是实体框架的限制：实际上有两部分，底层数据库项的模型和从模型构建的实体。实体的子类不会影响模型。

如果您不想加载 Model 行的所有数据，请将其投影：

```
var results = from product in myDB.Products
              where product.Id == productId
              select New 
              {
                  Id = product.Id, 
                  Name = product.Name, 
                  ImageUrl = product.ImageUrl
              }; 
```

Entity Framework 创建的 SQL 查询仅选择`select`LINQ 查询子句中的列。

这也使 Entity Framework 无法将表行存储到`ObjectContext`（或`DBContext`用于 EF 5）对象中。

作为旁注，我个人很想将较大的二进制数据存储在 NoSQL 解决方案中，并自己维护 SQL 数据库中的关联键。

# ipad - 如何在 ipad 网站中进行页面滚动

> ID：10085712
> 
> 赞同：0
> 
> 时间：2012-04-10T08:52:54.127
> 
> 标签：ipad, html

我有一个 ipad 网站，我想像在 iphone 或 ipad 应用程序中那样用手指滚动页面，但问题是当我滚动页面时，它不会像滚动到半页一样覆盖整个区域

```
 <!DOCTYPE HTML>
     <html>
     <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
     <meta name="keywords" content="" />
     <meta name="description" content="" />
     <title>Bovine Respiratory Disease</title>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
    <link href="css/overviewstyle.css" rel="stylesheet" />
    <script type="text/javascript" src="js/jquery.touchSwipe-1.2.5.js"></script>
    <link rel="stylesheet" href="css/jpreloader.css" />
    <script src="js/jpreLoader.js"></script>
    <!--fonts-->
    <style type="text/css">

        @font-face {
font-family: 'TradeGothicBdCnOb';
src: url('trade_gothic_bold_condensed_no._20_oblique-webfont.eot');
src: url('trade_gothic_bold_condensed_no._20_oblique-webfont.eot?#iefix') format('embedded-opentype'),
     url('trade_gothic_bold_condensed_no._20_oblique-webfont.woff') format('woff'),
     url('trade_gothic_bold_condensed_no._20_oblique-webfont.ttf') format('truetype'),
     url('trade_gothic_bold_condensed_no._20_oblique-webfont.svg#TradeGothicBdCnOb') format('svg');
font-weight: normal;
font-style: normal;

    }

   </style>
   <!--[if IE]>
   <script>
   document.createElement('header');
   document.createElement('footer');
   document.createElement('section');
   document.createElement('nav');
  </script>
   <![endif]-->

     </head>
    <body>
    <header>
        <ul id="banner">    
            <li><a href="#overview"><img src="assets/overview1.png" alt=""/></a></li>
            <li><a href="#"><img src="assets/strategy1.png" alt=""/></a></li>
            <li><a href="#draxxinslide"><img src="assets/draxxin_1.png" alt=""/></a></li>
            <li><a href="#draxxin_slide2"><img src="assets/excede1.png" alt=""/></a></li>
            <li><a href="#"><img src="assets/results1.png" alt=""/></a></li>                                                                                <li><a href="#"><img src="assets/wrap_up_2.png" alt=""/></a></li>

        </ul>
        </header>
          <div id="swipeBox" ontouchstart="touchStart(event,'swipeBox');" ontouchend="touchEnd(event);" ontouchmove="touchMove(event);" ontouchcancel="touchCancel(event);">
         <section id="container">
         <section id="overview" class="panel">   <!-- Start of Page one -->
         <div id="section_one"> 
         <div><h1>Overview</h1></div>   
    <div>
        <h2>Bovine Respiratory Disease (BRD)</h2>
    </div>
            </div>
         <div id="section_content">
    <div class="content"><img src="assets/box.png" alt=""/>
     <div class="font_class1">Economic Loss</div>
        <ul>
        <li> $1 Billion each year</li>
        <li> From death, reduced feed efficiency and treatment costs </li>
        <li> Loss $57.48 - $239.69 per head </li>
        </ul>
       </div>

    <div class="content">
        <img src="assets/box.png" alt=""/>
      <div class="font_class">Bacterial Culprits</div>
        <ul>            
        <li> Mannheimia haemolytica</li>
        <li> Pasteurella multocida </li>
        <li> Histophilus somni</li>
        <li> Mycoplasma bovis</li>
        </ul>
    </div>
        </div>
       </section> <!-- End of Page one -->

       <section id="draxxinslide" class="panel"> 
       <div id="section_two">   
        <div><h1>Draxxin</h1></div> 
        <h2>Draxxin keeps working for up to 14 days</h2>
        </div>
         <div id="section_content_two">
    <div class="arrow"><img src="assets/arrow.png" alt=""/></div>
         <div class="paragraph">Treats four major pathogens including <i>Mycoplasma Bovis</i></div>
    <div class="arrow1"><img src="assets/arrow.png" alt=""/></div>
            <div class="paragraph1">Decreases total number of treatments</div>

       <div class="arrow2"><img src="assets/arrow.png" alt=""/></div>
       <div class="paragraph2">Reduces labor and treatment costs</div>

   </div>
   <div id="section_card"><img src="assets/card.png"/></div>
  </section>
   <!--
   <div id="draxxin_slide2" class="panel"> 
   <div id="section_three">     
        <h2>Draxxin extends your PMIs and PTIs for a greater return on your investment...</h2>
   </div>
   <div id="section_content_three">
    <div class="draxxin_table_structure"><img src="assets/table_structure.png" alt=""/></div>
    <div class="draxxin_table"><img src="assets/draxxin_table_img_1.png" alt=" "/></div>
    <div class="draxxin_table_1"><img src="assets/draxxin_table_img_2.png" alt=""/>  </div>
    </div>
    </div>-->
    <!-- This section is for Splash Screen -->
    <div id=jSplash>
<section class=selected>
    <h1>jPreLoader</h1>
    <h2>A Loading Screen to preload images & content<br/>
    for website using jQuery</h2>
</section>
<section>
    <p>Create your own <br/>
    <span style="font-size:30px">Splash Screen</span>.</p>
</section>
<section>
    <p>Customize Progress Bar and Progress Percentage <br/>
    <span style="font-size:30px">using CSS</span>.</p>
</section>
<section>
    <p>Preload all images in <br/> 
    <span style="font-size:25px">&lt;img&gt; tag</span> + 
    <span style="font-size:25px">CSS background-image</span>.</p>
</section>
     </div>
    <!-- End of Splash Screen -->
    <footer>
    <div class="footer_center">
<ul>
    <li><a onClick="" href="#"><img src="assets/back_light_blue_button_copy.png" alt=""/></a></li>
    <li><a href="#"><img src="assets/home_light_blue_button_copy.png" alt=""/></a></li>
    <li><a href="#"><img src="assets/forward_light_blue_button_copy.png" alt=""/></a></li>
</ul>
    </div>
    </footer>
    </section> <!-- end of container div-->
    </div>
   <script>

        //Assign handlers to the simple direction handlers.
        var swipeOptions=
        {
            swipe:swipe,
            threshold:0,

            fingers:2
        }

        $(function()
        {           
            //Enable swiping...
            $("#panel").swipe( swipeOptions );
        });

        function swipe(event)
        {
            $("#panel").text("You swiped " + direction);
        }

     </script>
         <script> 
```

```
 $(document).ready(function() {
  var timer;

//calling jPreLoader function with properties
$('body').jpreLoader({
    splashID: "#jSplash",
    splashFunction: function() {  //passing Splash Screen script to jPreLoader
        $('#jSplash').children('section').not('.selected').hide();
        $('#jSplash').hide().fadeIn(800);

        timer = setInterval(function() {
            splashRotator();
        }, 3000);
    }
}, function() { //jPreLoader callback function
    clearInterval(timer);
    $('footer').animate({"bottom":0}, 500);
    $('header').animate({"top":0}, 800, function() {
        $('#container').fadeIn(1000);
    });
});
   });
        <!-- End of jPreLoader script -->

     function splashRotator(){
var cur = $('#jSplash').children('.selected');
var next = $(cur).next();

if($(next).length != 0) {
    $(next).addClass('selected');
} else {
    $('#jSplash').children('section:first-child').addClass('selected');
    next = $('#jSplash').children('section:first-child');
}

$(cur).removeClass('selected').fadeOut(800, function() {
    $(next).fadeIn(800);
});
   }
   </script>

  </body>
    </html> 
```

代码结束

下面是滚动的脚本

```
 <script type="text/javascript">
        $(function() {
            $('ul a').bind('click',function(event){
                var $anchor = $(this);
                  $('html, body').stop().animate({
                    scrollLeft: $($anchor.attr('href')).offset().left
                }, 1000);
                event.preventDefault();
            });
        });
     </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:56:55.207

这可能会有所帮助：

```
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=1"> 
```

# nhibernate - fluentnhibernate：default_schema 和公式

> ID：10085713
> 
> 赞同：0
> 
> 时间：2012-04-10T08:52:56.770
> 
> 标签：nhibernate, fluent-nhibernate

我注意到 default_schema 设置仅适用于生成的 SQL。用户提供的 SQL（在我的例子中：通过 Map().Formula()）似乎不受 default_schema 设置的影响。

有没有办法解决？我尝试了天真的方法，尝试从映射类中的配置中读取 default_schema，然后更改 .Formula() 调用中的 SQL 以包含 default_schema，但即使从映射文件访问配置似乎也不是-琐碎的。

任何帮助将不胜感激！

问候， ldx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:55:59.513

我自己解决了这个问题。

由于似乎无法访问 ClassMap 中的任何配置（而且我不想在那里手动开始读取配置文件），并且由于您不能通过某些 IoC 框架将依赖项注入 ClassMap （Classmaps 需要无参数构造函数），我必须用单例类以“老式方式”来做：

单身人士：

公共类 DefaultSchemaProvider { 私有静态 DefaultSchemaProvider _instance = null; 私有字符串_defaultSchema = null;

```
public static DefaultSchemaProvider Instance
{
    get
    {
        if (_instance == null)
            _instance = new DefaultSchemaProvider();
        return _instance;
    }
}

public void SetDefaultSchema(string defaultSchema)
{
    _defaultSchema = defaultSchema;
}

public string GetDefaultSchema()
{
    return _defaultSchema;
} 
```

}

配置期间：

```
var nhibernateCfg = new NHibernate.Cfg.Configuration();
nhibernateCfg.Configure(ConfigurationFile);
DefaultSchemaProvider.Instance.SetDefaultSchema(nhibernateCfg.GetProperty("default_schema")); 
```

在类图中：

```
public class CustomerMap : ClassMap<Customer>
{
    public CustomerMap()
    {
        var defaultSchema = DefaultSchemaProvider.Instance.GetDefaultSchema() + ".";

        Table("Customers");

        Id(x => x.Id).Column("Customer_id");
        Map(x => x.Description).Column("Name");
        Component(c => c.CustomerType, c =>
        {
            c.Map(x => x.Id).Column("Customer_type");           
            c.Map(x => x.Description).Formula(
               "(SELECT ct.value FROM " + defaultSchema + "customer_types ct WHERE ct.field='description' AND ct.typeid = Customer_type)");
        });
        HasMany(x => x.ArticleLinks).KeyColumn("VENR").Access.CamelCaseField(Prefix.Underscore);
    }                
} 
```

# windows - Windows - 如果发生错误，防止控制台窗口关闭

> ID：10085714
> 
> 赞同：4
> 
> 时间：2012-04-10T08:52:56.943
> 
> 标签：windows, shell, batch-file

我正在编写一个简单的 .bat 脚本，我希望它通过从 Windows 资源管理器中双击来打开它。如果从 Windows 资源管理器打开，控制台窗口会在脚本完成后自动关闭。

问题是我在脚本中调用的命令可能会发生错误。在这种情况下，这些命令会打印出错误消息并返回退出状态 1。但用户不知道它，因为窗口关闭得太快而无法注意到是否弹出了一些错误消息（并且肯定太快而无法阅读它们；））。

那么，如果脚本中的某些命令失败（以便用户可以阅读错误消息）并且如果一切正常，它仍然会自动关闭，是否有任何方法可以防止控制台窗口关闭？如果第二部分是不可能的，可以只阻止控制台窗口在两种情况下自动关闭（失败或成功）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T09:01:41.973

It would be much easier to go with the latter. To keep the console window open put this at the end of your script:

`pause >nul`

That will pause the window from closing. Then you can handle any errors you want to display and presumably `echo` them to the user before the `pause`.

Example:

`echo No errors or Errors found!`

`pause >nul`

Hope this helps!

# javascript - Android webView中的Javascript

> ID：10085716
> 
> 赞同：1
> 
> 时间：2012-04-10T08:53:07.427
> 
> 标签：javascript, android, android-webview

我正在尝试做一些有点棘手的事情。我有一个里面有一个 webView 的活动。此 Web 视图正在加载具有一些 javascript 功能的外部 html 文件。

我的活动定期产生一些结果，我想在 javascript 函数中访问这些结果。我认为将输出结果写入文件并在 javascript 端读取可能是一种解决方案。但我不确定。

有没有办法做这样的事情？

我知道我们可以从 javascript 导航到 android 函数，但这并不是我所需要的。

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:51:35.973

如果您只需要一次结果并且在运行中，那么您可以尝试不将它们写入文件，而是将其作为 javascript 注入 WebView。例如，在您的页面中，您可以添加一个功能：

```
function newData(jsonObj) {
    ...
} 
```

而不是写入文件，而是使用实际数据调用它。

```
webview.loadUrl("javascript:(newData({a:1, b:2,...}))"); 
```

# javascript - Chrome 扩展程序中的 HTML5 通知 - 可以禁用关闭按钮吗？

> ID：10085721
> 
> 赞同：1
> 
> 时间：2012-04-10T08:53:33.987
> 
> 标签：javascript, html, google-chrome, google-chrome-extension, notifications

我正在使用此处描述的通知[http://code.google.com/chrome/extensions/notifications.html](http://code.google.com/chrome/extensions/notifications.html)作为 chrome 扩展。

有没有办法覆盖默认添加的 X 按钮（关闭按钮）的行为？或者我可以禁用它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T12:19:47.347

无法修改通知弹出窗口的基本布局。
没有办法阻止通知被关闭。虽然不推荐，但您*可以*绑定一个**`onclose`事件**，该事件在通知被销毁时触发。

我创建了一个演示，它显示了一个半持久的通知**：http: [//jsfiddle.net/n385r/](http://jsfiddle.net/n385r/)**

在 Chrome 扩展程序中，[`"notifications"`](http://code.google.com/chrome/extensions/notifications.html#manifest)必须在清单文件中设置权限。然后，可以添加一个半持久的通知弹出窗口，如下所示：

```
(function repeat() {
    // Assume that /icon.png exists in the root of your extension
    webkitNotifications.createNotification('/icon.png', 'Title', 'Message.');
    note.onclose = function() {
        // On close, repeat:
        repeat();
    };
    note.show();
})(); // Start the notification 
```

我的交互式演示**( [http://jsfiddle.net/n385r/](http://jsfiddle.net/n385r/) )**包含更多详细信息，并且可以删除通知。之前显示的代码会一直显示通知，直到用户禁用扩展程序或关闭 Chrome。您可以想象，这对用户不友好，您不应该使用半持久通知。

## 文档

*   [Google Chrome 扩展程序中的桌面通知](http://code.google.com/chrome/extensions/notifications.html)
*   [Chrome 的通知 API 规范](http://www.chromium.org/developers/design-documents/desktop-notifications/api-specification)。

# css - Twitter Bootstrap - 在行之间添加顶部空间

> ID：10085723
> 
> 赞同：507
> 
> 时间：2012-04-10T08:53:46.133
> 
> 标签：css, twitter-bootstrap

`class="row"`如何使用 twitter 引导框架向元素添加边距顶部？

* * *

## 回答 #1

> 赞同：825
> 
> 时间：2013-01-20T22:05:49.470

在 Twitter 引导程序中编辑或覆盖行是一个坏主意，因为这是页面脚手架的核心部分，您将需要没有上边距的行。

为了解决这个问题，创建一个新的类“top-buffer”来添加你需要的标准边距。

```
.top-buffer { margin-top:20px; } 
```

然后在需要上边距的行 div 上使用它。

```
<div class="row top-buffer"> ... 
```

* * *

## 回答 #2

> 赞同：185
> 
> 时间：2013-11-20T12:39:01.233

好的，只是为了让您知道当时发生了什么，我修复了使用 Acyra 上面所说的一些新类：

```
.top5 { margin-top:5px; }
.top7 { margin-top:7px; }
.top10 { margin-top:10px; }
.top15 { margin-top:15px; }
.top17 { margin-top:17px; }
.top30 { margin-top:30px; } 
```

每当我想做的时候`<div class="row top7"></div>`

为了获得更好的响应，您可以添加`margin-top:7%`而不是`5px`例如：D

* * *

## 回答 #3

> 赞同：170
> 
> 时间：2017-02-08T14:29:21.303

# 引导程序 3

如果您需要在引导程序中分隔行，您可以简单地使用`.form-group`. 这会在行的底部增加 15px 的边距。

在您的情况下，要获得最高边距，您可以将此类添加到上一个`.row`元素

```
<div class="row form-group">

/* From bootstrap.css */
.form-group {
        margin-bottom: 15px;
} 
```

# 引导程序 4

您可以使用内置的[间距类](https://getbootstrap.com/docs/4.3/utilities/spacing/#notation)

```
<div class="row mt-3"></div> 
```

类名中的“t”使其仅适用于“顶部”侧，底部、左侧、右侧有类似的类。数字定义空间大小。

* * *

## 回答 #4

> 赞同：92
> 
> 时间：2017-01-05T15:19:30.960

对于**Bootstrap 4**间距，应使用

> 速记实用程序类

采用以下格式：

> {属性}{边}-{大小}

财产是***以下***之一：

*   m - 对于设置边距的类
*   p - 用于设置填充的类

其中***边***是以下之一：

*   t - 用于设置 margin-top 或 padding-top 的类
*   b - 对于设置 margin-bottom 或 padding-bottom 的类
*   l - 对于设置 margin-left 或 padding-left 的类
*   r - 用于设置 margin-right 或 padding-right 的类
*   x - 对于同时设置 *-left 和 *-right 的类
*   y - 对于同时设置 *-top 和 *-bottom 的类
*   空白 - 用于在元素的所有 4 个边上设置边距或填充的类

其中***size***是以下之一：

*   0 - 对于通过将其设置为 0 来消除边距或填充的类
*   1 - （默认情况下）用于将边距或填充设置为 $spacer * .25 的类
*   2 - （默认情况下）用于将边距或填充设置为 $spacer * .5 的类
*   3 - （默认情况下）用于将边距或填充设置为 $spacer 的类
*   4 - （默认情况下）用于将边距或填充设置为 $spacer * 1.5 的类
*   5 - （默认情况下）用于将边距或填充设置为 $spacer * 3 的类
*   auto - 对于将边距设置为 auto 的类

所以你应该做这些：

```
<div class="row mt-1">
<div class="row mt-2">
          ...
<div class="row mt-5"> 
```

阅读[文档](https://getbootstrap.com/docs/4.0/utilities/spacing/)以获得更多解释。[在这里](https://www.w3schools.com/bootstrap4/tryit.asp?filename=trybs_util_spacing&stacked=h)尝试现场示例。

* * *

## 回答 #5

> 赞同：45
> 
> 时间：2014-07-30T06:58:38.603

Sometimes margin-top can causes design problems:

[http://www.w3.org/TR/CSS2/box.html#collapsing-margins](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)

So, i recommend create "margin-bottom classes" instead of "margin-top classes" and apply them to the previous item.

If you are using Bootstrap importing LESS Bootstrap files try to define the margin-bottom classes with proportional Bootstrap Theme spaces:

```
.margin-bottom-xs {margin-bottom: ceil(@line-height-computed / 4);}  
.margin-bottom-sm {margin-bottom: ceil(@line-height-computed / 2);} 
.margin-bottom-md {margin-bottom: @line-height-computed;}
.margin-bottom-lg {margin-bottom: ceil(@line-height-computed * 2);} 
```

* * *

## 回答 #6

> 赞同：33
> 
> 时间：2014-07-02T19:42:57.813

我将这些类添加到我的引导样式表中

```
.voffset  { margin-top: 2px; }
.voffset1 { margin-top: 5px; }
.voffset2 { margin-top: 10px; }
.voffset3 { margin-top: 15px; }
.voffset4 { margin-top: 30px; }
.voffset5 { margin-top: 40px; }
.voffset6 { margin-top: 60px; }
.voffset7 { margin-top: 80px; }
.voffset8 { margin-top: 100px; }
.voffset9 { margin-top: 150px; } 
```

例子

```
<div class="container">
  <div class="row voffset2">
    <div class="col-lg-12">
      <p>
        Vertically offset text.
      </p>
    </div>
  </div>
</div> 
```

* * *

## 回答 #7

> 赞同：27
> 
> 时间：2014-08-09T18:14:02.270

我正在使用这些类来改变上边距：

```
.margin-top-05 { margin-top: 0.5em; }
.margin-top-10 { margin-top: 1.0em; }
.margin-top-15 { margin-top: 1.5em; }
.margin-top-20 { margin-top: 2.0em; }
.margin-top-25 { margin-top: 2.5em; }
.margin-top-30 { margin-top: 3.0em; } 
```

当我需要一个元素与上面的元素有 2em 间距时，我会这样使用它：

```
<div class="row margin-top-20">Something here</div> 
```

如果您更喜欢像素，请将 em 更改为 px 以按照自己的方式使用。

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2017-06-16T08:18:30.320

您可以将以下类用于引导程序 4：

`mt-0` `mt-1` `mt-2` `mt-3` `mt-4` ...

参考：[https ://v4-alpha.getbootstrap.com/utilities/spacing/](https://v4-alpha.getbootstrap.com/utilities/spacing/)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2017-02-20T16:40:51.207

Bootstrap 4 alpha，用于 margin-top：速记 CSS 类名 mt-1、mt-2（mt-lg-5、mt-sm-2）对于底部、右侧、左侧相同，并且您还有 auto 类 ml-汽车

```
 <div class="mt-lg-1" ...> 
```

单位是 from `1`to `5`: 在 variables.scss 中，这意味着如果您设置 mt-1 它会给出 0.25rem 的边距顶部。

```
$spacers: (
  0: (
    x: 0,
    y: 0
  ),
  1: (
    x: ($spacer-x * .25),
    y: ($spacer-y * .25)
  ),
  2: (
    x: ($spacer-x * .5),
    y: ($spacer-y * .5)
  ),
  3: (
    x: $spacer-x,
    y: $spacer-y
  ),
  4: (
    x: ($spacer-x * 1.5),
    y: ($spacer-y * 1.5)
  ),
  5: (
    x: ($spacer-x * 3),
    y: ($spacer-y * 3)
  )
) !default; 
```

在这里阅读更多

[https://v4-alpha.getbootstrap.com/utilities/spacing/#horizo​​ntal-centering](https://v4-alpha.getbootstrap.com/utilities/spacing/#horizontal-centering)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-04-10T09:03:45.420

Add to this class in the .css file:

```
.row {
    margin-left: -20px;
    *zoom: 1;
    margin-top: 50px;
} 
```

or make a new class and add it to the element

```
.rowSpecificFormName td {
    margin-top: 50px;
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-02-11T00:40:51.380

如果您只想在一页上进行更改，请添加以下样式规则：

```
 #myCustomDivID .row {
     margin-top:20px;
 } 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-08-09T11:04:10.407

```
<div class="row row-padding"> 
```

简单的代码

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-04-26T13:09:24.180

在 Bootstrap 4 alpha+ 中，您可以使用它

```
class margin-bottom-5 
```

这些类使用以下格式命名：`{property}-{sides}-{size}`

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-07-07T05:55:47.880

```
just take a new class beside every row and apply css of margin-top: 20px;
here is the code below
<style>
  .small-top
   {
     margin-top: 25px;  
   }
</style>    
<div class="row small-top">
   <div class="col-md-12">
   </div>
 </div> 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2017-08-15T17:26:17.370

引导程序3

CSS（仅限装订线，周围没有边距）：

```
.row.row-gutter {
  margin-bottom: -15px;
  overflow: hidden;
}
.row.row-gutter > *[class^="col"] {
  margin-bottom: 15px;
} 
```

CSS（等边距，15px/2）：

```
.row.row-margins {
  padding-top: 7px; /* or margin-top: 7px; */
  padding-bottom: 7px; /* or margin-bottom: 7px; */
}
.row.row-margins > *[class^="col"] {
  margin-top: 8px;
  margin-bottom: 8px;
} 
```

用法：

```
<div class="row row-gutter">
    <div class="col col-sm-9">first</div>
    <div class="col col-sm-3">second</div>
    <div class="col col-sm-12">third</div>
</div> 
```

（使用 SASS 或 LESS 15px 可能是引导程序中的变量）

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-12-03T06:16:12.990

有一个技巧可以只为容器中的第 2+ 行**自动添加边距。**

```
.container-row-margin .row + .row {
    margin-top: 1rem;
} 
```

添加`.container-row-margin`到容器中，结果是：

[![在此处输入图像描述](../Images/94f292f3cffa160c796783940fdcde5b.png)](https://i.stack.imgur.com/Yfq1C.png)

完整的 HTML：

```
<div class="bg-secondary text-white">
    div outside of the container.
</div>
<div class="container container-row-margin">
    <div class="row">
        <div class="col col-4 bg-warning">
            Row without top margin
        </div>
    </div>
    <div class="row">
        <div class="col col-4 bg-primary text-white">
            Row with top margin
        </div>
    </div>
    <div class="row">
        <div class="col col-4 bg-primary text-white">
            Row with top margin
        </div>
    </div>
</div>
<div class="bg-secondary text-white">
    div outside of the container.
</div> 
```

取自官方[样品](https://getbootstrap.com/docs/4.0/layout/grid/#setting-one-column-width)。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-02-09T03:19:03.327

如果您使用的是 BootStrap 3.3.7，则可以通过 NPM 使用开源库 bootstrap-spacer

```
npm install bootstrap-spacer 
```

或者你可以访问 github 页面：

```
https://github.com/chigozieorunta/bootstrap-spacer 
```

这是一个如何使用 .row-spacer 类来分隔行的示例：

```
<div class="row row-spacer">
    <div class="col-md-4">
    </div>
    <div class="col-md-4">
    </div>
    <div class="col-md-4">
    </div>
</div>

<div class="row row-spacer">
    <div class="col-md-4">
    </div>
    <div class="col-md-4">
    </div>
    <div class="col-md-4">
    </div>
</div> 
```

如果您需要列之间的空格，您还可以添加 .row-col-spacer 类：

```
<div class="row row-col-spacer">
    <div class="col-md-4">
    </div>
    <div class="col-md-4">
    </div>
    <div class="col-md-4">
    </div>
</div> 
```

您还可以将各种 .row-spacer 和 .row-col-spacer 类组合在一起：

```
<div class="row row-spacer row-col-spacer">
    <div class="col-md-4">
    </div>
    <div class="col-md-4">
    </div>
    <div class="col-md-4">
    </div>
</div> 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-03-21T07:22:27.667

只需简单地使用这个**`bs3-upgrade`**助手来进行间距和文本对齐......

[https://github.com/studija/bs3-upgrade](https://github.com/studija/bs3-upgrade)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-11-21T21:06:03.737

您可以添加此代码：

```
[class*="col-"] {
    padding-top: 1rem;
    padding-bottom: 1rem;
} 
```

* * *

## 回答 #20

> 赞同：-4
> 
> 时间：2017-02-04T03:18:57.933

我的把戏。不是很干净，但对我来说效果很好

```
<p>&nbsp;</p> 
```

# javascript - 保存哈希更改事件的表单参数

> ID：10085726
> 
> 赞同：0
> 
> 时间：2012-04-10T08:54:01.840
> 
> 标签：javascript, jquery, ajax, post, location

我正在开发一个使用 AJAX 技术加载页面的 Web 应用程序，每个页面都包含一个通过 POST 提交的表单。

为了使用浏览器的后退和前进按钮，我正在检测哈希更改并通过`location.hash`.

如何保存访问过的每个页面的表单参数？我不允许使用 GET 而不是 POST，因为这是客户端的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:05:53.120

html5 localstorage 是解决方案之一。

链接：

[演示和使用](http://simsalabim.github.com/sisyphus/)

[如何使用..](http://php-html.net/tutorials/html5-local-storage-guide/)

# javascript - 我能帮我打开这个popunder java脚本吗

> ID：10085727
> 
> 赞同：0
> 
> 时间：2012-04-10T08:54:03.843
> 
> 标签：javascript, web, popup

我有一个从 edomz 获得的弹出链接，我想把它放在我的博客上。问题是它只有在有人点击不同的页面后才会打开。我希望它在有人打开我的网站后立即打开。

提前致谢。这是代码

```
<script language="javascript" type="text/javascript"
src="http://www.lookit-quick.com/run.php?user=pacmaniam&js=1&lb=0&pnum=6"></script> 
```

PS我没有js经验

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:59:35.087

以下是打开弹出窗口的代码

```
<SCRIPT TYPE="text/javascript">
<!--
function popup(mylink, windowname)
{
if (! window.focus)return true;
var href;
if (typeof(mylink) == 'string')
   href=mylink;
else
   href=mylink.href;
window.open(href, windowname, 'width=400,height=200,scrollbars=yes');
return false;
}
//-->
</SCRIPT> 
```

并在正文标签中：

```
<BODY onLoad="popup('autopopup.html', 'ad')"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:01:01.920

如果你想这样做：你可以通过身体负载事件来做到这一点：类似的事情

```
<html>
<head>
<script type="text/javascript">
function load()
{
window.open("http://www.lookit-quick.com/run.php?user=pacmaniam&js=1&lb=0&pnum=6")
}
</script>
</head>

<body onload="load()">
<h1>Hello World!</h1>
</body>

</html> 
```

# html - 适用于手机的优秀 PDF 到 HTML 转换器

> ID：10085731
> 
> 赞同：0
> 
> 时间：2012-04-10T08:54:23.330
> 
> 标签：html, pdf, converter

我们有多个 PDF，其中包含帐户表和资产负债表。我们尝试了许多转换器，但结果并不令人满意。任何人都可以建议任何可以将 PDF 的内容复制到 HTML 中的精确结构的好的转换器。如果有任何付费转换器，请建议我。

```
 This is the PDF we want to convert and Show in html "http://www.marico.com/html/investor/pdf/Quarterly_Updates/Consolidated%20Financial%20Results%20-%20Q3FY11.pdf" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:14:35.197

你调查过这个吗？[http://pdftohtml.sourceforge.net/](http://pdftohtml.sourceforge.net/)

它也是开源的，所以它是免费的，可以根据需要进行修改。

甚至还有一个演示显示了之前的 PDF 和之后的 HTML 版本。如果你问我，还不错。

如果您在 PDF 中的表格方面遇到问题，那么问题可能出在表格本身以及用于生成表格的任何程序上。并非所有 PDF 都是平等的。

**还：** *请注意，我多年来创建和遇到的所有 PDF 在复制/粘贴文本块/文本行时都存在很多问题，这些文本块/文本行在任何给定页面上具有相同或更高的高度. 我认为 Acrobat 缺乏定义在什么之后选择什么块的“顺序”的能力（或者大多数程序没有正确使用它），所以系统排序从自上而下、从左到右的方式移动选择内容.....即使这意味着跳过大的空白区域或在您不期望的情况下一次从多列中抓取行。这可能是您的表格数据问题的一部分。您在这里的薄弱环节是 PDF 格式本身，我认为您可能对它期望过高。将任何内容转换为 PDF 几乎都是单行道，*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:01:23.653

你试过[http://www.jpedal.org/html_index.php](http://www.jpedal.org/html_index.php) - 还有一个免费的在线版本

# python - 有什么方法可以限制子类继承其父类的某些方法？

> ID：10085735
> 
> 赞同：1
> 
> 时间：2012-04-10T08:54:42.987
> 
> 标签：python, inheritance, python-2.7

```
class Liquid(object):
    def foo(self):
        pass

    def bar(self):
        pass

class Water(Liquid): 
```

说，我有上面的两个类，*Water*继承自*Liquid*。有什么办法可以限制水继承父母的方法之一，比如说`bar()`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T08:58:47.960

有点。但不要这样做。

```
class Liquid(object):
    def foo(self):
        pass

    def bar(self):
        pass

class Water(Liquid):
    def __getattribute__(self, name):
        if name == 'bar':
            raise AttributeError("'Water' object has no attribute 'bar'")

l = Liquid()
l.bar()
w = Water()
w.bar() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T08:57:27.263

您可以将该方法重写为无操作，但不能将其删除。这样做会违反面向对象设计的核心原则之一，即从某个父对象继承的任何对象都应该能够在使用父对象的任何地方使用。这被称为里氏替换原则。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T09:03:10.840

作为其他答案，您可以破坏其中一个继承的方法。

另一种方法是重构“可选”方法，并从没有它们的基类继承：

```
class BaseLiquid(object):
    def foo(self):
        pass

class Barised(object):
    def bar(self):
        pass

class Liquid(BaseLiquid, Barised): pass

class Water(BaseLiquid):
    def drip(self):
        pass 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T09:45:25.587

这可能不是一个好主意，但您总是可以使用元类来实现私有属性：

```
def private_attrs(name, bases, attrs):
    def get_base_attrs(base):
        result = {}

        for deeper_base in base.mro()[1:]:
            result.update( get_base_attrs(deeper_base) )

        priv = []
        if "__private__" in base.__dict__:
            priv = base.__private__

        for attr in base.__dict__:
            if attr not in priv:
                result.update( {attr: base.__dict__[attr]} )

        return result

    final_attrs = {}
    for base in bases:
        final_attrs.update( get_base_attrs(base) )

    final_attrs.update(attrs)

    return type(name, (), final_attrs)

class Liquid(object):
    __metaclass__ = private_attrs
    __private__ = ['bar']
    def foo(self):
        pass

    def bar(self):
        pass

class Water(Liquid):
    __metaclass__ = private_attrs

print Water.foo
print Water.bar 
```

输出是：

```
<unbound method Water.foo>
Traceback (most recent call last):
  File "testing-inheritance.py", line 41, in <module>
    print Water.bar
AttributeError: type object 'Water' has no attribute 'bar' 
```

编辑：这会搞砸 isinstance() 因为它不会修改类的**基础**。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-10T09:33:18.533

[http://docs.python.org/release/2.5.2/ref/slots.html](http://docs.python.org/release/2.5.2/ref/slots.html)

我怀疑你可以通过使用**slot** attr 来做到这一点。

如果调用 bar ，则可能实现**getattr**方法并引发适当的异常。

但是，我同意，你不想在实践中这样做，因为它是糟糕设计的标志。

# python - 当非守护线程无限期等待锁时 Python 的 sys.exit 行为

> ID：10085738
> 
> 赞同：5
> 
> 时间：2012-04-10T08:55:09.150
> 
> 标签：python, locking, exit

我对 Python 比较陌生，想了解 sys.exit() 在以下情况下的行为。

主线程调用 sys.exit() 但还有另一个非守护线程已经无限期地等待某个锁。

我已经在我的程序中对此进行了测试，看起来整个程序没有退出。这是预期的吗？我不确定非守护线程是否正在处理 SystemExit 异常，因为它在第三方库中。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T16:07:32.877

对于使用`threading`模块创建的线程，主线程在退出时加入所有非守护线程。您可以`threading.py`通过搜索`exitfunc`（在 Python 2.4.5、2.7.2 和 3.2.2 源代码中验证）看到这一点

如果你有一些非守护线程正在等待锁，并且你没有安排释放锁，那么主线程将在退出时挂起。

正如 Patrick 提到的，您可以使用 更直接地退出程序`exit_`，但这会绕过所有清理功能，并且可能不适合您的应用程序。

# tfs - 使用自动构建 TFS 2010 构建网站应用程序

> ID：10085739
> 
> 赞同：0
> 
> 时间：2012-04-10T08:55:10.900
> 
> 标签：tfs, tfs-2010

我尝试构建一个网站应用程序。使用带有自定义构建定义模板的 TFS 2010 自动构建。尝试将 dll 引用复制到 Bin 文件夹时构建失败：\Lib\AjaxControlToolkit.Binary.NET4\AjaxControlToolkit.dll" 到 "..\Portal\Portal.Web\Bin\AjaxControlToolkit.dll"。访问路径'..\Portal\Portal.Web\Bin\AjaxControlToolkit.dll' 被拒绝。

该应用程序是一个网站，而不是一个 Web 应用程序。在 LIB 文件夹中，我保留了网站使用的所有 3rd 方 dll（例如 ajaxcontroltoolkit） Lib 和 Bin 文件夹都添加到源代码管理中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:36:55.223

您制作并存储在TFS中的文件夹结构不正确的问题，因为bin文件夹不应存储在TFS上，而第三方库应存储在共享二进制文件夹中，因此您需要调整文件夹TFS 和您本地的结构。

![在此处输入图像描述](../Images/6b1bc7f3f9a912d44d9a550fda1fb24d.png)

有关更多信息，请参阅此链接：

[P&P TFS 指南](http://vstsguidance.codeplex.com/wikipage?title=How%20To:%20Structure%20Your%20Source%20Control%20Folders%20in%20Team%20Foundation%20Server&referringTitle=How%20Tos&ProjectName=vstsguidance)

# php - 还有其他显示信息的方法吗？

> ID：10085747
> 
> 赞同：-2
> 
> 时间：2012-04-10T08:55:55.483
> 
> 标签：php, string, templates

我想以不同的方式显示我的文章信息，具有开/关功能，如下所示：1.title 2.text 3.date 或 1.title 2.readmore 按钮 3.text 等...

下面的脚本可以做到这一点，但它有点长和复杂，还有其他方法可以做到吗？不使用数组。

$firstpositioninfo 是要显示的信息字段。1 - 标题，2 文本等。

```
<div id="pos1">
<?php
if ( $firstpositioninfo = 1 ) {
echo 'Here will be title';
elseif ( $firstpositioninfo = 2 ) {
echo 'Here will be text';
elseif ( $firstpositioninfo = 3 ) {
echo 'Here will be readmore';
.....
else { }
?></div>

<div id="pos2">
<?php
if ( $firstpositioninfo = 1 ) {
echo 'Here will be title';
elseif ( $firstpositioninfo = 2 ) {
echo 'Here will be text';
elseif ( $firstpositioninfo = 3 ) {
echo 'Here will be readmore';
.....
else { }
?></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:01:45.420

是的，存在很多更好的解决方案......

尝试：

```
switch($firstpositioninfo):
case 1:
   for each post, display it properly
   break;
(...) 
```

显示每个帖子也应该声明为函数，检查[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)原则。

# android - 如何在android中将csv文件作为附件发送？

> ID：10085748
> 
> 赞同：3
> 
> 时间：2012-04-10T08:55:57.743
> 
> 标签：android

嗨，我正在开发一个具有电子邮件功能的 android 应用程序。在这里，我需要从我的路径 data/data/mypackage/files 文件夹中发送一个 CSV 文件。我将 csv 文件存储在那里。它保存得很好。我的 csv 文件大小仅为 245 字节。但是，当我尝试通过 android 的邮件功能发送该文件时，显示“文件太大而无法附加..”消息正在显示。

这是我的代码：

```
String filelocation="file:///data/data/my package/files/excerDB.zip";   
            final Intent emailIntent = new 

    Intent(android.content.Intent.ACTION_SEND);           
                emailIntent .setType("plain/text");             
                emailIntent .putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{"purpletalk.raghu@gmail.com"});             
                emailIntent .putExtra(android.content.Intent.EXTRA_SUBJECT, "Attendence Report");             
                emailIntent .putExtra(android.content.Intent.EXTRA_STREAM, Uri.parse(filelocation));

            startActivity( emailIntent); 
```

但这对我不起作用。请告诉我如何将我的文件作为附件发送到我的申请中的邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:29:43.753

我希望这段代码能帮助你

```
String FILE = Environment.getExternalStorageDirectory() + File.separator
            + "Foldername";
Intent sendIntent = new Intent(android.content.Intent.ACTION_SEND);
        // sendIntent.setType("text/html");
        sendIntent.setType("application/csv");
        sendIntent.putExtra(android.content.Intent.EXTRA_EMAIL, "");
        sendIntent.putExtra(Intent.EXTRA_SUBJECT, "");
        sendIntent.putExtra(Intent.EXTRA_TEXT, "");
        String temp_path = FILE + "/" + "Filename.csv";
        File F = new File(temp_path);
        Uri U = Uri.fromFile(F);
        sendIntent.putExtra(Intent.EXTRA_STREAM, U);
        startActivity(Intent.createChooser(sendIntent, "Send Mail")); 
```

享受这段代码！

# html - 为什么移动浏览器（iPhone）中出现水平滚动？

> ID：10085750
> 
> 赞同：0
> 
> 时间：2012-04-10T08:56:14.887
> 
> 标签：html, css, browser, mobile

我编写了一个html页面，如下所示：

```
 <html>
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
 <title>Test</title>
 </head>
 <body bgcolor="#f2f2f2">

     <div style="width:1000px;height:auto;margin:0px auto;" ><!-- main container -->
         <div style="width:1000px;height:50px;margin:0px auto; background-color:pink;" ><!-- container 2 -->
           Hello world
          </div> <!-- end container 2 -->
     </div> <!-- end main container -->

 </body>
</html> 
```

div 的宽度为 1000px，并使用属性 margin:0px auto 居中对齐；当我在桌面浏览器中查看时，它很好。但是在移动浏览器（iPhone Safari）中，我得到了一个不需要的水平滚动，整个页面也是水平和对角浮动的。

为什么会这样？

如何解决这个特定于 iPhone/iPad 浏览器的问题。我没有在其他手机上测试过。

我需要输入哪些代码才能使移动浏览器正确显示网页（专为桌面浏览器设计）？

请建议。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T10:09:02.367

感谢您提供的建议。

稍作修改就解决了这个问题。

```
<meta name="viewport" content="width=1000" /> 
```

这行得通。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:00:38.520

尝试将此行添加到 head 部分：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T10:29:31.307

```
<meta name="viewport" content="width=1000, initial-scale=1" /> 
```

试试上面的，而不是。内容宽度设置为与容器 div 的宽度相匹配，并删除了最大比例以允许用户放大。

# php - 如何从不同的 IP 发送时事通讯？

> ID：10085752
> 
> 赞同：2
> 
> 时间：2012-04-10T08:56:22.920
> 
> 标签：php, email, unix, data-structures, massmail

我正在开发一个商业营销网站。标准是我们每天必须向不同的电子邮件地址发送大约 80,000 份（比如说）时事通讯。但是我的托管公司只允许我每天从一个 IP 发送 10,000 封（比如说）电子邮件。所以为了解决这个问题，我的客户为我提供了 8 个不同的 IP。我有以下问题：

1.  我不知道如何从不同的 IP 发送每一个时事通讯，意味着第一个 IP 的第一个，第二个 IP 的第二个等等？

2.  由于我是 PHP 开发人员而不是服务器端专家，我可以仅通过我的 PHP 脚本完成此操作，还是必须编写一个 shell 脚本才能在我的服务器上运行？

3.  有没有什么算法可以解决这类问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:51:42.670

几年前有类似的问题。我以简单的方式解决了它。在 SQL 中创建表，或者创建一个类并对其进行序列化。类或 SQL 必须包含邮件地址（如果你有某种易失性内容，那么还有邮件内容），做一个类以特定顺序发送邮件，并在每个 ip 上做这个类的对象。这取决于您在服务器上拥有什么样的配置。我有一个简单的方法，因为所有 IP 都有自己的包含内容的文件夹，所以我只是把代码放在那里做对象，并且只是重定向了几次网站，因为它必须由 web 完成。如果您可以通过 CLI 拥有它，那么您很有可能可以通过 include 或类似的方式来实现它。

这种方式很蹩脚，我知道，但当时不想做更复杂的事情。后来我写了一个类来管理通过 SMTP 的邮件连接，所以我可以选择从女巫帐户发送邮件。这是更好的方法，但并非所有服务器都支持它。

另一种方法是做一个 cron 工作并做一篮子邮件以随着时间的推移发送部分。（这种方式在我正在修复的服务器上最常见）。

另一种方法是对具有 IP 的服务器进行弹跳效果。可能您还可以编写一些 shell 脚本并通过 php 脚本调用它。

好吧，我认为有更好的方法，但这真的取决于服务器配置。

PS。忘了提一下，该代码可以由 AJAX 调用。

# android - 单击 webview 中的选择框时应用程序崩溃

> ID：10085753
> 
> 赞同：6
> 
> 时间：2012-04-10T08:56:23.990
> 
> 标签：android, android-webview

我在我的应用程序中使用 webview。Webview 是使用应用程序上下文创建的。单击任何选择框时应用程序崩溃

```
04-10 14:19:14.502: E/AndroidRuntime(12628): Uncaught handler: thread main exiting due to uncaught exception
04-10 14:19:14.542: E/AndroidRuntime(12628): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
04-10 14:19:14.542: E/AndroidRuntime(12628):    at android.view.ViewRoot.setView(ViewRoot.java:476)
04-10 14:19:14.542: E/AndroidRuntime(12628):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
04-10 14:19:14.542: E/AndroidRuntime(12628):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
04-10 14:19:14.542: E/AndroidRuntime(12628):    at android.app.Dialog.show(Dialog.java:239)
04-10 14:19:14.542: E/AndroidRuntime(12628):    at android.webkit.WebView$InvokeListBox.run(WebView.java:9509)
04-10 14:19:14.542: E/AndroidRuntime(12628):    at android.os.Handler.handleCallback(Handler.java:609)
04-10 14:19:14.542: E/AndroidRuntime(12628):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-10 14:19:14.542: E/AndroidRuntime(12628):    at android.os.Looper.loop(Looper.java:123)
04-10 14:19:14.542: E/AndroidRuntime(12628):    at android.app.ActivityThread.main(ActivityThread.java:4595)
04-10 14:19:14.542: E/AndroidRuntime(12628):    at java.lang.reflect.Method.invokeNative(Native Method)
04-10 14:19:14.542: E/AndroidRuntime(12628):    at java.lang.reflect.Method.invoke(Method.java:521)
04-10 14:19:14.542: E/AndroidRuntime(12628):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-10 14:19:14.542: E/AndroidRuntime(12628):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-10 14:19:14.542: E/AndroidRuntime(12628):    at dalvik.system.NativeStart.main(Native Method) 
```

我很清楚这个问题已经被问过很多次了，但我还没有找到任何可行的解决方案。如果我使用活动上下文，这个问题将得到解决，但由于其他一些问题，我必须使用应用程序上下文。对于其他警报和对话框，我已经通过覆盖 webchromeclient 中的 onJsAlert() 来处理它们，但我无法找到如何在我的 webview 中拦截它并创建我自己的选择器对话框。

非常感谢任何形式的建议/帮助。

添加我的 webview 实现的虚拟示例

```
class MyWebView extends WebView
{

 MyWebView(Context context)
 {

    super(context.getApplicationContext());
    setWebChromeClient(myWebChromeClient);
    setWebViewClient(myWebViewClient);
 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-21T15:40:11.780

这是因为在创建 WebView 时传递的是应用程序上下文而不是活动上下文。为了在 Android 中从 WebView 显示选择框，WebView 使用在其构造函数中提供给它的上下文并打开一个原生单选选择器。要显示此选择器对话框，它需要一个活动上下文，而不是应用程序的上下文。换行：

```
super(context.getApplicationContext()); 
```

有了这条线：

```
super(context); 
```

您还需要确保在创建它的 Activity 中使用 Web 视图（在不同的 Activity 上使用它是没有意义的）。如果您需要在不同的活动中使用 Web 视图，只需使用指定活动的上下文创建一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:13:04.803

我希望你`extends Activity`在这种情况下使用。

只是从[这里](http://developer.android.com/resources/tutorials/views/hello-webview.html)参考。

如果你还想使用 webView，那么我已经为此编写了以下代码。

```
mWebView.setWebViewClient(new WebViewClient() {
        @Override
        public void onReceivedError(WebView view, int errorCode,
                String description, String failingUrl) {
            // Handle the error
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
    }); 
```

# java - 当我使用 nexus 进行代理时，如何在 pom 中添加自定义存储库？

> ID：10085754
> 
> 赞同：2
> 
> 时间：2012-04-10T08:56:24.290
> 
> 标签：java, maven, nexus

我正在尝试使用 nexus 代理中央存储库，这很慢。所以。我已经根据教程配置了 maven。

```
<settings>
  <mirrors>
    <mirror>
      <!--This sends everything else to /public -->
      <id>nexus</id>
      <mirrorOf>*</mirrorOf>
      <url>http://localhost:8081/nexus/content/groups/public</url>
    </mirror>
  </mirrors>
  <profiles>
   <profile>
      <id>nexus</id>
      <!--Enable snapshots for the built in central repo to direct -->
      <!--all requests to nexus via the mirror -->
      <repositories>
        <repository>
          <id>central</id>
          <url>http://central</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </repository>
      </repositories>
     <pluginRepositories>
        <pluginRepository>
          <id>central</id>
          <url>http://central</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </pluginRepository>
     </profile>
  </profiles>
  <activeProfiles>
    <activeProfile>nexus</activeProfile>
  </activeProfiles>
</settings> 
```

一切正常且快速。但是当我尝试使用 pom.xml 中指定的自定义存储库时遇到了问题（此存储库仅用于具体项目）

所以。我在谈论：

```
<pluginRepositories>
  <pluginRepository>
    <id>dtrott</id>
    <url>http://maven.davidtrott.com/repository</url>
  </pluginRepository>
</pluginRepositories> 
```

来自：[https ://github.com/dtrott/maven-protoc-plugin#readme](https://github.com/dtrott/maven-protoc-plugin#readme)

错误信息：

```
Error resolving version for plugin 'com.google.protobuf.tools:maven-protoc-plugin' from the repositories [local (C:\Users\valden\.m2\repository), nexus (http://localhost:8081/nexus/content/groups/public)]: Plugin not found in any plugin repository -> [Help 1] 
```

在 maven settings.xml 中，我更改了下一行：

```
<mirrorOf>*</mirrorOf> 
```

至

```
<mirrorOf>central</mirrorOf> 
```

它现在正在工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:59:05.887

一种选择是将自定义存储库`Nexus`作为代理存储库（类型`proxy`）添加到您的。然后你不必在你的`pom`.

# python - 如何使用 xlutils、xlwt、xlrd 和 python 删除 excel 文件中的现有工作表

> ID：10085755
> 
> 赞同：0
> 
> 时间：2012-04-10T08:56:43.900
> 
> 标签：python, xlwt, xlrd, xlutils

我试图搜索很多地方，但没有看到任何关于如何使用 xlutils 或 xlwt 和 python 删除 excel 文件中现有工作表的示例代码片段。请问谁能帮帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T02:04:10.673

我刚刚处理了这个问题，虽然这通常不是一个好的编码选择，但您可以使用内部*Workbook* _worksheets 来访问和设置工作簿对象的工作表。

```
write_book._Workbook__worksheets = [write_book._Workbook__worksheets[0]] 
```

这将剥离除与工作簿关联的第一个工作表之外的所有内容

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T00:50:00.720

我只是想确认我使用大卫给出的答案来工作。这是一个示例，说明我有一个包含 40 多张工作表的电子表格（工作簿），需要将其拆分为自己的工作簿。我复制了主工作簿，删除了除一张表之外的所有内容并保存到新的电子表格中：

```
from xlrd import open_workbook
from xlutils import copy

workbook = open_workbook(filepath)

# Process each sheet
for sheet in workbook.sheets():
    # Make a copy of the master worksheet
    new_workbook = copy.copy(workbook)

    # for each time we copy the master workbook, remove all sheets except
    #  for the curren sheet (as defined by sheet.name)
    new_workbook._Workbook__worksheets = [ worksheet for worksheet in new_workbook._Workbook__worksheets if worksheet.name == sheet.name ]

    # Save the new_workbook based on sheet.name
    new_workbook.save('{}_workbook.xls'.format(sheet.name)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-09T14:12:05.847

以下方法可以满足您的需要：

```
def deleteAllSheetBut(workingFolder, xlsxFILE, sheetNumberNotToDelete=1):
import win32com.client as win32
import os
excel = win32.gencache.EnsureDispatch('Excel.Application')
excel.Visible = False
excel.DisplayAlerts = False
wb = excel.Workbooks.Open( os.path.join( workingFolder, xlsxFILE ) )
for i in range(1, wb.Worksheets.Count):
    if i != sheetNumberNotToDelete:
        wb.Worksheets(i).Delete()
wb.Save()
excel.DisplayAlerts = True
excel.Application.Quit()
return 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-10T09:27:01.307

不确定这些模块，但你可以试试 win32

```
from win32com import client
def delete(self, number = 1):
    """
    (if the sheet is the first use 1\. -1 to use real number)
    example: r.delete(1)
    """
    sheetnumber = int(number) - 1 
```

# python - 我是否在我的 Django 测试中模拟了这个辅助函数？

> ID：10085763
> 
> 赞同：1
> 
> 时间：2012-04-10T08:57:08.430
> 
> 标签：python, django, unit-testing, mocking, django-testing

**库文件**

```
from django.core.urlresolvers import reverse
def render_reverse(f, kwargs):
    """
    kwargs is a dictionary, usually of the form {'args': [cbid]}
    """
    return reverse(f, **kwargs) 
```

**测试.py**

```
from lib import render_reverse, print_ls

class LibTest(unittest.TestCase):

def test_render_reverse_is_correct(self):
    #with patch('webclient.apps.codebundles.lib.reverse') as mock_reverse:
    with patch('django.core.urlresolvers.reverse') as mock_reverse:
        from lib import render_reverse
        mock_f = MagicMock(name='f', return_value='dummy_views')
        mock_kwargs = MagicMock(name='kwargs',return_value={'args':['123']})
        mock_reverse.return_value = '/natrium/cb/details/123'
        response = render_reverse(mock_f(), mock_kwargs())

        print mock_reverse.mock_calls  # prints []
    print mock_reverse.mock_calls  # prints []
    self.assertTrue('/natrium/cb/details/' in response) 
```

但相反，我得到

```
 File "/var/lib/graphyte-webclient/graphyte-webenv/lib/python2.6/site-packages/django/core/urlresolvers.py", line 296, in reverse
    "arguments '%s' not found." % (lookup_view_s, args, kwargs))
NoReverseMatch: Reverse for 'dummy_readfile' with arguments '('123',)' and keyword arguments '{}' not found. 
```

为什么它调用`reverse`而不是我的`mock_reverse`（它正在查找我的 urls.py ！！）你可以看到`calls`返回一个空列表。我什`assert mock_reverse.called`至它返回错误。

也许我没有提到这个，但是lib只是一堆函数，没有类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:47:01.493

两件事情。1\. 你需要`reverse`从 Django 打补丁。2.您需要在上下文管理器中进行导入，以使`lib`模块导入模拟`reverse`。

```
from lib import print_ls

class LibTest(unittest.TestCase):

    def test_render_reverse_is_correct(self):
        with patch('django.core.urlresolvers.reverse') as mock_reverse:
            from lib import render_reverse
            mock_f = MagicMock(name='f', return_value='dummy_view')
            mock_kwargs = MagicMock(name='kwargs',return_value={'args':['123']})
            mock_reverse.return_value = '/natrium/cb/details/123'
            response = render_reverse(mock_f, mock_kwargs)

        self.assertTrue('/natrium/cb/details/' in response) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:05:48.533

您没有传递任何关键字参数（这是一个字典），而是传递位置参数（元组）。

此外，您的反向代理方法只传递关键字参数而不是位置参数。

最后，您没有与请求的模式匹配的 URL - 因为您没有传递任何关键字参数，只有位置参数。

# java - Spring TransactionManager - 提交不起作用

> ID：10085771
> 
> 赞同：7
> 
> 时间：2012-04-10T08:58:03.713
> 
> 标签：java, jdbc, transactions, spring-batch, transactionmanager

我正在尝试创建基于 Spring 的解决方案，用于在 MySQL 5.5 服务器上运行批量 SQL 查询。“查询”是指任何可以编译的 SQL 语句，因此 SQL 批处理作业可以包含例如几个 CREATE TABLE、DELETE 和 INSERT 语句。

为此，我正在使用[Spring Batch 。](http://static.springsource.org/spring-batch/)

我已经`transactionManager`配置如下。

```
 <bean id="transactionManager"
        class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource" />
    </bean>
    <tx:annotation-driven transaction-manager="transactionManager" /> 
```

和`dataSource`：

```
 <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
    destroy-method="close">
    <property name="driverClassName" value="${batch.jdbc.driver}" />
    <property name="url" value="${batch.jdbc.url}" />
    <property name="username" value="${batch.jdbc.user}" />  
    <property name="password" value="${batch.jdbc.password}" /> 
    <property name="maxIdle" value="10" />
    <property name="maxActive" value="100" />
    <property name="maxWait" value="10000" />
    <property name="validationQuery" value="select 1" />
    <property name="testOnBorrow" value="false" />
    <property name="testWhileIdle" value="true" />
    <property name="timeBetweenEvictionRunsMillis" value="1200000" />
    <property name="minEvictableIdleTimeMillis" value="1800000" />
    <property name="numTestsPerEvictionRun" value="5" />
    <property name="defaultAutoCommit" value="true" />
</bean> 
```

我的 DAO 类的方法配置为

```
@Transactional(propagation = Propagation.REQUIRES_NEW) 
```

我循环遍历一组 SQL 语句，一次使用单个 SQL 语句调用该方法。方法内部的处理很简单：

```
simpleJdbcTemplate.getJdbcOperations().execute(sql); 
```

我希望当 DAO 方法完成时，我会在数据库中看到结果。但是，似乎只有当 Spring 作业执行完成时，结果才会在数据库中可用。

我试图在我的 DAO 方法中进行提交：

```
@Transactional(propagation = Propagation.REQUIRES_NEW)
private void executeSingleQuery(String sql) {
    PlatformTransactionManager transactionManager = (PlatformTransactionManager)context.getBean("transactionManager");

    DefaultTransactionDefinition def = new DefaultTransactionDefinition();
    def.setPropagationBehavior(Propagation.REQUIRED.ordinal());

    TransactionStatus status = transactionManager.getTransaction(def);

    try {
        // execute your business logic here
        log.info("about to execute SQL query[" + sql + "]");
        simpleJdbcTemplate.getJdbcOperations().execute(sql);

    } catch (Exception e) {
        log.info("SQL query  was not committed due to exception and was marked for rollback");
        transactionManager.rollback(status);
    }

    transactionManager.commit(status);

    if (transactionManager.getTransaction(null).isRollbackOnly() 
            && transactionManager.getTransaction(null).isCompleted()) {
        log.info("SQL query commited!");
    } else {
        log.info("SQL query  was not committed due to: 1) the transaction has been marked for rollback " +
                "2) the transaction has not completed for some reason");
    }

    log.info("the query has completed");
} 
```

我调试了 Spring 代码，看到我从 DAO 方法调用的提交是由 TransactionTemplate 执行的（流程到达行`this.transactionManager.commit(status);`并无异常通过）

我将不胜感激任何建议，以使 DAO 方法在每次调用时都提交（在它执行的每个 SQL 语句之后提交）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T09:07:59.033

您不能代理私有方法。即你在这里的@Transactional 没有效果。将该方法拉到您的父界面，它应该可以工作。除非您启用了不推荐的 proxyTargetClass 设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T09:45:21.403

当您`executeSingleQuery()`从同一类中调用您时，您不会通过代理，因此事务注释将无效。

您正在混合声明性和程序化事务，大概是您想要`REQUIRES_NEW`的，这样您就可以删除无意义的`@Transactional`注释并`Propagation.REQUIRES_NEW`在设置`DefaultTransactionDefinition`.

此外，您可能想`transactionManager.commit(status)`在`try`块内移动，您当前的代码回滚，然后在`Exception`发生时尝试提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-20T22:11:07.113

我们使用了`@Rollback(value = false)`注释并解决了您面临的问题。

# jquery-mobile - jQueryMobile - 无法链接到 PDF 文档

> ID：10085772
> 
> 赞同：5
> 
> 时间：2012-04-10T08:58:05.917
> 
> 标签：jquery-mobile

我无法使用 jQueryMobile 链接到移动网站上的 PDF 文档。

该链接使用 jQueryMobile 效果打开，并显示一个带有“未定义”文本的页面。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T09:12:04.993

将 data-ajax=false 添加到您的链接`<a href="your.pdf" data-ajax="false">pdf</a>`由于许多手机不支持 pdf，您可能想要探索类似[http://www.labnol.org/gadgets/ipod/read-pdf-text-email-on-的内容ipod-移动电话/1929/](http://www.labnol.org/gadgets/ipod/read-pdf-text-email-on-ipod-mobile-phone/1929/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:16:44.797

您可能需要考虑在 pdf.js 中集成。考虑到某些移动设备不直接支持 pdf，这似乎是一种选择。

[http://mozilla.github.com/pdf.js/](http://mozilla.github.com/pdf.js/)

# jquery - 悬停时保持打开状态的 Jquery 工具提示

> ID：10085773
> 
> 赞同：0
> 
> 时间：2012-04-10T08:58:10.050
> 
> 标签：jquery, tooltip

我正在使用以下工具提示： [http ://bassistance.de/jquery-plugins/jquery-plugin-tooltip/](http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/)

这非常有效，但是是否支持实现在悬停时保持打开的工具提示？还是一种实现方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:10:09.390

最后，我选择为“粘性”工具提示创建一个单独的 jquery 插件。

它与通常的工具提示基本相同，只是它不会在鼠标移出时隐藏自己。

如果想看实现，查看原jquery tooltip中的'createHelper'方法，修改如下：

```
helper.parent = $('<div id="' + settings.id + '"><h3></h3><div class="body"></div><div class="url"></div></div>')
            .bind('mouseleave', function () { hide(undefined, settings); })
            // add to document
            .appendTo(document.body)           
        // hide it at first
            .hide(); 
```

上面的内容基本上是：创建一个 div 父级，并使其保持打开状态，直到用户离开打开的工具提示。

# perl - 在 perl 代码中运行 ksh 脚本不起作用

> ID：10085774
> 
> 赞同：0
> 
> 时间：2012-04-10T08:58:17.163
> 
> 标签：perl, bash, shell, unix, ksh

我在类似的位置有一个 Korn shell 脚本`/opt/apps/abc/folder/properties.env`。我可以使用 dot 命令从 Unix bash 执行它：

```
. /opt/apps/abc/folder/properties.env 
```

这行得通。

我有一个 Perl 脚本`abc.pl`，我从中调用该脚本`properties.env`。我尝试了以下不同的方法：

1.  `system('/usr/bin/ksh','-c', '. /opt/apps/abc/folder/properties.env');`

2.  `/usr/bin/ksh -c /opt/apps/abc/folder/properties.env;`

3.  `system('. /opt/apps/abc/folder/properties.env');`

以上都不起作用。我不想使用`exec`，因为我想回到 Perl 脚本。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T10:32:56.363

环境更改只会持续到`system` 命令生成的 ksh 会话的生命周期。如果您希望环境更改影响 Perl 脚本，那么您必须在启动 Perl 程序*之前获取该文件。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:42:10.147

如果您在 perl 代码中需要这些环境变量（而不是在您调用 perl 的环境中），您还可以读取和解析该 properties.env 并在 %ENV 变量中设置环境。

例如

```
$ENV{'ENV_VAR1'}=VALUE_OF_ENV_VAR1 
```

正如另一位海报所说，使用 system() 会产生另一个进程。孩子的环境变化不会影响父母。

# perl - 是否可以自定义 bugzilla 字段（文本字段、文本区域等）？

> ID：10085777
> 
> 赞同：1
> 
> 时间：2012-04-10T08:58:20.120
> 
> 标签：perl, bug-tracking, bugzilla

我有一个产品和这个产品的几个组件。每个组件都有几个报告的错误。

每个错误都已分配给特定用户。

我想为该用户自定义一些文本字段/区域，以便他/她无法编辑该特定字段。

我还想为 Bug Creator（提交新错误的人）自定义一些文本字段/区域，以便他/她无法编辑他/她发布的错误。

可能吗 ？

我们可以通过更改代码来自定义这些字段吗？或者通过安装一些插件？或任何其他方式？

对组的权限/限制也不起作用。例如，我创建了 2 个组 A 和 B。组 A 具有完全权限（创建和编辑错误），但组 B 没有任何权限，但只有 READONLY。但是属于 A 组或 B 组的用户权限之间没有区别（都可以创建和编辑错误）。我如何限制用户属于 B 组？

只有开发人员应该能够创建/编辑字段，但客户不应该能够编辑错误。

* * *

下面的讨论对我很有帮助。因为我有 ProductA、ProductB 和组客户、开发人员。

[http://groups.google.com/group/netscape.public.mozilla.webtools/browse_thread/thread/98efcae88fe84d6d/51c8deb672402e09?lnk=gst&q=permissions+for+all+users#51c8deb672402e09](http://groups.google.com/group/netscape.public.mozilla.webtools/browse_thread/thread/98efcae88fe84d6d/51c8deb672402e09?lnk=gst&q=permissions+for+all+users#51c8deb672402e09)

**回答：**

产品一：

ReadCreateA: Entry/Mandatory/Mandatory/-- EditA: --/NA/NA/Canedit 产品 B 类似。

## 为此，您需要向开发人员授予 editbugs 权限。如果要限制其他产品中的editbugs权限，则需要为其他产品设置一个他们不属于xx/xx/xx/Canedit的组。在您的特定设置中，这已包含在 EditA 和 EditB 组中。

（工作正常）当我使用上述指南时，除了发表评论外，它工作得很好。我在发表评论时收到以下错误->“您不允许编辑产品 A 中的错误”

但我希望“Group UsersA”的用户不应该编辑错误（这很好），但必须能够发表评论。

我该如何管理？

任何帮助，将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:51:56.847

您将需要修改代码来完成此操作。有关详细信息，请参阅[http://www.bugzilla.org/docs/4.2/en/html/cust-change-permissions.html](http://www.bugzilla.org/docs/4.2/en/html/cust-change-permissions.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:07:34.797

这是非常好的讨论，我认为我 75% 的问题已经解决。

[关联](http://groups.google.com/group/netscape.public.mozilla.webtools/browse_thread/thread/98efcae88fe84d6d/51c8deb672402e09?lnk=gst&q=permissions%20for%20all%20users#51c8deb672402e09)

但在这种情况下，用户无法发表评论，现在我需要找到用户不应该能够编辑错误字段但用户无论如何都可以发表评论的方式。

# java - 如何在 Netbeans IDE 之外运行数据库程序？

> ID：10085778
> 
> 赞同：3
> 
> 时间：2012-04-10T08:58:29.170
> 
> 标签：java, jar, netbeans-7

我对数据库真的很陌生，这是我使用 java Netbeans 7.1 在数据库中的第一个程序 --- 现在是我们国家的夏天，我是 IT 课程的学生 我们的下一个编程主题是关于数据库的，因为没有课程我花时间学习数据库为下一个学期做准备，我将这个网站作为我目前正在制作的第一个数据库程序的指南。

[http://www.homeandlearn.co.uk/java/databases_and_java_forms.html](http://www.homeandlearn.co.uk/java/databases_and_java_forms.html)

我在教程中做了所有事情，实际上我已经完成了程序。

我做的最后一件事是清理并构建程序，因为我希望程序在不再次打开 netbeans 的情况下运行，我下载了 JRE 并将我的 database_form.jar 作为 jar 可执行文件。“database_form”是我的 Netbeans 项目的名称。我通过在打开任何 jar 文件时将 JRE.7 中的 javaw 作为我的默认设置来做到这一点。

无论如何，这就是我运行程序的方式。

1.  在 Netbeans IDE 中运行程序

使用 Netbeans，在我的程序运行之前，我首先需要在 JavaDB 上“启动服务器”。因为如果我不这样做，就会发生异常“错误。连接到服务器 localhost 1527 等等”

1.  单独使用 jar 可执行文件运行程序。

问题是仍然发生连接中的异常和错误。

我想达到什么目的？

我希望程序在不打开 Netbeans IDE 并转到 Java DB 以单击“启动服务器”的情况下运行，我不想再这样做了。或者我的第二个选择是使用命令提示符启动服务器，这样我只需要制作一个 bat 文件，这样每当我打开我的程序 database_form.jar 时，我只需将 bat 文件放在我的桌面上并运行它。

第二个问题！实际上，我已经通过使用命令提示符启动服务器尝试了我的第二个选项，但我忘记了我是如何做到的，我只是在某个网站上找到了它，我唯一记得的是异常说“由于数据库员工无法午餐服务器不见了。Employees 是我创建的数据库的名称。

我使用的操作系统是 Windows 7。

感谢您的所有回复，很抱歉我只想具体说明一下长文本，：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:59:51.400

是的，从您的描述来看，您似乎有几件事令人困惑。

首先，数据库通常作为服务器运行，有多个客户端连接到它们，从而允许共享它们。当您启动 Java DB 时，您正在启动 Java DB 数据库服务器。

也就是说，Java DB 等轻量级数据库可以在嵌入式模式下运行，如此[处](https://stackoverflow.com/questions/3810198/using-embedded-javadb)所述。请记住，您使用该属性指向的目录`derby.system.home`将需要包含数据库文件，否则您也需要以编程方式创建该目录。

其次，有多种方法可以在 IDE 之外运行 Java 应用程序，但 jar 本身不能像 Windows 中的 exe 文件那样执行。

最简单的方法是调用 java 可执行文件，传递必要的类路径和包含 main 方法的类的名称。例如，如果我有一个`com.example.Application`已编译到目录`C:\dev\example\classes`的名为的类，则以下命令行将运行该应用程序：

```
java -cp C:\dev\example\classes com.example.Application 
```

如果存在对外部库的依赖关系，就像您在 Derby JDBC 驱动程序上的情况一样，那么这些也需要包含在类路径中，从而导致类似：

```
java -cp C:\dev\example\classes;C:\dev\lib\derby.jar com.example.Application 
```

[这里](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html)有关于 Java 启动器的全套文档。

现在，回到罐子里。就像我说的，jar 不是可执行的，但有一些东西被称为“可执行 jar”。这与任何 jar 相同，只是清单中有一些特殊添加以指定应用程序入口点或主类和类路径，如此[处](http://docs.oracle.com/javase/tutorial/deployment/jar/manifestindex.html)所述。

在 jar 的清单中指定主类和类路径后，以下命令行将运行应用程序：

```
java -jar C:\dev\example.jar 
```

您甚至可以将 jar 扩展与 java exe 相关联，双击 jar 将导致应用程序启动（尽管在开发机器上，将 jar 扩展与 WinZip 或 simlar 关联以打开该 jar 可能更有用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:53:06.813

Netbeans 中的默认数据库是 Derby/JavaDB。所以你需要：

*   在我们的类路径中添加 javadb/derby 的 jar（它可能已经存在，因为在 Ubuntu 中安装它时它与 java 捆绑在一起）
*   使用 jdbc URI 设置路径以保存数据库数据

我个人推荐使用[hsqldb](http://hsqldb.org/)或[H2](http://www.h2database.com/html/main.html)：它们支持内存数据库，对于没有持久性数据的独立项目或测试非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T11:32:42.580

如果您使用窗口，请将管理工具中的 ODBC 数据源添加到您的 Java Derby 驱动程序并运行 jar。

# c# - ICommunicationObject.State 不起作用？

> ID：10085779
> 
> 赞同：1
> 
> 时间：2012-04-10T08:58:29.927
> 
> 标签：c#, .net, wcf, faulted

**你好，**

我用 DuplexChannelFactory 创建了我的 WCF 客户端，问题是当我这样做时：

```
((ICommunicationObject)this.GetMyServiceInterfaceChannel).State 
```

我得到以下异常：

**无法在“System.ServiceModel.ICommunicationObject”类型的实例上获取字段或调用方法，因为它是远程对象的代理。**

为什么？

我需要检查通道是否出现故障。

编辑1：

```
ClientService clientService = new ClientService();
                InstanceContext context = new InstanceContext(clientService);

                DuplexChannelFactory<My.ServiceContracts.IMyClientService> factory = new DuplexChannelFactory<My.ServiceContracts.IMyClientService>(context, connectionName);

                factory.Credentials.UserName.UserName = anvandarNamn;
                factory.Credentials.UserName.Password = password;

                return factory.CreateChannel(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T09:02:13.560

Cast as IClientChannel, then check the State

But be carefull that the State is only updated when you make a call. If you want to test that the channel doesn't timeout, it's not possible untill you make a call that throw the exception.

# c# - 在 Windows 应用程序中显示来自 USB PC 摄像头的实时图像

> ID：10085782
> 
> 赞同：1
> 
> 时间：2012-04-10T08:58:41.267
> 
> 标签：c#, visual-studio-2010, webcam, windows-forms-designer

我想在 Visual Studio 2010 中使用 C# windows 应用程序显示来自 USB PC 网络摄像头的实时图像。我已经搜索并找到了链接[http://channel9.msdn.com/coding4fun/articles/Look-at-me-Windows -Image-Acquisition](http://channel9.msdn.com/coding4fun/articles/Look-at-me-Windows-Image-Acquisition)但是当我尝试这段代码时

```
 WIA.CommonDialog class1 = new WIA.CommonDialog();
            Device d = class1.ShowSelectDevice(WiaDeviceType.UnspecifiedDeviceType, true, false);
            if (d != null)
            {
                settings.DeviceID = d.DeviceID;
                settings.Save();
            } 
```

我收到了给出的编译错误

```
error CS0103: The name 'settings' does not exist in the current context 
```

而且我无法找到此错误的解决方案。谁能告诉我这个错误的解决方案是什么？还有其他最好的方法来显示来自 USB 网络摄像头的实时图像吗？

任何帮助，将不胜感激....

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:05:04.573

看起来好像您还没有定义设置对象，但教程中似乎也没有。虽然我个人会使用 AForge.NET 库，因为它为网络摄像头提供了一个非常简单的接口。

[http://aforgenet.com/](http://aforgenet.com/)

教程：http: [//vimeo.com/7526663](http://vimeo.com/7526663)

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:38:34.317

AForge.NET 是一个非常强大的库。但是对于测试目的或简单项目，您可以使用 WIA。看看[这个教程](http://www.c-sharpcorner.com/uploadfile/yougerthen/catch-a-snapshot-via-your-webcam-using-C-Sharp-part-vii/)- 如何开始的小例子

# spring - Grails - 在 Spring 3.1 的 @Cacheable 中使用 Spring el 表达式

> ID：10085783
> 
> 赞同：2
> 
> 时间：2012-04-10T08:58:46.140
> 
> 标签：spring, caching, grails, groovy

我们计划使用 Spring 3.1 缓存抽象而不是 Grails Spring 缓存插件。我已经在本地进行了实验，但是在使用 Spring el 表达式时出现了问题，例如

```
@Cacheable(value = 'dashboardCache', key = 'sessionStorageService.getUser()', condition = 'sessionStorageService.getUser() != null')
public List<BusinessDashboard> getUserDashboards(String serverName, SessionStorageService sessionStorageService) { ... } 
```

执行集成测试用例时出现以下错误

```
EL1008E:(pos 0): Field or property 'sessionStorageService' cannot be found on object of type 'org.springframework.cache.interceptor.CacheExpressionRootObject'
org.springframework.expression.spel.SpelEvaluationException: EL1008E:(pos 0): Field or    property 'sessionStorageService' cannot be found on object of type 'org.springframework.cache.interceptor.CacheExpressionRootObject' 
```

我认为这种行为是由于缺少调试信息引起的——因此我的问题是：

是否可以在 Grails 应用程序中启用 Spring el 表达式，或者编译过程是否有任何参数告诉 Grails 将调试符号保留在类文件中？

（我们在 Grails 2.0.1 上运行）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T13:23:04.447

你应该尝试'#sessionStorageService.getUser()'

# php - Facebook 应用程序 - 在 FB 花费的时间

> ID：10085789
> 
> 赞同：1
> 
> 时间：2012-04-10T08:59:04.210
> 
> 标签：php, facebook, api

我正在开发 FB 应用程序。而且我不知道如何计算在 facebook 上花费的总时间。有任何想法吗？facebook有注册时间之类的吗？我一直在寻找这个，但没有找到任何东西。

感谢您的回答和帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:43:30.640

[嗨，据我所知，这是不可能的，这里](https://stackoverflow.com/questions/7902259/date-of-registration-on-facebook)的 facebook 工程师已确认 。对不起

# wxwidgets - libgsl 和 wxwidget 的问题

> ID：10085793
> 
> 赞同：0
> 
> 时间：2012-04-10T08:59:39.770
> 
> 标签：wxwidgets, linker-errors, winmain

我在 Windows 7 / Visual Studio 2010 中构建项目时遇到困难，并且已经花费了比我承认的时间更长的时间来搜索和修复其他错误以达到这一点，但令人沮丧的是，我似乎无法摆脱最后一个错误. 存在与 math.h 中定义的 _hypot 函数相关的链接器错误：

> wxTheAppInitializer" (?wxTheAppInitializer@@3VwxAppInitializer@@A) 已在 main.obj 1>libgsl.a(linalg_svd.o) 中定义：错误 LNK2019：未解析的外部符号 _hypot 在函数 _gsl_linalg_SV_decomp 1>libgsl.a(matrix_oper.o) 中引用：错误 LNK2001：未解析的外部符号 _hypot 1>libgsl.a(linalg_householder.o)：错误 LNK2001：未解析的外部符号 _hypot
> 
> : 致命错误 LNK1120: 1 未解决的外部

当我在使用静态库时遵循[未解析的外部符号“_hypot”](https://stackoverflow.com/questions/6809275/unresolved-external-symbol-hypot-when-using-static-library)的建议时，我得到以下信息：

> 1> 生成代码... 1> main.obj : 错误 LNK2005: _hypot 已在 About.obj 中定义 1> 致命错误 LNK1169: 找到一个或多个多重定义的符号

谁能解释发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:26:20.080

创建具有以下内容的 .c 文件：

```
extern double fabs(double);
extern double sqrt(double);

double hypot(double x, double y) {
  double ax = fabs(x), ay = fabs(y);
  double xy = x/y, yx = y/x;
  return ax > ay
    ? ax * sqrt(1.0 + yx*yx)
    : ay * sqrt(1.0 + xy*xy);
} 
```

不包括 math.h

# jakarta-ee - Sencha Windows SDK 工具 2.0.0。Maven 集成

> ID：10085795
> 
> 赞同：5
> 
> 时间：2012-04-10T09:00:03.593
> 
> 标签：jakarta-ee, maven, extjs

有人将 ExtJs 4 与 maven 一起使用吗？就目前而言，Sencha SDK 工具仅适用于已部署并启动的 webapp（它是一个 java webapp），即使在这种情况下，生成的 app-all.js 也不包含所有依赖项，并且 Ext 下载了大量的 dep。在运行时。我需要的是在构建过程中以某种方式集成生产文件生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:38:07.580

您可以像提供其他资源（html、图像、css、其他 javascript）一样提供资源（在本例中为 Ext JS 4）。

有一些解决方案或想法如何提供 Maven 解决方案。

*   [https://github.com/ffrr/extjs-maven-plugin](https://github.com/ffrr/extjs-maven-plugin)
*   [http://www.sencha.com/forum/showthread.php?179849-New-to-ExtJS-with-Maven](http://www.sencha.com/forum/showthread.php?179849-New-to-ExtJS-with-Maven)
*   [http://www.sencha.com/forum/showthread.php?192915](http://www.sencha.com/forum/showthread.php?192915)

除此之外，最新版本将是 Sencha Cmd 3（以前称为 SDK Tools），请查看[http://www.sencha.com/forum/forumdisplay.php?8-Sencha-Cmd](http://www.sencha.com/forum/forumdisplay.php?8-Sencha-Cmd)

--

在我看来，你可以坚持使用简单的方法来添加资源之类的东西。如果要构建，可以在 Maven 中执行脚本和/或 Sencha SDK/Cmd 可执行文件（例如 maven-exec-plugin）。

所以，如果你认为会有一个简单的 Sencha Maven 插件直接从 pom.xml 初始化 SDK 工具：不。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-14T11:36:16.353

您可以使用 Sencha CMD 使用 Maven 构建您的 Sencha ExtJS 项目。这很容易。检查我的示例项目 Sencha ExtJS 5 + Sencha Cmd 5 + Maven：

[https://github.com/dobromyslov/sencha-extjs-maven](https://github.com/dobromyslov/sencha-extjs-maven)

[Sencha ExtJS 5.0 BETA](http://www.sencha.com/blog/announcing-public-beta-of-ext-js-5/)目前可用。阅读[Sencha CMD 文档](http://docs.sencha.com/extjs/5.0.0/getting_started/getting_started.html)并在实践中尝试。

然后只需将您的项目放在`webapp`文件夹中并使用`exec-maven-plugin`Sencha CMD 构建您的 ExtJS 应用程序，如下所示：

```
<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>exec-maven-plugin</artifactId>
<version>1.2.1</version>
<executions>
    <execution>
        <id>sencha-compile</id>
        <phase>compile</phase>
        <goals>
            <goal>exec</goal>
        </goals>
        <configuration>
            <!-- Set path to your Sencha Cmd executable-->
            <executable>../Sencha/Cmd/5.0.0.116/sencha</executable>
            <arguments>
                <argument>-sdk</argument>
                <argument>${basedir}/src/main/webapp</argument>
                <argument>app</argument>
                <argument>build</argument>
                <argument>--clean</argument>
                <argument>--environment</argument>
                <argument>${sencha.env}</argument>
                <argument>--destination</argument>
                <argument>${basedir}/src/main/webapp/build</argument>
            </arguments>
        </configuration>
    </execution>
</executions> 
```

如果要从生成的 WAR 文件中清除不必要的文件，请使用`maven-war-plugin`配置的排除项，如下所示：

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-war-plugin</artifactId>
<version>2.4</version>
<configuration>
    <failOnMissingWebXml>false</failOnMissingWebXml>
    <webResources>
        <resource>
            <directory>src/main/webapp/build/${sencha.env}/MyApp</directory>
            <excludes>
                <exclude>**/Readme.md</exclude>
            </excludes>
        </resource>
    </webResources>
    <packagingExcludes>.sencha/**,app/**,build/**,ext/**,overrides/**,packages/**,sass/**,bootstrap.css,bootstrap.js,bootstrap.json,build.xml,Readme.md</packagingExcludes>
</configuration> 
```

# mysql - Mysql CREATE FUNCTION 语法错误

> ID：10085796
> 
> 赞同：0
> 
> 时间：2012-04-10T09:00:05.463
> 
> 标签：mysql

```
CREATE DEFINER = CURRENT_USER FUNCTION GET_DISTANCE (LatBegin float,LngBegin float,LatEnd float,LngEnd float)
    RETURNS float
    BEGIN
        DECLARE Distance FLOAT
    DECLARE EARTH_RADIUS FLOAT
    SET EARTH_RADIUS =  6378137.00

    DECLARE dlat FLOAT
            DECLARE dlng FLOAT
    SET LatBegin =  LatBegin * PI()/ 180.0
    SET LngBegin = LngBegin * PI() / 180.0
        SET LatEnd = LatEnd * PI() / 180.0
    SET LngEnd = LngEnd * PI() / 180.0

    SET dlat =  LatBegin - LatEnd
    SET dlng = LngBegin - LngEnd

    SET Distance = (1-cos(dlat))/2.0+cos(LatBegin)*cos(LatEnd)*((1-cos(dlng))/2.0)
    SET Distance = asin(sqrt(Distance)) * EARTH_RADIUS *2.0
    SET Distance = Round(Distance * 10000,2) / 10000
    RETURN Distance
    END 
```

[Err] 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'DECLARE v_dlat FLOAT; 附近使用的正确语法；声明 dlng 浮动；SET LatBegin = LatBegin * PI(' 在第 8 行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:07:36.827

你已经把整个函数写成一个大语句。您需要使用分隔符。[这是MySQL 手册](http://dev.mysql.com/doc/refman/5.5/en/create-procedure.html)中的示例：

```
mysql> delimiter //

mysql> CREATE PROCEDURE simpleproc (OUT param1 INT)
    -> BEGIN
    ->   SELECT COUNT(*) INTO param1 FROM t;
    -> END//
Query OK, 0 rows affected (0.00 sec)

mysql> delimiter ;

mysql> CALL simpleproc(@a);
Query OK, 0 rows affected (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:06:18.160

`;`您必须以so结束每一行/命令

```
BEGIN
    DECLARE Distance FLOAT;
    DECLARE EARTH_RADIUS FLOAT;
    SET EARTH_RADIUS =  6378137.00; 
```

ETC .....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T09:25:21.193

添加 ';' 正如 ManseUK 建议的那样。

所有声明必须在 BEGIN...END 子句的开头 -

```
CREATE DEFINER = CURRENT_USER FUNCTION GET_DISTANCE(LatBegin FLOAT,
                                                    LngBegin FLOAT,
                                                    LatEnd   FLOAT,
                                                    LngEnd   FLOAT
                                                    )
RETURNS FLOAT
BEGIN
  DECLARE Distance     FLOAT;
  DECLARE EARTH_RADIUS FLOAT;
  DECLARE dlat         FLOAT;
  DECLARE dlng         FLOAT;

  SET EARTH_RADIUS = 6378137.00;
  SET LatBegin = LatBegin * PI() / 180.0;
  SET LngBegin = LngBegin * PI() / 180.0;
  SET LatEnd = LatEnd * PI() / 180.0;
  SET LngEnd = LngEnd * PI() / 180.0;
  SET dlat = LatBegin - LatEnd;
  SET dlng = LngBegin - LngEnd;

  SET Distance = (1 - COS(dlat)) / 2.0 + COS(LatBegin) * COS(LatEnd) * ((1 - COS(dlng)) / 2.0);
  SET Distance = ASIN(SQRT(Distance)) * EARTH_RADIUS * 2.0;
  SET Distance = ROUND(Distance * 10000, 2) / 10000;
  RETURN Distance;
END 
```

# javascript - 如何限制 div 的旋转角度

> ID：10085800
> 
> 赞同：-1
> 
> 时间：2012-04-10T09:00:15.743
> 
> 标签：javascript, jquery, html, css

我试图将 div 的旋转范围限制在 90 度到 -90 度之间。div 不应超出我们定义的范围。考虑这个小提琴[http://jsfiddle.net/aniprasanth/Cc6cr/1/](http://jsfiddle.net/aniprasanth/Cc6cr/1/)。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:23:54.740

在您的 jsfiddle 中，您现在已经知道度数是多少，因此您可以在更改 CSS transorm 属性之前检查旋转是否在您定义的范围内：

```
if(degree < 90 && degree > -90) {
    // css transform changes
} 
```

这只会应用在 -90 度和 90 度之间的旋转。

# c# - TextBox.Text Doesn't Right Justify

> ID：10085801
> 
> 赞同：1
> 
> 时间：2012-04-10T09:00:19.533
> 
> 标签：c#, string, textbox, text-justify

According to my understanding, the code below should right-justify the text if the text is longer than the textbox can show, otherwise it keeps it left-justified.

The problem is that it doesn't actually do this and it's acting really odd. Short strings end up right-justified sometimes and long strings are always left-justified.

What am I doing wrong?

```
private void textBoxCurrentConfig_TextChanged(object sender, EventArgs e)
{
    SizeF stringSize = new SizeF();
    stringSize = TextRenderer.MeasureText(textBoxCurrentConfig.Text, textBoxCurrentConfig.Font);

    float currentTextWidth = stringSize.Width;
    float allowedTextWidth = textBoxCurrentConfig.Size.Width - 10;

    if (currentTextWidth >= allowedTextWidth) // if the text we want to display is larger than the textbox can hold, right justify it to show the filename
    {
        textBoxCurrentConfig.TextAlign = HorizontalAlignment.Right; // right justify                
    }
    else // otherwise we can display the entire path
    {
        textBoxCurrentConfig.TextAlign = HorizontalAlignment.Left; // left justify
    }

    textBoxCurrentConfig.Refresh();
    this.Refresh();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T17:53:20.643

从您的评论中，您想根据文本长度移动光标位置。您可以`TextBox.Select()`为此使用方法。[有关详细信息，请查看 MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.select.aspx)。

所以如果你想在文本的开头移动光标，你可以使用

`textBoxCurrentConfig.Select(0, 0);`

如果你想在文本末尾移动光标，你可以使用

`textBoxCurrentConfig.Select(textBoxCurrentConfig.Text.Length, 0);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:03:46.840

Try to remove

```
this.Refresh(); 
```

It's may cause the page to refresh and return the text box to the original align

# r - 从数据框中提取特定列

> ID：10085806
> 
> 赞同：429
> 
> 时间：2012-04-10T02:24:04.437
> 
> 标签：r, dataframe, r-faq

我有一个包含 6 列的 R 数据框，我想创建一个只有三列的新数据框。

假设我的数据框是`df`，并且我想提取列`A`、`B`和`E`，这是我能弄清楚的唯一命令：

```
 data.frame(df$A,df$B,df$E) 
```

有没有更紧凑的方法来做到这一点？

* * *

## 回答 #1

> 赞同：494
> 
> 时间：2012-04-10T02:44:34.523

您可以使用列名向量进行子集化。我非常喜欢这种方法，而不是那些将列名视为对象名（例如`subset()`）的方法，尤其是在函数、包或应用程序中编程时。

```
# data for reproducible example
# (and to avoid confusion from trying to subset `stats::df`)
df <- setNames(data.frame(as.list(1:5)), LETTERS[1:5])
# subset
df[c("A","B","E")] 
```

注意没有逗号（即不是`df[,c("A","B","C")]`）。那是因为`df[,"A"]`返回一个向量，而不是一个数据框。但`df["A"]`总是会返回一个数据框。

```
str(df["A"])
## 'data.frame':    1 obs. of  1 variable:
## $ A: int 1
str(df[,"A"])  # vector
##  int 1 
```

* * *

感谢[David Dorchies](https://stackoverflow.com/questions/10085806/extracting-specific-columns-from-a-data-frame/10085807?noredirect=1#comment64615934_10085807)指出`df[,"A"]`返回向量而不是 data.frame，并感谢[Antoine Fabri](https://stackoverflow.com/users/2270475/moody-mudskipper)为我的原始解决方案（下）提出了更好的替代方案（上）。

```
# subset (original solution--not recommended)
df[,c("A","B","E")]  # returns a data.frame
df[,"A"]             # returns a vector 
```

* * *

## 回答 #2

> 赞同：222
> 
> 时间：2015-04-19T21:19:17.230

使用[dplyr](http://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html)包，如果你的 data.frame 被调用`df1`：

```
library(dplyr)

df1 %>%
  select(A, B, E) 
```

这也可以在没有`%>%`管道的情况下写成：

```
select(df1, A, B, E) 
```

* * *

## 回答 #3

> 赞同：110
> 
> 时间：2012-04-10T09:50:05.020

这是函数的[`subset()`](http://stat.ethz.ch/R-manual/R-devel/library/base/html/subset.html)作用：

```
> dat <- data.frame(A=c(1,2),B=c(3,4),C=c(5,6),D=c(7,7),E=c(8,8),F=c(9,9)) 
> subset(dat, select=c("A", "B"))
  A B
1 1 3
2 2 4 
```

* * *

## 回答 #4

> 赞同：86
> 
> 时间：2012-04-10T06:49:54.050

有两个明显的选择：Joshua Ulrich 的`df[,c("A","B","E")]`或

```
df[,c(1,2,5)] 
```

如在

```
> df <- data.frame(A=c(1,2),B=c(3,4),C=c(5,6),D=c(7,7),E=c(8,8),F=c(9,9)) 
> df
  A B C D E F
1 1 3 5 7 8 9
2 2 4 6 7 8 9
> df[,c(1,2,5)]
  A B E
1 1 3 8
2 2 4 8
> df[,c("A","B","E")]
  A B E
1 1 3 8
2 2 4 8 
```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2017-10-12T18:12:23.843

仅出于某种原因

```
df[, (names(df) %in% c("A","B","E"))] 
```

为我工作。所有上述语法都产生了“未定义的列选择”。

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2016-06-10T11:34:19.543

其中 df1 是您的原始数据框：

```
df2 <- subset(df1, select = c(1, 2, 5)) 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2016-11-30T08:00:22.770

您还可以使用`sqldf`对 R 数据帧执行选择的包：

```
df1 <- sqldf("select A, B, E from df") 
```

这给出了一个带有列的数据框作为输出`df1`：A、B、E。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-05-22T09:49:02.497

您可以使用`with`：

```
with(df, data.frame(A, B, E)) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-10-15T19:54:27.537

```
df<- dplyr::select ( df,A,B,C) 
```

此外，您可以为新创建的数据分配不同的名称

```
data<- dplyr::select ( df,A,B,C) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-11-09T15:32:24.753

`[` 和子集不可替代：

`[`如果只选择一列，则返回一个向量。

```
df = data.frame(a="a",b="b")    

identical(
  df[,c("a")], 
  subset(df,select="a")
) 

identical(
  df[,c("a","b")],  
  subset(df,select=c("a","b"))
) 
```

# .net - 在不同的线程中创建 WPF 窗口时出现异常

> ID：10085811
> 
> 赞同：4
> 
> 时间：2012-04-10T09:00:47.460
> 
> 标签：.net, wpf, multithreading, dispatcher

我有一个 WPF 应用程序，我在不同的线程中运行一些动画，所以我的主 UI 线程将响应。我正在使用[此处](http://eprystupa.wordpress.com/2008/07/28/running-wpf-application-with-multiple-ui-threads/)发布的代码：

```
Thread thread = new Thread(() =>
{
    Window1 w = new Window1();
    w.Show();

    w.Closed += (sender2, e2) => w.Dispatcher.InvokeShutdown();

    System.Windows.Threading.Dispatcher.Run();
});

thread.IsBackground = true;
thread.SetApartmentState(ApartmentState.STA);
thread.Start(); 
```

它通常工作正常，但在系统部署后，我收到了有关应用程序崩溃的投诉，并显示以下堆栈跟踪：

```
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at System.Collections.Generic.List`1.RemoveAt(Int32 index)
   at System.IO.Packaging.PackagePart.CleanUpRequestedStreamsList()
   at System.IO.Packaging.PackagePart.GetStream(FileMode mode, FileAccess access)
   at System.IO.Packaging.PackagePart.GetStream()
   at System.Windows.Application.LoadComponent(Object component, Uri resourceLocator)   
   at Window1.xaml:line 1   
   at Window1..ctor() 
```

有没有人见过这个异常并且可以解释那里发生了什么？这个特定例外的原因可能是什么？
我正在使用 .Net 3.5 SP1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:27:06.110

它看起来[`System.Windows.Application.LoadComponent`](https://msdn.microsoft.com/en-us/library/ms596995)不是线程安全的，因此您对 Window 构造函数的调用可能会导致错误。

您可以尝试在主线程中创建窗口实例并在新线程中显示它，但我不确定这是否适合您的应用程序需求。

# php - URL Rewriting in Apache Not Working For Me

> ID：10085812
> 
> 赞同：-1
> 
> 时间：2012-04-10T09:00:48.443
> 
> 标签：php, apache, url-rewriting

I am using WAMP and has created a website in a 'http://localhost/snap2/html' folder. I am trying to execute following Rewrite rule but this is not working for me.

Server is giving me an error below:

The requested URL /snap2/html/browsed.html was not found on this server.

My .htaccess file is located in html folder and its structure is as below:

`RewriteEngine On

RewriteRule ^decision/([0-9]+)$ /snap2/html/decision.php?PanelID=$1`

Website is in a structure like 'www/snap2/html

Infact I am trying to rewrite following url

[http://localhost/snap2/html/decision.php?PanelID=20](http://localhost/snap2/html/decision.php?PanelID=20)

in to

[http://localhost/snap2/html/decision/20](http://localhost/snap2/html/decision/20)

Also Options +FollowSymLinks gives me an error 500 therefore, I have commented it.

Any help would be pretty much appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:05:46.387

你写`RewriteRule`两次。尝试

```
RewriteRule decision/([0-9]+)$ /snap2/html/decision.php?PanelID=$1 [L, QSA] 
```

或者

```
RewriteRule snap2/html/decision/([0-9]+)$ /snap2/html/decision.php?PanelID=$1 [L, QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:06:03.393

尝试这个：

```
RewriteEngine On

RewriteRule RewriteRule ^snap2/html/decision/([0-9]+)$ /snap2/html/decision.php?PanelID=$1 
```

但我想这不是你想要的。但也许你会看到你错在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T09:06:19.943

正则表达式中的符号`^`表示后面的字符串应该在 URL 的开头。所以你必须包含整个路径，有关更多示例，请参阅[htaccess RewriteEngine](https://stackoverflow.com/questions/7388974/htaccess-rewriteengine)

# eclipse - jboss tools installation error in eclipse

> ID：10085817
> 
> 赞同：0
> 
> 时间：2012-04-10T09:01:22.703
> 
> 标签：eclipse, jboss

I've installed Java 7, Eclipse indigo and downloaded Jboss AS 7.1.1\. Now i would like to install jboss tools using eclipse marketplace, but I'm receiving these dependency conflicts every time...

I'm getting the errors mentioned in the unsuccessful installations tab located here

```
Cannot complete the install because of a conflicting dependency.
  Software being installed: JBoss Central 1.0.0.v20120307-1926-H67-Beta1 (org.jboss.tools.central.feature.feature.group 1.0.0.v20120307-1926-H67-Beta1)
  Software currently installed: Eclipse IDE for Java EE Developers 1.4.0.20110615-0550 (epp.package.jee 1.4.0.20110615-0550)
  Only one of the following can be installed at once: 
    Equinox Java Authentication and Authorization Service (JAAS) 1.0.200.v20100503 (org.eclipse.equinox.security 1.0.200.v20100503)
    Equinox Java Authentication and Authorization Service (JAAS) 1.1.1.R37x_v20110822-1018 (org.eclipse.equinox.security 1.1.1.R37x_v20110822-1018)
    Equinox Java Authentication and Authorization Service (JAAS) 1.1.0.v20110502 (org.eclipse.equinox.security 1.1.0.v20110502)
  Cannot satisfy dependency:
    From: Eclipse IDE for Java EE Developers 1.4.0.20110615-0550 (epp.package.jee 1.4.0.20110615-0550)
    To: org.eclipse.epp.package.jee.feature.feature.group [1.4.0.20110615-0550]
  Cannot satisfy dependency:
    From: Java EE IDE Feature 1.4.0.20110615-0550 (org.eclipse.epp.package.jee.feature.feature.group 1.4.0.20110615-0550)
    To: org.eclipse.platform.feature.group [3.7.0.v20110530-9gF7UHNFFt4cwE-pkZDJ7oz-mj4OSEIlu9SEv0f]
  Cannot satisfy dependency:
    From: Eclipse Platform 3.7.0.v20110530-9gF7UHNFFt4cwE-pkZDJ7oz-mj4OSEIlu9SEv0f (org.eclipse.platform.feature.group 3.7.0.v20110530-9gF7UHNFFt4cwE-pkZDJ7oz-mj4OSEIlu9SEv0f)
    To: org.eclipse.equinox.security [1.1.0.v20110502]
  Cannot satisfy dependency:
    From: JBoss AS Core Plug-in 2.3.0.v20120321-1339-H91-Beta2 (org.jboss.ide.eclipse.as.core 2.3.0.v20120321-1339-H91-Beta2)
    To: bundle org.eclipse.equinox.security 1.1.1
  Cannot satisfy dependency:
    From: JBoss Central 1.0.0.v20120307-1926-H67-Beta1 (org.jboss.tools.central 1.0.0.v20120307-1926-H67-Beta1)
    To: bundle org.jboss.tools.project.examples 0.0.0
  Cannot satisfy dependency:
    From: JBoss Central 1.0.0.v20120307-1926-H67-Beta1 (org.jboss.tools.central.feature.feature.group 1.0.0.v20120307-1926-H67-Beta1)
    To: org.jboss.tools.central [1.0.0.v20120307-1926-H67-Beta1]
  Cannot satisfy dependency:
    From: Project Examples 1.2.1.v20120320-2046-H78-Beta2 (org.jboss.tools.project.examples 1.2.1.v20120320-2046-H78-Beta2)
    To: bundle org.jboss.tools.seam.core 0.0.0
  Cannot satisfy dependency:
    From: Seam Tools 3.3.0.v20120302-2019-H81-Beta1 (org.jboss.tools.seam.core 3.3.0.v20120302-2019-H81-Beta1)
    To: bundle org.jboss.ide.eclipse.as.core 0.0.0 
```

Please help me...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:09:22.587

我也遇到过这个问题。我可以通过首先更新 Eclipse（帮助 --> 检查更新）然后安装 jboss 工具来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:44:12.913

您是否尝试过使用 JDK 6？我在使用 JBoss 7、Indigo 和 JDK 7 时遇到了同样的问题。切换回 JDK 6 并清除所有其他 JDK 实例对我有用。确保您也更新了 indigo（以管理员或 root 身份）。

希望能有所帮助。

# android - ICS 中的 SimpleCursorAdapter

> ID：10085820
> 
> 赞同：2
> 
> 时间：2012-04-10T09:01:42.570
> 
> 标签：android, android-4.0-ice-cream-sandwich, simplecursoradapter, android-loadermanager

我的项目中需要一个 SimpleCursorAdapter。我在 2.3 版本中为此编写了代码。但我无法在 ICS 中添加它。它显示`SimpleCursorAdapter(context, layout, c, from, to)`已弃用，而新的是`SimpleCursorAdapter(context, layout, c, from, to, flags)`.

其中包含一个新参数“flags”。我应该在标志的位置添加什么？这说明什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T09:28:15.313

引用Android参考，flag参数如下：

```
public static final int **FLAG_AUTO_REQUERY** 
```

自：API 级别 11

此常量已弃用。不鼓励使用此选项，因为它会导致在应用程序的 UI 线程上执行游标查询，从而可能导致响应速度不佳甚至应用程序无响应错误。作为替代方案，将 LoaderManager 与 CursorLoader 一起使用。

如果设置，适配器将在传递内容更改通知时调用游标上的 requery()。暗示

```
 FLAG_REGISTER_CONTENT_OBSERVER. Constant Value: 1 (0x00000001) 
```

.

```
public static final int **FLAG_REGISTER_CONTENT_OBSERVER** 
```

自：API 级别 11

如果设置，适配器将在光标上注册一个内容观察者，并在收到通知时调用 onContentChanged()。使用此标志时要小心：您需要从适配器取消设置当前 Cursor 以避免由于其注册的观察者而导致泄漏. 将 CursorAdapter 与 CursorLoader 一起使用时，不需要此标志。常数值：2 (0x00000002)

但是，Honeycomb+ 的新模式是使用 cursorLoader 为您管理光标。在这种情况下，您将 0 作为 flags 参数传递。

[**阅读有关 CursorLoader + CursorAdapter 的更多信息（带有教程）**](http://developer.android.com/guide/topics/fundamentals/loaders.html)

# ruby-on-rails-3 - 如何部署 Rails 3 网站

> ID：10085822
> 
> 赞同：0
> 
> 时间：2012-04-10T09:01:45.820
> 
> 标签：ruby-on-rails-3, deployment

我准备将我的 rails 3 站点部署到服务器。谁是最好的供应商？我需要它易于部署且成本低。有没有人有经验可以分享？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:09:58.280

[http://railsplayground.com/](http://railsplayground.com/)

我在前两个应用程序中做到了，他们提供低成本服务和 24 小时在线支持，他们通过邮件发送所有凭据以访问您的 vps 或您拥有的任何服务。但是，如果您是部署新手，他们可以为您提供应用程序，您只需通过票证将应用程序发送给他们，他们就会这样做。

我现在在 railsplayground 有一个 VPS，我支付大约 35 美元/月，但是我在这台服务器上有 2 个应用程序，我可以拥有更多.. 尽可能多的服务器可以接受它，当它达到限制时，你可以升级它.

[http://www.heroku.com/](http://www.heroku.com/) 更容易使用，但如果你有一个在服务器上上传的应用程序，heroku 不会这样做。他们只存储应用程序。

我现在对 railsplayground 很满意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T09:23:33.913

[http://railsplayground.com](http://railsplayground.com)最便宜，每月收费 5 美元

heroku.com 可免费用于子域托管，即[http://example.heroku.com](http://example.heroku.com)

如果您要进行实时部署，以上两个仅用于测试目的

选择 AmazonEc2 或 rackspace.com/cloud/

问候， SenthilK

# spring - Error setting property values (Spring 3+mybatis 3)

> ID：10085823
> 
> 赞同：0
> 
> 时间：2012-04-10T09:01:49.800
> 
> 标签：spring, mybatis

My Application uses Spring 3 + MyBatis 3\. I'm trying to setup multiple database connection (MySQL and Oracle), and I got this message.

```
Error creating bean with name 'MySQLService' defined in ServletContext resource [/WEB-INF/appContext-database.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'MySQLDao' of bean class [com.ekalife.MyGadget.service.MainService]: Bean property 'MySQLDao' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter? 
```

My setup appContext-database.xml

```
<!-- ========== Setting Database and Connection Pooling ========== -->

<bean id="dataSourceMySQL" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close" 
    p:driverClass="${jdbc.driver}" 
    p:jdbcUrl="${jdbc.url}" 
    p:user="${jdbc.user}" 
    p:password="${jdbc.password}" 
    p:idleConnectionTestPeriod="3600" 
    p:preferredTestQuery="SELECT * FROM HD_USERS" 
    p:acquireRetryAttempts="50" 
    p:autoCommitOnClose="false" /> 

<bean id="dataSourceORA" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close"
    p:driverClass="${jdbc.driverORA}"
    p:jdbcUrl="${jdbc.urlORA}"
    p:user="${jdbc.userORA}"
    p:password="${jdbc.passwordORA}"
    p:idleConnectionTestPeriod="3600"
    p:preferredTestQuery="SELECT SYSDATE FROM DUAL"
    p:acquireRetryAttempts="50"
    p:autoCommitOnClose="false"/>

<!-- transaction manager -->
<bean id="MySQLService" class=" com.ekalife.MyGadget.service.MainService">
    <property name="MySQLDao" ref="MySQLDao"/>
</bean>

<bean id="ORAService" class=" com.ekalife.MyGadget.service.OraService">
    <property name="ORADao" ref="ORADao"/>
</bean>

<!-- MySQL transactional advice -->
<tx:advice id="mySqlTxAdvice" transaction-manager="transactionManagerMySQL">
    <tx:attributes>
        <tx:method name="select" read-only="true" />
        <tx:method name="view" read-only="true" />
        <tx:method name="*" />
    </tx:attributes>
</tx:advice>
<aop:config>
    <aop:pointcut id="mySQLManagerMethods" expression="execution(* com.ekalife.MyGadget.service.MainService.*(..))"/>
    <aop:advisor advice-ref="mySqlTxAdvice" pointcut-ref="mySQLManagerMethods" />
</aop:config>
<bean id="transactionManagerMySQL" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSourceMySQL" />
</bean>

<!-- Oracle transactional advice -->
<tx:advice id="oraTxAdvice" transaction-manager="transactionManagerORA">
    <tx:attributes>
        <tx:method name="select" read-only="true" />
        <tx:method name="view" read-only="true" />
        <tx:method name="*" />
    </tx:attributes>
</tx:advice>
<aop:config>
    <aop:pointcut id="oraManagerMethods" expression="execution(* com.ekalife.MyGadget.service.OraService.*(..))" />
    <aop:advisor advice-ref="oraTxAdvice" pointcut-ref="oraManagerMethods" />
</aop:config>
<bean id="transactionManagerORA" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSourceORA"/>
</bean>

<bean id="MySQLDao" class="org.mybatis.spring.SqlSessionFactoryBean"
    p:dataSource-ref="dataSourceMySQL"
    p:mapperLocations="classpath*:com/ekalife/MyGadget/dao/MySQL/**/*.xml"
    p:typeAliasesPackage="com.ekalife.MyGadget.model" />
<bean id="MySQLDaoSessionTemplate" class="org.mybatis.spring.SqlSessionTemplate">
    <constructor-arg ref="MySQLDao"/>
</bean>

<bean id="ORADao" class="org.mybatis.spring.SqlSessionFactoryBean"
    p:dataSource-ref="dataSourceORA" 
    p:mapperLocations="classpath*:com/ekalife/MyGadget/dao/Ora/**/*.xml"
    p:typeAliasesPackage="com.ekalife.MyGadget.model" />
<bean id="ORADaoSessionTemplate" class="org.mybatis.spring.SqlSessionTemplate">
    <constructor-arg ref="ORADao"/>
</bean>

<bean id="MySQLMapper" class="org.mybatis.spring.mapper.MapperFactoryBean" 
    p:sqlSessionTemplate-ref="MySQLDaoSessionTemplate"
    p:mapperInterface="com.ekalife.MyGadget.dao.MainMapper"
    p:sqlSessionFactory-ref="MySQLDao"/>
<bean id="ORAMapper" class="org.mybatis.spring.mapper.MapperFactoryBean" 
    p:sqlSessionTemplate-ref="ORADaoSessionTemplate"
    p:mapperInterface="com.ekalife.MyGadget.dao.OraMapper"
    p:sqlSessionFactory-ref="ORADao"/> 
```

MySQL Service

```
package com.ekalife.MyGadget.service;

@Transactional
public class MainService {

    private static Logger logger = Logger.getLogger(MainService.class);

    @Autowired
    private MainMapper mainMapper; 
```

Oracle Service

```
@Transactional
public class OraService {

    private static Logger logger = Logger.getLogger(MainService.class);

    @Autowired
    private OraMapper oraMapper; 
```

Thanks in advance :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:26:00.863

您收到错误的主要原因是您的 Mainservice 和 OraService 类没有 getter 和 setter。它甚至会告诉您 Spring 错误“不可写或具有无效的 setter 方法”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:25:03.397

你应该`MySQLDao`在你的`MainService`和它的 setter 和 getter 中声明，因为 Spring 正在寻找它。

另一个错误是变量名应该以小写开头：

```
<bean id="MySQLService" class=" com.ekalife.MyGadget.service.MainService">
    <property name="mySQLDao" ref="MySQLDao"/>
</bean> 
```

另外，我看到一些不一致的地方。你`MainService`有一个属性`mainMapper`，它是自动装配的，而且在你想要 inyect 的应用程序上下文 xml 中`mySQLDao`

最好为所有注射选择相同的策略。例如，我建议你在 xml 配置中 inyect all：

```
<bean id="MySQLService" class=" com.ekalife.MyGadget.service.MainService">
    <property name="mySQLDao" ref="MySQLDao"/>
    <property name="mainMapper" ref="MySQLMapper"/>
</bean> 
```

**已更新**：回答您的问题“如何在 MainService 中声明 MySQLDao”

```
package com.ekalife.MyGadget.service;

// imports...

@Transactional
public class MainService {

    private static Logger logger = Logger.getLogger(MainService.class);

    private MainMapper mainMapper;

    private SqlSessionFactoryBean mySQLDao;

    // your methods

    // setter and getter methods for mySQLDao and mainMapper

} 
```

# jquery - Async data loading with WCF service with UI capabilities

> ID：10085832
> 
> 赞同：0
> 
> 时间：2012-04-10T09:02:26.310
> 
> 标签：jquery, .net, wcf, asynchronous, telerik

I'm working on complex user control(with Telerik components). I'm trying to implement following functionality:

1.  Typing some text in RadTextBox(let say: "Hello.txt").
2.  Clicking on Button "Check".
3.  onClientClick for button "Check" will call WCF method with parameters. Let say that this request/response will take more that 10 seconds, meanwhile I'll see loading image near TextBox AND the most important, I can continue to work on other fields.
4.  When WCF service responses UI will be updated with the result.

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:26:04.047

让 wcf 调用一个委托，以便它在完成后回调客户端，同时让客户端 UI 继续。有关如何执行此操作的说明，[请](https://stackoverflow.com/questions/9723737/wcf-callback-between-two-services/9724156#9724156)参阅我的答案。

# operating-system - Difference between Latency and Jitter in Operating-Systems

> ID：10085835
> 
> 赞同：8
> 
> 时间：2012-04-10T09:02:38.583
> 
> 标签：operating-system

discussing criterias for Operating-Systems every time I hear Interupt-Latency and OS-Jitter. And now I ask myself, what is the Difference between these two.

In my opinion the Interrupt-Latency is the Delay from occurence of an Interupt until the Interupt-Service-Routine (ISR) is entered. On the contrary Jitter is the time the moment of entering the ISR differs over time.

Is this the same you think?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-31T03:35:56.593

你的理解基本正确。

**延迟**= 现实世界中发生的事件与响应事件的代码之间的延迟。

**抖动**=两个或多个事件之间的**延迟差异。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T03:23:30.883

在集群计算领域，尤其是在处理大规模横向扩展解决方案时，存在分布在许多系统（和许多处理器内核）上的工作需要在相当可预测的时间范围内完成的情况。操作系统和所利用的软件堆栈可能会在这些“块”工作的运行时间中引入一些可变性。这种可变性通常被称为“操作系统抖动”。[关联](https://www.ibm.com/developerworks/wikis/display/LinuxP/Practical+experiences+with+OS+Jitter)

正如您所说，中断延迟是中断信号和进入中断处理程序之间的时间。

这两个概念彼此正交。然而，实际上，更多的中断通常意味着更多的操作系统抖动。

# java - 堆分配和合适的硬件

> ID：10085836
> 
> 赞同：1
> 
> 时间：2012-04-10T09:02:42.440
> 
> 标签：java, c#, performance, heap-memory

对于不可避免地在堆上创建大量数据的 C# .net 3.5 应用程序，就硬件而言，我会在内存方面寻找什么？它只是最大的套接字总线宽度吗？还是记忆棒的“带宽”？或者他们运行的实际频率？

我们已经得出结论，我们的应用程序的瓶颈是无法避免的，当扩大规模时，将工作分散到多个线程上，由于许多线程访问 RAM，我们似乎遇到了“冲突”。

实际问题是指锁定项目并且有许多线程试图访问这些项目。没有办法进一步优化线程锁定。由于这与线程有关，我不确定是否还应该调查替代 CPU 选择并仔细查看 QPI 统计信息？我们目前使用的是 Westmere 架构，但时钟速度较慢，为 2GHz。

编辑：有人建议 DMA 可以帮助我们。

我将把它标记为 C# 和 Java，因为我相信答案不会是特定于 C# 的。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:49:19.573

我会在更快的机器上测试应用程序。从它的声音来看，你的内存带宽是瓶颈，所以我会尝试一个 4.5 GHz 的超频 i7 和 32 GB 的 1600 MHz 内存或类似的。你可以花大约 1000 美元买一个。您可能会发现，使用更快的系统，您的瓶颈会移动。

顺便说一句：我怀疑在 C# 中创建对象是可以避免的，尽管它可能无法实现，因为听起来修复这个问题的时间有限。在Java中，我写了一些高性能服务器，每天GCes不到一次，但是你必须客观地编写所有核心代码。同样，您可以编写一个不锁定代码的关键部分的服务，但稍后添加它并不是一件容易的事。

# regex - .htaccess 正则表达式按文件类型重定向

> ID：10085837
> 
> 赞同：2
> 
> 时间：2012-04-10T09:02:45.527
> 
> 标签：regex, url-rewriting

我目前正在 Google App Engine 中开发一个网站作为网站开发平台，但我最终想要构建将网站从动态模板编译为静态 HTML/CSS-only 版本的能力。

就 URL 映射而言，所有站点文件都存在于站点根目录中，但我仍然希望能够将特定文件类型映射到文件夹。

例如：

*   /images - 包含所有图像
*   /scripts - 包含所有 JavaScript 文件
*   /stylesheets - 包含所有样式表

现在，在 GAE 中，我使用以下静态路由路由这些路由：

```
url: /(.*\.(gif|png|jpg))
  static_files: /images/\1

url: /(.*\.css)
  static_files: /stylesheets/\1

url: /(.*\.js)
  static_files: /scripts/\1 
```

如何在站点根目录使用包含正则表达式重写规则的 .htaccess 文件映射这些静态路由？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:02:57.370

你可以使用这个 .htaccess 配置

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]

RewriteRule ^(.*\.(gif|png|jpg))$ /images/$1
RewriteRule ^(.*\.css)$ /stylesheets/$1
RewriteRule ^(.*\.js)$ /scripts/$1 
```

第 2 - 5 行仅当您希望 apache 在文件/链接/目录实际存在时不重写。

# c# - 如何从另一个线程中止单元测试？

> ID：10085838
> 
> 赞同：5
> 
> 时间：2012-04-10T09:02:47.543
> 
> 标签：c#, multithreading, visual-studio-2010, unit-testing

我有基本运行 2 个线程的单元测试示例代码：主测试线程和我正在启动的另一个线程应该在一段时间后使测试执行失败（这基本上是一个超时线程）

代码如下：

```
[TestClass]
public class SomeTestClass
{
    [TestInitialize]
    public void BeforeTest()
    {
        var task = new Task(abortIfTestStilRunsAfterTimeout);
        task.Start();
    }

    [TestMethod]
    public void TestMethod()
    {
        Thread.Sleep(5000);
    }

    private void abortIfTestStilRunsAfterTimeout()
    {
        Assert.Fail("timeout passed!");

    }
} 
```

好吧，我原以为`TestMethod()`测试会失败，但实际发生的是运行该`Assert.Fail`方法的任务线程出现异常，而另一个线程继续运行并且测试通过。

我正在寻找一种使测试方法失败的方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T09:12:37.077

您可以尝试获取对测试线程的引用并调用`Abort()`它。您可以传递一个异常状态对象`Abort()`，您可以使用该对象向其传递失败消息：

```
[TestClass]
public class SomeTestClass
{
    Thread testThread;

    [TestInitialize]
    public void BeforeTest()
    {
        testThread = Thread.CurrentThread;
        var task = new Task(abortIfTestStilRunsAfterTimeout);
        task.Start();
    }

    [TestMethod]
    public void TestMethod()
    {
        try
        {
            Thread.Sleep(5000);
        }
        catch (ThreadAbortException e)
        {
             Assert.Fail((string)e.ExceptionState);
        }
    }

    private void abortIfTestStilRunsAfterTimeout()
    {
        testThread.Abort("timeout passed!");
    }
} 
```

如果您不想修改大约 100 个测试，您可以使用 PostSharp 之类的工具通过`try {} catch {}`在每个测试用例周围插入逻辑来修改您的测试用例。归结起来就是编写一个属性并用它装饰你的测试程序集（它被称为面向方面的编程，而 PostSharp 中的框架被称为老挝）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:09:56.633

这个想法很简单 - 只需在任务/线程中运行主要测试逻辑，并将超时处理代码放入测试方法/测试初始化​​中。某种[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)：

```
// Test class level
ManualResetEvent mre = new ManualResetEvent(false);                                

[TestMethod]     
public void TestMethod()     
{                     
    // start waiting task
    Task task = Task.Factory.StartNew(() =>
        {
            // Test Body HERE!
            // ... 

            // if test passed - set event explicitly
            mre.Set();
        });

    // Timeout handling logic, 
    // !!! I believe you can put it once in the TestInitialize, just check
    // whether Assert.Fail() fails the test when called from TestInitialize
    mre.WaitOne(5000);

    // Check whether ManualResetEvent was set explicitly or was timeouted
    if (!mre.WaitOne(0))
    {
        task.Dispose();
        Assert.Fail("Timeout");
    }                
} 
```

PS：关于`WaitOne(0)`技巧，[MSDN](http://msdn.microsoft.com/en-us/library/cc189907.aspx)：

> 如果毫秒超时为零，则该方法不会阻塞。它测试等待句柄的状态并立即返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-29T09:59:34.093

这篇文章有点旧，但最近我遇到了类似的问题。

我的解决方案不同：

> 使用 NUnit TimeoutAttribute

在此处查看 NUnit 文档：
NUnit 2.5：[https](https://nunit.org/docs/2.5/timeout.html)
: //nunit.org/docs/2.5/timeout.html NUnit 3.0：[https ://github.com/nunit/docs/wiki/Timeout-Attribute](https://github.com/nunit/docs/wiki/Timeout-Attribute)

# java - 结果集 - 光标：rs.next() 花费大量时间

> ID：10085846
> 
> 赞同：14
> 
> 时间：2012-04-10T09:03:13.513
> 
> 标签：java, oracle, jdbc

我有一个从数据库返回的游标在 31ms (毫秒) 内执行。

但是当我使用这个超过 1500 行的游标来获取行时

```
 ResultSet rs = (ResultSet)cstm.getObject(6);

  while(rs.next()){
     system.out.println("...");
  } 
```

只需简单地遍历每一行光标就需要 40 多秒（40000 毫秒）

可以做什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-10T09:13:23.090

实际上，默认情况下 JDBC 使用 10 的提取大小。
因此，如果您不设置更大的值，您将准确调用数据库以获取下一条记录 150 次......，无需解释往返的缺点。

您所要做的就是通过设置`fetchSize`为.. **100**来测试性能，例如：

```
statement.setFetchSize(100); 
```

您可以根据您的环境使用此数字来提高性能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-10T09:07:57.737

**您的游标**中有超过 1500 行，而数据库返回的**rs**只是对该游标的引用。因此，当您调用**rs.next()**时，每次它都会转到数据库 cursr 并获取游标指针指向的当前记录。

所以很明显，每次while循环迭代都需要一些时间去数据库并获取一条记录超过1500次。

# json - 在 GWT 中，如何在其标记器中使用 JSON 序列化/反序列化 Place？

> ID：10085849
> 
> 赞同：0
> 
> 时间：2012-04-10T09:03:37.320
> 
> 标签：json, gwt, tokenize

我想为我在 GWT 中的位置创建一个标准的 Tokenizer。

为此，我想使用 json 格式。像这样的东西：

```
public String getToken(T place) {
  return transformToJSON(place);
}

public T getPlace(String token) {
  return (T)transformJSONToObject(token);
} 
```

我找不到实现 transformToJSON 和 transformJSONToObject 的方法。我尝试使用 GWT 的 JSONParser，但它仅限于 JavascriptObject（并且 Places 不是 JavascriptObject）。

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T16:25:23.633

您真的想将 JSON 放入您的 URL 中吗？！

反正：

```
public String getToken(MyPlace place) {
   JSONObject obj = new JSONObject();
   obj.put("id", new JSONString(place.getId());
   return obj.toString();
}

public MyPlace getPlace(String token) {
   JSONObject obj = JSONParser.parseStrict(token).isObject();
   return new MyPlace(obj.get("id").isString().stringValue());
} 
```

您可以使用 AutoBeans 实现相同的目的；在任何情况下：复制东西进出你的地方。

作为替代方案，您当然可以让您的 Place 由 JSONObject/AutoBean 支持：

```
class MyPlace extends Place {
   public static class Tokenizer implements PlaceTokenizer<MyPlace> {
      public String getToken(MyPlace place) {
         return myPlace.jsonObject.toString();
      }
      public Place getPlace(String token) {
         return new MyPlace(JSONParser.parseStrict(token).isObject());
      }
   }

   private final JSONObject jsonObject;

   public MyPlace() {
      this(new JSONObject());
   }

   public MyPlace(JSONObject jsonObject) {
      this.jsonObject = jsonObject;
   }

   public String getId() { return jsonObject.get("id").isString().stringValue(); }

   public void setId(String id) { jsonObject.put("id", new JSONString(id)); }
} 
```

**注意：**以上所有方法都使用 AutoBeans 效果更好；错误处理是一个带有 JSONObject 的 PITA，它也不能生成非常可读的代码。

如果你有很多地方，某种代码生成器可以在这里提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:08:56.427

这是如何使用 GWT 将任何对象（反）序列化为 JSON 的方法。

1) 使用受保护的构造函数定义扩展 JavaScriptObject 的类

```
public class PlaceData extends JavaScriptObject {

    public PlaceData () {
    } 
```

}

2) 为字段添加原生 getter 和 setter

```
 public final native String getId() /*-{
        return this.id;
    }-*/;

    public final native String getToken() /*-{
        return this.token;
    }-*/; 
```

3）定义某处映射方法，如那些

```
public static getPlace(PlaceData placeData) {
    Place place = new Place();
    place.setToken(placeData.getToken());
    place.setId(placeData.getId());
    return place; }

public static getPlaceData(Place place) {
    PlaceData placeData = new PlaceData();
    placeData.setToken(place.getToken());
    placeData.setId(place.getId());
    return placeData; } 
```

4) 并将字符串转换为 JavaScriptObject 使用本机 eval() 函数。

```
public static native JsArray<PlaceData> jobs(String jsonArray) /*-{
    return eval(json);
}-*/;

public static native PlaceData objects(String jsonPlace) /*-{
    return eval(json);
}-*/; 
```

# php - facebook add friend using ajax call

> ID：10085850
> 
> 赞同：0
> 
> 时间：2012-04-10T09:03:37.803
> 
> 标签：php, javascript, jquery, facebook, facebook-graph-api

How can I add friend from my facebook application using ajax call. I have used the following, but it redirects to another page which contain confirmation box.

```
<a target="_blank" href="http://www.facebook.com/dialog/friends/?id=FRIEND_ID&app_id=APP_ID&redirect_uri=REDIRECT_URL">
    ADD AS FRIEND
</a> 
```

I want to send friend request as we are sending from anyone else profile page (Ajax call).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:16:01.727

可能这会有所帮助

```
<script> 
FB.ui({
    method: 'friends.add',
    id: fbid
}, function(param) {}); 
</script>​​ 
```

# java - Java 邮件异常错误；

> ID：10085856
> 
> 赞同：12
> 
> 时间：2012-04-10T09:03:53.350
> 
> 标签：java, jakarta-mail

我的代码：

```
import java.util.Properties;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;
public class SendMailTLS {
public static void main(String[] args) {
    final String username = "myemailid@gmail.com";
    final String password = "myemailpassword";
    Properties props = new Properties();
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.starttls.enable", "true");
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.port", "587");
    Session session = Session.getInstance(props,
      new javax.mail.Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(username, password);
        }
      });

    try {
        Message message = new MimeMessage(session);
        message.setFrom(new InternetAddress("myemailid@gmail.com"));
        message.setRecipients(Message.RecipientType.TO,
            InternetAddress.parse("myfriedemail@ymail.com"));
        message.setSubject("Testing Subject");
        message.setText("Dear Mail Crawler,"+
 "\n\n No spam to my email,please!"); 
        Transport.send(message);
        System.out.println("Done");
    } catch (MessagingException e) {
        throw new RuntimeException(e);
    }
}
} 
```

我的错误：

> > 线程“主”java.lang.RuntimeException 中的异常：javax.mail.MessagingException：
> > 未知 SMTP 主机：smtp.gmail.com；
> > 嵌套异常是：
> > java.net.UnknownHostException: smtp.gmail.com
> > at Mail.SendMailTLS.main(SendMailTLS.java:56)
> > 原因：javax.mail.MessagingException: Unknown SMTP host: smtp.gmail.com;
> > 嵌套异常是：
> > java.net.UnknownHostException: smtp.gmail.com
> > at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1970)
> > at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java :642)
> > 在 javax.mail.Service.connect(Service.java:317)
> > 在 javax.mail.Service.connect(Service.java:176)
> > 在 javax.mail.Service.connect(Service.java:125)
> > 在 javax.mail.Transport.send0(Transport.java:194)
> > 在 javax.mail.Transport.send(Transport.java:124)
> > 在 Mail.SendMailTLS。 main(SendMailTLS.java:51)
> > 引起：java.net.UnknownHostException: smtp.gmail.com
> > at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:177)
> > at java.net.SocksSocketImpl.connect(SocksSocketImpl.java: 366)
> > 在 java.net.Socket.connect(Socket.java:525)
> > 在 java.net.Socket.connect(Socket.java:475)
> > 在 com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:319 )
> > 在 com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:233)
> > 在 com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1938)
> > ... 还有 7 个
> > Java 结果：1

**我的本地代理为 172.17.0.4:8080** ，用户名为：**user1**，密码为：**user2**
Solutions pls??

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-10T09:51:51.497

试试这个服务器：

`smtp.googlemail.com`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-10T10:15:13.577

如果您在代理下，我认为您不能使用 Java Mail。

来自：[oracle.com](http://www.oracle.com/technetwork/java/faq-135477.html#proxy)

> 问：如何配置 JavaMail 以通过我的代理服务器工作？
> 
> 答：JavaMail 目前不支持通过 Web 代理服务器访问邮件服务器。使用代理服务器的主要原因之一是允许来自公司网络内的 HTTP 请求通过公司防火墙。防火墙通常会阻止大多数对 Internet 的访问，但会允许来自代理服务器的请求通过。此外，公司网络内的邮件服务器将为电子邮件执行类似的功能，通过 SMTP 接受消息并将其转发到 Internet 上的最终目的地，并接受传入的消息并将其发送到适当的内部邮件服务器。

* * *

更新

> 问：如何配置 JavaMail 以通过我的代理服务器工作？[更新！]

> A: 从 JavaMail 1.6.0 开始，JavaMail 支持通过 Web 代理服务器访问邮件服务器。设置代理服务器的“mail.protocol.proxy.host”和“mail.protocol.proxy.port”属性。通过设置“mail.protocol.proxy.user”和“mail.protocol.proxy.password”属性支持代理服务器 BASIC 身份验证。

> 此外，如果您的代理服务器支持 SOCKS V4 或 V5 协议（[http://www.socks.nec.com/aboutsocks.html，RFC1928](http://www.socks.nec.com/aboutsocks.html)）并允许匿名连接，并且您使用的是 JDK 1.5 或更新版本以及 JavaMail 1.4 .5 或更高版本，您可以按照 com.sun.mail.smtp 包的 javadocs 中所述设置“mail.smtp.socks.host”属性，在每个会话、每个协议的基础上配置 SOCKS 代理。“imap”和“pop3”协议存在类似的属性。JDK 支持 SOCKS 服务器的身份验证，方法是设置“java.net.socks.username”和“java.net.socks.password”系统属性（因此适用于所有 SOCKS 连接），如 JDK 网络属性文档中所述.

> 如果您使用旧版本的 JDK 或 JavaMail，您可以告诉 Java 运行时将所有 TCP 套接字连接定向到 SOCKS 服务器。有关 socksProxyHost 和 socksProxyPort 属性的最新文档，请参阅网络属性指南。这些是系统级属性，而不是 JavaMail 会话属性。可以在调用应用程序时从命令行设置它们，例如：java -DsocksProxyHost=myproxy ...。该工具可用于将 SMTP、IMAP 和 POP3 通信从 JavaMail 定向到 SOCKS 代理服务器。请注意，设置这些属性会将所有 TCP 套接字定向到 SOCKS 代理，这可能会对应用程序的其他方面产生负面影响。

> 在使用旧版本的 JavaMail 并且没有这样的 SOCKS 服务器时，如果您想使用 JavaMail 间接访问防火墙外的邮件服务器，您可以使用诸如通过 HTTP 代理服务器连接到隧道 TCP 连接的程序。配置 JavaMail 以使用连接实例作为 SOCKS 服务器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-11T16:29:44.433

发生这种情况是因为 Gmail 安全性...只需允许通过应用程序访问您的 gmail 帐户进入您的帐户： [https](https://www.google.com/settings/security/lesssecureapps) ://www.google.com/settings/security/lesssecureapps 它将工作.. smtp.gmail.com是正确的，无需更改。

也不要忘记检查互联网连接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T09:13:36.533

你可以试试 `props.put("mail.smtp.host", "gmail.com");`没有 smtp.gmail.com

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T15:18:53.400

仅出于开发目的，您可以尝试通过代理打开隧道到 smtp.gmail.com

```
proxytunnel -q -p proxy_host:proxy_port -d smtp.gmail.com:465 -a local_port 
```

并在您的代码中使用

```
props.put("mail.smtp.host", "localhost");
props.put("mail.smtp.port", "local_port"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-29T04:59:51.933

当您将 javamail 升级到 1.6.2 时它工作正常

# .net - How to set credentials on log4net RollingFileAppender to impersonate?

> ID：10085857
> 
> 赞同：0
> 
> 时间：2012-04-10T09:04:12.597
> 
> 标签：.net, wpf, log4net, rollingfileappender

**Case**

Currently I'm in the process of deploying a WPF-application with log4net logging. In development I had no issues with the RollingFileAppender. However when deployed and started in a Citrix environment, the current user obviously has no permissions to write log files in the application directory.

**Questions**

*   Is it somehow possible to provide credentials to log4net and/or the RollingFileAppender itself to log with a service account?
*   If not possible, any ideas for a workaround (except for giving all users permissions on the directory)?

Thanks in advance!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-07T08:42:40.337

两年后，我再次遇到同样的问题，并找到了一个不错的内置解决方案。不再需要自定义附加程序！

此解决方案作为配置属性提供，log4net 调用`securityContext`并适用于每个附加程序。请参见下面的示例。

```
<log4net>
   <appender name="RollingFileAppender" type="log4net.Appender.RollingFileAppender">
       <filter type="log4net.Filter.LevelRangeFilter">
         <levelMin value="INFO" />
      </filter>

      <file type="log4net.Util.PatternString" value="LogFiles\%date{yyyyMMdd}\%property{log4net:HostName}_%env{username}" />
      <datePattern value=".yyyyMMdd'.log'" />
      <appendToFile value="true" />
      <rollingStyle value="Date" />
      <maxSizeRollBackups value="10" />
      <staticLogFileName value="false" />
      <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
      <layout type="log4net.Layout.PatternLayout">
         <conversionPattern value="%date [%3thread] %-5level %logger [%property{NDC}] - %message%newline" />
      </layout>

      <securityContext type="log4net.Util.WindowsSecurityContext">
         <domainName value="**myDomain**"/>
         <userName value="**myUser**" />
         <password value="**mySecretPassword**" />
      </securityContext>
   </appender>

   <appender name="EventLogAppender" type="log4net.Appender.EventLogAppender">
      <filter type="log4net.Filter.LevelRangeFilter">
         <levelMin value="ERROR" />
      </filter>

      <logName value="Application" />
      <applicationName value="**MyAppName**" />
      <Layout type="log4net.Layout.PatternLayout">
         <conversionPattern value="%date [%thread] %-5level %logger{1} - %message%newline" />
      </Layout>

      <securityContext type="log4net.Util.WindowsSecurityContext">
         <domainName value="**myDomain**"/>
         <userName value="**myUser**" />
         <password value="**mySecretPassword**" />
      </securityContext>
   </appender>

   <root>
      <level value="INFO" />
      <appender-ref ref="RollingFileAppender" />
      <appender-ref ref="EventLogAppender" />
   </root>
</log4net> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:23:30.133

我不熟悉 Citrix 环境，但您可以创建自定义附加程序，从 RollingFileAppender 派生：

```
public class CitrixRollingFileAppender : RollingFileAppender
{
    public string Login { get; set; }
    public string Password { get; set; }    

    protected override void Append(LoggingEvent loggingEvent)
    {
        // use Login and Password here, or authenticate only once when appender created
        base.Append(loggingEvent);
    }
} 
```

和配置：

```
<appender name="citrix" type="YourNamespace.CitrixRollingFileAppender, YourAssembly">
  <file value="citrixlog.txt"/>
  <appendToFile value="true"/>
  <rollingStyle value="Size"/>
  <login value="Foo"/>
  <password value="Bar"/>
  <layout type="log4net.Layout.SimpleLayout"/>
</appender> 
```

更新：您可以覆盖此类方法，例如在配置 appender 后`ActivateOptions`或`OnClose`即将关闭时执行一些代码。

# mysql - MySQL phpmyadmin alternatives (mySQL workbench like)

> ID：10085858
> 
> 赞同：2
> 
> 时间：2012-04-10T09:04:13.983
> 
> 标签：mysql

I'm familiar with MS SQL server 2008 and I want to switch to an more open minded/source DBMS; I found out that phpmyadmin is the most widely used tool to manages mySQL databases but I find it very difficult to work with. In SQL server I was used to create tables from the designer (in diagram -> add new table) and only if I needed some extra features I actually modified the table. Can I do the same thing from phpmyadmin? I really hate that every time I create a new table to be asked how many rows it will have and there are plenty of options displayed even if I do not use them. So any alternatives???

P.S. mySQL workbench seems the right tool for me but I think you are not able to create tables from the designer only to edit existing tables. (Correct me if I'm wrong)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:10:14.303

您可以使用设计器界面在 MySQL 工作台中创建表，如果您正在寻找替代品，请尝试[HeidiSQL](http://www.heidisql.com/)或[SQLYOG](http://www.webyog.com/en/)，更多选项[请访问此](http://alternativeto.net/software/mysql-workbench/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T09:11:15.057

您可以使用工作台直观地创建表格。查看这篇文章 [http://net.tutsplus.com/tutorials/databases/visual-database-creation-with-mysql-workbench/](http://net.tutsplus.com/tutorials/databases/visual-database-creation-with-mysql-workbench/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-27T18:07:30.107

我推荐[Chive](http://www.chive-project.com/)作为一个简单的基于 Web 的解决方案

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-27T11:39:17.637

试试 Webdbadmin。

[http://www.webdbadmin.com](http://www.webdbadmin.com)是我向您推荐的。

像桌面应用程序一样工作，但它是基于网络的。

# windows - How do I get the initial configuration of my Azure role?

> ID：10085860
> 
> 赞同：2
> 
> 时间：2012-04-10T09:04:19.250
> 
> 标签：windows, azure, cloud

Suppose I deploy an Azure role supplying a service package and a service configuration. Then I change the configuration one or more times without redeploying the role.

Is it possible to get the initial configuration?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:23:37.200

RoleEnvironment [API](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleenvironment.aspx)仅反映当前值。您可以处理[RoleEnvironment.Changing](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleenvironment.changing.aspx)事件并从那里跟踪配置更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:20:34.183

您可以通过多种方式更改服务配置：

*   使用管理门户

    1.  点击部署（它必须处于就绪状态！）
    2.  单击“配置” - 编辑配置。 ![在此处输入图像描述](../Images/dbcdebc5c18de1a09d331df7aac558ea.png)
*   使用管理 REST API 的[更改部署配置](http://msdn.microsoft.com/en-us/library/windowsazure/ee460809.aspx)方法。

如果您选择第二个选项，您可以创建自己的类或使用，例如[这个 NuGet 包](http://nuget.org/packages/WindowsAzure.ServiceManagement.Library)。

但是我不认为（我不知道一种方法）一旦更改就可以获得初始服务配置。

# jsf - “onchange”不适用于 PrimeFaces 3.2 中的 selectOneMenu

> ID：10085863
> 
> 赞同：2
> 
> 时间：2012-04-10T09:04:50.640
> 
> 标签：jsf, primefaces

我的 selectOneMenu 没有触发 onchange 事件。这是代码：

```
 <p:selectOneMenu id="select_preset" 
                  value="#{JobMgmtBean.presetGroupName}" 
                  valueChangeListener="#{PFJobMgmtBean.PresetGroupChangeEvent}" 
                  onchange="submit();">
    <f:selectItems value="#{JobMgmtBean.presetGroupList}"/>
</p:selectOneMenu> 
```

selectOneMenu 填充得很好，我可以选择不同的值。但我希望在我更改选择后，页面会被刷新，即支持 bean (RequestScoped) 将被重新创建 (onchange="submit();")？但是当 selectOneMenu 中的选择发生变化时，什么也没有发生。

此外，不会调用值更改侦听器 PresetGroupChangeEvent()。

我是不是哪里出错了？

我正在使用 Tomcat 7.0.25 + MyFaces 2.1.6 + PrimeFaces 3.2。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T06:55:21.610

尝试删除

```
onchange="submit();" 
```

并添加

```
<p:ajax update="@this"/> 
```

当您使用 primefaces 时，从您的 p:selectOneMenu

```
<p:selectOneMenu id="select_preset" 
              value="#{JobMgmtBean.presetGroupName}" 
              valueChangeListener="#{PFJobMgmtBean.PresetGroupChangeEvent}">
    <f:selectItems value="#{JobMgmtBean.presetGroupList}"/>
    <p:ajax update="@this"/>
</p:selectOneMenu> 
```

检查您的听众签名（从大“P”开始？）

```
import javax.faces.event.ValueChangeEvent;
public void PresetGroupChangeEvent(ValueChangeEvent event) { } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:18:28.963

为什么不使用 p:ajax 添加更新属性？我认为重新渲染组件比刷新更好的解决方案，您也可以只重新渲染所需的组件。但如果您仍想刷新页面，您也可以使用 javascript：

```
<p:selectOneMenu id="select_preset" value="#{JobMgmtBean.presetGroupName}" onchange="window.location.reload();">
    <f:selectItems value="#{JobMgmtBean.presetGroupList}"/>
</p:selectOneMenu> 
```

并且只是为了更新必要的组件：

```
 <p:selectOneMenu id="select_preset" value="#{JobMgmtBean.presetGroupName}">
    <f:selectItems value="#{JobMgmtBean.presetGroupList}"/>
    <p:ajax event="change" update="@form" />
</p:selectOneMenu> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-05T07:06:55.860

这对我有用

```
<p:selectOneMenu id="select_preset" 
                  value="#{JobMgmtBean.presetGroupName}" 
                  valueChangeListener="#{PFJobMgmtBean.PresetGroupChangeEvent}">
        <f:selectItems value="#{JobMgmtBean.presetGroupList}"/>
        <p:ajax process="select_preset" partialSubmit="true" event="valueChange"  update="yourComponentName"/>
    </p:selectOneMenu> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T21:50:50.323

尝试使用 primefaces 中的 ajax 并仅刷新您想要刷新的内容

# asp.net - ASP.NET 生成 .pdf 文件，Save() 时出现 UnauthorizedAccessException

> ID：10085864
> 
> 赞同：0
> 
> 时间：2012-04-10T09:04:55.570
> 
> 标签：asp.net, pdf, permissions, migradoc

我有一份工作清单，我让用户可以选择以 pdf 文件的形式获取工作描述。我使用 MigraDoc/PDFsharp 生成 pdf 文件。问题是，在我渲染 pdf 文档并希望将其保存在 DevServer 上的某个位置后，我在 PDFsharp PdfDocument.Save() 方法中创建 FileStream 时遇到 UnauthorizedAccessException。我从来没有真正将 Windows 用于比玩游戏更高级的东西，我不确定为什么我会得到这个异常，因为我以管理员用户身份登录，我猜我的 ASP.NET 应用程序正在以管理员权限运行，应该是能够在文件系统的几乎任何地方写入文件。

编码。

```
 GridViewRow jobRow = (GridViewRow)(sender as Control).Parent.Parent;

        Document jobDocument = new Document();
        Section xyz = jobDocument.AddSection();
        xyz.AddParagraph("Wonderfull job");

        PdfDocumentRenderer pdfRenderer = new PdfDocumentRenderer(true);
        pdfRenderer.Document = jobDocument;
        pdfRenderer.RenderDocument();

        string filename = "Job_" + jobRow["3"] + ".pdf"; // Job_[title].pdf
        pdfRenderer.PdfDocument.Save(filename); 
```

最后一行是导致异常的行。有什么建议么？我不是 ASP.NET 开发人员，我被迫在我的学校项目中使用 ASP.NET，所以这可能是一个非常简单的问题，但我真的不知道该做什么以及要搜索什么。谢谢回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:26:42.300

管理员帐号=！IIS 用户。IIS 用户也需要具有写入权限！在大多数机器上，它被称为“IIS_User”或“网络服务”。首先，您可以向每个用户授予写入权限。如果这对你有用，你就知道该怎么做了。首先尝试将绝对路径设置为文件名，可能是“C:\inetpub\wwwroot”之外的目录？希望这可以帮助！

# javascript - jqGrid 获取当前的rowid

> ID：10085866
> 
> 赞同：1
> 
> 时间：2012-04-10T09:05:04.483
> 
> 标签：javascript, jqgrid

我在 cellEdit 模式下有一个 jgGrid。我需要获取当前的 rowid，以进行进一步处理（根据其他值将单元格设置为只读）。我找不到一种方法，我尝试过的事件不会触发。

网格定义：

```
 var curRowId = -1;

    $("#grid").jqGrid({
        datatype: 'json',
        mtype: 'GET',
        colNames: ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's',],
        colModel: [
          { name: 'a', index: 'a', width: 30, formatter: 'checkbox', edittype: 'checkbox', editable: true },
          { name: 'b', index: 'b', width: 30, formatter: 'checkbox', edittype: 'checkbox', editable: true },
          { name: 'c', index: 'c', width: 70, formatter: 'date', editable: true, editrules: { required: true }, editoptions: { dataInit: function (elem) { $(elem).datepicker(); } } },
          { name: 'd', index: 'd', width: 65, editable: true, formatter: 'date', formatoptions: { srcformat: 'H:i:s', newformat: 'ShortTime' }, editrules: { time: true} },
          { name: 'e', index: 'e', width: 80, edittype: 'select', editable: true, formatter: 'select' },
          { name: 'f', index: 'f', width: 100, editable: true },
          { name: 'g', index: 'g', width: 80, editable: true },
          { name: 'h', index: 'h', width: 80, editable: true, editrules: { maxValue: 50} },
          { name: 'i', index: 'i', width: 120, edittype: 'select', editable: true, formatter: 'select' },
          { name: 'j', index: 'j', width: 200, edittype: 'select', editable: true, formatter: 'select' },
          { name: 'k', index: 'k', width: 70, edittype: 'select', editable: true, formatter: 'select' },
          { name: 'l', index: 'l', width: 70, editable: true, editrules: { maxValue: 10} },
          { name: 'm', index: 'm', width: 25, editable: false },
          { name: 'n', index: 'n', width: 70, editable: true, editrules: { integer: true, maxValue: 999999 }, formatter: formatPosition, unformat: unformatPosition },
          { name: 'o', index: 'o', width: 25, editable: true, editrules: { custom: true, custom_func: chkLongitudTecken} },
          { name: 'p', index: 'p', width: 80, editable: true, editrules: { integer: true, maxValue: 999999 }, formatter: formatPosition, unformat: unformatPosition },
          { name: 'q', index: 'q', width: 80, edittype: 'select', editable: true, formatter: 'select' },
          { name: 'r', index: 'r', width: 100, editable: true, editrules: { maxValue: 50} },
          { name: 's', index: 's', width: 65, edittype: 'select', editable: true, formatter: 'select' },
        ],
        cellEdit: true,
        cellsubmit: "clientArray",
        sortname: 'Datum',
        sortorder: 'desc',
        shrinkToFit: false,
        viewrecords: true,
        gridview: true,
        beforeCellEdit: function (id) {
            curRowId = id;
            alert("Here: " + curRowId);
        },
        onSelectRow: function (id) {
            curRowId = id;
            alert("test: " + curRowId);
        },
        height: 400,
        caption: 'My Cap'
    }); 
```

您可以在上面的代码中看到我尝试过的事件。

我需要 id 以便以后可以执行以下操作：

```
$("#grid").setColProp("k", {
    editoptions: { 
        value: data.opPadrag,
        dataEvents: [{ 
            type: 'change',
            fn: function (e) {
                alert(e.currentTarget.value);
                $(e).addClass("not-editable-cell");
            }
        }]
    }
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T09:30:24.207

找到了解决方案：

```
var selr = jQuery('#grid').jqGrid('getGridParam', 'selrow'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:18:51.747

```
jQuery('#grid').jqGrid('getGridParam', 'selrow') 
```

将列数据作为用作“键”的行 ID。如果“key”属性未设置为特定的网格列，则将返回正确的行 ID。

# xml - 由 JSON 和 XML 组成的 Solr 文档？

> ID：10085873
> 
> 赞同：1
> 
> 时间：2012-04-10T09:05:39.063
> 
> 标签：xml, json, solr

我想索引使用 Solr 的 webapp 生成的文件。

每个文档中的一些数据是由客户端以 JSON 格式生成的，而一些是由服务器以 XML 格式生成的。Solr 支持这两种格式，但似乎只支持在更新时覆盖文档，而我需要将文档的两半合并在一起。

使用 Jackson 之类的库在 JSON 和 XML 之间进行转换似乎有太多容易出错的工作。起初我认为这种转换可能会实现有用的验证或模式版本控制，但实际上似乎并非如此。

有没有简单的方法来组合来自前端和后端的数据，而不需要转换？我应该对直接从浏览器向 Solr 发送 JSON 持谨慎态度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:07:15.287

我认为您无法避免以某种方式合并 XML 和 JSON 数据的一些编程工作。因为正如您所说，当您使用相同的文档 ID 提交时，SOLR 会覆盖文档。

最简单的方法是使用[SOLRJ](http://wiki.apache.org/solr/Solrj)并读入（并解析）这两种数据类型，然后只写入一次 SOLR 索引。

# javascript - 检索标签的正则表达式

> ID：10085880
> 
> 赞同：0
> 
> 时间：2012-04-10T09:05:53.827
> 
> 标签：javascript, regex

在我的项目中，我想从我使用 dom 方法的网页中检索标签。

但是标签可以像动态创建一样`document.write(“&lt;a href=”http://somedomain.com”&gt;”);`

这里的标签以字符串的格式给出，所以我尝试使用正则表达式。

我想要一个匹配所有标签和属性的正则表达式，只要该表达式也应该能够提取特定属性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:24:36.873

很难理解你在问什么，而且很不清楚。

首先：如果你有一个选项，永远不要使用正则表达式来解析 HTML。看起来很简单吧？不，你迟早会发现问题。

第二：[大卫所说](http://whathaveyoutried.com/)的。

现在这是一个匹配任何 HTML 标签的正则表达式（没有测试过它或任何东西，所以如果必须先尝试一下）：

```
\<[^>]*\> 
```

请注意，它也会匹配脚本标签（不要让用户在您的页面上写入任何标签，如果必须将一些标签列入白名单，并且如果您不使用库，请准备好遇到麻烦）。

[例如，在RegExr](http://gskinner.com/RegExr/)上尝试这些（但请注意，它使用 ActionScript 正则表达式，有时可能与 Javascript 的正则表达式不同，例如 Javascript 没有前瞻/后瞻。

# jasper-reports - 如何在 iReport 4.5.1 中使用条形图绘制一个月的每日报告？

> ID：10085883
> 
> 赞同：0
> 
> 时间：2012-04-10T09:06:01.733
> 
> 标签：jasper-reports, ireport

我们使用 iReport 工具来创建 jrxml

假设，我们有 db 表，其中包含每天的信息（日期为一列）

假设我们在 4 月 10 日（4 月）生成 4 月的每日报告。

我们确实看到生成了我的条形图（xaxis->day,y-axis->valuedata），但 x 轴范围仅显示从 1 到 10。

但我们希望看到从 1 到 30 的 x 轴范围，并且仅在前 10 天绘制条形图。

上述原因是我们已经为这个 x 轴映射了日期字段（并且我们的数据库只有 10 日之前的数据）。但我不确定如何实现这一点，根据我对这个 ireport 工具的了解

欢迎任何帮助使用 iReport 实现这一目标。

谢谢， Senthil VS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:47:55.153

您需要为此创建一个图表定制器，并将图表定制器类分配给您的 TimeSeries 图表。

这是一个图表定制器的代码来实现你所需要的：

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import net.sf.jasperreports.engine.JRChart;
import net.sf.jasperreports.engine.JRChartCustomizer;
import org.jfree.chart.axis.DateAxis;
import org.jfree.chart.axis.ValueAxis;
import org.jfree.chart.plot.XYPlot;

/**
 *
 * This chart customizer assumes you are using a TimeSeries Chart.
 * The customization force the use of a different range (i.e. from the start to the end of
 * the month).
 * 
 * 
 * @author gtoffoli
 */
public class DateRangeCustomizer implements JRChartCustomizer {

    @Override
    public void customize(org.jfree.chart.JFreeChart jfc, JRChart jrc) {

        XYPlot plot = jfc.getXYPlot();

        ValueAxis axis = plot.getDomainAxis();

        if (axis instanceof DateAxis)
        {
            DateAxis daxis = (DateAxis)axis;

            try {

                // Here you can find your way to set the range... i.e. you may get the current available range and try
                // to guess the current month...

                daxis.setRange( new SimpleDateFormat("yyyy/MM/dd").parse("2012/03/01"),  new SimpleDateFormat("yyyy/MM/dd").parse("2012/03/31"));
                daxis.setAutoRange(false);
            } catch (ParseException ex) {
                // 
            }
        }
    }

} 
```

问候

朱利奥

# c# - c#通过HttpRequest调用工作流服务而不添加服务引用

> ID：10085889
> 
> 赞同：1
> 
> 时间：2012-04-10T09:06:25.527
> 
> 标签：c#, workflow-foundation, workflow-foundation-4, workflowservice

我正在尝试从 ASP .NET 项目调用工作流服务，而不向我的 asp .net 项目添加服务引用。我找到了一个关于如何在不将其添加为服务的情况下调用 Web 服务的示例，并根据我的工作流服务要求对其进行了更改。有可能让它工作吗？

```
 public void Execute()
{
    HttpWebRequest request = CreateWebRequest();
    XmlDocument soapEnvelopeXml = new XmlDocument();
    soapEnvelopeXml.LoadXml(@"<?xml version=""1.0"" encoding=""utf-8""?>
        <soap:Envelope xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"">
        <soap:Body>
            <GetData xmlns=""http://tempuri.org/IService/GetData"">
                <string xmlns=""http://schemas.microsoft.com/2003/10/Serialization/"">test1234</string>
            </GetData>
        </soap:Body>
        </soap:Envelope>");

    using (Stream stream = request.GetRequestStream())
    {
        soapEnvelopeXml.Save(stream);
    }

    using (WebResponse response = request.GetResponse())
    {
        using (StreamReader rd = new StreamReader(response.GetResponseStream()))
        {
            string soapResult = rd.ReadToEnd();
            Console.WriteLine(soapResult);
        }
    }
}

public HttpWebRequest CreateWebRequest()
{
    HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(@"http://localhost:3724/Service1.xamlx");
    webRequest.Headers.Add(@"SOAP:Action");
    webRequest.ContentType = "text/xml;charset=\"utf-8\"";
    webRequest.Accept = "text/xml";
    webRequest.Method = "POST";
    return webRequest;
} 
```

我在 HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(@"http://localhost:3724/Service1.xamlx"); 上收到错误消息。错误：内部服务器错误。关于如何使其工作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:01:47.297

在我不使用 WCF 的日子里，我曾经提取自动生成的 web 服务引用代理（又名 reference.cs）的代码来控制我自己的客户端代理类。结果看起来像以下调用 WS 的 GetRessource 方法的类（抱歉可读性）：

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Web.Services", "2.0.50727.42")]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlInclude(typeof(Ressource))]    
[System.Web.Services.WebServiceBindingAttribute(Name = "WSSoap", Namespace = "http:/tempuri.org/Web/WS/WS.asmx")]
public class RemoteManager : System.Web.Services.Protocols.SoapHttpClientProtocol
{
    public RemoteManager() {
        this.Url = "http://localhost/web/WS/WS.asmx";
        if ((this.IsLocalFileSystemWebService(this.Url) == true))
        {
            this.UseDefaultCredentials = true;
            this.useDefaultCredentialsSetExplicitly = false;
        }
        else
        {
            this.useDefaultCredentialsSetExplicitly = true;
        }
    }

    [System.Web.Services.Protocols.SoapDocumentMethodAttribute("http:/tempuri.org/Web/WS/WS.asmx/" +
        "GetRessource", RequestElementName = "GetRessource", RequestNamespace = "http:/tempuri.org/Web/WS/WS.asmx", ResponseElementName = "GetRessourceResponse", ResponseNamespace = "http:/tempuri.org/Web/WS/WS.asmx", Use = System.Web.Services.Description.SoapBindingUse.Literal, ParameterStyle = System.Web.Services.Protocols.SoapParameterStyle.Wrapped)]
    [return: System.Xml.Serialization.XmlElementAttribute("GetRessourceResult")]
    public Ressource GetRessource(int ressId)
    {
        object[] results = this.Invoke("GetRessource", new object[] {
                    ressId});
        return ((Ressource)(results[0]));
    }

    public new string Url
    {
        get
        {
            return base.Url;
        }
        set
        {
            if ((((this.IsLocalFileSystemWebService(base.Url) == true)
                        && (this.useDefaultCredentialsSetExplicitly == false))
                        && (this.IsLocalFileSystemWebService(value) == false)))
            {
                base.UseDefaultCredentials = false;
            }
            base.Url = value;
        }
    }

    private bool useDefaultCredentialsSetExplicitly;        
    public new bool UseDefaultCredentials
    {
        get
        {
            return base.UseDefaultCredentials;
        }
        set
        {
            base.UseDefaultCredentials = value;
            this.useDefaultCredentialsSetExplicitly = true;
        }
    }               
} 
```

# grails - 生产中的 Grails 2.0 外部化配置，无法访问应用程序 - HTTP 404

> ID：10085892
> 
> 赞同：0
> 
> 时间：2012-04-10T09:06:52.980
> 
> 标签：grails

当我将 Grails 应用程序升级到 Grails 2.0.3 后，无法在生产 Tomcat 中访问该应用程序。

当我在开发中运行应用程序甚至使用“grails prod run-war”时，应用程序可以正常工作。但是当我将此应用程序移至 Tomcat（在 Tomcat 6 和 7 上测试）时，该应用程序无法再访问。它加载正确，但是当我转到[http://localhost:8080/appName](http://localhost:8080/appName)时，我收到 HTTP 404。

日志是空的，因此我无法找出问题所在。当我从 Config.groovy 中删除外部化配置加载时，应用程序工作正常！真的很奇怪。配置.groovy：

```
grails.config.locations = ["file:/home/user/application_homes/app_home/app-config.properties"] 
```

你遇到过同样的问题吗？或者从 Grails 1.3.7 到 Grails 2.0.3 是否有任何可能影响这一点的变化？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T12:46:33.250

也遇到同样的问题。我们实际上有两种方法来指定 grails.configuration.locations，使用 System/Env 变量或 -Dconfig.file= 定义。使用环境变量 load，这会导致一行

```
classpath:the-config-file.properties 
```

如果指定了 -Dconfig.file，它将使用基于文件的评估器：

```
file:/full-path/the-config.file.properties 
```

使用 System/Env 方法时，配置加载正常！一旦我们转向使用“文件”查找，Tomcat 就无法启动。

它似乎在创建 internalConfigurationAnnotationProcessor bean 之后就失败了：

```
2012-04-22 22:35:53,514 (main) DEBUG [org.codehaus.groovy.grails.commons.spring.GrailsWebApplicationContext] - <Bean factory for org.codehaus.groovy.grails.commons.spring.GrailsWebApplicationContext@17bcd4: org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory@752144: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,....<--- (left out the big list of others)
2012-04-22 22:35:53,538 (main) DEBUG [org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory] - <Creating shared instance of singleton bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'>
2012-04-22 22:35:53,538 (main) DEBUG [org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory] - <Creating instance of bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'>
2012-04-22 22:35:53,547 (main) DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - <Returning cached instance of singleton bean 'grailsApplication'>
2012-04-22 22:35:53,547 (main) DEBUG [org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory] - <Eagerly caching bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor' to allow for resolving potential circular references>
2012-04-22 22:35:53,548 (main) DEBUG [org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory] - <Finished creating instance of bean 'org.springframework.context.annotation.internalConfigurationAnnotationProcessor'>
2012-04-22 22:35:53,667 (main) INFO [org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory] - <Destroying singletons in org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory@752144
22/04/2012 10:35:53 PM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart 
```

最奇怪的部分只是从`classpath:<>`定义更改`file:<>`为导致此问题。我已将调试语句放入 grails`Config.groovy`文件中，并且文件的内容可以正常读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:33:35.077

我遇到的问题与您出现的完全相同...

我在日志中什么都没有...

它只是没有启动......失败：

```
0/04/2012 2:17:36 PM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart
20/04/2012 2:17:36 PM org.apache.catalina.core.StandardContext start
SEVERE: Context [/abcd] startup failed due to previous errors 
```

当我们在 grails.config.locations 部分中使用类路径 spring 格式时，似乎可以工作。

我们也刚刚去了 grails 2.0.3，这可能是一个错误吗？

# cocoa - 我的 NSSavePanel 没有保存文件。(OSX 10.5)

> ID：10085897
> 
> 赞同：0
> 
> 时间：2012-04-10T09:07:21.170
> 
> 标签：cocoa

我的 NSSavePanel 没有保存文件。我正在为**OSX 10.5构建一个应用程序**

```
NSSavePanel *createPanel = [[NSSavePanel alloc] init];  
    [createPanel setCanCreateDirectories:YES];
    int result = [createPanel runModal];
    if (result == 1) {
        [lyricsFileField setStringValue:[createPanel filename]];
    } 
```

我手动输入文件名并选择目录，但文件未保存。

谢谢

附言。如何将文件路径传递给面板？（setNameFieldStringValue: 仅适用于 > 10.6。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:15:21.973

您没有保存任何文件，您只需将您的 textField 中的文本更改为您的位置字符串。如果你想保存文件你需要使用这个：

```
[data writeToFile:[createPanel filename] atomically: NO]; 
```

反而：

```
[lyricsFileField setStringValue:[createPanel filename]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:16:31.903

`NSSavePanel`据我所知，不应该保存文件，而是用于选择文件。

在 10.6 之前有一个`directory`和`filename`属性或一些这样的属性。

# xslt - XSLT 2.0 产生错误：“上下文项未定义”

> ID：10085898
> 
> 赞同：6
> 
> 时间：2012-04-10T09:07:22.017
> 
> 标签：xslt, xslt-2.0, saxon, altova

我们使用生成 XSLT 2.0 文件的 Altova Stylevision。我们使用 Saxon 9 for Java 来执行这些 XSLT 文件。这几年来一直运行良好，可惜我们都没有真正了解 XSLT。

现在我们有错误：

```
Error at /xsl:stylesheet/xsl:function[9]
XPDY0002: Axis step child::element(item, xs:anyType) cannot be used here:
  the context item is undefined 
```

第9个功能是：

```
<xsl:function name="sps:GoogleChartDataSourceUnitCount" as="xs:string">
  <xsl:sequence select="concat(string-join(item/string(if ( number($XML/report/calculation-data[@data-source-name = $DataSourceParent]/item/variable[@name=&apos;unit_count&apos;]/@value) &lt; 0 ) then 0 else round-half-to-even(number(variable[@name=&apos;unit_count&apos;]/@value),2)),&apos;,&apos;),&apos;&amp;chxl=0:|&apos;,string-join(item/variable[@name=&apos;month&apos;]/@value,&apos;|&apos;),&apos;|2:||Min&amp;chds=0,&apos;,string(round-half-to-even( max(item/(number(variable[@name=&apos;unit_count&apos;]/@value)))+1 , 0 )),&apos;&amp;chxr=1,0,&apos;,string(round-half-to-even( max(item/(number(variable[@name=&apos;unit_count&apos;]/@value)))+1 , 0 )))"/>
</xsl:function> 
```

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T09:56:32.713

问题是该函数使用路径表达式`item`，例如需要上下文项，因为[规范要求](http://www.w3.org/TR/xslt20/#stylesheet-functions)“在样式表函数的主体中，焦点最初是未定义的；这意味着任何引用上下文项、上下文位置或上下文的尝试size 是不可恢复的动态错误。[XPDY0002]"。因此，该函数需要有一个参数，该参数传入应该应用路径的节点或节点序列，例如

```
<xsl:function name="sps:GoogleChartDataSourceUnitCount" as="xs:string">
  <xsl:param name="nodes"/>
  <xsl:sequence select="concat(string-join($nodes/item/string(...)))"/>
</xsl:function> 
```

然后需要用 eg 调用`sps:GoogleChartDataSourceUnitCount(.)`。

如果样式表是由 Altova 的某个工具生成的，您可能想在[Altova 论坛](http://www.altova.com/forum/default.aspx)中询问这是否是一个已知问题以及是否有可用的修复程序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-10T12:00:28.207

**根据[W3C XSLT 2.0 规范](http://www.w3.org/TR/xslt20/#stylesheet-functions)，an 的初始上下文项`xsl:function`是未定义**的。

这意味着在函数体内对数据（项目）的任何引用只能发生在参数（传递的或全局的）或变量之外。

**问题是提供的代码中的表达式以**：

```
concat(string-join(item ... 
```

这显然违反了上述规则——`item`从上下文项目中引用，这是不允许在`xsl:function`.

**解决方案**：

1.  将预期的上下文项作为参数（推荐）传递给命名`pDoc`，或者让一个全局变量/参数包含预期的上下文项。

2.  例如，在 XPath 表达式的第一个位置步骤中从该参数/变量中引用项目`$pDoc/item`

**常见问题解答**：为什么会有这个限制？

**答**：不允许隐式初始上下文项使得 XSLT 处理器可以执行更广泛的静态分析并更积极地优化代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T20:09:52.583

您可能会在不同的用例中遇到此问题。对我来说，由于我忘记在函数内的参数之前放置美元 ($) 符号，所以处理器认为我正在使用节点标签而不指示上下文，然后给出此错误。我只需要将 $ 放在我的参数之前。希望我的解决方案对其他人有所帮助。

# android - 随机 MalformedJsonException

> ID：10085899
> 
> 赞同：0
> 
> 时间：2012-04-10T09:07:30.597
> 
> 标签：android, string, json, deserialization, gson

我**有时**会遇到 Gson().fromJSON 函数的问题...我的应用程序使用 Gson() 反序列化 JSON 字符串，它几乎一直都能完美运行，但有几次我收到此错误：

```
com.google.gson.JsonSyntaxException: com.google.gson.stream.MalformedJsonException: Expected literal value at line 1 column 7592
at com.google.gson.Gson.fromJson(Gson.java:769)
at com.google.gson.Gson.fromJson(Gson.java:721)
at com.google.gson.Gson.fromJson(Gson.java:670)
at com.google.gson.Gson.fromJson(Gson.java:642)
at my.new.prog.Main$GetData.onPostExecute(Main.java:301)
at my.new.prog.Main$GetData.onPostExecute(Main.java:1)
at android.os.AsyncTask.finish(AsyncTask.java:417)
at android.os.AsyncTask.access$300(AsyncTask.java:127)
at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3691)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
at dalvik.system.NativeStart.main(Native Method)
Caused by: com.google.gson.stream.MalformedJsonException: Expected literal value at line 1 column 7592
at com.google.gson.stream.JsonReader.syntaxError(JsonReader.java:1298)
at com.google.gson.stream.JsonReader.readLiteral(JsonReader.java:1195)
at com.google.gson.stream.JsonReader.nextValue(JsonReader.java:789)
at com.google.gson.stream.JsonReader.objectValue(JsonReader.java:766)
at com.google.gson.stream.JsonReader.peek(JsonReader.java:380)
at com.google.gson.stream.JsonReader.advance(JsonReader.java:426)
at com.google.gson.stream.JsonReader.skipValue(JsonReader.java:637)
at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:174)
at com.google.gson.Gson.fromJson(Gson.java:755)
... 16 more 
```

我认为当连接失败只是一点点并且它检索到损坏的 JSON 字符串时会出现此错误。我重复一遍，这个错误随机出现在 JSON 字符串的不同部分。

在这种情况下，我在这里收到错误：`Expected literal value at line 1 column 7592`
但有时我在这里收到错误：`Expected literal value at line 1 column 140`

你怎么看？可能是我遇到的问题是由损坏的 JSON 字符串引起的吗？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:13:53.123

我认为问题是由连接中断引起的。如果异常显示相同的 json 字符串，这是完全确定的。否则，您有时会生成格式错误的 json 文件的可能性很小。

如果问题是连接中断，请考虑重试，直到您摆脱此异常。如果文件很大，您可能会发现[可恢复下载线程](https://stackoverflow.com/questions/6237079/resume-http-file-download-in-java)很有帮助。但是，如果文件很小，我不建议您这么复杂。

PS：我从来没有遇到过来自 GSON 的这种不一致的行为，所以我认为这不是图书馆本身的问题，如果这是你的想法。

# c++ - 查询 D3DKMDT_VIDEO_OUTPUT_TECHNOLOGY 的 WMI

> ID：10085900
> 
> 赞同：1
> 
> 时间：2012-04-10T09:07:36.620
> 
> 标签：c++, windows, wmi

我关注了这篇 MSDN 文章，该文章显示了从本地计算机[http://msdn.microsoft.com/en-us/library/windows/desktop/aa390423%28v=vs.85%29.aspx检索 WMI 数据的示例](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390423%28v=vs.85%29.aspx)

显示的示例获取操作系统的名称，但在我的情况下，我正在查询“Select * from WmiMonitorConnectionParams”并希望检索 D3DKMDT_VIDEO_OUTPUT_TECHNOLOGY [http://msdn.microsoft.com/en-us/library/windows/hardware/ ff546605%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff546605%28v=vs.85%29.aspx)

在这种情况下我应该如何使用 IWbemClassObject::Get ？VARIANT 变量的哪个成员存储了我想要的结果？

更一般地说，我们应该如何知道每次查询后在 Get 方法中使用哪些标志以及 VARIANT 的哪个成员存储结果？这是在哪里记录的？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T14:28:38.443

是的，您必须使用[`IWbemClassObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa391433%28v=vs.85%29.aspx)接口来检索数据，关于要使用的变体成员，它取决于 WMI 属性的类型，在这种情况下，该[`VideoOutputTechnology`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb980612%28v=vs.85%29.aspx)属性是一个 uint32 值，因此您必须使用该`uintVal`成员。

检查此示例代码

```
#include "stdafx.h"
#define _WIN32_DCOM
#include <iostream>
using namespace std;
#include <comdef.h>
#include <Wbemidl.h>
# pragma comment(lib, "wbemuuid.lib")

// Monitor's basic connection parameters

#pragma argsused
int main(int argc, char* argv[])
{
    BSTR strNetworkResource;
    //To use a WMI remote connection set localconn to false and configure the values of the pszName, pszPwd and the name of the remote machine in strNetworkResource
    strNetworkResource = L"\\\\.\\root\\WMI";

    COAUTHIDENTITY *userAcct =  NULL ;
    COAUTHIDENTITY authIdent;

    // Initialize COM. ------------------------------------------

    HRESULT hres;
    hres =  CoInitializeEx(0, COINIT_MULTITHREADED);
    if (FAILED(hres))
    {
        cout << "Failed to initialize COM library. Error code = 0x" << hex << hres << endl;
        cout << _com_error(hres).ErrorMessage() << endl;
        cout << "press enter to exit" << endl;
        cin.get();      
        return 1;                  // Program has failed.
    }

    // Set general COM security levels --------------------------

        hres =  CoInitializeSecurity(
            NULL,
            -1,                          // COM authentication
            NULL,                        // Authentication services
            NULL,                        // Reserved
            RPC_C_AUTHN_LEVEL_DEFAULT,   // Default authentication
            RPC_C_IMP_LEVEL_IMPERSONATE, // Default Impersonation
            NULL,                        // Authentication info
            EOAC_NONE,                   // Additional capabilities
            NULL                         // Reserved
            );

    if (FAILED(hres))
    {
        cout << "Failed to initialize security. Error code = 0x" << hex << hres << endl;
        cout << _com_error(hres).ErrorMessage() << endl;
        CoUninitialize();
        cout << "press enter to exit" << endl;
        cin.get();      
        return 1;                    // Program has failed.
    }

    // Obtain the initial locator to WMI -------------------------

    IWbemLocator *pLoc = NULL;
    hres = CoCreateInstance(CLSID_WbemLocator, 0, CLSCTX_INPROC_SERVER, IID_IWbemLocator, (LPVOID *) &pLoc);

    if (FAILED(hres))
    {
        cout << "Failed to create IWbemLocator object." << " Err code = 0x" << hex << hres << endl;
        cout << _com_error(hres).ErrorMessage() << endl;
        CoUninitialize();       
        cout << "press enter to exit" << endl;
        cin.get();      
        return 1;                 // Program has failed.
    }

    // Connect to WMI through the IWbemLocator::ConnectServer method

    IWbemServices *pSvc = NULL;

        hres = pLoc->ConnectServer(
             _bstr_t(strNetworkResource),      // Object path of WMI namespace
             NULL,                    // User name. NULL = current user
             NULL,                    // User password. NULL = current
             0,                       // Locale. NULL indicates current
             NULL,                    // Security flags.
             0,                       // Authority (e.g. Kerberos)
             0,                       // Context object
             &pSvc                    // pointer to IWbemServices proxy
             );

    if (FAILED(hres))
    {
        cout << "Could not connect. Error code = 0x" << hex << hres << endl;    
        cout << _com_error(hres).ErrorMessage() << endl;
        pLoc->Release();
        CoUninitialize();
        cout << "press enter to exit" << endl;
        cin.get();          
        return 1;                // Program has failed.
    }

    cout << "Connected to root\\WMI WMI namespace" << endl;

    // Set security levels on the proxy -------------------------
        hres = CoSetProxyBlanket(
           pSvc,                        // Indicates the proxy to set
           RPC_C_AUTHN_WINNT,           // RPC_C_AUTHN_xxx
           RPC_C_AUTHZ_NONE,            // RPC_C_AUTHZ_xxx
           NULL,                        // Server principal name
           RPC_C_AUTHN_LEVEL_CALL,      // RPC_C_AUTHN_LEVEL_xxx
           RPC_C_IMP_LEVEL_IMPERSONATE, // RPC_C_IMP_LEVEL_xxx
           NULL,                        // client identity
           EOAC_NONE                    // proxy capabilities
        );

    if (FAILED(hres))
    {
        cout << "Could not set proxy blanket. Error code = 0x" << hex << hres << endl;
        cout << _com_error(hres).ErrorMessage() << endl;
        pSvc->Release();
        pLoc->Release();
        CoUninitialize();
        cout << "press enter to exit" << endl;
        cin.get();      
        return 1;               // Program has failed.
    }

    // Use the IWbemServices pointer to make requests of WMI ----

    IEnumWbemClassObject* pEnumerator = NULL;
    hres = pSvc->ExecQuery( L"WQL", L"SELECT * FROM WmiMonitorConnectionParams",
    WBEM_FLAG_FORWARD_ONLY | WBEM_FLAG_RETURN_IMMEDIATELY, NULL, &pEnumerator);

    if (FAILED(hres))
    {
        cout << "ExecQuery failed" << " Error code = 0x"    << hex << hres << endl;
        cout << _com_error(hres).ErrorMessage() << endl;
        pSvc->Release();
        pLoc->Release();
        CoUninitialize();
        cout << "press enter to exit" << endl;
        cin.get();      
        return 1;               // Program has failed.
    }

    // Get the data from the WQL sentence
    IWbemClassObject *pclsObj = NULL;
    ULONG uReturn = 0;

    while (pEnumerator)
    {
        HRESULT hr = pEnumerator->Next(WBEM_INFINITE, 1, &pclsObj, &uReturn);

        if(0 == uReturn || FAILED(hr))
          break;

        VARIANT vtProp;

                hr = pclsObj->Get(L"Active", 0, &vtProp, 0, 0);// Boolean
                if (!FAILED(hr))
                {
                  if ((vtProp.vt==VT_NULL) || (vtProp.vt==VT_EMPTY))
                    wcout << "Active : " << ((vtProp.vt==VT_NULL) ? "NULL" : "EMPTY") << endl;
                  else
                    wcout << "Active : " << (vtProp.boolVal ? "True" : "False") << endl;
                }
                VariantClear(&vtProp);

                hr = pclsObj->Get(L"InstanceName", 0, &vtProp, 0, 0);// String
                if (!FAILED(hr))
                {
                  if ((vtProp.vt==VT_NULL) || (vtProp.vt==VT_EMPTY))
                    wcout << "InstanceName : " << ((vtProp.vt==VT_NULL) ? "NULL" : "EMPTY") << endl;
                  else
                    wcout << "InstanceName : " << vtProp.bstrVal << endl;
                }
                VariantClear(&vtProp);

                hr = pclsObj->Get(L"VideoOutputTechnology", 0, &vtProp, 0, 0);// Uint32
                if (!FAILED(hr))
                {
                  if ((vtProp.vt==VT_NULL) || (vtProp.vt==VT_EMPTY))
                    wcout << "VideoOutputTechnology : " << ((vtProp.vt==VT_NULL) ? "NULL" : "EMPTY") << endl;
                  else
                    wcout << "VideoOutputTechnology : " << vtProp.uintVal << endl;
                }
                VariantClear(&vtProp);

        pclsObj->Release();
        pclsObj=NULL;
    }

    // Cleanup

    pSvc->Release();
    pLoc->Release();
    pEnumerator->Release();
    if (pclsObj!=NULL)
     pclsObj->Release();

    CoUninitialize();
    cout << "press enter to exit" << endl;
    cin.get();
    return 0;   // Program successfully completed.
} 
```

您也可以使用像[wmi delphi code creator](http://code.google.com/p/wmi-delphi-code-creator/)这样的工具，它可以帮助您探索 WMI 并生成 C++ 代码来访问 WMI 数据。

# php - 在不运行守护进程的情况下设置 Websocket 服务器

> ID：10085902
> 
> 赞同：1
> 
> 时间：2012-04-10T09:07:37.400
> 
> 标签：php, apache, websocket

这可能看起来像一个简单的问题，但让我大吃一惊：假设我无法运行守护进程，**我将如何设置 websocket 服务器？**

（详情：Apache 2.2.21，PHP 5.3.9，所以最好用 PHP）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:59:41.617

通过不想要守护进程，我假设您要求的是在 Apache/PHP 中运行的东西，而不是作为您必须运行的独立程序/服务器。

请注意，PHP 还没有一个很好的选择，可以同时支持旧的 Hixie WebSocket 协议和新的 HyBi/IETF 协议（大多数其他语言都有支持这两种协议的服务器）。

*   [http://code.google.com/p/phpwebsocket/](http://code.google.com/p/phpwebsocket/)仅支持较旧的 Hixie 协议。这适用于 iOS 设备（iPhone 和 iPad）。

*   [http://code.google.com/p/php-websocket-server/](http://code.google.com/p/php-websocket-server/)仅支持大多数其他浏览器的最新版本支持的较新的 HyBi/IETF 协议。

如果您愿意考虑非 PHP 选项，这些项目可以集成到 Apache 中并支持协议的两个修订版：

*   **Python**：[http ://code.google.com/p/pywebsocket/](http://code.google.com/p/pywebsocket/)

*   **C**：[https ://github.com/disconnect/apache-websocket](https://github.com/disconnect/apache-websocket)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:10:10.740

[http://code.google.com/p/phpwebsocket/](http://code.google.com/p/phpwebsocket/)

服务器需要作为守护进程运行......否则服务器的意义何在？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T09:10:53.377

也许[http://code.google.com/p/phpwebsocket/](http://code.google.com/p/phpwebsocket/)可以帮助你。

从方法：

```
// Server side
log("Handshaking...");
list($resource,$host,$origin) = getheaders($buffer);
$upgrade = "HTTP/1.1 101 Web Socket Protocol Handshake\r\n" .
       "Upgrade: WebSocket\r\n" .
       "Connection: Upgrade\r\n" .
       "WebSocket-Origin: " . $origin . "\r\n" .
       "WebSocket-Location: ws://" . $host . $resource . "\r\n" .
       "\r\n";
$handshake = true;
socket_write($socket,$upgrade.chr(0),strlen($upgrade.chr(0)));

// Client side
var host = "ws://localhost:12345/websocket/server.php";
try{
  socket = new WebSocket(host);
  log('WebSocket - status '+socket.readyState);
  socket.onopen    = function(msg){ log("Welcome - status "+this.readyState); };
  socket.onmessage = function(msg){ log("Received: "+msg.data); };
  socket.onclose   = function(msg){ log("Disconnected - status "+this.readyState);     };
}
catch(ex){ log(ex); } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-11-24T03:47:46.163

您可能会将您的“服务器”作为长期轮询的 apache 请求运行。您可以使用普通的网络浏览器来启动/控制它，但您也可以使用 telnet 或 curl。与适当的 systemd 服务相比，这将是 hacky，但它会起作用

# smarty - 使用 Smarty {strip} 这对性能有何影响？

> ID：10085903
> 
> 赞同：1
> 
> 时间：2012-04-10T09:07:50.987
> 
> 标签：smarty, smarty3

我一直想知道为 Smarty 使用 {strip} 修饰符的优缺点。

服务器从模板中去除空白空间所花费的额外时间是否会超过使用较小文件减少的加载时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:27:59.107

[`{strip}`](http://www.smarty.net/docs/en/language.function.strip.tpl)是编译时的事情。它删除了所有多余的空格，包括换行符。但它在将模板编译为 php.ini 时会这样做。所以这只是一次完成。使用或不使用 {strip} 的渲染时间相同。

如果您想删除所有多余的空白，您可能正在寻找[trimwhitespace output-filter](http://code.google.com/p/smarty-php/source/browse/trunk/distribution/libs/plugins/outputfilter.trimwhitespace.php)。

# javascript - 如何编辑下面的 jQuery 以将悬停徽标更改返回到原始状态？

> ID：10085905
> 
> 赞同：1
> 
> 时间：2012-04-10T09:07:57.853
> 
> 标签：javascript, jquery

第一次在这里发帖。我的代码如下。我在这里拥有的基本上是一个导航菜单 (#nav) 和一个徽标 (#logo)。当悬停在#nav 元素上时，当悬停在不同的导航项上时，我使用了 data-href 和图像链接来交换 #logo 图像。例如，将鼠标悬停在“蓝色”上，徽标会转到蓝色图像。但是，在悬停时，下面的代码只会停留在最后一个查看的图像上。悬停时有没有办法将其恢复到原始状态？

HTML：

```
<ul id="nav">
    <li data-href="<?php bloginfo('template_url'); ?>/images/logo-marketing.png" class="nav1"><a href="<?php bloginfo('url'); ?>/marketing">Marketing</a></li>
    <li data-href="<?php bloginfo('template_url'); ?>/images/logo-consultancy.png" class="nav2"><a href="<?php bloginfo('url'); ?>/consultancy">Consultancy</a></li>
    <li data-href="<?php bloginfo('template_url'); ?>/images/logo-project-management.png" class="nav3"><a href="<?php bloginfo('url'); ?>/project-management">Project Management</a></li>
    <li data-href="<?php bloginfo('template_url'); ?>/images/logo-production-engineering.png" class="nav4"><a href="<?php bloginfo('url'); ?>/production-engineering">Production & Engineering</a></li>
    <li data-href="<?php bloginfo('template_url'); ?>/images/logo-innovation.png" class="nav5"><a href="<?php bloginfo('url'); ?>/innovation">Innovation</a></li>
</ul> 
```

Javascript：

```
$(window).load(function(){
var nav = $('#nav')[0];
var output = $('#logo')[0];

$(nav).on('hover', 'li', function() {
    $(this).stop().addClass('selected').siblings().removeClass('selected');
    var url = $(this).stop().data('href');
    $(logo).html('<img src="' + url + '">');
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:16:34.027

我假设`#logo`是一个`div`？如果是这样，请使用`data`属性将其设置为默认图像 url，然后在 mouseout 时恢复为该属性：

```
<div id="logo" data-defaultimg="myimg.jpg"><img /></div> 
```

```
$(function(){
    var $nav = $('#nav');
    var $logo = $('#logo');

    $nav.on('hover', 'li', function(e) {
        if (e.type == 'mouseover') {
            var url = $(this).addClass("selected").siblings().removeClass("selected").data("href");
            $logo.html('<img src="' + url + '">');
        }
        else {
            $(this).siblings().removeClass("selected"); 
            $logo.html('<img src="' + $logo.data("defaultimg") + '">');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:15:44.343

如果我正确理解您所追求的，则不需要 jquery。

```
<ul id="logo_list">
  <li class="logo_item">
     <div class="logo_default"> put stuff as if item is not hovered </div>
     <div class="logo_hovered"> put stuff as if item is hovered </div>
  </li>
</ul>

.logo_hovered
{
   display:none;
}

.logo_item:hover .logo_default
{
  display:none;
}

.logo_item:hover .logo_hovered
{
  display: block;
} 
```

# javascript - 将参数传递给 setInterval 会导致奇怪的行为

> ID：10085907
> 
> 赞同：1
> 
> 时间：2012-04-10T09:07:59.787
> 
> 标签：javascript, node.js, setinterval

我正在制作一个简单的脚本来读取 node.js 中的 nginx 服务器状态我不认为我的问题与 node.js 本身有关，但更多的是我如何使用 setInterval() 函数的问题。

我不想粘贴所有代码，因为这会使阅读有点混乱。当您运行此代码时，您会看到：

```
pre-Timer for web25
pre-Timer for web26
pre-Timer for web27
pre-Timer for web28
pre-Timer for web29
Timer for web29
Fetch host? web29
Timer for web29
Fetch host? web29
Timer for web29
Fetch host? web29
Timer for web29
Fetch host? web29
Timer for web29
Fetch host? web29 
```

如您所见，计时器仅使用循环的最后一个主机。不知何故，它没有将变量复制到 setInterval 范围。

我究竟做错了什么？

**部分代码：**

```
var http = require('http');

StatsNginxMapper.prototype = {

nginxServers: new Object(),
mysql: null,
mysqlClient: null,
statsDb: 'serverstats',
userMapper: null,

init: function() {
    this.mysql = require('mysql');
    this.mysqlClient = /* mysql stuff */;

    this.collectData();
},

setUserMapper: function(mapper) {
    this.userMapper = mapper;
},

collectData: function() {
    this.collectServers();
},

collectServers: function() {

    var self = this;
    var server = null;

    /* Normally this is done through MySQL, but for now lets do it manually */

    server = new StatsNginxServer();
    server.setHost('web25');
    this.nginxServers['web25'] = server;

    server = new StatsNginxServer();
    server.setHost('web26');
    this.nginxServers['web26'] = server;

    server = new StatsNginxServer();
    server.setHost('web27');
    this.nginxServers['web27'] = server;

    server = new StatsNginxServer();
    server.setHost('web28');
    this.nginxServers['web28'] = server;

    server = new StatsNginxServer();
    server.setHost('web29');
    this.nginxServers['web29'] = server;

    this.loopServers();

},

loopServers: function() {

    for(var host in this.nginxServers) {
        var nginxServer = this.nginxServers[host];

        if(nginxServer.hasTimer()) continue;

        var self = this;
        console.log('pre-Timer for ' + host);

        var timerId = setInterval(function() {

            console.log('Timer for ' + host);

            self.getData(host);

            }, 2000);

        nginxServer.setTimer(timerId);

    }

},

getData: function(host) {
    console.log('Fetch host? ' + host);
}, 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:19:43.863

将 loopServers 函数更改为：

```
loopServers: function() {

    for(var host in this.nginxServers) {            
        var nginxServer = this.nginxServers[host];

        if(nginxServer.hasTimer()) continue;

        var self = this;
        console.log('pre-Timer for ' + host);
        (function(host, nginxServer, self) {
            var timerId = setInterval(function() {    
                console.log('Timer for ' + host);   
                self.getData(host);   
            }, 2000);

            nginxServer.setTimer(timerId);
        })(host, nginxServer, self);
    };
} 
```

这将围绕 setInterval 代码创建一个闭包，该闭包将保留该点的变量值。

[有关关闭的信息](http://bonsaiden.github.com/JavaScript-Garden/#function.closures)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:28:52.227

问题是在间隔上运行的函数在调用时使用范围内的变量执行。这意味着，对每个间隔调用“可见”的主机是循环中的最后一个（在您的情况下为 web29）。

解决方案是确保运行的函数始终在范围内具有正确的函数。一种方法是：

```
var timerId = setInterval(function(host) {
    return function() {
        console.log('Timer for ' + host);
        self.getData(host);
    }
}(host), 2000); 
```

在这里，我们创建一个新函数，它返回您希望运行的函数。我们在创建时立即运行该函数，并传递当时的“主机”值。这样，执行日志记录的函数将始终拥有创建时范围内的主机。

我试图简化语言以使其更清晰，但我不确定我是否成功了。如果您阅读了我写的内容，希望它应该看得清楚。

# hadoop - 在 Hadoop（单节点集群）上运行排序示例？

> ID：10085911
> 
> 赞同：1
> 
> 时间：2012-04-10T09:08:16.697
> 
> 标签：hadoop

我已经在 mac os 上安装了 Hadoop 单节点集群 1.0.1，并使用我在此站点上找到的教程材料运行了一个示例：

[http://blogs.msdn.com/b/brandonwerner/archive/2011/11/13/how-to-set-up-hadoop-on-os-x-lion-10-7.aspx](http://blogs.msdn.com/b/brandonwerner/archive/2011/11/13/how-to-set-up-hadoop-on-os-x-lion-10-7.aspx)

现在我正在尝试在 Hadoop 上运行排序示例。它需要顺序文件作为输入。谁能帮我运行排序示例？（或者给我一些关于如何生成顺序文件作为输入的更多信息）。

先感谢您.. ;-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:14:46.137

我假设您正在谈论 TeraSort 示例，在这种情况下，本文将提供分步说明：

*   [http://www.michael-noll.com/blog/2011/04/09/benchmarking-and-stress-testing-an-hadoop-cluster-with-terasort-testdfsio-nnbench-mrbench/#terasort-benchmark-suite](http://www.michael-noll.com/blog/2011/04/09/benchmarking-and-stress-testing-an-hadoop-cluster-with-terasort-testdfsio-nnbench-mrbench/#terasort-benchmark-suite)

# javascript - JavaScript / SVG

> ID：10085916
> 
> 赞同：0
> 
> 时间：2012-04-10T09:08:52.920
> 
> 标签：javascript, dom, svg

我想在 javascript 中获取 4 个按钮，以便在单击它们时更改 svg 中正方形的颜色

到目前为止，我有以下代码

```
<html>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN"
"http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg width="100%"height="100%"version="1.1"
<svg xmlns="http://www.adobe.com/svg">
  <script type="text/ecmascript">
    <![CDATA[

function chooseColor1() {

document.getElementsById("mySqaure")[0].style.color = "green";

        }

        function chooseColor2() {

            document.getElementsById("mySqaure")[0].style.color = "pink";

        }

        function chooseColor3() {

            document.getElementsById("mySqaure")[0].style.color = "purple";

        }

        function chooseColor4() {

            document.getElementsById("mySqaure")[0].style.color = "blue";

        }

    ]]>
 </script>
 `<g
    id="firstGroup">
    <rect id = "mySquare" x="0" y="0" width="20" height="20"  fill="grey" stroke="black" stroke-width="2" />

  </g>

    <form onsubmit="return false">
       <input type="button" value="green" onclick="chooseColor1()"/>
        <input type="button" value="pink" onclick="chooseColor2()"/>
         <input type="button" value="purple" onclick="chooseColor3()"/>
          <input type="button" value="blue" onclick="chooseColor4()"/>
    </form>
</svg>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:28:29.207

您的按钮功能不起作用的原因可能是拼写错误。在您的函数中，您指的是一个 id 为“mySqaure”的元素，但您的元素的 id 实际上是“mySquare”。

我不确定为什么按钮没有出现，因为标签看起来格式正确，但是你确实在 g 标签之前有一个“`”字符（不确定当你将代码复制到这个页）。

编辑：您的第一个 SVG 标记未正确关闭（末尾没有 />）。

# html - 如何使用菜单和 iPhone 在 ie7 上解决此问题？

> ID：10085917
> 
> 赞同：0
> 
> 时间：2012-04-10T09:08:55.820
> 
> 标签：html, css

所以基本上，请看看我的网站。如果你有iphone你也可以看看它，试着向左或向右移动，你会看到菜单也会移动，但它不会再回来了。

这是第一个问题。

第二个问题是 ie7 上的菜单是右对齐的。可能是什么问题呢？

此外，在 iPhone 上，当您查看页面时，整个内容是左对齐的，而不是居中 - 如何解决这个问题？

该网站是[http://patiss-themes.com/test-site](http://patiss-themes.com/test-site)。

另外，我需要菜单是“位置：固定；” ，所以当我向下滚动页面时它也会下降

如果oyu可以，请帮助我，因为我真的很感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:42:59.213

我不知道 I-phone 但你可以让它在 IE-7 上正常工作。

有两种方法可以在 IE-7 中实现这一点，`#border-wrapper{ float:left;}`从而导致 IE7 中的导航部分出现问题。

删除它，如果你要删除它，还会出现其他一些布局问题。

所以你必须再次解决一堆问题

第二种方法是：在您的顶级菜单包装器中`margin-left`应用`*`

```
 #top-menu-wrapper
     {
          *margin-left:-960px /*For IE-7 only*/
     } 
```

# uiimagepickercontroller - UIImagePickerController 与保存的视频文件

> ID：10085920
> 
> 赞同：1
> 
> 时间：2012-04-10T09:09:23.103
> 
> 标签：uiimagepickercontroller

我的应用程序需要带有 Svaed 视频和照片的 UIImagePickerController。我可以通过以下代码显示相机库等待照片

选择器.sourceType = UIImagePickerControllerSourceType;

但视频不存在？？

它已解决......使用以下代码 picker.mediaTypes = [NSArray arrayWithObjects: (NSString *) kUTTypeImage,(NSString *) kUTTypeMovie, nil];

# c# - 带有批准链接的电子邮件

> ID：10085925
> 
> 赞同：1
> 
> 时间：2012-04-10T09:09:43.157
> 
> 标签：c#, asp.net, email

我有一个供应商，他登录到该站点并填写表格并在提交时向管理员发送一封电子邮件，但这仅在管理员（收到此电子邮件的人）允许时才添加到“已批准”列表中. 我想知道如何在电子邮件中发送一个链接，当这个人点击链接时，它会为这个特定的供应商批准这个表格......目前我有这个：

```
MailingManager.SendEmail(toAddresses, fromAddress, "Approval", "<a href=http://localhost:53048/Website/Site/PurchasersSuppliers/CreateSuppliers.aspx?SectionID=537  </a>; 
This is an email to ask for confirmation, null, templateID); 
```

所以我知道你可以将 HTML 添加到邮件的正文中……但是我如何获得它，以便当单击正文中的链接时，我可以通过某种方式向数据库指示该特定记录是否是批准与否？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:24:10.087

你可以传递html代码如下

```
MailingManager.SendEmail(toAddresses, fromAddress, "Approval", "<a href='http://localhost:53048/Website/Site/PurchasersSuppliers/CreateSuppliers.aspx?SectionID=537&UserID=12&SupplierID=2'>This is an email to ask for confirmation  </a>", null, templateID); 
```

当您在邮件中发送链接，然后从供应商打开的电子邮件链接中，它会重定向到您的应用程序页面 CreateSuppliers.aspx。

现在在 CreateSuppliers.aspx 页面上，您可以处理页面加载本身的事件。您可以在查询字符串中传递更多参数来完成您的任务。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        DoSomething(Request["SectionID"]);
    }
}

private void DoSomething(string SectionID)
{ 
    // make database call against SectionID and fetch whether its approved or not.
} 
```

希望这会帮助你....

# c# - 显示没有 WebBrowser 的混合 HTML 内容？（ScrollViewer 的问题）

> ID：10085927
> 
> 赞同：6
> 
> 时间：2012-04-10T09:09:48.773
> 
> 标签：c#, windows-phone-7, xaml

我想在我的 WP7 应用程序中显示一些 HTML 内容。我使用 WebBrowser，它运行良好。但是，我的 WebBrowser 在 ScrollViewer 内，因为我在同一页面中有一些不是 HTML 的内容。所以，我让我的 WebBrowser 不可滚动且高度固定。但是控件不能高于 2048px 并且我有一些内容不止于此。因此，它不会显示整个页面并且文本被剪切。这是代码：

```
<ScrollViewer>
<StackPanel Orientation="Vertical">
    <Image Height="240" HorizontalAlignment="Center" Stretch="{Binding ImageStretch}" Width="Auto" Source="{Binding Image}" />
    <TextBlock Text="{Binding Credit}" TextTrimming="WordEllipsis" />
    <TextBlock Text="{Binding Description}" TextWrapping="Wrap" IsHitTestVisible="False" />         
    <phone:WebBrowser Width="Auto" IsScriptEnabled="True" ScriptNotify="WebBrowserScriptNotify" IsHitTestVisible="False" />
</StackPanel> 
```

这是问题的屏幕截图： ![浏览器问题](../Images/189ccf87134625ad6c246777127387d4.png)

那么，是否有任何替代 WebBrowser 控件的方法，或者是否有解决方法？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T09:13:17.433

据我所知，没有其他选择，但是，这个类似问题的解决方案包括一个将 HTML 转换为 TextBlocks 的简单算法：

[适用于 Windows Phone 7 的 HTMLTextBlock](https://stackoverflow.com/questions/4505642/htmltextblock-for-windows-phone-7)

# php - 如何覆盖wordpress中wp-includes的query.php文件的page_limit？

> ID：10085929
> 
> 赞同：0
> 
> 时间：2012-04-10T09:09:55.510
> 
> 标签：php, wordpress

我是php新手。

我想从小部件中覆盖 query.php 文件的 page_limit。如果未定义要显示的帖子数量，我想显示所有帖子。我正在使用以下代码。

```
 add_filter('post_limits', 'amr_remove_limits');
    function amr_remove_limits () {
        return ('');   
        // return an empty string so that NO limits are imposed in the query
    } 
```

它不起作用..任何建议或参考都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:06:59.117

你试过[这个](http://codex.wordpress.org/Plugin_API/Filter_Reference/post_limits)我假设。
您的函数没有任何参数。

```
function amr_remove_limits ($limit) {
    return '';
} 
```

试试上面的，没关系，你不使用参数

# android - 需要更好的解决方案来解决应用程序开发问题

> ID：10085934
> 
> 赞同：0
> 
> 时间：2012-04-10T09:10:01.903
> 
> 标签：android, performance, android-intent

我正在开发一个应用程序来查看存储的 pdf 文件，如下所示。

管理员可以将文档保存为 pdf 并存储在服务器中。在另一端移动用户可以将 pdf 下载到 sd 卡并可以读取文件。这些部分已经开发。

我的问题是，当移动用户阅读文档时，管理员编辑了相同的 pdf 并将其替换（存储在服务器中）。但移动用户仍在阅读下载的旧版本文件。我该如何解决这个问题。我需要专家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:17:08.327

[`Android-Service`](http://developer.android.com/reference/android/app/Service.html)如果服务器有新的或编辑的 pdf 文件可用，则对您的问题的唯一答案是运行以​​继续检查服务器上的更新，然后通知用户下载该文件。

**编辑：**根据**Renard**的说法 ，还有其他选项称为[Android-C2DM](http://code.google.com/android/c2dm/)，因为我从未使用过它，这就是我不建议你的原因。

随便看看。。

# asp.net - 如何更改 ButtonClick 上动态创建的下拉列表的选定项目

> ID：10085937
> 
> 赞同：0
> 
> 时间：2012-04-10T09:10:05.760
> 
> 标签：asp.net, vb.net, drop-down-menu, postback

我必须在我的页面上隐藏可以使用 JavaScript 触发的按钮（__dopostback...）。我的页面上还有一个对象列表和一个下拉列表，让用户可以对页面上的这些对象进行排序。

我的代码检查列表的 Databind 上下拉列表的当前值，并将选择的排序方法应用于列表。

当用户从列表中选择了另一种排序方法时，将触发第一个按钮。

当用户向列表中添加新项目时，会触发第二个按钮。如果发生这种情况，应该在下拉列表中自动设置排序方法“sort2”。

因此，当单击第二个按钮时，我需要动态设置下拉列表的选定项，以便稍后在下拉列表的 DataBind 方法中检查选定值的值，并知道应该应用哪种排序方法。

我希望它有点清楚，所以你可以在这里帮助我。我没有成功动态地更改所选值。

我正在使用控件：第一个是objects.vb，第二个是ObjectContainer.vb Objects.vb 包含两个按钮，下拉列表和objectcontainer 的实例。objectcontainer 包含需要根据在对象控件中选择的值排序的对象的列表。

对象.vb：

```
Private sortMethod As DropdownList
Private container as ObjectContainer

Protected Overrides Sub OnInit(ByVal e As System.EventArgs)
                MyBase.OnInit(e)
                EnsureChildControls()  
 End Sub

Protected Overrides Sub CreateChildControls()
        MyBase.CreateChildControls()

        ' Add sorting
        sortMethod = New DropDownList()
        sortMethod.ID = "sortlist"

        CType(sortMethod.Items, IStateManager).TrackViewState()

        If Not Page.IsPostBack Then
            Dim sort1 As New ListItem()
            sort1.Text = "Sort Method 1"
            sort1.Value = "sort1"
            Dim sort2 As New ListItem()
            sort2.Text = "Sort Method 2"
            sort2.Value = "sort2"
            Dim sort3 As New ListItem()
            sort3.Text = "Sort Method 3"
            sort3.Value = "sort3"       

            sortMethod.Items.Add(sort1)
            sortMethod.Items.Add(sort2)
            sortMethod.Items.Add(sort3)

            sortMethod.AutoPostBack = False
            sortMethod.EnableViewState = True

            sortMethod.Attributes.Add("onchange", "javascript:TriggerPostbackButtonUpdate()")
        End If

        Me.Controls.Add(sortMethod)

container = New ObjectContainer
            container.ID = "oc"

            Me.Controls.Add(container)

    End Sub

        Protected Sub ButtonUpdate_Click(ByVal sender As Object, ByVal e As System.EventArgs)
            container.SortMethodAndOrder = sortMethod.SelectedValue
            container.DataBind()
        End Sub

            'when this event is triggered, the "sort2" item should be selected after the postback
        Protected Sub Button2_Click(ByVal sender As Object, ByVal e As System.EventArgs)                
            sortMethod.SelectedIndex = sortMethod.Items.IndexOf(sortMethod.Items.FindByValue("sort2"))    
            container.SortMethodAndOrder = "sort2"
            container.DataBind()
        End Sub 
```

对象容器.vb：

```
Public Overloads Overrides Sub DataBind()

        EnsureChildControls()

        Dim objects As ObjectsCollection = Nothing

        If objects.Count <> 0 Then

            Dim sortList As DropDownList = DirectCast(Me.Parent.FindControl("sortlist"), DropDownList)
            If sortList IsNot Nothing Then

               'sort based on the selected value in the dropdownlist

            End If

        End If
  End Sub 
```

我可以提供您需要的任何信息来帮助我。我非常感谢您抽出宝贵的时间，非常感谢您花时间阅读本文！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:33:29.500

我看不出有理由在您的代码中手动调用 TrackViewState。有特定的理由来调用它吗？否则，我会删除它。

不知道这是否有任何帮助，但我倾向于使用以下两行（作为 C# 用户，但我想它没有任何区别）：

```
sortMethod.ClearSelection()
sortMethod.Items.FindByValue("sort2").Selected = true 
```

代替 ：

```
sortMethod.SelectedIndex = sortMethod.Items.IndexOf(sortMethod.Items.FindByValue("sort2")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:55:07.040

这是 id 在触发回发之前使用 jquery 设置下拉列表的选定值的方法。

```
 $(".myDropDownList").val("sort2");
 __doPostBack(uniqueIdOfMyButton,''); 
```

# android - 这个闹钟怎么不响？

> ID：10085942
> 
> 赞同：0
> 
> 时间：2012-04-10T09:10:34.040
> 
> 标签：android, alarmmanager, android-alarms

我正在尝试为特定日期和时间设置警报，但到目前为止我一直没有成功。作为一个实验，我试图将它设置为今天上午 10:04，如下所示：

```
Calendar cal = Calendar.getInstance();
        // int currtYear = cal.get( Calendar.YEAR );
        // int minute = cnvrtStrg( splitTime[1] ) - 5;
        // int hour = cnvrtStrg( splitTime[0] );

        cal.setTimeInMillis( System.currentTimeMillis() );
        cal.clear();
        cal.set( 2012, 4, 10, 10, 4 );

        Intent intent = new Intent( passing_info.this, alarm_receiver.class );
        sender = PendingIntent.getBroadcast( this, 0, intent, 0);

        am = (AlarmManager)getSystemService( ALARM_SERVICE );
        am.set( AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),sender );
        Toast.makeText( getApplicationContext(), "Alarm set",Toast.LENGTH_SHORT ).show(); 
```

我的设置方式正确吗？为什么这没有做任何事情？即它不响（接收器类振动电话）

谢谢

PS toast 消息出现在底部

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T09:15:54.500

月总是减一。意味着如果你想给四月然后使用 3 而不是 4 所以：

```
cal.set( 2012, 3, 10, 10, 4 ); 
```

# wordpress - wordpress htaccess 重写

> ID：10085944
> 
> 赞同：0
> 
> 时间：2012-04-10T09:10:45.613
> 
> 标签：wordpress, .htaccess, mod-rewrite

我的 wordpress .htaccess 文件看起来像

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

我想添加我的 owm rewriterule 但不工作规则必须重写 page/([az,AZ]+).html$ 到 pages?page_name=$1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:49:53.767

以下是执行您要求的规则：

```
RewriteRule ^page/([a-z,A-Z]+).html$ pages?page_name=$1 [NC] 
```

放置这个之后`RewriteRule . /index.php [L]`应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:38:25.477

它仅在以下情况下才开始工作：

> 1.  在我的 RewriteRule 末尾添加 [NC,L]
>     
>     
> 2.  使用绝对路径`http://site.ru/pages?page_name=$1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T20:23:40.987

我也建议您阅读[这篇文章](http://audio.probudget.ru/programmirovanie/sobstvenniy-rewriterule-v-wordpress) ，它展示了如何将您的自定义重写器添加到 WP

# cmake - 使用 CMake 设置 CFLAGS 和 CXXFLAGS 选项

> ID：10085945
> 
> 赞同：98
> 
> 时间：2012-04-10T09:10:49.110
> 
> 标签：cmake, cflags

我只想调试一些在 Linux 上运行的代码，我需要一个调试版本（`-O0 -ggdb`）。所以我将这些东西添加到我的`CMakeLists.txt`：

```
set(CMAKE_BUILD_TYPE DEBUG)
set(CMAKE_C_FLAGS "-O0 -ggdb")
set(CMAKE_C_FLAGS_DEBUG "-O0 -ggdb")
set(CMAKE_C_FLAGS_RELEASE "-O0 -ggdb")
set(CMAKE_CXX_FLAGS "-O0 -ggdb")
set(CMAKE_CXX_FLAGS_DEBUG "-O0 -ggdb")
set(CMAKE_CXX_FLAGS_RELEASE "-O0 -ggdb") 
```

当我尝试编译时，我打开了详细使用`make VERBOSE=1` 并且我观察了输出，就像这样

```
... /usr/bin/c++ -D_BSD_SOURCE **-O0 -ggdb** -Wnon-virtual-dtor 
-Wno-long-long -ansi -Wundef -Wcast-align -Wchar-subscripts -Wall -W 
-Wpointer-arith -Wformat-security -fno-exceptions -DQT_NO_EXCEPTIONS 
-fno-check-new -fno-common -Woverloaded-virtual -fno-threadsafe-statics 
-fvisibility=hidden -fvisibility-inlines-hidden **-g -O2** 
-fno-reorder-blocks -fno-schedule-insns -fno-inline ... 
```

显然代码是用编译的`"-g -O2"`，这不是我想要的。我怎样才能强制它只使用`"-O0 -ggdb"`？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-04-10T10:33:26.100

您需要在 CMakeLists.txt 中的命令*之后设置标志。*`project`

此外，如果你调用`include(${QT_USE_FILE})`or `add_definitions(${QT_DEFINITIONS})`，你应该`set`在 Qt 之后包含这些命令，因为这些会附加更多的标志。如果*是*这种情况，您可能只想将您的标志附加到 Qt 标志，因此更改为例如

```
set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -O0 -ggdb") 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2017-01-25T04:48:23.170

对我来说最简单的解决方案是这样的：

```
export CFLAGS=-ggdb
export CXXFLAGS=-ggdb 
```

CMake 会将它们附加到所有配置的标志中。只要确保清除 CMake 缓存即可。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-08-27T13:16:17.697

您必须更改 cmake C/CXX 默认 FLAGS 。

根据`CMAKE_BUILD_TYPE={DEBUG/MINSIZEREL/RELWITHDEBINFO/RELEASE}` 放入主要`CMakeLists.txt`之一：

对于 C

```
set(CMAKE_C_FLAGS_DEBUG "put your flags")
set(CMAKE_C_FLAGS_MINSIZEREL "put your flags")
set(CMAKE_C_FLAGS_RELWITHDEBINFO "put your flags")
set(CMAKE_C_FLAGS_RELEASE "put your flags") 
```

对于 C++

```
set(CMAKE_CXX_FLAGS_DEBUG "put your flags")
set(CMAKE_CXX_FLAGS_MINSIZEREL "put your flags")
set(CMAKE_CXX_FLAGS_RELWITHDEBINFO "put your flags")
set(CMAKE_CXX_FLAGS_RELEASE "put your flags") 
```

这将覆盖 CMakeCache.txt 中定义的值

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-04-18T18:55:39.923

在 Unix 系统上，对于几个项目，我将这些行添加到 CMakeLists.txt 中并且它编译成功，因为**基本**（*/usr/include*）和**本地**包含（*/usr/local/include*）进入单独的目录：

```
set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -I/usr/local/include -L/usr/local/lib")
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -I/usr/local/include")
set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -L/usr/local/lib") 
```

它附加正确的目录，包括 C 和 C++ 编译器标志的路径以及链接器标志的正确目录路径。

*注意：C++编译器（c++）不支持-L，所以我们必须使用[CMAKE_EXE_LINKER_FLAGS](https://cmake.org/cmake/help/v3.0/variable/CMAKE_EXE_LINKER_FLAGS.html)*

# c# - LINQ GROUP BY 和 MAX()

> ID：10085947
> 
> 赞同：3
> 
> 时间：2012-04-10T09:11:11.487
> 
> 标签：c#, sql, linq, group-by, max

我正在尝试找出如何在 LINQ 中编写 SQL 语句，但我暂时找不到方法，这是 SQL 命令：

```
SELECT cs.Site_Name, MAX(ed.EffectiveDate_Date)
FROM [WAPMaster].[Factsheets].[EffectiveDate] ed,
[WAPMaster].[Configuration].[Site] cs
WHERE cs.Site_Id = ed.EffectiveDate_SiteId
GROUP BY cs.Site_Name 
```

有人可以帮我使用 linq 语法吗？

**到目前为止我正在尝试这个（感谢 levanlevi）

```
var test = (from e in this._wapDatabase.EffectiveDates
            join c in this._wapDatabase.Sites 
            on c.Site_Id equals e.EffectiveDate_SiteId
            group e by c.Site_Name into r
            select new
            {
                r.Key.SiteName,
                EffectiveDate = r.Max(d => d.EffectiveDate_Date)
            }); 
```

但我收到以下错误：

[http://i.stack.imgur.com/AkJ5V.png](https://i.stack.imgur.com/AkJ5V.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T09:24:03.283

```
SELECT  cs.Site_Name ,
        MAX(ed.EffectiveDate_Date)
FROM    [WAPMaster].[Factsheets].[EffectiveDate] ed ,
        [WAPMaster].[Configuration].[Site] cs
WHERE   cs.Site_Id = ed.EffectiveDate_SiteId
GROUP BY cs.Site_Name

from e in WAPMaster.Factsheets.EffectiveDate
join c in WAPMaster.Configuration.Site
on c.Site_Id equals e.EffectiveDate_SiteId
group e by c.Site_Name into r
select new { SiteName = r.Key, EffectiveDate = r.Max(d=>d.EffectiveDate_Date)} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:32:01.303

```
var test = (from effectiveDates in this._wapDatabase.EffectiveDates                         
            from sites in this._wapDatabase.Sites                         
            where sites.Site_Id = effectiveDates.EffectiveDate_SiteId
                     group effectiveDates by sites.Site_Id into g                         
             select new {  siteId = g.key , effectiveDate = g.max(ed => ed.EffectiveDate_Date)}); 
```

# scala - Scala ~>（波浪号大于）运算符

> ID：10085951
> 
> 赞同：28
> 
> 时间：2012-04-10T09:11:39.757
> 
> 标签：scala, operators

我有以下 scala 类定义（在论文中找到），建模类别：

```
trait Category[~>[_, _]] {
    def compose[A, B, C]
     (f: B ~> C)
     (g: A ~> B)
     : A ~> C
    def id[A]: A ~> A
} 
```

有人可以解释一下“~>”在 Category 类型参数和方法返回类型中的含义吗？或者将我引导到解释它的资源...我是 Scala 的新手（来自 Java），所以如果这是 scala 用户应该知道的，请原谅我...提前谢谢你

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-10T09:18:32.163

`~>`只是类型参数的占位符名称`Category`。就像`T`在`class Option[T]`.

此外，Scala 语法允许您编写`B ~> C`为`~>[B, C]`.

如果你重命名它，也许事情会变得更清楚：

```
trait Category[Mapping[_, _]] {
  def compose[A, B, C](f: Mapping[B, C])(g: Mapping[A, B]): Mapping[A, C]
  def id[A]: Mapping[A, A]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-06T19:59:00.360

这也用于[Akka 流](https://doc.akka.io/docs/akka/2.5.3/scala/stream/stream-quickstart.html#broadcasting-a-stream)中作为边缘运算符。

# python - Twistd 套接字所有权

> ID：10085960
> 
> 赞同：1
> 
> 时间：2012-04-10T09:12:25.893
> 
> 标签：python, twisted, unix-socket, twistd

我有一个守护进程，它监听`/var/run`. 我使用 init 脚本（显然是 root）启动守护进程，并且我正在使用`twistd` `--uid`and`--gid`选项将权限授予非特权用户。但是，该套接字仍归`root:root`.

第二个守护进程，作为同一个非特权用户运行，需要访问套接字。我现在将套接字所有权更改为`daemon:daemon`init 脚本，但这并没有让我觉得这是一个非常优雅的解决方案。

`daemon:daemon`有没有办法让文件中拥有的套接字`tac`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:10:48.780

不，目前没有。

这是 Twisted 中的一个未解决问题，PID 和日志文件也是如此。

请参阅[描述问题的博客](http://www.tsheffler.com/blog/?p=526)和未解决的问题：

*   [http://twistedmatrix.com/trac/ticket/5297](http://twistedmatrix.com/trac/ticket/5297)
*   [http://twistedmatrix.com/trac/ticket/5296](http://twistedmatrix.com/trac/ticket/5296)

# c - 如何避免在 C 中更改 const 的值

> ID：10085961
> 
> 赞同：1
> 
> 时间：2012-04-10T09:12:31.757
> 
> 标签：c

嗨，我是编程世界的初学者，我想知道如何避免更改 const 变量的值。

```
#include <stdio.h>
int main()
{
 const int i = 10;
 int * p = &i;
 *p = 20;
 printf("*p = %d\ni = %d\n", *p,i);
 printf("%u\n%u\n",&i, p);
 return 0;
} 
```

在上面的程序中，当我通过指针为 const 字段分配值时，我只收到警告但没有错误，但是当我打印出来时并没有什么不同：

```
*p = 20
i = 10
3210723532
3210723532 
```

那么，当指针无法更改时，获取指向 const 的指针有什么用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T09:31:23.077

首先，编译器会因为代码给出警告`int * p = &i;`

并且 i 的值没有改变，因为编译优化了代码，我使用 gcc 来测试代码：

如果我使用`gcc -O0 const.c -o const`,`O0`表示没有编译器优化，结果是

```
*p = 20
i = 20
1114013412
1114013412 
```

但是当我使用`gcc -O2 const.c -o const`,`O2`代表编译器优化时，结果是

```
*p = 20
i = 10
1262279764
1262279764 
```

因此，编译器知道`i`is的类型`const`，并在编译时替换`i`为`10`，因此代码变为

```
 printf("*p = %d\ni = %d\n", *p,10); 
```

您也可以使用`gcc -S const.c`查看汇编代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T09:17:50.577

C 语言标准（几乎）从不要求编译器*拒绝*不正确的代码。如果你写了一些非法的东西，而编译器只是警告你，就 C 语言标准而言，编译器已经完成了它的工作。

您需要非常认真地对待编译器警告。*如果您的代码在没有警告或*错误的情况下编译，那么它可能是合法的（这并不意味着它会真正起作用！）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T10:40:15.230

C 标准仅使用术语“诊断”。警告和错误之间没有区别。

没有强制转换的`const int *`to转换`int *`是需要诊断的约束违规。

这将其与语法错误归为同一类别：您的代码不是有效的 ISO C 程序，并且如果它被翻译并执行，则行为未定义。

不幸的是，许多编译器没有将所需的诊断与他们添加的额外诊断区分开来，更糟糕的是，他们有时需要将诊断作为警告。这是允许的：C 标准没有规定必须阻止需要诊断的程序翻译和执行。通过发出警告，编译器满足诊断要求，仅此而已。

另一个问题是，许多 C 编译器甚至不接受标准的 ISO C 方言，除非他们被要求，而是接受他们自己的方言，这些方言可能有不符合标准（即不向后兼容）的扩展。

GNU C 编译器可以理解一种称为 GNU C 89 的 C 方言，如果你不给它任何方言选项的话。

`const int *`因此，具有讽刺意味的是，在这种方言中，转换为没有演员表只是一个警告`int *`，而某些合法的 C90 程序则被完全拒绝。

所以基本上你总是必须了解如何控制编译器的输入方言，并跟进所有你必须自己理解的警告，无论它们是真正违反语言，还是只是编译器的突发奇想writers（“建议在这个表达式周围加上括号”）。

编译不是一个坏主意`gcc -Wall -W -ansi`（如果您在 C90 中编程；或者`-std=c99`代替`ansi`C99）并确保没有警告。甚至那些建议额外括号之类的文体也没有。如果您没有足够的纪律来跟进警告，请添加`-Werror`将它们变成使您的构建失败的错误。有些人还会推荐`-pedantic`。

如果你遵循这个原则，a 的颠覆`const int`就不会潜入你的代码库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T09:32:29.403

改成一个`#define`。

声明的对象`const`在该术语的英文含义中不是恒定的，它们是“只读的”。

```
#include <stdio.h>
int main()
{
 #define I 10
 int * p = &I; // illegal &I
 *p = 20;
 printf("*p = %d\nI = %d\n", *p,I);
 printf("%u\n%u\n",&I, p); // illegal &I
 return 0;
} 
```

# iphone - 相应评级时的 iPhone+高亮星

> ID：10085962
> 
> 赞同：0
> 
> 时间：2012-04-10T09:12:32.290
> 
> 标签：iphone, ios, ios4

例如，我正在开发一个应用程序，我希望用户对任何专辑进行评分。在他对专辑进行评分后，我希望突出显示星星的数量。谁能帮助我解决这个问题。我想避免使用硬编码的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:22:30.633

您可以从[本教程](http://www.raywenderlich.com/1768/how-to-make-a-custom-uiview-a-5-star-rating-view)开始。

# android - 安卓报警驱动

> ID：10085963
> 
> 赞同：0
> 
> 时间：2012-04-10T09:12:33.003
> 
> 标签：android, real-time, alarmmanager, android-alarms

我是android新手，我想知道alarm.c的实现，特别是为什么android报警需要RTC支持。仅当我启用 RTC 支持时，警报才对我有效。你能简单解释一下RTC在警报中的重要性吗

谢谢问候沙比尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:25:32.197

**RTC 的重要性。**

这是 ***实时时钟***。您正在处理应用程序层。它的工作方式对您来说并不重要。

实时时钟 (RTC) 计算秒、分钟、小时、月份日期、月份、星期几和闰年年份
，您可以通过编程调用它。

它是IC（硬件部分）。如果您想了解更多信息，请通过链接；

[RTC IC 数据表](http://datasheets.maxim-ic.com/en/ds/DS1305.pdf)

# php - 卷曲不适用于 hellotxt API

> ID：10085964
> 
> 赞同：0
> 
> 时间：2012-04-10T09:12:33.943
> 
> 标签：php, curl, libcurl

我有这样的代码。

```
<?php
$post_vars = array('app_key'=>'my_api_key', 'user_key' => 'my_user_key');
$c = curl_init();
curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($c, CURLOPT_POST, 1);
curl_setopt($c, CURLOPT_HTTPHEADER, array('Accept: application/json', 'Content-Type: application/json'));
curl_setopt($c, CURLOPT_URL, 'http://hellotxt.com/api/v1/method/user.validate');
curl_setopt($c, CURLOPT_POSTFIELDS, $post_vars);

$content = curl_exec($c);
print_r($content);
curl_close($c);

?> 
```

这会将返回响应显示为“未指定应用程序键”。但是，如果我通过表单 (form-post) 发布 api 密钥和用户密钥，则同样有效。当我使用表单提交 api 密钥和用户密钥时，我得到的响应为。

```
<rsp status="OK"><nick>testinguser</nick><name>testinguser</name><avatar>       http://hellotxt.com/avatar/testinguser/medium/image.jpg</avatar></rsp> 
```

但我不能用卷曲做。什么地方出了错。请指导我谢谢Haan（PS：FYI，hellotxt的api在这里。http: [//hellotxt.com/developers/api](http://hellotxt.com/developers/api)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:15:49.407

您应该发送一个数组作为 post 字段，现在您正在发送一个 json 编码的字符串

所以你应该替换这个：

```
curl_setopt($c, CURLOPT_POSTFIELDS, '{app_key:"my_api_key", user_key:"my_user_key"}'); 
```

和

```
curl_setopt($c, CURLOPT_POSTFIELDS, $post_vars); 
```

在哪里

```
$post_vars = array('app_key'=>'my_api_key', 'user_key' => 'my_user_key'); 
```

**编辑**：还要考虑 Honoki 给出的答案。我投了赞成票，因为他也有观点，你需要“告诉”curl 你打算发帖

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T09:16:27.593

您必须指定要发出如下的 POST 请求。

```
curl_setopt($c, CURLOPT_POST, 1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T08:25:41.363

尝试从您的代码中**删除这一行：**

```
curl_setopt($c, CURLOPT_HTTPHEADER, array('Accept: application/json', 'Content-Type: application/json')); 
```

# c# - Comparing DateTime for .NET Application

> ID：10085971
> 
> 赞同：-3
> 
> 时间：2012-04-10T09:13:10.880
> 
> 标签：c#, .net, datetime, compare

I have a small app using Drive.Info. I want to do two things. Check a certain drive exists on a machine, and if it does and todaysdate isn't one of a number of dates stored in a text file, run a small application. If today's date is read inside the text file, do nothing. I Have a bunch of code working but having trouble with the DateTime object. Can anyone take a look at what I have and advise what I need to restructure? All the logic is there, I'm just not putting it together correctly.

1.  Dates stored in the txt file I'm reading from are like so on each line: 25/12/2010.
2.  Inside the catch statement the line "Console.WriteLine(e.Message);" is what is generating the " String was not recognised as a valid DateTime" issue.
3.  My desired goal is: If today's date is NOT found in the text file & The drive specified at the line "(d.Name.Contains("C"))" exists on the current machine, run calc.exe.
4.  If today's date IS found in the text file, do nothing.

My issue is: How do I modify the structure of my application so I can: compare dates successfully with those stored in the txt file. And secondly, adjust my logic so I can achieve parts 3 & 4 above.

Apologies for needing to edit, I should have been more clear with my initial post. Thanks.

EDIT: Guys I've updated the code below. It seems to be working now. Thanks for the help and sorry again for the poorly put together first question. The application behaviour is working as desired now, however; the catch is still being hit (when today's date is not in the file, and the specified drive does not exist) It would be nice to understand why this is happening?

```
public static void Main()
/* Goal of this application: Read a text file filled with public holiday dates     formatted as: 25/12/2011
 * Compare these to today's date.  If not a match, run calc.exe ASSUMING THE SPECIFIED   DRIVE ON LINE 78
 * IS FOUND ON THE COMPUTER.  If the date matches, do nothing.
*/
{
    Process Calculator = new Process();
    Calculator.StartInfo.FileName = "calc.exe";
    Calculator.StartInfo.Arguments = "ProcessStart.cs";
    DriveInfo[] allDrives = DriveInfo.GetDrives();

    // Create a StreamReader to read from file.
    StreamReader sr = new StreamReader("file.txt");

        String DateFromFile;
        DateTime todaysDate = DateTime.Today;

        try
        {              
            // Read and display lines from the file until the eof is reached.
            while ((DateFromFile = sr.ReadLine()) != null)
            {
                Console.WriteLine(DateFromFile);
                DateTime dt = Convert.ToDateTime(DateFromFile);

                if (dt == todaysDate)
                {
                    Console.WriteLine("File.text has todays date inside! Not gonna run calc.exe");
                    Environment.Exit(0);

                }//end if 

                else
                {
                 }//end else

          }//end while
        }//end try

        catch (Exception e)
        {
            // Let the user know what went wrong.
            Console.WriteLine("The file.txt could not be read");
            Console.WriteLine(e.Message);
       }

        ////////// DO THE REST ///////////
     foreach (DriveInfo d in allDrives)
        {
            Console.WriteLine("Drive {0}", d.Name);

            Console.WriteLine("  File type: {0}", d.DriveType);
            if (d.IsReady == true)
            {
                Console.WriteLine("  Volume label: {0}", d.VolumeLabel);
                Console.WriteLine("  File system: {0}", d.DriveFormat);
                Console.WriteLine(
                    "  Available space to current user:{0, 15} bytes",
                    d.AvailableFreeSpace);

                Console.WriteLine(
                    "  Total available space:          {0, 15} bytes",
                    d.TotalFreeSpace);

                Console.WriteLine(
                    "  Total size of drive:            {0, 15} bytes ",
                    d.TotalSize);
            }//end if
            if (d.Name.Contains("T"))
            {
                Console.WriteLine("\n");
                Console.WriteLine("** SUCCESS - LETTER FOUND **\n\n ** RUN CALC.EXE **");
                Console.WriteLine("\n");
                Calculator.Start();
            }//end if
            else
            {
                Console.WriteLine("** LETTER NOT FOUND **");
                Console.WriteLine("\n");
            }//end else  
        }//end for

}//end main
}//end class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:18:54.907

Here is the duplicate Question on StackOverflow

[String was not recognized as a valid DateTime " format dd/MM/yyyy"](https://stackoverflow.com/questions/2193012/string-was-not-recognized-as-a-valid-datetime-format-dd-mm-yyyy)

may this help you

Change your code line : `DateTime dt = Convert.ToDateTime(DateFromFile);`

to

```
DateTime dt= DateTime.ParseExact(DateFromFile, "dd/MM/yyyy", null); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T09:54:58.973

When comparing dates and strings you need to pay attention to 2 things:

1.  Ensuring you're working with the correct data types
2.  Ensuring you're working with the correct formats.

so if you want to compare a DateTime with a string date the first thing you want to do is convert the string to a DateTime.

The best and most reliable way to do this is to know the format of the string upfront and use parseExact like this:

```
string myDateTimeString = "03/04/2012"; // Notice month and day are ambiguous!
string format = "dd/MM/yyyy";
DateTime dateTime = DateTime.ParseExact(myDateTimeString, format,
        CultureInfo.InvariantCulture); 
```

It is important to use the cultureInfo overload too. Just do it always your code will be more reliable.

Now you have a dateTime you can compare it, but I wouldn't use the equal operator on the base object instead I would use this:

```
if (myDate.Date == DateTime.Today)
{
   //Occurs on same day!

} 
```

or in your case:

```
if (myDate.Date == DateFromTextFile.Date)
{
  //Condition met
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T09:26:31.963

I think you have to get the current date at the beginning to particular date format.

As e.g. Use

```
String todaysDate = DateTime.Now.ToShortDateString(); 
```

And when you compare also convert the string to that format and compare

```
 String dt = DateTime.Parse(DateFromFile).ToShortDateString(); 
```

# wcf - 为什么从 WCF 服务操作返回 DataTables 是一种不好的做法？

> ID：10085974
> 
> 赞同：2
> 
> 时间：2012-04-10T09:13:13.170
> 
> 标签：wcf

我知道在 WCF 中序列化复杂类型的首选方法是使用 DataContracts，但为什么会这样呢？

如果我从服务操作返回 DataTable 而不是 DataContract，WCF 是否使用 XmlSerializer 类而不是默认的 DataContractSerializer？

最后，在本主题中：[DataTable not accepted by svcutil - WCF Service](https://stackoverflow.com/questions/5742997/datatable-not-accepted-by-svcutil-wcf-service)

您是否认为问题在于通过返回 DataTable，CLR 类型无法正确映射到 XSD 架构定义？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T11:12:38.587

在服务合同中使用 DataTable 的主要问题不是技术问题，而是设计问题。如果您的服务在契约中使用 DataTable，那么您就违反了使用标准化契约和松耦合的 SOA 设计原则。
这是因为如果服务返回 DataTable，则合同不会指定 DataTable 包含哪些列。这将迫使服务消费者对服务提供者的内部运作有一定的了解，从而使系统紧密耦合。

# lotusscript - 如何使用 Lotus 脚本获取系统/磁盘信息？

> ID：10085975
> 
> 赞同：0
> 
> 时间：2012-04-10T09:13:15.260
> 
> 标签：lotusscript

我想获取当前 PC 的系统信息（如操作系统、版本和处理器名称）。哪位大神知道这个问题的解决方法，求指导。

谢谢，克里希纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:21:18.017

这应该有助于：

[http://www-10.lotus.com/ldd/46dom.nsf/Search/2b812ddff112ee7585256ad1006f5381?OpenDocument](http://www-10.lotus.com/ldd/46dom.nsf/Search/2b812ddff112ee7585256ad1006f5381?OpenDocument)

和这个：

[http://www-10.lotus.com/ldd/46dom.nsf/Search/e0d4e80defff55b385256a31004d590e?OpenDocument](http://www-10.lotus.com/ldd/46dom.nsf/Search/e0d4e80defff55b385256a31004d590e?OpenDocument)

# python - 如果python处理太多bigtext，内存会溢出吗

> ID：10085980
> 
> 赞同：0
> 
> 时间：2012-04-10T09:13:24.967
> 
> 标签：python, string, memory

python会将所有字符串存储在athene_pool中并且永远不会释放它们，所以bigtext proccessing最近困扰着我。我将文章内容保存到redis，并从redisclient获取它们，并将它们发送到http响应。虽然序列化可能会导致内存过多，有什么好主意来解决这样的事情吗？我想知道 django 是否产生了太多响应，它如何释放它们以保持低内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:35:56.850

Python 不会汇集所有字符串，请参阅[Are strings pooled in Python](https://stackoverflow.com/questions/2519580/are-strings-pooled-in-python)。

例如，这个 10K 字符串没有被池化：

```
>>> a = '5' * 10000
>>> b = '5' * 10000
>>> a is b
False 
```

但是汇集了一个短*的*5 个字符的字符串：

```
>>> a = '5' * 5
>>> b = '5' * 5
>>> a is b
True 
```

尔格：你不必担心长字符串在内存中的保存时间超过了必要的时间。

# sql - 视图和临时表之间的性能差异

> ID：10085984
> 
> 赞同：4
> 
> 时间：2012-04-10T09:13:42.330
> 
> 标签：sql, sql-server-2008, view, temp-tables

视图和临时表的性能是否有任何重大差异。我有喜欢将数据从一个数据库迁移到另一个数据库的情况。我必须将视图中的源数据提取到目标数据库中的表中。

由于其中没有唯一字段，我尝试将视图中的数据提取到临时表中，并对其进行处理以将数据推送到目标表中。我没有发现任何关于时间的重大性能变化。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T09:29:08.210

临时表和视图的主要区别在于，临时表只是 tempdb 中的表，而视图只是对现有表中现有数据的存储查询。所以，不需要填充视图，因为数据已经在这里了。但是需要先填充临时表，而填充是主要的性能问题。

# ant - 连接 2 个现有属性时使用 ant 访问第三个属性？

> ID：10085989
> 
> 赞同：0
> 
> 时间：2012-04-10T09:13:55.370
> 
> 标签：ant, properties, el

所以我有类似下面的代码

```
<target name="testIt">
    <property name="appname" value="ApplicationOne"/>
    <property name="ApplicationOne-serveraddress" value="http://ApplicationOne.com"></property>
    <property name="ApplicationTwo-serveraddress" value="http://ApplicationTwo.com"></property>
    <echo message="${${appname}-serveraddress}"></echo>
</target> 
```

有没有办法做到这一点？显然，这不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:19:53.713

[这篇关于在 ant 中使用 antlib 道具的博客文章帮助我](http://wdarby.blogspot.com/2010/06/using-antlib-props-in-ant-18.html)解决 [了大括号的嵌套问题，](http://ant.apache.org/manual/properties.html)基本上你必须下载 jar 并包含

```
<project xmlns:props="antlib:org.apache.ant.props">
  <typedef uri="antlib:org.apache.ant.props"
    resource="org/apache/ant/props/antlib.xml"
    classpath="ant-props-1.0Alpha.jar"/>      
 <propertyhelper>
  <props:nested />
</propertyhelper> 
```

不要忘记 xmlns。[我在这里](http://www.java2s.com/Code/JarDownload/ant-props/ant-props-1.0Alpha.jar.zip)下载了jar

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:31:34.007

您可以使用其他人的值定义属性。那是你要找的吗？

```
<target name="testit">
    <property name="a" value="a"/>
    <property name="b" value="b"/>
    <property name="aandb" value="${a}{b}"/>
    <echo message="hello ${aandb}"/>
</target> 
```

新的 ant 支持一种使属性本地化的方法。

```
<target name="testit">
    <property name="a" value="a"/>
    <property name="b" value="b"/>
    <local name="aandb" />
    <property name="aandb" value="${a}{b}"/>
    <echo message="hello ${aandb}"/>
</target> 
```

这有助于避免不可变属性引起麻烦的情况。

# python - 在单线程 Python 应用程序中关闭 socketserver serve_forever()

> ID：10085996
> 
> 赞同：21
> 
> 时间：2012-04-10T09:14:28.083
> 
> 标签：python, sockets, socketserver

我知道 socketserver 有一个`shutdown()`导致服务器关闭的方法，但这仅适用于多线程应用程序，因为需要从与`serve_forever()`正在运行的线程不同的线程调用关闭。

我的应用程序一次只处理一个请求，所以我不使用单独的线程来处理请求并且我无法调用`shutdown()`，因为它会导致死锁（它不在文档中，但它直接在 socketserver 的源代码中说明）。

我将在此处粘贴我的代码的简化版本以便更好地理解：

```
import socketserver

class TCPServerV4(socketserver.TCPServer):
  address_family = socket.AF_INET
  allow_reuse_address = True

class TCPHandler(socketserver.BaseRequestHandler):
  def handle(self):
    try:
       data = self.request.recv(4096)
    except KeyboardInterrupt:
       server.shutdown()

server = TCPServerV4((host, port), TCPHandler)
server.server_forever() 
```

我知道这段代码不起作用。我只是想向您展示我想要完成的事情 - 关闭服务器并退出应用程序，同时等待用户按下时的传入数据`Ctrl``C`。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-03-20T13:05:52.353

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-03-15T17:07:42.753

SocketServer 库使用一些奇怪的方法来处理继承的属性（由于使用旧样式类而猜测）。如果您创建一个服务器并列出它的受保护属性，您会看到：

```
In [4]: server = SocketServer.TCPServer(('127.0.0.1',8000),Handler)
In [5]: server._

server._BaseServer__is_shut_down
server.__init__
server._BaseServer__shutdown_request
server.__module__
server.__doc__
server._handle_request_nonblock 
```

如果您只是在请求处理程序中添加以下内容：

```
self.server._BaseServer__shutdown_request = True 
```

服务器将关闭。这与 call 的作用相同`server.shutdown()`，只是在关闭之前无需等待（并死锁主线程）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-29T20:57:52.260

我相信 OP 的意图是从请求处理程序中关闭服务器，我*认为*他的`KeyboardInterrupt`代码方面只是令人困惑。

`Ctrl``C`从运行服务器的 shell按下*将成功*关闭它，而无需执行任何特殊操作。您不能`Ctrl``C`从不同的外壳按下并期望它工作，我认为这个概念*可能*是这个令人困惑的代码的来源。没有必要像 OP 尝试的那样处理`KeyboardInterrupt`in ，或者像另一个建议的那样处理。如果你都不做，它会按预期工作。`handle()``serve_forever()`

这里唯一的技巧——而且很棘手——是告诉服务器从处理程序中关闭而不会死锁。

正如 OP 在他的代码中解释和显示的那样，他使用的是单线程服务器，因此建议在“其他线程”中关闭它的用户没有注意。

我仔细研究了`SocketServer`代码，发现`BaseServer`该类在努力使用该模块中可用的线程混合时，实际上通过`threading.Event`在`serve_forever`.

`serve_forever`因此，我为单线程服务器编写了一个修改版本，它可以从请求处理程序中关闭服务器。

```
import SocketServer
import socket
import select

class TCPServerV4(SocketServer.TCPServer):
    address_family = socket.AF_INET
    allow_reuse_address = True

    def __init__(self, server_address, RequestHandlerClass):
        SocketServer.TCPServer.__init__(self, server_address, RequestHandlerClass)
        self._shutdown_request = False

    def serve_forever(self, poll_interval=0.5):
        """provide an override that can be shutdown from a request handler.
        The threading code in the BaseSocketServer class prevented this from working
        even for a non-threaded blocking server.
        """
        try:
            while not self._shutdown_request:
                # XXX: Consider using another file descriptor or
                # connecting to the socket to wake this up instead of
                # polling. Polling reduces our responsiveness to a
                # shutdown request and wastes cpu at all other times.
                r, w, e = SocketServer._eintr_retry(select.select, [self], [], [],
                                       poll_interval)
                if self in r:
                    self._handle_request_noblock()
        finally:
            self._shutdown_request = False

class TCPHandler(SocketServer.BaseRequestHandler):
    def handle(self):
        data = self.request.recv(4096)
        if data == "shutdown":
            self.server._shutdown_request = True

host = 'localhost'
port = 52000
server = TCPServerV4((host, port), TCPHandler)
server.serve_forever() 
```

如果您将字符串发送`'shutdown'`到服务器，服务器将结束其`serve_forever`循环。您可以使用 netcat 进行测试：

```
printf "shutdown" | nc localhost 52000 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-18T08:01:46.647

`shutdown`您实际上应该按照源代码中的指示调用其他线程：

```
 def shutdown(self):
        """Stops the serve_forever loop.

        Blocks until the loop has finished. This must be called while
        serve_forever() is running in another thread, or it will
        deadlock.
        """
        self.__shutdown_request = True
        self.__is_shut_down.wait() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-10T09:27:49.163

如果你没有`KeyboardInterrupt`在 TCP 处理程序中捕获 （或者如果你重新引发它），它应该向下渗透到根调用，在这种情况下是`server_forever()`调用。

不过，我还没有测试过。代码如下所示：

```
import socketserver  # Python2: SocketServer

class TCPServerV4(socketserver.TCPServer):
    address_family = socket.AF_INET
    allow_reuse_address = True

class TCPHandler(socketserver.BaseRequestHandler):
    def handle(self):
        data = self.request.recv(4096)

server = TCPServerV4((host, port), TCPHandler)

try:
    server.serve_forever()
except KeyboardInterrupt:
    server.shutdown() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-10T17:14:19.180

你总是可以尝试信号：

```
import signal
import os

# inside handler code that has decided to shutdown:
os.kill(os.getpid(), signal.SIGHUP)    # send myself sighup 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-09-25T05:31:10.750

我在 Python 3.7.4 中使用了它

```
def handle():
    setattr(self.server, '_BaseServer__shutdown_request', True) 
```

# c# - WCF 中关于 serviceHostingEnvironment 的未处理错误

> ID：10085997
> 
> 赞同：0
> 
> 时间：2012-04-10T09:14:32.687
> 
> 标签：c#, wcf, rest

我是一个尝试 WCF 的新手。我正在尝试使用 android 访问 WCF，我遇到了麻烦，根据我的研究，访问 WCF 需要 json，所以我尝试将其更改为 json。

我将接口更改为对象类型并开始出现如下所示的错误

```
The exception message is: The type 'AddItemService.Login', provided as the Service attribute value in the ServiceHost directive, or provided in the configuration element system.serviceModel/serviceHostingEnvironment/serviceActivations could not be found..] 
```

我的接口方法：

```
[OperationContract]
        [WebInvoke(Method = "POST", UriTemplate = "Login", BodyStyle = WebMessageBodyStyle.WrappedRequest, 
            ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]
        [Description("Returns the Login User ID")]
        int GetUserId(Login login); 
```

我的 web.config：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="AddItemService.Login"
                behaviorConfiguration="RESTBehavior">
        <endpoint address=""
                  binding="webHttpBinding"
                  contract="AddItemService.ILogin"
                   behaviorConfiguration="MyEndpointBehavior"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="RESTBehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="MyEndpointBehavior">
          <webHttp helpEnabled="true"/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
</configuration> 
```

我不知道为什么它不起作用。谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:52:00.050

听起来像 .svc 文件中为 WCF 服务指定的服务类型（实际的标记文件，而不是代码隐藏文件）正在引用不存在的服务类类型。

如果在 Visual Studio 中右键单击 .svc 文件并选择“查看标记”，则该文件中 ServiceHost 指令的“服务”属性需要包含实现 WCF 服务接口的类的名称。听起来现在它正在引用`AddItemService.Login`，它不存在。

# sparql - 在 dbpedia 上使用 SPARQL 查询以显示代词

> ID：10085998
> 
> 赞同：2
> 
> 时间：2012-04-10T09:14:34.667
> 
> 标签：sparql, semantic-web, ontology, dbpedia

如何使用 SPARQL over DBpedia 显示所有专有名词，如 Manchester_United_F_C.、Arsenel_FC、United_States？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T12:58:09.843

如果要显示来自 DBpedia的*所有专有名词**并且只*显示专有名词，则必须手动选择与专有名词对应的标签并过滤掉那些不对应的标签。

从这个查询开始：

```
 SELECT DISTINCT ?label WHERE {
     ?s  rdfs:label  ?label .
 } 
```

有 21,695,594 个三元组匹配这个三元组模式，所以祝你好运找出哪些是专有名词，哪些不是。