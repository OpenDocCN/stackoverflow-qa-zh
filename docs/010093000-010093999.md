# StackOverflow 问答 10093000-10093999

# javascript - 居中和隐藏图像，适合 div 大小

> ID：10093002
> 
> 赞同：0
> 
> 时间：2012-04-10T16:52:35.527
> 
> 标签：javascript, jquery, html, css

我需要`1400px`在宽度`960px`div 内居中宽度的图像，并隐藏 220px 的左侧和 220px 的右侧。

![在此处输入图像描述](../Images/862da8ab02a3c1c5d52c9650312f8ef5.png)

```
<div style="width:960px;">
    <img src="src" style="width:1400px" />
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T16:56:18.430

尝试：

```
div {overflow:hidden;}
img {margin-left: -220px;} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T16:57:21.360

使用以下 CSS 非常简单：

```
#wrapper {
    position: relative;
    overflow: hidden;
    width: 960px;
    height: 400px;
}
#wrapper img {
    position: absolute;
    left: -220px;
    width: 1400px;
} 
```

如果您不知道高度，您可能希望使用负左边距或位置：相对。

```
#wrapper {
    overflow: hidden;
    width: 960px;
}
#wrapper img {
    position: relative;
    left: -220px;
    display: block;
} 
```

如果您的图像大小是动态的，您可以尝试以下操作：

```
#wrapper {
    width: 960px;
    overflow: hidden;
}
#wrapper .inner {
    width: 10000px;
    position: relative;
    left: -4520px; /* 5000 minus half the wrapper width */

}
#wrapper .inner img {
    display: block;
    margin: 0 auto;
} 
```

请注意，这需要一个额外的包装器，`.inner`.

# android - 对字段槽 0,-1 的错误请求。numRows = 1，numColumns = 1

> ID：10093006
> 
> 赞同：1
> 
> 时间：2012-04-10T16:52:57.340
> 
> 标签：android, database, sqlite, runtime-error

每次我运行我的代码时，我都会在我的 logcat 中得到这个，并且无法弄清楚如何修复它。当我更新时出现此错误，我在删除时使用类似的代码并且效果很好。我在更新中使用了断点，它一直持续到函数的末尾。我以为在 startActivityForResult 会转到下一页，但事实并非如此。startActivityForResult 完全相同的代码在另一个函数中工作

这是更新的代码

```
 public void edit_to_report_page(final View v) {

    LayoutInflater inflater = LayoutInflater.from(this);
    View addView = inflater.inflate(R.layout.new_vehicle, null);
    idNum = (EditText) addView.findViewById(R.id.deleteRecord);
    new AlertDialog.Builder(this)
            .setTitle("Edit a report")
            .setMessage("Enter the Id number of the report to edit")
            .setView(addView)
            .setPositiveButton("Edit",
                    new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog,
                                int which) {
                            String id = idNum.getText().toString();
                            uniqueID = Long.parseLong(id);
                            newID(uniqueID);
                            info.open();

                            try {
                                boolean correctNumber = info
                                        .Exists(uniqueID);
                                if (!correctNumber) {
                                    Toast.makeText(getApplicationContext(),
                                            "Number not found",
                                            Toast.LENGTH_SHORT).show();

                                    info.close();

                                }else{

                                    info.close();
                                    intent = new Intent(v.getContext(),
                                            report.class);
                                    startActivityForResult(intent, 0);
                                }
                            } catch (Exception e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                        }
                    })
            .setNegativeButton("Cancel",
                    new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog,
                                int which) {
                            // TODO Auto-generated method stub

                        }
                    }).show();

} 
```

这是有效的删除代码

```
public void delete_db(View v) {

    LayoutInflater inflater = LayoutInflater.from(this);
    View addView = inflater.inflate(R.layout.new_vehicle, null);
    idNum = (EditText) addView.findViewById(R.id.deleteRecord);
    final Dialog d = new Dialog(this);
    final TextView tv = new TextView(this);

    new AlertDialog.Builder(this)
            .setTitle("Delete a report")
            .setMessage("Enter the Id number of the report to delete")
            .setView(addView)
            .setPositiveButton("Delete",
                    new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog,
                                int which) {
                            String id = idNum.getText().toString();
                            long primaryId = Long.parseLong(id);
                            info.open();
                            try {
                                boolean inCorrectNumber = info
                                        .deleteInspection(primaryId);
                                if (inCorrectNumber) {
                                    Toast.makeText(getApplicationContext(),
                                            "Number not found",
                                            Toast.LENGTH_SHORT).show();

                                }
                            } catch (Exception e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                            info.close();
                            dbInfo();
                        }
                    })
            .setNegativeButton("Cancel",
                    new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog,
                                int which) {
                            // TODO Auto-generated method stub

                        }
                    }).show();
} 
```

这是我的 dbAdapter 中用于删除和存在（更新）的代码

```
public boolean Exists(long _id)throws Exception
{

    Cursor c = db.query(DB_TABLE, new String[] { KEY_ROWID},
            "_id=" + _id, null, null, null, null);
     boolean exists=(c.getCount()>0);
    c.close();
    return exists;
}

public boolean deleteInspection(long _id)throws Exception
{
    int numResults = 0;
    numResults = db.delete(DB_TABLE,"_id=" + _id , null);
    return (numResults < 1);
} 
```

这是我在 logcat 中得到的

```
04-10 09:47:05.006: E/CursorWindow(2961): 对字段槽 0,-1 的错误请求。numRows = 1，numColumns = 1
04-10 09:47:05.016: D/AndroidRuntime(2961): 关闭 VM
04-10 09:47:05.027: W/dalvikvm(2961): threadid=1: 线程以未捕获的异常退出 (group=0x4001d800)
04-10 09:47:05.046：E/AndroidRuntime（2961）：致命异常：主要
04-10 09:47:05.046: E/AndroidRuntime(2961): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.signalsetapp/com.signalsetapp.inspectionchecklist.report}: java.lang.IllegalStateException: 获取字段槽从第 0 行 col -1 失败
04-10 09:47:05.046: E/AndroidRuntime(2961): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
04-10 09:47:05.046: E/AndroidRuntime(2961): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-10 09:47:05.046: E/AndroidRuntime(2961): 在 android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-10 09:47:05.046: E/AndroidRuntime(2961): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-10 09:47:05.046: E/AndroidRuntime(2961): 在 android.os.Handler.dispatchMessage(Handler.java:99)
04-10 09:47:05.046: E/AndroidRuntime(2961): 在 android.os.Looper.loop(Looper.java:123)
04-10 09:47:05.046: E/AndroidRuntime(2961): 在 android.app.ActivityThread.main(ActivityThread.java:4627)
04-10 09:47:05.046: E/AndroidRuntime(2961): 在 java.lang.reflect.Method.invokeNative(Native Method)
04-10 09:47:05.046: E/AndroidRuntime(2961): 在 java.lang.reflect.Method.invoke(Method.java:521)
04-10 09:47:05.046: E/AndroidRuntime(2961): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-10 09:47:05.046: E/AndroidRuntime(2961): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-10 09:47:05.046: E/AndroidRuntime(2961): at dalvik.system.NativeStart.main(Native Method)
04-10 09:47:05.046: E/AndroidRuntime(2961): 由: java.lang.IllegalStateException: 从行 0 col -1 获取字段槽失败
04-10 09:47:05.046: E/AndroidRuntime(2961): at android.database.CursorWindow.getString_native(Native Method)
04-10 09:47:05.046: E/AndroidRuntime(2961): 在 android.database.CursorWindow.getString(CursorWindow.java:329)
04-10 09:47:05.046: E/AndroidRuntime(2961): 在 android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:49)
04-10 09:47:05.046: E/AndroidRuntime(2961): at com.signalsetapp.inspectionchecklist.report.getInfoFromDB(report.java:129)
04-10 09:47:05.046: E/AndroidRuntime(2961): at com.signalsetapp.inspectionchecklist.report.onCreate(report.java:111)
04-10 09:47:05.046: E/AndroidRuntime(2961): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-10 09:47:05.046: E/AndroidRuntime(2961): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-10 09:47:05.046: E/AndroidRuntime(2961): ... 11 更多

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:47:56.120

很高兴提供帮助，添加以便您可以标记为答案:)

看起来“report.java:129”是这里的坏人，是你的代码吗？如果是这样，您能否在上面的内联代码中标记它。应该有助于调试这个:D – erbsman 4 小时前

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:41:38.063

亚伦我有同样的异常，解决方案是`Check your column name you want to access it from cursor is same name as exists in database`。并且还删除`white space`并首先尝试查询`SQLITE browser`然后尝试编码并`Debugging ,I mean print query in logcat and copy ,and paste and sqlite Browser`为你做一些关键，否则需要更多的时间和困难来解决它！

# php - 任何人都可以推荐一个与 MongoDB 兼容的良好 PHP ORM 吗？

> ID：10093010
> 
> 赞同：3
> 
> 时间：2012-04-10T16:53:29.333
> 
> 标签：php, mongodb

我正在为 MongoDB 寻找一个好的 PHP ORM 框架。我还没有偶然发现任何让我真正兴奋的东西。也许有人可以指点我一些我还没有看到的包裹。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:03:49.997

以下是所有官方认可的 MongoDB 适配器的列表：[http ://www.mongodb.org/display/DOCS/PHP+Libraries,+Frameworks,+and+Tools](http://www.mongodb.org/display/DOCS/PHP+Libraries,+Frameworks,+and+Tools)

你的问题很笼统。如果您有使用 Doctrine 或 Propel 等传统 ORM 框架的经验，那么您应该使用 Doctrine 的实验性 MongoDB 支持。如果你只是在寻找一个简单的界面，那么你应该看看像 Mandango 这样的东西。

# ruby - 我应该如何简洁地制作我的红宝石？

> ID：10093011
> 
> 赞同：0
> 
> 时间：2012-04-10T16:53:31.303
> 
> 标签：ruby

在 ruby​​ 或一般编程中，最好的做法是尽可能简洁，还是在仍然可读的情况下简洁？例如：

```
animals = %w{ cat dog bird }
chosen_animal = rand(animals.length)
random_animal = animals[chosen_animal] 
```

或者

```
animals = %w{ cat dog bird }
random_animal = animals[rand(animals.length)] 
```

我感觉第二个代码更好。使用第一个有什么好处吗？你会使用哪个，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T17:04:45.180

> as concise as the language allows or to be concise while still readable?

Always, always prefer readability. Conciseness is only useful when it makes your code *more* readable (i.e., less verbosity and clutter to wade through). It saves you nothing if it obscures the code and serves only to slow development down.

Readability/maintainability only takes a back seat to performance concerns and only when absolutely necessary. This is not often the case in a language like Ruby, more common in a language like C when a bottleneck has been shown to exist that can only be remedied by performing some amount of low level optimizations that may make the code slightly more difficult to comprehend. In this case, add comments that explain the behavior of the code thoroughly.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:19:10.143

这是一个非常广泛的问题，存在很大的主观偏见空间。

人们普遍认为可读性总是一件好事。但是，阅读的内容因人而异。

例如，从您的示例中，我实际上更喜欢第二种变体。

有很多人会说，把你的代码分散开来，这很有帮助，但是有些人（包括我自己）更喜欢不那么分散的代码（在限制范围内！），因为它让我更容易感受到对于远处的代码（结构，循环，条件等）的“形状”。

在您的示例中，使用一种或另一种变体几乎不会影响可读性。但是假设你有一个像这样的公式：

```
r1 = $r*(($objcols-i).to_f+j+k)*3/total_objs 
```

这里面有更多的术语，所以很难观察到。你可以把它拆开：

```
t1 = ($objcols-i).to_f
t2 = t1 + j + k
t3 = $r * t2 * 3
r1 = t3 / total_objs 
```

但这是否使它更具可读性？实际上，这个特殊的公式只是一个神奇的公式，可以产生漂亮的随机旋转。

您可以通过水平展开来妥协：

```
r1 = $r*( ($objcols-i).to_f+j+k ) * 3 / total_objs 
```

至少可以对主要术语进行分组。

但归根结底，我们谈论的是微型。是否有人需要 3 秒或 10 秒来理解该片段并不重要。这些更重要：

*   表达的*原因*必须是显而易见的。如果从代码本身来看并不明显，那么它需要一个注释来解释它。
*   代码应该易于导航。这表示：
    *   消除/减少重复代码
    *   将您的程序分解为不太小或太大的函数。同样，“太小”和“太大”是主观术语，通常有例外。
    *   用大量评论解释更复杂和更高级的结构（例如大型交互类网络）。

最后，你知道你能做到吗？（至少在 ruby​​ 1.9+ 中）：

```
random_animal = animals.sample 
```

它从 中获取一个随机元素`animals`。

# c# - 运行应用程序时，DataGrid 的行显示为最小化

> ID：10093013
> 
> 赞同：2
> 
> 时间：2012-04-10T16:53:41.957
> 
> 标签：c#, wpf, xaml, height, row

我创建了以下 DataGrid 设计：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:leartWPF" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d"
    x:Class="leartWPF.Window1"
    x:Name="Window"
    Title="Window1"
    Width="640" Height="480">
    <Window.Resources>
        <local:GroupDataSource x:Key="GroupDataSourceDataSource" d:IsDataSource="True"/>
        <DataTemplate x:Key="GroupCellTemplete" >
            <Grid>
                <TextBlock HorizontalAlignment="Center" VerticalAlignment="Center" Text="{Binding }" />
            </Grid>
        </DataTemplate>
    </Window.Resources>

    <Grid x:Name="LayoutRoot" Margin="0" DataContext="{Binding Source={StaticResource GroupDataSourceDataSource}}">
        <DataGrid  Margin="0" HeadersVisibility="None" ItemsSource="{Binding Groups, Mode=OneWay}" AutoGenerateColumns="False">
            <DataGrid.Columns>
                <DataGridTemplateColumn Header="Groups" IsReadOnly="True" CellTemplate="{DynamicResource GroupCellTemplete}"/>
            </DataGrid.Columns>
        </DataGrid>

    </Grid>
</Window> 
```

在 ExpressionBlend 中看起来像这样：

![在此处输入图像描述](../Images/36f47d4e6d703208523a22def0f917ab.png)

但是，当我运行应用程序时，它看起来像这样：

![在此处输入图像描述](../Images/ab6a4fcb8d21e5ba14e36e7b2768e0f8.png)

我做错什么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T16:57:22.917

试试这个：

```
dataGrid.RowHeight = double.NaN; 
```

# c# - 在c#中删除/编辑word office builtindocumentproperties

> ID：10093014
> 
> 赞同：1
> 
> 时间：2012-04-10T16:53:43.690
> 
> 标签：c#, asp.net, reflection, ms-office

请在此代码方面需要您的帮助。我正在用 c# 编写一个代码，它可以清除内置属性的 word 文档，并在提供的地方用提供的替换替换它。基于我在 microsft 支持网站 [http://support.microsoft.com/kb/303296](http://support.microsoft.com/kb/303296)上在线找到的示例，我的代码没问题并且假设可以工作，因为我也没有遇到任何编译错误。但没有做我要求它做的事情，因为我没有得到任何结果。伙计们，如果有人能帮助我解决问题或指出我的错误，我将不胜感激，这样我度过的几周将徒劳无功。谢谢你的帮助。下面是我的代码。

```
 private void execute_Click(object sender, EventArgs e)
        {
             Word.Application wapp; 
             Word.Document dc = new Word.Document() ;
 Object bSaveChanges = false;
           string chosen_file = "";
           chosen_file = openFD.FileName;
           textBox1.Text = (chosen_file);
           var filter = Path.GetExtension(chosen_file);

           object Filename = chosen_file.ToString();
           if (filter == ".doc" || filter == ".docx")
           {
               wapp = new Word.Application();
               wapp.Visible = true;
               docword = wapp.Documents.Add(ref Filename, ref missing, ref missing, ref missing);

               object _BuiltInProperties = docword.BuiltInDocumentProperties;
                Type typeDocBuiltInProps = _BuiltInProperties.GetType();

                 removeproperty(_BuiltInProperties, typeDocBuiltInProps);// pass parameter
                 docword.Close(ref bSaveChanges, ref missing, ref missing);
                 wapp.Quit(ref bSaveChanges, ref missing, ref missing);
           }
  }

 private void removeproperty(object _BuiltInProperties, Type typeDocBuiltInProps)
        {

            string subjectprop = "Subject";
            string subjectValue = "";
            string companyprop = "Company";
            string companyvalue = txtcompany.Text;

             if (clearsubject.Checked == true)
            {
                try
                {
                    Object Subjectprop = typeDocBuiltInProps.InvokeMember("Item", BindingFlags.Default | BindingFlags.GetProperty, null, _BuiltInProperties, new object[] { "Subject" });
                    Type typeSubjectprop = Subjectprop.GetType();

                    typeSubjectprop.InvokeMember("Item", BindingFlags.Default | BindingFlags.SetProperty, null, Subjectprop, new object[] { subjectprop, subjectValue  });

                }
                catch (COMException)
                {

                }

            }

       if (resetcompany.Checked == true)
            {
                try
                {
                  Object Companyprop = typeDocBuiltInProps.InvokeMember("Item", BindingFlags.Default | BindingFlags.GetProperty, null, _BuiltInProperties, new object[] { "Company" });
                    Type typeCompanyprop = Companyprop.GetType();
                    typeCompanyprop.InvokeMember("Item",
                               BindingFlags.Default |
                               BindingFlags.SetProperty,
                               null, Companyprop,
                               new object[] { companyprop, companyvalue });

                }
                 catch (COMException)
                {

                }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:25:51.910

如发现[here](http://bytes.com/topic/c-sharp/answers/757466-c-app-reading-modifying-ms-office-document-meta-data)，您可以按名称更改单词属性，如下所示：

```
void SetWordDocumentPropertyValue(Word.Document document, string propertyName, string propertyValue)
{
  object builtInProperties = document.BuiltInDocumentProperties;
  Type builtInPropertiesType = builtInProperties.GetType();
  object property = builtInPropertiesType.InvokeMember("Item", System.Reflection.BindingFlags.GetProperty, null, builtInProperties, new object[] { propertyName });
  Type propertyType = property.GetType();
  propertyType.InvokeMember("Value", BindingFlags.SetProperty, null, property, new object[] { propertyValue });
  document.UpdateSummaryProperties();
  document.Save();
} 
```

属性名称如`"Author"`, `"Last Author"`,`"Title"`等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T12:30:38.703

1) 添加对 Microsoft.CSharp 的引用。

2) 获取 BuiltInDocumentProperties：

```
private void LoadMetadata(Document Doc) {
  this.Title.Text = Doc.BuiltInDocumentProperties["Title"].Value;
  this.Subject.Text = Doc.BuiltInDocumentProperties["Subject"].Value;
  this.Category.Text = Doc.BuiltInDocumentProperties["Category"].Value;
  this.Keywords.Text = Doc.BuiltInDocumentProperties["Keywords"].Value;
  this.Author.Text = Doc.BuiltInDocumentProperties["Author"].Value;
  this.Comments.Text = Doc.BuiltInDocumentProperties["Comments"].Value;
} 
```

3) 设置新值：

```
private void SaveMetadata(Document Doc) {
  Doc.BuiltInDocumentProperties["Title"].Value = this.Title.Text;
  Doc.BuiltInDocumentProperties["Subject"].Value = this.Subject.Text;
  Doc.BuiltInDocumentProperties["Category"].Value = this.Category.Text;
  Doc.BuiltInDocumentProperties["Keywords"].Value = this.Keywords.Text;
  Doc.BuiltInDocumentProperties["Author"].Value = this.Author.Text;
  Doc.BuiltInDocumentProperties["Comments"].Value = this.Comments.Text;
} 
```

# java - 网络服务：更新 svn commit

> ID：10093017
> 
> 赞同：1
> 
> 时间：2012-04-10T16:54:10.253
> 
> 标签：java, eclipse, web-services, svn, axis2

我正在开发 Axis2 Web 服务，所有源代码都存储在 svn 存储库中。Web 服务正在外部服务器上运行。每次我提交 svn 时是否可以自动更新 Web 服务？如果是，我该怎么做？我使用 Eclipse 作为 IDE。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T17:06:56.940

简而言之：查看[持续集成](http://en.wikipedia.org/wiki/Continuous_integration)。

您还可以通过编写一个简单的 shell 脚本（由 crontab 调度）来实现相同的目标，该脚本将检查 svn 并构建和部署，以防有任何更改。但是有更好的选择可以让您获得更好的可见性，例如。[詹金斯](http://blogs.wandisco.com/2012/01/31/polling-subversion-with-jenkins/)（又名哈德森），CruiseControl。

# css - 为什么我的 Div 不跨越 100% 的宽度？

> ID：10093019
> 
> 赞同：5
> 
> 时间：2012-04-10T16:54:17.430
> 
> 标签：css, html, width

我有一个非常愚蠢的问题要问。

我正在尝试使 div 跨越网页宽度的 100%，但它没有达到。我希望它是动态的（不以 px 为单位指定宽度），我绝对不希望它出现水平滚动条。

我正在尝试制作类似于 Stack Overflow 的 100% 页面宽度“警报”的内容，它会告诉您何时获得新徽章。

我的网站截图： ![我的网站截图。 请注意粉红色横幅和绿色横幅如何在显示天蓝色背景的位置留下空隙。](../Images/ba2e6b67c56f26ab85e2deea23cedb29.png)

粉红色横幅 div 的代码

```
<div width='100%' style="padding:0px; background-color:FF0099; background-image:url('pics/pink_bg.png'); ">
  &nbsp;
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T17:01:12.840

您的**html 正文**标签可能有*填充或边距*css。您应该将它们设置**为零**(0)。我希望它会有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T16:57:03.030

看起来你的身体上有填充物，这阻止了 div 一直扩展。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T17:03:05.693

在您的 css 文件中，确保您的主体上没有任何填充。如果你没有任何东西，你可以尝试添加这个：

```
body {
    padding: 0;
    margin: 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T17:03:42.713

只需为 body 添加一个 css 以删除填充和边距：

```
body {
padding: 0px;
margin: 0px;
} 
```

您也可以仅应用于左、右上边距和下边距：

```
body {
padding-top:0px;
padding-right:0px;
padding-bottom: 10px;
padding-left: 0px;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T17:05:18.190

其实这很容易。确保粉红色横幅 div 的父容器具有 0 填充和 0 边距。在这种情况下，我假设粉红色横幅的容器只是 body 标签。现在将以下代码段复制到页面的 head 部分中。

```
<style type="text/css">
    body
    {
        margin:0px;
        padding:0px;
        }
</style> 
```

粉红色横幅的 html 也不正确。代替

```
<div width='100%' style="padding:0px; background-color:FF0099; background-image:url('pics/pink_bg.png'); ">
  &nbsp;
</div> 
```

和

```
<div style="padding:0px; margin:0px; width=100%; height:25px; background-color:#FF0099; background-image:url('pics/pink_bg.png');" >
  &nbsp;
</div> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-23T03:17:31.717

类型

```
body {
    min-height:100%;
    height:auto;
    margin:0;
    padding:0;
} 
```

在 CSS 文件的开头。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-09T17:08:45.543

我遇到了同样的问题，我的页面右侧有一条很大的白线。我发现以下内容可以挽救生命：

```
html, body {
  width: 100%;
  padding: 0px;
  margin: 0px;
  overflow-x: hidden;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-10T17:18:57.643

我总是输入的每个 CSS 文档的开头：

```
html, body {
    padding: 0;
    margin: 0;
} 
```

我从来没有遇到过不需要的外边距或使用该代码填充的任何问题。

# jquery - Rails 3.1提交表单而不刷新

> ID：10093021
> 
> 赞同：2
> 
> 时间：2012-04-10T16:54:30.287
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我这里有一个表格`orders/_form.html.erb`，我想提交并保存在一个名为 Categories 的表格中

```
<%= simple_form_for(@category) do |f| %>

  <%= f.error_notification %>

  <div class="inputs">

    <%= f.input :name, 

:label => false, 

:input_html => { :class => 'text', 

:style => 'float:left; width:250px' }, 

:placeholder => "Type of item / name of expense",

%>

   <%= f.hidden_field :user_id, 

:value => current_user.id %>

   <%= f.button :submit, 

:value => 'Add Category', 

:class => 'small grey',

:style => 'margin:5px 0 0 10px' %>

  </div>

<% end %> 
```

在我的 categories_controller.rb 我有这个代码来创建类别：

```
# POST /categories

  # POST /categories.json

  def create

    @category = current_user.categories.build(params[:category])

    respond_to do |format|

      if @category.save

        format.html { redirect_to new_order_path }

        format.json { render json: new_order_path, status: :created, location: @category }

      else

        format.html { render action: "new" }

        format.json { render json: @category.errors, status: :unprocessable_entity }

      end

    end

  end 
```

首先，我怎样才能使提交表单时不刷新页面？然后我希望类别下拉列表[http://d.pr/gUwz](http://d.pr/gUwz)也有新条目（我假设使用 JQ）。知道如何让我开始这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:03:59.733

使用 Rails 3.x 你必须使用`:remote => true`表单

前任：

```
<%= form_for @comment, :remote => true, :html => { :'data-type' => 'html', :id => 
 <form code>
<% end %> 
```

并确保包含 jQuery js 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:03:04.760

您应该使用以下方式在表单标签中发送 ajax 请求：

> ：远程=>真

检查有关 for_for 方法的文档：[FormHelper#form_for-instance_method](https://www.rubydoc.info/docs/rails/3.1.1/ActionView/Helpers/FormHelper#form_for-instance_method)

由于 JQuery 默认使用 rails 3.0，因此您应该没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-08T12:21:22.417

需要在表单标签中使用 :remote => true ，这将像 ajax 请求一样提交表单，并且表单将在不刷新页面的情况下提交。

# c++ - VC++ Express 2010 在模板类的重载赋值运算符的自赋值测试中出错

> ID：10093024
> 
> 赞同：0
> 
> 时间：2012-04-10T16:54:42.657
> 
> 标签：c++, overloading, operator-keyword

我正在尝试覆盖赋值运算符并执行自赋值测试，但 VC++ Express 2010 为我的代码提供了以下错误，如下所示：

1>c:\users\fatak\documents\visual studio 2010\projects\ray tracer\ray tracer\test.h(22): 错误 C2440: '==' : 无法从 'const Test *' 转换为 'Test *常量'

```
#ifndef __TEST_H__
#define __TEST_H__

template <class T = unsigned int> class Test
{
public:
Test() : dummy(0U) {};
template <class U> Test(U value) : dummy(T(value)) {};
~Test() {};

template <class U> Test<T> &operator=(const Test<U> &rhs);

T getValue(void) const {return dummy;};

template <class U> friend class Test;
private:
T dummy;
};

template <class T> template <class U> Test<T> &Test<T>::operator=(const Test<U> &rhs)
{
if(this == &rhs)
    return *this;

dummy = T(rhs.dummy);

return *this;
}

#endif //__TEST_H__ 
```

即使我将操作数更改为模板化的覆盖赋值运算符：

```
template <class T> template <class U> Test<T> &Test<T>::operator=(Test<U> & const rhs) 
```

我收到以下错误：

1>c:\users\fatak\documents\visual studio 2010\projects\ray tracer\ray tracer\test.h(22): 错误 C2440: '==' : 无法从 'Test *' 转换为 'Test *const '

知道为什么吗？或者我怎样才能对任何人进行成功的自我分配测试？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:00:40.440

The types `Test<T>` and `Test<U>` are totally different types (unless T is U).

You cannot compare pointers to unrelated types. And they can't be the same anyway, because unrelated types cannot exist at the same address!

* * *

You should probably have one non-template `operator=(const Test<T>&)`, which might test for self-assignment if needed, and one `operator=(const Test<U>&)` which doesn't need the test.

# sql - 在 Oracle INSERT ALL 语句中选择选择列

> ID：10093030
> 
> 赞同：3
> 
> 时间：2012-04-10T16:55:29.570
> 
> 标签：sql, oracle

我正在使用`INSERT ALL`Oracle 中的一条语句将数据插入两个不同的表中。数据来自一个相当复杂的子查询，而不是一个`VALUES`子句。

我的问题是我不想将子查询返回的**所有**列都插入到两个表中。

举个简单的例子，假设我有两个表`tab1`，`tab2`每个表包含三列`col1`,`col2`和`col3`.

`A`现在假设我的子查询返回包含值和`B`的单行`C`。

所以，我想`A`,`B`和分别`C`插入`col1`,`col2`和`col3`,`tab1`但我只想说`A`和`C`进入`col1`和`col3`。`tab2`

我的陈述看起来像这样：

```
INSERT ALL
INTO tab1
  (col1, col2, col3)
INTO tab2
  (col1, ?, col3)
FROM
( ...
 complex subquery which returns A, B, C
  ...
) 
```

有没有办法可以使用某种“填充”或“垃圾栏”来实现我的目标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T17:11:23.667

是的：

```
INSERT ALL
INTO tab1
  (col1, col2, col3) values (a, b, c)
INTO tab2
  (col1, col3) values (a, c)
SELECT a, b, c
FROM
( ...
 complex subquery which returns A, B, C
  ...
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T17:44:33.950

这种语法是可能的

```
INSERT ALL
INTO ap_cust(f1, f2) VALUES (a, d)
INTO ap_orders(f1, f2, f3) VALUES (a, b, c)
SELECT a, b, c,d
FROM table; 
```

见[http://psoug.org/reference/insert.html](http://psoug.org/reference/insert.html)

# jquery - 使用 jquery 选择特定元素

> ID：10093031
> 
> 赞同：1
> 
> 时间：2012-04-10T16:55:36.183
> 
> 标签：jquery, html, jquery-selectors

我有一些html，如下所示：

```
<div class="location">
    <h3><a class="location_name" href="#">Beijing, China</a><a class="arrow">&gt;</a></h3>
        <p class="blogentry">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit</p>
</div> 
```

我希望能够在单击 .location_name 时向下滑动 .blogentry 。我正在使用 jquery 执行以下操作：

```
$(function(){
    $(".location_name").click(function(eventObject){
        $(this).parents(".location").find(".blogentry").slideToggle();
    });
}); 
```

这是最好的方法吗？如果我以不同的方式布局我的html会更好吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T16:57:46.497

```
$(".location_name").click(function(eventObject){
    $(this).parent().siblings('.blogentry').slideToggle();
}); 
```

**[编辑]**对不起，错过了`<a>`被包含在一个`<h3>`调整过的代码中。现在授予它并没有真正增加OP所写的内容。这是我认为`<a>`不需要的情况之一，因为没有 javascript 它不会做任何事情。您也可以只制作`<h3>`可点击的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:12:19.073

你也可以试试这个

```
$(function(){
    $(".location").on('click', '.location_name', function(e){
        e.preventDefault();
        $(this).parent().siblings('p.blogentry').slideToggle();
    });
});​ 
```

**注意：**您应该使用`preventDefault`，否则您的页面将跳到顶部`href='#'`

这是一个[例子](http://jsfiddle.net/heera/zCs2L/4/)，另一个[例子](http://jsfiddle.net/heera/zCs2L/5/)，[这是不同的](http://jsfiddle.net/heera/zCs2L/6/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T17:43:38.373

如果您想更改 HTML 的布局，可以执行以下操作：

```
<div class="location">
        <h3><a class="location_name" href="#">Beijing, China</a><a class="arrow">&gt;</a></h3>
        <div class="blogentry">
        Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit
        </div>
</div> 
```

然后将 jQuery 代码更改为：

```
 $(function(){
    $(".blogentry").hide();
    $(".location h3").click(function(eventObject){
        $(this).next(".blogentry").slideToggle();
    });
}); 
```

不是说这比你现在正在做的更好。但我认为 blogentry 的 jQuery 选择器更容易理解。这也适用于您添加到页面的任何其他位置/博客条目。

这是一个工作示例：[jsbin.com/isorig/7](http://jsbin.com/isorig/7)

# php - 如何获取 youtube 视频详细信息的描述

> ID：10093032
> 
> 赞同：-1
> 
> 时间：2012-04-10T16:55:47.047
> 
> 标签：php, youtube, youtube-api

我有你管视频链接：示例：http://www.youtube.com/watch?v=EF5FnKTsIbc&feature=youtube_gdata_player 我想使用 php 获取此链接的描述和视频标题和图像，怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T05:30:37.817

这是代码，我对其进行了测试并且效果很好。感谢[IBM 开发人员网络](http://www.ibm.com/developerworks/xml/library/x-youtubeapi/)

你可以在这里看到整个代码。 [http://www.ibm.com/developerworks/xml/library/x-youtubeapi/](http://www.ibm.com/developerworks/xml/library/x-youtubeapi/)

* * *

## 用法

```
// For the video >>> youtube.com/watch?v=37l11UzbvvA

// Video id = 37l11UzbvvA;

$vid="37l11UzbvvA";

// set video data feed URL

$feedURL = 'http://gdata.youtube.com/feeds/api/videos/' . $vid;

// read feed into SimpleXML object

$entry = simplexml_load_file($feedURL);

$video = parseVideoEntry($entry);

echo $video->title; 
```

* * *

## 函数 > parseVideoEntry()

```
// function to parse a video <entry>
function parseVideoEntry($entry) {      
  $obj= new stdClass;

  // get author name and feed URL
  $obj->author = $entry->author->name;
  $obj->authorURL = $entry->author->uri;

  // get nodes in media: namespace for media information
  $media = $entry->children('http://search.yahoo.com/mrss/');
  $obj->title = $media->group->title;
  $obj->description = $media->group->description;

  // get video player URL
  $attrs = $media->group->player->attributes();
  $obj->watchURL = $attrs['url']; 

  // get video thumbnail
  $attrs = $media->group->thumbnail[0]->attributes();
  $obj->thumbnailURL = $attrs['url']; 

  // get <yt:duration> node for video length
  $yt = $media->children('http://gdata.youtube.com/schemas/2007');
  $attrs = $yt->duration->attributes();
  $obj->length = $attrs['seconds']; 

  // get <yt:stats> node for viewer statistics
  $yt = $entry->children('http://gdata.youtube.com/schemas/2007');
  $attrs = $yt->statistics->attributes();
  $obj->viewCount = $attrs['viewCount']; 

  // get <gd:rating> node for video ratings
  $gd = $entry->children('http://schemas.google.com/g/2005'); 
  if ($gd->rating) { 
    $attrs = $gd->rating->attributes();
    $obj->rating = $attrs['average']; 
  } else {
    $obj->rating = 0;         
  }

  // get <gd:comments> node for video comments
  $gd = $entry->children('http://schemas.google.com/g/2005');
  if ($gd->comments->feedLink) { 
    $attrs = $gd->comments->feedLink->attributes();
    $obj->commentsURL = $attrs['href']; 
    $obj->commentsCount = $attrs['countHint']; 
  }

  // get feed URL for video responses
  $entry->registerXPathNamespace('feed', 'http://www.w3.org/2005/Atom');
  $nodeset = $entry->xpath("feed:link[@rel='http://gdata.youtube.com/
  schemas/2007#video.responses']"); 
  if (count($nodeset) > 0) {
    $obj->responsesURL = $nodeset[0]['href'];      
  }

  // get feed URL for related videos
  $entry->registerXPathNamespace('feed', 'http://www.w3.org/2005/Atom');
  $nodeset = $entry->xpath("feed:link[@rel='http://gdata.youtube.com/
  schemas/2007#video.related']"); 
  if (count($nodeset) > 0) {
    $obj->relatedURL = $nodeset[0]['href'];      
  }

  // return object to caller  
  return $obj;      
} 
```

正如***Lothar***所通知的，这是 Json 链接，您可以使用 json_decode 轻松解析此 JSON 数据

> 注意：json_decode 函数适用于 PHP>=5.2.0

```
http://gdata.youtube.com/feeds/api/videos/[VIDEO_ID]?v=2&alt=jsonc 
```

例如

```
http://gdata.youtube.com/feeds/api/videos/37l11UzbvvA?v=2&alt=jsonc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T17:17:30.477

下面的代码是从我的脚本中直接复制粘贴的。不确定它是否仍然有效。你可以试一试。

```
<?php
$id = '38z8TPtT1BE';
$url = "http://gdata.youtube.com/feeds/api/videos/$id?v=2&alt=json";
$ch = curl_init(); 
curl_setopt($ch, CURLOPT_URL, $url); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);  
$output = curl_exec($ch); 
curl_close($ch);  
print_r(json_decode($output));
?> 
```

Youtube APIs 文档是你的圣经。你会在那里得到你想要的一切。该链接是@ceejayoz 在评论部分提供的。

PS：欢迎来到SO，下次有什么问题，把你已经做过的贴上来。这里的人肯定会帮助你。

# asp.net-mvc - 更新有另一个类的类

> ID：10093043
> 
> 赞同：0
> 
> 时间：2012-04-10T16:56:16.013
> 
> 标签：asp.net-mvc, entity-framework-4

我有一个产品类：

```
public class Product
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int Amount { get; set; }

    public virtual Brand Brand { get; set; }
} 
```

我正在尝试更新模型：

```
[HttpPost]
public ActionResult Edit(Product product) 
{
    if (ModelState.IsValid) 
    {
        product.Brand = db.Brands.Find(product.Brand.Id);

        db.Entry(product).State = EntityState.Modified;
        db.SaveChanges();

        return RedirectToAction("Index");
    }
    return View(product);
} 
```

问题是我所有的属性都更新了，但是品牌！我该怎么做才能更新它？

* * *

如果我做：

```
[HttpPost]
public ActionResult Edit(Product product) 
{
     if (ModelState.IsValid)  
     {
          db.Products.Attach(product);

          product.Brand = db
              .Brands
              .Find(2); // << with a static value

          db.Entry(product).State = EntityState.Modified;

          db.SaveChanges();

          return RedirectToAction("Index");
      }
      return View(product);
 } 
```

它有效......但如果我在下面尝试这个，即使 BrandId 是 2，它也不起作用：

```
 [HttpPost]
    public ActionResult Edit(Product product) 
    {
        if (ModelState.IsValid)  
        {
            db.Products.Attach(product);

            int BrandId = product.Brand.Id;

            product.Brand = db
                .Brands
                .Find(BrandId);

            db.Entry(product).State = EntityState.Modified;

            db.SaveChanges();

            return RedirectToAction("Index");
        }
        return View(product);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:04:32.097

`Product`您必须分别处理更新和之间的关系`Brand`。手动将状态设置为 不会影响该关系`Modified`。首先从数据库中加载（连同产品）尤为重要`Brand`，否则 EF 无法检测到关系是否发生了变化：

```
[HttpPost]
public ActionResult Edit(Product product) 
{
    if (ModelState.IsValid) 
    {
        var productInDB = db.Products.Include(p => p.Brand)
            .Single(p => p.Id == product.Id);

        // Update scalar properties
        db.Entry(productInDB).CurrentValues.SetValues(product);

        // Update relationship between product and brand
        if (product.Brand == null && productInDB.Brand != null)
            productInDB.Brand = null;
        else if (product.Brand != null && (productInDB.Brand == null
            || product.Brand.Id != productInDB.Brand.Id))
        {
            db.Brands.Attach(product.Brand);
            productInDB.Brand = product.Brand;
        }

        db.SaveChanges();

        return RedirectToAction("Index");
    }
    return View(product);
} 
```

`BrandId`如果您在`Product`实体中引入外键属性并将其设置`product.BrandId`在视图中而不是`product.Brand.Id`. 在这种情况下，将状态设置为`Modified`会起作用，因为`BrandId`它是一个标量属性。

# visual-studio - 从以前的版本开发或使用 Team Foundation Server 构建

> ID：10093046
> 
> 赞同：0
> 
> 时间：2012-04-10T16:56:18.457
> 
> 标签：visual-studio, visual-studio-2010, build, version

您好，感谢您的宝贵时间。

我与一个小型开发小组合作，我们正在开发一个使用 Visual Studio 2010 上的 Team Foundation Server 的项目。

我们想知道我们必须使用什么来返回并使用以前的版本或项目构建。

我们可以使用 TFS 版本控制、TFS 构建服务器或 TFS 源代码控制吗？？？我怎样才能做到这一点？？？

这有帮助吗？--> [tf rollback](http://social.msdn.microsoft.com/Forums/en-US/tfsversioncontrol/thread/4ae0b115-a484-406b-bd04-ca390a35205a) 非常感谢各位四位的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:50:00.177

例如，如果您想获取某个目录的先前版本，请在源代码管理资源管理器中右键单击该目录，然后选择“获取特定版本...”，然后选择您想要获取的版本的方式。

通常，您必须提供较旧的变更集 ID，然后将在本地检索其版本。

tf rollback 用于通过创建另一个否定更改的更改集来“取消”给定的更改集（更改集是签入操作的结果）。因此，当您对某些文件进行了错误的签入并且想要恢复到以前的状态时，就会使用它。

# jquery - jQuery获取选择选项的OPTGROUP标签

> ID：10093048
> 
> 赞同：27
> 
> 时间：2012-04-10T16:56:24.480
> 
> 标签：jquery, html, html-select

我正在尝试在选择控件中查找当前所选选项的 optgroup 标签的值。下面是一些 html 来显示我想要做什么。

```
<select id='sector_select' name='sector_select' data-placeholder="Select Sector..." style="width:200px;" class="chzn-select">    
    <option value='' selected='selected'>All Sectors</a>
    <optgroup label="Consultancy Services">
        <option value='Employment placement/ recruitment'>Employment placement/ recruitment</option>
    </optgroup>
    <optgroup label="Supplies">
        <option value='Food, beverages and related products'>Food, beverages and related products</option>
    </optgroup>                
 </select>
<script type="text/javascript">
$('#sector_select').change(function ()
{
    var label=$('sector_select :selected').parent().attr('label');
    console.log(label);
});    
</script> 
```

上面的代码给出了 undefined ，因为它读取了 select 元素而不是 option 的父级。有任何想法吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-04-10T16:57:14.483

您缺少[ID 选择器](http://api.jquery.com/id-selector/)`#`中的。

```
$('#sector_select').change(function ()
{
    //           ↓
    var label=$('#sector_select :selected').parent().attr('label');
    console.log(label);
}); 
```

你也有一个虚假的`</a>`标签

```
<option value='' selected='selected'>All Sectors</a> 
```

风格可以使用一些改进，之后：

```
$('#sector_select').on('change', function ()
{
    var label = $(this.options[this.selectedIndex]).closest('optgroup').prop('label');
    console.log(label);
}); 
```

这仍将记录`undefined`which`<option>`不在`<optgroup>`; 你如何处理这种情况取决于你。演示：http: [//jsfiddle.net/mattball/fyLJm/](http://jsfiddle.net/mattball/fyLJm/)

* * *

> 只是想知道您是否可以编写一个函数，该函数采用任何选择元素 id 并返回所选项目的 optgroup 标签。'this' 在 $() 中让我感到困惑。我可以在 onchange 事件之外使用的功能

```
function logOptgroupLabel(id)
{
    var elt = $('#'+id)[0];
    var label = $(elt.options[elt.selectedIndex]).closest('optgroup').prop('label');
    console.log(label);
}

$('#sector_select').on('change', function () {
    logOptgroupLabel(this.id);
});​ 
```

# visual-studio-2008 - VS 2008 数据集在 GUI 设计器模式下不可见

> ID：10093049
> 
> 赞同：0
> 
> 时间：2012-04-10T16:56:26.590
> 
> 标签：visual-studio-2008, web-applications, strongly-typed-dataset

突然我发现我的 VS2008 停止在 GUI 设计器模式下查看数据集（只是 xml 脚本）。我确实卸载并安装了 VS，但没有任何变化，也没有错误消息..！任何想法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:50:46.593

没问题！，我会自己回答我的问题！在“谷歌搜索”之后，我在 [这里](http://forums.asp.net/t/1703949.aspx/1?DataSet%20file%20does%20not%20show%20in%20designer%20mode)找到了答案：

在 Visual Studio 工具 -> Visual Studio 2008 命令提示符中，输入 devenv /setup。谢谢。

# javascript - 访问控制请求标头，使用 jQuery 添加到 AJAX 请求的标头中

> ID：10093053
> 
> 赞同：441
> 
> 时间：2012-04-10T16:56:40.890
> 
> 标签：javascript, jquery, ajax, post, http-headers

我想将自定义标头添加到来自 jQuery 的 AJAX POST 请求。

我试过这个：

```
$.ajax({
    type: 'POST',
    url: url,
    headers: {
        "My-First-Header":"first value",
        "My-Second-Header":"second value"
    }
    //OR
    //beforeSend: function(xhr) { 
    //  xhr.setRequestHeader("My-First-Header", "first value"); 
    //  xhr.setRequestHeader("My-Second-Header", "second value"); 
    //}
}).done(function(data) { 
    alert(data);
}); 
```

当我发送此请求并使用 FireBug 观看时，我看到了以下标头：

> 选项 xxxx/yyyy HTTP/1.1
> 主机：127.0.0.1:6666
> 用户代理：Mozilla/5.0 (Windows NT 6.1; WOW64; rv:11.0) Gecko/20100101 Firefox/11.0
> 接受：text/html,application/xhtml+xml, application/xml;q=0.9, */* ;q=0.8
> Accept-Language: fr,fr-fr;q=0.8,en-us;q=0.5,en;q=0.3
> Accept-Encoding: gzip, deflate
> 连接: keep -alive
> 来源：null
> 访问控制请求方法：POST
> **访问控制请求标头：my-first-header，my-second-header**
> 编译指示：无缓存
> 缓存控制：无缓存

为什么我的自定义标题转到`Access-Control-Request-Headers`：

> 访问控制请求标头：我的第一个标头，我的第二个标头

我期待这样的标题值：

> My-First-Header：第一个值
> My-Second-Header：第二个值

是否可以？

* * *

## 回答 #1

> 赞同：465
> 
> 时间：2012-11-22T15:02:59.283

这是一个如何在 jQuery Ajax 调用中设置请求标头的示例：

```
$.ajax({
  type: "POST",
  beforeSend: function(request) {
    request.setRequestHeader("Authority", authorizationToken);
  },
  url: "entities",
  data: "json=" + escape(JSON.stringify(createRequestObject)),
  processData: false,
  success: function(msg) {
    $("#results").append("The result =" + StringifyPretty(msg));
  }
}); 
```

* * *

## 回答 #2

> 赞同：197
> 
> 时间：2014-11-14T12:45:18.660

下面的代码对我有用。我总是只使用单引号，而且效果很好。我建议你应该只使用单引号*或*只使用双引号，但不要混淆。

```
$.ajax({
    url: 'YourRestEndPoint',
    headers: {
        'Authorization':'Basic xxxxxxxxxxxxx',
        'X-CSRF-TOKEN':'xxxxxxxxxxxxxxxxxxxx',
        'Content-Type':'application/json'
    },
    method: 'POST',
    dataType: 'json',
    data: YourData,
    success: function(data){
      console.log('succes: '+data);
    }
  }); 
```

* * *

## 回答 #3

> 赞同：140
> 
> 时间：2012-09-10T03:44:33.670

您在 Firefox 中看到的并不是实际的请求。请注意，HTTP 方法是 OPTIONS，而不是 POST。它实际上是浏览器发出的“飞行前”请求，以确定是否应允许跨域 AJAX 请求：

[http://www.w3.org/TR/cors/](http://www.w3.org/TR/cors/)

飞行前请求中的 Access-Control-Request-Headers 标头包括实际请求中的标头列表。然后，在浏览器提交实际请求之前，服务器应报告此上下文中是否支持这些标头。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2019-04-09T04:03:47.203

因为您发送自定义标头所以您的 CORS 请求***[不是一个简单的请求](https://en.wikipedia.org/wiki/Cross-origin_resource_sharing#How_CORS_works)***，所以浏览器首先发送一个预检 OPTIONS 请求以检查服务器是否允许您的请求。

[![在此处输入图像描述](../Images/65381a4b3e581285ffa07b4cd942a9d3.png)](https://i.stack.imgur.com/BTFel.png)

如果您在服务器上打开 CORS，那么您的代码将起作用。您也可以改用 JavaScript fetch（[此处](https://stackoverflow.com/questions/7686827/how-can-i-add-a-custom-http-header-to-ajax-request-with-js-or-jquery/55584830#55584830)）

```
let url='https://server.test-cors.org/server?enable=true&status=200&methods=POST&headers=My-First-Header,My-Second-Header';

$.ajax({
    type: 'POST',
    url: url,
    headers: {
        "My-First-Header":"first value",
        "My-Second-Header":"second value"
    }
}).done(function(data) {
    alert(data[0].request.httpMethod + ' was send - open chrome console> network to see it');
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
```

这是一个在 nginx 上打开**CORS**的示例配置（nginx.conf 文件）：

```
location ~ ^/index\.php(/|$) {
   ...
    add_header 'Access-Control-Allow-Origin' "$http_origin" always;
    add_header 'Access-Control-Allow-Credentials' 'true' always;
    if ($request_method = OPTIONS) {
        add_header 'Access-Control-Allow-Origin' "$http_origin"; # DO NOT remove THIS LINES (doubled with outside 'if' above)
        add_header 'Access-Control-Allow-Credentials' 'true';
        add_header 'Access-Control-Max-Age' 1728000; # cache preflight value for 20 days
        add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';
        add_header 'Access-Control-Allow-Headers' 'My-First-Header,My-Second-Header,Authorization,Content-Type,Accept,Origin';
        add_header 'Content-Length' 0;
        add_header 'Content-Type' 'text/plain charset=UTF-8';
        return 204;
    }
}
```

这是在 Apache 上打开**CORS**的示例配置（.htaccess 文件）

```
# ------------------------------------------------------------------------------
# | Cross-domain Ajax requests                                                 |
# ------------------------------------------------------------------------------

# Enable cross-origin Ajax requests.
# http://code.google.com/p/html5security/wiki/CrossOriginRequestSecurity
# http://enable-cors.org/

# <IfModule mod_headers.c>
#    Header set Access-Control-Allow-Origin "*"
# </IfModule>

#Header set Access-Control-Allow-Origin "http://example.com:3000"
#Header always set Access-Control-Allow-Credentials "true"

Header set Access-Control-Allow-Origin "*"
Header always set Access-Control-Allow-Methods "POST, GET, OPTIONS, DELETE, PUT"
Header always set Access-Control-Allow-Headers "My-First-Header,My-Second-Header,Authorization, content-type, csrf-token"
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-05-03T10:31:52.123

这就是为什么您不能使用 JavaScript 创建机器人的原因，因为您的选择仅限于浏览器允许您执行的操作。您不能只订购遵循大多数浏览器遵循的 [CORS](https://en.wikipedia.org/wiki/Cross-origin_resource_sharing)政策的浏览器，将随机请求发送到其他来源并让您获得简单的响应！

此外，如果您尝试手动编辑某些请求标头，例如`origin-header`使用浏览器附带的开发人员工具，浏览器将拒绝您的编辑并可能发送预检`OPTIONS`请求。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-13T11:47:14.473

尝试添加`'Content-Type':'application/json'`：

```
 $.ajax({
        type: 'POST',
        url: url,
        headers: {
            'Content-Type':'application/json'
        }
        //OR
        //beforeSend: function(xhr) {
        //  xhr.setRequestHeader("My-First-Header", "first value");
        //  xhr.setRequestHeader("My-Second-Header", "second value");
        //}
    }).done(function(data) {
        alert(data);
    }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-25T10:16:58.653

从客户端，我无法解决这个问题。

在[Node.js](https://en.wikipedia.org/wiki/Node.js)和[Express.js](https://en.wikipedia.org/wiki/Express.js)方面，您可以使用*cors*模块来处理它。

```
var express    = require('express');
var app        = express();
var bodyParser = require('body-parser');
var cors       = require('cors');

var port = 3000;
var ip = '127.0.0.1';

app.use('*/myapi',
        cors(), // With this row OPTIONS has handled
        bodyParser.text({type: 'text/*'}),
        function(req, res, next) {
            console.log('\n.----------------' + req.method + '------------------------');
            console.log('| prot:' + req.protocol);
            console.log('| host:' + req.get('host'));
            console.log('| URL:' + req.originalUrl);
            console.log('| body:', req.body);
            //console.log('| req:', req);
            console.log('.----------------' + req.method + '------------------------');
            next();
        });

app.listen(port, ip, function() {
    console.log('Listening to port:  ' + port);
});

console.log(('dir:' + __dirname));
console.log('The server is up and running at http://' + ip + ':' + port + '/'); 
```

如果没有 cors()，这些 OPTIONS 必须出现在 POST 之前。

```
.----------------OPTIONS------------------------
| prot:http
| host:localhost:3000
| url:/myapi
| body: {}
.----------------OPTIONS------------------------

.----------------POST------------------------
| prot:http
| host:localhost:3000
| url:/myapi
| body: <SOAP-ENV:Envelope .. P-ENV:Envelope>
.----------------POST------------------------ 
```

阿贾克斯调用：

```
$.ajax({
    type: 'POST',
    contentType: "text/xml; charset=utf-8",

    //These does not work
    //beforeSend: function(request) {
    //  request.setRequestHeader('Content-Type', 'text/xml; charset=utf-8');
    //  request.setRequestHeader('Accept', 'application/vnd.realtime247.sct-giro-v1+cms');
    //  request.setRequestHeader('Access-Control-Allow-Origin', '*');
    //  request.setRequestHeader('Access-Control-Allow-Methods', 'POST, GET');
    //  request.setRequestHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type');
    //},
    //headers: {
    //  'Content-Type': 'text/xml; charset=utf-8',
    //  'Accept': 'application/vnd.realtime247.sct-giro-v1+cms',
    //  'Access-Control-Allow-Origin': '*',
    //  'Access-Control-Allow-Methods': 'POST, GET',
    //  'Access-Control-Allow-Headers': 'Origin, X-Requested-With, Content-Type'
    //},
    url: 'http://localhost:3000/myapi',
    data: '<SOAP-ENV:Envelope .. P-ENV:Envelope>',
    success: function(data) {
      console.log(data.documentElement.innerHTML);
    },
    error: function(jqXHR, textStatus, err) {
      console.log(jqXHR, '\n', textStatus, '\n', err)
    }
  }); 
```

* * *

## 回答 #8

> 赞同：-11
> 
> 时间：2016-07-06T23:30:41.217

尝试使用[rack-cors](https://github.com/cyu/rack-cors) gem。并在您的 Ajax 调用中添加标题字段。

# java - JDBM的headMap

> ID：10093059
> 
> 赞同：0
> 
> 时间：2012-04-10T16:57:11.360
> 
> 标签：java, persistent-storage

我想将 JDBM 用于相当大的 treeMap（如果不是几 TB，则为几百 GB）。创建后，我将大量使用它来回答 headMap 查询。显然，答案 headMap 将很大（平均为已创建数据库的一半），但我只需要 hashMap 中的前几百个元组。我想 JDBM 不会尝试为 headMap 创建内存对象，对吧？我的任务是否有更好的工具（Berkley DB 除外）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:49:53.603

JDBM2 和 JDBM3 不会在内存中为树子图创建。子图的开销非常小。我在自己的应用程序中使用子图，效果很好。唯一的问题是'size()'，在子图上它遍历所有子图记录来计算它们。

我建议使用 JDBM3，因为它可能“足够稳定”并且它最近实现了“ConcurrentNavigableMap”

# python - Django使用url仅获取带有参数的命名视图的url部分

> ID：10093073
> 
> 赞同：1
> 
> 时间：2012-04-10T16:57:55.420
> 
> 标签：python, django, dry, django-urls

我想使用 {% url %} 标记来获取带有参数的命名视图的 url。

我想获取不带参数的 URL，然后使用 javascript 传递参数。所以我不知道模板渲染时参数的值！如果我尝试不带参数的 url，那么它会显示“找不到反向”......我知道我可以在我的 javcascript 代码中硬编码 url，但这不是 DRY ！！！

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:08:04.130

当我过去必须这样做时，我使用了参数的哨兵值，即我知道永远不会真正传递的参数，并在 Javascript 中使用正则表达式将其替换为真实值。

```
{% url my_view "anobviouslyfakeparameter1" "anotherparamthatwillneverhappenforreal" %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:07:57.003

您可以尝试以下方法：

```
url(r'^test/(\d+)/$', 'test_view', name='test-view'),
url(r'^test/$', 'test_view', name='test-view'), 
```

如果未提供参数，则返回 404（以防有人实际访问此 uri）。

# ruby-on-rails - 使用 rails 3.2 在 CSS 中显示背景图像时出现 404

> ID：10093077
> 
> 赞同：1
> 
> 时间：2012-04-10T16:58:02.207
> 
> 标签：ruby-on-rails, css, asset-pipeline

我在 rails 3.2 应用程序中手动添加了 assets/images 目录并添加了图像 background.png 。当引用来自 css 的图像时

`background: url("assets/background.png") no-repeat;`

我得到一个 404 ，但是 assets/stylesheets 和 assets/javascripts 出现了。

**更新

似乎我恢复到显式调用样式表，即

```
<%=stylesheet_link_tag "home.css"%> 
```

代替

```
<%=stylesheet_link_tag "application" %> 
```

背景图像正确还原

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T16:59:28.423

该 url 相对于样式表所在的位置。您可能希望`url(../assets/background.png)`从样式表上一层或`url(/assets/background.png)`从根开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:18:03.467

利用：

```
url(<%= asset_path 'background.png' %>) 
```

你会没事的。

# performance - 4 浮点颜色比 4 字节颜色快吗？

> ID：10093083
> 
> 赞同：0
> 
> 时间：2012-04-10T16:58:20.890
> 
> 标签：performance, caching, graphics

假设我正在定义一个顶点结构。我可以通过将顶点的 RGBA 颜色打包成一个无符号整数来保持顶点结构很小。因此：

```
struct Vertex
{
    float pos[3];
    float normal[3];
    float texcoord[2];
    unsigned int color;    // RGBA
}; 
```

然而，当顶点到达我的顶点着色器时，它将被转换为 4 浮点值：GLSL 中的 vec4 或 HLSL 中的 float4。大概这种类型转换在 GPU 上需要一些时间。

因此将顶点的颜色属性定义为 4 浮点数会更快，从而避免转换吗？

```
...
float color[4];
... 
```

还是这种颜色的较大内存大小会降低 GPU 缓存的效率并导致渲染*速度变慢？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T17:44:47.310

现代 GPU 具有专用硬件，用于在加载时解压缩打包格式，因此转换实际上是免费的。减少的内存带宽要求和更有效的顶点缓存使用将提高性能，因此通常您应该尽可能紧密地打包所有顶点属性，同时仍为您的目的保持足够的精度。

# mysql - MySQL FULLTEXT 是部分单词的最佳解决方案吗？

> ID：10093086
> 
> 赞同：1
> 
> 时间：2012-04-10T16:58:36.250
> 
> 标签：mysql, partial, full-text-search

我有一个 MySQL MyISAM 表，其中包含描述机场的条目。此表包含 3 个 varchar 列 - 代码、名称和标签。

code 是指机场的代码（如 JFK 和 ORD），name 是指机场的名称（John F Kennedy 和 O'Hare），标签指定与机场相关联的标签的分号分隔列表（如 NYC;New York ; 和芝加哥;)。

我需要能够通过代码、名称或标签来查找机场（用于自动完成），因此我在（代码、名称、标签）上设置了 FULLTEXT 索引。

到目前为止，我遇到了 FULLTEXT 的两个问题，使我无法使用它：
1\. 无法进行部分匹配 - 只有后缀匹配（这是真的吗？）
2\. 当在要匹配的术语，匹配的工作方式不同。我假设这个时期正在以一种特殊的方式被解析。例如，在 NYC 上进行 FULLTEXT 搜索不会返回 JFK，尽管在 New York 上进行相同的搜索会

有没有办法克服这些障碍？否则，我应该寻找`like`匹配，还是完全不同的存储引擎？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:16:41.723

我想出的最佳解决方案是同时使用 FULLTEXT 和类似匹配，并使用 UNION 作为结果。

# java - 从 JVM 线程本地空间卸载 Clojure 变量

> ID：10093087
> 
> 赞同：3
> 
> 时间：2012-04-10T16:58:43.950
> 
> 标签：java, memory-leaks, clojure

我正在 Clojure 中为 BaseX 编写一个插件，通过“lein uberjar”构建，其中包含 Clojure 解释器。在大多数情况下，这很好用。

然而——当通过 BaseX HTTP 实例运行时，评估发生在 Jetty 的线程池中，而不是在客户端断开连接后丢弃线程。

由于加载插件通过自定义类加载器加载 Clojure 的类，并且丢弃充当插件入口点的（AOT 编译的）对象实例不会丢弃 Clojure 在线程本地空间中放置的变量，因此 PermGen 会导致类加载器泄漏Clojure 解释器的多个实例最终耗尽了空间。

如何解决？如有必要，我可以对 BaseX 的模块加载/卸载机制进行合理的非 Clojure 特定更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:50:09.830

这个想法可能（或可能不会）有效：

1.  不要制作 uberjar，将 Clojure jar 分开；

2.  通过将 Clojure jar 放入 BaseX 的主类路径中，将 Clojure jar 向上推送到类加载器层次结构中（编辑启动 BasexX 服务器的命令行，类似于`java -cp BaseX.jar;clojure.jar org.basex.BaseXServer`）；

3.  将您的插件打包为一个 jar，其中仅包含您的代码，并依赖于主类路径中已经存在的 Clojure 类。

# machine-learning - 交叉验证是用来寻找最佳模型/架构还是模型/架构的最佳参数？

> ID：10093090
> 
> 赞同：1
> 
> 时间：2012-04-10T16:59:06.740
> 
> 标签：machine-learning

在我看来，交叉验证用于通过使用尽可能多的数据来比较模型。例如，它可用于比较同一问题的感知器神经网络和决策树。或者它可以用于研究特定问题的神经网络的神经元数量。这里是关于比较模型/架构的。

尽管如此，在我看来，交叉验证似乎并不适合找到神经网络的最佳权重，因为在每一轮交叉验证中，权重都会重新初始化。

你能证实我的观点吗？交叉验证仅用于比较模型/架构，不适合找到这些模型/架构的最佳参数？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:08:45.707

你有正确的想法，是的。

通常，您使用交叉验证来估计未见数据的准确性。此估计可帮助您选择合适的模型类型/参数等。

一旦决定了模型配置，就可以在整个数据集上训练模型。（请始终牢记，整个数据集的训练误差并不是对未见数据误差的良好估计。）

# c++ - C++派生类是抽象错误

> ID：10093091
> 
> 赞同：1
> 
> 时间：2012-04-10T16:59:06.893
> 
> 标签：c++, inheritance, virtual, abstract-class

我在派生类是抽象的 Dialin 的地方遇到了麻烦。我不确定为什么，因为我拥有的唯一虚函数具有相同的参数和相同的返回类型。根据我的阅读，这是唯一的限制，但显然我错了。

这是我的代码：

标题：

```
class Event{
    class ModemSimV2;

public:
    Event( );
    Event( const Event &e );
    ~Event( );

    virtual void process( ModemSimV2 &m ) = 0;

protected:
    int who;        // the number of the user
    int time;       // when the event will occur
    int what;       // DIAL_IN or HANGUP
};

 class Dialin : public Event{
     class ModemSimV2;
 public:
     Dialin( int name = 0, int tm = 0 );
     Dialin( const Dialin &d );
     ~Dialin( );

     virtual void process( ModemSimV2 &m );

 private:
     int who;
     int time;
     int what;
 }; 
```

* * *

来源：

```
Event::Event(){
}

Event::Event( const Event &e ) {
    *this = e;
}

Event::~Event( ) {
}

Dialin::Dialin (int name, int tm )
: time( tm ), who( name ) { 
    return;
}

Dialin::Dialin ( const Dialin &d ) {
    *this = d;
}

Dialin::~Dialin( ) {
}

void Dialin::process( ModemSimV2 &m ) {        
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T17:07:15.597

问题是一个名为 的类有两种不同的前向声明`ModemSimV2`：

```
Event::ModemSimV2          // These are different classes
Dialin::ModemSimV2         // with the same unqualified name. 
```

在`Event`中，签名`process()`为：

```
virtual void process( Event::ModemSimV2 &m ) = 0; 
```

在`Dialin`定义中`process()`实际上是：

```
virtual void process( Dialin::ModemSimV2 &m ); 
```

所以声明的纯虚函数`Event`没有在`Dialin`.

# java - 如何以编程方式将图像添加到 Android PopupMenu()？

> ID：10093092
> 
> 赞同：3
> 
> 时间：2012-04-10T16:59:20.237
> 
> 标签：java, android, menu, popup

我想为弹出菜单中的每个项目添加缩略图。我能够动态创建菜单并添加文本项目，我将如何添加图像，你能提供一个例子或指导我一些资源吗？

我想在不使用 xml 的情况下做到这一点，就像我在下面所做的那样。

示例代码...

```
popupMenu = new PopupMenu(VideoPlayer.this, v); 
   if(bitRates != null){
       int menuItem = 0;
       popupMenu.getMenu().add(0,menuItem, 0,"Hide menu");
          for(int i=1;i<bitRates.size();i++){
              menuItem = i;
              popupMenu.getMenu().add(0,menuItem, 0,qualityList.get(i)+" : "+bitRates.get(i));
              Log.i("ITEM",qualityList.get(i)+" : "+bitRates.get(i));

          }
          popupMenu.getMenu().add(0,menuItem++, 0,"Back to home");

      }
  popupMenu.show(); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:34:28.527

鉴于这个其他[答案](https://stackoverflow.com/questions/6271942/how-to-create-a-custom-popup-menu)，它似乎必须使用[Dialogs](https://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog)来完成。

# java - 查找调用库的类的类路径

> ID：10093099
> 
> 赞同：0
> 
> 时间：2012-04-10T17:00:10.077
> 
> 标签：java, classloader, reflections

我正在开发的 java 库中使用 google [Reflections](http://code.google.com/p/reflections/)。我使用 Reflections 的原因是因为我想找到所有带有特定注释的类。简化事情，在我的库中，我有一个回答这些类的方法，它通过如下行调用：

```
//this method uses the Reflections library
Repository.getDefault().getMyAnnotatedClasses() 
```

在我的库的当前版本中，我要求用户在反射库需要查找带注释的类的位置显式添加包名称：

```
Repository.getDefault().addSearchPath("..."); 
```

通过这种方式，反射将查找仅位于该包中的类。

如果我的库的用户没有添加此搜索路径，我将反射配置为在系统类加载器中的所有类中搜索。显然，这种解决方案效率很低。但是，我真的想摆脱要求用户始终设置搜索路径的要求。- 如果它很重要，请注意：在反射中，您可以使用包名称、url（可以找到类的类路径）或类加载器配置搜索路径。

所以我的问题是：有没有办法找到调用我的库的类的类路径？（来自我的图书馆代码）。这样，我可以检测到如果用户没有明确设置搜索位置，我会默认添加该位置，这似乎比添加整个系统类加载器作为替代搜索路径更好的解决方案。

我知道我可以从我的库代码中手动检查方法调用堆栈，但这似乎有点笨拙和肮脏的解决方案，所以我正在寻找替代的想法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:05:19.873

您可以通过分析堆栈跟踪找到方法的调用者。虽然一般恕我直言不是一个好主意，因为它破坏了封装并且对托管环境（代理等）敏感，但它会起作用。多看[这个问题](https://stackoverflow.com/questions/421280/in-java-how-do-i-find-the-caller-of-a-method-using-stacktrace-or-reflection)。

您还可以做什么，并**避免**每次扫描所有类路径的低效率，是在编译时使用反射扫描并保存一次，而不是在引导时收集它。

扫描并保存为 XML 一次：

```
new Reflections(...).save([somepath]); 
```

而不是收集而不扫描：

```
Reflections reflections = Reflections.collect([somepath]); 
```

如果您使用的是 Maven，您可以使用 Reflections-Maven 插件将其自动化并作为每个构建的一部分。

在 Reflections [UseCases Wiki 页面中](https://code.google.com/p/reflections/wiki/UseCases)**收集预扫描元数据**的更多信息

# vim - 在 vim 中，如何将所有现有缩进修改为 2？

> ID：10093101
> 
> 赞同：2
> 
> 时间：2012-04-10T17:00:18.583
> 
> 标签：vim

在 vim 中，我设置了 shiftwidth=2，但我之前的所有缩进仍然是默认的 8。如何将之前的缩进从 8 更改为 2？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T17:05:40.747

您可以使用 重新缩进整个文件`gg=G`。`gg`转到第一行，`=`缩进（采取运动），`G`转到最后一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:21:11.647

如果你正在使用`set expandtab`（就像你*应该*的那样），你可以修改文件中的缩进

```
:%s/^ */  / 
```

这些设置会影响如何进行更改，但它们本身并不会对文件进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T01:47:46.163

如果您的原始缩进是使用硬制表位实现的，那么您可以做的一个技巧就是这个。将硬制表位设置为 2：

```
:set ts=2 
```

现在您有了两个空格的缩进（但使用硬制表符实现）。

现在，做

```
:retab 8 
```

这意味着，粗略地，将硬制表符大小更改为 8（就像 by`:set ts=8`一样），但同时编辑缓冲区中的所有制表符，以便缩进的外观不会改变。

所以现在缓冲区仍然缩进两个空格，但现在`:ts`又回到了 8。

如果你已经`:expandtab`设置，那么缩进现在是所有空格，否则它是 8 个空格制表符和空格的组合。

即使这不适用于您的情况，`retab`也很高兴知道，因为它对于处理使用硬制表符并且您希望同时转换为使用空格 *和*不同缩进级别的源非常方便。

# javascript - How to set a including path in the Gjs code?

> ID：10093102
> 
> 赞同：8
> 
> 时间：2012-04-10T17:00:21.453
> 
> 标签：javascript, path, gnome, import, gjs

As i could see, the Gjs `imports`, loads only `/usr/share/gjs-1.0` and `/usr/lib/gjs-1.0` by default. I want to modularize an application, like we can do with node, but i must find modules relative to the script file.

I found this two ways to add include paths:

1.  `gjs --include-path=my-modules my-script.js`
2.  `GJS_PATH=my-modules gjs my-script.js`

...but both are related to the current directory, not to the file *(obliviously)*, and they needed to be declared on the command line, making this unnecessarily complex.

How can i set a including path in the Gjs code? *(So i can make this relative to the file)*

Or... There is another way to import files from anywhere, like in python?

*(Please, you don't need to propose to use a shellscript launcher to solve the `--include-path` and `GJS_PATH` problem. That is obvious, but less powerful. If we do not have a better solution, we survive with that.)*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-29T11:25:20.923

您需要设置或修改`imports.searchPath`（这并不明显，因为它没有显示`for (x in imports)print(x)`）。所以这：

```
imports.searchPath.unshift('.');
var foo = imports.foo; 
```

导入文件“foo.js”作为`foo`对象。

这与[Seed](https://live.gnome.org/Seed)兼容，尽管`imports`知道它有一个`searchPath`.

（这个答案的早期版本的准确性大大降低，而且更具煽动性。对不起）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-29T03:02:53.253

正如道格拉斯所说，您确实需要修改`imports.searchPath`以包含您的库位置。使用`.`很简单，但取决于始终从同一目录位置运行的文件。不幸的是，找到当前执行脚本的目录是一个巨大的 hack。下面是[Gnome Shell 为扩展 API 做的事情](http://git.gnome.org/browse/gnome-shell/tree/js/misc/extensionUtils.js)

我已将其改编为以下功能以供一般使用：

```
const Gio = imports.gi.Gio;

function getCurrentFile() {
    let stack = (new Error()).stack;

    // Assuming we're importing this directly from an extension (and we shouldn't
    // ever not be), its UUID should be directly in the path here.
    let stackLine = stack.split('\n')[1];
    if (!stackLine)
        throw new Error('Could not find current file');

    // The stack line is like:
    //   init([object Object])@/home/user/data/gnome-shell/extensions/u@u.id/prefs.js:8
    //
    // In the case that we're importing from
    // module scope, the first field is blank:
    //   @/home/user/data/gnome-shell/extensions/u@u.id/prefs.js:8
    let match = new RegExp('@(.+):\\d+').exec(stackLine);
    if (!match)
        throw new Error('Could not find current file');

    let path = match[1];
    let file = Gio.File.new_for_path(path);
    return [file.get_path(), file.get_parent().get_path(), file.get_basename()];
} 
```

`app.js`在定义`getCurrentFile`函数之后，您可以从入口点文件中使用它：

```
let file_info = getCurrentFile();

// define library location relative to entry point file
const LIB_PATH = file_info[1] + '/lib';
// then add it to the imports search path
imports.searchPath.unshift(LIB_PATH); 
```

哇！现在导入我们的库非常简单：

```
// import your app libraries (if they were in lib/app_name)
const Core = imports.app_name.core; 
```

# java - 从性能的角度来看，哪一个更好..arraylist 或 array？

> ID：10093104
> 
> 赞同：1
> 
> 时间：2012-04-10T17:00:30.033
> 
> 标签：java, arrays, collections

我想存储 50000 个或更多字符串，我需要执行几个操作，例如检索特定字符串、删除特定字符串等。我只有两个选项可供选择，它们是数组列表和存储它们的数组. 从性能的角度来看，哪个更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T17:04:21.637

两者都不。如果您想检索特定字符串（例如获取字符串“Foo”）并删除特定字符串（例如删除“Foo”），我会考虑使用`Set`.

数组列表或数组将为您提供 O(N) 检索（除非您对其进行排序）。A`Set`通常会给您至少 O(lg N) 时间来查找特定项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:01:52.153

`ArrayList`由数组支持，因此在性能方面您应该看不到任何区别。

如果您的要求没有错误，并且确实您只能在数组列表和原始数组中进行选择，我建议您使用数组列表，因为您拥有所有 API 来操作您必须自己为原始数据编写的可用数据s 的数组`String`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T17:05:18.673

数组在性能方面比数组列表更有效，但除非您知道要放入数组中的元素数量，否则数组列表将是更好的选择，因为数组列表的大小可以根据需要增长，而静态数组则不能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T17:07:36.360

数组总是比`ArrayList`. 部分原因是，当使用数组时，您不必支付对其元素进行类型转换的额外成本（使用泛型并不意味着类型转换消失，只是它们从普通视图中隐藏）。

说明我的观点：[Trove](http://trove.starlight-systems.com/)和[fastutil](http://fastutil.dsi.unimi.it/)是两个非常快速的 Java 集合库，它们依赖于提供特定类型集合的事实，而不是像提供的基于对象的实现`ArrayList`。

此外，使用`get()`访问元素的方法（尽管很小）和调整大小操作的成本是有成本的，这在大量`ArrayLists`插入和删除操作中可能很重要。当然，数组不会发生这种情况，因为它们本质上具有固定的大小，这既是优势也是劣势。

回答您的问题：如果您事先知道需要的元素数量，并且这些元素不会发生太大变化（插入、删除），那么您最好的选择是使用数组。如果需要一些修改操作并且性能至关重要，请尝试使用 Trove 或 fastutil。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T17:07:12.357

检索特定字符串，删除特定字符串...我认为 ArrayList 不是最好的解决方案。看看 HashSet 或 LinkedHashSet。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T17:18:14.843

如果您查看[ArrayList 的源代码，](http://www.docjar.com/html/api/java/util/ArrayList.java.html)您将看到：

```
 107       /**
  108        * The array buffer into which the elements of the ArrayList are stored.
  109        * The capacity of the ArrayList is the length of this array buffer.
  110        */
  111       private transient Object[] elementData; 
```

它在内部使用数组。

所以 ArrayList 永远不会比使用数组更快。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-10T17:26:10.643

如果您最初正确调整 ArrayList 的大小，主要区别将来自添加，它会进行范围检查，您可以使用数组摆脱。但我们在这里谈论的是几个 CPU 周期。

除此之外应该没有明显的区别。例如，`indexOf`ArrayList 中的方法如下所示：

```
 public int indexOf(Object o) {
       if (o == null) {
           for (int i = 0; i < size; i++)
               if (elementData[i]==null)
                   return i;
       } else {
           for (int i = 0; i < size; i++)
               if (o.equals(elementData[i]))
                   return i;
       }
       return -1;
   } 
```

# java - Java Easymock complains with "java.lang.IllegalStateException: void method cannot return a value" or "no last call on a mock available"

> ID：10093105
> 
> 赞同：2
> 
> 时间：2012-04-10T17:00:39.330
> 
> 标签：java, junit, easymock, illegalstateexception

We are using EasyMock for JUnit testing of our Java application inside Eclipse. Using code similar to the below, we found a strange behaviour: when running the full test suite (Eclipse Project -> Run as -> JUnit) one test case fails reproducibly. However when running it standalone it works fine.

Interface:

```
package de.zefiro.java.easymockexception;

public interface Fruit {
    public String fall();
} 
```

Test class:

```
package de.zefiro.java.easymockexception;

import static org.easymock.EasyMock.createNiceMock;
import static org.easymock.EasyMock.expect;
import static org.easymock.EasyMock.replay;
import static org.junit.Assert.assertTrue;

import org.junit.BeforeClass;
import org.junit.Test;

public class Newton {
    private static final Fruit APPLE = createNiceMock(Fruit.class);

    @BeforeClass
    public static void SetUpClass() {
        expect(APPLE.fall()).andReturn("Targeting HEAD").anyTimes();
        replay(APPLE);
    }

    @Test
    public void testGravity() {
        String target = APPLE.fall();
        assertTrue("Missed", target.contains("HEAD"));
    }
} 
```

Test suite:

```
package de.zefiro.java.easymockexception;

import org.junit.runner.RunWith;
import org.junit.runners.Suite;
import org.junit.runners.Suite.SuiteClasses;

@RunWith(value = Suite.class)
@SuiteClasses( { Newton.class } )
public class ScienceTests { } 
```

Running all tests on the Eclipse project - i.e. both ScienceTests calling Newton as well as Newton directly - produced this exception in the above small example:

```
java.lang.IllegalStateException: no last call on a mock available
at org.easymock.Easymock.getControlForLastCall(EasyMock.java:175) 
```

There is a [similar question here](https://stackoverflow.com/questions/3494969/easymock-3-0-mocking-class-throws-java-lang-illegalstateexception-no-last-call), but it seems to be unrelated.

And in our real testing code (bigger class, but the main actors are identical to the stripped-down example) this exception:

```
java.lang.IllegalStateException: void method cannot return a value
at org.easymock.internal.MocksControl.andReturn(MocksControl.java:101) 
```

I didn't find an answer either on Google nor here on StackOverflow, but found out myself now, so in the spirit of [answering your own questions](https://meta.stackexchange.com/questions/2706/posting-and-answering-questions-you-have-already-found-the-answer-to "Authoritive Answer") I'll post my findings below. Worth mentioning is also this post I found, even though it didn't help me in this particular case: [EasyMock Cause-Effect Exception Mapping](http://rockycode.com/blog/easymock-cause-effect-exception-mapping/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:08:09.137

将断点放在初始化 APPLE 的行和 SetUpClass() 中，我注意到 APPLE 只被调用了一次，而 SetUpClass 被调用了两次。这是因为对 Newton 的第一次引用会创建类并运行静态初始化程序，但是 JUnit 会在每次运行测试时调用 @BeforeClass。在这种情况下，测试运行两次：一次作为正常调用，一次作为测试套件的一部分。

我不想更改逻辑（即不使用静态），而是将静态 @BeforeClass 更改为静态初始化块：

```
public class Newton {

    [...]

    static {
        expect(APPLE.fall()).andReturn("Targeting HEAD").anyTimes();
        replay(APPLE);
    }

    // no @BeforeClass needed anymore

    [...]
} 
```

这解决了我上面的简化测试和我们的真实测试编码中的问题。

我没有发现触发不同异常消息的区别是什么，但结果是相同的 - new 只被调用一次，@BeforeClass 被多次调用并在第二次运行时失败。该修复程序也适用于两者。

# cocos2d-iphone - Cocos2D - 粒子跟随发射器而不是停留在它们被释放的位置

> ID：10093112
> 
> 赞同：5
> 
> 时间：2012-04-10T17:00:57.657
> 
> 标签：cocos2d-iphone, particles, particle-system, ccparticlesystem

在 cocos2D 中，我目前有一个非常简单的粒子发射器，初始化如下：

```
 turnEmitter = [[CCParticleFlower alloc] init];
    turnEmitter.texture = [[CCTextureCache sharedTextureCache] addImage:@"Pocket.png"];
    [self addChild:turnEmitter z:1];
    turnEmitter.scale = 0.7f;
    turnEmitter.positionType = kCCPositionTypeFree; 
```

它只是直接添加到游戏层。

这个发射器以这种方式跟随屏幕周围的精灵（发生在更新方法中）：

```
 turnEmitter.position = turnEmblem.position; 
```

现在的问题是，留在发射器后面的粒子尾部会随着发射器移动，而不是被释放的粒子只是停留在它们被释放的位置，这会产生一种非常奇怪和愚蠢的外观效果。

我想要做的是让粒子在它们产生后根本不跟随发射器，不幸的是我找不到任何这样做的方法。

正如您从上面的代码中看到的那样，我已经四处搜索，发现有人建议更改发射器的*positionType*属性，尽管我已经尝试了所有可能性，但并没有解决问题。

有人对这可能是什么有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T19:16:08.523

您可能还想尝试将“emitterMode”更改为“kCCPositionTypeFree”。我有一个类似的问题，我将发射器作为 CCNode 的子级。CCNode 正在旋转，但粒子和发射器没有。同样，它看起来很愚蠢，因为旋转的错觉被破坏了。我需要在我的发射器上设置以下内容：

```
emitter.emitterMode = kCCPositionTypeRelative;
emitter.positionType = kCCPositionTypeRelative; 
```

# watir - 如何在不影响性能的情况下找到带有 watir-webdriver 的标签？

> ID：10093114
> 
> 赞同：4
> 
> 时间：2012-04-10T17:01:03.683
> 
> 标签：watir, watir-webdriver

我在 Cucumber (1.1.9) 测试中使用 watir-webdriver (0.5.3)。我正在尝试验证`<acronym>`标签的文本值。该代码是遗留代码，并且有计划将其更改为`<div>`或`<span>`标记，但同时我必须处理它。我第一次尝试：

```
@browser.acronym(:id => /expense_code(.*)/).text 
```

我收到以下错误：

```
NoMethodError: undefined method `acronym' for #<Watir::Browser:0x33e9940> 
```

我在 Watir 代码中四处寻找标签对象是如何创建的，发现它们似乎是根据 HTML5 规范动态创建的，但后来我还发现一条评论`element.rb`指出它们不再是从规范创建的. 无论如何，我看不到继承`<span>`对象并将其称为`<acronym>`对象的简单方法。因此，我研究了替代方案，并找到了元素对象。

```
@browser.element(:id => /expense_code(.*)/).text 
```

此代码有效，但遍历我的页面大约需要一分钟。我现在坚持使用正则表达式，因为标签 id 实际上是动态生成的，我目前没有办法找出这些值。这就是标签的实际外观：

```
<acronym class="editable select fillwith:exp_codes default:E100"
title="Expense Code: Expenses" id="expense_code114_582_10777">
E100    </acronym> 
```

对于如何提高测试性能的任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T19:21:00.647

使用 XPath 将元素限制为仅是首字母缩略词标签是否有助于提高性能？

```
@browser.element(:xpath, "//acronym[contains(@id, 'expense_code')]") 
```

更新：正如 Chuck 提到的，CSS-Selector 也是一个选项：

```
@browser.element(:css => "acronym[id^=expense_code]") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T19:33:19.253

那个类名是可预测的吗？你能从一个集合部分加上你要验证的文本来构造它（在你上面的例子中是一样的）然后走那条路吗？

```
acronym = 'E100'
browser.element(:class, 'editable select fillwith:exp_codes default:#{acronym}'.text.should == acronym 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T13:54:47.977

我最近从 Watir 1.6.5 窃取逻辑来为我的页面对象制作自定义定位器/集合，我在 Watir::TaggedElementLocator 中注意到，它支持元素支持的任何方法。在 Watir-Webdriver 中注意到元素有一个 tag_name() 方法，我想我会尝试同样的方法，它看起来很有效。

因此，您可以通过以下方式使用 tag_name 作为定位器：

```
@browser.element(:tag_name => 'acronym', :id => /expense_code(.*)/).text 
```

我不确定定位器的运行顺序，因此由于正则表达式很昂贵，因此获取所有首字母缩写词元素然后找到具有正确 ID 的元素可能会更快：

```
@browser.elements(:tag_name, 'acronym').find{ |acronym|
  acronym.id =~ /expense_code(.*)/ 
}.text 
```

虽然我认为它使代码看起来更好，但不幸的是我不确定它是否更快。我猜每个的性能将取决于被测试的特定页面布局。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T19:30:59.620

我不确定这里的礼仪是什么，但这是我在#watir IRC 聊天中使用 Chuck 的回复和来自 jarib 的反馈得出的答案。以我所有的例子，`expense_code = 'E100'`.

```
@browser.element(:tag_name => "acronym", 
                    :class => "default:#{expense_code}").text 
```

上面的代码以非常合理的速度运行，并且不需要 xpath。它是以下代码的缩写：

```
@browser.element(:tag_name => "acronym", 
     :class => "editable select fillwith:exp_codes default:#{expense_code}").text 
```

我了解到我不需要传递整个字符串。由空格分隔的类中的任何内容都由 watir 优雅地处理。我从这个 xpath 改编了该代码：

```
@browser.element(:xpath => "//acronym[contains(@class,
    \'editable select fillwith:exp_codes default:#{expense_code}\')]").text 
```

上面代码中的问题是需要避开`'`类值周围的值，以便它能够正确评估。

只是搜索类（下面的代码）不起作用。我不知道为什么。我确实注意到它用请求冲击了数据库。不管它在做什么，页面都不喜欢它。虽然它多次尝试的原因是我`wait_until_present`在里面滑了一个。

```
@browser.element(:class, "editable select fillwith:exp_codes
    default:#{expense_code}").text 
```

谢谢您的帮助。:)

# java - 如何在我的 JFrame 中居中按钮？

> ID：10093122
> 
> 赞同：1
> 
> 时间：2012-04-10T17:01:39.330
> 
> 标签：java, swing, jpanel, jbutton, border-layout

我正在尝试制作棋盘游戏，我将玩家 1 标签和玩家 2 标签设置为东西方。我无法将 3 x 10 按钮居中。有没有更简单的方法可以一次制作所有 30 个按钮？以下是我的代码：

```
 JPanel panel = new JPanel();
    JButton button1 = new JButton();JButton button2 = new JButton();
    JButton button3 = new JButton();JButton button4 = new JButton();
    JButton button5 = new JButton();JButton button6 = new JButton();
    JButton button7 = new JButton();JButton button8 = new JButton();
    JButton button9 = new JButton();JButton button10 = new JButton();
    JButton button11 = new JButton();JButton button12 = new JButton();
    JButton button13 = new JButton();JButton button14 = new JButton();
    JButton button15 = new JButton();JButton button16 = new JButton();
    JButton button17 = new JButton();JButton button18 = new JButton();
    JButton button19 = new JButton();JButton button20 = new JButton();
    JButton button21 = new JButton();JButton button22 = new JButton();
    JButton button23 = new JButton();JButton button24 = new JButton();
    JButton button25 = new JButton();JButton button26 = new JButton();
    JButton button27 = new JButton();JButton button28 = new JButton();
    JButton button29 = new JButton();JButton button30 = new JButton();

    panel.add(button1);panel.add(button2);panel.add(button3);panel.add(button4);
    panel.add(button5);panel.add(button6);panel.add(button7);panel.add(button8);
    panel.add(button9);panel.add(button10);panel.add(button11);panel.add(button12);
    panel.add(button13);panel.add(button14);panel.add(button15);panel.add(button16);
    panel.add(button17);panel.add(button18);panel.add(button19);panel.add(button20);
    panel.add(button21);panel.add(button22);panel.add(button23);panel.add(button24);
    panel.add(button25);panel.add(button26);panel.add(button27);panel.add(button28);
    panel.add(button29);panel.add(button30);
    frame.add(panel);

    Panel p = new Panel();
    p.setLayout(new BorderLayout());
    p.add(new Button("Throw dice"), BorderLayout.SOUTH);
    //p.add(new Button("dice Draw"), BorderLayout.SOUTH);
    p.add(new Label("Player 1"), BorderLayout.EAST);
    p.add(new Label("Player 2"), BorderLayout.WEST);
    frame.add(p);

    panel.setLayout(new GridLayout(3,10));
    panel.setSize(new Dimension(500, 200));
    frame.setSize(new Dimension(600, 300));

  }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T17:11:38.333

您可以`JButtons`简单地通过创建一个表来制作和编辑它们的数组，`JButtons`并将它们与一个`GridLayout`中心一起使用`Borderlayout.CENTER`：

```
JButton [] buttons = new JButton[n];
for(int i=0;i<n;i++){
    buttons[i] = new JButton("label "+ i);
    buttons[i].set...
    buttons[i].set...
    gridlayout.add(buttons[i]);
}

borderlayout.add(gridlayout, BorderLayout.CENTER);
panel.setLayout(borderlayout); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:27:14.660

一种方法是：

```
panel.setLayout(new GridLayout(3,10));
panel.setSize(new Dimension(500, 200));
//Add this line
panel.setLocation((frame.getWidth()-panel.getWidth())/2, 0); // 0 is just the Y location
frame.setSize(new Dimension(600, 300)); 
```

查看相对布局以管理您的所有布局[https://stackoverflow.com/a/5346794/643500](https://stackoverflow.com/a/5346794/643500)

请记住，您希望所有部分相互布局良好，否则处理问题可能会很痛苦。Dahmad Boutfounast 的解决方案就是其中之一。

并且绝对使用 list\array 来管理所有这些。

# javascript - javascript/php 简单的下拉菜单注销

> ID：10093125
> 
> 赞同：0
> 
> 时间：2012-04-10T17:01:46.397
> 
> 标签：javascript, drop-down-menu, logout

为了节省空间，我想将网页模板顶部的用户名和注销按钮合并到一个链接中。用户名将可见，当您将鼠标悬停在堆栈溢出中或单击 gmail 或 fb 时，您可以选择注销或执行其他与帐户相关的操作。理想情况下，希望在没有 jquery 开销的情况下在 css 或 javascript 中执行此操作。

任何人都可以推荐简单的javascript或其他技术，因为我对javascript非常缺乏经验。不需要复杂的完整下拉菜单。它应该类似于下面，但下面是不可预测的......页面加载时显示菜单等。谢谢。

```
<html>
<head>
<script>
showMenu = function() {
var div = document.getElementById('box1');
div.style.display = 'block';
    }
hideMenu = function() {
var div = document.getElementById('box1');
div.style.display = 'none';
    }
</script>
</head>
<body>
<table>
<tr>
        <td onmouseover="showMenu()" >username</td>
    </tr>
</table>

<div id="box1" onmouseout="hideMenu()">
    <a href="logout.php">Logout</a><br>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:14:46.823

更新 - 这应该解决“跳跃”问题：

```
<html>
    <head>
        <style type="text/css">
            .username {
                width: 100px;
                border: 1px solid #ff0000;
                padding: 3px;
                text-align: center;
                position: relative;
                display: inline-block;
            }

            #box1 {
                display: none;
                text-align: center;
                position: absolute;
                background-color: #ccc;
            }
        </style>

        <script>
            showMenu = function() {
                var div = document.getElementById('box1');
                div.style.display = 'block';
            }
            hideMenu = function() {
                var div = document.getElementById('box1');
                div.style.display = 'none';
            }
        </script>
</head>
<body>
    <table>
        <tr>
            <td colspan=3 align="left">
                <img src=":">
            </td>

            <td colspan=6 valign="bottom" align="right">Menu1 Menu2 Menu3 Menu4 Menu5 Menu6 Menu7
                <div class="username" onmouseover="showMenu();" onmouseout="hideMenu();">Username
                    <span id="box1">
                        <a href="logout.php">Logout</a>
                    </span>
                </div>
            </td>
        </tr>

        <tr>
            <td colspan=9>
                <hr color="red">
            </td>
        </tr>
    </table>
</body>
</html> 
```

问题是绝对定位在跨度内的工作方式与在 div 内的工作方式不同。所以我不得不将“用户名”跨度更改为 div，并为“box1”跨度使用绝对位置。您甚至可以将“box1”跨度更改为 div，以便它占据“用户名”div 的整个宽度。让我知道这是怎么回事！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T01:54:30.853

这是它跳起来的版本。如果你把位置：绝对; 在样式标签中，菜单在其他列之后再向右扩展一个单元格... .username { }

```
 #box1 {
            display: none;
        }
    </style>

    <script>
        showMenu = function() {
            var div = document.getElementById('box1');
            div.style.display = 'block';
        }
        hideMenu = function() {
            var div = document.getElementById('box1');
            div.style.display = 'none';
        }
    </script>
</head>
<body>
    <table><tr>

<td colspan=3 align="left"><img src=":"></td>
<td colspan=6 valign="bottom" align="right">Menu1 Menu2 Menu3 Menu4 Menu5 

Menu6 Menu7 <span class="username" onmouseover="showMenu();" 

onmouseout="hideMenu();">Username<span id="box1">
                        <a href="logout.php">Logout</a>
                    </span>
                </span></b></td></tr>
<tr><td colspan=9><hr color = "red"></td></tr>
</table>

</body>
</html> 
```

# jquery - 倒立垂直音量条jquery

> ID：10093128
> 
> 赞同：1
> 
> 时间：2012-04-10T17:02:11.713
> 
> 标签：jquery, html5-video

我为视频播放器创建了一个自定义音量栏。一切正常，但我试图在拖动控件时反转音量变化的方向。我认为这与以下事实有关：当我计算位置并将其转换为百分比时，我的控制 div 的顶部是 0%，底部是 100%。位置和百分比计算如下：

```
var position = y - volume.offset().top;
percentage = 100 * position / volume.height(); 
```

如果点击控制div的底部，console.log(position); 读出 100%。我希望它读出 0%，所以当点击底部时，音量会下降，当点击顶部时，音量会上升（到 100%）。

这是代码

HTML

```
<video id="video">
... video sources
</video>
<div id="volumeBar"></div>
<div id="volume"></div> 
```

CSS

```
#volumeBar {
    position: relative;
    height: 138px;
    width: 102px;
    background: url(/assets/vintage-vp/volume-container.png) no-repeat;
    top: -131px;
    left: 695px;
    z-index: 2;
overflow: hidden;
}

#volume {
    width: 36px;
    height: 79px;
    position: absolute;
    background: url(/assets/vintage-vp/volume.jpg) no-repeat black;
top: 116px;
    left: 735px;
    z-index: 1;
} 
```

jQuery

```
var volumeDrag = false;
$('#volumeBar').on('mousedown', function(e) {
    volumeDrag = true;
    video[0].muted = false;
    updateVolume(e.pageY);
});
$(document).on('mouseup', function(e) {
    if(volumeDrag) {
        volumeDrag = false;
        updateVolume(e.pageY);
    }
});
$(document).on('mousemove', function(e) {
    if(volumeDrag) {
        updateVolume(e.pageY);
    }
});
var updateVolume = function(y, vol) {
    var volume = $('#volumeBar');
    var percentage;
    //if only volume have specificed
    //then direct update volume
    if(vol) {
        percentage = vol * 100;
    }
    else {
        var position = y - volume.offset().top;
        percentage = 100 * position / volume.height();
    }

    if(percentage > 100) {
        percentage = 100;
    }
    if(percentage < 0) {
        percentage = 0;
    }

    //update video volume

    video[0].volume = percentage / 100;

    //change sound icon based on volume

    var roundPixels = Math.round((video[0].volume*10))*-79;
    $('#volume').css({backgroundPosition: '0 ' +roundPixels+'px'}); 
```

我不想为此使用 jQuery UI 滑块。我有一种感觉，这只是一些简单的逻辑。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T17:21:20.410

不会改变：

```
percentage = 100 * position / volume.height(); 
```

到

```
percentage = 100 - (100 * position / volume.height()); 
```

做吗？

# javascript - 返回 false 不工作

> ID：10093132
> 
> 赞同：0
> 
> 时间：2012-04-10T17:02:40.890
> 
> 标签：javascript, jquery

有人可以告诉我为什么`return false`不工作吗？我只想检查电流是否为黄色。如果是黄色类，则什么也不做（返回 false）。问题是当您单击一个按钮时，它会再次运行它，但我想避免这种情况。这是[问题的关键](http://jsfiddle.net/3YLEg/)。

```
/*INSIDE THIS CODE RETURN FALSE NOT WORKING!!*/
$('.yellowcontroll').click(function(){

    if($yellow.after('.current').length){
        $('.yellow').show();
        $('.slideswrapper:not(:animated)').animate({'marginLeft':'-=100'},1000,function(){
            $('.current').removeClass('current').hide();
            $('.yellow').addClass('current');
            $('.slideswrapper').css({'margin-left':'0px'});

            if($('.current').is($('.slideswrapper div:last'))){
                $('.blue,.green,.red').clone().insertAfter('.slideswrapper div:last');
            }

            if($('.current').is($('.red'))){
                $('.red').prevAll().remove(':not(.yellow)');
                $('.yellow').insertAfter($('.slideswrapper div:last'));
            }

            /*THIS IS NOT WORKING AS EXPECTED!!*/    
            if($('.current').is($('.yellow'))){
                return false;
            }
        });
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:06:53.620

问题是您从回调返回 false 到动画，而不是事件回调。

如果您在第二次单击时没有发生任何事情，那么您可以移动条件并将 false 返回到单击回调的前面：

```
$('.yellowcontroll').click(function(){

    /* MOVE THIS TO THE BEGINNING OF THE CLICK CALLBACK */    
    if($('.current').is($('.yellow'))){
        return false;
    }

    if($yellow.after('.current').length){
        $('.yellow').show();
        $('.slideswrapper:not(:animated)').animate({'marginLeft':'-=100'},1000,function(){
            $('.current').removeClass('current').hide();
            $('.yellow').addClass('current');
            $('.slideswrapper').css({'margin-left':'0px'});

            if($('.current').is($('.slideswrapper div:last'))){
                $('.blue,.green,.red').clone().insertAfter('.slideswrapper div:last');
            }

            if($('.current').is($('.red'))){
                $('.red').prevAll().remove(':not(.yellow)');
                $('.yellow').insertAfter($('.slideswrapper div:last'));
            }
        });
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:07:31.280

您小提琴中的代码一团糟，但根据您的问题，您似乎只是将逻辑放在错误的位置。尝试将您的`return false`逻辑放在点击事件的顶部：

```
$('.yellowcontroll').click(function(){
    if($('.current').is($('.yellow'))){
        return false;
    }
    ...
  }); 
```

[这个小提琴](http://jsfiddle.net/JamesHill/3YLEg/4/)应该做你想做的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T17:08:24.083

我认为您想将该代码段放在单击处理程序的开头：

[http://jsfiddle.net/mihaifm/3YLEg/2/](http://jsfiddle.net/mihaifm/3YLEg/2/)

```
$('.yellowcontroll').click(function(){
          /*THIS IS NOT WORKING AS EXPECTED!!*/    
          if($('.current').is($('.yellow'))){
                 return false;
                } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T17:09:16.757

将条件错误代码移动到单击处理程序的开头，如下所示并使用`hasClass`如下。

[**演示**](http://jsfiddle.net/skram/3YLEg/5/)

```
 if ($('.current').hasClass('yellow')) {
        return false;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T17:09:49.840

```
if($('.current').is('.yellow')){
    return false;
} 
```

# android - AlertDialog 未正确呈现

> ID：10093139
> 
> 赞同：1
> 
> 时间：2012-04-10T17:03:18.190
> 
> 标签：android, xamarin.android, android-alertdialog

正如您在屏幕截图中看到的，我的警报对话框边框未正确呈现。它在对话框后面放置黑色背景。这仅在我调整对话框大小时发生。我是 android/monodroid 的新手，所以我什至不知道从哪里开始寻找治疗方法。您可以看到 toast 消息正确呈现了边框（带有半透明边框）。

关于如何摆脱对话框边框后面的黑色背景的任何想法？

![截屏](../Images/12e41cd1e227c71e295a8bba711ee26a.png)

调整大小代码：

```
Dialog dialog = db.Create();
WindowManagerLayoutParams p = new WindowManagerLayoutParams();
p.CopyFrom(dialog.Window.Attributes);
p.Width = 900;
p.Height = WindowManagerLayoutParams.WrapContent;
dialog.Show();
dialog.Window.Attributes = p; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:16:10.330

我建议使用 DialogFragment 而不是旧对话框，在工作中我们遇到了很多旧对话框的问题。 [http://developer.android.com/reference/android/app/DialogFragment.html](http://developer.android.com/reference/android/app/DialogFragment.html) 这个问题在一些设备上是具体的。

# c# - How to copy and paste the value or text from Google search box to ask.com's search box in the same windows form?

> ID：10093150
> 
> 赞同：-2
> 
> 时间：2012-04-10T17:04:12.963
> 
> 标签：c#, .net, winforms, textbox, copy-paste

How to copy and paste the value or text from Google search box to ask.com's search box?

Please imagine a windows application with one webbrowser box on the left side and another webbrowser box on the right side, all embedded evenly in the same one windows application form.

I want to add a button that copies the value or text from Google search box and then converts these characters into a uppercase and then pastes it on the Ask.com's search box.

Google's searchbox ID is "lst-ib" and ask.com's search box ID is "q"

How do you programmatically copy and paste the value or text from Google search box to ask.com's search box?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:15:37.607

您可以从 URL 中获取搜索词（在`DocumentCompleted`事件中），然后构建一个适当的 ask.com 搜索 URL。

或者您可以（再次在`DocumentCompleted`或在您的按钮单击处理程序中）使用标准 DOM 方法来获取值：

```
HtmlElement searchBox = GoogleBrowser.Document.getElementById("lst-ib"); 
```

# objective-c - Xcode 4 中的 ScrollView 定位

> ID：10093154
> 
> 赞同：0
> 
> 时间：2012-04-10T17:04:45.083
> 
> 标签：objective-c, xcode, macos, cocoa

我是 Xcode 编程新手，我有以下问题：

如何调整 NSScrollView 中视图的位置？

![截屏](../Images/e589e83173055791457707dad9c76bc7.png)

我希望我的 WKDDrawView 位于左上角，我只是不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:30:04.430

默认情况下，窗口坐标系的中心位于左下角。

您应该覆盖您的`isFlipped:`方法`WKDDrawView`以返回`YES`。

# jquery - jQuery UI Slider - disable sliding on track/enable on handle mousedown

> ID：10093156
> 
> 赞同：2
> 
> 时间：2012-04-10T17:04:50.217
> 
> 标签：jquery, user-interface, slider, handle

I have a jQuery UI Slider, which I want to disable when a user tries to slide using the track. It should only work/enable when someone drags the handle somewhere. Clicking and trying to drag the sliding to move the handle should be disabled. I'm not sure if this can be done using `unbind` or `mousedown` event.

The problem I notice is, my handle goes from 1 to 100\. When you move the start of the handle, it displays uses the `ui.value`. But if you try to go outside the handle and slide on the slider track, the `ui.value` resets its value.

So, I want to disable non-handle dragging.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-25T09:33:17.703

这可以使用 2 行 css 代码来完成！

这是 HTML

```
<div class="SliderContainer"><div id="BGS0"></div></div> 
```

这是JS

```
$('#BGS0').slider(); 
```

这是 CSS

```
.SliderContainer {
   pointer-events: none;
   /* Other settings here */
}

.SliderContainer > .ui-slider .ui-slider-handle {
pointer-events: auto;
/* Other settings here */
} 
```

**注意：**我使用 SliderContainer 类作为父 DIV，因为默认情况下在此 DIV 内禁用任何指针事件。然后我只为滑块句柄启用了指针事件。只有父 DIV 中的滑块受此选项影响，因为我使用了`.SliderContainer > .ui-slider .ui-slider-handle`选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-06T08:58:59.247

```
 $("#range-amount").slider({ disabled: true }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T13:06:33.603

我已经使用这个解决方案完成了它：

[jQuery UI Slider - 禁用单击滑块轨道](https://stackoverflow.com/questions/8330854/jquery-ui-slider-disable-click-on-slider-track/13201163#13201163)

```
function disableSliderTrack($slider){

    $slider.bind("mousedown", function(event){

        return isTouchInSliderHandle($(this), event);   

    });

    $slider.bind("touchstart", function(event){

        return isTouchInSliderHandle($(this), event.originalEvent.touches[0]);

    });
}

function isTouchInSliderHandle($slider, coords){

    var x = coords.pageX;
    var y = coords.pageY;

    var $handle = $slider.find(".ui-slider-handle");

    var left = $handle.offset().left;
    var right = (left + $handle.outerWidth());
    var top = $handle.offset().top;
    var bottom = (top + $handle.outerHeight());

    return (x >= left && x <= right && y >= top && y <= bottom);    
}

disableSliderTrack($(".ui-slider")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T08:46:21.257

我也遇到了同样的问题，除非我决定从 jquery ui 本身中删除句柄，否则我找不到任何解决方案

在`ui.slider.js`中，注释此行。

```
// Bind the click to the slider itself
this.element.bind('mousedown.slider', function(e) {
   self.click.apply(self, [e]);
   self.currentHandle.data("mouse").trigger(e);
   self.firstValue = self.firstValue + 1; //This is for always triggering the change event
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-10T17:11:10.667

如果我对您的问题很清楚，您不希望滑块在鼠标事件上滑动，这应该可以：

```
$( "#slider" ).mousedown(function(){return false;}); // For mousedown
$( "#slider" ).scroll(function(){return false;}); // For scrolling with the trackpad 
```

还要检查 jquery 事件列表并替换任何事件以从滑块中删除此事件，例如：

```
$( "#slider" ).someEvent(function(){return false;}); 
```

要从滑块中删除所有事件，请尝试：

```
$('#slider').unbind(); 
```

# jquery - 为什么在 IE ($.getJSON) 中没有调用回调函数？

> ID：10093157
> 
> 赞同：0
> 
> 时间：2012-04-10T17:04:57.753
> 
> 标签：jquery, callback, getjson

为什么IE中没有调用回调函数？

1.  对 Flickr 的调用：

    ```
    $.getJSON("http://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos",
    {
        api_key: APIKey,    
        photoset_id: photoSetID,
        format: "json",
        per_page: 40,
        nojsoncallback: 1           
    }, displayImages);

    function displayImages(data) { alert('called'); } 
    ```

2.  致电 YouTube：

    ```
    $.getJSON('https://gdata.youtube.com/feeds/api/users/username/favorites?alt=json', function(data)
    {
        alert('called');
    }) 
    ```

这两种类型的调用都适用于除 IE 之外的任何其他浏览器。你能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:08:11.110

jQuery 仅在非 IE<=9 浏览器中支持跨域 ajax。要在 IE 中使用这些 API，您需要使用 JSONp（如果可用）或添加一个[jQuery 插件](https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest)，以添加对 IE 使用的 XDomainRequest api 的支持。

如果可能，请使用 JSONp；XDR 有很多限制 - 有关详细信息，请参阅[http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)。

# xcode - 设置 DatePicker 的时间

> ID：10093158
> 
> 赞同：0
> 
> 时间：2012-04-10T17:05:04.400
> 
> 标签：xcode, datepicker, nsdate, nscalendar

如何将 DatePicker 的时间设置为当前日期的 00:00:00？

```
 - (void) awakeFromNib
    {
        [datePicker setDateValue:[NSDate date]];
        NSDate *now = [NSDate date];
        int daysToAdd = 364;
        NSDate *newDate1 = [now dateByAddingTimeInterval:60*60*24*daysToAdd];
        [datePicker1 setDateValue:newDate1];
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T17:10:54.040

*畏缩*

看起来您有两个不同的日期选择器？ `datePicker`和`datePicker1`？那是怎么回事？

此外，这不会满足您的期望：

```
NSDate *newDate1 = [now dateByAddingTimeInterval:60*60*24*364]; 
```

那就是创建一个新的日期，它正好是未来 31,449,600 秒。除此之外，它*没有*做任何事情。

您想要做的是从当前日期中提取所有日期*组件并将它们归零：*

```
NSDate *now = [NSDate date];
NSDateComponents *nowComponents = [[NSCalendar currentCalendar] components:(NSEraCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit) fromDate:now];

// technically these next lines are unnecessary, since we only pulled out the era-year-month-day, but they're included here for understanding/completeness:

[nowComponents setHour:0];
[nowComponents setMinute:0];
[nowComponents setSecond:0];

// now we can turn it back into a date:

NSDate *todayAtMidnight = [[NSCalendar currentCalendar] dateFromComponents:nowComponents]; 
```

# unix - Linux command to get current value of java.io.tmpdir

> ID：10093159
> 
> 赞同：18
> 
> 时间：2012-04-10T17:05:06.427
> 
> 标签：unix, properties, command, system

I need a Linux command to get current value of java.io.tmpdir Also can you tell me the command to get all the system propeties.

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-03-07T10:20:06.943

JDK 提供了可以用来实现目标的工具。使用指定的命令，可以显示系统变量的值`java.io.tmpdir`。

```
jinfo <process id> | grep "java.io.tmpdir" 
```

这`<process id>`是要显示系统变量值的 java 进程的编号。您可以使用该`jps`工具获取的 java 进程的 ID，其中列出了您机器上运行的所有 java 进程。

要查看java进程的所有系统变量，请使用此命令

```
 jinfo <process id> 
```

所有 JDK 工具都位于`$JAVA_HOME/bin`目录中。

`java.io.tmpdir`是java系统属性之一，所以它的值只存在于jvm内部。要找出`java.io.tmpdir`属性的值是什么，您还可以用 java 编写一个简单的程序。它可能看起来像这段代码：

```
public class JSystemProperties {
    public static void main(String[] args) {
        System.getProperties().list(System.out);
    }
} 
```

上面的代码将打印所有 java 系统属性，但您可以修改它以仅打印一个名称为您通过`args`数组传递的系统属性（使用`System.getProperty(key)`方法）。编译此类后，您可以创建脚本（将运行已编译的 java 类），该脚本可被视为 Linux 命令以获取 java 系统属性的当前值。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-10-19T21:28:11.877

对于我过去部署的黑盒 Java 应用程序，有时我可以`java.io.tmpdir`通过执行以下命令找到 的值：

`ps -ef | grep java.io.tmpdir`

特别是对于 tomcat 应用程序，您可能会得到如下输出：

`-Djava.io.tmpdir=/usr/local/tomcat/temp`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T17:21:37.337

对于临时目录：这里有一个很好的[答案](https://superuser.com/questions/332610/where-is-the-temporary-directory-in-linux)。

对于所有环境变量，请尝试`env`命令。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-15T06:28:32.223

[现在推荐](https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr013.html)的工具是 jcmd，像这样使用它：

```
jcmd $pid VM.system_properties | grep java.io.tmpdir 
```

# symfony - FOSUserBundle 控制器中的唯一验证器

> ID：10093164
> 
> 赞同：0
> 
> 时间：2012-04-10T17:05:18.923
> 
> 标签：symfony, fosuserbundle

我正在尝试在控制器中使用 FOSUserBundle Unique 验证器。正如我在我的定义中所定义的，我`validation.xml`可以选择应该验证我的实体的哪些属性：

```
<constraint name="FOS\UserBundle\Validator\Unique">
   <option name="property">dni</option>
   <option name="message">The value for DNI is already registered</option>
   <option name="groups">
      <value>AppRegistration</value>
      <value>Profile</value>
      <value>UpdateOldUsers</value>
   </option>
</constraint> 
```

但是当我在控制器上调用它时（如下[）](http://symfony.com/doc/current/book/validation.html#validating-values-and-arrays)：

```
use FOS\UserBundle\Validator\Unique;

public function acceptNewTosAction(Request $request) {
    if ($request->getMethod() == 'POST') {
        $form->bindRequest($request);
        $uniqueConstraint = new Unique(array('property' => 'dni'));
        $formData = $request->request->get('old_user');
        $dni = $formData['dni'];
        $uniqueError = $this->get('validator')->validateValue($dni, $uniqueConstraint); 
```

我收到此错误： `Expected argument of type FOS\UserBundle\Model\UserInterface, string given`

有可能以这种方式进行吗？我应该如何在控制器中实现唯一验证器？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:33:39.273

我意识到这应该是怎样的。只需告诉表单在什么验证组中：

```
public function getDefaultOptions(array $options) {
    return array(
        'data_class' => 'Capsa\Bundle\ClubCommonBundle\Entity\User',
        'validation_groups' => array('UpdateOldUsers')

    );
} 
```

然后在控制器中，检查`if ($form->isValid())`

# delphi - 用鼠标缩放：选框颜色

> ID：10093166
> 
> 赞同：3
> 
> 时间：2012-04-10T17:05:23.790
> 
> 标签：delphi, delphi-7, vcl, teechart

当我在图表（TeeChart）上使用鼠标缩放（左键并拖动右下角）时，光标会为缩放区域绘制一个选取框矩形。选框线在浅灰色中几乎看不到。有什么方法可以改变选框线的颜色（比如黑色、红色等）以使其更具对比度和易于查看？

我正在使用 VCL TChart 4.04。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T03:15:02.693

我认为这在 TChart v.4.04 中是不可能的，或者至少还没有找到任何可能做到这一点的属性。

至少在 TChart v.8.03（Delphi 2009 附带的那个）中有属性`TChart.Zoom.Brush`，`TChart.Zoom.Pen`您可以在其中设置选择矩形的颜色和其他属性。所以，如果你有更新版本的 TChart，你可能会使用这样的东西：

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  Chart1.Zoom.Pen.Width := 2;
  Chart1.Zoom.Pen.Color := clRed;
end; 
```

# c# - 包含 7 亿条记录的表的数据库

> ID：10093170
> 
> 赞同：3
> 
> 时间：2012-04-10T17:06:12.260
> 
> 标签：c#, .net, sql-server, database, sqlite

> **可能重复：**
> [具有非常大的数据库文件的 sqlite 的性能特征是什么？](https://stackoverflow.com/questions/784173/what-are-the-performance-characteristics-of-sqlite-with-very-large-database-file)

我想创建一个 .Net 应用程序，该应用程序使用一个数据库，其中一个表中包含大约 7 亿条记录。我想知道 SQLite 的性能是否可以满足这种情况，或者我应该使用 SQL Server。我喜欢 SQLite 给我的可移植性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T17:11:57.600

一定要选择 SQL Server。SQLite 中的 7 亿条记录太多了。

使用 SQLite，您有以下限制

*   单进程写入。
*   无镜像
*   无复制

查看此线程：[具有非常大的数据库文件的 sqlite 的性能特征是什么？](https://stackoverflow.com/questions/784173/what-are-the-performance-characteristics-of-sqlite-with-very-large-database-file)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T17:17:51.147

SQLite 应该能够处理这么多数据。但是，您可能必须对其进行配置以使其增长到这个大小，并且您不应该在 SQLite 的“内存中”实例中拥有这么多数据，这只是一般原则。

有关更多详细信息，请参阅[此页面](http://www.sqlite.org/limits.html)，该页面解释了 SQLite 引擎的实际限制。相关的配置设置是页面大小（通常为 64KB）和页面计数（最多 64 位 int 的最大值约为 21 亿）。算一算，整个数据库可以占用超过 140TB。由具有 700m 行的单个表组成的数据库将是数十个 gigs 的数量级；易于管理。

然而，仅仅因为 SQLite 可以存储这么多数据并不意味着你应该。SQLite 对于大型数据存储的最大缺点是 SQLite 代码作为进程的一部分运行，使用调用它的线程并占用沙箱中的内存。您无法获得面向服务器的 DBMS 中可用的工具来“分而治之”大型查询或数据存储，例如复制/集群。在处理这样的大表时，插入/删除将需要很长时间才能将其放置在正确的位置并更新所有索引。选择可能是宜居的，但仅限于索引查询；页面或表格扫描绝对会杀死你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T17:21:11.720

700m很多。

给你一个想法。假设您的记录大小为 4 个字节（基本上存储一个值），那么您的数据库将超过 2GB。如果您的记录大小接近 100 字节，那么它接近 65GB...（这不包括索引使用的空间和事务日志文件等）。

我们在大型数据库上做了很多工作，我永远不会考虑使用 SQLLite 来处理这种规模的任何事情。坦率地说，“可移植性”是您最不关心的问题。为了以任何响应能力查询该大小的数据库，您将需要一个适当大小的数据库服务器。我会*从*32GB 的 RAM 和快速驱动器开始。

如果它的写入量超过 90%，那么您可能会使用较小的 RAM。如果它的阅读量很大，那么您将需要尝试构建它，以便机器可以在 RAM 中加载尽可能多的数据库（或至少是索引）。否则，您将依赖于磁盘主轴速度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T17:20:44.157

我有类似记录数的表，并且在检索方面没有问题。

对于初学者，您可以从硬件和服务器分配开始。有关示例，请参见：[http ://www.sqlservercentral.com/blogs/glennberry/2009/10/29/suggested-max-memory-settings-for-sql-server-2005_2F00_2008/](http://www.sqlservercentral.com/blogs/glennberry/2009/10/29/suggested-max-memory-settings-for-sql-server-2005_2F00_2008/)

无论记录的大小或数量，只要您：

*   在外键上创建索引，
*   在视图中存储常见查询 (http://en.wikipedia.org/wiki/View_%28database%29)，
*   并定期维护数据库和表

你应该没事。此外，为每列设置正确的列类型/大小将有所帮助。

# java - java.lang.SecurityException：密封违规：

> ID：10093176
> 
> 赞同：9
> 
> 时间：2012-04-10T17:06:44.710
> 
> 标签：java, gwt

我正在为我的 Java 应用程序使用 GWT。当我尝试将其作为 Web 应用程序运行时，出现以下错误：

> java.lang.SecurityException：密封违规：无法密封包org.mortbay.util：已加载

如果我用谷歌搜索错误，我找不到任何有用的东西。我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T17:17:26.810

这意味着包裹已密封，您尝试加载另一个也包含该包裹的罐子。

请参阅[在 JAR 文件中密封包](http://docs.oracle.com/javase/tutorial/deployment/jar/sealman.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T17:22:03.297

您当前的异常表明您在项目中使用了 Jetty。可能的问题是您的类路径中有两次可用的这个 jar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T07:54:08.757

转到你的 jar 文件，你会看到 .MF 文件。打开它。你会发现 Sealed:true。编辑它，让它为假。结束。

# java - 用Java更改现有文件的编码？

> ID：10093178
> 
> 赞同：9
> 
> 时间：2012-04-10T17:06:54.633
> 
> 标签：java, file, encoding

我需要以编程方式将一组 *nix 脚本的编码从 Java 更改为 UTF-8。我不会给他们写任何东西，所以我试图找到最简单|最快的方法来做到这一点。文件不是太多，也不是那么大。我可以：

*   使用将 UTF-8 设置为编码的 OutputStream “写入”一个空字符串
*   由于我已经在使用 FileUtils（来自 Apache Commons），我可以读取|写入这些文件的内容，将 UTF-8 作为编码传递

没什么大不了的，但是以前有人遇到过这种情况吗？这两种方法都有什么缺点吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-10T19:05:13.717

根据要求，并且由于您使用的是 commons io，这里是示例代码（错误检查风）：

```
import java.io.File;
import java.io.IOException;
import org.apache.commons.io.FileUtils;

public class Main {
    public static void main(String[] args) throws IOException {
        String filename = args[0];
        File file = new File(filename);
        String content = FileUtils.readFileToString(file, "ISO8859_1");
        FileUtils.write(file, content, "UTF-8");
    }
} 
```

# c# - ViewModel 上的 ObservableObject 或 INotifyPropertyChanged

> ID：10093180
> 
> 赞同：16
> 
> 时间：2012-04-10T17:06:56.770
> 
> 标签：c#, wpf, visual-studio-2010

我很好奇什么是最好的处理方式`ViewModels`。是实现接口好`INotifyPropertyChanged`还是从`ObservableObject`.

`ObservableObject`类实现`INotifyPropertyChanged`并执行一些无聊的代码，例如`RaisePropertyChanged`.

`INotifyPropertyChanged`需要实现`PropertyChanged`事件。

从我的角度来看，使用起来似乎更合乎逻辑`ObservableObject`，但在大多数教程中，他们`INotifyPropertyChanged`在`ViewModel`.

你认为这是为了简单还是有逻辑的原因？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-10T17:12:55.140

[`ObservableObject`](http://msdn.microsoft.com/en-us/library/ff653818.aspx)是 Microsoft.Practices.Composite.Presentation 的一部分 - 即 Prism。它也在[MVVM Light](https://github.com/lbugnion/mvvmlight)和[MVVM Foundation](http://mvvmfoundation.codeplex.com/)中实现。

[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)是 System.ComponentModel 的一部分 - 即它在核心库中。

因此，如果您还没有包括 Prism 或我坚持使用的其他框架之一`INotifyPropertyChanged`。仅仅为了获得这一门课而包含它似乎没有什么意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T17:19:06.403

我什至会说，如果您要实现很多 ViewModel，那么实现 INotifyPropertyChanged 需要大量的管道代码，您最好创建自己的 ViewModel 基类，或者使用其中之一由 MVVM 框架为您提供（[MVVM Light](http://mvvmlight.codeplex.com/)是我选择的框架）。

否则，你真的不是很“干”（不要重复自己）。

*编辑 - 意外的一个想法*

请记住，ObservableObject 通常只是 ViewModel 类相同基本功能的轻量级实现，为您提供 INPC，但省略了您可能在完整 ViewModel 中使用的一些其他内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T17:16:18.677

一般来说，在所有其他条件相同的情况下，我建议采用实现接口而不是从祖先类派生的方法。您可以实现任意数量的接口，但您只有一个父级，所以我更喜欢“明智地”使用我的父级。在我可以得到我想要实现接口的情况下，我更愿意让我的选项在以后继承。

# asp-classic - MSBuild - 一次执行所有配置转换 - 并转换其他文件

> ID：10093185
> 
> 赞同：3
> 
> 时间：2012-04-10T17:07:18.297
> 
> 标签：asp-classic, msbuild, web-config-transform

我一直在为我们拥有的网站编写构建脚本。该网站是一个经典的 asp web 应用程序，在经典的 asp web 应用程序的文件夹中包含一个 asp.net 网站。

我们有不同版本的 global.asa 需要替换，而不是不同的 Web 配置。我们正在迁移到持续集成环境中，其中很多内容对我来说仍然是新事物。我编写了一个执行以下任务的构建脚本。

1.  如果 buildartifacts 目录存在，则清理它。
2.  使用传入的任何配置构建解决方案文件。这会在单独的文件夹中生成每个项目的输出。
3.  将文件复制到所需的文件夹结构中。
4.  使用 MSDeploy 将结果打包为同步。

我的第一个问题是这个...

当我像这样运行 MSBuild 任务时......

```
<MSBuild Projects="$(SolutionFileName)" 
         Properties="Configuration=$(Configuration);OutDir=%(BuildArtifacts.FullPath)" /> 
```

它构建 Web 应用程序，但不应用任何转换。我会假设 MSBuild 会自动应用转换。相反，我最终在包含构建的输出文件夹中获得了所有 3 个配置文件。为什么是这样？我在这里做了一些搜索，[在这里](https://stackoverflow.com/questions/9859698/msbuild-project-deploy-to-local-folder-with-config-transformed)[，](https://stackoverflow.com/questions/2905151/msbuild-script-and-vs2010-publish-apply-web-config-transform)他们正在使用单独的任务来执行转换。如果 Visual Studio 可以应用转换并且 Visual Studio 使用 MSBuild 我认为 MSBuild 可以应用转换？不知道 MSBuild 配置吗？另外，如果我必须单独执行，如果文件夹结构的每个级别的多个文件夹中有多个配置文件，我是否可以一次执行所有转换。

我的第二个问题是......作为一个经典的 asp web 应用程序，我们不能真正为这部分使用配置文件，因为......我不确定经典的 asp web 应用程序如何访问配置文件？所以我们有不同版本的 global.asa 文件，通常会被手动替换。我想我可以进行某种搜索/复制我们当时需要的特定 asa 文件，但是有没有办法使用转换来完成这项任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T04:17:33.673

也许这不是您所需要的。我正在使用[XmlPreprocess 工具](http://xmlpreprocess.codeplex.com/)进行配置文件操作。我正在为多个环境使用一个映射文件。您可以通过 Excel 编辑映射文件。这是非常容易使用。

您可以使用 Exec 任务从 MSBuild 脚本中调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:10:59.097

关于转换的问题......一旦我们用 msdeploy 整理了部署，我们发现 msdeploy 实际上会在部署时执行转换。它将转换数据存储在使用包创建的 xml 文件之一中。

# python - 根据开始索引和结束索引删除字符串

> ID：10093186
> 
> 赞同：1
> 
> 时间：2012-04-10T17:07:21.967
> 
> 标签：python

所以，我有一堆长字符串，因此想了一种有效的方法来做这个操作假设我有一个类似的字符串

```
 "< stuff to remove> get this stuff <stuff to remove> 
```

所以，我试图提取“得到这个东西”

所以我正在写这样的东西。

```
 strt_pos = 0
  end_pos = 0
 while True:
   strt_idx = string.find(start_point, strt_pos) # start_point = "<" in our example
   end_idx  = string.find(end_point, end_pos)   # end_point = ">" in our example
   chunk_to_remove = string[strt_idx:end_idx]
    # Now how do i chop this part off from the string??
   strt_pos = strt_pos + 1
    end_pos = end_pos + 1
   if str_pos >= len(string) # or maybe end_pos >= len(string):
      break 
```

实现这个的更好方法是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:11:25.720

使用正则表达式：

```
>>> s = "< stuff to remove> get this stuff <stuff to remove>"
>>> import re
>>> re.sub(r'<[^<>]*>', '', s)
' get this stuff ' 
```

该表达式`<[^<>]*>`匹配以 开头`<`、以 结尾`>`并且两者都没有`<`或`>`介于两者之间的字符串。然后该`sub`命令将匹配项替换为空字符串，从而将其删除。

然后，您可以根据需要调用`.strip()`结果以删除前导和尾随空格。

当然，例如，当您有嵌套标签时，这将失败，但它适用于您的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T17:11:58.683

正则表达式将是一种简单的方法（尽管不一定如 jedwards 的回答所示更快）：

```
import re
s = '< stuff to remove> get this stuff <stuff to remove>'
s = re.sub(r'<[^>]*>', '', s) 
```

在这之后`s`将是字符串`' get this stuff '`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T17:16:55.030

我不确定您正在执行的搜索操作是否是问题的一部分。如果你只是说你有一个开始索引和一个结束索引，并且你想从字符串中删除这些字符，那么你不需要一个特殊的函数。Python 允许您对字符串中的字符使用数字索引。

```
> x="abcdefg"
> x[1:3]
'bc' 
```

您要执行的操作类似于`x[:strt_idx] + x[end_idx:]`. （如果省略第一个参数，则表示“从头开始”，如果省略第二个参数，则表示“继续到结尾”。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T17:20:55.373

如果您有字符串的开始和结束索引，则可以执行以下操作：

```
substring = string[s_ind:e_ind] 
```

where`s_ind`是您要包含在字符串`e_ind`中的第一个字符的索引，并且是您*不*希望包含在字符串中的第一个字符的索引。

例如

```
string = "Long string of which I only want a small part"
#         012345678901234567890123456789012345678901234
#         0         1         2         3
substring = string[21:32]
print substring 
```

印刷`I only want`

您可以像现在一样找到索引。

* * *

**编辑：**关于效率，这种类型的解决方案实际上比正则表达式解决方案***更有效。***原因是您不一定需要的正则表达式涉及大量开销。

我鼓励你自己测试这些东西，而不是盲目地去做人们声称最有效的东西。

考虑以下测试程序：

```
#!/bin/env python

import re
import time

def inner_regex(s):
    return re.sub(r'<[^>]*>', '', s)

def inner_substr(s):
    s_ind = s.find('>') + 1
    e_ind = s.find('<', s_ind)
    return s[s_ind:e_ind]

s = '<stuff to remove> get this stuff <stuff to remove>'

tr1 = time.time()
for i in range(100000):
    s1 = inner_regex(s)
tr2 = time.time()
print("Regex:     %f" % (tr2 - tr1))

ts1 = time.time()
for i in range(100000):
    s2 = inner_substr(s)
ts2 = time.time()
print("Substring: %f" % (ts2 - ts1)) 
```

输出是：

```
Regex:     0.511443
Substring: 0.148062 
```

换句话说，使用正则表达式方法比原来的更正方法***慢3 倍以上。***

* * *

**编辑：**关于已编译正则表达式的评论，它比未编译的正则表达式快，但仍比显式子字符串慢：

```
#!/bin/env python

import re
import time

def inner_regex(s):
    return re.sub(r'<[^>]*>', '', s)

def inner_regex_compiled(s,r):
    return r.sub('', s)

def inner_substr(s):
    s_ind = s.find('>') + 1
    e_ind = s.find('<', s_ind)
    return s[s_ind:e_ind]

s = '<stuff to remove> get this stuff <stuff to remove>'

tr1 = time.time()
for i in range(100000):
    s1 = inner_regex(s)
tr2 = time.time()

tc1 = time.time()
r = re.compile(r'<[^>]*>')
for i in range(100000):
    s2 = inner_regex_compiled(s,r)
tc2 = time.time()

ts1 = time.time()
for i in range(100000):
    s3 = inner_substr(s)
ts2 = time.time()

print("Regex:          %f" % (tr2 - tr1))
print("Regex Compiled: %f" % (tc2 - tc1))
print("Substring:      %f" % (ts2 - ts1)) 
```

回报：

```
Regex:          0.512799  # >3 times slower
Regex Compiled: 0.297863  # ~2 times slower
Substring:      0.144910 
```

***故事的寓意：***虽然正则表达式是工具箱中的一个有用工具，但它们根本不如可用的更直接的方法高效。

并且不要相信别人的话，你可以很容易地测试自己。

# javascript - 合并 $.get 和 $.ready

> ID：10093197
> 
> 赞同：3
> 
> 时间：2012-04-10T17:08:35.663
> 
> 标签：javascript, jquery, ajax, race-condition

简而言之，我有一个有时在页面加载之前完成的 ajax 调用，所以我尝试将回调包装在 中`$( fn )`，但是如果页面加载，回调不会触发......有人对此有很好的解决方案吗？

```
$.get( '/foo.json', function( data ){
    $( function(){
        // won't get here if page ready beats the ajax call

        // process data
        $( '.someDiv' ).append( someData );
    } );
} ); 
```

是的，我知道如果我翻转它们的顺序，它总是可以工作的，但是我的 ajax 调用将不必要地推迟到文档准备好之前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:14:24.807

不，添加到 onDOMready 的函数将始终执行，如果事件已经发生，将立即执行。[请参阅http://api.jquery.com/ready/](http://api.jquery.com/ready/)上的文档：仅当您使用`$(document).bind("ready")`它时，事件已经触发时才会执行。

未触发事件处理程序的一个可能原因是其他处理程序抛出错误。jQuery 有一个用于待执行处理程序的内部数组，处理本机 DOM 加载事件的方法只是对其进行迭代。如果较早的处理程序之一出现错误，则循环中断并且之后添加的其他处理程序将不会被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:19:32.517

```
var result;
$(document).on('ready.specialAjax', function () {
   if (result) {
      $(".someDiv").append(result);
   }
});
$.get('/foo.json').done(function (data) {
   if ($(".someDiv").length) {
      $(".someDiv").append(data);
      $(document).off('ready.specialAjax');
   }
   else {
      result = data;
   }
}); 
```

本质上，如果可以的话，ajax 会立即尝试附加到 someDiv。否则，它会将 ajax 结果存储在其中，`result`并`document.ready`在运行时自行附加。这样`.off`做是为了防止数据被追加两次，以防 ajax 成功执行。这无关紧要，因为在这种情况下结果将是空白的，但只是为了干净。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T17:26:33.433

这是使用延迟的另一种方法。显然，您可以使用 deferreds `document.ready`，这有点奇怪：

```
$(document).data("readyDeferred", $.Deferred()).ready(function() {
   $(document).data("readyDeferred").resolve();
});
var jqxhr = $.get('/foo.json');
$.when(jqxhr, $(document).data('readyDeferred'))
   .done(function (jqxhr) {
      $(".someDiv").append(jqxhr[2].responseText);
   }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T17:16:06.803

将结果加载到全局变量中，并将它们加载到 DOM-ready 上。关键是如果结果为空，则迭代`setTimeout`直到它们不是。

```
var result;
$.get("/foo.json", function(data) {
    result = data;
});

function insertAJAX() {
    if(result !== undefined) {
        $(".someDiv").append(result);
    } else {
        setTimeout(insertAJAX, 250);
    }
}

$(function() {
    insertAJAX();
}); 
```

请注意，您可以添加一个超时计数器以在一定时间后停止尝试，以防您的 AJAX 出于任何原因从不返回结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T17:19:48.377

您需要在 AJAX 回调中检查 dom 是否准备就绪，以确保您要在准备好后追加还是立即追加。见下面的代码，

```
var isDomReady = false;

$.get( '/foo.json', function( data ){
    if (isDomReady) {
      $(function(){  $('.someDiv').append( someData );   });
    } else {
       $('.someDiv').append( someData );  
    }
} );

$(function(){
   isDomReady = true;
   // and all you ready code
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T17:21:57.470

这样做不会有什么坏处。

```
var getData;
$.get( '/foo.json', function( data ){
    getData = data;
});
$(function() {
    var intt = setTimeinterval(function() {
         if(getData.length) {
              //do your task
              clearInterval(intt);
         }
    }, 100);
}); 
```

# java - 有没有一种简单的方法可以在 Eclipse 中分析 Java 程序？

> ID：10093200
> 
> 赞同：3
> 
> 时间：2012-04-10T17:08:41.620
> 
> 标签：java, eclipse

我更喜欢使用 eclipse 进行开发，但一直无法弄清楚如何在其中进行分析。我读到我需要打开分析透视图，但是当我查看时选项不存在（[eclipses 网站上的文档似乎很旧](http://www.eclipse.org/tptp/home/documents/tutorials/profilingtool/profilingexample_32.html)）。我查看了市场，并没有明确的选择。所以我一直在做的（这不是最好的选择，但做了我想要的）是将我的代码复制到 netbeans 并运行内置的分析工具，该工具以图形方式显示我大部分时间都花在了哪里（它只是烦人必须继续将代码从 eclipse 复制/粘贴到 netbeans，因为我更喜欢 eclipse 中的设置而不是 netbeans 但无法配置文件）。

是否有一个我可以在 Eclipse 中使用的简单直观的分析器？

如果有一个明显的方法可以做到这一点，我是一个新手，我很抱歉（或者如果它内置在一个通用的调试器中，我还没有学会如何使用它们）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:14:09.167

您可以在 Eclipse 中启动您的应用程序并使用 VisualVM 或 YourKit 或者您可以使用[TPTP](http://www.eclipse.org/tptp/)。

# orm - ORM - 链接表错误

> ID：10093206
> 
> 赞同：0
> 
> 时间：2012-04-10T17:09:14.183
> 
> 标签：orm, coldfusion, coldfusion-10

我正在使用 ColdBox 3.5 和 ColdFusion 10 ORM 开发博客应用程序，我随机收到以下错误消息：

> 错误类型：应用程序：[N/A]
> 
> 错误消息：休眠操作中的异常。更新/删除的行不存在或会话包含陈旧数据。
> 
> 根本原因：org.hibernate.StaleObjectStateException：行已被另一个事务更新或删除（或未保存的值映射不正确）：[Entry#297e1bfa369cf17501369d26ffae00a4]

**/model/entry/Entry.cfc**：

```
component
    persistent="true"
    table="Entry"
    output="false"
{
    // primary key
    property name="entryID" fieldtype="id" ormtype="string" type="string" length="32" generator="uuid";

    // properties
    property name="title" fieldtype="column" ormtype="string" type="string" length="100" notnull="true";
    property name="alias" fieldtype="column" ormtype="string" type="string" length="100" notnull="true";
    property name="body" fieldtype="column" ormtype="string" type="string" sqltype="nvarchar(max)" notnull="true";
    property name="allowComments" fieldtype="column" ormtype="boolean" type="boolean" sqltype="bit" dbdefault="1" default="true" notnull="true";
    property name="released" fieldtype="column" ormtype="boolean" type="boolean" sqltype="bit" dbdefault="1" default="true" notnull="true";
    property name="releasedDate" fieldtype="column" ormtype="timestamp" type="date";
    property name="addDate" fieldtype="timestamp" ormtype="timestamp" type="date";

    // relations
    property name="categories" fieldtype="many-to-many" cfc="model.category.Category" linktable="EntryCategory" fkcolumn="entryID" inversejoincolumn="categoryID" singularname="category" cascade="all" lazy="true";
    property name="comments" fieldtype="one-to-many" cfc="model.entryComment.EntryComment" fkcolumn="entryID" singularname="comment" cascade="all-delete-orphan";
    property name="user" fieldtype="many-to-one" cfc="model.user.User" fkcolumn="userID" notnull="true" cascade="save-update";
    property name="views" fieldtype="one-to-many" cfc="model.entryView.EntryView" fkcolumn="entryID" singularname="view" cascade="all-delete-orphan";

    // validation
    this.constraints = {
        "title" = {"required" = true},
        "body" = {"required" = true},
        "allowComments" = {"required" = true, type="boolean"},
        "released" = {"required" = true, type="boolean"},
        "categories" = {size=1},
        "user" = {type="component"}
    };
} 
```

**/model/category/Category.cfc**：

```
component
    persistent="true"
    table="Category"
    schema="system"
    output="false"
{
    // primary key
    property name="categoryID" fieldtype="id" ormtype="string" type="string" length="32" generator="uuid";

    // properties
    property name="name" fieldtype="column" ormtype="string" type="string" length="50" notnull="true";
    property name="alias" fieldtype="column" ormtype="string" type="string" length="50" notnull="true";
    property name="description" fieldtype="column" ormtype="string" type="string" default="" length="200";
    property name="addDate" fieldtype="timestamp" ormtype="timestamp" type="date";
    property name="active" fieldtype="column" ormtype="boolean" type="boolean" sqltype="bit" dbdefault="1" default="true" notnull="true";

    // relations
    property name="entries" fieldtype="many-to-many" cfc="model.entry.Entry" linktable="EntryCategory" fkcolumn="categoryID" inversejoincolumn="entryID" lazy="true" cascade="all" singularname="entry" inverse="true";

    // validation
    this.constraints = {
        "name" = {"required" = true},
        "active" = {"required" = true, type="boolean"}
    };
} 
```

这是我正在运行的代码：

```
<cfscript>
    entry = entityNew("Entry", {
        "title" = "test",
        "body" = "test",
        "alias" = "test",
        "allowComments" = 0,
        "released" = 0,
        "user" = entityLoadByPK("User", "297e1bfa3697d377013697f53ca10084")
    });

    // works 1 out of 5 times
    entry.setCategories([entityLoadByPK("Category", "297e1bfa36986e69013698c3e54f000d")]);

    // works every time
    //entry.setCategories(entityLoad("Category", "297e1bfa36986e69013698c3e54f000d"));
    //entry.setCategories(entityLoad("Category"));

    entitySave(entry);
    ormFlush();
</cfscript> 
```

请注意标记为“5 次中有 1 次”和“每次都有效”的部分。我不明白我做错了什么。我有其他类似的对象，它们使用链接表，并且我收到类似的错误消息。我已经查看了 SQL 日志。当它准备好插入`EntryCategory`表时，似乎会发生错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:20:48.293

使用 HQL 并在 (?) 中使用 where ID。这很好用。

如果实体已经有一个数组，请先使用 ArrayClear()。

更新：

```
categories = ormExecuteQuery("from Category where Id IN (:Ids)",
                             {Ids=listToArray(FORM.categoryIDs)});
entry.setCategories(categories); 
```

# magento - 有没有办法为 Magento admin_user 生成登录令牌？

> ID：10093208
> 
> 赞同：2
> 
> 时间：2012-04-10T17:09:22.123
> 
> 标签：magento

我们有商家登录到一个系统，我们希望通过某种管理令牌将他们链接到我们的 Magento 实例，这样他们就可以直接登录，而无需手动登录。

我看到表`rp_token`中的字段，`admin_user`但这似乎与密码重置有关，这可能不是我们想要的。

做了一些搜索，找到了这个相关但专门处理密钥的[线程（这可能是我在解决这个问题后要解决的第二个挑战）。](https://stackoverflow.com/questions/5745464/linking-to-magento-admin-from-outside-admin-panel)

我猜这在核心中不受支持，但也许有一个很好的扩展可以做到这一点？

或者如果没有，最好的实施方法是什么？我猜可能有一个事件我可以查看 GET 或 POST 参数（可能是用户名和哈希密码的哈希），然后绕过依赖用户名和纯文本的正常 login() 方法密码。

感觉这可能有点冒险？有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:12:47.527

> 感觉这可能有点冒险？有什么想法吗？

这是非常危险的，但可以安全地完成。我可以谈谈我在开发 QuarkBar 时遇到的类似问题，QuarkBar 是一个将于本周末发布的 Magento 管理栏。

因此，要显示该栏，我需要验证管理员是否已登录。不幸的是，这在前端模块上很难做到，因为有两个单独的会话。所以为了解决这个问题，我创建了一个`quarkbar_session`表。管理员登录后，我使用 OpenSSL 存储安全加密密钥，然后检查每个请求并将其与 cookie 匹配。如果匹配，则验证管理员。

当然，这与您想要的有点不同，因为我在管理员登录时首先设置了密钥（这是一个观察者事件）。但它应该让你开始。

来源（未准备好用于生产，将其用于创意）：[https ://github.com/zschuessler/QuarkBar/tree/master/app/code/community/Zaclee/QuarkBar](https://github.com/zschuessler/QuarkBar/tree/master/app/code/community/Zaclee/QuarkBar)

另外，请注意我正在存储安全密钥，以便我可以访问管理后端。您链接中的解决方案说禁用它。您不必这样做，请查看 QuarkBar 的实施。

# google-app-engine - GAE Java 的授权框架

> ID：10093210
> 
> 赞同：2
> 
> 时间：2012-04-10T17:09:31.417
> 
> 标签：google-app-engine, spring-security, jersey, jaas, shiro

我正在尝试为 GAE 选择一个身份验证框架，并且会对其他人在此主题上的经验非常感兴趣。

到目前为止，我查看了[Shiro和 Spring-Security。](http://www.gdevelop.com/blog/2010/12/apache-shiro-on-appengine/)你能推荐什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:49:58.237

Luke Taylor 写了一篇很好的[博客文章](http://blog.springsource.org/2010/08/02/spring-security-in-google-app-engine/)，解释了如何一起使用 Spring Security 和 GAE。我相信 Shiro 和 Spring Security 都适合 GAE，所以这真的是你需要什么的问题。Shiro 实现起来很简单，但也很有限。相比之下，Spring Security 要强大得多，但这带来了一些额外的复杂性。话虽如此，最近的版本使用起来要简单得多（尤其是在引入命名空间之后）。

我个人会去春天

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-25T10:13:28.653

就个人而言，我会选择**GAE + Guice（Google 的轻量级依赖注入）+ Objectify 5 + JAx-Rs 实现（RestEasy 或 Jersey）+ Shiro。**

你可以在这里找到一个很好的例子 - [http://hackersv.blogspot.de/2014/02/shiro-guice-maven-and-google-app-engine.html](http://hackersv.blogspot.de/2014/02/shiro-guice-maven-and-google-app-engine.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-02T17:41:01.593

[Jello-framework](http://jello-framework.com/guide/authorization.html)是用于 Google App Engine 的新 Java 框架，其中包括全面的数据授权模型。Jello 的主要功能之一是其内联授权模型。使用 Jello，您可以为任何分辨率的数据元素（命名空间、实体、字段、操作）分配不同的访问级别，并指定谁有权通过 REST API 访问数据。

# emacs - elisp 中最好的 YAML 解析器是什么？

> ID：10093211
> 
> 赞同：16
> 
> 时间：2012-04-10T17:09:36.223
> 
> 标签：emacs, elisp, yaml

我想用 elisp 代码读取 YAML 中的配置。搜索但未在 elisp 中找到现成的解析器。我错过了什么有用的东西吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-09-14T01:35:34.870

三年后，我们有了[动态模块](https://www.gnu.org/software/emacs/manual/html_node/elisp/Dynamic-Modules.html)，[emacs-libyaml](https://github.com/syohex/emacs-libyaml)看起来很有趣。它使用动态模块系统在 Elisp中公开[libyaml的 C 绑定。](https://github.com/yaml/libyaml)我希望性能会很棒，尽管我还没有测试过。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-07T14:25:32.273

几个月后：我想要它，所以这里是如何在 python 的帮助下做到这一点：

```
 (defun yaml-parse ()
  "yaml to json to a hashmap of current buffer, with python.

   There is no yaml parser in elisp.
   You need pyYaml and some yaml datatypes like dates are not supported by json."
  (interactive)
  (let ((json-object-type 'hash-table))
    (setq  myyaml (json-read-from-string (shell-command-to-string (concat "python -c 'import sys, yaml, json; json.dump(yaml.load(sys.stdin), sys.stdout, indent=4)' < " (buffer-file-name))))))
  ;; code here
  ) 
```

它在`json.el`.

你需要 python 的 pyyaml:  `pip install PyYaml`。

json.el：[http ://edward.oconnor.cx/2006/03/json.el](http://edward.oconnor.cx/2006/03/json.el)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-16T18:12:49.797

六个月后，答案似乎是**“不存在可靠且易于使用的 elisp YAML 解析器”。**

如果您真的想在 elisp 中读取 YAML 文档并将其转换为可以与 elisp 交互的内容，您将不得不进行一些繁琐的工作。EmacsWiki [YAML 页面](http://emacswiki.org/emacs/YamlMode)没有给你太多，规范的[YAML 模式](https://github.com/yoshiki/yaml-mode)有语法提示，但没有实际的解析器。幸运的是，有人已经[实现了一个 YAML 解析网络应用程序](http://yaml-online-parser.appspot.com/)，它接受 YAML 并输出 JSON 或 Python——你可以尝试看看它的底层，或者使用它来检查你自己编写的任何 YAML 解析器。

祝你好运。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-03-26T05:06:09.127

又过了三年，我很高兴地说现在有一个用 Elisp 编写的 YAML 解析器：[https ://melpa.org/#/yaml](https://melpa.org/#/yaml)

它的 API 与 类似`json-parse-string`，您可以指定它的对象和列表类型。以下是它的用法示例：

```
(yaml-parse-string "
-
  \"flow in block\"
- >
 Block scalar
- !!map # Block collection
  foo : bar" :object-type 'alist)
;; => ["flow in block" "Block scalar\n" (("foo" . "bar"))] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-12-02T11:17:34.600

为了改进使用 python 的 Ehvince 答案，一种更通用的方法，允许解析字符串、缓冲区和文件：

```
(defun yaml-parse (string)
  "yaml STRING to json to a hashmap of current buffer, with python."
  (interactive)
  (with-temp-buffer
    (insert string)
    (when (zerop (call-process-region (point-min) (point-max) "python" t t nil "-c" "import sys, yaml, json; json.dump(yaml.load(sys.stdin), sys.stdout)"))
      (goto-char (point-min))
      (json-read))))

(defun yaml-parse-buffer (&optional buffer)
  "Parse yaml BUFFER."
  (with-current-buffer (or buffer (current-buffer))
    (yaml-parse (buffer-substring-no-properties (point-min) (point-max)))))

(defun yaml-parse-file (file)
  "Parse yaml FILE."
  (with-temp-buffer
    (insert-file-contents-literally file)
    (yaml-parse (buffer-substring-no-properties (point-min) (point-max))))) 
```

您可以使用 json-* 变量来控制类型映射。

编辑：添加 yaml-parse-file

# css - CSS line-height 小于 font-size 导致 div 内的奇怪溢出

> ID：10093218
> 
> 赞同：2
> 
> 时间：2012-04-10T17:10:00.373
> 
> 标签：css

我遇到了一些奇怪的 CSS 行为。但是，它在 Firefox、Chrome 和 IE (9) 上的工作方式完全相同，所以我怀疑它是 CSS 标准的一部分，但是，我找不到任何关于为什么会这样的参考。

我有一个 div，里面有一些文字。当我设置font-size大于line-height时，div的高度是用line-height计算的，但是内容要大很多。也就是说，框中的文本比框本身大得多。我对这里的情况有一个 jsfiddle：

[http://jsfiddle.net/RVgzV/4/](http://jsfiddle.net/RVgzV/4/)

如果将鼠标移动到边界框上方，您可以看到悬停 css 在您进入 div 之前激活。同样，单击靠近但仍在框外会激活 javascript 单击事件。在这里查看内容框的位置稍微容易一些：

[http://jsfiddle.net/RVgzV/5/](http://jsfiddle.net/RVgzV/5/)

当 div 上的 display 属性设置为 inline 时，高度计算正确（由于各种样式原因，我不能这样做）。另外，如果我将溢出属性设置为隐藏，问题就解决了。对我来说，这表明内容大于其包含框，但我不知道为什么。特别是我想知道为什么对象的“高度”css框模型属性小于页面上显示的实际高度。

我查看了 CSS 规范，但我没有在那里看到我的答案，但我怀疑那里可能有我遗漏的东西。

**编辑**

我找到了以下链接，其中提到了我遇到的问题，但我不知道它们的来源是什么，或者为什么会这样。

另外，为了回应我收到的一些答案，我不是在寻找如何修复我的 css 以使悬停问题不再出现，我首先在寻找它**为什么**会发生。

**再次编辑** 显然，框的任何内容，无论是否在框的边界内都会调用框上的悬停。（请参阅 Lister 先生对[This answer](https://stackoverflow.com/questions/10093218/css-line-height-smaller-than-font-size-results-in-an-incorrectly-sized-div#10093816)的评论。我真正想知道的是规范中这种行为的来源。它在那里？还是所有浏览器都同意的实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:49:53.893

使用 overflow:hidden 隐藏 div 之外的任何内容。

它可以正确地作为子元素存在并且可以悬停在元素的块区域之外。

这种技术经常用于通过使用负边距/填充/绝对定位等来移动块元素的内部片段。但这些片段将始终保持父级的悬停能力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:28:59.893

div 的大小不正确。这是正常行为。您错误地使用了 CSS。div-height 由其中的行数定义。您给出了比行高更大的字体大小，这意味着只能使用最大行高来定义所需的行数。

顺便说一句，定义字体占用大于行高有什么意义？

# gdb - 反汇编输出：mov edx,DWORD PTR [ebp-28]

> ID：10093221
> 
> 赞同：0
> 
> 时间：2012-04-10T17:10:07.210
> 
> 标签：gdb

在 disassemble 28 的以下输出中是十进制还是十六进制？mov edx,DWORD PTR [ebp-28]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T00:46:15.987

> 在 disassemble 28 的以下输出中是十进制还是十六进制？mov edx,DWORD PTR [ebp-28]

很可能是十进制。那是GDB的输出吗？

较新版本的 GDB 使用十六进制，并对其进行了明确说明：

```
 0x000cadb6 <+6>: mov    eax,DWORD PTR [ebp+0x8] 
```

# csh - 如何在 csh 中执行管道的结果？

> ID：10093222
> 
> 赞同：0
> 
> 时间：2012-04-10T17:10:11.060
> 
> 标签：csh, tcsh

我需要执行管道的结果，但不使用临时文件（pid 需要保持不变……该死的回归系统）。

因此，如果我有一个包含以下内容的测试文件：

```
echo Do this 
```

我理想地想要运行类似的东西：

```
cat test_file | eval 
```

这将返回：

```
Do this 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:24:27.850

试试这个：

```
eval `cat test_file` 
```

但要注意[代码注入。](http://en.wikipedia.org/wiki/Code_injection)

# facebook-graph-api - 对过去 24 小时内的所有 FB 评论计数进行排序

> ID：10093226
> 
> 赞同：0
> 
> 时间：2012-04-10T17:10:39.603
> 
> 标签：facebook-graph-api, facebook-fql

我是 FB 开发的新手，感谢所有帮助。

我已经在我网站的所有文章中添加了 FB 评论框。现在我想获得最近评论最多的文章（网址）的列表。就像过去 24 小时在我的网站上讨论最多的 10 篇文章列表一样......

我应该使用什么方法？这可以使用 FQL 来实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:24:10.130

这个问题讨论了对同一站点上的许多 URL 进行批量评论请求（评论计数相似）：[Facebook fb:comments Graph API](https://stackoverflow.com/questions/6736210/facebook-fbcomments-graph-api)

FQL 文档的评论部分似乎也解决了批量检索问题。然后您可以整理出最受欢迎的并显示链接：[https ://developers.facebook.com/docs/reference/fql/comment/](https://developers.facebook.com/docs/reference/fql/comment/)

祝你好运。

# javascript - 多个单选按钮更改提交 onclick location.href...可能的语法错误

> ID：10093228
> 
> 赞同：1
> 
> 时间：2012-04-10T17:10:42.443
> 
> 标签：javascript, forms, onclick, radio-button, form-submit

我正在使用[http://www.somacon.com/p143.php](http://www.somacon.com/p143.php) javascript 作为单选按钮来更改提交 onclick location.href，具体取决于选择了哪个单选按钮。但我认为我的语法可能有问题，因为按钮无法正常工作（我认为它没有正确地从单选按钮中提取值）。提前致谢！

这是代码：

```
<head>
<script type="text/javascript">
<!--
// return the value of the radio button that is checked
// return an empty string if none are checked, or
// there are no radio buttons
function getCheckedValue(radioObj) {
if(!radioObj)
    return "";
var radioLength = radioObj.length;
if(radioLength == undefined)
    if(radioObj.checked)
        return radioObj.value;
    else
        return "";
for(var i = 0; i < radioLength; i++) {
    if(radioObj[i].checked) {
        return radioObj[i].value;
    }
}
return "";
}

// set the radio button with the given value as being checked
// do nothing if there are no radio buttons
// if the given value does not exist, all the radio buttons
// are reset to unchecked
function setCheckedValue(radioObj, newValue) {
if(!radioObj)
    return;
var radioLength = radioObj.length;
if(radioLength == undefined) {
    radioObj.checked = (radioObj.value == newValue.toString());
    return;
}
for(var i = 0; i < radioLength; i++) {
    radioObj[i].checked = false;
    if(radioObj[i].value == newValue.toString()) {
        radioObj[i].checked = true;
    }
}
}
//-->
</script>
</head>

<body>

<form name="radioExampleForm" method="get" action="" onsubmit="return false;">
<p><label for="number0"><input type="radio" value="http://www.google.com" name="number"     id="number0"> Zero</label>
&nbsp;<label for="number1"><input type="radio" value="http://www.ebay.com" name="number" id="number1"> One</label>
&nbsp;<label for="number2"><input type="radio" value="http://www.gamestop.com" name="number" id="number2"> Two</label>
&nbsp;<label for="number3"><input type="radio" value="http://www.amazon.com" name="number" id="number3"> Three</label>
&nbsp;<label for="number4"><input type="radio" value="http://www.usatoday.com" name="number" id="number4"> Four</label>
<p>
<input type="button" onclick="location.href='+getCheckedValue(document.forms['radioExampleForm'].elements['number']);" value="Show Checked Value">

ORIGNAL SUBMIT CODE THAT MADE AN ALERT BOX RATHER THAN location.href = <input type="button" onclick="alert('Checked value is: '+getCheckedValue(document.forms['radioExampleForm'].elements['number']));" value="Show Checked Value">

</form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:23:55.323

这只是一个语法错误。

将其更改为：

```
onclick="window.location.href = (getCheckedValue(document.forms['radioExampleForm'].elements['number']));" 
```

# opengl-es - OpenGL ES 2.0 程序流程

> ID：10093231
> 
> 赞同：1
> 
> 时间：2012-04-10T17:10:56.953
> 
> 标签：opengl-es, opengl-es-2.0

我试图了解着色器在基本 OpenGL 程序中的运行位置。我知道着色器程序正在视频卡上运行，所以我猜它与主循环并行。但我想了解两者之间的联系在哪里。这是我的绘图功能：

```
void Draw(ESContext *esContext)
{
    GLfloat vVertices[] = {0.0f, 0.5f, 0.0f,
                          -0.5f, -0.5f, 0.0f,
                           0.5f, -0.5f, 0.0f};

    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, vVertices);
    glEnableVertexAttribArray(0);

    glDrawArrays(GL_TRIANGLES, 0, 3);
    eglSwapBuffers(esContext->eglDisplay, esContext->eglSurface);
} 
```

调用 glDrawArrays 后着色器程序是否第一次运行？此外，即使我的主循环停止了几毫秒，它是否会继续循环并处理相同的 3 个顶点？我的意思是，视频卡会继续循环并处理这 3 个顶点，直到它收到一条新指令，还是会处理它们一次，然后等待来自 glDrawArrays 或类似命令的另一个调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:30:00.300

*   是的，着色器程序将在第一次调用 glDrawArrays 后不久执行。
*   不，它不会继续循环。它会将您排队的内容（在您的情况下为一个三角形）绘制到活动帧缓冲区，然后继续处理任何其他排队的工作，然后空闲直到收到下一条指令。

# java - 使用 JPA 2.0 注释 m:n 与辅助类（2 个外键 + 附加属性）的关系

> ID：10093241
> 
> 赞同：2
> 
> 时间：2012-04-10T17:11:33.573
> 
> 标签：java, jpa, orm, annotations, jpa-2.0

我是 JPA 2.0 的新手，在注释使用外键类的：m 关系时遇到了麻烦，该类具有描述关系的附加属性：

客户可以订阅几本杂志，每本`Subscription`都是为一本`Customer`和一本创建的`Magazine`，另外还节省了订阅时间。

这是我的注释类，我正在使用字段访问。我省略了一些样板代码，如构造函数、setter、getter（未注释）和方法`toString`，`equals`和`hashCode`。

```
@Entity
public class Customer {
    @Id
    @GeneratedValue
    private Long id;
    private String name;
    @ManyToMany
    private Set<Subscription> subscriptions;

    // ..
 }

@Entity
public class Magazine {
    @Id
    @GeneratedValue
    private Long id;
    private String name;

    @ManyToMany
    private Set<Subscription> subscriptions;

    // ..
}

@Entity
public class Subscription {
    private Date start;
    private Date end;

    @EmbeddedId
    private SubscriptionId id;

    // ..
}

@Embeddable
public class SubscriptionId implements Serializable {
    @ManyToOne
    private Customer customer;
    @ManyToOne
    private Magazine magazine;

    // ..
} 
```

我通过创建和持久化一些对象来测试我的注释，如下所示：

```
public static void main(String[] args) {
    EntityManagerFactory emf = Persistence
            .createEntityManagerFactory("kiosk");
    EntityManager em = emf.createEntityManager();

    persist(em);

    em.close();
    emf.close();
}

private static void persist(EntityManager em) {
    em.getTransaction().begin();

    Magazine mag1 = new Magazine("mag1");
    Magazine mag2 = new Magazine("mag2");

    Customer cus1 = new Customer("cus1");
    Customer cus2 = new Customer("cus2");
    Customer cus3 = new Customer("cus3");

    Subscription sub1 = new Subscription(cus1, mag1);
    Subscription sub2 = new Subscription(cus2, mag1);
    Subscription sub3 = new Subscription(cus2, mag2);
    Subscription sub4 = new Subscription(cus3, mag2);

    em.persist(mag1);
    em.persist(mag2);

    em.persist(cus1);
    em.persist(cus2);
    em.persist(cus3);

    em.persist(sub1);
    em.persist(sub2);
    em.persist(sub3);
    em.persist(sub4);

    em.getTransaction().commit();
} 
```

提供程序创建以下 MySQL 数据库：

```
mysql> show tables;
+-----------------------+
| Tables_in_kiosk       |
+-----------------------+
| customer              |
| customer_subscription |
| magazine              |
| magazine_subscription |
| subscription          |
+-----------------------+ 
```

只有三个表`customer`，`magazine`并且`subscription`有内容：

```
mysql> select * from customer;
+-------------+------+
| customer_id | name |
+-------------+------+
|           1 | cus1 |
|           2 | cus2 |
|           3 | cus3 |
+-------------+------+

mysql> select * from magazine;
+-------------+------+
| magazine_id | name |
+-------------+------+
|           1 | mag1 |
|           2 | mag2 |
+-------------+------+

mysql> select * from subscription;
+------+-------+-------------+-------------+
| end  | start | magazine_id | customer_id |
+------+-------+-------------+-------------+
| NULL | NULL  |           1 |           1 |
| NULL | NULL  |           1 |           2 |
| NULL | NULL  |           2 |           2 |
| NULL | NULL  |           2 |           3 |
+------+-------+-------------+-------------+ 
```

如果我知道他们的密钥，我可以阅读我的订阅。不过，我还没有尝试为客户或杂志阅读整套产品。

```
private static void find(EntityManager em) {
    Magazine mag1 = em.find(Magazine.class, 1L);
    Magazine mag2 = em.find(Magazine.class, 2L);

    Customer cus1 = em.find(Customer.class, 1L);
    Customer cus2 = em.find(Customer.class, 2L);
    Customer cus3 = em.find(Customer.class, 3L);

    Subscription sub1 = em.find(Subscription.class, new SubscriptionId(cus1, mag1));
    Subscription sub2 = em.find(Subscription.class, new SubscriptionId(cus2, mag1));
    Subscription sub3 = em.find(Subscription.class, new SubscriptionId(cus2, mag2));
    Subscription sub4 = em.find(Subscription.class, new SubscriptionId(cus3, mag2));

    System.out.println(mag1);
    System.out.println(mag2);

    System.out.println(cus1);
    System.out.println(cus2);
    System.out.println(cus3);

    System.out.println(sub1);
    System.out.println(sub2);
    System.out.println(sub3);
    System.out.println(sub4);
} 
```

印刷：

```
Magazine [id=1, name=mag1, subscriptions=null]
Magazine [id=2, name=mag2, subscriptions=null]
Customer [id=1, name=cus1, subscriptions=null]
Customer [id=2, name=cus2, subscriptions=null]
Customer [id=3, name=cus3, subscriptions=null]
Subscription [start=null, end=null, id=SubscriptionId [customer=1, magazine=1]]
Subscription [start=null, end=null, id=SubscriptionId [customer=2, magazine=1]]
Subscription [start=null, end=null, id=SubscriptionId [customer=2, magazine=2]]
Subscription [start=null, end=null, id=SubscriptionId [customer=3, magazine=2]] 
```

两张桌子`customer_subscription`都`magazine_subscription`空着。但正如我所见，它们甚至都不是必需的——其他 3 张桌子看起来和我想要的完全一样。所以我的问题是：

**如何使用 JPA 2.0 正确建模本示例中使用的 m:n 关系，而不创建多余的表，同时保留为杂志或客户编写和读取所有订阅的能力？**

如果有人对代码感兴趣，我已经在这里上传了它：http: [//goo.gl/qSc2e](http://goo.gl/qSc2e)；您将需要一个名为“kiosk”的 MySQL 5 数据库，该数据库在 localhost 的 3306 端口上运行，并且 root 密码为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:27:03.340

您的模型实际上没有任何多对多关系。

`Customer`to`Subscription`是一对多的。 `Magazine`to`Subscription`是一对多的。

试试这个作为你的实体模型：

```
@Entity
public class Customer {

    @Id
    @GeneratedValue
    private Long id;

    private String name;

    @OneToMany
    private Set<Subscription> subscriptions;

    // ..
 }

@Entity
public class Magazine {
    @Id
    @GeneratedValue
    private Long id;

    private String name;

    @OneToMany
    private Set<Subscription> subscriptions;

    // ..
}

@Entity
public class Subscription {

    private Date start;

    private Date end;

    @EmbeddedId
    private SubscriptionId id;

    // ..
}

@Embeddable
public class SubscriptionId implements Serializable {

    @ManyToOne
    private Customer customer;

    @ManyToOne
    private Magazine magazine;

    // ..
} 
```

并且 Hibernate 不会生成冗余链接表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:12:16.047

milkplusvellocetless 的答案是解决方案的一部分，在注释中添加`mappedBy`属性可以解决问题：`@OneToMany`

```
@Entity
public class Magazine {
    @Id
    @GeneratedValue
    private Long id;

    @NotNull
    private String name;

    @OneToMany(mappedBy = "id.magazine")
    private Set<Subscription> subscriptions;

    // ..

}

@Entity
public class Customer {
    @Id
    @GeneratedValue
    private Long id;

    @NotNull
    private String name;

    @OneToMany(mappedBy = "id.customer")
    private Set<Subscription> subscriptions;

    // ..
}

@Entity
public class Subscription {
    private Date start;
    private Date end;

    @EmbeddedId
    private SubscriptionId id;

    // ..
}

@Embeddable
public class SubscriptionId implements Serializable {
    @ManyToOne
    private Customer customer;
    @ManyToOne
    private Magazine magazine;

    // ..
} 
```

仅创建 3 个表（根据需要）而不是 5 个。

# javascript - 扩展自定义主干视图

> ID：10093245
> 
> 赞同：8
> 
> 时间：2012-04-10T17:11:50.453
> 
> 标签：javascript, backbone.js

使用

```
Backbone.View.extend 
```

我创建了一个名为**MyView**的主干视图。在我看来，我创建了一堆自定义函数。我遇到的问题是我需要创建一个**扩展 MyView**的新 Backbone 视图。

我不想创建新的视图和重复代码...我只想利用继承来扩展功能...问题是我不知道确切的方法，我也不知道如何调用 Backbone 中的**超级**函数。

*编辑 - 感谢下面一些人的回答，但仍然不太清楚如何调用父母的方法。例如：

```
// in subView
{
initialize: function(){
// would like to do something like super.initialize()
 // here i would then declare variables exclusive to subview
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-10T17:21:42.200

我认为您正在寻找的是：

```
 var NewView = MyView.extend({
     //Usual config goes on in here, and it will have inherited functions
     //And default properties from MyView
 }); 
```

或者，如果您想调用超类，那么这里有一个实现：http: [//forrst.com/posts/Backbone_js_super_function-4co](http://forrst.com/posts/Backbone_js_super_function-4co)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-14T02:25:19.063

```
var SubView = MainView.extend({

    initialize: function(options) {
        this.constructor.__super__.initialize.apply(this);
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T17:21:47.517

```
var newView = MyView.extend() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T17:22:28.680

我不知道这有多有用，但如果你输入编译这个咖啡脚本：

```
class BaseView extends Backbone.View

class MyView extends Baseview 
```

它生成：

```
(function() {
  var BaseView, MyView,
    __hasProp = Object.prototype.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor; child.__super__ = parent.prototype; return child; };

  BaseView = (function(_super) {

    __extends(BaseView, _super);

    function BaseView() {
      BaseView.__super__.constructor.apply(this, arguments);
    }

    return BaseView;

  })(Backbone.View);

  MyView = (function(_super) {

    __extends(MyView, _super);

    function MyView() {
      MyView.__super__.constructor.apply(this, arguments);
    }

    return MyView;

  })(Baseview);

}).call(this); 
```

# php - 查询大型数据集时，防止脚本超时

> ID：10093256
> 
> 赞同：3
> 
> 时间：2012-04-10T17:12:51.623
> 
> 标签：php, mysql, timeout

我有以下代码：

```
$query = mysql_query("SELECT * FROM mytable");

while($row = mysql_fetch_assoc($query)){
    mysql_query("INSERT INTO mytable2 (col1, col2) 
                 VALUES ('".$row['val1']."', '".$row['val2']."')");
} 
```

可以理解，脚本在大约 150,000 次查询时超时......除了增加脚本内存之外，防止超时的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T17:15:50.383

为什么不将其作为单个查询运行？？？

```
$SQL = "INSERT INTO mytable2 (col1,col2) SELECT val1,val2 FROM mytable";
$query = mysql_query($SQL); 
```

# **选择**

您也可以一次限制您的 INSERT 200

```
$query = mysql_query("SELECT * FROM mytable"); 
$commit_count = 0;    
$commit_limit = 200;
$comma = "";
$SQL = "INSERT INTO mytable2 (col1, col2) VALUES ";
while($row = mysql_fetch_assoc($query)){ 
    $SQL .= $comma . "('".$row['val1']."','".$row['val2']."')";
    $comma = ",";
    $commit_count++;
    if ( $commit_count == $commit_limit )
    {
        mysql_query($SQL);
        $SQL = "INSERT INTO mytable2 (col1, col2) VALUES ";
        $commit_count = 0;    
        $comma = "";
    }
} 
if ( $commit_count > 0 ) { mysql_query($SQL); } 
```

您可以将 更改`$commit_limit`为任何合理的正数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T17:15:51.210

您应该考虑使用[`INSERT ... SELECT`](http://dev.mysql.com/doc/refman/5.6/en/insert-select.html)语句而不是运行大量的单个插入。

# python - 在 Pyramid 中编写自定义翻译分配

> ID：10093259
> 
> 赞同：1
> 
> 时间：2012-04-10T17:12:57.907
> 
> 标签：python, localization, internationalization, translation, pyramid

Pyramid 使用 gettext *.po 文件进行翻译，这是一种非常好的和稳定的国际化应用程序的方法。它的一个缺点是它不能从应用程序本身更改。我需要一些方法让普通用户能够自行更改翻译。*Django*允许直接更改文件，更改后它会重新启动整个应用程序。我没有那种自由，因为变化会非常频繁。

由于我找不到任何可以帮助我完成任务的包，我决定覆盖**Localizer**。我的想法是基于使用**翻译域**，如*Zope*项目使用并让**Localizer**搜索注册域，如果未找到，则退回到默认翻译策略。

问题是我找不到将自定义翻译解决方案放入 Localizer 本身的好方法。我能想到的就是重新实现**get_localizer**方法并重写整个**Localizer**。*但是这里有几件事需要复制粘贴，例如映射插值和其他与翻译字符串*相关的 tweeks 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:01:16.953

我不知道你在那里有多少东西，但我前一段时间做过类似的事情。我必须再做一次。实现非常简单...

如果您可以确定所有呼叫都将通过 _() 或类似的方式处理。您可以提供自己的功能。它看起来像它。

```
def _(val):
    val = db.translations.find({key: id, locale: request.locale_name})
    if val:
        return val['value']
    else:
        return real_gettext(val) 
```

这很简单......那么你需要有一些东西可以将数据库转储到文件中......

但我想覆盖定位器更有意义。我很久以前就做过，覆盖函数比在代码中搜索更容易。

Localiser 的优点是它可以在任何地方工作。猴子补丁很酷，但也很丑陋。如果我必须再做一次，我会提供我自己的本地化程序，它会先从数据库加载，然后显示它自己的值。数据库背后的原因是，如果有人关闭服务器并且文件没有被修改，您将看不到结果。

如果数据库超出需要，那么 Localize 就足够了，您可以在每次更新时更新文件。如果服务器将重新启动，它将加载新文件...您必须先编译目录。

# php - 仅当会话不存在时才加载 session_start()？

> ID：10093264
> 
> 赞同：16
> 
> 时间：2012-04-10T17:13:22.723
> 
> 标签：php, session

是否有一个简短的代码技巧来检查会话是否已经开始，如果没有，则加载一个？目前我收到一个错误“会话已经开始......”如果我不管检查都输入一个会话开始。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-10T17:15:26.670

`isset`通常是检查当前是否定义了预定义变量的正确方法：

**如果您使用的是 5.4 之前的 php 版本**，

您通常可以侥幸逃脱，只需执行下面的代码，但请注意，如果由于某种原因禁用会话，仍会调用 session_start()，这可能最终导致错误和不必要的调试，因为 $_SESSION 数组是'不允许被创建。

```
if(!isset($_SESSION)){session_start();} 
```

如果您想检查会话是否由于某种原因被禁用，您可以隐藏错误消息，设置测试会话变量，然后验证它是否已设置。如果不是，您可以编写禁用会话的响应代码。您需要在脚本开始处或附近执行所有这些操作。举个例子（根据错误处理设置，工作方式不同）：

```
if(!isset($_SESSION)){session_start();}
$_SESSION['valid'] = 'valid';
if($_SESSION['valid'] != 'valid')
{
   //handle disabled sessions
} 
```

**但是，如果您使用的是 php 版本 5.4 或更高版本**，

您可以使用[session_status()](http://php.net/manual/en/function.session-status.php)函数，这是一个更好的选择，因为它考虑了会话被禁用并检查会话是否已经存在。

```
if (session_status() === PHP_SESSION_NONE){session_start();} 
```

注意**PHP_SESSION_NONE**是 PHP 设置的常量，因此不需要用引号括起来。它的计算结果为整数 1，但作为一个常量，专门设置为消除对幻数的需求，最好针对该常量进行测试。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-10T17:18:50.657

许多人只是简单地使用`@session_start()`来抑制会话已经开始的警告。替代方案通常是：

```
if (session_status() === PHP_SESSION_NONE) session_start(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-29T22:36:03.327

试试这个条件

```
if (version_compare(phpversion(), '5.4.0', '<')) {
 if(session_id() == '') {
    session_start();
 } }else{
if (session_status() == PHP_SESSION_NONE) {
    session_start();
} } 
```

如果只想避免错误，请在函数示例前使用@：

```
@session_start(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-02T07:19:18.680

```
if (session_id() === "") { session_start(); } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-10T14:38:06.567

在开始新会话之前检查现有会话：

```
 // # if phpversion() is >= 5.4
  if(phpversion() >= 5.4) {

    // # check session_status() function for value 'PHP_SESSION_NONE'
    if(session_status() === PHP_SESSION_NONE) {
      session_start();
    }

  } else { // # maintain backwards compat. with PHP versions older than 5.4

      // # if $_SESSION object if NOT set, start a new session!
      if(!isset($_SESSION)) {
        session_start();
      }
  } 
```

# php - 浏览器中显示的 PHP 代码

> ID：10093271
> 
> 赞同：2
> 
> 时间：2012-04-10T17:13:45.877
> 
> 标签：php, html, database, browser

所以，我正在做一个数据库项目，我正在尝试增量编码。问题是，当我在浏览器中测试 php 时，它会在我使用“->”后显示 php 代码。html打印正确显示，这是在->所在的点之后。

这是php：

```
<?php 
    function getGraphicNovel(){ 
        include_once("./connect.php"); 
        $db_connection = new mysqli($SERVER, $USERNAME, $PASSWORD, $DATABASE); 
        if (mysqli_connect_errno()) { 
            echo("Can't connect to MySQL Server. Error code: " . mysqli_connect_error()); 
            return null; 
        } 
        $stmt = $db_connection->stmt_init(); 
        $returnValue = "invalid"; 
        if($stmt.prepare("select series from graphic_novel_main natural join graphic_novel_misc")) { 
        $stmt->execute(); 
        $stmt->bind_result($series); 
        while ($stmt->fetch()) { 
            echo "<tr><td>" . $series . "</td></tr>";
        }
        $stmt->close(); 
    } 
    $db_connection->close(); 
} 
getGraphicNovel();
?> 
```

这是该页面的链接。希望它适用于学校网络之外的人。

[http://plato.cs.virginia.edu/~paw5k/cainedb/viewall.html](http://plato.cs.virginia.edu/~paw5k/cainedb/viewall.html)

如果有人知道为什么会这样，那么您的输入会很棒！

按要求：

php -v:

```
PHP 5.3.2-1ubuntu4.14 with Suhosin-Patch (cli) (built: Feb 11 2012 06:50:46) 
Copyright (c) 1997-2009 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2010 Zend Technologies 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T17:15:17.103

听起来PHP根本不起作用。您没有看到第一部分的唯一原因是您的浏览器正在解析它，就好像它是一个 HTML 标记一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:17:26.850

您的 Web 服务器不知道 PHP，甚至可能没有安装。因此，php 代码只是被视为普通文本。请更新您的帖子以告知您正在使用的服务器。

# objective-c - NSDate 结果来自 -(NSDate *)dateFromComponents:(NSDateComponents *)comps

> ID：10093272
> 
> 赞同：1
> 
> 时间：2012-04-10T17:13:52.483
> 
> 标签：objective-c, nsdate, nscalendar, nsdatecomponents, nstimezone

我想用 NSDateComponents 获得一个 NSDate 对象，但是 NSDate 的时间比组件中的时间低 1 小时。

```
NSCalendar *cal = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
[cal setLocale:[NSLocale currentLocale]];
[cal setTimeZone:[NSTimeZone localTimeZone]];
NSDateComponents *hourComp = [[NSDateComponents alloc] init];
hourComp.timeZone = [NSTimeZone localTimeZone];
[hourComp setHour:18];

NSLog(@"%@",hourComp);
NSLog(@"%@",[cal dateFromComponents:hourComp]);
NSLog(@"%@",[NSDate date]); 
```

控制台输出：

```
2012-04-10 19:10:57.505 TestDate[9861:f803] <NSDateComponents: 0x6b6ad30>
TimeZone: Europe/Berlin (CEST) offset 7200 (Daylight)
Hour: 18
2012-04-10 19:10:57.507 TestDate[9861:f803] 0001-01-01 17:06:32 +0000
2012-04-10 19:10:57.508 TestDate[9861:f803] 2012-04-10 17:10:57 +0000 
```

我想要的是 18:xx:xx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:14:34.030

我注意到你在欧洲，比格林威治标准时间早一小时。当您将日期设置为 18:xx 时，它认为您将其设置在欧洲，因此它会在将其存储在 GMT 之前减去一小时。当您将其打印出来时，您不会要求将其格式化为当地时间，因此它会为您提供 GMT，即 17:xx。

您需要使用`NSDateFormatter`, 并设置其区域设置和时区 - 就像您对`NSCalendar`对象所做的那样 - 然后调用`stringFromDate`它，传递您创建的日期。

# jquery - jQuery 没有改变页面上的下一个表单？

> ID：10093275
> 
> 赞同：0
> 
> 时间：2012-04-10T17:14:10.433
> 
> 标签：jquery

我有以下 HTML 代码：

```
<ul id="contributorPhotos">
    <li>
        <img src="viewIcon.png" class="View">
        <img src="editIcon.png" class="Edit">
        <img src="deleteIcon.png" class="Delete">
        <form>
            [Form fields to manage first image here]
        </form>
    </li>

    <li>
        <img src="viewIcon.png" class="View">
        <img src="editIcon.png" class="Edit">
        <img src="deleteIcon.png" class="Delete">
        <form>
            [Form fields to manage second image here]
        </form>
    </li>
</ul> 
```

而我的 jQuery 控制这个：

```
<script>
    $(".Edit").click(function() {
        $(this).find("form").css("background-color","#03C");
    });
</script> 
```

如您所见，我现在要做的就是更改当前编辑按钮下方表单的背景颜色，但我碰壁了。

有人可以解释为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T17:19:18.243

[.find()](http://api.jquery.com/find/)仅适用于您选择的元素的后代，并且您正在寻找兄弟姐妹。

用这个：

```
$(".Edit").click(function() {
    $(this).siblings("form").css("background-color","#03C");
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/Cv8JD/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:16:40.557

你需要说 $(this).parent().find("form")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T17:17:26.723

```
<script>
    $.document.ready( function() {
        $(".Edit").click(function() {
            $(this).find("form").css("background-color","#03C");
        });
    }
</script> 
```

您的点击功能可能永远不会绑定到点击事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T17:16:56.833

嗯，我得说列表标签中不允许使用表单标签......

编辑：

大卫拜尔斯，不是为了惹恼你，但你的 html 是错误的......列表标签中不允许使用图像标签......表单标签也不允许......你应该使用 css 将背景图片添加到你的“按钮”...... html 看起来像这样：

```
<div class="contributorPhotos">
        <!-- give background image and with to ur list tags -->
    <ul>
        <li class="View">View</li>
        <li class="Edit">Edit</li>
        <li class="Delete">Delete</li>
    </ul>

    <form>
        [Form fields to manage first image here]
    </form>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T17:22:37.290

改用：

```
$(".Edit").click(function() {
    $(this).closest('li').find("form").css("background-color","#03C");
}); 
```

您面临的问题是`find()`工作方式：它在当前元素内查找（在这种情况下，`$('.Edit')`元素是图像，用于 . 中的选择器定义的元素`find`。因为图像不能包含任何其他元素这永远不会起作用。上面的替代方法是移动到父`li`元素，然后在*该*元素中搜索`form`.

您也可以尝试使用：

```
$(".Edit").click(function() {
    $(this).siblings("form").css("background-color","#03C");
}); 
```

它将在元素的兄弟元素中搜索`$('.Edit')`。

参考：

*   [`closest()`](http://api.jquery.com/closest/).
*   [`find()`](http://api.jquery.com/find/).
*   [`siblings()`](http://api.jquery.com/siblings/).

# objective-c - 解析 xml 文件 (xcode)

> ID：10093278
> 
> 赞同：0
> 
> 时间：2012-04-10T17:14:26.310
> 
> 标签：objective-c

我正在使用 Xcode 为 iPhone 应用程序编写登录代码，但我的代码似乎无法读取我的本地 xml 文件 login.xml

```
- (void)viewDidUnload
{
    [super viewDidUnload];
    users =[[NSMutableArray alloc] init];
    NSString *path = [[NSBundle mainBundle] pathForResource: @"login" ofType:@"xml" inDirectory:(@"Users/roaalturki/Desktop")];
    NSURL *xmlurl = [NSURL fileURLWithPath:path];
    xmlparsser=[[NSXMLParser alloc] initWithContentsOfURL:xmlurl];

    [xmlparsser setDelegate:self];
    [xmlparsser parse];

}

-(void) parser: (NSXMLParser *) parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    currentelement=[elementName copy];
    if ([elementName isEqualToString:@"username"]) {
        item =[[NSMutableDictionary alloc]init];
        currentuser =[[NSMutableString alloc]init];
        currentpassword=[[NSMutableString alloc]init];
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-10T18:21:53.630

我的建议是避免使用 NSXMLParser。NSXMLParser 缓慢且不灵活。

尝试从一开始就使用 DOM xml 解析器。我可以从 google iOS Toolkit 推荐 GDataXML。非常灵活。非常快。 [教程在这里](http://www.raywenderlich.com/725/how-to-read-and-write-xml-documents-with-gdataxml)

或检查其他选项。 这是一些解析器及其速度等[的概述。](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)

# php - 将重复的关联数组值组合到附加键中

> ID：10093283
> 
> 赞同：1
> 
> 时间：2012-04-10T17:14:47.560
> 
> 标签：php, arrays

我有一个这样的数组（为清楚起见进行了抽象）：

```
$foo = array(
   'breakfast' => 'a daily meal',
   'lunch' => 'a daily meal',
   'dessert' => 'a special treat',
   'snack' => 'a special treat',
   'plates' => 'tableware'
); 
```

为此，我想将所有重复值的键组合成一个“合并”键 -`print_r($foo);`就像这样：

```
Array
(
[breakfast|lunch] => 'a daily meal'
[dessert|snack] => 'a special treat'
[plates] => 'tableware'
) 
```

目前我正在通过一长串嵌套的丑陋 foreach 语句来实现这一点……有没有更简单/更合适的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:32:50.163

我认同。从您的 $foo 我们添加...

```
$collector = array();
$newFoo = array();
foreach ($foo as $key=>$value){
    if (isset($collector[$value])){
        $collector[$value] .= '|'.$key;
    } else {
        $collector[$value] = $key;
    }
}

foreach ($collector as $keyValue=>$itemIndex){
    $newFoo[$itemIndex] = $keyValue;
} 
```

我的回答没有太多优雅，但它会完成工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:32:53.090

由于您正在对值进行“分组”，因此我构建了一个临时数组`$result`，将值映射`$foo`到`$foo`. 这样，通过它们的值识别重复项并连接它们的键就很简单了。最后的 an[`array_flip`](http://www.php.net/manual/en/function.array-flip.php)将返回您正在寻找的内容。

```
function merge_values(array $arr) {
    $result = array();

    foreach ( $arr as $key => $val ) {
        if ( isset($result[$val]) )
            $result[$val] .= '|' . $key;
        else
            $result[$val] = $key;
    }

    return array_flip($result);
} 
```

查看结果：http: [//ideone.com/iTUFY](http://ideone.com/iTUFY)

```
array(3) {
  ["breakfast|lunch"]=>
  string(12) "a daily meal"
  ["dessert|snack"]=>
  string(15) "a special treat"
  ["plates"]=>
  string(9) "tableware"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T17:35:41.640

像这样，可能是：

```
$foo = array(
   'breakfast' => 'a daily meal',
   'lunch' => 'a daily meal',
   'dessert' => 'a special treat',
   'snack' => 'a special treat',
   'plates' => 'tableware'
);
$new = array();
foreach($foo as $key => $value){
    $keyNew = array_search($value,$new);
    if ($keyNew){
        unset($new[$keyNew]);
        $new[$keyNew . "|" . $key] = $value;
    }else
        $new[$key] = $value;
}
print_r($new); 
```

# google-fusion-tables - 从 PHP 查询 Fusion-Table

> ID：10093285
> 
> 赞同：1
> 
> 时间：2012-04-10T17:15:00.547
> 
> 标签：google-fusion-tables

我的情况如下：我有一个 MySQL 数据库，我将它导出并插入到 Fusion Table 中。现在我需要修改 php 页面以从 Fusion Table 而不是 localhost db 中查询数据。

我从开发人员指南中阅读了有关查询 Fusion-Tables 的信息，但它指的是 GData Java 库和 SQL API。在另一个站点上，我看到还有其他可用于查询的库，包括 PHP 所依赖的 Zend 框架，这与我的情况相关。但是，我没有偶然发现任何示例或教程，它们只是显示了一个 php 页面，说明如何查询一个简单的单元格、行或列，我可以从中修改和改进编码以将其应用于设计。

我的问题是：

1.  我需要在托管空间上安装/上传一些库吗？

2.  是否有关于查询 Fusion Table 数据的 php 示例和教程，我可能错过了？

3.  谁能给我一个线索，例如您将如何查询 ID 为 5 的行的纬度信息？（使用路径检索页面：articles.php?lang=en&pg=comm_en&m=view&commID=88

下面是我在 comm_en.php 页面中的编码，它从 PHP 查询到 SQL 数据。

先感谢您！

德里尼

```
<?php
session_start();
foreach ($_REQUEST as  $key => $value){
    $$key=addslashes(htmlspecialchars(strip_tags($value)));
}
if(isset($_GET["m"]))       {$m=$_GET["m"];}            else     {$m="";}
if(isset($_GET["commID"]))      {$commID=$_GET["commID"];}    else {$commID=1;}
if(isset($_GET["lang"]))        {$lang=$_GET["lang"];}   
else {$lang="en";}

Shfaq($m,$commID);

function Shfaq($metod,$commID)
 {
switch($metod)
{
 case "view":
        {View($commID);}        
    break;
 case "default":
        {View($artID);}      
    break;

}
}  // end of Shfaq();

function View($commID)
{
     $link =mysql_connect("localhost", "db-user", "db-pass") or die ("E pamundur lidhja!");
mysql_select_db("DataBase-name") or die (mysql_error());
$queryComm = "SELECT * FROM communities WHERE id ='$commID' LIMIT 0,1";
$commRes=mysql_query($queryComm) or die(mysql_error());
$comm=mysql_fetch_array($commRes);  
$healthPerc = round(($comm["healthBooklet"]/$comm["totalChildNo"]), 3)*100 ;

echo '      <table class="gpsbox" align="right">
        <caption>GPS Location</caption>                   
        <tr><td>Latitude </td><td>'.$comm["latitude"].'</td></tr>
        <tr><td>Longitude</td><td>'.$comm["longitude"].'</td></tr> 
    </table>....<html coding continues> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-05T11:26:23.443

以下是如何将[最新的 PHP API 客户端库](https://github.com/google/google-api-php-client)与 Fusion Tables 一起使用：

```
use Google_Service_Fusiontables;

$client_email = '<id>@developer.gserviceaccount.com';
$private_key = file_get_contents('<private key>.p12');
$scopes= array(
        'https://www.googleapis.com/auth/fusiontables',
        'https://www.googleapis.com/auth/fusiontables.readonly',
        );
$credentials = new Google_Auth_AssertionCredentials(
    $client_email,
    $scopes,
    $private_key
);

$client = new Google_Client();
$client->setAssertionCredentials($credentials);
if ($client->getAuth()->isAccessTokenExpired()) {
  $client->getAuth()->refreshTokenWithAssertion();
}

$service = new Google_Service_Fusiontables($client);
$result = $service->query->sql('SELECT <column> FROM <table id>');
var_dump($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T22:46:44.337

1.  有一个[PHP 客户端库](http://code.google.com/p/fusion-tables-client-php/)，您可以根据需要使用它（这可能是从 PHP 访问 Fusion Tables 的最简单方法）

2.  在客户端库旁边还有[PHP 示例代码](http://code.google.com/p/fusion-tables-client-php/source/browse/#svn/trunk/samples)，看看吧，它可能有助于您理解这个概念。

3.  当你使用这个库时，你可以简单地编写 sql 语句，即类似

    ```
    select latitude from 123456 where id = 5; 
    ```

`123456`指的是您的融合表的表ID。如果您的表是公开的，您甚至不必关心身份验证，但如果您想访问私有表或更新/插入数据，我建议您使用[OAuth 进行身份验证](https://developers.google.com/fusiontables/docs/articles/oauthfusiontables)。

一般的示例代码可以在[Google Fusion Tables API 示例代码中找到](https://developers.google.com/fusiontables/docs/sample_code)

# dojo - 如何优化此自定义 dojo 1.7.2 构建

> ID：10093286
> 
> 赞同：2
> 
> 时间：2012-04-10T17:15:03.510
> 
> 标签：dojo, dojo-build

我正在开发我的第一个项目，该项目使用 dojo 1.7.2 组件，并且只需要一个垂直滑块小部件。我能够创建一个自定义构建，它应该只包含我声明的依赖项所需的模块。使用以下构建配置文件，命令`C:\dojo-release-1.7.2-src\util\buildscripts>build -p profiles/km.admin.dashboard.profile.js -r`生成的 release/dojo/dojo.js.uncompressed.js 为 796kb，而 release/dojo/dojo.js 为 236kb。有什么办法可以排除更多不需要的模块来减小文件大小？比如我刚刚打开了release/dojo/dojo.js.uncompressed.js，看了一眼，里面有一个dojo/json包，我没有用任何json。我该如何排除它？谢谢你。

```
dependencies = {
layers: [
{
    name: 'dojo.js',
    customBase: true,
    dependencies: [
        'dojo/dojo',
        'dojo.aspect',
        'dojo/selector/acme',
        'dojo/cldr/nls/number',
        'dijit.form.VerticalSlider',
        'dijit.form.VerticalRule',
        'dijit.form.VerticalRuleLabels'
    ]
}
],

staticHasFeatures: {
    'dojo-trace-api':0,
    'dojo-log-api':0,
    'dojo-publish-privates':0,
    'dojo-sync-loader':0,
    'dojo-xhr-factory':0,
    'dojo-test-sniff':0
},

prefixes: [
    [ 'dijit', '../dijit' ],
    [ 'dojox', '../dojox' ]
]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:53:41.840

您可以通过一些方法将 dojo.js 缩减到最低限度，并继续在 dojo.js 中添加您真正需要的模块。

看：

[http://dojotoolkit.org/reference-guide/1.7/build/customBase.html](http://dojotoolkit.org/reference-guide/1.7/build/customBase.html)

还有： [http](http://www.sitepen.com/blog/2008/07/01/dojo-in-6k/) ://www.sitepen.com/blog/2008/07/01/dojo-in-6k/ （这有点旧，第一个链接中的cutombase方法可能会更好）

# matlab - matlab在轴上绘制美元符号

> ID：10093288
> 
> 赞同：0
> 
> 时间：2012-04-10T17:15:15.250
> 
> 标签：matlab

我希望轴上的刻度标记以美元 ($) 表示。

我试过了：

```
%set(gca, 'ZTickLabel', sprintf('$%d|', get(gca,'ZTickLabel'))); 
```

这在您旋转图形时不起作用（这会拉伸图形并添加更多刻度线。

我也尝试使用 将其转换为货币`cur2str`，但这也不起作用。

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T18:07:12.597

你得到未定义行为的原因是因为`XTickLabel`是一个**字符**数组：

```
>> labels = get(gca,'XTickLabel');
>> class(labels)

ans =

char 
```

当您将它传递给`sprintf`'s`%d`格式说明符时，它需要一个十进制数字 - 而不是字符数组 - 因此它将字符转换为它们的整数表示并打印出来。

要看到这一点，请尝试：

```
>> sprintf('%d','1')

ans =

49 
```

您真正想要做的是将字符数组视为字符数组：

```
>> labels = get(gca,'XTickLabel')

labels =

0
1
2
3
4
5
6
7

>> dollar_signs = repmat('$',size(labels,1),1)

dollar_signs =

$
$
$
$
$
$
$
$

>> new_labels = [dollar_signs labels]

new_labels =

$0
$1
$2
$3
$4
$5
$6
$7

>> set(gca,'XTickLabels',new_labels) 
```

这有你想要的效果：

![在此处输入图像描述](../Images/938f83dc8a13db3b21eca0c4d627a4f1.png)

# java - 使用 ProcessBuilder 运行 .java 文件

> ID：10093290
> 
> 赞同：5
> 
> 时间：2012-04-10T17:15:18.373
> 
> 标签：java, multiprocessing, processbuilder

我是一名在 Windows XP 上使用 Eclipse 工作的新手程序员，我需要运行多个进程（这将是一个多计算机系统的模拟）。我最初的 hackup 将多个线程用于多个类，但现在我试图用进程替换线程。

从我的阅读中，我了解到 ProcessBuilder 是要走的路。我已经尝试了您在下面看到的输入的*许多*版本，但我一生都无法弄清楚如何正确使用它。我正在尝试将之前创建的 .java 文件作为类（我已经修改）运行。我最终只是做了一个虚拟 test.java 以确保我的进程正常工作 - 它的唯一功能是打印它运行的。

我的两个文件的代码如下。我正确使用 ProcessBuilder 吗？这是读取我的子进程输出的正确方法吗？任何帮助将非常感激。

*   大卫

编辑：解决方案是声明 ProcessBuilder("java.exe","-cp","bin","Broker.test");

初级过程

```
package Control;
import java.io.*;
import java.lang.*;

public class runSPARmatch {

/**
 * @param args
 */
public static void main(String args[]) {
    try {       
        ProcessBuilder broker = new ProcessBuilder("javac.exe","test.java","src\\Broker\\");
        Process runBroker = broker.start();

        Reader reader = new InputStreamReader(runBroker.getInputStream());
        int ch;
        while((ch = reader.read())!= -1)
            System.out.println((char)ch);
        reader.close();

        runBroker.waitFor();

        System.out.println("Program complete");

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

}

子进程

```
package Broker;

public class test {
    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        System.out.println("This works");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T17:25:31.363

您正在 .java 文件上调用 java 编译器，这不会运行该类。您可能想要做的是在您的 .class 文件上运行 java.exe。（即类似“java.exe -cp ./bin Broker.test”，假设您的类文件在./bin 中）

# python - 对于多维范围，是否有 Python 的 range(n) 等价物？

> ID：10093293
> 
> 赞同：56
> 
> 时间：2012-04-10T17:15:34.983
> 
> 标签：python, numpy, iteration, range

在 Python 上，range(3) 将返回 [0,1,2]。多维范围是否有等价物？

```
range((3,2)) # [(0,0),(0,1),(1,0),(1,1),(2,0),(2,1)] 
```

因此，例如，在基于图块的游戏中循环通过矩形区域的图块可以写成：

```
for x,y in range((3,2)): 
```

注意我不是要求实现。我想知道这是否是一种公认​​的模式，以及 Python 上是否有内置函数或其标准/通用库。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-04-11T00:03:12.087

在 numpy 中，它是[`numpy.ndindex`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndindex.html). 也看看[`numpy.ndenumerate`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndenumerate.html)。

例如

```
import numpy as np
for x, y in np.ndindex((3,2)):
    print(x, y) 
```

这产生：

```
0 0
0 1
1 0
1 1
2 0
2 1 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-04-10T17:18:08.020

你可以使用`itertools.product()`：

```
>>> import itertools
>>> for (i,j,k) in itertools.product(xrange(3),xrange(3),xrange(3)):
...     print i,j,k 
```

`xrange()`如果您想将其扩展到十维循环或类似荒谬的东西，则可以这样表达多个重复的语句：

```
>>> for combination in itertools.product( xrange(3), repeat=10 ):
...     print combination 
```

它循环了十个变量，从`(0,0,0,0,0,0,0,0,0,0)`到不等`(2,2,2,2,2,2,2,2,2,2)`。

* * *

一般来说`itertools`，这是一个非常棒的模块。同样，正则表达式比“普通”字符串方法更具表现力，`itertools`是表达复杂循环的一种非常优雅的方式。[您应该自己阅读`itertools`模块文档。](http://docs.python.org/library/itertools.html)它会让你的生活更有趣。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-04-10T17:17:56.527

实际上有一个简单的语法。你只需要有两个`for`s：

```
>>> [(x,y) for x in range(3) for y in range(2)]
[(0, 0), (0, 1), (1, 0), (1, 1), (2, 0), (2, 1)] 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-04-10T17:19:40.423

因此，这是两个列表的[笛卡尔积：](http://en.wikipedia.org/wiki/Cartesian_product#Basic_properties)

```
import itertools
for element in itertools.product(range(3),range(2)):
    print element 
```

给出这个输出：

```
(0, 0)
(0, 1)
(1, 0)
(1, 1)
(2, 0)
(2, 1) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-10T17:18:47.713

您可以`product`从`itertools`模块中使用。

```
itertools.product(range(3), range(2)) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-10T18:57:39.923

我会看看`numpy.meshgrid`：

[http://docs.scipy.org/doc/numpy-1.6.0/reference/generated/numpy.meshgrid.html](http://docs.scipy.org/doc/numpy-1.6.0/reference/generated/numpy.meshgrid.html)

这将为您提供网格/网格中每个位置的 X 和 Y 网格值。然后你可以做类似的事情：

```
import numpy as np
X,Y = np.meshgrid(xrange(3),xrange(2))
zip(X.ravel(),Y.ravel()) 
#[(0, 0), (1, 0), (2, 0), (0, 1), (1, 1), (2, 1)] 
```

或者

```
zip(X.ravel(order='F'),Y.ravel(order='F')) 
# [(0, 0), (0, 1), (1, 0), (1, 1), (2, 0), (2, 1)] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-20T22:57:22.423

Numpy`ndindex()`适用于您提供的示例，但并不适用于所有用例。与 Python 的内置`range()`, 允许任意`start`的`stop`, 和不同`step`，numpy`np.ndindex()`只接受`stop`. （`start`假定为`(0,0,...)`，而`step`为`(1,1,...)`。）

这是一个更像内置`range()`函数的实现。也就是说，它允许任意`start`//参数`stop`，`step`但它适用于*元组*，而不仅仅是整数。

```
import sys
from itertools import product, starmap

# Python 2/3 compatibility
if sys.version_info.major < 3:
    from itertools import izip
else:
    izip = zip
    xrange = range

def ndrange(start, stop=None, step=None):
    if stop is None:
        stop = start
        start = (0,)*len(stop)

    if step is None:
        step = (1,)*len(stop)

    assert len(start) == len(stop) == len(step)

    for index in product(*starmap(xrange, izip(start, stop, step))):
        yield index 
```

例子：

```
In [7]: for index in ndrange((1,2,3), (10,20,30), step=(5,10,15)):
   ...:     print(index)
   ...:
(1, 2, 3)
(1, 2, 18)
(1, 12, 3)
(1, 12, 18)
(6, 2, 3)
(6, 2, 18)
(6, 12, 3)
(6, 12, 18) 
```

# ruby-on-rails - gmaps4rails 1.4.6 版是否破坏了 auto_adjust 选项？

> ID：10093300
> 
> 赞同：1
> 
> 时间：2012-04-10T17:15:52.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gmaps4rails

我的带有单个或多个标记的地图，每个标记都有一个圆圈，都使用 auto_adjust。

将带有单个标记的 gmaps 调用记录到控制台，我得到：

```
gmaps( :map_options => {:auto_adjust=>true, :auto_zoom=>true}, :markers => {:data=>"[{\"lat\":43.5368851,\"lng\":-79.6849913}]"}, :circles => {:data=>"[{\"lng\":-79.6849913,\"lat\":43.5368851,\"radius\":5000.0,\"strokeColor\":\"#DD3300\"}]", :options=>{:fillOpacity=>0.35}} ) 
```

在 1.4.5 版中没有问题，但在 1.4.6 版到最新的 1.4.8 版中，地图不会自动调整，而是以（纬度，经度）=（0,0）为中心。

我假设 1.4.6 更新破坏了某些东西，还是我错过了另一个更改？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:47:50.053

只需重新运行命令即可从 gem 安装新资产 :)

```
rails generate gmaps4rails:install 
```

# mysql - MYSQL 中频函数

> ID：10093301
> 
> 赞同：1
> 
> 时间：2012-04-10T17:15:57.630
> 
> 标签：mysql, join, if-statement, alias

我在同一个表上为两个不同的选择语句使用两个连接。我想实现一个 IF 函数，由于表可能包含零，我想用零替换单词“None”

这是我的有效 SQL：

```
SELECT
CONCAT(`payments`.`AssignedTo`," - ",`people2`.`FName`," ",`people2`.`LName`) AS `AssignedTo`,
CONCAT(`payments`.`PersonID`," - ",`people`.`FName`," ",`people`.`LName`) AS `PersonName`
FROM `mb_payments` as `payments`
LEFT JOIN `mb_people` AS `people` ON `people`.`PersonID` = `payments`.`PersonID`
LEFT JOIN `mb_people` AS `people2` ON `people2`.`PersonID` = `payments`.`AssignedTo` 
```

这是我的 IF 函数不起作用的 SQL：

```
SELECT
IF(AssignedTo IS 0,'None', CONCAT(`payments`.`AssignedTo`," - ",`people2`.`FName`," ",`people2`.`LName`)),
CONCAT(`payments`.`PersonID`," - ",`people`.`FName`," ",`people`.`LName`) AS `PersonName`
FROM `mb_payments` as `payments`
LEFT JOIN `mb_people` AS `people` ON `people`.`PersonID` = `payments`.`PersonID`
LEFT JOIN `mb_people` AS `people2` ON `people2`.`PersonID` = `payments`.`AssignedTo` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:20:29.430

我认为您想要“.. = 0”，而不是“... IS 0”。与 NULL 比较时使用 IS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T17:23:37.907

在这种情况下，您可以使用 CASE 语句，或者如果您想使用 IF 语句，那么您的语句是错误的。它应该是：

```
SELECT

    IF(AssignedTo = 0,'None', CONCAT(`payments`.`AssignedTo`," - ",`people2`.`FName`," ",`people2`.`LName`)) AS Result,
    CONCAT(`payments`.`PersonID`," - ",`people`.`FName`," ",`people`.`LName`) AS `PersonName`
    FROM `mb_payments` as `payments`
    LEFT JOIN `mb_people` AS `people` ON `people`.`PersonID` = `payments`.`PersonID`
    LEFT JOIN `mb_people` AS `people2` ON `people2`.`PersonID` = `payments`.`AssignedTo` 
```

看看这个博客：[http ://timmurphy.org/2009/08/13/inline-if-and-case-statements-in-mysql/](http://timmurphy.org/2009/08/13/inline-if-and-case-statements-in-mysql/)

# android - 处理程序调用 notifyDataSetChanged() 未执行

> ID：10093303
> 
> 赞同：2
> 
> 时间：2012-04-10T17:16:00.610
> 
> 标签：android, multithreading, listview, handler, adapter

我在活动中注册了一个处理程序。handleMessage() 在适配器上调用 notifyDataSetChanged。当 Activity 具有初始焦点时，事情就会起作用。但是，当我导航出 Activity 并返回时，notifyDataSetChanged() 不起作用。

FileAdapter 是一个 ArrayAdapter。MergeAdapter 是 CommonsWare 的自定义类。_mergeAdapter 包含 _fileAdapter。

活动代码：

```
 public void setUpDownloadHandler() {
// Define the Handler that receives messages from the thread and update the progress
_downloadHandler = new Handler() {
   public void handleMessage(Message message) {
       super.handleMessage(message);
       String fileId = (String) message.obj;
       int progress = message.arg1;
       FileInfo tempFile = null;
       for (FileInfo file: _files) {
   if (file.getFileId().equals(fileId)) {
                    file.setDownloadProgress(progress);
                    tempFile = file;
                }
            }
           if (tempFile != null) {
               _files.remove(tempFile);
               _files.add(tempFile);
           }
           _fileAdapter.notifyDataSetChanged();
           _mergeAdapter.notifyDataSetChanged();
       }
   };
} 
```

传递处理程序：

```
RunnableTask task = new DownloadFileRunnableImpl(application, the_workspace_url, the_file_info, the_workspace_info.getTitle(), the_internal_storage_directory,
                _downloadHandler); 
```

后台线程代码：

```
if(temp > previous) {
    Message message = new Message();
    message.arg1 = _currentProgress.intValue();
    message.obj = _fileId;
    _progressHandler.sendMessage(message);
    previous = temp;
} 
```

另一条信息是我将处理程序通过Binder 传递，然后进入runnable。我这样做是为了在服务中运行后台线程。我不认为这是问题所在。

**编辑：** 似乎处理程序在第二次导航到时与活动没有关联（可能是因为 onCreate 创建了一个新的处理程序）。有没有办法重新关联或保留旧处理程序？

**更新** 当活动失去对另一个活动的关注时，活动将被销毁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:01:18.037

当您离开您的活动时，我会尝试在您的活动的 onDestroy 方法中放置一条日志消息，以查看它是否被破坏。所以你的任务可能有来自旧活动的处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:21:16.073

这是我的答案，我非常依赖 [http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/FragmentRetainInstance.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/FragmentRetainInstance.html)

真的只是拿走了他们的代码并对其进行了更改，因此每次我想再次启动线程（工作）时都必须重新制作片段。它通过处理程序与 Activity 进行通信。

```
public class Main extends Activity implements WorkProgressListener {

private static final String TAG = "tag";

private Handler handler;

private Button startWorkBtn;

private ProgressDialog progressDialog;

private boolean onSaveInstanceFlag = false;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.i(TAG,"Main onCreate " + Utils.getThreadId());

    setContentView(R.layout.main);

    handler = new ProgressHandler();

    startWorkBtn = (Button)this.findViewById(R.id.start_work_btn);
    startWorkBtn.setEnabled(false);
    startWorkBtn.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick (View v) {
        Log.i("tag","Main: startWorkBtn onClick ");
        startWorkBtn.setEnabled(false);
        FragmentManager fm = getFragmentManager();
        Fragment workF = (Fragment)fm.findFragmentByTag("work");
        if (null == workF) {
            workF = new WorkFragment();
            Log.i(TAG,"Main new WorkF" + Utils.getThreadId());

            startProgressDialog(true);
            startWorkBtn.setEnabled(false);
            fm.beginTransaction().add(workF, "work").commit();
            Log.i(TAG,"Main add(workF) " + Utils.getThreadId());

        }   
        else {
            // should never be able to get here.
        }               
    }           
});

    FragmentManager fm = getFragmentManager();

    Fragment loadingFragment = fm.findFragmentByTag("work");
    Log.i(TAG,"Main findFragment " + Utils.getThreadId());

    if (null == loadingFragment) {
        this.startWorkBtn.setEnabled(true);
    }  
    else {
        // could also decide to show progress dialog based on savedInstanceState
        this.startProgressDialog(true);
    }

} // end onCreate

@Override
public void onRestart() {
    Log.i(TAG,"Main onRestart " + Utils.getThreadId() );
    super.onRestart();
    this.onSaveInstanceFlag = false;
}

@Override
public void onResume () {
    Log.i(TAG,"Main onResume " + Utils.getThreadId());
    super.onResume();
    this.onSaveInstanceFlag = false;
}

@Override
public void onSaveInstanceState (Bundle savedInstanceState) {
    Log.i(TAG,"Main onSaveInstanceState "+ Utils.getThreadId());

    this.onSaveInstanceFlag = true;

    super.onSaveInstanceState(savedInstanceState);
    if (null != this.progressDialog) {
        savedInstanceState.putBoolean("progressDialog", true);
    }
    else {
        savedInstanceState.putBoolean("progressDialog", false);
    }
}

@Override
public void onStop () {
    Log.i(TAG,"Main onStop " + Utils.getThreadId());
    super.onStop();
}

@Override
public void onDestroy () {
    Log.i(TAG,"Main onDestroy " + Utils.getThreadId());     
    super.onDestroy();
    this.closeProgressDialog();
    this.handler.removeCallbacksAndMessages(null);
}   

public class ProgressHandler extends Handler {

    @Override
    public void handleMessage (Message msg) {
        Log.i(TAG,"Main ProgressDialogHandler handleMessage");
        Bundle b = msg.getData();           
        boolean isDone = b.getBoolean("isDone");
        String tag = b.getString("tag");

        if (isDone && !onSaveInstanceFlag) {
            FragmentManager fm = getFragmentManager();
            Fragment loader = (Fragment)fm.findFragmentByTag(tag);

            fm.beginTransaction().remove(loader).commit();

            closeProgressDialog();
            Main.this.startWorkBtn.setEnabled(true);
        }
    }       
}

@Override
public void sendProgress(String tag, int progress, int max) {
    if ( progress == max) {
        Log.i(TAG,"Main sendProgress " + Utils.getThreadId());
        Message message = handler.obtainMessage();          
        Bundle b = new Bundle();
        b.putBoolean("isDone", true);
        b.putString("tag",tag);
        message.setData(b);
        this.handler.sendMessage(message);
    }       

}

private void startProgressDialog(boolean show) {
    this.progressDialog = new ProgressDialog(this);
    this.progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    this.progressDialog.setMessage("loading");
    this.progressDialog.setCancelable(false);
    this.progressDialog.show();
}

private void closeProgressDialog() {
    if (null != this.progressDialog) {
        progressDialog.cancel();
        this.progressDialog = null;
    }       
}   

} // end Main 
```

公共类 WorkFragment 扩展片段 {

```
private static final String TAG = "tag";

private boolean mReady = false;
private boolean mQuiting = false;

private boolean done = false;

public WorkFragment () {}

final Thread mThread = new Thread() {
    @Override
    public void run () {

    synchronized(this) {
            while (!mReady) {
                Log.i(TAG,"WorkF notReady"+ Utils.getThreadId());               

                if (mQuiting) {
                    return;
                }
                try {
                    wait();
                } catch (InterruptedException e) {
                }
            }
        } // end synchronized

        Log.i(TAG,"WorkF starting work "+ Utils.getThreadId());             

        try {
            Log.i(TAG,"WorkF about to sleep"+ Utils.getThreadId());             

            Thread.currentThread().sleep(10000l);

            Log.i(TAG,"WorkF almost finished "+ Utils.getThreadId());               

            done = true;

        } catch (InterruptedException e1) {
            e1.printStackTrace();
        }

        synchronized(this) {
            while (!mReady) {
                Log.i(TAG,"Activity notReady"+ Utils.getThreadId());                

                if (mQuiting) {
                    return;
                }
                try {
                    wait();
                } catch (InterruptedException e) {
                }
            }

            ((WorkProgressListener)getActivity()).sendProgress(WorkFragment.this.getTag(), 100, 100);

        } // end synchronized 2
    }

};

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
     Log.i(TAG,"WorkF, onAttach: "+ Utils.getThreadId());   

}

 @Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     Log.i(TAG,"WorkF, onCreate: "+ Utils.getThreadId());   

     setRetainInstance(true);

     mThread.start();
 }

 @Override
 public void onActivityCreated(Bundle savedInstanceState) {
     super.onActivityCreated(savedInstanceState);
     Log.i(TAG,"WorkF, onActivityCreated: "+ Utils.getThreadId());  

     if (done) {
         ((WorkProgressListener)getActivity()).sendProgress(WorkFragment.this.getTag(), 100, 100);
     }

     synchronized (mThread) {
         mReady = true;
         mThread.notify();
     }
 }

 @Override
 public void onStart()
 {
     super.onStart();
     Log.i(TAG,"WorkF, onStart: "+ Utils.getThreadId() );   

 }

 @Override
 public void onDestroy() {
     synchronized (mThread) {
         mReady = false;
         mQuiting = true;
         mThread.notify();
     }

     super.onDestroy();
 }

 @Override
 public void onDetach() {
     synchronized (mThread) {
         mReady = false;
         mThread.notify();
     }

     super.onDetach();
 }

 public void restart() {
     synchronized (mThread) {
         mThread.notify();
     }
 }
}// end WorkFragment

public interface WorkProgressListener {

public void sendProgress (String tag, int progress, int max);

} 
```

# svn - 局域网上的 TortiseSVN？

> ID：10093306
> 
> 赞同：1
> 
> 时间：2012-04-10T17:16:06.420
> 
> 标签：svn, tortoisesvn

我一直不得不在工作中使用 Source Safe，但它很糟糕。我想切换到 TortiseSVN，但显然在 LAN 上工作时，事情可能会损坏？真的吗？有没有办法绕过腐败？

在这一点上，即使是 Source Safe 也开始破坏事物。（糟糕的程序......）谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:18:31.387

TortoiseSVN 与 Subversion 服务器一起在 LAN 上运行良好。

TortoiseSVN 有可能针对本地的、基于文件的存储库工作。如果基于文件的 repo 放置在网络驱动器上，我认为事情可能会中断。不要那样做。

Source Safe 尝试在没有适当服务器软件的情况下基于网络共享进行共享。它很容易出错。不要试图用颠覆做任何类似的事情。

SVN 服务器在 Windows 和 Unix 下运行良好。两个平台都有可用的安装程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:42:40.323

我已经在我的家用机器上运行 Subversion，没有任何问题。（我现在正在使用 Git。）

您不应该在 Internet 上访问您的工作 SVN 存储库。我假设您将它托管在防火墙内的服务器上，在您的网络上。

但是通过 Internet 访问 Subversion 是完全正确的。许多开源项目授予匿名用户只读访问权限，以便他们可以通过 Internet 访问代码。你从哪里得到你的信息？是时候换一个新来源了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T17:28:24.707

你错了——VSS 在网络上运行时很容易损坏。这尤其适用于 WAN。VSS通过直接修改VSS DB中的文件来工作，如果文件传输过程中出现网络故障，它不会意识到，因此很高兴地将部分文件存储在DB中。如您所见，文件越大或网络越脆弱，您丢失数据的可能性就越大。

SVN 不是这样工作的，它使用服务器应用程序，您将文件发送到服务器，它检查它们，然后安全地存储它们。如果有问题，它会告诉你。

现在，您可以将 SVN 配置为直接处理文件（使用 file:// 协议而不是更常见的 svn:// 或 http:// 协议），这通常由读取数据的服务器进程完成（像备份程序），但不建议普通使用。人们曾经将它用于仅限本地的 svn 操作，即只有 1 个用户，但现在没有人这样做。

有很好的安装程序可以为您设置好一切，最著名的是[VisualSVN Server](http://www.visualsvn.com/server/)，但也有[UberSVN](http://www.ubersvn.com/)。去拿一个并使用它，你会更快乐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T17:18:56.263

不能说这发生在我的工作地点，我们大约有 50 人。

# excel - Excel，值，组之间的查找

> ID：10093309
> 
> 赞同：0
> 
> 时间：2012-04-10T17:16:14.357
> 
> 标签：excel, excel-2007, lookup

我在 Q 列中有美元值

我想做的是在 Q 列上查找并告诉我他们属于哪个组。

```
(in column Z is where i would have the lookup)

Between 20-39.99 = D 
Between 40-99.99 = C
Between 100-299.99 = B
300+ = A 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:20:37.690

无需进行查找。一个简单的公式就可以了。

如果 Q1 具有美元价值，则在 Z1 中输入以下内容：

```
=if(Q1<20,"",if(Q1<40,"D",if(Q1<100,"C",if(Q1<300,"B","A")))) 
```

向下填写 Z 列，使其适用于 Q 列中的所有值。

请注意，您没有价值低于 20 美元的组字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:23:28.227

应该`;`代替`,`：

```
=IF(Q1<20;"";IF(Q1<40;"D";IF(Q1<100;"C";IF(Q1<300;"B";"A")))) 
```

# javascript - 通过AJAX返回的jQuery没有显示任何效果

> ID：10093311
> 
> 赞同：0
> 
> 时间：2012-04-10T17:16:19.657
> 
> 标签：javascript, jquery, ajax

我有两个网页。第 1 页是一个表单，在其上提交第 2 页是通过 jQuery 加载的（调用 php 页面并在未加载的情况下在同一 page1 上返回输出）。我维护了会话变量以确保没有违规行为。但是，在特定情况下，我希望关闭第 1 页窗口，因此我将以下代码作为第 2 页的 o/p 传递。

```
echo '<div style="background-color:#ffa; padding:5px"><font color=red>Multiple sessions of the same page are open. Please <a href="" onclick="window.close();">close</a> use the latest window for submission</font></div>';
echo '<script type="text/javascript">
function parent_close(){
    parent.window.close();  
}
setTimeout(parent_close,5000);  
</script>'; 
```

但是，似乎单击“关闭”链接既不会关闭主窗口，也不会在 5 秒内自动关闭窗口（这是我真正想要的）

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:36:18.397

您不能通过 javascript 关闭顶部窗口，除非您也使用 javascript 打开了它。抱歉，无法完成。

尝试仅复制该行

```
top.window.close(); 
```

到控制台。运行它，看看会发生什么：什么都没有。

如果你放一个

```
console.log('here') 
```

在您的 parent_close 函数中，您将看到该语句已执行...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:21:18.970

链接的 href 中应该有一个值，而不仅仅是一个空值，例如：

```
href="#" 
```

并不是：

```
href="" 
```

此外，第一个参数`setTimeout`应该用引号引起来，并且您可能希望调用该函数，而不是返回，例如：

```
setTimeout("parent_close()",5000); 
```

# php - Scriptaculous：多个自动完成字段

> ID：10093313
> 
> 赞同：0
> 
> 时间：2012-04-10T17:16:25.387
> 
> 标签：php, javascript, html, autocomplete, scriptaculous

我需要找到一种将五个自动完成器 HTML 字段添加到 Web 表单的方法。我有一个工作完美，但是当我重复代码时它不起作用。我确信对此有一个非常简单的答案，但是我的 Javascript 新手导致走错了路。

谢谢你的帮助。这是JS代码：

```
window.onload = function() {
new Ajax.Autocompleter('venue0', 'venue_choices', 'venue_search.php', {
  paramName: 'q',
    minChars: 2,
    frequency: 0.4,
    indicator: 'loading'
    });                
new Ajax.Autocompleter('venue1', 'venue_choices', 'venue_search.php', {
  paramName: 'q',
    minChars: 2,
    frequency: 0.4,
    indicator: 'loading'
    });
new Ajax.Autocompleter('venue2', 'venue_choices', 'venue_search.php', {
  paramName: 'q',
    minChars: 2,
    frequency: 0.4,
    indicator: 'loading'
    });
new Ajax.Autocompleter('venue3', 'venue_choices', 'venue_search.php', {
  paramName: 'q',
    minChars: 2,
    frequency: 0.4,
    indicator: 'loading'
    });                    
new Ajax.Autocompleter('venue4', 'venue_choices', 'venue_search.php', {
  paramName: 'q',
    minChars: 2,
    frequency: 0.4,
    indicator: 'loading'
    });                    
}; 
```

这是相关的HTML：

```
<input name="venue0" type="text" id="venue0" value="" />
<input name="venue1" type="text" id="venue1" value="" />
<input name="venue2" type="text" id="venue2" value="" />
<input name="venue3" type="text" id="venue3" value="" />
<input name="venue4" type="text" id="venue4" value="" />
<p id="loading" style="display:none">
    <img alt="Searching..." src="static/images/thinking.gif" />
</p>
<div id="venue_choices" style="z-index:1;"></div> 
```

正如我所说，`venue0`工作完美，但其他人不会引起 JQuery 的任何反应。我做了什么傻事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:36:34.483

我最终使用了另一种解决方案：将所有相同的自动完成选项放在一个输入框中（非常类似于本网站上的“标签”）。似乎工作正常！

# javascript - 为什么这个 JS 创建的 SVG 不能在 Chrome 中工作？

> ID：10093315
> 
> 赞同：3
> 
> 时间：2012-04-10T17:16:41.843
> 
> 标签：javascript, google-chrome, svg, smil

考虑这个简单的 SVG SMIL 动画：

```
<svg xmlns="http://www.w3.org/2000/svg" viewBox="-50 -50 100 100">
  <circle r="40" fill="red">
    <animate
      attributeType="CSS" begin="click"
      attributeName="fill" to="blue" dur="0.3s" fill="freeze"/>
  </circle>
</svg> 
```

这在 Windows 上的 Chrome v18 中正常工作（以保持颜色为模的错误）： http:
[//phrogz.net/svg/change-color-on-click-simple.svg](http://phrogz.net/svg/change-color-on-click-simple.svg)

当我`<animate>`使用 JavaScript 生成元素时，在 Firefox、Safari 和 Opera 中一切正常，但在 Chrome 中却不行。在 Chrome 中，当我单击圆圈时没有任何反应。

```
<svg xmlns="http://www.w3.org/2000/svg" viewBox="-50 -50 100 100">
  <circle r="40" fill="red"/>
  <script>
    var c = document.querySelector('circle');
    createOn(c,'animate',{
      attributeType:'CSS', begin:'click',
      attributeName:'fill', to:'blue',
      dur:'0.3s', fill:'freeze'
    });
    function createOn(el,name,attrs){
      var e = el.appendChild(document.createElementNS(el.namespaceURI,name));
      for (var name in attrs) e.setAttribute(name,attrs[name]);
      return e;
    }
  </script> 
```

在此处查看此 JavaScript 版本：http:
[//phrogz.net/svg/change-color-on-click-simple-js.svg](http://phrogz.net/svg/change-color-on-click-simple-js.svg)

控制台中没有脚本错误。第一个示例的内容实际上是在加载第二个示例后通过从 Chrome 开发人员工具中选择 Copy As HTML 生成的，因此我知道它正在生成正确的属性名称和值。两者（SVG命名空间）之间`namespaceURI`的`<animate>`元素是相同的`namespaceURI`，所有属性（`null`）也是如此。

有没有办法让 JS 生成的`<animate>`元素在 Chrome 中工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T19:54:10.493

如果我在附加动画**之前**定义属性，它似乎可以工作。

[http://jsfiddle.net/VFUHk/](http://jsfiddle.net/VFUHk/)

# android - ZXing 库不提供 Intent 结果

> ID：10093317
> 
> 赞同：0
> 
> 时间：2012-04-10T17:16:56.603
> 
> 标签：android, zxing

我正在使用 ZXing Library 作为我的 Android 项目的库。但是，每当扫描条码时，ZXing Capture 活动都不会向我的活动提供结果，它只是站在那里，就好像代码已通过应用程序正常扫描一样。

我目前的代码是：

```
discount.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View v) {

            Intent intent = new Intent(DiscountActivity.this, CaptureActivity.class);
            intent.setAction("com.google.xzing.client.android.SCAN");
            intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
            startActivityForResult(intent, 0);

        }

    });

}

public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    if (requestCode == 0) {
        if (resultCode == RESULT_OK) {

            Dialog dialog = new Dialog(this);
            dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
            dialog.setContentView(R.layout.discount_dialog);

            dialog.show();

        } else if (resultCode == RESULT_CANCELED) {
            // Handle cancel
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:02:54.000

这段代码是错误的，而且比它需要的更复杂。这就是你应该做的一切：[http ://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

# c# - MSBuild 复制 web 项目引用而不构建

> ID：10093327
> 
> 赞同：1
> 
> 时间：2012-04-10T17:17:34.997
> 
> 标签：c#, asp.net, msbuild

我想在解决方案配置中设置为“不构建”的解决方案中有一个 Web 项目，但是我仍然希望将项目的引用（及其依赖项）复制到该项目的 bin 文件夹中。sln 中有实际构建的类库项目，web 项目引用了这些。

我们当前的“构建”只是调用 devenv，它**正是这样做的**。出于显而易见的原因，我宁愿使用 MSBuild。

我**不是**寻找手动复制文件的方法（单独复制或 *.dll）。有很多方法可以做到这一点。我正在寻找一种方法来复制 devenv.exe 给我们的行为 - 根据解决方案文件中项目部分的内容自动复制引用（及其依赖项）（如下）。

这些参考来自本节中的解决方案：

```
Project("{E24C65DC-7377-472B-9ABA-BC803B73C61A}")="TheWebProjectName", 
                                                  "Web\Project\Folder", 
                                                  "{1CBD1906-0C2E-4C92-A81D-63C2AD816EA1}"
    ProjectSection(WebsiteProperties) = preProject
        TargetFrameworkMoniker = ".NETFramework,Version%3Dv4.0"
        ProjectReferences = "{B125568E-E80C-4080-B8D3-5602B604734C}|Some.Reference.dll;
                             {117E8B0A-F0D6-47D0-BB51-71099969566D}|Some.OtherRef.dll;"
        ...
    EndProjectSection
EndProject 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:07:46.040

MSBuild 使用目标文件来确定它的构建步骤。查看相关的目标文件并确定 MSBuild 如何复制这些文件、创建您自己的目标文件并修改您的构建配置以使用新目标。

相关目标文件：

*   位置：C:\Windows\Microsoft.NET\Framework\v$（版本）
*   Microsoft.CSharp.targets
*   Microsoft.Common.targets

相关文件：

*   [微软构建](http://msdn.microsoft.com/en-us/library/dd393574.aspx)
*   [指定目标](https://stackoverflow.com/q/232052/371298)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:00:00.770

**您可以使用MSBuild 任务**执行诸如此类的构建操作：http : [//msdn.microsoft.com/en-us/library/ms171466 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms171466(v=vs.80).aspx)

在您的具体情况下，您可能会对内置的**复制任务**感兴趣：http : [//msdn.microsoft.com/en-us/library/3e54c37h (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/3e54c37h(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T20:42:31.913

尝试使用 powershell 而不是 msbuild ！Ria 服务还强烈依赖于 powershell commandlet。

干杯..

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-17T16:06:21.063

使用 Exec 任务调用 devenv.exe - 我们一直为 BizTalk 解决方案这样做，因为旧版本的 MSBuild 不支持 BizTalk 项目文件......

# c++ - 在 C++ 中创建单链表的一些指针

> ID：10093333
> 
> 赞同：-3
> 
> 时间：2012-04-10T17:17:45.197
> 
> 标签：c++, inheritance, polymorphism, singly-linked-list

我有一个 uni 分配，我必须在其中实现一个单链表，其中包含从称为 Shape 的通用抽象基类派生的不同对象。

我将链接到 GitHub 以获取类实现：[shapes.h](https://github.com/jkase/OOP-Assignment-3---Lists--inheritance-and-polymorphism/blob/master/shapes.h)、[shapes.cpp](https://github.com/jkase/OOP-Assignment-3---Lists--inheritance-and-polymorphism/blob/master/shapes.cpp)。到目前为止，它由`Shape`及其派生类组成`Circle`。也会有`Rectangle`，`Point`以后还会有`Polygon`。

我现在应该实现这些不同形状的单链表。到目前为止，我已经为`List`-class 和`Node`-class 提出了以下类原型：

```
class Node
{
public:
    Node() {}

    friend class ShapeList;

    private:
    Shape* data;
    Node* nextNode;
};

class ShapeList
{
public:
    ShapeList(){head = NULL;}
    void Append(Shape& inData);

private:
    Node* head;
}; 
```

应该能够以以下样式从 main 调用向 -object`void Append(Shape& inData)`添加元素：`ShapeList`

```
ShapeList list1;

list1.Append( Circle(5,5,5) );
list1.Append( Rectangle( 4, 10, 2, 4) ); 
```

鉴于这些信息，我应该如何实施`void Append(Shape& inData)`？我尝试了几种不同的方法，但到目前为止还没有提出正确的解决方案。

参数 to 也完全有可能`Append`不是`(Shape& inData)`.

编辑：

我已经实现`Append(Shape& inData)`了，但它只在某些时候有效：

```
Circle circle1;
ShapeList list1;
list1.Append( circle1 ); 
```

但不与

```
ShapeList list1;
list1.Append ( Circle(5,5,5) ) 
```

到目前为止，我的`Append()`-implementation 如下所示：

```
void ShapeList::Append(Shape& inData)
{
    //Create a new node
    Node* newNode = new Node();
    newNode->data=&inData;
    newNode->nextNode=NULL;

    //Create a temp pointer
    Node *tmp = head;

    if (tmp != NULL)
    {
        //Nodes already present in the list
        //Traverse to the end of the list
        while(tmp->nextNode != NULL)
            tmp = tmp->nextNode;

        tmp->nextNode=newNode;
    }

    else
        head=newNode;
} 
```

你们觉得这样好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:27:29.207

1.  你可能想`Node`嵌套在里面`ShapeList`所以它的全名将是`ShapeList::Node`，而不仅仅是`::Node`.
2.  由于`Node`将远程拥有一些数据，因此您可能需要为其定义三巨头。
3.  与此一致，当您将某些内容推送到列表时，列表将保存动态分配的副本，而不是原始对象。

编辑：`Append`应该采用 a`Shape const &`而不是 a `Shape &`。对 const 的引用可以绑定到临时对象，但对非 const 的引用不能，因此`list.Append(Circle(5,5,5))`如果参数是对非 const 对象的引用，则使用创建临时对象（例如 ）的参数的调用将无法编译。

我还会更改`Node::Node`为要求您传递一个或两个参数。按原样，您的链表代码比我想要的更多地处理节点的内部。我会将其更改为：

```
Node::Node(Shape const *d, Node *n=NULL) : data(d), nextNode(n) {} 
```

然后追加，而不是：

```
Node* newNode = new Node();
newNode->data=&inData;
newNode->nextNode=NULL; 
```

你会使用类似的东西：

```
Node *newNode = new Node(&inData); // or, probably, `... = new Node(inData.clone());` 
```

...并且 Node 的 ctor 会从那里处理事情。

另请注意，添加到链表的*开头比添加到末尾更容易（它可以避免您遍历整个列表）。*如果你真的想添加到最后，可能值得保存一个指向你添加的最后一个节点的指针，这样你就可以直接到最后，而不是每次都遍历整个列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:27:48.130

由于这被标记为“作业”，我只会为您指出好的方向。这可能太基本了，或者可能足以满足您的需求......

在典型情况下，您只需使用已经编写好的容器，例如 std::list。

但是为了实现你自己的链表

当您从 ShapeList 的头成员开始时，您应该能够遍历整个列表并找到从未为其分配过 'nextNode' 的节点。

这是您要添加新节点的地方。

现在你有一些技巧可以让事情顺利进行：

1- 在 C++ 中，变量不会自动初始化。因此，您必须在创建新节点时初始化许多值，尤其是下一个节点指针。

2-我建议不要使用指向引用的指针，而是创建形状的副本，或者使用某种智能指针来避免复制。

3-不要忘记内存管理，当您销毁链表时，您将不得不单独销毁所有节点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T17:46:56.923

单链表的一个非常好的实现是作为一个循环列表，其中“头”指针指向尾部。这使得在前面插入或追加到末尾都很容易：在任何一种情况下，您都创建一个新节点，使当前尾部指向它，并使其指向当前头部，然后在插入情况下使头指针指向新节点。

您似乎缺少的内容（除了已经指出的内容：分配、解除分配和复制节点）是一种知道您实际上已创建列表的方法。因此，您需要添加某种输出 - 运算符 << 或 print() 例程，它将遍历列表，并按顺序调用图形对象的打印机制。

您说 Append 的参数可能不是`Shape &data`. 鉴于指定的调用约定的要求，它应该是：

```
Append( const Shape &data ) // provided shapes have copy constructors
    {
    Node *newNode = new Node( data ); // requires a constructor of Node that copies data to a freshly allocated location and sticks a pointer to that location in its data field - then Node's destructor needs to release that pointer.
    ... ( and the code to manipulate the existing list and newNode's next pointer )
    } 
```

除其他外，这使管理责任变得清晰而简单。

如果你有一个 Node 构造函数，它同时接受一个指向 Node 和一个 Shape 的指针，你应该能够在两行中执行 Append - 一行分配新 Node 并适当地调用构造函数，另一行修改指针以指向新的节点。

我会添加 - 根据您的编辑 - 您绝对需要在 Append 中进行分配和复制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T17:23:23.983

这是处理多态要求（std::shared_ptr）的一种方法，用 STL 单链表演示...

```
typedef forward_list<shared_ptr<Shape>> ShapeList;

ShapeList list1;

list1.push_back(make_shared<Circle>(5,5,5));

list1.push_back(make_shared<Rectangle>(4, 10, 2, 4)); 
```

以下是它对 Node 的影响：

```
class Node
{
public:
    Node() {}

    friend class ShapeList;

    private:
    shared_ptr<Shape> data;
    Node* nextNode;
}; 
```

和形状列表...

```
class ShapeList
{
public:
    ShapeList(){head = NULL;}
    void Append(const shared_ptr<Shape>& inData);

private:
    Node* head;
}; 
```

# sql - 在此查询中得出所需结果的最佳方法

> ID：10093335
> 
> 赞同：0
> 
> 时间：2012-04-10T17:17:52.060
> 
> 标签：sql, sql-server-2008

我有两张表，一张有一组ID，另一张有一组ID和一个用户ID，如下所示

**客户**

```
 id
  -----
    3
    4
    6
    7
    9
    11 
```

**商业**

```
ClientId  |     userId
----------------------
 4            2
 4            3
 9            2 
```

所以基本上我会有一个参数进入@userId，如果@userId = 2，那么该用户可以访问clientId 4和9以及ClientId表中的所有其他人，但如果说@userId = 5，这个用户不能访问客户端 ID 4 和 9，因为它们在业务表中仅限于客户端 2 和 3。

我想要的结果是用户可以看到的所有客户端 ID 的列表（但必须检查是否在业务表中指定了用户 ID 并且用户 ID 不是那里的用户 ID，该用户 ID 看不到客户端 ID查询客户表时的业务表。

很抱歉，它是如此令人困惑.. 我很难想出这个.. 任何指针将不胜感激。

**结果应该是**

假设用户 ID = 2

```
id
---
3
4
6
7
9
11 
```

假设用户 ID = 13

```
id
---
3
6
7
11 
```

因为 4 和 9 分别仅限于用户 2 和 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:22:36.353

编辑：根据我的重新阅读，我对逻辑的理解是：如果 UserID 在 Business 表中，则返回*所有*Clients，否则返回 Business 表中不存在的所有客户端。

```
IF EXISTS (SELECT ClientId FROM Business WHERE UserId = @userId)
BEGIN
  SELECT DISTINCT Id
  FROM Client
END
ELSE
BEGIN
  SELECT Id
  FROM Client
  WHERE Id NOT IN
  (
    SELECT DISTINCT ClientId
    FROM Business
  )
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:30:55.137

```
select DISTINCT ID from Client C
left join Business B on C.ID = B.ClientID
Where B.ClientID is null OR B.UserID = @UserID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T17:35:32.353

根据我对您问题的解释，我相信这是您想要的查询。

以下是查询功能的简单英文描述： 从所有客户列表中删除受业务表限制的客户。然后添加用户具有显式访问权限的客户端列表。

```
declare @userid int =5 
(
 select Id from Client 
 except
 select clientId from Business 
)
union 
select clientId from Business where userId = @userId 
```

# php - 使用 PHP 获取具有最高/最大值的变量的名称

> ID：10093340
> 
> 赞同：2
> 
> 时间：2012-04-10T17:18:03.063
> 
> 标签：php

我有 4 个变量，每个变量都有一个整数分配给它们。有人可以让我知道如何获得具有最高值的变量的名称吗？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T17:21:24.950

这是您提出的问题的解决方案：

```
$arr = compact('v1', 'v2', 'v3', 'v4');
arsort($arr);
$name = key($arr);
// get the value: ${$name} 
```

但是，首先将变量存储在数组中会更有意义。更好的设置是：

```
$arr = array('v1' => 543, 'v2' => 41, 'v3' => 1, 'v4' => 931);
arsort($arr);
$name = key($arr);
// get the value: $arr[$name] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T17:22:19.443

给定四个变量：

```
$a = 1;
$b = 3;
$c = 4;
$d = 2; 
```

您可以使用[`compact`](http://us.php.net/compact)将它们转换为关联数组：

```
$array = compact('a', 'b', 'c', 'd');
var_dump($array); // array('a' => 1, 'b', => 3, 'c' => 4, 'd' => 2); 
```

然后找到最大的键/值：

```
$max_key = $max_value = null;

foreach ($array as $key => $value) {
  if (is_null($max_value) || $value > $max_value) {
    $max_key = $key; $max_value = $value;
  }
} 
```

# mysql - 如何查询 SQL 数据库在两个日期之间购买了多少次商品？

> ID：10093346
> 
> 赞同：0
> 
> 时间：2012-04-10T17:18:16.823
> 
> 标签：mysql, database

当谈到数据库时，我是一个初学者，这个问题让我的大脑融化了。我有一个数据库，其中包含您可以想象的标准列：ID、价格、描述等。我应该如何组织数据库，以便可以查询数据库在 2012 年 1 月 8 日到 2012 年之间购买了多少次物品- 03-23？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:41:36.240

同意其他答案。

```
SELECT itemcode, count(itemcode) 'times purchased', sum(quantity) 'amount purchased'  
FROM `temp_trans` 
WHERE `trans_date` >= '2012-01-08' AND `trans_date` <= '2012-03-23' 
GROUP BY itemcode 
```

这是一个活生生的例子：[http ://sqlfiddle.com/#!2/13def/1](http://sqlfiddle.com/#!2/13def/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:22:04.867

如果您有一个日期列，`dt`您可以使用

```
SELECT COUNT(Id) FROM your_table
WHERE dt BETWEEN 2012-01-08 AND 2012-03-23
  AND Id = your_item_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T17:25:19.060

```
select id, count(*)
from mytable
where date between '2012-01-01' and '2012-02-02'
group by id 
```

这为您提供了每件商品的购买次数。您分组的字段将取决于您希望如何拆分结果，使用 id 或唯一名称将取决于您要对结果执行的操作。

之间的子句是包容的顺便说一句

编辑：评论的好点！可能应该说“使用适当的字段进行分组，例如项目的名称或 ID”。在我们的某些系统中，描述和名称可以互换使用 :)

# java - 将组件动态添加到 JPanel

> ID：10093350
> 
> 赞同：1
> 
> 时间：2012-04-10T17:18:34.737
> 
> 标签：java, swing, jpanel

我正在尝试将一些组件动态添加到 JPanel，但不幸的是它们没有出现。我只看到在构造函数中添加的那些。

更新版本（添加一个新的 JPanel，所有组件都将在其中）：

```
public class View extends JPanel {

JPanel panel = new JPanel();
JLabel label;
JLabel labels[];
JButton b1 = new JButton("OK");

public View() {
   this.setLayout(new FlowLayout());
   this.add(panel); // adding a new JPanel
   label = new JLabel("My label");
   panel.add(label);  // adding label to the new panel (this one works)
}

public void showLabels() {
  System.out.println("function showLabels called");

  labels = new JLabel[5];

  for (int i = 0; i < 5; i++) {
      labels[i] = new JLabel("Label: " + i);
      panel.add(labels[i]); // this one doesn't work
  }
  panel.add(b1); // this one doesn't work, too
    this.validate(); // validating this class (parent container)
    panel.validate(); // validating the panel, where all the components are
  }
} 
```

不幸的是，什么都没有改变。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T17:55:55.757

调用[`validate()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#validate%28%29)父容器，如[嵌套布局示例](https://stackoverflow.com/a/5630271/418556)所示。左下角的那些标签是动态添加的。请注意，调用`pack()`可能会导致 GUI 的大小发生变化，而调用`validate()`不会。如果您**需要**让 GUI 调整大小-调用`pack()`，否则调用`validate()`。

![](../Images/9311338d93aec944e03780b8f6c23705.png)

# c# - 如何确保在使用键盘快捷键时只执行一个 KeyBinding 命令？

> ID：10093358
> 
> 赞同：6
> 
> 时间：2012-04-10T17:19:15.477
> 
> 标签：c#, wpf, key-bindings

我有以下键绑定：

```
<KeyBinding Gesture="Ctrl+S" Command="Save" />
<KeyBinding Gesture="Ctrl+Shift+S" Command="SaveAs" /> 
```

当我按 Ctrl+Shift+S 执行`SaveAs`命令时，它可以工作——但紧接着，`Save`命令也会被执行。这是由我的手势定义引起的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:31:28.127

您必须将 RoutedEvent 标记为`Handled=true`使用`RoutedEventArgs`处理保存的方法中的参数。

# c# - 使用 LINQ 比较查询中的日期

> ID：10093359
> 
> 赞同：7
> 
> 时间：2012-04-10T17:19:17.387
> 
> 标签：c#, .net, linq-to-sql, datetime, comparison

我有一个返回 var 类型 myQry 的 Linq 查询

```
var myQry = from ..... 
```

这是一个大型 linq，它返回我需要进一步过滤的所有记录。在我的一个 if 条件中，我有一个像这样运行的过滤器来检查日期。我需要检查 name 是否包含输入的名称并与生日完全匹配。

我试过这个编译并运行，但没有正常工作

```
myQry.Where(x => x.FirstName.Contains(strName) && DateTime.Compare( x.BirthDt, searchDt)>=0).ToList() 
```

然后我尝试了这个，它抛出了一个异常“DbArithmeticExpression arguments must have a numeric common type”

```
myQry.Where(x => x.FirstName.Contains(strName) && (x.BirthDt- searchDt).Days == 0).ToList(); 
```

对于这种情况，当我在查询中使用 where 子句时，进行日期比较的最佳方法是什么？LinQ 查询的 where 子句中不允许哪些操作？

谢谢你的时间...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T18:32:37.060

[在这种情况下，您可能希望使用SqlMethods](http://msdn.microsoft.com/en-us/library/system.data.linq.sqlclient.sqlmethods.aspx)类中的方法来使用 SQL Server 特定的函数。

您的第二个查询可以重写为

```
myQry.Where(x => x.FirstName.Contains(strName) && 
    SqlMethods.DateDiffDay(x.BirthDt, searchDt) == 0).ToList() 
```

这将被翻译成类似的东西

```
SELECT ... FROM Table WHERE FirstName 
    LIKE '@p0' AND DATEDIFF(Day, BirthDt, @p1) = @p2 
```

其中 p0,p1 和 p2 是参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T17:23:19.817

尝试这个：

```
myQry.Where(x => x.FirstName.Contains(strName) &&
x.BirthDt.Date == searchDt.Date).ToList() 
```

请注意，要使上述内容起作用，两者`BirthDt`和都`searchDt`必须是有效的 DateTime 值。您现在只比较 DateTime 值的 Date 部分，而忽略 Time 部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T17:37:47.883

支持哪些操作取决于 ORM 框架（Nhibernate、EF 等），但基本上您可以考虑，如果您使用的方法没有对 SQL 的直译，则很可能不支持。

这就是为什么`==`支持运算符但不支持`DateTime.Compare`方法，或者不支持运算符`-`in`DateTime`因为它没有明确的翻译。

始终尝试坚持使用最简单的运算符并避免使用方法，如果仍然失败，如果您的 ORM 支持该特定方法，您将不得不谷歌搜索。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T17:52:52.417

我同意 Leniel Macaferi 关于更新 Where 子句和比较日期而不是日期时间的观点。对于生日，通常与出生时间无关。回答你的第二个问题

> LinQ 查询的 where 子句中不允许哪些操作？

`Where()`是一种适用于`IEnumerable<T>`or的扩展方法`IQueryable<T>`。我们可以通过按 F12`Where`查看源代码来看到这一点：

```
public static IEnumerable<TSource> Where<TSource>(this IEnumerable<TSource> source, Func<TSource, bool> predicate); 
```

支持的操作称为谓词。谓词是一个委托，它接受一个 TSource 类型的参数并返回一个布尔值，告诉我们条件是否匹配。这可以在上面的代码中的第二个参数中看到： `Func<TSource, bool> predicate`

您可以将谓词定义为您想要的任何内容。只要它返回一个布尔值并接受 1 个 TSource 类型的参数。

这通常是通过定义一个 lambda 表达式来实现的，这就是 Leniel Macaferi 为您所做的。

# c# - 路径操作（安全漏洞）

> ID：10093362
> 
> 赞同：6
> 
> 时间：2012-04-10T17:19:24.157
> 
> 标签：c#, .net, security, path-manipulation

Fortify 安全审查告知我们一些路径操纵漏洞。大多数都是显而易见且简单的修复，但我不明白如何修复以下问题。

```
string[] wsdlFiles = System.IO.Directory.GetFiles(wsdlPath, "*.wsdl"); 
```

“wsdlPath”是从文本框输入的。这是无法解决的问题吗？我可以验证路径是否存在等，但这对漏洞有何帮助？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T18:11:25.007

如果数据总是从内容由用户决定的文本框中获取，并且代码使用该用户的权限运行，那么唯一的威胁就是用户攻击自己。这不是一个有趣的威胁。

该工具试图提醒您注意的漏洞是，如果*低信任恶意代码*可以确定该字符串的内容，那么恶意代码可以尝试发现有关用户机器的事实，例如“是这样那样的程序我碰巧知道安装了一个安全漏洞但没有打补丁？” 或“这台机器上是否有名为‘admin’的用户？” 等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:24:29.933

您永远不应该将任何内容直接提供给未经过滤的 OS API。您应该清理输入，确保它不包含路径（即“../../../somefile”并确保它截断长名称，并且只包含有效的文件名字符（例如，有各种与国际字符有关的错误）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T18:16:42.953

使用该代码，任何经过身份验证和授权使用该功能的用户都能够访问服务器上的文件系统。访问将使用运行 Web 应用程序的服务帐户的凭据来完成。

根据返回数据的使用方式，恶意用户可能能够获取更多信息或使服务器以非预期方式运行。

您应该将允许的路径集限制为仅包含一个或几个精心选择的目录。使用`Path`类中的函数将字符串组合成路径——它们负责处理用户`c:\allowedpath\..\windows\system32`为您输入的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-03T07:28:15.040

这种场景需要编码和解码，以确保数据不会在任何地方被操纵。因为在解密时，如果数据被更改，您将得到错误的结果。

您可以创建您的编码和解码。我使用 System.Security.Cryptography 提供的 RijndaelManaged 和 PasswordDeriveBytes 类完成了它；

# php - 借助数组上传图像并获取错误

> ID：10093366
> 
> 赞同：0
> 
> 时间：2012-04-10T17:19:42.900
> 
> 标签：php, mysql, image, file, upload

我使用脚本将几张图片上传到一个目录，如果只上传一张图片，代码效果很好。

如果我想上传两张或更多张图片并且有一个不被接受的扩展名，脚本将上传一张带有允许上传的扩展名的图片，并为不被接受的一张显示错误消息，但上传发生了. 这是我的第一个问题。

第二个问题：如果出现错误消息，我想显示一条消息，其中说，哪些图像是不允许的。我不知道如何将这个具有不被接受的结尾的变量提取到我可以回显到错误消息的变量中。

*这是我使用的代码：*

```
<?php
if(!empty($_FILES['image']['tmp_name'])){

    $allowed_extension = array('jpg', 'jpeg', 'png', 'bmp', 'tiff', 'gif');

    foreach($_FILES['image']['name'] as $key => $array_value){

        $file_name = $_FILES['image']['name'][$key];
        $file_size = $_FILES['image']['size'][$key];
        $file_tmp = $_FILES['image']['tmp_name'][$key];

        $file_extension = strtolower(end(explode('.', $file_name)));
        if (in_array($file_extension, $allowed_extension) === false){
            $errors[] = 'its an unaccepted format in picture $variable_that_count';
            continue;
        }

        if ($file_size > 2097152){
            $errors[] = 'reached maxsize of 2MB per file in picture $variable_that_count';
        }

        if (count($errors) == 0){
            $path = "a/b/c/";
            $uploadfile = $path."/".basename($_FILES['image']['name'][$key]);

            if (move_uploaded_file($_FILES['image']['tmp_name'][$key], $uploadfile)){
                echo "success.";
            }
        }
    }
}
?> 
```

希望很清楚我喜欢接近什么。如果有人可以提供帮助，我将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:23:16.337

这对你有用

示例 HTML

```
<form action="" enctype="multipart/form-data" method="post">

    <p>
        Please specify a file, or a set of files:<br> <input type="file"
            name="image[]" size="40">
    </p>

    <p>
        Please specify a file, or a set of files:<br> <input type="file"
            name="image[]" size="40">
    </p>

    <p>
        Please specify a file, or a set of files:<br> <input type="file"
            name="image[]" size="40">
    </p>

    <p>
        Please specify a file, or a set of files:<br> <input type="file"
            name="image[]" size="40">
    </p>

    <p>
        Please specify a file, or a set of files:<br> <input type="file"
            name="image[]" size="40">
    </p>

    <div>
        <input type="submit" value="Send">
    </div>
</form> 
```

PHP 代码

```
$allowedExtention = array (
        'jpg',
        'jpeg',
        'png',
        'bmp',
        'tiff',
        'gif' 
);
$errors = array ();
$output = array ();

if (! empty ( $_FILES ['image'] ['tmp_name'] )) {

    foreach ( $_FILES ['image'] ['name'] as $key => $array_value ) {

        $fileName = $_FILES ['image'] ['name'] [$key];
        $fileSize = $_FILES ['image'] ['size'] [$key];
        $fileTemp = $_FILES ['image'] ['tmp_name'] [$key];

        $fileExtention = pathinfo ( $fileName, PATHINFO_EXTENSION );
        $fileExtention = strtolower ( $fileExtention );

        if (! in_array ( $fileExtention, $allowedExtention )) {
            $errors [$fileName] [] = "File format $fileExtention not accepted for $fileName";
            continue;
        }

        if ($fileSize > 2097152) {
            $errors [$fileName] [] = 'reached maxsize of 2MB per file in picture $variable_that_count';
continue ;
        }

        if (count ( $errors ) == 0) {
            $path = "temp";
            $prifix = basename ( $fileName, "." . $fileExtention );

            var_dump ( $prifix );

            $uploadfile = $path . "/" . $fileName;
            $x = 0;
            while ( file_exists ( $uploadfile ) ) {
                $x ++;
                $uploadfile = "{$path}/{$prifix}-{$x}.{$fileExtention}";
            }

            if (move_uploaded_file ( $fileTemp, $uploadfile )) {
                $fileName = basename ( $uploadfile );
                $output [$fileName] = "OK";
            } else {
                $output [$fileName] = "ERORR";
                $errors [$fileName] [] = "Can Move uploaded file to destination";
            }
        }
    }
}

var_dump ( $errors );
var_dump ( $output ); 
```

样本输出

```
string '79534296' (length=8)
string '89773706' (length=8)
array
  'download (1)' => 
    array
      0 => string 'File format  not accepted for download (1)' (length=42)
  'brief.docx' => 
    array
      0 => string 'File format docx not accepted for brief.docx' (length=44)
  '' => 
    array
      0 => string 'File format  not accepted for ' (length=30)
array
  '79534296-2.jpg' => string 'OK' (length=2)
  '89773706-2.jpg' => string 'OK' (length=2) 
```

**编辑 1**

如果所有文件都必须有效，则有两种方法可以实现

A. 首先验证所有文件；

```
foreach ( $_FILES ['image'] ['name'] as $key => $array_value ) {
    if(! in_array (pathinfo ($_FILES ['image'] ['name'] [$key], PATHINFO_EXTENSION ), $allowedExtention ))
    {
        die("Die! Die! Die") ;
    }
}

foreach ( $_FILES ['image'] ['name'] as $key => $array_value ) {
  // Upload Script here 
 } 
```

B. 如果检测到错误，删除所有文件

```
foreach ( $_FILES ['image'] ['name'] as $key => $array_value ) {
  // Upload Script here 
 }

// Remove All Files
if(count($errors) > 0)
{
    foreach ($output as $key => $value)
    {
        @unlink($path . "/" . $key);
    }

    die("Die! die! die!") ;
} 
```

我希望这有帮助

# android - Android：如何为 ListView 中的每个项目设置 TextView？

> ID：10093368
> 
> 赞同：1
> 
> 时间：2012-04-10T17:19:48.447
> 
> 标签：android, listview, listviewitem

我需要有人指出我在这方面的正确方向......

在我的 Android 应用程序中，我有一个 ListView，每行包含各种 textviews 的自定义视图。我检索多个位置的天气信息，然后想将每个位置的结果写入其自己的列表视图项。问题是，我如何引用每个列表视图项上的每个文本视图？

我不能用名字来做`findViewById`，可以吗？如果列表中有三个项目，每个项目的温度文本视图名称是否相同，只是数组索引不同？如果是这样，如何为三个列表项指定 TextViewName(0)、TextViewName(1) 和 TextViewName(2)？

是的，我对 Android 还是很陌生……但我很喜欢它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:23:55.503

使用一种适配器： [http ://www.java-samples.com/showtutorial.php?tutorialid=1516](http://www.java-samples.com/showtutorial.php?tutorialid=1516)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:24:01.080

在您应该在适配器中覆盖的 getView 方法中创建（或回收）每个项目时，您需要执行此操作。观看 2011 年关于列表视图的 google io 谈话，应该很清楚它们是如何工作的。 [http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)

# android - 如何将字符串和整数放入同一个数组中？

> ID：10093371
> 
> 赞同：-1
> 
> 时间：2012-04-10T17:20:01.363
> 
> 标签：android

我必须遵循代码。我希望它返回一个数组，例如`arg[]`，它包含`arg[0]`光标所在行数和光标所在行数`arg[1]` `String(0)`。由于一个是整数，另一个是字符串，我有一个问题。任何想法如何解决这一问题？

```
 public String[] getSubcategoriesRow(String id){
    this.openDataBase();
    String[] asColumnsToReturn = new String[] {SECOND_COLUMN_ID,SECOND_COLUMN_SUBCATEGORIES,};
    Cursor cursor = this.dbSqlite.query(SECOND_TABLE_NAME, asColumnsToReturn, SECOND_COLUMN_SUBCATEGORIES + "= \"" + id + "\"", null, null, null, null);

    String string = cursor.getString(0);
    int count = cursor.getCount();
    String arg[] = new String[]{count, string};
    cursor.close();
    return arg;
  } 
```

光标和结果并更正我只需要将它们组合到一个数组中即可返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:22:32.370

任何一个：

1.  使用`Object[]`（对象数组）而不是`String[]`-**不推荐**，或
2.  创建一个新的、*有意义的*类来保存数据。

    ```
    public Subcategory getSubcategoriesRow(String id){
        this.openDataBase();
        String[] asColumnsToReturn = new String[] {SECOND_COLUMN_ID,SECOND_COLUMN_SUBCATEGORIES,};
        Cursor cursor = this.dbSqlite.query(SECOND_TABLE_NAME, asColumnsToReturn, SECOND_COLUMN_SUBCATEGORIES + "= \"" + id + "\"", null, null, null, null);

        String string = cursor.getString(0);
        int count = cursor.getCount();
        Subcategory toReturn = new Subcategory(count, string);
        cursor.close();
        return toReturn;
      } 
    ```

# vb.net - (iRed = Icolor Mod 256) 是什么意思？

> ID：10093374
> 
> 赞同：0
> 
> 时间：2012-04-10T17:20:18.213
> 
> 标签：vb.net, function

我正在研究一些项目，我开始了 ColorPicker 项目。我无法理解 LongToRgb 函数 >>> 如下：

**

```
Private Function LongToRGB(lColor As Long) As String
    Dim iRed As Long, iGreen As Long, iBlue As Long
    iRed = lColor Mod 256
    iGreen = ((lColor And &HFF00) / 256&) Mod 256&
    iBlue = (lColor And &HFF0000) / 65536
    LongToRGB = Format$(iRed, "000") & ", " & Format$(iGreen, "000") & ", " & Format$(iBlue, "000")
End Function 
```

**

我希望有人用简单的英语向我解释...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T18:56:24.353

[`Mod Operator (% in C#)`](http://msdn.microsoft.com/en-us/library/se0w9esz(v=vs.71).aspx)

基本上，它返回除法运算的**剩余部分。**例如，13 Mod 4 = 1，因为 13 / 4 = 3 w/余数为 1。了解 long 值是如何创建的，以了解函数为什么会这样做，这一点很重要。

* * *

所有颜色（红色、绿色、蓝色）都以 0-255 的数量表示。例如，想象以下值：R(8)、G(3)、B(1)。

要了解该函数为什么会这样做，让我们看一下数值范围为 0-9（10 个值）而不是 0-255（256 个值）的场景。您将如何表示可以对这些值进行逆向工程的单个值？您不能简单地将这些值相加 (8 + 3 + 1 = 12)，因为不可能对原始值进行逆向工程。相反，您必须将值乘以基数。基数取决于值范围...在示例中为 10，因为有 10 个值。该位置是从零开始的索引。红色的位置是 0，绿色的位置是 1，蓝色的位置是 2。

*   `Value * (Base^Position))`
*   红色(8) = (8 * 10^0) = 8 * 1 = 8
*   绿色(3) = (3 * 10^1) = 3 * 10 = 30
*   蓝色(1) = (1 * 10^2) = 1 * 100 = 100

8 + 30 + 100 = 138。而且 138 可以很容易地被逆向工程（事实上，只要看看它！）。数学上的逆向工程是这样完成的：

*   `(CombinedValue / (Base^Position)) % Base = OriginalValue`.
*   (138 / (10^0)) % 10 = (138 / 1) % 10 = 138 % 10 = 8 (红色)
*   (138 / (10^1)) % 10 = (138 / 10) % 10 = 13 (小数被截断) % 10 = 3 (绿色)
*   (138 / (10^2)) % 10 = (138 / 100) %10 = 1（小数被截断）% 10 = 1（蓝色）

该函数做了几件事：

*   由于某种原因`(lColor And &HFF00)`，它无用地执行按位运算符。`(lColor And &HFF0000)`
*   它简化了数学。红色 (256^0 = 1) 除以 1 没有意义，使用模运算符检索绿色也没有意义，因为 X % 256 = X 对于 X < 256 的所有 X。此外，256^2等于 65536。
*   它使用可以表示颜色值的实际范围（0-255、256 个值）。

您实际上可以使用该函数的简化版本：

```
Private Function LongToRGB(lColor As Long) As String
    Dim iRed As Long, iGreen As Long, iBlue As Long

    iRed = lColor Mod 256
    iGreen = (lColor / 256) Mod 256
    iBlue = lColor / 65536

    LongToRGB = Format$(iRed, "000") & ", " & Format$(iGreen, "000") & ", " & Format$(iBlue, "000")
End Function 
```

请注意，最后一种方法只是一个字符串格式化函数，与数学无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T17:23:02.363

Mod是模运算，通常也称为模运算`%`。

它取两个值之间的整数除法的余数。在您的情况下，从包含所有组件的 long 中获取组件颜色（红色、绿色、蓝色）的有意义部分很有用。

例如：

```
1234 Mod 100 = 34 
```

# c# - 如何在 Metro 应用程序中使用 xml Web 服务？

> ID：10093375
> 
> 赞同：-1
> 
> 时间：2012-04-10T17:20:21.763
> 
> 标签：c#, xml, web-services, microsoft-metro, visual-studio-2012

如何在 Metro 应用程序中使用 XML Web 服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:50:44.353

首先阅读新的[HttpClient](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient%28v=vs.110%29.aspx)类和演示它的 Microsoft[示例。](http://code.msdn.microsoft.com/Introduction-to-HttpClient-4a2d9cee)

然后查看作为[Cocoon 框架](http://cocoon.codeplex.com/)示例的一部分的 Metro Flickr 示例应用程序，该示例连接到 Flickr 的 Web API 并通过 XML 显示结果（并说明了在 Metro 应用程序内的大型数据集上出色的数据虚拟化和占位符使用）。

# javascript - 重定向到另一个页面并更改这些页面的 div 内容

> ID：10093377
> 
> 赞同：1
> 
> 时间：2012-04-10T17:20:28.413
> 
> 标签：javascript, jquery, html

当用户注册成功时，注册表单的动作属性将他重定向到 login.html。我想更改一个 div 文本以通知他他的注册成功。**我不明白重定向后如何更改 div 文本。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T17:23:10.817

除非您为此目的在该页面上有脚本，否则您无法更改另一页面上的文本。

您最好使用服务器端代码来更改消息。例如，使用 php，您将有一个 login.php 页面，该页面带有一个名为 success 的参数，因此`login.php?success=1`如果您的登录成功，您将调用，并且 php 脚本会将消息添加到页面中。

这只是可能如何完成的一个示例，但关键是您不能从当前页面上的脚本更改随后加载的页面上的内容。

**现在**，如果您想使用脚本，您可以使用 jQuery 将`login.html`内容加载到当前页面上下文中，使用`.ajax()`或任何 ajax jQuery 函数`.post()`等`.get()`。然后您可以使用您的脚本来更改内容，因为它将是在您当前的页面中。

# java - 连接字符串和空整数

> ID：10093385
> 
> 赞同：-1
> 
> 时间：2012-04-10T17:21:09.083
> 
> 标签：java

我刚遇到以下情况：连接任意字符串和 NULL 值的 Integer 对象会导致 NullPointerException：

```
Integer nullInt = null;
String someString = "abc";

System.out.println(someString + "=" + nullInt) 
```

现在我希望得到类似“abc=null”的结果，而不是 Java 在连接之前尝试拆箱 Integer 对象。为什么呢？

谢谢你的帮助！

**更新**

所以这是原始代码，我在上面的示例中对其进行了分解：

```
public class SomeClass {

   private String id;
   private String description;
   private Integer someInteger;
   private Date someDate;
   private Date someOtherInteger;

   // ...

   public String toString(){
       return "object [id=" + id
               + ", description=" + description
               + ", someInteger=" + someInteger
               + ", someDate=" + someDate
               + ", someOtherInteger=" + someOtherInteger;
   }

   // ...
} 
```

"id" 有一个值 "description" 为空 "someInteger" 有一个值 "someDate" 为空 "someOtherInteger" 为空

罪魁祸首是“someOtherInteger”，我可以在 Eclipse 调试器中检查表达式“, someOtherInteger” + someOtherInteger 重现错误。确切的异常消息是：“java.lang.NullPointerException at intValue()”

有任何想法吗？

**更新**

这就是实际的代码，“lastMileage”是 NULL ......

```
@Override
public String toString(){
    return "OwnedCar [vin=" + vin
            + ", description=" + description
            + ", manufactureYear=" + manufactureYear
            + ", purchasedDate=" + purchasedDate
            + ", lastMileage=" + lastMileage
            + ", lastMileageDate=" + lastMileageDate
            + ", milesPerDay=" + milesPerDay
            + ", licencePlateNumber=" + licencePlateNumber
            + ", relationship=" + relationship
            + ", lifeCycleStage=" + lifeCycleStage   
            + ", lastKnownDeliveryStatus=" + lastKnownDeliveryStatus
            + ", lastKnownDeliveryStatusChangeDate=" + lastKnownDeliveryStatusChangeDate
            + ", lastDeliveryStatusCheckDate=" + lastDeliveryStatusCheckDate
            + ", orderCanceledCode=" + orderCanceledCode
            + ", deactivatedIndicator=" + deactivatedIndicator
            + ", deactivationReason=" + deactivationReason
            + ", modelCode=" + modelCode
            + ", model=" + model  
            + ", carAge=" + carAge                
            + ", vinVerifiedDate=" + vinVerifiedDate
            + ", commissionNumber=" + commissionNumber
            + ", commissionNumberYear=" + commissionNumberYear
            + ", ownershipActivationCode=" + ownershipActivationCode
            + ", bid=" + bid
            + ", orderNumber=" + orderNumber
            + ", largePhotoUrl=" + largePhotoUrl
            + ", mediumPhotoUrl=" + mediumPhotoUrl
            + ", smallPhotoUrl=" + smallPhotoUrl
            + ", colourSalesFamily =( "+ colourSalesFamily != null ? colourSalesFamily.toString() : null + ")"
            + "]";
} 
```

这是堆栈跟踪：

```
java.lang.NullPointerException
    at ************.OwnedCar.toString(OwnedCar.java:671)
    at java.lang.String.valueOf(String.java:2826)
    at java.lang.StringBuilder.append(StringBuilder.java:115)
    at com.vw.dbs.******.***SessionAttributeListener.attributeReplaced(***SessionAttributeListener.java:46)
    at org.apache.catalina.session.StandardSession.setAttribute(StandardSession.java:1386)
    at org.apache.catalina.session.StandardSession.setAttribute(StandardSession.java:1291)
    at org.apache.catalina.session.StandardSessionFacade.setAttribute(StandardSessionFacade.java:130)
    at com.liferay.util.servlet.SharedSessionWrapper.setAttribute(SharedSessionWrapper.java:145)
    at com.liferay.portlet.PortletSessionImpl.setAttribute(PortletSessionImpl.java:273)
    at com.liferay.portlet.PortletSessionImpl.setAttribute(PortletSessionImpl.java:260)
    at org.springframework.web.portlet.context.PortletRequestAttributes.setAttribute(PortletRequestAttributes.java:156)
    at org.springframework.web.bind.support.DefaultSessionAttributeStore.storeAttribute(DefaultSessionAttributeStore.java:54)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.updateModelAttributes(HandlerMethodInvoker.java:214)
    at org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:363)
    at org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter.doHandle(AnnotationMethodHandlerAdapter.java:347)
    at org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter.handleRender(AnnotationMethodHandlerAdapter.java:289)
    at org.springframework.web.portlet.DispatcherPortlet.doRenderService(DispatcherPortlet.java:734)
    at org.springframework.web.portlet.FrameworkPortlet.processRequest(FrameworkPortlet.java:522)
    at org.springframework.web.portlet.FrameworkPortlet.doDispatch(FrameworkPortlet.java:470)
    at javax.portlet.GenericPortlet.render(GenericPortlet.java:233)
    at com.liferay.portlet.FilterChainImpl.doFilter(FilterChainImpl.java:101)
    at com.liferay.portal.kernel.portlet.PortletFilterUtil.doFilter(PortletFilterUtil.java:64)
    at com.liferay.portal.kernel.servlet.PortletServlet.service(PortletServlet.java:92)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
    at com.liferay.portlet.InvokerPortletImpl.invoke(InvokerPortletImpl.java:638)
    at com.liferay.portlet.InvokerPortletImpl.invokeRender(InvokerPortletImpl.java:723)
    at com.liferay.portlet.InvokerPortletImpl.render(InvokerPortletImpl.java:425)
    at org.apache.jsp.html.portal.render_005fportlet_jsp._jspService(render_005fportlet_jsp.java:1440)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
    at com.liferay.portal.util.PortalImpl.renderPortlet(PortalImpl.java:3715)
    at com.liferay.portal.util.PortalUtil.renderPortlet(PortalUtil.java:1180)
    at com.liferay.portlet.layoutconfiguration.util.RuntimePortletUtil.processPortlet(RuntimePortletUtil.java:160)
    at com.liferay.portlet.layoutconfiguration.util.RuntimePortletUtil.processPortlet(RuntimePortletUtil.java:94)
    at com.liferay.portlet.layoutconfiguration.util.RuntimePortletUtil.processTemplate(RuntimePortletUtil.java:256)
    at com.liferay.portlet.layoutconfiguration.util.RuntimePortletUtil.processTemplate(RuntimePortletUtil.java:181)
    at org.apache.jsp.html.portal.layout.view.portlet_jsp._jspService(portlet_jsp.java:821)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
    at com.liferay.portal.action.LayoutAction.includeLayoutContent(LayoutAction.java:361)
    at com.liferay.portal.action.LayoutAction.processLayout(LayoutAction.java:618)
    at com.liferay.portal.action.LayoutAction.execute(LayoutAction.java:229)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:431)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236)
    at com.liferay.portal.struts.PortalRequestProcessor.process(PortalRequestProcessor.java:152)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
    at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at com.liferay.portal.servlet.MainServlet.callParentService(MainServlet.java:518)
    at com.liferay.portal.servlet.MainServlet.service(MainServlet.java:495)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:126)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:126)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.servlet.filters.strip.StripFilter.processFilter(StripFilter.java:309)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:123)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.servlet.filters.themepreview.ThemePreviewFilter.processFilter(ThemePreviewFilter.java:88)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:123)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.servlet.filters.gzip.GZipFilter.processFilter(GZipFilter.java:137)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:123)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.servlet.filters.secure.SecureFilter.processFilter(SecureFilter.java:182)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:123)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.servlet.filters.autologin.AutoLoginFilter.processFilter(AutoLoginFilter.java:254)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:123)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
    at com.liferay.portal.servlet.FriendlyURLServlet.service(FriendlyURLServlet.java:133)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:126)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:126)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.servlet.filters.strip.StripFilter.processFilter(StripFilter.java:261)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:123)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.servlet.filters.themepreview.ThemePreviewFilter.processFilter(ThemePreviewFilter.java:88)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:123)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.servlet.filters.gzip.GZipFilter.processFilter(GZipFilter.java:126)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:123)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.servlet.filters.secure.SecureFilter.processFilter(SecureFilter.java:182)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:123)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.servlet.filters.i18n.I18nFilter.processFilter(I18nFilter.java:211)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:123)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:126)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:126)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:126)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.servlet.filters.autologin.AutoLoginFilter.processFilter(AutoLoginFilter.java:254)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:123)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
    at com.liferay.portal.servlet.I18nServlet.service(I18nServlet.java:101)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
    at com.liferay.portal.servlet.filters.virtualhost.VirtualHostFilter.processFilter(VirtualHostFilter.java:310)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:123)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:126)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:126)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:738)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:196)
    at com.liferay.portal.servlet.filters.threadlocal.ThreadLocalFilter.processFilter(ThreadLocalFilter.java:35)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:123)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:470)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:555)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:774)
    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:703)
    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:896)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T17:23:37.477

*并非*如此：

```
public static void main(String[] args) {
    Integer nullInt = null;
    String someString = "abc";

    System.out.println(someString + "=" + nullInt);
} 
```

输出：

```
abc=null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:23:36.737

我跑你的台词，它写着我`abc=null`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T19:04:29.817

[JLS 15.18.1.1](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.18.1.1)（字符串与`+`操作数连接）：

> 如果引用为 null，则将其转换为字符串“null”（四个 ASCII 字符 n、u、l、l）。否则，转换就像调用被引用对象的 toString 方法一样执行，不带参数；但如果调用 toString 方法的结果为 null，则使用字符串“null”代替

所以下面的代码

```
String a = "abc=" + anInteger; 
```

从不抛出异常（`abc=null`虽然它可能会写）但是如果你对它执行一些算术：

```
String a = "abc=" + (anInteger + 1) 
```

`anInteger`如果`null`在拆箱时，它显然会在 rutime 抛出 NPE 。也许你没有发布你的整个代码

* * *

## 更新

OP更新了他的答案，原因需要进一步解释

```
public class Main {

    public static void main(String[] args) {
        Integer i = null;
        System.out.println("throw a NPE " + i != null ? i.toString() : null);
    }
} 
```

三元运算符周围没有括号，因此表达式被计算为

```
System.out.println(("throw a NPE " + i) != null ? i.toString() : null); 
```

首先应用字符串连接，因此“throw a NPE null”不是`null`并且`i.toString()`被调用，抛出 NPE

# c# - 从 C# 将双精度值保存到 Access 数据库

> ID：10093386
> 
> 赞同：0
> 
> 时间：2012-04-10T17:21:10.053
> 
> 标签：c#, database, ms-access, double

所以我正在创建一个简单的数据库阅读器，它只应该从访问数据库中获取值到 DataGridView 中。如果您知道我的意思，我将它们与内置帮助连接起来以获取数据源。一切都很好，但是当我写下“值”列时，假设 1172,44 它将在访问时将其保存为 117244，因此，当我在应用程序上打开它时，值是 117244，因为它是保存的值。

在 access 和 c# 数据集中，fieldsize 属性都设置为 double。我试过十进制，但它只是给我一个错误，我无法找出导致它的原因。在我看来，它不是将“，”读作逗号，而是读作“。” 这很可能使它成为千位分隔符，然后将其删除，从而导致没有逗号的数字。任何人都知道我该如何解决它？我可以在这里获得您需要的任何代码，您只需询问即可。

谢谢，布鲁诺宪章。(=

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:27:45.247

您可以尝试将存储在 DataSet 中的双精度值设置为与区域性无关（不变）并控制组和小数分隔符的表示。一种方法是使用`CultureInfo`格式提供程序解析输入。下面的代码说明了转换`"1172,44"`为`1172.44d`

```
var culture = (CultureInfo) CultureInfo.InvariantCulture.Clone();
culture.NumberFormat.NumberDecimalSeparator = ",";
culture.NumberFormat.NumberGroupSeparator = "."; 
var a = double.Parse("1172,44", culture);

Console.WriteLine(a); //outputs 1172.44 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:39:57.670

您关于逗号被解释为组分隔符的猜想可能是正确的。您可能需要仔细检查进程的 CurrentCulture 和 CurrentUICulture，可能还需要检查计算机的区域设置，以及 Access 数据库的格式属性（如果已设置）。

我怀疑您应该阅读[How to: Customize Data Formatting in the Windows Forms DataGridView Control](http://msdn.microsoft.com/en-us/library/hezscd0d.aspx)。该系统有些复杂，但如果您无法使用适当的文化设置，它应该可以让您灵活地将特定格式强加到您的 UI 上。

# linq-to-sql - 自定义 DataContext 基类型上的 INotifyPropertyChanged 不会触发

> ID：10093400
> 
> 赞同：0
> 
> 时间：2012-04-10T17:21:53.907
> 
> 标签：linq-to-sql, mocking, datacontext, inotifypropertychanged

我有一个自定义基类型，称为`MyEntityBase`自动生成的类中类型的超`DataContext`类，`MyContext`. 在尝试创建模拟数据上下文时，我决定实现`INotifyPropertyChanged`on`MyEntityBase`以便我可以一般地跟踪更改。

这是我的班级的样子：

```
public abstract class MyEntityBase : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
} 
```

基于这个类，我创建了一个通用`Repository<T>`类，用于存储特定类型实体的实例。此类背后的基本思想是提供类似于数据上下文的方法，但由内存中的列表支持。我还想模拟跟踪更改，因为更改集对于我们的应用程序的业务逻辑很重要，以便与第 3 方系统同步。

这是一个基本的shell实现`Repository<T>`：

```
public class Repository<T>
    where T : MyEntityBase, INotifyPropertyChanged
{
    protected List<T> _data;
    public Repository(List<T> data)
    {
        this._data = data;
        foreach (var entity in this._data)
        {
            entity.PropertyChanged += new PropertyChangedEventHandler(entity_PropertyChanged);
        }
    }

    protected void entity_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        Console.WriteLine("HERE");
    }
} 
```

现在我创建一个简单的 type 存储库`Employee`，填充一些数据，并尝试修改数据的属性。我希望该`PropertyChanged`事件被引发，因为该`Employee`对象具有来自自动生成的内置属性更改通知`DataContext`。但是，当我运行以下代码时，`HERE`在任何地方的输出中都看不到生成：

```
var data = new List<Employee> {
    new Employee { FirstName = "Bob" },
    new Employee { FirstName = "Joe" },
};

var repo = new Repository<Employee>(data);

// This should fire the PropertyChanged event
data[0].FirstName = "John"; 
```

我究竟做错了什么？

* * *

**更新**：如果我将订阅事件的行更改为以下内容：

```
(entity as Employee).PropertyChanged += ... 
```

然后它工作正常。但是，`T`已经知道是`Employee`并且`entity`是 type 的一个实例`Employee`，那么有什么区别呢？即使我做到了，`event`它仍然无法正常工作。`MyEntityBase``virtual`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:17:58.217

我已经实施了一个可行的解决方案，所以我会回答我自己的问题。由于我已经有一个命令行工具`FindAndReplaceText.exe`用于对自动生成的`MyDataContext.dbml`文件进行一些自定义，因此我只是在最后添加了另一个调用，在该调用中我将生成的类中的所有事件修改`MyDataContext`为包含`override`. 再加上`virtual`在事件定义中使用我的基类，这解决了问题：

```
FindAndReplaceText.exe -c ^
    MyDataContext.cs ^
    "public event" ^
    "public override event" 
```

现在属性更改在我的测试代码中正确通知。

# html - CSS 右内边距

> ID：10093401
> 
> 赞同：0
> 
> 时间：2012-04-10T17:21:55.560
> 
> 标签：html, css, padding

我试图弄清楚，如何仅在一个导航链接上禁用 padding-right。

```
#nav ul li {
display: inline;
padding-right: 15px;
} 
```

该代码在导航文本的右侧放置了 15px 的填充，但是最后一个导航链接，我希望没有填充，因为它与我的居中文本不均匀。

我尝试过这样的事情：

```
.nopad {
padding: 0;
} 
```

然后将其添加到我的链接中：

```
<li class="nopad"><a href="#">Home</a></li> 
```

它似乎不起作用。

帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:25:14.217

将其更改为填充：`#nav ul li.nopad { padding: 0!important; }`
这将覆盖任何继承的 CSS 填充

否则您可以更改`padding:0;`为`padding:0 !important;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:23:36.753

添加这个

```
#nav ul li.nopad { padding: 0; } 
```

其他属性覆盖它。

如果您想了解更多关于 CSS 特异性的信息，请阅读：[http ://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

# .net - Silverlight 的 Firefox 插件在调试时经常崩溃

> ID：10093402
> 
> 赞同：1
> 
> 时间：2012-04-10T17:21:57.357
> 
> 标签：.net, silverlight, silverlight-4.0

当我尝试通过附加插件进程来调试silverlight应用程序时......然后silverlight应用程序经常崩溃......请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:51:59.323

尝试阅读此答案

[您如何使用 Chrome 调试 Silverlight 应用程序并命中断点？](https://stackoverflow.com/questions/3064647/how-do-you-debug-silverlight-applications-with-chrome-and-hit-breakpoints)

和这个页面： http: [//www.codeproject.com/Articles/304582/Silverlight-debugging-Beginners-Guide](http://www.codeproject.com/Articles/304582/Silverlight-debugging-Beginners-Guide)

这可以帮助您找出问题所在。

# facebook - Facebook 评论：隐藏所有评论

> ID：10093404
> 
> 赞同：0
> 
> 时间：2012-04-10T17:21:58.877
> 
> 标签：facebook, facebook-comments

使用 Facebook 评论插件，并且有一个名为 data-num-posts 的设置，它必须至少为 1。但是，目前没有不显示任何评论的方法。这个想法是允许用户使用评论框进行评论。然后将通过 Graph API 检索评论。

这目前可以通过任何设置实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:32:39.757

不，抱歉，Facebook 评论插件目前不提供此功能。

# c# - 用户代码未处理 InvalidCastException

> ID：10093419
> 
> 赞同：1
> 
> 时间：2012-04-10T17:22:48.760
> 
> 标签：c#

当我尝试这个

```
protected void Grid_ViewSorting(Object sender, GridViewSortEventArgs e)
{
        DataGrid myGrid = (DataGrid) sender;
        DataTable datatable =(DataTable) myGrid.DataSource;        
       DataView dataView = datatable.DefaultView;

       if(e.SortDirection.ToString() == "ASC")
       {
                   dataView.Sort = e.SortExpression + "DESC";
        } else
        {
            dataView.Sort = e.SortExpression + "ASC";
       }
 } 
```

我收到错误消息 invalidCastException Was Unhandled By userCode 无法将类型为“System.Web.UI.WebControls.GridView”的对象转换为类型“System.Web.UI.Web.Contro.DataGrid”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T17:24:32.033

问题正是异常所说的

```
DataGrid myGrid = (DataGrid) sender; 
```

在`sender`这种情况下是类型`GridView`，但您试图将其转换为`DataGrid`. 这是非法的，因此 CLR 会引发异常。您需要考虑`sender`属于该类型`GridView`并相应地处理它。

```
GridView myGrid = (GridView) sender; 
```

# html - HTML 复选框对齐

> ID：10093421
> 
> 赞同：0
> 
> 时间：2012-04-10T17:22:56.730
> 
> 标签：html, checkbox, alignment

测试页网址：[http ://www.guygar.com/inception/ultra/indexCopy.html](http://www.guygar.com/inception/ultra/indexCopy.html)

我是新手并且正在搜索所以我找到了以下文本和复选框之间对齐的解决方案：

```
<div style="border-bottom:1px solid black; padding:4px; background-color:#003b5a;">
     <span style="font-weight:bold;">Back to the Roots</span>
     <form>
     <input type="checkbox" value="header" style="float:right; vertical-align: middle; margin-top: -15px;" />
      <label></label>
      </form>
</div> 
```

虽然这适用于 IE9，但它不适用于 Chrome 或 Firefox。

你能帮我解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:25:47.417

制作你的 div`position:relative;`然后你就可以输入`position:absolute;top:5px; right:0;`

# java - Java：如何在 ScrollPane 视口上绘制非滚动覆盖？

> ID：10093425
> 
> 赞同：8
> 
> 时间：2012-04-10T17:23:07.057
> 
> 标签：java, swing, graphics, overlay, scrollpane

我想使用 ScrollPane 在其视口中显示图像，并在图像上叠加一个网格（或框，或任何其他类型的注册/位置标记）。滚动时我需要覆盖层保持固定（这意味着图像似乎在覆盖层“下方”移动）。我将以固定速率滚动 Viewport 中的 View 以提供平滑的运动，并且叠加层是为了提供对 Viewport 内某个位置的参考。从概念上讲，考虑一个在视口中滚动的大地图，并且视口有一个不会移动的矩形（相对于视口本身），它标记了一个可以根据某些用户操作放大的区域。

我假设（但尚未确认）ScrollPane 实现有效地处理视图的渲染（从后备存储，不必为每个新的部分曝光重新绘制整个视图（甚至是 ViewPort）），因此宁愿不必覆盖paint() 方法。

我看过LayerPane，虽然没有掌握它，但似乎这是一种蛮力方法。ScrollPane 是 SplitPane 的一个组件，将被移动/调整大小。我希望我必须使用绝对定位手动维护 ViewPort 和 LayerPane 之间的正确关系。我远不是 GUI 设计和实现方面的专家，而且我确信我错过了经验丰富的人会知道的从明显到晦涩和优雅的各种可能性。

我愿意接受任何建议，而不仅仅是我开始的道路。我是否应该（我可以）在我的 SplitPane 中添加一个 JPanel 作为一个组件，然后将一个 LayerPane 添加到包含我的 ScrollPane 和 LayerPane 上不同图层上的覆盖（另一个​​ JPanel）的组件中？ScrollPane 中是否有直接支持此功能的功能？我查看了 Java Swing 教程和 API 文档，但还没有看到任何内容。

谢谢。

**更新：**

感谢您的链接，垃圾神。这比我预期的要容易得多。不需要 LayerPane、GlassPane、基于异或的合成......我不知道为什么我没有尝试覆盖 JViewport.paint() 来绘制我的叠加层 - 但使用下面的代码我验证了这个概念将给我我正在寻找的东西。只需使用 JViewport 的子类，它就会执行我想要的操作（在这种情况下，当图像在下方滚动时，它会在视口中心覆盖一个矩形）。我不是 GUI 专家，Java API 非常广泛。我不知道你们是怎么把这一切都记在脑子里的——但是谢谢！

```
class MyViewport extends JViewport {
    @Override
    public void paint(Graphics g) {
        super.paint(g);
        Graphics2D g2 = (Graphics2D)g;
        g2.setPaint(Color.BLACK);
        g2.drawRect(getWidth()/4,getHeight()/4,getWidth()/2,getHeight()/2);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T22:46:54.327

通常，“Swing 程序应该覆盖`paintComponent()`而不是覆盖`paint()`”，如[*在 AWT 中绘制和 Swing：绘制方法*](https://www.oracle.com/java/technologies/painting.html#callbacks)中所述。基于在滚动内容*下方*[`ScrollPanePaint`](https://stackoverflow.com/a/3518047/230513)绘制的 ，以下示例覆盖以在滚动内容*上方*绘制。*`paint()`*

 **![ScrollPanePaint](../Images/1af61d342d507a58d88b69f433a712be.png)

```
import java.awt.*;
import javax.swing.*;

/**
 * @see https://stackoverflow.com/a/10097538/230513
 * @see https://stackoverflow.com/a/2846497/230513
 * @see https://stackoverflow.com/a/3518047/230513
 */
public class ScrollPanePaint extends JFrame {

    private static final int TILE = 64;

    public ScrollPanePaint() {
        JViewport viewport = new MyViewport();
        viewport.setView(new MyPanel());
        JScrollPane scrollPane = new JScrollPane();
        scrollPane.setViewport(viewport);
        this.add(scrollPane);
        this.setDefaultCloseOperation(DISPOSE_ON_CLOSE);
        this.pack();
        this.setLocationRelativeTo(null);
        this.setVisible(true);
    }

    private static class MyViewport extends JViewport {

        public MyViewport() {
            this.setOpaque(false);
            this.setPreferredSize(new Dimension(6 * TILE, 6 * TILE));
        }

        @Override
        public void paint(Graphics g) {
            super.paint(g);
            g.setColor(Color.blue);
            g.fillRect(TILE, TILE, 3 * TILE, 3 * TILE);
        }
    }

    private static class MyPanel extends JPanel {

        public MyPanel() {
            this.setOpaque(false);
            this.setPreferredSize(new Dimension(9 * TILE, 9 * TILE));
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.setColor(Color.lightGray);
            int w = this.getWidth() / TILE + 1;
            int h = this.getHeight() / TILE + 1;
            for (int row = 0; row < h; row++) {
                for (int col = 0; col < w; col++) {
                    if ((row + col) % 2 == 0) {
                        g.fillRect(col * TILE, row * TILE, TILE, TILE);
                    }
                }
            }
        }
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new ScrollPanePaint();
            }
        });
    }
} 
```

**注意：**将不透明组件（例如[JTable](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html)）设置为滚动窗格的视图会产生奇怪的视觉错误，例如在滚动时移动固定的蓝色框。在视图组件上使用`setOpaque(false)`来解决这个问题。**

# curl - curl FTP 访问被拒绝

> ID：10093432
> 
> 赞同：6
> 
> 时间：2012-04-10T17:23:29.863
> 
> 标签：curl, libcurl

我正在使用 curl php API 来访问 FTP 链接。在特定站点上，它给出错误代码 9（拒绝访问）。但是，可以从 IE 和 Firefox 访问该链接。

然后我运行 curl 命令行，它给出了相同的“拒绝访问”结果。

```
> d:>\curl -v ftp://ftp1.example.com/outgoing/EHF/dbex10win_en.zip
> * About to connect() to ftp1.example.com port 21 (#0)
> *   Trying 204.50.113.145...
> * connected
> * Connected to ftp1.example.com (204.50.113.145) port 21 (#0) < 220 Microsoft FTP Service
> > USER anonymous < 331 Anonymous access allowed, send identity (e-mail name) as password.
> > PASS ftp@example.com < 230-Welcome to Example FTP site! < 230 Anonymous user logged in.
> > PWD < 257 "/" is current directory.
> * Entry path is '/'
> > CWD outgoing < 550 outgoing: Access is denied.
> * Server denied you to change to the given directory
> * Connection #0 to host ftp1.example.com left intact curl: (9) Server denied you to change to the given directory
> > QUIT < 221
> * Closing connection #0 
```

但该链接在 Firefox 中运行良好。cUrl 这里有什么问题？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T22:45:33.500

尝试摆弄 curl 的选项 --ftp-method

> ```
>  --ftp-method [method]
>           (FTP) Control what method curl should use to reach a file on  a
>           FTP(S) server. The method argument should be one of the follow‐
>           ing alternatives:
> 
>           multicwd
>                  curl does a single CWD operation for each path  part  in
>                  the given URL. For deep hierarchies this means very many
>                  commands. This is how RFC 1738 says it should  be  done.
>                  This is the default but the slowest behavior.
> 
>           nocwd  curl  does  no CWD at all. curl will do SIZE, RETR, STOR
>                  etc and give a full path to the  server  for  all  these
>                  commands. This is the fastest behavior.
> 
>           singlecwd
>                  curl  does  one  CWD  with the full target directory and
>                  then operates on the file "normally" (like in the multi‐
>                  cwd  case).  This  is  somewhat more standards compliant
>                  than 'nocwd' but without the full penalty of 'multicwd'. 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T23:02:01.970

它与错误无关`CURL` 非常明确`Server denied you to change to the given directory`......它只是一个访问问题......

添加`username`并`password`简单地解决问题...

为什么它可以在浏览器上运行......没有自动目录重定向..为什么它不能在 curl 上运行？？？curl 将使用标准 `ftp`过程，该过程将在您更改到相关目录之前涉及登录

您可以通过 php 直接使用它....`fopen`或者`file_get_content`是我使用的作弊器...就像您通过浏览器访问它一样工作

例子

```
 set_time_limit(0);
 file_put_contents("out.zip", file_get_contents('ftp://204.50.113.145/outgoing/EHF/dbex10win_en.zip')); 
```

像魅力一样工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-11T15:31:49.847

That means the specified directory does not exist in the remote/ftp server, hence the message "Server denied you to change to the given directory".

That message has got nothing to do with the local machine you are trying to download files into.

Login to `ftp datacenter.myserver.com` and see if the source directory exists.

# html - 如何控制 SELECT 下拉菜单的宽度？

> ID：10093433
> 
> 赞同：0
> 
> 时间：2012-04-10T17:23:30.690
> 
> 标签：html, css, html-select

我在一个页面下有几个下拉菜单，并希望它们都具有相同的宽度（为简单起见，假设下拉菜单 1 的所有值都是 1 个字符，下拉菜单 2 的所有值都是 10 个字符，但你没有打印下拉菜单时提前知道“10” 1)。

有没有办法将下拉宽度设置为一些预先确定的最大宽度（以像素为单位）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T17:24:19.437

```
select { width:200px } 
```

（此文本受 30 个字符的限制。）

# database - 使用查询模板 OpenSearchServer 获取准确的单词

> ID：10093438
> 
> 赞同：0
> 
> 时间：2012-04-10T17:23:38.880
> 
> 标签：database, search-engine

我正在使用 OpenSearchServer（社区版）v1.2.4-rc3 - stable - rev 1474 - build 802 on windows server 2008 r2。我需要一个返回确切单词的查询模板。例如，当有人搜索“PHP”时，它会返回所有以“PHP”开头的句子，但单词之间不匹配。我有这个查询模板**表达式：($$)**。当我搜索 PHP 它返回

```
PHP
PHP Free
What is PHP 
```

请注意，第 3 行末尾有单词“PHP”。但我希望该查询返回仅在行首具有我所需单词的查询。请为此建议我一个查询模板

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:54:12.133

您必须更改分析器使用的标记器。字段“表达式”与分析器相关。这是过程：

*   在“Schema/Field”选项卡面板中获取分析器的名称。
*   在“Schema/Analyzer”选项卡面板中，编辑分析器。
*   将 Tokenize 从“StandardTokenizer”更改为“KeywordTokenizer”。
*   重新索引您的数据

它现在应该可以工作了。

# c# - 加载页面并执行异步方法

> ID：10093441
> 
> 赞同：0
> 
> 时间：2012-04-10T17:23:42.330
> 
> 标签：c#, asp.net, asynchronous

我必须加载该页面中存在文本的页面，通知用户您的请求正在加载。但是在代码后面并行需要执行一个异步方法，当这个方法结束时，我的页面必须重定向到其他页面。

有人帮我解决这个问题吗？

此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:25:49.850

按照[这个](http://code.msdn.microsoft.com/CSASPNETBackgroundWorker-dda8d7b6)微软示例在 ASP.NET 中创建后台工作线程。

> 有时我们会做一个需要很长时间才能完成的操作。它将停止响应并且页面是空白的，直到操作完成。在这种情况下，我们希望操作在后台运行，并且在页面中，我们希望显示运行操作的进度。因此，用户可以知道操作正在运行并且可以知道进度。
> 
> 另一方面，我们想安排一些操作（发送电子邮件/报告等）。我们希望操作可以在特定时间运行。
> 
> 该项目创建了一个名为“BackgroundWorker”的类来实现这些目标。它会创建一个名为“Default.aspx”的页面来运行长时间操作。当应用程序启动时，它会创建一个后台工作人员来执行计划，然后它使用“GlobalBackgroundWorker.aspx”页面来检查进度。

# xamarin.ios - MonoTouch DialogViewController 在被触摸之前是空的

> ID：10093442
> 
> 赞同：1
> 
> 时间：2012-04-10T17:23:46.807
> 
> 标签：xamarin.ios, monotouch.dialog

我有一个运行良好的`TabBarController`应用程序，`DialogViewController`除了在初始加载时表格为空，直到我触摸它或导航到另一个选项卡并返回（[http://cl.ly/3I0r1v2b420t0L1X1h2w](http://cl.ly/3I0r1v2b420t0L1X1h2w)）。

我已确认`Root`已设置。我试过发出一个`ReloadData()`之后。我也试过`TableView.Source`直接设置。在任何情况下，`TableView`直到发生另一个动作，它才会显示任何内容。

这发生在模拟器和 iPhone 上。

知道为什么会这样吗？

```
public partial class PapersView : DialogViewController
{
    public PapersView () : base (UITableViewStyle.Plain, null, true)
    {
        EnableSearch = true; 
        AutoHideSearch = true;
        SearchPlaceholder = @"Find Papers";
    }

    public override void ViewDidLoad ()
    {
        base.ViewDidLoad ();

        MonoTouch.UIKit.UIApplication.SharedApplication.NetworkActivityIndicatorVisible = true;
        var svc = new PaperService ();
        svc.GetPapers (onPapersReceived, onErrorReceived);
    }

    private void onErrorReceived (string error)
    {
        MonoTouch.UIKit.UIApplication.SharedApplication.NetworkActivityIndicatorVisible = false;
    }

    private void onPapersReceived (List<PaperNode> papers)
    {
        MonoTouch.UIKit.UIApplication.SharedApplication.NetworkActivityIndicatorVisible = false;

        Root = new RootElement ("Papers") {
                from node in papers
                    group node by (node.paper.title [0].ToString ().ToUpper ()) into alpha
                    orderby alpha.Key
                select new Section (alpha.Key){
                    from eachNode in alpha
                    select (Element)new WhitePaperBible.iOS.UI.CustomElements.PaperElement (eachNode)
        }};

        TableView.ScrollToRow (NSIndexPath.FromRowSection (0, 0), UITableViewScrollPosition.Top, false);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T01:40:15.527

Curtis Bailey 指出我在 MonoTouch 邮件列表上查看 InvokeOnMainThread。这解决了这个问题，因为异步服务调用在后台线程上，回调也是如此。

```
 private void onPapersReceived (List<PaperNode> papers)
    {
        MonoTouch.UIKit.UIApplication.SharedApplication.NetworkActivityIndicatorVisible = false;

        InvokeOnMainThread (delegate {
            Root = new RootElement("Papers") {
                    from node in papers
                        group node by (node.paper.title [0].ToString ().ToUpper ()) into alpha
                        orderby alpha.Key
                    select new Section (alpha.Key){
                        from eachNode in alpha
                        select (Element)new WhitePaperBible.iOS.UI.CustomElements.PaperElement (eachNode)
            }};

            TableView.ScrollToRow (NSIndexPath.FromRowSection (0, 0), UITableViewScrollPosition.Top, false);
        });
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T22:54:56.407

尝试仅填充现有根而不是创建新根。

如果您查看 DialogViewController 的 MonoTouch.Dialog 源代码，您应该会找到 PrepareRoot() 方法。看看它在哪里被调用，它应该开始有意义。

# asp.net - 已超出传入邮件的最大邮件大小配额 >> 设置为 900000

> ID：10093447
> 
> 赞同：0
> 
> 时间：2012-04-10T17:24:01.340
> 
> 标签：asp.net, wcf

我有一个带有 WCF 服务的 ASP.NET MVC3 解决方案。当我从此 WCF 服务获取公司列表（超过 2200 条记录）时，出现错误：**已超出传入消息的最大消息大小配额**。

**原因**在 Web.Config 文件中：maxBufferPoolSize 和 maxReceivedMessageSize 是 65536。我改为 900000，现在我没有任何问题。

**我的问题**：maxBufferPoolSize 和 maxReceivedMessageSize 的值为 900000 (900k) 是否仍然合理？我真的需要我所有的记录来对数据进行分页。

**子问题**：直接在 WCF 服务中“分页”并仅返回所需的数据页是否更有效？这值得吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:14:32.730

900k 消息大小并非不合理。我建议进行一些检查以确保它为您提供扩展空间，例如。当你有 4000 条记录时它仍然适合吗？我已经看到了 2MB 作为限制的其他建议，所以你在这个范围内。

根据您的评论，另一种方法是提供两种方法：

```
GetAllRecords()
returns all

GetSomeRecords(int limit)
returns a subset, plus a count of the total available. 
```

您的客户端应用程序可以根据用户偏好选择要调用的方法。如果用户想要查看页面，请调用 GetAllRecords 并在客户端应用程序中进行分页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:37:54.047

MaxReceivedMessageSize 应保持较小以避免 DoS 攻击。如果你的服务是内网场景，比默认大应该没问题。如果它在公共 Intranet 上，您需要权衡攻击的影响与需要分页的可用性影响。

maxbufferPool 的大小更难回答，因为它取决于您期望的并发请求数。试试这个解释

[http://social.msdn.microsoft.com/Forums/en/wcf/thread/d6e234d3-942f-4e9d-8470-32618d3f3212/](http://social.msdn.microsoft.com/Forums/en/wcf/thread/d6e234d3-942f-4e9d-8470-32618d3f3212/)

# ruby-on-rails - 在 Rails 中，让登录用户为他们编辑部分数据库记录

> ID：10093452
> 
> 赞同：0
> 
> 时间：2012-04-10T17:24:22.187
> 
> 标签：ruby-on-rails, cancan

在 rails（使用 cancan 或其他方式）中，我希望登录用户能够编辑他们的**一些**数据库记录，但不是全部。

数据库看起来像这样：

```
User: name, password, team_id, role_id, notes
Role: name
Team: name 
```

例如，如果`current_user`（登录的那个）有一个角色，`user`那么我希望他们能够做的唯一一件事就是更改他们自己的密码。我不希望他们能够重命名自己或改变他们的团队。我希望管理员能够添加关于他们自己和其他用户的注释，但不能添加关于其他管理员的注释。

我正在使用以下修改后的形式进行身份验证：

1.  [http://railscasts.com/episodes/250-authentication-from-scratch](http://railscasts.com/episodes/250-authentication-from-scratch)
2.  [http://railscasts.com/episodes/192-authorization-with-cancan](http://railscasts.com/episodes/192-authorization-with-cancan)

* * *

我正在考虑在以下内容中添加类似内容`ability.rb`：

```
can :edit, User, :id => user.id 
```

我的问题如下：

1.  如何限制我希望他们访问的字段？
2.  这应该去哪里，我在控制器而不是模型中思考。（因为我认为处理当前用户权限的东西不应该在模型层中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T22:01:25.473

这是您可以查看的新内容，称为[heimdallr](https://github.com/roundlake/heimdallr/)，它几乎可以满足您的要求。这[是一篇](http://borisstaal.com/post/20302867079/heimdallr-field-level-security-cancan-reinvented)包含一些相关信息的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:48:43.610

> 1 - 如何限制我希望他们访问的字段？

假设你有上述简单的实现，我建议有一个简单的权限机制（因为我觉得 CanCan 也在限制用户编辑 / 等整个记录，而不是部分）

您的用户模型将是

```
class User < ActiveRecord::Base

  def admin?
    role_id == 1
  end

end 
```

并且在显示列时尝试使用辅助方法来锁定文本框，您可能有一个辅助方法，例如

```
module UsersHelper
  def edit_name?
    current_user.admin?
  end
end 
```

在你看来

```
f.text_field :name, :readonly => edit_name? 
```

代码并不完美，但我想你明白了！

> 2）用户类型选择（如果使用的是admin等）应该去模型，因为它属于域登录

但是显示/隐藏或活动/非活动 html 元素属于表示层，最好使用辅助方法。

# php - 测试输入数据的语言

> ID：10093458
> 
> 赞同：1
> 
> 时间：2012-04-10T17:24:49.940
> 
> 标签：php, language-detection

> **可能重复：**
> [从 PHP 中的字符串中检测语言](https://stackoverflow.com/questions/1441562/detect-language-from-string-in-php)

我想对输入数据的语言进行测试。例如：如果用户以另一种语言（中文、日语、阿拉伯语……）发送数据，则会出现一条错误消息，要求他以英语输入此数据。

# html - 如何在 CSS 中定位这个 HTML？

> ID：10093459
> 
> 赞同：0
> 
> 时间：2012-04-10T17:25:02.587
> 
> 标签：html, css

我正在尝试设置香草论坛的样式，但我似乎无法弄清楚选择这个类`<li class="Item Announcement"></li>`以便我可以设置它的样式。

我不知道为什么这么难。为什么这行不通？

```
.Item Announcement {
background-color: #FFF;
{ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T17:25:59.583

尝试：

```
li.Item.Announcement {
    background-color: #FFF;
} 
```

该列表项应用了两个类（Item 和 Announcement）。因此，要使用 CSS 来定位它，您需要在每个类前面加上一个句点，然后删除空格。在 CSS 选择器中保留空格会将其应用于具有该类的后代元素。

快速**[jsFiddle 示例](http://jsfiddle.net/j08691/vxmdQ/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:27:20.010

问题是，有了空格，它不再是一个选择器而是两个，所以你需要使用多类选择器来选择。

```
.Item.Announcement {
    background-color: #FFF;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T17:28:39.100

我认为您的问题是您的班级名称中有一个空格。您可能希望它是一个单一的类名 - 所以将其更改为`class="ItemAnnouncement"`and`.ItemAnnouncement { ...` 一切都会奏效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T17:30:40.443

请记住，这`<li class="Item Announcement"></li>`实际上是两个类。类的名称中不能有空格。您可以使用 li、.Item、.Announcement 或三者的组合来选择此元素。

为确保您选择的是准确的元素，您的代码应如下所示：

```
li.Item.Announcement {
    background-color: #fff;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T17:28:54.790

您在类名中的空格在 html 元素中添加了两个不同的类`.Item`& `.Announcement`。您应该考虑将您的课程命名为 itemAnnouncement，或者如果您不是骆驼案的粉丝，请命名为 item-announcement。

另一方面，如果您打算拥有不同的课程，您可以设计最适合您的课程，即

```
.Item {background-color:#fff;} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T17:30:29.240

类名和 id 中的空格是不允许的，所以如果你放一个空格，你实际上是在为那个项目写 2 个类名。

# android - Android相机卡住 - 无法捕捉到图片

> ID：10093462
> 
> 赞同：2
> 
> 时间：2012-04-10T17:25:05.883
> 
> 标签：android, android-intent

我正在尝试在 adroid 上使用 CAMERA 意图来拍照并将其显示在图片视图中。在我拍照之前，下面的代码可以正常工作。然后我无法使用“V”按钮确认并返回我的活动。如果我单击“X”按钮，android 将返回我的活动，但没有照片，但如果我单击“V”确认图片，则没有任何反应，我仍然卡在相机屏幕中。

我正在使用 API 14 并使用 android 4.0.2 在虚拟和物理设备上进行测试。

我的错误在哪里？

```
import java.io.File;
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;

public class HandScryActivity extends Activity {

    private static final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 100;
    private Uri uriSavedImage;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.handscry); 
        // Makes the filename
        File imagesFolder = new File(Environment.getExternalStorageDirectory(), "MyImages");
        imagesFolder.mkdirs();
        File image = new File(imagesFolder, "image_001.jpg");
        uriSavedImage = Uri.fromFile(image);
    }

    // Handles onGame clicked buttons
    public void btnHandClick(View v) {
            Button clickedButton = (Button) v;
        // according to clicked button
        switch (clickedButton.getId()) {
            case R.id.btnBackToGame:
                this.finish();
                break;
            case R.id.btnTakePicture:
                Intent imageIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);               
                imageIntent.putExtra(MediaStore.EXTRA_OUTPUT, uriSavedImage);
                startActivityForResult(imageIntent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
                break;              
            default:
                break;
        }
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        ImageView img = (ImageView) findViewById(R.id.imgHand);
            if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
            // Display image
                if (resultCode == RESULT_OK) {
                    img.setImageURI(uriSavedImage);                                
            } else if (resultCode == RESULT_CANCELED) {
                // User cancelled the image capture
            } else {
                // Image capture failed, advise user
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T10:42:38.130

解决方案在这里，以防其他人在我的错误中绊倒。我从一个网站上得到了那个样本，但这部分似乎卡在了 android 上，并且在成功的情况下无法获得“OnActivityResult”：

```
// Makes the filename
File imagesFolder = new File(Environment.getExternalStorageDirectory(), "MyImages");
imagesFolder.mkdirs();
File image = new File(imagesFolder, "image_001.jpg");
uriSavedImage = Uri.fromFile(image); 
```

应该替换为

```
File image = new File(Environment.getExternalStorageDirectory(), "test.jpg");        
uriSavedImage = Uri.fromFile(image); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-02T11:22:07.057

在我的情况下，问题是由于在启动活动时添加了`android.provider.MediaStore.EXTRA_OUTPUT`使用 4.4.4 版生成的。`FileProvider``ACTION_IMAGE_CAPTURE`

当前活动是这样开始的：

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

Uri photoURI = Build.VERSION.SDK_INT >= Build.VERSION_CODES.N
                    ? FileProvider.getUriForFile(context, context.getPackageName(),photoFile)
                    : Uri.fromFile(photoFile);

// write the captured image to a file
intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, photoURI);

// start it from the activity and not from the dialog so the request code will be the
// one expected and not the one from the dialog
activity.startActivityForResult(intent, CAMERA_REQUEST_CODE); 
```

希望它可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-25T07:44:13.010

我面临着类似的问题。我能够打开相机意图然后捕捉图像，但无法点击一加 6T 上的 OK（勾选）按钮。调试没有帮助。然后我发现这个问题与内存优化有关。我杀死了所有其他后台应用程序并再次尝试并成功了。

有关更多信息，[请参阅此链接](https://stackoverflow.com/a/29267282/5582162)。选项 2 在此链接中对我有用。

复制粘贴链接中的答案：

```
"When returning from the camera intent sometimes the app was being destroyed by the operating system (I'm assuming for memory
reasons). This resulted in sporadic behavior and my state object
would have several null fields upon returning, making my app crash.

Fix: Write state object to file before sending picture, load in my parent activity class which handles onCreate then goes to the subclassed activity." 
```

# iphone - 在 cocos2d 中为图层路径添加动画

> ID：10093470
> 
> 赞同：2
> 
> 时间：2012-04-10T17:25:29.357
> 
> 标签：iphone, ios, cocos2d-iphone, core-animation, cgpath

所以我在 cocos2d 上，但在我使用普通的 ios 应用程序之前，我有这个代码：

```
-(void)viewDidLoad
{
    rootLayer = [[CALayer alloc] init];
    [imageView.layer addSublayer:rootLayer];
    roundPath = CGPathCreateMutable();

    CGPathMoveToPoint(roundPath, nil, center.x , center.y - 35);
    CGPathAddArcToPoint(roundPath, nil, center.x + 35, center.y - 35, center.x + 35, center.y + 35, 35);
    CGPathAddArcToPoint(roundPath, nil, center.x + 35, center.y + 35, center.x - 35, center.y + 35, 35);
    CGPathAddArcToPoint(roundPath, nil, center.x - 35, center.y + 35, center.x - 35, center.y, 35);
    CGPathAddArcToPoint(roundPath, nil, center.x - 35, center.y - 35, center.x, center.y - 35, 35);

    CGPathCloseSubpath(roundPath);

    //Box Path

    boxPath = CGPathCreateMutable();

    CGPathMoveToPoint(boxPath, nil, center.x , center.y - 35);
    CGPathAddArcToPoint(boxPath, nil, center.x + 35, center.y - 35, center.x + 35, center.y + 35, 4.7);
    CGPathAddArcToPoint(boxPath, nil, center.x + 35, center.y + 35, center.x - 35, center.y + 35, 4.7);
    CGPathAddArcToPoint(boxPath, nil, center.x - 35, center.y + 35, center.x - 35, center.y, 4.7);
    CGPathAddArcToPoint(boxPath, nil, center.x - 35, center.y - 35, center.x, center.y - 35, 4.7);

    CGPathCloseSubpath(boxPath);
    shapeLayer = [CAShapeLayer layer];

    shapeLayer.path = boxPath;

    [rootLayer addSublayer:shapeLayer];
}

-(void)startAnimation
{   
    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"path"];

    animation.duration = 2.0;

    animation.repeatCount = HUGE_VALF;

    animation.autoreverses = YES;

    animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];

    animation.fromValue = (id)boxPath;

    animation.toValue = (id)roundPath;

    [shapeLayer addAnimation:animation forKey:@"animatePath"];
} 
```

但是我没有找到在 cocos2d 上做动画的方法`boxpath`，`roundpath`我不知道 CCAction 使用什么。有谁能够帮助我 ？对不起我的英语我是法国人：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:41:18.837

据我所知，Cocos2d 中没有直接接口来使用 Apple CoreAnimation 库中的 CGPaths。

* * *

**EDIT1：**对不起，我误解了你的问题！Cocos2d 没有提供任何工具来动画/变形从由路径定义的一个形状到由不同路径定义的另一个形状。您要么需要创建自己的继承自 CCNode 的自定义类，要么使用 Cocos2d 以外的其他库。如果您确实创建了自己的 CCNode 子类，那么现有的 Cocos2d 动作/动画工具可能会有用......

* * *

**EDIT2：**如果您了解如何进行子类化，那么这里有一个链接，其中包含您想要在 CCNode 的子类中覆盖哪些方法的基础知识：http: [//www.cocos2d-iphone.org/wiki/doku.php/prog_guide :draw_update](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:draw_update)

此外，cocos2d 编程指南通常会有所帮助：[http ://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:index](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:index)

如果您不了解如何进行子类化（例如，`class`从现有的 继承新的`class`），那么我建议您使用更简单的问题来了解面向对象编程的这一部分！

* * *

~~我相信您最好的选择是调查`CCSequence`（这是 的一种`CCAction`）并用一系列 `CCMoveTo`or`CCMoveBy`动作填充它。~~

~~教程链接：[http ://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:actions_composition](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:actions_composition)~~

# vb.net - 自定义控件中的组属性

> ID：10093473
> 
> 赞同：0
> 
> 时间：2012-04-10T17:25:35.457
> 
> 标签：vb.net, class, properties

我想做一个具有字体等属性的类，该类将具有其他属性，例如名称、大小、单位、粗体。我尝试了一个解决方案，但它对我不起作用。（http://stackoverflow.com /questions/755391/group-properties-in-a-custom-control）有人可以帮忙吗？任何帮助将不胜感激。

```
<TypeConverter(GetType(ExpandableObjectConverter))> _
Class TestingClass
'Some property here
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:21:48.610

```
Public Class Font
    Public Property Name As String
    Public Property Unit As Integer
    Public Property Bold As Boolean
End Class

Public Class TestingClass
    Public Property TestFont As New Font()
End Class 
```

# jquery - $.ajaxSetup 没有为 Get 请求设置内容类型

> ID：10093475
> 
> 赞同：2
> 
> 时间：2012-04-10T17:25:39.467
> 
> 标签：jquery, asp.net, ajax, content-type, pagemethods

### 代码 1

```
$.ajax({url:"1.aspx/HelloWorld",type:"GET",dataType:"json",contentType:"application/json"}); 
```

![Code1 的请求响应](../Images/a9422a583f56521bcd7990e981cb4b33.png)

### 代码 2

```
$.ajaxSetup({
   contentType: "application/json",
   dataType: "json"
});

$.get("1.aspx/HelloWorld","",$.noop,"json"); 
```

![代码 2 的请求响应](../Images/20460c6f1923002978d7e4f2cfedf217.png)

Code1 有效地设置了`content-type`并且Code2`datatype` 没有设置内容类型这是有意的还是我必须做 Voodoo 的东西来使它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T05:33:39.287

我只想为 ajax 方法创建一个快速包装器。

```
$.myAjax = function(url,data){
    return $.ajax({
        contentType: "application/json",
        url: url,
        data: data || {},
        type: "GET",
        dataType: "json"
    });
}
// used with
$.myAjax("foobar.asp").done(function(data){
    console.log(data);
}).fail(function(){
    console.log(arguments);
}); 
```

未通过标头的原因是，如果未为给定请求指定 contentType 并且没有数据，则未设置 contentType。这可能是一个错误，因为 contentType 是在 ajaxSetup 中设置的，但我对此并不积极。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:29:51.477

`$.ajaxSetup`保留大多数所有 ajax 请求的默认选项，但**不会自行**发送 ajax 请求。

但是`$.ajax`是发送请求的实际功能。

* * *

在**代码 1**上：

它只是用综合方法发送一个 GET Ajax 请求`$.ajax()`

在**代码 2**上：

在发送任何请求之前设置所有 ajax 请求的默认选项。然后，当使用 $.get 发出实际请求时，不再需要定义此参数。

* * *

**更新**

这似乎是一个错误。当您发送`$.get`没有任何数据的请求时会出现此类问题。[在这里](http://jsfiddle.net/fzgjw/1/)检查。您需要使用 firebug 或类似工具查看请求标头。

# android - 在android上，我将如何为需要用户在完全启动应用程序之前输入用户名的应用程序创建提示？

> ID：10093484
> 
> 赞同：0
> 
> 时间：2012-04-10T17:26:03.880
> 
> 标签：android, mobile, android-activity

我会以我对 Android 工作非常陌生。

因此，我必须在现有应用程序上工作并创建一个屏幕，如果未输入用户名，则提示用户输入用户名，那么它将不会启动当前存在的主要活动（即它不会完全启动应用程序。而是它只会坐在那个屏幕上，直到输入用户名。）

我想这相当于一个网络应用程序登录页面，因为如果用户没有经过身份验证和授权，它不会让用户通过该页面。但是，此应用程序中没有身份验证或授权。相反，在第一次运行时，用户必须简单地注册一个用户名，并且该用户名被保存到数据库中，并且对于任何后续运行，应用程序的主要活动将简单地启动，因为用户已经注册到该手机。事实上，除非应用程序连同其所有数据一起被删除并重新安装，否则应用程序不会再次提示用户输入他们的姓名。

这隐含地意味着我必须将用户名保存在数据库或其他某种存储中。

所以我想知道在具有现有主要活动的应用程序中执行此操作的最佳方法是什么？

我应该尝试在现有的主要活动上完成此操作，还是创建一个新活动来显示此提示屏幕，并且实际上阻止主要活动运行，直到用户输入他们的姓名？

任何教程或链接都会有所帮助，并提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T17:38:15.730

让您的主要活动（家庭意图）成为要求凭据（用户名等）的对话活动。然后，当用户按下提交（或任何您想调用的按钮）时，您将启动应用程序的“主要”活动，即登录屏幕后的第一个活动。

启动登录屏幕时，检查用户是否已经登录。如果是，立即启动“主要”活动并绕过登录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T17:47:29.573

为用户名和密码创建登录活动.. **如果用户是新用户..第一次注册...** 然后获取输入的值并使用共享首选项存储它们并打开活动..像这样..

```
 SharedPreferences pref = context.getSharedPreferences("PREF_NAME", Context.MODE_PRIVATE);

pref.edit().putString("USERNAME", "PASSWORD").commit();<--Here use real username and password..

 pref.edit().clear().commit();
 Intent i=new Intent(this,youractivity.class);
startActivity(i); 
```

别的

让用户输入用户名和密码字段..然后在这样的共享首选项中检查它们..

```
 SharedPreferences pref = context.getSharedPreferences("PREF_NAME", Context.MODE_PRIVATE);
    String pswrd= pref.getString("Username", "somevalue");<--use entered username 
```

如果 pswrd 与输入的密码匹配.. 开始主要活动..

```
 if(pswrd==entered password){
 Intent i=new Intent(this,youractivity.class);
startActivity(i);
  } 
```

希望清楚..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T18:03:01.937

也许和 raju 的回答一样——我是这样做的：

**主要活动**oncreate：

```
if (!prefs.contains("username")) {
    startActivity(new Intent(this, Login.class));
    finish();
} 
```

**登录完成并保存“用户名”时的**登录类重新启动主活动：****

 **```
finish();
startActivity(new Intent(getApplicationContext(), Main.class)); 
```

非常简单但性能很好。**

# c# - 如何与 .NET 中的正则表达式“最短匹配”匹配

> ID：10093489
> 
> 赞同：17
> 
> 时间：2012-04-10T17:26:23.967
> 
> 标签：c#, .net, regex

我遇到了正则表达式的问题...我必须匹配共享点 URL ..我需要匹配“最短”

就像是：

```
http://aaaaaa/sites/aaaa/aaaaaa/

m = Regex.Match(URL, ".+/sites/.+/"); 
```

m.Value 等于整个字符串...

我怎样才能使它匹配

```
http://aaaaaaa/sites/aaaa/ 
```

没有别的了？？

非常感谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-10T17:29:17.740

`.+`是贪婪的，所以它会在停止之前匹配尽可能多的字符。将其更改为`.+?`，比赛将尽快结束：

```
m = Regex.Match(URL, ".+/sites/.+?/"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-10T17:28:03.467

尝试使正则表达式匹配所有内容，`/`而不是简单的所有内容。这是通过使用字符类 atom 的非形式来完成的`[^]`。

```
m = Regex.Match(URL, ".+/sites/[^/]+/"); 
```

# ruby - Integer(value) 和 value.to_i 之间的区别

> ID：10093493
> 
> 赞同：40
> 
> 时间：2012-04-10T17:26:44.047
> 
> 标签：ruby

给定一个这样的字符串对象：

```
twohundred = "200" 
```

做有什么区别：

```
Integer(twohundred)  #=> 200 
```

和：

```
twohundred.to_i      #=> 200 
```

有什么区别吗？是否建议使用其中之一？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-04-10T17:29:40.193

`Integer(num)``ArgumentError`如果 num 不是有效的整数（您可以指定基数），将引发异常。

`num.to_i`将尽可能多地转换。

例如：

```
"2hi".to_i 
#=> 2

Integer("2hi")
#=> throws ArgumentError

"hi".to_i
#=> 0

Integer("hi")
#=> throws ArgumentError

"2.0".to_i
#=> 2

Integer("2.0")
#=> throws ArgumentError 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-10T17:32:02.453

来自Ruby[文档](http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-Integer)：`Integer()`

> Integer(arg,base=0) → integer ... 如果 arg 是一个字符串，当 base 被省略或等于 0 时，基数指示符（0、0b 和 0x）被接受。在任何情况下，字符串都应该严格遵守数字表示。此行为与 String#to_i 的行为不同。

换句话说，`Integer("0x100") => 256`和`"0x100".to_i => 0`。

另一个例子：`Integer("0010") => 8`和`"0010".to_i => 10`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-12T19:36:34.500

让我们来看看使用实例方法[String#to_i](http://ruby-doc.org/core-2.2.0/String.html#method-i-to_i)和模块方法[Kernel::Integer](http://ruby-doc.org/core-2.2.0/Kernel.html#method-i-Integer)之间的区别。然而，首先，让我们将后者嵌入到另一种方法中`int1`：

```
def int1(str)
  Integer(str) rescue nil
end 
```

这样，如果`str`不能被解释为整数，`Integer`将引发`ArgumentError`异常，导致内联救援返回`nil`。如果`Integer`不引发 execption`int`将返回字符串的等效整数。

为了完成比较，让我们还添加一个正则表达式，在使用`to_i`进行转换之前确认字符串的内容表示一个整数。

```
R = /
    (?<=\A|\s) # match beginning of string or whitespace character (positive lookbehind)
    -?         # optionally match a minus sign
    \d+        # match one or more digits
    (?=\s|\z)   # match whitespace character or end of string (positive lookahead)
    /x         # free spacing regex definition mode

def int2(str)
  str =~ R ? str.to_i : nil
end 
```

与 一样`int1`，如果`str`不能解释为整数，`int2`则返回`nil`; 否则，`int`返回字符串的等效整数。

让我们尝试一些比较。

```
str = '3'
str.to_i       #=> 3 
int1(str)      #=> 3 
int2(str)      #=> 3

str = '-3'
str.to_i       #=> -3 
int1(str)      #=> -3 
int2(str)      #=> -3

str = '3.0'
str.to_i       #=> 3 
int1(str)      #=> nil 
int2(str)      #=> nil 

str = '3.2'
str.to_i       #=> 3 
int1(str)      #=> nil 
int2(str)      #=> nil 

1e3            #=> 1000.0
str = '1e3'
str.to_i       #=> 1 
int1(str)      #=> nil 
int2(str)      #=> nil 
```

```
str = '-1e3'
str.to_i       #=> -1 
int1(str)      #=> nil 
int2(str)      #=> nil 

str = '- 1e3'
str.to_i       #=> 0 
int1(str)      #=> nil 
int2(str)      #=> nil 

str = '3a'
str.to_i       #=> 3 
int1(str)      #=> nil 
int2(str)      #=> nil 

str = '1-3a'
str.to_i       #=> 1
int1(str)      #=> nil 
int2(str)      #=> nil

str = 'b3'
str.to_i       #=> 0
int1(str)      #=> nil 
int2(str)      #=> nil 
```

[String#to_i](http://ruby-doc.org/core-2.2.0/String.html#method-i-to_i)读取数字（可能前面有一个减号），直到它读取一个空白字符或到达字符串的末尾。然后它只是将这些数字和可能的减号转换为 a `Fixnum`，然后返回。`to_i`当然有它的用途，但是这些例子表明你应该使用`int1`或者`int2`如果你希望`nil`在字符串不包含整数表示的情况下返回。

# vb.net - 搜索文本文件以查看字符串是否存在

> ID：10093494
> 
> 赞同：0
> 
> 时间：2012-04-10T17:26:47.727
> 
> 标签：vb.net

我对编程很陌生，所以我提前道歉。

因此，我正在尝试创建一个 Win 应用程序，以使使用 Robocopy 复制文件更容易，并最终完成其他任务。到目前为止，基本上我所拥有的是一个调用 Sub Robcopy_EXE 的按钮。表单上有一个带有 100 个复选框的选项卡，每个终端一个，由用户指定，还有一个复选框用于确定您是否需要来自 Robocopy 的详细报告。我还有一个文本框供用户输入站点 IP 地址的前 3 个八位字节。复选框和输入字段用于创建字符串“Terminal_input”，这是在 CMD 中运行 Robocopy 的内容。Robocopy 将其进度记录到我标记为“Status.txt”的文本文件中。这就是我所得到的。

此时我需要知道当前正在运行的更新何时完成才能进入下一个终端。我正在尝试不断阅读“Status.txt”文件并寻找“ENDED”一词以进入下一个终端。如果“ENDED”一词不存在，我想将 LABEL3 更新为“更新终端”

最终，我希望有一种方法可以使复选框#成为一个变量，随着它通过每个复选框#而递增，但是在我弄清楚如何检查要完成的 1 个终端之后，我会弄乱它。

就像我说的那样，我是编程新手，解决这个问题我很开心，但我对这个过程感到非常困惑，我会以最糟糕的方式去做：D

先谢谢了。

```
 Private Sub RoboCopy_EXE()
        Dim Robocopystart = "Robocopy C:\wtg\update \\"
        Dim Robocopymid = IP_Input.Text
        Dim Robocopyend = ".42\c$\wtg /E /copy:datsou /r:3 /w:20 /log+:status.txt /tee /ns /nc /nfl /"
        Dim Terminal_Input = Robocopystart + Robocopymid + Robocopyend
        If CheckBox10.Checked Then
            If RoboCopy_Detailed_Progress.Checked = True Then
                Shell("CMD.exe", vbNormalFocus)
                Threading.Thread.Sleep(400)
                SendKeys.SendWait(Terminal_Input)
                Label3.Text = items
            Else : RoboCopy_Detailed_Progress.Checked = False
                Shell("CMD.exe", vbNormalFocus)
                Threading.Thread.Sleep(500)
                SendKeys.Send("Test2")
            End If
        End If
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:21:59.307

可能有更好的方法（甚至更好的方法！）来做到这一点。但是为了简单起见，您应该阅读有关计时器控件的内容，并每秒执行一次，并检查文件的状态。并阅读最后一行并将其与您要查找的行进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T00:00:19.647

这些日志文件有多大？你可以按照以下方式做一些事情

```
While true
    Dim sr as new StreamReader(fileName)
    Dim contents as String = sr.ReadToEnd()
    sr.Close
    ForEach(string line in contents)
        if (line = "ENDED") then
            exit While
        Endif
    Next
    Thread.Sleep(1000)
Loop 
```

（原谅任何语法错误，在我的脑海中写下，这些天我主要是 C#）

尽管您可能应该通过一些错误处理和退出循环的方法来加强它，这样它就不会永远循环（如果它出现 100 次退出错误？）。

此外，您应该将所有这些都放在 BackGroundWorker 上，这样它就不会锁定 UI（否则您会发现更新标签等问题）。

最后，不是 100 个复选框（糟糕！），也许是一个动态生成的带有选中项的列表框，或者一个类似的 DataGridView？您可以通过这种方式遍历检查的项目。

# ajax - jQuery 不会使用跨域脚本触发错误回调

> ID：10093497
> 
> 赞同：4
> 
> 时间：2012-04-10T17:26:56.803
> 
> 标签：ajax, jquery, cross-domain

这是我的代码。它尝试加载 Leaflet 库。当我将`crossDomain`选项转到`true`时，不会触发错误回调。当我将选项设置为 false 时，会触发错误回调，但无法下载 js，因为它是跨域的。

为什么这么难？有什么解决办法吗？有一个图像占位符而不是网络地图（最初不加载它并节省页面加载时间），当用户激活地图时，应该加载js。但是如果它失败了，我想显示一个正常的错误信息和一个重试按钮。

```
$.ajax({
    url: 'http://code.leafletjs.com/leaflet-0.3.1/leaflet.js',
    success: start_map,
    error: show_map_error,
    dataType: 'script',
    crossDomain: true
}); 
```

**更新：**我试过`complete`回调，它也不起作用。

**update2：**这同样适用于跨域`$.getScript(...).fail(...)`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T18:58:17.240

跨域和 Ajax 真的很烦人。这是一个 JavaScript 问题，而不仅仅是一个 jQuery 问题。

基本上是这样的：当你关闭跨域功能时，错误会触发，因为 jQuery/JavaScript 需要相同的域调用。事实并非如此，因此它失败了。

当您进行跨域调用时，将 crossDomain 设置为 true，由于 JavaScript 的跨域限制，您不会遇到错误。

有一些解决方案（或解决方法）。

第一个，如果您有权访问您正在调用的后端系统，您可以设置（在我的示例 PHP 中）标头以允许跨域调用。（我假设您在这里请求 JSONP？）。当您这样做时，JavaScript 会接受调用，并且不需要跨域技巧。

```
header('Access-Control-Allow-Origin: http://domain1.com, http://domain2.com'); //whitelist 
```

看这里：[跨域xmlhttp](https://stackoverflow.com/questions/6500007/cross-domain-xmlhttp)

如果您无法访问后端，则需要做一个解决方法，这基本上是 Ajax 调用超时，因为错误函数永远不会触发。然而，这种解决方法非常肮脏，当线路出现故障或互联网速度很慢时，将触发此超时。

```
$.ajax({
    url: 'http://code.leafletjs.com/leaflet-0.3.1/leaflet.js',
    success: start_map,
    error: show_map_error,
    timeout: 2000, // 2 seconds timeout before error function will be called
    dataType: 'script',
    crossDomain: true
}); 
```

# javascript - XML 数据未出现在 HTML 页面中

> ID：10093503
> 
> 赞同：0
> 
> 时间：2012-04-10T17:27:29.283
> 
> 标签：javascript, python, xml, ajax, django

我试图让 XML 数据出现在 HTML 页面上。我正在使用 Django 生成 XML 文件中的内容，并使用 Javascript 每五秒 ping 一次以查看是否有新帖子将它们加载到页面中。

这是我的 XML 文件：

```
<?xml version="1.0" ?>
    {% for post in posts %}
        <tr>
            <td class="username">{{ post.username }}</td>
            <td class="message">{{ post.message }}</td>
            <td class="timestamp">[{{ post.timestamp }}] </td>
        </tr>
    {% endfor %} 
```

这是我的Javascript：

```
function setupRequest(){
    var request = new XMLHttpRequest();
    var posts = document.getElementById('posts');
    var i;
    request.onreadystatechange = function() {
        if (request.readState != 4){
            return ;
        }
        console.log("hello",request);
        var XMLData = request.response
        posts.innerHTML = XMLData;
        // setTimeout("setupRequest()", 5000);
    }
    request.open("GET","/chat/grab/", true);
    request.send();
}
function init(){
    console.log('Init');
    setupRequest()
}

window.onload=init; 
```

这是我的 Chrome 控制台的输出：

```
client.js:18Init
chrome-extension://iljkdiphoadeehmlplkjgjpojdpdfgfa/content.js:1starting content 
```

这是相关的HTML：

```
<div id="box">
<table id="posts">
</table>

</div> 
```

但是，页面本身没有出现任何内容。有人有想法么？我不知道发生了什么...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:23:43.590

你有一个语法错误：

`request.readState`

应该

`request.readyState`

readState 始终不等于 4。

# linux - 如何在 unix 或 linux 中基于 grep、sed 或 awk 获取 unix 目录中的文件名？

> ID：10093505
> 
> 赞同：0
> 
> 时间：2012-04-10T17:27:31.953
> 
> 标签：linux, unix, sed, awk, grep

如何在 unix 或 linux 中基于 sed、grep 或 awk 获取 unix 目录中的文件名？

我虽然可以做类似的事情：

```
 for i in $(ls /tmp/files/date*); do
       if [ $(cat $i | head -n 1 | grep -c "6") >= 1 ] ; then
          echo $i
       fi
    done 
```

我需要它来搜索某个目录中的所有文件（每个文件中只有第一行），然后返回哪些文件中包含字符串。

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T17:35:27.217

您可以稍微简化一下脚本并获得所需的结果：

```
for i in /tmp/files/date*; do
   if head -n 1 "$i" | grep -q "6"; then
      basename "$i"
   fi
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T17:59:10.077

您的代码中存在许多问题。我将按重要性顺序或多或少地介绍它们。

1.  你错过了`then`：
    `if [ $(cat $i | head -n 1 | grep -c "6" >= 1) ] ; then`
2.  不要解析`ls`，glob就足够了：
    `for i in /tmp/files/date*; do`
3.  `>=`应该在子shell之外：
    `if [ $(cat $i | head -n 1 | grep -c "6") >= 1 ] ; then`
4.  `>=`应该是在`-ge`数字上进行比较：
    `if [ $(cat $i | head -n 1 | grep -c "6") -ge 1 ] ; then`
5.  引用`"$i"`和子shell，不需要引用6：
    `if [ "$(cat "$i" | head -n 1 | grep -c 6)" -ge 1 ] ; then`
6.  的返回值`grep`可用于控制`if`（切换`-c`到，`-q`因为您希望它安静并且不需要计数：
    `if cat "$i" | head -n 1 | grep -q 6 ; then`
7.  你不需要 cat 这里：
    `if head -n 1 "$i" | grep -q 6 ; then`

所以：

```
for i in /tmp/files/date*; do
   if head -n 1 "$i" | grep -q 6 ; then
      echo $i
   fi
done 
```

根据您要对列表执行的操作，您可能希望以不同的方式处理它（`find`可能）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T17:34:39.173

您可以使用`basename`获取路径的最后一部分（文件名）

```
$ basename '/usr/bin/env'
env 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T19:27:30.203

“我需要它来搜索某个目录中的所有文件（每个文件中只有第一行），然后返回哪些文件中有字符串。”

find、grep、cut 的组合

```
find a_certain_directory_name -exec \grep -n -H -m 1 my_search_string {} \; | cut -f 1,2 -d : | grep -e ":1\$" | cut -f 1 -d : 
```

# c - C 字符值算术

> ID：10093509
> 
> 赞同：2
> 
> 时间：2012-04-10T17:27:52.483
> 
> 标签：c, char, ascii, expression, atoi

我一直在阅读“The C Programming Language”这本书学习 C，我偶然发现了`s[i] - '0'` 他们所说的算术，它给出了存储在 s[i] 中的字符的数值。我不是很明白，它怎么能通过减法给出值呢？注意 这在 atoi 函数中使用，该函数将一串数字转换为其等效的数字。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T17:32:17.753

可能重复：[见这里](https://stackoverflow.com/questions/10023180/how-does-character-representation-in-array-index-work-in-this-case)

在字符集中很好地`'0'`表示`48`。`'0'`所以用任何其他字符值减去它（ ） `'1'`，`'2'`将给出相应的数字，所以`'9'`-`'0'`会给你`9`。

注意我们是两个字符的区别： `'9'`- `'0'`，这里都是`char`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-10T17:30:42.063

`'0'`to的字符值`'9'`保证是 C 中所有字符集中的顺序值。

> （C99，5.1.2p3）“在源和执行基本字符集中，上述十进制数字列表中 0 之后的每个字符的值都应比前一个值大一。”

这意味着例如`'1' == '0' + 1`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-10T17:30:45.027

在引擎盖下，a`char`由一个数值表示。数字 0-9 的字符存储在升序数值中。如果我们`0`用作基值，那么简单的减法可以将 0-9 字符转换为等效的 int 值

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-10T17:31:55.093

基本上，您需要了解的是，在现代计算机上，所有信息都以数字方式存储为字节序列。由每个程序决定如何*解释*每个字节。所以一个字符只不过是一个或多个字节——一个通常代表人类可读的字母或符号的数值。例如，在 ASCII 中，字母“A”由数值 65 表示。

这意味着在某些编程语言（例如 C）中，您可以将字符视为数值。例如，在 C 语言中，表达式`'A' + 1`会给您 66，这恰好是 ASCII 值`B`（假设您的编译器/平台使用的是与 ASCII 兼容的字符集）。

# javascript - 从 onclick 调用时 $.ajax 不起作用

> ID：10093513
> 
> 赞同：2
> 
> 时间：2012-04-10T17:28:13.123
> 
> 标签：javascript, jquery, ajax

当我从控制台调用 AA.sendRequest() 时，我的代码工作正常，但当我从 onclick 调用它时却不行：

```
<a href="/b/Technology" onclick="AA.sendRequest()">Technology</a> 
```

由于某种原因，它进入了错误函数。

textStatus = "错误" errorThrown = ""

* * *

这是一个非常基本的测试：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="assets/AA.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<a href="login.php" onclick="AA.sendRequest('id');">login</a>
</body>
</html> 
```

Javascript：

```
// JavaScript Document

var AA;
AA = (function() {
    function AA() {}

    // Request functions
    function sendRequest(){}
    AA.sendRequest = function(id){

        $.ajax({
            url: "login.php",
            type: "GET",
            dataType: "text",

            success: function(data){
                alert("yay");

            },
            error: function(jqXHR, textStatus, errorThrown){
                alert("status:"+textStatus+", "+errorThrown);
            }
        });
        return false;
    }

    return AA;
})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:34:31.237

没有上下文就很难确定你想要完成什么。但是，以下应该有效：

```
var AA = {};
AA.sendRequest = function(id){
  $.ajax({
    url: "/ajaxPage/b/Technology",
    type: "GET",
    dataType: "text",
    success: function(data){
      alert("yay");
    },
    error: function(error){
      alert(error);
    }
  });
  return false;
}; 
```

在您的 HTML 中：

```
<a href="/b/Technology" onclick="AA.sendRequest('someId')">Technology</a> 
```

# http - 如何为 Http Delete 方法设置 RequestBody。

> ID：10093514
> 
> 赞同：5
> 
> 时间：2012-04-10T17:28:18.523
> 
> 标签：http, httpclient, apache-httpcomponents, http-delete

我正在为删除 API 的服务器编写客户端代码。API 规范要求发送数据。我正在使用 HttpComponents v3.1 库来编写客户端代码。使用[HtpDelete](http://hc.apache.org/httpclient-3.x/apidocs/index.html?org/apache/commons/httpclient//class-useHttpMethod.html)类我找不到向其添加请求数据的方法。有没有办法这样做？下面是代码片段。

```
 HttpDelete deleteReq = new HttpDelete(uriBuilder.toString());
    List<NameValuePair> postParams = new ArrayList<NameValuePair>();
    postParams.add(new BasicNameValuePair(RestConstants.POST_DATA_PARAM_NAME, 
            postData.toString()));
    try {
        UrlEncodedFormEntity entity = new UrlEncodedFormEntity(postParams);
        entity.setContentEncoding(HTTP.UTF_8);
        //deleteReq.setEntity(entity); // There is no method setEntity()
        deleteReq.setHeader(RestConstants.CONTENT_TYPE_HEADER, RestConstants.CONTENT_TYPE_HEADER_VAL);
    } catch (UnsupportedEncodingException e) {
        logger.error("UnsupportedEncodingException: " + e);
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-06T09:21:01.930

为什么不这样做:-)

```
class MyHttpDelete extends HttpPost{
    @Override
    public String getMethod() {
        return "DELETE";
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-10T23:23:13.500

我还没有尝试过，它就像地狱一样骇人听闻，如果事实证明有更好的解决方案，我会感到更快乐，但是您可以尝试扩展 PostMetod 并覆盖 getName() 方法以返回“DELETE”。

# iphone - iPhone和Objective-C的共享/独占锁定机制？

> ID：10093518
> 
> 赞同：0
> 
> 时间：2012-04-10T17:28:30.360
> 
> 标签：iphone, objective-c, ios, locking

iPhone/Objective-C 是否有标准的共享/排他锁定/信号量方案？（用于同步对内部对象的操作，而不是文件访问。）

或者，如果我必须自己动手，最好的基元是什么？

我需要它来实现单独的读写锁，以提高并发性。（这应该很明显，但我想你必须拼出所有内容。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:08:31.450

你有几个选择。实现通常基于以下接口：

```
 #include <pthread.h>   // << for locks and threads
 #include <semaphore.h> // << for semaphore 
```

Cocoa（例如）用`NSLock`（和特化）包装了锁定接口。

# python - Eclipse 缩进错误警告

> ID：10093519
> 
> 赞同：9
> 
> 时间：2012-04-10T17:28:32.630
> 
> 标签：python, eclipse, warnings

我正在使用 PyDev 透视图。我在 python 文件中收到“缩进错误”警告。我使用两个空格进行缩进，而 Eclipse 似乎希望我使用 4。

如何设置我想要的缩进以便此警告消失？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-11T00:11:48.433

您必须更改 PyDev 在以下位置使用的制表符长度：

窗口 > 首选项 > pydev > 编辑器 > 制表符长度

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-10T17:31:01.147

执行 Control+A 全选。然后在“源”菜单选项卡下选择“正确缩进”。

来源：目前已打开 Eclipse。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-13T10:41:26.930

警告：

**缩进错误（2 个空格）**

解决方案：

1.  **CTRL A**（选择当前文件中的所有代码）

2.  **源 -> 将选项卡转换为空格选项卡**[在主菜单栏中]

3.  **写 2**

# jquery - jquery：带有一个（单击）事件的实时（单击）ajax

> ID：10093526
> 
> 赞同：0
> 
> 时间：2012-04-10T17:29:21.810
> 
> 标签：jquery, ajax, click, live

我找不到任何解决方案来让这个 jquery 事件工作。

```
$(window).one('click',function(){
   console.log('hide something');
   return false;
});

$('a.ajax').live('click', function(e){
   console.log('ajax requesting');
   return false;
}); 
```

我希望“A”元素应该执行 ajax 请求而不是其默认值以及触发窗口的单击事件一次。从 A 的单击中删除“return false”将触发窗口的单击，但不会阻止其在第一次单击后的默认行为并继续非 ajax 请求。

两个处理程序都处于不同的闭包中，所以我不能创建一个变量来帮助它工作，我也不想创建一个全局变量。

从我上面的示例应该导致：
-> ajax 请求（第一次单击）
-> 隐藏某些内容（第一次单击）
-> ajax 请求（第二次单击）
-> ajax 请求（第三次单击）

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:31:04.633

在您的`a`事件处理程序中添加为第一行`e.preventDefault()`（并删除 return false）。

```
$('a.ajax').live('click', function(e) {
    e.preventDefault();
    console.log('ajax requesting');
}); 
```

'return false' 将取消所有未来的事件（甚至是传播到窗口的事件），但 preventDefault() 只会阻止常规操作发生，但会继续事件链。

更多信息： [jQuery e.preventDefault 文档](http://api.jquery.com/event.preventDefault/)

# neural-network - OpenCv 中如何实现神经网络？

> ID：10093527
> 
> 赞同：0
> 
> 时间：2012-04-10T17:29:28.260
> 
> 标签：neural-network, face-recognition

我想在 Visual Studio 的 OpenCv 中使用神经网络实现人脸识别。我知道在 Matlab 中实现神经网络非常简单，但我几乎已经在 Visual Studio 中补充了我的人脸识别项目。我看过 OpenCv MLP 库函数，但我不明白如何使用它们。一些示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T21:00:23.057

您可以查看 OpenCV 的[教程页面](http://opencv.itseez.com/)，尤其是[机器学习教程](http://opencv.itseez.com/doc/tutorials/ml/table_of_content_ml/table_of_content_ml.html)。

不幸的是，在撰写本文时，该页面上只有两个讨论支持向量机的教程。

您可以查看的另一个地方是[Emgu CV wiki](http://www.emgu.com/wiki/index.php/Main_Page)。Emgu CV 是 OpenCV 上的 .NET 包装器。这意味着您可以在 C# 或其他 .NET 语言中使用 OpenCV 库。他们有一个包含[机器学习示例](http://www.emgu.com/wiki/index.php/Tutorial#Machine_Learning_Examples)的部分。这些示例是用 C# 编写的，但它们在 C++ OpenCV 中使用相同的函数。因此，您可以轻松地将它们转换为 C++。

# jquery - 单击时关闭 Active Accordion 面板...似乎始终打开一个面板

> ID：10093528
> 
> 赞同：1
> 
> 时间：2012-04-10T17:29:28.457
> 
> 标签：jquery, accordion

[http://jsfiddle.net/buhlett/paw5w/](http://jsfiddle.net/buhlett/paw5w/)

手风琴工作顺利，但它不允许我在任何时候关闭所有面板。一个面板始终被强制打开。

我很确定我错过了一两行

**jQuery**

```
$(document).ready(function() {
// Store variables
var accordion_head = $('.grape-accordion > li > a'),
    accordion_body = $('.grape-accordion li > .grape-sub-menu, .grape-last-sub-menu');
// Open the first tab on load
// Click function
accordion_head.on('click', function(event) {
    // Disable header links
    event.preventDefault();
    // Show and hide the tabs on click
    if ($(this).attr('class') != 'active') {
        accordion_body.slideUp('normal');
        $(this).next().stop(true, true).slideToggle('normal');
        accordion_head.removeClass('active');
        $(this).addClass('active');
    }
});
});​ 
```

**HTML**

```
<div>
    <ul class="grape-accordion">
        <li id="one" class="share"><a href="#one">-</a>
        <ul class="grape-sub-menu">
            <li><a href="#"><em>»</em>-</a></li>
        </ul>
        </li>
        <li id="two" class="mail"><a href="#two">-</a>
        <ul class="grape-sub-menu">
            <li><a href="#"><em>»</em>-</a></li>
        </ul>
        </li>
        <li id="two" class="mail"><a href="#two">-</a>
        <ul class="grape-sub-menu">
            <li><a href="#"><em>»</em>-</a></li>
        </ul>
        </li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:28:07.750

你的意思是像这个**[jsFiddle 例子](http://jsfiddle.net/j08691/paw5w/1/)**吗？如果是这样，我所做的就是添加一个 else 子句。

```
else {
        accordion_body.slideUp('normal');
        accordion_head.removeClass('active');
    } 
```

# java - Wicket setResponsePage() 方法是如何工作的？

> ID：10093539
> 
> 赞同：5
> 
> 时间：2012-04-10T17:29:54.717
> 
> 标签：java, wicket

在学习 JSP 和 servlet 时，我听说过重定向和分派。威克特`setResponsePage()`表演的是哪一个？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-11T06:22:23.350

什么`setResponsePage`取决于几个因素：调用 setResponsePage 的次数、调用的 setResponsePage 的哪个变体以及使用的渲染策略。

您可以`setResponsePage`在请求期间多次调用。Wicket 使用最后一个来处理。

setResponsePage 有两种变体：带有`Page`实例和带有`Page`类和`PageParameters`. 后者将重定向发送到浏览器的可收藏 URL。根据[渲染策略](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/settings/IRequestCycleSettings.RenderStrategy.html)，前者将：

*   ONE_PASS_RENDER
    *   将页面直接渲染到浏览器
*   REDIRECT_TO_BUFFER
    *   将页面渲染到缓冲区，向浏览器发送重定向（然后检索缓冲的渲染标记），或者
*   REDIRECT_TO_RENDER
    *   向浏览器发送重定向，然后浏览器发送请求以呈现页面

所以第一个选项是分派，第二个选项是分派，然后是重定向，第三个选项是 servlet 术语中的重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T16:22:27.753

setResponsePage(PageName.class) 会将浏览器重定向到您需要去的 PageName。确保您已经将 Page.class 挂载到给定路径。例如，在您的 Application init 方法中，您可以像这样挂载 **mountPage("/home.html", WelcomePage.class);** 然后在其他页面，当你需要去主页时，你只需像这样调用 **setResponsePage(WelcomePage.class);**

# crystal-reports - 循环遍历多值参数数组

> ID：10093544
> 
> 赞同：6
> 
> 时间：2012-04-10T17:30:05.263
> 
> 标签：crystal-reports

我有一个允许多个值的参数。它用于我数据库中的名称字段。我想要做的是允许用户输入一个名称，然后让水晶找到任何名称，就像他们输入的任何名称一样。因此，例如，您可以输入 4 个姓氏，并且水晶会返回在姓名字段中具有任何这些名字的任何人。我可以让“like”正常工作，但前提是数组中有一个字符串。这是我的选择公式：

```
 numbervar counter := 1;
    numbervar positionCount:=count({?Customer Name}); //I'm not sure what to put
                                                        here. Count? UBound? 

    if {?Customer Name}[1] <> 'ALL'
    then
    (
         while(counter <= positionCount)
         do
         (       
            {NAMEFIELD} like  '*' & {?Customer Name}[counter] & '*';
            counter := counter + 1;
         );
    ) 
    else
    if {?Customer Name}[1] = 'ALL'
    then
    true
    ) 
```

此公式返回所有名称，而不是参数中的名称。关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:13:34.757

使用以下属性创建一个多值参数 ({?Customer Name})：

*   默认值：全部
*   所有多个值：TRUE

在参数的选择列表网格中添加一行；提供 'ALL' 和 'ALL' （不带单引号）

使用以下文本创建一个自定义函数（名为“Delimit”）：

```
// Delimit()
// enclose each value in array in **, returning an array
Function (Stringvar Array params)

  Split("*" + Join(params, "*,*") + "*", ",") 
```

修改报表的记录选择公式：

```
If {?Customer Name}<>"ALL" Then
    {TABLE.CUSTOMER_NAME} LIKE Delimit({?Customer Name})
Else
    True 
```

或者，创建一个公式以使用此文本显示参数的值：

```
//{@Customer Name}
Join( Delimit({?Customer Name}), ";") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T19:11:10.747

幸运的是 CR 可以自动处理这种情况（至少在我刚刚确认的 CR2008 中）。你可以这样做`{?Customer Name}="All" or {NAMEFIELD} like {?Customer Name}`。

最终用户可以适当地使用通配符，但您可以在参数的帮助文本中添加简介或使用编辑掩码强制使用 *Name* 格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:44:56.067

如果您有 Oracle，另一种方法（我认为创建一个单独的答案是有意义的）是使用[REGEXP_LIKE](http://docs.oracle.com/cd/B14117_01/server.101/b10759/conditions018.htm)表达式。

*   创建使用命令的报告。
*   在命令面板中创建一个字符串参数（{?QUERY}）；将默认值设置为“ALL”（不带单引号）。
*   将查询添加到命令中；参考参数：

`SELECT customer_name FROM customers WHERE ( '{?QUERY}'='ALL' OR REGEXP_LIKE(customer_name, '{?QUERY}') )`

*   像往常一样向报告添加字段
*   出现提示时（运行报告），​​在 QUERY 参数中输入正则表达式。该模式`'A|B|C'`等价于`LIKE '%A%' OR LIKE '%B%' OR LIKE '%C%'`。

# c++ - 向导安装的 C++ GUI 测试

> ID：10093546
> 
> 赞同：1
> 
> 时间：2012-04-10T17:30:16.820
> 
> 标签：c++, user-interface, testing, installation

我是一名学生（学习编程）在一家公司实习，但被聘用在“测试”部门。

我被要求创建一个 C++ 程序来自动化（出于测试目的）安装内部开发的软件。

安装通过向导选择几个选项（复选框、下拉列表、按钮、单选按钮），然后继续安装所有内容（最后它还会询问用户是否要安装另一个组件）。

主要思想是在程序的一个窗口中设置安装的所有选项，然后安装软件。在安装完成期间，测试人员不必留下来手动设置“安装选项”。

我想知道的是，是否可以将其作为 C++ 应用程序？而且，如果是的话，你知道任何对这项任务有用的库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:28:55.100

*   [AutoIt](http://www.autoitscript.com/site/autoit/)

> AutoIt v3 是一种类似 BASIC 的免费软件脚本语言，旨在自动化 Windows GUI 和一般脚本。它结合了模拟击键、鼠标移动和窗口/控件操作，以便以其他语言（例如 VBScript 和 SendKeys）不可能或不可靠的方式自动执行任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:40:02.897

您可以使用具有 QWizard 类的 Qt 框架来用 C++ 编写向导。 [http://qt-project.org/doc/qt-4.8/qwizard.html](http://qt-project.org/doc/qt-4.8/qwizard.html)

如果您以前没有使用过 Qt，那么如果您的 OOP 很清晰，那么学习 Qt 基础知识（这应该足以让您实现您的向导）将非常容易并且花费更少的时间。

# java - Spring + Maven：匹配通配符严格，但找不到元素'jdbc：embedded-database'的声明

> ID：10093547
> 
> 赞同：12
> 
> 时间：2012-04-10T17:30:17.417
> 
> 标签：java, spring, maven-3, tomcat7, spring-jdbc

我目前正在尝试构建一个使用 Spring、Hibernate 和 Maven（在 tomcat 上运行）的小 webapp。它工作得很好，除了我无法让我的嵌入式数据库工作。我希望你能帮助我。

当我将 webapp 部署到 Tomcat 时，我总是面临这个错误：

> 匹配的通配符是严格的，但找不到元素“jdbc:embedded-database”的声明

在我的调查中，我了解到此消息指向丢失的库。因此我添加了我的 pom.xml，我在其中添加了工件 spring-jdbc。

你能帮我找出错误吗？非常感谢！

* * *

这是我的 spring-configuration-file，它在 webapp 初始化期间导致错误：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:jdbc="http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
   http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
   http://www.springframework.org/schema/tx 
   http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
   http://www.springframework.org/schema/jdbc 
   http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd">
   <bean id="sessionFactory" class=
    "org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
       <property name="dataSource" ref="embeddedDatasource" />
       <property name="packagesToScan" value="org.rest" />
        <property name="hibernateProperties">
            <value>
                hibernate.dialect=org.hibernate.dialect.MySQL5Dialect
                hibernate.hbm2ddl.auto=update
                hibernate.show_sql=false
            </value>
        </property>
    </bean>

    <jdbc:embedded-database id="embeddedDatasource" type="HSQL"/>

    <bean id="txManager" class=
        "org.springframework.orm.hibernate3.HibernateTransactionManager">
       <property name="sessionFactory" ref="sessionFactory" />
    </bean>
    <tx:annotation-driven transaction-manager="txManager" />
</beans> 
```

这是我的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.marcus</groupId>
  <artifactId>maven-webapp-archetype</artifactId>
  <packaging>war</packaging>
  <version>0.0.1-SNAPSHOT</version>
  <name>maven-webapp-archetype Maven Webapp</name>
  <url>http://maven.apache.org</url>
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>3.0-alpha-1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp.jstl</groupId>
        <artifactId>javax.servlet.jsp.jstl-api</artifactId>
        <version>1.2.1</version>
    </dependency>
    <dependency>
        <groupId>jstl</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>3.6.10.Final</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
  </dependencies>
  <build>
    <finalName>maven-webapp-archetype</finalName>
    <plugins>
        <plugin>
          <groupId>org.apache.tomcat.maven</groupId>
          <artifactId>tomcat6-maven-plugin</artifactId>
          <version>2.0-beta-1</version>
          <configuration>
            <url>http://localhost:8080/manager/html</url>
            <server>tomcat7</server>
          </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.tomcat.maven</groupId>
            <artifactId>tomcat7-maven-plugin</artifactId>
            <version>2.0-beta-1</version>
            <configuration>
                <url>http://localhost:8080/manager/html</url>
                <server>tomcat7</server>
            </configuration>
        </plugin>
    </plugins>
  </build>
</project> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T17:42:28.903

Spring 上下文文件中的这一行：

```
xmlns:jdbc="http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd" 
```

应改为：

```
xmlns:jdbc="http://www.springframework.org/schema/jdbc" 
```

不确定您使用的是什么 IDE，但是对于某些（例如 IntelliJ），这将被标记为错误并省去很多麻烦！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-30T09:09:40.327

对我来说是添加 xmlns:jdbc 和 xsi:schemaLocation

```
<beans ....

    xmlns:jdbc="http://www.springframework.org/schema/jdbc"

    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
    .....
    http://www.springframework.org/schema/jdbc
    http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd"
    default-lazy-init="true"> 
```

还添加

# objective-c - UITableViewCell 中的 UIImage

> ID：10093553
> 
> 赞同：0
> 
> 时间：2012-04-10T17:30:41.220
> 
> 标签：objective-c, ios, uitableview, uiimage

我正在尝试将图像放入 UITableViewCell。我的消息使用[SSMessages](https://github.com/markrickert/ssmessagesviewcontroller)样式。 ![在此处输入图像描述](../Images/0d35e0b614f43bfa8506cc0ab0760dc5.png)

尝试过类似的东西，`cell.imageView.image = [UIImage imageNamed:message.messageText];`但它不起作用。有什么建议么？也许需要我的其他代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T17:55:35.693

使用 SSMessageTableViewCellBubbleView 的 leftBackgroundImage 并以这种方式将其添加到您的表格视图中

```
SSMessageTableViewCellBubbleView *imageBubbleView = [SSMessageTableViewCellBubbleView alloc]     init];
imageBubbleView. leftBackgroundImage = [UIImage imageNamed:message.messageText];

[cell.contentView addSubview:imageBubbleView]; 
```

我希望这能奏效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:57:55.273

首先设置图像视图的背景颜色以进行故障排除：

```
cell.imageView.backgroundColor = [UIColor colorWithRed:(255.0f/255.0f) green:(0.0f/255.0f) blue:(0.0f/255.0f) alpha:1.0f]; 
```

设置图像：

```
cell.imageView.image = ...; 
```

设置图像视图框架：

```
cell.imageView.frame = CGRectMake(x, y, cell.imageView.image.size.width, cell.imageView.image.size.height); 
```

将图像视图添加为单元格的子视图。

将此子视图置于最前面：

```
[cell bringSubviewToFront:[cell.imageView superview]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T19:08:51.100

您可能需要调用`[cell setNeedsLayout]`or`[cell setNeedsDisplay]`为了让单元格更新`UIImageView`新图像的框架。如果框架是，简单地在 上设置图像`UIImageView`将无济于事。`UIImageView``CGRectZero`

要查看框架是否为零，请尝试使用以下方法添加背景颜色或图层边框：

```
cell.imageView.layer.borderWidth = 1.f;
cell.imageView.layer.borderColor = [UIColor redColor].CGColor; 
```

# java - 手工编码的 GUI - Java

> ID：10093558
> 
> 赞同：4
> 
> 时间：2012-04-10T17:30:57.527
> 
> 标签：java, swing, user-interface, layout, awt

我正在尝试使用 Swing 和 AWT 手动编写 Java GUI。我正在使用各种布局来尝试实现或类似于下面发布的 GUI（这是用 Pencil 制作的模拟布局）：

![模拟布局 - （用铅笔制作）](../Images/8c994b1874655801f6abdf643378b5b0.png)

到目前为止我得到的是这个，但似乎无法让它更“礼貌”，尽可能吸引人和用户友好。

![Java GUI 试试](../Images/f9d9fe7fa17697a2580fd54943069962.png)

这是我到目前为止所做的代码：

```
import java.awt.*; 
import javax.swing.*;
import javax.swing.JTable;

public class GUI extends JFrame {

    public void buildGui() {

        JFrame frame = new JFrame("Hotel TV Scheduler");

                JPanel mainPanel = new JPanel();
        mainPanel.setLayout(new BorderLayout(0,0));

                JPanel chPanel = new JPanel();
                chPanel.setLayout(new GridLayout(3,2));

                JPanel listPanel = new JPanel();
                listPanel.setLayout(new GridLayout(3,2));

                JPanel infoPanel = new JPanel();
        infoPanel.setLayout(new GridLayout(0,2));

                JPanel addPanel = new JPanel();
        addPanel.setLayout(new GridLayout(0,3));

                mainPanel.add(chPanel, BorderLayout.LINE_START);
                mainPanel.add(listPanel, BorderLayout.CENTER);
                mainPanel.add(infoPanel, BorderLayout.LINE_END);

                JTable chOneTable = new JTable();
                JTable chTwoTable = new JTable();
                JTable listTable = new JTable();

                JLabel ch1Label = new JLabel("Channel 1");
                JLabel ch2Label = new JLabel("Channel 2");
                JLabel listLabel = new JLabel("List");

                JButton rmvChOneButton = new JButton("Remove Channel");
                JButton rmvChTwoButton = new JButton("Remove Channel");

                chPanel.add(ch1Label);
                chPanel.add(ch2Label);
                chPanel.add(chOneTable);
                 chPanel.add(chTwoTable);
                chPanel.add(rmvChOneButton);                                         
                chPanel.add(rmvChTwoButton);

                listPanel.add(listLabel);
                listPanel.add(listTable);                

                JLabel titleLabel = new JLabel("Title");
                JLabel genreLabel = new JLabel("Genre");
                JLabel durationLabel = new JLabel("Duration");
                JLabel actorLabel = new JLabel("Actor");
                JLabel directorLabel = new JLabel("Director");
                JLabel rentableLabel = new JLabel("Rentable");
                JLabel synLabel = new JLabel("Synopsis");

                JTextField txtTitle = new JTextField();          
                JTextField txtGenre = new JTextField();
                JTextField txtDuration = new JTextField();
                JTextField txtActor = new JTextField();
                JTextField txtDirector = new JTextField();
                JTextField txtSynopsis = new JTextField();

                JCheckBox rentCB = new JCheckBox();

                JButton btnAddProg = new JButton("Add Program");

                JList channelList = new JList();
                JList timeList = new JList();

                infoPanel.add(titleLabel);
                infoPanel.add(txtTitle);
                infoPanel.add(genreLabel);
                infoPanel.add(txtGenre);
                infoPanel.add(durationLabel);
                infoPanel.add(txtDuration);
                infoPanel.add(actorLabel);
                infoPanel.add(txtActor);
                infoPanel.add(directorLabel);
                infoPanel.add(txtDirector);
                infoPanel.add(rentableLabel);
                infoPanel.add(rentCB);
                infoPanel.add(synLabel);
                infoPanel.add(txtSynopsis);
                infoPanel.add(btnAddProg);
                infoPanel.add(channelList);
                infoPanel.add(timeList);

                frame.add(mainPanel);
                frame.setVisible(true);

    }

} 
```

它不必与上面显示的模拟布局完全相同，但尽可能相似或至少更用户友好。

我想使用除 GridBagLayout 和 SwingLayout 之外的任何东西。

关于如何改进代码并使其看起来更相似的任何想法？

任何帮助表示赞赏。

布赖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:01:09.050

看看[MigLayout](http://www.miglayout.com/)。它的许可非常具有包容性：

> MigLayout 可免费用于商业和非商业项目，并提供源代码。它在非常免费的 BSD 或 GPL 许可证下获得许可，无论您喜欢哪个

[JNLP 演示应用程序](http://www.migcalendar.com/miglayout/swingdemoapp.jnlp)应该显示很好的示例和相应的源。

此外，尽量避免嵌套逻辑上不相关的组件。随着嵌套程度的增加，对齐、边框和填充变得非常痛苦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T18:24:07.933

GUI 最需要的是：

*   组件之间的空白。两种常见的提供方法是：
    1.  布局的构造函数中提供的布局填充。
    2.  [`EmptyBorder`](http://docs.oracle.com/javase/7/docs/api/javax/swing/border/EmptyBorder.html)向组件或容器添加一个。在很多组件已经有了边框的情况下，最好用a包裹起来，`JPanel`给面板加上边框。
*   约束面板。EG 如果希望将 a 中的一组组件`WEST`“`BorderLayout`推到顶部”，请将它们添加到另一个具有`BorderLayout.NORTH`布局/约束 1st 的面板中。这是我的意思 [的一个例子。](https://stackoverflow.com/a/10065192/418556)

    ![](../Images/34560cd273812e2d98c05bc9b0b2700a.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T17:36:41.543

使用 Eclipse 和[WindowBuilder](http://www.eclipse.org/windowbuilder/)。您可以稍后返回并“手动编码”特定部分，如果您愿意，仍然可以返回到 WindowBuilder。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T07:31:08.513

看看这个示例程序，这是否可以满足您的需求:-)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.TitledBorder;
import javax.swing.table.DefaultTableModel;

public class TVSchedule
{
    private static final int GAP = 5;
    private static TVSchedule tvSchedule;

    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("HOTEL TV SCHEDULE");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setLocationByPlatform(true);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new BorderLayout());

        JPanel centerPanel = new JPanel();
        //centerPanel.setLayout(new FlowLayout(FlowLayout.LEFT, 5, 5));
        centerPanel.setLayout(new GridLayout(0, 4, 5, 5));
        centerPanel.add(createChannelOnePanel());
        centerPanel.add(createChannelTwoPanel());
        centerPanel.add(createListPanel());
        centerPanel.add(createInformationPanel());

        JPanel bottomPanel = new JPanel();
        bottomPanel.setOpaque(true);
        bottomPanel.setBackground(Color.RED.darker());
        bottomPanel.setLayout(new FlowLayout(FlowLayout.LEFT, 5, 5));
        JButton exitButton = new JButton("EXIT");
        bottomPanel.add(exitButton);

        contentPane.add(centerPanel, BorderLayout.CENTER);
        contentPane.add(bottomPanel, BorderLayout.PAGE_END);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setVisible(true);
    }

    private JPanel createChannelOnePanel()
    {
        JPanel panel = new JPanel();
        panel.setLayout(new GridBagLayout());
        panel.setOpaque(true);
        panel.setBackground(Color.DARK_GRAY);
        panel.setBorder(BorderFactory.createEmptyBorder(GAP, GAP, GAP, GAP));
        GridBagConstraints gbc = new GridBagConstraints();

        String[] columnNames = {
                                    "Time",
                                    "Title"
                               }; 
        Object[][] data = {
                            {"01:00","Cowboy and Alchemist."}
                          };
        DefaultTableModel model = new DefaultTableModel(data, columnNames);
        JTable table = new JTable( model )
        {
            //  Returning the Class of each column will allow different
            //  renderers to be used based on Class
            public Class getColumnClass(int column)
            {
                return getValueAt(0, column).getClass();
            }
        };                      

        table.setPreferredScrollableViewportSize(new Dimension(200, 200));
        table.setFillsViewportHeight(true);
        JScrollPane scrollPane = new JScrollPane(table);
        scrollPane.setBorder(BorderFactory.createTitledBorder(
                        BorderFactory.createLineBorder(Color.BLACK, 1)
                        , "Channel 1"
                        , TitledBorder.CENTER
                        , TitledBorder.DEFAULT_POSITION));      
        gbc.weightx = 1.0;
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.gridwidth = 2;
        panel.add(scrollPane, gbc);     

        JButton removeButton = new JButton("Remove Selected");
        gbc.weightx = 1.0;
        gbc.gridx = 0;
        gbc.gridy = 3;
        gbc.gridwidth = 2;
        panel.add(removeButton, gbc);

        return panel;
    }

    private JPanel createChannelTwoPanel()
    {
        JPanel panel = new JPanel();
        panel.setLayout(new GridBagLayout());
        panel.setOpaque(true);
        panel.setBackground(Color.WHITE);
        panel.setBorder(BorderFactory.createEmptyBorder(GAP, GAP, GAP, GAP));
        GridBagConstraints gbc = new GridBagConstraints();

        String[] columnNames = {
                                    "Time",
                                    "Title"
                               }; 
        Object[][] data = {
                            {"02:00","Grey's Anatomy"}
                          };
        DefaultTableModel model = new DefaultTableModel(data, columnNames);
        JTable table = new JTable( model )
        {
            //  Returning the Class of each column will allow different
            //  renderers to be used based on Class
            public Class getColumnClass(int column)
            {
                return getValueAt(0, column).getClass();
            }
        };                      

        table.setPreferredScrollableViewportSize(new Dimension(200, 200));
        table.setFillsViewportHeight(true);
        JScrollPane scrollPane = new JScrollPane(table);
        scrollPane.setBorder(BorderFactory.createTitledBorder(
                        BorderFactory.createLineBorder(Color.BLACK, 1)
                        , "Channel 2"
                        , TitledBorder.CENTER
                        , TitledBorder.DEFAULT_POSITION));      
        gbc.weightx = 1.0;
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.gridwidth = 2;
        panel.add(scrollPane, gbc);     

        JButton removeButton = new JButton("Remove Selected");
        gbc.weightx = 1.0;
        gbc.gridx = 0;
        gbc.gridy = 3;
        gbc.gridwidth = 2;
        panel.add(removeButton, gbc);

        return panel;
    }

    private JPanel createListPanel()
    {       
        JPanel panel = new JPanel();
        panel.setLayout(new GridBagLayout());
        panel.setOpaque(true);
        panel.setBackground(Color.DARK_GRAY);
        panel.setBorder(BorderFactory.createEmptyBorder(GAP, GAP, GAP, GAP));
        GridBagConstraints gbc = new GridBagConstraints();

        String[] columnNames = {
                                    "Genre",
                                    "Title",
                                    "Duration (Hours)"
                               }; 
        Object[][] data = {
                            {"Comedy","C & A", "1.5"}
                          };
        DefaultTableModel model = new DefaultTableModel(data, columnNames);
        JTable table = new JTable( model )
        {
            //  Returning the Class of each column will allow different
            //  renderers to be used based on Class
            public Class getColumnClass(int column)
            {
                return getValueAt(0, column).getClass();
            }
        };                      

        table.setPreferredScrollableViewportSize(new Dimension(200, 200));
        table.setFillsViewportHeight(true);
        JScrollPane scrollPane = new JScrollPane(table);
        scrollPane.setBorder(BorderFactory.createTitledBorder(
                        BorderFactory.createLineBorder(Color.BLACK, 1)
                        , "List"
                        , TitledBorder.CENTER
                        , TitledBorder.DEFAULT_POSITION));
        gbc.weightx = 1.0;
        gbc.anchor = GridBagConstraints.PAGE_START;
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.gridwidth = 2;
        panel.add(scrollPane, gbc); 

        gbc.weightx = 1.0;
        gbc.gridx = 0;
        gbc.gridy = 3;
        gbc.gridwidth = 2;
        panel.add(Box.createRigidArea(new Dimension(100, 30)), gbc);    

        return panel;
    }

    private JPanel createInformationPanel()
    {
        JPanel bottomPanel = new JPanel();
        bottomPanel.setLayout(new GridLayout(0, 1, 2, 2));
        bottomPanel.setBorder(BorderFactory.createTitledBorder(
                        BorderFactory.createLineBorder(Color.BLACK, 1)
                        , "Information"
                        , TitledBorder.LEFT
                        , TitledBorder.DEFAULT_POSITION));

        JPanel panel = new JPanel();
        panel.setOpaque(true);
        panel.setBackground(Color.WHITE);
        panel.setLayout(new GridBagLayout());
        panel.setBorder(BorderFactory.createEmptyBorder(GAP, GAP, GAP, GAP));
        GridBagConstraints gbc = new GridBagConstraints();

        JLabel titleLabel = new JLabel("TITLE : ");
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridx = 0;
        gbc.gridy = 0;
        panel.add(titleLabel, gbc);

        JTextField titleField = new JTextField(10);
        gbc.gridx = 1;
        panel.add(titleField, gbc);

        JLabel genreLabel = new JLabel("GENRE : ");
        gbc.gridx = 0;
        gbc.gridy = 1;
        panel.add(genreLabel, gbc);

        JTextField genreField = new JTextField(10);
        gbc.gridx = 1;
        panel.add(genreField, gbc);

        JLabel durationLabel = new JLabel("DURATION : ");
        gbc.gridx = 0;
        gbc.gridy = 2;
        panel.add(durationLabel, gbc);

        JTextField durationField = new JTextField(10);
        gbc.gridx = 1;
        panel.add(durationField, gbc);

        JLabel actorLabel = new JLabel("ACTOR : ");
        gbc.gridx = 0;
        gbc.gridy = 3;
        panel.add(actorLabel, gbc);

        JTextField actorField = new JTextField(10);
        gbc.gridx = 1;
        panel.add(actorField, gbc);

        JLabel directorLabel = new JLabel("DIRECTOR : ");
        gbc.gridx = 0;
        gbc.gridy = 4;
        panel.add(directorLabel, gbc);

        JTextField directorField = new JTextField(10);
        gbc.gridx = 1;
        panel.add(directorField, gbc);

        JLabel rentLabel = new JLabel("RENTABLE : ");
        gbc.gridx = 0;
        gbc.gridy = 5;
        panel.add(rentLabel, gbc);

        JCheckBox rentCBox = new JCheckBox(" ", false);
        rentCBox.setOpaque(true);
        rentCBox.setBackground(Color.WHITE);
        rentCBox.setHorizontalTextPosition(SwingConstants.LEFT);
        gbc.gridx = 1;
        panel.add(rentCBox, gbc);

        JLabel synopsisLabel = new JLabel("SYNOPSIS : ");
        gbc.gridx = 0;
        gbc.gridy = 6;
        panel.add(synopsisLabel, gbc);

        JTextArea synopsisArea = new JTextArea(10, 5);
        synopsisArea.setBackground(Color.BLUE.darker());
        synopsisArea.setForeground(Color.WHITE);
        synopsisArea.setCaretColor(Color.WHITE);
        gbc.gridx = 1;
        gbc.gridwidth = 2;
        gbc.gridheight = 2;
        panel.add(synopsisArea, gbc);

        JButton addProgramButton = new JButton("Add Program");
        gbc.gridx = 0;
        gbc.gridy = 8;
        gbc.insets = new Insets(5, 5, 5, 5);
        gbc.anchor = GridBagConstraints.PAGE_END;
        gbc.gridwidth = 1;
        gbc.gridheight = 1;
        panel.add(addProgramButton, gbc);

        JSpinner spinner = new JSpinner(new SpinnerNumberModel(00.15, 00.15, 60.00, 00.15));
        gbc.gridx = 2;
        gbc.gridy = 8;      
        panel.add(spinner, gbc);

        bottomPanel.add(panel);
        return bottomPanel;
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                tvSchedule = new TVSchedule();
                tvSchedule.createAndDisplayGUI();
            }
        });
    }
} 
```

我真的不知道你在`JButton`和'JSpinner'之间使用了什么，这就是为什么从来没有在那里添加任何东西，希望你可以自己做。

这是相同的输出：

![酒店电视节目表](../Images/2f47a9c075948fd4e10ab4af4a2a0453.png)

# php - 我的 php if 语句不起作用

> ID：10093562
> 
> 赞同：0
> 
> 时间：2012-04-10T17:31:04.977
> 
> 标签：php, if-statement, header

这是我第一次在这个网站上提问，所以请多多包涵。我从另一个网站获得了一个用于测试互联网连接速度的脚本，并添加了 if else 语句。如果速度超过 500，它将重定向到特定页面。由于某些原因，我无法让它工作。我在标签`ob_start();`之前添加了`<html>`标签，也在标签`ob_end_flush();`之后添加了`</html>`。我在我的身体标签之间添加了下面的代码。

```
$kb=512;
flush();
$time = explode(" ",microtime());
$start = $time[0] + $time[1];

for($x=0;$x<$kb;$x++){
    echo str_pad('', 1024, '');
    flush();
}
$time = explode(" ",microtime());
$finish = $time[0] + $time[1];
$deltat = $finish - $start;
$intspeed = round($kb / $deltat, 0);
echo $intspeed; //just to check if $intspeed has a value

if ($intspeed > 500) {
  header("Location: test.php"); 
  exit();
} else  {
  header('Location: falcons/index.php');
  exit();   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:42:46.313

删除`flush();`呼叫。此外，请确保此代码在 and 之间`ob_start()`，`ob_end_flush()`而不是之前或之后（并且在此代码之前没有输出任何其他内容）。

```
$kb=512;

$time = explode(" ",microtime());
$start = $time[0] + $time[1];

for($x=0;$x<$kb;$x++){
    echo str_pad('', 1024, '');
}
$time = explode(" ",microtime());
$finish = $time[0] + $time[1];
$deltat = $finish - $start;
$intspeed = round($kb / $deltat, 0);
echo $intspeed; //just to check if $intspeed has a value

if ($intspeed > 500) {
  header("Location: test.php"); 
  exit();
} else  {
  header('Location: falcons/index.php');
  exit();   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:34:29.880

如果输出尚未开始，您只能通过 header() 重定向。如果已经有非标头输出（例如在您的 for 循环中），则设置“位置”标头无效。

我建议[`headers_sent()`](http://www.php.net/manual/en/function.headers-sent.php)在设置“位置”标头之前使用，并在某些调试信息或其他已经开始输出的情况下进行后备。

# java - 如何从 Java 类中更改 HTML 文件的文本

> ID：10093564
> 
> 赞同：0
> 
> 时间：2012-04-10T17:31:31.053
> 
> 标签：java, html

是否可以直接从 Java 类编辑 HTML 文件？例如，如果我确切知道要更改哪一行，是否有允许这样做的 Java 方法？如果是这样，那怎么办？感谢您的回复...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:11:05.167

html 文件只是一个文本文件。您可以编辑文本文件，但这通常是通过编辑内存中的版本，然后将编辑后的版本写出来，替换旧版本来完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:55:01.940

我想最简单的方法是在[jsoup](http://jsoup.org/)的帮助下。[在他们的网站上](http://jsoup.org/cookbook/input/load-document-from-file)，您可以找到如何操作的文档

# javascript - 我需要一个示例来说明如何使用 Javascript 计时器来了解用户何时创建了新的 facebook 事件。

> ID：10093565
> 
> 赞同：0
> 
> 时间：2012-04-10T17:31:32.427
> 
> 标签：javascript, facebook-fql

一般来说，我是 facebook 开发和编码的新手。我知道事件对象目前没有实时更新，并且我必须以某种方式弄清楚如何使用 javascript 轮询 facebooks 服务器。在任何地方都有这样的例子吗？我的应用程序依赖于知道何时创建了新事件，以便应用程序可以获取其信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:35:34.063

您可以使用全局 setTimeout() 函数。

# jquery - Jquery Cycle 导航不会出现在 IE7 中

> ID：10093566
> 
> 赞同：1
> 
> 时间：2012-04-10T17:31:37.333
> 
> 标签：jquery, internet-explorer-7, navigation, cycle

我正在使用 jQuery Cycle Plugin 进行幻灯片放映，并且导航显示在我测试过的所有浏览器中，除了 IE7（和 IE6，但我并不担心）。

这是一个示例[http://jsfiddle.net/WVGS3/11/](http://jsfiddle.net/WVGS3/11/)（显然在 IE7 上查看）

当我在 IE7 上查看它时，导航消失了。好像它不喜欢空的`.slide_nav`div。如果我在 div 中键入一些文本`.slide_nav`，导航将与我编写的任何文本一起出现。

这里的例子[http://jsfiddle.net/WVGS3/12/](http://jsfiddle.net/WVGS3/12/)

我将文本放在 span 元素中并设置`text-indent:-9999px`，但这会使所有内容都消失。我用过`display:none`，`display:hidden`但他们的行为很奇怪。

也许我错过了一些东西。

任何人都知道任何可以在这里工作的东西吗？我尝试在父元素和子元素上使用`position:relative`, `z-index:1000`, , 但没有任何效果....`zoom:1`

希望有人可以提供帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:09:36.217

[您必须在 IE 的hasLayout](http://www.satzansatz.de/cssd/onhavinglayout.html)中至少放置一个`&nbsp;`，`div`如下所示

```
<div class="slide_nav">&nbsp;</div> 
```

然后你可以使用

```
$(document).ready(function() {
    $('.slideshow').cycle({
        fx: 'scrollLeft',
        pager: ".slide_nav"
    });
    // Re align
    var ml=parseInt($('.slide_nav').css('margin-left'));
    $('.slide_nav').css('margin-left',(ml-5)+'px');

});​ 
```

在 IE7 中测试，[例如](http://jsfiddle.net/heera/WVGS3/14/). 可能不合适，但可以解决问题。

# jquery - Jquery从右侧加载内容滑入/滑出

> ID：10093569
> 
> 赞同：2
> 
> 时间：2012-04-10T17:31:51.827
> 
> 标签：jquery, ajax

我想要点击菜单项，div 将从右向左滑动并打开关闭选项（滑回右侧）

例如： http: [//www.cortac.com/](http://www.cortac.com/)

任何想法，演示链接等来完成这个？

我发现它接近上面但不会从右向左滑动。

[http://d2o0t5hpnwv4c1.cloudfront.net/011_jQuerySite/sample/index.html](http://d2o0t5hpnwv4c1.cloudfront.net/011_jQuerySite/sample/index.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:56:54.573

我在这里做了一个非常简单的例子：http: [//jsfiddle.net/jaketoolson/ukztv/](http://jsfiddle.net/jaketoolson/ukztv/)

我将面板设置为绝对定位，右侧设置为等于宽度的负数。

```
#page {
position: absolute;  
top: 20%;
right: -400px; 
width: 400px;
} 
```

然后jQuery是一个鼠标悬停（使用点击等）效果，“动画”设置目标css：

```
$('.link').mouseover(function() {
$('#page').animate({'right':'0px'}, 1500);
}).mouseout(function(){
$('#page').animate({'right': '-800px'}, 1500);}); 
```

要让它加载页面，可以通过 AJAX 或其他方法完成。请参阅我目前正在此处构建的示例：http: [//jaketoolson.com/ems/index.php](http://jaketoolson.com/ems/index.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T06:45:37.580

8个月前我问了一个类似的问题，并想出了一个答案......比你问的要复杂一些，但它是我见过的唯一类似的东西......

[具有动态上一个/下一个内容的 jQuery 滑块的最佳方法？](https://stackoverflow.com/questions/7156870/best-approach-for-jquery-slider-with-dynamic-prev-next-content)

# php - Magento - 自定义页面？

> ID：10093574
> 
> 赞同：0
> 
> 时间：2012-04-10T17:32:04.500
> 
> 标签：php, xml, magento

我刚开始使用 Magento，对我来说，那里似乎是一团糟……

我正在寻找编辑我从模板中获得的主页。它看起来很棒，但我在里面取出了一堆无用的静态块，现在我到处都是整体。检查链接：http: [//goo.gl/v5uTx](http://goo.gl/v5uTx)

我似乎没有找到我的实际页面结构在哪里？我进入管理员并在我的主页上找到了这个：

```
 <p>
{{widget type="flexiblewidget/list" column_count="3" limit_count="9"  
if="em_feature_product=1" header="Favorite products" order_by="name asc" 
template="flexiblewidget/featured.phtml"}}
</p> 
```

这基本上是页面的一小部分。

所以问题是，**我在哪里可以找到我的页面内容和结构的其余部分**（即幻灯片、热门商品……），以便我可以尝试重新组织它，使其看起来像一个网站而不是奶酪？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:32:08.203

Magento 与大多数其他 CMS 解决方案不同。您可能习惯于在 CMS 页面中看到原始 HTML，或者至少是其中的一部分。但是，Magento 使用 PHP 在页面上呈现块。它从主题内的 XML 文档中获取指令。如果这是您第一次使用 Magento，最好在您感到沮丧之前查看[这篇文章。](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/0_-_theming_in_magento/designing-for-magento)它将引导您了解一些基础知识。

最有可能的是，滑块和热门商品的 HTML 位于主题目录内的文件中。您的主题目录将位于 app/design/frontend/PACKAGE/THEME/ - 您的 php 和 html 将位于模板文件夹中，XML 指令将位于布局文件夹中。主页与您网站上的许多其他页面一样，都使用主模板来加载网站范围的 HTML 和 CSS。默认情况下，这些主要模板有 4 个：1 列、2 列左侧边栏、2 列右侧边栏和 3 列。这些主要模板可以在“页面”目录下的模板文件夹中找到。如果您打开其中一个模板，您会发现如下所示的一行：

```
<?php echo $this->getChildHtml('content') ?> 
```

这一行向 XML 指令询问名为“content”的块下的任何内容。这很可能是分配滑块的位置。您必须找到定义它的 XML 文件。您可能想熟悉布局文件夹和 Magento 的后备层次结构。看看[这篇文章](http://www.groovecommerce.com/ecommerce-blog/magento/make-your-magento-installation-upgrade-friendly/)。

希望这将帮助您解决您在页面上遇到的问题！

# c++ - 如何重新分配提升 shared_ptr

> ID：10093576
> 
> 赞同：4
> 
> 时间：2012-04-10T17:32:08.430
> 
> 标签：c++, boost, shared-ptr

我有两个 Boost shared_ptr

```
shared_ptr<X> A(new X);
shared_ptr<X> B(new X); 
```

第三个指针最初指向与 A 相同的 X。

```
shared_ptr<X> C = A; 
```

更改 C 使其指向与 B 相同的 X 的正确方法是什么？

```
C = B; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T20:34:03.733

EdChm 是对的。我做了一个小测试程序来明确它。它使用 C++ 11，但可以轻松转置。

```
#include <iostream>
#include <memory>

int main()
{
  std::shared_ptr<int> A(new int(1));//creates a shared pointer pointing to an int. So he underlying int is referenced only once
  std::shared_ptr<int> B(new int(2));//creates another shared pointer pointing to another int (nothing to do with the first one so the underlying int is only referenced once
  std::shared_ptr<int> C;//creating a shared pointer pointing to nothing

  std::cout<<"Number of references for A "<< A.use_count()<<std::endl;
  std::cout<<"A points to "<<*(A.get())<<std::endl;
  std::cout<<"Number of references for B "<< B.use_count()<<std::endl;
  std::cout<<"A points to "<<*(B.get())<<std::endl;
  std::cout<<"Number of references for C "<< C.use_count()<<std::endl;

  std::cout<<"Now we assign A to C"<<std::endl;
  C=A; // now two shared_ptr point to the same object
  std::cout<<"Number of references for A "<< A.use_count()<<std::endl;
  std::cout<<"A points to "<<*(A.get())<<std::endl;
  std::cout<<"Number of references for C "<< C.use_count()<<std::endl;
  std::cout<<"C points to "<<*(C.get())<<std::endl;

  std::cout<<"Number of references for B "<< B.use_count()<<std::endl;
  std::cout<<"B points to "<<*(B.get())<<std::endl;
  return 0;
} 
```

该示例在很大程度上受到此链接的启发。 [http://www.cplusplus.com/reference/memory/shared_ptr/shared_ptr/](http://www.cplusplus.com/reference/memory/shared_ptr/shared_ptr/)

希望对您有所帮助，请随时询问更多详细信息。

# ruby - Heroku 上的 Abiword

> ID：10093577
> 
> 赞同：0
> 
> 时间：2012-04-10T17:32:13.090
> 
> 标签：ruby, heroku, abiword

我正在尝试通过将 abiword 包装在 ruby​​ gem 中来在 heroku 上安装 abiword。

我使用以下命令为 abiword 静态编译了 64 位二进制文​​件

```
$ ./configure --enable-shared=no --enable-static=yes
$ make 
```

然后，我从上面的编译中获取 abiword 二进制文件并将其放在我的 ruby​​ gem 目录结构中并构建它。

我随后将这个 gem 推送到了 github。

现在我尝试在heroku上安装它。

安装工作正常。

当我尝试运行调用 abiword 的代码行时会引发以下错误

```
/app/.bundle/gems/ruby/1.9.1/bundler/gems/abiword-8f24c3c3c8ef/bin/abiword: error while loading shared libraries: libfribidi.so.0: cannot open shared object file: No such file or directory 
```

现在为什么它试图找到一个共享库。如果它没有这个库的静态副本可以使用。

任何想法我可能做错了什么。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T22:29:13.053

不能；不能让它工作。所以我将我所有的代码直接移到了 AWS EC2（绕过 heroku）

# android - 文件或数据库

> ID：10093578
> 
> 赞同：1
> 
> 时间：2012-04-10T17:32:14.517
> 
> 标签：android, sqlite

我有三个表，每个表有 5 列。它们每个可以长到 15 行。为此拥有一个 SQLite 数据库是否有意义，或者一个文件就足够了？我说的是纯粹的性能基础。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T17:35:59.783

我的建议是`Sqlite`，Sqlite 具有可以导航数据的光标，很容易修改数据。

同样的事情`File`很复杂，因为你必须做字符串函数，比如,`indexOf()`等等。`subString()``replace()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T17:35:16.477

您需要任何类型的并发支持吗？如果是这样，SQLite 会有意义，而不是自己构建。

我会支持使用数据库，因为就关系和所存储数据的格式而言，维护数据的完整性可能会更容易。更新表时出错很容易引起注意（例外情况可以很好地防止数据损坏），但是将格式错误的数据写入您自己的格式可能不容易被发现，直到为时已晚。

性能可能应该排在维护有效数据之后。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T17:35:24.657

从性能的角度来看，这无关紧要，但从维护的角度来看，您应该使用 sql 方法，如果有一种众所周知的通用方法，请远离任何神秘的自制方法:)此外，为数据库编写代码而不是为平面文件编写代码应该要快得多。而且，在您可以衡量并发现您有性能问题之前，永远不要优化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T18:13:09.067

我也会明确投票支持 DB 解决方案。除了上述优点之外，无论如何学习都是一件好事 - 而且 - 老实说 - 最后考虑到所有问题，它并不比文件系统解决方案更难或更多工作。

顺便说一句，当时我通过本教程学习了数据库：http: [//developer.android.com/resources/tutorials/notepad/index.html](http://developer.android.com/resources/tutorials/notepad/index.html)

由于其他几个原因，它也非常有用......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T17:37:57.813

如果您还没有 MySQL 数据库并且不需要任何棘手的连接，请使用文件系统。

我做的是 web，而不是 android，但我使用 JavaScript 从文件系统中消费 JSON 清单取得了巨大的成功。削减数据库开销真是太好了，而且文件系统几乎是即时的。

# c# - 在 MVVM 世界中更改 CollectionViewSource 源

> ID：10093579
> 
> 赞同：8
> 
> 时间：2012-04-10T17:32:17.473
> 
> 标签：c#, wpf, data-binding, mvvm, observablecollection

**编辑：**我创建了一个新的 VS2010 WPF 应用程序，只有 3 个文件 MainWindow.xaml、MainWindow.xaml.cs 和 MainWindowViewModel.cs（**如下所列**）。如果有人觉得真的很有帮助，您可以在几秒钟内重现问题（复制/粘贴）。当您运行应用程序时，DataGrid 将显示错误的字符串“OldCollection”。如果将 ItemsSource 绑定更改为 MyCollection，它会显示正确的“NewCollection”。

**完整描述：** 起初我有一个 DataGrid，它的 ItemsSource 绑定到 MyCollection。我有/需要一个将新的 ObservableCollection<> 分配给 MyCollection 的方法 UpdateCollection。将 NotifyPropertyChange 添加到 MyCollection 后，UI 会更新。

接下来有必要引入一个 CollectionViewSource 来启用分组。将 UI 绑定到 MyCollectionView 后，对 UpdateCollection 的调用现在无效。调试器确认 MyCollectionView 始终包含初始 MyCollection。如何让我的 NewCollection 反映在视图中？我尝试过 View.Refresh()、Binding CollectionViewSource 和无数其他策略。

注意：主要是其他人关心对 Collection 项的更改，而不是在不调用 Refresh 的情况下更新视图（分组/排序）。我的问题是我正在为 CollectionViewSource 分配一个全新的集合，并且视图/用户界面永远不会改变。

```
// MainWindow.xaml
<Window x:Class="CollectionView.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <DataGrid Name="grid" ItemsSource="{Binding MyCollectionView}" />
    </Grid>
</Window>

//MainWindow.xaml.cs
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows;

namespace CollectionView
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            DataContext = new MainWindowViewModel();
        }
    }
}

//MainWindowViewModel.cs:
using System;
using System.Collections.Generic;
using System.Linq;
using System.Collections.ObjectModel;
using System.Windows.Data;
using System.ComponentModel;

namespace CollectionView
{
    class MainWindowViewModel : INotifyPropertyChanged
    {
        public MainWindowViewModel()
        {
            MyCollection = new ObservableCollection<MyObject>() { new MyObject() { TestString = "OldCollection" } };

            MyCollectionViewSource = new CollectionViewSource();

            // Bind CollectionViewSource.Source to MyCollection
            Binding MyBind = new Binding() { Source = MyCollection };
            BindingOperations.SetBinding(MyCollectionViewSource, CollectionViewSource.SourceProperty, MyBind);

            // The DataGrid is bound to this ICollectionView
            MyCollectionView = MyCollectionViewSource.View;

            // This assignment here to demonstrate that View/UI does not update to show "NewCollection"
            MyCollection = new ObservableCollection<MyObject>() { new MyObject() { TestString = "NewCollection" } };
        }

        // Collection Property
        // NotifyPropertyChanged added specifically to notify of MyCollection re-assignment
        ObservableCollection<MyObject> _MyCollection;
        public ObservableCollection<MyObject> MyCollection
        {
            get { return _MyCollection; }
            set
            {
                if (value != _MyCollection)
                {
                    _MyCollection = value;
                    NotifyPropertyChanged("MyCollection");
                }
            }
        }

        public CollectionViewSource MyCollectionViewSource { get; private set; }
        public ICollectionView MyCollectionView { get; private set; }

        // Method updates MyCollection itself (Called via ICommand from another ViewModel)
        public void UpdateCollection(ObservableCollection<MyObject> NewCollection)
        {
            MyCollection = NewCollection;
        }

        public event PropertyChangedEventHandler PropertyChanged;

        private void NotifyPropertyChanged(String info)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(info));
            }
        }
    }

    class MyObject
    {
        public string TestString { get; set; }
    }
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T08:03:21.320

我会选择以下两种解决方案之一。

首先，您可以使用`ObservableCollection`并创建一次`ICollectionView`（分组、排序）。`ObservableCollection`您可以使用`.Clear()`和添加新集合中的项目，而不是替换。这具有不破坏分组和排序的额外好处。

第二种方法：每当您更换您的时，`ObservableCollection`您都必须创建一个新 `ICollectionView`的用于排序和分组。

```
 this._view = (ICollectionView)CollectionViewSource.GetDefaultView(this.MyCollection); 
```

如果您使用 DefaultView，您可以简单地绑定到您的集合

```
 <DataGrid Name="grid" ItemsSource="{Binding MyCollection}" /> 
```

你可以扔掉你的 CollectionViewSource 代码绑定的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:39:30.450

问题肯定是您没有将源绑定到您的 MyCollection 属性，您只分配了一次并且它永远不会再次更新。

您应该执行以下操作：

```
MyCollectionViewSource = new CollectionViewSource();
Binding binding = new Binding();
binding.Source = MyCollection;
BindingOperations.SetBinding( MyCollectionViewSource , 
                              CollectionViewSource.SourceProperty, 
                              binding ); 
```

如果没有调整上述内容无法立即工作，我深表歉意 - 这通常是我在 xaml 中设置的类型，因为在那里更容易。

```
<CollectionViewSource Source="{Binding MyCollection}" /> 
```

另请参阅：[如何更改 CollectionView.Source 的绑定？](https://stackoverflow.com/questions/6442320/how-do-i-change-the-binding-of-a-collectionview-source)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T19:54:11.683

绑定不起作用的事实令人难以置信。我在使用 Xceed DataGridCollectionViewSource 时遇到了完全相同的问题 - 但我只是认为这是因为 Xceed 搞砸了。

我的解决方案是在每次替换基础集合时实际创建一个全新的 DataGridCollectionViewSource，并以编程方式重新配置它，然后更新 myDataGrid.Source 属性以指向新的 DataGridCollectionViewSource。该解决方法肯定会起作用，但这完全违背了绑定的目的，这应该是有效的：

```
void MyViewModel_PropertyChanged(object sender, PropertyChangedEventArgs e)
{
    //Xceed DataGridCollectionView are terrible and do not update when the bound table changes, so we need to replace them each change.
   if (e.PropertyName == "MyCollection")
   {
       DataGridCollectionView GridView = new DataGridCollectionView(MyViewModel.MyCollection.DefaultView);
       GridView.SortDescriptions.Add(new SortDescription("DataSetID", ListSortDirection.Ascending));
       uiMyCollectionGrid.ItemsSource = GridView;
   }
} 
```

也许这种蛮力解决方案可以解决您的问题？我理解如果你甚至不想考虑这个，因为它太脏了。

# sql - 查询和添加行

> ID：10093583
> 
> 赞同：0
> 
> 时间：2012-04-10T17:32:35.343
> 
> 标签：sql, oracle11gr2

好的，这是解决我的问题的第二次尝试，对于那些将第二次阅读本文的人，我希望它足够清楚以理解问题。

我正在为报告开发一个查询，问题是在从数据库中检索数据时，该报告应该填充一些不存在的行。为了说明目的，假设我有这些表：

```
Table 1 - Companies

Table 2 - Transactions.

Table 3 - Transaction types. 
```

大多数公司没有所有交易类型的交易的重要细节。尽管报告逻辑需要对所有这些公司进行反演：具有真实货币价值的“真实”公司和其他只有 0 美元的不存在的公司。问题从这里开始，因为交易类型组合在逻辑组中，所以假设一家公司只有 1 笔 type_1 的真实交易，报告应该包含与 type_1 相关的其他类型的“$0”记录，如 type_2、type_3 和 type_4。如果公司有 type_1 和 type_2 的交易，报告应填充来自不同交易类型组等的其他一些交易类型。

这里的问题是它应该执行的环境必须是纯 sql（作为一个 java 程序员，我知道查询数据库、将数据加载到 array[][] 并添加缺少的事务类型是多么容易）——但是查询应该在 plsql 批处理中的 UNIX 上运行，因此它应该是单个（或连接）选择。

提前致谢。任何帮助或想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:05:15.523

听起来您只需要某种外部联接。我猜你的表是如何相互关联的，但看起来你想要类似的东西

```
SELECT c_typ_cross_join.company_name, 
       c_typ_cross_join.transaction_type, 
       nvl( sum( t.transaction_amount ), 0 ) total_amt
  FROM (SELECT c.company_name,
               typ.transaction_type
          FROM companies c
               FULL OUTER JOIN transaction_type typ) c_typ_cross_join
       LEFT OUTER JOIN transactions t ON (    c_typ_cross_join.company_id       = t.company_id
                                          AND c_typ_cross_join.transaction_type = t.transaction_typ)
 GROUP BY c_typ_cross_join.company_name, 
          c_typ_cross_join.transaction_type 
```

这应该为每个公司为每个交易类型和相关交易的总和生成一行（如果公司和交易类型的组合没有交易，则为 0）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:04:52.933

您可以使用两个子查询，一个是根据公司现有类型查找每个公司的所有交易，第二个是查找总数。

```
SELECT companies.id, all_transactions.transaction, COALESCE(sums.total_amount, 0)
FROM companies
JOIN (SELECT ct.companyid, t.transaction
    FROM transactions ct
    JOIN transactions t ON t.transactiontype = ct.transactiontype
    GROUP BY ct.companyid, t.transaction) all_transactions ON all_transactions.companyid = companies.companyid
LEFT JOIN (SELECT ct.companyid, SUM(t.amount) as total_amount
    FROM transactions ct
    GROUP BY ct.companyid) sums ON sums.companyid = companies.companyid 
```

# validation - 如何验证触发器中的字段类型？

> ID：10093584
> 
> 赞同：1
> 
> 时间：2012-04-10T17:32:38.067
> 
> 标签：validation, triggers, salesforce, apex-code

我有一个触发的触发器`on Lead (after update)`。我们有一个名为 Finance 的对象，它存储有关每个潜在客户的一些财务信息。当触发器触发时，它将对某些字段的任何更新推送到财务记录中。我写的东西很好用，除非用户决定输入无效的电子邮件，或者记录所有者处于非活动状态。抛出了一个 APEX 错误，对于大多数用户来说，这看起来像是胡言乱语，有点吓人。

我想做的是在我的触发器中检查电子邮件是否有效，这样用户就不会收到令人困惑的错误。如何检查字段的内容是否为有效类型？我想远离使用某种正则表达式，因为我想将此方法应用于其他几个字段，并且我宁愿不维护正则表达式列表。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:49:41.883

您可以在触发器中捕获验证错误：

```
try {
    upsert financeRecord;
} catch (Exception e) {
    // do whatever you'd like to on an exception here
} 
```

# stack-overflow - 带有htmlagility包的stackoverflow异常

> ID：10093589
> 
> 赞同：1
> 
> 时间：2012-04-10T17:32:51.143
> 
> 标签：stack-overflow, html-agility-pack

我正在使用 htmlagilitypack 来解析 xml 文档。我使用它将字符串加载为 htmldocument，然后使用 xmltextreader 进行解析。我偶尔会在 htmlagility.dll 上得到一个未处理的 stackoverflow 异常。具体线路是

```
internal Dictionary<string, Htmlattribute> Hashitems = new 
                            Dictionary<string, HtmlAttribute>() 
```

编辑：

```
Try
            Dim hdoc = New HtmlAgilityPack.HtmlDocument()
            hdoc.LoadHtml(xmlsnippet)
            Dim nreader As XmlTextReader = New 
                         XmlTextReader(New StringReader(xmlsnippet))
            Dim ncount As Integer = 0

            While nreader.Read
                If Not nreader.Name = "" Then
                    ncount += 1
                    If ncount = 18 Then
                        Exit While
                    End If
                    num += 1
                    nodelist.Add(nreader.Name)
                    If nreader.Name = "id" Then
                        statid = nreader.ReadInnerXml
                    End If
                    If nreader.Name = "published" Then
                        contentDate = nreader.ReadInnerXml
                        contentDate = Regex.Replace(contentDate, "T", " ")
                        contentDate = Regex.Replace(contentDate, "\+", " ")
                        contentDate = contentDate.Replace("Z", "")
                    End If
                    If nreader.Name = "summary" Then
                        ctext = nreader.ReadInnerXml
                    End If
                    If nreader.Name = "title" Then
                        csubject = nreader.ReadInnerXml
                        If csubject.Contains("posted") Then
                            template = csubject
                            author = Regex.Replace(template, "posted.*", "")
                        End If
                        If csubject.Contains("Keyword -") Then
                          Dim tip As String = csubject
                            searchterm = 
                            Regex.Replace(csubject, "xxxxxx.*xxxxxx.*xxxx.*-", "")
                            searchterm = 
                           Regex.Replace(searchterm, "xxxxx.*xxxxxx.*Search.*-", "")
                            Trim(searchterm)
                        End If
                    End If
                End If
            End While

            Dim mreader As XmlTextReader = 
                        New XmlTextReader(New StringReader(xmlsnippet))
            Dim mcount As Integer = 0

            While mreader.Read
                If Not mreader.Name = "" Then
                    mcount += 1
                    If mcount > 15 Then
                        If mreader.Name = "uri" Then
                            authorUri = mreader.ReadInnerXml
                            Trim(authorUri)
                            If authorUri = "http://www.xxxxxxxx.com/" Then
                                authorUri = ""
                            End If
                        End If
                        If mreader.Name = "name" Then
                            author = mreader.ReadInnerXml
                            If author = "xxxxxx" Then
                                author = ""
                            End If
                        End If
                        If mreader.Name = "content" Then
                            htext = mreader.ReadInnerXml
                        End If
                        If mreader.Name = "link" Then
                            Dim address As String
                            address = mreader.ReadOuterXml
                            If address.Contains("related") Then
                                Dim regex12 As Regex =
            New Regex("<link.*rel.*href=""(?<Link>.*?)"".*/>", RegexOptions.IgnoreCase)
                                Dim m12 As Match = regex12.Match(address)
                                himage = m12.Groups("Link").Value
                            ElseIf address.Contains("alternate") Then
                                Dim regex13 As Regex = 
           New Regex("<link.*rel.*href=""(?<Link>.*?)"".*/>", RegexOptions.IgnoreCase)
                                Dim m13 As Match = regex13.Match(address)
                                authorUri = m13.Groups("Link").Value
                            End If
                        End If
                        If mreader.Name = "subtitle" Then
                            hsubtitle = mreader.ReadInnerXml
                        End If
                    End If
                End If
            End While

        Catch ex As Exception
            appLogs.constructLog(ex.Message.ToString, True, True)
            Exit Sub
        End Try 
```

事实上，不同的行会发生不同的 stackoverflow 异常错误，但相同的错误仅在使用 htmlagilitypack 时发生。我在另一种方法中尝试使用 xmldocument、xpathnavigator 解析 xml，除非我得到一些错误的 xml，否则它工作正常，然后我使用这个方法。我已经设置了异常捕获，只是将错误的 xml 移动到一个文件夹，然后退出此方法，但我无法捕获这些异常，或者我可以吗？

错误显示的另一行：

```
public string Name
{
   get
   {
     if (_name == null)
     {
       Name = _ownerdocument.Text.Substring(_namestartindex, _namelength);
     }
      return _name != null ? _name.ToLower() : string.Empty; 
```

在文件 HtmlNode.cs 中上述代码段的最后一行。调用堆栈窗口顶部显示为

```
HtmlAgilityPack.dll!HtmlAgilityPack.HtmlNode.Name.get() Line 432 + 0x21 bytes 
```

# asp.net - 如何找到基础设施网络导航器节点的子节点？

> ID：10093591
> 
> 赞同：0
> 
> 时间：2012-04-10T17:33:04.610
> 
> 标签：asp.net, vb.net, treeview, infragistics

我需要在 Infragistics 树视图（WebNavigator）中找到特定节点的所有子节点。可以使用可用属性获取 parent()。但我需要孩子。我如何访问该特定节点的子节点。我正在使用带有 VB.Net 的 asp.net 2.0。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:05:09.170

假设您有对要获取子节点的节点的引用。在服务器上，您可以从 Node 公开的[Nodes](http://help.infragistics.com/NetAdvantage/ASPNET/2011.1/CLR4.0/?page=Infragistics4.WebUI.UltraWebNavigator.v11.1~Infragistics.WebUI.UltraWebNavigator.Node~Nodes.html)集合中访问它们。

如果您希望在 JavaScript 中执行此操作，则可以使用[getChildNodes](http://help.infragistics.com/NetAdvantage/ASPNET/2011.1/CLR4.0/?page=WebTree_Node_Object_CSOM.html)方法。

# ssas - 我应该将所有外键从主事实表复制到其他相关表吗？

> ID：10093592
> 
> 赞同：1
> 
> 时间：2012-04-10T17:33:23.800
> 
> 标签：ssas, data-warehouse, cube

我有一个主事实表，其中包含大约 10 个外键。现在我有其他 4 个事实表，它们有 N:1 关系连接到主事实表。问题是，我应该将所有外键复制到这 4 个事实表，还是应该在 SSAS 多维数据集处理期间运行时加入主事实表？

有什么好处和坏处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T05:17:51.840

如果性能是您的目标并且空间不是问题，并且您将在不参考父表的情况下从子事实表进行报告，那么当然，将 FK 添加到其他 FACT 表中，不会丢失任何内容，并且可能会获得一些速度。

但是，如果您在查询相关表时始终包含父事实表，那么没有意义（因为您总是在进行连接并产生这样做的成本）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:41:28.213

似乎我无法在评论中添加换行符。所以我在这里留下评论。
当然。主事实表是
FactTable(PKey, FKey1,FKey2,FKey3,FKey4, Value)
相关事实表如
FactTable1(PKey, FactTable.PKey, ErrorCounter)
FactTable2(PKey, FactTable.PKey, EventCounter)

问题是，我应该将 FactTable1 或 FactTable2 更改为如下结构：
FactTable1(PKey, FactTable.PKey,FactTable.FKey1,FactTable.FKey2,FactTable.FKey3,FactTable.FKey4, ErrorCounter)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:50:11.760

出于什么原因，您希望将所有内容放在一个事实表中？它们在 SSAS 中如何作为度量/组关联。

您是否像现在这样遇到性能问题？如果在单独的表中处理多维数据集需要 5 秒以上，并且需要 5 分钟的 ETL 将其全部加载到一个表中，那么保持原样会更明智。如果是另一种方式，也许将它们全部放在一个事实表中会很好。

如何在 SSAS 中使用 Dim 和 Fact 之间的关系对多维数据集进行建模，不一定必须与关系数据库中的表相互关联的方式相同。

# java - 我在哪里可以找到官方的 Java 编码/样式标准？

> ID：10093596
> 
> 赞同：11
> 
> 时间：2012-04-10T17:33:41.810
> 
> 标签：java, coding-style, standards, checkstyle

我为 Eclipse 使用 CheckStyle 插件，它做得很好。我想知道 Sun/Oracle 是否有官方的代码/样式标准（应该有！）...我发现的那些已经过时了，它们甚至不包括任何 Java 1.6 特定的语法等等...

这是我到目前为止发现的：

[http://developers.sun.com/sunstudio/products/archive/whitepapers/java-style.pdf](http://developers.sun.com/sunstudio/products/archive/whitepapers/java-style.pdf)（最后修改于 2000 年）

[http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html) （最后修改于 1999 年 - [CheckStyle 网站](http://checkstyle.sourceforge.net)引用此）

我知道在某种程度上大多数 Java 语法没有太大变化，但你会认为它不会超过 10 年！！！有什么想法可以在哪里找到更新版本，或者是否有任何我找不到的？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T17:41:03.670

尝试查看`-Xlint`编译器标志以`javac`进行程序检查（如果这是您的问题）。它会为您检查大部分内容。

另外，拥有超过 10 年的代码样式文档有什么问题？这意味着该语言相当稳定，旧代码看起来很像新代码，使维护更容易。该库可能已经扩展，但大部分语法是相同的。您的第二个链接是我的搜索返回的内容，看起来非常全面。

编辑：如果您想了解有关新 Java 语法的详细信息，请查看[Java Specifications](http://docs.oracle.com/javase/specs/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-10T22:39:06.627

据我所知，内部 Sun 编码标准文件从未正式更新为包含包含语言更改的约定，例如泛型、注释或现在（在 JDK 8 中）Lambda 等。

我个人一直使用从JDK本身派生的经验风格，即如果我的代码看起来不像JDK代码，那么我没有遵循编码实践。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-17T00:04:51.437

自从甲骨文重组了他们的网站后，上面的链接现在已经失效了。

[http://web.archive.org/web/20090911103851/http://java.sun.com/docs/codeconv/html/CodeConvTOC.doc.html](http://web.archive.org/web/20090911103851/http://java.sun.com/docs/codeconv/html/CodeConvTOC.doc.html)

# java - Java中的泛型声明差异

> ID：10093597
> 
> 赞同：3
> 
> 时间：2012-04-10T17:33:42.813
> 
> 标签：java, generics

```
 List<String> v = new ArrayList<String>(); 
```

我了解泛型可以帮助您声明 ArrayList() 具有字符串类型的对象。我的问题是以下与上述有何不同？

```
 List<String> v = new ArrayList(); 
```

或以下与其他不同的

```
List v = new ArrayList<String>(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T17:46:21.250

```
List<String> v = new ArrayList(); 
```

这个在功能上并没有什么不同。右侧的类型参数实际上并没有做任何事情。它被用作风格问题并避免使用 Raw 类型，这被认为是编程错误。事实上，在 Java 7 中它已得到增强，因此您可以这样做：`List<String> v = new ArrayList<>();`而不必在右侧重复自己。

```
List v = new ArrayList<String>(); 
```

没有类型参数的列表称为原始类型。在使用泛型的新代码中声明原始类型通常被认为是编程错误。基本上，当您以这种方式声明它时，根本不会进行类型检查，您可以将任何内容放入该列表中。

Java 泛型是一种编译时检查。因此，重要的是编译时引用的类型。如果您的引用是 Raw 类型`List`，那么您在右侧声明的内容无关紧要，这就是编译器将检查的内容。

`List<String>` 并不是真正的“具有字符串的列表”。这是一个“我已经要求编译器返回错误和/或警告我的列表，如果我在其中放入了不是字符串的内容。如果您忽略编译器警告，那么完全有可能在其中获取那些不是字符串的东西” t 字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:41:23.257

```
public static void main(String[] args) throws Exception {
    List<String> list1 = new ArrayList<String>();
    List<String> list2 = new ArrayList(); //This is equivalent to list1 but with compilation warning
    List list3 = new ArrayList<Integer>(); //This is equivalent to list3 = new ArrayList<Object>()
    //list1.add(new Object()); //does not compile
    //list2.add(new Object()); //does not compile
    list3.add(new Object()); //this is fine
    list1 = list3; //ok, but
    System.out.println(list3.get(0)); // this is fine
    System.out.println(list1.get(0)); //Runtime error: ClassCastException
    //List<Object> list5 = list1; //does not compile        
    List<Object> list5 = list3; //ok
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T17:44:03.623

```
List v = new ArrayList(); 
```

它在 java 5 声明列表的方式之前。

```
List<String> v = new ArrayList<String>(); 
```

它使用 java 5 中引入的泛型。它增加了编译时类型安全性。

```
List<String> v = new ArrayList<>(); 
```

只是 java 7 中引入的优化。它只是通过维护类型安全来简化代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T17:37:58.840

在第一种和第三种情况（`new ArrayList<String>()`）中，您实例化一个`ArrayList`可以容纳`String`实例的

在第二种情况下（`new ArrayList()`），您实例化一个`ArrayList`可以容纳`Object`实例的实例（即任何类型的实例——甚至混合匹配）

在第一种和第二种情况（`ArrayList<String> v`）中，您声明一个`ArrayList`可以容纳实例的`String`实例

在第三种情况 ( `ArrayList v`) 中，您声明了一个`ArrayList`可以容纳`Object`.

第二种情况的问题在于，如果您要获得“原始” `ArrayList`（例如实例化的），那么理论上它可以容纳任何东西；不仅仅是`String`实例，这是声明的用户所期望的。

同样，在第三种情况下，您创建了一个`ArrayList`应该包含`String`s 的对象，但声明的用户不知道这一点，并且可能会尝试将其他对象实例放入其中

注意：当然在后台，在JVM中，泛型类型信息丢失了，所以在执行方面没有区别，但是为了编程类型安全，编译器会标记错误的使用。这样，就不需要动态检查/确保放入/离开列表的对象的类型——你可以假设它们是正确的类型，因为编译器确保了这一点

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T17:38:18.143

这些都可以编译，并且都是有效的。第二种情况可能只会引发警告 - 由于`List<String>`. 在第三种情况下，您会遇到相反的问题。您可以添加不是字符串的东西，但结果可能会遇到运行时异常。

# google-app-engine - 使用 GAE JAVA 提供 HTML 内容

> ID：10093601
> 
> 赞同：0
> 
> 时间：2012-04-10T17:33:59.720
> 
> 标签：google-app-engine, jersey, velocity

我正在使用带有 Jersey 的 GAE 来提供 RESTful 服务。提供 HTML 内容的推荐方式是什么。我用 Velocity 尝试了 JSP 和 HttpServlet。发现 Servlet 的速度非常适合我的要求。但由于我使用的是泽西岛，我想知道是否应该通过球衣使用发球速度模板？

或者，也许有人做出了不同的选择，可以分享他们的经验。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:15:12.137

Jersey 并没有真正内置任何类型的 HTML 模板解决方案，它并不是真正的意思，但它作为 Ajax 服务后端非常好。Velocity 或只是普通的旧 jsp 页面是提供 HTML 内容的好选择。彼得上面给出的链接是两者如何协同工作的一个很好的例子。您还可以使用 jersey 作为控制器层并将响应转发到您的 jsp 页面。

# c# - 如何在 C# 中单击带有 selenium webdriver 的 javascript 确认对话框

> ID：10093604
> 
> 赞同：5
> 
> 时间：2012-04-10T17:34:21.147
> 
> 标签：c#, javascript, asp.net, visual-studio-2010, selenium

我正在用 C# 编写 selenium 代码以与表单交互

这是提交按钮：

```
<input type="submit" value="Submit" onclick="return confirm('Submit?');" class="SubmitButton"> 
```

这是我单击提交按钮的 Selenium 代码。

```
IAlert alert = driver.SwitchTo().Alert();
alert.Accept(); 
```

然而，当我这样做时，没有单击“确定”按钮。相反，对话框消失了，表单就像提交输入从未被点击过一样。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-08T06:46:43.857

我不知道为什么你的代码不工作（我是特定版本的），它对我来说工作正常。

```
IAlert alert = driver.SwitchTo().Alert();
alert.Accept(); 
```

任何方式，你也可以这样做，

```
SendKeys.SendWait("{ENTER}"); 
```

但在执行此操作之前，请确保在您的项目引用中添加“ **System.Windows.Forms.dll** ”，并确保您的应用程序在运行时处于活动状态，这意味着当弹出窗口出现时不要点击其他窗口并且不要让您的计算机睡觉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:37:42.637

它很丑但是......我做什么我强制输入键以发出警报并确认

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T12:14:22.647

如果对话框从屏幕上消失。这意味着警报正在被抑制。您可以使用以下代码：

```
DesiredCapabilities ieCapabilities = DesiredCapabilities.internetExplorer();

ieCapabilities.setCapability("unexpectedAlertBehaviour", "ignore");

WebDriver driver = new InternetExplorerDriver(ieCapabilities); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-15T10:17:59.380

只是想补充一点`IAlert alert = driver.SwitchTo().Alert();`，至少在 InternetExplorerWebDriver 中不起作用，这可能是因为 js cofirm alert 一旦启动就会阻止一切，你甚至无法在 c# 中执行下一行代码，这很奇怪。

我必须做的是在一个单独的线程中实际执行确认弹出窗口以释放 c# 后端中的控制，以便可以执行下一行代码，并且还必须在发送密钥之前和之前执行 Thread.Sleep(1000) make确定 js 仍然没有阻塞

所以我的代码看起来像这样：

```
public class MyThread
        {
            public IWebDriver driver;
            public NgWebElement element;

            public MyThread(IWebDriver _driver, NgWebElement _el)
            {
                driver = _driver;
                element= _el;

            }

            public void RunMe()
            {
                AsyncJavaScriptExecutor asyncJavaScriptExecutor = new AsyncJavaScriptExecutor(driver as IJavaScriptExecutor);

                asyncJavaScriptExecutor.ExecuteScript("arguments[0].click(); callback();", new object[] { element });
            }
        } 
```

然后在测试或页面对象模型中

```
MyThread mthread = new MyThread(_driver, element);
            Thread oThread = new Thread(new ThreadStart(mthread.RunMe));
            oThread.Start();

            while (!oThread.IsAlive){}

            //need to sleep beore and afer sending keys to makes sure js is not blicking events
            Thread.Sleep(1000);

            oThread.Abort();

            SendKeys.SendWait("{ENTER}");

            Thread.Sleep(1000); 
```

# php - 多行和多列复选框php

> ID：10093607
> 
> 赞同：0
> 
> 时间：2012-04-10T17:34:36.510
> 
> 标签：php

目前我已经制作了一组基于数据库的复选框

看起来像

```
 Week 1        Week 2       Week 3       Week 4  .....
Student 1        []           []           []            []
Student 2        []            []          []            []
Student 3        []            []          []            [] 
Student 4        []            []          []            []
..... 
```

[] 代表复选框

我如何获得用户勾选的内容？我`attendance_list[]`用作复选框的名称，但是当勾选一个时，它会为所有用户返回值。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:54:36.130

我想看看你的代码，如果可以的话。我现在会猜测答案。

当您使用 admission_list[] 作为名称时，PHP 会自动在 POST 中为每个复选框分配一个不同的字段，作为 POST 返回中的一个数组。

如果要区分学生，可以在 HTML 中通过将 student_1[(#week)] 指定为名称并在选中时将 'Y' 作为值来执行此操作。在服务器端，通过学生的 POST 并收集所有值为“Y”的键。默认情况下它应该在那里，未经检查的那些不会通过，但我之前遇到过奇怪的行为。

Josh 更进一步，提供了一个多维数组。如果您对多维数组排序感到满意，这将为您提供所需的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T17:46:09.840

您应该使用**多维数组**来表示学生及其出勤率。

例如，

```
<!-- Student 1, Week 1 to 4 -->
<input type='checkbox' name='attendance_list[1][1]' />
<input type='checkbox' name='attendance_list[1][2]' />
<input type='checkbox' name='attendance_list[1][3]' />
<input type='checkbox' name='attendance_list[1][4]' />

<!-- Student 2, Week 1 to 4 -->
<input type='checkbox' name='attendance_list[2][1]' />
<input type='checkbox' name='attendance_list[2][2]' />
<input type='checkbox' name='attendance_list[2][3]' />
<input type='checkbox' name='attendance_list[2][4]' />

<!-- And, so on.. --> 
```

服务器端，您将获得一组已检查的元素。使用数组的索引，您可以确定哪个学生在几周内出勤。

如果上述所有复选框都被选中，您的数组将如下所示：

```
Array
(
    [attendance_list] => Array
        (
            [1] => Array
                (
                    [1] => on
                    [2] => on
                    [3] => on
                    [4] => on
                )

            [2] => Array
                (
                    [1] => on
                    [2] => on
                    [3] => on
                    [4] => on
                )

        )

) 
```

这表明学生 1 和学生 2 整整 4 周都在上课。

# c# - 将列表添加到 c# TreeView

> ID：10093609
> 
> 赞同：0
> 
> 时间：2012-04-10T17:34:39.927
> 
> 标签：c#, wpf, treeview

我有一个对象 MyResult，其中包含一个列表“List MyItems”。

我想将此添加到 ac# WPF TreeView。

最好的方法是什么？

是否有分步教程？因为我对所有的 MVVM 类等感到困惑。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:48:43.067

我假设您列表中的对象有某种列表。如果是这样的话，你应该看看使用[分层](http://msdn.microsoft.com/en-us/library/system.windows.hierarchicaldatatemplate.aspx)数据模板。

一个简单的例子可能如下所示。这是来自我与 radtreeview 一起使用的段，但它应该工作相同。

```
 <!-- xaml -->
 <UserControl.Resources>

            <Style x:Key="_treeViewItemStyle" TargetType="telerik:RadTreeViewItem">
                <Setter Property="Visibility" Value="{Binding IsVisible, Converter={StaticResource VisibilityConverter}}" />
            <Setter Property="IsEnabled" Value="{Binding IsEnabled}"/>
            <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}"/>
            <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}"/>
            <Setter Property="HorizontalAlignment" Value="Left"/>
        </Style>

        <UI:HierarchicalDataTemplate x:Key="_treeViewTemplate" 
                          ItemsSource="{Binding NodeItems}"
                                          >

                <TextBlock Margin="3,0,0,0" Text="{Binding Header}">
                </TextBlock>

        </UI:HierarchicalDataTemplate>

    </UserControl.Resources>

    <telerik:RadTreeView x:Name="_pageNavigator" ItemsSource="{Binding InspNavList}" ItemDoubleClick="SendFocusToPage" SelectedItem="{Binding SelectedNavItem, Mode=TwoWay}" ItemTemplate="{StaticResource _treeViewTemplate}" ItemContainerStyle="{StaticResource _treeViewItemStyle}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:48:50.310

您可以使用

> [treeview.ItemsSource](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemssource.aspx) = 我的列表。

[这](http://www.codeproject.com/Articles/26288/Simplifying-the-WPF-TreeView-by-Using-the-ViewMode)是一个使用 MVVM 的教程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T17:50:38.060

做事没有最好的方法。嗯，实际上有，但是你需要更多关于系统本身和当前情况的数据（以及一些深刻的知识）来了解做事的最佳方式。好吧，把它放在一边。

如果您想使用绑定，可以执行以下操作：

一个。在您的页面/窗口/用户控件中设置 DataContext 属性以指向您的对象 (MyResult)。

湾。在您的 XAML 文件中，使用以下代码段将 treeView 项目绑定到该列表：

```
 <TreeView ItemsSource={Binding MyItems}>
     ....
  </TreeView> 
```

C。享受结果。

但是，您需要考虑几件事情： 1\. 您应该为 MyItems 对象实现 DataTemplate。默认实现只会将 ToString() 结果放入树视图中。2\. 如果你想使用分层数据（意思是有层次的数据），你应该实现 HierarchicalDataTemplate 并指出从哪里获取树中每个节点的子节点。3\. 您应该考虑使用 ObservableCollection 进行正确绑定——这样每次添加/删除列表中的项目都会调用 UI 中的更改。

这里有几个链接可以帮助您入门：[第一](http://www.codeproject.com/Articles/26288/Simplifying-the-WPF-TreeView-by-Using-the-ViewMode)、[第二](http://edgewaters.blogspot.com/2008/08/binding-wpf-treeview-to_08.html)、[第三](http://blogs.msdn.com/b/chkoenig/archive/2008/05/24/hierarchical-databinding-in-wpf.aspx)。

# assembly - LC3中的字符串反转

> ID：10093610
> 
> 赞同：0
> 
> 时间：2012-04-10T17:34:43.767
> 
> 标签：assembly, lc3

我需要使用 lc3 编写一个程序，该程序接受用户输入，然后向前、向后显示输入，然后告诉你输入多长时间。我完全不知道如何做到这一点，并且到处搜索，找不到任何可以帮助我的东西。我可以接受用户输入，但我不知道如何存储它或如何反转它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:28:22.377

我不会为你做功课，但我会给你一些指点。

[http://ftp.csci.csusb.edu/georgiou/lab/lab.pdf](http://ftp.csci.csusb.edu/georgiou/lab/lab.pdf)上的 PDF有一章是关于在 LC-3 中处理字符串的。这将向您展示如何存储字符串并输出它。有几种方法可以反转字符串。该 PDF 显示了一种使用堆栈的方式（推送和弹出指令）。

# php - 以对象结束，我该如何处理？

> ID：10093611
> 
> 赞同：1
> 
> 时间：2012-04-10T17:34:58.830
> 
> 标签：php, arrays, codeigniter, object, doctrine

在[这里](https://stackoverflow.com/questions/10092771/mvc-fundamentals-passing-work-along-to-the-view)解决了我的部分问题后，我意识到我可以将数据放入视图中，但是我遇到了另一个问题。

（控制器）

```
$this->load->model('testing/test_v_to_m_model');
$data['mydata'] = $this->test_v_to_m_model->display_character_info();
$this->load->view('testing/test_v_to_m_view', $data); 
```

（模型）

```
$query = $this->doctrine->em->createQuery("select u from ORM\Dynasties2\Characters u");
return $query->getResult(); 
```

（看法）

```
foreach ($mydata as $key => $row) {
   print_r($row);
} 
```

这将返回如下输出：

> ORM\Dynasties2\Characters 对象 ( [id:ORM\Dynasties2\Characters:private] => 76 [name:ORM\Dynasties2\Characters:private] => Gwayn [whichFamily:ORM\Dynasties2\Characters:private] => 12 [出生日期：ORM\Dynasties2\Characters:private] => -467 [deathDate:ORM\Dynasties2\Characters:private] => -6 [marriedTo:ORM\Dynasties2\Characters:private] => 77 [marriedDate:ORM\Dynasties2\ Characters:private] => -304 [marriageCode:ORM\Dynasties2\Characters:private] => [religion:ORM\Dynasties2\Characters:private] => 0 [isFemale:ORM\Dynasties2\Characters:private] => 0 [ betrothedTo:ORM\Dynasties2\Characters:private] => [fathersId:ORM\Dynasties2\Characters:private] => 0 [successionOrder:ORM\Dynasties2\Characters:private] => 0 [isPregnant:ORM\Dynasties2\Characters:private ] => [pregnantTurnsLeft:ORM\Dynasties2\Characters:private] =>[marriedOutOfFamily:ORM\Dynasties2\Characters:private] => [bornMatrilineal:ORM\Dynasties2\Characters:private] => )

所以......我只是不知道如何处理这个 - 我尝试了一个嵌套的 foreach 来回显数据并且无法让它工作。我希望这是因为这是一个*Object*，而不是*Array*，对吗？

1.  我究竟如何访问/操作这些字段？

2.  我可以在我的 Doctrine2/CodeIgniter2 模型中使用不同的代码来为数据提供更简单的字段名称 - 就像相当于 sql AS 的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:43:04.130

您应该能够使用指针访问对象，如下所示：

```
foreach ($mydata as $key => $row) {
   echo($row->id);
   echo($row->name);
} 
```

[stdClass](http://php.net/manual/en/language.types.object.php)是 php 的通用空类。这是一个很好的使用教程：http: [//krisjordan.com/dynamic-properties-in-php-with-stdclass](http://krisjordan.com/dynamic-properties-in-php-with-stdclass)

编辑：

尝试使用访问器：

```
echo($row->getId()); 
```

# python - 优化代码以找到可被 1-20 之间的所有整数整除的最小数

> ID：10093613
> 
> 赞同：1
> 
> 时间：2012-04-10T17:35:01.590
> 
> 标签：python, math, divide

我目前正在尝试解决问题“可以被 1 到 20 的所有数字整除的最小正数是多少？”

到目前为止，我已经编写了一些似乎可行的代码，但需要很长时间。此外，我不得不在 if 中使用大量的“和”语句，这看起来既不高效也不专业。

我能做些什么来优化这段代码并让它更整洁？

```
number = 1
result = 0

def divide(candidate):
    if candidate % 2 == 0 and candidate % 3 == 0 and candidate % 4 == 0 and candidate % 5 == 0 and candidate % 6 == 0 and candidate % 7 == 0 and candidate % 8 == 0 and candidate % 9 == 0 and candidate % 10 == 0 and candidate % 11 == 0 and candidate % 12 == 0 and candidate % 13 == 0 and candidate % 14 == 0 and candidate % 15 == 0 and candidate % 16 == 0 and candidate % 17 == 0 and candidate % 18 == 0 and candidate % 19 == 0 and candidate % 20 == 0:
        global result
        result = 1
        return 1

    else:
       global number
        result = 0
        number = number + 1
        return 0

while result == 0:
divide(number)

print "The lowest number divisible by all integers between 1-20 is:", number 
```

澄清一下，这不是家庭作业，我正在自学 Python，并且正在尝试一些 ProjectEuler 问题作为其中的一部分。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T17:40:52.990

您的问题可以在没有计算机帮助的情况下轻松解决，因此优化版本将简单地打印答案。很难说出您认为可以接受的优化量。

以下是如何在没有计算机的情况下解决这个问题。能被 1 到 20 的所有数整除的最小数必须能被这些数中出现的所有素数整除。另一方面，如果我们有一个数可以被这个范围内的所有素数整除，那么它将可以被从 1 到 20 的所有数整除。由于具有不同基数的素数是互质的，因此所有最高素数的乘积这个范围内的每个素数都是答案。所以这里是优化的代码：

```
print 2**4 * 3**2 * 5 * 7 * 11 * 13 * 17 * 19 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T17:38:23.970

您可以从消除作为先前数字的因素的数字开始。所有能被 4 整除的数字都能被 2 整除。所有能被 10 整除的数字都能被 5 整除，所有能被 9 整除的数字都能被 3 整除，以此类推。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T17:38:15.227

这里一个非常简单但非常有效的方法是仅使用**素数**及其幂。为什么你必须考虑他们的乘数，对吧？将您的“和”条件减少到只有 4,9,16,5,7,11,13,17,19

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T17:40:20.650

如果是我，我会尝试“修改”（％）素数。我不会使用从 1 到 20 的每个数字。

# python - 将包含罗马数字的字符串转换为等效整数

> ID：10093618
> 
> 赞同：3
> 
> 时间：2012-04-10T17:35:17.527
> 
> 标签：python, regex

我有以下字符串：

```
str = "MMX Lions Television Inc" 
```

我需要将其转换为：

```
conv_str = "2010 Lions Television Inc" 
```

我有以下函数将罗马数字转换为其等效整数：

```
numeral_map = zip(
    (1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1),
    ('M', 'CM', 'D', 'CD', 'C', 'XC', 'L', 'XL', 'X', 'IX', 'V', 'IV', 'I')
)

def roman_to_int(n):
    n = unicode(n).upper()

    i = result = 0
    for integer, numeral in numeral_map:
        while n[i:i + len(numeral)] == numeral:
            result += integer
            i += len(numeral)
    return result 
```

我将如何`re.sub`在这里获取正确的字符串？

（注意：我尝试使用`regex`此处描述的内容：[How do you match only valid roman numbers with a regular expression?](https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression)但它不起作用。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T17:40:29.577

在寻找常用函数/库时，请务必尝试使用[Python 包索引。](http://pypi.python.org/pypi)

这是[与关键字 'roman' 相关的模块列表](http://pypi.python.org/pypi?:action=search&term=roman&submit=search)。

例如'romanclass'有一个实现转换的类，引用文档：

```
So a programmer can say:

>>> import romanclass as roman

>>> two = roman.Roman(2)

>>> five = roman.Roman('V')

>>> print (two+five)

and the computer will print:

VII 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T17:46:40.430

`re.sub()`可以接受一个函数作为替换，该函数将接收一个参数，即 Match 对象，并且应该返回一个替换字符串。您已经有一个将罗马数字字符串转换为 int 的函数，所以这并不困难。

在您的情况下，您需要这样的功能：

```
def roman_to_int_repl(match):
    return str(roman_to_int(match.group(0))) 
```

现在您可以从您链接的问题中修改正则表达式，以便在更大的字符串中找到匹配项：

```
s = "MMX Lions Television Inc"
regex = re.compile(r'\b(?=[MDCLXVI]+\b)M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})\b')
print regex.sub(roman_to_int_repl, s) 
```

这是一个不会替换字符串中“LLC”的正则表达式版本：

```
regex = re.compile(r'\b(?!LLC)(?=[MDCLXVI]+\b)M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})\b') 
```

您还可以将原始正则表达式与修改后的替换函数一起使用：

```
def roman_to_int_repl(match):
    exclude = set(["LLC"])   # add any other strings you don't want to replace
    if match.group(0) in exclude:
        return match.group(0)
    return str(roman_to_int(match.group(0))) 
```

# php - 如果 div id "arrow" 存在，使其表行具有类 "odd0"

> ID：10093620
> 
> 赞同：1
> 
> 时间：2012-04-10T17:35:19.630
> 
> 标签：php, javascript, jquery, html, css

我目前有以下 javascript 代码的替代表格行颜色：

```
function alternate(id){     
    if(document.getElementsByTagName){  
        var table = document.getElementById(id);   
        var rows = table.getElementsByTagName("tr");    
        for(i = 0; i < rows.length; i++){           
            if(i % 2 ==0 ){ 
                rows[i].className = "odd0"; 
            }else { 
                rows[i].className = "even2"; 
            }
        }
    }
} // end function 
```

我想在这里添加的是满足以下任一条件：

*   如果表格行中存在 Div id“箭头”，则将类名设为“odd0”

*   如果表格行中存在 Div id“箭头”，则使类名与其上方的行颜色相同。

我的第一次尝试是如果 div id “arrow”存在，则尝试将类名设为“odd0”；但是，它只是破坏了我的代码或不阅读它。

我尝试了以下操作，要么将其制成自己的函数，要么将其插入到 for 循环中......

```
 if (document.getElementById("arrow")) {
  rows[i].className = "odd0";
 } 
```

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:52:42.907

只是为了让您知道您应该只使用一个设置为“箭头”的 id，假设是这样：

```
 var arrow = document.getElementById('arrow');
 var row = arrow.parent;
 row.setAttribute('class', 'odd0'); 
```

此代码获取箭头 div 的父级并将其类设置为“odd0”。使用 jQuery，您可以这样做：

```
 $('#arrow').parent().addClass('odd0'); 
```

如果您有多个 ID 为“箭头”的 div，那么您需要将它们更改为使用类箭头，代码将类似于：

```
 var arrows = document.getElementsByClassName('arrow');
 for(var i = 0; i < arrows.length; i++) {
     arrows.parent.setAttribute('class', 'odd0');
 } 
```

或者，使用 jQuery

```
 $('.arrow').parent().addClass('odd0'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:52:05.730

你的问题有点含糊，你的要求似乎矛盾。但是，*我认为*你想要的是让你的行在 and 之间交替`odd0`，`even2`除非你`arrow`的行中有一个。然后，您希望当前行与其上方的行具有相同的类。

如果我错了，请纠正我。

因为你把 jQuery 作为一个标签，所以我会给你一个 jQuery 答案。如果您不了解 jQuery，我建议您学习它。它使这种类/css 操作比直接**的 JavaScript 更**容易，并为您处理所有跨浏览器问题。

```
function alternate(id) {
    var i = 1;
    // Go through each row
    $('#'+id).find('tr').each(function() {
        // If this isn't an "arrow" row, increment the count
        if ($(this).find('.arrow').length < 1) {
            i++;
        }
        // Decide whether the row is odd or even
        if (i % 2 == 0) {
            $(this).addClass('even2');
        } else {    
            $(this).addClass('odd0');
        }
    });
} 
```

演示：http: [//jsfiddle.net/jtbowden/uBgYH/1/](http://jsfiddle.net/jtbowden/uBgYH/1/)

# javascript - TinyMCE：如何摆脱一些按钮

> ID：10093621
> 
> 赞同：4
> 
> 时间：2012-04-10T17:35:20.840
> 
> 标签：javascript, html, tinymce, wysiwyg

我正在尝试对 TinyMCE 进行最小化实现。我想要的唯一按钮是粗体、斜体、字体大小、字体颜色、链接和撤消/重做。

我已经从他们的小提琴演示中修剪了这个例子，并且我已经能够删除许多不需要的按钮。

这就是我将 init 简化为的内容，但我看不出还有什么可以消除的。我找不到单独的配置吗？有了这个，我仍然得到列表按钮、超级/下标和删除格式并插入特殊字符......

```
tinyMCE.init({
    // General options
    mode: "textareas",
    theme: "advanced",
    plugins: "", //note, i've removed every plugin for demnstration, stll have unwanted buttons

    // Theme options
    theme_advanced_buttons1: "|,bold,italic,|,fontsizeselect,|,forecolor,",
    theme_advanced_toolbar_location: "top",
    theme_advanced_toolbar_align: "left",
    theme_advanced_statusbar_location: "bottom",
    theme_advanced_resizing: true,
    theme_advanced_text_colors : "FF00FF,FFFF00,000000",
    width: "100%",
    height: "400"
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T17:54:16.217

*此评论针对 TinyMCE 3.X*

您需要清空第二组（可能是第三组）按钮

```
theme_advanced_buttons2 : "",
theme_advanced_buttons3 : "",
//etc 
```

*TinyMCE 4.*

V4 中的默认工具栏似乎只有一组按钮，因此上述 3\. 的答案有点误导。在 V4 中，如果您不指定工具栏，它将为您构建一个。

要设置工具栏中显示的按钮，只需指定您想要的项目。

单个工具栏

```
toolbar: "insertfile undo redo | styleselect | bold italic | alignleft aligncenter 
```

多个工具栏

```
toolbar1: "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",
toolbar2: "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image" 
```

或者

```
toolbar: [
    "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",
    "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"
 ] 
```

官方文档：

*   工具栏[http://www.tinymce.com/wiki.php/Configuration:toolbar](http://www.tinymce.com/wiki.php/Configuration%3atoolbar)
*   按钮列表：[http ://www.tinymce.com/wiki.php/Controls](http://www.tinymce.com/wiki.php/Controls)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T17:50:56.753

在主题选项下，您可以使用 输入要禁用的内容`theme_advanced_disable`。例如要去掉下标和上标按钮，添加以下代码：

```
theme_advanced_disable : "sup,sub" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T17:36:18.037

您应该能够删除您提到的代码片段中的插件。只需删除您不需要的内容，它就应该进行调整。

# c# - ac#.net 网站的自动化任务

> ID：10093629
> 
> 赞同：0
> 
> 时间：2012-04-10T17:35:34.913
> 
> 标签：c#, .net, windows-server-2008

所以，这个问题被问了很多，我看到了很多不同的答案，但对于我的场景来说，没有什么是有限或绝对的。

_

我想做的事：

我们有一个网站，有一个用户社区。

在网站的管理部分，有一些按钮可以运行以下功能：

通过电子邮件向所有用户发送我们的每周通讯 [星期四下午 4 点]，

向用户发送当天的信息 [每天下午 6 点]，

通过 facebook connect [每天上午 8 点和下午 6 点] 发布到 facebook，

等等，等等（很快也会有新的要求，但它们将遵循相同的原则）

_

我要做的就是自动运行这些功能，这样员工就不需要去网站，登录，然后在设定的时间点击每个按钮。

也就是说，实际上，让服务器在上述设定的时间自动单击这些按钮。

_

我已经看到了使用内置计时器构建服务的建议，该计时器将调用每个函数，或使用 Windows 任务调度程序，构建 exe / com 等，但我直觉它不应该这么复杂。

我们已经编写了代码来实际执行 .net 网页中的任务，并使用一些自定义构建的类等。

我只是不知道如何在需要的时间自动调用这些函数。

_

服务器信息：运行 Windows Web Server 2008 R2（64 位）的专用服务器

开发环境：Visual Studio 2010 SP1，使用 .NET 4.0

_

预先感谢您的帮助。

最亲切的问候，

德尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T17:38:42.810

将代码拆分为可以从 Windows 任务调度程序以及您的应用程序调用的单独的 exe/dll 是可行的方法。

当您正在运行的操作系统中存在调度程序时，在您的应用程序中重新发明调度程序是没有意义的。特别是因为您的应用程序是一个 Web 应用程序，它应该做 Web 事情而不是服务器事情。

额外的好处是您使您的应用程序更加模块化并且更容易升级。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T17:40:10.130

根据定义，Web 服务器响应请求。这种基本设计以各种方式表现出来，例如应用程序池在一段时间不活动后关闭。出于这个原因，在 Web 服务器的上下文中执行与时间相关的代码并不是一个好主意，因为很难保证代码会真正运行（不跳过许多具有其他负面影响的环节） ）。相反，外部时间相关机制应向 Web 服务器发送请求以执行这些功能。

您说您不想使用 Windows 调度程序或编写外部 exe，因为“它不应该这么复杂”；但我看不出让计划任务调用 Web 服务有什么复杂之处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T17:42:13.010

好吧，尽管我同意为 Windows 任务调度程序欢呼的其他答案，并且该网站与调度任务无关（它可以是输入参数的来源，而不是任务运行程序本身），但您可以尝试使用诸如[quartz.NET 之](http://quartznet.sourceforge.net/)类的调度库在后台安排和运行必要的进程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T18:16:46.063

下载 cURL - 一个命令行 HTTP 请求实用程序。使用任务调度程序中的此实用程序使用执行功能所需的特定查询字符串调用您的网页/Web 服务。

[http://curl.haxx.se/](http://curl.haxx.se/)

这不是很安全 - 任何知道正确查询字符串的人都可能导致这些函数执行 - 但它为您提供了总体思路。在我看来，编写一个使用您的程序集直接执行您的功能的控制台应用程序要安全得多。从任务计划程序调用控制台应用程序。

# video - Wowza Live Stream - 如何获取当前视频的名称

> ID：10093630
> 
> 赞同：-1
> 
> 时间：2012-04-10T17:35:36.013
> 
> 标签：video, stream, live, wowza

我需要知道，如何在直播中获取当前视频的名称？这个有可能？如何？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:24:17.483

请参阅[快速入门指南](http://www.wowza.com/forums/content.php?3-quick-start-guide)。

对于直播流，您通常会创建一个格式为*[protocol]://0.0.0:*的 .stream 文件，并且您的直播流需要使用该协议和端口指向 wowza 服务器。*然后，您将使用rtmp://[wowzaserver]/live/xxyy.stream 之*类的 url 连接到实时流，其中 xxyy 是上述 .stream 文件的名称。

# asp.net - 如何动态设置 GridView 单元格的样式？

> ID：10093635
> 
> 赞同：5
> 
> 时间：2012-04-10T17:36:11.517
> 
> 标签：asp.net, gridview

**我的 GridView 有 3 个绑定列：A、B 和 C。我想以粗体显示**3 列的最大值。如何进行比较并将字体设置为粗体（最好在 aspx 文件中）？谢谢。

```
<Columns>                
<asp:BoundField DataField="A" HeaderText="A" SortExpression="A" />                
<asp:BoundField DataField="B" HeaderText="B" SortExpression="B" />
<asp:BoundField DataField="C" HeaderText="C" SortExpression="C" />
</Columns> 
```

澄清一下：A、B 和 C 列中的任何 NUMERIC 值都可能是最大的，具体取决于行。这是我要设置为粗体的值。

例子：

```
3   **4**    1
**6**   2    0
**9**   1    2 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T17:41:50.197

试试这个方法：

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        for (int j = 0; j < e.Row.Cells.Count; j++)
        {
            e.Row.Cells[j].Style.Add("BORDER-BOTTOM", "#aaccee 1px solid");
            e.Row.Cells[j].Style.Add("BORDER-RIGHT", "#aaccee 1px solid");
            e.Row.Cells[j].Style.Add("padding-left", "5px");
        }
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-10T17:52:45.810

你需要代码隐藏来处理这种事情。用于[`RowDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)此目的：

```
protected void Grid_RowDataBound(Object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        int number;
        var highestCells = e.Row.Cells.Cast<TableCell>()
            .Where(tc => int.TryParse(tc.Text, out number))
            .OrderByDescending(c => int.Parse(c.Text));
        foreach(var cell in highestCells)
            cell.Font.Bold = true;
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-10T17:44:11.953

您可以在 gridview 的 rowdatabound 方法中执行此操作。理想的方法是从数据库本身获取 3 列的最大值，然后检查 rawdatabound 中的值。此网址可帮助您提供一个简短的介绍。与此类似，您可以添加条件并将该列的相应字体样式设置为粗体 [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx) 在条件中你可以写这行来加粗 `e.Row.Cells[2].Font.Bold = true;`

# tokenize - 如何防止 Facet 术语标记化

> ID：10093638
> 
> 赞同：10
> 
> 时间：2012-04-10T17:36:19.303
> 
> 标签：tokenize, elasticsearch

我正在使用 Facet 术语来获取字段的所有唯一值及其计数。我得到了错误的结果。

```
term: web 
Count: 1191979 
term: misc 
Count: 1191979 
term: passwd 
Count: 1191979 
term: etc 
Count: 1191979 
```

而实际结果应该是：

```
term: WEB-MISC /etc/passwd 
Count: 1191979 
```

这是我的示例查询：

```
{
  "facets": {
    "terms1": {
      "terms": {
        "field": "message"
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T17:57:41.877

如果重新索引是一个选项，最好更改映射并将此字段标记为 not_analyzed

```
"your_field" : { "type": "string", "index" : "not_analyzed" } 
```

如果需要保留字段的分析版本，您可以使用[多字段类型：](http://www.elasticsearch.org/guide/reference/mapping/multi-field-type.html)

```
"your_field" : {
  "type" : "multi_field",
    "fields" : {
      "your_field" : {"type" : "string", "index" : "analyzed"},
      "untouched" : {"type" : "string", "index" : "not_analyzed"}
  }
} 
```

这样，您可以继续`your_field`在查询中使用，同时使用`your_field.untouched`.

或者，如果存储了此字段，您可以使用脚本字段方面来代替：

```
"facets" : {
  "term" : {
    "terms" : {
      "script_field" : "_fields.your_field.value"
    }
  }
} 
```

万不得已，如果不存储该字段，但记录源存储在索引中，您可以尝试以下操作：

```
"facets" : {
  "term" : {
    "terms" : {
      "script_field" : "_source.your_field"
    }
  }
} 
```

第一种解决方案是最有效的。最后一种解决方案效率最低，并且可能在大型索引上花费大量时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-06T15:32:25.420

哇，我今天在最近的弹性搜索中进行术语聚合时也遇到了同样的问题。在谷歌搜索和一些部分理解之后，发现了这个令人讨厌的索引是如何工作的（这很简单）。

**查询只能找到倒排索引中实际存在的词条**

当您索引以下字符串时

```
"WEB-MISC /etc/passwd" 
```

它将被传递给分析器。分析器可能会将其标记为

```
"WEB", "MISC", "etc" and "passwd" 
```

及其位置详细信息。并且此标记可能会过滤为小写，例如

```
"web", "misc", "etc" and "passwd" 
```

所以，索引后，搜索查询只能看到以上4个。不是完整的单词“WEB-MISC /etc/passwd”。根据您的要求，以下是我可以使用的选项

```
1.Change the Default Analyzer used by elasticsearch([link][1])
2.If it is not need, just TurnOff the analyzer by setting 'not_analyzed' for the fields you need
3.To convert the already indexed data searchable, re-indexing is the only option 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-10-09T10:35:44.593

我已经简要解释了这个问题，并[在这里](https://qbox.io/blog/elasticsearch-aggregation-custom-analyzer)提出了两个解决方案。我在这里讨论了多种方法。一种是使用 not_analyzed 来保留字符串。但是由于它具有不区分大小写的缺点，因此更好的方法是使用关键字标记器+小写过滤器

# javascript - 从 underscore.js 中的数组返回一系列值

> ID：10093642
> 
> 赞同：6
> 
> 时间：2012-04-10T17:36:36.003
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我有一个包含以下数据的数组

```
var a = [1,2,3,4,5,6,7] 
```

我正在underscore.js 或backbone.js 中寻找一种方法，我可以在其中返回具有指定范围的元素。例如：

```
filter(2,5) should return  [3,4,5,6] 
```

这是数组中的第 2 到第 5 个索引元素。对我有什么指示吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-10T17:39:05.107

Javascript数组应该定义如下，

```
var a = [1,2,3,4,5,6,7]; //not inside {} 
```

然后您可以使用数组原生[**切片**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice)方法从特定位置获取元素

```
a.slice(2, 6) //should return 3,4,5,6 
```

**编辑：**

> 我非常清楚 JScript 中提供了该功能。我在问它是否在主干或下划线中可用。您在问为什么要冰块而不是水，因为冰最终会变成水。

下划线 js**没有**原生 js 中已有的功能`slice`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-29T16:42:44.707

**步骤1：**

切换到 Lodash。（[https://lodash.com/](https://lodash.com/)）

*注意：危险的一步，你永远不会回去。*

**第2步：**

像这样使用`_.slice`函数：

`_.slice(a, 2, 5)`

# qt - 如何创建特定于发行版的条件 qmake 项目

> ID：10093643
> 
> 赞同：3
> 
> 时间：2012-04-10T17:36:37.300
> 
> 标签：qt, qmake, libs

假设我在 2 台运行不同 Linux 发行版的计算机上编写代码。

如何使 qmake 区分这两个发行版并为这两个发行版分配特定的 LIBS。

例如;

```
unix: {

   ubuntu*: {
          LIBS += -lcxcore -lhighgui -lm
   }

   gentoo*: {
           LIBS += -lopencv_imgproc -lopencv_highgui -lm
   }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T18:30:04.163

我认为您可以运行“uname -a”并使用正则表达式来检查 .pro 文件中的返回值：

```
UNAME = $$system(uname -a)

contains(UNAME, YourRegExpToMatchGentoo): GENTOO = 1
contains(UNAME, YourRegExpToMatchUbuntu): UBUNTU = 1

contains(GENTOO, 1): {
    LIBS += -lcxcore -lhighgui -lm
}

contains(UBUNTU, 1): {
    LIBS += -lopencv_imgproc -lopencv_highgui -lm
} 
```

# java - java swing - 绘制 jcomponent

> ID：10093648
> 
> 赞同：1
> 
> 时间：2012-04-10T17:36:58.583
> 
> 标签：java, swing, jcomponent

我正在尝试制作和弦键盘模拟。我无法解决为什么 Keyboard 中的 KeyboardButtons 不绘画。我在键盘中有更多的键盘按钮。正确聆听鼠标，但未绘制多边形。

当我在键盘的paintComponent() 中为每个KeyboardButton 调用paint 时，会绘制多边形，但不会在mousePressed 上改变颜色。

**键盘.java**

```
package keyboard;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Point;
import java.awt.Polygon;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import javax.swing.JComponent;
import javax.swing.JPanel;

public class Keyboard extends JPanel implements MouseListener{

    Point[] leftFingers;
    Point leftCenter = new Point(300, 600);
    KeyboardButton[] buttons;

    public Keyboard(Point left1, Point left2, Point left3, Point left4, Point left5) {
    leftFingers = new Point[5];
    leftFingers[0] = left1;
    leftFingers[1] = left2;
    leftFingers[2] = left3;
    leftFingers[3] = left4;
    leftFingers[4] = left5;
    buttons = registerKeys();
    addMouseListener(this);
    }

    public KeyboardButton[] registerKeys() {
    Polygon[] polygons = generateKeyPolygons(calculateBordersOfKeys(leftFingers));
    KeyboardButton[] buttons = new KeyboardButton[5];
    for (int i = 0; i < polygons.length; i++) {
        buttons[i] = new KeyboardButton(polygons[i]);

    }
    return buttons;
    }

    private Point[] calculateBordersOfKeys(Point[] fingers) {
    Point[] centers = calculateCentersBetweenEachTwoFingers(fingers);
    Point[] result = new Point[6];

    result[0] = calculateCentralSymmetry(centers[0], fingers[0]);
    System.arraycopy(centers, 0, result, 1, centers.length);
    result[5] = calculateCentralSymmetry(centers[3], fingers[4]);
    return result;
    }

    @Override
    protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.setColor(Color.red);
    g.drawOval(leftCenter.x - 25, leftCenter.y - 25, 50, 50);

    for (int i = 0; i < leftFingers.length; i++) {
        g.drawOval(leftFingers[i].x, leftFingers[i].y, 10, 10);

    }
    }

    private Polygon[] generateKeyPolygons(Point[] borders) {
    Polygon[] polygons = new Polygon[5];
    for (int i = 0; i < borders.length - 1; i++) {
        Polygon p = new Polygon();
        p.addPoint(leftCenter.x, leftCenter.y);
        p.addPoint(borders[i].x, borders[i].y);
        p.addPoint(borders[i + 1].x, borders[i + 1].y);
        polygons[i] = p;
    }

    return polygons;
    }

    private Point[] calculateCentersBetweenEachTwoFingers(Point[] fingers) {
    Point[] centers = new Point[4];
    for (int i = 0; i < fingers.length - 1; i++) {
        centers[i] = new Point(((fingers[i].x + fingers[i + 1].x) / 2), ((fingers[i].y + fingers[i + 1].y) / 2));
    }
    return centers;
    }

    private Point calculateCentralSymmetry(Point toReflected, Point center) {
    Point reflection = new Point();

    if (toReflected.x > center.x) {
        reflection.x = center.x - Math.abs(center.x - toReflected.x);
    } else {
        reflection.x = center.x + Math.abs(center.x - toReflected.x);
    }

    if (toReflected.y > center.y) {
        reflection.y = center.y - Math.abs(center.y - toReflected.y);
    } else {
        reflection.y = center.y + Math.abs(center.y - toReflected.y);
    }

    return reflection;
    }

    public void mouseClicked(MouseEvent e) {

    }

    public void mousePressed(MouseEvent e) {
    for (KeyboardButton button : buttons) {
        button.checkMousePosition(e);
    }
    }

    public void mouseReleased(MouseEvent e) {
    for (KeyboardButton button : buttons) {
        button.checkMousePosition(e);
    }   
    }

    public void mouseEntered(MouseEvent e) {

    }

    public void mouseExited(MouseEvent e) {

    }

} 
```

**键盘按钮.java**

```
package keyboard;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Polygon;
import java.awt.event.*;
import javax.swing.JComponent;
import javax.swing.JPanel;

public class KeyboardButton extends JComponent {

    Polygon polygon;
    boolean isActive;
    final Color ACTIVE_COLOR = Color.red;
    final Color INACTIVE_COLOR = Color.blue;

    public KeyboardButton(Polygon p) {
    polygon = p;
    }

    public void checkMousePosition(MouseEvent e) {
    if (polygon.contains(e.getX(), e.getY())) {
        setState(true);
    }
    }

    @Override
    protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.setColor(isActive ? ACTIVE_COLOR : INACTIVE_COLOR);
    g.drawPolygon(polygon);
    }

    void setState(boolean state) {
    isActive = state;
    System.out.println(this.hashCode());
    repaint();

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T18:42:03.537

据我所知，`KeyboardButton`组件从未添加到`Keyboard`. 因此，当他们调用时`repaint()`，它没有任何效果，因为它们不是视图层次结构的一部分。

# php - 如何将 php 会话数组转换为 javascript 数组

> ID：10093649
> 
> 赞同：-1
> 
> 时间：2012-04-10T17:36:59.277
> 
> 标签：php, javascript, arrays

我在将会话数组从 php 输入到 javascript 时遇到问题，我尝试使用 json_encode 来完成，但我遇到了问题，因为 json 不采用瑞典字符，我需要将它放在数组中，任何其他建议如何去做吧！

我在这里设置会话数组，print_r 仅用于检查，所以它是正确的

```
while($row2[]=mysql_fetch_array($result2))
$_SESSION['row2'] = $row2; 
print_r($_SESSION['row2'][0][0]);
print_r($_SESSION['row2'][0][1]);
print_r($_SESSION['row2'][0][2]); 
```

在我的javascript中我试过这个

```
var row2 =<?php echo json_encode($_SESSION['row2']) ?>;
console.debug(row2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:46:05.080

建议：告诉您的数据库客户端，当您从数据库请求/获取数据时，您希望数据被编码为 UTF-8。您可以通过设置客户端字符编码来做到这一点，请参阅[`mysql_set_charset`^(*Docs*)](http://php.net/mysql_set_charset)。

当您检索编码为 UTF-8 的数据时，您可以使用它，`json_encode`并且您的网站脚本可以正确接收它。

# sql - 在SQL中按另一列分组时获取一列的SUM

> ID：10093652
> 
> 赞同：9
> 
> 时间：2012-04-10T17:37:11.777
> 
> 标签：sql

我有一个包含 3 个字段的表

```
ID  Tax   State
0   .50   TX
1   .25   TX
2   .25   AZ
3   .25   AZ
4   .1    AL 
```

我想提取每个州的税收总和。

```
Tax   State
.75   TX
.5    AZ
.1    AL 
```

我将如何编写查询来执行此操作？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-10T17:38:21.777

这是一个非常基本的`SUM()`聚合。我建议阅读 RDBMS 的关于聚合函数的文档，`GROUP BY`因为这是非常基本的。

```
SELECT
  SUM(Tax) AS sumtax,
  State
FROM table
GROUP BY State
/* Looks like you want descending order */
ORDER BY SUM(Tax) DESC 
```

请注意，某些 RDBMS（例如 MySQL）将允许您在`ORDER BY`如下所示中使用列别名：

```
ORDER BY sumtax DESC 
```

...其他人（如果我没记错的话，比如 SQL Server）不会，你也必须在那里使用聚合值。

**编辑：** *我刚刚检查过，实际上 SQL Server 似乎确实允许在`ORDER BY`. 很确定您不能在其中使用别名`GROUP BY`...*

# ruby - Thor YAML.load_file 无效的子类 (TypeError)

> ID：10093654
> 
> 赞同：1
> 
> 时间：2012-04-10T17:37:43.557
> 
> 标签：ruby, yaml, thor

我正在创建一个 thor 脚本，该脚本基于存储 Ruby 结构的 yml 文件显示我所在的当前项目。尝试加载此 yml 文件时出现错误。

```
from /Users/cpara/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/syck.rb:135:in `node_import'
from /Users/cpara/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/syck.rb:135:in `load'
from /Users/cpara/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/syck.rb:135:in `load'
from /Users/cpara/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/syck.rb:146:in `block in load_file'
from /Users/cpara/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/syck.rb:145:in `open'
from /Users/cpara/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/syck.rb:145:in `load_file'
from ./project:84:in `current'
from /Users/cpara/.rvm/gems/ruby-1.9.2-p318@rails/gems/thor-0.14.6/lib/thor/task.rb:22:in `run'
from /Users/cpara/.rvm/gems/ruby-1.9.2-p318@rails/gems/thor-0.14.6/lib/thor/invocation.rb:118:in `invoke_task'
from /Users/cpara/.rvm/gems/ruby-1.9.2-p318@rails/gems/thor-0.14.6/lib/thor.rb:263:in `dispatch'
from /Users/cpara/.rvm/gems/ruby-1.9.2-p318@rails/gems/thor-0.14.6/lib/thor/base.rb:389:in `start'
from ./project:213:in `<main>' 
```

这是我要运行的脚本片段：

```
#!/usr/bin/env ruby
require 'yaml'
class Project < Thor
  include Thor::Actions

  # Task: return current project
  desc 'current', 'Shows current project.'
  def current
    projects = YAML.load_file "#{ENV['HOME']}/.hana/data/projects.yml" #error
    abort "There are no projects.  Try creating one first." if not @projects.is_a? Array
    projects.each do |project|
      if project.current == true
        say_status :current, "Current project: #{project.name} // #{project.type} // #{project.version}", :green
        return project
      end
    end
    say_status :error, "There is no current project.", :red
  end
end 
```

我已经三次检查了 irb 中的路径，它确实存在。我认为这是我的 YAML 存储我的 Ruby 结构的方式，但即使是控制台，我也会收到错误消息。这是我的 YAML 文件

```
--- 
- !ruby/struct:Proj 
  name: test
  type: testing
  version: 4.0.2
  deploy_dir: deploy
  source_dir: source
  current: true 
```

有任何想法吗？我正在运行 Ruby 1.9.2p318。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:14:11.653

YAML 正在尝试从文件中实例化一个名为**Proj的****结构**，如以下行所示：

```
!ruby/struct:Proj 
```

在加载 yaml 之前，您应该需要定义 Proj 的文件。或者，只是为了测试它是否有效，在您的代码中，在*require 'yaml'*行定义 Proj 之后：

```
Proj = Struct.new(:name, :type, :version, :deploy_dir, :source_dir, :current) 
```

# java - 如何使用 JSP/Java 防止页面被添加到浏览器的历史记录中？

> ID：10093656
> 
> 赞同：0
> 
> 时间：2012-04-10T17:37:53.200
> 
> 标签：java, forms, jsp, redirect, browser-history

我有一个jsp 页面——我们称之为index.jsp。用户单击此页面中的一个链接——我们将链接称为 section1.jsp。在 section1.jsp 中，存在一个表单。当用户提交表单时，它会打开另一个名为 portal.aspx 的页面。

当用户单击浏览器中的后退按钮时，我希望页面返回 index.jsp。

我的想法是：从 request.getHeader('referer') 创建一个会话来记录 index.jsp 页面。这将在用户输入 section1.jsp 时设置。这个想法是当用户在 portal.aspx 中并单击后退按钮时，我希望它检查会话变量，如果已设置，则重定向到引用 URL。然后我试了一下，还是不行。

有没有什么方法可以完成我刚才描述的事情，而不会让浏览器在其历史记录中记录 secton1.jsp，这样当用户单击浏览器的后退按钮时，用户将从 portal.aspx 转到 index.jsp？请理解我正在寻找服务器端解决方案，并且我必须使用表单来打开门户。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:50:58.100

如果您要使用纯服务器端，则没有解决方案。作为替代方案，您可以使用 cookie 来存储返回 URL，这将确保您的页面流量在未来发生变化时不会丢失。唯一的问题，现在你的两个后端需要共享同一个域。

我个人会得到一点前端帮助，这些确实是用于处理页面历史的 API JS api。

见[https://github.com/browserstate/history.js](https://github.com/browserstate/history.js)

# java - 试图反映一个接受泛型类型的方法

> ID：10093659
> 
> 赞同：2
> 
> 时间：2012-04-10T17:37:59.497
> 
> 标签：java, generics, reflection

我有一个方法 add 将一个通用对象（即 T）添加到一个列表中。我想对这个方法进行单元测试。

```
public static <T> List<T> add(List<T> list, T t) {
    if(list == null) return null;
    if(t == null) return list;

    List<T> outputList = new ArrayList<T>(list);
    outputList.add(t); // append item into list

    return outputList;
} 
```

我正在尝试获取方法并对其进行测试。我编写了以下代码片段来获取该方法（我知道这是不正确的）。

```
Class myClass = Myclass.class;
Class<List<T>> clazz = (Class<List<T>>) Class.forName("java.util.ArrayList");
Method myObjectMethod = myClass.getMethod("add", ...) // i need to identify T's class 
```

某些跟踪错误尝试导致我出现 NoSuchMethod 异常。

有人可以帮我确定这种方法吗？任何纠正上述代码的指针？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T18:01:10.733

`clazz`应该是`List.class`，不是`ArrayList.class`。您必须使用方法定义中使用的确切原始类型。

# performance - 基于图像 ROI 的高效直方图计算

> ID：10093661
> 
> 赞同：1
> 
> 时间：2012-04-10T17:38:06.777
> 
> 标签：performance, matlab, histogram

我正在寻找一些已经存在的函数/工具来计算图像中多个 ROI（感兴趣区域）的标准视觉词袋直方图。让我解释：

(1) 假设您有一个图像，其中每个“像素”带有一个整数：1 ... K 每个这样的“像素”都有以下信息

1.  x,y 坐标
2.  从 1 到 K 的值

(2) 假设从所有图像中抽取大量固定大小的区域，格式为：

1.  (x1,y1) - 上、左坐标
2.  (x2,y2) - 底部，右侧坐标

(3) 对于每个区域：计算一个 K bin 直方图，计算落在该区域中的“像素”值的出现次数

我在 MATLAB 中实现了以下函数，但由于代码中有多个 for 循环，它非常慢

```
function [H words] = sph_roi( wind, tree, desc, feat, bins )
% FUNCTION computes an SPH histogram for a collection of windows. Spatial
% information is captured by splitting the window in bins horizontally.
%
%   [H words] = sph_roi( obj_wind, tree, desc, feat, [ bins ] );
%
% INPUT :
%   wind        - sampled ROI windows
%                   [left_x, top_y, right_x, bottom_y] - see sample_roi()
%   tree        - vocabulary tree
%   desc        - descriptors matrix
%   feat        - features matrix
%   bins        - number of horizontal cells (1=BOVW, 2... SPH)
%                   by default set to the multiples of window height.
%
% OUTPUT :
%   H           - SPH histograms
%   words       - word IDs found for every descriptor
%

verbose = 0;

% input argument number check
if nargin < 4
error( 'At least 4 input arguments required.' );
end

% default number of horizontal cells
if nargin < 5
bins = -1;  % will be set in multiples of each window height corresp.
end

% number of windows
num_wind = size( wind, 1 );

% number of visual words
num_words = tree.K;

% pre-compute all visual words
words = vl_hikmeanspush( tree, desc );

% initialize SPH histograms matrix
H = zeros( num_words * bins, num_wind );

% compute BOVW for each ROI
for i = 1 : num_wind

if verbose == 1
    fprintf( 'sph_roi(): processing %d / %d\n', i, num_wind );
end

% pick a window
wind_i = wind( i, : );

% get the dimensions of the window
[w h] = wind_size( wind_i );

% if was not set - the number of horizontal bins
if bins == -1
    bins = round( w / h );
end

% return a list of subcell windows
scw = create_sph_wind( wind_i, bins );

for j = 1 : bins

    % pick a cell
    wind_tmp = scw( j, : );

    % get the descriptor ids falling in that cell
    ids = roi_feat_ids( wind_tmp, feat );

    % compute the BOVW histogram for the current cell
    h = vl_hikmeanshist( tree, words(ids) );

    % assemble the SPH histogram in the output matrix directly
    H( 1+(j-1)*num_words : j*num_words, i ) = h( 2:end );

end

end

function ids = roi_feat_ids( w, f )
% FUNCTION returns those feature ids that fall in the window.
%
%   ids = roi_feat_ids( w, f );
%
% INPUT :
%   w   - window
%   f   - all feature points
%
% OUTPUT :
%   ids - feature ids
%

% input argument number check
if nargin ~= 2
error( 'Two input arguments required.' );
end

left_x = 1;
top_y = 2;
right_x = 3;
bottom_y = 4;

% extract and round the interest point coordinates
x = round( f(1,:) );
y = round( f(2,:) );

% bound successively the interest points
s1 = ( x > w(left_x) ); % larger than left_x
s2 = ( x < w(right_x) ); % smaller than right_x
s3 = ( y > w(top_y) ); % larger than top_y
s4 = ( y < w(bottom_y) ); % smaller than bottom_y

% intersection of these 4 sets are the ROI enclosed interest points
ids = s1 & s2 & s3 & s4;

% convert ids to real
ids = find( ids ); 
```

我查看了 OpenCV 甚至在英特尔的 MKL 中提出的例程，但没有发现任何合适的。使用 Matlab 的分析器，我发现在 roi_feat_ids() 中花费了大量时间，并且函数 sph_roi() 中每个区域的外循环也很慢。在尝试实现 MEX 文件之前，我想看看是否可以回收一些现有代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:22:47.813

我会做一些事情来加快速度。

1.  应该删除最后一行 ( `ids = find( ids );`。逻辑掩码比使用 find 快得多，并且它们几乎适用于 find 语句可以工作的所有情况。我怀疑这将大大加快您的功能，而不会损失功能/可读性.
2.  如果将一些 s1、s2、s3 和 s4 语句组合起来可能会更快。
3.  除非需要，否则尽量不要在 for 循环中创建大型数据集。具体来说，我会删除两行来执行以下操作：`ids = roi_feat_ids( scw( j, : ), feat );`

后两者可能会为您节省一点时间，但第一个应该可以节省大量时间。祝你好运！

# java - 当前无法在 KMZ 中引用 .jpg 文件

> ID：10093664
> 
> 赞同：0
> 
> 时间：2012-04-10T17:38:12.773
> 
> 标签：java, kml

我有一个带有图标的 ScreenOverlay，我试图将其全部放入 KMZ 文件中，但它没有找到图标路径。

我有一个名为 DIR 的目录在 DIR 里面我有 A.JPG 和 test.kml 文件

在 test.kml 我引用图标：./A.JPG

我尝试了各种参考，但没有任何效果。屏幕上只有一个红色 X 应该是覆盖层。

与 KML 文件具有相同目录的正确格式是什么？

为了制作 KMZ，我压缩了 DIR 目录，然后将其重命名为 dir.kmz。

然后我将其复制到 Google 地球中。

我还需要在 Google 地球中进行任何设置吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:08:05.087

尝试将 KML 文件放在 KMZ 的根目录而不是文件夹中，并通过 yourdir/A.JPG 引用图像

这是有关使用 KMZ 的有用文档： [https ://developers.google.com/kml/documentation/kmzarchives](https://developers.google.com/kml/documentation/kmzarchives)

# java - 最终变量赋值：在声明中还是在构造函数中？

> ID：10093668
> 
> 赞同：4
> 
> 时间：2012-04-10T17:38:20.850
> 
> 标签：java, variables, static, constants

首先，这不是[在 Java 中构造函数之前 Initialize final variable](https://stackoverflow.com/questions/677595/initialize-final-variable-before-constructor-in-java)的完全重复。这可能是相关的，但没有任何答案让我满意。

我的问题是关于 Swing GUI 中的最终变量。特别是关于 custom `Action`。我有许多`final`变量和许多`static final`变量。

问题是：如果变量实际上是一个常量，那么更好的是：在构造时初始化它们，还是在声明时初始化它们？

我上面提到的问题的答案通常指向在`static`声明变量时尽快分配变量。这对我来说真的没有意义，因为变量没有在静态上下文中使用。我有几个我的表单使用的图像，例如图标，我将它们设为静态，因为除非您的应用程序修改它们，否则图像只是静态的东西。那讲得通。

另一方面，`Action`s 是自定义内部类的新实例。从技术上讲，它们也是静态的，但感觉不同。它们根本**不能**在静态上下文 imo 中可用。我也这么说：

```
private final CustomAction customAction = new CustomAction(); 
```

还是我在构造函数中初始化它？哪个更好？还是我想错了`static`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T17:41:46.157

如果该字段是常量，则使其成为`static final`该类的成员，

```
public class Foo{
    public static final int BAR = ...;
} 
```

否则，在构造函数中初始化该字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:55:59.560

我认为您在不使其成为静态的情况下走在正确的轨道上，因为听起来您的`CustomAction`对象是真正为在其构造函数中创建它们的 GUI 实例定制的。我认为你是否在构造函数中初始化它取决于你的构造函数是否可以`CustomAction`根据构造函数的输入参数进行不同的初始化。

`static`与非静态相比......一个好的经验法则是，如果一个变量要在特定对象类型的所有实例中保持不变，那么该变量应该是`static`. 这**可以节省**程序运行时的内存，并在构造每个对象实例时**节省 CPU 时间**，因为每次创建对象的新实例时都不必初始化该常量。另一方面，如果一个变量对于对象的特定实例保持不变，但可能因实例而异，那么它不应该是静态的。

最后（双关语），`final`只要您不希望原始值或对 Object 的引用发生变化，就应该使用它。静态或非静态上下文并不会真正影响变量是否应该是`final`，这完全`final`是因为开发人员不想更改该变量。它的静态上下文完全取决于开发人员希望如何访问它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T17:52:56.300

在声明时初始化常量变量：它更具可读性。如果为类的不同实例放入不同的值没有任何意义，则将其设为静态，也就是说，如果它是类级别的变量，而不是实例级别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T17:53:09.987

对于快速的应用程序启动和用户可能不访问的程序部分（关于对话框），静态是不好的。一般来说，静态并不像您发现的那样非常受欢迎。有一些原因，但没有什么非常令人信服的。但有时它是一种反模式或它的标志。

仍然在您的情况下，我会避免使用静态图像。顺便说一下，资源是在内部缓存的。

# ruby-on-rails - 如何使表格行在 Ruby on Rails 中用作超链接？

> ID：10093672
> 
> 赞同：0
> 
> 时间：2012-04-10T17:38:27.440
> 
> 标签：ruby-on-rails, ruby-on-rails-3, hyperlink, link-to

如何使我使用脚手架生成的用户索引视图的行作为指向显示用户操作的超链接。单击用户行上的任意位置后，它将向我们显示相应的用户。
如果我可以链接到一个部门也是可以接受的。

代码

```
<table>
  <tr>
  <th>Username</th>
  <th></th>
  <th>email</th>
  <th>roll_no</th>
</tr>

<% @users.each do |user| %>
  <tr >//i want to make these rows as link
    <% if user.username!='admin' %>
      <td><%= user.username %></td>
      <td><%= user.email %></td>
      <td><%= user.roll_no %></td>
      <td><%= link_to 'show', @user %></td><br/>
      <td><%= link_to 'Delete', user, confirm: 'Are you sure?', method: :delete %></td>
    <% end %>
  </tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:45:20.947

正如微薄所说，你应该使用 JavaScript。像这样的东西：

```
$('tr').click(function(){
    document.location.href='the_link_to_go_to';
}) 
```

您可以修改它以满足您的需要。

# jquery - 按下键盘时的jQuery CyclePluging下一个上一个单击事件

> ID：10093674
> 
> 赞同：3
> 
> 时间：2012-04-10T17:38:38.520
> 
> 标签：jquery, jquery-plugins

单击左或右键盘箭头时如何显示下一个上一页？

[http://jsfiddle.net/9Ntrz/](http://jsfiddle.net/9Ntrz/)

```
$(document.documentElement).keyup(function (e) {

    if (e.keyCode == 39)
    {
        ???
    }

    if (e.keyCode == 37)
    {
        ???
    }

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T17:45:16.617

只需使用循环（“命令”）：

```
$(document.documentElement).keyup(function (e) {
    if (e.keyCode == 39)
    {        
       $('#slideshow').cycle('next');
    }

    if (e.keyCode == 37)
    {
        $('#slideshow').cycle('prev');
    }

}); 
```

[在这里](http://jquery.malsup.com/cycle/options.html)阅读更多

# clojure - :aot 指令和警告之间的关系：*delimiter* 未声明为动态的

> ID：10093676
> 
> 赞同：0
> 
> 时间：2012-04-10T17:38:57.593
> 
> 标签：clojure, leiningen

我正在使用 Leiningen 1.7.1 和 Clojure 1.3.0。我的问题是 :aot 编译器指令与指示我的 def 不是动态的错误消息之间的关系（如果有）是什么？

以下是详细信息：

如果我从我的任何 project.clj 文件（两个库和一个依赖于它们的主库）中删除 :aot 指令，我会收到警告：*分隔符*未声明为动态的，因此不可动态重新绑定。

如果我修改这样的语句

```
(def bene-ssn-idx 16)
(def gic-ssn-idx 2) 
```

包括动态指令，我得到这个运行时错误

线程“主”java.lang.IllegalStateException 中的异常：无法动态绑定非动态变量：clojure-csv.core/ *strict*

有一次我记得听说 Clojure 1.3 中有一个关于第一条警告消息的问题，并且它将被修复。

由于:aot，我很高兴能忍受更长的构建，但我仍然想知道警告和错误的含义，以及为什么删除:aot会产生警告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:20:45.887

您正在使用不符合 Clojure 1.3 的 clojure-csv 版本：它的耳罩变量未声明为动态的。我不知道有关使用提前编译如何防止该问题的详细信息。

# html - OpenNLP 可以使用 HTML 标签作为训练的一部分吗？

> ID：10093677
> 
> 赞同：1
> 
> 时间：2012-04-10T17:39:01.580
> 
> 标签：html, nlp, pattern-matching, named-entity-recognition, opennlp

我正在使用转换为纯文本的 html 文档为 TokenNameFinder 创建一个训练集，但我的精度很低，我想使用 HTML 标签作为训练的一部分。就像粗体字和不同边距大小的句子一样。OpenNLP 会接受并使用这些标签来创建规则吗？还有其他方法可以利用这些标签来提高精度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T01:21:05.707

目前尚不清楚使用 HTML 标签训练 OpenNLP 的含义。训练输入是一个带注释的标记化句子：

```
<START:person> Pierre Vinken <END> , 61 years old , will join the board as a nonexecutive director Nov. 29 .
Mr . <START:person> Vinken <END> is chairman of <START:company> Elsevier N.V. <END> , the Dutch publishing group . 
```

要使用标准工具训练 OpenNLP 模型，您需要遵循此约定的注释。请注意，注释不遵循 XML 标准。

您可以将注释直接嵌入到将用于培训的 HTML 文档中。它甚至可以帮助分类器获得额外的上下文，但我从未读过任何关于它的实验结果。

你应该记住，训练数据应该被标记化。这意味着您应该在单词和标点符号之间以及文本元素和 html 之间包含空格：

```
<p> <i> Mr . <START:person> Vinken <END> </i> is chairman of <b> <START:company> Elsevier N.V. <END> </b>, the Dutch publishing group . 
```

# node.js - Node.js 找不到模块 - 在 Windows 上干扰 cygwin

> ID：10093679
> 
> 赞同：5
> 
> 时间：2012-04-10T17:39:05.083
> 
> 标签：node.js, cygwin, twitter-bootstrap, less, npm

我正在测试 Bootstrap 框架（来自 Twitter），并在安装 Node.js 后尝试在本地构建它。它失败了，因为它找不到 less 模块（我也用 'npm install -g less' 安装了它）：

```
C:\Users\geir\code\bootstrap>make
lessc html/less/bootstrap.less > html/css/bootstrap.css

node.js:201
    throw e; // process.nextTick error, or 'error' event on first tick
          ^
Error: Cannot find module 'C:\cygdrive\c\Users\geir\AppData\Roaming\npm\node_modules\less\bin\lessc'
    at Function._resolveFilename (module.js:332:11)
    at Function._load (module.js:279:25)
    at Array.0 (module.js:479:10)
    at EventEmitter._tickCallback (node.js:192:40)
Makefile:2: recipe for target `all' failed
make: *** [all] Error 1 
```

它失败的原因是因为“cygdrive”在make查找模块时被添加到文件夹层次结构中，我已经验证了“lessc”实际上是在C:\Users\geir\AppData\Roaming\npm\ node_modules\less\bin\lessc，我可以从命令行运行它。

我尝试了以下方法但没有成功：

*   重新排序 PATH 环境变量中的文件夹，以便 node.js 和 npm 出现在 cygwin 之前 - 结果相同。
*   从 PATH 中删除 cygwin - make 命令停止工作。
*   安装带有/不带有'-g'参数的'less'（npm）
*   重新安装 node.js

任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T01:58:30.300

从 Cygwin 终端调用 make。打开 Cygwin 终端，然后 cd 进入 C:\Users\geir\code\bootstrap 文件夹的 cygwin 别名，然后运行 ​​make：

```
geir@WINHOSTNAME ~
$cd /cygdrive/c/Users/geir/code/bootstrap
geir@WINHOSTNAME /cygdrive/c/Users/geir/code/bootstrap
$make 
```

# javascript - 用css创建一个像windows 7任务栏一样的模糊？

> ID：10093682
> 
> 赞同：2
> 
> 时间：2012-04-10T17:39:50.727
> 
> 标签：javascript, css

如何在使用 css 或 js 创建的 windows 7 任务栏中产生模糊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:47:08.737

使用 CSS3 过渡、不透明度、rgba 颜色等。使用线性渐变作为背景图像。

# css - CSS 字体大小 .5 增量

> ID：10093688
> 
> 赞同：2
> 
> 时间：2012-04-10T17:40:17.610
> 
> 标签：css, fonts, font-size, pt

在 CSS 中，您是否允许使用 0.5 增量，即

```
font-size: 8.5pt; 
```

看不出 font-size: 8pt 和 font-size: 8.5pt 之间的区别

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T17:42:21.523

点值实际上仅适用于打印 CSS。

引用克里斯 C：

> 点是用于现实生活中的纸上墨水排版的度量单位。72 点 = 一英寸。一英寸 = 现实生活中的一英寸，就像尺子一样。屏幕上没有一英寸，这完全取决于分辨率。

来源：[http ://css-tricks.com/css-font-size/](http://css-tricks.com/css-font-size/)

W3C 提示页面建议在屏幕上避免使用它们：

> 所谓的绝对单位（cm、mm、in、pt 和 pc）在 CSS 中的含义与其他任何地方相同。以其中任何一个表示的长度将显示为该大小（在硬件和软件的精度范围内）。不建议在屏幕上使用它们，因为屏幕尺寸变化很大。大屏幕可能有 60 厘米（24 英寸），而便携的小屏幕可能只有 8 厘米。而且您不会从相同的距离看它们。

资料来源：[http ://www.w3.org/Style/Examples/007/units.en.html](http://www.w3.org/Style/Examples/007/units.en.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T17:43:03.887

半个点是非常小的数量。如果不缩放屏幕，您可能永远看不到差异。尽管如此，该软件仍在计算它并在您的分辨率允许的情况下尽可能地显示它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-10T17:43:38.967

当您在使用 pt 时进行 0.5 增量时。这可能足够大，也可能不足以让浏览器渲染得更大。然后每个浏览器呈现的文本略有不同。

# java - 在java中创建自定义图像格式

> ID：10093692
> 
> 赞同：0
> 
> 时间：2012-04-10T17:40:46.247
> 
> 标签：java, image

我想创建一个包含在 PNG 图像中的自定义文件图像格式。我一直在研究我怎么可能做到这一点，但我不知道从哪里开始。我想以这种方式定义自定义文件格式： - 第一个字节包含格式版本 - 接下来的 2 个字节包含文件包含的文件数 - 其余文件内容是一个接一个复制的 png 文件

我可以使用流来读取文件，但我不知道如何将每个 png 转换为 BufferedImage，因为 ImageIO 读取完整的流。这就是我所带来的一切：

```
public static void main(String[] args) throws IOException {
    DataInputStream input = new DataInputStream(new FileInputStream("C:\\a.spr"));
    byte version = input.readByte();
    short imagenum = input.readShort();
    System.out.printf("version:%s\nimagenum:%s",version,imagenum);
    BufferedImage[] images = new BufferedImage[imagenum];
    for(int i=0;i<imagenum;i++)
    {
         BufferedImage img; //TODO: Read the image
         images[i] = img;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:50:41.743

您应该调查[PNG 的规范](http://www.w3.org/TR/PNG/)。

用最简单的术语来说，您希望将 4 字节块读入数组，直到找到`IEND`(0x73 0x69 0x78 0x68)。然后将其输入`javax.imageio.ImageIO.read()`;

# c# - C# Lidgren 库 - 地址已在使用中？

> ID：10093695
> 
> 赞同：1
> 
> 时间：2012-04-10T17:41:00.823
> 
> 标签：c#, sockets, lidgren

我正在为我的 XNA 游戏试验 Lidgren 库。我创建了一个简单的服务器和客户端：服务器：

```
 NetPeerConfiguration config = new NetPeerConfiguration("Warz");
 config.Port = port;
 server = new NetServer(config);
 config.MaximumConnections = 500;
 server.Start();
 logMessage("Server starting on port " + port.ToString(), ConsoleColor.Green);
 Console.Read(); 
```

客户：

```
NetPeerConfiguration netConfig = new NetPeerConfiguration("Warz");
netConfig.Port = 1000;
client = new NetClient(netConfig);
client.Start();
client.Connect(new IPEndPoint(IPAddress.Parse("127.0.0.1"), port)); 
```

端口是一个整数，值为1000，启动服务器后client.connect方法出现错误。错误是：无法绑定到端口 0.0.0.0:1000 - 地址已在使用中！我听说了有关选项重用地址的一些信息？不知道如何解决它。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:45:33.587

该端口可能正在使用中。试试 26648 之类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:57:12.030

我找到了解决方案，在客户端上我不应该在 NetPeerConfiguration 中设置端口，因为它已经在 client.connect 中设置了。当我删除它时，它再次像一个魅力。谢谢你的努力，雷内！

# javascript - 为什么这个 JSONP 提要会抛出“Unexpected Token”错误？

> ID：10093697
> 
> 赞同：1
> 
> 时间：2012-04-10T17:41:08.303
> 
> 标签：javascript, jquery, json, jsonp

我正在尝试通过 jQuery获取[这个远程 JSONP 提要。](http://calvaryslo.onthecity.org/plaza/%2aevents%2a?format=json)

每次我尝试时，我都会收到“Uncaught SyntaxError: Unexpected token (”或类似的错误。

我做错了什么还是 JSONP 数据中的某些内容被错误地格式化/转义？

小提琴：http: [//jsfiddle.net/callmeed/d3tSX/2/](http://jsfiddle.net/callmeed/d3tSX/2/)

```
var _event_url = "http://calvaryslo.onthecity.org/plaza/*events*?format=json";
$.ajax({
    type: 'GET',
    url: _event_url,
    dataType: 'jsonp',
    success: function(msg) {
        alert(msg.length);
    }
});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T17:46:43.067

因为此提要返回 JSON，而不是 JavaScript 函数调用：

```
[{Query172031345640518702567_1334079878875({... 
```

但它应该是：

```
Query172031345640518702567_1334079878875({... 
```

我不知道这个服务是否在你的控制之下，你可以改变它，或者你只需​​要在 URL 中添加一些参数（查看手册）。

响应的内容类型也应该是`application/javascript`，不是`text/json`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:59:28.003

如果您使用`dataType: 'jsonp'`JQuery ，则会`callback`在请求中附加一个 url 参数。该参数的值必须是服务器返回的回调函数的函数名。正如 Eugene Retunsky 已经提到的那样，它的格式不正确，而且似乎服务器代码省略了函数名称的第一个字符，因此`jQuery_674...`变得`Query_674...`不起作用。

# windows-mobile - Windows Mobile 6.5 GPS 设备 - WaitForMultipleObjects 返回 258（超时）

> ID：10093700
> 
> 赞同：2
> 
> 时间：2012-04-10T17:41:17.700
> 
> 标签：windows-mobile, gps, compact-framework

我在 2008-2009 年为**Windows mobile 6.1创建了一个****GPS 程序，可以在后台实时跟踪位置。**多年来，它在这些设备上运行良好。出于某种原因，相同的代码从未在**Windows Mobile 6.5**上完美运行。

 ****经过数小时的操作（主要是在没有人使用设备的情况下），我从函数“WaitForMultipleObjects”收到“超时”（代码 258）：

```
this.GPSEvent_WaitValue = WaitForMultipleObjects(2, this.GPSEvent_Handles, 0, 45000); 
```

**同样，这可以工作几个小时，突然之间，如果没有：更新：** - 重新启动设备（GoogleMap 确认没有 GPS 设备存在！）就不可能获得另一个位置 ！

它与 Windows Mobile 进入睡眠状态和减慢我的线程有关。

这是核心代码（改编自 Microsoft SDK 示例）：

```
/// <summary>
/// When "WindowsMobile" wake up the program to check for a new position
/// </summary>
private void OnNextGPSEvent_Callback()
{
  int SecondsToNextWakeUp = ETL.Mobile.Device.ScheduledCallback.MINIMUM_SECONDTONEXTWAKEUP;

  switch (this.SleepingState)
  {
    case SleepingStateType.SleepingForNextPosition:
      // Get position
      this.GPSEvent_WaitValue = (WaitForEventThreadResultType)WaitForMultipleObjects(2, this.GPSEvent_Handles, 0, 45000);

      switch (this.GPSEvent_WaitValue)
      {
        case WaitForEventThreadResultType.Event_LocationChanged:
          // Got a new position
          this.FireLocationChanged(this.GetCurrentPosition());

          // Manage device shutdown (save battery)
          if (this.PositionFrequency > MIN_SECONDS_FREQUENCY_FORDEVICE_SHUTDOWN)
          {
            // Close device
            this.CloseDevice();
            SecondsToNextWakeUp = (this.PositionFrequency - GPSDEVICE_LOAD_SECONDS_LOAD_TIME);
            this.SleepingState = SleepingStateType.SleepingBeforeDeviceWakeUp;
          }
          else
          {
            // Default Wait Time
            this.SleepingState = SleepingStateType.SleepingForNextPosition;
          }

          break;

        case WaitForEventThreadResultType.Event_StateChanged:
          break;

        case WaitForEventThreadResultType.Timeout:
        case WaitForEventThreadResultType.Failed:
        case WaitForEventThreadResultType.Stop:
          // >>>>>>>>>>>>>> This is where the error happens <<<<<<<<<<<<<<<<<<<<<<<<<<<
          // >>>>>>>>>>>>>> This is where the error happens <<<<<<<<<<<<<<<<<<<<<<<<<<<
          // >>>>>>>>>>>>>> This is where the error happens <<<<<<<<<<<<<<<<<<<<<<<<<<<

          // Too many errors
          this.ConsecutiveErrorReadingDevice++;
          if (this.ConsecutiveErrorReadingDevice > MAX_ERRORREADINGDEVICE)
          {
            this.CloseDevice();

            SecondsToNextWakeUp = (this.PositionFrequency - GPSDEVICE_LOAD_SECONDS_LOAD_TIME);
            this.SleepingState = SleepingStateType.SleepingBeforeDeviceWakeUp;
          }
          else
          {
            // Default Wait Time
            this.SleepingState = SleepingStateType.SleepingForNextPosition;
          }

          break;
      }
      #endregion
      break;

    case SleepingStateType.SleepingBeforeDeviceWakeUp:
      this.OpenDevice();

      SecondsToNextWakeUp = GPSDEVICE_LOAD_SECONDS_LOAD_TIME;
      this.SleepingState = SleepingStateType.SleepingForNextPosition;
      break;
  }

  if (this.IsListeningGPSEvent)
  {
    // Ajustement du prochain rappel
    this.NextGPSEvent_Callback.SecondToNextWakeUp = SecondsToNextWakeUp;
    this.NextGPSEvent_Callback.RequestWakeUpCallback();
  }
}
/// <summary>
///Create Thread
/// </summary>
private void StartListeningThreadForGPSEvent()
{
  // We only want to create the thread if we don't have one created already and we have opened the gps device
  if (this._GPSEventThread == null)
  {
    // Create and start thread to listen for GPS events
    this._GPSEventThread = new System.Threading.Thread(new System.Threading.ThreadStart(this.ListeningThreadForGPSEvent));
    this._GPSEventThread.Start();
  }
}
private void ListeningThreadForGPSEvent()
{
  this.GPSEvent_WaitValue = WaitForEventThreadResultType.Stop;
  this.IsListeningGPSEvent = true;

  // Allocate handles worth of memory to pass to WaitForMultipleObjects
  this.GPSEvent_Handles = Helpers.LocalAlloc(12);
  Marshal.WriteInt32(this.GPSEvent_Handles, 0, this._StopHandle.ToInt32());
  Marshal.WriteInt32(this.GPSEvent_Handles, 4, this._NewLocationHandle.ToInt32());
  Marshal.WriteInt32(this.GPSEvent_Handles, 8, this._GPSDeviceStateChanged.ToInt32());

  this.Start_NextGPSEvent_Timer(this.PositionFrequency);
  this.SleepingState = SleepingStateType.SleepingBeforeDeviceWakeUp;
  this.OnNextGPSEvent_Callback();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:06:34.897

Windows Mobile 5/6 SDK 中包含的 C# GPS 示例是否有同样的问题？如果是这样，那么这可能是驱动程序问题，您需要与硬件制造商或 OEM 联系。

您可以通过轮询 GPS 驱动程序而不是依赖中间驱动程序接口的位置更改回调来缓解此问题。

没有重置 GPS 硬件的标准方法。GPS 在有程序使用时“开启”，而在没有程序使用时“关闭”（或处于非常低功耗模式）。如果您的 GPS 在 WWAN 芯片上，您可以通过关闭和打开 WWAN 调制解调器来重置它。或者，一些 GPS 芯片接受 ASCII 或二进制串行命令来重置 GPS 本身，但这些是特定于芯片组的。您需要与您的 GPS 芯片组制造商核实这些代码。

您的 GPSID 重置代码（我假设来自[此处](http://msdn.microsoft.com/en-us/library/bb202088.aspx)）与强制所有 GPSID 客户端断开连接使 GPS 处于低功耗状态相同，但实际上可能不会重置硬件。****

# java - 由于多部分信息，解压缩上传的文件失败

> ID：10093708
> 
> 赞同：1
> 
> 时间：2012-04-10T17:41:40.677
> 
> 标签：java, rest, jersey, resteasy, multipart

当我使用 jersey 客户端将其作为多部分上传时，我在解压缩 zip 文件时遇到了一点麻烦。要上传文件，我使用以下代码：

```
FormDataMultiPart form = new FormDataMultiPart().field("file", file,
                MediaType.MULTIPART_FORM_DATA_TYPE);
   service.path(DSCRM_IMPORT_UPLOAD).type(MediaType.MULTIPART_FORM_DATA)
                .accept(MediaType.TEXT_PLAIN).post(ClientResponse.class, form); 
```

服务是一个网络资源。

在服务器端，我的代码如下所示：

```
@Path("/upload")
    @Consumes("multipart/form-data")
    @POST
    public Response importData(@FormDataParam("file") InputStream file)
            throws Exception {
        File newFile = new File("/temp.zip");
        final OutputStream out = new FileOutputStream(newFile);
        try {
            ByteStreams.copy(file, out);
        } finally {
            out.close();
        }

        ZipFile zip = new ZipFile(newFile); 
```

在调用 new ZipFile 时，我总是在打开 zip 文件时遇到错误，我想知道为什么。所以我尝试将流输出到字符串 ang 得到以下结果： --Boundary_1_3753023_1334078932448 Content-Type: multipart/form-data Content-Disposition: form-data; name="file" ... ZIP CONTENT ... --Boundary_1_3753023_1334078932448--

所以我的猜测是，--Boundary ... --Boundary_1_3753023_1334078932448-- 使我的 zip 文件损坏，因此无法打开它。

我是否正确使用了多部分？或者我怎样才能摆脱 --boundary 的东西来成功解压缩我的文件......（我知道 --boundary 的东西对于多部分帖子是正确的，但必须以某种方式获取帖子的内容。 ..)

如果您需要任何进一步的信息，请告诉我，我会发布。

提前谢谢！

TJ

# wpf - 将按钮内容绑定到 DatePicker SelectedDate

> ID：10093713
> 
> 赞同：0
> 
> 时间：2012-04-10T17:42:09.217
> 
> 标签：wpf, xaml, styles, datepicker, controltemplate

我有以下 DatePicker 控件：

```
<DatePicker SelectedDate="{Binding DateFor}" Style="{StaticResource ButtonDatePicker}"/> 
```

`ButtonDatePicker`样式定义如下：

```
<Style x:Key="ButtonDatePicker" TargetType="{x:Type DatePicker}">
    <Setter Property="IsTodayHighlighted" Value="True"/>
    <Setter Property="SelectedDateFormat" Value="Short"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type DatePicker}">
                <Grid>
                    <Button x:Name="PART_Button" Content="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DatePicker}}, Path=SelectedDate.Date}"/>

                    <Grid IsHitTestVisible="False" Opacity="0">
                        <Popup x:Name="PART_Popup" AllowsTransparency="True" Placement="Bottom" StaysOpen="False"/>
                    </Grid>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我想将Button 的`Content`属性绑定到DatePicker 本身的属性。我试过这样：`PART_Button``SelectedDate.Date`

```
Content="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DatePicker}}, Path=SelectedDate.Date}" 
```

但它不起作用。Button 的内容一直是​​“显示日历”（我没有设置），如下图所示。

![在此处输入图像描述](../Images/02d6732205e5ac6759b780b43c2dd755.png)

你对这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:59:32.290

更改 Button 以使用 TextBlock 作为其内容：

```
<Button x:Name="PART_Button">
    <TextBlock Text="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DatePicker}}, Path=SelectedDate.Date}"/>
</Button> 
```

# asp.net-mvc-3 - asp.net mvc 使用线程安全设置会话值

> ID：10093715
> 
> 赞同：2
> 
> 时间：2012-04-10T17:42:11.337
> 
> 标签：asp.net-mvc-3, session, thread-safety

在我的 asp.net MVC 项目中，我有一个会话助手类，用于设置和检索会话值。这是课程：

```
public class SessionManager
{
     public static string UserName
    {
        get
        {
            return HttpContext.Current.Session[SessConstants.UName] ;
        }
        set
        {
            HttpContext.Current.Session[SessConstants.UName] = value;
        }
    }
} 
```

如您所见，属性是静态的。我在我的代码中使用它，如下所示：

```
//For setting values    
SessionManager.UserName = "";

//For retrieving values
strLoggedinUser = SessionManager.UserName; 
```

问题：

1.  像这些线程这样的静态属性设置为 HttpContext.Current.Session['someVar'] 是否安全？
2.  我是否应该创建一个实例属性并在我从 MVC 控制器类继承的基本控制器中实例化 SessionManager。然后我可以让我的所有控制器继承我的自定义控制器而不是 MVC 控制器

想法？

谢谢你的时间...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:17:46.957

这是一个想法。（可能不完全是您问题的答案，但我认为 Maess 在评论中处理了这个问题。）

与其有一个单独的`SessionManager`类来封装会话状态变量，为什么不使用扩展方法呢？

```
public static class SessionExtensionMethods
{
    private const string SessionUserNameKey = "UName";

    // set the session value (pass null to remove)
    public static void UserName(this HttpSessionStateBase session, string value)
    {
        if (value == null) session.Remove(SessionUserNameKey);
        else session[SessionUserNameKey] = value;
    }

    // get the session value
    public static string UserName(this HttpSessionStateBase session)
    {
        var value = session[SessionUserNameKey];
        return value != null ? value.ToString() : null;
    }
} 
```

然后，在您的控制器中，您可以执行此操作来获取和设置会话值：

```
// set the value
Session.UserName("SomeUserName");

// get the value
var sessionUserName = Session.UserName();

// clear the value 
Sesssion.UserName(null); 
```

这里不需要基本控制器类。您需要做的就是确保您的控制器引用`SessionExtensionMethods`声明该类的命名空间。

# mysql - JPA：MySQL说表不存在，但实际上存在

> ID：10093718
> 
> 赞同：3
> 
> 时间：2012-04-10T17:42:17.913
> 
> 标签：mysql, eclipse, jpa, jpa-2.0, glassfish-3

我有以下脚本来创建表 autolife.log：

```
CREATE TABLE `log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `idpoint` int(11) NOT NULL,
  `value` varchar(10) NOT NULL,
  `time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `fk_point_id` (`idpoint`),
  CONSTRAINT `fk_point_id` FOREIGN KEY (`idpoint`) REFERENCES `point` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=155562 DEFAULT CHARSET=latin2$$ 
```

所以我使用`JPA Tools`Eclipse Indigo 中的表创建实体：

```
@Entity
public class Log implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @SequenceGenerator(name="LOG_ID_GENERATOR", sequenceName="SEQUENCE_KEY")
    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="LOG_ID_GENERATOR")
    private Integer id;

    private Timestamp time;

    private String value;

    //bi-directional many-to-one association to Point
    @ManyToOne
    @JoinColumn(name="idpoint")
    private Point point;

    public Log() {
    }

    // get's and set's 
```

当我在本地计算机上运行时，工作正常，但是当我导出 .war 并投入生产时，出现此错误（您可以在下面看到代码生成的异常）：

```
ubuntu@domU-12-31-39-0A-12-7B:~/glassfish/glassfish3/glassfish/domains/domain1/logs$ vi server.log
        at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:193)
        at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeSelectCall(DatasourceCallQueryMechanism.java:264)
        at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.selectAllRows(DatasourceCallQueryMechanism.java:646)
        at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectAllRowsFromTable(ExpressionQueryMechanism.java:2611)
        at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectAllRows(ExpressionQueryMechanism.java:2570)
        at org.eclipse.persistence.queries.ReadAllQuery.executeObjectLevelReadQuery(ReadAllQuery.java:420)
        at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeDatabaseQuery(ObjectLevelReadQuery.java:1081)
        at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:844)
        at org.eclipse.persistence.queries.ObjectLevelReadQuery.execute(ObjectLevelReadQuery.java:1040)
        at org.eclipse.persistence.queries.ReadAllQuery.execute(ReadAllQuery.java:392)
        at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeInUnitOfWork(ObjectLevelReadQuery.java:1128)
        at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2871)
        at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1516)
        at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1498)
        at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1463)
        at org.eclipse.persistence.internal.jpa.EJBQueryImpl.executeReadQuery(EJBQueryImpl.java:485)
        at org.eclipse.persistence.internal.jpa.EJBQueryImpl.getResultList(EJBQueryImpl.java:742)
        at com.brainset.eao.LogEAO.list(LogEAO.java:54)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
        at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
        at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
        at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
        at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
        at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
        at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
        at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
        at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
        at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
        at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
        at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
        at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
        ... 44 more
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table 'autolife.LOG' doesn't exist
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
        at com.mysql.jdbc.Util.getInstance(Util.java:386)
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1052)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4098)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4030)
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2677)
        at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2134)
        at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2300)
        at com.sun.gjc.spi.jdbc40.PreparedStatementWrapper40.executeQuery(PreparedStatementWrapper40.java:642)
        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeSelect(DatabaseAccessor.java:931)
        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:607)
        ... 88 more
|#] 
```

如您所见，它表示该表不存在，但存在我从本地主机数据库导出并导入到生产主机。但仍然给出这个错误：

```
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table 'autolife.LOG' doesn't exist 
```

我应该在这里做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T17:51:57.463

MySQL 表名是否区分大小写[取决于操作系统](http://dev.mysql.com/doc/refman/5.0/en/identifier-case-sensitivity.html)，我想这就是原因：

> 在 MySQL 中，数据库对应于数据目录中的目录。数据库中的每个表对应于数据库目录中的至少一个文件（可能更多，取决于存储引擎）。因此，底层操作系统的大小写敏感性在数据库和表名的大小写敏感性中起作用。这意味着数据库和表名在 Windows 中不区分大小写，而在大多数 Unix 中区分大小写。一个值得注意的例外是 Mac OS X，它基于 Unix，但使用不区分大小写的默认文件系统类型 (HFS+)。但是，Mac OS X 也支持 UFS 卷，它与任何 Unix 一样区分大小写。

因此，您需要在正确的情况下明确设置表名：

```
@Entity @Table(name = "log")
public class Log implements Serializable { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:52:52.623

很酷的问题。关于什么

```
USE <Database Name>
GO 
```

执行脚本之前的子句？

通常所有的 SP，表在执行前都有这 2 行

# ruby-on-rails-3 - 如何使用非标准关系名称指定嵌套 CanCan 授权？

> ID：10093725
> 
> 赞同：3
> 
> 时间：2012-04-10T17:42:46.893
> 
> 标签：ruby-on-rails-3, cancan, nested-resources

我使用 Devise 进行身份验证，使用 CanCan 进行授权。

## 目标

我有两个模型：User 和 Sponsorship，其中 Sponsorship 提供了 has_many :through user-as-sponsor 和 user-as-client 之间的关系。

我想配置 CanCan 以便具有`sponsor?`特权的用户可以管理他或她自己的赞助，也就是说，只有`Sponsorship#client_id == user.id`. 用户还可以拥有`admin?`特权，在这种情况下，他或她可以管理任何赞助。

## 模型

```
class User < ActiveRecord::Base
  has_many :sponsor_links, :class_name => 'Sponsorship', :foreign_key => 'client_id'
  has_many :sponsors, :through => :sponsor_links, :class_name => 'User'

  has_many :client_links, :class_name => 'Sponsorship', :foreign_key => 'sponsor_id'
  has_many :clients, :through => :client_links, :class_name => 'User'

  def has_role?(role)
    ... return true if this user has <role> privileges
  end
end

class Sponsorship
  belongs_to :sponsor, :class_name => 'User'
  belongs_to :client, :class_name => 'User'
end

class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new  # handle guest user (not logged in)
    if user.has_role?(:admin)
      can :manage, :all
    elsif user.has_role?(:sponsor)
      # not sure if the third argument is correct...
      can :manage, Sponsorship, :sponsor => {:user_id => user.id}
    end
  end
end 
```

## 路线

我设置了嵌套路由来反映赞助用户拥有他或她的客户的事实：

```
resource :users, :only => [:index]
  resource :sponsorships
end 
```

## 问题

在我的 SponsorshipsController 中加载和授权用户和赞助资源的正确方法是什么？

## 我试过的

这类似于 CanCan 轻松处理的普通嵌套资源。但是这些关系具有非标准名称（例如：sponsor_links 而不是：sponsorships），而且我还没有弄清楚如何`load_and_authorize_resource`在我的 SponsorshipsController 中配置声明。

在我尝试过的许多不起作用的事情中；），这是更简单的版本之一。（另请注意，我的能力可能没有正确设置——见上文）：

```
class SponsorshipsController < ApplicationController
  load_and_authorize_resource :sponsor_links, :class_name => "User"
  load_and_authorize_resource :sponsorships, :through => :sponsor_links
  respond_to :json

  # GET /users/:user_id/sponsorships.json
  def index
    respond_to @sponsorships
  end

  # GET /users/:user_id/sponsorships/:id.json
  def show
    respond_to @sponsorship
  end
end 
```

通过抢救 CanCan::AccessDenied 错误，我知道：

*   在`index`使用`:sponsor`用户时，用户的身份验证失败。
*   在`index`使用`:admin`用户时，赞助的身份验证失败。
*   在`show`中，无论角色如何，发起人的身份验证都会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T02:55:02.273

## 部分答案

第一个问题是在能力规范中，内容如下：

```
...if user.has_role?(:sponsor)
  can :manage, Sponsorship, :sponsor => {:user_id => user.id}
end 
```

但应该只是

```
...if user.has_role?(:sponsor)
  can :manage, Sponsorship, :user_id => user.id
end 
```

（记住，孩子们，[单元测试](https://github.com/ryanb/cancan/wiki/Testing-Abilities)是你的朋友！不知何故我忘记了那节课。）

在控制器中，我还更改了：

```
 load_and_authorize_resource :sponsor_links, :class_name => "User"
  load_and_authorize_resource :sponsorships, :through => :sponsor_links 
```

只是

```
 load_and_authorize_resource :user
  load_and_authorize_resource :sponsorship 
```

这*主要是*有效的：它设置@user 和@sponsorship 并授权访问它们。但是 index 函数会加载 current_user 可以访问的所有赞助，而不仅仅是 :user_id 拥有的赞助。我的修复——可能不是最优的——是从

```
 def index
    respond_with(@user, @sponsorships)
  end 
```

至

```
 def index
    @sponsorships = @sponsorships.where(:sponsor_id => @user.id)
    respond_with(@user, @sponsorships)
  end 
```

有了这些改变，一切都奏效了。

如果有人有更合适的方式来表达这一点，我想知道。

# c# - 获取 LINQ-to-SQL 变更集中对象的原始副本

> ID：10093727
> 
> 赞同：3
> 
> 时间：2012-04-10T17:42:59.573
> 
> 标签：c#, linq-to-sql

使用 LINQ-to-SQL 时，可以通过调用`DataContext.GetChangeSet()`. 如果存在冲突，该`DataContext.ChangeConflicts`属性将为您提供对原始对象和更改对象的引用。如果没有冲突，有没有办法访问原始和更改的对象？

这需要适用于不实现`INotifyPropertyChanging`/的实体`INotifyPropertyChanged`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T03:30:35.287

```
var db = new DataContext();
db.GetChangeSet().Updates.ForEach(o => {
    var currentObject = o;
    var originalObject = db.GetTable(o.GetType()).GetOriginalEntityState(o);
    var changedProperties = db.GetTable(o.GetType()).GetModifiedMembers(o);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:42:45.373

我无法找到通过公共 API 执行此操作的方法。但是，如果您愿意稍微使用反射（最好是[一些编译的表达式来调用任何方法、构造函数和 get 访问器](http://bloggingabout.net/blogs/vagif/archive/2010/04/02/don-t-use-activator-createinstance-or-constructorinfo-invoke-use-compiled-lambda-expressions.aspx)），则可以获取数据。

这是您需要做的：

1.  获取对您实例的私有`services`字段的引用。`DataContext`
2.  创建一个`System.Data.Linq.ChangeProcessor`. 这是一个内部类，当您调用`DataContext.GetChangeset()`. 传入`services`来自步骤 1 的引用以及对`DataContext`实例的引用。
3.  `GetOrderedList`针对您的`ChangeProcessor`实例调用私有且无参数的方法。这会给你一个`List<TrackedObject>`. 不幸的是，由于`TrackedObject`它也是一个内部类，因此您还需要使用反射来访问其属性。
4.  我们正在寻找的对象在实例的`Current`和`Original`属性中。`TrackedObject`它还有一些其他有用的属性，例如`IsNew`、`IsModified`和`IsDeleted`，它们都是不言自明的，还有`IsInteresting`，我假设它们代表了前三个属性中的任何一个为真。

当然，由于这些都是内部 API，因此在框架更新时它们可能会发生变化，因此在使用此逻辑时请记住这一点。

# java - java中的ArrayList排序

> ID：10093731
> 
> 赞同：0
> 
> 时间：2012-04-10T17:43:11.953
> 
> 标签：java, sorting, arraylist

我是多个具有实现 Comparator 接口的自定义对象的 ArrayList。这些多个列表可能具有相同的对象。我的要求是每个列表都可以有自己的顺序

例如：

列表 1 可以包含 4 个对象 Obj2、Obj4、Obj1、Obj3 列表 2 可以包含 5 个对象 Obj4、Obj3、Obj5、Obj1、Obj2

如果我在 List1 中为每个自定义对象分配一个 (0,1,2,3,4) 的 id 并在 ArrayList 上使用 sort 方法，我认为如果我有一个列表，它将对我有用。

但我不能这样做，因为对于 List2，相同的对象需要以不同的顺序排列。有没有办法可以使用比较器并依赖 Collections 框架为我排序，而不是我必须为每个 ArrayList 维护一个单独的订单列表？

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:51:09.330

编写一个自定义比较器，然后使用 Collections.sort(list, 比较器)。您可以有两个（或您需要多少个）比较器，以允许您根据不同的参数对对象进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:52:25.670

要么使用自定义编写的比较器 impl：

```
Collections.sort(list, new Comparator<Comparable<?>>() {
        @Override
        public int compare(final Comparable o1, final Comparable o2) {
            // Compare two objects, might not be the same type
        }
    }); 
```

或者，最好让所有被相互比较的类都实现一个公共接口`CustomComparableIntf`，然后实现`Comparable<CustomComparableIntf>`，以便将它们作为该接口的实现进行比较，而不是它们的具体类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T20:48:08.797

为了以不同的顺序保存列表，您需要拥有此列表的副本。如果您只保留对一个列表的多个引用，那么对一个引用进行排序也会影响其他引用。

不要担心一个列表有多个副本。列表本身也有内容作为参考。因此，如果您从另一个列表创建新列表，您将创建列表的副本，但不会创建列表中元素的副本。它们作为参考保存在列表中，不会受到任何影响。

# php - 我需要学习制作一个简单的搜索框的概念

> ID：10093732
> 
> 赞同：-3
> 
> 时间：2012-04-10T17:43:12.180
> 
> 标签：php, jquery, mysql

好吧，我有一个简单的页面，显示来自数据库的 PHP 和 MySQL 记录。我想做一个简单的搜索框来搜索页面上显示的记录。我想最好使用 Jquery 来做到这一点，我是 jQuery 的新手。为了开始，我需要了解哪些概念？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:46:10.697

我认为您正在寻找的是来自 jquery 的一个很好的插件，在它完美运行之前我使用了以下插件。

[http://lomalogue.com/jquery/quicksearch/](http://lomalogue.com/jquery/quicksearch/)

我希望它有帮助

# jquery - Rails 中的 flash 消息在哪里？

> ID：10093734
> 
> 赞同：0
> 
> 时间：2012-04-10T17:43:24.467
> 
> 标签：jquery, ruby-on-rails, ruby, ruby-on-rails-3

好的，所以我有一个删除用户按钮

```
 <button id="delete" data="<%= user_path(@user) %>">Delete User</button> 
```

这是使用jquery ui

```
 $("#delete").button(); 
```

我想要点击删除用户所以我有

```
 $("#delete").click(function(){
      if(confirm("Are you sure?")){
          var url = $(this).attr('data');
          $.post(url, {_method:'delete'}, null, "script");
          document.location = '<%= users_path %>';
          return false;
      } else {
          return false;
      }
   }); 
```

一切都很好，但是当页面刷新时，我的销毁操作没有闪光

```
def destroy
  User.find(params[:id]).destroy
  flash[:success] = "User deleted."
  redirect_to users_path
end 
```

关于如何解决这个问题或重组我所做的任何建议。我不能只使用 link_to 或 button_to 进行样式设置

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T17:48:16.623

Flash 数据仅针对以下请求存在。它正在被您的 AJAX 回发“吃掉”。

当您`post`通过时`$.post`，您实际上是在发出两个请求；请求`delete`遵循重定向并向. *该*请求会看到闪存数据。然后，当您将您的设置为时，将不再有任何要呈现的闪存数据。`get``users_path`*`document.location``users_path`*

 *您绝对不应该通过手动 AJAX 来处理这个问题。允许您的链接像常规链接一样被点击，并允许 Rails 的 UJS 处理回发/确认对话框。除非您做错了什么，否则这*绝不会影响您设置链接样式的能力。**

# java - Android，在tomcat服务器上传文件

> ID：10093740
> 
> 赞同：0
> 
> 时间：2012-04-10T17:43:41.447
> 
> 标签：java, android, tomcat, file-upload

我正在寻找可以从我的 android 应用程序在 tomcat 服务器中快速上传图像的代码。

目前我还没有找到要放置在 tomcat 服务器（servlet）中的 java 代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:14:57.797

这是演示代码。

```
import javax.servlet.*;
import javax.servlet.http.*;
import java.io.*;
import org.apache.commons.fileupload.*;
import org.apache.commons.fileupload.util.*;
import org.apache.commons.fileupload.servlet.ServletFileUpload;
public class UploadServlet extends HttpServlet{
  protected void doPost(HttpServletRequest request, HttpServletResponse response) 
     throws ServletException, IOException {
   PrintWriter out = response.getWriter();
   out.print("Request content length is " + request.getContentLength() + "<br/>"); 
   out.print("Request content type is " + request.getHeader("Content-Type") + "<br/>");
   boolean isMultipart = ServletFileUpload.isMultipartContent(request);
   if(isMultipart){
              ServletFileUpload upload = new ServletFileUpload();
       try{
              FileItemIterator iter = upload.getItemIterator(request);
              FileItemStream item = null;
              String name = "";
              InputStream stream = null;
              while (iter.hasNext()){
                                     item = iter.next();
                                     name = item.getFieldName();
                                     stream = item.openStream();
                if(item.isFormField()){out.write("Form field " + name + ": " 
                                           + Streams.asString(stream) + "<br/>");}
                else {
                      name = item.getName();
                      if(name != null && !"".equals(name)){
                         String fileName = new File(item.getName()).getName();
                         out.write("Client file: " + item.getName() + " <br/>with file name "
                                                    + fileName + " was uploaded.<br/>");
                         File file = new File(getServletContext().getRealPath("/" + fileName));
                         FileOutputStream fos = new FileOutputStream(file);
                         long fileSize = Streams.copy(stream, fos, true);
                         out.write("Size was " + fileSize + " bytes <br/>");
                         out.write("File Path is " + file.getPath() + "<br/>");
                      }
                   }
              }
          } catch(FileUploadException fue) {out.write("fue!!!!!!!!!");}
   } 
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:48:59.460

使用
[http://commons.apache.org/fileupload/](http://commons.apache.org/fileupload/)
或者如果您使用的是 Tomcat 7，则使用 Servlet 3.0 API

# php - Opencart & vqmod - 搜索多行 - 似乎找不到我要找的东西，是因为制表符/空白吗？

> ID：10093745
> 
> 赞同：0
> 
> 时间：2012-04-10T17:44:20.197
> 
> 标签：php, xml, opencart

我正在尝试使用 vqmod 为 opencart 实现一个名为“附加说明”的新自定义字段。

在我的 vqmod xml 文件中，我试图添加一个额外的行

> admin/view/template/catalog/product_form.tpl

我希望这个字段出现在现有的“描述”字段下方，所以我使用以下代码：

```
 <file name="admin/view/template/catalog/product_form.tpl">
        <operation error="skip">
            <search position="after"><![CDATA[
            <tr>
                <td><?php echo $entry_description; ?></td>
                <td><textarea name="product_description[<?php echo $language['language_id']; ?>][description]" id="description<?php echo $language['language_id']; ?>"><?php echo isset($product_description[$language['language_id']]) ? $product_description[$language['language_id']]['description'] : ''; ?></textarea></td>
            </tr>
            ]]></search>
            <add><![CDATA[
            <tr>
                <td><?php echo $entry_description_additional; ?></td>
                <td><textarea name="product_description_additional[<?php echo $language['language_id']; ?>][description_additional]" id="description_additional<?php echo $language['language_id']; ?>"><?php echo isset($product_description_additional[$language['language_id']]) ? $product_description_additional[$language['language_id']]['description_additional'] : ''; ?></textarea></td>
              </tr>
            ]]></add>
        </operation>
    </file> 
```

但是，它似乎没有找到插入新代码的位置。当我输入一行代码时，它会正确找到并插入它，但在搜索块时却没有。空格/制表符等有问题吗？我直接从 product_form.tpl 粘贴代码，所以我不确定发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:13:48.400

Vqmod 将无法匹配 Ll。它仅限于单行

尝试使用它来匹配它

```
<search position="after" offset="2"><![CDATA[echo $entry_description;]]></search> 
```

# android - 如何将可绘制形状添加为整数？

> ID：10093747
> 
> 赞同：1
> 
> 时间：2012-04-10T17:44:30.323
> 
> 标签：android, gridview, drawable, shape

我有一个带有网格视图的日历，所以用小块（天）填充日历看起来像这样：

```
adapter = new GridCellAdapter(getApplicationContext(), R.id.calendar_day_gridcell, month, year); 
```

R.id.calendar_day_gridcell 分隔在一个 xml 文件中：

```
<Button
        android:id="@+id/calendar_day_gridcell"
        android:layout_gravity="center"
        android:textColor="#000000"
        android:background="@drawable/calendar_button_selector"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:layout_width="45dip"
        android:layout_height="45dip">
    </Button> 
```

而 calendar_button_selector 是另一个 xml 文件：

```
<selector
    xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:state_pressed="true"
        android:drawable="@drawable/calendar_bg_orange" /> <!-- pressed -->
    <item
        android:state_focused="true"
        android:drawable="@drawable/calendar_bg_orange" /> <!-- focused -->
    <item
        android:drawable="@drawable/grid_cell_sajat" /> <!-- default -->
</selector> 
```

在 grid_cell_sajat 我有一个带有一些渐变等的形状。它工作得很好。我怎样才能以编程方式做这些事情？

```
 int colorsxx[] = { 0xff393939 , 0xffffffff };

        GradientDrawable g = new GradientDrawable(GradientDrawable.Orientation.BOTTOM_TOP, colorsxx);
        g.setStroke(3, Color.BLACK);
        GradientDrawable g2 = new GradientDrawable(GradientDrawable.Orientation.TOP_BOTTOM, colorsxx);
        g2.setStroke(3, Color.BLACK);
        g.setBounds(10, 10, 10, 10);

        StateListDrawable stld = new StateListDrawable();
       stld.addState(new int[] {-android.R.attr.state_enabled},  g);
       stld.addState(new int[] { android.R.attr.state_pressed }, g2);

adapter = new GridCellAdapter(getApplicationContext(), R.id.calendar_day_gridcell, month, year); 
```

'stld' 是一个可绘制对象，但适配器需要一个整数。如何为适配器设置它，或者以某种方式将其转换为“整数类型”？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:49:12.483

很高兴它有帮助，所以答案是：您是否尝试将其设置为背景？应该适用于大多数（所有？）视图。使用 view.setBackground(R.drawable.calendar_button_selector); 我想 calendar_button_selector 需要在 drawable 文件夹中才能工作。

# java - 在 HTTPS 下从 IIS 7.5 提供 Java Applet 的 ClassNotFoundException

> ID：10093751
> 
> 赞同：0
> 
> 时间：2012-04-10T17:44:46.540
> 
> 标签：java, ssl, https, applet, iis-7.5

我在尝试从 IIS 7.5 提供的 .net aspx 页面运行 Java Applet 时遇到问题。如果我使用 HTTP 一切运行良好，但如果我尝试使用 HTTPS，我会在我为 applet 编写的类上得到 java.lang.ClassNotFoundException。如果我尝试使用 HTTPS 直接访问 jar，我可以很好地下载它，并且类文件位于 jar 文件中。我正在使用以下 javascript 来尝试运行小程序：

```
$(function () {
    var applet = "<APPLET code=\"JavaApplet\"";
    applet += "archive=\"JavaApplet.jar\"";
    applet += "width=200 height=200 VIEWASTEXT>";
    applet += "</APPLET>";

    document.write(applet);
}); 
```

我也尝试过从标签加载它并使用 JNLP 并获得相同的结果。有人对为什么会发生这种情况有任何想法吗？如果需要，我可以提供有关我的设置的更多信息。提前致谢。

编辑：我也尝试过将 deployJava.js 与以下 javascript 一起使用，结果相同：

```
$(function () {
    var attributes = { code: 'JavaApplet',
        archive: 'JavaApplet.jar',
        width: 200, height: 200
    };
    var parameters = { };
    var version = '1.6';
    deployJava.runApplet(attributes, parameters, version);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:57:00.153

由于我的测试环境的设置方式，这似乎正在发生。我正在为页面 SSL 使用开发证书。在使用有效证书设置的生产服务器上的测试页面测试此小程序后，使用 SSL 时一切看起来都按预期工作。

# php - PHP 相当于 nth-child

> ID：10093754
> 
> 赞同：2
> 
> 时间：2012-04-10T17:44:51.960
> 
> 标签：php, wordpress, css-selectors

我有一个 PHP 项目数组（WordPress 帖子），我循环创建一个 3x3 的帖子网格。
使用 jQuery，我将 CSS 类应用于中间列项，如下所示：
`$('#grid li:nth-child(3n+2)').addClass('middle');`

我怎样才能在 PHP 中实现这一点？我可以设置一个匹配的计数器`2,5,8,11, etc...`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:52:27.050

你知道 PHP 中的循环吗？在不了解您在 PHP 代码中究竟想实现什么的情况下，我只能建议如下内容：

```
$posts = array(); //The whatever thing that contains the posts you are concerned about
for ($i = 1; $i<=count($posts); $i++) {
    if($i == /*selector condition*/) {
        //do what you do with the targeted posts
    } else {
        //do what you do with all others
    }
} 
```

（见[http://www.w3schools.com/php/php_looping_for.asp](http://www.w3schools.com/php/php_looping_for.asp)）

小旁注：您通常会从 $i=0 开始计数，但我假设如果您在谈论帖子，它们可能会从 1 而不是 0 开始计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-29T11:11:37.410

```
function nthChild($multiplier, $addition, $max)
{
    $validInedexes = array();

    for ($n = 0; $n < $max; $n++)
    {
        $idx = $multiplier * $n + $addition;
        if ($idx > $max)
        {
            return $validInedexes;
        }
        $validInedexes[] = ($idx - 1);
    }
} 
```

上述函数将根据输入为您提供有效索引。然后在任何循环中按索引匹配。为此使用 in_array 函数或任何您喜欢的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T18:00:17.603

$my_query = new WP_Query('category_name=special_cat&posts_per_page=10'); ?>

```
$query = new WP_Query('...');
$posts = ($count = $query->post_count) ? range(1, $count) : array();
foreach (array_chunk($posts, 3) as $row => $rowIndexes)
{
    foreach ($rowIndexes as $column => $index)
    {
        $query->the_post();
        $middle = $column === 1;
        ...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T21:11:23.023

`:nth-child(3n+2)`将会：

```
$count = count($arr);
for($i = 0, $idx = 0; $idx < $count - 1; $idx = 3 * $i + 2, $i++) {
    print_r($arr[$idx]);
} 
```

当然，这只会给你那些特定的项目。如果您想要所有项目并且只在这些元素上运行一段代码，那么我不知道......但是。

# jquery - jQuery脚本在输入时验证数字

> ID：10093757
> 
> 赞同：0
> 
> 时间：2012-04-10T17:45:04.433
> 
> 标签：jquery, numeric

我想知道是否可以使用 jQuery 执行以下任务：防止用户输入大于 10 或小于 0 的数字。

例如，像 9.10 这样的数字是可以的，但 81、10.01、11 或负数是错误的值。

为了更好地了解情况，验证是为了在测试后输入成绩。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:24:08.120

此代码仅允许您在框中输入数字，并且不会接受任何会使数字小于 0 和大于 10 的输入。

```
var $grade = $('#grade');

$grade.keydown( function (e) {
    var code = e.which,
        chr = String.fromCharCode(code), // key pressed converted to s string
        cur = $grade.val(),
        newVal = parseFloat(cur + chr); // what the input box will contain after this key press

    // Only allow numbers, periods, backspace, tabs and the enter key
    if (code !== 190 && code !== 8 && code !== 9 && code !== 13  && !/[0-9]/.test(chr)) {
        return false;
    }

    // If this keypress would make the number
    // out of bounds, ignore it
    if (newVal < 0 || newVal > 10) {
        return false;
    }

}); 
```

[http://jsfiddle.net/WPdVq/](http://jsfiddle.net/WPdVq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:00:21.040

如果你想在他们退出输入字段时显示一些东西，你可以使用[change 事件](http://api.jquery.com/change/)：

```
$('.target').change(function() {
    if($(this).val() > 10) {
        // Do something, like warn them and/or reset to empty text.
        alert('Greater than 10.');
        $(this).val('');
    }       
}); 
```

[jsfiddle 工作示例](http://jsfiddle.net/absynce/bRxJT/)

或者，如果你想在每次击键后显示一些东西，你可以使用[keyup](http://api.jquery.com/keyup/)事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:17:14.350

I suggest this library: [jquery-numeric](https://github.com/byllc/jquery-numeric)

The homepage of the plug-in is here: [http://code.webmonkey.uk.com/plugins/](http://code.webmonkey.uk.com/plugins/)

There is a demo and use can viewsource to see the use of it:

[http://code.webmonkey.uk.com/plugins/jquery.numeric/test.html](http://code.webmonkey.uk.com/plugins/jquery.numeric/test.html)

# hibernate - JPA：是否可以将派生类保存在其自己的表中，其中引用的字段是 MappedSuperclass？

> ID：10093758
> 
> 赞同：0
> 
> 时间：2012-04-10T17:45:08.973
> 
> 标签：hibernate, ejb, jpa-2.0

是否可以执行以下操作...

我有一个名为 Action 的 MappedSuperclass：

```
@MappedSuperclass
public class Action extends EntityBase
{
    private static final long serialVersionUID = 2604473746836781718L;

    private String event;

    public String getEvent()
    {
        return event;
    }

    public void setEvent(String event)
    {
        this.event = event;
    }
} 
```

此外，我有 2 个从此类派生的类（实体），例如 GenericAction：

```
@Entity
@Table(name = "GENERIC_ACTION")
@AttributeOverrides({@AttributeOverride(name = "id", column = @Column(name = "GAC_ID")),
        @AttributeOverride(name = "version", column = @Column(name = "GAC_VERSION")), @AttributeOverride(name = "event", column = @Column(name = "GAC_EVENT"))})
public class GenericAction extends Action
{
    private static final long serialVersionUID = 2694061082912048881L;

    @Column(name = "GAC_PAYLOAD")
    private String payload;

    public String getPayload()
    {
        return payload;
    }

    public void setPayload(String payload)
    {
        this.payload = payload;
    }
} 
```

在另一个名为 Journal 的实体中，有这个 Action 属性集：

```
@Entity
@Table(name = "JOURNAL")
@AttributeOverrides({@AttributeOverride(name = "id", column = @Column(name = "JRN_ID")),
        @AttributeOverride(name = "version", column = @Column(name = "JRN_VERSION"))})
public class Journal extends EntityBase
{
    private static final long serialVersionUID = 2525323851057436815L;

    @Column(name = "JRN_ACTION")
    private Action action;
} 
```

在我的代码中，我实例化了 GenericAction 并使用 Journal 的 setter 进行设置。当 Journal 将被持久化时，它应该将 GenericAction 的内容保存在自己的表中，但这不会发生。它将GenericAction 的字节码保存到Journal 的Action 字段中。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:29:03.693

如果我正确地回答了您的问题，您可能应该考虑以下问题

```
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS) 
```

默认继承启动是 SINGLE_TABLE。至少 JPA 规范说明了这一点。我很确定 Hibernate 在此遵循 JPA 规范

看看这里

[http://docs.jboss.org/ejb3/app-server/HibernateAnnotations/reference/en/html_single/index.html](http://docs.jboss.org/ejb3/app-server/HibernateAnnotations/reference/en/html_single/index.html)

我省略了另外一件事：您必须在您的操作属性上放置 @OneToOne 或 @ManyToOne 注释，这样您才能加入实体，否则它只会序列化操作属性

# mysql - SQL 更新 Where 语句

> ID：10093765
> 
> 赞同：0
> 
> 时间：2012-04-10T17:45:55.813
> 
> 标签：mysql, select

我有一张带有相应listing_id 和位置的图像表。

image_name、listing_id、位置

*   每个listing_id 可以有多个图像。
*   每个图像都有一个表示显示顺序的整数位置

如果listing_id 在位置1 没有图像，我想为该listing_id 取最低位置并将其设置为位置1。

就像是：

```
update media_table set position = 1 where ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T17:52:57.117

**通过 @ypercube**的语法修复，该查询现在适用于 MySQL：

```
UPDATE media_table m
JOIN (
    SELECT listing_id, min(position) AS position
    FROM   media_table
    GROUP  BY listing_id
    HAVING min(position) > 1
    ) x ON (m.listing_id, m.position) = (x.listing_id, x.position)
SET    m.position = 1; 
```

解释：

在子查询中找到`linsting_id`最小值`position`大于 1 的所有位置。使用这些发现立即更新行。我认为`(listing_id, position)`是独一无二的。

[请参阅 MySQL 的工作演示。](http://sqlfiddle.com/#!2/087b2/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:51:01.363

```
UPDATE media_table
SET position=(SELECT MIN(position) FROM media_table)
WHERE listing_id IS NULL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T18:04:55.087

试试这个：

```
update images i1,
( select i1.image_name, i1.listing_id from images i1
  left join images i2
  on i1.listing_id = i2.listing_id and i1.position > i2.position
  where i2.position is null and i1.position != 1
) f
set position = 1
where i1.image_name = f.image_name and i1.listing_id = f.listing_id; 
```

这假设您可以通过 识别记录`image_name, listing_id`。如果您可以这样做，`image_name`那么查询会更简单，因为您可以删除`listing_id`比较和选择。

# linux - linux下带火线摄像头的opencv

> ID：10093769
> 
> 赞同：2
> 
> 时间：2012-04-10T17:46:06.327
> 
> 标签：linux, opencv

我的困惑与设备驱动程序的主要/次要数量有关，因为它们与使用 VideoCapture() 例程有关（我的开发环境是 ubuntu 10.10）。

当 OpenCV 文档说“相机索引”时，它是指 /dev/video0 设备的次要编号吗？那么当我使用 VideoCapture(0) 实例化时，它会使用第一个 /dev/video0 驱动程序吗？

当我除了 USB 摄像头外还有火线摄像头时会发生什么？我的火线相机使用 /dev/raw1394 设备，但它的市长编号不同，但次要编号 0 相同。

所以，我的问题基本上是如何为 VideoCapture ctor 指定设备（不是“相机索引”或默认相机）？

谢谢，

-安德烈斯

# mysql - MySQL - 查找接近的匹配项

> ID：10093774
> 
> 赞同：1
> 
> 时间：2012-04-10T17:46:25.580
> 
> 标签：mysql

MySQL 中有没有办法在文本字段中查找匹配项？`me@email.com`搜索时说 find `me1@email.com`？

因此，基本上，如果用户正在搜索自己的电子邮件地址，并且它最初被错误地输入到数据库中，那么如果稍微偏离，它就会抛出一个潜在的匹配项

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T18:14:46.020

用模式匹配解决这类问题将是一件令人头疼的事情。

> 两个字符串之间的 Levenshtein 距离是将一个字符串转换为另一个字符串所需的最小操作数，其中一个操作可能是插入、删除或替换一个字符。

看看[这个](http://www.artfulsoftware.com/infotree/queries.php#552)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:48:30.687

尝试从一些[模式匹配](http://dev.mysql.com/doc/refman/5.0/en/pattern-matching.html)开始。

> SQL 模式匹配使您可以使用“_”匹配任何单个字符，使用“%”匹配任意数量的字符（包括零个字符）。在 MySQL 中，SQL 模式默认不区分大小写。此处显示了一些示例。使用 SQL 模式时不要使用 = 或 <>；请改用 LIKE 或 NOT LIKE 比较运算符。

# java - Spring MVC InternalResourceViewResolver - 无法显示我的页面

> ID：10093775
> 
> 赞同：1
> 
> 时间：2012-04-10T17:46:29.613
> 
> 标签：java, spring, spring-mvc

我试图学习`org.springframework.web.servlet.view.InternalResourceViewResolver`

我遵循了本教程： [http ://www.mkyong.com/spring-mvc/spring-mvc-internalresourceviewresolver-example/](http://www.mkyong.com/spring-mvc/spring-mvc-internalresourceviewresolver-example/)

但我无法让它工作。我收到“请求的资源 (/**/) 不可用”

这是我的 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" `xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">`
<display-name>Spring Web MVC Application</display-name>

  <servlet>
    <servlet-name>mvc-dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>*.htm</url-pattern>
  </servlet-mapping>

    <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/mvc-dispatcher-servlet.xml</param-value>
  </context-param>

  <listener>
    <listener-class>
      org.springframework.web.context.ContextLoaderListener
    </listener-class>
  </listener>
    <welcome-file-list>
        <welcome-file>WelcomePage</welcome-file>
    </welcome-file-list>
</web-app> 
```

这是控制器类的代码：

```
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.AbstractController;
public class WelcomeController extends AbstractController{

    @Override
    protected ModelAndView handleRequestInternal(HttpServletRequest request,
        HttpServletResponse response) throws Exception {

        ModelAndView model = new ModelAndView("WelcomePage");

        return model;
    }
} 
```

这是 servlet 配置的代码：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping" />

    <!-- Register the bean -->
    <bean class="WelcomeController" />

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver" >
        <property name="prefix">
            <value>/WEB-INF/pages/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>

</beans> 
```

为什么我得到页面未找到错误？

我在以下位置有一个 jsp 文件：

/WEB-INF/pages/WelcomePage.jsp

环境 Tomcat 7 Spring Framework 3.0.2 Net Beans 7

问候， 纳齐尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:37:00.783

我不是 100% 确定，因为过去几年我一直使用 Spring 3，而不是 Spring 2。但我认为问题不在于`InternalResourceViewResolver`. 我认为问题在于根本没有调用控制器！

我相信在 Spring 2 中有一些东西，我们需要另外做一些事情来让 spring 知道传入的请求是如何基于 url 映射到 Controller 的。

为了验证这一点：我建议在控制器中设置一个调试器断点，然后查看控制器是否被调用。

另一方面，您也可以从教程中下载完整的示例，并检查它是否像您预期的那样工作。

*顺便说一句：我已经提到（在评论中）这个控制器（扩展`AbstractController`或`AbstractFromController`）是 Spring 2，并且在 Spring 3 中已被弃用。*

# javascript - 在 Ember.js 中用树结构组织 MVC

> ID：10093778
> 
> 赞同：2
> 
> 时间：2012-04-10T17:46:37.483
> 
> 标签：javascript, html, model-view-controller, ember.js

我是 MVC 的新手，我正在尝试弄清楚如何使用 Ember.js 组织以下应用程序 -

用户通过将照片拖到页面上来创建家谱。一张落在一个人身上的照片将成为它的伴侣，树上的兄弟姐妹，一张落在一对夫妇身上的照片将成为它的孩子。他们可以通过双击照片并启动在文本框中显示每个人的属性的模式来重命名和编辑照片的属性。

我发现的大多数 Ember 示例在类实例之间都有绑定。当您不知道每个实例和子对象的数量时，它们就不起作用。如何创建具有良好 MVC 实践的嵌套结构？你会使用 ContainerView 或 ArrayProxy 来管理孩子吗？

为每个级别创建一个新的控制器、对象和视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:09:23.373

我刚刚和我的同事讨论过这个问题。我们考虑了一夫多妻制关系以及人们可以与不同伴侣生孩子的事实……但随后限制了范围以帮助进行富有成效的讨论……

我开始考虑这里讨论的嵌套模型[如何在 Ember.js 中创建嵌套模型？](https://stackoverflow.com/questions/9186214/how-to-create-nested-models-in-ember-js)但似乎我们真的在谈论关系数据库。

下面的链接中有一篇关于通过给定 ID 在对象之间创建引用的好帖子，请看一下 - 我认为这就是您正在寻找的内容。您可能还会得到一些关于数据持久性的好主意。 [http://www.wiredprairie.us/blog/index.php/archives/1345](http://www.wiredprairie.us/blog/index.php/archives/1345)

# python - 具有非奇数的Python中的舍入错误？

> ID：10093783
> 
> 赞同：10
> 
> 时间：2012-04-10T17:46:51.430
> 
> 标签：python, python-3.x, rounding

我是 Python 的初学者，我有一个问题。
为什么像 5.5, 7.5, (anything).5 这样的数字使用奇数部分`round(num)`正确地工作（规则 5/4），但是像 (anything).5 这样的数字通过相同的函数使用非奇数部分只返回整数部分？（但如果我们在该十进制数上添加一个像 0.000000001 这样的小数，它就可以正常工作）

我的意思是下一个：

```
round(9.5) 
```

返回 10，它是正确的。但

```
round(8.5) 
```

返回 8，这是不正确的。和

```
round(8.5 + 0.0000000000001) 
```

返回 9。

为什么它工作不正确？
我在 Windows 上使用 Python 3.2.2。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-10T17:50:04.927

与 Python 2.x 相比，Python 3.x对函数使用[Banker 的舍入。](http://en.wikipedia.org/wiki/Banker's_rounding)`round()`

这是[记录在案](http://docs.python.org/dev/library/functions.html#round)的行为：

> [I]如果两个倍数相等，则向偶数选择进行舍入（例如，round(0.5) 和 round(-0.5) 均为 0，round(1.5) 为 2）。

由于浮点数本质上只是近似值，因此如何处理“精确”半整数并不重要——无论如何，前面的计算中总是存在舍入误差。

**编辑**：要获得旧的舍入行为，您可以使用

```
def my_round(x):
    return int(x + math.copysign(0.5, x)) 
```

# google-maps-api-3 - blur() 谷歌地图听不到关键事件

> ID：10093784
> 
> 赞同：0
> 
> 时间：2012-04-10T17:46:52.013
> 
> 标签：google-maps-api-3

我有一个谷歌地图和它右侧的滚动 div。我遇到的问题是，如果有人单击并拖动地图，然后移动到滚动 div 并按下向下箭头或 pgdn 或类似的东西，那么谷歌地图也会移动。

我不想禁用地图中的键盘输入，我想让它保持启用状态，但我想找到一种方法，当用户将滚动 div 悬停在右侧时，我可以在某些东西上触发某种 blur() 事件这将把焦点从地图上移开，这样它就不会“听到”键盘输入。

如果我在地图画布外部单击，则此方法有效，但是当用户将鼠标悬停在右侧的 div 上但没有运气时，我尝试在各种地图画布元素上调用 blur()。

有没有人遇到过类似的问题（并希望有解决方案）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:40:31.450

好的，如果我首先正确解释它，我解决了你的一半问题。我假设您想要的行为是，当您的鼠标在地图之外时，按键可以上下移动滚动 div？否则，我写的可能会起作用（：

由于我无法在滚动 div 中强制单击，因此我想出的技巧是插入一个不可见的文本输入并使脚本在此文本框中单击。这停止了​​影响地图的按键，但我们也没有让滚动条移动。我担心在较旧的浏览器中，此单击事件会自动将 div 滚动到文本框所在的位置。取决于您的页面，但我认为保持其位置固定是一个更好的主意，例如在地图下方。

[http://jsfiddle.net/xNT96/2/](http://jsfiddle.net/xNT96/2/)

我只是在 Chrome 中尝试过（鼠标移出后按键不执行任何操作）和 Firefox（如果单击滚动，当鼠标移出时，滚动 div 将随按键移动）。即使单击 div 也是不一致的。所以这远不是一个理想的解决方案，但希望我能给你一些想法:(

# solr - Solr 3.5 上的 Facet 支点

> ID：10093788
> 
> 赞同：1
> 
> 时间：2012-04-10T17:47:23.990
> 
> 标签：solr, faceted-search

我们需要为一组记录生成字数，然后我们需要根据另一个字段的值为每个计数的字生成小计。我们知道在 Solr 4 上使用枢轴刻面是可能的。在 Solr 3.5 上可以吗？如果是这样，如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:34:14.873

在 4.x 之前的 SOLR 中没有枢轴/嵌套刻面。

该解决方案通常涉及刻面一次，并将每个刻面值用作标记​​的**fq**。然后你排除每个标记的 fq。

这在某种程度上是一个杀手级的查询，但它确实可以完成工作。

[您可以在http://loose-bits.com/2011/09/20/pivot-facets-solr.html](http://loose-bits.com/2011/09/20/pivot-facets-solr.html)看到一个更详细的示例，它正是这样做的，将 SOLR 4 与 1.4 语法进行比较（SOLR 3.x 非常相似从这个意义上讲到1.4）

# facebook-graph-api - 如何以编程方式将粘性（突出显示）状态发布到页面墙？

> ID：10093795
> 
> 赞同：0
> 
> 时间：2012-04-10T17:48:04.940
> 
> 标签：facebook-graph-api, highlight, sticky

我可以使用 curl 将定期状态更新发布到我的页面墙上...

```
$url = sprintf("https://graph.facebook.com/%s/feed", $pageName);
$params = array();      
$params['access_token'] = 'access token';
$params['description'] = "blah blah bla";
$params['message'] = "check my new site !";

$ch = curl_init();
$res = curlRequest($url, $params, $ch); 
```

当我发布新的状态更新时，当然旧的会被推倒。使用新的时间线功能，您可以“突出显示”一个状态，使其在 1 周内保持在首位。我试图弄清楚当我以编程方式发布帖子时如何将帖子指定为“突出显示”，而不必实际转到页面并突出显示状态。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:27:29.697

不，抱歉，没有办法以编程方式使帖子具有粘性。您必须手动执行此操作。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-08T14:06:37.940

我怀疑您可以传输键盘命令来完成此操作。. . 找出在页面上执行此操作的键盘命令，然后在 curl 会话期间传输它们。. .

几乎任何你可以用鼠标做的事情，你都可以用按键来做。

- 让您的机器人为您完成工作。. .

-K

# linux - 进程执行完成后如何查看 /proc/[pid]/status 的内容？

> ID：10093797
> 
> 赞同：3
> 
> 时间：2012-04-10T17:48:15.957
> 
> 标签：linux, performance, process, statistics

我想看一个小 C 程序的统计数据，但它是一个开始和结束的小程序。（不是一些长时间运行的程序）。我想在访问内存、缓存命中、上下文切换等方面改进这个程序。

中的参数`/proc/[pid]/status`很棒，但我找不到执行后查看它们的方法。

进程完成执行后如何查看此文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T18:10:35.420

在程序结束时抛出此调用将在程序退出前的最后一刻`system()`打印到标准输出。`/proc/[pid]/status`

```
#include <stdlib.h>

int main() {
        system("cat /proc/$PPID/status");
        return 0;
} 
```

+1 用于外部程序，例如`valgrind`. 您可以使用调试工具捕获程序的退出，并在不修改程序的情况下检查完整的统计信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T18:07:05.630

你不能。proc 文件系统是内核数据结构的接口。一旦该过程消失，相关信息也消失了。

如果您希望提高应用程序的性能和内存占用，您可能需要研究[valgrind](http://valgrind.org)及其类似 cachegrind 的朋友。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T18:08:43.813

`/proc/$pid/`仅在进程运行时存在。如果您真的想在流程完成后查看它（而且我看不出您会在 VmPeak 之外获得什么），您可以在流程退出前不久复制它。

# php - 如何解决facebook og title属性中的双引号问题

> ID：10093801
> 
> 赞同：7
> 
> 时间：2012-04-10T17:48:30.900
> 
> 标签：php, facebook, facebook-opengraph

我的 facebook 应用程序上有一个简单的开放图形功能，我在 facebook 上发布了一些动态文本。这是我的代码：

```
<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# APP: http://ogp.me/ns/fb/APP#">
  <meta property="fb:app_id"      content="00000000000000" /> 
  <meta property="og:type"        content="XXX:XXX" /> 
  <meta property="og:url"         content="http://example.com" /> 
  <meta property="og:title"       content="<?php echo $_GET['title']; ?>" />
  <meta property="og:description" content=" " /> 
  <meta property="og:image"       content="<?php echo $_GET['image']; ?>" />

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head> 
```

问题是当 $_GET['title'] 变量中有双引号时，只有该引号之前的部分被发送到 facebook。我知道为什么会发生这种情况，但想不出任何解决这个问题的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-10T17:52:30.150

`<?php echo htmlentities($_GET['title'], ENT_QUOTES); ?>`应该管用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-24T13:46:20.413

如果有人在使用其他编程语言时遇到同样的问题，只需替换`"`为`&quot;` 例如使用 python：

```
title = post.title.replace('"', '&quot;') 
```

# php - 在函数中包含 sql 查询

> ID：10093806
> 
> 赞同：2
> 
> 时间：2012-04-10T17:48:51.880
> 
> 标签：php, sql

我在这个问题上花了很多天，但我无法解决它，正在寻求帮助。假设我有这个 php-sql：

```
$sql2= mysql_query("SELECT * FROM jos_comprofiler WHERE id = ".$userid."");
$row2 = mysql_fetch_array($sql2) ;
$bdate= $row2['cb_birthday']; // 2012-03-01 year/month/day 
```

这个功能：

```
function _weeks($date) { 
  global $bdate ;
  $month = substr($date, 0, 2) ;
  $day = substr($date, 3, 2);
  $year = substr($date, 6, 4) ;
  $bmonth = substr($bdate, 5, 2) ;
  $bday = substr($bdate, 8, 2);
  $byear = substr($bdate, 0, 4) ;
  $birthday = gmmktime(0, 0, 0, $bmonth, $bday, $byear);
  $eventdate = gmmktime(0, 0, 0, $month, $day, $year);

  $weeknumber = (int)(($eventdate - $birthday) / (7 * 24 * 60 * 60)) + 1 ;
  return $weeknumber ;
} 
```

我有 10 个提交按钮来提交日期

```
if (isset($_POST['submit0'])){
  if ($userid !=0 ){
    $date0 = $_POST['date0'];
    $func_date= _weeks($date0);
    mysql_query(" UPDATE data SET w_dd = '".$func_date."' WHERE id_user= '".$userid."' ");
    $sql= mysql_query("SELECT id_user FROM data WHERE id_user='".$userid."' ");
    $result= mysql_num_rows($sql);
    mysql_query(" UPDATE data SET dd = '".$date0."' WHERE id_user= '".$userid."' ");
  }

  if (isset($_POST['submit1'])){
    if ($userid !=0 ){
      $date1 = $_POST['date1'];
      $func_date= _weeks($date1);
      mysql_query(" UPDATE data SET w_dd = '".$func_date."' WHERE id_user= '".$userid."' ");
      $sql= mysql_query("SELECT id_user FROM data WHERE id_user='".$userid."' ");
      $result= mysql_num_rows($sql);
      mysql_query(" UPDATE data SET dd = '".$date1."' WHERE id_user= '".$userid."' ");
    } 
```

...依此类推，直到 submit9 按钮。

问题`$bdate`出在函数中，它不是那样工作`$bdate`的，但是如果我尝试像下面这样指定一个特定日期，它就像一个魅力`$func_date`。

```
function _weeks($date){
  $bdate = "2012-03-01"; 
```

我什至放了`$bdate`inside 函数，但这也没有用。我怎样才能使这项工作？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:01:34.657

尝试这个

```
$userid = ""; // Nuot sure where this is form ;
$date = "";
$mysql = new mysqli ( "localhost", "root", "", "db" );

if ($mysql->connect_errno) {
    printf ( "Connect failed: %s\n", $mysql->connect_error );
    exit ();
}

$result = $mysql->query ( sprintf ( "SELECT cb_birthday FROM jos_comprofiler id = '%s'", $userid ) );

if (! $result) {
    die ( "Error Runing jos_comprofiler query" );
}

$josProfile = $result->fetch_assoc ();

$_POST ["date0"] = "03/22/2012 "; // Sample
$_POST ["submit0"] = "oK"; // Sample

for($i = 0; $i < 10; $i ++) {
    if (! isset ( $_POST ["submit$i"] ) || ! isset ( $_POST ["date$i"] )) {
        continue;
    }
    $date = $_POST ["date$i"];
    $weekNumber = weekNumber ( $josProfile ['cb_birthday'], $date );
    if ($userid != 0) {
        $this->query ( sprintf ( "UPDATE data SET w_dd = '%s' ,  dd = '%s'  WHERE id_user= '%s' ", $weekNumber, $date, $userid ) );
    }
}

function weekNumber($birthDay,$postDate) {
    $postDate = trim($postDate);
    $birthDay = trim($birthDay);
    $postDate = DateTime::createFromFormat('m/d/Y', $postDate);
    $birthDay = DateTime::createFromFormat('Y-m-d', $birthDay);
    $sec = (int) $postDate->format("U") - $birthDay->format("U");   
    return ceil($sec / (60 * 60 * 24 * 7));
} 
```

你有问题，`DateTime::createFromFormat`你`mysqli`可以使用

```
$userid = ""; // Nuot sure where this is form ;
$date = "";

$result = mysql_query( sprintf ( "SELECT cb_birthday FROM jos_comprofiler id = '%s'", $userid ) );
$josProfile = mysql_fetch_array($result);

$_POST ["date0"] = "03/22/2012 "; // Sample
$_POST ["submit0"] = "oK"; // Sample

for($i = 0; $i < 10; $i ++) {
    if (! isset ( $_POST ["submit$i"] ) || ! isset ( $_POST ["date$i"] )) {
        continue;
    }
    $date = $_POST ["date$i"];
    $weekNumber = weekNumber ( $josProfile ['cb_birthday'], $date );
    if ($userid != 0) {
       mysql_query( sprintf ( "UPDATE data SET w_dd = '%s' ,  dd = '%s'  WHERE id_user= '%s' ", $weekNumber, $date, $userid ) );
    }
}

function weekNumber($birthDay, $postDate) {
    $postDate = trim ( $postDate );
    $birthDay = trim ( $birthDay );

    list($postMonth,$postD,$postYear) = explode("/", $postDate);
    list($birthYear,$birthMonth,$birthD) = explode("-", $birthDay);

    $postTime = mktime(0, 0, 0, $postMonth, $postD, $postYear);
    $birthTime =  mktime(0, 0, 0, $birthMonth, $birthD, $birthYear);

    $sec = ( int )$postTime - $birthTime;
    return ceil ( $sec / (60 * 60 * 24 * 7) );
} 
```

如果您有任何其他问题，请告诉我

# c++ - 在OpenCV中乘以矩阵的SVD分量

> ID：10093808
> 
> 赞同：0
> 
> 时间：2012-04-10T17:49:03.727
> 
> 标签：c++, opencv, matrix, svd

我将 SVD 应用于 CV_32FC1 cvMat 并修改了“u”组件中的一些值。现在我试图将'u、'w'和'vt'分量相乘以获得单个矩阵A。但是OpenCV无法将矩阵相乘并出现以下错误。

```
OpenCV Error: Assertion failed (type == B.type() && (type == CV_32FC1 || type == CV_64FC1 || type == CV_32FC2 || type == CV_64FC2)) in gemm, file /build/buildd/opencv-2.1.0/src/cxcore/cxmatmul.cpp, line 687
terminate called after throwing an instance of 'cv::Exception'
  what():  /build/buildd/opencv-2.1.0/src/cxcore/cxmatmul.cpp:687: error: (-215) type == B.type() && (type == CV_32FC1 || type == CV_64FC1 || type == CV_32FC2 || type == CV_64FC2) in function gemm 
```

当我检查 SVD 对象中的矩阵类型时，它们的 type = 20 似乎与任何默认矩阵类型都不匹配。

```
#include <iostream>
#include <stdio.h>
#include "cv.h"
#include "highgui.h"
#include "constants.h"

const unsigned int MAX = 10000;

using namespace cv;
using namespace std;

int NO_FRAMES;

Mat resize_image(Mat &src, Mat img)
{
    Mat dst;
    resize(src, dst, Size(img.rows, img.cols));
    return dst;
}

bool check_exit()
{
     return (waitKey(27) > 0)?true:false;
}

int main(int argc, char ** argv)
{
    Mat rgb[MAX];
    Mat ycbcr[MAX];
    Mat wm_rgb[MAX];
    SVD svd[MAX];
    namedWindow("watermark",1);
    namedWindow("RGB", 2);
    namedWindow("YCBCR",3);
    namedWindow("u",4);
    namedWindow("w",5);
    namedWindow("vt",6);
    if (argc < 3)
    {
        cout<<"Video file required! (Supported formats: avi, mp4, mpeg)\n";
        return 1;
    }

    VideoCapture capture(argv[1]);
    Mat watermark = imread(argv[2]);
    if(!capture.isOpened())
    {
        cout<<"Unable to open the video file!\n";
        return 1;
    }

    int i=0;
        capture >> rgb[i];

    while(!rgb[i].empty())
    {
        imshow("RGB", rgb[i]);
        cvtColor(rgb[i], ycbcr[i], CV_RGB2YCrCb);
        imshow("YCBCR", ycbcr[i]);
        i++;
        capture >> rgb[i];

        if(check_exit())
            exit(0);
    }

    NO_FRAMES = i;

    watermark = resize_image(watermark, ycbcr[0]);
    VideoWriter writer("output.avi", CV_FOURCC('d', 'i', 'v', 'x'), 24.0, cvSize(ycbcr[0].cols, ycbcr[0].rows),  true);
    for(int i = 0; i < NO_FRAMES - 1; i++)
    {
        Mat dst(ycbcr[i].rows, ycbcr[i].cols, CV_32FC1);
        ycbcr[i].convertTo(dst, CV_32S); 
        SVD temp(dst, 5);
        imshow("u", temp.u);
        imshow("w", temp.w);
        imshow("vt", temp.vt);
        svd[i] = temp;

        if(check_exit())
            exit(0);
    }

    int j = 0, k = 0;
    for (i = 0; i < NO_FRAMES; i++)
    {
        for (int p = 0; p < svd[i].u.rows; p++)
        {
            for(int q = 0; q < svd[i].u.cols; q++)
            {

                if (p == q)
                {
                    if (j >= watermark.rows)
                    {
                        goto x;
                    }
                    if (k >= watermark.cols)
                    {
                        k = 0;
                        j++;
                    }
                    svd[i].u.at<float>(p, q) = watermark.at<float>(j,k);
                    k++;
                }
            }
        }
    }

x:  for (i = 0; i < NO_FRAMES; i++)
    {
        Mat A(rgb[0].rows, rgb[0].cols, CV_32FC1);

                //Here
                A = svd[i].u * svd[i].w * svd[i].vt;
        Mat B(A.rows, A.cols, CV_32FC1);
        cvtColor(A, B, CV_YCrCb2RGB);
        writer << B;
    }

    capture.release();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-13T05:25:02.207

错误出现在矩阵乘法运算 (gemm()) 中，尽管错误可能已经传播到您尝试使用格式错误的矩阵 A 创建新矩阵 B 的下一行。请注意，OpenCV 中的 SVD 算法产生的输出为如下形式： 对于矩阵 A(mxn)，SVD 产生以下三个矩阵：

w – 计算的奇异值 (min(m,n) x 1)

u – 计算的左奇异向量 (mxm)

vt – 右奇异值的转置矩阵 (nxn)

这里奇异值存储在一个紧凑的维度列向量**(min(m,n) x 1)**中，而不是作为实际的数学等价物，它是维度**(min(m,n), min(m,n)的对角矩阵））**。

因此，如果您想从各个 SVD 分量重构矩阵，您必须首先将向量“w”转换为对角矩阵形式。您可以使用 OpenCV 的 diag() 方法执行此操作：

```
A = svd[i].u * Mat::diag(svd[i].w) * svd[i].vt; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-16T17:07:55.177

我现在也遇到了这个，想我应该在这里写，在我的情况下，在计算 SVD 时，我的大小就像 2 * (#imagePixels)，因此 U 或 Vt 矩阵之一变得很大，无法在堆上分配，因此这个异常std::bad_alloc 来了，在我的情况下，Vt 大小将是 imagePixels * imagePixels，这是巨大的。

愿这也发生在你的情况下。

将其留在这里，以便下一个遇到此问题的人也应该查看矩阵大小。

# android - ZXing - 致命异常：无法实例化活动 ComponentInfo{..CaptureActivity}

> ID：10093809
> 
> 赞同：1
> 
> 时间：2012-04-10T17:49:05.130
> 
> 标签：android, zxing, qr-code, scanning

这是堆栈跟踪：

```
04-10 18:09:36.393: E/AndroidRuntime(26592): FATAL EXCEPTION: main
04-10 18:09:36.393: E/AndroidRuntime(26592): java.lang.RuntimeException: Unable to        instantiate activity     ComponentInfo{org.jujitsu.app.com/com.google.zxing.client.android.CaptureActivity}:     java.lang.ClassNotFoundException: com.google.zxing.client.android.CaptureActivity in loader    dalvik.system.PathClassLoader[/data/app/org.jujitsu.app.com-1.apk]
04-10 18:09:36.393: E/AndroidRuntime(26592):    atandroid.app.ActivityThread.performLaunchActivity(ActivityThread.java:1738)
04-10 18:09:36.393: E/AndroidRuntime(26592):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1837)
04-10 18:09:36.393: E/AndroidRuntime(26592):    at android.app.ActivityThread.access$1500(ActivityThread.java:132)
04-10 18:09:36.393: E/AndroidRuntime(26592):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1033)
04-10 18:09:36.393: E/AndroidRuntime(26592):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-10 18:09:36.393: E/AndroidRuntime(26592):    at android.os.Looper.loop(Looper.java:143)
04-10 18:09:36.393: E/AndroidRuntime(26592):    at android.app.ActivityThread.main(ActivityThread.java:4196)
04-10 18:09:36.393: E/AndroidRuntime(26592):    at java.lang.reflect.Method.invokeNative(Native Method)
04-10 18:09:36.393: E/AndroidRuntime(26592):    at java.lang.reflect.Method.invoke(Method.java:507)
04-10 18:09:36.393: E/AndroidRuntime(26592):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-10 18:09:36.393: E/AndroidRuntime(26592):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-10 18:09:36.393: E/AndroidRuntime(26592):    at dalvik.system.NativeStart.main(Native Method)
04-10 18:09:36.393: E/AndroidRuntime(26592): Caused by: java.lang.ClassNotFoundException: com.google.zxing.client.android.CaptureActivity in loader dalvik.system.PathClassLoader[/data/app/org.jujitsu.app.com-1.apk]
04-10 18:09:36.393: E/AndroidRuntime(26592):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
04-10 18:09:36.393: E/AndroidRuntime(26592):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
04-10 18:09:36.393: E/AndroidRuntime(26592):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
04-10 18:09:36.393: E/AndroidRuntime(26592):    at android.app.Instrumentation.newActivity(Instrumentation.java:1061)
04-10 18:09:36.393: E/AndroidRuntime(26592):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1730)
04-10 18:09:36.393: E/AndroidRuntime(26592):    ... 11 more 
```

这是我的清单声明。

```
<activity android:name="com.google.zxing.client.android.CaptureActivity"
android:screenOrientation="landscape"
android:configChanges="orientation|keyboardHidden"
android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
android:windowSoftInputMode="stateAlwaysHidden">
<intent-filter>
  <action android:name="android.intent.action.MAIN"/>
  <category android:name="android.intent.category.DEFAULT"/>
</intent-filter>
<intent-filter>
  <action android:name="com.google.zxing.client.android.SCAN"/>
  <category android:name="android.intent.category.DEFAULT"/>
</intent-filter>
</activity> 
```

这是发生错误的时间/地点：

```
public void onClick(View v){
 Intent intent = new Intent("com.google.zxing.client.android.SCAN");
 intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
 startActivityForResult(intent, 0);
 } 
```

当我选择我拥有的随机 QR 码阅读器时它可以正常工作，但是当我将该应用程序用作 QR 码阅读器时，它会出现此错误。

我对它为什么这样做有点困惑......我的 Eclipse 项目中的引用库中也有 core.jar......也许核心不完整？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:43:30.647

无需使用不同的项目作为您自己项目的源代码 zxing 包代码不应被篡改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:05:04.793

已经在邮件列表中回答了这个问题。您需要删除项目中的所有使用`android/`和`core/`。首先，这些都不应该存在。请阅读并关注[http://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

# solr - Solr 3.5 连接异常

> ID：10093812
> 
> 赞同：0
> 
> 时间：2012-04-10T17:49:28.543
> 
> 标签：solr

我正在尝试将 Windows 框中的 CSV 中的 Solr 索引上传到我在 Linux 上的 Solr 服务器。使用 cygwin，我的 curl 命令如下所示：

```
curl --max-time 3600 http://10.xxx.xxx.xxx/solr/update/csv -F commit=true -F stream.url=file://10.xxx.xxx.xxx/Users/testdata/sample.csv -F stream.contentType=text/plain -F fieldnames=partId,desc,category 
```

有问题的 csv 文件大小只有 4K 左右，但我仍然收到连接超时错误。这些计算机位于同一网络上，没有防火墙或代理。solr 服务器在 Tomcat 7 上运行，我增加了 connectionTimeOut=3600000，但仍然没有帮助。有任何想法吗？谢谢。

另外这是错误：

```
>HTTP Status 500 - Connection timed out

java.net.ConnectException: Connection timed out
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:529)
    at java.net.Socket.connect(Socket.java:478)
    at sun.net.NetworkClient.doConnect(NetworkClient.java:163)
    at sun.net.NetworkClient.openServer(NetworkClient.java:118)
    at sun.net.ftp.FtpClient.openServer(FtpClient.java:488)
    at sun.net.ftp.FtpClient.openServer(FtpClient.java:475)
    at sun.net.www.protocol.ftp.FtpURLConnection.connect(FtpURLConnection.java:270)
    at sun.net.www.protocol.ftp.FtpURLConnection.getInputStream(FtpURLConnection.java:352)
    at org.apache.solr.common.util.ContentStreamBase$URLStream.getStream(ContentStreamBase.java:88)
    at org.apache.solr.common.util.ContentStreamBase.getReader(ContentStreamBase.java:165)
    at org.apache.solr.handler.CSVLoader.load(CSVRequestHandler.java:355)
    at org.apache.solr.handler.ContentStreamHandlerBase.handleRequestBody(ContentStreamHandlerBase.java:58)
    at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
    at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.handleRequest(RequestHandlers.java:241)
    at org.apache.solr.core.SolrCore.execute(SolrCore.java:1372)
    at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:356)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:252)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) 
```

再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:35:47.943

试试这个，看看你是否可以让它更新数据。

```
curl 'http://10.xxx.xxx.xxx/solr/update/csv?fieldnames=partId,desc,category' -H 'Content-type:text/plain; charset=utf-8' --data-binary [file_name] 
```

这是一个比您使用的命令更简单的命令，可能有助于确定问题所在。您可能还想检查 Tomcat 日志 (/var/log/tomcat7) 以查看是否有任何有意义的错误。

# sql - 根据满足哪个条件对行进行排序？

> ID：10093814
> 
> 赞同：3
> 
> 时间：2012-04-10T17:49:38.807
> 
> 标签：sql, ms-access, sql-order-by

我有一个非常简单的问题：是否可以根据满足哪个条件对检索到的行进行排序？例如，我有一张人员表，我想检索姓名以“I”开头、以“ster”结尾或包含“lo”的所有人员，根据满足这些条件的条件进行排序。首先是匹配第一个条件的行，然后是匹配第二个条件的行，以此类推。（**没有重复：**如果一行满足第一个条件，它不应该再次显示第二个条件）

**编辑：** 我使用 Visual C#，并使用 MS Access 管理数据库。（文件格式为 .mdb，如果重要的话）

谢谢你=)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T17:53:49.273

一般来说，你可以在你的`order by`.

这适用于 SQL Server，例如：

```
order by (case when myCol like 'I%' then 1 when myCol like '%ster' then 2 when myCol like '%lo%' then 3 end) 
```

~~您使用的是哪个 DBMS？~~

**更新**

对于 MS-ACCESS，您可以使用`IIF`此答案中所示的语句：

[ms-access-complicated-order-by](https://stackoverflow.com/a/1676843/880904)

基于此，您可能需要以下内容：

```
SELECT *
FROM people
WHERE [name] Like "I*" Or [name] Like "*ster" Or [name] Like "*lo*"
ORDER BY IIf([name] Like "I*", 1, IIf([name] Like "*ster", 2, IIf([name] Like "*lo*", 3, 4))); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T18:01:45.023

像这样的东西应该可以工作：

```
SELECT * FROM people
ORDER BY
  CASE WHEN name LIKE "I%" THEN 0
    WHEN name LIKE "%ster" THEN 1
    WHEN name LIKE "%lo%" THEN 2
    ELSE 3
  END ASC; 
```

在 Access 中，您可能不得不求助于嵌套`IIF()`的 s：

```
ORDER BY
  IIF( name LIKE "I%",     0,
  IIF( name LIKE "%ster%", 1,
  IIF( name LIKE "%lo%",   2,
    3
  ) ) ) ASC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T18:52:51.387

该`Switch`函数比一堆嵌套`IIf`语句更具可读性：

```
SELECT * FROM [People]
WHERE [Name] Like "I*"
   OR [Name] Like "*ster"
   OR [Name] Like "*lo*"
ORDER BY Switch([Name] Like "I*", 1,
                [Name] Like "*ster", 2,
                True, 3) 
```

`Switch`通过传递*条件*参数对来使用：*结果*。评估参数 1，如果为 true，则函数返回参数 2。如果 arg 1 为 false，则评估 arg 3，依此类推。

请注意`True`用作倒数第二个参数的使用，其作用类似于`CASE ELSE`.

请注意，根据上下文，您可能需要转换`*`为`%`. 请参阅[为什么从 VB6 应用程序调用 LIKE 时行为不同？](https://stackoverflow.com/questions/690731/ms-access-query-why-does-like-behave-differently-when-being-called-from-vb6-app)了解更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T18:03:55.727

我用 Postgres 试了一下，但我认为你可以对其他数据库使用类似的技术。我将为每个条件创建一个列，该列返回是否满足条件的布尔表达式。然后，按该列排序：

```
select
   substr(Name, 1, 1) = 'I' as StartsWithI,
   Name like '%ster' as EndsWithSter
from MyTable
order by StartsWithI desc, EndsWithSter desc 
```

**更新：**

该`ms-access`标签是在我发布此答案后添加的，但我会保留它以防它对任何人有帮助。

# c# - Process.Kill() 未登录事件查看器

> ID：10093815
> 
> 赞同：0
> 
> 时间：2012-04-10T17:49:46.857
> 
> 标签：c#, event-viewer

我有一个监视其他子服务进程的父服务。当我需要通过进程的 object.Kill() 杀死某个子进程并等待它完成时。然后，我很惊讶这没有以进程名称作为实例名称记录到事件查看器应用程序日志中，并且消息为“服务已成功停止”？当父服务再次启动子服务进程时，我确实在事件查看器的应用程序日志中看到一个条目“服务已成功启动”。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T17:53:35.817

应用程序必须自己在应用程序日志中记录事情——使用`Process.Kill`不是要求服务停止的优雅方式，因此它不会记录它正在停止（因为它已被踢出内存）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:33:39.660

是的，您应该使用服务控制器类来停止或暂停服务，而不是杀死它们。

您将需要添加 using System.ServiceProcess 命名空间。

如果您希望停止依赖项（儿童），您可以使用下面的我来获取您正在寻找的依赖服务并停止适当的子服务：-

ServiceController sc = new ServiceController("%PARENT_SERVICE%"); ServiceController[] scServices = sc.DependentServices;

```
 foreach (ServiceController dependant in scServices)
        {
            if (dependant.DisplayName == "%CHILD_SERVICE%")
            {
                dependant.Stop();
                dependant.WaitForStatus(ServiceControllerStatus.Stopped);
            }
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T18:03:12.430

[尝试使用ServiceController](http://msdn.microsoft.com/en-us/library/s3ket56y.aspx)类，而不是使用 Process.Kill() 来控制您的服务。例如，请参见[此处](https://stackoverflow.com/questions/1113000/how-do-start-stop-services-using-net-stop-command-in-c-sharp)的类似问题。要写入 EventLog，请参阅[EventLog](http://msdn.microsoft.com/en-us/library/9zzbss7t.aspx)和[WriteEntry](http://msdn.microsoft.com/en-us/library/xzwc042w.aspx)方法的文档

# javascript - 在从 javascript 对经过 Windows 身份验证的 WCF 服务进行 ajax 调用时在 forefox 中获取 xmlhttp 状态 401

> ID：10093819
> 
> 赞同：2
> 
> 时间：2012-04-10T17:50:03.480
> 
> 标签：javascript, wcf, xmlhttprequest

我正在尝试从 javascript 调用经过 Windows 身份验证的 WCF 服务，但我得到 xmlhttp 响应状态 401，这是未经授权的访问。我已经编写了允许跨域访问的代码。它适用于表单身份验证，但是当我们对其进行 Windows 身份验证时会出现问题。请帮忙 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:08:37.987

我认为这可能与未将您的 NTLM 身份验证传递到该站点有关。

尝试这个：

1.  在 Firefox 中，在地址栏中输入 about:config
2.  在过滤字段类型中`network.automatic-ntlm-auth.trusted-uris`
3.  双击您在上面搜索的首选项的名称。
4.  输入您要向其传递 NTLM 身份验证令牌的任何站点的 URL。喜欢：

    `http://myinternal.site.com,https://intranet.companysite.com`

5.  对 about.config 键重复步骤 2-4：`network.negotiate-auth.trusted-uris`

# c# - 由文本框输入设置的Gridview列标题？

> ID：10093824
> 
> 赞同：0
> 
> 时间：2012-04-10T17:50:35.317
> 
> 标签：c#

所以我在 Windows 窗体应用程序中有一个 gridview，当我单击我的按钮时，gridview 被填充，标题列/行读取标签（因为我这样设置它（下面的代码））但是如果我想要标签标题怎么办替换为文本框中输入的内容，我将如何更改以下代码？

```
Tag = n.Element("GroupName").Value 
```

完整代码：

```
 XDocument xDoc = XDocument.Load(tagUri);
        var Tag = xDoc.Descendants("Group")
            .Select(n => new
            {

                Tag = n.Element("GroupName").Value, // Tag in this line represents the column name, I would like this changed to be a textbox input. 
            })
            .ToList();

        dataGridView4.DataSource = Tag; 
```

![在此处输入图像描述](../Images/d7ccd12b944b5672fe70848d583f8f2c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:15:25.017

之后您可以设置列的标题：

```
datagridView4.Columns[0].HeaderText = textbox1.Text; 
```

# unit-testing - 构建软件时使用的兼容性测试和其他测试方法

> ID：10093829
> 
> 赞同：0
> 
> 时间：2012-04-10T17:50:46.693
> 
> 标签：unit-testing, testing, open-source, compatibility

我将在软件中添加一个功能，并且必须更新或修改当前开源软件的一些公共 API。

可以采取哪些步骤来确保软件的兼容性。开源世界中用于测试新增功能的测试方法是什么？开源程序是：Xapian

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:24:48.823

每当在现有软件中添加新功能时，您都需要通过应用回归测试来测试软件。您也可以点击此[链接](http://en.wikipedia.org/wiki/Regression_testing)

# php - 使用白名单清理下拉选项

> ID：10093832
> 
> 赞同：0
> 
> 时间：2012-04-10T17:51:06.323
> 
> 标签：php, drop-down-menu, sanitization, whitelist

我看过这个链接：[https](https://www.owasp.org/index.php/Input_Validation_Cheat_Sheet) ://www.owasp.org/index.php/Input_Validation_Cheat_Sheet 讨论了在下拉菜单上使用白名单。

我不明白的是，当您只能在选项列表中选择白名单时，您为什么要使用白名单？

我理解你为什么会在用户输入上使用它，比如输入你的名字等，但我不明白为什么你会在选项上使用它，因为用户没有实际输入一些东西。

还是我读错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T17:55:22.767

用户仍然可以修改 Dropbox 中的数据并将数据提交到您的页面。这就是为什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:02:27.233

您假设他们将使用您的表单发布到表单处理器，但事实并非如此。

除此之外，很容易使用例如 firebug 修改下拉列表中的值并在此之后发布表单。

# android - Android：尝试在异步任务中显示进度条时出错

> ID：10093834
> 
> 赞同：0
> 
> 时间：2012-04-10T17:51:15.747
> 
> 标签：android, progressdialog

使用 Android 时，我尝试在异步任务中显示进度条时出错。我在粗线处有错误。我敢肯定，变量*context*是应用程序的上下文。这是代码：

公共类 UpdateDBTask 扩展 AsyncTask {

```
ProgressDialog progressDialogListFiles;
ProgressDialog progressDialogUpdateDB;

protected void onPreExecute () {
    progressDialogUpdateDB = new ProgressDialog(context);
    progressDialogUpdateDB.setIndeterminate(false);
    progressDialogUpdateDB.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    progressDialogUpdateDB.setMessage("Analyzing files...");
    progressDialogUpdateDB.setCancelable(false);
    progressDialogUpdateDB.setProgress(0);

    progressDialogListFiles = new ProgressDialog(context);
    progressDialogListFiles.setIndeterminate(true);
    progressDialogListFiles.setMessage("Listing files...");
    progressDialogUpdateDB.setCancelable(false);
}

protected Boolean doInBackground(String... paths) { 
    updateDB(paths);
    return true;
}

protected void updateDB(String[] paths) {

    /*.....*/
        **progressDialogListFiles.show();**
    /*...*/
} 
```

}

你能帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:37:57.710

您正在尝试从非 UI 线程更新 UI，即用于处理的线程`doInBackground()`。`onPreExecute()`请从、`onProgressUpdate()`或更新您的用户界面`onPostExecute()`。

# javascript - 主javascript中无法访问coffeescript类

> ID：10093835
> 
> 赞同：13
> 
> 时间：2012-04-10T17:51:23.267
> 
> 标签：javascript, coffeescript

我有一堂用coffeescript写的课，例如，

```
class Example
  constructor: ->
    $.each [1, 2, 3], (key, value) =>
      @test = value
    return @test
  render: ->
    alert @test 
```

我把这个类作为一个单独的文件，Example.coffee

现在我希望能够像这样在我的主 javascript 文件中实例化：

```
d = new Example
d.render() 
```

但是即使该类作为脚本包含在页面上，该类也未定义，例如

```
<script src="Example.js></script>
<script src="main.js"></script> 
```

您如何使课程对主文件公开可用？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-10T18:17:46.750

您可以通过将其声明在命名空间中来声明您的类可全局访问（至少对于浏览器而言）`window`：

```
class window.Example
  constructor: ->
    $.each [1, 2, 3], (key, value) =>
      @test = value
    return @test
  render: ->
    alert @test 
```

那将`Example`直接放入`window`. `class @Example`在大多数情况下，您也可以说。

默认情况下，CoffeeScript 将每个文件包装在一个`(function() { ... })()`包装器中以防止命名空间污染。您可以通过[`-b`](http://coffeescript.org/#usage)在编译 CoffeeScript 时提供：

> `-b, --bare`
> 在没有顶级函数安全包装器的情况下编译 JavaScript。

但这可能不是你的选择（或者它可能是一个丑陋的选择）。通常的方法是在加载类之前在某处声明应用程序特定的命名空间：

```
// Probably in a <script> in your top-level HTML...
App = { }; 
```

然后适当地命名你的类：

```
class App.Example
    #... 
```

然后通过命名空间引用一切`App`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-06-22T15:17:24.250

`.js`我知道这是一个旧线程，但如果其他人发现它有用，请使用“@”声明您的类，并且文件外部的文件可以访问它`.coffee`。

所以，在`example.coffee`：

```
class Introverted
  honk: ->
    alert "This class is visible within the .coffee file but not outside"

class @Extroverted
  honk: ->
    alert "This class is visible inside and outside of the .coffee file" 
```

编译`example.js`后可用于`example.html`：

```
<script src="example.js"></script>
<script>
var p = new Extroverted(); // works fine
p.honk();

var i = new Introverted(); // will fail with "Introverted is not defined"
i.honk();
</script> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-10T17:52:34.407

创建一个全局变量

`window.Example = Example`

# android - 使用 TimePicker 更改 Android 数字时钟时间

> ID：10093836
> 
> 赞同：1
> 
> 时间：2012-04-10T17:51:24.897
> 
> 标签：android, view

如何通过从 TimePicker 对话框中选择时间来更改数字时钟视图中的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T13:11:55.420

我认为这个问题在某种程度上与以前的 android 版本中的设置警报活动有关。我看到你问的是android 2.3.3中的设置警报吗？用户输入的闹钟时间上方有一个数字时钟，所以当用户设置闹钟时间时，数字时钟与闹钟的变化相同，如图所示，数字时间与系统时间无关。

我认为这是通过编码而不是数字时钟完成的。

![闹钟数字时间](../Images/b33e009f8f66e8d6adab23876b3cd700.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:35:37.787

该`DigitalClock`小部件仅显示系统时间。您不能使用它来显示其他时间。因此，无法让它显示用户通过`TimePicker`.

# ios5 - iOS5 中的反向身份验证和 Twitter SSO

> ID：10093838
> 
> 赞同：2
> 
> 时间：2012-04-10T17:51:46.137
> 
> 标签：ios5, twitter, oauth, single-sign-on

我正在尝试在我的 iOS5 应用程序中实现 Twitter SSO，并看到 Twitter 有一个叫做 Reverse Auth 的东西。如果这是正确的方法，有人可以解释一下。Reverse Auth 基本上是从 iOS5 应用程序获取访问令牌并将其传递给应用程序服务器吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T16:49:34.797

如果您想允许服务器进行 API 调用，您只需要使用 Reverse Auth。如果您只对让 iOS 应用程序直接发布到 Twitter 感兴趣，那么您不需要 Reverse Auth。

对于反向身份验证，请参阅：

[https://dev.twitter.com/docs/ios/using-reverse-auth](https://dev.twitter.com/docs/ios/using-reverse-auth)

[https://github.com/seancook/TWiOS5ReverseAuthExample](https://github.com/seancook/TWiOS5ReverseAuthExample)

请务必先向 Twitter 请求反向身份验证权限，否则示例代码将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T00:34:17.240

要在 Twitter 上获取您的访问令牌，当您想在应用程序中实现推送通知时，您的请求必须是授权请求或签名请求，例如来自 Apple 的签名证书。

在 Facebook 端，这些过程是隐式进行的，但在 Twiteer 中，您应该首先授权您的请求以获取用户访问令牌。

因此，反向身份验证的主要思想是这些......您首先使用消费者密钥（即应用程序密钥）和消费者密钥等数据发出您的第一个请求......（[https://api.twitter.com/oauth/request_token](https://api.twitter.com/oauth/request_token)）

然后你会收到一个密钥，你在第二个请求中使用它来获取访问令牌..（[https://api.twitter.com/oauth/access_token](https://api.twitter.com/oauth/access_token)）

Twitter 正在使用一种叫做 Reverse Auth 的东西来回答这 4 个问题： 1\. 哪个应用程序发出请求？2\. 请求代表哪个用户发布？3\. 用户是否已授予应用程序代用户发帖的权限？4\. 请求在传输过程中是否被第三方篡改？

为了回答这些问题，他们在您提出的要求中添加了 7 件事

*   oauth_consumer_key
*   oauth_nonce
*   oauth_signature
*   oauth_signature_method
*   oauth_timestamp
*   oauth_token
*   oauth_version

许多人试图自己制作这些，但是您需要花费很多时间才能自己制作它们，并根据您的要求制作它们。

所以在 gitHub 上关注这个 repo [https://github.com/seancook/TWReverseAuthExample](https://github.com/seancook/TWReverseAuthExample)

还有关于反向验证的 Twitter 文档 [https://dev.twitter.com/docs/ios/using-reverse-auth](https://dev.twitter.com/docs/ios/using-reverse-auth)

# iphone - iphone iOS5如何将一个大的UIView渲染为PDF？

> ID：10093842
> 
> 赞同：1
> 
> 时间：2012-04-10T17:52:02.860
> 
> 标签：iphone, objective-c, ios, uiview, pdf-generation

我正在尝试使用 iPhone 创建一个字母大小的报告。为此，我创建了一个大的 nib 文件并在其中布置了我需要的所有报告小部件。

现在我正在尝试将视图转换为 PDF。这是我的**代码，但它只绘制了屏幕上可见的视图部分。**

我缩小了在我的测试 iPhone3GS 中，640x960 视图的框架在调用 viewWillAppear 时变为 320x460 的问题。如果我在将视图另存为 PDF 之前将框架重置为 640x960，则文件将正确显示。什么可能导致视图的框架被切割成可见矩形的大小？我知道对于 iPhone 3GS，视图比例因子是 1，所以这不是缩放问题。

```
+(NSMutableData *)createPDFDatafromUIView:(UIView*)aView 
{
    // Creates a mutable data object for updating with binary data, like a byte array
    NSMutableData *pdfData = [NSMutableData data];

    // Points the pdf converter to the mutable data object and to the UIView to be converted
    UIGraphicsBeginPDFContextToData(pdfData, aView.frame, nil);
    UIGraphicsBeginPDFPage();
    CGContextRef pdfContext = UIGraphicsGetCurrentContext();

    // draws rect to the view and thus this is captured by UIGraphicsBeginPDFContextToData

    [aView.layer renderInContext:pdfContext];

    // remove PDF rendering context
    UIGraphicsEndPDFContext();

    return pdfData;
} 
```

谢谢！

# f# - F# 是否有 Seq.Single: seq<'a> -> 'a？

> ID：10093847
> 
> 赞同：4
> 
> 时间：2012-04-10T17:52:21.740
> 
> 标签：f#

> **可能重复：**
> [F# 等同于 LINQ Single](https://stackoverflow.com/questions/9850769/f-equivalent-of-linq-single)

如果它是唯一的，则此函数应返回序列的第一个元素，否则将引发异常。

F# 有这个作为内置函数吗？如果不是，为什么？似乎 C# 在 Enumerable 类扩展函数中有类似的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T17:57:09.607

[Seq.exactlyOne](http://msdn.microsoft.com/en-us/library/hh289759%28v=vs.110%29.aspx) ?

# java - 编译 Java 硬件 API 以在 Android 中运行。

> ID：10093850
> 
> 赞同：1
> 
> 时间：2012-04-10T17:52:29.887
> 
> 标签：java, android, compiler-construction, compilation

我对Android有点菜鸟。

我有一个项目，它利用传感器手套将传感器值中的数据输入到设备中。我的项目的目标是将此传感器手套与 Android 设备连接，以便将来自手套的信息无线发送到我的应用程序将进行必要处理的 Android 设备。

手套附带了一组工具和 API，可以使用 Java 进行编程。我的问题基本上是，我可以编译我用 java 编写的代码以在 Android 平台上工作吗？我在原始代码中引用了一组 Jar 文件。在 Android 中运行我的代码时，我是否能够使用相同的 Jar 文件，或者我是否能够编译相同的 Java 代码以在 Android 中运行。

非常感谢帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:57:25.037

如果 jar 包含已编译的类文件，它将不起作用。您的源代码必须经过编译才能与 dalvik 虚拟机一起使用，而不是 java。

但是，如果您有未编译的类文件，它将（可能）与 Android 一起使用。大多数标准 Java 库也可在 Android 上使用。

# orchardcms - 果园 - 自定义模块未显示

> ID：10093852
> 
> 赞同：1
> 
> 时间：2012-04-10T17:52:30.570
> 
> 标签：orchardcms

我创建了一个自定义模块。它出现在仪表板“模块”上，我能够启用它。但我在“新建”或“内容”下看不到新的内容类型。知道我可能做错了什么吗？或者我该如何调试这个问题？

谢谢。

# c++ - 虚推导和转换模棱两可

> ID：10093854
> 
> 赞同：1
> 
> 时间：2012-04-10T17:52:35.550
> 
> 标签：c++, virtual

我现在正在学习 C++ 虚拟派生中歧义的不同情况。但是我的代码中有一个歧义错误，我不明白这是什么原因......

> 这是我的代码：

```
class V {
    public:
        int v ;
};

class A {
    public:
        int a ;
};

class B : public A, public virtual V {

};

class C : public A, public virtual V {

};

class D : public B, public C {
    public:
        void f() ;
};

void g() {
    D d ;
    B* pb = &d ;  // No Problem
    A* pa = &d ;  // Error: 'A' is ambiguous base of 'D'
    V* pv = &d ;  // No Problem
} 
```

我不明白为什么我有这个错误但是我没有其他影响的错误。

谢谢 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:55:32.847

[在多重继承](http://jamesthornton.com/eckel/TICPP-2nd-ed-Vol-two/Chapter06.html)的情况下，这是完全可以预料的。我们这里有一个钻石继承的例子。D 现在有两个 A 的副本，一个从 B 继承，一个从 C 继承。您需要指定暴露给 D 的 A 的成员来自 B 或 C 中的哪一个。

请参阅：[使用 C++，我如何正确地从同一个基类继承两次？](https://stackoverflow.com/questions/1990032/using-c-how-do-i-correctly-inherit-from-the-same-base-class-twice)

你可能会考虑：

*   使用虚拟继承：

    `class B : public virtual A, public virtual V {...};`

    `class C : public virtual A, public virtual V {...};`

*   使用组合作为摆脱多重继承的一种方式。

我建议阅读[用虚拟继承解决钻石问题](http://www.cprogramming.com/tutorial/virtual_inheritance.html)

# java - 在 Java 中从字符串创建字节类型

> ID：10093860
> 
> 赞同：2
> 
> 时间：2012-04-10T17:52:53.377
> 
> 标签：java, byte

我有这个字符串`11110000`，它代表一个`byte`.

我想`byte`从该字符串创建一个，但我在网上找不到任何示例。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T17:56:15.537

`int value = Integer.parseInt(s, 2); // 2 for binary`

如果你想要字节类型：

`byte value = Byte.parseByte(s, 2); // 2 for binary`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-10T17:54:49.660

使用[`Byte#parseByte()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Byte.html#parseByte%28java.lang.String%29).

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-10T17:56:25.180

采用

```
byte b = (byte) Integer.parseInt("11111",2); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T18:12:32.693

```
byte myByte = (byte)Integer.parseInt("11110000", 2); 
```

# c# - 带有 null LoaderExceptions 和 null InnerException 的 ReflectionTypeLoadException

> ID：10093864
> 
> 赞同：3
> 
> 时间：2012-04-10T17:53:00.153
> 
> 标签：c#, exception, reflection

`ReflectionTypeLoadException`既有`null` `LoaderExceptions`属性又有属性的可能原因是什么`null` `InnerException`？

[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.reflection.reflectiontypeloadexception%28v=vs.90%29.aspx)读起来好像`LoaderExceptions`总是包含详细说明无法加载的特定类型的异常，但这显然并不总是正确的。那么什么情况会导致在这种状态下抛出异常呢？

*关于 SO 有很多关于`ReflectionTypeLoadException`. 但是，它们都没有解决这种特定情况。*

# emacs - Emacs 256 色无法使用 PuTTY 和屏幕

> ID：10093865
> 
> 赞同：11
> 
> 时间：2012-04-10T17:53:06.620
> 
> 标签：emacs, putty, emacs23

我无法使用 emacs 23.1.1 使用 PuTTY 和屏幕连接来获得 256 种颜色。服务器正在运行 CentOS 5.6。

在我的 PuTTY 配置中，我的终端类型字符串设置为`xterm-256color`. 在我的`.screenrc`我有`term xterm-256color`一次屏幕`tput colors`给我`256`，`echo $TERM`给我`xterm-256color`，但是一旦我开始emacs`M-x list-colors-display`只给我8种颜色。

不确定是什么问题。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-28T07:20:00.433

我遇到了同样的问题。

要解决此问题，只需将其添加到 ~/.bashrc（是的，我使用 bash）

```
# -----------
export TERM=xterm-256color
export TERMCAP=
# ------------ 
```

在屏幕窗口中运行 screen 和 emacs。现在好了。

版本：

bash-4.2.45

emacs-24.3_10

屏幕版本 4.00.03 (FAU) 2006 年 10 月 23 日

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-29T20:15:57.680

你`~/.screenrc`应该阅读：

> 术语 screen-256color

（这不应与 混淆`xterm-256color`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T22:33:42.307

看着你的帖子和你对别人的回复，听起来你的问题是……屏幕。为了检验我的假设，试试这个......

```
$ wget http://www.frexx.de/xterm-256-notes/data/256colors2.pl
$ chmod 755 256colors2.pl
$ ./256colors2.pl 
```

...如果您在外壳中看到 256 种颜色，但在屏幕中没有，则问题出在屏幕上。而且，即使还有其他问题，您也必须修复屏幕才能在 emacs 中看到 256 色；）

我最近在一个没有 sudo 的系统上为自己解决了这种情况，方法是构建一个个人的 screen 副本。屏幕很小，没什么大不了的……而且，恕我直言，带有 256 色的 emacs 非常值得费心。

在 Linux 2.6.x 上，我这样做了：

```
$ wget ftp://ftp.gnu.org/gnu/screen/screen-4.0.3.tar.gz 
$ tar -xf screen-4.0.3.tar.gz
$ cd screen-4.0.3
$ ./configure --prefix=$HOME --enable-colors256
$ make
$ make install 
```

用...测试新屏幕

```
$ ~/bin/screen
$ ./256colors2.pl 
```

...如果可行，请将其放入您的 ~/.bashrc 中：

PATH=~/bin:$PATH ; 导出路径

我最终报告的屏幕是早期版本...

```
$ ~/bin/screen -v
Screen version 4.01.00devel (GNUdf0777e) 2-May-06 
```

...比我系统上的版本：

```
$ /usr/local/bin/screen -v
Screen version 4.00.03 (FAU) 23-Oct-06 
```

但是虽然他们都声称支持 256 种颜色......

```
$ tput colors 
256 
```

只有新版本真正做到了。是的！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T19:26:30.650

Putty 有一个允许 256 色模式的设置。它在窗口/颜色下，标记为“允许终端使用 xterm 256 色模式”。确保已检查。

加载 emacs 后，您可以确认 emacs 使用的 TERM 值：

```
(assoc 'tty-type (frame-parameters (car (frame-list)))) 
```

应该是`(tty-type . "xterm-256color")`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T11:12:37.527

尝试在守护程序模式下使用 emacs ( `emacs --daemon`)，并打开 emacsclients ( `emacsclient -t`) 而不是使用 screen/tmux。这将使您在调试时少一个变量来处理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T14:36:50.143

尽管没有使用 emacs，但我在 putty 和 screen 方面遇到了类似的问题。在ataylor 的回复之后，我去了Putty 中的Window/Colors。在那里我找到并检查了“使用系统颜色”。这解决了我的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-10T19:20:39.653

我有类似的困难，我相信这两条线都是 screen、putty 和 emacs 所必需的，才能与 256 色相处。

```
termcapinfo xterm 'Co#256:AB=\E[48;5;%dm:AF=\E[38;5;%dm'
term xterm-256color 
```

你可能也需要这条线。

```
defbce "on" 
```

如果这还不够，请说出来。

# xml - 怎么去掉右边的零

> ID：10093873
> 
> 赞同：1
> 
> 时间：2012-04-10T17:54:00.210
> 
> 标签：xml, regex, unix

我有一个包含多个数字的 xml，如下所示：

```
<xml>
<case1>
    <amount>3.140000</amount>
    <amount2>3.0000</amount2>
    <detail>
        <name>something</name>
        <earning>3.1000</earning>
    </detail>
</case1>
<case2>
    <amount>3.10000</amount>
</case2> 
```

xml 在一行中，我正在使用这样的正则表达式进行测试：

```
echo "433.000" | sed -e 's/\([0-9]*\.\)\([1-9]*\)\(0*\)/\1\2/g' 
```

但它给了我类似 3\. for 3.00 的东西。我不想解析任何东西，只是删除零。不知何故，当我尝试时它什么也没做：

```
sed -e 's/\([0-9]*\.\)\([1-9]*\)\(0*\)/\1\2/g' xmlFile.xml 
```

不得不提一下，我不擅长正则表达式，而且我在托管服务器上，所以无法安装任何库或程序，所以只允许使用 shell。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:02:42.077

以下应该有效：

```
sed -e 's/\(\.[1-9][1-9]*\)0*/\1/g' -e 's/\.00*//' xmlFile.xml 
```

这将导致以下结果：

```
<xml>
<case1>
    <amount>3.14</amount>
    <amount2>3</amount2>
    <detail>
        <name>something</name>
        <earning>3.1</earning>
    </detail>
</case1>
<case2>
    <amount>3.1</amount>
</case2> 
```

# python - wxPython GUI - 可以与 Java GUI 或 Visual Studio GUI 相比吗？

> ID：10093879
> 
> 赞同：4
> 
> 时间：2012-04-10T17:54:23.360
> 
> 标签：python, wxpython

我在使用 Java 和 Visual Studio 对企业应用程序进行编程方面有两年的经验，而且我是 Python 和 wxPython 的新手。所以我的问题是：wxPython 能否为我提供足够丰富的 GUI 来创建相同的应用程序？我之所以使用 Python，是因为它的多样性、简单性和应用程序的快速开发。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T18:34:23.137

我认为这取决于您对“富有”的定义。我使用它并且喜欢认为它可以制作一些相当有用的 GUI。这是我现在正在编写的处理传感器数据的 wxPython 应用程序的屏幕截图 - 不是世界上最精细或最复杂的，但到目前为止它对用户来说似乎相当直观：

![NDIToolbox Windows 7 屏幕截图](../Images/a0f10b782b15686dffc11f2ed807b07b.png)

我发现[wxPython 文档](http://wxpython.org/docs/api/wx-module.html)有时有点稀疏，但只要您安装了[演示并打开了](http://wxpython.org/download.php)[wxWidgets 文档](http://www.wxwidgets.org/docs/)，它就是一个很好的工具包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:57:35.067

wxGlade 将为您提供 GUI 框架。您仍然需要一个单独的文本编辑器（我推荐 Geany）来填写处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T00:12:59.923

[wxPython 演示](http://wxpython.org/download.php)展示了大部分可用的小部件。我建议你看看这个，看看它是否能满足你的需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T18:08:17.443

我当然会建议使用 Python 及其 GUI 库，但只有你才能真正决定你认为它是否比 Visual Studio 或 Java 更好。Python 的语法是非常基本的，我想很多人都会同意，当您了解它时（没有大括号等），使用它是一种乐趣。Python Tkinter 是一个非常简单的 GUI 库，非常适合制作基本应用程序。另一方面，WxPython 比 Tkinter 先进得多，因此用户体验更丰富。我在使用 Wx 时遇到的唯一问题是无法在网上找到合适的示例来演示某些事情是如何完成的。祝你好运，希望你能找到你要找的东西。卡尔

# parameters - 在verilog中使用带有for循环的参数进行位选择

> ID：10093880
> 
> 赞同：3
> 
> 时间：2012-04-10T17:54:27.023
> 
> 标签：parameters, for-loop, verilog, hdl

我正在 Verilog 中设计一些硬件，但为了保持灵活性，我使用参数来设置宽度，以便我可以根据需要修改宽度而无需修改代码。我遇到的一个问题是在一段代码中，我希望能够并行写入多个单元格。

```
parameter DATA_WIDTH = 16;
parameter BUFFER_SIZE = 16;
parameter LOAD_WIDTH = DATA_WIDTH*BUFFER_SIZE;

input [LOAD_WIDTH-1:0] i_load_data;

reg [DATA_WIDTH-1:0]    r_data_buf[BUFFER_SIZE-1:0];

...

always@(posedge clk) begin
....
    else if (i_load_flag) begin
        for(i = 0; i < BUFFER_SIZE; i = i + 1)
            r_data_buf[i] <= i_load_data[i * BUFFER_SIZE + BUFFER_SIZE - 1:i * BUFFER_SIZE];
    end
end 
```

由于必须读取数据的方式，我需要将 r_data_buf 保留为数组。我也不清楚为什么 verilog 不喜欢这段代码，因为在编译时一切都是常数，或者我如何修复它并仍然获得我想要的行为。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T18:49:51.770

Verilog 编译器很不高兴，因为它看到 i_load_data[x:y] 其中 x 和 y 都依赖于参数，因此它担心这可能会导致宽度变化（尽管在您的情况下这是不可能的）。

有几种简单的方法可以解决这个问题：

1.  使用 +: 运算符指定宽度。（我也将 BUFFER_SIZE 更改为 DATA_WIDTH，因为这看起来像是一个错字。）在这个表格中，您给出了 LSB 的索引和您希望选择的数据的宽度。

    ```
    r_data_buf[i] <= i_load_data[i * DATA_WIDTH  +: DATA_WIDTH]; 
    ```

2.  使用额外的 for 循环单独设置每个位

    ```
    for(i = 0; i < BUFFER_SIZE; i = i + 1)
    begin
        for(j = 0; j < DATA_WIDTH; j = j + 1)
        begin
            r_data_buf[i][j] <= i_load_data[i * DATA_WIDTH  + j];
        end
    end 
    ```

# jquery - 从 jQuery 调用时出现 WCF 服务错误

> ID：10093882
> 
> 赞同：1
> 
> 时间：2012-04-10T17:54:34.127
> 
> 标签：jquery, wcf

尝试使用下面的 jquery 代码调用以下服务时出现 500 错误，有人可以帮忙吗？

result.status = 500 result.statusText = "System.ServiceModel.ServiceActivationException"

这是 SVC 服务：

```
 [WebInvoke( Method = "POST", 
                UriTemplate = "/tools/data/SearchAll")]
    public JsonArray SearchAll(string tool, JsonObject filters)
    {...} 
```

这是 jQuery 服务调用：

```
 //Generic function to call WCF  Service
    function callService() {
        $.ajax({
            type: type, //GET or POST or PUT or DELETE verb
            url: url, // Location of the service
            data: data, //Data sent to server
            contentType: contentType, // content type sent to server
            dataType: dataType, //Expected data format from server
            processdata: processData, //True or False
            success: function (msg) {//On Successfull service call
                serviceSucceeded(msg);
            },
            error: serviceFailed// When Service call fails
        });
    }

    function searchAll() {
        var tool = "1";
        var filters = '{{ "col": "thiscol", "val": "thisval" }, { "col": "thiscol2", "val": "thisval2" }, { "col": "thiscol3", "val": "thisval3"}}';
        type = "POST";
        url = "ToolService.svc/tools/data/SearchAll";
        contentType = "application/json; charset=utf-8";
        dataType = "json";
        data = '{ "tool": "' + tool + '", "filters" : "' + filters + '" }',
        processData = false;
        method = "SearchAll";
        callService();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:49:03.250

我对此进行了排序，结果是（除其他外）格式错误的 json 被传递给服务方法，现在一切看起来都很好。

谢谢您的帮助。

# haskell - 在 haskell 中使用引用透明度预先计算值

> ID：10093884
> 
> 赞同：6
> 
> 时间：2012-04-10T17:54:40.490
> 
> 标签：haskell, referential-transparency, precompute

假设我们有一个这样的程序：

```
list = [1..10000000]

main = print $ sum list 
```

我希望将其编译为可执行文件仅打印 50000005000000，而无需花费太多时间和精力。

基本上，任何肯定会被计算的表达式（也许严格性分析在这里会有所帮助）都可以在编译期间*预先计算*（即我们使用引用透明性来表示计算值时并不重要）。

简而言之：**“必须计算”+参考透明度=可以预先计算**

这就像运行程序，直到我们遇到依赖于输入的东西（即程序的核心，所有输入通用的，将被预先计算）

目前是否有实现这一目标的现有机制（用 Haskell 或任何其他语言）？[请不要指向 C++ 中的模板之类的东西，因为它首先没有引用透明性。]

如果不是，这个问题有多难？[伴随的技术（和理论）问题是什么？]

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T18:01:22.400

进行编译时计算的通用答案是使用 Template Haskell。但是对于这个特定的用例，你可以使用[向量](http://hackage.haskell.org/package/vector)包和 LLVM 后端，GHC 会优化掉这个总和。

```
sorghum:~% cat >test.hs
import Data.Vector.Unboxed as V
main = print (V.sum $ V.enumFromN (1 :: Int) 10000000)
sorghum:~% ghc --make -O2 -fllvm test.hs
[1 of 1] Compiling Main             ( test.hs, test.o )
Linking test ...
sorghum:~% time ./test
50000005000000
./test  0.00s user 0.00s system 0% cpu 0.002 total
sorghum:~% objdump -d test | grep 2d7988896b40
  40653d:   48 bb 40 6b 89 88 79    movabs $0x2d7988896b40,%rbx
  406547:   49 be 40 6b 89 88 79    movabs $0x2d7988896b40,%r14 
```

（如果不是很明显，`0x2d79888896b40`是`50000005000000`。）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-10T18:01:24.493

这在一般情况下是不安全的。原因是 Haskell 表达式可能是*纯粹*的，但它们也可能*无法终止*。编译器应该总是终止，所以你能做的最好的就是“评估这个结果的 1000 步”。¹但是，如果您确实添加了这样的限制，如果您正在编译一个程序以在具有 TB 级 RAM 的超级计算机集群上运行，并且编译器内存不足怎么办？

您可以添加许多限制，但最终您会将优化减少为一种缓慢的常量折叠形式（尤其是对于大多数计算依赖于运行时用户输入的程序而言）。而且由于`sum [1..10000000]`这里需要半秒钟，所以它不太可能落在任何合理的限制之下。

当然，像这样的特定情况通常可以优化掉，而 GHC 经常会优化掉这样的复杂表达式。但是编译器不能只在编译时安全地评估任何表达式；它必须受到非常严格的限制，并且在这些限制下它会有多大帮助是有争议的。它是编译器，而不是解释器 :)

¹这会大大减慢任何包含大量无限循环的程序的编译速度*——*由于 Haskell 是非严格的，这比你想象的更有可能）。或者，更常见的是，任何包含大量长时间运行计算的程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T01:00:02.220

听起来像是超级编译的工作！这个问题听起来像是对它的描述，关于非终止的讨论反映了超级编译器开发人员面临的问题。我在 GHC wiki 上看到有人正在为它开发一个生产超级编译器，但不知道结果如何。

# prolog - 序言列表构建的更多麻烦

> ID：10093887
> 
> 赞同：2
> 
> 时间：2012-04-10T17:54:50.613
> 
> 标签：prolog

很抱歉就此发布另一个问题，但我似乎只是在这里绕圈子！

对于我的程序，我需要制作一个列表列表，每个子列表包含 2 个数字 X 和 Y 以及这两个数字的总和和乘积。到目前为止，我有以下内容：

```
genList(100,N, X,[]).

genList(S,N, X,[[X,Y,Sum,Product]|Xs]):-

    Y is N+1,
    Sum is X+Y,
    NewS is Sum,
    Sum<101,
    Product is X*Y,
    N1 is N+1,
    genList(NewS,N1, X,Xs).

genList(S,N,X,Q):-
    N+X < 101,
    NextX is X + 1,
    genList(0,NextX,NextX,Q). 
```

目标是找到 sum<= 100 的每一对数字。因此，对于一个起始值，X 将找到每一对 1 < X < Y，其中 sum<=100，并用所有数字 2 遍历它-N 将给出可能对的完整列表。

对于那些感兴趣的人，我正在解决的问题是总和/乘积问题，[在这里](http://www.mathematik.uni-bielefeld.de/~sillke/PUZZLES/logic_sum_product)描述（第二页）

如果有人可以提供帮助，将不胜感激！

此外，无法使用内置的 prolog 谓词，因此执行此操作的方法很复杂，而不是使用 findall。

此谓词产生的输出的一小部分摘录如下：

[[5,6,11,30],[5,7,12,35],[5,8,13,40],[5,9,14,45],[5,10,15,50] ,[5,11,16,55],[5,12,17,60],[5,13,​​18,65],[5,14,19,70],[5,15,20,75] ,[5,16,21,80],[5,17,22,85],[5,18,23,90],[5,19,24,95],[5,20,25,100],[ 5,21,26,105],[5,22,27,110], ...

我认为它非常接近，但仍有一些不太对劲的地方。

它在数字对中循环，但需要使用“;” 查看所有答案，这不是我想要的。此外，在所有答案都用完后，它会返回 false。我就是想不通。

此外，它给出了起始值的完整答案，但每次都会删除一个子列表，直到我只剩下最后一组对。

例如 genList(0,48,48,Q)。给我：

```
[[48,49,97,2352],[48,50,98,2400],[48,51,99,2448],[48,52,100,2496]]
[[48,49,97,2352],[48,50,98,2400],[48,51,99,2448],[48,52,100,2496],[49,50,99,2450],[49,51,100,2499]]
[[48,49,97,2352],[48,50,98,2400],[48,51,99,2448],[49,50,99,2450],[49,51,100,2499]]
[[48,49,97,2352],[48,50,98,2400],[49,50,99,2450],[49,51,100,2499]]
[[48,49,97,2352],[49,50,99,2450],[49,51,100,2499]]
[[49,50,99,2450],[49,51,100,2499]]
false. 
```

如您所见，每次都会删除一个子列表，我就是不明白为什么！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T18:40:39.513

嗯，你快到了。由于您已经在这个问题上花费了相当长的时间，我将向您展示一些有效的代码并对其进行评论：

首先，我们调用一个工人谓词，它将携带`X`和`Y`作为参数并将它们初始化为`0`：

```
validPair(Result) :-
    validPair(0, 0, Result). 
```

然后我们处理我们的基本情况。由于我们从 开始`0`，基本情况是上限。我们本可以反过来，这只是一个选择。请注意，此处的剪切意味着我们不必担心在我们的以下子句`Y`中优于，`100`因为在这种情况下它们不会被执行。

```
validPair(_X, 101, []) :- !. 
```

现在这是`X`适合总和低于 的正确限制的情况`100`。我们首先检查一切是否正常，然后我们使用`!/0`谓词再次阻止执行到达我们的最后一个子句，因为那没有意义。完成后，我们只需 avec 计算有趣的值并将它们添加到列表中。

```
validPair(X, Y, [[X, Y, Sum, Product]|R]) :-
    Limit is min(100 - Y, Y),
    X =< Limit,
    !,
    Sum is X + Y,
    Product is X * Y,
    NextX is X + 1,
    validPair(NextX, Y, R). 
```

唯一需要处理的情况是当`X`超出我们固定的限制以使总和低于`100`. 发生这种情况时，我们从下一个重新开始`Y`并重置`X`为`0`.

```
validPair(_X, Y, R) :-
    NextY is Y + 1,
    validPair(0, NextY, R). 
```

如果有任何问题，请在评论中要求澄清。

注意：这里使用的切分是红色切分——即谓词的正确性完全取决于子句的顺序。这是不好的做法。尝试用适当的警卫来补充它们（`X =< 100`例如），这将是一个很好的补充:)

## 编辑：

现在让我们审核您的代码：D 我将首先评论样式： 在此子句中（称为 fact，因为它没有正文），您只使用一次`N`，`X`即您不关心存储它们的值。在这种情况下，我们在他们的名字前面加上 a`_`或者只使用匿名变量`_`：

```
genList(100,N, X,[]). 
```

变成

```
genList(100, _N, _X, []). 
```

或者

```
genList(100, _, _, []). 
```

同样的事情在这里`S`。本条款中不使用它。它只在第一个中使用。您可以将其替换为`_`或者`_Sum`如果您也想在此处的其他条款中记录其使用（良好实践）。然后，您使用两个变量来保存完全相同的值。它在这里没有兴趣。只需将 next用作第一个参数`genList/4`，`Sum`而不是为此声明一个新变量。与`Y`和相同`N1`。该子句的正确版本变为：

```
genList(S,N, X,[[X,Y,Sum,Product]|Xs]):-
    Y is N+1,
    Sum is X+Y,
    NewS is Sum,
    Sum<101,
    Product is X*Y,
    N1 is N+1,
    genList(NewS,N1, X,Xs). 
```

进入

```
genList(_PreviousSum, N, X,[[X, Y, Sum, Product]|Xs]):-
    Y is N+1,
    Sum is X + Y,
    Sum<101,
    Product is X * Y,
    genList(Sum, Y, X, Xs). 
```

您的最后一个子句与算术有问题：`N + X`只是 term `+(N, X)`。这不是价值`N + X`。您必须`is/2`像在其他子句中一样使用谓词。与 for 的第二个子句相同的问题`S`。那些小的编辑变成了：

```
genList(S,N,X,Q):-
    N+X < 101,
    NextX is X + 1,
    genList(0,NextX,NextX,Q). 
```

进入

```
genList(_PreviousSum, N, X, Q) :-
    Sum is N + X,
    Sum < 101,
    NextX is X + 1,
    genList(0, NextX, NextX, Q). 
```

因此，目前您更正的程序如下所示：

```
genList(100, _N, _X, []).
genList(_PreviousSum, N, X,[[X, Y, Sum, Product]|Xs]):-
    Y is N+1,
    Sum is X + Y,
    Sum<101,
    Product is X * Y,
    genList(Sum, Y, X, Xs).
genList(_PreviousSum, N, X, Q) :-
    Sum is N + X,
    Sum < 101,
    NextX is X + 1,
    genList(0, NextX, NextX, Q). 
```

由于它只是样式编辑，因此不会改变其行为。

现在让我们看看它有什么问题，不是在风格上，而是在逻辑上。首先，基本情况。这里一切都很好。你检查总和是你的上限，如果它是 return `[]`。完美的！

```
genList(100, _N, _X, []). 
```

现在，您的“内部递归”。几乎*没*问题。让我们看看让我感到困扰的细节：您有一个值保留了之前的总和，但计算了一个新值并根据上限 + 1 重新测试它。更好的想法是测试`PreviousSum`并`< 100`删除`Sum < 101`测试。最好证明你为此有一个论据！另外，更容易理解的是，在这种限制情况下，它被用来阻止子句的执行。所以，

```
genList(_PreviousSum, N, X,[[X, Y, Sum, Product]|Xs]):-
    Y is N+1,
    Sum is X + Y,
    Sum<101,
    Product is X * Y,
    genList(Sum, Y, X, Xs). 
```

会变成

```
genList(PreviousSum, N, X,[[X, Y, Sum, Product]|Xs]):-
    PreviousSum < 100,
    Y is N+1,
    Sum is X + Y,
    Product is X * Y,
    genList(Sum, Y, X, Xs). 
```

请注意，此修改有点风格，它不会修改程序行为。它仍然使它更具可读性！

现在，大灰狼：genList(_PreviousSum, N, X, Q) :- Sum 是 N + X，Sum < 101，NextX 是 X + 1，genList(0, NextX, NextX, Q)。这里有很多话要说。首先，再一次，您不需要计算`Sum`，因为`PreviousSum`已经持有该值。然后，应该测试它`< 100`而不是`< 101`. 然后，应该对其进行测试`X >= N`，因为只有在这种情况下，您才不想通过第二个子句，而是在这个子句中。最后但并非最不重要的一点是，`genList(0, NextX, NextX, Q)`您应该使用 genList(NextX, 0, NextX, Q) 开始它，而不是开始一个新的迭代。在这里，您没有正确重置值。结果子句是：

```
genList(PreviousSum, N, X, Q) :-
    PreviousSum < 100,
    N >= X,
    NextX is X + 1,
    genList(NextX, 0, NextX, Q). 
```

正如你所看到的，我们知道我们不能通过我们的第二个子句 if `N >= X`。我们应该添加适当的测试以确保它是正确的：

```
genList(PreviousSum, N, X,[[X, Y, Sum, Product]|Xs]):-
    PreviousSum < 100,
    N < X,
    Y is N+1,
    Sum is X + Y,
    Product is X * Y,
    genList(Sum, Y, X, Xs). 
```

大功告成，你的程序是正确的！

最终版本是：

```
genList(100, _N, _X, []).
genList(PreviousSum, N, X,[[X, Y, Sum, Product]|Xs]):-
    PreviousSum < 100,
    N < X,
    Y is N+1,
    Sum is X + Y,
    Product is X * Y,
    genList(Sum, Y, X, Xs).
genList(PreviousSum, N, X, Q) :-
    PreviousSum < 100,
    N >= X,
    NextX is X + 1,
    genList(NextX, 0, NextX, Q). 
```

变量命名仍然很差。更清晰的版本是：

```
genList(100, _X, _Y, []).
genList(PreviousSum, X, Y,[[X, Y, Sum, Product]|Xs]):-
    PreviousSum < 100,
    X < Y,
    NewX is X + 1,
    Sum is X + Y,
    Product is X * Y,
    genList(Sum, NewX, Y, Xs).
genList(PreviousSum, X, Y, Q) :-
    PreviousSum < 100,
    X >= Y,
    NextY is Y + 1,
    genList(NextY, 0, NextY, Q). 
```

在这里您仍然有一个问题（是的，它永远不会结束：D）：在计算总和产品等之前增加变量的事实意味着您跳过了一些值。之后尝试增加。让它作为练习:)

# java - Lucene tika 索引失败

> ID：10093888
> 
> 赞同：0
> 
> 时间：2012-04-10T17:54:53.513
> 
> 标签：java, lucene, indexing, apache-tika

我使用 Tika 编写了（主要从 lucene-in-action 电子书中复制）一个索引示例。但它根本不索引文档。编译或运行没有错误。我尝试索引 .pdf、.ppt、.doc 甚至 .txt 文档，没有用，在搜索返回 0 次点击时，我注意了文档中的单词。请看一下代码：

```
public class TikaIndexer extends Indexer {

private boolean DEBUG = false; 
static Set textualMetadataFields = new HashSet(); 
static { 
    textualMetadataFields.add(Metadata.TITLE); 
    textualMetadataFields.add(Metadata.AUTHOR); 
    textualMetadataFields.add(Metadata.COMMENTS); 
    textualMetadataFields.add(Metadata.KEYWORDS); 
    textualMetadataFields.add(Metadata.DESCRIPTION); 
    textualMetadataFields.add(Metadata.SUBJECT); 
}

public TikaIndexer(String indexDir) throws IOException {
    super(indexDir);
}

@Override
protected boolean acceptFile(File f) {
    return true; 
}

@Override
protected Document getDocument(File f) throws Exception {
    Metadata metadata = new Metadata();

    metadata.set(Metadata.RESOURCE_NAME_KEY, 
            f.getCanonicalPath());

    InputStream is = new FileInputStream(f);
    Parser parser = new AutoDetectParser();
    ContentHandler handler = new BodyContentHandler(10*1024*1024);
    try {
        parser.parse(is, handler, metadata, new ParseContext());
    } finally {
        is.close();
    }
    Document doc = new Document();
    doc.add(new Field("contents", handler.toString(), Field.Store.NO, Field.Index.ANALYZED));
    if (DEBUG) {
        System.out.println(" intregul textt: " + handler.toString());
    }
    for (String name : metadata.names()) { 
        String value = metadata.get(name);
        if (textualMetadataFields.contains(name)) {
            doc.add(new Field("contents", value, 
                    Field.Store.NO, Field.Index.ANALYZED));
        }
        doc.add(new Field(name, value, Field.Store.YES, Field.Index.NO));
        if (DEBUG) {
            System.out.println(" " + name + ": " + value);
        }
    }
    if (DEBUG) {
        System.out.println();
    }
    return doc;
 }
} 
```

主要课程：

```
public static void main(String args[])
{
    String indexDir = "src/indexDirectory";
    String dataDir = "src/filesDirectory";
      try 
            {
                TikaConfig config = TikaConfig.getDefaultConfig();
                List<MediaType> parsers = new ArrayList(config.getParser().getSupportedTypes(new ParseContext())); //3
                Collections.sort(parsers);
                Iterator<MediaType> it = parsers.iterator();
                System.out.println(parsers.size());
                System.out.println("Tipuri de parsere:");
                while (it.hasNext()) {
                    System.out.println(" " + it.next());
                }

                System.out.println();

                long start = new Date().getTime();
                TikaIndexer indexer = new TikaIndexer(indexDir);
                int numIndexed = indexer.index(dataDir);

                long end = new Date().getTime();
                System.out.println("Indexarea a " + numIndexed + " fisiere a durat "
                        + (end - start) + " milisecunde.");
                System.out.println();
                System.out.println("--------------------------------------------------------------");
                System.out.println();
            } 
            catch (Exception ex) 
            {
                System.out.println("Nu s-a putut realiza indexarea: ");
                ex.printStackTrace();
                Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
            }
 } 
```

# actionscript-3 - Flex 3 - 将 MS Word 文本复制到 Flex 应用程序

> ID：10093889
> 
> 赞同：0
> 
> 时间：2012-04-10T17:55:01.683
> 
> 标签：actionscript-3, apache-flex, flash-builder, flex3

是否可以将格式化的 MS Word 文档中的文本复制到 Flex 应用程序中？我们正在将 VB.net 应用程序转换为 Flex Web 应用程序，用户将文本移动到富文本编辑器的基本方法之一是将文本和格式复制到剪贴板，然后复制到 VB 应用程序，效果很好。然而，当我们使用 Flex 时，所有的格式都会被丢弃。

Flex 3.0 有没有办法在从剪贴板复制时保持格式，因为可以想象文本可能来自 PDF/Excel/Word/Powerpoint/等？

我在这里搜索过，并询问了强大的 Google 向导，但是很难破译 Flex 是否有办法，或者是否更容易告诉每个人使用 TinyMCE 之类的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:20:24.413

不，这不可能以任何简单的方式实现。我在那里发现了一个小工具，它可以提供在剪贴板中显示的原始数据，这对于调试这个问题“google it”很容易找到。看来您甚至可以指定要从剪贴板中提取的格式，但是 flex 没有内置任何东西可以解析/翻译成 Flex 将接受的富文本。另请注意，在较新版本的 Flex 中，您在文本方面具有更大的灵活性，但 Flex 中可用的组件与 Microsoft Office 工具套件中的组件之间并没有一对一的匹配。

Adobe 剪贴板文档

[http://help.adobe.com/en_US/as3/dev/WS0579B9EE-CF1E-434e-A386-A04DC7786FC9.html](http://help.adobe.com/en_US/as3/dev/WS0579B9EE-CF1E-434e-A386-A04DC7786FC9.html)

具有类似目标的 Stackoverflow 帖子

[无法使用 Flex 从剪贴板获取文件数据](https://stackoverflow.com/questions/542664/cannot-get-file-data-from-the-clipboard-using-flex)

# c++ - 在工作目录之外用 C++ 打开文件

> ID：10093891
> 
> 赞同：2
> 
> 时间：2012-04-10T17:55:15.903
> 
> 标签：c++, file-io

我有一个程序，它将有几个资源文件，用户可以将它们放在计算机上的某个位置，这些文件与可执行文件不在同一个文件夹中。如何打开这些文件？

我发现很多答案说事情不工作的原因是文件不在工作目录中。我试过提供完全合格的路径：

```
ifstream str;
str.open("/home/millere/foo.txt") 
```

但这并不成功。我知道路径是正确的（复制和粘贴）。我找不到任何关于它的文档，但我认为它必须是可能的。（例如，`vim ~/foo.txt`来自`~`工作以外的任何地方）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T18:22:15.607

假设您打算使用`ifstream`而不是`iostream`，您的代码是正确的。 `ifstream`可以使用文件的路径以及工作目录中的文件名。

如果文件不存在，则不会引发异常，但设置了失败位。在尝试对流执行任何操作之前，您应该检查这一点。

```
std::ifstream input("/home/bob/stuff.txt");

if (!input) std::cerr << "Could not open the file!" << std::endl;

else
{
    // ...
} 
```

如果您仍然无法从文件中提取数据，则问题出在代码中的其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-13T09:59:31.583

我遇到了同样的问题并很快注意到，`open`当尝试从不同的文件夹中获取时，有一个不同的源目录（如果使用 Cmake，则由 cmake 指定）。你可以通过做找到输出/输入源目录是什么

```
system("ls") 
```

或者

```
system("dir") 
```

在 windows 上显示当前输出/输入目录的内容。

# javascript - 从幻灯片中的图像中获取图像 src

> ID：10093892
> 
> 赞同：2
> 
> 时间：2012-04-10T17:55:21.563
> 
> 标签：javascript, setattribute, getattribute

我今天一直在环顾四周，花了几个小时试图完成一些事情。对于客户，我在单击图像时创建带有灯箱的幻灯片。幻灯片和灯箱都可以工作，但我还没有在灯箱中得到正确的图像。

这是加载幻灯片的代码，当单击图像时会打开灯箱。（幻灯片的图像由 php 脚本加载并转换为 Javascript 数组）

```
<script type="text/javascript">

var curimg=0;
function rotateimages(){
document.getElementById("slideshow").setAttribute("src", "images/"+galleryarray[curimg]);
curimg=(curimg<galleryarray.length-1)? curimg+1 : 0;
}

window.onload = function(){
setInterval("rotateimages()", 1000);
}
</script>
<div style="width: 170px; height: 160px">
<a href = "javascript:void(0)" onclick =          "document.getElementById('light').style.display='block';document.getElementById('fade').style.    display='block'">
<img id="slideshow" src="" />
</a>
<div id="light" class="white_content">
<img id="lightImg" src="" />
<script>
var image = document.getElementById("slideshow").src;
document.getElementById("lightImg").setAttribute("src", image);
</script> 
```

我现在尝试创建一个名为“image”的变量，并让它包含幻灯片中当前图像的 src。所以我可以将它加载到灯箱中的图像中。

希望有人能给我一些有用的提示。我是 Javascript 语言的新手。

幻灯片的脚本来自：[http ://www.javascriptkit.com/javatutors/externalphp2.shtml](http://www.javascriptkit.com/javatutors/externalphp2.shtml)

问候科恩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:13:30.953

这些天来，使用突兀的 Javascript 确实没有任何借口（东西在你的 HTML 属性中，理想情况下它应该在一个外部文件中。http: [//en.wikipedia.org/wiki/Unobtrusive_JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)）。

我帮了你一些忙，清理了你的代码，并在你似乎出错的地方改变了它。正如 DotNetter 已经指出的那样，在这种情况下使用 jQuery 是明智的，因为它确实简化了事情。但是，我将假设出于某种原因您想要在纯 js 中使用它。下面是您发布的带有正确更改的代码的简化。

```
<style type="text/css">
    .wrapper {
        width: 170px;
        height: 160px;
    }
</style>

<script type="text/javascript">
    var curimg=0;
    function rotateimages(){
        document.getElementById("slideshow").setAttribute("src", "images/" + galleryarray[curimg]);
        curimg=(curimg<galleryarray.length-1)? curimg+1 : 0;
    }

    window.onload = function(){
        setInterval("rotateimages()", 1000);

        document.getElementById("slideshow").onclick = function () {
            var imageSrc = document.getElementById("slideshow").src;
            document.getElementById("lightImg").setAttribute("src", imageSrc);
            document.getElementById('light').style.display = 'block';
            document.getElementById('fade').style.display = 'block';
        }
    }
</script>

<div class='wrapper'>
    <img id="slideshow" src="" />
    <div id="light" class="white_content">
        <img id="lightImg" src="" />
    </div>
</div> 
```

之前，您在页面加载时获取当前图像的 src，您需要在用户单击时获取图像的 src

# cpu - 进程调度器和线程调度器

> ID：10093901
> 
> 赞同：0
> 
> 时间：2012-04-10T17:55:58.850
> 
> 标签：cpu, scheduler

我正在阅读有关进程和线程的 galvin 章节查看进程，多个进程由 cpu 调度程序或短期调度程序调度，之后出现线程是执行路径的概念，一个进程可以包含多个线程。现在我想到了一个场景，假设cpu调度程序使用循环算法调度一个进程执行，现在假设调度进程有50个线程，现在在这种情况下，同一个进程的线程是如何调度的，上下文如何切换b /w 线程，过程发生 能否请 sm 详细解释一下整个场景，我将非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:32:03.553

进程是一个正在执行的程序，程序员的工作是决定该进程中的线程数以及如何调度它们。这取决于他希望程序运行的顺序。所以只要进程处于运行状态，它将运行计划由程序员运行的线程。即使在线程同时运行的情况下，程序员也可以决定哪些线程可以并发运行，哪些不能。我希望这可以消除您的疑问。

# php - 指向支持 JBoss、Apache 和 Mysql 的云服务的指针

> ID：10093903
> 
> 赞同：2
> 
> 时间：2012-04-10T17:56:00.560
> 
> 标签：php, mysql, apache, jboss, cloud-hosting

嗨，我需要一些支持 jboss、apache 和 mysql 的云服务的建议/指针。我还需要安装 php 模块。我正在开发一个在后端使用 PHP、Java (Java EE) 和 mysql 的应用程序。

我知道我可以在 Amazon EC2 上做到这一点，但一直在寻找更便宜的选择。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T11:20:56.180

查看 Cloudify - [http://www.cloudifysource.org](http://www.cloudifysource.org)

它是一个开源平台即服务，支持多个云供应商，包括 EC2、Azure、Openstack（包括 HP 和 Rackspace）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:48:26.743

你看过 Openshift 吗？

Openshift 承诺开放选择，这意味着您可以向其部署 Java、PHP、Ruby 应用程序。它支持的平台似乎在不断增长。他们最近也增加了对 MongoDB 的支持。

```
openshift.redhat.com 
```

Openshift 和免费啤酒一样是免费的。

一些有用的参考资料

```
[1] http://www.schabell.org/p/free-linux-courses.html
[2] https://openshift.redhat.com/app/getting_started
[3] https://www.redhat.com/openshift/community/videos 
```

# javascript - 在回调中重用变量/对象

> ID：10093905
> 
> 赞同：0
> 
> 时间：2012-04-10T17:56:16.557
> 
> 标签：javascript, node.js, callback

我想知道，在下面的示例中，处理重用我的`helpers`对象的最佳方法是什么？

```
var test = {
  Projects: 'an object goes here',
  helpers: require('../helpers'),

  test: function(req, res) {
    if (this.helpers.is_post(req)) {
      // tried this
      var test = this.helpers;

      this.Projects.byCode(req.params.project_code, function(project) {
        if (!project) {
          this.helpers.flash(req, 'error', 'Unable to find project.');
          // tried this
          helpers.flash(req, 'error', 'Unable to find project.');
          res.redirect('/projects');
        }
      });
    }
  }
}; 
```

我知道我不能在回调中重用变量、对象等，因为它们不是在同一运行时执行的，但是仍然必须有某种更好/更清晰的方法来做这样的事情吗？

即使我尝试将 this.helpers 重新分配给另一个变量，它也会给我错误说它是未定义的。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T17:59:16.350

为什么你认为你不能在回调中重用变量？它们不仅在同一个运行时执行，而且在同一个线程中执行！这就是 JavaScript 的美妙之处。

相反，您的问题很可能是对它的滥用。例如，如果没有分配 to ，它肯定不会工作`var test = this.helpers`。如果你像这样调用方法，即使这样也行不通：

```
var testIt = test.test;
testIt(req, res); 
```

请尝试以下方法：

```
var helpers = require('../helpers');

var test = {
  Projects: 'an object goes here',

  test: function(req, res) {
    if (helpers.is_post(req)) {
      this.Projects.byCode(req.params.project_code, function(project) {
        if (!project) {
          helpers.flash(req, 'error', 'Unable to find project.');
          res.redirect('/projects');
        }
      });
    }
  }
}; 
```

无论如何，将整个模块作为对象的属性是非常荒谬的。

# c - C中的信号处理 - 中断中的中断

> ID：10093907
> 
> 赞同：5
> 
> 时间：2012-04-10T17:56:21.893
> 
> 标签：c, signals

我想知道当我的程序同时处理其他信号时是否有可能被信号中断，我尝试用以下方法模拟它：

```
#include<signal.h>
#include<stdlib.h>
#include<stdio.h>
#include<unistd.h>
#include<sys/wait.h>
#include<string.h>

void sig_output()
{
    sigset_t set;
    sigprocmask(0,NULL,&set);
    printf("currently blocking:");
    if (sigismember(&set,SIGUSR1))
        printf("\nSIGUSR1");
    if(sigismember(&set,SIGUSR2))
        printf("\nSIGUSR2");
    printf("\n");
    return ;
}

void sig_handler(int sig)
{
    raise(SIGUSR1);    
    printf("start\n");
    if (sig==SIGUSR1)
        printf("SIGUSR1\n");
    else if (sig==SIGUSR2)
        printf("SIGUSR2\n");
    printf("end\n");
    return ;
}

void other_sig_handler(int sig)
{  
    printf("start - other\n");
    if (sig==SIGUSR1)
        printf("SIGUSR1\n");
    else if (sig==SIGUSR2)
        printf("SIGUSR2\n");
    printf("end - other\n");
    return ;
}

int main()
{
    sig_output();
    struct sigaction a;
    a.sa_handler=sig_handler;
    a.sa_flags=0;
    sigset_t set,old;
    //blocking SIGUSR1,SIGUSR2
    sigemptyset(&set);
    sigaddset(&set,SIGUSR1);
    sigaddset(&set,SIGUSR2);
    printf("blocking SIGUSR1, SIGUSR2\n");
    sigprocmask(SIG_SETMASK,&set,&old);
    sig_output();
    //adding handles for SIGUSR1,SIGUSR2
    sigemptyset(&(a.sa_mask));
    sigaction(SIGUSR1,&a,NULL);
    a.sa_handler=other_sig_handler;
    sigaction(SIGUSR2,&a,NULL);
    printf("poczatek wysylania \n");
    raise(SIGUSR1);
    raise(SIGUSR2);
    raise(SIGUSR1);
    printf("using sigsuspend\n");
    sigsuspend(&old);
    printf("end of program\n");
    return 0;
} 
```

每次我运行这个程序时，我都会得到

```
currently blocking:
blocking SIGUSR1, SIGUSR2
currently blocking:
SIGUSR1
SIGUSR2
raising
using sigsuspend
start - other
SIGUSR2
end - other
start
SIGUSR1
end
end of program 
```

总是这样吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T18:18:44.983

据我所知，这些特定未决信号的传递顺序尚未定义。但是，信号（大多数情况下；*有*一个例外`SIGCLD`，传统上是通过“作弊”来完成的）“非排队”，实时信号除外。非排队方面意味着如果您将信号 X 阻塞，然后`raise`它两次（如您在上面对 执行的操作`SIGUSR1`），您只会将其发送一次。

在至少一个系统 (MacOS) 上记录的唯一顺序是：

```
If multiple signals are ready to be delivered at the same time, any signals that
could be caused by traps are delivered first. 
```

`SIGSEGV`（这些是和之类的东西`SIGBUS`。）通常，您可以通过使用信号阻塞掩码来控制传递顺序：在某个点取消阻塞任何特定信号，并且那些是可以在该点传递的信号。

如果您不设置`SA_NODEFER`，则处理程序入口处的阻塞掩码将始终阻止您的处理程序正在处理的任何信号，这样您就不必担心递归。

的特殊情况`SIGCLD`来自 System V，它最初通过`SIG_DFL`在每次`SIGCLD`交付时重置处理程序来实现这一点。（事实上​​，SysV 对所有信号都这样做了，`SA_RESETHAND`不管你是否想要它都有效地实现了它。）默认操作是丢弃信号，就好像处理程序是`SIG_IGN`. 当多个子进程在处理程序执行其操作之前完成时，这当然会产生竞争条件。但是，SysV 人员没有使用阻塞/解除阻塞模型，而是进行了修改：在`SIGCLD`处理程序结束时，您会调用`signal(SIGCLD, handler);`以修复处理程序。那时，如果有任何已退出的子节点尚未被`wait`-ed 处理，SysV 将立即生成一个*新的* `SIGCLD`，并且您的处理程序将被递归输入。这使得信号看起来像是在排队，但实际上没有排队。

有关 Linux 信号的更多信息，请参阅（例如）[http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-10T18:07:52.197

引用手册`sigaction(2)`页：

> 信号例程通常会在导致其调用被阻塞的信号的情况下执行，但可能还会出现其他信号。全局信号掩码定义了当前阻止传递给进程的一组信号。进程的信号掩码从其父进程的信号掩码（通常为空）初始化。它可以通过`sigprocmask(2)`调用或在将信号传递给进程时进行更改。

`SA_NODEFER`您可以使用标志控制信号是否在其信号处理程序中自动阻塞。

# sql - 在 SQL Server 中选择 DISTINCT TOP 5

> ID：10093912
> 
> 赞同：3
> 
> 时间：2012-04-10T17:56:32.227
> 
> 标签：sql, sql-server-2008

我无法正确获取此 sql 查询...

我想要前 5 条最新评论`tblComment`。问题是我得到的评论不止一个`ProductID`。我不想要那个。

```
SELECT DISTINCT TOP 5
   tblProduct.ProductID, 
   tblProduct.ProductName, 
   tblComment.DateAdded
FROM   
    tblComment 
INNER JOIN 
    tblProduct ON tblProduct.ProductID = tblComment.ProductID
ORDER BY 
    tblComment.DateAdded DESC 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T18:06:08.517

假设您的评论表有一个 id 字段试试这个：

```
SELECT TOP 5

tblProduct.ProductID, 
tblProduct.ProductName, 
tblComment.DateAdded

FROM   tblComment 
JOIN   tblProduct ON tblProduct.ProductID = tblComment.ProductID
JOIN   (Select ProductID, max(id) as maxid From tblComment Group By ProductId) t on tblComment.id = t.maxid 

ORDER BY tblComment.DateAdded DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:05:20.017

您必须进行子选择 - 使用以下示例来满足您的需要。

```
SELECT TOP 5 tblProduct.ProductID, 
          tblProduct.ProductName, 
          tblComment.DateAdded
FROM   tblComment INNER JOIN
    tblProduct ON tblProduct.ProductID = tblComment.ProductID
    and tblProduct.ProductID 
      IN (
            SELECT tblProduct.ProductID 
            FROM tblComment 
                   INNER JOIN tblProduct ON tblProduct.ProductID = tblComment.ProductID
            GROUP BY tblProduct.ProductID 
            HAVING count( tblProduct.ProductID  ) =1
         ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T19:30:37.693

产品按最新评论时间排序。

这种方法使用 CTE 和 rank 函数。这个查询很小，但在更大的查询中，这些函数可以使事情更有条理和可读性。

```
with lastComment as (
  select c.productID, max(DateAdded) DateAdded, 
    row_number() over(order by max(dateAdded)) rank
  from tblComment c
  group by c.productID

)

SELECT
   tblProduct.ProductID, 
   tblProduct.ProductName, 
   tblComment.DateAdded
FROM   
    tblProduct 
    join lastComment ON tblProduct.ProductID = lastCommnet.ProductID
WHERE
   lastComment.rank >= 5
ORDER BY lastComment.rank 
```

# c# - DirectoryCatalog 和 AssemblyCatalog 之间的区别

> ID：10093914
> 
> 赞同：4
> 
> 时间：2012-04-10T17:56:37.267
> 
> 标签：c#, wcf, mef

我有一个 MEF 应用程序，在不同的 dll 中有相当多的组件。当程序启动时，我创建了一个 AggregateCatalog，然后将所有程序集加载到其中。由于组件数量众多，这可能需要一些时间并导致应用程序加载延迟。我想将一些组件加载延迟到以后，但我遇到了问题。当我使用加载组件时

```
this.AggregateCatalog.Catalogs.Add(new DirectoryCatalog(".")); 
```

我在目录中获得了大约 125 个组件，一切运行良好。当我使用 AssemblyCatalog 单独加载每个 dll 和 exe 时，我只得到大约 77 个组件，并且由于缺少组件，应用程序无法运行。我什至创建了一个目录列表并循环访问它，这样我就不会错过任何文件并得出相同的结果。我的问题是，DirectoryCatalog 还能做什么来让一切正常工作，我如何在不一次将所有内容加载到目录中的情况下模拟它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T20:42:33.543

**AssemblyCatalog 和 DirectoryCatalog 之间的区别**

我已经从 CodePlex ([链接](http://mef.codeplex.com/ "关联")) 下载了 MEF 源代码。通过查看 DirectoryCatalog.cs，它创建了一个字典 Dictionary < string, AssemblyCatalog >() of AssemblyCatalogs，它对应于它找到的每个程序集。

```
 this._assemblyCatalogs = new Dictionary<string, AssemblyCatalog>();
    this._catalogCollection = new ComposablePartCatalogCollection(null, null, null);

    this._loadedFiles = GetFiles().ToReadOnlyCollection();

    foreach (string file in this._loadedFiles)
    {
        AssemblyCatalog assemblyCatalog = null;
        assemblyCatalog = CreateAssemblyCatalogGuarded(file);

        if (assemblyCatalog != null)
        {
            this._assemblyCatalogs.Add(file, assemblyCatalog);
            this._catalogCollection.Add(assemblyCatalog);
        }
    } 
```

正如您在此处看到的，它使用 GetFiles() 从指定目录获取所有程序集（如果未定义可选搜索模式，则获取所有文件）。然后它为每个这些程序集创建一个新的程序集目录。

CreateAssemblyCatalogGuarded 为异常添加保护。

据我所知，使用 DirectoryCatalog（这将是我的首选方式）和使用单独的 AssemblyCatalog 加载所述目录中的所有程序集之间应该没有任何区别，因为这正是 DirectoryCatalog 无论如何.

您的代码中是否有可能为每个 Assembly 创建一个新的 AssemblyCatalog 错误？

我还查看了AssemblyCatalog，它只加载一个Assembly，然后获取它的所有类型。

**性能问题**

> 我想将一些组件加载延迟到以后

如果您的速度问题只是通过创建目录而发生，那么以下内容将无济于事。否则，如果您在编写零件时出现性能问题，请使用[MEF Lazy Imports/Exports](http://mef.codeplex.com/wikipage?title=Lazy%20Exports&referringTitle=Guide)（[另一个链接](http://www.csharpit.com/?p=39 "另一个链接")），而不是使用 AssemblyCatalogs。当 MEF 正常组合部件时，它会创建所有 Imports 和所有子导入的实例。如果您将它们定义为 Lazy MEF，则在需要它们之前不会创建这些类型/部分的实例（这样可以节省时间）。

# objective-c - 将敏感数据临时存储在 iVar 中是否会构成安全威胁？

> ID：10093916
> 
> 赞同：1
> 
> 时间：2012-04-10T17:56:53.447
> 
> 标签：objective-c, ios, security

我的程序让用户创建一个密码，用于访问程序的数据。在创建过程中，程序流程如下：

1.  要求用户输入密码
2.  要求用户重新输入密码
3.  如果密码匹配继续，则转到步骤 1 并重新开始该过程

为了比较两个输入的密码，我将密码临时存储到一个实例变量中。这可能是一个潜在的安全漏洞吗？如果是这样，为什么这是一个问题，您的解决方案是什么？也许存储它的散列版本？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:14:26.557

我认为你可以接近（将密码存储在 iVar 中）。

也许您需要为自己定义“安全漏洞”。当然，攻击者有可能从被盗的 iPhone 中读取存储的内存并重建密码。但这些数据是否合理？

您可以通过用空字节（与输入的密码长度相同）覆盖内存、删除明文密码内存中的所有引用并只保留输入密码的 SHA256 来改进您的安全概念。还要确保在收到 UIApplicationDidEnterBackgroundNotification 时进行空字节覆盖和删除。

但我认为这样做不值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:12:03.623

将该密码暂时存储在 iVar 中没有任何问题。

# homebrew - 忽略 brew 升级的公式

> ID：10093918
> 
> 赞同：85
> 
> 时间：2012-04-10T17:56:57.673
> 
> 标签：homebrew

我想做一个`brew upgrade`并告诉自制软件不要升级`erlang`公式，因为最新的公式在我的系统上不起作用。

有可能做类似的事情`homebrew upgrade --skip erlang`吗？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2014-02-04T18:41:33.677

我终于找到了答案：因为 commit [85eb73ce](https://github.com/Homebrew/homebrew/commit/85eb73ced7316171a3e5087e601f3c182b8859ed)有一个`pin`可用的子命令。所以忽略一个公式`brew upgrade`就像通过固定它一样简单`brew pin <formula>`。要取消固定它，只需调用`brew unpin <formula>`.

值得注意的是，`brew upgrade <formula>`无论是否固定，它仍然会更新公式。

***警告：**此答案对于最新版本的 Homebrew 不再有效，因为`brew pin`已被删除。*

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2018-02-26T19:12:58.050

冲泡针是要走的路。它将公式固定到当前版本

`brew pin <formula>`

brew unpin 可用于重置此

`brew unpin <formula>`

查看所有*固定*公式

`brew list --pinned`

**注意：** `brew upgrade`不会升级固定公式。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-16T12:21:36.453

您可以将 erlang 升级到最新版本，但通过 brew 命令`versions`和`switch`.

要列出可用版本，请使用：

```
brew versions erlang 
```

要在两个已安装的版本之间切换（我假设您想要 erlang R14）：

```
brew switch erlang R14B04 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T13:37:06.117

我有一个类似的“问题”。我直接在我的系统上安装了 libfreenect（不稳定）。现在我不想让自制软件升级它。我通过删除以下文件解决了这个问题：

`/usr/local/Library/Formula/libfreenect.rb`

类似的，`/usr/local/Library/Formula/erlang.rb`对你来说

# php - 使用 fopen 写入文本时换行

> ID：10093919
> 
> 赞同：0
> 
> 时间：2012-04-10T17:56:58.967
> 
> 标签：php, file-io, fopen

简单的问题。我正在将条目附加到文本文件中，并且我希望将每个新条目都放在下一行。就目前而言，后续条目在最后一个之后打印。我要输入什么才能将每个条目写在新行上？使用 Windows。

```
$fh = fopen($dir . '/' . "Cause.txt", 'a') or die("can't open file");
fwrite($fh, $affiliation . "\n");
fclose($fh); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:58:57.677

他们已经是了。使用比记事本更好的文本编辑器来查看文件，或者打印出来`"\r\n"`。

# ajax - Extjs - 使用 model.save 方法发送额外参数

> ID：10093922
> 
> 赞同：0
> 
> 时间：2012-04-10T17:57:20.713
> 
> 标签：ajax, extjs, model, extjs4

我想知道是否有任何方法可以将对象数组作为 model.save 方法的额外参数传递？对于简单类型的参数似乎有效。

```
Ext.define('RightGridModel', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'id',  type: 'int'},
        {name: 'rightText',   type: 'string'},
        {name: 'digit',type:'int'}
    ]
});
 var mod = Ext.create('RightGridModel');
                            mod.set('rightText', 'some text');
mod.save({
                                url: "Home/Insert",
                                params: {
                                    par: 'additional parameter'
                                }
                            }); 
```

但是，如果我想发送和数组作为额外的参数，（当然我将服务器端函数更改为适当的）par 变量是一个空列表。这是我用来发送模型和数组的代码

```
 mod.save({
                                url: "Home/Insert",
                                params: {
                                    par: Ext.encode(array)
                                }
                            }); 
```

有没有办法将模型和数组作为额外参数发送？实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:37:31.547

查看`getParams`Proxy 类的功能。您可以将现有的代理类子类化为您自己的，并在与后端通信时使用它。

# android - 没有看到 Android Javamail 库？

> ID：10093929
> 
> 赞同：0
> 
> 时间：2012-04-10T17:58:00.037
> 
> 标签：android, jakarta-mail

我正在关注这个例子：

[在不使用默认/内置应用程序的情况下使用 JavaMail API 在 Android 中发送电子邮件](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-android-a/2033124#2033124)

但它不起作用，当它进入 GMailSender 类时它会中断但我相信我已经确定问题出在哪里，由于某种原因，android 无法看到 Javamail 库。

我不确定为什么我通过“构建路径 - > 添加外部档案”通过我的项目添加了库。我是否应该将它们添加到其他地方或以不同的方式添加，以便我的 android 能够“看到”javamail 库？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:00:49.560

确保在 Properties --> Java Build Path --> Order and Export 中检查了您的 jar 文件。

# sql-server - SQL Server，将一个对象ID与映射表中的其他对象ID匹配

> ID：10093930
> 
> 赞同：1
> 
> 时间：2012-04-10T17:58:04.647
> 
> 标签：sql-server, tsql

我完全被我用 T-SQL 编写的查询所困扰。我有一个映射表，其中书籍 ID 存储在`BookId`列中并`AttributeId`存储在另一列中。

```
CREATE TABLE BookMap (
BookId int not null,
AttributeId int not null
) 
```

每本书可以有 1 到 10 个属性。如果书 1 具有属性 3-6，我想查找也具有属性 3-6 的书。出于某种原因，我想不出如何编写此查询。

有什么建议么？

这是编辑：为了进一步解释，我有这些数据：

```
INSERT INTO BookMap (BookId, AttributeId) VALUES (1, 3);
INSERT INTO BookMap (BookId, AttributeId) VALUES (1, 6);
INSERT INTO BookMap (BookId, AttributeId) VALUES (2, 3);
INSERT INTO BookMap (BookId, AttributeId) VALUES (2, 4);
INSERT INTO BookMap (BookId, AttributeId) VALUES (2, 6);
INSERT INTO BookMap (BookId, AttributeId) VALUES (5, 3);
INSERT INTO BookMap (BookId, AttributeId) VALUES (5, 6);
INSERT INTO BookMap (BookId, AttributeId) VALUES (6, 3);
INSERT INTO BookMap (BookId, AttributeId) VALUES (6, 5); 
```

我想根据 BookId = 1 进行查询并返回恰好具有 3 和 6 的 BookId，但不会或多或少。另一种方法是返回 BookId 的列表和百分比匹配，按百分比降序排序。要么适用于我的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:43:33.947

我在这里测试了我的答案：[http](http://www.sqlfiddle.com/#!3/a9eec/4) ://www.sqlfiddle.com/#!3/a9eec/ 4（以及在我的本地服务器上）

```
;WITH AttributeSet AS
(
  SELECT DISTINCT
    B.BookId
    , SUBSTRING((SELECT 
                    (',' + CAST(A.AttributeId AS VARCHAR(4)))
                FROM BookMap A
                WHERE A.BookId = B.BookId
                ORDER BY A.AttributeId
                FOR XML PATH ('')),2,9999) AS AttributeSet
  FROM BookMap B
)
SELECT
    MatchingBooks.BookId
FROM AttributeSet BaseBook
INNER JOIN AttributeSet MatchingBooks
    ON MatchingBooks.AttributeSet = BaseBook.AttributeSet
WHERE BaseBook.BookId = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:07:08.783

```
SELECT b.bookID
FROM BookMaP A
INNER JOIN BookMap B
   ON a.attributeID = B.AttributeID
WHERE a.BookID = 1 -- The id you want to compare against
GROUP BY b.bookID
HAVING COUNT(DISTINCT b.AttributeID) = COUNT(DISTINCT a.AttributeID) 
```

我认为聚合和自我`JOIN`是要走的路。这可能需要调整，您可能只需要在`HAVING`子句中指定计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T22:43:52.783

**编辑：**以下是产生所需结果的几个查询。根据索引，统计信息，它们可能具有相当不同的性能......。用真实数据检查执行计划应该是有启发性的。

```
-- Sample data.
declare @BookMap as Table ( BookId int not null, AttributeId int not null ) 
insert into @BookMap ( BookId, AttributeId ) values 
  (1, 3), (1, 6), 
  (2, 3), (2, 4), (2, 6), 
  (5, 3), (5, 6), 
  (6, 3), (6, 5)
select * from @BookMap 

-- Target book.
declare @BookId as Int = 1 
select AttributeId 
  from @BookMap 
  where BookId = @BookId 

-- Books with matching attributes using NOT EXISTS in the last line. 
select BookId 
  from ( 
    select BookId, Sum( 1 ) as MatchCount 
      from @BookMap as BM 
      where BookId <> @BookId and AttributeId in ( select AttributeId from @BookMap where BookId = @BookId ) 
      group by BookId ) as Ellen 
    where 
      -- The number of matching attributes is the number of desired attributes. 
      MatchCount = ( select Count( 42 ) from @BookMap where BookId = @BookId ) and 
      -- There are no other attributes as determined by looking for additional attributes. 
      not exists ( select 42 from @BookMap where BookId = Ellen.BookId and AttributeId not in ( select AttributeId from @BookMap where BookId = @BookId ) ) 

-- Books with matching attributes using COUNT() in the last line. 
select BookId 
  from ( 
    select BookId, Sum( 1 ) as MatchCount 
      from @BookMap as BM 
      where BookId <> @BookId and AttributeId in ( select AttributeId from @BookMap where BookId = @BookId ) 
      group by BookId ) as Ellen 
    where 
      -- The number of matching attributes is the number of desired attributes. 
      MatchCount = ( select Count( 42 ) from @BookMap where BookId = @BookId ) and 
      -- There are no other attributes as determined by counting attributes. 
      ( select Count( 42 ) from @BookMap where BookId = Ellen.BookId ) = ( select Count( 42 ) from @BookMap where BookId = @BookId ) 

-- Display the attributes that we must, and must not, match.
select distinct AttributeId,
  case when AttributeId in ( select AttributeId from @BookMap where BookId = @BookId ) then 1 else 0 end as MustMatch,
  case when AttributeId not in ( select AttributeId from @BookMap where BookId = @BookId ) then 1 else 0 end as MustNotMatch
  from @BookMap

-- Get the similar books using SUM() in the last line.
; with A as (
  -- All attributes with MustMatch/MustNotMatch flags.
  select distinct AttributeId,
    case when AttributeId in ( select AttributeId from @BookMap where BookId = @BookId ) then 1 else 0 end as MustMatch,
    case when AttributeId not in ( select AttributeId from @BookMap where BookId = @BookId ) then 1 else 0 end as MustNotMatch
    from @BookMap
  )
select BookId
  from @BookMap as B inner join
    A as A on A.AttributeId = B.AttributeId
  where BookId <> @BookId
  group by BookId
  having Sum( MustNotMatch ) = 0 and Sum( MustMatch ) = ( select Count( 42 ) from @BookMap where BookId = @BookId )

-- Get the similar books using MAX() in the last line.
; with A as (
  -- All attributes with MustMatch/MustNotMatch flags.
  select distinct AttributeId,
    case when AttributeId in ( select AttributeId from @BookMap where BookId = @BookId ) then 1 else 0 end as MustMatch,
    case when AttributeId not in ( select AttributeId from @BookMap where BookId = @BookId ) then 1 else 0 end as MustNotMatch
    from @BookMap
  )
select BookId
  from @BookMap as B inner join
    A as A on A.AttributeId = B.AttributeId
  where BookId <> @BookId
  group by BookId
  having Max( MustNotMatch ) = 0 and Sum( MustMatch ) = ( select Count( 42 ) from @BookMap where BookId = @BookId )

-- Get the similar books without using SUM() and with extra credit for using a Cartesian product.
--   Using MAX() in the last line.
; with A as (
  -- All attributes with MustMatch/MustNotMatch flags.
  select distinct AttributeId,
    case when AttributeId in ( select AttributeId from @BookMap where BookId = @BookId ) then 1 else 0 end as MustMatch
    from @BookMap
  ),
B as (
  -- All books except the search pattern book.
  select distinct BookId
    from @BookMap
    where BookId <> @BookId ),
P as (
  -- Cross product plus original data and coefficient of wickedness.
  select B.BookId, A.AttributeId, A.MustMatch,
    case
      when MustMatch = 1 and T.AttributeId is not NULL then 0
      when MustMatch = 0 and T.AttributeId is NULL then 0
      else 1
      end as Wicked
    from B cross join
      A left outer join
      @BookMap as T on T.BookId = B.BookId and T.AttributeId = A.AttributeId
  )
select BookId
  from B
  where ( select Max( Wicked ) from P where P.BookId = B.BookId ) = 0

-- Get the similar books without using SUM() and with extra credit for using a Cartesian product.
--   Using NOT EXISTS in the last line.
; with A as (
  -- All attributes with MustMatch/MustNotMatch flags.
  select distinct AttributeId,
    case when AttributeId in ( select AttributeId from @BookMap where BookId = @BookId ) then 1 else 0 end as MustMatch
    from @BookMap
  ),
B as (
  -- All books except the search pattern book.
  select distinct BookId
    from @BookMap
    where BookId <> @BookId ),
P as (
  -- Cross product plus original data and coefficient of wickedness.
  select B.BookId, A.AttributeId, A.MustMatch,
    case
      when MustMatch = 1 and T.AttributeId is not NULL then 0
      when MustMatch = 0 and T.AttributeId is NULL then 0
      else 1
      end as Wicked
    from B cross join
      A left outer join
      @BookMap as T on T.BookId = B.BookId and T.AttributeId = A.AttributeId
  )
select BookId
  from B
  where not exists ( select 42 from P where P.BookId = B.BookId and Wicked = 1 ) 
```

至少我在一个有点乏味的营销演示中充分利用了我的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T18:03:58.613

要获取具有匹配属性的书单：

```
select distinct B1.BookId, B1.AttributeId, B2.BookId as MatchingBookId 
from BookMap as B1
   inner join BookMap as B2 on B1.AttributeId = B2.AttributeId
where B1.BookId <> B2.BookId 
```

要获得匹配的书单：

```
select distinct B1.BookId, B2.BookId as MatchingBookId
from BookMap as B1
   inner join BookMap as B2 on B1.AttributeId = B2.AttributeId
where B1.BookId <> B2.BookId 
```

..要求在评论中澄清。

# php - 什么 PHP IDE 在文件语法荧光笔之外有什么？

> ID：10093935
> 
> 赞同：1
> 
> 时间：2012-04-10T17:58:24.217
> 
> 标签：php, drupal, ide, joomla, content-management-system

我不是在寻找关于最佳的辩论，我只是想知道 PHP IDE 有哪些功能可以突出显示**已查看页面之外的**类、函数和任何其他关系，以节省滚动浏览代码页面的时间。我将访问类似 MVC 的框架，并希望它扩展我现有的页面，从而覆盖实际项目。

我有一些我正在玩的 IDE，但还没有找到可以扩展到完整项目的东西，以及我想要的。或者，也许我还没有充分发挥它们的潜力。任何想法或想法将不胜感激。我最近也在寻找 IDE 来帮助 CMS 项目，但这是另一回事，可能会引起争论。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T18:00:18.953

我们使用[PHP Storm 3](http://www.jetbrains.com/phpstorm/)。

但是还有其他一些 IDE，例如[Aptana](http://aptana.com/)或[PDT](http://www.eclipse.org/projects/project.php?id=tools.pdt)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T18:10:21.407

再次投票给 PHPStorm。

但是由于 PHP 的动态特性，无论您选择哪种 IDE，在很多情况下，如果没有明确的帮助，IDE 都无法弄清楚发生了什么。

例如，如果您的代码看起来像`AbstractService::getInstance($service_class_name)`，则 IDE 无法知道返回对象的实际类型，除非您使用 PHPDoc 对其进行注释，*或者*它专门实现了对此类模式的支持。以我的经验，大多数 PHP 框架都大量使用这样的字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T18:04:18.673

我们使用 Eclipse Classic [http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)和 PDT 扩展[http://www.eclipse.org/projects/project.php?id=tools.pdt](http://www.eclipse.org/projects/project.php?id=tools.pdt)，你可以添加任何你需要的东西，如SVN、CVS、网络工具（javascript、HTML、CSS……）

您可以从 Eclipse 中的“软件安装”中安装 PDT 和其他任何东西。

# java - 如何在我的框架中调整按钮的大小

> ID：10093936
> 
> 赞同：0
> 
> 时间：2012-04-10T17:58:26.787
> 
> 标签：java, swing, jframe, jbutton, layout-manager

我在南边添加了两个按钮，但第二个按钮覆盖了第一个按钮。我怎样才能以某种方式调整按钮的大小，使它们彼此相邻。下面是代码：

```
 Panel p = new Panel();

 p.setLayout(new BorderLayout());
 p.add(new Button("Throw Stick"), BorderLayout.SOUTH);//button 1 (B'1)
 p.add(new Button("Stick Draw"), BorderLayout.SOUTH); //This button is overlaying B'1.
 p.add(new Label("Player 1"), BorderLayout.EAST);
 p.add(new Label("Player 2"), BorderLayout.WEST);

 frame.add(p); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T18:07:22.250

[`BorderLayout`爪哇文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/BorderLayout.html)：

> 每个区域可能包含不超过一个组件。

换句话说：您需要将两个`Button`s 合二为一`Component`（例如 a `Panel`）。

# django - Django如何处理子表中的外键

> ID：10093943
> 
> 赞同：0
> 
> 时间：2012-04-10T17:58:42.327
> 
> 标签：django, model, foreign-keys

我是 DJango 的新手。我有一个包含三个表的数据库：

```
> -CRP
>  - SubComponents of a CRP
>     - Objectives of a SubComponent of a CRP. 
```

我有以下型号：

```
class period(models.Model):
    period_code = models.IntegerField(primary_key=True,verbose_name='Period code')
    period_desc = models.CharField(max_length=45,verbose_name='Period description')
    period_current = models.IntegerField(verbose_name='Current period')
    def __unicode__(self):
        return self.period_desc
    class Meta:
        db_table = 'period'

class crp(models.Model):
    crp_code = models.CharField(max_length=3,primary_key=True,verbose_name='CRP code')
    crp_desc = models.CharField(max_length=45,verbose_name='CRP description')
    def __unicode__(self):
        return self.crp_desc
    class Meta:
        db_table = 'crp'

class subcomponent(models.Model):
    crp_code = models.ForeignKey(crp,db_column='crp_code',related_name='subcomponent_crp_code',to_field='crp_code',primary_key=True,verbose_name='CRP code')
    subc_code = models.CharField(max_length=3,primary_key=True,verbose_name='SubComponent Code')
    subc_desc = models.CharField(max_length=45,verbose_name='SubComponent Description')
    def __unicode__(self):
        return self.subc_desc
    class Meta:
        db_table = 'subcomponent'

class objective(models.Model):
    crp_code = models.ForeignKey(subcomponent,db_column='crp_code',related_name='objective_crp_code',to_field='crp_code',primary_key=True,verbose_name='CRP code')
    subc_code = models.ForeignKey(subcomponent,db_column='subc_code',related_name='objective_subc_code',to_field='subc_code',primary_key=True,verbose_name='SubComponent Code')
    obj_year = models.ForeignKey(period,db_column='obj_year',related_name='objective_obj_year',to_field='period_code',primary_key=True,verbose_name='Objective year')
    obj_code = models.CharField(max_length=7,primary_key=True,verbose_name='Objective code')
    obj_desc = models.CharField(max_length=45,verbose_name='Objective description')
    def __unicode__(self):
        return self.obj_desc
    class Meta:
        db_table = 'objective' 
```

“子组件”模型一切正常（参考 CRP）；在“子组件”的管理中，用户可以拉下 CRP 并向其添加子组件。

但是，模型“目标”引用模型“子组件”。在“目标”的管理中，我希望用户下拉并选择一个 CRP，然后在下拉列表中过滤该 CRP 的子组件。我怎样才能做到这一点？

非常感谢，卡洛斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T03:13:47.700

看看[django-smart-selects](https://github.com/digi604/django-smart-selects)

# asp.net - 无法继续运行总计 - ASP.NET / VB

> ID：10093949
> 
> 赞同：0
> 
> 时间：2012-04-10T17:59:22.227
> 
> 标签：asp.net, vb.net, cumulative-sum

我的任务是创建一个人们可以用来预订晚餐的网站。我们正在为表单使用 Visual Basic 代码。它应该保持运行每种晚餐的总数。我无法让运行总计不重置为零。我让它们在按钮单击事件之外声明。不知道我哪里出错了。这是代码：

```
Option Strict On

Partial Class _Default
Inherits System.Web.UI.Page

Private Chicken_RT As Integer
Private Rib_RT As Integer
Private Veg_RT As Integer

Protected Sub SubmitButton_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles SubmitButton.Click
    'Variables
    Dim DinnerPrice As Integer
    Dim RadioSelect As Boolean = True
    Dim Tickets As Integer
    Dim DinnerType As String

    'Parsing
    Tickets = Integer.Parse(TicketTextBox.Text)

    'Validation / Calculations
    If TicketRangeValidator.IsValid And TicketValidator.IsValid Then
        If ChickenRadio.Checked = True Then
            DinnerPrice = Tickets * 15
            Chicken_RT += Tickets
            DinnerType = "Chicken"
        ElseIf RibRadio.Checked = True Then
            DinnerPrice = Tickets * 20
            Rib_RT += Tickets
            DinnerType = "Rib"
        ElseIf VegetarianRadio.Checked = True Then
            DinnerPrice = Tickets * 12
            Veg_RT += Tickets
            DinnerType = "Vegetarian"
        Else
            RadioErrorLabel.Text = ("Please select a dinner type")
            RadioSelect = False
        End If

        'Display results
        If RadioSelect = True Then
            If OpenBarCheckBox.Checked = True Then
                DinnerPrice += Tickets * 15
                OpenBarLabel.Text = "Yes"
            Else
                OpenBarLabel.Text = "No"
            End If

            NumberDinnersLabel.Text = Tickets.ToString()
            DinnerTypeLabel.Text = DinnerType
            TotalCostLabel.Text = DinnerPrice.ToString("C")
            TotalChickenLabel.Text = Chicken_RT.ToString()
            TotalRibLabel.Text = Rib_RT.ToString()
            TotalVegetarianLabel.Text = Veg_RT.ToString()

        End If
    End If

End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T21:18:32.543

> 我在按钮单击事件之外声明了 [运行总计]。

**每次处理事件时，您都在使用页面类的新实例。**

明白这一点，这里发生的一切都应该开始对你有意义。您必须将总数保存在一个跨单个 http 请求的位置，例如视图状态、会话、应用程序缓存、文件系统或数据库中。类中的变量不会在单个 http 请求中持续存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T21:42:18.063

正如 Joel 所说，这些值不会持续存在，因为每个 HTTP 请求都会创建一个新的类实例。在这种情况下，[HiddenField 类](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hiddenfield.aspx)将非常适合您。

首先，**删除**这些代码行：

```
 Private Chicken_RT As Integer
    Private Rib_RT As Integer
    Private Veg_RT As Integer 
```

其次，把它放在你的 .aspx 标记中（嵌套在 Form 标签中）：

```
 <asp:HiddenField id="Chicken_RT" runat="server" value="0"/>
    <asp:HiddenField id="Rib_RT" runat="server" value="0"/>
    <asp:HiddenField id="Veg_RT" runat="server" value="0"/> 
```

最后，

```
Veg_RT += Tickets 
```

变成：

```
Veg_RT.Value = (CInt(Veg_RT.Value) + Tickets).ToString() 
```

（重复所有的运行总数。）

要访问您的总数，您将执行以下操作：

```
Dim intVegTotal As Integer = CInt(Veg_RT.Value) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T18:05:11.810

好吧，我看到你正在阅读`TicketTextBox`，但我没有看到你在任何地方分配它。如果你不分配它，它的价值不总是为零吗？

# c# - 如何在 Expression Blend 4 中编辑 CellTemplate

> ID：10093951
> 
> 赞同：0
> 
> 时间：2012-04-10T17:59:30.187
> 
> 标签：c#, wpf, xaml, wpfdatagrid, expression-blend

关于在 Expression Blend 4 中编辑单元格模板，这是我不明白的一件事：

当我通过 xaml 手动创建单元格模板时，代码如下所示：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:leartWPF" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d"
    x:Class="leartWPF.Window1"
    x:Name="Window"
    Title="Window1"
    Width="640" Height="480">
    <Window.Resources>
        <local:GroupDataSource x:Key="GroupDataSourceDataSource" d:IsDataSource="True"/>

    </Window.Resources>

    <Grid x:Name="LayoutRoot" Margin="0" DataContext="{Binding Source={StaticResource GroupDataSourceDataSource}}">
        <DataGrid  Margin="0" HeadersVisibility="None" ItemsSource="{Binding GroupExtednenDatas, ElementName=Window}" AutoGenerateColumns="False" RowHeight="25" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" CanUserAddRows="False" >
            <DataGrid.Columns>
                <DataGridTemplateColumn Header="Groups" Width="Auto" IsReadOnly="True" >
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                             <TextBlock Text="{Binding Name}" Width="200"></TextBlock>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>     
    </Grid>
</Window> 
```

这会产生一个窗口，看起来或多或少没问题：

![在此处输入图像描述](../Images/4859055e31555f865e755c4242af25f6.png)

当我尝试使用 Expression Blend 的菜单做同样的事情时，

![在此处输入图像描述](../Images/f14ed6c0aefa1e9e95ceb2002839630d.png)

我最终得到以下代码：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:leartWPF" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d"
    x:Class="leartWPF.Window1"
    x:Name="Window"
    Title="Window1"
    Width="640" Height="480">
    <Window.Resources>
        <local:GroupDataSource x:Key="GroupDataSourceDataSource" d:IsDataSource="True"/>
        <DataTemplate x:Key="MyDataTemplate">
            <TextBlock Text="{Binding Name}" Width="200"></TextBlock>
        </DataTemplate>

    </Window.Resources>

    <Grid x:Name="LayoutRoot" Margin="0" DataContext="{Binding Source={StaticResource GroupDataSourceDataSource}}">
        <DataGrid  Margin="0" HeadersVisibility="None" ItemsSource="{Binding GroupExtednenDatas, ElementName=Window}" AutoGenerateColumns="False" RowHeight="25" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" CanUserAddRows="False" >
            <DataGrid.Columns>
                <DataGridTemplateColumn Header="Groups" Width="Auto" IsReadOnly="True" CellTemplate="{DynamicResource MyDataTemplate}" >

                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>     
    </Grid>
</Window> 
```

无论我在里面放什么，它都会显示空单元格

```
<DataTemplate x:Key="MyDataTemplate"> : 
```

![在此处输入图像描述](../Images/cbdfeb1058818abb0d205e943b26d7d7.png)

我做错了什么，还是这个 Expression Blend 错误？如果这是一个错误，我应该如何更改 XAML 代码来修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:17:32.937

如果是这样，我可能完全偏离了基础，很抱歉不理解，但似乎这个问题过于复杂了。CellTemplate 只是任何东西的占位符 - 在数据网格中，默认情况下它是空的，因此您可以将任何您想要的内容放入其中 -> 在您的情况下，它是 TextBlock 的占位符。这就是您需要在 Blend 中编辑的内容，或者您​​在 CellTemplate 中放置的任何其他控件。

# google-maps - 谷歌地图 - 删除地址

> ID：10093954
> 
> 赞同：0
> 
> 时间：2012-04-10T17:59:49.267
> 
> 标签：google-maps

如何从 Google 地图中删除地址？我需要从这张地图中删除一个地址。[http://maps.google.com/maps/ms?ie=UTF8&hl=en&msa=0&msid=113613286687180879498.000483d36f7130c3c3b5b&ll=29.734156,-95.30172&spn=0.003261,0.00456&z=17&source=embed](http://maps.google.com/maps/ms?ie=UTF8&hl=en&msa=0&msid=113613286687180879498.000483d36f7130c3c3b5b&ll=29.734156,-95.30172&spn=0.003261,0.00456&z=17&source=embed)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T23:40:32.393

你可以做两件事：

1.  如果您拥有该企业：创建一个本地商务中心帐户并拥有该商家信息。从那里您可以管理更新。[https://accounts.google.com/ServiceLogin?service=lbc&continue=https://www.google.com/local/add%3Fservice%3Dlbc](https://accounts.google.com/ServiceLogin?service=lbc&continue=https://www.google.com/local/add%3Fservice%3Dlbc)
2.  如果您正在谈论删除 Maps API 实现中的列表，您可以使用 Styled Maps 从地图中删除业务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:03:58.433

这是一个简单的谷歌搜索......下次尝试从那里开始。
[http://www.ehow.com/how_6561194_remove-markers-google-maps.html](http://www.ehow.com/how_6561194_remove-markers-google-maps.html)

# javascript - JavaScript 正则表达式测试字符串是否包含特定单词（带变量）

> ID：10093955
> 
> 赞同：14
> 
> 时间：2012-04-10T17:59:55.270
> 
> 标签：javascript, regex, string-comparison

我有一个正则表达式来检查字符串是否包含特定单词。它按预期工作：

```
/\bword\b/.test('a long text with the desired word amongst others'); // true
/\bamong\b/.test('a long text with the desired word amongst others'); // false 
```

但我需要即将在变量中检查的单词。使用`new RegExp`不正常，它总是返回`false`：

```
var myString = 'a long text with the desired word amongst others';

var myWord = 'word';
new RegExp('\b' + myWord + '\b').test(myString); // false

myWord = "among";
new RegExp('\b' + myWord + '\b').test(myString); // false 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-10T18:02:47.007

```
var myWord = 'word';
new RegExp('\\b' + myWord + '\\b') 
```

`\`从字符串构建正则表达式时，您需要双重转义。

* * *

这是因为`\`在字符串文字中开始了转义序列，因此它永远不会进入正则表达式。通过这样做`\\`，您将`'\'`在字符串中包含一个文字字符，这使得 regex `/\bword\b/`。

# - 文件

> ID：10093961
> 
> 赞同：0
> 
> 时间：2012-04-10T18:00:21.623
> 
> 标签：

QFile 是 Qt Toolkit 中的一个类，它提供了一个用于读取和写入文件的接口。

# concurrency - 为什么在假脱机模拟中为每个处理器使用信号量

> ID：10093962
> 
> 赞同：2
> 
> 时间：2012-04-10T18:00:28.803
> 
> 标签：concurrency, semaphore

我正在开发一个项目，该项目模拟多个处理器处理命令和排队要通过一个假脱机程序打印的字符串。

最多有十个处理器，每个处理器执行一系列具有“计算”和“打印”语句的作业。计算只是一个花费时间来模拟其他工作的数学过程，而 print 将一个短字符串传输到要打印的假脱机程序。有一个后台处理程序，一台打印机连接到后台处理程序。每个处理器将在终止之前处理多个作业，来自特定处理器上的特定作业的所有打印语句应该一起打印（来自单个作业的打印不会交错），并且假脱机程序永远不应该在正在计算的进程上被阻塞。

我通常了解如何使用信号量和互斥体结构对此进行编码，但规范中的声明让我感到困惑：

> 尝试最大化系统的并发性。（您可以考虑使用由处理器 ID 索引的信号量数组。）

为每个单独的进程使用信号量是否有我缺少的特定优势？

如果需要进一步澄清，请告诉我——我试图以简洁的方式描述问题。

编辑：另一个可能重要的部分：每个处理器都有一个缓冲区，可以容纳多达十个字符串以发送到假脱机程序。每个进程的信号量是否可以在缓冲区已满时等待？

编辑 2：作业可以包含多个相互混合的计算和打印语句：
作业 1
计算 4
打印 Foo
计算 2
打印栏
结束作业

作业中的打印语句都应按顺序打印（Foo 和 Bar 应按顺序打印，中间没有来自另一个作业/处理器的打印）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:48:50.727

重要信息在这里：

> （不从单个作业交错打印），

这意味着`new Semaphore(1)`（如果您使用的是 Java）。

和

> 并且假脱机程序永远不应该在正在计算的进程上被阻塞。

如果您有一个接受一方的信号量，则最后一块将不满足。一个正在执行的处理器不必等待另一个处理器完成，它可以并行完成。

您可以通过创建一组条纹信号量来做到这一点。您可以通过处理器 ID 对其进行索引，以便每个线程/处理器可以在没有交错的情况下运行，但无需等待其他处理器完成。

```
Semaphore[] semaphores = new Semaphore[Number_of_proessors];
//initialize all semaphore indexes

semaphores[Process.id].acquire();

//work    

semaphores[Process.id].release(); 
```

# c++ - std::getline 删除空格？

> ID：10093964
> 
> 赞同：4
> 
> 时间：2012-04-10T18:00:31.970
> 
> 标签：c++, whitespace

所以我正在创建一个命令行应用程序，并且我试图允许带有参数的命令，或者如果参数用引号括起来，它将被视为 1 个参数。

示例：测试“1 2”

“test”将是命令，“1 2”将是传递的单个参数。

使用以下代码片段：

```
while(getline(t, param, ' ')) {
    if (param.find("\"") != string::npos) {
        ss += param;
        if (glue) {
            glue = false;
            params.push_back(ss);
            ss = "";
        }
        else {
            glue = true;
        }
    }
    else {
        params.push_back(param);
    }
} 
```

但是 std::getline 似乎会自动删除导致我的参数从“1 2”变为“12”的空格

我环顾四周，但结果充斥着“如何删除空格”的答案，而不是“如何不删除空格”

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T18:04:55.517

> 然而 std::getline 似乎会自动删除空格

这正是您告诉 getline 要做的事情：

```
getline(t, param, ' '); 
```

getline 中的第三个参数是分隔符。如果你想解析输入行，你应该阅读它直到`'\n'`找到然后处理它：

```
while(getline(t, param)) {
    /* .. */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:04:52.043

嗯，您是在告诉它`' '`用作`std::getline`. 当然，它会去除空白。 [http://www.cplusplus.com/reference/string/getline/](http://www.cplusplus.com/reference/string/getline/)

# r - 在因子水平内找到最高值

> ID：10093965
> 
> 赞同：6
> 
> 时间：2012-04-10T18:00:35.583
> 
> 标签：r

如果我有以下数据框：

```
value    factorA    factorB
1           a          e
2           a          f
3           a          g
1           b          k
2           b          l
3           b          m
1           c          e
2           c          g 
```

我怎样才能获得每个因子A的最高值以及与它相关的因子B的条目，即

```
value   factorA factorB

3         a        g
3         b        m
2         c        g 
```

不先使用这可能吗

```
blocks<-split(factorA, list(), drop=TRUE) 
```

然后对每个 block$a 进行排序，因为这将执行多次，并且块的数量总是会改变。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-10T18:35:18.560

这是一种选择，使用基本 R 函数：

```
maxRows <- by(df, df$factorA, function(X) X[which.max(X$value),])
do.call("rbind", maxRows)
#   value factorA factorB
# a     3       a       g
# b     3       b       m
# c     2       c       g 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T19:57:24.280

使用您的数据

```
df<- structure(list(value = c(1L, 2L, 3L, 1L, 2L, 3L, 1L, 2L), factorA = structure(c(1L, 
        1L, 1L, 2L, 2L, 2L, 3L, 3L), .Label = c("a", "b", "c"), class = "factor"), 
            factorB = structure(c(1L, 2L, 3L, 4L, 5L, 6L, 1L, 3L), .Label = c("e", 
            "f", "g", "k", "l", "m"), class = "factor")), .Names = c("value", 
        "factorA", "factorB"), class = "data.frame", row.names = c(NA, 
        -8L)) 
```

使用包`ddply`中的函数`plyr`

```
> df2<-ddply(df,c('factorA'),function(x) x[which(x$value==max(x$value)),])
  value factorA factorB
1     3       a       g
2     3       b       m
3     2       c       g 
```

或者，

```
> rownames(df2) <- df2$factorA
> df2
  value factorA factorB
a     3       a       g
b     3       b       m
c     2       c       g 
```

# java - MySql JDBC 调用存储过程返回太多行

> ID：10093968
> 
> 赞同：2
> 
> 时间：2012-04-10T18:01:07.227
> 
> 标签：java, mysql, stored-procedures

这是 MySQL 中的存储过程：

```
CREATE PROCEDURE topModels(modelCount INT)
BEGIN
  select brand_name as brandName, 
     model_number as modelNumber, 
     model_description as modelDescription,
     parts 
  from 
  (
     select model_number, model_description, parts  
        ,@rownum := if(@brand=t.brand_name, @rownum, 0) + 1 as rownum
        ,@brand := t.brand_name as brand_name
     from
     (
         select brand_name, model_number, model_description, parts, 
         from model f
         group by brand_name, model_number, model_description
         order by brand_name, sum(sold_count) desc
     ) t
 ) tbl 
 where rownum<=5
END 
```

当我打开 MySQL 工作台并执行以下操作时：

```
 CALL topModels(5) 
```

它返回大约 3000 行，这是正确的结果。

当我从 Java 运行它时：

```
 java.sql.CallableStatement cs  = connection.
      prepareCall("CALL topModels(5)");
  java.sql.ResultSet rs = cs.executeQuery(); 
```

它返回大约 400,000 行，就好像它忽略了“where rownum<=5”条件一样。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:48:59.107

我看到你的程序有`modelCount`，但你从不使用它。

IIRC MySQL 没有`rownum`. 改用`LIMIT`：

```
String sql = "SELECT * FROM tbl ... LIMIT " + modelCount. 
```

不幸的是，您不能在`LIMIT`（至少在 5.1 之前）中使用过程参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T20:09:27.790

您可能需要使用 JDBC 调用语法，例如：

`conn.prepareCall("{call topModels(5)}");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T14:28:37.547

看看这个框架（[https://code.google.com/p/lindbergframework/](https://code.google.com/p/lindbergframework/)）。轻松处理存储过程和函数，包括自动处理游标。

[https://code.google.com/p/lindbergframework/](https://code.google.com/p/lindbergframework/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T21:40:59.017

我对 Java JDBC 完全陌生（来自 .NET 阵营）。但是查看 Oracle 文档。我认为您需要分别传入参数：

```
 java.sql.CallableStatement cs  = connection.prepareCall("CALL topModels(?)");
 cs.setInt(1, 5); // <--  I'm assuming you need set the parameter like this
 java.sql.ResultSet rs = cs.executeQuery(); 
```

# javascript - 使用 jQuery 将输入 TITLE 显示为 VALUE（包括 jsfiddle）

> ID：10093972
> 
> 赞同：0
> 
> 时间：2012-04-10T18:01:16.083
> 
> 标签：javascript, jquery, watermark, jsfiddle

我正在尝试提出一个简单的 jquery 输入水印功能。基本上，如果输入字段没有值，则显示它的标题。

我想出了将输入值分配为标题所需的 jquery，但它不会显示在页面上，就好像它是手动编码到表单中的值一样。

当页面加载到输入字段中以供用户查看时，如何获得此值以显示该值？

这是小提琴：http: [//jsfiddle.net/mQ3sX/2/](http://jsfiddle.net/mQ3sX/2/)

```
$(document).ready(function() {

    $(".wmk").each(function(){
      var value = $(this).val();
      var title = $(this).attr("title");

      if (value == '') {
        value = title;
      }

      $(".result").text(value);
      // You can see I can get something else to display the value, but it does 
      // not display in the actual input field.            
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:07:53.060

您是否考虑过使用现成的版本，而不是自己编写？这并不完全符合您的要求，但它们具有您可能喜欢的附加功能（例如，表现得像一个正常的占位符，当您开始键入时会自动隐藏占位符）。

[http://www.hagenburger.net/BLOG/HTML5-Input-Placeholder-Fix-With-jQuery.html](http://www.hagenburger.net/BLOG/HTML5-Input-Placeholder-Fix-With-jQuery.html) http://archive.plugins.jquery.com/project/input-placeholder

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:04:05.990

使用下面的代码行。您需要指定输入元素，并更新其值。由于您的输入字段有一个名为“.wmk”的类，因此我使用以下代码。您可以使用“id”并使用“#”代替“.”。[在http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)阅读有关选择器的更多信息

```
$(".wmk").val(value); 
```

更新了 jsfiddle [http://jsfiddle.net/bhatlx/mQ3sX/9/](http://jsfiddle.net/bhatlx/mQ3sX/9/)

更新：由于您在“.wmk”上使用“每个”，您可以使用

```
 $(this).val(value) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T18:08:02.580

我想你想要的是这样的：

```
$(document).ready(function() {

    $(".wmk").each(function(){
    var value = $(this).val();
    var title = $(this).attr("title");

    if (value == '') {
        $(this).val(title);
    }

    $(".result").text(value);

    });

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T18:10:16.183

可能你想要像下面这样的东西，

[**演示**](http://jsfiddle.net/skram/mQ3sX/11/)

```
$(document).ready(function() {

    $(".wmk").each (function () {
        if (this.value == '') this.value = this.title;
    });

    $(".wmk").focus(
        function () {
            if (this.value == this.title) this.value = '';
        }
    ).blur(
        function () {
            if (this.value == '') this.value = this.title;
        }
    );

}); // end doc ready 
```

# android - 将参数传递给另一个类

> ID：10093973
> 
> 赞同：3
> 
> 时间：2012-04-10T18:01:17.447
> 
> 标签：android, android-activity, parameters, bundle

我有两个类，其中一个我传递给发送两个参数，它们是 1- 文件 URL 2- 文件名，因为我不想为我拥有的每个文件创建这个类

**第一个类从 OnItemClickListener 传递参数**

```
 list.setOnItemClickListener(new ListView.OnItemClickListener() {
         public void onItemClick(AdapterView<?> parent, View view,
                  int position, long id) {
                if (position == 0) {
                    // pass parameters file name & file url

                  } 
```

**第二课**

```
public void onClick(View v) {
            // starting new Async Task
            new DownloadFileFromURL().execute(file_url);
        }
OutputStream output=new FileOutputStream(new File(dir, filename)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:06:28.377

您需要创建一个[Bundle](http://geekswithblogs.net/bosuch/archive/2011/01/17/android---passing-data-between-activities.aspx)并将 URL 和文件名存储在其中。然后你可以在调用新活动的意图中传递这个包。在新类中，您使用`getIntent().getExtras()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T19:51:09.817

您可以从第一类传递文件名和文件URL，如下所示，

```
// pass parameters file name & file url
Intent i = new Intent(FirstClass.this,SecondClass.this);
i.putExtra("FileName",fileName);
i.putExtra("FileURL",fileURL);
startActivity(i); 
```

并从第二个活动中获得如下，

```
Bundle b = getIntent().getExtras();
filename = b.getString("fileName"); 
file_url = b.getString("fileURL"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T18:23:13.020

您可以通过以下代码执行此操作：

**第一个类从 OnItemClickListener 传递参数**

```
 list.setOnItemClickListener(new ListView.OnItemClickListener() {
         public void onItemClick(AdapterView<?> parent, View view,
                  int position, long id) {
                if (position == 0) {
                    // pass parameters file name & file url
                    Intent i = new Intent(FirstClass.this,SecondClass.this);
                    i.putExtra("FileName",fileName);
                    i.putExtra("FileURL",fileURL);
                    startActivity(i);

                  } 
```

**第二课**

```
public void onClick(View v) {
                    filename = getIntent().getStringExtra("fileName"); 
                    file_url = getIntent().getStringExtra("fileURL");
            // starting new Async Task
            new DownloadFileFromURL().execute(file_url);
        }
OutputStream output=new FileOutputStream(new File(dir, filename)); 
```

# android - android - 如何创建 xml 的 id？

> ID：10093975
> 
> 赞同：27
> 
> 时间：2012-04-10T18:01:19.800
> 
> 标签：android, xml, keyboard

我正在使用软键盘示例开发一个动态键盘应用程序。我的应用程序更改布局。例如，我有一个键盘（有一个键），然后我设置了应用程序，我可以使用键盘（有一个键）。

我想在编译后创建一个 XML 文件并在应用程序中使用这个文件（使用 xmlpullparser 或 xmlresourceparser 读取 XML 文件）。但是，键盘类需要 XML 的 id。如何创建 XML id？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-19T11:53:20.783

它可以在您的文件夹中`ids.xml`或任何自定义文件中定义。`constants.xml``res\values`

例子：

```
<resources>
    <item type="id" name="keyboard" />
</resources> 
```

并且可以在代码中访问，如下所示：

```
R.id.keyboard 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-10T18:12:12.857

`ids.xml`您可以使用res/values 目录中的文件定义 id 。这是一个例子：

```
<resources>
    <item type="id" name="my_keyboard" />
</resources> 
```

在代码中，您可以像这样设置 id：

```
keyboardView.setId( R.id.my_keyboard ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T18:05:42.660

XML 文件已编译（二进制 XML），因此您无需在运行时创建它们。

如果您想动态更改键盘布局，您将通过编程而不是 XML 来完成。

# cocoa - 调整窗口大小时按钮未对齐

> ID：10093979
> 
> 赞同：1
> 
> 时间：2012-04-10T18:01:53.137
> 
> 标签：cocoa, interface-builder, xcode4.2

我在 Interface Builder 中设计我的界面（在 Snow Leopard 上使用 Xcode 4.2），并完美地对齐两个元素（两个`NSButton`s，带边框），一个在另一个之下。

问题是，当窗口调整大小时，在某些点上，元素似乎未对齐（大约 1 个像素），而在其他一些点上，它们仍然完美对齐。

* * *

这是我的意思的（放大）示例：

**对齐**

![在此处输入图像描述](../Images/0ec11f1d50bd09ae849870753fde0f00.png)

**错位**

![在此处输入图像描述](../Images/30aa2d9e15973dddf5f8bdaf994b7d43.png)

* * *

这是我的调整大小设置（用于上部`NSButton`）：

![在此处输入图像描述](../Images/2791d2b31be0fbc8c5c272bbfc8a1961.png)

对于容器（我的上层`NSButton`）：

![在此处输入图像描述](../Images/cb6eb82d3780498c63c47f240bd49c67.png)

* * *

我知道我可能对这样一个小问题有点太疯狂了，但我绝对需要解决它。

那么，为什么会这样呢？我应该怎么做才能解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:04:12.843

两个按钮是否在同一个容器中？

它们是否具有相同的大小和对齐设置？

在检查器中自动调整大小的小部件下方，有一组对齐按钮。尝试选择这两个按钮并单击左侧对齐按钮。（看看这是否会使另一侧错位。）下面是放置图标 - 验证两个按钮在那里具有相同的设置。

输入 W 和 H 的值，以便两个按钮完全相同（即使框已经显示相同，请输入以确保）。还要输入 X 和 Y 以使它们相同（垂直偏移除外）。

就个人而言，将中心缩放设置（最后一张图像，双端水平箭头）仅锚定在一侧时似乎很奇怪。这可能会产生奇怪的效果。另一方面，您设置了两个垂直锚点，但没有设置垂直缩放。

如果一切都失败了，您可以尝试（先保存原始版本）删除第二个按钮，复制第一个并将副本放置在其下方。

# ruby - 邮件 gem 判断是纯文本还是 html

> ID：10093981
> 
> 赞同：2
> 
> 时间：2012-04-10T18:01:57.177
> 
> 标签：ruby, ruby-on-rails-3, email, imap

我正在使用来自[https://github.com/mikel/mail](https://github.com/mikel/mail)`mail`的gem

我用它来解析原始邮件数据：例如

```
require 'mail'

maildata = Mail.new(body) #where body is the raw text of an email message

#from there I can see info such as
p maildata.body.decoded #displays the decoded email body
p maildata.from #shows who the email is from 
```

我如何确定电子邮件是否存在`plaintext`或`html`是否有内置方法来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:11:51.957

你可以看看`maildata.content_type`：

```
maildata.content_type
#=> "text/plain; charset=us-ascii" 
```

如果它是多部分电子邮件，您可以同时拥有纯文本和 HTML。然后，您可以查看该`parts`数组以查看它包含哪些内容类型：

```
maildata.content_type
#=> "multipart/alternative; boundary=\"--==_mimepart_4f848491e618f_7e4b6c1f3849940\"; charset=utf-8"

maildata.parts.collect { |part| part.content_type }
#=> ["text/plain; charset=utf-8", "text/html; charset=utf-8"] 
```

# excel - 从电子表格数据创建文件夹层次结构

> ID：10093983
> 
> 赞同：1
> 
> 时间：2012-04-10T18:02:01.980
> 
> 标签：excel, vba, directory, hierarchy

我有几个电子表格，其中的数据从左到右组织，我想从中创建文件夹。每条记录都是完整的，没有空白，除非那是行的末尾，所以我正在拍摄以下内容：

```
Col1     Col2     Col3
------   ------   ------
Car      Toyota   Camry
Car      Toyota   Corolla
Truck    Toyota   Tacoma
Car      Toyota   Yaris
Car      Ford     Focus
Car      Ford     Fusion
Truck    Ford     F150

Car
    Toyota
        Camry
        Corolla
        Yaris
    Ford
        Focus
        Fusion
Truck
    Toyota
        Tacoma
    Ford
        F-150
... 
```

唯一需要注意的是，我有大约 15 列，其中一些条目在第 3 列或第 4 列结束，因此只需要创建这些文件夹。

任何人都可以帮助这个请求吗？我对编程并不陌生，但我对 VBA 还是很陌生。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T21:01:27.700

```
Sub Tester()

    Const ROOT_FOLDER = "C:\TEMP\"
    Dim rng As Range, rw As Range, c As Range
    Dim sPath As String, tmp As String

    Set rng = Selection

    For Each rw In rng.Rows
        sPath = ROOT_FOLDER
        For Each c In rw.Cells
            tmp = Trim(c.Value)
            If Len(tmp) = 0 Then
                Exit For
            Else
                sPath = sPath & tmp & "\"
                If Len(Dir(sPath, vbDirectory)) = 0 Then MkDir sPath
            End If
        Next c
    Next rw
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-14T16:55:40.173

我找到了一种更好的方法来做同样的事情，更少的代码，更高效。请注意，“”“”是引用路径，以防文件夹名称中包含空格。如有必要，命令行 mkdir 创建任何中间文件夹以使整个路径存在。因此，您所要做的就是使用 \ 作为分隔符来连接单元格以指定您的路径，然后

```
If Dir(YourPath, vbDirectory) = "" Then
    Shell ("cmd /c mkdir """ & YourPath & """")
End If 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T20:56:39.450

Try this out. It assumes you start at column "A" and it also starts the directory in C:\ (using the sDir variable). Just change "C:\" to whatever you want your base point to be if you need to.

```
Option Explicit

Sub startCreating()
    Call CreateDirectory(2, 1)
End Sub

Sub CreateDirectory(ByVal row As Long, ByVal col As Long, Optional ByRef path As String)
    If (Len(ActiveSheet.Cells(row, col).Value) <= 0) Then
        Exit Sub
    End If

    Dim sDir As String

    If (Len(path) <= 0) Then
        path = ActiveSheet.Cells(row, col).Value
        sDir = "C:\" & path
    Else
        sDir = path & "\" & ActiveSheet.Cells(row, col).Value
    End If

    If (FileOrDirExists(sDir) = False) Then
        MkDir sDir
    End If

    If (Len(ActiveSheet.Cells(row, col + 1).Value) <= 0) Then
        Call CreateDirectory(row + 1, 1)
    Else
        Call CreateDirectory(row, col + 1, sDir)
    End If
End Sub

' Function thanks to: http://www.vbaexpress.com/kb/getarticle.php?kb_id=559
Function FileOrDirExists(PathName As String) As Boolean
     'Macro Purpose: Function returns TRUE if the specified file
     '               or folder exists, false if not.
     'PathName     : Supports Windows mapped drives or UNC
     '             : Supports Macintosh paths
     'File usage   : Provide full file path and extension
     'Folder usage : Provide full folder path
     '               Accepts with/without trailing "\" (Windows)
     '               Accepts with/without trailing ":" (Macintosh)

    Dim iTemp As Integer

     'Ignore errors to allow for error evaluation
    On Error Resume Next
    iTemp = GetAttr(PathName)

     'Check if error exists and set response appropriately
    Select Case Err.Number
    Case Is = 0
        FileOrDirExists = True
    Case Else
        FileOrDirExists = False
    End Select

     'Resume error checking
    On Error GoTo 0
End Function 
```

# java - 在不同的目录中使用 Java 的 exec 运行 .sh 文件？

> ID：10093985
> 
> 赞同：1
> 
> 时间：2012-04-10T18:02:03.793
> 
> 标签：java, shell, unix, runtime.exec

我正在编写一个 Java 程序 MyAwesomeProgram，它使用 Process 的 exec 函数在本地运行 bash 命令。我的代码位于 /home/a/b/c 中，我需要运行位于 /home/a/b/d 中的 .sh 文件。但是，当我运行我的代码时：

```
Process p;
Runtime rt = new Runtime.getRuntime();
p = rt.exec("./home/a/b/d/shell.sh");
p.waitFor(); 
```

我收到一个错误：

```
Exception in thread "main" java.io.IOException: Cannot run program "./home/a/b/d/shell.sh": java.io.IOException: error=2, No such file or directory
at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
at java.lang.Runtime.exec(Runtime.java:593)
at java.lang.Runtime.exec(Runtime.java:431)
at java.lang.Runtime.exec(Runtime.java:328)
at MyAwesomeProgram.main(MyAwesomeProgram.java:186)
Caused by: java.io.IOException: java.io.IOException: error=2, No such file or directory
at java.lang.UNIXProcess.<init>(UNIXProcess.java:148)
at java.lang.ProcessImpl.start(ProcessImpl.java:65)
at java.lang.ProcessBuilder.start(ProcessBuilder.java:453) 
```

我相信这只是格式化 exec 命令字符串的错误，但是到目前为止我还没有找到解决方案。我哪里搞砸了？任何其他有效使用 exec 的提示/技巧将不胜感激，但完全是可选的。谢谢！

编辑：我让代码正常工作，这是我倒退的几个目录引用以及 Woot4Moo 所说的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T18:04:59.540

好吧，如果您的程序位于：

```
/home/a/b/c 
```

并且您的脚本位于：

```
/home/a/b/d 
```

并且您使用的是`.`您不在正确的目录中。您想使用以下路径执行它：

```
../d/script.sh 
```

`.`说使用当前目录+你的字符串。所以本质上你的输入如下：

```
/home/a/b/c/home/a/b/d 
```

允许您上`..`一个目录，如果您位于：

```
/home/a/b/c 
```

你想然后到达：

```
/home/a/b 
```

# asp.net - 为 ASP.NET 选择文件夹控件

> ID：10093987
> 
> 赞同：2
> 
> 时间：2012-04-10T18:02:15.697
> 
> 标签：asp.net, select, controls, directory

我想在我的 ASP.NET 4.0 项目中添加一个控件，供用户搜索选择他们的本地目录并选择一个文件夹。这存在吗？

我不想上传文件夹，只需选择它然后操作结果字符串

# c# - WCF 安装程序类 - 找不到引用合同的默认端点元素

> ID：10093990
> 
> 赞同：0
> 
> 时间：2012-04-10T18:02:38.333
> 
> 标签：c#, .net, wcf, installation

我在客户端项目中有安装程序类

```
public override void Install(IDictionary stateSaver)
{
    base.Install(stateSaver);
        using (ServiceReference1.ClientClient client = new ServiceReference1.ClientClient())
        {
            if (!client.Register(Context.Parameters["firstname"], Context.Parameters["lastname"], Context.Parameters["email"], Context.Parameters["password"]))
            {
              throw new InstallException("Email address is already used");
            }
        }
} 
```

结果：在 ServiceModel 客户端配置部分中找不到引用合同“ServiceReference1.IClient”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素。

有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:11:02.110

WCF 查找*YourInstallerAssemblyName.EXE* .config 文件以配置您的安装程序代码正在使用的 WCF 客户端（服务参考）。该文件需要包含`serviceModel`您在其中创建服务引用的 app/web.config 文件中的元素。

# dependency-injection - Doctrine2 和 ZendFramework2 - 在服务层上加载 Doctrine

> ID：10093993
> 
> 赞同：1
> 
> 时间：2012-04-10T18:02:43.583
> 
> 标签：dependency-injection, doctrine-orm, zend-framework2

我正在尝试使用 module.config.php 将教义 2 加载到我的服务层对象中：

```
namespace MyApp;
'di' => array(
    'instance' => array(
        'alias' => array(
            'myapp_doctrine_em' => 'doctrine_em',
        ),
        'orm_driver_chain' => array(
            'parameters' => array(
                'drivers' => array(
                    'MyApp' => array(
                        'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
                        'namespace' => __NAMESPACE__ . '\Models\Entity',
                        'paths' => array(
                            __DIR__ . '/../src/' . __NAMESPACE__ . '/Models/Entity'
                        )
                    )
                )
            )
        ),
        'driver' => array(
            'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
            'namespace' => 'MyApp\Models\Entity',
            'paths' => array('module/MyApp/src/MyApp/Models/Entity')
        ),
        'MyApp\Controller\DefaultController' => array(
            'parameters' => array(
                'em' => 'myapp_doctrine_em',
            )
        ),
        'MyApp\Models\DefaultModel' => array(
            'parameters' => array(
                'em' => 'myapp_doctrine_em',
            ),
        ),
    ),
), 
```

如上所示，当我在控制器中实例化该学说时，它确实有效，但是当对我的模型做同样的事情时，它却没有。

问题： - 我如何继续在我的模型中加载理论实体管理器，而不是通过控制器传递它们？

我错过了什么？

谢谢！

## 添加模型类作为样本

```
namespace MyApp\Models;

use Doctrine\ORM\EntityManager;

class DefaultModel {

    protected $_em;

    public function setEntityManager(EntityManager $em) {
        $this->_em = $em;
    }

    public function getEntityManager() {
        return $this->_em;
    }

} 
```

* * *

我的控制器使用依赖注入方法扩展了 DefaultController，例如：

```
namespace MyApp\Controller;

use Zend\View\Model\ViewModel;

class MyAppController extends DefaultController {

    public function indexAction() {
        $auth = $this->getDI('MyApp\Models\AuthenticationModel');
        $auth->validate($this->getRequest()->post()->toArray());
        ...
        return new ViewModel($data);
    }

} 
```

* * *

默认控制器：

```
namespace MyApp\Controller;

use Zend\Mvc\Controller\ActionController,
    Zend\View\Model\ViewModel;

class DefaultController extends ActionController {

    protected function getDI($service) {
        $di = new Zend\Di\Di();
        $im = new Zend\Di\InstanceManager();
        $di->setInstanceManager($im);
        return $di->get($service);
    }

} 
```

* * *

认证模型：

```
namespace MyApp\Models;

class AuthenticationModel extends DefaultModel {

    public function validate(array $vars) {
        ...
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T20:09:07.523

您必须首先了解您对 DI 所做的一切都需要配置，否则只会发生实例化而无需布线。这意味着，如果您“只是”使用新`Zend\Di\Di`实例，则可以从那里拉取对象，但不会解决任何依赖关系。适当配置 DI 时会注入依赖项。

此 DI 配置在您的模块配置中提供。但是，您的新 DI 实例不知道此配置。您有两个选择：使用配置配置此 DI 实例或使用预配置的 DI 实例。我想说你现在正在尝试完成第一个，而第二个选项要容易得多。

已配置的 DI 实例被注入到任何`Zend\Mvc\Controller\ActionController`可用的`getLocator()`. 这将返回一个`Zend\Di\Locator`实例，默认情况下返回一个`Zend\Di\Di`. 从那里，您可以提取您的服务，因为该 DI 实例已经使用您的模块配置进行了配置。

```
namespace MyApp\Controller;

use Zend\View\Model\ViewModel;

class MyAppController extends DefaultController {

    public function indexAction() {
        $auth = $this->getLocator()->get('MyApp\Models\AuthenticationModel');
        $auth->validate($this->getRequest()->post()->toArray());
        ...
        return new ViewModel($data);
    }

} 
```

请注意，我将您`getDI()`的替换为`getLocator()->get()`. 因此，您可以删除`MyApp\Controller\DefaultController::getDI()`甚至完整的`DefaultController`.

# vba - 如何在表格单元格中复制文本然后查找和替换保持格式的字符串

> ID：10093996
> 
> 赞同：0
> 
> 时间：2012-04-10T18:02:55.010
> 
> 标签：vba, ms-word

我正在 MS Word 文档中编写一些 VBA 代码。

我在文档中创建了一个表格，它是多行 2 列。

第一列包含诸如“欢迎信”之类的标题，表格的第二列包含消息的正文“亲爱的 [客户]，我们欢迎您来到我们公司......”

我希望能够创建一个按钮或某种形式来复制 column2 的内容，将 [client] 替换为我可能创建的变量，即 Dim clientname = 'Bob' 然后将消息放入剪贴板准备就绪用于粘贴到电子邮件中。

模板也具有富文本格式，因此需要维护。我玩过，但我无法保持富文本格式，只要替换格式丢失的东西。

有人对如何实现这一点有任何想法吗？一位同事建议我应该在后台创建一个新的 word 文档并将其用于替换。我被跺脚并且全神贯注于你的建议。干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-21T04:04:11.053

您可以使用表单域作为名称，并通过使用它的 DOM 对象来访问文本，如下所示：

```
ThisDocument.Formfields("name of formfield").Result 
```

从这里您可以将文本保存到变量或随意替换文本。我认为它会保留格式，但如果没有，那么您可以使用内容控件进行研究，将文档的一部分设置为富文本区域。这是信息：

[http://msdn.microsoft.com/en-us/library/office/ff836891(v=office.15).aspx](http://msdn.microsoft.com/en-us/library/office/ff836891(v=office.15).aspx)

我希望这有帮助。